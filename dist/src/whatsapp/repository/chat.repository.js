'use strict';const a38_0x46d10f=a38_0x5c8d;function a38_0x5335(){const _0x187fc7=['push','insertCoun','ice','throw','find','32989vGZxHl','apply','6030slSSPz','where','tory','ChatReposi','join','next','rmSync','iterator','owner','112TuzzjF','readFileSy','chatModel','1468538yOwQAD','.josn','ChatQuery','fined.','.repositor','3567714kvalha','t/abstract','configServ','encoding','path','toString','storePath','length','delete','125SHRQOh','isFile','dbSettings','return','chatId','ENABLED','ues','\x20is\x20not\x20de','5586750PxAvuu','utf-8','value','chats','defineProp','2sPcSOA','asyncItera','done','erty','../abstrac','__esModule','tor','assign','name','call','8699661QtXNJO','501123QjuExI','29092wFdowz','opendirSyn','forEach','error','parse','recursive'];a38_0x5335=function(){return _0x187fc7;};return a38_0x5335();}(function(_0x7a8b99,_0x200741){const _0x401526=a38_0x5c8d,_0xb26182=_0x7a8b99();while(!![]){try{const _0x5cb303=parseInt(_0x401526(0x103))/0x1*(parseInt(_0x401526(0xde))/0x2)+-parseInt(_0x401526(0xc8))/0x3+parseInt(_0x401526(0xea))/0x4*(-parseInt(_0x401526(0xd1))/0x5)+parseInt(_0x401526(0xd9))/0x6+parseInt(_0x401526(0xe9))/0x7*(-parseInt(_0x401526(0x100))/0x8)+-parseInt(_0x401526(0xe8))/0x9+-parseInt(_0x401526(0xf7))/0xa*(-parseInt(_0x401526(0xf5))/0xb);if(_0x5cb303===_0x200741)break;else _0xb26182['push'](_0xb26182['shift']());}catch(_0x212dc3){_0xb26182['push'](_0xb26182['shift']());}}}(a38_0x5335,0xd3f1a));var __awaiter=this&&this['__awaiter']||function(_0x159c2b,_0x2328b8,_0x4f5c6c,_0x3dfec7){function _0x5e78e5(_0x4b31a7){return _0x4b31a7 instanceof _0x4f5c6c?_0x4b31a7:new _0x4f5c6c(function(_0x4a0157){_0x4a0157(_0x4b31a7);});}return new(_0x4f5c6c||(_0x4f5c6c=Promise))(function(_0x2c8c3a,_0x4a4f04){const _0x21a6a1=a38_0x5c8d;function _0x33645f(_0x4158ef){try{_0x165764(_0x3dfec7['next'](_0x4158ef));}catch(_0x464aa3){_0x4a4f04(_0x464aa3);}}function _0x3317b5(_0x1dca1f){const _0x3d0782=a38_0x5c8d;try{_0x165764(_0x3dfec7[_0x3d0782(0xf3)](_0x1dca1f));}catch(_0x3ec2ca){_0x4a4f04(_0x3ec2ca);}}function _0x165764(_0xd47e74){const _0x5e1cf8=a38_0x5c8d;_0xd47e74[_0x5e1cf8(0xe0)]?_0x2c8c3a(_0xd47e74[_0x5e1cf8(0xdb)]):_0x5e78e5(_0xd47e74[_0x5e1cf8(0xdb)])['then'](_0x33645f,_0x3317b5);}_0x165764((_0x3dfec7=_0x3dfec7[_0x21a6a1(0xf6)](_0x159c2b,_0x2328b8||[]))[_0x21a6a1(0xfc)]());});},__asyncValues=this&&this['__asyncVal'+a38_0x46d10f(0xd7)]||function(_0x255fa7){const _0x21d4bd=a38_0x46d10f;if(!Symbol[_0x21d4bd(0xdf)+_0x21d4bd(0xe4)])throw new TypeError('Symbol.asy'+'ncIterator'+_0x21d4bd(0xd8)+_0x21d4bd(0xc6));var _0x403603=_0x255fa7[Symbol[_0x21d4bd(0xdf)+'tor']],_0x2b215c;return _0x403603?_0x403603[_0x21d4bd(0xe7)](_0x255fa7):(_0x255fa7=typeof __values==='function'?__values(_0x255fa7):_0x255fa7[Symbol[_0x21d4bd(0xfe)]](),_0x2b215c={},_0x22712a(_0x21d4bd(0xfc)),_0x22712a(_0x21d4bd(0xf3)),_0x22712a('return'),_0x2b215c[Symbol[_0x21d4bd(0xdf)+_0x21d4bd(0xe4)]]=function(){return this;},_0x2b215c);function _0x22712a(_0x41bee5){_0x2b215c[_0x41bee5]=_0x255fa7[_0x41bee5]&&function(_0x2652b8){return new Promise(function(_0x4cd321,_0x4e3355){const _0x171574=a38_0x5c8d;_0x2652b8=_0x255fa7[_0x41bee5](_0x2652b8),_0xe5d5f4(_0x4cd321,_0x4e3355,_0x2652b8[_0x171574(0xe0)],_0x2652b8[_0x171574(0xdb)]);});};}function _0xe5d5f4(_0x16ee52,_0x44c9a9,_0x2efb38,_0x1133bc){Promise['resolve'](_0x1133bc)['then'](function(_0x4b10fc){const _0x47dc16=a38_0x5c8d,_0x4c1694={};_0x4c1694['value']=_0x4b10fc,_0x4c1694[_0x47dc16(0xe0)]=_0x2efb38,_0x16ee52(_0x4c1694);},_0x44c9a9);}};const a38_0x186457={};a38_0x186457[a38_0x46d10f(0xdb)]=!![],Object[a38_0x46d10f(0xdd)+a38_0x46d10f(0xe1)](exports,a38_0x46d10f(0xe3),a38_0x186457),exports[a38_0x46d10f(0xfa)+a38_0x46d10f(0xf9)]=exports[a38_0x46d10f(0x105)]=void 0x0;const path_1=require(a38_0x46d10f(0xcc)),abstract_repository_1=require(a38_0x46d10f(0xe2)+a38_0x46d10f(0xc9)+a38_0x46d10f(0xc7)+'y'),fs_1=require('fs');class ChatQuery{}exports[a38_0x46d10f(0x105)]=ChatQuery;class ChatRepository extends abstract_repository_1['Repository']{constructor(_0x53d3c0,_0x92836){const _0x19ac56=a38_0x46d10f;super(_0x92836),this['chatModel']=_0x53d3c0,this[_0x19ac56(0xca)+_0x19ac56(0xf2)]=_0x92836;}['insert'](_0x1f1efd,_0x19a6eb=![]){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3ccc48=a38_0x5c8d;if(_0x1f1efd[_0x3ccc48(0xcf)]===0x0)return;try{if(this['dbSettings']['ENABLED']&&_0x19a6eb){const _0x44dac4=yield this['chatModel']['insertMany']([..._0x1f1efd]),_0x955acb={};return _0x955acb[_0x3ccc48(0xf1)+'t']=_0x44dac4[_0x3ccc48(0xcf)],_0x955acb;}_0x1f1efd[_0x3ccc48(0xec)](_0x5be429=>{const _0x466be7=_0x3ccc48;this['writeStore']({'path':(0x0,path_1[_0x466be7(0xfb)])(this[_0x466be7(0xce)],_0x466be7(0xdc),_0x5be429[_0x466be7(0xff)]),'fileName':_0x5be429['id'],'data':_0x5be429});});const _0x576cd9={};return _0x576cd9['insertCoun'+'t']=_0x1f1efd['length'],_0x576cd9;}catch(_0x980a13){return _0x980a13;}finally{_0x1f1efd=undefined;}});}[a38_0x46d10f(0xf4)](_0x4a94a9){var _0x3e7e02,_0x2b255a,_0x1e11ab,_0x573de6;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3ae594=a38_0x5c8d;try{if(this[_0x3ae594(0xd3)][_0x3ae594(0xd6)]){const _0x389420={};return _0x389420[_0x3ae594(0xff)]=_0x4a94a9[_0x3ae594(0xf8)]['owner'],yield this['chatModel'][_0x3ae594(0xf4)](_0x389420);}const _0x3a8edd=[],_0x2051a9=(0x0,fs_1[_0x3ae594(0xeb)+'c'])((0x0,path_1[_0x3ae594(0xfb)])(this['storePath'],_0x3ae594(0xdc),_0x4a94a9[_0x3ae594(0xf8)]['owner']));try{for(var _0x3f12e3=!![],_0x181b00=__asyncValues(_0x2051a9),_0xb3c389;_0xb3c389=yield _0x181b00[_0x3ae594(0xfc)](),_0x3e7e02=_0xb3c389['done'],!_0x3e7e02;){_0x573de6=_0xb3c389['value'],_0x3f12e3=![];try{const _0x4bdb3d=_0x573de6;if(_0x4bdb3d[_0x3ae594(0xd2)]()){const _0x3715a6={};_0x3715a6[_0x3ae594(0xcb)]=_0x3ae594(0xda),_0x3a8edd[_0x3ae594(0xf0)](JSON[_0x3ae594(0xee)]((0x0,fs_1[_0x3ae594(0x101)+'nc'])((0x0,path_1['join'])(this[_0x3ae594(0xce)],'chats',_0x4a94a9['where'][_0x3ae594(0xff)],_0x4bdb3d[_0x3ae594(0xe6)]),_0x3715a6)));}}finally{_0x3f12e3=!![];}}}catch(_0xedde1){const _0x511a41={};_0x511a41[_0x3ae594(0xed)]=_0xedde1,_0x2b255a=_0x511a41;}finally{try{if(!_0x3f12e3&&!_0x3e7e02&&(_0x1e11ab=_0x181b00[_0x3ae594(0xd4)]))yield _0x1e11ab[_0x3ae594(0xe7)](_0x181b00);}finally{if(_0x2b255a)throw _0x2b255a[_0x3ae594(0xed)];}}return _0x3a8edd;}catch(_0x3085f5){return[];}});}[a38_0x46d10f(0xd0)](_0x4ebaf5){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x34363a=a38_0x5c8d;try{if(this[_0x34363a(0xd3)]['ENABLED'])return yield this[_0x34363a(0x102)]['deleteOne'](Object[_0x34363a(0xe5)]({},_0x4ebaf5[_0x34363a(0xf8)]));const _0x4dc5e8={};_0x4dc5e8['force']=!![],_0x4dc5e8[_0x34363a(0xef)]=!![],(0x0,fs_1[_0x34363a(0xfd)])((0x0,path_1[_0x34363a(0xfb)])(this[_0x34363a(0xce)],_0x34363a(0xdc),_0x4ebaf5[_0x34363a(0xf8)]['owner'],_0x4ebaf5[_0x34363a(0xf8)]['id']+_0x34363a(0x104)),_0x4dc5e8);const _0x17c824={};_0x17c824[_0x34363a(0xd5)]=_0x4ebaf5[_0x34363a(0xf8)]['id'];const _0x3ba5b6={};return _0x3ba5b6['deleted']=_0x17c824,_0x3ba5b6;}catch(_0xf0914d){return{'error':_0xf0914d===null||_0xf0914d===void 0x0?void 0x0:_0xf0914d[_0x34363a(0xcd)]()};}});}}function a38_0x5c8d(_0x573a19,_0x3ddabf){const _0x533506=a38_0x5335();return a38_0x5c8d=function(_0x5c8d1a,_0x10b619){_0x5c8d1a=_0x5c8d1a-0xc6;let _0x56d1e6=_0x533506[_0x5c8d1a];return _0x56d1e6;},a38_0x5c8d(_0x573a19,_0x3ddabf);}exports['ChatReposi'+a38_0x46d10f(0xf9)]=ChatRepository;