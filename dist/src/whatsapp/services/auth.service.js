function a51_0x4b6a(_0x2ceb07,_0x1296d2){const _0x117873=a51_0x582c();return a51_0x4b6a=function(_0x1ac601,_0x5c6fb2){_0x1ac601=_0x1ac601-(0x14de+0x1045*0x1+0x209*-0x12);let _0x1d50d8=_0x117873[_0x1ac601];return _0x1d50d8;},a51_0x4b6a(_0x2ceb07,_0x1296d2);}const a51_0xcf1a9c=a51_0x4b6a;(function(_0x16508b,_0x18401d){const _0x221656=a51_0x4b6a,_0x3f36bd=_0x16508b();while(!![]){try{const _0x5d0d08=parseInt(_0x221656(0xb3))/(-0x1*0x1486+-0x23e9+-0x54*-0xac)+parseInt(_0x221656(0xc8))/(-0x1*-0x329+0x21*-0x9e+0x1137)*(-parseInt(_0x221656(0xbd))/(0x2375+0x1*0x7fb+-0x2b6d))+-parseInt(_0x221656(0xb8))/(-0x15c3+-0x31*-0xf+0x12e8)*(parseInt(_0x221656(0xa9))/(-0x160*-0xc+-0xe4+-0xf97))+-parseInt(_0x221656(0xba))/(-0x1360+0x3a*-0xa3+-0xb44*-0x5)*(-parseInt(_0x221656(0xd4))/(0x3*0xb0b+0x7*0x3bf+-0x3b53))+-parseInt(_0x221656(0x81))/(-0x154e+-0x22+0x1578)+-parseInt(_0x221656(0x87))/(0x113e+-0x2570+-0x1*-0x143b)+parseInt(_0x221656(0xbc))/(-0xfd*-0x1b+0x199+0x3*-0x96a)*(parseInt(_0x221656(0xcc))/(0x5e9*0x5+0x2491+0x55*-0xc7));if(_0x5d0d08===_0x18401d)break;else _0x3f36bd['push'](_0x3f36bd['shift']());}catch(_0x4816a6){_0x3f36bd['push'](_0x3f36bd['shift']());}}}(a51_0x582c,-0x8cc5+-0x2*0x3f623+0xcc86d));const a51_0x5e2065=(function(){let _0x13c5be=!![];return function(_0x54764b,_0x4d6af5){const _0x192b2e=_0x13c5be?function(){const _0x1afbb8=a51_0x4b6a;if(_0x4d6af5){if('guEXA'!==_0x1afbb8(0xa1)){const _0x379944=_0x4d6af5[_0x1afbb8(0x8a)](_0x54764b,arguments);return _0x4d6af5=null,_0x379944;}else{const _0xd80026=_0x575ab0?function(){const _0x7a7dcf=_0x1afbb8;if(_0x5570eb){const _0x483252=_0x3ba7a9[_0x7a7dcf(0x8a)](_0x3f8931,arguments);return _0x1cc724=null,_0x483252;}}:function(){};return _0x154283=![],_0xd80026;}}}:function(){};return _0x13c5be=![],_0x192b2e;};}()),a51_0x3d685b=a51_0x5e2065(this,function(){const _0x31b6ed=a51_0x4b6a;return a51_0x3d685b[_0x31b6ed(0x98)]()[_0x31b6ed(0xd7)](_0x31b6ed(0xe1)+'+$')[_0x31b6ed(0x98)]()[_0x31b6ed(0xb1)+'r'](a51_0x3d685b)[_0x31b6ed(0xd7)](_0x31b6ed(0xe1)+'+$');});a51_0x3d685b();'use strict';var __awaiter=this&&this[a51_0xcf1a9c(0xc2)]||function(_0x296707,_0x28b359,_0x3b7148,_0x53d773){function _0x5a465c(_0x2a1675){return _0x2a1675 instanceof _0x3b7148?_0x2a1675:new _0x3b7148(function(_0xb9e33f){const _0x2163c2=a51_0x4b6a;if(_0x2163c2(0x8b)==='iXTYm')throw new _0x1027fd[(_0x2163c2(0xce))+'Exception'](_0x2163c2(0xdd)+'ldToken\x22');else _0xb9e33f(_0x2a1675);});}return new(_0x3b7148||(_0x3b7148=Promise))(function(_0x7b38c7,_0x4a0738){const _0x28e2a1=a51_0x4b6a;function _0x42294b(_0x407c0b){const _0x21ef6c=a51_0x4b6a;if(_0x21ef6c(0xaf)!==_0x21ef6c(0x97))try{_0xf15cb2(_0x53d773[_0x21ef6c(0x9b)](_0x407c0b));}catch(_0x152b2c){if(_0x21ef6c(0xa4)===_0x21ef6c(0xde))try{_0x19c13c(_0x48f5a5[_0x21ef6c(0x9b)](_0x17f9db));}catch(_0x347405){_0x51f31b(_0x347405);}else _0x4a0738(_0x152b2c);}else{const _0x121ad8={};_0x121ad8[_0x21ef6c(0xa5)]=_0x393af7[_0x21ef6c(0xad)]+(_0x21ef6c(0xd0)+_0x21ef6c(0xb7)),_0x121ad8['error']=_0x1d84c2,this['logger'][_0x21ef6c(0x9e)](_0x121ad8);throw new _0x59a301[(_0x21ef6c(0xce))+(_0x21ef6c(0x92))]('Invalid\x20\x22o'+_0x21ef6c(0xd9));}}function _0x5c8399(_0x994c84){const _0x55de39=a51_0x4b6a;if(_0x55de39(0xb0)===_0x55de39(0xc7))_0x27367f[_0x55de39(0xc3)]?_0x51414e(_0x281f5f[_0x55de39(0xbb)]):_0x41a263(_0x4ea7d8['value'])[_0x55de39(0x84)](_0x551dd8,_0x171b1e);else try{if(_0x55de39(0xb6)!=='ceJPm')_0xf15cb2(_0x53d773['throw'](_0x994c84));else{const _0x5c7b49={};_0x5c7b49[_0x55de39(0xa5)]=_0x5e88ed['name']+_0x55de39(0x95),_0x5c7b49['error']=_0x5ab61c[_0x55de39(0x9e)],this[_0x55de39(0x9a)][_0x55de39(0x9e)](_0x5c7b49);throw new _0x2292bc[(_0x55de39(0xce))+(_0x55de39(0x92))](_0x55de39(0x8c)+'tion\x20error',(_0x225358=_0x928e55['error'])===null||_0x1de698===void(0xd*-0xb3+-0x1*0x12+-0x1d5*-0x5)?void(-0x23b4+-0x1c*0x97+-0x8*-0x687):_0x31ef6c[_0x55de39(0x98)]());}}catch(_0x48081b){_0x55de39(0xe3)===_0x55de39(0xe3)?_0x4a0738(_0x48081b):_0x382284(_0x2ee389);}}function _0xf15cb2(_0x358edb){const _0x1586dd=a51_0x4b6a;_0x358edb[_0x1586dd(0xc3)]?_0x7b38c7(_0x358edb['value']):_0x5a465c(_0x358edb[_0x1586dd(0xbb)])[_0x1586dd(0x84)](_0x42294b,_0x5c8399);}_0xf15cb2((_0x53d773=_0x53d773[_0x28e2a1(0x8a)](_0x296707,_0x28b359||[]))[_0x28e2a1(0x9b)]());});},__importDefault=this&&this[a51_0xcf1a9c(0xd1)+a51_0xcf1a9c(0xd8)]||function(_0x514a7c){const _0x13b21b=a51_0xcf1a9c;return _0x514a7c&&_0x514a7c[_0x13b21b(0xdb)]?_0x514a7c:{'default':_0x514a7c};};const a51_0x41b5e6={};a51_0x41b5e6['value']=!![],Object['defineProp'+a51_0xcf1a9c(0x85)](exports,'__esModule',a51_0x41b5e6),exports[a51_0xcf1a9c(0x99)+'e']=exports['OldToken']=void(0x2*-0xc31+0x1*0x40a+0x1458);function a51_0x582c(){const _0x4cf41e=['waMonitor','isJWT','name','auth','sMeXQ','qmabh','constructo','WEBHOOK','202037jReUpj','SECRET','jsonwebtok','psgjl','ken','209068IXsBKq','AUTHENTICA','508008yxAWps','value','370ZeCSmn','14037axZjno','TYPE','repository','../../conf','axios','__awaiter','done','sign','configServ','ice','XcTnG','126ztKepI','get','data','url','272019mYXgMM','verify','BadRequest','NEW_JWT_TO','.refreshTo','__importDe','g-t','ration','7CmluwB','utf8','instance','search','fault','ldToken\x22','create','__esModule','KEN','Invalid\x20\x22o','dJtnf','instanceNa','apikey','(((.+)+)+)','new.jwt','PByMT','2921600Bzwrfg','tmasO','find','then','erty','class-vali','451503owqVcQ','../../../p','../../exce','apply','XEmps','Authentica','default','cZHAU','tion\x20error','toUpperCas','tokenId','Exception','uuid','config','.jwt','JWT','MTinG','toString','AuthServic','logger','next','ignoreExpi','generateHa','error','IXoNF','ptions','rNBFM','bGYsA','post','JlSOl','localError','TION','kQluW','EVENTS','20ZCecIf','jwt'];a51_0x582c=function(){return _0x4cf41e;};return a51_0x582c();}const package_json_1=require(a51_0xcf1a9c(0x88)+'ackage.jso'+'n'),jsonwebtoken_1=require(a51_0xcf1a9c(0xb5)+'en'),logger_config_1=require(a51_0xcf1a9c(0xc0)+'ig/logger.'+a51_0xcf1a9c(0x94)),uuid_1=require(a51_0xcf1a9c(0x93)),class_validator_1=require(a51_0xcf1a9c(0x86)+'dator'),exceptions_1=require(a51_0xcf1a9c(0x89)+a51_0xcf1a9c(0xa0)),axios_1=__importDefault(require(a51_0xcf1a9c(0xc1)));class OldToken{}exports['OldToken']=OldToken;class AuthService{constructor(_0x3c2039,_0x14713d,_0x276380){const _0x32f92a=a51_0xcf1a9c;this['configServ'+'ice']=_0x3c2039,this[_0x32f92a(0xab)]=_0x14713d,this[_0x32f92a(0xbf)]=_0x276380,this[_0x32f92a(0x9a)]=new logger_config_1['Logger'](AuthService[_0x32f92a(0xad)]);}[a51_0xcf1a9c(0xaa)](_0x49686c){var _0x52b1d3;return __awaiter(this,void(0x6*-0x6d+0x156a*-0x1+0x17f8),void(-0x355+-0x1*-0x1eb2+0x579*-0x5),function*(){const _0x26b208=a51_0x4b6a,_0x169194=this['configServ'+_0x26b208(0xc6)]['get'](_0x26b208(0xb9)+_0x26b208(0xa6))[_0x26b208(0x96)],_0x157dd6=(-0x12d0+0xef0*0x2+-0xb10,jsonwebtoken_1[_0x26b208(0xc4)])({'instanceName':_0x49686c[_0x26b208(0xdf)+'me'],'apiName':package_json_1[_0x26b208(0xad)],'tokenId':(-0x218d*0x1+0x11f5*0x2+-0x1*0x25d,uuid_1['v4'])()},_0x169194[_0x26b208(0xb4)],{'expiresIn':_0x169194['EXPIRIN_IN'],'encoding':_0x26b208(0xd5),'subject':_0x26b208(0xd2)}),_0x5c48b1={};_0x5c48b1[_0x26b208(0xaa)]=_0x157dd6;const _0x348322=yield this[_0x26b208(0xbf)][_0x26b208(0xae)]['create'](_0x5c48b1,_0x49686c[_0x26b208(0xdf)+'me']);if(_0x348322['error']){const _0x37fa41={};_0x37fa41[_0x26b208(0xa5)]=AuthService['name']+_0x26b208(0x95),_0x37fa41[_0x26b208(0x9e)]=_0x348322[_0x26b208(0x9e)],this['logger']['error'](_0x37fa41);throw new exceptions_1[(_0x26b208(0xce))+(_0x26b208(0x92))](_0x26b208(0x8c)+_0x26b208(0x8f),(_0x52b1d3=_0x348322[_0x26b208(0x9e)])===null||_0x52b1d3===void(-0x2183+-0xfa0+0x3123)?void(-0xbfc+-0x8*0x259+0xb*0x2cc):_0x52b1d3[_0x26b208(0x98)]());}const _0x455c27={};return _0x455c27['jwt']=_0x157dd6,_0x455c27;});}['apikey'](_0x2acd61){var _0x3b1f52;return __awaiter(this,void(-0x1*0x375+0xf56+0x1*-0xbe1),void(0x4dc*0x1+0x228a+0x52*-0x7b),function*(){const _0x4c11f1=a51_0x4b6a;if('twwQJ'!=='VaQvr'){const _0xe49c61=(0x17*-0x115+0x3*0x868+0x11*-0x5,uuid_1['v4'])()[_0x4c11f1(0x90)+'e'](),_0x24be0f={};_0x24be0f[_0x4c11f1(0xe0)]=_0xe49c61;const _0x4a160f=yield this[_0x4c11f1(0xbf)][_0x4c11f1(0xae)][_0x4c11f1(0xda)](_0x24be0f,_0x2acd61[_0x4c11f1(0xdf)+'me']);if(_0x4a160f[_0x4c11f1(0x9e)]){const _0x865db9={};_0x865db9[_0x4c11f1(0xa5)]=AuthService[_0x4c11f1(0xad)]+_0x4c11f1(0x95),_0x865db9[_0x4c11f1(0x9e)]=_0x4a160f[_0x4c11f1(0x9e)],this[_0x4c11f1(0x9a)][_0x4c11f1(0x9e)](_0x865db9);throw new exceptions_1[(_0x4c11f1(0xce))+(_0x4c11f1(0x92))](_0x4c11f1(0x8c)+'tion\x20error',(_0x3b1f52=_0x4a160f[_0x4c11f1(0x9e)])===null||_0x3b1f52===void(-0x295*-0x8+0x753*0x4+0x2*-0x18fa)?void(-0x35*-0x40+-0x6*0x83+0x1*-0xa2e):_0x3b1f52[_0x4c11f1(0x98)]());}const _0x12646d={};return _0x12646d[_0x4c11f1(0xe0)]=_0xe49c61,_0x12646d;}else return _0x5867c1[_0x4c11f1(0x98)]()[_0x4c11f1(0xd7)]('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x58a07c)['search'](_0x4c11f1(0xe1)+'+$');});}[a51_0xcf1a9c(0x9d)+'sh'](_0x41ca3d){return __awaiter(this,void(-0x185b+0x256a+-0x1*0xd0f),void(0xbee+0x343+-0xf31),function*(){const _0x4194ba=a51_0x4b6a,_0x1c765d=this[_0x4194ba(0xc5)+_0x4194ba(0xc6)][_0x4194ba(0xc9)](_0x4194ba(0xb9)+_0x4194ba(0xa6));return yield this[_0x1c765d[_0x4194ba(0xbe)]](_0x41ca3d);});}['refreshTok'+'en']({oldToken:_0x38e607}){return __awaiter(this,void(-0xbf*-0xb+-0x1a7c+0x1247),void(-0xfe0+-0x5*0x59c+0x2*0x15f6),function*(){const _0x703b81=a51_0x4b6a;if(!(-0x12be+0x68*-0x41+-0x2d26*-0x1,class_validator_1[_0x703b81(0xac)])(_0x38e607))throw new exceptions_1['BadRequest'+'Exception'](_0x703b81(0xdd)+'ldToken\x22');try{if(_0x703b81(0x8e)==='cZHAU'){const _0x2cefca=this[_0x703b81(0xc5)+_0x703b81(0xc6)][_0x703b81(0xc9)]('AUTHENTICA'+_0x703b81(0xa6))['JWT'],_0x238dd6={};_0x238dd6[_0x703b81(0x9c)+_0x703b81(0xd3)]=!![];const _0x3e0382=(0xfc7+0x1447+-0x240e,jsonwebtoken_1[_0x703b81(0xcd)])(_0x38e607,_0x2cefca[_0x703b81(0xb4)],_0x238dd6),_0x342985=yield this[_0x703b81(0xbf)]['auth']['find'](_0x3e0382[_0x703b81(0xdf)+'me']),_0x1bade1={};_0x1bade1[_0x703b81(0x9c)+_0x703b81(0xd3)]=!![];const _0x346dae=(0x165a*0x1+-0x5a+-0x1600,jsonwebtoken_1[_0x703b81(0xcd)])(_0x342985[_0x703b81(0xaa)],_0x2cefca[_0x703b81(0xb4)],_0x1bade1);if(_0x3e0382['tokenId']!==_0x346dae[_0x703b81(0x91)]){if(_0x703b81(0x82)===_0x703b81(0x82))throw new exceptions_1['BadRequest'+(_0x703b81(0x92))](_0x703b81(0xdd)+_0x703b81(0xd9));else _0x27b871(_0x532b23['next'](_0x5d71e1));}const _0x482e48={};_0x482e48['instanceNa'+'me']=_0x3e0382[_0x703b81(0xdf)+'me'];const _0x5cd89f={'jwt':(yield this[_0x703b81(0xaa)](_0x482e48))[_0x703b81(0xaa)],'instanceName':_0x3e0382[_0x703b81(0xdf)+'me']};try{if(_0x703b81(0x9f)!=='tQaEr'){const _0x140e94=yield this['repository']['webhook'][_0x703b81(0x83)](_0x3e0382['instanceNa'+'me']);if(_0x140e94['enabled']&&this[_0x703b81(0xc5)+_0x703b81(0xc6)][_0x703b81(0xc9)](_0x703b81(0xb2))[_0x703b81(0xa8)][_0x703b81(0xcf)+_0x703b81(0xdc)]){const _0x580195={};_0x580195['baseURL']=_0x140e94[_0x703b81(0xcb)];const _0x1d749c=axios_1[_0x703b81(0x8d)][_0x703b81(0xda)](_0x580195),_0x22dfbe={};_0x22dfbe['event']=_0x703b81(0xe2),_0x22dfbe[_0x703b81(0xd6)]=_0x3e0382['instanceNa'+'me'],_0x22dfbe[_0x703b81(0xca)]=_0x5cd89f;const _0xfec6b1={};_0xfec6b1['ownre']=this[_0x703b81(0xab)]['waInstance'+'s'][_0x3e0382[_0x703b81(0xdf)+'me']]['wuid'];const _0x22c0fc={};_0x22c0fc['params']=_0xfec6b1,yield _0x1d749c[_0x703b81(0xa3)]('',_0x22dfbe,_0x22c0fc);}}else{const _0x16020b={};return _0x16020b['default']=_0x2d6b31,_0x2ef23f&&_0x2dd37a[_0x703b81(0xdb)]?_0x22be75:_0x16020b;}}catch(_0x38f123){if(_0x703b81(0xa7)===_0x703b81(0xa2)){if(_0x1695ae){const _0x479479=_0x570f22['apply'](_0x20a127,arguments);return _0x435436=null,_0x479479;}}else this[_0x703b81(0x9a)]['error'](_0x38f123);}return _0x5cd89f;}else return _0x2d6f63 instanceof _0x2cb877?_0x2b2687:new _0x319f5(function(_0x56ccde){_0x56ccde(_0x5e7b8b);});}catch(_0x59d251){const _0x5dd372={};_0x5dd372[_0x703b81(0xa5)]=AuthService[_0x703b81(0xad)]+(_0x703b81(0xd0)+'ken'),_0x5dd372[_0x703b81(0x9e)]=_0x59d251,this[_0x703b81(0x9a)][_0x703b81(0x9e)](_0x5dd372);throw new exceptions_1[(_0x703b81(0xce))+(_0x703b81(0x92))](_0x703b81(0xdd)+'ldToken\x22');}});}}exports[a51_0xcf1a9c(0x99)+'e']=AuthService;