'use strict';function a30_0x18eb(_0x354c3f,_0x4d3cad){const _0x5b8a61=a30_0x5b8a();return a30_0x18eb=function(_0x18ebbc,_0x5672fe){_0x18ebbc=_0x18ebbc-0x19a;let _0x5a5d5c=_0x5b8a61[_0x18ebbc];return _0x5a5d5c;},a30_0x18eb(_0x354c3f,_0x4d3cad);}const a30_0x1b772e=a30_0x18eb;(function(_0x28fdcf,_0x5ef14e){const _0x1c9987=a30_0x18eb,_0x5731a8=_0x28fdcf();while(!![]){try{const _0x23c622=-parseInt(_0x1c9987(0x1c7))/0x1*(-parseInt(_0x1c9987(0x1a9))/0x2)+-parseInt(_0x1c9987(0x1a8))/0x3*(-parseInt(_0x1c9987(0x1d7))/0x4)+-parseInt(_0x1c9987(0x1ac))/0x5*(-parseInt(_0x1c9987(0x19e))/0x6)+parseInt(_0x1c9987(0x1d3))/0x7+parseInt(_0x1c9987(0x1aa))/0x8+parseInt(_0x1c9987(0x1d1))/0x9*(parseInt(_0x1c9987(0x19a))/0xa)+-parseInt(_0x1c9987(0x1a4))/0xb;if(_0x23c622===_0x5ef14e)break;else _0x5731a8['push'](_0x5731a8['shift']());}catch(_0x998c58){_0x5731a8['push'](_0x5731a8['shift']());}}}(a30_0x5b8a,0xea7f4));var __awaiter=this&&this[a30_0x1b772e(0x1d4)]||function(_0xc98cc,_0x2c7787,_0x556c9c,_0x4d0bee){function _0x576d23(_0xf66c69){return _0xf66c69 instanceof _0x556c9c?_0xf66c69:new _0x556c9c(function(_0x41409a){_0x41409a(_0xf66c69);});}return new(_0x556c9c||(_0x556c9c=Promise))(function(_0x4780a1,_0x428c6f){const _0x229bfe=a30_0x18eb;function _0x125e4e(_0x9c4a6a){try{_0x1805c2(_0x4d0bee['next'](_0x9c4a6a));}catch(_0xcf57d7){_0x428c6f(_0xcf57d7);}}function _0x13390e(_0x5b8262){const _0x906e99=a30_0x18eb;try{_0x1805c2(_0x4d0bee[_0x906e99(0x1b9)](_0x5b8262));}catch(_0x239d11){_0x428c6f(_0x239d11);}}function _0x1805c2(_0x39859){const _0x6a16a3=a30_0x18eb;_0x39859['done']?_0x4780a1(_0x39859['value']):_0x576d23(_0x39859[_0x6a16a3(0x1c9)])['then'](_0x125e4e,_0x13390e);}_0x1805c2((_0x4d0bee=_0x4d0bee[_0x229bfe(0x1ab)](_0xc98cc,_0x2c7787||[]))['next']());});};const a30_0x501c1f={};a30_0x501c1f[a30_0x1b772e(0x1c9)]=!![],Object[a30_0x1b772e(0x1b3)+'erty'](exports,a30_0x1b772e(0x1be),a30_0x501c1f),exports[a30_0x1b772e(0x1c6)+a30_0x1b772e(0x1ae)]=exports[a30_0x1b772e(0x1c2)+'istsGuard']=void 0x0;const fs_1=require('fs'),path_1=require('path'),path_config_1=require(a30_0x1b772e(0x1d5)+a30_0x1b772e(0x1b8)+a30_0x1b772e(0x1cf)),db_connect_1=require('../../db/d'+a30_0x1b772e(0x19b)),exceptions_1=require(a30_0x1b772e(0x1ca)+a30_0x1b772e(0x1bb)),repository_manager_1=require(a30_0x1b772e(0x1bc)+a30_0x1b772e(0x1a6)+a30_0x1b772e(0x1a1)+'er'),whatsapp_module_1=require('../whatsap'+a30_0x1b772e(0x1ad));function getInstance(_0x33e540){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4ee98e=a30_0x18eb,_0x54871e=whatsapp_module_1['waMonitor'][_0x4ee98e(0x1a3)+'s'][_0x33e540];if(db_connect_1['db'][_0x4ee98e(0x1a0)]){const _0x3b7cd5=repository_manager_1[_0x4ee98e(0x1a2)+_0x4ee98e(0x1af)][_0x4ee98e(0x1c1)]['db'](db_connect_1['db'][_0x4ee98e(0x1b2)]['DB_PREFIX_'+_0x4ee98e(0x1c5)]+_0x4ee98e(0x1b6))[_0x4ee98e(0x1b4)](_0x33e540);return _0x54871e||(yield _0x3b7cd5[_0x4ee98e(0x1c0)]({})[_0x4ee98e(0x1ba)]())[_0x4ee98e(0x1b1)]>0x0;}return _0x54871e||(0x0,fs_1['existsSync'])((0x0,path_1[_0x4ee98e(0x19f)])(path_config_1[_0x4ee98e(0x1b5)+'IR'],_0x33e540));});}function a30_0x5b8a(){const _0x4c2cb7=['CONNECTION','defineProp','collection','INSTANCE_D','-instances','The\x20\x22','ig/path.co','throw','toArray','ptions','../reposit','waMonitor','__esModule','BadRequest','find','dbServer','instanceEx','body','This\x20name\x20','NAME','instanceLo','316717UpupOh','/instance/','value','../../exce','ame\x22\x20not\x20p','\x22\x20instance','dy\x20in\x20use.','istsGuard','nfig','originalUr','1071JFPTpT','includes','9711821cyRnkb','__awaiter','../../conf','NotFoundEx','622832btopyB','instanceNa','nces','113760LAKXom','b.connect','\x22\x20is\x20alrea','fetchInsta','529218IzpJou','join','ENABLED','tory.manag','Repository','waInstance','62790013uISbKa','Exception','ory/reposi','create','36FknlRO','2ZlKxaM','8293592zMUfjn','apply','40mbinIs','p.module','ggedGuard','Broker','rovided.','length'];a30_0x5b8a=function(){return _0x4c2cb7;};return a30_0x5b8a();}function instanceExistsGuard(_0x1ef045,_0x182e40,_0x1c4513){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x430aee=a30_0x18eb;if(_0x1ef045[_0x430aee(0x1d0)+'l'][_0x430aee(0x1d2)](_0x430aee(0x1c8)+'create')||_0x1ef045[_0x430aee(0x1d0)+'l'][_0x430aee(0x1d2)]('/instance/'+_0x430aee(0x19d)+_0x430aee(0x1d9)))return _0x1c4513();const _0x3666c9=_0x1ef045['params'];if(!(_0x3666c9===null||_0x3666c9===void 0x0?void 0x0:_0x3666c9[_0x430aee(0x1d8)+'me']))throw new exceptions_1[(_0x430aee(0x1bf))+(_0x430aee(0x1a5))]('\x22instanceN'+_0x430aee(0x1cb)+_0x430aee(0x1b0));if(!(yield getInstance(_0x3666c9[_0x430aee(0x1d8)+'me'])))throw new exceptions_1[(_0x430aee(0x1d6))+'ception'](_0x430aee(0x1b7)+_0x3666c9['instanceNa'+'me']+(_0x430aee(0x1cc)+'\x20does\x20not\x20'+'exist'));_0x1c4513();});}exports[a30_0x1b772e(0x1c2)+a30_0x1b772e(0x1ce)]=instanceExistsGuard;function instanceLoggedGuard(_0x1a4cbe,_0x3bb7b2,_0x1630be){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2e61f2=a30_0x18eb;if(_0x1a4cbe[_0x2e61f2(0x1d0)+'l']['includes'](_0x2e61f2(0x1c8)+_0x2e61f2(0x1a7))){const _0xd2f49a=_0x1a4cbe[_0x2e61f2(0x1c3)];if(yield getInstance(_0xd2f49a[_0x2e61f2(0x1d8)+'me']))throw new exceptions_1['ForbidenEx'+'ception'](_0x2e61f2(0x1c4)+'\x22'+_0xd2f49a[_0x2e61f2(0x1d8)+'me']+(_0x2e61f2(0x19c)+_0x2e61f2(0x1cd)));whatsapp_module_1[_0x2e61f2(0x1bd)][_0x2e61f2(0x1a3)+'s'][_0xd2f49a[_0x2e61f2(0x1d8)+'me']]&&delete whatsapp_module_1[_0x2e61f2(0x1bd)][_0x2e61f2(0x1a3)+'s'][_0xd2f49a[_0x2e61f2(0x1d8)+'me']];}_0x1630be();});}exports[a30_0x1b772e(0x1c6)+'ggedGuard']=instanceLoggedGuard;