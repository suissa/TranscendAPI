'use strict';const a29_0x551d1c=a29_0x4ae4;(function(_0x37a4d9,_0xab0a13){const _0x3ec8a0=a29_0x4ae4,_0x4ce7b8=_0x37a4d9();while(!![]){try{const _0x2a50b2=parseInt(_0x3ec8a0(0x1a7))/0x1*(-parseInt(_0x3ec8a0(0x163))/0x2)+parseInt(_0x3ec8a0(0x179))/0x3*(-parseInt(_0x3ec8a0(0x180))/0x4)+-parseInt(_0x3ec8a0(0x18d))/0x5*(-parseInt(_0x3ec8a0(0x177))/0x6)+parseInt(_0x3ec8a0(0x197))/0x7*(-parseInt(_0x3ec8a0(0x185))/0x8)+parseInt(_0x3ec8a0(0x16c))/0x9*(-parseInt(_0x3ec8a0(0x189))/0xa)+parseInt(_0x3ec8a0(0x15d))/0xb*(parseInt(_0x3ec8a0(0x194))/0xc)+parseInt(_0x3ec8a0(0x19d))/0xd*(parseInt(_0x3ec8a0(0x15e))/0xe);if(_0x2a50b2===_0xab0a13)break;else _0x4ce7b8['push'](_0x4ce7b8['shift']());}catch(_0x427177){_0x4ce7b8['push'](_0x4ce7b8['shift']());}}}(a29_0x45e4,0xb6e24));var __awaiter=this&&this[a29_0x551d1c(0x1a9)]||function(_0x492339,_0x4a7eac,_0x5172ed,_0x5b5e12){function _0x19927f(_0xb106ef){return _0xb106ef instanceof _0x5172ed?_0xb106ef:new _0x5172ed(function(_0x5a33f9){_0x5a33f9(_0xb106ef);});}return new(_0x5172ed||(_0x5172ed=Promise))(function(_0x2ebd9a,_0x3dab38){const _0x4e7d57=a29_0x4ae4;function _0x5ac009(_0x948c3e){const _0x3267d0=a29_0x4ae4;try{_0x447a8a(_0x5b5e12[_0x3267d0(0x175)](_0x948c3e));}catch(_0xe3d5ee){_0x3dab38(_0xe3d5ee);}}function _0x2269ca(_0x522531){const _0x2d9430=a29_0x4ae4;try{_0x447a8a(_0x5b5e12[_0x2d9430(0x192)](_0x522531));}catch(_0x228b73){_0x3dab38(_0x228b73);}}function _0x447a8a(_0x5694df){const _0x44c3bf=a29_0x4ae4;_0x5694df[_0x44c3bf(0x196)]?_0x2ebd9a(_0x5694df[_0x44c3bf(0x188)]):_0x19927f(_0x5694df[_0x44c3bf(0x188)])[_0x44c3bf(0x176)](_0x5ac009,_0x2269ca);}_0x447a8a((_0x5b5e12=_0x5b5e12[_0x4e7d57(0x17c)](_0x492339,_0x4a7eac||[]))[_0x4e7d57(0x175)]());});},__importDefault=this&&this[a29_0x551d1c(0x195)+'fault']||function(_0x34c7b7){return _0x34c7b7&&_0x34c7b7['__esModule']?_0x34c7b7:{'default':_0x34c7b7};};const a29_0x320729={};a29_0x320729[a29_0x551d1c(0x188)]=!![],Object[a29_0x551d1c(0x190)+a29_0x551d1c(0x186)](exports,a29_0x551d1c(0x19e),a29_0x320729),exports['authGuard']=void 0x0;const class_validator_1=require(a29_0x551d1c(0x18b)+'dator'),jsonwebtoken_1=__importDefault(require(a29_0x551d1c(0x16b)+'en')),env_config_1=require(a29_0x551d1c(0x183)+a29_0x551d1c(0x1a6)+a29_0x551d1c(0x167)),logger_config_1=require('../../conf'+'ig/logger.'+a29_0x551d1c(0x15f)),package_json_1=require(a29_0x551d1c(0x162)+a29_0x551d1c(0x1a5)+'n'),exceptions_1=require(a29_0x551d1c(0x17e)+a29_0x551d1c(0x16f)),whatsapp_module_1=require(a29_0x551d1c(0x160)+a29_0x551d1c(0x1a4)),logger=new logger_config_1[(a29_0x551d1c(0x170))](a29_0x551d1c(0x171));function jwtGuard(_0x32461c,_0xfb434,_0x2325d2){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x44e7c5=a29_0x4ae4,_0x496821=_0x32461c[_0x44e7c5(0x193)](_0x44e7c5(0x173));if(_0x496821&&env_config_1[_0x44e7c5(0x178)+'ice'][_0x44e7c5(0x193)](_0x44e7c5(0x199)+'TION')[_0x44e7c5(0x16a)+_0x44e7c5(0x18a)]!==_0x496821)throw new exceptions_1[(_0x44e7c5(0x17b))+(_0x44e7c5(0x166))+'n']();if(env_config_1[_0x44e7c5(0x178)+'ice'][_0x44e7c5(0x193)](_0x44e7c5(0x199)+_0x44e7c5(0x18f))['GLOBAL_API'+_0x44e7c5(0x18a)]===_0x496821)return _0x2325d2();if((_0x32461c[_0x44e7c5(0x165)+'l'][_0x44e7c5(0x1a3)]('/instance/'+_0x44e7c5(0x17a))||_0x32461c[_0x44e7c5(0x165)+'l'][_0x44e7c5(0x1a3)]('/instance/'+'fetchInsta'+_0x44e7c5(0x15c)))&&!_0x496821)throw new exceptions_1[(_0x44e7c5(0x18e))+(_0x44e7c5(0x1a1))](_0x44e7c5(0x17f)+_0x44e7c5(0x19c)+'ey',_0x44e7c5(0x168)+_0x44e7c5(0x161)+'ust\x20be\x20set');const _0x115c1d=env_config_1[_0x44e7c5(0x178)+_0x44e7c5(0x1a2)][_0x44e7c5(0x193)](_0x44e7c5(0x199)+_0x44e7c5(0x18f))[_0x44e7c5(0x17d)];try{const [_0x47596a,_0x4a5ae2]=_0x32461c['get'](_0x44e7c5(0x172)+'ion')[_0x44e7c5(0x164)]('\x20');if(_0x47596a[_0x44e7c5(0x191)+'e']()!==_0x44e7c5(0x187))throw new exceptions_1[(_0x44e7c5(0x17b))+'edExceptio'+'n']();if(!(0x0,class_validator_1[_0x44e7c5(0x182)])(_0x4a5ae2))throw new exceptions_1[(_0x44e7c5(0x17b))+(_0x44e7c5(0x166))+'n']();const _0x50a6f4=_0x32461c['params'],_0x59bf8b=jsonwebtoken_1[_0x44e7c5(0x19b)][_0x44e7c5(0x198)](_0x4a5ae2,_0x115c1d[_0x44e7c5(0x1a0)],{'ignoreExpiration':_0x115c1d[_0x44e7c5(0x1a8)]===0x0});if(_0x50a6f4[_0x44e7c5(0x19a)+'me']!==_0x59bf8b[_0x44e7c5(0x19a)+'me']||package_json_1[_0x44e7c5(0x16e)]!==_0x59bf8b[_0x44e7c5(0x18c)])throw new exceptions_1[(_0x44e7c5(0x17b))+(_0x44e7c5(0x166))+'n']();return _0x2325d2();}catch(_0x47128a){logger['error'](_0x47128a);throw new exceptions_1['Unauthoriz'+(_0x44e7c5(0x166))+'n']();}});}function a29_0x4ae4(_0x5ce68f,_0x41cf6a){const _0x45e431=a29_0x45e4();return a29_0x4ae4=function(_0x4ae4b7,_0x4bbec6){_0x4ae4b7=_0x4ae4b7-0x15b;let _0x91cc4e=_0x45e431[_0x4ae4b7];return _0x91cc4e;},a29_0x4ae4(_0x5ce68f,_0x41cf6a);}function apikey(_0x20e26c,_0x1bfe2d,_0x416cee){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5ad24d=a29_0x4ae4,{GLOBAL_API_KEY:_0x576805}=env_config_1[_0x5ad24d(0x178)+_0x5ad24d(0x1a2)][_0x5ad24d(0x193)](_0x5ad24d(0x199)+_0x5ad24d(0x18f)),_0x5613e2=_0x20e26c[_0x5ad24d(0x193)](_0x5ad24d(0x173));if(_0x576805===_0x5613e2)return _0x416cee();if((_0x20e26c[_0x5ad24d(0x165)+'l'][_0x5ad24d(0x1a3)](_0x5ad24d(0x184)+_0x5ad24d(0x17a))||_0x20e26c[_0x5ad24d(0x165)+'l'][_0x5ad24d(0x1a3)](_0x5ad24d(0x184)+_0x5ad24d(0x174)+'nces'))&&!_0x5613e2)throw new exceptions_1['ForbidenEx'+(_0x5ad24d(0x1a1))](_0x5ad24d(0x17f)+'obal\x20api\x20k'+'ey',_0x5ad24d(0x168)+'\x20api\x20key\x20m'+_0x5ad24d(0x169));try{const _0x34cc58=_0x20e26c['params'],_0x188eac=yield whatsapp_module_1[_0x5ad24d(0x19f)]['auth'][_0x5ad24d(0x181)](_0x34cc58[_0x5ad24d(0x19a)+'me']);if(_0x188eac['apikey']===_0x5613e2)return _0x416cee();}catch(_0x3d52e1){throw new exceptions_1['ForbidenEx'+(_0x5ad24d(0x1a1))](_0x3d52e1===null||_0x3d52e1===void 0x0?void 0x0:_0x3d52e1['toString']());}throw new exceptions_1[(_0x5ad24d(0x17b))+(_0x5ad24d(0x166))+'n']();});}const a29_0x2f46a8={};function a29_0x45e4(){const _0x2f51c1=['3SnezKT','create','Unauthoriz','apply','JWT','../../exce','Missing\x20gl','4027028oOjiCv','find','isJWT','../../conf','/instance/','111920InujNg','erty','bearer','value','91820rhJZnw','_KEY','class-vali','apiName','5YcpBVY','ForbidenEx','TION','defineProp','toLowerCas','throw','get','1992jEuawS','__importDe','done','105pGxscW','verify','AUTHENTICA','instanceNa','default','obal\x20api\x20k','26JkgFEx','__esModule','repository','SECRET','ception','ice','includes','p.module','ackage.jso','ig/env.con','17870VFjRro','EXPIRIN_IN','__awaiter','jwt','nces','3179CPaDle','7551068PdVKDy','config','../whatsap','\x20api\x20key\x20m','../../../p','24SwHYQV','split','originalUr','edExceptio','fig','The\x20global','ust\x20be\x20set','GLOBAL_API','jsonwebtok','126EWYNHP','authGuard','name','ptions','Logger','GUARD','authorizat','apikey','fetchInsta','next','then','7091934EDTUhn','configServ'];a29_0x45e4=function(){return _0x2f51c1;};return a29_0x45e4();}a29_0x2f46a8[a29_0x551d1c(0x15b)]=jwtGuard,a29_0x2f46a8[a29_0x551d1c(0x173)]=apikey,exports[a29_0x551d1c(0x16d)]=a29_0x2f46a8;