'use strict';const a52_0x520d06=a52_0x5405;(function(_0x2f61f6,_0x422f5b){const _0x5dba57=a52_0x5405,_0x5161b2=_0x2f61f6();while(!![]){try{const _0x2f06dd=parseInt(_0x5dba57(0xc7))/(-0x73*0x52+0x22f7*-0x1+0x47ce)*(parseInt(_0x5dba57(0xe7))/(-0x1de*-0x13+-0x1ad0+-0x8a8))+parseInt(_0x5dba57(0xab))/(0x116*-0x1+0xf82+-0x1*0xe69)*(parseInt(_0x5dba57(0xf6))/(-0x1*0x1ab3+-0x2139+0x89*0x70))+-parseInt(_0x5dba57(0xe1))/(0x2*0x202+-0xd81+0x982)*(-parseInt(_0x5dba57(0xdc))/(0x687+0x1a98+-0x2119))+parseInt(_0x5dba57(0xdf))/(-0x159e+0x86+-0x151f*-0x1)+parseInt(_0x5dba57(0xfa))/(0x1*-0x419+-0x20c8*0x1+-0xb*-0x35b)+-parseInt(_0x5dba57(0xb1))/(0xaf+-0xafb+-0x211*-0x5)+-parseInt(_0x5dba57(0xd5))/(0xbdc+-0x1f*0x4f+-0x1*0x241);if(_0x2f06dd===_0x422f5b)break;else _0x5161b2['push'](_0x5161b2['shift']());}catch(_0x479866){_0x5161b2['push'](_0x5161b2['shift']());}}}(a52_0x1f7b,-0x2*-0x1183+0x1*-0x31569+0x4d377));var __awaiter=this&&this[a52_0x520d06(0xfb)]||function(_0x5d4596,_0x566131,_0x480951,_0x4cf919){function _0x5a8ce0(_0x203185){return _0x203185 instanceof _0x480951?_0x203185:new _0x480951(function(_0x3def5b){_0x3def5b(_0x203185);});}return new(_0x480951||(_0x480951=Promise))(function(_0x1de564,_0x1a17f2){const _0x298262=a52_0x5405;function _0x3435ce(_0x4cefd1){const _0x50e5b0=a52_0x5405;try{_0x16a250(_0x4cf919[_0x50e5b0(0xb5)](_0x4cefd1));}catch(_0x44250a){_0x1a17f2(_0x44250a);}}function _0x1b395e(_0x3f905c){const _0xeddd8d=a52_0x5405;try{_0x16a250(_0x4cf919[_0xeddd8d(0xfd)](_0x3f905c));}catch(_0x5dff1a){_0x1a17f2(_0x5dff1a);}}function _0x16a250(_0xec8b8f){const _0x5e6c47=a52_0x5405;_0xec8b8f[_0x5e6c47(0xc9)]?_0x1de564(_0xec8b8f[_0x5e6c47(0xcc)]):_0x5a8ce0(_0xec8b8f['value'])[_0x5e6c47(0xc4)](_0x3435ce,_0x1b395e);}_0x16a250((_0x4cf919=_0x4cf919['apply'](_0x5d4596,_0x566131||[]))[_0x298262(0xb5)]());});},__importDefault=this&&this[a52_0x520d06(0xf0)+a52_0x520d06(0xaf)]||function(_0x10b0c3){const _0x42b7cb=a52_0x520d06;return _0x10b0c3&&_0x10b0c3[_0x42b7cb(0xb0)]?_0x10b0c3:{'default':_0x10b0c3};};const a52_0x835c51={};a52_0x835c51[a52_0x520d06(0xcc)]=!![],Object[a52_0x520d06(0xce)+a52_0x520d06(0xb9)](exports,a52_0x520d06(0xb0),a52_0x835c51),exports[a52_0x520d06(0xd4)+'e']=exports['OldToken']=void(-0xca*0x29+-0x19ef+0x3a49);const package_json_1=require(a52_0x520d06(0xc3)+a52_0x520d06(0xd2)+'n'),jsonwebtoken_1=require('jsonwebtok'+'en'),logger_config_1=require(a52_0x520d06(0xaa)+a52_0x520d06(0xe6)+a52_0x520d06(0xd6)),uuid_1=require(a52_0x520d06(0xfe)),class_validator_1=require(a52_0x520d06(0xf9)+'dator'),exceptions_1=require(a52_0x520d06(0xb3)+'ptions'),axios_1=__importDefault(require(a52_0x520d06(0xdd)));class OldToken{}function a52_0x5405(_0x1c6942,_0x579f41){const _0x3b9443=a52_0x1f7b();return a52_0x5405=function(_0x25b845,_0x835c51){_0x25b845=_0x25b845-(0xade+0x725*-0x2+0x416);let _0x8338c7=_0x3b9443[_0x25b845];return _0x8338c7;},a52_0x5405(_0x1c6942,_0x579f41);}function a52_0x1f7b(){const _0x24b271=['3855180acSCZy','config','enabled','sign','verify','name','waMonitor','24FviOIE','axios','refreshTok','1309707RLdwGc','ration','46205MfBMGV','Authentica','url','TION','ice','ig/logger.','7022xiaQKQ','instanceNa','KEN','ken','params','BadRequest','baseURL','.refreshTo','toString','__importDe','AUTHENTICA','instance','NEW_JWT_TO','apikey','waInstance','204xhhLop','tokenId','error','class-vali','1355368bvEupi','__awaiter','generateHa','throw','uuid','jwt','TYPE','find','../../conf','6555rfhAhf','SECRET','owner','wuid','fault','__esModule','1293381lqZbAR','auth','../../exce','configServ','next','logger','create','toUpperCas','erty','tion\x20error','repository','EXPIRIN_IN','isJWT','default','localError','utf8','new.jwt','g-t','../../../p','then','event','OldToken','42vKivPS','data','done','get','ldToken\x22','value','.jwt','defineProp','Invalid\x20\x22o','ignoreExpi','Exception','ackage.jso','JWT','AuthServic'];a52_0x1f7b=function(){return _0x24b271;};return a52_0x1f7b();}exports[a52_0x520d06(0xc6)]=OldToken;class AuthService{constructor(_0x563fc8,_0xa967e5,_0x9b58f8){const _0x1ec1cf=a52_0x520d06;this['configServ'+_0x1ec1cf(0xe5)]=_0x563fc8,this[_0x1ec1cf(0xdb)]=_0xa967e5,this[_0x1ec1cf(0xbb)]=_0x9b58f8,this[_0x1ec1cf(0xb6)]=new logger_config_1['Logger'](AuthService[_0x1ec1cf(0xda)]);}['jwt'](_0x135b38){var _0x5c27ee;return __awaiter(this,void(-0x170a+0x1*-0x7f7+0x1f01),void(-0xb5*-0x9+0x263b*0x1+0x593*-0x8),function*(){const _0x56ce1f=a52_0x5405,_0x7580ac=this['configServ'+'ice']['get'](_0x56ce1f(0xf1)+_0x56ce1f(0xe4))[_0x56ce1f(0xd3)],_0x569199=(-0x1a38+0x25fb*0x1+-0xbc3,jsonwebtoken_1[_0x56ce1f(0xd8)])({'instanceName':_0x135b38[_0x56ce1f(0xe8)+'me'],'apiName':package_json_1[_0x56ce1f(0xda)],'tokenId':(-0x1c23+-0x1bd*0x12+0x1cd*0x21,uuid_1['v4'])()},_0x7580ac[_0x56ce1f(0xac)],{'expiresIn':_0x7580ac[_0x56ce1f(0xbc)],'encoding':_0x56ce1f(0xc0),'subject':_0x56ce1f(0xc2)}),_0x5d8655={};_0x5d8655['jwt']=_0x569199;const _0x3107f3=yield this[_0x56ce1f(0xbb)][_0x56ce1f(0xb2)]['create'](_0x5d8655,_0x135b38[_0x56ce1f(0xe8)+'me']);if(_0x3107f3[_0x56ce1f(0xf8)]){const _0x1bad31={};_0x1bad31[_0x56ce1f(0xbf)]=AuthService[_0x56ce1f(0xda)]+_0x56ce1f(0xcd),_0x1bad31[_0x56ce1f(0xf8)]=_0x3107f3['error'],this['logger'][_0x56ce1f(0xf8)](_0x1bad31);throw new exceptions_1[(_0x56ce1f(0xec))+(_0x56ce1f(0xd1))](_0x56ce1f(0xe2)+_0x56ce1f(0xba),(_0x5c27ee=_0x3107f3[_0x56ce1f(0xf8)])===null||_0x5c27ee===void(0xfe*0x11+0x1*-0x19f5+-0xd*-0xb3)?void(-0x14e4+0x1a1f*0x1+-0x67*0xd):_0x5c27ee['toString']());}const _0x4b5992={};return _0x4b5992[_0x56ce1f(0xff)]=_0x569199,_0x4b5992;});}[a52_0x520d06(0xf4)](_0x17dac5){var _0x1adae9;return __awaiter(this,void(-0x955*0x1+-0x6b3+0x1008),void(0x15df+0x356+-0x9*0x2cd),function*(){const _0x28da1c=a52_0x5405,_0x1c5606=(-0x1*0x15b3+0x20e5+-0xb32,uuid_1['v4'])()[_0x28da1c(0xb8)+'e'](),_0x1e1948={};_0x1e1948['apikey']=_0x1c5606;const _0x4eabd5=yield this[_0x28da1c(0xbb)][_0x28da1c(0xb2)][_0x28da1c(0xb7)](_0x1e1948,_0x17dac5['instanceNa'+'me']);if(_0x4eabd5[_0x28da1c(0xf8)]){const _0x494662={};_0x494662[_0x28da1c(0xbf)]=AuthService['name']+_0x28da1c(0xcd),_0x494662['error']=_0x4eabd5[_0x28da1c(0xf8)],this[_0x28da1c(0xb6)][_0x28da1c(0xf8)](_0x494662);throw new exceptions_1[(_0x28da1c(0xec))+(_0x28da1c(0xd1))](_0x28da1c(0xe2)+_0x28da1c(0xba),(_0x1adae9=_0x4eabd5['error'])===null||_0x1adae9===void(0x215+0x16e4+-0x853*0x3)?void(-0x3d*-0xf+-0x23*-0x52+0x5*-0x2f5):_0x1adae9[_0x28da1c(0xef)]());}const _0x5942ee={};return _0x5942ee[_0x28da1c(0xf4)]=_0x1c5606,_0x5942ee;});}[a52_0x520d06(0xfc)+'sh'](_0x429073){return __awaiter(this,void(-0x1*-0x21d5+0x4c5*-0x2+-0x2b3*0x9),void(-0x1bbd+0xf63*0x2+-0x309),function*(){const _0x6ec053=a52_0x5405,_0x1addb4=this[_0x6ec053(0xb4)+'ice']['get'](_0x6ec053(0xf1)+_0x6ec053(0xe4));return yield this[_0x1addb4[_0x6ec053(0x100)]](_0x429073);});}[a52_0x520d06(0xde)+'en']({oldToken:_0x1acf6f}){return __awaiter(this,void(0x38*0x7b+-0x1455+-0x21*0x33),void(0x1f*0x103+-0x2013+-0x1a*-0x7),function*(){const _0x4cf240=a52_0x5405;if(!(-0x1fa*-0x8+0x1*0xb8f+-0x1b5f,class_validator_1[_0x4cf240(0xbd)])(_0x1acf6f))throw new exceptions_1['BadRequest'+'Exception'](_0x4cf240(0xcf)+_0x4cf240(0xcb));try{const _0x4de2e8=this['configServ'+_0x4cf240(0xe5)][_0x4cf240(0xca)](_0x4cf240(0xf1)+'TION')[_0x4cf240(0xd3)],_0x2e1ef7={};_0x2e1ef7[_0x4cf240(0xd0)+_0x4cf240(0xe0)]=!![];const _0x5c85dc=(-0x2299*-0x1+0x2104+-0x439d,jsonwebtoken_1[_0x4cf240(0xd9)])(_0x1acf6f,_0x4de2e8[_0x4cf240(0xac)],_0x2e1ef7),_0x178f58=yield this[_0x4cf240(0xbb)][_0x4cf240(0xb2)][_0x4cf240(0x101)](_0x5c85dc['instanceNa'+'me']),_0x3b245a={};_0x3b245a[_0x4cf240(0xd0)+_0x4cf240(0xe0)]=!![];const _0x4d46ed=(-0xa89+-0x37*0x24+0x1*0x1245,jsonwebtoken_1[_0x4cf240(0xd9)])(_0x178f58[_0x4cf240(0xff)],_0x4de2e8['SECRET'],_0x3b245a);if(_0x5c85dc[_0x4cf240(0xf7)]!==_0x4d46ed[_0x4cf240(0xf7)])throw new exceptions_1[(_0x4cf240(0xec))+(_0x4cf240(0xd1))]('Invalid\x20\x22o'+_0x4cf240(0xcb));const _0x240c3d={};_0x240c3d[_0x4cf240(0xe8)+'me']=_0x5c85dc[_0x4cf240(0xe8)+'me'];const _0x3ab985={'jwt':(yield this[_0x4cf240(0xff)](_0x240c3d))[_0x4cf240(0xff)],'instanceName':_0x5c85dc['instanceNa'+'me']};try{const _0x26f76a=yield this[_0x4cf240(0xbb)]['webhook'][_0x4cf240(0x101)](_0x5c85dc[_0x4cf240(0xe8)+'me']);if((_0x26f76a===null||_0x26f76a===void(-0x1765+0x5*-0x137+-0x17*-0x148)?void(-0x2661+-0x7b5*-0x3+0xf42):_0x26f76a[_0x4cf240(0xd7)])&&this[_0x4cf240(0xb4)+_0x4cf240(0xe5)][_0x4cf240(0xca)]('WEBHOOK')['EVENTS'][_0x4cf240(0xf3)+_0x4cf240(0xe9)]){const _0x3cd282={};_0x3cd282[_0x4cf240(0xed)]=_0x26f76a[_0x4cf240(0xe3)];const _0x9c415e=axios_1[_0x4cf240(0xbe)][_0x4cf240(0xb7)](_0x3cd282),_0x5a375b={};_0x5a375b[_0x4cf240(0xc5)]=_0x4cf240(0xc1),_0x5a375b[_0x4cf240(0xf2)]=_0x5c85dc[_0x4cf240(0xe8)+'me'],_0x5a375b[_0x4cf240(0xc8)]=_0x3ab985;const _0x538a33={};_0x538a33[_0x4cf240(0xad)]=this[_0x4cf240(0xdb)][_0x4cf240(0xf5)+'s'][_0x5c85dc['instanceNa'+'me']][_0x4cf240(0xae)];const _0xcce40e={};_0xcce40e[_0x4cf240(0xeb)]=_0x538a33,yield _0x9c415e['post']('',_0x5a375b,_0xcce40e);}}catch(_0x4da3ed){this[_0x4cf240(0xb6)][_0x4cf240(0xf8)](_0x4da3ed);}return _0x3ab985;}catch(_0x5eed9f){const _0x44eeed={};_0x44eeed['localError']=AuthService[_0x4cf240(0xda)]+(_0x4cf240(0xee)+_0x4cf240(0xea)),_0x44eeed[_0x4cf240(0xf8)]=_0x5eed9f,this[_0x4cf240(0xb6)]['error'](_0x44eeed);throw new exceptions_1[(_0x4cf240(0xec))+(_0x4cf240(0xd1))](_0x4cf240(0xcf)+'ldToken\x22');}});}}exports[a52_0x520d06(0xd4)+'e']=AuthService;