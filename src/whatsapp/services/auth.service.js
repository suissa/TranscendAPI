'use strict';const a52_0xdbf485=a52_0x55a0;(function(_0x4d1fd4,_0x247755){const _0x2708b3=a52_0x55a0,_0x4418a3=_0x4d1fd4();while(!![]){try{const _0x2611de=parseInt(_0x2708b3(0x1c6))/(-0x694+0x90d*-0x1+0xae*0x17)+-parseInt(_0x2708b3(0x186))/(-0x8ec+0x28e*0x9+-0xe10)+parseInt(_0x2708b3(0x191))/(-0xeb0+-0x241*-0x7+-0x3*0x5c)*(-parseInt(_0x2708b3(0x1b7))/(0x8*-0x308+-0x5f7+0x1e3b))+-parseInt(_0x2708b3(0x1b8))/(0x1c1e+-0x1462+-0x7b7*0x1)*(-parseInt(_0x2708b3(0x1aa))/(-0x24d8+0xaad+0x1a31))+-parseInt(_0x2708b3(0x18e))/(-0x1d4f+-0x1806+0x2ab*0x14)+parseInt(_0x2708b3(0x1bf))/(0xc6e*0x1+0x14f5+0x1*-0x215b)+-parseInt(_0x2708b3(0x187))/(-0x3*0x8e4+0x96*-0x5+0x1da3)*(parseInt(_0x2708b3(0x1a3))/(0x2*-0xcc7+0x473+0x1525));if(_0x2611de===_0x247755)break;else _0x4418a3['push'](_0x4418a3['shift']());}catch(_0x3d08c1){_0x4418a3['push'](_0x4418a3['shift']());}}}(a52_0x5805,0x10a07c+0x494*-0x42d+0xc971b));var __awaiter=this&&this[a52_0xdbf485(0x18d)]||function(_0x35351b,_0x186bf2,_0x31f751,_0x3453d6){function _0x31d0ad(_0x2eb32d){return _0x2eb32d instanceof _0x31f751?_0x2eb32d:new _0x31f751(function(_0x3f6914){_0x3f6914(_0x2eb32d);});}return new(_0x31f751||(_0x31f751=Promise))(function(_0x3aaa3e,_0x4e67f4){const _0x530da6=a52_0x55a0;function _0xa69b75(_0x3a7c1b){const _0x21b646=a52_0x55a0;try{_0x25cf1a(_0x3453d6[_0x21b646(0x1a5)](_0x3a7c1b));}catch(_0x597cb9){_0x4e67f4(_0x597cb9);}}function _0x46e0c2(_0x3827da){try{_0x25cf1a(_0x3453d6['throw'](_0x3827da));}catch(_0x32ec7f){_0x4e67f4(_0x32ec7f);}}function _0x25cf1a(_0x5be2eb){const _0x39251e=a52_0x55a0;_0x5be2eb[_0x39251e(0x1d0)]?_0x3aaa3e(_0x5be2eb[_0x39251e(0x1ba)]):_0x31d0ad(_0x5be2eb[_0x39251e(0x1ba)])[_0x39251e(0x189)](_0xa69b75,_0x46e0c2);}_0x25cf1a((_0x3453d6=_0x3453d6[_0x530da6(0x1d3)](_0x35351b,_0x186bf2||[]))[_0x530da6(0x1a5)]());});},__importDefault=this&&this[a52_0xdbf485(0x1da)+a52_0xdbf485(0x1ce)]||function(_0x452806){const _0x34a960=a52_0xdbf485;return _0x452806&&_0x452806[_0x34a960(0x1cc)]?_0x452806:{'default':_0x452806};};const a52_0xbc2596={};a52_0xbc2596[a52_0xdbf485(0x1ba)]=!![],Object[a52_0xdbf485(0x1b6)+'erty'](exports,a52_0xdbf485(0x1cc),a52_0xbc2596),exports[a52_0xdbf485(0x1cb)+'e']=exports[a52_0xdbf485(0x1a4)]=void(-0xc7b+-0x148a+-0x6b*-0x4f);const package_json_1=require(a52_0xdbf485(0x1d1)+a52_0xdbf485(0x1b5)+'n'),jsonwebtoken_1=require(a52_0xdbf485(0x196)+'en'),logger_config_1=require(a52_0xdbf485(0x1b9)+'ig/logger.'+a52_0xdbf485(0x1a8)),uuid_1=require('uuid'),class_validator_1=require(a52_0xdbf485(0x1d6)+a52_0xdbf485(0x1c7)),exceptions_1=require(a52_0xdbf485(0x1ac)+a52_0xdbf485(0x1c8)),axios_1=__importDefault(require(a52_0xdbf485(0x1a1)));function a52_0x55a0(_0x4da804,_0x5115e3){const _0x4a5fe1=a52_0x5805();return a52_0x55a0=function(_0xbc2596,_0x207468){_0xbc2596=_0xbc2596-(0x1ff*0x5+0x1*0x16e7+-0x1f5c);let _0x169f0c=_0x4a5fe1[_0xbc2596];return _0x169f0c;},a52_0x55a0(_0x4da804,_0x5115e3);}class OldToken{}exports[a52_0xdbf485(0x1a4)]=OldToken;class AuthService{constructor(_0x461956,_0x5a5ef7,_0x1c40ad){const _0x1d51f2=a52_0xdbf485;this['configServ'+_0x1d51f2(0x1c0)]=_0x461956,this['waMonitor']=_0x5a5ef7,this[_0x1d51f2(0x1a9)]=_0x1c40ad,this[_0x1d51f2(0x1a7)]=new logger_config_1[(_0x1d51f2(0x1a2))](AuthService[_0x1d51f2(0x18c)]);}['jwt'](_0x45c1dc){var _0x44f483;return __awaiter(this,void(-0x2e*-0x1e+0xee3+-0x1447),void(0xf6a*-0x1+0x1eec+-0x18d*0xa),function*(){const _0x943dd0=a52_0x55a0,_0x5c354c=this['configServ'+_0x943dd0(0x1c0)][_0x943dd0(0x1ae)](_0x943dd0(0x1b3)+_0x943dd0(0x199))['JWT'],_0x504064=(0x1adf+-0x14ee+-0x3*0x1fb,jsonwebtoken_1[_0x943dd0(0x1b4)])({'instanceName':_0x45c1dc[_0x943dd0(0x192)+'me'],'apiName':package_json_1[_0x943dd0(0x18c)],'tokenId':(0x9f*-0x31+0x2*-0x96e+0x314b*0x1,uuid_1['v4'])()},_0x5c354c[_0x943dd0(0x19b)],{'expiresIn':_0x5c354c['EXPIRIN_IN'],'encoding':_0x943dd0(0x1c1),'subject':_0x943dd0(0x1a6)}),_0x365341={};_0x365341['jwt']=_0x504064;const _0xb34e87=yield this[_0x943dd0(0x1a9)][_0x943dd0(0x18b)][_0x943dd0(0x1ad)](_0x365341,_0x45c1dc[_0x943dd0(0x192)+'me']);if(_0xb34e87[_0x943dd0(0x1db)]){const _0x525afc={};_0x525afc[_0x943dd0(0x1a0)]=AuthService[_0x943dd0(0x18c)]+_0x943dd0(0x1cf),_0x525afc['error']=_0xb34e87[_0x943dd0(0x1db)],this['logger']['error'](_0x525afc);throw new exceptions_1[(_0x943dd0(0x1b0))+(_0x943dd0(0x1bc))](_0x943dd0(0x19a)+'tion\x20error',(_0x44f483=_0xb34e87['error'])===null||_0x44f483===void(0x726+-0x1d4b+-0x1625*-0x1)?void(0x2699+0x1044+0x36dd*-0x1):_0x44f483[_0x943dd0(0x1bd)]());}const _0x46df1c={};return _0x46df1c[_0x943dd0(0x1d2)]=_0x504064,_0x46df1c;});}[a52_0xdbf485(0x18a)](_0x31b584){var _0x2ec56d;return __awaiter(this,void(-0x66f+-0x1*-0x1822+-0x11b3),void(-0x1599+0xb92*0x3+-0xd1d),function*(){const _0x2073dd=a52_0x55a0,_0x474325=(0x1*0x1691+0x631+0x996*-0x3,uuid_1['v4'])()[_0x2073dd(0x1cd)+'e'](),_0x444eec={};_0x444eec[_0x2073dd(0x18a)]=_0x474325;const _0x2df152=yield this[_0x2073dd(0x1a9)][_0x2073dd(0x18b)][_0x2073dd(0x1ad)](_0x444eec,_0x31b584['instanceNa'+'me']);if(_0x2df152[_0x2073dd(0x1db)]){const _0x348be8={};_0x348be8['localError']=AuthService[_0x2073dd(0x18c)]+_0x2073dd(0x1cf),_0x348be8[_0x2073dd(0x1db)]=_0x2df152[_0x2073dd(0x1db)],this[_0x2073dd(0x1a7)][_0x2073dd(0x1db)](_0x348be8);throw new exceptions_1['BadRequest'+(_0x2073dd(0x1bc))](_0x2073dd(0x19a)+'tion\x20error',(_0x2ec56d=_0x2df152[_0x2073dd(0x1db)])===null||_0x2ec56d===void(0x1*-0x227c+-0x4*-0x129+0x1dd8)?void(0x3fa*-0x3+-0x1926+0x2514):_0x2ec56d['toString']());}const _0x38d7a3={};return _0x38d7a3[_0x2073dd(0x18a)]=_0x474325,_0x38d7a3;});}[a52_0xdbf485(0x19e)+'sh'](_0x266209){return __awaiter(this,void(-0x5*-0x65b+0x15b*-0x1+0x3b*-0x84),void(0x2*-0x571+-0x3*0x71+0x1*0xc35),function*(){const _0x3aa73a=a52_0x55a0,_0x2eba6e=this[_0x3aa73a(0x1af)+_0x3aa73a(0x1c0)][_0x3aa73a(0x1ae)](_0x3aa73a(0x1b3)+_0x3aa73a(0x199));return yield this[_0x2eba6e[_0x3aa73a(0x1ab)]](_0x266209);});}[a52_0xdbf485(0x19d)+'en']({oldToken:_0x5ebad1}){return __awaiter(this,void(0x159e*-0x1+0x13*0x4c+0xffa),void(0x1*0xc51+0x13f4+-0x2045),function*(){const _0x492bfe=a52_0x55a0;if(!(0x11c*0x15+-0x1*0xebb+0x33*-0x2b,class_validator_1[_0x492bfe(0x198)])(_0x5ebad1))throw new exceptions_1[(_0x492bfe(0x1b0))+'Exception'](_0x492bfe(0x1b1)+'ldToken\x22');try{const _0x1969af=this[_0x492bfe(0x1af)+_0x492bfe(0x1c0)][_0x492bfe(0x1ae)](_0x492bfe(0x1b3)+_0x492bfe(0x199))['JWT'],_0x3d5a2e={};_0x3d5a2e[_0x492bfe(0x1c4)+_0x492bfe(0x195)]=!![];const _0x14878d=(-0x16cb+-0x1b94+0x325f,jsonwebtoken_1[_0x492bfe(0x194)])(_0x5ebad1,_0x1969af['SECRET'],_0x3d5a2e),_0x1d0ef9=yield this['repository'][_0x492bfe(0x18b)][_0x492bfe(0x1bb)](_0x14878d[_0x492bfe(0x192)+'me']),_0x4ab690={};_0x4ab690[_0x492bfe(0x1c4)+_0x492bfe(0x195)]=!![];const _0x4d6418=(0x1*0xa6a+-0xb5*0x1+-0x9b5,jsonwebtoken_1[_0x492bfe(0x194)])(_0x1d0ef9[_0x492bfe(0x1d2)],_0x1969af[_0x492bfe(0x19b)],_0x4ab690);if(_0x14878d[_0x492bfe(0x1c2)]!==_0x4d6418['tokenId'])throw new exceptions_1[(_0x492bfe(0x1b0))+(_0x492bfe(0x1bc))]('Invalid\x20\x22o'+'ldToken\x22');const _0xef01f0={};_0xef01f0[_0x492bfe(0x192)+'me']=_0x14878d[_0x492bfe(0x192)+'me'];const _0x4bdd25={'jwt':(yield this[_0x492bfe(0x1d2)](_0xef01f0))[_0x492bfe(0x1d2)],'instanceName':_0x14878d[_0x492bfe(0x192)+'me']};try{const _0x181933=yield this[_0x492bfe(0x1a9)]['webhook'][_0x492bfe(0x1bb)](_0x14878d[_0x492bfe(0x192)+'me']);if(_0x181933[_0x492bfe(0x1d8)]&&this[_0x492bfe(0x1af)+_0x492bfe(0x1c0)][_0x492bfe(0x1ae)](_0x492bfe(0x1be))[_0x492bfe(0x188)][_0x492bfe(0x19c)+_0x492bfe(0x193)]){const _0x47c1fd={};_0x47c1fd[_0x492bfe(0x1ca)]=_0x181933['url'];const _0x166788=axios_1[_0x492bfe(0x1d5)][_0x492bfe(0x1ad)](_0x47c1fd),_0x485153={};_0x485153[_0x492bfe(0x1d7)]=_0x492bfe(0x190),_0x485153[_0x492bfe(0x1c3)]=_0x14878d[_0x492bfe(0x192)+'me'],_0x485153['data']=_0x4bdd25;const _0x5ca73b={};_0x5ca73b[_0x492bfe(0x1d9)]=this[_0x492bfe(0x1c9)][_0x492bfe(0x1c5)+'s'][_0x14878d['instanceNa'+'me']][_0x492bfe(0x197)];const _0x1265a7={};_0x1265a7[_0x492bfe(0x1d4)]=_0x5ca73b,yield _0x166788[_0x492bfe(0x1b2)]('',_0x485153,_0x1265a7);}}catch(_0x51a357){this[_0x492bfe(0x1a7)]['error'](_0x51a357);}return _0x4bdd25;}catch(_0x5cc241){const _0x293fe8={};_0x293fe8[_0x492bfe(0x1a0)]=AuthService[_0x492bfe(0x18c)]+(_0x492bfe(0x19f)+'ken'),_0x293fe8[_0x492bfe(0x1db)]=_0x5cc241,this[_0x492bfe(0x1a7)]['error'](_0x293fe8);throw new exceptions_1[(_0x492bfe(0x1b0))+(_0x492bfe(0x1bc))]('Invalid\x20\x22o'+_0x492bfe(0x18f));}});}}function a52_0x5805(){const _0x4cb662=['KEN','verify','ration','jsonwebtok','wuid','isJWT','TION','Authentica','SECRET','NEW_JWT_TO','refreshTok','generateHa','.refreshTo','localError','axios','Logger','26750WLWkbo','OldToken','next','g-t','logger','config','repository','12tRvPRw','TYPE','../../exce','create','get','configServ','BadRequest','Invalid\x20\x22o','post','AUTHENTICA','sign','ackage.jso','defineProp','8GLXGAj','3170035yfosYX','../../conf','value','find','Exception','toString','WEBHOOK','2355232EguXhV','ice','utf8','tokenId','instance','ignoreExpi','waInstance','651606fbDcIA','dator','ptions','waMonitor','baseURL','AuthServic','__esModule','toUpperCas','fault','.jwt','done','../../../p','jwt','apply','params','default','class-vali','event','enabled','owner','__importDe','error','167724tDQgiH','2169asSgEj','EVENTS','then','apikey','auth','name','__awaiter','3653958THNjkF','ldToken\x22','new.jwt','452379HFlnCn','instanceNa'];a52_0x5805=function(){return _0x4cb662;};return a52_0x5805();}exports['AuthServic'+'e']=AuthService;