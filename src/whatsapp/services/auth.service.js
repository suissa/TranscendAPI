'use strict';const a52_0x6dbe=a52_0x1a7a;function a52_0x51db(){const _0x3233e2=['TION','webhook','g-t','repository','jwt','class-vali','sign','logger','toString','generateHa','2795673GJmFnY','20pXwfmK','NEW_JWT_TO','event','WEBHOOK','169561KwnpLf','localError','configServ','tokenId','EVENTS','isJWT','ig/logger.','../../../p','1343256neBnmZ','EXPIRIN_IN','fault','../../conf','toUpperCas','SECRET','ptions','refreshTok','252RbgBRd','AUTHENTICA','find','26oYXyNt','Invalid\x20\x22o','4qEmtIh','utf8','BadRequest','axios','create','waMonitor','throw','OldToken','__esModule','9268413wKKeby','tion\x20error','.refreshTo','3796128ZTxVTi','ackage.jso','JWT','enabled','data','ldToken\x22','ice','__importDe','apply','verify','error','216935PvwzdF','AuthServic','ration','78401HNrdPn','auth','KEN','Authentica','next','get','baseURL','name','params','new.jwt','dator','url','instanceNa','TYPE','.jwt','apikey','post','value','../../exce','Exception','config','then','default'];a52_0x51db=function(){return _0x3233e2;};return a52_0x51db();}(function(_0xa0d47,_0x2a7328){const _0xe2aa34=a52_0x1a7a,_0x150046=_0xa0d47();while(!![]){try{const _0x593110=-parseInt(_0xe2aa34(0x12f))/(-0x10a3*-0x1+0x24e4+-0x3586)*(-parseInt(_0xe2aa34(0x168))/(-0x1*0x2456+0x2*-0x487+0x2d66))+-parseInt(_0xe2aa34(0x150))/(-0x2*-0x747+0x1*-0x1d67+0xedc)+-parseInt(_0xe2aa34(0x115))/(0x2562*0x1+-0x11eb+-0x1373)*(-parseInt(_0xe2aa34(0x12c))/(-0x2365+0x1*-0xa5e+0x8*0x5b9))+parseInt(_0xe2aa34(0x165))/(-0x1d68+0x25b*0x2+0x18b8)*(parseInt(_0xe2aa34(0x155))/(-0x1566+0x79d*0x4+-0x907))+-parseInt(_0xe2aa34(0x15d))/(0x147*0x17+0x259f+-0x42f8)+parseInt(_0xe2aa34(0x121))/(0xe52+0x1d0f+-0x2b58)*(parseInt(_0xe2aa34(0x151))/(0x1041+0xd6f*-0x2+-0x38d*-0x3))+-parseInt(_0xe2aa34(0x11e))/(0x1*0x18c4+-0xdc6+0xaf3*-0x1);if(_0x593110===_0x2a7328)break;else _0x150046['push'](_0x150046['shift']());}catch(_0x45f664){_0x150046['push'](_0x150046['shift']());}}}(a52_0x51db,0xc4e1*0x4+0x1b620f+-0xf7ce2));var __awaiter=this&&this['__awaiter']||function(_0x445538,_0x2937c2,_0x3a7616,_0x340c62){function _0x2a5e8f(_0x62d4ec){return _0x62d4ec instanceof _0x3a7616?_0x62d4ec:new _0x3a7616(function(_0x5c41bb){_0x5c41bb(_0x62d4ec);});}return new(_0x3a7616||(_0x3a7616=Promise))(function(_0x2fa429,_0xeebfd){const _0x276605=a52_0x1a7a;function _0x57f716(_0x4c9229){const _0xb6f522=a52_0x1a7a;try{_0x4e13b8(_0x340c62[_0xb6f522(0x133)](_0x4c9229));}catch(_0x1eefb8){_0xeebfd(_0x1eefb8);}}function _0x11d205(_0x2fd77e){const _0x4fcc7f=a52_0x1a7a;try{_0x4e13b8(_0x340c62[_0x4fcc7f(0x11b)](_0x2fd77e));}catch(_0x3474ab){_0xeebfd(_0x3474ab);}}function _0x4e13b8(_0x11e606){const _0x565e2e=a52_0x1a7a;_0x11e606['done']?_0x2fa429(_0x11e606[_0x565e2e(0x140)]):_0x2a5e8f(_0x11e606[_0x565e2e(0x140)])[_0x565e2e(0x144)](_0x57f716,_0x11d205);}_0x4e13b8((_0x340c62=_0x340c62[_0x276605(0x129)](_0x445538,_0x2937c2||[]))[_0x276605(0x133)]());});},__importDefault=this&&this[a52_0x6dbe(0x128)+a52_0x6dbe(0x15f)]||function(_0x18f3ab){const _0x2e4370=a52_0x6dbe;return _0x18f3ab&&_0x18f3ab[_0x2e4370(0x11d)]?_0x18f3ab:{'default':_0x18f3ab};};const a52_0x4f2df5={};a52_0x4f2df5[a52_0x6dbe(0x140)]=!![],Object['defineProp'+'erty'](exports,a52_0x6dbe(0x11d),a52_0x4f2df5),exports[a52_0x6dbe(0x12d)+'e']=exports[a52_0x6dbe(0x11c)]=void(0x360+0x3b*-0x22+-0x476*-0x1);const package_json_1=require(a52_0x6dbe(0x15c)+a52_0x6dbe(0x122)+'n'),jsonwebtoken_1=require('jsonwebtok'+'en'),logger_config_1=require(a52_0x6dbe(0x160)+a52_0x6dbe(0x15b)+a52_0x6dbe(0x143)),uuid_1=require('uuid'),class_validator_1=require(a52_0x6dbe(0x14b)+a52_0x6dbe(0x139)),exceptions_1=require(a52_0x6dbe(0x141)+a52_0x6dbe(0x163)),axios_1=__importDefault(require(a52_0x6dbe(0x118)));class OldToken{}exports[a52_0x6dbe(0x11c)]=OldToken;class AuthService{constructor(_0x2f5261,_0x2dcfaf,_0xff4c59){const _0x62ec2=a52_0x6dbe;this['configServ'+_0x62ec2(0x127)]=_0x2f5261,this[_0x62ec2(0x11a)]=_0x2dcfaf,this['repository']=_0xff4c59,this[_0x62ec2(0x14d)]=new logger_config_1['Logger'](AuthService[_0x62ec2(0x136)]);}[a52_0x6dbe(0x14a)](_0x3a54f2){var _0x48b1e4;return __awaiter(this,void(0x55*-0x25+0x1578+-0x1*0x92f),void(0x1e5c+0x1cfd+-0x3b59),function*(){const _0x18c8b0=a52_0x1a7a,_0x2203de=this[_0x18c8b0(0x157)+_0x18c8b0(0x127)]['get'](_0x18c8b0(0x166)+'TION')[_0x18c8b0(0x123)],_0x26b189=(-0x120a*-0x2+-0x7c3*0x1+-0x1c51,jsonwebtoken_1[_0x18c8b0(0x14c)])({'instanceName':_0x3a54f2[_0x18c8b0(0x13b)+'me'],'apiName':package_json_1[_0x18c8b0(0x136)],'tokenId':(-0x5*0x211+0x78b*0x2+-0x4c1*0x1,uuid_1['v4'])()},_0x2203de[_0x18c8b0(0x162)],{'expiresIn':_0x2203de[_0x18c8b0(0x15e)],'encoding':_0x18c8b0(0x116),'subject':_0x18c8b0(0x148)}),_0x17922e={};_0x17922e[_0x18c8b0(0x14a)]=_0x26b189;const _0x4d02e3=yield this[_0x18c8b0(0x149)][_0x18c8b0(0x130)][_0x18c8b0(0x119)](_0x17922e,_0x3a54f2[_0x18c8b0(0x13b)+'me']);if(_0x4d02e3[_0x18c8b0(0x12b)]){const _0x27687a={};_0x27687a[_0x18c8b0(0x156)]=AuthService['name']+_0x18c8b0(0x13d),_0x27687a[_0x18c8b0(0x12b)]=_0x4d02e3[_0x18c8b0(0x12b)],this[_0x18c8b0(0x14d)][_0x18c8b0(0x12b)](_0x27687a);throw new exceptions_1['BadRequest'+(_0x18c8b0(0x142))](_0x18c8b0(0x132)+_0x18c8b0(0x11f),(_0x48b1e4=_0x4d02e3[_0x18c8b0(0x12b)])===null||_0x48b1e4===void(0x1d89+-0x24d2+0x1*0x749)?void(-0x74c*0x1+-0xb7*0x32+-0x2*-0x1585):_0x48b1e4[_0x18c8b0(0x14e)]());}const _0x14d8e0={};return _0x14d8e0[_0x18c8b0(0x14a)]=_0x26b189,_0x14d8e0;});}['apikey'](_0x4a576a){var _0x54d730;return __awaiter(this,void(-0x442*-0x2+0x26de+-0xa*0x4bd),void(-0x11a3+-0x1470+0x13*0x201),function*(){const _0x4867a6=a52_0x1a7a,_0x4401cc=(-0x4a4+-0xd*-0x1de+-0x13a2,uuid_1['v4'])()[_0x4867a6(0x161)+'e'](),_0x372276={};_0x372276[_0x4867a6(0x13e)]=_0x4401cc;const _0x1c7473=yield this[_0x4867a6(0x149)][_0x4867a6(0x130)]['create'](_0x372276,_0x4a576a[_0x4867a6(0x13b)+'me']);if(_0x1c7473[_0x4867a6(0x12b)]){const _0x465f5b={};_0x465f5b[_0x4867a6(0x156)]=AuthService[_0x4867a6(0x136)]+_0x4867a6(0x13d),_0x465f5b['error']=_0x1c7473[_0x4867a6(0x12b)],this[_0x4867a6(0x14d)][_0x4867a6(0x12b)](_0x465f5b);throw new exceptions_1[(_0x4867a6(0x117))+'Exception'](_0x4867a6(0x132)+_0x4867a6(0x11f),(_0x54d730=_0x1c7473['error'])===null||_0x54d730===void(0x19f+0x1f35+-0x20d4)?void(-0x20c+-0xf70+0x117c):_0x54d730[_0x4867a6(0x14e)]());}const _0x358339={};return _0x358339['apikey']=_0x4401cc,_0x358339;});}[a52_0x6dbe(0x14f)+'sh'](_0x475cc3){return __awaiter(this,void(-0x6fe+-0x11ea+-0x8*-0x31d),void(0xa39*-0x1+-0x1bd7+-0x1308*-0x2),function*(){const _0xba9355=a52_0x1a7a,_0x35bf11=this[_0xba9355(0x157)+_0xba9355(0x127)][_0xba9355(0x134)]('AUTHENTICA'+_0xba9355(0x146));return yield this[_0x35bf11[_0xba9355(0x13c)]](_0x475cc3);});}[a52_0x6dbe(0x164)+'en']({oldToken:_0x3c1d9d}){return __awaiter(this,void(-0x1514+-0x1ea*0x1+0x16fe),void(0x1044+-0x303+0x27*-0x57),function*(){const _0x1a1d7c=a52_0x1a7a;if(!(-0x2702+0x1c*0xca+0x10ea*0x1,class_validator_1[_0x1a1d7c(0x15a)])(_0x3c1d9d))throw new exceptions_1[(_0x1a1d7c(0x117))+(_0x1a1d7c(0x142))](_0x1a1d7c(0x169)+_0x1a1d7c(0x126));try{const _0x4e2cb8=this[_0x1a1d7c(0x157)+'ice'][_0x1a1d7c(0x134)](_0x1a1d7c(0x166)+_0x1a1d7c(0x146))[_0x1a1d7c(0x123)],_0x4402a6={};_0x4402a6['ignoreExpi'+_0x1a1d7c(0x12e)]=!![];const _0x3178dc=(0x4*0x71b+-0x18e0+-0x38c,jsonwebtoken_1[_0x1a1d7c(0x12a)])(_0x3c1d9d,_0x4e2cb8[_0x1a1d7c(0x162)],_0x4402a6),_0x525132=yield this[_0x1a1d7c(0x149)][_0x1a1d7c(0x130)][_0x1a1d7c(0x167)](_0x3178dc[_0x1a1d7c(0x13b)+'me']),_0x439df9={};_0x439df9['ignoreExpi'+_0x1a1d7c(0x12e)]=!![];const _0x1ccbab=(0x1465+0x1*0x13ff+-0x40a*0xa,jsonwebtoken_1['verify'])(_0x525132[_0x1a1d7c(0x14a)],_0x4e2cb8[_0x1a1d7c(0x162)],_0x439df9);if(_0x3178dc[_0x1a1d7c(0x158)]!==_0x1ccbab[_0x1a1d7c(0x158)])throw new exceptions_1[(_0x1a1d7c(0x117))+(_0x1a1d7c(0x142))](_0x1a1d7c(0x169)+_0x1a1d7c(0x126));const _0x5203f4={};_0x5203f4[_0x1a1d7c(0x13b)+'me']=_0x3178dc['instanceNa'+'me'];const _0x269b42={'jwt':(yield this[_0x1a1d7c(0x14a)](_0x5203f4))['jwt'],'instanceName':_0x3178dc[_0x1a1d7c(0x13b)+'me']};try{const _0x3ee742=yield this[_0x1a1d7c(0x149)][_0x1a1d7c(0x147)][_0x1a1d7c(0x167)](_0x3178dc[_0x1a1d7c(0x13b)+'me']);if((_0x3ee742===null||_0x3ee742===void(0x13e9+0x5d3*0x5+-0x3108)?void(-0x1a5*-0x7+0x2278+-0x2dfb):_0x3ee742[_0x1a1d7c(0x124)])&&this['configServ'+_0x1a1d7c(0x127)]['get'](_0x1a1d7c(0x154))[_0x1a1d7c(0x159)][_0x1a1d7c(0x152)+_0x1a1d7c(0x131)]){const _0x2a207c={};_0x2a207c[_0x1a1d7c(0x135)]=_0x3ee742[_0x1a1d7c(0x13a)];const _0x20dbd8=axios_1[_0x1a1d7c(0x145)][_0x1a1d7c(0x119)](_0x2a207c),_0x4b6fe4={};_0x4b6fe4[_0x1a1d7c(0x153)]=_0x1a1d7c(0x138),_0x4b6fe4['instance']=_0x3178dc[_0x1a1d7c(0x13b)+'me'],_0x4b6fe4[_0x1a1d7c(0x125)]=_0x269b42;const _0x4131d9={};_0x4131d9['owner']=this[_0x1a1d7c(0x11a)]['waInstance'+'s'][_0x3178dc[_0x1a1d7c(0x13b)+'me']]['wuid'];const _0x2aa873={};_0x2aa873[_0x1a1d7c(0x137)]=_0x4131d9,yield _0x20dbd8[_0x1a1d7c(0x13f)]('',_0x4b6fe4,_0x2aa873);}}catch(_0x3f912f){this[_0x1a1d7c(0x14d)]['error'](_0x3f912f);}return _0x269b42;}catch(_0x145d54){const _0x21d407={};_0x21d407['localError']=AuthService[_0x1a1d7c(0x136)]+(_0x1a1d7c(0x120)+'ken'),_0x21d407['error']=_0x145d54,this[_0x1a1d7c(0x14d)][_0x1a1d7c(0x12b)](_0x21d407);throw new exceptions_1[(_0x1a1d7c(0x117))+'Exception']('Invalid\x20\x22o'+_0x1a1d7c(0x126));}});}}function a52_0x1a7a(_0x159056,_0x50d6ca){const _0xd06a4a=a52_0x51db();return a52_0x1a7a=function(_0x4f2df5,_0x33ceb4){_0x4f2df5=_0x4f2df5-(-0x56*0x5f+-0x26ad+-0x342*-0x16);let _0x26206c=_0xd06a4a[_0x4f2df5];return _0x26206c;},a52_0x1a7a(_0x159056,_0x50d6ca);}exports[a52_0x6dbe(0x12d)+'e']=AuthService;