'use strict';const a52_0x267d8b=a52_0x2b1d;function a52_0x2b1d(_0x2b4d0c,_0x3c48aa){const _0x116e3a=a52_0x4d8e();return a52_0x2b1d=function(_0x32ad64,_0x3b8374){_0x32ad64=_0x32ad64-(-0x1*-0x1f3+-0x2590*0x1+0x2524);let _0x4c84cb=_0x116e3a[_0x32ad64];return _0x4c84cb;},a52_0x2b1d(_0x2b4d0c,_0x3c48aa);}(function(_0xca606c,_0x137049){const _0x5a80cd=a52_0x2b1d,_0x160b6f=_0xca606c();while(!![]){try{const _0x10c9d2=parseInt(_0x5a80cd(0x1a3))/(-0x8bd*0x1+-0x208c+0x294a)+-parseInt(_0x5a80cd(0x1c7))/(0x151e+0x4*0x11+-0x98*0x24)+parseInt(_0x5a80cd(0x1cb))/(0x48f+-0x4*0x549+0x48*0x3b)*(-parseInt(_0x5a80cd(0x18a))/(0x935*0x1+-0x69c*0x3+-0x1*-0xaa3))+parseInt(_0x5a80cd(0x1c9))/(0x5*0x5e6+-0x301+-0x1a78)*(-parseInt(_0x5a80cd(0x1cc))/(0x1*0x183f+-0x29*-0xdd+-0x1dcf*0x2))+parseInt(_0x5a80cd(0x188))/(0x23f2*0x1+0x79f+0x2b8a*-0x1)+-parseInt(_0x5a80cd(0x193))/(-0x121*-0x10+-0x3*0xb23+0xf61*0x1)*(parseInt(_0x5a80cd(0x1da))/(0x1b52+0x2083+-0x3bcc))+parseInt(_0x5a80cd(0x18c))/(-0x2e*0x1c+-0x15b1+0x1f*0xdd);if(_0x10c9d2===_0x137049)break;else _0x160b6f['push'](_0x160b6f['shift']());}catch(_0x189739){_0x160b6f['push'](_0x160b6f['shift']());}}}(a52_0x4d8e,0x1*-0x232c7+-0x2*0x26907+0xaf70e));var __awaiter=this&&this[a52_0x267d8b(0x19f)]||function(_0x48c4e6,_0x29e9b0,_0x16114c,_0x58cd42){function _0x2e715d(_0x61bfaf){return _0x61bfaf instanceof _0x16114c?_0x61bfaf:new _0x16114c(function(_0x1f5b5a){_0x1f5b5a(_0x61bfaf);});}return new(_0x16114c||(_0x16114c=Promise))(function(_0x3ae975,_0x35c96a){const _0x546b47=a52_0x2b1d;function _0xa4295b(_0x22ccdc){const _0x2d0061=a52_0x2b1d;try{_0x1b0765(_0x58cd42[_0x2d0061(0x197)](_0x22ccdc));}catch(_0x2f36ea){_0x35c96a(_0x2f36ea);}}function _0xf9f67a(_0x81e9c4){try{_0x1b0765(_0x58cd42['throw'](_0x81e9c4));}catch(_0x3def1c){_0x35c96a(_0x3def1c);}}function _0x1b0765(_0x4f11ec){const _0x19af38=a52_0x2b1d;_0x4f11ec[_0x19af38(0x1bb)]?_0x3ae975(_0x4f11ec['value']):_0x2e715d(_0x4f11ec[_0x19af38(0x196)])['then'](_0xa4295b,_0xf9f67a);}_0x1b0765((_0x58cd42=_0x58cd42[_0x546b47(0x1aa)](_0x48c4e6,_0x29e9b0||[]))[_0x546b47(0x197)]());});},__importDefault=this&&this['__importDe'+a52_0x267d8b(0x18f)]||function(_0x340fe1){const _0x514f2f=a52_0x267d8b;return _0x340fe1&&_0x340fe1[_0x514f2f(0x1c6)]?_0x340fe1:{'default':_0x340fe1};};const a52_0x32ad64={};a52_0x32ad64[a52_0x267d8b(0x196)]=!![],Object[a52_0x267d8b(0x1a6)+a52_0x267d8b(0x1a4)](exports,'__esModule',a52_0x32ad64),exports['AuthServic'+'e']=exports['OldToken']=void(-0x1f*-0x50+0x179f+-0x214f);const package_json_1=require(a52_0x267d8b(0x1ca)+a52_0x267d8b(0x1b0)+'n'),jsonwebtoken_1=require(a52_0x267d8b(0x19a)+'en'),logger_config_1=require(a52_0x267d8b(0x1ad)+a52_0x267d8b(0x18b)+a52_0x267d8b(0x1e0)),uuid_1=require(a52_0x267d8b(0x1be)),class_validator_1=require(a52_0x267d8b(0x1a1)+a52_0x267d8b(0x1cf)),exceptions_1=require(a52_0x267d8b(0x190)+a52_0x267d8b(0x1c1)),axios_1=__importDefault(require(a52_0x267d8b(0x1ac)));class OldToken{}exports[a52_0x267d8b(0x1bd)]=OldToken;class AuthService{constructor(_0x25777f,_0x205066,_0x2ee048){const _0x2bb176=a52_0x267d8b;this[_0x2bb176(0x1ae)+'ice']=_0x25777f,this[_0x2bb176(0x192)]=_0x205066,this[_0x2bb176(0x1d2)]=_0x2ee048,this[_0x2bb176(0x1b3)]=new logger_config_1[(_0x2bb176(0x1c8))](AuthService[_0x2bb176(0x1db)]);}[a52_0x267d8b(0x1d1)](_0x13add1){var _0x330fcf;return __awaiter(this,void(-0xa53*0x1+0xb*0x91+0x418*0x1),void(-0x9d5*-0x2+0x2*0x13c+-0xb11*0x2),function*(){const _0x52530f=a52_0x2b1d,_0x425d28=this['configServ'+_0x52530f(0x1a0)][_0x52530f(0x19b)]('AUTHENTICA'+_0x52530f(0x191))[_0x52530f(0x1ce)],_0x20e830=(0xcbc*0x2+-0x1c63+-0x2eb*-0x1,jsonwebtoken_1[_0x52530f(0x1a9)])({'instanceName':_0x13add1[_0x52530f(0x1b5)+'me'],'apiName':package_json_1[_0x52530f(0x1db)],'tokenId':(0x1269+-0xb7e+-0xfd*0x7,uuid_1['v4'])()},_0x425d28[_0x52530f(0x1b6)],{'expiresIn':_0x425d28[_0x52530f(0x1ba)],'encoding':_0x52530f(0x1d8),'subject':_0x52530f(0x1dc)}),_0x581cba={};_0x581cba[_0x52530f(0x1d1)]=_0x20e830;const _0x2b966a=yield this[_0x52530f(0x1d2)][_0x52530f(0x1dd)][_0x52530f(0x1d3)](_0x581cba,_0x13add1['instanceNa'+'me']);if(_0x2b966a['error']){const _0x213add={};_0x213add[_0x52530f(0x1c2)]=AuthService[_0x52530f(0x1db)]+_0x52530f(0x1c0),_0x213add[_0x52530f(0x198)]=_0x2b966a[_0x52530f(0x198)],this[_0x52530f(0x1b3)][_0x52530f(0x198)](_0x213add);throw new exceptions_1[(_0x52530f(0x1b2))+(_0x52530f(0x189))]('Authentica'+_0x52530f(0x1af),(_0x330fcf=_0x2b966a['error'])===null||_0x330fcf===void(-0x1d62+-0x715+0x2477)?void(-0x2529+0x17c6+-0xd63*-0x1):_0x330fcf[_0x52530f(0x1b9)]());}const _0x599a85={};return _0x599a85[_0x52530f(0x1d1)]=_0x20e830,_0x599a85;});}['apikey'](_0x1a7c2a){var _0x35a227;return __awaiter(this,void(0x19eb+-0x1cf1+0x306),void(-0x3a6*0xa+-0x2231+-0x1*-0x46ad),function*(){const _0xc55381=a52_0x2b1d,_0x438881=(0x5*-0x2c5+0x16bd+-0x472*0x2,uuid_1['v4'])()[_0xc55381(0x1df)+'e'](),_0x4daa72={};_0x4daa72[_0xc55381(0x1c3)]=_0x438881;const _0x4a5f0f=yield this[_0xc55381(0x1d2)][_0xc55381(0x1dd)][_0xc55381(0x1d3)](_0x4daa72,_0x1a7c2a[_0xc55381(0x1b5)+'me']);if(_0x4a5f0f['error']){const _0x1ed229={};_0x1ed229['localError']=AuthService['name']+_0xc55381(0x1c0),_0x1ed229[_0xc55381(0x198)]=_0x4a5f0f[_0xc55381(0x198)],this[_0xc55381(0x1b3)][_0xc55381(0x198)](_0x1ed229);throw new exceptions_1[(_0xc55381(0x1b2))+(_0xc55381(0x189))]('Authentica'+_0xc55381(0x1af),(_0x35a227=_0x4a5f0f[_0xc55381(0x198)])===null||_0x35a227===void(-0x167f+0x4e1+0x16*0xcd)?void(0x9e*0x21+0x1*0x215e+-0x16a*0x26):_0x35a227[_0xc55381(0x1b9)]());}const _0x596d17={};return _0x596d17['apikey']=_0x438881,_0x596d17;});}[a52_0x267d8b(0x1d6)+'sh'](_0x413407){return __awaiter(this,void(-0x4*0x163+-0xaba*0x1+-0x2*-0x823),void(-0x252f+0x9c7*-0x1+-0x1*-0x2ef6),function*(){const _0x206d50=a52_0x2b1d,_0xbf6caf=this[_0x206d50(0x1ae)+_0x206d50(0x1a0)][_0x206d50(0x19b)](_0x206d50(0x199)+_0x206d50(0x191));return yield this[_0xbf6caf[_0x206d50(0x18d)]](_0x413407);});}[a52_0x267d8b(0x1b7)+'en']({oldToken:_0x30d8f2}){return __awaiter(this,void(0x5e9*0x2+-0x41*0x3+-0xb0f),void(0xfd3+0x222f+-0xad*0x4a),function*(){const _0x699474=a52_0x2b1d;if(!(0xf9+0x35a+-0x1*0x453,class_validator_1[_0x699474(0x1d5)])(_0x30d8f2))throw new exceptions_1[(_0x699474(0x1b2))+'Exception'](_0x699474(0x1b8)+'ldToken\x22');try{const _0x541c08=this['configServ'+_0x699474(0x1a0)][_0x699474(0x19b)](_0x699474(0x199)+'TION')[_0x699474(0x1ce)],_0x4584d2={};_0x4584d2['ignoreExpi'+_0x699474(0x194)]=!![];const _0x141325=(-0x122b+-0x1*0x120e+0x3*0xc13,jsonwebtoken_1[_0x699474(0x1cd)])(_0x30d8f2,_0x541c08[_0x699474(0x1b6)],_0x4584d2),_0xc8752c=yield this[_0x699474(0x1d2)][_0x699474(0x1dd)][_0x699474(0x1b1)](_0x141325[_0x699474(0x1b5)+'me']),_0x4ebd24={};_0x4ebd24[_0x699474(0x1c4)+_0x699474(0x194)]=!![];const _0x58d532=(-0x307+0x5bb*0x1+-0x2b4,jsonwebtoken_1[_0x699474(0x1cd)])(_0xc8752c[_0x699474(0x1d1)],_0x541c08[_0x699474(0x1b6)],_0x4ebd24);if(_0x141325[_0x699474(0x195)]!==_0x58d532['tokenId'])throw new exceptions_1[(_0x699474(0x1b2))+(_0x699474(0x189))]('Invalid\x20\x22o'+_0x699474(0x1d0));const _0x27d554={};_0x27d554[_0x699474(0x1b5)+'me']=_0x141325[_0x699474(0x1b5)+'me'];const _0x404b79={'jwt':(yield this[_0x699474(0x1d1)](_0x27d554))[_0x699474(0x1d1)],'instanceName':_0x141325['instanceNa'+'me']};try{const _0x44a4f9=yield this[_0x699474(0x1d2)][_0x699474(0x1a7)][_0x699474(0x1b1)](_0x141325[_0x699474(0x1b5)+'me']);if((_0x44a4f9===null||_0x44a4f9===void(0x21e9+-0x49b+0x3e*-0x79)?void(0x17fb+0x24*0x7f+-0x29d7):_0x44a4f9[_0x699474(0x19c)])&&this[_0x699474(0x1ae)+_0x699474(0x1a0)][_0x699474(0x19b)](_0x699474(0x1de))[_0x699474(0x1b4)][_0x699474(0x1a8)+_0x699474(0x1ab)]){const _0x1f91e4={};_0x1f91e4[_0x699474(0x1d7)]=_0x44a4f9[_0x699474(0x1a2)];const _0x5965d0=axios_1[_0x699474(0x19e)][_0x699474(0x1d3)](_0x1f91e4),_0x59128c={};_0x59128c[_0x699474(0x1a5)]='new.jwt',_0x59128c[_0x699474(0x1bc)]=_0x141325[_0x699474(0x1b5)+'me'],_0x59128c['data']=_0x404b79;const _0x160379={};_0x160379['owner']=this[_0x699474(0x192)][_0x699474(0x1c5)+'s'][_0x141325[_0x699474(0x1b5)+'me']][_0x699474(0x1d9)];const _0x26a916={};_0x26a916[_0x699474(0x187)]=_0x160379,yield _0x5965d0[_0x699474(0x18e)]('',_0x59128c,_0x26a916);}}catch(_0x7deeab){this[_0x699474(0x1b3)][_0x699474(0x198)](_0x7deeab);}return _0x404b79;}catch(_0x595418){const _0x22ed5a={};_0x22ed5a['localError']=AuthService[_0x699474(0x1db)]+(_0x699474(0x19d)+_0x699474(0x1d4)),_0x22ed5a[_0x699474(0x198)]=_0x595418,this[_0x699474(0x1b3)]['error'](_0x22ed5a);throw new exceptions_1['BadRequest'+(_0x699474(0x189))](_0x699474(0x1b8)+_0x699474(0x1d0));}});}}function a52_0x4d8e(){const _0x52d18b=['.refreshTo','default','__awaiter','ice','class-vali','url','357757ZbuPBl','erty','event','defineProp','webhook','NEW_JWT_TO','sign','apply','KEN','axios','../../conf','configServ','tion\x20error','ackage.jso','find','BadRequest','logger','EVENTS','instanceNa','SECRET','refreshTok','Invalid\x20\x22o','toString','EXPIRIN_IN','done','instance','OldToken','uuid','AuthServic','.jwt','ptions','localError','apikey','ignoreExpi','waInstance','__esModule','997508nwOcRI','Logger','105cByPWe','../../../p','3oFIwbc','116736FTeUUG','verify','JWT','dator','ldToken\x22','jwt','repository','create','ken','isJWT','generateHa','baseURL','utf8','wuid','254358WxovKb','name','g-t','auth','WEBHOOK','toUpperCas','config','params','2658992RtRiUK','Exception','1129148gSObHS','ig/logger.','7954070ZlDtlv','TYPE','post','fault','../../exce','TION','waMonitor','24xluTpC','ration','tokenId','value','next','error','AUTHENTICA','jsonwebtok','get','enabled'];a52_0x4d8e=function(){return _0x52d18b;};return a52_0x4d8e();}exports[a52_0x267d8b(0x1bf)+'e']=AuthService;