'use strict';const a51_0x27dc38=a51_0x24f9;(function(_0x6d38fd,_0x1a981c){const _0x322ea3=a51_0x24f9,_0x17c1b4=_0x6d38fd();while(!![]){try{const _0x239b2f=-parseInt(_0x322ea3(0xe7))/(0x15*0xcf+0x173b+0xdb*-0x2f)*(parseInt(_0x322ea3(0xbf))/(-0x39*-0xa7+-0x1833+-0xcfa))+-parseInt(_0x322ea3(0xe1))/(-0x68d+0x7ac*0x1+0x11c*-0x1)+parseInt(_0x322ea3(0xc5))/(0x5ff+-0x1f*0xbf+0xa*0x1b7)+-parseInt(_0x322ea3(0xd7))/(0x1d22+-0x706+-0x1617)*(parseInt(_0x322ea3(0xd9))/(-0x1*0x212+0x224d+-0x2035))+parseInt(_0x322ea3(0xfb))/(0x1cae+-0xc46+-0x1061*0x1)+-parseInt(_0x322ea3(0xd3))/(0xe3b*-0x1+-0x1*0x11db+0x201e)*(parseInt(_0x322ea3(0xbd))/(-0x1546+0xfe8+0x567))+parseInt(_0x322ea3(0xd5))/(-0x1*0xa21+-0xc1f*-0x2+-0xe13);if(_0x239b2f===_0x1a981c)break;else _0x17c1b4['push'](_0x17c1b4['shift']());}catch(_0x5794e2){_0x17c1b4['push'](_0x17c1b4['shift']());}}}(a51_0x4778,-0x7dd82+0x24d95*-0x1+0xec803));var __awaiter=this&&this[a51_0x27dc38(0xf7)]||function(_0x5458f3,_0x47d5aa,_0x5bbdb0,_0x43d94c){function _0x16b108(_0x2412d6){return _0x2412d6 instanceof _0x5bbdb0?_0x2412d6:new _0x5bbdb0(function(_0x2939a9){_0x2939a9(_0x2412d6);});}return new(_0x5bbdb0||(_0x5bbdb0=Promise))(function(_0x182e32,_0x15adeb){const _0x24bbdc=a51_0x24f9;function _0x3fc427(_0x1bbf9b){const _0x11a9a7=a51_0x24f9;try{_0xad929e(_0x43d94c[_0x11a9a7(0xeb)](_0x1bbf9b));}catch(_0x1da342){_0x15adeb(_0x1da342);}}function _0x22465e(_0x18f129){try{_0xad929e(_0x43d94c['throw'](_0x18f129));}catch(_0x5beb7d){_0x15adeb(_0x5beb7d);}}function _0xad929e(_0x499cb6){const _0x2d02f9=a51_0x24f9;_0x499cb6[_0x2d02f9(0xcb)]?_0x182e32(_0x499cb6[_0x2d02f9(0xfc)]):_0x16b108(_0x499cb6[_0x2d02f9(0xfc)])[_0x2d02f9(0xf9)](_0x3fc427,_0x22465e);}_0xad929e((_0x43d94c=_0x43d94c['apply'](_0x5458f3,_0x47d5aa||[]))[_0x24bbdc(0xeb)]());});},__importDefault=this&&this[a51_0x27dc38(0xf2)+a51_0x27dc38(0xd8)]||function(_0x4fb4ea){const _0x51a358=a51_0x27dc38;return _0x4fb4ea&&_0x4fb4ea[_0x51a358(0xc4)]?_0x4fb4ea:{'default':_0x4fb4ea};};const a51_0x3e76c7={};a51_0x3e76c7[a51_0x27dc38(0xfc)]=!![],Object[a51_0x27dc38(0xe9)+a51_0x27dc38(0x102)](exports,a51_0x27dc38(0xc4),a51_0x3e76c7),exports[a51_0x27dc38(0xc8)+'e']=exports[a51_0x27dc38(0xfa)]=void(-0x5*0x7bb+-0x213a+0x47e1*0x1);const package_json_1=require(a51_0x27dc38(0x104)+a51_0x27dc38(0xf6)+'n'),jsonwebtoken_1=require('jsonwebtok'+'en'),logger_config_1=require(a51_0x27dc38(0x100)+'ig/logger.'+a51_0x27dc38(0x107)),uuid_1=require(a51_0x27dc38(0x105)),class_validator_1=require(a51_0x27dc38(0xd0)+a51_0x27dc38(0xff)),exceptions_1=require(a51_0x27dc38(0xd6)+a51_0x27dc38(0x103)),axios_1=__importDefault(require(a51_0x27dc38(0xde)));class OldToken{}function a51_0x24f9(_0x4dc3ee,_0x15b9c4){const _0x8447bc=a51_0x4778();return a51_0x24f9=function(_0x3e76c7,_0x833df){_0x3e76c7=_0x3e76c7-(-0xb*0x349+0x135c+0x1181*0x1);let _0x722e9f=_0x8447bc[_0x3e76c7];return _0x722e9f;},a51_0x24f9(_0x4dc3ee,_0x15b9c4);}exports['OldToken']=OldToken;class AuthService{constructor(_0x90a56a,_0x4210bf,_0x35c660){const _0x24d179=a51_0x27dc38;this[_0x24d179(0xdc)+_0x24d179(0x109)]=_0x90a56a,this[_0x24d179(0xf5)]=_0x4210bf,this[_0x24d179(0xc3)]=_0x35c660,this[_0x24d179(0xd1)]=new logger_config_1['Logger'](AuthService[_0x24d179(0xf1)]);}['jwt'](_0x559650){var _0x2005f9;return __awaiter(this,void(-0x1328+-0x15f2+-0x291a*-0x1),void(0x8c8+-0x22cc+-0x22b*-0xc),function*(){const _0x3083b6=a51_0x24f9,_0x156679=this[_0x3083b6(0xdc)+'ice']['get'](_0x3083b6(0xf8)+_0x3083b6(0xcf))['JWT'],_0x4f51a5=(-0x2620+-0xe26+0x3446,jsonwebtoken_1['sign'])({'instanceName':_0x559650[_0x3083b6(0xce)+'me'],'apiName':package_json_1[_0x3083b6(0xf1)],'tokenId':(-0x1a92*-0x1+-0x52*-0x3b+0x5*-0x918,uuid_1['v4'])()},_0x156679['SECRET'],{'expiresIn':_0x156679['EXPIRIN_IN'],'encoding':_0x3083b6(0x106),'subject':'g-t'}),_0x2f2bef={};_0x2f2bef[_0x3083b6(0x101)]=_0x4f51a5;const _0x524b4d=yield this[_0x3083b6(0xc3)][_0x3083b6(0xf4)][_0x3083b6(0xd4)](_0x2f2bef,_0x559650[_0x3083b6(0xce)+'me']);if(_0x524b4d['error']){const _0x139027={};_0x139027[_0x3083b6(0xe5)]=AuthService['name']+_0x3083b6(0xf0),_0x139027[_0x3083b6(0xc0)]=_0x524b4d[_0x3083b6(0xc0)],this[_0x3083b6(0xd1)]['error'](_0x139027);throw new exceptions_1[(_0x3083b6(0xdb))+(_0x3083b6(0xca))](_0x3083b6(0xef)+_0x3083b6(0xcd),(_0x2005f9=_0x524b4d['error'])===null||_0x2005f9===void(0x35*-0x52+-0x1c1c+0x2d16)?void(-0x1514+0x1*0x2133+0x6b*-0x1d):_0x2005f9['toString']());}const _0x46d8d3={};return _0x46d8d3[_0x3083b6(0x101)]=_0x4f51a5,_0x46d8d3;});}[a51_0x27dc38(0xea)](_0x840749){var _0x2e3d71;return __awaiter(this,void(0x3*-0x20b+-0x22eb+0x47*0x94),void(-0x2*0x29c+-0x255b+-0x4bb*-0x9),function*(){const _0x48b596=a51_0x24f9,_0x422299=(0xff6+-0x12dc+0x35*0xe,uuid_1['v4'])()['toUpperCas'+'e'](),_0x3d8426={};_0x3d8426['apikey']=_0x422299;const _0x190cd6=yield this[_0x48b596(0xc3)][_0x48b596(0xf4)][_0x48b596(0xd4)](_0x3d8426,_0x840749[_0x48b596(0xce)+'me']);if(_0x190cd6[_0x48b596(0xc0)]){const _0x10d0e1={};_0x10d0e1[_0x48b596(0xe5)]=AuthService[_0x48b596(0xf1)]+_0x48b596(0xf0),_0x10d0e1[_0x48b596(0xc0)]=_0x190cd6[_0x48b596(0xc0)],this[_0x48b596(0xd1)][_0x48b596(0xc0)](_0x10d0e1);throw new exceptions_1[(_0x48b596(0xdb))+(_0x48b596(0xca))]('Authentica'+_0x48b596(0xcd),(_0x2e3d71=_0x190cd6[_0x48b596(0xc0)])===null||_0x2e3d71===void(-0x1522+-0xa6c+0x1f8e)?void(-0xefb+0x1cda+-0x1*0xddf):_0x2e3d71[_0x48b596(0xd2)]());}const _0x456452={};return _0x456452[_0x48b596(0xea)]=_0x422299,_0x456452;});}['generateHa'+'sh'](_0x1faf9c){return __awaiter(this,void(-0x1*-0xc+0x1ed*0x7+-0xd87),void(-0x1a33+0x1*0xf0d+0xb26),function*(){const _0x1ca902=a51_0x24f9,_0x101763=this[_0x1ca902(0xdc)+'ice'][_0x1ca902(0xbe)]('AUTHENTICA'+'TION');return yield this[_0x101763[_0x1ca902(0xc7)]](_0x1faf9c);});}['refreshTok'+'en']({oldToken:_0x29aa0e}){return __awaiter(this,void(-0x2356+0x1*-0x1c5f+-0x1*-0x3fb5),void(-0x1ac6+-0x6a*0x31+-0x4*-0xbc4),function*(){const _0x1b120e=a51_0x24f9;if(!(-0x248*0x10+0x106+0x11bd*0x2,class_validator_1[_0x1b120e(0xfe)])(_0x29aa0e))throw new exceptions_1[(_0x1b120e(0xdb))+(_0x1b120e(0xca))]('Invalid\x20\x22o'+_0x1b120e(0xed));try{const _0x494cb6=this[_0x1b120e(0xdc)+_0x1b120e(0x109)][_0x1b120e(0xbe)](_0x1b120e(0xf8)+_0x1b120e(0xcf))[_0x1b120e(0xe6)],_0x578184={};_0x578184[_0x1b120e(0x108)+'ration']=!![];const _0x3810e9=(0x1415+-0x1*-0x1a7b+-0x2e90,jsonwebtoken_1[_0x1b120e(0xdd)])(_0x29aa0e,_0x494cb6[_0x1b120e(0xee)],_0x578184),_0x1c0844=yield this[_0x1b120e(0xc3)][_0x1b120e(0xf4)]['find'](_0x3810e9[_0x1b120e(0xce)+'me']),_0x4637fb={};_0x4637fb['ignoreExpi'+_0x1b120e(0xe2)]=!![];const _0x5c1961=(0x3*-0xa43+0x1d87*0x1+0x2e*0x7,jsonwebtoken_1[_0x1b120e(0xdd)])(_0x1c0844[_0x1b120e(0x101)],_0x494cb6['SECRET'],_0x4637fb);if(_0x3810e9[_0x1b120e(0xdf)]!==_0x5c1961[_0x1b120e(0xdf)])throw new exceptions_1['BadRequest'+(_0x1b120e(0xca))](_0x1b120e(0xbc)+_0x1b120e(0xed));const _0x2e8fbb={};_0x2e8fbb[_0x1b120e(0xce)+'me']=_0x3810e9[_0x1b120e(0xce)+'me'];const _0x2b7ea2={'jwt':(yield this[_0x1b120e(0x101)](_0x2e8fbb))['jwt'],'instanceName':_0x3810e9[_0x1b120e(0xce)+'me']};try{const _0x10ce35=yield this[_0x1b120e(0xc3)][_0x1b120e(0xbb)][_0x1b120e(0xf3)](_0x3810e9['instanceNa'+'me']);if(_0x10ce35['enabled']&&this['configServ'+_0x1b120e(0x109)][_0x1b120e(0xbe)](_0x1b120e(0xcc))[_0x1b120e(0xc2)][_0x1b120e(0xda)+'KEN']){const _0x3fcab7={};_0x3fcab7[_0x1b120e(0xc9)]=_0x10ce35['url'];const _0x1bb4c6=axios_1[_0x1b120e(0xe4)][_0x1b120e(0xd4)](_0x3fcab7),_0x4602e9={};_0x4602e9['event']=_0x1b120e(0xc6),_0x4602e9[_0x1b120e(0xfd)]=_0x3810e9[_0x1b120e(0xce)+'me'],_0x4602e9[_0x1b120e(0xe0)]=_0x2b7ea2;const _0x24610b={};_0x24610b[_0x1b120e(0xe3)]=this[_0x1b120e(0xf5)]['waInstance'+'s'][_0x3810e9[_0x1b120e(0xce)+'me']][_0x1b120e(0xec)];const _0x500cdf={};_0x500cdf[_0x1b120e(0xba)]=_0x24610b,yield _0x1bb4c6['post']('',_0x4602e9,_0x500cdf);}}catch(_0x491284){this[_0x1b120e(0xd1)][_0x1b120e(0xc0)](_0x491284);}return _0x2b7ea2;}catch(_0x559b35){const _0x22268a={};_0x22268a[_0x1b120e(0xe5)]=AuthService[_0x1b120e(0xf1)]+(_0x1b120e(0xe8)+_0x1b120e(0xc1)),_0x22268a[_0x1b120e(0xc0)]=_0x559b35,this['logger'][_0x1b120e(0xc0)](_0x22268a);throw new exceptions_1['BadRequest'+(_0x1b120e(0xca))](_0x1b120e(0xbc)+_0x1b120e(0xed));}});}}function a51_0x4778(){const _0x3f3119=['1035104lTyWyp','value','instance','isJWT','dator','../../conf','jwt','erty','ptions','../../../p','uuid','utf8','config','ignoreExpi','ice','params','webhook','Invalid\x20\x22o','383382fEBJVh','get','4450hHfSUD','error','ken','EVENTS','repository','__esModule','2027232oQFVOn','new.jwt','TYPE','AuthServic','baseURL','Exception','done','WEBHOOK','tion\x20error','instanceNa','TION','class-vali','logger','toString','40DAqEVH','create','11480860BalZWz','../../exce','660355nWApVe','fault','6DfVWyf','NEW_JWT_TO','BadRequest','configServ','verify','axios','tokenId','data','1697292rSUrJm','ration','ownre','default','localError','JWT','265fGmvdV','.refreshTo','defineProp','apikey','next','wuid','ldToken\x22','SECRET','Authentica','.jwt','name','__importDe','find','auth','waMonitor','ackage.jso','__awaiter','AUTHENTICA','then','OldToken'];a51_0x4778=function(){return _0x3f3119;};return a51_0x4778();}exports[a51_0x27dc38(0xc8)+'e']=AuthService;