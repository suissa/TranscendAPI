'use strict';const a52_0x5d9724=a52_0x115d;(function(_0x52609c,_0x2db26f){const _0x2f6cbf=a52_0x115d,_0x193653=_0x52609c();while(!![]){try{const _0x117f10=parseInt(_0x2f6cbf(0x1c1))/(-0x2*0xacb+-0x1ba0+0x3137)+-parseInt(_0x2f6cbf(0x1aa))/(-0x3*-0xa1b+0xc19+0x2*-0x1534)+parseInt(_0x2f6cbf(0x187))/(0x2332+0x105+-0x2434)+parseInt(_0x2f6cbf(0x17f))/(-0x1c2+0x103e+-0xe78)*(parseInt(_0x2f6cbf(0x195))/(0x204b+-0x3a*0x86+-0x1ea))+parseInt(_0x2f6cbf(0x1be))/(-0x2347+0x1826+0x5*0x23b)*(-parseInt(_0x2f6cbf(0x18a))/(0x1b7e+-0x3e*0x20+-0x13b7))+-parseInt(_0x2f6cbf(0x18e))/(0x1f26+0x4cf*0x2+-0x28bc)*(-parseInt(_0x2f6cbf(0x183))/(0x1bcd*-0x1+0x198*0xd+0x71e))+-parseInt(_0x2f6cbf(0x19c))/(-0x14ec+0x1341+-0x1*-0x1b5)*(-parseInt(_0x2f6cbf(0x17d))/(-0x231d*0x1+0xcf*0x2d+-0x13b));if(_0x117f10===_0x2db26f)break;else _0x193653['push'](_0x193653['shift']());}catch(_0x5332ad){_0x193653['push'](_0x193653['shift']());}}}(a52_0x5ec4,0x1*-0x222a7+0xc30f+0x4130e));function a52_0x115d(_0x409c4f,_0x3dca7b){const _0x36c5dd=a52_0x5ec4();return a52_0x115d=function(_0x4a03c8,_0x234681){_0x4a03c8=_0x4a03c8-(-0x125*0x5+-0x71e+0x5*0x2dd);let _0x3def68=_0x36c5dd[_0x4a03c8];return _0x3def68;},a52_0x115d(_0x409c4f,_0x3dca7b);}var __awaiter=this&&this[a52_0x5d9724(0x1b3)]||function(_0x2df62d,_0x2e8ff1,_0x281ffd,_0xcc65b4){function _0x135e12(_0x446ce5){return _0x446ce5 instanceof _0x281ffd?_0x446ce5:new _0x281ffd(function(_0x2400ce){_0x2400ce(_0x446ce5);});}return new(_0x281ffd||(_0x281ffd=Promise))(function(_0x5ccd53,_0x5cc2a4){const _0x229b39=a52_0x115d;function _0x5b497b(_0x319935){const _0x16af08=a52_0x115d;try{_0x30e0dd(_0xcc65b4[_0x16af08(0x1a1)](_0x319935));}catch(_0x30f837){_0x5cc2a4(_0x30f837);}}function _0x11baa3(_0x5121a4){const _0x570cd2=a52_0x115d;try{_0x30e0dd(_0xcc65b4[_0x570cd2(0x185)](_0x5121a4));}catch(_0x5ab9b2){_0x5cc2a4(_0x5ab9b2);}}function _0x30e0dd(_0x4b8a4a){const _0x5454d7=a52_0x115d;_0x4b8a4a[_0x5454d7(0x191)]?_0x5ccd53(_0x4b8a4a['value']):_0x135e12(_0x4b8a4a['value'])[_0x5454d7(0x199)](_0x5b497b,_0x11baa3);}_0x30e0dd((_0xcc65b4=_0xcc65b4[_0x229b39(0x189)](_0x2df62d,_0x2e8ff1||[]))[_0x229b39(0x1a1)]());});},__importDefault=this&&this[a52_0x5d9724(0x192)+a52_0x5d9724(0x188)]||function(_0x261ec3){const _0x354c57=a52_0x5d9724;return _0x261ec3&&_0x261ec3[_0x354c57(0x19d)]?_0x261ec3:{'default':_0x261ec3};};function a52_0x5ec4(){const _0x3519bb=['TION','154760PevNYa','defineProp','WEBHOOK','wuid','ptions','name','url','AuthServic','SECRET','__awaiter','ignoreExpi','Authentica','params','config','create','AUTHENTICA','uuid','Logger','verify','sign','6pLFTjc','repository','logger','40207jhGMeZ','get','../../exce','jsonwebtok','instanceNa','localError','apikey','Invalid\x20\x22o','NEW_JWT_TO','find','ice','isJWT','ldToken\x22','JWT','4279IGCPiP','OldToken','4ooHbTW','auth','owner','jwt','9TTZCMQ','waMonitor','throw','.jwt','1017627yXLzsg','fault','apply','1703100orVhhX','KEN','event','utf8','637136XGYIOA','Exception','g-t','done','__importDe','EVENTS','webhook','101765MPDrwl','ration','default','toString','then','tokenId','post','470vQDbCW','__esModule','erty','refreshTok','waInstance','next','configServ','class-vali','tion\x20error','error','data','ig/logger.','BadRequest'];a52_0x5ec4=function(){return _0x3519bb;};return a52_0x5ec4();}const a52_0x4a03c8={};a52_0x4a03c8['value']=!![],Object[a52_0x5d9724(0x1ab)+a52_0x5d9724(0x19e)](exports,'__esModule',a52_0x4a03c8),exports['AuthServic'+'e']=exports[a52_0x5d9724(0x17e)]=void(0xe*-0xba+0xbac+-0x180);const package_json_1=require('../../../p'+'ackage.jso'+'n'),jsonwebtoken_1=require(a52_0x5d9724(0x1c4)+'en'),logger_config_1=require('../../conf'+a52_0x5d9724(0x1a7)+a52_0x5d9724(0x1b7)),uuid_1=require(a52_0x5d9724(0x1ba)),class_validator_1=require(a52_0x5d9724(0x1a3)+'dator'),exceptions_1=require(a52_0x5d9724(0x1c3)+a52_0x5d9724(0x1ae)),axios_1=__importDefault(require('axios'));class OldToken{}exports[a52_0x5d9724(0x17e)]=OldToken;class AuthService{constructor(_0x3f240b,_0x11b1b1,_0x6350ea){const _0x415530=a52_0x5d9724;this[_0x415530(0x1a2)+_0x415530(0x1cb)]=_0x3f240b,this[_0x415530(0x184)]=_0x11b1b1,this[_0x415530(0x1bf)]=_0x6350ea,this[_0x415530(0x1c0)]=new logger_config_1[(_0x415530(0x1bb))](AuthService[_0x415530(0x1af)]);}[a52_0x5d9724(0x182)](_0x515116){var _0x3e098b;return __awaiter(this,void(-0x11*-0x115+0x2495+0x2*-0x1b7d),void(0x1e58+-0x1ac+-0x5bc*0x5),function*(){const _0x3d47c3=a52_0x115d,_0x3fd776=this[_0x3d47c3(0x1a2)+_0x3d47c3(0x1cb)][_0x3d47c3(0x1c2)](_0x3d47c3(0x1b9)+_0x3d47c3(0x1a9))[_0x3d47c3(0x17c)],_0x556eb3=(-0x22b7+-0x17ed+0x3aa4,jsonwebtoken_1[_0x3d47c3(0x1bd)])({'instanceName':_0x515116[_0x3d47c3(0x1c5)+'me'],'apiName':package_json_1[_0x3d47c3(0x1af)],'tokenId':(-0x5e5+-0x12*-0x76+-0x1*0x267,uuid_1['v4'])()},_0x3fd776[_0x3d47c3(0x1b2)],{'expiresIn':_0x3fd776['EXPIRIN_IN'],'encoding':_0x3d47c3(0x18d),'subject':_0x3d47c3(0x190)}),_0x3e305c={};_0x3e305c[_0x3d47c3(0x182)]=_0x556eb3;const _0x4e67ae=yield this[_0x3d47c3(0x1bf)][_0x3d47c3(0x180)][_0x3d47c3(0x1b8)](_0x3e305c,_0x515116[_0x3d47c3(0x1c5)+'me']);if(_0x4e67ae[_0x3d47c3(0x1a5)]){const _0x195020={};_0x195020['localError']=AuthService['name']+_0x3d47c3(0x186),_0x195020[_0x3d47c3(0x1a5)]=_0x4e67ae[_0x3d47c3(0x1a5)],this[_0x3d47c3(0x1c0)][_0x3d47c3(0x1a5)](_0x195020);throw new exceptions_1['BadRequest'+(_0x3d47c3(0x18f))]('Authentica'+_0x3d47c3(0x1a4),(_0x3e098b=_0x4e67ae[_0x3d47c3(0x1a5)])===null||_0x3e098b===void(-0x1e26+0x14db+0x94b)?void(0x1d11+0x4f4+-0x2205):_0x3e098b[_0x3d47c3(0x198)]());}const _0x5844ae={};return _0x5844ae[_0x3d47c3(0x182)]=_0x556eb3,_0x5844ae;});}[a52_0x5d9724(0x1c7)](_0x49bb61){var _0x2790f3;return __awaiter(this,void(-0x2d*-0xc9+-0x3a3*-0x3+0xf6a*-0x3),void(0x2*-0x120e+-0x22f+0x1*0x264b),function*(){const _0x1e4ec0=a52_0x115d,_0x24a8cf=(-0x18df+0x1*0xbab+0x1a*0x82,uuid_1['v4'])()['toUpperCas'+'e'](),_0x108e81={};_0x108e81[_0x1e4ec0(0x1c7)]=_0x24a8cf;const _0x1e2eed=yield this[_0x1e4ec0(0x1bf)][_0x1e4ec0(0x180)][_0x1e4ec0(0x1b8)](_0x108e81,_0x49bb61[_0x1e4ec0(0x1c5)+'me']);if(_0x1e2eed[_0x1e4ec0(0x1a5)]){const _0x23df12={};_0x23df12[_0x1e4ec0(0x1c6)]=AuthService[_0x1e4ec0(0x1af)]+'.jwt',_0x23df12[_0x1e4ec0(0x1a5)]=_0x1e2eed[_0x1e4ec0(0x1a5)],this[_0x1e4ec0(0x1c0)][_0x1e4ec0(0x1a5)](_0x23df12);throw new exceptions_1['BadRequest'+(_0x1e4ec0(0x18f))](_0x1e4ec0(0x1b5)+_0x1e4ec0(0x1a4),(_0x2790f3=_0x1e2eed[_0x1e4ec0(0x1a5)])===null||_0x2790f3===void(-0x2*-0x3ce+0x20*-0xf1+0x1684)?void(-0xef4+-0x209*-0xd+-0x1*0xb81):_0x2790f3['toString']());}const _0x400118={};return _0x400118['apikey']=_0x24a8cf,_0x400118;});}['generateHa'+'sh'](_0x1774ec){return __awaiter(this,void(-0x3*-0x55b+-0xce*0x2b+-0x41*-0x49),void(-0xc64+-0x63e+0x12a2),function*(){const _0x4ca666=a52_0x115d,_0x3f3680=this['configServ'+'ice'][_0x4ca666(0x1c2)]('AUTHENTICA'+_0x4ca666(0x1a9));return yield this[_0x3f3680['TYPE']](_0x1774ec);});}[a52_0x5d9724(0x19f)+'en']({oldToken:_0x5f93c1}){return __awaiter(this,void(-0x1aeb+0x16f4+0x3f7),void(0xa28+0x812+0x1*-0x123a),function*(){const _0x4a8d24=a52_0x115d;if(!(-0x1655*-0x1+0x96b*0x2+-0x292b,class_validator_1[_0x4a8d24(0x17a)])(_0x5f93c1))throw new exceptions_1[(_0x4a8d24(0x1a8))+(_0x4a8d24(0x18f))](_0x4a8d24(0x1c8)+_0x4a8d24(0x17b));try{const _0x4a6d6f=this[_0x4a8d24(0x1a2)+_0x4a8d24(0x1cb)][_0x4a8d24(0x1c2)](_0x4a8d24(0x1b9)+_0x4a8d24(0x1a9))[_0x4a8d24(0x17c)],_0x206bc8={};_0x206bc8[_0x4a8d24(0x1b4)+_0x4a8d24(0x196)]=!![];const _0x1054e3=(-0x25fa+0x7f*0xd+0x1f87,jsonwebtoken_1[_0x4a8d24(0x1bc)])(_0x5f93c1,_0x4a6d6f[_0x4a8d24(0x1b2)],_0x206bc8),_0x310300=yield this[_0x4a8d24(0x1bf)]['auth'][_0x4a8d24(0x1ca)](_0x1054e3[_0x4a8d24(0x1c5)+'me']),_0x4a1bf2={};_0x4a1bf2[_0x4a8d24(0x1b4)+_0x4a8d24(0x196)]=!![];const _0x3e09ff=(-0x281+-0x48b+0x70c,jsonwebtoken_1[_0x4a8d24(0x1bc)])(_0x310300[_0x4a8d24(0x182)],_0x4a6d6f['SECRET'],_0x4a1bf2);if(_0x1054e3[_0x4a8d24(0x19a)]!==_0x3e09ff[_0x4a8d24(0x19a)])throw new exceptions_1[(_0x4a8d24(0x1a8))+(_0x4a8d24(0x18f))]('Invalid\x20\x22o'+_0x4a8d24(0x17b));const _0x4082b8={};_0x4082b8['instanceNa'+'me']=_0x1054e3[_0x4a8d24(0x1c5)+'me'];const _0x202fd4={'jwt':(yield this[_0x4a8d24(0x182)](_0x4082b8))[_0x4a8d24(0x182)],'instanceName':_0x1054e3[_0x4a8d24(0x1c5)+'me']};try{const _0x5ea061=yield this[_0x4a8d24(0x1bf)][_0x4a8d24(0x194)][_0x4a8d24(0x1ca)](_0x1054e3['instanceNa'+'me']);if(_0x5ea061['enabled']&&this[_0x4a8d24(0x1a2)+_0x4a8d24(0x1cb)][_0x4a8d24(0x1c2)](_0x4a8d24(0x1ac))[_0x4a8d24(0x193)][_0x4a8d24(0x1c9)+_0x4a8d24(0x18b)]){const _0x56eefd={};_0x56eefd['baseURL']=_0x5ea061[_0x4a8d24(0x1b0)];const _0x2af167=axios_1[_0x4a8d24(0x197)][_0x4a8d24(0x1b8)](_0x56eefd),_0x2c8e44={};_0x2c8e44[_0x4a8d24(0x18c)]='new.jwt',_0x2c8e44['instance']=_0x1054e3['instanceNa'+'me'],_0x2c8e44[_0x4a8d24(0x1a6)]=_0x202fd4;const _0x3f230b={};_0x3f230b[_0x4a8d24(0x181)]=this[_0x4a8d24(0x184)][_0x4a8d24(0x1a0)+'s'][_0x1054e3['instanceNa'+'me']][_0x4a8d24(0x1ad)];const _0x823aeb={};_0x823aeb[_0x4a8d24(0x1b6)]=_0x3f230b,yield _0x2af167[_0x4a8d24(0x19b)]('',_0x2c8e44,_0x823aeb);}}catch(_0x27e58b){this[_0x4a8d24(0x1c0)][_0x4a8d24(0x1a5)](_0x27e58b);}return _0x202fd4;}catch(_0x557672){const _0x2b5d74={};_0x2b5d74['localError']=AuthService[_0x4a8d24(0x1af)]+('.refreshTo'+'ken'),_0x2b5d74[_0x4a8d24(0x1a5)]=_0x557672,this[_0x4a8d24(0x1c0)]['error'](_0x2b5d74);throw new exceptions_1[(_0x4a8d24(0x1a8))+(_0x4a8d24(0x18f))]('Invalid\x20\x22o'+_0x4a8d24(0x17b));}});}}exports[a52_0x5d9724(0x1b1)+'e']=AuthService;