'use strict';const a41_0x5c4ea3=a41_0x3da6;function a41_0xd62a(){const _0x3cac60=['$set','fined.','__asyncVal','forEach','3804592ZiyKGb','erty','sort','messageTim','storePath','39879852yMYKnH','ository','splice','where','t/abstract','function','call','MessageRep','124128NcEXJr','opendirSyn','key','owner','path','value','insertCoun','9224ZbXNHz','isFile','68yBMkvb','then','updateOne','ERROR:\x20','error','assign','iterator','3739KvUgkt','insertMany','encoding','MessageQue','key.','Symbol.asy','name','messages','return','limit','ncIterator','next','update','readFileSy','tor','dbSettings','__awaiter','log','find','push','length','38090UWVuPk','ues','configServ','join','estamp','__esModule','ENABLED','unlinkSync','writeStore','delete','entries','Repository','resolve','478lChmLo','../abstrac','30PfcawH','utf-8','messageMod','732kmMBvF','parse','6601NkarOF','done','564570zCnBRk','insert','.repositor','throw','13Ovplpf'];a41_0xd62a=function(){return _0x3cac60;};return a41_0xd62a();}(function(_0x147365,_0x53a43c){const _0x10cac1=a41_0x3da6,_0x2f6a1c=_0x147365();while(!![]){try{const _0x244b7d=-parseInt(_0x10cac1(0xeb))/(0x1ce6+0xaaf+0x11*-0x254)*(parseInt(_0x10cac1(0x10d))/(-0x24b8+-0x1f9d*0x1+0x4457))+-parseInt(_0x10cac1(0xdb))/(0xe27+-0xa13*-0x2+-0x224a)*(parseInt(_0x10cac1(0xe4))/(-0xd4*0xb+0x2*0xded+0x31f*-0x6))+-parseInt(_0x10cac1(0x100))/(0xc2*0x6+-0x1d9f+0x1918)*(-parseInt(_0x10cac1(0x112))/(0x3d*0x68+0x18aa+-0x316c))+-parseInt(_0x10cac1(0x114))/(0x11f4+0xeef*0x1+0x2*-0x106e)*(parseInt(_0x10cac1(0xe2))/(0x1e5b+0x2083*-0x1+0x230))+parseInt(_0x10cac1(0x116))/(0x3*0x5b3+0x96d+-0x1a7d)+-parseInt(_0x10cac1(0x10f))/(0x8d5+0x1eb+-0xab6)*(parseInt(_0x10cac1(0xce))/(0xba7*0x2+-0x11*-0x159+-0xf*0x314))+parseInt(_0x10cac1(0xd3))/(-0x6*-0x58e+0x502+-0x1325*0x2)*(parseInt(_0x10cac1(0x11a))/(0x8e9+0xdb4+0x2*-0xb48));if(_0x244b7d===_0x53a43c)break;else _0x2f6a1c['push'](_0x2f6a1c['shift']());}catch(_0x459a49){_0x2f6a1c['push'](_0x2f6a1c['shift']());}}}(a41_0xd62a,0x1*0x9979d+0x86be*-0x1a+0xd2632));function a41_0x3da6(_0x2f9013,_0x4a5857){const _0x38ef93=a41_0xd62a();return a41_0x3da6=function(_0x21e3e6,_0x44800e){_0x21e3e6=_0x21e3e6-(-0x241c+0xc*0x2ad+0x4cb);let _0x1a3ecb=_0x38ef93[_0x21e3e6];return _0x1a3ecb;},a41_0x3da6(_0x2f9013,_0x4a5857);}var __awaiter=this&&this[a41_0x5c4ea3(0xfb)]||function(_0x2c2e03,_0x4ac6cf,_0x2b42a3,_0x3cf26c){function _0x5835f1(_0x42ef63){return _0x42ef63 instanceof _0x2b42a3?_0x42ef63:new _0x2b42a3(function(_0x2dfe27){_0x2dfe27(_0x42ef63);});}return new(_0x2b42a3||(_0x2b42a3=Promise))(function(_0x2a1f0e,_0x56b0e9){const _0x456708=a41_0x3da6;function _0x4cfca8(_0x28de69){const _0x313a33=a41_0x3da6;try{_0x86f79e(_0x3cf26c[_0x313a33(0xf6)](_0x28de69));}catch(_0x43b609){_0x56b0e9(_0x43b609);}}function _0x43c769(_0x3ce320){const _0x2d1a73=a41_0x3da6;try{_0x86f79e(_0x3cf26c[_0x2d1a73(0x119)](_0x3ce320));}catch(_0x460370){_0x56b0e9(_0x460370);}}function _0x86f79e(_0x296fc0){const _0x5da16f=a41_0x3da6;_0x296fc0['done']?_0x2a1f0e(_0x296fc0[_0x5da16f(0xe0)]):_0x5835f1(_0x296fc0[_0x5da16f(0xe0)])[_0x5da16f(0xe5)](_0x4cfca8,_0x43c769);}_0x86f79e((_0x3cf26c=_0x3cf26c['apply'](_0x2c2e03,_0x4ac6cf||[]))[_0x456708(0xf6)]());});},__asyncValues=this&&this[a41_0x5c4ea3(0xcc)+a41_0x5c4ea3(0x101)]||function(_0x431e32){const _0x18d4c9=a41_0x5c4ea3;if(!Symbol['asyncItera'+_0x18d4c9(0xf9)])throw new TypeError(_0x18d4c9(0xf0)+_0x18d4c9(0xf5)+'\x20is\x20not\x20de'+_0x18d4c9(0xcb));var _0x59c5ea=_0x431e32[Symbol['asyncItera'+_0x18d4c9(0xf9)]],_0x3fefde;return _0x59c5ea?_0x59c5ea[_0x18d4c9(0xd9)](_0x431e32):(_0x431e32=typeof __values===_0x18d4c9(0xd8)?__values(_0x431e32):_0x431e32[Symbol[_0x18d4c9(0xea)]](),_0x3fefde={},_0x7abac7('next'),_0x7abac7(_0x18d4c9(0x119)),_0x7abac7(_0x18d4c9(0xf3)),_0x3fefde[Symbol['asyncItera'+_0x18d4c9(0xf9)]]=function(){return this;},_0x3fefde);function _0x7abac7(_0x38b14f){_0x3fefde[_0x38b14f]=_0x431e32[_0x38b14f]&&function(_0xbf234d){return new Promise(function(_0x9c6070,_0x5f46f2){const _0x41e0c4=a41_0x3da6;_0xbf234d=_0x431e32[_0x38b14f](_0xbf234d),_0x47d51a(_0x9c6070,_0x5f46f2,_0xbf234d[_0x41e0c4(0x115)],_0xbf234d['value']);});};}function _0x47d51a(_0x5a0af9,_0x5dd5a9,_0x19cbe8,_0x5d081e){const _0x125dc0=_0x18d4c9;Promise[_0x125dc0(0x10c)](_0x5d081e)[_0x125dc0(0xe5)](function(_0x5110a1){const _0x5625e1=_0x125dc0,_0x35f6a9={};_0x35f6a9[_0x5625e1(0xe0)]=_0x5110a1,_0x35f6a9['done']=_0x19cbe8,_0x5a0af9(_0x35f6a9);},_0x5dd5a9);}};const a41_0x1a3ecb={};a41_0x1a3ecb[a41_0x5c4ea3(0xe0)]=!![],Object['defineProp'+a41_0x5c4ea3(0xcf)](exports,a41_0x5c4ea3(0x105),a41_0x1a3ecb),exports[a41_0x5c4ea3(0xda)+a41_0x5c4ea3(0xd4)]=exports[a41_0x5c4ea3(0xee)+'ry']=void(0x211*0x5+0x1e33+-0x2888);const path_1=require(a41_0x5c4ea3(0xdf)),abstract_repository_1=require(a41_0x5c4ea3(0x10e)+a41_0x5c4ea3(0xd7)+a41_0x5c4ea3(0x118)+'y'),fs_1=require('fs');class MessageQuery{}exports[a41_0x5c4ea3(0xee)+'ry']=MessageQuery;class MessageRepository extends abstract_repository_1[a41_0x5c4ea3(0x10b)]{constructor(_0x44358d,_0x19ea96){const _0x285020=a41_0x5c4ea3;super(_0x19ea96),this[_0x285020(0x111)+'el']=_0x44358d,this[_0x285020(0x102)+'ice']=_0x19ea96;}[a41_0x5c4ea3(0x117)](_0x246e81,_0x464650=![]){return __awaiter(this,void(0x606*-0x2+-0x1243+0x1e4f*0x1),void(-0x8e*-0x8+-0x1*-0x1a3+-0x613),function*(){const _0x419d38=a41_0x3da6;if(_0x246e81[_0x419d38(0xff)]===-0x939+-0x1552+0x1e8b)return;try{if(this['dbSettings']['ENABLED']&&_0x464650){const _0x170c3e=yield this[_0x419d38(0x111)+'el'][_0x419d38(0xec)]([..._0x246e81]),_0x34b820={};return _0x34b820[_0x419d38(0xe1)+'t']=_0x170c3e[_0x419d38(0xff)],_0x34b820;}if(_0x464650){_0x246e81['forEach'](_0x2d66b1=>this[_0x419d38(0x108)]({'path':(0x1602+0x149d+-0x2a9f,path_1[_0x419d38(0x103)])(this['storePath'],_0x419d38(0xf2),_0x2d66b1[_0x419d38(0xde)]),'fileName':_0x2d66b1[_0x419d38(0xdd)]['id'],'data':_0x2d66b1}));const _0x526740={};return _0x526740[_0x419d38(0xe1)+'t']=_0x246e81[_0x419d38(0xff)],_0x526740;}const _0xff804d={};return _0xff804d[_0x419d38(0xe1)+'t']=0x0,_0xff804d;}catch(_0x5b9258){return console[_0x419d38(0xfc)](_0x419d38(0xe7),_0x5b9258),_0x5b9258;}finally{_0x246e81=undefined;}});}[a41_0x5c4ea3(0xfd)](_0x1c5e78){var _0x112a2f,_0x4bfdd2,_0x37897c,_0x4865a8,_0x778cd6,_0x478f7b,_0x2a2c10,_0x459d6a,_0x27e6a7,_0x3abbe7;return __awaiter(this,void(-0x19f4+-0xb5b+0x254f),void(0x79b+0x3*-0xfe+-0x4a1),function*(){const _0x1738ce=a41_0x3da6;try{if(this[_0x1738ce(0xfa)][_0x1738ce(0x106)]){if((_0x778cd6=_0x1c5e78===null||_0x1c5e78===void(0xb*-0x241+-0x2680+0x3f4b*0x1)?void(0x121a+0xe79+-0x2093):_0x1c5e78[_0x1738ce(0xd6)])===null||_0x778cd6===void(-0x436+0x1*0x1af8+0x1*-0x16c2)?void(0x679+-0x2ac+0x3cd*-0x1):_0x778cd6['key']){for(const [_0x151f85,_0x55d0b2]of Object[_0x1738ce(0x10a)](_0x1c5e78[_0x1738ce(0xd6)][_0x1738ce(0xdd)])){_0x1c5e78['where'][_0x1738ce(0xef)+_0x151f85]=_0x55d0b2;}(_0x478f7b=_0x1c5e78===null||_0x1c5e78===void(-0xfa6+-0x117*0x1+0x5*0x359)?void(-0x1a22+-0x1175+0x2b97):_0x1c5e78[_0x1738ce(0xd6)])===null||_0x478f7b===void(0xa*0x64+-0x155c+0x45d*0x4)?!![]:delete _0x478f7b['key'];}const _0x2cabd8={};return _0x2cabd8[_0x1738ce(0xd1)+_0x1738ce(0x104)]=-(0xe2*0x2b+0x1*0x31f+-0xef*0x2c),yield this[_0x1738ce(0x111)+'el'][_0x1738ce(0xfd)](Object['assign']({},_0x1c5e78[_0x1738ce(0xd6)]))['sort'](_0x2cabd8)[_0x1738ce(0xf4)]((_0x2a2c10=_0x1c5e78===null||_0x1c5e78===void(0x6*-0x281+-0xa1*0x1+0x1*0xfa7)?void(-0x1*-0x18eb+0xad1+0x23bc*-0x1):_0x1c5e78[_0x1738ce(0xf4)])!==null&&_0x2a2c10!==void(-0x1c7c+0x3*0x6c1+-0x5*-0x1a5)?_0x2a2c10:-0x1708+-0x1*-0x1510+0x1f8);}const _0xdeaaed=[];if((_0x27e6a7=(_0x459d6a=_0x1c5e78===null||_0x1c5e78===void(-0x19*0x95+-0x1cd*-0x7+0x1f2)?void(0x53*0x1d+0x3b5+-0xd1c):_0x1c5e78[_0x1738ce(0xd6)])===null||_0x459d6a===void(-0xa00+0x195+-0x5*-0x1af)?void(0x58*0x16+-0x4d*-0xe+-0xbc6):_0x459d6a['key'])===null||_0x27e6a7===void(-0x7eb*-0x1+0x1*0x25f9+0x21*-0x164)?void(0x13be+0x2601+-0x39bf):_0x27e6a7['id']){const _0x4827a6={};_0x4827a6[_0x1738ce(0xed)]=_0x1738ce(0x110),_0xdeaaed[_0x1738ce(0xfe)](JSON['parse']((-0x22ae+0x12a5*0x1+0x5*0x335,fs_1[_0x1738ce(0xf8)+'nc'])((0x5b*0x53+-0x943*-0x1+0x33b*-0xc,path_1[_0x1738ce(0x103)])(this[_0x1738ce(0xd2)],'messages',_0x1c5e78[_0x1738ce(0xd6)]['owner'],_0x1c5e78[_0x1738ce(0xd6)][_0x1738ce(0xdd)]['id']+'.json'),_0x4827a6)));}else{const _0x42d8d8={};_0x42d8d8[_0x1738ce(0xed)]=_0x1738ce(0x110);const _0x2c6a17=(-0x2*-0x1361+0x2*-0x135e+-0x1*0x6,fs_1[_0x1738ce(0xdc)+'c'])((-0x18e6+0x221d+-0x1*0x937,path_1[_0x1738ce(0x103)])(this[_0x1738ce(0xd2)],_0x1738ce(0xf2),_0x1c5e78[_0x1738ce(0xd6)]['owner']),_0x42d8d8);try{for(var _0x56b435=!![],_0x1da300=__asyncValues(_0x2c6a17),_0x43395d;_0x43395d=yield _0x1da300[_0x1738ce(0xf6)](),_0x112a2f=_0x43395d[_0x1738ce(0x115)],!_0x112a2f;){_0x4865a8=_0x43395d[_0x1738ce(0xe0)],_0x56b435=![];try{const _0xe29bd1=_0x4865a8;if(_0xe29bd1[_0x1738ce(0xe3)]()){const _0x2953ab={};_0x2953ab[_0x1738ce(0xed)]=_0x1738ce(0x110),_0xdeaaed['push'](JSON[_0x1738ce(0x113)]((0x1*0x1131+0xe6f*0x1+-0x1fa0,fs_1[_0x1738ce(0xf8)+'nc'])((0x87b*0x3+-0x6b*0x37+-0x274,path_1[_0x1738ce(0x103)])(this[_0x1738ce(0xd2)],_0x1738ce(0xf2),_0x1c5e78[_0x1738ce(0xd6)]['owner'],_0xe29bd1[_0x1738ce(0xf1)]),_0x2953ab)));}}finally{_0x56b435=!![];}}}catch(_0x215625){const _0x541acf={};_0x541acf[_0x1738ce(0xe8)]=_0x215625,_0x4bfdd2=_0x541acf;}finally{try{if(!_0x56b435&&!_0x112a2f&&(_0x37897c=_0x1da300[_0x1738ce(0xf3)]))yield _0x37897c['call'](_0x1da300);}finally{if(_0x4bfdd2)throw _0x4bfdd2[_0x1738ce(0xe8)];}}}return _0xdeaaed[_0x1738ce(0xd0)]((_0x11a476,_0x3c4b3e)=>{const _0x146620=_0x1738ce;return _0x3c4b3e['messageTim'+_0x146620(0x104)]-_0x11a476[_0x146620(0xd1)+_0x146620(0x104)];})[_0x1738ce(0xd5)](0x1333*-0x2+0x11*-0x1d5+-0x1*-0x458b,(_0x3abbe7=_0x1c5e78===null||_0x1c5e78===void(0x11ff+-0x2*0x6a4+-0x4b7)?void(-0x3*-0x8c5+0x35*0x55+-0x2be8):_0x1c5e78[_0x1738ce(0xf4)])!==null&&_0x3abbe7!==void(-0x8*0x3a1+-0x2*-0x3ad+0x15ae)?_0x3abbe7:_0xdeaaed[_0x1738ce(0xff)]);}catch(_0x27b7a7){return[];}});}[a41_0x5c4ea3(0x109)](_0x5c1379){return __awaiter(this,void(0x1*0x82+-0x32*-0x3+0x4*-0x46),void(-0x1771+0x105*0x2+0x1*0x1567),function*(){const _0x47ebc3=a41_0x3da6;try{if(this[_0x47ebc3(0xfa)][_0x47ebc3(0x106)])yield this[_0x47ebc3(0x111)+'el']['deleteMany'](Object[_0x47ebc3(0xe9)]({},_0x5c1379[_0x47ebc3(0xd6)]));else{const {owner:_0xfe3954}=_0x5c1379['where'],_0x5da5e7=(0x14e7*0x1+0x1*-0x17f4+0x47*0xb,fs_1['readdirSyn'+'c'])((0x2024+-0x11*0xc7+-0x12ed,path_1[_0x47ebc3(0x103)])(this[_0x47ebc3(0xd2)],_0x47ebc3(0xf2),_0xfe3954));_0x5da5e7['forEach'](_0x128147=>{const _0x276662=_0x47ebc3,_0x1845e4=(0x34a+0x3*-0x166+0xe8,path_1['join'])(this[_0x276662(0xd2)],_0x276662(0xf2),_0xfe3954,_0x128147);(-0x2*-0xcb+0x585*-0x7+0x10f*0x23,fs_1[_0x276662(0x107)])(_0x1845e4);});}}catch(_0x448805){console[_0x47ebc3(0xe8)](_0x448805);}});}[a41_0x5c4ea3(0xf7)](_0x3564c0,_0x14234b){return __awaiter(this,void(0x43d+0x4d*-0x3e+0xe69),void(-0x139f+-0x13b4+0x2753),function*(){const _0xe15a40=a41_0x3da6;try{if(this['dbSettings']['ENABLED']){const _0x3c0cde={};_0x3c0cde[_0xe15a40(0x11b)]=_0x14234b,yield this[_0xe15a40(0x111)+'el'][_0xe15a40(0xe6)](Object[_0xe15a40(0xe9)]({},_0x3564c0[_0xe15a40(0xd6)]),_0x3c0cde);}else{}}catch(_0x5e4ac8){console[_0xe15a40(0xe8)](_0x5e4ac8);}});}[a41_0x5c4ea3(0xec)](_0x371bec,_0x16198f=![]){return __awaiter(this,void(0x37*-0x9b+-0x765*-0x3+-0xb1e*-0x1),void(0x388+0x128e+-0x1616),function*(){const _0xa6b69e=a41_0x3da6;if(_0x371bec[_0xa6b69e(0xff)]===-0xe7b+0x347+0xb34)return;try{if(this[_0xa6b69e(0xfa)][_0xa6b69e(0x106)]&&_0x16198f){const _0x1b4dad=yield this[_0xa6b69e(0x111)+'el']['insertMany']([..._0x371bec]),_0x15f4aa={};return _0x15f4aa[_0xa6b69e(0xe1)+'t']=_0x1b4dad[_0xa6b69e(0xff)],_0x15f4aa;}if(_0x16198f){_0x371bec[_0xa6b69e(0xcd)](_0x5359ef=>this[_0xa6b69e(0x108)]({'path':(-0x81b*-0x4+0x1f7f+-0x3feb*0x1,path_1[_0xa6b69e(0x103)])(this['storePath'],_0xa6b69e(0xf2),_0x5359ef[_0xa6b69e(0xde)]),'fileName':_0x5359ef[_0xa6b69e(0xdd)]['id'],'data':_0x5359ef}));const _0x435db7={};return _0x435db7[_0xa6b69e(0xe1)+'t']=_0x371bec[_0xa6b69e(0xff)],_0x435db7;}const _0x239c34={};return _0x239c34[_0xa6b69e(0xe1)+'t']=0x0,_0x239c34;}catch(_0xce2dcc){return console[_0xa6b69e(0xfc)]('ERROR:\x20',_0xce2dcc),_0xce2dcc;}finally{_0x371bec=undefined;}});}}exports['MessageRep'+a41_0x5c4ea3(0xd4)]=MessageRepository;