'use strict';const a41_0x5e7b95=a41_0x2df4;function a41_0x2df4(_0x160b45,_0x2b97a2){const _0x32c866=a41_0xef2b();return a41_0x2df4=function(_0x56f2a0,_0x1dce83){_0x56f2a0=_0x56f2a0-(0x1ec4+0x2703+-0x1*0x44db);let _0x101907=_0x32c866[_0x56f2a0];return _0x101907;},a41_0x2df4(_0x160b45,_0x2b97a2);}function a41_0xef2b(){const _0x1b0362=['.json','8346896HDnHzd','insertMany','insertCoun','../abstrac','5naUQtf','.repositor','tor','assign','key','owner','erty','2819247WRemTq','apply','messages','length','error','configServ','path','MessageQue','estamp','forEach','MessageRep','call','parse','__awaiter','insert','$set','Repository','sort','7OWCReM','limit','3957300jcqaSI','where','resolve','done','messageTim','4724556MRrhHh','push','next','ERROR:\x20','find','23060301JIWwSU','then','12195caKuiF','2rdoTDM','utf-8','unlinkSync','ository','key.','encoding','join','deleteMany','__asyncVal','messageMod','asyncItera','updateOne','ues','readFileSy','6730TZOIRJ','storePath','t/abstract','ENABLED','opendirSyn','readdirSyn','throw','\x20is\x20not\x20de','defineProp','isFile','dbSettings','__esModule','Symbol.asy','delete','1516001cxpTis','value','writeStore'];a41_0xef2b=function(){return _0x1b0362;};return a41_0xef2b();}(function(_0xe3c27e,_0x1a5d82){const _0x5d52e2=a41_0x2df4,_0xc7ef53=_0xe3c27e();while(!![]){try{const _0x5c63b5=parseInt(_0x5d52e2(0x126))/(0x108d+0x143b+0x24c7*-0x1)+-parseInt(_0x5d52e2(0x10a))/(0x2*0xe8a+0xf01*0x1+0x1*-0x2c13)*(parseInt(_0x5d52e2(0x135))/(0xc5+0x2193+-0xb*0x31f))+parseInt(_0x5d52e2(0xfd))/(-0x1*-0xa57+0x16f*-0x5+-0x328)*(-parseInt(_0x5d52e2(0x12e))/(-0x825*-0x1+-0xc7f+0x45f))+-parseInt(_0x5d52e2(0x102))/(-0x2362+0x1964+-0x2*-0x502)*(parseInt(_0x5d52e2(0xfb))/(-0x138b+0xd1e+0x674))+-parseInt(_0x5d52e2(0x12a))/(-0x1c0b+0x1f*-0x11f+0x3ed4)+-parseInt(_0x5d52e2(0x109))/(-0x1*0x1be9+0x2105*0x1+-0x3*0x1b1)*(-parseInt(_0x5d52e2(0x118))/(-0x4f0+0x5*-0x67d+-0x135*-0x1f))+parseInt(_0x5d52e2(0x107))/(0x3*0x2c2+0x2*-0x345+0x1b1*-0x1);if(_0x5c63b5===_0x1a5d82)break;else _0xc7ef53['push'](_0xc7ef53['shift']());}catch(_0x2b7e50){_0xc7ef53['push'](_0xc7ef53['shift']());}}}(a41_0xef2b,-0xd6c7+0x146703+-0x347*0x269));var __awaiter=this&&this[a41_0x5e7b95(0xf6)]||function(_0x5e77cc,_0x576348,_0x5345b9,_0x19f026){function _0x29c200(_0x5731fd){return _0x5731fd instanceof _0x5345b9?_0x5731fd:new _0x5345b9(function(_0x46b028){_0x46b028(_0x5731fd);});}return new(_0x5345b9||(_0x5345b9=Promise))(function(_0x484b6f,_0x2de550){const _0x2550f1=a41_0x2df4;function _0x39cf25(_0x575e61){const _0x1208a8=a41_0x2df4;try{_0x58b5a2(_0x19f026[_0x1208a8(0x104)](_0x575e61));}catch(_0x57213b){_0x2de550(_0x57213b);}}function _0x136ecc(_0x478dab){const _0x738b85=a41_0x2df4;try{_0x58b5a2(_0x19f026[_0x738b85(0x11e)](_0x478dab));}catch(_0x240d9f){_0x2de550(_0x240d9f);}}function _0x58b5a2(_0x1fc73b){const _0x39c718=a41_0x2df4;_0x1fc73b['done']?_0x484b6f(_0x1fc73b['value']):_0x29c200(_0x1fc73b['value'])[_0x39c718(0x108)](_0x39cf25,_0x136ecc);}_0x58b5a2((_0x19f026=_0x19f026[_0x2550f1(0x136)](_0x5e77cc,_0x576348||[]))[_0x2550f1(0x104)]());});},__asyncValues=this&&this[a41_0x5e7b95(0x112)+a41_0x5e7b95(0x116)]||function(_0x12a106){const _0x4bf275=a41_0x5e7b95;if(!Symbol[_0x4bf275(0x114)+_0x4bf275(0x130)])throw new TypeError(_0x4bf275(0x124)+'ncIterator'+_0x4bf275(0x11f)+'fined.');var _0x51ecdc=_0x12a106[Symbol[_0x4bf275(0x114)+_0x4bf275(0x130)]],_0xbfed1c;return _0x51ecdc?_0x51ecdc[_0x4bf275(0xf4)](_0x12a106):(_0x12a106=typeof __values==='function'?__values(_0x12a106):_0x12a106[Symbol['iterator']](),_0xbfed1c={},_0x43a77e(_0x4bf275(0x104)),_0x43a77e('throw'),_0x43a77e('return'),_0xbfed1c[Symbol[_0x4bf275(0x114)+_0x4bf275(0x130)]]=function(){return this;},_0xbfed1c);function _0x43a77e(_0x4e5c24){_0xbfed1c[_0x4e5c24]=_0x12a106[_0x4e5c24]&&function(_0xae5134){return new Promise(function(_0x1a401c,_0x2cfcf0){const _0x2ac7a2=a41_0x2df4;_0xae5134=_0x12a106[_0x4e5c24](_0xae5134),_0x5a7ae4(_0x1a401c,_0x2cfcf0,_0xae5134[_0x2ac7a2(0x100)],_0xae5134['value']);});};}function _0x5a7ae4(_0x26ee91,_0x5f1970,_0x571c43,_0x5143fb){const _0x4facea=_0x4bf275;Promise[_0x4facea(0xff)](_0x5143fb)[_0x4facea(0x108)](function(_0x385957){const _0x4e80b1=_0x4facea,_0x12f9d3={};_0x12f9d3['value']=_0x385957,_0x12f9d3[_0x4e80b1(0x100)]=_0x571c43,_0x26ee91(_0x12f9d3);},_0x5f1970);}};const a41_0x101907={};a41_0x101907[a41_0x5e7b95(0x127)]=!![],Object[a41_0x5e7b95(0x120)+a41_0x5e7b95(0x134)](exports,a41_0x5e7b95(0x123),a41_0x101907),exports[a41_0x5e7b95(0xf3)+'ository']=exports[a41_0x5e7b95(0xf0)+'ry']=void(0xb2e+0x1b12+0x44*-0x90);const path_1=require(a41_0x5e7b95(0xef)),abstract_repository_1=require(a41_0x5e7b95(0x12d)+a41_0x5e7b95(0x11a)+a41_0x5e7b95(0x12f)+'y'),fs_1=require('fs');class MessageQuery{}exports[a41_0x5e7b95(0xf0)+'ry']=MessageQuery;class MessageRepository extends abstract_repository_1[a41_0x5e7b95(0xf9)]{constructor(_0x55886c,_0x4f8651){const _0x1492d6=a41_0x5e7b95;super(_0x4f8651),this['messageMod'+'el']=_0x55886c,this[_0x1492d6(0xee)+'ice']=_0x4f8651;}[a41_0x5e7b95(0xf7)](_0x378801,_0x3d4aa9=![]){return __awaiter(this,void(0x167b+0x9ef+-0x206a),void(0x1c59+-0x157*-0x17+0x1d95*-0x2),function*(){const _0x48abf0=a41_0x2df4;if(_0x378801[_0x48abf0(0xec)]===0xde7+0x1d02+-0x2ae9)return;try{if(this['dbSettings']['ENABLED']&&_0x3d4aa9){const _0x49dfd0=yield this['messageMod'+'el'][_0x48abf0(0x12b)]([..._0x378801]),_0x5f5d8d={};return _0x5f5d8d[_0x48abf0(0x12c)+'t']=_0x49dfd0[_0x48abf0(0xec)],_0x5f5d8d;}if(_0x3d4aa9){_0x378801[_0x48abf0(0xf2)](_0x2b6697=>this[_0x48abf0(0x128)]({'path':(-0x1a86+-0x20ba+0x3b40,path_1[_0x48abf0(0x110)])(this['storePath'],_0x48abf0(0x137),_0x2b6697[_0x48abf0(0x133)]),'fileName':_0x2b6697['key']['id'],'data':_0x2b6697}));const _0x2fd653={};return _0x2fd653[_0x48abf0(0x12c)+'t']=_0x378801[_0x48abf0(0xec)],_0x2fd653;}const _0xaa92a6={};return _0xaa92a6[_0x48abf0(0x12c)+'t']=0x0,_0xaa92a6;}catch(_0x651006){return console['log'](_0x48abf0(0x105),_0x651006),_0x651006;}finally{_0x378801=undefined;}});}[a41_0x5e7b95(0x106)](_0x5b3cac){var _0x379249,_0x578466,_0x157230,_0x57b82f,_0x3638dc,_0x48baac,_0x481d58,_0x386383,_0x2096c3,_0x38fe95;return __awaiter(this,void(0x1cdc+0x2056+-0xe*0x45f),void(0x2f*0xaf+-0x63*-0x3d+-0x37b8),function*(){const _0x29dc58=a41_0x2df4;try{if(this[_0x29dc58(0x122)][_0x29dc58(0x11b)]){if((_0x3638dc=_0x5b3cac===null||_0x5b3cac===void(0x7c0+-0x1f*0x53+0x1f*0x13)?void(0x2c9*0xe+-0x245+0x1*-0x24b9):_0x5b3cac[_0x29dc58(0xfe)])===null||_0x3638dc===void(-0x1845+0x1*-0xf7f+0x14*0x1fd)?void(0x1347+-0x1*0x10e7+-0x260):_0x3638dc[_0x29dc58(0x132)]){for(const [_0x5c9788,_0x27190f]of Object['entries'](_0x5b3cac[_0x29dc58(0xfe)]['key'])){_0x5b3cac[_0x29dc58(0xfe)][_0x29dc58(0x10e)+_0x5c9788]=_0x27190f;}(_0x48baac=_0x5b3cac===null||_0x5b3cac===void(-0x21c0+0x1*0x5f+0x2161)?void(-0x4*-0x1d+0x1202+-0x1276):_0x5b3cac['where'])===null||_0x48baac===void(0x19*0x13d+-0x1bfe+-0x2f7)?!![]:delete _0x48baac['key'];}const _0x3312fc={};return _0x3312fc[_0x29dc58(0x101)+_0x29dc58(0xf1)]=-(-0xf1f+0x2314+-0x2*0x9fa),yield this[_0x29dc58(0x113)+'el']['find'](Object['assign']({},_0x5b3cac[_0x29dc58(0xfe)]))['sort'](_0x3312fc)[_0x29dc58(0xfc)]((_0x481d58=_0x5b3cac===null||_0x5b3cac===void(-0x1ef+-0x132*-0x1b+-0x1e57)?void(-0x141d+0x188b*0x1+0x51*-0xe):_0x5b3cac[_0x29dc58(0xfc)])!==null&&_0x481d58!==void(0xeea+-0x3f6+-0x57a*0x2)?_0x481d58:0x122+0x1a2*-0xa+0xa*0x185);}const _0xadfa19=[];if((_0x2096c3=(_0x386383=_0x5b3cac===null||_0x5b3cac===void(-0x1ed7+0x1*-0x13e4+-0x27*-0x14d)?void(-0x2564+0x494*0x1+0x258*0xe):_0x5b3cac[_0x29dc58(0xfe)])===null||_0x386383===void(-0x1e93+0x249f*0x1+-0x183*0x4)?void(0x421+-0x2fa+-0x127):_0x386383[_0x29dc58(0x132)])===null||_0x2096c3===void(-0xe26*-0x1+0x147*-0x1d+0x16e5)?void(0x6*0x51+0x155+-0x1*0x33b):_0x2096c3['id']){const _0x208a95={};_0x208a95[_0x29dc58(0x10f)]=_0x29dc58(0x10b),_0xadfa19[_0x29dc58(0x103)](JSON['parse']((-0x1*-0x841+-0x5*0x4bb+-0x1b6*-0x9,fs_1[_0x29dc58(0x117)+'nc'])((-0xcb9+0x61*-0x54+0x8e9*0x5,path_1[_0x29dc58(0x110)])(this[_0x29dc58(0x119)],_0x29dc58(0x137),_0x5b3cac[_0x29dc58(0xfe)][_0x29dc58(0x133)],_0x5b3cac[_0x29dc58(0xfe)][_0x29dc58(0x132)]['id']+_0x29dc58(0x129)),_0x208a95)));}else{const _0x5764d2={};_0x5764d2[_0x29dc58(0x10f)]=_0x29dc58(0x10b);const _0x7fd6d9=(0x243+-0x1d6d+0x1b2a,fs_1[_0x29dc58(0x11c)+'c'])((-0x3bc*-0x2+-0x182f+-0x1*-0x10b7,path_1[_0x29dc58(0x110)])(this[_0x29dc58(0x119)],'messages',_0x5b3cac[_0x29dc58(0xfe)][_0x29dc58(0x133)]),_0x5764d2);try{for(var _0x5b3153=!![],_0x2460f7=__asyncValues(_0x7fd6d9),_0x4c1ba7;_0x4c1ba7=yield _0x2460f7['next'](),_0x379249=_0x4c1ba7[_0x29dc58(0x100)],!_0x379249;){_0x57b82f=_0x4c1ba7['value'],_0x5b3153=![];try{const _0x2a4668=_0x57b82f;if(_0x2a4668[_0x29dc58(0x121)]()){const _0x3373f2={};_0x3373f2['encoding']=_0x29dc58(0x10b),_0xadfa19[_0x29dc58(0x103)](JSON[_0x29dc58(0xf5)]((-0x5*-0x3d1+0x16ae+-0x29c3,fs_1['readFileSy'+'nc'])((0x31*0x2+-0x1*-0x1dcd+0x1*-0x1e2f,path_1[_0x29dc58(0x110)])(this['storePath'],'messages',_0x5b3cac[_0x29dc58(0xfe)][_0x29dc58(0x133)],_0x2a4668['name']),_0x3373f2)));}}finally{_0x5b3153=!![];}}}catch(_0x46ce5b){const _0x407502={};_0x407502[_0x29dc58(0xed)]=_0x46ce5b,_0x578466=_0x407502;}finally{try{if(!_0x5b3153&&!_0x379249&&(_0x157230=_0x2460f7['return']))yield _0x157230['call'](_0x2460f7);}finally{if(_0x578466)throw _0x578466[_0x29dc58(0xed)];}}}return _0xadfa19[_0x29dc58(0xfa)]((_0x110d9a,_0x110620)=>{const _0x2048b7=_0x29dc58;return _0x110620[_0x2048b7(0x101)+'estamp']-_0x110d9a[_0x2048b7(0x101)+_0x2048b7(0xf1)];})['splice'](-0x995*-0x3+0x11ca+-0x2e89,(_0x38fe95=_0x5b3cac===null||_0x5b3cac===void(-0xbe2+-0x233c+-0x146*-0x25)?void(0xc80+-0x1e40+0x11c0):_0x5b3cac[_0x29dc58(0xfc)])!==null&&_0x38fe95!==void(0x1*-0x1a1f+0x23f4+-0x9d5)?_0x38fe95:_0xadfa19['length']);}catch(_0x5aa313){return[];}});}[a41_0x5e7b95(0x125)](_0x3fd2e2){return __awaiter(this,void(0xd37+-0x992+-0x3a5*0x1),void(0x266a+-0x789*0x3+-0xfcf),function*(){const _0x31c15d=a41_0x2df4;try{if(this[_0x31c15d(0x122)][_0x31c15d(0x11b)])yield this['messageMod'+'el'][_0x31c15d(0x111)](Object[_0x31c15d(0x131)]({},_0x3fd2e2[_0x31c15d(0xfe)]));else{const {owner:_0x33bdcc}=_0x3fd2e2[_0x31c15d(0xfe)],_0x4bc467=(-0x26f2+0x20db+-0x617*-0x1,fs_1[_0x31c15d(0x11d)+'c'])((0x2ca+0xc77+-0xf41,path_1[_0x31c15d(0x110)])(this[_0x31c15d(0x119)],_0x31c15d(0x137),_0x33bdcc));_0x4bc467[_0x31c15d(0xf2)](_0x4d44d4=>{const _0x11f6bd=_0x31c15d,_0x2d78a7=(0x1efe+-0x1ef6+0x4*-0x2,path_1[_0x11f6bd(0x110)])(this[_0x11f6bd(0x119)],_0x11f6bd(0x137),_0x33bdcc,_0x4d44d4);(-0x5ba*0x5+0xe15+0xe8d,fs_1[_0x11f6bd(0x10c)])(_0x2d78a7);});}}catch(_0x35cc9e){console[_0x31c15d(0xed)](_0x35cc9e);}});}['update'](_0x186909,_0x1e7bff){return __awaiter(this,void(0xa*-0xa3+0x2581+-0x1f23),void(-0x1a44+-0xd5f+0x27a3),function*(){const _0x9a56bf=a41_0x2df4;try{if(this['dbSettings'][_0x9a56bf(0x11b)]){const _0x34f20f={};_0x34f20f[_0x9a56bf(0xf8)]=_0x1e7bff,yield this[_0x9a56bf(0x113)+'el'][_0x9a56bf(0x115)](Object[_0x9a56bf(0x131)]({},_0x186909['where']),_0x34f20f);}else{}}catch(_0x34fc6b){console[_0x9a56bf(0xed)](_0x34fc6b);}});}['insertMany'](_0x36665,_0xbfadb0=![]){return __awaiter(this,void(0x2*-0x56d+-0xf48*-0x1+-0x46e),void(-0x17*0x133+-0x381*0x1+-0x1f16*-0x1),function*(){const _0x4c9b0f=a41_0x2df4;if(_0x36665[_0x4c9b0f(0xec)]===0x7*-0x11f+0xa*-0xbf+0xf4f*0x1)return;try{if(this[_0x4c9b0f(0x122)][_0x4c9b0f(0x11b)]&&_0xbfadb0){const _0x62c43a=yield this[_0x4c9b0f(0x113)+'el']['insertMany']([..._0x36665]),_0x5d2ae5={};return _0x5d2ae5['insertCoun'+'t']=_0x62c43a[_0x4c9b0f(0xec)],_0x5d2ae5;}if(_0xbfadb0){_0x36665[_0x4c9b0f(0xf2)](_0x55eca6=>this['writeStore']({'path':(-0x13f6+-0x1d81+-0x711*-0x7,path_1['join'])(this['storePath'],'messages',_0x55eca6[_0x4c9b0f(0x133)]),'fileName':_0x55eca6[_0x4c9b0f(0x132)]['id'],'data':_0x55eca6}));const _0x179ad7={};return _0x179ad7[_0x4c9b0f(0x12c)+'t']=_0x36665['length'],_0x179ad7;}const _0x3f89f7={};return _0x3f89f7['insertCoun'+'t']=0x0,_0x3f89f7;}catch(_0x21c6e7){return console['log'](_0x4c9b0f(0x105),_0x21c6e7),_0x21c6e7;}finally{_0x36665=undefined;}});}}exports[a41_0x5e7b95(0xf3)+a41_0x5e7b95(0x10d)]=MessageRepository;