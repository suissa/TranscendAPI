'use strict';const a40_0x32d60e=a40_0x3e91;function a40_0x3e91(_0x523548,_0x48de1e){const _0x55ee72=a40_0x2825();return a40_0x3e91=function(_0x4616a6,_0x21a269){_0x4616a6=_0x4616a6-(0x1baf+0x1321*0x2+0x193*-0x29);let _0x2926b4=_0x55ee72[_0x4616a6];return _0x2926b4;},a40_0x3e91(_0x523548,_0x48de1e);}function a40_0x2825(){const _0xa00aa=['storePath','1008350xIUiwl','next','call','configServ','7938430SdskBM','function','524335zIUuQx','9NsCVgc','22FPkQGd','utf-8','insert','find','length','__asyncVal','resolve','isFile','estamp','MessageRep','messages','value','messageTim','.json','ository','limit','12378732YWGsRf','log','asyncItera','key','1840mUdseX','insertCoun','throw','Symbol.asy','then','splice','key.','messageMod','error','iterator','parse','done','ice','insertMany','__awaiter','ENABLED','ues','tor','30tsbPhf','encoding','owner','64591iJjbQE','104QSBIyT','join','apply','readFileSy','../abstrac','opendirSyn','4467vRGIQx','writeStore','push','Repository','4222842ugAJUS','dbSettings','where','forEach','MessageQue','ERROR:\x20','\x20is\x20not\x20de'];a40_0x2825=function(){return _0xa00aa;};return a40_0x2825();}(function(_0x3a6bb5,_0xd536d9){const _0x101f00=a40_0x3e91,_0x7c40f7=_0x3a6bb5();while(!![]){try{const _0x4dc5ec=-parseInt(_0x101f00(0x17a))/(-0x12ad*-0x1+0xc7c+0x3e5*-0x8)*(parseInt(_0x101f00(0x177))/(0x21aa+-0x1269*0x2+0x1b*0x1e))+parseInt(_0x101f00(0x181))/(-0xc65+-0x5*-0x571+0x3*-0x4ef)*(parseInt(_0x101f00(0x1a9))/(0x202a*0x1+0x3a*0x56+-0x33a2))+-parseInt(_0x101f00(0x18d))/(-0x23e9+-0x2572+0x2*0x24b0)+parseInt(_0x101f00(0x185))/(-0xad8*0x2+0xc88+-0x2*-0x497)+parseInt(_0x101f00(0x193))/(0x1043+-0x110b+0x45*0x3)*(-parseInt(_0x101f00(0x17b))/(-0xfe2+-0x90*0x44+0x362a))+parseInt(_0x101f00(0x194))/(0x214+0x20a2+0xb*-0x327)*(-parseInt(_0x101f00(0x191))/(-0x1cea+0x1be*-0x1+0x2*0xf59))+parseInt(_0x101f00(0x195))/(0x5*0x50d+0x768*-0x2+0xa66*-0x1)*(parseInt(_0x101f00(0x1a5))/(-0x25eb+-0x1707+0x3cfe));if(_0x4dc5ec===_0xd536d9)break;else _0x7c40f7['push'](_0x7c40f7['shift']());}catch(_0x464f81){_0x7c40f7['push'](_0x7c40f7['shift']());}}}(a40_0x2825,0xa*0x72e4+-0xdc79b*-0x1+-0xa6dc5));var __awaiter=this&&this[a40_0x32d60e(0x173)]||function(_0x191199,_0x32524d,_0x124f66,_0x48a600){function _0x28bfdb(_0x1650ad){return _0x1650ad instanceof _0x124f66?_0x1650ad:new _0x124f66(function(_0xe66b9b){_0xe66b9b(_0x1650ad);});}return new(_0x124f66||(_0x124f66=Promise))(function(_0x58bb0d,_0x58ca5f){const _0x31b8d9=a40_0x3e91;function _0x26222c(_0x2e10bd){const _0x3aa564=a40_0x3e91;try{_0x38ed55(_0x48a600[_0x3aa564(0x18e)](_0x2e10bd));}catch(_0x144850){_0x58ca5f(_0x144850);}}function _0x5edecf(_0x393995){const _0x360ab9=a40_0x3e91;try{_0x38ed55(_0x48a600[_0x360ab9(0x167)](_0x393995));}catch(_0x4d6759){_0x58ca5f(_0x4d6759);}}function _0x38ed55(_0xad1b02){const _0x4c03a9=a40_0x3e91;_0xad1b02[_0x4c03a9(0x170)]?_0x58bb0d(_0xad1b02[_0x4c03a9(0x1a0)]):_0x28bfdb(_0xad1b02['value'])[_0x4c03a9(0x169)](_0x26222c,_0x5edecf);}_0x38ed55((_0x48a600=_0x48a600[_0x31b8d9(0x17d)](_0x191199,_0x32524d||[]))[_0x31b8d9(0x18e)]());});},__asyncValues=this&&this[a40_0x32d60e(0x19a)+a40_0x32d60e(0x175)]||function(_0x20a006){const _0x97bc18=a40_0x32d60e;if(!Symbol['asyncItera'+'tor'])throw new TypeError(_0x97bc18(0x168)+'ncIterator'+_0x97bc18(0x18b)+'fined.');var _0x21e7ab=_0x20a006[Symbol[_0x97bc18(0x1a7)+_0x97bc18(0x176)]],_0x203705;return _0x21e7ab?_0x21e7ab[_0x97bc18(0x18f)](_0x20a006):(_0x20a006=typeof __values===_0x97bc18(0x192)?__values(_0x20a006):_0x20a006[Symbol[_0x97bc18(0x16e)]](),_0x203705={},_0x26af8f('next'),_0x26af8f(_0x97bc18(0x167)),_0x26af8f('return'),_0x203705[Symbol[_0x97bc18(0x1a7)+_0x97bc18(0x176)]]=function(){return this;},_0x203705);function _0x26af8f(_0x407d10){_0x203705[_0x407d10]=_0x20a006[_0x407d10]&&function(_0x428b21){return new Promise(function(_0x86522d,_0x58ca9d){const _0x41cf28=a40_0x3e91;_0x428b21=_0x20a006[_0x407d10](_0x428b21),_0x241120(_0x86522d,_0x58ca9d,_0x428b21[_0x41cf28(0x170)],_0x428b21[_0x41cf28(0x1a0)]);});};}function _0x241120(_0x313396,_0xe1f941,_0x49ce7c,_0x2bb3a6){const _0x163590=_0x97bc18;Promise[_0x163590(0x19b)](_0x2bb3a6)[_0x163590(0x169)](function(_0x2ec3a0){const _0x6f8151=_0x163590,_0x2f7257={};_0x2f7257[_0x6f8151(0x1a0)]=_0x2ec3a0,_0x2f7257[_0x6f8151(0x170)]=_0x49ce7c,_0x313396(_0x2f7257);},_0xe1f941);}};const a40_0x21a269={};a40_0x21a269[a40_0x32d60e(0x1a0)]=!![],Object['defineProp'+'erty'](exports,'__esModule',a40_0x21a269),exports['MessageRep'+a40_0x32d60e(0x1a3)]=exports[a40_0x32d60e(0x189)+'ry']=void(-0x55b+-0x2*-0xbe9+-0x1*0x1277);const path_1=require('path'),abstract_repository_1=require(a40_0x32d60e(0x17f)+'t/abstract'+'.repositor'+'y'),fs_1=require('fs');class MessageQuery{}exports[a40_0x32d60e(0x189)+'ry']=MessageQuery;class MessageRepository extends abstract_repository_1[a40_0x32d60e(0x184)]{constructor(_0x374114,_0x13c5ab){const _0x3df04f=a40_0x32d60e;super(_0x13c5ab),this[_0x3df04f(0x16c)+'el']=_0x374114,this[_0x3df04f(0x190)+_0x3df04f(0x171)]=_0x13c5ab;}[a40_0x32d60e(0x197)](_0x2d2ba3,_0x354247=![]){return __awaiter(this,void(-0x17a0+0xc1e+0x3d6*0x3),void(0x231d+0x1*-0x66f+-0x2*0xe57),function*(){const _0x189426=a40_0x3e91;if(_0x2d2ba3[_0x189426(0x199)]===0x13*-0x125+0x18e9+-0x12*0x2d)return;try{if(this[_0x189426(0x186)][_0x189426(0x174)]&&_0x354247){const _0x3aa7e1=yield this['messageMod'+'el'][_0x189426(0x172)]([..._0x2d2ba3]),_0x405ed8={};return _0x405ed8[_0x189426(0x166)+'t']=_0x3aa7e1[_0x189426(0x199)],_0x405ed8;}if(_0x354247){_0x2d2ba3[_0x189426(0x188)](_0x14bbde=>this[_0x189426(0x182)]({'path':(0x97a+0x1*-0x11e7+0x1*0x86d,path_1[_0x189426(0x17c)])(this[_0x189426(0x18c)],_0x189426(0x19f),_0x14bbde[_0x189426(0x179)]),'fileName':_0x14bbde[_0x189426(0x1a8)]['id'],'data':_0x14bbde}));const _0x2cdfab={};return _0x2cdfab[_0x189426(0x166)+'t']=_0x2d2ba3['length'],_0x2cdfab;}const _0x90c44={};return _0x90c44['insertCoun'+'t']=0x0,_0x90c44;}catch(_0x413b63){return console[_0x189426(0x1a6)](_0x189426(0x18a),_0x413b63),_0x413b63;}finally{_0x2d2ba3=undefined;}});}[a40_0x32d60e(0x198)](_0x6eff73){var _0x3d71ac,_0x5ec524,_0x26bc90,_0x296e9c,_0xbe1bbe,_0x3eeb9d,_0x2e5cd0,_0xa4168a,_0x2f3dca,_0x4a64b9;return __awaiter(this,void(0x1*-0x8f3+0x10d0*0x1+-0x7dd),void(-0x1*-0x2429+-0x1cf*0x15+0x1d2),function*(){const _0x424894=a40_0x3e91;try{if(this[_0x424894(0x186)][_0x424894(0x174)]){if((_0xbe1bbe=_0x6eff73===null||_0x6eff73===void(-0xc9*-0xf+-0xb5f*0x2+-0xaf7*-0x1)?void(-0x1688+-0x319*-0x3+-0x1*-0xd3d):_0x6eff73[_0x424894(0x187)])===null||_0xbe1bbe===void(0x7e5*-0x1+0x10f7+0x1b*-0x56)?void(-0xc6*0x13+0x352*-0x3+0x18a8):_0xbe1bbe[_0x424894(0x1a8)]){for(const [_0x1a3d3a,_0x3ccbc4]of Object['entries'](_0x6eff73[_0x424894(0x187)][_0x424894(0x1a8)])){_0x6eff73[_0x424894(0x187)][_0x424894(0x16b)+_0x1a3d3a]=_0x3ccbc4;}(_0x3eeb9d=_0x6eff73===null||_0x6eff73===void(0x221a+-0x1*-0x1a8c+-0x3ca6)?void(-0x8fa+0x2160+-0x1866):_0x6eff73[_0x424894(0x187)])===null||_0x3eeb9d===void(-0x3*-0x1cd+0x2dc+-0x843)?!![]:delete _0x3eeb9d[_0x424894(0x1a8)];}const _0x13e5ad={};return _0x13e5ad[_0x424894(0x1a1)+'estamp']=-(0x11f1+-0x200b+0x1*0xe1b),yield this['messageMod'+'el'][_0x424894(0x198)](Object['assign']({},_0x6eff73['where']))['sort'](_0x13e5ad)[_0x424894(0x1a4)]((_0x2e5cd0=_0x6eff73===null||_0x6eff73===void(-0x1dc7+0x9fd*-0x2+0x2f*0x10f)?void(0xec0+-0xfa7+-0x7*-0x21):_0x6eff73[_0x424894(0x1a4)])!==null&&_0x2e5cd0!==void(-0x784+0x13a2+-0xc1e)?_0x2e5cd0:-0x1a19+-0x1937+0x3350);}const _0x43a08e=[];if((_0x2f3dca=(_0xa4168a=_0x6eff73===null||_0x6eff73===void(0x31d*0x3+0x6cd+-0x1*0x1024)?void(0x1*0x181d+0x2664+-0x3e81):_0x6eff73[_0x424894(0x187)])===null||_0xa4168a===void(-0x1ce2+-0x6a1+0x2383)?void(-0x3*0x4cf+0x1ddd+0x2*-0x7b8):_0xa4168a[_0x424894(0x1a8)])===null||_0x2f3dca===void(0xce5+0xd5b+0x150*-0x14)?void(-0x1*0x1446+-0x12fd+-0x13*-0x211):_0x2f3dca['id']){const _0x17049e={};_0x17049e[_0x424894(0x178)]='utf-8',_0x43a08e['push'](JSON[_0x424894(0x16f)]((0x1*0x1a2e+-0x44e+0x10*-0x15e,fs_1[_0x424894(0x17e)+'nc'])((0x7e3*-0x2+0x1d8b+-0x4b*0x2f,path_1[_0x424894(0x17c)])(this[_0x424894(0x18c)],'messages',_0x6eff73[_0x424894(0x187)]['owner'],_0x6eff73[_0x424894(0x187)][_0x424894(0x1a8)]['id']+_0x424894(0x1a2)),_0x17049e)));}else{const _0x8ca41f={};_0x8ca41f[_0x424894(0x178)]=_0x424894(0x196);const _0x307c46=(0x1*-0x157f+0xf9b*-0x2+0x67*0x83,fs_1[_0x424894(0x180)+'c'])((0xd36+-0x27a+-0xabc,path_1['join'])(this['storePath'],'messages',_0x6eff73[_0x424894(0x187)][_0x424894(0x179)]),_0x8ca41f);try{for(var _0x18c7da=!![],_0x8edc22=__asyncValues(_0x307c46),_0x3fbdbf;_0x3fbdbf=yield _0x8edc22[_0x424894(0x18e)](),_0x3d71ac=_0x3fbdbf['done'],!_0x3d71ac;){_0x296e9c=_0x3fbdbf[_0x424894(0x1a0)],_0x18c7da=![];try{const _0x11d1f9=_0x296e9c;if(_0x11d1f9[_0x424894(0x19c)]()){const _0x3a4961={};_0x3a4961[_0x424894(0x178)]=_0x424894(0x196),_0x43a08e[_0x424894(0x183)](JSON[_0x424894(0x16f)]((0x31*-0x6+-0x1*0xb6a+0x2*0x648,fs_1[_0x424894(0x17e)+'nc'])((0x5fc*-0x4+-0xa6c*0x1+0x225c,path_1[_0x424894(0x17c)])(this[_0x424894(0x18c)],_0x424894(0x19f),_0x6eff73[_0x424894(0x187)][_0x424894(0x179)],_0x11d1f9['name']),_0x3a4961)));}}finally{_0x18c7da=!![];}}}catch(_0x658e51){const _0x469816={};_0x469816[_0x424894(0x16d)]=_0x658e51,_0x5ec524=_0x469816;}finally{try{if(!_0x18c7da&&!_0x3d71ac&&(_0x26bc90=_0x8edc22['return']))yield _0x26bc90[_0x424894(0x18f)](_0x8edc22);}finally{if(_0x5ec524)throw _0x5ec524[_0x424894(0x16d)];}}}return _0x43a08e['sort']((_0x229463,_0x205ee4)=>{const _0x2ec0e1=_0x424894;return _0x205ee4[_0x2ec0e1(0x1a1)+_0x2ec0e1(0x19d)]-_0x229463['messageTim'+_0x2ec0e1(0x19d)];})[_0x424894(0x16a)](-0x4*-0x821+-0x1*0xb6b+-0x1519,(_0x4a64b9=_0x6eff73===null||_0x6eff73===void(-0xd3*-0x13+0x1*-0x74+-0xf35)?void(0x36c+0x2412+0x5*-0x7e6):_0x6eff73[_0x424894(0x1a4)])!==null&&_0x4a64b9!==void(-0x1c2b+0x25e5*0x1+-0xa*0xf9)?_0x4a64b9:_0x43a08e[_0x424894(0x199)]);}catch(_0x4f039e){return[];}});}}exports[a40_0x32d60e(0x19e)+'ository']=MessageRepository;