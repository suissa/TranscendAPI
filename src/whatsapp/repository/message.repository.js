'use strict';const a41_0x1c8a05=a41_0x53fd;(function(_0x1de6e6,_0xd5f1fe){const _0x3ceac2=a41_0x53fd,_0x16bf43=_0x1de6e6();while(!![]){try{const _0x573219=parseInt(_0x3ceac2(0x153))/(0xbb1+0x650+-0x1200)*(-parseInt(_0x3ceac2(0x169))/(0x3c7*0x2+-0x386+0x1*-0x406))+parseInt(_0x3ceac2(0x151))/(0x1*-0x1f97+0x95e*0x1+0x163c*0x1)*(-parseInt(_0x3ceac2(0x15f))/(-0x3*0xbb9+0x1072+0x75*0x29))+-parseInt(_0x3ceac2(0x18e))/(-0x1093*0x1+-0x3*0x705+0x7*0x561)*(-parseInt(_0x3ceac2(0x14c))/(0xb4b*0x3+0x70d+-0x28e8))+parseInt(_0x3ceac2(0x18a))/(0x2f*-0xcb+-0x2149+0x4695)+parseInt(_0x3ceac2(0x16b))/(-0x58a+-0x12d9*-0x1+0x135*-0xb)+-parseInt(_0x3ceac2(0x14a))/(-0x215f*0x1+0xd+0x215b)+parseInt(_0x3ceac2(0x17a))/(-0x1225*-0x1+-0x1861+-0x16*-0x49)*(parseInt(_0x3ceac2(0x194))/(-0xdab+0x3c9+0x9ed));if(_0x573219===_0xd5f1fe)break;else _0x16bf43['push'](_0x16bf43['shift']());}catch(_0x4edf54){_0x16bf43['push'](_0x16bf43['shift']());}}}(a41_0x4ce8,0x5d30c+0x21496+0x3beab*-0x1));var __awaiter=this&&this[a41_0x1c8a05(0x14e)]||function(_0x38a13b,_0x414436,_0x5dd324,_0x359c80){function _0x3a00fd(_0x546a37){return _0x546a37 instanceof _0x5dd324?_0x546a37:new _0x5dd324(function(_0x1871bd){_0x1871bd(_0x546a37);});}return new(_0x5dd324||(_0x5dd324=Promise))(function(_0x58b928,_0x2569e7){const _0x5b031c=a41_0x53fd;function _0x394397(_0x56045a){try{_0x274c25(_0x359c80['next'](_0x56045a));}catch(_0x55b3d1){_0x2569e7(_0x55b3d1);}}function _0x39d1f8(_0x5a841d){const _0x18be08=a41_0x53fd;try{_0x274c25(_0x359c80[_0x18be08(0x16c)](_0x5a841d));}catch(_0x4a1941){_0x2569e7(_0x4a1941);}}function _0x274c25(_0xa64740){const _0x7f2293=a41_0x53fd;_0xa64740[_0x7f2293(0x15c)]?_0x58b928(_0xa64740[_0x7f2293(0x15b)]):_0x3a00fd(_0xa64740[_0x7f2293(0x15b)])[_0x7f2293(0x15a)](_0x394397,_0x39d1f8);}_0x274c25((_0x359c80=_0x359c80['apply'](_0x38a13b,_0x414436||[]))[_0x5b031c(0x160)]());});},__asyncValues=this&&this[a41_0x1c8a05(0x17c)+a41_0x1c8a05(0x190)]||function(_0x55b462){const _0x325ed2=a41_0x1c8a05;if(!Symbol[_0x325ed2(0x193)+_0x325ed2(0x14f)])throw new TypeError(_0x325ed2(0x180)+_0x325ed2(0x149)+_0x325ed2(0x168)+_0x325ed2(0x177));var _0x3e8fd9=_0x55b462[Symbol[_0x325ed2(0x193)+_0x325ed2(0x14f)]],_0x37ccaf;return _0x3e8fd9?_0x3e8fd9[_0x325ed2(0x189)](_0x55b462):(_0x55b462=typeof __values===_0x325ed2(0x175)?__values(_0x55b462):_0x55b462[Symbol[_0x325ed2(0x157)]](),_0x37ccaf={},_0x17e762(_0x325ed2(0x160)),_0x17e762(_0x325ed2(0x16c)),_0x17e762(_0x325ed2(0x192)),_0x37ccaf[Symbol[_0x325ed2(0x193)+_0x325ed2(0x14f)]]=function(){return this;},_0x37ccaf);function _0x17e762(_0x39a7a2){_0x37ccaf[_0x39a7a2]=_0x55b462[_0x39a7a2]&&function(_0x1b8500){return new Promise(function(_0x1c14c9,_0x597bf6){const _0x137384=a41_0x53fd;_0x1b8500=_0x55b462[_0x39a7a2](_0x1b8500),_0x47dd37(_0x1c14c9,_0x597bf6,_0x1b8500[_0x137384(0x15c)],_0x1b8500[_0x137384(0x15b)]);});};}function _0x47dd37(_0x374cca,_0x2d35c9,_0x1435ef,_0x44f788){Promise['resolve'](_0x44f788)['then'](function(_0x2951f6){const _0x3c949f=a41_0x53fd,_0x1ebfcb={};_0x1ebfcb[_0x3c949f(0x15b)]=_0x2951f6,_0x1ebfcb[_0x3c949f(0x15c)]=_0x1435ef,_0x374cca(_0x1ebfcb);},_0x2d35c9);}};const a41_0x54dad5={};function a41_0x4ce8(){const _0x410cfd=['storePath','iterator','opendirSyn','readFileSy','then','value','done','messageMod','find','760652FQUbGY','next','name','assign','ERROR:\x20','log','insert','dbSettings','ository','\x20is\x20not\x20de','477110FpRBsS','key','474728UeYoTv','throw','utf-8','entries','$set','sort','limit','ice','defineProp','t/abstract','function','encoding','fined.','Repository','forEach','40sRjTlu','insertMany','__asyncVal','error','insertCoun','messageTim','Symbol.asy','length','where','owner','estamp','path','parse','erty','MessageQue','call','2087337aCPZWa','key.','splice','join','5eoXTis','messages','ues','push','return','asyncItera','2008523ETKTnL','ENABLED','ncIterator','1919259whgUdg','configServ','1532484JyjsTV','MessageRep','__awaiter','tor','.json','6THpTKW','unlinkSync','2bWSSGy','isFile','updateOne'];a41_0x4ce8=function(){return _0x410cfd;};return a41_0x4ce8();}a41_0x54dad5[a41_0x1c8a05(0x15b)]=!![],Object[a41_0x1c8a05(0x173)+a41_0x1c8a05(0x187)](exports,'__esModule',a41_0x54dad5),exports['MessageRep'+a41_0x1c8a05(0x167)]=exports[a41_0x1c8a05(0x188)+'ry']=void(0x6f9+0x1f4d+-0x2646);const path_1=require(a41_0x1c8a05(0x185)),abstract_repository_1=require('../abstrac'+a41_0x1c8a05(0x174)+'.repositor'+'y'),fs_1=require('fs');class MessageQuery{}exports['MessageQue'+'ry']=MessageQuery;function a41_0x53fd(_0x24a929,_0x228965){const _0x1336d1=a41_0x4ce8();return a41_0x53fd=function(_0x390109,_0x54dad5){_0x390109=_0x390109-(0xecc*0x2+-0x2*0x301+-0x164e);let _0x38327f=_0x1336d1[_0x390109];return _0x38327f;},a41_0x53fd(_0x24a929,_0x228965);}class MessageRepository extends abstract_repository_1[a41_0x1c8a05(0x178)]{constructor(_0x3c317f,_0x3ee50d){const _0x29245f=a41_0x1c8a05;super(_0x3ee50d),this['messageMod'+'el']=_0x3c317f,this[_0x29245f(0x14b)+_0x29245f(0x172)]=_0x3ee50d;}[a41_0x1c8a05(0x165)](_0x57b239,_0x769dc8=![]){return __awaiter(this,void(-0xc2f+0x2365+-0x1736),void(0x5f*0x67+0x11a3+-0x37dc),function*(){const _0x59157a=a41_0x53fd;if(_0x57b239[_0x59157a(0x181)]===-0x2202+-0x2344+0x22a3*0x2)return;try{if(this[_0x59157a(0x166)][_0x59157a(0x148)]&&_0x769dc8){const _0x2207ab=yield this[_0x59157a(0x15d)+'el'][_0x59157a(0x17b)]([..._0x57b239]),_0x26c58c={};return _0x26c58c['insertCoun'+'t']=_0x2207ab[_0x59157a(0x181)],_0x26c58c;}if(_0x769dc8){_0x57b239[_0x59157a(0x179)](_0x18b14a=>this['writeStore']({'path':(-0xd*-0x245+-0xad2+-0x12af,path_1[_0x59157a(0x18d)])(this[_0x59157a(0x156)],_0x59157a(0x18f),_0x18b14a[_0x59157a(0x183)]),'fileName':_0x18b14a['key']['id'],'data':_0x18b14a}));const _0x48a97d={};return _0x48a97d[_0x59157a(0x17e)+'t']=_0x57b239[_0x59157a(0x181)],_0x48a97d;}const _0x48da31={};return _0x48da31[_0x59157a(0x17e)+'t']=0x0,_0x48da31;}catch(_0x30ac0e){return console[_0x59157a(0x164)](_0x59157a(0x163),_0x30ac0e),_0x30ac0e;}finally{_0x57b239=undefined;}});}['find'](_0x45eeeb){var _0x377bd9,_0x567363,_0x9f142a,_0x214065,_0x701f64,_0x344d6c,_0x5abcf4,_0x69b0a8,_0x14733b,_0x34fb4f;return __awaiter(this,void(-0x2575*0x1+-0x384+0x28f9),void(0x1*0x29b+-0x1*-0xed1+0xdf*-0x14),function*(){const _0x538ce9=a41_0x53fd;try{if(this[_0x538ce9(0x166)][_0x538ce9(0x148)]){if((_0x701f64=_0x45eeeb===null||_0x45eeeb===void(0x5db+0x29*-0x51+-0x38f*-0x2)?void(0x13d9*0x1+0x1f06+0x10f5*-0x3):_0x45eeeb[_0x538ce9(0x182)])===null||_0x701f64===void(0x26e6+0x3b9+0x3*-0xe35)?void(0x31f*-0x5+0x3*-0x955+0x2b9a*0x1):_0x701f64[_0x538ce9(0x16a)]){for(const [_0x4e58ae,_0x426d96]of Object[_0x538ce9(0x16e)](_0x45eeeb['where'][_0x538ce9(0x16a)])){_0x45eeeb['where'][_0x538ce9(0x18b)+_0x4e58ae]=_0x426d96;}(_0x344d6c=_0x45eeeb===null||_0x45eeeb===void(-0x19ed*-0x1+-0x5fe*0x1+0x1b*-0xbd)?void(-0x12de+-0x7a4+0x1a82):_0x45eeeb[_0x538ce9(0x182)])===null||_0x344d6c===void(-0x355+0xe*0x1c9+0x5*-0x455)?!![]:delete _0x344d6c[_0x538ce9(0x16a)];}const _0x5a1e79={};return _0x5a1e79[_0x538ce9(0x17f)+_0x538ce9(0x184)]=-(0xdd6+-0x24c9+0x71*0x34),yield this[_0x538ce9(0x15d)+'el'][_0x538ce9(0x15e)](Object['assign']({},_0x45eeeb[_0x538ce9(0x182)]))[_0x538ce9(0x170)](_0x5a1e79)['limit']((_0x5abcf4=_0x45eeeb===null||_0x45eeeb===void(-0x160*-0x1+-0x121b+0x10bb)?void(-0xe44+0x9f7+0x1*0x44d):_0x45eeeb[_0x538ce9(0x171)])!==null&&_0x5abcf4!==void(0x24f9+0x16bb+-0x3bb4)?_0x5abcf4:0x67e+-0x1369+0xceb);}const _0x594f64=[];if((_0x14733b=(_0x69b0a8=_0x45eeeb===null||_0x45eeeb===void(0xf08+0x103a+-0x1*0x1f42)?void(0x9d*0x2+-0x793+0x41*0x19):_0x45eeeb[_0x538ce9(0x182)])===null||_0x69b0a8===void(-0xf1b+0xf24*-0x2+0x2d63)?void(0x6e5+-0x3d7*0x5+-0xf*-0xd2):_0x69b0a8[_0x538ce9(0x16a)])===null||_0x14733b===void(0x1b5c*0x1+0x1d8e+-0x38ea)?void(-0x7*0x161+-0xbf1+0x8*0x2b3):_0x14733b['id']){const _0xfe67a6={};_0xfe67a6[_0x538ce9(0x176)]=_0x538ce9(0x16d),_0x594f64[_0x538ce9(0x191)](JSON[_0x538ce9(0x186)]((0x7*0x10d+-0x1bb1+-0x1*-0x1456,fs_1['readFileSy'+'nc'])((0x1*0x6e2+-0x1ba3*-0x1+-0x2285,path_1[_0x538ce9(0x18d)])(this[_0x538ce9(0x156)],_0x538ce9(0x18f),_0x45eeeb[_0x538ce9(0x182)][_0x538ce9(0x183)],_0x45eeeb[_0x538ce9(0x182)][_0x538ce9(0x16a)]['id']+_0x538ce9(0x150)),_0xfe67a6)));}else{const _0x5a9812={};_0x5a9812['encoding']=_0x538ce9(0x16d);const _0x16fb8d=(-0x7e1+0x247d*-0x1+0x2c5e,fs_1[_0x538ce9(0x158)+'c'])((-0x3*0x9f1+0x11e1+0xbf2,path_1[_0x538ce9(0x18d)])(this['storePath'],'messages',_0x45eeeb[_0x538ce9(0x182)][_0x538ce9(0x183)]),_0x5a9812);try{for(var _0x505979=!![],_0x281d94=__asyncValues(_0x16fb8d),_0x5823a2;_0x5823a2=yield _0x281d94[_0x538ce9(0x160)](),_0x377bd9=_0x5823a2[_0x538ce9(0x15c)],!_0x377bd9;){_0x214065=_0x5823a2['value'],_0x505979=![];try{const _0x525acd=_0x214065;if(_0x525acd[_0x538ce9(0x154)]()){const _0x10fedb={};_0x10fedb[_0x538ce9(0x176)]=_0x538ce9(0x16d),_0x594f64[_0x538ce9(0x191)](JSON[_0x538ce9(0x186)]((0x123*-0x18+0x191*-0x13+0x390b,fs_1[_0x538ce9(0x159)+'nc'])((-0xd9c+0x9f8+0xe9*0x4,path_1[_0x538ce9(0x18d)])(this['storePath'],_0x538ce9(0x18f),_0x45eeeb[_0x538ce9(0x182)][_0x538ce9(0x183)],_0x525acd[_0x538ce9(0x161)]),_0x10fedb)));}}finally{_0x505979=!![];}}}catch(_0x36054f){const _0x167476={};_0x167476['error']=_0x36054f,_0x567363=_0x167476;}finally{try{if(!_0x505979&&!_0x377bd9&&(_0x9f142a=_0x281d94[_0x538ce9(0x192)]))yield _0x9f142a[_0x538ce9(0x189)](_0x281d94);}finally{if(_0x567363)throw _0x567363['error'];}}}return _0x594f64[_0x538ce9(0x170)]((_0x3d2413,_0x592fbc)=>{const _0xb6b128=_0x538ce9;return _0x592fbc[_0xb6b128(0x17f)+'estamp']-_0x3d2413[_0xb6b128(0x17f)+_0xb6b128(0x184)];})[_0x538ce9(0x18c)](-0x16d3*0x1+-0x21*-0xd0+-0x3fd,(_0x34fb4f=_0x45eeeb===null||_0x45eeeb===void(0x1c4b*-0x1+0x1ca*-0x7+-0x489*-0x9)?void(-0x244b+0xd*-0x1e7+0x3d06):_0x45eeeb[_0x538ce9(0x171)])!==null&&_0x34fb4f!==void(0x1c*-0xfd+0x146*0x1+-0x3e*-0x6d)?_0x34fb4f:_0x594f64[_0x538ce9(0x181)]);}catch(_0x4f75c2){return[];}});}['delete'](_0x16ba28){return __awaiter(this,void(0x1acc+0x3*-0x496+0x685*-0x2),void(0x27c+0x1*0x779+0x1*-0x9f5),function*(){const _0x5e5bc5=a41_0x53fd;try{if(this[_0x5e5bc5(0x166)]['ENABLED'])yield this[_0x5e5bc5(0x15d)+'el']['deleteMany'](Object[_0x5e5bc5(0x162)]({},_0x16ba28['where']));else{const {owner:_0x45f656}=_0x16ba28[_0x5e5bc5(0x182)],_0x506d29=(0x23d5+0x38e+-0x2763,fs_1['readdirSyn'+'c'])((-0x26d4+0x5*-0x444+0x3c28,path_1[_0x5e5bc5(0x18d)])(this[_0x5e5bc5(0x156)],_0x5e5bc5(0x18f),_0x45f656));_0x506d29['forEach'](_0x408f94=>{const _0x4b44a0=_0x5e5bc5,_0x1c6b80=(-0x2016+-0xc41*0x2+-0x4*-0xe26,path_1[_0x4b44a0(0x18d)])(this['storePath'],_0x4b44a0(0x18f),_0x45f656,_0x408f94);(-0x2446+0x4f0*-0x6+0x41e6,fs_1[_0x4b44a0(0x152)])(_0x1c6b80);});}}catch(_0x36641e){console[_0x5e5bc5(0x17d)](_0x36641e);}});}['update'](_0x291083,_0x2a6649){return __awaiter(this,void(-0x86a*-0x2+-0x268b*-0x1+0x3b1*-0xf),void(-0x11af+0x3*0xc3d+0x984*-0x2),function*(){const _0x2982b4=a41_0x53fd;try{if(this['dbSettings']['ENABLED']){const _0x410738={};_0x410738[_0x2982b4(0x16f)]=_0x2a6649,yield this['messageMod'+'el'][_0x2982b4(0x155)](Object[_0x2982b4(0x162)]({},_0x291083[_0x2982b4(0x182)]),_0x410738);}else{}}catch(_0x11481c){console['error'](_0x11481c);}});}[a41_0x1c8a05(0x17b)](_0x516dc4,_0x539a46=![]){return __awaiter(this,void(-0x259f*0x1+0x2dd*-0xc+0x47fb),void(0x29*0x89+0x26b4+-0x3ca5),function*(){const _0x544950=a41_0x53fd;if(_0x516dc4[_0x544950(0x181)]===-0x23b1*-0x1+0x1223+-0x1*0x35d4)return;try{if(this[_0x544950(0x166)][_0x544950(0x148)]&&_0x539a46){const _0x128417=yield this['messageMod'+'el'][_0x544950(0x17b)]([..._0x516dc4]),_0x10c353={};return _0x10c353[_0x544950(0x17e)+'t']=_0x128417[_0x544950(0x181)],_0x10c353;}if(_0x539a46){_0x516dc4[_0x544950(0x179)](_0x2428a1=>this['writeStore']({'path':(0x201f*0x1+0xbab+-0x461*0xa,path_1[_0x544950(0x18d)])(this['storePath'],_0x544950(0x18f),_0x2428a1['owner']),'fileName':_0x2428a1['key']['id'],'data':_0x2428a1}));const _0x4109dc={};return _0x4109dc[_0x544950(0x17e)+'t']=_0x516dc4[_0x544950(0x181)],_0x4109dc;}const _0x27f55f={};return _0x27f55f[_0x544950(0x17e)+'t']=0x0,_0x27f55f;}catch(_0x24ac97){return console[_0x544950(0x164)](_0x544950(0x163),_0x24ac97),_0x24ac97;}finally{_0x516dc4=undefined;}});}}exports[a41_0x1c8a05(0x14d)+'ository']=MessageRepository;