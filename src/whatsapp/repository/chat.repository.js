'use strict';function a38_0x5660(){const _0x1bc071=['length','parse','tor','defineProp','toString','418tudrpX','ncIterator','where','Symbol.asy','forEach','chatId','isFile','push','8elHQwC','recursive','apply','throw','8507wHQenN','ENABLED','t/abstract','8963400ZxgqQe','912348RpjWgv','asyncItera','find','resolve','storePath','.repositor','ice','assign','__esModule','ChatReposi','return','chats','insertMany','insertCoun','force','writeStore','delete','value','readFileSy','then','next','../abstrac','dbSettings','__asyncVal','name','chatModel','5410410FtzolU','done','tory','627991jmAyIC','owner','configServ','call','__awaiter','7sgTSeB','5709976aQELLl','ChatQuery','opendirSyn','6883210eLPCIs','252vJREGA','Repository','ues','insert','join','11IpKatG','3Pihpsv','.josn'];a38_0x5660=function(){return _0x1bc071;};return a38_0x5660();}const a38_0x454775=a38_0xa628;(function(_0x5e7e9b,_0xbaa4ec){const _0xe33514=a38_0xa628,_0x10a10d=_0x5e7e9b();while(!![]){try{const _0x5afb86=parseInt(_0xe33514(0x160))/(-0xc59+-0x113e+0x1d98)*(-parseInt(_0xe33514(0x154))/(-0x2c8+-0x1fb0+0x227a))+parseInt(_0xe33514(0x14d))/(0xc6*0x2b+-0x66b+-0x1ad4)*(parseInt(_0xe33514(0x143))/(-0xbe+-0x4*0x602+0x18ca))+parseInt(_0xe33514(0x163))/(0x197a+0x23cb+-0x3d40)+-parseInt(_0xe33514(0x13a))/(-0xe30+-0x104a+0x1e80)*(parseInt(_0xe33514(0x142))/(-0x23*-0x111+-0x796+-0x1db6))+parseInt(_0xe33514(0x15c))/(-0x1*-0x11de+-0x7*0x571+0x1441)*(parseInt(_0xe33514(0x164))/(0x16a0+-0x4*0x4a9+-0x3*0x151))+-parseInt(_0xe33514(0x146))/(0x7a7+0x1e*0xf1+-0x43*0x89)*(parseInt(_0xe33514(0x14c))/(0x38d+0x15f1+-0x1973))+-parseInt(_0xe33514(0x147))/(0x87*-0x1b+0x25*-0xbd+0x299a)*(-parseInt(_0xe33514(0x13d))/(0x30*0x20+0x1708+-0x1cfb));if(_0x5afb86===_0xbaa4ec)break;else _0x10a10d['push'](_0x10a10d['shift']());}catch(_0x226915){_0x10a10d['push'](_0x10a10d['shift']());}}}(a38_0x5660,-0x58252+-0x13*-0x180a3+0x45*-0x1ead));var __awaiter=this&&this[a38_0x454775(0x141)]||function(_0x5a5b6e,_0x1f0544,_0x4b6e01,_0x42a9b1){function _0x4333d9(_0x3a8499){return _0x3a8499 instanceof _0x4b6e01?_0x3a8499:new _0x4b6e01(function(_0x71c23d){_0x71c23d(_0x3a8499);});}return new(_0x4b6e01||(_0x4b6e01=Promise))(function(_0x19b530,_0x1cbe7f){const _0x2c4df6=a38_0xa628;function _0x2d9195(_0x189e5c){try{_0x33e039(_0x42a9b1['next'](_0x189e5c));}catch(_0x590fcc){_0x1cbe7f(_0x590fcc);}}function _0x4060d6(_0x3492f9){try{_0x33e039(_0x42a9b1['throw'](_0x3492f9));}catch(_0x438e6e){_0x1cbe7f(_0x438e6e);}}function _0x33e039(_0xa22a6f){const _0xddfbcb=a38_0xa628;_0xa22a6f['done']?_0x19b530(_0xa22a6f['value']):_0x4333d9(_0xa22a6f[_0xddfbcb(0x131)])[_0xddfbcb(0x133)](_0x2d9195,_0x4060d6);}_0x33e039((_0x42a9b1=_0x42a9b1[_0x2c4df6(0x15e)](_0x5a5b6e,_0x1f0544||[]))[_0x2c4df6(0x134)]());});},__asyncValues=this&&this[a38_0x454775(0x137)+a38_0x454775(0x149)]||function(_0x317071){const _0x1090bd=a38_0x454775;if(!Symbol[_0x1090bd(0x165)+_0x1090bd(0x151)])throw new TypeError(_0x1090bd(0x157)+_0x1090bd(0x155)+'\x20is\x20not\x20de'+'fined.');var _0x298f4c=_0x317071[Symbol['asyncItera'+'tor']],_0x45aef3;return _0x298f4c?_0x298f4c[_0x1090bd(0x140)](_0x317071):(_0x317071=typeof __values==='function'?__values(_0x317071):_0x317071[Symbol['iterator']](),_0x45aef3={},_0xb7675d('next'),_0xb7675d(_0x1090bd(0x15f)),_0xb7675d(_0x1090bd(0x16e)),_0x45aef3[Symbol[_0x1090bd(0x165)+_0x1090bd(0x151)]]=function(){return this;},_0x45aef3);function _0xb7675d(_0x5edd69){_0x45aef3[_0x5edd69]=_0x317071[_0x5edd69]&&function(_0xaed1a8){return new Promise(function(_0x3e400d,_0x32c9de){const _0x9064bb=a38_0xa628;_0xaed1a8=_0x317071[_0x5edd69](_0xaed1a8),_0x54b4f9(_0x3e400d,_0x32c9de,_0xaed1a8[_0x9064bb(0x13b)],_0xaed1a8[_0x9064bb(0x131)]);});};}function _0x54b4f9(_0x2727f7,_0x43dc54,_0x160bca,_0xf8bf1b){const _0x59363a=_0x1090bd;Promise[_0x59363a(0x167)](_0xf8bf1b)['then'](function(_0x51aed2){const _0x348079=_0x59363a,_0xd94c99={};_0xd94c99[_0x348079(0x131)]=_0x51aed2,_0xd94c99[_0x348079(0x13b)]=_0x160bca,_0x2727f7(_0xd94c99);},_0x43dc54);}};const a38_0x87b006={};a38_0x87b006['value']=!![],Object[a38_0x454775(0x152)+'erty'](exports,a38_0x454775(0x16c),a38_0x87b006),exports[a38_0x454775(0x16d)+a38_0x454775(0x13c)]=exports[a38_0x454775(0x144)]=void(-0x1068+0x1db*0xb+-0x401);const path_1=require('path'),abstract_repository_1=require(a38_0x454775(0x135)+a38_0x454775(0x162)+a38_0x454775(0x169)+'y'),fs_1=require('fs');class ChatQuery{}exports[a38_0x454775(0x144)]=ChatQuery;function a38_0xa628(_0x4b30d0,_0x169250){const _0x1d41d3=a38_0x5660();return a38_0xa628=function(_0x87b006,_0x1ba984){_0x87b006=_0x87b006-(-0x3f2*-0x9+-0x9*-0x347+-0x3c1*0x11);let _0x48990e=_0x1d41d3[_0x87b006];return _0x48990e;},a38_0xa628(_0x4b30d0,_0x169250);}class ChatRepository extends abstract_repository_1[a38_0x454775(0x148)]{constructor(_0xf0cf25,_0x2b2171){const _0x4cefb1=a38_0x454775;super(_0x2b2171),this[_0x4cefb1(0x139)]=_0xf0cf25,this[_0x4cefb1(0x13f)+_0x4cefb1(0x16a)]=_0x2b2171;}[a38_0x454775(0x14a)](_0x52cc6e,_0x1421c6=![]){return __awaiter(this,void(0x7*-0x13d+0x387*0xa+-0x1a9b),void(-0x11d8+-0x19c1+0x2b99),function*(){const _0x353827=a38_0xa628;if(_0x52cc6e['length']===-0x9f8*0x1+-0x230+-0x1*-0xc28)return;try{if(this['dbSettings'][_0x353827(0x161)]&&_0x1421c6){const _0x4a6257=yield this[_0x353827(0x139)][_0x353827(0x170)]([..._0x52cc6e]),_0x30eb8e={};return _0x30eb8e[_0x353827(0x171)+'t']=_0x4a6257[_0x353827(0x14f)],_0x30eb8e;}_0x52cc6e[_0x353827(0x158)](_0x3a8d27=>{const _0x5e3ace=_0x353827;this[_0x5e3ace(0x173)]({'path':(0x26fc+0x1de5+-0x44e1,path_1[_0x5e3ace(0x14b)])(this[_0x5e3ace(0x168)],'chats',_0x3a8d27[_0x5e3ace(0x13e)]),'fileName':_0x3a8d27['id'],'data':_0x3a8d27});});const _0x5b6b55={};return _0x5b6b55[_0x353827(0x171)+'t']=_0x52cc6e['length'],_0x5b6b55;}catch(_0xbca038){return _0xbca038;}finally{_0x52cc6e=undefined;}});}[a38_0x454775(0x166)](_0xcdc4f4){var _0x44aa80,_0x3c1934,_0x8cbe5e,_0x296b4a;return __awaiter(this,void(-0x1*-0x2665+0x193+0x4ff*-0x8),void(0x9b9*-0x1+-0x1*0xaa9+-0xa31*-0x2),function*(){const _0x3039d5=a38_0xa628;try{if(this[_0x3039d5(0x136)][_0x3039d5(0x161)]){const _0x2a08c2={};return _0x2a08c2[_0x3039d5(0x13e)]=_0xcdc4f4['where'][_0x3039d5(0x13e)],yield this['chatModel'][_0x3039d5(0x166)](_0x2a08c2);}const _0x17228a=[],_0x34c54e=(-0x1*0xcfb+0x24d9+-0x5e*0x41,fs_1[_0x3039d5(0x145)+'c'])((0x1*-0x1d43+0x225a+0x517*-0x1,path_1['join'])(this[_0x3039d5(0x168)],_0x3039d5(0x16f),_0xcdc4f4[_0x3039d5(0x156)][_0x3039d5(0x13e)]));try{for(var _0x1ccb22=!![],_0x2626ac=__asyncValues(_0x34c54e),_0x30297d;_0x30297d=yield _0x2626ac[_0x3039d5(0x134)](),_0x44aa80=_0x30297d[_0x3039d5(0x13b)],!_0x44aa80;){_0x296b4a=_0x30297d[_0x3039d5(0x131)],_0x1ccb22=![];try{const _0x382eed=_0x296b4a;if(_0x382eed[_0x3039d5(0x15a)]()){const _0x519912={};_0x519912['encoding']='utf-8',_0x17228a[_0x3039d5(0x15b)](JSON[_0x3039d5(0x150)]((0x6*-0x1ab+-0x2d*-0xbd+0x1737*-0x1,fs_1[_0x3039d5(0x132)+'nc'])((-0xc1*-0x19+0x158c+0x1*-0x2865,path_1['join'])(this['storePath'],_0x3039d5(0x16f),_0xcdc4f4[_0x3039d5(0x156)][_0x3039d5(0x13e)],_0x382eed[_0x3039d5(0x138)]),_0x519912)));}}finally{_0x1ccb22=!![];}}}catch(_0xd02468){const _0x58aded={};_0x58aded['error']=_0xd02468,_0x3c1934=_0x58aded;}finally{try{if(!_0x1ccb22&&!_0x44aa80&&(_0x8cbe5e=_0x2626ac[_0x3039d5(0x16e)]))yield _0x8cbe5e[_0x3039d5(0x140)](_0x2626ac);}finally{if(_0x3c1934)throw _0x3c1934['error'];}}return _0x17228a;}catch(_0x540c65){return[];}});}[a38_0x454775(0x130)](_0x27ce53){return __awaiter(this,void(-0x25*0x63+0xf37+-0xe8),void(0x30*0x33+-0x14d2+0x106*0xb),function*(){const _0x5254f=a38_0xa628;try{if(this[_0x5254f(0x136)][_0x5254f(0x161)])return yield this[_0x5254f(0x139)]['deleteOne'](Object[_0x5254f(0x16b)]({},_0x27ce53['where']));const _0x1c1e66={};_0x1c1e66[_0x5254f(0x172)]=!![],_0x1c1e66[_0x5254f(0x15d)]=!![],(-0xebf*0x1+-0x783*0x1+0x16*0x103,fs_1['rmSync'])((-0x19*-0x6+-0x17*0x36+0x15*0x34,path_1[_0x5254f(0x14b)])(this[_0x5254f(0x168)],_0x5254f(0x16f),_0x27ce53[_0x5254f(0x156)][_0x5254f(0x13e)],_0x27ce53['where']['id']+_0x5254f(0x14e)),_0x1c1e66);const _0x25d56b={};_0x25d56b[_0x5254f(0x159)]=_0x27ce53[_0x5254f(0x156)]['id'];const _0x5eba78={};return _0x5eba78['deleted']=_0x25d56b,_0x5eba78;}catch(_0x178b35){return{'error':_0x178b35===null||_0x178b35===void(0x1ee5*0x1+0x2613+-0x2*0x227c)?void(-0x1*-0xbc4+-0x5f*-0x49+-0x26db):_0x178b35[_0x5254f(0x153)]()};}});}}exports[a38_0x454775(0x16d)+a38_0x454775(0x13c)]=ChatRepository;