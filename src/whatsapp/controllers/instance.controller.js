'use strict';const a21_0x29ae53=a21_0x4159;(function(_0x138169,_0x519456){const _0x3e6aa7=a21_0x4159,_0x25afd8=_0x138169();while(!![]){try{const _0x478018=parseInt(_0x3e6aa7(0x1eb))/(0x2189+-0x4*0x5ad+-0xad4)+parseInt(_0x3e6aa7(0x212))/(-0x66e*-0x1+0x1b9*-0x1+0x1*-0x4b3)*(-parseInt(_0x3e6aa7(0x211))/(0xf1a+0xd66+-0x1c7d))+-parseInt(_0x3e6aa7(0x230))/(-0x2cc+0xe69+-0x1*0xb99)*(parseInt(_0x3e6aa7(0x22f))/(-0xe3+0x3f2+-0x1*0x30a))+parseInt(_0x3e6aa7(0x210))/(-0x9e2+-0x1025+-0x3*-0x8af)*(parseInt(_0x3e6aa7(0x209))/(-0x2*0x425+-0x93*0xf+0x10ee))+parseInt(_0x3e6aa7(0x1f7))/(0x122b+-0xffc*0x1+0x1*-0x227)*(parseInt(_0x3e6aa7(0x1e8))/(-0x1347+0x10a6*-0x1+0x23f6))+-parseInt(_0x3e6aa7(0x22b))/(-0x132a+-0x13b*-0x17+0x919*-0x1)*(parseInt(_0x3e6aa7(0x203))/(0x1237+-0x159+-0x10d3))+-parseInt(_0x3e6aa7(0x1ed))/(0xe71*-0x2+-0x9c5+0x1*0x26b3)*(-parseInt(_0x3e6aa7(0x1f6))/(-0x229e+0x2137*-0x1+0x43e2));if(_0x478018===_0x519456)break;else _0x25afd8['push'](_0x25afd8['shift']());}catch(_0x2e41ee){_0x25afd8['push'](_0x25afd8['shift']());}}}(a21_0x4f81,-0x88c0f+-0x1d*0x75d9+-0xf4045*-0x2));var __awaiter=this&&this[a21_0x29ae53(0x20c)]||function(_0x1c6e80,_0xd7ae29,_0x39d0b9,_0x507a27){function _0x128a04(_0x2103fd){return _0x2103fd instanceof _0x39d0b9?_0x2103fd:new _0x39d0b9(function(_0x55d370){_0x55d370(_0x2103fd);});}return new(_0x39d0b9||(_0x39d0b9=Promise))(function(_0x37c74e,_0x1b5aac){const _0x46b7ae=a21_0x4159;function _0x23da9f(_0xa7d2b8){const _0x4558ed=a21_0x4159;try{_0x227b49(_0x507a27[_0x4558ed(0x232)](_0xa7d2b8));}catch(_0x47448f){_0x1b5aac(_0x47448f);}}function _0x5a5249(_0x5c8062){try{_0x227b49(_0x507a27['throw'](_0x5c8062));}catch(_0x3e879f){_0x1b5aac(_0x3e879f);}}function _0x227b49(_0x53c426){const _0x563192=a21_0x4159;_0x53c426['done']?_0x37c74e(_0x53c426[_0x563192(0x20f)]):_0x128a04(_0x53c426[_0x563192(0x20f)])[_0x563192(0x216)](_0x23da9f,_0x5a5249);}_0x227b49((_0x507a27=_0x507a27[_0x46b7ae(0x220)](_0x1c6e80,_0xd7ae29||[]))[_0x46b7ae(0x232)]());});};function a21_0x4159(_0x17be9b,_0x436db0){const _0x1e74d6=a21_0x4f81();return a21_0x4159=function(_0x21c38d,_0x33a88e){_0x21c38d=_0x21c38d-(0x1a*-0x143+0x1bc7+0x2*0x377);let _0x1e8b77=_0x1e74d6[_0x21c38d];return _0x1e8b77;},a21_0x4159(_0x17be9b,_0x436db0);}const a21_0x21c38d={};a21_0x21c38d[a21_0x29ae53(0x20f)]=!![],Object[a21_0x29ae53(0x226)+a21_0x29ae53(0x1f3)](exports,a21_0x29ae53(0x200),a21_0x21c38d),exports[a21_0x29ae53(0x222)+a21_0x29ae53(0x1e7)]=void(0x1*0x341+-0xe0c+0xacb);const baileys_1=require('@adiwajshi'+a21_0x29ae53(0x208)),exceptions_1=require(a21_0x29ae53(0x22c)+a21_0x29ae53(0x20d)),whatsapp_service_1=require('../service'+'s/whatsapp'+a21_0x29ae53(0x1e9)),logger_config_1=require('../../conf'+a21_0x29ae53(0x229)+a21_0x29ae53(0x233));function a21_0x4f81(){const _0x320beb=['delay','__esModule','apikey','nces','176011klOzBQ','waMonitor','rverErrorE','message','connecting','ng/baileys','297178nrymZw','qrCode','hatsapp','__awaiter','ptions','status','value','138GElrwV','5697SXJkad','6JEMRye','generateHa','hash','auth','then','eTime','refreshTok','instanceNa','Instance\x20l','stance:\x20','close','State','created','waInstance','apply','deleteInst','InstanceCo','eventEmitt','Exception','InternalSe','defineProp','state','authServic','ig/logger.','logout','50viiZBh','../../exce','connectToW','error','2265Kerzzn','5024nFDlbc','fetchInsta','next','config','createInst','ntroller','9ainetD','.service','Status','25804bueaoK','Deletion\x20f','333024lfoDnS','ce\x20needs\x20t','log','connection','Logger','The\x20instan','erty','nnected','ogged\x20out','13xBZXTP','1508912CHRZmM','Instance\x20d','WAStartupS','configServ','repository','ance','o\x20be\x20disco','eleted'];a21_0x4f81=function(){return _0x320beb;};return a21_0x4f81();}class InstanceController{constructor(_0x455566,_0x434c38,_0x16eef9,_0x5b22de,_0x3077b2){const _0x507652=a21_0x29ae53;this[_0x507652(0x204)]=_0x455566,this['configServ'+'ice']=_0x434c38,this['repository']=_0x16eef9,this[_0x507652(0x223)+'er']=_0x5b22de,this[_0x507652(0x228)+'e']=_0x3077b2,this['logger']=new logger_config_1[(_0x507652(0x1f1))](InstanceController['name']);}[a21_0x29ae53(0x234)+a21_0x29ae53(0x1fc)]({instanceName:_0x2e54a4,apikey:_0x4aa8d8,saveOldMessages:saveOldMessages=![]}){return __awaiter(this,void(-0x92*0x12+-0x32*-0x36+-0x48),void(-0x26d2+0x23b2*-0x1+-0x3ec*-0x13),function*(){const _0x12e14f=a21_0x4159,_0x32547e=new whatsapp_service_1[(_0x12e14f(0x1f9))+'ervice'](this[_0x12e14f(0x1fa)+'ice'],this['eventEmitt'+'er'],this[_0x12e14f(0x1fb)],saveOldMessages);_0x32547e[_0x12e14f(0x219)+'me']=_0x2e54a4,this[_0x12e14f(0x204)][_0x12e14f(0x21f)+'s'][_0x32547e[_0x12e14f(0x219)+'me']]=_0x32547e,this[_0x12e14f(0x204)]['delInstanc'+_0x12e14f(0x217)](_0x32547e[_0x12e14f(0x219)+'me']);let _0x1af11d={};if(!_0x4aa8d8){const _0x48e7b7={};_0x48e7b7[_0x12e14f(0x219)+'me']=_0x32547e[_0x12e14f(0x219)+'me'],_0x1af11d=yield this[_0x12e14f(0x228)+'e'][_0x12e14f(0x213)+'sh'](_0x48e7b7);}else{const _0x5bf8de={};_0x5bf8de[_0x12e14f(0x201)]=_0x4aa8d8,yield this['repository'][_0x12e14f(0x215)]['create'](_0x5bf8de,_0x2e54a4),_0x1af11d[_0x12e14f(0x201)]=_0x4aa8d8;}const _0xe0c841={};_0xe0c841[_0x12e14f(0x219)+'me']=_0x32547e[_0x12e14f(0x219)+'me'],_0xe0c841[_0x12e14f(0x20e)]=_0x12e14f(0x21e);const _0x266556={};return _0x266556['instance']=_0xe0c841,_0x266556[_0x12e14f(0x214)]=_0x1af11d,_0x266556['saveOldMes'+'sages']=saveOldMessages,_0x266556;});}[a21_0x29ae53(0x22d)+a21_0x29ae53(0x20b)]({instanceName:_0x5176a1}){var _0x49e188;return __awaiter(this,void(-0x221*-0xf+-0x11dc+-0x4b1*0x3),void(0x1*-0x1a1+0x236c+0x1*-0x21cb),function*(){const _0x31c185=a21_0x4159;try{const _0x129889=this[_0x31c185(0x204)][_0x31c185(0x21f)+'s'][_0x5176a1],_0x3a12eb=(_0x49e188=_0x129889[_0x31c185(0x1f0)+_0x31c185(0x1ea)])===null||_0x49e188===void(-0x139e*0x1+-0x53*0x13+0x19c7*0x1)?void(0x37*-0x61+0x1604+-0x12d):_0x49e188[_0x31c185(0x227)];switch(_0x3a12eb){case _0x31c185(0x21c):yield _0x129889[_0x31c185(0x22d)+_0x31c185(0x20b)](),yield(0x1*-0x96d+0x197*-0x13+0x27a2,baileys_1[_0x31c185(0x1ff)])(-0x22*-0xdd+-0x15e0+0x1*0x56);return _0x129889[_0x31c185(0x20a)];case _0x31c185(0x207):return _0x129889[_0x31c185(0x20a)];default:const _0x25a58e={};_0x25a58e['instanceNa'+'me']=_0x5176a1;return yield this['connection'+'State'](_0x25a58e);}}catch(_0xfc8b30){this['logger'][_0x31c185(0x1ef)](_0xfc8b30);}});}[a21_0x29ae53(0x1f0)+a21_0x29ae53(0x21d)]({instanceName:_0x4f23f8}){return __awaiter(this,void(0x3*-0x351+0xe2b*-0x1+-0x3*-0x80a),void(-0x1ea0+0x482+0x1a1e),function*(){const _0x3b42ce=a21_0x4159;return this[_0x3b42ce(0x204)][_0x3b42ce(0x21f)+'s'][_0x4f23f8][_0x3b42ce(0x1f0)+'Status'];});}[a21_0x29ae53(0x231)+a21_0x29ae53(0x202)]({instanceName:_0x1706a0}){return __awaiter(this,void(0x1e58+0x1f0d+-0x1f*0x1fb),void(-0x84f*0x1+0x254f*0x1+0x1d0*-0x10),function*(){const _0x4932ae=a21_0x4159;if(_0x1706a0)return this[_0x4932ae(0x204)]['instanceIn'+'fo'](_0x1706a0);return this[_0x4932ae(0x204)]['instanceIn'+'fo']();});}[a21_0x29ae53(0x22a)]({instanceName:_0x17c843}){var _0x27e1f4,_0x2bf128;return __awaiter(this,void(-0x902+0x3*0x38b+-0x19f),void(0x686+-0xd*-0x19e+-0x1b8c),function*(){const _0xed84cc=a21_0x4159;try{yield(_0x2bf128=(_0x27e1f4=this[_0xed84cc(0x204)]['waInstance'+'s'][_0x17c843])===null||_0x27e1f4===void(0xf2b*0x1+0x6b*0x1+-0x72*0x23)?void(-0x14f7+-0x6b2+-0x1ba9*-0x1):_0x27e1f4['client'])===null||_0x2bf128===void(-0x1f48+0x7*0x95+0x1b35)?void(0x1*-0x23ea+-0x15cb+0x39b5):_0x2bf128['logout']('Log\x20out\x20in'+_0xed84cc(0x21b)+_0x17c843);const _0x4906a6={};return _0x4906a6['error']=![],_0x4906a6[_0xed84cc(0x206)]=_0xed84cc(0x21a)+_0xed84cc(0x1f5),_0x4906a6;}catch(_0x520d14){throw new exceptions_1[(_0xed84cc(0x225))+(_0xed84cc(0x205))+'xception'](_0x520d14['toString']());}});}[a21_0x29ae53(0x221)+a21_0x29ae53(0x1fc)]({instanceName:_0x3a9ccd}){return __awaiter(this,void(-0x70f*0x1+0x78d+-0x7e),void(-0x256a+-0x5*-0xb2+0x21f0),function*(){const _0x238840=a21_0x4159,_0x27947c={};_0x27947c[_0x238840(0x219)+'me']=_0x3a9ccd;const _0x42c38c=yield this[_0x238840(0x1f0)+_0x238840(0x21d)](_0x27947c);if(_0x42c38c[_0x238840(0x227)]==='open')throw new exceptions_1['BadRequest'+(_0x238840(0x224))]([_0x238840(0x1ec)+'ailed',_0x238840(0x1f2)+_0x238840(0x1ee)+_0x238840(0x1fd)+_0x238840(0x1f4)]);try{delete this['waMonitor']['waInstance'+'s'][_0x3a9ccd];const _0x3e55eb={};return _0x3e55eb[_0x238840(0x22e)]=![],_0x3e55eb[_0x238840(0x206)]=_0x238840(0x1f8)+_0x238840(0x1fe),_0x3e55eb;}catch(_0x3e6cc8){throw new exceptions_1['BadRequest'+(_0x238840(0x224))](_0x3e6cc8['toString']());}});}[a21_0x29ae53(0x218)+'en'](_0x5bea73,_0x3b24ef){return __awaiter(this,void(-0x1d*-0x71+-0x21f2+0x1525),void(-0x8ea+0x9+0x1*0x8e1),function*(){const _0x47cb69=a21_0x4159;return yield this[_0x47cb69(0x228)+'e']['refreshTok'+'en'](_0x3b24ef);});}}exports[a21_0x29ae53(0x222)+a21_0x29ae53(0x1e7)]=InstanceController;