'use strict';function a29_0x2284(){const _0x4cbd56=['repository','KEY','EXPIRIN_IN','authGuard','ackage.jso','2fcZqhH','1577144qniAvz','SECRET','value','nces','/instance/','1411980nPgaQw','apikey','erty','apply','186469WtGYID','originalUr','ForbidenEx','6GWJoqf','then','error','../../../p','find','fault','ception','1880995oXiFym','\x20api\x20key\x20m','create','jwt','1091574geFufs','params','../../exce','fetchInsta','throw','dator','GUARD','ig/env.con','The\x20global','includes','configServ','defineProp','__awaiter','__esModule','Unauthoriz','default','instanceNa','50BjWxxi','authorizat','edExceptio','ion','JWT','ice','get','apiName','2754115rjMPiC','fig','class-vali','API_KEY','TION','1615527qByyWL','config','AUTHENTICA','isJWT','ust\x20be\x20set','next','../../conf','Missing\x20gl','toLowerCas'];a29_0x2284=function(){return _0x4cbd56;};return a29_0x2284();}const a29_0x53efc1=a29_0x1b46;(function(_0x21b8cc,_0x5b7dc9){const _0x3ad882=a29_0x1b46,_0x258705=_0x21b8cc();while(!![]){try{const _0x3f6912=-parseInt(_0x3ad882(0x184))/(-0x55*0xd+0x1*-0x248c+-0x2*-0x146f)*(parseInt(_0x3ad882(0x1be))/(0x254e+-0x1*-0x2691+-0x4bdd))+-parseInt(_0x3ad882(0x192))/(0x1*0x14f5+0x6c5*0x5+-0xd*0x437)+-parseInt(_0x3ad882(0x180))/(-0x20dd*0x1+-0x821*-0x2+-0x109f*-0x1)+-parseInt(_0x3ad882(0x18e))/(0x139*0x4+0x2098+-0x2577)*(parseInt(_0x3ad882(0x187))/(-0x4a3*0x7+0x1599+0xae2))+parseInt(_0x3ad882(0x1ab))/(-0x1368+0x17c3+-0x454)+parseInt(_0x3ad882(0x1bf))/(-0xcd4+-0x3a*0x29+0x1626)+-parseInt(_0x3ad882(0x1b0))/(-0x1585+0x11b1+0x2b*0x17)*(-parseInt(_0x3ad882(0x1a3))/(-0x146*-0xb+-0x1999+0xba1));if(_0x3f6912===_0x5b7dc9)break;else _0x258705['push'](_0x258705['shift']());}catch(_0x2a0af4){_0x258705['push'](_0x258705['shift']());}}}(a29_0x2284,0x29d32+-0x2ffd2+0x39166));function a29_0x1b46(_0x407322,_0x494352){const _0x33a720=a29_0x2284();return a29_0x1b46=function(_0x4879de,_0x299f32){_0x4879de=_0x4879de-(0x189+-0x1398+0x138b);let _0x90cec0=_0x33a720[_0x4879de];return _0x90cec0;},a29_0x1b46(_0x407322,_0x494352);}var __awaiter=this&&this[a29_0x53efc1(0x19e)]||function(_0x424a30,_0x3ccba6,_0x401615,_0x2e8295){function _0x1ab899(_0x528193){return _0x528193 instanceof _0x401615?_0x528193:new _0x401615(function(_0x32108d){_0x32108d(_0x528193);});}return new(_0x401615||(_0x401615=Promise))(function(_0x2c379b,_0x4f251e){const _0x9d3696=a29_0x1b46;function _0x4e8e6a(_0xc1a114){const _0x91ef96=a29_0x1b46;try{_0x5ced56(_0x2e8295[_0x91ef96(0x1b5)](_0xc1a114));}catch(_0x2491d7){_0x4f251e(_0x2491d7);}}function _0x5125e4(_0x1ecefa){const _0x172308=a29_0x1b46;try{_0x5ced56(_0x2e8295[_0x172308(0x196)](_0x1ecefa));}catch(_0x3ec808){_0x4f251e(_0x3ec808);}}function _0x5ced56(_0xd82363){const _0xf3213d=a29_0x1b46;_0xd82363['done']?_0x2c379b(_0xd82363[_0xf3213d(0x17d)]):_0x1ab899(_0xd82363[_0xf3213d(0x17d)])[_0xf3213d(0x188)](_0x4e8e6a,_0x5125e4);}_0x5ced56((_0x2e8295=_0x2e8295[_0x9d3696(0x183)](_0x424a30,_0x3ccba6||[]))[_0x9d3696(0x1b5)]());});},__importDefault=this&&this['__importDe'+a29_0x53efc1(0x18c)]||function(_0x4ab2de){return _0x4ab2de&&_0x4ab2de['__esModule']?_0x4ab2de:{'default':_0x4ab2de};};const a29_0x90cec0={};a29_0x90cec0[a29_0x53efc1(0x17d)]=!![],Object[a29_0x53efc1(0x19d)+a29_0x53efc1(0x182)](exports,a29_0x53efc1(0x19f),a29_0x90cec0),exports[a29_0x53efc1(0x1bc)]=void(0x41c+-0x1132+-0x86*-0x19);const class_validator_1=require(a29_0x53efc1(0x1ad)+a29_0x53efc1(0x197)),jsonwebtoken_1=__importDefault(require('jsonwebtok'+'en')),env_config_1=require('../../conf'+a29_0x53efc1(0x199)+a29_0x53efc1(0x1ac)),logger_config_1=require(a29_0x53efc1(0x1b6)+'ig/logger.'+a29_0x53efc1(0x1b1)),package_json_1=require(a29_0x53efc1(0x18a)+a29_0x53efc1(0x1bd)+'n'),exceptions_1=require(a29_0x53efc1(0x194)+'ptions'),whatsapp_module_1=require('../whatsap'+'p.module'),logger=new logger_config_1['Logger'](a29_0x53efc1(0x198));function jwtGuard(_0x1b6296,_0x3f447e,_0x3c4c0b){return __awaiter(this,void(-0x808+-0x356+0x61*0x1e),void(0x2*0x28+0x185+0x1d5*-0x1),function*(){const _0x435038=a29_0x1b46,_0x20f543=_0x1b6296['get'](_0x435038(0x181));if(_0x20f543&&env_config_1[_0x435038(0x19c)+_0x435038(0x1a8)][_0x435038(0x1a9)]('AUTHENTICA'+_0x435038(0x1af))[_0x435038(0x1ae)][_0x435038(0x1ba)]!==_0x20f543)throw new exceptions_1[(_0x435038(0x1a0))+(_0x435038(0x1a5))+'n']();if(env_config_1[_0x435038(0x19c)+_0x435038(0x1a8)]['get'](_0x435038(0x1b2)+_0x435038(0x1af))['API_KEY'][_0x435038(0x1ba)]===_0x20f543)return _0x3c4c0b();if((_0x1b6296[_0x435038(0x185)+'l'][_0x435038(0x19b)]('/instance/'+_0x435038(0x190))||_0x1b6296[_0x435038(0x185)+'l']['includes'](_0x435038(0x17f)+_0x435038(0x195)+'nces'))&&!_0x20f543)throw new exceptions_1['ForbidenEx'+(_0x435038(0x18d))](_0x435038(0x1b7)+'obal\x20api\x20k'+'ey',_0x435038(0x19a)+_0x435038(0x18f)+_0x435038(0x1b4));const _0x1d1ea8=env_config_1[_0x435038(0x19c)+'ice'][_0x435038(0x1a9)](_0x435038(0x1b2)+_0x435038(0x1af))[_0x435038(0x1a7)];try{const [_0xe0b9ca,_0x46ae55]=_0x1b6296[_0x435038(0x1a9)](_0x435038(0x1a4)+_0x435038(0x1a6))['split']('\x20');if(_0xe0b9ca[_0x435038(0x1b8)+'e']()!=='bearer')throw new exceptions_1[(_0x435038(0x1a0))+(_0x435038(0x1a5))+'n']();if(!(0x2291*0x1+0xb5c+-0x2ded,class_validator_1[_0x435038(0x1b3)])(_0x46ae55))throw new exceptions_1['Unauthoriz'+(_0x435038(0x1a5))+'n']();const _0x2ef494=_0x1b6296[_0x435038(0x193)],_0x65ea88=jsonwebtoken_1[_0x435038(0x1a1)]['verify'](_0x46ae55,_0x1d1ea8[_0x435038(0x17c)],{'ignoreExpiration':_0x1d1ea8[_0x435038(0x1bb)]===0x1*-0x18b5+0x13*-0x14f+0x87*0x5e});if(_0x2ef494[_0x435038(0x1a2)+'me']!==_0x65ea88[_0x435038(0x1a2)+'me']||package_json_1['name']!==_0x65ea88[_0x435038(0x1aa)])throw new exceptions_1['Unauthoriz'+(_0x435038(0x1a5))+'n']();return _0x3c4c0b();}catch(_0x55bc76){logger[_0x435038(0x189)](_0x55bc76);throw new exceptions_1['Unauthoriz'+(_0x435038(0x1a5))+'n']();}});}function apikey(_0x5d6772,_0x575a22,_0x465229){return __awaiter(this,void(0x10b9+0x2e*0x31+-0x1987),void(0x1e3+0xb*0x77+-0x1c*0x40),function*(){const _0xcd5f0=a29_0x1b46,_0x220c88=env_config_1[_0xcd5f0(0x19c)+_0xcd5f0(0x1a8)][_0xcd5f0(0x1a9)](_0xcd5f0(0x1b2)+_0xcd5f0(0x1af))[_0xcd5f0(0x1ae)],_0x1b49d7=_0x5d6772[_0xcd5f0(0x1a9)](_0xcd5f0(0x181));if(_0x220c88[_0xcd5f0(0x1ba)]===_0x1b49d7)return _0x465229();if((_0x5d6772['originalUr'+'l'][_0xcd5f0(0x19b)](_0xcd5f0(0x17f)+_0xcd5f0(0x190))||_0x5d6772[_0xcd5f0(0x185)+'l'][_0xcd5f0(0x19b)](_0xcd5f0(0x17f)+_0xcd5f0(0x195)+_0xcd5f0(0x17e)))&&!_0x1b49d7)throw new exceptions_1[(_0xcd5f0(0x186))+'ception'](_0xcd5f0(0x1b7)+'obal\x20api\x20k'+'ey','The\x20global'+_0xcd5f0(0x18f)+'ust\x20be\x20set');try{const _0x4dfb1c=_0x5d6772[_0xcd5f0(0x193)],_0x5ccec3=yield whatsapp_module_1[_0xcd5f0(0x1b9)]['auth'][_0xcd5f0(0x18b)](_0x4dfb1c['instanceNa'+'me']);if(_0x5ccec3[_0xcd5f0(0x181)]===_0x1b49d7)return _0x465229();}catch(_0x7dd398){}throw new exceptions_1[(_0xcd5f0(0x1a0))+'edExceptio'+'n']();});}const a29_0x258600={};a29_0x258600[a29_0x53efc1(0x191)]=jwtGuard,a29_0x258600['apikey']=apikey,exports[a29_0x53efc1(0x1bc)]=a29_0x258600;