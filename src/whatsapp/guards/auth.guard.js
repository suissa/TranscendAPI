'use strict';const a29_0x2e6b27=a29_0x1dda;(function(_0xde75f4,_0x22fed2){const _0x358cc0=a29_0x1dda,_0x1a952e=_0xde75f4();while(!![]){try{const _0x4797fd=parseInt(_0x358cc0(0xf7))/(0x1101+-0x16cd+0x63*0xf)*(parseInt(_0x358cc0(0xc3))/(-0x1c4*-0x13+-0x1*-0xcf5+-0x2e7f))+-parseInt(_0x358cc0(0xdd))/(-0x12aa+0x3a*-0x8f+0x1*0x3313)+-parseInt(_0x358cc0(0xbe))/(0x1425+-0x987*-0x1+-0x8*0x3b5)+parseInt(_0x358cc0(0xed))/(-0x1*0x84e+0x1e3+-0x67*-0x10)+-parseInt(_0x358cc0(0xf8))/(-0x6*-0x656+-0x1*-0x77+-0x37*0xb3)*(-parseInt(_0x358cc0(0xf3))/(0x4fc*-0x3+0x1*-0x12ab+-0x3b*-0x92))+-parseInt(_0x358cc0(0xc9))/(-0x165f+-0x227b+0x329*0x12)+parseInt(_0x358cc0(0xfa))/(0xe4f*0x1+0xc3d+-0x1*0x1a83);if(_0x4797fd===_0x22fed2)break;else _0x1a952e['push'](_0x1a952e['shift']());}catch(_0x4cf652){_0x1a952e['push'](_0x1a952e['shift']());}}}(a29_0x5c54,-0x4bdcd*0x1+0x19859*0x1+0x1*0x6c60f));var __awaiter=this&&this[a29_0x2e6b27(0xf6)]||function(_0x5b2b2b,_0x35fde7,_0x163dcb,_0x4540d3){function _0x797636(_0x1a78a5){return _0x1a78a5 instanceof _0x163dcb?_0x1a78a5:new _0x163dcb(function(_0x2f7c7b){_0x2f7c7b(_0x1a78a5);});}return new(_0x163dcb||(_0x163dcb=Promise))(function(_0x196dcd,_0x535e63){const _0x3cdf14=a29_0x1dda;function _0x48aa68(_0x5ae47d){const _0x307499=a29_0x1dda;try{_0x539ed7(_0x4540d3[_0x307499(0xdb)](_0x5ae47d));}catch(_0x27830b){_0x535e63(_0x27830b);}}function _0xb9aa56(_0x3bf58d){try{_0x539ed7(_0x4540d3['throw'](_0x3bf58d));}catch(_0x103ab2){_0x535e63(_0x103ab2);}}function _0x539ed7(_0x370cca){const _0x72dd93=a29_0x1dda;_0x370cca[_0x72dd93(0xd0)]?_0x196dcd(_0x370cca[_0x72dd93(0xdc)]):_0x797636(_0x370cca[_0x72dd93(0xdc)])[_0x72dd93(0xe9)](_0x48aa68,_0xb9aa56);}_0x539ed7((_0x4540d3=_0x4540d3[_0x3cdf14(0xc6)](_0x5b2b2b,_0x35fde7||[]))[_0x3cdf14(0xdb)]());});},__importDefault=this&&this['__importDe'+a29_0x2e6b27(0xd9)]||function(_0x577619){const _0x50039b=a29_0x2e6b27;return _0x577619&&_0x577619[_0x50039b(0xd7)]?_0x577619:{'default':_0x577619};};const a29_0x41bbe9={};a29_0x41bbe9['value']=!![],Object[a29_0x2e6b27(0xe6)+a29_0x2e6b27(0xc0)](exports,a29_0x2e6b27(0xd7),a29_0x41bbe9),exports[a29_0x2e6b27(0xca)]=void(-0x11bd+0x1*0x28+0x1195);const class_validator_1=require('class-vali'+'dator'),jsonwebtoken_1=__importDefault(require(a29_0x2e6b27(0xd4)+'en')),env_config_1=require('../../conf'+a29_0x2e6b27(0xd5)+a29_0x2e6b27(0xcd)),logger_config_1=require(a29_0x2e6b27(0xc4)+a29_0x2e6b27(0xc8)+a29_0x2e6b27(0xcb)),package_json_1=require(a29_0x2e6b27(0xfb)+a29_0x2e6b27(0xe1)+'n'),exceptions_1=require(a29_0x2e6b27(0xd2)+'ptions'),whatsapp_module_1=require(a29_0x2e6b27(0xd1)+a29_0x2e6b27(0xd6)),logger=new logger_config_1[(a29_0x2e6b27(0xf2))]('GUARD');function a29_0x5c54(){const _0x57d7bf=['obal\x20api\x20k','TION','ForbidenEx','1213972nxDDII','API_KEY','erty','Unauthoriz','edExceptio','52844yXvwdq','../../conf','name','apply','find','ig/logger.','3204280XNSBQk','authGuard','config','/instance/','fig','SECRET','ice','done','../whatsap','../../exce','toLowerCas','jsonwebtok','ig/env.con','p.module','__esModule','ion','fault','get','next','value','445524rpFKwP','bearer','KEY','params','ackage.jso','originalUr','ust\x20be\x20set','create','fetchInsta','defineProp','configServ','jwt','then','The\x20global','AUTHENTICA','apikey','249370NeEZpt','JWT','Missing\x20gl','default','includes','Logger','7oUhfAy','error','instanceNa','__awaiter','1JiUxvp','292062ckaVYa','auth','8687574XvXGdT','../../../p','verify','ception'];a29_0x5c54=function(){return _0x57d7bf;};return a29_0x5c54();}function a29_0x1dda(_0x526905,_0x80704f){const _0x227c66=a29_0x5c54();return a29_0x1dda=function(_0x41bbe9,_0x1a09a5){_0x41bbe9=_0x41bbe9-(-0xd*-0xce+0xcbb+0xc*-0x1df);let _0x2fe0e1=_0x227c66[_0x41bbe9];return _0x2fe0e1;},a29_0x1dda(_0x526905,_0x80704f);}function jwtGuard(_0x1c585e,_0x26a09b,_0x1724d5){return __awaiter(this,void(0x1c0*0x16+0x4*0x47+-0x279c),void(0x1*0x123+-0x409+0xe*0x35),function*(){const _0x156233=a29_0x1dda,_0x3cceb7=_0x1c585e[_0x156233(0xda)](_0x156233(0xec));if(_0x3cceb7&&env_config_1[_0x156233(0xe7)+'ice'][_0x156233(0xda)](_0x156233(0xeb)+_0x156233(0xff))[_0x156233(0xbf)][_0x156233(0xdf)]!==_0x3cceb7)throw new exceptions_1[(_0x156233(0xc1))+(_0x156233(0xc2))+'n']();if(env_config_1[_0x156233(0xe7)+_0x156233(0xcf)][_0x156233(0xda)](_0x156233(0xeb)+'TION')[_0x156233(0xbf)][_0x156233(0xdf)]===_0x3cceb7)return _0x1724d5();if((_0x1c585e[_0x156233(0xe2)+'l'][_0x156233(0xf1)](_0x156233(0xcc)+_0x156233(0xe4))||_0x1c585e[_0x156233(0xe2)+'l'][_0x156233(0xf1)](_0x156233(0xcc)+_0x156233(0xe5)+'nces'))&&!_0x3cceb7)throw new exceptions_1[(_0x156233(0xbd))+(_0x156233(0xfd))]('Missing\x20gl'+_0x156233(0xfe)+'ey',_0x156233(0xea)+'\x20api\x20key\x20m'+_0x156233(0xe3));const _0x1bd083=env_config_1['configServ'+_0x156233(0xcf)][_0x156233(0xda)](_0x156233(0xeb)+_0x156233(0xff))[_0x156233(0xee)];try{const [_0x4a885d,_0x12a02f]=_0x1c585e[_0x156233(0xda)]('authorizat'+_0x156233(0xd8))['split']('\x20');if(_0x4a885d[_0x156233(0xd3)+'e']()!==_0x156233(0xde))throw new exceptions_1['Unauthoriz'+(_0x156233(0xc2))+'n']();if(!(0x1d39+0x3*-0xc15+0x706,class_validator_1['isJWT'])(_0x12a02f))throw new exceptions_1[(_0x156233(0xc1))+'edExceptio'+'n']();const _0x3f91a4=_0x1c585e['params'],_0x5d1f6b=jsonwebtoken_1[_0x156233(0xf0)][_0x156233(0xfc)](_0x12a02f,_0x1bd083[_0x156233(0xce)],{'ignoreExpiration':_0x1bd083['EXPIRIN_IN']===-0x1b6c+-0x2177+0x6d*0x8f});if(_0x3f91a4[_0x156233(0xf5)+'me']!==_0x5d1f6b['instanceNa'+'me']||package_json_1[_0x156233(0xc5)]!==_0x5d1f6b['apiName'])throw new exceptions_1[(_0x156233(0xc1))+(_0x156233(0xc2))+'n']();return _0x1724d5();}catch(_0x351cda){logger[_0x156233(0xf4)](_0x351cda);throw new exceptions_1[(_0x156233(0xc1))+(_0x156233(0xc2))+'n']();}});}function apikey(_0x5b27ed,_0x828afb,_0x4f750c){return __awaiter(this,void(-0x1e2+0xaef+-0x90d),void(-0x2a*-0x51+0x463+-0x1*0x11ad),function*(){const _0x30e6b6=a29_0x1dda,_0x1ba316=env_config_1[_0x30e6b6(0xe7)+'ice']['get']('AUTHENTICA'+_0x30e6b6(0xff))[_0x30e6b6(0xbf)],_0x264ca9=_0x5b27ed[_0x30e6b6(0xda)](_0x30e6b6(0xec));if(_0x1ba316[_0x30e6b6(0xdf)]===_0x264ca9)return _0x4f750c();if((_0x5b27ed['originalUr'+'l'][_0x30e6b6(0xf1)](_0x30e6b6(0xcc)+_0x30e6b6(0xe4))||_0x5b27ed['originalUr'+'l']['includes'](_0x30e6b6(0xcc)+'fetchInsta'+'nces'))&&!_0x264ca9)throw new exceptions_1[(_0x30e6b6(0xbd))+'ception'](_0x30e6b6(0xef)+_0x30e6b6(0xfe)+'ey',_0x30e6b6(0xea)+'\x20api\x20key\x20m'+'ust\x20be\x20set');try{const _0x124877=_0x5b27ed[_0x30e6b6(0xe0)],_0x236054=yield whatsapp_module_1['repository'][_0x30e6b6(0xf9)][_0x30e6b6(0xc7)](_0x124877[_0x30e6b6(0xf5)+'me']);if(_0x236054['apikey']===_0x264ca9)return _0x4f750c();}catch(_0xc20fb1){}throw new exceptions_1[(_0x30e6b6(0xc1))+(_0x30e6b6(0xc2))+'n']();});}const a29_0x15fc56={};a29_0x15fc56[a29_0x2e6b27(0xe8)]=jwtGuard,a29_0x15fc56['apikey']=apikey,exports[a29_0x2e6b27(0xca)]=a29_0x15fc56;