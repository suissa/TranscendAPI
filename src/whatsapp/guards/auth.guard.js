'use strict';function a29_0x1020(){const _0x15851f=['jwt','Unauthoriz','apikey','AUTHENTICA','fetchInsta','1441976USEdrS','originalUr','done','../../conf','6839170vCZlAN','instanceNa','../../../p','../whatsap','__importDe','3hYoPzZ','configServ','16bCcFVe','ackage.jso','apply','includes','name','../../exce','authorizat','929082wiDAbH','create','nces','toLowerCas','__awaiter','6OBRbEL','ion','edExceptio','value','KEY','ice','GUARD','erty','obal\x20api\x20k','ception','split','verify','fault','4419963njwiHe','auth','__esModule','Logger','SECRET','\x20api\x20key\x20m','EXPIRIN_IN','params','ust\x20be\x20set','API_KEY','defineProp','JWT','isJWT','config','1994825EVGFSV','throw','class-vali','ig/logger.','3nRICvK','get','default','5784339KdgiDp','/instance/','184594oxtWfv','Missing\x20gl','find','next','ForbidenEx','TION'];a29_0x1020=function(){return _0x15851f;};return a29_0x1020();}const a29_0x276092=a29_0x1d5b;(function(_0x2a1e5f,_0x17880f){const _0x30a596=a29_0x1d5b,_0xfa9eb1=_0x2a1e5f();while(!![]){try{const _0x4cf501=-parseInt(_0x30a596(0xf4))/(-0x1e06+0x8e8+0x151f)*(-parseInt(_0x30a596(0xe0))/(-0x1cd*-0x4+-0x145c+0x151*0xa))+-parseInt(_0x30a596(0xdb))/(-0x787+0x16e*0x16+-0xbf5*0x2)*(-parseInt(_0x30a596(0xeb))/(-0x69b+0xaf0+0x451*-0x1))+-parseInt(_0x30a596(0xd7))/(0x20bd*-0x1+0x7*-0x13e+0x2974)*(-parseInt(_0x30a596(0x102))/(0x1*0xa70+-0x1ed7+0x146d))+-parseInt(_0x30a596(0xfd))/(0x5*-0x537+0x1c24+-0x57*0x6)*(parseInt(_0x30a596(0xf6))/(0x254c+0x509*-0x1+0x1*-0x203b))+-parseInt(_0x30a596(0xc9))/(-0x4*-0x67d+0x17+0xd01*-0x2)+parseInt(_0x30a596(0xef))/(0x255d*0x1+-0x26c8+0x175)+-parseInt(_0x30a596(0xde))/(0x5*0x1f4+0x3c+-0x9f5);if(_0x4cf501===_0x17880f)break;else _0xfa9eb1['push'](_0xfa9eb1['shift']());}catch(_0x570efc){_0xfa9eb1['push'](_0xfa9eb1['shift']());}}}(a29_0x1020,-0xae652+0x4ee4d*-0x2+0x925c5*0x3));function a29_0x1d5b(_0x41778f,_0xcf4549){const _0x48e7ef=a29_0x1020();return a29_0x1d5b=function(_0xddac70,_0x350297){_0xddac70=_0xddac70-(0x1016+-0x70d+0xd*-0xa3);let _0x334304=_0x48e7ef[_0xddac70];return _0x334304;},a29_0x1d5b(_0x41778f,_0xcf4549);}var __awaiter=this&&this[a29_0x276092(0x101)]||function(_0x36a04e,_0x574e8a,_0x280903,_0x1fca60){function _0x216a76(_0x41140f){return _0x41140f instanceof _0x280903?_0x41140f:new _0x280903(function(_0x4b931e){_0x4b931e(_0x41140f);});}return new(_0x280903||(_0x280903=Promise))(function(_0xcebe93,_0x3954df){const _0x23646d=a29_0x1d5b;function _0x423d7b(_0x423eb4){const _0x5b04af=a29_0x1d5b;try{_0x3a3028(_0x1fca60[_0x5b04af(0xe3)](_0x423eb4));}catch(_0x2b66ca){_0x3954df(_0x2b66ca);}}function _0x4e6811(_0x36f68e){const _0x64612d=a29_0x1d5b;try{_0x3a3028(_0x1fca60[_0x64612d(0xd8)](_0x36f68e));}catch(_0xa91ca){_0x3954df(_0xa91ca);}}function _0x3a3028(_0x3b4809){const _0x2c87ba=a29_0x1d5b;_0x3b4809[_0x2c87ba(0xed)]?_0xcebe93(_0x3b4809[_0x2c87ba(0x105)]):_0x216a76(_0x3b4809['value'])['then'](_0x423d7b,_0x4e6811);}_0x3a3028((_0x1fca60=_0x1fca60[_0x23646d(0xf8)](_0x36a04e,_0x574e8a||[]))['next']());});},__importDefault=this&&this[a29_0x276092(0xf3)+a29_0x276092(0xc8)]||function(_0x27baea){const _0x3e397c=a29_0x276092;return _0x27baea&&_0x27baea[_0x3e397c(0xcb)]?_0x27baea:{'default':_0x27baea};};const a29_0x350297={};a29_0x350297[a29_0x276092(0x105)]=!![],Object[a29_0x276092(0xd3)+a29_0x276092(0xc3)](exports,a29_0x276092(0xcb),a29_0x350297),exports['authGuard']=void(0x2ed+0xceb+-0xa9*0x18);const class_validator_1=require(a29_0x276092(0xd9)+'dator'),jsonwebtoken_1=__importDefault(require('jsonwebtok'+'en')),env_config_1=require(a29_0x276092(0xee)+'ig/env.con'+'fig'),logger_config_1=require('../../conf'+a29_0x276092(0xda)+a29_0x276092(0xd6)),package_json_1=require(a29_0x276092(0xf1)+a29_0x276092(0xf7)+'n'),exceptions_1=require(a29_0x276092(0xfb)+'ptions'),whatsapp_module_1=require(a29_0x276092(0xf2)+'p.module'),logger=new logger_config_1[(a29_0x276092(0xcc))](a29_0x276092(0xc2));function jwtGuard(_0x1daf1f,_0xdfe82c,_0x455032){return __awaiter(this,void(-0x3b7*-0x1+-0xa0a+0x653),void(0x6e1+0x2*-0x47c+-0x5*-0x6b),function*(){const _0x3f98d0=a29_0x1d5b,_0x24b519=_0x1daf1f[_0x3f98d0(0xdc)]('apikey');if(_0x24b519&&env_config_1[_0x3f98d0(0xf5)+_0x3f98d0(0x107)][_0x3f98d0(0xdc)](_0x3f98d0(0xe9)+_0x3f98d0(0xe5))['API_KEY'][_0x3f98d0(0x106)]!==_0x24b519)throw new exceptions_1[(_0x3f98d0(0xe7))+(_0x3f98d0(0x104))+'n']();if(env_config_1[_0x3f98d0(0xf5)+_0x3f98d0(0x107)][_0x3f98d0(0xdc)](_0x3f98d0(0xe9)+_0x3f98d0(0xe5))[_0x3f98d0(0xd2)]['KEY']===_0x24b519)return _0x455032();if((_0x1daf1f[_0x3f98d0(0xec)+'l'][_0x3f98d0(0xf9)](_0x3f98d0(0xdf)+_0x3f98d0(0xfe))||_0x1daf1f[_0x3f98d0(0xec)+'l'][_0x3f98d0(0xf9)](_0x3f98d0(0xdf)+_0x3f98d0(0xea)+_0x3f98d0(0xff)))&&!_0x24b519)throw new exceptions_1[(_0x3f98d0(0xe4))+(_0x3f98d0(0xc5))]('Missing\x20gl'+_0x3f98d0(0xc4)+'ey','The\x20global'+_0x3f98d0(0xce)+'ust\x20be\x20set');const _0x2373df=env_config_1[_0x3f98d0(0xf5)+_0x3f98d0(0x107)][_0x3f98d0(0xdc)]('AUTHENTICA'+_0x3f98d0(0xe5))[_0x3f98d0(0xd4)];try{const [_0x1a3bb4,_0x20fcd8]=_0x1daf1f[_0x3f98d0(0xdc)](_0x3f98d0(0xfc)+_0x3f98d0(0x103))[_0x3f98d0(0xc6)]('\x20');if(_0x1a3bb4[_0x3f98d0(0x100)+'e']()!=='bearer')throw new exceptions_1[(_0x3f98d0(0xe7))+'edExceptio'+'n']();if(!(0x3ee+-0x179f+0x13b1,class_validator_1[_0x3f98d0(0xd5)])(_0x20fcd8))throw new exceptions_1[(_0x3f98d0(0xe7))+(_0x3f98d0(0x104))+'n']();const _0x30626a=_0x1daf1f['params'],_0x925af2=jsonwebtoken_1[_0x3f98d0(0xdd)][_0x3f98d0(0xc7)](_0x20fcd8,_0x2373df[_0x3f98d0(0xcd)],{'ignoreExpiration':_0x2373df[_0x3f98d0(0xcf)]===0x39*-0x8+-0xf9d+0x1165*0x1});if(_0x30626a['instanceNa'+'me']!==_0x925af2[_0x3f98d0(0xf0)+'me']||package_json_1[_0x3f98d0(0xfa)]!==_0x925af2['apiName'])throw new exceptions_1['Unauthoriz'+(_0x3f98d0(0x104))+'n']();return _0x455032();}catch(_0x1506b0){logger['error'](_0x1506b0);throw new exceptions_1['Unauthoriz'+(_0x3f98d0(0x104))+'n']();}});}function apikey(_0x48b5a5,_0x2165aa,_0x153586){return __awaiter(this,void(0xb3+-0x3c7*0x1+0x314),void(0x108c+0x2*0x5fd+-0x1c86),function*(){const _0x205679=a29_0x1d5b,_0x319c76=env_config_1[_0x205679(0xf5)+_0x205679(0x107)][_0x205679(0xdc)]('AUTHENTICA'+_0x205679(0xe5))['API_KEY'],_0x24e527=_0x48b5a5[_0x205679(0xdc)](_0x205679(0xe8));if(_0x319c76['KEY']===_0x24e527)return _0x153586();if((_0x48b5a5[_0x205679(0xec)+'l'][_0x205679(0xf9)](_0x205679(0xdf)+_0x205679(0xfe))||_0x48b5a5['originalUr'+'l'][_0x205679(0xf9)](_0x205679(0xdf)+_0x205679(0xea)+_0x205679(0xff)))&&!_0x24e527)throw new exceptions_1['ForbidenEx'+(_0x205679(0xc5))](_0x205679(0xe1)+_0x205679(0xc4)+'ey','The\x20global'+_0x205679(0xce)+_0x205679(0xd1));try{const _0x539b08=_0x48b5a5[_0x205679(0xd0)],_0x31e665=yield whatsapp_module_1['repository'][_0x205679(0xca)][_0x205679(0xe2)](_0x539b08[_0x205679(0xf0)+'me']);if(_0x31e665[_0x205679(0xe8)]===_0x24e527)return _0x153586();}catch(_0x1b3444){}throw new exceptions_1[(_0x205679(0xe7))+'edExceptio'+'n']();});}const a29_0x5775f0={};a29_0x5775f0[a29_0x276092(0xe6)]=jwtGuard,a29_0x5775f0[a29_0x276092(0xe8)]=apikey,exports['authGuard']=a29_0x5775f0;