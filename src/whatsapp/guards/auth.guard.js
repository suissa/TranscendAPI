'use strict';const a30_0x32f7f6=a30_0x25db;function a30_0x41d9(){const _0x103fb2=['error','originalUr','done','../../../p','Logger','GUARD','24899fVCXtA','nces','/instance/','repository','dator','2604943RoTprs','1360922GNluBZ','edExceptio','configServ','fault','5iQbnnB','apiName','ust\x20be\x20set','ion','fetchInsta','ice','get','184LPTrpB','\x20api\x20key\x20m','split','class-vali','The\x20global','EXPIRIN_IN','Unauthoriz','p.module','AUTHENTICA','value','auth','next','fig','__esModule','find','ForbiddenE','TION','SECRET','create','authGuard','apply','__awaiter','instanceNa','then','ackage.jso','KEY','obal\x20api\x20k','ptions','350262xDfOCc','API_KEY','verify','ig/logger.','isJWT','bearer','Missing\x20gl','108045yacMZk','../../conf','jsonwebtok','__importDe','JWT','10NDyhGC','xception','params','authorizat','3quoCIj','jwt','2019954MpevkN','apikey','defineProp','350172FXeHLy','../whatsap','includes','default','name'];a30_0x41d9=function(){return _0x103fb2;};return a30_0x41d9();}function a30_0x25db(_0x2d88ef,_0x4deec8){const _0x24baca=a30_0x41d9();return a30_0x25db=function(_0x4f9554,_0xefa586){_0x4f9554=_0x4f9554-(-0x1*0x10c1+0x70d*0x1+0xa58);let _0x20ef9b=_0x24baca[_0x4f9554];return _0x20ef9b;},a30_0x25db(_0x2d88ef,_0x4deec8);}(function(_0x5df73f,_0x5bcb65){const _0x5c50c3=a30_0x25db,_0x2855fb=_0x5df73f();while(!![]){try{const _0x5a673e=parseInt(_0x5c50c3(0xab))/(0x1c2d+-0xb*0x181+-0xba1)+parseInt(_0x5c50c3(0xd2))/(0x1a*0x16c+0x829+0x2d1f*-0x1)+-parseInt(_0x5c50c3(0xe2))/(0x1860+0xa93*0x3+0x1*-0x3816)*(-parseInt(_0x5c50c3(0xe7))/(-0x14cf+-0xcd4+0x21a7))+parseInt(_0x5c50c3(0xaf))/(-0x2285+0x1a53+0x837)*(-parseInt(_0x5c50c3(0xe4))/(0x23c6+-0x27d*-0xd+0x53d*-0xd))+-parseInt(_0x5c50c3(0xa5))/(-0xfe4+-0x12*-0x163+-0x90b)+-parseInt(_0x5c50c3(0xb6))/(0x13e0+0x255c+-0x3934)*(parseInt(_0x5c50c3(0xd9))/(-0xe55+-0x1b2e+0x298c))+-parseInt(_0x5c50c3(0xde))/(-0x959+-0x16c+-0x1*-0xacf)*(parseInt(_0x5c50c3(0xaa))/(-0x721+-0x2b0*0xd+0x150e*0x2));if(_0x5a673e===_0x5bcb65)break;else _0x2855fb['push'](_0x2855fb['shift']());}catch(_0x50c974){_0x2855fb['push'](_0x2855fb['shift']());}}}(a30_0x41d9,-0x13703e+0x12c666+-0xc6b6c*-0x1));var __awaiter=this&&this[a30_0x32f7f6(0xcb)]||function(_0x560847,_0x4f33ab,_0x353fbe,_0x182138){function _0x3b6fbf(_0x1038e3){return _0x1038e3 instanceof _0x353fbe?_0x1038e3:new _0x353fbe(function(_0x5c5e4e){_0x5c5e4e(_0x1038e3);});}return new(_0x353fbe||(_0x353fbe=Promise))(function(_0xc0a087,_0x597506){const _0x160572=a30_0x25db;function _0x59cdab(_0xf6f8f2){try{_0x39994a(_0x182138['next'](_0xf6f8f2));}catch(_0x2c8e0a){_0x597506(_0x2c8e0a);}}function _0x19eb03(_0x457ce2){try{_0x39994a(_0x182138['throw'](_0x457ce2));}catch(_0x334d9c){_0x597506(_0x334d9c);}}function _0x39994a(_0x26d314){const _0x2d9665=a30_0x25db;_0x26d314[_0x2d9665(0xee)]?_0xc0a087(_0x26d314[_0x2d9665(0xbf)]):_0x3b6fbf(_0x26d314['value'])[_0x2d9665(0xcd)](_0x59cdab,_0x19eb03);}_0x39994a((_0x182138=_0x182138[_0x160572(0xca)](_0x560847,_0x4f33ab||[]))[_0x160572(0xc1)]());});},__importDefault=this&&this[a30_0x32f7f6(0xdc)+a30_0x32f7f6(0xae)]||function(_0x536ac0){const _0x410b55=a30_0x32f7f6;return _0x536ac0&&_0x536ac0[_0x410b55(0xc3)]?_0x536ac0:{'default':_0x536ac0};};const a30_0x4f9554={};a30_0x4f9554[a30_0x32f7f6(0xbf)]=!![],Object[a30_0x32f7f6(0xe6)+'erty'](exports,a30_0x32f7f6(0xc3),a30_0x4f9554),exports[a30_0x32f7f6(0xc9)]=void(-0x1acd+-0xc16+-0x389*-0xb);const class_validator_1=require(a30_0x32f7f6(0xb9)+a30_0x32f7f6(0xa9)),jsonwebtoken_1=__importDefault(require(a30_0x32f7f6(0xdb)+'en')),env_config_1=require('../../conf'+'ig/env.con'+a30_0x32f7f6(0xc2)),logger_config_1=require(a30_0x32f7f6(0xda)+a30_0x32f7f6(0xd5)+'config'),package_json_1=require(a30_0x32f7f6(0xef)+a30_0x32f7f6(0xce)+'n'),exceptions_1=require('../../exce'+a30_0x32f7f6(0xd1)),whatsapp_module_1=require(a30_0x32f7f6(0xe8)+a30_0x32f7f6(0xbd)),logger=new logger_config_1[(a30_0x32f7f6(0xf0))](a30_0x32f7f6(0xa4));function jwtGuard(_0x541048,_0x2fa4d3,_0x4beb49){return __awaiter(this,void(0x1*0x19c3+0x13d*-0x14+-0xff),void(0x14e1+0x24be+-0x399f),function*(){const _0x3936cc=a30_0x25db,_0x52d210=_0x541048['get'](_0x3936cc(0xe5));if(_0x52d210&&env_config_1[_0x3936cc(0xad)+_0x3936cc(0xb4)][_0x3936cc(0xb5)](_0x3936cc(0xbe)+_0x3936cc(0xc6))[_0x3936cc(0xd3)][_0x3936cc(0xcf)]!==_0x52d210)throw new exceptions_1[(_0x3936cc(0xbc))+(_0x3936cc(0xac))+'n']();if(env_config_1['configServ'+_0x3936cc(0xb4)][_0x3936cc(0xb5)](_0x3936cc(0xbe)+'TION')[_0x3936cc(0xd3)]['KEY']===_0x52d210)return _0x4beb49();if((_0x541048[_0x3936cc(0xed)+'l'][_0x3936cc(0xe9)](_0x3936cc(0xa7)+'create')||_0x541048[_0x3936cc(0xed)+'l']['includes'](_0x3936cc(0xa7)+_0x3936cc(0xb3)+_0x3936cc(0xa6)))&&!_0x52d210)throw new exceptions_1[(_0x3936cc(0xc5))+(_0x3936cc(0xdf))](_0x3936cc(0xd8)+'obal\x20api\x20k'+'ey','The\x20global'+'\x20api\x20key\x20m'+_0x3936cc(0xb1));const _0x247816=env_config_1[_0x3936cc(0xad)+_0x3936cc(0xb4)][_0x3936cc(0xb5)](_0x3936cc(0xbe)+_0x3936cc(0xc6))[_0x3936cc(0xdd)];try{const [_0x2ff2bc,_0x35891f]=_0x541048[_0x3936cc(0xb5)](_0x3936cc(0xe1)+_0x3936cc(0xb2))[_0x3936cc(0xb8)]('\x20');if(_0x2ff2bc['toLowerCas'+'e']()!==_0x3936cc(0xd7))throw new exceptions_1['Unauthoriz'+(_0x3936cc(0xac))+'n']();if(!(-0x19bf+0x48b+0x1534,class_validator_1[_0x3936cc(0xd6)])(_0x35891f))throw new exceptions_1[(_0x3936cc(0xbc))+(_0x3936cc(0xac))+'n']();const _0xb1b45f=_0x541048[_0x3936cc(0xe0)],_0x4fc843=jsonwebtoken_1[_0x3936cc(0xea)][_0x3936cc(0xd4)](_0x35891f,_0x247816[_0x3936cc(0xc7)],{'ignoreExpiration':_0x247816[_0x3936cc(0xbb)]===0xe*0xa5+-0x210d*0x1+0x1807*0x1});if(_0xb1b45f['instanceNa'+'me']!==_0x4fc843['instanceNa'+'me']||package_json_1[_0x3936cc(0xeb)]!==_0x4fc843[_0x3936cc(0xb0)])throw new exceptions_1[(_0x3936cc(0xbc))+(_0x3936cc(0xac))+'n']();return _0x4beb49();}catch(_0x1fda84){logger[_0x3936cc(0xec)](_0x1fda84);throw new exceptions_1[(_0x3936cc(0xbc))+'edExceptio'+'n']();}});}function apikey(_0x5f4d4e,_0x4ea445,_0x5bb753){return __awaiter(this,void(0xbf9*0x1+0x5db+-0x11d4),void(-0x12d5*0x2+-0x1*0xf0d+0x34b7),function*(){const _0xeaab62=a30_0x25db,_0x4eade5=env_config_1[_0xeaab62(0xad)+_0xeaab62(0xb4)][_0xeaab62(0xb5)]('AUTHENTICA'+'TION')[_0xeaab62(0xd3)],_0x19b0f2=_0x5f4d4e[_0xeaab62(0xb5)](_0xeaab62(0xe5));if(_0x4eade5['KEY']===_0x19b0f2)return _0x5bb753();if((_0x5f4d4e['originalUr'+'l'][_0xeaab62(0xe9)]('/instance/'+_0xeaab62(0xc8))||_0x5f4d4e['originalUr'+'l'][_0xeaab62(0xe9)](_0xeaab62(0xa7)+_0xeaab62(0xb3)+_0xeaab62(0xa6)))&&!_0x19b0f2)throw new exceptions_1[(_0xeaab62(0xc5))+'xception']('Missing\x20gl'+_0xeaab62(0xd0)+'ey',_0xeaab62(0xba)+_0xeaab62(0xb7)+_0xeaab62(0xb1));try{const _0x519920=_0x5f4d4e[_0xeaab62(0xe0)],_0x2bc19a=yield whatsapp_module_1[_0xeaab62(0xa8)][_0xeaab62(0xc0)][_0xeaab62(0xc4)](_0x519920[_0xeaab62(0xcc)+'me']);if(_0x2bc19a[_0xeaab62(0xe5)]===_0x19b0f2)return _0x5bb753();}catch(_0x52c315){}throw new exceptions_1['Unauthoriz'+'edExceptio'+'n']();});}const a30_0x27d99d={};a30_0x27d99d[a30_0x32f7f6(0xe3)]=jwtGuard,a30_0x27d99d[a30_0x32f7f6(0xe5)]=apikey,exports['authGuard']=a30_0x27d99d;