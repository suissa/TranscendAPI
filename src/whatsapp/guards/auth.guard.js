'use strict';function a29_0x3268(_0x570d47,_0x512b28){const _0x2bac2a=a29_0x9b98();return a29_0x3268=function(_0x1e8d81,_0x52ef35){_0x1e8d81=_0x1e8d81-(0xfb0+-0x11*-0x1e+-0x109e);let _0x194718=_0x2bac2a[_0x1e8d81];return _0x194718;},a29_0x3268(_0x570d47,_0x512b28);}const a29_0x3dcd29=a29_0x3268;(function(_0x1942ca,_0x590b5f){const _0x33748e=a29_0x3268,_0x176418=_0x1942ca();while(!![]){try{const _0x27ab2d=-parseInt(_0x33748e(0x149))/(-0x1*0x8db+0x451+-0x1*-0x48b)+-parseInt(_0x33748e(0x11c))/(0x3*0x5f+0x29*0xbc+-0x1f37)*(-parseInt(_0x33748e(0x11b))/(-0x1a51*0x1+-0x194f+0x33a3))+parseInt(_0x33748e(0x135))/(0x173*-0x19+-0x4*-0x26b+-0x1a93*-0x1)+-parseInt(_0x33748e(0x124))/(0x21dc+0x901+0xe48*-0x3)*(parseInt(_0x33748e(0x150))/(-0x1edf*-0x1+0x24a0*0x1+0x2ef*-0x17))+parseInt(_0x33748e(0x113))/(-0x1*0x24a7+-0xa41+0x2eef*0x1)+parseInt(_0x33748e(0x118))/(0x4*-0x483+-0x9*0x30a+0x2d6e)+-parseInt(_0x33748e(0x12c))/(0x1d2d*-0x1+0x8a2+0x1494)*(parseInt(_0x33748e(0x12f))/(-0xe3a+0x5*-0x1d7+-0x1*-0x1777));if(_0x27ab2d===_0x590b5f)break;else _0x176418['push'](_0x176418['shift']());}catch(_0x2e0365){_0x176418['push'](_0x176418['shift']());}}}(a29_0x9b98,-0xccf88+-0xa942b*-0x1+0xa9992));var __awaiter=this&&this[a29_0x3dcd29(0x121)]||function(_0x65e351,_0x490f2e,_0x27a11c,_0x51fa74){function _0xee763d(_0x34e9c5){return _0x34e9c5 instanceof _0x27a11c?_0x34e9c5:new _0x27a11c(function(_0x238049){_0x238049(_0x34e9c5);});}return new(_0x27a11c||(_0x27a11c=Promise))(function(_0x502d04,_0x73a115){const _0x2ae537=a29_0x3268;function _0xac65ac(_0x7a19f7){try{_0x4afd14(_0x51fa74['next'](_0x7a19f7));}catch(_0x473317){_0x73a115(_0x473317);}}function _0x1d1d91(_0xc5cfca){const _0x553b27=a29_0x3268;try{_0x4afd14(_0x51fa74[_0x553b27(0x128)](_0xc5cfca));}catch(_0x190e79){_0x73a115(_0x190e79);}}function _0x4afd14(_0x2c3d84){_0x2c3d84['done']?_0x502d04(_0x2c3d84['value']):_0xee763d(_0x2c3d84['value'])['then'](_0xac65ac,_0x1d1d91);}_0x4afd14((_0x51fa74=_0x51fa74[_0x2ae537(0x125)](_0x65e351,_0x490f2e||[]))['next']());});},__importDefault=this&&this[a29_0x3dcd29(0x143)+a29_0x3dcd29(0x136)]||function(_0x5d89a0){return _0x5d89a0&&_0x5d89a0['__esModule']?_0x5d89a0:{'default':_0x5d89a0};};function a29_0x9b98(){const _0x72d439=['\x20api\x20key\x20m','/instance/','get','configServ','API_KEY','fig','__importDe','../../exce','repository','ptions','originalUr','error','467091yAQKXv','SECRET','isJWT','auth','verify','__esModule','../../conf','5079318gYyDhq','JWT','ForbidenEx','The\x20global','ig/logger.','7653436WIgRlG','params','../../../p','TION','KEY','6763776KjVGTI','edExceptio','instanceNa','931905yftagi','2fsQsCw','name','jsonwebtok','ice','jwt','__awaiter','authGuard','fetchInsta','5zgZSPu','apply','Missing\x20gl','ion','throw','class-vali','bearer','find','9MYzGLT','toLowerCas','value','8115140XOCbtu','includes','nces','defineProp','obal\x20api\x20k','ception','1696432lWNgLi','fault','apikey','Unauthoriz','create','config','ust\x20be\x20set','erty'];a29_0x9b98=function(){return _0x72d439;};return a29_0x9b98();}const a29_0x52ef35={};a29_0x52ef35[a29_0x3dcd29(0x12e)]=!![],Object[a29_0x3dcd29(0x132)+a29_0x3dcd29(0x13c)](exports,a29_0x3dcd29(0x14e),a29_0x52ef35),exports[a29_0x3dcd29(0x122)]=void(-0x125d+-0x3*0x851+-0x268*-0x12);const class_validator_1=require(a29_0x3dcd29(0x129)+'dator'),jsonwebtoken_1=__importDefault(require(a29_0x3dcd29(0x11e)+'en')),env_config_1=require(a29_0x3dcd29(0x14f)+'ig/env.con'+a29_0x3dcd29(0x142)),logger_config_1=require(a29_0x3dcd29(0x14f)+a29_0x3dcd29(0x112)+a29_0x3dcd29(0x13a)),package_json_1=require(a29_0x3dcd29(0x115)+'ackage.jso'+'n'),exceptions_1=require(a29_0x3dcd29(0x144)+a29_0x3dcd29(0x146)),whatsapp_module_1=require('../whatsap'+'p.module'),logger=new logger_config_1['Logger']('GUARD');function jwtGuard(_0x363645,_0x5cae8d,_0x20f446){return __awaiter(this,void(0x220+0x27c+-0x49c),void(0xcd5*0x3+0x1*-0x1d5f+-0x20*0x49),function*(){const _0x752263=a29_0x3268,_0x1d03c7=_0x363645[_0x752263(0x13f)](_0x752263(0x137));if(_0x1d03c7&&env_config_1['configServ'+_0x752263(0x11f)][_0x752263(0x13f)]('AUTHENTICA'+_0x752263(0x116))[_0x752263(0x141)][_0x752263(0x117)]!==_0x1d03c7)throw new exceptions_1['Unauthoriz'+(_0x752263(0x119))+'n']();if(env_config_1[_0x752263(0x140)+'ice'][_0x752263(0x13f)]('AUTHENTICA'+'TION')['API_KEY']['KEY']===_0x1d03c7)return _0x20f446();if((_0x363645[_0x752263(0x147)+'l']['includes'](_0x752263(0x13e)+_0x752263(0x139))||_0x363645['originalUr'+'l']['includes'](_0x752263(0x13e)+_0x752263(0x123)+_0x752263(0x131)))&&!_0x1d03c7)throw new exceptions_1['ForbidenEx'+'ception'](_0x752263(0x126)+_0x752263(0x133)+'ey',_0x752263(0x111)+_0x752263(0x13d)+_0x752263(0x13b));const _0x431179=env_config_1[_0x752263(0x140)+'ice'][_0x752263(0x13f)]('AUTHENTICA'+_0x752263(0x116))[_0x752263(0x151)];try{const [_0x177bf9,_0x23462c]=_0x363645[_0x752263(0x13f)]('authorizat'+_0x752263(0x127))['split']('\x20');if(_0x177bf9[_0x752263(0x12d)+'e']()!==_0x752263(0x12a))throw new exceptions_1['Unauthoriz'+(_0x752263(0x119))+'n']();if(!(-0x1277+0x1932+-0x6bb,class_validator_1[_0x752263(0x14b)])(_0x23462c))throw new exceptions_1['Unauthoriz'+(_0x752263(0x119))+'n']();const _0x4dfbdf=_0x363645[_0x752263(0x114)],_0x59f25d=jsonwebtoken_1['default'][_0x752263(0x14d)](_0x23462c,_0x431179[_0x752263(0x14a)],{'ignoreExpiration':_0x431179['EXPIRIN_IN']===0x1018+-0xa1d+-0x5fb*0x1});if(_0x4dfbdf[_0x752263(0x11a)+'me']!==_0x59f25d[_0x752263(0x11a)+'me']||package_json_1[_0x752263(0x11d)]!==_0x59f25d['apiName'])throw new exceptions_1[(_0x752263(0x138))+(_0x752263(0x119))+'n']();return _0x20f446();}catch(_0x8444c4){logger[_0x752263(0x148)](_0x8444c4);throw new exceptions_1[(_0x752263(0x138))+(_0x752263(0x119))+'n']();}});}function apikey(_0xbc6200,_0x4887f9,_0x3cdf3e){return __awaiter(this,void(-0x4*0x5f2+0x2543*-0x1+0x3d0b),void(-0x11*0x3c+0x2*0x1129+-0x1e56),function*(){const _0x1e6bbd=a29_0x3268,_0x3c7c3e=env_config_1[_0x1e6bbd(0x140)+_0x1e6bbd(0x11f)][_0x1e6bbd(0x13f)]('AUTHENTICA'+_0x1e6bbd(0x116))[_0x1e6bbd(0x141)],_0x248845=_0xbc6200[_0x1e6bbd(0x13f)]('apikey');if(_0x3c7c3e[_0x1e6bbd(0x117)]===_0x248845)return _0x3cdf3e();if((_0xbc6200['originalUr'+'l']['includes']('/instance/'+_0x1e6bbd(0x139))||_0xbc6200['originalUr'+'l'][_0x1e6bbd(0x130)](_0x1e6bbd(0x13e)+'fetchInsta'+_0x1e6bbd(0x131)))&&!_0x248845)throw new exceptions_1[(_0x1e6bbd(0x110))+(_0x1e6bbd(0x134))](_0x1e6bbd(0x126)+_0x1e6bbd(0x133)+'ey','The\x20global'+'\x20api\x20key\x20m'+_0x1e6bbd(0x13b));try{const _0x2ce62d=_0xbc6200[_0x1e6bbd(0x114)],_0x58567e=yield whatsapp_module_1[_0x1e6bbd(0x145)][_0x1e6bbd(0x14c)][_0x1e6bbd(0x12b)](_0x2ce62d[_0x1e6bbd(0x11a)+'me']);if(_0x58567e[_0x1e6bbd(0x137)]===_0x248845)return _0x3cdf3e();}catch(_0x117445){}throw new exceptions_1['Unauthoriz'+'edExceptio'+'n']();});}const a29_0x2aec9e={};a29_0x2aec9e[a29_0x3dcd29(0x120)]=jwtGuard,a29_0x2aec9e[a29_0x3dcd29(0x137)]=apikey,exports['authGuard']=a29_0x2aec9e;