'use strict';const a29_0x31655e=a29_0x1beb;function a29_0x1beb(_0x5699b3,_0x23adec){const _0x3ae58b=a29_0x2cbf();return a29_0x1beb=function(_0x5d1f14,_0x16ee92){_0x5d1f14=_0x5d1f14-(0x1c28+0x1ec1+0x62*-0x97);let _0x31a8f4=_0x3ae58b[_0x5d1f14];return _0x31a8f4;},a29_0x1beb(_0x5699b3,_0x23adec);}function a29_0x2cbf(){const _0x87fa14=['apply','isJWT','The\x20global','../whatsap','Missing\x20gl','40155973rzGUpq','Logger','AUTHENTICA','name','162dKPKMP','then','default','obal\x20api\x20k','GUARD','create','edExceptio','originalUr','includes','repository','find','error','ig/logger.','352kDnhtR','../../conf','9263646RkgHGC','1jwunKd','auth','__awaiter','ion','2253595ZsoJYL','JWT','dator','next','ptions','ception','__importDe','done','/instance/','value','jsonwebtok','params','defineProp','authGuard','get','fig','Unauthoriz','28023KCjQlG','__esModule','EXPIRIN_IN','../../exce','toLowerCas','KEY','TION','nces','throw','verify','apikey','authorizat','erty','apiName','API_KEY','13854280oEVYZz','ice','configServ','ForbidenEx','3052060ICFBQZ','653856lxtEXt','jwt','ackage.jso','instanceNa','../../../p','6EZLxvQ','fetchInsta','split','\x20api\x20key\x20m'];a29_0x2cbf=function(){return _0x87fa14;};return a29_0x2cbf();}(function(_0x476729,_0x4a27b9){const _0x5d704f=a29_0x1beb,_0x42611e=_0x476729();while(!![]){try{const _0x436304=parseInt(_0x5d704f(0x13d))/(-0x30*0x1b+-0x1*-0x13a2+0x4db*-0x3)*(parseInt(_0x5d704f(0x165))/(-0x231*0xf+-0x64a+-0x25*-0x10f))+-parseInt(_0x5d704f(0x152))/(-0xd22+-0xf5c+0x1c81)*(parseInt(_0x5d704f(0x13a))/(-0x19b*0x15+-0x1115+0x32d0))+parseInt(_0x5d704f(0x141))/(-0x3*0xb11+-0x4e+0x2186)*(-parseInt(_0x5d704f(0x120))/(0x32*-0xbc+-0xd2*0x28+0x22c7*0x2))+parseInt(_0x5d704f(0x13c))/(-0xf*0x9e+0x133f*-0x2+0x2fc7)+-parseInt(_0x5d704f(0x11b))/(-0x2c6*-0xb+0x1db8+-0x3c32)*(-parseInt(_0x5d704f(0x12d))/(-0x20e4+0x22ad*-0x1+0x439a))+parseInt(_0x5d704f(0x161))/(0x1011+-0x1*0x1e32+0x117*0xd)+-parseInt(_0x5d704f(0x129))/(-0x1*-0x2677+0x1e22+-0x448e);if(_0x436304===_0x4a27b9)break;else _0x42611e['push'](_0x42611e['shift']());}catch(_0x21f0ab){_0x42611e['push'](_0x42611e['shift']());}}}(a29_0x2cbf,0x14ab80+0x2c1f1+-0xb7bdb));var __awaiter=this&&this[a29_0x31655e(0x13f)]||function(_0x488798,_0x2cff45,_0x2b39ed,_0x538d3c){function _0x1c9cae(_0x8133fd){return _0x8133fd instanceof _0x2b39ed?_0x8133fd:new _0x2b39ed(function(_0xdc843){_0xdc843(_0x8133fd);});}return new(_0x2b39ed||(_0x2b39ed=Promise))(function(_0x38f665,_0x282b2d){const _0x3fb8e8=a29_0x1beb;function _0x2c591b(_0x11dda9){const _0x15e955=a29_0x1beb;try{_0x2d666d(_0x538d3c[_0x15e955(0x144)](_0x11dda9));}catch(_0x3521f2){_0x282b2d(_0x3521f2);}}function _0xb2679f(_0x356c35){const _0x226654=a29_0x1beb;try{_0x2d666d(_0x538d3c[_0x226654(0x15a)](_0x356c35));}catch(_0x51b3af){_0x282b2d(_0x51b3af);}}function _0x2d666d(_0x3037a8){const _0x3c6b4e=a29_0x1beb;_0x3037a8[_0x3c6b4e(0x148)]?_0x38f665(_0x3037a8[_0x3c6b4e(0x14a)]):_0x1c9cae(_0x3037a8[_0x3c6b4e(0x14a)])[_0x3c6b4e(0x12e)](_0x2c591b,_0xb2679f);}_0x2d666d((_0x538d3c=_0x538d3c[_0x3fb8e8(0x124)](_0x488798,_0x2cff45||[]))[_0x3fb8e8(0x144)]());});},__importDefault=this&&this[a29_0x31655e(0x147)+'fault']||function(_0x25a5ba){return _0x25a5ba&&_0x25a5ba['__esModule']?_0x25a5ba:{'default':_0x25a5ba};};const a29_0x16ee92={};a29_0x16ee92['value']=!![],Object[a29_0x31655e(0x14d)+a29_0x31655e(0x15e)](exports,a29_0x31655e(0x153),a29_0x16ee92),exports['authGuard']=void(-0x17*-0x12+0x1b3f+-0x1cdd);const class_validator_1=require('class-vali'+a29_0x31655e(0x143)),jsonwebtoken_1=__importDefault(require(a29_0x31655e(0x14b)+'en')),env_config_1=require(a29_0x31655e(0x13b)+'ig/env.con'+a29_0x31655e(0x150)),logger_config_1=require('../../conf'+a29_0x31655e(0x139)+'config'),package_json_1=require(a29_0x31655e(0x11f)+a29_0x31655e(0x11d)+'n'),exceptions_1=require(a29_0x31655e(0x155)+a29_0x31655e(0x145)),whatsapp_module_1=require(a29_0x31655e(0x127)+'p.module'),logger=new logger_config_1[(a29_0x31655e(0x12a))](a29_0x31655e(0x131));function jwtGuard(_0x2f9004,_0x5467e4,_0x124877){return __awaiter(this,void(0x963+0x47*0x3b+-0xce0*0x2),void(-0x197*0x3+-0xa48+0xf0d),function*(){const _0x3e3363=a29_0x1beb,_0x4a160a=_0x2f9004['get']('apikey');if(_0x4a160a&&env_config_1['configServ'+_0x3e3363(0x162)][_0x3e3363(0x14f)](_0x3e3363(0x12b)+'TION')['API_KEY'][_0x3e3363(0x157)]!==_0x4a160a)throw new exceptions_1[(_0x3e3363(0x151))+(_0x3e3363(0x133))+'n']();if(env_config_1[_0x3e3363(0x163)+'ice'][_0x3e3363(0x14f)](_0x3e3363(0x12b)+'TION')[_0x3e3363(0x160)][_0x3e3363(0x157)]===_0x4a160a)return _0x124877();if((_0x2f9004['originalUr'+'l']['includes']('/instance/'+_0x3e3363(0x132))||_0x2f9004[_0x3e3363(0x134)+'l'][_0x3e3363(0x135)](_0x3e3363(0x149)+_0x3e3363(0x121)+_0x3e3363(0x159)))&&!_0x4a160a)throw new exceptions_1[(_0x3e3363(0x164))+(_0x3e3363(0x146))]('Missing\x20gl'+_0x3e3363(0x130)+'ey',_0x3e3363(0x126)+_0x3e3363(0x123)+'ust\x20be\x20set');const _0x537a25=env_config_1[_0x3e3363(0x163)+_0x3e3363(0x162)][_0x3e3363(0x14f)](_0x3e3363(0x12b)+_0x3e3363(0x158))[_0x3e3363(0x142)];try{const [_0x26e57c,_0x53dc1b]=_0x2f9004[_0x3e3363(0x14f)](_0x3e3363(0x15d)+_0x3e3363(0x140))[_0x3e3363(0x122)]('\x20');if(_0x26e57c[_0x3e3363(0x156)+'e']()!=='bearer')throw new exceptions_1[(_0x3e3363(0x151))+'edExceptio'+'n']();if(!(-0x18f+-0x1719+0x315*0x8,class_validator_1[_0x3e3363(0x125)])(_0x53dc1b))throw new exceptions_1[(_0x3e3363(0x151))+(_0x3e3363(0x133))+'n']();const _0x2243cb=_0x2f9004[_0x3e3363(0x14c)],_0x3848fc=jsonwebtoken_1[_0x3e3363(0x12f)][_0x3e3363(0x15b)](_0x53dc1b,_0x537a25['SECRET'],{'ignoreExpiration':_0x537a25[_0x3e3363(0x154)]===0x63e+-0x1*0x1501+0xec3});if(_0x2243cb[_0x3e3363(0x11e)+'me']!==_0x3848fc[_0x3e3363(0x11e)+'me']||package_json_1[_0x3e3363(0x12c)]!==_0x3848fc[_0x3e3363(0x15f)])throw new exceptions_1[(_0x3e3363(0x151))+(_0x3e3363(0x133))+'n']();return _0x124877();}catch(_0x449d90){logger[_0x3e3363(0x138)](_0x449d90);throw new exceptions_1[(_0x3e3363(0x151))+(_0x3e3363(0x133))+'n']();}});}function apikey(_0x158e5f,_0x1544d4,_0x74659f){return __awaiter(this,void(0x14b*0x13+0x1*-0x1b37+0x2a6),void(-0x3a5+-0xc5*0x13+-0x29c*-0x7),function*(){const _0x158055=a29_0x1beb,_0x58254b=env_config_1[_0x158055(0x163)+_0x158055(0x162)][_0x158055(0x14f)](_0x158055(0x12b)+_0x158055(0x158))[_0x158055(0x160)],_0x59794b=_0x158e5f[_0x158055(0x14f)](_0x158055(0x15c));if(_0x58254b['KEY']===_0x59794b)return _0x74659f();if((_0x158e5f[_0x158055(0x134)+'l'][_0x158055(0x135)]('/instance/'+'create')||_0x158e5f[_0x158055(0x134)+'l']['includes'](_0x158055(0x149)+'fetchInsta'+_0x158055(0x159)))&&!_0x59794b)throw new exceptions_1[(_0x158055(0x164))+(_0x158055(0x146))](_0x158055(0x128)+_0x158055(0x130)+'ey','The\x20global'+'\x20api\x20key\x20m'+'ust\x20be\x20set');try{const _0x371624=_0x158e5f[_0x158055(0x14c)],_0x5486c8=yield whatsapp_module_1[_0x158055(0x136)][_0x158055(0x13e)][_0x158055(0x137)](_0x371624[_0x158055(0x11e)+'me']);if(_0x5486c8[_0x158055(0x15c)]===_0x59794b)return _0x74659f();}catch(_0x351705){}throw new exceptions_1[(_0x158055(0x151))+(_0x158055(0x133))+'n']();});}const a29_0x53948d={};a29_0x53948d[a29_0x31655e(0x11c)]=jwtGuard,a29_0x53948d[a29_0x31655e(0x15c)]=apikey,exports[a29_0x31655e(0x14e)]=a29_0x53948d;