'use strict';function a30_0xcaf1(_0xbc3d50,_0x52b5a8){const _0x3428b7=a30_0x4df2();return a30_0xcaf1=function(_0x105a36,_0x413e73){_0x105a36=_0x105a36-(-0x34b*0x3+0x1c2f+-0x109e);let _0x3f6080=_0x3428b7[_0x105a36];return _0x3f6080;},a30_0xcaf1(_0xbc3d50,_0x52b5a8);}const a30_0x464dde=a30_0xcaf1;function a30_0x4df2(){const _0x201507=['then','/instance/','includes','find','jsonwebtok','610440TkswfO','default','repository','ion','configServ','ackage.jso','ptions','3058800EqvNMj','ust\x20be\x20set','next','KEY','SECRET','7FNjWnf','API_KEY','45sMqikJ','22QJhsiH','error','TION','1340502AqhPXA','EXPIRIN_IN','ice','done','name','verify','jwt','fetchInsta','1597701uLYfEz','../../exce','ig/env.con','__esModule','ForbiddenE','erty','throw','4075090TytqnP','nces','JWT','1532224ADKpsI','616OhOznx','toLowerCas','fig','defineProp','xception','create','AUTHENTICA','class-vali','apply','get','../../conf','config','obal\x20api\x20k','value','originalUr','edExceptio','dator','../../../p','Logger','split','Unauthoriz','authGuard','instanceNa','authorizat','61579FFadwh','params','apikey','ig/logger.'];a30_0x4df2=function(){return _0x201507;};return a30_0x4df2();}(function(_0x36416b,_0xfea1ea){const _0x1b4ff3=a30_0xcaf1,_0x1c91c9=_0x36416b();while(!![]){try{const _0x4d206a=parseInt(_0x1b4ff3(0x1df))/(0x9a0+-0xa72+0xd3*0x1)*(-parseInt(_0x1b4ff3(0x1b1))/(0x8f9*0x2+-0xd21+-0x4cf))+parseInt(_0x1b4ff3(0x1bc))/(-0x8e*-0x35+-0x1efe*-0x1+-0x3c61)+-parseInt(_0x1b4ff3(0x1ef))/(-0x1744+-0x1605*0x1+0x2d4d)+-parseInt(_0x1b4ff3(0x1c3))/(0x5*-0xce+0x1465*0x1+-0xe*0x12b)+parseInt(_0x1b4ff3(0x1b4))/(0x1fbf+0x934+0x28ed*-0x1)*(-parseInt(_0x1b4ff3(0x1f4))/(-0x112f+-0x29*0xe4+-0x1*-0x35ba))+-parseInt(_0x1b4ff3(0x1c6))/(0x5*-0x799+0x917*-0x1+0x2f1c)*(parseInt(_0x1b4ff3(0x1b0))/(0x74*-0x32+0x85e+0x13*0xc1))+parseInt(_0x1b4ff3(0x1e8))/(-0x67f+-0x12f7+0x1980)*(parseInt(_0x1b4ff3(0x1c7))/(-0x2619+0x4*0x28d+0x1bf0));if(_0x4d206a===_0xfea1ea)break;else _0x1c91c9['push'](_0x1c91c9['shift']());}catch(_0x33f6d8){_0x1c91c9['push'](_0x1c91c9['shift']());}}}(a30_0x4df2,0xa98f+-0x1*-0xe35a+0xe*0x72c1));var __awaiter=this&&this['__awaiter']||function(_0x544db0,_0x4adde0,_0x772778,_0x2aceac){function _0x1b4adc(_0x10f656){return _0x10f656 instanceof _0x772778?_0x10f656:new _0x772778(function(_0x57404b){_0x57404b(_0x10f656);});}return new(_0x772778||(_0x772778=Promise))(function(_0x4f42d9,_0x80e854){const _0x5572ba=a30_0xcaf1;function _0x44ec05(_0x57e1f0){const _0x56db49=a30_0xcaf1;try{_0xd30d0f(_0x2aceac[_0x56db49(0x1f1)](_0x57e1f0));}catch(_0x4bf3b3){_0x80e854(_0x4bf3b3);}}function _0x21e117(_0x3ffe73){const _0x492ebb=a30_0xcaf1;try{_0xd30d0f(_0x2aceac[_0x492ebb(0x1c2)](_0x3ffe73));}catch(_0x31848c){_0x80e854(_0x31848c);}}function _0xd30d0f(_0x4150b3){const _0x1726f2=a30_0xcaf1;_0x4150b3[_0x1726f2(0x1b7)]?_0x4f42d9(_0x4150b3[_0x1726f2(0x1d4)]):_0x1b4adc(_0x4150b3[_0x1726f2(0x1d4)])[_0x1726f2(0x1e3)](_0x44ec05,_0x21e117);}_0xd30d0f((_0x2aceac=_0x2aceac[_0x5572ba(0x1cf)](_0x544db0,_0x4adde0||[]))['next']());});},__importDefault=this&&this['__importDe'+'fault']||function(_0x45d1e2){return _0x45d1e2&&_0x45d1e2['__esModule']?_0x45d1e2:{'default':_0x45d1e2};};const a30_0x413e73={};a30_0x413e73['value']=!![],Object[a30_0x464dde(0x1ca)+a30_0x464dde(0x1c1)](exports,a30_0x464dde(0x1bf),a30_0x413e73),exports[a30_0x464dde(0x1dc)]=void(0xcdb+0x1*-0x1adf+0xe04);const class_validator_1=require(a30_0x464dde(0x1ce)+a30_0x464dde(0x1d7)),jsonwebtoken_1=__importDefault(require(a30_0x464dde(0x1e7)+'en')),env_config_1=require('../../conf'+a30_0x464dde(0x1be)+a30_0x464dde(0x1c9)),logger_config_1=require(a30_0x464dde(0x1d1)+a30_0x464dde(0x1e2)+a30_0x464dde(0x1d2)),package_json_1=require(a30_0x464dde(0x1d8)+a30_0x464dde(0x1ed)+'n'),exceptions_1=require(a30_0x464dde(0x1bd)+a30_0x464dde(0x1ee)),whatsapp_module_1=require('../whatsap'+'p.module'),logger=new logger_config_1[(a30_0x464dde(0x1d9))]('GUARD');function jwtGuard(_0x3c47c1,_0x3207dd,_0x328794){return __awaiter(this,void(-0x1*0x20a7+-0x1f3*0x7+0x2e4c),void(0x2258+-0x117a+-0x10de),function*(){const _0x1de59d=a30_0xcaf1,_0x4acc5c=_0x3c47c1['get'](_0x1de59d(0x1e1));if(_0x4acc5c&&env_config_1[_0x1de59d(0x1ec)+_0x1de59d(0x1b6)][_0x1de59d(0x1d0)](_0x1de59d(0x1cd)+_0x1de59d(0x1b3))[_0x1de59d(0x1f5)][_0x1de59d(0x1f2)]!==_0x4acc5c)throw new exceptions_1[(_0x1de59d(0x1db))+(_0x1de59d(0x1d6))+'n']();if(env_config_1[_0x1de59d(0x1ec)+'ice'][_0x1de59d(0x1d0)](_0x1de59d(0x1cd)+_0x1de59d(0x1b3))[_0x1de59d(0x1f5)]['KEY']===_0x4acc5c)return _0x328794();if((_0x3c47c1[_0x1de59d(0x1d5)+'l']['includes'](_0x1de59d(0x1e4)+_0x1de59d(0x1cc))||_0x3c47c1['originalUr'+'l'][_0x1de59d(0x1e5)]('/instance/'+_0x1de59d(0x1bb)+_0x1de59d(0x1c4)))&&!_0x4acc5c)throw new exceptions_1[(_0x1de59d(0x1c0))+(_0x1de59d(0x1cb))]('Missing\x20gl'+_0x1de59d(0x1d3)+'ey','The\x20global'+'\x20api\x20key\x20m'+_0x1de59d(0x1f0));const _0xef3b71=env_config_1['configServ'+_0x1de59d(0x1b6)][_0x1de59d(0x1d0)](_0x1de59d(0x1cd)+_0x1de59d(0x1b3))[_0x1de59d(0x1c5)];try{const [_0x30b1d1,_0x4e1971]=_0x3c47c1['get'](_0x1de59d(0x1de)+_0x1de59d(0x1eb))[_0x1de59d(0x1da)]('\x20');if(_0x30b1d1[_0x1de59d(0x1c8)+'e']()!=='bearer')throw new exceptions_1[(_0x1de59d(0x1db))+(_0x1de59d(0x1d6))+'n']();if(!(0x1b76+0x1*-0xb1d+0x1f*-0x87,class_validator_1['isJWT'])(_0x4e1971))throw new exceptions_1[(_0x1de59d(0x1db))+(_0x1de59d(0x1d6))+'n']();const _0x3c135e=_0x3c47c1[_0x1de59d(0x1e0)],_0x7f5524=jsonwebtoken_1[_0x1de59d(0x1e9)][_0x1de59d(0x1b9)](_0x4e1971,_0xef3b71[_0x1de59d(0x1f3)],{'ignoreExpiration':_0xef3b71[_0x1de59d(0x1b5)]===-0x85d+0xa6f+-0xa*0x35});if(_0x3c135e[_0x1de59d(0x1dd)+'me']!==_0x7f5524['instanceNa'+'me']||package_json_1[_0x1de59d(0x1b8)]!==_0x7f5524['apiName'])throw new exceptions_1['Unauthoriz'+(_0x1de59d(0x1d6))+'n']();return _0x328794();}catch(_0x10d1fe){logger[_0x1de59d(0x1b2)](_0x10d1fe);throw new exceptions_1[(_0x1de59d(0x1db))+'edExceptio'+'n']();}});}function apikey(_0x564a7b,_0x4baf06,_0x4e78a0){return __awaiter(this,void(-0xa*0x11b+0xe0d*-0x1+0x191b),void(-0x1*-0x983+-0x1ba5+0x1222),function*(){const _0x2502ad=a30_0xcaf1,_0x5761c5=env_config_1['configServ'+_0x2502ad(0x1b6)][_0x2502ad(0x1d0)](_0x2502ad(0x1cd)+_0x2502ad(0x1b3))[_0x2502ad(0x1f5)],_0x56bf60=_0x564a7b[_0x2502ad(0x1d0)](_0x2502ad(0x1e1));if(_0x5761c5['KEY']===_0x56bf60)return _0x4e78a0();if((_0x564a7b['originalUr'+'l'][_0x2502ad(0x1e5)]('/instance/'+'create')||_0x564a7b[_0x2502ad(0x1d5)+'l'][_0x2502ad(0x1e5)]('/instance/'+_0x2502ad(0x1bb)+'nces'))&&!_0x56bf60)throw new exceptions_1[(_0x2502ad(0x1c0))+(_0x2502ad(0x1cb))]('Missing\x20gl'+_0x2502ad(0x1d3)+'ey','The\x20global'+'\x20api\x20key\x20m'+_0x2502ad(0x1f0));try{const _0x2b86cd=_0x564a7b[_0x2502ad(0x1e0)],_0xbf8d70=yield whatsapp_module_1[_0x2502ad(0x1ea)]['auth'][_0x2502ad(0x1e6)](_0x2b86cd[_0x2502ad(0x1dd)+'me']);if(_0xbf8d70[_0x2502ad(0x1e1)]===_0x56bf60)return _0x4e78a0();}catch(_0x3528ef){}throw new exceptions_1['Unauthoriz'+(_0x2502ad(0x1d6))+'n']();});}const a30_0xef4631={};a30_0xef4631[a30_0x464dde(0x1ba)]=jwtGuard,a30_0xef4631[a30_0x464dde(0x1e1)]=apikey,exports[a30_0x464dde(0x1dc)]=a30_0xef4631;