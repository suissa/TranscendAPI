'use strict';const a30_0x580458=a30_0x2be3;(function(_0x1eaa7b,_0x340d73){const _0x58b541=a30_0x2be3,_0x2bbd37=_0x1eaa7b();while(!![]){try{const _0x2bd1f9=-parseInt(_0x58b541(0xef))/(-0xc43*0x2+0x1570+0x317)*(-parseInt(_0x58b541(0xee))/(0x6*0x55d+-0x2*0xe76+-0x340))+-parseInt(_0x58b541(0x123))/(0x107e*0x1+-0x13*0x97+0x1b*-0x32)+-parseInt(_0x58b541(0x126))/(-0x1ac*-0x7+-0x2f*0x72+0x93e)+parseInt(_0x58b541(0xf0))/(0x2c3*-0x1+-0xf8b*0x2+0xf*0x242)+parseInt(_0x58b541(0x119))/(-0x15be+-0xad2*-0x2+-0x20*-0x1)*(-parseInt(_0x58b541(0x127))/(0x11*-0xed+0x5*-0x137+0x15d7))+-parseInt(_0x58b541(0x128))/(0x1*0x611+0xf95*0x1+-0x159e)*(-parseInt(_0x58b541(0xe5))/(0x2*-0x33b+0x9b9+0x2*-0x19d))+-parseInt(_0x58b541(0x10b))/(-0x24d2+-0x1f*0x17+0x27a5)*(-parseInt(_0x58b541(0xfd))/(-0x168e+0xe0c+0x88d));if(_0x2bd1f9===_0x340d73)break;else _0x2bbd37['push'](_0x2bbd37['shift']());}catch(_0x1392fb){_0x2bbd37['push'](_0x2bbd37['shift']());}}}(a30_0x4e46,-0x2e260+0x3e19*-0x3+-0x35*-0x2200));function a30_0x2be3(_0x2abda3,_0x47faef){const _0x2cadee=a30_0x4e46();return a30_0x2be3=function(_0x105a58,_0x3e8183){_0x105a58=_0x105a58-(-0x1*0x1aa1+0x1bfd+-0x77);let _0x529262=_0x2cadee[_0x105a58];return _0x529262;},a30_0x2be3(_0x2abda3,_0x47faef);}function a30_0x4e46(){const _0x39f8ce=['GUARD','ig/logger.','then','create','default','error','verify','1626258WpYjNB','p.module','isJWT','jwt','SECRET','next','class-vali','apikey','\x20api\x20key\x20m','apply','919794STNLxo','ice','split','1764996sSaKZC','7bdZqKU','18376dUevSh','includes','auth','Missing\x20gl','jsonwebtok','erty','1089mlRfEi','ForbiddenE','xception','TION','/instance/','value','nces','fig','Logger','634398wqCxfp','1VzPYyC','1759820pTQQHT','ust\x20be\x20set','done','The\x20global','defineProp','API_KEY','edExceptio','../../exce','EXPIRIN_IN','fault','KEY','../../conf','originalUr','143noveWB','bearer','repository','params','ptions','__awaiter','obal\x20api\x20k','get','ion','__esModule','find','authorizat','configServ','fetchInsta','227990yRcOCN','AUTHENTICA','instanceNa','authGuard','__importDe','Unauthoriz','throw'];a30_0x4e46=function(){return _0x39f8ce;};return a30_0x4e46();}var __awaiter=this&&this[a30_0x580458(0x102)]||function(_0x4401b6,_0x5b0233,_0x377c9f,_0x17cc77){function _0x54fc10(_0x340ddb){return _0x340ddb instanceof _0x377c9f?_0x340ddb:new _0x377c9f(function(_0x35a030){_0x35a030(_0x340ddb);});}return new(_0x377c9f||(_0x377c9f=Promise))(function(_0x53fcb2,_0x592457){const _0x4c1feb=a30_0x2be3;function _0xd5f3e9(_0x2d7d20){const _0xc63270=a30_0x2be3;try{_0x143d27(_0x17cc77[_0xc63270(0x11e)](_0x2d7d20));}catch(_0x26ff9e){_0x592457(_0x26ff9e);}}function _0x47ccf9(_0x4250ad){const _0x44ad49=a30_0x2be3;try{_0x143d27(_0x17cc77[_0x44ad49(0x111)](_0x4250ad));}catch(_0x3653a9){_0x592457(_0x3653a9);}}function _0x143d27(_0x20e758){const _0x575be9=a30_0x2be3;_0x20e758[_0x575be9(0xf2)]?_0x53fcb2(_0x20e758[_0x575be9(0xea)]):_0x54fc10(_0x20e758[_0x575be9(0xea)])[_0x575be9(0x114)](_0xd5f3e9,_0x47ccf9);}_0x143d27((_0x17cc77=_0x17cc77[_0x4c1feb(0x122)](_0x4401b6,_0x5b0233||[]))['next']());});},__importDefault=this&&this[a30_0x580458(0x10f)+a30_0x580458(0xf9)]||function(_0x298478){const _0x2c623e=a30_0x580458;return _0x298478&&_0x298478[_0x2c623e(0x106)]?_0x298478:{'default':_0x298478};};const a30_0x3e8183={};a30_0x3e8183[a30_0x580458(0xea)]=!![],Object[a30_0x580458(0xf4)+a30_0x580458(0x12d)](exports,'__esModule',a30_0x3e8183),exports['authGuard']=void(0x10f*0x1b+0x101d+-0x2*0x1659);const class_validator_1=require(a30_0x580458(0x11f)+'dator'),jsonwebtoken_1=__importDefault(require(a30_0x580458(0x12c)+'en')),env_config_1=require(a30_0x580458(0xfb)+'ig/env.con'+a30_0x580458(0xec)),logger_config_1=require(a30_0x580458(0xfb)+a30_0x580458(0x113)+'config'),package_json_1=require('../../../p'+'ackage.jso'+'n'),exceptions_1=require(a30_0x580458(0xf7)+a30_0x580458(0x101)),whatsapp_module_1=require('../whatsap'+a30_0x580458(0x11a)),logger=new logger_config_1[(a30_0x580458(0xed))](a30_0x580458(0x112));function jwtGuard(_0x22db68,_0x4538da,_0x3b62ac){return __awaiter(this,void(-0x10a4+0x2*-0x341+0x1*0x1726),void(0x951+0x1f77+0xf*-0x2b8),function*(){const _0x12b1b8=a30_0x2be3,_0x57b91d=_0x22db68[_0x12b1b8(0x104)]('apikey');if(_0x57b91d&&env_config_1[_0x12b1b8(0x109)+'ice']['get'](_0x12b1b8(0x10c)+'TION')[_0x12b1b8(0xf5)][_0x12b1b8(0xfa)]!==_0x57b91d)throw new exceptions_1[(_0x12b1b8(0x110))+(_0x12b1b8(0xf6))+'n']();if(env_config_1[_0x12b1b8(0x109)+_0x12b1b8(0x124)][_0x12b1b8(0x104)](_0x12b1b8(0x10c)+_0x12b1b8(0xe8))[_0x12b1b8(0xf5)][_0x12b1b8(0xfa)]===_0x57b91d)return _0x3b62ac();if((_0x22db68[_0x12b1b8(0xfc)+'l']['includes']('/instance/'+'create')||_0x22db68[_0x12b1b8(0xfc)+'l'][_0x12b1b8(0x129)](_0x12b1b8(0xe9)+'fetchInsta'+_0x12b1b8(0xeb)))&&!_0x57b91d)throw new exceptions_1[(_0x12b1b8(0xe6))+(_0x12b1b8(0xe7))](_0x12b1b8(0x12b)+_0x12b1b8(0x103)+'ey',_0x12b1b8(0xf3)+'\x20api\x20key\x20m'+_0x12b1b8(0xf1));const _0x10f103=env_config_1['configServ'+_0x12b1b8(0x124)][_0x12b1b8(0x104)](_0x12b1b8(0x10c)+_0x12b1b8(0xe8))['JWT'];try{const [_0x5b5c7d,_0x3aee54]=_0x22db68[_0x12b1b8(0x104)](_0x12b1b8(0x108)+_0x12b1b8(0x105))[_0x12b1b8(0x125)]('\x20');if(_0x5b5c7d['toLowerCas'+'e']()!==_0x12b1b8(0xfe))throw new exceptions_1[(_0x12b1b8(0x110))+'edExceptio'+'n']();if(!(0xac*-0x2b+-0x5*-0x24b+0x116d,class_validator_1[_0x12b1b8(0x11b)])(_0x3aee54))throw new exceptions_1['Unauthoriz'+(_0x12b1b8(0xf6))+'n']();const _0x6b7005=_0x22db68[_0x12b1b8(0x100)],_0x32a3e2=jsonwebtoken_1[_0x12b1b8(0x116)][_0x12b1b8(0x118)](_0x3aee54,_0x10f103[_0x12b1b8(0x11d)],{'ignoreExpiration':_0x10f103[_0x12b1b8(0xf8)]===0xd4b+-0x1*-0x125d+-0x3f5*0x8});if(_0x6b7005['instanceNa'+'me']!==_0x32a3e2[_0x12b1b8(0x10d)+'me']||package_json_1['name']!==_0x32a3e2['apiName'])throw new exceptions_1[(_0x12b1b8(0x110))+(_0x12b1b8(0xf6))+'n']();return _0x3b62ac();}catch(_0x3753ca){logger[_0x12b1b8(0x117)](_0x3753ca);throw new exceptions_1[(_0x12b1b8(0x110))+'edExceptio'+'n']();}});}function apikey(_0x2f4fda,_0x1dc06f,_0x3c9611){return __awaiter(this,void(0x258d*-0x1+0x2415+0x2f*0x8),void(-0x272+0x136c+-0x10fa),function*(){const _0x5509ed=a30_0x2be3,_0x18fe79=env_config_1[_0x5509ed(0x109)+_0x5509ed(0x124)]['get'](_0x5509ed(0x10c)+_0x5509ed(0xe8))[_0x5509ed(0xf5)],_0x4f1b37=_0x2f4fda[_0x5509ed(0x104)](_0x5509ed(0x120));if(_0x18fe79['KEY']===_0x4f1b37)return _0x3c9611();if((_0x2f4fda[_0x5509ed(0xfc)+'l']['includes'](_0x5509ed(0xe9)+_0x5509ed(0x115))||_0x2f4fda['originalUr'+'l'][_0x5509ed(0x129)](_0x5509ed(0xe9)+_0x5509ed(0x10a)+'nces'))&&!_0x4f1b37)throw new exceptions_1[(_0x5509ed(0xe6))+(_0x5509ed(0xe7))](_0x5509ed(0x12b)+'obal\x20api\x20k'+'ey',_0x5509ed(0xf3)+_0x5509ed(0x121)+_0x5509ed(0xf1));try{const _0x210535=_0x2f4fda[_0x5509ed(0x100)],_0xfd6c16=yield whatsapp_module_1[_0x5509ed(0xff)][_0x5509ed(0x12a)][_0x5509ed(0x107)](_0x210535[_0x5509ed(0x10d)+'me']);if(_0xfd6c16[_0x5509ed(0x120)]===_0x4f1b37)return _0x3c9611();}catch(_0x10d66d){}throw new exceptions_1[(_0x5509ed(0x110))+(_0x5509ed(0xf6))+'n']();});}const a30_0x37760e={};a30_0x37760e[a30_0x580458(0x11c)]=jwtGuard,a30_0x37760e[a30_0x580458(0x120)]=apikey,exports[a30_0x580458(0x10e)]=a30_0x37760e;