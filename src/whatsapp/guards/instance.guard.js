'use strict';const a31_0x18a3f9=a31_0x56ad;function a31_0x3fff(){const _0x11e539=['xception','10lSCgnK','nces','originalUr','../../conf','\x22\x20is\x20alrea','46981sGwZPi','DB_PREFIX_','\x20does\x20not\x20','\x22\x20instance','collection','defineProp','istsGuard','ggedGuard','value','throw','instanceEx','9579488LpDmRU','2780KHOrbY','erty','exist','NAME','INSTANCE_D','ception','The\x20\x22','dbserver','instanceNa','create','6TJMocK','params','ptions','BadRequest','/instance/','__awaiter','__esModule','fetchInsta','then','body','next','\x22instanceN','instanceLo','ig/path.co','ENABLED','getClient','39YelxWq','CONNECTION','p.module','apply','ame\x22\x20not\x20p','includes','existsSync','Exception','../whatsap','6985782JEHIlS','done','4427990jlDKKl','4098595AODAWa','waMonitor','ForbiddenE','path','338356bBnvDN','209908Ompukx'];a31_0x3fff=function(){return _0x11e539;};return a31_0x3fff();}(function(_0x13ce2c,_0x1f14b3){const _0x16d19e=a31_0x56ad,_0xf5c92c=_0x13ce2c();while(!![]){try{const _0x15f03b=-parseInt(_0x16d19e(0x1b5))/(-0x92*-0x43+-0x5*-0x737+-0x1292*0x4)*(-parseInt(_0x16d19e(0x1b3))/(-0x1*-0xb53+-0x5a7+-0x19*0x3a))+-parseInt(_0x16d19e(0x1a2))/(0x953+0x6d3*0x5+-0x2b6f*0x1)*(parseInt(_0x16d19e(0x1b2))/(-0x17c7+-0x662*-0x1+0x1*0x1169))+parseInt(_0x16d19e(0x1ae))/(0x8d+-0x144*0x4+-0x91*-0x8)*(parseInt(_0x16d19e(0x192))/(-0x1e3d+-0x99*-0xc+0x1717))+parseInt(_0x16d19e(0x1ad))/(-0x3*0x5c6+0x199*-0xd+0x23e*0x11)+parseInt(_0x16d19e(0x187))/(0x14a9+-0x3*-0xa34+0x333d*-0x1)+-parseInt(_0x16d19e(0x1ab))/(-0x6*-0x9e+0x1a64+-0x1e0f)+-parseInt(_0x16d19e(0x188))/(-0x155c*0x1+-0x1*-0x1567+-0x1)*(parseInt(_0x16d19e(0x17c))/(-0x15b9+0x35*0xa0+-0xb5c));if(_0x15f03b===_0x1f14b3)break;else _0xf5c92c['push'](_0xf5c92c['shift']());}catch(_0x4c7679){_0xf5c92c['push'](_0xf5c92c['shift']());}}}(a31_0x3fff,-0x3d2cb+-0xeab06+0x1c3279));function a31_0x56ad(_0x5d836c,_0x1bb577){const _0x139359=a31_0x3fff();return a31_0x56ad=function(_0x15fb59,_0x333227){_0x15fb59=_0x15fb59-(0x353*0x5+0x5*-0x17b+-0x7c0);let _0x4abc8a=_0x139359[_0x15fb59];return _0x4abc8a;},a31_0x56ad(_0x5d836c,_0x1bb577);}var __awaiter=this&&this[a31_0x18a3f9(0x197)]||function(_0x1a736c,_0xf952d2,_0x50927f,_0x502c05){function _0x2809dc(_0x583252){return _0x583252 instanceof _0x50927f?_0x583252:new _0x50927f(function(_0x3a5c82){_0x3a5c82(_0x583252);});}return new(_0x50927f||(_0x50927f=Promise))(function(_0x3b4722,_0x1fe13d){const _0xc67051=a31_0x56ad;function _0x4cb318(_0x2f4946){const _0xdbbefe=a31_0x56ad;try{_0x3bd8e9(_0x502c05[_0xdbbefe(0x19c)](_0x2f4946));}catch(_0x26d77b){_0x1fe13d(_0x26d77b);}}function _0x5a5c88(_0xd5810c){const _0x4fed7f=a31_0x56ad;try{_0x3bd8e9(_0x502c05[_0x4fed7f(0x185)](_0xd5810c));}catch(_0x2e7d9d){_0x1fe13d(_0x2e7d9d);}}function _0x3bd8e9(_0x41df97){const _0x2554c2=a31_0x56ad;_0x41df97[_0x2554c2(0x1ac)]?_0x3b4722(_0x41df97[_0x2554c2(0x184)]):_0x2809dc(_0x41df97[_0x2554c2(0x184)])[_0x2554c2(0x19a)](_0x4cb318,_0x5a5c88);}_0x3bd8e9((_0x502c05=_0x502c05[_0xc67051(0x1a5)](_0x1a736c,_0xf952d2||[]))['next']());});};const a31_0x15fb59={};a31_0x15fb59[a31_0x18a3f9(0x184)]=!![],Object[a31_0x18a3f9(0x181)+a31_0x18a3f9(0x189)](exports,a31_0x18a3f9(0x198),a31_0x15fb59),exports[a31_0x18a3f9(0x19e)+a31_0x18a3f9(0x183)]=exports[a31_0x18a3f9(0x186)+a31_0x18a3f9(0x182)]=void(0x10*0x2e+-0x763*-0x3+-0x1909);const fs_1=require('fs'),path_1=require(a31_0x18a3f9(0x1b1)),path_config_1=require(a31_0x18a3f9(0x17a)+a31_0x18a3f9(0x19f)+'nfig'),db_connect_1=require('../../db/d'+'b.connect'),exceptions_1=require('../../exce'+a31_0x18a3f9(0x194)),whatsapp_module_1=require(a31_0x18a3f9(0x1aa)+a31_0x18a3f9(0x1a4));function getInstance(_0x3365da){return __awaiter(this,void(-0x20a1*0x1+-0x1d9c+0x3e3d),void(-0xd1c+0x558+0x4*0x1f1),function*(){const _0x17298b=a31_0x56ad,_0x4379fb=whatsapp_module_1[_0x17298b(0x1af)]['waInstance'+'s'][_0x3365da];if(db_connect_1['db'][_0x17298b(0x1a0)]){const _0x50e95d=db_connect_1[_0x17298b(0x18f)][_0x17298b(0x1a1)]()['db'](db_connect_1['db'][_0x17298b(0x1a3)][_0x17298b(0x17d)+_0x17298b(0x18b)]+'-instances')[_0x17298b(0x180)](_0x3365da);return _0x4379fb||(yield _0x50e95d['find']({})['toArray']())['length']>0x24de+-0x21fd+0x2e1*-0x1;}return _0x4379fb||(0x44+-0xb5e+0xb1a,fs_1[_0x17298b(0x1a8)])((-0x1d6c+0x657+0x1715,path_1['join'])(path_config_1[_0x17298b(0x18c)+'IR'],_0x3365da));});}function instanceExistsGuard(_0x39f833,_0x3d6b6a,_0x23b0ac){return __awaiter(this,void(-0x1bc8+-0x2f2+0x17*0x156),void(0x21c0+0x5a1*-0x4+-0xb3c),function*(){const _0x3c9a3e=a31_0x56ad;if(_0x39f833['originalUr'+'l'][_0x3c9a3e(0x1a7)]('/instance/'+_0x3c9a3e(0x191))||_0x39f833[_0x3c9a3e(0x179)+'l']['includes'](_0x3c9a3e(0x196)+_0x3c9a3e(0x199)+_0x3c9a3e(0x178)))return _0x23b0ac();const _0xecc7e8=_0x39f833[_0x3c9a3e(0x193)];if(!(_0xecc7e8===null||_0xecc7e8===void(-0x1a7+0x42*-0x69+0x1cb9)?void(-0x143+-0x129a+0x1*0x13dd):_0xecc7e8[_0x3c9a3e(0x190)+'me']))throw new exceptions_1[(_0x3c9a3e(0x195))+(_0x3c9a3e(0x1a9))](_0x3c9a3e(0x19d)+_0x3c9a3e(0x1a6)+'rovided.');if(!(yield getInstance(_0xecc7e8['instanceNa'+'me'])))throw new exceptions_1['NotFoundEx'+(_0x3c9a3e(0x18d))](_0x3c9a3e(0x18e)+_0xecc7e8[_0x3c9a3e(0x190)+'me']+(_0x3c9a3e(0x17f)+_0x3c9a3e(0x17e)+_0x3c9a3e(0x18a)));_0x23b0ac();});}exports[a31_0x18a3f9(0x186)+a31_0x18a3f9(0x182)]=instanceExistsGuard;function instanceLoggedGuard(_0x331a05,_0x585754,_0x58d3f7){return __awaiter(this,void(-0x617+-0x9f3+0x100a),void(0x20bd+0x21c1+-0x1*0x427e),function*(){const _0x16352d=a31_0x56ad;if(_0x331a05[_0x16352d(0x179)+'l']['includes'](_0x16352d(0x196)+_0x16352d(0x191))){const _0x3cd9ba=_0x331a05[_0x16352d(0x19b)];if(yield getInstance(_0x3cd9ba['instanceNa'+'me']))throw new exceptions_1[(_0x16352d(0x1b0))+(_0x16352d(0x1b4))]('This\x20name\x20'+'\x22'+_0x3cd9ba[_0x16352d(0x190)+'me']+(_0x16352d(0x17b)+'dy\x20in\x20use.'));whatsapp_module_1['waMonitor']['waInstance'+'s'][_0x3cd9ba[_0x16352d(0x190)+'me']]&&delete whatsapp_module_1[_0x16352d(0x1af)]['waInstance'+'s'][_0x3cd9ba[_0x16352d(0x190)+'me']];}_0x58d3f7();});}exports[a31_0x18a3f9(0x19e)+a31_0x18a3f9(0x183)]=instanceLoggedGuard;