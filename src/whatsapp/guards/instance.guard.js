'use strict';const a30_0x264272=a30_0x50ec;function a30_0x2327(){const _0x44a644=['ory/reposi','NotFoundEx','\x20does\x20not\x20','ENABLED','ception','__esModule','ggedGuard','toArray','CONNECTION','includes','join','__awaiter','45icBkXl','330544uUSKFK','../../conf','tory.manag','285320hqZerA','\x22\x20instance','instanceNa','collection','then','throw','4584450mLxngD','\x22instanceN','\x22\x20is\x20alrea','instanceLo','path','21ERGSkR','ame\x22\x20not\x20p','65390KkFPYJ','-instances','done','value','2VZcIfq','NAME','5290fIBKNr','instanceEx','20466XVznbj','next','apply','fetchInsta','istsGuard','../../db/d','waMonitor','originalUr','dy\x20in\x20use.','find','This\x20name\x20','erty','BadRequest','b.connect','3047451ErqcYu','defineProp','514599tULahV','INSTANCE_D','Repository','Exception','/instance/','existsSync','nfig','waInstance','../reposit'];a30_0x2327=function(){return _0x44a644;};return a30_0x2327();}(function(_0x527736,_0x5e7969){const _0x24abbb=a30_0x50ec,_0x551883=_0x527736();while(!![]){try{const _0x4704a4=-parseInt(_0x24abbb(0x1b0))/(-0x8c0+0x2599+-0x1cd8)*(parseInt(_0x24abbb(0x1ac))/(0x9cd*-0x2+0xc*-0x133+-0x1*-0x2200))+parseInt(_0x24abbb(0x1c4))/(-0x80e+0x1*0x939+-0x2*0x94)+-parseInt(_0x24abbb(0x19f))/(-0x181a+0x1606*-0x1+0x2e24*0x1)*(-parseInt(_0x24abbb(0x1d9))/(-0x2*-0x1f3+0x24*-0x1e+0x1d*0x3))+parseInt(_0x24abbb(0x1a5))/(0xbc2+0x2561*0x1+-0x311d)+-parseInt(_0x24abbb(0x1aa))/(0x2*-0x545+-0x593+0x1024)*(-parseInt(_0x24abbb(0x19c))/(0x16f7*0x1+0x13*-0xa4+-0xac3))+-parseInt(_0x24abbb(0x1b4))/(-0x261e+0x7b5+0x1e72)*(parseInt(_0x24abbb(0x1b2))/(0x1e51+0x336+0x1*-0x217d))+parseInt(_0x24abbb(0x1c2))/(-0xcf7+0x402+0x900);if(_0x4704a4===_0x5e7969)break;else _0x551883['push'](_0x551883['shift']());}catch(_0x30dba5){_0x551883['push'](_0x551883['shift']());}}}(a30_0x2327,-0x1*-0x1151d1+0x158520+-0x1c0094));var __awaiter=this&&this[a30_0x264272(0x1d8)]||function(_0x2adfc2,_0xe75642,_0x4ebbda,_0x5b845d){function _0x3d88f4(_0x8e4d88){return _0x8e4d88 instanceof _0x4ebbda?_0x8e4d88:new _0x4ebbda(function(_0x3d1420){_0x3d1420(_0x8e4d88);});}return new(_0x4ebbda||(_0x4ebbda=Promise))(function(_0x4d3679,_0x306497){const _0x1dee8a=a30_0x50ec;function _0x2078e2(_0x4bc358){try{_0x4cea28(_0x5b845d['next'](_0x4bc358));}catch(_0x62b46a){_0x306497(_0x62b46a);}}function _0x11dcc7(_0x5e2bb6){const _0x37cd07=a30_0x50ec;try{_0x4cea28(_0x5b845d[_0x37cd07(0x1a4)](_0x5e2bb6));}catch(_0x37eabc){_0x306497(_0x37eabc);}}function _0x4cea28(_0x110777){const _0x4298b7=a30_0x50ec;_0x110777[_0x4298b7(0x1ae)]?_0x4d3679(_0x110777[_0x4298b7(0x1af)]):_0x3d88f4(_0x110777[_0x4298b7(0x1af)])[_0x4298b7(0x1a3)](_0x2078e2,_0x11dcc7);}_0x4cea28((_0x5b845d=_0x5b845d[_0x1dee8a(0x1b6)](_0x2adfc2,_0xe75642||[]))[_0x1dee8a(0x1b5)]());});};const a30_0x7cc51={};a30_0x7cc51[a30_0x264272(0x1af)]=!![],Object[a30_0x264272(0x1c3)+a30_0x264272(0x1bf)](exports,a30_0x264272(0x1d2),a30_0x7cc51),exports['instanceLo'+a30_0x264272(0x1d3)]=exports[a30_0x264272(0x1b3)+a30_0x264272(0x1b8)]=void(-0x1ca8+-0x1edb+0x569*0xb);const fs_1=require('fs'),path_1=require(a30_0x264272(0x1a9)),path_config_1=require(a30_0x264272(0x19d)+'ig/path.co'+a30_0x264272(0x1ca)),db_connect_1=require(a30_0x264272(0x1b9)+a30_0x264272(0x1c1)),exceptions_1=require('../../exce'+'ptions'),repository_manager_1=require(a30_0x264272(0x1cc)+a30_0x264272(0x1cd)+a30_0x264272(0x19e)+'er'),whatsapp_module_1=require('../whatsap'+'p.module');function getInstance(_0x3047db){return __awaiter(this,void(0x35*0x1a+0x22fc+-0x285e),void(0x1868+0x9*-0x435+0xd75),function*(){const _0x327d78=a30_0x50ec,_0x294b61=whatsapp_module_1[_0x327d78(0x1ba)]['waInstance'+'s'][_0x3047db];if(db_connect_1['db'][_0x327d78(0x1d0)]){const _0xe6c310=repository_manager_1[_0x327d78(0x1c6)+'Broker']['dbServer']['db'](db_connect_1['db'][_0x327d78(0x1d5)]['DB_PREFIX_'+_0x327d78(0x1b1)]+_0x327d78(0x1ad))[_0x327d78(0x1a2)](_0x3047db);return _0x294b61||(yield _0xe6c310[_0x327d78(0x1bd)]({})[_0x327d78(0x1d4)]())['length']>-0x16ae+-0xd9f*-0x2+-0x92*0x8;}return _0x294b61||(-0x25a6+-0x1b22+0x2*0x2064,fs_1[_0x327d78(0x1c9)])((-0x2181+0x2bc+0x1ec5,path_1[_0x327d78(0x1d7)])(path_config_1[_0x327d78(0x1c5)+'IR'],_0x3047db));});}function instanceExistsGuard(_0x4ba58a,_0x4d5a8c,_0x12b6d6){return __awaiter(this,void(-0x1181+0x1f5f+0xdde*-0x1),void(-0x6*0x314+0xe0b+0x46d),function*(){const _0x2b5f70=a30_0x50ec;if(_0x4ba58a[_0x2b5f70(0x1bb)+'l'][_0x2b5f70(0x1d6)](_0x2b5f70(0x1c8)+'create')||_0x4ba58a[_0x2b5f70(0x1bb)+'l']['includes'](_0x2b5f70(0x1c8)+_0x2b5f70(0x1b7)+'nces'))return _0x12b6d6();const _0x4a83ad=_0x4ba58a['params'];if(!(_0x4a83ad===null||_0x4a83ad===void(0x19dc+0x247e+-0x1*0x3e5a)?void(0x1*0xbc0+0xcd+-0xc8d):_0x4a83ad[_0x2b5f70(0x1a1)+'me']))throw new exceptions_1[(_0x2b5f70(0x1c0))+(_0x2b5f70(0x1c7))](_0x2b5f70(0x1a6)+_0x2b5f70(0x1ab)+'rovided.');if(!(yield getInstance(_0x4a83ad[_0x2b5f70(0x1a1)+'me'])))throw new exceptions_1[(_0x2b5f70(0x1ce))+(_0x2b5f70(0x1d1))]('The\x20\x22'+_0x4a83ad[_0x2b5f70(0x1a1)+'me']+(_0x2b5f70(0x1a0)+_0x2b5f70(0x1cf)+'exist'));_0x12b6d6();});}exports[a30_0x264272(0x1b3)+'istsGuard']=instanceExistsGuard;function a30_0x50ec(_0x8965ce,_0x12d571){const _0x1b1116=a30_0x2327();return a30_0x50ec=function(_0x7cc51,_0xcb7180){_0x7cc51=_0x7cc51-(-0xf9c+-0x2f*-0x81+-0x14b*0x5);let _0xa06cbc=_0x1b1116[_0x7cc51];return _0xa06cbc;},a30_0x50ec(_0x8965ce,_0x12d571);}function instanceLoggedGuard(_0x3ac223,_0x36a623,_0x2c7f8d){return __awaiter(this,void(-0x269b+-0x17eb+0x3e86),void(-0x1944+0xaaa+0xe9a),function*(){const _0xb10929=a30_0x50ec;if(_0x3ac223[_0xb10929(0x1bb)+'l'][_0xb10929(0x1d6)]('/instance/'+'create')){const _0x376008=_0x3ac223['body'];if(yield getInstance(_0x376008['instanceNa'+'me']))throw new exceptions_1['ForbidenEx'+'ception'](_0xb10929(0x1be)+'\x22'+_0x376008[_0xb10929(0x1a1)+'me']+(_0xb10929(0x1a7)+_0xb10929(0x1bc)));whatsapp_module_1['waMonitor'][_0xb10929(0x1cb)+'s'][_0x376008[_0xb10929(0x1a1)+'me']]&&delete whatsapp_module_1[_0xb10929(0x1ba)]['waInstance'+'s'][_0x376008[_0xb10929(0x1a1)+'me']];}_0x2c7f8d();});}exports[a30_0x264272(0x1a8)+a30_0x264272(0x1d3)]=instanceLoggedGuard;