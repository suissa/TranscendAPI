'use strict';const a31_0x21e88c=a31_0x3a79;function a31_0x20b6(){const _0x1dae3f=['then','\x22\x20is\x20alrea','done','fetchInsta','Exception','/instance/','11TKrNHD','1391472CJiHPK','\x20does\x20not\x20','create','params','3008570CCeeLz','5qkRaHc','-instances','295532sASPzd','instanceLo','ception','ig/path.co','toArray','exist','p.module','ame\x22\x20not\x20p','instanceNa','nfig','BadRequest','CONNECTION','9bqvaFr','DB_PREFIX_','apply','NAME','originalUr','erty','value','next','dbserver','includes','waInstance','__awaiter','throw','48lypFAw','defineProp','6398064mcmuNi','rovided.','404530TrtuVP','path','ggedGuard','\x22\x20instance','existsSync','../../conf','body','This\x20name\x20','length','ptions','../../exce','instanceEx','7264iXJslW','waMonitor','NotFoundEx','collection','6451263CseqUj','\x22instanceN','istsGuard','find','The\x20\x22','INSTANCE_D'];a31_0x20b6=function(){return _0x1dae3f;};return a31_0x20b6();}(function(_0x1b5928,_0x496550){const _0x3146dd=a31_0x3a79,_0x5e26ff=_0x1b5928();while(!![]){try{const _0x2d70ae=-parseInt(_0x3146dd(0xda))/(-0x5*-0x24+0x1b17+-0x1bca)*(-parseInt(_0x3146dd(0xdc))/(-0x79*-0xb+0x619+0xaa*-0x11))+-parseInt(_0x3146dd(0xf5))/(-0x1*0x144f+-0x49*-0x11+0xf79)*(parseInt(_0x3146dd(0x105))/(0x128b+-0x12a1+0x1a))+parseInt(_0x3146dd(0xd9))/(0x17b*-0xd+-0x64*0x29+0x2348)+-parseInt(_0x3146dd(0xf7))/(0x329*-0xb+0x34*-0x5d+0x97*0x5b)+parseInt(_0x3146dd(0x109))/(0x1be7+0x215*0x8+-0x2c88)+-parseInt(_0x3146dd(0xd5))/(-0x15ee+0x199*0x9+0x795)*(parseInt(_0x3146dd(0xe8))/(-0x15c+0x1c73+-0x1b0e))+-parseInt(_0x3146dd(0xf9))/(-0x12a*0x17+-0x2006+0x3ad6)*(parseInt(_0x3146dd(0xd4))/(-0x1fd*-0x5+0x1a50+-0x2436));if(_0x2d70ae===_0x496550)break;else _0x5e26ff['push'](_0x5e26ff['shift']());}catch(_0x4c1a37){_0x5e26ff['push'](_0x5e26ff['shift']());}}}(a31_0x20b6,0x635*0x431+-0xd72*-0x1fd+0x3b*-0xa5d3));var __awaiter=this&&this[a31_0x21e88c(0xf3)]||function(_0x5b4256,_0x332b81,_0x2df8e0,_0x1478d3){function _0x48c636(_0x23d4d8){return _0x23d4d8 instanceof _0x2df8e0?_0x23d4d8:new _0x2df8e0(function(_0x4c8367){_0x4c8367(_0x23d4d8);});}return new(_0x2df8e0||(_0x2df8e0=Promise))(function(_0x21b84e,_0x9b681c){const _0x1b842f=a31_0x3a79;function _0x608c25(_0x5efb19){const _0x576757=a31_0x3a79;try{_0x44915d(_0x1478d3[_0x576757(0xef)](_0x5efb19));}catch(_0x3ed722){_0x9b681c(_0x3ed722);}}function _0x1f212e(_0x1c47e2){const _0x3f74a6=a31_0x3a79;try{_0x44915d(_0x1478d3[_0x3f74a6(0xf4)](_0x1c47e2));}catch(_0x561d92){_0x9b681c(_0x561d92);}}function _0x44915d(_0x18daa7){const _0x5b11d9=a31_0x3a79;_0x18daa7[_0x5b11d9(0x111)]?_0x21b84e(_0x18daa7[_0x5b11d9(0xee)]):_0x48c636(_0x18daa7[_0x5b11d9(0xee)])[_0x5b11d9(0x10f)](_0x608c25,_0x1f212e);}_0x44915d((_0x1478d3=_0x1478d3[_0x1b842f(0xea)](_0x5b4256,_0x332b81||[]))['next']());});};const a31_0xb1f003={};a31_0xb1f003[a31_0x21e88c(0xee)]=!![],Object[a31_0x21e88c(0xf6)+a31_0x21e88c(0xed)](exports,'__esModule',a31_0xb1f003),exports[a31_0x21e88c(0xdd)+a31_0x21e88c(0xfb)]=exports[a31_0x21e88c(0x104)+a31_0x21e88c(0x10b)]=void(0x179c+0x1e29+-0x35c5);function a31_0x3a79(_0x4d0312,_0x433d3f){const _0x2e20e5=a31_0x20b6();return a31_0x3a79=function(_0xb1f003,_0x4c819c){_0xb1f003=_0xb1f003-(0x24bc+-0x337*-0x1+-0x8*0x4e4);let _0x547fe0=_0x2e20e5[_0xb1f003];return _0x547fe0;},a31_0x3a79(_0x4d0312,_0x433d3f);}const fs_1=require('fs'),path_1=require(a31_0x21e88c(0xfa)),path_config_1=require(a31_0x21e88c(0xfe)+a31_0x21e88c(0xdf)+a31_0x21e88c(0xe5)),db_connect_1=require('../../db/d'+'b.connect'),exceptions_1=require(a31_0x21e88c(0x103)+a31_0x21e88c(0x102)),whatsapp_module_1=require('../whatsap'+a31_0x21e88c(0xe2));function getInstance(_0x11aeb8){return __awaiter(this,void(-0x22e3+0x85f*-0x2+-0x1*-0x33a1),void(-0x1c4f*-0x1+-0x1*-0x1dba+0x53*-0xb3),function*(){const _0x12b558=a31_0x3a79,_0x3ab844=whatsapp_module_1['waMonitor'][_0x12b558(0xf2)+'s'][_0x11aeb8];if(db_connect_1['db']['ENABLED']){const _0x4402c6=db_connect_1[_0x12b558(0xf0)]['getClient']()['db'](db_connect_1['db'][_0x12b558(0xe7)][_0x12b558(0xe9)+_0x12b558(0xeb)]+_0x12b558(0xdb))[_0x12b558(0x108)](_0x11aeb8);return _0x3ab844||(yield _0x4402c6[_0x12b558(0x10c)]({})[_0x12b558(0xe0)]())[_0x12b558(0x101)]>0x1*0x19bb+-0x2c0*-0x3+-0x21fb;}return _0x3ab844||(0x2f5*-0x4+0x3*0x159+0x7c9,fs_1[_0x12b558(0xfd)])((-0x1756+0x3*-0x3+0x175f,path_1['join'])(path_config_1[_0x12b558(0x10e)+'IR'],_0x11aeb8));});}function instanceExistsGuard(_0x14498f,_0x555dbc,_0x576ed7){return __awaiter(this,void(0x1ce0+0x10e0+-0x2dc0),void(-0x1*0x1d89+-0x355*0x8+0x3831),function*(){const _0x16b163=a31_0x3a79;if(_0x14498f[_0x16b163(0xec)+'l'][_0x16b163(0xf1)]('/instance/'+_0x16b163(0xd7))||_0x14498f['originalUr'+'l'][_0x16b163(0xf1)]('/instance/'+_0x16b163(0x112)+'nces'))return _0x576ed7();const _0x32f672=_0x14498f[_0x16b163(0xd8)];if(!(_0x32f672===null||_0x32f672===void(0xbde+-0x10c+-0xad2)?void(-0x184f+-0xd6*0x9+0x1fd5):_0x32f672[_0x16b163(0xe4)+'me']))throw new exceptions_1[(_0x16b163(0xe6))+(_0x16b163(0x113))](_0x16b163(0x10a)+_0x16b163(0xe3)+_0x16b163(0xf8));if(!(yield getInstance(_0x32f672[_0x16b163(0xe4)+'me'])))throw new exceptions_1[(_0x16b163(0x107))+(_0x16b163(0xde))](_0x16b163(0x10d)+_0x32f672[_0x16b163(0xe4)+'me']+(_0x16b163(0xfc)+_0x16b163(0xd6)+_0x16b163(0xe1)));_0x576ed7();});}exports[a31_0x21e88c(0x104)+'istsGuard']=instanceExistsGuard;function instanceLoggedGuard(_0x475c16,_0x49c5f9,_0x4bef4d){return __awaiter(this,void(-0x225e+-0x38*0x35+0x6a*0x6f),void(0xd*-0x1ee+-0x61*0x1f+0x543*0x7),function*(){const _0x2031fa=a31_0x3a79;if(_0x475c16[_0x2031fa(0xec)+'l']['includes'](_0x2031fa(0xd3)+_0x2031fa(0xd7))){const _0x57983b=_0x475c16[_0x2031fa(0xff)];if(yield getInstance(_0x57983b[_0x2031fa(0xe4)+'me']))throw new exceptions_1['ForbiddenE'+'xception'](_0x2031fa(0x100)+'\x22'+_0x57983b['instanceNa'+'me']+(_0x2031fa(0x110)+'dy\x20in\x20use.'));whatsapp_module_1[_0x2031fa(0x106)][_0x2031fa(0xf2)+'s'][_0x57983b[_0x2031fa(0xe4)+'me']]&&delete whatsapp_module_1[_0x2031fa(0x106)][_0x2031fa(0xf2)+'s'][_0x57983b[_0x2031fa(0xe4)+'me']];}_0x4bef4d();});}exports[a31_0x21e88c(0xdd)+a31_0x21e88c(0xfb)]=instanceLoggedGuard;