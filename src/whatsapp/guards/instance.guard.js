'use strict';function a31_0x1799(){const _0x58fd01=['throw','dbserver','exist','rovided.','4417020VvKVKM','toArray','value','erty','collection','dy\x20in\x20use.','ForbiddenE','2180QtHJob','2572hYmznu','istsGuard','includes','-instances','b.connect','then','6134520RLyECg','create','../whatsap','/instance/','join','6130gEMFah','Exception','instanceLo','next','../../conf','../../exce','defineProp','nces','waMonitor','This\x20name\x20','__esModule','\x22instanceN','getClient','instanceNa','6OJGLWa','instanceEx','The\x20\x22','ig/path.co','length','body','originalUr','done','\x22\x20instance','1284174oWjApS','ggedGuard','existsSync','apply','135472jHfqqR','NotFoundEx','\x20does\x20not\x20','waInstance','../../db/d','724622pGJyQk','CONNECTION','ptions','154qgrhbr','NAME','90563QrWyxI','ame\x22\x20not\x20p','params'];a31_0x1799=function(){return _0x58fd01;};return a31_0x1799();}const a31_0x344c9d=a31_0x1872;(function(_0x53fc8e,_0x6b9f3c){const _0x37bd51=a31_0x1872,_0x364f21=_0x53fc8e();while(!![]){try{const _0x5627d3=-parseInt(_0x37bd51(0x1dc))/(0x18*0x3+0x9c8+-0xa0f*0x1)+parseInt(_0x37bd51(0x209))/(-0x1ab+0x1*-0x65+0x212)*(-parseInt(_0x37bd51(0x1d3))/(-0xcbc+-0x34*0x26+0x1477))+parseInt(_0x37bd51(0x1f0))/(0x3*-0x8b3+0xc9*0x10+-0x1*-0xd8d)*(-parseInt(_0x37bd51(0x1fb))/(-0x1f1e+-0x3e8+0x230b))+parseInt(_0x37bd51(0x1f6))/(-0x70*-0x53+-0x17*-0x1a0+0x543*-0xe)+parseInt(_0x37bd51(0x1df))/(0x1*-0x1c0c+-0x7*0x3+0x1c28)*(parseInt(_0x37bd51(0x1d7))/(-0xeef*0x2+-0x158c+0x3372))+parseInt(_0x37bd51(0x1e8))/(-0x1e0b+-0x1465+0x3279)+parseInt(_0x37bd51(0x1ef))/(-0x2045+-0x1f56+-0x3fa5*-0x1)*(parseInt(_0x37bd51(0x1e1))/(0x193*0x3+0xc87*0x3+-0x2a43));if(_0x5627d3===_0x6b9f3c)break;else _0x364f21['push'](_0x364f21['shift']());}catch(_0x56a918){_0x364f21['push'](_0x364f21['shift']());}}}(a31_0x1799,0x1c0*-0x1eb+0xb789+0x141*0xcdb));var __awaiter=this&&this['__awaiter']||function(_0x101f69,_0x498865,_0x248d7e,_0x6a6214){function _0x5aed3e(_0x1bb6b7){return _0x1bb6b7 instanceof _0x248d7e?_0x1bb6b7:new _0x248d7e(function(_0x863596){_0x863596(_0x1bb6b7);});}return new(_0x248d7e||(_0x248d7e=Promise))(function(_0x2dc5e3,_0x2558c3){const _0x165eb0=a31_0x1872;function _0x1c30d5(_0x3abb12){const _0x9b8b6e=a31_0x1872;try{_0x3d12fa(_0x6a6214[_0x9b8b6e(0x1fe)](_0x3abb12));}catch(_0x2227cc){_0x2558c3(_0x2227cc);}}function _0x250e7c(_0x29bf97){const _0x2bcd1e=a31_0x1872;try{_0x3d12fa(_0x6a6214[_0x2bcd1e(0x1e4)](_0x29bf97));}catch(_0x3cc307){_0x2558c3(_0x3cc307);}}function _0x3d12fa(_0x29aa1c){const _0x52b92f=a31_0x1872;_0x29aa1c[_0x52b92f(0x1d1)]?_0x2dc5e3(_0x29aa1c[_0x52b92f(0x1ea)]):_0x5aed3e(_0x29aa1c[_0x52b92f(0x1ea)])[_0x52b92f(0x1f5)](_0x1c30d5,_0x250e7c);}_0x3d12fa((_0x6a6214=_0x6a6214[_0x165eb0(0x1d6)](_0x101f69,_0x498865||[]))[_0x165eb0(0x1fe)]());});};const a31_0x3b4890={};a31_0x3b4890[a31_0x344c9d(0x1ea)]=!![],Object[a31_0x344c9d(0x201)+a31_0x344c9d(0x1eb)](exports,a31_0x344c9d(0x205),a31_0x3b4890),exports[a31_0x344c9d(0x1fd)+a31_0x344c9d(0x1d4)]=exports[a31_0x344c9d(0x1cb)+'istsGuard']=void(0x1*0x27a+-0x2*0x778+0x37*0x3a);const fs_1=require('fs'),path_1=require('path'),path_config_1=require(a31_0x344c9d(0x1ff)+a31_0x344c9d(0x1cd)+'nfig'),db_connect_1=require(a31_0x344c9d(0x1db)+a31_0x344c9d(0x1f4)),exceptions_1=require(a31_0x344c9d(0x200)+a31_0x344c9d(0x1de)),whatsapp_module_1=require(a31_0x344c9d(0x1f8)+'p.module');function getInstance(_0x5aacf3){return __awaiter(this,void(-0xa02+-0x110e+0x1b10),void(0x1*-0xad5+-0x19*0x116+0x25fb),function*(){const _0xae6274=a31_0x1872,_0x1ca5c2=whatsapp_module_1['waMonitor'][_0xae6274(0x1da)+'s'][_0x5aacf3];if(db_connect_1['db']['ENABLED']){const _0x328cdb=db_connect_1[_0xae6274(0x1e5)][_0xae6274(0x207)]()['db'](db_connect_1['db'][_0xae6274(0x1dd)]['DB_PREFIX_'+_0xae6274(0x1e0)]+_0xae6274(0x1f3))[_0xae6274(0x1ec)](_0x5aacf3);return _0x1ca5c2||(yield _0x328cdb['find']({})[_0xae6274(0x1e9)]())[_0xae6274(0x1ce)]>-0x142b+-0x4*-0x25f+0xaaf;}return _0x1ca5c2||(0x1*0x25be+-0x980*0x4+0x42,fs_1[_0xae6274(0x1d5)])((-0x3*-0x74d+-0x68*0x31+-0x1ff,path_1[_0xae6274(0x1fa)])(path_config_1['INSTANCE_D'+'IR'],_0x5aacf3));});}function instanceExistsGuard(_0x55c9db,_0x46b7e0,_0x1d61b8){return __awaiter(this,void(0x2a+-0x217d+0x2153),void(-0xf9f+-0x4d3*0x5+0x27be),function*(){const _0x40d836=a31_0x1872;if(_0x55c9db[_0x40d836(0x1d0)+'l'][_0x40d836(0x1f2)](_0x40d836(0x1f9)+_0x40d836(0x1f7))||_0x55c9db[_0x40d836(0x1d0)+'l'][_0x40d836(0x1f2)]('/instance/'+'fetchInsta'+_0x40d836(0x202)))return _0x1d61b8();const _0x4ce6c8=_0x55c9db[_0x40d836(0x1e3)];if(!(_0x4ce6c8===null||_0x4ce6c8===void(-0x1*-0x28d+-0x4*-0x152+-0x1*0x7d5)?void(-0xa*-0x1fd+0x26f3+0x1*-0x3ad5):_0x4ce6c8['instanceNa'+'me']))throw new exceptions_1['BadRequest'+(_0x40d836(0x1fc))](_0x40d836(0x206)+_0x40d836(0x1e2)+_0x40d836(0x1e7));if(!(yield getInstance(_0x4ce6c8[_0x40d836(0x208)+'me'])))throw new exceptions_1[(_0x40d836(0x1d8))+'ception'](_0x40d836(0x1cc)+_0x4ce6c8[_0x40d836(0x208)+'me']+(_0x40d836(0x1d2)+_0x40d836(0x1d9)+_0x40d836(0x1e6)));_0x1d61b8();});}exports[a31_0x344c9d(0x1cb)+a31_0x344c9d(0x1f1)]=instanceExistsGuard;function a31_0x1872(_0x21359b,_0x3a28fb){const _0x386927=a31_0x1799();return a31_0x1872=function(_0x402cd1,_0x1b60f5){_0x402cd1=_0x402cd1-(0x552+-0x1ca0+0x1919);let _0x3b4890=_0x386927[_0x402cd1];return _0x3b4890;},a31_0x1872(_0x21359b,_0x3a28fb);}function instanceLoggedGuard(_0x197ec9,_0xa52002,_0x3ce046){return __awaiter(this,void(-0x80*0xb+0x220*0xa+-0xfc0),void(-0x13a6+-0xa8b*0x2+-0x3b4*-0xb),function*(){const _0x405d2b=a31_0x1872;if(_0x197ec9[_0x405d2b(0x1d0)+'l'][_0x405d2b(0x1f2)]('/instance/'+'create')){const _0x578f39=_0x197ec9[_0x405d2b(0x1cf)];if(yield getInstance(_0x578f39[_0x405d2b(0x208)+'me']))throw new exceptions_1[(_0x405d2b(0x1ee))+'xception'](_0x405d2b(0x204)+'\x22'+_0x578f39[_0x405d2b(0x208)+'me']+('\x22\x20is\x20alrea'+_0x405d2b(0x1ed)));whatsapp_module_1[_0x405d2b(0x203)][_0x405d2b(0x1da)+'s'][_0x578f39[_0x405d2b(0x208)+'me']]&&delete whatsapp_module_1['waMonitor'][_0x405d2b(0x1da)+'s'][_0x578f39['instanceNa'+'me']];}_0x3ce046();});}exports[a31_0x344c9d(0x1fd)+a31_0x344c9d(0x1d4)]=instanceLoggedGuard;