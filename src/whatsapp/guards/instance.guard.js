'use strict';function a31_0x173b(_0x39e506,_0x2d0299){const _0x4bf645=a31_0x5552();return a31_0x173b=function(_0x1a512e,_0x3f7a80){_0x1a512e=_0x1a512e-(-0x21c1*-0x1+0x9*0x2+-0x107e*0x2);let _0x1b9308=_0x4bf645[_0x1a512e];return _0x1b9308;},a31_0x173b(_0x39e506,_0x2d0299);}const a31_0x4427b8=a31_0x173b;(function(_0x400fcd,_0x5f3dd4){const _0x451b81=a31_0x173b,_0x598ae6=_0x400fcd();while(!![]){try{const _0x53df60=-parseInt(_0x451b81(0x105))/(-0xd*-0x1df+0x25*-0x67+0x5*-0x1e3)*(parseInt(_0x451b81(0xeb))/(-0x3*-0x9ce+-0x33e+0xc5*-0x22))+-parseInt(_0x451b81(0xfd))/(0x1207+-0x16a+-0x2*0x84d)*(-parseInt(_0x451b81(0xe7))/(-0x22a6+0x1e99+0x411))+-parseInt(_0x451b81(0xf9))/(0x12b3+0x26c+-0x151a)*(parseInt(_0x451b81(0xdf))/(0x1*-0x2489+-0xde7+0x3276))+-parseInt(_0x451b81(0xf3))/(-0x1a2b+-0x13*-0x17c+-0x202)*(-parseInt(_0x451b81(0x117))/(-0x10a5+0x2398+-0x12eb*0x1))+-parseInt(_0x451b81(0xee))/(-0x1af*-0x9+-0x120d*-0x2+-0x3338)+parseInt(_0x451b81(0xe6))/(0x1451*0x1+-0xeb*0x22+0xaef)+parseInt(_0x451b81(0x103))/(-0x17*-0x1a7+0x404*-0x2+0x1dee*-0x1)*(parseInt(_0x451b81(0x10b))/(-0x1d1a+-0x16ad+-0x1*-0x33d3));if(_0x53df60===_0x5f3dd4)break;else _0x598ae6['push'](_0x598ae6['shift']());}catch(_0x133f9f){_0x598ae6['push'](_0x598ae6['shift']());}}}(a31_0x5552,-0xb5da7+0xa9*0x1a3+0x125105));var __awaiter=this&&this[a31_0x4427b8(0xfa)]||function(_0x5a8f7f,_0x95dcfc,_0x2ea19c,_0x482363){function _0x4e13fa(_0x2e4a25){return _0x2e4a25 instanceof _0x2ea19c?_0x2e4a25:new _0x2ea19c(function(_0xd93e06){_0xd93e06(_0x2e4a25);});}return new(_0x2ea19c||(_0x2ea19c=Promise))(function(_0x1678ef,_0x43c2ac){const _0x64ed88=a31_0x173b;function _0xd877cf(_0x40a7b6){const _0x45fa65=a31_0x173b;try{_0x20515d(_0x482363[_0x45fa65(0x118)](_0x40a7b6));}catch(_0x266c6b){_0x43c2ac(_0x266c6b);}}function _0x3eea13(_0x2bb853){const _0x375cfc=a31_0x173b;try{_0x20515d(_0x482363[_0x375cfc(0x10a)](_0x2bb853));}catch(_0xb2f5fc){_0x43c2ac(_0xb2f5fc);}}function _0x20515d(_0x2f4df4){const _0x30b4b5=a31_0x173b;_0x2f4df4[_0x30b4b5(0xe5)]?_0x1678ef(_0x2f4df4[_0x30b4b5(0x100)]):_0x4e13fa(_0x2f4df4['value'])[_0x30b4b5(0x109)](_0xd877cf,_0x3eea13);}_0x20515d((_0x482363=_0x482363[_0x64ed88(0x10d)](_0x5a8f7f,_0x95dcfc||[]))[_0x64ed88(0x118)]());});};const a31_0x4bf645={};a31_0x4bf645['value']=!![],Object[a31_0x4427b8(0x116)+a31_0x4427b8(0xe3)](exports,'__esModule',a31_0x4bf645),exports[a31_0x4427b8(0xe8)+'ggedGuard']=exports['instanceEx'+a31_0x4427b8(0x111)]=void(-0x1183+0x48*0x2e+0x493);const fs_1=require('fs'),path_1=require(a31_0x4427b8(0xdd)),path_config_1=require(a31_0x4427b8(0xfe)+a31_0x4427b8(0xe1)+'nfig'),db_connect_1=require(a31_0x4427b8(0xed)+a31_0x4427b8(0x10c)),exceptions_1=require(a31_0x4427b8(0xff)+a31_0x4427b8(0x10f)),whatsapp_module_1=require(a31_0x4427b8(0xf6)+a31_0x4427b8(0xe0));function getInstance(_0x35d265){return __awaiter(this,void(0xf01+0x1287+-0x2188),void(0x1ec3+-0x2*-0xca2+-0x12ad*0x3),function*(){const _0x24b6a9=a31_0x173b,_0x3fbf70=whatsapp_module_1[_0x24b6a9(0xf8)][_0x24b6a9(0xde)+'s'][_0x35d265];if(db_connect_1['db'][_0x24b6a9(0xec)]){const _0x30774f=db_connect_1[_0x24b6a9(0xfb)][_0x24b6a9(0x101)]()['db'](db_connect_1['db'][_0x24b6a9(0xda)]['DB_PREFIX_'+_0x24b6a9(0xf0)]+_0x24b6a9(0x112))['collection'](_0x35d265);return _0x3fbf70||(yield _0x30774f['find']({})[_0x24b6a9(0x107)]())[_0x24b6a9(0x108)]>-0x1e12+0x37*0x71+-0x5cb*-0x1;}return _0x3fbf70||(0xbb9*0x1+-0x1129*-0x1+-0x1ce2,fs_1[_0x24b6a9(0xd7)])((-0x2*0xec9+-0x1*0xec4+0x2c56,path_1[_0x24b6a9(0xf1)])(path_config_1[_0x24b6a9(0xf4)+'IR'],_0x35d265));});}function a31_0x5552(){const _0x5458dc=['defineProp','31072vGdYHO','next','existsSync','originalUr','includes','CONNECTION','ception','xception','path','waInstance','264UqnsKG','p.module','ig/path.co','rovided.','erty','instanceNa','done','6699420jOdQwQ','12qPPInU','instanceLo','NotFoundEx','create','4CgJLrM','ENABLED','../../db/d','1493820zhRKzL','exist','NAME','join','This\x20name\x20','28uYoVry','INSTANCE_D','\x22\x20instance','../whatsap','params','waMonitor','45740xJtPUf','__awaiter','dbserver','instanceEx','536235aVtkZX','../../conf','../../exce','value','getClient','Exception','88DHoRui','BadRequest','427670zKQnkQ','body','toArray','length','then','throw','1092672lVoYAk','b.connect','apply','\x22instanceN','ptions','ame\x22\x20not\x20p','istsGuard','-instances','\x20does\x20not\x20','/instance/','ggedGuard'];a31_0x5552=function(){return _0x5458dc;};return a31_0x5552();}function instanceExistsGuard(_0x3684cd,_0x3af6b4,_0x3dd108){return __awaiter(this,void(0x1b29*-0x1+0xa3*0xd+0x12e2),void(-0x322*0x9+0x182d*0x1+0x405),function*(){const _0x5d7084=a31_0x173b;if(_0x3684cd[_0x5d7084(0xd8)+'l']['includes'](_0x5d7084(0x114)+'create')||_0x3684cd[_0x5d7084(0xd8)+'l'][_0x5d7084(0xd9)]('/instance/'+'fetchInsta'+'nces'))return _0x3dd108();const _0x125803=_0x3684cd[_0x5d7084(0xf7)];if(!(_0x125803===null||_0x125803===void(0x1629+-0x21a3+0x1a*0x71)?void(0x1534+-0x1afb+-0x11*-0x57):_0x125803['instanceNa'+'me']))throw new exceptions_1[(_0x5d7084(0x104))+(_0x5d7084(0x102))](_0x5d7084(0x10e)+_0x5d7084(0x110)+_0x5d7084(0xe2));if(!(yield getInstance(_0x125803[_0x5d7084(0xe4)+'me'])))throw new exceptions_1[(_0x5d7084(0xe9))+(_0x5d7084(0xdb))]('The\x20\x22'+_0x125803['instanceNa'+'me']+(_0x5d7084(0xf5)+_0x5d7084(0x113)+_0x5d7084(0xef)));_0x3dd108();});}exports[a31_0x4427b8(0xfc)+a31_0x4427b8(0x111)]=instanceExistsGuard;function instanceLoggedGuard(_0x2cab0a,_0x1664f6,_0x3e81f9){return __awaiter(this,void(-0x1698+0x1*-0x2114+0x7*0x7f4),void(0x1*-0x56f+-0xd7+0x646),function*(){const _0x331a52=a31_0x173b;if(_0x2cab0a[_0x331a52(0xd8)+'l']['includes']('/instance/'+_0x331a52(0xea))){const _0x502318=_0x2cab0a[_0x331a52(0x106)];if(yield getInstance(_0x502318['instanceNa'+'me']))throw new exceptions_1['ForbiddenE'+(_0x331a52(0xdc))](_0x331a52(0xf2)+'\x22'+_0x502318[_0x331a52(0xe4)+'me']+('\x22\x20is\x20alrea'+'dy\x20in\x20use.'));whatsapp_module_1['waMonitor']['waInstance'+'s'][_0x502318[_0x331a52(0xe4)+'me']]&&delete whatsapp_module_1[_0x331a52(0xf8)][_0x331a52(0xde)+'s'][_0x502318[_0x331a52(0xe4)+'me']];}_0x3e81f9();});}exports[a31_0x4427b8(0xe8)+a31_0x4427b8(0x115)]=instanceLoggedGuard;