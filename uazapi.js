const a0_0xf2a334=a0_0x464b;(function(_0x36e24c,_0x2039d2){const _0x10f741=a0_0x464b,_0x3fbd7b=_0x36e24c();while(!![]){try{const _0x1cb144=-parseInt(_0x10f741(0x6ba))/0x1+parseInt(_0x10f741(0x8b5))/0x2*(-parseInt(_0x10f741(0x8ee))/0x3)+parseInt(_0x10f741(0x8fe))/0x4*(-parseInt(_0x10f741(0x23a))/0x5)+-parseInt(_0x10f741(0x903))/0x6*(parseInt(_0x10f741(0x73b))/0x7)+-parseInt(_0x10f741(0x386))/0x8*(-parseInt(_0x10f741(0x7d1))/0x9)+parseInt(_0x10f741(0x258))/0xa*(-parseInt(_0x10f741(0x5af))/0xb)+parseInt(_0x10f741(0x839))/0xc*(parseInt(_0x10f741(0x3ec))/0xd);if(_0x1cb144===_0x2039d2)break;else _0x3fbd7b['push'](_0x3fbd7b['shift']());}catch(_0x4cd852){_0x3fbd7b['push'](_0x3fbd7b['shift']());}}}(a0_0x2ab8,0x4acca));var Wi=Object[a0_0xf2a334(0x2d0)],Ve=Object[a0_0xf2a334(0x6de)],zi=Object['getOwnPropertyDescriptor'],Hi=Object[a0_0xf2a334(0x454)],Ki=Object[a0_0xf2a334(0x34a)],Qi=Object['prototype'][a0_0xf2a334(0x5f6)],Yi=(_0x5c8995,_0x25f923)=>{for(var _0x14d552 in _0x25f923)Ve(_0x5c8995,_0x14d552,{'get':_0x25f923[_0x14d552],'enumerable':!0x0});},Bs=(_0x16b806,_0x1e53b4,_0x40d02e,_0x40e8de)=>{const _0x48cf83=a0_0xf2a334;if(_0x1e53b4&&typeof _0x1e53b4==_0x48cf83(0x524)||typeof _0x1e53b4==_0x48cf83(0x17d)){for(let _0xc8d7fc of Hi(_0x1e53b4))!Qi[_0x48cf83(0x684)](_0x16b806,_0xc8d7fc)&&_0xc8d7fc!==_0x40d02e&&Ve(_0x16b806,_0xc8d7fc,{'get':()=>_0x1e53b4[_0xc8d7fc],'enumerable':!(_0x40e8de=zi(_0x1e53b4,_0xc8d7fc))||_0x40e8de[_0x48cf83(0x71c)]});}return _0x16b806;},I=(_0x169c97,_0x22d3c4,_0x3004b8)=>(_0x3004b8=_0x169c97!=null?Wi(Ki(_0x169c97)):{},Bs(_0x22d3c4||!_0x169c97||!_0x169c97[a0_0xf2a334(0x60d)]?Ve(_0x3004b8,a0_0xf2a334(0x59e),{'value':_0x169c97,'enumerable':!0x0}):_0x3004b8,_0x169c97)),Xi=_0x2f4444=>Bs(Ve({},a0_0xf2a334(0x60d),{'value':!0x0}),_0x2f4444),gr={};Yi(gr,{'fullURL':()=>Gs,'subdomain':()=>he}),module[a0_0xf2a334(0x704)]=Xi(gr);var Ui=I(require(a0_0xf2a334(0x5d4))),zs=require('fs'),Hs=require(a0_0xf2a334(0x2a4)),Ks=require('path'),Ge=require(a0_0xf2a334(0x618)),ne=process['cwd'](),be=(0x0,Ge[a0_0xf2a334(0x666)])(ne,a0_0xf2a334(0x89e)),Ws=(0x0,Ge['join'])(ne,a0_0xf2a334(0x5d2)),fn=(0x0,Ge[a0_0xf2a334(0x666)])(ne,a0_0xf2a334(0x4a4),a0_0xf2a334(0x1a5)),us=class{constructor(){const _0x1f6a7a=a0_0xf2a334;this[_0x1f6a7a(0x767)]();}[a0_0xf2a334(0x4c6)](_0x415300){return this['env'][_0x415300];}[a0_0xf2a334(0x767)](){const _0x408dab=a0_0xf2a334;this[_0x408dab(0x71e)]=process['env']?.[_0x408dab(0x697)]!==_0x408dab(0x2c5)?this[_0x408dab(0x52b)]():this['envProcess'](),process[_0x408dab(0x71e)]?.[_0x408dab(0x697)]===_0x408dab(0x2c5)&&(this['env'][_0x408dab(0x902)][_0x408dab(0x8eb)]=_0x408dab(0x516),this['env']['SERVER'][_0x408dab(0x218)]=Number[_0x408dab(0x2f1)](process[_0x408dab(0x71e)]?.[_0x408dab(0x53c)]??_0x408dab(0x1ab)));}['envYaml'](){const _0x511d14=a0_0xf2a334;return(0x0,Hs[_0x511d14(0x808)])((0x0,zs[_0x511d14(0x247)])((0x0,Ks['join'])(Ws,_0x511d14(0x260)),{'encoding':'utf-8'}));}[a0_0xf2a334(0x5cc)](){const _0x284dcf=a0_0xf2a334;return{'SERVER':{'TYPE':process[_0x284dcf(0x71e)][_0x284dcf(0x3c2)],'PORT':Number[_0x284dcf(0x2f1)](process[_0x284dcf(0x71e)][_0x284dcf(0x53c)]),'URL':process[_0x284dcf(0x71e)]['SERVER_URL']},'CORS':{'ORIGIN':process[_0x284dcf(0x71e)][_0x284dcf(0x445)]['split'](','),'METHODS':process[_0x284dcf(0x71e)][_0x284dcf(0x7b0)][_0x284dcf(0x8a0)](','),'CREDENTIALS':process[_0x284dcf(0x71e)]?.['CORS_CREDENTIALS']==='true'},'SSL_CONF':{'PRIVKEY':process['env']?.[_0x284dcf(0x5f1)],'FULLCHAIN':process[_0x284dcf(0x71e)]?.[_0x284dcf(0x8bc)]},'STORE':{'CLEANING_INTERVAL':Number[_0x284dcf(0x794)](process[_0x284dcf(0x71e)]?.['STORE_CLEANING_TERMINAL'])?Number['parseInt'](process[_0x284dcf(0x71e)][_0x284dcf(0x232)]):void 0x0,'MESSAGES':process[_0x284dcf(0x71e)]?.[_0x284dcf(0x1a8)]===_0x284dcf(0x2c5),'CONTACTS':process[_0x284dcf(0x71e)]?.[_0x284dcf(0x599)]===_0x284dcf(0x2c5),'CHATS':process[_0x284dcf(0x71e)]?.[_0x284dcf(0x432)]===_0x284dcf(0x2c5)},'DATABASE':{'CONNECTION':{'HOST':process[_0x284dcf(0x71e)]?.['DATABASE_CONNECTION_HOST'],'PORT':Number['parseInt'](process['env']?.[_0x284dcf(0x783)]),'USER':process[_0x284dcf(0x71e)][_0x284dcf(0x2ff)],'PASSWORD':process[_0x284dcf(0x71e)][_0x284dcf(0x188)],'URI':process[_0x284dcf(0x71e)]['DATABASE_CONNECTION_URI'],'DB_PREFIX_NAME':process[_0x284dcf(0x71e)]['DATABASE_CONNECTION_DB_PREFIX_NAME']},'ENABLED':process[_0x284dcf(0x71e)]?.['DATABASE_ENABLED']==='true'},'REDIS':{'ENABLED':process[_0x284dcf(0x71e)]?.[_0x284dcf(0x3b2)]===_0x284dcf(0x2c5),'URI':process[_0x284dcf(0x71e)][_0x284dcf(0x411)]||_0x284dcf(0x581),'PREFIX_KEY':process['env']['REDIS_PREFIX_KEY']||'uazapi'},'LOG':{'LEVEL':process[_0x284dcf(0x71e)]?.['LOG_LEVEL'][_0x284dcf(0x8a0)](','),'COLOR':process[_0x284dcf(0x71e)]?.['LOG_COLOR']===_0x284dcf(0x2c5)},'PROXY':process[_0x284dcf(0x71e)]?.[_0x284dcf(0x63c)]===_0x284dcf(0x2c5),'AUTHENTICATION':{'TYPE':process['env'][_0x284dcf(0x47d)],'API_KEY':{'KEY':process[_0x284dcf(0x71e)]['AUTHENTICATION_API_KEY']},'JWT':{'EXPIRIN_IN':Number[_0x284dcf(0x794)](process[_0x284dcf(0x71e)]?.['AUTHENTICATION_JWT_EXPIRIN_IN'])?Number[_0x284dcf(0x2f1)](process[_0x284dcf(0x71e)][_0x284dcf(0x4a0)]):0xe10,'SECRET':process[_0x284dcf(0x71e)]['AUTHENTICATION_JWT_SECRET']}}};}},S=new us(),ji=I(require(a0_0xf2a334(0x36c))),we=I(require(a0_0xf2a334(0x3d3))),Vs=require(a0_0xf2a334(0x618)),ds=I(require(a0_0xf2a334(0x6d0))),ps=(_0x57ff2e=>(_0x57ff2e['LOG']=a0_0xf2a334(0x779),_0x57ff2e['INFO']='\x1b[34m',_0x57ff2e['WARN']=a0_0xf2a334(0x256),_0x57ff2e[a0_0xf2a334(0x2be)]=a0_0xf2a334(0x8b7),_0x57ff2e[a0_0xf2a334(0x843)]='\x1b[36m',_0x57ff2e[a0_0xf2a334(0x3cd)]=a0_0xf2a334(0x4a1),_0x57ff2e[a0_0xf2a334(0x498)]='\x1b[30m',_0x57ff2e))(ps||{}),Qs=(_0x40cfe2=>(_0x40cfe2['LOG']=a0_0xf2a334(0x52e),_0x40cfe2[a0_0xf2a334(0x498)]=a0_0xf2a334(0x8ea),_0x40cfe2['INFO']='\x1b[34m%s\x1b[0m',_0x40cfe2[a0_0xf2a334(0x4e5)]=a0_0xf2a334(0x643),_0x40cfe2[a0_0xf2a334(0x2be)]=a0_0xf2a334(0x696),_0x40cfe2['DEBUG']=a0_0xf2a334(0x4d5),_0x40cfe2[a0_0xf2a334(0x3cd)]=a0_0xf2a334(0x4ef),_0x40cfe2))(Qs||{}),Ys=(_0x10f960=>(_0x10f960[a0_0xf2a334(0x60f)]='LOG',_0x10f960['WARN']=a0_0xf2a334(0x4e5),_0x10f960['INFO']=a0_0xf2a334(0x307),_0x10f960[a0_0xf2a334(0x498)]=a0_0xf2a334(0x498),_0x10f960[a0_0xf2a334(0x2be)]=a0_0xf2a334(0x2be),_0x10f960['DEBUG']=a0_0xf2a334(0x843),_0x10f960[a0_0xf2a334(0x3cd)]=a0_0xf2a334(0x3cd),_0x10f960))(Ys||{}),Xs=(_0x591cd6=>(_0x591cd6['LOG']='\x1b[42m',_0x591cd6[a0_0xf2a334(0x307)]=a0_0xf2a334(0x163),_0x591cd6[a0_0xf2a334(0x4e5)]='\x1b[43m',_0x591cd6[a0_0xf2a334(0x498)]=a0_0xf2a334(0x15d),_0x591cd6[a0_0xf2a334(0x2be)]=a0_0xf2a334(0x75f),_0x591cd6[a0_0xf2a334(0x843)]=a0_0xf2a334(0x5a9),_0x591cd6[a0_0xf2a334(0x3cd)]=a0_0xf2a334(0x6e5),_0x591cd6))(Xs||{}),$=class{constructor(_0x122bf4=a0_0xf2a334(0x58e)){const _0x5e935e=a0_0xf2a334;this[_0x5e935e(0x835)]=_0x122bf4,this[_0x5e935e(0x566)]=S;}[a0_0xf2a334(0x265)](_0x91b76e){this['context']=_0x91b76e;}[a0_0xf2a334(0x815)](_0x676bac,_0x3a1b3b){const _0x465106=a0_0xf2a334;let _0x10fcd1=[];this[_0x465106(0x566)][_0x465106(0x4c6)](_0x465106(0x60f))[_0x465106(0x603)][_0x465106(0x3b5)](_0x7d722f=>_0x10fcd1[_0x465106(0x355)](Ys[_0x7d722f]));let _0x5501b9=typeof _0x676bac;_0x10fcd1[_0x465106(0x343)](_0x3a1b3b)&&(S['get'](_0x465106(0x60f))[_0x465106(0x819)]?(console[_0x465106(0x6b2)](_0x465106(0x23d)+Qs[_0x3a1b3b],_0x465106(0x84b),(0x0,ds[_0x465106(0x59e)])()[_0x465106(0x4b0)]('DD/MM\x20HH:mm:ss'),'\x1b[0m',ps[_0x3a1b3b]+Xs[_0x3a1b3b]+'\x1b[1m',_0x3a1b3b+'\x20\x1b[0m',_0x465106(0x5ae),this[_0x465106(0x835)]+_0x465106(0x75b),ps[_0x3a1b3b],_0x5501b9!==_0x465106(0x524)?_0x676bac:'','\x1b[0m'),_0x5501b9==='object'&&console['log'](_0x676bac,'\x0a')):console[_0x465106(0x6b2)]((0x0,ds['default'])()[_0x465106(0x4b0)](_0x465106(0x237)),_0x3a1b3b+'\x20',''+this[_0x465106(0x835)],_0x676bac));}['log'](_0x41aa41){this['console'](_0x41aa41,'LOG');}[a0_0xf2a334(0x5b4)](_0xe3cabb){const _0x2d49ab=a0_0xf2a334;this[_0x2d49ab(0x815)](_0xe3cabb,_0x2d49ab(0x307));}[a0_0xf2a334(0x25b)](_0x2b1a80){const _0x282bad=a0_0xf2a334;this[_0x282bad(0x815)](_0x2b1a80,'WARN');}['error'](_0x5acfea){const _0x8c2406=a0_0xf2a334;this[_0x8c2406(0x815)](_0x5acfea,_0x8c2406(0x2be));}[a0_0xf2a334(0x6a3)](_0x3ff89d){const _0x1ba750=a0_0xf2a334;this[_0x1ba750(0x815)](_0x3ff89d,'VERBOSE');}[a0_0xf2a334(0x8ba)](_0x3c819a){const _0x55363a=a0_0xf2a334;this[_0x55363a(0x815)](_0x3c819a,_0x55363a(0x843));}[a0_0xf2a334(0x6d1)](_0x1ff983){this['console'](_0x1ff983,'DARK');}};function Zs(){const _0x5fc729=a0_0xf2a334;process['on'](_0x5fc729(0x1b2),(_0x213f2c,_0x3c1b0c)=>{const _0x46f5a8=_0x5fc729;new $(_0x46f5a8(0x1b2))[_0x46f5a8(0x830)]({'origin':_0x3c1b0c,'stderr':process[_0x46f5a8(0x365)]['fd'],'error':_0x213f2c});}),process['on'](_0x5fc729(0x446),(_0xc3f064,_0x542b47)=>{const _0x5e7dee=_0x5fc729;new $(_0x5e7dee(0x446))[_0x5e7dee(0x830)]({'origin':_0x542b47,'stderr':process[_0x5e7dee(0x365)]['fd'],'error':_0xc3f064});});}var ea=I(require(a0_0xf2a334(0x90b))),hs=new ea[(a0_0xf2a334(0x59e))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Se=require('mongoose'),Ae=I(require(a0_0xf2a334(0x277))),Be=new $(a0_0xf2a334(0x16f)),L=S[a0_0xf2a334(0x4c6)]('DATABASE'),T=L[a0_0xf2a334(0x6f6)]?L[a0_0xf2a334(0x174)][a0_0xf2a334(0x252)]?Ae[a0_0xf2a334(0x59e)][a0_0xf2a334(0x2da)](L[a0_0xf2a334(0x174)][a0_0xf2a334(0x252)],{'dbName':L[a0_0xf2a334(0x174)]['DB_PREFIX_NAME']+a0_0xf2a334(0x73a)}):Ae['default'][a0_0xf2a334(0x2da)](a0_0xf2a334(0x21c)+L[a0_0xf2a334(0x174)][a0_0xf2a334(0x2b1)]+':'+L[a0_0xf2a334(0x174)][a0_0xf2a334(0x218)]+a0_0xf2a334(0x8c5),{'user':L[a0_0xf2a334(0x174)][a0_0xf2a334(0x393)],'pass':L[a0_0xf2a334(0x174)][a0_0xf2a334(0x66a)],'dbName':L[a0_0xf2a334(0x174)][a0_0xf2a334(0x52a)]+'-whatsapp-api'}):null;L['ENABLED']&&Be[a0_0xf2a334(0x5b4)](a0_0xf2a334(0x1b0)+T[a0_0xf2a334(0x3bf)]);var Y=L['ENABLED']?L[a0_0xf2a334(0x174)][a0_0xf2a334(0x252)]?Ae[a0_0xf2a334(0x59e)][a0_0xf2a334(0x2da)](L[a0_0xf2a334(0x174)]['URI'],{'dbName':a0_0xf2a334(0x6ed)}):Ae[a0_0xf2a334(0x59e)]['createConnection']('mongodb://'+L['CONNECTION'][a0_0xf2a334(0x2b1)]+':'+L[a0_0xf2a334(0x174)][a0_0xf2a334(0x218)]+a0_0xf2a334(0x8c5),{'user':L[a0_0xf2a334(0x174)][a0_0xf2a334(0x393)],'pass':L[a0_0xf2a334(0x174)][a0_0xf2a334(0x66a)],'dbName':a0_0xf2a334(0x53a)}):null;Y&&Be[a0_0xf2a334(0x5b4)](a0_0xf2a334(0x1b0)+Y[a0_0xf2a334(0x3bf)]),process['on'](a0_0xf2a334(0x8f2),()=>{const _0x383930=a0_0xf2a334;T&&T[_0x383930(0x733)](()=>{const _0xe051f8=_0x383930;Be[_0xe051f8(0x5b4)](_0xe051f8(0x2a7));}),Y&&Y[_0x383930(0x733)](()=>{const _0x5e66be=_0x383930;Be[_0x5e66be(0x5b4)](_0x5e66be(0x4b5));});});var Zi=new Se[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),eo=new Se[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),to=new Se[(a0_0xf2a334(0x4e2))]({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),so=new Se[(a0_0xf2a334(0x4e2))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[Zi],'default':[]}},{'_id':!0x1}),ao=new Se[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':so,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':eo},'groupdata':{'type':to,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),ta=_0x387a1b=>{const _0x46b715=a0_0xf2a334;let _0x38acb6='z_'+_0x387a1b+_0x46b715(0x8f4);return T?.[_0x46b715(0x38d)](_0x46b715(0x22d),ao,_0x38acb6);},sa=require(a0_0xf2a334(0x277)),io=new sa['Schema']({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),aa=_0x534d0b=>{const _0xf3e50b=a0_0xf2a334;let _0x23cb93='z_'+_0x534d0b+'_Contacts';return T?.[_0xf3e50b(0x38d)](_0xf3e50b(0x640),io,_0x23cb93);},ia=require(a0_0xf2a334(0x277)),gs=class{},oo=new ia[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),oa=Y?.[a0_0xf2a334(0x38d)](gs['name'],oo,a0_0xf2a334(0x4ba)),ra=require('mongoose'),ms=class{},ro=new ra['Schema']({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),We=Y?.[a0_0xf2a334(0x38d)](ms[a0_0xf2a334(0x76f)],ro,a0_0xf2a334(0x89e)),ws=require(a0_0xf2a334(0x277)),fs=class{},no=new ws[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),co=new ws[(a0_0xf2a334(0x4e2))]({'_id':{'type':String},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),na=Y?.['model'](fs[a0_0xf2a334(0x76f)],co,a0_0xf2a334(0x552)),ca=_0x344353=>{const _0x3fcce7=a0_0xf2a334;let _0x14991e='z_'+_0x344353+'_Messages';return T?.['model'](_0x3fcce7(0x8f6),no,_0x14991e);},la=require(a0_0xf2a334(0x277)),ys=class{},lo=new la['Schema']({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),ua=T?.[a0_0xf2a334(0x38d)](ys[a0_0xf2a334(0x76f)],lo,a0_0xf2a334(0x5fe)),da=require(a0_0xf2a334(0x277)),bs=class{},pa=new da[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});pa['pre'](a0_0xf2a334(0x88e),function(_0x41f219){const _0x58b9f4=a0_0xf2a334;delete this[_0x58b9f4(0x6fc)],delete this[_0x58b9f4(0x8d7)],delete this[_0x58b9f4(0x2ac)],delete this[_0x58b9f4(0x17f)],delete this[_0x58b9f4(0x562)],_0x41f219();});var ha=T?.[a0_0xf2a334(0x38d)](bs[a0_0xf2a334(0x76f)],pa,'webhook'),P=require(a0_0xf2a334(0x277)),Ss=require(a0_0xf2a334(0x8cf)),ze=class{},Ms=class{},ma=new P[(a0_0xf2a334(0x4e2))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Cs=new P[(a0_0xf2a334(0x4e2))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),uo=new P[(a0_0xf2a334(0x4e2))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0xf2a334(0x3ad)},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0xf2a334(0x73e)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0xf2a334(0x6df)},'pollErrorMessage':{'type':String,'default':a0_0xf2a334(0x272)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),fa=new P[(a0_0xf2a334(0x4e2))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),po=new P[(a0_0xf2a334(0x4e2))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),ho=new P['Schema']({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Es=new P['Schema']({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),go=new P[(a0_0xf2a334(0x4e2))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),wa=new P['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':uo},'apirequest':po,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':go,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),ya=new P['Schema']({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),ba=new P[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[Es],'blocks':[wa],'groups':[ma],'conditions':[fa],'varedits':[ya],'replyOptions':{'type':[Cs],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x538d87=a0_0xf2a334;return'!cmd_'+Math['random']()['toString'](0x24)[_0x538d87(0x662)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':a0_0xf2a334(0x495)},'startID':{'type':String,'default':()=>(0x0,Ss['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ss['v4'])()},'shareOwners':{'type':[String],'default':[]}});ba[a0_0xf2a334(0x757)](a0_0xf2a334(0x181),function(_0x5cc12c){const _0x472836=a0_0xf2a334;let _0x5bfe2b=this[_0x472836(0x1e1)]();if(_0x5bfe2b&&typeof _0x5bfe2b==_0x472836(0x524)&&_0x472836(0x5ca)in _0x5bfe2b){let _0x5dce5e=_0x5bfe2b[_0x472836(0x5ca)];if(_0x5dce5e){let _0x5c136a=new Set(),_0x5368d4=new Set(_0x5dce5e[_0x472836(0x613)]?.[_0x472836(0x5b0)](_0x6491cf=>_0x6491cf['name'])),_0x3d0962=JSON[_0x472836(0x34b)](_0x5dce5e),_0x5d0b11=/{{(?!_)([^}]*)}}/g,_0x12f735;for(;(_0x12f735=_0x5d0b11[_0x472836(0x6f8)](_0x3d0962))!==null;)_0x5368d4[_0x472836(0x711)](_0x12f735[0x1])||_0x5c136a['add'](_0x12f735[0x1]);_0x5c136a[_0x472836(0x80b)]>0x0?(console[_0x472836(0x25b)](_0x472836(0x4a3),Array[_0x472836(0x1a3)](_0x5c136a)),_0x5dce5e[_0x472836(0x164)]=Array[_0x472836(0x1a3)](_0x5c136a)):_0x5dce5e[_0x472836(0x164)]=[],this[_0x472836(0x905)]({'$set':_0x5dce5e});}}_0x5cc12c();});function a0_0x2ab8(){const _0x3b474f=['Opção\x20Falsa\x20','):\x20Query\x20params:','sha256','\x20foi\x20interrompido\x20pelo\x20usuário.','jsonschema','readFile','reconnectAttempts','):\x20Fluxo\x20\x27','agents','STORE','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','Mensagem\x20não\x20suportada','initializeQueue','audio/ogg','Mensagem\x20perdida,\x20não\x20foi\x20possível\x20descriptografá-la,\x20abra\x20o\x20WhatsApp\x20no\x20seu\x20celular\x20para\x20visualizá-la','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','storePath','tags','Group\x20not\x20found','chats','listType','load','pendingMessages','message','size','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','Failed\x20to\x20prepare\x20media\x20message','Pausado\x20por\x20','readMessage','sendMessageAck','):Hash\x20to\x20image\x20name:\x20','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','copyBlock','console','Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup','\x20and\x20data:','modifiedCount','COLOR','):Audio\x20converted\x20and\x20stored\x20in\x20cache','nome','Message\x20absent\x20from\x20node','presenceSubscribe','findMany','end','admin','connectToWhatsapp','editflow','scheduleSendText','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','FULLCHAIN','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','delaySecMax','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','All_Instances_Config','unreadcount','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','):\x20debug\x20alterando\x20this.AutomateSystem','menu_options','Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture','CHATS_SET','error','Error\x20parsing\x20JSON:','groupUpdateDescription','stateConnection','match','context','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','):\x20Buscando\x20conversa...','updatePresence','12RInZra','messageContextInfo','makeCacheableSignalKeyStore','saveMediaToFile','CONNECTION_UPDATE','/64\x20dev\x20','apply','):\x20expirationTime:\x20','Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','DEBUG','onWhatsApp','repeat','createFlow','expiration','connectionState','.extension','g-t','\x1b[1m\x1b[37m','.xlsx','convertToString','findConversation','owner','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','https://uazapi-plugin.bubbleapps.io/?url=','test','replacer','Invalid\x20format','errorLog','privacySettings','findAll','Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...','MAX_SAFE_INTEGER','profilePictureUrl','groupGetInviteInfo','.\x20Pulando.','READ','buttonsResponseMessage','_activatedCount','updatePrivacySettings','TEL','):\x20Ignoring\x20group\x20messages.','\x20inseridas\x20no\x20banco\x20de\x20dados...','removed','groupSettingUpdate','removeData','STATUS_INSTANCE','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','basename','display_text','prototype','StatusJidList\x20is\x20required','findFlow','available','Unauthorized','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','readMessages','startCommand','findGroups','Flow\x20iniciado\x20com\x20','/media/','originalUrl','.gif','removeUnusedChatFields','flattenObject','cacheContactModel','trimmed','status@broadcast','\x22,\x20valor\x20a\x20substituir:\x20\x22','Erro\x20ao\x20substituir\x20variáveis\x20para\x20','OrAnd','ObjectId','deleteMany','METHODS','oldToken','delayMessage','@redis/client','stickerMessage','archiveChat','Adicionando\x20novo\x20participante:\x20','inviteCode','whoCanEdit','mediaMessage','verify','truncatedtoEnd','save','Data\x20inválida\x20fornecida','isMessageProcessed','instanceCount','authState','flushHeaders','webhookService','):\x20Enviando\x20áudio','start','):\x20teve\x20mudanças\x20chat.archived:\x20','mediaKey','):\x20Removendo\x20\x27','END:VCARD','\x20do\x20chat\x20','GET','IPv6\x20recriado\x20após\x20falhas\x20de\x20reconexão.','instances','groupDesc','split','AddUserFlow','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo','_Labels','user','.mp4','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','nativeFlowMessage','whoCanUse','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','addBlock','updateProfileName','Falha\x20após\x205\x20tentativas:\x20','Last\x20message\x20not\x20found','):\x20[messages.upsert]\x20mensagem\x20duplicada\x20ignorada','detectIPv6PrefixAndInterface','Erro\x20ao\x20buscar\x20Schedule\x20Messages','leadInfo.','):\x20\x27Enviando\x20audio\x20para\x20\x27','rows','Erro\x20ao\x20atualizar\x20o\x20flow.','10WXBUxZ','bulkWrite','\x1b[31m','pm2\x20flush','application/json','debug','all_member_add','SSL_CONF_FULLCHAIN','sendWhatsAppAudio','CHATS_UPSERT','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','use','findIndex','GROUP_PARTICIPANTS_UPDATE','deleted','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','?authSource=admin&readPreference=primary&directConnection=true','latitude','decryptPollVote','sections','uazapiSendMedia','Falhou\x20ao\x20encontrar\x20chat\x20','inner','moreLogs','Erro\x20ao\x20importar\x20chats','testingWith','uuid','copy','pollOnReplyDelete','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.','processConditions','Detalhes\x20do\x20erro:','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','editFlow','flowIgnoreGroups','changeVariables','Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','request_method','proxy:\x20','joinGroup','writeData','endsWith','height','pollCreationMessageKey','https://api.elevenlabs.io/v1/text-to-speech/','setHeader','Número:\x20','SendScheduleMessage','/webhook','Limpando\x20logs\x20do\x20PM2...','deleteInstance','editFlowBlock','sendMedia','\x1b[30m%s\x1b[0m','TYPE','readData','sendLocation','168735ctFDMy','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','https://jsonip.com','Falta\x20informação\x20para\x20a\x20chamada\x20API','beforeExit','instance.','_Chats','startCommandWord','MessageModel','quoted','[TESTE\x20RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','createButtonSectionsFromValues','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','\x20:\x20','choices','4zZJLoF','processScheduleFlow','Instance\x20\x22','lastRealGroupsFetch','SERVER','248550AHEyLp','ipv6Prefix','setUpdate','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','Error\x20removing\x20IPv6\x20address:\x20','Instância\x20não\x20encontrada.','_ScheduleMessages','}}\x20->\x20valor\x20não\x20encontrado','eventemitter2','importChats','client','restartInstance','valid','customFields','):\x20Enviando\x20mídia','EXPIRIN_IN','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','conditions','Erro\x20ao\x20editar\x20agentes','Erro\x20ao\x20alterar\x20fluxo','timeoutPromise','hSet','\x1b[40m','groupUpdateSubject','stopWhenYouSendMsg','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo','detail','views','\x1b[44m','variablesNotFound','query','Content\x20is\x20required','toggleEphemeral','createGroup','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','waUploadToServer','string',',\x20Resultado:\x20','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','presence.update','Db\x20Connection','composing','child_process','unavailable','jwt','CONNECTION','Falha\x20ao\x20processar\x20fetchBusinessProfile','statusJidList','reaction','@whiskeysockets/baileys','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','Types','substring','command','function','scheduleFlow','flowStopConversation','pino','findOneAndUpdate','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','DATABASE','MESSAGES_UPSERT','The\x20property\x20cannot\x20be\x20empty','[all]','Erro\x20ao\x20atualizar\x20o\x20fluxo:','DATABASE_CONNECTION_PASSWORD','fetchProfile','findOne','remove.instance','processingGroup','uazapiSendContact','.type','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','\x5cd+','):\x20Criando\x20nova\x20conversa[createNewConversation]','request\x20received\x20in\x20getAutomateSystem','collections','Erro\x20ao\x20buscar\x20o\x20fluxo','instanceName\x20not\x20provided.','https://github.com/uazapi/uazapi.git','scheduled','AddChatLabel','currency','sendPresenceUpdate','):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20','updateGParticipant','release','):Image\x20path:\x20','Erro\x20ao\x20criar\x20fluxo','ex:\x20\x22groupJid=120362@g.us\x22','GROUPS_UPSERT','Missing\x20global\x20api\x20key','from','post','auth','):\x20Buscando\x20flow,\x20id:\x20','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','STORE_MESSAGE','toBrazilianNumberFormat','blockId','8080','):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!','buttonText','prepareMediaMessage','LICENSE_INVALID','ON\x20-\x20dbName:\x20','image','uncaughtException','hex','leadInfo.customFields','condition','):\x20mediaMessageInfoId\x20:\x20','application/octet-stream','apikey','https','Erro\x20ao\x20copiar\x20o\x20documento','localWebhook','delayChatLabel','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','createButtonsFromValues','findByIdAndDelete','add','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','KEY','):\x20Editando\x20grupo\x20do\x20fluxo...','remoteJids','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','fullName','label','chatLog','):\x20customFieldVariables','last_update','createNewConversation','mentioned','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','random','importChatsAntigo','evaluateCondition','importChatsBatch','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting','namespace','createWebhook','.wav','groupRevokeInvite','):\x20nextBlock.uazapi.name','RemoteJid:','segundos','):\x20Reconectando\x20serviço\x20de\x20mensagens\x20após\x20limpeza.','):Notifying\x20clients\x20for\x20chat:\x20','applyvaredit','\x20excess\x20IPv6\x20addresses.','leadInfo','request\x20received\x20in\x20starFlow','getUpdate','font','updateLastSeenPrivacy','clear','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','_fromMe','flow','Content-Type','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','createConversationforStartFlow','variable','/instance/create',',\x20saindo.','maxActives','message_normalized','):\x20Comando\x20desconhecido:\x20','Erro\x20de\x20atualização:\x20','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','nomecompleto','dbConnection','Erro\x20ao\x20arquivar\x20chat','unreadCount','lastCondition','findManyByIds','getDate','InstancesAlterarTodas','creds.update','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','replaceVariablesChat','.pdf','group','base64',',\x20received\x20','.svg','restrict','removeIPv6','upperCase','authModel','messages','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','deviceSentMessage','pictureUrl','minutesToClose','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','toString','lastInteraction','insertMany','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName','\x20não\x20encontrado\x20para\x20cópia','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','send','HistoryProcessed\x20definido\x20como\x20true\x20após\x202\x20minutos.','fetchChats','badSession','PORT','getflow','pollCreationMessageV2','downloads','mongodb://','updateMediaMessage','Total\x20de\x20endereços\x20IPv6\x20após\x20a\x20limpeza:\x20','processPollUpdateMessage','instanceKeys','deleteOne','router','Erro\x20na\x20função\x20updateChatWithMessage:\x20','\x20com\x20sucesso.','Valor\x20da\x20URL\x20recuperada:','chats.update','update','messages.update','Internal\x20Server\x20Error','crypto','ip6eui','initAuthCreds','ChatModel','description','):Getting\x20image\x20from\x20url','linkPreview','):Business\x20profile\x20fetched','STORE_CLEANING_TERMINAL','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','response','not_announcement','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','HH:mm:ss','request\x20received\x20in\x20scheduleMessage','leaveGroup','1757605pTqaIh','):\x20Entrou\x20na\x20função\x20stop','):\x20Iniciando\x20bot...','\x1b[1m','participant','):Image\x20converted\x20to\x20WebP','Fluxo\x20não\x20encontrado\x20na\x20memória.','write','The\x20\x22','):\x20[messages.update]\x20group\x20ignored','request_time','getValidWhatsAppNumbers','deleteAllMessages','readFileSync','every','Enter\x20a\x20value\x20in\x20milliseconds','reactionMessage','startFlowWebhook','static','autoCompleteMessages.command','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','vote','length','editFlowCondition','URI','integer','cleaningUp','contacts.update','\x1b[33m','Conversa\x20deletada\x20com\x20sucesso.','5360TCFVOj','array','randomMac','warn','Erro\x20ao\x20iniciar\x20fluxo:\x20','DELIVERY_ACK','set','\x20}\x0a','../env.yml','emit','processedMessagesCache','/5\x20falhou:\x20','qrcode-terminal','setContext','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','useMultiFileAuthState','subject','Total\x20IPv6\x20addresses\x20detected:\x20','sendCommand','replyOption','uazapiSendText','sendMessageWithRetry','_year','insert','triedToSend','_pushName','Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','The\x20global\x20api\x20key\x20must\x20be\x20set','Cannot\x20','mongoose','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','/automate','profileName','.jwt','conversationTimestamp','pushName','/wa-all-message','Instance\x20Key\x20from\x20DB:','paused','createAndSave','getMIMEType','groupAcceptInvite','list2','demote','notas','https://ipv6.jsonip.com','No\x20suitable\x20network\x20interface\x20found','Rodapé\x20de\x20Teste','\x27\x20removido\x20do\x20AutomateSystem.','Router','key','The\x20',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','mkdirSync','):\x20Mensagem\x20já\x20enviada\x20para\x20','groupJid','contacts','Generated\x20IPv6:\x20','Erro\x20ao\x20alterar\x20privacidade','pop','getLabelModelForOwner','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','Log\x20out\x20instance:\x20','admin_add','_id','instanceName','updateChatWithMessage','ORG:','This\x20name\x20','selectableCount','\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','replaceOne','Partes\x20do\x20domínio:','js-yaml','off','):Converted\x20image\x20deleted','Database\x20connection\x20closed.','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','https://','updateProfileStatus','findGroup','flowPrefixCommand','loggedOut','URL\x20completa:','waInstances','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','HOST','removeChatLabel','Type\x20not\x20found','url','Erro\x20ao\x20buscar\x20a\x20conversa','./.git/config','firstValue','findAndReplaceRegex','findAndUpdateCacheContact','single_select','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','formatBRNumber','):\x20Alterando\x20fluxo...','ERROR','Falha\x20ao\x20criar\x20IPv6.','):\x20Limpando\x20AutomateSystem','stopMinutes','sendSticker','updateMissingCustomFields','chatModify','true','reorderReplyOptions','/message','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','buttonOrList_id','groups.upsert','Removing\x20excess\x20IPv6\x20address:\x20','stopMinutesMaxActives','IPv6\x20addresses\x20detected:\x20','updateAgent','longitude','create','blockLogs','request\x20received\x20in\x20deleteDoneMessages','autoCompleteMessages.command_1','):\x20Todos\x20os\x20grupos\x20de\x20mensagens\x20foram\x20deletados\x20com\x20sucesso.','jsonwebtoken','CONECTADO\x20À\x20UAZAPI','convertaudioMP3','getBusinessProfile','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','createConnection','CHATS_UPDATE','dataValidate','Database\x20is\x20not\x20enabled','keyPattern','unlinkSync','mimetype','documentMessage','fetchBusinessProfile','Error\x20fetching\x20and\x20updating\x20profile:\x20','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','groupadd','):\x20Bloco\x20original\x20para\x20cópia:\x20','\x20segundos...','editFlowVariable','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','updateOneById','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','existsSync','processgoToFlow','$pull','Error\x20finding\x20many\x20contacts:','startsWith','parseInt','chats.upsert','optionName','subjectOwner','\x20-y','Mac\x20OS','processawaitSeconds','closeExistingConversations','Error\x20updating\x20message\x20status:','editFlowReply','chat','Instance\x20deleted','capitalizedWords','request\x20received\x20in\x20editFlowgroup','DATABASE_CONNECTION_USER','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage','etiquetas','parse','role','generateRandomIPv6','):\x20Label\x20','):\x20leadInfoVariables','INFO','audio','uazapi','\x0aFN:','fromObject','rowId','):\x20Criando\x20fluxo...','startID','isConnected','Fluxo\x20\x27','telefone','Primeiro\x20Valor:\x20','menuExpiredMessage','templateButtonReplyMessage','website','reject','globalShow','Error\x20fetching\x20IPv6\x20addresses:\x20','Removidas\x20as\x20variáveis:\x20','PREFIX_KEY','):\x20Bloco\x20com\x20ID\x20','ChatRouter','normalizeMessage','encoding','ip\x20-6\x20addr\x20show\x20dev\x20','online','document','IPv6\x20address\x20configured:\x20','groupJoinApprovalMode','Erro\x20ao\x20executar\x20bulkWrite:','sharp','):\x20Current\x20Time:\x20','headers','isValidIPv6Config','fromMe','createJid','contacts.upsert','getContactModelForOwner','updateGroupsAddPrivacy','body','updateOne','open','Error\x20in\x20prepareMediaMessage:','shift','done','optionDescription','numbers','cachedContact','findChats','min','):\x20Procurando\x20conversa','EMAIL:','CLEANING_INTERVAL','sendContact','bodyStringErrorParse','):\x20Enviando\x20contato','greater',',\x20Comparador:\x20','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','readreceipts','includes','SINGLE_SELECT','creds','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture','getConversationModelForOwner','readMessageBot','/instance/connectionState','getPrototypeOf','stringify','sendMessageWithTypingButtons','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','blocks','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','connectionStatus','Nenhum\x20fluxo\x20correspondente\x20encontrado.','Instâncias\x20removidas:\x20','updateMissingEtiquetas','Chat\x20com\x20ID\x20','push','processApiRequest','Configuração\x20SSL\x20recuperada:','fetchContacts','/wa-contacts','Erro\x20ao\x20atualizar\x20AutomateSystem:','Subscribed\x20Events:','lowerCase','HistoryProcessed','spawn',']\x20(','updateCustomFields','count','updateMany','dbInstance','presence','stderr','Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos','):\x20Usando\x20extensão\x20padrão:\x20','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','webhookMap','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','next_groupId','cors','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','https://ifconfig.me/ip','):\x20enviado\x20para\x20[','request\x20received\x20in\x20deleteConversation','Erro\x20ao\x20tentar\x20updateCustomFields','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','#6f7bcf','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','Rótulo\x20inválido\x20ou\x20sem\x20ID.','Not\x20is\x20business\x20profile','Type\x20is\x20required','sendMenu','.png','\x22\x20-\x20NOT\x20CONNECTION','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','SERVER_OFFLINE','Validate','):Image\x20is\x20base64','API_KEY','):\x20Chat\x20','groupCreate','):\x20Rótulo\x20atualizado:\x20','limit','):\x20Grupo\x20','16yauGZu','pollMessage','redis','/clients-info','#ff9484','imgUrl','):\x20Enviando\x20mensagem\x20para\x20','model','request\x20received\x20in\x20editFlowvariable','):\x20atualização\x20chat:\x20','myAppStateKeyId','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','mediaSticker','USER','validate','awaitSeconds','apiResponse','):\x20conversation.waitingMenu_name','padStart','announce','[service]\x20request\x20received\x20in\x20sendButtons','allContacts','Removed\x20','):\x20newFirstValue\x20após\x20replaceVariables:','and','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','axios','joinGroupValidate','Network\x20Interface\x20detected:\x20','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','cta_url','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','webhook','mongodb','#ffc5c7','DisconnectReason','IPv6\x20address\x20removed:\x20','relayMessage','this.reconnectAttempts:\x20','list','):\x20Entrou\x20na\x20função\x20processawaitSeconds','):Image\x20created','email','QRCODE_UPDATED','REDIS_ENABLED','promote','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','forEach','clearVariables','Message','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant','Deletion\x20failed','events','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','cacheInstanceModel','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','AutomateFunctions','$dbName','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','SERVER_TYPE','Falha\x20ao\x20preparar\x20a\x20mensagem\x20de\x20mídia\x20após\x205\x20tentativas:\x20','reference','\x20Tentativa\x20de\x20reconexão\x20','less','request\x20received\x20in\x20updateFlowConfig','deleteImportedChat','filter','leadInfo.atendimentoAberto','GROUPS_UPDATE','gifPlayback','VERBOSE','writeFile','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','toLowerCase','lastSendMessage','sendButtons','express','Nenhum\x20chat\x20encontrado\x20para\x20editar.','checkAndRestartProcess','userDevicesCache','setRestartTimeout','request\x20body:\x20','Not\x20Found','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','Comando\x20desconhecido','notify','):\x20Erro\x20durante\x20a\x20atualização:\x20','dbSettings','*Pergunta*:\x20\x0a','connect','Safari','Error\x20writing\x20file:\x20','):\x20Entrou\x20na\x20função\x20saveReply','Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20','keys','success','/media','loadWebhook','createIPv6','editflowblock','waitingMenu_id','20685743Gekvch','replaceVariablesInObject','request\x20received\x20in\x20updateAgent','):\x20Criou\x20conversa\x20no\x20startFlowWebhook','Filtered\x20network\x20interfaces:\x20','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','getAutomateSystem','redisEnv','isAdmin','singleSelectReply','color','StartID:','enabled','all','getFullYear','qrCode','catch','@newsletter','):Error\x20in\x20converting\x20audio','flowConversation','contact_blacklist','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','apirequest','\x0a*Você\x20respondeu*:\x0a','.fileUrl','groupLeave','instanceInfo','Erro\x20ao\x20editar\x20a\x20conversa','autoCompleteMessages','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','subjectTime','isBusinessInstance','toDataURL','getBase64FromMediaMessage','StartBot','promisify','memberAddMode','REDIS_URI','creation','interactiveResponseMessage','removeInstance','generate','pollCreationMessageV3','Valor\x20inicial:\x20\x22','collection','\x20quoted:\x20','connection.update','updateFlowConfig','SSL_CONF','sendMessageWithTyping','):Image\x20is\x20url','nativeFlowResponseMessage','urlOrBase64','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','imported','exit','whatsappNumbers','Parando\x20aplicação...','mediatype','groupRequestParticipantsList','PLAYED','keep-alive','/instance','PRODUCT_LIST','not\x20loaded',',\x20fará\x20nova\x20verificação\x20em\x20','messageStubParameters','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','editFlowGroup','muteEndTime','STORE_CHATS','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','title','updateBlock','deleteChat','):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','text','insertCount','enviado\x20para','getTime','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','):\x20isVote:\x20','getFlow','leadInfo.etiquetas','exists','statusMessage','pt-BR','scheduleSendAudio','CORS_ORIGIN','unhandledRejection','saveConversationToDatabase','BufferJSON','groupSetting','varedits','request\x20received\x20in\x20editFlow','ephemeralExpiration','EMAIL','delete','isCommunity','CORS','\x5c$&','process','):Trying\x20to\x20get\x20business\x20profile','getOwnPropertyNames','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','IP\x20confirmed:\x20',',\x20valor\x20passado:\x20\x22','env.KEY\x20!==\x20key','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','toBRL','convertToWebP','uazapiSendLocation','fetchInstances','stanzaId','data:\x20','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','sendAudio','findParticipants','ip\x20-6\x20addr\x20add\x20','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','chatId','connectionClosed','sendDataWebhook','pollMessageOnDelete','/wa-presence','fileLength','Error\x20updating\x20cache\x20contact:','connectedClient','https://api64.ipify.org?format=json','):\x20Buscando\x20conversas...','ScheduleMessage','_FlowHistorico','findOrCreate','fora\x20do\x20git','allFlows','docker','updateReadReceiptsPrivacy','createOrUpdate','/exit','findMessages','):\x20error:\x20','transformScheduledMessagesByType','DaysToDelete','class-validator','AUTHENTICATION_TYPE','replaceVariables','Error\x20adding\x20IPv6\x20address:\x20','timeInMinutes','):\x20\x27Enviando\x20mídia\x20para\x20\x27','editflowcondition','dropIndex','jid','headerString','convertedOptions','messageId','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','varedit','NextBlock','\x20horas\x20e\x20','uazapiDeleteMessage','item','):\x20Editando\x20variável\x20do\x20fluxo...','order','Número\x20não\x20possui\x20WhatsApp.','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','DELETED','false','toFile','@broadcast','DARK','Conexão\x20estabelecida','MESSAGES_UPDATE','selectedDisplayText','WebhookGlobal','caption','.webp','/wa-chats','AUTHENTICATION_JWT_EXPIRIN_IN','\x1b[37m','hDel','Variáveis\x20não\x20encontradas:','store','):\x20Não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','findAndReplace','groups','saveCreds','some','Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...','locationMessage','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:','.mimetype','replyOptions','format','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','3EB0','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:','queue','CacheContacts\x20database\x20connection\x20closed.','idSchedule','canSendMessage','action','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','ContactsAndGroups','upsertChats','replaceVariablesInReplyOptions','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','):\x20Deletando\x20mensagem','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','output','audioWhatsapp','errors','sendText','delayChatLabel_MAX_RETRIES','delay','get','):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27','verifiedName','reviver','groupdata','sendReaction','):\x20Adicionando\x20\x27','\x27...','updateGParticipate','splice','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','AppStateSyncKeyData','Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global','downloadMediaMessage','updateProfilePicturePrivacy','\x1b[36m%s\x1b[0m','\x20mensagens\x20de\x20','-instances','when','config','abs','Fluxo\x20agendado\x20pelo\x20fluxo\x20','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','MESSAGES_SET','request\x20received\x20in\x20deleteAllMessages','resetReconnectionVariables','pollErrorMessage','requestPairingCode','Schema','ephemeralDuration','profilePicture','WARN','.X-ABLabel:Celular\x0a','findWebhook','updateStopChat','status.instance','waitingMenu_replyOptions','max','digest','Telefone:\x20','beautifyWithPlaceholders','\x1b[37m%s\x1b[0m','\x20não\x20encontrado\x20para\x20atualização.','messageTimestamp','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','local_map','header','Novo\x20IP\x20criado:\x20','oldValue','stack','result','getContentType','getScheduleMessageModelForOwner','Esse\x20fluxo\x20não\x20permite\x20importação.','creds.json','waitingMenu_ExpiredMessage','Erro\x20ao\x20deletar\x20a\x20conversa','flush','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','addMessagesToGroup','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','deleteMessage','):\x20Entrou\x20na\x20função\x20clearVariables','button','isJidGroup','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','footerText','pollCreationMessage','interactiveMessage','superadmin','phoneNumber','number','thumbnailUrl','Erro\x20ao\x20inserir\x20chats:','):\x20Há\x20mensagens\x20prontas,\x20limpando\x20e\x20adicionando\x20à\x20fila','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','pollUpdateMessage','):\x20Editando\x20replyOption...','fetchPrivacySettings','fone','http','countIPv6Addresses','Usando\x20IP\x20existente:\x20','type','/create','):\x20tem\x20blocks','timeout','deleteflow','):\x20Encontrado\x20próxima\x20mensagem\x20para\x20','CREDENTIALS','#f64847','.jpg','listen','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','object','hbs','URL','entries','senderKeyDistributionMessage','isArray','DB_PREFIX_NAME','envYaml','ini','Tentativa\x20','\x1b[32m%s\x1b[0m','public','recebido\x20de','list3','):\x20Conversa\x20inserida\x20com\x20sucesso.','viewOnceMessageV2','):\x20Bloco\x20copiado:\x20','reduce','descId','No\x20excess\x20IPv6\x20addresses\x20to\x20remove.','createConversationforgoToFlow','findRealGroups','cachedContacts-whatsapp','ip:\x20','SERVER_PORT','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','generateWAMessageFromContent','sort','groupId','.mp3','upsertedCount','_sender','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','menuType','round','formatVCard','?timestamp=','Botão\x201','restart','lastMessage','\x20depois\x20','fetchLabels','updateParticipant','verifyWhatsAppNumber','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','chatHandle','messagesLogs','stopConversation','option','):\x20Query\x20params:\x20','find','buttonMessage','birthtime','!stop','Rótulo\x20deletado:\x27,\x20','/wa-connection-update','):\x20Editando\x20bloco...','#b4ebff','extractRegex','#d8e651','setting','closed','flowStopMinutes','toUpperCase','findByIdAndUpdate','eventHandler','configService','editflowgroup','#00a1f2','getUniqueFlowName','isRunning','updateStatusPrivacy','selectedButtonId','messageSecret','whatsappNumber','normalizeMessageContent','Forbidden','\x20ao\x20chat\x20','updateAll','text/event-stream','sectionsToString','request\x20received\x20in\x20updateAutoCompleteMessages','api','dbServer','Sistema\x20atualizado\x20com\x20sucesso!','\x20-i\x20','):Delete\x20chat','matchRegex','Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage','):including\x20timestamp\x20in\x20url:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','/chat','AutomateSystem','redis://127.0.0.1:6379','apiName','sharePass','instance','groupParticipantsUpdate','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','automateSystem','saveTextReply','isJidBroadcast','assign','displayName','PRIVKEY','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','Logger','goToFlow','long','createServer','ignoreGroups','quick_reply','responsavelid','#56ccb4','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','):\x20whoCanUse\x20after\x20validation:\x20','STORE_CONTACTS','hGet','groupInviteCode','editedMessage','ListMessage','default','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','reorderMessages','sim','updateOnlinePrivacy','params','setWebhook','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','Authentication\x20error','recording','replaceValue','\x1b[46m','/instance/delete','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','no.connection','getMessage','\x1b[33m\x1b[1m','1111UqsdtG','map','vcard','messageLogsModel','testIPv6','info','node-cache','listMessage','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','writeFileSync','request\x20received\x20in\x20getFlow','author','method',',\x20Minutes\x20to\x20Close:\x20','flowConfig','noConnection','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','node-mime-types','_second','.doc','generateHash','realVariables','processvaredits','[AUTH]\x20Database\x20is\x20not\x20enabled','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','remove','):Type\x20defined\x20as\x20audio','$set','toLocaleString','envProcess','_p_','picture','values','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','endSession','src','getLastMessage','compression','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','Connection\x20Closed','extractPhoneNumber','RemoveChatLabel','Cache-Control',',\x20pairCode:\x20','selectedId','getDelay','poll','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','0123456789ABCDEF','groupMemberAddMode','unlocked','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','scheduleNextCheck','Error\x20testing\x20IP\x20with\x20','Fluxo\x20id\x20\x27','Error\x20while\x20deleting\x20message\x20for\x20everyone','logger','ConversationModel','Network\x20interfaces\x20detected:\x20','.\x20Aguardando\x20','now','groups.update','setNewValue','width','groupHandler','):\x20teve\x20mudanças\x20chat.muteEndTime:\x20','SSL_CONF_PRIVKEY','saveChatVariables','routerPath','fetchProfilePicture','getMinutes','hasOwnProperty','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','selectedRowId','expression','):\x20delete\x20=\x20true','finish','):\x20whoCanEdit\x20before\x20validation:\x20','Erro\x20ao\x20normalizar\x20a\x20mensagem:','authentication','/instance/fetchInstances','Retornando\x20grupos\x20SEM\x20cache','data','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','LEVEL','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp','textMessage','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','contactMessage','jpegThumbnail','inviteCodeDetails','connectedName','randomBytes','reorderBlocks','__esModule','pairingCode','LOG','archived','PRESENCE_UPDATE','addresss','variables','\x22\x20-\x20REMOVED','groupBetterSetting','leadInfo.desativadoFluxoAte','block','path','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','_activedCount','/wa-groups','\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','):\x20Fluxos\x20não\x20estão\x20ativados','remoteJid','JWT','lastSend','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','activatedCount','Cache\x20instance\x20update\x20result:\x20','Erro\x20ao\x20aplicar\x20varedit:\x20','updateGroupPicture','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','labelId','ListType','https://api.ipify.org?format=json','participants','getProfileName','empty','@ffmpeg-installer/ffmpeg','pow','):\x20','processclearVariables','.\x20Tentando\x20novamente\x20em\x20','getScheduleMessage','flows','Reusing\x20existing\x20IPv6:\x20','^\x5cd+','Bloco\x20com\x20ID\x20','):\x20transformedCustomFieldVariables','scheduleMessage','indexOf','options','yes','PROXY','):\x20Criou\x20conversa\x20no\x20startFlow','labels.edit','drop','ContactModel','):Temp\x20image\x20deleted','awaitingApproval','\x1b[33m%s\x1b[0m','fakeReceived','messaging-history.set','quotedMessage','Grupo\x20não\x20encontrado','connecting','profile','deleteBlock','goNextblock','request\x20received\x20in\x20deleteFlow','createHash','getTicketSystem','desativadoFluxoAte','folder','/startFlow/:instance/:startID','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','flowName','send.message','Erro\x20ao\x20encerrar\x20a\x20API','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','groupdata.participants','.webm','delAll','):\x20Flow\x20\x27','GUARD','Error\x20in\x20buttonsMessage\x20function:','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','archive','ERROR:\x20','):Archiving\x20chat','Subdomínio\x20final:','slice','lastReceivedMessage','utf8','Botão\x202','join','fileName','configureIPv6','delaySecMin','PASSWORD','):\x20updateResult:','trim','locked','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','):\x20Aguardando\x205\x20segundos\x20antes\x20de\x20reconectar...','menuMessage','global','notContains','deleteConversation',',\x20Novo\x20tamanho:\x20','#000000','):\x20Going\x20to\x20','repository','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.',',\x20valor\x20a\x20encontrar:\x20\x22','editChat','webhookModel','AUTHENTICATION','Reiniciando\x20a\x20aplicação...','contextInfo','fetchMessages','getChatModelForOwner','messageHandle','conversation','getHours','call','cpf',',\x20lastCondition:\x20','sticker','.pptx','findGroupsEspecial','equal','):\x20Conversa\x20atualizada\x20em\x20memória','groupMetadata','\x20removido\x20do\x20chat\x20','Flow\x20\x27','Fluxos\x20não\x20estão\x20ativados','\x20is\x20already\x20in\x20use.','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','revokeInviteCode','networkInterface','hGetAll','lean','\x1b[31m%s\x1b[0m','DOCKER_ENV','\x22\x20cannot\x20be\x20empty','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','http://checkip.dyndns.org','_remoteJid','reconnectTimestamps','isListOfNumbers','updateChatGroupData','match_last_seen','media','Mensagens\x20deletadas\x20com\x20sucesso.','buffer','verbose','content','#d3a91f','preview','lastUpdate','redirect','footer','${Message\x20absent\x20from\x20node}','sendPoll','RECONNECT_TIME_FRAME','deleteDoneMessages','temp-','Erro\x20ao\x20buscar\x20conversas','replace','ReplyOption\x20com\x20ID\x20','log','Partes\x20do\x20caminho\x20FULLCHAIN:','Erro\x20ao\x20editar\x20o\x20chat','getSeconds','race','throwAndLogError','atendimentoAberto','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','427717xDEFHU','notEqual','):\x20alterando\x20this.AutomateSystem','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc','CONTACTS_SET','The\x20instance\x20needs\x20to\x20be\x20disconnected','newStoppedUntil','padEnd','Instance\x20ID:','dbClient','bateu\x20events','createflow','replaceVariablesLogs','Configured\x20new\x20IPv6:\x20','updateGroupWebhook','processReadyMessages','bodyString','json','Erro\x20ao\x20editar\x20o\x20bloco:\x20','utf-8','API\x20Key\x20inválida.','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','dayjs','dark','documentWithCaptionMessage','audioMessage','util','del','uazapiSendMenu','Atualização:\x20','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','\x22\x20not\x20found','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','/wa-message','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','):\x20Conversa\x20está\x20expirada\x20-\x20voto','defineProperty','Esse\x20fluxo\x20expirou','):\x20Enviando\x20texto','error_log','request\x20received\x20in\x20editFlowcondition','REDIS','groups_ignore','\x1b[47m','#ffae04','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','label_jid','p-queue','notEmpty','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','Error\x20in\x20chatModify\x20for\x20number\x20','cachedData-whatsapp','updateAutoCompleteMessages','boolean','_lastVote','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','markMessageAsRead','waitingForReplyMenu','ip\x20-6\x20addr\x20show\x20scope\x20global','undefined','ENABLED','):\x20Iniciando\x20processo\x20de\x20deleção...','exec','authService','--------------------------------------','code','flowActive','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','SUCCESS','synchronizeAndMapFlows','*Teste\x20de\x20Título*\x0a\x0aDescrição\x20de\x20Teste\x0a','@g.us','Not\x20allowed\x20by\x20CORS','Tentando\x20reconectar...','exports','updateMessage','deletedCount','):\x20[messaging-history.set]\x20mensagem\x20duplicada\x20ignorada\x20(ID:\x20','notMatchRegex','#fed428','vir','groupValidate','sendList','#9ab6c1','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','SEND_MESSAGE','msgRetryCounterCache','has','):\x20whoCanUse\x20before\x20validation:\x20','rm\x20-rf\x20','sleep','):\x20Aguardando\x205\x20segundos\x20para\x20garantir\x20interrupção\x20completa...','processUazapi','AutomateSystem\x20não\x20foi\x20inicializado','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','readdirSync','request\x20received\x20in\x20createFlow','enumerable','statusCode','env','#fe9dfe',',\x20resultado:\x20','extractMessageContent','approve','viewOnceMessage','.ogg','getVariablesChat','contains','requestFile','#64c4ff','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','fetchConversation','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','createInstance','\x20segundos','sendMessage','getConversation','editFlowVaredit','\x20segundos\x20antes\x20de\x20reconectar...','sem\x20texto\x20na\x20mensagem','close','):\x20newSecondValue\x20após\x20replaceVariables:','mentions','ScheduleMessageModel','inet6','contact','Deleted\x20','-whatsapp-api','84MUdvhQ','Resultado\x20da\x20correspondência\x20de\x20URL:','none','Selecione','):Output\x20path:\x20','deleteAll','updateProfilePicture','\x0aitem','):\x20Atualizando\x20status\x20da\x20mensagem\x20','addChatLabel','shareOwners','retrySendMessage','state','/config','cacheContact','buttons','secondValue','50mb','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','getReadyToSendMessages','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','#83e421','defineAuthState','view\x20engine','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','editMessagesInGroup','organization','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','pre','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','Erro\x20ao\x20deletar\x20chat:','messages.upsert','\x1b[0m','deleteReplyOption','getClient','connectToWhatsappController','\x1b[41m','https://v6.ident.me','lastBlockId','cache','licenca','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','@s.whatsapp.net','arraybuffer','loadEnv','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','isBusiness','request\x20received\x20in\x20allFlows','address','#9ba6ff','getDevice','content-type','name','where','video','contactHandle','error\x20get\x20vote','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture','dropCollection','imagechat','deleteFlow','cacheInstanceRepository','\x1b[32m','saveVariable','_error','protocolMessage','CHATS_DELETE','listResponseMessage','getMonth','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','isJidUser','addToProcessedMessages','DATABASE_CONNECTION_HOST','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','logout','app-state-sync-key','joinApprovalMode','addReplyOption','loadInstance','XX:XX:XX:XX:XX:XX','labels.association','newValue','):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','):\x20Ler\x20mensagem','isJWT','groupName','getAllData','last','imageMessage','isInteger','https://chat.whatsapp.com/','Request\x20Body:','$addToSet','URL\x20não\x20disponível','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','value','Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','isURL','groupToggleEphemeral','messageLogs','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.','qrcode','wuid','):Delete\x20chat\x20in\x20client\x20for\x20number:\x20','findGroupInfo','CONTACTS_UPSERT','updateReplyOption','messageType','cleanupExcessiveIPs','FlowController','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.','delayChatLabel_RETRY_DELAY_MS','app','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','#92ceac','CORS_METHODS','):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20','.ogv','processblock','floor','\x20adicionado\x20ao\x20chat\x20','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','groupRequestParticipantsUpdate','Instance\x20logged\x20out','chats.delete','eventEmitter','fileUrl','Error\x20fetching\x20group','Operador:\x20\x22','group-participants.update','/:instanceName','proto','Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.','.txt','editScheduleMessage','connectionUpdate','buttonParamsJson','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','Instance\x20restarted','videoMessage','CONTACTS_UPDATE','status','isBase64','waitingMenu_text','SERVER_ACK','_month','Erro\x20desconhecido\x20ao\x20tentar\x20enviar\x20mensagem\x20para\x20o\x20grupo','1470897uLbxhF','updateConversation','editOperator','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','):Processing\x20audio','sendStatus','Subdomínio\x20extraído\x20do\x20caminho\x20SSL:','isLong','findById','BRL','Database\x20update\x20result:','uazapiSendAudio','qrcode.updated','request\x20received\x20in\x20fetchConversation','Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27','waMonitor','PENDING','startFlow','editConversation','):\x20Editando\x20edição\x20do\x20fluxo...','lastFetchAwaitingApproval','Sem\x20permissão\x20para\x20enviar\x20para\x20esse\x20grupo','evaluateConditionTest','deleteMessageForEveryone','getMessageModelForOwner','convertaudio','Erro\x20inesperado\x20em\x20processvaredits:\x20','Retornando\x20grupos\x20COM\x20cache','\x27\x20não\x20encontrado','put','cleanDisconnectedInstances','created','Connection\x20closed\x20for\x20instance:\x20','removeProfilePicture'];a0_0x2ab8=function(){return _0x3b474f;};return a0_0x2ab8();}var Me=T?.[a0_0xf2a334(0x38d)](Ms[a0_0xf2a334(0x76f)],ba,'allFlows'),mo=new P[(a0_0xf2a334(0x4e2))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[Es],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[ho]},{'_id':!0x1}),fo=new P[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[Es],'blocks':[wa],'groups':[ma],'conditions':[fa],'varedits':[ya],'replyOptions':{'type':[Cs],'default':[]},'chatLog':mo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0xf2a334(0x330)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0xf2a334(0x6df)},'waitingMenu_replyOptions':{'type':[Cs],'default':[]}}),Sa=_0x555898=>{const _0x18be9d=a0_0xf2a334;let _0x5c408f='z_'+_0x555898+_0x18be9d(0x470);return T?.[_0x18be9d(0x38d)](_0x18be9d(0x5e8),fo,_0x5c408f);},wo=new P[(a0_0xf2a334(0x4e2))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),ga=new P[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),yo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'messages':{'type':[ga],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0xf2a334(0x197)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[wo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':ga,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ma=_0x414709=>{const _0x2b3916=a0_0xf2a334;let _0x17af64='z_'+_0x414709+_0x2b3916(0x909);return T?.[_0x2b3916(0x38d)](_0x2b3916(0x736),yo,_0x17af64);},vs=class{},bo=new P[(a0_0xf2a334(0x4e2))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),So=new P[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Mo=new P[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Co=new P['Schema']({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':a0_0xf2a334(0x559)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),vo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),Eo=new P[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[vo]},'customFields':{'type':[Mo]},'flowConfig':{'type':Co,'default':{}},'flows':{'type':[So],'default':[]},'autoCompleteMessages':{'type':[bo],'default':[]}}),Te=T?.[a0_0xf2a334(0x38d)](vs[a0_0xf2a334(0x76f)],Eo,a0_0xf2a334(0x580)),Ca=require(a0_0xf2a334(0x277)),No=new Ca[(a0_0xf2a334(0x4e2))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),va=_0x1541fa=>{const _0x4d7d21=a0_0xf2a334;let _0x11e4a3='z_'+_0x1541fa+_0x4d7d21(0x8a3);return T?.['model']('LabelModel',No,_0x11e4a3);},O=class{constructor(_0x1ef8cc){const _0x511b52=a0_0xf2a334;this[_0x511b52(0x3de)]=_0x1ef8cc['get'](_0x511b52(0x183));}};function A(_0x144fc9){const _0x5e0ed7=a0_0xf2a334;let _0x40bd93={};for(let [_0x57f6d2,_0x5b2a43]of Object[_0x5e0ed7(0x527)](_0x144fc9))if(typeof _0x5b2a43=='object'&&!Array[_0x5e0ed7(0x529)](_0x5b2a43)){for(let [_0x5c4034,_0x3b48dd]of Object[_0x5e0ed7(0x527)](_0x5b2a43))_0x40bd93[_0x57f6d2+'.'+_0x5c4034]=_0x3b48dd;}else _0x40bd93[_0x57f6d2]=_0x5b2a43;return _0x40bd93;}var He=class{constructor(_0x312837,_0x5924cb,_0x791097,_0x2b76e2,_0x38168f,_0x5f4e01,_0x2952e6,_0x1a04dc,_0x413cf8,_0xa27558,_0x42ea00,_0x135bf1,_0x44db99,_0x40063c){const _0x2b689b=a0_0xf2a334;this[_0x2b689b(0x80a)]=_0x312837,this[_0x2b689b(0x2fb)]=_0x5924cb,this['contact']=_0x791097,this[_0x2b689b(0x749)]=_0x2b76e2,this[_0x2b689b(0x79f)]=_0x38168f,this['webhook']=_0x5f4e01,this['auth']=_0x2952e6,this[_0x2b689b(0x584)]=_0x1a04dc,this[_0x2b689b(0x1e8)]=_0x413cf8,this['flowConversation']=_0xa27558,this[_0x2b689b(0x1c8)]=_0x42ea00,this['scheduleMessage']=_0x135bf1,this[_0x2b689b(0x587)]=_0x44db99,this[_0x2b689b(0x6c3)]=_0x40063c;}get[a0_0xf2a334(0x577)](){const _0x2bdd01=a0_0xf2a334;return this[_0x2bdd01(0x6c3)];}},Ke=class{},Qe=class extends O{[a0_0xf2a334(0x7e9)](_0x39e45d){return ca(_0x39e45d);}async[a0_0xf2a334(0x26f)](_0x34506b,_0x3689d9){const _0x5f3a22=a0_0xf2a334;if(_0x34506b['length']===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x5f3a22(0x7e9)](_0x3689d9)['insertMany']([..._0x34506b]))[_0x5f3a22(0x250)]};}catch(_0x43efda){return _0x43efda;}}async[a0_0xf2a334(0x556)](_0x48ab1a,_0x46ebed){const _0xd24222=a0_0xf2a334;try{let _0x98d8a3=this['getMessageModelForOwner'](_0x46ebed),_0xd1406=A(_0x48ab1a[_0xd24222(0x770)]);return await _0x98d8a3[_0xd24222(0x556)](_0xd1406)['sort']({'messageTimestamp':-0x1})['limit'](_0x48ab1a?.[_0xd24222(0x384)]??0x0)[_0xd24222(0x695)]();}catch{return[];}}async[a0_0xf2a334(0x44e)](_0x5671fb,_0x3208c4){const _0x3438a1=a0_0xf2a334;try{let _0x2b76e9=this[_0x3438a1(0x7e9)](_0x3208c4),_0x167277=A(_0x5671fb[_0x3438a1(0x770)]);await _0x2b76e9[_0x3438a1(0x881)](_0x167277);}catch(_0x1fae38){console[_0x3438a1(0x830)](_0x1fae38);}}async[a0_0xf2a334(0x227)](_0x246324,_0x1c7f3c,_0x28fd91){const _0x4a7300=a0_0xf2a334;try{let _0x31da21=this[_0x4a7300(0x7e9)](_0x28fd91),_0x3baeca=A(_0x246324[_0x4a7300(0x770)]);return await _0x31da21[_0x4a7300(0x181)](_0x3baeca,{'$set':_0x1c7f3c},{'new':!0x0});}catch(_0x151aa8){throw console[_0x4a7300(0x830)](_0x151aa8),_0x151aa8;}}async[a0_0xf2a334(0x210)](_0x380cd8,_0x501fb9){const _0x4eb7a7=a0_0xf2a334;if(_0x380cd8[_0x4eb7a7(0x250)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this['getMessageModelForOwner'](_0x501fb9)[_0x4eb7a7(0x210)]([..._0x380cd8]))[_0x4eb7a7(0x250)]};}catch(_0xb364ab){return console[_0x4eb7a7(0x6b2)](_0x4eb7a7(0x65f),_0xb364ab),_0xb364ab;}}async[a0_0xf2a334(0x740)](_0x43bb5f){const _0x7ff69=a0_0xf2a334;try{return await this['getMessageModelForOwner'](_0x43bb5f)[_0x7ff69(0x418)][_0x7ff69(0x63f)](),{'success':!0x0};}catch(_0x1cb260){return console[_0x7ff69(0x830)](_0x1cb260),{'success':!0x1,'error':_0x1cb260};}}},Ds=I(require(a0_0xf2a334(0x62d))),w=I(require(a0_0xf2a334(0x178))),Fe=require('fs'),j=I(require(a0_0xf2a334(0x618))),K=I(require(a0_0xf2a334(0x3a0))),Ti=require(a0_0xf2a334(0x8cf)),Ii=I(require(a0_0xf2a334(0x7a2))),_i=I(require(a0_0xf2a334(0x264))),Ea=[a0_0xf2a334(0x793),a0_0xf2a334(0x2e1),a0_0xf2a334(0x6d3),a0_0xf2a334(0x7c9),a0_0xf2a334(0x886)],Na=['ephemeralMessage',a0_0xf2a334(0x6d2),a0_0xf2a334(0x723),a0_0xf2a334(0x533)],ks=require('os'),Ft=I(require(a0_0xf2a334(0x180))),Ue=require('child_process'),Oi=require(a0_0xf2a334(0x5c0)),pe=I(require('mongoose')),J=require(a0_0xf2a334(0x47c)),ce=class{constructor(_0x40ef0e,_0x55df36,_0x237f31){const _0x286e97=a0_0xf2a334;this[_0x286e97(0x484)]=_0x40ef0e,this[_0x286e97(0x441)]=_0x55df36,this[_0x286e97(0x76f)]=_0x237f31;}},Ye=class{},Xe=class{},Ie=class{},Ze=class{},et=class{},Ce=class{},tt=class{},st=class{},at=class{},it=class{},xt=I(require(a0_0xf2a334(0x3d3))),$a=require('fs'),Ra=require(a0_0xf2a334(0x618));async function _e(_0x575b32){const _0x5939be=a0_0xf2a334;let _0x15ba70=G[_0x5939be(0x2af)][_0x575b32];if(L[_0x5939be(0x6f6)]){let _0x5d5834=T[_0x5939be(0x75d)]()['db'](L['CONNECTION'][_0x5939be(0x52a)]+'-instances')[_0x5939be(0x418)](_0x575b32);return _0x15ba70||(await _0x5d5834['find']({})['toArray']())[_0x5939be(0x250)]>0x0;}return _0x15ba70||(0x0,$a[_0x5939be(0x2ec)])((0x0,Ra[_0x5939be(0x666)])(be,_0x575b32));}async function Aa(_0x543849,_0x440c05,_0x1821b8){const _0x47b39c=a0_0xf2a334;if(_0x543849[_0x47b39c(0x876)][_0x47b39c(0x343)](_0x47b39c(0x1ed))||_0x543849[_0x47b39c(0x876)][_0x47b39c(0x343)](_0x47b39c(0x5ff))||_0x543849[_0x47b39c(0x876)][_0x47b39c(0x343)](_0x47b39c(0x477))||_0x543849[_0x47b39c(0x876)][_0x47b39c(0x343)](_0x47b39c(0x748))||_0x543849[_0x47b39c(0x876)]['includes']('/instance/connect')||_0x543849[_0x47b39c(0x876)]['includes'](_0x47b39c(0x349))||_0x543849[_0x47b39c(0x876)][_0x47b39c(0x343)](_0x47b39c(0x5aa)))return _0x1821b8();let _0x5dcbd3=_0x543849[_0x47b39c(0x5a3)];if(!_0x5dcbd3?.[_0x47b39c(0x29c)])throw new m(_0x47b39c(0x195));if(!await _e(_0x5dcbd3[_0x47b39c(0x29c)]))throw new U(_0x47b39c(0x28d)+_0x5dcbd3[_0x47b39c(0x29c)]+'\x20instance\x20does\x20not\x20exist');_0x1821b8();}async function Ta(_0x461cd9,_0x9d187a,_0x3caae5){const _0x27b4e8=a0_0xf2a334;if(_0x461cd9[_0x27b4e8(0x876)][_0x27b4e8(0x343)]('/instance/create')){let _0xe6c260=_0x461cd9['body'];if(await _e(_0xe6c260[_0x27b4e8(0x29c)]))throw new X(_0x27b4e8(0x29f)+_0xe6c260['instanceName']+_0x27b4e8(0x690));G[_0x27b4e8(0x2af)][_0xe6c260[_0x27b4e8(0x29c)]]&&delete G['waInstances'][_0xe6c260[_0x27b4e8(0x29c)]];}_0x3caae5();}var Ia=require(a0_0xf2a334(0x47c)),_a=I(require(a0_0xf2a334(0x2d5))),ot=a0_0xf2a334(0x309),Ro=new $(a0_0xf2a334(0x65b));async function Ao(_0x43ca90,_0x4fb2dd,_0x45219f){const _0x50defd=a0_0xf2a334;let _0xa07406=_0x43ca90[_0x50defd(0x4c6)]('apikey');if(_0xa07406&&S['get'](_0x50defd(0x67c))[_0x50defd(0x380)]['KEY']!==_0xa07406)throw new se();if(S[_0x50defd(0x4c6)]('AUTHENTICATION')[_0x50defd(0x380)]['KEY']===_0xa07406)return _0x45219f();if((_0x43ca90[_0x50defd(0x876)][_0x50defd(0x343)]('/instance/create')||_0x43ca90[_0x50defd(0x876)][_0x50defd(0x343)](_0x50defd(0x5ff)))&&!_0xa07406)throw new X('Missing\x20global\x20api\x20key',_0x50defd(0x275));let _0x50d076=S['get'](_0x50defd(0x67c))['JWT'];try{let [_0x11711c,_0x4fa3cc]=_0x43ca90[_0x50defd(0x4c6)]('authorization')[_0x50defd(0x8a0)]('\x20');if(_0x11711c[_0x50defd(0x3d0)]()!=='bearer')throw new se();if(!(0x0,Ia[_0x50defd(0x78f)])(_0x4fa3cc))throw new se();let _0xba6c25=_0x43ca90[_0x50defd(0x5a3)],_0x22e02b=_a[_0x50defd(0x59e)][_0x50defd(0x88c)](_0x4fa3cc,_0x50d076['SECRET'],{'ignoreExpiration':_0x50d076['EXPIRIN_IN']===0x0});if(_0xba6c25[_0x50defd(0x29c)]!==_0x22e02b[_0x50defd(0x29c)]||ot!==_0x22e02b[_0x50defd(0x582)])throw new se();return _0x45219f();}catch(_0x4740ff){throw Ro[_0x50defd(0x830)](_0x4740ff),new se();}}async function To(_0x19ff6e,_0x4412f9,_0x16b8e2){const _0x179920=a0_0xf2a334;let _0xc95e1e=S[_0x179920(0x4c6)](_0x179920(0x67c))[_0x179920(0x380)],_0x4f522a=_0x19ff6e[_0x179920(0x4c6)]('apikey');if(_0xc95e1e['KEY']===_0x4f522a)return _0x16b8e2();if(_0x19ff6e[_0x179920(0x876)][_0x179920(0x343)]('/instance/create')){let _0x107b34=xa,_0x486a14=_0x19ff6e[_0x179920(0x32e)][_0x179920(0x29c)];if(_0x107b34&&_0x486a14['toLowerCase']()[_0x179920(0x2f0)](_0x107b34[_0x179920(0x3d0)]()))return _0x16b8e2();if(!_0x4f522a)throw new X('Missing\x20global\x20api\x20key','The\x20global\x20api\x20key\x20must\x20be\x20set');}if(_0x19ff6e[_0x179920(0x876)][_0x179920(0x343)](_0x179920(0x5ff))&&!_0x4f522a)throw new X(_0x179920(0x1a2),'The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x19ff6e['originalUrl']['includes'](_0x179920(0x477))&&!_0x4f522a)throw new X('Missing\x20global\x20api\x20key','The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x19ff6e[_0x179920(0x876)][_0x179920(0x343)](_0x179920(0x748))&&!_0x4f522a)throw new X('Missing\x20global\x20api\x20key','The\x20global\x20api\x20key\x20must\x20be\x20set');try{let _0x1c81a3=_0x19ff6e[_0x179920(0x5a3)],_0x3d4033=await me['auth'][_0x179920(0x556)](_0x1c81a3[_0x179920(0x29c)]);if(_0x3d4033&&_0x3d4033[_0x179920(0x1b8)]===_0x4f522a)return _0x16b8e2();}catch{}throw new se();}var Oa={'jwt':Ao,'apikey':To},pi=require(a0_0xf2a334(0x3d3)),C=require(a0_0xf2a334(0x8cf)),v=(..._0xfe3b48)=>{const _0x413b40=a0_0xf2a334;let _0x1c789a={};return _0xfe3b48[_0x413b40(0x3b5)](_0xc6509d=>_0x1c789a[_0xc6509d]={'minLength':0x1,'description':_0x413b40(0x242)+_0xc6509d+_0x413b40(0x698)}),{'if':{'propertyNames':{'enum':[..._0xfe3b48]}},'then':{'properties':_0x1c789a}};},E={'$id':(0x0,C['v4'])(),'type':'object','properties':{'instanceName':{'type':a0_0xf2a334(0x16b)}},...v(a0_0xf2a334(0x29c))},Tc={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'oldToken':{'type':'string'}},'required':[a0_0xf2a334(0x883)],...v(a0_0xf2a334(0x883))},Ic={'properties':{'key':{'type':a0_0xf2a334(0x524),'properties':{'id':{'type':a0_0xf2a334(0x16b)},'remoteJid':{'type':a0_0xf2a334(0x16b)},'fromMe':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]}},'required':['id',a0_0xf2a334(0x61e),a0_0xf2a334(0x329)],...v('id',a0_0xf2a334(0x61e))},'message':{'type':a0_0xf2a334(0x524)}}},ae={'properties':{'delay':{'type':a0_0xf2a334(0x253),'description':a0_0xf2a334(0x249)},'presence':{'type':a0_0xf2a334(0x16b),'enum':[a0_0xf2a334(0x172),a0_0xf2a334(0x86e),'composing',a0_0xf2a334(0x5a7),'paused']}}},Z={'type':a0_0xf2a334(0x16b),'description':a0_0xf2a334(0x854)},Pa={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'number':{...Z},'options':{...ae},'textMessage':{'type':a0_0xf2a334(0x524),'properties':{'text':{'type':a0_0xf2a334(0x16b)}},'required':[a0_0xf2a334(0x439)],...v('text')}},'required':['textMessage',a0_0xf2a334(0x50d)]},Da={'type':'string','pattern':a0_0xf2a334(0x37b),'description':a0_0xf2a334(0x854)},_c={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'number':{...Da},'options':{...ae},'textMessage':{'type':a0_0xf2a334(0x524),'properties':{'text':{'type':a0_0xf2a334(0x16b)}},'required':[a0_0xf2a334(0x439)],...v(a0_0xf2a334(0x439))}},'required':[a0_0xf2a334(0x605),'number']},Oc={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'number':{...Da},'options':{...ae},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0xf2a334(0x16b),'enum':[a0_0xf2a334(0x1b1),a0_0xf2a334(0x321),a0_0xf2a334(0x771),a0_0xf2a334(0x308)]},'media':{'type':'string'},'fileName':{'type':'string'},'caption':{'type':'string'}},'required':[a0_0xf2a334(0x426),a0_0xf2a334(0x6a0)],...v(a0_0xf2a334(0x667),a0_0xf2a334(0x49d),a0_0xf2a334(0x6a0))}},'required':[a0_0xf2a334(0x88b),a0_0xf2a334(0x50d)]},ka={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'stickerMessage':{'type':a0_0xf2a334(0x524),'properties':{'image':{'type':'string'}},'required':[a0_0xf2a334(0x1b1)],...v(a0_0xf2a334(0x1b1))}},'required':[a0_0xf2a334(0x886),a0_0xf2a334(0x50d)]},La={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'statusMessage':{'type':'object','properties':{'type':{'type':'string','enum':[a0_0xf2a334(0x439),a0_0xf2a334(0x1b1),a0_0xf2a334(0x308),'video']},'content':{'type':a0_0xf2a334(0x16b)},'caption':{'type':'string'},'backgroundColor':{'type':'string'},'font':{'type':a0_0xf2a334(0x253),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0xf2a334(0x259),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0xf2a334(0x16b),'pattern':a0_0xf2a334(0x635),'description':a0_0xf2a334(0x812)}},'allContacts':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0xf2a334(0x519),a0_0xf2a334(0x6a4)],...v(a0_0xf2a334(0x519),a0_0xf2a334(0x6a4))}},'required':[a0_0xf2a334(0x442)]},Fa={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0xf2a334(0x16b),'enum':[a0_0xf2a334(0x1b1),a0_0xf2a334(0x321),'video','audio']},'media':{'type':a0_0xf2a334(0x16b)},'fileName':{'type':'string'},'caption':{'type':a0_0xf2a334(0x16b)}},'required':[a0_0xf2a334(0x426),a0_0xf2a334(0x6a0)],...v(a0_0xf2a334(0x667),'caption',a0_0xf2a334(0x6a0))}},'required':['mediaMessage','number']},Ua={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'number':{...Z},'options':{...ae},'audioMessage':{'type':a0_0xf2a334(0x524),'properties':{'audio':{'type':a0_0xf2a334(0x16b)}},'required':[a0_0xf2a334(0x308)],...v(a0_0xf2a334(0x308))}},'required':[a0_0xf2a334(0x6d3),a0_0xf2a334(0x50d)]},ja={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'number':{...Z},'pollMessage':{'type':a0_0xf2a334(0x524),'properties':{'name':{'type':a0_0xf2a334(0x16b)},'selectableCount':{'type':a0_0xf2a334(0x50d)},'values':{'type':a0_0xf2a334(0x259),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0xf2a334(0x76f),'selectableCount',a0_0xf2a334(0x5cf)],...v('name','selectableCount',a0_0xf2a334(0x5cf))}},'required':['number',a0_0xf2a334(0x387)]},Ja={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'number':{...Z},'menuMessage':{'type':a0_0xf2a334(0x524),'properties':{'text':{'type':'string'},'choices':{'type':a0_0xf2a334(0x259),'uniqueItems':!0x0}},'required':['text',a0_0xf2a334(0x8fd)],...v('text',a0_0xf2a334(0x8fd))}},'required':['number',a0_0xf2a334(0x670)]},qa={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'number':{...Z},'options':{...ae},'locationMessage':{'type':a0_0xf2a334(0x524),'properties':{'latitude':{'type':'number'},'longitude':{'type':'number'},'name':{'type':a0_0xf2a334(0x16b)},'address':{'type':'string'}},'required':['latitude',a0_0xf2a334(0x2cf)],...v(a0_0xf2a334(0x76f),a0_0xf2a334(0x612))}},'required':[a0_0xf2a334(0x50d),a0_0xf2a334(0x4ab)]},Va={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'listMessage':{'type':'object','properties':{'title':{'type':a0_0xf2a334(0x16b)},'description':{'type':a0_0xf2a334(0x16b)},'footerText':{'type':a0_0xf2a334(0x16b)},'buttonText':{'type':a0_0xf2a334(0x16b)},'sections':{'type':a0_0xf2a334(0x259),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':a0_0xf2a334(0x16b)},'rows':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':a0_0xf2a334(0x16b)},'description':{'type':'string'},'rowId':{'type':a0_0xf2a334(0x16b)}},'required':['title','rowId'],...v(a0_0xf2a334(0x434),a0_0xf2a334(0x30c))}}},'required':[a0_0xf2a334(0x434),a0_0xf2a334(0x8b3)],...v(a0_0xf2a334(0x434))}}},'required':[a0_0xf2a334(0x434),a0_0xf2a334(0x22e),'buttonText',a0_0xf2a334(0x8c8)],...v('title',a0_0xf2a334(0x22e),a0_0xf2a334(0x1ad),a0_0xf2a334(0x508))}},'required':[a0_0xf2a334(0x50d),a0_0xf2a334(0x5b6)]},Ga={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'number':{...Z},'options':{...ae},'contactMessage':{'type':a0_0xf2a334(0x259),'items':{'type':a0_0xf2a334(0x524),'properties':{'fullName':{'type':a0_0xf2a334(0x16b)},'phoneNumber':{'type':a0_0xf2a334(0x16b),'minLength':0xa}},'required':[a0_0xf2a334(0x1c7),'phoneNumber'],...v(a0_0xf2a334(0x1c7))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0xf2a334(0x50d),a0_0xf2a334(0x607)]},Ba={'$id':(0x0,C['v4'])(),'type':'object','properties':{'reactionMessage':{'type':a0_0xf2a334(0x524),'properties':{'key':{'type':'object','properties':{'id':{'type':a0_0xf2a334(0x16b)},'remoteJid':{'type':a0_0xf2a334(0x16b)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id',a0_0xf2a334(0x61e),'fromMe'],...v('id',a0_0xf2a334(0x61e))},'reaction':{'type':a0_0xf2a334(0x16b)}},'required':[a0_0xf2a334(0x28c),a0_0xf2a334(0x177)],...v(a0_0xf2a334(0x177))}},'required':[a0_0xf2a334(0x24a)]},Wa={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'numbers':{'type':a0_0xf2a334(0x259),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':'^\x5cd+','description':'\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}}},za={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'readMessages':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':'string'},'fromMe':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0xf2a334(0x16b)}},'required':['id',a0_0xf2a334(0x329),a0_0xf2a334(0x61e)],...v('id',a0_0xf2a334(0x61e))}}},'required':[a0_0xf2a334(0x871)]},Ha={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'privacySettings':{'type':a0_0xf2a334(0x524),'properties':{'readreceipts':{'type':a0_0xf2a334(0x16b),'enum':[a0_0xf2a334(0x3f9),a0_0xf2a334(0x73d)]},'profile':{'type':a0_0xf2a334(0x16b),'enum':[a0_0xf2a334(0x3f9),'contacts',a0_0xf2a334(0x400),'none']},'status':{'type':a0_0xf2a334(0x16b),'enum':[a0_0xf2a334(0x3f9),a0_0xf2a334(0x292),a0_0xf2a334(0x400),a0_0xf2a334(0x73d)]},'online':{'type':a0_0xf2a334(0x16b),'enum':[a0_0xf2a334(0x3f9),a0_0xf2a334(0x69f)]},'last':{'type':a0_0xf2a334(0x16b),'enum':[a0_0xf2a334(0x3f9),'contacts',a0_0xf2a334(0x400),a0_0xf2a334(0x73d)]},'groupadd':{'type':'string','enum':[a0_0xf2a334(0x3f9),a0_0xf2a334(0x292),a0_0xf2a334(0x400),'none']}},'required':[a0_0xf2a334(0x342),a0_0xf2a334(0x649),a0_0xf2a334(0x7cb),'online','last',a0_0xf2a334(0x2e5)],...v(a0_0xf2a334(0x342),'profile',a0_0xf2a334(0x7cb),a0_0xf2a334(0x320),a0_0xf2a334(0x792),a0_0xf2a334(0x2e5))}},'required':[a0_0xf2a334(0x856)]},Ka={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'lastMessage':{'type':a0_0xf2a334(0x524),'properties':{'key':{'type':a0_0xf2a334(0x524),'properties':{'id':{'type':a0_0xf2a334(0x16b)},'remoteJid':{'type':a0_0xf2a334(0x16b)},'fromMe':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]}},'required':['id',a0_0xf2a334(0x329),a0_0xf2a334(0x61e)],...v('id',a0_0xf2a334(0x61e))},'messageTimestamp':{'type':'integer','minLength':0x1}},'required':['key'],...v(a0_0xf2a334(0x4f1))},'archive':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]}},'required':['lastMessage',a0_0xf2a334(0x65e)]},Qa={'$id':(0x0,C['v4'])(),'type':'object','properties':{'id':{'type':a0_0xf2a334(0x16b)},'fromMe':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0xf2a334(0x16b)},'participant':{'type':a0_0xf2a334(0x16b)}},'required':['id',a0_0xf2a334(0x329),a0_0xf2a334(0x61e)],...v('id','remoteJid',a0_0xf2a334(0x23e))},Ya={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'where':{'type':a0_0xf2a334(0x524),'properties':{'_id':{'type':a0_0xf2a334(0x16b),'minLength':0x1},'pushName':{'type':'string','minLength':0x1},'id':{'type':'string','minLength':0x1}},...v(a0_0xf2a334(0x29b),'id',a0_0xf2a334(0x27d))}}},Xa={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'name':{'type':a0_0xf2a334(0x16b)}},...v(a0_0xf2a334(0x76f))},Za={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'status':{'type':a0_0xf2a334(0x16b)}},...v(a0_0xf2a334(0x7cb))},Oe={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'number':{'type':a0_0xf2a334(0x16b)},'picture':{'type':'string'}}},ei={'type':a0_0xf2a334(0x524),'properties':{'wuid':{'type':'string'},'name':{'type':a0_0xf2a334(0x16b)},'picture':{'type':a0_0xf2a334(0x16b)},'status':{'type':a0_0xf2a334(0x16b)},'isBusiness':{'type':a0_0xf2a334(0x6ef)}}},ti={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'where':{'type':a0_0xf2a334(0x524),'properties':{'_id':{'type':a0_0xf2a334(0x16b),'minLength':0x1},'key':{'type':a0_0xf2a334(0x524),'if':{'propertyNames':{'enum':[a0_0xf2a334(0x329),a0_0xf2a334(0x61e),'id']}},'then':{'properties':{'remoteJid':{'type':'string','minLength':0x1,'description':'The\x20property\x20cannot\x20be\x20empty'},'id':{'type':a0_0xf2a334(0x16b),'minLength':0x1,'description':a0_0xf2a334(0x185)},'fromMe':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0xf2a334(0x524)}},...v(a0_0xf2a334(0x29b))},'limit':{'type':a0_0xf2a334(0x253)}}},xc={'$id':(0x0,C['v4'])(),'type':'object','properties':{'where':{'type':a0_0xf2a334(0x524),'properties':{'_id':{'type':a0_0xf2a334(0x16b)},'remoteJid':{'type':a0_0xf2a334(0x16b)},'id':{'type':a0_0xf2a334(0x16b)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'participant':{'type':a0_0xf2a334(0x16b)},'status':{'type':a0_0xf2a334(0x16b),'enum':['ERROR',a0_0xf2a334(0x7e1),a0_0xf2a334(0x7ce),a0_0xf2a334(0x25d),a0_0xf2a334(0x85d),a0_0xf2a334(0x428)]}},...v(a0_0xf2a334(0x29b),a0_0xf2a334(0x61e),'id',a0_0xf2a334(0x7cb))},'limit':{'type':a0_0xf2a334(0x253)}}},si={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Z},'presence':{'type':a0_0xf2a334(0x16b),'enum':[a0_0xf2a334(0x172),'available',a0_0xf2a334(0x170),a0_0xf2a334(0x5a7),a0_0xf2a334(0x280)]}},'required':[a0_0xf2a334(0x364),a0_0xf2a334(0x50d)]},ai={'$id':(0x0,C['v4'])(),'type':'object','properties':{'subject':{'type':a0_0xf2a334(0x16b)},'description':{'type':a0_0xf2a334(0x16b)},'profilePicture':{'type':a0_0xf2a334(0x16b)},'participants':{'type':a0_0xf2a334(0x259),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0xf2a334(0x16b),'minLength':0xa,'pattern':a0_0xf2a334(0x190),'description':a0_0xf2a334(0x368)}}},'required':['subject',a0_0xf2a334(0x62a)],...v(a0_0xf2a334(0x268),'description',a0_0xf2a334(0x4e4))},xe={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'groupJid':{'type':a0_0xf2a334(0x16b),'pattern':'^\x5cd+([-]\x5cd+)*@g.us$'}},'required':[a0_0xf2a334(0x291)],...v(a0_0xf2a334(0x291))},ii={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'groupJid':{'type':'string'},'action':{'type':a0_0xf2a334(0x16b),'enum':[a0_0xf2a334(0x1c0),a0_0xf2a334(0x5c8),a0_0xf2a334(0x3b3),a0_0xf2a334(0x285),a0_0xf2a334(0x316),'approve']},'participants':{'type':a0_0xf2a334(0x259),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0xf2a334(0x16b),'minLength':0xa,'pattern':a0_0xf2a334(0x190),'description':a0_0xf2a334(0x368)}}},'required':[a0_0xf2a334(0x291),a0_0xf2a334(0x4b8),a0_0xf2a334(0x62a)],...v(a0_0xf2a334(0x291),a0_0xf2a334(0x4b8))},oi={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'groupJid':{'type':'string'},'expiration':{'type':a0_0xf2a334(0x50d),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0xf2a334(0x291),a0_0xf2a334(0x847)],...v(a0_0xf2a334(0x291),a0_0xf2a334(0x847))},ri={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'groupJid':{'type':a0_0xf2a334(0x16b)},'image':{'type':a0_0xf2a334(0x16b)}},'required':[a0_0xf2a334(0x291),'image'],...v(a0_0xf2a334(0x291),a0_0xf2a334(0x1b1))},ni={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'groupJid':{'type':a0_0xf2a334(0x16b)},'description':{'type':a0_0xf2a334(0x16b)}},'required':[a0_0xf2a334(0x291),a0_0xf2a334(0x22e)],...v(a0_0xf2a334(0x291),a0_0xf2a334(0x22e))},ci={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'groupJid':{'type':a0_0xf2a334(0x16b)},'name':{'type':'string'}},'required':[a0_0xf2a334(0x291),'name'],...v(a0_0xf2a334(0x291),a0_0xf2a334(0x76f))},li={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'groupJid':{'type':a0_0xf2a334(0x16b)},'setting':{'type':'string','enum':['announcement',a0_0xf2a334(0x235),a0_0xf2a334(0x5e1),a0_0xf2a334(0x66d)]}},'required':[a0_0xf2a334(0x291),a0_0xf2a334(0x560)],...v(a0_0xf2a334(0x291),a0_0xf2a334(0x560))},ui={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'groupJid':{'type':'string'},'restrict':{'type':a0_0xf2a334(0x6ef)},'announce':{'type':a0_0xf2a334(0x6ef)},'memberAddMode':{'type':a0_0xf2a334(0x6ef)},'joinApprovalMode':{'type':a0_0xf2a334(0x6ef)},'expiration':{'type':a0_0xf2a334(0x253),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':'string'},'description':{'type':a0_0xf2a334(0x16b)},'image':{'type':a0_0xf2a334(0x16b)}}},Ns={'$id':(0x0,C['v4'])(),'type':'object','properties':{'inviteCode':{'type':a0_0xf2a334(0x16b)}},'required':[a0_0xf2a334(0x889)],...v(a0_0xf2a334(0x889))},di={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'url':{'type':a0_0xf2a334(0x16b)},'enabled':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]}},'required':[a0_0xf2a334(0x2b4),a0_0xf2a334(0x3f8)]},Pc={'$id':(0x0,C['v4'])(),'type':a0_0xf2a334(0x524),'properties':{'local_map':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0xf2a334(0x6ef),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0xf2a334(0x4f3),a0_0xf2a334(0x867),a0_0xf2a334(0x3b1),a0_0xf2a334(0x4dd),a0_0xf2a334(0x49a),'MESSAGES_UPSERT',a0_0xf2a334(0x70f),a0_0xf2a334(0x6be),'CONTACTS_UPSERT','CONTACTS_UPDATE',a0_0xf2a334(0x611),'CHATS_SET',a0_0xf2a334(0x8be),'CHATS_UPDATE',a0_0xf2a334(0x77d),a0_0xf2a334(0x83d),a0_0xf2a334(0x1a1),'GROUPS_UPDATE','GROUP_PARTICIPANTS_UPDATE'],...v(a0_0xf2a334(0x4f3),a0_0xf2a334(0x867),a0_0xf2a334(0x3b1),'MESSAGES_SET',a0_0xf2a334(0x49a),a0_0xf2a334(0x184),a0_0xf2a334(0x70f),a0_0xf2a334(0x6be),a0_0xf2a334(0x7a6),a0_0xf2a334(0x7ca),a0_0xf2a334(0x611),'CHATS_SET',a0_0xf2a334(0x8be),a0_0xf2a334(0x2db),a0_0xf2a334(0x77d),a0_0xf2a334(0x83d),'GROUPS_UPSERT',a0_0xf2a334(0x3cb),a0_0xf2a334(0x8c2))},rt=class{},nt=class extends O{['getContactModelForOwner'](_0x2057b4){return aa(_0x2057b4);}async[a0_0xf2a334(0x26f)](_0x1d3399){const _0x1a5a94=a0_0xf2a334;if(_0x1d3399[_0x1a5a94(0x250)]!==0x0)try{return{'insertCount':(await this[_0x1a5a94(0x32c)](_0x1d3399[0x0]['owner'])[_0x1a5a94(0x210)]([..._0x1d3399]))[_0x1a5a94(0x250)]};}catch(_0x469b82){return _0x469b82;}}async[a0_0xf2a334(0x44e)](_0x30e123,_0x3e2f7f){const _0x7538dc=a0_0xf2a334;try{return{'deletedCount':(await this[_0x7538dc(0x32c)](_0x3e2f7f)[_0x7538dc(0x881)]({..._0x30e123[_0x7538dc(0x770)]}))[_0x7538dc(0x706)]};}catch(_0x424722){return{'error':_0x424722?.[_0x7538dc(0x20e)]()};}}async['update'](_0x53d102,_0x11d2cc){const _0x3908e9=a0_0xf2a334;try{if(_0x53d102['length']===0x0)return;let _0x5324b4=this[_0x3908e9(0x32c)](_0x11d2cc),_0xd08eb1=_0x53d102[_0x3908e9(0x5b0)](_0x398093=>({'updateOne':{'filter':{'_id':_0x398093[_0x3908e9(0x29b)],'owner':_0x11d2cc},'update':{..._0x398093}}})),{modifiedCount:_0x261a34}=await _0x5324b4[_0x3908e9(0x8b6)](_0xd08eb1);return{'insertCount':_0x261a34};}catch{return;}}async[a0_0xf2a334(0x556)](_0x5cf2ae,_0x508eab){const _0xd15717=a0_0xf2a334;try{let _0xd4fbd4=this[_0xd15717(0x32c)](_0x508eab),_0x4619cb=A(_0x5cf2ae[_0xd15717(0x770)]);return await _0xd4fbd4[_0xd15717(0x556)](_0x4619cb)['limit'](_0x5cf2ae?.[_0xd15717(0x384)]??0x0)[_0xd15717(0x695)]();}catch{return[];}}async[a0_0xf2a334(0x18a)](_0x41b401,_0x4d1c24){const _0x203aea=a0_0xf2a334;try{let _0x20873f=this[_0x203aea(0x32c)](_0x4d1c24),_0x1940c2=A(_0x41b401['where']);return await _0x20873f[_0x203aea(0x18a)](_0x1940c2)['lean']();}catch{return null;}}async['deleteAll'](_0x278097){const _0x4a9fdb=a0_0xf2a334;try{return await this['getContactModelForOwner'](_0x278097)[_0x4a9fdb(0x418)][_0x4a9fdb(0x63f)](),{'success':!0x0};}catch(_0x40f76b){return console['error'](_0x40f76b),{'success':!0x1,'error':_0x40f76b};}}},ct=require(a0_0xf2a334(0x7f7)),Vc=require('express-async-errors'),$s=new $(a0_0xf2a334(0x37e)),V=class{[a0_0xf2a334(0x5f3)](_0x14fb56,_0x51c29e=!0x0){const _0x2d0319=a0_0xf2a334;let _0x29b9dd='/'+_0x14fb56;return _0x51c29e&&(_0x29b9dd+=_0x2d0319(0x7c0)),_0x29b9dd;}async[a0_0xf2a334(0x2dc)](_0x12b379){const _0x3ac309=a0_0xf2a334;let {request:_0x541562,schema:_0x5d19c1,ClassRef:_0x20698d,execute:_0x5038b0}=_0x12b379,_0x330641=new _0x20698d(),_0x33ba4c=_0x541562[_0x3ac309(0x32e)],_0x42922d=_0x541562['params'];_0x541562?.[_0x3ac309(0x165)]&&Object[_0x3ac309(0x3e5)](_0x541562[_0x3ac309(0x165)])[_0x3ac309(0x250)]>0x0&&Object[_0x3ac309(0x58a)](_0x42922d,_0x541562[_0x3ac309(0x165)]),_0x541562['originalUrl'][_0x3ac309(0x343)](_0x3ac309(0x1ed))&&Object[_0x3ac309(0x58a)](_0x42922d,_0x33ba4c),Object[_0x3ac309(0x58a)](_0x330641,_0x33ba4c);let _0x596bf9=_0x5d19c1?(0x0,ct[_0x3ac309(0x394)])(_0x330641,_0x5d19c1):{'valid':!0x0,'errors':[]};if(!_0x596bf9['valid']){let _0x4176e0=_0x596bf9['errors'][_0x3ac309(0x5b0)](({property:_0x596933,stack:_0x3a41d7,schema:_0x12610e})=>{const _0x292a31=_0x3ac309;let _0x368a62;return _0x12610e[_0x292a31(0x22e)]?_0x368a62=_0x12610e[_0x292a31(0x22e)]:_0x368a62=_0x3a41d7[_0x292a31(0x6b0)]('instance.',''),{'property':_0x596933[_0x292a31(0x6b0)](_0x292a31(0x8f3),''),'message':_0x368a62};});throw $s['error']([..._0x4176e0]),new m(..._0x4176e0);}return await _0x5038b0(_0x42922d,_0x330641);}async[a0_0xf2a334(0x70b)](_0x5931ff){const _0x5c6c9a=a0_0xf2a334;let {request:_0x509f1e,ClassRef:_0x32c274,schema:_0x4a6789,execute:_0x321713}=_0x5931ff,_0x5cb396=_0x509f1e['query'];if(!_0x5cb396?.[_0x5c6c9a(0x291)])throw new m('The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query',_0x5c6c9a(0x1a0));let _0x50444d=_0x509f1e[_0x5c6c9a(0x5a3)],_0x70c7e1=_0x509f1e[_0x5c6c9a(0x32e)],_0x5172d5=new _0x32c274();Object[_0x5c6c9a(0x58a)](_0x70c7e1,_0x5cb396),Object[_0x5c6c9a(0x58a)](_0x5172d5,_0x70c7e1);let _0x92485a=(0x0,ct[_0x5c6c9a(0x394)])(_0x5172d5,_0x4a6789);if(!_0x92485a[_0x5c6c9a(0x90f)]){let _0x31af59=_0x92485a[_0x5c6c9a(0x4c2)][_0x5c6c9a(0x5b0)](({property:_0x117a3f,stack:_0xd0b119,schema:_0xb0bcd9})=>{const _0x5a5366=_0x5c6c9a;let _0x4d0eb9;return _0xb0bcd9[_0x5a5366(0x22e)]?_0x4d0eb9=_0xb0bcd9[_0x5a5366(0x22e)]:_0x4d0eb9=_0xd0b119[_0x5a5366(0x6b0)](_0x5a5366(0x8f3),''),{'property':_0x117a3f['replace'](_0x5a5366(0x8f3),''),'message':_0x4d0eb9};});throw $s['error']([..._0x31af59]),new m(..._0x31af59);}return await _0x321713(_0x50444d,_0x5172d5);}async[a0_0xf2a334(0x3a1)](_0x460dda){const _0x3cbf11=a0_0xf2a334;let {request:_0x7373bc,ClassRef:_0x289c2f,schema:_0x5d128a,execute:_0x3be995}=_0x460dda,_0x5e6ccf=_0x7373bc['body'];if(!_0x5e6ccf?.[_0x3cbf11(0x889)])throw new m(_0x3cbf11(0x502),_0x3cbf11(0x842));let _0x3a95fc=_0x7373bc[_0x3cbf11(0x5a3)],_0x734c41=_0x7373bc[_0x3cbf11(0x32e)],_0x112aaf=new _0x289c2f();Object['assign'](_0x734c41,_0x5e6ccf),Object[_0x3cbf11(0x58a)](_0x112aaf,_0x734c41);let _0x471684=(0x0,ct[_0x3cbf11(0x394)])(_0x112aaf,_0x5d128a);if(!_0x471684[_0x3cbf11(0x90f)]){let _0x1c4d26=_0x471684[_0x3cbf11(0x4c2)][_0x3cbf11(0x5b0)](({property:_0x3370d0,stack:_0x5572fa,schema:_0x1640a3})=>{const _0x437c4e=_0x3cbf11;let _0x2f5a6d;return _0x1640a3[_0x437c4e(0x22e)]?_0x2f5a6d=_0x1640a3[_0x437c4e(0x22e)]:_0x2f5a6d=_0x5572fa['replace'](_0x437c4e(0x8f3),''),{'property':_0x3370d0[_0x437c4e(0x6b0)](_0x437c4e(0x8f3),''),'message':_0x2f5a6d};});throw $s[_0x3cbf11(0x830)]([..._0x1c4d26]),new m(..._0x1c4d26);}return await _0x3be995(_0x3a95fc,_0x112aaf);}},M=class{},il=new $(a0_0xf2a334(0x31c)),lt=class extends V{constructor(..._0x469ea1){const _0x30505d=a0_0xf2a334;super(),this[_0x30505d(0x222)]=(0x0,pi['Router'])(),this[_0x30505d(0x222)][_0x30505d(0x1a4)](this[_0x30505d(0x5f3)](_0x30505d(0x838)),..._0x469ea1,async(_0x499315,_0x49e8e5)=>{const _0x3733a6=_0x30505d;let _0x9f0e1b=await this[_0x3733a6(0x2dc)]({'request':_0x499315,'schema':si,'ClassRef':Ye,'execute':(_0x5ee971,_0x3b7821)=>D[_0x3733a6(0x838)](_0x5ee971,_0x3b7821)});return _0x49e8e5[_0x3733a6(0x7cb)](0xc9)['json'](_0x9f0e1b);})[_0x30505d(0x1a4)](this['routerPath'](_0x30505d(0x424)),..._0x469ea1,async(_0x346758,_0x1e15a3)=>{const _0x4ff884=_0x30505d;let _0x3b625b=await this[_0x4ff884(0x2dc)]({'request':_0x346758,'schema':Wa,'ClassRef':Xe,'execute':(_0x5bd16a,_0xd79e80)=>D[_0x4ff884(0x56e)](_0x5bd16a,_0xd79e80)});return _0x1e15a3[_0x4ff884(0x7cb)](0xc9)[_0x4ff884(0x6cb)](_0x3b625b);})[_0x30505d(0x1a4)](this['routerPath'](_0x30505d(0x67a)),..._0x469ea1,async(_0x5ae115,_0x15bb86)=>{const _0x2ac200=_0x30505d;let _0x325db5=await this['dataValidate']({'request':_0x5ae115,'schema':E,'ClassRef':M,'execute':(_0xf2f901,_0x2addf1)=>D[_0x2ac200(0x67a)](_0xf2f901,_0x2addf1)});return _0x15bb86['status'](0xc9)['json'](_0x325db5);})['put'](this['routerPath'](_0x30505d(0x6f2)),..._0x469ea1,async(_0x354c40,_0x5ed285)=>{const _0x4c9342=_0x30505d;let _0x5bf4e8=await this[_0x4c9342(0x2dc)]({'request':_0x354c40,'schema':za,'ClassRef':tt,'execute':(_0x5c81ca,_0x31b8d3)=>D[_0x4c9342(0x80f)](_0x5c81ca,_0x31b8d3)});return _0x5ed285[_0x4c9342(0x7cb)](0xc9)['json'](_0x5bf4e8);})[_0x30505d(0x7ee)](this[_0x30505d(0x5f3)](_0x30505d(0x887)),..._0x469ea1,async(_0x19047d,_0x3d2804)=>{const _0x409b4a=_0x30505d;let _0x846ad8=await this[_0x409b4a(0x2dc)]({'request':_0x19047d,'schema':Ka,'ClassRef':st,'execute':(_0x3b1cdd,_0x3377b9)=>D[_0x409b4a(0x887)](_0x3b1cdd,_0x3377b9)});return _0x3d2804[_0x409b4a(0x7cb)](0xc9)['json'](_0x846ad8);})[_0x30505d(0x44e)](this['routerPath'](_0x30505d(0x7e8)),..._0x469ea1,async(_0x68db0,_0x2485d1)=>{const _0x5c27bc=_0x30505d;let _0x11211e=await this[_0x5c27bc(0x2dc)]({'request':_0x68db0,'schema':Qa,'ClassRef':it,'execute':(_0x3c74c0,_0x17b8ef)=>D[_0x5c27bc(0x503)](_0x3c74c0,_0x17b8ef)});return _0x2485d1[_0x5c27bc(0x7cb)](0xc9)[_0x5c27bc(0x6cb)](_0x11211e);})[_0x30505d(0x1a4)](this['routerPath']('fetchProfilePictureUrl'),..._0x469ea1,async(_0x59b5c4,_0x44ad9c)=>{const _0x52c71d=_0x30505d;let _0x46bc50=await this['dataValidate']({'request':_0x59b5c4,'schema':Oe,'ClassRef':Ie,'execute':(_0x1c15c4,_0x405dbc)=>D[_0x52c71d(0x5f4)](_0x1c15c4,_0x405dbc)});return _0x44ad9c['status'](0xc8)[_0x52c71d(0x6cb)](_0x46bc50);})[_0x30505d(0x1a4)](this['routerPath']('fetchProfile'),..._0x469ea1,async(_0x5a70d2,_0x121f6d)=>{const _0x25a951=_0x30505d;let _0x59f0a2=await this[_0x25a951(0x2dc)]({'request':_0x5a70d2,'schema':ei,'ClassRef':Ie,'execute':(_0xf34542,_0x30fce9)=>D['fetchProfile'](_0xf34542,_0x30fce9)});return _0x121f6d['status'](0xc8)[_0x25a951(0x6cb)](_0x59f0a2);})[_0x30505d(0x1a4)](this[_0x30505d(0x5f3)]('findContacts'),..._0x469ea1,async(_0x22974b,_0x2ab514)=>{const _0x26d896=_0x30505d;let _0x57b417=await this[_0x26d896(0x2dc)]({'request':_0x22974b,'schema':Ya,'ClassRef':rt,'execute':(_0x317043,_0x40b07e)=>D[_0x26d896(0x358)](_0x317043,_0x40b07e)});return _0x2ab514[_0x26d896(0x7cb)](0xc8)[_0x26d896(0x6cb)](_0x57b417);})[_0x30505d(0x1a4)](this[_0x30505d(0x5f3)](_0x30505d(0x40d)),..._0x469ea1,async(_0x8f8175,_0x1273b3)=>{const _0x9ef324=_0x30505d;let _0x391fba=await this[_0x9ef324(0x2dc)]({'request':_0x8f8175,'schema':null,'ClassRef':Object,'execute':(_0x2cae32,_0x1a887f)=>D['getBase64FromMediaMessage'](_0x2cae32,_0x1a887f)});return _0x1273b3[_0x9ef324(0x7cb)](0xc9)['json'](_0x391fba);})[_0x30505d(0x1a4)](this[_0x30505d(0x5f3)](_0x30505d(0x478)),..._0x469ea1,async(_0x4f08d2,_0x1f8207)=>{const _0x515be4=_0x30505d;let _0x3c2996=await this[_0x515be4(0x2dc)]({'request':_0x4f08d2,'schema':ti,'ClassRef':Ke,'execute':(_0x26edba,_0x166aa0)=>D[_0x515be4(0x67f)](_0x26edba,_0x166aa0)});return _0x1f8207[_0x515be4(0x7cb)](0xc8)['json'](_0x3c2996);})[_0x30505d(0x4c6)](this['routerPath'](_0x30505d(0x337)),..._0x469ea1,async(_0xc405e1,_0x5437ad)=>{const _0x3cbae1=_0x30505d;let _0x4d682e=await this['dataValidate']({'request':_0xc405e1,'schema':null,'ClassRef':M,'execute':_0x4f6a30=>D[_0x3cbae1(0x216)](_0x4f6a30)});return _0x5437ad[_0x3cbae1(0x7cb)](0xc8)['json'](_0x4d682e);})['get'](this[_0x30505d(0x5f3)]('findLabels'),..._0x469ea1,async(_0x1ed643,_0x20fc01)=>{const _0x2b893c=_0x30505d;let _0x592c94=await this[_0x2b893c(0x2dc)]({'request':_0x1ed643,'schema':null,'ClassRef':M,'execute':_0x1766cc=>D[_0x2b893c(0x54d)](_0x1766cc)});return _0x20fc01[_0x2b893c(0x7cb)](0xc8)[_0x2b893c(0x6cb)](_0x592c94);})[_0x30505d(0x7ee)](this[_0x30505d(0x5f3)](_0x30505d(0x90c)),..._0x469ea1,async(_0x55a96b,_0x36beba)=>{const _0x43e5b7=_0x30505d;let _0x3089a9=await this[_0x43e5b7(0x2dc)]({'request':_0x55a96b,'schema':null,'ClassRef':Array,'execute':(_0x2d94a9,_0x583fa6)=>D[_0x43e5b7(0x90c)](_0x2d94a9,_0x583fa6)});return _0x36beba[_0x43e5b7(0x7cb)](0xc8)[_0x43e5b7(0x6cb)](_0x3089a9);})['get'](this[_0x30505d(0x5f3)](_0x30505d(0x514)),..._0x469ea1,async(_0x45669b,_0x277b78)=>{const _0x108f43=_0x30505d;let _0x34ee66=await this[_0x108f43(0x2dc)]({'request':_0x45669b,'schema':null,'ClassRef':M,'execute':_0xb4e9d7=>D[_0x108f43(0x514)](_0xb4e9d7)});return _0x277b78[_0x108f43(0x7cb)](0xc8)[_0x108f43(0x6cb)](_0x34ee66);})['put'](this[_0x30505d(0x5f3)](_0x30505d(0x860)),..._0x469ea1,async(_0x5936d6,_0xca7f3b)=>{const _0x12f3fa=_0x30505d;let _0x4581f3=await this['dataValidate']({'request':_0x5936d6,'schema':Ha,'ClassRef':at,'execute':(_0x18222f,_0x36ab06)=>D[_0x12f3fa(0x860)](_0x18222f,_0x36ab06)});return _0xca7f3b[_0x12f3fa(0x7cb)](0xc9)[_0x12f3fa(0x6cb)](_0x4581f3);})['post'](this[_0x30505d(0x5f3)](_0x30505d(0x2e2)),..._0x469ea1,async(_0x209602,_0x4a3910)=>{const _0x39bd98=_0x30505d;let _0xd15c2b=await this['dataValidate']({'request':_0x209602,'schema':Oe,'ClassRef':Ce,'execute':(_0x55bca7,_0x4ec356)=>D[_0x39bd98(0x2e2)](_0x55bca7,_0x4ec356)});return _0x4a3910[_0x39bd98(0x7cb)](0xc8)['json'](_0xd15c2b);})['post'](this['routerPath']('updateProfileName'),..._0x469ea1,async(_0x4f0331,_0x136be9)=>{const _0x4598e6=_0x30505d;let _0x32089d=await this['dataValidate']({'request':_0x4f0331,'schema':Xa,'ClassRef':Ze,'execute':(_0x9464a0,_0x3ee972)=>D[_0x4598e6(0x8ab)](_0x9464a0,_0x3ee972)});return _0x136be9[_0x4598e6(0x7cb)](0xc8)[_0x4598e6(0x6cb)](_0x32089d);})[_0x30505d(0x1a4)](this[_0x30505d(0x5f3)]('updateProfileStatus'),..._0x469ea1,async(_0x19685b,_0x3b3771)=>{const _0x9cda92=_0x30505d;let _0xaeaf2f=await this[_0x9cda92(0x2dc)]({'request':_0x19685b,'schema':Za,'ClassRef':et,'execute':(_0x1a47c6,_0x231567)=>D[_0x9cda92(0x2aa)](_0x1a47c6,_0x231567)});return _0x3b3771['status'](0xc8)['json'](_0xaeaf2f);})[_0x30505d(0x7ee)](this[_0x30505d(0x5f3)](_0x30505d(0x741)),..._0x469ea1,async(_0x1f7ebe,_0x3dccde)=>{const _0x4a1460=_0x30505d;let _0x22fe3d=await this['dataValidate']({'request':_0x1f7ebe,'schema':Oe,'ClassRef':Ce,'execute':(_0x3e8e26,_0xde9df8)=>D[_0x4a1460(0x741)](_0x3e8e26,_0xde9df8)});return _0x3dccde[_0x4a1460(0x7cb)](0xc8)[_0x4a1460(0x6cb)](_0x22fe3d);})[_0x30505d(0x44e)](this['routerPath'](_0x30505d(0x7f2)),..._0x469ea1,async(_0x27c960,_0x73104e)=>{const _0xb54b4e=_0x30505d;let _0x47627f=await this[_0xb54b4e(0x2dc)]({'request':_0x27c960,'schema':Oe,'ClassRef':Ce,'execute':(_0xc98d2f,_0x379b2c)=>D[_0xb54b4e(0x7f2)](_0xc98d2f,_0x379b2c)});return _0x73104e['status'](0xc8)[_0xb54b4e(0x6cb)](_0x47627f);});}},hi=require('express'),ut=class{},dt=class{},pt=class{},ht=class{},gt=class{},mt=class{},ee=class{},Pe=class{},ft=class extends ee{},wt=class extends ee{},yt=class extends V{constructor(..._0x35317a){const _0xd49dfe=a0_0xf2a334;super(),this[_0xd49dfe(0x222)]=(0x0,hi[_0xd49dfe(0x28b)])(),this['router'][_0xd49dfe(0x1a4)](this[_0xd49dfe(0x5f3)](_0xd49dfe(0x2d0)),..._0x35317a,async(_0x4aada8,_0x3546e9)=>{const _0x54565a=_0xd49dfe;let _0x49501b=await this[_0x54565a(0x2dc)]({'request':_0x4aada8,'schema':ai,'ClassRef':ut,'execute':(_0x4fa6cc,_0x51be47)=>q[_0x54565a(0x168)](_0x4fa6cc,_0x51be47)});_0x3546e9['status'](0xc9)['json'](_0x49501b);})['put'](this[_0xd49dfe(0x5f3)](_0xd49dfe(0x625)),..._0x35317a,async(_0x422437,_0x53593a)=>{const _0x40ee8b=_0xd49dfe;let _0x19a33a=await this[_0x40ee8b(0x70b)]({'request':_0x422437,'schema':ri,'ClassRef':dt,'execute':(_0x14cf77,_0x6daeda)=>q[_0x40ee8b(0x625)](_0x14cf77,_0x6daeda)});_0x53593a[_0x40ee8b(0x7cb)](0xc9)['json'](_0x19a33a);})[_0xd49dfe(0x7ee)](this[_0xd49dfe(0x5f3)]('groupDesc'),..._0x35317a,async(_0x32d160,_0x932a14)=>{const _0x1e9a15=_0xd49dfe;let _0x743215=await this['groupValidate']({'request':_0x32d160,'schema':ni,'ClassRef':pt,'execute':(_0xd1b28b,_0xb94a54)=>q[_0x1e9a15(0x89f)](_0xd1b28b,_0xb94a54)});_0x932a14[_0x1e9a15(0x7cb)](0xc9)[_0x1e9a15(0x6cb)](_0x743215);})[_0xd49dfe(0x7ee)](this[_0xd49dfe(0x5f3)](_0xd49dfe(0x790)),..._0x35317a,async(_0x32ee46,_0x172f8f)=>{const _0x3ec787=_0xd49dfe;let _0x1683ec=await this['groupValidate']({'request':_0x32ee46,'schema':ci,'ClassRef':ht,'execute':(_0x155ae8,_0x555a96)=>q[_0x3ec787(0x790)](_0x155ae8,_0x555a96)});_0x172f8f[_0x3ec787(0x7cb)](0xc9)[_0x3ec787(0x6cb)](_0x1683ec);})['put'](this[_0xd49dfe(0x5f3)](_0xd49dfe(0x615)),..._0x35317a,async(_0x1c17c5,_0x24db86)=>{const _0x49ee14=_0xd49dfe;let _0x201d0f=await this[_0x49ee14(0x70b)]({'request':_0x1c17c5,'schema':ui,'ClassRef':mt,'execute':(_0x11bc81,_0x3fb405)=>q[_0x49ee14(0x615)](_0x11bc81,_0x3fb405)});_0x24db86[_0x49ee14(0x7cb)](0xc9)[_0x49ee14(0x6cb)](_0x201d0f);})['put'](this[_0xd49dfe(0x5f3)]('groupSetting'),..._0x35317a,async(_0x4c5f0e,_0x326fa7)=>{let _0x3721d4=await this['groupValidate']({'request':_0x4c5f0e,'schema':li,'ClassRef':gt,'execute':(_0x255688,_0x7e8b14)=>q['groupSetting'](_0x255688,_0x7e8b14)});_0x326fa7['status'](0xc9)['json'](_0x3721d4);})[_0xd49dfe(0x7ee)](this['routerPath'](_0xd49dfe(0x167)),..._0x35317a,async(_0x8b9946,_0x2d799b)=>{const _0x188d0f=_0xd49dfe;let _0x2692aa=await this[_0x188d0f(0x70b)]({'request':_0x8b9946,'schema':oi,'ClassRef':wt,'execute':(_0x5b3b16,_0x7fb35d)=>q[_0x188d0f(0x167)](_0x5b3b16,_0x7fb35d)});_0x2d799b['status'](0xc9)[_0x188d0f(0x6cb)](_0x2692aa);})['get'](this[_0xd49dfe(0x5f3)]('findGroupInfos'),..._0x35317a,async(_0x289851,_0x49902a)=>{const _0x48fbe0=_0xd49dfe;let _0x32b1ef=await this['groupValidate']({'request':_0x289851,'schema':xe,'ClassRef':ee,'execute':(_0x306009,_0x9e7d5c)=>q[_0x48fbe0(0x7a5)](_0x306009,_0x9e7d5c)});_0x49902a[_0x48fbe0(0x7cb)](0xc8)[_0x48fbe0(0x6cb)](_0x32b1ef);})[_0xd49dfe(0x4c6)](this['routerPath'](_0xd49dfe(0x873)),..._0x35317a,async(_0x2c2a4b,_0x179cf9)=>{const _0x3d07f1=_0xd49dfe;let _0x2d93fc=await this[_0x3d07f1(0x2dc)]({'request':_0x2c2a4b,'schema':E,'ClassRef':M,'execute':_0xcadc9b=>q[_0x3d07f1(0x873)](_0xcadc9b)});_0x179cf9[_0x3d07f1(0x7cb)](0xc8)['json'](_0x2d93fc);})[_0xd49dfe(0x4c6)](this[_0xd49dfe(0x5f3)](_0xd49dfe(0x62a)),..._0x35317a,async(_0x7a64e7,_0x1cf0c6)=>{const _0x380aba=_0xd49dfe;let _0xe65f94=await this['groupValidate']({'request':_0x7a64e7,'schema':xe,'ClassRef':ee,'execute':(_0x3bc898,_0x11588d)=>q[_0x380aba(0x462)](_0x3bc898,_0x11588d)});_0x1cf0c6[_0x380aba(0x7cb)](0xc8)['json'](_0xe65f94);})['get'](this[_0xd49dfe(0x5f3)]('inviteCode'),..._0x35317a,async(_0x438110,_0x4d6290)=>{const _0x270358=_0xd49dfe;let _0x5f106a=await this[_0x270358(0x70b)]({'request':_0x438110,'schema':xe,'ClassRef':ee,'execute':(_0x89c401,_0xc4b5d7)=>q[_0x270358(0x889)](_0x89c401,_0xc4b5d7)});_0x4d6290[_0x270358(0x7cb)](0xc8)[_0x270358(0x6cb)](_0x5f106a);})['post'](this[_0xd49dfe(0x5f3)](_0xd49dfe(0x609)),..._0x35317a,async(_0x55a834,_0x486994)=>{const _0xd6d5fd=_0xd49dfe;let _0x4be3a2=await this[_0xd6d5fd(0x3a1)]({'request':_0x55a834,'schema':Ns,'ClassRef':Pe,'execute':(_0x30839c,_0x28dfb6)=>q[_0xd6d5fd(0x85b)](_0x30839c,_0x28dfb6)});_0x486994[_0xd6d5fd(0x7cb)](0xc9)[_0xd6d5fd(0x6cb)](_0x4be3a2);})['put'](this['routerPath'](_0xd49dfe(0x8dc)),..._0x35317a,async(_0x265c7a,_0x241762)=>{const _0x331c88=_0xd49dfe;let _0x3e25e6=await this['joinGroupValidate']({'request':_0x265c7a,'schema':Ns,'ClassRef':Pe,'execute':(_0x154e99,_0x2a29bd)=>q['joinGroup'](_0x154e99,_0x2a29bd)});_0x241762['status'](0xc9)[_0x331c88(0x6cb)](_0x3e25e6);})[_0xd49dfe(0x7ee)](this['routerPath'](_0xd49dfe(0x692)),..._0x35317a,async(_0x4dfe96,_0x1aa815)=>{const _0x4727bf=_0xd49dfe;let _0x52d48a=await this[_0x4727bf(0x70b)]({'request':_0x4dfe96,'schema':xe,'ClassRef':ee,'execute':(_0x8a5902,_0xd0a77f)=>q['revokeInviteCode'](_0x8a5902,_0xd0a77f)});_0x1aa815['status'](0xc9)[_0x4727bf(0x6cb)](_0x52d48a);})['put'](this[_0xd49dfe(0x5f3)](_0xd49dfe(0x54e)),..._0x35317a,async(_0x4d31b9,_0x2aaf49)=>{const _0x2cb4c0=_0xd49dfe;let _0x3f8faa=await this[_0x2cb4c0(0x70b)]({'request':_0x4d31b9,'schema':ii,'ClassRef':ft,'execute':(_0x4d688c,_0x469d1b)=>q[_0x2cb4c0(0x4ce)](_0x4d688c,_0x469d1b)});_0x2aaf49['status'](0xc9)[_0x2cb4c0(0x6cb)](_0x3f8faa);})[_0xd49dfe(0x44e)](this[_0xd49dfe(0x5f3)](_0xd49dfe(0x239)),..._0x35317a,async(_0x4c27f7,_0x43ada8)=>{const _0x4d475a=_0xd49dfe;let _0x94e53b=await this[_0x4d475a(0x70b)]({'request':_0x4c27f7,'schema':{},'ClassRef':ee,'execute':(_0x3cc895,_0x2b4e34)=>q[_0x4d475a(0x239)](_0x3cc895,_0x2b4e34)});_0x43ada8[_0x4d475a(0x7cb)](0xc8)[_0x4d475a(0x6cb)](_0x94e53b);});}},gi=require(a0_0xf2a334(0x3d3)),bt=class extends V{constructor(_0x526333,..._0xdcec37){const _0x17aa08=a0_0xf2a334;super(),this[_0x17aa08(0x566)]=_0x526333,this[_0x17aa08(0x222)]=(0x0,gi[_0x17aa08(0x28b)])();let _0x4abe25=_0x526333[_0x17aa08(0x4c6)](_0x17aa08(0x67c));this[_0x17aa08(0x222)][_0x17aa08(0x1a4)](_0x17aa08(0x51a),..._0xdcec37,async(_0x162b07,_0x15aa7a)=>{const _0x3aaeb7=_0x17aa08;let {instanceName:_0xaa4983,apikey:_0x1400b2,number:_0x2d3821}=_0x162b07[_0x3aaeb7(0x32e)],_0x5693ff=await le['createInstance']({'instanceName':_0xaa4983,'apikey':_0x1400b2,'number':_0x2d3821});return _0x15aa7a[_0x3aaeb7(0x7cb)](0xc9)[_0x3aaeb7(0x6cb)](_0x5693ff);})[_0x17aa08(0x7ee)](this[_0x17aa08(0x5f3)](_0x17aa08(0x54a)),..._0xdcec37,async(_0xf18173,_0xe2cadd)=>{const _0x429dd3=_0x17aa08;let _0x2602fe=await this[_0x429dd3(0x2dc)]({'request':_0xf18173,'schema':E,'ClassRef':M,'execute':_0x44fe6c=>le[_0x429dd3(0x90e)](_0x44fe6c)});return _0xe2cadd[_0x429dd3(0x7cb)](0xc8)['json'](_0x2602fe);})[_0x17aa08(0x4c6)](this[_0x17aa08(0x5f3)](_0x17aa08(0x3e0)),..._0xdcec37,async(_0x10e368,_0x37868e)=>{const _0xe3a920=_0x17aa08;let _0x2f8c93=await this[_0xe3a920(0x2dc)]({'request':_0x10e368,'schema':E,'ClassRef':M,'execute':_0x1912ce=>le[_0xe3a920(0x75e)](_0x1912ce)});return _0x37868e['status'](0xc8)[_0xe3a920(0x6cb)](_0x2f8c93);})[_0x17aa08(0x4c6)](this[_0x17aa08(0x5f3)]('connectionState'),..._0xdcec37,async(_0x632094,_0x24b350)=>{const _0x130a8f=_0x17aa08;let _0x50c9a8=await this[_0x130a8f(0x2dc)]({'request':_0x632094,'schema':E,'ClassRef':M,'execute':_0x15637c=>le['connectionState'](_0x15637c)});return _0x24b350[_0x130a8f(0x7cb)](0xc8)[_0x130a8f(0x6cb)](_0x50c9a8);})[_0x17aa08(0x4c6)](this[_0x17aa08(0x5f3)](_0x17aa08(0x45d),!0x1),..._0xdcec37,async(_0x520196,_0x387d45)=>{const _0x327dcb=_0x17aa08;let _0x5fcd47=await this['dataValidate']({'request':_0x520196,'schema':null,'ClassRef':M,'execute':_0xbc158=>le['fetchInstances'](_0xbc158)});return _0x387d45['status'](0xc8)[_0x327dcb(0x6cb)](_0x5fcd47);})[_0x17aa08(0x44e)](this['routerPath']('logout'),..._0xdcec37,async(_0x327bfe,_0x3ba1f6)=>{const _0x26df09=_0x17aa08;let _0x459486=await this['dataValidate']({'request':_0x327bfe,'schema':E,'ClassRef':M,'execute':_0x564159=>le['logout'](_0x564159)});return _0x3ba1f6[_0x26df09(0x7cb)](0xc8)['json'](_0x459486);})[_0x17aa08(0x44e)](this[_0x17aa08(0x5f3)](_0x17aa08(0x44e)),..._0xdcec37,async(_0x34b9ee,_0x1f148e)=>{let _0x3610d1=await this['dataValidate']({'request':_0x34b9ee,'schema':E,'ClassRef':M,'execute':_0x2d28b8=>le['deleteInstance'](_0x2d28b8)});return _0x1f148e['status'](0xc8)['json'](_0x3610d1);});}},mi=require(a0_0xf2a334(0x3d3)),Rs=class{},H=class extends Rs{},St=class extends H{},Mt=class extends H{},Ct=class extends H{},vt=class extends H{},De=class extends H{},Et=class extends H{},Nt=class extends H{},$t=class extends H{},Rt=class extends H{},At=class{},Tt=class extends V{constructor(..._0x112820){const _0x15dc7d=a0_0xf2a334;super(),this[_0x15dc7d(0x222)]=(0x0,mi[_0x15dc7d(0x28b)])(),this[_0x15dc7d(0x222)][_0x15dc7d(0x1a4)](this[_0x15dc7d(0x5f3)]('sendText'),..._0x112820,async(_0x483a77,_0x4a22c8)=>{const _0x563fb7=_0x15dc7d;let _0x41271f=await this[_0x563fb7(0x2dc)]({'request':_0x483a77,'schema':Pa,'ClassRef':St,'execute':(_0x3eb364,_0x3d6a36)=>B[_0x563fb7(0x4c3)](_0x3eb364,_0x3d6a36)});return _0x4a22c8[_0x563fb7(0x7cb)](0xc9)[_0x563fb7(0x6cb)](_0x41271f);})[_0x15dc7d(0x1a4)](this[_0x15dc7d(0x5f3)]('sendMedia'),..._0x112820,async(_0x11b94f,_0x2a2f4b)=>{const _0x1ccf39=_0x15dc7d;let _0x3aa395=await this[_0x1ccf39(0x2dc)]({'request':_0x11b94f,'schema':Fa,'ClassRef':De,'execute':(_0x2fc537,_0x39afad)=>B[_0x1ccf39(0x8e9)](_0x2fc537,_0x39afad)});return _0x2a2f4b[_0x1ccf39(0x7cb)](0xc9)[_0x1ccf39(0x6cb)](_0x3aa395);})[_0x15dc7d(0x1a4)](this['routerPath'](_0x15dc7d(0x378)),..._0x112820,async(_0x3a7c24,_0x4eb225)=>{const _0x2e56ab=_0x15dc7d;let _0x5311e1=await this['dataValidate']({'request':_0x3a7c24,'schema':Ja,'ClassRef':vt,'execute':(_0x13fddc,_0x35141c)=>B[_0x2e56ab(0x378)](_0x13fddc,_0x35141c)});return _0x4eb225[_0x2e56ab(0x7cb)](0xc9)[_0x2e56ab(0x6cb)](_0x5311e1);})[_0x15dc7d(0x1a4)](this[_0x15dc7d(0x5f3)](_0x15dc7d(0x8bd)),..._0x112820,async(_0x4e2b99,_0x58382e)=>{const _0x5f41dc=_0x15dc7d;let _0x2388ad=await this[_0x5f41dc(0x2dc)]({'request':_0x4e2b99,'schema':Ua,'ClassRef':De,'execute':(_0xc13335,_0xd9115d)=>B[_0x5f41dc(0x8bd)](_0xc13335,_0xd9115d)});return _0x58382e['status'](0xc9)[_0x5f41dc(0x6cb)](_0x2388ad);})['post'](this[_0x15dc7d(0x5f3)]('sendLocation'),..._0x112820,async(_0x4317dc,_0x28337d)=>{const _0xeb6443=_0x15dc7d;let _0x150a01=await this[_0xeb6443(0x2dc)]({'request':_0x4317dc,'schema':qa,'ClassRef':Nt,'execute':(_0x49b571,_0x308918)=>B[_0xeb6443(0x8ed)](_0x49b571,_0x308918)});return _0x28337d[_0xeb6443(0x7cb)](0xc9)['json'](_0x150a01);})['post'](this[_0x15dc7d(0x5f3)]('sendList'),..._0x112820,async(_0x57c69b,_0x750882)=>{const _0x3775be=_0x15dc7d;let _0x4aa517=await this[_0x3775be(0x2dc)]({'request':_0x57c69b,'schema':Va,'ClassRef':$t,'execute':(_0x16f335,_0x52ef25)=>B[_0x3775be(0x70c)](_0x16f335,_0x52ef25)});return _0x750882['status'](0xc9)['json'](_0x4aa517);})['post'](this[_0x15dc7d(0x5f3)](_0x15dc7d(0x33c)),..._0x112820,async(_0x3979ce,_0xf65fb9)=>{const _0x168c70=_0x15dc7d;let _0x153abd=await this['dataValidate']({'request':_0x3979ce,'schema':Ga,'ClassRef':Rt,'execute':(_0x57e10b,_0x5e2c57)=>B[_0x168c70(0x33c)](_0x57e10b,_0x5e2c57)});return _0xf65fb9[_0x168c70(0x7cb)](0xc9)[_0x168c70(0x6cb)](_0x153abd);})[_0x15dc7d(0x1a4)](this[_0x15dc7d(0x5f3)](_0x15dc7d(0x4cb)),..._0x112820,async(_0x2391d3,_0x309f03)=>{const _0x119ea8=_0x15dc7d;let _0x343461=await this[_0x119ea8(0x2dc)]({'request':_0x2391d3,'schema':Ba,'ClassRef':At,'execute':(_0x22ff7e,_0x3b7408)=>B[_0x119ea8(0x4cb)](_0x22ff7e,_0x3b7408)});return _0x309f03[_0x119ea8(0x7cb)](0xc9)[_0x119ea8(0x6cb)](_0x343461);})[_0x15dc7d(0x1a4)](this[_0x15dc7d(0x5f3)](_0x15dc7d(0x6ab)),..._0x112820,async(_0x1eeb3b,_0x59c8a3)=>{const _0x54e91a=_0x15dc7d;let _0x12266b=await this['dataValidate']({'request':_0x1eeb3b,'schema':ja,'ClassRef':Ct,'execute':(_0x193b07,_0x52e398)=>B[_0x54e91a(0x6ab)](_0x193b07,_0x52e398)});return _0x59c8a3['status'](0xc9)[_0x54e91a(0x6cb)](_0x12266b);})[_0x15dc7d(0x1a4)](this['routerPath'](_0x15dc7d(0x7d6)),..._0x112820,async(_0x558093,_0x1eb47d)=>{const _0x57510f=_0x15dc7d;let _0x466e3c=await this[_0x57510f(0x2dc)]({'request':_0x558093,'schema':La,'ClassRef':Mt,'execute':(_0x3fba6f,_0x587e57)=>B[_0x57510f(0x7d6)](_0x3fba6f,_0x587e57)});return _0x1eb47d[_0x57510f(0x7cb)](0xc9)['json'](_0x466e3c);})['post'](this['routerPath']('sendSticker'),..._0x112820,async(_0x3d0b9d,_0x5e9d76)=>{const _0x2d86bb=_0x15dc7d;let _0x298603=await this[_0x2d86bb(0x2dc)]({'request':_0x3d0b9d,'schema':ka,'ClassRef':Et,'execute':(_0x15e7f4,_0x3062d6)=>B['sendSticker'](_0x15e7f4,_0x3062d6)});return _0x5e9d76['status'](0xc9)[_0x2d86bb(0x6cb)](_0x298603);});}},fi=require(a0_0xf2a334(0x3d3)),It=class{},_t=class extends V{constructor(..._0x1764a6){const _0x3e5a47=a0_0xf2a334;super(),this[_0x3e5a47(0x222)]=(0x0,fi[_0x3e5a47(0x28b)])(),this[_0x3e5a47(0x222)][_0x3e5a47(0x1a4)](this['routerPath']('set'),..._0x1764a6,async(_0x28c852,_0x3910f2)=>{const _0x174766=_0x3e5a47;let _0x23b0ef=await this['dataValidate']({'request':_0x28c852,'schema':di,'ClassRef':It,'execute':(_0x1be96b,_0x403d8e)=>As[_0x174766(0x1d5)](_0x1be96b,_0x403d8e)});_0x3910f2[_0x174766(0x7cb)](0xc9)[_0x174766(0x6cb)](_0x23b0ef);})['get'](this[_0x3e5a47(0x5f3)](_0x3e5a47(0x556)),..._0x1764a6,async(_0x24f7d2,_0x152b16)=>{const _0xb7c62a=_0x3e5a47;let _0x1893d5=await this[_0xb7c62a(0x2dc)]({'request':_0x24f7d2,'schema':E,'ClassRef':M,'execute':_0x38cd54=>As[_0xb7c62a(0x4e7)](_0x38cd54)});_0x152b16['status'](0xc8)[_0xb7c62a(0x6cb)](_0x1893d5);});}},wi=require(a0_0xf2a334(0x3d3)),y=new $('FlowRouter'),Ot=class extends V{constructor(..._0xafc632){const _0x3dc557=a0_0xf2a334;super(),this[_0x3dc557(0x222)]=(0x0,wi[_0x3dc557(0x28b)])(),this[_0x3dc557(0x222)][_0x3dc557(0x1a4)](this[_0x3dc557(0x5f3)](_0x3dc557(0x638)),..._0xafc632,async(_0x42b9bf,_0x3b8402)=>{const _0x47fce5=_0x3dc557;let _0x22e4c8=_0x42b9bf[_0x47fce5(0x32e)];y[_0x47fce5(0x6a3)](_0x47fce5(0x238)),y[_0x47fce5(0x6a3)]('request\x20body:\x20'),y['verbose'](_0x42b9bf['body']);let _0x3482c6=await this[_0x47fce5(0x2dc)]({'request':_0x42b9bf,'schema':E,'ClassRef':M,'execute':_0x209f9a=>_[_0x47fce5(0x7c4)](_0x209f9a,_0x22e4c8)});_0x3b8402[_0x47fce5(0x7cb)](0xc8)[_0x47fce5(0x6cb)](_0x3482c6);})[_0x3dc557(0x4c6)](this['routerPath'](_0x3dc557(0x638)),..._0xafc632,async(_0x33484f,_0xfee6d2)=>{const _0x441ab5=_0x3dc557;let _0x17f9db=await this[_0x441ab5(0x2dc)]({'request':_0x33484f,'schema':E,'ClassRef':M,'execute':_0x35669f=>_[_0x441ab5(0x632)](_0x35669f)});_0xfee6d2[_0x441ab5(0x7cb)](0xc8)[_0x441ab5(0x6cb)](_0x17f9db);})['delete'](this['routerPath']('deleteDoneMessages'),..._0xafc632,async(_0x4f838d,_0x267742)=>{const _0x17392d=_0x3dc557;y[_0x17392d(0x6a3)](_0x17392d(0x2d2));let _0x4d9d36=await this[_0x17392d(0x2dc)]({'request':_0x4f838d,'schema':E,'ClassRef':M,'execute':_0x1688d7=>_[_0x17392d(0x6ad)](_0x1688d7)});_0x267742[_0x17392d(0x7cb)](0xc8)[_0x17392d(0x6cb)](_0x4d9d36);})['delete'](this[_0x3dc557(0x5f3)](_0x3dc557(0x246)),..._0xafc632,async(_0x5041b9,_0x32598c)=>{const _0x220a75=_0x3dc557;y[_0x220a75(0x6a3)](_0x220a75(0x4de));let _0x3bca08=await this['dataValidate']({'request':_0x5041b9,'schema':E,'ClassRef':M,'execute':_0x3313aa=>_[_0x220a75(0x246)](_0x3313aa)});_0x32598c['status'](0xc8)[_0x220a75(0x6cb)](_0x3bca08);})[_0x3dc557(0x1a4)](this['routerPath'](_0x3dc557(0x7e2)),..._0xafc632,async(_0x557e5e,_0x6e2a6a)=>{const _0x2cb1a4=_0x3dc557;let _0x3134a1=_0x557e5e[_0x2cb1a4(0x32e)];y[_0x2cb1a4(0x6a3)](_0x2cb1a4(0x1e0)),y[_0x2cb1a4(0x6a3)](_0x2cb1a4(0x3d8)),y['verbose'](_0x557e5e[_0x2cb1a4(0x32e)]);let _0x2381f1=await this[_0x2cb1a4(0x2dc)]({'request':_0x557e5e,'schema':E,'ClassRef':M,'execute':_0x12931a=>_['startFlow'](_0x12931a,_0x3134a1)});_0x6e2a6a['status'](0xc8)[_0x2cb1a4(0x6cb)](_0x2381f1);})[_0x3dc557(0x4c6)](this[_0x3dc557(0x5f3)](_0x3dc557(0x3f2)),..._0xafc632,async(_0x227fc1,_0x1ee9ca)=>{const _0x3a565f=_0x3dc557;y[_0x3a565f(0x6a3)](_0x3a565f(0x192));let _0x28f82f=await this[_0x3a565f(0x2dc)]({'request':_0x227fc1,'schema':E,'ClassRef':M,'execute':_0x416d31=>_[_0x3a565f(0x3f2)](_0x416d31)});_0x1ee9ca[_0x3a565f(0x7cb)](0xc8)['json'](_0x28f82f);})[_0x3dc557(0x4c6)](this['routerPath'](_0x3dc557(0x64e)),..._0xafc632,async(_0x6b490d,_0x5597b6)=>{const _0x4e99cd=_0x3dc557;y['verbose'](_0x4e99cd(0x7b6));let _0x8c62f9=await this['dataValidate']({'request':_0x6b490d,'schema':E,'ClassRef':M,'execute':_0x45fbbf=>_[_0x4e99cd(0x3f2)](_0x45fbbf)});_0x5597b6['status'](0xc8)['json'](_0x8c62f9);})[_0x3dc557(0x1a4)](this['routerPath']('updateAgent'),..._0xafc632,async(_0x208caa,_0x52462f)=>{const _0x403b49=_0x3dc557;let _0x1b89ec=_0x208caa[_0x403b49(0x32e)];y[_0x403b49(0x6a3)](_0x403b49(0x3ee)),y[_0x403b49(0x6a3)](_0x403b49(0x3d8)),y[_0x403b49(0x6a3)](_0x208caa[_0x403b49(0x32e)]);let _0x557f34=await this[_0x403b49(0x2dc)]({'request':_0x208caa,'schema':E,'ClassRef':M,'execute':_0x3ceaf1=>_[_0x403b49(0x2ce)](_0x3ceaf1,_0x1b89ec)});_0x52462f['status'](0xc8)['json'](_0x557f34);})['post'](this[_0x3dc557(0x5f3)](_0x3dc557(0x360)),..._0xafc632,async(_0x4211fc,_0x7b9d05)=>{const _0x3f030b=_0x3dc557;let _0x2142b6=_0x4211fc[_0x3f030b(0x32e)];y[_0x3f030b(0x6a3)]('request\x20received\x20in\x20updateCustomFields'),y[_0x3f030b(0x6a3)](_0x3f030b(0x3d8)),y[_0x3f030b(0x6a3)](_0x4211fc['body']);let _0xdd1269=await this['dataValidate']({'request':_0x4211fc,'schema':E,'ClassRef':M,'execute':_0x449f2c=>_['updateCustomFields'](_0x449f2c,_0x2142b6)});_0x7b9d05[_0x3f030b(0x7cb)](0xc8)['json'](_0xdd1269);})[_0x3dc557(0x1a4)](this[_0x3dc557(0x5f3)](_0x3dc557(0x6ee)),..._0xafc632,async(_0x23e773,_0x410c9d)=>{const _0x2c0d0=_0x3dc557;let _0x2b14b6=_0x23e773[_0x2c0d0(0x32e)];y[_0x2c0d0(0x6a3)](_0x2c0d0(0x575)),y[_0x2c0d0(0x6a3)](_0x2c0d0(0x3d8)),y[_0x2c0d0(0x6a3)](_0x23e773[_0x2c0d0(0x32e)]);let _0x218996=await this[_0x2c0d0(0x2dc)]({'request':_0x23e773,'schema':E,'ClassRef':M,'execute':_0x426cb8=>_[_0x2c0d0(0x6ee)](_0x426cb8,_0x2b14b6)});_0x410c9d['status'](0xc8)[_0x2c0d0(0x6cb)](_0x218996);})['post'](this[_0x3dc557(0x5f3)](_0x3dc557(0x41b)),..._0xafc632,async(_0x8b3e80,_0x48f51d)=>{const _0x3b6b75=_0x3dc557;let _0x1a49ea=_0x8b3e80[_0x3b6b75(0x32e)];y[_0x3b6b75(0x6a3)](_0x3b6b75(0x3c7)),y[_0x3b6b75(0x6a3)](_0x3b6b75(0x3d8)),y[_0x3b6b75(0x6a3)](_0x8b3e80[_0x3b6b75(0x32e)]);let _0x777801=await this['dataValidate']({'request':_0x8b3e80,'schema':E,'ClassRef':M,'execute':_0x1af412=>_['updateFlowConfig'](_0x1af412,_0x1a49ea)});_0x48f51d['status'](0xc8)[_0x3b6b75(0x6cb)](_0x777801);})[_0x3dc557(0x1a4)](this[_0x3dc557(0x5f3)](_0x3dc557(0x72f)),..._0xafc632,async(_0x2ebbdb,_0x34a10c)=>{const _0x310260=_0x3dc557;let _0x1cf826=_0x2ebbdb[_0x310260(0x32e)];y['verbose']('request\x20received\x20in\x20getConversation'),y[_0x310260(0x6a3)](_0x310260(0x3d8)),y[_0x310260(0x6a3)](_0x2ebbdb['body']);let _0x8d626=await this[_0x310260(0x2dc)]({'request':_0x2ebbdb,'schema':E,'ClassRef':M,'execute':_0x419c19=>_[_0x310260(0x72f)](_0x419c19,_0x1cf826)});_0x34a10c[_0x310260(0x7cb)](0xc8)[_0x310260(0x6cb)](_0x8d626);})[_0x3dc557(0x1a4)](this[_0x3dc557(0x5f3)]('fetchConversation'),..._0xafc632,async(_0x277491,_0x2e5b92)=>{const _0x8f2a18=_0x3dc557;let _0x29fea5=_0x277491[_0x8f2a18(0x32e)];y['verbose'](_0x8f2a18(0x7de)),y['verbose']('request\x20body:\x20'),y[_0x8f2a18(0x6a3)](_0x277491[_0x8f2a18(0x32e)]);let _0x4c23b6=await this[_0x8f2a18(0x2dc)]({'request':_0x277491,'schema':E,'ClassRef':M,'execute':_0x1b201d=>_['fetchConversation'](_0x1b201d,_0x29fea5)});_0x2e5b92['status'](0xc8)[_0x8f2a18(0x6cb)](_0x4c23b6);})[_0x3dc557(0x1a4)](this['routerPath'](_0x3dc557(0x7e3)),..._0xafc632,async(_0x3bd9c2,_0xd39c64)=>{const _0xc6b528=_0x3dc557;let _0x565648=_0x3bd9c2[_0xc6b528(0x32e)];y[_0xc6b528(0x6a3)]('request\x20received\x20in\x20editConversation'),y[_0xc6b528(0x6a3)](_0xc6b528(0x3d8)),y['verbose'](_0x3bd9c2['body']);let _0x37c2dd=await this[_0xc6b528(0x2dc)]({'request':_0x3bd9c2,'schema':E,'ClassRef':M,'execute':_0x116a61=>_[_0xc6b528(0x7e3)](_0x116a61,_0x565648)});_0xd39c64[_0xc6b528(0x7cb)](0xc8)[_0xc6b528(0x6cb)](_0x37c2dd);})['delete'](this[_0x3dc557(0x5f3)](_0x3dc557(0x673)),..._0xafc632,async(_0x3fa5a2,_0x3fca61)=>{const _0x4379a9=_0x3dc557;let _0x1985d2=_0x3fa5a2[_0x4379a9(0x32e)];y['verbose'](_0x4379a9(0x370)),y[_0x4379a9(0x6a3)](_0x4379a9(0x3d8)),y[_0x4379a9(0x6a3)](_0x3fa5a2[_0x4379a9(0x32e)]);let _0x5a4fbf=await this[_0x4379a9(0x2dc)]({'request':_0x3fa5a2,'schema':E,'ClassRef':M,'execute':_0x297b41=>_[_0x4379a9(0x673)](_0x297b41,_0x1985d2)});_0x3fca61[_0x4379a9(0x7cb)](0xc8)[_0x4379a9(0x6cb)](_0x5a4fbf);})[_0x3dc557(0x1a4)](this[_0x3dc557(0x5f3)](_0x3dc557(0x6c5)),..._0xafc632,async(_0x50b5bc,_0x9c967a)=>{const _0x1894d0=_0x3dc557;let _0x1bc13b=_0x50b5bc[_0x1894d0(0x32e)],_0x1f795c=_0x50b5bc[_0x1894d0(0x327)][_0x1894d0(0x1b8)];y[_0x1894d0(0x6a3)](_0x1894d0(0x71b)),y[_0x1894d0(0x6a3)]('request\x20body:\x20'),y[_0x1894d0(0x6a3)](_0x50b5bc['body']);let _0xdac771=await this['dataValidate']({'request':_0x50b5bc,'schema':E,'ClassRef':M,'execute':_0x4511b1=>_['createFlow'](_0x4511b1,_0x1bc13b,_0x1f795c)});_0x9c967a[_0x1894d0(0x7cb)](0xc8)['json'](_0xdac771);})[_0x3dc557(0x1a4)](this[_0x3dc557(0x5f3)](_0x3dc557(0x822)),..._0xafc632,async(_0x459628,_0x181e6e)=>{const _0x37c8f4=_0x3dc557;let _0x5dfa67=_0x459628['body'],_0x20033=_0x459628[_0x37c8f4(0x327)]['apikey'];y[_0x37c8f4(0x6a3)](_0x37c8f4(0x44b)),y['verbose'](_0x37c8f4(0x3d8)),y['verbose'](_0x459628[_0x37c8f4(0x32e)]),delete _0x5dfa67[_0x37c8f4(0x34e)],delete _0x5dfa67['variables'],delete _0x5dfa67['groups'],delete _0x5dfa67[_0x37c8f4(0x914)];let _0x86432d=await this[_0x37c8f4(0x2dc)]({'request':_0x459628,'schema':E,'ClassRef':M,'execute':_0xa9055d=>_[_0x37c8f4(0x8d6)](_0xa9055d,_0x5dfa67,_0x20033)});_0x181e6e['status'](0xc8)[_0x37c8f4(0x6cb)](_0x86432d);})[_0x3dc557(0x1a4)](this[_0x3dc557(0x5f3)](_0x3dc557(0x3ea)),..._0xafc632,async(_0x228975,_0x3d6647)=>{const _0xcaffbc=_0x3dc557;let _0x423299=_0x228975[_0xcaffbc(0x32e)];y[_0xcaffbc(0x6a3)](_0xcaffbc(0x44b)),y[_0xcaffbc(0x6a3)](_0xcaffbc(0x3d8)),y[_0xcaffbc(0x6a3)](_0x228975[_0xcaffbc(0x32e)]);let _0x282d00=await this[_0xcaffbc(0x2dc)]({'request':_0x228975,'schema':E,'ClassRef':M,'execute':_0x3cfabf=>_[_0xcaffbc(0x8e8)](_0x3cfabf,_0x423299)});_0x3d6647['status'](0xc8)[_0xcaffbc(0x6cb)](_0x282d00);})['post'](this[_0x3dc557(0x5f3)]('editflowreply'),..._0xafc632,async(_0xa2c1a9,_0x4b8e81)=>{const _0x1ca371=_0x3dc557;let _0x5e6b6f=_0xa2c1a9[_0x1ca371(0x32e)];y['verbose'](_0x1ca371(0x44b)),y[_0x1ca371(0x6a3)](_0x1ca371(0x3d8)),y[_0x1ca371(0x6a3)](_0xa2c1a9[_0x1ca371(0x32e)]);let _0x220da2=await this[_0x1ca371(0x2dc)]({'request':_0xa2c1a9,'schema':E,'ClassRef':M,'execute':_0xe0d978=>_['editFlowReply'](_0xe0d978,_0x5e6b6f)});_0x4b8e81['status'](0xc8)[_0x1ca371(0x6cb)](_0x220da2);})['post'](this[_0x3dc557(0x5f3)]('editflowvaredit'),..._0xafc632,async(_0x2f1af6,_0x18044d)=>{const _0x2cd253=_0x3dc557;let _0x23a692=_0x2f1af6[_0x2cd253(0x32e)];y[_0x2cd253(0x6a3)](_0x2cd253(0x44b)),y[_0x2cd253(0x6a3)](_0x2cd253(0x3d8)),y[_0x2cd253(0x6a3)](_0x2f1af6[_0x2cd253(0x32e)]);let _0x54d535=await this[_0x2cd253(0x2dc)]({'request':_0x2f1af6,'schema':E,'ClassRef':M,'execute':_0x11524d=>_[_0x2cd253(0x730)](_0x11524d,_0x23a692)});_0x18044d[_0x2cd253(0x7cb)](0xc8)[_0x2cd253(0x6cb)](_0x54d535);})[_0x3dc557(0x1a4)](this[_0x3dc557(0x5f3)](_0x3dc557(0x567)),..._0xafc632,async(_0x936d28,_0x1a16c0)=>{const _0x3af49b=_0x3dc557;let _0x3b1622=_0x936d28[_0x3af49b(0x32e)];y['verbose'](_0x3af49b(0x2fe)),y[_0x3af49b(0x6a3)]('request\x20body:\x20'),y[_0x3af49b(0x6a3)](_0x936d28[_0x3af49b(0x32e)]);let _0x278fa4=await this[_0x3af49b(0x2dc)]({'request':_0x936d28,'schema':E,'ClassRef':M,'execute':_0x27ada5=>_['editFlowGroup'](_0x27ada5,_0x3b1622)});_0x1a16c0[_0x3af49b(0x7cb)](0xc8)[_0x3af49b(0x6cb)](_0x278fa4);})[_0x3dc557(0x1a4)](this[_0x3dc557(0x5f3)](_0x3dc557(0x482)),..._0xafc632,async(_0xeb5b1d,_0x5af8ab)=>{const _0x2dcd27=_0x3dc557;let _0x5192f4=_0xeb5b1d[_0x2dcd27(0x32e)];y[_0x2dcd27(0x6a3)](_0x2dcd27(0x6e2)),y[_0x2dcd27(0x6a3)](_0x2dcd27(0x3d8)),y[_0x2dcd27(0x6a3)](_0xeb5b1d[_0x2dcd27(0x32e)]);let _0x3b9c12=await this[_0x2dcd27(0x2dc)]({'request':_0xeb5b1d,'schema':E,'ClassRef':M,'execute':_0x4d974b=>_[_0x2dcd27(0x251)](_0x4d974b,_0x5192f4)});_0x5af8ab[_0x2dcd27(0x7cb)](0xc8)[_0x2dcd27(0x6cb)](_0x3b9c12);})[_0x3dc557(0x1a4)](this[_0x3dc557(0x5f3)]('editflowvariable'),..._0xafc632,async(_0x2fae34,_0x505a9f)=>{const _0x26f277=_0x3dc557;let _0x316ada=_0x2fae34[_0x26f277(0x32e)];y['verbose'](_0x26f277(0x38e)),y[_0x26f277(0x6a3)](_0x26f277(0x3d8)),y['verbose'](_0x2fae34['body']);let _0x5580cb=await this[_0x26f277(0x2dc)]({'request':_0x2fae34,'schema':E,'ClassRef':M,'execute':_0x1313f5=>_[_0x26f277(0x2e8)](_0x1313f5,_0x316ada)});_0x505a9f['status'](0xc8)[_0x26f277(0x6cb)](_0x5580cb);})[_0x3dc557(0x1a4)](this['routerPath'](_0x3dc557(0x219)),..._0xafc632,async(_0x25087c,_0x52f602)=>{const _0x53368b=_0x3dc557;let _0x34f534=_0x25087c[_0x53368b(0x32e)];y[_0x53368b(0x6a3)](_0x53368b(0x5b9)),y[_0x53368b(0x6a3)](_0x53368b(0x3d8)),y['verbose'](_0x25087c['body']);let _0x5454fb=await this[_0x53368b(0x2dc)]({'request':_0x25087c,'schema':E,'ClassRef':M,'execute':_0x1790c2=>_['getFlow'](_0x1790c2,_0x34f534)});_0x52f602[_0x53368b(0x7cb)](0xc8)[_0x53368b(0x6cb)](_0x5454fb);})[_0x3dc557(0x44e)](this[_0x3dc557(0x5f3)](_0x3dc557(0x51d)),..._0xafc632,async(_0x53f75c,_0x557a2c)=>{const _0x400141=_0x3dc557;let _0x19ee04=_0x53f75c[_0x400141(0x32e)];y[_0x400141(0x6a3)](_0x400141(0x64c)),y[_0x400141(0x6a3)]('request\x20body:\x20'),y[_0x400141(0x6a3)](_0x53f75c[_0x400141(0x32e)]);let _0x3fb8cb=await this[_0x400141(0x2dc)]({'request':_0x53f75c,'schema':E,'ClassRef':M,'execute':_0x5d02ea=>_[_0x400141(0x777)](_0x5d02ea,_0x19ee04)});_0x557a2c['status'](0xc8)[_0x400141(0x6cb)](_0x3fb8cb);})[_0x3dc557(0x4c6)](this['routerPath']('allflows'),..._0xafc632,async(_0x43284d,_0x17e815)=>{const _0x31b6e4=_0x3dc557;y[_0x31b6e4(0x6a3)](_0x31b6e4(0x76a));let _0x20f8f4=await this[_0x31b6e4(0x2dc)]({'request':_0x43284d,'schema':E,'ClassRef':M,'execute':_0x2b5055=>_[_0x31b6e4(0x473)](_0x2b5055)});_0x17e815[_0x31b6e4(0x7cb)](0xc8)[_0x31b6e4(0x6cb)](_0x20f8f4);});}},Mi=I(require('path')),te={};function yi(_0x1544df,_0x2720e9,_0x11656e,_0x59925f){te[_0x1544df]||(te[_0x1544df]={}),te[_0x1544df][_0x2720e9]={'id':_0x2720e9,'response':_0x11656e,'events':_0x59925f};}function bi(_0x43e1a4,_0x8a387a){!te[_0x43e1a4]||!te[_0x43e1a4][_0x8a387a]||delete te[_0x43e1a4][_0x8a387a];}function F(_0x121707,_0xce8630,_0x18eaa5){const _0x2ac3f2=a0_0xf2a334;if(!te[_0x121707])return;let _0x13d80a=_0x2ac3f2(0x45f)+JSON[_0x2ac3f2(0x34b)](_0x18eaa5)+'\x0a\x0a';Object[_0x2ac3f2(0x5cf)](te[_0x121707])['forEach'](_0x60dfcd=>{const _0x37da81=_0x2ac3f2;_0x60dfcd[_0x37da81(0x3ba)]['includes'](_0xce8630)&&_0x60dfcd[_0x37da81(0x234)]['write'](_0x13d80a);});}function Si(){const _0x2521be=a0_0xf2a334;let _0x4aa52b={};for(let _0x211f0f in te)_0x4aa52b[_0x211f0f]=Object[_0x2521be(0x5cf)](te[_0x211f0f])[_0x2521be(0x5b0)](_0x20d437=>({'id':_0x20d437['id'],'events':_0x20d437['events']}));return _0x4aa52b;}var Ci=require('uuid'),Is=require(a0_0xf2a334(0x277)),Ts=class{},Io=new Is[(a0_0xf2a334(0x4e2))]({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),_o=new Is[(a0_0xf2a334(0x4e2))]({'_id':{'type':String,'default':a0_0xf2a334(0x4d9)},'WebhookGlobal':{'type':Io},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),ve=T?.['model'](Ts[a0_0xf2a334(0x76f)],_o,a0_0xf2a334(0x829)),Oo=Mi[a0_0xf2a334(0x59e)][a0_0xf2a334(0x666)](__dirname,a0_0xf2a334(0x21b)),ke=(0x0,xt[a0_0xf2a334(0x28b)])(),xo=S['get'](a0_0xf2a334(0x67c))['TYPE'],ie=[Aa,Ta,Oa[xo]];ke['use'](a0_0xf2a334(0x3e7),xt[a0_0xf2a334(0x59e)][a0_0xf2a334(0x24c)](Oo))[a0_0xf2a334(0x4c6)]('/events/:instance',async(_0x42e600,_0x1d4f07)=>{const _0x4dd8c3=a0_0xf2a334;console['log'](_0x4dd8c3(0x6c4));let _0x2540aa=_0x42e600['params'][_0x4dd8c3(0x584)],_0x121c19=(_0x42e600['query'][_0x4dd8c3(0x3ba)]||'')[_0x4dd8c3(0x8a0)](','),_0x532b39=(0x0,Ci['v4'])();console[_0x4dd8c3(0x6b2)](_0x4dd8c3(0x6c2),_0x2540aa),console['log'](_0x4dd8c3(0x35b),_0x121c19);let _0x426571=S[_0x4dd8c3(0x4c6)](_0x4dd8c3(0x67c))[_0x4dd8c3(0x380)],_0x553e56=_0x42e600['query'][_0x4dd8c3(0x1b8)];if(console['log']('API\x20Key\x20from\x20Request:',_0x553e56),_0x426571[_0x4dd8c3(0x1c3)]!==_0x553e56){console['log'](_0x4dd8c3(0x458));try{let _0x3e6650=await me[_0x4dd8c3(0x1a5)][_0x4dd8c3(0x556)](_0x2540aa);if(console[_0x4dd8c3(0x6b2)](_0x4dd8c3(0x27f),_0x3e6650),!_0x3e6650||_0x3e6650[_0x4dd8c3(0x1b8)]!==_0x553e56)return console[_0x4dd8c3(0x6b2)](_0x4dd8c3(0x3da)),_0x1d4f07[_0x4dd8c3(0x7cb)](0x191)[_0x4dd8c3(0x214)](_0x4dd8c3(0x6ce));}catch(_0x35220c){return console['error']('Error\x20retrieving\x20instance\x20or\x20API\x20Key:',_0x35220c),_0x1d4f07[_0x4dd8c3(0x7cb)](0x191)[_0x4dd8c3(0x214)](_0x4dd8c3(0x8d5));}}if(!await _e(_0x2540aa))return _0x1d4f07[_0x4dd8c3(0x7cb)](0x194)['send'](_0x4dd8c3(0x908));_0x1d4f07['setHeader'](_0x4dd8c3(0x1e9),_0x4dd8c3(0x573)),_0x1d4f07[_0x4dd8c3(0x8e2)](_0x4dd8c3(0x5d9),'no-cache'),_0x1d4f07[_0x4dd8c3(0x8e2)]('Connection',_0x4dd8c3(0x429)),_0x1d4f07[_0x4dd8c3(0x893)]();let _0x5b4410=_0x4dd8c3(0x45f)+JSON[_0x4dd8c3(0x34b)]({'info':_0x4dd8c3(0x499)})+'\x0a\x0a';_0x1d4f07[_0x4dd8c3(0x241)](_0x5b4410),yi(_0x2540aa,_0x532b39,_0x1d4f07,_0x121c19),_0x42e600['on']('close',()=>{const _0xd46db8=_0x4dd8c3;console['log'](_0xd46db8(0x7f1)+_0x2540aa),bi(_0x2540aa,_0x532b39);});}),ke[a0_0xf2a334(0x1a4)](a0_0xf2a334(0x651),async(_0x1e582e,_0x2080ee)=>{const _0xd4ba38=a0_0xf2a334;console['log']('iniciando\x20fluxo\x20router');let _0x43ca30=_0x1e582e[_0xd4ba38(0x5a3)]['instance'],_0x83ce53=_0x1e582e['params'][_0xd4ba38(0x30e)],_0x10ea43=_0x1e582e[_0xd4ba38(0x165)]['remoteJid']||'',_0x580750=_0x1e582e[_0xd4ba38(0x32e)];console[_0xd4ba38(0x6b2)]('Instance\x20Name:',_0x43ca30),console[_0xd4ba38(0x6b2)](_0xd4ba38(0x3f7),_0x83ce53),console[_0xd4ba38(0x6b2)](_0xd4ba38(0x1d9),_0x10ea43),console[_0xd4ba38(0x6b2)](_0xd4ba38(0x796),_0x580750);try{if(!await _e(_0x43ca30))return _0x2080ee['status'](0x194)['send'](_0xd4ba38(0x908));let _0xa46b40=await _['startFlowWebhook'](_0x43ca30,_0x83ce53,_0x10ea43,_0x580750);_0x2080ee[_0xd4ba38(0x214)](_0xa46b40);}catch(_0x37b55d){console[_0xd4ba38(0x830)](_0x37b55d),_0x2080ee[_0xd4ba38(0x7cb)](0x1f4)[_0xd4ba38(0x214)]('Erro\x20ao\x20iniciar\x20o\x20fluxo.');}}),ke[a0_0xf2a334(0x4c6)](a0_0xf2a334(0x389),(_0x1ff2f1,_0x5a64a1)=>{const _0x188f5d=a0_0xf2a334;let _0x535de1=Si();_0x5a64a1[_0x188f5d(0x6cb)](_0x535de1);})[a0_0xf2a334(0x4c6)]('/',(_0x3ccd30,_0xf3e345)=>{const _0x366f1f=a0_0xf2a334;let _0x2a6f62=S[_0x366f1f(0x4c6)](_0x366f1f(0x902))['URL'];if(_0x2a6f62){let _0x134d3e=encodeURIComponent(''+_0x2a6f62);_0xf3e345[_0x366f1f(0x6a8)]('https://uazapi-plugin.bubbleapps.io/?url='+_0x134d3e);return;}let _0x480a0f=S[_0x366f1f(0x4c6)](_0x366f1f(0x41c)),_0x5b7f68=_0x480a0f&&_0x480a0f['FULLCHAIN'][_0x366f1f(0x8a0)]('/')[0x4];if(_0x5b7f68){let _0x3218a1=encodeURIComponent('https://'+_0x5b7f68);_0xf3e345['redirect'](_0x366f1f(0x851)+_0x3218a1);}else _0xf3e345[_0x366f1f(0x6a8)]('https://uazapi-plugin.bubbleapps.io/');})['put'](a0_0xf2a334(0x477),...ie,async(_0x1c1706,_0x1f4a48)=>{const _0x50f326=a0_0xf2a334;try{console[_0x50f326(0x6b2)](_0x50f326(0x1ea)),_0x1f4a48[_0x50f326(0x7cb)](0xc8)[_0x50f326(0x6cb)]({'message':_0x50f326(0x5c7)}),_0x1f4a48['on'](_0x50f326(0x5fb),()=>process[_0x50f326(0x423)](0x0));}catch(_0x1a7f44){console[_0x50f326(0x830)](_0x50f326(0x523),_0x1a7f44),_0x1f4a48[_0x50f326(0x7cb)](0x1f4)['json']({'message':_0x50f326(0x655)});}})[a0_0xf2a334(0x7ee)]('/config',...ie,async(_0x4fd750,_0x2a0d36)=>{const _0x393ff0=a0_0xf2a334;try{let _0x363ed8=_0x4fd750['body'];await ve[_0x393ff0(0x32f)]({},{'$set':_0x363ed8},{'upsert':!0x0});let _0x5cca12=await ve[_0x393ff0(0x18a)]();_0x2a0d36['json'](_0x5cca12);}catch(_0x920a63){_0x2a0d36[_0x393ff0(0x7cb)](0x190)['send'](_0x920a63[_0x393ff0(0x80a)]);}})[a0_0xf2a334(0x4c6)]('/config',...ie,async(_0x17241d,_0x4164e9)=>{const _0xfbee73=a0_0xf2a334;try{let _0xbc4845=await ve[_0xfbee73(0x18a)]();if(!_0xbc4845)return _0x4164e9[_0xfbee73(0x6cb)]({});_0x4164e9[_0xfbee73(0x6cb)](_0xbc4845);}catch(_0x6a0c8d){_0x4164e9['status'](0x1f4)[_0xfbee73(0x214)](_0x6a0c8d[_0xfbee73(0x80a)]);}})['use'](a0_0xf2a334(0x42a),new bt(S,...ie)[a0_0xf2a334(0x222)])[a0_0xf2a334(0x8c0)](a0_0xf2a334(0x2c7),new Tt(...ie)[a0_0xf2a334(0x222)])['use'](a0_0xf2a334(0x57f),new lt(...ie)[a0_0xf2a334(0x222)])['use']('/group',new yt(...ie)[a0_0xf2a334(0x222)])[a0_0xf2a334(0x8c0)](a0_0xf2a334(0x8e5),new _t(...ie)[a0_0xf2a334(0x222)])['use'](a0_0xf2a334(0x279),new Ot(...ie)[a0_0xf2a334(0x222)]);var m=class{constructor(..._0x432ea1){const _0x4468e8=a0_0xf2a334;throw{'status':0x190,'error':'Bad\x20Request','message':_0x432ea1[_0x4468e8(0x250)]>0x0?_0x432ea1:void 0x0};}},se=class{constructor(..._0x45ae35){const _0x451502=a0_0xf2a334;throw{'status':0x191,'error':_0x451502(0x86f),'message':_0x45ae35['length']>0x0?_0x45ae35:void 0x0};}},X=class{constructor(..._0x44cffa){const _0x4a3024=a0_0xf2a334;throw{'status':0x193,'error':_0x4a3024(0x570),'message':_0x44cffa['length']>0x0?_0x44cffa:void 0x0};}},U=class{constructor(..._0x8f7886){const _0x1c8bcd=a0_0xf2a334;throw{'status':0x194,'error':_0x1c8bcd(0x3d9),'message':_0x8f7886['length']>0x0?_0x8f7886:void 0x0};}},x=class{constructor(..._0xc54ad6){const _0x4ab174=a0_0xf2a334;throw{'status':0x1f4,'error':_0x4ab174(0x229),'message':_0xc54ad6[_0x4ab174(0x250)]>0x0?_0xc54ad6:void 0x0};}},fe=require('@whiskeysockets/baileys');async function _s(_0x61a51b){const _0x1b92e5=a0_0xf2a334;let _0x2d8cf6=new $(_s[_0x1b92e5(0x76f)]),_0x38fc08=T[_0x1b92e5(0x75d)](),_0x36cf2c=_0x38fc08['db'](S[_0x1b92e5(0x4c6)](_0x1b92e5(0x183))[_0x1b92e5(0x174)][_0x1b92e5(0x52a)]+'-instances')[_0x1b92e5(0x418)](_0x61a51b),_0x476f3f=async(_0x549f40,_0xfe24d9)=>{const _0x2f6a65=_0x1b92e5;try{return await _0x38fc08[_0x2f6a65(0x3e0)](),await _0x36cf2c[_0x2f6a65(0x2a2)]({'_id':_0xfe24d9},JSON[_0x2f6a65(0x302)](JSON[_0x2f6a65(0x34b)](_0x549f40,fe[_0x2f6a65(0x448)][_0x2f6a65(0x853)])),{'upsert':!0x0});}catch{}},_0x42ef45=async _0x1d1582=>{const _0x187f95=_0x1b92e5;try{await _0x38fc08[_0x187f95(0x3e0)]();let _0x40b434=await _0x36cf2c[_0x187f95(0x18a)]({'_id':_0x1d1582}),_0x1e2930=JSON[_0x187f95(0x34b)](_0x40b434);return JSON[_0x187f95(0x302)](_0x1e2930,fe[_0x187f95(0x448)][_0x187f95(0x4c9)]);}catch{}},_0x998ecd=async _0x530e48=>{const _0xbe6195=_0x1b92e5;try{return await _0x38fc08[_0xbe6195(0x3e0)](),await _0x36cf2c[_0xbe6195(0x221)]({'_id':_0x530e48});}catch{}},_0x52ff7e=await _0x42ef45(_0x1b92e5(0x345))||(0x0,fe[_0x1b92e5(0x22c)])();return{'state':{'creds':_0x52ff7e,'keys':{'get':async(_0x5439b5,_0x44fc75)=>{const _0x11cf8f=_0x1b92e5;let _0x7d7eba={};return await Promise[_0x11cf8f(0x3f9)](_0x44fc75[_0x11cf8f(0x5b0)](async _0x5a5189=>{const _0x5143f4=_0x11cf8f;let _0x56cf23=await _0x42ef45(_0x5439b5+'-'+_0x5a5189);_0x5439b5===_0x5143f4(0x786)&&_0x56cf23&&(_0x56cf23=fe[_0x5143f4(0x7c1)]['Message'][_0x5143f4(0x4d1)][_0x5143f4(0x30b)](_0x56cf23)),_0x7d7eba[_0x5a5189]=_0x56cf23;})),_0x7d7eba;},'set':async _0x5ae5ae=>{const _0x5a22c6=_0x1b92e5;let _0x3666ab=[];for(let _0x1a8241 in _0x5ae5ae)for(let _0x45bd33 in _0x5ae5ae[_0x1a8241]){let _0x2a0e88=_0x5ae5ae[_0x1a8241][_0x45bd33],_0xb2e096=_0x1a8241+'-'+_0x45bd33;_0x3666ab[_0x5a22c6(0x355)](_0x2a0e88?_0x476f3f(_0x2a0e88,_0xb2e096):_0x998ecd(_0xb2e096));}await Promise[_0x5a22c6(0x3f9)](_0x3666ab);}}},'saveCreds':async()=>_0x476f3f(_0x52ff7e,_0x1b92e5(0x345))};}var Ls=I(require(a0_0xf2a334(0x590))),Fs=I(require(a0_0xf2a334(0x5b5))),kt=require(a0_0xf2a334(0x178)),vi=require(a0_0xf2a334(0x885)),Dt=require(a0_0xf2a334(0x178)),Pt;function Po(_0x2d1bb9){const _0x70f4b4=a0_0xf2a334;return Pt||(Pt=(0x0,vi['createClient'])({'url':_0x2d1bb9[_0x70f4b4(0x252)]}),Pt[_0x70f4b4(0x3e0)]()),Pt;}var ue=class u{constructor(_0x32a8c7,_0x403cb0){const _0x471444=a0_0xf2a334;this[_0x471444(0x3f3)]=_0x32a8c7,this['instanceName']=_0x403cb0,this['logger']=new $(u['name']),this[_0x471444(0x90d)]=Po(_0x32a8c7);}set[a0_0xf2a334(0x3c4)](_0xa6ae2a){const _0x23c0fc=a0_0xf2a334;this[_0x23c0fc(0x29c)]=_0xa6ae2a;}async[a0_0xf2a334(0x220)](){const _0x1e9761=a0_0xf2a334;try{return await this[_0x1e9761(0x90d)][_0x1e9761(0x26a)]([_0x1e9761(0x3e5),this['redisEnv']['PREFIX_KEY']+':*']);}catch(_0xd895ec){this[_0x1e9761(0x5e7)][_0x1e9761(0x830)](_0xd895ec);}}async['writeData'](_0x1588b8,_0x3bda39){const _0x181574=a0_0xf2a334;try{let _0x203fc6=JSON[_0x181574(0x34b)](_0x3bda39,Dt['BufferJSON'][_0x181574(0x853)]);return await this[_0x181574(0x90d)][_0x181574(0x15c)](this[_0x181574(0x3f3)][_0x181574(0x31a)]+':'+this[_0x181574(0x29c)],_0x1588b8,_0x203fc6);}catch(_0x3d48e8){this[_0x181574(0x5e7)][_0x181574(0x830)](_0x3d48e8);}}async[a0_0xf2a334(0x791)](){const _0x48c7de=a0_0xf2a334;try{let _0x21b8cf=await this[_0x48c7de(0x90d)][_0x48c7de(0x694)](this['redisEnv'][_0x48c7de(0x31a)]+':'+this[_0x48c7de(0x29c)]);if(_0x21b8cf){for(let _0x5be118 in _0x21b8cf)Object[_0x48c7de(0x86b)]['hasOwnProperty'][_0x48c7de(0x684)](_0x21b8cf,_0x5be118)&&(_0x21b8cf[_0x5be118]=JSON['parse'](_0x21b8cf[_0x5be118],Dt['BufferJSON'][_0x48c7de(0x4c9)]));return _0x21b8cf;}}catch(_0x911150){this[_0x48c7de(0x5e7)]['error'](_0x911150);}}async[a0_0xf2a334(0x8ec)](_0x463b2e){const _0x50ad2b=a0_0xf2a334;try{let _0x4b7b91=await this[_0x50ad2b(0x90d)][_0x50ad2b(0x59a)](this['redisEnv'][_0x50ad2b(0x31a)]+':'+this[_0x50ad2b(0x29c)],_0x463b2e);if(_0x4b7b91)return JSON[_0x50ad2b(0x302)](_0x4b7b91,Dt['BufferJSON'][_0x50ad2b(0x4c9)]);}catch(_0x168cb9){this[_0x50ad2b(0x5e7)][_0x50ad2b(0x830)](_0x168cb9);}}async[a0_0xf2a334(0x866)](_0x2282f3){const _0x8f257d=a0_0xf2a334;try{return await this['client'][_0x8f257d(0x4a2)](this[_0x8f257d(0x3f3)][_0x8f257d(0x31a)]+':'+this['instanceName'],_0x2282f3);}catch(_0x313574){this[_0x8f257d(0x5e7)]['error'](_0x313574);}}async[a0_0xf2a334(0x659)](_0x49af50){const _0x21dfd1=a0_0xf2a334;try{return await this[_0x21dfd1(0x90d)][_0x21dfd1(0x6d5)](_0x49af50||this[_0x21dfd1(0x3f3)][_0x21dfd1(0x31a)]+':'+this[_0x21dfd1(0x29c)]);}catch(_0xecd1c0){this[_0x21dfd1(0x5e7)][_0x21dfd1(0x830)](_0xecd1c0);}}};async function Os(_0x5d808a,_0x5b6605){const _0x1ffbe4=a0_0xf2a334;let _0x34c349=new $(Os[_0x1ffbe4(0x76f)]),_0x450704=new ue(_0x5d808a,_0x5b6605),_0x5639dc=async(_0x569520,_0x554b84)=>{const _0x2b8a48=_0x1ffbe4;try{return await _0x450704[_0x2b8a48(0x8dd)](_0x554b84,_0x569520);}catch(_0x482a9b){return _0x34c349[_0x2b8a48(0x830)]({'localError':_0x2b8a48(0x8dd),'error':_0x482a9b});}},_0x3eaabd=async _0x582648=>{const _0x5401d1=_0x1ffbe4;try{return await _0x450704[_0x5401d1(0x8ec)](_0x582648);}catch(_0x2fec98){_0x34c349[_0x5401d1(0x830)]({'readData':_0x5401d1(0x8dd),'error':_0x2fec98});return;}},_0x2c6687=async _0xe52e74=>{const _0x571387=_0x1ffbe4;try{return await _0x450704[_0x571387(0x866)](_0xe52e74);}catch(_0x55be5b){_0x34c349[_0x571387(0x830)]({'readData':_0x571387(0x866),'error':_0x55be5b});}},_0x44c72a=await _0x3eaabd(_0x1ffbe4(0x345))||(0x0,kt[_0x1ffbe4(0x22c)])();return{'state':{'creds':_0x44c72a,'keys':{'get':async(_0x22c706,_0x3e4b83)=>{const _0x3699da=_0x1ffbe4;let _0x12458b={};return await Promise['all'](_0x3e4b83[_0x3699da(0x5b0)](async _0x326f87=>{const _0x1bb058=_0x3699da;let _0xdb322e=await _0x3eaabd(_0x22c706+'-'+_0x326f87);_0x22c706===_0x1bb058(0x786)&&_0xdb322e&&(_0xdb322e=kt['proto']['Message']['AppStateSyncKeyData'][_0x1bb058(0x30b)](_0xdb322e)),_0x12458b[_0x326f87]=_0xdb322e;})),_0x12458b;},'set':async _0x5d3e04=>{const _0x4b0aec=_0x1ffbe4;let _0x3141a5=[];for(let _0x3f3fe9 in _0x5d3e04)for(let _0x53afcf in _0x5d3e04[_0x3f3fe9]){let _0x481c6c=_0x5d3e04[_0x3f3fe9][_0x53afcf],_0x32ea42=_0x3f3fe9+'-'+_0x53afcf;_0x3141a5[_0x4b0aec(0x355)](_0x481c6c?await _0x5639dc(_0x481c6c,_0x32ea42):await _0x2c6687(_0x32ea42));}await Promise['all'](_0x3141a5);}}},'saveCreds':async()=>await _0x5639dc(_0x44c72a,_0x1ffbe4(0x345))};}var k=I(require('fs')),Q=require(a0_0xf2a334(0x8cf)),Ut=I(require(a0_0xf2a334(0x325))),oe=require(a0_0xf2a334(0x22a)),Ei=require(a0_0xf2a334(0x171)),Ni=require(a0_0xf2a334(0x6d4)),$i=I(require('axios')),Ee=class extends O{constructor(_0x15e090,_0x44da96,_0x3227ea){const _0x437fe9=a0_0xf2a334;super(_0x44da96),this[_0x437fe9(0x3bc)]=_0x15e090,this['configService']=_0x44da96,this[_0x437fe9(0x1f5)]=_0x3227ea;}async[a0_0xf2a334(0x476)](_0x5ac538,_0x51770c){const _0x2cbd2a=a0_0xf2a334;try{if(this[_0x2cbd2a(0x3de)][_0x2cbd2a(0x6f6)]){console[_0x2cbd2a(0x6b2)](_0x2cbd2a(0x652)+_0x51770c+_0x2cbd2a(0x817),_0x5ac538);let _0x3c9105=await this[_0x2cbd2a(0x3bc)][_0x2cbd2a(0x181)]({'_id':_0x51770c},{'$set':_0x5ac538},{'new':!0x0,'upsert':!0x0});return console[_0x2cbd2a(0x6b2)](_0x2cbd2a(0x7db),_0x3c9105),_0x3c9105;}}catch(_0x4fced1){throw console[_0x2cbd2a(0x830)]('Erro\x20ao\x20atualizar\x20cacheInstance:',_0x4fced1),_0x4fced1;}return null;}async[a0_0xf2a334(0x221)](_0x5d9159){const _0x32c209=a0_0xf2a334;try{let _0x5cca4c=A(_0x5d9159[_0x32c209(0x770)]);return{'deletedCount':(await this['cacheInstanceModel'][_0x32c209(0x221)](_0x5cca4c))[_0x32c209(0x706)]};}catch(_0x6fe56){return{'error':_0x6fe56?.[_0x32c209(0x20e)]()};}}async[a0_0xf2a334(0x18a)](_0x220d3f){const _0x1ed04d=a0_0xf2a334;try{let _0x63ae2b=A(_0x220d3f[_0x1ed04d(0x770)]);return await this[_0x1ed04d(0x3bc)]['findOne'](_0x63ae2b)[_0x1ed04d(0x695)]();}catch{return null;}}},Ne=(0x0,Ni[a0_0xf2a334(0x40f)])(Ei[a0_0xf2a334(0x6f8)]),xs=0x1f4,Do=S[a0_0xf2a334(0x4c6)]('PROXY'),Ps=class{constructor(){const _0x45cb7b=a0_0xf2a334;this[_0x45cb7b(0x778)]=new Ee(We,S),(!this[_0x45cb7b(0x904)]||!this[_0x45cb7b(0x693)])&&Do&&this[_0x45cb7b(0x8af)]()['then'](async()=>{const _0x152852=_0x45cb7b;console[_0x152852(0x6b2)]('IPv6\x20Prefix\x20detected:\x20'+this[_0x152852(0x904)]),console[_0x152852(0x6b2)](_0x152852(0x3a2)+this['networkInterface']),await this[_0x152852(0x7a9)]();let _0x4923b2=await this[_0x152852(0x517)]();console['log'](_0x152852(0x21e)+_0x4923b2);})[_0x45cb7b(0x3fc)](_0x3385fa=>{const _0x8abde8=_0x45cb7b;console[_0x8abde8(0x830)](_0x8abde8(0x36d)+_0x3385fa[_0x8abde8(0x80a)]);});}async[a0_0xf2a334(0x7a9)](){const _0x144b00=a0_0xf2a334;let _0x168915=await this['listIPv6Addresses']();if(console[_0x144b00(0x6b2)](_0x144b00(0x269)+_0x168915[_0x144b00(0x250)]),_0x168915[_0x144b00(0x250)]>xs){let _0x11da90=_0x168915[_0x144b00(0x662)](xs);for(let _0x37fdd2 of _0x11da90)console['log'](_0x144b00(0x2cb)+_0x37fdd2),await this['removeIPv6'](_0x37fdd2);console[_0x144b00(0x6b2)](_0x144b00(0x39c)+_0x11da90['length']+_0x144b00(0x1de));}else console['log'](_0x144b00(0x537));}async['listIPv6Addresses'](){const _0x5143de=a0_0xf2a334;try{let {stdout:_0x5bc4ad}=await Ne(_0x5143de(0x6f4));return _0x5bc4ad['split']('\x0a')['filter'](_0x54856f=>_0x54856f['includes']('inet6')&&_0x54856f[_0x5143de(0x343)](_0x5143de(0x671)))['map'](_0xa9c22f=>_0xa9c22f['match'](/inet6\s+([a-fA-F0-9:]+)\//)?.[0x1])[_0x5143de(0x3c9)](Boolean);}catch(_0x5f2c63){return console[_0x5143de(0x830)](_0x5143de(0x318)+_0x5f2c63[_0x5143de(0x80a)]),[];}}async[a0_0xf2a334(0x517)](){const _0x89cfb1=a0_0xf2a334;try{let {stdout:_0x4943d8}=await Ne('ip\x20-6\x20addr\x20show\x20scope\x20global\x20|\x20grep\x20-c\x20inet6'),_0x56f84b=parseInt(_0x4943d8[_0x89cfb1(0x66c)](),0xa);return console['log']('Total\x20de\x20endereços\x20IPv6\x20globais:\x20'+_0x56f84b),_0x56f84b;}catch(_0x26a4f8){return console['error']('Error\x20fetching\x20IPv6\x20count:\x20'+_0x26a4f8[_0x89cfb1(0x80a)]),0x0;}}async[a0_0xf2a334(0x205)](_0x59b643){const _0x545545=a0_0xf2a334;try{await Ne('ip\x20-6\x20addr\x20del\x20'+_0x59b643+_0x545545(0x83e)+this[_0x545545(0x693)]),console[_0x545545(0x6b2)](_0x545545(0x3aa)+_0x59b643);}catch(_0x24e809){console[_0x545545(0x830)](_0x545545(0x907)+_0x24e809[_0x545545(0x80a)]);}}async[a0_0xf2a334(0x8af)](){const _0x4c180d=a0_0xf2a334;try{let {stdout:_0x2f846a}=await Ne('ip\x20-br\x20link\x20show');console['log'](_0x4c180d(0x5e9)+_0x2f846a);let _0x3831b0=_0x2f846a[_0x4c180d(0x8a0)]('\x0a')[_0x4c180d(0x5b0)](_0x4d4ff3=>_0x4d4ff3[_0x4c180d(0x8a0)]('\x20')[0x0])[_0x4c180d(0x3c9)](_0x4e30e7=>!_0x4e30e7[_0x4c180d(0x343)]('lo')&&!_0x4e30e7[_0x4c180d(0x343)](_0x4c180d(0x474))&&!_0x4e30e7[_0x4c180d(0x343)](_0x4c180d(0x70a))&&!_0x4e30e7[_0x4c180d(0x343)]('wl')&&!_0x4e30e7['includes']('@'));if(console[_0x4c180d(0x6b2)](_0x4c180d(0x3f0)+_0x3831b0),_0x3831b0[_0x4c180d(0x250)]===0x0)throw new Error(_0x4c180d(0x288));this[_0x4c180d(0x693)]=_0x3831b0[0x0];let {stdout:_0x35e2bc}=await Ne(_0x4c180d(0x31f)+this['networkInterface']);console[_0x4c180d(0x6b2)](_0x4c180d(0x2cd)+_0x35e2bc);let _0x48f18b=_0x35e2bc['split']('\x0a')[_0x4c180d(0x556)](_0x45ced7=>_0x45ced7[_0x4c180d(0x343)](_0x4c180d(0x737))&&_0x45ced7['includes'](_0x4c180d(0x671)));if(!_0x48f18b)throw new Error('No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface');let _0x45c538=_0x48f18b['match'](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x45c538)throw new Error(_0x4c180d(0x544));let [_0x1ab769,_0x356dc1,_0x369c04]=_0x45c538,_0x50fc51=Math[_0x4c180d(0x7b4)](Number(_0x369c04)/0x10),_0x1f1329=Number(_0x369c04)%0x10,_0x28f718=_0x356dc1[_0x4c180d(0x8a0)](':')[_0x4c180d(0x662)](0x0,_0x50fc51)['join'](':');if(_0x1f1329>0x0){let _0x457001=_0x356dc1['split'](':')[_0x50fc51],_0x3a9094=0xffff<<0x10-_0x1f1329&0xffff,_0x38eafc=(parseInt(_0x457001,0x10)&_0x3a9094)[_0x4c180d(0x20e)](0x10)[_0x4c180d(0x398)](0x4,'0');_0x28f718+=':'+_0x38eafc;}this[_0x4c180d(0x904)]=_0x28f718+':';}catch(_0x45eb65){console[_0x4c180d(0x830)](_0x4c180d(0x34d),_0x45eb65);}}async[a0_0xf2a334(0x668)](_0x7de67){const _0x3ec3ff=a0_0xf2a334;let _0x4df88d=_0x3ec3ff(0x463)+_0x7de67+_0x3ec3ff(0x83e)+this[_0x3ec3ff(0x693)];try{await Ne(_0x4df88d),console['log'](_0x3ec3ff(0x322)+_0x7de67);}catch(_0x43850a){console[_0x3ec3ff(0x830)](_0x3ec3ff(0x47f)+_0x43850a);}}['randomMac'](){const _0x14858a=a0_0xf2a334;return _0x14858a(0x78a)[_0x14858a(0x6b0)](/X/g,()=>_0x14858a(0x5df)['charAt'](Math[_0x14858a(0x7b4)](Math['random']()*0x10)));}[a0_0xf2a334(0x22b)](_0x4a69ee,_0x59a51b){const _0x19dec7=a0_0xf2a334;let _0x3e0dca=_0x59a51b[_0x19dec7(0x8a0)](':');return _0x3e0dca[0x0]=(parseInt(_0x3e0dca[0x0],0x10)^0x2)['toString'](0x10)['padStart'](0x2,'0'),''+_0x4a69ee+_0x3e0dca[0x0]+_0x3e0dca[0x1]+':'+_0x3e0dca[0x2]+'ff:fe'+_0x3e0dca[0x3]+':'+_0x3e0dca[0x4]+_0x3e0dca[0x5];}[a0_0xf2a334(0x304)](){const _0x3f6084=a0_0xf2a334;let _0x32ab55=this['ipv6Prefix'];_0x32ab55[_0x3f6084(0x8de)](':')||(_0x32ab55+=':');let _0x707487=this[_0x3f6084(0x25a)]();return this[_0x3f6084(0x22b)](_0x32ab55,_0x707487);}[a0_0xf2a334(0x328)](_0x50c81){const _0x43663e=a0_0xf2a334;return new RegExp(_0x43663e(0x273))['test'](_0x50c81);}async[a0_0xf2a334(0x5b3)](_0x229bd2){const _0x2ee618=a0_0xf2a334;let _0x24ee09=[{'url':_0x2ee618(0x287),'parse':_0x5da0db=>_0x5da0db['ip']},{'url':_0x2ee618(0x46d),'parse':_0x52c7d5=>_0x52c7d5['ip']},{'url':_0x2ee618(0x36e),'parse':_0x2783a4=>_0x2783a4[_0x2ee618(0x66c)]()},{'url':_0x2ee618(0x760),'parse':_0x5e8702=>_0x5e8702[_0x2ee618(0x66c)]()}],_0x2d9cc2=_0x24ee09[Math['floor'](Math[_0x2ee618(0x1cf)]()*_0x24ee09[_0x2ee618(0x250)])];try{let _0x4bf3e2=await $i['default'][_0x2ee618(0x4c6)](_0x2d9cc2[_0x2ee618(0x2b4)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x229bd2}}),_0x3c36fa=_0x2d9cc2['parse'](_0x4bf3e2[_0x2ee618(0x601)]);return _0x3c36fa[_0x2ee618(0x3d0)]()===_0x229bd2[_0x2ee618(0x3d0)]()?(console[_0x2ee618(0x6b2)](_0x2ee618(0x456)+_0x229bd2),!0x0):(console[_0x2ee618(0x830)]('IP\x20mismatch:\x20configured\x20'+_0x229bd2+_0x2ee618(0x202)+_0x3c36fa),!0x1);}catch(_0x2987c5){return console[_0x2ee618(0x830)](_0x2ee618(0x5e4)+_0x2d9cc2[_0x2ee618(0x2b4)]+':\x20'+_0x2987c5[_0x2ee618(0x80a)]),!0x1;}}async[a0_0xf2a334(0x3e9)](_0x36b32b,_0x1b6429){const _0x4bd6ec=a0_0xf2a334;if(!this[_0x4bd6ec(0x904)]||!this[_0x4bd6ec(0x693)])return console[_0x4bd6ec(0x830)](_0x4bd6ec(0x1c1)),null;let _0x72e90d=await this['listIPv6Addresses']();if(_0x72e90d[_0x4bd6ec(0x250)]>=xs){let _0x7b36a8=_0x72e90d[Math['floor'](Math['random']()*_0x72e90d['length'])];return console['log'](_0x4bd6ec(0x634)+_0x7b36a8),_0x7b36a8;}let _0x2b42ba;do _0x2b42ba=this[_0x4bd6ec(0x304)](),console[_0x4bd6ec(0x6b2)](_0x4bd6ec(0x293)+_0x2b42ba);while(!this['isValidIPv6Config'](_0x2b42ba));await this[_0x4bd6ec(0x668)](_0x2b42ba),console[_0x4bd6ec(0x6b2)](_0x4bd6ec(0x6c7)+_0x2b42ba);let _0x327d83={'_id':_0x36b32b+'-'+_0x1b6429,'ip':_0x2b42ba},_0x2e4677=await this['cacheInstanceRepository'][_0x4bd6ec(0x476)](_0x327d83,_0x327d83['_id']);return console['log'](_0x4bd6ec(0x623)+_0x2e4677),_0x2b42ba;}},ko=new Ps(),Le=ko,Us=a0_0xf2a334(0x3e1),xi,de=null,xa=null,Lo=0x3,Fo=null,Ri=S['get'](a0_0xf2a334(0x67c))[a0_0xf2a334(0x380)][a0_0xf2a334(0x1c3)],Ai=S[a0_0xf2a334(0x4c6)](a0_0xf2a334(0x63c));async function Uo(){const _0x2e3983=a0_0xf2a334;let _0x2aa829=await ve['findOne']();de=_0x2aa829?.[_0x2e3983(0x49c)]??null,Fo=_0x2aa829?.[_0x2e3983(0x47b)]??null,Us=_0x2aa829?.[_0x2e3983(0x46c)]??'Safari',xi=_0x2aa829?.[_0x2e3983(0x60a)]??he??_0x2e3983(0x309);}async function jo(){await Uo();}jo();var Lt={},$e=class u{constructor(_0x33936d,_0xe0336d,_0x4bfada){const _0x4295fe=a0_0xf2a334;this[_0x4295fe(0x566)]=_0x33936d,this[_0x4295fe(0x7bb)]=_0xe0336d,this[_0x4295fe(0x677)]=_0x4bfada,this[_0x4295fe(0x262)]={},this[_0x4295fe(0x580)]=null,this['logger']=new $(u[_0x4295fe(0x76f)]),this[_0x4295fe(0x584)]={},this[_0x4295fe(0x1bb)]={},this[_0x4295fe(0x833)]={'state':_0x4295fe(0x733)},this['storePath']=(0x0,j[_0x4295fe(0x666)])(ne,_0x4295fe(0x21b)),this[_0x4295fe(0x710)]=new Fs[(_0x4295fe(0x59e))](),this[_0x4295fe(0x3d6)]=new Fs[(_0x4295fe(0x59e))](),this[_0x4295fe(0x5d1)]=!0x1,this[_0x4295fe(0x369)]={'status.instance':'/wa-connection-update','connection.update':_0x4295fe(0x55b),'qrcode.updated':'/wa-qrcode','messages.upsert':_0x4295fe(0x6db),'send.message':_0x4295fe(0x6db),'messages.update':'/wa-message-update','group.upsert':_0x4295fe(0x61b),'group.update':_0x4295fe(0x61b),'group-participants.update':_0x4295fe(0x61b),'messages.set':_0x4295fe(0x27e),'contacts.set':'/wa-contacts','contacts.upsert':_0x4295fe(0x359),'contacts.update':_0x4295fe(0x359),'presence.update':_0x4295fe(0x469),'chats.set':_0x4295fe(0x49f),'chats.update':_0x4295fe(0x49f),'chats.upsert':_0x4295fe(0x49f),'chats.delete':_0x4295fe(0x49f)},this[_0x4295fe(0x7f9)]=0x0,this[_0x4295fe(0x69c)]=[],this['RECONNECT_TIME_FRAME']=0xea60,this[_0x4295fe(0x56a)]=!0x1,this[_0x4295fe(0x551)]={'chats.upsert':async(_0x12b865,_0x11e167)=>{const _0x11b04c=_0x4295fe;let _0x3f5038=[];for await(let _0x474812 of _0x12b865)_0x3f5038[_0x11b04c(0x355)]({'_id':_0x474812['id'],'owner':this[_0x11b04c(0x584)][_0x11b04c(0x7a3)],'group':_0x474812['id']['endsWith'](_0x11b04c(0x701)),'name':_0x474812[_0x11b04c(0x76f)]||_0x474812[_0x11b04c(0x58b)]||null,'contactname':null,'lastmsg':_0x474812['conversationTimestamp']&&_0x474812['conversationTimestamp']['toString']()[_0x11b04c(0x250)]<0xd?_0x474812['conversationTimestamp']*0x3e8:_0x474812[_0x11b04c(0x27c)]||null,'archived':_0x474812[_0x11b04c(0x610)]||!0x1,'unreadcount':_0x474812[_0x11b04c(0x1f7)]||0x0,'ephemeralExpiration':_0x474812[_0x11b04c(0x44c)]||0x0});this['sendDataWebhook'](_0x11b04c(0x2f2),_0x3f5038);},'chats.update':async(_0x392341,_0x4bd226)=>{const _0x2ff408=_0x4295fe;for(let _0x11b41d of _0x392341){let _0x36c9ff={'_id':_0x11b41d['id'],'owner':this[_0x2ff408(0x584)]['wuid'],'archived':_0x11b41d[_0x2ff408(0x610)],'muteEndTime':_0x11b41d[_0x2ff408(0x431)],'ephemeralExpiration':_0x11b41d[_0x2ff408(0x44c)]},_0x4dcaf1=!0x1,_0xa689bf={};_0x36c9ff[_0x2ff408(0x610)]!=null&&(this[_0x2ff408(0x5e7)][_0x2ff408(0x6a3)](this[_0x2ff408(0x29c)]+'\x20('+this[_0x2ff408(0x584)]['wuid']+_0x2ff408(0x897)+_0x11b41d['id']+_0x2ff408(0x8fc)+_0x11b41d[_0x2ff408(0x610)]),_0x4dcaf1=!0x0,_0xa689bf['archived']=_0x11b41d[_0x2ff408(0x610)]),_0x2ff408(0x431)in _0x11b41d&&(this[_0x2ff408(0x5e7)][_0x2ff408(0x6a3)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x2ff408(0x5f0)+_0x11b41d['id']+'\x20:\x20'+(_0x11b41d['muteEndTime']??'0')),_0x4dcaf1=!0x0,_0xa689bf[_0x2ff408(0x431)]=_0x11b41d['muteEndTime']??0x0),'ephemeralExpiration'in _0x11b41d&&(this[_0x2ff408(0x5e7)]['verbose'](this[_0x2ff408(0x29c)]+'\x20('+this['instance'][_0x2ff408(0x7a3)]+'):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20'+_0x11b41d['id']+_0x2ff408(0x8fc)+(_0x11b41d[_0x2ff408(0x44c)]!==void 0x0?_0x11b41d[_0x2ff408(0x44c)]:_0x2ff408(0x6f5))),_0xa689bf[_0x2ff408(0x44c)]=_0x11b41d[_0x2ff408(0x44c)]===null?0x0:_0x11b41d[_0x2ff408(0x44c)],_0x4dcaf1=!0x0);let _0x1ad63c;_0x4dcaf1&&(_0x1ad63c=await this[_0x2ff408(0x677)][_0x2ff408(0x2fb)][_0x2ff408(0x32f)]({'where':{'_id':_0x11b41d['id']}},_0xa689bf,this['instance'][_0x2ff408(0x7a3)])),_0x1ad63c&&F(this[_0x2ff408(0x29c)],_0x2ff408(0x806),{'chat':_0x1ad63c});}},'chats.delete':async _0xe8dc4e=>{const _0x59b97b=_0x4295fe;for(let _0xaaef72 of _0xe8dc4e)if(_0xaaef72[_0x59b97b(0x8de)]('@g.us')){await this[_0x59b97b(0x677)][_0x59b97b(0x2fb)][_0x59b97b(0x44e)]({'where':{'_id':_0xaaef72}},this[_0x59b97b(0x584)]['wuid']);let _0x278c33={'where':{'key':{'remoteJid':_0xaaef72}}};await this[_0x59b97b(0x677)]['message'][_0x59b97b(0x44e)](_0x278c33,this[_0x59b97b(0x584)][_0x59b97b(0x7a3)]);}else{await this['repository'][_0x59b97b(0x2fb)]['updateOne']({'where':{'_id':_0xaaef72}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x59b97b(0x7a3)]);let _0x162c56={'where':{'key':{'remoteJid':_0xaaef72}}};await this[_0x59b97b(0x677)][_0x59b97b(0x80a)][_0x59b97b(0x44e)](_0x162c56,this['instance'][_0x59b97b(0x7a3)]);}this[_0x59b97b(0x467)](_0x59b97b(0x7ba),[..._0xe8dc4e]);}},this[_0x4295fe(0x772)]={'contacts.upsert':async(_0x4b172c,_0x30d4a2)=>{const _0x1d47cb=_0x4295fe;let _0x5b57d2=await this['repository'][_0x1d47cb(0x738)][_0x1d47cb(0x556)]({'where':{}},this[_0x1d47cb(0x584)][_0x1d47cb(0x7a3)]),_0x5a2fc8=[];for await(let _0x21a85a of _0x4b172c)_0x5b57d2[_0x1d47cb(0x556)](_0x9f08d3=>_0x9f08d3[_0x1d47cb(0x29b)]===_0x21a85a['id'])||_0x5a2fc8[_0x1d47cb(0x355)]({'_id':_0x21a85a['id'],'pushName':_0x21a85a?.[_0x1d47cb(0x76f)]||_0x21a85a?.[_0x1d47cb(0x4c8)],'owner':this[_0x1d47cb(0x584)][_0x1d47cb(0x7a3)]});this['sendDataWebhook'](_0x1d47cb(0x32b),_0x5a2fc8),await this[_0x1d47cb(0x677)][_0x1d47cb(0x738)]['insert'](_0x5a2fc8);},'contacts.update':async(_0x189461,_0x22ba5)=>{const _0x356fbc=_0x4295fe;let _0x438af8=[];for await(let _0x109d4e of _0x189461)_0x438af8['push']({'_id':_0x109d4e['id'],'pushName':_0x109d4e?.[_0x356fbc(0x76f)]??_0x109d4e?.[_0x356fbc(0x4c8)],'owner':this[_0x356fbc(0x584)]['wuid']});this[_0x356fbc(0x467)](_0x356fbc(0x255),_0x438af8);}},this[_0x4295fe(0x681)]={'messaging-history.set':async({messages:_0x29f550,chats:_0x248cba,isLatest:_0x4fcebb},_0x144cc2)=>{const _0x1f2b58=_0x4295fe;if(_0x4fcebb){setTimeout(()=>{const _0x45b21a=a0_0x464b;this[_0x45b21a(0x584)]['HistoryProcessed']=!0x0,console[_0x45b21a(0x6b2)](_0x45b21a(0x215));},0x1d4c0);let _0x1c0333=await Promise[_0x1f2b58(0x3f9)](_0x248cba['map'](async _0xa15d9e=>({'_id':_0xa15d9e['id'],'owner':this['instance'][_0x1f2b58(0x7a3)],'group':_0xa15d9e['id']['endsWith']('@g.us'),'name':_0xa15d9e[_0x1f2b58(0x76f)]||_0xa15d9e[_0x1f2b58(0x58b)]||_0xa15d9e['username']||null,'contactname':null,'lastmsg':_0xa15d9e[_0x1f2b58(0x27c)]&&_0xa15d9e[_0x1f2b58(0x27c)][_0x1f2b58(0x20e)]()[_0x1f2b58(0x250)]<0xd?_0xa15d9e['conversationTimestamp']*0x3e8:_0xa15d9e['conversationTimestamp']||null,'archived':_0xa15d9e[_0x1f2b58(0x610)]||!0x1,'unreadcount':_0xa15d9e['unreadCount']||0x0,'ephemeralExpiration':_0xa15d9e[_0x1f2b58(0x44c)]||0x0,'muteEndTime':_0xa15d9e[_0x1f2b58(0x431)]||0x0})));this[_0x1f2b58(0x467)]('chats.set',_0x1c0333),await this[_0x1f2b58(0x4bb)](_0x1c0333,_0x144cc2);}let _0x2f86c1=[],_0x4d78cb=Date[_0x1f2b58(0x5eb)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x5944bc]of Object[_0x1f2b58(0x527)](_0x29f550)){if(_0x5944bc[_0x1f2b58(0x80a)]?.[_0x1f2b58(0x77c)]||_0x5944bc[_0x1f2b58(0x80a)]?.[_0x1f2b58(0x528)]||!_0x5944bc[_0x1f2b58(0x80a)]||_0x5944bc[_0x1f2b58(0x28c)]['remoteJid']===_0x1f2b58(0x87c)||(Ls['default'][_0x1f2b58(0x7d8)](_0x5944bc?.[_0x1f2b58(0x4f1)])&&(_0x5944bc['messageTimestamp']=_0x5944bc[_0x1f2b58(0x4f1)]?.['toNumber']()),_0x5944bc[_0x1f2b58(0x4f1)]&&_0x5944bc[_0x1f2b58(0x4f1)][_0x1f2b58(0x20e)]()[_0x1f2b58(0x250)]<0xd&&(_0x5944bc['messageTimestamp']=_0x5944bc[_0x1f2b58(0x4f1)]*0x3e8),_0x5944bc[_0x1f2b58(0x4f1)]<_0x4d78cb))continue;let _0x2e772e=(0x0,w[_0x1f2b58(0x56f)])(_0x5944bc[_0x1f2b58(0x80a)]),_0x3d0ad1=(0x0,w['getContentType'])(_0x2e772e),{message_normalized:_0x5d7b95}=this[_0x1f2b58(0x31d)](_0x2e772e,_0x3d0ad1,null);Object[_0x1f2b58(0x3e5)](_0x5d7b95)[_0x1f2b58(0x250)]>0x0&&_0x2f86c1['push']({'_id':_0x5944bc[_0x1f2b58(0x28c)]['id'],'key':_0x5944bc['key'],'pushName':_0x5944bc[_0x1f2b58(0x27d)],'participant':_0x5944bc[_0x1f2b58(0x23e)],'message':_0x2e772e,'messageType':_0x3d0ad1,'message_normalized':{'key':_0x5944bc['key'],'pushName':_0x5944bc[_0x1f2b58(0x27d)],'messageTimestamp':_0x5944bc[_0x1f2b58(0x4f1)],..._0x5d7b95},'messageTimestamp':_0x5944bc[_0x1f2b58(0x4f1)],'owner':this[_0x1f2b58(0x584)][_0x1f2b58(0x7a3)]});}_0x144cc2['ENABLED']&&_0x2f86c1['length']>0x0&&(this[_0x1f2b58(0x5e7)][_0x1f2b58(0x6a3)](this['instanceName']+'\x20('+this[_0x1f2b58(0x584)]['wuid']+_0x1f2b58(0x62f)+_0x2f86c1[_0x1f2b58(0x250)]+_0x1f2b58(0x4d6)+this[_0x1f2b58(0x584)][_0x1f2b58(0x7a3)]+_0x1f2b58(0x863)),await this[_0x1f2b58(0x677)][_0x1f2b58(0x80a)][_0x1f2b58(0x26f)]([..._0x2f86c1],this[_0x1f2b58(0x584)][_0x1f2b58(0x7a3)]));let _0x21c320=Date[_0x1f2b58(0x5eb)]()-0xa*0x3c*0x3e8;for(let _0x419059 of _0x2f86c1)if(this['instance']['HistoryProcessed']&&_0x419059[_0x1f2b58(0x4f1)]>=_0x21c320){if(this[_0x1f2b58(0x890)](this['instance'][_0x1f2b58(0x7a3)],_0x419059[_0x1f2b58(0x29b)])){this['logger'][_0x1f2b58(0x6a3)](this[_0x1f2b58(0x29c)]+'\x20('+this[_0x1f2b58(0x584)]['wuid']+_0x1f2b58(0x707)+_0x419059[_0x1f2b58(0x29b)]+')');continue;}this[_0x1f2b58(0x782)](this['instance'][_0x1f2b58(0x7a3)],_0x419059['_id']),this[_0x1f2b58(0x467)]('messages.upsert',_0x419059);}else this[_0x1f2b58(0x467)]('messages.set',_0x419059);_0x29f550=void 0x0;},'messages.upsert':async({messages:_0x370947,type:_0x9a1dbd},_0x491f32)=>{const _0x346ddd=_0x4295fe;for(let _0x2a5285 of _0x370947){if(this[_0x346ddd(0x1bb)]?.['groups_ignore']&&_0x2a5285[_0x346ddd(0x28c)]['remoteJid']['includes'](_0x346ddd(0x701))){this[_0x346ddd(0x5e7)][_0x346ddd(0x6a3)](this['instanceName']+'\x20('+this[_0x346ddd(0x584)][_0x346ddd(0x7a3)]+'):\x20[messages.upsert]\x20group\x20ignored');continue;}if(_0x2a5285[_0x346ddd(0x28c)]['remoteJid'][_0x346ddd(0x343)](_0x346ddd(0x3fd))||_0x2a5285['key'][_0x346ddd(0x61e)]===_0x346ddd(0x87c))continue;if(_0x2a5285['messageStubParameters']&&_0x2a5285['messageStubParameters'][0x0]===_0x346ddd(0x81c)){console[_0x346ddd(0x830)](_0x346ddd(0x6d8)),await this['fakeReceived'](_0x2a5285),Lt[_0x2a5285[_0x346ddd(0x28c)]['id']]=_0x2a5285,this[_0x346ddd(0x746)](_0x2a5285,0x0);continue;}if(_0x9a1dbd!==_0x346ddd(0x3dc)||!_0x2a5285?.[_0x346ddd(0x80a)]||_0x2a5285[_0x346ddd(0x80a)]?.[_0x346ddd(0x77c)]||_0x2a5285[_0x346ddd(0x80a)]?.[_0x346ddd(0x528)])continue;let _0x3e9f1f=null,_0x1ec525=null;if(Lt[_0x2a5285[_0x346ddd(0x28c)]['id']]&&(console['error']('[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache'),await this[_0x346ddd(0x677)][_0x346ddd(0x79f)]['delete']({'where':{'_id':_0x2a5285['key']['id']}}),delete Lt[_0x2a5285[_0x346ddd(0x28c)]['id']]),this[_0x346ddd(0x890)](this[_0x346ddd(0x584)][_0x346ddd(0x7a3)],_0x2a5285[_0x346ddd(0x28c)]['id'])){this['logger']['verbose'](this[_0x346ddd(0x29c)]+'\x20('+this[_0x346ddd(0x584)][_0x346ddd(0x7a3)]+_0x346ddd(0x8ae));continue;}this[_0x346ddd(0x782)](this[_0x346ddd(0x584)][_0x346ddd(0x7a3)],_0x2a5285['key']['id']);try{_0x3e9f1f=await this[_0x346ddd(0x21f)](_0x2a5285),_0x1ec525=_0x3e9f1f?_0x3e9f1f['join'](','):null;}catch(_0x30b1aa){this[_0x346ddd(0x5e7)]['verbose'](this[_0x346ddd(0x29c)]+'\x20('+this[_0x346ddd(0x584)][_0x346ddd(0x7a3)]+_0x346ddd(0x62f)+(_0x30b1aa instanceof Error?_0x30b1aa[_0x346ddd(0x80a)]:JSON[_0x346ddd(0x34b)](_0x30b1aa,null,0x2))),_0x1ec525=_0x346ddd(0x773);}this[_0x346ddd(0x90d)][_0x346ddd(0x19a)](_0x346ddd(0x172)),Ls['default'][_0x346ddd(0x7d8)](_0x2a5285['messageTimestamp'])&&(_0x2a5285[_0x346ddd(0x4f1)]=_0x2a5285[_0x346ddd(0x4f1)]?.['toNumber']()),_0x2a5285['messageTimestamp']&&_0x2a5285[_0x346ddd(0x4f1)]['toString']()[_0x346ddd(0x250)]<0xd&&(_0x2a5285[_0x346ddd(0x4f1)]=_0x2a5285[_0x346ddd(0x4f1)]*0x3e8);let _0x21e732=_0x2a5285[_0x346ddd(0x80a)],_0x256751=(0x0,w[_0x346ddd(0x56f)])(_0x21e732),_0x3c635=(0x0,w[_0x346ddd(0x4f9)])(_0x256751),{messageContent:_0x58a179,message_normalized:_0x1a309b}=this[_0x346ddd(0x31d)](_0x256751,_0x3c635,_0x1ec525);if(_0x3c635==='protocolMessage'&&_0x58a179?.[_0x346ddd(0x59c)]&&(_0x3c635=_0x346ddd(0x59c)),_0x3c635===_0x346ddd(0x50a)&&_0x2a5285[_0x346ddd(0x28c)][_0x346ddd(0x329)])continue;let _0x24451d,_0x2ee8c6=_0x2a5285[_0x346ddd(0x28c)][_0x346ddd(0x61e)]['endsWith']('@g.us');if(_0x2a5285[_0x346ddd(0x28c)][_0x346ddd(0x329)])_0x24451d=this[_0x346ddd(0x584)][_0x346ddd(0x85a)];else{let _0x6a51f2=_0x2ee8c6?_0x2a5285['key']['participant']:_0x2a5285[_0x346ddd(0x28c)][_0x346ddd(0x61e)];_0x24451d=(await this['findAndUpdateCacheContact'](_0x6a51f2,_0x2a5285[_0x346ddd(0x27d)],!0x1))[_0x346ddd(0x336)]['pictureUrl'];}let _0x417eda={'_id':_0x2a5285[_0x346ddd(0x28c)]['id'],'key':_0x2a5285[_0x346ddd(0x28c)],'isGroup':_0x2ee8c6,'profilePictureUrl':_0x24451d,'pushName':_0x2a5285[_0x346ddd(0x27d)],'message':_0x256751,'messageType':_0x3c635,'message_normalized':{'key':_0x2a5285[_0x346ddd(0x28c)],'pushName':_0x2a5285[_0x346ddd(0x27d)],'messageTimestamp':_0x2a5285[_0x346ddd(0x4f1)],'source':(0x0,w[_0x346ddd(0x76d)])(_0x2a5285[_0x346ddd(0x28c)]['id']),..._0x1a309b},'messageTimestamp':_0x2a5285['messageTimestamp'],'owner':this[_0x346ddd(0x584)][_0x346ddd(0x7a3)],'source':(0x0,w[_0x346ddd(0x76d)])(_0x2a5285[_0x346ddd(0x28c)]['id']),'expiration':_0x58a179?.['contextInfo']?.[_0x346ddd(0x847)]||0x0};if(_0x58a179||(this[_0x346ddd(0x5e7)]['error'](_0x346ddd(0x7fe)),this['logger'][_0x346ddd(0x830)](_0x417eda)),_0x1a309b['text']===_0x346ddd(0x6aa)){console['error'](_0x346ddd(0x8f8)),await this[_0x346ddd(0x644)](_0x2a5285);continue;}this[_0x346ddd(0x5e7)][_0x346ddd(0x6b2)](this[_0x346ddd(0x29c)]+'\x20('+this['instance'][_0x346ddd(0x7a3)]+_0x346ddd(0x62f)+(_0x417eda[_0x346ddd(0x28c)]?.['fromMe']?_0x346ddd(0x43b):_0x346ddd(0x530))+'\x20['+_0x417eda[_0x346ddd(0x28c)]?.['remoteJid'][_0x346ddd(0x6b0)]('@s.whatsapp.net','')+_0x346ddd(0x35f)+_0x417eda[_0x346ddd(0x7a8)]+')'),_0x417eda['message_normalized']?.[_0x346ddd(0x439)]&&this[_0x346ddd(0x5e7)][_0x346ddd(0x6b2)](_0x2a5285['key']['id']+':\x20'+_0x417eda[_0x346ddd(0x1f0)]?.[_0x346ddd(0x439)]),await this[_0x346ddd(0x677)][_0x346ddd(0x80a)][_0x346ddd(0x26f)]([_0x417eda],this[_0x346ddd(0x584)][_0x346ddd(0x7a3)]),this[_0x346ddd(0x467)]('messages.upsert',_0x417eda),F(this[_0x346ddd(0x29c)],_0x346ddd(0x208),{'message':_0x417eda}),_0x2a5285['key'][_0x346ddd(0x61e)]!==_0x346ddd(0x87c)&&await this[_0x346ddd(0x29d)](_0x491f32,_0x417eda,_0x346ddd(0x184));}},'messages.update':async(_0x2d5f55,_0x6e4965)=>{const _0x1d149e=_0x4295fe;let _0x1e42df={0x0:_0x1d149e(0x2be),0x1:_0x1d149e(0x7e1),0x2:_0x1d149e(0x7ce),0x3:_0x1d149e(0x25d),0x4:_0x1d149e(0x85d),0x5:'PLAYED'};for await(let {key:_0x559442,update:_0x520230}of _0x2d5f55){if(this[_0x1d149e(0x1bb)]?.[_0x1d149e(0x6e4)]&&_0x559442[_0x1d149e(0x61e)][_0x1d149e(0x343)]('@g.us')){this[_0x1d149e(0x5e7)][_0x1d149e(0x6a3)](this[_0x1d149e(0x29c)]+'\x20('+this[_0x1d149e(0x584)][_0x1d149e(0x7a3)]+_0x1d149e(0x243));return;}if(_0x559442[_0x1d149e(0x61e)]!==_0x1d149e(0x87c)){let _0x18f94b=Date['now'](),_0x5b1c15;_0x520230[_0x1d149e(0x80a)]===null&&_0x520230[_0x1d149e(0x7cb)]===void 0x0?_0x5b1c15=_0x1d149e(0x494):_0x5b1c15=_0x1e42df[_0x520230['status']];let _0xf093ee=_0x559442['remoteJid'][_0x1d149e(0x6b0)](/:\d{1,2}@/g,'@'),_0x37aa27={..._0x559442,'remoteJid':_0xf093ee,'status':_0x5b1c15,'datetime':_0x18f94b,'owner':this[_0x1d149e(0x584)][_0x1d149e(0x7a3)]};this[_0x1d149e(0x467)](_0x1d149e(0x228),_0x37aa27),await this['updateMessage'](_0x559442,_0x37aa27);}}},'labels.association':async({type:_0x2c346e,association:_0x50aee4})=>{const _0x101fe=_0x4295fe;if(_0x50aee4['type']===_0x101fe(0x6e8)){let _0x33fbbf,_0x25255f=0x0;for(;!_0x33fbbf&&_0x25255f<this[_0x101fe(0x4c4)];)_0x33fbbf=await this[_0x101fe(0x677)][_0x101fe(0x2fb)][_0x101fe(0x18a)]({'where':{'_id':_0x50aee4[_0x101fe(0x465)]}},this['instance'][_0x101fe(0x7a3)]),_0x33fbbf||(_0x25255f++,this[_0x101fe(0x5e7)][_0x101fe(0x5b4)](this[_0x101fe(0x29c)]+'\x20('+this[_0x101fe(0x584)]['wuid']+_0x101fe(0x381)+_0x50aee4[_0x101fe(0x465)]+_0x101fe(0x2a1)+this['delayChatLabel_RETRY_DELAY_MS']+'ms\x20(tentativa\x20'+_0x25255f+'/'+this[_0x101fe(0x4c4)]+')'),await this[_0x101fe(0x1bc)](this[_0x101fe(0x7ac)]));if(!_0x33fbbf){this[_0x101fe(0x5e7)][_0x101fe(0x830)](_0x101fe(0x8ca)+_0x50aee4[_0x101fe(0x465)]+_0x101fe(0x54c)+this[_0x101fe(0x4c4)]+'\x20tentativas.');return;}switch(_0x2c346e){case _0x101fe(0x1c0):console[_0x101fe(0x6b2)](_0x50aee4),await this[_0x101fe(0x677)][_0x101fe(0x2fb)][_0x101fe(0x32f)]({'where':{'_id':_0x50aee4[_0x101fe(0x465)]}},{'leadInfo.etiquetas':_0x50aee4[_0x101fe(0x627)]},this[_0x101fe(0x584)]['wuid'],void 0x0,_0x101fe(0x797));break;case _0x101fe(0x5c8):console[_0x101fe(0x6b2)](_0x50aee4),await this['repository'][_0x101fe(0x2fb)][_0x101fe(0x32f)]({'where':{'_id':_0x50aee4[_0x101fe(0x465)]}},{'leadInfo.etiquetas':_0x50aee4[_0x101fe(0x627)]},this[_0x101fe(0x584)][_0x101fe(0x7a3)],void 0x0,_0x101fe(0x2ee));break;default:this[_0x101fe(0x5e7)][_0x101fe(0x830)]('unknown\x20operation\x20type\x20['+_0x2c346e+']');}}},'labels.edit':async _0x4b7f92=>{const _0x52177d=_0x4295fe;if(!_0x4b7f92||!_0x4b7f92['id']){this[_0x52177d(0x5e7)][_0x52177d(0x830)](_0x52177d(0x375));return;}if(!_0x4b7f92[_0x52177d(0x8c3)]){let _0x11819b=[_0x52177d(0x38a),_0x52177d(0x728),_0x52177d(0x709),'#dfaef0',_0x52177d(0x70d),_0x52177d(0x595),_0x52177d(0x71f),_0x52177d(0x6a5),_0x52177d(0x373),_0x52177d(0x55f),'#01d0e2',_0x52177d(0x3a8),_0x52177d(0x7af),_0x52177d(0x520),_0x52177d(0x568),_0x52177d(0x750),_0x52177d(0x6e6),_0x52177d(0x55d),_0x52177d(0x76c),'#9568cf'],_0x566562;typeof _0x4b7f92[_0x52177d(0x3f6)]=='number'&&_0x4b7f92['color']>=0x0&&_0x4b7f92[_0x52177d(0x3f6)]<_0x11819b['length']?_0x566562=_0x11819b[_0x4b7f92[_0x52177d(0x3f6)]]:(this['logger'][_0x52177d(0x830)](_0x52177d(0x3e4)+_0x4b7f92[_0x52177d(0x3f6)]),_0x566562=_0x52177d(0x675));let _0xe39856={'_id':_0x4b7f92['id'],'colorHex':_0x566562,'color':_0x4b7f92?.['color'],'name':_0x4b7f92?.[_0x52177d(0x76f)],'owner':this['instance'][_0x52177d(0x7a3)]};await this[_0x52177d(0x677)][_0x52177d(0x1c8)][_0x52177d(0x32f)]({'where':{'_id':_0x4b7f92['id']}},_0xe39856,this[_0x52177d(0x584)][_0x52177d(0x7a3)]),this[_0x52177d(0x5e7)][_0x52177d(0x5b4)](this[_0x52177d(0x29c)]+'\x20('+this[_0x52177d(0x584)][_0x52177d(0x7a3)]+_0x52177d(0x383)+_0x4b7f92);}_0x4b7f92[_0x52177d(0x8c3)]&&(await this[_0x52177d(0x677)][_0x52177d(0x1c8)][_0x52177d(0x44e)]({'where':{'_id':_0x4b7f92['id']}},this['instance']['wuid']),this[_0x52177d(0x5e7)][_0x52177d(0x5b4)](_0x52177d(0x55a)+_0x4b7f92['id']));}},this[_0x4295fe(0x5ef)]={'groups.upsert':async _0x2cd4df=>{const _0x39a761=_0x4295fe;this['localWebhook']?.[_0x39a761(0x6e4)]||this[_0x39a761(0x467)](_0x39a761(0x2ca),_0x2cd4df);for(let _0x480646 of _0x2cd4df)await this[_0x39a761(0x6c8)](_0x480646);},'groups.update':async _0x691d2a=>{const _0xa31cde=_0x4295fe;this['localWebhook']?.[_0xa31cde(0x6e4)]||this[_0xa31cde(0x467)](_0xa31cde(0x5ec),_0x691d2a);for(let _0x58e8cc of _0x691d2a)await this[_0xa31cde(0x6c8)](_0x58e8cc);},'group-participants.update':async _0x144e81=>{const _0x11d8ed=_0x4295fe;this[_0x11d8ed(0x1bb)]?.[_0x11d8ed(0x6e4)]||this['sendDataWebhook']('group-participants.update',_0x144e81),await this['updateGroupParticipantsWebhook'](_0x144e81);}},this['delayChatLabel_MAX_RETRIES']=0x5,this[_0x4295fe(0x7ac)]=0x1388,this['lastRealGroupsFetch']=0x0,this[_0x4295fe(0x21f)]=async _0x2265aa=>{const _0x5639eb=_0x4295fe;if(_0x2265aa[_0x5639eb(0x80a)]?.['pollUpdateMessage']){let _0x3bfd11=await this[_0x5639eb(0x5ad)](_0x2265aa[_0x5639eb(0x80a)][_0x5639eb(0x512)][_0x5639eb(0x8e0)],!0x0);if(_0x3bfd11){let _0x165ff3=_0x3bfd11[_0x5639eb(0x28c)][_0x5639eb(0x329)]?this[_0x5639eb(0x584)][_0x5639eb(0x7a3)]+'@s.whatsapp.net':_0x3bfd11['key'][_0x5639eb(0x23e)]||_0x3bfd11[_0x5639eb(0x28c)][_0x5639eb(0x61e)],_0x210717=_0x3bfd11[_0x5639eb(0x28c)]['id'],_0x398c59=_0x3bfd11[_0x5639eb(0x80a)],_0x3001eb=Buffer[_0x5639eb(0x1a3)](_0x398c59[_0x5639eb(0x83a)][_0x5639eb(0x56d)][_0x5639eb(0x20e)](_0x5639eb(0x1b3)),'hex'),_0x520c6e=(0x0,w[_0x5639eb(0x8c7)])(_0x2265aa[_0x5639eb(0x80a)][_0x5639eb(0x512)][_0x5639eb(0x24f)],{'pollCreatorJid':_0x165ff3,'pollMsgId':_0x210717,'pollEncKey':_0x3001eb,'voterJid':_0x2265aa[_0x5639eb(0x28c)][_0x5639eb(0x329)]?this[_0x5639eb(0x584)]['wuid']+'@s.whatsapp.net':_0x2265aa[_0x5639eb(0x28c)]['remoteJid'][_0x5639eb(0x8de)]('g.us')?_0x2265aa[_0x5639eb(0x28c)][_0x5639eb(0x23e)]:_0x2265aa[_0x5639eb(0x28c)]['remoteJid']}),_0x130a57=[],_0x2f7926=_0x520c6e['selectedOptions'][_0x5639eb(0x5b0)](_0x3eae04=>Buffer[_0x5639eb(0x1a3)](_0x3eae04)[_0x5639eb(0x20e)](_0x5639eb(0x1b3)));for(let {optionName:_0x88db4c}of _0x398c59[_0x5639eb(0x509)]?.[_0x5639eb(0x63a)]||_0x398c59['pollCreationMessageV3']?.[_0x5639eb(0x63a)]||_0x398c59['pollCreationMessageV2']?.['options'])_0x2f7926[_0x5639eb(0x639)]((0x0,w[_0x5639eb(0x7f5)])(Buffer[_0x5639eb(0x1a3)](_0x88db4c))[_0x5639eb(0x20e)](_0x5639eb(0x1b3)))>-0x1&&_0x130a57['push'](_0x88db4c);return _0x130a57;}}return null;},this[_0x4295fe(0x31d)]=(_0x2fdfbc,_0x40ca15,_0x1db25f)=>{const _0x596055=_0x4295fe;try{let _0x1660b5=_0x2fdfbc?(0x0,w[_0x596055(0x721)])(_0x2fdfbc)[_0x40ca15]:void 0x0,_0x594258={},_0x18112e=null,_0x312af0=null,_0x4b25d0=null,_0x4367c6=null;_0x40ca15===_0x596055(0x77c)&&_0x1660b5?.[_0x596055(0x59c)]&&(_0x40ca15=(0x0,w['getContentType'])(_0x1660b5[_0x596055(0x59c)]),_0x18112e=_0x2fdfbc[_0x596055(0x77c)]['key']['id'],_0x1660b5=_0x2fdfbc[_0x596055(0x77c)][_0x596055(0x59c)][_0x40ca15]),_0x2fdfbc[_0x40ca15]?.[_0x596055(0x67e)]?.[_0x596055(0x45e)]&&_0x2fdfbc[_0x40ca15]?.[_0x596055(0x67e)]?.[_0x596055(0x646)]&&(_0x312af0=_0x2fdfbc[_0x40ca15][_0x596055(0x67e)]['stanzaId']),_0x2fdfbc['reactionMessage']&&(_0x4b25d0=_0x2fdfbc[_0x596055(0x24a)]['key']['id']);let _0x2d3353;if(_0x1660b5&&typeof _0x1660b5==_0x596055(0x524)&&_0x596055(0x8e0)in _0x1660b5&&({pollCreationMessageKey:_0x2d3353}=_0x1660b5),_0x40ca15===_0x596055(0x509)||_0x40ca15===_0x596055(0x21a)||_0x40ca15===_0x596055(0x416)){let _0x5b1185=_0x1660b5[_0x596055(0x63a)]['map'](_0x199098=>_0x199098[_0x596055(0x2f3)])['join']('|');_0x594258[_0x596055(0x486)]=_0x5b1185;}if(_0x40ca15==='interactiveMessage'){let _0x34d051=_0x1660b5[_0x596055(0x8a7)][_0x596055(0x74a)][_0x596055(0x5b0)](_0x4d99ee=>JSON[_0x596055(0x302)](_0x4d99ee[_0x596055(0x7c6)])[_0x596055(0x86a)])['join']('|');_0x594258['convertedOptions']=_0x34d051;}_0x40ca15===_0x596055(0x77e)&&(_0x594258[_0x596055(0x2c9)]=_0x1660b5?.[_0x596055(0x3f5)]?.[_0x596055(0x5f8)]);let _0x4374b5='';if(_0x1660b5&&(_0x4374b5+=_0x1660b5[_0x596055(0x76f)]?_0x1660b5['name']:'',_0x4374b5+=_0x1660b5[_0x596055(0x49d)]?'\x20'+_0x1660b5[_0x596055(0x49d)]:'',_0x4374b5+=_0x1660b5[_0x596055(0x682)]?'\x20'+_0x1660b5[_0x596055(0x682)]:'',_0x4374b5+=_0x1660b5['displayName']?'\x20'+_0x1660b5[_0x596055(0x58b)]:'',_0x40ca15!=='interactiveResponseMessage'&&(_0x4374b5+=_0x1660b5['body']?.[_0x596055(0x439)]?'\x20'+_0x1660b5[_0x596055(0x32e)]['text']:''),_0x4374b5+=_0x1660b5?.[_0x596055(0x6a9)]?.[_0x596055(0x439)]?'\x20'+_0x1660b5?.[_0x596055(0x6a9)]?.[_0x596055(0x439)]:''),_0x40ca15===_0x596055(0x5b6)){_0x4374b5=(_0x1660b5['title']||'')+'\x0a'+(_0x1660b5['description']||'')+'\x0a'+(_0x1660b5['footerText']||'');let _0x40337a=this[_0x596055(0x574)](_0x1660b5['sections']);_0x594258['convertedOptions']=_0x40337a;}if(_0x40ca15===_0x596055(0x77e)&&(_0x1db25f=_0x1660b5[_0x596055(0x434)],_0x4367c6=_0x1660b5?.['singleSelectReply']?.[_0x596055(0x5f8)]),_0x40ca15===_0x596055(0x413)){let _0x383e31=_0x1660b5?.[_0x596055(0x41f)];_0x383e31&&_0x383e31['name']===_0x596055(0x82d)&&(_0x4367c6=JSON[_0x596055(0x302)](_0x383e31['paramsJson'])['id']),_0x1db25f=_0x1660b5?.[_0x596055(0x32e)]?.[_0x596055(0x439)];}if(_0x40ca15==='templateButtonReplyMessage'&&(_0x1db25f=_0x1660b5?.[_0x596055(0x49b)],_0x4367c6=_0x1660b5?.[_0x596055(0x5db)]),_0x40ca15===_0x596055(0x85e)&&(_0x1db25f=_0x1660b5?.[_0x596055(0x49b)],_0x4367c6=_0x1660b5?.[_0x596055(0x56c)]),_0x1660b5&&_0x1660b5[_0x596055(0x5b1)]){let _0x1c0110=this['formatVCard'](JSON['stringify'](_0x1660b5['vcard'],null,0x2));_0x4374b5=_0x4374b5+'\x0a'+_0x1c0110;}if(_0x1660b5){let {selectedButtonId:_0x52b7ed,nativeFlowResponseMessage:_0x20a7af,selectedId:_0x2131f3,selectedDisplayText:_0x4c69e9,selectedIndex:_0x594ad7,body:_0x348cb5,nativeFlowMessage:_0x22ccfa,singleSelectReply:_0x3c2e82,sections:_0x57c8b4,listType:_0x45062e,displayName:_0x4fbea5,vcard:_0x3dcced,contactVcard:_0x26cc4e,name:_0x4d0a5c,caption:_0x57c59e,conversation:_0x20651a,pollCreationMessageKey:_0x1d7445,footerText:_0x5bf5cf,contentText:_0x4f7f85,pageCount:_0xdd9b25,headerType:_0x146f22,isAvatar:_0x5c0ab5,isAnimated:_0x548236,fallbackLc:_0x1a4a54,fallbackLg:_0x484131,namespace:_0x545353,elementName:_0x1c5d4b,localizableParams:_0x36b966,viewOnce:_0x4277b0,height:_0x877a06,width:_0x227364,key:_0x5dd4d8,firstScanLength:_0x1e594c,firstScanSidecar:_0x41f15f,gifPlayback:_0x4c99ce,gifAttribution:_0x4399fd,midQualityFileSha256:_0x5090d1,scansSidecar:_0x4d18a6,streamingSidecar:_0x3cb4ca,thumbnailHeight:_0x427b72,thumbnailWidth:_0x5e7df1,thumbnailEncSha256:_0x20b9a6,thumbnailDirectPath:_0x3069a9,canonicalUrl:_0x4e86ae,matchedText:_0x111028,previewType:_0x3f3b03,thumbnailSha256:_0x1d0951,deviceListMetadataVersion:_0x258e4a,inviteLinkGroupTypeV2:_0x43f92c,interactiveAnnotations:_0x19f47d,scanLengths:_0x36bccd,jpegThumbnail:_0x37a29c,url:_0x8fe5e4,mediaKeyTimestamp:_0x1ae1d7,waveform:_0x542b7e,stickerSentTs:_0x57496f,firstFrameLength:_0x47d4a4,fileEncSha256:_0x5ca03c,contextInfo:_0x1ee938,firstFrameSidecar:_0xa9bffc,directPath:_0x43f7c9,fileSha256:_0x2896a7,mediaKey:_0x1049fc,senderTimestampMs:_0x5ea6ea,..._0x1f59ef}=_0x1660b5;(_0x40ca15===_0x596055(0x5b6)||_0x40ca15===_0x596055(0x77e))&&(delete _0x1f59ef[_0x596055(0x434)],delete _0x1f59ef['description']),typeof _0x1660b5=='string'?_0x594258={'text':_0x1660b5,'type':_0x40ca15||_0x596055(0x682),..._0x18112e&&{'edited':_0x18112e},..._0x312af0&&{'quoted':_0x312af0},..._0x4b25d0&&{'reaction':_0x4b25d0}}:_0x594258={'text':_0x4374b5,..._0x1f59ef,..._0x40ca15==='pollUpdateMessage'?{'poll_id':_0x1660b5['pollCreationMessageKey']['id'],'quoted':_0x1660b5[_0x596055(0x8e0)]['id'],'vote':_0x1db25f}:{},..._0x40ca15==='listResponseMessage'?{'buttonOrList_id':_0x4367c6,'vote':_0x1db25f}:{},..._0x40ca15===_0x596055(0x413)?{'buttonOrList_id':_0x4367c6,'vote':_0x1db25f}:{},..._0x40ca15===_0x596055(0x314)?{'buttonOrList_id':_0x4367c6,'vote':_0x1db25f}:{},..._0x40ca15===_0x596055(0x85e)?{'buttonOrList_id':_0x4367c6,'vote':_0x1db25f}:{},'type':_0x40ca15,..._0x18112e&&{'edited':_0x18112e},..._0x312af0&&{'quoted':_0x312af0},..._0x4b25d0&&{'reaction':_0x4b25d0},...(_0x40ca15===_0x596055(0x509)||_0x40ca15==='pollCreationMessageV2'||_0x40ca15===_0x596055(0x416)||_0x40ca15===_0x596055(0x5b6)||_0x40ca15===_0x596055(0x50a))&&{'convertedOptions':_0x594258['convertedOptions']}};}return{'messageType':_0x40ca15,'messageContent':_0x1660b5,'message_normalized':_0x594258};}catch(_0x26b5d6){return this[_0x596055(0x5e7)][_0x596055(0x830)](_0x596055(0x5fd)+_0x26b5d6),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this[_0x4295fe(0x809)]=[],(this['cleanStore'](),this['initializeQueue'](),this[_0x4295fe(0x584)]['HistoryProcessed']=!0x0,this[_0x4295fe(0x584)]['qrcode']={'count':0x0},this[_0x4295fe(0x584)][_0x4295fe(0x46f)]={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}['addToProcessedMessages'](_0x5cf461,_0x305e22){const _0x2115bf=a0_0xf2a334;this[_0x2115bf(0x262)][_0x5cf461]||(this[_0x2115bf(0x262)][_0x5cf461]=new Set()),this[_0x2115bf(0x262)][_0x5cf461][_0x2115bf(0x1c0)](_0x305e22),setTimeout(()=>this['processedMessagesCache'][_0x5cf461]['delete'](_0x305e22),0x2710);}['isMessageProcessed'](_0x57e440,_0x1d254f){const _0x5900e1=a0_0xf2a334;return this[_0x5900e1(0x262)][_0x57e440]?.[_0x5900e1(0x711)](_0x1d254f)??!0x1;}set[a0_0xf2a334(0x29c)](_0x48642f){const _0x17d934=a0_0xf2a334;if(!_0x48642f){this[_0x17d934(0x584)][_0x17d934(0x76f)]=(0x0,Ti['v4'])();return;}this[_0x17d934(0x584)][_0x17d934(0x76f)]=_0x48642f,this[_0x17d934(0x467)](_0x17d934(0x4e9),{'instance':this[_0x17d934(0x584)][_0x17d934(0x76f)],'status':_0x17d934(0x7f0)});}get['instanceName'](){const _0x289aa4=a0_0xf2a334;return this[_0x289aa4(0x584)][_0x289aa4(0x76f)];}get[a0_0xf2a334(0x7a3)](){const _0x1a8741=a0_0xf2a334;return this[_0x1a8741(0x584)][_0x1a8741(0x7a3)];}async[a0_0xf2a334(0x62b)](){const _0x15c706=a0_0xf2a334;let _0x27d992=this[_0x15c706(0x90d)][_0x15c706(0x8a4)]?.[_0x15c706(0x76f)]??this[_0x15c706(0x90d)]['user']?.['verifiedName'];if(!_0x27d992){if(this['configService'][_0x15c706(0x4c6)](_0x15c706(0x183))[_0x15c706(0x6f6)]){let _0x584bb1=await T[_0x15c706(0x75d)]()['db'](this[_0x15c706(0x566)]['get'](_0x15c706(0x183))[_0x15c706(0x174)][_0x15c706(0x52a)]+_0x15c706(0x4d7))[_0x15c706(0x418)](this[_0x15c706(0x29c)])[_0x15c706(0x18a)]({'_id':_0x15c706(0x345)});if(_0x584bb1){let _0x4ad38e=JSON[_0x15c706(0x302)](JSON[_0x15c706(0x34b)](_0x584bb1),w[_0x15c706(0x448)][_0x15c706(0x4c9)]);_0x27d992=_0x4ad38e['me']?.['name']||_0x4ad38e['me']?.['verifiedName'];}}else{if((0x0,Fe[_0x15c706(0x2ec)])((0x0,j[_0x15c706(0x666)])(be,this['instanceName'],_0x15c706(0x4fc)))){let _0x59f8a6=JSON['parse']((0x0,Fe['readFileSync'])((0x0,j[_0x15c706(0x666)])(be,this[_0x15c706(0x29c)],_0x15c706(0x4fc)),{'encoding':_0x15c706(0x6cd)}));_0x27d992=_0x59f8a6['me']?.[_0x15c706(0x76f)]||_0x59f8a6['me']?.[_0x15c706(0x4c8)];}}}return _0x27d992;}get[a0_0xf2a334(0x85a)](){const _0x1ecf58=a0_0xf2a334;return this[_0x1ecf58(0x584)][_0x1ecf58(0x85a)];}async[a0_0xf2a334(0x40b)](){const _0x5f038e=a0_0xf2a334;let _0x58c051=this[_0x5f038e(0x584)]['wuid']+_0x5f038e(0x765);try{await this[_0x5f038e(0x90d)][_0x5f038e(0x2d8)](_0x58c051)?this[_0x5f038e(0x584)][_0x5f038e(0x769)]=!0x0:this[_0x5f038e(0x584)][_0x5f038e(0x769)]=!0x1;}catch{this[_0x5f038e(0x584)][_0x5f038e(0x769)]=!0x1;}return this[_0x5f038e(0x5e7)][_0x5f038e(0x5b4)](this[_0x5f038e(0x29c)]+'\x20('+this[_0x5f038e(0x584)][_0x5f038e(0x7a3)]+'):\x20Instancia\x20isBusiness:\x20'+this['instance'][_0x5f038e(0x769)]),this[_0x5f038e(0x584)][_0x5f038e(0x769)];}get['qrCode'](){const _0x1a1179=a0_0xf2a334;return this[_0x1a1179(0x584)][_0x1a1179(0x35d)]=!0x1,this[_0x1a1179(0x584)][_0x1a1179(0x7a2)]?.[_0x1a1179(0x60e)]?{'pairingCode':this[_0x1a1179(0x584)]['qrcode']?.[_0x1a1179(0x60e)]}:{'code':this[_0x1a1179(0x584)][_0x1a1179(0x7a2)]?.[_0x1a1179(0x6fb)],'base64':this[_0x1a1179(0x584)][_0x1a1179(0x7a2)]?.[_0x1a1179(0x201)]};}async['loadWebhook'](){const _0xad14b2=a0_0xf2a334;let _0x4d927a=await this[_0xad14b2(0x677)]['webhook'][_0xad14b2(0x556)](this[_0xad14b2(0x29c)]);this['localWebhook'][_0xad14b2(0x2b4)]=_0x4d927a?.[_0xad14b2(0x2b4)],this[_0xad14b2(0x1bb)][_0xad14b2(0x3f8)]=_0x4d927a?.[_0xad14b2(0x3f8)],this[_0xad14b2(0x1bb)][_0xad14b2(0x4f3)]=_0x4d927a?.[_0xad14b2(0x4f3)],this[_0xad14b2(0x1bb)][_0xad14b2(0x867)]=_0x4d927a?.[_0xad14b2(0x867)],this[_0xad14b2(0x1bb)]['QRCODE_UPDATED']=_0x4d927a?.[_0xad14b2(0x3b1)],this[_0xad14b2(0x1bb)]['SEND_MESSAGE']=_0x4d927a?.[_0xad14b2(0x70f)],this[_0xad14b2(0x1bb)][_0xad14b2(0x184)]=_0x4d927a?.[_0xad14b2(0x184)],this[_0xad14b2(0x1bb)][_0xad14b2(0x49a)]=_0x4d927a?.[_0xad14b2(0x49a)],this['localWebhook'][_0xad14b2(0x1a1)]=_0x4d927a?.['GROUPS_UPSERT'],this[_0xad14b2(0x1bb)][_0xad14b2(0x3cb)]=_0x4d927a?.[_0xad14b2(0x3cb)],this[_0xad14b2(0x1bb)][_0xad14b2(0x8c2)]=_0x4d927a?.[_0xad14b2(0x8c2)],this[_0xad14b2(0x1bb)][_0xad14b2(0x82f)]=_0x4d927a?.[_0xad14b2(0x82f)],this[_0xad14b2(0x1bb)][_0xad14b2(0x8be)]=_0x4d927a?.[_0xad14b2(0x8be)],this[_0xad14b2(0x1bb)]['CHATS_UPDATE']=_0x4d927a?.[_0xad14b2(0x2db)],this[_0xad14b2(0x1bb)][_0xad14b2(0x77d)]=_0x4d927a?.[_0xad14b2(0x77d)],this[_0xad14b2(0x1bb)]['CONTACTS_SET']=_0x4d927a?.[_0xad14b2(0x6be)],this['localWebhook']['CONTACTS_UPSERT']=_0x4d927a?.[_0xad14b2(0x7a6)],this[_0xad14b2(0x1bb)][_0xad14b2(0x7ca)]=_0x4d927a?.[_0xad14b2(0x7ca)],this[_0xad14b2(0x1bb)]['PRESENCE_UPDATE']=_0x4d927a?.[_0xad14b2(0x611)],this[_0xad14b2(0x1bb)][_0xad14b2(0x4dd)]=_0x4d927a?.['MESSAGES_SET'],this[_0xad14b2(0x1bb)][_0xad14b2(0x83d)]=_0x4d927a?.[_0xad14b2(0x83d)],this['localWebhook'][_0xad14b2(0x6e4)]=_0x4d927a?.['groups_ignore'];}async['setWebhook'](_0x5e98b7){const _0x2c2db2=a0_0xf2a334;let _0x1cd253=['_id',_0x2c2db2(0x2b4),_0x2c2db2(0x3f8),_0x2c2db2(0x4f3),_0x2c2db2(0x867),_0x2c2db2(0x3b1),_0x2c2db2(0x49a),_0x2c2db2(0x184),_0x2c2db2(0x70f),_0x2c2db2(0x1a1),_0x2c2db2(0x3cb),_0x2c2db2(0x8c2),'CHATS_SET','CHATS_UPSERT','CHATS_UPDATE',_0x2c2db2(0x77d),'CONTACTS_SET',_0x2c2db2(0x7a6),_0x2c2db2(0x7ca),_0x2c2db2(0x611),_0x2c2db2(0x4dd),_0x2c2db2(0x83d),_0x2c2db2(0x6e4)],_0x44f82a={};return _0x1cd253[_0x2c2db2(0x3b5)](_0x548c0d=>{_0x5e98b7[_0x548c0d]!==void 0x0&&(_0x44f82a[_0x548c0d]=_0x5e98b7[_0x548c0d]);}),_0x44f82a['url']&&(_0x44f82a[_0x2c2db2(0x2b4)]=_0x44f82a['url'][_0x2c2db2(0x66c)]()),await this['repository'][_0x2c2db2(0x3a6)][_0x2c2db2(0x2d0)](_0x44f82a,this['instanceName']),Object[_0x2c2db2(0x58a)](this[_0x2c2db2(0x1bb)],_0x44f82a),await this[_0x2c2db2(0x677)][_0x2c2db2(0x3a6)]['find'](this[_0x2c2db2(0x29c)]);}async['findWebhook'](){const _0x3f046b=a0_0xf2a334;return await this[_0x3f046b(0x677)][_0x3f046b(0x3a6)][_0x3f046b(0x556)](this[_0x3f046b(0x29c)]);}async[a0_0xf2a334(0x467)](_0x4a417c,_0x54716f){const _0x4a2c4a=a0_0xf2a334;let _0x332e6d=_0x4a417c[_0x4a2c4a(0x6b0)](/[\.-]/gm,'_')['toUpperCase'](),_0x408e01=this['localWebhook']['enabled']&&(0x0,J[_0x4a2c4a(0x79d)])(this['localWebhook'][_0x4a2c4a(0x2b4)])?this[_0x4a2c4a(0x1bb)][_0x4a2c4a(0x2b4)]+(this[_0x4a2c4a(0x1bb)][_0x4a2c4a(0x4f3)]?this[_0x4a2c4a(0x369)][_0x4a417c]:''):null,_0x192e87=this[_0x4a2c4a(0x1bb)][_0x332e6d],_0x23cffd=de&&de['enabled']&&(0x0,J[_0x4a2c4a(0x79d)])(de['url'])?de[_0x4a2c4a(0x2b4)]+(de[_0x4a2c4a(0x4f3)]?this['webhookMap'][_0x4a417c]:''):null,_0x1da98a=de?de[_0x332e6d]:null;if(_0x192e87&&_0x408e01)try{await K['default'][_0x4a2c4a(0x2d0)]({'baseURL':_0x408e01})[_0x4a2c4a(0x1a4)]('',{'event':_0x4a417c,'instance':this[_0x4a2c4a(0x584)]['name'],'apikey':this[_0x4a2c4a(0x584)]['apikey'],'data':_0x54716f}),this['logger'][_0x4a2c4a(0x6b2)](this['instanceName']+'\x20('+this[_0x4a2c4a(0x584)]['wuid']+'):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0x4a417c+':\x20'+_0x408e01);}catch{this[_0x4a2c4a(0x5e7)][_0x4a2c4a(0x830)](this[_0x4a2c4a(0x29c)]+'\x20('+this[_0x4a2c4a(0x584)]['wuid']+_0x4a2c4a(0x298)+_0x4a417c+':\x20'+_0x408e01);}if(_0x1da98a&&_0x23cffd)try{await K[_0x4a2c4a(0x59e)][_0x4a2c4a(0x2d0)]({'baseURL':_0x23cffd})['post']('',{'event':_0x4a417c,'instance':this[_0x4a2c4a(0x584)][_0x4a2c4a(0x76f)],'apikey':this[_0x4a2c4a(0x584)][_0x4a2c4a(0x1b8)],'data':_0x54716f}),this[_0x4a2c4a(0x5e7)][_0x4a2c4a(0x6b2)](this[_0x4a2c4a(0x29c)]+'\x20('+this[_0x4a2c4a(0x584)][_0x4a2c4a(0x7a3)]+'):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20'+_0x4a417c+':\x20'+_0x23cffd);}catch{this[_0x4a2c4a(0x5e7)][_0x4a2c4a(0x830)](this['instanceName']+'\x20('+this['instance'][_0x4a2c4a(0x7a3)]+_0x4a2c4a(0x6e7)+_0x4a417c+':\x20'+_0x23cffd);}}async[a0_0xf2a334(0x7c5)]({qr:_0x357806,connection:_0x487785,lastDisconnect:_0x1b8ee1}){const _0x5bb39d=a0_0xf2a334;if(_0x357806){if(this[_0x5bb39d(0x584)]['qrcode']['count']===Lo)return this[_0x5bb39d(0x467)](_0x5bb39d(0x7dd),{'message':_0x5bb39d(0x70e),'statusCode':w[_0x5bb39d(0x3a9)][_0x5bb39d(0x217)]}),this[_0x5bb39d(0x833)]={'state':'refused','statusReason':w['DisconnectReason'][_0x5bb39d(0x466)]},this[_0x5bb39d(0x467)]('connection.update',{'instance':this[_0x5bb39d(0x584)]['name'],...this[_0x5bb39d(0x833)]}),this['sendDataWebhook'](_0x5bb39d(0x4e9),{'instance':this[_0x5bb39d(0x584)]['name'],'status':_0x5bb39d(0x864)}),this[_0x5bb39d(0x677)]['auth'][_0x5bb39d(0x44e)](this['instance'][_0x5bb39d(0x76f)]),this['endSession']=!0x0,this[_0x5bb39d(0x7bb)][_0x5bb39d(0x261)]('no.connection',this[_0x5bb39d(0x584)][_0x5bb39d(0x76f)]);this['instance'][_0x5bb39d(0x7a2)][_0x5bb39d(0x361)]++;let _0x413260={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':'#ffffff','dark':'#000000'}};Ii['default'][_0x5bb39d(0x40c)](_0x357806,_0x413260,(_0x419f3b,_0x34753c)=>{const _0x3d2ba4=_0x5bb39d;if(_0x419f3b){this[_0x3d2ba4(0x5e7)][_0x3d2ba4(0x830)](this[_0x3d2ba4(0x29c)]+'\x20('+this[_0x3d2ba4(0x584)]['wuid']+_0x3d2ba4(0x74f)+(_0x419f3b instanceof Error?_0x419f3b[_0x3d2ba4(0x80a)]:JSON[_0x3d2ba4(0x34b)](_0x419f3b,null,0x2)));return;}this[_0x3d2ba4(0x584)][_0x3d2ba4(0x7a2)][_0x3d2ba4(0x201)]=_0x34753c,this[_0x3d2ba4(0x584)]['qrcode'][_0x3d2ba4(0x6fb)]=_0x357806,!this[_0x3d2ba4(0x50c)]&&this[_0x3d2ba4(0x467)](_0x3d2ba4(0x7dd),{'qrcode':{'instance':this['instance'][_0x3d2ba4(0x76f)],'pairingCode':this[_0x3d2ba4(0x584)]['qrcode'][_0x3d2ba4(0x60e)],'code':_0x357806,'base64':_0x34753c}});}),this[_0x5bb39d(0x50c)]?this[_0x5bb39d(0x584)]['qrcode'][_0x5bb39d(0x60e)]||(await(0x0,w['delay'])(0x7d0),this[_0x5bb39d(0x584)][_0x5bb39d(0x7a2)][_0x5bb39d(0x60e)]=await this[_0x5bb39d(0x90d)][_0x5bb39d(0x4e1)](this[_0x5bb39d(0x50c)])):this[_0x5bb39d(0x584)][_0x5bb39d(0x7a2)]['pairingCode']=null,_i[_0x5bb39d(0x59e)][_0x5bb39d(0x415)](_0x357806,{'small':!0x0},_0x2b4044=>this['logger'][_0x5bb39d(0x6b2)]('\x0a{\x20instance:\x20'+this[_0x5bb39d(0x584)]['name']+',\x20qrcodeCount:\x20'+this[_0x5bb39d(0x584)]['qrcode'][_0x5bb39d(0x361)]+_0x5bb39d(0x5da)+this[_0x5bb39d(0x584)]['qrcode'][_0x5bb39d(0x60e)]+_0x5bb39d(0x25f)+_0x2b4044));}if(_0x487785&&(this['stateConnection']={'state':_0x487785,'statusReason':_0x1b8ee1?.[_0x5bb39d(0x830)]?.[_0x5bb39d(0x4c0)]?.[_0x5bb39d(0x71d)]??0xc8},this[_0x5bb39d(0x467)](_0x5bb39d(0x41a),{'instance':this['instance'][_0x5bb39d(0x76f)],...this[_0x5bb39d(0x833)]})),_0x487785==='close'){if(_0x1b8ee1[_0x5bb39d(0x830)]?.[_0x5bb39d(0x4c0)]?.[_0x5bb39d(0x71d)]!==w[_0x5bb39d(0x3a9)][_0x5bb39d(0x2ad)]&&(this[_0x5bb39d(0x7f9)]<0x21||this[_0x5bb39d(0x584)][_0x5bb39d(0x46f)]['isConnected'])){this[_0x5bb39d(0x7f9)]++,this[_0x5bb39d(0x69c)][_0x5bb39d(0x355)](Date[_0x5bb39d(0x5eb)]()),this[_0x5bb39d(0x69c)]=this['reconnectTimestamps'][_0x5bb39d(0x3c9)](_0x566e99=>Date[_0x5bb39d(0x5eb)]()-_0x566e99<this[_0x5bb39d(0x6ac)]);let _0x5e6809=this[_0x5bb39d(0x7f9)]<=0x1?0x0:Math[_0x5bb39d(0x338)](Math[_0x5bb39d(0x62e)](0x2,this['reconnectAttempts']-0x1)*0x3e8,0x493e0);console['log'](this[_0x5bb39d(0x29c)]+_0x5bb39d(0x3c5)+this[_0x5bb39d(0x7f9)]+_0x5bb39d(0x5ea)+_0x5e6809/0x3e8+_0x5bb39d(0x731)),await new Promise(_0x22e146=>setTimeout(_0x22e146,_0x5e6809)),console['log'](_0x5bb39d(0x703)),await this['connectToWhatsapp']();}else{this['sendDataWebhook'](_0x5bb39d(0x4e9),{'instance':this[_0x5bb39d(0x584)][_0x5bb39d(0x76f)],'status':_0x5bb39d(0x864)}),this[_0x5bb39d(0x584)][_0x5bb39d(0x46f)][_0x5bb39d(0x30f)]=!0x1,this[_0x5bb39d(0x677)][_0x5bb39d(0x3a6)]['delete'](this[_0x5bb39d(0x29c)]),this[_0x5bb39d(0x677)][_0x5bb39d(0x1a5)][_0x5bb39d(0x2d0)]({'owner':'','online':!0x1,'lastDisconnect':Date['now']()},this[_0x5bb39d(0x584)][_0x5bb39d(0x76f)]);try{this[_0x5bb39d(0x5e7)][_0x5bb39d(0x6a3)](this['instanceName']+'\x20('+this[_0x5bb39d(0x584)][_0x5bb39d(0x7a3)]+_0x5bb39d(0x4dc));let _0x2960d6=await this['repository'][_0x5bb39d(0x80a)][_0x5bb39d(0x740)](this[_0x5bb39d(0x584)][_0x5bb39d(0x7a3)]);_0x2960d6[_0x5bb39d(0x3e6)]?this[_0x5bb39d(0x5e7)][_0x5bb39d(0x6a3)](this[_0x5bb39d(0x29c)]+'\x20('+this['instance'][_0x5bb39d(0x7a3)]+'):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.'):this[_0x5bb39d(0x5e7)]['error'](_0x5bb39d(0x79b)+_0x2960d6[_0x5bb39d(0x830)]);}catch(_0x15919c){this['logger'][_0x5bb39d(0x830)](_0x5bb39d(0x6f1)+_0x15919c['message']);}this['instance']['ScheduleMessage'][_0x5bb39d(0x884)]!==null&&(this[_0x5bb39d(0x5e7)][_0x5bb39d(0x6a3)](this[_0x5bb39d(0x29c)]+'\x20('+this['instance']['wuid']+'):\x20Limpando\x20delayMessage'),clearInterval(this[_0x5bb39d(0x584)][_0x5bb39d(0x46f)][_0x5bb39d(0x884)]),this[_0x5bb39d(0x584)][_0x5bb39d(0x46f)][_0x5bb39d(0x884)]=null),this[_0x5bb39d(0x5e7)]['verbose'](this[_0x5bb39d(0x29c)]+'\x20('+this[_0x5bb39d(0x584)][_0x5bb39d(0x7a3)]+_0x5bb39d(0x2c0)),this['AutomateSystem']=null,this[_0x5bb39d(0x7bb)][_0x5bb39d(0x261)](_0x5bb39d(0x18b),this[_0x5bb39d(0x584)][_0x5bb39d(0x76f)],_0x5bb39d(0x8cb)),this[_0x5bb39d(0x90d)]?.['ws']?.['close'](),this[_0x5bb39d(0x90d)][_0x5bb39d(0x81f)](new Error('Close\x20connection'));}}if(_0x487785==='open'){this[_0x5bb39d(0x5e7)][_0x5bb39d(0x25b)](this['instanceName']+'\x20('+this['instance'][_0x5bb39d(0x7a3)]+'):\x20this.client.authState.creds?.myAppStateKeyId:\x20'+this['client'][_0x5bb39d(0x892)][_0x5bb39d(0x345)]?.[_0x5bb39d(0x390)]),this[_0x5bb39d(0x90d)][_0x5bb39d(0x892)][_0x5bb39d(0x345)]?.['myAppStateKeyId']||(this['logger']['warn'](this[_0x5bb39d(0x29c)]+'\x20('+this[_0x5bb39d(0x584)][_0x5bb39d(0x7a3)]+'):\x20ev.flush\x20realizado'),this['client']['ev'][_0x5bb39d(0x4ff)]()),this['resetReconnectionVariables'],this['instance']['wuid']=this[_0x5bb39d(0x90d)][_0x5bb39d(0x8a4)]['id'][_0x5bb39d(0x6b0)](/:\d+/,'')['replace'](_0x5bb39d(0x765),''),this[_0x5bb39d(0x584)][_0x5bb39d(0x85a)]=(await this[_0x5bb39d(0x4e4)](this[_0x5bb39d(0x584)][_0x5bb39d(0x7a3)]+_0x5bb39d(0x765)))[_0x5bb39d(0x85a)],this[_0x5bb39d(0x677)][_0x5bb39d(0x1a5)][_0x5bb39d(0x2d0)]({'online':!0x0,'owner':this[_0x5bb39d(0x584)]['wuid'],'lastDisconnect':null},this['instance'][_0x5bb39d(0x76f)]);let _0x154924=_0x5bb39d(0x8e3)+this['instance'][_0x5bb39d(0x7a3)],_0x375b63=0x28,_0x356a27=Math[_0x5bb39d(0x7b4)]((_0x375b63-_0x154924[_0x5bb39d(0x250)])/0x2),_0x35fb36='\x20'[_0x5bb39d(0x845)](_0x356a27),_0x1914be=_0x5bb39d(0x2d6),_0x27153c='Instância:\x20'+this[_0x5bb39d(0x584)][_0x5bb39d(0x76f)],_0x852335=(''+_0x35fb36+_0x154924+_0x35fb36)[_0x5bb39d(0x6c1)](_0x375b63,'\x20'),_0x50d742=(''+_0x35fb36+_0x1914be+_0x35fb36)['padEnd'](_0x375b63,'\x20'),_0x322caa=(''+_0x35fb36+_0x27153c+_0x35fb36)['padEnd'](_0x375b63,'\x20'),_0x3a5483=Math['max'](_0x852335['length'],_0x50d742['length'],_0x322caa['length']),_0x32c63d=_0x852335[_0x5bb39d(0x6c1)](_0x3a5483,'\x20'),_0x5f26e5=_0x50d742[_0x5bb39d(0x6c1)](_0x3a5483,'\x20'),_0x47ce40=_0x322caa[_0x5bb39d(0x6c1)](_0x3a5483,'\x20');this['logger'][_0x5bb39d(0x5b4)](('\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌'+'─'[_0x5bb39d(0x845)](_0x3a5483)+_0x5bb39d(0x2e4)+_0x5f26e5+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0x47ce40+_0x5bb39d(0x4bf)+_0x32c63d+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└'+'─'[_0x5bb39d(0x845)](_0x3a5483)+'┘')[_0x5bb39d(0x6b0)](/^ +/gm,'\x20\x20')),this[_0x5bb39d(0x3be)](),this[_0x5bb39d(0x584)]['ScheduleMessage'][_0x5bb39d(0x30f)]=!0x0;}}[a0_0xf2a334(0x4df)](){const _0x50fb9f=a0_0xf2a334;this[_0x50fb9f(0x7f9)]=0x0,this[_0x50fb9f(0x69c)]=[];}async[a0_0xf2a334(0x5ad)](_0x8b6286,_0x2101c1=!0x1){const _0x142a52=a0_0xf2a334;try{let _0x127daa=await this[_0x142a52(0x677)]['message']['find']({'where':{'_id':_0x8b6286['id']}},this[_0x142a52(0x584)][_0x142a52(0x7a3)]);return _0x2101c1?_0x127daa[0x0]:_0x127daa[0x0]['message'];}catch{return{'conversation':''};}}['cleanStore'](){const _0x50cd46=a0_0xf2a334;let _0x3aea7e=this[_0x50cd46(0x566)][_0x50cd46(0x4c6)](_0x50cd46(0x7fc)),_0x3ee852=this[_0x50cd46(0x566)]['get'](_0x50cd46(0x183));_0x3aea7e?.[_0x50cd46(0x33b)]&&!_0x3ee852[_0x50cd46(0x6f6)]&&setInterval(()=>{const _0x193de5=_0x50cd46;try{for(let [_0x463c81,_0x13634f]of Object[_0x193de5(0x527)](_0x3aea7e))_0x13634f===!0x0&&(0x0,Ue['execSync'])(_0x193de5(0x713)+(0x0,j[_0x193de5(0x666)])(this['storePath'],_0x463c81[_0x193de5(0x3d0)](),this[_0x193de5(0x584)][_0x193de5(0x7a3)])+'/*.json');}catch{}},(_0x3aea7e?.[_0x50cd46(0x33b)]??0xe10)*0x3e8);}async['defineAuthState'](){const _0x12726d=a0_0xf2a334;let _0x13b717=this[_0x12726d(0x566)]['get'](_0x12726d(0x183)),_0x113eb6=this[_0x12726d(0x566)]['get'](_0x12726d(0x6e3));return _0x113eb6?.['ENABLED']?await Os(_0x113eb6,this[_0x12726d(0x584)][_0x12726d(0x76f)]):_0x13b717[_0x12726d(0x6f6)]?await _s(this[_0x12726d(0x584)][_0x12726d(0x76f)]):await(0x0,w[_0x12726d(0x267)])((0x0,j[_0x12726d(0x666)])(be,this[_0x12726d(0x584)]['name']));}async[a0_0xf2a334(0x3be)](){const _0x253f5c=a0_0xf2a334;let _0x249de0=()=>Math[_0x253f5c(0x7b4)](Math[_0x253f5c(0x1cf)]()*0x4e21)+0x7d0,_0x18fb4a=async()=>{const _0x24e0e5=_0x253f5c;if(!this['instance'][_0x24e0e5(0x46f)][_0x24e0e5(0x30f)]){this['logger'][_0x24e0e5(0x6a3)](this[_0x24e0e5(0x29c)]+'\x20('+this['instance'][_0x24e0e5(0x7a3)]+'):Desconectado,\x20parando\x20execução.'),this['isRunning']=!0x1;return;}if(this['instance'][_0x24e0e5(0x7a3)]&&this[_0x24e0e5(0x580)]&&this['instance'][_0x24e0e5(0x46f)][_0x24e0e5(0x884)]!==null&&this[_0x24e0e5(0x584)][_0x24e0e5(0x46f)]['delayMessage']!==void 0x0){let _0x1d9645=Math['round'](this['instance']['ScheduleMessage'][_0x24e0e5(0x884)]/0xea60);this[_0x24e0e5(0x5e7)][_0x24e0e5(0x6a3)](this[_0x24e0e5(0x29c)]+'\x20('+this[_0x24e0e5(0x584)][_0x24e0e5(0x7a3)]+'):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20'+_0x1d9645+'\x20minutos\x20verificará\x20novas\x20mensagens'),this['isRunning']=!0x1;return;}else this[_0x24e0e5(0x584)][_0x24e0e5(0x7a3)]&&(this[_0x24e0e5(0x5e7)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x24e0e5(0x826)),this[_0x24e0e5(0x580)]||(await this[_0x24e0e5(0x3f2)](),this['findRealGroups'](),this[_0x24e0e5(0x6ff)]()),(this[_0x24e0e5(0x584)][_0x24e0e5(0x46f)]['delayMessage']===null||this[_0x24e0e5(0x584)][_0x24e0e5(0x46f)]['delayMessage']===void 0x0)&&await this[_0x24e0e5(0x5e3)]());if(this['isRunning']){let _0x5ac989=_0x249de0();this['logger']['verbose'](this['instanceName']+_0x24e0e5(0x28e)+_0x5ac989/0x3e8+_0x24e0e5(0x72d)),setTimeout(_0x18fb4a,_0x5ac989);}};if(this['isRunning'])return;this['isRunning']=!0x0;let _0x4e14b2=_0x249de0();setTimeout(_0x18fb4a,_0x4e14b2);}async[a0_0xf2a334(0x6ff)](){const _0x273a96=a0_0xf2a334;let _0x35e9d6=this[_0x273a96(0x584)][_0x273a96(0x7a3)];try{let _0x502909=await this['repository'][_0x273a96(0x1e8)][_0x273a96(0x857)]({'where':{'$or':[{'owner':_0x35e9d6},{'whoCanUse':{'$in':[_0x35e9d6]}},{'shareOwners':{'$in':[_0x35e9d6]}}]}}),_0x51b17f=new Map(this['AutomateSystem'][_0x273a96(0x633)][_0x273a96(0x5b0)](_0xa1fa8b=>[_0xa1fa8b[_0x273a96(0x29b)],_0xa1fa8b])),_0x254d68=_0x502909[_0x273a96(0x5b0)](_0x21092a=>{const _0x103ea5=_0x273a96;let _0x58aed7=_0x51b17f[_0x103ea5(0x4c6)](_0x21092a[_0x103ea5(0x29b)]?.[_0x103ea5(0x20e)]());return{'_id':_0x21092a[_0x103ea5(0x29b)]?.[_0x103ea5(0x20e)](),'name':_0x58aed7?.[_0x103ea5(0x76f)]??_0x21092a[_0x103ea5(0x76f)],'default':_0x58aed7?.['default']??_0x21092a[_0x103ea5(0x59e)]??!0x1,'startCommand':_0x58aed7?.[_0x103ea5(0x872)]??_0x21092a[_0x103ea5(0x8f5)],'minutesToClose':_0x58aed7?.[_0x103ea5(0x20c)]??_0x21092a['minutesToClose']??0xa,'readMessages':_0x58aed7?.[_0x103ea5(0x871)]??_0x21092a[_0x103ea5(0x871)]??!0x1,'testingWith':_0x58aed7?.[_0x103ea5(0x8ce)]??_0x21092a[_0x103ea5(0x8ce)],'canEdit':_0x21092a[_0x103ea5(0x84f)]===_0x35e9d6||(_0x21092a[_0x103ea5(0x88a)]??[])[_0x103ea5(0x343)](_0x35e9d6),'usersCount':(_0x21092a['shareOwners']??[])['length']??0x0};}),_0xe639c9=!0x1;_0x254d68[_0x273a96(0x3b5)](_0x566e6b=>{const _0x1712ed=_0x273a96;_0x566e6b[_0x1712ed(0x59e)]&&(_0xe639c9?_0x566e6b[_0x1712ed(0x59e)]=!0x1:_0xe639c9=!0x0);}),this[_0x273a96(0x580)][_0x273a96(0x633)]=_0x254d68;let _0x382f54={'flows':_0x254d68};return await this[_0x273a96(0x677)][_0x273a96(0x587)]['update'](_0x382f54,_0x35e9d6),this[_0x273a96(0x5e7)]['verbose'](this['instanceName']+'\x20('+_0x35e9d6+_0x273a96(0x213)),_0x254d68[_0x273a96(0x250)];}catch(_0x1f5d6f){return this['logger'][_0x273a96(0x830)](this[_0x273a96(0x29c)]+'\x20('+_0x35e9d6+_0x273a96(0x606)+(_0x1f5d6f instanceof Error?_0x1f5d6f[_0x273a96(0x80a)]:JSON[_0x273a96(0x34b)](_0x1f5d6f,null,0x2))),{'message':_0x273a96(0x718)+(_0x1f5d6f instanceof Error?_0x1f5d6f[_0x273a96(0x80a)]:JSON[_0x273a96(0x34b)](_0x1f5d6f,null,0x2))};}}async[a0_0xf2a334(0x821)](_0x5e8176){const _0x43a473=a0_0xf2a334;try{let _0x2c7a18=await this[_0x43a473(0x677)][_0x43a473(0x584)][_0x43a473(0x18a)]({'where':{'_id':he+'-'+this[_0x43a473(0x29c)]}}),_0x49a258,_0x5a0ea6=!Le[_0x43a473(0x904)]||!Le[_0x43a473(0x693)];console[_0x43a473(0x6b2)]('--------------------------------------'),console[_0x43a473(0x6b2)](_0x43a473(0x8db),Ai),console[_0x43a473(0x6b2)](_0x43a473(0x3ac),this[_0x43a473(0x7f9)]),console[_0x43a473(0x6b2)](_0x43a473(0x6fa)),Ai&&!_0x5a0ea6&&(this[_0x43a473(0x7f9)]<0x4||!this[_0x43a473(0x7f9)]?_0x2c7a18&&_0x2c7a18['ip']?(_0x49a258=_0x2c7a18['ip'],console[_0x43a473(0x6b2)](_0x43a473(0x518)+_0x49a258)):(_0x49a258=await Le[_0x43a473(0x3e9)](he,this[_0x43a473(0x584)]['name']),_0x49a258?(console[_0x43a473(0x6b2)](_0x43a473(0x4f5)+_0x49a258),await(0x0,w[_0x43a473(0x4c5)])(0x7d0)):console[_0x43a473(0x830)](_0x43a473(0x2bf))):this[_0x43a473(0x7f9)]<0x6&&(console[_0x43a473(0x6b2)](_0x43a473(0x89d)),_0x49a258=await Le[_0x43a473(0x3e9)](he,this[_0x43a473(0x584)]['name']),_0x49a258?(console[_0x43a473(0x6b2)](_0x43a473(0x4f5)+_0x49a258),await(0x0,w[_0x43a473(0x4c5)])(0x7d0)):console[_0x43a473(0x830)]('Falha\x20ao\x20recriar\x20IPv6.'))),this[_0x43a473(0x3e8)](),this['instance'][_0x43a473(0x1b8)]=(await this[_0x43a473(0x677)][_0x43a473(0x1a5)][_0x43a473(0x556)](this[_0x43a473(0x584)][_0x43a473(0x76f)]))['apikey'],this[_0x43a473(0x584)]['authState']=await this[_0x43a473(0x751)]();let _0x192ba2=[xi,Us,(0x0,ks['release'])()],_0x1dc2ee={'localAddress':_0x49a258,'auth':{'creds':this['instance'][_0x43a473(0x892)][_0x43a473(0x747)][_0x43a473(0x345)],'keys':(0x0,w[_0x43a473(0x83b)])(this[_0x43a473(0x584)][_0x43a473(0x892)][_0x43a473(0x747)]['keys'],(0x0,Ft['default'])({'level':_0x43a473(0x830)}))},'logger':(0x0,Ft['default'])({'level':_0x43a473(0x830)}),'printQRInTerminal':!0x1,'browser':_0x5e8176?[_0x43a473(0x2f6),Us,(0x0,ks[_0x43a473(0x19d)])()]:_0x192ba2,'version':[0x2,0xbb8,0x3c8d6c7b],'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x52a1e6=>{const _0x12a857=_0x43a473;let _0x5ca0a0=this[_0x12a857(0x1bb)]?.['groups_ignore']&&(0x0,w[_0x12a857(0x506)])(_0x52a1e6);return(0x0,w[_0x12a857(0x589)])(_0x52a1e6)||_0x5ca0a0;},'msgRetryCounterCache':this[_0x43a473(0x710)],'getMessage':async _0x155b9f=>await this[_0x43a473(0x5ad)](_0x155b9f),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x43a473(0x3d6)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x5f81ed){const _0x573304=_0x43a473;return _0x5f81ed[_0x573304(0x20a)]?.[_0x573304(0x80a)]?.[_0x573304(0x5b6)]?.[_0x573304(0x807)]===w[_0x573304(0x7c1)][_0x573304(0x3b7)][_0x573304(0x59d)][_0x573304(0x628)][_0x573304(0x42b)]&&(_0x5f81ed=JSON[_0x573304(0x302)](JSON[_0x573304(0x34b)](_0x5f81ed)),_0x5f81ed['deviceSentMessage'][_0x573304(0x80a)][_0x573304(0x5b6)]['listType']=w['proto'][_0x573304(0x3b7)][_0x573304(0x59d)][_0x573304(0x628)]['SINGLE_SELECT']),_0x5f81ed['listMessage']?.[_0x573304(0x807)]==w[_0x573304(0x7c1)][_0x573304(0x3b7)][_0x573304(0x59d)]['ListType'][_0x573304(0x42b)]&&(_0x5f81ed=JSON[_0x573304(0x302)](JSON[_0x573304(0x34b)](_0x5f81ed)),_0x5f81ed['listMessage'][_0x573304(0x807)]=w[_0x573304(0x7c1)][_0x573304(0x3b7)]['ListMessage'][_0x573304(0x628)][_0x573304(0x344)]),_0x5f81ed;}};return this[_0x43a473(0x5d1)]=!0x1,this[_0x43a473(0x90d)]=(0x0,w[_0x43a473(0x59e)])(_0x1dc2ee),this[_0x43a473(0x565)](),this['phoneNumber']=_0x5e8176,this[_0x43a473(0x90d)];}catch(_0x29d5ac){let _0x4fafa7=_0x43a473(0x604),_0x263bac=_0x29d5ac instanceof Error?_0x29d5ac['message']:typeof _0x29d5ac=='object'?JSON[_0x43a473(0x34b)](_0x29d5ac):_0x29d5ac,_0x4aa002=_0x4fafa7+':\x20'+_0x263bac;throw this[_0x43a473(0x5e7)][_0x43a473(0x830)](this[_0x43a473(0x29c)]+'\x20('+this['instance'][_0x43a473(0x7a3)]+'):\x20'+_0x4aa002),console[_0x43a473(0x830)](_0x43a473(0x8d4),_0x29d5ac),_0x29d5ac instanceof Error&&console[_0x43a473(0x830)]('Stack\x20trace:',_0x29d5ac[_0x43a473(0x4f7)]),new x(_0x4aa002);}}['eventHandler'](){const _0x1217d2=a0_0xf2a334;this[_0x1217d2(0x90d)]['ev'][_0x1217d2(0x452)](_0x5a7136=>{const _0xa216a3=_0x1217d2;if(!this[_0xa216a3(0x5d1)]){let _0x404387=this['configService'][_0xa216a3(0x4c6)](_0xa216a3(0x183));if(_0x5a7136['labels.edit']){let _0x390f64=_0x5a7136[_0xa216a3(0x63e)];this[_0xa216a3(0x681)][_0xa216a3(0x63e)](_0x390f64);}if(_0x5a7136['labels.association']){let _0x1b0b07=_0x5a7136[_0xa216a3(0x78b)];this[_0xa216a3(0x681)][_0xa216a3(0x78b)](_0x1b0b07);}if(_0x5a7136['connection.update']&&this['connectionUpdate'](_0x5a7136[_0xa216a3(0x41a)]),_0x5a7136[_0xa216a3(0x1fc)]&&this[_0xa216a3(0x584)]['authState'][_0xa216a3(0x4a8)](),_0x5a7136[_0xa216a3(0x645)]){let _0x4f8ea8=_0x5a7136[_0xa216a3(0x645)];this[_0xa216a3(0x681)][_0xa216a3(0x645)](_0x4f8ea8,_0x404387);}if(_0x5a7136[_0xa216a3(0x75a)]){let _0x24afe2=_0x5a7136['messages.upsert'];this['messageHandle']['messages.upsert'](_0x24afe2,_0x404387);}if(_0x5a7136[_0xa216a3(0x228)]){let _0x26975b=_0x5a7136[_0xa216a3(0x228)];this[_0xa216a3(0x681)]['messages.update'](_0x26975b,_0x404387);}if(_0x5a7136[_0xa216a3(0x16e)]){let _0x5932a8=_0x5a7136['presence.update'];if(this[_0xa216a3(0x1bb)]?.[_0xa216a3(0x6e4)]&&_0x5932a8['id'][_0xa216a3(0x343)](_0xa216a3(0x701)))return;this[_0xa216a3(0x467)]('presence.update',_0x5932a8);}if(_0x5a7136[_0xa216a3(0x2ca)]){let _0x1293b8=_0x5a7136['groups.upsert'];this[_0xa216a3(0x5ef)][_0xa216a3(0x2ca)](_0x1293b8);}if(_0x5a7136[_0xa216a3(0x5ec)]){let _0x8ce3c9=_0x5a7136[_0xa216a3(0x5ec)];this[_0xa216a3(0x5ef)][_0xa216a3(0x5ec)](_0x8ce3c9);}if(_0x5a7136[_0xa216a3(0x7bf)]){let _0x513906=_0x5a7136[_0xa216a3(0x7bf)];this[_0xa216a3(0x5ef)][_0xa216a3(0x7bf)](_0x513906);}if(_0x5a7136[_0xa216a3(0x2f2)]){let _0x138d9d=_0x5a7136[_0xa216a3(0x2f2)];this[_0xa216a3(0x551)][_0xa216a3(0x2f2)](_0x138d9d,_0x404387);}if(_0x5a7136[_0xa216a3(0x226)]){let _0x31fdc4=_0x5a7136['chats.update'];this[_0xa216a3(0x551)][_0xa216a3(0x226)](_0x31fdc4,_0x404387);}if(_0x5a7136['chats.delete']){let _0x1f39c9=_0x5a7136['chats.delete'];this[_0xa216a3(0x551)]['chats.delete'](_0x1f39c9);}if(_0x5a7136[_0xa216a3(0x32b)]){let _0x1d403d=_0x5a7136[_0xa216a3(0x32b)];this['contactHandle'][_0xa216a3(0x32b)](_0x1d403d,_0x404387);}if(_0x5a7136[_0xa216a3(0x255)]){let _0x247733=_0x5a7136[_0xa216a3(0x255)];this['contactHandle']['contacts.update'](_0x247733,_0x404387);}}});}async[a0_0xf2a334(0x746)](_0x574908,_0x14c8af){const _0x169d2d=a0_0xf2a334;if(_0x14c8af>=0xa){console[_0x169d2d(0x830)](this[_0x169d2d(0x29c)]+'\x20('+this[_0x169d2d(0x584)][_0x169d2d(0x7a3)]+'):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar'),delete Lt[_0x574908[_0x169d2d(0x28c)]['id']];return;}try{console['error'](this[_0x169d2d(0x29c)]+'\x20('+this[_0x169d2d(0x584)][_0x169d2d(0x7a3)]+'):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20'+(_0x14c8af+0x1)),await this['client'][_0x169d2d(0x810)](JSON[_0x169d2d(0x302)](_0x574908[_0x169d2d(0x42e)][0x1],w[_0x169d2d(0x448)][_0x169d2d(0x4c9)])),console['error'](_0x169d2d(0x500));}catch(_0x59ee35){console[_0x169d2d(0x830)](this['instanceName']+'\x20('+this[_0x169d2d(0x584)][_0x169d2d(0x7a3)]+_0x169d2d(0x58d)+_0x59ee35),setTimeout(()=>this[_0x169d2d(0x746)](_0x574908,_0x14c8af+0x1),Math['pow'](0x2,_0x14c8af)*0x3e8);}}async[a0_0xf2a334(0x644)](_0x41d25b){const _0x2feab0=a0_0xf2a334;let _0x4a9175=_0x41d25b[_0x2feab0(0x28c)]['remoteJid'][_0x2feab0(0x8de)](_0x2feab0(0x701)),_0xc6a7eb;if(_0x41d25b[_0x2feab0(0x28c)]['fromMe'])_0xc6a7eb=this[_0x2feab0(0x584)][_0x2feab0(0x85a)];else{let _0x2ccc12=_0x4a9175?_0x41d25b[_0x2feab0(0x28c)]['participant']:_0x41d25b['key']['remoteJid'];_0xc6a7eb=(await this['findAndUpdateCacheContact'](_0x2ccc12,_0x41d25b[_0x2feab0(0x27d)],!0x1))['cachedContact'][_0x2feab0(0x20b)];}_0x41d25b[_0x2feab0(0x4f1)]&&_0x41d25b['messageTimestamp'][_0x2feab0(0x20e)]()[_0x2feab0(0x250)]<0xd&&(_0x41d25b[_0x2feab0(0x4f1)]=_0x41d25b[_0x2feab0(0x4f1)]*0x3e8);let _0x1beb74={'_id':_0x41d25b[_0x2feab0(0x28c)]['id'],'key':_0x41d25b[_0x2feab0(0x28c)],'isGroup':_0x4a9175,'profilePictureUrl':_0xc6a7eb,'pushName':_0x41d25b['pushName'],'message':{'text':_0x2feab0(0x801)},'messageType':'error','message_normalized':{'key':_0x41d25b[_0x2feab0(0x28c)],'pushName':_0x41d25b['pushName'],'messageTimestamp':_0x41d25b[_0x2feab0(0x4f1)],'source':(0x0,w[_0x2feab0(0x76d)])(_0x41d25b[_0x2feab0(0x28c)]['id']),'text':_0x2feab0(0x801)},'messageTimestamp':_0x41d25b['messageTimestamp'],'owner':this[_0x2feab0(0x584)][_0x2feab0(0x7a3)],'source':(0x0,w[_0x2feab0(0x76d)])(_0x41d25b[_0x2feab0(0x28c)]['id'])};this[_0x2feab0(0x5e7)][_0x2feab0(0x830)](this[_0x2feab0(0x29c)]+'\x20('+this['instance'][_0x2feab0(0x7a3)]+_0x2feab0(0x62f)+(_0x1beb74['key']?.[_0x2feab0(0x329)]?_0x2feab0(0x43b):'recebido\x20de')+'\x20['+_0x1beb74[_0x2feab0(0x28c)]?.[_0x2feab0(0x61e)][_0x2feab0(0x6b0)]('@s.whatsapp.net','')+_0x2feab0(0x35f)+_0x1beb74['messageType']+')'),_0x1beb74[_0x2feab0(0x1f0)]?.[_0x2feab0(0x439)]&&this[_0x2feab0(0x5e7)][_0x2feab0(0x830)](_0x41d25b[_0x2feab0(0x28c)]['id']+':\x20'+_0x1beb74[_0x2feab0(0x1f0)]?.[_0x2feab0(0x439)]),await this['repository']['message'][_0x2feab0(0x26f)]([_0x1beb74],this['instance'][_0x2feab0(0x7a3)]),await this['repository'][_0x2feab0(0x79f)][_0x2feab0(0x26f)]([_0x1beb74]),this[_0x2feab0(0x467)](_0x2feab0(0x75a),_0x1beb74),F(this[_0x2feab0(0x29c)],_0x2feab0(0x208),{'message':_0x1beb74});}[a0_0xf2a334(0x1bc)](_0x58bf40){return new Promise(_0x31ffeb=>setTimeout(_0x31ffeb,_0x58bf40));}['formatBRNumber'](_0x205ce7){_0x205ce7=_0x205ce7['replace'](/\D/g,'');let _0x455373=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)['exec'](_0x205ce7);if(_0x455373&&_0x455373[0x1]==='55'){let _0x35e6eb=_0x455373[0x2],_0x3ed507=_0x455373[0x3],_0x1289e8=_0x455373[0x4];if(parseInt(_0x35e6eb)>=0x1f&&_0x3ed507==='9')return _0x455373[0x1]+_0x35e6eb+_0x1289e8;}return _0x205ce7;}[a0_0xf2a334(0x32a)](_0x3546e1){const _0x5665f3=a0_0xf2a334;return _0x3546e1[_0x5665f3(0x343)]('@g.us')||_0x3546e1[_0x5665f3(0x343)]('@s.whatsapp.net')||_0x3546e1[_0x5665f3(0x343)](_0x5665f3(0x497))?_0x3546e1:(_0x3546e1=_0x3546e1?.[_0x5665f3(0x6b0)](/\s/g,'')[_0x5665f3(0x6b0)](/\+/g,'')[_0x5665f3(0x6b0)](/\(/g,'')[_0x5665f3(0x6b0)](/\)/g,'')[_0x5665f3(0x8a0)](/\:/)[0x0][_0x5665f3(0x8a0)]('@')[0x0],_0x3546e1['length']>=0x12?(_0x3546e1=_0x3546e1[_0x5665f3(0x6b0)](/[^\d-]/g,''),_0x3546e1+_0x5665f3(0x701)):(_0x3546e1=_0x3546e1['replace'](/\D/g,''),_0x3546e1+_0x5665f3(0x765)));}async[a0_0xf2a334(0x838)](_0x28b236){const _0x4a5101=a0_0xf2a334;let _0x41aab5=(await this['whatsappNumber']({'numbers':[_0x28b236[_0x4a5101(0x50d)]]}))[0x0];if(!_0x41aab5[_0x4a5101(0x441)]&&!(0x0,w[_0x4a5101(0x506)])(_0x41aab5['jid'])&&!_0x41aab5[_0x4a5101(0x484)]['includes']('@broadcast'))throw new m(_0x41aab5);let _0x465b0a=_0x41aab5[_0x4a5101(0x484)];try{return await this[_0x4a5101(0x90d)][_0x4a5101(0x81d)](_0x465b0a),await this[_0x4a5101(0x90d)]['sendPresenceUpdate'](_0x28b236['presence'],_0x465b0a),{'status':0xc8,'presence':_0x28b236[_0x4a5101(0x364)]};}catch(_0x7c0430){let _0x5b5581='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence',_0x4d7517=_0x7c0430 instanceof Error?_0x7c0430['message']:typeof _0x7c0430=='object'?JSON[_0x4a5101(0x34b)](_0x7c0430):_0x7c0430,_0x5be950=_0x5b5581+':\x20'+_0x4d7517;throw this[_0x4a5101(0x5e7)]['error'](this[_0x4a5101(0x29c)]+'\x20('+this[_0x4a5101(0x584)][_0x4a5101(0x7a3)]+_0x4a5101(0x62f)+_0x5be950),new m(_0x5be950);}}async['findAndUpdateCacheContact'](_0x529a14,_0x13887a,_0x2806e8,_0x36cbd1=!0x0){const _0xbe7a52=a0_0xf2a334;let _0x127aba=await this[_0xbe7a52(0x677)]['cacheContact']['findOne']({'where':{'_id':_0x529a14}});if(!_0x127aba&&!_0x36cbd1)return;let _0x2e75dd={'lastUpdate':Date[_0xbe7a52(0x5eb)]()};if(_0x2806e8||!_0x127aba?.[_0xbe7a52(0x6a7)]||Date['now']()-_0x127aba[_0xbe7a52(0x6a7)]>0x18*0x3c*0x3c*0x3e8)try{let _0x632026=(await this['profilePicture'](_0x529a14))[_0xbe7a52(0x85a)];_0x2e75dd[_0xbe7a52(0x20b)]=_0x632026;}catch(_0x30eee9){let _0x4acf85='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact',_0x3896f4=_0x30eee9 instanceof Error?_0x30eee9[_0xbe7a52(0x80a)]:typeof _0x30eee9==_0xbe7a52(0x524)?JSON[_0xbe7a52(0x34b)](_0x30eee9):_0x30eee9,_0x2f537c=_0x4acf85+':\x20'+_0x3896f4;throw this[_0xbe7a52(0x5e7)][_0xbe7a52(0x830)](this['instanceName']+'\x20('+this[_0xbe7a52(0x584)][_0xbe7a52(0x7a3)]+_0xbe7a52(0x62f)+_0x2f537c),new m(_0x2f537c);}return _0x13887a&&_0x127aba?.[_0xbe7a52(0x76f)]!==_0x13887a&&(_0x2e75dd[_0xbe7a52(0x76f)]=_0x13887a),Object[_0xbe7a52(0x3e5)](_0x2e75dd)[_0xbe7a52(0x250)]>0x1&&(_0x127aba?await this[_0xbe7a52(0x677)][_0xbe7a52(0x749)][_0xbe7a52(0x227)]({'where':{'_id':_0x529a14}},_0x2e75dd):await this[_0xbe7a52(0x677)]['cacheContact'][_0xbe7a52(0x26f)]([{'_id':_0x529a14,..._0x2e75dd}]),_0x127aba={..._0x127aba,..._0x2e75dd}),{'cachedContact':_0x127aba};}async[a0_0xf2a334(0x4e4)](_0x7cd57e){const _0x42b8eb=a0_0xf2a334;let _0x315eee=this[_0x42b8eb(0x32a)](_0x7cd57e);try{return{'wuid':_0x315eee,'profilePictureUrl':await this[_0x42b8eb(0x90d)][_0x42b8eb(0x85a)](_0x315eee,'image')};}catch{return{'wuid':_0x315eee,'profilePictureUrl':null};}}async['sendMessageWithRetry'](_0x3480dc,_0x4f8810,_0x110fb5){const _0xf668c0=a0_0xf2a334;let _0x5ec2de=0x0;for(;_0x5ec2de<0x5;)try{return await this['sendMessageWithTyping'](_0x3480dc,_0x4f8810,_0x110fb5);}catch(_0x5a8d00){if(_0x5ec2de++,_0x5a8d00 instanceof Error&&_0x5a8d00[_0xf668c0(0x80a)]===_0xf668c0(0x5d6)){if(_0x5ec2de>=0x5)throw new m(_0xf668c0(0x8ac)+_0x5a8d00[_0xf668c0(0x80a)]);this[_0xf668c0(0x5e7)][_0xf668c0(0x25b)](_0xf668c0(0x52d)+_0x5ec2de+_0xf668c0(0x263)+_0x5a8d00[_0xf668c0(0x80a)]+'.\x20Tentando\x20novamente\x20em\x20'+0x1388/0x3e8+_0xf668c0(0x2e7)),await new Promise(_0x35d986=>setTimeout(_0x35d986,0x1388));}else throw new m(_0x5a8d00['message']);}}async['sendMessageWithTyping'](_0x1258a0,_0x1b0bdb,_0x44f487){const _0x1b6d1b=a0_0xf2a334;let _0x3214d5;try{let _0x23c9d2=(await this['whatsappNumber']({'numbers':[_0x1258a0]}))?.[_0x1b6d1b(0x332)]();if(!_0x23c9d2['exists']&&!(0x0,w[_0x1b6d1b(0x506)])(_0x23c9d2['jid'])&&!_0x23c9d2[_0x1b6d1b(0x484)][_0x1b6d1b(0x343)](_0x1b6d1b(0x497)))throw new m(_0x23c9d2);_0x3214d5=_0x23c9d2[_0x1b6d1b(0x484)];}catch(_0x57d3f1){_0x3214d5=_0x1258a0,this[_0x1b6d1b(0x5e7)]['warn'](this['instanceName']+'\x20('+this[_0x1b6d1b(0x584)]['wuid']+_0x1b6d1b(0x479)+_0x57d3f1[_0x1b6d1b(0x80a)]),this[_0x1b6d1b(0x5e7)][_0x1b6d1b(0x25b)](this['instanceName']+'\x20('+this[_0x1b6d1b(0x584)][_0x1b6d1b(0x7a3)]+'):\x20sender\x20=\x20number:\x20'+_0x3214d5);}try{if(_0x3214d5||(_0x3214d5=_0x1258a0,this[_0x1b6d1b(0x5e7)][_0x1b6d1b(0x25b)](this[_0x1b6d1b(0x29c)]+'\x20('+this[_0x1b6d1b(0x584)][_0x1b6d1b(0x7a3)]+_0x1b6d1b(0x780)+_0x3214d5)),_0x44f487||(_0x44f487={}),_0x44f487?.[_0x1b6d1b(0x4c5)]){await this[_0x1b6d1b(0x90d)][_0x1b6d1b(0x81d)](_0x3214d5),await this['client'][_0x1b6d1b(0x19a)](_0x44f487?.[_0x1b6d1b(0x364)]??_0x1b6d1b(0x170),_0x3214d5);let _0x46d312=Math[_0x1b6d1b(0x338)](_0x44f487[_0x1b6d1b(0x4c5)],0x2710);await(0x0,w[_0x1b6d1b(0x4c5)])(_0x46d312),await this[_0x1b6d1b(0x90d)][_0x1b6d1b(0x19a)](_0x1b6d1b(0x280),_0x3214d5);}let _0x345df0=_0x44f487?.[_0x1b6d1b(0x230)]!=!0x1?void 0x0:!0x1,_0x252d38;if(_0x44f487?.[_0x1b6d1b(0x8f7)]){let _0x2b278e=_0x44f487?.['quoted'],_0x5bb5a1=_0x2b278e?.[_0x1b6d1b(0x80a)]?_0x2b278e:await this[_0x1b6d1b(0x5ad)](_0x2b278e[_0x1b6d1b(0x28c)],!0x0);_0x5bb5a1&&(_0x252d38=_0x5bb5a1);}let _0x3cb144=await this['repository'][_0x1b6d1b(0x2fb)][_0x1b6d1b(0x18a)]({'where':{'_id':_0x3214d5}},this[_0x1b6d1b(0x584)][_0x1b6d1b(0x7a3)]),_0x4c9f0c,_0x3990c2=null;if((0x0,w['isJidGroup'])(_0x3214d5))try{if(_0x3990c2=_0x3cb144[_0x1b6d1b(0x4ca)],!_0x3990c2)throw new U(_0x1b6d1b(0x647));if(!_0x3990c2[_0x1b6d1b(0x4b7)])throw new m('Sem\x20permissão\x20para\x20enviar\x20para\x20esse\x20grupo');_0x44f487?.[_0x1b6d1b(0x735)]&&(_0x44f487[_0x1b6d1b(0x735)]?.['everyOne']?_0x4c9f0c=_0x3990c2[_0x1b6d1b(0x62a)][_0x1b6d1b(0x5b0)](_0x152f44=>_0x152f44['id']):_0x44f487[_0x1b6d1b(0x735)]?.['mentioned']?.[_0x1b6d1b(0x250)]&&(_0x4c9f0c=_0x44f487[_0x1b6d1b(0x735)][_0x1b6d1b(0x1cd)][_0x1b6d1b(0x5b0)](_0x2c45a3=>{const _0x385743=_0x1b6d1b;let _0x49be29=this[_0x385743(0x32a)](_0x2c45a3);return(0x0,w[_0x385743(0x506)])(_0x49be29)?null:_0x49be29;})));}catch(_0x25a4df){throw _0x25a4df instanceof U?new U(_0x1b6d1b(0x647)):_0x25a4df instanceof m?new m(_0x1b6d1b(0x7e6)):new Error(_0x1b6d1b(0x7d0));}let _0x456049=await((async()=>{const _0x264a48=_0x1b6d1b;let _0x22e26b={'quoted':_0x252d38,'ephemeralExpiration':_0x3cb144?.[_0x264a48(0x44c)]??0x0};if(!_0x1b0bdb[_0x264a48(0x308)]&&!_0x1b0bdb[_0x264a48(0x5dd)]&&!_0x1b0bdb[_0x264a48(0x687)]&&!_0x1b0bdb['conversation']&&_0x3214d5!==_0x264a48(0x87c)&&_0x1b0bdb[_0x264a48(0x24a)])return await this[_0x264a48(0x90d)]['sendMessage'](_0x3214d5,{'react':{'text':_0x1b0bdb[_0x264a48(0x24a)][_0x264a48(0x439)],'key':_0x1b0bdb[_0x264a48(0x24a)]['key']}},_0x22e26b);if(_0x1b0bdb['conversation']){let _0xd59252=_0x1b0bdb['conversation'];return _0x44f487?.[_0x264a48(0x8d8)]&&(_0xd59252=await this[_0x264a48(0x1fe)](_0xd59252,_0x3214d5)),await this['client'][_0x264a48(0x72e)](_0x3214d5,{'text':_0xd59252,'mentions':_0x4c9f0c,'linkPreview':_0x345df0},_0x22e26b);}return!_0x1b0bdb[_0x264a48(0x308)]&&!_0x1b0bdb['poll']&&_0x3214d5!='status@broadcast'?await this[_0x264a48(0x90d)][_0x264a48(0x72e)](_0x3214d5,{'forward':{'key':{'remoteJid':this[_0x264a48(0x584)][_0x264a48(0x7a3)],'fromMe':!0x0},'message':_0x1b0bdb},'mentions':_0x4c9f0c},_0x22e26b):_0x3214d5==='status@broadcast'?await this['client'][_0x264a48(0x72e)](_0x3214d5,_0x1b0bdb[_0x264a48(0x7cb)][_0x264a48(0x6a4)],{'backgroundColor':_0x1b0bdb[_0x264a48(0x7cb)][_0x264a48(0x554)]['backgroundColor'],'font':_0x1b0bdb['status']['option']['font'],'statusJidList':_0x1b0bdb[_0x264a48(0x7cb)][_0x264a48(0x554)]['statusJidList']}):await this['client']['sendMessage'](_0x3214d5,_0x1b0bdb,_0x22e26b);})()),_0x312faa=(0x0,w[_0x1b6d1b(0x56f)])(_0x456049[_0x1b6d1b(0x80a)]),_0xd7fa79=(0x0,w[_0x1b6d1b(0x4f9)])(_0x312faa),{message_normalized:_0x55f8e9}=this[_0x1b6d1b(0x31d)](_0x312faa,_0xd7fa79,null),_0x20a08b={'_id':_0x456049['key']['id'],'key':_0x456049[_0x1b6d1b(0x28c)],'pushName':_0x456049[_0x1b6d1b(0x27d)],'isGroup':_0x456049['key'][_0x1b6d1b(0x61e)][_0x1b6d1b(0x8de)](_0x1b6d1b(0x701)),'profilePictureUrl':this[_0x1b6d1b(0x584)][_0x1b6d1b(0x85a)],'message':_0x312faa,'messageType':_0xd7fa79,'message_normalized':{'key':_0x456049[_0x1b6d1b(0x28c)],'pushName':_0x456049[_0x1b6d1b(0x27d)],'messageTimestamp':_0x456049[_0x1b6d1b(0x4f1)]&&_0x456049[_0x1b6d1b(0x4f1)][_0x1b6d1b(0x20e)]()[_0x1b6d1b(0x250)]<0xd?_0x456049[_0x1b6d1b(0x4f1)]*0x3e8:_0x456049[_0x1b6d1b(0x4f1)]||null,'source':(0x0,w[_0x1b6d1b(0x76d)])(_0x456049[_0x1b6d1b(0x28c)]['id']),..._0x55f8e9},'messageTimestamp':_0x456049[_0x1b6d1b(0x4f1)]&&_0x456049[_0x1b6d1b(0x4f1)][_0x1b6d1b(0x20e)]()[_0x1b6d1b(0x250)]<0xd?_0x456049['messageTimestamp']*0x3e8:_0x456049['messageTimestamp']||null,'owner':this[_0x1b6d1b(0x584)][_0x1b6d1b(0x7a3)],'source':(0x0,w[_0x1b6d1b(0x76d)])(_0x456049['key']['id'])};return this['logger'][_0x1b6d1b(0x25b)](this[_0x1b6d1b(0x29c)]+'\x20('+this['instance'][_0x1b6d1b(0x7a3)]+_0x1b6d1b(0x36f)+_0x20a08b[_0x1b6d1b(0x28c)]?.[_0x1b6d1b(0x61e)][_0x1b6d1b(0x6b0)]('@s.whatsapp.net','')+_0x1b6d1b(0x35f)+_0x20a08b[_0x1b6d1b(0x7a8)]+')'),_0x20a08b[_0x1b6d1b(0x1f0)]?.['text']&&this[_0x1b6d1b(0x5e7)][_0x1b6d1b(0x25b)](_0x20a08b['message_normalized']?.[_0x1b6d1b(0x439)]),this[_0x1b6d1b(0x467)](_0x1b6d1b(0x654),_0x20a08b),F(this['instanceName'],_0x1b6d1b(0x208),{'message':_0x20a08b}),this[_0x1b6d1b(0x29d)](this['configService']['get'](_0x1b6d1b(0x183)),_0x20a08b,_0x1b6d1b(0x70f),_0x3cb144),await this['repository'][_0x1b6d1b(0x80a)][_0x1b6d1b(0x26f)]([_0x20a08b],this[_0x1b6d1b(0x584)][_0x1b6d1b(0x7a3)]),_0x456049;}catch(_0x1a2a43){let _0x158440='Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20'+_0x3214d5,_0x1bcfa4=_0x1a2a43 instanceof Error?_0x1a2a43[_0x1b6d1b(0x80a)]:typeof _0x1a2a43=='object'?JSON['stringify'](_0x1a2a43):_0x1a2a43,_0x5018b9=_0x158440+':\x20'+_0x1bcfa4;throw this[_0x1b6d1b(0x5e7)][_0x1b6d1b(0x830)](this['instanceName']+'\x20('+this[_0x1b6d1b(0x584)]['wuid']+_0x1b6d1b(0x62f)+_0x5018b9),new m(_0x5018b9);}}async['sendMessageWithTypingButtons'](_0x684b92,_0x40ab41,_0x172e2f){const _0x2d8cfa=a0_0xf2a334;let _0x4cf90f=this[_0x2d8cfa(0x32a)](_0x684b92),_0x2b7494=(await this['whatsappNumber']({'numbers':[_0x4cf90f]}))[0x0];if(!_0x2b7494[_0x2d8cfa(0x441)]&&!(0x0,w[_0x2d8cfa(0x506)])(_0x2b7494[_0x2d8cfa(0x484)]))throw new m(_0x2b7494);let _0x34ed01=(0x0,w[_0x2d8cfa(0x506)])(_0x4cf90f)?_0x4cf90f:_0x2b7494[_0x2d8cfa(0x484)];if((0x0,w[_0x2d8cfa(0x506)])(_0x34ed01))try{await this[_0x2d8cfa(0x90d)]['groupMetadata'](_0x34ed01);}catch{throw new m(_0x2d8cfa(0x805));}try{_0x172e2f?.[_0x2d8cfa(0x4c5)]&&(await this[_0x2d8cfa(0x90d)][_0x2d8cfa(0x81d)](_0x34ed01),await this[_0x2d8cfa(0x90d)]['sendPresenceUpdate'](_0x172e2f?.[_0x2d8cfa(0x364)]??'composing',_0x4cf90f),await(0x0,w[_0x2d8cfa(0x4c5)])(_0x172e2f['delay']),await this[_0x2d8cfa(0x90d)]['sendPresenceUpdate'](_0x2d8cfa(0x280),_0x34ed01));let _0x3b4f08=await((async()=>{const _0x338e37=_0x2d8cfa;let _0x1d43ca,_0x315193='3EB0'+(0x0,oe[_0x338e37(0x60b)])(0x12)['toString'](_0x338e37(0x1b3))[_0x338e37(0x563)](),_0x6bd446=(0x0,w['generateWAMessageFromContent'])(_0x34ed01,_0x40ab41,{'timestamp':new Date(),'userJid':this['instance'][_0x338e37(0x7a3)],'messageId':_0x315193,'quoted':_0x1d43ca}),_0x38f9c4=await this[_0x338e37(0x90d)][_0x338e37(0x3ab)](_0x34ed01,_0x6bd446[_0x338e37(0x80a)],{'messageId':_0x315193});_0x6bd446['key']={'id':_0x38f9c4,'remoteJid':_0x4cf90f,'participant':(0x0,w[_0x338e37(0x781)])(_0x4cf90f)?void 0x0:_0x4cf90f,'fromMe':!0x0};for(let [_0x583f33,_0x5740df]of Object[_0x338e37(0x527)](_0x6bd446))(!_0x5740df||Array[_0x338e37(0x529)](_0x5740df)&&_0x5740df[_0x338e37(0x250)]===0x0)&&delete _0x6bd446[_0x583f33];return this['client']['ev'][_0x338e37(0x261)](_0x338e37(0x75a),{'messages':[_0x6bd446],'type':_0x338e37(0x3dc)}),_0x6bd446;})()),_0x105bcb=await this[_0x2d8cfa(0x677)]['chat'][_0x2d8cfa(0x18a)]({'where':{'_id':_0x34ed01}},this[_0x2d8cfa(0x584)][_0x2d8cfa(0x7a3)]),_0x51a0fe=(0x0,w['normalizeMessageContent'])(_0x3b4f08['message']),_0x17ddc9=(0x0,w[_0x2d8cfa(0x4f9)])(_0x51a0fe),{message_normalized:_0x3fc77f}=this[_0x2d8cfa(0x31d)](_0x51a0fe,_0x17ddc9,null),_0x2ea8f4={'_id':_0x3b4f08[_0x2d8cfa(0x28c)]['id'],'key':_0x3b4f08['key'],'pushName':_0x3b4f08[_0x2d8cfa(0x27d)],'isGroup':_0x3b4f08['key']['remoteJid'][_0x2d8cfa(0x8de)](_0x2d8cfa(0x701)),'profilePictureUrl':this['instance'][_0x2d8cfa(0x85a)],'message':_0x51a0fe,'messageType':_0x17ddc9,'message_normalized':{'key':_0x3b4f08[_0x2d8cfa(0x28c)],'pushName':_0x3b4f08[_0x2d8cfa(0x27d)],'messageTimestamp':_0x3b4f08[_0x2d8cfa(0x4f1)]&&_0x3b4f08[_0x2d8cfa(0x4f1)][_0x2d8cfa(0x20e)]()[_0x2d8cfa(0x250)]<0xd?_0x3b4f08['messageTimestamp']*0x3e8:_0x3b4f08[_0x2d8cfa(0x4f1)]||null,'source':(0x0,w[_0x2d8cfa(0x76d)])(_0x3b4f08[_0x2d8cfa(0x28c)]['id']),..._0x3fc77f},'messageTimestamp':_0x3b4f08[_0x2d8cfa(0x4f1)]&&_0x3b4f08['messageTimestamp'][_0x2d8cfa(0x20e)]()[_0x2d8cfa(0x250)]<0xd?_0x3b4f08[_0x2d8cfa(0x4f1)]*0x3e8:_0x3b4f08[_0x2d8cfa(0x4f1)]||null,'owner':this['instance']['wuid'],'source':(0x0,w['getDevice'])(_0x3b4f08[_0x2d8cfa(0x28c)]['id'])};return this[_0x2d8cfa(0x5e7)]['warn'](this[_0x2d8cfa(0x29c)]+'\x20('+this['instance'][_0x2d8cfa(0x7a3)]+_0x2d8cfa(0x36f)+_0x2ea8f4[_0x2d8cfa(0x28c)]?.[_0x2d8cfa(0x61e)][_0x2d8cfa(0x6b0)](_0x2d8cfa(0x765),'')+_0x2d8cfa(0x35f)+_0x2ea8f4[_0x2d8cfa(0x7a8)]+')'),_0x2ea8f4[_0x2d8cfa(0x1f0)]?.['text']&&this['logger'][_0x2d8cfa(0x25b)](_0x2ea8f4[_0x2d8cfa(0x1f0)]?.['text']),this[_0x2d8cfa(0x467)]('send.message',_0x2ea8f4),F(this[_0x2d8cfa(0x29c)],_0x2d8cfa(0x208),{'message':_0x2ea8f4}),this[_0x2d8cfa(0x29d)](this['configService']['get'](_0x2d8cfa(0x183)),_0x2ea8f4,_0x2d8cfa(0x70f),_0x105bcb),await this[_0x2d8cfa(0x677)][_0x2d8cfa(0x80a)][_0x2d8cfa(0x26f)]([_0x2ea8f4],this['instance'][_0x2d8cfa(0x7a3)]),_0x3b4f08;}catch(_0x5ec142){throw this[_0x2d8cfa(0x5e7)][_0x2d8cfa(0x830)](_0x5ec142),new m(_0x5ec142['toString']());}}get[a0_0xf2a334(0x350)](){const _0x5a92f4=a0_0xf2a334;return this[_0x5a92f4(0x833)];}async[a0_0xf2a334(0x605)](_0x45b534){const _0x108c10=a0_0xf2a334;return await this['sendMessageWithRetry'](_0x45b534[_0x108c10(0x50d)],{'conversation':_0x45b534[_0x108c10(0x605)][_0x108c10(0x439)]},_0x45b534?.[_0x108c10(0x63a)]);}async['formatStatusMessage'](_0x46fcd7){const _0xf49ea7=a0_0xf2a334;if(!_0x46fcd7[_0xf49ea7(0x519)])throw new m(_0xf49ea7(0x377));if(!_0x46fcd7[_0xf49ea7(0x6a4)])throw new m(_0xf49ea7(0x166));if(_0x46fcd7[_0xf49ea7(0x39b)]){let _0x4b96d1=await this['repository'][_0xf49ea7(0x738)]['find']({'where':{}},this[_0xf49ea7(0x584)][_0xf49ea7(0x7a3)]);if(!_0x4b96d1[_0xf49ea7(0x250)])throw new m('Contacts\x20not\x20found');_0x46fcd7[_0xf49ea7(0x176)]=_0x4b96d1[_0xf49ea7(0x3c9)](_0x32b6be=>_0x32b6be[_0xf49ea7(0x27d)])[_0xf49ea7(0x5b0)](_0xbbe7b6=>_0xbbe7b6[_0xf49ea7(0x29b)]);}if(!_0x46fcd7[_0xf49ea7(0x176)]?.['length']&&!_0x46fcd7[_0xf49ea7(0x39b)])throw new m(_0xf49ea7(0x86c));if(_0x46fcd7[_0xf49ea7(0x519)]==='text'){if(!_0x46fcd7['backgroundColor'])throw new m('Background\x20color\x20is\x20required');if(!_0x46fcd7[_0xf49ea7(0x1e2)])throw new m('Font\x20is\x20required');return{'content':{'text':_0x46fcd7[_0xf49ea7(0x6a4)]},'option':{'backgroundColor':_0x46fcd7['backgroundColor'],'font':_0x46fcd7[_0xf49ea7(0x1e2)],'statusJidList':_0x46fcd7[_0xf49ea7(0x176)]}};}if(_0x46fcd7['type']==='image')return{'content':{'image':{'url':_0x46fcd7[_0xf49ea7(0x6a4)]},'caption':_0x46fcd7[_0xf49ea7(0x49d)]},'option':{'statusJidList':_0x46fcd7['statusJidList']}};if(_0x46fcd7[_0xf49ea7(0x519)]===_0xf49ea7(0x771))return{'content':{'video':{'url':_0x46fcd7[_0xf49ea7(0x6a4)]},'caption':_0x46fcd7[_0xf49ea7(0x49d)]},'option':{'statusJidList':_0x46fcd7[_0xf49ea7(0x176)]}};if(_0x46fcd7[_0xf49ea7(0x519)]===_0xf49ea7(0x308)){this[_0xf49ea7(0x5e7)][_0xf49ea7(0x6a3)](this[_0xf49ea7(0x29c)]+'\x20('+this[_0xf49ea7(0x584)][_0xf49ea7(0x7a3)]+_0xf49ea7(0x5c9)),this['logger']['verbose'](this[_0xf49ea7(0x29c)]+'\x20('+this[_0xf49ea7(0x584)][_0xf49ea7(0x7a3)]+_0xf49ea7(0x7d5));let _0x48a119=await this[_0xf49ea7(0x7ea)](_0x46fcd7[_0xf49ea7(0x6a4)]);if(typeof _0x48a119==_0xf49ea7(0x16b)){this[_0xf49ea7(0x5e7)][_0xf49ea7(0x6a3)](this[_0xf49ea7(0x29c)]+'\x20('+this['instance'][_0xf49ea7(0x7a3)]+'):Audio\x20processed');let _0x34457a=k['readFileSync'](_0x48a119)[_0xf49ea7(0x20e)]('base64');return{'content':{'audio':Buffer[_0xf49ea7(0x1a3)](_0x34457a,_0xf49ea7(0x201)),'ptt':!0x0,'mimetype':_0xf49ea7(0x800)},'option':{'statusJidList':_0x46fcd7[_0xf49ea7(0x176)]}};}else throw new x(_0x48a119);}throw new m(_0xf49ea7(0x2b3));}async[a0_0xf2a334(0x442)](_0x430791){const _0x2f6d88=a0_0xf2a334;return await this[_0x2f6d88(0x26d)]('status@broadcast',{'status':await this['formatStatusMessage'](_0x430791['statusMessage'])});}async[a0_0xf2a334(0x1ae)](_0x228e30){const _0xc1e4e4=a0_0xf2a334;try{let _0x84e481=await(0x0,w['prepareWAMessageMedia'])({[_0x228e30[_0xc1e4e4(0x426)]]:(0x0,J[_0xc1e4e4(0x79d)])(_0x228e30[_0xc1e4e4(0x6a0)])?{'url':_0x228e30[_0xc1e4e4(0x6a0)]}:Buffer['from'](_0x228e30['media'],'base64')},{'upload':this[_0xc1e4e4(0x90d)][_0xc1e4e4(0x16a)]}),_0x452c97=_0x228e30[_0xc1e4e4(0x426)]+'Message';if(_0x228e30[_0xc1e4e4(0x426)]==='document'&&!_0x228e30[_0xc1e4e4(0x667)]){let _0x936faf=new RegExp(/.*\/(.+?)\./)[_0xc1e4e4(0x6f8)](_0x228e30[_0xc1e4e4(0x6a0)]);_0x228e30[_0xc1e4e4(0x667)]=_0x936faf?_0x936faf[0x1]:null;}let _0x3c6b1e;return(0x0,J[_0xc1e4e4(0x79d)])(_0x228e30[_0xc1e4e4(0x6a0)])?_0x3c6b1e=(await K[_0xc1e4e4(0x59e)][_0xc1e4e4(0x4c6)](_0x228e30[_0xc1e4e4(0x6a0)],{'responseType':_0xc1e4e4(0x766)}))['headers']['content-type']:_0x3c6b1e=(0x0,Oi[_0xc1e4e4(0x282)])(_0x228e30[_0xc1e4e4(0x667)]),_0x84e481[_0x452c97]['caption']=_0x228e30?.[_0xc1e4e4(0x49d)],_0x84e481[_0x452c97][_0xc1e4e4(0x2e0)]=_0x3c6b1e,_0x84e481[_0x452c97][_0xc1e4e4(0x667)]=_0x228e30[_0xc1e4e4(0x667)],_0x228e30[_0xc1e4e4(0x426)]===_0xc1e4e4(0x771)&&(_0x84e481[_0x452c97][_0xc1e4e4(0x608)]=Uint8Array[_0xc1e4e4(0x1a3)]((0x0,Fe[_0xc1e4e4(0x247)])((0x0,j[_0xc1e4e4(0x666)])(process['cwd'](),'video-cover.png'))),_0x84e481[_0x452c97][_0xc1e4e4(0x3cc)]=!0x1),(0x0,w[_0xc1e4e4(0x53e)])('',{[_0x452c97]:{..._0x84e481[_0x452c97]}},{'userJid':this[_0xc1e4e4(0x584)][_0xc1e4e4(0x7a3)]});}catch(_0x2b7c99){let _0x2bd3e9=_0xc1e4e4(0x300),_0x46996d=_0x2b7c99 instanceof Error?_0x2b7c99[_0xc1e4e4(0x80a)]:typeof _0x2b7c99==_0xc1e4e4(0x524)?JSON[_0xc1e4e4(0x34b)](_0x2b7c99):_0x2b7c99,_0x309600=_0x2bd3e9+':\x20'+_0x46996d;throw this[_0xc1e4e4(0x5e7)]['error'](this[_0xc1e4e4(0x29c)]+'\x20('+this[_0xc1e4e4(0x584)][_0xc1e4e4(0x7a3)]+_0xc1e4e4(0x62f)+_0x309600),new x(_0x309600);}}async['mediaMessage'](_0xa5c756){const _0xc34961=a0_0xf2a334;let _0x3c30ef=0x0;for(;_0x3c30ef<0x5;)try{let _0x38ce1a=await this[_0xc34961(0x1ae)](_0xa5c756[_0xc34961(0x88b)]);return await this[_0xc34961(0x26d)](_0xa5c756[_0xc34961(0x50d)],{..._0x38ce1a['message']},_0xa5c756?.[_0xc34961(0x63a)]);}catch(_0x3b8b2a){if(_0x3c30ef++,_0x3b8b2a instanceof Error&&_0x3b8b2a[_0xc34961(0x80a)]===_0xc34961(0x5d6)){if(_0x3c30ef>=0x5)throw new m(_0xc34961(0x3c3)+_0x3b8b2a[_0xc34961(0x80a)]);this['logger'][_0xc34961(0x25b)](_0xc34961(0x52d)+_0x3c30ef+'/5\x20de\x20preparar\x20mídia\x20falhou:\x20'+_0x3b8b2a[_0xc34961(0x80a)]+_0xc34961(0x631)+0x1388/0x3e8+_0xc34961(0x2e7)),await new Promise(_0x850833=>setTimeout(_0x850833,0x1388));}else throw new m(_0x3b8b2a[_0xc34961(0x80a)]);}}async[a0_0xf2a334(0x45b)](_0xec3e61,_0x4ecd08){const _0x3b168c=a0_0xf2a334;try{this['logger'][_0x3b168c(0x6a3)](this[_0x3b168c(0x29c)]+'\x20('+this[_0x3b168c(0x584)][_0x3b168c(0x7a3)]+_0x3b168c(0x266));let _0x126f8f,_0x2f1689=_0x4ecd08+'-'+new Date()[_0x3b168c(0x43c)]();this[_0x3b168c(0x5e7)][_0x3b168c(0x6a3)](this[_0x3b168c(0x29c)]+'\x20('+this[_0x3b168c(0x584)][_0x3b168c(0x7a3)]+_0x3b168c(0x811)+_0x2f1689);let _0x22925f=''+(0x0,j[_0x3b168c(0x666)])(this[_0x3b168c(0x803)],_0x2f1689+_0x3b168c(0x49e));if(this['logger'][_0x3b168c(0x6a3)](this[_0x3b168c(0x29c)]+'\x20('+this[_0x3b168c(0x584)]['wuid']+_0x3b168c(0x73f)+_0x22925f),(0x0,J[_0x3b168c(0x7cc)])(_0xec3e61)){this[_0x3b168c(0x5e7)][_0x3b168c(0x6a3)](this['instanceName']+'\x20('+this[_0x3b168c(0x584)][_0x3b168c(0x7a3)]+_0x3b168c(0x37f));let _0x274583=_0xec3e61['replace'](/^data:image\/(jpeg|png|gif);base64,/,''),_0x183024=Buffer['from'](_0x274583,_0x3b168c(0x201));_0x126f8f=''+(0x0,j[_0x3b168c(0x666)])(this[_0x3b168c(0x803)],_0x3b168c(0x6ae)+_0x2f1689+'.png'),this[_0x3b168c(0x5e7)][_0x3b168c(0x6a3)](this[_0x3b168c(0x29c)]+'\x20('+this[_0x3b168c(0x584)][_0x3b168c(0x7a3)]+_0x3b168c(0x19e)+_0x126f8f),await(0x0,Ut['default'])(_0x183024)[_0x3b168c(0x496)](_0x126f8f),this[_0x3b168c(0x5e7)][_0x3b168c(0x6a3)](this[_0x3b168c(0x29c)]+'\x20('+this[_0x3b168c(0x584)][_0x3b168c(0x7a3)]+'):Image\x20created');}else{this[_0x3b168c(0x5e7)][_0x3b168c(0x6a3)](this[_0x3b168c(0x29c)]+'\x20('+this['instance'][_0x3b168c(0x7a3)]+_0x3b168c(0x41e));let _0x934a00=new Date()[_0x3b168c(0x43c)](),_0x293509=_0xec3e61+_0x3b168c(0x548)+_0x934a00;this[_0x3b168c(0x5e7)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x3b168c(0x7a3)]+_0x3b168c(0x57d)+_0x293509);let _0x5b940f=await K[_0x3b168c(0x59e)]['get'](_0x293509,{'responseType':_0x3b168c(0x766)});this[_0x3b168c(0x5e7)][_0x3b168c(0x6a3)](this[_0x3b168c(0x29c)]+'\x20('+this[_0x3b168c(0x584)]['wuid']+_0x3b168c(0x22f));let _0x1ad51e=Buffer[_0x3b168c(0x1a3)](_0x5b940f[_0x3b168c(0x601)],'binary');_0x126f8f=''+(0x0,j['join'])(this[_0x3b168c(0x803)],_0x3b168c(0x6ae)+_0x2f1689+_0x3b168c(0x379)),this[_0x3b168c(0x5e7)]['verbose'](this[_0x3b168c(0x29c)]+'\x20('+this['instance'][_0x3b168c(0x7a3)]+_0x3b168c(0x19e)+_0x126f8f),await(0x0,Ut[_0x3b168c(0x59e)])(_0x1ad51e)[_0x3b168c(0x496)](_0x126f8f),this['logger'][_0x3b168c(0x6a3)](this[_0x3b168c(0x29c)]+'\x20('+this[_0x3b168c(0x584)]['wuid']+_0x3b168c(0x3af));}return await(0x0,Ut[_0x3b168c(0x59e)])(_0x126f8f)['webp']()[_0x3b168c(0x496)](_0x22925f),this[_0x3b168c(0x5e7)][_0x3b168c(0x6a3)](this[_0x3b168c(0x29c)]+'\x20('+this['instance'][_0x3b168c(0x7a3)]+_0x3b168c(0x23f)),k[_0x3b168c(0x2df)](_0x126f8f),this[_0x3b168c(0x5e7)][_0x3b168c(0x6a3)](this['instanceName']+'\x20('+this[_0x3b168c(0x584)]['wuid']+_0x3b168c(0x641)),_0x22925f;}catch(_0x5a21a1){let _0x3f2893=_0x3b168c(0x36a),_0x1ce076=_0x5a21a1 instanceof Error?_0x5a21a1[_0x3b168c(0x80a)]:typeof _0x5a21a1=='object'?JSON['stringify'](_0x5a21a1):_0x5a21a1,_0x27c291=_0x3f2893+':\x20'+_0x1ce076;this[_0x3b168c(0x5e7)]['error'](this['instanceName']+'\x20('+this[_0x3b168c(0x584)]['wuid']+_0x3b168c(0x62f)+_0x27c291);}}async[a0_0xf2a334(0x392)](_0x49cf68){const _0xb6b115=a0_0xf2a334;let _0x172ec3=await this[_0xb6b115(0x45b)](_0x49cf68[_0xb6b115(0x886)]['image'],_0x49cf68['number']),_0xe6aabe=await this[_0xb6b115(0x26d)](_0x49cf68['number'],{'sticker':{'url':_0x172ec3}},_0x49cf68?.['options']);return k['unlinkSync'](_0x172ec3),this[_0xb6b115(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0xb6b115(0x584)][_0xb6b115(0x7a3)]+_0xb6b115(0x2a6)),_0xe6aabe;}async[a0_0xf2a334(0x4c1)](_0x5b441b){const _0x56de73=a0_0xf2a334;if(this[_0x56de73(0x5e7)][_0x56de73(0x6a3)](this['instanceName']+'\x20('+this[_0x56de73(0x584)][_0x56de73(0x7a3)]+'):Sending\x20audio\x20whatsapp'),!_0x5b441b[_0x56de73(0x63a)]?.[_0x56de73(0x31e)]&&_0x5b441b[_0x56de73(0x63a)]?.[_0x56de73(0x31e)]!==!0x1&&(_0x5b441b['options']['encoding']=!0x0),_0x5b441b['options']?.['encoding']){let _0x451918=await this[_0x56de73(0x7ea)](_0x5b441b[_0x56de73(0x6d3)]['audio']);if(typeof _0x451918==_0x56de73(0x16b)){let _0x29471a=k['readFileSync'](_0x451918)[_0x56de73(0x20e)](_0x56de73(0x201));return this[_0x56de73(0x26d)](_0x5b441b['number'],{'audio':Buffer[_0x56de73(0x1a3)](_0x29471a,_0x56de73(0x201)),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':_0x56de73(0x5a7),'delay':_0x5b441b?.[_0x56de73(0x63a)]?.['delay']});}else throw new x(_0x451918);}return await this[_0x56de73(0x26d)](_0x5b441b['number'],{'audio':(0x0,J['isURL'])(_0x5b441b[_0x56de73(0x6d3)][_0x56de73(0x308)])?{'url':_0x5b441b[_0x56de73(0x6d3)][_0x56de73(0x308)]}:Buffer[_0x56de73(0x1a3)](_0x5b441b[_0x56de73(0x6d3)][_0x56de73(0x308)],_0x56de73(0x201)),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':_0x56de73(0x5a7),'delay':_0x5b441b?.[_0x56de73(0x63a)]?.[_0x56de73(0x4c5)]});}async[a0_0xf2a334(0x7ea)](_0x230d4e){const _0x1c14a7=a0_0xf2a334;this[_0x1c14a7(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0x1c14a7(0x584)][_0x1c14a7(0x7a3)]+'):Processing\x20audio');let _0x5d30f7=(0x0,J[_0x1c14a7(0x79d)])(_0x230d4e)?(0x0,oe[_0x1c14a7(0x64d)])(_0x1c14a7(0x7f5))[_0x1c14a7(0x227)](_0x230d4e)[_0x1c14a7(0x4ec)](_0x1c14a7(0x1b3)):(0x0,oe[_0x1c14a7(0x64d)])('sha256')[_0x1c14a7(0x227)](_0x230d4e)[_0x1c14a7(0x4ec)]('hex'),_0x427fa8=''+(0x0,j[_0x1c14a7(0x666)])(this['storePath'],_0x5d30f7+'.ogg');if(k[_0x1c14a7(0x2ec)](_0x427fa8))return this[_0x1c14a7(0x5e7)][_0x1c14a7(0x6a3)](this['instanceName']+'\x20('+this[_0x1c14a7(0x584)][_0x1c14a7(0x7a3)]+'):Cached\x20audio\x20found,\x20returning\x20existing\x20file'),_0x427fa8;let _0x20a8b9=''+(0x0,j[_0x1c14a7(0x666)])(this[_0x1c14a7(0x803)],_0x1c14a7(0x6ae)+(0x0,Q['v4'])()+_0x1c14a7(0x541));if((0x0,J[_0x1c14a7(0x79d)])(_0x230d4e)){let _0x4b0c3d=new Date()[_0x1c14a7(0x43c)](),_0x4996bc=_0x230d4e+'?timestamp='+_0x4b0c3d,_0x4e52c7=await K[_0x1c14a7(0x59e)]['get'](_0x4996bc,{'responseType':_0x1c14a7(0x766)});k[_0x1c14a7(0x5b8)](_0x20a8b9,_0x4e52c7[_0x1c14a7(0x601)]);}else{let _0x5d9935=Buffer['from'](_0x230d4e,'base64');k[_0x1c14a7(0x5b8)](_0x20a8b9,_0x5d9935);}return new Promise((_0x494738,_0x1d7c9e)=>{const _0x2c5697=_0x1c14a7;(0x0,Ue[_0x2c5697(0x6f8)])(Ds[_0x2c5697(0x59e)]['path']+_0x2c5697(0x579)+_0x20a8b9+'\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20'+_0x427fa8+_0x2c5697(0x2f5),_0x18643a=>{const _0x337492=_0x2c5697;if(k[_0x337492(0x2df)](_0x20a8b9),_0x18643a){this[_0x337492(0x5e7)]['verbose'](this[_0x337492(0x29c)]+'\x20('+this['instance'][_0x337492(0x7a3)]+_0x337492(0x3fe)),_0x1d7c9e(_0x18643a);return;}this['logger']['verbose'](this[_0x337492(0x29c)]+'\x20('+this[_0x337492(0x584)][_0x337492(0x7a3)]+_0x337492(0x81a)),_0x494738(_0x427fa8);});});}async[a0_0xf2a334(0x2d7)](_0x576ccd){const _0x34bc13=a0_0xf2a334;this['logger'][_0x34bc13(0x6a3)](this[_0x34bc13(0x29c)]+'\x20('+this[_0x34bc13(0x584)][_0x34bc13(0x7a3)]+'):Processing\x20audio');let _0x445575=(0x0,oe[_0x34bc13(0x64d)])(_0x34bc13(0x7f5))['update'](_0x576ccd)[_0x34bc13(0x4ec)](_0x34bc13(0x1b3)),_0x2032b1=''+(0x0,j[_0x34bc13(0x666)])(this[_0x34bc13(0x803)],_0x445575+'.mp3');if(k[_0x34bc13(0x2ec)](_0x2032b1))return this['logger']['verbose'](this[_0x34bc13(0x29c)]+'\x20('+this[_0x34bc13(0x584)][_0x34bc13(0x7a3)]+'):Cached\x20audio\x20found,\x20returning\x20existing\x20file'),j[_0x34bc13(0x59e)][_0x34bc13(0x869)](_0x2032b1);let _0x4c2acc=''+(0x0,j[_0x34bc13(0x666)])(this[_0x34bc13(0x803)],_0x34bc13(0x6ae)+_0x445575+_0x34bc13(0x724));if((0x0,J[_0x34bc13(0x79d)])(_0x576ccd)){let _0x48c32f=new Date()[_0x34bc13(0x43c)](),_0x416536=_0x576ccd+'?timestamp='+_0x48c32f,_0x115650=await K[_0x34bc13(0x59e)][_0x34bc13(0x4c6)](_0x416536,{'responseType':_0x34bc13(0x766)});k[_0x34bc13(0x5b8)](_0x4c2acc,_0x115650[_0x34bc13(0x601)]);}else{let _0x4555eb=Buffer[_0x34bc13(0x1a3)](_0x576ccd,'base64');k[_0x34bc13(0x5b8)](_0x4c2acc,_0x4555eb);}return new Promise((_0x1a2bd3,_0x456ca4)=>{const _0x357fd3=_0x34bc13;(0x0,Ue[_0x357fd3(0x6f8)])(Ds[_0x357fd3(0x59e)][_0x357fd3(0x618)]+_0x357fd3(0x579)+_0x4c2acc+_0x357fd3(0x3a5)+_0x2032b1+_0x357fd3(0x2f5),_0x5c0eb7=>{const _0x2ed7b0=_0x357fd3;if(k[_0x2ed7b0(0x2df)](_0x4c2acc),_0x5c0eb7){this[_0x2ed7b0(0x5e7)][_0x2ed7b0(0x6a3)](this[_0x2ed7b0(0x29c)]+'\x20('+this[_0x2ed7b0(0x584)][_0x2ed7b0(0x7a3)]+'):Error\x20in\x20converting\x20audio'),_0x456ca4(_0x5c0eb7);return;}this[_0x2ed7b0(0x5e7)][_0x2ed7b0(0x6a3)](this['instanceName']+'\x20('+this[_0x2ed7b0(0x584)][_0x2ed7b0(0x7a3)]+_0x2ed7b0(0x81a)),_0x1a2bd3(j[_0x2ed7b0(0x59e)][_0x2ed7b0(0x869)](_0x2032b1));});});}async[a0_0xf2a334(0x557)](_0x4d248d){const _0x1d7c71=a0_0xf2a334;console[_0x1d7c71(0x6b2)](_0x1d7c71(0x39a),_0x4d248d);let _0x3ef7cb;try{_0x4d248d[_0x1d7c71(0x557)]?.['thumbnailUrl']&&(_0x3ef7cb=await this[_0x1d7c71(0x1ae)]({'mediatype':_0x1d7c71(0x1b1),'media':_0x4d248d[_0x1d7c71(0x557)][_0x1d7c71(0x50e)]}));}catch(_0x5951ac){throw console['error'](_0x1d7c71(0x331),_0x5951ac),new Error(_0x1d7c71(0x80d));}try{let _0x43417d={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x1d7c71(0x700)},'footer':{'text':_0x1d7c71(0x289)},'header':((()=>{const _0x4f1c6f=_0x1d7c71;if(_0x3ef7cb?.[_0x4f1c6f(0x80a)]?.[_0x4f1c6f(0x793)])return{'hasMediaAttachment':!!_0x3ef7cb['message']['imageMessage'],'imageMessage':_0x3ef7cb[_0x4f1c6f(0x80a)][_0x4f1c6f(0x793)]};})()),'nativeFlowMessage':{'buttons':[{'name':_0x1d7c71(0x593),'buttonParamsJson':JSON[_0x1d7c71(0x34b)]({'display_text':_0x1d7c71(0x549),'id':'1'})},{'name':_0x1d7c71(0x593),'buttonParamsJson':JSON['stringify']({'display_text':_0x1d7c71(0x665),'id':'2'})}],'messageParamsJson':JSON[_0x1d7c71(0x34b)]({'from':'api','templateId':_0x1d7c71(0x4b2)+(0x0,oe[_0x1d7c71(0x60b)])(0x12)[_0x1d7c71(0x20e)](_0x1d7c71(0x1b3))[_0x1d7c71(0x563)]()})}}}}};return await this[_0x1d7c71(0x34c)](_0x4d248d[_0x1d7c71(0x50d)],_0x43417d,_0x4d248d?.[_0x1d7c71(0x63a)]);}catch(_0x20c31a){throw console['error'](_0x1d7c71(0x65c),_0x20c31a),new Error('Failed\x20to\x20send\x20buttons\x20message');}}async['locationMessage'](_0x5795c9){const _0xfed6fe=a0_0xf2a334;return await this['sendMessageWithRetry'](_0x5795c9[_0xfed6fe(0x50d)],{'locationMessage':{'degreesLatitude':_0x5795c9[_0xfed6fe(0x4ab)]['latitude'],'degreesLongitude':_0x5795c9[_0xfed6fe(0x4ab)][_0xfed6fe(0x2cf)],'name':_0x5795c9[_0xfed6fe(0x4ab)]?.['name'],'address':_0x5795c9[_0xfed6fe(0x4ab)]?.['address']}},_0x5795c9?.[_0xfed6fe(0x63a)]);}async['contactMessage'](_0x59a3e6){const _0x546ed9=a0_0xf2a334;let _0x50ee8f={},_0x148a30=async _0x2281e8=>{const _0x368094=a0_0x464b;let _0x4cff69='BEGIN:VCARD\x0aVERSION:3.0\x0aN:'+_0x2281e8['fullName']+_0x368094(0x30a)+_0x2281e8[_0x368094(0x1c7)]+'\x0a';_0x2281e8['organization']&&(_0x4cff69+=_0x368094(0x29e)+_0x2281e8[_0x368094(0x755)]+';\x0a'),_0x2281e8['email']&&(_0x4cff69+=_0x368094(0x33a)+_0x2281e8[_0x368094(0x3b0)]+'\x0a'),_0x2281e8[_0x368094(0x2b4)]&&(_0x4cff69+='URL:'+_0x2281e8[_0x368094(0x2b4)]+'\x0a');let _0x76dcbc='',_0x8335d9=0x1;if(_0x2281e8[_0x368094(0x50c)]){let _0x1a94f6=_0x2281e8[_0x368094(0x50c)][_0x368094(0x8a0)]('|');for(let _0x9815a2 of _0x1a94f6){let _0x333efa=await this[_0x368094(0x56e)]({'numbers':[_0x9815a2]}),_0x249027=(_0x333efa[_0x368094(0x250)]>0x0?_0x333efa[0x0][_0x368094(0x484)]:this[_0x368094(0x32a)](_0x9815a2))['replace'](_0x368094(0x765),'');_0x76dcbc+=_0x368094(0x48d)+_0x8335d9+'.TEL;waid='+_0x249027+':'+_0x9815a2+_0x368094(0x742)+_0x8335d9+_0x368094(0x4e6),_0x8335d9++;}}return _0x4cff69+=_0x76dcbc+_0x368094(0x89a),_0x4cff69;};return _0x59a3e6[_0x546ed9(0x607)][_0x546ed9(0x250)]===0x1?_0x50ee8f[_0x546ed9(0x607)]={'displayName':_0x59a3e6[_0x546ed9(0x607)][0x0][_0x546ed9(0x1c7)],'vcard':await _0x148a30(_0x59a3e6[_0x546ed9(0x607)][0x0])}:_0x50ee8f['contactsArrayMessage']={'displayName':_0x59a3e6[_0x546ed9(0x607)][_0x546ed9(0x250)]+'\x20contacts','contacts':await Promise[_0x546ed9(0x3f9)](_0x59a3e6[_0x546ed9(0x607)][_0x546ed9(0x5b0)](async _0x482c58=>({'displayName':_0x482c58[_0x546ed9(0x1c7)],'vcard':await _0x148a30(_0x482c58)})))},await this[_0x546ed9(0x26d)](_0x59a3e6[_0x546ed9(0x50d)],{..._0x50ee8f},_0x59a3e6?.['options']);}async[a0_0xf2a334(0x24a)](_0x5d814a){const _0x10a6a9=a0_0xf2a334;return await this['sendMessageWithRetry'](_0x5d814a['reactionMessage']['key']['remoteJid'],{'reactionMessage':{'key':_0x5d814a['reactionMessage'][_0x10a6a9(0x28c)],'text':_0x5d814a[_0x10a6a9(0x24a)][_0x10a6a9(0x177)]}});}async[a0_0xf2a334(0x56e)](_0x2d3909){const _0x169ba3=a0_0xf2a334;let _0x26c740=[];for await(let _0x587a2c of _0x2d3909[_0x169ba3(0x335)]){let _0x5849c7=this['createJid'](_0x587a2c),_0x2a36a7=!0x1;try{if((0x0,w[_0x169ba3(0x506)])(_0x5849c7)){let _0x5a8e7d=(await this[_0x169ba3(0x677)][_0x169ba3(0x2fb)][_0x169ba3(0x18a)]({'where':{'_id':_0x5849c7}},this[_0x169ba3(0x584)]['wuid']))['groupdata'];_0x5a8e7d?(_0x2a36a7=!0x0,_0x26c740[_0x169ba3(0x355)](new ce(_0x5a8e7d['id'],_0x2a36a7,_0x5a8e7d?.[_0x169ba3(0x268)]))):(_0x5a8e7d=await this[_0x169ba3(0x2ab)]({'groupJid':_0x5849c7},_0x169ba3(0x8cb)),_0x26c740[_0x169ba3(0x355)](new ce(_0x5a8e7d['id'],!!_0x5a8e7d?.['id'],_0x5a8e7d?.[_0x169ba3(0x268)])));}else{if(_0x5849c7[_0x169ba3(0x343)]('@broadcast'))_0x26c740['push'](new ce(_0x5849c7,!0x0));else{let _0x3fb0f1=(await this[_0x169ba3(0x90d)][_0x169ba3(0x844)](_0x5849c7))[0x0];_0x26c740[_0x169ba3(0x355)](new ce(_0x3fb0f1['jid'],_0x3fb0f1[_0x169ba3(0x441)]));}}}catch{(0x0,w['isJidGroup'])(_0x5849c7)||await this[_0x169ba3(0x3c8)](_0x5849c7),_0x26c740[_0x169ba3(0x355)](new ce(_0x587a2c,!0x1));}}return _0x26c740;}async['deleteImportedChat'](_0x166c63){const _0x112c67=a0_0xf2a334;try{await this[_0x112c67(0x677)]['chat'][_0x112c67(0x18a)]({'where':{'_id':_0x166c63,'imported':!0x0}},this[_0x112c67(0x584)][_0x112c67(0x7a3)])&&(await this[_0x112c67(0x677)][_0x112c67(0x2fb)][_0x112c67(0x436)](_0x166c63,this['instance'][_0x112c67(0x7a3)]),this['logger']['info'](_0x112c67(0x354)+_0x166c63+_0x112c67(0x18f)));}catch(_0x2bbb03){let _0x395d89=_0x112c67(0x4bd),_0x4f9304=_0x2bbb03 instanceof Error?_0x2bbb03[_0x112c67(0x80a)]:typeof _0x2bbb03==_0x112c67(0x524)?JSON['stringify'](_0x2bbb03):_0x2bbb03,_0x28be9e=_0x395d89+':\x20'+_0x4f9304;this[_0x112c67(0x5e7)][_0x112c67(0x830)](this[_0x112c67(0x29c)]+'\x20('+this['instance'][_0x112c67(0x7a3)]+_0x112c67(0x62f)+_0x28be9e);}}async[a0_0xf2a334(0x6f2)](_0x1fd581){const _0x51611d=a0_0xf2a334;try{let _0xb68794=_0x1fd581[_0x51611d(0x871)][_0x51611d(0x3c9)](_0x5a0600=>(0x0,w['isJidGroup'])(_0x5a0600['remoteJid'])||(0x0,w['isJidUser'])(_0x5a0600[_0x51611d(0x61e)]))[_0x51611d(0x5b0)](_0x1c5869=>({'remoteJid':_0x1c5869['remoteJid'],'fromMe':_0x1c5869[_0x51611d(0x329)],'id':_0x1c5869['id']}));await this['client']['readMessages'](_0xb68794);let _0x22589c=_0xb68794[_0x51611d(0x5b0)](_0x54f418=>this[_0x51611d(0x705)](_0x54f418,{'status':'READ','owner':this[_0x51611d(0x584)][_0x51611d(0x7a3)]})),_0x51c84c=_0xb68794[_0x51611d(0x5b0)](_0x4db38c=>this[_0x51611d(0x677)]['chat']['updateOne']({'where':{'_id':_0x4db38c['remoteJid']}},{'unreadcount':0x0},this[_0x51611d(0x584)]['wuid'])),[_0x1cd50a,_0x57c28d]=await Promise[_0x51611d(0x3f9)]([Promise[_0x51611d(0x3f9)](_0x22589c),Promise[_0x51611d(0x3f9)](_0x51c84c)]);return _0x57c28d[_0x51611d(0x3c9)](_0x7fb516=>_0x7fb516!==null)[_0x51611d(0x3b5)](_0x27c48d=>{const _0x3f2430=_0x51611d;F(this[_0x3f2430(0x29c)],'chats',{'chat':_0x27c48d});}),{'message':'Read\x20messages','read':_0x51611d(0x3e6)};}catch(_0x1907f8){let _0x219a22=_0x51611d(0x421),_0x4b6e99=_0x1907f8 instanceof Error?_0x1907f8['message']:typeof _0x1907f8==_0x51611d(0x524)?JSON['stringify'](_0x1907f8):_0x1907f8,_0x33f6da=_0x219a22+':\x20'+_0x4b6e99;throw this[_0x51611d(0x5e7)][_0x51611d(0x830)](this[_0x51611d(0x29c)]+'\x20('+this[_0x51611d(0x584)][_0x51611d(0x7a3)]+_0x51611d(0x62f)+_0x33f6da),new x(_0x33f6da);}}async[a0_0xf2a334(0x5d3)](_0x130b2b){const _0x5e8278=a0_0xf2a334;let _0x1189a4={'where':{'key':{'remoteJid':_0x130b2b}},'limit':0x1},_0x363cee=await this[_0x5e8278(0x67f)](_0x1189a4);return _0x363cee||(this[_0x5e8278(0x5e7)][_0x5e8278(0x830)]('Last\x20message\x20not\x20found\x20for\x20number:\x20'+_0x130b2b),null);}async[a0_0xf2a334(0x887)](_0x4430ec){const _0x48eb23=a0_0xf2a334;this[_0x48eb23(0x5e7)][_0x48eb23(0x6a3)](this[_0x48eb23(0x29c)]+'\x20('+this[_0x48eb23(0x584)]['wuid']+_0x48eb23(0x660));try{let _0x7310dd=_0x4430ec[_0x48eb23(0x54b)],_0x1409f9=_0x4430ec[_0x48eb23(0x2fb)];if(!_0x7310dd&&_0x1409f9?_0x7310dd=await this[_0x48eb23(0x5d3)](_0x1409f9):(_0x7310dd=_0x4430ec['lastMessage'],_0x7310dd[_0x48eb23(0x4f1)]=_0x7310dd?.[_0x48eb23(0x4f1)]??Date[_0x48eb23(0x5eb)](),_0x1409f9=_0x7310dd?.[_0x48eb23(0x28c)]?.['remoteJid']),!_0x7310dd||Object['keys'](_0x7310dd)[_0x48eb23(0x250)]===0x0)throw new U(_0x48eb23(0x8ad));this[_0x48eb23(0x5e7)][_0x48eb23(0x6a3)](this['instanceName']+'\x20('+this[_0x48eb23(0x584)][_0x48eb23(0x7a3)]+'):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20'+_0x1409f9);try{await this[_0x48eb23(0x90d)]['chatModify']({'archive':_0x4430ec[_0x48eb23(0x65e)],'lastMessages':[_0x7310dd]},this[_0x48eb23(0x32a)](_0x1409f9));}catch(_0x4d316f){let _0x335e46=_0x48eb23(0x6ec)+_0x1409f9,_0x48b112=_0x4d316f instanceof Error?_0x4d316f['message']:typeof _0x4d316f==_0x48eb23(0x524)?JSON['stringify'](_0x4d316f):_0x4d316f,_0x354cbb=_0x335e46+':\x20'+_0x48b112;this[_0x48eb23(0x5e7)]['error'](this[_0x48eb23(0x29c)]+'\x20('+this[_0x48eb23(0x584)][_0x48eb23(0x7a3)]+_0x48eb23(0x62f)+_0x354cbb);}this[_0x48eb23(0x5e7)][_0x48eb23(0x6a3)](this[_0x48eb23(0x29c)]+'\x20('+this[_0x48eb23(0x584)]['wuid']+'):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0x1409f9);let _0x5bb43d=await this['repository'][_0x48eb23(0x2fb)]['updateOne']({'where':{'_id':_0x7310dd?.[_0x48eb23(0x28c)]?.[_0x48eb23(0x61e)]}},{'archived':_0x4430ec[_0x48eb23(0x65e)]},this[_0x48eb23(0x584)][_0x48eb23(0x7a3)]);return _0x5bb43d?(this[_0x48eb23(0x5e7)][_0x48eb23(0x6a3)](this[_0x48eb23(0x29c)]+'\x20('+this['instance'][_0x48eb23(0x7a3)]+_0x48eb23(0x1dc)+JSON['stringify'](_0x5bb43d)),F(this[_0x48eb23(0x29c)],_0x48eb23(0x806),{'chat':_0x5bb43d})):this[_0x48eb23(0x5e7)][_0x48eb23(0x830)](this[_0x48eb23(0x29c)]+'\x20('+this[_0x48eb23(0x584)][_0x48eb23(0x7a3)]+_0x48eb23(0x8a6)+_0x1409f9),{'chatId':_0x1409f9,'archived':_0x4430ec['archive']};}catch(_0x464bfc){let _0xc44e13=_0x48eb23(0x1f6),_0x4ecef7=_0x464bfc instanceof Error?_0x464bfc[_0x48eb23(0x80a)]:typeof _0x464bfc==_0x48eb23(0x524)?JSON[_0x48eb23(0x34b)](_0x464bfc):_0x464bfc,_0x3fa9b2=_0xc44e13+':\x20'+_0x4ecef7;throw this['logger'][_0x48eb23(0x830)](this[_0x48eb23(0x29c)]+'\x20('+this[_0x48eb23(0x584)][_0x48eb23(0x7a3)]+_0x48eb23(0x62f)+_0x3fa9b2),new x(_0x3fa9b2);}}async[a0_0xf2a334(0x436)](_0x19a92c){const _0xa735ff=a0_0xf2a334;this[_0xa735ff(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0xa735ff(0x584)][_0xa735ff(0x7a3)]+_0xa735ff(0x57a));try{let _0x29363c=await this[_0xa735ff(0x5d3)](_0x19a92c);if(!_0x29363c||Object['keys'](_0x29363c)[_0xa735ff(0x250)]===0x0)throw new U('Last\x20message\x20not\x20found');let _0x3c2e9b=_0x29363c[0x0];this[_0xa735ff(0x5e7)][_0xa735ff(0x6a3)](this[_0xa735ff(0x29c)]+'\x20('+this[_0xa735ff(0x584)]['wuid']+_0xa735ff(0x7a4)+_0x19a92c);try{await this[_0xa735ff(0x90d)][_0xa735ff(0x2c4)]({'delete':!0x0,'lastMessages':[{'key':_0x3c2e9b['key'],'messageTimestamp':_0x3c2e9b[_0xa735ff(0x4f1)]}]},this[_0xa735ff(0x32a)](_0x19a92c));}catch(_0x30eb94){this['logger'][_0xa735ff(0x830)](_0xa735ff(0x6ec)+_0x19a92c+':\x20'+_0x30eb94[_0xa735ff(0x20e)]());}this[_0xa735ff(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0xa735ff(0x584)]['wuid']+'):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0x19a92c);return;}catch(_0x427289){throw this[_0xa735ff(0x5e7)]['error'](this[_0xa735ff(0x29c)]+'\x20('+this[_0xa735ff(0x584)]['wuid']+_0xa735ff(0x169)+_0x427289[_0xa735ff(0x20e)]()),new x({'archived':!0x1,'message':['An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.',_0x427289[_0xa735ff(0x20e)]()]});}}async[a0_0xf2a334(0x503)](_0x2de702){const _0x5d554a=a0_0xf2a334;try{let _0x166f19=await this['client'][_0x5d554a(0x72e)](_0x2de702[_0x5d554a(0x61e)],{'delete':_0x2de702});try{let _0x494f87=await this[_0x5d554a(0x705)](_0x2de702,{'status':_0x5d554a(0x494),'owner':this[_0x5d554a(0x584)][_0x5d554a(0x7a3)]});this[_0x5d554a(0x5e7)][_0x5d554a(0x6a3)](this[_0x5d554a(0x29c)]+'\x20('+this[_0x5d554a(0x584)]['wuid']+_0x5d554a(0x66b)+_0x494f87);}catch(_0x2c59f2){this['logger'][_0x5d554a(0x830)](_0x5d554a(0x2f9)+_0x2c59f2);}return _0x166f19;}catch(_0x3a3bf6){throw new x(_0x5d554a(0x5e6),_0x3a3bf6?.[_0x5d554a(0x20e)]());}}async[a0_0xf2a334(0x40d)](_0x68782f){const _0x106c2e=a0_0xf2a334;try{let _0x21562c=_0x68782f?.[_0x106c2e(0x80a)]?_0x68782f:await this[_0x106c2e(0x5ad)](_0x68782f[_0x106c2e(0x28c)],!0x0);for(let _0x5f158d of Na)_0x21562c[_0x106c2e(0x80a)][_0x5f158d]&&(_0x21562c['message']=_0x21562c['message'][_0x5f158d][_0x106c2e(0x80a)]);let _0x4c8644,_0x2f6de3;for(let _0x1037a8 of Ea)if(_0x4c8644=_0x21562c['message'][_0x1037a8],_0x4c8644){_0x2f6de3=_0x1037a8;break;}if(!_0x4c8644)throw'The\x20message\x20is\x20not\x20of\x20the\x20media\x20type';typeof _0x4c8644[_0x106c2e(0x898)]==_0x106c2e(0x524)&&(_0x21562c[_0x106c2e(0x80a)]=JSON[_0x106c2e(0x302)](JSON[_0x106c2e(0x34b)](_0x21562c['message'])));let _0x6b6b8f=await(0x0,w[_0x106c2e(0x4d3)])({'key':_0x21562c?.[_0x106c2e(0x28c)],'message':_0x21562c?.[_0x106c2e(0x80a)]},_0x106c2e(0x6a2),{},{'logger':(0x0,Ft[_0x106c2e(0x59e)])({'level':'silent'}),'reuploadRequest':this[_0x106c2e(0x90d)][_0x106c2e(0x21d)]});if(!(_0x6b6b8f instanceof Buffer))throw new Error(_0x106c2e(0x3a3));let _0x487342=this[_0x106c2e(0x566)][_0x106c2e(0x4c6)](_0x106c2e(0x183)),_0x2047ce,_0x168deb;if(_0x4c8644[_0x106c2e(0x667)])_0x2047ce=_0x4c8644[_0x106c2e(0x667)];else{let _0x461fef=_0x4c8644['mimetype']?.[_0x106c2e(0x834)](/\/(\w+)/),_0x7b3fc8=_0x461fef?_0x461fef[0x1]:null;if(!_0x7b3fc8)throw new Error('File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message');_0x2047ce=(0x0,Q['v4'])()+'.'+_0x7b3fc8;}_0x2f6de3==='audioMessage'?_0x168deb=_0x106c2e(0x875)+await this['convertaudioMP3'](_0x6b6b8f['toString'](_0x106c2e(0x201))):(await this[_0x106c2e(0x83c)](_0x6b6b8f,_0x2047ce),_0x168deb=_0x106c2e(0x875)+_0x2047ce);let _0x1be299=this[_0x106c2e(0x566)][_0x106c2e(0x4c6)](_0x106c2e(0x902))[_0x106c2e(0x526)];if(!_0x1be299){let _0x2dc8ce=this[_0x106c2e(0x566)]['get']('SSL_CONF');_0x1be299=_0x106c2e(0x2a9)+(_0x2dc8ce&&_0x2dc8ce[_0x106c2e(0x825)][_0x106c2e(0x8a0)]('/')[0x4]);}_0x168deb=''+_0x1be299+_0x168deb;let _0x42cef2=0xc*0x3c*0x3c*0x3e8,_0x367c2d={'where':{'_id':_0x21562c[_0x106c2e(0x28c)]['id']}},_0x17027c={'message_normalized.fileUrl':_0x168deb,'message_normalized.expires_fileUrl':Date[_0x106c2e(0x5eb)]()+_0x42cef2};try{let _0x3c20a8=await this['repository']['message'][_0x106c2e(0x227)](_0x367c2d,_0x17027c,this['instance'][_0x106c2e(0x7a3)]);_0x3c20a8&&F(this[_0x106c2e(0x29c)],'messages',{'message':_0x3c20a8});}catch(_0x28ac02){let _0x41723e=_0x106c2e(0x57c),_0x2689de=_0x28ac02 instanceof Error?_0x28ac02[_0x106c2e(0x80a)]:typeof _0x28ac02==_0x106c2e(0x524)?JSON['stringify'](_0x28ac02):_0x28ac02,_0x57aaac=_0x41723e+':\x20'+_0x2689de;this[_0x106c2e(0x5e7)][_0x106c2e(0x830)](this[_0x106c2e(0x29c)]+'\x20('+this['instance']['wuid']+_0x106c2e(0x62f)+_0x57aaac);}return{'mediaType':_0x2f6de3,'fileName':_0x4c8644[_0x106c2e(0x667)],'caption':_0x4c8644[_0x106c2e(0x49d)],'size':{'fileLength':_0x4c8644[_0x106c2e(0x46a)],'height':_0x4c8644[_0x106c2e(0x8df)],'width':_0x4c8644[_0x106c2e(0x5ee)]},'mimetype':_0x4c8644['mimetype'],'base64':_0x6b6b8f[_0x106c2e(0x20e)](_0x106c2e(0x201)),'fileUrl':_0x168deb,'expires_fileUrl':Date[_0x106c2e(0x5eb)]()+_0x42cef2};}catch(_0x420aae){let _0x5734a0='Falha\x20ao\x20processar\x20a\x20solicitação',_0x1498f3=_0x420aae instanceof Error?_0x420aae[_0x106c2e(0x80a)]:typeof _0x420aae==_0x106c2e(0x524)?JSON[_0x106c2e(0x34b)](_0x420aae):_0x420aae,_0x277698=_0x5734a0+':\x20'+_0x1498f3;throw this[_0x106c2e(0x5e7)][_0x106c2e(0x830)](this[_0x106c2e(0x29c)]+'\x20('+this[_0x106c2e(0x584)][_0x106c2e(0x7a3)]+'):\x20'+_0x277698),new m(_0x277698);}}async['saveMediaToFile'](_0x13b1a4,_0x2ebc16){const _0x46adcd=a0_0xf2a334;let _0x164e38=j[_0x46adcd(0x59e)][_0x46adcd(0x666)](__dirname,'downloads');k[_0x46adcd(0x2ec)](_0x164e38)||k[_0x46adcd(0x28f)](_0x164e38,{'recursive':!0x0});let _0x1591a3=j[_0x46adcd(0x59e)][_0x46adcd(0x666)](_0x164e38,_0x2ebc16);return new Promise((_0x3d2f17,_0x1afd94)=>{const _0x107620=_0x46adcd;k[_0x107620(0x3ce)](_0x1591a3,_0x13b1a4,_0x95cc76=>{const _0x4a5099=_0x107620;_0x95cc76?(this[_0x4a5099(0x5e7)][_0x4a5099(0x830)](_0x4a5099(0x3e2)+(_0x95cc76 instanceof Error?_0x95cc76[_0x4a5099(0x80a)]:JSON[_0x4a5099(0x34b)](_0x95cc76,null,0x2))),_0x1afd94(_0x95cc76)):(this['logger'][_0x4a5099(0x6b2)]('File\x20written\x20to\x20path:\x20'+_0x1591a3),_0x3d2f17(_0x1591a3));});});}async[a0_0xf2a334(0x358)](_0x4a3dd3){const _0x1bf94f=a0_0xf2a334;return await this[_0x1bf94f(0x677)][_0x1bf94f(0x738)]['find'](_0x4a3dd3,this[_0x1bf94f(0x584)][_0x1bf94f(0x7a3)]);}async['fetchLabels'](){const _0x4f5982=a0_0xf2a334;return await this[_0x4f5982(0x677)][_0x4f5982(0x1c8)][_0x4f5982(0x556)]({'where':{}},this[_0x4f5982(0x584)]['wuid']);}async[a0_0xf2a334(0x67f)](_0x539daa){const _0x4868c8=a0_0xf2a334;return await this['repository']['message'][_0x4868c8(0x556)](_0x539daa,this[_0x4868c8(0x584)][_0x4868c8(0x7a3)]);}async[a0_0xf2a334(0x216)](){const _0x3cbd3b=a0_0xf2a334;return this[_0x3cbd3b(0x677)][_0x3cbd3b(0x2fb)][_0x3cbd3b(0x878)](this['instance'][_0x3cbd3b(0x7a3)]),this[_0x3cbd3b(0x677)][_0x3cbd3b(0x2fb)][_0x3cbd3b(0x353)](this['instance'][_0x3cbd3b(0x7a3)]),this['repository'][_0x3cbd3b(0x2fb)]['updateMissingTags'](this[_0x3cbd3b(0x584)][_0x3cbd3b(0x7a3)]),this[_0x3cbd3b(0x677)][_0x3cbd3b(0x2fb)][_0x3cbd3b(0x2c3)](this[_0x3cbd3b(0x584)][_0x3cbd3b(0x7a3)]),await this['repository'][_0x3cbd3b(0x2fb)][_0x3cbd3b(0x556)]({'where':{}},this[_0x3cbd3b(0x584)][_0x3cbd3b(0x7a3)]);}async[a0_0xf2a334(0x1d0)](_0x23fd9e){const _0x52bb4f=a0_0xf2a334;try{if(!Array[_0x52bb4f(0x529)](_0x23fd9e)||_0x23fd9e['length']===0x0)throw new Error(_0x52bb4f(0x802));let _0x88e171=[],_0x4e2fb9=[];for(let _0x1d7bd5 of _0x23fd9e){if(_0x1d7bd5['_id'])_0x1d7bd5[_0x52bb4f(0x29b)]=this[_0x52bb4f(0x32a)](_0x1d7bd5[_0x52bb4f(0x29b)]);else continue;await this['repository'][_0x52bb4f(0x2fb)][_0x52bb4f(0x18a)]({'where':{'_id':_0x1d7bd5[_0x52bb4f(0x29b)]}},this[_0x52bb4f(0x584)][_0x52bb4f(0x7a3)])?_0x4e2fb9[_0x52bb4f(0x355)]({'_id':_0x1d7bd5[_0x52bb4f(0x29b)],'leadInfo':_0x1d7bd5[_0x52bb4f(0x1df)],'owner':this[_0x52bb4f(0x584)][_0x52bb4f(0x7a3)]}):_0x88e171[_0x52bb4f(0x355)]({'_id':_0x1d7bd5['_id'],'owner':this[_0x52bb4f(0x584)][_0x52bb4f(0x7a3)],'leadInfo':_0x1d7bd5['leadInfo'],'imported':!0x0});}return _0x4e2fb9['length']>0x0&&await this[_0x52bb4f(0x677)][_0x52bb4f(0x2fb)]['updateMany'](_0x4e2fb9[_0x52bb4f(0x5b0)](_0xdc846a=>({'query':{'where':{'_id':_0xdc846a[_0x52bb4f(0x29b)],'owner':this[_0x52bb4f(0x584)][_0x52bb4f(0x7a3)]}},'update':_0xdc846a}))),_0x88e171[_0x52bb4f(0x250)]>0x0&&await this[_0x52bb4f(0x677)][_0x52bb4f(0x2fb)][_0x52bb4f(0x210)](_0x88e171,this[_0x52bb4f(0x584)][_0x52bb4f(0x7a3)]),{'updated':_0x4e2fb9[_0x52bb4f(0x250)],'inserted':_0x88e171['length']};}catch(_0xc49076){let _0x49e8c7=_0x52bb4f(0x8cd),_0x44c896=_0xc49076 instanceof Error?_0xc49076[_0x52bb4f(0x80a)]:typeof _0xc49076==_0x52bb4f(0x524)?JSON[_0x52bb4f(0x34b)](_0xc49076):_0xc49076,_0x295fc0=_0x49e8c7+':\x20'+_0x44c896;throw this['logger'][_0x52bb4f(0x830)](this[_0x52bb4f(0x29c)]+'\x20('+this[_0x52bb4f(0x584)][_0x52bb4f(0x7a3)]+_0x52bb4f(0x62f)+_0x295fc0),new m(_0x295fc0);}}async[a0_0xf2a334(0x90c)](_0x159f6d){const _0x5a58b8=a0_0xf2a334;try{if(!Array[_0x5a58b8(0x529)](_0x159f6d)||_0x159f6d['length']===0x0)throw new Error(_0x5a58b8(0x802));let _0x180ab0=0x64,_0x5906e5=0x0;for(let _0x235803=0x0;_0x235803<_0x159f6d['length'];_0x235803+=_0x180ab0){let _0x24c233=_0x159f6d['slice'](_0x235803,_0x235803+_0x180ab0),{updated:_0x470b8e}=await this[_0x5a58b8(0x1d2)](_0x24c233);_0x5906e5+=_0x470b8e;}return{'updated':_0x5906e5};}catch(_0xc61b64){let _0xb86486=_0x5a58b8(0x8cd),_0x553a68=_0xc61b64 instanceof Error?_0xc61b64['message']:typeof _0xc61b64==_0x5a58b8(0x524)?JSON[_0x5a58b8(0x34b)](_0xc61b64):_0xc61b64,_0xda0546=_0xb86486+':\x20'+_0x553a68;throw this[_0x5a58b8(0x5e7)]['error'](this['instanceName']+'\x20('+this['instance'][_0x5a58b8(0x7a3)]+_0x5a58b8(0x62f)+_0xda0546),new m(_0xda0546);}}async[a0_0xf2a334(0x1d2)](_0x334cce){const _0x4531bb=a0_0xf2a334;try{let _0x241a15=await this[_0x4531bb(0x677)]['label'][_0x4531bb(0x556)]({'where':{}},this['instance'][_0x4531bb(0x7a3)]),_0x1072e6=new Set(_0x241a15[_0x4531bb(0x5b0)](_0x313423=>_0x313423[_0x4531bb(0x29b)])),_0x15db50=[],_0x124780=[];for(let _0x48a85b of _0x334cce){if(!_0x48a85b[_0x4531bb(0x29b)])continue;_0x48a85b['_id']=this[_0x4531bb(0x32a)](_0x48a85b['_id']);let _0x5b383a=await this['repository'][_0x4531bb(0x2fb)][_0x4531bb(0x18a)]({'where':{'_id':_0x48a85b['_id']}},this['instance'][_0x4531bb(0x7a3)]),_0x4c5aa0={};if(Object[_0x4531bb(0x527)](_0x48a85b[_0x4531bb(0x1df)])['forEach'](([_0x1e0732,_0x145329])=>{_0x4c5aa0['leadInfo.'+_0x1e0732]=_0x145329;}),_0x5b383a&&!_0x5b383a[_0x4531bb(0x422)]){let _0x3b06d9=(_0x48a85b[_0x4531bb(0x1df)][_0x4531bb(0x301)]||[])[_0x4531bb(0x3c9)](_0x2351af=>_0x1072e6['has'](_0x2351af)),_0x31b32e=new Set(_0x5b383a[_0x4531bb(0x1df)][_0x4531bb(0x301)]||[]),_0x180074=_0x3b06d9[_0x4531bb(0x3c9)](_0x25581f=>!_0x31b32e[_0x4531bb(0x711)](_0x25581f)),_0x33a785=[..._0x31b32e]['filter'](_0x534241=>!_0x3b06d9[_0x4531bb(0x343)](_0x534241));_0x124780[_0x4531bb(0x355)](..._0x180074[_0x4531bb(0x5b0)](_0x31c9ff=>this['AddChatLabel'](_0x31c9ff,_0x48a85b['_id']))),_0x124780[_0x4531bb(0x355)](..._0x33a785[_0x4531bb(0x5b0)](_0x1cdc1f=>this[_0x4531bb(0x5d8)](_0x1cdc1f,_0x48a85b[_0x4531bb(0x29b)]))),_0x48a85b[_0x4531bb(0x1df)][_0x4531bb(0x301)]=_0x3b06d9,_0x15db50[_0x4531bb(0x355)]({'query':{'where':{'_id':_0x48a85b[_0x4531bb(0x29b)],'owner':this[_0x4531bb(0x584)][_0x4531bb(0x7a3)]}},'update':_0x4c5aa0});}else _0x4c5aa0[_0x4531bb(0x422)]=!0x0,_0x15db50[_0x4531bb(0x355)]({'query':{'where':{'_id':_0x48a85b[_0x4531bb(0x29b)],'owner':this[_0x4531bb(0x584)][_0x4531bb(0x7a3)]}},'update':_0x4c5aa0});}let _0x115096=await this['repository'][_0x4531bb(0x2fb)][_0x4531bb(0x362)](_0x15db50);return await Promise[_0x4531bb(0x3f9)](_0x124780),{'updated':_0x115096};}catch(_0x54aa9d){let _0x3f7eb5=_0x4531bb(0x8cd),_0x54099d=_0x54aa9d instanceof Error?_0x54aa9d[_0x4531bb(0x80a)]:typeof _0x54aa9d=='object'?JSON[_0x4531bb(0x34b)](_0x54aa9d):_0x54aa9d,_0x2d3ca2=_0x3f7eb5+':\x20'+_0x54099d;throw this[_0x4531bb(0x5e7)][_0x4531bb(0x830)](this['instanceName']+'\x20('+this[_0x4531bb(0x584)][_0x4531bb(0x7a3)]+_0x4531bb(0x62f)+_0x2d3ca2),new m(_0x2d3ca2);}}async[a0_0xf2a334(0x514)](){const _0x38782f=a0_0xf2a334;return await this['client'][_0x38782f(0x514)]();}async[a0_0xf2a334(0x860)](_0xf520bb){const _0x2875b1=a0_0xf2a334;try{return await this[_0x2875b1(0x90d)][_0x2875b1(0x475)](_0xf520bb[_0x2875b1(0x856)][_0x2875b1(0x342)]),await this[_0x2875b1(0x90d)][_0x2875b1(0x4d4)](_0xf520bb[_0x2875b1(0x856)][_0x2875b1(0x649)]),await this[_0x2875b1(0x90d)][_0x2875b1(0x56b)](_0xf520bb['privacySettings'][_0x2875b1(0x7cb)]),await this[_0x2875b1(0x90d)][_0x2875b1(0x5a2)](_0xf520bb['privacySettings'][_0x2875b1(0x320)]),await this[_0x2875b1(0x90d)][_0x2875b1(0x1e3)](_0xf520bb[_0x2875b1(0x856)][_0x2875b1(0x792)]),await this[_0x2875b1(0x90d)][_0x2875b1(0x32d)](_0xf520bb[_0x2875b1(0x856)][_0x2875b1(0x2e5)]),this[_0x2875b1(0x90d)]?.['ws']?.['close'](),{'update':_0x2875b1(0x3e6),'data':{'readreceipts':_0xf520bb[_0x2875b1(0x856)][_0x2875b1(0x342)],'profile':_0xf520bb[_0x2875b1(0x856)][_0x2875b1(0x649)],'status':_0xf520bb['privacySettings'][_0x2875b1(0x7cb)],'online':_0xf520bb[_0x2875b1(0x856)]['online'],'last':_0xf520bb[_0x2875b1(0x856)][_0x2875b1(0x792)],'groupadd':_0xf520bb['privacySettings'][_0x2875b1(0x2e5)]}};}catch(_0xcdc24d){let _0x2d14ff=_0x2875b1(0x294),_0x4070c4=_0xcdc24d instanceof Error?_0xcdc24d[_0x2875b1(0x80a)]:typeof _0xcdc24d==_0x2875b1(0x524)?JSON[_0x2875b1(0x34b)](_0xcdc24d):_0xcdc24d,_0x5af06b=_0x2d14ff+':\x20'+_0x4070c4;throw this[_0x2875b1(0x5e7)][_0x2875b1(0x830)](this[_0x2875b1(0x29c)]+'\x20('+this[_0x2875b1(0x584)][_0x2875b1(0x7a3)]+_0x2875b1(0x62f)+_0x5af06b),new m(_0x5af06b);}}async[a0_0xf2a334(0x189)](_0xe99120){const _0x5db43f=a0_0xf2a334;let _0x42e5f1=(_0xe99120?this[_0x5db43f(0x32a)](_0xe99120):this[_0x5db43f(0x90d)]?.[_0x5db43f(0x8a4)]?.['id'])[_0x5db43f(0x6b0)](/:\d{1,2}@/g,'@');this[_0x5db43f(0x5e7)][_0x5db43f(0x6a3)](this[_0x5db43f(0x29c)]+'\x20('+this[_0x5db43f(0x584)][_0x5db43f(0x7a3)]+_0x5db43f(0x82b)+_0x42e5f1);let _0x5c71fc=await this[_0x5db43f(0x677)]['contact'][_0x5db43f(0x18a)]({'where':{'_id':_0x42e5f1}},this[_0x5db43f(0x584)][_0x5db43f(0x7a3)]),_0x4c6751=_0x5c71fc?_0x5c71fc[_0x5db43f(0x27d)]:null;try{let _0x13acea=(await this[_0x5db43f(0x56e)]({'numbers':[_0x42e5f1]}))?.[_0x5db43f(0x332)](),_0x390429=(await this[_0x5db43f(0x2b9)](_0x42e5f1,null,!0x1))[_0x5db43f(0x336)][_0x5db43f(0x20b)],_0x2896c0=await this['getStatus'](_0x13acea?.[_0x5db43f(0x484)]),_0x50e8ad=await this[_0x5db43f(0x2e2)](_0x13acea?.['jid']),_0x3ccab6=(await this[_0x5db43f(0x2b9)](_0x42e5f1,null,!0x1))['cachedContact'][_0x5db43f(0x76f)],_0x2b2f74=await this[_0x5db43f(0x677)]['chat'][_0x5db43f(0x18a)]({'where':{'_id':_0x42e5f1}},this[_0x5db43f(0x584)][_0x5db43f(0x7a3)]),_0x4d8459={'imagechat':_0x390429,'contactname':_0x4c6751||null,'pushName':_0x3ccab6,'status':_0x2896c0?.['status'],'isBusiness':_0x50e8ad[_0x5db43f(0x769)],'email':_0x50e8ad?.[_0x5db43f(0x3b0)],'description':_0x50e8ad?.[_0x5db43f(0x22e)],'website':_0x50e8ad?.[_0x5db43f(0x315)]?.['shift'](),'lastcache':Date[_0x5db43f(0x5eb)](),'imported':!_0x2b2f74},_0x15226b=await this['repository'][_0x5db43f(0x2fb)][_0x5db43f(0x32f)]({'where':{'_id':_0x42e5f1}},_0x4d8459,this['instance'][_0x5db43f(0x7a3)]),_0x4cb671={'owner':this['instance']['wuid'],'_id':_0x42e5f1,'profilePictureUrl':_0x390429,'status':_0x2896c0?.[_0x5db43f(0x7cb)]};return this[_0x5db43f(0x677)][_0x5db43f(0x738)][_0x5db43f(0x227)]([_0x4cb671],this['instance'][_0x5db43f(0x7a3)]),_0x15226b&&F(this[_0x5db43f(0x29c)],_0x5db43f(0x806),{'chat':_0x15226b}),{'wuid':_0x13acea?.[_0x5db43f(0x484)]||_0x42e5f1,'name':_0x13acea?.[_0x5db43f(0x76f)],'pushName':_0x3ccab6,'numberExists':_0x13acea?.[_0x5db43f(0x441)],'picture':_0x390429,'status':_0x2896c0?.[_0x5db43f(0x7cb)],'isBusiness':_0x50e8ad[_0x5db43f(0x769)],'email':_0x50e8ad?.['email'],'description':_0x50e8ad?.[_0x5db43f(0x22e)],'website':_0x50e8ad?.['website']?.[_0x5db43f(0x332)]()};}catch(_0x374c5f){return this[_0x5db43f(0x5e7)]['error'](_0x5db43f(0x2e3)+(_0x374c5f instanceof Error?_0x374c5f[_0x5db43f(0x80a)]:JSON[_0x5db43f(0x34b)](_0x374c5f,null,0x2))),{};}}async[a0_0xf2a334(0x2e2)](_0xba4147){const _0x1df3af=a0_0xf2a334;this[_0x1df3af(0x5e7)][_0x1df3af(0x6a3)](this[_0x1df3af(0x29c)]+'\x20('+this['instance'][_0x1df3af(0x7a3)]+'):Fetching\x20business\x20profile');try{let _0x16f03f=_0xba4147?this[_0x1df3af(0x32a)](_0xba4147):this[_0x1df3af(0x584)][_0x1df3af(0x7a3)],_0x2b9a17=await this[_0x1df3af(0x90d)]['getBusinessProfile'](_0x16f03f);return this[_0x1df3af(0x5e7)][_0x1df3af(0x6a3)](this['instanceName']+'\x20('+this[_0x1df3af(0x584)][_0x1df3af(0x7a3)]+_0x1df3af(0x453)),_0x2b9a17?(this['logger'][_0x1df3af(0x6a3)](this[_0x1df3af(0x29c)]+'\x20('+this[_0x1df3af(0x584)]['wuid']+_0x1df3af(0x231)),{'isBusiness':!0x0,..._0x2b9a17}):{'isBusiness':!0x1,'message':_0x1df3af(0x376),...(await this['whatsappNumber']({'numbers':[_0x16f03f]}))?.[_0x1df3af(0x332)]()};}catch(_0x1a4c27){let _0x1da526=_0x1df3af(0x175),_0x4cdbb5=_0x1a4c27 instanceof Error?_0x1a4c27['message']:typeof _0x1a4c27==_0x1df3af(0x524)?JSON['stringify'](_0x1a4c27):_0x1a4c27,_0xd1c9c2=_0x1da526+':\x20'+_0x4cdbb5;throw this[_0x1df3af(0x5e7)][_0x1df3af(0x830)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x1df3af(0x62f)+_0xd1c9c2),new x(_0xd1c9c2);}}async['getStatus'](_0x47428d){const _0x19c25c=a0_0xf2a334;let _0x34d603=this[_0x19c25c(0x32a)](_0x47428d);try{return{'wuid':_0x34d603,'status':(await this[_0x19c25c(0x90d)]['fetchStatus'](_0x34d603))[0x0]?.[_0x19c25c(0x7cb)]};}catch{return{'wuid':_0x34d603,'status':null};}}async[a0_0xf2a334(0x8ab)](_0x501a7f){const _0x4b4b75=a0_0xf2a334;try{return await this[_0x4b4b75(0x90d)]['updateProfileName'](_0x501a7f),{'update':'success'};}catch(_0x54599b){let _0x1c5075='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName',_0x54ec1b=_0x54599b instanceof Error?_0x54599b[_0x4b4b75(0x80a)]:typeof _0x54599b==_0x4b4b75(0x524)?JSON[_0x4b4b75(0x34b)](_0x54599b):_0x54599b,_0x2b5092=_0x1c5075+':\x20'+_0x54ec1b;throw this[_0x4b4b75(0x5e7)][_0x4b4b75(0x830)](this['instanceName']+'\x20('+this[_0x4b4b75(0x584)][_0x4b4b75(0x7a3)]+_0x4b4b75(0x62f)+_0x2b5092),new x(_0x2b5092);}}async['updateProfileStatus'](_0x1b3601){const _0x1785b8=a0_0xf2a334;try{return await this[_0x1785b8(0x90d)]['updateProfileStatus'](_0x1b3601),{'update':'success'};}catch(_0x3c7bca){let _0x480c7d='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus',_0x160b22=_0x3c7bca instanceof Error?_0x3c7bca[_0x1785b8(0x80a)]:typeof _0x3c7bca=='object'?JSON[_0x1785b8(0x34b)](_0x3c7bca):_0x3c7bca,_0x8c1151=_0x480c7d+':\x20'+_0x160b22;throw this[_0x1785b8(0x5e7)][_0x1785b8(0x830)](this['instanceName']+'\x20('+this[_0x1785b8(0x584)]['wuid']+_0x1785b8(0x62f)+_0x8c1151),new x(_0x8c1151);}}async[a0_0xf2a334(0x741)](_0x84cdc4){const _0x35433e=a0_0xf2a334;try{let _0x35aba0;if((0x0,J[_0x35433e(0x79d)])(_0x84cdc4)){let _0x54dad5=new Date()[_0x35433e(0x43c)](),_0x35d0b0=_0x84cdc4+_0x35433e(0x548)+_0x54dad5;_0x35aba0=(await K[_0x35433e(0x59e)][_0x35433e(0x4c6)](_0x35d0b0,{'responseType':_0x35433e(0x766)}))[_0x35433e(0x601)];}else{if((0x0,J['isBase64'])(_0x84cdc4))_0x35aba0=Buffer[_0x35433e(0x1a3)](_0x84cdc4,_0x35433e(0x201));else throw new m(_0x35433e(0x913));}return await this[_0x35433e(0x90d)]['updateProfilePicture'](this['instance'][_0x35433e(0x7a3)],_0x35aba0),{'update':'success'};}catch(_0x1204b8){let _0x193a17=_0x35433e(0x774),_0x4b04a4=_0x1204b8 instanceof Error?_0x1204b8[_0x35433e(0x80a)]:typeof _0x1204b8=='object'?JSON[_0x35433e(0x34b)](_0x1204b8):_0x1204b8,_0x2ed4c4=_0x193a17+':\x20'+_0x4b04a4;throw this[_0x35433e(0x5e7)][_0x35433e(0x830)](this['instanceName']+'\x20('+this[_0x35433e(0x584)]['wuid']+_0x35433e(0x62f)+_0x2ed4c4),new x(_0x2ed4c4);}}async[a0_0xf2a334(0x7f2)](){const _0x4d6a48=a0_0xf2a334;try{return await this[_0x4d6a48(0x90d)][_0x4d6a48(0x7f2)](this[_0x4d6a48(0x584)][_0x4d6a48(0x7a3)]),{'update':_0x4d6a48(0x3e6)};}catch(_0xb73e78){let _0x15eed0=_0x4d6a48(0x82e),_0x52f220=_0xb73e78 instanceof Error?_0xb73e78['message']:typeof _0xb73e78==_0x4d6a48(0x524)?JSON[_0x4d6a48(0x34b)](_0xb73e78):_0xb73e78,_0x18251d=_0x15eed0+':\x20'+_0x52f220;throw this[_0x4d6a48(0x5e7)][_0x4d6a48(0x830)](this['instanceName']+'\x20('+this['instance'][_0x4d6a48(0x7a3)]+_0x4d6a48(0x62f)+_0x18251d),new x(_0x18251d);}}async[a0_0xf2a334(0x168)](_0x4f0fcc){const _0xaae473=a0_0xf2a334;try{let _0x543143=(await this[_0xaae473(0x56e)]({'numbers':_0x4f0fcc[_0xaae473(0x62a)]}))[_0xaae473(0x3c9)](_0x9742db=>_0x9742db[_0xaae473(0x441)])[_0xaae473(0x5b0)](_0x2e9dcb=>_0x2e9dcb[_0xaae473(0x484)]),{id:_0x39e50e}=await this['client'][_0xaae473(0x382)](_0x4f0fcc[_0xaae473(0x268)],_0x543143);_0x4f0fcc?.[_0xaae473(0x22e)]&&await this['client'][_0xaae473(0x832)](_0x39e50e,_0x4f0fcc[_0xaae473(0x22e)]);let _0x369287=await this[_0xaae473(0x90d)][_0xaae473(0x68c)](_0x39e50e);return _0x369287['awaitingApproval']=[],await this[_0xaae473(0x69e)](_0x369287),{'metadata':_0x369287};}catch(_0x59df56){let _0xb9f946=_0xaae473(0x57e),_0x160643=_0x59df56 instanceof Error?_0x59df56[_0xaae473(0x80a)]:typeof _0x59df56=='object'?JSON[_0xaae473(0x34b)](_0x59df56):_0x59df56,_0x11c501=_0xb9f946+':\x20'+_0x160643;throw this[_0xaae473(0x5e7)][_0xaae473(0x830)](this[_0xaae473(0x29c)]+'\x20('+this[_0xaae473(0x584)][_0xaae473(0x7a3)]+_0xaae473(0x62f)+_0x11c501),new x(_0x11c501);}}async[a0_0xf2a334(0x615)](_0x32199b){const _0x3e20c0=a0_0xf2a334;try{if(_0x32199b['restrict']===!0x0&&await this[_0x3e20c0(0x90d)][_0x3e20c0(0x865)](_0x32199b[_0x3e20c0(0x291)],'locked'),_0x32199b[_0x3e20c0(0x204)]===!0x1&&await this['client'][_0x3e20c0(0x865)](_0x32199b[_0x3e20c0(0x291)],_0x3e20c0(0x5e1)),_0x32199b[_0x3e20c0(0x399)]===!0x0&&await this['client']['groupSettingUpdate'](_0x32199b[_0x3e20c0(0x291)],'announcement'),_0x32199b['announce']===!0x1&&await this['client'][_0x3e20c0(0x865)](_0x32199b[_0x3e20c0(0x291)],_0x3e20c0(0x235)),_0x32199b['memberAddMode']===!0x0&&await this['client'][_0x3e20c0(0x5e0)](_0x32199b[_0x3e20c0(0x291)],_0x3e20c0(0x8bb)),_0x32199b[_0x3e20c0(0x410)]===!0x1&&await this['client'][_0x3e20c0(0x5e0)](_0x32199b['groupJid'],_0x3e20c0(0x29a)),_0x32199b['joinApprovalMode']===!0x0&&await this['client']['groupJoinApprovalMode'](_0x32199b[_0x3e20c0(0x291)],'on'),_0x32199b['joinApprovalMode']===!0x1&&await this[_0x3e20c0(0x90d)][_0x3e20c0(0x323)](_0x32199b[_0x3e20c0(0x291)],_0x3e20c0(0x2a5)),typeof _0x32199b[_0x3e20c0(0x847)]<'u'&&_0x32199b['expiration']!==null&&await this[_0x3e20c0(0x90d)][_0x3e20c0(0x79e)](_0x32199b['groupJid'],_0x32199b[_0x3e20c0(0x847)]),_0x32199b[_0x3e20c0(0x76f)]&&await this[_0x3e20c0(0x90d)]['groupUpdateSubject'](_0x32199b[_0x3e20c0(0x291)],_0x32199b[_0x3e20c0(0x76f)]),_0x32199b[_0x3e20c0(0x22e)]&&await this[_0x3e20c0(0x90d)][_0x3e20c0(0x832)](_0x32199b[_0x3e20c0(0x291)],_0x32199b[_0x3e20c0(0x22e)]),_0x32199b[_0x3e20c0(0x1b1)]){let _0x35b9f4;if((0x0,J['isURL'])(_0x32199b[_0x3e20c0(0x1b1)])){let _0x24ddc7=new Date()[_0x3e20c0(0x43c)](),_0x32a1ee=_0x32199b['image']+_0x3e20c0(0x548)+_0x24ddc7;_0x35b9f4=(await K[_0x3e20c0(0x59e)][_0x3e20c0(0x4c6)](_0x32a1ee,{'responseType':_0x3e20c0(0x766)}))[_0x3e20c0(0x601)];}else{if((0x0,J[_0x3e20c0(0x7cc)])(_0x32199b[_0x3e20c0(0x1b1)]))_0x35b9f4=Buffer[_0x3e20c0(0x1a3)](_0x32199b[_0x3e20c0(0x1b1)],_0x3e20c0(0x201));else throw new m(_0x3e20c0(0x913));}await this[_0x3e20c0(0x90d)]['updateProfilePicture'](_0x32199b[_0x3e20c0(0x291)],_0x35b9f4);}return await this[_0x3e20c0(0x2ab)]({'groupJid':_0x32199b[_0x3e20c0(0x291)]});}catch(_0x4b6639){let _0x54ceb4=_0x3e20c0(0x1d3),_0x3d20e6=_0x4b6639 instanceof Error?_0x4b6639[_0x3e20c0(0x80a)]:typeof _0x4b6639==_0x3e20c0(0x524)?JSON[_0x3e20c0(0x34b)](_0x4b6639):_0x4b6639,_0x380e48=_0x54ceb4+':\x20'+_0x3d20e6;throw this['logger'][_0x3e20c0(0x830)](this[_0x3e20c0(0x29c)]+'\x20('+this[_0x3e20c0(0x584)][_0x3e20c0(0x7a3)]+_0x3e20c0(0x62f)+_0x380e48),new x(_0x380e48);}}async[a0_0xf2a334(0x19c)](_0x1cad62){const _0x298be3=a0_0xf2a334;try{let _0x5c5005=_0x1cad62[_0x298be3(0x62a)]['map'](_0x5e97b8=>this[_0x298be3(0x32a)](_0x5e97b8));if(_0x1cad62['action']===_0x298be3(0x722)||_0x1cad62['action']===_0x298be3(0x316))await this[_0x298be3(0x90d)][_0x298be3(0x7b8)](_0x1cad62[_0x298be3(0x291)],_0x5c5005,_0x1cad62[_0x298be3(0x4b8)]);else{if(_0x1cad62[_0x298be3(0x4b8)]===_0x298be3(0x1c0)){let _0x2d3f51=(await this['whatsappNumber']({'numbers':_0x1cad62[_0x298be3(0x62a)]}))['filter'](_0x51f8ab=>_0x51f8ab[_0x298be3(0x441)])[_0x298be3(0x5b0)](_0x314c6c=>this[_0x298be3(0x32a)](_0x314c6c[_0x298be3(0x484)]));if(_0x2d3f51[_0x298be3(0x250)]===0x0)throw new m('Nenhum\x20participante\x20válido\x20encontrado.');await this[_0x298be3(0x90d)][_0x298be3(0x585)](_0x1cad62[_0x298be3(0x291)],_0x2d3f51,'add');}else await this[_0x298be3(0x90d)][_0x298be3(0x585)](_0x1cad62[_0x298be3(0x291)],_0x5c5005,_0x1cad62[_0x298be3(0x4b8)]);}return await this['findGroup']({'groupJid':_0x1cad62['groupJid']});}catch(_0x5c5d99){let _0x5537e9=_0x298be3(0x3b8),_0x56e99b=_0x5c5d99 instanceof Error?_0x5c5d99[_0x298be3(0x80a)]:typeof _0x5c5d99==_0x298be3(0x524)?JSON[_0x298be3(0x34b)](_0x5c5d99):_0x5c5d99,_0x1ec29e=_0x5537e9+':\x20'+_0x56e99b;throw this[_0x298be3(0x5e7)]['error'](this[_0x298be3(0x29c)]+'\x20('+this['instance'][_0x298be3(0x7a3)]+_0x298be3(0x62f)+_0x1ec29e),new m(_0x1ec29e);}}async[a0_0xf2a334(0x85b)](_0x26baf7){const _0x277bbf=a0_0xf2a334;try{return await this['client'][_0x277bbf(0x85b)](_0x26baf7[_0x277bbf(0x889)]);}catch(_0x259466){let _0x1cfc11=_0x277bbf(0x8a2),_0x5bc34d=_0x259466 instanceof Error?_0x259466[_0x277bbf(0x80a)]:typeof _0x259466=='object'?JSON[_0x277bbf(0x34b)](_0x259466):_0x259466,_0x44da90=_0x1cfc11+':\x20'+_0x5bc34d;throw this[_0x277bbf(0x5e7)][_0x277bbf(0x830)](this[_0x277bbf(0x29c)]+'\x20('+this[_0x277bbf(0x584)]['wuid']+'):\x20'+_0x44da90),new m(_0x44da90);}}async[a0_0xf2a334(0x2ab)](_0x2f5d05,_0x583474='out'){const _0xafc94=a0_0xf2a334;try{let _0x42c5e6=await this[_0xafc94(0x677)][_0xafc94(0x2fb)][_0xafc94(0x18a)]({'where':{'_id':_0x2f5d05['groupJid']}},this[_0xafc94(0x584)][_0xafc94(0x7a3)]),_0x3715f8=_0x42c5e6?_0x42c5e6[_0xafc94(0x4ca)]:null,_0x8bd9d5=0x18*0x3c*0x3c*0x3e8;if(!_0x3715f8||_0x3715f8[_0xafc94(0x6a7)]&&Date[_0xafc94(0x5eb)]()-_0x3715f8[_0xafc94(0x6a7)]>_0x8bd9d5){let _0x200b4c=await this['client'][_0xafc94(0x68c)](_0x2f5d05[_0xafc94(0x291)]);if(_0x200b4c[_0xafc94(0x40a)]=_0x200b4c?.['subjectTime']&&_0x200b4c[_0xafc94(0x40a)][_0xafc94(0x20e)]()[_0xafc94(0x250)]<0xd?_0x200b4c?.[_0xafc94(0x40a)]*0x3e8:_0x200b4c?.['subjectTime']||null,_0x200b4c['creation']=_0x200b4c?.['creation']&&_0x200b4c[_0xafc94(0x412)][_0xafc94(0x20e)]()['length']<0xd?_0x200b4c?.[_0xafc94(0x412)]*0x3e8:_0x200b4c?.[_0xafc94(0x412)]||null,_0x3715f8={..._0x200b4c,'lastUpdate':Date[_0xafc94(0x5eb)]()},!_0x200b4c)return;}let _0x136b6f=_0x3715f8[_0xafc94(0x62a)]?.[_0xafc94(0x4a9)](_0x2791dd=>_0x2791dd['id']===this['instance'][_0xafc94(0x7a3)]+_0xafc94(0x765)&&_0x2791dd[_0xafc94(0x820)]!=null)||!0x1;!_0x3715f8[_0xafc94(0x889)]&&_0x136b6f&&(_0x3715f8[_0xafc94(0x889)]=(await this[_0xafc94(0x889)](_0x2f5d05,!0x1))['inviteUrl']);let _0x3ffe54=(!_0x3715f8[_0xafc94(0x399)]||_0x136b6f)&&(!_0x3715f8[_0xafc94(0x44f)]||_0x136b6f);_0x3715f8[_0xafc94(0x3f4)]=_0x136b6f,_0x3715f8[_0xafc94(0x4b7)]=_0x3ffe54;let _0x1b9277=[];if(_0x136b6f&&_0x3715f8['joinApprovalMode'])try{_0x1b9277=await this[_0xafc94(0x90d)][_0xafc94(0x427)](_0x2f5d05[_0xafc94(0x291)]),_0x3715f8[_0xafc94(0x7e5)]=Date['now']();}catch(_0x13ffc0){this['logger'][_0xafc94(0x6a3)](this[_0xafc94(0x29c)]+'\x20('+this[_0xafc94(0x584)]['wuid']+_0xafc94(0x1c2)+_0x2f5d05[_0xafc94(0x291)]+':\x20'+(_0x13ffc0 instanceof Error?_0x13ffc0[_0xafc94(0x80a)]:JSON[_0xafc94(0x34b)](_0x13ffc0,null,0x2)));}try{_0x3715f8[_0xafc94(0x1b1)]=(await this[_0xafc94(0x2b9)](_0x2f5d05[_0xafc94(0x291)],null,!0x0))['cachedContact'][_0xafc94(0x20b)];}catch(_0x1a185c){this[_0xafc94(0x5e7)]['verbose'](this[_0xafc94(0x29c)]+'\x20('+this[_0xafc94(0x584)][_0xafc94(0x7a3)]+_0xafc94(0x6da)+_0x2f5d05[_0xafc94(0x291)]+':\x20'+(_0x1a185c instanceof Error?_0x1a185c[_0xafc94(0x80a)]:JSON['stringify'](_0x1a185c,null,0x2)));}let _0x401b91=_0x3715f8['participants'][_0xafc94(0x5b0)](_0x14363=>_0x14363['id']),_0x230ffd=_0x1b9277['map'](_0x436b51=>_0x436b51[_0xafc94(0x484)]),_0x1379f2=await this['repository'][_0xafc94(0x749)][_0xafc94(0x1f9)]([..._0x401b91,..._0x230ffd]);_0x3715f8[_0xafc94(0x62a)]=_0x3715f8[_0xafc94(0x62a)][_0xafc94(0x5b0)](_0x3be24c=>{const _0x21780c=_0xafc94;let _0x216672=_0x1379f2['find'](_0x52d6ce=>_0x52d6ce[_0x21780c(0x29b)]===_0x3be24c['id']);return{'id':_0x3be24c['id'],'isAdmin':['admin',_0x21780c(0x50b)]['includes'](_0x3be24c[_0x21780c(0x820)]),'admin':_0x3be24c[_0x21780c(0x820)],'pushName':_0x216672?.[_0x21780c(0x76f)],'profilePictureUrl':_0x216672?.[_0x21780c(0x20b)]};}),_0x3715f8['awaitingApproval']=_0x1b9277[_0xafc94(0x5b0)](_0x2829eb=>{const _0x27a7ce=_0xafc94;let _0x9770eb=_0x1379f2[_0x27a7ce(0x556)](_0x14cd9d=>_0x14cd9d[_0x27a7ce(0x29b)]===_0x2829eb['jid']);return{'id':_0x2829eb['jid'],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x9770eb?.[_0x27a7ce(0x76f)],'profilePictureUrl':_0x9770eb?.[_0x27a7ce(0x20b)],'request_method':_0x2829eb[_0x27a7ce(0x8da)],'request_time':_0x2829eb[_0x27a7ce(0x244)]};});let _0x406efd=await this[_0xafc94(0x677)][_0xafc94(0x2fb)][_0xafc94(0x32f)]({'where':{'_id':_0x2f5d05['groupJid']}},{'imagechat':_0x3715f8[_0xafc94(0x1b1)],'name':_0x3715f8[_0xafc94(0x268)],'lastcache':Date[_0xafc94(0x5eb)](),'groupdata':_0x3715f8},this[_0xafc94(0x584)][_0xafc94(0x7a3)]);return F(this[_0xafc94(0x29c)],'chats',{'chat':_0x406efd}),{'metadata':_0x3715f8};}catch(_0xcd5434){if(_0x583474==='inner')return;throw new U(_0xafc94(0x7bd),_0xcd5434[_0xafc94(0x80a)][_0xafc94(0x20e)]());}}async[a0_0xf2a334(0x873)](){const _0x35dded=a0_0xf2a334;try{this[_0x35dded(0x5e7)][_0x35dded(0x5b4)](_0x35dded(0x7ec));let _0x58af61=Date[_0x35dded(0x5eb)](),_0xadba51=0x3*0x3c*0x3c*0x3e8;return _0x58af61-this['lastRealGroupsFetch']>_0xadba51&&(this[_0x35dded(0x539)](),this[_0x35dded(0x901)]=_0x58af61),(await this['repository'][_0x35dded(0x2fb)][_0x35dded(0x689)]({'where':{'group':!0x0}},this[_0x35dded(0x584)]['wuid']))[_0x35dded(0x5b0)](_0x181528=>({..._0x181528[_0x35dded(0x4ca)],'groupJid':_0x181528?.[_0x35dded(0x29b)],'participants':_0x181528?.[_0x35dded(0x4ca)]?.[_0x35dded(0x62a)]||[],'awaitingApproval':_0x181528?.[_0x35dded(0x4ca)]?.[_0x35dded(0x642)]||[],'image':_0x181528?.['imagechat']}));}catch(_0x2e657f){let _0x1e30a7='Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups',_0x652ddd=_0x2e657f instanceof Error?_0x2e657f['message']:typeof _0x2e657f==_0x35dded(0x524)?JSON[_0x35dded(0x34b)](_0x2e657f):_0x2e657f,_0x160afc=_0x1e30a7+':\x20'+_0x652ddd;throw this[_0x35dded(0x5e7)][_0x35dded(0x830)](this[_0x35dded(0x29c)]+'\x20('+this[_0x35dded(0x584)][_0x35dded(0x7a3)]+_0x35dded(0x62f)+_0x160afc),new U(_0x160afc);}}async[a0_0xf2a334(0x539)](){const _0x55e02b=a0_0xf2a334;try{this['logger'][_0x55e02b(0x5b4)](_0x55e02b(0x600));let _0x23df90=[],_0x45d42f=await this[_0x55e02b(0x90d)]['groupFetchAllParticipating'](),_0x20d6fa=Object['values'](_0x45d42f);for(let _0x45cf69=0x0;_0x45cf69<_0x20d6fa[_0x55e02b(0x250)];_0x45cf69++){let _0x568225=_0x20d6fa[_0x45cf69];(0x0,w[_0x55e02b(0x506)])(_0x568225?.['id'])&&(_0x23df90[_0x55e02b(0x355)]({'groupJid':_0x568225?.['id'],'subject':_0x568225?.[_0x55e02b(0x268)],'subjectOwner':_0x568225?.[_0x55e02b(0x2f4)]?.[_0x55e02b(0x8a0)]('@')[0x0],'subjectTime':_0x568225?.[_0x55e02b(0x40a)],'creation':_0x568225?.[_0x55e02b(0x412)],'size':_0x568225?.[_0x55e02b(0x62a)]?.[_0x55e02b(0x250)],'owner':_0x568225?.[_0x55e02b(0x84f)]?.[_0x55e02b(0x8a0)]('@')[0x0],'desc':_0x568225?.['desc'],'restrict':_0x568225?.[_0x55e02b(0x204)],'announce':_0x568225?.[_0x55e02b(0x399)],'image':null,'isCommunity':_0x568225?.[_0x55e02b(0x44f)],'joinApprovalMode':_0x568225?.[_0x55e02b(0x787)],'memberCanAddParticipant':_0x568225?.[_0x55e02b(0x410)],'participants':_0x568225?.[_0x55e02b(0x62a)],'descOwner':_0x568225?.['descOwner'],'descId':_0x568225?.[_0x55e02b(0x536)],'memberAddMode':_0x568225?.[_0x55e02b(0x410)],'isCommunityAnnounce':_0x568225?.['isCommunityAnnounce'],'ephemeralDuration':_0x568225?.[_0x55e02b(0x4e3)]||0x0,'author':_0x568225?.[_0x55e02b(0x5ba)]}),this[_0x55e02b(0x69e)](_0x20d6fa[_0x45cf69]));}return _0x23df90;}catch(_0x403a76){let _0x44c35a='Falha\x20ao\x20processar\x20a\x20solicitação\x20findRealGroups',_0x487bcf=_0x403a76 instanceof Error?_0x403a76[_0x55e02b(0x80a)]:typeof _0x403a76=='object'?JSON[_0x55e02b(0x34b)](_0x403a76):_0x403a76,_0x5c0351=_0x44c35a+':\x20'+_0x487bcf;throw this['logger'][_0x55e02b(0x830)](this[_0x55e02b(0x29c)]+'\x20('+this[_0x55e02b(0x584)]['wuid']+_0x55e02b(0x62f)+_0x5c0351),new U(_0x5c0351);}}async[a0_0xf2a334(0x69e)](_0xca814e){const _0x4455cf=a0_0xf2a334;let _0x54c963=await this[_0x4455cf(0x677)][_0x4455cf(0x2fb)][_0x4455cf(0x18a)]({'where':{'_id':_0xca814e['id']}},this[_0x4455cf(0x584)][_0x4455cf(0x7a3)]);if(_0xca814e[_0x4455cf(0x40a)]=_0xca814e?.['subjectTime']&&_0xca814e[_0x4455cf(0x40a)][_0x4455cf(0x20e)]()['length']<0xd?_0xca814e?.[_0x4455cf(0x40a)]*0x3e8:_0xca814e?.[_0x4455cf(0x40a)]||null,_0xca814e[_0x4455cf(0x412)]=_0xca814e?.[_0x4455cf(0x412)]&&_0xca814e[_0x4455cf(0x412)][_0x4455cf(0x20e)]()[_0x4455cf(0x250)]<0xd?_0xca814e?.['creation']*0x3e8:_0xca814e?.[_0x4455cf(0x412)]||null,!_0xca814e[_0x4455cf(0x1b1)])try{_0xca814e['image']=await this['client'][_0x4455cf(0x85a)](_0xca814e['id'],_0x4455cf(0x6a6));}catch(_0x95787a){this[_0x4455cf(0x5e7)]['verbose'](this[_0x4455cf(0x29c)]+'\x20('+this['instance'][_0x4455cf(0x7a3)]+_0x4455cf(0x6da)+_0xca814e['id']+':\x20'+(_0x95787a instanceof Error?_0x95787a[_0x4455cf(0x80a)]:JSON[_0x4455cf(0x34b)](_0x95787a,null,0x2)));}let _0x38c323=_0xca814e[_0x4455cf(0x62a)][_0x4455cf(0x5b0)](_0x30aba3=>{const _0x500459=_0x4455cf;let _0x297e5b=_0x54c963?.[_0x500459(0x4ca)]?.[_0x500459(0x62a)]['find'](_0x379641=>_0x379641['id']===_0x30aba3['id']);return{..._0x30aba3,'isAdmin':[_0x500459(0x820),'superadmin']['includes'](_0x30aba3[_0x500459(0x820)]),'admin':_0x30aba3['admin'],'name':_0x297e5b?.['name']||_0x30aba3['name'],'imgUrl':_0x297e5b?.[_0x500459(0x38b)]||_0x30aba3[_0x500459(0x38b)]};}),_0x1dfb27=_0x38c323[_0x4455cf(0x4a9)](_0x30c54d=>_0x30c54d['id']===this[_0x4455cf(0x584)][_0x4455cf(0x7a3)]+_0x4455cf(0x765)&&_0x30c54d['admin']!=null)||!0x1,_0x338abf=(!_0xca814e[_0x4455cf(0x399)]||_0x1dfb27)&&(!_0xca814e[_0x4455cf(0x44f)]||_0x1dfb27),_0x25ba5c={..._0xca814e,'participants':_0x38c323,'awaitingApproval':_0x54c963?.[_0x4455cf(0x4ca)]?.[_0x4455cf(0x642)]||[],'lastFetchAwaitingApproval':_0x54c963?.[_0x4455cf(0x4ca)]?.['lastFetchAwaitingApproval'],'isAdmin':_0x1dfb27,'canSendMessage':_0x338abf,'lastUpdate':Date[_0x4455cf(0x5eb)]()};await this[_0x4455cf(0x677)][_0x4455cf(0x2fb)][_0x4455cf(0x32f)]({'where':{'_id':_0xca814e['id']}},{'imagechat':_0xca814e['image'],'name':_0xca814e[_0x4455cf(0x268)],'group':!0x0,'groupdata':_0x25ba5c,'lastcache':Date[_0x4455cf(0x5eb)]()},this[_0x4455cf(0x584)][_0x4455cf(0x7a3)]),F(this[_0x4455cf(0x29c)],_0x4455cf(0x806),{'chat':_0xca814e});}async[a0_0xf2a334(0x6c8)](_0xab6009){const _0x36f9fc=a0_0xf2a334;let _0x213c88=await this['repository'][_0x36f9fc(0x2fb)][_0x36f9fc(0x18a)]({'where':{'_id':_0xab6009['id']}},this[_0x36f9fc(0x584)]['wuid']);_0xab6009[_0x36f9fc(0x40a)]=_0xab6009?.[_0x36f9fc(0x40a)]&&_0xab6009['subjectTime'][_0x36f9fc(0x20e)]()[_0x36f9fc(0x250)]<0xd?_0xab6009?.[_0x36f9fc(0x40a)]*0x3e8:_0xab6009?.[_0x36f9fc(0x40a)]||null,_0xab6009[_0x36f9fc(0x412)]=_0xab6009?.[_0x36f9fc(0x412)]&&_0xab6009['creation'][_0x36f9fc(0x20e)]()['length']<0xd?_0xab6009?.[_0x36f9fc(0x412)]*0x3e8:_0xab6009?.[_0x36f9fc(0x412)]||null,_0xab6009[_0x36f9fc(0x889)]&&(_0xab6009[_0x36f9fc(0x889)]=_0x36f9fc(0x795)+_0xab6009['inviteCode']);let _0x755ab3=_0x213c88?.['groupdata']?{..._0x213c88[_0x36f9fc(0x4ca)]}:{};Object[_0x36f9fc(0x3e5)](_0xab6009)[_0x36f9fc(0x3b5)](_0x6033ef=>{_0x6033ef!=='id'&&(_0x755ab3[_0x6033ef]=_0xab6009[_0x6033ef]);});let _0x29d22b=_0x755ab3[_0x36f9fc(0x62a)]?.['some'](_0x540865=>_0x540865['id']===this['instance']['wuid']+'@s.whatsapp.net'&&_0x540865[_0x36f9fc(0x820)]!=null)||!0x1;_0x755ab3[_0x36f9fc(0x3f4)]=_0x29d22b;let _0x2d5ef0=(!_0x755ab3[_0x36f9fc(0x399)]||_0x29d22b)&&(!_0x755ab3[_0x36f9fc(0x44f)]||_0x29d22b);_0x755ab3[_0x36f9fc(0x4b7)]=_0x2d5ef0;let _0xd5fd2a={'group':!0x0,'groupdata':_0x755ab3};_0xab6009[_0x36f9fc(0x268)]&&(_0xd5fd2a['name']=_0xab6009[_0x36f9fc(0x268)]),await this[_0x36f9fc(0x677)][_0x36f9fc(0x2fb)][_0x36f9fc(0x32f)]({'where':{'_id':_0xab6009['id']}},_0xd5fd2a,this[_0x36f9fc(0x584)][_0x36f9fc(0x7a3)],{'upsert':!0x0}),F(this[_0x36f9fc(0x29c)],'chats',{'chat':_0xd5fd2a});}async['updateGroupParticipantsWebhook'](_0x14432f){const _0xd0c6a0=a0_0xf2a334;let _0x552381=await this[_0xd0c6a0(0x677)][_0xd0c6a0(0x2fb)]['findOne']({'where':{'_id':_0x14432f['id']}},this[_0xd0c6a0(0x584)][_0xd0c6a0(0x7a3)]);if(!_0x552381||!_0x552381['groupdata']){this[_0xd0c6a0(0x5e7)][_0xd0c6a0(0x5b4)](this[_0xd0c6a0(0x29c)]+'\x20('+this[_0xd0c6a0(0x584)][_0xd0c6a0(0x7a3)]+'):\x20Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x20'+_0x14432f['id']);return;}let _0x5d1c3d=await this[_0xd0c6a0(0x677)][_0xd0c6a0(0x749)][_0xd0c6a0(0x1f9)](_0x14432f['participants']),_0x5c0849=[..._0x552381['groupdata']?.[_0xd0c6a0(0x62a)]];switch(_0x14432f['action']){case'add':_0x5d1c3d['map'](_0x315bf9=>({'id':_0x315bf9[_0xd0c6a0(0x29b)],'isAdmin':!0x1,'name':_0x315bf9[_0xd0c6a0(0x76f)],'imgUrl':_0x315bf9[_0xd0c6a0(0x20b)]}))[_0xd0c6a0(0x3b5)](_0x8e5e18=>{const _0x3382dc=_0xd0c6a0;_0x5c0849[_0x3382dc(0x4a9)](_0x1ce3ec=>_0x1ce3ec['id']===_0x8e5e18['id'])||(_0x5c0849[_0x3382dc(0x355)](_0x8e5e18),this[_0x3382dc(0x5e7)]['info'](_0x3382dc(0x888)+JSON[_0x3382dc(0x34b)](_0x8e5e18)));});break;case _0xd0c6a0(0x5c8):_0x5c0849=_0x5c0849[_0xd0c6a0(0x3c9)](_0x26e284=>!_0x14432f[_0xd0c6a0(0x62a)][_0xd0c6a0(0x343)](_0x26e284['id']));break;case _0xd0c6a0(0x3b3):_0x5c0849=_0x5c0849[_0xd0c6a0(0x5b0)](_0x2acd0d=>_0x14432f[_0xd0c6a0(0x62a)][_0xd0c6a0(0x343)](_0x2acd0d['id'])?{..._0x2acd0d,'isAdmin':!0x0,'admin':_0xd0c6a0(0x820)}:_0x2acd0d);break;case _0xd0c6a0(0x285):_0x5c0849=_0x5c0849['map'](_0x2778ac=>_0x14432f['participants'][_0xd0c6a0(0x343)](_0x2778ac['id'])?{..._0x2778ac,'isAdmin':!0x1,'admin':null}:_0x2778ac);break;}let _0x4d6345=_0x5c0849['length'],_0x51d574=_0x5c0849['some'](_0x309b9f=>_0x309b9f['id']===this[_0xd0c6a0(0x584)][_0xd0c6a0(0x7a3)]+_0xd0c6a0(0x765)),_0x9cab21=_0x51d574&&_0x5c0849[_0xd0c6a0(0x4a9)](_0x216a8d=>_0x216a8d['id']===this[_0xd0c6a0(0x584)][_0xd0c6a0(0x7a3)]+_0xd0c6a0(0x765)&&_0x216a8d['admin']!=null)||!0x1,_0x5e139c=_0x51d574&&(!_0x552381[_0xd0c6a0(0x4ca)]['announce']||_0x9cab21)&&(!_0x552381['groupdata'][_0xd0c6a0(0x44f)]||_0x9cab21);await this[_0xd0c6a0(0x677)][_0xd0c6a0(0x2fb)][_0xd0c6a0(0x32f)]({'where':{'_id':_0x14432f['id']}},{'groupdata':{..._0x552381[_0xd0c6a0(0x4ca)],'participants':_0x5c0849,'size':_0x4d6345,'isAdmin':_0x9cab21,'canSendMessage':_0x5e139c}},this[_0xd0c6a0(0x584)][_0xd0c6a0(0x7a3)]),this['logger'][_0xd0c6a0(0x5b4)](this[_0xd0c6a0(0x29c)]+'\x20('+this[_0xd0c6a0(0x584)]['wuid']+_0xd0c6a0(0x385)+_0x14432f['id']+'\x20atualizado\x20com\x20sucesso.\x20Ação:\x20'+_0x14432f['action']+_0xd0c6a0(0x674)+_0x4d6345+',\x20isAdmin:\x20'+_0x9cab21+',\x20canSendMessage:\x20'+_0x5e139c);}async['inviteCode'](_0x16e5bb,_0x3f1303=!0x0){const _0x4754fa=a0_0xf2a334;try{let _0x86c18a=await this[_0x4754fa(0x90d)][_0x4754fa(0x59b)](_0x16e5bb[_0x4754fa(0x291)]),_0x67adc8={'groupdata.inviteCode':_0x4754fa(0x795)+_0x86c18a};if(_0x3f1303){let _0x2c6312=await this['repository'][_0x4754fa(0x2fb)][_0x4754fa(0x32f)]({'where':{'_id':_0x16e5bb[_0x4754fa(0x291)]}},_0x67adc8,this['instance'][_0x4754fa(0x7a3)]);}return{'inviteUrl':'https://chat.whatsapp.com/'+_0x86c18a,'inviteCode':_0x86c18a};}catch(_0x24838c){let _0x239fe0=_0x4754fa(0x756),_0x1f77d1=_0x24838c instanceof Error?_0x24838c[_0x4754fa(0x80a)]:typeof _0x24838c==_0x4754fa(0x524)?JSON['stringify'](_0x24838c):_0x24838c,_0x4700df=_0x239fe0+':\x20'+_0x1f77d1;throw this[_0x4754fa(0x5e7)][_0x4754fa(0x830)](this[_0x4754fa(0x29c)]+'\x20('+this[_0x4754fa(0x584)][_0x4754fa(0x7a3)]+_0x4754fa(0x62f)+_0x4700df),new U(_0x4700df);}}async[a0_0xf2a334(0x692)](_0x5c365a){const _0x4d76f9=a0_0xf2a334;try{let _0xcfa4ae=await this['client'][_0x4d76f9(0x1d7)](_0x5c365a['groupJid']);return{'revoked':!0x0,'inviteUrl':_0x4d76f9(0x795)+_0xcfa4ae,'inviteCode':_0xcfa4ae};}catch(_0x315aa7){let _0x1ed0ba=_0x4d76f9(0x906),_0x1ee588=_0x315aa7 instanceof Error?_0x315aa7[_0x4d76f9(0x80a)]:typeof _0x315aa7==_0x4d76f9(0x524)?JSON[_0x4d76f9(0x34b)](_0x315aa7):_0x315aa7,_0x474b2f=_0x1ed0ba+':\x20'+_0x1ee588;throw this[_0x4d76f9(0x5e7)][_0x4d76f9(0x830)](this['instanceName']+'\x20('+this[_0x4d76f9(0x584)]['wuid']+'):\x20'+_0x474b2f),new U(_0x474b2f);}}async[a0_0xf2a334(0x8dc)](_0x12a7d3){const _0xfc303f=a0_0xf2a334;try{if((0x0,J[_0xfc303f(0x79d)])(_0x12a7d3[_0xfc303f(0x889)]))var _0x4ee7b7=_0x12a7d3['inviteCode'][_0xfc303f(0x8a0)]('/')[0x3];else var _0x4ee7b7=_0x12a7d3[_0xfc303f(0x889)];let _0x5094e6=await this[_0xfc303f(0x90d)][_0xfc303f(0x283)](_0x4ee7b7);return this[_0xfc303f(0x5e7)]['verbose'](this[_0xfc303f(0x29c)]+'\x20('+this[_0xfc303f(0x584)][_0xfc303f(0x7a3)]+_0xfc303f(0x62f)+_0x5094e6),{'join':!0x0,'inviteCode':_0x4ee7b7,'groupJid':_0x5094e6};}catch(_0x4fbe20){let _0x355f32=_0xfc303f(0x8d9),_0x4f6d5c=_0x4fbe20 instanceof Error?_0x4fbe20[_0xfc303f(0x80a)]:typeof _0x4fbe20==_0xfc303f(0x524)?JSON['stringify'](_0x4fbe20):_0x4fbe20,_0x4401a4=_0x355f32+':\x20'+_0x4f6d5c;throw this['logger'][_0xfc303f(0x830)](this[_0xfc303f(0x29c)]+'\x20('+this[_0xfc303f(0x584)][_0xfc303f(0x7a3)]+_0xfc303f(0x62f)+_0x4401a4),new U(_0x4401a4);}}async['findParticipants'](_0xe81dcd){const _0x4b1a8a=a0_0xf2a334;try{return{'participants':(await this[_0x4b1a8a(0x677)][_0x4b1a8a(0x2fb)][_0x4b1a8a(0x18a)]({'where':{'_id':_0xe81dcd['groupJid']}},this[_0x4b1a8a(0x584)][_0x4b1a8a(0x7a3)]))[_0x4b1a8a(0x4ca)]['participants']};}catch(_0x400b36){let _0x50c80b='Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants',_0x477072=_0x400b36 instanceof Error?_0x400b36[_0x4b1a8a(0x80a)]:typeof _0x400b36==_0x4b1a8a(0x524)?JSON[_0x4b1a8a(0x34b)](_0x400b36):_0x400b36,_0x20ed76=_0x50c80b+':\x20'+_0x477072;throw this['logger'][_0x4b1a8a(0x830)](this[_0x4b1a8a(0x29c)]+'\x20('+this[_0x4b1a8a(0x584)][_0x4b1a8a(0x7a3)]+_0x4b1a8a(0x62f)+_0x20ed76),new U(_0x20ed76);}}async[a0_0xf2a334(0x239)](_0x1e7bcd){const _0x28d832=a0_0xf2a334;try{return await this['client'][_0x28d832(0x405)](_0x1e7bcd['groupJid']),{'groupJid':_0x1e7bcd['groupJid'],'leave':!0x0};}catch(_0x4c3764){let _0x1265b5=_0x28d832(0x816),_0x1939c2=_0x4c3764 instanceof Error?_0x4c3764['message']:typeof _0x4c3764==_0x28d832(0x524)?JSON[_0x28d832(0x34b)](_0x4c3764):_0x4c3764,_0x3f09e9=_0x1265b5+':\x20'+_0x1939c2;throw this[_0x28d832(0x5e7)][_0x28d832(0x830)](this[_0x28d832(0x29c)]+'\x20('+this[_0x28d832(0x584)]['wuid']+'):\x20'+_0x3f09e9),new m(_0x3f09e9);}}async['pollMessage'](_0x3140c6){const _0x2a410a=a0_0xf2a334;return await this['sendMessageWithTyping'](_0x3140c6[_0x2a410a(0x50d)],{'poll':{'name':_0x3140c6[_0x2a410a(0x387)]?.[_0x2a410a(0x76f)],'selectableCount':_0x3140c6['pollMessage'][_0x2a410a(0x2a0)],'values':_0x3140c6[_0x2a410a(0x387)][_0x2a410a(0x5cf)]}},_0x3140c6?.['options']);}async[a0_0xf2a334(0x5b6)](_0x3292bf){const _0x1c311c=a0_0xf2a334;return await this['sendMessageWithTyping'](_0x3292bf[_0x1c311c(0x50d)],{'listMessage':{'title':_0x3292bf['listMessage'][_0x1c311c(0x434)],'description':_0x3292bf[_0x1c311c(0x5b6)][_0x1c311c(0x22e)],'buttonText':_0x3292bf[_0x1c311c(0x5b6)]?.[_0x1c311c(0x1ad)],'footerText':_0x3292bf['listMessage']?.[_0x1c311c(0x508)],'sections':_0x3292bf[_0x1c311c(0x5b6)][_0x1c311c(0x8c8)],'listType':0x2}},_0x3292bf?.[_0x1c311c(0x63a)]);}async[a0_0xf2a334(0x670)](_0xffdbec){const _0x1b6019=a0_0xf2a334;this[_0x1b6019(0x584)][_0x1b6019(0x769)]===void 0x0&&await this['isBusinessInstance']();let _0x156198;if(_0xffdbec[_0x1b6019(0x670)]['type']===_0x1b6019(0x3ad)||_0xffdbec[_0x1b6019(0x670)][_0x1b6019(0x519)]===_0x1b6019(0x284)){let _0x5eb98f=_0xffdbec['menuMessage'][_0x1b6019(0x439)][_0x1b6019(0x639)]('\x0a'),_0x5775a8='',_0xfadd8b='';_0x5eb98f!==-0x1?(_0x5775a8=_0xffdbec[_0x1b6019(0x670)][_0x1b6019(0x439)][_0x1b6019(0x17b)](0x0,_0x5eb98f)[_0x1b6019(0x66c)](),_0xfadd8b=_0xffdbec['menuMessage']['text']['substring'](_0x5eb98f+0x1)):_0xfadd8b=_0xffdbec[_0x1b6019(0x670)][_0x1b6019(0x439)];let _0x1dab83=_0xffdbec[_0x1b6019(0x670)]['choices'][_0x1b6019(0x3c9)](_0x109f06=>_0x109f06['trim']()!==''),_0x150af6=this['createSectionsFromValues'](_0x1dab83);_0x156198={'listMessage':{'title':_0x5775a8,'description':_0xfadd8b,'buttonText':_0xffdbec[_0x1b6019(0x670)][_0x1b6019(0x1ad)]||'Selecione','footerText':_0xffdbec[_0x1b6019(0x670)][_0x1b6019(0x508)],'sections':_0x150af6,'listType':0x2}};}else{if(_0xffdbec[_0x1b6019(0x670)]['type']===_0x1b6019(0x5dd)){let _0x46a556=_0xffdbec[_0x1b6019(0x670)][_0x1b6019(0x8fd)][_0x1b6019(0x3c9)](_0x55bc26=>!(_0x55bc26[_0x1b6019(0x2f0)]('[')&&_0x55bc26['endsWith'](']'))&&_0x55bc26[_0x1b6019(0x66c)]()!=='')[_0x1b6019(0x5b0)](_0x3e0ea7=>_0x3e0ea7[_0x1b6019(0x8a0)]('\x0a')[0x0]);for(;_0x46a556[_0x1b6019(0x250)]<0x2;)_0x46a556[_0x1b6019(0x355)](_0x1b6019(0x7f3)+(_0x46a556[_0x1b6019(0x250)]+0x1));_0x156198={'poll':{'name':_0xffdbec[_0x1b6019(0x670)][_0x1b6019(0x439)],'selectableCount':_0xffdbec[_0x1b6019(0x670)][_0x1b6019(0x2a0)]||0x1,'values':_0x46a556}};}else{if(_0xffdbec[_0x1b6019(0x670)][_0x1b6019(0x519)]===_0x1b6019(0x505)){let _0x214ed9=this[_0x1b6019(0x1be)](_0xffdbec['menuMessage'][_0x1b6019(0x8fd)]['filter'](_0x450dfc=>!(_0x450dfc['startsWith']('[')&&_0x450dfc[_0x1b6019(0x8de)](']'))));return _0x156198={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0xffdbec[_0x1b6019(0x670)]['text']},'footer':_0xffdbec[_0x1b6019(0x670)]['footerText']?{'text':_0xffdbec[_0x1b6019(0x670)][_0x1b6019(0x508)]}:void 0x0,'nativeFlowMessage':{'buttons':_0x214ed9,'messageParamsJson':JSON[_0x1b6019(0x34b)]({'from':_0x1b6019(0x576),'templateId':_0x1b6019(0x4b2)+(0x0,oe[_0x1b6019(0x60b)])(0x12)[_0x1b6019(0x20e)]('hex')[_0x1b6019(0x563)]()})}}}}},await this[_0x1b6019(0x34c)](_0xffdbec[_0x1b6019(0x50d)],_0x156198,_0xffdbec?.[_0x1b6019(0x63a)]);}else{if(_0xffdbec[_0x1b6019(0x670)]['type']===_0x1b6019(0x531)){let _0x581c57=this[_0x1b6019(0x8fa)](_0xffdbec['menuMessage'][_0x1b6019(0x8fd)]);return _0x156198={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0xffdbec[_0x1b6019(0x670)][_0x1b6019(0x439)]},'footer':_0xffdbec['menuMessage'][_0x1b6019(0x508)]?{'text':_0xffdbec['menuMessage'][_0x1b6019(0x508)]}:void 0x0,'nativeFlowMessage':{'buttons':_0x581c57,'messageParamsJson':JSON['stringify']({'from':_0x1b6019(0x576),'templateId':_0x1b6019(0x4b2)+(0x0,oe[_0x1b6019(0x60b)])(0x12)[_0x1b6019(0x20e)](_0x1b6019(0x1b3))[_0x1b6019(0x563)]()})}}}}},await this[_0x1b6019(0x34c)](_0xffdbec[_0x1b6019(0x50d)],_0x156198,_0xffdbec?.['options']);}}}}return await this[_0x1b6019(0x41d)](_0xffdbec[_0x1b6019(0x50d)],_0x156198,_0xffdbec?.[_0x1b6019(0x63a)]);}['createButtonsFromValues'](_0x47eaf9){const _0x129f8f=a0_0xf2a334;return _0x47eaf9[_0x129f8f(0x5b0)](_0x19b758=>{const _0x4b8a35=_0x129f8f;let _0x3ed53d=_0x19b758[_0x4b8a35(0x8a0)]('\x0a')[_0x4b8a35(0x5b0)](_0x4b4312=>_0x4b4312['trim']()),_0x53398f=_0x3ed53d[0x0],_0x3349a4=_0x3ed53d[0x1]||_0x53398f,_0x4fe7c5=_0x3349a4[_0x4b8a35(0x2f0)](_0x4b8a35(0x516))?'cta_url':_0x4b8a35(0x593);return{'name':_0x4fe7c5,'buttonParamsJson':JSON['stringify']({'display_text':_0x53398f,'id':_0x4fe7c5===_0x4b8a35(0x593)?_0x3349a4:void 0x0,'url':_0x4fe7c5===_0x4b8a35(0x3a4)?_0x3349a4:void 0x0})};});}['createButtonSectionsFromValues'](_0x249335){const _0x3fffbc=a0_0xf2a334;let _0x44cac0=[],_0x505aa={'title':'','rows':[]};return _0x249335[_0x3fffbc(0x3b5)](_0x1eea86=>{const _0x3b7ade=_0x3fffbc;if(_0x1eea86[_0x3b7ade(0x2f0)]('[')&&_0x1eea86[_0x3b7ade(0x8de)](']'))_0x505aa[_0x3b7ade(0x8b3)][_0x3b7ade(0x250)]>0x0&&_0x44cac0[_0x3b7ade(0x355)](_0x505aa),_0x505aa={'title':_0x1eea86['slice'](0x1,-0x1),'rows':[]};else{let _0x3b3c5c=_0x1eea86[_0x3b7ade(0x8a0)]('\x0a')[_0x3b7ade(0x5b0)](_0x56ed9f=>_0x56ed9f['trim']()),_0x3ba097=_0x3b3c5c[0x0],_0x3cf025=_0x3b3c5c[0x1]?_0x3b3c5c[0x1]:void 0x0,_0x41b16f=_0x3b3c5c[0x2]||_0x3ba097;_0x505aa[_0x3b7ade(0x8b3)][_0x3b7ade(0x355)]({'title':_0x3ba097,'description':_0x3cf025,'id':_0x41b16f});}}),_0x505aa[_0x3fffbc(0x8b3)][_0x3fffbc(0x250)]>0x0&&_0x44cac0[_0x3fffbc(0x355)](_0x505aa),[{'name':_0x3fffbc(0x2ba),'buttonParamsJson':JSON[_0x3fffbc(0x34b)]({'title':'Selecione\x20uma\x20opção','sections':_0x44cac0})}];}['createSectionsFromValues'](_0x567577){const _0x214e39=a0_0xf2a334;let _0x5c88d3=[],_0x4e1d53={'rows':[]};return _0x567577[_0x214e39(0x3b5)](_0x544eae=>{const _0x22eb7b=_0x214e39;if(_0x544eae['startsWith']('[')&&_0x544eae['endsWith'](']'))_0x4e1d53['rows']['length']>0x0&&_0x5c88d3[_0x22eb7b(0x355)](_0x4e1d53),_0x4e1d53={'title':_0x544eae[_0x22eb7b(0x662)](0x1,-0x1),'rows':[]};else{let _0x3c9692=_0x544eae['split']('\x0a')[_0x22eb7b(0x5b0)](_0x2a9ff6=>_0x2a9ff6[_0x22eb7b(0x66c)]()),_0x3bc4a1=_0x3c9692[0x0],_0x10c3c5=_0x3c9692[0x1]||null,_0x1b6e96=_0x3c9692[0x2]||_0x3bc4a1;_0x4e1d53[_0x22eb7b(0x8b3)][_0x22eb7b(0x355)]({'title':_0x3bc4a1,'description':_0x10c3c5,'rowId':_0x1b6e96});}}),_0x4e1d53[_0x214e39(0x8b3)][_0x214e39(0x250)]>0x0&&_0x5c88d3['push'](_0x4e1d53),_0x5c88d3;}async[a0_0xf2a334(0x705)](_0x4f155f,_0x116779){const _0x55ac1a=a0_0xf2a334;if(await this['getMessage'](_0x4f155f,!0x0)){let _0x3d7449={'where':{'_id':_0x4f155f['id']}},_0x1c15b3={'status':[_0x116779[_0x55ac1a(0x7cb)]][0x0]};try{let _0x3bf9b9=await this[_0x55ac1a(0x677)][_0x55ac1a(0x80a)]['update'](_0x3d7449,_0x1c15b3,this[_0x55ac1a(0x584)][_0x55ac1a(0x7a3)]);_0x3bf9b9&&F(this[_0x55ac1a(0x29c)],'messages',{'message':_0x3bf9b9});}catch{}}}['sectionsToString'](_0x3bd0a3){const _0x55312e=a0_0xf2a334;let _0x438e9f=[];return _0x3bd0a3[_0x55312e(0x3b5)](_0x5df947=>{const _0x197a5e=_0x55312e;_0x5df947['title']&&_0x438e9f[_0x197a5e(0x355)]('['+_0x5df947['title']+']'),_0x5df947[_0x197a5e(0x8b3)][_0x197a5e(0x3b5)](_0x4831e8=>{const _0x515d26=_0x197a5e;_0x438e9f[_0x515d26(0x355)](_0x4831e8[_0x515d26(0x434)]);});}),_0x438e9f[_0x55312e(0x666)]('|');}[a0_0xf2a334(0x547)](_0x441efc){const _0x57d7c8=a0_0xf2a334;let _0x44730b=_0x441efc[_0x57d7c8(0x6b0)](/\\n/g,'\x0a')[_0x57d7c8(0x8a0)]('\x0a')[_0x57d7c8(0x3c9)](_0x110ab1=>_0x110ab1[_0x57d7c8(0x343)](_0x57d7c8(0x861))||_0x110ab1[_0x57d7c8(0x343)](_0x57d7c8(0x44d))),_0x241c38='';return _0x44730b[_0x57d7c8(0x3b5)](_0x31ea32=>{const _0x1fc62a=_0x57d7c8;let _0x4b89c7=/TEL(?:.*):(.+)/,_0x2a395b=/EMAIL(?:.*):(.+)/,_0x2a7f12=_0x31ea32[_0x1fc62a(0x834)](_0x4b89c7),_0x2d2de3=_0x31ea32[_0x1fc62a(0x834)](_0x2a395b);if(_0x2a7f12){let _0x116fa3=_0x2a7f12[0x1]['replace'](/-| |\+|\(|\)/g,'')[_0x1fc62a(0x66c)]();_0x241c38+=_0x1fc62a(0x4ed)+_0x116fa3+'\x0a';}else{if(_0x2d2de3){let _0x3472d8=_0x2d2de3[0x1]['trim']();_0x241c38+='E-mail:\x20'+_0x3472d8+'\x0a';}}}),_0x241c38['trim']();}async[a0_0xf2a334(0x29d)](_0x5bc64c,_0x5e1075,_0x1581cc,_0x4e4173=null){const _0x18e6ec=a0_0xf2a334;if(_0x5bc64c['ENABLED'])try{let _0x37c400=_0x5e1075[_0x18e6ec(0x28c)]['remoteJid'][_0x18e6ec(0x6b0)](/:\d{1,2}@/g,'@'),_0x272b1a=_0x5e1075[_0x18e6ec(0x28c)][_0x18e6ec(0x329)],_0x4e3294=_0x37c400['endsWith'](_0x18e6ec(0x701)),_0x2fc1cf=_0x5e1075[_0x18e6ec(0x23e)]?.[_0x18e6ec(0x6b0)](/:\d{1,2}@/g,'@')||'',_0x26e3f5=_0x5e1075[_0x18e6ec(0x1f0)]?.[_0x18e6ec(0x439)]||_0x5e1075[_0x18e6ec(0x1f0)]?.[_0x18e6ec(0x49d)]||_0x5e1075[_0x18e6ec(0x1f0)]?.[_0x18e6ec(0x24f)]||_0x5e1075[_0x18e6ec(0x1f0)]?.['name']||'',_0x24d3c9={'_id':_0x5e1075[_0x18e6ec(0x29b)],'remoteJid':_0x272b1a?this[_0x18e6ec(0x584)][_0x18e6ec(0x7a3)]:_0x4e3294?_0x2fc1cf:_0x37c400,'pushName':_0x272b1a?this[_0x18e6ec(0x584)][_0x18e6ec(0x27a)]||'Eu':_0x5e1075[_0x18e6ec(0x27d)],'text':_0x26e3f5,'type':_0x5e1075[_0x18e6ec(0x7a8)],'when':_0x5e1075[_0x18e6ec(0x4f1)]||Date[_0x18e6ec(0x5eb)]()};_0x4e4173||(_0x4e4173=await this['repository'][_0x18e6ec(0x2fb)][_0x18e6ec(0x18a)]({'where':{'_id':_0x37c400}},this['instance'][_0x18e6ec(0x7a3)]));let _0x5529b2=_0x272b1a?0x0:_0x4e4173?(_0x4e4173[_0x18e6ec(0x82a)]||0x0)+0x1:0x1,_0x5a4f22={'lastmsg':_0x5e1075['messageTimestamp']||Date['now'](),'ephemeralExpiration':_0x5e1075['expiration'],'lastMessage':_0x24d3c9,'unreadcount':_0x5529b2,..._0x272b1a||_0x4e3294?{}:{'name':_0x5e1075[_0x18e6ec(0x27d)]},..._0x4e3294?{'group':_0x4e3294}:{},...!_0x272b1a&&!_0x4e3294&&_0x5e1075[_0x18e6ec(0x85a)]?{'imagechat':_0x5e1075['profilePictureUrl']}:{}};if(!_0x4e3294&&(!_0x4e4173?.[_0x18e6ec(0x1df)]||!_0x4e4173[_0x18e6ec(0x1df)]['nome'])&&_0x5e1075['pushName']&&!_0x272b1a&&(_0x5a4f22={..._0x5a4f22,'leadInfo.nome':_0x5e1075[_0x18e6ec(0x27d)]}),_0x4e4173?.[_0x18e6ec(0x1df)][_0x18e6ec(0x301)]||(_0x5a4f22={..._0x5a4f22,'leadInfo.etiquetas':[]}),_0x4e4173?.[_0x18e6ec(0x1df)][_0x18e6ec(0x910)]||(_0x5a4f22={..._0x5a4f22,'leadInfo.customFields':[]}),_0x4e4173?.[_0x18e6ec(0x1df)][_0x18e6ec(0x804)]||(_0x5a4f22={..._0x5a4f22,'leadInfo.tags':[]}),_0x4e4173&&_0x4e4173?.['imported']){let _0x46d1b7=await this[_0x18e6ec(0x677)][_0x18e6ec(0x1c8)]['find']({'where':{}},this[_0x18e6ec(0x584)][_0x18e6ec(0x7a3)]),_0x14cb92=new Set(_0x46d1b7[_0x18e6ec(0x5b0)](_0x1a4554=>_0x1a4554[_0x18e6ec(0x29b)])),_0x41c58c=(_0x4e4173['leadInfo']?.[_0x18e6ec(0x301)]||[])[_0x18e6ec(0x3c9)](_0x3191f9=>_0x14cb92['has'](_0x3191f9));_0x5a4f22={..._0x5a4f22,'imported':!0x1,'leadInfo.etiquetas':_0x41c58c};for(let _0x551434 of _0x41c58c)await this[_0x18e6ec(0x198)](_0x551434,_0x37c400);}if(!this['AutomateSystem']['flows'][_0x18e6ec(0x556)](_0x585430=>_0x585430['startCommand']&&_0x26e3f5[_0x18e6ec(0x343)](_0x585430[_0x18e6ec(0x872)]))&&_0x1581cc===_0x18e6ec(0x184)&&_0x272b1a&&this[_0x18e6ec(0x580)]?.[_0x18e6ec(0x5bd)][_0x18e6ec(0x3f8)]&&_0x26e3f5[_0x18e6ec(0x66c)]()!==this[_0x18e6ec(0x580)]?.[_0x18e6ec(0x5bd)][_0x18e6ec(0x553)][_0x18e6ec(0x66c)]()){let _0x4a868d=(this[_0x18e6ec(0x580)]?.['flowConfig']['stopWhenYouSendMsg']||0x0)*0xea60,_0x1bacbe=Date[_0x18e6ec(0x5eb)]()+_0x4a868d;_0x4e4173?.[_0x18e6ec(0x1df)]?.[_0x18e6ec(0x64f)]===0x0||(_0x5a4f22={..._0x5a4f22,'leadInfo.desativadoFluxoAte':_0x1bacbe},this[_0x18e6ec(0x5e7)][_0x18e6ec(0x6a3)](this[_0x18e6ec(0x29c)]+'\x20('+this[_0x18e6ec(0x584)]['wuid']+'):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20'+_0x1bacbe+'.'));}if(_0x26e3f5[_0x18e6ec(0x66c)]()===this[_0x18e6ec(0x580)]?.[_0x18e6ec(0x5bd)][_0x18e6ec(0x553)][_0x18e6ec(0x66c)]()){this[_0x18e6ec(0x5e7)]['verbose'](this[_0x18e6ec(0x29c)]+'\x20('+this[_0x18e6ec(0x584)][_0x18e6ec(0x7a3)]+_0x18e6ec(0x437)+_0x26e3f5);let _0x15aa2f=Date['now']();this[_0x18e6ec(0x580)]?.[_0x18e6ec(0x5bd)][_0x18e6ec(0x2c1)]===0x0?_0x5a4f22={..._0x5a4f22,'leadInfo.desativadoFluxoAte':_0x15aa2f+0x7591f6200}:_0x5a4f22={..._0x5a4f22,'leadInfo.desativadoFluxoAte':_0x15aa2f+this[_0x18e6ec(0x580)]?.[_0x18e6ec(0x5bd)][_0x18e6ec(0x2c1)]*0x3c*0x3e8};}if(_0x4e4173=await this[_0x18e6ec(0x677)][_0x18e6ec(0x2fb)][_0x18e6ec(0x32f)]({'where':{'_id':_0x37c400}},_0x5a4f22,this[_0x18e6ec(0x584)][_0x18e6ec(0x7a3)],{'new':!0x0,'upsert':!0x0}),_0x4e4173)F(this[_0x18e6ec(0x29c)],'chats',{'chat':_0x4e4173});else{this[_0x18e6ec(0x5e7)]['error'](this[_0x18e6ec(0x29c)]+'\x20('+this[_0x18e6ec(0x584)][_0x18e6ec(0x7a3)]+_0x18e6ec(0x753));return;}if(_0x272b1a)return this[_0x18e6ec(0x5e7)][_0x18e6ec(0x6a3)](this[_0x18e6ec(0x29c)]+'\x20('+this['instance']['wuid']+_0x18e6ec(0x5de)),null;if(!this[_0x18e6ec(0x580)]?.[_0x18e6ec(0x5bd)][_0x18e6ec(0x3f8)])return this['logger'][_0x18e6ec(0x6a3)](this[_0x18e6ec(0x29c)]+'\x20('+this['instance'][_0x18e6ec(0x7a3)]+'):\x20Flow\x20desativado'),null;if(_0x4e4173[_0x18e6ec(0x29b)][_0x18e6ec(0x343)](_0x18e6ec(0x701))&&this['AutomateSystem']?.[_0x18e6ec(0x5bd)][_0x18e6ec(0x592)]===!0x0)return this[_0x18e6ec(0x5e7)][_0x18e6ec(0x6a3)](this[_0x18e6ec(0x29c)]+'\x20('+this['instance'][_0x18e6ec(0x7a3)]+_0x18e6ec(0x862)),null;if(_0x4e4173[_0x18e6ec(0x1df)]){if(_0x4e4173['leadInfo'][_0x18e6ec(0x64f)]===0x0||_0x4e4173[_0x18e6ec(0x1df)]['atendimentoAberto'])return this['logger'][_0x18e6ec(0x6a3)](this['instanceName']+'\x20('+this[_0x18e6ec(0x584)]['wuid']+_0x18e6ec(0x8bf)+_0x37c400+_0x18e6ec(0x1ee)),null;if(_0x4e4173[_0x18e6ec(0x1df)][_0x18e6ec(0x64f)]>Date[_0x18e6ec(0x5eb)]()&&!_0x5e1075[_0x18e6ec(0x1f0)]?.[_0x18e6ec(0x24f)])return this[_0x18e6ec(0x5e7)][_0x18e6ec(0x6a3)](this[_0x18e6ec(0x29c)]+'\x20('+this[_0x18e6ec(0x584)][_0x18e6ec(0x7a3)]+_0x18e6ec(0x2eb)+new Date(_0x4e4173['leadInfo'][_0x18e6ec(0x64f)])[_0x18e6ec(0x5cb)]()+',\x20saindo.'),null;}this[_0x18e6ec(0x5e7)][_0x18e6ec(0x6a3)](this[_0x18e6ec(0x29c)]+'\x20('+this[_0x18e6ec(0x584)][_0x18e6ec(0x7a3)]+_0x18e6ec(0x3bd)),this[_0x18e6ec(0x40e)](_0x5e1075,_0x1581cc);}catch(_0x208941){let _0x3e9aff=_0x18e6ec(0x223),_0x527c2c=_0x208941 instanceof Error?_0x208941['message']:typeof _0x208941==_0x18e6ec(0x524)?JSON[_0x18e6ec(0x34b)](_0x208941):_0x208941,_0x3ff1b6=_0x3e9aff+':\x20'+_0x527c2c;return this[_0x18e6ec(0x5e7)][_0x18e6ec(0x830)](this[_0x18e6ec(0x29c)]+'\x20('+this[_0x18e6ec(0x584)][_0x18e6ec(0x7a3)]+_0x18e6ec(0x62f)+_0x3ff1b6),null;}}async[a0_0xf2a334(0x4bb)](_0x4d6863,_0x388a62){const _0x6cc520=a0_0xf2a334;if(_0x388a62[_0x6cc520(0x6f6)]){let _0x140445=_0x4d6863[_0x6cc520(0x5b0)](async _0x525d4c=>{const _0x415bdf=_0x6cc520;try{let _0x5986cb={'_id':_0x525d4c[_0x415bdf(0x29b)],'owner':_0x525d4c['owner'],'lastcache':0x0};if(Object[_0x415bdf(0x3e5)](_0x525d4c)[_0x415bdf(0x3b5)](_0x2ca8ae=>{_0x525d4c[_0x2ca8ae]!==null&&(_0x5986cb[_0x2ca8ae]=_0x525d4c[_0x2ca8ae]);}),_0x5986cb[_0x415bdf(0x776)]===null&&(_0x5986cb['imagechat']='Imagem\x20não\x20encontrada'),Object[_0x415bdf(0x3e5)](_0x5986cb)[_0x415bdf(0x250)]>0x0)return await this['repository'][_0x415bdf(0x2fb)][_0x415bdf(0x32f)]({'where':{'_id':_0x525d4c['_id']}},_0x5986cb,this[_0x415bdf(0x584)][_0x415bdf(0x7a3)]);}catch(_0x4c19d3){let _0x7543d5=_0x415bdf(0x3c1)+_0x525d4c[_0x415bdf(0x29b)],_0x5065ac=_0x4c19d3 instanceof Error?_0x4c19d3[_0x415bdf(0x80a)]:typeof _0x4c19d3=='object'?JSON[_0x415bdf(0x34b)](_0x4c19d3):_0x4c19d3,_0x5b73d6=_0x7543d5+':\x20'+_0x5065ac;return this['logger'][_0x415bdf(0x830)](this[_0x415bdf(0x29c)]+'\x20('+this['instance']['wuid']+_0x415bdf(0x62f)+_0x5b73d6),null;}}),_0x299458=(await Promise[_0x6cc520(0x3f9)](_0x140445))[_0x6cc520(0x3c9)](_0x59a8c6=>_0x59a8c6!==null)['length'];this[_0x6cc520(0x5e7)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x6cc520(0x7a3)]+'):\x20'+_0x299458+'\x20chats\x20de\x20'+this['instance'][_0x6cc520(0x7a3)]+'\x20inseridos\x20no\x20banco\x20de\x20dados...');}}async[a0_0xf2a334(0x348)](_0x36d148){const _0x95ec79=a0_0xf2a334;this[_0x95ec79(0x5e7)][_0x95ec79(0x6a3)](this[_0x95ec79(0x29c)]+'\x20('+this[_0x95ec79(0x584)]['wuid']+_0x95ec79(0x78e));let _0x97ed8b={'readMessages':[{'remoteJid':_0x36d148[_0x95ec79(0x1c9)]['lastReceivedMessage'][_0x95ec79(0x28c)][_0x95ec79(0x61e)],'fromMe':_0x36d148[_0x95ec79(0x1c9)][_0x95ec79(0x663)]['key'][_0x95ec79(0x329)],'id':_0x36d148[_0x95ec79(0x1c9)][_0x95ec79(0x663)][_0x95ec79(0x28c)]['id']}]};await this[_0x95ec79(0x6f2)](_0x97ed8b);}async[a0_0xf2a334(0x40e)](_0x3d27a5,_0x155b03){const _0x19134c=a0_0xf2a334;try{let {key:_0x4454a2,message_normalized:_0x12f73f}=_0x3d27a5,_0x301211=_0x12f73f,_0x512aa6=_0x12f73f[_0x19134c(0x439)]||_0x12f73f['caption']||_0x12f73f['vote']||_0x12f73f['name']||'',_0x174d3f=_0x4454a2[_0x19134c(0x61e)],_0x513a81=null,_0x4acccf=this[_0x19134c(0x580)][_0x19134c(0x633)][_0x19134c(0x556)](_0x228d05=>_0x228d05[_0x19134c(0x872)]&&_0x512aa6[_0x19134c(0x343)](_0x228d05[_0x19134c(0x872)]));if(_0x4acccf&&_0x155b03==='MESSAGES_UPSERT'){let _0x542728=await this[_0x19134c(0x677)][_0x19134c(0x1e8)]['findOne']({'where':{'_id':_0x4acccf[_0x19134c(0x29b)]}});if(this[_0x19134c(0x5e7)][_0x19134c(0x6a3)](this[_0x19134c(0x29c)]+'\x20('+this[_0x19134c(0x584)][_0x19134c(0x7a3)]+'):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.'),_0x542728&&_0x542728[_0x19134c(0x8a8)]?.[_0x19134c(0x343)](this[_0x19134c(0x584)][_0x19134c(0x7a3)]))_0x513a81=await this[_0x19134c(0x1cc)](_0x542728,_0x4454a2,_0x301211);else return this[_0x19134c(0x5e7)][_0x19134c(0x6a3)](this[_0x19134c(0x29c)]+'\x20('+this[_0x19134c(0x584)][_0x19134c(0x7a3)]+'):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo'),null;}else this[_0x19134c(0x5e7)][_0x19134c(0x6a3)](this[_0x19134c(0x29c)]+'\x20('+this[_0x19134c(0x584)][_0x19134c(0x7a3)]+_0x19134c(0x72b));if(_0x513a81=await this[_0x19134c(0x84e)](_0x174d3f,_0x301211),_0x513a81){this['logger']['verbose'](this[_0x19134c(0x29c)]+'\x20('+this[_0x19134c(0x584)][_0x19134c(0x7a3)]+'):\x20Encontrou\x20conversa\x20no\x20startBot:\x20'),!_0x4454a2[_0x19134c(0x329)]&&_0x513a81[_0x19134c(0x871)]&&this['readMessageBot'](_0x513a81);let _0x12a8e2=await this[_0x19134c(0x48a)](_0x513a81);_0x12a8e2&&await this[_0x19134c(0x7b3)](_0x513a81,_0x12a8e2);}}catch(_0x5e7612){this['logger'][_0x19134c(0x830)](this['instanceName']+'\x20('+this[_0x19134c(0x584)][_0x19134c(0x7a3)]+_0x19134c(0x619)+(_0x5e7612 instanceof Error?_0x5e7612[_0x19134c(0x80a)]:JSON[_0x19134c(0x34b)](_0x5e7612,null,0x2)));}}['flattenObject'](_0x124e61,_0x58a208='',_0x1b3ef2={}){const _0x34f4b9=a0_0xf2a334;return typeof _0x124e61!=_0x34f4b9(0x524)||_0x124e61===null?(_0x58a208&&(_0x1b3ef2[_0x58a208]=_0x124e61),_0x1b3ef2):(Object[_0x34f4b9(0x527)](_0x124e61)['forEach'](([_0x332046,_0x479ac4])=>{const _0x1b32e7=_0x34f4b9;let _0x3b3b53=_0x58a208?_0x58a208+'.'+_0x332046:'_'+_0x332046;Array[_0x1b32e7(0x529)](_0x479ac4)?_0x479ac4[_0x1b32e7(0x3b5)]((_0x1edff5,_0x5a7025)=>{this['flattenObject'](_0x1edff5,_0x3b3b53+'['+_0x5a7025+']',_0x1b3ef2);}):typeof _0x479ac4==_0x1b32e7(0x524)&&_0x479ac4!==null?this[_0x1b32e7(0x879)](_0x479ac4,_0x3b3b53,_0x1b3ef2):_0x1b3ef2[_0x3b3b53]=String(_0x479ac4);}),_0x1b3ef2);}['variablesToObject'](_0x1694a8){const _0xbaabb9=a0_0xf2a334;let _0x409534={};for(let _0x3a7202 of _0x1694a8)typeof _0x3a7202[_0xbaabb9(0x76f)]=='string'&&typeof _0x3a7202[_0xbaabb9(0x79a)]=='string'&&(_0x409534[_0x3a7202[_0xbaabb9(0x76f)]]=_0x3a7202[_0xbaabb9(0x79a)]);return _0x409534;}async[a0_0xf2a334(0x48a)](_0x28bb25){const _0x49ac60=a0_0xf2a334;if(!this[_0x49ac60(0x580)]?.[_0x49ac60(0x5bd)]['enabled']||_0x28bb25[_0x49ac60(0x7cb)]!==_0x49ac60(0x330)&&_0x28bb25[_0x49ac60(0x3eb)]==='')return null;let _0x291c2c=_0x28bb25['chatLog'][_0x49ac60(0x761)]||_0x49ac60(0x896);typeof _0x28bb25['chatLog'][_0x49ac60(0x1f8)]>'u'&&(_0x28bb25[_0x49ac60(0x1c9)][_0x49ac60(0x1f8)]=!0x0);let _0x4650cc=_0x28bb25[_0x49ac60(0x1c9)]['lastCondition'];this[_0x49ac60(0x5e7)][_0x49ac60(0x6a3)](this['instanceName']+'\x20('+this[_0x49ac60(0x584)][_0x49ac60(0x7a3)]+'):\x20lastBlockId:\x20'+_0x291c2c+_0x49ac60(0x686)+_0x4650cc);let _0x146480=_0x291c2c===_0x49ac60(0x896)?_0x28bb25[_0x49ac60(0x34e)]['find'](_0x988de5=>_0x988de5[_0x49ac60(0x519)]===_0x49ac60(0x896)):_0x28bb25['blocks'][_0x49ac60(0x556)](_0xd47c63=>_0xd47c63['_id']['toString']()===_0x291c2c[_0x49ac60(0x20e)]());if(!_0x146480)return this['logger']['error'](this['instanceName']+'\x20('+this['instance'][_0x49ac60(0x7a3)]+_0x49ac60(0x372)+_0x291c2c),null;let _0x530641={'_pushName':_0x28bb25?.['chatLog']?.[_0x49ac60(0x663)]?.[_0x49ac60(0x27d)]||'','_sender':this[_0x49ac60(0x584)][_0x49ac60(0x7a3)]||'',..._0x28bb25[_0x49ac60(0x1c9)][_0x49ac60(0x5c4)]},_0x2e7970=new Date();_0x530641['_day']=_0x2e7970[_0x49ac60(0x1fa)](),_0x530641[_0x49ac60(0x7cf)]=_0x2e7970[_0x49ac60(0x77f)]()+0x1,_0x530641[_0x49ac60(0x26e)]=_0x2e7970[_0x49ac60(0x3fa)](),_0x530641['_hour']=_0x2e7970[_0x49ac60(0x683)](),_0x530641['_minute']=_0x2e7970['getMinutes'](),_0x530641[_0x49ac60(0x5c1)]=_0x2e7970[_0x49ac60(0x6b5)]();let _0x5056f5=null;if(_0x28bb25[_0x49ac60(0x3eb)]){let _0x5ce6af=_0x28bb25[_0x49ac60(0x1c9)][_0x49ac60(0x663)]['vote'],_0x1245ea=_0x28bb25[_0x49ac60(0x4ea)][_0x49ac60(0x556)](_0x3a64bc=>_0x3a64bc['option']===_0x5ce6af);if(_0x1245ea){let _0x262e2a=_0x1245ea['next_groupId'];if(_0x5056f5=_0x28bb25[_0x49ac60(0x34e)][_0x49ac60(0x556)](_0x11a521=>_0x11a521[_0x49ac60(0x540)]===_0x262e2a&&_0x11a521[_0x49ac60(0x48f)]===0x1),_0x146480['uazapi'][_0x49ac60(0x8d1)]){let _0x108d4e={'id':_0x28bb25[_0x49ac60(0x3eb)],'remoteJid':_0x28bb25[_0x49ac60(0x61e)],'fromMe':!0x0};await this['deleteMessage'](_0x108d4e);}if(_0x146480[_0x49ac60(0x309)][_0x49ac60(0x8d1)]&&_0x146480[_0x49ac60(0x309)][_0x49ac60(0x468)]&&_0x146480[_0x49ac60(0x309)][_0x49ac60(0x545)]===_0x49ac60(0x5dd)){let _0x19b836={'number':_0x28bb25[_0x49ac60(0x61e)],'options':{'delay':0x0},'textMessage':{'text':_0x49ac60(0x3df)+_0x28bb25[_0x49ac60(0x7cd)]+_0x49ac60(0x403)+_0x5ce6af}};await this[_0x49ac60(0x605)](_0x19b836);}_0x530641[_0x49ac60(0x6f0)]=_0x5ce6af,_0x28bb25[_0x49ac60(0x7cb)]=_0x49ac60(0x330),_0x28bb25['waitingMenu_id']='',_0x28bb25['waitingMenu_text']='',_0x28bb25[_0x49ac60(0x4ea)]=[];}else{this[_0x49ac60(0x5e7)]['verbose'](this[_0x49ac60(0x29c)]+'\x20('+this[_0x49ac60(0x584)][_0x49ac60(0x7a3)]+_0x49ac60(0x768));let _0x469fcb={'activatedCount':_0x28bb25['chatLog'][_0x49ac60(0x2d1)][_0x49ac60(0x3c9)](_0x2ab58d=>String(_0x2ab58d[_0x49ac60(0x1aa)])===String(_0x291c2c))[_0x49ac60(0x250)],'moreLogs':['Não\x20respondeu\x20com\x20a\x20enquete.']};if(_0x146480[_0x49ac60(0x309)]['pollErrorMessage']){let _0x25d3fe={'number':_0x28bb25[_0x49ac60(0x61e)],'options':{'delay':0x0},'textMessage':{'text':_0x146480['uazapi'][_0x49ac60(0x4e0)]}};await this[_0x49ac60(0x605)](_0x25d3fe);}if(_0x146480['maxActives']!==void 0x0&&_0x469fcb[_0x49ac60(0x622)]>=_0x146480[_0x49ac60(0x1ef)]){let _0x537e75=Date[_0x49ac60(0x5eb)](),_0x55bbc5=_0x146480[_0x49ac60(0x2cc)]??0xa;isNaN(_0x55bbc5)&&(_0x55bbc5=0xa);let _0x4cdba7=_0x537e75+_0x55bbc5*0x3c*0x3e8;_0x469fcb[_0x49ac60(0x6c0)]=_0x4cdba7,_0x469fcb['moreLogs'][_0x49ac60(0x355)](_0x49ac60(0x233)),this[_0x49ac60(0x4e8)](_0x28bb25,_0x4cdba7),_0x28bb25[_0x49ac60(0x3eb)]='',_0x28bb25[_0x49ac60(0x7cd)]='',_0x28bb25[_0x49ac60(0x4ea)]=[];}return this[_0x49ac60(0x7d2)](_0x28bb25,_0x146480,_0x469fcb,!0x0),null;}}if(_0x4650cc&&_0x146480['next_groupId']&&!_0x28bb25[_0x49ac60(0x3eb)]){let _0x162746=_0x28bb25[_0x49ac60(0x34e)][_0x49ac60(0x3c9)](_0x1818d7=>_0x1818d7[_0x49ac60(0x540)][_0x49ac60(0x20e)]()===_0x146480[_0x49ac60(0x36b)][_0x49ac60(0x20e)]())[_0x49ac60(0x53f)]((_0xa926b8,_0xdc11d6)=>_0xa926b8[_0x49ac60(0x48f)]-_0xdc11d6[_0x49ac60(0x48f)]);_0x162746['length']>0x0&&(_0x5056f5=_0x162746[0x0]);}if(!_0x5056f5){let _0x46c580=_0x146480['groupId'],_0x42b522=_0x28bb25['blocks'][_0x49ac60(0x3c9)](_0xea15f6=>_0xea15f6['groupId']===_0x46c580&&_0xea15f6[_0x49ac60(0x48f)]>_0x146480[_0x49ac60(0x48f)])[_0x49ac60(0x53f)]((_0x454987,_0x5e6caa)=>_0x454987[_0x49ac60(0x48f)]-_0x5e6caa[_0x49ac60(0x48f)]);_0x42b522[_0x49ac60(0x250)]>0x0&&(_0x5056f5=_0x42b522[0x0]);}if(!_0x5056f5)return _0x28bb25[_0x49ac60(0x7cb)]=_0x49ac60(0x561),null;_0x28bb25[_0x49ac60(0x1c9)][_0x49ac60(0x5c4)]=_0x530641;let _0x17db06=JSON['parse'](JSON['stringify'](_0x5056f5));return this[_0x49ac60(0x3ed)](_0x17db06,_0x28bb25[_0x49ac60(0x1c9)][_0x49ac60(0x5c4)]),_0x28bb25[_0x49ac60(0x1c9)][_0x49ac60(0x761)]=_0x17db06[_0x49ac60(0x29b)],_0x28bb25[_0x49ac60(0x1c9)][_0x49ac60(0x1f8)]=!0x0,_0x17db06;}[a0_0xf2a334(0x47e)](_0x19f2c2,_0x3ec6e2){const _0x48cecd=a0_0xf2a334;return _0x19f2c2[_0x48cecd(0x6b0)](/\{\{([^}]+)\}\}/g,(_0x19184c,_0x57afcc)=>_0x3ec6e2[_0x57afcc]||'');}['replaceVariablesInObject'](_0x5334b4,_0x11e8ca){const _0x55480a=a0_0xf2a334;for(let _0x5bd676 in _0x5334b4)typeof _0x5334b4[_0x5bd676]=='string'?_0x5334b4[_0x5bd676]=this[_0x55480a(0x47e)](_0x5334b4[_0x5bd676],_0x11e8ca):typeof _0x5334b4[_0x5bd676]==_0x55480a(0x524)&&this['replaceVariablesInObject'](_0x5334b4[_0x5bd676],_0x11e8ca);}async[a0_0xf2a334(0x64b)](_0x4230e0,_0x935a6){const _0x257ce0=a0_0xf2a334;let _0x4202eb=_0x935a6['_id'];if(_0x4230e0[_0x257ce0(0x1c9)]&&_0x4230e0[_0x257ce0(0x1c9)][_0x257ce0(0x2d1)]){let _0x1ae0ec=_0x4230e0[_0x257ce0(0x1c9)][_0x257ce0(0x2d1)][_0x257ce0(0x3c9)](_0x10d3d0=>String(_0x10d3d0[_0x257ce0(0x1aa)])===String(_0x4202eb))[_0x257ce0(0x295)]();if(_0x1ae0ec&&_0x1ae0ec[_0x257ce0(0x830)]&&_0x935a6['stopIfLastReturnedError'])return _0x4230e0[_0x257ce0(0x7cb)]=_0x257ce0(0x561),await this[_0x257ce0(0x447)](_0x4230e0),null;}if(_0x935a6['type']===_0x257ce0(0x309)&&_0x935a6[_0x257ce0(0x309)][_0x257ce0(0x17c)]===_0x257ce0(0x6ab)&&_0x4230e0[_0x257ce0(0x3eb)])return _0x4230e0['chatLog']['lastBlockId']=_0x4202eb,await this[_0x257ce0(0x447)](_0x4230e0),null;let _0x59037b=await this[_0x257ce0(0x48a)](_0x4230e0);if(_0x4230e0[_0x257ce0(0x1c9)]&&_0x4230e0['chatLog'][_0x257ce0(0x2d1)]){let _0x5ea1d3=_0x4230e0[_0x257ce0(0x1c9)][_0x257ce0(0x2d1)]['filter'](_0x28da88=>String(_0x28da88[_0x257ce0(0x1aa)])===String(_0x4202eb))[_0x257ce0(0x250)];if(_0x935a6[_0x257ce0(0x1ef)]!==void 0x0&&_0x5ea1d3>=_0x935a6[_0x257ce0(0x1ef)]){let _0x4fdff2=Date['now'](),_0x23a229=_0x935a6['stopMinutesMaxActives']??0xa;isNaN(_0x23a229)&&(_0x23a229=0xa);let _0x221960=_0x4fdff2+_0x23a229*0x3c*0x3e8,_0x559612={'newStoppedUntil':_0x221960};return this[_0x257ce0(0x4e8)](_0x4230e0,_0x221960),this['updateConversation'](_0x4230e0,_0x935a6,_0x559612,!0x0),null;}}_0x59037b&&_0x59037b['type']!==_0x257ce0(0x88e)&&await this[_0x257ce0(0x7b3)](_0x4230e0,_0x59037b),_0x59037b||await this['saveConversationToDatabase'](_0x4230e0),_0x59037b&&_0x59037b[_0x257ce0(0x519)]===_0x257ce0(0x88e)&&(_0x4230e0[_0x257ce0(0x1c9)][_0x257ce0(0x761)]=_0x4202eb,await this['saveConversationToDatabase'](_0x4230e0));}async[a0_0xf2a334(0x7b3)](_0x390abb,_0x45515c){const _0x10fd29=a0_0xf2a334;try{let _0x433108=_0x45515c[_0x10fd29(0x519)];this['logger'][_0x10fd29(0x6a3)](this[_0x10fd29(0x29c)]+'\x20('+this[_0x10fd29(0x584)][_0x10fd29(0x7a3)]+_0x10fd29(0x676)+_0x433108);let _0x9fdea1={'uazapi':()=>this[_0x10fd29(0x716)](_0x390abb,_0x45515c),'save':()=>this[_0x10fd29(0x588)](_0x390abb,_0x45515c),'stop':()=>this['stopConversation'](_0x390abb,_0x45515c),'condition':()=>this[_0x10fd29(0x8d3)](_0x390abb,_0x45515c),'varedit':()=>this[_0x10fd29(0x5c5)](_0x390abb,_0x45515c),'apirequest':()=>this[_0x10fd29(0x356)](_0x390abb,_0x45515c),'goToFlow':()=>this[_0x10fd29(0x2ed)](_0x390abb,_0x45515c),'scheduleFlow':()=>this[_0x10fd29(0x8ff)](_0x390abb,_0x45515c),'awaitSeconds':()=>this['processawaitSeconds'](_0x390abb,_0x45515c),'clearVariables':()=>this[_0x10fd29(0x630)](_0x390abb,_0x45515c)}[_0x433108];_0x9fdea1&&await _0x9fdea1();}catch(_0x2ec006){this[_0x10fd29(0x5e7)][_0x10fd29(0x830)](this[_0x10fd29(0x29c)]+'\x20('+this[_0x10fd29(0x584)][_0x10fd29(0x7a3)]+'):\x20Error\x20processing\x20the\x20block:\x20'+(_0x2ec006 instanceof Error?_0x2ec006['message']:JSON['stringify'](_0x2ec006,null,0x2)));}}async[a0_0xf2a334(0x2f7)](_0x3e5839,_0x47d28c){const _0x4fc67a=a0_0xf2a334;if(this[_0x4fc67a(0x5e7)][_0x4fc67a(0x6a3)](this[_0x4fc67a(0x29c)]+'\x20('+this[_0x4fc67a(0x584)]['wuid']+_0x4fc67a(0x3ae)),!_0x3e5839||!_0x47d28c)return this[_0x4fc67a(0x5e7)][_0x4fc67a(0x830)](this[_0x4fc67a(0x29c)]+'\x20('+this[_0x4fc67a(0x584)]['wuid']+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x159612=+_0x47d28c[_0x4fc67a(0x395)];isNaN(_0x159612)&&(_0x159612=0x0),_0x159612=Math['min'](_0x159612,0x3c),await(0x0,w[_0x4fc67a(0x4c5)])(_0x159612*0x3e8);let _0x14fa8c={'moreLogs':[_0x4fc67a(0x80e)+_0x159612+_0x4fc67a(0x72d)]};return await this['updateConversation'](_0x3e5839,_0x47d28c,_0x14fa8c),_0x159612;}async[a0_0xf2a334(0x630)](_0x3aaf84,_0x49ded9){const _0x3808a4=a0_0xf2a334;if(this[_0x3808a4(0x5e7)][_0x3808a4(0x6a3)](this[_0x3808a4(0x29c)]+'\x20('+this[_0x3808a4(0x584)][_0x3808a4(0x7a3)]+_0x3808a4(0x504)),!_0x3aaf84||!_0x49ded9)return this[_0x3808a4(0x5e7)]['error'](this[_0x3808a4(0x29c)]+'\x20('+this[_0x3808a4(0x584)][_0x3808a4(0x7a3)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x5a35b8=[];if(_0x49ded9[_0x3808a4(0x3b6)][_0x3808a4(0x66c)]()===_0x3808a4(0x186)){let _0x1459ba=[_0x3808a4(0x543),_0x3808a4(0x271),_0x3808a4(0x77b),_0x3808a4(0x61a),_0x3808a4(0x69b),_0x3808a4(0x29b),_0x3808a4(0x1e7)];_0x5a35b8=Object[_0x3808a4(0x3e5)](_0x3aaf84['chatLog'][_0x3808a4(0x5c4)])[_0x3808a4(0x3c9)](_0x5833df=>_0x5833df[_0x3808a4(0x2f0)]('_')&&!_0x1459ba['includes'](_0x5833df));}else _0x5a35b8=_0x49ded9[_0x3808a4(0x3b6)][_0x3808a4(0x8a0)]('|')[_0x3808a4(0x5b0)](_0x52f58f=>(_0x52f58f=_0x52f58f[_0x3808a4(0x6b0)](/[{}]/g,'')[_0x3808a4(0x66c)](),_0x52f58f[_0x3808a4(0x2f0)]('_')?_0x52f58f:'_'+_0x52f58f));let _0x1e423f=[];_0x5a35b8[_0x3808a4(0x3b5)](_0x559577=>{const _0x24590f=_0x3808a4;_0x559577 in _0x3aaf84[_0x24590f(0x1c9)][_0x24590f(0x5c4)]&&(delete _0x3aaf84[_0x24590f(0x1c9)][_0x24590f(0x5c4)][_0x559577],_0x1e423f[_0x24590f(0x355)](_0x559577));}),_0x1e423f[_0x3808a4(0x250)]>0x0?this['logger'][_0x3808a4(0x6a3)](this['instanceName']+'\x20('+this[_0x3808a4(0x584)]['wuid']+_0x3808a4(0x7b1)+_0x1e423f[_0x3808a4(0x666)](',\x20')):this['logger'][_0x3808a4(0x6a3)](this['instanceName']+'\x20('+this[_0x3808a4(0x584)][_0x3808a4(0x7a3)]+'):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção');let _0x5bea51={'moreLogs':[_0x3808a4(0x319)+_0x1e423f[_0x3808a4(0x666)](',\x20')]};return await this[_0x3808a4(0x7d2)](_0x3aaf84,_0x49ded9,_0x5bea51),null;}async[a0_0xf2a334(0x8ff)](_0x57bb55,_0x4515b8){const _0x40cb5d=a0_0xf2a334;if(this[_0x40cb5d(0x5e7)][_0x40cb5d(0x6a3)](this['instanceName']+'\x20('+this[_0x40cb5d(0x584)][_0x40cb5d(0x7a3)]+'):\x20Entrou\x20na\x20função\x20scheduleFlow'),!_0x57bb55||!_0x4515b8)return this['logger'][_0x40cb5d(0x830)](this[_0x40cb5d(0x29c)]+'\x20('+this[_0x40cb5d(0x584)]['wuid']+_0x40cb5d(0x39f)),null;let _0x3581fc=_0x57bb55[_0x40cb5d(0x61e)];_0x4515b8[_0x40cb5d(0x17e)][_0x40cb5d(0x61e)]&&_0x4515b8['scheduleFlow'][_0x40cb5d(0x61e)][_0x40cb5d(0x66c)]()!==''&&(_0x3581fc=_0x4515b8[_0x40cb5d(0x309)][_0x40cb5d(0x61e)]['trim']());let _0x1767fd=_0x4515b8[_0x40cb5d(0x17e)][_0x40cb5d(0x480)]*0xea60,_0x489b54=Date[_0x40cb5d(0x5eb)]()+_0x1767fd,_0x301313={'status':_0x40cb5d(0x197),'info':_0x40cb5d(0x4db)+_0x57bb55[_0x40cb5d(0x76f)],'remoteJids':[_0x3581fc],'when':_0x489b54,'delaySecMin':0x0,'delaySecMax':0x0,'type':'flow','flowName':_0x4515b8[_0x40cb5d(0x17e)][_0x40cb5d(0x653)]};this['editScheduleMessage'](_0x301313);let _0x33960d=await this[_0x40cb5d(0x48a)](_0x57bb55);_0x33960d&&await this[_0x40cb5d(0x7b3)](_0x57bb55,_0x33960d);}async['processgoToFlow'](_0x21978c,_0x2d0375){const _0x243310=a0_0xf2a334;if(this[_0x243310(0x5e7)][_0x243310(0x6a3)](this[_0x243310(0x29c)]+'\x20('+this[_0x243310(0x584)][_0x243310(0x7a3)]+'):\x20Entrou\x20na\x20função\x20goToFlow'),!_0x21978c||!_0x2d0375)return this[_0x243310(0x5e7)]['error'](this[_0x243310(0x29c)]+'\x20('+this[_0x243310(0x584)][_0x243310(0x7a3)]+_0x243310(0x39f)),null;await this['updateConversation'](_0x21978c,_0x2d0375,{},!0x0,!0x0);let _0x38cee9=_0x2d0375[_0x243310(0x58f)];_0x21978c=await this[_0x243310(0x538)](_0x38cee9,_0x21978c['remoteJid'],_0x21978c[_0x243310(0x1c9)][_0x243310(0x5c4)]);let _0x57e858=await this[_0x243310(0x48a)](_0x21978c);_0x57e858&&await this[_0x243310(0x7b3)](_0x21978c,_0x57e858);}async['createConversationforgoToFlow'](_0x1bb5b3,_0x2bd127,_0x530756){const _0x34b2f0=a0_0xf2a334;this[_0x34b2f0(0x5e7)][_0x34b2f0(0x6a3)](this[_0x34b2f0(0x29c)]+'\x20('+this['instance']['wuid']+_0x34b2f0(0x43d));try{let _0x410448=this['AutomateSystem']['flows'][_0x34b2f0(0x556)](_0x3e05e4=>_0x3e05e4[_0x34b2f0(0x29b)]===_0x1bb5b3);_0x410448||this[_0x34b2f0(0x5e7)][_0x34b2f0(0x830)](this[_0x34b2f0(0x29c)]+'\x20('+this[_0x34b2f0(0x584)][_0x34b2f0(0x7a3)]+_0x34b2f0(0x65a)+_0x1bb5b3+'\x27\x20não\x20encontrado\x20na\x20memória');let _0x96d08b=await this[_0x34b2f0(0x677)]['flow'][_0x34b2f0(0x18a)]({'where':{'_id':_0x410448['_id']}});if(!_0x96d08b||!_0x96d08b[_0x34b2f0(0x8a8)]?.['includes'](this[_0x34b2f0(0x584)][_0x34b2f0(0x7a3)]))throw this[_0x34b2f0(0x5e7)][_0x34b2f0(0x830)](this[_0x34b2f0(0x29c)]+'\x20('+this[_0x34b2f0(0x584)][_0x34b2f0(0x7a3)]+_0x34b2f0(0x65a)+_0x1bb5b3+_0x34b2f0(0x4b1)),new m(_0x34b2f0(0x68e)+_0x1bb5b3+_0x34b2f0(0x4b1));let _0x48be63=require(_0x34b2f0(0x3a7))[_0x34b2f0(0x880)],_0x3eee06=Date[_0x34b2f0(0x5eb)](),_0x48de98=_0x34b2f0(0x896),_0xc6dbaf={},_0x589a07={},_0x3241c9=this[_0x34b2f0(0x580)]['flows'][_0x34b2f0(0x556)](_0x4fb0f4=>_0x4fb0f4[_0x34b2f0(0x29b)]===_0x96d08b[_0x34b2f0(0x29b)]?.[_0x34b2f0(0x20e)]()),_0x38ee83=_0x3241c9?.['minutesToClose']??_0x96d08b[_0x34b2f0(0x20c)]??0x0,_0xd0e47d=_0x3241c9?.[_0x34b2f0(0x871)]??_0x96d08b[_0x34b2f0(0x871)]??!0x1,_0x442b1c={'flowId':_0x410448['_id'],'readMessages':_0x410448[_0x34b2f0(0x871)],..._0x96d08b,'chatLog':null},_0x8d98aa={'lastReceivedMessage':_0xc6dbaf,'lastSendMessage':_0x589a07,'lastBlockId':_0x48de98,'lastCondition':!0x0,'realVariables':_0x530756};_0x442b1c[_0x34b2f0(0x1c9)]=_0x8d98aa,_0x442b1c[_0x34b2f0(0x1c9)][_0x34b2f0(0x5c4)]={..._0x530756},delete _0x442b1c['_id'],_0x442b1c['_id']=new _0x48be63(),_0x442b1c[_0x34b2f0(0x20f)]=_0x3eee06,_0x442b1c[_0x34b2f0(0x7cb)]=_0x34b2f0(0x330),_0x442b1c[_0x34b2f0(0x61e)]=_0x2bd127,_0x442b1c['minutesToClose']=_0x38ee83,_0x442b1c[_0x34b2f0(0x871)]=_0xd0e47d;let _0x59d47b=await this[_0x34b2f0(0x677)][_0x34b2f0(0x3ff)][_0x34b2f0(0x32f)](_0x442b1c[_0x34b2f0(0x29b)],_0x442b1c,this[_0x34b2f0(0x584)][_0x34b2f0(0x7a3)]);return this[_0x34b2f0(0x5e7)]['verbose'](this[_0x34b2f0(0x29c)]+'\x20('+this[_0x34b2f0(0x584)][_0x34b2f0(0x7a3)]+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x59d47b?_0x442b1c:null;}catch(_0xf6fa45){let _0x821c0a=_0x34b2f0(0x1ba),_0x3c3b6e=_0xf6fa45 instanceof Error?_0xf6fa45['message']:typeof _0xf6fa45==_0x34b2f0(0x524)?JSON[_0x34b2f0(0x34b)](_0xf6fa45):_0xf6fa45,_0x4e7cee=_0x821c0a+':\x20'+_0x3c3b6e;throw this[_0x34b2f0(0x5e7)][_0x34b2f0(0x830)](this['instanceName']+'\x20('+this[_0x34b2f0(0x584)][_0x34b2f0(0x7a3)]+_0x34b2f0(0x62f)+_0x4e7cee),new m(_0x4e7cee);}}async[a0_0xf2a334(0x356)](_0x4c7c41,_0x2cdbb7){const _0x17aac7=a0_0xf2a334;let _0x54f857,_0x2e509a;try{let _0x42f3e9=_0x2cdbb7[_0x17aac7(0x402)];if(!_0x42f3e9||!_0x42f3e9[_0x17aac7(0x2b4)]||!_0x42f3e9[_0x17aac7(0x5bb)])throw new Error(_0x17aac7(0x8f1));let _0x26e892;(['https://api.openai.com/v1/audio/speech','https://api.openai.com/v1/images/generations',_0x17aac7(0x8e1)]['some'](_0x2df0d8=>_0x42f3e9[_0x17aac7(0x2b4)][_0x17aac7(0x343)](_0x2df0d8))||_0x42f3e9[_0x17aac7(0x727)])&&(_0x26e892='arraybuffer');let _0x356cd='\u205f',_0x3f7ba6;try{_0x3f7ba6=JSON[_0x17aac7(0x302)](_0x42f3e9[_0x17aac7(0x6ca)][_0x17aac7(0x6b0)](new RegExp(_0x356cd,'g'),''));}catch(_0x81f891){throw _0x81f891;}let _0x412397={'method':_0x42f3e9[_0x17aac7(0x5bb)],'url':_0x42f3e9[_0x17aac7(0x2b4)],'headers':_0x42f3e9[_0x17aac7(0x4f4)]||{},..._0x42f3e9['method'][_0x17aac7(0x563)]()!==_0x17aac7(0x89c)&&_0x42f3e9[_0x17aac7(0x6ca)]?{'data':JSON[_0x17aac7(0x302)](_0x42f3e9[_0x17aac7(0x6ca)][_0x17aac7(0x6b0)](new RegExp(_0x356cd,'g'),''))}:{},..._0x26e892&&{'responseType':_0x26e892}},_0x46a474=await(0x0,K[_0x17aac7(0x59e)])(_0x412397),_0x1a4db9=_0x46a474[_0x17aac7(0x327)][_0x17aac7(0x76e)];if(_0x1a4db9&&_0x1a4db9[_0x17aac7(0x343)](_0x17aac7(0x8b9))||typeof _0x46a474['data']=='string'){if(typeof _0x46a474[_0x17aac7(0x601)]==_0x17aac7(0x16b)){let _0xe92a2c=_0x46a474['data'][_0x17aac7(0x6b0)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x17aac7(0x66c)]();try{_0x54f857=JSON['parse'](_0xe92a2c);}catch(_0xe479d1){this[_0x17aac7(0x5e7)]['error'](_0x17aac7(0x8c4)+_0xe479d1[_0x17aac7(0x80a)]),_0x54f857={'_apiResponse':_0x46a474[_0x17aac7(0x601)]};}}else _0x54f857=_0x46a474[_0x17aac7(0x601)];let _0x29cce6=_0x4c7c41['chatLog']['realVariables'],_0x352e9f=this['flattenObject'](_0x54f857);return Object[_0x17aac7(0x58a)](_0x29cce6,_0x352e9f),_0x4c7c41['chatLog'][_0x17aac7(0x5c4)]=_0x29cce6,_0x2e509a={'error':!0x1,'apiResponse':_0x54f857},this[_0x17aac7(0x7d2)](_0x4c7c41,_0x2cdbb7,_0x2e509a),_0x54f857;}if(_0x1a4db9&&(_0x1a4db9[_0x17aac7(0x343)](_0x17aac7(0x1b7))||_0x1a4db9['includes'](_0x17aac7(0x1b1))||_0x1a4db9[_0x17aac7(0x343)](_0x17aac7(0x308))||_0x1a4db9[_0x17aac7(0x343)](_0x17aac7(0x771)))){this[_0x17aac7(0x5e7)][_0x17aac7(0x6a3)](this['instanceName']+'\x20('+this['instance'][_0x17aac7(0x7a3)]+'):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20'+_0x1a4db9);let _0x21d52a=(0x0,Q['v4'])(),_0x8babce='',_0xae4c7e={'image/jpeg':_0x17aac7(0x521),'image/png':'.png','image/gif':_0x17aac7(0x877),'image/webp':_0x17aac7(0x49e),'image/svg+xml':_0x17aac7(0x203),'audio/mpeg':_0x17aac7(0x541),'audio/ogg':_0x17aac7(0x724),'audio/wav':_0x17aac7(0x1d6),'video/mp4':_0x17aac7(0x8a5),'video/webm':_0x17aac7(0x658),'video/ogg':_0x17aac7(0x7b2),'text/plain':_0x17aac7(0x7c3),'application/pdf':_0x17aac7(0x1ff),'application/msword':_0x17aac7(0x5c2),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':'.docx','application/vnd.ms-excel':'.xls','application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x17aac7(0x84c),'application/vnd.ms-powerpoint':'.ppt','application/vnd.openxmlformats-officedocument.presentationml.presentation':_0x17aac7(0x688)};_0xae4c7e[_0x1a4db9]?(_0x8babce=_0xae4c7e[_0x1a4db9],this[_0x17aac7(0x5e7)][_0x17aac7(0x6a3)](this['instanceName']+'\x20('+this[_0x17aac7(0x584)][_0x17aac7(0x7a3)]+_0x17aac7(0x78d)+_0x8babce)):(_0x8babce='.error',this[_0x17aac7(0x5e7)][_0x17aac7(0x6a3)](this[_0x17aac7(0x29c)]+'\x20('+this[_0x17aac7(0x584)][_0x17aac7(0x7a3)]+_0x17aac7(0x367)+_0x8babce)),_0x21d52a+=_0x8babce,this['logger'][_0x17aac7(0x6a3)](this[_0x17aac7(0x29c)]+'\x20('+this[_0x17aac7(0x584)][_0x17aac7(0x7a3)]+_0x17aac7(0x460)+_0x21d52a);let _0x54f6cd=this['configService']['get']('SERVER')['URL'];if(!_0x54f6cd){let _0x414499=this[_0x17aac7(0x566)]['get'](_0x17aac7(0x41c));_0x54f6cd=_0x17aac7(0x2a9)+(_0x414499&&_0x414499['FULLCHAIN'][_0x17aac7(0x8a0)]('/')[0x4]);}let _0x3689ce=Buffer[_0x17aac7(0x1a3)](_0x46a474[_0x17aac7(0x601)]);await this[_0x17aac7(0x83c)](_0x3689ce,_0x21d52a);let _0x411c6f=_0x17aac7(0x875)+_0x21d52a;_0x411c6f=''+_0x54f6cd+_0x411c6f,_0x54f857={'fileUrl':_0x411c6f},_0x4c7c41[_0x17aac7(0x1c9)]['realVariables'][_0x17aac7(0x7bc)]=_0x411c6f;let _0x2157b5=_0x4c7c41['chatLog']['realVariables'],_0xb1a03f=this[_0x17aac7(0x879)](_0x54f857);return Object[_0x17aac7(0x58a)](_0x2157b5,_0xb1a03f),_0x4c7c41[_0x17aac7(0x1c9)][_0x17aac7(0x5c4)]=_0x2157b5,_0x2e509a={'error':!0x1,'apiResponse':{'fileUrl':_0x411c6f}},this[_0x17aac7(0x7d2)](_0x4c7c41,_0x2cdbb7,_0x2e509a),_0x54f857;}}catch(_0x528b87){this[_0x17aac7(0x5e7)][_0x17aac7(0x830)]('Erro\x20ao\x20processar\x20a\x20chamada\x20API:'+_0x528b87['message']),_0x528b87[_0x17aac7(0x234)]&&(_0x54f857=_0x528b87[_0x17aac7(0x234)][_0x17aac7(0x601)]);let _0x419c35=_0x4c7c41[_0x17aac7(0x1c9)]['realVariables'],_0x14ee0e=this['flattenObject'](_0x54f857);return Object[_0x17aac7(0x58a)](_0x419c35,_0x14ee0e),_0x4c7c41[_0x17aac7(0x1c9)][_0x17aac7(0x5c4)]=_0x419c35,_0x2e509a={'error':!0x0,'errorLog':_0x528b87[_0x17aac7(0x20e)](),'apiResponse':_0x54f857},this[_0x17aac7(0x7d2)](_0x4c7c41,_0x2cdbb7,_0x2e509a),{'success':!0x1};}}['applyvaredit'](_0x123e93,_0x3a44b1){const _0x2269b1=a0_0xf2a334;let _0x25255b=_0x334a34=>{const _0xb8296=a0_0x464b;let _0x1a13df=_0x334a34[_0xb8296(0x6b0)](/[^0-9.,-]/g,'')[_0xb8296(0x6b0)](',','.'),_0x31232a=parseFloat(_0x1a13df);return isNaN(_0x31232a)?null:_0x31232a;},_0x12eb94=_0x3a44b1['firstValue'],_0x1c6dfe=_0x3a44b1['secondValue'];typeof _0x12eb94==_0x2269b1(0x16b)&&(_0x12eb94=this[_0x2269b1(0x47e)](_0x12eb94,_0x123e93[_0x2269b1(0x1c9)][_0x2269b1(0x5c4)])??''),typeof _0x1c6dfe=='string'&&(_0x1c6dfe=this[_0x2269b1(0x47e)](_0x1c6dfe,_0x123e93['chatLog'][_0x2269b1(0x5c4)])??'');let _0x2485d7=null;if(!_0x3a44b1[_0x2269b1(0x7d3)])return null;switch(this[_0x2269b1(0x5e7)][_0x2269b1(0x6a3)](this[_0x2269b1(0x29c)]+'\x20('+this[_0x2269b1(0x584)][_0x2269b1(0x7a3)]+_0x2269b1(0x39d)+_0x12eb94),this[_0x2269b1(0x5e7)][_0x2269b1(0x6a3)](this[_0x2269b1(0x29c)]+'\x20('+this[_0x2269b1(0x584)][_0x2269b1(0x7a3)]+_0x2269b1(0x734)+_0x1c6dfe),_0x3a44b1[_0x2269b1(0x7d3)]){case'+':case'-':case'*':case'/':let _0x364b97=_0x25255b(_0x12eb94||'0'),_0x40b1e3=_0x25255b(_0x1c6dfe||'0');if(_0x364b97===null)return null;switch(_0x3a44b1['editOperator']){case'+':_0x2485d7=_0x364b97+(_0x40b1e3??0x0);break;case'-':_0x2485d7=_0x364b97-(_0x40b1e3??0x0);break;case'*':_0x2485d7=_0x364b97*(_0x40b1e3??0x1);break;case'/':_0x40b1e3!==0x0&&(_0x2485d7=_0x364b97/(_0x40b1e3??0x1));break;}break;case _0x2269b1(0x4a6):case _0x2269b1(0x2b8):let _0x2c4d09=_0x1c6dfe,_0x7898e3=_0x3a44b1['replaceValue'];if(typeof _0x7898e3==_0x2269b1(0x16b)&&(_0x7898e3=this[_0x2269b1(0x47e)](_0x7898e3,_0x123e93[_0x2269b1(0x1c9)][_0x2269b1(0x5c4)])??''),_0x2c4d09&&_0x7898e3!==void 0x0){let _0x2ed105=_0x3a44b1[_0x2269b1(0x7d3)]===_0x2269b1(0x4a6)?new RegExp(_0x2c4d09[_0x2269b1(0x6b0)](/[-\/\\^$*+?.()|[\]{}]/g,_0x2269b1(0x451)),'g'):new RegExp(_0x2c4d09,'g');_0x2485d7=_0x12eb94['replace'](_0x2ed105,_0x7898e3);}else console[_0x2269b1(0x25b)]('Valor\x20de\x20find\x20ou\x20replace\x20ausente');break;case _0x2269b1(0x5ed):_0x2485d7=_0x1c6dfe;break;case _0x2269b1(0x55e):let _0x3cf2c5=_0x12eb94['match'](new RegExp(_0x1c6dfe||''));_0x2485d7=_0x3cf2c5?_0x3cf2c5[0x0]:'';break;case'truncatedto':_0x2485d7=_0x12eb94[_0x2269b1(0x662)](0x0,parseInt(_0x1c6dfe||'0'));break;case _0x2269b1(0x88d):let _0x3525e6=parseInt(_0x1c6dfe||'0');_0x2485d7=_0x12eb94[_0x2269b1(0x662)](_0x12eb94[_0x2269b1(0x250)]-_0x3525e6);break;case _0x2269b1(0x1a9):let _0xeee9da=_0x25255b(_0x12eb94),_0x55b7d8=parseInt(_0x1c6dfe||'0');_0x55b7d8=Math[_0x2269b1(0x4da)](_0x55b7d8),_0xeee9da!==null?_0x2485d7=_0xeee9da['toLocaleString'](_0x2269b1(0x443),{'minimumFractionDigits':_0x55b7d8,'maximumFractionDigits':_0x55b7d8}):(console[_0x2269b1(0x25b)](_0x2269b1(0x1bd)+_0x12eb94),_0x2485d7=null);break;case _0x2269b1(0x45a):let _0x69fd1d=_0x25255b(_0x12eb94);_0x69fd1d!==null?_0x2485d7=_0x69fd1d[_0x2269b1(0x5cb)](_0x2269b1(0x443),{'style':_0x2269b1(0x199),'currency':_0x2269b1(0x7da)}):(console[_0x2269b1(0x25b)](_0x2269b1(0x4f2)+_0x12eb94),_0x2485d7=null);break;case _0x2269b1(0x206):_0x2485d7=_0x12eb94['toUpperCase']();break;case _0x2269b1(0x35c):_0x2485d7=_0x12eb94[_0x2269b1(0x3d0)]();break;case'capitalizedWords':_0x2485d7=_0x12eb94[_0x2269b1(0x8a0)]('\x20')['map'](_0x2706b0=>_0x2706b0['charAt'](0x0)[_0x2269b1(0x563)]()+_0x2706b0[_0x2269b1(0x662)](0x1)[_0x2269b1(0x3d0)]())[_0x2269b1(0x666)]('\x20');break;case _0x2269b1(0x84d):_0x2485d7=JSON['stringify'](_0x12eb94);break;case _0x2269b1(0x87b):_0x2485d7=_0x12eb94[_0x2269b1(0x66c)]();break;default:_0x2485d7=_0x12eb94;}return _0x2485d7!==null?_0x2485d7['toString']():null;}async['processvaredits'](_0x304607,_0x310d11){const _0x328ca1=a0_0xf2a334;try{let _0x9c4588=_0x304607[_0x328ca1(0x44a)]?.[_0x328ca1(0x3c9)](_0x4c5057=>_0x4c5057[_0x328ca1(0x1aa)]===_0x310d11[_0x328ca1(0x29b)]?.[_0x328ca1(0x20e)]())||[],_0x21ec15=_0x310d11[_0x328ca1(0x77a)],_0x4bbaf9=null,_0x121043=[],_0x1d484d=_0x304607[_0x328ca1(0x1c9)][_0x328ca1(0x5c4)][_0x21ec15];_0x121043[_0x328ca1(0x355)](_0x328ca1(0x417)+_0x1d484d+'\x22');for(let _0x30f99a of _0x9c4588){_0x30f99a[_0x328ca1(0x2b7)]=_0x1d484d,_0x4bbaf9=_0x30f99a[_0x328ca1(0x2b7)];let _0x45cc8c;try{_0x45cc8c=this[_0x328ca1(0x1dd)](_0x304607,_0x30f99a);}catch(_0x2690b2){this[_0x328ca1(0x5e7)][_0x328ca1(0x830)](_0x328ca1(0x624)+_0x2690b2[_0x328ca1(0x80a)]);continue;}if(_0x45cc8c!==null){let _0x2b5ae9=_0x328ca1(0x7be)+_0x30f99a[_0x328ca1(0x7d3)]+'\x22',_0x39471f=[_0x328ca1(0x45a),_0x328ca1(0x206),'lowerCase',_0x328ca1(0x2fd),_0x328ca1(0x87b)];_0x30f99a['editOperator']===_0x328ca1(0x4a6)||_0x30f99a[_0x328ca1(0x7d3)]===_0x328ca1(0x2b8)?_0x2b5ae9+=_0x328ca1(0x679)+_0x30f99a[_0x328ca1(0x74b)]+_0x328ca1(0x87d)+_0x30f99a[_0x328ca1(0x5a8)]+'\x22':!_0x39471f[_0x328ca1(0x343)](_0x30f99a['editOperator'])&&_0x30f99a[_0x328ca1(0x74b)]!==null&&_0x30f99a[_0x328ca1(0x74b)]!==void 0x0&&(_0x2b5ae9+=_0x328ca1(0x457)+_0x30f99a['secondValue']+'\x22'),_0x2b5ae9+=_0x328ca1(0x720)+_0x45cc8c+'.',_0x121043[_0x328ca1(0x355)](_0x2b5ae9);}_0x45cc8c!==null&&(_0x1d484d=_0x45cc8c);}if(_0x304607['chatLog'][_0x328ca1(0x5c4)]&&_0x310d11[_0x328ca1(0x77a)]){_0x304607['chatLog']['realVariables'][_0x310d11['saveVariable']]=_0x1d484d;let _0x18cc1e={'variable':_0x310d11[_0x328ca1(0x77a)],'oldValue':_0x4bbaf9,'newValue':_0x1d484d,'moreLogs':_0x121043};try{this[_0x328ca1(0x7d2)](_0x304607,_0x310d11,_0x18cc1e);}catch(_0x55aabf){this['logger'][_0x328ca1(0x830)]('Erro\x20ao\x20atualizar\x20conversa:\x20'+_0x55aabf[_0x328ca1(0x80a)]);}}return _0x21ec15;}catch(_0x5b8704){return this['logger'][_0x328ca1(0x830)](_0x328ca1(0x7eb)+_0x5b8704[_0x328ca1(0x80a)]),null;}}async['processConditions'](_0x7db4ad,_0x153ca4){const _0xb88a94=a0_0xf2a334;try{let _0x7f1578=[],_0x2ba9cd=_0x7db4ad['conditions'][_0xb88a94(0x3c9)](_0x193501=>_0x193501[_0xb88a94(0x1aa)]===_0x153ca4[_0xb88a94(0x29b)]['toString']()),_0x102008=null,_0x3b86f5=!0x1;for(let _0x49276f of _0x2ba9cd){let _0x3dacbf=this[_0xb88a94(0x1d1)](_0x7db4ad,_0x49276f);_0x7f1578['push'](_0xb88a94(0x312)+_0x49276f['firstValue']+_0xb88a94(0x340)+_0x49276f[_0xb88a94(0x5f9)]+',\x20Segundo\x20Valor:\x20'+_0x49276f[_0xb88a94(0x74b)]+_0xb88a94(0x16c)+_0x3dacbf),_0x102008===null?_0x102008=_0x3dacbf:_0x49276f[_0xb88a94(0x87f)]===_0xb88a94(0x39e)?(_0x102008=_0x102008&&_0x3dacbf,_0x3dacbf||(_0x3b86f5=!0x0)):_0x49276f['OrAnd']==='or'&&(_0x3b86f5||(_0x102008=_0x102008||_0x3dacbf));}_0x102008===null&&(_0x102008=!0x0);let _0x3f4dc0={'moreLogs':_0x7f1578};_0x7db4ad[_0xb88a94(0x1c9)][_0xb88a94(0x1f8)]=_0x102008,await this[_0xb88a94(0x7d2)](_0x7db4ad,_0x153ca4,_0x3f4dc0);}catch(_0x3ab5d6){this['logger'][_0xb88a94(0x830)](this[_0xb88a94(0x29c)]+'\x20('+this[_0xb88a94(0x584)][_0xb88a94(0x7a3)]+'):\x20Error\x20processing\x20conditions:\x20'+(_0x3ab5d6 instanceof Error?_0x3ab5d6[_0xb88a94(0x80a)]:JSON[_0xb88a94(0x34b)](_0x3ab5d6,null,0x2)));}}[a0_0xf2a334(0x1d1)](_0xc4cbe2,_0x57b4b2){const _0x477310=a0_0xf2a334;let _0x5e50c4=_0x57b4b2[_0x477310(0x2b7)],_0x5f0d1c=_0x57b4b2['secondValue'];typeof _0x5e50c4==_0x477310(0x16b)&&(_0x5e50c4=this['replaceVariables'](_0x5e50c4,_0xc4cbe2[_0x477310(0x1c9)][_0x477310(0x5c4)])??''),typeof _0x5f0d1c=='string'&&(_0x5f0d1c=this['replaceVariables'](_0x5f0d1c,_0xc4cbe2[_0x477310(0x1c9)][_0x477310(0x5c4)])??'');try{switch(_0x57b4b2[_0x477310(0x5f9)]){case _0x477310(0x68a):return _0x5e50c4===_0x5f0d1c;case _0x477310(0x6bb):return _0x5e50c4!==_0x5f0d1c;case _0x477310(0x726):return this[_0x477310(0x726)](_0x5e50c4,_0x5f0d1c);case _0x477310(0x672):return!this[_0x477310(0x726)](_0x5e50c4,_0x5f0d1c);case _0x477310(0x33f):return parseFloat(_0x5e50c4)>parseFloat(_0x5f0d1c);case _0x477310(0x3c6):return parseFloat(_0x5e50c4)<parseFloat(_0x5f0d1c);case _0x477310(0x6ea):return _0x5e50c4!=='';case _0x477310(0x62c):return _0x5e50c4==='';case _0x477310(0x57b):return new RegExp(_0x5f0d1c)[_0x477310(0x852)](_0x5e50c4);case _0x477310(0x708):return!new RegExp(_0x5f0d1c)[_0x477310(0x852)](_0x5e50c4);default:return!0x1;}}catch(_0x11fc70){return this['logger'][_0x477310(0x830)](_0x477310(0x6cf)+_0x11fc70),!0x1;}}['contains'](_0x466a05,_0x4904be){const _0x1db533=a0_0xf2a334;if(_0x466a05===_0x4904be&&/^\d+$/[_0x1db533(0x852)](_0x466a05))return!0x0;if(this[_0x1db533(0x69d)](_0x466a05)&&/^\d+$/['test'](_0x4904be)){let _0x4fd2ca=_0x466a05['split'](',')['map'](_0x549051=>parseInt(_0x549051['trim']())),_0x5ee352=parseInt(_0x4904be);return _0x4fd2ca[_0x1db533(0x343)](_0x5ee352);}return _0x466a05[_0x1db533(0x343)](_0x4904be);}[a0_0xf2a334(0x69d)](_0x4fbfa1){return/^\d+(,\d+)*$/['test'](_0x4fbfa1);}['processConditionsTest'](_0x3bce81){const _0x4b60b1=a0_0xf2a334;let _0x3b0d66=!0x0,_0x86526b=null;for(let _0x3de3d of _0x3bce81){let _0x51673f=this[_0x4b60b1(0x7e7)](_0x3de3d);if(_0x86526b==='or'&&_0x51673f){_0x3b0d66=!0x0;break;}if(_0x86526b===_0x4b60b1(0x39e)&&!_0x51673f){_0x3b0d66=!0x1;break;}_0x86526b=_0x3de3d[_0x4b60b1(0x87f)];}return _0x3b0d66;}[a0_0xf2a334(0x7e7)](_0x942631){const _0x6f9b04=a0_0xf2a334;let _0x1222c4=_0x942631[_0x6f9b04(0x2b7)],_0x1ac080=_0x942631[_0x6f9b04(0x74b)];try{switch(_0x942631[_0x6f9b04(0x5f9)]){case _0x6f9b04(0x68a):return String(_0x1222c4)===String(_0x1ac080);case'notEqual':return String(_0x1222c4)!==String(_0x1ac080);case _0x6f9b04(0x726):return String(_0x1222c4)[_0x6f9b04(0x343)](String(_0x1ac080));case _0x6f9b04(0x672):return!String(_0x1222c4)['includes'](String(_0x1ac080));case _0x6f9b04(0x33f):return parseFloat(String(_0x1222c4))>parseFloat(String(_0x1ac080));case _0x6f9b04(0x3c6):return parseFloat(String(_0x1222c4))<parseFloat(String(_0x1ac080));case'notEmpty':return String(_0x1222c4)!=='';case _0x6f9b04(0x62c):return String(_0x1222c4)==='';case _0x6f9b04(0x57b):return new RegExp(String(_0x1ac080))[_0x6f9b04(0x852)](String(_0x1222c4));case _0x6f9b04(0x708):return!new RegExp(String(_0x1ac080))['test'](String(_0x1222c4));default:return!0x1;}}catch(_0x1c7424){return this['logger'][_0x6f9b04(0x830)](_0x6f9b04(0x6cf)+_0x1c7424),!0x1;}}async['saveTextReply'](_0x521d57,_0x12367f){const _0x3c544c=a0_0xf2a334;if(this['logger']['verbose'](this[_0x3c544c(0x29c)]+'\x20('+this[_0x3c544c(0x584)]['wuid']+_0x3c544c(0x3e3)),!_0x521d57||!_0x12367f)return this['logger'][_0x3c544c(0x830)](this[_0x3c544c(0x29c)]+'\x20('+this[_0x3c544c(0x584)][_0x3c544c(0x7a3)]+_0x3c544c(0x39f)),null;let _0x759720=_0x521d57['chatLog'][_0x3c544c(0x663)][_0x3c544c(0x28c)]['id'];this['logger'][_0x3c544c(0x6a3)](this[_0x3c544c(0x29c)]+'\x20('+this[_0x3c544c(0x584)]['wuid']+_0x3c544c(0x1b6)+_0x759720);let _0x3a6311={'key':{'id':_0x759720}},_0x5224e9=_0x12367f['saveVariable'];_0x521d57[_0x3c544c(0x1c9)][_0x3c544c(0x5c4)]['_'+_0x5224e9+_0x3c544c(0x404)]=null,_0x521d57['chatLog'][_0x3c544c(0x5c4)]['_'+_0x5224e9+'.mimetype']=null,_0x521d57['chatLog'][_0x3c544c(0x5c4)]['_'+_0x5224e9+_0x3c544c(0x849)]=null,_0x521d57[_0x3c544c(0x1c9)][_0x3c544c(0x5c4)]['_'+_0x5224e9+_0x3c544c(0x18e)]=_0x521d57[_0x3c544c(0x1c9)]['lastReceivedMessage'][_0x3c544c(0x519)];try{let _0x54586e=await this[_0x3c544c(0x40d)](_0x3a6311);this[_0x3c544c(0x5e7)][_0x3c544c(0x6a3)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x3c544c(0x5f7)),_0x521d57[_0x3c544c(0x1c9)][_0x3c544c(0x5c4)]['_'+_0x5224e9+'.url']=_0x54586e['fileUrl'],_0x521d57['chatLog'][_0x3c544c(0x5c4)]['_'+_0x5224e9+_0x3c544c(0x4ae)]=_0x54586e[_0x3c544c(0x2e0)];let _0x20d0cd=_0x54586e[_0x3c544c(0x2e0)][_0x3c544c(0x834)](/\/(\w+)$/),_0x5c2fe0=_0x20d0cd?_0x20d0cd[0x1]:null;_0x521d57[_0x3c544c(0x1c9)][_0x3c544c(0x5c4)]['_'+_0x5224e9+_0x3c544c(0x849)]=_0x5c2fe0,this[_0x3c544c(0x5e7)][_0x3c544c(0x6a3)](this[_0x3c544c(0x29c)]+'\x20('+this['instance'][_0x3c544c(0x7a3)]+_0x3c544c(0x4c7)+_0x5224e9+'\x27.');}catch(_0x1f28ee){this[_0x3c544c(0x5e7)]['error'](this['instanceName']+'\x20('+this[_0x3c544c(0x584)][_0x3c544c(0x7a3)]+_0x3c544c(0x3c0)+_0x1f28ee[_0x3c544c(0x80a)]);}let _0x512dba=_0x521d57[_0x3c544c(0x1c9)][_0x3c544c(0x663)][_0x3c544c(0x439)]||_0x521d57[_0x3c544c(0x1c9)][_0x3c544c(0x663)][_0x3c544c(0x49d)]||_0x521d57[_0x3c544c(0x1c9)][_0x3c544c(0x663)][_0x3c544c(0x24f)];try{_0x521d57[_0x3c544c(0x1c9)][_0x3c544c(0x5c4)]||(_0x521d57[_0x3c544c(0x1c9)][_0x3c544c(0x5c4)]={});let _0x55155b=_0x521d57[_0x3c544c(0x1c9)][_0x3c544c(0x5c4)][_0x5224e9];_0x521d57[_0x3c544c(0x1c9)]['realVariables'][_0x5224e9]=_0x512dba;let _0x5bd8c2={'variable':_0x5224e9,'oldValue':_0x55155b,'newValue':_0x512dba};this['updateConversation'](_0x521d57,_0x12367f,_0x5bd8c2),this[_0x3c544c(0x5e7)]['verbose'](this[_0x3c544c(0x29c)]+'\x20('+this['instance'][_0x3c544c(0x7a3)]+_0x3c544c(0x68b));}catch(_0x83af56){let _0x310a65={'error':!0x0,'errorLog':_0x83af56['toString']()};return this['updateConversation'](_0x521d57,_0x12367f,_0x310a65),this[_0x3c544c(0x5e7)][_0x3c544c(0x830)](this['instanceName']+'\x20('+this[_0x3c544c(0x584)][_0x3c544c(0x7a3)]+_0x3c544c(0x3dd)+(_0x83af56 instanceof Error?_0x83af56[_0x3c544c(0x80a)]:JSON['stringify'](_0x83af56,null,0x2))),null;}}async['stopConversation'](_0x188f64,_0x2e6868){const _0x3bbf12=a0_0xf2a334;if(this[_0x3bbf12(0x5e7)][_0x3bbf12(0x6a3)](this[_0x3bbf12(0x29c)]+'\x20('+this[_0x3bbf12(0x584)][_0x3bbf12(0x7a3)]+_0x3bbf12(0x23b)),!_0x188f64||!_0x2e6868)return this['logger'][_0x3bbf12(0x830)](this[_0x3bbf12(0x29c)]+'\x20('+this[_0x3bbf12(0x584)][_0x3bbf12(0x7a3)]+_0x3bbf12(0x39f)),null;let _0x5189b2=Date[_0x3bbf12(0x5eb)](),_0x59668a=parseInt(_0x2e6868['stopMinutes'],0xa);if(isNaN(_0x59668a))return this[_0x3bbf12(0x5e7)][_0x3bbf12(0x830)](this[_0x3bbf12(0x29c)]+'\x20('+this[_0x3bbf12(0x584)][_0x3bbf12(0x7a3)]+_0x3bbf12(0x3bb)),null;let _0x4c1c3a={'newStoppedUntil':_0x5189b2+_0x59668a*0x3c*0x3e8};return await this[_0x3bbf12(0x7d2)](_0x188f64,_0x2e6868,_0x4c1c3a,!0x0),null;}async[a0_0xf2a334(0x716)](_0x7a6193,_0x349ac7){const _0x1fc9e2=a0_0xf2a334;try{switch(_0x349ac7[_0x1fc9e2(0x309)]['command']){case _0x1fc9e2(0x4c3):await this['uazapiSendText'](_0x7a6193,_0x349ac7);break;case _0x1fc9e2(0x8e9):await this[_0x1fc9e2(0x8c9)](_0x7a6193,_0x349ac7);break;case _0x1fc9e2(0x8ed):await this[_0x1fc9e2(0x45c)](_0x7a6193,_0x349ac7);break;case _0x1fc9e2(0x461):await this[_0x1fc9e2(0x7dc)](_0x7a6193,_0x349ac7);break;case _0x1fc9e2(0x33c):await this[_0x1fc9e2(0x18d)](_0x7a6193,_0x349ac7);break;case'sendPoll':await this[_0x1fc9e2(0x6d6)](_0x7a6193,_0x349ac7);break;case _0x1fc9e2(0x378):await this[_0x1fc9e2(0x6d6)](_0x7a6193,_0x349ac7);break;case _0x1fc9e2(0x503):await this[_0x1fc9e2(0x48c)](_0x7a6193,_0x349ac7);break;default:this[_0x1fc9e2(0x5e7)]['error'](this[_0x1fc9e2(0x29c)]+'\x20('+this[_0x1fc9e2(0x584)][_0x1fc9e2(0x7a3)]+_0x1fc9e2(0x1f1)+_0x349ac7[_0x1fc9e2(0x309)][_0x1fc9e2(0x17c)]);}}catch(_0x112c44){this[_0x1fc9e2(0x5e7)]['error'](this[_0x1fc9e2(0x29c)]+'\x20('+this[_0x1fc9e2(0x584)]['wuid']+_0x1fc9e2(0x20d)+(_0x112c44 instanceof Error?_0x112c44[_0x1fc9e2(0x80a)]:JSON[_0x1fc9e2(0x34b)](_0x112c44,null,0x2)));}}async['updateConversation'](_0xa42841,_0x8db5d8,_0x4ca2fe,_0x4ba981=!0x1,_0xcffe1a=!0x1){const _0xc40c76=a0_0xf2a334;_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x2d1)]||(_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x2d1)]=[]);let _0x28929c=(_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x2d1)]?.['length']??0x0)+0x1,_0x226438=_0xa42841['chatLog'][_0xc40c76(0x2d1)][_0xc40c76(0x3c9)](_0x467d2d=>String(_0x467d2d['blockId'])===String(_0x8db5d8[_0xc40c76(0x29b)]))['length']+0x1,_0x4612ec=_0x4ca2fe?.['onTime']??Date[_0xc40c76(0x5eb)](),_0x586bca=_0x4ca2fe?.[_0xc40c76(0x830)]?_0x4ca2fe[_0xc40c76(0x855)]??_0x4ca2fe[_0xc40c76(0x830)]['toString']():void 0x0,_0x2a4c55={'onTime':_0x4612ec,'blockId':_0x8db5d8[_0xc40c76(0x29b)],'order':_0x28929c,'activatedCount':_0x226438,'error':_0x4ca2fe?.[_0xc40c76(0x830)]??!0x1,'messageId':_0x4ca2fe?.[_0xc40c76(0x487)],'apiResponse':_0x4ca2fe?.[_0xc40c76(0x396)],'apiResponseString':_0x4ca2fe?.[_0xc40c76(0x396)]?JSON['stringify'](_0x4ca2fe?.[_0xc40c76(0x396)]):void 0x0,'variable':_0x4ca2fe?.[_0xc40c76(0x1ec)],'oldValue':_0x4ca2fe?.[_0xc40c76(0x4f6)],'newValue':_0x4ca2fe?.[_0xc40c76(0x78c)],'newStoppedUntil':_0x4ca2fe?.['newStoppedUntil'],'moreLogs':_0x4ca2fe?.[_0xc40c76(0x8cc)],'errorLog':_0x586bca};if(_0x4ca2fe[_0xc40c76(0x8cc)]&&_0x4ca2fe[_0xc40c76(0x8cc)]['length']>0x0){let _0x31af3a=_0x4ca2fe[_0xc40c76(0x8cc)][_0xc40c76(0x5b0)](_0x358ce8=>this['replaceVariablesLogs'](_0x358ce8,_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x5c4)]));_0x2a4c55[_0xc40c76(0x8cc)]=_0x31af3a;}if(_0xa42841['chatLog'][_0xc40c76(0x5c4)]||(_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x5c4)]={}),_0xa42841[_0xc40c76(0x1c9)]['realVariables'][_0xc40c76(0x85f)]=String(_0x226438),_0xa42841['chatLog'][_0xc40c76(0x5c4)]['_error']=String(_0x4ca2fe[_0xc40c76(0x830)]??!0x1),_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x2d1)][_0xc40c76(0x355)](_0x2a4c55),_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x5c4)][_0xc40c76(0x311)]&&_0xa42841['chatLog'][_0xc40c76(0x5c4)]['telefone']!==_0xa42841[_0xc40c76(0x61e)]){let _0xc31efc=(await this[_0xc40c76(0x56e)]({'numbers':[_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x5c4)][_0xc40c76(0x311)]]}))[0x0][_0xc40c76(0x484)];_0xa42841['chatLog'][_0xc40c76(0x5c4)][_0xc40c76(0x311)]=_0xc31efc,_0xa42841[_0xc40c76(0x61e)]=_0xc31efc;try{let _0x15ac5f={'_id':{'$ne':_0xa42841[_0xc40c76(0x29b)]},'remoteJid':_0xc31efc,'status':_0xc40c76(0x330)},_0x10974d={'status':_0xc40c76(0x561)};await this[_0xc40c76(0x677)][_0xc40c76(0x3ff)][_0xc40c76(0x362)](_0x15ac5f,_0x10974d,this[_0xc40c76(0x584)][_0xc40c76(0x7a3)]),this[_0xc40c76(0x5e7)][_0xc40c76(0x6a3)](this[_0xc40c76(0x29c)]+'\x20('+this[_0xc40c76(0x584)][_0xc40c76(0x7a3)]+_0xc40c76(0x758));}catch(_0x5e886f){this[_0xc40c76(0x5e7)][_0xc40c76(0x830)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20'+_0x5e886f[_0xc40c76(0x80a)]);}try{let _0x3027d7=_0xa42841['chatLog'][_0xc40c76(0x5c4)],_0x438f67=await this[_0xc40c76(0x725)](_0xc31efc),_0x4893a2={..._0x3027d7,..._0x438f67,'_remoteJid':_0xc31efc};_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x5c4)]=_0x4893a2;}catch(_0x38d35c){this[_0xc40c76(0x5e7)]['error'](this[_0xc40c76(0x29c)]+'\x20('+this['instance'][_0xc40c76(0x7a3)]+'):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20'+_0x38d35c[_0xc40c76(0x80a)]);}}_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x761)]=_0x8db5d8['_id'][_0xc40c76(0x20e)](),_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x3d1)]&&(_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x3d1)]=_0xa42841['chatLog']['lastSendMessage']),_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x663)]&&(_0xa42841[_0xc40c76(0x1c9)]['lastReceivedMessage']=_0xa42841['chatLog'][_0xc40c76(0x663)]),_0xa42841[_0xc40c76(0x1c9)][_0xc40c76(0x1f8)]&&(_0xa42841[_0xc40c76(0x1c9)]['lastCondition']=_0xa42841['chatLog'][_0xc40c76(0x1f8)]),_0xcffe1a&&(_0xa42841[_0xc40c76(0x7cb)]=_0xc40c76(0x561)),_0x4ba981?this[_0xc40c76(0x447)](_0xa42841):this[_0xc40c76(0x64b)](_0xa42841,_0x8db5d8);}[a0_0xf2a334(0x6c6)](_0x2d4ddf,_0x2b7ef3){const _0x31f097=a0_0xf2a334;return _0x2d4ddf[_0x31f097(0x6b0)](/\{\{([^}]+)\}\}/g,(_0x2fc50b,_0x13bd38)=>_0x2b7ef3[_0x13bd38]?'{{'+_0x13bd38+'}}\x20->\x20\x22'+_0x2b7ef3[_0x13bd38]+'\x22':'{{'+_0x13bd38+_0x31f097(0x90a));}async['saveConversationToDatabase'](_0x497344){const _0x35a472=a0_0xf2a334;try{let _0x1031c5=Object[_0x35a472(0x527)](_0x497344[_0x35a472(0x1c9)]['realVariables'])['map'](([_0x5296c1,_0x2e56bc])=>({'name':_0x5296c1,'value':_0x2e56bc})),_0x1ac97a={'status':_0x497344['status'],'remoteJid':_0x497344['remoteJid'],'blocks':_0x497344[_0x35a472(0x34e)],'waitingMenu_id':_0x497344[_0x35a472(0x3eb)],'waitingMenu_text':_0x497344[_0x35a472(0x7cd)],'waitingMenu_replyOptions':_0x497344[_0x35a472(0x4ea)],'chatLog':{'lastBlockId':_0x497344['chatLog'][_0x35a472(0x761)],'lastSendMessage':_0x497344[_0x35a472(0x1c9)][_0x35a472(0x3d1)],'lastReceivedMessage':_0x497344[_0x35a472(0x1c9)][_0x35a472(0x663)],'lastCondition':_0x497344[_0x35a472(0x1c9)][_0x35a472(0x1f8)],'chatVariables':_0x1031c5,'realVariables':_0x497344[_0x35a472(0x1c9)][_0x35a472(0x5c4)],'blockLogs':_0x497344[_0x35a472(0x1c9)][_0x35a472(0x2d1)]}},_0xca078f=await this[_0x35a472(0x677)][_0x35a472(0x3ff)]['updateOne'](_0x497344[_0x35a472(0x29b)],_0x1ac97a,this['instance'][_0x35a472(0x7a3)]);if(_0xca078f){this['logger'][_0x35a472(0x6a3)](this[_0x35a472(0x29c)]+'\x20('+this[_0x35a472(0x584)][_0x35a472(0x7a3)]+_0x35a472(0x597)+_0xca078f[_0x35a472(0x29b)]);try{let _0x40f6ef=[_0x35a472(0x81b),_0x35a472(0x1f4),_0x35a472(0x3b0),_0x35a472(0x685),_0x35a472(0x7cb),_0x35a472(0x286),'responsavelid',_0x35a472(0x804),'etiquetas','atendimentoAberto'];if(!this[_0x35a472(0x580)]&&(await this['getAutomateSystem'](),!this[_0x35a472(0x580)]))throw new Error(_0x35a472(0x717));let _0xc85f25=this[_0x35a472(0x580)]?.['customFields'][_0x35a472(0x5b0)](_0x5249fe=>_0x5249fe['name']),_0x156d5f={};Object[_0x35a472(0x527)](_0x497344[_0x35a472(0x1c9)][_0x35a472(0x5c4)])[_0x35a472(0x3b5)](([_0x362487,_0x14f801])=>{const _0x989cab=_0x35a472;_0x40f6ef[_0x989cab(0x343)](_0x362487)&&(_0x362487===_0x989cab(0x804)&&typeof _0x14f801==_0x989cab(0x16b)?_0x156d5f[_0x362487]=_0x14f801[_0x989cab(0x8a0)](',')[_0x989cab(0x5b0)](_0x36e3ce=>_0x36e3ce[_0x989cab(0x66c)]())[_0x989cab(0x3c9)](_0x225224=>_0x225224!==''):_0x362487===_0x989cab(0x301)&&typeof _0x14f801==_0x989cab(0x16b)?_0x156d5f[_0x362487]=_0x14f801[_0x989cab(0x8a0)](',')['map'](_0x48f22c=>_0x48f22c['trim']())[_0x989cab(0x3c9)](_0x322477=>_0x322477!==''):_0x156d5f[_0x362487]=_0x14f801);});let _0x11bdc1=_0x497344['chatLog'][_0x35a472(0x2d1)][_0x497344['chatLog'][_0x35a472(0x2d1)][_0x35a472(0x250)]-0x1];if(_0x11bdc1){let _0x4ce62e=_0x11bdc1[_0x35a472(0x6c0)];_0x4ce62e!==void 0x0&&(_0x156d5f['desativadoFluxoAte']=_0x4ce62e['toString']());}let _0x2d7fc2=_0x1031c5[_0x35a472(0x3c9)](_0x330b32=>_0xc85f25[_0x35a472(0x343)](_0x330b32[_0x35a472(0x76f)]));this[_0x35a472(0x5e7)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x35a472(0x306)),this[_0x35a472(0x5e7)][_0x35a472(0x6a3)](_0x156d5f),this[_0x35a472(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0x35a472(0x584)][_0x35a472(0x7a3)]+_0x35a472(0x1ca)),this['logger'][_0x35a472(0x6a3)](_0x2d7fc2);let _0x11f4d7=_0x2d7fc2[_0x35a472(0x5b0)](_0x127c14=>{const _0x42d5df=_0x35a472;let _0x159e8e=this[_0x42d5df(0x580)]?.['customFields'][_0x42d5df(0x556)](_0x457c90=>_0x457c90[_0x42d5df(0x76f)]===_0x127c14[_0x42d5df(0x76f)]);if(!_0x159e8e)throw new Error(_0x42d5df(0x868)+_0x127c14[_0x42d5df(0x76f)]);return{'_id':_0x159e8e[_0x42d5df(0x29b)],'value':_0x127c14[_0x42d5df(0x79a)]};});this[_0x35a472(0x5e7)][_0x35a472(0x6a3)](this['instanceName']+'\x20('+this[_0x35a472(0x584)][_0x35a472(0x7a3)]+_0x35a472(0x637)),this['logger'][_0x35a472(0x6a3)](_0x11f4d7),await this[_0x35a472(0x5f2)](_0x497344[_0x35a472(0x61e)],_0x156d5f,_0x11f4d7);}catch(_0x433cc3){this[_0x35a472(0x5e7)]['error'](this['instanceName']+'\x20('+this[_0x35a472(0x584)]['wuid']+_0x35a472(0x799)+(_0x433cc3 instanceof Error?_0x433cc3[_0x35a472(0x80a)]:JSON[_0x35a472(0x34b)](_0x433cc3,null,0x2)));}}else this[_0x35a472(0x5e7)][_0x35a472(0x830)](this[_0x35a472(0x29c)]+'\x20('+this['instance'][_0x35a472(0x7a3)]+_0x35a472(0x699));}catch(_0x49ab58){this['logger'][_0x35a472(0x830)](this[_0x35a472(0x29c)]+'\x20('+this[_0x35a472(0x584)][_0x35a472(0x7a3)]+_0x35a472(0x374)+(_0x49ab58 instanceof Error?_0x49ab58[_0x35a472(0x80a)]:JSON[_0x35a472(0x34b)](_0x49ab58,null,0x2)));}}async[a0_0xf2a334(0x5f2)](_0x308494,_0x5ee46b,_0x36ac3f){const _0x4427fa=a0_0xf2a334;try{let _0x2aff00={'leadInfo.leadnome':_0x5ee46b[_0x4427fa(0x81b)],'leadInfo.nomecompleto':_0x5ee46b[_0x4427fa(0x1f4)],'leadInfo.email':_0x5ee46b['email'],'leadInfo.cpf':_0x5ee46b['cpf'],'leadInfo.status':_0x5ee46b[_0x4427fa(0x7cb)],'leadInfo.notas':_0x5ee46b[_0x4427fa(0x286)],'leadInfo.responsavelid':_0x5ee46b[_0x4427fa(0x594)],'leadInfo.tags':_0x5ee46b[_0x4427fa(0x804)],'leadInfo.etiquetas':_0x5ee46b[_0x4427fa(0x301)],'leadInfo.customFields':_0x36ac3f,'leadInfo.atendimentoAberto':_0x5ee46b['atendimentoAberto']},_0x549c9d=await this[_0x4427fa(0x677)][_0x4427fa(0x2fb)]['findOne']({'where':{'_id':_0x308494}},this['instance'][_0x4427fa(0x7a3)]);if(!_0x549c9d)return'chat\x20não\x20encontrado';let _0x32f03b=new Set(_0x549c9d[_0x4427fa(0x1df)][_0x4427fa(0x301)]||[]),_0x493517=new Set(_0x5ee46b[_0x4427fa(0x301)]||[]),_0x18b68f=await this[_0x4427fa(0x677)][_0x4427fa(0x1c8)][_0x4427fa(0x556)]({'where':{}},this[_0x4427fa(0x584)][_0x4427fa(0x7a3)]),_0x2d5988=new Set(_0x18b68f[_0x4427fa(0x5b0)](_0x5ef9e7=>_0x5ef9e7[_0x4427fa(0x29b)])),_0x5b6b8d=[..._0x493517][_0x4427fa(0x3c9)](_0xdf92d3=>!_0x32f03b[_0x4427fa(0x711)](_0xdf92d3)&&_0x2d5988[_0x4427fa(0x711)](_0xdf92d3)),_0x1a2c32=[..._0x32f03b][_0x4427fa(0x3c9)](_0x2e1f86=>!_0x493517['has'](_0x2e1f86));for(let _0x5b432a of _0x5b6b8d)await this[_0x4427fa(0x198)](_0x5b432a,_0x549c9d[_0x4427fa(0x29b)]),_0x32f03b[_0x4427fa(0x1c0)](_0x5b432a);for(let _0x681efd of _0x1a2c32)await this[_0x4427fa(0x5d8)](_0x681efd,_0x549c9d[_0x4427fa(0x29b)]),_0x32f03b['delete'](_0x681efd);if('desativadoFluxoAte'in _0x5ee46b){let _0x55449c=_0x5ee46b[_0x4427fa(0x64f)];_0x2aff00[_0x4427fa(0x616)]=_0x55449c?Number(_0x55449c):null;}if(_0x4427fa(0x6b8)in _0x5ee46b){let _0x3c8d3a=_0x5ee46b[_0x4427fa(0x6b8)]['toLowerCase']();_0x2aff00[_0x4427fa(0x3ca)]=_0x3c8d3a===_0x4427fa(0x2c5)||_0x3c8d3a==='1'||_0x3c8d3a===_0x4427fa(0x63b)||_0x3c8d3a===_0x4427fa(0x5a1);}let _0x278c3d=await this[_0x4427fa(0x677)][_0x4427fa(0x2fb)][_0x4427fa(0x32f)]({'where':{'_id':_0x308494}},_0x2aff00,this[_0x4427fa(0x584)][_0x4427fa(0x7a3)]);_0x278c3d?(this[_0x4427fa(0x5e7)][_0x4427fa(0x6a3)](this['instanceName']+'\x20('+this[_0x4427fa(0x584)][_0x4427fa(0x7a3)]+_0x4427fa(0x491)+_0x278c3d[_0x4427fa(0x29b)]),F(this[_0x4427fa(0x29c)],_0x4427fa(0x806),{'chat':_0x278c3d})):this[_0x4427fa(0x5e7)][_0x4427fa(0x830)](this['instanceName']+'\x20('+this[_0x4427fa(0x584)][_0x4427fa(0x7a3)]+_0x4427fa(0x16d));}catch(_0x2f4760){this[_0x4427fa(0x5e7)][_0x4427fa(0x830)](this[_0x4427fa(0x29c)]+'\x20('+this[_0x4427fa(0x584)][_0x4427fa(0x7a3)]+_0x4427fa(0x8ef)+(_0x2f4760 instanceof Error?_0x2f4760[_0x4427fa(0x80a)]:JSON['stringify'](_0x2f4760,null,0x2)));}}async['updateStopChat'](_0x13d284,_0x46d55a){const _0x13c41f=a0_0xf2a334;this[_0x13c41f(0x5e7)][_0x13c41f(0x6a3)](this[_0x13c41f(0x29c)]+'\x20('+this[_0x13c41f(0x584)]['wuid']+_0x13c41f(0x38f)+_0x46d55a);try{let _0x5cc4a9=await this[_0x13c41f(0x677)][_0x13c41f(0x2fb)][_0x13c41f(0x32f)]({'where':{'_id':_0x13d284['remoteJid']}},{'leadInfo.desativadoFluxoAte':_0x46d55a},this[_0x13c41f(0x584)][_0x13c41f(0x7a3)]);this['logger'][_0x13c41f(0x6a3)](this['instanceName']+'\x20('+this[_0x13c41f(0x584)][_0x13c41f(0x7a3)]+'):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20'+_0x13d284['_id']),this['logger']['verbose'](this[_0x13c41f(0x29c)]+'\x20('+this[_0x13c41f(0x584)][_0x13c41f(0x7a3)]+_0x13c41f(0x38f)+JSON[_0x13c41f(0x34b)](_0x5cc4a9,null,0x2)),_0x5cc4a9&&F(this[_0x13c41f(0x29c)],_0x13c41f(0x806),{'chat':_0x5cc4a9});}catch(_0x5a656c){this[_0x13c41f(0x5e7)][_0x13c41f(0x830)](this[_0x13c41f(0x29c)]+'\x20('+this[_0x13c41f(0x584)][_0x13c41f(0x7a3)]+'):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20'+(_0x5a656c instanceof Error?_0x5a656c['message']:JSON['stringify'](_0x5a656c,null,0x2)));}}async[a0_0xf2a334(0x86d)](_0x4bd850){const _0x8280b4=a0_0xf2a334;try{this[_0x8280b4(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0x8280b4(0x584)][_0x8280b4(0x7a3)]+'):\x20Buscando\x20flow...');let _0x15525d=_0x4bd850[_0x8280b4(0x6b0)](/\D/g,''),_0x1c970f=this[_0x8280b4(0x580)]['flows'][_0x8280b4(0x556)](_0x4ea47e=>_0x4ea47e[_0x8280b4(0x8ce)]===_0x15525d);if(_0x1c970f||(this[_0x8280b4(0x5e7)][_0x8280b4(0x6a3)](this['instanceName']+'\x20('+this[_0x8280b4(0x584)][_0x8280b4(0x7a3)]+_0x8280b4(0x65d)),_0x1c970f=this[_0x8280b4(0x580)][_0x8280b4(0x633)][_0x8280b4(0x556)](_0x2dd5ca=>_0x2dd5ca[_0x8280b4(0x59e)]===!0x0)),!_0x1c970f)return this[_0x8280b4(0x5e7)][_0x8280b4(0x6a3)](this[_0x8280b4(0x29c)]+'\x20('+this[_0x8280b4(0x584)][_0x8280b4(0x7a3)]+'):\x20Não\x20achou\x20nenhum\x20flow'),null;let _0x54aabf=await this[_0x8280b4(0x677)][_0x8280b4(0x1e8)][_0x8280b4(0x18a)]({'where':{'_id':_0x1c970f[_0x8280b4(0x29b)]}});if(!_0x54aabf||!_0x54aabf[_0x8280b4(0x8a8)]?.['includes'](this[_0x8280b4(0x584)]['wuid']))throw this[_0x8280b4(0x5e7)][_0x8280b4(0x830)](this[_0x8280b4(0x29c)]+'\x20('+this['instance'][_0x8280b4(0x7a3)]+_0x8280b4(0x65a)+_0x54aabf['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x54aabf[_0x8280b4(0x29b)]+_0x8280b4(0x4b1));return _0x54aabf;}catch(_0x276e65){return this['logger']['error'](this[_0x8280b4(0x29c)]+'\x20('+this[_0x8280b4(0x584)]['wuid']+_0x8280b4(0x8a9)+(_0x276e65 instanceof Error?_0x276e65[_0x8280b4(0x80a)]:JSON['stringify'](_0x276e65,null,0x2))),null;}}async['findConversation'](_0xf00f82,_0x3f6a59){const _0x25e5c5=a0_0xf2a334;try{let _0x16bce7=!!_0x3f6a59[_0x25e5c5(0x24f)],_0x30cdce=_0x3f6a59[_0x25e5c5(0x8f7)],_0x1feea4=null;if(this[_0x25e5c5(0x5e7)][_0x25e5c5(0x6a3)](this[_0x25e5c5(0x29c)]+'\x20('+this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]+_0x25e5c5(0x43e)+_0x16bce7+_0x25e5c5(0x419)+_0x30cdce),_0x16bce7){this[_0x25e5c5(0x5e7)][_0x25e5c5(0x6a3)](this[_0x25e5c5(0x29c)]+'\x20('+this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]+'):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto');let _0x105eaa={'where':{'remoteJid':_0xf00f82,'waitingMenu_id':_0x30cdce}};if(_0x1feea4=await this['repository'][_0x25e5c5(0x3ff)][_0x25e5c5(0x18a)](_0x105eaa,this['instance']['wuid']),!_0x1feea4)return this[_0x25e5c5(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]+'):\x20não\x20encontrou'),null;let _0x35cf6e=Date[_0x25e5c5(0x5eb)](),_0x4b5040=_0x1feea4?.['minutesToClose']||0x0,_0x37d877=_0x35cf6e-_0x4b5040*0x3c*0x3e8;if(_0x1feea4[_0x25e5c5(0x20f)]<_0x37d877){this[_0x25e5c5(0x5e7)][_0x25e5c5(0x6a3)](this[_0x25e5c5(0x29c)]+'\x20('+this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]+_0x25e5c5(0x6dd));let _0x2d9748={'number':_0x1feea4[_0x25e5c5(0x61e)],'options':{'delay':0x0},'textMessage':{'text':_0x1feea4[_0x25e5c5(0x4fd)]}};await this[_0x25e5c5(0x605)](_0x2d9748);let _0x707644={'status':'closed','waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x25e5c5(0x677)]['flowConversation']['updateOne'](_0x1feea4[_0x25e5c5(0x29b)],_0x707644,this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]),null;}return _0x1feea4['lastInteraction']=Date[_0x25e5c5(0x5eb)](),_0x1feea4['chatLog'][_0x25e5c5(0x663)]=_0x3f6a59,_0x1feea4;}else{this[_0x25e5c5(0x5e7)]['verbose'](this[_0x25e5c5(0x29c)]+'\x20('+this['instance'][_0x25e5c5(0x7a3)]+_0x25e5c5(0x62f)+this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]+_0x25e5c5(0x61c)),this[_0x25e5c5(0x5e7)][_0x25e5c5(0x6a3)](this[_0x25e5c5(0x29c)]+'\x20('+this['instance'][_0x25e5c5(0x7a3)]+_0x25e5c5(0x339));let _0x54b3b4={'where':{'remoteJid':_0xf00f82,'status':'open'}};if(_0x1feea4=await this[_0x25e5c5(0x677)][_0x25e5c5(0x3ff)]['findOne'](_0x54b3b4,this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]),!_0x1feea4){let _0x28f008=await this[_0x25e5c5(0x86d)](_0xf00f82);if(_0x28f008&&(_0x1feea4=await this[_0x25e5c5(0x1cc)](_0x28f008,_0x3f6a59[_0x25e5c5(0x28c)],_0x3f6a59)),!_0x1feea4)return null;}let _0x576ccb=Date[_0x25e5c5(0x5eb)](),_0x4046b5=_0x1feea4?.['minutesToClose']||0x0,_0x20b373=_0x576ccb-_0x4046b5*0x3c*0x3e8;if(this[_0x25e5c5(0x5e7)][_0x25e5c5(0x6a3)](this[_0x25e5c5(0x29c)]+'\x20('+this['instance'][_0x25e5c5(0x7a3)]+_0x25e5c5(0x326)+_0x576ccb+_0x25e5c5(0x5bc)+_0x4046b5+',\x20Expiration\x20Time:\x20'+_0x20b373),this[_0x25e5c5(0x5e7)]['verbose'](this[_0x25e5c5(0x29c)]+'\x20('+this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]+_0x25e5c5(0x4b9)),this['logger'][_0x25e5c5(0x6a3)](this[_0x25e5c5(0x29c)]+'\x20('+this['instance']['wuid']+'):\x20conversation.lastInteraction:\x20'+_0x1feea4[_0x25e5c5(0x20f)]),this[_0x25e5c5(0x5e7)][_0x25e5c5(0x6a3)](this[_0x25e5c5(0x29c)]+'\x20('+this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]+_0x25e5c5(0x840)+_0x20b373),_0x1feea4['lastInteraction']<_0x20b373){this[_0x25e5c5(0x5e7)]['verbose'](this[_0x25e5c5(0x29c)]+'\x20('+this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]+'):\x20Conversa\x20está\x20expirada');let _0x27ba05=await this[_0x25e5c5(0x86d)](_0xf00f82);if(_0x27ba05===null)return null;_0x1feea4&&await this[_0x25e5c5(0x677)][_0x25e5c5(0x3ff)]['updateOne'](_0x1feea4[_0x25e5c5(0x29b)],{'status':_0x25e5c5(0x561)},this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]),_0x1feea4=await this[_0x25e5c5(0x1cc)](_0x27ba05,_0x3f6a59['key'],_0x3f6a59);}return _0x1feea4[_0x25e5c5(0x20f)]=_0x576ccb,_0x1feea4[_0x25e5c5(0x1c9)][_0x25e5c5(0x663)]=_0x3f6a59,_0x1feea4;}}catch(_0x21945a){return this[_0x25e5c5(0x5e7)][_0x25e5c5(0x830)](this['instanceName']+'\x20('+this[_0x25e5c5(0x584)][_0x25e5c5(0x7a3)]+_0x25e5c5(0x278)+(_0x21945a instanceof Error?_0x21945a[_0x25e5c5(0x80a)]:JSON[_0x25e5c5(0x34b)](_0x21945a,null,0x2))),null;}}async['createNewConversation'](_0x4b85f5,_0x22b31f,_0x496071){const _0x41934f=a0_0xf2a334;this[_0x41934f(0x5e7)]['verbose'](this[_0x41934f(0x29c)]+'\x20('+this[_0x41934f(0x584)]['wuid']+_0x41934f(0x191));try{let _0x3f7a17=require(_0x41934f(0x3a7))[_0x41934f(0x880)],_0x2ef5db=Date[_0x41934f(0x5eb)](),_0x182bdf=_0x41934f(0x896),_0x4eb4b5=_0x22b31f['fromMe']?null:_0x496071,_0x440834=_0x22b31f[_0x41934f(0x329)]?_0x496071:null,_0x1aeb08=_0x22b31f['remoteJid'],_0x5a5938=this[_0x41934f(0x580)][_0x41934f(0x633)]['find'](_0x3c7cb2=>_0x3c7cb2['_id']===_0x4b85f5[_0x41934f(0x29b)]?.[_0x41934f(0x20e)]()),_0x12b55d=_0x5a5938?.[_0x41934f(0x20c)]??_0x4b85f5[_0x41934f(0x20c)]??0x0,_0x3eb21a=_0x5a5938?.[_0x41934f(0x871)]??_0x4b85f5['readMessages']??!0x1;await this[_0x41934f(0x2f8)](_0x1aeb08);let _0x1b49dc={'flowId':_0x4b85f5['_id'],..._0x4b85f5,'chatLog':null},_0x46101a=await this['variablesToObject'](_0x1b49dc[_0x41934f(0x613)]),_0x3e4180=await this[_0x41934f(0x725)](_0x1aeb08),_0x394816={..._0x46101a,..._0x3e4180,'_remoteJid':_0x1aeb08},_0xc19019={'lastReceivedMessage':_0x4eb4b5,'lastSendMessage':_0x440834,'lastBlockId':_0x182bdf,'lastCondition':!0x0,'realVariables':_0x394816};_0x1b49dc[_0x41934f(0x1c9)]=_0xc19019,delete _0x1b49dc[_0x41934f(0x29b)],_0x1b49dc[_0x41934f(0x29b)]=new _0x3f7a17(),_0x1b49dc[_0x41934f(0x20f)]=_0x2ef5db,_0x1b49dc['status']='open',_0x1b49dc[_0x41934f(0x61e)]=_0x1aeb08,_0x1b49dc[_0x41934f(0x20c)]=_0x12b55d,_0x1b49dc['readMessages']=_0x3eb21a;let _0x5ae113=await this[_0x41934f(0x677)]['flowConversation']['updateOne'](_0x1b49dc[_0x41934f(0x29b)],_0x1b49dc,this[_0x41934f(0x584)]['wuid']);return this[_0x41934f(0x5e7)][_0x41934f(0x6a3)](this['instanceName']+'\x20('+this[_0x41934f(0x584)][_0x41934f(0x7a3)]+_0x41934f(0x532)),_0x5ae113?_0x1b49dc:null;}catch(_0x1b382d){return this[_0x41934f(0x5e7)][_0x41934f(0x830)](this[_0x41934f(0x29c)]+'\x20('+this[_0x41934f(0x584)][_0x41934f(0x7a3)]+_0x41934f(0x586)+(_0x1b382d instanceof Error?_0x1b382d['message']:JSON[_0x41934f(0x34b)](_0x1b382d,null,0x2))),_0x1b382d;}}async[a0_0xf2a334(0x26c)](_0xdeef72,_0x2dde41){const _0x1e8afe=a0_0xf2a334;let _0x535610=_0xdeef72[_0x1e8afe(0x61e)];_0x2dde41['uazapi'][_0x1e8afe(0x61e)]&&_0x2dde41[_0x1e8afe(0x309)][_0x1e8afe(0x61e)][_0x1e8afe(0x66c)]()!==''&&(_0x535610=_0x2dde41[_0x1e8afe(0x309)][_0x1e8afe(0x61e)][_0x1e8afe(0x66c)]()),this[_0x1e8afe(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0x1e8afe(0x584)][_0x1e8afe(0x7a3)]+_0x1e8afe(0x6e0));let _0x13d053={'number':_0x535610,'options':{'delay':_0x2dde41[_0x1e8afe(0x309)]['delay'],'linkPreview':_0x2dde41[_0x1e8afe(0x309)]['linkPreview']},'textMessage':{'text':_0x2dde41[_0x1e8afe(0x309)][_0x1e8afe(0x439)]}};try{let _0x124c22=await this[_0x1e8afe(0x605)](_0x13d053);if(_0x124c22){let _0x17727e={'_id':_0x124c22['key']['id'],'_fromMe':_0x124c22[_0x1e8afe(0x28c)]['fromMe'],'_remoteJid':_0x124c22[_0x1e8afe(0x28c)][_0x1e8afe(0x61e)]},_0x1e1ab6=(0x0,w['normalizeMessageContent'])(_0x124c22[_0x1e8afe(0x80a)]),_0x1ba591=(0x0,w['getContentType'])(_0x1e1ab6);_0xdeef72[_0x1e8afe(0x1c9)][_0x1e8afe(0x761)]=_0x2dde41[_0x1e8afe(0x29b)][_0x1e8afe(0x20e)]();let {message_normalized:_0x1d90ae}=this[_0x1e8afe(0x31d)](_0x1e1ab6,_0x1ba591,null);_0xdeef72[_0x1e8afe(0x1c9)][_0x1e8afe(0x3d1)]=await _0x1d90ae;let _0x25a751={'messageId':_0x124c22['key']['id']},_0x38fc95=_0xdeef72['chatLog'][_0x1e8afe(0x5c4)];Object[_0x1e8afe(0x58a)](_0x38fc95,_0x17727e),_0xdeef72[_0x1e8afe(0x1c9)]['realVariables']=_0x38fc95,this[_0x1e8afe(0x7d2)](_0xdeef72,_0x2dde41,_0x25a751);}else{let _0x5e22f1={'error':!0x0};this[_0x1e8afe(0x7d2)](_0xdeef72,_0x2dde41,_0x5e22f1),this['logger'][_0x1e8afe(0x830)](this[_0x1e8afe(0x29c)]+'\x20('+this['instance'][_0x1e8afe(0x7a3)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.');}}catch(_0x4c3419){let _0x2168fa={'error':!0x0,'errorLog':_0x4c3419[_0x1e8afe(0x20e)]()};this[_0x1e8afe(0x7d2)](_0xdeef72,_0x2dde41,_0x2168fa),this[_0x1e8afe(0x5e7)][_0x1e8afe(0x830)](this[_0x1e8afe(0x29c)]+'\x20('+this[_0x1e8afe(0x584)][_0x1e8afe(0x7a3)]+_0x1e8afe(0x6eb)+(_0x4c3419 instanceof Error?_0x4c3419[_0x1e8afe(0x80a)]:JSON[_0x1e8afe(0x34b)](_0x4c3419,null,0x2)));}}async[a0_0xf2a334(0x8c9)](_0x48d8c3,_0x547dab){const _0x52e0c1=a0_0xf2a334;let _0x1317bb=_0x48d8c3[_0x52e0c1(0x61e)];_0x547dab[_0x52e0c1(0x309)][_0x52e0c1(0x61e)]&&_0x547dab[_0x52e0c1(0x309)][_0x52e0c1(0x61e)][_0x52e0c1(0x66c)]()!==''&&(_0x1317bb=_0x547dab[_0x52e0c1(0x309)][_0x52e0c1(0x61e)][_0x52e0c1(0x66c)]()),this[_0x52e0c1(0x5e7)]['verbose'](this[_0x52e0c1(0x29c)]+'\x20('+this[_0x52e0c1(0x584)][_0x52e0c1(0x7a3)]+_0x52e0c1(0x911));let _0x5d9c80={'number':_0x1317bb,'options':{'delay':_0x547dab[_0x52e0c1(0x309)]['delay'],'linkPreview':_0x547dab['uazapi']['linkPreview']},'mediaMessage':{'mediatype':_0x547dab[_0x52e0c1(0x309)][_0x52e0c1(0x426)],'caption':_0x547dab[_0x52e0c1(0x309)][_0x52e0c1(0x49d)],'media':_0x547dab[_0x52e0c1(0x309)]['media'],'fileName':_0x547dab[_0x52e0c1(0x309)][_0x52e0c1(0x667)]}};try{let _0x1903f3=await this[_0x52e0c1(0x88b)](_0x5d9c80);if(_0x1903f3){let _0x254454={'_id':_0x1903f3[_0x52e0c1(0x28c)]['id'],'_fromMe':_0x1903f3[_0x52e0c1(0x28c)][_0x52e0c1(0x329)],'_remoteJid':_0x1903f3['key'][_0x52e0c1(0x61e)]},_0x59af31=(0x0,w[_0x52e0c1(0x56f)])(_0x1903f3[_0x52e0c1(0x80a)]),_0x11288c=(0x0,w[_0x52e0c1(0x4f9)])(_0x59af31);_0x48d8c3[_0x52e0c1(0x1c9)]['lastBlockId']=_0x547dab['_id'][_0x52e0c1(0x20e)]();let {message_normalized:_0x466146}=this[_0x52e0c1(0x31d)](_0x59af31,_0x11288c,null);_0x48d8c3[_0x52e0c1(0x1c9)][_0x52e0c1(0x3d1)]=await _0x466146;let _0x3a24af={'messageId':_0x1903f3['key']['id']},_0x2e190a=_0x48d8c3[_0x52e0c1(0x1c9)][_0x52e0c1(0x5c4)];Object[_0x52e0c1(0x58a)](_0x2e190a,_0x254454),_0x48d8c3['chatLog'][_0x52e0c1(0x5c4)]=_0x2e190a,this[_0x52e0c1(0x7d2)](_0x48d8c3,_0x547dab,_0x3a24af);}else{let _0xe4b902={'error':!0x0};this[_0x52e0c1(0x7d2)](_0x48d8c3,_0x547dab,_0xe4b902),this['logger']['error'](this[_0x52e0c1(0x29c)]+'\x20('+this[_0x52e0c1(0x584)][_0x52e0c1(0x7a3)]+_0x52e0c1(0x678));}}catch(_0x1d4983){let _0x49db76={'error':!0x0,'errorLog':_0x1d4983[_0x52e0c1(0x20e)]()};this[_0x52e0c1(0x7d2)](_0x48d8c3,_0x547dab,_0x49db76),this[_0x52e0c1(0x5e7)]['error'](this[_0x52e0c1(0x29c)]+'\x20('+this[_0x52e0c1(0x584)][_0x52e0c1(0x7a3)]+_0x52e0c1(0x34f)+(_0x1d4983 instanceof Error?_0x1d4983['message']:JSON['stringify'](_0x1d4983,null,0x2)));}}async[a0_0xf2a334(0x45c)](_0x3cdf6d,_0x50a39e){const _0x43f509=a0_0xf2a334;let _0x27ba25=_0x3cdf6d[_0x43f509(0x61e)];_0x50a39e[_0x43f509(0x309)][_0x43f509(0x61e)]&&_0x50a39e[_0x43f509(0x309)][_0x43f509(0x61e)][_0x43f509(0x66c)]()!==''&&(_0x27ba25=_0x50a39e[_0x43f509(0x309)][_0x43f509(0x61e)][_0x43f509(0x66c)]()),this[_0x43f509(0x5e7)][_0x43f509(0x6a3)](this[_0x43f509(0x29c)]+'\x20('+this[_0x43f509(0x584)]['wuid']+'):\x20Enviando\x20localização');let _0x497795={'number':_0x27ba25,'options':{'delay':_0x50a39e[_0x43f509(0x309)][_0x43f509(0x4c5)]},'locationMessage':{'name':_0x50a39e[_0x43f509(0x309)][_0x43f509(0x76f)],'address':_0x50a39e['uazapi'][_0x43f509(0x76b)],'latitude':_0x50a39e['uazapi'][_0x43f509(0x8c6)],'longitude':_0x50a39e[_0x43f509(0x309)][_0x43f509(0x2cf)]}};try{let _0x41a029=await this['locationMessage'](_0x497795);if(_0x41a029){let _0x40af32={'_id':_0x41a029[_0x43f509(0x28c)]['id'],'_fromMe':_0x41a029[_0x43f509(0x28c)][_0x43f509(0x329)],'_remoteJid':_0x41a029[_0x43f509(0x28c)][_0x43f509(0x61e)]},_0x38edc1=(0x0,w[_0x43f509(0x56f)])(_0x41a029[_0x43f509(0x80a)]),_0x560d6e=(0x0,w[_0x43f509(0x4f9)])(_0x38edc1);_0x3cdf6d[_0x43f509(0x1c9)][_0x43f509(0x761)]=_0x50a39e[_0x43f509(0x29b)][_0x43f509(0x20e)]();let {message_normalized:_0x3fa26b}=this[_0x43f509(0x31d)](_0x38edc1,_0x560d6e,null);_0x3cdf6d['chatLog'][_0x43f509(0x3d1)]=await _0x3fa26b;let _0x2872a6={'messageId':_0x41a029[_0x43f509(0x28c)]['id']},_0x21ba0b=_0x3cdf6d[_0x43f509(0x1c9)]['realVariables'];Object[_0x43f509(0x58a)](_0x21ba0b,_0x40af32),_0x3cdf6d[_0x43f509(0x1c9)][_0x43f509(0x5c4)]=_0x21ba0b,this[_0x43f509(0x7d2)](_0x3cdf6d,_0x50a39e,_0x2872a6);}else{let _0x280777={'error':!0x0};this[_0x43f509(0x7d2)](_0x3cdf6d,_0x50a39e,_0x280777),this['logger'][_0x43f509(0x830)](this[_0x43f509(0x29c)]+'\x20('+this[_0x43f509(0x584)][_0x43f509(0x7a3)]+_0x43f509(0x236));}}catch(_0x5aede3){let _0x5f19cd={'error':!0x0,'errorLog':_0x5aede3['toString']()};this[_0x43f509(0x7d2)](_0x3cdf6d,_0x50a39e,_0x5f19cd),this['logger'][_0x43f509(0x830)](this['instanceName']+'\x20('+this[_0x43f509(0x584)][_0x43f509(0x7a3)]+_0x43f509(0x7c7)+(_0x5aede3 instanceof Error?_0x5aede3[_0x43f509(0x80a)]:JSON[_0x43f509(0x34b)](_0x5aede3,null,0x2)));}}async[a0_0xf2a334(0x7dc)](_0x227233,_0x45d2a1){const _0x1967fa=a0_0xf2a334;let _0x177bcc=_0x227233[_0x1967fa(0x61e)];_0x45d2a1[_0x1967fa(0x309)]['remoteJid']&&_0x45d2a1['uazapi'][_0x1967fa(0x61e)]['trim']()!==''&&(_0x177bcc=_0x45d2a1['uazapi'][_0x1967fa(0x61e)]['trim']()),this[_0x1967fa(0x5e7)][_0x1967fa(0x6a3)](this['instanceName']+'\x20('+this[_0x1967fa(0x584)][_0x1967fa(0x7a3)]+_0x1967fa(0x895));let _0x1d60a3={'number':_0x177bcc,'options':{'delay':_0x45d2a1[_0x1967fa(0x309)][_0x1967fa(0x4c5)]},'audioMessage':{'audio':_0x45d2a1[_0x1967fa(0x309)][_0x1967fa(0x308)]}};try{let _0x133fe1=await this[_0x1967fa(0x4c1)](_0x1d60a3);if(_0x133fe1){let _0x3ce3cf={'_id':_0x133fe1['key']['id'],'_fromMe':_0x133fe1[_0x1967fa(0x28c)][_0x1967fa(0x329)],'_remoteJid':_0x133fe1[_0x1967fa(0x28c)][_0x1967fa(0x61e)]},_0x2d2315=(0x0,w[_0x1967fa(0x56f)])(_0x133fe1[_0x1967fa(0x80a)]),_0x955c15=(0x0,w[_0x1967fa(0x4f9)])(_0x2d2315);_0x227233[_0x1967fa(0x1c9)][_0x1967fa(0x761)]=_0x45d2a1['_id'][_0x1967fa(0x20e)]();let {message_normalized:_0x38fc0}=this['normalizeMessage'](_0x2d2315,_0x955c15,null);_0x227233['chatLog'][_0x1967fa(0x3d1)]=await _0x38fc0;let _0x2e0915={'messageId':_0x133fe1[_0x1967fa(0x28c)]['id']},_0x5a1ca7=_0x227233['chatLog'][_0x1967fa(0x5c4)];Object['assign'](_0x5a1ca7,_0x3ce3cf),_0x227233[_0x1967fa(0x1c9)][_0x1967fa(0x5c4)]=_0x5a1ca7,this[_0x1967fa(0x7d2)](_0x227233,_0x45d2a1,_0x2e0915);}else{let _0x14f8f1={'error':!0x0};this['updateConversation'](_0x227233,_0x45d2a1,_0x14f8f1),this['logger'][_0x1967fa(0x830)](this['instanceName']+'\x20('+this[_0x1967fa(0x584)][_0x1967fa(0x7a3)]+_0x1967fa(0x53d));}}catch(_0x4cf36c){let _0x43169b={'error':!0x0,'errorLog':_0x4cf36c[_0x1967fa(0x20e)]()};this[_0x1967fa(0x7d2)](_0x227233,_0x45d2a1,_0x43169b),this['logger'][_0x1967fa(0x830)](this[_0x1967fa(0x29c)]+'\x20('+this[_0x1967fa(0x584)][_0x1967fa(0x7a3)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20'+(_0x4cf36c instanceof Error?_0x4cf36c[_0x1967fa(0x80a)]:JSON['stringify'](_0x4cf36c,null,0x2)));}}async[a0_0xf2a334(0x18d)](_0x3431c4,_0x2276d2){const _0x51be36=a0_0xf2a334;let _0x5af777=_0x3431c4[_0x51be36(0x61e)];_0x2276d2[_0x51be36(0x309)][_0x51be36(0x61e)]&&_0x2276d2[_0x51be36(0x309)][_0x51be36(0x61e)]['trim']()!==''&&(_0x5af777=_0x2276d2[_0x51be36(0x309)]['remoteJid']['trim']()),this[_0x51be36(0x5e7)][_0x51be36(0x6a3)](this[_0x51be36(0x29c)]+'\x20('+this['instance'][_0x51be36(0x7a3)]+_0x51be36(0x33e));let _0xb9ae49={'number':_0x5af777,'options':{'delay':_0x2276d2[_0x51be36(0x309)][_0x51be36(0x4c5)]},'contactMessage':[{'fullName':_0x2276d2[_0x51be36(0x309)][_0x51be36(0x1c7)],'phoneNumber':_0x2276d2['uazapi'][_0x51be36(0x50c)]}]};try{let _0x227a12=await this[_0x51be36(0x607)](_0xb9ae49);if(_0x227a12){let _0x4a3c45={'_id':_0x227a12[_0x51be36(0x28c)]['id'],'_fromMe':_0x227a12[_0x51be36(0x28c)][_0x51be36(0x329)],'_remoteJid':_0x227a12['key'][_0x51be36(0x61e)]},_0x21b358=(0x0,w[_0x51be36(0x56f)])(_0x227a12[_0x51be36(0x80a)]),_0x2469b2=(0x0,w[_0x51be36(0x4f9)])(_0x21b358);_0x3431c4[_0x51be36(0x1c9)]['lastBlockId']=_0x2276d2[_0x51be36(0x29b)][_0x51be36(0x20e)]();let {message_normalized:_0x43d998}=this[_0x51be36(0x31d)](_0x21b358,_0x2469b2,null);_0x3431c4[_0x51be36(0x1c9)][_0x51be36(0x3d1)]=await _0x43d998;let _0x48ee3a={'messageId':_0x227a12[_0x51be36(0x28c)]['id']},_0x239ac4=_0x3431c4[_0x51be36(0x1c9)][_0x51be36(0x5c4)];Object[_0x51be36(0x58a)](_0x239ac4,_0x4a3c45),_0x3431c4[_0x51be36(0x1c9)][_0x51be36(0x5c4)]=_0x239ac4,this['updateConversation'](_0x3431c4,_0x2276d2,_0x48ee3a);}else{let _0x529413={'error':!0x0};this['updateConversation'](_0x3431c4,_0x2276d2,_0x529413),this[_0x51be36(0x5e7)]['error'](this[_0x51be36(0x29c)]+'\x20('+this[_0x51be36(0x584)][_0x51be36(0x7a3)]+_0x51be36(0x7fd));}}catch(_0x47c2a0){let _0x2115ea={'error':!0x0,'errorLog':_0x47c2a0[_0x51be36(0x20e)]()};this[_0x51be36(0x7d2)](_0x3431c4,_0x2276d2,_0x2115ea),this[_0x51be36(0x5e7)][_0x51be36(0x830)](this[_0x51be36(0x29c)]+'\x20('+this[_0x51be36(0x584)][_0x51be36(0x7a3)]+_0x51be36(0x870)+(_0x47c2a0 instanceof Error?_0x47c2a0[_0x51be36(0x80a)]:JSON[_0x51be36(0x34b)](_0x47c2a0,null,0x2)));}}[a0_0xf2a334(0x4bc)](_0x585e11,_0x369e63){const _0x25a43f=a0_0xf2a334;for(let _0x1b0058 of _0x585e11)_0x1b0058[_0x25a43f(0x554)]&&(_0x1b0058[_0x25a43f(0x554)]=this[_0x25a43f(0x47e)](_0x1b0058[_0x25a43f(0x554)],_0x369e63)),_0x1b0058['optionDescription']&&(_0x1b0058['optionDescription']=this[_0x25a43f(0x47e)](_0x1b0058[_0x25a43f(0x334)],_0x369e63));}async['uazapiSendMenu'](_0x5527b1,_0x27386d){const _0x374035=a0_0xf2a334;let _0x3090ae=_0x5527b1['remoteJid'];_0x27386d[_0x374035(0x309)][_0x374035(0x61e)]&&_0x27386d[_0x374035(0x309)]['remoteJid']['trim']()!==''&&(_0x3090ae=_0x27386d[_0x374035(0x309)][_0x374035(0x61e)][_0x374035(0x66c)]()),this[_0x374035(0x5e7)][_0x374035(0x6a3)](this[_0x374035(0x29c)]+'\x20('+this['instance'][_0x374035(0x7a3)]+'):\x20Enviando\x20enquete');let _0x1b0717=_0x5527b1['replyOptions'][_0x374035(0x3c9)](_0x2d675b=>_0x2d675b['blockId']===_0x27386d[_0x374035(0x29b)])[_0x374035(0x53f)]((_0x520c8b,_0x703612)=>_0x520c8b['order']-_0x703612[_0x374035(0x48f)]);this[_0x374035(0x4bc)](_0x1b0717,_0x5527b1[_0x374035(0x1c9)][_0x374035(0x5c4)]);let _0x57fcbf=_0x1b0717[_0x374035(0x5b0)](_0x1cb807=>_0x1cb807[_0x374035(0x554)]),_0x4590a7={'number':_0x3090ae,'menuMessage':{'type':_0x27386d['uazapi'][_0x374035(0x545)]||_0x374035(0x5dd),'text':_0x27386d['uazapi']['text']||_0x27386d[_0x374035(0x309)][_0x374035(0x76f)],'footerText':_0x27386d['uazapi'][_0x374035(0x508)],'buttonText':_0x27386d[_0x374035(0x309)][_0x374035(0x1ad)],'selectableCount':0x1,'choices':_0x57fcbf},'options':{'delay':_0x27386d[_0x374035(0x309)][_0x374035(0x4c5)]}};try{let _0x258718=await this[_0x374035(0x670)](_0x4590a7);if(_0x258718){let _0x13ffc6={'_id':_0x258718[_0x374035(0x28c)]['id'],'_fromMe':_0x258718[_0x374035(0x28c)][_0x374035(0x329)],'_remoteJid':_0x258718[_0x374035(0x28c)]['remoteJid']};_0x27386d[_0x374035(0x309)]['menuIgnoreNonVotes']===!0x0&&(_0x5527b1[_0x374035(0x7cb)]=_0x374035(0x6f3),this[_0x374035(0x5e7)][_0x374035(0x6a3)](this['instanceName']+'\x20('+this[_0x374035(0x584)][_0x374035(0x7a3)]+'):\x20conversation.status:\x20'+_0x5527b1[_0x374035(0x7cb)])),this[_0x374035(0x5e7)][_0x374035(0x6a3)](this[_0x374035(0x29c)]+'\x20('+this['instance']['wuid']+_0x374035(0x1d8)+(_0x27386d[_0x374035(0x309)]['name']||_0x27386d[_0x374035(0x309)][_0x374035(0x439)])),_0x5527b1[_0x374035(0x3eb)]=_0x258718[_0x374035(0x28c)]['id'],_0x5527b1['waitingMenu_text']=_0x27386d[_0x374035(0x309)][_0x374035(0x76f)]||_0x27386d[_0x374035(0x309)][_0x374035(0x439)],_0x5527b1['waitingMenu_replyOptions']=_0x1b0717,_0x27386d[_0x374035(0x309)][_0x374035(0x313)]&&(_0x5527b1[_0x374035(0x4fd)]=_0x27386d[_0x374035(0x309)][_0x374035(0x313)]),this[_0x374035(0x5e7)][_0x374035(0x6a3)](this[_0x374035(0x29c)]+'\x20('+this['instance']['wuid']+_0x374035(0x397)+_0x5527b1[_0x374035(0x7cd)]);let _0x51b976=(0x0,w[_0x374035(0x56f)])(_0x258718[_0x374035(0x80a)]),_0x22fc78=(0x0,w[_0x374035(0x4f9)])(_0x51b976);_0x5527b1[_0x374035(0x1c9)][_0x374035(0x761)]=_0x27386d[_0x374035(0x29b)][_0x374035(0x20e)]();let {message_normalized:_0x32757d}=this[_0x374035(0x31d)](_0x51b976,_0x22fc78,null);_0x5527b1['chatLog'][_0x374035(0x3d1)]=await _0x32757d;let _0x129a12={'messageId':_0x258718[_0x374035(0x28c)]['id']},_0x5f328b=_0x5527b1[_0x374035(0x1c9)][_0x374035(0x5c4)];Object['assign'](_0x5f328b,_0x13ffc6),_0x5527b1[_0x374035(0x1c9)][_0x374035(0x5c4)]=_0x5f328b,this[_0x374035(0x7d2)](_0x5527b1,_0x27386d,_0x129a12);}else{let _0x25173d={'error':!0x0};this['updateConversation'](_0x5527b1,_0x27386d,_0x25173d),this['logger']['error'](this[_0x374035(0x29c)]+'\x20('+this[_0x374035(0x584)][_0x374035(0x7a3)]+_0x374035(0x59f));}}catch(_0x1f4208){let _0x2d2522={'error':!0x0,'errorLog':_0x1f4208 instanceof Error?_0x1f4208[_0x374035(0x80a)]:JSON[_0x374035(0x34b)](_0x1f4208,null,0x2)};this['updateConversation'](_0x5527b1,_0x27386d,_0x2d2522),this[_0x374035(0x5e7)][_0x374035(0x830)](this[_0x374035(0x29c)]+'\x20('+this['instance']['wuid']+_0x374035(0x459)+(_0x1f4208 instanceof Error?_0x1f4208[_0x374035(0x80a)]:JSON[_0x374035(0x34b)](_0x1f4208,null,0x2)));}}async[a0_0xf2a334(0x48c)](_0x2d1474,_0x414317){const _0x38be04=a0_0xf2a334;this[_0x38be04(0x5e7)][_0x38be04(0x6a3)](this['instanceName']+'\x20('+this[_0x38be04(0x584)]['wuid']+_0x38be04(0x4be));let _0x516662=_0x2d1474[_0x38be04(0x1c9)]['blockLogs']['find'](_0x19c27=>_0x19c27[_0x38be04(0x1aa)][_0x38be04(0x20e)]()===_0x414317[_0x38be04(0x309)][_0x38be04(0x1aa)][_0x38be04(0x20e)]()),_0x2e27e4={'id':_0x516662[_0x38be04(0x487)],'remoteJid':_0x516662['remoteJid'],'fromMe':_0x516662[_0x38be04(0x329)]};try{let _0xc897e5=await this[_0x38be04(0x503)](_0x2e27e4);if(_0xc897e5){let _0x1c068e=(0x0,w['normalizeMessageContent'])(_0xc897e5[_0x38be04(0x80a)]),_0x66a6fe=(0x0,w[_0x38be04(0x4f9)])(_0x1c068e);_0x2d1474[_0x38be04(0x1c9)][_0x38be04(0x761)]=_0x414317['_id'][_0x38be04(0x20e)]();let {message_normalized:_0x2b3893}=this[_0x38be04(0x31d)](_0x1c068e,_0x66a6fe,null);_0x2d1474[_0x38be04(0x1c9)]['lastSendMessage']=await _0x2b3893;let _0x2f73c0={};this[_0x38be04(0x7d2)](_0x2d1474,_0x414317,_0x2f73c0);}else{let _0x4444e8={'error':!0x0};this[_0x38be04(0x7d2)](_0x2d1474,_0x414317,_0x4444e8),this['logger']['error'](this[_0x38be04(0x29c)]+'\x20('+this[_0x38be04(0x584)][_0x38be04(0x7a3)]+'):\x20Falha\x20ao\x20deletar\x20mensagem.');}}catch(_0x4a7556){let _0x17243e={'error':!0x0,'errorLog':_0x4a7556 instanceof Error?_0x4a7556['message']:JSON['stringify'](_0x4a7556,null,0x2)};this[_0x38be04(0x7d2)](_0x2d1474,_0x414317,_0x17243e),this[_0x38be04(0x5e7)]['error'](this[_0x38be04(0x29c)]+'\x20('+this[_0x38be04(0x584)][_0x38be04(0x7a3)]+_0x38be04(0x1ce)+(_0x4a7556 instanceof Error?_0x4a7556['message']:JSON[_0x38be04(0x34b)](_0x4a7556,null,0x2)));}}async[a0_0xf2a334(0x846)](_0x3b580c,_0x202744){const _0x12d830=a0_0xf2a334;if(_0x3b580c[_0x12d830(0x76f)]||(_0x3b580c['name']=(0x0,Q['v4'])()),_0x202744!==Ri&&_0x3b580c?.[_0x12d830(0x317)])throw new m(_0x12d830(0x4d2));if(_0x12d830(0x29b)in _0x3b580c&&'owner'in _0x3b580c)return this[_0x12d830(0x8a1)](_0x3b580c[_0x12d830(0x84f)],_0x3b580c['_id']);this[_0x12d830(0x5e7)]['verbose'](this[_0x12d830(0x29c)]+'\x20('+this[_0x12d830(0x584)]['wuid']+_0x12d830(0x30d));let _0x2e1f15=this[_0x12d830(0x569)](_0x3b580c[_0x12d830(0x76f)]),_0x4c7242=new pe[(_0x12d830(0x17a))][(_0x12d830(0x880))](),_0x10aa60={'_id':_0x4c7242,'default':!0x0,'title':'Início','x':0x0,'y':0x0},_0x384e20={'_id':new pe[(_0x12d830(0x17a))]['ObjectId'](),'order':0x1,'groupId':_0x4c7242[_0x12d830(0x20e)](),'type':_0x12d830(0x896)},_0x4ee7b3=this[_0x12d830(0x584)][_0x12d830(0x7a3)],_0x20643c={'_id':(0x0,Q['v4'])(),'owner':_0x4ee7b3,'name':_0x2e1f15,'whoCanEdit':[_0x4ee7b3],'whoCanUse':[_0x4ee7b3],'groups':[_0x10aa60],'blocks':[_0x384e20],..._0x3b580c};try{let _0x478bae=await this[_0x12d830(0x677)][_0x12d830(0x1e8)][_0x12d830(0x281)](_0x20643c);return await this[_0x12d830(0x6ff)](),_0x478bae;}catch(_0x3b4039){let _0x5cc18d=_0x12d830(0x19f),_0x4a04c8=_0x3b4039 instanceof Error?_0x3b4039[_0x12d830(0x80a)]:typeof _0x3b4039==_0x12d830(0x524)?JSON['stringify'](_0x3b4039):_0x3b4039,_0xc324e3=_0x5cc18d+':\x20'+_0x4a04c8;throw this['logger'][_0x12d830(0x830)](this['instanceName']+'\x20('+this[_0x12d830(0x584)][_0x12d830(0x7a3)]+'):\x20'+_0xc324e3),new m(_0xc324e3);}}async[a0_0xf2a334(0x8a1)](_0x22b9f5,_0x37c1c3){const _0x211da3=a0_0xf2a334;try{this[_0x211da3(0x5e7)][_0x211da3(0x6a3)](this[_0x211da3(0x29c)]+'\x20('+this[_0x211da3(0x584)][_0x211da3(0x7a3)]+'):\x20Criando\x20fluxo\x20compartilhado...');let _0x393c29=await this['repository'][_0x211da3(0x1e8)][_0x211da3(0x18a)]({'where':{'_id':_0x37c1c3,'owner':_0x22b9f5}});if(!_0x393c29)throw new m(_0x211da3(0x351));if(_0x393c29['shareFlow']===!0x1&&!_0x393c29[_0x211da3(0x317)])throw new m(_0x211da3(0x4fb));let _0x3fd5dd=new Set(_0x393c29[_0x211da3(0x8a8)]??[]);_0x3fd5dd['add'](this[_0x211da3(0x584)][_0x211da3(0x7a3)]);let _0x13edea=await this[_0x211da3(0x677)][_0x211da3(0x1e8)][_0x211da3(0x32f)](_0x37c1c3,{..._0x393c29,'whoCanUse':Array[_0x211da3(0x1a3)](_0x3fd5dd)});return await this[_0x211da3(0x6ff)](),_0x13edea;}catch(_0x213c09){let _0x59ee20=_0x211da3(0x455),_0xbab7af=_0x213c09 instanceof Error?_0x213c09[_0x211da3(0x80a)]:typeof _0x213c09=='object'?JSON[_0x211da3(0x34b)](_0x213c09):_0x213c09,_0x1e8571=_0x59ee20+':\x20'+_0xbab7af;throw this['logger'][_0x211da3(0x830)](this[_0x211da3(0x29c)]+'\x20('+this[_0x211da3(0x584)][_0x211da3(0x7a3)]+_0x211da3(0x62f)+_0x1e8571),new m(_0x1e8571);}}['getUniqueFlowName'](_0x49b27e){const _0x1b5701=a0_0xf2a334;let _0x407af1=_0x49b27e,_0x427508=0x1;for(;this[_0x1b5701(0x580)]['flows'][_0x1b5701(0x4a9)](_0x53ceab=>_0x53ceab['name']===_0x407af1);)_0x427508++,_0x407af1=_0x49b27e+'\x20('+_0x427508+')';return _0x407af1;}async[a0_0xf2a334(0x777)](_0x25ac86){const _0x32eeda=a0_0xf2a334;try{if(this['logger'][_0x32eeda(0x6a3)](this[_0x32eeda(0x29c)]+'\x20('+this[_0x32eeda(0x584)][_0x32eeda(0x7a3)]+'):\x20\x27Deletando\x20fluxo,\x20id:\x20'+_0x25ac86[_0x32eeda(0x29b)]+',\x20global:\x20'+_0x25ac86[_0x32eeda(0x671)]),!this[_0x32eeda(0x580)][_0x32eeda(0x633)]['find'](_0x239f46=>_0x239f46[_0x32eeda(0x29b)]===_0x25ac86[_0x32eeda(0x29b)]))throw this[_0x32eeda(0x5e7)][_0x32eeda(0x6a3)](this[_0x32eeda(0x29c)]+'\x20('+this[_0x32eeda(0x584)][_0x32eeda(0x7a3)]+_0x32eeda(0x7fa)+_0x25ac86['_id']+_0x32eeda(0x7ed)),new m(_0x32eeda(0x240));let _0xcd6a0e=await this[_0x32eeda(0x677)][_0x32eeda(0x1e8)][_0x32eeda(0x18a)]({'where':{'_id':_0x25ac86[_0x32eeda(0x29b)]}});if(!_0xcd6a0e)throw new m(_0x32eeda(0x511));if(this[_0x32eeda(0x584)]['wuid']===_0xcd6a0e['owner']){this['logger'][_0x32eeda(0x6a3)](this[_0x32eeda(0x29c)]+'\x20('+this[_0x32eeda(0x584)][_0x32eeda(0x7a3)]+_0x32eeda(0x2c8)+_0x25ac86[_0x32eeda(0x29b)]+'\x27\x20do\x20banco\x20de\x20dados...');let _0x336103=await this[_0x32eeda(0x677)][_0x32eeda(0x1e8)]['deleteOne']({'where':{'_id':_0x25ac86['_id']}});return await this[_0x32eeda(0x6ff)](),_0x336103;}return this[_0x32eeda(0x5e7)][_0x32eeda(0x6a3)](this[_0x32eeda(0x29c)]+'\x20('+this[_0x32eeda(0x584)]['wuid']+_0x32eeda(0x899)+this[_0x32eeda(0x584)][_0x32eeda(0x7a3)]+_0x32eeda(0x507)+_0x25ac86[_0x32eeda(0x29b)]+'\x27...'),_0xcd6a0e['whoCanUse']=(_0xcd6a0e[_0x32eeda(0x8a8)]??[])[_0x32eeda(0x3c9)](_0x2865c6=>_0x2865c6!==this[_0x32eeda(0x584)][_0x32eeda(0x7a3)]),_0xcd6a0e[_0x32eeda(0x88a)]=(_0xcd6a0e[_0x32eeda(0x88a)]??[])[_0x32eeda(0x3c9)](_0x3efce5=>_0x3efce5!==this[_0x32eeda(0x584)][_0x32eeda(0x7a3)]),_0xcd6a0e[_0x32eeda(0x88a)][_0x32eeda(0x250)]===0x0&&_0xcd6a0e[_0x32eeda(0x8a8)][_0x32eeda(0x250)]>0x0&&(_0xcd6a0e[_0x32eeda(0x88a)][_0x32eeda(0x355)](_0xcd6a0e['whoCanUse'][0x0]),this[_0x32eeda(0x5e7)]['verbose'](this[_0x32eeda(0x29c)]+'\x20('+this['instance'][_0x32eeda(0x7a3)]+_0x32eeda(0x4cc)+_0xcd6a0e[_0x32eeda(0x8a8)][0x0]+_0x32eeda(0x1c6)+_0x25ac86['_id']+_0x32eeda(0x4cd))),await this[_0x32eeda(0x677)][_0x32eeda(0x1e8)][_0x32eeda(0x32f)](_0xcd6a0e[_0x32eeda(0x29b)],_0xcd6a0e),await this[_0x32eeda(0x6ff)](),{'message':_0x32eeda(0x310)+_0x25ac86[_0x32eeda(0x76f)]+_0x32eeda(0x28a)};}catch(_0x37d87f){return this[_0x32eeda(0x5e7)]['error'](this[_0x32eeda(0x29c)]+'\x20('+this[_0x32eeda(0x584)][_0x32eeda(0x7a3)]+'):\x20Erro\x20ao\x20deletar\x20fluxo\x20'+(_0x37d87f instanceof Error?_0x37d87f[_0x32eeda(0x80a)]:JSON[_0x32eeda(0x34b)](_0x37d87f,null,0x2))),{'message':'Erro\x20ao\x20deletar\x20o\x20fluxo:\x20'+(_0x37d87f instanceof Error?_0x37d87f[_0x32eeda(0x80a)]:JSON[_0x32eeda(0x34b)](_0x37d87f,null,0x2))};}}async[a0_0xf2a334(0x43f)](_0x133123){const _0x19054c=a0_0xf2a334;try{if(this[_0x19054c(0x5e7)][_0x19054c(0x5b4)](this[_0x19054c(0x29c)]+'\x20('+this[_0x19054c(0x584)]['wuid']+_0x19054c(0x1a6)+_0x133123),!this['AutomateSystem']&&(await this['getAutomateSystem'](),!this[_0x19054c(0x580)]))return null;let _0x5af675=await this[_0x19054c(0x677)][_0x19054c(0x1e8)][_0x19054c(0x18a)]({'where':{'_id':_0x133123}});if(!_0x5af675)throw new m(_0x19054c(0x5e5)+_0x133123+_0x19054c(0x6b9));if(!(_0x5af675[_0x19054c(0x317)]||_0x5af675[_0x19054c(0x8a8)]?.[_0x19054c(0x343)](this['instance'][_0x19054c(0x7a3)])))throw new m(_0x19054c(0x7df)+name+'\x27');_0x5af675[_0x19054c(0x317)]&&!_0x5af675[_0x19054c(0x8a8)]?.[_0x19054c(0x343)](this[_0x19054c(0x584)][_0x19054c(0x7a3)])&&(_0x5af675[_0x19054c(0x8a8)]=[..._0x5af675[_0x19054c(0x8a8)]??[],this[_0x19054c(0x584)][_0x19054c(0x7a3)]],await this[_0x19054c(0x677)]['flow'][_0x19054c(0x32f)](_0x5af675[_0x19054c(0x29b)],_0x5af675),this[_0x19054c(0x6ff)]());let _0x3fe168=this['AutomateSystem']?.[_0x19054c(0x910)][_0x19054c(0x5b0)](_0x27a091=>_0x27a091[_0x19054c(0x76f)]),_0x1cb204=[_0x19054c(0x81b),'nomecompleto',_0x19054c(0x3b0),_0x19054c(0x685),_0x19054c(0x7cb),_0x19054c(0x286),_0x19054c(0x594),'tags',_0x19054c(0x301),_0x19054c(0x311),_0x19054c(0x6b8)];_0x5af675['variables']=_0x5af675['variables'][_0x19054c(0x3c9)](_0x44e5c8=>!(_0x44e5c8[_0x19054c(0x650)]===_0x19054c(0x1df)||_0x44e5c8[_0x19054c(0x1df)])),_0x1cb204[_0x19054c(0x3b5)](_0x10e998=>{const _0x36189b=_0x19054c;_0x5af675['variables'][_0x36189b(0x355)]({'folder':'leadInfo','name':_0x10e998,'value':'','doc':'','leadInfo':!0x0});}),_0x3fe168[_0x19054c(0x3b5)](_0x25450c=>{const _0x31595a=_0x19054c;let _0x446dd7=_0x5af675[_0x31595a(0x613)][_0x31595a(0x8c1)](_0x59253f=>_0x59253f['name']===_0x25450c);_0x446dd7===-0x1?_0x5af675[_0x31595a(0x613)][_0x31595a(0x355)]({'folder':'leadInfo','name':_0x25450c,'value':'','doc':'','leadInfo':!0x0}):(_0x5af675[_0x31595a(0x613)][_0x446dd7][_0x31595a(0x650)]='leadInfo',_0x5af675['variables'][_0x446dd7]['leadInfo']=!0x0);}),_0x5af675[_0x19054c(0x34e)]&&_0x5af675['blocks']['length']>0x0&&_0x5af675[_0x19054c(0x34e)][_0x19054c(0x3b5)](_0x59e384=>{const _0x5f44bf=_0x19054c;_0x59e384['groupId']&&_0x59e384[_0x5f44bf(0x36b)]&&_0x59e384[_0x5f44bf(0x540)]===_0x59e384['next_groupId']&&(_0x59e384['next_groupId']=null);});let _0x550f74=await this[_0x19054c(0x677)][_0x19054c(0x1e8)]['updateOne'](_0x5af675[_0x19054c(0x29b)],_0x5af675);if(!_0x550f74)throw new Error(_0x19054c(0x8b4));return _0x550f74;}catch(_0x5f48a1){let _0x64aee0=_0x19054c(0x194),_0x1745e1=_0x5f48a1 instanceof Error?_0x5f48a1['message']:typeof _0x5f48a1==_0x19054c(0x524)?JSON[_0x19054c(0x34b)](_0x5f48a1):_0x5f48a1,_0x4232e2=_0x64aee0+':\x20'+_0x1745e1;throw this[_0x19054c(0x5e7)][_0x19054c(0x830)](this['instanceName']+'\x20('+this['instance'][_0x19054c(0x7a3)]+_0x19054c(0x62f)+_0x4232e2),new m(_0x4232e2);}}async[a0_0xf2a334(0x473)](){const _0x52eb5e=a0_0xf2a334;try{this[_0x52eb5e(0x5e7)][_0x52eb5e(0x6a3)](this[_0x52eb5e(0x29c)]+'\x20('+this[_0x52eb5e(0x584)][_0x52eb5e(0x7a3)]+'):\x20Buscando\x20todos\x20os\x20fluxos...'),await this['synchronizeAndMapFlows']();let _0x3bc6dc=await this[_0x52eb5e(0x677)][_0x52eb5e(0x1e8)][_0x52eb5e(0x857)]({'where':{'globalShow':!0x0}});return[...this[_0x52eb5e(0x580)][_0x52eb5e(0x633)],..._0x3bc6dc];}catch(_0x39eaa8){return this[_0x52eb5e(0x5e7)][_0x52eb5e(0x830)](this[_0x52eb5e(0x29c)]+'\x20('+this[_0x52eb5e(0x584)][_0x52eb5e(0x7a3)]+_0x52eb5e(0x6dc)+(_0x39eaa8 instanceof Error?_0x39eaa8[_0x52eb5e(0x80a)]:JSON[_0x52eb5e(0x34b)](_0x39eaa8,null,0x2))),{'message':'Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20'+(_0x39eaa8 instanceof Error?_0x39eaa8['message']:String(_0x39eaa8))};}}async[a0_0xf2a334(0x8d6)](_0x51b1e0,_0x51ad66){const _0x33e695=a0_0xf2a334;try{this['logger'][_0x33e695(0x6a3)](this[_0x33e695(0x29c)]+'\x20('+this[_0x33e695(0x584)]['wuid']+_0x33e695(0x2bd));let _0x54908b=this[_0x33e695(0x580)][_0x33e695(0x633)]['find'](_0x4ffd5f=>_0x4ffd5f[_0x33e695(0x29b)]===_0x51b1e0['_id']);if(!_0x54908b)throw this[_0x33e695(0x5e7)][_0x33e695(0x6a3)](this[_0x33e695(0x29c)]+'\x20('+this['instance']['wuid']+_0x33e695(0x7fa)+_0x51b1e0[_0x33e695(0x29b)]+'\x27\x20não\x20encontrado'),new m(_0x33e695(0x240));let _0x3a5f12=await this['repository'][_0x33e695(0x1e8)][_0x33e695(0x18a)]({'where':{'_id':_0x51b1e0[_0x33e695(0x29b)]}});if(!_0x3a5f12||!_0x3a5f12['whoCanUse']?.[_0x33e695(0x343)](this[_0x33e695(0x584)][_0x33e695(0x7a3)]))throw this[_0x33e695(0x5e7)][_0x33e695(0x830)](this['instanceName']+'\x20('+this[_0x33e695(0x584)][_0x33e695(0x7a3)]+_0x33e695(0x65a)+_0x51b1e0[_0x33e695(0x29b)]+_0x33e695(0x4b1)),new m('Flow\x20\x27'+_0x51b1e0[_0x33e695(0x29b)]+_0x33e695(0x4b1));let _0x353591=this['AutomateSystem'][_0x33e695(0x633)][_0x33e695(0x8c1)](_0x29d36=>_0x29d36[_0x33e695(0x29b)]===_0x54908b[_0x33e695(0x29b)]);if(_0x353591!==-0x1){let _0x1ad8ce=this['AutomateSystem'][_0x33e695(0x633)][_0x353591];if(_0x1ad8ce[_0x33e695(0x76f)]=_0x51b1e0[_0x33e695(0x76f)]??_0x1ad8ce['name'],_0x1ad8ce[_0x33e695(0x59e)]=_0x51b1e0['default']??_0x1ad8ce[_0x33e695(0x59e)],_0x1ad8ce[_0x33e695(0x8ce)]=_0x51b1e0['testingWith']??_0x1ad8ce[_0x33e695(0x8ce)],_0x1ad8ce[_0x33e695(0x872)]=_0x51b1e0[_0x33e695(0x8f5)]??_0x1ad8ce[_0x33e695(0x872)],_0x1ad8ce[_0x33e695(0x20c)]=_0x51b1e0[_0x33e695(0x20c)]??_0x1ad8ce[_0x33e695(0x20c)],_0x1ad8ce[_0x33e695(0x871)]=_0x51b1e0[_0x33e695(0x871)]??_0x1ad8ce['readMessages'],_0x51b1e0[_0x33e695(0x59e)]&&this[_0x33e695(0x580)][_0x33e695(0x633)]['forEach']((_0x3c430e,_0x414313)=>{const _0x5cb749=_0x33e695;_0x414313!==_0x353591&&(_0x3c430e[_0x5cb749(0x59e)]=!0x1);}),this['AutomateSystem']['flows'][_0x353591]=_0x1ad8ce,!await this[_0x33e695(0x677)][_0x33e695(0x587)]['update']({'flows':this[_0x33e695(0x580)][_0x33e695(0x633)]},this[_0x33e695(0x584)][_0x33e695(0x7a3)]))throw new m('Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.');}let _0x8ddebd=[_0x33e695(0x671),'startID',_0x33e695(0x583),_0x33e695(0x745)];for(let _0x538c89 of _0x8ddebd)delete _0x51b1e0[_0x538c89];if(_0x3a5f12['whoCanEdit']?.[_0x33e695(0x343)](this[_0x33e695(0x584)][_0x33e695(0x7a3)])||(_0x51b1e0={'_id':_0x51b1e0[_0x33e695(0x29b)]}),_0x51ad66!==Ri&&_0x51b1e0?.[_0x33e695(0x317)]&&!_0x3a5f12?.[_0x33e695(0x317)])throw new m(_0x33e695(0x7c2));let _0x501d55=new Set(_0x51b1e0[_0x33e695(0x88a)]??_0x3a5f12[_0x33e695(0x88a)]);_0x501d55[_0x33e695(0x1c0)](_0x3a5f12[_0x33e695(0x84f)]);let _0xeef04f=new Set(_0x51b1e0[_0x33e695(0x8a8)]??_0x3a5f12[_0x33e695(0x8a8)]??[]);_0x501d55[_0x33e695(0x3b5)](_0x1c741c=>_0xeef04f[_0x33e695(0x1c0)](_0x1c741c)),_0xeef04f[_0x33e695(0x1c0)](_0x3a5f12[_0x33e695(0x84f)]),this[_0x33e695(0x5e7)][_0x33e695(0x6a3)](this[_0x33e695(0x29c)]+'\x20('+this[_0x33e695(0x584)][_0x33e695(0x7a3)]+_0x33e695(0x5fc)+Array[_0x33e695(0x1a3)](_0x501d55)),this[_0x33e695(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0x33e695(0x584)][_0x33e695(0x7a3)]+_0x33e695(0x712)+Array[_0x33e695(0x1a3)](_0xeef04f));let _0x509e61=await this[_0x33e695(0x245)](Array['from'](_0xeef04f)),_0x2cb6ad=Array[_0x33e695(0x1a3)](_0x501d55)[_0x33e695(0x3c9)](_0xd3278d=>_0x509e61['includes'](_0xd3278d)),_0xae5909=Array[_0x33e695(0x1a3)](_0xeef04f)[_0x33e695(0x3c9)](_0x1c51aa=>_0x509e61[_0x33e695(0x343)](_0x1c51aa));this[_0x33e695(0x5e7)]['verbose'](this[_0x33e695(0x29c)]+'\x20('+this[_0x33e695(0x584)]['wuid']+'):\x20whoCanEdit\x20after\x20validation:\x20'+_0x2cb6ad),this[_0x33e695(0x5e7)][_0x33e695(0x6a3)](this[_0x33e695(0x29c)]+'\x20('+this[_0x33e695(0x584)][_0x33e695(0x7a3)]+_0x33e695(0x598)+_0xae5909);let _0xdb6f22={..._0x3a5f12,..._0x51b1e0,'whoCanEdit':_0x2cb6ad,'whoCanUse':_0xae5909},_0x429ec3=await this[_0x33e695(0x677)][_0x33e695(0x1e8)]['updateOne'](_0x3a5f12['_id'],_0xdb6f22);return await this['synchronizeAndMapFlows'](),_0x429ec3;}catch(_0x17a015){let _0x11096f=_0x33e695(0x916),_0x46a6e9=_0x17a015 instanceof Error?_0x17a015[_0x33e695(0x80a)]:typeof _0x17a015==_0x33e695(0x524)?JSON['stringify'](_0x17a015):_0x17a015,_0x217dcb=_0x11096f+':\x20'+_0x46a6e9;throw this[_0x33e695(0x5e7)][_0x33e695(0x830)](this[_0x33e695(0x29c)]+'\x20('+this[_0x33e695(0x584)]['wuid']+_0x33e695(0x62f)+_0x217dcb),new m(_0x217dcb);}}async['getValidWhatsAppNumbers'](_0x2432df){const _0x4d19ea=a0_0xf2a334;let _0x37899b={'numbers':_0x2432df};return(await this[_0x4d19ea(0x56e)](_0x37899b))['filter'](_0x33ce58=>_0x33ce58[_0x4d19ea(0x441)])[_0x4d19ea(0x5b0)](_0x3dd3a3=>_0x3dd3a3[_0x4d19ea(0x484)])[_0x4d19ea(0x5b0)](_0x3581f9=>this[_0x4d19ea(0x5d7)](_0x3581f9));}[a0_0xf2a334(0x5d7)](_0x52171e){let _0x147ee7=_0x52171e['match'](/\d+/);return _0x147ee7?_0x147ee7[0x0]:'';}async[a0_0xf2a334(0x8e8)](_0x5f36f5){const _0x370489=a0_0xf2a334;try{if(this[_0x370489(0x5e7)]['verbose'](this[_0x370489(0x29c)]+'\x20('+this[_0x370489(0x584)]['wuid']+_0x370489(0x55c)),!this['AutomateSystem'][_0x370489(0x633)][_0x370489(0x556)](_0x2b6968=>_0x2b6968[_0x370489(0x29b)]===_0x5f36f5[_0x370489(0x29b)]))throw this[_0x370489(0x5e7)][_0x370489(0x6a3)](this[_0x370489(0x29c)]+'\x20('+this[_0x370489(0x584)][_0x370489(0x7a3)]+'):\x20Fluxo\x20\x27'+_0x5f36f5[_0x370489(0x29b)]+'\x27\x20não\x20encontrado'),new m(_0x370489(0x240));let _0x53bfcf=await this[_0x370489(0x677)][_0x370489(0x1e8)][_0x370489(0x18a)]({'where':{'_id':_0x5f36f5[_0x370489(0x29b)]}});if(!_0x53bfcf||!_0x53bfcf[_0x370489(0x8a8)]?.[_0x370489(0x343)](this[_0x370489(0x584)][_0x370489(0x7a3)]))throw this[_0x370489(0x5e7)][_0x370489(0x830)](this[_0x370489(0x29c)]+'\x20('+this[_0x370489(0x584)][_0x370489(0x7a3)]+_0x370489(0x65a)+_0x5f36f5[_0x370489(0x29b)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x5f36f5['_id']+_0x370489(0x4b1));if(!_0x53bfcf[_0x370489(0x88a)]?.[_0x370489(0x343)](this[_0x370489(0x584)]['wuid']))throw new m(_0x370489(0x341));let {block:_0x4659f7}=_0x5f36f5;_0x4659f7?.[_0x370489(0x8d0)]?this[_0x370489(0x814)](_0x53bfcf,_0x5f36f5):_0x4659f7?.[_0x370489(0x44e)]?this[_0x370489(0x64a)](_0x53bfcf,_0x5f36f5):_0x4659f7[_0x370489(0x29b)]?await this[_0x370489(0x435)](_0x53bfcf,_0x5f36f5):this[_0x370489(0x8aa)](_0x53bfcf,_0x5f36f5);let _0x4dacf3=await this[_0x370489(0x677)]['flow'][_0x370489(0x32f)](_0x53bfcf['_id'],_0x53bfcf);if(!_0x4dacf3)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x4dacf3;}catch(_0x6bcdb0){this['throwAndLogError'](_0x370489(0x6cc)+_0x6bcdb0['message']);}}async[a0_0xf2a334(0x814)](_0x6bb327,_0x340e90){const _0x34ab43=a0_0xf2a334;let _0x4a4364=_0x340e90[_0x34ab43(0x617)][_0x34ab43(0x29b)],_0x50e41a=_0x6bb327[_0x34ab43(0x34e)][_0x34ab43(0x556)](_0x419260=>_0x419260['_id'][_0x34ab43(0x20e)]()===_0x4a4364);if(!_0x50e41a){this['logger'][_0x34ab43(0x830)](this[_0x34ab43(0x29c)]+'\x20('+this[_0x34ab43(0x584)][_0x34ab43(0x7a3)]+_0x34ab43(0x31b)+_0x4a4364+_0x34ab43(0x212));return;}this[_0x34ab43(0x5e7)][_0x34ab43(0x6a3)](this[_0x34ab43(0x29c)]+'\x20('+this['instance'][_0x34ab43(0x7a3)]+_0x34ab43(0x2e6)+JSON[_0x34ab43(0x34b)](_0x50e41a));let _0x240624=JSON[_0x34ab43(0x302)](JSON[_0x34ab43(0x34b)](_0x50e41a));_0x240624['_id']=new pe['default']['Types'][(_0x34ab43(0x880))](),this[_0x34ab43(0x5e7)][_0x34ab43(0x6a3)](this[_0x34ab43(0x29c)]+'\x20('+this[_0x34ab43(0x584)][_0x34ab43(0x7a3)]+_0x34ab43(0x534)+JSON[_0x34ab43(0x34b)](_0x240624)),_0x6bb327['blocks'][_0x34ab43(0x355)](_0x240624),this[_0x34ab43(0x60c)](_0x6bb327[_0x34ab43(0x34e)],_0x240624['groupId']);}['throwAndLogError'](_0x2ab575){const _0x5bf31d=a0_0xf2a334;throw this['logger']['error'](this[_0x5bf31d(0x29c)]+'\x20('+this['instance'][_0x5bf31d(0x7a3)]+_0x5bf31d(0x62f)+_0x2ab575),new m(_0x2ab575);}[a0_0xf2a334(0x64a)](_0x1e8593,_0x458196){const _0x3e4939=a0_0xf2a334;let {block:_0x24ccff}=_0x458196;if(_0x24ccff[_0x3e4939(0x519)]==='start'){this['throwAndLogError']('Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão');return;}if(!_0x24ccff[_0x3e4939(0x29b)]){this[_0x3e4939(0x6b7)](_0x3e4939(0x3cf));return;}let _0x5060b6=_0x1e8593['blocks'][_0x3e4939(0x556)](_0x4e0bcc=>_0x4e0bcc[_0x3e4939(0x29b)][_0x3e4939(0x20e)]()===_0x458196[_0x3e4939(0x617)][_0x3e4939(0x29b)][_0x3e4939(0x20e)]());if(!_0x5060b6){this[_0x3e4939(0x6b7)]('Bloco\x20com\x20ID\x20'+_0x24ccff[_0x3e4939(0x29b)]+'\x20não\x20encontrado');return;}_0x1e8593[_0x3e4939(0x34e)]=_0x1e8593[_0x3e4939(0x34e)][_0x3e4939(0x3c9)](_0x521344=>_0x521344['_id'][_0x3e4939(0x20e)]()!==_0x458196['block'][_0x3e4939(0x29b)][_0x3e4939(0x20e)]()),_0x1e8593[_0x3e4939(0x914)]=_0x1e8593[_0x3e4939(0x914)]['filter'](_0x36cd27=>_0x36cd27[_0x3e4939(0x1aa)]!==_0x24ccff['_id'][_0x3e4939(0x20e)]()),_0x1e8593[_0x3e4939(0x44a)]=_0x1e8593[_0x3e4939(0x44a)][_0x3e4939(0x3c9)](_0x49d392=>_0x49d392['blockId']!==_0x24ccff['_id'][_0x3e4939(0x20e)]()),_0x1e8593[_0x3e4939(0x4af)]=_0x1e8593[_0x3e4939(0x4af)][_0x3e4939(0x3c9)](_0x1c8076=>_0x1c8076[_0x3e4939(0x1aa)]!==_0x24ccff['_id'][_0x3e4939(0x20e)]()),this[_0x3e4939(0x60c)](_0x1e8593[_0x3e4939(0x34e)],_0x5060b6[_0x3e4939(0x540)]);}async[a0_0xf2a334(0x435)](_0x18959e,_0x31a542){const _0x2060a0=a0_0xf2a334;let _0x9dc5a8=_0x18959e[_0x2060a0(0x34e)][_0x2060a0(0x8c1)](_0x15670a=>_0x15670a[_0x2060a0(0x29b)]['toString']()===_0x31a542[_0x2060a0(0x617)][_0x2060a0(0x29b)][_0x2060a0(0x20e)]());if(this[_0x2060a0(0x5e7)][_0x2060a0(0x6a3)](this[_0x2060a0(0x29c)]+'\x20('+this[_0x2060a0(0x584)]['wuid']+_0x2060a0(0x488)+_0x9dc5a8),_0x9dc5a8===-0x1){this[_0x2060a0(0x5e7)][_0x2060a0(0x6a3)](_0x2060a0(0x636)+_0x31a542[_0x2060a0(0x617)][_0x2060a0(0x29b)]+_0x2060a0(0x4f0));return;}if(_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8][_0x2060a0(0x519)]===_0x2060a0(0x896)){let _0x2396c5=Object['keys'](_0x31a542['block']);if(_0x2396c5[_0x2060a0(0x250)]>0x2||_0x2396c5[_0x2060a0(0x250)]===0x2&&!_0x2396c5[_0x2060a0(0x343)](_0x2060a0(0x36b))){this['throwAndLogError'](_0x2060a0(0x1e5));return;}}let _0x141d22=_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8][_0x2060a0(0x540)];for(let _0x4eda06 in _0x31a542[_0x2060a0(0x617)])_0x31a542[_0x2060a0(0x617)]['hasOwnProperty'](_0x4eda06)&&(_0x18959e['blocks'][_0x9dc5a8][_0x4eda06]=_0x31a542[_0x2060a0(0x617)][_0x4eda06]);if(this[_0x2060a0(0x5e7)][_0x2060a0(0x6a3)](this[_0x2060a0(0x29c)]+'\x20('+this[_0x2060a0(0x584)]['wuid']+_0x2060a0(0x297)+JSON[_0x2060a0(0x34b)](_0x18959e['blocks'][_0x9dc5a8])),_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8][_0x2060a0(0x402)]&&_0x2060a0(0x4f4)in _0x18959e['blocks'][_0x9dc5a8][_0x2060a0(0x402)]){this[_0x2060a0(0x5e7)][_0x2060a0(0x6a3)](this[_0x2060a0(0x29c)]+'\x20('+this[_0x2060a0(0x584)][_0x2060a0(0x7a3)]+_0x2060a0(0x3f1));let _0x22b028=JSON[_0x2060a0(0x34b)](_0x18959e['blocks'][_0x9dc5a8][_0x2060a0(0x402)]['header'],null,0x1);_0x22b028[_0x2060a0(0x250)]>0x2&&(_0x22b028=_0x22b028['substring'](0x1,_0x22b028['length']-0x1)['trim']()),_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8]['apirequest'][_0x2060a0(0x485)]=_0x22b028;}if(_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8][_0x2060a0(0x402)]&&_0x2060a0(0x32e)in _0x18959e[_0x2060a0(0x34e)][_0x9dc5a8]['apirequest']&&!('bodyString'in _0x18959e[_0x2060a0(0x34e)][_0x9dc5a8]['apirequest'])){this[_0x2060a0(0x5e7)][_0x2060a0(0x6a3)](this[_0x2060a0(0x29c)]+'\x20('+this[_0x2060a0(0x584)][_0x2060a0(0x7a3)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8][_0x2060a0(0x402)]['bodyStringErrorParse']=!0x1;let _0x2e587c=JSON[_0x2060a0(0x34b)](_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8][_0x2060a0(0x402)][_0x2060a0(0x32e)],null,0x2);_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8]['apirequest']['bodyString']=_0x2e587c;}if(_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8][_0x2060a0(0x402)]&&_0x2060a0(0x6ca)in _0x18959e[_0x2060a0(0x34e)][_0x9dc5a8][_0x2060a0(0x402)]){_0x18959e['blocks'][_0x9dc5a8]['apirequest'][_0x2060a0(0x33d)]=!0x1;let _0x5e605e=_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8][_0x2060a0(0x402)][_0x2060a0(0x6ca)],_0x175df2=this[_0x2060a0(0x4ee)](_0x5e605e);_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8][_0x2060a0(0x402)][_0x2060a0(0x6ca)]=_0x175df2[_0x2060a0(0x4f8)],_0x18959e['blocks'][_0x9dc5a8][_0x2060a0(0x402)][_0x2060a0(0x33d)]=_0x175df2['error'];}let _0x4f24e5=_0x18959e[_0x2060a0(0x34e)][_0x9dc5a8]['groupId'];_0x141d22!==_0x4f24e5?(this['reorderBlocks'](_0x18959e[_0x2060a0(0x34e)],_0x141d22),this[_0x2060a0(0x60c)](_0x18959e['blocks'],_0x4f24e5)):this[_0x2060a0(0x60c)](_0x18959e[_0x2060a0(0x34e)],_0x141d22);}[a0_0xf2a334(0x4ee)](_0x52d9c9){const _0x18ecd6=a0_0xf2a334;let _0x27da94='\u205f',_0x1325de=!0x1,_0x1ef77b='';for(let _0x448b53=0x0;_0x448b53<_0x52d9c9[_0x18ecd6(0x250)];_0x448b53++){let _0x3e8b67=_0x52d9c9[_0x448b53];_0x3e8b67==='\x22'&&(_0x448b53===0x0||_0x52d9c9[_0x448b53-0x1]!=='\x5c')&&(_0x1325de=!_0x1325de),!(!_0x1325de&&(_0x3e8b67==='\x0a'||_0x3e8b67==='\x20'||_0x3e8b67===_0x27da94))&&(_0x1ef77b+=_0x3e8b67);}let _0x5e7922={},_0x56b21b=9876543210.1234,_0x46f7f6=_0x1ef77b[_0x18ecd6(0x6b0)](/\{\{([^}]+)\}\}/g,_0x341fb1=>{let _0x4b9d6f=_0x341fb1,_0x35a1e0=''+_0x56b21b;return _0x5e7922[_0x35a1e0]=_0x4b9d6f,_0x56b21b+=0.0001,_0x35a1e0;}),_0x147538='',_0x2258ff=!0x1;try{let _0x1ef856=JSON[_0x18ecd6(0x302)](_0x46f7f6);_0x147538=JSON[_0x18ecd6(0x34b)](_0x1ef856,null,0x2),_0x147538=_0x147538[_0x18ecd6(0x6b0)](/\n( +)/g,(_0x58b03d,_0x3c452d)=>{let _0x4d138a=_0x3c452d['length'];return'\x0a'+_0x27da94['repeat'](_0x4d138a*0x2);}),_0x147538=_0x147538[_0x18ecd6(0x6b0)](/(\d{10,}\.\d+)/g,_0x7a1840=>_0x5e7922[_0x7a1840]||_0x7a1840);}catch(_0x575143){this[_0x18ecd6(0x5e7)][_0x18ecd6(0x830)](_0x18ecd6(0x831)+_0x575143),_0x147538=_0x52d9c9,_0x2258ff=!0x0;}return{'result':_0x147538,'error':_0x2258ff};}[a0_0xf2a334(0x8aa)](_0x21fbf2,_0x1005d9){const _0x2fbe06=a0_0xf2a334;if(_0x1005d9[_0x2fbe06(0x617)][_0x2fbe06(0x519)]===_0x2fbe06(0x896)){this['throwAndLogError']('Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão');return;}if(_0x1005d9['block'][_0x2fbe06(0x402)]&&_0x2fbe06(0x4f4)in _0x1005d9[_0x2fbe06(0x617)][_0x2fbe06(0x402)]){this[_0x2fbe06(0x5e7)][_0x2fbe06(0x6a3)](this[_0x2fbe06(0x29c)]+'\x20('+this['instance'][_0x2fbe06(0x7a3)]+_0x2fbe06(0x3f1));let _0x4e497a=JSON[_0x2fbe06(0x34b)](_0x1005d9[_0x2fbe06(0x617)][_0x2fbe06(0x402)][_0x2fbe06(0x4f4)],null,0x1);_0x4e497a[_0x2fbe06(0x250)]>0x2&&(_0x4e497a=_0x4e497a[_0x2fbe06(0x17b)](0x1,_0x4e497a[_0x2fbe06(0x250)]-0x1)[_0x2fbe06(0x66c)]()),_0x1005d9[_0x2fbe06(0x617)][_0x2fbe06(0x402)][_0x2fbe06(0x485)]=_0x4e497a;}_0x1005d9['block'][_0x2fbe06(0x402)]&&_0x2fbe06(0x32e)in _0x1005d9[_0x2fbe06(0x617)][_0x2fbe06(0x402)]&&(this[_0x2fbe06(0x5e7)][_0x2fbe06(0x6a3)](this['instanceName']+'\x20('+this['instance'][_0x2fbe06(0x7a3)]+_0x2fbe06(0x179)),_0x1005d9[_0x2fbe06(0x617)][_0x2fbe06(0x402)][_0x2fbe06(0x6ca)]=JSON[_0x2fbe06(0x34b)](_0x1005d9['block'][_0x2fbe06(0x402)]['body'],null,0x1)[_0x2fbe06(0x66c)]()),_0x21fbf2[_0x2fbe06(0x34e)]['push'](_0x1005d9[_0x2fbe06(0x617)]),this[_0x2fbe06(0x60c)](_0x21fbf2[_0x2fbe06(0x34e)],_0x1005d9['block'][_0x2fbe06(0x540)]);}[a0_0xf2a334(0x60c)](_0x13f75e,_0x517846){const _0x1e791e=a0_0xf2a334;let _0x17be9c=_0x13f75e[_0x1e791e(0x3c9)](_0x575ab4=>_0x575ab4[_0x1e791e(0x540)]===_0x517846);_0x17be9c['sort']((_0x40ae80,_0x5aff8c)=>_0x40ae80[_0x1e791e(0x48f)]-_0x5aff8c['order']),_0x17be9c['forEach']((_0x5e0c2b,_0x53a3c8)=>_0x5e0c2b[_0x1e791e(0x48f)]=_0x53a3c8+0x1);}async[a0_0xf2a334(0x2fa)](_0x259b48){const _0x130aba=a0_0xf2a334;try{if(this[_0x130aba(0x5e7)]['verbose'](this[_0x130aba(0x29c)]+'\x20('+this[_0x130aba(0x584)]['wuid']+_0x130aba(0x513)),!_0x259b48||!_0x259b48['replyOption']){this['throwAndLogError'](_0x130aba(0x88f));return;}if(!this[_0x130aba(0x580)][_0x130aba(0x633)][_0x130aba(0x556)](_0x34a0e5=>_0x34a0e5[_0x130aba(0x29b)]===_0x259b48['_id']))throw this[_0x130aba(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0x130aba(0x584)]['wuid']+'):\x20Fluxo\x20\x27'+_0x259b48[_0x130aba(0x29b)]+_0x130aba(0x7ed)),new m(_0x130aba(0x240));let _0x41dfea=await this['repository'][_0x130aba(0x1e8)][_0x130aba(0x18a)]({'where':{'_id':_0x259b48[_0x130aba(0x29b)]}});if(!_0x41dfea||!_0x41dfea[_0x130aba(0x8a8)]?.[_0x130aba(0x343)](this[_0x130aba(0x584)][_0x130aba(0x7a3)]))throw this[_0x130aba(0x5e7)][_0x130aba(0x830)](this[_0x130aba(0x29c)]+'\x20('+this[_0x130aba(0x584)][_0x130aba(0x7a3)]+_0x130aba(0x65a)+_0x259b48[_0x130aba(0x29b)]+_0x130aba(0x4b1)),new m(_0x130aba(0x68e)+_0x259b48[_0x130aba(0x29b)]+_0x130aba(0x4b1));if(!_0x41dfea[_0x130aba(0x88a)]?.[_0x130aba(0x343)](this[_0x130aba(0x584)][_0x130aba(0x7a3)]))throw new m(_0x130aba(0x341));let {replyOption:_0x3a72e0}=_0x259b48;_0x3a72e0?.[_0x130aba(0x44e)]?(this[_0x130aba(0x75c)](_0x41dfea,_0x259b48),this[_0x130aba(0x2c6)](_0x41dfea['replyOptions'],_0x259b48[_0x130aba(0x26b)][_0x130aba(0x1aa)])):_0x3a72e0['_id']?(await this[_0x130aba(0x7a7)](_0x41dfea,_0x259b48),this[_0x130aba(0x2c6)](_0x41dfea[_0x130aba(0x4af)],_0x259b48[_0x130aba(0x26b)][_0x130aba(0x1aa)])):(this[_0x130aba(0x788)](_0x41dfea,_0x259b48),this['reorderReplyOptions'](_0x41dfea[_0x130aba(0x4af)],_0x259b48['replyOption']['blockId']));let _0x47e6ec=await this[_0x130aba(0x677)][_0x130aba(0x1e8)]['updateOne'](_0x41dfea[_0x130aba(0x29b)],_0x41dfea);if(!_0x47e6ec)throw new Error(_0x130aba(0x8b4));return _0x47e6ec;}catch(_0x5b6349){this['throwAndLogError'](_0x130aba(0x66e)+_0x5b6349);}}[a0_0xf2a334(0x2c6)](_0x2da273,_0x280de9){const _0x2a94f8=a0_0xf2a334;_0x2da273[_0x2a94f8(0x3b5)](_0x2ccbde=>{const _0x28f940=_0x2a94f8;_0x2ccbde[_0x28f940(0x1aa)]===_0x280de9&&_0x2ccbde['order']===void 0x0&&(_0x2ccbde[_0x28f940(0x48f)]=0x270f);});let _0x5f4717=_0x2da273[_0x2a94f8(0x3c9)](_0x48a8de=>_0x48a8de[_0x2a94f8(0x1aa)]===_0x280de9);_0x5f4717[_0x2a94f8(0x53f)]((_0x30c7a3,_0x2fc45f)=>_0x30c7a3[_0x2a94f8(0x48f)]-_0x2fc45f['order']),_0x5f4717[_0x2a94f8(0x3b5)]((_0x55caa1,_0x21d3be)=>{const _0x4ffa6e=_0x2a94f8;_0x55caa1[_0x4ffa6e(0x48f)]=_0x21d3be+0x1;}),_0x2da273[_0x2a94f8(0x3b5)](_0x312bf6=>{const _0x4502a9=_0x2a94f8;if(_0x312bf6[_0x4502a9(0x1aa)]===_0x280de9){let _0x140bff=_0x5f4717['find'](_0x5d6e88=>_0x5d6e88[_0x4502a9(0x29b)]&&_0x312bf6[_0x4502a9(0x29b)]&&_0x5d6e88[_0x4502a9(0x29b)][_0x4502a9(0x20e)]()===_0x312bf6['_id'][_0x4502a9(0x20e)]());_0x140bff&&(_0x312bf6[_0x4502a9(0x48f)]=_0x140bff[_0x4502a9(0x48f)]);}});}[a0_0xf2a334(0x75c)](_0x5c3408,_0x448c12){const _0x5b3e77=a0_0xf2a334;let {replyOption:_0x392f87}=_0x448c12;if(!_0x392f87[_0x5b3e77(0x29b)]){this['throwAndLogError']('replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption');return;}if(!_0x5c3408[_0x5b3e77(0x4af)][_0x5b3e77(0x556)](_0x7de3c0=>_0x7de3c0[_0x5b3e77(0x29b)][_0x5b3e77(0x20e)]()===_0x448c12[_0x5b3e77(0x26b)]['_id'][_0x5b3e77(0x20e)]())){this[_0x5b3e77(0x6b7)](_0x5b3e77(0x6b1)+_0x392f87[_0x5b3e77(0x29b)]+'\x20não\x20encontrado');return;}_0x5c3408[_0x5b3e77(0x4af)]=_0x5c3408['replyOptions'][_0x5b3e77(0x3c9)](_0x528469=>_0x528469['_id']['toString']()!==_0x448c12[_0x5b3e77(0x26b)][_0x5b3e77(0x29b)][_0x5b3e77(0x20e)]());}async[a0_0xf2a334(0x7a7)](_0x590201,_0x27a427){const _0x914022=a0_0xf2a334;let _0x1fa624=_0x590201[_0x914022(0x4af)]['findIndex'](_0x108bc5=>_0x108bc5['_id']['toString']()===_0x27a427[_0x914022(0x26b)]['_id'][_0x914022(0x20e)]());if(_0x1fa624===-0x1){this[_0x914022(0x6b7)](_0x914022(0x6b1)+_0x27a427['replyOption'][_0x914022(0x29b)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}for(let _0x2f1ec2 in _0x27a427[_0x914022(0x26b)])_0x27a427[_0x914022(0x26b)][_0x914022(0x5f6)](_0x2f1ec2)&&(_0x590201[_0x914022(0x4af)][_0x1fa624][_0x2f1ec2]=_0x27a427['replyOption'][_0x2f1ec2]);}['addReplyOption'](_0x5dfd14,_0x1f5db5){const _0x79b8b8=a0_0xf2a334;_0x5dfd14[_0x79b8b8(0x4af)][_0x79b8b8(0x355)](_0x1f5db5[_0x79b8b8(0x26b)]);}async['editFlowGroup'](_0x27bcbb){const _0x225db1=a0_0xf2a334;this[_0x225db1(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0x225db1(0x584)][_0x225db1(0x7a3)]+_0x225db1(0x691)+JSON[_0x225db1(0x34b)](_0x27bcbb,null,0x2));try{if(this[_0x225db1(0x5e7)][_0x225db1(0x6a3)](this[_0x225db1(0x29c)]+'\x20('+this[_0x225db1(0x584)]['wuid']+_0x225db1(0x1c4)),!this[_0x225db1(0x580)][_0x225db1(0x633)][_0x225db1(0x556)](_0x3459ce=>_0x3459ce['_id']===_0x27bcbb[_0x225db1(0x29b)]))throw this[_0x225db1(0x5e7)][_0x225db1(0x6a3)](this[_0x225db1(0x29c)]+'\x20('+this[_0x225db1(0x584)]['wuid']+_0x225db1(0x7fa)+_0x27bcbb[_0x225db1(0x29b)]+_0x225db1(0x7ed)),new m(_0x225db1(0x240));let _0x2bab9a=await this[_0x225db1(0x677)][_0x225db1(0x1e8)]['findOne']({'where':{'_id':_0x27bcbb[_0x225db1(0x29b)]}});if(!_0x2bab9a||!_0x2bab9a[_0x225db1(0x8a8)]?.[_0x225db1(0x343)](this[_0x225db1(0x584)][_0x225db1(0x7a3)]))throw this[_0x225db1(0x5e7)][_0x225db1(0x830)](this[_0x225db1(0x29c)]+'\x20('+this[_0x225db1(0x584)][_0x225db1(0x7a3)]+_0x225db1(0x65a)+_0x27bcbb[_0x225db1(0x29b)]+_0x225db1(0x4b1)),new m('Flow\x20\x27'+_0x27bcbb['_id']+_0x225db1(0x4b1));if(!_0x2bab9a[_0x225db1(0x88a)]?.[_0x225db1(0x343)](this[_0x225db1(0x584)][_0x225db1(0x7a3)]))throw new m(_0x225db1(0x341));if(_0x27bcbb[_0x225db1(0x200)]&&_0x27bcbb[_0x225db1(0x200)]?.['delete']===!0x0){if(this[_0x225db1(0x5e7)]['verbose'](this[_0x225db1(0x29c)]+'\x20('+this['instance'][_0x225db1(0x7a3)]+_0x225db1(0x5fa)),_0x27bcbb['group'][_0x225db1(0x59e)]===!0x0)return{'message':_0x225db1(0x626)};if(_0x2bab9a[_0x225db1(0x34e)][_0x225db1(0x4a9)](_0x1b203c=>_0x1b203c[_0x225db1(0x540)]['toString']()===_0x27bcbb[_0x225db1(0x200)][_0x225db1(0x29b)]))return this[_0x225db1(0x5e7)][_0x225db1(0x6a3)](this['instanceName']+'\x20('+this['instance'][_0x225db1(0x7a3)]+_0x225db1(0x51b)),{'message':_0x225db1(0x7ae)};_0x2bab9a['groups']=_0x2bab9a[_0x225db1(0x4a7)][_0x225db1(0x3c9)](_0x4e7141=>_0x4e7141[_0x225db1(0x29b)][_0x225db1(0x20e)]()!==_0x27bcbb['group'][_0x225db1(0x29b)]);}else{if(_0x27bcbb[_0x225db1(0x200)]){if(_0x27bcbb[_0x225db1(0x200)]['default']===!0x0)return{'message':_0x225db1(0x5bf)};if(_0x27bcbb[_0x225db1(0x200)][_0x225db1(0x29b)]){let _0x5a101d=_0x2bab9a[_0x225db1(0x4a7)][_0x225db1(0x556)](_0x14b2d6=>_0x14b2d6[_0x225db1(0x29b)][_0x225db1(0x20e)]()===_0x27bcbb['group'][_0x225db1(0x29b)]);_0x5a101d&&(_0x27bcbb[_0x225db1(0x200)]['x']<0x0&&(_0x27bcbb['group']['x']=0x0),_0x27bcbb[_0x225db1(0x200)]['y']<0x0&&(_0x27bcbb[_0x225db1(0x200)]['y']=0x0),Object[_0x225db1(0x58a)](_0x5a101d,_0x27bcbb[_0x225db1(0x200)]));}else _0x2bab9a[_0x225db1(0x4a7)][_0x225db1(0x355)](_0x27bcbb[_0x225db1(0x200)]);}}let _0x1b7e90=await this[_0x225db1(0x677)]['flow'][_0x225db1(0x32f)](_0x2bab9a[_0x225db1(0x29b)],_0x2bab9a);if(!_0x1b7e90)throw new Error(_0x225db1(0x8b4));return _0x1b7e90;}catch(_0x2e28ca){let _0x329510='Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo',_0x2f9581=_0x2e28ca instanceof Error?_0x2e28ca[_0x225db1(0x80a)]:typeof _0x2e28ca==_0x225db1(0x524)?JSON['stringify'](_0x2e28ca):_0x2e28ca,_0x461314=_0x329510+':\x20'+_0x2f9581;throw this['logger'][_0x225db1(0x830)](this[_0x225db1(0x29c)]+'\x20('+this['instance'][_0x225db1(0x7a3)]+_0x225db1(0x62f)+_0x461314),new m(_0x461314);}}async[a0_0xf2a334(0x251)](_0x19cbc9){const _0x59e2c2=a0_0xf2a334;try{if(this[_0x59e2c2(0x5e7)]['verbose'](this[_0x59e2c2(0x29c)]+'\x20('+this[_0x59e2c2(0x584)][_0x59e2c2(0x7a3)]+'):\x20Editando\x20condição\x20do\x20fluxo...'),!this[_0x59e2c2(0x580)]['flows'][_0x59e2c2(0x556)](_0x79fbe6=>_0x79fbe6[_0x59e2c2(0x29b)]===_0x19cbc9['_id']))throw this[_0x59e2c2(0x5e7)][_0x59e2c2(0x6a3)](this[_0x59e2c2(0x29c)]+'\x20('+this[_0x59e2c2(0x584)][_0x59e2c2(0x7a3)]+_0x59e2c2(0x7fa)+_0x19cbc9[_0x59e2c2(0x29b)]+_0x59e2c2(0x7ed)),new m(_0x59e2c2(0x240));let _0x3b2af7=await this[_0x59e2c2(0x677)]['flow'][_0x59e2c2(0x18a)]({'where':{'_id':_0x19cbc9[_0x59e2c2(0x29b)]}});if(!_0x3b2af7||!_0x3b2af7[_0x59e2c2(0x8a8)]?.[_0x59e2c2(0x343)](this[_0x59e2c2(0x584)][_0x59e2c2(0x7a3)]))throw this[_0x59e2c2(0x5e7)][_0x59e2c2(0x830)](this['instanceName']+'\x20('+this[_0x59e2c2(0x584)]['wuid']+_0x59e2c2(0x65a)+_0x19cbc9[_0x59e2c2(0x29b)]+_0x59e2c2(0x4b1)),new m(_0x59e2c2(0x68e)+_0x19cbc9[_0x59e2c2(0x29b)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x3b2af7[_0x59e2c2(0x88a)]?.[_0x59e2c2(0x343)](this[_0x59e2c2(0x584)]['wuid']))throw new m(_0x59e2c2(0x341));let _0x21aa57=!0x1;if(_0x19cbc9['condition']?.[_0x59e2c2(0x44e)]===!0x0)_0x3b2af7[_0x59e2c2(0x914)]=_0x3b2af7[_0x59e2c2(0x914)]['filter'](_0x4dc113=>_0x4dc113&&_0x19cbc9[_0x59e2c2(0x1b5)]&&_0x4dc113['_id']&&_0x19cbc9[_0x59e2c2(0x1b5)][_0x59e2c2(0x29b)]&&_0x4dc113['_id']['toString']()!==_0x19cbc9[_0x59e2c2(0x1b5)][_0x59e2c2(0x29b)]['toString']()),_0x21aa57=!0x0;else{let _0x3f1aa1=_0x3b2af7[_0x59e2c2(0x914)][_0x59e2c2(0x556)](_0x6bdede=>_0x6bdede&&_0x19cbc9[_0x59e2c2(0x1b5)]&&_0x6bdede[_0x59e2c2(0x29b)]&&_0x19cbc9[_0x59e2c2(0x1b5)][_0x59e2c2(0x29b)]&&_0x6bdede[_0x59e2c2(0x29b)][_0x59e2c2(0x20e)]()===_0x19cbc9['condition'][_0x59e2c2(0x29b)][_0x59e2c2(0x20e)]());_0x3f1aa1?(_0x21aa57=_0x3f1aa1[_0x59e2c2(0x48f)]!==_0x19cbc9[_0x59e2c2(0x1b5)][_0x59e2c2(0x48f)],Object['assign'](_0x3f1aa1,_0x19cbc9[_0x59e2c2(0x1b5)])):(_0x3b2af7[_0x59e2c2(0x914)][_0x59e2c2(0x355)](_0x19cbc9['condition']),_0x21aa57=!0x0);}if(_0x21aa57){_0x3b2af7[_0x59e2c2(0x914)][_0x59e2c2(0x53f)]((_0x1b844d,_0x10eead)=>_0x1b844d[_0x59e2c2(0x48f)]>_0x10eead[_0x59e2c2(0x48f)]?0x1:_0x10eead['order']>_0x1b844d[_0x59e2c2(0x48f)]?-0x1:0x0);for(let _0x1207d1=0x0;_0x1207d1<_0x3b2af7[_0x59e2c2(0x914)]['length'];_0x1207d1++)_0x3b2af7[_0x59e2c2(0x914)][_0x1207d1][_0x59e2c2(0x48f)]=_0x1207d1+0x1;_0x3b2af7['conditions'][_0x59e2c2(0x250)]>0x0&&(_0x3b2af7[_0x59e2c2(0x914)][0x0][_0x59e2c2(0x87f)]=_0x59e2c2(0x39e));}let _0x5bdb1a=await this[_0x59e2c2(0x677)][_0x59e2c2(0x1e8)]['updateOne'](_0x3b2af7[_0x59e2c2(0x29b)],_0x3b2af7);if(!_0x5bdb1a)throw new Error(_0x59e2c2(0x8b4));return _0x5bdb1a;}catch(_0x4295a2){let _0x5a0d83='Erro\x20ao\x20editar\x20condição\x20do\x20fluxo',_0x36478d=_0x4295a2 instanceof Error?_0x4295a2[_0x59e2c2(0x80a)]:typeof _0x4295a2=='object'?JSON['stringify'](_0x4295a2):_0x4295a2,_0x4265db=_0x5a0d83+':\x20'+_0x36478d;throw this[_0x59e2c2(0x5e7)][_0x59e2c2(0x830)](this['instanceName']+'\x20('+this[_0x59e2c2(0x584)][_0x59e2c2(0x7a3)]+'):\x20'+_0x4265db),new m(_0x4265db);}}async['editFlowVaredit'](_0x5f18b8){const _0x5d5f33=a0_0xf2a334;try{if(this[_0x5d5f33(0x5e7)][_0x5d5f33(0x6a3)](this[_0x5d5f33(0x29c)]+'\x20('+this[_0x5d5f33(0x584)][_0x5d5f33(0x7a3)]+_0x5d5f33(0x7e4)),!this['AutomateSystem']['flows'][_0x5d5f33(0x556)](_0x3f3937=>_0x3f3937[_0x5d5f33(0x29b)]===_0x5f18b8[_0x5d5f33(0x29b)]))throw this['logger'][_0x5d5f33(0x6a3)](this[_0x5d5f33(0x29c)]+'\x20('+this[_0x5d5f33(0x584)][_0x5d5f33(0x7a3)]+_0x5d5f33(0x7fa)+_0x5f18b8[_0x5d5f33(0x29b)]+_0x5d5f33(0x7ed)),new m(_0x5d5f33(0x240));let _0x442e4a=await this[_0x5d5f33(0x677)][_0x5d5f33(0x1e8)][_0x5d5f33(0x18a)]({'where':{'_id':_0x5f18b8[_0x5d5f33(0x29b)]}});if(!_0x442e4a||!_0x442e4a[_0x5d5f33(0x8a8)]?.[_0x5d5f33(0x343)](this[_0x5d5f33(0x584)][_0x5d5f33(0x7a3)]))throw this[_0x5d5f33(0x5e7)][_0x5d5f33(0x830)](this[_0x5d5f33(0x29c)]+'\x20('+this[_0x5d5f33(0x584)][_0x5d5f33(0x7a3)]+_0x5d5f33(0x65a)+_0x5f18b8[_0x5d5f33(0x29b)]+_0x5d5f33(0x4b1)),new m(_0x5d5f33(0x68e)+_0x5f18b8[_0x5d5f33(0x29b)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x442e4a[_0x5d5f33(0x88a)]?.[_0x5d5f33(0x343)](this[_0x5d5f33(0x584)][_0x5d5f33(0x7a3)]))throw new m(_0x5d5f33(0x341));let _0xcf8500=!0x1;if(_0x5f18b8[_0x5d5f33(0x489)]?.[_0x5d5f33(0x44e)]===!0x0)_0x442e4a['varedits']=_0x442e4a[_0x5d5f33(0x44a)][_0x5d5f33(0x3c9)](_0x3d6f4a=>_0x3d6f4a&&_0x5f18b8['varedit']&&_0x3d6f4a[_0x5d5f33(0x29b)]&&_0x5f18b8[_0x5d5f33(0x489)][_0x5d5f33(0x29b)]&&_0x3d6f4a['_id'][_0x5d5f33(0x20e)]()!==_0x5f18b8[_0x5d5f33(0x489)][_0x5d5f33(0x29b)][_0x5d5f33(0x20e)]()),_0xcf8500=!0x0;else{let _0x3409f4=_0x442e4a[_0x5d5f33(0x44a)][_0x5d5f33(0x556)](_0x1881a5=>_0x1881a5&&_0x5f18b8['varedit']&&_0x1881a5[_0x5d5f33(0x29b)]&&_0x5f18b8[_0x5d5f33(0x489)][_0x5d5f33(0x29b)]&&_0x1881a5['_id']['toString']()===_0x5f18b8[_0x5d5f33(0x489)]['_id'][_0x5d5f33(0x20e)]());_0x3409f4?(_0xcf8500=_0x3409f4['order']!==_0x5f18b8['varedit'][_0x5d5f33(0x48f)],Object[_0x5d5f33(0x58a)](_0x3409f4,_0x5f18b8[_0x5d5f33(0x489)])):(_0x442e4a[_0x5d5f33(0x44a)]['push'](_0x5f18b8[_0x5d5f33(0x489)]),_0xcf8500=!0x0);}if(_0xcf8500){_0x442e4a['varedits'][_0x5d5f33(0x53f)]((_0x1235a1,_0x1a04e2)=>_0x1235a1[_0x5d5f33(0x48f)]>_0x1a04e2[_0x5d5f33(0x48f)]?0x1:_0x1a04e2[_0x5d5f33(0x48f)]>_0x1235a1[_0x5d5f33(0x48f)]?-0x1:0x0);for(let _0x562822=0x0;_0x562822<_0x442e4a['varedits'][_0x5d5f33(0x250)];_0x562822++)_0x442e4a[_0x5d5f33(0x44a)][_0x562822]['order']=_0x562822+0x1;}let _0x294907=await this['repository'][_0x5d5f33(0x1e8)][_0x5d5f33(0x32f)](_0x442e4a['_id'],_0x442e4a);if(!_0x294907)throw new Error(_0x5d5f33(0x8b4));return _0x294907;}catch(_0x19ab3f){let _0x4e0c36=_0x5d5f33(0x80c),_0x235537=_0x19ab3f instanceof Error?_0x19ab3f[_0x5d5f33(0x80a)]:typeof _0x19ab3f==_0x5d5f33(0x524)?JSON[_0x5d5f33(0x34b)](_0x19ab3f):_0x19ab3f,_0x281e9b=_0x4e0c36+':\x20'+_0x235537;throw this[_0x5d5f33(0x5e7)][_0x5d5f33(0x830)](this['instanceName']+'\x20('+this['instance'][_0x5d5f33(0x7a3)]+_0x5d5f33(0x62f)+_0x281e9b),new m(_0x281e9b);}}async[a0_0xf2a334(0x2e8)](_0x1745c5){const _0x5cc0da=a0_0xf2a334;try{if(this['logger'][_0x5cc0da(0x6a3)](this[_0x5cc0da(0x29c)]+'\x20('+this[_0x5cc0da(0x584)][_0x5cc0da(0x7a3)]+_0x5cc0da(0x48e)),!this[_0x5cc0da(0x580)][_0x5cc0da(0x633)][_0x5cc0da(0x556)](_0x5270e6=>_0x5270e6[_0x5cc0da(0x29b)]===_0x1745c5[_0x5cc0da(0x29b)]))throw this['logger']['verbose'](this[_0x5cc0da(0x29c)]+'\x20('+this['instance']['wuid']+'):\x20Fluxo\x20\x27'+_0x1745c5[_0x5cc0da(0x29b)]+_0x5cc0da(0x7ed)),new m(_0x5cc0da(0x240));let _0x59303c=await this[_0x5cc0da(0x677)][_0x5cc0da(0x1e8)]['findOne']({'where':{'_id':_0x1745c5[_0x5cc0da(0x29b)]}});if(!_0x59303c||!_0x59303c[_0x5cc0da(0x8a8)]?.[_0x5cc0da(0x343)](this['instance'][_0x5cc0da(0x7a3)]))throw this['logger']['error'](this[_0x5cc0da(0x29c)]+'\x20('+this[_0x5cc0da(0x584)][_0x5cc0da(0x7a3)]+_0x5cc0da(0x65a)+_0x1745c5[_0x5cc0da(0x29b)]+_0x5cc0da(0x4b1)),new m(_0x5cc0da(0x68e)+_0x1745c5[_0x5cc0da(0x29b)]+_0x5cc0da(0x4b1));if(!_0x59303c[_0x5cc0da(0x88a)]?.[_0x5cc0da(0x343)](this[_0x5cc0da(0x584)][_0x5cc0da(0x7a3)]))throw new m(_0x5cc0da(0x341));_0x1745c5[_0x5cc0da(0x1ec)][_0x5cc0da(0x76f)]=_0x1745c5['variable'][_0x5cc0da(0x76f)][_0x5cc0da(0x66c)](),_0x1745c5['variable']['name'][_0x5cc0da(0x2f0)]('_')&&(_0x1745c5[_0x5cc0da(0x1ec)][_0x5cc0da(0x76f)]=_0x1745c5[_0x5cc0da(0x1ec)][_0x5cc0da(0x76f)]['substring'](0x1)),_0x1745c5['variable']['name']=_0x1745c5[_0x5cc0da(0x1ec)][_0x5cc0da(0x76f)]['trim']();let _0x5e206e=_0x59303c[_0x5cc0da(0x613)][_0x5cc0da(0x556)](_0x3e8c99=>_0x3e8c99[_0x5cc0da(0x76f)]===_0x1745c5[_0x5cc0da(0x1ec)]['name']);if(_0x5e206e?.['leadInfo']===!0x0)throw new Error(_0x5cc0da(0x79c));if(_0x1745c5['variable']?.[_0x5cc0da(0x44e)]===!0x0){if(!_0x5e206e)return{'message':'Variável\x20não\x20encontrada!'};_0x59303c[_0x5cc0da(0x613)]=_0x59303c['variables'][_0x5cc0da(0x3c9)](_0x1954cd=>_0x1954cd[_0x5cc0da(0x76f)]!==_0x1745c5[_0x5cc0da(0x1ec)][_0x5cc0da(0x76f)]);}else _0x5e206e?Object[_0x5cc0da(0x58a)](_0x5e206e,_0x1745c5[_0x5cc0da(0x1ec)]):_0x59303c[_0x5cc0da(0x613)][_0x5cc0da(0x355)](_0x1745c5[_0x5cc0da(0x1ec)]);let _0x46302d=await this[_0x5cc0da(0x677)][_0x5cc0da(0x1e8)][_0x5cc0da(0x32f)](_0x59303c[_0x5cc0da(0x29b)],_0x59303c);if(!_0x46302d)throw new Error(_0x5cc0da(0x8b4));return _0x46302d;}catch(_0x198dad){let _0x7e6c20=_0x5cc0da(0x160),_0x43185b=_0x198dad instanceof Error?_0x198dad[_0x5cc0da(0x80a)]:typeof _0x198dad=='object'?JSON['stringify'](_0x198dad):_0x198dad,_0x4223ce=_0x7e6c20+':\x20'+_0x43185b;throw this['logger'][_0x5cc0da(0x830)](this['instanceName']+'\x20('+this[_0x5cc0da(0x584)][_0x5cc0da(0x7a3)]+_0x5cc0da(0x62f)+_0x4223ce),new m(_0x4223ce);}}async[a0_0xf2a334(0x7e2)](_0x25e673){const _0x591c21=a0_0xf2a334;let _0x53aff2=null;try{if(!this[_0x591c21(0x580)]?.[_0x591c21(0x5bd)][_0x591c21(0x3f8)])throw new m(_0x591c21(0x68f));this[_0x591c21(0x5e7)][_0x591c21(0x6a3)](this[_0x591c21(0x29c)]+'\x20('+this[_0x591c21(0x584)][_0x591c21(0x7a3)]+_0x591c21(0x23c));let _0x1013f2=(await this['whatsappNumber']({'numbers':[_0x25e673[_0x591c21(0x61e)]]}))[0x0];if(!_0x1013f2[_0x591c21(0x441)]&&!(0x0,w['isJidGroup'])(_0x1013f2['jid'])&&!_0x1013f2[_0x591c21(0x484)]['includes'](_0x591c21(0x497)))throw _0x53aff2=JSON[_0x591c21(0x34b)](_0x1013f2,null,0x2),new m(_0x1013f2);let _0x11b6fc;if(_0x25e673[_0x591c21(0x76f)][_0x591c21(0x250)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x591c21(0x852)](_0x25e673['name'])?_0x11b6fc=this[_0x591c21(0x580)][_0x591c21(0x633)][_0x591c21(0x556)](_0x35ff98=>_0x35ff98[_0x591c21(0x29b)]===_0x25e673['name']):_0x11b6fc=this[_0x591c21(0x580)][_0x591c21(0x633)][_0x591c21(0x556)](_0x182c8f=>_0x182c8f[_0x591c21(0x76f)]===_0x25e673[_0x591c21(0x76f)]),!_0x11b6fc)throw this[_0x591c21(0x5e7)][_0x591c21(0x6a3)](this[_0x591c21(0x29c)]+'\x20('+this[_0x591c21(0x584)][_0x591c21(0x7a3)]+_0x591c21(0x7fa)+_0x25e673[_0x591c21(0x76f)]+'\x27\x20não\x20encontrado'),new m(_0x591c21(0x240));let _0x2f39d8=await this[_0x591c21(0x677)]['flow']['findOne']({'where':{'_id':_0x11b6fc[_0x591c21(0x29b)]}});if(!_0x2f39d8||!_0x2f39d8[_0x591c21(0x8a8)]?.[_0x591c21(0x343)](this[_0x591c21(0x584)]['wuid']))throw this[_0x591c21(0x5e7)]['error'](this['instanceName']+'\x20('+this[_0x591c21(0x584)][_0x591c21(0x7a3)]+'):\x20Flow\x20\x27'+_0x11b6fc['_id']+_0x591c21(0x4b1)),_0x53aff2='Flow\x20\x27'+_0x11b6fc[_0x591c21(0x29b)]+_0x591c21(0x4b1),new m(_0x53aff2);let _0x5bc26a=await this[_0x591c21(0x1eb)](_0x2f39d8,_0x1013f2[_0x591c21(0x484)],_0x25e673['changeVariables']);if(_0x5bc26a){this[_0x591c21(0x5e7)][_0x591c21(0x6a3)](this[_0x591c21(0x29c)]+'\x20('+this['instance'][_0x591c21(0x7a3)]+_0x591c21(0x63d));let _0x5a25aa=await this['NextBlock'](_0x5bc26a);return _0x5a25aa&&await this[_0x591c21(0x7b3)](_0x5bc26a,_0x5a25aa),{'message':_0x591c21(0x874)+_0x25e673[_0x591c21(0x61e)]};}}catch(_0x10e55b){if(this['logger'][_0x591c21(0x830)](this[_0x591c21(0x29c)]+'\x20('+this[_0x591c21(0x584)]['wuid']+_0x591c21(0x813)+(_0x10e55b instanceof Error?_0x10e55b[_0x591c21(0x80a)]:JSON[_0x591c21(0x34b)](_0x10e55b,null,0x2))),_0x53aff2=_0x10e55b instanceof Error?_0x10e55b[_0x591c21(0x80a)]:JSON['stringify'](_0x10e55b,null,0x2),_0x53aff2)throw new m(_0x591c21(0x25c)+_0x53aff2);}}async[a0_0xf2a334(0x24b)](_0x156670,_0x5c5b2b,_0x576dd7){const _0x164823=a0_0xf2a334;let _0x2904b4=null;try{if(!this[_0x164823(0x580)]?.[_0x164823(0x5bd)][_0x164823(0x3f8)])throw new m(_0x164823(0x68f));if(this[_0x164823(0x5e7)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x164823(0x7a3)]+_0x164823(0x23c)),_0x5c5b2b){let _0x5a6e76=(await this[_0x164823(0x56e)]({'numbers':[_0x5c5b2b]}))[0x0];if(!_0x5a6e76[_0x164823(0x441)]&&!(0x0,w['isJidGroup'])(_0x5a6e76[_0x164823(0x484)])&&!_0x5a6e76[_0x164823(0x484)]['includes'](_0x164823(0x497)))throw _0x2904b4=JSON['stringify'](_0x5a6e76,null,0x2),new m(_0x5a6e76);_0x5c5b2b=_0x5a6e76[_0x164823(0x484)];}else _0x5c5b2b||(_0x5c5b2b=(0x0,Q['v4'])());let _0x5558e7=await this[_0x164823(0x677)][_0x164823(0x1e8)][_0x164823(0x18a)]({'where':{'_id':_0x156670}});if(!_0x5558e7||!_0x5558e7[_0x164823(0x8a8)]?.['includes'](this['instance'][_0x164823(0x7a3)]))throw this['logger'][_0x164823(0x830)](this['instanceName']+'\x20('+this['instance'][_0x164823(0x7a3)]+_0x164823(0x65a)+_0x156670+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x164823(0x68e)+_0x156670+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x39475b=await this[_0x164823(0x1eb)](_0x5558e7,_0x5c5b2b,null);if(_0x39475b){this[_0x164823(0x5e7)]['verbose'](this['instanceName']+'\x20('+this[_0x164823(0x584)][_0x164823(0x7a3)]+_0x164823(0x3ef));let _0x8cd830;if(_0x576dd7){let _0x36186d=_0x39475b[_0x164823(0x1c9)][_0x164823(0x5c4)],_0x388b99=this['flattenObject'](_0x576dd7);Object[_0x164823(0x58a)](_0x36186d,_0x388b99),_0x39475b[_0x164823(0x1c9)]['realVariables']=_0x36186d,_0x8cd830={'error':!0x1,'apiResponse':_0x576dd7};}let _0x333456=await this[_0x164823(0x48a)](_0x39475b);return _0x333456&&await this[_0x164823(0x7b3)](_0x39475b,_0x333456),{'message':'Flow\x20iniciado'};}}catch(_0x286f65){if(this[_0x164823(0x5e7)][_0x164823(0x830)](this[_0x164823(0x29c)]+'\x20('+this['instance'][_0x164823(0x7a3)]+_0x164823(0x813)+(_0x286f65 instanceof Error?_0x286f65['message']:JSON[_0x164823(0x34b)](_0x286f65,null,0x2))),_0x2904b4=_0x286f65 instanceof Error?_0x286f65[_0x164823(0x80a)]:JSON[_0x164823(0x34b)](_0x286f65,null,0x2),_0x2904b4)throw new m(_0x164823(0x25c)+_0x2904b4);}}async[a0_0xf2a334(0x2f8)](_0x420da0){const _0x4a2904=a0_0xf2a334;try{let _0x9c2873={'remoteJid':_0x420da0,'status':'open'},_0x2a13e9={'status':_0x4a2904(0x561)},_0x1f08e4=await this[_0x4a2904(0x677)][_0x4a2904(0x3ff)][_0x4a2904(0x362)](_0x9c2873,_0x2a13e9,this[_0x4a2904(0x584)][_0x4a2904(0x7a3)]);return this['logger'][_0x4a2904(0x6a3)](this[_0x4a2904(0x29c)]+'\x20('+this[_0x4a2904(0x584)]['wuid']+_0x4a2904(0x758)),_0x1f08e4;}catch(_0x4b95a5){throw this[_0x4a2904(0x5e7)][_0x4a2904(0x830)](this[_0x4a2904(0x29c)]+'\x20('+this['instance'][_0x4a2904(0x7a3)]+_0x4a2904(0x438)+_0x4b95a5[_0x4a2904(0x80a)]),_0x4b95a5;}}async[a0_0xf2a334(0x1eb)](_0x311e78,_0x38cb76,_0x23a802){const _0x40c465=a0_0xf2a334;this['logger'][_0x40c465(0x6a3)](this[_0x40c465(0x29c)]+'\x20('+this[_0x40c465(0x584)]['wuid']+_0x40c465(0x2a8)),await this[_0x40c465(0x2f8)](_0x38cb76);try{let _0xa4ce4c=require(_0x40c465(0x3a7))[_0x40c465(0x880)],_0x4241e2=Date[_0x40c465(0x5eb)](),_0x373201='start',_0x320540={},_0x22bd55={},_0x1dac98=this[_0x40c465(0x580)][_0x40c465(0x633)][_0x40c465(0x556)](_0x3595ec=>_0x3595ec['_id']===_0x311e78[_0x40c465(0x29b)]?.[_0x40c465(0x20e)]()),_0x2f03f2=_0x1dac98?.['minutesToClose']??_0x311e78['minutesToClose']??0x0,_0x15c89b=_0x1dac98?.[_0x40c465(0x871)]??_0x311e78[_0x40c465(0x871)]??!0x1,_0xadef0a={'flowId':_0x311e78['_id'],..._0x311e78,'chatLog':null},_0x16befb=await this['variablesToObject'](_0xadef0a[_0x40c465(0x613)]),_0x5a82dc=await this[_0x40c465(0x725)](_0x38cb76),_0x11d94e={..._0x16befb,..._0x5a82dc,'_remoteJid':_0x38cb76},_0x3cf12c={'lastReceivedMessage':_0x320540,'lastSendMessage':_0x22bd55,'lastBlockId':_0x373201,'lastCondition':!0x0,'realVariables':_0x11d94e};_0xadef0a[_0x40c465(0x1c9)]=_0x3cf12c,_0xadef0a[_0x40c465(0x1c9)][_0x40c465(0x5c4)]={..._0x11d94e,..._0x23a802},delete _0xadef0a[_0x40c465(0x29b)],_0xadef0a[_0x40c465(0x29b)]=new _0xa4ce4c(),_0xadef0a['lastInteraction']=_0x4241e2,_0xadef0a[_0x40c465(0x7cb)]='open',_0xadef0a[_0x40c465(0x61e)]=_0x38cb76,_0xadef0a[_0x40c465(0x20c)]=_0x2f03f2,_0xadef0a[_0x40c465(0x871)]=_0x15c89b,_0xadef0a[_0x40c465(0x29b)]=_0x311e78[_0x40c465(0x29b)];let _0x1bfaa9=await this[_0x40c465(0x677)][_0x40c465(0x3ff)][_0x40c465(0x32f)](_0xadef0a['_id'],_0xadef0a,this[_0x40c465(0x584)]['wuid']);return this[_0x40c465(0x5e7)][_0x40c465(0x6a3)](this[_0x40c465(0x29c)]+'\x20('+this[_0x40c465(0x584)][_0x40c465(0x7a3)]+_0x40c465(0x532)),_0x1bfaa9?_0xadef0a:null;}catch(_0x45e72c){let _0x5516b6='Erro\x20ao\x20copiar\x20o\x20documento',_0xa38c47=_0x45e72c instanceof Error?_0x45e72c[_0x40c465(0x80a)]:typeof _0x45e72c=='object'?JSON[_0x40c465(0x34b)](_0x45e72c):_0x45e72c,_0x2d2f83=_0x5516b6+':\x20'+_0xa38c47;throw this[_0x40c465(0x5e7)]['error'](this['instanceName']+'\x20('+this[_0x40c465(0x584)][_0x40c465(0x7a3)]+_0x40c465(0x62f)+_0x2d2f83),new m(_0x2d2f83);}}async[a0_0xf2a334(0x72f)](_0xf463ec){const _0x2d9f70=a0_0xf2a334;try{this[_0x2d9f70(0x5e7)][_0x2d9f70(0x6a3)](this[_0x2d9f70(0x29c)]+'\x20('+this[_0x2d9f70(0x584)][_0x2d9f70(0x7a3)]+_0x2d9f70(0x837)),this[_0x2d9f70(0x5e7)][_0x2d9f70(0x6a3)](this[_0x2d9f70(0x29c)]+'\x20('+this[_0x2d9f70(0x584)][_0x2d9f70(0x7a3)]+_0x2d9f70(0x555)+_0xf463ec);let _0x1ddef4={'where':{'_id':_0xf463ec}};return await this[_0x2d9f70(0x677)]['flowConversation'][_0x2d9f70(0x18a)](_0x1ddef4,this[_0x2d9f70(0x584)][_0x2d9f70(0x7a3)]);}catch(_0x53332d){let _0x49155c=_0x2d9f70(0x2b5),_0x291957=_0x53332d instanceof Error?_0x53332d[_0x2d9f70(0x80a)]:typeof _0x53332d=='object'?JSON[_0x2d9f70(0x34b)](_0x53332d):_0x53332d,_0xf459dc=_0x49155c+':\x20'+_0x291957;throw this['logger'][_0x2d9f70(0x830)](this[_0x2d9f70(0x29c)]+'\x20('+this[_0x2d9f70(0x584)][_0x2d9f70(0x7a3)]+_0x2d9f70(0x62f)+_0xf459dc),new m(_0xf459dc);}}async[a0_0xf2a334(0x72a)](_0x403d6b){const _0x2412d1=a0_0xf2a334;try{return this[_0x2412d1(0x5e7)]['verbose'](this[_0x2412d1(0x29c)]+'\x20('+this['instance'][_0x2412d1(0x7a3)]+_0x2412d1(0x46e)),await this[_0x2412d1(0x677)][_0x2412d1(0x3ff)][_0x2412d1(0x556)](_0x403d6b,this[_0x2412d1(0x584)][_0x2412d1(0x7a3)]);}catch(_0x49cb98){let _0x207a99=_0x2412d1(0x6af),_0x2c60a2=_0x49cb98 instanceof Error?_0x49cb98[_0x2412d1(0x80a)]:typeof _0x49cb98=='object'?JSON[_0x2412d1(0x34b)](_0x49cb98):_0x49cb98,_0x11369a=_0x207a99+':\x20'+_0x2c60a2;throw this[_0x2412d1(0x5e7)][_0x2412d1(0x830)](this[_0x2412d1(0x29c)]+'\x20('+this['instance'][_0x2412d1(0x7a3)]+_0x2412d1(0x62f)+_0x11369a),new m(_0x11369a);}}async['deleteConversation'](_0x517b53){const _0x4a69bf=a0_0xf2a334;try{return this[_0x4a69bf(0x5e7)][_0x4a69bf(0x6a3)](this['instanceName']+'\x20('+this[_0x4a69bf(0x584)]['wuid']+'):\x20Deletando\x20conversa...'),this[_0x4a69bf(0x5e7)][_0x4a69bf(0x6a3)](this[_0x4a69bf(0x29c)]+'\x20('+this[_0x4a69bf(0x584)][_0x4a69bf(0x7a3)]+_0x4a69bf(0x7f4)+_0x517b53),(await this[_0x4a69bf(0x677)]['flowConversation']['deleteOne']({'where':{'_id':_0x517b53[_0x4a69bf(0x29b)]}},this[_0x4a69bf(0x584)][_0x4a69bf(0x7a3)]))[_0x4a69bf(0x706)]===0x0?{'message':_0x4a69bf(0x2b0)}:{'message':_0x4a69bf(0x257)};}catch(_0x1f9a46){let _0x3b61ab=_0x4a69bf(0x4fe),_0x5dcc68=_0x1f9a46 instanceof Error?_0x1f9a46[_0x4a69bf(0x80a)]:typeof _0x1f9a46==_0x4a69bf(0x524)?JSON[_0x4a69bf(0x34b)](_0x1f9a46):_0x1f9a46,_0x3d3c8a=_0x3b61ab+':\x20'+_0x5dcc68;throw this['logger'][_0x4a69bf(0x830)](this[_0x4a69bf(0x29c)]+'\x20('+this[_0x4a69bf(0x584)][_0x4a69bf(0x7a3)]+'):\x20'+_0x3d3c8a),new m(_0x3d3c8a);}}async[a0_0xf2a334(0x7e3)](_0x2b5035){const _0x5e14c9=a0_0xf2a334;try{let {_id:_0x2432e4,chatLog:_0x4fa047,status:_0x260086}=_0x2b5035;if(!_0x2432e4)return{'message':_0x5e14c9(0x1a7)};let _0x5a3c5a={};if(_0x260086!==void 0x0&&(_0x5a3c5a[_0x5e14c9(0x7cb)]=_0x260086),Object[_0x5e14c9(0x3e5)](_0x5a3c5a)[_0x5e14c9(0x250)]===0x0)return{'message':_0x5e14c9(0x824)};let _0x2a3fc5=await this[_0x5e14c9(0x677)][_0x5e14c9(0x3ff)]['updateOne'](_0x2432e4,_0x5a3c5a,this[_0x5e14c9(0x584)]['wuid']);return _0x2a3fc5||{'message':_0x5e14c9(0x550)};}catch(_0x4e1432){let _0xa6c63=_0x5e14c9(0x407),_0x58b9e6=_0x4e1432 instanceof Error?_0x4e1432[_0x5e14c9(0x80a)]:typeof _0x4e1432=='object'?JSON['stringify'](_0x4e1432):_0x4e1432,_0x14aed6=_0xa6c63+':\x20'+_0x58b9e6;throw this[_0x5e14c9(0x5e7)][_0x5e14c9(0x830)](this[_0x5e14c9(0x29c)]+'\x20('+this[_0x5e14c9(0x584)][_0x5e14c9(0x7a3)]+_0x5e14c9(0x62f)+_0x14aed6),new m(_0x14aed6);}}async[a0_0xf2a334(0x67a)](_0x1ce93f){const _0x3d062d=a0_0xf2a334;try{_0x1ce93f['_id']=this['createJid'](_0x1ce93f['_id']);let _0x333438=await this[_0x3d062d(0x677)][_0x3d062d(0x2fb)][_0x3d062d(0x18a)]({'where':{'_id':_0x1ce93f[_0x3d062d(0x29b)]}},this[_0x3d062d(0x584)][_0x3d062d(0x7a3)]);if(!_0x333438)throw new m(_0x3d062d(0x841));let {_id:_0x2f5a06,leadInfo:_0xf44b56}=_0x1ce93f;if(!_0x2f5a06)throw new Error(_0x3d062d(0x7d4));if(_0x1ce93f[_0x3d062d(0x44e)]===_0x3d062d(0x3f9))return await this[_0x3d062d(0x436)](_0x1ce93f[_0x3d062d(0x29b)]),await this[_0x3d062d(0x677)][_0x3d062d(0x2fb)]['delete']({'where':{'_id':_0x1ce93f[_0x3d062d(0x29b)]}},this[_0x3d062d(0x584)]['wuid']),await this['repository'][_0x3d062d(0x80a)][_0x3d062d(0x44e)]({'where':{'key':{'remoteJid':_0x1ce93f['_id']}}},this[_0x3d062d(0x584)]['wuid']),_0x1ce93f=await this[_0x3d062d(0x677)]['chat'][_0x3d062d(0x32f)]({'where':{'_id':_0x1ce93f[_0x3d062d(0x29b)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x3d062d(0x584)]['wuid']),F(this[_0x3d062d(0x29c)],_0x3d062d(0x806),{'chat':_0x1ce93f}),{'message':_0x3d062d(0x3b4)};if(_0x1ce93f[_0x3d062d(0x44e)]===_0x3d062d(0x208))return await this[_0x3d062d(0x677)][_0x3d062d(0x80a)][_0x3d062d(0x44e)]({'where':{'key':{'remoteJid':_0x1ce93f[_0x3d062d(0x29b)]}}},this[_0x3d062d(0x584)]['wuid']),_0x1ce93f=await this[_0x3d062d(0x677)]['chat'][_0x3d062d(0x32f)]({'where':{'_id':_0x1ce93f[_0x3d062d(0x29b)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x3d062d(0x584)][_0x3d062d(0x7a3)]),F(this[_0x3d062d(0x29c)],_0x3d062d(0x806),{'chat':_0x1ce93f}),{'message':_0x3d062d(0x6a1)};let _0x5d01df=(_0x1ceef1,_0x860fd6,_0x3d8ec3)=>{const _0x4a0299=_0x3d062d;_0x1ceef1&&_0x3d8ec3[_0x4a0299(0x3b5)](_0x48f1ee=>{const _0x5bda97=_0x4a0299;_0x1ceef1[_0x48f1ee]!==void 0x0&&(_0x860fd6[_0x5bda97(0x8b1)+_0x48f1ee]=_0x1ceef1[_0x48f1ee]);});},_0x1ac3b3={};if('muteEndTime'in _0x1ce93f&&(this[_0x3d062d(0x5e7)][_0x3d062d(0x6a3)](this[_0x3d062d(0x29c)]+'\x20('+this['instance'][_0x3d062d(0x7a3)]+_0x3d062d(0x19b)+_0x1ce93f[_0x3d062d(0x29b)]),_0x1ce93f[_0x3d062d(0x431)]=_0x1ce93f[_0x3d062d(0x431)]===0x0?null:-0x1,await this[_0x3d062d(0x90d)][_0x3d062d(0x2c4)]({'mute':_0x1ce93f[_0x3d062d(0x431)]},_0x1ce93f[_0x3d062d(0x29b)]),_0x1ac3b3[_0x3d062d(0x431)]=Number(_0x1ce93f[_0x3d062d(0x431)])),_0xf44b56&&(_0x5d01df(_0xf44b56,_0x1ac3b3,[_0x3d062d(0x81b),'nomecompleto',_0x3d062d(0x3b0),_0x3d062d(0x685),_0x3d062d(0x7cb),_0x3d062d(0x286),_0x3d062d(0x804),_0x3d062d(0x6b8),_0x3d062d(0x594),_0x3d062d(0x301),_0x3d062d(0x64f)]),Array[_0x3d062d(0x529)](_0xf44b56[_0x3d062d(0x910)])&&(_0x1ac3b3[_0x3d062d(0x1b4)]=_0xf44b56['customFields'][_0x3d062d(0x5b0)](_0x265647=>({'_id':_0x265647[_0x3d062d(0x29b)],'value':_0x265647['value']}))),_0x1ce93f[_0x3d062d(0x1df)][_0x3d062d(0x301)]!==void 0x0)){let _0xcc7acd=await this[_0x3d062d(0x677)][_0x3d062d(0x1c8)][_0x3d062d(0x556)]({'where':{}},this['instance'][_0x3d062d(0x7a3)]),_0x1f2b76=new Set(_0x1ce93f[_0x3d062d(0x1df)][_0x3d062d(0x301)]||[]),_0x2a3136=new Set(_0x1ce93f[_0x3d062d(0x1df)][_0x3d062d(0x301)]),_0x30a7eb=new Set(_0xcc7acd[_0x3d062d(0x5b0)](_0x28d360=>_0x28d360[_0x3d062d(0x29b)])),_0xce8ac0=[..._0x2a3136][_0x3d062d(0x3c9)](_0x579144=>!_0x1f2b76[_0x3d062d(0x711)](_0x579144)&&_0x30a7eb[_0x3d062d(0x711)](_0x579144)),_0x18c263=[..._0x1f2b76][_0x3d062d(0x3c9)](_0x31a794=>!_0x2a3136['has'](_0x31a794));if(_0x1ac3b3[_0x3d062d(0x440)]=[..._0x1f2b76],_0x333438&&!_0x333438[_0x3d062d(0x422)]){for(let _0x42506c of _0xce8ac0)await this[_0x3d062d(0x198)](_0x42506c,_0x1ce93f[_0x3d062d(0x29b)]),_0x1f2b76['add'](_0x42506c);for(let _0x1c6fac of _0x18c263)await this[_0x3d062d(0x5d8)](_0x1c6fac,_0x1ce93f[_0x3d062d(0x29b)]),_0x1f2b76[_0x3d062d(0x44e)](_0x1c6fac);}}if(_0x1ce93f[_0x3d062d(0x82a)]!==void 0x0&&(_0x1ac3b3[_0x3d062d(0x82a)]=Number(_0x1ce93f[_0x3d062d(0x82a)])),Object[_0x3d062d(0x3e5)](_0x1ac3b3)[_0x3d062d(0x250)]===0x0)throw new Error('Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.');let _0x207dad=await this['repository'][_0x3d062d(0x2fb)][_0x3d062d(0x32f)]({'where':{'_id':_0x1ce93f[_0x3d062d(0x29b)]}},_0x1ac3b3,this['instance'][_0x3d062d(0x7a3)]);return _0x207dad&&F(this[_0x3d062d(0x29c)],_0x3d062d(0x806),{'chat':_0x207dad}),_0x207dad?(this[_0x3d062d(0x5e7)][_0x3d062d(0x6a3)](this[_0x3d062d(0x29c)]+'\x20('+this[_0x3d062d(0x584)]['wuid']+'):\x20'+JSON[_0x3d062d(0x34b)](_0x207dad,null,0x2)),_0x207dad):{'message':_0x3d062d(0x3d4)};}catch(_0x2c51f7){let _0x5d4d96=_0x3d062d(0x6b4),_0x13edb2=_0x2c51f7 instanceof Error?_0x2c51f7[_0x3d062d(0x80a)]:typeof _0x2c51f7==_0x3d062d(0x524)?JSON[_0x3d062d(0x34b)](_0x2c51f7):_0x2c51f7,_0x15641d=_0x5d4d96+':\x20'+_0x13edb2;throw this[_0x3d062d(0x5e7)]['error'](this[_0x3d062d(0x29c)]+'\x20('+this[_0x3d062d(0x584)][_0x3d062d(0x7a3)]+'):\x20'+_0x15641d),new m(_0x15641d);}}async['AddChatLabel'](_0x38d3d5,_0x3ff168){const _0x178ff8=a0_0xf2a334;try{await this[_0x178ff8(0x90d)][_0x178ff8(0x744)](_0x3ff168,_0x38d3d5),this[_0x178ff8(0x5e7)][_0x178ff8(0x5b4)](this[_0x178ff8(0x29c)]+'\x20('+this[_0x178ff8(0x584)][_0x178ff8(0x7a3)]+_0x178ff8(0x305)+_0x38d3d5+_0x178ff8(0x7b5)+_0x3ff168+'\x20com\x20sucesso.');}catch(_0x55f602){this[_0x178ff8(0x5e7)]['error']('Erro\x20ao\x20adicionar\x20label\x20'+_0x38d3d5+_0x178ff8(0x571)+_0x3ff168+':\x20'+_0x55f602);}}async['RemoveChatLabel'](_0x603848,_0x1ceba4){const _0x3e3435=a0_0xf2a334;try{await this[_0x3e3435(0x90d)][_0x3e3435(0x2b2)](_0x1ceba4,_0x603848),this[_0x3e3435(0x5e7)][_0x3e3435(0x5b4)](this[_0x3e3435(0x29c)]+'\x20('+this[_0x3e3435(0x584)][_0x3e3435(0x7a3)]+_0x3e3435(0x305)+_0x603848+_0x3e3435(0x68d)+_0x1ceba4+_0x3e3435(0x224));}catch(_0x9dc268){this[_0x3e3435(0x5e7)][_0x3e3435(0x830)]('Erro\x20ao\x20remover\x20label\x20'+_0x603848+_0x3e3435(0x89b)+_0x1ceba4+':\x20'+_0x9dc268);}}async[a0_0xf2a334(0x2ce)](_0x26fae1){const _0x11e4ae=a0_0xf2a334;try{let _0x48e7b6=await this[_0x11e4ae(0x677)][_0x11e4ae(0x587)][_0x11e4ae(0x471)](this[_0x11e4ae(0x584)][_0x11e4ae(0x7a3)]),_0x54ee54=_0x26fae1[_0x11e4ae(0x29b)]?_0x48e7b6['agents'][_0x11e4ae(0x8c1)](_0x298970=>_0x298970[_0x11e4ae(0x29b)]===_0x26fae1['_id']):-0x1;if(_0x26fae1['delete']&&_0x54ee54>-0x1)_0x48e7b6[_0x11e4ae(0x7fb)][_0x11e4ae(0x4cf)](_0x54ee54,0x1);else{if(_0x54ee54>-0x1){let _0x3bdbe7=_0x48e7b6[_0x11e4ae(0x7fb)][_0x54ee54];_0x26fae1['fone']&&(_0x3bdbe7[_0x11e4ae(0x515)]=_0x26fae1['fone']),_0x26fae1['name']&&(_0x3bdbe7['name']=_0x26fae1['name']),_0x26fae1[_0x11e4ae(0x3b0)]&&(_0x3bdbe7[_0x11e4ae(0x3b0)]=_0x26fae1[_0x11e4ae(0x3b0)]),_0x26fae1[_0x11e4ae(0x303)]&&(_0x3bdbe7[_0x11e4ae(0x303)]=_0x26fae1['role']);}else _0x48e7b6[_0x11e4ae(0x7fb)]['push']({'_id':_0x26fae1['_id']||new pe[(_0x11e4ae(0x59e))][(_0x11e4ae(0x17a))][(_0x11e4ae(0x880))]()['toString'](),'fone':_0x26fae1[_0x11e4ae(0x515)],'name':_0x26fae1[_0x11e4ae(0x76f)],'email':_0x26fae1['email'],'role':_0x26fae1['role']});}let _0x58a339={'agents':_0x48e7b6[_0x11e4ae(0x7fb)]},_0x23f202=await this[_0x11e4ae(0x677)][_0x11e4ae(0x587)][_0x11e4ae(0x227)](_0x58a339,this[_0x11e4ae(0x584)]['wuid']);return this['AutomateSystem']=_0x23f202,this[_0x11e4ae(0x5e7)][_0x11e4ae(0x6a3)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x11e4ae(0x6bc)),this[_0x11e4ae(0x5e7)][_0x11e4ae(0x6a3)](this[_0x11e4ae(0x29c)]+'\x20('+this[_0x11e4ae(0x584)][_0x11e4ae(0x7a3)]+_0x11e4ae(0x62f)+this[_0x11e4ae(0x580)]),_0x23f202;}catch(_0xe3b59a){let _0x4e3b2d=_0x11e4ae(0x915),_0x1ec6f4=_0xe3b59a instanceof Error?_0xe3b59a[_0x11e4ae(0x80a)]:typeof _0xe3b59a==_0x11e4ae(0x524)?JSON[_0x11e4ae(0x34b)](_0xe3b59a):_0xe3b59a,_0x24f8ec=_0x4e3b2d+':\x20'+_0x1ec6f4;throw this[_0x11e4ae(0x5e7)][_0x11e4ae(0x830)](this[_0x11e4ae(0x29c)]+'\x20('+this[_0x11e4ae(0x584)][_0x11e4ae(0x7a3)]+_0x11e4ae(0x62f)+_0x24f8ec),new m(_0x24f8ec);}}async[a0_0xf2a334(0x360)](_0x2eca01){const _0x49af06=a0_0xf2a334;try{let _0x1c5176=await this[_0x49af06(0x677)]['automateSystem'][_0x49af06(0x471)](this['instance'][_0x49af06(0x7a3)]),_0x45d011=_0x2eca01[_0x49af06(0x29b)]?_0x1c5176[_0x49af06(0x910)][_0x49af06(0x8c1)](_0x4edcae=>_0x4edcae['_id']===_0x2eca01['_id']):-0x1,_0x40162c=!0x1,_0x5afa82=_0x1c5176[_0x49af06(0x910)]['some'](_0x565823=>_0x565823[_0x49af06(0x48f)]===_0x2eca01[_0x49af06(0x48f)]);if(_0x2eca01[_0x49af06(0x44e)]&&_0x45d011>-0x1)_0x1c5176[_0x49af06(0x910)][_0x49af06(0x4cf)](_0x45d011,0x1),_0x40162c=!0x0;else{if(_0x45d011>-0x1){if(_0x1c5176[_0x49af06(0x910)]['some'](_0xe5c45f=>_0xe5c45f['name']===_0x2eca01['name']&&_0xe5c45f['_id']!==_0x2eca01[_0x49af06(0x29b)]))throw new Error(_0x49af06(0x5e2));let _0x5a855d=_0x1c5176[_0x49af06(0x910)][_0x45d011];_0x2eca01[_0x49af06(0x48f)]&&(_0x5afa82||!Number[_0x49af06(0x794)](_0x2eca01[_0x49af06(0x48f)]))&&(_0x5a855d['order']=_0x2eca01[_0x49af06(0x48f)],_0x40162c=!0x0),_0x2eca01['name']&&(_0x5a855d[_0x49af06(0x76f)]=_0x2eca01[_0x49af06(0x76f)]);}else{if(_0x1c5176[_0x49af06(0x910)]['some'](_0x112dc1=>_0x112dc1['name']===_0x2eca01[_0x49af06(0x76f)]&&_0x112dc1[_0x49af06(0x29b)]!==_0x2eca01['_id']))throw new Error(_0x49af06(0x5e2));_0x1c5176[_0x49af06(0x910)][_0x49af06(0x355)]({'_id':_0x2eca01[_0x49af06(0x29b)]||new pe[(_0x49af06(0x59e))]['Types'][(_0x49af06(0x880))]()[_0x49af06(0x20e)](),'order':_0x2eca01[_0x49af06(0x48f)],'name':_0x2eca01['name']}),_0x40162c=!0x0;}}if(_0x40162c){_0x1c5176[_0x49af06(0x910)][_0x49af06(0x53f)]((_0x1ff3d6,_0x4347c1)=>_0x1ff3d6['order']>_0x4347c1[_0x49af06(0x48f)]?0x1:_0x4347c1[_0x49af06(0x48f)]>_0x1ff3d6[_0x49af06(0x48f)]?-0x1:0x0);for(let _0x85633=0x0;_0x85633<_0x1c5176[_0x49af06(0x910)]['length'];_0x85633++)_0x1c5176[_0x49af06(0x910)][_0x85633][_0x49af06(0x48f)]=_0x85633+0x1;}let _0xdc145=await this[_0x49af06(0x677)][_0x49af06(0x587)][_0x49af06(0x227)](_0x1c5176,this[_0x49af06(0x584)][_0x49af06(0x7a3)]);return this[_0x49af06(0x580)]=_0xdc145,this['logger'][_0x49af06(0x6a3)](this[_0x49af06(0x29c)]+'\x20('+this['instance']['wuid']+'):\x20debug\x20alterando\x20this.AutomateSystem'),this['logger'][_0x49af06(0x6a3)](this[_0x49af06(0x29c)]+'\x20('+this[_0x49af06(0x584)]['wuid']+_0x49af06(0x62f)+this['AutomateSystem']),_0xdc145;}catch(_0x4d64aa){let _0x5a913e=_0x49af06(0x371),_0x4ee5b9=_0x4d64aa instanceof Error?_0x4d64aa['message']:typeof _0x4d64aa==_0x49af06(0x524)?JSON[_0x49af06(0x34b)](_0x4d64aa):_0x4d64aa,_0x3d9a63=_0x5a913e+':\x20'+_0x4ee5b9;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x49af06(0x584)][_0x49af06(0x7a3)]+'):\x20'+_0x3d9a63),new m(_0x3d9a63);}}async[a0_0xf2a334(0x6ee)](_0x4a8a91){const _0x3335cf=a0_0xf2a334;try{let _0x28cbd7=await this[_0x3335cf(0x677)]['automateSystem']['findOrCreate'](this[_0x3335cf(0x584)][_0x3335cf(0x7a3)]),_0x585666=_0x28cbd7?.['autoCompleteMessages']?.[_0x3335cf(0x8c1)](_0x59860f=>_0x59860f[_0x3335cf(0x29b)]===_0x4a8a91?.['_id']);if(_0x4a8a91?.[_0x3335cf(0x44e)])_0x585666>-0x1&&_0x28cbd7?.[_0x3335cf(0x408)]?.['splice'](_0x585666,0x1);else{if(_0x585666>-0x1){let _0x3064e2=_0x28cbd7['autoCompleteMessages'][_0x585666];_0x3064e2[_0x3335cf(0x48f)]=_0x4a8a91?.['order']||_0x3064e2['order'],_0x3064e2[_0x3335cf(0x17c)]=_0x4a8a91?.[_0x3335cf(0x17c)]||_0x3064e2[_0x3335cf(0x17c)],_0x3064e2[_0x3335cf(0x80a)]=_0x4a8a91?.[_0x3335cf(0x80a)]||_0x3064e2[_0x3335cf(0x80a)];}else{let _0x4179e1={'_id':_0x4a8a91?.[_0x3335cf(0x29b)]||new pe[(_0x3335cf(0x59e))]['Types'][(_0x3335cf(0x880))]()[_0x3335cf(0x20e)](),'order':_0x4a8a91?.[_0x3335cf(0x48f)],'command':_0x4a8a91?.[_0x3335cf(0x17c)],'message':_0x4a8a91?.['message']};_0x28cbd7?.[_0x3335cf(0x408)]?.['push'](_0x4179e1);}}_0x28cbd7?.['autoCompleteMessages']?.['sort']((_0x79c5bf,_0xa9d9d4)=>_0x79c5bf[_0x3335cf(0x48f)]-_0xa9d9d4[_0x3335cf(0x48f)]);let _0x27e47f=await this[_0x3335cf(0x677)][_0x3335cf(0x587)]['update'](_0x28cbd7,this[_0x3335cf(0x584)][_0x3335cf(0x7a3)]);return this['AutomateSystem']=_0x27e47f,this[_0x3335cf(0x5e7)][_0x3335cf(0x6a3)](this['instanceName']+'\x20('+this['instance'][_0x3335cf(0x7a3)]+_0x3335cf(0x82c)),_0x27e47f;}catch(_0x3a3e05){let _0x1500ef='Erro\x20ao\x20tentar\x20autoCompleteMessages',_0x809474=_0x3a3e05 instanceof Error?_0x3a3e05[_0x3335cf(0x80a)]:typeof _0x3a3e05=='object'?JSON[_0x3335cf(0x34b)](_0x3a3e05):_0x3a3e05,_0x3075fc=_0x1500ef+':\x20'+_0x809474;throw this[_0x3335cf(0x5e7)][_0x3335cf(0x830)](this[_0x3335cf(0x29c)]+'\x20('+this[_0x3335cf(0x584)]['wuid']+_0x3335cf(0x62f)+_0x3075fc),new m(_0x3075fc);}}async[a0_0xf2a334(0x41b)](_0x5ed87e){const _0x2067b0=a0_0xf2a334;try{let _0x5d1caa=await this[_0x2067b0(0x677)][_0x2067b0(0x587)][_0x2067b0(0x471)](this['instance']['wuid']);if(!_0x5d1caa)throw new Error('Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.');let _0x21697b={'_id':_0x5d1caa[_0x2067b0(0x29b)],'flowConfig':{'enabled':_0x5ed87e[_0x2067b0(0x3f8)]??_0x5d1caa[_0x2067b0(0x5bd)][_0x2067b0(0x3f8)],'ignoreGroups':_0x5ed87e[_0x2067b0(0x592)]??_0x5d1caa[_0x2067b0(0x5bd)]['ignoreGroups'],'stopConversation':_0x5ed87e[_0x2067b0(0x553)][_0x2067b0(0x66c)]()??_0x5d1caa[_0x2067b0(0x5bd)]['stopConversation'][_0x2067b0(0x66c)](),'stopMinutes':_0x5ed87e[_0x2067b0(0x2c1)]??_0x5d1caa['flowConfig']['stopMinutes'],'stopWhenYouSendMsg':_0x5ed87e[_0x2067b0(0x15f)]??_0x5d1caa['flowConfig'][_0x2067b0(0x15f)]}},_0x1e805d=await this[_0x2067b0(0x677)][_0x2067b0(0x587)][_0x2067b0(0x227)](_0x21697b,this['instance'][_0x2067b0(0x7a3)]);return this['AutomateSystem']=_0x1e805d,this['logger'][_0x2067b0(0x6a3)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20alterando\x20this.AutomateSystem'),this[_0x2067b0(0x5e7)][_0x2067b0(0x6a3)](this[_0x2067b0(0x29c)]+'\x20('+this[_0x2067b0(0x584)]['wuid']+'):\x20'+this[_0x2067b0(0x580)]),setTimeout(()=>this[_0x2067b0(0x5e3)](),0x7d0),_0x1e805d;}catch(_0x56cc5e){let _0x1fdba1=_0x2067b0(0x366),_0x4ff924=_0x56cc5e instanceof Error?_0x56cc5e[_0x2067b0(0x80a)]:typeof _0x56cc5e==_0x2067b0(0x524)?JSON[_0x2067b0(0x34b)](_0x56cc5e):_0x56cc5e,_0x4a1e42=_0x1fdba1+':\x20'+_0x4ff924;throw this[_0x2067b0(0x5e7)][_0x2067b0(0x830)](this['instanceName']+'\x20('+this[_0x2067b0(0x584)][_0x2067b0(0x7a3)]+_0x2067b0(0x62f)+_0x4a1e42),new m(_0x4a1e42);}}async[a0_0xf2a334(0x3f2)](){const _0x5e8032=a0_0xf2a334;try{let _0x515d92=await this[_0x5e8032(0x677)][_0x5e8032(0x587)][_0x5e8032(0x471)](this[_0x5e8032(0x584)]['wuid']);return this[_0x5e8032(0x580)]=_0x515d92,_0x515d92;}catch(_0x282dca){let _0x3c6c29=_0x5e8032(0x828),_0x1014d8=_0x282dca instanceof Error?_0x282dca[_0x5e8032(0x80a)]:typeof _0x282dca==_0x5e8032(0x524)?JSON[_0x5e8032(0x34b)](_0x282dca):_0x282dca,_0xc80ba1=_0x3c6c29+':\x20'+_0x1014d8;throw this[_0x5e8032(0x5e7)][_0x5e8032(0x830)](this['instanceName']+'\x20('+this[_0x5e8032(0x584)][_0x5e8032(0x7a3)]+'):\x20'+_0xc80ba1),new m(_0xc80ba1);}}async[a0_0xf2a334(0x7ff)](){const _0x1128e3=a0_0xf2a334;let _0x132010=(await import(_0x1128e3(0x6e9)))[_0x1128e3(0x59e)];this['queue']=new _0x132010({'concurrency':0x1});}async[a0_0xf2a334(0x3d7)](){const _0x295f96=a0_0xf2a334;this[_0x295f96(0x584)][_0x295f96(0x46f)][_0x295f96(0x51c)]&&clearTimeout(this['instance']['ScheduleMessage'][_0x295f96(0x51c)]),this[_0x295f96(0x584)][_0x295f96(0x46f)][_0x295f96(0x51c)]=setTimeout(()=>{this['checkAndRestartProcess']();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0xf2a334(0x3d5)](){const _0x13abef=a0_0xf2a334;let _0x3e9f03=this[_0x13abef(0x584)][_0x13abef(0x46f)][_0x13abef(0x620)];(_0x3e9f03===0x0||_0x3e9f03===null||Date[_0x13abef(0x5eb)]()-_0x3e9f03>=0x1d4c0)&&(this['logger'][_0x13abef(0x6a3)](this[_0x13abef(0x29c)]+'\x20('+this['instance'][_0x13abef(0x7a3)]+_0x13abef(0x4d0)),this[_0x13abef(0x584)]['ScheduleMessage'][_0x13abef(0x18c)]=null,this['instance']['ScheduleMessage'][_0x13abef(0x620)]=0x0,this[_0x13abef(0x584)][_0x13abef(0x46f)][_0x13abef(0x884)]=0x0,await this[_0x13abef(0x5e3)]());}async[a0_0xf2a334(0x5e3)](){const _0x12ddf2=a0_0xf2a334;this[_0x12ddf2(0x5e7)]['warn'](this[_0x12ddf2(0x29c)]+'\x20('+this[_0x12ddf2(0x584)][_0x12ddf2(0x7a3)]+'):\x20Procurando\x20mensagens\x20para\x20envio'),await this[_0x12ddf2(0x47a)]();let _0x536ff0=await this[_0x12ddf2(0x74e)]();_0x536ff0['length']>0x0&&(setTimeout(()=>this['checkAndRestartProcess'](),0x14*0x3e8),this[_0x12ddf2(0x5e7)][_0x12ddf2(0x25b)](this[_0x12ddf2(0x29c)]+'\x20('+this[_0x12ddf2(0x584)][_0x12ddf2(0x7a3)]+_0x12ddf2(0x510)),this[_0x12ddf2(0x4b4)][_0x12ddf2(0x1e4)](),this[_0x12ddf2(0x4b4)][_0x12ddf2(0x1c0)](()=>this[_0x12ddf2(0x6c9)](_0x536ff0)));let _0x35942d={'where':{'status':_0x12ddf2(0x197),'when':{'$gt':Date['now']()}}},_0x3ffbd0=await this[_0x12ddf2(0x677)][_0x12ddf2(0x638)][_0x12ddf2(0x18a)](_0x35942d,this[_0x12ddf2(0x584)][_0x12ddf2(0x7a3)]);_0x3ffbd0&&_0x3ffbd0[_0x12ddf2(0x4d8)]-Date['now']()<=0x6ddd00?this['instance'][_0x12ddf2(0x46f)]['delayMessage']=_0x3ffbd0[_0x12ddf2(0x4d8)]-Date['now']():this['instance'][_0x12ddf2(0x46f)][_0x12ddf2(0x884)]=(0x3c+Math['floor'](Math[_0x12ddf2(0x1cf)]()*0x3c))*0x3c*0x3e8,this['instance']['ScheduleMessage'][_0x12ddf2(0x884)]=Math[_0x12ddf2(0x4eb)](this[_0x12ddf2(0x584)][_0x12ddf2(0x46f)][_0x12ddf2(0x884)],0x1*0x2*0x3e8);let _0x102694=Math[_0x12ddf2(0x546)](this[_0x12ddf2(0x584)][_0x12ddf2(0x46f)][_0x12ddf2(0x884)]/0xea60);if(_0x3ffbd0){let _0x9a93d4=new Date(_0x3ffbd0[_0x12ddf2(0x4d8)])['toLocaleString']();this['logger'][_0x12ddf2(0x25b)](this[_0x12ddf2(0x29c)]+'\x20('+this[_0x12ddf2(0x584)][_0x12ddf2(0x7a3)]+_0x12ddf2(0x51e)+_0x9a93d4+_0x12ddf2(0x42d)+_0x102694+'\x20minutos');}else this[_0x12ddf2(0x5e7)][_0x12ddf2(0x25b)](this[_0x12ddf2(0x29c)]+'\x20('+this[_0x12ddf2(0x584)]['wuid']+_0x12ddf2(0x4a5)+_0x102694+'\x20minutos');setTimeout(()=>{const _0x123a45=_0x12ddf2;this[_0x123a45(0x5e3)]();},this[_0x12ddf2(0x584)][_0x12ddf2(0x46f)][_0x12ddf2(0x884)]);}async[a0_0xf2a334(0x74e)](){const _0x256865=a0_0xf2a334;this[_0x256865(0x5e7)]['warn'](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Procurando\x20PRONTAS\x20mensagens\x20para\x20envio');let _0x1ab53c=Date[_0x256865(0x5eb)]()-0xc*0x3c*0x3c*0x3e8,_0x241cf1={'where':{'status':{'$in':[_0x256865(0x197),'sending']},'$or':[{'when':{'$lte':Date[_0x256865(0x5eb)](),'$gte':_0x1ab53c}},{'when':0x0}]}},_0x1d231b=await this[_0x256865(0x677)][_0x256865(0x638)]['find'](_0x241cf1,this['instance']['wuid']);return this[_0x256865(0x5e7)][_0x256865(0x25b)](this['instanceName']+'\x20('+this[_0x256865(0x584)]['wuid']+'):\x20Mensagens\x20PRONTAS\x20para\x20envio\x20encontradas:\x20'+_0x1d231b[_0x256865(0x250)]),_0x1d231b;}async[a0_0xf2a334(0x6c9)](_0xabcec4){const _0x3b2655=a0_0xf2a334;this[_0x3b2655(0x5e7)][_0x3b2655(0x25b)](this[_0x3b2655(0x29c)]+'\x20('+this[_0x3b2655(0x584)]['wuid']+'):\x20Iniciando\x20processReadyMessages');let _0x495e81=0x3*0x3e8,_0x2851a3=0x8*0x3e8,_0x52142f=Math[_0x3b2655(0x7b4)](Math[_0x3b2655(0x1cf)]()*(_0x2851a3-_0x495e81+0x1))+_0x495e81,_0x144a9c=()=>this[_0x3b2655(0x809)][_0x3b2655(0x250)]===0x0?null:this[_0x3b2655(0x809)][_0x3b2655(0x535)]((_0x26977a,_0x27bfa4)=>(_0x26977a[_0x3b2655(0x48f)]??Number['MAX_SAFE_INTEGER'])<(_0x27bfa4[_0x3b2655(0x48f)]??Number[_0x3b2655(0x859)])?_0x26977a:_0x27bfa4,this[_0x3b2655(0x809)][0x0]);_0xabcec4=await this[_0x3b2655(0x74e)]();for(let _0x305091 of _0xabcec4){await this[_0x3b2655(0x3d7)]();let _0x2ffa3a=0x3*0x3e8,_0x5c2784={'_id':_0x305091[_0x3b2655(0x29b)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date['now']()-_0x2ffa3a}}]},_0x334236={'startSend':Date[_0x3b2655(0x5eb)](),'status':'sending'},_0x4f73a4=await this['repository'][_0x3b2655(0x638)][_0x3b2655(0x32f)](_0x5c2784,_0x334236,this[_0x3b2655(0x584)]['wuid']);if(this[_0x3b2655(0x809)]=_0x4f73a4[_0x3b2655(0x208)][_0x3b2655(0x3c9)](_0x1251ce=>!_0x1251ce[_0x3b2655(0x270)]),!_0x4f73a4){setTimeout(()=>this[_0x3b2655(0x3d5)](),0xa*0x3e8);continue;}if(this[_0x3b2655(0x584)][_0x3b2655(0x46f)]['processingGroup']=_0x4f73a4,!this['instance'][_0x3b2655(0x46f)][_0x3b2655(0x30f)]){this[_0x3b2655(0x5e7)][_0x3b2655(0x25b)](this[_0x3b2655(0x29c)]+'\x20('+this[_0x3b2655(0x584)][_0x3b2655(0x7a3)]+_0x3b2655(0x464));break;}for(;this[_0x3b2655(0x809)][_0x3b2655(0x250)]>0x0;){await this[_0x3b2655(0x3d7)]();let _0x5a8dd7=_0x144a9c();if(!_0x5a8dd7)break;let _0x122e5e=_0x305091['messages'][_0x3b2655(0x556)](_0x497f57=>_0x497f57['_id']===_0x5a8dd7[_0x3b2655(0x29b)]);if(!_0x122e5e)break;if(this[_0x3b2655(0x584)]['ScheduleMessage'][_0x3b2655(0x620)]=Date['now'](),_0x122e5e[_0x3b2655(0x270)]){this['logger'][_0x3b2655(0x25b)](this[_0x3b2655(0x29c)]+'\x20('+this['instance']['wuid']+_0x3b2655(0x290)+_0x122e5e['remoteJid']+_0x3b2655(0x85c)),this['pendingMessages']=this[_0x3b2655(0x809)][_0x3b2655(0x3c9)](_0x2a1a50=>_0x2a1a50[_0x3b2655(0x29b)]!==_0x122e5e['_id']);continue;}if(!this[_0x3b2655(0x584)][_0x3b2655(0x46f)][_0x3b2655(0x30f)]){this[_0x3b2655(0x5e7)][_0x3b2655(0x25b)](this[_0x3b2655(0x29c)]+'\x20('+this[_0x3b2655(0x584)][_0x3b2655(0x7a3)]+_0x3b2655(0x656));break;}if(!this[_0x3b2655(0x584)][_0x3b2655(0x46f)]['processingGroup']){this['logger'][_0x3b2655(0x25b)](this[_0x3b2655(0x29c)]+'\x20('+this[_0x3b2655(0x584)][_0x3b2655(0x7a3)]+_0x3b2655(0x274)+_0x305091[_0x3b2655(0x29b)]+_0x3b2655(0x7f6));break;}let _0x552000={'idControl':_0x122e5e['_id'],'remoteJid':_0x122e5e[_0x3b2655(0x61e)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date['now']()},_0x26e1db=null;try{this[_0x3b2655(0x5e7)]['warn'](this['instanceName']+'\x20('+this[_0x3b2655(0x584)][_0x3b2655(0x7a3)]+_0x3b2655(0x38c)+_0x122e5e[_0x3b2655(0x61e)]);let _0x1a27ee=await Promise[_0x3b2655(0x6b6)]([this[_0x3b2655(0x8e4)](_0x122e5e['remoteJid'],_0x122e5e),this[_0x3b2655(0x15b)](0x78*0x3e8)]);_0x552000[_0x3b2655(0x830)]=_0x1a27ee['error'],_0x552000['id']=_0x1a27ee['error']?null:_0x1a27ee['id'],_0x552000['error_log']=_0x1a27ee[_0x3b2655(0x830)]?_0x1a27ee[_0x3b2655(0x161)]?_0x1a27ee[_0x3b2655(0x161)][_0x3b2655(0x20e)]():'':null;let _0x5c7c37=_0x305091[_0x3b2655(0x208)]['findIndex'](_0x2cac39=>_0x2cac39['_id']===_0x122e5e[_0x3b2655(0x29b)]);_0x5c7c37!==-0x1&&(_0x305091[_0x3b2655(0x208)][_0x5c7c37][_0x3b2655(0x270)]=!0x0);let _0x106a35={'$push':{'messagesSend':_0x552000},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x53ceb2=[{'elem._id':_0x122e5e[_0x3b2655(0x29b)]}];if(this['logger']['warn'](this[_0x3b2655(0x29c)]+'\x20('+this[_0x3b2655(0x584)][_0x3b2655(0x7a3)]+_0x3b2655(0x743)+_0x122e5e[_0x3b2655(0x29b)]),_0x26e1db=await this[_0x3b2655(0x677)]['scheduleMessage']['updateOne']({'_id':_0x305091[_0x3b2655(0x29b)]},_0x106a35,this[_0x3b2655(0x584)][_0x3b2655(0x7a3)],{'arrayFilters':_0x53ceb2}),_0x1a27ee[_0x3b2655(0x830)]){this['logger']['error'](this['instanceName']+'\x20('+this[_0x3b2655(0x584)]['wuid']+_0x3b2655(0x5d5)+_0x1a27ee[_0x3b2655(0x161)]);continue;}let _0x47b6a7=this[_0x3b2655(0x5dc)](_0x305091[_0x3b2655(0x669)],_0x305091[_0x3b2655(0x827)]);await this[_0x3b2655(0x714)](_0x47b6a7);}catch(_0x45ddae){this['logger'][_0x3b2655(0x830)](this[_0x3b2655(0x29c)]+'\x20('+this[_0x3b2655(0x584)][_0x3b2655(0x7a3)]+'):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20'+_0x122e5e[_0x3b2655(0x61e)]+':\x20'+(_0x45ddae instanceof Error?_0x45ddae[_0x3b2655(0x80a)]:JSON['stringify'](_0x45ddae,null,0x2))),_0x552000[_0x3b2655(0x830)]=!0x0,_0x552000[_0x3b2655(0x6e1)]=_0x45ddae['message'];let _0x393044=_0x305091[_0x3b2655(0x208)][_0x3b2655(0x8c1)](_0x12df35=>_0x12df35[_0x3b2655(0x29b)]===_0x122e5e[_0x3b2655(0x29b)]);_0x393044!==-0x1&&(_0x305091[_0x3b2655(0x208)][_0x393044][_0x3b2655(0x270)]=!0x0);let _0x573aa2={'$push':{'messagesSend':_0x552000},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x219798=[{'elem._id':_0x122e5e[_0x3b2655(0x29b)]}];this[_0x3b2655(0x5e7)]['warn'](this[_0x3b2655(0x29c)]+'\x20('+this[_0x3b2655(0x584)][_0x3b2655(0x7a3)]+_0x3b2655(0x209)+_0x122e5e['_id']),_0x26e1db=await this['repository'][_0x3b2655(0x638)][_0x3b2655(0x32f)]({'_id':_0x305091[_0x3b2655(0x29b)]},_0x573aa2,this[_0x3b2655(0x584)][_0x3b2655(0x7a3)],{'arrayFilters':_0x219798});}finally{if(_0x26e1db&&_0x26e1db[_0x3b2655(0x7cb)]==='stopped'){this[_0x3b2655(0x5e7)][_0x3b2655(0x25b)](this[_0x3b2655(0x29c)]+'\x20('+this[_0x3b2655(0x584)]['wuid']+_0x3b2655(0x274)+_0x122e5e[_0x3b2655(0x29b)]+_0x3b2655(0x764));break;}let _0x31c1fa=_0x26e1db[_0x3b2655(0x208)][_0x3b2655(0x556)](_0x83d94=>_0x83d94[_0x3b2655(0x29b)]===_0x122e5e[_0x3b2655(0x29b)]);if(_0x31c1fa&&!_0x31c1fa['triedToSend']){let _0xd9ee0d={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x4f5ead=[{'elem._id':_0x122e5e[_0x3b2655(0x29b)]}];await this[_0x3b2655(0x677)][_0x3b2655(0x638)][_0x3b2655(0x32f)]({'_id':_0x26e1db['_id']},_0xd9ee0d,this[_0x3b2655(0x584)][_0x3b2655(0x7a3)],{'arrayFilters':_0x4f5ead});}if(this[_0x3b2655(0x809)]=_0x26e1db[_0x3b2655(0x208)][_0x3b2655(0x3c9)](_0x501253=>!_0x501253[_0x3b2655(0x270)]),!this[_0x3b2655(0x584)][_0x3b2655(0x46f)][_0x3b2655(0x18c)]){await this[_0x3b2655(0x3d7)](),this[_0x3b2655(0x5e7)][_0x3b2655(0x25b)](this[_0x3b2655(0x29c)]+'\x20('+this[_0x3b2655(0x584)][_0x3b2655(0x7a3)]+_0x3b2655(0x274)+_0x305091[_0x3b2655(0x29b)]+_0x3b2655(0x7f6));break;}}}this[_0x3b2655(0x809)]=[];let _0x1334a8=await this['repository'][_0x3b2655(0x638)][_0x3b2655(0x7d9)](_0x305091[_0x3b2655(0x29b)],this[_0x3b2655(0x584)][_0x3b2655(0x7a3)]);if(_0x1334a8[_0x3b2655(0x208)][_0x3b2655(0x248)](_0x10a8d8=>_0x10a8d8[_0x3b2655(0x270)])&&_0x1334a8[_0x3b2655(0x7cb)]!=='stopped'){let _0xdc3aab={'$set':{'status':_0x3b2655(0x333)}};await this[_0x3b2655(0x677)]['scheduleMessage']['updateOneById'](_0x1334a8[_0x3b2655(0x29b)],_0xdc3aab,this[_0x3b2655(0x584)][_0x3b2655(0x7a3)]);}await new Promise(_0x19a578=>setTimeout(_0x19a578,_0x52142f)),global['gc']?global['gc']():console[_0x3b2655(0x25b)]('Garbage\x20collection\x20não\x20está\x20disponível.');}}[a0_0xf2a334(0x15b)](_0x2a3734){return new Promise((_0x56aedc,_0x6b19e8)=>setTimeout(()=>_0x6b19e8(new Error('Timeout\x20exceeded')),_0x2a3734));}['getDelay'](_0x1813c2,_0x10286a){const _0x5c4571=a0_0xf2a334;return _0x1813c2=Math[_0x5c4571(0x4eb)](0.5,_0x1813c2),_0x10286a=Math[_0x5c4571(0x338)](Math['max'](0x3,_0x10286a),0x78),Math[_0x5c4571(0x7b4)](Math['random']()*(_0x10286a-_0x1813c2+0x1)+_0x1813c2)*0x3e8;}[a0_0xf2a334(0x714)](_0x5a086c){return new Promise(_0x520259=>setTimeout(_0x520259,_0x5a086c));}async[a0_0xf2a334(0x725)](_0x6675e9){const _0x2d941b=a0_0xf2a334;if(!this[_0x2d941b(0x580)]&&(await this[_0x2d941b(0x3f2)](),!this[_0x2d941b(0x580)]))return null;_0x6675e9=this[_0x2d941b(0x32a)](_0x6675e9);let _0x1bf657=await this[_0x2d941b(0x677)][_0x2d941b(0x2fb)]['findOne']({'where':{'_id':_0x6675e9}},this[_0x2d941b(0x584)][_0x2d941b(0x7a3)]),_0x27ed23={};if(_0x1bf657&&_0x1bf657[_0x2d941b(0x1df)]){let _0x42fdd6=_0x1bf657[_0x2d941b(0x1df)];typeof _0x42fdd6[_0x2d941b(0x81b)]==_0x2d941b(0x16b)&&(_0x27ed23[_0x2d941b(0x81b)]=_0x42fdd6[_0x2d941b(0x81b)]),typeof _0x42fdd6[_0x2d941b(0x1f4)]==_0x2d941b(0x16b)&&(_0x27ed23[_0x2d941b(0x1f4)]=_0x42fdd6[_0x2d941b(0x1f4)]),typeof _0x42fdd6['email']=='string'&&(_0x27ed23[_0x2d941b(0x3b0)]=_0x42fdd6[_0x2d941b(0x3b0)]),typeof _0x42fdd6[_0x2d941b(0x685)]==_0x2d941b(0x16b)&&(_0x27ed23[_0x2d941b(0x685)]=_0x42fdd6[_0x2d941b(0x685)]),typeof _0x42fdd6['status']==_0x2d941b(0x16b)&&(_0x27ed23[_0x2d941b(0x7cb)]=_0x42fdd6[_0x2d941b(0x7cb)]),typeof _0x42fdd6[_0x2d941b(0x286)]==_0x2d941b(0x16b)&&(_0x27ed23['notas']=_0x42fdd6[_0x2d941b(0x286)]),typeof _0x42fdd6[_0x2d941b(0x594)]==_0x2d941b(0x16b)&&(_0x27ed23[_0x2d941b(0x594)]=_0x42fdd6['responsavelid']),Array[_0x2d941b(0x529)](_0x42fdd6['tags'])&&(_0x27ed23[_0x2d941b(0x804)]=_0x42fdd6['tags'][_0x2d941b(0x666)](',\x20')),Array[_0x2d941b(0x529)](_0x42fdd6[_0x2d941b(0x301)])&&(_0x27ed23[_0x2d941b(0x301)]=_0x42fdd6[_0x2d941b(0x301)][_0x2d941b(0x666)](',\x20'));}return _0x1bf657&&_0x1bf657[_0x2d941b(0x1df)]&&_0x1bf657[_0x2d941b(0x1df)][_0x2d941b(0x910)]&&_0x1bf657['leadInfo']['customFields']['forEach'](_0x2a0245=>{const _0x49e697=_0x2d941b;let _0x547bc9=this[_0x49e697(0x580)]?.['customFields'][_0x49e697(0x556)](_0x360f0e=>_0x360f0e[_0x49e697(0x29b)]===_0x2a0245['_id']);_0x547bc9&&(_0x27ed23[_0x547bc9[_0x49e697(0x76f)]]=_0x2a0245[_0x49e697(0x79a)]);}),_0x27ed23;}async['replaceVariablesChat'](_0x3b59bf,_0x316fe0){const _0x219f39=a0_0xf2a334;try{let _0x1681df=await this[_0x219f39(0x725)](_0x316fe0);return this['replaceVariables'](_0x3b59bf,_0x1681df);}catch(_0x22c221){return this[_0x219f39(0x5e7)][_0x219f39(0x830)](_0x219f39(0x87e)+_0x316fe0+':\x20'+_0x22c221),_0x3b59bf;}}async[a0_0xf2a334(0x47a)](){const _0x5b02d7=a0_0xf2a334;let _0x55468b=async(_0x18a61e,_0x54a4d6)=>{const _0xbd78cc=a0_0x464b;let _0x8d6c0=(await this[_0xbd78cc(0x677)][_0xbd78cc(0x638)][_0xbd78cc(0x556)]({'where':{'type':_0x18a61e}},this['instance'][_0xbd78cc(0x7a3)]))['map'](async _0x188083=>{const _0x280e3b=_0xbd78cc;let _0x3f4a5f=_0x54a4d6(_0x188083),_0x507a4f=_0x1eb19d=>/^\d+$/[_0x280e3b(0x852)](_0x1eb19d),_0x4ad46b=_0x188083[_0x280e3b(0x1c5)]['filter'](_0x52ee03=>_0x52ee03[_0x280e3b(0x8de)](_0x280e3b(0x765))?_0x52ee03['length']>0x19:_0x52ee03['endsWith'](_0x280e3b(0x701))?_0x52ee03[_0x280e3b(0x250)]>0xf:_0x507a4f(_0x52ee03)?_0x52ee03['length']>=0xb:!0x1)[_0x280e3b(0x5b0)](_0x2b9aab=>({'_id':(0x0,Q['v4'])(),'idSchedule':_0x188083[_0x280e3b(0x29b)],'type':_0x3f4a5f,'remoteJid':_0x2b9aab,'flow':_0x188083['flowName'],'text':_0x188083[_0x280e3b(0x80a)]?.['text'],'delay':_0x188083[_0x280e3b(0x80a)]?.[_0x280e3b(0x4c5)],'urlOrBase64':_0x188083[_0x280e3b(0x80a)]?.[_0x280e3b(0x420)],'linkPreview':_0x188083[_0x280e3b(0x80a)]?.[_0x280e3b(0x230)],'fileName':_0x188083[_0x280e3b(0x80a)]?.[_0x280e3b(0x667)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x280e3b(0x677)][_0x280e3b(0x638)]['updateOneById'](_0x188083[_0x280e3b(0x29b)],{'$set':{'messages':_0x4ad46b},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x280e3b(0x584)][_0x280e3b(0x7a3)]);}catch(_0x490624){console[_0x280e3b(0x830)]('Erro\x20ao\x20atualizar\x20agendamento\x20'+_0x188083[_0x280e3b(0x29b)]+':',_0x490624);}});await Promise[_0xbd78cc(0x3f9)](_0x8d6c0);};await _0x55468b(_0x5b02d7(0x439),_0x42d098=>_0x5b02d7(0x439)),await _0x55468b(_0x5b02d7(0x6a0),_0xf19606=>_0xf19606[_0x5b02d7(0x80a)]?.[_0x5b02d7(0x426)]||_0x5b02d7(0x6a0)),await _0x55468b(_0x5b02d7(0x308),_0x4d9b97=>_0x5b02d7(0x308)),await _0x55468b(_0x5b02d7(0x1e8),_0xb310c6=>_0x5b02d7(0x1e8)),await _0x55468b('image',_0x282ef1=>_0x5b02d7(0x1b1)),await _0x55468b(_0x5b02d7(0x771),_0x3b7773=>_0x5b02d7(0x771)),await _0x55468b(_0x5b02d7(0x321),_0x35cc85=>'document'),this[_0x5b02d7(0x5e7)][_0x5b02d7(0x25b)](this['instanceName']+'\x20('+this['instance'][_0x5b02d7(0x7a3)]+_0x5b02d7(0x1ac));}async[a0_0xf2a334(0x7c4)](_0x201247){const _0x29931b=a0_0xf2a334;try{if(this[_0x29931b(0x5e7)][_0x29931b(0x25b)](this[_0x29931b(0x29c)]+'\x20('+this[_0x29931b(0x584)][_0x29931b(0x7a3)]+_0x29931b(0x493)),_0x201247[_0x29931b(0x29b)]||(_0x201247[_0x29931b(0x29b)]=(0x0,Q['v4'])()),this['instance'][_0x29931b(0x46f)][_0x29931b(0x18c)]?.[_0x29931b(0x29b)]===_0x201247[_0x29931b(0x29b)]?.[_0x29931b(0x20e)]()){if(_0x201247[_0x29931b(0x7cb)]==='stopped')this[_0x29931b(0x584)][_0x29931b(0x46f)][_0x29931b(0x18c)]=null;else throw new Error(_0x29931b(0x7a1));}if(_0x201247[_0x29931b(0x44e)]&&_0x201247[_0x29931b(0x29b)]){let _0x21b488=await this[_0x29931b(0x677)][_0x29931b(0x638)][_0x29931b(0x221)](_0x201247[_0x29931b(0x29b)],this[_0x29931b(0x584)][_0x29931b(0x7a3)]);return setTimeout(()=>this[_0x29931b(0x5e3)](),0x7d0),_0x21b488;}let _0x32daca=null;if(_0x201247[_0x29931b(0x29b)]&&(_0x32daca=await this[_0x29931b(0x677)]['scheduleMessage']['findById'](_0x201247[_0x29931b(0x29b)],this[_0x29931b(0x584)]['wuid'])),_0x32daca){let {_id:_0x2d532a,owner:_0x138217,messages:_0x3a77ac,..._0x149f7e}=_0x201247;if(_0x3a77ac){let _0x330314=_0x3a77ac[_0x29931b(0x3c9)](_0x370b8e=>!_0x370b8e[_0x29931b(0x29b)]),_0x5214d9=_0x3a77ac[_0x29931b(0x3c9)](_0x3e4973=>_0x3e4973[_0x29931b(0x29b)]&&!_0x3e4973[_0x29931b(0x44e)]),_0x30e571=_0x3a77ac['filter'](_0x54b3c1=>_0x54b3c1['_id']&&_0x54b3c1[_0x29931b(0x44e)]);if(_0x330314['length']>0x0&&await this[_0x29931b(0x501)](_0x201247[_0x29931b(0x29b)],_0x330314),_0x5214d9[_0x29931b(0x250)]>0x0&&await this[_0x29931b(0x754)]({'_id':_0x201247[_0x29931b(0x29b)],'messages':_0x5214d9}),_0x30e571[_0x29931b(0x250)]>0x0){let _0x1f26cd=_0x30e571[_0x29931b(0x5b0)](_0x1f4053=>({'updateOne':{'filter':{'_id':_0x201247[_0x29931b(0x29b)]},'update':{'$pull':{'messages':{'_id':_0x1f4053[_0x29931b(0x29b)]}}}}}));await this[_0x29931b(0x677)][_0x29931b(0x638)]['bulkWrite'](_0x1f26cd,this[_0x29931b(0x584)][_0x29931b(0x7a3)]);}}let _0x2745e8={'$set':{..._0x149f7e,'status':_0x201247[_0x29931b(0x7cb)]||_0x32daca['status']}},_0x3f947c=await this[_0x29931b(0x677)][_0x29931b(0x638)][_0x29931b(0x2ea)](_0x201247[_0x29931b(0x29b)],_0x2745e8,this[_0x29931b(0x584)][_0x29931b(0x7a3)]);return _0x3f947c&&(this[_0x29931b(0x5a0)](_0x3f947c[_0x29931b(0x208)]),await this['repository'][_0x29931b(0x638)]['updateOneById'](_0x3f947c[_0x29931b(0x29b)],{'$set':{'messages':_0x3f947c['messages']}},this['instance']['wuid'])),setTimeout(()=>this[_0x29931b(0x5e3)](),0x7d0),await this[_0x29931b(0x47a)](),_0x3f947c;}else{_0x201247[_0x29931b(0x84f)]=this[_0x29931b(0x584)][_0x29931b(0x7a3)],_0x201247[_0x29931b(0x208)]&&_0x201247['messages']['forEach'](_0x4a13cb=>{const _0x1c6d38=_0x29931b;_0x4a13cb[_0x1c6d38(0x29b)]||(_0x4a13cb[_0x1c6d38(0x29b)]=(0x0,Q['v4'])()),_0x4a13cb[_0x1c6d38(0x4b6)]||(_0x4a13cb[_0x1c6d38(0x4b6)]=_0x201247['_id']),delete _0x4a13cb[_0x1c6d38(0x270)];});let _0xf1c7e=await this[_0x29931b(0x677)][_0x29931b(0x638)][_0x29931b(0x281)](_0x201247,this['instance']['wuid']);return _0xf1c7e&&(this[_0x29931b(0x5a0)](_0xf1c7e[_0x29931b(0x208)]),await this['repository']['scheduleMessage'][_0x29931b(0x2ea)](_0xf1c7e[_0x29931b(0x29b)],{'$set':{'messages':_0xf1c7e[_0x29931b(0x208)]}},this[_0x29931b(0x584)]['wuid'])),setTimeout(()=>this[_0x29931b(0x5e3)](),0x7d0),_0xf1c7e;}}catch(_0x123c70){let _0x40b6d8=_0x29931b(0x74d),_0x480b6d=_0x123c70 instanceof Error?_0x123c70[_0x29931b(0x80a)]:typeof _0x123c70==_0x29931b(0x524)?JSON['stringify'](_0x123c70):_0x123c70,_0x21d71b=_0x40b6d8+':\x20'+_0x480b6d;throw this[_0x29931b(0x5e7)][_0x29931b(0x830)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x29931b(0x62f)+_0x21d71b),new m(_0x21d71b);}}async[a0_0xf2a334(0x501)](_0x3ac85a,_0x161379){const _0x59b629=a0_0xf2a334;try{this[_0x59b629(0x5e7)][_0x59b629(0x6a3)](this[_0x59b629(0x29c)]+'\x20('+this['instance'][_0x59b629(0x7a3)]+_0x59b629(0x719)),_0x161379[_0x59b629(0x3b5)](_0x24c3c3=>{const _0x2e550d=_0x59b629;_0x24c3c3[_0x2e550d(0x29b)]||(_0x24c3c3[_0x2e550d(0x29b)]=(0x0,Q['v4'])()),_0x24c3c3[_0x2e550d(0x4b6)]||(_0x24c3c3['idSchedule']=_0x3ac85a),delete _0x24c3c3[_0x2e550d(0x270)];});let _0x419f9c={'$push':{'messages':{'$each':_0x161379}}},_0x5a6ec4=await this[_0x59b629(0x677)]['scheduleMessage']['updateOneById'](_0x3ac85a,_0x419f9c,this[_0x59b629(0x584)]['wuid']);return _0x5a6ec4&&(this[_0x59b629(0x5a0)](_0x5a6ec4[_0x59b629(0x208)]),await this[_0x59b629(0x677)][_0x59b629(0x638)][_0x59b629(0x2ea)](_0x5a6ec4['_id'],{'$set':{'messages':_0x5a6ec4['messages']}},this[_0x59b629(0x584)]['wuid'])),_0x5a6ec4;}catch(_0x47b087){let _0x56f2dd=_0x59b629(0x24e),_0x179099=_0x47b087 instanceof Error?_0x47b087[_0x59b629(0x80a)]:typeof _0x47b087==_0x59b629(0x524)?JSON['stringify'](_0x47b087):_0x47b087,_0x2a19ea=_0x56f2dd+':\x20'+_0x179099;throw this[_0x59b629(0x5e7)][_0x59b629(0x830)](this[_0x59b629(0x29c)]+'\x20('+this['instance'][_0x59b629(0x7a3)]+'):\x20'+_0x2a19ea),new m(_0x2a19ea);}}async['editMessagesInGroup'](_0x544b71){const _0x15bf44=a0_0xf2a334;try{if(this['logger'][_0x15bf44(0x6a3)](this[_0x15bf44(0x29c)]+'\x20('+this[_0x15bf44(0x584)][_0x15bf44(0x7a3)]+'):\x20Editando\x20mensagens\x20no\x20grupo...'),!_0x544b71['_id']||!_0x544b71['messages'])throw new Error(_0x15bf44(0x433));let _0x585c4e=_0x544b71[_0x15bf44(0x29b)],_0x30cc81=_0x544b71[_0x15bf44(0x208)],_0x5ea0a3=_0x30cc81[_0x15bf44(0x3c9)](_0x5a96d9=>!_0x5a96d9[_0x15bf44(0x44e)])['map'](_0x109d45=>{const _0x545615=_0x15bf44;let _0x25122a=_0x109d45['_id'];if(!_0x25122a)throw new Error(_0x545615(0x7ab));return _0x109d45[_0x545615(0x4b6)]||(_0x109d45[_0x545615(0x4b6)]=_0x585c4e),delete _0x109d45[_0x545615(0x270)],{'updateOne':{'filter':{'_id':_0x585c4e,'messages._id':_0x25122a},'update':{'$set':{'messages.$[elem]':_0x109d45}},'arrayFilters':[{'elem._id':_0x25122a}]}};}),_0x4fae47=_0x30cc81[_0x15bf44(0x3c9)](_0x165a81=>_0x165a81[_0x15bf44(0x44e)])['map'](_0xa652a9=>{const _0x17f873=_0x15bf44;let _0x327015=_0xa652a9['_id'];if(!_0x327015)throw new Error(_0x17f873(0x4ac));return{'updateOne':{'filter':{'_id':_0x585c4e},'update':{'$pull':{'messages':{'_id':_0x327015}}}}};}),_0x32439d=[..._0x5ea0a3,..._0x4fae47],_0x153540=await this[_0x15bf44(0x677)][_0x15bf44(0x638)][_0x15bf44(0x8b6)](_0x32439d,this[_0x15bf44(0x584)][_0x15bf44(0x7a3)]),_0x2b9868=await this[_0x15bf44(0x677)][_0x15bf44(0x638)][_0x15bf44(0x7d9)](_0x585c4e,this['instance'][_0x15bf44(0x7a3)]);return _0x2b9868&&(this['reorderMessages'](_0x2b9868['messages']),await this['repository']['scheduleMessage'][_0x15bf44(0x2ea)](_0x2b9868[_0x15bf44(0x29b)],{'$set':{'messages':_0x2b9868[_0x15bf44(0x208)]}},this[_0x15bf44(0x584)][_0x15bf44(0x7a3)])),_0x2b9868;}catch(_0xa9c04f){let _0x563df8=_0x15bf44(0x42f),_0x6efa1f=_0xa9c04f instanceof Error?_0xa9c04f['message']:typeof _0xa9c04f=='object'?JSON[_0x15bf44(0x34b)](_0xa9c04f):_0xa9c04f,_0x3c0a37=_0x563df8+':\x20'+_0x6efa1f;throw this[_0x15bf44(0x5e7)][_0x15bf44(0x830)](this[_0x15bf44(0x29c)]+'\x20('+this['instance'][_0x15bf44(0x7a3)]+_0x15bf44(0x62f)+_0x3c0a37),new m(_0x3c0a37);}}async[a0_0xf2a334(0x6ad)](){const _0x57b0d8=a0_0xf2a334;try{let _0x406029={'status':_0x57b0d8(0x333)},_0x391657=await this[_0x57b0d8(0x677)][_0x57b0d8(0x638)]['deleteMany'](_0x406029,this['instance']['wuid']);if(!_0x391657[_0x57b0d8(0x830)])this['logger'][_0x57b0d8(0x6a3)](this[_0x57b0d8(0x29c)]+'\x20('+this[_0x57b0d8(0x584)][_0x57b0d8(0x7a3)]+_0x57b0d8(0x2bb));else throw new Error(_0x391657[_0x57b0d8(0x830)][_0x57b0d8(0x80a)]||'Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens');return this['getScheduleMessage']();}catch(_0xbd71c){let _0x3ca26c=_0x57b0d8(0x2e9),_0x36744f=_0xbd71c instanceof Error?_0xbd71c[_0x57b0d8(0x80a)]:typeof _0xbd71c==_0x57b0d8(0x524)?JSON[_0x57b0d8(0x34b)](_0xbd71c):_0xbd71c,_0x5a2727=_0x3ca26c+':\x20'+_0x36744f;throw this[_0x57b0d8(0x5e7)][_0x57b0d8(0x830)](this['instanceName']+'\x20('+this[_0x57b0d8(0x584)][_0x57b0d8(0x7a3)]+_0x57b0d8(0x62f)+_0x5a2727),new m(_0x5a2727);}}async[a0_0xf2a334(0x246)](){const _0x299eb3=a0_0xf2a334;try{this[_0x299eb3(0x584)][_0x299eb3(0x46f)][_0x299eb3(0x30f)]=!0x1,this[_0x299eb3(0x584)][_0x299eb3(0x46f)][_0x299eb3(0x18c)]=null,this[_0x299eb3(0x4b4)]&&this[_0x299eb3(0x4b4)]['clear'](),this[_0x299eb3(0x5e7)][_0x299eb3(0x6a3)](this[_0x299eb3(0x29c)]+'\x20('+this['instance'][_0x299eb3(0x7a3)]+_0x299eb3(0x715)),await new Promise(_0xc207b8=>setTimeout(_0xc207b8,0x1388)),this[_0x299eb3(0x5e7)][_0x299eb3(0x6a3)](this['instanceName']+'\x20('+this[_0x299eb3(0x584)]['wuid']+_0x299eb3(0x6f7));let _0x4f6290=await this[_0x299eb3(0x677)]['scheduleMessage'][_0x299eb3(0x881)]({},this[_0x299eb3(0x584)][_0x299eb3(0x7a3)]);if(!_0x4f6290[_0x299eb3(0x830)])this[_0x299eb3(0x5e7)][_0x299eb3(0x6a3)](this['instanceName']+'\x20('+this[_0x299eb3(0x584)][_0x299eb3(0x7a3)]+_0x299eb3(0x2d4)),this[_0x299eb3(0x5e7)]['verbose'](this[_0x299eb3(0x29c)]+'\x20('+this['instance'][_0x299eb3(0x7a3)]+_0x299eb3(0x66f)),await new Promise(_0x721407=>setTimeout(_0x721407,0x1388)),this[_0x299eb3(0x584)][_0x299eb3(0x46f)][_0x299eb3(0x30f)]=!0x0,this[_0x299eb3(0x5e7)][_0x299eb3(0x6a3)](this[_0x299eb3(0x29c)]+'\x20('+this[_0x299eb3(0x584)][_0x299eb3(0x7a3)]+_0x299eb3(0x1db)),this[_0x299eb3(0x5e3)]();else throw new Error(_0x4f6290[_0x299eb3(0x830)][_0x299eb3(0x80a)]||_0x299eb3(0x391));return this[_0x299eb3(0x632)]();}catch(_0x511ee2){let _0xc95cd0='Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens',_0x5c8c21=_0x511ee2 instanceof Error?_0x511ee2['message']:typeof _0x511ee2==_0x299eb3(0x524)?JSON[_0x299eb3(0x34b)](_0x511ee2):_0x511ee2,_0x11a8b8=_0xc95cd0+':\x20'+_0x5c8c21;throw this[_0x299eb3(0x5e7)][_0x299eb3(0x830)](this['instanceName']+'\x20('+this[_0x299eb3(0x584)]['wuid']+_0x299eb3(0x62f)+_0x11a8b8),new m(_0x11a8b8);}}async['getScheduleMessage'](){const _0x3fa2c8=a0_0xf2a334;try{return await this[_0x3fa2c8(0x677)][_0x3fa2c8(0x638)]['find']({'where':{}},this['instance'][_0x3fa2c8(0x7a3)]);}catch(_0xc5ab3d){let _0x3f7149=_0x3fa2c8(0x8b0),_0x3f1527=_0xc5ab3d instanceof Error?_0xc5ab3d[_0x3fa2c8(0x80a)]:typeof _0xc5ab3d==_0x3fa2c8(0x524)?JSON[_0x3fa2c8(0x34b)](_0xc5ab3d):_0xc5ab3d,_0x417ccf=_0x3f7149+':\x20'+_0x3f1527;throw this['logger'][_0x3fa2c8(0x830)](this[_0x3fa2c8(0x29c)]+'\x20('+this['instance']['wuid']+'):\x20'+_0x417ccf),new m(_0x417ccf);}}[a0_0xf2a334(0x5a0)](_0x871d2c){const _0x5f164e=a0_0xf2a334;_0x871d2c[_0x5f164e(0x53f)]((_0x118b51,_0x484c60)=>_0x118b51[_0x5f164e(0x48f)]-_0x484c60['order']),_0x871d2c[_0x5f164e(0x3b5)]((_0x5e36ab,_0x18898e)=>{const _0x5cc4a2=_0x5f164e;_0x5e36ab[_0x5cc4a2(0x48f)]=_0x18898e+0x1;});}async[a0_0xf2a334(0x8e4)](_0x5a3321,_0x51b4c1){const _0x5499fe=a0_0xf2a334;try{if(!_0x51b4c1)return this[_0x5499fe(0x5e7)]['error'](this['instanceName']+'\x20('+this[_0x5499fe(0x584)][_0x5499fe(0x7a3)]+_0x5499fe(0x492)),{'error':!0x0,'detail':'Nenhuma\x20mensagem\x20encontrada\x20para\x20envio'};if(_0x51b4c1[_0x5499fe(0x519)]===_0x5499fe(0x1e8)&&!this[_0x5499fe(0x580)]?.[_0x5499fe(0x5bd)][_0x5499fe(0x3f8)])return this[_0x5499fe(0x5e7)][_0x5499fe(0x830)](this[_0x5499fe(0x29c)]+'\x20('+this[_0x5499fe(0x584)]['wuid']+_0x5499fe(0x61d)),{'error':!0x0,'detail':'Fluxos\x20não\x20estão\x20ativados'};switch(_0x51b4c1[_0x5499fe(0x519)]){case _0x5499fe(0x439):return await this[_0x5499fe(0x823)](_0x51b4c1,_0x5a3321);case _0x5499fe(0x771):case _0x5499fe(0x1b1):case _0x5499fe(0x321):return await this['scheduleSendMedia'](_0x51b4c1,_0x5a3321);case _0x5499fe(0x308):return await this['scheduleSendAudio'](_0x51b4c1,_0x5a3321);case'flow':let _0x4ee07a=new ze();return _0x4ee07a['name']=_0x51b4c1[_0x5499fe(0x1e8)],_0x4ee07a['remoteJid']=_0x5a3321,await this['startFlow'](_0x4ee07a);default:return this[_0x5499fe(0x5e7)]['error'](this[_0x5499fe(0x29c)]+'\x20('+this[_0x5499fe(0x584)]['wuid']+'):\x20Comando\x20desconhecido:\x20'+_0x51b4c1[_0x5499fe(0x519)]),{'error':!0x0,'detail':_0x5499fe(0x3db)};}}catch(_0x479f69){return this[_0x5499fe(0x5e7)][_0x5499fe(0x830)](this['instanceName']+'\x20('+this['instance'][_0x5499fe(0x7a3)]+_0x5499fe(0x729)+(_0x479f69 instanceof Error?_0x479f69[_0x5499fe(0x80a)]:JSON[_0x5499fe(0x34b)](_0x479f69,null,0x2))),{'error':!0x0,'detail':_0x479f69[_0x5499fe(0x80a)]};}}async[a0_0xf2a334(0x823)](_0x293cd6,_0x107cc4){const _0x35007e=a0_0xf2a334;if(this[_0x35007e(0x5e7)]['verbose'](this[_0x35007e(0x29c)]+'\x20('+this['instance']['wuid']+'):\x20\x27Enviando\x20texto\x20para\x20\x27'+_0x107cc4+'\x27'),!_0x293cd6[_0x35007e(0x439)]||_0x293cd6[_0x35007e(0x439)][_0x35007e(0x250)]===0x0)return{'error':!0x0,'detail':_0x35007e(0x732)};let _0xc5085=await this[_0x35007e(0x1fe)](_0x293cd6[_0x35007e(0x439)],_0x107cc4),_0x1064c0={'number':_0x107cc4,'options':{'delay':_0x293cd6[_0x35007e(0x4c5)],'linkPreview':_0x293cd6['linkPreview']},'textMessage':{'text':_0xc5085}},_0x462b21=null;try{let _0x36860c=await this[_0x35007e(0x605)](_0x1064c0);if(_0x36860c&&_0x36860c[_0x35007e(0x7cb)])return{'error':!0x1,'id':_0x36860c[_0x35007e(0x28c)]['id']};_0x462b21=JSON[_0x35007e(0x34b)](_0x36860c),this['logger'][_0x35007e(0x6a3)](this[_0x35007e(0x29c)]+'\x20('+this[_0x35007e(0x584)][_0x35007e(0x7a3)]+_0x35007e(0x62f)+_0x462b21);}catch(_0x35d338){this['logger'][_0x35007e(0x830)](this[_0x35007e(0x29c)]+'\x20('+this['instance']['wuid']+_0x35007e(0x182)+(_0x35d338 instanceof Error?_0x35d338['message']:JSON[_0x35007e(0x34b)](_0x35d338,null,0x2))),_0x462b21=_0x35d338[_0x35007e(0x80a)];}if(_0x462b21)return{'error':!0x0,'detail':(typeof _0x462b21==_0x35007e(0x524)?JSON['stringify'](_0x462b21,null,0x2):_0x462b21)['replace'](/[\[\]{}\n]/g,'\x20')[_0x35007e(0x6b0)](/  +/g,'\x20')};}async['scheduleSendMedia'](_0x34d4b9,_0x2f482e){const _0x9ec53e=a0_0xf2a334;this[_0x9ec53e(0x5e7)][_0x9ec53e(0x6a3)](this['instanceName']+'\x20('+this[_0x9ec53e(0x584)][_0x9ec53e(0x7a3)]+_0x9ec53e(0x481)+_0x2f482e+'\x27');let _0x6cbe2d;_0x34d4b9[_0x9ec53e(0x439)]&&_0x34d4b9['text'][_0x9ec53e(0x250)]>0x0&&(_0x6cbe2d=await this['replaceVariablesChat'](_0x34d4b9[_0x9ec53e(0x439)],_0x2f482e));let _0x176908={'number':_0x2f482e,'options':{'delay':_0x34d4b9[_0x9ec53e(0x4c5)],'linkPreview':_0x34d4b9[_0x9ec53e(0x230)]},'mediaMessage':{'mediatype':_0x34d4b9[_0x9ec53e(0x519)],'caption':_0x6cbe2d,'media':_0x34d4b9[_0x9ec53e(0x420)]}},_0x3468d0=null;try{let _0x40edd9=await this[_0x9ec53e(0x88b)](_0x176908);if(_0x40edd9&&_0x40edd9[_0x9ec53e(0x7cb)])return{'error':!0x1,'id':_0x40edd9[_0x9ec53e(0x28c)]['id']};_0x3468d0=JSON[_0x9ec53e(0x34b)](_0x40edd9),this[_0x9ec53e(0x5e7)][_0x9ec53e(0x6a3)](this[_0x9ec53e(0x29c)]+'\x20('+this[_0x9ec53e(0x584)][_0x9ec53e(0x7a3)]+_0x9ec53e(0x62f)+_0x3468d0);}catch(_0x3fa050){this[_0x9ec53e(0x5e7)][_0x9ec53e(0x830)](this[_0x9ec53e(0x29c)]+'\x20('+this[_0x9ec53e(0x584)][_0x9ec53e(0x7a3)]+_0x9ec53e(0x401)+(_0x3fa050 instanceof Error?_0x3fa050[_0x9ec53e(0x80a)]:JSON[_0x9ec53e(0x34b)](_0x3fa050,null,0x2))),_0x3468d0=_0x3fa050[_0x9ec53e(0x80a)];}if(_0x3468d0)return{'error':!0x0,'detail':(typeof _0x3468d0==_0x9ec53e(0x524)?JSON[_0x9ec53e(0x34b)](_0x3468d0,null,0x2):_0x3468d0)['replace'](/[\[\]{}\n]/g,'\x20')[_0x9ec53e(0x6b0)](/  +/g,'\x20')};}async[a0_0xf2a334(0x444)](_0x2dc8cf,_0x177a19){const _0x21575b=a0_0xf2a334;this[_0x21575b(0x5e7)][_0x21575b(0x6a3)](this[_0x21575b(0x29c)]+'\x20('+this[_0x21575b(0x584)][_0x21575b(0x7a3)]+_0x21575b(0x8b2)+_0x177a19+'\x27');let _0x2ce1f3={'number':_0x177a19,'options':{'delay':_0x2dc8cf[_0x21575b(0x4c5)]},'audioMessage':{'audio':_0x2dc8cf[_0x21575b(0x420)]}},_0x5e4f00=null;try{let _0xd75cce=await this[_0x21575b(0x4c1)](_0x2ce1f3);if(_0xd75cce&&_0xd75cce['status'])return{'error':!0x1,'id':_0xd75cce[_0x21575b(0x28c)]['id']};_0x5e4f00=JSON['stringify'](_0xd75cce),this[_0x21575b(0x5e7)][_0x21575b(0x6a3)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x21575b(0x62f)+_0x5e4f00);}catch(_0x55082d){this[_0x21575b(0x5e7)]['error'](this[_0x21575b(0x29c)]+'\x20('+this[_0x21575b(0x584)][_0x21575b(0x7a3)]+_0x21575b(0x784)+(_0x55082d instanceof Error?_0x55082d[_0x21575b(0x80a)]:JSON[_0x21575b(0x34b)](_0x55082d,null,0x2))),_0x5e4f00=_0x55082d[_0x21575b(0x80a)];}if(_0x5e4f00)return{'error':!0x0,'detail':(typeof _0x5e4f00=='object'?JSON[_0x21575b(0x34b)](_0x5e4f00,null,0x2):_0x5e4f00)[_0x21575b(0x6b0)](/[\[\]{}\n]/g,'\x20')[_0x21575b(0x6b0)](/  +/g,'\x20')};}async[a0_0xf2a334(0x89f)](_0x5bdc02){const _0x4bf3fc=a0_0xf2a334;try{return await this[_0x4bf3fc(0x90d)][_0x4bf3fc(0x832)](_0x5bdc02[_0x4bf3fc(0x291)],_0x5bdc02['description']),{'update':'success'};}catch(_0x2ea22f){let _0x401482=_0x4bf3fc(0x6bd),_0x42417a=_0x2ea22f instanceof Error?_0x2ea22f['message']:typeof _0x2ea22f==_0x4bf3fc(0x524)?JSON[_0x4bf3fc(0x34b)](_0x2ea22f):_0x2ea22f,_0x2a533c=_0x401482+':\x20'+_0x42417a;throw this[_0x4bf3fc(0x5e7)]['error'](this[_0x4bf3fc(0x29c)]+'\x20('+this['instance'][_0x4bf3fc(0x7a3)]+'):\x20'+_0x2a533c),new x(_0x2a533c);}}async[a0_0xf2a334(0x790)](_0x3d33ad){const _0x8a86a0=a0_0xf2a334;try{return await this[_0x8a86a0(0x90d)][_0x8a86a0(0x15e)](_0x3d33ad[_0x8a86a0(0x291)],_0x3d33ad[_0x8a86a0(0x76f)]),{'update':'success'};}catch(_0x10ff28){let _0x51d958=_0x8a86a0(0x211),_0x5eb49a=_0x10ff28 instanceof Error?_0x10ff28[_0x8a86a0(0x80a)]:typeof _0x10ff28==_0x8a86a0(0x524)?JSON['stringify'](_0x10ff28):_0x10ff28,_0x37c15a=_0x51d958+':\x20'+_0x5eb49a;throw this['logger']['error'](this[_0x8a86a0(0x29c)]+'\x20('+this['instance'][_0x8a86a0(0x7a3)]+_0x8a86a0(0x62f)+_0x37c15a),new x(_0x37c15a);}}async[a0_0xf2a334(0x167)](_0x42c430){const _0x2af5df=a0_0xf2a334;try{let _0x364966=await this[_0x2af5df(0x90d)][_0x2af5df(0x79e)](_0x42c430['groupJid'],_0x42c430[_0x2af5df(0x847)]);return{'success':!0x0};}catch(_0x548854){let _0x392909='Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral',_0x1f20ec=_0x548854 instanceof Error?_0x548854['message']:typeof _0x548854==_0x2af5df(0x524)?JSON[_0x2af5df(0x34b)](_0x548854):_0x548854,_0x58b660=_0x392909+':\x20'+_0x1f20ec;throw this[_0x2af5df(0x5e7)][_0x2af5df(0x830)](this[_0x2af5df(0x29c)]+'\x20('+this[_0x2af5df(0x584)][_0x2af5df(0x7a3)]+_0x2af5df(0x62f)+_0x58b660),new x(_0x58b660);}}async[a0_0xf2a334(0x449)](_0x2af195){const _0x458277=a0_0xf2a334;try{return await this[_0x458277(0x90d)]['groupSettingUpdate'](_0x2af195[_0x458277(0x291)],_0x2af195[_0x458277(0x560)]),{'update':_0x458277(0x3e6)};}catch(_0x41bf84){let _0x5284f6=_0x458277(0x7b7),_0x268eb9=_0x41bf84 instanceof Error?_0x41bf84[_0x458277(0x80a)]:typeof _0x41bf84==_0x458277(0x524)?JSON['stringify'](_0x41bf84):_0x41bf84,_0x27e028=_0x5284f6+':\x20'+_0x268eb9;throw this[_0x458277(0x5e7)][_0x458277(0x830)](this[_0x458277(0x29c)]+'\x20('+this[_0x458277(0x584)][_0x458277(0x7a3)]+_0x458277(0x62f)+_0x27e028),new x(_0x27e028);}}async[a0_0xf2a334(0x625)](_0x4df9f5){const _0x1a22cc=a0_0xf2a334;try{let _0x10f92c;if((0x0,J[_0x1a22cc(0x79d)])(_0x4df9f5[_0x1a22cc(0x1b1)])){let _0xc9973=new Date()['getTime'](),_0x542330=_0x4df9f5[_0x1a22cc(0x1b1)]+'?timestamp='+_0xc9973;_0x10f92c=(await K[_0x1a22cc(0x59e)][_0x1a22cc(0x4c6)](_0x542330,{'responseType':'arraybuffer'}))[_0x1a22cc(0x601)];}else{if((0x0,J[_0x1a22cc(0x7cc)])(_0x4df9f5[_0x1a22cc(0x1b1)]))_0x10f92c=Buffer['from'](_0x4df9f5[_0x1a22cc(0x1b1)],_0x1a22cc(0x201));else throw new m(_0x1a22cc(0x913));}return await this[_0x1a22cc(0x90d)][_0x1a22cc(0x741)](_0x4df9f5[_0x1a22cc(0x291)],_0x10f92c),{'update':_0x1a22cc(0x3e6)};}catch(_0x2b64d4){let _0x3225d4=_0x1a22cc(0x346),_0x3aef5a=_0x2b64d4 instanceof Error?_0x2b64d4[_0x1a22cc(0x80a)]:typeof _0x2b64d4==_0x1a22cc(0x524)?JSON[_0x1a22cc(0x34b)](_0x2b64d4):_0x2b64d4,_0x22973f=_0x3225d4+':\x20'+_0x3aef5a;throw this['logger']['error'](this[_0x1a22cc(0x29c)]+'\x20('+this[_0x1a22cc(0x584)][_0x1a22cc(0x7a3)]+'):\x20'+_0x22973f),new x(_0x22973f);}}},jt=class u{constructor(_0x4f2f47,_0x5b1bfd,_0x1a2a1e){const _0x53c2c7=a0_0xf2a334;this[_0x53c2c7(0x7bb)]=_0x4f2f47,this[_0x53c2c7(0x566)]=_0x5b1bfd,this[_0x53c2c7(0x677)]=_0x1a2a1e,this['db']={},this[_0x53c2c7(0x388)]={},this[_0x53c2c7(0x5e7)]=new $(u['name']),this[_0x53c2c7(0x2af)]={},(this[_0x53c2c7(0x414)](),this[_0x53c2c7(0x5be)](),Object[_0x53c2c7(0x58a)](this['db'],_0x5b1bfd[_0x53c2c7(0x4c6)]('DATABASE')),Object['assign'](this[_0x53c2c7(0x388)],_0x5b1bfd[_0x53c2c7(0x4c6)](_0x53c2c7(0x6e3))),this[_0x53c2c7(0x363)]=this['db']['ENABLED']?this['repository'][_0x53c2c7(0x577)]?.['db'](this['db'][_0x53c2c7(0x174)][_0x53c2c7(0x52a)]+_0x53c2c7(0x4d7)):void 0x0,this['cache']=this[_0x53c2c7(0x388)][_0x53c2c7(0x6f6)]?new ue(this['redis']):void 0x0);}async['instanceInfo'](_0x31c9e4){const _0x4880b8=a0_0xf2a334;if(_0x31c9e4&&!this[_0x4880b8(0x2af)][_0x31c9e4])throw new U(_0x4880b8(0x900)+_0x31c9e4+_0x4880b8(0x6d9));let _0x39f584=[];for await(let [_0x3ab079,_0x1b3b92]of Object['entries'](this[_0x4880b8(0x2af)]))if(_0x1b3b92&&_0x1b3b92['connectionStatus'][_0x4880b8(0x747)]===_0x4880b8(0x330)){let _0x5472ea=await this['repository'][_0x4880b8(0x1a5)]['find'](_0x3ab079);_0x39f584[_0x4880b8(0x355)]({'instance':{'instanceName':_0x3ab079,'apikey':_0x5472ea[_0x4880b8(0x1b8)],'owner':_0x1b3b92[_0x4880b8(0x7a3)],'profileName':await _0x1b3b92[_0x4880b8(0x62b)]()||_0x4880b8(0x42c),'profilePictureUrl':_0x1b3b92[_0x4880b8(0x85a)]}});}return _0x39f584['find'](_0x2f5894=>_0x2f5894[_0x4880b8(0x584)][_0x4880b8(0x29c)]===_0x31c9e4)??_0x39f584;}async[a0_0xf2a334(0x254)](_0x444148){const _0x1d9f21=a0_0xf2a334;if(this['db'][_0x1d9f21(0x6f6)]&&(await this['repository'][_0x1d9f21(0x577)][_0x1d9f21(0x3e0)](),(await this['dbInstance'][_0x1d9f21(0x193)]())[_0x1d9f21(0x250)]>0x0&&await this[_0x1d9f21(0x363)][_0x1d9f21(0x775)](_0x444148)),this[_0x1d9f21(0x388)][_0x1d9f21(0x6f6)]){this[_0x1d9f21(0x762)]['reference']=_0x444148,await this[_0x1d9f21(0x762)][_0x1d9f21(0x659)]();return;}}async[a0_0xf2a334(0x789)](){const _0x4be8e5=a0_0xf2a334;await this[_0x4be8e5(0x1fb)]();let _0x4ae9e9=async _0x50baed=>{const _0x3b3db5=_0x4be8e5;let _0x13f955=new $e(this[_0x3b3db5(0x566)],this[_0x3b3db5(0x7bb)],this[_0x3b3db5(0x677)]);_0x13f955[_0x3b3db5(0x29c)]=_0x50baed,await _0x13f955['connectToWhatsapp'](),this[_0x3b3db5(0x2af)][_0x50baed]=_0x13f955;};try{if(this['redis'][_0x4be8e5(0x6f6)]){let _0x45bac7=await this[_0x4be8e5(0x762)][_0x4be8e5(0x220)]();_0x45bac7?.[_0x4be8e5(0x250)]>0x0&&_0x45bac7[_0x4be8e5(0x3b5)](async _0x25f74c=>await _0x4ae9e9(_0x25f74c[_0x4be8e5(0x8a0)](':')[0x1]));return;}if(this['db'][_0x4be8e5(0x6f6)]){await this[_0x4be8e5(0x677)][_0x4be8e5(0x577)][_0x4be8e5(0x3e0)]();let _0x3e7e52=await this['dbInstance']['collections']();_0x3e7e52[_0x4be8e5(0x250)]>0x0&&_0x3e7e52[_0x4be8e5(0x3b5)](async _0x901886=>await _0x4ae9e9(_0x901886[_0x4be8e5(0x1d4)][_0x4be8e5(0x6b0)](/^[\w-]+\./,'')));return;}}catch(_0x3eed1e){this[_0x4be8e5(0x5e7)][_0x4be8e5(0x830)](_0x3eed1e);}}async[a0_0xf2a334(0x7ef)](){const _0xdea11b=a0_0xf2a334;try{let _0x17c9dd=await this[_0xdea11b(0x677)][_0xdea11b(0x1a5)][_0xdea11b(0x81e)]({'online':!0x1});console['log']('Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20'+_0x17c9dd[_0xdea11b(0x250)]);let _0x14cb5e={'online':!0x1},_0x504a78=await this[_0xdea11b(0x677)][_0xdea11b(0x1a5)][_0xdea11b(0x881)](_0x14cb5e);console[_0xdea11b(0x6b2)](_0xdea11b(0x352)+_0x504a78[_0xdea11b(0x43a)]);}catch(_0x392e01){console['error']('Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:',_0x392e01);}}async[a0_0xf2a334(0x1fb)](){const _0x8d3b57=a0_0xf2a334;try{let _0x5cb826={'online':!0x1},_0x2fa815={'online':!0x1,'lastDisconnect':Date[_0x8d3b57(0x5eb)]()},_0xc6598a=await this[_0x8d3b57(0x677)]['auth'][_0x8d3b57(0x572)](_0x5cb826,_0x2fa815);await this['cleanDisconnectedInstances']();}catch(_0x3e3d98){console[_0x8d3b57(0x830)](_0x8d3b57(0x37c),_0x3e3d98);}}[a0_0xf2a334(0x414)](){const _0x2ac0fd=a0_0xf2a334;this[_0x2ac0fd(0x7bb)]['on'](_0x2ac0fd(0x18b),async _0x219c74=>{const _0x401b48=_0x2ac0fd;try{this[_0x401b48(0x2af)][_0x219c74]=void 0x0;}catch{}try{this[_0x401b48(0x254)](_0x219c74);}finally{this[_0x401b48(0x5e7)]['warn'](_0x401b48(0x900)+_0x219c74+_0x401b48(0x614));}});}['noConnection'](){const _0x2444ca=a0_0xf2a334;this[_0x2444ca(0x7bb)]['on'](_0x2444ca(0x5ac),async _0x350b5b=>{const _0x12ccdc=_0x2444ca;try{this[_0x12ccdc(0x2af)][_0x350b5b]=void 0x0;}catch{}try{this[_0x12ccdc(0x254)](_0x350b5b);}finally{this[_0x12ccdc(0x5e7)][_0x12ccdc(0x25b)]('Instance\x20\x22'+_0x350b5b+_0x12ccdc(0x37a));}});}},Jt=class extends O{['getChatModelForOwner'](_0x2e0f98){return ta(_0x2e0f98);}async[a0_0xf2a334(0x26f)](_0x2c893c){const _0x170f5a=a0_0xf2a334;if(_0x2c893c['length']!==0x0)try{return{'insertCount':(await this[_0x170f5a(0x680)](_0x2c893c[0x0][_0x170f5a(0x84f)])[_0x170f5a(0x210)]([..._0x2c893c]))['length']};}catch(_0x22088c){return _0x22088c;}}async[a0_0xf2a334(0x556)](_0x3c97d3,_0x1b13aa){const _0x5077cc=a0_0xf2a334;try{let _0x18f13d=this[_0x5077cc(0x680)](_0x1b13aa),_0x396ef6=A(_0x3c97d3[_0x5077cc(0x770)]);return await _0x18f13d[_0x5077cc(0x556)](_0x396ef6)[_0x5077cc(0x53f)]({'lastmsg':-0x1})[_0x5077cc(0x384)](_0x3c97d3?.[_0x5077cc(0x384)]??0x0)['lean']();}catch{return[];}}async[a0_0xf2a334(0x689)](_0x564f46,_0x204782){const _0x43b325=a0_0xf2a334;try{let _0x42e684=this[_0x43b325(0x680)](_0x204782),_0x31d407=A(_0x564f46[_0x43b325(0x770)]);return _0x31d407[_0x43b325(0x657)]={'$ne':[]},await _0x42e684[_0x43b325(0x556)](_0x31d407)[_0x43b325(0x53f)]({'lastmsg':-0x1})[_0x43b325(0x384)](_0x564f46?.[_0x43b325(0x384)]??0x0)[_0x43b325(0x695)]();}catch{return[];}}async[a0_0xf2a334(0x44e)](_0x454462,_0x2b17a7){const _0x22d0a4=a0_0xf2a334;try{return{'deletedCount':(await this['getChatModelForOwner'](_0x2b17a7)[_0x22d0a4(0x881)]({..._0x454462['where']}))[_0x22d0a4(0x706)]};}catch(_0x45187d){return{'error':_0x45187d?.['toString']()};}}async['deleteAll'](_0x461cc8,_0x6753ff){const _0x2aa70d=a0_0xf2a334;try{return await this['getChatModelForOwner'](_0x6753ff)[_0x2aa70d(0x881)]({..._0x461cc8['where']}),[];}catch(_0x2d5926){return{'error':_0x2d5926?.[_0x2aa70d(0x20e)]()};}}async['findOne'](_0x372dd3,_0x333e1e){const _0xb9ad8a=a0_0xf2a334;try{let _0x57038e=this[_0xb9ad8a(0x680)](_0x333e1e),_0x22f1fd=A(_0x372dd3[_0xb9ad8a(0x770)]);return await _0x57038e[_0xb9ad8a(0x18a)](_0x22f1fd)[_0xb9ad8a(0x695)]();}catch{return null;}}async[a0_0xf2a334(0x32f)](_0x4e50fd,_0x252852,_0x218e47,_0xcfb271,_0x8d89fb='$set'){const _0x23af41=a0_0xf2a334;try{let _0x38a17c={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0xcfb271},_0x4d4327=this[_0x23af41(0x680)](_0x218e47),_0xa29151=A(_0x4e50fd[_0x23af41(0x770)]);Object[_0x23af41(0x3e5)](_0x252852)[_0x23af41(0x3b5)](_0x13111d=>{_0x252852[_0x13111d]==null&&delete _0x252852[_0x13111d];});let _0x1d7b7b={};return _0x1d7b7b[_0x8d89fb]=_0x252852,await _0x4d4327[_0x23af41(0x181)](_0xa29151,_0x1d7b7b,_0x38a17c);}catch(_0x210a3){return console[_0x23af41(0x830)](_0x210a3),null;}}async[a0_0xf2a334(0x362)](_0x3fae19){const _0x2685e4=a0_0xf2a334;try{let _0x22d499=this['getChatModelForOwner'](_0x3fae19[0x0][_0x2685e4(0x165)]['where'][_0x2685e4(0x84f)]),_0x372ab7=_0x3fae19[_0x2685e4(0x5b0)](_0x3d319a=>({'updateOne':{'filter':{..._0x3d319a[_0x2685e4(0x165)][_0x2685e4(0x770)]},'update':{'$set':_0x3d319a[_0x2685e4(0x227)]},'upsert':!0x0}})),_0x2e3d1e=await _0x22d499[_0x2685e4(0x8b6)](_0x372ab7);return _0x2e3d1e[_0x2685e4(0x818)]+_0x2e3d1e[_0x2685e4(0x542)];}catch(_0x4a5aef){return console['error'](_0x4a5aef),0x0;}}async[a0_0xf2a334(0x878)](_0x5c36b4){const _0x5e9e12=a0_0xf2a334;try{let _0x40b696={'group_isCommunity':'','group_announce':'','group_size':''},_0x3cb105={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x27b26c={'$unset':_0x40b696};return(await this[_0x5e9e12(0x680)](_0x5c36b4)['updateMany'](_0x3cb105,_0x27b26c))[_0x5e9e12(0x818)];}catch(_0x192c73){return console[_0x5e9e12(0x830)]('Error\x20removing\x20unused\x20chat\x20fields:',_0x192c73),0x0;}}async['updateMissingEtiquetas'](_0x14144e){const _0x279644=a0_0xf2a334;try{let _0x561d29=this['getChatModelForOwner'](_0x14144e),_0x4809bc={'leadInfo.etiquetas':{'$exists':!0x1}},_0x248177={'$set':{'leadInfo.etiquetas':[]}};return(await _0x561d29[_0x279644(0x362)](_0x4809bc,_0x248177))[_0x279644(0x818)];}catch(_0x376fd9){return console[_0x279644(0x830)](_0x376fd9),0x0;}}async['updateMissingTags'](_0x59cd6c){const _0x2f4ec5=a0_0xf2a334;try{let _0x3a08e3=this[_0x2f4ec5(0x680)](_0x59cd6c),_0x286811={'leadInfo.tags':{'$exists':!0x1}},_0x5cbdb8={'$set':{'leadInfo.tags':[]}};return(await _0x3a08e3[_0x2f4ec5(0x362)](_0x286811,_0x5cbdb8))[_0x2f4ec5(0x818)];}catch(_0x4940c3){return console[_0x2f4ec5(0x830)](_0x4940c3),0x0;}}async[a0_0xf2a334(0x2c3)](_0x6d7760){const _0x5df1ef=a0_0xf2a334;try{let _0x36b432=this['getChatModelForOwner'](_0x6d7760),_0xe61089={'leadInfo.customFields':{'$exists':!0x1}},_0x5b3059={'$set':{'leadInfo.customFields':[]}};return(await _0x36b432[_0x5df1ef(0x362)](_0xe61089,_0x5b3059))['modifiedCount'];}catch(_0x3cd160){return console[_0x5df1ef(0x830)](_0x3cd160),0x0;}}async['insertMany'](_0x1897ee,_0x54a61c){const _0x54d217=a0_0xf2a334;if(!Array[_0x54d217(0x529)](_0x1897ee)||_0x1897ee[_0x54d217(0x250)]===0x0)throw new Error('Nenhum\x20chat\x20fornecido\x20para\x20inserção.');try{return(await this[_0x54d217(0x680)](_0x54a61c)[_0x54d217(0x210)](_0x1897ee))[_0x54d217(0x250)];}catch(_0xa35520){throw console[_0x54d217(0x830)](_0x54d217(0x50f),_0xa35520),_0xa35520;}}async[a0_0xf2a334(0x436)](_0x33ee5c,_0x1341e5){const _0x2d4775=a0_0xf2a334;try{await this[_0x2d4775(0x680)](_0x1341e5)['deleteOne']({'_id':_0x33ee5c});}catch(_0x3b6a0e){throw console[_0x2d4775(0x830)](_0x2d4775(0x759),_0x3b6a0e),_0x3b6a0e;}}},qt=class extends O{constructor(_0x56b34d,_0x1bf64e,_0x7b1d0c){const _0x3b71d0=a0_0xf2a334;super(_0x1bf64e),this[_0x3b71d0(0x87a)]=_0x56b34d,this[_0x3b71d0(0x566)]=_0x1bf64e,this[_0x3b71d0(0x1f5)]=_0x7b1d0c;}async['insert'](_0x23afb1){const _0x44b63c=a0_0xf2a334;if(_0x23afb1[_0x44b63c(0x250)]!==0x0)try{return{'insertCount':(await this[_0x44b63c(0x87a)]['insertMany']([..._0x23afb1]))[_0x44b63c(0x250)]};}catch(_0x1b8d09){return _0x1b8d09;}}async[a0_0xf2a334(0x227)](_0x4109ce,_0x235081){const _0x4dd874=a0_0xf2a334;try{let _0x907d92=A(_0x4109ce[_0x4dd874(0x770)]);return{'updatedCount':(await this[_0x4dd874(0x87a)][_0x4dd874(0x362)](_0x907d92,{'$set':_0x235081}))[_0x4dd874(0x818)]};}catch(_0x2e7d9b){return console[_0x4dd874(0x830)](_0x4dd874(0x46b),_0x2e7d9b),{'error':_0x2e7d9b[_0x4dd874(0x20e)]()};}}async[a0_0xf2a334(0x1f9)](_0x5e9f46){const _0x1472da=a0_0xf2a334;try{let _0x59da92={'_id':{'$in':_0x5e9f46}};return await this[_0x1472da(0x87a)][_0x1472da(0x556)](_0x59da92)[_0x1472da(0x695)]();}catch(_0x402363){return console[_0x1472da(0x830)](_0x1472da(0x2ef),_0x402363),[];}}async['delete'](_0x43b0f0){const _0x5b0be6=a0_0xf2a334;try{return{'deletedCount':(await this['cacheContactModel'][_0x5b0be6(0x881)]({..._0x43b0f0[_0x5b0be6(0x770)]}))[_0x5b0be6(0x706)]};}catch(_0x57dab7){return{'error':_0x57dab7?.['toString']()};}}async[a0_0xf2a334(0x556)](_0x4667b8){const _0x5ef890=a0_0xf2a334;try{let _0x3d47a1=A(_0x4667b8[_0x5ef890(0x770)]);return await this['cacheContactModel'][_0x5ef890(0x556)](_0x3d47a1)['limit'](_0x4667b8?.[_0x5ef890(0x384)]??0x0)[_0x5ef890(0x695)]();}catch{return[];}}async[a0_0xf2a334(0x18a)](_0x52952e){const _0x111d01=a0_0xf2a334;try{let _0x52b5d8=A(_0x52952e[_0x111d01(0x770)]);return await this[_0x111d01(0x87a)][_0x111d01(0x18a)](_0x52b5d8)['lean']();}catch{return null;}}},Vt=class extends O{constructor(_0x2108be,_0x186c50,_0x417c58){const _0x486d11=a0_0xf2a334;super(_0x186c50),this[_0x486d11(0x5b2)]=_0x2108be,this[_0x486d11(0x566)]=_0x186c50,this[_0x486d11(0x1f5)]=_0x417c58;}async[a0_0xf2a334(0x26f)](_0x2ec5ef){const _0x102168=a0_0xf2a334;if(_0x2ec5ef[_0x102168(0x250)]!==0x0)try{return{'insertCount':(await this['messageLogsModel'][_0x102168(0x210)]([..._0x2ec5ef]))[_0x102168(0x250)]};}catch(_0x4b43ea){return _0x4b43ea;}}async[a0_0xf2a334(0x227)](_0x349863,_0x54aea7){const _0x12c93a=a0_0xf2a334;try{let _0x40487c=A(_0x349863['where']);return{'updatedCount':(await this[_0x12c93a(0x5b2)][_0x12c93a(0x362)](_0x40487c,{'$set':_0x54aea7}))['modifiedCount']};}catch(_0x182cf2){return console[_0x12c93a(0x830)](_0x12c93a(0x46b),_0x182cf2),{'error':_0x182cf2[_0x12c93a(0x20e)]()};}}async[a0_0xf2a334(0x44e)](_0x5b00ee){const _0x1a17d1=a0_0xf2a334;try{return{'deletedCount':(await this[_0x1a17d1(0x5b2)][_0x1a17d1(0x881)]({..._0x5b00ee['where']}))[_0x1a17d1(0x706)]};}catch(_0x4b6a3e){return{'error':_0x4b6a3e?.['toString']()};}}async['findOne'](_0x234dd0){const _0x664eeb=a0_0xf2a334;try{let _0x61c25e=A(_0x234dd0[_0x664eeb(0x770)]);return await this[_0x664eeb(0x5b2)][_0x664eeb(0x18a)](_0x61c25e)['lean']();}catch{return null;}}},Gt=class extends O{['getLabelModelForOwner'](_0x2a556a){return va(_0x2a556a);}async[a0_0xf2a334(0x32f)](_0x5b61c9,_0x38cdd3,_0x4f44f3,_0x241976){const _0x129079=a0_0xf2a334;try{let _0x54d08b={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x241976},_0x9e6c94=this[_0x129079(0x296)](_0x4f44f3),_0xf808e9=A(_0x5b61c9['where']);return await _0x9e6c94[_0x129079(0x181)](_0xf808e9,{'$set':_0x38cdd3},_0x54d08b);}catch(_0x31ee1f){return console[_0x129079(0x830)](_0x31ee1f),null;}}async[a0_0xf2a334(0x556)](_0xdf6e60,_0x14d8e1){const _0x285e46=a0_0xf2a334;try{let _0x5e3e97=this['getLabelModelForOwner'](_0x14d8e1),_0x1f961c=A(_0xdf6e60[_0x285e46(0x770)]);return await _0x5e3e97['find'](_0x1f961c);}catch(_0x13b08a){console[_0x285e46(0x830)](_0x13b08a);}}async[a0_0xf2a334(0x44e)](_0x18ff81,_0x46b99f){const _0x4b904b=a0_0xf2a334;try{let _0x90ad98=this[_0x4b904b(0x296)](_0x46b99f),_0x36d969=A(_0x18ff81[_0x4b904b(0x770)]);await _0x90ad98[_0x4b904b(0x881)](_0x36d969);}catch(_0x30a1d9){console['error'](_0x30a1d9);}}async['deleteAll'](_0x10204a){const _0x39b387=a0_0xf2a334;try{return await this['getLabelModelForOwner'](_0x10204a)['collection'][_0x39b387(0x63f)](),{'success':!0x0};}catch(_0x4403f3){return console[_0x39b387(0x830)](_0x4403f3),{'success':!0x1,'error':_0x4403f3};}}},Bt=class{constructor(_0x28f95b){const _0xec356d=a0_0xf2a334;this[_0xec356d(0x7e0)]=_0x28f95b;}async[a0_0xf2a334(0x67a)]({instanceName:_0x449bf7},_0x4249ca){const _0x21403a=a0_0xf2a334;return await this[_0x21403a(0x7e0)][_0x21403a(0x2af)][_0x449bf7][_0x21403a(0x67a)](_0x4249ca);}async[a0_0xf2a334(0x56e)]({instanceName:_0xcb1e39},_0x376c0c){const _0x26c4e7=a0_0xf2a334;return await this[_0x26c4e7(0x7e0)][_0x26c4e7(0x2af)][_0xcb1e39][_0x26c4e7(0x56e)](_0x376c0c);}async[a0_0xf2a334(0x90c)]({instanceName:_0x33c2be},_0x5a2557){const _0x5834ae=a0_0xf2a334;return await this[_0x5834ae(0x7e0)][_0x5834ae(0x2af)][_0x33c2be][_0x5834ae(0x90c)](_0x5a2557);}async[a0_0xf2a334(0x80f)]({instanceName:_0x51742c},_0x1c2ad5){const _0x547517=a0_0xf2a334;return await this[_0x547517(0x7e0)][_0x547517(0x2af)][_0x51742c][_0x547517(0x6f2)](_0x1c2ad5);}async[a0_0xf2a334(0x887)]({instanceName:_0x58d002},_0x26b7fc){const _0x22028c=a0_0xf2a334;return await this[_0x22028c(0x7e0)][_0x22028c(0x2af)][_0x58d002][_0x22028c(0x887)](_0x26b7fc);}async[a0_0xf2a334(0x503)]({instanceName:_0x5c252c},_0x5f3e02){const _0x7a3391=a0_0xf2a334;return await this[_0x7a3391(0x7e0)][_0x7a3391(0x2af)][_0x5c252c][_0x7a3391(0x503)](_0x5f3e02);}async[a0_0xf2a334(0x5f4)]({instanceName:_0x47b821},_0x2ab18d){const _0x4a126d=a0_0xf2a334;return await this[_0x4a126d(0x7e0)][_0x4a126d(0x2af)][_0x47b821][_0x4a126d(0x4e4)](_0x2ab18d[_0x4a126d(0x50d)]);}async[a0_0xf2a334(0x189)]({instanceName:_0x4d54ae},_0x3135b2){const _0x5a8bfb=a0_0xf2a334;return await this[_0x5a8bfb(0x7e0)]['waInstances'][_0x4d54ae]['fetchProfile'](_0x3135b2[_0x5a8bfb(0x50d)]);}async[a0_0xf2a334(0x838)]({instanceName:_0x22256b},_0x50c20c){const _0x3177c4=a0_0xf2a334;return await this[_0x3177c4(0x7e0)][_0x3177c4(0x2af)][_0x22256b][_0x3177c4(0x838)](_0x50c20c);}async[a0_0xf2a334(0x358)]({instanceName:_0x1854b4},_0x2f8925){const _0x28e727=a0_0xf2a334;return await this[_0x28e727(0x7e0)]['waInstances'][_0x1854b4][_0x28e727(0x358)](_0x2f8925);}async['getBase64FromMediaMessage']({instanceName:_0x5ec15e},_0x1d9a64){const _0x15a286=a0_0xf2a334;return await this[_0x15a286(0x7e0)][_0x15a286(0x2af)][_0x5ec15e]['getBase64FromMediaMessage'](_0x1d9a64);}async[a0_0xf2a334(0x67f)]({instanceName:_0x679303},_0x4b22e4){const _0x46ffa2=a0_0xf2a334;return await this[_0x46ffa2(0x7e0)][_0x46ffa2(0x2af)][_0x679303][_0x46ffa2(0x67f)](_0x4b22e4);}async[a0_0xf2a334(0x54d)]({instanceName:_0xd8d6d1}){const _0x44202a=a0_0xf2a334;return await this['waMonitor'][_0x44202a(0x2af)][_0xd8d6d1][_0x44202a(0x54d)]();}async['fetchChats']({instanceName:_0x3b0b97}){const _0x336363=a0_0xf2a334;return await this[_0x336363(0x7e0)][_0x336363(0x2af)][_0x3b0b97][_0x336363(0x216)]();}async[a0_0xf2a334(0x514)]({instanceName:_0xbddfa0}){const _0x4a1edb=a0_0xf2a334;return await this[_0x4a1edb(0x7e0)][_0x4a1edb(0x2af)][_0xbddfa0]['fetchPrivacySettings']();}async[a0_0xf2a334(0x860)]({instanceName:_0x4a5c15},_0xc548ae){const _0x31c206=a0_0xf2a334;return await this[_0x31c206(0x7e0)][_0x31c206(0x2af)][_0x4a5c15][_0x31c206(0x860)](_0xc548ae);}async['fetchBusinessProfile']({instanceName:_0x25fb37},_0x9525a9){const _0x3a49b5=a0_0xf2a334;return await this[_0x3a49b5(0x7e0)]['waInstances'][_0x25fb37][_0x3a49b5(0x2e2)](_0x9525a9['number']);}async[a0_0xf2a334(0x8ab)]({instanceName:_0x1444d3},_0x149df7){const _0x11488f=a0_0xf2a334;return await this[_0x11488f(0x7e0)][_0x11488f(0x2af)][_0x1444d3][_0x11488f(0x8ab)](_0x149df7[_0x11488f(0x76f)]);}async[a0_0xf2a334(0x2aa)]({instanceName:_0x5d1e9b},_0x296717){const _0xd89631=a0_0xf2a334;return await this['waMonitor'][_0xd89631(0x2af)][_0x5d1e9b]['updateProfileStatus'](_0x296717[_0xd89631(0x7cb)]);}async[a0_0xf2a334(0x741)]({instanceName:_0x5e6cd6},_0x169c14){const _0x11b506=a0_0xf2a334;return await this[_0x11b506(0x7e0)][_0x11b506(0x2af)][_0x5e6cd6][_0x11b506(0x741)](_0x169c14[_0x11b506(0x5ce)]);}async[a0_0xf2a334(0x7f2)]({instanceName:_0x31969a},_0x2fc584){const _0x5e924e=a0_0xf2a334;return await this[_0x5e924e(0x7e0)][_0x5e924e(0x2af)][_0x31969a][_0x5e924e(0x7f2)]();}},Wt=require(a0_0xf2a334(0x178)),zt=class u{constructor(_0xdb9d65,_0x5778aa,_0x1e6100,_0x505768,_0x2442dc){const _0x39b515=a0_0xf2a334;this['waMonitor']=_0xdb9d65,this['configService']=_0x5778aa,this[_0x39b515(0x677)]=_0x1e6100,this[_0x39b515(0x7bb)]=_0x505768,this[_0x39b515(0x6f9)]=_0x2442dc,this[_0x39b515(0x5e7)]=new $(u['name']);}async[a0_0xf2a334(0x72c)]({instanceName:_0x8a10f7,apikey:_0x539191,number:_0x446191,proxy:_0x1371b1=!0x0}){const _0x2cda4f=a0_0xf2a334;try{let _0x54a7ac=new $e(this[_0x2cda4f(0x566)],this[_0x2cda4f(0x7bb)],this[_0x2cda4f(0x677)]);_0x54a7ac[_0x2cda4f(0x29c)]=_0x8a10f7,this[_0x2cda4f(0x7e0)][_0x2cda4f(0x2af)][_0x54a7ac['instanceName']]=_0x54a7ac;let _0x288870={};_0x539191?(await this[_0x2cda4f(0x677)]['auth'][_0x2cda4f(0x2d0)]({'apikey':_0x539191},_0x8a10f7),_0x288870[_0x2cda4f(0x1b8)]=_0x539191):_0x288870=await this[_0x2cda4f(0x6f9)][_0x2cda4f(0x5c3)]({'instanceName':_0x54a7ac[_0x2cda4f(0x29c)]});let _0x2e8e8a;if(_0x446191){if(_0x2e8e8a=await this[_0x2cda4f(0x54f)](_0x446191),_0x2e8e8a[_0x2cda4f(0x830)])throw new x(_0x2e8e8a[_0x2cda4f(0x830)][_0x2cda4f(0x20e)]());_0x446191=_0x2e8e8a[_0x2cda4f(0x50d)];}let _0x2b8d2f;return await _0x54a7ac[_0x2cda4f(0x821)](_0x446191),await(0x0,Wt['delay'])(0xfa0),_0x446191&&await(0x0,Wt[_0x2cda4f(0x4c5)])(0xbb8),_0x2b8d2f=_0x54a7ac[_0x2cda4f(0x3fb)],{'instance':{'instanceName':_0x54a7ac[_0x2cda4f(0x29c)],'status':_0x2cda4f(0x7f0)},'hash':_0x288870,'qrcode':_0x2b8d2f};}catch(_0x36b78c){throw this[_0x2cda4f(0x5e7)]['error'](_0x36b78c),_0x36b78c;}}async[a0_0xf2a334(0x75e)]({instanceName:_0x1233d1,number:_0x27db4e=null}){const _0x5257ff=a0_0xf2a334;try{let _0x50889e=this[_0x5257ff(0x7e0)]['waInstances'][_0x1233d1];switch(_0x50889e?.[_0x5257ff(0x350)]?.[_0x5257ff(0x747)]){case _0x5257ff(0x733):return await _0x50889e['connectToWhatsapp'](_0x27db4e),await(0x0,Wt['delay'])(0x7d0),_0x50889e[_0x5257ff(0x3fb)];case _0x5257ff(0x648):return _0x50889e[_0x5257ff(0x3fb)];default:return await this[_0x5257ff(0x848)]({'instanceName':_0x1233d1});}}catch(_0x59d59a){this[_0x5257ff(0x5e7)]['log'](_0x59d59a);}}async[a0_0xf2a334(0x848)]({instanceName:_0x4c06b2}){const _0x31cacd=a0_0xf2a334;let _0x4d6920=this[_0x31cacd(0x7e0)][_0x31cacd(0x2af)][_0x4c06b2][_0x31cacd(0x350)],_0x5e7dc9=null;_0x4d6920[_0x31cacd(0x747)]===_0x31cacd(0x330)&&_0x4c06b2&&(_0x5e7dc9=await this[_0x31cacd(0x7e0)][_0x31cacd(0x406)](_0x4c06b2));let _0x5b14c9=null;return _0x4d6920[_0x31cacd(0x747)]==='connecting'&&_0x4c06b2&&(_0x5b14c9=this[_0x31cacd(0x7e0)][_0x31cacd(0x2af)][_0x4c06b2][_0x31cacd(0x3fb)]),{'instance':_0x4c06b2,'connectionStatus':_0x4d6920,'instanceInfo':_0x5e7dc9,'qrcode':_0x5b14c9};}async[a0_0xf2a334(0x54f)](_0x43a99b){const _0x8ecb3=a0_0xf2a334;_0x43a99b=_0x43a99b['replace'](/\D/g,'');let _0x3468ce=Object['keys'](this[_0x8ecb3(0x7e0)][_0x8ecb3(0x2af)])[_0x8ecb3(0x3c9)](_0x273a35=>{const _0x549a1b=_0x8ecb3;let _0x214b95=this['waMonitor'][_0x549a1b(0x2af)][_0x273a35];return _0x214b95&&_0x214b95[_0x549a1b(0x350)]&&_0x214b95['connectionStatus']['state']===_0x549a1b(0x330);});if(_0x3468ce[_0x8ecb3(0x250)]===0x0)return{'number':this['formatBRNumber'](_0x43a99b)};let _0x2f7a34=Math[_0x8ecb3(0x7b4)](Math[_0x8ecb3(0x1cf)]()*_0x3468ce[_0x8ecb3(0x250)]),_0x587071=_0x3468ce[_0x2f7a34];try{let _0x84097d=(await this[_0x8ecb3(0x7e0)][_0x8ecb3(0x2af)][_0x587071]['whatsappNumber']({'numbers':[_0x43a99b]}))['shift']();return _0x84097d[_0x8ecb3(0x441)]?{'number':_0x84097d[_0x8ecb3(0x484)]['replace']('@s.whatsapp.net','')}:{'number':_0x43a99b,'error':_0x8ecb3(0x490)};}catch(_0x38370d){return this['logger']['error'](_0x8ecb3(0x4ad)+_0x38370d),{'number':_0x43a99b,'error':_0x8ecb3(0x596)};}}[a0_0xf2a334(0x2bc)](_0xf2e3c){const _0x18e619=a0_0xf2a334;let _0x2f4cb7=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x18e619(0x6f8)](_0xf2e3c);if(_0x2f4cb7&&_0x2f4cb7[0x1]==='55'){let _0x15d26a=_0x2f4cb7[0x2],_0x356e76=_0x2f4cb7[0x3],_0x32bb3e=_0x2f4cb7[0x4];if(parseInt(_0x15d26a)>=0x1f&&_0x356e76==='9')return _0x2f4cb7[0x1]+_0x15d26a+_0x32bb3e;}return _0xf2e3c;}async[a0_0xf2a334(0x90e)]({instanceName:_0x1cade5}){const _0x1627b5=a0_0xf2a334;try{return this['waMonitor'][_0x1627b5(0x2af)][_0x1cade5]?.[_0x1627b5(0x90d)]?.['ws']?.[_0x1627b5(0x733)](),{'status':_0x1627b5(0x6fe),'error':!0x1,'response':{'message':_0x1627b5(0x7c8)}};}catch(_0xf1dca6){this[_0x1627b5(0x5e7)]['error'](_0xf1dca6);}}async[a0_0xf2a334(0x45d)]({instanceName:_0x42d25e}){const _0x4993e3=a0_0xf2a334;return _0x42d25e?this[_0x4993e3(0x7e0)][_0x4993e3(0x406)](_0x42d25e):this[_0x4993e3(0x7e0)][_0x4993e3(0x406)]();}async[a0_0xf2a334(0x785)]({instanceName:_0x5c518a}){const _0x54834f=a0_0xf2a334;try{return await this[_0x54834f(0x7e0)]['waInstances'][_0x5c518a]?.[_0x54834f(0x90d)]?.[_0x54834f(0x785)](_0x54834f(0x299)+_0x5c518a),{'error':!0x1,'message':_0x54834f(0x7b9)};}catch(_0x1c131a){throw new x(_0x1c131a[_0x54834f(0x20e)]());}}async[a0_0xf2a334(0x8e7)]({instanceName:_0x3f86a6}){const _0x2ad247=a0_0xf2a334;if((await this[_0x2ad247(0x848)]({'instanceName':_0x3f86a6}))[_0x2ad247(0x350)][_0x2ad247(0x747)]===_0x2ad247(0x330))throw new m([_0x2ad247(0x3b9),_0x2ad247(0x6bf)]);try{return delete this['waMonitor'][_0x2ad247(0x2af)][_0x3f86a6],{'error':!0x1,'message':_0x2ad247(0x2fc)};}catch(_0x324f9e){throw new m(_0x324f9e[_0x2ad247(0x20e)]());}}},re=require(a0_0xf2a334(0x47c)),Ht=class{constructor(_0x450b99){this['waMonitor']=_0x450b99;}async['sendText']({instanceName:_0xcdd9b6},_0x5c8d08){const _0x5a1074=a0_0xf2a334;return await this[_0x5a1074(0x7e0)][_0x5a1074(0x2af)][_0xcdd9b6]['textMessage'](_0x5c8d08);}async[a0_0xf2a334(0x378)]({instanceName:_0x5975e0},_0x58c1ec){const _0x36e62a=a0_0xf2a334;return await this['waMonitor'][_0x36e62a(0x2af)][_0x5975e0][_0x36e62a(0x670)](_0x58c1ec);}async['sendMedia']({instanceName:_0x42b23c},_0x476a68){const _0x477a9d=a0_0xf2a334;if((0x0,re[_0x477a9d(0x7cc)])(_0x476a68?.[_0x477a9d(0x88b)]?.[_0x477a9d(0x6a0)])&&!_0x476a68?.[_0x477a9d(0x88b)]?.[_0x477a9d(0x667)])throw new m(_0x477a9d(0x602));if((0x0,re['isURL'])(_0x476a68?.['mediaMessage']?.[_0x477a9d(0x6a0)])||(0x0,re[_0x477a9d(0x7cc)])(_0x476a68?.['mediaMessage']?.[_0x477a9d(0x6a0)]))return await this['waMonitor'][_0x477a9d(0x2af)][_0x42b23c][_0x477a9d(0x88b)](_0x476a68);throw new m(_0x477a9d(0x836));}async[a0_0xf2a334(0x2c2)]({instanceName:_0x104dd9},_0x5b61da){const _0x38e954=a0_0xf2a334;if((0x0,re[_0x38e954(0x79d)])(_0x5b61da['stickerMessage'][_0x38e954(0x1b1)])||(0x0,re['isBase64'])(_0x5b61da['stickerMessage'][_0x38e954(0x1b1)]))return await this[_0x38e954(0x7e0)][_0x38e954(0x2af)][_0x104dd9][_0x38e954(0x392)](_0x5b61da);throw new m(_0x38e954(0x836));}async[a0_0xf2a334(0x8bd)]({instanceName:_0x1a2e38},_0x1488c0){const _0x278007=a0_0xf2a334;if((0x0,re['isURL'])(_0x1488c0[_0x278007(0x6d3)][_0x278007(0x308)])||(0x0,re[_0x278007(0x7cc)])(_0x1488c0[_0x278007(0x6d3)]['audio']))return await this[_0x278007(0x7e0)][_0x278007(0x2af)][_0x1a2e38]['audioWhatsapp'](_0x1488c0);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0xf2a334(0x3d2)]({instanceName:_0x46d3eb},_0x3391ae){const _0x319f62=a0_0xf2a334;return await this[_0x319f62(0x7e0)][_0x319f62(0x2af)][_0x46d3eb][_0x319f62(0x557)](_0x3391ae);}async[a0_0xf2a334(0x8ed)]({instanceName:_0x33e061},_0x39a68f){const _0xe7e789=a0_0xf2a334;return await this['waMonitor'][_0xe7e789(0x2af)][_0x33e061][_0xe7e789(0x4ab)](_0x39a68f);}async[a0_0xf2a334(0x6ab)]({instanceName:_0x4217c0},_0x53e10d){const _0x4f4ee3=a0_0xf2a334;return await this[_0x4f4ee3(0x7e0)][_0x4f4ee3(0x2af)][_0x4217c0][_0x4f4ee3(0x387)](_0x53e10d);}async[a0_0xf2a334(0x70c)]({instanceName:_0x4400b1},_0x2864ed){const _0x13df57=a0_0xf2a334;return await this[_0x13df57(0x7e0)]['waInstances'][_0x4400b1]['listMessage'](_0x2864ed);}async[a0_0xf2a334(0x33c)]({instanceName:_0x3cb137},_0x48c6fe){const _0x2c398f=a0_0xf2a334;return await this[_0x2c398f(0x7e0)][_0x2c398f(0x2af)][_0x3cb137][_0x2c398f(0x607)](_0x48c6fe);}async[a0_0xf2a334(0x4cb)]({instanceName:_0x41be35},_0x464cd0){const _0x54f647=a0_0xf2a334;if(!_0x464cd0[_0x54f647(0x24a)][_0x54f647(0x177)]['match'](/[^\(\)\w\sà-ú"-\+]+/))throw new m('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this[_0x54f647(0x7e0)][_0x54f647(0x2af)][_0x41be35][_0x54f647(0x24a)](_0x464cd0);}async['sendStatus']({instanceName:_0x2353dc},_0x1465d7){const _0x1e841f=a0_0xf2a334;return await this[_0x1e841f(0x7e0)]['waInstances'][_0x2353dc]['statusMessage'](_0x1465d7);}},Pi=require(a0_0xf2a334(0x2d5)),js=require('uuid'),Kt=class u{constructor(_0x488eed,_0x1c5c0a,_0x1f1feb){const _0x5b6bd2=a0_0xf2a334;this['configService']=_0x488eed,this[_0x5b6bd2(0x7e0)]=_0x1c5c0a,this[_0x5b6bd2(0x677)]=_0x1f1feb,this['logger']=new $(u[_0x5b6bd2(0x76f)]);}async[a0_0xf2a334(0x173)](_0x22006b){const _0x453d42=a0_0xf2a334;let _0x329f5b=this[_0x453d42(0x566)][_0x453d42(0x4c6)](_0x453d42(0x67c))[_0x453d42(0x61f)],_0x1b50f6=(0x0,Pi['sign'])({'instanceName':_0x22006b['instanceName'],'apiName':ot,'tokenId':(0x0,js['v4'])()},_0x329f5b['SECRET'],{'expiresIn':_0x329f5b[_0x453d42(0x912)],'encoding':_0x453d42(0x664),'subject':_0x453d42(0x84a)}),_0x3fec54=await this[_0x453d42(0x677)]['auth']['create']({'jwt':_0x1b50f6},_0x22006b[_0x453d42(0x29c)]);if(_0x3fec54[_0x453d42(0x830)])throw this[_0x453d42(0x5e7)][_0x453d42(0x830)]({'localError':u[_0x453d42(0x76f)]+_0x453d42(0x27b),'error':_0x3fec54[_0x453d42(0x830)]}),new m(_0x453d42(0x5a6),_0x3fec54['error']?.['toString']());return{'jwt':_0x1b50f6};}async[a0_0xf2a334(0x1b8)](_0x3da442){const _0x2de399=a0_0xf2a334;let _0x2764a4=(0x0,js['v4'])()[_0x2de399(0x563)](),_0x5dd6b7=await this['repository'][_0x2de399(0x1a5)]['create']({'apikey':_0x2764a4},_0x3da442[_0x2de399(0x29c)]);if(_0x5dd6b7[_0x2de399(0x830)])throw this['logger'][_0x2de399(0x830)]({'localError':u[_0x2de399(0x76f)]+_0x2de399(0x27b),'error':_0x5dd6b7['error']}),new m(_0x2de399(0x5a6),_0x5dd6b7[_0x2de399(0x830)]?.[_0x2de399(0x20e)]());return{'apikey':_0x2764a4};}async['generateHash'](_0xdb2034){const _0x1bde85=a0_0xf2a334;let _0x145aec=this[_0x1bde85(0x566)][_0x1bde85(0x4c6)]('AUTHENTICATION');return await this[_0x145aec[_0x1bde85(0x8eb)]](_0xdb2034);}},Qt=class{constructor(_0x41a88c){const _0x189022=a0_0xf2a334;this[_0x189022(0x7e0)]=_0x41a88c;}async[a0_0xf2a334(0x168)](_0x5ca6ce,_0x1604df){const _0x1c1fe1=a0_0xf2a334;return await this[_0x1c1fe1(0x7e0)][_0x1c1fe1(0x2af)][_0x5ca6ce[_0x1c1fe1(0x29c)]][_0x1c1fe1(0x168)](_0x1604df);}async[a0_0xf2a334(0x625)](_0x18b141,_0x507616){const _0x5dfd4e=a0_0xf2a334;return await this[_0x5dfd4e(0x7e0)][_0x5dfd4e(0x2af)][_0x18b141['instanceName']]['updateGroupPicture'](_0x507616);}async['groupDesc'](_0x1e4dec,_0x370dad){const _0x470f08=a0_0xf2a334;return await this[_0x470f08(0x7e0)]['waInstances'][_0x1e4dec['instanceName']][_0x470f08(0x89f)](_0x370dad);}async[a0_0xf2a334(0x790)](_0x38f5d9,_0xa3f6fe){const _0x120ed3=a0_0xf2a334;return await this[_0x120ed3(0x7e0)][_0x120ed3(0x2af)][_0x38f5d9[_0x120ed3(0x29c)]][_0x120ed3(0x790)](_0xa3f6fe);}async['groupBetterSetting'](_0x3d303d,_0x194a61){const _0x350640=a0_0xf2a334;return await this[_0x350640(0x7e0)][_0x350640(0x2af)][_0x3d303d['instanceName']]['groupBetterSetting'](_0x194a61);}async['groupSetting'](_0x73ddc1,_0x2b1db0){const _0x1f0336=a0_0xf2a334;return await this[_0x1f0336(0x7e0)]['waInstances'][_0x73ddc1[_0x1f0336(0x29c)]]['groupSetting'](_0x2b1db0);}async['findGroupInfo'](_0x1f84e8,_0x5e0de0){const _0xf58c6f=a0_0xf2a334;return await this[_0xf58c6f(0x7e0)][_0xf58c6f(0x2af)][_0x1f84e8[_0xf58c6f(0x29c)]][_0xf58c6f(0x2ab)](_0x5e0de0);}async[a0_0xf2a334(0x873)](_0x21c186){const _0x70f3fc=a0_0xf2a334;return await this['waMonitor'][_0x70f3fc(0x2af)][_0x21c186[_0x70f3fc(0x29c)]][_0x70f3fc(0x873)]();}async['inviteCode'](_0x3896e4,_0x1d0de5){const _0x2c3bb5=a0_0xf2a334;return await this[_0x2c3bb5(0x7e0)][_0x2c3bb5(0x2af)][_0x3896e4['instanceName']][_0x2c3bb5(0x889)](_0x1d0de5);}async[a0_0xf2a334(0x8dc)](_0x20fb31,_0x2db558){const _0x309824=a0_0xf2a334;return await this[_0x309824(0x7e0)][_0x309824(0x2af)][_0x20fb31[_0x309824(0x29c)]]['joinGroup'](_0x2db558);}async[a0_0xf2a334(0x85b)](_0x7f6794,_0x252def){const _0x33eb86=a0_0xf2a334;return await this[_0x33eb86(0x7e0)][_0x33eb86(0x2af)][_0x7f6794[_0x33eb86(0x29c)]][_0x33eb86(0x85b)](_0x252def);}async[a0_0xf2a334(0x692)](_0x52cbf8,_0x305594){const _0x4944f6=a0_0xf2a334;return await this[_0x4944f6(0x7e0)][_0x4944f6(0x2af)][_0x52cbf8[_0x4944f6(0x29c)]][_0x4944f6(0x692)](_0x305594);}async[a0_0xf2a334(0x462)](_0x28bce0,_0x57aea4){const _0x30f9c2=a0_0xf2a334;return await this[_0x30f9c2(0x7e0)]['waInstances'][_0x28bce0['instanceName']]['findParticipants'](_0x57aea4);}async[a0_0xf2a334(0x4ce)](_0x22315c,_0x162953){const _0x2520c9=a0_0xf2a334;return await this['waMonitor'][_0x2520c9(0x2af)][_0x22315c[_0x2520c9(0x29c)]][_0x2520c9(0x19c)](_0x162953);}async[a0_0xf2a334(0x167)](_0x153b3b,_0x451900){const _0x1bb98f=a0_0xf2a334;return await this[_0x1bb98f(0x7e0)]['waInstances'][_0x153b3b['instanceName']]['toggleEphemeral'](_0x451900);}async[a0_0xf2a334(0x239)](_0x492fe4,_0x87ddb){const _0x1d7377=a0_0xf2a334;return await this[_0x1d7377(0x7e0)][_0x1d7377(0x2af)][_0x492fe4[_0x1d7377(0x29c)]][_0x1d7377(0x239)](_0x87ddb);}},Yt=class{constructor(_0x68b563){const _0x2634df=a0_0xf2a334;this[_0x2634df(0x7e0)]=_0x68b563;}[a0_0xf2a334(0x2d0)](_0x10a25f,_0x535b21){const _0x31316a=a0_0xf2a334;return this[_0x31316a(0x7e0)][_0x31316a(0x2af)][_0x10a25f[_0x31316a(0x29c)]][_0x31316a(0x5a4)](_0x535b21);}async['find'](_0x4c96f5){const _0x7079d9=a0_0xf2a334;try{return await this[_0x7079d9(0x7e0)]['waInstances'][_0x4c96f5[_0x7079d9(0x29c)]][_0x7079d9(0x4e7)]();}catch{return{'enabled':null,'url':''};}}},ch=new $(a0_0xf2a334(0x7aa)),Xt=class{constructor(_0x3b5ff1){const _0x2b9e4c=a0_0xf2a334;this[_0x2b9e4c(0x7e0)]=_0x3b5ff1;}async[a0_0xf2a334(0x7c4)](_0x4ecf8f,_0x7bf06d){const _0x1c247e=a0_0xf2a334;return await this[_0x1c247e(0x7e0)][_0x1c247e(0x2af)][_0x4ecf8f[_0x1c247e(0x29c)]]['editScheduleMessage'](_0x7bf06d);}async[a0_0xf2a334(0x632)](_0x56df50){const _0xc7706a=a0_0xf2a334;return await this['waMonitor'][_0xc7706a(0x2af)][_0x56df50[_0xc7706a(0x29c)]]['getScheduleMessage']();}async[a0_0xf2a334(0x6ad)](_0x3abb0c){const _0x4c82e5=a0_0xf2a334;return await this['waMonitor'][_0x4c82e5(0x2af)][_0x3abb0c[_0x4c82e5(0x29c)]][_0x4c82e5(0x6ad)]();}async[a0_0xf2a334(0x246)](_0x22e52){const _0x1b2629=a0_0xf2a334;return await this['waMonitor']['waInstances'][_0x22e52[_0x1b2629(0x29c)]][_0x1b2629(0x246)]();}async[a0_0xf2a334(0x3f2)](_0x351a65){const _0x5c8058=a0_0xf2a334;return await this[_0x5c8058(0x7e0)][_0x5c8058(0x2af)][_0x351a65['instanceName']]['getAutomateSystem']();}async[a0_0xf2a334(0x2ce)](_0x5633e5,_0x3d6700){const _0x1fb6fa=a0_0xf2a334;return await this[_0x1fb6fa(0x7e0)]['waInstances'][_0x5633e5['instanceName']][_0x1fb6fa(0x2ce)](_0x3d6700);}async[a0_0xf2a334(0x360)](_0x52b3cb,_0xe81947){const _0x62f8c4=a0_0xf2a334;return await this[_0x62f8c4(0x7e0)][_0x62f8c4(0x2af)][_0x52b3cb[_0x62f8c4(0x29c)]][_0x62f8c4(0x360)](_0xe81947);}async['updateAutoCompleteMessages'](_0x28d0d3,_0x53a701){const _0x3dd67f=a0_0xf2a334;return await this[_0x3dd67f(0x7e0)][_0x3dd67f(0x2af)][_0x28d0d3['instanceName']][_0x3dd67f(0x6ee)](_0x53a701);}async['updateFlowConfig'](_0x2e56d9,_0x781ea7){const _0x4d21e2=a0_0xf2a334;return await this[_0x4d21e2(0x7e0)][_0x4d21e2(0x2af)][_0x2e56d9[_0x4d21e2(0x29c)]][_0x4d21e2(0x41b)](_0x781ea7);}async['startFlow'](_0x300503,_0x56d8a9){const _0x5adcab=a0_0xf2a334;return await this[_0x5adcab(0x7e0)][_0x5adcab(0x2af)][_0x300503[_0x5adcab(0x29c)]][_0x5adcab(0x7e2)](_0x56d8a9);}async[a0_0xf2a334(0x24b)](_0x2ae41c,_0xbc6cb9,_0x57b6c9,_0x36690a){const _0x426591=a0_0xf2a334;return await this[_0x426591(0x7e0)]['waInstances'][_0x2ae41c][_0x426591(0x24b)](_0xbc6cb9,_0x57b6c9,_0x36690a);}async[a0_0xf2a334(0x72f)](_0x547488,_0x595d16){const _0x45d8d5=a0_0xf2a334;return await this[_0x45d8d5(0x7e0)][_0x45d8d5(0x2af)][_0x547488['instanceName']][_0x45d8d5(0x72f)](_0x595d16);}async[a0_0xf2a334(0x72a)](_0x5b02a7,_0x5e6624){const _0x1fb1e5=a0_0xf2a334;return await this[_0x1fb1e5(0x7e0)][_0x1fb1e5(0x2af)][_0x5b02a7[_0x1fb1e5(0x29c)]][_0x1fb1e5(0x72a)](_0x5e6624);}async['editConversation'](_0x2c3cb5,_0x1209c4){const _0x4b36df=a0_0xf2a334;return await this[_0x4b36df(0x7e0)]['waInstances'][_0x2c3cb5[_0x4b36df(0x29c)]][_0x4b36df(0x7e3)](_0x1209c4);}async[a0_0xf2a334(0x673)](_0x5b21a4,_0x2a75d2){const _0x7e5078=a0_0xf2a334;return await this[_0x7e5078(0x7e0)][_0x7e5078(0x2af)][_0x5b21a4[_0x7e5078(0x29c)]]['deleteConversation'](_0x2a75d2);}async['getFlow'](_0x4b54e6,_0x444f48){const _0x36d8e0=a0_0xf2a334;return await this[_0x36d8e0(0x7e0)][_0x36d8e0(0x2af)][_0x4b54e6[_0x36d8e0(0x29c)]][_0x36d8e0(0x43f)](_0x444f48[_0x36d8e0(0x29b)]);}async['createFlow'](_0x24c1cb,_0x54ce9d,_0x51e217){const _0x11603e=a0_0xf2a334;return await this[_0x11603e(0x7e0)][_0x11603e(0x2af)][_0x24c1cb[_0x11603e(0x29c)]]['createFlow'](_0x54ce9d,_0x51e217);}async['editFlow'](_0x9a08b8,_0x4dacfb,_0x4d0032){const _0x1cd873=a0_0xf2a334;return await this['waMonitor'][_0x1cd873(0x2af)][_0x9a08b8[_0x1cd873(0x29c)]][_0x1cd873(0x8d6)](_0x4dacfb,_0x4d0032);}async[a0_0xf2a334(0x8e8)](_0x54bbe6,_0x3a9569){const _0x124563=a0_0xf2a334;return await this[_0x124563(0x7e0)][_0x124563(0x2af)][_0x54bbe6['instanceName']][_0x124563(0x8e8)](_0x3a9569);}async[a0_0xf2a334(0x2fa)](_0x1a9a83,_0x40d5d9){const _0x1dfe14=a0_0xf2a334;return await this[_0x1dfe14(0x7e0)][_0x1dfe14(0x2af)][_0x1a9a83[_0x1dfe14(0x29c)]][_0x1dfe14(0x2fa)](_0x40d5d9);}async[a0_0xf2a334(0x430)](_0x533330,_0x7a929c){const _0x5514a8=a0_0xf2a334;return await this[_0x5514a8(0x7e0)][_0x5514a8(0x2af)][_0x533330[_0x5514a8(0x29c)]][_0x5514a8(0x430)](_0x7a929c);}async[a0_0xf2a334(0x251)](_0x294372,_0x5e890b){const _0x345737=a0_0xf2a334;return await this['waMonitor']['waInstances'][_0x294372[_0x345737(0x29c)]][_0x345737(0x251)](_0x5e890b);}async['editFlowVaredit'](_0x4b4f7b,_0x5c95fe){const _0x453eb0=a0_0xf2a334;return await this[_0x453eb0(0x7e0)][_0x453eb0(0x2af)][_0x4b4f7b[_0x453eb0(0x29c)]][_0x453eb0(0x730)](_0x5c95fe);}async[a0_0xf2a334(0x2e8)](_0x4d77be,_0x67d0af){const _0x494f0=a0_0xf2a334;return await this[_0x494f0(0x7e0)]['waInstances'][_0x4d77be[_0x494f0(0x29c)]][_0x494f0(0x2e8)](_0x67d0af);}async[a0_0xf2a334(0x777)](_0x3dc3be,_0x1f346b){const _0x4a9964=a0_0xf2a334;return await this['waMonitor'][_0x4a9964(0x2af)][_0x3dc3be[_0x4a9964(0x29c)]][_0x4a9964(0x777)](_0x1f346b);}async[a0_0xf2a334(0x473)](_0x1c9869){const _0x2f310d=a0_0xf2a334;return await this[_0x2f310d(0x7e0)][_0x2f310d(0x2af)][_0x1c9869[_0x2f310d(0x29c)]][_0x2f310d(0x473)]();}},Zt=class{constructor(_0x29bf55){const _0x286ed7=a0_0xf2a334;this[_0x286ed7(0x894)]=_0x29bf55;}async[a0_0xf2a334(0x1d5)](_0x4c2d70,_0x146b32){return this['webhookService']['create'](_0x4c2d70,_0x146b32);}async[a0_0xf2a334(0x4e7)](_0x21bbb8){const _0x116c5a=a0_0xf2a334;return this[_0x116c5a(0x894)]['find'](_0x21bbb8);}},es=class extends O{constructor(_0x5cf153,_0x579620){const _0x28ccb8=a0_0xf2a334;super(_0x579620),this[_0x28ccb8(0x67b)]=_0x5cf153,this[_0x28ccb8(0x566)]=_0x579620;}async[a0_0xf2a334(0x2d0)](_0x3f7abc,_0x3b6016){const _0xcc3dc7=a0_0xf2a334;try{return this[_0xcc3dc7(0x3de)]['ENABLED']?{'insertCount':(await this[_0xcc3dc7(0x67b)][_0xcc3dc7(0x2a2)]({'_id':_0x3b6016},{..._0x3f7abc},{'upsert':!0x0}))['modifiedCount']}:{'insertCount':0x1};}catch(_0x416c19){return _0x416c19;}}async['delete'](_0x5afbd8){const _0x552ffc=a0_0xf2a334;try{if(this['dbSettings'][_0x552ffc(0x6f6)]){await this[_0x552ffc(0x67b)][_0x552ffc(0x221)]({'_id':_0x5afbd8});return;}}catch(_0x48b245){return{'error':_0x48b245};}}async[a0_0xf2a334(0x556)](_0x5d30a3){const _0x41cf26=a0_0xf2a334;try{if(this['dbSettings'][_0x41cf26(0x6f6)])return await this[_0x41cf26(0x67b)]['findOne']({'_id':_0x5d30a3});}catch{return{};}}},ts=class extends O{constructor(_0x164e42,_0x177fb1){const _0x13001e=a0_0xf2a334;super(_0x177fb1),this[_0x13001e(0x207)]=_0x164e42,this[_0x13001e(0x566)]=_0x177fb1,this[_0x13001e(0x1a5)]=_0x177fb1['get'](_0x13001e(0x67c));}async['create'](_0x423e4b,_0x2fd538){const _0x3bfd8e=a0_0xf2a334;try{if(this[_0x3bfd8e(0x3de)]['ENABLED'])return{'insertCount':(await this[_0x3bfd8e(0x207)][_0x3bfd8e(0x32f)]({'_id':_0x2fd538},{'$set':{..._0x423e4b}},{'upsert':!0x0}))[_0x3bfd8e(0x818)]};}catch(_0x1923ef){return{'error':_0x1923ef};}}async['updateAll'](_0x4157d0,_0x4f137e){const _0x3fb429=a0_0xf2a334;try{if(this[_0x3fb429(0x3de)]['ENABLED'])return{'insertCount':(await this[_0x3fb429(0x207)][_0x3fb429(0x362)](_0x4157d0,{'$set':_0x4f137e},{'upsert':!0x1}))[_0x3fb429(0x818)]};throw new Error(_0x3fb429(0x2dd));}catch(_0x2999b5){return{'error':_0x2999b5};}}async[a0_0xf2a334(0x881)](_0x36cb46){const _0xb91702=a0_0xf2a334;try{if(this[_0xb91702(0x3de)][_0xb91702(0x6f6)])return{'insertCount':(await this[_0xb91702(0x207)][_0xb91702(0x881)](_0x36cb46))['deletedCount']};throw new Error(_0xb91702(0x5c6));}catch(_0xdbc6e8){return{'error':_0xdbc6e8};}}async[a0_0xf2a334(0x44e)](_0x139525){const _0x4d9548=a0_0xf2a334;try{if(this[_0x4d9548(0x3de)][_0x4d9548(0x6f6)]){await this[_0x4d9548(0x207)][_0x4d9548(0x221)]({'_id':_0x139525});return;}}catch(_0x48006c){return{'error':_0x48006c};}}async[a0_0xf2a334(0x556)](_0x37bb72){const _0x4c735d=a0_0xf2a334;try{if(this[_0x4c735d(0x3de)][_0x4c735d(0x6f6)])return await this[_0x4c735d(0x207)][_0x4c735d(0x18a)]({'_id':_0x37bb72});}catch{return{};}}async[a0_0xf2a334(0x857)](){const _0x4a0b3a=a0_0xf2a334;try{if(this[_0x4a0b3a(0x3de)][_0x4a0b3a(0x6f6)])return await this[_0x4a0b3a(0x207)][_0x4a0b3a(0x556)]();}catch{return[];}}async[a0_0xf2a334(0x81e)](_0x164236){const _0x93723e=a0_0xf2a334;try{if(this[_0x93723e(0x3de)][_0x93723e(0x6f6)])return await this[_0x93723e(0x207)][_0x93723e(0x556)](_0x164236);}catch{return[];}}},ss=class extends O{async[a0_0xf2a334(0x221)](_0x405e00){const _0x5db094=a0_0xf2a334;try{let _0x5afdb3=A(_0x405e00[_0x5db094(0x770)]);return{'deletedCount':(await Me[_0x5db094(0x221)](_0x5afdb3))[_0x5db094(0x706)]};}catch(_0x15c887){return{'error':_0x15c887?.['toString']()};}}async[a0_0xf2a334(0x32f)](_0x23c8cb,_0x35bf7d){const _0xd8be2=a0_0xf2a334;try{let _0x3cc758=await Me[_0xd8be2(0x7d9)](_0x23c8cb);return _0x3cc758?(Object[_0xd8be2(0x58a)](_0x3cc758,_0x35bf7d),await _0x3cc758['save']()):(console[_0xd8be2(0x830)](_0xd8be2(0x4b3),_0x23c8cb),null);}catch(_0x3581d4){return console[_0xd8be2(0x830)](_0xd8be2(0x187),_0x3581d4),null;}}async[a0_0xf2a334(0x281)](_0xd32bf2){const _0x323853=a0_0xf2a334;try{return await new Me(_0xd32bf2)['save']();}catch(_0x3e4e48){return console['error'](_0x323853(0x409),_0x3e4e48),null;}}async[a0_0xf2a334(0x857)](_0x3f8191){const _0x453db5=a0_0xf2a334;try{let _0x583d6b=_0x3f8191[_0x453db5(0x770)]??{};return await Me[_0x453db5(0x556)](_0x583d6b)[_0x453db5(0x384)](_0x3f8191['limit']??0x0)[_0x453db5(0x695)]();}catch(_0x57588f){return console[_0x453db5(0x830)]('Erro\x20ao\x20buscar\x20fluxos:',_0x57588f),[];}}async['findOne'](_0x49d3e3){const _0x155c42=a0_0xf2a334;try{let _0x1cccf3=A(_0x49d3e3[_0x155c42(0x770)]);return await Me[_0x155c42(0x18a)](_0x1cccf3)[_0x155c42(0x695)]();}catch{return null;}}},as=class extends O{[a0_0xf2a334(0x347)](_0x50d639){return Sa(_0x50d639);}async[a0_0xf2a334(0x26f)](_0x2cabb8){const _0x429516=a0_0xf2a334;if(_0x2cabb8[_0x429516(0x250)]!==0x0)try{return{'insertCount':(await this['getConversationModelForOwner'](_0x2cabb8[0x0][_0x429516(0x84f)])[_0x429516(0x210)]([..._0x2cabb8]))[_0x429516(0x250)]};}catch(_0x1bde3a){return _0x1bde3a;}}async['delete'](_0x4c15b7,_0x1b36e6){const _0x22be4f=a0_0xf2a334;try{let _0x203a10=this[_0x22be4f(0x347)](_0x1b36e6),_0x35ca54=A(_0x4c15b7[_0x22be4f(0x770)]);return{'deletedCount':(await _0x203a10[_0x22be4f(0x881)](_0x35ca54))[_0x22be4f(0x706)]};}catch(_0x3d06df){return{'error':_0x3d06df?.[_0x22be4f(0x20e)]()};}}async[a0_0xf2a334(0x221)](_0x1deb33,_0x424c67){const _0x11b280=a0_0xf2a334;try{let _0x3e1b15=this[_0x11b280(0x347)](_0x424c67),_0x2b7c34=A(_0x1deb33[_0x11b280(0x770)]);return{'deletedCount':(await _0x3e1b15[_0x11b280(0x221)](_0x2b7c34))[_0x11b280(0x706)]};}catch(_0x3b61cc){return{'error':_0x3b61cc?.[_0x11b280(0x20e)]()};}}async[a0_0xf2a334(0x227)](_0x5c3417,_0x327a22){const _0x2d2fd7=a0_0xf2a334;try{if(_0x5c3417[_0x2d2fd7(0x250)]===0x0)return;let _0x134750=this['getConversationModelForOwner'](_0x327a22),_0x11bc2a=_0x5c3417['map'](_0x3a8929=>({'updateOne':{'filter':{'name':_0x3a8929['name'],'owner':_0x327a22},'update':{..._0x3a8929}}})),{modifiedCount:_0x3e76b2}=await _0x134750[_0x2d2fd7(0x8b6)](_0x11bc2a);return{'insertCount':_0x3e76b2};}catch{return;}}async[a0_0xf2a334(0x362)](_0x29b11c,_0x57226c,_0x41bbc1){const _0x572516=a0_0xf2a334;try{return{'modifiedCount':(await this[_0x572516(0x347)](_0x41bbc1)['updateMany'](_0x29b11c,{'$set':_0x57226c})['exec']())['modifiedCount']};}catch(_0x557858){return console[_0x572516(0x830)](_0x572516(0x5ab),_0x557858),{'error':_0x557858};}}async['updateOne'](_0x423f4b,_0x59e1b2,_0x395749){const _0x531107=a0_0xf2a334;try{return await this[_0x531107(0x347)](_0x395749)['findOneAndUpdate']({'_id':_0x423f4b},{'$set':_0x59e1b2},{'new':!0x0,'upsert':!0x0})[_0x531107(0x695)]();}catch(_0x5a0fdb){return console[_0x531107(0x830)](_0x5a0fdb),null;}}async[a0_0xf2a334(0x556)](_0x349db3,_0x323a2d){const _0x21ae82=a0_0xf2a334;try{return await this[_0x21ae82(0x347)](_0x323a2d)[_0x21ae82(0x556)](_0x349db3)[_0x21ae82(0x53f)]({'lastInteraction':-0x1})[_0x21ae82(0x695)]();}catch{return[];}}async[a0_0xf2a334(0x18a)](_0x182641,_0x236952){const _0x561508=a0_0xf2a334;try{return await this[_0x561508(0x347)](_0x236952)['findOne']({..._0x182641['where']})[_0x561508(0x695)]();}catch{return null;}}async['deleteAll'](_0x510d67){const _0x454cc9=a0_0xf2a334;try{return await this[_0x454cc9(0x347)](_0x510d67)[_0x454cc9(0x418)][_0x454cc9(0x63f)](),{'success':!0x0};}catch(_0x3f7700){return console[_0x454cc9(0x830)](_0x3f7700),{'success':!0x1,'error':_0x3f7700};}}},is=class extends O{[a0_0xf2a334(0x4fa)](_0x4e584){return Ma(_0x4e584);}async[a0_0xf2a334(0x8b6)](_0x493024,_0x1149d2){const _0x27feab=a0_0xf2a334;try{return await this['getScheduleMessageModelForOwner'](_0x1149d2)[_0x27feab(0x8b6)](_0x493024);}catch(_0x1e3d8d){return console['error'](_0x27feab(0x324),_0x1e3d8d),null;}}async[a0_0xf2a334(0x281)](_0x21f975,_0x1cdae2){const _0x19d6ab=a0_0xf2a334;try{let _0xc7d778=this['getScheduleMessageModelForOwner'](_0x1cdae2);return await new _0xc7d778(_0x21f975)[_0x19d6ab(0x88e)]();}catch(_0x1f0ccd){return console[_0x19d6ab(0x830)](_0x19d6ab(0x7a0),_0x1f0ccd),null;}}async[a0_0xf2a334(0x221)](_0x111f3f,_0x273e40){const _0x42663c=a0_0xf2a334;try{return await this['getScheduleMessageModelForOwner'](_0x273e40)[_0x42663c(0x1bf)](_0x111f3f),{};}catch(_0x1ada1f){return{'error':_0x1ada1f?.[_0x42663c(0x20e)]()};}}async['updateOne'](_0x1f676e,_0x48a556,_0x447caa,_0x5c187e={}){const _0x1bd00c=a0_0xf2a334;try{return await this[_0x1bd00c(0x4fa)](_0x447caa)[_0x1bd00c(0x181)](_0x1f676e,_0x48a556,{..._0x5c187e,'new':!0x0})[_0x1bd00c(0x695)]();}catch(_0x5d0d15){return console[_0x1bd00c(0x830)](_0x1bd00c(0x5b7),_0x5d0d15),null;}}async[a0_0xf2a334(0x2ea)](_0x5d3eab,_0x21a21b,_0x5baad9){const _0x304fa8=a0_0xf2a334;try{return await this[_0x304fa8(0x4fa)](_0x5baad9)[_0x304fa8(0x564)](_0x5d3eab,_0x21a21b,{'new':!0x0})['lean']();}catch(_0x10852b){return console[_0x304fa8(0x830)](_0x304fa8(0x5b7),_0x10852b),null;}}async[a0_0xf2a334(0x556)](_0x2f73a5,_0x103108){const _0xddb184=a0_0xf2a334;try{return await this[_0xddb184(0x4fa)](_0x103108)['find'](_0x2f73a5[_0xddb184(0x770)])[_0xddb184(0x384)](_0x2f73a5?.[_0xddb184(0x384)]??0x0)[_0xddb184(0x53f)]({'when':0x1})['lean']();}catch{return[];}}async['findOne'](_0x3d9672,_0x2a10cc){const _0x45edad=a0_0xf2a334;try{return await this['getScheduleMessageModelForOwner'](_0x2a10cc)[_0x45edad(0x18a)](_0x3d9672[_0x45edad(0x770)])[_0x45edad(0x53f)]({'when':0x1})[_0x45edad(0x695)]();}catch{return null;}}async[a0_0xf2a334(0x7d9)](_0x511b48,_0x1f8d4a){const _0x442d22=a0_0xf2a334;try{return await this[_0x442d22(0x4fa)](_0x1f8d4a)[_0x442d22(0x7d9)](_0x511b48)[_0x442d22(0x695)]();}catch{return null;}}async[a0_0xf2a334(0x881)](_0x5284a8,_0x218a33){const _0x2acf72=a0_0xf2a334;try{return{'deletedCount':(await this[_0x2acf72(0x4fa)](_0x218a33)['deleteMany'](_0x5284a8))['deletedCount']};}catch(_0x52f094){return console['error']('Erro\x20ao\x20deletar\x20mensagens:',_0x52f094),{'error':_0x52f094};}}async['deleteAll'](_0x53bc77){const _0x4684a7=a0_0xf2a334;try{return await this[_0x4684a7(0x4fa)](_0x53bc77)[_0x4684a7(0x418)][_0x4684a7(0x63f)](),{'success':!0x0};}catch(_0x49ced9){return console['error'](_0x49ced9),{'success':!0x1,'error':_0x49ced9};}}},os=class extends O{async[a0_0xf2a334(0x227)](_0xfabccc,_0x2ffec3){const _0x19d132=a0_0xf2a334;try{if(this['dbSettings'][_0x19d132(0x6f6)])return await Te[_0x19d132(0x181)]({'_id':_0x2ffec3},{'$set':_0xfabccc},{'new':!0x0});}catch(_0x1731d0){throw console[_0x19d132(0x830)](_0x19d132(0x35a),_0x1731d0),_0x1731d0;}}async[a0_0xf2a334(0x471)](_0x2134c9){const _0x37dd62=a0_0xf2a334;try{let _0x401132=await Te[_0x37dd62(0x7d9)](_0x2134c9);return _0x401132?_0x401132['autoCompleteMessages']||(_0x401132[_0x37dd62(0x408)]=[],await _0x401132[_0x37dd62(0x88e)]()):(_0x401132=new Te({'_id':_0x2134c9,'autoCompleteMessages':[]}),await _0x401132[_0x37dd62(0x88e)]()),_0x401132;}catch(_0x29f371){return _0x29f371['code']===0x2af8&&_0x29f371[_0x37dd62(0x2de)]&&_0x29f371[_0x37dd62(0x2de)][_0x37dd62(0x24d)]?(console['error'](_0x37dd62(0x858)),await Te[_0x37dd62(0x418)][_0x37dd62(0x483)](_0x37dd62(0x2d3)),null):(console[_0x37dd62(0x830)](_0x37dd62(0x621),_0x29f371),null);}}},Jo=new $('WA\x20MODULE'),qo=new Qe(S),Vo=new Jt(S),Go=new nt(S),Bo=new qt(oa,S),Wo=new Vt(na,S),zo=new es(ha,S),Ho=new ts(ua,S),Ko=new Ee(We,S),Qo=new ss(S),Yo=new Gt(S),Xo=new as(S),Zo=new is(S),er=new os(S),me=new He(qo,Vo,Go,Bo,Wo,zo,Ho,Ko,Qo,Xo,Yo,Zo,er,T?.[a0_0xf2a334(0x75d)]()),G=new jt(hs,S,me),tr=new Kt(S,G,me),sr=new Yt(G),As=new Zt(sr),_=new Xt(G),le=new zt(G,S,me,hs,tr),B=new Ht(G),D=new Bt(G),q=new Qt(G);Jo[a0_0xf2a334(0x5b4)]('Module\x20-\x20ON');var $g=require('express-async-errors'),Js=require('fs'),Di=I(require(a0_0xf2a334(0x1b9))),ki=I(require(a0_0xf2a334(0x516))),je=class u{static #e;static set['app'](_0x4ddcb8){this.#e=_0x4ddcb8;}static get[a0_0xf2a334(0x1b9)](){const _0x1b4b64=a0_0xf2a334;let {FULLCHAIN:_0x30bd20,PRIVKEY:_0x121bec}=S[_0x1b4b64(0x4c6)](_0x1b4b64(0x41c));return Di[_0x1b4b64(0x591)]({'cert':(0x0,Js['readFileSync'])(_0x30bd20),'key':(0x0,Js[_0x1b4b64(0x247)])(_0x121bec)},u.#e);}static get[a0_0xf2a334(0x516)](){const _0x1ff4ff=a0_0xf2a334;return ki[_0x1ff4ff(0x591)](u.#e);}},Je=I(require('fs')),qi=I(require(a0_0xf2a334(0x52c))),qe=I(require(a0_0xf2a334(0x3a0))),ns=I(require(a0_0xf2a334(0x618))),rs=require(a0_0xf2a334(0x171));function ar(){const _0x50776a=a0_0xf2a334;G[_0x50776a(0x789)]();let _0x1a24fc=ns[_0x50776a(0x59e)][_0x50776a(0x666)](__dirname,'downloads');Ji(_0x1a24fc);}var Ji=_0x469425=>{const _0x1d7ec0=a0_0xf2a334;let _0x1ba250=Je[_0x1d7ec0(0x59e)][_0x1d7ec0(0x71a)](_0x469425),_0x4eb5e3=0xc*0x3c*0x3c*0x3e8,_0x581020=0x2*0x3c*0x3c*0x3e8,_0x1288b5=new Date()[_0x1d7ec0(0x43c)]();_0x1ba250[_0x1d7ec0(0x3b5)](_0x3ea2c4=>{const _0x1cb9ed=_0x1d7ec0;let _0x584587=ns[_0x1cb9ed(0x59e)][_0x1cb9ed(0x666)](_0x469425,_0x3ea2c4),_0x3bf9a6=Je[_0x1cb9ed(0x59e)]['statSync'](_0x584587)[_0x1cb9ed(0x558)][_0x1cb9ed(0x43c)]();_0x1288b5-_0x3bf9a6>_0x4eb5e3&&(Je[_0x1cb9ed(0x59e)][_0x1cb9ed(0x2df)](_0x584587),console['log'](_0x1cb9ed(0x739)+_0x3ea2c4));}),setTimeout(()=>Ji(_0x469425),_0x581020);};function ir(){const _0x2d093a=a0_0xf2a334;let _0x33d0fb=new $(_0x2d093a(0x902)),_0x3cd43c=(0x0,we[_0x2d093a(0x59e)])();_0x3cd43c[_0x2d093a(0x8c0)]((0x0,ji[_0x2d093a(0x59e)])({'origin'(_0x4f97a3,_0x54a062){const _0x45d1a8=_0x2d093a;let {ORIGIN:_0xfcab5c}=S[_0x45d1a8(0x4c6)](_0x45d1a8(0x450));return _0x4f97a3||(_0x4f97a3='*'),_0xfcab5c['indexOf']('*')!==-0x1||_0xfcab5c[_0x45d1a8(0x639)](_0x4f97a3)!==-0x1?_0x54a062(null,!0x0):_0x54a062(new Error(_0x45d1a8(0x702)));},'methods':[...S['get'](_0x2d093a(0x450))[_0x2d093a(0x882)]],'credentials':S[_0x2d093a(0x4c6)]('CORS')[_0x2d093a(0x51f)]}),(0x0,we['urlencoded'])({'extended':!0x0,'limit':_0x2d093a(0x74c)}),(0x0,we[_0x2d093a(0x6cb)])({'limit':_0x2d093a(0x74c)})),_0x3cd43c[_0x2d093a(0x8c0)]((_0x3f4781,_0x5a6819,_0x156f19)=>{const _0x157fab=_0x2d093a;_0x3f4781[_0x157fab(0x618)]['startsWith']('/events')?_0x156f19():(0x0,Ui[_0x157fab(0x59e)])()(_0x3f4781,_0x5a6819,_0x156f19);}),_0x3cd43c[_0x2d093a(0x25e)](_0x2d093a(0x752),_0x2d093a(0x525)),_0x3cd43c['set'](_0x2d093a(0x162),(0x0,Vs[_0x2d093a(0x666)])(ne,'views')),_0x3cd43c[_0x2d093a(0x8c0)](we['default'][_0x2d093a(0x24c)]((0x0,Vs[_0x2d093a(0x666)])(ne,_0x2d093a(0x52f)))),_0x3cd43c[_0x2d093a(0x8c0)]((_0x4d371b,_0x189b0a,_0x477cff)=>{const _0x3d72cf=_0x2d093a;let _0x4fab96=_0x189b0a[_0x3d72cf(0x214)];_0x189b0a['send']=function(_0x39bfba){const _0x343990=_0x3d72cf;if(_0x4d371b['query']['convert']===_0x343990(0x2c5)||_0x4d371b[_0x343990(0x327)][_0x343990(0x309)]==='true'){let _0x54ab4f=JSON['parse'](_0x39bfba);_0x39bfba=JSON[_0x343990(0x34b)](_0x210a0b(_0x54ab4f));}return _0x4fab96[_0x343990(0x83f)](_0x189b0a,[_0x39bfba]);},_0x477cff();}),_0x3cd43c['use']('/',ke),_0x3cd43c[_0x2d093a(0x8c0)]((_0x2cbb0b,_0x96434e,_0x4aa83d,_0x12acb1)=>{const _0x349de7=_0x2d093a;if(_0x2cbb0b)return _0x4aa83d[_0x349de7(0x7cb)](_0x2cbb0b[_0x349de7(0x7cb)]||0x1f4)[_0x349de7(0x6cb)](_0x2cbb0b);},(_0x541506,_0x7588a1,_0x2e73c3)=>{const _0x1d97e3=_0x2d093a;let {method:_0x38998b,url:_0x566d78}=_0x541506;_0x7588a1[_0x1d97e3(0x7cb)](0x194)['json']({'status':0x194,'message':_0x1d97e3(0x276)+_0x38998b[_0x1d97e3(0x563)]()+'\x20'+_0x566d78,'error':_0x1d97e3(0x3d9)}),_0x2e73c3();});let _0x210a0b=(_0x3f7f49,_0x5b8e37=_0x2d093a(0x5cd))=>{const _0x4bb705=_0x2d093a;let _0x59ab09=(_0x41ccb9,_0x19085e=null,_0x4ea208=!0x1)=>{const _0x28ee44=a0_0x464b;let _0x155f7b={};return Object[_0x28ee44(0x3e5)](_0x41ccb9)[_0x28ee44(0x3b5)](_0x475a7a=>{const _0x14d073=_0x28ee44;let _0x3f99b7=_0x41ccb9[_0x475a7a],_0x1da21c=''+_0x5b8e37+_0x475a7a;_0x19085e&&!_0x4ea208&&(_0x1da21c=_0x19085e+'.'+_0x475a7a),!_0x3f99b7&&_0x3f99b7!==0x0&&_0x3f99b7!==!0x1||typeof _0x3f99b7>'u'?_0x155f7b[_0x1da21c]=null:typeof _0x3f99b7!=_0x14d073(0x524)&&!Array[_0x14d073(0x529)](_0x3f99b7)?_0x155f7b[_0x1da21c]=_0x3f99b7:typeof _0x3f99b7==_0x14d073(0x524)&&!Array[_0x14d073(0x529)](_0x3f99b7)?_0x155f7b=Object[_0x14d073(0x58a)](_0x155f7b,_0x59ab09(_0x3f99b7,_0x1da21c)):Array[_0x14d073(0x529)](_0x3f99b7)&&(typeof _0x3f99b7[0x0]=='object'?(_0x155f7b[_0x1da21c]=[],_0x3f99b7[_0x14d073(0x3b5)](_0x456d16=>{_0x155f7b[_0x1da21c]['push'](_0x59ab09(_0x456d16,_0x1da21c,!0x0));})):_0x155f7b[_0x1da21c]=_0x3f99b7);}),_0x155f7b;};return Array['isArray'](_0x3f7f49)?_0x3f7f49[_0x4bb705(0x5b0)](_0x830fec=>_0x59ab09(_0x830fec)):typeof _0x3f7f49=='object'&&_0x3f7f49!==null?_0x59ab09(_0x3f7f49):{};},_0x4e55e6=S[_0x2d093a(0x4c6)](_0x2d093a(0x902));je[_0x2d093a(0x7ad)]=_0x3cd43c;let _0x111f4b=je[_0x4e55e6[_0x2d093a(0x8eb)]],_0x36a76d='\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20';_0x111f4b[_0x2d093a(0x522)](_0x4e55e6[_0x2d093a(0x218)],()=>{const _0x448de3=_0x2d093a;_0x33d0fb[_0x448de3(0x6b2)](_0x36a76d),_0x33d0fb[_0x448de3(0x6b2)](_0x4e55e6[_0x448de3(0x8eb)]['toUpperCase']()+'\x20-\x20ON:\x20'+_0x4e55e6[_0x448de3(0x218)]);}),ar(),Zs();}var or=a0_0xf2a334(0x196),rr=ns[a0_0xf2a334(0x59e)]['join'](__dirname,a0_0xf2a334(0x2b6)),Re=null;function nr(){return new Promise((_0x5427ae,_0x47a63e)=>{const _0x58a45b=a0_0x464b;Je[_0x58a45b(0x59e)][_0x58a45b(0x7f8)](rr,'utf-8',(_0x5ef651,_0xcaf261)=>{const _0x5ab521=_0x58a45b;if(_0x5ef651){Re=_0x5ef651,_0x5427ae();return;}qi[_0x5ab521(0x59e)]['parse'](_0xcaf261)['remote\x20\x22origin\x22'][_0x5ab521(0x2b4)]===or?(Re=null,_0x5427ae()):(Re=new Error(_0x5ab521(0x1f3)),_0x5427ae());});});}async function cr(){const _0x54bed0=a0_0xf2a334;try{await nr(),await Bi();}catch(_0x5a4f5f){console['error'](_0x54bed0(0x1e6)+_0x5a4f5f),process[_0x54bed0(0x423)](0x1);}}cr();async function Vi(){const _0x3c34d0=a0_0xf2a334;let _0x1b8fd3;try{_0x1b8fd3=(await qe['default'][_0x3c34d0(0x4c6)](_0x3c34d0(0x8f0)))[_0x3c34d0(0x601)]['ip'];}catch(_0x130959){console[_0x3c34d0(0x830)](_0x130959);try{_0x1b8fd3=(await qe[_0x3c34d0(0x59e)][_0x3c34d0(0x4c6)](_0x3c34d0(0x629)))[_0x3c34d0(0x601)]['ip'];}catch(_0x398fd5){console[_0x3c34d0(0x830)](_0x398fd5);try{_0x1b8fd3=(await qe[_0x3c34d0(0x59e)][_0x3c34d0(0x4c6)](_0x3c34d0(0x69a)))[_0x3c34d0(0x601)][_0x3c34d0(0x834)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x397872){return console['error'](_0x397872),!0x1;}}}return _0x1b8fd3;}var Li=0x0;async function lr(){const _0x6a2224=a0_0xf2a334;let _0x5b019a=await new ue(S[_0x6a2224(0x4c6)](_0x6a2224(0x6e3)))[_0x6a2224(0x220)]();return console[_0x6a2224(0x6b2)]('instancias:\x20',_0x5b019a[_0x6a2224(0x250)]),_0x5b019a['length'];}function ur(_0x8872e4){const _0x5e0b0e=a0_0xf2a334;let _0x19b67c=_0x8872e4[_0x5e0b0e(0x4c6)]('SERVER')['URL'],_0x55aa84=_0x8872e4[_0x5e0b0e(0x4c6)](_0x5e0b0e(0x41c));console[_0x5e0b0e(0x6b2)](_0x5e0b0e(0x225),_0x19b67c),console[_0x5e0b0e(0x6b2)](_0x5e0b0e(0x357),_0x55aa84);let _0x1b46b0='',_0x5a189c=_0x19b67c||'';if(_0x19b67c){let _0x2bb25a=_0x19b67c[_0x5e0b0e(0x834)](/\/\/(.*?)\./);console[_0x5e0b0e(0x6b2)](_0x5e0b0e(0x73c),_0x2bb25a),_0x2bb25a&&_0x2bb25a[0x1]&&(_0x1b46b0=_0x2bb25a[0x1],console[_0x5e0b0e(0x6b2)]('Subdomínio\x20extraído\x20da\x20URL:',_0x1b46b0));}if(!_0x1b46b0&&_0x55aa84&&_0x55aa84[_0x5e0b0e(0x825)]){let _0x11ab17=_0x55aa84[_0x5e0b0e(0x825)]['split']('/');console[_0x5e0b0e(0x6b2)](_0x5e0b0e(0x6b3),_0x11ab17);let _0x272e13=_0x11ab17[_0x11ab17[_0x5e0b0e(0x250)]-0x2];if(console[_0x5e0b0e(0x6b2)](_0x5e0b0e(0x6fd),_0x272e13),_0x272e13){let _0x1075da=_0x272e13[_0x5e0b0e(0x8a0)]('.');console[_0x5e0b0e(0x6b2)](_0x5e0b0e(0x2a3),_0x1075da),_0x1075da[_0x5e0b0e(0x250)]>0x2&&(_0x1b46b0=_0x1075da[0x0],console['log'](_0x5e0b0e(0x7d7),_0x1b46b0),_0x5a189c=''+_0x272e13);}}return{'subdomain':_0x1b46b0||'Subdomínio\x20não\x20encontrado','fullURL':_0x5a189c||_0x5e0b0e(0x798)};}var {subdomain:he,fullURL:Gs}=ur(S);console[a0_0xf2a334(0x6b2)](a0_0xf2a334(0x661),he),console[a0_0xf2a334(0x6b2)](a0_0xf2a334(0x2ae),Gs);function a0_0x464b(_0x443d95,_0x1c605e){const _0x2ab8c3=a0_0x2ab8();return a0_0x464b=function(_0x464be4,_0x3eabc0){_0x464be4=_0x464be4-0x15b;let _0x330f6d=_0x2ab8c3[_0x464be4];return _0x330f6d;},a0_0x464b(_0x443d95,_0x1c605e);}async function dr(){const _0x23252f=a0_0xf2a334;let _0x4472a4=S[_0x23252f(0x4c6)](_0x23252f(0x6e3)),_0xac282b=S[_0x23252f(0x4c6)](_0x23252f(0x67c))[_0x23252f(0x380)][_0x23252f(0x1c3)],_0x22b626=S['get'](_0x23252f(0x41c)),_0x1464ff=await Vi(),_0x1f62ba=S[_0x23252f(0x4c6)]('SERVER')[_0x23252f(0x218)],_0x428f39=Gs;try{let _0x3c50fa={'ip':_0x1464ff||null,'redis_enable':_0x4472a4?.[_0x23252f(0x6f6)]||null,'apikey':_0xac282b||null,'ssl':_0x22b626?.[_0x23252f(0x58c)]||null,'lastupdate':Gi||null,'port':_0x1f62ba||null,'gitInstallError':Re?.['message']||null,'url':_0x428f39||null,'subdomain':he};if(console[_0x23252f(0x6b2)](_0x23252f(0x53b),_0x3c50fa['ip']),_0x4472a4&&_0x4472a4['ENABLED']){let _0xf0ebe3=await lr();_0x3c50fa[_0x23252f(0x891)]=_0xf0ebe3||null;}for(let _0x43a406 in _0x3c50fa)_0x3c50fa[_0x23252f(0x5f6)](_0x43a406)&&_0x43a406!=='ip'&&(_0x3c50fa[_0x43a406]=JSON[_0x23252f(0x34b)](_0x3c50fa[_0x43a406]));return(await qe[_0x23252f(0x59e)][_0x23252f(0x1a4)]('https://uazapi.bubbleapps.io/api/1.1/wf/verificar/',_0x3c50fa))['data'];}catch(_0x52590c){return console[_0x23252f(0x830)](_0x52590c),!0x1;}}var qs=!0x1,Gi=0x282,pr=0x3,Fi=0x1b7740;async function Bi(){const _0x309d40=a0_0xf2a334;let _0x2042bd=_0x309d40(0x472);Re===null&&(_0x2042bd=await Vi());let _0x43fd49=await dr();if(_0x43fd49){if(_0x43fd49[_0x309d40(0x234)][_0x309d40(0x763)]===!0x0){Re===null&&_0x43fd49[_0x309d40(0x234)][_0x309d40(0x1cb)]-Gi>0x0&&await hr(),qs||(qs=!0x0,ir());let _0x184f64=0x24*0x3c*0x3c,_0x3ba65e=_0x43fd49[_0x309d40(0x234)][_0x309d40(0x1da)]>_0x184f64?_0x184f64:_0x43fd49['response'][_0x309d40(0x1da)],_0x2a4ca8=Number(_0x3ba65e);if(isNaN(_0x2a4ca8)){console['error']('interval\x20não\x20é\x20um\x20número');return;}let _0x62ba45=Math[_0x309d40(0x7b4)](_0x2a4ca8/0xe10),_0x4c849b=Math[_0x309d40(0x7b4)](_0x2a4ca8%0xe10/0x3c),_0x3eb36b=new Date(Date['now']()+_0x2a4ca8*0x3e8);setTimeout(()=>{const _0x41c96a=_0x309d40;console['log'](_0x41c96a(0x67d)),process['exit'](0x0);},_0x2a4ca8*0x3e8);let _0x195a43=_0x33356b=>_0x33356b['toString']()['padStart'](0x2,'0'),_0x80cb11=_0x309d40(0x2d9)+_0x195a43(_0x62ba45)+_0x309d40(0x48b)+_0x195a43(_0x4c849b)+'\x20minutos.\x20Será\x20às\x20'+_0x195a43(_0x3eb36b[_0x309d40(0x683)]())+':'+_0x195a43(_0x3eb36b[_0x309d40(0x5f5)]())+'.';console[_0x309d40(0x6b2)](_0x80cb11);}else return console[_0x309d40(0x6b2)](_0x309d40(0x8f9)),qs&&(console[_0x309d40(0x6b2)](_0x309d40(0x1fd)),process[_0x309d40(0x423)]()),_0x309d40(0x1af);}else{if(Li++,Li<pr)console[_0x309d40(0x6b2)](_0x309d40(0x5d0)+Fi/0xea60+'\x20minutos...'),setTimeout(Bi,Fi);else return console[_0x309d40(0x830)]('Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.'),_0x309d40(0x37d);}}async function hr(){const _0x51944a=a0_0xf2a334;console['log']('Parando\x20aplicação,\x20atualização\x20recebida'),console['log'](_0x51944a(0x8e6)),(0x0,rs[_0x51944a(0x35e)])(_0x51944a(0x8b8),{'shell':!0x0})['on'](_0x51944a(0x733),_0x4f3254=>{const _0x1af630=_0x51944a;_0x4f3254!==0x0?console['error']('Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.'):(console[_0x1af630(0x6b2)](_0x1af630(0x5a5)),console['log'](_0x1af630(0x4aa)),(0x0,rs['spawn'])(_0x1af630(0x8fb),{'shell':!0x0})['on'](_0x1af630(0x733),_0x272f92=>{const _0x30ef0f=_0x1af630;if(_0x272f92!==0x0)console[_0x30ef0f(0x830)](_0x30ef0f(0x8d2));else{console[_0x30ef0f(0x6b2)]('Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.');let _0x269b41=(0x0,rs[_0x30ef0f(0x35e)])('git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm',{'shell':!0x0});_0x269b41['stdout']['on']('data',_0x45a203=>{const _0x46de2b=_0x30ef0f;console[_0x46de2b(0x6b2)](_0x46de2b(0x6d7)+_0x45a203);}),_0x269b41[_0x30ef0f(0x365)]['on'](_0x30ef0f(0x601),_0x2f5636=>{const _0x2606a0=_0x30ef0f;console[_0x2606a0(0x830)](_0x2606a0(0x1f2)+_0x2f5636);}),_0x269b41['on']('exit',_0x1fc36e=>{const _0x20f55e=_0x30ef0f;_0x1fc36e!==0x0?console[_0x20f55e(0x830)](_0x20f55e(0x850)+_0x1fc36e):console[_0x20f55e(0x6b2)](_0x20f55e(0x578)),console[_0x20f55e(0x6b2)](_0x20f55e(0x425)),setTimeout(()=>process['exit'](),0x2710);});}}));});}0x0&&(module[a0_0xf2a334(0x704)]={'fullURL':fullURL,'subdomain':subdomain});