const a0_0x37fa70=a0_0x58ef;(function(_0x123792,_0x3d78d3){const _0x3a7ce6=a0_0x58ef,_0x54bad3=_0x123792();while(!![]){try{const _0x226ea4=-parseInt(_0x3a7ce6(0x768))/0x1*(-parseInt(_0x3a7ce6(0x558))/0x2)+-parseInt(_0x3a7ce6(0x2df))/0x3+parseInt(_0x3a7ce6(0xc7))/0x4*(parseInt(_0x3a7ce6(0x771))/0x5)+parseInt(_0x3a7ce6(0x111))/0x6+-parseInt(_0x3a7ce6(0x13e))/0x7+-parseInt(_0x3a7ce6(0x15b))/0x8*(-parseInt(_0x3a7ce6(0x125))/0x9)+parseInt(_0x3a7ce6(0x635))/0xa*(-parseInt(_0x3a7ce6(0x40d))/0xb);if(_0x226ea4===_0x3d78d3)break;else _0x54bad3['push'](_0x54bad3['shift']());}catch(_0x2daf7c){_0x54bad3['push'](_0x54bad3['shift']());}}}(a0_0x564a,0xac1e4));var Qi=Object[a0_0x37fa70(0x31e)],Be=Object[a0_0x37fa70(0x1e9)],Yi=Object['getOwnPropertyDescriptor'],Xi=Object[a0_0x37fa70(0x2de)],Zi=Object[a0_0x37fa70(0x1eb)],eo=Object[a0_0x37fa70(0x2ce)][a0_0x37fa70(0x4ee)],to=(_0x169dac,_0x156619)=>{for(var _0x200774 in _0x156619)Be(_0x169dac,_0x200774,{'get':_0x156619[_0x200774],'enumerable':!0x0});},zs=(_0x5b0267,_0x591da1,_0x46550d,_0x312aa2)=>{const _0xf2fb5f=a0_0x37fa70;if(_0x591da1&&typeof _0x591da1==_0xf2fb5f(0x41e)||typeof _0x591da1==_0xf2fb5f(0x662)){for(let _0x22e945 of Xi(_0x591da1))!eo[_0xf2fb5f(0x666)](_0x5b0267,_0x22e945)&&_0x22e945!==_0x46550d&&Be(_0x5b0267,_0x22e945,{'get':()=>_0x591da1[_0x22e945],'enumerable':!(_0x312aa2=Yi(_0x591da1,_0x22e945))||_0x312aa2[_0xf2fb5f(0x713)]});}return _0x5b0267;},I=(_0x4d92aa,_0x1339c3,_0x2a1401)=>(_0x2a1401=_0x4d92aa!=null?Qi(Zi(_0x4d92aa)):{},zs(_0x1339c3||!_0x4d92aa||!_0x4d92aa['__esModule']?Be(_0x2a1401,a0_0x37fa70(0x259),{'value':_0x4d92aa,'enumerable':!0x0}):_0x2a1401,_0x4d92aa)),so=_0x23337a=>zs(Be({},a0_0x37fa70(0x251),{'value':!0x0}),_0x23337a),fr={};to(fr,{'fullURL':()=>Bs,'subdomain':()=>ee}),module['exports']=so(fr);var Gi=I(require(a0_0x37fa70(0x617))),Ks=require('fs'),Qs=require('js-yaml'),Ys=require(a0_0x37fa70(0x43f)),We=require('path'),ue=process['cwd'](),Ce=(0x0,We[a0_0x37fa70(0x114)])(ue,a0_0x37fa70(0x52e)),Hs=(0x0,We['join'])(ue,'src'),rn=(0x0,We['join'])(ue,a0_0x37fa70(0x744),a0_0x37fa70(0x186)),ps=class{constructor(){const _0x59911a=a0_0x37fa70;this[_0x59911a(0x755)]();}[a0_0x37fa70(0x7b6)](_0xdab31e){const _0x625035=a0_0x37fa70;return this[_0x625035(0x20b)][_0xdab31e];}[a0_0x37fa70(0x755)](){const _0x26d0e9=a0_0x37fa70;this['env']=process[_0x26d0e9(0x20b)]?.['DOCKER_ENV']!==_0x26d0e9(0x175)?this[_0x26d0e9(0x57c)]():this[_0x26d0e9(0x741)](),process[_0x26d0e9(0x20b)]?.[_0x26d0e9(0x779)]===_0x26d0e9(0x175)&&(this['env'][_0x26d0e9(0x556)][_0x26d0e9(0x390)]='http',this[_0x26d0e9(0x20b)]['SERVER']['PORT']=Number[_0x26d0e9(0x586)](process[_0x26d0e9(0x20b)]?.[_0x26d0e9(0x16e)]??_0x26d0e9(0x7a2)));}[a0_0x37fa70(0x57c)](){const _0x4be56e=a0_0x37fa70;return(0x0,Qs[_0x4be56e(0x30b)])((0x0,Ks[_0x4be56e(0x690)])((0x0,Ys[_0x4be56e(0x114)])(Hs,_0x4be56e(0x2f2)),{'encoding':_0x4be56e(0x73d)}));}['envProcess'](){const _0x2c8484=a0_0x37fa70;return{'SERVER':{'TYPE':process[_0x2c8484(0x20b)][_0x2c8484(0x242)],'PORT':Number[_0x2c8484(0x586)](process[_0x2c8484(0x20b)][_0x2c8484(0x16e)]),'URL':process[_0x2c8484(0x20b)][_0x2c8484(0x775)]},'CORS':{'ORIGIN':process[_0x2c8484(0x20b)][_0x2c8484(0x4d0)][_0x2c8484(0x213)](','),'METHODS':process[_0x2c8484(0x20b)]['CORS_METHODS'][_0x2c8484(0x213)](','),'CREDENTIALS':process['env']?.[_0x2c8484(0x640)]==='true'},'SSL_CONF':{'PRIVKEY':process[_0x2c8484(0x20b)]?.[_0x2c8484(0x18d)],'FULLCHAIN':process[_0x2c8484(0x20b)]?.[_0x2c8484(0x754)]},'STORE':{'CLEANING_INTERVAL':Number[_0x2c8484(0x522)](process['env']?.[_0x2c8484(0x2c7)])?Number['parseInt'](process['env'][_0x2c8484(0x2c7)]):void 0x0,'MESSAGES':process['env']?.['STORE_MESSAGE']===_0x2c8484(0x175),'CONTACTS':process[_0x2c8484(0x20b)]?.['STORE_CONTACTS']==='true','CHATS':process[_0x2c8484(0x20b)]?.['STORE_CHATS']===_0x2c8484(0x175)},'DATABASE':{'CONNECTION':{'HOST':process[_0x2c8484(0x20b)]?.[_0x2c8484(0x6ef)],'PORT':Number[_0x2c8484(0x586)](process[_0x2c8484(0x20b)]?.[_0x2c8484(0x6ef)]),'USER':process['env'][_0x2c8484(0x656)],'PASSWORD':process[_0x2c8484(0x20b)][_0x2c8484(0x7c9)],'URI':process[_0x2c8484(0x20b)]['DATABASE_CONNECTION_URI'],'DB_PREFIX_NAME':process[_0x2c8484(0x20b)][_0x2c8484(0x1a8)]},'ENABLED':process[_0x2c8484(0x20b)]?.[_0x2c8484(0x553)]===_0x2c8484(0x175)},'REDIS':{'ENABLED':process[_0x2c8484(0x20b)]?.[_0x2c8484(0x7a5)]===_0x2c8484(0x175),'URI':process[_0x2c8484(0x20b)][_0x2c8484(0x714)]||_0x2c8484(0x566),'PREFIX_KEY':process[_0x2c8484(0x20b)][_0x2c8484(0x4ec)]||_0x2c8484(0x6b3)},'LOG':{'LEVEL':process[_0x2c8484(0x20b)]?.[_0x2c8484(0x85)][_0x2c8484(0x213)](','),'COLOR':process[_0x2c8484(0x20b)]?.[_0x2c8484(0x4f3)]===_0x2c8484(0x175)},'PROXY':process[_0x2c8484(0x20b)]?.[_0x2c8484(0x240)]===_0x2c8484(0x175),'AUTHENTICATION':{'TYPE':process[_0x2c8484(0x20b)][_0x2c8484(0x7cd)],'API_KEY':{'KEY':process[_0x2c8484(0x20b)]['AUTHENTICATION_API_KEY']},'JWT':{'EXPIRIN_IN':Number[_0x2c8484(0x522)](process[_0x2c8484(0x20b)]?.[_0x2c8484(0x1d9)])?Number[_0x2c8484(0x586)](process[_0x2c8484(0x20b)]['AUTHENTICATION_JWT_EXPIRIN_IN']):0xe10,'SECRET':process[_0x2c8484(0x20b)]['AUTHENTICATION_JWT_SECRET']}}};}},S=new ps(),Bi=I(require(a0_0x37fa70(0x780))),Me=I(require(a0_0x37fa70(0x149))),Vs=require(a0_0x37fa70(0x43f)),hs=I(require(a0_0x37fa70(0xa7))),gs=(_0x34d1b4=>(_0x34d1b4[a0_0x37fa70(0x27c)]=a0_0x37fa70(0x39b),_0x34d1b4[a0_0x37fa70(0x12b)]=a0_0x37fa70(0x3ca),_0x34d1b4[a0_0x37fa70(0x179)]=a0_0x37fa70(0x9c),_0x34d1b4[a0_0x37fa70(0x614)]=a0_0x37fa70(0x304),_0x34d1b4[a0_0x37fa70(0x2fc)]=a0_0x37fa70(0x5dc),_0x34d1b4[a0_0x37fa70(0x628)]=a0_0x37fa70(0x1aa),_0x34d1b4[a0_0x37fa70(0x4a7)]=a0_0x37fa70(0x110),_0x34d1b4))(gs||{}),Xs=(_0x525449=>(_0x525449[a0_0x37fa70(0x27c)]='\x1b[32m%s\x1b[0m',_0x525449[a0_0x37fa70(0x4a7)]='\x1b[30m%s\x1b[0m',_0x525449[a0_0x37fa70(0x12b)]=a0_0x37fa70(0x5f6),_0x525449[a0_0x37fa70(0x179)]=a0_0x37fa70(0x6f4),_0x525449[a0_0x37fa70(0x614)]=a0_0x37fa70(0x1d3),_0x525449[a0_0x37fa70(0x2fc)]=a0_0x37fa70(0x16d),_0x525449[a0_0x37fa70(0x628)]=a0_0x37fa70(0x1d0),_0x525449))(Xs||{}),Zs=(_0x2d9677=>(_0x2d9677[a0_0x37fa70(0x27c)]=a0_0x37fa70(0x27c),_0x2d9677['WARN']=a0_0x37fa70(0x179),_0x2d9677[a0_0x37fa70(0x12b)]=a0_0x37fa70(0x12b),_0x2d9677[a0_0x37fa70(0x4a7)]=a0_0x37fa70(0x4a7),_0x2d9677[a0_0x37fa70(0x614)]=a0_0x37fa70(0x614),_0x2d9677[a0_0x37fa70(0x2fc)]='DEBUG',_0x2d9677[a0_0x37fa70(0x628)]=a0_0x37fa70(0x628),_0x2d9677))(Zs||{}),ea=(_0x5efd97=>(_0x5efd97[a0_0x37fa70(0x27c)]=a0_0x37fa70(0x305),_0x5efd97[a0_0x37fa70(0x12b)]=a0_0x37fa70(0x44b),_0x5efd97[a0_0x37fa70(0x179)]='\x1b[43m',_0x5efd97['DARK']=a0_0x37fa70(0xc4),_0x5efd97['ERROR']=a0_0x37fa70(0x4d7),_0x5efd97[a0_0x37fa70(0x2fc)]=a0_0x37fa70(0x2fd),_0x5efd97['VERBOSE']=a0_0x37fa70(0x2d0),_0x5efd97))(ea||{}),$=class{constructor(_0x21da8f=a0_0x37fa70(0x5dd)){const _0x36ac63=a0_0x37fa70;this[_0x36ac63(0x1ed)]=_0x21da8f,this[_0x36ac63(0x763)]=S;}[a0_0x37fa70(0x3b0)](_0x55f74a){const _0x577604=a0_0x37fa70;this[_0x577604(0x1ed)]=_0x55f74a;}['console'](_0x507ae5,_0x397fea){const _0x17c9dc=a0_0x37fa70;let _0x2fb65d=[];this['configService']['get'](_0x17c9dc(0x27c))[_0x17c9dc(0x338)][_0x17c9dc(0x4b7)](_0x1f0f14=>_0x2fb65d[_0x17c9dc(0x5ee)](Zs[_0x1f0f14]));let _0xf272c1=typeof _0x507ae5;_0x2fb65d[_0x17c9dc(0x14a)](_0x397fea)&&(S[_0x17c9dc(0x7b6)](_0x17c9dc(0x27c))[_0x17c9dc(0x3cf)]?(console[_0x17c9dc(0xec)](_0x17c9dc(0x414)+Xs[_0x397fea],_0x17c9dc(0x751),(0x0,hs['default'])()[_0x17c9dc(0x4cf)](_0x17c9dc(0x6ff)),_0x17c9dc(0x5b8),gs[_0x397fea]+ea[_0x397fea]+_0x17c9dc(0x414),_0x397fea+_0x17c9dc(0x6d2),_0x17c9dc(0x2b9),this['context']+_0x17c9dc(0x5b8),gs[_0x397fea],_0xf272c1!==_0x17c9dc(0x41e)?_0x507ae5:'','\x1b[0m'),_0xf272c1===_0x17c9dc(0x41e)&&console[_0x17c9dc(0xec)](_0x507ae5,'\x0a')):console[_0x17c9dc(0xec)]((0x0,hs['default'])()[_0x17c9dc(0x4cf)](_0x17c9dc(0x70d)),_0x397fea+'\x20',''+this[_0x17c9dc(0x1ed)],_0x507ae5));}[a0_0x37fa70(0xec)](_0xca7a49){const _0x41a3b5=a0_0x37fa70;this[_0x41a3b5(0x8b)](_0xca7a49,_0x41a3b5(0x27c));}[a0_0x37fa70(0x11b)](_0x24b48f){this['console'](_0x24b48f,'INFO');}[a0_0x37fa70(0x71b)](_0x77a8a1){const _0x528a6d=a0_0x37fa70;this[_0x528a6d(0x8b)](_0x77a8a1,_0x528a6d(0x179));}[a0_0x37fa70(0x723)](_0x3ccad3){const _0x17f105=a0_0x37fa70;this['console'](_0x3ccad3,_0x17f105(0x614));}[a0_0x37fa70(0x48f)](_0xeaea74){const _0x5bc2f5=a0_0x37fa70;this[_0x5bc2f5(0x8b)](_0xeaea74,_0x5bc2f5(0x628));}['debug'](_0x258fc5){const _0x42e762=a0_0x37fa70;this[_0x42e762(0x8b)](_0x258fc5,_0x42e762(0x2fc));}[a0_0x37fa70(0x5ea)](_0xb79b59){const _0x2fb905=a0_0x37fa70;this[_0x2fb905(0x8b)](_0xb79b59,_0x2fb905(0x4a7));}};function ta(){const _0x1df691=a0_0x37fa70;process['on']('uncaughtException',(_0x12d871,_0x44a5e7)=>{const _0x54cb12=a0_0x58ef;new $(_0x54cb12(0x226))[_0x54cb12(0x723)]({'origin':_0x44a5e7,'stderr':process['stderr']['fd'],'error':_0x12d871});}),process['on'](_0x1df691(0x5fe),(_0x274269,_0x5d4e49)=>{const _0x1e1a10=_0x1df691;new $('unhandledRejection')['error']({'origin':_0x5d4e49,'stderr':process[_0x1e1a10(0x317)]['fd'],'error':_0x274269});});}var sa=I(require(a0_0x37fa70(0x331))),ms=new sa[(a0_0x37fa70(0x259))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Ee=require(a0_0x37fa70(0x77f)),Ie=I(require(a0_0x37fa70(0x77f))),ze=new $(a0_0x37fa70(0x6e7)),j=S[a0_0x37fa70(0x7b6)](a0_0x37fa70(0x796)),A=j[a0_0x37fa70(0x464)]?j['CONNECTION'][a0_0x37fa70(0x634)]?Ie[a0_0x37fa70(0x259)]['createConnection'](j[a0_0x37fa70(0x66d)][a0_0x37fa70(0x634)],{'dbName':j[a0_0x37fa70(0x66d)]['DB_PREFIX_NAME']+a0_0x37fa70(0x4bf)}):Ie[a0_0x37fa70(0x259)][a0_0x37fa70(0x4fa)](a0_0x37fa70(0xb8)+j['CONNECTION']['HOST']+':'+j[a0_0x37fa70(0x66d)][a0_0x37fa70(0x39c)]+a0_0x37fa70(0x4b6),{'user':j['CONNECTION'][a0_0x37fa70(0x33b)],'pass':j['CONNECTION'][a0_0x37fa70(0x1bc)],'dbName':j['CONNECTION'][a0_0x37fa70(0x12f)]+a0_0x37fa70(0x4bf)}):null;j['ENABLED']&&ze[a0_0x37fa70(0x11b)](a0_0x37fa70(0xfe)+A['$dbName']);var de=j['ENABLED']?j[a0_0x37fa70(0x66d)]['URI']?Ie[a0_0x37fa70(0x259)][a0_0x37fa70(0x4fa)](j[a0_0x37fa70(0x66d)][a0_0x37fa70(0x634)],{'dbName':a0_0x37fa70(0x126)}):Ie[a0_0x37fa70(0x259)][a0_0x37fa70(0x4fa)](a0_0x37fa70(0xb8)+j[a0_0x37fa70(0x66d)]['HOST']+':'+j['CONNECTION'][a0_0x37fa70(0x39c)]+a0_0x37fa70(0x4b6),{'user':j['CONNECTION']['USER'],'pass':j[a0_0x37fa70(0x66d)]['PASSWORD'],'dbName':'cachedContacts-whatsapp'}):null;de&&ze['info'](a0_0x37fa70(0xfe)+de[a0_0x37fa70(0x4d3)]),process['on'](a0_0x37fa70(0x1af),()=>{const _0x3002be=a0_0x37fa70;A&&A[_0x3002be(0x380)](()=>{const _0x1c5ff3=_0x3002be;ze[_0x1c5ff3(0x11b)](_0x1c5ff3(0x1c9));}),de&&de[_0x3002be(0x380)](()=>{const _0xdb1a92=_0x3002be;ze[_0xdb1a92(0x11b)](_0xdb1a92(0x401));});});var ao=new Ee[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),io=new Ee[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),oo=new Ee['Schema']({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),ro=new Ee[(a0_0x37fa70(0x2ba))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[ao],'default':[]}},{'_id':!0x1}),no=new Ee[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':ro,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':io},'groupdata':{'type':oo,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),aa=_0x268b49=>{const _0x4882f0=a0_0x37fa70;let _0x5594c7='z_'+_0x268b49+'_Chats';return A?.[_0x4882f0(0x762)]('ChatModel',no,_0x5594c7);},ia=require(a0_0x37fa70(0x77f)),co=new ia['Schema']({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),oa=_0x4a3808=>{const _0x16f1fc=a0_0x37fa70;let _0x96ed5='z_'+_0x4a3808+_0x16f1fc(0x277);return A?.[_0x16f1fc(0x762)](_0x16f1fc(0x3c2),co,_0x96ed5);},ra=require(a0_0x37fa70(0x77f)),fs=class{},lo=new ra['Schema']({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),na=de?.['model'](fs[a0_0x37fa70(0x410)],lo,a0_0x37fa70(0x578)),ca=require('mongoose'),ws=class{},uo=new ca[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),He=de?.[a0_0x37fa70(0x762)](ws['name'],uo,'instances'),la=require(a0_0x37fa70(0x77f)),po=new la[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),ua=_0x348eba=>{const _0x12c6cb=a0_0x37fa70;let _0xcb2c78='z_'+_0x348eba+_0x12c6cb(0x1b1);return A?.[_0x12c6cb(0x762)](_0x12c6cb(0x318),po,_0xcb2c78);},da=require(a0_0x37fa70(0x77f)),ys=class{},ho=new da[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),pa=A?.['model'](ys[a0_0x37fa70(0x410)],ho,'authentication'),ha=require(a0_0x37fa70(0x77f)),bs=class{},ga=new ha[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});ga[a0_0x37fa70(0x521)](a0_0x37fa70(0x58a),function(_0x597a84){const _0x4ef24a=a0_0x37fa70;delete this[_0x4ef24a(0x1df)],delete this[_0x4ef24a(0x4aa)],delete this[_0x4ef24a(0x393)],delete this[_0x4ef24a(0x4e2)],delete this[_0x4ef24a(0x245)],_0x597a84();});var ma=A?.[a0_0x37fa70(0x762)](bs[a0_0x37fa70(0x410)],ga,'webhook'),D=require(a0_0x37fa70(0x77f)),Ss=require(a0_0x37fa70(0x62c)),Ke=class{},wa=new D[(a0_0x37fa70(0x2ba))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Ms=new D[(a0_0x37fa70(0x2ba))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),go=new D[(a0_0x37fa70(0x2ba))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x37fa70(0x76a)},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x37fa70(0x80)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x37fa70(0x670)},'pollErrorMessage':{'type':String,'default':'Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.'},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),ya=new D[(a0_0x37fa70(0x2ba))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),mo=new D[(a0_0x37fa70(0x2ba))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),fo=new D[(a0_0x37fa70(0x2ba))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),vs=new D[(a0_0x37fa70(0x2ba))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),wo=new D[(a0_0x37fa70(0x2ba))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),ba=new D[(a0_0x37fa70(0x2ba))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':go},'apirequest':mo,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':wo,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),Sa=new D[(a0_0x37fa70(0x2ba))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),Cs=class{},Ns=new D[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[vs],'blocks':[ba],'groups':[wa],'conditions':[ya],'varedits':[Sa],'replyOptions':{'type':[Ms],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x294b80=a0_0x37fa70;return'!cmd_'+Math[_0x294b80(0x6f5)]()['toString'](0x24)[_0x294b80(0x70f)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':a0_0x37fa70(0x413)},'startID':{'type':String,'default':()=>(0x0,Ss['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ss['v4'])()},'shareOwners':{'type':[String],'default':[]}});Ns[a0_0x37fa70(0x521)](a0_0x37fa70(0xa2),function(_0x14b739){const _0x22dcba=a0_0x37fa70;let _0x52459b=this[_0x22dcba(0x33f)]();if(_0x52459b&&typeof _0x52459b==_0x22dcba(0x41e)&&_0x22dcba(0x5d1)in _0x52459b){let _0x4bb3bf=_0x52459b[_0x22dcba(0x5d1)];if(_0x4bb3bf){let _0x171727=new Set(),_0xb43e6b=new Set(_0x4bb3bf[_0x22dcba(0x6b8)]?.['map'](_0x135521=>_0x135521[_0x22dcba(0x410)])),_0x4e0357=JSON['stringify'](_0x4bb3bf),_0x13bb10=/{{(?!_)([^}]*)}}/g,_0x19b58d;for(;(_0x19b58d=_0x13bb10[_0x22dcba(0x2d4)](_0x4e0357))!==null;)_0xb43e6b['has'](_0x19b58d[0x1])||_0x171727[_0x22dcba(0xf8)](_0x19b58d[0x1]);_0x171727[_0x22dcba(0x7af)]>0x0?(console[_0x22dcba(0x71b)](_0x22dcba(0x15c),Array[_0x22dcba(0x27b)](_0x171727)),_0x4bb3bf[_0x22dcba(0x420)]=Array[_0x22dcba(0x27b)](_0x171727)):_0x4bb3bf['variablesNotFound']=[],this[_0x22dcba(0x587)]({'$set':_0x4bb3bf});}}_0x14b739();});var Ma=_0x1dca61=>{const _0x30f03b=a0_0x37fa70;let _0xc4bbe0='z_'+_0x1dca61+_0x30f03b(0x327);return A?.[_0x30f03b(0x762)](_0x30f03b(0x4c0),Ns,_0xc4bbe0);},ye=A?.['model'](Cs[a0_0x37fa70(0x410)],Ns,a0_0x37fa70(0x2b7)),yo=new D[(a0_0x37fa70(0x2ba))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[vs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[fo]},{'_id':!0x1}),bo=new D[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[vs],'blocks':[ba],'groups':[wa],'conditions':[ya],'varedits':[Sa],'replyOptions':{'type':[Ms],'default':[]},'chatLog':yo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x37fa70(0x364)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x37fa70(0x670)},'waitingMenu_replyOptions':{'type':[Ms],'default':[]}}),Ca=_0x4c76af=>{const _0x1f7c52=a0_0x37fa70;let _0x2e1a1b='z_'+_0x4c76af+_0x1f7c52(0x5ef);return A?.[_0x1f7c52(0x762)](_0x1f7c52(0x60f),bo,_0x2e1a1b);},So=new D['Schema']({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),fa=new D[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'id':!0x0},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),Mo=new D[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[fa],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x37fa70(0x4ff)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[So],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':fa,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ea=_0x206e57=>{const _0x38cee4=a0_0x37fa70;let _0x27305d='z_'+_0x206e57+_0x38cee4(0x12a);return A?.[_0x38cee4(0x762)]('ScheduleMessageModel',Mo,_0x27305d);},Es=class{},Co=new D[(a0_0x37fa70(0x2ba))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),Eo=new D[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),vo=new D['Schema']({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),No=new D[(a0_0x37fa70(0x2ba))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':a0_0x37fa70(0x675)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),$o=new D[(a0_0x37fa70(0x2ba))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),Ro=new D['Schema']({'_id':{'type':String,'_id':!0x0},'agents':{'type':[$o]},'customFields':{'type':[vo]},'flowConfig':{'type':No,'default':{}},'flows':{'type':[Eo],'default':[]},'autoCompleteMessages':{'type':[Co],'default':[]}}),Te=A?.[a0_0x37fa70(0x762)](Es['name'],Ro,a0_0x37fa70(0x1db)),va=require(a0_0x37fa70(0x77f)),Ao=new va[(a0_0x37fa70(0x2ba))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),Na=_0x3c521f=>{const _0x676443=a0_0x37fa70;let _0x3fada3='z_'+_0x3c521f+'_Labels';return A?.[_0x676443(0x762)](_0x676443(0x75f),Ao,_0x3fada3);},O=class{constructor(_0x1ef06d){const _0x331362=a0_0x37fa70;this[_0x331362(0x122)]=_0x1ef06d[_0x331362(0x7b6)](_0x331362(0x796));}};function a0_0x564a(){const _0x49a59e=['toLocaleString','Fluxo\x20não\x20encontrado\x20na\x20memória.','URL\x20completa:','groupFetchAllParticipating','apiResponse','Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27','reorderMessages','InstancesAlterarTodas','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20','app','request\x20received\x20in\x20getConversation','redis','deleteConversation','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','instanceName','displayName','PENDING','DATABASE_CONNECTION_USER','ListMessage','stopped','GROUPS_UPDATE','notas','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','video','firstValue','^\x5cd+([-]\x5cd+)*@g.us$','editFlowVaredit','newStoppedUntil','Fluxos\x20não\x20estão\x20ativados','function','recording','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','fetchStatus','call','findLabels','\x20não\x20é\x20a\x20esperada.','sendLocation','Limpando\x20logs\x20do\x20PM2...','findFlow','convertaudio','CONNECTION','mkdirSync','leadInfo.desativadoFluxoAte','Esse\x20fluxo\x20expirou','PREFIX_KEY','lastSend','Erro\x20ao\x20alterar\x20privacidade','keys','!stop','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','evaluateConditionTest','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','keep-alive','fetchMessages','flowConfig','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','updateGroupsAddPrivacy','PLAYED','updateMissingEtiquetas','footerText','sha256','autoCompleteMessages','):Audio\x20processed','splice','messageTimestamp','findParticipants','client','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','replaceVariables','EMAIL','QRCODE_UPDATED','state','maxActives','\x20com\x20sucesso.','readFileSync','):\x20Bloco\x20copiado:\x20','request\x20received\x20in\x20deleteFlow','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','font','groupCreate','varedits','canSendMessage','messages.set','namespace','pow','Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.','ScheduleMessage','editMessagesInGroup','Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...','updatePresence','participants','):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção','/wa-all-message','^\x5cd+','/instance/fetchInstances','email','query','toggleEphemeral','remoteJid','):\x20Enviando\x20enquete','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','dbInstance','delete','count','env.KEY\x20!==\x20key','deleteflow','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','deleteFlow','uazapi','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','removeData','Type\x20is\x20required','endSession','variables','statusJidList','trim','promisify','\x20minutos.\x20Será\x20às\x20','/:instanceName','Erro\x20ao\x20atualizar\x20cacheInstance:','sendWhatsAppAudio','isBase64','status@broadcast','detectIPv6PrefixAndInterface','updateStatusPrivacy','start','ini','stopConversation','pollMessageOnDelete','update','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','errors','MAX_SAFE_INTEGER','rowId','cwd','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','minutesToClose','):\x20Fluxos\x20do\x20proprietário\x20\x27global\x27\x20já\x20existem\x20na\x20coleção\x20centralizada.','done','\x20\x1b[0m','authorization','):\x20Adicionando\x20\x27','group','_remoteJid','\x20:\x20','AutomateFunctions','response','/automate','initAuthCreds','saveTextReply','apply','Internal\x20Server\x20Error','color','):\x20Erro\x20durante\x20a\x20atualização:\x20','processclearVariables','drop','request\x20received\x20in\x20editFlowcondition','wuid','autoCompleteMessages.command_1','presence.update','Db\x20Connection','unlinkSync','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','50mb','editScheduleMessage','mediaMessage','webhookMap','configureIPv6','DATABASE_CONNECTION_HOST','):Processing\x20audio','):\x20Conversa\x20atualizada\x20em\x20memória','lastUpdate','replaceVariablesInObject','\x1b[33m%s\x1b[0m','random','locationMessage','):\x20isVote:\x20',',\x20received\x20','processPollUpdateMessage','formatStatusMessage','messages','Network\x20Interface\x20detected:\x20','groupGetInviteInfo','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','DD/MM\x20HH:mm:ss','messageId','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','processblock','Erro\x20ao\x20editar\x20agentes','.mimetype','isLong','*\x0a\x0a','everyOne','findIndex','instance.','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','messageStubType','cleanStore','HH:mm:ss','groupRevokeInvite','slice','\x22\x20cannot\x20be\x20empty','replyOption','\x20minutos\x20verificará\x20novas\x20mensagens','enumerable','REDIS_URI','scheduleNextCheck','sendList','labelId','stringify','Safari','importChats','warn','segundos','/64\x20dev\x20','replaceVariablesInReplyOptions','Font\x20is\x20required','_pushName','ObjectId','fetchContacts','error','lastInteraction','AUTHENTICATION','options','\x22reaction\x22\x20must\x20be\x20an\x20emoji','joinGroupValidate','NextBlock','createflow','menuIgnoreNonVotes','deleteReplyOption','_p_','crypto','createFlow','deleteOne','superadmin','\x27\x20para\x20a\x20coleção\x20centralizada.','groupHandler','Invalid\x20format','findContacts','):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20','insert','groupRequestParticipantsUpdate','PRODUCT_LIST','WA\x20MODULE','findWebhook','triedToSend','utf-8','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','updateMissingCustomFields','envProcess','boolean','):\x20Enviando\x20mídia','store','cleaningUp','):\x20debug\x20alterando\x20this.AutomateSystem','archived','release','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus','privacySettings','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','https://v6.ident.me','label','labels.edit','Valor\x20inicial:\x20\x22','/create','\x1b[1m\x1b[37m','request\x20received\x20in\x20scheduleMessage','instance','SSL_CONF_FULLCHAIN','loadEnv','generateWAMessageFromContent','):\x20Editando\x20edição\x20do\x20fluxo...','whoCanUse','editflowblock','):\x20mediaMessageInfoId\x20:\x20','networkInterface','url','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','insertMany','LabelModel','findConversation','linkPreview','model','configService','updateGroupWebhook','fileName','instanceCount','request\x20received\x20in\x20editFlow','628911PKgjdm','arrayUnique','list','Erro\x20ao\x20editar\x20a\x20conversa','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','[messages.upsert]\x20[SUCESSO]\x20Mensagem\x20descriptografada\x20depois\x20','):\x20Ler\x20mensagem','dropIndex','lastSendMessage','5tsXjxk','ignoreGroups','\x20instance\x20does\x20not\x20exist','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20','SERVER_URL','editFlow','messaging-history.set','uazapiSendMedia','DOCKER_ENV','group-participants.update','setNewValue','getValidWhatsAppNumbers','remoteJids','):\x20customFieldVariables','mongoose','cors','contacts.update','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','blockLogs','contextInfo','addReplyOption','editFlowCondition','sendReaction','jsonwebtoken','):Sending\x20audio\x20whatsapp','customFields','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','sim','Atualização:\x20','announcement','https://chat.whatsapp.com/','downloadMediaMessage','sendDataWebhook','deleteDoneMessages','lastMessage','IPv6\x20address\x20configured:\x20','DATABASE','fullName','repeat','getConversation','contact_blacklist','deleteAll','replacer','.pdf','selectableCount','IP\x20mismatch:\x20configured\x20','Deletion\x20failed','):\x20Conversa\x20está\x20expirada','8080','modifiedCount','#000000','REDIS_ENABLED','stopMinutesMaxActives','gifPlayback','qrcode.updated','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:','isCommunityAnnounce','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','Total\x20de\x20fluxos\x20transferidos\x20para\x20a\x20coleção\x20centralizada:\x20','all_member_add','size','trimmed','randomMac','etiquetas','XX:XX:XX:XX:XX:XX','out','):\x20Label\x20','get','Falta\x20informação\x20para\x20a\x20chamada\x20API','):\x20Editando\x20bloco...','):\x20[messages.update]\x20group\x20ignored','fetchProfile','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo','jwt','buttonText','Read\x20messages','Erro\x20ao\x20buscar\x20Schedule\x20Messages','awaitSeconds','addresss','):\x20Buscando\x20flow...','#9ba6ff','website','Telefone:\x20','/instance/delete','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','editflow','DATABASE_CONNECTION_PASSWORD','node-cache','editflowvaredit','isJidBroadcast','AUTHENTICATION_TYPE','headerString','GROUP_PARTICIPANTS_UPDATE','global','min','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting','replaceVariablesChat','proto','isArray','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','chats.delete','storePath','\x20segundos\x20antes\x20de\x20reconectar...','shareOwners','endsWith','dbConnection','awaitingApproval','\x20não\x20encontrado','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','@whiskeysockets/baileys','fetchLatestBaileysVersion','createGroup','Selecione','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','request\x20received\x20in\x20deleteDoneMessages','participant','joinGroup','LOG_LEVEL','pt-BR','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','[ERROR]:\x20Foi\x20recebida\x20uma\x20mensagem\x20com\x20o\x20id\x20de\x20\x22','findMany','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','console','getContentType','Usando\x20IP\x20existente:\x20','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','):\x20atualização\x20chat:\x20','redisEnv','cpf','sendAudio','):\x20Chat\x20','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','findAndUpdateCacheContact','Falhou\x20ao\x20encontrar\x20chat\x20','removeChatLabel','#9568cf','chatId','upsertedCount','Flow\x20iniciado\x20com\x20','\x1b[33m','AppStateSyncKeyData','#b4ebff','FULLCHAIN','editedMessage','g.us','findOneAndUpdate','Request\x20Body:','findOrCreate','imageMessage','some','dayjs','folder','):\x20Conversa\x20está\x20expirada\x20-\x20voto','E-mail:\x20','then','bateu\x20events','lastMessage_id','):\x20Bloco\x20com\x20ID\x20','Content\x20is\x20required','error_log','jid','Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup','Error\x20removing\x20unused\x20chat\x20fields:','webhookModel','Not\x20Found','chats.update','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','mongodb://','delay','digest','processvaredits','apirequest','Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global','groupdata','\x20saindo\x20da\x20função','#fed428','addBlock','viewOnceMessageV2','):\x20Entrou\x20na\x20função\x20scheduleFlow','\x1b[40m','RemoveChatLabel','pollUpdateMessage','2384860OqFrdc','isURL','dbServer','substring','content','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','Message','docker','online','condition','iniciando\x20fluxo\x20router','DaysToDelete','connection.update','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','\x20chats\x20de\x20','connecting','hex','sendContact','indexOf','AutomateSystem\x20não\x20foi\x20inicializado','request_method','Parando\x20aplicação...','):\x20Query\x20params:','flowName','CHATS_SET','#ff9484','URL','Subscribed\x20Events:','#83e421','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','createClient','SSL_CONF','leadInfo.','fileLength','Subdomínio\x20não\x20encontrado','Error\x20removing\x20IPv6\x20address:\x20','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','log','Erro\x20ao\x20deletar\x20chat:','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20',',\x20canSendMessage:\x20','desativadoFluxoAte','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','removeProfilePicture','Instance\x20Key\x20from\x20DB:','readFile','base64','):\x20Error\x20processing\x20conditions:\x20',',\x20Resultado:\x20','add','Comando\x20desconhecido','getBusinessProfile','eventEmitter','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','responsavelid','ON\x20-\x20dbName:\x20','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','updateAgent','request\x20received\x20in\x20deleteConversation','username','toUpperCase','enabled','messageType','errorLog','groups.upsert','formatBRNumber','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','Authentication\x20error','connectedName','padEnd','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','updateMany','_activedCount','\x1b[30m','7668234VLERsd','STATUS_INSTANCE','sending','join','documentMessage','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','allflows','pendingMessages','reject','info','Error\x20updating\x20cache\x20contact:','sendText','order','Data\x20inválida\x20fornecida','formatVCard','quoted','dbSettings','scheduleSendMedia','logout','104202UHjBef','cachedData-whatsapp','getMIMEType','makeCacheableSignalKeyStore','\x20atualizado\x20com\x20sucesso.\x20Ação:\x20','_ScheduleMessages','INFO','cache','):\x20\x27Enviando\x20mídia\x20para\x20\x27','sendSticker','DB_PREFIX_NAME','updateOne','setWebhook','test','):\x20Removendo\x20\x27','Instance\x20\x22','WebhookGlobal','):\x20Enviando\x20texto','status.instance','editflowvariable','ChatRouter','values','):\x20Comando\x20desconhecido:\x20','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','request\x20received\x20in\x20updateAutoCompleteMessages','7512197vKggom','Erro\x20inesperado\x20em\x20processvaredits:\x20','isValidIPv6Config','.fileUrl','conversation','Not\x20allowed\x20by\x20CORS','#9ab6c1','#fe9dfe','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName','METHODS','encoding','express','includes','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','remote\x20\x22origin\x22','Resultado\x20da\x20correspondência\x20de\x20URL:','findAll','#01d0e2','axios','getMinutes','joinApprovalMode','messages.upsert','The\x20\x22','https','):\x20\x27Enviando\x20audio\x20para\x20\x27','Erro\x20ao\x20deletar\x20a\x20conversa','mentions','Não\x20respondeu\x20com\x20a\x20enquete.','updateBlock','152EunhFm','Variáveis\x20não\x20encontradas:','getScheduleMessageModelForOwner','mimetype','Erro\x20ao\x20migrar\x20fluxos\x20do\x20proprietário\x20\x27','The\x20global\x20api\x20key\x20must\x20be\x20set','Instance\x20restarted','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20não\x20estão\x20ativados.','):\x20Deletando\x20conversa...','desc','\x20tentativas:\x20remotejid=','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','cachedContact','Nenhum\x20fluxo\x20correspondente\x20encontrado.','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','.webp','processUazapi','getAllData','\x1b[36m%s\x1b[0m','SERVER_PORT','execSync','connectionState','end','profilePicture','DELIVERY_ACK','):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!','true','temp-','write','):\x20teve\x20mudanças\x20chat.muteEndTime:\x20','WARN','https://api.openai.com/v1/images/generations','isConnected','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','):\x20','sendPresenceUpdate','Pausado\x20por\x20','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','phoneNumber','downloads','\x20mensagens\x20de\x20','createAndSave','json','auth','\x27\x20removido\x20do\x20AutomateSystem.','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','vir','SINGLE_SELECT','restrict','webhook','SSL_CONF_PRIVKEY','Bloco\x20com\x20ID\x20','StatusJidList\x20is\x20required','presence','GROUPS_UPSERT','approve','generateRandomIPv6','Generated\x20IPv6:\x20','isJidUser','available','locked','$addToSet','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','blocks','closed','\x27\x20não\x20encontrado','user','getVariablesChat','Error\x20parsing\x20JSON:','waMonitor','readMessage','readData','):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20','\x27\x20do\x20banco\x20de\x20dados...','videoMessage','ex:\x20\x22groupJid=120362@g.us\x22','updateGroupParticipantsWebhook','DATABASE_CONNECTION_DB_PREFIX_NAME','audio','\x1b[37m','.\x20Aguardando\x20',',\x20Comparador:\x20','https://api.elevenlabs.io/v1/text-to-speech/','sem\x20texto\x20na\x20mensagem','beforeExit','_id','_Messages','image','setRestartTimeout','):\x20Enviando\x20áudio','MESSAGES_UPSERT','isJWT','editFlowBlock','):\x20whoCanUse\x20after\x20validation:\x20','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','processApiRequest','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','PASSWORD','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','Erro\x20ao\x20aplicar\x20varedit:\x20','Connection\x20closed\x20for\x20instance:\x20','not_announcement','AddUserFlow','filter','contactHandle','toBrazilianNumberFormat','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','toLowerCase','creds.json','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.','Database\x20connection\x20closed.','Nenhum\x20chat\x20fornecido\x20para\x20inserção.','Mac\x20OS','testingWith','archive','no-cache','createWebhook','\x1b[37m%s\x1b[0m','ms\x20(tentativa\x20','updateChatWithMessage','\x1b[31m%s\x1b[0m','normalizeMessageContent','processUUID','.extension','/events','arraybuffer','AUTHENTICATION_JWT_EXPIRIN_IN','migrateFlowsToCentralizedCollection','AutomateSystem','less','goToFlow','editFlowVariable','flowActive','reorderBlocks','creds.update','findOne','Instance\x20deleted','#00a1f2','blockId','stateConnection','getMessage','refused','defineProperty','all','getPrototypeOf','method','context','stanzaId','Database\x20is\x20not\x20enabled','processingGroup_id','/webhook','header','defineAuthState','):Image\x20is\x20url','unavailable','requestPairingCode','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','sectionsToString','):\x20Não\x20achou\x20nenhum\x20flow','findGroupInfos','exports','delayChatLabel_RETRY_DELAY_MS','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','):\x20Entrou\x20na\x20função\x20stop','startCommand','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','delayChatLabel','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','removeUnusedChatFields','getUniqueFlowName','validate','collections','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','emit','env','_activatedCount','):\x20Conversa\x20inserida\x20com\x20sucesso.','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','Error\x20in\x20chatModify\x20for\x20number\x20','repository','groupJid','statusMessage','split','groupSetting','uazapiSendAudio','verify','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','\x20-y','stopMinutes','pictureUrl','):\x20Flow\x20\x27','\x20minutos','set','pairingCode','senderKeyDistributionMessage','groupName','reduce','yes','ids','oldValue','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','uncaughtException','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','telefone','lastFetchAwaitingApproval','body','):\x20Rótulo\x20atualizado:\x20','connectToWhatsappController','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','IPv6\x20Prefix\x20detected:\x20','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','--------------------------------------','request\x20received\x20in\x20createFlow','menuExpiredMessage','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture','every','this.reconnectAttempts:\x20','sendMessageWithTyping','updateReplyOption','.TEL;waid=','\x20and\x20data:',']\x20(','closeExistingConversations','REDIS','):\x20conversation.waitingMenu_name','.\x20Removendo\x20da\x20lista\x20de\x20tentativas.','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','PROXY','deleteMany','SERVER_TYPE','uazapiDeleteMessage','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','flowStopMinutes','nomecompleto','subjectTime','chats.set','static','\x20não\x20encontrado\x20para\x20cópia','chatHandle','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage','):Archiving\x20chat','getDelay','rm\x20-rf\x20','__esModule','isJidGroup','importChatsAntigo','request\x20received\x20in\x20updateCustomFields','Erro\x20ao\x20deletar\x20mensagens:','birthtime','groupMetadata','pollCreationMessageV3','default','JWT','last','importChatsBatch','\x5c$&','sign','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.','secondValue','bulkWrite','startsWith','\x20e\x20ID=','.ppt','):\x20whoCanEdit\x20before\x20validation:\x20','Last\x20message\x20not\x20found\x20for\x20number:\x20','processgoToFlow','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','authState','readMessageBot','\x20removido\x20do\x20chat\x20','myAppStateKeyId','longitude','groups_ignore','createConversationforStartFlow','deleteMessage','markMessageAsRead','saveVariable','\x27\x20não\x20encontrado\x20na\x20memória','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','leadInfo.atendimentoAberto','_Contacts','archiveChat','uazapiSendLocation','):\x20conversation.status:\x20','from','LOG','\x20do\x20chat\x20','SERVER_OFFLINE','createInstance','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','processConditions','request\x20received\x20in\x20starFlow','findManyByIds','DELETED',',\x20valor\x20passado:\x20\x22','badSession','audioWhatsapp','_error','\x20segundos','sendCommand','setting','leaveGroup','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','Valor\x20de\x20find\x20ou\x20replace\x20ausente','localWebhook','messages.update','groupUpdateSubject','Erro\x20ao\x20atualizar\x20o\x20flow.','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','transformScheduledMessagesByType','notify','onWhatsApp','reaction','local_map','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','Subdomínio\x20extraído\x20do\x20caminho\x20SSL:','nextMessageId','Chat\x20com\x20ID\x20','waitingMenu_ExpiredMessage','notContains','off','getClient','vcard','ff:fe','):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20','contactMessage','child_process','.error','/wa-presence','announce','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp','basename','reference','deletedCount','):\x20updateResult:','ephemeralMessage','atendimentoAberto','Erro\x20ao\x20importar\x20chats','getAutomateSystem','Instância:\x20','sharePass','scheduleMessage','fromMe','waInstances','allFlows','height','\x1b[33m\x1b[1m','Schema','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','.webm','agents','):\x20enviado\x20para\x20[','#d3a91f','Variável\x20não\x20encontrada!','verifyWhatsAppNumber','capitalizedWords','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','nome','toString','upperCase','STORE_CLEANING_TERMINAL','flattenObject','/chat','Router','/startFlow/:instance/:startID','subjectOwner','mentioned','prototype','array','\x1b[47m','key','ip\x20-6\x20addr\x20add\x20','-instances','exec','poll','revokeInviteCode','API_KEY','\x20Tentativa\x20de\x20reconexão\x20','.X-ABLabel:Celular\x0a','CLEANING_INTERVAL','copy','TEXT','):\x20Grupo\x20','getOwnPropertyNames','2487495MFGDdM','connectionClosed','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','HeaderType','https://ipv6.jsonip.com','application/octet-stream','.\x20Pulando.','Flow\x20\x27','loadWebhook','Instance\x20Name:','replace','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','pollCreationMessageV2','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','uazapiSendText','):Delete\x20chat','empty','urlencoded','documentWithCaptionMessage','../env.yml','lean','getProfileName','StartBot','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','Mensagens\x20deletadas\x20com\x20sucesso.','automateSystem','startFlow','ip\x20-br\x20link\x20show','\x20depois\x20','DEBUG','\x1b[46m','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','convert','valid','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','#6f7bcf','startFlowWebhook','\x1b[31m','\x1b[42m','saveConversationToDatabase','https://api64.ipify.org?format=json','urlOrBase64','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','ip6eui','load','jsonschema','SERVER_ACK','upsertChats','equal','):Getting\x20image\x20from\x20url','/wa-message','#56ccb4','Type\x20not\x20found','contacts','):\x20alterando\x20this.AutomateSystem','globalShow','stderr','MessageModel','\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','sort','flushHeaders','URL\x20não\x20disponível','):\x20[messages.upsert]\x20group\x20ignored','create','toArray','groupSettingUpdate','groupRequestParticipantsList','@g.us','The\x20','fora\x20do\x20git','ip:\x20','):\x20Fluxos\x20do\x20proprietário\x20\x27','_Flows','/instance/connectionState','https://','ORG:','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','prepareWAMessageMedia','undefined','pollCreationMessage','/config','\x20inseridos\x20no\x20banco\x20de\x20dados...','eventemitter2','exists','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','checkAndRestartProcess','\x20ao\x20chat\x20','\x27\x20já\x20existem\x20na\x20coleção\x20centralizada.','):\x20Going\x20to\x20','LEVEL','pushName','message','USER','Nenhum\x20fluxo\x20encontrado\x20para:\x20','\x22,\x20porém\x20não\x20foi\x20possível\x20descriptografá-la,\x20sendo\x20impossível\x20ver\x20seu\x20conteúdo.','request\x20received\x20in\x20updateFlowConfig','getUpdate','menuMessage','preview','createJid','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','toNumber','replaceVariablesLogs','restartInstance','getTicketSystem','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','data','realVariables','Erro\x20ao\x20copiar\x20o\x20documento','fetchProfilePicture','unlocked','\x5cd+','where','collection','editOperator','/wa-contacts','Novo\x20IP\x20criado:\x20','Erro\x20ao\x20inserir\x20chats:','):\x20lastBlockId:\x20','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20',',\x20pairCode:\x20','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','/media/','updateAutoCompleteMessages','):\x20[ERROR]:\x20Não\x20foi\x20possível\x20recuperar\x20mensagem\x20de\x20remotejid=','labels.association','waitingMenu_text','CONECTADO\x20À\x20UAZAPI','buttons','\x20contacts','):\x20Criando\x20fluxo...','Erro\x20ao\x20encerrar\x20a\x20API','Contacts\x20not\x20found','open','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','updateGParticipate','userDevicesCache','sendButtons','\x20minutos...','uazapiSendContact','scheduleFlow','chatModify','selectedOptions','express-async-errors',',\x20resultado:\x20','connectedClient','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','inner','createSectionsFromValues','):\x20encontrado\x20próxima\x20mensagem\x20para\x20','clearVariables','#dfaef0','toBRL','remove.instance','replaceOne','updateMessage','getMessageModelForOwner','groupadd','imgUrl','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','delayMessage','close','):\x20Criou\x20conversa\x20no\x20startFlow','CHATS_UPDATE','Deleted\x20','AddChatLabel','findGroupInfo','presenceSubscribe','menuType','jpegThumbnail','):\x20Atualizando\x20status\x20da\x20mensagem\x20','throwAndLogError','vote','tags','video-cover.png','put','Button\x20IDs\x20cannot\x20be\x20repeated.','TYPE','Missing\x20global\x20api\x20key','expiration','flowPrefixCommand','/wa-qrcode','code','exit','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','Erro\x20ao\x20atualizar\x20agendamento\x20','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','instanceKeys','\x1b[32m','PORT','mediaSticker','logger','):\x20Falha\x20ao\x20deletar\x20mensagem.',',\x20Novo\x20tamanho:\x20','messageHandle','post','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','normalizeMessage','send.message','textMessage','.pptx','Erro\x20ao\x20criar\x20fluxo','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','chats.upsert','/wa-chats','promote','):\x20\x27Enviando\x20texto\x20para\x20\x27','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','Error\x20fetching\x20and\x20updating\x20profile:\x20','setContext','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','value','fetchPrivacySettings','find','Erro\x20ao\x20iniciar\x20fluxo:\x20','no.connection','connectToWhatsapp','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.','groupValidate','application/json','numbers','Número\x20não\x20possui\x20WhatsApp.','createOrUpdate','.gif','):\x20Ignoring\x20group\x20messages.','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence','Mensagem\x20não\x20suportada','ContactModel','):\x20Criou\x20conversa\x20no\x20startFlowWebhook','map','whatsappNumber','groupId','ephemeralDuration','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','):\x20Buscando\x20conversas...','\x1b[34m','cacheInstanceRepository','rows','resetReconnectionVariables','.jwt','COLOR','):Business\x20profile\x20fetched','DisconnectReason','updateProfilePicturePrivacy','copyBlock','finish','imagechat','noConnection','number','Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','prepareMediaMessage','fetchLabels','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','Esse\x20fluxo\x20não\x20permite\x20importação.','connectionStatus','StartID:','redirect','backgroundColor','):\x20Entrou\x20na\x20função\x20processawaitSeconds','hGetAll','request\x20received\x20in\x20editFlowvariable','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','CONNECTION_UPDATE','groupBetterSetting','ListType','):\x20whoCanUse\x20before\x20validation:\x20','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','conditions','readMessages','replaceValue','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','getHours','./.git/config','role','qrcode','lowerCase','Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage','parse','allContacts','.svg','address','Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups','admin','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','Fluxo\x20agendado\x20pelo\x20fluxo\x20','goNextblock','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','#64c4ff','CacheContacts\x20database\x20connection\x20closed.','option','text','Error\x20in\x20scheduleNextCheck:\x20',',\x20Segundo\x20Valor:\x20','SendScheduleMessage','flow','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','muteEndTime','connect','):\x20Procurando\x20conversa','groupUpdateDescription','1365331ixMqkg','Not\x20is\x20business\x20profile','notEqual','name','/media','Instance\x20ID:','false','\x1b[1m','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','onTime','\x0aitem','CORS','saveMediaToFile','fetchChats','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','evaluateCondition','):\x20Parar\x20função\x20pois\x20não\x20está\x20conectado','object','binary','variablesNotFound','_sender','Erro\x20ao\x20executar\x20bulkWrite:','Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral','https://jsonip.com','readreceipts','length','fetchInstances','deleteInstance','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','Erro\x20ao\x20substituir\x20variáveis\x20para\x20','organization','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','demote','padStart','whatsappNumbers','floor','):\x20Entrou\x20na\x20função\x20clearVariables','label_jid','profilePictureUrl','media','Tentando\x20reconectar...','MESSAGES_SET','Erro\x20ao\x20editar\x20o\x20chat','groupMemberAddMode','):Image\x20created','^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$','getLabelModelForOwner','listType','viewOnceMessage','path','):Image\x20path:\x20','subject','Erro\x20ao\x20alterar\x20fluxo','updateOneById','flowConversation','updatePrivacySettings','app-state-sync-key','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','Last\x20message\x20not\x20found','getBase64FromMediaMessage','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','\x1b[44m','buttonId',',\x20valor\x20a\x20encontrar:\x20\x22','loggedOut','):\x20transformedCustomFieldVariables','}}\x20->\x20\x22','output','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','max','caption','CONTACTS_SET','flush','):\x20teve\x20mudanças\x20chat.archived:\x20','):\x20Enviando\x20mensagem\x20para\x20','authService','):Fetching\x20business\x20profile','OrAnd','loadInstance','ephemeralExpiration','findAndReplaceRegex','delAll','fetchBusinessProfile','block','oldToken','next_groupId','ENABLED','getFlow','saveChatVariables','pollMessage','CREDENTIALS','request\x20received\x20in\x20editConversation','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','/instance','groupParticipantsUpdate','instancias:\x20','timeout','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','/instance/create','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','startCommandWord','util','qrCode','startID','CHATS_UPSERT','imported','round','stopWhenYouSendMsg',',\x20fará\x20nova\x20verificação\x20em\x20','?timestamp=','fone','created','removeInstance','isBusiness','Erro\x20ao\x20atualizar\x20AutomateSystem:','sendMedia','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','SEND_MESSAGE','deleted','limit','):\x20Enviando\x20contato','fromObject','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','contact','updateStopChat','hbs','description','webhookService','fetchConversation','verbose','updateProfileName','entries','delaySecMin','error\x20get\x20vote','item','request\x20received\x20in\x20editFlowgroup','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','):\x20Editando\x20variável\x20do\x20fluxo...','reviver','ReplyOption\x20com\x20ID\x20','updateFlowConfig','BufferJSON','@ffmpeg-installer/ffmpeg','truncatedtoEnd','):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27','expression','pollCreationMessageKey','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','chat','admin_add','#ffc5c7','findById','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','DARK','dataValidate','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','flowIgnoreGroups','mongodb','reconnectAttempts','cacheInstanceModel','Message\x20not\x20found','):Audio\x20converted\x20and\x20stored\x20in\x20cache','chat\x20não\x20encontrado','updateProfileStatus','delayChatLabel_MAX_RETRIES','Instância\x20não\x20encontrada.','Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants','updateAll','?authSource=admin&readPreference=primary&directConnection=true','forEach','notEmpty','Erro\x20ao\x20atualizar\x20conversa:\x20','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','Instance\x20logged\x20out','profileName','requestFile','-whatsapp-api','FlowModel','status','toFile','LICENSE_INVALID','Erro\x20ao\x20adicionar\x20label\x20','dbClient','instanceInfo','waUploadToServer','beautifyWithPlaceholders','processScheduleFlow','.xlsx','activatedCount','):\x20não\x20encontrou','writeData','Types','format','CORS_ORIGIN','\x20}\x0a','):\x20ev.flush\x20realizado','$dbName','inviteCode','groupDesc','getDevice','\x1b[41m','currency','.mp3','spawn','Falha\x20ao\x20processar\x20fetchBusinessProfile','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','dropCollection','updateMissingTags','/events/:instance','Conversa\x20deletada\x20com\x20sucesso.','flowStopConversation','updateReadReceiptsPrivacy','Erro\x20de\x20atualização:\x20','):Type\x20defined\x20as\x20audio','memberAddMode','choices','latitude','http','delaySecMax','del','REDIS_PREFIX_KEY','Sistema\x20atualizado\x20com\x20sucesso!','hasOwnProperty','getChatModelForOwner','when','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','RECONNECT_TIME_FRAME','LOG_COLOR','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','routerPath','long','createHash','assign','updateGParticipant','createConnection','isListOfNumbers','Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:','):\x20Criando\x20nova\x20conversa[createNewConversation]',',\x20Expiration\x20Time:\x20','scheduled','leadInfo','command','existsSync','CHATS_DELETE','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc','keyPattern','views','data:\x20','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','\x20horas\x20e\x20','audio/ogg;\x20codecs=opus','bodyStringErrorParse','request\x20body:\x20','@broadcast','use','composing','END:VCARD','findGroups','Cannot\x20','params','reactionMessage','https://api.openai.com/v1/audio/speech','groupInviteCode','lastCondition','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','type','view\x20engine','):\x20Criando\x20fluxo\x20compartilhado...','statSync','notMatchRegex','sections','/exit','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','pre','isInteger','variablesToObject','Cache-Control','createConversationforgoToFlow','IPv6\x20address\x20removed:\x20','whoCanEdit','Close\x20connection','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','inet6','contactsArrayMessage','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','updateProfilePicture','instances','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','.ogg','Cache\x20instance\x20update\x20result:\x20','\x22\x20-\x20NOT\x20CONNECTION','*Pergunta*:\x20\x0a','[AUTH]\x20Database\x20is\x20not\x20enabled','authModel','send','https://uazapi-plugin.bubbleapps.io/?url=','match','recebido\x20de','isAdmin','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.','/wa-connection-update','updateCustomFields',',\x20saindo.','webp','\x27...','Erro\x20ao\x20buscar\x20o\x20fluxo','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:','createIPv6','extractRegex','listen','unreadcount','0123456789ABCDEF','):\x20Editando\x20condição\x20do\x20fluxo...','\x20-i\x20','Nenhum\x20chat\x20encontrado\x20para\x20editar.','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','sendPoll','testIPv6','applyvaredit','detail','message_normalized','leadInfo.etiquetas','):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','DATABASE_ENABLED','and','BRL','SERVER','getScheduleMessage','4uiyJpX','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','connectionUpdate','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','lastReceivedMessage','$pull','):\x20[RETRY]\x20Tentando\x20recuperar\x20mensagem\x20de\x20remotejid=','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','listResponseMessage','@s.whatsapp.net','setHeader','This\x20name\x20','waitingMenu_replyOptions','mediaKey','redis://127.0.0.1:6379','audioMessage','deleteMessageForEveryone','API\x20Key\x20inválida.','qrcode-terminal','optionName','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','action','contains','CONTACTS_UPSERT','Número:\x20','replyOptions','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','Error\x20writing\x20file:\x20','\x20inseridas\x20no\x20banco\x20de\x20dados...','conversationTimestamp','Partes\x20do\x20domínio:','ContactsAndGroups','The\x20property\x20cannot\x20be\x20empty','contacts.upsert','CONTACTS_UPDATE','envYaml','variable','request_time','):\x20error:\x20','last_update','groupToggleEphemeral','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','paused','creation','sendMenu','parseInt','setUpdate','Connection','editConversation','save','useMultiFileAuthState','editFlowGroup','Rótulo\x20deletado:\x27,\x20','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','protocolMessage','READ','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','editflowreply','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','removeIPv6ById','Removidas\x20as\x20variáveis:\x20','waitingMenu_id','editflowgroup','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','editFlowReply','createServer','flows','FlowController','stickerMessage','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','\x0a{\x20instance:\x20','integer','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','Subdomínio\x20extraído\x20da\x20URL:',',\x20qrcodeCount:\x20','):\x20Buscando\x20todos\x20os\x20fluxos...','abs','EXPIRIN_IN','listMessage','Erro\x20ao\x20remover\x20label\x20','updateGroupPicture','mediatype','getTime','findByIdAndDelete','Network\x20interfaces\x20detected:\x20','KEY','deleteChat','editChat','Modelo\x20de\x20proprietário\x20não\x20pôde\x20ser\x20criado\x20para:\x20','isValidAndUniqueIPv6','createNewConversation','charAt','Erro\x20ao\x20atualizar\x20o\x20fluxo:','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','\x1b[0m','/wa-groups','Error\x20testing\x20IP\x20with\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','generateHash','):\x20Editando\x20replyOption...','document','getLastMessage','extractPhoneNumber','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','findGroup','class-validator','getContactModelForOwner','originalUrl','cacheContact','convertaudioMP3','varedit','chats','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','groups','\x27\x20transferidos\x20para\x20a\x20coleção\x20centralizada.','shift','Filtered\x20network\x20interfaces:\x20','now','ipv6Prefix','$set','convertedOptions','owner','):\x20Limpando\x20AutomateSystem','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','groupAcceptInvite','title','insertCount','\x20adicionado\x20ao\x20chat\x20','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','\x1b[36m','Logger','msgRetryCounterCache','greater','scheduleSendAudio','eventHandler','updateConversation','writeFileSync','Error\x20finding\x20many\x20contacts:','sendMessage','instanceName\x20not\x20provided.','none','fetchProfilePictureUrl','sleep','dark','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','):\x20Editando\x20mensagens\x20no\x20grupo...','chatLog','push','_FlowHistorico','remove','#ffae04','ip\x20-6\x20addr\x20del\x20','GUARD','profile','contentText','\x1b[34m%s\x1b[0m','creds','apikey','Forbidden','The\x20instance\x20needs\x20to\x20be\x20disconnected','verifiedName','moreLogs','reorderReplyOptions','unhandledRejection','):\x20newSecondValue\x20após\x20replaceVariables:','lastBlockId','getConversationModelForOwner','decryptPollVote','):\x20Bloco\x20original\x20para\x20cópia:\x20','sendStatus','):including\x20timestamp\x20in\x20url:\x20','processConditionsTest','groupJoinApprovalMode','\x27\x20->\x20','.wav','MESSAGES_UPDATE','\x20-\x20ON:\x20','match_last_seen','statusCode','unreadCount','ConversationModel','):Delete\x20chat\x20in\x20client\x20for\x20number:\x20','content-type','getStatus','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','ERROR','string','utf8','compression','getflow','):\x20Fluxo\x20\x27','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','Primeiro\x20Valor:\x20','isRunning','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','):Desconectado,\x20parando\x20execução.','convertToWebP','router','deleteImportedChat','sticker','headers','):\x20Iniciando\x20bot...','bearer','cacheContactModel','groups.update','VERBOSE','matchRegex','Erro\x20ao\x20tentar\x20autoCompleteMessages','Fluxos\x20transferidos\x20do\x20proprietário\x20\x27','uuid','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','proxy:\x20','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','success','Rótulo\x20inválido\x20ou\x20sem\x20ID.','has','buffer','URI','60KxcSsd','reconnectTimestamps','fileUrl','isCommunity','\x22\x20-\x20REMOVED','cleanDisconnectedInstances','):\x20Alterando\x20fluxo...','bodyString','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','synchronizeAndMapFlows','buttonMessage','CORS_CREDENTIALS','):\x20Entrou\x20na\x20função\x20goToFlow','deleteBlock','PRESENCE_UPDATE'];a0_0x564a=function(){return _0x49a59e;};return a0_0x564a();}function T(_0x51bad6){const _0x4549a3=a0_0x37fa70;let _0xb9be35={};for(let [_0x37effe,_0xc12c]of Object[_0x4549a3(0x491)](_0x51bad6))if(typeof _0xc12c==_0x4549a3(0x41e)&&!Array['isArray'](_0xc12c)){for(let [_0x230139,_0x3a3a02]of Object['entries'](_0xc12c))_0xb9be35[_0x37effe+'.'+_0x230139]=_0x3a3a02;}else _0xb9be35[_0x37effe]=_0xc12c;return _0xb9be35;}var Qe=class{constructor(_0x3e3e71,_0x45e4f2,_0x22a4cb,_0x449611,_0x176310,_0x387106,_0x1cf453,_0x28c976,_0x5abf00,_0x4beefe,_0x35ebbf,_0x2c4563,_0xd74fa7){const _0x307751=a0_0x37fa70;this[_0x307751(0x33a)]=_0x3e3e71,this[_0x307751(0x4a2)]=_0x45e4f2,this['contact']=_0x22a4cb,this[_0x307751(0x5c6)]=_0x449611,this[_0x307751(0x18c)]=_0x176310,this[_0x307751(0x186)]=_0x387106,this['instance']=_0x1cf453,this[_0x307751(0x407)]=_0x28c976,this['flowConversation']=_0x5abf00,this[_0x307751(0x74d)]=_0x4beefe,this[_0x307751(0x2b4)]=_0x35ebbf,this['automateSystem']=_0x2c4563,this['dbClient']=_0xd74fa7;}get[a0_0x37fa70(0xc9)](){const _0x81c66=a0_0x37fa70;return this[_0x81c66(0x4c5)];}},Ye=class{},Xe=class extends O{[a0_0x37fa70(0x37b)](_0x2d9a0a){return ua(_0x2d9a0a);}async['insert'](_0x25e2c6,_0x4c5590){const _0x392320=a0_0x37fa70;if(_0x25e2c6[_0x392320(0x426)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x392320(0x37b)](_0x4c5590)[_0x392320(0x75e)]([..._0x25e2c6]))[_0x392320(0x426)]};}catch(_0x1e9ea5){return _0x1e9ea5;}}async[a0_0x37fa70(0x3b4)](_0x50b2ff,_0x464336){const _0x1d8399=a0_0x37fa70;try{let _0x5f4984=this[_0x1d8399(0x37b)](_0x464336),_0xea72aa=T(_0x50b2ff[_0x1d8399(0x34f)]);return await _0x5f4984['find'](_0xea72aa)['sort']({'messageTimestamp':-0x1})[_0x1d8399(0x485)](_0x50b2ff?.[_0x1d8399(0x485)]??0x0)[_0x1d8399(0x2f3)]();}catch{return[];}}async[a0_0x37fa70(0x6ad)](_0x4955c8,_0x3a9555){const _0x1a233c=a0_0x37fa70;try{let _0x122480=this[_0x1a233c(0x37b)](_0x3a9555),_0xc5c6a2=T(_0x4955c8[_0x1a233c(0x34f)]);await _0x122480[_0x1a233c(0x241)](_0xc5c6a2);}catch(_0xcee45f){console['error'](_0xcee45f);}}async[a0_0x37fa70(0x6c8)](_0x285936,_0x3f9953,_0x295d02){const _0x51d698=a0_0x37fa70;try{let _0x5901a4=this[_0x51d698(0x37b)](_0x295d02),_0x967207=T(_0x285936[_0x51d698(0x34f)]);return await _0x5901a4['findOneAndUpdate'](_0x967207,{'$set':_0x3f9953},{'new':!0x0});}catch(_0x134883){throw console['error'](_0x134883),_0x134883;}}async[a0_0x37fa70(0x75e)](_0x4a5b59,_0x1b5daa){const _0x230727=a0_0x37fa70;if(_0x4a5b59[_0x230727(0x426)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x230727(0x37b)](_0x1b5daa)[_0x230727(0x75e)]([..._0x4a5b59]))[_0x230727(0x426)]};}catch(_0x544449){return console[_0x230727(0xec)]('ERROR:\x20',_0x544449),_0x544449;}}async[a0_0x37fa70(0x79b)](_0x20968d){const _0x5ee395=a0_0x37fa70;try{return await this[_0x5ee395(0x37b)](_0x20968d)['collection'][_0x5ee395(0x6e2)](),{'success':!0x0};}catch(_0x18f839){return console[_0x5ee395(0x723)](_0x18f839),{'success':!0x1,'error':_0x18f839};}}},Ps=I(require(a0_0x37fa70(0x49c))),w=I(require(a0_0x37fa70(0x7d))),Le=require('fs'),J=I(require(a0_0x37fa70(0x43f))),Z=I(require(a0_0x37fa70(0x150))),xi=require(a0_0x37fa70(0x62c)),Di=I(require(a0_0x37fa70(0x3f2))),Pi=I(require(a0_0x37fa70(0x56a))),$a=[a0_0x37fa70(0xa5),a0_0x37fa70(0x115),'audioMessage',a0_0x37fa70(0x1a5),a0_0x37fa70(0x59e)],Ra=[a0_0x37fa70(0x2ae),a0_0x37fa70(0x2f1),a0_0x37fa70(0x43e),a0_0x37fa70(0xc2)],ks=require('os'),Jt=I(require('pino')),Ue=require(a0_0x37fa70(0x2a5)),ki=require('node-mime-types'),we=I(require('mongoose')),L=require(a0_0x37fa70(0x5c3)),pe=class{constructor(_0x174020,_0x2e6b4d,_0x7efccb){const _0x1150d8=a0_0x37fa70;this[_0x1150d8(0xb1)]=_0x174020,this[_0x1150d8(0x332)]=_0x2e6b4d,this[_0x1150d8(0x410)]=_0x7efccb;}},Ze=class{},et=class{},_e=class{},tt=class{},st=class{},ve=class{},at=class{},it=class{},ot=class{},rt=class{},kt=I(require(a0_0x37fa70(0x149))),Aa=require('fs'),Ia=require(a0_0x37fa70(0x43f));async function Oe(_0x3dacb4){const _0x144e4c=a0_0x37fa70;let _0x274c62=z[_0x144e4c(0x2b6)][_0x3dacb4];if(j[_0x144e4c(0x464)]){let _0x502101=A[_0x144e4c(0x2a0)]()['db'](j[_0x144e4c(0x66d)][_0x144e4c(0x12f)]+'-instances')[_0x144e4c(0x350)](_0x3dacb4);return _0x274c62||(await _0x502101[_0x144e4c(0x3b4)]({})[_0x144e4c(0x31f)]())[_0x144e4c(0x426)]>0x0;}return _0x274c62||(0x0,Aa[_0x144e4c(0x502)])((0x0,Ia[_0x144e4c(0x114)])(Ce,_0x3dacb4));}async function Ta(_0xefe47,_0xb91c21,_0x389ba4){const _0x148f99=a0_0x37fa70;if(_0xefe47[_0x148f99(0x5c5)]['includes'](_0x148f99(0x470))||_0xefe47['originalUrl'][_0x148f99(0x14a)]('/instance/fetchInstances')||_0xefe47[_0x148f99(0x5c5)]['includes'](_0x148f99(0x51f))||_0xefe47[_0x148f99(0x5c5)][_0x148f99(0x14a)](_0x148f99(0x32f))||_0xefe47[_0x148f99(0x5c5)][_0x148f99(0x14a)]('/instance/connect')||_0xefe47[_0x148f99(0x5c5)][_0x148f99(0x14a)](_0x148f99(0x328))||_0xefe47[_0x148f99(0x5c5)][_0x148f99(0x14a)](_0x148f99(0x7c6)))return _0x389ba4();let _0x30c29d=_0xefe47[_0x148f99(0x513)];if(!_0x30c29d?.[_0x148f99(0x653)])throw new m(_0x148f99(0x5e6));if(!await Oe(_0x30c29d[_0x148f99(0x653)]))throw new V(_0x148f99(0x323)+_0x30c29d['instanceName']+_0x148f99(0x773));_0x389ba4();}async function _a(_0x48933a,_0x338be0,_0x2af295){const _0x5cf765=a0_0x37fa70;if(_0x48933a[_0x5cf765(0x5c5)][_0x5cf765(0x14a)]('/instance/create')){let _0x1635f3=_0x48933a['body'];if(await Oe(_0x1635f3[_0x5cf765(0x653)]))throw new se(_0x5cf765(0x563)+_0x1635f3[_0x5cf765(0x653)]+'\x20is\x20already\x20in\x20use.');z[_0x5cf765(0x2b6)][_0x1635f3['instanceName']]&&delete z[_0x5cf765(0x2b6)][_0x1635f3[_0x5cf765(0x653)]];}_0x2af295();}var Oa=require(a0_0x37fa70(0x5c3)),xa=I(require('jsonwebtoken')),nt=a0_0x37fa70(0x6b3),To=new $(a0_0x37fa70(0x5f3));async function _o(_0x529659,_0x2ab48c,_0xdcd679){const _0x353783=a0_0x37fa70;let _0x59b5f4=_0x529659['get'](_0x353783(0x5f8));if(_0x59b5f4&&S[_0x353783(0x7b6)]('AUTHENTICATION')[_0x353783(0x2d7)][_0x353783(0x5af)]!==_0x59b5f4)throw new ne();if(S['get'](_0x353783(0x725))[_0x353783(0x2d7)][_0x353783(0x5af)]===_0x59b5f4)return _0xdcd679();if((_0x529659[_0x353783(0x5c5)]['includes']('/instance/create')||_0x529659[_0x353783(0x5c5)][_0x353783(0x14a)]('/instance/fetchInstances'))&&!_0x59b5f4)throw new se(_0x353783(0x391),_0x353783(0x160));let _0x1e07ce=S[_0x353783(0x7b6)](_0x353783(0x725))[_0x353783(0x25a)];try{let [_0x4e6598,_0x35d909]=_0x529659[_0x353783(0x7b6)](_0x353783(0x6d3))['split']('\x20');if(_0x4e6598['toLowerCase']()!==_0x353783(0x625))throw new ne();if(!(0x0,Oa[_0x353783(0x1b6)])(_0x35d909))throw new ne();let _0x228e10=_0x529659[_0x353783(0x513)],_0x55b511=xa['default'][_0x353783(0x216)](_0x35d909,_0x1e07ce['SECRET'],{'ignoreExpiration':_0x1e07ce[_0x353783(0x5a7)]===0x0});if(_0x228e10[_0x353783(0x653)]!==_0x55b511[_0x353783(0x653)]||nt!==_0x55b511['apiName'])throw new ne();return _0xdcd679();}catch(_0x88851f){throw To[_0x353783(0x723)](_0x88851f),new ne();}}async function Oo(_0x347cb4,_0x3d2528,_0x47a2de){const _0x1ed2fa=a0_0x37fa70;let _0x4bb288=S[_0x1ed2fa(0x7b6)]('AUTHENTICATION')['API_KEY'],_0x2ce8aa=_0x347cb4[_0x1ed2fa(0x7b6)](_0x1ed2fa(0x5f8));if(_0x4bb288[_0x1ed2fa(0x5af)]===_0x2ce8aa)return _0x47a2de();if(_0x347cb4[_0x1ed2fa(0x5c5)][_0x1ed2fa(0x14a)](_0x1ed2fa(0x470))){let _0x17f1a6=Pa,_0x18484e=_0x347cb4[_0x1ed2fa(0x22a)][_0x1ed2fa(0x653)];if(_0x17f1a6&&_0x18484e[_0x1ed2fa(0x1c6)]()[_0x1ed2fa(0x262)](_0x17f1a6[_0x1ed2fa(0x1c6)]()))return _0x47a2de();if(!_0x2ce8aa)throw new se(_0x1ed2fa(0x391),_0x1ed2fa(0x160));}if(_0x347cb4[_0x1ed2fa(0x5c5)][_0x1ed2fa(0x14a)](_0x1ed2fa(0x6a4))&&!_0x2ce8aa)throw new se(_0x1ed2fa(0x391),_0x1ed2fa(0x160));if(_0x347cb4[_0x1ed2fa(0x5c5)][_0x1ed2fa(0x14a)](_0x1ed2fa(0x51f))&&!_0x2ce8aa)throw new se(_0x1ed2fa(0x391),_0x1ed2fa(0x160));if(_0x347cb4[_0x1ed2fa(0x5c5)][_0x1ed2fa(0x14a)](_0x1ed2fa(0x32f))&&!_0x2ce8aa)throw new se(_0x1ed2fa(0x391),_0x1ed2fa(0x160));try{let _0x376953=_0x347cb4['params'],_0x377bdc=await be[_0x1ed2fa(0x186)][_0x1ed2fa(0x3b4)](_0x376953[_0x1ed2fa(0x653)]);if(_0x377bdc&&_0x377bdc['apikey']===_0x2ce8aa)return _0x47a2de();}catch{}throw new ne();}var Da={'jwt':_o,'apikey':Oo},mi=require(a0_0x37fa70(0x149)),v=require(a0_0x37fa70(0x62c)),E=(..._0x47cbe9)=>{const _0x716354=a0_0x37fa70;let _0x592214={};return _0x47cbe9['forEach'](_0x1b116a=>_0x592214[_0x1b116a]={'minLength':0x1,'description':_0x716354(0x154)+_0x1b116a+_0x716354(0x710)}),{'if':{'propertyNames':{'enum':[..._0x47cbe9]}},'then':{'properties':_0x592214}};},N={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'instanceName':{'type':a0_0x37fa70(0x615)}},...E(a0_0x37fa70(0x653))},yc={'$id':(0x0,v['v4'])(),'type':'object','properties':{'oldToken':{'type':a0_0x37fa70(0x615)}},'required':[a0_0x37fa70(0x462)],...E('oldToken')},bc={'properties':{'key':{'type':a0_0x37fa70(0x41e),'properties':{'id':{'type':a0_0x37fa70(0x615)},'remoteJid':{'type':a0_0x37fa70(0x615)},'fromMe':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]}},'required':['id','remoteJid',a0_0x37fa70(0x2b5)],...E('id',a0_0x37fa70(0x6a8))},'message':{'type':a0_0x37fa70(0x41e)}}},ae={'properties':{'delay':{'type':'integer','description':'Enter\x20a\x20value\x20in\x20milliseconds'},'presence':{'type':a0_0x37fa70(0x615),'enum':[a0_0x37fa70(0x1f5),a0_0x37fa70(0x196),a0_0x37fa70(0x50f),a0_0x37fa70(0x663),a0_0x37fa70(0x583)]}}},Y={'type':a0_0x37fa70(0x615),'description':a0_0x37fa70(0x734)},ka={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'number':{...Y},'options':{...ae},'textMessage':{'type':'object','properties':{'text':{'type':'string'}},'required':['text'],...E(a0_0x37fa70(0x403))}},'required':[a0_0x37fa70(0x3a6),a0_0x37fa70(0x3d7)]},Fa={'type':'string','pattern':a0_0x37fa70(0x429),'description':a0_0x37fa70(0x734)},Sc={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...Fa},'options':{...ae},'textMessage':{'type':a0_0x37fa70(0x41e),'properties':{'text':{'type':'string'}},'required':[a0_0x37fa70(0x403)],...E(a0_0x37fa70(0x403))}},'required':[a0_0x37fa70(0x3a6),'number']},Mc={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...Fa},'options':{...ae},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x37fa70(0x615),'enum':[a0_0x37fa70(0x1b2),'document','video',a0_0x37fa70(0x1a9)]},'media':{'type':a0_0x37fa70(0x615)},'fileName':{'type':a0_0x37fa70(0x615)},'caption':{'type':a0_0x37fa70(0x615)}},'required':[a0_0x37fa70(0x5ab),'media'],...E(a0_0x37fa70(0x765),'caption',a0_0x37fa70(0x435))}},'required':[a0_0x37fa70(0x6ec),a0_0x37fa70(0x3d7)]},La={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'number':{...Y},'options':{...ae},'stickerMessage':{'type':a0_0x37fa70(0x41e),'properties':{'image':{'type':a0_0x37fa70(0x615)}},'required':['image'],...E(a0_0x37fa70(0x1b2))}},'required':[a0_0x37fa70(0x59e),a0_0x37fa70(0x3d7)]},Ua={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'statusMessage':{'type':a0_0x37fa70(0x41e),'properties':{'type':{'type':a0_0x37fa70(0x615),'enum':[a0_0x37fa70(0x403),a0_0x37fa70(0x1b2),a0_0x37fa70(0x1a9),a0_0x37fa70(0x65c)]},'content':{'type':a0_0x37fa70(0x615)},'caption':{'type':a0_0x37fa70(0x615)},'backgroundColor':{'type':a0_0x37fa70(0x615)},'font':{'type':'integer','minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x37fa70(0x2cf),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x37fa70(0x615),'pattern':a0_0x37fa70(0x6a3),'description':'\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}},'allContacts':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]}},'required':[a0_0x37fa70(0x519),a0_0x37fa70(0xcb)],...E('type',a0_0x37fa70(0xcb))}},'required':[a0_0x37fa70(0x212)]},ja={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'number':{...Y},'options':{...ae},'mediaMessage':{'type':a0_0x37fa70(0x41e),'properties':{'mediatype':{'type':a0_0x37fa70(0x615),'enum':[a0_0x37fa70(0x1b2),a0_0x37fa70(0x5be),a0_0x37fa70(0x65c),a0_0x37fa70(0x1a9)]},'media':{'type':a0_0x37fa70(0x615)},'fileName':{'type':a0_0x37fa70(0x615)},'caption':{'type':'string'}},'required':[a0_0x37fa70(0x5ab),'media'],...E(a0_0x37fa70(0x765),a0_0x37fa70(0x454),a0_0x37fa70(0x435))}},'required':[a0_0x37fa70(0x6ec),a0_0x37fa70(0x3d7)]},Ja={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'number':{...Y},'options':{...ae},'audioMessage':{'type':a0_0x37fa70(0x41e),'properties':{'audio':{'type':'string'}},'required':['audio'],...E(a0_0x37fa70(0x1a9))}},'required':[a0_0x37fa70(0x567),'number']},qa={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...Y},'pollMessage':{'type':'object','properties':{'name':{'type':a0_0x37fa70(0x615)},'selectableCount':{'type':'number'},'values':{'type':a0_0x37fa70(0x2cf),'minItems':0x2,'uniqueItems':!0x0}},'required':['name',a0_0x37fa70(0x79e),a0_0x37fa70(0x13a)],...E(a0_0x37fa70(0x410),'selectableCount',a0_0x37fa70(0x13a))}},'required':[a0_0x37fa70(0x3d7),'pollMessage']},Va={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'number':{...Y},'menuMessage':{'type':a0_0x37fa70(0x41e),'properties':{'text':{'type':a0_0x37fa70(0x615)},'choices':{'type':a0_0x37fa70(0x2cf),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x37fa70(0x403),a0_0x37fa70(0x4e7)],...E(a0_0x37fa70(0x403),'choices')}},'required':[a0_0x37fa70(0x3d7),a0_0x37fa70(0x340)]},Ga={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'number':{...Y},'options':{...ae},'buttonMessage':{'type':a0_0x37fa70(0x41e),'properties':{'title':{'type':a0_0x37fa70(0x615)},'description':{'type':a0_0x37fa70(0x615)},'footerText':{'type':a0_0x37fa70(0x615)},'buttons':{'type':a0_0x37fa70(0x2cf),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'buttonText':{'type':a0_0x37fa70(0x615)},'buttonId':{'type':a0_0x37fa70(0x615)}},'required':['buttonText',a0_0x37fa70(0x44c)],...E('buttonText',a0_0x37fa70(0x44c))}},'mediaMessage':{'type':'object','properties':{'media':{'type':a0_0x37fa70(0x615)},'fileName':{'type':a0_0x37fa70(0x615)},'mediatype':{'type':a0_0x37fa70(0x615),'enum':[a0_0x37fa70(0x1b2),a0_0x37fa70(0x5be),a0_0x37fa70(0x65c)]}},'required':['media',a0_0x37fa70(0x5ab)],...E('media',a0_0x37fa70(0x765))}},'required':[a0_0x37fa70(0x5d8),a0_0x37fa70(0x35f)],...E('title',a0_0x37fa70(0x48c))}},'required':[a0_0x37fa70(0x3d7),a0_0x37fa70(0x63f)]},Ba={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'number':{...Y},'options':{...ae},'locationMessage':{'type':a0_0x37fa70(0x41e),'properties':{'latitude':{'type':a0_0x37fa70(0x3d7)},'longitude':{'type':a0_0x37fa70(0x3d7)},'name':{'type':'string'},'address':{'type':'string'}},'required':['latitude',a0_0x37fa70(0x26d)],...E(a0_0x37fa70(0x410),a0_0x37fa70(0x7c1))}},'required':[a0_0x37fa70(0x3d7),'locationMessage']},Wa={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'number':{...Y},'options':{...ae},'listMessage':{'type':a0_0x37fa70(0x41e),'properties':{'title':{'type':a0_0x37fa70(0x615)},'description':{'type':a0_0x37fa70(0x615)},'footerText':{'type':a0_0x37fa70(0x615)},'buttonText':{'type':a0_0x37fa70(0x615)},'sections':{'type':a0_0x37fa70(0x2cf),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x37fa70(0x41e),'properties':{'title':{'type':a0_0x37fa70(0x615)},'rows':{'type':a0_0x37fa70(0x2cf),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x37fa70(0x41e),'properties':{'title':{'type':a0_0x37fa70(0x615)},'description':{'type':'string'},'rowId':{'type':a0_0x37fa70(0x615)}},'required':[a0_0x37fa70(0x5d8),a0_0x37fa70(0x6cc)],...E(a0_0x37fa70(0x5d8),a0_0x37fa70(0x6cc))}}},'required':[a0_0x37fa70(0x5d8),a0_0x37fa70(0x3cc)],...E(a0_0x37fa70(0x5d8))}}},'required':[a0_0x37fa70(0x5d8),a0_0x37fa70(0x48c),a0_0x37fa70(0x7bd),'sections'],...E(a0_0x37fa70(0x5d8),a0_0x37fa70(0x48c),a0_0x37fa70(0x7bd),a0_0x37fa70(0x681))}},'required':[a0_0x37fa70(0x3d7),a0_0x37fa70(0x5a8)]},za={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...Y},'options':{...ae},'contactMessage':{'type':'array','items':{'type':'object','properties':{'fullName':{'type':'string'},'phoneNumber':{'type':a0_0x37fa70(0x615),'minLength':0xa}},'required':['fullName',a0_0x37fa70(0x181)],...E(a0_0x37fa70(0x797))},'minItems':0x1,'uniqueItems':!0x0}},'required':['number','contactMessage']},Ha={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'reactionMessage':{'type':a0_0x37fa70(0x41e),'properties':{'key':{'type':a0_0x37fa70(0x41e),'properties':{'id':{'type':a0_0x37fa70(0x615)},'remoteJid':{'type':a0_0x37fa70(0x615)},'fromMe':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]}},'required':['id',a0_0x37fa70(0x6a8),'fromMe'],...E('id',a0_0x37fa70(0x6a8))},'reaction':{'type':a0_0x37fa70(0x615)}},'required':[a0_0x37fa70(0x2d1),a0_0x37fa70(0x297)],...E(a0_0x37fa70(0x297))}},'required':['reactionMessage']},Ka={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'numbers':{'type':a0_0x37fa70(0x2cf),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x37fa70(0x615),'pattern':a0_0x37fa70(0x6a3),'description':a0_0x37fa70(0x496)}}}},Qa={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'readMessages':{'type':a0_0x37fa70(0x2cf),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x37fa70(0x615)},'fromMe':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x37fa70(0x615)}},'required':['id',a0_0x37fa70(0x2b5),'remoteJid'],...E('id',a0_0x37fa70(0x6a8))}}},'required':[a0_0x37fa70(0x3eb)]},Ya={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'privacySettings':{'type':a0_0x37fa70(0x41e),'properties':{'readreceipts':{'type':a0_0x37fa70(0x615),'enum':[a0_0x37fa70(0x1ea),'none']},'profile':{'type':a0_0x37fa70(0x615),'enum':[a0_0x37fa70(0x1ea),a0_0x37fa70(0x314),a0_0x37fa70(0x79a),a0_0x37fa70(0x5e7)]},'status':{'type':a0_0x37fa70(0x615),'enum':[a0_0x37fa70(0x1ea),a0_0x37fa70(0x314),a0_0x37fa70(0x79a),a0_0x37fa70(0x5e7)]},'online':{'type':'string','enum':[a0_0x37fa70(0x1ea),a0_0x37fa70(0x60c)]},'last':{'type':'string','enum':[a0_0x37fa70(0x1ea),a0_0x37fa70(0x314),a0_0x37fa70(0x79a),a0_0x37fa70(0x5e7)]},'groupadd':{'type':a0_0x37fa70(0x615),'enum':[a0_0x37fa70(0x1ea),a0_0x37fa70(0x314),a0_0x37fa70(0x79a),'none']}},'required':[a0_0x37fa70(0x425),a0_0x37fa70(0x5f4),'status',a0_0x37fa70(0xcf),'last','groupadd'],...E(a0_0x37fa70(0x425),a0_0x37fa70(0x5f4),'status',a0_0x37fa70(0xcf),a0_0x37fa70(0x25b),a0_0x37fa70(0x37c))}},'required':['privacySettings']},Xa={'$id':(0x0,v['v4'])(),'type':'object','properties':{'lastMessage':{'type':a0_0x37fa70(0x41e),'properties':{'key':{'type':a0_0x37fa70(0x41e),'properties':{'id':{'type':a0_0x37fa70(0x615)},'remoteJid':{'type':a0_0x37fa70(0x615)},'fromMe':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]}},'required':['id',a0_0x37fa70(0x2b5),a0_0x37fa70(0x6a8)],...E('id',a0_0x37fa70(0x6a8))},'messageTimestamp':{'type':a0_0x37fa70(0x5a1),'minLength':0x1}},'required':[a0_0x37fa70(0x2d1)],...E(a0_0x37fa70(0x686))},'archive':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['lastMessage',a0_0x37fa70(0x1cd)]},Za={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'id':{'type':a0_0x37fa70(0x615)},'fromMe':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'remoteJid':{'type':'string'},'participant':{'type':a0_0x37fa70(0x615)}},'required':['id',a0_0x37fa70(0x2b5),a0_0x37fa70(0x6a8)],...E('id',a0_0x37fa70(0x6a8),a0_0x37fa70(0x83))},ei={'$id':(0x0,v['v4'])(),'type':'object','properties':{'where':{'type':a0_0x37fa70(0x41e),'properties':{'_id':{'type':a0_0x37fa70(0x615),'minLength':0x1},'pushName':{'type':a0_0x37fa70(0x615),'minLength':0x1},'id':{'type':'string','minLength':0x1}},...E(a0_0x37fa70(0x1b0),'id',a0_0x37fa70(0x339))}}},ti={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'name':{'type':'string'}},...E(a0_0x37fa70(0x410))},si={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'status':{'type':a0_0x37fa70(0x615)}},...E('status')},xe={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'number':{'type':'string'},'picture':{'type':a0_0x37fa70(0x615)}}},ai={'type':a0_0x37fa70(0x41e),'properties':{'wuid':{'type':a0_0x37fa70(0x615)},'name':{'type':a0_0x37fa70(0x615)},'picture':{'type':a0_0x37fa70(0x615)},'status':{'type':a0_0x37fa70(0x615)},'isBusiness':{'type':a0_0x37fa70(0x742)}}},ii={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x37fa70(0x615),'minLength':0x1},'key':{'type':a0_0x37fa70(0x41e),'if':{'propertyNames':{'enum':['fromMe',a0_0x37fa70(0x6a8),'id']}},'then':{'properties':{'remoteJid':{'type':'string','minLength':0x1,'description':a0_0x37fa70(0x579)},'id':{'type':a0_0x37fa70(0x615),'minLength':0x1,'description':a0_0x37fa70(0x579)},'fromMe':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x37fa70(0x41e)}},...E('_id')},'limit':{'type':'integer'}}},Cc={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'where':{'type':a0_0x37fa70(0x41e),'properties':{'_id':{'type':a0_0x37fa70(0x615)},'remoteJid':{'type':a0_0x37fa70(0x615)},'id':{'type':'string'},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'participant':{'type':a0_0x37fa70(0x615)},'status':{'type':a0_0x37fa70(0x615),'enum':['ERROR',a0_0x37fa70(0x655),a0_0x37fa70(0x30d),'DELIVERY_ACK',a0_0x37fa70(0x590),a0_0x37fa70(0x67f)]}},...E(a0_0x37fa70(0x1b0),'remoteJid','id','status')},'limit':{'type':a0_0x37fa70(0x5a1)}}},oi={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'number':{...Y},'presence':{'type':a0_0x37fa70(0x615),'enum':['unavailable','available','composing',a0_0x37fa70(0x663),a0_0x37fa70(0x583)]}},'required':[a0_0x37fa70(0x190),a0_0x37fa70(0x3d7)]},ri={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'subject':{'type':'string'},'description':{'type':'string'},'profilePicture':{'type':a0_0x37fa70(0x615)},'participants':{'type':a0_0x37fa70(0x2cf),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':a0_0x37fa70(0x34e),'description':a0_0x37fa70(0x180)}}},'required':[a0_0x37fa70(0x441),'participants'],...E(a0_0x37fa70(0x441),a0_0x37fa70(0x48c),a0_0x37fa70(0x172))},De={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'groupJid':{'type':a0_0x37fa70(0x615),'pattern':a0_0x37fa70(0x65e)}},'required':[a0_0x37fa70(0x211)],...E(a0_0x37fa70(0x211))},ni={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'groupJid':{'type':a0_0x37fa70(0x615)},'action':{'type':'string','enum':[a0_0x37fa70(0xf8),a0_0x37fa70(0x5f0),a0_0x37fa70(0x3ac),a0_0x37fa70(0x42e),a0_0x37fa70(0x11a),a0_0x37fa70(0x192)]},'participants':{'type':a0_0x37fa70(0x2cf),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x37fa70(0x615),'minLength':0xa,'pattern':a0_0x37fa70(0x34e),'description':a0_0x37fa70(0x180)}}},'required':[a0_0x37fa70(0x211),a0_0x37fa70(0x56e),a0_0x37fa70(0x6a0)],...E(a0_0x37fa70(0x211),a0_0x37fa70(0x56e))},ci={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x37fa70(0x615)},'expiration':{'type':a0_0x37fa70(0x3d7),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x37fa70(0x211),a0_0x37fa70(0x392)],...E(a0_0x37fa70(0x211),a0_0x37fa70(0x392))},li={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'groupJid':{'type':a0_0x37fa70(0x615)},'image':{'type':a0_0x37fa70(0x615)}},'required':[a0_0x37fa70(0x211),a0_0x37fa70(0x1b2)],...E(a0_0x37fa70(0x211),'image')},ui={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'groupJid':{'type':'string'},'description':{'type':a0_0x37fa70(0x615)}},'required':[a0_0x37fa70(0x211),'description'],...E('groupJid','description')},di={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'name':{'type':a0_0x37fa70(0x615)}},'required':[a0_0x37fa70(0x211),a0_0x37fa70(0x410)],...E(a0_0x37fa70(0x211),a0_0x37fa70(0x410))},pi={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'groupJid':{'type':'string'},'setting':{'type':a0_0x37fa70(0x615),'enum':[a0_0x37fa70(0x78f),a0_0x37fa70(0x1c0),a0_0x37fa70(0x34d),'locked']}},'required':[a0_0x37fa70(0x211),'setting'],...E(a0_0x37fa70(0x211),a0_0x37fa70(0x28b))},hi={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'restrict':{'type':'boolean'},'announce':{'type':a0_0x37fa70(0x742)},'memberAddMode':{'type':a0_0x37fa70(0x742)},'joinApprovalMode':{'type':'boolean'},'expiration':{'type':a0_0x37fa70(0x5a1),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':'string'},'description':{'type':a0_0x37fa70(0x615)},'image':{'type':a0_0x37fa70(0x615)}}},$s={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'inviteCode':{'type':'string'}},'required':[a0_0x37fa70(0x4d4)],...E(a0_0x37fa70(0x4d4))},gi={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'url':{'type':a0_0x37fa70(0x615)},'enabled':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]}},'required':[a0_0x37fa70(0x75c),a0_0x37fa70(0x104)]},Ec={'$id':(0x0,v['v4'])(),'type':a0_0x37fa70(0x41e),'properties':{'local_map':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x37fa70(0x742),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x37fa70(0x298),a0_0x37fa70(0x112),a0_0x37fa70(0x68c),a0_0x37fa70(0x437),a0_0x37fa70(0x60a),a0_0x37fa70(0x1b5),a0_0x37fa70(0x483),a0_0x37fa70(0x455),a0_0x37fa70(0x570),a0_0x37fa70(0x57b),'PRESENCE_UPDATE',a0_0x37fa70(0xdf),a0_0x37fa70(0x476),a0_0x37fa70(0x382),a0_0x37fa70(0x503),'CONNECTION_UPDATE',a0_0x37fa70(0x191),a0_0x37fa70(0x659),a0_0x37fa70(0x7cf)],...E(a0_0x37fa70(0x298),a0_0x37fa70(0x112),'QRCODE_UPDATED','MESSAGES_SET',a0_0x37fa70(0x60a),a0_0x37fa70(0x1b5),a0_0x37fa70(0x483),'CONTACTS_SET','CONTACTS_UPSERT',a0_0x37fa70(0x57b),a0_0x37fa70(0x643),a0_0x37fa70(0xdf),'CHATS_UPSERT',a0_0x37fa70(0x382),a0_0x37fa70(0x503),a0_0x37fa70(0x3e5),a0_0x37fa70(0x191),'GROUPS_UPDATE',a0_0x37fa70(0x7cf))},ct=class{},lt=class extends O{[a0_0x37fa70(0x5c4)](_0x6381a8){return oa(_0x6381a8);}async[a0_0x37fa70(0x737)](_0x72cee4){const _0x131b94=a0_0x37fa70;if(_0x72cee4[_0x131b94(0x426)]!==0x0)try{return{'insertCount':(await this[_0x131b94(0x5c4)](_0x72cee4[0x0][_0x131b94(0x5d3)])[_0x131b94(0x75e)]([..._0x72cee4]))['length']};}catch(_0x20f6bf){return _0x20f6bf;}}async[a0_0x37fa70(0x6ad)](_0x2ec190,_0x2eabc1){const _0x42ce43=a0_0x37fa70;try{return{'deletedCount':(await this[_0x42ce43(0x5c4)](_0x2eabc1)[_0x42ce43(0x241)]({..._0x2ec190[_0x42ce43(0x34f)]}))[_0x42ce43(0x2ac)]};}catch(_0x58c16d){return{'error':_0x58c16d?.[_0x42ce43(0x2c5)]()};}}async['update'](_0x2156fb,_0x227756){const _0xb9f6e=a0_0x37fa70;try{if(_0x2156fb[_0xb9f6e(0x426)]===0x0)return;let _0x5454ed=this[_0xb9f6e(0x5c4)](_0x227756),_0x567ae8=_0x2156fb[_0xb9f6e(0x3c4)](_0x196da0=>({'updateOne':{'filter':{'_id':_0x196da0[_0xb9f6e(0x1b0)],'owner':_0x227756},'update':{..._0x196da0}}})),{modifiedCount:_0x26ecf7}=await _0x5454ed[_0xb9f6e(0x261)](_0x567ae8);return{'insertCount':_0x26ecf7};}catch{return;}}async[a0_0x37fa70(0x3b4)](_0x191c68,_0x510700){const _0x195176=a0_0x37fa70;try{let _0x123b94=this[_0x195176(0x5c4)](_0x510700),_0x3bc6f5=T(_0x191c68['where']);return await _0x123b94[_0x195176(0x3b4)](_0x3bc6f5)['limit'](_0x191c68?.[_0x195176(0x485)]??0x0)['lean']();}catch{return[];}}async['findOne'](_0x4e8cda,_0x311454){const _0x5dee18=a0_0x37fa70;try{let _0x1cd207=this[_0x5dee18(0x5c4)](_0x311454),_0x3ac6cd=T(_0x4e8cda['where']);return await _0x1cd207[_0x5dee18(0x1e2)](_0x3ac6cd)[_0x5dee18(0x2f3)]();}catch{return null;}}async['deleteAll'](_0x7d0ff0){const _0x36ab69=a0_0x37fa70;try{return await this[_0x36ab69(0x5c4)](_0x7d0ff0)[_0x36ab69(0x350)][_0x36ab69(0x6e2)](),{'success':!0x0};}catch(_0x10e773){return console['error'](_0x10e773),{'success':!0x1,'error':_0x10e773};}}},ut=require(a0_0x37fa70(0x30c)),Oc=require(a0_0x37fa70(0x36e)),Rs=new $('Validate'),W=class{['routerPath'](_0x490a8c,_0x389517=!0x0){const _0xf57cd=a0_0x37fa70;let _0x391424='/'+_0x490a8c;return _0x389517&&(_0x391424+=_0xf57cd(0x6bd)),_0x391424;}async[a0_0x37fa70(0x4a8)](_0x24d049){const _0x3dd140=a0_0x37fa70;let {request:_0x470c90,schema:_0x2d1934,ClassRef:_0x479342,execute:_0x43d5a5}=_0x24d049,_0x3a612a=new _0x479342(),_0x128493=_0x470c90[_0x3dd140(0x22a)],_0x46fab4=_0x470c90[_0x3dd140(0x513)];_0x470c90?.[_0x3dd140(0x6a6)]&&Object[_0x3dd140(0x674)](_0x470c90['query'])[_0x3dd140(0x426)]>0x0&&Object[_0x3dd140(0x4f8)](_0x46fab4,_0x470c90[_0x3dd140(0x6a6)]),_0x470c90[_0x3dd140(0x5c5)]['includes'](_0x3dd140(0x470))&&Object['assign'](_0x46fab4,_0x128493),Object['assign'](_0x3a612a,_0x128493);let _0x3dcf8c=_0x2d1934?(0x0,ut[_0x3dd140(0x207)])(_0x3a612a,_0x2d1934):{'valid':!0x0,'errors':[]};if(!_0x3dcf8c[_0x3dd140(0x300)]){let _0x1cf8fb=_0x3dcf8c[_0x3dd140(0x6ca)]['map'](({property:_0x48ebd1,stack:_0x4d1865,schema:_0x43c61d})=>{const _0x3bbed9=_0x3dd140;let _0x545bdd;return _0x43c61d[_0x3bbed9(0x48c)]?_0x545bdd=_0x43c61d['description']:_0x545bdd=_0x4d1865[_0x3bbed9(0x2e9)](_0x3bbed9(0x709),''),{'property':_0x48ebd1[_0x3bbed9(0x2e9)](_0x3bbed9(0x709),''),'message':_0x545bdd};});throw Rs['error']([..._0x1cf8fb]),new m(..._0x1cf8fb);}return await _0x43d5a5(_0x46fab4,_0x3a612a);}async[a0_0x37fa70(0x3b9)](_0x52e292){const _0x5aa606=a0_0x37fa70;let {request:_0x40a824,ClassRef:_0x3a8e7e,schema:_0x1a4827,execute:_0x204419}=_0x52e292,_0xb032cf=_0x40a824[_0x5aa606(0x6a6)];if(!_0xb032cf?.[_0x5aa606(0x211)])throw new m('The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query',_0x5aa606(0x1a6));let _0x3fff7b=_0x40a824[_0x5aa606(0x513)],_0x52bd17=_0x40a824['body'],_0x1ec674=new _0x3a8e7e();Object[_0x5aa606(0x4f8)](_0x52bd17,_0xb032cf),Object[_0x5aa606(0x4f8)](_0x1ec674,_0x52bd17);let _0x37f87e=(0x0,ut['validate'])(_0x1ec674,_0x1a4827);if(!_0x37f87e[_0x5aa606(0x300)]){let _0x587d5b=_0x37f87e[_0x5aa606(0x6ca)][_0x5aa606(0x3c4)](({property:_0x4bcde1,stack:_0x4a3caa,schema:_0x507d92})=>{const _0x1866df=_0x5aa606;let _0x573cc4;return _0x507d92['description']?_0x573cc4=_0x507d92['description']:_0x573cc4=_0x4a3caa[_0x1866df(0x2e9)](_0x1866df(0x709),''),{'property':_0x4bcde1[_0x1866df(0x2e9)](_0x1866df(0x709),''),'message':_0x573cc4};});throw Rs[_0x5aa606(0x723)]([..._0x587d5b]),new m(..._0x587d5b);}return await _0x204419(_0x3fff7b,_0x1ec674);}async[a0_0x37fa70(0x728)](_0x3c1e0a){const _0x17ebf7=a0_0x37fa70;let {request:_0x5d1b32,ClassRef:_0x1673b5,schema:_0x409322,execute:_0x576d25}=_0x3c1e0a,_0x38aba6=_0x5d1b32[_0x17ebf7(0x22a)];if(!_0x38aba6?.[_0x17ebf7(0x4d4)])throw new m('The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body',_0x17ebf7(0x1b9));let _0x4dd080=_0x5d1b32[_0x17ebf7(0x513)],_0x67e439=_0x5d1b32['body'],_0x2e58d5=new _0x1673b5();Object[_0x17ebf7(0x4f8)](_0x67e439,_0x38aba6),Object[_0x17ebf7(0x4f8)](_0x2e58d5,_0x67e439);let _0x2150ef=(0x0,ut[_0x17ebf7(0x207)])(_0x2e58d5,_0x409322);if(!_0x2150ef[_0x17ebf7(0x300)]){let _0xbc2f5b=_0x2150ef[_0x17ebf7(0x6ca)][_0x17ebf7(0x3c4)](({property:_0x29b41b,stack:_0x427ffd,schema:_0x463181})=>{const _0x58dbef=_0x17ebf7;let _0x34580f;return _0x463181[_0x58dbef(0x48c)]?_0x34580f=_0x463181[_0x58dbef(0x48c)]:_0x34580f=_0x427ffd[_0x58dbef(0x2e9)](_0x58dbef(0x709),''),{'property':_0x29b41b[_0x58dbef(0x2e9)](_0x58dbef(0x709),''),'message':_0x34580f};});throw Rs[_0x17ebf7(0x723)]([..._0xbc2f5b]),new m(..._0xbc2f5b);}return await _0x576d25(_0x4dd080,_0x2e58d5);}},C=class{},zc=new $(a0_0x37fa70(0x139)),dt=class extends W{constructor(..._0x59e7c0){const _0x1813c3=a0_0x37fa70;super(),this[_0x1813c3(0x620)]=(0x0,mi['Router'])(),this[_0x1813c3(0x620)][_0x1813c3(0x3a2)](this['routerPath'](_0x1813c3(0x69f)),..._0x59e7c0,async(_0x5b446c,_0xb714c4)=>{const _0x1dbfb0=_0x1813c3;let _0x44d6ef=await this[_0x1dbfb0(0x4a8)]({'request':_0x5b446c,'schema':oi,'ClassRef':Ze,'execute':(_0x3e9117,_0x4b72af)=>k[_0x1dbfb0(0x69f)](_0x3e9117,_0x4b72af)});return _0xb714c4[_0x1dbfb0(0x4c1)](0xc9)[_0x1dbfb0(0x185)](_0x44d6ef);})[_0x1813c3(0x3a2)](this['routerPath'](_0x1813c3(0x430)),..._0x59e7c0,async(_0x57eaed,_0x453d46)=>{const _0x4728b7=_0x1813c3;let _0x139fe8=await this[_0x4728b7(0x4a8)]({'request':_0x57eaed,'schema':Ka,'ClassRef':et,'execute':(_0x3197d5,_0x4e8ff9)=>k[_0x4728b7(0x3c5)](_0x3197d5,_0x4e8ff9)});return _0x453d46[_0x4728b7(0x4c1)](0xc9)[_0x4728b7(0x185)](_0x139fe8);})['post'](this[_0x1813c3(0x4f5)](_0x1813c3(0x5b1)),..._0x59e7c0,async(_0x2726f2,_0x2870cf)=>{const _0x51108e=_0x1813c3;let _0x4d77a3=await this[_0x51108e(0x4a8)]({'request':_0x2726f2,'schema':N,'ClassRef':C,'execute':(_0x5d9655,_0x593f38)=>k[_0x51108e(0x5b1)](_0x5d9655,_0x593f38)});return _0x2870cf[_0x51108e(0x4c1)](0xc9)['json'](_0x4d77a3);})[_0x1813c3(0x38e)](this[_0x1813c3(0x4f5)](_0x1813c3(0x271)),..._0x59e7c0,async(_0x1a917d,_0x37d83f)=>{const _0x5e2320=_0x1813c3;let _0x182717=await this[_0x5e2320(0x4a8)]({'request':_0x1a917d,'schema':Qa,'ClassRef':at,'execute':(_0x4220ed,_0x5de019)=>k[_0x5e2320(0x1a1)](_0x4220ed,_0x5de019)});return _0x37d83f[_0x5e2320(0x4c1)](0xc9)[_0x5e2320(0x185)](_0x182717);})['put'](this[_0x1813c3(0x4f5)]('archiveChat'),..._0x59e7c0,async(_0x56f570,_0x3bf2e5)=>{const _0x428434=_0x1813c3;let _0x5b5418=await this[_0x428434(0x4a8)]({'request':_0x56f570,'schema':Xa,'ClassRef':it,'execute':(_0x8e843f,_0x1033fb)=>k[_0x428434(0x278)](_0x8e843f,_0x1033fb)});return _0x3bf2e5['status'](0xc9)[_0x428434(0x185)](_0x5b5418);})['delete'](this[_0x1813c3(0x4f5)](_0x1813c3(0x568)),..._0x59e7c0,async(_0x293774,_0x452910)=>{let _0x8553b7=await this['dataValidate']({'request':_0x293774,'schema':Za,'ClassRef':rt,'execute':(_0x36909e,_0x57dfea)=>k['deleteMessage'](_0x36909e,_0x57dfea)});return _0x452910['status'](0xc9)['json'](_0x8553b7);})[_0x1813c3(0x3a2)](this[_0x1813c3(0x4f5)](_0x1813c3(0x5e8)),..._0x59e7c0,async(_0x2d959f,_0x60064e)=>{const _0x398711=_0x1813c3;let _0x5683e6=await this[_0x398711(0x4a8)]({'request':_0x2d959f,'schema':xe,'ClassRef':_e,'execute':(_0x360c75,_0x3829e9)=>k[_0x398711(0x34c)](_0x360c75,_0x3829e9)});return _0x60064e[_0x398711(0x4c1)](0xc8)[_0x398711(0x185)](_0x5683e6);})[_0x1813c3(0x3a2)](this['routerPath'](_0x1813c3(0x7ba)),..._0x59e7c0,async(_0xd5aa95,_0x4b5e52)=>{const _0x53242f=_0x1813c3;let _0x4dddf7=await this[_0x53242f(0x4a8)]({'request':_0xd5aa95,'schema':ai,'ClassRef':_e,'execute':(_0x96acb9,_0x202b48)=>k[_0x53242f(0x7ba)](_0x96acb9,_0x202b48)});return _0x4b5e52[_0x53242f(0x4c1)](0xc8)[_0x53242f(0x185)](_0x4dddf7);})[_0x1813c3(0x3a2)](this[_0x1813c3(0x4f5)](_0x1813c3(0x735)),..._0x59e7c0,async(_0x531368,_0x573303)=>{const _0x5e5bad=_0x1813c3;let _0x85a1e5=await this[_0x5e5bad(0x4a8)]({'request':_0x531368,'schema':ei,'ClassRef':ct,'execute':(_0x10abc7,_0x1adc44)=>k[_0x5e5bad(0x722)](_0x10abc7,_0x1adc44)});return _0x573303['status'](0xc8)[_0x5e5bad(0x185)](_0x85a1e5);})[_0x1813c3(0x3a2)](this[_0x1813c3(0x4f5)](_0x1813c3(0x449)),..._0x59e7c0,async(_0x3e9ae7,_0x45b5da)=>{const _0x251137=_0x1813c3;let _0x3c60fc=await this[_0x251137(0x4a8)]({'request':_0x3e9ae7,'schema':null,'ClassRef':Object,'execute':(_0x3f74d0,_0x2873c8)=>k[_0x251137(0x449)](_0x3f74d0,_0x2873c8)});return _0x45b5da[_0x251137(0x4c1)](0xc9)['json'](_0x3c60fc);})[_0x1813c3(0x3a2)](this['routerPath']('findMessages'),..._0x59e7c0,async(_0x48b633,_0x31302d)=>{const _0x4e2800=_0x1813c3;let _0x14ae33=await this[_0x4e2800(0x4a8)]({'request':_0x48b633,'schema':ii,'ClassRef':Ye,'execute':(_0x258e97,_0x4b3e13)=>k['fetchMessages'](_0x258e97,_0x4b3e13)});return _0x31302d[_0x4e2800(0x4c1)](0xc8)[_0x4e2800(0x185)](_0x14ae33);})[_0x1813c3(0x7b6)](this['routerPath']('findChats'),..._0x59e7c0,async(_0x556fa5,_0x202b13)=>{const _0x5915ca=_0x1813c3;let _0x285be0=await this[_0x5915ca(0x4a8)]({'request':_0x556fa5,'schema':null,'ClassRef':C,'execute':_0x499842=>k[_0x5915ca(0x41a)](_0x499842)});return _0x202b13[_0x5915ca(0x4c1)](0xc8)[_0x5915ca(0x185)](_0x285be0);})[_0x1813c3(0x7b6)](this['routerPath'](_0x1813c3(0x667)),..._0x59e7c0,async(_0x3ea222,_0x566979)=>{const _0x249973=_0x1813c3;let _0xdde102=await this[_0x249973(0x4a8)]({'request':_0x3ea222,'schema':null,'ClassRef':C,'execute':_0x34f1be=>k[_0x249973(0x3da)](_0x34f1be)});return _0x566979[_0x249973(0x4c1)](0xc8)['json'](_0xdde102);})[_0x1813c3(0x38e)](this[_0x1813c3(0x4f5)](_0x1813c3(0x71a)),..._0x59e7c0,async(_0x4381c0,_0x110f6c)=>{const _0x5bc4b3=_0x1813c3;let _0x8705bc=await this[_0x5bc4b3(0x4a8)]({'request':_0x4381c0,'schema':null,'ClassRef':Array,'execute':(_0x565503,_0x38a40a)=>k[_0x5bc4b3(0x71a)](_0x565503,_0x38a40a)});return _0x110f6c[_0x5bc4b3(0x4c1)](0xc8)[_0x5bc4b3(0x185)](_0x8705bc);})[_0x1813c3(0x7b6)](this['routerPath'](_0x1813c3(0x3b3)),..._0x59e7c0,async(_0x26e9f9,_0x32f802)=>{const _0xa31d5b=_0x1813c3;let _0x151488=await this['dataValidate']({'request':_0x26e9f9,'schema':null,'ClassRef':C,'execute':_0x197fe0=>k[_0xa31d5b(0x3b3)](_0x197fe0)});return _0x32f802[_0xa31d5b(0x4c1)](0xc8)[_0xa31d5b(0x185)](_0x151488);})['put'](this[_0x1813c3(0x4f5)](_0x1813c3(0x445)),..._0x59e7c0,async(_0x5dbd08,_0x2ac581)=>{const _0x417911=_0x1813c3;let _0x2e585d=await this['dataValidate']({'request':_0x5dbd08,'schema':Ya,'ClassRef':ot,'execute':(_0x4cf4af,_0x2f5fe9)=>k[_0x417911(0x445)](_0x4cf4af,_0x2f5fe9)});return _0x2ac581[_0x417911(0x4c1)](0xc9)['json'](_0x2e585d);})[_0x1813c3(0x3a2)](this[_0x1813c3(0x4f5)](_0x1813c3(0x460)),..._0x59e7c0,async(_0x41e290,_0x54e925)=>{const _0xf95f50=_0x1813c3;let _0x3d65ca=await this['dataValidate']({'request':_0x41e290,'schema':xe,'ClassRef':ve,'execute':(_0x560e14,_0x173c60)=>k['fetchBusinessProfile'](_0x560e14,_0x173c60)});return _0x54e925[_0xf95f50(0x4c1)](0xc8)[_0xf95f50(0x185)](_0x3d65ca);})[_0x1813c3(0x3a2)](this[_0x1813c3(0x4f5)]('updateProfileName'),..._0x59e7c0,async(_0x3bb2ee,_0x4c9d9b)=>{const _0x35ac22=_0x1813c3;let _0x259c47=await this[_0x35ac22(0x4a8)]({'request':_0x3bb2ee,'schema':ti,'ClassRef':tt,'execute':(_0x37559b,_0x4e34e5)=>k[_0x35ac22(0x490)](_0x37559b,_0x4e34e5)});return _0x4c9d9b[_0x35ac22(0x4c1)](0xc8)[_0x35ac22(0x185)](_0x259c47);})['post'](this[_0x1813c3(0x4f5)]('updateProfileStatus'),..._0x59e7c0,async(_0x5b8076,_0x18908d)=>{let _0x319f24=await this['dataValidate']({'request':_0x5b8076,'schema':si,'ClassRef':st,'execute':(_0x50d8f5,_0x527558)=>k['updateProfileStatus'](_0x50d8f5,_0x527558)});return _0x18908d['status'](0xc8)['json'](_0x319f24);})[_0x1813c3(0x38e)](this[_0x1813c3(0x4f5)]('updateProfilePicture'),..._0x59e7c0,async(_0x191972,_0x62e3cd)=>{const _0xd47835=_0x1813c3;let _0x2404d8=await this[_0xd47835(0x4a8)]({'request':_0x191972,'schema':xe,'ClassRef':ve,'execute':(_0x43a998,_0x1e1779)=>k[_0xd47835(0x52d)](_0x43a998,_0x1e1779)});return _0x62e3cd[_0xd47835(0x4c1)](0xc8)['json'](_0x2404d8);})[_0x1813c3(0x6ad)](this[_0x1813c3(0x4f5)]('removeProfilePicture'),..._0x59e7c0,async(_0x3d4cb0,_0x314e24)=>{const _0x5c2d4e=_0x1813c3;let _0x69a930=await this[_0x5c2d4e(0x4a8)]({'request':_0x3d4cb0,'schema':xe,'ClassRef':ve,'execute':(_0x2515ae,_0x578e07)=>k[_0x5c2d4e(0xf2)](_0x2515ae,_0x578e07)});return _0x314e24[_0x5c2d4e(0x4c1)](0xc8)[_0x5c2d4e(0x185)](_0x69a930);});}},fi=require(a0_0x37fa70(0x149)),pt=class{},ht=class{},gt=class{},mt=class{},ft=class{},wt=class{},ie=class{},Pe=class{},yt=class extends ie{},bt=class extends ie{},St=class extends W{constructor(..._0x39ac0b){const _0x9a0e48=a0_0x37fa70;super(),this[_0x9a0e48(0x620)]=(0x0,fi['Router'])(),this[_0x9a0e48(0x620)][_0x9a0e48(0x3a2)](this[_0x9a0e48(0x4f5)](_0x9a0e48(0x31e)),..._0x39ac0b,async(_0x14a454,_0x2ad74b)=>{const _0x39117a=_0x9a0e48;let _0x459447=await this[_0x39117a(0x4a8)]({'request':_0x14a454,'schema':ri,'ClassRef':pt,'execute':(_0x10e9e0,_0x3c1b8b)=>G[_0x39117a(0x7f)](_0x10e9e0,_0x3c1b8b)});_0x2ad74b[_0x39117a(0x4c1)](0xc9)[_0x39117a(0x185)](_0x459447);})[_0x9a0e48(0x38e)](this[_0x9a0e48(0x4f5)]('updateGroupPicture'),..._0x39ac0b,async(_0x2e895b,_0x5ac599)=>{const _0x561115=_0x9a0e48;let _0x51cf43=await this[_0x561115(0x3b9)]({'request':_0x2e895b,'schema':li,'ClassRef':ht,'execute':(_0x420387,_0x11eafe)=>G[_0x561115(0x5aa)](_0x420387,_0x11eafe)});_0x5ac599[_0x561115(0x4c1)](0xc9)[_0x561115(0x185)](_0x51cf43);})['put'](this['routerPath'](_0x9a0e48(0x4d5)),..._0x39ac0b,async(_0x41e266,_0x2f6e64)=>{const _0x3f89ca=_0x9a0e48;let _0x222638=await this[_0x3f89ca(0x3b9)]({'request':_0x41e266,'schema':ui,'ClassRef':gt,'execute':(_0x5a1446,_0x3082b9)=>G[_0x3f89ca(0x4d5)](_0x5a1446,_0x3082b9)});_0x2f6e64['status'](0xc9)['json'](_0x222638);})['put'](this[_0x9a0e48(0x4f5)]('groupName'),..._0x39ac0b,async(_0x4c2846,_0xefb7f)=>{const _0xb7ad67=_0x9a0e48;let _0x46b557=await this[_0xb7ad67(0x3b9)]({'request':_0x4c2846,'schema':di,'ClassRef':mt,'execute':(_0x34703b,_0xa8aff8)=>G['groupName'](_0x34703b,_0xa8aff8)});_0xefb7f['status'](0xc9)[_0xb7ad67(0x185)](_0x46b557);})[_0x9a0e48(0x38e)](this['routerPath']('groupBetterSetting'),..._0x39ac0b,async(_0xf51b70,_0x2ad037)=>{const _0x3c7d64=_0x9a0e48;let _0x1aa6ce=await this[_0x3c7d64(0x3b9)]({'request':_0xf51b70,'schema':hi,'ClassRef':wt,'execute':(_0x2bee5b,_0x254321)=>G['groupBetterSetting'](_0x2bee5b,_0x254321)});_0x2ad037['status'](0xc9)[_0x3c7d64(0x185)](_0x1aa6ce);})[_0x9a0e48(0x38e)](this[_0x9a0e48(0x4f5)]('groupSetting'),..._0x39ac0b,async(_0x53627e,_0x504dd6)=>{const _0x53a0d4=_0x9a0e48;let _0x2d91dc=await this[_0x53a0d4(0x3b9)]({'request':_0x53627e,'schema':pi,'ClassRef':ft,'execute':(_0x47786d,_0x129001)=>G[_0x53a0d4(0x214)](_0x47786d,_0x129001)});_0x504dd6[_0x53a0d4(0x4c1)](0xc9)[_0x53a0d4(0x185)](_0x2d91dc);})[_0x9a0e48(0x38e)](this['routerPath'](_0x9a0e48(0x6a7)),..._0x39ac0b,async(_0x217432,_0x2cd1c2)=>{const _0x4992ad=_0x9a0e48;let _0x2abd00=await this['groupValidate']({'request':_0x217432,'schema':ci,'ClassRef':bt,'execute':(_0x25a15b,_0x5bbfb7)=>G[_0x4992ad(0x6a7)](_0x25a15b,_0x5bbfb7)});_0x2cd1c2[_0x4992ad(0x4c1)](0xc9)[_0x4992ad(0x185)](_0x2abd00);})[_0x9a0e48(0x7b6)](this['routerPath'](_0x9a0e48(0x1fb)),..._0x39ac0b,async(_0x3a5135,_0x2e6de8)=>{const _0x36b115=_0x9a0e48;let _0x36d2d3=await this[_0x36b115(0x3b9)]({'request':_0x3a5135,'schema':De,'ClassRef':ie,'execute':(_0x3798e2,_0x295edf)=>G[_0x36b115(0x385)](_0x3798e2,_0x295edf)});_0x2e6de8[_0x36b115(0x4c1)](0xc8)[_0x36b115(0x185)](_0x36d2d3);})[_0x9a0e48(0x7b6)](this['routerPath'](_0x9a0e48(0x511)),..._0x39ac0b,async(_0x1ba71d,_0x45811f)=>{const _0x330d9d=_0x9a0e48;let _0x386776=await this[_0x330d9d(0x4a8)]({'request':_0x1ba71d,'schema':N,'ClassRef':C,'execute':_0x1b1c22=>G[_0x330d9d(0x511)](_0x1b1c22)});_0x45811f[_0x330d9d(0x4c1)](0xc8)['json'](_0x386776);})['get'](this[_0x9a0e48(0x4f5)](_0x9a0e48(0x6a0)),..._0x39ac0b,async(_0x553c58,_0x112078)=>{const _0x436275=_0x9a0e48;let _0x3868fd=await this[_0x436275(0x3b9)]({'request':_0x553c58,'schema':De,'ClassRef':ie,'execute':(_0x2ae6a3,_0x3ca75b)=>G[_0x436275(0x687)](_0x2ae6a3,_0x3ca75b)});_0x112078[_0x436275(0x4c1)](0xc8)['json'](_0x3868fd);})[_0x9a0e48(0x7b6)](this[_0x9a0e48(0x4f5)](_0x9a0e48(0x4d4)),..._0x39ac0b,async(_0x576d78,_0x48ec73)=>{const _0x5aab2e=_0x9a0e48;let _0x24f349=await this[_0x5aab2e(0x3b9)]({'request':_0x576d78,'schema':De,'ClassRef':ie,'execute':(_0x5e826f,_0x9074b5)=>G[_0x5aab2e(0x4d4)](_0x5e826f,_0x9074b5)});_0x48ec73[_0x5aab2e(0x4c1)](0xc8)[_0x5aab2e(0x185)](_0x24f349);})[_0x9a0e48(0x3a2)](this[_0x9a0e48(0x4f5)]('inviteCodeDetails'),..._0x39ac0b,async(_0xe27246,_0xe71eff)=>{const _0x9ef736=_0x9a0e48;let _0x2b9161=await this['joinGroupValidate']({'request':_0xe27246,'schema':$s,'ClassRef':Pe,'execute':(_0x5866e7,_0x25d5dd)=>G[_0x9ef736(0x6fd)](_0x5866e7,_0x25d5dd)});_0xe71eff['status'](0xc9)[_0x9ef736(0x185)](_0x2b9161);})[_0x9a0e48(0x38e)](this[_0x9a0e48(0x4f5)]('joinGroup'),..._0x39ac0b,async(_0x4e1e1d,_0x2b645c)=>{const _0x4be1bd=_0x9a0e48;let _0x4ad1b4=await this[_0x4be1bd(0x728)]({'request':_0x4e1e1d,'schema':$s,'ClassRef':Pe,'execute':(_0x552053,_0x3ea701)=>G['joinGroup'](_0x552053,_0x3ea701)});_0x2b645c[_0x4be1bd(0x4c1)](0xc9)['json'](_0x4ad1b4);})[_0x9a0e48(0x38e)](this[_0x9a0e48(0x4f5)]('revokeInviteCode'),..._0x39ac0b,async(_0x7ea89,_0x246f49)=>{const _0x89d184=_0x9a0e48;let _0x25b459=await this[_0x89d184(0x3b9)]({'request':_0x7ea89,'schema':De,'ClassRef':ie,'execute':(_0x26bea6,_0x22b3f0)=>G['revokeInviteCode'](_0x26bea6,_0x22b3f0)});_0x246f49[_0x89d184(0x4c1)](0xc9)[_0x89d184(0x185)](_0x25b459);})['put'](this['routerPath']('updateParticipant'),..._0x39ac0b,async(_0x55c734,_0x3a57b6)=>{const _0x1901ba=_0x9a0e48;let _0x4db9a4=await this[_0x1901ba(0x3b9)]({'request':_0x55c734,'schema':ni,'ClassRef':yt,'execute':(_0x34059d,_0x3aeea5)=>G[_0x1901ba(0x366)](_0x34059d,_0x3aeea5)});_0x3a57b6['status'](0xc9)[_0x1901ba(0x185)](_0x4db9a4);})[_0x9a0e48(0x6ad)](this[_0x9a0e48(0x4f5)]('leaveGroup'),..._0x39ac0b,async(_0x150f26,_0x4899b3)=>{const _0x3bd2a3=_0x9a0e48;let _0x1b2a00=await this['groupValidate']({'request':_0x150f26,'schema':{},'ClassRef':ie,'execute':(_0x4eed49,_0xe29cfc)=>G[_0x3bd2a3(0x28c)](_0x4eed49,_0xe29cfc)});_0x4899b3[_0x3bd2a3(0x4c1)](0xc8)[_0x3bd2a3(0x185)](_0x1b2a00);});}},wi=require(a0_0x37fa70(0x149)),Mt=class extends W{constructor(_0x514f9e,..._0x3a914d){const _0x2b6c9b=a0_0x37fa70;super(),this[_0x2b6c9b(0x763)]=_0x514f9e,this[_0x2b6c9b(0x620)]=(0x0,wi['Router'])();let _0x3f4c35=_0x514f9e[_0x2b6c9b(0x7b6)](_0x2b6c9b(0x725));this[_0x2b6c9b(0x620)][_0x2b6c9b(0x3a2)](_0x2b6c9b(0x750),..._0x3a914d,async(_0x56a7d,_0x42c19f)=>{const _0x59ce83=_0x2b6c9b;let {instanceName:_0x47914b,apikey:_0x4cbcd9,number:_0x13e29c}=_0x56a7d[_0x59ce83(0x22a)],_0x5f24ae=await he['createInstance']({'instanceName':_0x47914b,'apikey':_0x4cbcd9,'number':_0x13e29c});return _0x42c19f[_0x59ce83(0x4c1)](0xc9)['json'](_0x5f24ae);})['put'](this[_0x2b6c9b(0x4f5)]('restart'),..._0x3a914d,async(_0xabfca0,_0x3f6e02)=>{const _0x55fd9d=_0x2b6c9b;let _0x11c3d1=await this[_0x55fd9d(0x4a8)]({'request':_0xabfca0,'schema':N,'ClassRef':C,'execute':_0x41eb96=>he[_0x55fd9d(0x346)](_0x41eb96)});return _0x3f6e02[_0x55fd9d(0x4c1)](0xc8)['json'](_0x11c3d1);})[_0x2b6c9b(0x7b6)](this['routerPath']('connect'),..._0x3a914d,async(_0x22d63b,_0x460e98)=>{const _0x1e4c7f=_0x2b6c9b;let _0x5d9eb0=await this[_0x1e4c7f(0x4a8)]({'request':_0x22d63b,'schema':N,'ClassRef':C,'execute':_0xeb913b=>he['connectToWhatsappController'](_0xeb913b)});return _0x460e98['status'](0xc8)[_0x1e4c7f(0x185)](_0x5d9eb0);})[_0x2b6c9b(0x7b6)](this[_0x2b6c9b(0x4f5)](_0x2b6c9b(0x170)),..._0x3a914d,async(_0x1eda6c,_0x487cfe)=>{const _0x48461a=_0x2b6c9b;let _0x35c5e7=await this[_0x48461a(0x4a8)]({'request':_0x1eda6c,'schema':N,'ClassRef':C,'execute':_0x17488f=>he['connectionState'](_0x17488f)});return _0x487cfe[_0x48461a(0x4c1)](0xc8)['json'](_0x35c5e7);})[_0x2b6c9b(0x7b6)](this[_0x2b6c9b(0x4f5)](_0x2b6c9b(0x427),!0x1),..._0x3a914d,async(_0x45bd73,_0x29d993)=>{const _0x56077c=_0x2b6c9b;let _0x364c4f=await this[_0x56077c(0x4a8)]({'request':_0x45bd73,'schema':null,'ClassRef':C,'execute':_0x5a6ba8=>he['fetchInstances'](_0x5a6ba8)});return _0x29d993[_0x56077c(0x4c1)](0xc8)[_0x56077c(0x185)](_0x364c4f);})[_0x2b6c9b(0x6ad)](this[_0x2b6c9b(0x4f5)](_0x2b6c9b(0x124)),..._0x3a914d,async(_0xb93ea1,_0x89714a)=>{const _0x2b772c=_0x2b6c9b;let _0x57abc5=await this['dataValidate']({'request':_0xb93ea1,'schema':N,'ClassRef':C,'execute':_0x367b97=>he[_0x2b772c(0x124)](_0x367b97)});return _0x89714a[_0x2b772c(0x4c1)](0xc8)['json'](_0x57abc5);})[_0x2b6c9b(0x6ad)](this['routerPath'](_0x2b6c9b(0x6ad)),..._0x3a914d,async(_0x5aadfb,_0x2a3944)=>{const _0x12aaa7=_0x2b6c9b;let _0x33d05f=await this[_0x12aaa7(0x4a8)]({'request':_0x5aadfb,'schema':N,'ClassRef':C,'execute':_0x30dda1=>he[_0x12aaa7(0x428)](_0x30dda1)});return _0x2a3944[_0x12aaa7(0x4c1)](0xc8)[_0x12aaa7(0x185)](_0x33d05f);});}},yi=require('express'),As=class{},K=class extends As{},Ct=class extends K{},Et=class extends K{},vt=class extends K{},Nt=class extends K{},ke=class extends K{},$t=class extends K{},Rt=class extends K{},At=class extends K{},It=class extends K{},Tt=class extends K{},_t=class{},Ot=class extends W{constructor(..._0x765c0e){const _0x2a5b38=a0_0x37fa70;super(),this[_0x2a5b38(0x620)]=(0x0,yi[_0x2a5b38(0x2ca)])(),this[_0x2a5b38(0x620)]['post'](this['routerPath'](_0x2a5b38(0x11d)),..._0x765c0e,async(_0x31f1cf,_0x12ea8d)=>{const _0x18ed48=_0x2a5b38;let _0x235d04=await this[_0x18ed48(0x4a8)]({'request':_0x31f1cf,'schema':ka,'ClassRef':Ct,'execute':(_0x391036,_0x37d0ae)=>H[_0x18ed48(0x11d)](_0x391036,_0x37d0ae)});return _0x12ea8d[_0x18ed48(0x4c1)](0xc9)[_0x18ed48(0x185)](_0x235d04);})[_0x2a5b38(0x3a2)](this['routerPath'](_0x2a5b38(0x481)),..._0x765c0e,async(_0x262907,_0x109ab5)=>{const _0x263927=_0x2a5b38;let _0x5e1bdf=await this[_0x263927(0x4a8)]({'request':_0x262907,'schema':ja,'ClassRef':ke,'execute':(_0x4d84bd,_0x484ca7)=>H[_0x263927(0x481)](_0x4d84bd,_0x484ca7)});return _0x109ab5[_0x263927(0x4c1)](0xc9)['json'](_0x5e1bdf);})[_0x2a5b38(0x3a2)](this[_0x2a5b38(0x4f5)](_0x2a5b38(0x585)),..._0x765c0e,async(_0x565811,_0x186ccc)=>{const _0x2f21c5=_0x2a5b38;let _0x32fd02=await this[_0x2f21c5(0x4a8)]({'request':_0x565811,'schema':Va,'ClassRef':Nt,'execute':(_0x50e758,_0x5556a2)=>H[_0x2f21c5(0x585)](_0x50e758,_0x5556a2)});return _0x186ccc[_0x2f21c5(0x4c1)](0xc9)['json'](_0x32fd02);})[_0x2a5b38(0x3a2)](this[_0x2a5b38(0x4f5)](_0x2a5b38(0x6bf)),..._0x765c0e,async(_0x19e3d3,_0x3f993a)=>{const _0x3f4f13=_0x2a5b38;let _0x36d38f=await this[_0x3f4f13(0x4a8)]({'request':_0x19e3d3,'schema':Ja,'ClassRef':ke,'execute':(_0x2862d5,_0x3f811c)=>H[_0x3f4f13(0x6bf)](_0x2862d5,_0x3f811c)});return _0x3f993a['status'](0xc9)[_0x3f4f13(0x185)](_0x36d38f);})[_0x2a5b38(0x3a2)](this[_0x2a5b38(0x4f5)](_0x2a5b38(0x368)),..._0x765c0e,async(_0x579eb7,_0x2bf349)=>{const _0x40f51d=_0x2a5b38;let _0x2029f0=await this['dataValidate']({'request':_0x579eb7,'schema':Ga,'ClassRef':Rt,'execute':(_0x302b7c,_0x34b2eb)=>H[_0x40f51d(0x368)](_0x302b7c,_0x34b2eb)});return _0x2bf349[_0x40f51d(0x4c1)](0xc9)[_0x40f51d(0x185)](_0x2029f0);})[_0x2a5b38(0x3a2)](this['routerPath'](_0x2a5b38(0x669)),..._0x765c0e,async(_0x3b879c,_0x5ef9bb)=>{const _0xa6f159=_0x2a5b38;let _0x4269eb=await this[_0xa6f159(0x4a8)]({'request':_0x3b879c,'schema':Ba,'ClassRef':At,'execute':(_0x353b90,_0x39379c)=>H[_0xa6f159(0x669)](_0x353b90,_0x39379c)});return _0x5ef9bb[_0xa6f159(0x4c1)](0xc9)['json'](_0x4269eb);})[_0x2a5b38(0x3a2)](this[_0x2a5b38(0x4f5)]('sendList'),..._0x765c0e,async(_0x50fe76,_0x400c10)=>{const _0x35756a=_0x2a5b38;let _0x1b8f80=await this[_0x35756a(0x4a8)]({'request':_0x50fe76,'schema':Wa,'ClassRef':It,'execute':(_0x4382f9,_0x17d80e)=>H[_0x35756a(0x716)](_0x4382f9,_0x17d80e)});return _0x400c10['status'](0xc9)[_0x35756a(0x185)](_0x1b8f80);})[_0x2a5b38(0x3a2)](this[_0x2a5b38(0x4f5)](_0x2a5b38(0xd8)),..._0x765c0e,async(_0x1be288,_0x1aff34)=>{const _0x55903f=_0x2a5b38;let _0x3317a7=await this[_0x55903f(0x4a8)]({'request':_0x1be288,'schema':za,'ClassRef':Tt,'execute':(_0x2e1eb2,_0x2afaee)=>H[_0x55903f(0xd8)](_0x2e1eb2,_0x2afaee)});return _0x1aff34[_0x55903f(0x4c1)](0xc9)['json'](_0x3317a7);})['post'](this[_0x2a5b38(0x4f5)](_0x2a5b38(0x788)),..._0x765c0e,async(_0x46f723,_0x405b59)=>{const _0x318373=_0x2a5b38;let _0x1fd64a=await this[_0x318373(0x4a8)]({'request':_0x46f723,'schema':Ha,'ClassRef':_t,'execute':(_0x2ff941,_0x43bf35)=>H[_0x318373(0x788)](_0x2ff941,_0x43bf35)});return _0x405b59[_0x318373(0x4c1)](0xc9)['json'](_0x1fd64a);})[_0x2a5b38(0x3a2)](this[_0x2a5b38(0x4f5)](_0x2a5b38(0x54c)),..._0x765c0e,async(_0x121bd2,_0xaf772e)=>{const _0x2f959f=_0x2a5b38;let _0x1c0c65=await this[_0x2f959f(0x4a8)]({'request':_0x121bd2,'schema':qa,'ClassRef':vt,'execute':(_0x2c3a62,_0x19c278)=>H[_0x2f959f(0x54c)](_0x2c3a62,_0x19c278)});return _0xaf772e[_0x2f959f(0x4c1)](0xc9)[_0x2f959f(0x185)](_0x1c0c65);})[_0x2a5b38(0x3a2)](this['routerPath']('sendStatus'),..._0x765c0e,async(_0x1433c6,_0x29252e)=>{const _0x13350f=_0x2a5b38;let _0xdc2f4f=await this[_0x13350f(0x4a8)]({'request':_0x1433c6,'schema':Ua,'ClassRef':Et,'execute':(_0x2a52f5,_0x5a480b)=>H[_0x13350f(0x604)](_0x2a52f5,_0x5a480b)});return _0x29252e[_0x13350f(0x4c1)](0xc9)['json'](_0xdc2f4f);})[_0x2a5b38(0x3a2)](this['routerPath'](_0x2a5b38(0x12e)),..._0x765c0e,async(_0x1193dc,_0x238b92)=>{const _0x4fdf25=_0x2a5b38;let _0x1d7616=await this['dataValidate']({'request':_0x1193dc,'schema':La,'ClassRef':$t,'execute':(_0x309cc8,_0x273f7d)=>H[_0x4fdf25(0x12e)](_0x309cc8,_0x273f7d)});return _0x238b92[_0x4fdf25(0x4c1)](0xc9)[_0x4fdf25(0x185)](_0x1d7616);});}},bi=require('express'),xt=class{},Dt=class extends W{constructor(..._0x5d6205){const _0x4488fa=a0_0x37fa70;super(),this['router']=(0x0,bi['Router'])(),this[_0x4488fa(0x620)]['post'](this[_0x4488fa(0x4f5)](_0x4488fa(0x21d)),..._0x5d6205,async(_0x456ac8,_0x4d72df)=>{const _0x42d385=_0x4488fa;let _0x191540=await this[_0x42d385(0x4a8)]({'request':_0x456ac8,'schema':gi,'ClassRef':xt,'execute':(_0x4a13e6,_0x30e731)=>Is['createWebhook'](_0x4a13e6,_0x30e731)});_0x4d72df[_0x42d385(0x4c1)](0xc9)['json'](_0x191540);})['get'](this['routerPath'](_0x4488fa(0x3b4)),..._0x5d6205,async(_0x83aa67,_0x14cf29)=>{const _0x364724=_0x4488fa;let _0x2d1677=await this[_0x364724(0x4a8)]({'request':_0x83aa67,'schema':N,'ClassRef':C,'execute':_0x6910b6=>Is[_0x364724(0x73b)](_0x6910b6)});_0x14cf29['status'](0xc8)[_0x364724(0x185)](_0x2d1677);});}},Si=require(a0_0x37fa70(0x149)),y=new $('FlowRouter'),Pt=class extends W{constructor(..._0x45379b){const _0x3317be=a0_0x37fa70;super(),this[_0x3317be(0x620)]=(0x0,Si[_0x3317be(0x2ca)])(),this[_0x3317be(0x620)][_0x3317be(0x3a2)](this[_0x3317be(0x4f5)]('scheduleMessage'),..._0x45379b,async(_0x5a5c60,_0xe578ec)=>{const _0x198fde=_0x3317be;let _0x43727f=_0x5a5c60[_0x198fde(0x22a)];y['verbose'](_0x198fde(0x752)),y['verbose'](_0x198fde(0x50c)),y[_0x198fde(0x48f)](_0x5a5c60['body']);let _0x447b45=await this[_0x198fde(0x4a8)]({'request':_0x5a5c60,'schema':N,'ClassRef':C,'execute':_0x4ee5e7=>_['editScheduleMessage'](_0x4ee5e7,_0x43727f)});_0xe578ec[_0x198fde(0x4c1)](0xc8)[_0x198fde(0x185)](_0x447b45);})['get'](this[_0x3317be(0x4f5)](_0x3317be(0x2b4)),..._0x45379b,async(_0x54ca26,_0x1a8518)=>{const _0x16d01b=_0x3317be;let _0x3316f0=await this[_0x16d01b(0x4a8)]({'request':_0x54ca26,'schema':N,'ClassRef':C,'execute':_0x42ff53=>_[_0x16d01b(0x557)](_0x42ff53)});_0x1a8518['status'](0xc8)[_0x16d01b(0x185)](_0x3316f0);})[_0x3317be(0x6ad)](this['routerPath'](_0x3317be(0x793)),..._0x45379b,async(_0x44cb2e,_0x22856c)=>{const _0x124077=_0x3317be;y[_0x124077(0x48f)](_0x124077(0x82));let _0x147ba9=await this['dataValidate']({'request':_0x44cb2e,'schema':N,'ClassRef':C,'execute':_0x38346b=>_[_0x124077(0x793)](_0x38346b)});_0x22856c[_0x124077(0x4c1)](0xc8)[_0x124077(0x185)](_0x147ba9);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)]('startFlow'),..._0x45379b,async(_0x5f28ca,_0x4dd725)=>{const _0x5c4acd=_0x3317be;let _0xde7c56=_0x5f28ca['body'];y['verbose'](_0x5c4acd(0x282)),y['verbose'](_0x5c4acd(0x50c)),y[_0x5c4acd(0x48f)](_0x5f28ca[_0x5c4acd(0x22a)]);let _0x1ff331=await this[_0x5c4acd(0x4a8)]({'request':_0x5f28ca,'schema':N,'ClassRef':C,'execute':_0x28b6ae=>_[_0x5c4acd(0x2f9)](_0x28b6ae,_0xde7c56)});_0x4dd725[_0x5c4acd(0x4c1)](0xc8)['json'](_0x1ff331);})[_0x3317be(0x7b6)](this[_0x3317be(0x4f5)](_0x3317be(0x2b1)),..._0x45379b,async(_0x3d96d3,_0x245db2)=>{const _0x3f36d1=_0x3317be;y[_0x3f36d1(0x48f)]('request\x20received\x20in\x20getAutomateSystem');let _0x1dca9c=await this[_0x3f36d1(0x4a8)]({'request':_0x3d96d3,'schema':N,'ClassRef':C,'execute':_0xec3a9d=>_[_0x3f36d1(0x2b1)](_0xec3a9d)});_0x245db2[_0x3f36d1(0x4c1)](0xc8)[_0x3f36d1(0x185)](_0x1dca9c);})['get'](this[_0x3317be(0x4f5)](_0x3317be(0x347)),..._0x45379b,async(_0x1889ca,_0x5983aa)=>{const _0x3a9e4=_0x3317be;y['verbose']('request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem');let _0x37de3b=await this[_0x3a9e4(0x4a8)]({'request':_0x1889ca,'schema':N,'ClassRef':C,'execute':_0x5107f1=>_[_0x3a9e4(0x2b1)](_0x5107f1)});_0x5983aa[_0x3a9e4(0x4c1)](0xc8)[_0x3a9e4(0x185)](_0x37de3b);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)](_0x3317be(0x100)),..._0x45379b,async(_0x1e9eab,_0xa2ef13)=>{const _0x3cf58f=_0x3317be;let _0x37e22e=_0x1e9eab['body'];y[_0x3cf58f(0x48f)]('request\x20received\x20in\x20updateAgent'),y['verbose'](_0x3cf58f(0x50c)),y[_0x3cf58f(0x48f)](_0x1e9eab[_0x3cf58f(0x22a)]);let _0x5abd78=await this['dataValidate']({'request':_0x1e9eab,'schema':N,'ClassRef':C,'execute':_0x11c031=>_[_0x3cf58f(0x100)](_0x11c031,_0x37e22e)});_0xa2ef13[_0x3cf58f(0x4c1)](0xc8)[_0x3cf58f(0x185)](_0x5abd78);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)](_0x3317be(0x53d)),..._0x45379b,async(_0x403a9a,_0x418c6e)=>{const _0x37f672=_0x3317be;let _0x19520d=_0x403a9a[_0x37f672(0x22a)];y['verbose'](_0x37f672(0x254)),y[_0x37f672(0x48f)](_0x37f672(0x50c)),y[_0x37f672(0x48f)](_0x403a9a['body']);let _0x486ba6=await this[_0x37f672(0x4a8)]({'request':_0x403a9a,'schema':N,'ClassRef':C,'execute':_0x4d39bb=>_[_0x37f672(0x53d)](_0x4d39bb,_0x19520d)});_0x418c6e['status'](0xc8)[_0x37f672(0x185)](_0x486ba6);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)](_0x3317be(0x35a)),..._0x45379b,async(_0x74a413,_0x497a69)=>{const _0xa07650=_0x3317be;let _0x525c1f=_0x74a413[_0xa07650(0x22a)];y[_0xa07650(0x48f)](_0xa07650(0x13d)),y[_0xa07650(0x48f)](_0xa07650(0x50c)),y[_0xa07650(0x48f)](_0x74a413['body']);let _0x546963=await this[_0xa07650(0x4a8)]({'request':_0x74a413,'schema':N,'ClassRef':C,'execute':_0x4bafd3=>_[_0xa07650(0x35a)](_0x4bafd3,_0x525c1f)});_0x497a69[_0xa07650(0x4c1)](0xc8)[_0xa07650(0x185)](_0x546963);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)]('updateFlowConfig'),..._0x45379b,async(_0x500f50,_0x5798ef)=>{const _0x822501=_0x3317be;let _0x2fd7f6=_0x500f50['body'];y[_0x822501(0x48f)](_0x822501(0x33e)),y[_0x822501(0x48f)](_0x822501(0x50c)),y['verbose'](_0x500f50[_0x822501(0x22a)]);let _0x23ad8b=await this['dataValidate']({'request':_0x500f50,'schema':N,'ClassRef':C,'execute':_0x345f78=>_[_0x822501(0x49a)](_0x345f78,_0x2fd7f6)});_0x5798ef['status'](0xc8)[_0x822501(0x185)](_0x23ad8b);})['post'](this['routerPath'](_0x3317be(0x799)),..._0x45379b,async(_0x30a340,_0x2bd95a)=>{const _0x2a0216=_0x3317be;let _0xf54b6c=_0x30a340[_0x2a0216(0x22a)];y[_0x2a0216(0x48f)](_0x2a0216(0x64f)),y[_0x2a0216(0x48f)]('request\x20body:\x20'),y[_0x2a0216(0x48f)](_0x30a340[_0x2a0216(0x22a)]);let _0x455829=await this[_0x2a0216(0x4a8)]({'request':_0x30a340,'schema':N,'ClassRef':C,'execute':_0x349350=>_[_0x2a0216(0x799)](_0x349350,_0xf54b6c)});_0x2bd95a[_0x2a0216(0x4c1)](0xc8)[_0x2a0216(0x185)](_0x455829);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)](_0x3317be(0x48e)),..._0x45379b,async(_0x4fc15a,_0x503f9e)=>{const _0xdb2558=_0x3317be;let _0x359eda=_0x4fc15a['body'];y['verbose']('request\x20received\x20in\x20fetchConversation'),y['verbose'](_0xdb2558(0x50c)),y[_0xdb2558(0x48f)](_0x4fc15a['body']);let _0x6d2bd=await this['dataValidate']({'request':_0x4fc15a,'schema':N,'ClassRef':C,'execute':_0x405357=>_['fetchConversation'](_0x405357,_0x359eda)});_0x503f9e['status'](0xc8)[_0xdb2558(0x185)](_0x6d2bd);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)]('editConversation'),..._0x45379b,async(_0x4f1bc0,_0x2b89af)=>{const _0x49f45c=_0x3317be;let _0x515c51=_0x4f1bc0[_0x49f45c(0x22a)];y[_0x49f45c(0x48f)](_0x49f45c(0x469)),y[_0x49f45c(0x48f)](_0x49f45c(0x50c)),y[_0x49f45c(0x48f)](_0x4f1bc0[_0x49f45c(0x22a)]);let _0xb3baad=await this[_0x49f45c(0x4a8)]({'request':_0x4f1bc0,'schema':N,'ClassRef':C,'execute':_0x5b3989=>_['editConversation'](_0x5b3989,_0x515c51)});_0x2b89af[_0x49f45c(0x4c1)](0xc8)[_0x49f45c(0x185)](_0xb3baad);})[_0x3317be(0x6ad)](this[_0x3317be(0x4f5)](_0x3317be(0x651)),..._0x45379b,async(_0x44e3f9,_0x5a10d5)=>{const _0x3f8aa1=_0x3317be;let _0x3ce148=_0x44e3f9[_0x3f8aa1(0x22a)];y[_0x3f8aa1(0x48f)](_0x3f8aa1(0x101)),y[_0x3f8aa1(0x48f)]('request\x20body:\x20'),y[_0x3f8aa1(0x48f)](_0x44e3f9[_0x3f8aa1(0x22a)]);let _0x4eafd3=await this[_0x3f8aa1(0x4a8)]({'request':_0x44e3f9,'schema':N,'ClassRef':C,'execute':_0x1b647a=>_['deleteConversation'](_0x1b647a,_0x3ce148)});_0x5a10d5[_0x3f8aa1(0x4c1)](0xc8)[_0x3f8aa1(0x185)](_0x4eafd3);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)](_0x3317be(0x72a)),..._0x45379b,async(_0x174d31,_0x3b0325)=>{const _0x23376c=_0x3317be;let _0x2d694f=_0x174d31['body'],_0x310590=_0x174d31[_0x23376c(0x623)]['apikey'];y[_0x23376c(0x48f)](_0x23376c(0x231)),y['verbose'](_0x23376c(0x50c)),y[_0x23376c(0x48f)](_0x174d31[_0x23376c(0x22a)]);let _0x29e363=await this[_0x23376c(0x4a8)]({'request':_0x174d31,'schema':N,'ClassRef':C,'execute':_0x1c1d75=>_['createFlow'](_0x1c1d75,_0x2d694f,_0x310590)});_0x3b0325['status'](0xc8)[_0x23376c(0x185)](_0x29e363);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)](_0x3317be(0x7c8)),..._0x45379b,async(_0x2f0e97,_0x1d68af)=>{const _0x5b9adc=_0x3317be;let _0x169ed7=_0x2f0e97[_0x5b9adc(0x22a)],_0x33371c=_0x2f0e97[_0x5b9adc(0x623)]['apikey'];y[_0x5b9adc(0x48f)]('request\x20received\x20in\x20editFlow'),y[_0x5b9adc(0x48f)]('request\x20body:\x20'),y[_0x5b9adc(0x48f)](_0x2f0e97[_0x5b9adc(0x22a)]),delete _0x169ed7[_0x5b9adc(0x19a)],delete _0x169ed7[_0x5b9adc(0x6b8)],delete _0x169ed7[_0x5b9adc(0x5cb)],delete _0x169ed7[_0x5b9adc(0x3ea)];let _0x506b86=await this[_0x5b9adc(0x4a8)]({'request':_0x2f0e97,'schema':N,'ClassRef':C,'execute':_0x443ac1=>_[_0x5b9adc(0x776)](_0x443ac1,_0x169ed7,_0x33371c)});_0x1d68af[_0x5b9adc(0x4c1)](0xc8)[_0x5b9adc(0x185)](_0x506b86);})[_0x3317be(0x3a2)](this['routerPath'](_0x3317be(0x759)),..._0x45379b,async(_0x259f52,_0x184a67)=>{const _0x1e5bff=_0x3317be;let _0x1d94e3=_0x259f52[_0x1e5bff(0x22a)];y[_0x1e5bff(0x48f)](_0x1e5bff(0x767)),y[_0x1e5bff(0x48f)]('request\x20body:\x20'),y['verbose'](_0x259f52['body']);let _0x3fb5f7=await this[_0x1e5bff(0x4a8)]({'request':_0x259f52,'schema':N,'ClassRef':C,'execute':_0xf8fb0=>_[_0x1e5bff(0x1b7)](_0xf8fb0,_0x1d94e3)});_0x184a67[_0x1e5bff(0x4c1)](0xc8)[_0x1e5bff(0x185)](_0x3fb5f7);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)](_0x3317be(0x592)),..._0x45379b,async(_0xea2aac,_0x2ef6c0)=>{const _0x240a09=_0x3317be;let _0x5ee8a4=_0xea2aac[_0x240a09(0x22a)];y[_0x240a09(0x48f)]('request\x20received\x20in\x20editFlow'),y[_0x240a09(0x48f)](_0x240a09(0x50c)),y[_0x240a09(0x48f)](_0xea2aac[_0x240a09(0x22a)]);let _0xdd3d2b=await this[_0x240a09(0x4a8)]({'request':_0xea2aac,'schema':N,'ClassRef':C,'execute':_0x5b4cb2=>_['editFlowReply'](_0x5b4cb2,_0x5ee8a4)});_0x2ef6c0['status'](0xc8)[_0x240a09(0x185)](_0xdd3d2b);})['post'](this[_0x3317be(0x4f5)](_0x3317be(0x7cb)),..._0x45379b,async(_0x58190b,_0x501311)=>{const _0x40f6b3=_0x3317be;let _0x31f204=_0x58190b[_0x40f6b3(0x22a)];y[_0x40f6b3(0x48f)](_0x40f6b3(0x767)),y[_0x40f6b3(0x48f)](_0x40f6b3(0x50c)),y[_0x40f6b3(0x48f)](_0x58190b[_0x40f6b3(0x22a)]);let _0x408ca2=await this[_0x40f6b3(0x4a8)]({'request':_0x58190b,'schema':N,'ClassRef':C,'execute':_0x3c5313=>_[_0x40f6b3(0x65f)](_0x3c5313,_0x31f204)});_0x501311[_0x40f6b3(0x4c1)](0xc8)['json'](_0x408ca2);})[_0x3317be(0x3a2)](this['routerPath'](_0x3317be(0x597)),..._0x45379b,async(_0x4d7cb5,_0x5f089d)=>{const _0x39d552=_0x3317be;let _0x46835a=_0x4d7cb5[_0x39d552(0x22a)];y[_0x39d552(0x48f)](_0x39d552(0x495)),y['verbose'](_0x39d552(0x50c)),y['verbose'](_0x4d7cb5[_0x39d552(0x22a)]);let _0x6dcd99=await this[_0x39d552(0x4a8)]({'request':_0x4d7cb5,'schema':N,'ClassRef':C,'execute':_0x1d6180=>_['editFlowGroup'](_0x1d6180,_0x46835a)});_0x5f089d[_0x39d552(0x4c1)](0xc8)[_0x39d552(0x185)](_0x6dcd99);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)]('editflowcondition'),..._0x45379b,async(_0x913c2b,_0xee7d14)=>{const _0x31aaab=_0x3317be;let _0x48f7df=_0x913c2b[_0x31aaab(0x22a)];y[_0x31aaab(0x48f)](_0x31aaab(0x6e3)),y[_0x31aaab(0x48f)](_0x31aaab(0x50c)),y['verbose'](_0x913c2b[_0x31aaab(0x22a)]);let _0x7e0344=await this[_0x31aaab(0x4a8)]({'request':_0x913c2b,'schema':N,'ClassRef':C,'execute':_0x4c5bd6=>_[_0x31aaab(0x787)](_0x4c5bd6,_0x48f7df)});_0xee7d14[_0x31aaab(0x4c1)](0xc8)[_0x31aaab(0x185)](_0x7e0344);})['post'](this[_0x3317be(0x4f5)](_0x3317be(0x138)),..._0x45379b,async(_0x6bcd01,_0x27a5b2)=>{const _0x37c8db=_0x3317be;let _0x1d3348=_0x6bcd01[_0x37c8db(0x22a)];y['verbose'](_0x37c8db(0x3e3)),y[_0x37c8db(0x48f)](_0x37c8db(0x50c)),y[_0x37c8db(0x48f)](_0x6bcd01[_0x37c8db(0x22a)]);let _0x4c1b63=await this['dataValidate']({'request':_0x6bcd01,'schema':N,'ClassRef':C,'execute':_0x9bf09d=>_[_0x37c8db(0x1de)](_0x9bf09d,_0x1d3348)});_0x27a5b2[_0x37c8db(0x4c1)](0xc8)[_0x37c8db(0x185)](_0x4c1b63);})[_0x3317be(0x3a2)](this[_0x3317be(0x4f5)](_0x3317be(0x618)),..._0x45379b,async(_0x4e2070,_0x206a99)=>{const _0x244e55=_0x3317be;let _0xfab46=_0x4e2070[_0x244e55(0x22a)];y['verbose']('request\x20received\x20in\x20getFlow'),y[_0x244e55(0x48f)](_0x244e55(0x50c)),y[_0x244e55(0x48f)](_0x4e2070[_0x244e55(0x22a)]);let _0x2af61f=await this[_0x244e55(0x4a8)]({'request':_0x4e2070,'schema':N,'ClassRef':C,'execute':_0x539de4=>_[_0x244e55(0x465)](_0x539de4,_0xfab46)});_0x206a99[_0x244e55(0x4c1)](0xc8)[_0x244e55(0x185)](_0x2af61f);})[_0x3317be(0x6ad)](this[_0x3317be(0x4f5)](_0x3317be(0x6b0)),..._0x45379b,async(_0x322142,_0x1ff111)=>{const _0xb71711=_0x3317be;let _0x31422d=_0x322142[_0xb71711(0x22a)];y[_0xb71711(0x48f)](_0xb71711(0x692)),y[_0xb71711(0x48f)](_0xb71711(0x50c)),y[_0xb71711(0x48f)](_0x322142['body']);let _0x13d9aa=await this[_0xb71711(0x4a8)]({'request':_0x322142,'schema':N,'ClassRef':C,'execute':_0x20657e=>_[_0xb71711(0x6b2)](_0x20657e,_0x31422d)});_0x1ff111[_0xb71711(0x4c1)](0xc8)[_0xb71711(0x185)](_0x13d9aa);})[_0x3317be(0x7b6)](this['routerPath'](_0x3317be(0x118)),..._0x45379b,async(_0x5d7881,_0x31f323)=>{const _0x21b7c7=_0x3317be;y[_0x21b7c7(0x48f)]('request\x20received\x20in\x20allFlows');let _0x4ac5d8=await this[_0x21b7c7(0x4a8)]({'request':_0x5d7881,'schema':N,'ClassRef':C,'execute':_0x475012=>_[_0x21b7c7(0x2b7)](_0x475012)});_0x31f323['status'](0xc8)[_0x21b7c7(0x185)](_0x4ac5d8);});}},vi=I(require(a0_0x37fa70(0x43f))),oe={};function Mi(_0x131f70,_0x35be9e,_0x4aee32,_0x236f1f){oe[_0x131f70]||(oe[_0x131f70]={}),oe[_0x131f70][_0x35be9e]={'id':_0x35be9e,'response':_0x4aee32,'events':_0x236f1f};}function Ci(_0xf53b5f,_0x577fdb){!oe[_0xf53b5f]||!oe[_0xf53b5f][_0x577fdb]||delete oe[_0xf53b5f][_0x577fdb];}function q(_0x3e50f7,_0xb556f3,_0x4dd5b2){const _0x466641=a0_0x37fa70;if(!oe[_0x3e50f7])return;let _0x4ecf21=_0x466641(0x507)+JSON[_0x466641(0x718)](_0x4dd5b2)+'\x0a\x0a';Object['values'](oe[_0x3e50f7])['forEach'](_0x3acf3d=>{const _0x31ee8f=_0x466641;_0x3acf3d['events'][_0x31ee8f(0x14a)](_0xb556f3)&&_0x3acf3d[_0x31ee8f(0x6d9)]['write'](_0x4ecf21);});}function Ei(){const _0x12ecfd=a0_0x37fa70;let _0x40506d={};for(let _0x443d97 in oe)_0x40506d[_0x443d97]=Object[_0x12ecfd(0x13a)](oe[_0x443d97])[_0x12ecfd(0x3c4)](_0x173d59=>({'id':_0x173d59['id'],'events':_0x173d59['events']}));return _0x40506d;}var Ni=require(a0_0x37fa70(0x62c)),_s=require('mongoose'),Ts=class{},xo=new _s['Schema']({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),Do=new _s['Schema']({'_id':{'type':String,'default':'config'},'WebhookGlobal':{'type':xo},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Ne=A?.[a0_0x37fa70(0x762)](Ts[a0_0x37fa70(0x410)],Do,'All_Instances_Config'),Po=vi[a0_0x37fa70(0x259)][a0_0x37fa70(0x114)](__dirname,'downloads'),Fe=(0x0,kt[a0_0x37fa70(0x2ca)])(),ko=S[a0_0x37fa70(0x7b6)](a0_0x37fa70(0x725))['TYPE'],ce=[Ta,_a,Da[ko]];Fe['use'](a0_0x37fa70(0x411),kt[a0_0x37fa70(0x259)]['static'](Po))[a0_0x37fa70(0x7b6)](a0_0x37fa70(0x4e0),async(_0x525c14,_0x46f084)=>{const _0x73cea=a0_0x37fa70;console[_0x73cea(0xec)](_0x73cea(0xac));let _0x59afcc=_0x525c14[_0x73cea(0x513)]['instance'],_0x3a26e1=(_0x525c14[_0x73cea(0x6a6)]['events']||'')[_0x73cea(0x213)](','),_0x2e8680=(0x0,Ni['v4'])();console[_0x73cea(0xec)](_0x73cea(0x412),_0x59afcc),console[_0x73cea(0xec)](_0x73cea(0xe2),_0x3a26e1);let _0x102dd4=S[_0x73cea(0x7b6)](_0x73cea(0x725))[_0x73cea(0x2d7)],_0x2120d9=_0x525c14[_0x73cea(0x6a6)][_0x73cea(0x5f8)];if(console[_0x73cea(0xec)]('API\x20Key\x20from\x20Request:',_0x2120d9),_0x102dd4[_0x73cea(0x5af)]!==_0x2120d9){console[_0x73cea(0xec)](_0x73cea(0x6af));try{let _0x352a31=await be[_0x73cea(0x186)][_0x73cea(0x3b4)](_0x59afcc);if(console[_0x73cea(0xec)](_0x73cea(0xf3),_0x352a31),!_0x352a31||_0x352a31[_0x73cea(0x5f8)]!==_0x2120d9)return console[_0x73cea(0xec)](_0x73cea(0x199)),_0x46f084[_0x73cea(0x4c1)](0x191)[_0x73cea(0x536)](_0x73cea(0x569));}catch(_0xd88ae6){return console[_0x73cea(0x723)](_0x73cea(0x10d),_0xd88ae6),_0x46f084[_0x73cea(0x4c1)](0x191)[_0x73cea(0x536)](_0x73cea(0x8a));}}if(!await Oe(_0x59afcc))return _0x46f084[_0x73cea(0x4c1)](0x194)['send'](_0x73cea(0x4b3));_0x46f084[_0x73cea(0x562)]('Content-Type','text/event-stream'),_0x46f084[_0x73cea(0x562)](_0x73cea(0x524),_0x73cea(0x1ce)),_0x46f084[_0x73cea(0x562)](_0x73cea(0x588),_0x73cea(0x67a)),_0x46f084[_0x73cea(0x31b)]();let _0x3ffca2='data:\x20'+JSON[_0x73cea(0x718)]({'info':'Conexão\x20estabelecida'})+'\x0a\x0a';_0x46f084[_0x73cea(0x177)](_0x3ffca2),Mi(_0x59afcc,_0x2e8680,_0x46f084,_0x3a26e1),_0x525c14['on'](_0x73cea(0x380),()=>{const _0x526dc8=_0x73cea;console[_0x526dc8(0xec)](_0x526dc8(0x1bf)+_0x59afcc),Ci(_0x59afcc,_0x2e8680);});}),Fe[a0_0x37fa70(0x3a2)](a0_0x37fa70(0x2cb),async(_0x4b1ff9,_0x9d786)=>{const _0x24c5c7=a0_0x37fa70;console[_0x24c5c7(0xec)](_0x24c5c7(0xd1));let _0xf065ca=_0x4b1ff9[_0x24c5c7(0x513)][_0x24c5c7(0x753)],_0x41f23c=_0x4b1ff9[_0x24c5c7(0x513)][_0x24c5c7(0x475)],_0x4c45de=_0x4b1ff9[_0x24c5c7(0x6a6)][_0x24c5c7(0x6a8)]||'',_0x2e5958=_0x4b1ff9[_0x24c5c7(0x22a)];console[_0x24c5c7(0xec)](_0x24c5c7(0x2e8),_0xf065ca),console['log'](_0x24c5c7(0x3de),_0x41f23c),console[_0x24c5c7(0xec)]('RemoteJid:',_0x4c45de),console[_0x24c5c7(0xec)](_0x24c5c7(0xa3),_0x2e5958);try{if(!await Oe(_0xf065ca))return _0x9d786['status'](0x194)[_0x24c5c7(0x536)](_0x24c5c7(0x4b3));let _0x31f79a=await _[_0x24c5c7(0x303)](_0xf065ca,_0x41f23c,_0x4c45de,_0x2e5958);_0x9d786[_0x24c5c7(0x536)](_0x31f79a);}catch(_0x2709d9){console[_0x24c5c7(0x723)](_0x2709d9),_0x9d786['status'](0x1f4)['send']('Erro\x20ao\x20iniciar\x20o\x20fluxo.');}}),Fe[a0_0x37fa70(0x7b6)]('/clients-info',(_0x416969,_0x1a8e57)=>{const _0x138e38=a0_0x37fa70;let _0x2071f8=Ei();_0x1a8e57[_0x138e38(0x185)](_0x2071f8);})[a0_0x37fa70(0x7b6)]('/',(_0x3424b4,_0x4421fe)=>{const _0x149e98=a0_0x37fa70;let _0x218732=S[_0x149e98(0x7b6)](_0x149e98(0x556))[_0x149e98(0xe1)];if(_0x218732){let _0x2e2c22=encodeURIComponent(''+_0x218732);_0x4421fe['redirect'](_0x149e98(0x537)+_0x2e2c22);return;}let _0x563bfa=S[_0x149e98(0x7b6)](_0x149e98(0xe6)),_0x12647d=_0x563bfa&&_0x563bfa[_0x149e98(0x9f)][_0x149e98(0x213)]('/')[0x4];if(_0x12647d){let _0x9771a7=encodeURIComponent(_0x149e98(0x329)+_0x12647d);_0x4421fe[_0x149e98(0x3df)]('https://uazapi-plugin.bubbleapps.io/?url='+_0x9771a7);}else _0x4421fe[_0x149e98(0x3df)]('https://uazapi-plugin.bubbleapps.io/');})[a0_0x37fa70(0x38e)]('/exit',...ce,async(_0x2b7ffe,_0x525c20)=>{const _0x5973db=a0_0x37fa70;try{console[_0x5973db(0xec)](_0x5973db(0x3ae)),_0x525c20['status'](0xc8)[_0x5973db(0x185)]({'message':_0x5973db(0x75d)}),_0x525c20['on'](_0x5973db(0x3d4),()=>process[_0x5973db(0x396)](0x0));}catch(_0x3e91a1){console[_0x5973db(0x723)](_0x5973db(0x116),_0x3e91a1),_0x525c20['status'](0x1f4)[_0x5973db(0x185)]({'message':_0x5973db(0x362)});}})['put'](a0_0x37fa70(0x32f),...ce,async(_0x5ebe6b,_0x392d60)=>{const _0x36d0f8=a0_0x37fa70;try{let _0x5e70d9=_0x5ebe6b[_0x36d0f8(0x22a)];await Ne[_0x36d0f8(0x130)]({},{'$set':_0x5e70d9},{'upsert':!0x0});let _0x12f6cd=await Ne[_0x36d0f8(0x1e2)]();_0x392d60['json'](_0x12f6cd);}catch(_0x5f1472){_0x392d60[_0x36d0f8(0x4c1)](0x190)[_0x36d0f8(0x536)](_0x5f1472['message']);}})[a0_0x37fa70(0x7b6)](a0_0x37fa70(0x32f),...ce,async(_0x355109,_0x38ce32)=>{const _0x1bfe9b=a0_0x37fa70;try{let _0x5054c9=await Ne['findOne']();if(!_0x5054c9)return _0x38ce32[_0x1bfe9b(0x185)]({});_0x38ce32[_0x1bfe9b(0x185)](_0x5054c9);}catch(_0x3ced1a){_0x38ce32[_0x1bfe9b(0x4c1)](0x1f4)[_0x1bfe9b(0x536)](_0x3ced1a[_0x1bfe9b(0x33a)]);}})[a0_0x37fa70(0x50e)](a0_0x37fa70(0x46b),new Mt(S,...ce)[a0_0x37fa70(0x620)])[a0_0x37fa70(0x50e)]('/message',new Ot(...ce)[a0_0x37fa70(0x620)])[a0_0x37fa70(0x50e)](a0_0x37fa70(0x2c9),new dt(...ce)[a0_0x37fa70(0x620)])[a0_0x37fa70(0x50e)]('/group',new St(...ce)['router'])['use'](a0_0x37fa70(0x1f1),new Dt(...ce)[a0_0x37fa70(0x620)])['use'](a0_0x37fa70(0x6da),new Pt(...ce)[a0_0x37fa70(0x620)]);var m=class{constructor(..._0x46685c){const _0x4f8566=a0_0x37fa70;throw{'status':0x190,'error':'Bad\x20Request','message':_0x46685c[_0x4f8566(0x426)]>0x0?_0x46685c:void 0x0};}},ne=class{constructor(..._0x3acfb4){const _0x2eb93d=a0_0x37fa70;throw{'status':0x191,'error':'Unauthorized','message':_0x3acfb4[_0x2eb93d(0x426)]>0x0?_0x3acfb4:void 0x0};}},se=class{constructor(..._0x54a9f7){const _0xc50d15=a0_0x37fa70;throw{'status':0x193,'error':_0xc50d15(0x5f9),'message':_0x54a9f7[_0xc50d15(0x426)]>0x0?_0x54a9f7:void 0x0};}},V=class{constructor(..._0x64492e){const _0xedd1d9=a0_0x37fa70;throw{'status':0x194,'error':'Not\x20Found','message':_0x64492e[_0xedd1d9(0x426)]>0x0?_0x64492e:void 0x0};}},x=class{constructor(..._0x4f4b37){const _0x16949e=a0_0x37fa70;throw{'status':0x1f4,'error':_0x16949e(0x6de),'message':_0x4f4b37['length']>0x0?_0x4f4b37:void 0x0};}},Se=require(a0_0x37fa70(0x7d));async function Os(_0x41473d){const _0x7e96bf=a0_0x37fa70;let _0x35fca0=new $(Os[_0x7e96bf(0x410)]),_0xe38ffb=A[_0x7e96bf(0x2a0)](),_0x442d85=_0xe38ffb['db'](S[_0x7e96bf(0x7b6)](_0x7e96bf(0x796))[_0x7e96bf(0x66d)][_0x7e96bf(0x12f)]+_0x7e96bf(0x2d3))['collection'](_0x41473d),_0x59996c=async(_0x441d27,_0x1094b6)=>{const _0x14a0a4=_0x7e96bf;try{return await _0xe38ffb[_0x14a0a4(0x40a)](),await _0x442d85['replaceOne']({'_id':_0x1094b6},JSON[_0x14a0a4(0x3f5)](JSON['stringify'](_0x441d27,Se['BufferJSON'][_0x14a0a4(0x79c)])),{'upsert':!0x0});}catch{}},_0x1e8e6f=async _0x5aa3a0=>{const _0x36b465=_0x7e96bf;try{await _0xe38ffb[_0x36b465(0x40a)]();let _0x204f87=await _0x442d85[_0x36b465(0x1e2)]({'_id':_0x5aa3a0}),_0x562150=JSON[_0x36b465(0x718)](_0x204f87);return JSON['parse'](_0x562150,Se[_0x36b465(0x49b)][_0x36b465(0x498)]);}catch{}},_0x142970=async _0x43c5b6=>{const _0x27d981=_0x7e96bf;try{return await _0xe38ffb[_0x27d981(0x40a)](),await _0x442d85[_0x27d981(0x730)]({'_id':_0x43c5b6});}catch{}},_0x3d6e9d=await _0x1e8e6f(_0x7e96bf(0x5f7))||(0x0,Se[_0x7e96bf(0x6db)])();return{'state':{'creds':_0x3d6e9d,'keys':{'get':async(_0x1263e2,_0x425433)=>{let _0x44a643={};return await Promise['all'](_0x425433['map'](async _0x408627=>{const _0x5d5f34=a0_0x58ef;let _0x48b52b=await _0x1e8e6f(_0x1263e2+'-'+_0x408627);_0x1263e2===_0x5d5f34(0x446)&&_0x48b52b&&(_0x48b52b=Se[_0x5d5f34(0x71)][_0x5d5f34(0xcd)]['AppStateSyncKeyData'][_0x5d5f34(0x487)](_0x48b52b)),_0x44a643[_0x408627]=_0x48b52b;})),_0x44a643;},'set':async _0x58eb84=>{const _0x2bf6aa=_0x7e96bf;let _0x2f8ff8=[];for(let _0x3b24a9 in _0x58eb84)for(let _0x31abf9 in _0x58eb84[_0x3b24a9]){let _0x3bd78c=_0x58eb84[_0x3b24a9][_0x31abf9],_0x204517=_0x3b24a9+'-'+_0x31abf9;_0x2f8ff8[_0x2bf6aa(0x5ee)](_0x3bd78c?_0x59996c(_0x3bd78c,_0x204517):_0x142970(_0x204517));}await Promise[_0x2bf6aa(0x1ea)](_0x2f8ff8);}}},'saveCreds':async()=>_0x59996c(_0x3d6e9d,_0x7e96bf(0x5f7))};}var Fs=I(require(a0_0x37fa70(0x4f6))),Ls=I(require(a0_0x37fa70(0x7ca))),Ut=require(a0_0x37fa70(0x7d)),$i=require('@redis/client'),Lt=require(a0_0x37fa70(0x7d)),Ft;function Fo(_0x4e3305){const _0x229fc7=a0_0x37fa70;return Ft||(Ft=(0x0,$i[_0x229fc7(0xe5)])({'url':_0x4e3305['URI']}),Ft[_0x229fc7(0x40a)]()),Ft;}var ge=class u{constructor(_0x465711,_0x133710){const _0x1c1157=a0_0x37fa70;this['redisEnv']=_0x465711,this[_0x1c1157(0x653)]=_0x133710,this['logger']=new $(u[_0x1c1157(0x410)]),this[_0x1c1157(0x688)]=Fo(_0x465711);}set[a0_0x37fa70(0x2ab)](_0x365fbe){this['instanceName']=_0x365fbe;}async[a0_0x37fa70(0x39a)](){const _0x1bfc24=a0_0x37fa70;try{return await this[_0x1bfc24(0x688)][_0x1bfc24(0x28a)]([_0x1bfc24(0x674),this[_0x1bfc24(0x90)][_0x1bfc24(0x671)]+':*']);}catch(_0x3ba6dd){this[_0x1bfc24(0x39e)][_0x1bfc24(0x723)](_0x3ba6dd);}}async['writeData'](_0x2adaec,_0x5cb05b){const _0x155b50=a0_0x37fa70;try{let _0x4e99f3=JSON[_0x155b50(0x718)](_0x5cb05b,Lt['BufferJSON'][_0x155b50(0x79c)]);return await this['client']['hSet'](this[_0x155b50(0x90)]['PREFIX_KEY']+':'+this[_0x155b50(0x653)],_0x2adaec,_0x4e99f3);}catch(_0x30bc14){this[_0x155b50(0x39e)][_0x155b50(0x723)](_0x30bc14);}}async[a0_0x37fa70(0x16c)](){const _0x2ba883=a0_0x37fa70;try{let _0x4c0eef=await this[_0x2ba883(0x688)][_0x2ba883(0x3e2)](this['redisEnv'][_0x2ba883(0x671)]+':'+this[_0x2ba883(0x653)]);if(_0x4c0eef){for(let _0x8fec32 in _0x4c0eef)Object[_0x2ba883(0x2ce)][_0x2ba883(0x4ee)][_0x2ba883(0x666)](_0x4c0eef,_0x8fec32)&&(_0x4c0eef[_0x8fec32]=JSON[_0x2ba883(0x3f5)](_0x4c0eef[_0x8fec32],Lt[_0x2ba883(0x49b)][_0x2ba883(0x498)]));return _0x4c0eef;}}catch(_0x42e8f0){this[_0x2ba883(0x39e)]['error'](_0x42e8f0);}}async['readData'](_0x233aa8){const _0x3441ae=a0_0x37fa70;try{let _0x29b437=await this[_0x3441ae(0x688)]['hGet'](this[_0x3441ae(0x90)][_0x3441ae(0x671)]+':'+this[_0x3441ae(0x653)],_0x233aa8);if(_0x29b437)return JSON[_0x3441ae(0x3f5)](_0x29b437,Lt[_0x3441ae(0x49b)][_0x3441ae(0x498)]);}catch(_0x5ec74c){this[_0x3441ae(0x39e)]['error'](_0x5ec74c);}}async[a0_0x37fa70(0x6b5)](_0xb34437){const _0x8be059=a0_0x37fa70;try{return await this[_0x8be059(0x688)]['hDel'](this[_0x8be059(0x90)][_0x8be059(0x671)]+':'+this[_0x8be059(0x653)],_0xb34437);}catch(_0x29f9c0){this['logger'][_0x8be059(0x723)](_0x29f9c0);}}async[a0_0x37fa70(0x45f)](_0x34577a){const _0x56ef36=a0_0x37fa70;try{return await this['client'][_0x56ef36(0x4eb)](_0x34577a||this[_0x56ef36(0x90)][_0x56ef36(0x671)]+':'+this['instanceName']);}catch(_0x295477){this[_0x56ef36(0x39e)][_0x56ef36(0x723)](_0x295477);}}};async function xs(_0x4b0103,_0x44839c){const _0x4224fe=a0_0x37fa70;let _0x41ca70=new $(xs[_0x4224fe(0x410)]),_0x756e38=new ge(_0x4b0103,_0x44839c),_0x45c9ab=async(_0x422cb7,_0x2757d4)=>{const _0x13bcac=_0x4224fe;try{return await _0x756e38['writeData'](_0x2757d4,_0x422cb7);}catch(_0x21c37e){return _0x41ca70[_0x13bcac(0x723)]({'localError':_0x13bcac(0x4cd),'error':_0x21c37e});}},_0x3e7a59=async _0x1c4e5a=>{const _0x314a69=_0x4224fe;try{return await _0x756e38[_0x314a69(0x1a2)](_0x1c4e5a);}catch(_0xf6eb47){_0x41ca70[_0x314a69(0x723)]({'readData':_0x314a69(0x4cd),'error':_0xf6eb47});return;}},_0x19e4f2=async _0x2e2357=>{const _0x3510a2=_0x4224fe;try{return await _0x756e38['removeData'](_0x2e2357);}catch(_0xe5e1ca){_0x41ca70[_0x3510a2(0x723)]({'readData':_0x3510a2(0x6b5),'error':_0xe5e1ca});}},_0x1011d1=await _0x3e7a59('creds')||(0x0,Ut['initAuthCreds'])();return{'state':{'creds':_0x1011d1,'keys':{'get':async(_0x14ae6a,_0x1e12a0)=>{const _0x155a4a=_0x4224fe;let _0x1bfccf={};return await Promise['all'](_0x1e12a0[_0x155a4a(0x3c4)](async _0x59ee3c=>{const _0x219777=_0x155a4a;let _0x10bb37=await _0x3e7a59(_0x14ae6a+'-'+_0x59ee3c);_0x14ae6a===_0x219777(0x446)&&_0x10bb37&&(_0x10bb37=Ut['proto'][_0x219777(0xcd)][_0x219777(0x9d)]['fromObject'](_0x10bb37)),_0x1bfccf[_0x59ee3c]=_0x10bb37;})),_0x1bfccf;},'set':async _0x496868=>{let _0x1b1c4d=[];for(let _0x332720 in _0x496868)for(let _0x5c3126 in _0x496868[_0x332720]){let _0x39938c=_0x496868[_0x332720][_0x5c3126],_0x32135e=_0x332720+'-'+_0x5c3126;_0x1b1c4d['push'](_0x39938c?await _0x45c9ab(_0x39938c,_0x32135e):await _0x19e4f2(_0x32135e));}await Promise['all'](_0x1b1c4d);}}},'saveCreds':async()=>await _0x45c9ab(_0x1011d1,_0x4224fe(0x5f7))};}var U=I(require('fs')),Q=require('uuid'),qt=I(require('sharp')),Vt=require(a0_0x37fa70(0x72e)),Ri=require(a0_0x37fa70(0x2a5)),Ai=require(a0_0x37fa70(0x473)),Ii=I(require(a0_0x37fa70(0x150))),$e=class extends O{constructor(_0x34d149,_0x3e4736,_0x2b2ce4){const _0x38e466=a0_0x37fa70;super(_0x3e4736),this[_0x38e466(0x4ad)]=_0x34d149,this[_0x38e466(0x763)]=_0x3e4736,this[_0x38e466(0x79)]=_0x2b2ce4;}async[a0_0x37fa70(0x3bd)](_0x15fe44,_0x4a9e49){const _0x34e779=a0_0x37fa70;try{if(this[_0x34e779(0x122)][_0x34e779(0x464)]){console[_0x34e779(0xec)](_0x34e779(0x94)+_0x4a9e49+_0x34e779(0x239),_0x15fe44);let _0x312c57=await this[_0x34e779(0x4ad)][_0x34e779(0xa2)]({'_id':_0x4a9e49},{'$set':_0x15fe44},{'new':!0x0,'upsert':!0x0});return console[_0x34e779(0xec)]('Database\x20update\x20result:',_0x312c57),_0x312c57;}}catch(_0x161075){throw console[_0x34e779(0x723)](_0x34e779(0x6be),_0x161075),_0x161075;}return null;}async[a0_0x37fa70(0x730)](_0x9cf4a3){const _0x227a96=a0_0x37fa70;try{let _0x2aa6fe=T(_0x9cf4a3[_0x227a96(0x34f)]);return{'deletedCount':(await this[_0x227a96(0x4ad)][_0x227a96(0x730)](_0x2aa6fe))[_0x227a96(0x2ac)]};}catch(_0x55da32){return{'error':_0x55da32?.[_0x227a96(0x2c5)]()};}}async[a0_0x37fa70(0x1e2)](_0x4fbfc7){const _0x22ebbd=a0_0x37fa70;try{let _0x587480=T(_0x4fbfc7[_0x22ebbd(0x34f)]);return await this[_0x22ebbd(0x4ad)][_0x22ebbd(0x1e2)](_0x587480)[_0x22ebbd(0x2f3)]();}catch{return null;}}},jt=(0x0,Ai[a0_0x37fa70(0x6bb)])(Ri[a0_0x37fa70(0x2d4)]),Lo=S['get']('PROXY'),Ds=class{constructor(){const _0x8b2ea5=a0_0x37fa70;this[_0x8b2ea5(0x3cb)]=new $e(He,S),(!this['ipv6Prefix']||!this[_0x8b2ea5(0x75b)])&&Lo&&this[_0x8b2ea5(0x6c2)]()[_0x8b2ea5(0xab)](()=>{const _0x487f39=_0x8b2ea5;console[_0x487f39(0xec)](_0x487f39(0x22e)+this[_0x487f39(0x5d0)]),console[_0x487f39(0xec)](_0x487f39(0x6fc)+this[_0x487f39(0x75b)]);})['catch'](_0x4cc360=>{const _0x58b081=_0x8b2ea5;console[_0x58b081(0x723)](_0x58b081(0x1f7)+_0x4cc360[_0x58b081(0x33a)]);});}async[a0_0x37fa70(0x6c2)](){const _0x26349f=a0_0x37fa70;try{let {stdout:_0x303937}=await jt(_0x26349f(0x2fa));console[_0x26349f(0xec)](_0x26349f(0x5ae)+_0x303937);let _0x592aab=_0x303937[_0x26349f(0x213)]('\x0a')[_0x26349f(0x3c4)](_0x24fcd5=>_0x24fcd5[_0x26349f(0x213)]('\x20')[0x0])['filter'](_0x364ce4=>!_0x364ce4[_0x26349f(0x14a)]('lo')&&!_0x364ce4[_0x26349f(0x14a)](_0x26349f(0xce))&&!_0x364ce4[_0x26349f(0x14a)](_0x26349f(0x189))&&!_0x364ce4['includes']('wl')&&!_0x364ce4[_0x26349f(0x14a)]('@'));if(console[_0x26349f(0xec)](_0x26349f(0x5ce)+_0x592aab),_0x592aab[_0x26349f(0x426)]===0x0)throw new Error('No\x20suitable\x20network\x20interface\x20found');this[_0x26349f(0x75b)]=_0x592aab[0x0];let {stdout:_0x5cde39}=await jt('ip\x20-6\x20addr\x20show\x20dev\x20'+this[_0x26349f(0x75b)]);console[_0x26349f(0xec)]('IPv6\x20addresses\x20detected:\x20'+_0x5cde39);let _0x41e42c=_0x5cde39['split']('\x0a')['find'](_0x456931=>_0x456931[_0x26349f(0x14a)](_0x26349f(0x52a))&&_0x456931[_0x26349f(0x14a)](_0x26349f(0x6d)));if(!_0x41e42c)throw new Error(_0x26349f(0x520));let _0x17c63e=_0x41e42c[_0x26349f(0x538)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x17c63e)throw new Error(_0x26349f(0x7c));let [_0x35297f,_0x249d11,_0x558bb5]=_0x17c63e,_0x7e8a5e=Math[_0x26349f(0x431)](Number(_0x558bb5)/0x10),_0x28ed4c=Number(_0x558bb5)%0x10,_0x68dfbf=_0x249d11[_0x26349f(0x213)](':')[_0x26349f(0x70f)](0x0,_0x7e8a5e)['join'](':');if(_0x28ed4c>0x0){let _0x424098=_0x249d11['split'](':')[_0x7e8a5e],_0x285764=0xffff<<0x10-_0x28ed4c&0xffff,_0xcda181=(parseInt(_0x424098,0x10)&_0x285764)[_0x26349f(0x2c5)](0x10)[_0x26349f(0x42f)](0x4,'0');_0x68dfbf+=':'+_0xcda181;}this['ipv6Prefix']=_0x68dfbf+':';}catch(_0x124b23){console[_0x26349f(0x723)]('Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:',_0x124b23);}}async[a0_0x37fa70(0x6ee)](_0xc3f108){const _0x422039=a0_0x37fa70;let _0x577f33=_0x422039(0x2d2)+_0xc3f108+_0x422039(0x71d)+this[_0x422039(0x75b)];try{await jt(_0x577f33),console['log'](_0x422039(0x795)+_0xc3f108);}catch(_0x2b9f62){throw console[_0x422039(0x723)]('Error\x20adding\x20IPv6\x20address:\x20'+_0x2b9f62),new Error('Error\x20adding\x20IPv6\x20address:\x20'+_0x2b9f62);}}async['removeIPv6'](_0x3aa463){const _0x4d6ae9=a0_0x37fa70;let _0x356be5=_0x4d6ae9(0x5f2)+_0x3aa463+_0x4d6ae9(0x71d)+this[_0x4d6ae9(0x75b)];try{await jt(_0x356be5),console['log'](_0x4d6ae9(0x526)+_0x3aa463);}catch(_0x255a69){throw console[_0x4d6ae9(0x723)](_0x4d6ae9(0xea)+_0x255a69),new Error(_0x4d6ae9(0xea)+_0x255a69);}}['randomMac'](){const _0x54ed40=a0_0x37fa70;return _0x54ed40(0x7b3)[_0x54ed40(0x2e9)](/X/g,()=>_0x54ed40(0x547)[_0x54ed40(0x5b5)](Math['floor'](Math[_0x54ed40(0x6f5)]()*0x10)));}[a0_0x37fa70(0x30a)](_0x1c2e58,_0x23315d){const _0x442f74=a0_0x37fa70;let _0x517371=_0x23315d[_0x442f74(0x213)](':');return _0x517371[0x0]=(parseInt(_0x517371[0x0],0x10)^0x2)[_0x442f74(0x2c5)](0x10)[_0x442f74(0x42f)](0x2,'0'),''+_0x1c2e58+_0x517371[0x0]+_0x517371[0x1]+':'+_0x517371[0x2]+_0x442f74(0x2a2)+_0x517371[0x3]+':'+_0x517371[0x4]+_0x517371[0x5];}[a0_0x37fa70(0x193)](){const _0x3607e4=a0_0x37fa70;let _0x19d85e=this['ipv6Prefix'];_0x19d85e[_0x3607e4(0x78)](':')||(_0x19d85e+=':');let _0x466667=this[_0x3607e4(0x7b1)]();return this[_0x3607e4(0x30a)](_0x19d85e,_0x466667);}[a0_0x37fa70(0x140)](_0xfe21b8){const _0x43a37b=a0_0x37fa70;return new RegExp(_0x43a37b(0x43b))[_0x43a37b(0x132)](_0xfe21b8);}async[a0_0x37fa70(0x54d)](_0x3a62ab){const _0x202647=a0_0x37fa70;let _0x53beef=[{'url':_0x202647(0x2e3),'parse':_0x5e6aea=>_0x5e6aea['ip']},{'url':_0x202647(0x307),'parse':_0x37080f=>_0x37080f['ip']},{'url':'https://ifconfig.me/ip','parse':_0x308d86=>_0x308d86[_0x202647(0x6ba)]()},{'url':_0x202647(0x74c),'parse':_0x1559ac=>_0x1559ac[_0x202647(0x6ba)]()}],_0x1e6b27=_0x53beef[Math['floor'](Math['random']()*_0x53beef[_0x202647(0x426)])];try{let _0x282f61=await Ii[_0x202647(0x259)][_0x202647(0x7b6)](_0x1e6b27['url'],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x3a62ab}}),_0x45bbaf=_0x1e6b27[_0x202647(0x3f5)](_0x282f61[_0x202647(0x349)]);return _0x45bbaf[_0x202647(0x1c6)]()===_0x3a62ab['toLowerCase']()?(console[_0x202647(0xec)]('IP\x20confirmed:\x20'+_0x3a62ab),!0x0):(console['error'](_0x202647(0x79f)+_0x3a62ab+_0x202647(0x6f8)+_0x45bbaf),!0x1);}catch(_0x4c3744){return console[_0x202647(0x723)](_0x202647(0x5ba)+_0x1e6b27['url']+':\x20'+_0x4c3744['message']),!0x1;}}async[a0_0x37fa70(0x543)](_0x3a6e60,_0x199103){const _0x581665=a0_0x37fa70;if(!this[_0x581665(0x5d0)]||!this[_0x581665(0x75b)])return console[_0x581665(0x723)](_0x581665(0x679)),null;let _0x3b5367;do _0x3b5367=this['generateRandomIPv6'](),console[_0x581665(0xec)](_0x581665(0x194)+_0x3b5367);while(!await this[_0x581665(0x5b3)](_0x3b5367));await this['configureIPv6'](_0x3b5367),console[_0x581665(0xec)]('Configured\x20IPv6:\x20'+_0x3b5367);let _0x24cfec={'_id':_0x3a6e60+'-'+_0x199103,'ip':_0x3b5367},_0x76f101=await this[_0x581665(0x3cb)]['createOrUpdate'](_0x24cfec,_0x24cfec[_0x581665(0x1b0)]);return console['log'](_0x581665(0x531)+_0x76f101),_0x3b5367;}async['isValidAndUniqueIPv6'](_0x26a3f3){return this['isValidIPv6Config'](_0x26a3f3)?!await this['cacheInstanceRepository']['findOne']({'where':{'ip':_0x26a3f3}}):!0x1;}async[a0_0x37fa70(0x594)](_0x327d14,_0x14192c){const _0x5a7ed7=a0_0x37fa70;let _0x1159c5=_0x327d14+'-'+_0x14192c,_0x4a8b98=await this[_0x5a7ed7(0x3cb)]['findOne']({'where':{'_id':_0x1159c5}});_0x4a8b98&&_0x4a8b98['ip']&&(await this['removeIPv6'](_0x4a8b98['ip']),await this['cacheInstanceRepository']['deleteOne']({'where':{'_id':_0x1159c5}}));}},Uo=new Ds(),me=Uo,Us='Safari',Fi,fe=null,Pa=null,jo=0x3,Jo=null,Ti=S[a0_0x37fa70(0x7b6)](a0_0x37fa70(0x725))['API_KEY'][a0_0x37fa70(0x5af)],_i=S[a0_0x37fa70(0x7b6)](a0_0x37fa70(0x240));async function qo(){const _0x3ed34d=a0_0x37fa70;let _0x505b40=await Ne[_0x3ed34d(0x1e2)]();fe=_0x505b40?.[_0x3ed34d(0x135)]??null,Jo=_0x505b40?.[_0x3ed34d(0xd2)]??null,Us=_0x505b40?.[_0x3ed34d(0x370)]??_0x3ed34d(0x719),Fi=_0x505b40?.[_0x3ed34d(0x10b)]??ee??_0x3ed34d(0x6b3);}async function Vo(){await qo();}Vo();var Oi={},le={},Re=class u{constructor(_0x11b2a5,_0x1dd986,_0x1a0106){const _0x9c06c1=a0_0x37fa70;this['configService']=_0x11b2a5,this[_0x9c06c1(0xfb)]=_0x1dd986,this[_0x9c06c1(0x210)]=_0x1a0106,this[_0x9c06c1(0x1db)]=null,this[_0x9c06c1(0x39e)]=new $(u[_0x9c06c1(0x410)]),this['instance']={},this[_0x9c06c1(0x28f)]={},this[_0x9c06c1(0x1e6)]={'state':'close'},this[_0x9c06c1(0x75)]=(0x0,J['join'])(ue,_0x9c06c1(0x182)),this[_0x9c06c1(0x5de)]=new Ls[(_0x9c06c1(0x259))](),this[_0x9c06c1(0x367)]=new Ls[(_0x9c06c1(0x259))](),this[_0x9c06c1(0x6b7)]=!0x1,this[_0x9c06c1(0x6ed)]={'status.instance':'/wa-connection-update','connection.update':_0x9c06c1(0x53c),'qrcode.updated':_0x9c06c1(0x394),'messages.upsert':_0x9c06c1(0x311),'send.message':_0x9c06c1(0x311),'messages.update':'/wa-message-update','group.upsert':'/wa-groups','group.update':'/wa-groups','group-participants.update':_0x9c06c1(0x5b9),'messages.set':_0x9c06c1(0x6a2),'contacts.set':_0x9c06c1(0x352),'contacts.upsert':_0x9c06c1(0x352),'contacts.update':_0x9c06c1(0x352),'presence.update':_0x9c06c1(0x2a7),'chats.set':_0x9c06c1(0x3ab),'chats.update':_0x9c06c1(0x3ab),'chats.upsert':_0x9c06c1(0x3ab),'chats.delete':_0x9c06c1(0x3ab)},this[_0x9c06c1(0x4ac)]=0x0,this[_0x9c06c1(0x636)]=[],this[_0x9c06c1(0x4f2)]=0xea60,this[_0x9c06c1(0x61c)]=!0x1,this[_0x9c06c1(0x24b)]={'chats.upsert':async(_0x5e14e7,_0x14effd)=>{const _0x2449d5=_0x9c06c1;let _0x50bf8d=[];for await(let _0x112d52 of _0x5e14e7)_0x50bf8d[_0x2449d5(0x5ee)]({'_id':_0x112d52['id'],'owner':this[_0x2449d5(0x753)][_0x2449d5(0x6e4)],'group':_0x112d52['id'][_0x2449d5(0x78)](_0x2449d5(0x322)),'name':_0x112d52['name']||_0x112d52[_0x2449d5(0x654)]||null,'contactname':null,'lastmsg':_0x112d52[_0x2449d5(0x576)]&&_0x112d52[_0x2449d5(0x576)][_0x2449d5(0x2c5)]()[_0x2449d5(0x426)]<0xd?_0x112d52['conversationTimestamp']*0x3e8:_0x112d52[_0x2449d5(0x576)]||null,'archived':_0x112d52[_0x2449d5(0x747)]||!0x1,'unreadcount':_0x112d52[_0x2449d5(0x60e)]||0x0,'ephemeralExpiration':_0x112d52[_0x2449d5(0x45d)]||0x0});this[_0x2449d5(0x792)](_0x2449d5(0x3aa),_0x50bf8d);},'chats.update':async(_0x5caa74,_0x538228)=>{const _0xb14e71=_0x9c06c1;for(let _0x52c1f4 of _0x5caa74){let _0x65dfba={'_id':_0x52c1f4['id'],'owner':this['instance'][_0xb14e71(0x6e4)],'archived':_0x52c1f4[_0xb14e71(0x747)],'muteEndTime':_0x52c1f4[_0xb14e71(0x409)],'ephemeralExpiration':_0x52c1f4[_0xb14e71(0x45d)]},_0x2c1ade=!0x1,_0x30274c={};_0x65dfba[_0xb14e71(0x747)]!=null&&(this[_0xb14e71(0x39e)][_0xb14e71(0x48f)](this[_0xb14e71(0x653)]+'\x20('+this[_0xb14e71(0x753)]['wuid']+_0xb14e71(0x457)+_0x52c1f4['id']+_0xb14e71(0x6d7)+_0x52c1f4[_0xb14e71(0x747)]),_0x2c1ade=!0x0,_0x30274c[_0xb14e71(0x747)]=_0x52c1f4[_0xb14e71(0x747)]),_0xb14e71(0x409)in _0x52c1f4&&(this['logger'][_0xb14e71(0x48f)](this[_0xb14e71(0x653)]+'\x20('+this[_0xb14e71(0x753)][_0xb14e71(0x6e4)]+_0xb14e71(0x178)+_0x52c1f4['id']+'\x20:\x20'+(_0x52c1f4[_0xb14e71(0x409)]??'0')),_0x2c1ade=!0x0,_0x30274c[_0xb14e71(0x409)]=_0x52c1f4[_0xb14e71(0x409)]??0x0),_0xb14e71(0x45d)in _0x52c1f4&&(this['logger'][_0xb14e71(0x48f)](this[_0xb14e71(0x653)]+'\x20('+this[_0xb14e71(0x753)][_0xb14e71(0x6e4)]+_0xb14e71(0x736)+_0x52c1f4['id']+'\x20:\x20'+(_0x52c1f4[_0xb14e71(0x45d)]!==void 0x0?_0x52c1f4['ephemeralExpiration']:_0xb14e71(0x32d))),_0x30274c[_0xb14e71(0x45d)]=_0x52c1f4['ephemeralExpiration']===null?0x0:_0x52c1f4[_0xb14e71(0x45d)],_0x2c1ade=!0x0);let _0x2ba2bf;_0x2c1ade&&(_0x2ba2bf=await this['repository'][_0xb14e71(0x4a2)][_0xb14e71(0x130)]({'where':{'_id':_0x52c1f4['id']}},_0x30274c,this[_0xb14e71(0x753)]['wuid'])),_0x2ba2bf&&q(this[_0xb14e71(0x653)],_0xb14e71(0x5c9),{'chat':_0x2ba2bf});}},'chats.delete':async _0x33aaaa=>{const _0x131522=_0x9c06c1;for(let _0x48fa4b of _0x33aaaa)if(_0x48fa4b['endsWith'](_0x131522(0x322))){await this[_0x131522(0x210)]['chat']['delete']({'where':{'_id':_0x48fa4b}},this['instance'][_0x131522(0x6e4)]);let _0x1f7519={'where':{'key':{'remoteJid':_0x48fa4b}}};await this['repository'][_0x131522(0x33a)][_0x131522(0x6ad)](_0x1f7519,this[_0x131522(0x753)][_0x131522(0x6e4)]);}else{await this['repository'][_0x131522(0x4a2)]['updateOne']({'where':{'_id':_0x48fa4b}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x131522(0x753)][_0x131522(0x6e4)]);let _0x418ec3={'where':{'key':{'remoteJid':_0x48fa4b}}};await this[_0x131522(0x210)][_0x131522(0x33a)]['delete'](_0x418ec3,this['instance'][_0x131522(0x6e4)]);}this[_0x131522(0x792)](_0x131522(0x74),[..._0x33aaaa]);}},this[_0x9c06c1(0x1c3)]={'contacts.upsert':async(_0x37a88a,_0x54eb37)=>{const _0x33f86a=_0x9c06c1;let _0x1ed6e9=await this[_0x33f86a(0x210)][_0x33f86a(0x489)]['find']({'where':{}},this[_0x33f86a(0x753)][_0x33f86a(0x6e4)]),_0x22e339=[];for await(let _0x148f9d of _0x37a88a)_0x1ed6e9[_0x33f86a(0x3b4)](_0x1b84f9=>_0x1b84f9[_0x33f86a(0x1b0)]===_0x148f9d['id'])||_0x22e339[_0x33f86a(0x5ee)]({'_id':_0x148f9d['id'],'pushName':_0x148f9d?.[_0x33f86a(0x410)]||_0x148f9d?.['verifiedName'],'owner':this[_0x33f86a(0x753)][_0x33f86a(0x6e4)]});this[_0x33f86a(0x792)]('contacts.upsert',_0x22e339),await this[_0x33f86a(0x210)][_0x33f86a(0x489)][_0x33f86a(0x737)](_0x22e339);},'contacts.update':async(_0x37745c,_0x52c5f8)=>{const _0x25b874=_0x9c06c1;let _0x3713a7=[];for await(let _0x494595 of _0x37745c)_0x3713a7[_0x25b874(0x5ee)]({'_id':_0x494595['id'],'pushName':_0x494595?.[_0x25b874(0x410)]??_0x494595?.[_0x25b874(0x5fb)],'owner':this[_0x25b874(0x753)]['wuid']});this['sendDataWebhook'](_0x25b874(0x781),_0x3713a7);}},this['messageHandle']={'messaging-history.set':async({messages:_0x2ed767,chats:_0x305633,isLatest:_0x1c852e},_0x5cb863)=>{const _0x4f762b=_0x9c06c1;if(_0x1c852e){let _0x101051=await Promise['all'](_0x305633[_0x4f762b(0x3c4)](async _0x57901e=>({'_id':_0x57901e['id'],'owner':this[_0x4f762b(0x753)]['wuid'],'group':_0x57901e['id']['endsWith'](_0x4f762b(0x322)),'name':_0x57901e[_0x4f762b(0x410)]||_0x57901e[_0x4f762b(0x654)]||_0x57901e[_0x4f762b(0x102)]||null,'contactname':null,'lastmsg':_0x57901e[_0x4f762b(0x576)]&&_0x57901e[_0x4f762b(0x576)][_0x4f762b(0x2c5)]()[_0x4f762b(0x426)]<0xd?_0x57901e[_0x4f762b(0x576)]*0x3e8:_0x57901e[_0x4f762b(0x576)]||null,'archived':_0x57901e['archived']||!0x1,'unreadcount':_0x57901e[_0x4f762b(0x60e)]||0x0,'ephemeralExpiration':_0x57901e[_0x4f762b(0x45d)]||0x0,'muteEndTime':_0x57901e[_0x4f762b(0x409)]||0x0})));this[_0x4f762b(0x792)](_0x4f762b(0x248),_0x101051),await this[_0x4f762b(0x30e)](_0x101051,_0x5cb863);}let _0x439ce7=[],_0x2e8a2d=Date[_0x4f762b(0x5cf)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x10212c]of Object['entries'](_0x2ed767)){if(_0x10212c[_0x4f762b(0x33a)]?.[_0x4f762b(0x58f)]||_0x10212c[_0x4f762b(0x33a)]?.[_0x4f762b(0x21f)]||!_0x10212c[_0x4f762b(0x33a)]||_0x10212c[_0x4f762b(0x2d1)][_0x4f762b(0x6a8)]===_0x4f762b(0x6c1)||(Fs[_0x4f762b(0x259)]['isLong'](_0x10212c?.['messageTimestamp'])&&(_0x10212c['messageTimestamp']=_0x10212c[_0x4f762b(0x686)]?.['toNumber']()),_0x10212c[_0x4f762b(0x686)]&&_0x10212c[_0x4f762b(0x686)][_0x4f762b(0x2c5)]()[_0x4f762b(0x426)]<0xd&&(_0x10212c[_0x4f762b(0x686)]=_0x10212c[_0x4f762b(0x686)]*0x3e8),_0x10212c[_0x4f762b(0x686)]<_0x2e8a2d))continue;let _0x8cfc0=(0x0,w[_0x4f762b(0x1d4)])(_0x10212c[_0x4f762b(0x33a)]),_0x2b8ba=(0x0,w[_0x4f762b(0x8c)])(_0x8cfc0),{message_normalized:_0x253bbd}=this[_0x4f762b(0x3a4)](_0x8cfc0,_0x2b8ba,null);Object[_0x4f762b(0x674)](_0x253bbd)[_0x4f762b(0x426)]>0x0&&_0x439ce7[_0x4f762b(0x5ee)]({'_id':_0x10212c[_0x4f762b(0x2d1)]['id'],'key':_0x10212c[_0x4f762b(0x2d1)],'pushName':_0x10212c[_0x4f762b(0x339)],'participant':_0x10212c[_0x4f762b(0x83)],'message':_0x8cfc0,'messageType':_0x2b8ba,'message_normalized':{'key':_0x10212c['key'],'pushName':_0x10212c[_0x4f762b(0x339)],'messageTimestamp':_0x10212c[_0x4f762b(0x686)],..._0x253bbd},'messageTimestamp':_0x10212c['messageTimestamp'],'owner':this[_0x4f762b(0x753)][_0x4f762b(0x6e4)]});}_0x5cb863[_0x4f762b(0x464)]&&_0x439ce7[_0x4f762b(0x426)]>0x0&&(this[_0x4f762b(0x39e)][_0x4f762b(0x48f)](this[_0x4f762b(0x653)]+'\x20('+this[_0x4f762b(0x753)][_0x4f762b(0x6e4)]+_0x4f762b(0x17d)+_0x439ce7['length']+_0x4f762b(0x183)+this[_0x4f762b(0x753)]['wuid']+_0x4f762b(0x575)),await this[_0x4f762b(0x210)][_0x4f762b(0x33a)][_0x4f762b(0x737)]([..._0x439ce7],this[_0x4f762b(0x753)][_0x4f762b(0x6e4)])),this[_0x4f762b(0x792)](_0x4f762b(0x698),[..._0x439ce7]),_0x2ed767=void 0x0;},'messages.upsert':async({messages:_0x3c3f75,type:_0x41150d},_0x47b106)=>{const _0x177143=_0x9c06c1;for(let _0x4a8350 of _0x3c3f75){if(this[_0x177143(0x28f)]?.[_0x177143(0x26e)]&&_0x4a8350[_0x177143(0x2d1)][_0x177143(0x6a8)][_0x177143(0x14a)](_0x177143(0x322))){this[_0x177143(0x39e)][_0x177143(0x48f)](this[_0x177143(0x653)]+'\x20('+this[_0x177143(0x753)][_0x177143(0x6e4)]+_0x177143(0x31d));return;}let _0x38899a=_0x4a8350[_0x177143(0x2d1)]['id'],_0x35e0f1=_0x4a8350[_0x177143(0x70b)]===0x2,_0x442ad1=0xb;if(_0x35e0f1){if(le[_0x38899a]||(le[_0x38899a]=0x0),le[_0x38899a]++,this[_0x177143(0x39e)][_0x177143(0x723)](this['instanceName']+'\x20('+this[_0x177143(0x753)][_0x177143(0x6e4)]+_0x177143(0x55e)+_0x4a8350['key']['remoteJid']+_0x177143(0x263)+_0x38899a+':\x20'+le[_0x38899a]+'/'+_0x442ad1),le[_0x38899a]>=_0x442ad1){this[_0x177143(0x39e)]['error'](this['instanceName']+'\x20('+this[_0x177143(0x753)][_0x177143(0x6e4)]+_0x177143(0x35b)+_0x4a8350[_0x177143(0x2d1)][_0x177143(0x6a8)]+_0x177143(0x263)+_0x38899a+'.');let _0x3ef29e={'key':{..._0x4a8350[_0x177143(0x2d1)]},'message':{'conversation':_0x177143(0x88)+_0x38899a+_0x177143(0x33d)}};this['client']['ev'][_0x177143(0x20a)](_0x177143(0x153),{'messages':[_0x3ef29e],'type':_0x177143(0x295)}),delete le[_0x38899a];}}else le[_0x38899a]&&(this[_0x177143(0x39e)]['warn'](_0x177143(0x76d)+le[_0x38899a]+_0x177143(0x165)+_0x4a8350[_0x177143(0x2d1)][_0x177143(0x6a8)]+_0x177143(0x263)+_0x38899a),delete le[_0x38899a]);if(_0x41150d!==_0x177143(0x295)||!_0x4a8350?.['message']||_0x4a8350['message']?.[_0x177143(0x58f)]||_0x4a8350[_0x177143(0x33a)]['senderKeyDistributionMessage']||_0x4a8350[_0x177143(0x2d1)]['remoteJid']==='status@broadcast')return;let _0x5c3248=null,_0x199413=null;try{_0x5c3248=await this[_0x177143(0x6f9)](_0x4a8350),_0x199413=_0x5c3248?_0x5c3248[_0x177143(0x114)](','):null;}catch(_0x3a4e92){this[_0x177143(0x39e)][_0x177143(0x48f)](this[_0x177143(0x653)]+'\x20('+this['instance'][_0x177143(0x6e4)]+_0x177143(0x17d)+(_0x3a4e92 instanceof Error?_0x3a4e92['message']:JSON[_0x177143(0x718)](_0x3a4e92,null,0x2))),_0x199413=_0x177143(0x493);}this['client']['sendPresenceUpdate']('unavailable'),Fs[_0x177143(0x259)][_0x177143(0x705)](_0x4a8350['messageTimestamp'])&&(_0x4a8350[_0x177143(0x686)]=_0x4a8350['messageTimestamp']?.[_0x177143(0x344)]()),_0x4a8350[_0x177143(0x686)]&&_0x4a8350[_0x177143(0x686)][_0x177143(0x2c5)]()['length']<0xd&&(_0x4a8350[_0x177143(0x686)]=_0x4a8350['messageTimestamp']*0x3e8);let _0x297440=_0x4a8350[_0x177143(0x33a)],_0x12a555=(0x0,w[_0x177143(0x1d4)])(_0x297440),_0xdc8366=(0x0,w['getContentType'])(_0x12a555),{messageContent:_0x5b175f,message_normalized:_0x2f84d1}=this[_0x177143(0x3a4)](_0x12a555,_0xdc8366,_0x199413);_0xdc8366===_0x177143(0x58f)&&_0x5b175f?.[_0x177143(0xa0)]&&(_0xdc8366=_0x177143(0xa0));let _0x54e21a,_0x49b8a1=_0x4a8350['key']['remoteJid'][_0x177143(0x78)]('@g.us');if(_0x4a8350[_0x177143(0x2d1)][_0x177143(0x2b5)])_0x54e21a=this[_0x177143(0x753)][_0x177143(0x434)];else{let _0x3df93c=_0x49b8a1?_0x4a8350[_0x177143(0x2d1)][_0x177143(0x83)]:_0x4a8350[_0x177143(0x2d1)][_0x177143(0x6a8)];_0x54e21a=(await this[_0x177143(0x95)](_0x3df93c,_0x4a8350[_0x177143(0x339)],!0x1))[_0x177143(0x167)][_0x177143(0x21a)];}let _0x4fe23d={'_id':_0x4a8350['key']['id'],'key':_0x4a8350[_0x177143(0x2d1)],'isGroup':_0x49b8a1,'profilePictureUrl':_0x54e21a,'pushName':_0x4a8350['pushName'],'message':_0x12a555,'messageType':_0xdc8366,'message_normalized':{'key':_0x4a8350[_0x177143(0x2d1)],'pushName':_0x4a8350[_0x177143(0x339)],'messageTimestamp':_0x4a8350[_0x177143(0x686)],'source':(0x0,w[_0x177143(0x4d6)])(_0x4a8350[_0x177143(0x2d1)]['id']),..._0x2f84d1},'messageTimestamp':_0x4a8350[_0x177143(0x686)],'owner':this[_0x177143(0x753)]['wuid'],'source':(0x0,w[_0x177143(0x4d6)])(_0x4a8350[_0x177143(0x2d1)]['id']),'expiration':_0x5b175f?.[_0x177143(0x785)]?.[_0x177143(0x392)]||0x0};_0x5b175f||(this[_0x177143(0x39e)][_0x177143(0x723)](_0x177143(0x3c1)),this[_0x177143(0x39e)][_0x177143(0x723)](_0x4fe23d)),this[_0x177143(0x39e)]['log'](this[_0x177143(0x653)]+'\x20('+this[_0x177143(0x753)][_0x177143(0x6e4)]+_0x177143(0x17d)+(_0x4fe23d['key']?.['fromMe']?'enviado\x20para':_0x177143(0x539))+'\x20['+_0x4fe23d[_0x177143(0x2d1)]?.[_0x177143(0x6a8)][_0x177143(0x2e9)](_0x177143(0x561),'')+_0x177143(0x23a)+_0x4fe23d[_0x177143(0x105)]+')'),_0x4fe23d['message_normalized']?.[_0x177143(0x403)]&&this[_0x177143(0x39e)][_0x177143(0xec)](_0x4a8350[_0x177143(0x2d1)]['id']+':\x20'+_0x4fe23d[_0x177143(0x550)]?.[_0x177143(0x403)]),await this[_0x177143(0x210)][_0x177143(0x33a)][_0x177143(0x737)]([_0x4fe23d],this['instance'][_0x177143(0x6e4)]),this['sendDataWebhook']('messages.upsert',_0x4fe23d),q(this[_0x177143(0x653)],_0x177143(0x6fb),{'message':_0x4fe23d}),_0x4a8350[_0x177143(0x2d1)][_0x177143(0x6a8)]!=='status@broadcast'&&await this['updateChatWithMessage'](_0x47b106,_0x4fe23d,_0x177143(0x1b5));}},'messages.update':async(_0xd5c74a,_0xb4cbf4)=>{const _0x3dadef=_0x9c06c1;let _0x22b0ee={0x0:_0x3dadef(0x614),0x1:_0x3dadef(0x655),0x2:_0x3dadef(0x30d),0x3:_0x3dadef(0x173),0x4:_0x3dadef(0x590),0x5:_0x3dadef(0x67f)};for await(let {key:_0x3f7a7c,update:_0x1e520e}of _0xd5c74a){if(this[_0x3dadef(0x28f)]?.['groups_ignore']&&_0x3f7a7c[_0x3dadef(0x6a8)][_0x3dadef(0x14a)](_0x3dadef(0x322))){this['logger']['verbose'](this[_0x3dadef(0x653)]+'\x20('+this[_0x3dadef(0x753)]['wuid']+_0x3dadef(0x7b9));return;}if(_0x3f7a7c[_0x3dadef(0x6a8)]!==_0x3dadef(0x6c1)){let _0x5e4fae=Date[_0x3dadef(0x5cf)](),_0x7e3858;_0x1e520e['message']===null&&_0x1e520e[_0x3dadef(0x4c1)]===void 0x0?_0x7e3858=_0x3dadef(0x284):_0x7e3858=_0x22b0ee[_0x1e520e[_0x3dadef(0x4c1)]];let _0x143b1e=_0x3f7a7c['remoteJid'][_0x3dadef(0x2e9)](/:\d{1,2}@/g,'@'),_0x12a27e={..._0x3f7a7c,'remoteJid':_0x143b1e,'status':_0x7e3858,'datetime':_0x5e4fae,'owner':this[_0x3dadef(0x753)][_0x3dadef(0x6e4)]};this[_0x3dadef(0x792)]('messages.update',_0x12a27e),await this[_0x3dadef(0x37a)](_0x3f7a7c,_0x12a27e);}}},'labels.association':async({type:_0x5ef1ee,association:_0x383af3})=>{const _0x251845=_0x9c06c1;if(_0x383af3[_0x251845(0x519)]===_0x251845(0x433)){let _0x3945e9,_0x398039=0x0;for(;!_0x3945e9&&_0x398039<this[_0x251845(0x4b2)];)_0x3945e9=await this[_0x251845(0x210)][_0x251845(0x4a2)]['findOne']({'where':{'_id':_0x383af3[_0x251845(0x99)]}},this['instance'][_0x251845(0x6e4)]),_0x3945e9||(_0x398039++,this[_0x251845(0x39e)][_0x251845(0x11b)](this[_0x251845(0x653)]+'\x20('+this[_0x251845(0x753)][_0x251845(0x6e4)]+_0x251845(0x93)+_0x383af3[_0x251845(0x99)]+'\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20'+this['delayChatLabel_RETRY_DELAY_MS']+_0x251845(0x1d1)+_0x398039+'/'+this[_0x251845(0x4b2)]+')'),await this[_0x251845(0x203)](this[_0x251845(0x1fd)]));if(!_0x3945e9){this['logger']['error'](_0x251845(0x96)+_0x383af3[_0x251845(0x99)]+_0x251845(0x2fb)+this[_0x251845(0x4b2)]+'\x20tentativas.');return;}switch(_0x5ef1ee){case _0x251845(0xf8):console['log'](_0x383af3),await this['repository'][_0x251845(0x4a2)]['updateOne']({'where':{'_id':_0x383af3[_0x251845(0x99)]}},{'leadInfo.etiquetas':_0x383af3['labelId']},this['instance'][_0x251845(0x6e4)],void 0x0,_0x251845(0x198));break;case _0x251845(0x5f0):console[_0x251845(0xec)](_0x383af3),await this[_0x251845(0x210)][_0x251845(0x4a2)][_0x251845(0x130)]({'where':{'_id':_0x383af3[_0x251845(0x99)]}},{'leadInfo.etiquetas':_0x383af3[_0x251845(0x717)]},this['instance'][_0x251845(0x6e4)],void 0x0,_0x251845(0x55d));break;default:this['logger'][_0x251845(0x723)]('unknown\x20operation\x20type\x20['+_0x5ef1ee+']');}}},'labels.edit':async _0x24b0e3=>{const _0x5039bd=_0x9c06c1;if(!_0x24b0e3||!_0x24b0e3['id']){this[_0x5039bd(0x39e)][_0x5039bd(0x723)](_0x5039bd(0x631));return;}if(!_0x24b0e3[_0x5039bd(0x484)]){let _0x2523fe=[_0x5039bd(0xe0),_0x5039bd(0x400),_0x5039bd(0xc0),_0x5039bd(0x376),_0x5039bd(0x144),_0x5039bd(0x312),_0x5039bd(0x145),_0x5039bd(0x2bf),_0x5039bd(0x302),'#d8e651',_0x5039bd(0x14f),_0x5039bd(0x4a4),'#92ceac','#f64847',_0x5039bd(0x1e4),_0x5039bd(0xe3),_0x5039bd(0x5f1),_0x5039bd(0x9e),_0x5039bd(0x7c3),_0x5039bd(0x98)],_0xcd2b65;typeof _0x24b0e3[_0x5039bd(0x6df)]=='number'&&_0x24b0e3[_0x5039bd(0x6df)]>=0x0&&_0x24b0e3['color']<_0x2523fe[_0x5039bd(0x426)]?_0xcd2b65=_0x2523fe[_0x24b0e3[_0x5039bd(0x6df)]]:(this['logger'][_0x5039bd(0x723)](_0x5039bd(0x64d)+_0x24b0e3[_0x5039bd(0x6df)]),_0xcd2b65=_0x5039bd(0x7a4));let _0x5612c7={'_id':_0x24b0e3['id'],'colorHex':_0xcd2b65,'color':_0x24b0e3?.[_0x5039bd(0x6df)],'name':_0x24b0e3?.[_0x5039bd(0x410)],'owner':this[_0x5039bd(0x753)][_0x5039bd(0x6e4)]};await this['repository'][_0x5039bd(0x74d)]['updateOne']({'where':{'_id':_0x24b0e3['id']}},_0x5612c7,this[_0x5039bd(0x753)][_0x5039bd(0x6e4)]),this[_0x5039bd(0x39e)][_0x5039bd(0x11b)](this[_0x5039bd(0x653)]+'\x20('+this['instance']['wuid']+_0x5039bd(0x22b)+_0x24b0e3);}_0x24b0e3['deleted']&&(await this[_0x5039bd(0x210)][_0x5039bd(0x74d)][_0x5039bd(0x6ad)]({'where':{'_id':_0x24b0e3['id']}},this[_0x5039bd(0x753)][_0x5039bd(0x6e4)]),this[_0x5039bd(0x39e)][_0x5039bd(0x11b)](_0x5039bd(0x58d)+_0x24b0e3['id']));}},this['groupHandler']={'groups.upsert':async _0x148d8c=>{const _0x573ddc=_0x9c06c1;this[_0x573ddc(0x28f)]?.[_0x573ddc(0x26e)]||this[_0x573ddc(0x792)]('groups.upsert',_0x148d8c);for(let _0x5a31ba of _0x148d8c)await this[_0x573ddc(0x764)](_0x5a31ba);},'groups.update':async _0x15ff04=>{const _0x13b0fb=_0x9c06c1;this[_0x13b0fb(0x28f)]?.['groups_ignore']||this[_0x13b0fb(0x792)](_0x13b0fb(0x627),_0x15ff04);for(let _0x385507 of _0x15ff04)await this[_0x13b0fb(0x764)](_0x385507);},'group-participants.update':async _0x3d04cd=>{const _0x34c6d7=_0x9c06c1;this['localWebhook']?.['groups_ignore']||this[_0x34c6d7(0x792)]('group-participants.update',_0x3d04cd),await this[_0x34c6d7(0x1a7)](_0x3d04cd);}},this[_0x9c06c1(0x4b2)]=0x5,this[_0x9c06c1(0x1fd)]=0x1388,this[_0x9c06c1(0x6f9)]=async _0x3c42af=>{const _0x363d8b=_0x9c06c1;if(_0x3c42af[_0x363d8b(0x33a)]?.['pollUpdateMessage']){let _0x52c62f=await this['getMessage'](_0x3c42af[_0x363d8b(0x33a)]['pollUpdateMessage'][_0x363d8b(0x4a0)],!0x0);if(_0x52c62f){let _0x22c85e=_0x52c62f['key']['fromMe']?this['instance'][_0x363d8b(0x6e4)]+_0x363d8b(0x561):_0x52c62f['key'][_0x363d8b(0x83)]||_0x52c62f[_0x363d8b(0x2d1)][_0x363d8b(0x6a8)],_0x21f61b=_0x52c62f['key']['id'],_0x27316d=_0x52c62f['message'],_0xf17b88=Buffer[_0x363d8b(0x27b)](_0x27316d['messageContextInfo']['messageSecret'][_0x363d8b(0x2c5)](_0x363d8b(0xd7)),_0x363d8b(0xd7)),_0x386e6c=(0x0,w[_0x363d8b(0x602)])(_0x3c42af[_0x363d8b(0x33a)][_0x363d8b(0xc6)]['vote'],{'pollCreatorJid':_0x22c85e,'pollMsgId':_0x21f61b,'pollEncKey':_0xf17b88,'voterJid':_0x3c42af[_0x363d8b(0x2d1)][_0x363d8b(0x2b5)]?this[_0x363d8b(0x753)][_0x363d8b(0x6e4)]+_0x363d8b(0x561):_0x3c42af[_0x363d8b(0x2d1)]['remoteJid'][_0x363d8b(0x78)](_0x363d8b(0xa1))?_0x3c42af[_0x363d8b(0x2d1)][_0x363d8b(0x83)]:_0x3c42af['key']['remoteJid']}),_0x4d1482=[],_0x426f14=_0x386e6c[_0x363d8b(0x36d)][_0x363d8b(0x3c4)](_0x252ab3=>Buffer[_0x363d8b(0x27b)](_0x252ab3)['toString'](_0x363d8b(0xd7)));for(let {optionName:_0x4b461b}of _0x27316d['pollCreationMessage']?.[_0x363d8b(0x726)]||_0x27316d['pollCreationMessageV3']?.[_0x363d8b(0x726)]||_0x27316d[_0x363d8b(0x2eb)]?.[_0x363d8b(0x726)])_0x426f14[_0x363d8b(0xd9)]((0x0,w['sha256'])(Buffer[_0x363d8b(0x27b)](_0x4b461b))[_0x363d8b(0x2c5)](_0x363d8b(0xd7)))>-0x1&&_0x4d1482[_0x363d8b(0x5ee)](_0x4b461b);return _0x4d1482;}}return null;},this[_0x9c06c1(0x3a4)]=(_0x1f0169,_0x6cbcf,_0x596420)=>{const _0x4a36f8=_0x9c06c1;try{let _0x587e58=_0x1f0169?(0x0,w['extractMessageContent'])(_0x1f0169)[_0x6cbcf]:void 0x0,_0x501f07={},_0x79c62d=null,_0x302711=null,_0x1794dc=null;_0x6cbcf===_0x4a36f8(0x58f)&&_0x587e58?.[_0x4a36f8(0xa0)]&&(_0x6cbcf=(0x0,w[_0x4a36f8(0x8c)])(_0x587e58[_0x4a36f8(0xa0)]),_0x79c62d=_0x1f0169[_0x4a36f8(0x58f)]['key']['id'],_0x587e58=_0x1f0169[_0x4a36f8(0x58f)]['editedMessage'][_0x6cbcf]),_0x1f0169[_0x6cbcf]?.[_0x4a36f8(0x785)]?.[_0x4a36f8(0x1ee)]&&_0x1f0169[_0x6cbcf]?.[_0x4a36f8(0x785)]?.['quotedMessage']&&(_0x302711=_0x1f0169[_0x6cbcf][_0x4a36f8(0x785)][_0x4a36f8(0x1ee)]),_0x1f0169[_0x4a36f8(0x514)]&&(_0x1794dc=_0x1f0169[_0x4a36f8(0x514)][_0x4a36f8(0x2d1)]['id']);let _0x574653;if(_0x587e58&&typeof _0x587e58==_0x4a36f8(0x41e)&&'pollCreationMessageKey'in _0x587e58&&({pollCreationMessageKey:_0x574653}=_0x587e58),_0x6cbcf===_0x4a36f8(0x32e)||_0x6cbcf===_0x4a36f8(0x2eb)||_0x6cbcf===_0x4a36f8(0x258)){let _0x5deda0=_0x587e58['options']['map'](_0xc389be=>_0xc389be[_0x4a36f8(0x56b)])[_0x4a36f8(0x114)]('|');_0x501f07[_0x4a36f8(0x5d2)]=_0x5deda0;}let _0x332872='';if(_0x587e58&&(_0x332872+=_0x587e58[_0x4a36f8(0x410)]?_0x587e58[_0x4a36f8(0x410)]:'',_0x332872+=_0x587e58['caption']?'\x20'+_0x587e58[_0x4a36f8(0x454)]:'',_0x332872+=_0x587e58['conversation']?'\x20'+_0x587e58['conversation']:'',_0x332872+=_0x587e58[_0x4a36f8(0x654)]?'\x20'+_0x587e58[_0x4a36f8(0x654)]:''),_0x6cbcf===_0x4a36f8(0x5a8)){_0x332872=(_0x587e58['title']||'')+'\x0a'+(_0x587e58[_0x4a36f8(0x48c)]||'')+'\x0a'+(_0x587e58[_0x4a36f8(0x681)]||'');let _0x28d435=this['sectionsToString'](_0x587e58[_0x4a36f8(0x51e)]);_0x501f07[_0x4a36f8(0x5d2)]=_0x28d435;}if(_0x6cbcf===_0x4a36f8(0x560)&&(_0x596420=_0x587e58[_0x4a36f8(0x5d8)]),_0x587e58&&_0x587e58[_0x4a36f8(0x2a1)]){let _0x362f48=this['formatVCard'](JSON[_0x4a36f8(0x718)](_0x587e58['vcard'],null,0x2));_0x332872=_0x332872+'\x0a'+_0x362f48;}if(_0x587e58){let {sections:_0x594353,listType:_0x528a22,displayName:_0xfe92b8,vcard:_0x2b40bb,contactVcard:_0x13cdd3,name:_0x2eceed,caption:_0x2100ae,conversation:_0x381da2,pollCreationMessageKey:_0x126915,footerText:_0x1a1872,contentText:_0x1e541e,pageCount:_0x1aacc3,headerType:_0x10ff78,isAvatar:_0x48e427,isAnimated:_0x400ec9,fallbackLc:_0x439c08,fallbackLg:_0x4736e5,namespace:_0x405dac,elementName:_0x4621db,localizableParams:_0x4fbe35,viewOnce:_0x1c5b62,height:_0x4d295b,width:_0x55b311,key:_0x557913,firstScanLength:_0x24ff85,firstScanSidecar:_0x1a4619,gifPlayback:_0x40a108,gifAttribution:_0xeaffd6,midQualityFileSha256:_0x4525ac,scansSidecar:_0x3795cd,streamingSidecar:_0x1114e6,thumbnailHeight:_0x23edf7,thumbnailWidth:_0xaf210a,thumbnailEncSha256:_0x2b772b,thumbnailDirectPath:_0x45d1cc,canonicalUrl:_0x38e702,matchedText:_0x4e1366,previewType:_0x38327e,thumbnailSha256:_0x50fd6a,deviceListMetadataVersion:_0x4b5e20,inviteLinkGroupTypeV2:_0x5074b4,interactiveAnnotations:_0x32db1b,scanLengths:_0x5be5eb,jpegThumbnail:_0x24d6dc,url:_0x1fcdd3,mediaKeyTimestamp:_0x571510,waveform:_0x31ec1c,stickerSentTs:_0x364600,firstFrameLength:_0x376a1b,fileEncSha256:_0x1ac05d,contextInfo:_0x44a658,firstFrameSidecar:_0x4aa26b,directPath:_0x111504,fileSha256:_0x10d77f,mediaKey:_0x4db9c0,senderTimestampMs:_0x546fd7,..._0x4430f7}=_0x587e58;(_0x6cbcf==='listMessage'||_0x6cbcf==='listResponseMessage')&&(delete _0x4430f7['title'],delete _0x4430f7[_0x4a36f8(0x48c)]),typeof _0x587e58==_0x4a36f8(0x615)?_0x501f07={'text':_0x587e58,'type':_0x6cbcf||_0x4a36f8(0x142),..._0x79c62d&&{'edited':_0x79c62d},..._0x302711&&{'quoted':_0x302711},..._0x1794dc&&{'reaction':_0x1794dc}}:_0x501f07={'text':_0x332872,..._0x4430f7,..._0x6cbcf===_0x4a36f8(0xc6)?{'poll_id':_0x587e58[_0x4a36f8(0x4a0)]['id'],'quoted':_0x587e58[_0x4a36f8(0x4a0)]['id'],'vote':_0x596420}:{},..._0x6cbcf===_0x4a36f8(0x560)?{'vote':_0x596420}:{},'type':_0x6cbcf,..._0x79c62d&&{'edited':_0x79c62d},..._0x302711&&{'quoted':_0x302711},..._0x1794dc&&{'reaction':_0x1794dc},...(_0x6cbcf===_0x4a36f8(0x32e)||_0x6cbcf===_0x4a36f8(0x2eb)||_0x6cbcf===_0x4a36f8(0x258)||_0x6cbcf===_0x4a36f8(0x5a8))&&{'convertedOptions':_0x501f07['convertedOptions']}};}return{'messageType':_0x6cbcf,'messageContent':_0x587e58,'message_normalized':_0x501f07};}catch(_0x5eda1b){return this['logger'][_0x4a36f8(0x723)]('Erro\x20ao\x20normalizar\x20a\x20mensagem:'+_0x5eda1b),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this[_0x9c06c1(0x119)]=[],this['nextMessageId']=null,this[_0x9c06c1(0x1d5)]=null,(this[_0x9c06c1(0x70c)](),this[_0x9c06c1(0x753)]['qrcode']={'count':0x0},this[_0x9c06c1(0x753)][_0x9c06c1(0x69c)]={'isConnected':!0x1,'delayMessage':null,'processingGroup_id':null,'lastSend':0x0,'timeout':null,'lastMessage_id':null});}set[a0_0x37fa70(0x653)](_0x2ee940){const _0x47fd05=a0_0x37fa70;if(!_0x2ee940){this[_0x47fd05(0x753)][_0x47fd05(0x410)]=(0x0,xi['v4'])();return;}this[_0x47fd05(0x753)][_0x47fd05(0x410)]=_0x2ee940,this[_0x47fd05(0x792)](_0x47fd05(0x137),{'instance':this[_0x47fd05(0x753)][_0x47fd05(0x410)],'status':_0x47fd05(0x47d)});}get[a0_0x37fa70(0x653)](){const _0x182d7a=a0_0x37fa70;return this[_0x182d7a(0x753)][_0x182d7a(0x410)];}get[a0_0x37fa70(0x6e4)](){const _0x367249=a0_0x37fa70;return this[_0x367249(0x753)][_0x367249(0x6e4)];}async['getProfileName'](){const _0x46137a=a0_0x37fa70;let _0x5b967b=this[_0x46137a(0x688)][_0x46137a(0x19d)]?.[_0x46137a(0x410)]??this[_0x46137a(0x688)][_0x46137a(0x19d)]?.['verifiedName'];if(!_0x5b967b){if(this[_0x46137a(0x763)][_0x46137a(0x7b6)](_0x46137a(0x796))[_0x46137a(0x464)]){let _0x5af52=await A['getClient']()['db'](this[_0x46137a(0x763)][_0x46137a(0x7b6)](_0x46137a(0x796))[_0x46137a(0x66d)][_0x46137a(0x12f)]+_0x46137a(0x2d3))[_0x46137a(0x350)](this[_0x46137a(0x653)])[_0x46137a(0x1e2)]({'_id':_0x46137a(0x5f7)});if(_0x5af52){let _0x9b0037=JSON['parse'](JSON[_0x46137a(0x718)](_0x5af52),w[_0x46137a(0x49b)][_0x46137a(0x498)]);_0x5b967b=_0x9b0037['me']?.['name']||_0x9b0037['me']?.['verifiedName'];}}else{if((0x0,Le[_0x46137a(0x502)])((0x0,J['join'])(Ce,this[_0x46137a(0x653)],_0x46137a(0x1c7)))){let _0xfc5fd5=JSON['parse']((0x0,Le['readFileSync'])((0x0,J['join'])(Ce,this[_0x46137a(0x653)],_0x46137a(0x1c7)),{'encoding':_0x46137a(0x73d)}));_0x5b967b=_0xfc5fd5['me']?.[_0x46137a(0x410)]||_0xfc5fd5['me']?.[_0x46137a(0x5fb)];}}}return _0x5b967b;}get[a0_0x37fa70(0x434)](){const _0x5de93a=a0_0x37fa70;return this[_0x5de93a(0x753)][_0x5de93a(0x434)];}get[a0_0x37fa70(0x474)](){const _0x476719=a0_0x37fa70;return this['instance']['qrcode']?.[_0x476719(0x21e)]?{'pairingCode':this['instance']['qrcode']?.[_0x476719(0x21e)]}:{'code':this['instance'][_0x476719(0x3f2)]?.[_0x476719(0x395)],'base64':this[_0x476719(0x753)][_0x476719(0x3f2)]?.[_0x476719(0xf5)]};}async[a0_0x37fa70(0x2e7)](){const _0x4bdd64=a0_0x37fa70;let _0xef5da3=await this[_0x4bdd64(0x210)]['webhook'][_0x4bdd64(0x3b4)](this[_0x4bdd64(0x653)]);this['localWebhook'][_0x4bdd64(0x75c)]=_0xef5da3?.[_0x4bdd64(0x75c)],this[_0x4bdd64(0x28f)][_0x4bdd64(0x104)]=_0xef5da3?.['enabled'],this['localWebhook']['local_map']=_0xef5da3?.['local_map'],this[_0x4bdd64(0x28f)][_0x4bdd64(0x112)]=_0xef5da3?.[_0x4bdd64(0x112)],this['localWebhook'][_0x4bdd64(0x68c)]=_0xef5da3?.[_0x4bdd64(0x68c)],this[_0x4bdd64(0x28f)][_0x4bdd64(0x483)]=_0xef5da3?.[_0x4bdd64(0x483)],this[_0x4bdd64(0x28f)][_0x4bdd64(0x1b5)]=_0xef5da3?.[_0x4bdd64(0x1b5)],this[_0x4bdd64(0x28f)]['MESSAGES_UPDATE']=_0xef5da3?.['MESSAGES_UPDATE'],this[_0x4bdd64(0x28f)][_0x4bdd64(0x191)]=_0xef5da3?.['GROUPS_UPSERT'],this[_0x4bdd64(0x28f)][_0x4bdd64(0x659)]=_0xef5da3?.['GROUPS_UPDATE'],this[_0x4bdd64(0x28f)]['GROUP_PARTICIPANTS_UPDATE']=_0xef5da3?.['GROUP_PARTICIPANTS_UPDATE'],this['localWebhook']['CHATS_SET']=_0xef5da3?.['CHATS_SET'],this[_0x4bdd64(0x28f)]['CHATS_UPSERT']=_0xef5da3?.[_0x4bdd64(0x476)],this[_0x4bdd64(0x28f)][_0x4bdd64(0x382)]=_0xef5da3?.[_0x4bdd64(0x382)],this['localWebhook'][_0x4bdd64(0x503)]=_0xef5da3?.[_0x4bdd64(0x503)],this[_0x4bdd64(0x28f)][_0x4bdd64(0x455)]=_0xef5da3?.[_0x4bdd64(0x455)],this[_0x4bdd64(0x28f)][_0x4bdd64(0x570)]=_0xef5da3?.['CONTACTS_UPSERT'],this[_0x4bdd64(0x28f)][_0x4bdd64(0x57b)]=_0xef5da3?.['CONTACTS_UPDATE'],this[_0x4bdd64(0x28f)][_0x4bdd64(0x643)]=_0xef5da3?.[_0x4bdd64(0x643)],this[_0x4bdd64(0x28f)][_0x4bdd64(0x437)]=_0xef5da3?.[_0x4bdd64(0x437)],this[_0x4bdd64(0x28f)][_0x4bdd64(0x3e5)]=_0xef5da3?.[_0x4bdd64(0x3e5)],this['localWebhook'][_0x4bdd64(0x26e)]=_0xef5da3?.['groups_ignore'];}async[a0_0x37fa70(0x131)](_0x2af9a9){const _0x5c1fbd=a0_0x37fa70;let _0x5b0a07=['_id',_0x5c1fbd(0x75c),'enabled',_0x5c1fbd(0x298),_0x5c1fbd(0x112),'QRCODE_UPDATED',_0x5c1fbd(0x60a),_0x5c1fbd(0x1b5),'SEND_MESSAGE',_0x5c1fbd(0x191),'GROUPS_UPDATE',_0x5c1fbd(0x7cf),'CHATS_SET',_0x5c1fbd(0x476),_0x5c1fbd(0x382),'CHATS_DELETE',_0x5c1fbd(0x455),_0x5c1fbd(0x570),_0x5c1fbd(0x57b),_0x5c1fbd(0x643),_0x5c1fbd(0x437),'CONNECTION_UPDATE',_0x5c1fbd(0x26e)],_0x1764a8={};return _0x5b0a07[_0x5c1fbd(0x4b7)](_0x501e57=>{_0x2af9a9[_0x501e57]!==void 0x0&&(_0x1764a8[_0x501e57]=_0x2af9a9[_0x501e57]);}),_0x1764a8[_0x5c1fbd(0x75c)]&&(_0x1764a8[_0x5c1fbd(0x75c)]=_0x1764a8[_0x5c1fbd(0x75c)][_0x5c1fbd(0x6ba)]()),await this[_0x5c1fbd(0x210)][_0x5c1fbd(0x18c)][_0x5c1fbd(0x31e)](_0x1764a8,this[_0x5c1fbd(0x653)]),Object[_0x5c1fbd(0x4f8)](this[_0x5c1fbd(0x28f)],_0x1764a8),await this[_0x5c1fbd(0x210)]['webhook']['find'](this[_0x5c1fbd(0x653)]);}async['findWebhook'](){const _0x4d02d6=a0_0x37fa70;return await this[_0x4d02d6(0x210)][_0x4d02d6(0x18c)]['find'](this['instanceName']);}async[a0_0x37fa70(0x792)](_0x1ef607,_0x583924){const _0x2c78f5=a0_0x37fa70;let _0x3370cf=_0x1ef607[_0x2c78f5(0x2e9)](/[\.-]/gm,'_')[_0x2c78f5(0x103)](),_0x13a2c5=this[_0x2c78f5(0x28f)][_0x2c78f5(0x104)]&&(0x0,L[_0x2c78f5(0xc8)])(this[_0x2c78f5(0x28f)][_0x2c78f5(0x75c)])?this[_0x2c78f5(0x28f)]['url']+(this['localWebhook'][_0x2c78f5(0x298)]?this['webhookMap'][_0x1ef607]:''):null,_0x5a8118=this[_0x2c78f5(0x28f)][_0x3370cf],_0x178369=fe&&fe[_0x2c78f5(0x104)]&&(0x0,L[_0x2c78f5(0xc8)])(fe[_0x2c78f5(0x75c)])?fe['url']+(fe[_0x2c78f5(0x298)]?this[_0x2c78f5(0x6ed)][_0x1ef607]:''):null,_0x3a4263=fe?fe[_0x3370cf]:null;if(_0x5a8118&&_0x13a2c5)try{await Z[_0x2c78f5(0x259)]['create']({'baseURL':_0x13a2c5})['post']('',{'event':_0x1ef607,'instance':this[_0x2c78f5(0x753)]['name'],'apikey':this[_0x2c78f5(0x753)][_0x2c78f5(0x5f8)],'data':_0x583924}),this[_0x2c78f5(0x39e)][_0x2c78f5(0xec)](this[_0x2c78f5(0x653)]+'\x20('+this[_0x2c78f5(0x753)][_0x2c78f5(0x6e4)]+_0x2c78f5(0x56d)+_0x1ef607+':\x20'+_0x13a2c5);}catch{this['logger'][_0x2c78f5(0x723)](this[_0x2c78f5(0x653)]+'\x20('+this[_0x2c78f5(0x753)]['wuid']+_0x2c78f5(0x5eb)+_0x1ef607+':\x20'+_0x13a2c5);}if(_0x3a4263&&_0x178369)try{await Z['default'][_0x2c78f5(0x31e)]({'baseURL':_0x178369})['post']('',{'event':_0x1ef607,'instance':this[_0x2c78f5(0x753)][_0x2c78f5(0x410)],'apikey':this[_0x2c78f5(0x753)]['apikey'],'data':_0x583924}),this['logger'][_0x2c78f5(0xec)](this[_0x2c78f5(0x653)]+'\x20('+this[_0x2c78f5(0x753)][_0x2c78f5(0x6e4)]+_0x2c78f5(0xb7)+_0x1ef607+':\x20'+_0x178369);}catch{this[_0x2c78f5(0x39e)]['error'](this[_0x2c78f5(0x653)]+'\x20('+this[_0x2c78f5(0x753)][_0x2c78f5(0x6e4)]+_0x2c78f5(0x109)+_0x1ef607+':\x20'+_0x178369);}}async[a0_0x37fa70(0x55a)]({qr:_0xb12ad4,connection:_0x1724fe,lastDisconnect:_0x589e37,receivedPendingNotifications:_0x2b9b14}){const _0x1c00a6=a0_0x37fa70;if(_0xb12ad4){if(this[_0x1c00a6(0x753)]['qrcode']['count']===jo)return this[_0x1c00a6(0x792)]('qrcode.updated',{'message':_0x1c00a6(0x1fe),'statusCode':w['DisconnectReason'][_0x1c00a6(0x286)]}),this[_0x1c00a6(0x1e6)]={'state':_0x1c00a6(0x1e8),'statusReason':w['DisconnectReason'][_0x1c00a6(0x2e0)]},this[_0x1c00a6(0x792)](_0x1c00a6(0xd3),{'instance':this[_0x1c00a6(0x753)]['name'],...this[_0x1c00a6(0x1e6)]}),this[_0x1c00a6(0x792)](_0x1c00a6(0x137),{'instance':this['instance'][_0x1c00a6(0x410)],'status':'removed'}),this[_0x1c00a6(0x210)][_0x1c00a6(0x186)][_0x1c00a6(0x6ad)](this[_0x1c00a6(0x753)][_0x1c00a6(0x410)]),this[_0x1c00a6(0x6b7)]=!0x0,me[_0x1c00a6(0x594)](ee,this['instance']['name']),this[_0x1c00a6(0xfb)][_0x1c00a6(0x20a)](_0x1c00a6(0x3b6),this[_0x1c00a6(0x753)]['name']);this[_0x1c00a6(0x753)][_0x1c00a6(0x3f2)][_0x1c00a6(0x6ae)]++;let _0x1c14f6={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':'#ffffff','dark':_0x1c00a6(0x7a4)}};Di['default']['toDataURL'](_0xb12ad4,_0x1c14f6,(_0x2a0f26,_0x1ec498)=>{const _0x3d9426=_0x1c00a6;if(_0x2a0f26){this[_0x3d9426(0x39e)][_0x3d9426(0x723)](this[_0x3d9426(0x653)]+'\x20('+this[_0x3d9426(0x753)][_0x3d9426(0x6e4)]+_0x3d9426(0x343)+(_0x2a0f26 instanceof Error?_0x2a0f26[_0x3d9426(0x33a)]:JSON[_0x3d9426(0x718)](_0x2a0f26,null,0x2)));return;}this[_0x3d9426(0x753)][_0x3d9426(0x3f2)][_0x3d9426(0xf5)]=_0x1ec498,this[_0x3d9426(0x753)]['qrcode']['code']=_0xb12ad4,!this[_0x3d9426(0x181)]&&this[_0x3d9426(0x792)](_0x3d9426(0x7a8),{'qrcode':{'instance':this[_0x3d9426(0x753)][_0x3d9426(0x410)],'pairingCode':this[_0x3d9426(0x753)][_0x3d9426(0x3f2)][_0x3d9426(0x21e)],'code':_0xb12ad4,'base64':_0x1ec498}});}),this['phoneNumber']?this[_0x1c00a6(0x753)][_0x1c00a6(0x3f2)][_0x1c00a6(0x21e)]||(await(0x0,w[_0x1c00a6(0xb9)])(0x7d0),this[_0x1c00a6(0x753)][_0x1c00a6(0x3f2)][_0x1c00a6(0x21e)]=await this[_0x1c00a6(0x688)][_0x1c00a6(0x1f6)](this[_0x1c00a6(0x181)])):this[_0x1c00a6(0x753)]['qrcode'][_0x1c00a6(0x21e)]=null,Pi[_0x1c00a6(0x259)]['generate'](_0xb12ad4,{'small':!0x0},_0x2d0857=>this[_0x1c00a6(0x39e)]['log'](_0x1c00a6(0x5a0)+this[_0x1c00a6(0x753)][_0x1c00a6(0x410)]+_0x1c00a6(0x5a4)+this[_0x1c00a6(0x753)][_0x1c00a6(0x3f2)]['count']+_0x1c00a6(0x357)+this[_0x1c00a6(0x753)]['qrcode'][_0x1c00a6(0x21e)]+_0x1c00a6(0x4d1)+_0x2d0857));}if(_0x1724fe&&(this[_0x1c00a6(0x1e6)]={'state':_0x1724fe,'statusReason':_0x589e37?.[_0x1c00a6(0x723)]?.[_0x1c00a6(0x451)]?.[_0x1c00a6(0x60d)]??0xc8},this[_0x1c00a6(0x792)]('connection.update',{'instance':this[_0x1c00a6(0x753)][_0x1c00a6(0x410)],...this['stateConnection']})),_0x1724fe===_0x1c00a6(0x380)){if(this[_0x1c00a6(0x4ac)]++,this[_0x1c00a6(0x636)][_0x1c00a6(0x5ee)](Date[_0x1c00a6(0x5cf)]()),this[_0x1c00a6(0x636)]=this['reconnectTimestamps'][_0x1c00a6(0x1c2)](_0x5163d1=>Date['now']()-_0x5163d1<this[_0x1c00a6(0x4f2)]),_0x589e37[_0x1c00a6(0x723)]?.[_0x1c00a6(0x451)]?.['statusCode']!==w[_0x1c00a6(0x3d1)][_0x1c00a6(0x44e)]){let _0x13c680=this[_0x1c00a6(0x4ac)]<=0x1?0x0:Math['min'](Math[_0x1c00a6(0x69a)](0x2,this[_0x1c00a6(0x4ac)]-0x1)*0x3e8,0x493e0);console[_0x1c00a6(0xec)](this[_0x1c00a6(0x653)]+_0x1c00a6(0x2d8)+this[_0x1c00a6(0x4ac)]+_0x1c00a6(0x1ab)+_0x13c680/0x3e8+_0x1c00a6(0x76)),await new Promise(_0x31e2ba=>setTimeout(_0x31e2ba,_0x13c680)),console[_0x1c00a6(0xec)](_0x1c00a6(0x436)),await this[_0x1c00a6(0x3b7)]();}else{this[_0x1c00a6(0x792)](_0x1c00a6(0x137),{'instance':this[_0x1c00a6(0x753)][_0x1c00a6(0x410)],'status':'removed'}),this[_0x1c00a6(0x753)]['ScheduleMessage'][_0x1c00a6(0x17b)]=!0x1,this[_0x1c00a6(0x210)]['webhook'][_0x1c00a6(0x6ad)](this['instanceName']),this[_0x1c00a6(0x210)][_0x1c00a6(0x186)][_0x1c00a6(0x31e)]({'owner':'','online':!0x1,'lastDisconnect':Date['now']()},this[_0x1c00a6(0x753)][_0x1c00a6(0x410)]),me[_0x1c00a6(0x594)](ee,this[_0x1c00a6(0x753)][_0x1c00a6(0x410)]);try{this[_0x1c00a6(0x39e)][_0x1c00a6(0x48f)](this[_0x1c00a6(0x653)]+'\x20('+this[_0x1c00a6(0x753)][_0x1c00a6(0x6e4)]+'):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...');let _0x30be8a=await this[_0x1c00a6(0x210)]['message'][_0x1c00a6(0x79b)](this[_0x1c00a6(0x753)][_0x1c00a6(0x6e4)]);_0x30be8a[_0x1c00a6(0x630)]?this['logger'][_0x1c00a6(0x48f)](this[_0x1c00a6(0x653)]+'\x20('+this[_0x1c00a6(0x753)][_0x1c00a6(0x6e4)]+_0x1c00a6(0xf1)):this[_0x1c00a6(0x39e)][_0x1c00a6(0x723)]('Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20'+_0x30be8a[_0x1c00a6(0x723)]);}catch(_0x4ac4c8){this[_0x1c00a6(0x39e)][_0x1c00a6(0x723)](_0x1c00a6(0x689)+_0x4ac4c8[_0x1c00a6(0x33a)]);}this[_0x1c00a6(0x753)][_0x1c00a6(0x69c)][_0x1c00a6(0x37f)]!==null&&(this[_0x1c00a6(0x39e)]['verbose'](this[_0x1c00a6(0x653)]+'\x20('+this[_0x1c00a6(0x753)][_0x1c00a6(0x6e4)]+'):\x20Limpando\x20delayMessage'),clearInterval(this[_0x1c00a6(0x753)][_0x1c00a6(0x69c)]['delayMessage']),this[_0x1c00a6(0x753)][_0x1c00a6(0x69c)]['delayMessage']=null),this[_0x1c00a6(0x39e)][_0x1c00a6(0x48f)](this['instanceName']+'\x20('+this[_0x1c00a6(0x753)][_0x1c00a6(0x6e4)]+_0x1c00a6(0x5d4)),this['AutomateSystem']=null,this[_0x1c00a6(0xfb)][_0x1c00a6(0x20a)](_0x1c00a6(0x378),this[_0x1c00a6(0x753)][_0x1c00a6(0x410)],_0x1c00a6(0x372)),this[_0x1c00a6(0x688)]?.['ws']?.[_0x1c00a6(0x380)](),this[_0x1c00a6(0x688)][_0x1c00a6(0x171)](new Error(_0x1c00a6(0x528)));}}if(_0x1724fe===_0x1c00a6(0x364)){this[_0x1c00a6(0x39e)][_0x1c00a6(0x71b)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20this.client.authState.creds?.myAppStateKeyId:\x20'+this[_0x1c00a6(0x688)][_0x1c00a6(0x269)][_0x1c00a6(0x5f7)]?.[_0x1c00a6(0x26c)]),this[_0x1c00a6(0x688)]['authState'][_0x1c00a6(0x5f7)]?.[_0x1c00a6(0x26c)]||(this['logger'][_0x1c00a6(0x71b)](this[_0x1c00a6(0x653)]+'\x20('+this[_0x1c00a6(0x753)][_0x1c00a6(0x6e4)]+_0x1c00a6(0x4d2)),this[_0x1c00a6(0x688)]['ev'][_0x1c00a6(0x456)]()),this[_0x1c00a6(0x3cd)],this[_0x1c00a6(0x753)][_0x1c00a6(0x6e4)]=this[_0x1c00a6(0x688)][_0x1c00a6(0x19d)]['id'][_0x1c00a6(0x2e9)](/:\d+/,'')[_0x1c00a6(0x2e9)](_0x1c00a6(0x561),''),this[_0x1c00a6(0x753)][_0x1c00a6(0x434)]=(await this[_0x1c00a6(0x172)](this[_0x1c00a6(0x753)][_0x1c00a6(0x6e4)]+'@s.whatsapp.net'))[_0x1c00a6(0x434)],this[_0x1c00a6(0x210)][_0x1c00a6(0x186)][_0x1c00a6(0x31e)]({'online':!0x0,'owner':this['instance'][_0x1c00a6(0x6e4)],'lastDisconnect':null},this[_0x1c00a6(0x753)][_0x1c00a6(0x410)]);let _0x1c354d=_0x1c00a6(0x571)+this[_0x1c00a6(0x753)][_0x1c00a6(0x6e4)],_0x52292f=0x28,_0x1b2d10=Math[_0x1c00a6(0x431)]((_0x52292f-_0x1c354d['length'])/0x2),_0x522230='\x20'[_0x1c00a6(0x798)](_0x1b2d10),_0x342fb9=_0x1c00a6(0x35e),_0x1fe228=_0x1c00a6(0x2b2)+this[_0x1c00a6(0x753)][_0x1c00a6(0x410)],_0x11e58a=(''+_0x522230+_0x1c354d+_0x522230)['padEnd'](_0x52292f,'\x20'),_0x3787e1=(''+_0x522230+_0x342fb9+_0x522230)['padEnd'](_0x52292f,'\x20'),_0x4c1520=(''+_0x522230+_0x1fe228+_0x522230)[_0x1c00a6(0x10c)](_0x52292f,'\x20'),_0x58953=Math[_0x1c00a6(0x453)](_0x11e58a[_0x1c00a6(0x426)],_0x3787e1[_0x1c00a6(0x426)],_0x4c1520[_0x1c00a6(0x426)]),_0x2ab693=_0x11e58a[_0x1c00a6(0x10c)](_0x58953,'\x20'),_0x39f792=_0x3787e1['padEnd'](_0x58953,'\x20'),_0x215002=_0x4c1520[_0x1c00a6(0x10c)](_0x58953,'\x20');this[_0x1c00a6(0x39e)][_0x1c00a6(0x11b)]((_0x1c00a6(0x598)+'─'['repeat'](_0x58953)+_0x1c00a6(0x333)+_0x39f792+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0x215002+_0x1c00a6(0x1bb)+_0x2ab693+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└'+'─'[_0x1c00a6(0x798)](_0x58953)+'┘')[_0x1c00a6(0x2e9)](/^ +/gm,'\x20\x20')),this[_0x1c00a6(0x6d8)](),this[_0x1c00a6(0x753)][_0x1c00a6(0x69c)]['isConnected']=!0x0;}}[a0_0x37fa70(0x3cd)](){const _0x4383bc=a0_0x37fa70;this[_0x4383bc(0x4ac)]=0x0,this[_0x4383bc(0x636)]=[];}async['getMessage'](_0x47c7b6,_0x16e4f7=!0x1){const _0x336468=a0_0x37fa70;try{let _0x5a1128=await this[_0x336468(0x210)][_0x336468(0x33a)][_0x336468(0x3b4)]({'where':{'_id':_0x47c7b6['id']}},this[_0x336468(0x753)][_0x336468(0x6e4)]);return _0x16e4f7?_0x5a1128[0x0]:_0x5a1128[0x0][_0x336468(0x33a)];}catch{return{'conversation':''};}}[a0_0x37fa70(0x70c)](){const _0x38fc51=a0_0x37fa70;let _0x567868=this[_0x38fc51(0x763)][_0x38fc51(0x7b6)]('STORE'),_0x28cd01=this[_0x38fc51(0x763)]['get'](_0x38fc51(0x796));_0x567868?.[_0x38fc51(0x2da)]&&!_0x28cd01[_0x38fc51(0x464)]&&setInterval(()=>{const _0x4d8222=_0x38fc51;try{for(let [_0x44b377,_0x24f0bd]of Object[_0x4d8222(0x491)](_0x567868))_0x24f0bd===!0x0&&(0x0,Ue[_0x4d8222(0x16f)])(_0x4d8222(0x250)+(0x0,J[_0x4d8222(0x114)])(this[_0x4d8222(0x75)],_0x44b377['toLowerCase'](),this[_0x4d8222(0x753)][_0x4d8222(0x6e4)])+'/*.json');}catch{}},(_0x567868?.[_0x38fc51(0x2da)]??0xe10)*0x3e8);}async[a0_0x37fa70(0x1f3)](){const _0x39e875=a0_0x37fa70;let _0x25d86b=this[_0x39e875(0x763)]['get']('DATABASE'),_0x49d248=this[_0x39e875(0x763)][_0x39e875(0x7b6)](_0x39e875(0x23c));return _0x49d248?.[_0x39e875(0x464)]?await xs(_0x49d248,this[_0x39e875(0x753)][_0x39e875(0x410)]):_0x25d86b['ENABLED']?await Os(this[_0x39e875(0x753)][_0x39e875(0x410)]):await(0x0,w[_0x39e875(0x58b)])((0x0,J[_0x39e875(0x114)])(Ce,this[_0x39e875(0x753)]['name']));}async[a0_0x37fa70(0x6d8)](){const _0x659d6d=a0_0x37fa70;let _0x3a2c95=()=>Math[_0x659d6d(0x431)](Math['random']()*0x4e21)+0x7d0,_0x4d4bae=async()=>{const _0x50d970=_0x659d6d;if(!this[_0x50d970(0x753)][_0x50d970(0x69c)][_0x50d970(0x17b)]){this[_0x50d970(0x39e)]['verbose'](this[_0x50d970(0x653)]+'\x20('+this[_0x50d970(0x753)][_0x50d970(0x6e4)]+_0x50d970(0x61e)),this[_0x50d970(0x61c)]=!0x1;return;}if(this[_0x50d970(0x753)][_0x50d970(0x6e4)]&&this[_0x50d970(0x1db)]&&this['instance'][_0x50d970(0x69c)]['delayMessage']!==null&&this['instance']['ScheduleMessage'][_0x50d970(0x37f)]!==void 0x0){let _0x9fd5c5=Math[_0x50d970(0x478)](this['instance'][_0x50d970(0x69c)][_0x50d970(0x37f)]/0xea60);this[_0x50d970(0x39e)][_0x50d970(0x48f)](this[_0x50d970(0x653)]+'\x20('+this[_0x50d970(0x753)][_0x50d970(0x6e4)]+'):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20'+_0x9fd5c5+_0x50d970(0x712)),this[_0x50d970(0x61c)]=!0x1;return;}else this[_0x50d970(0x753)][_0x50d970(0x6e4)]&&(this[_0x50d970(0x39e)][_0x50d970(0x48f)](this['instanceName']+'\x20('+this[_0x50d970(0x753)]['wuid']+_0x50d970(0x188)),this[_0x50d970(0x1db)]||(await this['getAutomateSystem'](),this['findGroups'](),this[_0x50d970(0x63e)]()),(this['instance'][_0x50d970(0x69c)]['delayMessage']===null||this[_0x50d970(0x753)][_0x50d970(0x69c)][_0x50d970(0x37f)]===void 0x0)&&await this[_0x50d970(0x715)]());if(this[_0x50d970(0x61c)]){let _0x4d0f4a=_0x3a2c95();this['logger'][_0x50d970(0x48f)](this[_0x50d970(0x653)]+':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20'+_0x4d0f4a/0x3e8+_0x50d970(0x289)),setTimeout(_0x4d4bae,_0x4d0f4a);}};if(this[_0x659d6d(0x61c)])return;this['isRunning']=!0x0;let _0x240acc=_0x3a2c95();setTimeout(_0x4d4bae,_0x240acc);}async[a0_0x37fa70(0x63e)](){const _0x197120=a0_0x37fa70;let _0x2468a9=this['instance'][_0x197120(0x6e4)];try{let _0x78bcaf=await this[_0x197120(0x210)][_0x197120(0x407)][_0x197120(0x14e)]({'where':{'$or':[{'owner':_0x2468a9},{'whoCanUse':{'$in':[_0x2468a9]}},{'shareOwners':{'$in':[_0x2468a9]}}]}}),_0x39d4cc=await this[_0x197120(0x210)][_0x197120(0x407)][_0x197120(0x14e)]({'where':{'$or':[{'owner':_0x197120(0x6d)},{'whoCanUse':{'$in':['global']}},{'shareOwners':{'$in':['global']}}]}});_0x39d4cc&&_0x39d4cc[_0x197120(0x426)]>0x0?this[_0x197120(0x39e)]['verbose'](this[_0x197120(0x653)]+'\x20('+this['instance'][_0x197120(0x6e4)]+_0x197120(0x6d0)):(await this['repository']['flow'][_0x197120(0x1da)](_0x197120(0x6d)),this[_0x197120(0x39e)]['verbose'](this[_0x197120(0x653)]+'\x20('+this[_0x197120(0x753)][_0x197120(0x6e4)]+'):\x20Fluxos\x20do\x20proprietário\x20\x27global\x27\x20transferidos\x20para\x20a\x20coleção\x20centralizada.')),_0x78bcaf&&_0x78bcaf['length']>0x0?this[_0x197120(0x39e)]['verbose'](this[_0x197120(0x653)]+'\x20('+this[_0x197120(0x753)][_0x197120(0x6e4)]+_0x197120(0x326)+_0x2468a9+_0x197120(0x336)):(await this[_0x197120(0x210)]['flow'][_0x197120(0x1da)](_0x2468a9),this[_0x197120(0x39e)][_0x197120(0x48f)](this[_0x197120(0x653)]+'\x20('+this[_0x197120(0x753)][_0x197120(0x6e4)]+'):\x20Fluxos\x20do\x20proprietário\x20\x27'+_0x2468a9+_0x197120(0x5cc)),_0x78bcaf=await this['repository'][_0x197120(0x407)][_0x197120(0x14e)]({'where':{'$or':[{'owner':_0x2468a9},{'whoCanUse':{'$in':[_0x2468a9]}},{'shareOwners':{'$in':[_0x2468a9]}}]}}));let _0x2cb3f1=new Map(this[_0x197120(0x1db)][_0x197120(0x59c)][_0x197120(0x3c4)](_0x1830a3=>[_0x1830a3[_0x197120(0x1b0)],_0x1830a3])),_0x21da81=_0x78bcaf[_0x197120(0x3c4)](_0x11c182=>{const _0x4cdc61=_0x197120;let _0x47f6f5=_0x2cb3f1['get'](_0x11c182[_0x4cdc61(0x1b0)]?.[_0x4cdc61(0x2c5)]());return{'_id':_0x11c182['_id']?.[_0x4cdc61(0x2c5)](),'name':_0x47f6f5?.['name']??_0x11c182[_0x4cdc61(0x410)],'default':_0x47f6f5?.[_0x4cdc61(0x259)]??_0x11c182['default']??!0x1,'startCommand':_0x47f6f5?.[_0x4cdc61(0x200)]??_0x11c182[_0x4cdc61(0x472)],'minutesToClose':_0x47f6f5?.[_0x4cdc61(0x6cf)]??_0x11c182['minutesToClose']??0xa,'readMessages':_0x47f6f5?.[_0x4cdc61(0x3eb)]??_0x11c182['readMessages']??!0x1,'testingWith':_0x47f6f5?.[_0x4cdc61(0x1cc)]??_0x11c182['testingWith'],'canEdit':_0x11c182[_0x4cdc61(0x5d3)]===_0x2468a9||(_0x11c182[_0x4cdc61(0x527)]??[])[_0x4cdc61(0x14a)](_0x2468a9),'usersCount':(_0x11c182[_0x4cdc61(0x77)]??[])['length']??0x0};}),_0x508860=!0x1;_0x21da81[_0x197120(0x4b7)](_0x256743=>{const _0x230454=_0x197120;_0x256743[_0x230454(0x259)]&&(_0x508860?_0x256743['default']=!0x1:_0x508860=!0x0);}),this[_0x197120(0x1db)][_0x197120(0x59c)]=_0x21da81;let _0x2c62d7={'flows':_0x21da81};return await this[_0x197120(0x210)][_0x197120(0x2f8)][_0x197120(0x6c8)](_0x2c62d7,_0x2468a9),this['logger'][_0x197120(0x48f)](this[_0x197120(0x653)]+'\x20('+_0x2468a9+_0x197120(0x32b)),_0x21da81['length'];}catch(_0x8c5112){return this[_0x197120(0x39e)][_0x197120(0x723)](this['instanceName']+'\x20('+_0x2468a9+_0x197120(0x8e)+(_0x8c5112 instanceof Error?_0x8c5112['message']:JSON[_0x197120(0x718)](_0x8c5112,null,0x2))),{'message':'Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20'+(_0x8c5112 instanceof Error?_0x8c5112[_0x197120(0x33a)]:JSON[_0x197120(0x718)](_0x8c5112,null,0x2))};}}async[a0_0x37fa70(0x3b7)](_0x29b841){const _0x410a32=a0_0x37fa70;try{let _0x34e7a1=await this['repository']['instance']['findOne']({'where':{'_id':ee+'-'+this['instanceName']}}),_0x2e66b1;console[_0x410a32(0xec)](_0x410a32(0x230)),console[_0x410a32(0xec)](_0x410a32(0x62e),_i),console[_0x410a32(0xec)](_0x410a32(0x235),this[_0x410a32(0x4ac)]),console[_0x410a32(0xec)](_0x410a32(0x230)),_i&&(this[_0x410a32(0x4ac)]<0x6||!this[_0x410a32(0x4ac)])&&(!me[_0x410a32(0x5d0)]||!me[_0x410a32(0x75b)]?(console[_0x410a32(0x723)]('IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.'),_0x2e66b1=void 0x0):_0x34e7a1&&_0x34e7a1['ip']?(_0x2e66b1=_0x34e7a1['ip'],console[_0x410a32(0xec)](_0x410a32(0x8d)+_0x2e66b1)):(_0x2e66b1=await me[_0x410a32(0x543)](ee,this[_0x410a32(0x753)][_0x410a32(0x410)]),_0x2e66b1?(console[_0x410a32(0xec)](_0x410a32(0x353)+_0x2e66b1),await(0x0,w[_0x410a32(0xb9)])(0x7d0)):console[_0x410a32(0x723)]('Falha\x20ao\x20criar\x20IPv6.'))),this[_0x410a32(0x2e7)](),this[_0x410a32(0x753)][_0x410a32(0x5f8)]=(await this[_0x410a32(0x210)][_0x410a32(0x186)][_0x410a32(0x3b4)](this[_0x410a32(0x753)][_0x410a32(0x410)]))[_0x410a32(0x5f8)],this[_0x410a32(0x753)]['authState']=await this[_0x410a32(0x1f3)]();let {version:_0x6b68a8}=await(0x0,w[_0x410a32(0x7e)])(),_0xfbac9d=[Fi,Us,(0x0,ks[_0x410a32(0x748)])()],_0x5d0dad={'localAddress':_0x2e66b1,'auth':{'creds':this[_0x410a32(0x753)][_0x410a32(0x269)][_0x410a32(0x68d)][_0x410a32(0x5f7)],'keys':(0x0,w[_0x410a32(0x128)])(this[_0x410a32(0x753)][_0x410a32(0x269)][_0x410a32(0x68d)]['keys'],(0x0,Jt['default'])({'level':'error'}))},'logger':(0x0,Jt[_0x410a32(0x259)])({'level':_0x410a32(0x723)}),'printQRInTerminal':!0x1,'browser':_0x29b841?[_0x410a32(0x1cb),Us,(0x0,ks[_0x410a32(0x748)])()]:_0xfbac9d,'version':_0x6b68a8,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'connectTimeoutMs':0xea60,'qrTimeout':0x9c40,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x3e8002=>{const _0x5d9f8e=_0x410a32;let _0x1db7ff=this[_0x5d9f8e(0x28f)]?.[_0x5d9f8e(0x26e)]&&(0x0,w[_0x5d9f8e(0x252)])(_0x3e8002);return(0x0,w[_0x5d9f8e(0x7cc)])(_0x3e8002)||_0x1db7ff;},'msgRetryCounterCache':this['msgRetryCounterCache'],'getMessage':async _0x394fc8=>await this[_0x410a32(0x1e7)](_0x394fc8),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x410a32(0x367)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending':_0x1597c7=>(_0x1597c7['listMessage']?.[_0x410a32(0x43d)]==w[_0x410a32(0x71)][_0x410a32(0xcd)]['ListMessage'][_0x410a32(0x3e7)][_0x410a32(0x739)]&&(_0x1597c7=JSON['parse'](JSON[_0x410a32(0x718)](_0x1597c7)),_0x1597c7[_0x410a32(0x5a8)][_0x410a32(0x43d)]=w[_0x410a32(0x71)][_0x410a32(0xcd)][_0x410a32(0x657)][_0x410a32(0x3e7)][_0x410a32(0x18a)]),_0x1597c7)};return this[_0x410a32(0x6b7)]=!0x1,this[_0x410a32(0x688)]=(0x0,w[_0x410a32(0x259)])(_0x5d0dad),this[_0x410a32(0x5e1)](),this[_0x410a32(0x181)]=_0x29b841,this[_0x410a32(0x688)];}catch(_0x2155dc){let _0x45449f=_0x410a32(0x2a9),_0x525d21=_0x2155dc instanceof Error?_0x2155dc[_0x410a32(0x33a)]:typeof _0x2155dc==_0x410a32(0x41e)?JSON[_0x410a32(0x718)](_0x2155dc):_0x2155dc,_0x2de8e7=_0x45449f+':\x20'+_0x525d21;throw this[_0x410a32(0x39e)]['error'](this[_0x410a32(0x653)]+'\x20('+this[_0x410a32(0x753)][_0x410a32(0x6e4)]+_0x410a32(0x17d)+_0x2de8e7),new x(_0x2de8e7);}}[a0_0x37fa70(0x5e1)](){const _0x4ac352=a0_0x37fa70;this[_0x4ac352(0x688)]['ev']['process'](_0x1ee611=>{const _0x27ca03=_0x4ac352;if(!this[_0x27ca03(0x6b7)]){let _0x5ca5b1=this[_0x27ca03(0x763)][_0x27ca03(0x7b6)](_0x27ca03(0x796));if(_0x1ee611[_0x27ca03(0x74e)]){let _0x31f35d=_0x1ee611[_0x27ca03(0x74e)];this[_0x27ca03(0x3a1)][_0x27ca03(0x74e)](_0x31f35d);}if(_0x1ee611[_0x27ca03(0x35c)]){let _0x1b3103=_0x1ee611[_0x27ca03(0x35c)];this['messageHandle'][_0x27ca03(0x35c)](_0x1b3103);}if(_0x1ee611[_0x27ca03(0xd3)]&&this[_0x27ca03(0x55a)](_0x1ee611[_0x27ca03(0xd3)]),_0x1ee611[_0x27ca03(0x1e1)]&&this[_0x27ca03(0x753)][_0x27ca03(0x269)]['saveCreds'](),_0x1ee611['messaging-history.set']){let _0x55f96b=_0x1ee611[_0x27ca03(0x777)];this[_0x27ca03(0x3a1)][_0x27ca03(0x777)](_0x55f96b,_0x5ca5b1);}if(_0x1ee611['messages.upsert']){let _0x1961d5=_0x1ee611[_0x27ca03(0x153)];this[_0x27ca03(0x3a1)]['messages.upsert'](_0x1961d5,_0x5ca5b1);}if(_0x1ee611[_0x27ca03(0x290)]){let _0x510cc4=_0x1ee611[_0x27ca03(0x290)];_0x510cc4[_0x27ca03(0x4b7)](_0x280bb8=>{const _0x46553f=_0x27ca03;if(Oi[_0x280bb8[_0x46553f(0x2d1)]['id']]){this[_0x46553f(0x688)]['ev'][_0x46553f(0x20a)]('messages.upsert',{'messages':[_0x280bb8],'type':_0x46553f(0x295)}),delete Oi[_0x280bb8['key']['id']];return;}}),this['messageHandle'][_0x27ca03(0x290)](_0x510cc4,_0x5ca5b1);}if(_0x1ee611[_0x27ca03(0x6e6)]){let _0x4e1744=_0x1ee611[_0x27ca03(0x6e6)];if(this[_0x27ca03(0x28f)]?.[_0x27ca03(0x26e)]&&_0x4e1744['id'][_0x27ca03(0x14a)](_0x27ca03(0x322)))return;this[_0x27ca03(0x792)]('presence.update',_0x4e1744);}if(_0x1ee611[_0x27ca03(0x107)]){let _0x29ddce=_0x1ee611[_0x27ca03(0x107)];this['groupHandler'][_0x27ca03(0x107)](_0x29ddce);}if(_0x1ee611['groups.update']){let _0x3e7d1d=_0x1ee611[_0x27ca03(0x627)];this[_0x27ca03(0x733)][_0x27ca03(0x627)](_0x3e7d1d);}if(_0x1ee611[_0x27ca03(0x77a)]){let _0x16a5b7=_0x1ee611['group-participants.update'];this[_0x27ca03(0x733)][_0x27ca03(0x77a)](_0x16a5b7);}if(_0x1ee611[_0x27ca03(0x3aa)]){let _0x532e13=_0x1ee611[_0x27ca03(0x3aa)];this[_0x27ca03(0x24b)]['chats.upsert'](_0x532e13,_0x5ca5b1);}if(_0x1ee611[_0x27ca03(0xb6)]){let _0x9f3c1a=_0x1ee611['chats.update'];this[_0x27ca03(0x24b)][_0x27ca03(0xb6)](_0x9f3c1a,_0x5ca5b1);}if(_0x1ee611[_0x27ca03(0x74)]){let _0x45ba3a=_0x1ee611[_0x27ca03(0x74)];this[_0x27ca03(0x24b)]['chats.delete'](_0x45ba3a);}if(_0x1ee611[_0x27ca03(0x57a)]){let _0x230256=_0x1ee611[_0x27ca03(0x57a)];this[_0x27ca03(0x1c3)][_0x27ca03(0x57a)](_0x230256,_0x5ca5b1);}if(_0x1ee611[_0x27ca03(0x781)]){let _0x25baee=_0x1ee611['contacts.update'];this[_0x27ca03(0x1c3)][_0x27ca03(0x781)](_0x25baee,_0x5ca5b1);}}});}[a0_0x37fa70(0x203)](_0x6126ae){return new Promise(_0x46322f=>setTimeout(_0x46322f,_0x6126ae));}[a0_0x37fa70(0x108)](_0x5f27){const _0x13979c=a0_0x37fa70;_0x5f27=_0x5f27[_0x13979c(0x2e9)](/\D/g,'');let _0x59d693=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x13979c(0x2d4)](_0x5f27);if(_0x59d693&&_0x59d693[0x1]==='55'){let _0x395b0c=_0x59d693[0x2],_0x17dd56=_0x59d693[0x3],_0x592f94=_0x59d693[0x4];if(parseInt(_0x395b0c)>=0x1f&&_0x17dd56==='9')return _0x59d693[0x1]+_0x395b0c+_0x592f94;}return _0x5f27;}['createJid'](_0x1ee65f){const _0x21cbdf=a0_0x37fa70;return _0x1ee65f[_0x21cbdf(0x14a)](_0x21cbdf(0x322))||_0x1ee65f[_0x21cbdf(0x14a)](_0x21cbdf(0x561))||_0x1ee65f['includes'](_0x21cbdf(0x50d))?_0x1ee65f:(_0x1ee65f=_0x1ee65f?.['replace'](/\s/g,'')['replace'](/\+/g,'')['replace'](/\(/g,'')['replace'](/\)/g,'')[_0x21cbdf(0x213)](/\:/)[0x0][_0x21cbdf(0x213)]('@')[0x0],_0x1ee65f[_0x21cbdf(0x426)]>=0x12?(_0x1ee65f=_0x1ee65f[_0x21cbdf(0x2e9)](/[^\d-]/g,''),_0x1ee65f+_0x21cbdf(0x322)):(_0x1ee65f=_0x1ee65f['replace'](/\D/g,''),_0x1ee65f+'@s.whatsapp.net'));}async[a0_0x37fa70(0x69f)](_0x585cc8){const _0x290aca=a0_0x37fa70;let _0x682c3f=(await this['whatsappNumber']({'numbers':[_0x585cc8[_0x290aca(0x3d7)]]}))[0x0];if(!_0x682c3f[_0x290aca(0x332)]&&!(0x0,w['isJidGroup'])(_0x682c3f[_0x290aca(0xb1)])&&!_0x682c3f[_0x290aca(0xb1)][_0x290aca(0x14a)](_0x290aca(0x50d)))throw new m(_0x682c3f);let _0x4f1ffc=_0x682c3f[_0x290aca(0xb1)];try{return await this[_0x290aca(0x688)][_0x290aca(0x386)](_0x4f1ffc),await this[_0x290aca(0x688)][_0x290aca(0x17e)](_0x585cc8[_0x290aca(0x190)],_0x4f1ffc),{'status':0xc8,'presence':_0x585cc8['presence']};}catch(_0x627c54){let _0x40e88f=_0x290aca(0x3c0),_0x319d6c=_0x627c54 instanceof Error?_0x627c54[_0x290aca(0x33a)]:typeof _0x627c54==_0x290aca(0x41e)?JSON[_0x290aca(0x718)](_0x627c54):_0x627c54,_0xa0c11f=_0x40e88f+':\x20'+_0x319d6c;throw this[_0x290aca(0x39e)]['error'](this['instanceName']+'\x20('+this[_0x290aca(0x753)][_0x290aca(0x6e4)]+_0x290aca(0x17d)+_0xa0c11f),new m(_0xa0c11f);}}async[a0_0x37fa70(0x95)](_0x758b2a,_0x5bf3b0,_0x39d4a3,_0x2592dc=!0x0){const _0xe3352=a0_0x37fa70;let _0x296346=await this[_0xe3352(0x210)][_0xe3352(0x5c6)][_0xe3352(0x1e2)]({'where':{'_id':_0x758b2a}});if(!_0x296346&&!_0x2592dc)return;let _0x308641={'lastUpdate':Date[_0xe3352(0x5cf)]()};if(_0x39d4a3||!_0x296346?.[_0xe3352(0x6f2)]||Date['now']()-_0x296346[_0xe3352(0x6f2)]>0x18*0x3c*0x3c*0x3e8)try{let _0x443637=(await this[_0xe3352(0x172)](_0x758b2a))[_0xe3352(0x434)];_0x308641[_0xe3352(0x21a)]=_0x443637;}catch(_0x2874f1){let _0x5ce3e0='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact',_0x3c641e=_0x2874f1 instanceof Error?_0x2874f1[_0xe3352(0x33a)]:typeof _0x2874f1==_0xe3352(0x41e)?JSON['stringify'](_0x2874f1):_0x2874f1,_0x5b4853=_0x5ce3e0+':\x20'+_0x3c641e;throw this['logger'][_0xe3352(0x723)](this[_0xe3352(0x653)]+'\x20('+this[_0xe3352(0x753)][_0xe3352(0x6e4)]+_0xe3352(0x17d)+_0x5b4853),new m(_0x5b4853);}return _0x5bf3b0&&_0x296346?.[_0xe3352(0x410)]!==_0x5bf3b0&&(_0x308641[_0xe3352(0x410)]=_0x5bf3b0),Object[_0xe3352(0x674)](_0x308641)[_0xe3352(0x426)]>0x1&&(_0x296346?await this[_0xe3352(0x210)][_0xe3352(0x5c6)][_0xe3352(0x6c8)]({'where':{'_id':_0x758b2a}},_0x308641):await this[_0xe3352(0x210)][_0xe3352(0x5c6)][_0xe3352(0x737)]([{'_id':_0x758b2a,..._0x308641}]),_0x296346={..._0x296346,..._0x308641}),{'cachedContact':_0x296346};}async['profilePicture'](_0x40739d){const _0x13fcc2=a0_0x37fa70;let _0x14e3c9=this[_0x13fcc2(0x342)](_0x40739d);try{return{'wuid':_0x14e3c9,'profilePictureUrl':await this['client'][_0x13fcc2(0x434)](_0x14e3c9,_0x13fcc2(0x1b2))};}catch{return{'wuid':_0x14e3c9,'profilePictureUrl':null};}}async[a0_0x37fa70(0x236)](_0xb4c6aa,_0x3dd5df,_0x39f5){const _0x2a2997=a0_0x37fa70;let _0x44cd97;try{let _0x6a561f=(await this['whatsappNumber']({'numbers':[_0xb4c6aa]}))[0x0];if(!_0x6a561f['exists']&&!(0x0,w['isJidGroup'])(_0x6a561f['jid'])&&!_0x6a561f[_0x2a2997(0xb1)]['includes'](_0x2a2997(0x50d)))throw new m(_0x6a561f);_0x44cd97=_0x6a561f[_0x2a2997(0xb1)];}catch(_0x507688){_0x44cd97=_0xb4c6aa,this[_0x2a2997(0x39e)][_0x2a2997(0x71b)](this[_0x2a2997(0x653)]+'\x20('+this[_0x2a2997(0x753)][_0x2a2997(0x6e4)]+_0x2a2997(0x57f)+_0x507688['message']),this[_0x2a2997(0x39e)][_0x2a2997(0x71b)](this['instanceName']+'\x20('+this['instance'][_0x2a2997(0x6e4)]+'):\x20sender\x20=\x20number:\x20'+_0x44cd97);}try{if(_0x44cd97||(_0x44cd97=_0xb4c6aa,this['logger']['warn'](this[_0x2a2997(0x653)]+'\x20('+this[_0x2a2997(0x753)]['wuid']+_0x2a2997(0x6e9)+_0x44cd97)),_0x39f5||(_0x39f5={}),_0x39f5?.[_0x2a2997(0xb9)]){await this[_0x2a2997(0x688)][_0x2a2997(0x386)](_0x44cd97),await this[_0x2a2997(0x688)][_0x2a2997(0x17e)](_0x39f5?.['presence']??'composing',_0x44cd97);let _0x274ec7=Math[_0x2a2997(0x6e)](_0x39f5['delay'],0x2710);await(0x0,w['delay'])(_0x274ec7),await this['client'][_0x2a2997(0x17e)](_0x2a2997(0x583),_0x44cd97);}let _0x1db349=_0x39f5?.[_0x2a2997(0x761)]!=!0x1?void 0x0:!0x1,_0x396f62;if(_0x39f5?.['quoted']){let _0x114f8b=_0x39f5?.['quoted'],_0x29e82c=_0x114f8b?.[_0x2a2997(0x33a)]?_0x114f8b:await this[_0x2a2997(0x1e7)](_0x114f8b[_0x2a2997(0x2d1)],!0x0);if(!_0x29e82c)throw _0x2a2997(0x4ae);_0x396f62=_0x29e82c;}let _0x56e15e;if((0x0,w['isJidGroup'])(_0x44cd97))try{let _0x4f1d80=(await this['repository']['chat'][_0x2a2997(0x1e2)]({'where':{'_id':_0x44cd97}},this[_0x2a2997(0x753)][_0x2a2997(0x6e4)]))['groupdata'];if(!_0x4f1d80)throw new V('Group\x20not\x20found');_0x39f5?.['mentions']&&(_0x39f5['mentions']?.[_0x2a2997(0x707)]?_0x56e15e=_0x4f1d80[_0x2a2997(0x6a0)][_0x2a2997(0x3c4)](_0x5ce869=>_0x5ce869['id']):_0x39f5[_0x2a2997(0x158)]?.['mentioned']?.[_0x2a2997(0x426)]&&(_0x56e15e=_0x39f5[_0x2a2997(0x158)][_0x2a2997(0x2cd)]['map'](_0xc95c54=>{let _0x43bf7b=this['createJid'](_0xc95c54);return(0x0,w['isJidGroup'])(_0x43bf7b)?null:_0x43bf7b;})));}catch{throw new V('Group\x20not\x20found');}let _0x5df689=await this[_0x2a2997(0x210)][_0x2a2997(0x4a2)][_0x2a2997(0x1e2)]({'where':{'_id':_0x44cd97}},this['instance']['wuid']),_0x3caed7=await((async()=>{const _0x41682f=_0x2a2997;let _0x437bed={'quoted':_0x396f62,'ephemeralExpiration':_0x5df689?.[_0x41682f(0x45d)]??0x0};if(!_0x3dd5df[_0x41682f(0x1a9)]&&!_0x3dd5df[_0x41682f(0x2d5)]&&!_0x3dd5df[_0x41682f(0x622)]&&!_0x3dd5df[_0x41682f(0x142)]&&_0x44cd97!==_0x41682f(0x6c1)&&!_0x3dd5df[_0x41682f(0x1a9)])return await this[_0x41682f(0x688)][_0x41682f(0x5e5)](_0x44cd97,{'forward':{'key':{'remoteJid':this[_0x41682f(0x753)]['wuid'],'fromMe':!0x0},'message':_0x3dd5df},'mentions':_0x56e15e},_0x437bed);if(_0x3dd5df[_0x41682f(0x514)])return await this[_0x41682f(0x688)][_0x41682f(0x5e5)](_0x44cd97,{'react':{'text':_0x3dd5df['reactionMessage'][_0x41682f(0x403)],'key':_0x3dd5df[_0x41682f(0x514)]['key']}},_0x437bed);if(_0x3dd5df[_0x41682f(0x142)]){let _0x19d1ce=_0x3dd5df[_0x41682f(0x142)];return _0x39f5?.['changeVariables']&&(_0x19d1ce=await this[_0x41682f(0x70)](_0x19d1ce,_0x44cd97)),await this['client'][_0x41682f(0x5e5)](_0x44cd97,{'text':_0x19d1ce,'mentions':_0x56e15e,'linkPreview':_0x1db349},_0x437bed);}return _0x44cd97===_0x41682f(0x6c1)?await this[_0x41682f(0x688)][_0x41682f(0x5e5)](_0x44cd97,_0x3dd5df[_0x41682f(0x4c1)][_0x41682f(0xcb)],{'backgroundColor':_0x3dd5df[_0x41682f(0x4c1)][_0x41682f(0x402)][_0x41682f(0x3e0)],'font':_0x3dd5df['status'][_0x41682f(0x402)][_0x41682f(0x694)],'statusJidList':_0x3dd5df['status'][_0x41682f(0x402)][_0x41682f(0x6b9)]}):await this[_0x41682f(0x688)]['sendMessage'](_0x44cd97,_0x3dd5df,_0x437bed);})()),_0x22c57b=(0x0,w[_0x2a2997(0x1d4)])(_0x3caed7['message']),_0x44680a=(0x0,w[_0x2a2997(0x8c)])(_0x22c57b),{message_normalized:_0x3464fc}=this[_0x2a2997(0x3a4)](_0x22c57b,_0x44680a,null),_0x204f1b={'_id':_0x3caed7[_0x2a2997(0x2d1)]['id'],'key':_0x3caed7[_0x2a2997(0x2d1)],'pushName':_0x3caed7[_0x2a2997(0x339)],'isGroup':_0x3caed7[_0x2a2997(0x2d1)][_0x2a2997(0x6a8)]['endsWith'](_0x2a2997(0x322)),'profilePictureUrl':this[_0x2a2997(0x753)]['profilePictureUrl'],'message':_0x22c57b,'messageType':_0x44680a,'message_normalized':{'key':_0x3caed7[_0x2a2997(0x2d1)],'pushName':_0x3caed7[_0x2a2997(0x339)],'messageTimestamp':_0x3caed7[_0x2a2997(0x686)]&&_0x3caed7[_0x2a2997(0x686)][_0x2a2997(0x2c5)]()[_0x2a2997(0x426)]<0xd?_0x3caed7[_0x2a2997(0x686)]*0x3e8:_0x3caed7['messageTimestamp']||null,'source':(0x0,w['getDevice'])(_0x3caed7['key']['id']),..._0x3464fc},'messageTimestamp':_0x3caed7[_0x2a2997(0x686)]&&_0x3caed7['messageTimestamp'][_0x2a2997(0x2c5)]()[_0x2a2997(0x426)]<0xd?_0x3caed7[_0x2a2997(0x686)]*0x3e8:_0x3caed7[_0x2a2997(0x686)]||null,'owner':this[_0x2a2997(0x753)]['wuid'],'source':(0x0,w[_0x2a2997(0x4d6)])(_0x3caed7['key']['id'])};return this[_0x2a2997(0x39e)][_0x2a2997(0x71b)](this[_0x2a2997(0x653)]+'\x20('+this[_0x2a2997(0x753)][_0x2a2997(0x6e4)]+_0x2a2997(0x2be)+_0x204f1b['key']?.[_0x2a2997(0x6a8)]['replace']('@s.whatsapp.net','')+']\x20('+_0x204f1b[_0x2a2997(0x105)]+')'),_0x204f1b[_0x2a2997(0x550)]?.[_0x2a2997(0x403)]&&this[_0x2a2997(0x39e)][_0x2a2997(0x71b)](_0x204f1b[_0x2a2997(0x550)]?.[_0x2a2997(0x403)]),this['sendDataWebhook'](_0x2a2997(0x3a5),_0x204f1b),q(this['instanceName'],_0x2a2997(0x6fb),{'message':_0x204f1b}),this[_0x2a2997(0x1d2)](this[_0x2a2997(0x763)][_0x2a2997(0x7b6)]('DATABASE'),_0x204f1b,_0x2a2997(0x483),_0x5df689),await this[_0x2a2997(0x210)][_0x2a2997(0x33a)][_0x2a2997(0x737)]([_0x204f1b],this[_0x2a2997(0x753)][_0x2a2997(0x6e4)]),_0x3caed7;}catch(_0x8b7815){let _0x4a393d='Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20'+_0x44cd97,_0x33f618=_0x8b7815 instanceof Error?_0x8b7815[_0x2a2997(0x33a)]:typeof _0x8b7815==_0x2a2997(0x41e)?JSON[_0x2a2997(0x718)](_0x8b7815):_0x8b7815,_0x21b74f=_0x4a393d+':\x20'+_0x33f618;throw this[_0x2a2997(0x39e)][_0x2a2997(0x723)](this[_0x2a2997(0x653)]+'\x20('+this[_0x2a2997(0x753)]['wuid']+_0x2a2997(0x17d)+_0x21b74f),new m(_0x21b74f);}}get['connectionStatus'](){const _0x28bc2b=a0_0x37fa70;return this[_0x28bc2b(0x1e6)];}async[a0_0x37fa70(0x3a6)](_0x859270){const _0x425990=a0_0x37fa70;return await this[_0x425990(0x236)](_0x859270[_0x425990(0x3d7)],{'conversation':_0x859270[_0x425990(0x3a6)][_0x425990(0x403)]},_0x859270?.['options']);}async[a0_0x37fa70(0x6fa)](_0x1a0d64){const _0x5628b2=a0_0x37fa70;if(!_0x1a0d64[_0x5628b2(0x519)])throw new m(_0x5628b2(0x6b6));if(!_0x1a0d64['content'])throw new m(_0x5628b2(0xaf));if(_0x1a0d64[_0x5628b2(0x3f6)]){let _0x50a862=await this['repository']['contact'][_0x5628b2(0x3b4)]({'where':{}},this['instance'][_0x5628b2(0x6e4)]);if(!_0x50a862[_0x5628b2(0x426)])throw new m(_0x5628b2(0x363));_0x1a0d64[_0x5628b2(0x6b9)]=_0x50a862['filter'](_0x1f7187=>_0x1f7187[_0x5628b2(0x339)])[_0x5628b2(0x3c4)](_0x4a0121=>_0x4a0121[_0x5628b2(0x1b0)]);}if(!_0x1a0d64['statusJidList']?.['length']&&!_0x1a0d64[_0x5628b2(0x3f6)])throw new m(_0x5628b2(0x18f));if(_0x1a0d64[_0x5628b2(0x519)]==='text'){if(!_0x1a0d64[_0x5628b2(0x3e0)])throw new m('Background\x20color\x20is\x20required');if(!_0x1a0d64['font'])throw new m(_0x5628b2(0x71f));return{'content':{'text':_0x1a0d64[_0x5628b2(0xcb)]},'option':{'backgroundColor':_0x1a0d64[_0x5628b2(0x3e0)],'font':_0x1a0d64[_0x5628b2(0x694)],'statusJidList':_0x1a0d64[_0x5628b2(0x6b9)]}};}if(_0x1a0d64[_0x5628b2(0x519)]==='image')return{'content':{'image':{'url':_0x1a0d64[_0x5628b2(0xcb)]},'caption':_0x1a0d64['caption']},'option':{'statusJidList':_0x1a0d64[_0x5628b2(0x6b9)]}};if(_0x1a0d64['type']===_0x5628b2(0x65c))return{'content':{'video':{'url':_0x1a0d64[_0x5628b2(0xcb)]},'caption':_0x1a0d64[_0x5628b2(0x454)]},'option':{'statusJidList':_0x1a0d64[_0x5628b2(0x6b9)]}};if(_0x1a0d64[_0x5628b2(0x519)]===_0x5628b2(0x1a9)){this[_0x5628b2(0x39e)][_0x5628b2(0x48f)](this['instanceName']+'\x20('+this['instance'][_0x5628b2(0x6e4)]+_0x5628b2(0x4e5)),this[_0x5628b2(0x39e)][_0x5628b2(0x48f)](this[_0x5628b2(0x653)]+'\x20('+this['instance']['wuid']+'):Processing\x20audio');let _0x35c0bc=await this['convertaudio'](_0x1a0d64[_0x5628b2(0xcb)]);if(typeof _0x35c0bc==_0x5628b2(0x615)){this[_0x5628b2(0x39e)]['verbose'](this[_0x5628b2(0x653)]+'\x20('+this['instance'][_0x5628b2(0x6e4)]+_0x5628b2(0x684));let _0x2c3dca=U[_0x5628b2(0x690)](_0x35c0bc)['toString'](_0x5628b2(0xf5));return{'content':{'audio':Buffer[_0x5628b2(0x27b)](_0x2c3dca,_0x5628b2(0xf5)),'ptt':!0x0,'mimetype':'audio/ogg'},'option':{'statusJidList':_0x1a0d64['statusJidList']}};}else throw new x(_0x35c0bc);}throw new m(_0x5628b2(0x313));}async[a0_0x37fa70(0x212)](_0x32d15d){const _0x4f4c46=a0_0x37fa70;return await this[_0x4f4c46(0x236)]('status@broadcast',{'status':await this['formatStatusMessage'](_0x32d15d[_0x4f4c46(0x212)])});}async['prepareMediaMessage'](_0x292f44){const _0x118918=a0_0x37fa70;try{let _0x4afd85=await(0x0,w[_0x118918(0x32c)])({[_0x292f44[_0x118918(0x5ab)]]:(0x0,L[_0x118918(0xc8)])(_0x292f44[_0x118918(0x435)])?{'url':_0x292f44[_0x118918(0x435)]}:Buffer[_0x118918(0x27b)](_0x292f44[_0x118918(0x435)],'base64')},{'upload':this[_0x118918(0x688)][_0x118918(0x4c7)]}),_0xcf736c=_0x292f44[_0x118918(0x5ab)]+_0x118918(0xcd);if(_0x292f44['mediatype']===_0x118918(0x5be)&&!_0x292f44['fileName']){let _0x2737b6=new RegExp(/.*\/(.+?)\./)[_0x118918(0x2d4)](_0x292f44['media']);_0x292f44[_0x118918(0x765)]=_0x2737b6?_0x2737b6[0x1]:null;}let _0x4621b0;return(0x0,L[_0x118918(0xc8)])(_0x292f44[_0x118918(0x435)])?_0x4621b0=(await Z[_0x118918(0x259)]['get'](_0x292f44['media'],{'responseType':_0x118918(0x1d8)}))[_0x118918(0x623)][_0x118918(0x611)]:_0x4621b0=(0x0,ki[_0x118918(0x127)])(_0x292f44['fileName']),_0x4afd85[_0xcf736c]['caption']=_0x292f44?.['caption'],_0x4afd85[_0xcf736c][_0x118918(0x15e)]=_0x4621b0,_0x4afd85[_0xcf736c][_0x118918(0x765)]=_0x292f44[_0x118918(0x765)],_0x292f44[_0x118918(0x5ab)]===_0x118918(0x65c)&&(_0x4afd85[_0xcf736c][_0x118918(0x388)]=Uint8Array['from']((0x0,Le[_0x118918(0x690)])((0x0,J[_0x118918(0x114)])(process[_0x118918(0x6cd)](),_0x118918(0x38d)))),_0x4afd85[_0xcf736c][_0x118918(0x7a7)]=!0x1),(0x0,w[_0x118918(0x756)])('',{[_0xcf736c]:{..._0x4afd85[_0xcf736c]}},{'userJid':this[_0x118918(0x753)]['wuid']});}catch(_0x301753){let _0x4e3f49=_0x118918(0x24d),_0x2c9505=_0x301753 instanceof Error?_0x301753['message']:typeof _0x301753==_0x118918(0x41e)?JSON[_0x118918(0x718)](_0x301753):_0x301753,_0x18b7d2=_0x4e3f49+':\x20'+_0x2c9505;throw this[_0x118918(0x39e)][_0x118918(0x723)](this[_0x118918(0x653)]+'\x20('+this['instance'][_0x118918(0x6e4)]+_0x118918(0x17d)+_0x18b7d2),new x(_0x18b7d2);}}async['mediaMessage'](_0x1a712c){const _0x12e287=a0_0x37fa70;let _0x18dd06=await this['prepareMediaMessage'](_0x1a712c[_0x12e287(0x6ec)]);return await this[_0x12e287(0x236)](_0x1a712c[_0x12e287(0x3d7)],{..._0x18dd06['message']},_0x1a712c?.[_0x12e287(0x726)]);}async['convertToWebP'](_0x49669b,_0x30fec4){const _0x57debe=a0_0x37fa70;try{this['logger'][_0x57debe(0x48f)](this['instanceName']+'\x20('+this['instance'][_0x57debe(0x6e4)]+_0x57debe(0x3c8));let _0x1b1db1,_0x50da95=_0x30fec4+'-'+new Date()[_0x57debe(0x5ac)]();this[_0x57debe(0x39e)][_0x57debe(0x48f)](this[_0x57debe(0x653)]+'\x20('+this[_0x57debe(0x753)][_0x57debe(0x6e4)]+'):Hash\x20to\x20image\x20name:\x20'+_0x50da95);let _0x78fa49=''+(0x0,J[_0x57debe(0x114)])(this[_0x57debe(0x75)],_0x50da95+_0x57debe(0x16a));if(this['logger'][_0x57debe(0x48f)](this[_0x57debe(0x653)]+'\x20('+this[_0x57debe(0x753)][_0x57debe(0x6e4)]+'):Output\x20path:\x20'+_0x78fa49),(0x0,L[_0x57debe(0x6c0)])(_0x49669b)){this[_0x57debe(0x39e)][_0x57debe(0x48f)](this[_0x57debe(0x653)]+'\x20('+this[_0x57debe(0x753)][_0x57debe(0x6e4)]+'):Image\x20is\x20base64');let _0x2a669=_0x49669b[_0x57debe(0x2e9)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x2bf5ba=Buffer['from'](_0x2a669,_0x57debe(0xf5));_0x1b1db1=''+(0x0,J[_0x57debe(0x114)])(this[_0x57debe(0x75)],_0x57debe(0x176)+_0x50da95+'.png'),this[_0x57debe(0x39e)][_0x57debe(0x48f)](this[_0x57debe(0x653)]+'\x20('+this[_0x57debe(0x753)][_0x57debe(0x6e4)]+_0x57debe(0x440)+_0x1b1db1),await(0x0,qt[_0x57debe(0x259)])(_0x2bf5ba)[_0x57debe(0x4c2)](_0x1b1db1),this['logger'][_0x57debe(0x48f)](this['instanceName']+'\x20('+this[_0x57debe(0x753)][_0x57debe(0x6e4)]+'):Image\x20created');}else{this['logger'][_0x57debe(0x48f)](this[_0x57debe(0x653)]+'\x20('+this[_0x57debe(0x753)][_0x57debe(0x6e4)]+_0x57debe(0x1f4));let _0x115fc8=new Date()['getTime'](),_0x3b610b=_0x49669b+_0x57debe(0x47b)+_0x115fc8;this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x57debe(0x753)][_0x57debe(0x6e4)]+_0x57debe(0x605)+_0x3b610b);let _0x50068a=await Z[_0x57debe(0x259)][_0x57debe(0x7b6)](_0x3b610b,{'responseType':'arraybuffer'});this[_0x57debe(0x39e)][_0x57debe(0x48f)](this[_0x57debe(0x653)]+'\x20('+this['instance'][_0x57debe(0x6e4)]+_0x57debe(0x310));let _0xbb1b30=Buffer[_0x57debe(0x27b)](_0x50068a[_0x57debe(0x349)],_0x57debe(0x41f));_0x1b1db1=''+(0x0,J[_0x57debe(0x114)])(this[_0x57debe(0x75)],_0x57debe(0x176)+_0x50da95+'.png'),this['logger'][_0x57debe(0x48f)](this[_0x57debe(0x653)]+'\x20('+this[_0x57debe(0x753)]['wuid']+'):Image\x20path:\x20'+_0x1b1db1),await(0x0,qt[_0x57debe(0x259)])(_0xbb1b30)[_0x57debe(0x4c2)](_0x1b1db1),this[_0x57debe(0x39e)][_0x57debe(0x48f)](this[_0x57debe(0x653)]+'\x20('+this[_0x57debe(0x753)][_0x57debe(0x6e4)]+_0x57debe(0x43a));}return await(0x0,qt[_0x57debe(0x259)])(_0x1b1db1)[_0x57debe(0x53f)]()['toFile'](_0x78fa49),this['logger']['verbose'](this[_0x57debe(0x653)]+'\x20('+this[_0x57debe(0x753)]['wuid']+'):Image\x20converted\x20to\x20WebP'),U[_0x57debe(0x6e8)](_0x1b1db1),this[_0x57debe(0x39e)][_0x57debe(0x48f)](this[_0x57debe(0x653)]+'\x20('+this[_0x57debe(0x753)][_0x57debe(0x6e4)]+'):Temp\x20image\x20deleted'),_0x78fa49;}catch(_0x1b4b03){let _0x163e9e='Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP',_0x5e9cc3=_0x1b4b03 instanceof Error?_0x1b4b03[_0x57debe(0x33a)]:typeof _0x1b4b03==_0x57debe(0x41e)?JSON[_0x57debe(0x718)](_0x1b4b03):_0x1b4b03,_0xbedae7=_0x163e9e+':\x20'+_0x5e9cc3;this[_0x57debe(0x39e)]['error'](this[_0x57debe(0x653)]+'\x20('+this[_0x57debe(0x753)]['wuid']+_0x57debe(0x17d)+_0xbedae7);}}async[a0_0x37fa70(0x39d)](_0x270fe2){const _0x531985=a0_0x37fa70;let _0x278259=await this[_0x531985(0x61f)](_0x270fe2[_0x531985(0x59e)][_0x531985(0x1b2)],_0x270fe2[_0x531985(0x3d7)]),_0x53b090=await this[_0x531985(0x236)](_0x270fe2[_0x531985(0x3d7)],{'sticker':{'url':_0x278259}},_0x270fe2?.[_0x531985(0x726)]);return U[_0x531985(0x6e8)](_0x278259),this['logger']['verbose'](this[_0x531985(0x653)]+'\x20('+this['instance'][_0x531985(0x6e4)]+'):Converted\x20image\x20deleted'),_0x53b090;}async['audioWhatsapp'](_0xb8f9e5){const _0x52d85d=a0_0x37fa70;if(this[_0x52d85d(0x39e)][_0x52d85d(0x48f)](this[_0x52d85d(0x653)]+'\x20('+this[_0x52d85d(0x753)]['wuid']+_0x52d85d(0x78a)),!_0xb8f9e5[_0x52d85d(0x726)]?.[_0x52d85d(0x148)]&&_0xb8f9e5[_0x52d85d(0x726)]?.[_0x52d85d(0x148)]!==!0x1&&(_0xb8f9e5['options'][_0x52d85d(0x148)]=!0x0),_0xb8f9e5['options']?.[_0x52d85d(0x148)]){let _0x1799c0=await this[_0x52d85d(0x66c)](_0xb8f9e5[_0x52d85d(0x567)][_0x52d85d(0x1a9)]);if(typeof _0x1799c0==_0x52d85d(0x615)){let _0x1eedb6=U[_0x52d85d(0x690)](_0x1799c0)['toString'](_0x52d85d(0xf5));return this['sendMessageWithTyping'](_0xb8f9e5[_0x52d85d(0x3d7)],{'audio':Buffer[_0x52d85d(0x27b)](_0x1eedb6,'base64'),'ptt':!0x0,'mimetype':_0x52d85d(0x50a)},{'presence':'recording','delay':_0xb8f9e5?.[_0x52d85d(0x726)]?.['delay']});}else throw new x(_0x1799c0);}return await this[_0x52d85d(0x236)](_0xb8f9e5[_0x52d85d(0x3d7)],{'audio':(0x0,L[_0x52d85d(0xc8)])(_0xb8f9e5[_0x52d85d(0x567)][_0x52d85d(0x1a9)])?{'url':_0xb8f9e5[_0x52d85d(0x567)][_0x52d85d(0x1a9)]}:Buffer[_0x52d85d(0x27b)](_0xb8f9e5[_0x52d85d(0x567)][_0x52d85d(0x1a9)],_0x52d85d(0xf5)),'ptt':!0x0,'mimetype':_0x52d85d(0x50a)},{'presence':'recording','delay':_0xb8f9e5?.['options']?.[_0x52d85d(0xb9)]});}async[a0_0x37fa70(0x66c)](_0x2da543){const _0x17135e=a0_0x37fa70;this[_0x17135e(0x39e)][_0x17135e(0x48f)](this[_0x17135e(0x653)]+'\x20('+this['instance'][_0x17135e(0x6e4)]+_0x17135e(0x6f0));let _0x2d36ab=(0x0,L['isURL'])(_0x2da543)?(0x0,Vt[_0x17135e(0x4f7)])('sha256')[_0x17135e(0x6c8)](_0x2da543)[_0x17135e(0xba)](_0x17135e(0xd7)):(0x0,Vt[_0x17135e(0x4f7)])('sha256')[_0x17135e(0x6c8)](_0x2da543)[_0x17135e(0xba)](_0x17135e(0xd7)),_0x4cb5ff=''+(0x0,J[_0x17135e(0x114)])(this[_0x17135e(0x75)],_0x2d36ab+_0x17135e(0x530));if(U[_0x17135e(0x502)](_0x4cb5ff))return this[_0x17135e(0x39e)][_0x17135e(0x48f)](this[_0x17135e(0x653)]+'\x20('+this[_0x17135e(0x753)]['wuid']+_0x17135e(0x397)),_0x4cb5ff;let _0x57440b=''+(0x0,J[_0x17135e(0x114)])(this[_0x17135e(0x75)],_0x17135e(0x176)+(0x0,Q['v4'])()+_0x17135e(0x4d9));if((0x0,L[_0x17135e(0xc8)])(_0x2da543)){let _0x172d0b=new Date()[_0x17135e(0x5ac)](),_0x1c39c6=_0x2da543+_0x17135e(0x47b)+_0x172d0b,_0x553511=await Z[_0x17135e(0x259)]['get'](_0x1c39c6,{'responseType':'arraybuffer'});U[_0x17135e(0x5e3)](_0x57440b,_0x553511[_0x17135e(0x349)]);}else{let _0x315dc2=Buffer[_0x17135e(0x27b)](_0x2da543,_0x17135e(0xf5));U['writeFileSync'](_0x57440b,_0x315dc2);}return new Promise((_0x881e4f,_0x5d1f92)=>{const _0x19c89a=_0x17135e;(0x0,Ue[_0x19c89a(0x2d4)])(Ps[_0x19c89a(0x259)][_0x19c89a(0x43f)]+_0x19c89a(0x549)+_0x57440b+'\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20'+_0x4cb5ff+_0x19c89a(0x218),_0x9d4306=>{const _0x2d88a6=_0x19c89a;if(U[_0x2d88a6(0x6e8)](_0x57440b),_0x9d4306){this[_0x2d88a6(0x39e)][_0x2d88a6(0x48f)](this[_0x2d88a6(0x653)]+'\x20('+this[_0x2d88a6(0x753)][_0x2d88a6(0x6e4)]+'):Error\x20in\x20converting\x20audio'),_0x5d1f92(_0x9d4306);return;}this['logger'][_0x2d88a6(0x48f)](this[_0x2d88a6(0x653)]+'\x20('+this[_0x2d88a6(0x753)]['wuid']+'):Audio\x20converted\x20and\x20stored\x20in\x20cache'),_0x881e4f(_0x4cb5ff);});});}async[a0_0x37fa70(0x5c7)](_0x16918c){const _0x18fd10=a0_0x37fa70;this[_0x18fd10(0x39e)][_0x18fd10(0x48f)](this[_0x18fd10(0x653)]+'\x20('+this[_0x18fd10(0x753)][_0x18fd10(0x6e4)]+_0x18fd10(0x6f0));let _0x3272f0=(0x0,Vt[_0x18fd10(0x4f7)])(_0x18fd10(0x682))[_0x18fd10(0x6c8)](_0x16918c)[_0x18fd10(0xba)](_0x18fd10(0xd7)),_0x1185c9=''+(0x0,J[_0x18fd10(0x114)])(this[_0x18fd10(0x75)],_0x3272f0+'.mp3');if(U[_0x18fd10(0x502)](_0x1185c9))return this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x18fd10(0x6e4)]+'):Cached\x20audio\x20found,\x20returning\x20existing\x20file'),J[_0x18fd10(0x259)][_0x18fd10(0x2aa)](_0x1185c9);let _0x29a90f=''+(0x0,J[_0x18fd10(0x114)])(this[_0x18fd10(0x75)],_0x18fd10(0x176)+_0x3272f0+_0x18fd10(0x530));if((0x0,L[_0x18fd10(0xc8)])(_0x16918c)){let _0x3a5755=new Date()[_0x18fd10(0x5ac)](),_0x82ff5a=_0x16918c+_0x18fd10(0x47b)+_0x3a5755,_0x593120=await Z[_0x18fd10(0x259)]['get'](_0x82ff5a,{'responseType':_0x18fd10(0x1d8)});U['writeFileSync'](_0x29a90f,_0x593120[_0x18fd10(0x349)]);}else{let _0x515a09=Buffer[_0x18fd10(0x27b)](_0x16918c,'base64');U[_0x18fd10(0x5e3)](_0x29a90f,_0x515a09);}return new Promise((_0x5690eb,_0x4eff12)=>{const _0x5d8bb1=_0x18fd10;(0x0,Ue[_0x5d8bb1(0x2d4)])(Ps[_0x5d8bb1(0x259)][_0x5d8bb1(0x43f)]+_0x5d8bb1(0x549)+_0x29a90f+_0x5d8bb1(0x73)+_0x1185c9+'\x20-y',_0xb7a0c2=>{const _0x12661d=_0x5d8bb1;if(U[_0x12661d(0x6e8)](_0x29a90f),_0xb7a0c2){this[_0x12661d(0x39e)][_0x12661d(0x48f)](this[_0x12661d(0x653)]+'\x20('+this[_0x12661d(0x753)][_0x12661d(0x6e4)]+'):Error\x20in\x20converting\x20audio'),_0x4eff12(_0xb7a0c2);return;}this[_0x12661d(0x39e)]['verbose'](this['instanceName']+'\x20('+this[_0x12661d(0x753)][_0x12661d(0x6e4)]+_0x12661d(0x4af)),_0x5690eb(J[_0x12661d(0x259)][_0x12661d(0x2aa)](_0x1185c9));});});}async[a0_0x37fa70(0x63f)](_0x4cd3d3){const _0x2306fb=a0_0x37fa70;let _0x147963={},_0x4826c0='TEXT';if(_0x4cd3d3[_0x2306fb(0x63f)]?.[_0x2306fb(0x6ec)]){_0x4826c0=_0x4cd3d3[_0x2306fb(0x63f)]['mediaMessage']?.[_0x2306fb(0x5ab)]['toUpperCase']()??_0x2306fb(0x2dc),_0x147963['mediaKey']=_0x4826c0['toLowerCase']()+_0x2306fb(0xcd);let _0xe8a65e=await this[_0x2306fb(0x3d9)](_0x4cd3d3[_0x2306fb(0x63f)][_0x2306fb(0x6ec)]);_0x147963['message']=_0xe8a65e[_0x2306fb(0x33a)][_0x147963[_0x2306fb(0x565)]],_0x147963[_0x2306fb(0x5f5)]='*'+_0x4cd3d3[_0x2306fb(0x63f)][_0x2306fb(0x5d8)]+_0x2306fb(0x706)+_0x4cd3d3['buttonMessage'][_0x2306fb(0x48c)];}let _0x23c793={'text':_0x4cd3d3[_0x2306fb(0x63f)]['buttons'][_0x2306fb(0x3c4)](_0x4fad65=>_0x4fad65['buttonText']),'ids':_0x4cd3d3[_0x2306fb(0x63f)][_0x2306fb(0x35f)][_0x2306fb(0x3c4)](_0x2cfdb4=>_0x2cfdb4[_0x2306fb(0x44c)])};if(!(0x0,L['arrayUnique'])(_0x23c793['text'])||!(0x0,L[_0x2306fb(0x769)])(_0x23c793[_0x2306fb(0x223)]))throw new m('Button\x20texts\x20cannot\x20be\x20repeated',_0x2306fb(0x38f));return await this[_0x2306fb(0x236)](_0x4cd3d3[_0x2306fb(0x3d7)],{'buttonsMessage':{'text':_0x147963?.[_0x2306fb(0x565)]?void 0x0:_0x4cd3d3['buttonMessage']['title'],'contentText':_0x147963?.[_0x2306fb(0x5f5)]??_0x4cd3d3[_0x2306fb(0x63f)][_0x2306fb(0x48c)],'footerText':_0x4cd3d3['buttonMessage']?.[_0x2306fb(0x681)],'buttons':_0x4cd3d3[_0x2306fb(0x63f)][_0x2306fb(0x35f)][_0x2306fb(0x3c4)](_0xc81fe6=>({'buttonText':{'displayText':_0xc81fe6[_0x2306fb(0x7bd)]},'buttonId':_0xc81fe6[_0x2306fb(0x44c)],'type':0x1})),'headerType':w[_0x2306fb(0x71)][_0x2306fb(0xcd)]['ButtonsMessage'][_0x2306fb(0x2e2)][_0x4826c0],[_0x147963?.[_0x2306fb(0x565)]]:_0x147963?.[_0x2306fb(0x33a)]}},_0x4cd3d3?.[_0x2306fb(0x726)]);}async[a0_0x37fa70(0x6f6)](_0x23f9da){const _0x50896d=a0_0x37fa70;return await this[_0x50896d(0x236)](_0x23f9da[_0x50896d(0x3d7)],{'locationMessage':{'degreesLatitude':_0x23f9da[_0x50896d(0x6f6)][_0x50896d(0x4e8)],'degreesLongitude':_0x23f9da[_0x50896d(0x6f6)][_0x50896d(0x26d)],'name':_0x23f9da[_0x50896d(0x6f6)]?.[_0x50896d(0x410)],'address':_0x23f9da[_0x50896d(0x6f6)]?.[_0x50896d(0x3f8)]}},_0x23f9da?.[_0x50896d(0x726)]);}async['contactMessage'](_0x5588d4){const _0x549d51=a0_0x37fa70;let _0xe14985={},_0x4e3ee7=async _0x30ee70=>{const _0x42ebec=a0_0x58ef;let _0x290159=_0x42ebec(0x6b4)+_0x30ee70['fullName']+'\x0aFN:'+_0x30ee70[_0x42ebec(0x797)]+'\x0a';_0x30ee70['organization']&&(_0x290159+=_0x42ebec(0x32a)+_0x30ee70[_0x42ebec(0x42c)]+';\x0a'),_0x30ee70[_0x42ebec(0x6a5)]&&(_0x290159+='EMAIL:'+_0x30ee70[_0x42ebec(0x6a5)]+'\x0a'),_0x30ee70['url']&&(_0x290159+='URL:'+_0x30ee70['url']+'\x0a');let _0x5975a4='',_0x2119ad=0x1;if(_0x30ee70[_0x42ebec(0x181)]){let _0xb0f467=_0x30ee70[_0x42ebec(0x181)][_0x42ebec(0x213)]('|');for(let _0x23eeca of _0xb0f467){let _0xfc3dd7=await this['whatsappNumber']({'numbers':[_0x23eeca]}),_0x514082=(_0xfc3dd7[_0x42ebec(0x426)]>0x0?_0xfc3dd7[0x0][_0x42ebec(0xb1)]:this[_0x42ebec(0x342)](_0x23eeca))['replace'](_0x42ebec(0x561),'');_0x5975a4+=_0x42ebec(0x494)+_0x2119ad+_0x42ebec(0x238)+_0x514082+':'+_0x23eeca+_0x42ebec(0x417)+_0x2119ad+_0x42ebec(0x2d9),_0x2119ad++;}}return _0x290159+=_0x5975a4+_0x42ebec(0x510),_0x290159;};return _0x5588d4['contactMessage'][_0x549d51(0x426)]===0x1?_0xe14985[_0x549d51(0x2a4)]={'displayName':_0x5588d4[_0x549d51(0x2a4)][0x0]['fullName'],'vcard':await _0x4e3ee7(_0x5588d4[_0x549d51(0x2a4)][0x0])}:_0xe14985[_0x549d51(0x52b)]={'displayName':_0x5588d4[_0x549d51(0x2a4)][_0x549d51(0x426)]+_0x549d51(0x360),'contacts':await Promise[_0x549d51(0x1ea)](_0x5588d4[_0x549d51(0x2a4)][_0x549d51(0x3c4)](async _0xb76642=>({'displayName':_0xb76642[_0x549d51(0x797)],'vcard':await _0x4e3ee7(_0xb76642)})))},await this[_0x549d51(0x236)](_0x5588d4['number'],{..._0xe14985},_0x5588d4?.[_0x549d51(0x726)]);}async[a0_0x37fa70(0x514)](_0x308f80){const _0x23118a=a0_0x37fa70;return await this[_0x23118a(0x236)](_0x308f80['reactionMessage'][_0x23118a(0x2d1)][_0x23118a(0x6a8)],{'reactionMessage':{'key':_0x308f80['reactionMessage'][_0x23118a(0x2d1)],'text':_0x308f80[_0x23118a(0x514)]['reaction']}});}async['whatsappNumber'](_0x5c4a8d){const _0xabc317=a0_0x37fa70;let _0x5d6aeb=[];for await(let _0x984814 of _0x5c4a8d[_0xabc317(0x3bb)]){let _0x20056f=this[_0xabc317(0x342)](_0x984814),_0x5d8a1e=!0x1;try{if((0x0,w[_0xabc317(0x252)])(_0x20056f)){let _0x2a2657=(await this[_0xabc317(0x210)]['chat']['findOne']({'where':{'_id':_0x20056f}},this['instance'][_0xabc317(0x6e4)]))[_0xabc317(0xbe)];_0x2a2657?(_0x5d8a1e=!0x0,_0x5d6aeb[_0xabc317(0x5ee)](new pe(_0x2a2657['id'],_0x5d8a1e,_0x2a2657?.[_0xabc317(0x441)]))):(_0x2a2657=await this[_0xabc317(0x5c2)]({'groupJid':_0x20056f},_0xabc317(0x372)),_0x5d6aeb['push'](new pe(_0x2a2657['id'],!!_0x2a2657?.['id'],_0x2a2657?.['subject'])));}else{if(_0x20056f[_0xabc317(0x14a)](_0xabc317(0x50d)))_0x5d6aeb['push'](new pe(_0x20056f,!0x0));else{let _0x4a8eac=(await this[_0xabc317(0x688)][_0xabc317(0x296)](_0x20056f))[0x0];_0x5d6aeb[_0xabc317(0x5ee)](new pe(_0x4a8eac['jid'],_0x4a8eac[_0xabc317(0x332)]));}}}catch{(0x0,w[_0xabc317(0x252)])(_0x20056f)||await this[_0xabc317(0x621)](_0x20056f),_0x5d6aeb[_0xabc317(0x5ee)](new pe(_0x984814,!0x1));}}return _0x5d6aeb;}async[a0_0x37fa70(0x621)](_0x125bd0){const _0x568bd5=a0_0x37fa70;try{await this[_0x568bd5(0x210)][_0x568bd5(0x4a2)][_0x568bd5(0x1e2)]({'where':{'_id':_0x125bd0,'imported':!0x0}},this[_0x568bd5(0x753)][_0x568bd5(0x6e4)])&&(await this[_0x568bd5(0x210)][_0x568bd5(0x4a2)][_0x568bd5(0x5b0)](_0x125bd0,this['instance'][_0x568bd5(0x6e4)]),this[_0x568bd5(0x39e)][_0x568bd5(0x11b)](_0x568bd5(0x29c)+_0x125bd0+_0x568bd5(0xd4)));}catch(_0x1dad9c){let _0x56b355='Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat',_0x55acec=_0x1dad9c instanceof Error?_0x1dad9c[_0x568bd5(0x33a)]:typeof _0x1dad9c=='object'?JSON[_0x568bd5(0x718)](_0x1dad9c):_0x1dad9c,_0x176fe3=_0x56b355+':\x20'+_0x55acec;this[_0x568bd5(0x39e)][_0x568bd5(0x723)](this['instanceName']+'\x20('+this[_0x568bd5(0x753)][_0x568bd5(0x6e4)]+_0x568bd5(0x17d)+_0x176fe3);}}async[a0_0x37fa70(0x271)](_0x53bb38){const _0x5a8667=a0_0x37fa70;try{let _0x34fb31=_0x53bb38['readMessages'][_0x5a8667(0x1c2)](_0x220a81=>(0x0,w[_0x5a8667(0x252)])(_0x220a81['remoteJid'])||(0x0,w[_0x5a8667(0x195)])(_0x220a81['remoteJid']))[_0x5a8667(0x3c4)](_0x41a9db=>({'remoteJid':_0x41a9db['remoteJid'],'fromMe':_0x41a9db['fromMe'],'id':_0x41a9db['id']}));await this['client']['readMessages'](_0x34fb31);let _0x225b4a=_0x34fb31['map'](_0x3a8f8b=>this[_0x5a8667(0x37a)](_0x3a8f8b,{'status':_0x5a8667(0x590),'owner':this['instance']['wuid']})),_0x1ebdca=_0x34fb31[_0x5a8667(0x3c4)](_0xd2d388=>this['repository'][_0x5a8667(0x4a2)][_0x5a8667(0x130)]({'where':{'_id':_0xd2d388[_0x5a8667(0x6a8)]}},{'unreadcount':0x0},this[_0x5a8667(0x753)][_0x5a8667(0x6e4)])),[_0x51d0ed,_0x114d30]=await Promise['all']([Promise['all'](_0x225b4a),Promise[_0x5a8667(0x1ea)](_0x1ebdca)]);return _0x114d30[_0x5a8667(0x1c2)](_0x125ecf=>_0x125ecf!==null)[_0x5a8667(0x4b7)](_0x484c7b=>{const _0x46ad54=_0x5a8667;q(this[_0x46ad54(0x653)],'chats',{'chat':_0x484c7b});}),{'message':_0x5a8667(0x7be),'read':_0x5a8667(0x630)};}catch(_0x5695db){let _0x4c2db9='Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida',_0x3ac103=_0x5695db instanceof Error?_0x5695db[_0x5a8667(0x33a)]:typeof _0x5695db=='object'?JSON[_0x5a8667(0x718)](_0x5695db):_0x5695db,_0x49822b=_0x4c2db9+':\x20'+_0x3ac103;throw this['logger'][_0x5a8667(0x723)](this['instanceName']+'\x20('+this['instance'][_0x5a8667(0x6e4)]+_0x5a8667(0x17d)+_0x49822b),new x(_0x49822b);}}async[a0_0x37fa70(0x5bf)](_0x3276d0){const _0x390c4f=a0_0x37fa70;let _0x22421f={'where':{'key':{'remoteJid':_0x3276d0}},'limit':0x1},_0xa99c6d=await this[_0x390c4f(0x67b)](_0x22421f);return _0xa99c6d||(this['logger']['error'](_0x390c4f(0x266)+_0x3276d0),null);}async[a0_0x37fa70(0x278)](_0x2915d6){const _0x24da27=a0_0x37fa70;this['logger'][_0x24da27(0x48f)](this[_0x24da27(0x653)]+'\x20('+this['instance'][_0x24da27(0x6e4)]+_0x24da27(0x24e));try{let _0x11c501=_0x2915d6[_0x24da27(0x794)],_0x19b04f=_0x2915d6[_0x24da27(0x4a2)];if(!_0x11c501&&_0x19b04f?_0x11c501=await this[_0x24da27(0x5bf)](_0x19b04f):(_0x11c501=_0x2915d6[_0x24da27(0x794)],_0x11c501[_0x24da27(0x686)]=_0x11c501?.[_0x24da27(0x686)]??Date[_0x24da27(0x5cf)](),_0x19b04f=_0x11c501?.[_0x24da27(0x2d1)]?.['remoteJid']),!_0x11c501||Object[_0x24da27(0x674)](_0x11c501)[_0x24da27(0x426)]===0x0)throw new V(_0x24da27(0x448));this['logger'][_0x24da27(0x48f)](this[_0x24da27(0x653)]+'\x20('+this[_0x24da27(0x753)]['wuid']+_0x24da27(0x7c7)+_0x19b04f);try{await this[_0x24da27(0x688)][_0x24da27(0x36c)]({'archive':_0x2915d6[_0x24da27(0x1cd)],'lastMessages':[_0x11c501]},this['createJid'](_0x19b04f));}catch(_0x2e080a){let _0x1cde2e='Error\x20in\x20chatModify\x20for\x20number\x20'+_0x19b04f,_0x3df0a7=_0x2e080a instanceof Error?_0x2e080a[_0x24da27(0x33a)]:typeof _0x2e080a=='object'?JSON[_0x24da27(0x718)](_0x2e080a):_0x2e080a,_0x380687=_0x1cde2e+':\x20'+_0x3df0a7;this['logger']['error'](this[_0x24da27(0x653)]+'\x20('+this[_0x24da27(0x753)]['wuid']+_0x24da27(0x17d)+_0x380687);}this[_0x24da27(0x39e)][_0x24da27(0x48f)](this[_0x24da27(0x653)]+'\x20('+this[_0x24da27(0x753)][_0x24da27(0x6e4)]+'):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0x19b04f);let _0x1f81c4=await this[_0x24da27(0x210)][_0x24da27(0x4a2)]['updateOne']({'where':{'_id':_0x11c501?.['key']?.['remoteJid']}},{'archived':_0x2915d6[_0x24da27(0x1cd)]},this[_0x24da27(0x753)][_0x24da27(0x6e4)]);return _0x1f81c4?(this[_0x24da27(0x39e)][_0x24da27(0x48f)](this[_0x24da27(0x653)]+'\x20('+this[_0x24da27(0x753)][_0x24da27(0x6e4)]+'):Notifying\x20clients\x20for\x20chat:\x20'+JSON[_0x24da27(0x718)](_0x1f81c4)),q(this[_0x24da27(0x653)],'chats',{'chat':_0x1f81c4})):this[_0x24da27(0x39e)]['error'](this[_0x24da27(0x653)]+'\x20('+this[_0x24da27(0x753)][_0x24da27(0x6e4)]+'):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0x19b04f),{'chatId':_0x19b04f,'archived':_0x2915d6[_0x24da27(0x1cd)]};}catch(_0x287879){let _0x4c52f9='Erro\x20ao\x20arquivar\x20chat',_0x1d2fa6=_0x287879 instanceof Error?_0x287879[_0x24da27(0x33a)]:typeof _0x287879==_0x24da27(0x41e)?JSON['stringify'](_0x287879):_0x287879,_0x83212f=_0x4c52f9+':\x20'+_0x1d2fa6;throw this[_0x24da27(0x39e)][_0x24da27(0x723)](this[_0x24da27(0x653)]+'\x20('+this['instance'][_0x24da27(0x6e4)]+'):\x20'+_0x83212f),new x(_0x83212f);}}async[a0_0x37fa70(0x5b0)](_0x343678){const _0x18471a=a0_0x37fa70;this[_0x18471a(0x39e)][_0x18471a(0x48f)](this[_0x18471a(0x653)]+'\x20('+this[_0x18471a(0x753)][_0x18471a(0x6e4)]+_0x18471a(0x2ee));try{let _0x2ffc0c=await this[_0x18471a(0x5bf)](_0x343678);if(!_0x2ffc0c||Object[_0x18471a(0x674)](_0x2ffc0c)[_0x18471a(0x426)]===0x0)throw new V('Last\x20message\x20not\x20found');let _0xdfc75e=_0x2ffc0c[0x0];this[_0x18471a(0x39e)][_0x18471a(0x48f)](this['instanceName']+'\x20('+this[_0x18471a(0x753)][_0x18471a(0x6e4)]+_0x18471a(0x610)+_0x343678);try{await this[_0x18471a(0x688)][_0x18471a(0x36c)]({'delete':!0x0,'lastMessages':[{'key':_0xdfc75e[_0x18471a(0x2d1)],'messageTimestamp':_0xdfc75e[_0x18471a(0x686)]}]},this[_0x18471a(0x342)](_0x343678));}catch(_0x434d8c){this['logger'][_0x18471a(0x723)](_0x18471a(0x20f)+_0x343678+':\x20'+_0x434d8c[_0x18471a(0x2c5)]());}this['logger']['verbose'](this[_0x18471a(0x653)]+'\x20('+this[_0x18471a(0x753)]['wuid']+_0x18471a(0x2c3)+_0x343678);return;}catch(_0x16c256){throw this[_0x18471a(0x39e)][_0x18471a(0x723)](this[_0x18471a(0x653)]+'\x20('+this[_0x18471a(0x753)][_0x18471a(0x6e4)]+_0x18471a(0x6ab)+_0x16c256[_0x18471a(0x2c5)]()),new x({'archived':!0x1,'message':[_0x18471a(0x613),_0x16c256['toString']()]});}}async[a0_0x37fa70(0x270)](_0x4cc63b){const _0x306f5f=a0_0x37fa70;try{let _0x262934=await this[_0x306f5f(0x688)][_0x306f5f(0x5e5)](_0x4cc63b[_0x306f5f(0x6a8)],{'delete':_0x4cc63b});try{let _0x499db1=await this[_0x306f5f(0x37a)](_0x4cc63b,{'status':_0x306f5f(0x284),'owner':this['instance'][_0x306f5f(0x6e4)]});this['logger'][_0x306f5f(0x48f)](this[_0x306f5f(0x653)]+'\x20('+this['instance'][_0x306f5f(0x6e4)]+_0x306f5f(0x2ad)+_0x499db1);}catch(_0x20626b){this[_0x306f5f(0x39e)][_0x306f5f(0x723)]('Error\x20updating\x20message\x20status:'+_0x20626b);}return _0x262934;}catch(_0x59df9e){throw new x('Error\x20while\x20deleting\x20message\x20for\x20everyone',_0x59df9e?.[_0x306f5f(0x2c5)]());}}async[a0_0x37fa70(0x449)](_0x4bc42c){const _0x2313e0=a0_0x37fa70;try{let _0x2dffcc=_0x4bc42c?.[_0x2313e0(0x33a)]?_0x4bc42c:await this[_0x2313e0(0x1e7)](_0x4bc42c[_0x2313e0(0x2d1)],!0x0);for(let _0x8a8e27 of Ra)_0x2dffcc[_0x2313e0(0x33a)][_0x8a8e27]&&(_0x2dffcc['message']=_0x2dffcc[_0x2313e0(0x33a)][_0x8a8e27][_0x2313e0(0x33a)]);let _0xe7634d,_0x4a6013;for(let _0xd5b020 of $a)if(_0xe7634d=_0x2dffcc[_0x2313e0(0x33a)][_0xd5b020],_0xe7634d){_0x4a6013=_0xd5b020;break;}if(!_0xe7634d)throw'The\x20message\x20is\x20not\x20of\x20the\x20media\x20type';typeof _0xe7634d['mediaKey']=='object'&&(_0x2dffcc[_0x2313e0(0x33a)]=JSON['parse'](JSON['stringify'](_0x2dffcc[_0x2313e0(0x33a)])));let _0x567c79=await(0x0,w[_0x2313e0(0x791)])({'key':_0x2dffcc?.['key'],'message':_0x2dffcc?.['message']},_0x2313e0(0x633),{},{'logger':(0x0,Jt[_0x2313e0(0x259)])({'level':'silent'}),'reuploadRequest':this[_0x2313e0(0x688)]['updateMediaMessage']});if(!(_0x567c79 instanceof Buffer))throw new Error('Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.');let _0x1b7a44=this[_0x2313e0(0x763)]['get'](_0x2313e0(0x796)),_0x361f1a,_0x326fce;if(_0xe7634d[_0x2313e0(0x765)])_0x361f1a=_0xe7634d[_0x2313e0(0x765)];else{let _0x248396=_0xe7634d[_0x2313e0(0x15e)]?.[_0x2313e0(0x538)](/\/(\w+)/),_0x4d4d5b=_0x248396?_0x248396[0x1]:null;if(!_0x4d4d5b)throw new Error('File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message');_0x361f1a=(0x0,Q['v4'])()+'.'+_0x4d4d5b;}_0x4a6013===_0x2313e0(0x567)?_0x326fce=_0x2313e0(0x359)+await this[_0x2313e0(0x5c7)](_0x567c79['toString'](_0x2313e0(0xf5))):(await this[_0x2313e0(0x419)](_0x567c79,_0x361f1a),_0x326fce=_0x2313e0(0x359)+_0x361f1a);let _0x126007=this[_0x2313e0(0x763)][_0x2313e0(0x7b6)](_0x2313e0(0x556))['URL'];if(!_0x126007){let _0x5ed5e8=this[_0x2313e0(0x763)][_0x2313e0(0x7b6)](_0x2313e0(0xe6));_0x126007='https://'+(_0x5ed5e8&&_0x5ed5e8[_0x2313e0(0x9f)]['split']('/')[0x4]);}_0x326fce=''+_0x126007+_0x326fce;let _0x5bd884=0xc*0x3c*0x3c*0x3e8,_0x128cfa={'where':{'_id':_0x2dffcc['key']['id']}},_0x5df0a7={'message_normalized.fileUrl':_0x326fce,'message_normalized.expires_fileUrl':Date[_0x2313e0(0x5cf)]()+_0x5bd884};try{let _0x1273b7=await this[_0x2313e0(0x210)]['message'][_0x2313e0(0x6c8)](_0x128cfa,_0x5df0a7,this[_0x2313e0(0x753)]['wuid']);_0x1273b7&&q(this[_0x2313e0(0x653)],_0x2313e0(0x6fb),{'message':_0x1273b7});}catch(_0x3e72a5){let _0xf89e6=_0x2313e0(0x3f4),_0x32e049=_0x3e72a5 instanceof Error?_0x3e72a5[_0x2313e0(0x33a)]:typeof _0x3e72a5=='object'?JSON[_0x2313e0(0x718)](_0x3e72a5):_0x3e72a5,_0x263671=_0xf89e6+':\x20'+_0x32e049;this[_0x2313e0(0x39e)][_0x2313e0(0x723)](this[_0x2313e0(0x653)]+'\x20('+this['instance'][_0x2313e0(0x6e4)]+_0x2313e0(0x17d)+_0x263671);}return{'mediaType':_0x4a6013,'fileName':_0xe7634d['fileName'],'caption':_0xe7634d[_0x2313e0(0x454)],'size':{'fileLength':_0xe7634d[_0x2313e0(0xe8)],'height':_0xe7634d[_0x2313e0(0x2b8)],'width':_0xe7634d['width']},'mimetype':_0xe7634d[_0x2313e0(0x15e)],'base64':_0x567c79[_0x2313e0(0x2c5)]('base64'),'fileUrl':_0x326fce,'expires_fileUrl':Date[_0x2313e0(0x5cf)]()+_0x5bd884};}catch(_0x482fcf){let _0x209d9b='Falha\x20ao\x20processar\x20a\x20solicitação',_0x4b0ad3=_0x482fcf instanceof Error?_0x482fcf[_0x2313e0(0x33a)]:typeof _0x482fcf==_0x2313e0(0x41e)?JSON[_0x2313e0(0x718)](_0x482fcf):_0x482fcf,_0x19f342=_0x209d9b+':\x20'+_0x4b0ad3;throw this['logger'][_0x2313e0(0x723)](this['instanceName']+'\x20('+this[_0x2313e0(0x753)][_0x2313e0(0x6e4)]+_0x2313e0(0x17d)+_0x19f342),new m(_0x19f342);}}async[a0_0x37fa70(0x419)](_0x2754de,_0x16f1b7){const _0x3d3452=a0_0x37fa70;let _0x55d61d=J[_0x3d3452(0x259)]['join'](__dirname,_0x3d3452(0x182));U['existsSync'](_0x55d61d)||U[_0x3d3452(0x66e)](_0x55d61d,{'recursive':!0x0});let _0x54fdbe=J[_0x3d3452(0x259)][_0x3d3452(0x114)](_0x55d61d,_0x16f1b7);return new Promise((_0xd92e68,_0x10866e)=>{U['writeFile'](_0x54fdbe,_0x2754de,_0xbbf988=>{const _0x5b37d8=a0_0x58ef;_0xbbf988?(this[_0x5b37d8(0x39e)][_0x5b37d8(0x723)](_0x5b37d8(0x574)+(_0xbbf988 instanceof Error?_0xbbf988[_0x5b37d8(0x33a)]:JSON[_0x5b37d8(0x718)](_0xbbf988,null,0x2))),_0x10866e(_0xbbf988)):(this[_0x5b37d8(0x39e)][_0x5b37d8(0xec)]('File\x20written\x20to\x20path:\x20'+_0x54fdbe),_0xd92e68(_0x54fdbe));});});}async['fetchContacts'](_0x22b88f){const _0x436833=a0_0x37fa70;return await this['repository'][_0x436833(0x489)][_0x436833(0x3b4)](_0x22b88f,this[_0x436833(0x753)]['wuid']);}async[a0_0x37fa70(0x3da)](){const _0x49008e=a0_0x37fa70;return await this[_0x49008e(0x210)][_0x49008e(0x74d)][_0x49008e(0x3b4)]({'where':{}},this['instance'][_0x49008e(0x6e4)]);}async[a0_0x37fa70(0x67b)](_0x2be0b0){const _0x48fa20=a0_0x37fa70;return await this[_0x48fa20(0x210)][_0x48fa20(0x33a)]['find'](_0x2be0b0,this[_0x48fa20(0x753)][_0x48fa20(0x6e4)]);}async[a0_0x37fa70(0x41a)](){const _0x50ff32=a0_0x37fa70;return this['repository']['chat'][_0x50ff32(0x205)](this[_0x50ff32(0x753)][_0x50ff32(0x6e4)]),this[_0x50ff32(0x210)][_0x50ff32(0x4a2)][_0x50ff32(0x680)](this[_0x50ff32(0x753)][_0x50ff32(0x6e4)]),this['repository'][_0x50ff32(0x4a2)][_0x50ff32(0x4df)](this[_0x50ff32(0x753)][_0x50ff32(0x6e4)]),this[_0x50ff32(0x210)]['chat'][_0x50ff32(0x740)](this[_0x50ff32(0x753)][_0x50ff32(0x6e4)]),await this[_0x50ff32(0x210)][_0x50ff32(0x4a2)][_0x50ff32(0x3b4)]({'where':{}},this[_0x50ff32(0x753)][_0x50ff32(0x6e4)]);}async[a0_0x37fa70(0x253)](_0x441d00){const _0x51cb47=a0_0x37fa70;try{if(!Array['isArray'](_0x441d00)||_0x441d00[_0x51cb47(0x426)]===0x0)throw new Error(_0x51cb47(0x13c));let _0x4ef94f=[],_0x1e1097=[];for(let _0x1c1724 of _0x441d00){if(_0x1c1724[_0x51cb47(0x1b0)])_0x1c1724['_id']=this['createJid'](_0x1c1724[_0x51cb47(0x1b0)]);else continue;await this[_0x51cb47(0x210)][_0x51cb47(0x4a2)][_0x51cb47(0x1e2)]({'where':{'_id':_0x1c1724['_id']}},this[_0x51cb47(0x753)]['wuid'])?_0x1e1097[_0x51cb47(0x5ee)]({'_id':_0x1c1724[_0x51cb47(0x1b0)],'leadInfo':_0x1c1724[_0x51cb47(0x500)],'owner':this[_0x51cb47(0x753)]['wuid']}):_0x4ef94f[_0x51cb47(0x5ee)]({'_id':_0x1c1724['_id'],'owner':this[_0x51cb47(0x753)][_0x51cb47(0x6e4)],'leadInfo':_0x1c1724[_0x51cb47(0x500)],'imported':!0x0});}return _0x1e1097[_0x51cb47(0x426)]>0x0&&await this[_0x51cb47(0x210)][_0x51cb47(0x4a2)][_0x51cb47(0x10e)](_0x1e1097[_0x51cb47(0x3c4)](_0x340878=>({'query':{'where':{'_id':_0x340878[_0x51cb47(0x1b0)],'owner':this[_0x51cb47(0x753)][_0x51cb47(0x6e4)]}},'update':_0x340878}))),_0x4ef94f[_0x51cb47(0x426)]>0x0&&await this['repository']['chat'][_0x51cb47(0x75e)](_0x4ef94f,this['instance'][_0x51cb47(0x6e4)]),{'updated':_0x1e1097[_0x51cb47(0x426)],'inserted':_0x4ef94f[_0x51cb47(0x426)]};}catch(_0x32445a){let _0x190d69=_0x51cb47(0x2b0),_0x2bf1a0=_0x32445a instanceof Error?_0x32445a['message']:typeof _0x32445a==_0x51cb47(0x41e)?JSON[_0x51cb47(0x718)](_0x32445a):_0x32445a,_0x576a86=_0x190d69+':\x20'+_0x2bf1a0;throw this[_0x51cb47(0x39e)][_0x51cb47(0x723)](this[_0x51cb47(0x653)]+'\x20('+this[_0x51cb47(0x753)][_0x51cb47(0x6e4)]+'):\x20'+_0x576a86),new m(_0x576a86);}}async[a0_0x37fa70(0x71a)](_0x2e111f){const _0x321f80=a0_0x37fa70;try{if(!Array[_0x321f80(0x72)](_0x2e111f)||_0x2e111f['length']===0x0)throw new Error(_0x321f80(0x13c));let _0x287065=0x64,_0x58411e=0x0;for(let _0x1f0744=0x0;_0x1f0744<_0x2e111f['length'];_0x1f0744+=_0x287065){let _0x198b76=_0x2e111f[_0x321f80(0x70f)](_0x1f0744,_0x1f0744+_0x287065),{updated:_0x454d86}=await this[_0x321f80(0x25c)](_0x198b76);_0x58411e+=_0x454d86;}return{'updated':_0x58411e};}catch(_0x4476ed){let _0x61b4c4='Erro\x20ao\x20importar\x20chats',_0x484ae8=_0x4476ed instanceof Error?_0x4476ed[_0x321f80(0x33a)]:typeof _0x4476ed==_0x321f80(0x41e)?JSON[_0x321f80(0x718)](_0x4476ed):_0x4476ed,_0x116852=_0x61b4c4+':\x20'+_0x484ae8;throw this[_0x321f80(0x39e)][_0x321f80(0x723)](this[_0x321f80(0x653)]+'\x20('+this[_0x321f80(0x753)]['wuid']+'):\x20'+_0x116852),new m(_0x116852);}}async[a0_0x37fa70(0x25c)](_0x88cb0f){const _0x4bc2c6=a0_0x37fa70;try{let _0x4c2b59=await this['repository'][_0x4bc2c6(0x74d)]['find']({'where':{}},this['instance'][_0x4bc2c6(0x6e4)]),_0x294085=new Set(_0x4c2b59['map'](_0x19de65=>_0x19de65[_0x4bc2c6(0x1b0)])),_0x92c55c=[],_0x19c9b2=[];for(let _0x564ace of _0x88cb0f){if(!_0x564ace['_id'])continue;_0x564ace[_0x4bc2c6(0x1b0)]=this[_0x4bc2c6(0x342)](_0x564ace[_0x4bc2c6(0x1b0)]);let _0x1da0c6=await this[_0x4bc2c6(0x210)][_0x4bc2c6(0x4a2)][_0x4bc2c6(0x1e2)]({'where':{'_id':_0x564ace['_id']}},this['instance']['wuid']),_0x19cb90={};if(Object[_0x4bc2c6(0x491)](_0x564ace[_0x4bc2c6(0x500)])[_0x4bc2c6(0x4b7)](([_0x3a0538,_0xbc8267])=>{const _0x1d2bdd=_0x4bc2c6;_0x19cb90[_0x1d2bdd(0xe7)+_0x3a0538]=_0xbc8267;}),_0x1da0c6&&!_0x1da0c6['imported']){let _0x502a85=(_0x564ace[_0x4bc2c6(0x500)][_0x4bc2c6(0x7b2)]||[])['filter'](_0x25fb52=>_0x294085[_0x4bc2c6(0x632)](_0x25fb52)),_0x588869=new Set(_0x1da0c6['leadInfo'][_0x4bc2c6(0x7b2)]||[]),_0x2c24f8=_0x502a85['filter'](_0x36e257=>!_0x588869[_0x4bc2c6(0x632)](_0x36e257)),_0x296947=[..._0x588869][_0x4bc2c6(0x1c2)](_0x379971=>!_0x502a85[_0x4bc2c6(0x14a)](_0x379971));_0x19c9b2[_0x4bc2c6(0x5ee)](..._0x2c24f8[_0x4bc2c6(0x3c4)](_0x12e071=>this['AddChatLabel'](_0x12e071,_0x564ace['_id']))),_0x19c9b2[_0x4bc2c6(0x5ee)](..._0x296947[_0x4bc2c6(0x3c4)](_0x37ac59=>this[_0x4bc2c6(0xc5)](_0x37ac59,_0x564ace['_id']))),_0x564ace[_0x4bc2c6(0x500)][_0x4bc2c6(0x7b2)]=_0x502a85,_0x92c55c[_0x4bc2c6(0x5ee)]({'query':{'where':{'_id':_0x564ace[_0x4bc2c6(0x1b0)],'owner':this[_0x4bc2c6(0x753)][_0x4bc2c6(0x6e4)]}},'update':_0x19cb90});}else _0x19cb90[_0x4bc2c6(0x477)]=!0x0,_0x92c55c[_0x4bc2c6(0x5ee)]({'query':{'where':{'_id':_0x564ace['_id'],'owner':this[_0x4bc2c6(0x753)][_0x4bc2c6(0x6e4)]}},'update':_0x19cb90});}let _0xf4d3d6=await this['repository']['chat'][_0x4bc2c6(0x10e)](_0x92c55c);return await Promise[_0x4bc2c6(0x1ea)](_0x19c9b2),{'updated':_0xf4d3d6};}catch(_0x3c0e26){let _0x4d5f10=_0x4bc2c6(0x2b0),_0x39ab17=_0x3c0e26 instanceof Error?_0x3c0e26['message']:typeof _0x3c0e26=='object'?JSON[_0x4bc2c6(0x718)](_0x3c0e26):_0x3c0e26,_0x450c71=_0x4d5f10+':\x20'+_0x39ab17;throw this[_0x4bc2c6(0x39e)][_0x4bc2c6(0x723)](this[_0x4bc2c6(0x653)]+'\x20('+this['instance'][_0x4bc2c6(0x6e4)]+'):\x20'+_0x450c71),new m(_0x450c71);}}async['fetchPrivacySettings'](){const _0x1e8467=a0_0x37fa70;return await this['client'][_0x1e8467(0x3b3)]();}async[a0_0x37fa70(0x445)](_0x534cd6){const _0x29c119=a0_0x37fa70;try{return await this[_0x29c119(0x688)][_0x29c119(0x4e3)](_0x534cd6['privacySettings'][_0x29c119(0x425)]),await this[_0x29c119(0x688)][_0x29c119(0x3d2)](_0x534cd6[_0x29c119(0x74a)][_0x29c119(0x5f4)]),await this[_0x29c119(0x688)][_0x29c119(0x6c3)](_0x534cd6['privacySettings'][_0x29c119(0x4c1)]),await this[_0x29c119(0x688)]['updateOnlinePrivacy'](_0x534cd6['privacySettings'][_0x29c119(0xcf)]),await this[_0x29c119(0x688)]['updateLastSeenPrivacy'](_0x534cd6[_0x29c119(0x74a)][_0x29c119(0x25b)]),await this[_0x29c119(0x688)][_0x29c119(0x67e)](_0x534cd6[_0x29c119(0x74a)][_0x29c119(0x37c)]),this[_0x29c119(0x688)]?.['ws']?.['close'](),{'update':_0x29c119(0x630),'data':{'readreceipts':_0x534cd6[_0x29c119(0x74a)]['readreceipts'],'profile':_0x534cd6[_0x29c119(0x74a)][_0x29c119(0x5f4)],'status':_0x534cd6[_0x29c119(0x74a)][_0x29c119(0x4c1)],'online':_0x534cd6[_0x29c119(0x74a)][_0x29c119(0xcf)],'last':_0x534cd6[_0x29c119(0x74a)][_0x29c119(0x25b)],'groupadd':_0x534cd6['privacySettings']['groupadd']}};}catch(_0x391a98){let _0x5a8899=_0x29c119(0x673),_0x346b87=_0x391a98 instanceof Error?_0x391a98[_0x29c119(0x33a)]:typeof _0x391a98=='object'?JSON[_0x29c119(0x718)](_0x391a98):_0x391a98,_0x46f131=_0x5a8899+':\x20'+_0x346b87;throw this['logger'][_0x29c119(0x723)](this[_0x29c119(0x653)]+'\x20('+this[_0x29c119(0x753)][_0x29c119(0x6e4)]+_0x29c119(0x17d)+_0x46f131),new m(_0x46f131);}}async[a0_0x37fa70(0x7ba)](_0x2f0f7d){const _0x2a28ef=a0_0x37fa70;let _0x453392=(_0x2f0f7d?this[_0x2a28ef(0x342)](_0x2f0f7d):this[_0x2a28ef(0x688)]?.[_0x2a28ef(0x19d)]?.['id'])[_0x2a28ef(0x2e9)](/:\d{1,2}@/g,'@');this['logger'][_0x2a28ef(0x48f)](this[_0x2a28ef(0x653)]+'\x20('+this[_0x2a28ef(0x753)][_0x2a28ef(0x6e4)]+_0x2a28ef(0x2fe)+_0x453392);let _0x19606e=await this[_0x2a28ef(0x210)]['contact'][_0x2a28ef(0x1e2)]({'where':{'_id':_0x453392}},this[_0x2a28ef(0x753)][_0x2a28ef(0x6e4)]),_0x20beb9=_0x19606e?_0x19606e['pushName']:null;try{let _0x59513e=(await this[_0x2a28ef(0x3c5)]({'numbers':[_0x453392]}))?.[_0x2a28ef(0x5cd)](),_0x138c43=(await this[_0x2a28ef(0x95)](_0x453392,null,!0x1))[_0x2a28ef(0x167)][_0x2a28ef(0x21a)],_0x452ab6=await this[_0x2a28ef(0x612)](_0x59513e?.[_0x2a28ef(0xb1)]),_0x519eee=await this[_0x2a28ef(0x460)](_0x59513e?.[_0x2a28ef(0xb1)]),_0x3aa80c=(await this[_0x2a28ef(0x95)](_0x453392,null,!0x1))['cachedContact'][_0x2a28ef(0x410)],_0x3508a3=await this[_0x2a28ef(0x210)][_0x2a28ef(0x4a2)]['findOne']({'where':{'_id':_0x453392}},this[_0x2a28ef(0x753)][_0x2a28ef(0x6e4)]),_0x2ba760={'imagechat':_0x138c43,'contactname':_0x20beb9||null,'pushName':_0x3aa80c,'status':_0x452ab6?.[_0x2a28ef(0x4c1)],'isBusiness':_0x519eee[_0x2a28ef(0x47f)],'email':_0x519eee?.['email'],'description':_0x519eee?.[_0x2a28ef(0x48c)],'website':_0x519eee?.[_0x2a28ef(0x7c4)]?.['shift'](),'lastcache':Date[_0x2a28ef(0x5cf)](),'imported':!_0x3508a3},_0x532b98=await this[_0x2a28ef(0x210)][_0x2a28ef(0x4a2)]['updateOne']({'where':{'_id':_0x453392}},_0x2ba760,this[_0x2a28ef(0x753)][_0x2a28ef(0x6e4)]),_0x153092={'owner':this[_0x2a28ef(0x753)][_0x2a28ef(0x6e4)],'_id':_0x453392,'profilePictureUrl':_0x138c43,'status':_0x452ab6?.[_0x2a28ef(0x4c1)]};return this[_0x2a28ef(0x210)][_0x2a28ef(0x489)][_0x2a28ef(0x6c8)]([_0x153092],this[_0x2a28ef(0x753)][_0x2a28ef(0x6e4)]),_0x532b98&&q(this[_0x2a28ef(0x653)],_0x2a28ef(0x5c9),{'chat':_0x532b98}),{'wuid':_0x59513e?.['jid']||_0x453392,'name':_0x59513e?.[_0x2a28ef(0x410)],'pushName':_0x3aa80c,'numberExists':_0x59513e?.[_0x2a28ef(0x332)],'picture':_0x138c43,'status':_0x452ab6?.[_0x2a28ef(0x4c1)],'isBusiness':_0x519eee['isBusiness'],'email':_0x519eee?.['email'],'description':_0x519eee?.[_0x2a28ef(0x48c)],'website':_0x519eee?.[_0x2a28ef(0x7c4)]?.[_0x2a28ef(0x5cd)]()};}catch(_0x1c6fec){return this[_0x2a28ef(0x39e)][_0x2a28ef(0x723)](_0x2a28ef(0x3af)+(_0x1c6fec instanceof Error?_0x1c6fec[_0x2a28ef(0x33a)]:JSON[_0x2a28ef(0x718)](_0x1c6fec,null,0x2))),{};}}async[a0_0x37fa70(0x460)](_0x22e1b4){const _0x3ae4cf=a0_0x37fa70;this['logger']['verbose'](this[_0x3ae4cf(0x653)]+'\x20('+this[_0x3ae4cf(0x753)][_0x3ae4cf(0x6e4)]+_0x3ae4cf(0x45a));try{let _0x20faea=_0x22e1b4?this[_0x3ae4cf(0x342)](_0x22e1b4):this[_0x3ae4cf(0x753)]['wuid'],_0x276451=await this[_0x3ae4cf(0x688)][_0x3ae4cf(0xfa)](_0x20faea);return this[_0x3ae4cf(0x39e)]['verbose'](this[_0x3ae4cf(0x653)]+'\x20('+this[_0x3ae4cf(0x753)][_0x3ae4cf(0x6e4)]+'):Trying\x20to\x20get\x20business\x20profile'),_0x276451?(this[_0x3ae4cf(0x39e)]['verbose'](this[_0x3ae4cf(0x653)]+'\x20('+this[_0x3ae4cf(0x753)][_0x3ae4cf(0x6e4)]+_0x3ae4cf(0x3d0)),{'isBusiness':!0x0,..._0x276451}):{'isBusiness':!0x1,'message':_0x3ae4cf(0x40e),...(await this[_0x3ae4cf(0x3c5)]({'numbers':[_0x20faea]}))?.['shift']()};}catch(_0x1b7aeb){let _0x2a988d=_0x3ae4cf(0x4db),_0x4a7a51=_0x1b7aeb instanceof Error?_0x1b7aeb[_0x3ae4cf(0x33a)]:typeof _0x1b7aeb==_0x3ae4cf(0x41e)?JSON['stringify'](_0x1b7aeb):_0x1b7aeb,_0xd51396=_0x2a988d+':\x20'+_0x4a7a51;throw this[_0x3ae4cf(0x39e)][_0x3ae4cf(0x723)](this['instanceName']+'\x20('+this[_0x3ae4cf(0x753)][_0x3ae4cf(0x6e4)]+_0x3ae4cf(0x17d)+_0xd51396),new x(_0xd51396);}}async['getStatus'](_0x50e659){const _0x47a7df=a0_0x37fa70;let _0x3a66af=this[_0x47a7df(0x342)](_0x50e659);try{return{'wuid':_0x3a66af,'status':(await this[_0x47a7df(0x688)][_0x47a7df(0x665)](_0x3a66af))?.[_0x47a7df(0x4c1)]};}catch{return{'wuid':_0x3a66af,'status':null};}}async[a0_0x37fa70(0x490)](_0x107a46){const _0x1d7826=a0_0x37fa70;try{return await this[_0x1d7826(0x688)]['updateProfileName'](_0x107a46),{'update':_0x1d7826(0x630)};}catch(_0x38b3b1){let _0x12d28b=_0x1d7826(0x146),_0x4b0791=_0x38b3b1 instanceof Error?_0x38b3b1['message']:typeof _0x38b3b1==_0x1d7826(0x41e)?JSON[_0x1d7826(0x718)](_0x38b3b1):_0x38b3b1,_0x2e471b=_0x12d28b+':\x20'+_0x4b0791;throw this[_0x1d7826(0x39e)][_0x1d7826(0x723)](this['instanceName']+'\x20('+this[_0x1d7826(0x753)]['wuid']+_0x1d7826(0x17d)+_0x2e471b),new x(_0x2e471b);}}async[a0_0x37fa70(0x4b1)](_0x59745a){const _0x3d344d=a0_0x37fa70;try{return await this[_0x3d344d(0x688)][_0x3d344d(0x4b1)](_0x59745a),{'update':_0x3d344d(0x630)};}catch(_0x17ea24){let _0x4e6c1d=_0x3d344d(0x749),_0x59a4c0=_0x17ea24 instanceof Error?_0x17ea24[_0x3d344d(0x33a)]:typeof _0x17ea24==_0x3d344d(0x41e)?JSON[_0x3d344d(0x718)](_0x17ea24):_0x17ea24,_0x8109bb=_0x4e6c1d+':\x20'+_0x59a4c0;throw this[_0x3d344d(0x39e)][_0x3d344d(0x723)](this['instanceName']+'\x20('+this[_0x3d344d(0x753)][_0x3d344d(0x6e4)]+_0x3d344d(0x17d)+_0x8109bb),new x(_0x8109bb);}}async[a0_0x37fa70(0x52d)](_0x33137c){const _0x5b1e37=a0_0x37fa70;try{let _0x26ccbe;if((0x0,L[_0x5b1e37(0xc8)])(_0x33137c)){let _0x1b8182=new Date()[_0x5b1e37(0x5ac)](),_0x3a3466=_0x33137c+_0x5b1e37(0x47b)+_0x1b8182;_0x26ccbe=(await Z[_0x5b1e37(0x259)][_0x5b1e37(0x7b6)](_0x3a3466,{'responseType':_0x5b1e37(0x1d8)}))[_0x5b1e37(0x349)];}else{if((0x0,L[_0x5b1e37(0x6c0)])(_0x33137c))_0x26ccbe=Buffer[_0x5b1e37(0x27b)](_0x33137c,'base64');else throw new m(_0x5b1e37(0x41b));}return await this[_0x5b1e37(0x688)][_0x5b1e37(0x52d)](this[_0x5b1e37(0x753)][_0x5b1e37(0x6e4)],_0x26ccbe),{'update':'success'};}catch(_0x177544){let _0x4e4c63='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture',_0x3af5d3=_0x177544 instanceof Error?_0x177544[_0x5b1e37(0x33a)]:typeof _0x177544==_0x5b1e37(0x41e)?JSON['stringify'](_0x177544):_0x177544,_0x360503=_0x4e4c63+':\x20'+_0x3af5d3;throw this['logger'][_0x5b1e37(0x723)](this[_0x5b1e37(0x653)]+'\x20('+this['instance'][_0x5b1e37(0x6e4)]+_0x5b1e37(0x17d)+_0x360503),new x(_0x360503);}}async[a0_0x37fa70(0xf2)](){const _0x93d80=a0_0x37fa70;try{return await this[_0x93d80(0x688)][_0x93d80(0xf2)](this[_0x93d80(0x753)][_0x93d80(0x6e4)]),{'update':_0x93d80(0x630)};}catch(_0x4c85e4){let _0x3a1ea7='Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture',_0x2b48ce=_0x4c85e4 instanceof Error?_0x4c85e4[_0x93d80(0x33a)]:typeof _0x4c85e4==_0x93d80(0x41e)?JSON[_0x93d80(0x718)](_0x4c85e4):_0x4c85e4,_0x49ea71=_0x3a1ea7+':\x20'+_0x2b48ce;throw this[_0x93d80(0x39e)][_0x93d80(0x723)](this[_0x93d80(0x653)]+'\x20('+this[_0x93d80(0x753)][_0x93d80(0x6e4)]+_0x93d80(0x17d)+_0x49ea71),new x(_0x49ea71);}}async[a0_0x37fa70(0x7f)](_0x3f74ba){const _0x56f61d=a0_0x37fa70;try{let _0x51baf5=(await this['whatsappNumber']({'numbers':_0x3f74ba[_0x56f61d(0x6a0)]}))[_0x56f61d(0x1c2)](_0x2301c1=>_0x2301c1[_0x56f61d(0x332)])[_0x56f61d(0x3c4)](_0x5048d4=>_0x5048d4['jid']),{id:_0x22fedf}=await this[_0x56f61d(0x688)][_0x56f61d(0x695)](_0x3f74ba[_0x56f61d(0x441)],_0x51baf5);_0x3f74ba?.[_0x56f61d(0x48c)]&&await this[_0x56f61d(0x688)]['groupUpdateDescription'](_0x22fedf,_0x3f74ba[_0x56f61d(0x48c)]);let _0x2dca6c=await this[_0x56f61d(0x688)]['groupMetadata'](_0x22fedf);return _0x2dca6c['awaitingApproval']=[],{'metadata':_0x2dca6c};}catch(_0x480a8e){let _0x153b8f='Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup',_0x5b7841=_0x480a8e instanceof Error?_0x480a8e[_0x56f61d(0x33a)]:typeof _0x480a8e==_0x56f61d(0x41e)?JSON[_0x56f61d(0x718)](_0x480a8e):_0x480a8e,_0x39685a=_0x153b8f+':\x20'+_0x5b7841;throw this[_0x56f61d(0x39e)][_0x56f61d(0x723)](this[_0x56f61d(0x653)]+'\x20('+this['instance'][_0x56f61d(0x6e4)]+'):\x20'+_0x39685a),new x(_0x39685a);}}async[a0_0x37fa70(0x3e6)](_0x55ff2a){const _0x1e2742=a0_0x37fa70;try{if(_0x55ff2a[_0x1e2742(0x18b)]===!0x0&&await this[_0x1e2742(0x688)]['groupSettingUpdate'](_0x55ff2a['groupJid'],_0x1e2742(0x197)),_0x55ff2a[_0x1e2742(0x18b)]===!0x1&&await this[_0x1e2742(0x688)]['groupSettingUpdate'](_0x55ff2a[_0x1e2742(0x211)],_0x1e2742(0x34d)),_0x55ff2a[_0x1e2742(0x2a8)]===!0x0&&await this['client']['groupSettingUpdate'](_0x55ff2a[_0x1e2742(0x211)],_0x1e2742(0x78f)),_0x55ff2a['announce']===!0x1&&await this[_0x1e2742(0x688)][_0x1e2742(0x320)](_0x55ff2a[_0x1e2742(0x211)],_0x1e2742(0x1c0)),_0x55ff2a[_0x1e2742(0x4e6)]===!0x0&&await this[_0x1e2742(0x688)]['groupMemberAddMode'](_0x55ff2a[_0x1e2742(0x211)],_0x1e2742(0x7ae)),_0x55ff2a[_0x1e2742(0x4e6)]===!0x1&&await this[_0x1e2742(0x688)][_0x1e2742(0x439)](_0x55ff2a['groupJid'],_0x1e2742(0x4a3)),_0x55ff2a['joinApprovalMode']===!0x0&&await this[_0x1e2742(0x688)][_0x1e2742(0x607)](_0x55ff2a[_0x1e2742(0x211)],'on'),_0x55ff2a[_0x1e2742(0x152)]===!0x1&&await this[_0x1e2742(0x688)]['groupJoinApprovalMode'](_0x55ff2a[_0x1e2742(0x211)],_0x1e2742(0x29f)),typeof _0x55ff2a[_0x1e2742(0x392)]<'u'&&_0x55ff2a['expiration']!==null&&await this[_0x1e2742(0x688)][_0x1e2742(0x581)](_0x55ff2a[_0x1e2742(0x211)],_0x55ff2a[_0x1e2742(0x392)]),_0x55ff2a['name']&&await this[_0x1e2742(0x688)][_0x1e2742(0x291)](_0x55ff2a[_0x1e2742(0x211)],_0x55ff2a[_0x1e2742(0x410)]),_0x55ff2a[_0x1e2742(0x48c)]&&await this[_0x1e2742(0x688)][_0x1e2742(0x40c)](_0x55ff2a[_0x1e2742(0x211)],_0x55ff2a[_0x1e2742(0x48c)]),_0x55ff2a['image']){let _0x5ebafc;if((0x0,L[_0x1e2742(0xc8)])(_0x55ff2a[_0x1e2742(0x1b2)])){let _0x44194b=new Date()[_0x1e2742(0x5ac)](),_0x16f4e0=_0x55ff2a[_0x1e2742(0x1b2)]+_0x1e2742(0x47b)+_0x44194b;_0x5ebafc=(await Z[_0x1e2742(0x259)]['get'](_0x16f4e0,{'responseType':'arraybuffer'}))['data'];}else{if((0x0,L[_0x1e2742(0x6c0)])(_0x55ff2a[_0x1e2742(0x1b2)]))_0x5ebafc=Buffer[_0x1e2742(0x27b)](_0x55ff2a[_0x1e2742(0x1b2)],_0x1e2742(0xf5));else throw new m(_0x1e2742(0x41b));}await this[_0x1e2742(0x688)][_0x1e2742(0x52d)](_0x55ff2a[_0x1e2742(0x211)],_0x5ebafc);}return await this[_0x1e2742(0x5c2)]({'groupJid':_0x55ff2a['groupJid']});}catch(_0x24e1cd){let _0x32194c=_0x1e2742(0x6f),_0x1c9997=_0x24e1cd instanceof Error?_0x24e1cd[_0x1e2742(0x33a)]:typeof _0x24e1cd=='object'?JSON[_0x1e2742(0x718)](_0x24e1cd):_0x24e1cd,_0x1c81e9=_0x32194c+':\x20'+_0x1c9997;throw this[_0x1e2742(0x39e)]['error'](this['instanceName']+'\x20('+this[_0x1e2742(0x753)][_0x1e2742(0x6e4)]+_0x1e2742(0x17d)+_0x1c81e9),new x(_0x1c81e9);}}async[a0_0x37fa70(0x4f9)](_0x181841){const _0x20b2b9=a0_0x37fa70;try{if(_0x181841[_0x20b2b9(0x56e)]===_0x20b2b9(0x192)||_0x181841[_0x20b2b9(0x56e)]===_0x20b2b9(0x11a)){let _0x379259=_0x181841['participants'][_0x20b2b9(0x3c4)](_0x219010=>this[_0x20b2b9(0x342)](_0x219010));await this[_0x20b2b9(0x688)][_0x20b2b9(0x738)](_0x181841[_0x20b2b9(0x211)],_0x379259,_0x181841[_0x20b2b9(0x56e)]);}else{if(_0x181841[_0x20b2b9(0x56e)]==='add'){let _0x25b07a=(await this[_0x20b2b9(0x3c5)]({'numbers':_0x181841[_0x20b2b9(0x6a0)]}))[_0x20b2b9(0x1c2)](_0x5cb77f=>_0x5cb77f[_0x20b2b9(0x332)])[_0x20b2b9(0x3c4)](_0x40296f=>this[_0x20b2b9(0x342)](_0x40296f[_0x20b2b9(0xb1)]));if(_0x25b07a[_0x20b2b9(0x426)]===0x0)throw new m('Nenhum\x20participante\x20válido\x20encontrado.');await this[_0x20b2b9(0x688)][_0x20b2b9(0x46c)](_0x181841[_0x20b2b9(0x211)],_0x25b07a,_0x20b2b9(0xf8));}else{let _0x26f919=_0x181841[_0x20b2b9(0x6a0)]['map'](_0x5d3cff=>this[_0x20b2b9(0x342)](_0x5d3cff));await this[_0x20b2b9(0x688)][_0x20b2b9(0x46c)](_0x181841['groupJid'],_0x26f919,_0x181841[_0x20b2b9(0x56e)]);}}return await this[_0x20b2b9(0x5c2)]({'groupJid':_0x181841[_0x20b2b9(0x211)]});}catch(_0x3f6c14){let _0x17cf65='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant',_0x59ecea=_0x3f6c14 instanceof Error?_0x3f6c14[_0x20b2b9(0x33a)]:typeof _0x3f6c14==_0x20b2b9(0x41e)?JSON['stringify'](_0x3f6c14):_0x3f6c14,_0x569a12=_0x17cf65+':\x20'+_0x59ecea;throw this[_0x20b2b9(0x39e)]['error'](this[_0x20b2b9(0x653)]+'\x20('+this[_0x20b2b9(0x753)][_0x20b2b9(0x6e4)]+_0x20b2b9(0x17d)+_0x569a12),new m(_0x569a12);}}async[a0_0x37fa70(0x6fd)](_0x51abf7){const _0x507a3f=a0_0x37fa70;try{return await this[_0x507a3f(0x688)]['groupGetInviteInfo'](_0x51abf7[_0x507a3f(0x4d4)]);}catch(_0x71e5a){let _0x2bfc85='Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo',_0x2c6d37=_0x71e5a instanceof Error?_0x71e5a[_0x507a3f(0x33a)]:typeof _0x71e5a=='object'?JSON['stringify'](_0x71e5a):_0x71e5a,_0x48a8b8=_0x2bfc85+':\x20'+_0x2c6d37;throw this['logger'][_0x507a3f(0x723)](this[_0x507a3f(0x653)]+'\x20('+this[_0x507a3f(0x753)][_0x507a3f(0x6e4)]+_0x507a3f(0x17d)+_0x48a8b8),new m(_0x48a8b8);}}async[a0_0x37fa70(0x5c2)](_0x2a7c27,_0x3da597=a0_0x37fa70(0x7b4)){const _0x5eace4=a0_0x37fa70;try{let _0x47b4c1=await this['repository'][_0x5eace4(0x4a2)]['findOne']({'where':{'_id':_0x2a7c27[_0x5eace4(0x211)]}},this[_0x5eace4(0x753)][_0x5eace4(0x6e4)]),_0x120500=_0x47b4c1?_0x47b4c1[_0x5eace4(0xbe)]:null,_0x5b22a2=0x18*0x3c*0x3c*0x3e8;if(!_0x120500||_0x120500[_0x5eace4(0x6f2)]&&Date['now']()-_0x120500[_0x5eace4(0x6f2)]>_0x5b22a2){let _0x4249d4=await this[_0x5eace4(0x688)][_0x5eace4(0x257)](_0x2a7c27[_0x5eace4(0x211)]);if(_0x4249d4[_0x5eace4(0x247)]=_0x4249d4?.[_0x5eace4(0x247)]&&_0x4249d4[_0x5eace4(0x247)][_0x5eace4(0x2c5)]()[_0x5eace4(0x426)]<0xd?_0x4249d4?.[_0x5eace4(0x247)]*0x3e8:_0x4249d4?.[_0x5eace4(0x247)]||null,_0x4249d4[_0x5eace4(0x584)]=_0x4249d4?.['creation']&&_0x4249d4[_0x5eace4(0x584)][_0x5eace4(0x2c5)]()['length']<0xd?_0x4249d4?.[_0x5eace4(0x584)]*0x3e8:_0x4249d4?.[_0x5eace4(0x584)]||null,_0x120500={..._0x4249d4,'lastUpdate':Date[_0x5eace4(0x5cf)]()},!_0x4249d4)return;}let _0x45497e=_0x120500[_0x5eace4(0x6a0)]['some'](_0x2ce687=>_0x2ce687['id']===this[_0x5eace4(0x753)][_0x5eace4(0x6e4)]+_0x5eace4(0x561)&&_0x2ce687[_0x5eace4(0x3fa)]!=null);!_0x120500[_0x5eace4(0x4d4)]&&_0x45497e&&(_0x120500[_0x5eace4(0x4d4)]=(await this['inviteCode'](_0x2a7c27,!0x1))['inviteUrl']);let _0x50e383=(!_0x120500[_0x5eace4(0x2a8)]||_0x45497e)&&(!_0x120500[_0x5eace4(0x638)]||_0x120500[_0x5eace4(0x638)]&&_0x120500[_0x5eace4(0x7ab)]&&_0x45497e);_0x120500['isAdmin']=_0x45497e,_0x120500[_0x5eace4(0x697)]=_0x50e383;let _0x172134=[];if(_0x45497e&&_0x120500[_0x5eace4(0x152)])try{_0x172134=await this[_0x5eace4(0x688)][_0x5eace4(0x321)](_0x2a7c27[_0x5eace4(0x211)]),_0x120500[_0x5eace4(0x229)]=Date[_0x5eace4(0x5cf)]();}catch(_0x30c2eb){this['logger']['verbose'](this[_0x5eace4(0x653)]+'\x20('+this[_0x5eace4(0x753)][_0x5eace4(0x6e4)]+_0x5eace4(0x227)+_0x2a7c27[_0x5eace4(0x211)]+':\x20'+(_0x30c2eb instanceof Error?_0x30c2eb[_0x5eace4(0x33a)]:JSON[_0x5eace4(0x718)](_0x30c2eb,null,0x2)));}try{_0x120500[_0x5eace4(0x1b2)]=(await this[_0x5eace4(0x95)](_0x2a7c27[_0x5eace4(0x211)],null,!0x0))['cachedContact'][_0x5eace4(0x21a)];}catch(_0x6389dd){this[_0x5eace4(0x39e)][_0x5eace4(0x48f)](this['instanceName']+'\x20('+this[_0x5eace4(0x753)][_0x5eace4(0x6e4)]+_0x5eace4(0x117)+_0x2a7c27[_0x5eace4(0x211)]+':\x20'+(_0x6389dd instanceof Error?_0x6389dd[_0x5eace4(0x33a)]:JSON['stringify'](_0x6389dd,null,0x2)));}let _0x137679=_0x120500['participants'][_0x5eace4(0x3c4)](_0x182937=>_0x182937['id']),_0x50c0f0=_0x172134['map'](_0xab0ac9=>_0xab0ac9['jid']),_0x461ca6=await this[_0x5eace4(0x210)][_0x5eace4(0x5c6)]['findManyByIds']([..._0x137679,..._0x50c0f0]);_0x120500[_0x5eace4(0x6a0)]=_0x120500[_0x5eace4(0x6a0)][_0x5eace4(0x3c4)](_0x36035d=>{const _0xc1e40b=_0x5eace4;let _0x1afa7f=_0x461ca6[_0xc1e40b(0x3b4)](_0x25794b=>_0x25794b[_0xc1e40b(0x1b0)]===_0x36035d['id']);return{'id':_0x36035d['id'],'isAdmin':[_0xc1e40b(0x3fa),_0xc1e40b(0x731)]['includes'](_0x36035d[_0xc1e40b(0x3fa)]),'admin':_0x36035d[_0xc1e40b(0x3fa)],'pushName':_0x1afa7f?.[_0xc1e40b(0x410)],'profilePictureUrl':_0x1afa7f?.['pictureUrl']};}),_0x120500[_0x5eace4(0x7a)]=_0x172134['map'](_0x551db1=>{const _0xa8f62=_0x5eace4;let _0x144bc5=_0x461ca6[_0xa8f62(0x3b4)](_0x594954=>_0x594954[_0xa8f62(0x1b0)]===_0x551db1[_0xa8f62(0xb1)]);return{'id':_0x551db1[_0xa8f62(0xb1)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x144bc5?.[_0xa8f62(0x410)],'profilePictureUrl':_0x144bc5?.['pictureUrl'],'request_method':_0x551db1[_0xa8f62(0xdb)],'request_time':_0x551db1[_0xa8f62(0x57e)]};});let _0x1edcfb=await this[_0x5eace4(0x210)][_0x5eace4(0x4a2)][_0x5eace4(0x130)]({'where':{'_id':_0x2a7c27[_0x5eace4(0x211)]}},{'imagechat':_0x120500['image'],'name':_0x120500[_0x5eace4(0x441)],'lastcache':Date[_0x5eace4(0x5cf)](),'groupdata':_0x120500},this['instance'][_0x5eace4(0x6e4)]);return q(this['instanceName'],_0x5eace4(0x5c9),{'chat':_0x1edcfb}),{'metadata':_0x120500};}catch(_0x47fc38){if(_0x3da597==='inner')return;throw new V('Error\x20fetching\x20group',_0x47fc38['message'][_0x5eace4(0x2c5)]());}}async[a0_0x37fa70(0x511)](){const _0x4625bb=a0_0x37fa70;try{let _0x6abcf5=[],_0x1f449e=await this[_0x4625bb(0x688)][_0x4625bb(0x647)](),_0x36ca05=Object['values'](_0x1f449e),_0x437376=_0x36ca05[_0x4625bb(0x1c2)](_0x4ec062=>(0x0,w[_0x4625bb(0x252)])(_0x4ec062?.['id']))[_0x4625bb(0x3c4)](async _0x43da7c=>{const _0x4d8f61=_0x4625bb;try{return await this[_0x4d8f61(0x688)][_0x4d8f61(0x434)](_0x43da7c['id'],_0x4d8f61(0x341));}catch(_0x5efbc9){return this[_0x4d8f61(0x39e)][_0x4d8f61(0x48f)](this[_0x4d8f61(0x653)]+'\x20('+this[_0x4d8f61(0x753)][_0x4d8f61(0x6e4)]+_0x4d8f61(0x117)+_0x43da7c['id']+':\x20'+(_0x5efbc9 instanceof Error?_0x5efbc9[_0x4d8f61(0x33a)]:JSON[_0x4d8f61(0x718)](_0x5efbc9,null,0x2))),null;}}),_0x10f517=await Promise[_0x4625bb(0x1ea)](_0x437376);for(let _0x545d9c=0x0;_0x545d9c<_0x36ca05['length'];_0x545d9c++){let _0x16e730=_0x36ca05[_0x545d9c];(0x0,w[_0x4625bb(0x252)])(_0x16e730?.['id'])&&(_0x6abcf5[_0x4625bb(0x5ee)]({'groupJid':_0x16e730?.['id'],'subject':_0x16e730?.['subject'],'subjectOwner':_0x16e730?.[_0x4625bb(0x2cc)]?.['split']('@')[0x0],'subjectTime':_0x16e730?.[_0x4625bb(0x247)],'creation':_0x16e730?.[_0x4625bb(0x584)],'size':_0x16e730?.['participants']?.[_0x4625bb(0x426)],'owner':_0x16e730?.[_0x4625bb(0x5d3)]?.[_0x4625bb(0x213)]('@')[0x0],'desc':_0x16e730?.[_0x4625bb(0x164)],'restrict':_0x16e730?.[_0x4625bb(0x18b)],'announce':_0x16e730?.[_0x4625bb(0x2a8)],'image':_0x10f517[_0x545d9c],'isCommunity':_0x16e730?.[_0x4625bb(0x638)],'joinApprovalMode':_0x16e730?.['joinApprovalMode'],'memberCanAddParticipant':_0x16e730?.['memberAddMode'],'participants':_0x16e730?.['participants'],'descOwner':_0x16e730?.['descOwner'],'descId':_0x16e730?.['descId'],'memberAddMode':_0x16e730?.[_0x4625bb(0x4e6)],'isCommunityAnnounce':_0x16e730?.[_0x4625bb(0x7ab)],'ephemeralDuration':_0x16e730?.[_0x4625bb(0x3c7)]||0x0,'author':_0x16e730?.['author']}),this['updateChatGroupData'](_0x36ca05[_0x545d9c]));}return _0x6abcf5;}catch(_0x5a7599){let _0x53b97d=_0x4625bb(0x3f9),_0x3d11f4=_0x5a7599 instanceof Error?_0x5a7599[_0x4625bb(0x33a)]:typeof _0x5a7599==_0x4625bb(0x41e)?JSON['stringify'](_0x5a7599):_0x5a7599,_0x347b87=_0x53b97d+':\x20'+_0x3d11f4;throw this[_0x4625bb(0x39e)][_0x4625bb(0x723)](this[_0x4625bb(0x653)]+'\x20('+this[_0x4625bb(0x753)][_0x4625bb(0x6e4)]+_0x4625bb(0x17d)+_0x347b87),new V(_0x347b87);}}async['updateChatGroupData'](_0x13c9ec){const _0x3dc291=a0_0x37fa70;let _0x36f34a=await this[_0x3dc291(0x210)][_0x3dc291(0x4a2)][_0x3dc291(0x1e2)]({'where':{'_id':_0x13c9ec['id']}},this['instance'][_0x3dc291(0x6e4)]);_0x13c9ec[_0x3dc291(0x247)]=_0x13c9ec?.[_0x3dc291(0x247)]&&_0x13c9ec[_0x3dc291(0x247)][_0x3dc291(0x2c5)]()[_0x3dc291(0x426)]<0xd?_0x13c9ec?.[_0x3dc291(0x247)]*0x3e8:_0x13c9ec?.[_0x3dc291(0x247)]||null,_0x13c9ec[_0x3dc291(0x584)]=_0x13c9ec?.[_0x3dc291(0x584)]&&_0x13c9ec['creation'][_0x3dc291(0x2c5)]()[_0x3dc291(0x426)]<0xd?_0x13c9ec?.[_0x3dc291(0x584)]*0x3e8:_0x13c9ec?.[_0x3dc291(0x584)]||null;let _0x1731bc=_0x36f34a?.[_0x3dc291(0xbe)]?.[_0x3dc291(0x7a)]||[],_0x458da5=_0x36f34a?.[_0x3dc291(0xbe)]?.[_0x3dc291(0x229)],_0x337835=_0x13c9ec[_0x3dc291(0x6a0)][_0x3dc291(0x3c4)](_0x103ca6=>{const _0x48fd76=_0x3dc291;let _0x3b4b5f=_0x36f34a?.[_0x48fd76(0xbe)]?.[_0x48fd76(0x6a0)]['find'](_0x38b0bf=>_0x38b0bf['id']===_0x103ca6['id']);return{..._0x103ca6,'isAdmin':[_0x48fd76(0x3fa),_0x48fd76(0x731)][_0x48fd76(0x14a)](_0x103ca6[_0x48fd76(0x3fa)]),'admin':_0x103ca6[_0x48fd76(0x3fa)],'name':_0x3b4b5f?.[_0x48fd76(0x410)]||_0x103ca6[_0x48fd76(0x410)],'imgUrl':_0x3b4b5f?.[_0x48fd76(0x37d)]||_0x103ca6[_0x48fd76(0x37d)]};}),_0x2ff02f=_0x337835[_0x3dc291(0xa6)](_0x170e94=>_0x170e94['id']===this[_0x3dc291(0x753)][_0x3dc291(0x6e4)]+_0x3dc291(0x561)&&_0x170e94[_0x3dc291(0x53a)]),_0x515b27=(!_0x13c9ec[_0x3dc291(0x2a8)]||_0x2ff02f)&&(!_0x13c9ec['isCommunity']||_0x13c9ec[_0x3dc291(0x638)]&&_0x13c9ec['isCommunityAnnounce']&&_0x2ff02f),_0x563b34={..._0x13c9ec,'participants':_0x337835,'awaitingApproval':_0x1731bc,'lastFetchAwaitingApproval':_0x458da5,'isAdmin':_0x2ff02f,'canSendMessage':_0x515b27,'lastUpdate':Date['now']()};await this[_0x3dc291(0x210)][_0x3dc291(0x4a2)][_0x3dc291(0x130)]({'where':{'_id':_0x13c9ec['id']}},{'name':_0x13c9ec['subject'],'group':!0x0,'groupdata':_0x563b34,'lastcache':Date[_0x3dc291(0x5cf)]()},this[_0x3dc291(0x753)]['wuid']),q(this[_0x3dc291(0x653)],_0x3dc291(0x5c9),{'chat':_0x13c9ec});}async[a0_0x37fa70(0x764)](_0x5e8417){const _0xe4db22=a0_0x37fa70;let _0x2625a3=await this['repository'][_0xe4db22(0x4a2)][_0xe4db22(0x1e2)]({'where':{'_id':_0x5e8417['id']}},this['instance'][_0xe4db22(0x6e4)]);_0x5e8417[_0xe4db22(0x247)]=_0x5e8417?.[_0xe4db22(0x247)]&&_0x5e8417[_0xe4db22(0x247)][_0xe4db22(0x2c5)]()[_0xe4db22(0x426)]<0xd?_0x5e8417?.['subjectTime']*0x3e8:_0x5e8417?.['subjectTime']||null,_0x5e8417[_0xe4db22(0x584)]=_0x5e8417?.[_0xe4db22(0x584)]&&_0x5e8417[_0xe4db22(0x584)][_0xe4db22(0x2c5)]()['length']<0xd?_0x5e8417?.[_0xe4db22(0x584)]*0x3e8:_0x5e8417?.['creation']||null,_0x5e8417[_0xe4db22(0x4d4)]&&(_0x5e8417[_0xe4db22(0x4d4)]=_0xe4db22(0x790)+_0x5e8417[_0xe4db22(0x4d4)]);let _0x4f8960=_0x2625a3?.[_0xe4db22(0xbe)]?{..._0x2625a3[_0xe4db22(0xbe)]}:{};Object[_0xe4db22(0x674)](_0x5e8417)[_0xe4db22(0x4b7)](_0x16ba11=>{_0x16ba11!=='id'&&(_0x4f8960[_0x16ba11]=_0x5e8417[_0x16ba11]);});let _0x5afff7=_0x4f8960[_0xe4db22(0x6a0)]?.['some'](_0x4236b1=>_0x4236b1['id']===this['instance'][_0xe4db22(0x6e4)]+'@s.whatsapp.net'&&_0x4236b1['isAdmin'])||!0x1;_0x4f8960[_0xe4db22(0x53a)]=_0x5afff7;let _0x3f6148=(!_0x4f8960[_0xe4db22(0x2a8)]||_0x5afff7)&&(!_0x4f8960[_0xe4db22(0x638)]||_0x4f8960[_0xe4db22(0x638)]&&_0x4f8960[_0xe4db22(0x7ab)]&&_0x5afff7);_0x4f8960[_0xe4db22(0x697)]=_0x3f6148;let _0x4d8beb={'group':!0x0,'groupdata':_0x4f8960};_0x5e8417['subject']&&(_0x4d8beb[_0xe4db22(0x410)]=_0x5e8417[_0xe4db22(0x441)]),await this[_0xe4db22(0x210)]['chat']['updateOne']({'where':{'_id':_0x5e8417['id']}},_0x4d8beb,this[_0xe4db22(0x753)][_0xe4db22(0x6e4)],{'upsert':!0x0}),q(this[_0xe4db22(0x653)],_0xe4db22(0x5c9),{'chat':_0x4d8beb});}async['updateGroupParticipantsWebhook'](_0x18a25d){const _0x24fb6d=a0_0x37fa70;let _0x33e06f=await this[_0x24fb6d(0x210)][_0x24fb6d(0x4a2)][_0x24fb6d(0x1e2)]({'where':{'_id':_0x18a25d['id']}},this[_0x24fb6d(0x753)]['wuid']);if(!_0x33e06f||!_0x33e06f[_0x24fb6d(0xbe)]){this[_0x24fb6d(0x39e)][_0x24fb6d(0x11b)](this[_0x24fb6d(0x653)]+'\x20('+this[_0x24fb6d(0x753)][_0x24fb6d(0x6e4)]+'):\x20\x27Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x27,\x20'+_0x18a25d['id']);return;}let _0x18c051=await this[_0x24fb6d(0x210)][_0x24fb6d(0x5c6)][_0x24fb6d(0x283)](_0x18a25d[_0x24fb6d(0x6a0)]),_0x380f24=[..._0x33e06f[_0x24fb6d(0xbe)]?.[_0x24fb6d(0x6a0)]];switch(_0x18a25d[_0x24fb6d(0x56e)]){case _0x24fb6d(0xf8):let _0xae9fb=_0x18c051[_0x24fb6d(0x3c4)](_0x462165=>({'id':_0x462165[_0x24fb6d(0x1b0)],'isAdmin':!0x1,'name':_0x462165[_0x24fb6d(0x410)],'imgUrl':_0x462165['pictureUrl']}));_0x380f24=[..._0x380f24,..._0xae9fb];break;case _0x24fb6d(0x5f0):_0x380f24=_0x380f24['filter'](_0x10da90=>!_0x18a25d[_0x24fb6d(0x6a0)][_0x24fb6d(0x14a)](_0x10da90['id']));break;case'promote':case _0x24fb6d(0x42e):_0x380f24=_0x380f24[_0x24fb6d(0x3c4)](_0x2e32e7=>_0x18a25d[_0x24fb6d(0x6a0)][_0x24fb6d(0x14a)](_0x2e32e7['id'])?{..._0x2e32e7,'isAdmin':_0x18a25d['action']===_0x24fb6d(0x3ac)}:_0x2e32e7);break;}let _0x2fb646=_0x380f24['length'],_0x459da3=_0x380f24[_0x24fb6d(0xa6)](_0x218827=>_0x218827['id']===this['instance'][_0x24fb6d(0x6e4)]+'@s.whatsapp.net'),_0x4a4f75=_0x459da3&&_0x380f24['some'](_0x5a10b6=>_0x5a10b6['id']===this[_0x24fb6d(0x753)][_0x24fb6d(0x6e4)]+_0x24fb6d(0x561)&&_0x5a10b6[_0x24fb6d(0x53a)]),_0x122048=_0x459da3&&(!_0x33e06f[_0x24fb6d(0xbe)][_0x24fb6d(0x2a8)]||_0x4a4f75)&&(!_0x33e06f[_0x24fb6d(0xbe)][_0x24fb6d(0x638)]||_0x33e06f[_0x24fb6d(0xbe)]['isCommunity']&&_0x4a4f75);await this['repository']['chat'][_0x24fb6d(0x130)]({'where':{'_id':_0x18a25d['id']}},{'groupdata':{..._0x33e06f[_0x24fb6d(0xbe)],'participants':_0x380f24,'size':_0x2fb646,'isAdmin':_0x4a4f75,'canSendMessage':_0x122048}},this[_0x24fb6d(0x753)][_0x24fb6d(0x6e4)]),this['logger'][_0x24fb6d(0x11b)](this[_0x24fb6d(0x653)]+'\x20('+this[_0x24fb6d(0x753)][_0x24fb6d(0x6e4)]+_0x24fb6d(0x2dd)+_0x18a25d['id']+_0x24fb6d(0x129)+_0x18a25d['action']+_0x24fb6d(0x3a0)+_0x2fb646+',\x20isAdmin:\x20'+_0x4a4f75+_0x24fb6d(0xef)+_0x122048);}async['inviteCode'](_0x1a155c,_0x23679b=!0x0){const _0x1faf5b=a0_0x37fa70;try{let _0x532ce7=await this[_0x1faf5b(0x688)][_0x1faf5b(0x516)](_0x1a155c['groupJid']),_0x1fe0ab={'groupdata.inviteCode':_0x1faf5b(0x790)+_0x532ce7};if(_0x23679b){let _0x15f81c=await this['repository'][_0x1faf5b(0x4a2)][_0x1faf5b(0x130)]({'where':{'_id':_0x1a155c[_0x1faf5b(0x211)]}},_0x1fe0ab,this[_0x1faf5b(0x753)][_0x1faf5b(0x6e4)]);}return{'inviteUrl':_0x1faf5b(0x790)+_0x532ce7,'inviteCode':_0x532ce7};}catch(_0x5d6467){let _0x56181e=_0x1faf5b(0x42d),_0x73f5d9=_0x5d6467 instanceof Error?_0x5d6467[_0x1faf5b(0x33a)]:typeof _0x5d6467=='object'?JSON['stringify'](_0x5d6467):_0x5d6467,_0x173675=_0x56181e+':\x20'+_0x73f5d9;throw this[_0x1faf5b(0x39e)][_0x1faf5b(0x723)](this[_0x1faf5b(0x653)]+'\x20('+this[_0x1faf5b(0x753)][_0x1faf5b(0x6e4)]+_0x1faf5b(0x17d)+_0x173675),new V(_0x173675);}}async[a0_0x37fa70(0x2d6)](_0x58a4a8){const _0x42fad5=a0_0x37fa70;try{let _0x17aeb0=await this['client'][_0x42fad5(0x70e)](_0x58a4a8['groupJid']);return{'revoked':!0x0,'inviteUrl':_0x42fad5(0x790)+_0x17aeb0,'inviteCode':_0x17aeb0};}catch(_0x873d87){let _0x31cab4=_0x42fad5(0x293),_0x3e65cf=_0x873d87 instanceof Error?_0x873d87[_0x42fad5(0x33a)]:typeof _0x873d87==_0x42fad5(0x41e)?JSON['stringify'](_0x873d87):_0x873d87,_0x254265=_0x31cab4+':\x20'+_0x3e65cf;throw this[_0x42fad5(0x39e)][_0x42fad5(0x723)](this[_0x42fad5(0x653)]+'\x20('+this[_0x42fad5(0x753)]['wuid']+'):\x20'+_0x254265),new V(_0x254265);}}async[a0_0x37fa70(0x84)](_0x34330e){const _0x3de195=a0_0x37fa70;try{if((0x0,L[_0x3de195(0xc8)])(_0x34330e[_0x3de195(0x4d4)]))var _0x1e2b1f=_0x34330e[_0x3de195(0x4d4)]['split']('/')[0x3];else var _0x1e2b1f=_0x34330e[_0x3de195(0x4d4)];let _0x165901=await this[_0x3de195(0x688)][_0x3de195(0x5d7)](_0x1e2b1f);return this[_0x3de195(0x39e)]['verbose'](this[_0x3de195(0x653)]+'\x20('+this[_0x3de195(0x753)][_0x3de195(0x6e4)]+_0x3de195(0x17d)+_0x165901),{'join':!0x0,'inviteCode':_0x1e2b1f,'groupJid':_0x165901};}catch(_0x26ab82){let _0x3eaa0c=_0x3de195(0x3d8),_0x22a8cd=_0x26ab82 instanceof Error?_0x26ab82['message']:typeof _0x26ab82==_0x3de195(0x41e)?JSON[_0x3de195(0x718)](_0x26ab82):_0x26ab82,_0x1be308=_0x3eaa0c+':\x20'+_0x22a8cd;throw this[_0x3de195(0x39e)][_0x3de195(0x723)](this[_0x3de195(0x653)]+'\x20('+this[_0x3de195(0x753)][_0x3de195(0x6e4)]+_0x3de195(0x17d)+_0x1be308),new V(_0x1be308);}}async[a0_0x37fa70(0x687)](_0x31225f){const _0x294181=a0_0x37fa70;try{return{'participants':(await this[_0x294181(0x210)][_0x294181(0x4a2)]['findOne']({'where':{'_id':_0x31225f[_0x294181(0x211)]}},this[_0x294181(0x753)][_0x294181(0x6e4)]))[_0x294181(0xbe)][_0x294181(0x6a0)]};}catch(_0x32a786){let _0xbb111e=_0x294181(0x4b4),_0xcee4b=_0x32a786 instanceof Error?_0x32a786[_0x294181(0x33a)]:typeof _0x32a786==_0x294181(0x41e)?JSON[_0x294181(0x718)](_0x32a786):_0x32a786,_0x4cd58c=_0xbb111e+':\x20'+_0xcee4b;throw this['logger'][_0x294181(0x723)](this[_0x294181(0x653)]+'\x20('+this['instance'][_0x294181(0x6e4)]+_0x294181(0x17d)+_0x4cd58c),new V(_0x4cd58c);}}async['leaveGroup'](_0x2747f1){const _0x10311a=a0_0x37fa70;try{return await this['client']['groupLeave'](_0x2747f1[_0x10311a(0x211)]),{'groupJid':_0x2747f1[_0x10311a(0x211)],'leave':!0x0};}catch(_0x52f43e){let _0x265dcd=_0x10311a(0xb2),_0x108548=_0x52f43e instanceof Error?_0x52f43e[_0x10311a(0x33a)]:typeof _0x52f43e==_0x10311a(0x41e)?JSON[_0x10311a(0x718)](_0x52f43e):_0x52f43e,_0x235c81=_0x265dcd+':\x20'+_0x108548;throw this[_0x10311a(0x39e)][_0x10311a(0x723)](this[_0x10311a(0x653)]+'\x20('+this[_0x10311a(0x753)]['wuid']+_0x10311a(0x17d)+_0x235c81),new m(_0x235c81);}}async[a0_0x37fa70(0x467)](_0x58df45){const _0x45d80b=a0_0x37fa70;return await this['sendMessageWithTyping'](_0x58df45[_0x45d80b(0x3d7)],{'poll':{'name':_0x58df45['pollMessage']?.['name'],'selectableCount':_0x58df45['pollMessage']['selectableCount'],'values':_0x58df45['pollMessage']['values']}},_0x58df45?.['options']);}async[a0_0x37fa70(0x5a8)](_0x4bedf7){const _0x470118=a0_0x37fa70;return await this[_0x470118(0x236)](_0x4bedf7[_0x470118(0x3d7)],{'listMessage':{'title':_0x4bedf7[_0x470118(0x5a8)][_0x470118(0x5d8)],'description':_0x4bedf7[_0x470118(0x5a8)][_0x470118(0x48c)],'buttonText':_0x4bedf7[_0x470118(0x5a8)]?.[_0x470118(0x7bd)],'footerText':_0x4bedf7['listMessage']?.[_0x470118(0x681)],'sections':_0x4bedf7['listMessage'][_0x470118(0x51e)],'listType':0x2}},_0x4bedf7?.['options']);}async[a0_0x37fa70(0x340)](_0x2f7ded){const _0x59ed5e=a0_0x37fa70;let _0x60a5f3;if(_0x2f7ded['menuMessage']['type']===_0x59ed5e(0x76a)){let _0x3016be=_0x2f7ded[_0x59ed5e(0x340)]['text']['indexOf']('\x0a'),_0xcd145f='',_0x91e87e='';_0x3016be!==-0x1?(_0xcd145f=_0x2f7ded[_0x59ed5e(0x340)][_0x59ed5e(0x403)][_0x59ed5e(0xca)](0x0,_0x3016be)[_0x59ed5e(0x6ba)](),_0x91e87e=_0x2f7ded['menuMessage']['text'][_0x59ed5e(0xca)](_0x3016be+0x1)):_0x91e87e=_0x2f7ded[_0x59ed5e(0x340)][_0x59ed5e(0x403)];let _0x26e84e=_0x2f7ded[_0x59ed5e(0x340)][_0x59ed5e(0x4e7)][_0x59ed5e(0x1c2)](_0x26bfe3=>_0x26bfe3[_0x59ed5e(0x6ba)]()!==''),_0xa988d2=this[_0x59ed5e(0x373)](_0x26e84e);_0x60a5f3={'listMessage':{'title':_0xcd145f,'description':_0x91e87e,'buttonText':_0x2f7ded[_0x59ed5e(0x340)]['buttonText']||_0x59ed5e(0x80),'footerText':_0x2f7ded[_0x59ed5e(0x340)][_0x59ed5e(0x681)],'sections':_0xa988d2,'listType':0x2}};}else{if(_0x2f7ded[_0x59ed5e(0x340)]['type']===_0x59ed5e(0x2d5)){let _0x89cf19=_0x2f7ded[_0x59ed5e(0x340)][_0x59ed5e(0x4e7)]['filter'](_0x52a1dd=>!(_0x52a1dd['startsWith']('[')&&_0x52a1dd['endsWith'](']'))&&_0x52a1dd[_0x59ed5e(0x6ba)]()!=='')[_0x59ed5e(0x3c4)](_0x6887a9=>_0x6887a9[_0x59ed5e(0x213)]('\x0a')[0x0]);_0x60a5f3={'poll':{'name':_0x2f7ded[_0x59ed5e(0x340)]['text'],'selectableCount':_0x2f7ded['menuMessage']['selectableCount']||0x1,'values':_0x89cf19}};}}return await this[_0x59ed5e(0x236)](_0x2f7ded[_0x59ed5e(0x3d7)],_0x60a5f3,_0x2f7ded?.[_0x59ed5e(0x726)]);}[a0_0x37fa70(0x373)](_0x58ac92){const _0x25e85b=a0_0x37fa70;let _0x3636b0=[],_0x59ed4d={'rows':[]};return _0x58ac92[_0x25e85b(0x4b7)](_0x4ddb87=>{const _0x2ec6f5=_0x25e85b;if(_0x4ddb87[_0x2ec6f5(0x262)]('[')&&_0x4ddb87[_0x2ec6f5(0x78)](']'))_0x59ed4d['rows']['length']>0x0&&_0x3636b0[_0x2ec6f5(0x5ee)](_0x59ed4d),_0x59ed4d={'title':_0x4ddb87['slice'](0x1,-0x1),'rows':[]};else{let _0x384063=_0x4ddb87[_0x2ec6f5(0x213)]('\x0a')[_0x2ec6f5(0x3c4)](_0x47e1cf=>_0x47e1cf[_0x2ec6f5(0x6ba)]()),_0x583244=_0x384063[0x0],_0x2e3787=_0x384063[0x1]||null,_0x59d49b=_0x384063[0x2]||_0x583244;_0x59ed4d[_0x2ec6f5(0x3cc)][_0x2ec6f5(0x5ee)]({'title':_0x583244,'description':_0x2e3787,'rowId':_0x59d49b});}}),_0x59ed4d['rows'][_0x25e85b(0x426)]>0x0&&_0x3636b0[_0x25e85b(0x5ee)](_0x59ed4d),_0x3636b0;}async[a0_0x37fa70(0x37a)](_0x1ae057,_0x423de2){const _0x2849bc=a0_0x37fa70;if(await this['getMessage'](_0x1ae057,!0x0)){let _0x25df58={'where':{'_id':_0x1ae057['id']}},_0x4b0046={'status':[_0x423de2['status']][0x0]};try{let _0x383e37=await this[_0x2849bc(0x210)]['message'][_0x2849bc(0x6c8)](_0x25df58,_0x4b0046,this[_0x2849bc(0x753)]['wuid']);_0x383e37&&q(this[_0x2849bc(0x653)],_0x2849bc(0x6fb),{'message':_0x383e37});}catch{}}}[a0_0x37fa70(0x1f9)](_0x3f06df){const _0x55b471=a0_0x37fa70;let _0x1b9e75=[];return _0x3f06df[_0x55b471(0x4b7)](_0x3ce6a4=>{const _0x676554=_0x55b471;_0x3ce6a4['title']&&_0x1b9e75['push']('['+_0x3ce6a4[_0x676554(0x5d8)]+']'),_0x3ce6a4[_0x676554(0x3cc)][_0x676554(0x4b7)](_0x369417=>{const _0x3ceb20=_0x676554;_0x1b9e75[_0x3ceb20(0x5ee)](_0x369417[_0x3ceb20(0x5d8)]);});}),_0x1b9e75[_0x55b471(0x114)]('|');}[a0_0x37fa70(0x120)](_0x3a2b8c){const _0x2bd597=a0_0x37fa70;let _0x5d55ac=_0x3a2b8c['replace'](/\\n/g,'\x0a')[_0x2bd597(0x213)]('\x0a')[_0x2bd597(0x1c2)](_0x245eb0=>_0x245eb0['includes']('TEL')||_0x245eb0[_0x2bd597(0x14a)](_0x2bd597(0x68b))),_0x45312c='';return _0x5d55ac[_0x2bd597(0x4b7)](_0x36fb3a=>{const _0x2633da=_0x2bd597;let _0x52d622=/TEL(?:.*):(.+)/,_0x5c6fdd=/EMAIL(?:.*):(.+)/,_0x28b484=_0x36fb3a[_0x2633da(0x538)](_0x52d622),_0x5545e6=_0x36fb3a[_0x2633da(0x538)](_0x5c6fdd);if(_0x28b484){let _0x2fe8c3=_0x28b484[0x1][_0x2633da(0x2e9)](/-| |\+|\(|\)/g,'')['trim']();_0x45312c+=_0x2633da(0x7c5)+_0x2fe8c3+'\x0a';}else{if(_0x5545e6){let _0x376c1f=_0x5545e6[0x1]['trim']();_0x45312c+=_0x2633da(0xaa)+_0x376c1f+'\x0a';}}}),_0x45312c['trim']();}async[a0_0x37fa70(0x1d2)](_0x2ecbb0,_0x1638e7,_0x5cf7f4,_0x19f860=null){const _0x4a1b19=a0_0x37fa70;if(_0x2ecbb0[_0x4a1b19(0x464)])try{let _0x536490=_0x1638e7[_0x4a1b19(0x2d1)]['remoteJid'][_0x4a1b19(0x2e9)](/:\d{1,2}@/g,'@'),_0x31f3bc=_0x1638e7[_0x4a1b19(0x2d1)][_0x4a1b19(0x2b5)],_0x16d374=_0x536490['endsWith'](_0x4a1b19(0x322)),_0x3ae050=_0x1638e7[_0x4a1b19(0x83)]?.[_0x4a1b19(0x2e9)](/:\d{1,2}@/g,'@')||'',_0x3e7a5d=_0x1638e7[_0x4a1b19(0x550)]?.[_0x4a1b19(0x403)]||_0x1638e7[_0x4a1b19(0x550)]?.[_0x4a1b19(0x454)]||_0x1638e7[_0x4a1b19(0x550)]?.[_0x4a1b19(0x38b)]||_0x1638e7[_0x4a1b19(0x550)]?.[_0x4a1b19(0x410)]||'',_0x12179d={'_id':_0x1638e7[_0x4a1b19(0x1b0)],'remoteJid':_0x31f3bc?this['instance'][_0x4a1b19(0x6e4)]:_0x16d374?_0x3ae050:_0x536490,'pushName':_0x31f3bc?this[_0x4a1b19(0x753)][_0x4a1b19(0x4bd)]||'Eu':_0x1638e7['pushName'],'text':_0x3e7a5d,'type':_0x1638e7[_0x4a1b19(0x105)],'when':_0x1638e7['messageTimestamp']||Date[_0x4a1b19(0x5cf)]()};_0x19f860||(_0x19f860=await this[_0x4a1b19(0x210)]['chat'][_0x4a1b19(0x1e2)]({'where':{'_id':_0x536490}},this['instance'][_0x4a1b19(0x6e4)]));let _0x452a14=_0x19f860?_0x31f3bc?_0x19f860[_0x4a1b19(0x546)]:(_0x19f860['unreadcount']||0x0)+0x1:_0x31f3bc?0x0:0x1,_0x5a1908={'lastmsg':_0x1638e7[_0x4a1b19(0x686)]||Date['now'](),'ephemeralExpiration':_0x1638e7[_0x4a1b19(0x392)],'lastMessage':_0x12179d,'unreadcount':_0x452a14,..._0x31f3bc||_0x16d374?{}:{'name':_0x1638e7[_0x4a1b19(0x339)]},..._0x16d374?{'group':_0x16d374}:{},...!_0x31f3bc&&!_0x16d374&&_0x1638e7[_0x4a1b19(0x434)]?{'imagechat':_0x1638e7[_0x4a1b19(0x434)]}:{}};if(!_0x16d374&&(!_0x19f860?.[_0x4a1b19(0x500)]||!_0x19f860['leadInfo'][_0x4a1b19(0x2c4)])&&_0x1638e7['pushName']&&!_0x31f3bc&&(_0x5a1908={..._0x5a1908,'leadInfo.nome':_0x1638e7['pushName']}),_0x19f860?.[_0x4a1b19(0x500)]['etiquetas']||(_0x5a1908={..._0x5a1908,'leadInfo.etiquetas':[]}),_0x19f860?.[_0x4a1b19(0x500)]['customFields']||(_0x5a1908={..._0x5a1908,'leadInfo.customFields':[]}),_0x19f860?.[_0x4a1b19(0x500)]['tags']||(_0x5a1908={..._0x5a1908,'leadInfo.tags':[]}),_0x19f860&&_0x19f860?.[_0x4a1b19(0x477)]){let _0x37d789=await this[_0x4a1b19(0x210)][_0x4a1b19(0x74d)][_0x4a1b19(0x3b4)]({'where':{}},this[_0x4a1b19(0x753)][_0x4a1b19(0x6e4)]),_0xd68d0=new Set(_0x37d789[_0x4a1b19(0x3c4)](_0x56556d=>_0x56556d[_0x4a1b19(0x1b0)])),_0x530455=(_0x19f860['leadInfo']?.[_0x4a1b19(0x7b2)]||[])['filter'](_0x497ec1=>_0xd68d0[_0x4a1b19(0x632)](_0x497ec1));_0x5a1908={..._0x5a1908,'imported':!0x1,'leadInfo.etiquetas':_0x530455};for(let _0xbeb93c of _0x530455)await this[_0x4a1b19(0x384)](_0xbeb93c,_0x536490);}if(!this['AutomateSystem'][_0x4a1b19(0x59c)]['find'](_0x314524=>_0x314524[_0x4a1b19(0x200)]&&_0x3e7a5d['includes'](_0x314524[_0x4a1b19(0x200)]))&&_0x5cf7f4===_0x4a1b19(0x1b5)&&_0x31f3bc&&this[_0x4a1b19(0x1db)]?.['flowConfig'][_0x4a1b19(0x104)]&&_0x3e7a5d[_0x4a1b19(0x6ba)]()!==this[_0x4a1b19(0x1db)]?.[_0x4a1b19(0x67c)]['stopConversation'][_0x4a1b19(0x6ba)]()){let _0x3e4f4e=(this['AutomateSystem']?.['flowConfig']['stopWhenYouSendMsg']||0x0)*0xea60,_0x2956f9=Date['now']()+_0x3e4f4e;_0x19f860?.[_0x4a1b19(0x500)]?.[_0x4a1b19(0xf0)]===0x0||(_0x5a1908={..._0x5a1908,'leadInfo.desativadoFluxoAte':_0x2956f9},this[_0x4a1b19(0x39e)][_0x4a1b19(0x48f)](this[_0x4a1b19(0x653)]+'\x20('+this[_0x4a1b19(0x753)]['wuid']+_0x4a1b19(0x774)+_0x2956f9+'.'));}if(_0x3e7a5d[_0x4a1b19(0x6ba)]()===this[_0x4a1b19(0x1db)]?.[_0x4a1b19(0x67c)][_0x4a1b19(0x6c6)][_0x4a1b19(0x6ba)]()){this[_0x4a1b19(0x39e)][_0x4a1b19(0x48f)](this[_0x4a1b19(0x653)]+'\x20('+this[_0x4a1b19(0x753)]['wuid']+_0x4a1b19(0x2a3)+_0x3e7a5d);let _0x48b4e8=Date[_0x4a1b19(0x5cf)]();this[_0x4a1b19(0x1db)]?.[_0x4a1b19(0x67c)][_0x4a1b19(0x219)]===0x0?_0x5a1908={..._0x5a1908,'leadInfo.desativadoFluxoAte':_0x48b4e8+0x7591f6200}:_0x5a1908={..._0x5a1908,'leadInfo.desativadoFluxoAte':_0x48b4e8+this['AutomateSystem']?.[_0x4a1b19(0x67c)][_0x4a1b19(0x219)]*0x3c*0x3e8};}if(_0x19f860=await this[_0x4a1b19(0x210)][_0x4a1b19(0x4a2)]['updateOne']({'where':{'_id':_0x536490}},_0x5a1908,this[_0x4a1b19(0x753)][_0x4a1b19(0x6e4)],{'new':!0x0,'upsert':!0x0}),_0x19f860)q(this['instanceName'],_0x4a1b19(0x5c9),{'chat':_0x19f860});else{this[_0x4a1b19(0x39e)][_0x4a1b19(0x723)](this['instanceName']+'\x20('+this[_0x4a1b19(0x753)][_0x4a1b19(0x6e4)]+_0x4a1b19(0x81));return;}if(_0x31f3bc)return this[_0x4a1b19(0x39e)][_0x4a1b19(0x48f)](this[_0x4a1b19(0x653)]+'\x20('+this[_0x4a1b19(0x753)][_0x4a1b19(0x6e4)]+_0x4a1b19(0x6b1)),null;if(!this['AutomateSystem']?.[_0x4a1b19(0x67c)][_0x4a1b19(0x104)])return this[_0x4a1b19(0x39e)]['verbose'](this[_0x4a1b19(0x653)]+'\x20('+this[_0x4a1b19(0x753)][_0x4a1b19(0x6e4)]+'):\x20Flow\x20desativado'),null;if(_0x19f860[_0x4a1b19(0x1b0)][_0x4a1b19(0x14a)](_0x4a1b19(0x322))&&this[_0x4a1b19(0x1db)]?.[_0x4a1b19(0x67c)][_0x4a1b19(0x772)]===!0x0)return this[_0x4a1b19(0x39e)][_0x4a1b19(0x48f)](this[_0x4a1b19(0x653)]+'\x20('+this[_0x4a1b19(0x753)][_0x4a1b19(0x6e4)]+_0x4a1b19(0x3bf)),null;if(_0x19f860[_0x4a1b19(0x500)]){if(_0x19f860[_0x4a1b19(0x500)]['desativadoFluxoAte']===0x0||_0x19f860[_0x4a1b19(0x500)]['atendimentoAberto'])return this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x4a1b19(0x753)][_0x4a1b19(0x6e4)]+_0x4a1b19(0x28d)+_0x536490+_0x4a1b19(0x53e)),null;if(_0x19f860[_0x4a1b19(0x500)]['desativadoFluxoAte']>Date[_0x4a1b19(0x5cf)]()&&!_0x1638e7[_0x4a1b19(0x550)]?.[_0x4a1b19(0x38b)])return this[_0x4a1b19(0x39e)][_0x4a1b19(0x48f)](this[_0x4a1b19(0x653)]+'\x20('+this['instance'][_0x4a1b19(0x6e4)]+_0x4a1b19(0xeb)+new Date(_0x19f860[_0x4a1b19(0x500)][_0x4a1b19(0xf0)])[_0x4a1b19(0x644)]()+_0x4a1b19(0x53e)),null;}this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x4a1b19(0x753)][_0x4a1b19(0x6e4)]+_0x4a1b19(0x3ed)),this['StartBot'](_0x1638e7,_0x5cf7f4);}catch(_0x48d894){let _0x1519e9='Erro\x20na\x20função\x20updateChatWithMessage:\x20',_0x4808a3=_0x48d894 instanceof Error?_0x48d894[_0x4a1b19(0x33a)]:typeof _0x48d894==_0x4a1b19(0x41e)?JSON['stringify'](_0x48d894):_0x48d894,_0x1352e3=_0x1519e9+':\x20'+_0x4808a3;return this[_0x4a1b19(0x39e)][_0x4a1b19(0x723)](this[_0x4a1b19(0x653)]+'\x20('+this[_0x4a1b19(0x753)][_0x4a1b19(0x6e4)]+_0x4a1b19(0x17d)+_0x1352e3),null;}}async[a0_0x37fa70(0x30e)](_0x135e4a,_0xcf59f5){const _0x5af69f=a0_0x37fa70;if(_0xcf59f5[_0x5af69f(0x464)]){let _0x4f292c=_0x135e4a[_0x5af69f(0x3c4)](async _0x2b8606=>{const _0x408a09=_0x5af69f;try{let _0x126447={'_id':_0x2b8606[_0x408a09(0x1b0)],'owner':_0x2b8606['owner'],'lastcache':0x0};if(Object[_0x408a09(0x674)](_0x2b8606)[_0x408a09(0x4b7)](_0x5e3798=>{_0x2b8606[_0x5e3798]!==null&&(_0x126447[_0x5e3798]=_0x2b8606[_0x5e3798]);}),_0x126447[_0x408a09(0x3d5)]===null&&(_0x126447[_0x408a09(0x3d5)]='Imagem\x20não\x20encontrada'),Object[_0x408a09(0x674)](_0x126447)[_0x408a09(0x426)]>0x0)return await this[_0x408a09(0x210)][_0x408a09(0x4a2)][_0x408a09(0x130)]({'where':{'_id':_0x2b8606[_0x408a09(0x1b0)]}},_0x126447,this[_0x408a09(0x753)][_0x408a09(0x6e4)]);}catch(_0x328fa0){let _0x15187b=_0x408a09(0x46f)+_0x2b8606[_0x408a09(0x1b0)],_0x332f55=_0x328fa0 instanceof Error?_0x328fa0['message']:typeof _0x328fa0=='object'?JSON[_0x408a09(0x718)](_0x328fa0):_0x328fa0,_0x38e227=_0x15187b+':\x20'+_0x332f55;return this[_0x408a09(0x39e)]['error'](this[_0x408a09(0x653)]+'\x20('+this[_0x408a09(0x753)][_0x408a09(0x6e4)]+_0x408a09(0x17d)+_0x38e227),null;}}),_0x229efd=(await Promise[_0x5af69f(0x1ea)](_0x4f292c))[_0x5af69f(0x1c2)](_0x395d6d=>_0x395d6d!==null)[_0x5af69f(0x426)];this[_0x5af69f(0x39e)]['verbose'](this[_0x5af69f(0x653)]+'\x20('+this['instance'][_0x5af69f(0x6e4)]+_0x5af69f(0x17d)+_0x229efd+_0x5af69f(0xd5)+this[_0x5af69f(0x753)][_0x5af69f(0x6e4)]+_0x5af69f(0x330));}}async[a0_0x37fa70(0x26a)](_0x2d164d){const _0x1d2942=a0_0x37fa70;this[_0x1d2942(0x39e)][_0x1d2942(0x48f)](this[_0x1d2942(0x653)]+'\x20('+this['instance'][_0x1d2942(0x6e4)]+_0x1d2942(0x76e));let _0x1a78e2={'readMessages':[{'remoteJid':_0x2d164d[_0x1d2942(0x5ed)][_0x1d2942(0x55c)][_0x1d2942(0x2d1)]['remoteJid'],'fromMe':_0x2d164d[_0x1d2942(0x5ed)][_0x1d2942(0x55c)][_0x1d2942(0x2d1)][_0x1d2942(0x2b5)],'id':_0x2d164d['chatLog'][_0x1d2942(0x55c)][_0x1d2942(0x2d1)]['id']}]};await this[_0x1d2942(0x271)](_0x1a78e2);}async[a0_0x37fa70(0x2f5)](_0xe6f03d,_0xa79a85){const _0x2570d2=a0_0x37fa70;try{let {key:_0x2a4e4a,message_normalized:_0x47f6e1}=_0xe6f03d,_0x311f9b=_0x47f6e1,_0x2c33ed=_0x47f6e1[_0x2570d2(0x403)]||_0x47f6e1[_0x2570d2(0x454)]||_0x47f6e1['vote']||_0x47f6e1[_0x2570d2(0x410)]||'',_0x29c884=_0x2a4e4a[_0x2570d2(0x6a8)],_0x2aa39a=null,_0x283246=this[_0x2570d2(0x1db)]['flows'][_0x2570d2(0x3b4)](_0x73308c=>_0x73308c[_0x2570d2(0x200)]&&_0x2c33ed[_0x2570d2(0x14a)](_0x73308c['startCommand']));if(_0x283246&&_0xa79a85==='MESSAGES_UPSERT'){let _0x50c5fb=await this[_0x2570d2(0x210)]['flow'][_0x2570d2(0x1e2)]({'where':{'_id':_0x283246[_0x2570d2(0x1b0)]}});if(this['logger'][_0x2570d2(0x48f)](this[_0x2570d2(0x653)]+'\x20('+this[_0x2570d2(0x753)][_0x2570d2(0x6e4)]+_0x2570d2(0x701)),_0x50c5fb&&_0x50c5fb[_0x2570d2(0x758)]?.['includes'](this[_0x2570d2(0x753)]['wuid']))_0x2aa39a=await this[_0x2570d2(0x5b4)](_0x50c5fb,_0x2a4e4a,_0x311f9b);else return this[_0x2570d2(0x39e)][_0x2570d2(0x48f)](this[_0x2570d2(0x653)]+'\x20('+this[_0x2570d2(0x753)][_0x2570d2(0x6e4)]+'):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo'),null;}else this[_0x2570d2(0x39e)]['verbose'](this[_0x2570d2(0x653)]+'\x20('+this[_0x2570d2(0x753)][_0x2570d2(0x6e4)]+'):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand');if(_0x2aa39a=await this[_0x2570d2(0x760)](_0x29c884,_0x311f9b),_0x2aa39a){this[_0x2570d2(0x39e)]['verbose'](this['instanceName']+'\x20('+this[_0x2570d2(0x753)][_0x2570d2(0x6e4)]+'):\x20Encontrou\x20conversa\x20no\x20startBot:\x20'),!_0x2a4e4a['fromMe']&&_0x2aa39a[_0x2570d2(0x3eb)]&&this[_0x2570d2(0x26a)](_0x2aa39a);let _0x33821a=await this[_0x2570d2(0x729)](_0x2aa39a);_0x33821a&&await this[_0x2570d2(0x702)](_0x2aa39a,_0x33821a);}}catch(_0x207031){this[_0x2570d2(0x39e)][_0x2570d2(0x723)](this[_0x2570d2(0x653)]+'\x20('+this['instance'][_0x2570d2(0x6e4)]+_0x2570d2(0x61d)+(_0x207031 instanceof Error?_0x207031['message']:JSON[_0x2570d2(0x718)](_0x207031,null,0x2)));}}[a0_0x37fa70(0x2c8)](_0x2dc2df,_0x16a91f='',_0x560376={}){const _0x68f774=a0_0x37fa70;return typeof _0x2dc2df!='object'||_0x2dc2df===null?(_0x16a91f&&(_0x560376[_0x16a91f]=_0x2dc2df),_0x560376):(Object[_0x68f774(0x491)](_0x2dc2df)[_0x68f774(0x4b7)](([_0x3285b0,_0x437454])=>{const _0x5ce976=_0x68f774;let _0x3027f4=_0x16a91f?_0x16a91f+'.'+_0x3285b0:'_'+_0x3285b0;Array['isArray'](_0x437454)?_0x437454[_0x5ce976(0x4b7)]((_0x3bfb48,_0xe6a0a4)=>{this['flattenObject'](_0x3bfb48,_0x3027f4+'['+_0xe6a0a4+']',_0x560376);}):typeof _0x437454==_0x5ce976(0x41e)&&_0x437454!==null?this[_0x5ce976(0x2c8)](_0x437454,_0x3027f4,_0x560376):_0x560376[_0x3027f4]=String(_0x437454);}),_0x560376);}[a0_0x37fa70(0x523)](_0x567d3f){const _0x120827=a0_0x37fa70;let _0x2f8f46={};for(let _0x4f4002 of _0x567d3f)typeof _0x4f4002[_0x120827(0x410)]=='string'&&typeof _0x4f4002[_0x120827(0x3b2)]=='string'&&(_0x2f8f46[_0x4f4002[_0x120827(0x410)]]=_0x4f4002['value']);return _0x2f8f46;}async[a0_0x37fa70(0x729)](_0x2a0942){const _0x42cdf0=a0_0x37fa70;if(!this[_0x42cdf0(0x1db)]?.[_0x42cdf0(0x67c)]['enabled']||_0x2a0942[_0x42cdf0(0x4c1)]!==_0x42cdf0(0x364)&&_0x2a0942['waitingMenu_id']==='')return null;let _0xb857f6=_0x2a0942['chatLog'][_0x42cdf0(0x600)]||'start';typeof _0x2a0942[_0x42cdf0(0x5ed)][_0x42cdf0(0x517)]>'u'&&(_0x2a0942['chatLog'][_0x42cdf0(0x517)]=!0x0);let _0xf5b57e=_0x2a0942[_0x42cdf0(0x5ed)][_0x42cdf0(0x517)];this[_0x42cdf0(0x39e)]['verbose'](this[_0x42cdf0(0x653)]+'\x20('+this[_0x42cdf0(0x753)][_0x42cdf0(0x6e4)]+_0x42cdf0(0x355)+_0xb857f6+',\x20lastCondition:\x20'+_0xf5b57e);let _0x3df030=_0xb857f6===_0x42cdf0(0x6c4)?_0x2a0942[_0x42cdf0(0x19a)]['find'](_0x26d16f=>_0x26d16f[_0x42cdf0(0x519)]==='start'):_0x2a0942['blocks'][_0x42cdf0(0x3b4)](_0x102dad=>_0x102dad['_id'][_0x42cdf0(0x2c5)]()===_0xb857f6[_0x42cdf0(0x2c5)]());if(!_0x3df030)return this['logger'][_0x42cdf0(0x723)](this[_0x42cdf0(0x653)]+'\x20('+this[_0x42cdf0(0x753)][_0x42cdf0(0x6e4)]+_0x42cdf0(0x3e4)+_0xb857f6),null;let _0x49cf7a={'_pushName':_0x2a0942?.[_0x42cdf0(0x5ed)]?.[_0x42cdf0(0x55c)]?.['pushName']||'','_sender':this[_0x42cdf0(0x753)][_0x42cdf0(0x6e4)]||'',..._0x2a0942['chatLog'][_0x42cdf0(0x34a)]},_0x40d192=null;if(_0x2a0942[_0x42cdf0(0x596)]){let _0x4b445d=_0x2a0942['chatLog'][_0x42cdf0(0x55c)]['vote'],_0x509dcc=_0x2a0942[_0x42cdf0(0x564)][_0x42cdf0(0x3b4)](_0x3c5f1e=>_0x3c5f1e[_0x42cdf0(0x402)]===_0x4b445d);if(_0x509dcc){let _0x544aff=_0x509dcc[_0x42cdf0(0x463)];if(_0x40d192=_0x2a0942['blocks']['find'](_0x44aa6e=>_0x44aa6e[_0x42cdf0(0x3c6)]===_0x544aff&&_0x44aa6e['order']===0x1),_0x3df030[_0x42cdf0(0x6b3)]['pollOnReplyDelete']){let _0x241831={'id':_0x2a0942[_0x42cdf0(0x596)],'remoteJid':_0x2a0942[_0x42cdf0(0x6a8)],'fromMe':!0x0};await this[_0x42cdf0(0x270)](_0x241831);}if(_0x3df030[_0x42cdf0(0x6b3)]['pollOnReplyDelete']&&_0x3df030[_0x42cdf0(0x6b3)][_0x42cdf0(0x6c7)]&&_0x3df030[_0x42cdf0(0x6b3)][_0x42cdf0(0x387)]===_0x42cdf0(0x2d5)){let _0x474d54={'number':_0x2a0942[_0x42cdf0(0x6a8)],'options':{'delay':0x0},'textMessage':{'text':_0x42cdf0(0x533)+_0x2a0942[_0x42cdf0(0x35d)]+'\x0a*Você\x20respondeu*:\x0a'+_0x4b445d}};await this[_0x42cdf0(0x3a6)](_0x474d54);}_0x2a0942[_0x42cdf0(0x4c1)]=_0x42cdf0(0x364),_0x2a0942[_0x42cdf0(0x596)]='',_0x2a0942[_0x42cdf0(0x35d)]='',_0x2a0942[_0x42cdf0(0x564)]=[];}else{this['logger'][_0x42cdf0(0x48f)](this[_0x42cdf0(0x653)]+'\x20('+this[_0x42cdf0(0x753)][_0x42cdf0(0x6e4)]+_0x42cdf0(0x42a));let _0x5eb00b={'activatedCount':_0x2a0942[_0x42cdf0(0x5ed)][_0x42cdf0(0x784)][_0x42cdf0(0x1c2)](_0x246178=>String(_0x246178['blockId'])===String(_0xb857f6))['length'],'moreLogs':[_0x42cdf0(0x159)]};if(_0x3df030[_0x42cdf0(0x6b3)]['pollErrorMessage']){let _0x27fe55={'number':_0x2a0942[_0x42cdf0(0x6a8)],'options':{'delay':0x0},'textMessage':{'text':_0x3df030['uazapi']['pollErrorMessage']}};await this['textMessage'](_0x27fe55);}if(_0x3df030[_0x42cdf0(0x68e)]!==void 0x0&&_0x5eb00b[_0x42cdf0(0x4cb)]>=_0x3df030[_0x42cdf0(0x68e)]){let _0x38cace=Date[_0x42cdf0(0x5cf)](),_0x7e2ee=_0x3df030[_0x42cdf0(0x7a6)]??0xa;isNaN(_0x7e2ee)&&(_0x7e2ee=0xa);let _0x3b4584=_0x38cace+_0x7e2ee*0x3c*0x3e8;_0x5eb00b[_0x42cdf0(0x660)]=_0x3b4584,_0x5eb00b['moreLogs']['push'](_0x42cdf0(0x209)),this['updateStopChat'](_0x2a0942,_0x3b4584),_0x2a0942[_0x42cdf0(0x596)]='',_0x2a0942[_0x42cdf0(0x35d)]='',_0x2a0942['waitingMenu_replyOptions']=[];}return this['updateConversation'](_0x2a0942,_0x3df030,_0x5eb00b,!0x0),null;}}if(_0xf5b57e&&_0x3df030[_0x42cdf0(0x463)]&&!_0x2a0942[_0x42cdf0(0x596)]){let _0x4d6cb8=_0x2a0942[_0x42cdf0(0x19a)][_0x42cdf0(0x1c2)](_0xbcab79=>_0xbcab79[_0x42cdf0(0x3c6)][_0x42cdf0(0x2c5)]()===_0x3df030[_0x42cdf0(0x463)][_0x42cdf0(0x2c5)]())[_0x42cdf0(0x31a)]((_0x7ab7b,_0x1d8b2a)=>_0x7ab7b[_0x42cdf0(0x11e)]-_0x1d8b2a[_0x42cdf0(0x11e)]);_0x4d6cb8[_0x42cdf0(0x426)]>0x0&&(_0x40d192=_0x4d6cb8[0x0]);}if(!_0x40d192){let _0x4a1146=_0x3df030[_0x42cdf0(0x3c6)],_0x3653f8=_0x2a0942[_0x42cdf0(0x19a)][_0x42cdf0(0x1c2)](_0x4a525e=>_0x4a525e[_0x42cdf0(0x3c6)]===_0x4a1146&&_0x4a525e[_0x42cdf0(0x11e)]>_0x3df030[_0x42cdf0(0x11e)])['sort']((_0x3602f2,_0x357db1)=>_0x3602f2[_0x42cdf0(0x11e)]-_0x357db1[_0x42cdf0(0x11e)]);_0x3653f8[_0x42cdf0(0x426)]>0x0&&(_0x40d192=_0x3653f8[0x0]);}if(!_0x40d192)return _0x2a0942['status']='closed',null;_0x2a0942[_0x42cdf0(0x5ed)][_0x42cdf0(0x34a)]=_0x49cf7a;let _0x470f51=JSON[_0x42cdf0(0x3f5)](JSON[_0x42cdf0(0x718)](_0x40d192));return this['replaceVariablesInObject'](_0x470f51,_0x2a0942[_0x42cdf0(0x5ed)][_0x42cdf0(0x34a)]),_0x2a0942['chatLog'][_0x42cdf0(0x600)]=_0x470f51[_0x42cdf0(0x1b0)],_0x2a0942[_0x42cdf0(0x5ed)][_0x42cdf0(0x517)]=!0x0,_0x470f51;}[a0_0x37fa70(0x68a)](_0x498afe,_0x4fafc3){return _0x498afe['replace'](/\{\{([^}]+)\}\}/g,(_0x32ae13,_0x2d65bc)=>_0x4fafc3[_0x2d65bc]||'');}[a0_0x37fa70(0x6f3)](_0x39f551,_0x3bcb3a){const _0x251ed1=a0_0x37fa70;for(let _0x365772 in _0x39f551)typeof _0x39f551[_0x365772]==_0x251ed1(0x615)?_0x39f551[_0x365772]=this['replaceVariables'](_0x39f551[_0x365772],_0x3bcb3a):typeof _0x39f551[_0x365772]==_0x251ed1(0x41e)&&this[_0x251ed1(0x6f3)](_0x39f551[_0x365772],_0x3bcb3a);}async[a0_0x37fa70(0x3fd)](_0x4c1797,_0xcbb139){const _0x39f0a2=a0_0x37fa70;let _0x38990b=_0xcbb139[_0x39f0a2(0x1b0)];if(_0x4c1797[_0x39f0a2(0x5ed)]&&_0x4c1797[_0x39f0a2(0x5ed)][_0x39f0a2(0x784)]){let _0x5f59e4=_0x4c1797[_0x39f0a2(0x5ed)][_0x39f0a2(0x784)][_0x39f0a2(0x1c2)](_0x31d9b2=>String(_0x31d9b2['blockId'])===String(_0x38990b))['pop']();if(_0x5f59e4&&_0x5f59e4[_0x39f0a2(0x723)]&&_0xcbb139['stopIfLastReturnedError'])return _0x4c1797[_0x39f0a2(0x4c1)]=_0x39f0a2(0x19b),await this[_0x39f0a2(0x306)](_0x4c1797),null;}if(_0xcbb139[_0x39f0a2(0x519)]==='uazapi'&&_0xcbb139[_0x39f0a2(0x6b3)][_0x39f0a2(0x501)]===_0x39f0a2(0x54c)&&_0x4c1797[_0x39f0a2(0x596)])return _0x4c1797['chatLog'][_0x39f0a2(0x600)]=_0x38990b,await this[_0x39f0a2(0x306)](_0x4c1797),null;let _0x21a557=await this['NextBlock'](_0x4c1797);if(_0x4c1797['chatLog']&&_0x4c1797[_0x39f0a2(0x5ed)]['blockLogs']){let _0x9e313=_0x4c1797[_0x39f0a2(0x5ed)][_0x39f0a2(0x784)][_0x39f0a2(0x1c2)](_0x206717=>String(_0x206717[_0x39f0a2(0x1e5)])===String(_0x38990b))[_0x39f0a2(0x426)];if(_0xcbb139[_0x39f0a2(0x68e)]!==void 0x0&&_0x9e313>=_0xcbb139[_0x39f0a2(0x68e)]){let _0xafe20=Date[_0x39f0a2(0x5cf)](),_0x5b23da=_0xcbb139['stopMinutesMaxActives']??0xa;isNaN(_0x5b23da)&&(_0x5b23da=0xa);let _0x2769d0=_0xafe20+_0x5b23da*0x3c*0x3e8,_0x381921={'newStoppedUntil':_0x2769d0};return this[_0x39f0a2(0x48a)](_0x4c1797,_0x2769d0),this[_0x39f0a2(0x5e2)](_0x4c1797,_0xcbb139,_0x381921,!0x0),null;}}_0x21a557&&_0x21a557[_0x39f0a2(0x519)]!==_0x39f0a2(0x58a)&&await this[_0x39f0a2(0x702)](_0x4c1797,_0x21a557),_0x21a557||await this[_0x39f0a2(0x306)](_0x4c1797),_0x21a557&&_0x21a557[_0x39f0a2(0x519)]===_0x39f0a2(0x58a)&&(_0x4c1797[_0x39f0a2(0x5ed)][_0x39f0a2(0x600)]=_0x38990b,await this[_0x39f0a2(0x306)](_0x4c1797));}async[a0_0x37fa70(0x702)](_0x5e4537,_0xc8caff){const _0x496a25=a0_0x37fa70;try{let _0x48fcb8=_0xc8caff[_0x496a25(0x519)];this[_0x496a25(0x39e)][_0x496a25(0x48f)](this['instanceName']+'\x20('+this[_0x496a25(0x753)][_0x496a25(0x6e4)]+_0x496a25(0x337)+_0x48fcb8);let _0x2e761e={'uazapi':()=>this['processUazapi'](_0x5e4537,_0xc8caff),'save':()=>this[_0x496a25(0x6dc)](_0x5e4537,_0xc8caff),'stop':()=>this['stopConversation'](_0x5e4537,_0xc8caff),'condition':()=>this[_0x496a25(0x281)](_0x5e4537,_0xc8caff),'varedit':()=>this[_0x496a25(0xbb)](_0x5e4537,_0xc8caff),'apirequest':()=>this[_0x496a25(0x1ba)](_0x5e4537,_0xc8caff),'goToFlow':()=>this['processgoToFlow'](_0x5e4537,_0xc8caff),'scheduleFlow':()=>this['processScheduleFlow'](_0x5e4537,_0xc8caff),'awaitSeconds':()=>this['processawaitSeconds'](_0x5e4537,_0xc8caff),'clearVariables':()=>this['processclearVariables'](_0x5e4537,_0xc8caff)}[_0x48fcb8];_0x2e761e&&await _0x2e761e();}catch(_0x5a64fd){this[_0x496a25(0x39e)][_0x496a25(0x723)](this['instanceName']+'\x20('+this[_0x496a25(0x753)][_0x496a25(0x6e4)]+'):\x20Error\x20processing\x20the\x20block:\x20'+(_0x5a64fd instanceof Error?_0x5a64fd[_0x496a25(0x33a)]:JSON[_0x496a25(0x718)](_0x5a64fd,null,0x2)));}}async['processawaitSeconds'](_0x53bf2b,_0x264842){const _0x32faea=a0_0x37fa70;if(this[_0x32faea(0x39e)][_0x32faea(0x48f)](this['instanceName']+'\x20('+this[_0x32faea(0x753)][_0x32faea(0x6e4)]+_0x32faea(0x3e1)),!_0x53bf2b||!_0x264842)return this[_0x32faea(0x39e)][_0x32faea(0x723)](this[_0x32faea(0x653)]+'\x20('+this['instance'][_0x32faea(0x6e4)]+_0x32faea(0x2ea)),null;let _0x5a6b3b=+_0x264842[_0x32faea(0x7c0)];isNaN(_0x5a6b3b)&&(_0x5a6b3b=0x0),_0x5a6b3b=Math[_0x32faea(0x6e)](_0x5a6b3b,0x3c),await(0x0,w[_0x32faea(0xb9)])(_0x5a6b3b*0x3e8);let _0x525b42={'moreLogs':[_0x32faea(0x17f)+_0x5a6b3b+_0x32faea(0x289)]};return await this[_0x32faea(0x5e2)](_0x53bf2b,_0x264842,_0x525b42),_0x5a6b3b;}async[a0_0x37fa70(0x6e1)](_0x269997,_0x964208){const _0x1119f6=a0_0x37fa70;if(this[_0x1119f6(0x39e)][_0x1119f6(0x48f)](this[_0x1119f6(0x653)]+'\x20('+this[_0x1119f6(0x753)]['wuid']+_0x1119f6(0x432)),!_0x269997||!_0x964208)return this[_0x1119f6(0x39e)][_0x1119f6(0x723)](this['instanceName']+'\x20('+this[_0x1119f6(0x753)]['wuid']+_0x1119f6(0x2ea)),null;let _0x941159=[];if(_0x964208[_0x1119f6(0x375)]['trim']()==='[all]'){let _0x5b6122=[_0x1119f6(0x421),_0x1119f6(0x720),_0x1119f6(0x288),_0x1119f6(0x10f),_0x1119f6(0x6d6),_0x1119f6(0x1b0),'_fromMe'];_0x941159=Object[_0x1119f6(0x674)](_0x269997[_0x1119f6(0x5ed)][_0x1119f6(0x34a)])[_0x1119f6(0x1c2)](_0x11c543=>_0x11c543[_0x1119f6(0x262)]('_')&&!_0x5b6122['includes'](_0x11c543));}else _0x941159=_0x964208['clearVariables'][_0x1119f6(0x213)]('|')[_0x1119f6(0x3c4)](_0x4cd13b=>(_0x4cd13b=_0x4cd13b[_0x1119f6(0x2e9)](/[{}]/g,'')['trim'](),_0x4cd13b[_0x1119f6(0x262)]('_')?_0x4cd13b:'_'+_0x4cd13b));let _0x470480=[];_0x941159['forEach'](_0x4f2461=>{const _0x2104ba=_0x1119f6;_0x4f2461 in _0x269997[_0x2104ba(0x5ed)][_0x2104ba(0x34a)]&&(delete _0x269997[_0x2104ba(0x5ed)][_0x2104ba(0x34a)][_0x4f2461],_0x470480[_0x2104ba(0x5ee)](_0x4f2461));}),_0x470480[_0x1119f6(0x426)]>0x0?this[_0x1119f6(0x39e)][_0x1119f6(0x48f)](this[_0x1119f6(0x653)]+'\x20('+this[_0x1119f6(0x753)]['wuid']+_0x1119f6(0x1a3)+_0x470480[_0x1119f6(0x114)](',\x20')):this[_0x1119f6(0x39e)][_0x1119f6(0x48f)](this[_0x1119f6(0x653)]+'\x20('+this[_0x1119f6(0x753)]['wuid']+_0x1119f6(0x6a1));let _0x1215a0={'moreLogs':[_0x1119f6(0x595)+_0x470480[_0x1119f6(0x114)](',\x20')]};return await this['updateConversation'](_0x269997,_0x964208,_0x1215a0),null;}async[a0_0x37fa70(0x4c9)](_0x5f1d10,_0x2f260c){const _0x3fd6e2=a0_0x37fa70;if(this[_0x3fd6e2(0x39e)][_0x3fd6e2(0x48f)](this[_0x3fd6e2(0x653)]+'\x20('+this[_0x3fd6e2(0x753)][_0x3fd6e2(0x6e4)]+_0x3fd6e2(0xc3)),!_0x5f1d10||!_0x2f260c)return this[_0x3fd6e2(0x39e)]['error'](this['instanceName']+'\x20('+this[_0x3fd6e2(0x753)][_0x3fd6e2(0x6e4)]+_0x3fd6e2(0x2ea)),null;let _0x219c77=_0x5f1d10[_0x3fd6e2(0x6a8)];_0x2f260c[_0x3fd6e2(0x36b)]['remoteJid']&&_0x2f260c[_0x3fd6e2(0x36b)][_0x3fd6e2(0x6a8)]['trim']()!==''&&(_0x219c77=_0x2f260c[_0x3fd6e2(0x6b3)][_0x3fd6e2(0x6a8)][_0x3fd6e2(0x6ba)]());let _0x2947b2=_0x2f260c['scheduleFlow']['timeInMinutes']*0xea60,_0x24e958=Date[_0x3fd6e2(0x5cf)]()+_0x2947b2,_0x1ee42e={'status':_0x3fd6e2(0x4ff),'info':_0x3fd6e2(0x3fc)+_0x5f1d10[_0x3fd6e2(0x410)],'remoteJids':[_0x219c77],'when':_0x24e958,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x3fd6e2(0x407),'flowName':_0x2f260c[_0x3fd6e2(0x36b)][_0x3fd6e2(0xde)]};this['editScheduleMessage'](_0x1ee42e);let _0x590800=await this[_0x3fd6e2(0x729)](_0x5f1d10);_0x590800&&await this[_0x3fd6e2(0x702)](_0x5f1d10,_0x590800);}async[a0_0x37fa70(0x267)](_0x5e1383,_0x351ab4){const _0x3abc1e=a0_0x37fa70;if(this['logger'][_0x3abc1e(0x48f)](this[_0x3abc1e(0x653)]+'\x20('+this[_0x3abc1e(0x753)]['wuid']+_0x3abc1e(0x641)),!_0x5e1383||!_0x351ab4)return this['logger'][_0x3abc1e(0x723)](this[_0x3abc1e(0x653)]+'\x20('+this[_0x3abc1e(0x753)][_0x3abc1e(0x6e4)]+_0x3abc1e(0x2ea)),null;await this['updateConversation'](_0x5e1383,_0x351ab4,{},!0x0,!0x0);let _0x537e19=_0x351ab4[_0x3abc1e(0x1dd)];_0x5e1383=await this['createConversationforgoToFlow'](_0x537e19,_0x5e1383[_0x3abc1e(0x6a8)],_0x5e1383['chatLog'][_0x3abc1e(0x34a)]);let _0x3d7697=await this[_0x3abc1e(0x729)](_0x5e1383);_0x3d7697&&await this[_0x3abc1e(0x702)](_0x5e1383,_0x3d7697);}async[a0_0x37fa70(0x525)](_0x331342,_0x30c042,_0x52e466){const _0x23b1df=a0_0x37fa70;this[_0x23b1df(0x39e)][_0x23b1df(0x48f)](this[_0x23b1df(0x653)]+'\x20('+this['instance'][_0x23b1df(0x6e4)]+'):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]');try{let _0x31c0d2=this[_0x23b1df(0x1db)][_0x23b1df(0x59c)][_0x23b1df(0x3b4)](_0x5a5572=>_0x5a5572[_0x23b1df(0x1b0)]===_0x331342);_0x31c0d2||this[_0x23b1df(0x39e)][_0x23b1df(0x723)](this[_0x23b1df(0x653)]+'\x20('+this[_0x23b1df(0x753)][_0x23b1df(0x6e4)]+_0x23b1df(0x21b)+_0x331342+_0x23b1df(0x273));let _0x328317=await this[_0x23b1df(0x210)][_0x23b1df(0x407)][_0x23b1df(0x1e2)]({'where':{'_id':_0x31c0d2['_id']}});if(!_0x328317||!_0x328317[_0x23b1df(0x758)]?.[_0x23b1df(0x14a)](this[_0x23b1df(0x753)]['wuid']))throw this[_0x23b1df(0x39e)]['error'](this[_0x23b1df(0x653)]+'\x20('+this['instance'][_0x23b1df(0x6e4)]+_0x23b1df(0x21b)+_0x331342+_0x23b1df(0x482)),new m(_0x23b1df(0x2e6)+_0x331342+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x5eb54f=require(_0x23b1df(0x4ab))['ObjectId'],_0x4fed0f=Date[_0x23b1df(0x5cf)](),_0x44fc70='start',_0x16ecc5={},_0x543139={},_0x4f0a6d=this[_0x23b1df(0x1db)][_0x23b1df(0x59c)][_0x23b1df(0x3b4)](_0x4fa3f8=>_0x4fa3f8[_0x23b1df(0x1b0)]===_0x328317['_id']?.[_0x23b1df(0x2c5)]()),_0x17efd6=_0x4f0a6d?.[_0x23b1df(0x6cf)]??_0x328317[_0x23b1df(0x6cf)]??0x0,_0x2832a7=_0x4f0a6d?.['readMessages']??_0x328317['readMessages']??!0x1,_0x33e2d4={'flowId':_0x31c0d2['_id'],'readMessages':_0x31c0d2['readMessages'],..._0x328317,'chatLog':null},_0x4a021a={'lastReceivedMessage':_0x16ecc5,'lastSendMessage':_0x543139,'lastBlockId':_0x44fc70,'lastCondition':!0x0,'realVariables':_0x52e466};_0x33e2d4[_0x23b1df(0x5ed)]=_0x4a021a,_0x33e2d4[_0x23b1df(0x5ed)][_0x23b1df(0x34a)]={..._0x52e466},delete _0x33e2d4['_id'],_0x33e2d4[_0x23b1df(0x1b0)]=new _0x5eb54f(),_0x33e2d4[_0x23b1df(0x724)]=_0x4fed0f,_0x33e2d4['status']=_0x23b1df(0x364),_0x33e2d4['remoteJid']=_0x30c042,_0x33e2d4[_0x23b1df(0x6cf)]=_0x17efd6,_0x33e2d4['readMessages']=_0x2832a7;let _0x1989ad=await this[_0x23b1df(0x210)]['flowConversation'][_0x23b1df(0x130)](_0x33e2d4['_id'],_0x33e2d4,this[_0x23b1df(0x753)][_0x23b1df(0x6e4)]);return this[_0x23b1df(0x39e)]['verbose'](this[_0x23b1df(0x653)]+'\x20('+this['instance'][_0x23b1df(0x6e4)]+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x1989ad?_0x33e2d4:null;}catch(_0x1f96d3){let _0x4f8280=_0x23b1df(0x34b),_0x27b809=_0x1f96d3 instanceof Error?_0x1f96d3['message']:typeof _0x1f96d3==_0x23b1df(0x41e)?JSON[_0x23b1df(0x718)](_0x1f96d3):_0x1f96d3,_0x51f78e=_0x4f8280+':\x20'+_0x27b809;throw this['logger']['error'](this[_0x23b1df(0x653)]+'\x20('+this[_0x23b1df(0x753)][_0x23b1df(0x6e4)]+_0x23b1df(0x17d)+_0x51f78e),new m(_0x51f78e);}}async['processApiRequest'](_0x2de1e0,_0x340fb3){const _0xc957bd=a0_0x37fa70;let _0x1182aa,_0x5ef90e;try{let _0x588557=_0x340fb3['apirequest'];if(!_0x588557||!_0x588557['url']||!_0x588557[_0xc957bd(0x1ec)])throw new Error(_0xc957bd(0x7b7));let _0x455c11;([_0xc957bd(0x515),_0xc957bd(0x17a),_0xc957bd(0x1ad)]['some'](_0x5a4f3e=>_0x588557[_0xc957bd(0x75c)][_0xc957bd(0x14a)](_0x5a4f3e))||_0x588557[_0xc957bd(0x4be)])&&(_0x455c11=_0xc957bd(0x1d8));let _0x299d7a='\u205f',_0x1c737a;try{_0x1c737a=JSON[_0xc957bd(0x3f5)](_0x588557[_0xc957bd(0x63c)]['replace'](new RegExp(_0x299d7a,'g'),''));}catch(_0x460766){throw _0x460766;}let _0x24133b={'method':_0x588557[_0xc957bd(0x1ec)],'url':_0x588557['url'],'headers':_0x588557['header']||{},..._0x588557[_0xc957bd(0x1ec)][_0xc957bd(0x103)]()!=='GET'&&_0x588557[_0xc957bd(0x63c)]?{'data':JSON['parse'](_0x588557['bodyString'][_0xc957bd(0x2e9)](new RegExp(_0x299d7a,'g'),''))}:{},..._0x455c11&&{'responseType':_0x455c11}},_0x4af864=await(0x0,Z[_0xc957bd(0x259)])(_0x24133b),_0x2732fb=_0x4af864[_0xc957bd(0x623)][_0xc957bd(0x611)];if(_0x2732fb&&_0x2732fb[_0xc957bd(0x14a)](_0xc957bd(0x3ba))||typeof _0x4af864['data']=='string'){if(typeof _0x4af864[_0xc957bd(0x349)]==_0xc957bd(0x615)){let _0x356044=_0x4af864[_0xc957bd(0x349)][_0xc957bd(0x2e9)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0xc957bd(0x6ba)]();try{_0x1182aa=JSON[_0xc957bd(0x3f5)](_0x356044);}catch(_0x5c42ce){this[_0xc957bd(0x39e)][_0xc957bd(0x723)](_0xc957bd(0x3db)+_0x5c42ce[_0xc957bd(0x33a)]),_0x1182aa={'_apiResponse':_0x4af864[_0xc957bd(0x349)]};}}else _0x1182aa=_0x4af864[_0xc957bd(0x349)];let _0x63cca0=_0x2de1e0[_0xc957bd(0x5ed)][_0xc957bd(0x34a)],_0x5aa3de=this[_0xc957bd(0x2c8)](_0x1182aa);return Object[_0xc957bd(0x4f8)](_0x63cca0,_0x5aa3de),_0x2de1e0[_0xc957bd(0x5ed)]['realVariables']=_0x63cca0,_0x5ef90e={'error':!0x1,'apiResponse':_0x1182aa},this[_0xc957bd(0x5e2)](_0x2de1e0,_0x340fb3,_0x5ef90e),_0x1182aa;}if(_0x2732fb&&(_0x2732fb[_0xc957bd(0x14a)](_0xc957bd(0x2e4))||_0x2732fb[_0xc957bd(0x14a)](_0xc957bd(0x1b2))||_0x2732fb[_0xc957bd(0x14a)]('audio')||_0x2732fb[_0xc957bd(0x14a)](_0xc957bd(0x65c)))){this[_0xc957bd(0x39e)][_0xc957bd(0x48f)](this['instanceName']+'\x20('+this[_0xc957bd(0x753)][_0xc957bd(0x6e4)]+'):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20'+_0x2732fb);let _0x205dd5=(0x0,Q['v4'])(),_0x4c3b34='',_0x5d3267={'image/jpeg':'.jpg','image/png':'.png','image/gif':_0xc957bd(0x3be),'image/webp':'.webp','image/svg+xml':_0xc957bd(0x3f7),'audio/mpeg':_0xc957bd(0x4d9),'audio/ogg':_0xc957bd(0x530),'audio/wav':_0xc957bd(0x609),'video/mp4':'.mp4','video/webm':_0xc957bd(0x2bc),'video/ogg':'.ogv','text/plain':'.txt','application/pdf':_0xc957bd(0x79d),'application/msword':'.doc','application/vnd.openxmlformats-officedocument.wordprocessingml.document':'.docx','application/vnd.ms-excel':'.xls','application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0xc957bd(0x4ca),'application/vnd.ms-powerpoint':_0xc957bd(0x264),'application/vnd.openxmlformats-officedocument.presentationml.presentation':_0xc957bd(0x3a7)};_0x5d3267[_0x2732fb]?(_0x4c3b34=_0x5d3267[_0x2732fb],this[_0xc957bd(0x39e)]['verbose'](this[_0xc957bd(0x653)]+'\x20('+this[_0xc957bd(0x753)][_0xc957bd(0x6e4)]+_0xc957bd(0x552)+_0x4c3b34)):(_0x4c3b34=_0xc957bd(0x2a6),this[_0xc957bd(0x39e)]['verbose'](this[_0xc957bd(0x653)]+'\x20('+this[_0xc957bd(0x753)][_0xc957bd(0x6e4)]+'):\x20Usando\x20extensão\x20padrão:\x20'+_0x4c3b34)),_0x205dd5+=_0x4c3b34,this[_0xc957bd(0x39e)][_0xc957bd(0x48f)](this[_0xc957bd(0x653)]+'\x20('+this['instance'][_0xc957bd(0x6e4)]+_0xc957bd(0x59f)+_0x205dd5);let _0x153c70=this[_0xc957bd(0x763)][_0xc957bd(0x7b6)](_0xc957bd(0x556))[_0xc957bd(0xe1)];if(!_0x153c70){let _0x15f913=this[_0xc957bd(0x763)][_0xc957bd(0x7b6)](_0xc957bd(0xe6));_0x153c70=_0xc957bd(0x329)+(_0x15f913&&_0x15f913['FULLCHAIN']['split']('/')[0x4]);}let _0x52f3a6=Buffer[_0xc957bd(0x27b)](_0x4af864[_0xc957bd(0x349)]);await this[_0xc957bd(0x419)](_0x52f3a6,_0x205dd5);let _0x2f832f=_0xc957bd(0x359)+_0x205dd5;_0x2f832f=''+_0x153c70+_0x2f832f,_0x1182aa={'fileUrl':_0x2f832f},_0x2de1e0[_0xc957bd(0x5ed)][_0xc957bd(0x34a)][_0xc957bd(0x637)]=_0x2f832f;let _0x44406c=_0x2de1e0[_0xc957bd(0x5ed)][_0xc957bd(0x34a)],_0x11049a=this[_0xc957bd(0x2c8)](_0x1182aa);return Object[_0xc957bd(0x4f8)](_0x44406c,_0x11049a),_0x2de1e0['chatLog'][_0xc957bd(0x34a)]=_0x44406c,_0x5ef90e={'error':!0x1,'apiResponse':{'fileUrl':_0x2f832f}},this[_0xc957bd(0x5e2)](_0x2de1e0,_0x340fb3,_0x5ef90e),_0x1182aa;}}catch(_0x426edd){this[_0xc957bd(0x39e)][_0xc957bd(0x723)](_0xc957bd(0x408)+_0x426edd[_0xc957bd(0x33a)]),_0x426edd['response']&&(_0x1182aa=_0x426edd[_0xc957bd(0x6d9)][_0xc957bd(0x349)]);let _0x4096a6=_0x2de1e0[_0xc957bd(0x5ed)][_0xc957bd(0x34a)],_0x4a21dc=this['flattenObject'](_0x1182aa);return Object[_0xc957bd(0x4f8)](_0x4096a6,_0x4a21dc),_0x2de1e0['chatLog'][_0xc957bd(0x34a)]=_0x4096a6,_0x5ef90e={'error':!0x0,'errorLog':_0x426edd[_0xc957bd(0x2c5)](),'apiResponse':_0x1182aa},this['updateConversation'](_0x2de1e0,_0x340fb3,_0x5ef90e),{'success':!0x1};}}['applyvaredit'](_0x3bf2cf,_0x1fec78){const _0x51154b=a0_0x37fa70;let _0x1a6084=_0x2fd816=>{let _0x129dcb=_0x2fd816['replace'](/[^0-9.,-]/g,'')['replace'](',','.'),_0x3bbe84=parseFloat(_0x129dcb);return isNaN(_0x3bbe84)?null:_0x3bbe84;},_0x1b7711=_0x1fec78['firstValue'],_0x28e018=_0x1fec78[_0x51154b(0x260)];typeof _0x1b7711==_0x51154b(0x615)&&(_0x1b7711=this[_0x51154b(0x68a)](_0x1b7711,_0x3bf2cf[_0x51154b(0x5ed)][_0x51154b(0x34a)])??''),typeof _0x28e018==_0x51154b(0x615)&&(_0x28e018=this[_0x51154b(0x68a)](_0x28e018,_0x3bf2cf[_0x51154b(0x5ed)]['realVariables'])??'');let _0x2f875b=null;if(!_0x1fec78['editOperator'])return null;switch(this[_0x51154b(0x39e)][_0x51154b(0x48f)](this[_0x51154b(0x653)]+'\x20('+this[_0x51154b(0x753)]['wuid']+'):\x20newFirstValue\x20após\x20replaceVariables:'+_0x1b7711),this[_0x51154b(0x39e)][_0x51154b(0x48f)](this[_0x51154b(0x653)]+'\x20('+this[_0x51154b(0x753)]['wuid']+_0x51154b(0x5ff)+_0x28e018),_0x1fec78[_0x51154b(0x351)]){case'+':case'-':case'*':case'/':let _0x598db8=_0x1a6084(_0x1b7711||'0'),_0x1c6f6c=_0x1a6084(_0x28e018||'0');if(_0x598db8===null)return null;switch(_0x1fec78['editOperator']){case'+':_0x2f875b=_0x598db8+(_0x1c6f6c??0x0);break;case'-':_0x2f875b=_0x598db8-(_0x1c6f6c??0x0);break;case'*':_0x2f875b=_0x598db8*(_0x1c6f6c??0x1);break;case'/':_0x1c6f6c!==0x0&&(_0x2f875b=_0x598db8/(_0x1c6f6c??0x1));break;}break;case'findAndReplace':case _0x51154b(0x45e):let _0x33c125=_0x28e018,_0x3c9374=_0x1fec78['replaceValue'];if(typeof _0x3c9374==_0x51154b(0x615)&&(_0x3c9374=this[_0x51154b(0x68a)](_0x3c9374,_0x3bf2cf['chatLog']['realVariables'])??''),_0x33c125&&_0x3c9374!==void 0x0){let _0x1a6462=_0x1fec78[_0x51154b(0x351)]==='findAndReplace'?new RegExp(_0x33c125[_0x51154b(0x2e9)](/[-\/\\^$*+?.()|[\]{}]/g,_0x51154b(0x25d)),'g'):new RegExp(_0x33c125,'g');_0x2f875b=_0x1b7711['replace'](_0x1a6462,_0x3c9374);}else console[_0x51154b(0x71b)](_0x51154b(0x28e));break;case _0x51154b(0x77b):_0x2f875b=_0x28e018;break;case _0x51154b(0x544):let _0x4c9853=_0x1b7711[_0x51154b(0x538)](new RegExp(_0x28e018||''));_0x2f875b=_0x4c9853?_0x4c9853[0x0]:'';break;case'truncatedto':_0x2f875b=_0x1b7711[_0x51154b(0x70f)](0x0,parseInt(_0x28e018||'0'));break;case _0x51154b(0x49d):let _0x5b84f4=parseInt(_0x28e018||'0');_0x2f875b=_0x1b7711['slice'](_0x1b7711[_0x51154b(0x426)]-_0x5b84f4);break;case _0x51154b(0x1c4):let _0x267b11=_0x1a6084(_0x1b7711),_0x53711c=parseInt(_0x28e018||'0');_0x53711c=Math[_0x51154b(0x5a6)](_0x53711c),_0x267b11!==null?_0x2f875b=_0x267b11[_0x51154b(0x644)](_0x51154b(0x86),{'minimumFractionDigits':_0x53711c,'maximumFractionDigits':_0x53711c}):(console[_0x51154b(0x71b)](_0x51154b(0x2e1)+_0x1b7711),_0x2f875b=null);break;case _0x51154b(0x377):let _0x31f22a=_0x1a6084(_0x1b7711);_0x31f22a!==null?_0x2f875b=_0x31f22a[_0x51154b(0x644)](_0x51154b(0x86),{'style':_0x51154b(0x4d8),'currency':_0x51154b(0x555)}):(console[_0x51154b(0x71b)]('Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20'+_0x1b7711),_0x2f875b=null);break;case _0x51154b(0x2c6):_0x2f875b=_0x1b7711[_0x51154b(0x103)]();break;case'lowerCase':_0x2f875b=_0x1b7711[_0x51154b(0x1c6)]();break;case _0x51154b(0x2c2):_0x2f875b=_0x1b7711[_0x51154b(0x213)]('\x20')[_0x51154b(0x3c4)](_0x1b41ad=>_0x1b41ad[_0x51154b(0x5b5)](0x0)[_0x51154b(0x103)]()+_0x1b41ad[_0x51154b(0x70f)](0x1)[_0x51154b(0x1c6)]())['join']('\x20');break;case _0x51154b(0x7b0):_0x2f875b=_0x1b7711[_0x51154b(0x6ba)]();break;default:_0x2f875b=_0x1b7711;}return _0x2f875b!==null?_0x2f875b[_0x51154b(0x2c5)]():null;}async[a0_0x37fa70(0xbb)](_0xdf8484,_0x32c7de){const _0x20ebfb=a0_0x37fa70;try{let _0x500d88=_0xdf8484['varedits']?.[_0x20ebfb(0x1c2)](_0x3a7aec=>_0x3a7aec[_0x20ebfb(0x1e5)]===_0x32c7de[_0x20ebfb(0x1b0)]?.[_0x20ebfb(0x2c5)]())||[],_0x59dc47=_0x32c7de['saveVariable'],_0x4f61b2=null,_0x1488df=[],_0x46b271=_0xdf8484[_0x20ebfb(0x5ed)]['realVariables'][_0x59dc47];_0x1488df[_0x20ebfb(0x5ee)](_0x20ebfb(0x74f)+_0x46b271+'\x22');for(let _0x10a3ac of _0x500d88){_0x10a3ac[_0x20ebfb(0x65d)]=_0x46b271,_0x4f61b2=_0x10a3ac['firstValue'];let _0x31d6e5;try{_0x31d6e5=this[_0x20ebfb(0x54e)](_0xdf8484,_0x10a3ac);}catch(_0x55c524){this[_0x20ebfb(0x39e)][_0x20ebfb(0x723)](_0x20ebfb(0x1be)+_0x55c524['message']);continue;}if(_0x31d6e5!==null){let _0x13d50f='Operador:\x20\x22'+_0x10a3ac[_0x20ebfb(0x351)]+'\x22',_0x560dd0=['toBRL',_0x20ebfb(0x2c6),_0x20ebfb(0x3f3),_0x20ebfb(0x2c2),_0x20ebfb(0x7b0)];_0x10a3ac['editOperator']==='findAndReplace'||_0x10a3ac['editOperator']===_0x20ebfb(0x45e)?_0x13d50f+=_0x20ebfb(0x44d)+_0x10a3ac[_0x20ebfb(0x260)]+'\x22,\x20valor\x20a\x20substituir:\x20\x22'+_0x10a3ac[_0x20ebfb(0x3ec)]+'\x22':!_0x560dd0[_0x20ebfb(0x14a)](_0x10a3ac[_0x20ebfb(0x351)])&&_0x10a3ac[_0x20ebfb(0x260)]!==null&&_0x10a3ac[_0x20ebfb(0x260)]!==void 0x0&&(_0x13d50f+=_0x20ebfb(0x285)+_0x10a3ac[_0x20ebfb(0x260)]+'\x22'),_0x13d50f+=_0x20ebfb(0x36f)+_0x31d6e5+'.',_0x1488df[_0x20ebfb(0x5ee)](_0x13d50f);}_0x31d6e5!==null&&(_0x46b271=_0x31d6e5);}if(_0xdf8484[_0x20ebfb(0x5ed)][_0x20ebfb(0x34a)]&&_0x32c7de[_0x20ebfb(0x272)]){_0xdf8484['chatLog'][_0x20ebfb(0x34a)][_0x32c7de[_0x20ebfb(0x272)]]=_0x46b271;let _0x53f966={'variable':_0x32c7de[_0x20ebfb(0x272)],'oldValue':_0x4f61b2,'newValue':_0x46b271,'moreLogs':_0x1488df};try{this[_0x20ebfb(0x5e2)](_0xdf8484,_0x32c7de,_0x53f966);}catch(_0x53f4d1){this['logger'][_0x20ebfb(0x723)](_0x20ebfb(0x4b9)+_0x53f4d1['message']);}}return _0x59dc47;}catch(_0x1ad2de){return this[_0x20ebfb(0x39e)][_0x20ebfb(0x723)](_0x20ebfb(0x13f)+_0x1ad2de['message']),null;}}async[a0_0x37fa70(0x281)](_0x373834,_0x6a5be4){const _0x27693c=a0_0x37fa70;try{let _0xed3252=[],_0x1ce1a5=_0x373834['conditions'][_0x27693c(0x1c2)](_0x4c0a2f=>_0x4c0a2f['blockId']===_0x6a5be4['_id'][_0x27693c(0x2c5)]()),_0x207298=null,_0x5ab9f8=!0x1;for(let _0x6241a9 of _0x1ce1a5){let _0x2ed197=this[_0x27693c(0x41c)](_0x373834,_0x6241a9);_0xed3252[_0x27693c(0x5ee)](_0x27693c(0x61b)+_0x6241a9[_0x27693c(0x65d)]+_0x27693c(0x1ac)+_0x6241a9[_0x27693c(0x49f)]+_0x27693c(0x405)+_0x6241a9['secondValue']+_0x27693c(0xf7)+_0x2ed197),_0x207298===null?_0x207298=_0x2ed197:_0x6241a9['OrAnd']===_0x27693c(0x554)?(_0x207298=_0x207298&&_0x2ed197,_0x2ed197||(_0x5ab9f8=!0x0)):_0x6241a9[_0x27693c(0x45b)]==='or'&&(_0x5ab9f8||(_0x207298=_0x207298||_0x2ed197));}_0x207298===null&&(_0x207298=!0x0);let _0x22f472={'moreLogs':_0xed3252};_0x373834[_0x27693c(0x5ed)][_0x27693c(0x517)]=_0x207298,await this[_0x27693c(0x5e2)](_0x373834,_0x6a5be4,_0x22f472);}catch(_0xdc986a){this['logger']['error'](this[_0x27693c(0x653)]+'\x20('+this[_0x27693c(0x753)]['wuid']+_0x27693c(0xf6)+(_0xdc986a instanceof Error?_0xdc986a[_0x27693c(0x33a)]:JSON['stringify'](_0xdc986a,null,0x2)));}}['evaluateCondition'](_0x31fa08,_0x2e9784){const _0x104380=a0_0x37fa70;let _0x1ad984=_0x2e9784['firstValue'],_0x427765=_0x2e9784['secondValue'];typeof _0x1ad984==_0x104380(0x615)&&(_0x1ad984=this[_0x104380(0x68a)](_0x1ad984,_0x31fa08['chatLog']['realVariables'])??''),typeof _0x427765==_0x104380(0x615)&&(_0x427765=this[_0x104380(0x68a)](_0x427765,_0x31fa08[_0x104380(0x5ed)][_0x104380(0x34a)])??'');try{switch(_0x2e9784[_0x104380(0x49f)]){case _0x104380(0x30f):return _0x1ad984===_0x427765;case _0x104380(0x40f):return _0x1ad984!==_0x427765;case'contains':return this[_0x104380(0x56f)](_0x1ad984,_0x427765);case'notContains':return!this[_0x104380(0x56f)](_0x1ad984,_0x427765);case _0x104380(0x5df):return parseFloat(_0x1ad984)>parseFloat(_0x427765);case _0x104380(0x1dc):return parseFloat(_0x1ad984)<parseFloat(_0x427765);case _0x104380(0x4b8):return _0x1ad984!=='';case _0x104380(0x2ef):return _0x1ad984==='';case'matchRegex':return new RegExp(_0x427765)[_0x104380(0x132)](_0x1ad984);case _0x104380(0x51d):return!new RegExp(_0x427765)[_0x104380(0x132)](_0x1ad984);default:return!0x1;}}catch(_0x566530){return this[_0x104380(0x39e)][_0x104380(0x723)]('Erro\x20ao\x20avaliar\x20a\x20condição:\x20'+_0x566530),!0x1;}}[a0_0x37fa70(0x56f)](_0x1da4b0,_0x16104d){const _0x4d7dff=a0_0x37fa70;if(_0x1da4b0===_0x16104d&&/^\d+$/['test'](_0x1da4b0))return!0x0;if(this['isListOfNumbers'](_0x1da4b0)&&/^\d+$/[_0x4d7dff(0x132)](_0x16104d)){let _0xd1a24=_0x1da4b0[_0x4d7dff(0x213)](',')[_0x4d7dff(0x3c4)](_0x4b38b6=>parseInt(_0x4b38b6[_0x4d7dff(0x6ba)]())),_0x2f4be0=parseInt(_0x16104d);return _0xd1a24[_0x4d7dff(0x14a)](_0x2f4be0);}return _0x1da4b0[_0x4d7dff(0x14a)](_0x16104d);}[a0_0x37fa70(0x4fb)](_0x1eef35){const _0x4613c0=a0_0x37fa70;return/^\d+(,\d+)*$/[_0x4613c0(0x132)](_0x1eef35);}[a0_0x37fa70(0x606)](_0x3e68c1){const _0xe4f7e2=a0_0x37fa70;let _0x182fb4=!0x0,_0x3471ad=null;for(let _0x4908e0 of _0x3e68c1){let _0x590d8b=this['evaluateConditionTest'](_0x4908e0);if(_0x3471ad==='or'&&_0x590d8b){_0x182fb4=!0x0;break;}if(_0x3471ad===_0xe4f7e2(0x554)&&!_0x590d8b){_0x182fb4=!0x1;break;}_0x3471ad=_0x4908e0[_0xe4f7e2(0x45b)];}return _0x182fb4;}[a0_0x37fa70(0x678)](_0x49d726){const _0x399f89=a0_0x37fa70;let _0x3affed=_0x49d726[_0x399f89(0x65d)],_0x521338=_0x49d726[_0x399f89(0x260)];try{switch(_0x49d726[_0x399f89(0x49f)]){case'equal':return String(_0x3affed)===String(_0x521338);case'notEqual':return String(_0x3affed)!==String(_0x521338);case _0x399f89(0x56f):return String(_0x3affed)[_0x399f89(0x14a)](String(_0x521338));case _0x399f89(0x29e):return!String(_0x3affed)[_0x399f89(0x14a)](String(_0x521338));case _0x399f89(0x5df):return parseFloat(String(_0x3affed))>parseFloat(String(_0x521338));case _0x399f89(0x1dc):return parseFloat(String(_0x3affed))<parseFloat(String(_0x521338));case _0x399f89(0x4b8):return String(_0x3affed)!=='';case _0x399f89(0x2ef):return String(_0x3affed)==='';case _0x399f89(0x629):return new RegExp(String(_0x521338))[_0x399f89(0x132)](String(_0x3affed));case'notMatchRegex':return!new RegExp(String(_0x521338))[_0x399f89(0x132)](String(_0x3affed));default:return!0x1;}}catch(_0x34ce59){return this['logger'][_0x399f89(0x723)](_0x399f89(0x3a3)+_0x34ce59),!0x1;}}async['saveTextReply'](_0x251511,_0x44d06f){const _0x5c4b5e=a0_0x37fa70;if(this[_0x5c4b5e(0x39e)][_0x5c4b5e(0x48f)](this[_0x5c4b5e(0x653)]+'\x20('+this[_0x5c4b5e(0x753)][_0x5c4b5e(0x6e4)]+'):\x20Entrou\x20na\x20função\x20saveReply'),!_0x251511||!_0x44d06f)return this['logger'][_0x5c4b5e(0x723)](this['instanceName']+'\x20('+this[_0x5c4b5e(0x753)][_0x5c4b5e(0x6e4)]+_0x5c4b5e(0x2ea)),null;let _0x385d36=_0x251511[_0x5c4b5e(0x5ed)][_0x5c4b5e(0x55c)][_0x5c4b5e(0x2d1)]['id'];this[_0x5c4b5e(0x39e)]['verbose'](this[_0x5c4b5e(0x653)]+'\x20('+this[_0x5c4b5e(0x753)][_0x5c4b5e(0x6e4)]+_0x5c4b5e(0x75a)+_0x385d36);let _0x18308b={'key':{'id':_0x385d36}},_0x51dc5f=_0x44d06f[_0x5c4b5e(0x272)];_0x251511['chatLog'][_0x5c4b5e(0x34a)]['_'+_0x51dc5f+_0x5c4b5e(0x141)]=null,_0x251511[_0x5c4b5e(0x5ed)][_0x5c4b5e(0x34a)]['_'+_0x51dc5f+_0x5c4b5e(0x704)]=null,_0x251511[_0x5c4b5e(0x5ed)][_0x5c4b5e(0x34a)]['_'+_0x51dc5f+_0x5c4b5e(0x1d6)]=null,_0x251511[_0x5c4b5e(0x5ed)]['realVariables']['_'+_0x51dc5f+'.type']=_0x251511[_0x5c4b5e(0x5ed)][_0x5c4b5e(0x55c)][_0x5c4b5e(0x519)];try{let _0x4111b3=await this[_0x5c4b5e(0x449)](_0x18308b);this[_0x5c4b5e(0x39e)][_0x5c4b5e(0x48f)](this[_0x5c4b5e(0x653)]+'\x20('+this[_0x5c4b5e(0x753)]['wuid']+_0x5c4b5e(0x3e9)),_0x251511['chatLog'][_0x5c4b5e(0x34a)]['_'+_0x51dc5f+'.url']=_0x4111b3[_0x5c4b5e(0x637)],_0x251511[_0x5c4b5e(0x5ed)][_0x5c4b5e(0x34a)]['_'+_0x51dc5f+_0x5c4b5e(0x704)]=_0x4111b3['mimetype'];let _0x529d93=_0x4111b3['mimetype'][_0x5c4b5e(0x538)](/\/(\w+)$/),_0x372b77=_0x529d93?_0x529d93[0x1]:null;_0x251511[_0x5c4b5e(0x5ed)][_0x5c4b5e(0x34a)]['_'+_0x51dc5f+'.extension']=_0x372b77,this[_0x5c4b5e(0x39e)][_0x5c4b5e(0x48f)](this[_0x5c4b5e(0x653)]+'\x20('+this[_0x5c4b5e(0x753)][_0x5c4b5e(0x6e4)]+_0x5c4b5e(0x49e)+_0x51dc5f+'\x27.');}catch(_0x39edf6){this[_0x5c4b5e(0x39e)][_0x5c4b5e(0x723)](this[_0x5c4b5e(0x653)]+'\x20('+this['instance'][_0x5c4b5e(0x6e4)]+_0x5c4b5e(0x356)+_0x39edf6[_0x5c4b5e(0x33a)]);}let _0x40958a=_0x251511['chatLog'][_0x5c4b5e(0x55c)]['text']||_0x251511['chatLog'][_0x5c4b5e(0x55c)][_0x5c4b5e(0x454)]||_0x251511[_0x5c4b5e(0x5ed)]['lastReceivedMessage'][_0x5c4b5e(0x38b)];try{_0x251511['chatLog']['realVariables']||(_0x251511[_0x5c4b5e(0x5ed)][_0x5c4b5e(0x34a)]={});let _0xa6db80=_0x251511['chatLog'][_0x5c4b5e(0x34a)][_0x51dc5f];_0x251511[_0x5c4b5e(0x5ed)]['realVariables'][_0x51dc5f]=_0x40958a;let _0x3f5cd3={'variable':_0x51dc5f,'oldValue':_0xa6db80,'newValue':_0x40958a};this[_0x5c4b5e(0x5e2)](_0x251511,_0x44d06f,_0x3f5cd3),this[_0x5c4b5e(0x39e)][_0x5c4b5e(0x48f)](this[_0x5c4b5e(0x653)]+'\x20('+this[_0x5c4b5e(0x753)][_0x5c4b5e(0x6e4)]+_0x5c4b5e(0x6f1));}catch(_0x18c12c){let _0x401fc0={'error':!0x0,'errorLog':_0x18c12c['toString']()};return this[_0x5c4b5e(0x5e2)](_0x251511,_0x44d06f,_0x401fc0),this[_0x5c4b5e(0x39e)][_0x5c4b5e(0x723)](this['instanceName']+'\x20('+this[_0x5c4b5e(0x753)][_0x5c4b5e(0x6e4)]+_0x5c4b5e(0x6e0)+(_0x18c12c instanceof Error?_0x18c12c[_0x5c4b5e(0x33a)]:JSON[_0x5c4b5e(0x718)](_0x18c12c,null,0x2))),null;}}async[a0_0x37fa70(0x6c6)](_0x4069bc,_0x522204){const _0x11bf80=a0_0x37fa70;if(this[_0x11bf80(0x39e)]['verbose'](this[_0x11bf80(0x653)]+'\x20('+this[_0x11bf80(0x753)][_0x11bf80(0x6e4)]+_0x11bf80(0x1ff)),!_0x4069bc||!_0x522204)return this[_0x11bf80(0x39e)][_0x11bf80(0x723)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x2158ae=Date[_0x11bf80(0x5cf)](),_0x2cad98=parseInt(_0x522204[_0x11bf80(0x219)],0xa);if(isNaN(_0x2cad98))return this[_0x11bf80(0x39e)][_0x11bf80(0x723)](this['instanceName']+'\x20('+this[_0x11bf80(0x753)][_0x11bf80(0x6e4)]+_0x11bf80(0x4ba)),null;let _0x3dd0e7={'newStoppedUntil':_0x2158ae+_0x2cad98*0x3c*0x3e8};return await this['updateConversation'](_0x4069bc,_0x522204,_0x3dd0e7,!0x0),null;}async[a0_0x37fa70(0x16b)](_0x175a7a,_0x73cf15){const _0x364839=a0_0x37fa70;try{switch(_0x73cf15[_0x364839(0x6b3)][_0x364839(0x501)]){case _0x364839(0x11d):await this[_0x364839(0x2ed)](_0x175a7a,_0x73cf15);break;case _0x364839(0x481):await this[_0x364839(0x778)](_0x175a7a,_0x73cf15);break;case _0x364839(0x669):await this['uazapiSendLocation'](_0x175a7a,_0x73cf15);break;case _0x364839(0x92):await this[_0x364839(0x215)](_0x175a7a,_0x73cf15);break;case'sendContact':await this[_0x364839(0x36a)](_0x175a7a,_0x73cf15);break;case _0x364839(0x54c):await this['uazapiSendMenu'](_0x175a7a,_0x73cf15);break;case _0x364839(0x585):await this['uazapiSendMenu'](_0x175a7a,_0x73cf15);break;case _0x364839(0x270):await this[_0x364839(0x243)](_0x175a7a,_0x73cf15);break;default:this[_0x364839(0x39e)][_0x364839(0x723)](this[_0x364839(0x653)]+'\x20('+this[_0x364839(0x753)][_0x364839(0x6e4)]+_0x364839(0x13b)+_0x73cf15[_0x364839(0x6b3)]['command']);}}catch(_0x2b36ce){this[_0x364839(0x39e)]['error'](this[_0x364839(0x653)]+'\x20('+this[_0x364839(0x753)][_0x364839(0x6e4)]+_0x364839(0x1f8)+(_0x2b36ce instanceof Error?_0x2b36ce['message']:JSON[_0x364839(0x718)](_0x2b36ce,null,0x2)));}}async[a0_0x37fa70(0x5e2)](_0xe53067,_0x4b0547,_0x4eb4df,_0x135fae=!0x1,_0x58106e=!0x1){const _0x136b09=a0_0x37fa70;_0xe53067['chatLog']['blockLogs']||(_0xe53067[_0x136b09(0x5ed)]['blockLogs']=[]);let _0x4d8993=(_0xe53067[_0x136b09(0x5ed)]['blockLogs']?.['length']??0x0)+0x1,_0x23244e=_0xe53067[_0x136b09(0x5ed)][_0x136b09(0x784)][_0x136b09(0x1c2)](_0x439b30=>String(_0x439b30[_0x136b09(0x1e5)])===String(_0x4b0547['_id']))[_0x136b09(0x426)]+0x1,_0x43bdd9=_0x4eb4df?.[_0x136b09(0x416)]??Date[_0x136b09(0x5cf)](),_0x346f7c=_0x4eb4df?.['error']?_0x4eb4df[_0x136b09(0x106)]??_0x4eb4df['error'][_0x136b09(0x2c5)]():void 0x0,_0x5a4d74={'onTime':_0x43bdd9,'blockId':_0x4b0547[_0x136b09(0x1b0)],'order':_0x4d8993,'activatedCount':_0x23244e,'error':_0x4eb4df?.[_0x136b09(0x723)]??!0x1,'messageId':_0x4eb4df?.[_0x136b09(0x700)],'apiResponse':_0x4eb4df?.[_0x136b09(0x648)],'apiResponseString':_0x4eb4df?.['apiResponse']?JSON[_0x136b09(0x718)](_0x4eb4df?.[_0x136b09(0x648)]):void 0x0,'variable':_0x4eb4df?.[_0x136b09(0x57d)],'oldValue':_0x4eb4df?.[_0x136b09(0x224)],'newValue':_0x4eb4df?.['newValue'],'newStoppedUntil':_0x4eb4df?.[_0x136b09(0x660)],'moreLogs':_0x4eb4df?.[_0x136b09(0x5fc)],'errorLog':_0x346f7c};if(_0x4eb4df[_0x136b09(0x5fc)]&&_0x4eb4df[_0x136b09(0x5fc)]['length']>0x0){let _0x379878=_0x4eb4df[_0x136b09(0x5fc)][_0x136b09(0x3c4)](_0x373ae6=>this['replaceVariablesLogs'](_0x373ae6,_0xe53067['chatLog'][_0x136b09(0x34a)]));_0x5a4d74[_0x136b09(0x5fc)]=_0x379878;}if(_0xe53067[_0x136b09(0x5ed)][_0x136b09(0x34a)]||(_0xe53067[_0x136b09(0x5ed)][_0x136b09(0x34a)]={}),_0xe53067[_0x136b09(0x5ed)]['realVariables'][_0x136b09(0x20c)]=String(_0x23244e),_0xe53067[_0x136b09(0x5ed)][_0x136b09(0x34a)][_0x136b09(0x288)]=String(_0x4eb4df['error']??!0x1),_0xe53067[_0x136b09(0x5ed)]['blockLogs']['push'](_0x5a4d74),_0xe53067[_0x136b09(0x5ed)][_0x136b09(0x34a)][_0x136b09(0x228)]&&_0xe53067[_0x136b09(0x5ed)][_0x136b09(0x34a)][_0x136b09(0x228)]!==_0xe53067[_0x136b09(0x6a8)]){let _0x3abc45=(await this['whatsappNumber']({'numbers':[_0xe53067[_0x136b09(0x5ed)]['realVariables']['telefone']]}))[0x0][_0x136b09(0xb1)];_0xe53067[_0x136b09(0x5ed)][_0x136b09(0x34a)][_0x136b09(0x228)]=_0x3abc45,_0xe53067[_0x136b09(0x6a8)]=_0x3abc45;try{let _0x6c87cd={'_id':{'$ne':_0xe53067[_0x136b09(0x1b0)]},'remoteJid':_0x3abc45,'status':_0x136b09(0x364)},_0x334f14={'status':_0x136b09(0x19b)};await this['repository']['flowConversation']['updateMany'](_0x6c87cd,_0x334f14,this[_0x136b09(0x753)][_0x136b09(0x6e4)]),this[_0x136b09(0x39e)][_0x136b09(0x48f)](this[_0x136b09(0x653)]+'\x20('+this['instance'][_0x136b09(0x6e4)]+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.');}catch(_0x5884f4){this[_0x136b09(0x39e)][_0x136b09(0x723)](this['instanceName']+'\x20('+this[_0x136b09(0x753)][_0x136b09(0x6e4)]+_0x136b09(0x365)+_0x5884f4['message']);}try{let _0x5b5aea=_0xe53067['chatLog']['realVariables'],_0x41f1fe=await this[_0x136b09(0x19e)](_0x3abc45),_0x2e12b0={..._0x5b5aea,..._0x41f1fe,'_remoteJid':_0x3abc45};_0xe53067['chatLog'][_0x136b09(0x34a)]=_0x2e12b0;}catch(_0x31ae74){this[_0x136b09(0x39e)]['error'](this['instanceName']+'\x20('+this['instance'][_0x136b09(0x6e4)]+'):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20'+_0x31ae74['message']);}}_0xe53067['chatLog'][_0x136b09(0x600)]=_0x4b0547[_0x136b09(0x1b0)][_0x136b09(0x2c5)](),_0xe53067[_0x136b09(0x5ed)][_0x136b09(0x770)]&&(_0xe53067[_0x136b09(0x5ed)][_0x136b09(0x770)]=_0xe53067[_0x136b09(0x5ed)][_0x136b09(0x770)]),_0xe53067[_0x136b09(0x5ed)]['lastReceivedMessage']&&(_0xe53067['chatLog'][_0x136b09(0x55c)]=_0xe53067['chatLog'][_0x136b09(0x55c)]),_0xe53067['chatLog'][_0x136b09(0x517)]&&(_0xe53067[_0x136b09(0x5ed)][_0x136b09(0x517)]=_0xe53067['chatLog'][_0x136b09(0x517)]),_0x58106e&&(_0xe53067[_0x136b09(0x4c1)]=_0x136b09(0x19b)),_0x135fae?this[_0x136b09(0x306)](_0xe53067):this[_0x136b09(0x3fd)](_0xe53067,_0x4b0547);}[a0_0x37fa70(0x345)](_0x5a59bb,_0xaedb65){const _0x205438=a0_0x37fa70;return _0x5a59bb['replace'](/\{\{([^}]+)\}\}/g,(_0x48d517,_0x3a7fe3)=>_0xaedb65[_0x3a7fe3]?'{{'+_0x3a7fe3+_0x205438(0x450)+_0xaedb65[_0x3a7fe3]+'\x22':'{{'+_0x3a7fe3+'}}\x20->\x20valor\x20não\x20encontrado');}async[a0_0x37fa70(0x306)](_0x366b6a){const _0x4c13b1=a0_0x37fa70;try{let _0x3d21da=Object[_0x4c13b1(0x491)](_0x366b6a['chatLog'][_0x4c13b1(0x34a)])[_0x4c13b1(0x3c4)](([_0x84f45a,_0x48e44c])=>({'name':_0x84f45a,'value':_0x48e44c})),_0x14d6d9={'status':_0x366b6a[_0x4c13b1(0x4c1)],'remoteJid':_0x366b6a['remoteJid'],'blocks':_0x366b6a[_0x4c13b1(0x19a)],'waitingMenu_id':_0x366b6a[_0x4c13b1(0x596)],'waitingMenu_text':_0x366b6a[_0x4c13b1(0x35d)],'waitingMenu_replyOptions':_0x366b6a[_0x4c13b1(0x564)],'chatLog':{'lastBlockId':_0x366b6a['chatLog'][_0x4c13b1(0x600)],'lastSendMessage':_0x366b6a[_0x4c13b1(0x5ed)]['lastSendMessage'],'lastReceivedMessage':_0x366b6a[_0x4c13b1(0x5ed)][_0x4c13b1(0x55c)],'lastCondition':_0x366b6a[_0x4c13b1(0x5ed)][_0x4c13b1(0x517)],'chatVariables':_0x3d21da,'realVariables':_0x366b6a[_0x4c13b1(0x5ed)][_0x4c13b1(0x34a)],'blockLogs':_0x366b6a[_0x4c13b1(0x5ed)][_0x4c13b1(0x784)]}},_0xeaa0a5=await this['repository'][_0x4c13b1(0x444)][_0x4c13b1(0x130)](_0x366b6a['_id'],_0x14d6d9,this['instance'][_0x4c13b1(0x6e4)]);if(_0xeaa0a5){this['logger'][_0x4c13b1(0x48f)](this[_0x4c13b1(0x653)]+'\x20('+this[_0x4c13b1(0x753)][_0x4c13b1(0x6e4)]+_0x4c13b1(0x3fb)+_0xeaa0a5[_0x4c13b1(0x1b0)]);try{let _0x3c69ca=[_0x4c13b1(0x2c4),_0x4c13b1(0x246),_0x4c13b1(0x6a5),'cpf','status',_0x4c13b1(0x65a),'responsavelid',_0x4c13b1(0x38c),_0x4c13b1(0x7b2),_0x4c13b1(0x2af)];if(!this['AutomateSystem']&&(await this[_0x4c13b1(0x2b1)](),!this[_0x4c13b1(0x1db)]))throw new Error(_0x4c13b1(0xda));let _0x5c427d=this[_0x4c13b1(0x1db)]?.['customFields'][_0x4c13b1(0x3c4)](_0xab3d52=>_0xab3d52[_0x4c13b1(0x410)]),_0x4d2965={};Object[_0x4c13b1(0x491)](_0x366b6a['chatLog'][_0x4c13b1(0x34a)])[_0x4c13b1(0x4b7)](([_0x40cb15,_0x37a66c])=>{const _0x465f0d=_0x4c13b1;_0x3c69ca[_0x465f0d(0x14a)](_0x40cb15)&&(_0x40cb15===_0x465f0d(0x38c)&&typeof _0x37a66c==_0x465f0d(0x615)?_0x4d2965[_0x40cb15]=_0x37a66c['split'](',')['map'](_0x4310a0=>_0x4310a0['trim']())[_0x465f0d(0x1c2)](_0x2513a0=>_0x2513a0!==''):_0x40cb15===_0x465f0d(0x7b2)&&typeof _0x37a66c==_0x465f0d(0x615)?_0x4d2965[_0x40cb15]=_0x37a66c[_0x465f0d(0x213)](',')[_0x465f0d(0x3c4)](_0x309023=>_0x309023[_0x465f0d(0x6ba)]())['filter'](_0x14e274=>_0x14e274!==''):_0x4d2965[_0x40cb15]=_0x37a66c);});let _0x2b60d4=_0x366b6a[_0x4c13b1(0x5ed)][_0x4c13b1(0x784)][_0x366b6a[_0x4c13b1(0x5ed)]['blockLogs'][_0x4c13b1(0x426)]-0x1];if(_0x2b60d4){let _0x157b1=_0x2b60d4[_0x4c13b1(0x660)];_0x157b1!==void 0x0&&(_0x4d2965['desativadoFluxoAte']=_0x157b1[_0x4c13b1(0x2c5)]());}let _0x662f02=_0x3d21da[_0x4c13b1(0x1c2)](_0x541a90=>_0x5c427d['includes'](_0x541a90[_0x4c13b1(0x410)]));this['logger']['verbose'](this[_0x4c13b1(0x653)]+'\x20('+this[_0x4c13b1(0x753)][_0x4c13b1(0x6e4)]+'):\x20leadInfoVariables'),this['logger'][_0x4c13b1(0x48f)](_0x4d2965),this[_0x4c13b1(0x39e)]['verbose'](this[_0x4c13b1(0x653)]+'\x20('+this[_0x4c13b1(0x753)][_0x4c13b1(0x6e4)]+_0x4c13b1(0x77e)),this['logger'][_0x4c13b1(0x48f)](_0x662f02);let _0x3ad0b0=_0x662f02['map'](_0x5bc08e=>{const _0x2e3470=_0x4c13b1;let _0x4ea4c1=this[_0x2e3470(0x1db)]?.[_0x2e3470(0x78b)][_0x2e3470(0x3b4)](_0x1fc4c9=>_0x1fc4c9[_0x2e3470(0x410)]===_0x5bc08e[_0x2e3470(0x410)]);if(!_0x4ea4c1)throw new Error(_0x2e3470(0x299)+_0x5bc08e[_0x2e3470(0x410)]);return{'_id':_0x4ea4c1[_0x2e3470(0x1b0)],'value':_0x5bc08e[_0x2e3470(0x3b2)]};});this[_0x4c13b1(0x39e)]['verbose'](this[_0x4c13b1(0x653)]+'\x20('+this[_0x4c13b1(0x753)]['wuid']+_0x4c13b1(0x44f)),this[_0x4c13b1(0x39e)][_0x4c13b1(0x48f)](_0x3ad0b0),await this[_0x4c13b1(0x466)](_0x366b6a[_0x4c13b1(0x6a8)],_0x4d2965,_0x3ad0b0);}catch(_0x10f1b6){this[_0x4c13b1(0x39e)][_0x4c13b1(0x723)](this[_0x4c13b1(0x653)]+'\x20('+this['instance'][_0x4c13b1(0x6e4)]+_0x4c13b1(0x5d6)+(_0x10f1b6 instanceof Error?_0x10f1b6[_0x4c13b1(0x33a)]:JSON['stringify'](_0x10f1b6,null,0x2)));}}else this[_0x4c13b1(0x39e)]['error'](this['instanceName']+'\x20('+this['instance'][_0x4c13b1(0x6e4)]+_0x4c13b1(0x3ff));}catch(_0x276039){this[_0x4c13b1(0x39e)][_0x4c13b1(0x723)](this[_0x4c13b1(0x653)]+'\x20('+this[_0x4c13b1(0x753)][_0x4c13b1(0x6e4)]+'):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20'+(_0x276039 instanceof Error?_0x276039['message']:JSON[_0x4c13b1(0x718)](_0x276039,null,0x2)));}}async[a0_0x37fa70(0x466)](_0x4ac23d,_0x8743ab,_0x2c8621){const _0x26ddb0=a0_0x37fa70;try{let _0x1d4c23={'leadInfo.leadnome':_0x8743ab[_0x26ddb0(0x2c4)],'leadInfo.nomecompleto':_0x8743ab[_0x26ddb0(0x246)],'leadInfo.email':_0x8743ab[_0x26ddb0(0x6a5)],'leadInfo.cpf':_0x8743ab[_0x26ddb0(0x91)],'leadInfo.status':_0x8743ab[_0x26ddb0(0x4c1)],'leadInfo.notas':_0x8743ab[_0x26ddb0(0x65a)],'leadInfo.responsavelid':_0x8743ab[_0x26ddb0(0xfd)],'leadInfo.tags':_0x8743ab[_0x26ddb0(0x38c)],'leadInfo.etiquetas':_0x8743ab['etiquetas'],'leadInfo.customFields':_0x2c8621,'leadInfo.atendimentoAberto':_0x8743ab[_0x26ddb0(0x2af)]},_0x43a4ae=await this[_0x26ddb0(0x210)]['chat'][_0x26ddb0(0x1e2)]({'where':{'_id':_0x4ac23d}},this[_0x26ddb0(0x753)]['wuid']);if(!_0x43a4ae)return _0x26ddb0(0x4b0);let _0x87f678=new Set(_0x43a4ae[_0x26ddb0(0x500)][_0x26ddb0(0x7b2)]||[]),_0x45e4ca=new Set(_0x8743ab['etiquetas']||[]),_0x4fa6b9=await this[_0x26ddb0(0x210)]['label'][_0x26ddb0(0x3b4)]({'where':{}},this['instance'][_0x26ddb0(0x6e4)]),_0x5d51f0=new Set(_0x4fa6b9['map'](_0x4dd219=>_0x4dd219[_0x26ddb0(0x1b0)])),_0x350041=[..._0x45e4ca][_0x26ddb0(0x1c2)](_0xb94839=>!_0x87f678[_0x26ddb0(0x632)](_0xb94839)&&_0x5d51f0['has'](_0xb94839)),_0x22f628=[..._0x87f678][_0x26ddb0(0x1c2)](_0xbd5026=>!_0x45e4ca[_0x26ddb0(0x632)](_0xbd5026));for(let _0x5e55b6 of _0x350041)await this[_0x26ddb0(0x384)](_0x5e55b6,_0x43a4ae[_0x26ddb0(0x1b0)]),_0x87f678[_0x26ddb0(0xf8)](_0x5e55b6);for(let _0x3e5c21 of _0x22f628)await this['RemoveChatLabel'](_0x3e5c21,_0x43a4ae[_0x26ddb0(0x1b0)]),_0x87f678[_0x26ddb0(0x6ad)](_0x3e5c21);if(_0x26ddb0(0xf0)in _0x8743ab){let _0xa65791=_0x8743ab[_0x26ddb0(0xf0)];_0x1d4c23[_0x26ddb0(0x66f)]=_0xa65791?Number(_0xa65791):null;}if(_0x26ddb0(0x2af)in _0x8743ab){let _0x1709d8=_0x8743ab['atendimentoAberto'][_0x26ddb0(0x1c6)]();_0x1d4c23[_0x26ddb0(0x276)]=_0x1709d8===_0x26ddb0(0x175)||_0x1709d8==='1'||_0x1709d8===_0x26ddb0(0x222)||_0x1709d8===_0x26ddb0(0x78d);}let _0x300b73=await this['repository'][_0x26ddb0(0x4a2)][_0x26ddb0(0x130)]({'where':{'_id':_0x4ac23d}},_0x1d4c23,this[_0x26ddb0(0x753)][_0x26ddb0(0x6e4)]);_0x300b73?(this[_0x26ddb0(0x39e)][_0x26ddb0(0x48f)](this[_0x26ddb0(0x653)]+'\x20('+this[_0x26ddb0(0x753)][_0x26ddb0(0x6e4)]+_0x26ddb0(0x415)+_0x300b73[_0x26ddb0(0x1b0)]),q(this[_0x26ddb0(0x653)],'chats',{'chat':_0x300b73})):this[_0x26ddb0(0x39e)][_0x26ddb0(0x723)](this[_0x26ddb0(0x653)]+'\x20('+this[_0x26ddb0(0x753)]['wuid']+_0x26ddb0(0x1bd));}catch(_0x24554e){this[_0x26ddb0(0x39e)][_0x26ddb0(0x723)](this[_0x26ddb0(0x653)]+'\x20('+this[_0x26ddb0(0x753)][_0x26ddb0(0x6e4)]+_0x26ddb0(0x225)+(_0x24554e instanceof Error?_0x24554e[_0x26ddb0(0x33a)]:JSON[_0x26ddb0(0x718)](_0x24554e,null,0x2)));}}async['updateStopChat'](_0x24d87d,_0x2fca60){const _0x1a2cd7=a0_0x37fa70;this[_0x1a2cd7(0x39e)]['verbose'](this[_0x1a2cd7(0x653)]+'\x20('+this[_0x1a2cd7(0x753)][_0x1a2cd7(0x6e4)]+_0x1a2cd7(0x8f)+_0x2fca60);try{let _0x2d12bf=await this[_0x1a2cd7(0x210)]['chat']['updateOne']({'where':{'_id':_0x24d87d[_0x1a2cd7(0x6a8)]}},{'leadInfo.desativadoFluxoAte':_0x2fca60},this[_0x1a2cd7(0x753)]['wuid']);this[_0x1a2cd7(0x39e)][_0x1a2cd7(0x48f)](this['instanceName']+'\x20('+this[_0x1a2cd7(0x753)]['wuid']+_0x1a2cd7(0xff)+_0x24d87d[_0x1a2cd7(0x1b0)]),this[_0x1a2cd7(0x39e)][_0x1a2cd7(0x48f)](this[_0x1a2cd7(0x653)]+'\x20('+this['instance'][_0x1a2cd7(0x6e4)]+_0x1a2cd7(0x8f)+JSON['stringify'](_0x2d12bf,null,0x2)),_0x2d12bf&&q(this[_0x1a2cd7(0x653)],_0x1a2cd7(0x5c9),{'chat':_0x2d12bf});}catch(_0x69926d){this[_0x1a2cd7(0x39e)]['error'](this[_0x1a2cd7(0x653)]+'\x20('+this[_0x1a2cd7(0x753)][_0x1a2cd7(0x6e4)]+_0x1a2cd7(0x529)+(_0x69926d instanceof Error?_0x69926d['message']:JSON['stringify'](_0x69926d,null,0x2)));}}async[a0_0x37fa70(0x66b)](_0x1c06fb){const _0x485c8e=a0_0x37fa70;try{this[_0x485c8e(0x39e)]['verbose'](this[_0x485c8e(0x653)]+'\x20('+this['instance'][_0x485c8e(0x6e4)]+_0x485c8e(0x7c2));let _0x15c148=_0x1c06fb[_0x485c8e(0x2e9)](/\D/g,''),_0x13cb1d=this['AutomateSystem'][_0x485c8e(0x59c)]['find'](_0x39379b=>_0x39379b['testingWith']===_0x15c148);if(_0x13cb1d||(this[_0x485c8e(0x39e)][_0x485c8e(0x48f)](this[_0x485c8e(0x653)]+'\x20('+this[_0x485c8e(0x753)][_0x485c8e(0x6e4)]+_0x485c8e(0x65b)),_0x13cb1d=this[_0x485c8e(0x1db)]['flows'][_0x485c8e(0x3b4)](_0xaa38d5=>_0xaa38d5[_0x485c8e(0x259)]===!0x0)),!_0x13cb1d)return this[_0x485c8e(0x39e)]['verbose'](this[_0x485c8e(0x653)]+'\x20('+this['instance']['wuid']+_0x485c8e(0x1fa)),null;let _0xb38705=await this['repository']['flow'][_0x485c8e(0x1e2)]({'where':{'_id':_0x13cb1d[_0x485c8e(0x1b0)]}});if(!_0xb38705||!_0xb38705['whoCanUse']?.[_0x485c8e(0x14a)](this[_0x485c8e(0x753)][_0x485c8e(0x6e4)]))throw this[_0x485c8e(0x39e)][_0x485c8e(0x723)](this[_0x485c8e(0x653)]+'\x20('+this['instance'][_0x485c8e(0x6e4)]+_0x485c8e(0x21b)+_0xb38705[_0x485c8e(0x1b0)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x485c8e(0x2e6)+_0xb38705['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');return _0xb38705;}catch(_0x1372c8){return this['logger'][_0x485c8e(0x723)](this[_0x485c8e(0x653)]+'\x20('+this[_0x485c8e(0x753)][_0x485c8e(0x6e4)]+_0x485c8e(0x4a1)+(_0x1372c8 instanceof Error?_0x1372c8['message']:JSON[_0x485c8e(0x718)](_0x1372c8,null,0x2))),null;}}async[a0_0x37fa70(0x760)](_0x1d26fd,_0x32c2de){const _0x571c28=a0_0x37fa70;try{let _0x1239f6=!!_0x32c2de[_0x571c28(0x38b)],_0x4d8c9d=_0x32c2de[_0x571c28(0x121)],_0xde6183=null;if(this[_0x571c28(0x39e)]['verbose'](this[_0x571c28(0x653)]+'\x20('+this[_0x571c28(0x753)][_0x571c28(0x6e4)]+_0x571c28(0x6f7)+_0x1239f6+'\x20quoted:\x20'+_0x4d8c9d),_0x1239f6){this['logger'][_0x571c28(0x48f)](this[_0x571c28(0x653)]+'\x20('+this[_0x571c28(0x753)][_0x571c28(0x6e4)]+_0x571c28(0x2bb));let _0x57cb88={'where':{'remoteJid':_0x1d26fd,'waitingMenu_id':_0x4d8c9d}};if(_0xde6183=await this[_0x571c28(0x210)][_0x571c28(0x444)][_0x571c28(0x1e2)](_0x57cb88,this[_0x571c28(0x753)][_0x571c28(0x6e4)]),!_0xde6183)return this['logger'][_0x571c28(0x48f)](this[_0x571c28(0x653)]+'\x20('+this['instance'][_0x571c28(0x6e4)]+_0x571c28(0x4cc)),null;let _0x33f3ff=Date[_0x571c28(0x5cf)](),_0x371bf1=_0xde6183?.[_0x571c28(0x6cf)]||0x0,_0x23adb4=_0x33f3ff-_0x371bf1*0x3c*0x3e8;if(_0xde6183[_0x571c28(0x724)]<_0x23adb4){this[_0x571c28(0x39e)][_0x571c28(0x48f)](this[_0x571c28(0x653)]+'\x20('+this[_0x571c28(0x753)][_0x571c28(0x6e4)]+_0x571c28(0xa9));let _0x49a709={'number':_0xde6183[_0x571c28(0x6a8)],'options':{'delay':0x0},'textMessage':{'text':_0xde6183[_0x571c28(0x29d)]}};await this[_0x571c28(0x3a6)](_0x49a709);let _0x126899={'status':_0x571c28(0x19b),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this['repository'][_0x571c28(0x444)][_0x571c28(0x130)](_0xde6183[_0x571c28(0x1b0)],_0x126899,this['instance']['wuid']),null;}return _0xde6183[_0x571c28(0x724)]=Date[_0x571c28(0x5cf)](),_0xde6183[_0x571c28(0x5ed)][_0x571c28(0x55c)]=_0x32c2de,_0xde6183;}else{this[_0x571c28(0x39e)][_0x571c28(0x48f)](this[_0x571c28(0x653)]+'\x20('+this[_0x571c28(0x753)][_0x571c28(0x6e4)]+_0x571c28(0x17d)+this[_0x571c28(0x753)][_0x571c28(0x6e4)]+_0x571c28(0x319)),this[_0x571c28(0x39e)]['verbose'](this[_0x571c28(0x653)]+'\x20('+this[_0x571c28(0x753)][_0x571c28(0x6e4)]+_0x571c28(0x40b));let _0x439467={'where':{'remoteJid':_0x1d26fd,'status':_0x571c28(0x364)}};if(_0xde6183=await this[_0x571c28(0x210)]['flowConversation'][_0x571c28(0x1e2)](_0x439467,this[_0x571c28(0x753)][_0x571c28(0x6e4)]),!_0xde6183){let _0x8a896e=await this[_0x571c28(0x66b)](_0x1d26fd);if(_0x8a896e&&(_0xde6183=await this[_0x571c28(0x5b4)](_0x8a896e,_0x32c2de[_0x571c28(0x2d1)],_0x32c2de)),!_0xde6183)return null;}let _0x499174=Date[_0x571c28(0x5cf)](),_0x41c5b0=_0xde6183?.['minutesToClose']||0x0,_0xc25425=_0x499174-_0x41c5b0*0x3c*0x3e8;if(this[_0x571c28(0x39e)][_0x571c28(0x48f)](this['instanceName']+'\x20('+this[_0x571c28(0x753)][_0x571c28(0x6e4)]+'):\x20Current\x20Time:\x20'+_0x499174+',\x20Minutes\x20to\x20Close:\x20'+_0x41c5b0+_0x571c28(0x4fe)+_0xc25425),this[_0x571c28(0x39e)][_0x571c28(0x48f)](this['instanceName']+'\x20('+this[_0x571c28(0x753)][_0x571c28(0x6e4)]+_0x571c28(0x78c)),this[_0x571c28(0x39e)]['verbose'](this[_0x571c28(0x653)]+'\x20('+this[_0x571c28(0x753)][_0x571c28(0x6e4)]+'):\x20conversation.lastInteraction:\x20'+_0xde6183[_0x571c28(0x724)]),this[_0x571c28(0x39e)][_0x571c28(0x48f)](this[_0x571c28(0x653)]+'\x20('+this['instance'][_0x571c28(0x6e4)]+'):\x20expirationTime:\x20'+_0xc25425),_0xde6183[_0x571c28(0x724)]<_0xc25425){this['logger'][_0x571c28(0x48f)](this[_0x571c28(0x653)]+'\x20('+this[_0x571c28(0x753)][_0x571c28(0x6e4)]+_0x571c28(0x7a1));let _0x29bd22=await this[_0x571c28(0x66b)](_0x1d26fd);if(_0x29bd22===null)return null;_0xde6183&&await this[_0x571c28(0x210)][_0x571c28(0x444)][_0x571c28(0x130)](_0xde6183['_id'],{'status':_0x571c28(0x19b)},this[_0x571c28(0x753)][_0x571c28(0x6e4)]),_0xde6183=await this[_0x571c28(0x5b4)](_0x29bd22,_0x32c2de['key'],_0x32c2de);}return _0xde6183[_0x571c28(0x724)]=_0x499174,_0xde6183[_0x571c28(0x5ed)][_0x571c28(0x55c)]=_0x32c2de,_0xde6183;}}catch(_0x4342c4){return this['logger'][_0x571c28(0x723)](this[_0x571c28(0x653)]+'\x20('+this[_0x571c28(0x753)][_0x571c28(0x6e4)]+_0x571c28(0xee)+(_0x4342c4 instanceof Error?_0x4342c4[_0x571c28(0x33a)]:JSON[_0x571c28(0x718)](_0x4342c4,null,0x2))),null;}}async[a0_0x37fa70(0x5b4)](_0x8deba7,_0x1985ae,_0xc3710c){const _0x9d5410=a0_0x37fa70;this[_0x9d5410(0x39e)]['verbose'](this['instanceName']+'\x20('+this[_0x9d5410(0x753)]['wuid']+_0x9d5410(0x4fd));try{let _0x17d6bc=require(_0x9d5410(0x4ab))[_0x9d5410(0x721)],_0x2e3129=Date[_0x9d5410(0x5cf)](),_0x1385e1='start',_0x184a52=_0x1985ae[_0x9d5410(0x2b5)]?null:_0xc3710c,_0x4f18bd=_0x1985ae[_0x9d5410(0x2b5)]?_0xc3710c:null,_0x45599a=_0x1985ae['remoteJid'],_0x59bacb=this['AutomateSystem'][_0x9d5410(0x59c)]['find'](_0x2f61ea=>_0x2f61ea[_0x9d5410(0x1b0)]===_0x8deba7[_0x9d5410(0x1b0)]?.[_0x9d5410(0x2c5)]()),_0x496ff9=_0x59bacb?.[_0x9d5410(0x6cf)]??_0x8deba7[_0x9d5410(0x6cf)]??0x0,_0x998e1=_0x59bacb?.['readMessages']??_0x8deba7[_0x9d5410(0x3eb)]??!0x1;await this[_0x9d5410(0x23b)](_0x45599a);let _0x31a4b3={'flowId':_0x8deba7[_0x9d5410(0x1b0)],..._0x8deba7,'chatLog':null},_0x1ae684=await this[_0x9d5410(0x523)](_0x31a4b3[_0x9d5410(0x6b8)]),_0x841eb1=await this['getVariablesChat'](_0x45599a),_0x47a7af={..._0x1ae684,..._0x841eb1,'_remoteJid':_0x45599a},_0x34161a={'lastReceivedMessage':_0x184a52,'lastSendMessage':_0x4f18bd,'lastBlockId':_0x1385e1,'lastCondition':!0x0,'realVariables':_0x47a7af};_0x31a4b3[_0x9d5410(0x5ed)]=_0x34161a,delete _0x31a4b3[_0x9d5410(0x1b0)],_0x31a4b3[_0x9d5410(0x1b0)]=new _0x17d6bc(),_0x31a4b3['lastInteraction']=_0x2e3129,_0x31a4b3[_0x9d5410(0x4c1)]='open',_0x31a4b3['remoteJid']=_0x45599a,_0x31a4b3['minutesToClose']=_0x496ff9,_0x31a4b3[_0x9d5410(0x3eb)]=_0x998e1;let _0x59dbeb=await this[_0x9d5410(0x210)][_0x9d5410(0x444)][_0x9d5410(0x130)](_0x31a4b3[_0x9d5410(0x1b0)],_0x31a4b3,this['instance'][_0x9d5410(0x6e4)]);return this[_0x9d5410(0x39e)]['verbose'](this[_0x9d5410(0x653)]+'\x20('+this[_0x9d5410(0x753)][_0x9d5410(0x6e4)]+_0x9d5410(0x20d)),_0x59dbeb?_0x31a4b3:null;}catch(_0x5a1830){return this['logger']['error'](this[_0x9d5410(0x653)]+'\x20('+this[_0x9d5410(0x753)][_0x9d5410(0x6e4)]+_0x9d5410(0x73f)+(_0x5a1830 instanceof Error?_0x5a1830[_0x9d5410(0x33a)]:JSON['stringify'](_0x5a1830,null,0x2))),_0x5a1830;}}async[a0_0x37fa70(0x2ed)](_0x37140d,_0x36888c){const _0x435f7a=a0_0x37fa70;let _0x324b51=_0x37140d['remoteJid'];_0x36888c[_0x435f7a(0x6b3)][_0x435f7a(0x6a8)]&&_0x36888c[_0x435f7a(0x6b3)][_0x435f7a(0x6a8)][_0x435f7a(0x6ba)]()!==''&&(_0x324b51=_0x36888c['uazapi']['remoteJid'][_0x435f7a(0x6ba)]()),this[_0x435f7a(0x39e)][_0x435f7a(0x48f)](this[_0x435f7a(0x653)]+'\x20('+this[_0x435f7a(0x753)][_0x435f7a(0x6e4)]+_0x435f7a(0x136));let _0x2b4c67={'number':_0x324b51,'options':{'delay':_0x36888c[_0x435f7a(0x6b3)][_0x435f7a(0xb9)],'linkPreview':_0x36888c['uazapi'][_0x435f7a(0x761)]},'textMessage':{'text':_0x36888c['uazapi'][_0x435f7a(0x403)]}};try{let _0x373582=await this['textMessage'](_0x2b4c67);if(_0x373582){let _0xce59fd={'_id':_0x373582[_0x435f7a(0x2d1)]['id'],'_fromMe':_0x373582['key']['fromMe'],'_remoteJid':_0x373582[_0x435f7a(0x2d1)][_0x435f7a(0x6a8)]},_0x518e08=(0x0,w[_0x435f7a(0x1d4)])(_0x373582['message']),_0xc614cb=(0x0,w[_0x435f7a(0x8c)])(_0x518e08);_0x37140d['chatLog'][_0x435f7a(0x600)]=_0x36888c[_0x435f7a(0x1b0)][_0x435f7a(0x2c5)]();let {message_normalized:_0x29b17a}=this[_0x435f7a(0x3a4)](_0x518e08,_0xc614cb,null);_0x37140d[_0x435f7a(0x5ed)][_0x435f7a(0x770)]=await _0x29b17a;let _0x313207={'messageId':_0x373582[_0x435f7a(0x2d1)]['id']},_0x31e2ea=_0x37140d[_0x435f7a(0x5ed)][_0x435f7a(0x34a)];Object[_0x435f7a(0x4f8)](_0x31e2ea,_0xce59fd),_0x37140d[_0x435f7a(0x5ed)][_0x435f7a(0x34a)]=_0x31e2ea,this['updateConversation'](_0x37140d,_0x36888c,_0x313207);}else{let _0x41d5c4={'error':!0x0};this[_0x435f7a(0x5e2)](_0x37140d,_0x36888c,_0x41d5c4),this[_0x435f7a(0x39e)]['error'](this['instanceName']+'\x20('+this[_0x435f7a(0x753)][_0x435f7a(0x6e4)]+_0x435f7a(0x5bb));}}catch(_0x2bd6a7){let _0x37a9d4={'error':!0x0,'errorLog':_0x2bd6a7[_0x435f7a(0x2c5)]()};this[_0x435f7a(0x5e2)](_0x37140d,_0x36888c,_0x37a9d4),this['logger']['error'](this[_0x435f7a(0x653)]+'\x20('+this[_0x435f7a(0x753)][_0x435f7a(0x6e4)]+_0x435f7a(0x599)+(_0x2bd6a7 instanceof Error?_0x2bd6a7[_0x435f7a(0x33a)]:JSON[_0x435f7a(0x718)](_0x2bd6a7,null,0x2)));}}async[a0_0x37fa70(0x778)](_0x3873ea,_0x27d18b){const _0x133c63=a0_0x37fa70;let _0x58d546=_0x3873ea['remoteJid'];_0x27d18b[_0x133c63(0x6b3)][_0x133c63(0x6a8)]&&_0x27d18b[_0x133c63(0x6b3)]['remoteJid'][_0x133c63(0x6ba)]()!==''&&(_0x58d546=_0x27d18b['uazapi'][_0x133c63(0x6a8)][_0x133c63(0x6ba)]()),this[_0x133c63(0x39e)][_0x133c63(0x48f)](this['instanceName']+'\x20('+this[_0x133c63(0x753)][_0x133c63(0x6e4)]+_0x133c63(0x743));let _0xdd50c4={'number':_0x58d546,'options':{'delay':_0x27d18b[_0x133c63(0x6b3)][_0x133c63(0xb9)],'linkPreview':_0x27d18b['uazapi'][_0x133c63(0x761)]},'mediaMessage':{'mediatype':_0x27d18b[_0x133c63(0x6b3)][_0x133c63(0x5ab)],'caption':_0x27d18b[_0x133c63(0x6b3)]['caption'],'media':_0x27d18b['uazapi'][_0x133c63(0x435)],'fileName':_0x27d18b['uazapi'][_0x133c63(0x765)]}};try{let _0x2905d7=await this[_0x133c63(0x6ec)](_0xdd50c4);if(_0x2905d7){let _0x4a5f8b={'_id':_0x2905d7[_0x133c63(0x2d1)]['id'],'_fromMe':_0x2905d7[_0x133c63(0x2d1)]['fromMe'],'_remoteJid':_0x2905d7[_0x133c63(0x2d1)][_0x133c63(0x6a8)]},_0x484bdc=(0x0,w[_0x133c63(0x1d4)])(_0x2905d7['message']),_0x116451=(0x0,w['getContentType'])(_0x484bdc);_0x3873ea['chatLog'][_0x133c63(0x600)]=_0x27d18b[_0x133c63(0x1b0)][_0x133c63(0x2c5)]();let {message_normalized:_0x1729df}=this['normalizeMessage'](_0x484bdc,_0x116451,null);_0x3873ea[_0x133c63(0x5ed)][_0x133c63(0x770)]=await _0x1729df;let _0x7b28c5={'messageId':_0x2905d7[_0x133c63(0x2d1)]['id']},_0x2262ef=_0x3873ea[_0x133c63(0x5ed)][_0x133c63(0x34a)];Object[_0x133c63(0x4f8)](_0x2262ef,_0x4a5f8b),_0x3873ea[_0x133c63(0x5ed)][_0x133c63(0x34a)]=_0x2262ef,this[_0x133c63(0x5e2)](_0x3873ea,_0x27d18b,_0x7b28c5);}else{let _0x24c41b={'error':!0x0};this[_0x133c63(0x5e2)](_0x3873ea,_0x27d18b,_0x24c41b),this[_0x133c63(0x39e)][_0x133c63(0x723)](this[_0x133c63(0x653)]+'\x20('+this[_0x133c63(0x753)][_0x133c63(0x6e4)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.');}}catch(_0x2f7447){let _0x143563={'error':!0x0,'errorLog':_0x2f7447[_0x133c63(0x2c5)]()};this[_0x133c63(0x5e2)](_0x3873ea,_0x27d18b,_0x143563),this[_0x133c63(0x39e)][_0x133c63(0x723)](this[_0x133c63(0x653)]+'\x20('+this['instance']['wuid']+_0x133c63(0x6fe)+(_0x2f7447 instanceof Error?_0x2f7447[_0x133c63(0x33a)]:JSON[_0x133c63(0x718)](_0x2f7447,null,0x2)));}}async[a0_0x37fa70(0x279)](_0x52ce9e,_0x18eefb){const _0x456578=a0_0x37fa70;let _0x27e623=_0x52ce9e[_0x456578(0x6a8)];_0x18eefb[_0x456578(0x6b3)][_0x456578(0x6a8)]&&_0x18eefb[_0x456578(0x6b3)][_0x456578(0x6a8)]['trim']()!==''&&(_0x27e623=_0x18eefb['uazapi']['remoteJid']['trim']()),this[_0x456578(0x39e)][_0x456578(0x48f)](this[_0x456578(0x653)]+'\x20('+this[_0x456578(0x753)][_0x456578(0x6e4)]+'):\x20Enviando\x20localização');let _0x5dfad8={'number':_0x27e623,'options':{'delay':_0x18eefb['uazapi'][_0x456578(0xb9)]},'locationMessage':{'name':_0x18eefb[_0x456578(0x6b3)][_0x456578(0x410)],'address':_0x18eefb['uazapi'][_0x456578(0x3f8)],'latitude':_0x18eefb[_0x456578(0x6b3)]['latitude'],'longitude':_0x18eefb[_0x456578(0x6b3)][_0x456578(0x26d)]}};try{let _0x471fda=await this[_0x456578(0x6f6)](_0x5dfad8);if(_0x471fda){let _0x421559={'_id':_0x471fda[_0x456578(0x2d1)]['id'],'_fromMe':_0x471fda[_0x456578(0x2d1)][_0x456578(0x2b5)],'_remoteJid':_0x471fda['key'][_0x456578(0x6a8)]},_0x1fbff0=(0x0,w[_0x456578(0x1d4)])(_0x471fda['message']),_0x45d3fd=(0x0,w[_0x456578(0x8c)])(_0x1fbff0);_0x52ce9e['chatLog']['lastBlockId']=_0x18eefb[_0x456578(0x1b0)][_0x456578(0x2c5)]();let {message_normalized:_0x32445d}=this['normalizeMessage'](_0x1fbff0,_0x45d3fd,null);_0x52ce9e[_0x456578(0x5ed)]['lastSendMessage']=await _0x32445d;let _0x4b2eb1={'messageId':_0x471fda[_0x456578(0x2d1)]['id']},_0x4148ee=_0x52ce9e[_0x456578(0x5ed)][_0x456578(0x34a)];Object[_0x456578(0x4f8)](_0x4148ee,_0x421559),_0x52ce9e[_0x456578(0x5ed)][_0x456578(0x34a)]=_0x4148ee,this[_0x456578(0x5e2)](_0x52ce9e,_0x18eefb,_0x4b2eb1);}else{let _0x1a01c5={'error':!0x0};this[_0x456578(0x5e2)](_0x52ce9e,_0x18eefb,_0x1a01c5),this[_0x456578(0x39e)]['error'](this[_0x456578(0x653)]+'\x20('+this[_0x456578(0x753)][_0x456578(0x6e4)]+_0x456578(0xfc));}}catch(_0x2c944a){let _0x2ad0ad={'error':!0x0,'errorLog':_0x2c944a[_0x456578(0x2c5)]()};this[_0x456578(0x5e2)](_0x52ce9e,_0x18eefb,_0x2ad0ad),this[_0x456578(0x39e)][_0x456578(0x723)](this[_0x456578(0x653)]+'\x20('+this[_0x456578(0x753)][_0x456578(0x6e4)]+_0x456578(0x693)+(_0x2c944a instanceof Error?_0x2c944a[_0x456578(0x33a)]:JSON[_0x456578(0x718)](_0x2c944a,null,0x2)));}}async[a0_0x37fa70(0x215)](_0x45a3e0,_0x1b65c2){const _0x3eea7c=a0_0x37fa70;let _0x372b1b=_0x45a3e0[_0x3eea7c(0x6a8)];_0x1b65c2[_0x3eea7c(0x6b3)]['remoteJid']&&_0x1b65c2[_0x3eea7c(0x6b3)][_0x3eea7c(0x6a8)]['trim']()!==''&&(_0x372b1b=_0x1b65c2[_0x3eea7c(0x6b3)][_0x3eea7c(0x6a8)][_0x3eea7c(0x6ba)]()),this[_0x3eea7c(0x39e)]['verbose'](this['instanceName']+'\x20('+this[_0x3eea7c(0x753)][_0x3eea7c(0x6e4)]+_0x3eea7c(0x1b4));let _0x56d36d={'number':_0x372b1b,'options':{'delay':_0x1b65c2[_0x3eea7c(0x6b3)]['delay']},'audioMessage':{'audio':_0x1b65c2[_0x3eea7c(0x6b3)][_0x3eea7c(0x1a9)]}};try{let _0x4a328d=await this[_0x3eea7c(0x287)](_0x56d36d);if(_0x4a328d){let _0x19846d={'_id':_0x4a328d['key']['id'],'_fromMe':_0x4a328d[_0x3eea7c(0x2d1)]['fromMe'],'_remoteJid':_0x4a328d[_0x3eea7c(0x2d1)][_0x3eea7c(0x6a8)]},_0x4c526c=(0x0,w['normalizeMessageContent'])(_0x4a328d[_0x3eea7c(0x33a)]),_0x5a01cf=(0x0,w['getContentType'])(_0x4c526c);_0x45a3e0[_0x3eea7c(0x5ed)][_0x3eea7c(0x600)]=_0x1b65c2['_id'][_0x3eea7c(0x2c5)]();let {message_normalized:_0x41f579}=this[_0x3eea7c(0x3a4)](_0x4c526c,_0x5a01cf,null);_0x45a3e0[_0x3eea7c(0x5ed)][_0x3eea7c(0x770)]=await _0x41f579;let _0x37a20e={'messageId':_0x4a328d['key']['id']},_0x525227=_0x45a3e0[_0x3eea7c(0x5ed)]['realVariables'];Object[_0x3eea7c(0x4f8)](_0x525227,_0x19846d),_0x45a3e0[_0x3eea7c(0x5ed)][_0x3eea7c(0x34a)]=_0x525227,this['updateConversation'](_0x45a3e0,_0x1b65c2,_0x37a20e);}else{let _0x4c2676={'error':!0x0};this[_0x3eea7c(0x5e2)](_0x45a3e0,_0x1b65c2,_0x4c2676),this[_0x3eea7c(0x39e)][_0x3eea7c(0x723)](this[_0x3eea7c(0x653)]+'\x20('+this[_0x3eea7c(0x753)]['wuid']+_0x3eea7c(0x488));}}catch(_0x1992fc){let _0x2e8dc7={'error':!0x0,'errorLog':_0x1992fc[_0x3eea7c(0x2c5)]()};this['updateConversation'](_0x45a3e0,_0x1b65c2,_0x2e8dc7),this['logger'][_0x3eea7c(0x723)](this[_0x3eea7c(0x653)]+'\x20('+this[_0x3eea7c(0x753)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20'+(_0x1992fc instanceof Error?_0x1992fc['message']:JSON['stringify'](_0x1992fc,null,0x2)));}}async[a0_0x37fa70(0x36a)](_0x43aea4,_0x3d5b23){const _0x4787c9=a0_0x37fa70;let _0x154f4a=_0x43aea4['remoteJid'];_0x3d5b23['uazapi'][_0x4787c9(0x6a8)]&&_0x3d5b23[_0x4787c9(0x6b3)][_0x4787c9(0x6a8)]['trim']()!==''&&(_0x154f4a=_0x3d5b23['uazapi'][_0x4787c9(0x6a8)][_0x4787c9(0x6ba)]()),this['logger'][_0x4787c9(0x48f)](this[_0x4787c9(0x653)]+'\x20('+this['instance'][_0x4787c9(0x6e4)]+_0x4787c9(0x486));let _0x4fbcd2={'number':_0x154f4a,'options':{'delay':_0x3d5b23[_0x4787c9(0x6b3)]['delay']},'contactMessage':[{'fullName':_0x3d5b23['uazapi'][_0x4787c9(0x797)],'phoneNumber':_0x3d5b23[_0x4787c9(0x6b3)][_0x4787c9(0x181)]}]};try{let _0x57d8be=await this['contactMessage'](_0x4fbcd2);if(_0x57d8be){let _0x243f26={'_id':_0x57d8be[_0x4787c9(0x2d1)]['id'],'_fromMe':_0x57d8be[_0x4787c9(0x2d1)][_0x4787c9(0x2b5)],'_remoteJid':_0x57d8be[_0x4787c9(0x2d1)][_0x4787c9(0x6a8)]},_0x478ef1=(0x0,w[_0x4787c9(0x1d4)])(_0x57d8be[_0x4787c9(0x33a)]),_0x252ad6=(0x0,w['getContentType'])(_0x478ef1);_0x43aea4[_0x4787c9(0x5ed)][_0x4787c9(0x600)]=_0x3d5b23[_0x4787c9(0x1b0)][_0x4787c9(0x2c5)]();let {message_normalized:_0x55c4aa}=this[_0x4787c9(0x3a4)](_0x478ef1,_0x252ad6,null);_0x43aea4[_0x4787c9(0x5ed)][_0x4787c9(0x770)]=await _0x55c4aa;let _0x4fb16c={'messageId':_0x57d8be['key']['id']},_0x398da5=_0x43aea4[_0x4787c9(0x5ed)][_0x4787c9(0x34a)];Object[_0x4787c9(0x4f8)](_0x398da5,_0x243f26),_0x43aea4[_0x4787c9(0x5ed)][_0x4787c9(0x34a)]=_0x398da5,this[_0x4787c9(0x5e2)](_0x43aea4,_0x3d5b23,_0x4fb16c);}else{let _0x8e756a={'error':!0x0};this[_0x4787c9(0x5e2)](_0x43aea4,_0x3d5b23,_0x8e756a),this['logger'][_0x4787c9(0x723)](this[_0x4787c9(0x653)]+'\x20('+this[_0x4787c9(0x753)][_0x4787c9(0x6e4)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.');}}catch(_0x17b9c4){let _0x12b89e={'error':!0x0,'errorLog':_0x17b9c4['toString']()};this[_0x4787c9(0x5e2)](_0x43aea4,_0x3d5b23,_0x12b89e),this['logger'][_0x4787c9(0x723)](this[_0x4787c9(0x653)]+'\x20('+this['instance'][_0x4787c9(0x6e4)]+_0x4787c9(0x573)+(_0x17b9c4 instanceof Error?_0x17b9c4[_0x4787c9(0x33a)]:JSON['stringify'](_0x17b9c4,null,0x2)));}}[a0_0x37fa70(0x71e)](_0x375176,_0x4b6a22){const _0x38f836=a0_0x37fa70;for(let _0xc132e0 of _0x375176)_0xc132e0[_0x38f836(0x402)]&&(_0xc132e0[_0x38f836(0x402)]=this[_0x38f836(0x68a)](_0xc132e0[_0x38f836(0x402)],_0x4b6a22)),_0xc132e0['optionDescription']&&(_0xc132e0['optionDescription']=this[_0x38f836(0x68a)](_0xc132e0['optionDescription'],_0x4b6a22));}async['uazapiSendMenu'](_0x44936e,_0x59fe14){const _0x162255=a0_0x37fa70;let _0x15e614=_0x44936e[_0x162255(0x6a8)];_0x59fe14[_0x162255(0x6b3)]['remoteJid']&&_0x59fe14[_0x162255(0x6b3)]['remoteJid']['trim']()!==''&&(_0x15e614=_0x59fe14[_0x162255(0x6b3)][_0x162255(0x6a8)][_0x162255(0x6ba)]()),this[_0x162255(0x39e)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x162255(0x6a9));let _0x5a4910=_0x44936e[_0x162255(0x572)][_0x162255(0x1c2)](_0x1681a=>_0x1681a[_0x162255(0x1e5)]===_0x59fe14[_0x162255(0x1b0)])[_0x162255(0x31a)]((_0x1e6732,_0x44ad10)=>_0x1e6732[_0x162255(0x11e)]-_0x44ad10[_0x162255(0x11e)]);this[_0x162255(0x71e)](_0x5a4910,_0x44936e['chatLog'][_0x162255(0x34a)]);let _0xebddf4=_0x5a4910[_0x162255(0x3c4)](_0x4daf21=>_0x4daf21[_0x162255(0x402)]),_0x1e6925={'number':_0x15e614,'menuMessage':{'type':_0x59fe14['uazapi'][_0x162255(0x387)]||_0x162255(0x2d5),'text':_0x59fe14[_0x162255(0x6b3)][_0x162255(0x403)]||_0x59fe14[_0x162255(0x6b3)][_0x162255(0x410)],'footerText':_0x59fe14[_0x162255(0x6b3)][_0x162255(0x681)],'buttonText':_0x59fe14[_0x162255(0x6b3)][_0x162255(0x7bd)],'selectableCount':0x1,'choices':_0xebddf4},'options':{'delay':_0x59fe14[_0x162255(0x6b3)][_0x162255(0xb9)]}};try{let _0x5be939=await this[_0x162255(0x340)](_0x1e6925);if(_0x5be939){let _0x31456c={'_id':_0x5be939['key']['id'],'_fromMe':_0x5be939['key'][_0x162255(0x2b5)],'_remoteJid':_0x5be939[_0x162255(0x2d1)][_0x162255(0x6a8)]};_0x59fe14[_0x162255(0x6b3)][_0x162255(0x72b)]===!0x0&&(_0x44936e[_0x162255(0x4c1)]='waitingForReplyMenu',this[_0x162255(0x39e)][_0x162255(0x48f)](this[_0x162255(0x653)]+'\x20('+this[_0x162255(0x753)]['wuid']+_0x162255(0x27a)+_0x44936e['status'])),this[_0x162255(0x39e)][_0x162255(0x48f)](this['instanceName']+'\x20('+this[_0x162255(0x753)][_0x162255(0x6e4)]+'):\x20nextBlock.uazapi.name'+(_0x59fe14[_0x162255(0x6b3)]['name']||_0x59fe14[_0x162255(0x6b3)][_0x162255(0x403)])),_0x44936e[_0x162255(0x596)]=_0x5be939[_0x162255(0x2d1)]['id'],_0x44936e[_0x162255(0x35d)]=_0x59fe14['uazapi'][_0x162255(0x410)]||_0x59fe14[_0x162255(0x6b3)][_0x162255(0x403)],_0x44936e[_0x162255(0x564)]=_0x5a4910,_0x59fe14[_0x162255(0x6b3)][_0x162255(0x232)]&&(_0x44936e[_0x162255(0x29d)]=_0x59fe14[_0x162255(0x6b3)][_0x162255(0x232)]),this[_0x162255(0x39e)][_0x162255(0x48f)](this[_0x162255(0x653)]+'\x20('+this['instance'][_0x162255(0x6e4)]+_0x162255(0x23d)+_0x44936e[_0x162255(0x35d)]);let _0x40cb66=(0x0,w[_0x162255(0x1d4)])(_0x5be939['message']),_0x58d30f=(0x0,w[_0x162255(0x8c)])(_0x40cb66);_0x44936e[_0x162255(0x5ed)][_0x162255(0x600)]=_0x59fe14['_id'][_0x162255(0x2c5)]();let {message_normalized:_0x368dc2}=this['normalizeMessage'](_0x40cb66,_0x58d30f,null);_0x44936e[_0x162255(0x5ed)][_0x162255(0x770)]=await _0x368dc2;let _0xbb90d2={'messageId':_0x5be939['key']['id']},_0x21a385=_0x44936e[_0x162255(0x5ed)][_0x162255(0x34a)];Object[_0x162255(0x4f8)](_0x21a385,_0x31456c),_0x44936e['chatLog'][_0x162255(0x34a)]=_0x21a385,this['updateConversation'](_0x44936e,_0x59fe14,_0xbb90d2);}else{let _0x2876fb={'error':!0x0};this[_0x162255(0x5e2)](_0x44936e,_0x59fe14,_0x2876fb),this[_0x162255(0x39e)]['error'](this[_0x162255(0x653)]+'\x20('+this[_0x162255(0x753)][_0x162255(0x6e4)]+_0x162255(0x4a6));}}catch(_0x3ed80b){let _0x14bf31={'error':!0x0,'errorLog':_0x3ed80b instanceof Error?_0x3ed80b[_0x162255(0x33a)]:JSON[_0x162255(0x718)](_0x3ed80b,null,0x2)};this['updateConversation'](_0x44936e,_0x59fe14,_0x14bf31),this[_0x162255(0x39e)][_0x162255(0x723)](this[_0x162255(0x653)]+'\x20('+this[_0x162255(0x753)][_0x162255(0x6e4)]+_0x162255(0x7ac)+(_0x3ed80b instanceof Error?_0x3ed80b['message']:JSON['stringify'](_0x3ed80b,null,0x2)));}}async[a0_0x37fa70(0x243)](_0x268be1,_0x3fefef){const _0x3bac75=a0_0x37fa70;this[_0x3bac75(0x39e)][_0x3bac75(0x48f)](this[_0x3bac75(0x653)]+'\x20('+this[_0x3bac75(0x753)][_0x3bac75(0x6e4)]+'):\x20Deletando\x20mensagem');let _0x587e31=_0x268be1['chatLog'][_0x3bac75(0x784)][_0x3bac75(0x3b4)](_0x1d6758=>_0x1d6758[_0x3bac75(0x1e5)][_0x3bac75(0x2c5)]()===_0x3fefef[_0x3bac75(0x6b3)][_0x3bac75(0x1e5)][_0x3bac75(0x2c5)]()),_0x28fe49={'id':_0x587e31[_0x3bac75(0x700)],'remoteJid':_0x587e31['remoteJid'],'fromMe':_0x587e31[_0x3bac75(0x2b5)]};try{let _0x224875=await this[_0x3bac75(0x270)](_0x28fe49);if(_0x224875){let _0x12dc15=(0x0,w[_0x3bac75(0x1d4)])(_0x224875[_0x3bac75(0x33a)]),_0x5743e0=(0x0,w[_0x3bac75(0x8c)])(_0x12dc15);_0x268be1[_0x3bac75(0x5ed)][_0x3bac75(0x600)]=_0x3fefef[_0x3bac75(0x1b0)]['toString']();let {message_normalized:_0x2ace8a}=this[_0x3bac75(0x3a4)](_0x12dc15,_0x5743e0,null);_0x268be1[_0x3bac75(0x5ed)][_0x3bac75(0x770)]=await _0x2ace8a;let _0x488ff2={};this[_0x3bac75(0x5e2)](_0x268be1,_0x3fefef,_0x488ff2);}else{let _0x5ad241={'error':!0x0};this[_0x3bac75(0x5e2)](_0x268be1,_0x3fefef,_0x5ad241),this[_0x3bac75(0x39e)][_0x3bac75(0x723)](this['instanceName']+'\x20('+this[_0x3bac75(0x753)]['wuid']+_0x3bac75(0x39f));}}catch(_0x29a047){let _0x1a606a={'error':!0x0,'errorLog':_0x29a047 instanceof Error?_0x29a047[_0x3bac75(0x33a)]:JSON[_0x3bac75(0x718)](_0x29a047,null,0x2)};this[_0x3bac75(0x5e2)](_0x268be1,_0x3fefef,_0x1a606a),this[_0x3bac75(0x39e)][_0x3bac75(0x723)](this[_0x3bac75(0x653)]+'\x20('+this[_0x3bac75(0x753)][_0x3bac75(0x6e4)]+_0x3bac75(0x4dc)+(_0x29a047 instanceof Error?_0x29a047[_0x3bac75(0x33a)]:JSON[_0x3bac75(0x718)](_0x29a047,null,0x2)));}}async[a0_0x37fa70(0x72f)](_0x53fd81,_0x379f8a){const _0x97316c=a0_0x37fa70;if(_0x53fd81['name']||(_0x53fd81['name']=(0x0,Q['v4'])()),_0x379f8a!==Ti&&_0x53fd81?.[_0x97316c(0x316)])throw new m(_0x97316c(0xbd));if('_id'in _0x53fd81&&_0x97316c(0x5d3)in _0x53fd81)return this[_0x97316c(0x1c1)](_0x53fd81[_0x97316c(0x5d3)],_0x53fd81['_id']);this['logger'][_0x97316c(0x48f)](this['instanceName']+'\x20('+this[_0x97316c(0x753)]['wuid']+_0x97316c(0x361));let _0x39e185=this[_0x97316c(0x206)](_0x53fd81[_0x97316c(0x410)]),_0x539a26=new we[(_0x97316c(0x4ce))]['ObjectId'](),_0x199d76={'_id':_0x539a26,'default':!0x0,'title':'Início','x':0x0,'y':0x0},_0x3191eb={'_id':new we['Types']['ObjectId'](),'order':0x1,'groupId':_0x539a26[_0x97316c(0x2c5)](),'type':_0x97316c(0x6c4)},_0x4bd42d=this[_0x97316c(0x753)][_0x97316c(0x6e4)],_0x31fc2a={'_id':(0x0,Q['v4'])(),'owner':_0x4bd42d,'name':_0x39e185,'whoCanEdit':[_0x4bd42d],'whoCanUse':[_0x4bd42d],'groups':[_0x199d76],'blocks':[_0x3191eb],..._0x53fd81};try{let _0x257f6f=await this[_0x97316c(0x210)]['flow'][_0x97316c(0x184)](_0x31fc2a);return await this[_0x97316c(0x63e)](),_0x257f6f;}catch(_0x4cb147){let _0x4af969=_0x97316c(0x3a8),_0x43f6b7=_0x4cb147 instanceof Error?_0x4cb147[_0x97316c(0x33a)]:typeof _0x4cb147=='object'?JSON[_0x97316c(0x718)](_0x4cb147):_0x4cb147,_0xcd5670=_0x4af969+':\x20'+_0x43f6b7;throw this['logger'][_0x97316c(0x723)](this[_0x97316c(0x653)]+'\x20('+this[_0x97316c(0x753)][_0x97316c(0x6e4)]+_0x97316c(0x17d)+_0xcd5670),new m(_0xcd5670);}}async[a0_0x37fa70(0x1c1)](_0x3f3bd5,_0x29a71d){const _0x3261fb=a0_0x37fa70;try{this[_0x3261fb(0x39e)][_0x3261fb(0x48f)](this['instanceName']+'\x20('+this[_0x3261fb(0x753)][_0x3261fb(0x6e4)]+_0x3261fb(0x51b));let _0xaa6976=await this[_0x3261fb(0x210)][_0x3261fb(0x407)][_0x3261fb(0x1e2)]({'where':{'_id':_0x29a71d,'owner':_0x3f3bd5}});if(!_0xaa6976)throw new m(_0x3261fb(0x168));if(_0xaa6976['shareFlow']===!0x1&&!_0xaa6976['globalShow'])throw new m(_0x3261fb(0x3dc));let _0xf02211=new Set(_0xaa6976[_0x3261fb(0x758)]??[]);_0xf02211[_0x3261fb(0xf8)](this['instance'][_0x3261fb(0x6e4)]);let _0xaf0121=await this['repository']['flow'][_0x3261fb(0x130)](_0x29a71d,{..._0xaa6976,'whoCanUse':Array[_0x3261fb(0x27b)](_0xf02211)});return await this[_0x3261fb(0x63e)](),_0xaf0121;}catch(_0x422fcf){let _0x151480=_0x3261fb(0x5db),_0x5e0689=_0x422fcf instanceof Error?_0x422fcf[_0x3261fb(0x33a)]:typeof _0x422fcf==_0x3261fb(0x41e)?JSON[_0x3261fb(0x718)](_0x422fcf):_0x422fcf,_0x2eaf3f=_0x151480+':\x20'+_0x5e0689;throw this[_0x3261fb(0x39e)][_0x3261fb(0x723)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x3261fb(0x17d)+_0x2eaf3f),new m(_0x2eaf3f);}}[a0_0x37fa70(0x206)](_0x5dfd2c){const _0x4baaec=a0_0x37fa70;let _0x4d2340=_0x5dfd2c,_0x4cd883=0x1;for(;this[_0x4baaec(0x1db)]['flows'][_0x4baaec(0xa6)](_0x5a62d7=>_0x5a62d7['name']===_0x4d2340);)_0x4cd883++,_0x4d2340=_0x5dfd2c+'\x20('+_0x4cd883+')';return _0x4d2340;}async[a0_0x37fa70(0x6b2)](_0x1f0a48){const _0x1cf767=a0_0x37fa70;try{if(this[_0x1cf767(0x39e)]['verbose'](this['instanceName']+'\x20('+this[_0x1cf767(0x753)][_0x1cf767(0x6e4)]+'):\x20\x27Deletando\x20fluxo,\x20id:\x20'+_0x1f0a48[_0x1cf767(0x1b0)]+',\x20global:\x20'+_0x1f0a48['global']),!this[_0x1cf767(0x1db)][_0x1cf767(0x59c)]['find'](_0x14e3d1=>_0x14e3d1[_0x1cf767(0x1b0)]===_0x1f0a48[_0x1cf767(0x1b0)]))throw this[_0x1cf767(0x39e)]['verbose'](this[_0x1cf767(0x653)]+'\x20('+this[_0x1cf767(0x753)][_0x1cf767(0x6e4)]+_0x1cf767(0x619)+_0x1f0a48[_0x1cf767(0x1b0)]+_0x1cf767(0x19c)),new m(_0x1cf767(0x645));let _0x52f12b=await this[_0x1cf767(0x210)]['flow'][_0x1cf767(0x1e2)]({'where':{'_id':_0x1f0a48[_0x1cf767(0x1b0)]}});if(!_0x52f12b)throw new m(_0x1cf767(0x3fe));if(this[_0x1cf767(0x753)][_0x1cf767(0x6e4)]===_0x52f12b[_0x1cf767(0x5d3)]){this[_0x1cf767(0x39e)][_0x1cf767(0x48f)](this[_0x1cf767(0x653)]+'\x20('+this['instance']['wuid']+_0x1cf767(0x6ce)+_0x1f0a48['_id']+_0x1cf767(0x1a4));let _0x4baa0f=await this[_0x1cf767(0x210)][_0x1cf767(0x407)][_0x1cf767(0x730)]({'where':{'_id':_0x1f0a48[_0x1cf767(0x1b0)]}});return await this['synchronizeAndMapFlows'](),_0x4baa0f;}return this['logger'][_0x1cf767(0x48f)](this[_0x1cf767(0x653)]+'\x20('+this[_0x1cf767(0x753)][_0x1cf767(0x6e4)]+_0x1cf767(0x133)+this[_0x1cf767(0x753)][_0x1cf767(0x6e4)]+_0x1cf767(0x4f4)+_0x1f0a48[_0x1cf767(0x1b0)]+_0x1cf767(0x540)),_0x52f12b[_0x1cf767(0x758)]=(_0x52f12b['whoCanUse']??[])['filter'](_0x49782a=>_0x49782a!==this['instance']['wuid']),_0x52f12b[_0x1cf767(0x527)]=(_0x52f12b['whoCanEdit']??[])[_0x1cf767(0x1c2)](_0x2bf3fb=>_0x2bf3fb!==this['instance']['wuid']),_0x52f12b[_0x1cf767(0x527)][_0x1cf767(0x426)]===0x0&&_0x52f12b['whoCanUse'][_0x1cf767(0x426)]>0x0&&(_0x52f12b[_0x1cf767(0x527)][_0x1cf767(0x5ee)](_0x52f12b['whoCanUse'][0x0]),this[_0x1cf767(0x39e)]['verbose'](this[_0x1cf767(0x653)]+'\x20('+this['instance'][_0x1cf767(0x6e4)]+_0x1cf767(0x6d4)+_0x52f12b['whoCanUse'][0x0]+_0x1cf767(0x62f)+_0x1f0a48['_id']+_0x1cf767(0x540))),await this['repository'][_0x1cf767(0x407)][_0x1cf767(0x130)](_0x52f12b[_0x1cf767(0x1b0)],_0x52f12b),await this['synchronizeAndMapFlows'](),{'message':'Fluxo\x20\x27'+_0x1f0a48[_0x1cf767(0x410)]+_0x1cf767(0x187)};}catch(_0x59c1c3){return this[_0x1cf767(0x39e)][_0x1cf767(0x723)](this[_0x1cf767(0x653)]+'\x20('+this[_0x1cf767(0x753)][_0x1cf767(0x6e4)]+_0x1cf767(0x17c)+(_0x59c1c3 instanceof Error?_0x59c1c3[_0x1cf767(0x33a)]:JSON[_0x1cf767(0x718)](_0x59c1c3,null,0x2))),{'message':_0x1cf767(0x5d5)+(_0x59c1c3 instanceof Error?_0x59c1c3[_0x1cf767(0x33a)]:JSON[_0x1cf767(0x718)](_0x59c1c3,null,0x2))};}}async['getFlow'](_0x1b7149){const _0x544376=a0_0x37fa70;try{if(this[_0x544376(0x39e)][_0x544376(0x11b)](this[_0x544376(0x653)]+'\x20('+this[_0x544376(0x753)][_0x544376(0x6e4)]+'):\x20Buscando\x20flow,\x20id:\x20'+_0x1b7149),!this[_0x544376(0x1db)]&&(await this[_0x544376(0x2b1)](),!this['AutomateSystem']))return null;let _0x190056=await this[_0x544376(0x210)][_0x544376(0x407)]['findOne']({'where':{'_id':_0x1b7149}});if(!_0x190056)throw new m('Fluxo\x20id\x20\x27'+_0x1b7149+_0x544376(0x4bb));if(!(_0x190056[_0x544376(0x316)]||_0x190056['whoCanUse']?.[_0x544376(0x14a)](this['instance'][_0x544376(0x6e4)])))throw new m(_0x544376(0x649)+name+'\x27');_0x190056[_0x544376(0x316)]&&!_0x190056[_0x544376(0x758)]?.['includes'](this['instance'][_0x544376(0x6e4)])&&(_0x190056[_0x544376(0x758)]=[..._0x190056[_0x544376(0x758)]??[],this[_0x544376(0x753)][_0x544376(0x6e4)]],await this[_0x544376(0x210)]['flow'][_0x544376(0x130)](_0x190056[_0x544376(0x1b0)],_0x190056),this[_0x544376(0x63e)]());let _0x3fa816=this[_0x544376(0x1db)]?.['customFields'][_0x544376(0x3c4)](_0x5201f6=>_0x5201f6['name']),_0x2d8afd=[_0x544376(0x2c4),_0x544376(0x246),_0x544376(0x6a5),_0x544376(0x91),_0x544376(0x4c1),_0x544376(0x65a),'responsavelid',_0x544376(0x38c),_0x544376(0x7b2),_0x544376(0x228),_0x544376(0x2af)];_0x190056[_0x544376(0x6b8)]=_0x190056[_0x544376(0x6b8)][_0x544376(0x1c2)](_0x319158=>!(_0x319158[_0x544376(0xa8)]===_0x544376(0x500)||_0x319158[_0x544376(0x500)])),_0x2d8afd['forEach'](_0x29a29d=>{const _0x2fac45=_0x544376;_0x190056[_0x2fac45(0x6b8)][_0x2fac45(0x5ee)]({'folder':'leadInfo','name':_0x29a29d,'value':'','doc':'','leadInfo':!0x0});}),_0x3fa816[_0x544376(0x4b7)](_0x3a06fd=>{const _0x421d6b=_0x544376;let _0x2356f6=_0x190056[_0x421d6b(0x6b8)][_0x421d6b(0x708)](_0x1d7d37=>_0x1d7d37[_0x421d6b(0x410)]===_0x3a06fd);_0x2356f6===-0x1?_0x190056[_0x421d6b(0x6b8)]['push']({'folder':_0x421d6b(0x500),'name':_0x3a06fd,'value':'','doc':'','leadInfo':!0x0}):(_0x190056[_0x421d6b(0x6b8)][_0x2356f6][_0x421d6b(0xa8)]='leadInfo',_0x190056['variables'][_0x2356f6][_0x421d6b(0x500)]=!0x0);}),_0x190056['blocks']&&_0x190056[_0x544376(0x19a)]['length']>0x0&&_0x190056[_0x544376(0x19a)][_0x544376(0x4b7)](_0x548fa8=>{const _0x35c574=_0x544376;_0x548fa8[_0x35c574(0x3c6)]&&_0x548fa8[_0x35c574(0x463)]&&_0x548fa8[_0x35c574(0x3c6)]===_0x548fa8[_0x35c574(0x463)]&&(_0x548fa8[_0x35c574(0x463)]=null);});let _0x3db11c=await this[_0x544376(0x210)]['flow'][_0x544376(0x130)](_0x190056[_0x544376(0x1b0)],_0x190056);if(!_0x3db11c)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x3db11c;}catch(_0x3312a6){let _0x1b3197=_0x544376(0x541),_0x2ca667=_0x3312a6 instanceof Error?_0x3312a6[_0x544376(0x33a)]:typeof _0x3312a6==_0x544376(0x41e)?JSON[_0x544376(0x718)](_0x3312a6):_0x3312a6,_0x5eb429=_0x1b3197+':\x20'+_0x2ca667;throw this[_0x544376(0x39e)][_0x544376(0x723)](this[_0x544376(0x653)]+'\x20('+this[_0x544376(0x753)]['wuid']+_0x544376(0x17d)+_0x5eb429),new m(_0x5eb429);}}async[a0_0x37fa70(0x2b7)](){const _0x4415c3=a0_0x37fa70;try{this[_0x4415c3(0x39e)][_0x4415c3(0x48f)](this[_0x4415c3(0x653)]+'\x20('+this[_0x4415c3(0x753)]['wuid']+_0x4415c3(0x5a5)),await this['synchronizeAndMapFlows']();let _0x956c42=await this[_0x4415c3(0x210)]['flow']['findAll']({'where':{'globalShow':!0x0}});return[...this[_0x4415c3(0x1db)][_0x4415c3(0x59c)],..._0x956c42];}catch(_0x544a87){return this[_0x4415c3(0x39e)][_0x4415c3(0x723)](this[_0x4415c3(0x653)]+'\x20('+this[_0x4415c3(0x753)][_0x4415c3(0x6e4)]+_0x4415c3(0x73e)+(_0x544a87 instanceof Error?_0x544a87[_0x4415c3(0x33a)]:JSON[_0x4415c3(0x718)](_0x544a87,null,0x2))),{'message':_0x4415c3(0x280)+(_0x544a87 instanceof Error?_0x544a87[_0x4415c3(0x33a)]:String(_0x544a87))};}}async[a0_0x37fa70(0x776)](_0x4f1e72,_0x4ec06e){const _0x46cdf6=a0_0x37fa70;try{this[_0x46cdf6(0x39e)][_0x46cdf6(0x48f)](this[_0x46cdf6(0x653)]+'\x20('+this[_0x46cdf6(0x753)][_0x46cdf6(0x6e4)]+_0x46cdf6(0x63b));let _0x55e45c=this[_0x46cdf6(0x1db)][_0x46cdf6(0x59c)][_0x46cdf6(0x3b4)](_0x3083b2=>_0x3083b2[_0x46cdf6(0x1b0)]===_0x4f1e72[_0x46cdf6(0x1b0)]);if(!_0x55e45c)throw this[_0x46cdf6(0x39e)][_0x46cdf6(0x48f)](this[_0x46cdf6(0x653)]+'\x20('+this[_0x46cdf6(0x753)][_0x46cdf6(0x6e4)]+_0x46cdf6(0x619)+_0x4f1e72[_0x46cdf6(0x1b0)]+'\x27\x20não\x20encontrado'),new m(_0x46cdf6(0x645));let _0x370f53=await this[_0x46cdf6(0x210)][_0x46cdf6(0x407)][_0x46cdf6(0x1e2)]({'where':{'_id':_0x4f1e72[_0x46cdf6(0x1b0)]}});if(!_0x370f53||!_0x370f53[_0x46cdf6(0x758)]?.['includes'](this['instance']['wuid']))throw this['logger'][_0x46cdf6(0x723)](this[_0x46cdf6(0x653)]+'\x20('+this['instance'][_0x46cdf6(0x6e4)]+_0x46cdf6(0x21b)+_0x4f1e72['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x46cdf6(0x2e6)+_0x4f1e72[_0x46cdf6(0x1b0)]+_0x46cdf6(0x482));let _0x55081d=this[_0x46cdf6(0x1db)][_0x46cdf6(0x59c)][_0x46cdf6(0x708)](_0x3db162=>_0x3db162[_0x46cdf6(0x1b0)]===_0x55e45c['_id']);if(_0x55081d!==-0x1){let _0x11e259=this['AutomateSystem'][_0x46cdf6(0x59c)][_0x55081d];if(_0x11e259[_0x46cdf6(0x410)]=_0x4f1e72[_0x46cdf6(0x410)]??_0x11e259[_0x46cdf6(0x410)],_0x11e259['default']=_0x4f1e72[_0x46cdf6(0x259)]??_0x11e259[_0x46cdf6(0x259)],_0x11e259[_0x46cdf6(0x1cc)]=_0x4f1e72[_0x46cdf6(0x1cc)]??_0x11e259[_0x46cdf6(0x1cc)],_0x11e259[_0x46cdf6(0x200)]=_0x4f1e72['startCommandWord']??_0x11e259[_0x46cdf6(0x200)],_0x11e259[_0x46cdf6(0x6cf)]=_0x4f1e72[_0x46cdf6(0x6cf)]??_0x11e259[_0x46cdf6(0x6cf)],_0x11e259[_0x46cdf6(0x3eb)]=_0x4f1e72['readMessages']??_0x11e259[_0x46cdf6(0x3eb)],_0x4f1e72[_0x46cdf6(0x259)]&&this['AutomateSystem']['flows'][_0x46cdf6(0x4b7)]((_0x3072c4,_0x8d3577)=>{_0x8d3577!==_0x55081d&&(_0x3072c4['default']=!0x1);}),this[_0x46cdf6(0x1db)][_0x46cdf6(0x59c)][_0x55081d]=_0x11e259,!await this[_0x46cdf6(0x210)][_0x46cdf6(0x2f8)][_0x46cdf6(0x6c8)]({'flows':this[_0x46cdf6(0x1db)][_0x46cdf6(0x59c)]},this[_0x46cdf6(0x753)][_0x46cdf6(0x6e4)]))throw new m(_0x46cdf6(0x471));}let _0x15518a=[_0x46cdf6(0x6d),'startID',_0x46cdf6(0x2b3),_0x46cdf6(0x77)];for(let _0x28b348 of _0x15518a)delete _0x4f1e72[_0x28b348];if(_0x370f53[_0x46cdf6(0x527)]?.[_0x46cdf6(0x14a)](this[_0x46cdf6(0x753)]['wuid'])||(_0x4f1e72={'_id':_0x4f1e72['_id']}),_0x4ec06e!==Ti&&_0x4f1e72?.[_0x46cdf6(0x316)]&&!_0x370f53?.[_0x46cdf6(0x316)])throw new m(_0x46cdf6(0x69b));let _0x15c44c=new Set(_0x4f1e72[_0x46cdf6(0x527)]??_0x370f53[_0x46cdf6(0x527)]);_0x15c44c[_0x46cdf6(0xf8)](_0x370f53['owner']);let _0xf09dac=new Set(_0x4f1e72[_0x46cdf6(0x758)]??_0x370f53['whoCanUse']??[]);_0x15c44c['forEach'](_0x2e31a3=>_0xf09dac[_0x46cdf6(0xf8)](_0x2e31a3)),_0xf09dac['add'](_0x370f53['owner']),this[_0x46cdf6(0x39e)]['verbose'](this[_0x46cdf6(0x653)]+'\x20('+this['instance']['wuid']+_0x46cdf6(0x265)+Array['from'](_0x15c44c)),this[_0x46cdf6(0x39e)][_0x46cdf6(0x48f)](this[_0x46cdf6(0x653)]+'\x20('+this['instance'][_0x46cdf6(0x6e4)]+_0x46cdf6(0x3e8)+Array[_0x46cdf6(0x27b)](_0xf09dac));let _0x5c4bfe=await this[_0x46cdf6(0x77c)](Array[_0x46cdf6(0x27b)](_0xf09dac)),_0x2f05c3=Array['from'](_0x15c44c)[_0x46cdf6(0x1c2)](_0x8b0868=>_0x5c4bfe[_0x46cdf6(0x14a)](_0x8b0868)),_0x5f2b4f=Array[_0x46cdf6(0x27b)](_0xf09dac)[_0x46cdf6(0x1c2)](_0x157b73=>_0x5c4bfe['includes'](_0x157b73));this[_0x46cdf6(0x39e)][_0x46cdf6(0x48f)](this[_0x46cdf6(0x653)]+'\x20('+this['instance'][_0x46cdf6(0x6e4)]+'):\x20whoCanEdit\x20after\x20validation:\x20'+_0x2f05c3),this[_0x46cdf6(0x39e)][_0x46cdf6(0x48f)](this[_0x46cdf6(0x653)]+'\x20('+this['instance'][_0x46cdf6(0x6e4)]+_0x46cdf6(0x1b8)+_0x5f2b4f);let _0x22f999={..._0x370f53,..._0x4f1e72,'whoCanEdit':_0x2f05c3,'whoCanUse':_0x5f2b4f},_0x1e89fe=await this[_0x46cdf6(0x210)]['flow']['updateOne'](_0x370f53[_0x46cdf6(0x1b0)],_0x22f999);return await this[_0x46cdf6(0x63e)](),_0x1e89fe;}catch(_0xec47d3){let _0x441169=_0x46cdf6(0x442),_0x569e4c=_0xec47d3 instanceof Error?_0xec47d3[_0x46cdf6(0x33a)]:typeof _0xec47d3==_0x46cdf6(0x41e)?JSON[_0x46cdf6(0x718)](_0xec47d3):_0xec47d3,_0x4e66f6=_0x441169+':\x20'+_0x569e4c;throw this[_0x46cdf6(0x39e)][_0x46cdf6(0x723)](this['instanceName']+'\x20('+this['instance'][_0x46cdf6(0x6e4)]+'):\x20'+_0x4e66f6),new m(_0x4e66f6);}}async[a0_0x37fa70(0x77c)](_0x9f9c1b){const _0x48af47=a0_0x37fa70;let _0x2f7257={'numbers':_0x9f9c1b};return(await this['whatsappNumber'](_0x2f7257))['filter'](_0x2a3185=>_0x2a3185['exists'])['map'](_0x4f21d5=>_0x4f21d5['jid'])[_0x48af47(0x3c4)](_0x27ba29=>this[_0x48af47(0x5c0)](_0x27ba29));}[a0_0x37fa70(0x5c0)](_0x4c7538){let _0xc0f142=_0x4c7538['match'](/\d+/);return _0xc0f142?_0xc0f142[0x0]:'';}async[a0_0x37fa70(0x1b7)](_0xe33c58){const _0x53d71a=a0_0x37fa70;try{if(this[_0x53d71a(0x39e)][_0x53d71a(0x48f)](this['instanceName']+'\x20('+this[_0x53d71a(0x753)]['wuid']+_0x53d71a(0x7b8)),!this[_0x53d71a(0x1db)]['flows'][_0x53d71a(0x3b4)](_0x5a2928=>_0x5a2928[_0x53d71a(0x1b0)]===_0xe33c58[_0x53d71a(0x1b0)]))throw this['logger'][_0x53d71a(0x48f)](this[_0x53d71a(0x653)]+'\x20('+this['instance'][_0x53d71a(0x6e4)]+_0x53d71a(0x619)+_0xe33c58[_0x53d71a(0x1b0)]+_0x53d71a(0x19c)),new m(_0x53d71a(0x645));let _0x18c539=await this[_0x53d71a(0x210)][_0x53d71a(0x407)]['findOne']({'where':{'_id':_0xe33c58[_0x53d71a(0x1b0)]}});if(!_0x18c539||!_0x18c539[_0x53d71a(0x758)]?.['includes'](this[_0x53d71a(0x753)][_0x53d71a(0x6e4)]))throw this[_0x53d71a(0x39e)]['error'](this['instanceName']+'\x20('+this[_0x53d71a(0x753)][_0x53d71a(0x6e4)]+'):\x20Flow\x20\x27'+_0xe33c58[_0x53d71a(0x1b0)]+_0x53d71a(0x482)),new m(_0x53d71a(0x2e6)+_0xe33c58['_id']+_0x53d71a(0x482));if(!_0x18c539['whoCanEdit']?.[_0x53d71a(0x14a)](this['instance'][_0x53d71a(0x6e4)]))throw new m(_0x53d71a(0x20e));let {block:_0x4da711}=_0xe33c58;_0x4da711?.[_0x53d71a(0x2db)]?this[_0x53d71a(0x3d3)](_0x18c539,_0xe33c58):_0x4da711?.[_0x53d71a(0x6ad)]?this['deleteBlock'](_0x18c539,_0xe33c58):_0x4da711['_id']?await this[_0x53d71a(0x15a)](_0x18c539,_0xe33c58):this['addBlock'](_0x18c539,_0xe33c58);let _0x28bec8=await this[_0x53d71a(0x210)][_0x53d71a(0x407)][_0x53d71a(0x130)](_0x18c539[_0x53d71a(0x1b0)],_0x18c539);if(!_0x28bec8)throw new Error(_0x53d71a(0x292));return _0x28bec8;}catch(_0x4ab8be){this['throwAndLogError']('Erro\x20ao\x20editar\x20o\x20bloco:\x20'+_0x4ab8be[_0x53d71a(0x33a)]);}}async[a0_0x37fa70(0x3d3)](_0x425eb5,_0xd8de6a){const _0x17c4c9=a0_0x37fa70;let _0x144495=_0xd8de6a[_0x17c4c9(0x461)][_0x17c4c9(0x1b0)],_0x390c6b=_0x425eb5['blocks'][_0x17c4c9(0x3b4)](_0x4348c9=>_0x4348c9[_0x17c4c9(0x1b0)][_0x17c4c9(0x2c5)]()===_0x144495);if(!_0x390c6b){this[_0x17c4c9(0x39e)]['error'](this[_0x17c4c9(0x653)]+'\x20('+this[_0x17c4c9(0x753)][_0x17c4c9(0x6e4)]+_0x17c4c9(0xae)+_0x144495+_0x17c4c9(0x24a));return;}this[_0x17c4c9(0x39e)][_0x17c4c9(0x48f)](this[_0x17c4c9(0x653)]+'\x20('+this['instance'][_0x17c4c9(0x6e4)]+_0x17c4c9(0x603)+JSON['stringify'](_0x390c6b));let _0x3b44d8=JSON['parse'](JSON[_0x17c4c9(0x718)](_0x390c6b));_0x3b44d8['_id']=new we[(_0x17c4c9(0x259))][(_0x17c4c9(0x4ce))][(_0x17c4c9(0x721))](),this[_0x17c4c9(0x39e)][_0x17c4c9(0x48f)](this[_0x17c4c9(0x653)]+'\x20('+this['instance'][_0x17c4c9(0x6e4)]+_0x17c4c9(0x691)+JSON['stringify'](_0x3b44d8)),_0x425eb5[_0x17c4c9(0x19a)]['push'](_0x3b44d8),this[_0x17c4c9(0x1e0)](_0x425eb5['blocks'],_0x3b44d8[_0x17c4c9(0x3c6)]);}['throwAndLogError'](_0x2d8467){const _0x346bba=a0_0x37fa70;throw this[_0x346bba(0x39e)][_0x346bba(0x723)](this[_0x346bba(0x653)]+'\x20('+this[_0x346bba(0x753)]['wuid']+'):\x20'+_0x2d8467),new m(_0x2d8467);}[a0_0x37fa70(0x642)](_0xdb90f0,_0x5d2333){const _0x2caa90=a0_0x37fa70;let {block:_0xc65e1f}=_0x5d2333;if(_0xc65e1f[_0x2caa90(0x519)]===_0x2caa90(0x6c4)){this[_0x2caa90(0x38a)](_0x2caa90(0x5b7));return;}if(!_0xc65e1f[_0x2caa90(0x1b0)]){this[_0x2caa90(0x38a)](_0x2caa90(0x70a));return;}let _0x312020=_0xdb90f0[_0x2caa90(0x19a)][_0x2caa90(0x3b4)](_0x1a9c71=>_0x1a9c71[_0x2caa90(0x1b0)][_0x2caa90(0x2c5)]()===_0x5d2333['block']['_id'][_0x2caa90(0x2c5)]());if(!_0x312020){this[_0x2caa90(0x38a)](_0x2caa90(0x18e)+_0xc65e1f[_0x2caa90(0x1b0)]+_0x2caa90(0x7b));return;}_0xdb90f0[_0x2caa90(0x19a)]=_0xdb90f0[_0x2caa90(0x19a)]['filter'](_0x56ce33=>_0x56ce33['_id'][_0x2caa90(0x2c5)]()!==_0x5d2333[_0x2caa90(0x461)][_0x2caa90(0x1b0)]['toString']()),_0xdb90f0[_0x2caa90(0x3ea)]=_0xdb90f0[_0x2caa90(0x3ea)][_0x2caa90(0x1c2)](_0x3d52ec=>_0x3d52ec['blockId']!==_0xc65e1f[_0x2caa90(0x1b0)]['toString']()),_0xdb90f0['varedits']=_0xdb90f0['varedits']['filter'](_0x55d9e2=>_0x55d9e2[_0x2caa90(0x1e5)]!==_0xc65e1f[_0x2caa90(0x1b0)][_0x2caa90(0x2c5)]()),_0xdb90f0[_0x2caa90(0x572)]=_0xdb90f0[_0x2caa90(0x572)][_0x2caa90(0x1c2)](_0x3803b8=>_0x3803b8[_0x2caa90(0x1e5)]!==_0xc65e1f[_0x2caa90(0x1b0)][_0x2caa90(0x2c5)]()),this[_0x2caa90(0x1e0)](_0xdb90f0['blocks'],_0x312020[_0x2caa90(0x3c6)]);}async[a0_0x37fa70(0x15a)](_0x3715c4,_0x203ce2){const _0x3763f6=a0_0x37fa70;let _0x9fa792=_0x3715c4[_0x3763f6(0x19a)]['findIndex'](_0x119b13=>_0x119b13[_0x3763f6(0x1b0)][_0x3763f6(0x2c5)]()===_0x203ce2[_0x3763f6(0x461)][_0x3763f6(0x1b0)]['toString']());if(this[_0x3763f6(0x39e)][_0x3763f6(0x48f)](this[_0x3763f6(0x653)]+'\x20('+this[_0x3763f6(0x753)][_0x3763f6(0x6e4)]+_0x3763f6(0x64c)+_0x9fa792),_0x9fa792===-0x1){this[_0x3763f6(0x39e)][_0x3763f6(0x48f)](_0x3763f6(0x18e)+_0x203ce2[_0x3763f6(0x461)][_0x3763f6(0x1b0)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}if(_0x3715c4['blocks'][_0x9fa792][_0x3763f6(0x519)]==='start'){let _0x4666c1=Object[_0x3763f6(0x674)](_0x203ce2[_0x3763f6(0x461)]);if(_0x4666c1['length']>0x2||_0x4666c1[_0x3763f6(0x426)]===0x2&&!_0x4666c1['includes']('next_groupId')){this[_0x3763f6(0x38a)](_0x3763f6(0x7a9));return;}}let _0x5062ed=_0x3715c4[_0x3763f6(0x19a)][_0x9fa792][_0x3763f6(0x3c6)];for(let _0x6c60f3 in _0x203ce2[_0x3763f6(0x461)])_0x203ce2[_0x3763f6(0x461)][_0x3763f6(0x4ee)](_0x6c60f3)&&(_0x3715c4[_0x3763f6(0x19a)][_0x9fa792][_0x6c60f3]=_0x203ce2[_0x3763f6(0x461)][_0x6c60f3]);if(this[_0x3763f6(0x39e)][_0x3763f6(0x48f)](this[_0x3763f6(0x653)]+'\x20('+this['instance'][_0x3763f6(0x6e4)]+_0x3763f6(0x87)+JSON[_0x3763f6(0x718)](_0x3715c4[_0x3763f6(0x19a)][_0x9fa792])),_0x3715c4[_0x3763f6(0x19a)][_0x9fa792][_0x3763f6(0xbc)]&&_0x3763f6(0x1f2)in _0x3715c4['blocks'][_0x9fa792][_0x3763f6(0xbc)]){this[_0x3763f6(0x39e)][_0x3763f6(0x48f)](this['instanceName']+'\x20('+this[_0x3763f6(0x753)][_0x3763f6(0x6e4)]+_0x3763f6(0x24c));let _0x4bcaaf=JSON[_0x3763f6(0x718)](_0x3715c4[_0x3763f6(0x19a)][_0x9fa792]['apirequest'][_0x3763f6(0x1f2)],null,0x1);_0x4bcaaf[_0x3763f6(0x426)]>0x2&&(_0x4bcaaf=_0x4bcaaf[_0x3763f6(0xca)](0x1,_0x4bcaaf[_0x3763f6(0x426)]-0x1)['trim']()),_0x3715c4[_0x3763f6(0x19a)][_0x9fa792]['apirequest'][_0x3763f6(0x7ce)]=_0x4bcaaf;}if(_0x3715c4[_0x3763f6(0x19a)][_0x9fa792][_0x3763f6(0xbc)]&&_0x3763f6(0x22a)in _0x3715c4['blocks'][_0x9fa792]['apirequest']&&!(_0x3763f6(0x63c)in _0x3715c4['blocks'][_0x9fa792][_0x3763f6(0xbc)])){this[_0x3763f6(0x39e)][_0x3763f6(0x48f)](this[_0x3763f6(0x653)]+'\x20('+this[_0x3763f6(0x753)][_0x3763f6(0x6e4)]+_0x3763f6(0x44a)),_0x3715c4['blocks'][_0x9fa792][_0x3763f6(0xbc)][_0x3763f6(0x50b)]=!0x1;let _0x2c80e5=JSON[_0x3763f6(0x718)](_0x3715c4[_0x3763f6(0x19a)][_0x9fa792][_0x3763f6(0xbc)][_0x3763f6(0x22a)],null,0x2);_0x3715c4['blocks'][_0x9fa792][_0x3763f6(0xbc)]['bodyString']=_0x2c80e5;}if(_0x3715c4[_0x3763f6(0x19a)][_0x9fa792][_0x3763f6(0xbc)]&&_0x3763f6(0x63c)in _0x3715c4[_0x3763f6(0x19a)][_0x9fa792][_0x3763f6(0xbc)]){_0x3715c4['blocks'][_0x9fa792][_0x3763f6(0xbc)][_0x3763f6(0x50b)]=!0x1;let _0x53af0c=_0x3715c4['blocks'][_0x9fa792][_0x3763f6(0xbc)]['bodyString'],_0xa99cdc=this[_0x3763f6(0x4c8)](_0x53af0c);_0x3715c4[_0x3763f6(0x19a)][_0x9fa792]['apirequest']['bodyString']=_0xa99cdc['result'],_0x3715c4[_0x3763f6(0x19a)][_0x9fa792][_0x3763f6(0xbc)][_0x3763f6(0x50b)]=_0xa99cdc[_0x3763f6(0x723)];}let _0x2f908c=_0x3715c4[_0x3763f6(0x19a)][_0x9fa792]['groupId'];_0x5062ed!==_0x2f908c?(this[_0x3763f6(0x1e0)](_0x3715c4[_0x3763f6(0x19a)],_0x5062ed),this[_0x3763f6(0x1e0)](_0x3715c4[_0x3763f6(0x19a)],_0x2f908c)):this[_0x3763f6(0x1e0)](_0x3715c4[_0x3763f6(0x19a)],_0x5062ed);}[a0_0x37fa70(0x4c8)](_0x3d06b7){const _0x530a2a=a0_0x37fa70;let _0x4fea93='\u205f',_0x1286b7=!0x1,_0x3af18a='';for(let _0x4c65f7=0x0;_0x4c65f7<_0x3d06b7['length'];_0x4c65f7++){let _0x104b1e=_0x3d06b7[_0x4c65f7];_0x104b1e==='\x22'&&(_0x4c65f7===0x0||_0x3d06b7[_0x4c65f7-0x1]!=='\x5c')&&(_0x1286b7=!_0x1286b7),!(!_0x1286b7&&(_0x104b1e==='\x0a'||_0x104b1e==='\x20'||_0x104b1e===_0x4fea93))&&(_0x3af18a+=_0x104b1e);}let _0x48ef85={},_0x159db1=9876543210.1234,_0x4f2c97=_0x3af18a[_0x530a2a(0x2e9)](/\{\{([^}]+)\}\}/g,_0x1675e4=>{let _0x3c41cb=_0x1675e4,_0x1d9d53=''+_0x159db1;return _0x48ef85[_0x1d9d53]=_0x3c41cb,_0x159db1+=0.0001,_0x1d9d53;}),_0xb09aca='',_0xa9c703=!0x1;try{let _0x1a09eb=JSON[_0x530a2a(0x3f5)](_0x4f2c97);_0xb09aca=JSON[_0x530a2a(0x718)](_0x1a09eb,null,0x2),_0xb09aca=_0xb09aca['replace'](/\n( +)/g,(_0x8a4788,_0x4e4b96)=>{const _0x25ec00=_0x530a2a;let _0x572bf5=_0x4e4b96['length'];return'\x0a'+_0x4fea93[_0x25ec00(0x798)](_0x572bf5*0x2);}),_0xb09aca=_0xb09aca[_0x530a2a(0x2e9)](/(\d{10,}\.\d+)/g,_0x56311d=>_0x48ef85[_0x56311d]||_0x56311d);}catch(_0x306cfb){this['logger'][_0x530a2a(0x723)](_0x530a2a(0x19f)+_0x306cfb),_0xb09aca=_0x3d06b7,_0xa9c703=!0x0;}return{'result':_0xb09aca,'error':_0xa9c703};}[a0_0x37fa70(0xc1)](_0x33a4e3,_0x18fdaa){const _0x552f1b=a0_0x37fa70;if(_0x18fdaa[_0x552f1b(0x461)][_0x552f1b(0x519)]===_0x552f1b(0x6c4)){this['throwAndLogError'](_0x552f1b(0x652));return;}if(_0x18fdaa[_0x552f1b(0x461)][_0x552f1b(0xbc)]&&_0x552f1b(0x1f2)in _0x18fdaa[_0x552f1b(0x461)][_0x552f1b(0xbc)]){this[_0x552f1b(0x39e)][_0x552f1b(0x48f)](this[_0x552f1b(0x653)]+'\x20('+this[_0x552f1b(0x753)][_0x552f1b(0x6e4)]+_0x552f1b(0x24c));let _0x1aaed2=JSON[_0x552f1b(0x718)](_0x18fdaa[_0x552f1b(0x461)][_0x552f1b(0xbc)][_0x552f1b(0x1f2)],null,0x1);_0x1aaed2[_0x552f1b(0x426)]>0x2&&(_0x1aaed2=_0x1aaed2['substring'](0x1,_0x1aaed2[_0x552f1b(0x426)]-0x1)[_0x552f1b(0x6ba)]()),_0x18fdaa['block'][_0x552f1b(0xbc)][_0x552f1b(0x7ce)]=_0x1aaed2;}_0x18fdaa['block'][_0x552f1b(0xbc)]&&'body'in _0x18fdaa['block'][_0x552f1b(0xbc)]&&(this['logger']['verbose'](this[_0x552f1b(0x653)]+'\x20('+this[_0x552f1b(0x753)][_0x552f1b(0x6e4)]+_0x552f1b(0x44a)),_0x18fdaa['block'][_0x552f1b(0xbc)][_0x552f1b(0x63c)]=JSON[_0x552f1b(0x718)](_0x18fdaa['block'][_0x552f1b(0xbc)][_0x552f1b(0x22a)],null,0x1)[_0x552f1b(0x6ba)]()),_0x33a4e3[_0x552f1b(0x19a)][_0x552f1b(0x5ee)](_0x18fdaa[_0x552f1b(0x461)]),this[_0x552f1b(0x1e0)](_0x33a4e3['blocks'],_0x18fdaa[_0x552f1b(0x461)]['groupId']);}[a0_0x37fa70(0x1e0)](_0x5c5eb9,_0x10ccf2){const _0x27d912=a0_0x37fa70;let _0x466563=_0x5c5eb9[_0x27d912(0x1c2)](_0x38f748=>_0x38f748[_0x27d912(0x3c6)]===_0x10ccf2);_0x466563[_0x27d912(0x31a)]((_0x576fec,_0xdacb51)=>_0x576fec[_0x27d912(0x11e)]-_0xdacb51[_0x27d912(0x11e)]),_0x466563[_0x27d912(0x4b7)]((_0x2449bf,_0x292ed6)=>_0x2449bf[_0x27d912(0x11e)]=_0x292ed6+0x1);}async[a0_0x37fa70(0x59a)](_0x1fb33c){const _0x523ecb=a0_0x37fa70;try{if(this[_0x523ecb(0x39e)][_0x523ecb(0x48f)](this[_0x523ecb(0x653)]+'\x20('+this[_0x523ecb(0x753)]['wuid']+_0x523ecb(0x5bd)),!_0x1fb33c||!_0x1fb33c[_0x523ecb(0x711)]){this[_0x523ecb(0x38a)](_0x523ecb(0x11f));return;}if(!this[_0x523ecb(0x1db)]['flows'][_0x523ecb(0x3b4)](_0x253336=>_0x253336[_0x523ecb(0x1b0)]===_0x1fb33c[_0x523ecb(0x1b0)]))throw this[_0x523ecb(0x39e)]['verbose'](this['instanceName']+'\x20('+this[_0x523ecb(0x753)][_0x523ecb(0x6e4)]+_0x523ecb(0x619)+_0x1fb33c[_0x523ecb(0x1b0)]+'\x27\x20não\x20encontrado'),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x1d50ef=await this[_0x523ecb(0x210)]['flow'][_0x523ecb(0x1e2)]({'where':{'_id':_0x1fb33c['_id']}});if(!_0x1d50ef||!_0x1d50ef['whoCanUse']?.[_0x523ecb(0x14a)](this[_0x523ecb(0x753)]['wuid']))throw this['logger'][_0x523ecb(0x723)](this[_0x523ecb(0x653)]+'\x20('+this['instance'][_0x523ecb(0x6e4)]+'):\x20Flow\x20\x27'+_0x1fb33c[_0x523ecb(0x1b0)]+_0x523ecb(0x482)),new m(_0x523ecb(0x2e6)+_0x1fb33c[_0x523ecb(0x1b0)]+_0x523ecb(0x482));if(!_0x1d50ef[_0x523ecb(0x527)]?.[_0x523ecb(0x14a)](this[_0x523ecb(0x753)][_0x523ecb(0x6e4)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let {replyOption:_0x288d36}=_0x1fb33c;_0x288d36?.['delete']?(this[_0x523ecb(0x72c)](_0x1d50ef,_0x1fb33c),this['reorderReplyOptions'](_0x1d50ef['replyOptions'],_0x1fb33c[_0x523ecb(0x711)][_0x523ecb(0x1e5)])):_0x288d36['_id']?(await this[_0x523ecb(0x237)](_0x1d50ef,_0x1fb33c),this[_0x523ecb(0x5fd)](_0x1d50ef[_0x523ecb(0x572)],_0x1fb33c['replyOption']['blockId'])):(this[_0x523ecb(0x786)](_0x1d50ef,_0x1fb33c),this[_0x523ecb(0x5fd)](_0x1d50ef[_0x523ecb(0x572)],_0x1fb33c['replyOption']['blockId']));let _0x5d25e3=await this['repository']['flow'][_0x523ecb(0x130)](_0x1d50ef[_0x523ecb(0x1b0)],_0x1d50ef);if(!_0x5d25e3)throw new Error(_0x523ecb(0x292));return _0x5d25e3;}catch(_0x5c6d80){this[_0x523ecb(0x38a)](_0x523ecb(0x217)+_0x5c6d80);}}[a0_0x37fa70(0x5fd)](_0xa2d449,_0x5f1e16){const _0x7770fb=a0_0x37fa70;_0xa2d449['forEach'](_0x36c0f1=>{const _0x647a8e=a0_0x58ef;_0x36c0f1[_0x647a8e(0x1e5)]===_0x5f1e16&&_0x36c0f1[_0x647a8e(0x11e)]===void 0x0&&(_0x36c0f1[_0x647a8e(0x11e)]=0x270f);});let _0x91cd53=_0xa2d449[_0x7770fb(0x1c2)](_0x260cef=>_0x260cef[_0x7770fb(0x1e5)]===_0x5f1e16);_0x91cd53[_0x7770fb(0x31a)]((_0x581025,_0x327f7f)=>_0x581025[_0x7770fb(0x11e)]-_0x327f7f[_0x7770fb(0x11e)]),_0x91cd53[_0x7770fb(0x4b7)]((_0xffe7eb,_0x556271)=>{_0xffe7eb['order']=_0x556271+0x1;}),_0xa2d449[_0x7770fb(0x4b7)](_0x4b1dde=>{const _0x5f3adf=_0x7770fb;if(_0x4b1dde[_0x5f3adf(0x1e5)]===_0x5f1e16){let _0x19ee60=_0x91cd53[_0x5f3adf(0x3b4)](_0x1120cb=>_0x1120cb['_id']&&_0x4b1dde['_id']&&_0x1120cb[_0x5f3adf(0x1b0)][_0x5f3adf(0x2c5)]()===_0x4b1dde[_0x5f3adf(0x1b0)]['toString']());_0x19ee60&&(_0x4b1dde[_0x5f3adf(0x11e)]=_0x19ee60[_0x5f3adf(0x11e)]);}});}['deleteReplyOption'](_0xd1756b,_0x2fb3d8){const _0x4b516a=a0_0x37fa70;let {replyOption:_0x15796b}=_0x2fb3d8;if(!_0x15796b[_0x4b516a(0x1b0)]){this['throwAndLogError'](_0x4b516a(0x74b));return;}if(!_0xd1756b[_0x4b516a(0x572)][_0x4b516a(0x3b4)](_0x2b0f88=>_0x2b0f88[_0x4b516a(0x1b0)][_0x4b516a(0x2c5)]()===_0x2fb3d8[_0x4b516a(0x711)][_0x4b516a(0x1b0)]['toString']())){this['throwAndLogError'](_0x4b516a(0x499)+_0x15796b[_0x4b516a(0x1b0)]+_0x4b516a(0x7b));return;}_0xd1756b[_0x4b516a(0x572)]=_0xd1756b[_0x4b516a(0x572)][_0x4b516a(0x1c2)](_0x5dec9b=>_0x5dec9b[_0x4b516a(0x1b0)][_0x4b516a(0x2c5)]()!==_0x2fb3d8[_0x4b516a(0x711)][_0x4b516a(0x1b0)]['toString']());}async[a0_0x37fa70(0x237)](_0x5583f0,_0x151660){const _0x21d2b2=a0_0x37fa70;let _0x487042=_0x5583f0[_0x21d2b2(0x572)][_0x21d2b2(0x708)](_0x14e20a=>_0x14e20a[_0x21d2b2(0x1b0)][_0x21d2b2(0x2c5)]()===_0x151660[_0x21d2b2(0x711)][_0x21d2b2(0x1b0)][_0x21d2b2(0x2c5)]());if(_0x487042===-0x1){this['throwAndLogError'](_0x21d2b2(0x499)+_0x151660[_0x21d2b2(0x711)][_0x21d2b2(0x1b0)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}for(let _0x3318ba in _0x151660[_0x21d2b2(0x711)])_0x151660[_0x21d2b2(0x711)][_0x21d2b2(0x4ee)](_0x3318ba)&&(_0x5583f0['replyOptions'][_0x487042][_0x3318ba]=_0x151660[_0x21d2b2(0x711)][_0x3318ba]);}[a0_0x37fa70(0x786)](_0x105ef5,_0x230c3d){const _0x29f23d=a0_0x37fa70;_0x105ef5[_0x29f23d(0x572)][_0x29f23d(0x5ee)](_0x230c3d[_0x29f23d(0x711)]);}async['editFlowGroup'](_0xb082a4){const _0x1a279f=a0_0x37fa70;this[_0x1a279f(0x39e)][_0x1a279f(0x48f)](this['instanceName']+'\x20('+this[_0x1a279f(0x753)]['wuid']+_0x1a279f(0x274)+JSON[_0x1a279f(0x718)](_0xb082a4,null,0x2));try{if(this['logger'][_0x1a279f(0x48f)](this['instanceName']+'\x20('+this[_0x1a279f(0x753)][_0x1a279f(0x6e4)]+'):\x20Editando\x20grupo\x20do\x20fluxo...'),!this[_0x1a279f(0x1db)]['flows'][_0x1a279f(0x3b4)](_0x399ebd=>_0x399ebd[_0x1a279f(0x1b0)]===_0xb082a4[_0x1a279f(0x1b0)]))throw this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x1a279f(0x753)][_0x1a279f(0x6e4)]+_0x1a279f(0x619)+_0xb082a4[_0x1a279f(0x1b0)]+'\x27\x20não\x20encontrado'),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x4ebbb1=await this[_0x1a279f(0x210)][_0x1a279f(0x407)][_0x1a279f(0x1e2)]({'where':{'_id':_0xb082a4['_id']}});if(!_0x4ebbb1||!_0x4ebbb1['whoCanUse']?.['includes'](this[_0x1a279f(0x753)][_0x1a279f(0x6e4)]))throw this[_0x1a279f(0x39e)]['error'](this[_0x1a279f(0x653)]+'\x20('+this[_0x1a279f(0x753)][_0x1a279f(0x6e4)]+_0x1a279f(0x21b)+_0xb082a4[_0x1a279f(0x1b0)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x1a279f(0x2e6)+_0xb082a4[_0x1a279f(0x1b0)]+_0x1a279f(0x482));if(!_0x4ebbb1[_0x1a279f(0x527)]?.['includes'](this[_0x1a279f(0x753)][_0x1a279f(0x6e4)]))throw new m(_0x1a279f(0x20e));if(_0xb082a4[_0x1a279f(0x6d5)]&&_0xb082a4[_0x1a279f(0x6d5)]?.[_0x1a279f(0x6ad)]===!0x0){if(this[_0x1a279f(0x39e)][_0x1a279f(0x48f)](this[_0x1a279f(0x653)]+'\x20('+this[_0x1a279f(0x753)][_0x1a279f(0x6e4)]+'):\x20delete\x20=\x20true'),_0xb082a4[_0x1a279f(0x6d5)][_0x1a279f(0x259)]===!0x0)return{'message':_0x1a279f(0x5c1)};if(_0x4ebbb1[_0x1a279f(0x19a)]['some'](_0x12cabb=>_0x12cabb[_0x1a279f(0x3c6)]['toString']()===_0xb082a4[_0x1a279f(0x6d5)]['_id']))return this[_0x1a279f(0x39e)]['verbose'](this[_0x1a279f(0x653)]+'\x20('+this[_0x1a279f(0x753)][_0x1a279f(0x6e4)]+'):\x20tem\x20blocks'),{'message':_0x1a279f(0x22f)};_0x4ebbb1[_0x1a279f(0x5cb)]=_0x4ebbb1[_0x1a279f(0x5cb)]['filter'](_0x195ce5=>_0x195ce5['_id'][_0x1a279f(0x2c5)]()!==_0xb082a4[_0x1a279f(0x6d5)][_0x1a279f(0x1b0)]);}else{if(_0xb082a4[_0x1a279f(0x6d5)]){if(_0xb082a4[_0x1a279f(0x6d5)][_0x1a279f(0x259)]===!0x0)return{'message':'Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão'};if(_0xb082a4[_0x1a279f(0x6d5)][_0x1a279f(0x1b0)]){let _0x5c32b8=_0x4ebbb1[_0x1a279f(0x5cb)][_0x1a279f(0x3b4)](_0x2238db=>_0x2238db['_id']['toString']()===_0xb082a4[_0x1a279f(0x6d5)][_0x1a279f(0x1b0)]);_0x5c32b8&&(_0xb082a4[_0x1a279f(0x6d5)]['x']<0x0&&(_0xb082a4[_0x1a279f(0x6d5)]['x']=0x0),_0xb082a4[_0x1a279f(0x6d5)]['y']<0x0&&(_0xb082a4[_0x1a279f(0x6d5)]['y']=0x0),Object[_0x1a279f(0x4f8)](_0x5c32b8,_0xb082a4[_0x1a279f(0x6d5)]));}else _0x4ebbb1[_0x1a279f(0x5cb)][_0x1a279f(0x5ee)](_0xb082a4['group']);}}let _0x1f9162=await this['repository'][_0x1a279f(0x407)]['updateOne'](_0x4ebbb1[_0x1a279f(0x1b0)],_0x4ebbb1);if(!_0x1f9162)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x1f9162;}catch(_0x1422e4){let _0x45351b=_0x1a279f(0x61a),_0x12f3ef=_0x1422e4 instanceof Error?_0x1422e4['message']:typeof _0x1422e4==_0x1a279f(0x41e)?JSON['stringify'](_0x1422e4):_0x1422e4,_0x55daad=_0x45351b+':\x20'+_0x12f3ef;throw this[_0x1a279f(0x39e)][_0x1a279f(0x723)](this[_0x1a279f(0x653)]+'\x20('+this[_0x1a279f(0x753)][_0x1a279f(0x6e4)]+'):\x20'+_0x55daad),new m(_0x55daad);}}async[a0_0x37fa70(0x787)](_0xc18f64){const _0x5e1f2a=a0_0x37fa70;try{if(this['logger'][_0x5e1f2a(0x48f)](this[_0x5e1f2a(0x653)]+'\x20('+this[_0x5e1f2a(0x753)][_0x5e1f2a(0x6e4)]+_0x5e1f2a(0x548)),!this[_0x5e1f2a(0x1db)][_0x5e1f2a(0x59c)][_0x5e1f2a(0x3b4)](_0x466c10=>_0x466c10[_0x5e1f2a(0x1b0)]===_0xc18f64[_0x5e1f2a(0x1b0)]))throw this[_0x5e1f2a(0x39e)][_0x5e1f2a(0x48f)](this['instanceName']+'\x20('+this['instance'][_0x5e1f2a(0x6e4)]+_0x5e1f2a(0x619)+_0xc18f64[_0x5e1f2a(0x1b0)]+_0x5e1f2a(0x19c)),new m(_0x5e1f2a(0x645));let _0x15e15c=await this[_0x5e1f2a(0x210)][_0x5e1f2a(0x407)][_0x5e1f2a(0x1e2)]({'where':{'_id':_0xc18f64[_0x5e1f2a(0x1b0)]}});if(!_0x15e15c||!_0x15e15c[_0x5e1f2a(0x758)]?.[_0x5e1f2a(0x14a)](this[_0x5e1f2a(0x753)][_0x5e1f2a(0x6e4)]))throw this[_0x5e1f2a(0x39e)]['error'](this[_0x5e1f2a(0x653)]+'\x20('+this[_0x5e1f2a(0x753)][_0x5e1f2a(0x6e4)]+_0x5e1f2a(0x21b)+_0xc18f64[_0x5e1f2a(0x1b0)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x5e1f2a(0x2e6)+_0xc18f64['_id']+_0x5e1f2a(0x482));if(!_0x15e15c['whoCanEdit']?.[_0x5e1f2a(0x14a)](this[_0x5e1f2a(0x753)]['wuid']))throw new m(_0x5e1f2a(0x20e));let _0x4d520e=!0x1;if(_0xc18f64[_0x5e1f2a(0xd0)]?.[_0x5e1f2a(0x6ad)]===!0x0)_0x15e15c[_0x5e1f2a(0x3ea)]=_0x15e15c[_0x5e1f2a(0x3ea)][_0x5e1f2a(0x1c2)](_0x414c06=>_0x414c06&&_0xc18f64[_0x5e1f2a(0xd0)]&&_0x414c06[_0x5e1f2a(0x1b0)]&&_0xc18f64[_0x5e1f2a(0xd0)][_0x5e1f2a(0x1b0)]&&_0x414c06[_0x5e1f2a(0x1b0)][_0x5e1f2a(0x2c5)]()!==_0xc18f64['condition'][_0x5e1f2a(0x1b0)][_0x5e1f2a(0x2c5)]()),_0x4d520e=!0x0;else{let _0x1acb36=_0x15e15c[_0x5e1f2a(0x3ea)]['find'](_0x3e34c6=>_0x3e34c6&&_0xc18f64[_0x5e1f2a(0xd0)]&&_0x3e34c6[_0x5e1f2a(0x1b0)]&&_0xc18f64[_0x5e1f2a(0xd0)][_0x5e1f2a(0x1b0)]&&_0x3e34c6['_id'][_0x5e1f2a(0x2c5)]()===_0xc18f64[_0x5e1f2a(0xd0)][_0x5e1f2a(0x1b0)]['toString']());_0x1acb36?(_0x4d520e=_0x1acb36[_0x5e1f2a(0x11e)]!==_0xc18f64[_0x5e1f2a(0xd0)]['order'],Object[_0x5e1f2a(0x4f8)](_0x1acb36,_0xc18f64[_0x5e1f2a(0xd0)])):(_0x15e15c['conditions']['push'](_0xc18f64[_0x5e1f2a(0xd0)]),_0x4d520e=!0x0);}if(_0x4d520e){_0x15e15c[_0x5e1f2a(0x3ea)]['sort']((_0x34baf4,_0x5a8588)=>_0x34baf4[_0x5e1f2a(0x11e)]>_0x5a8588[_0x5e1f2a(0x11e)]?0x1:_0x5a8588[_0x5e1f2a(0x11e)]>_0x34baf4[_0x5e1f2a(0x11e)]?-0x1:0x0);for(let _0x21d566=0x0;_0x21d566<_0x15e15c[_0x5e1f2a(0x3ea)][_0x5e1f2a(0x426)];_0x21d566++)_0x15e15c[_0x5e1f2a(0x3ea)][_0x21d566][_0x5e1f2a(0x11e)]=_0x21d566+0x1;_0x15e15c[_0x5e1f2a(0x3ea)][_0x5e1f2a(0x426)]>0x0&&(_0x15e15c[_0x5e1f2a(0x3ea)][0x0][_0x5e1f2a(0x45b)]=_0x5e1f2a(0x554));}let _0x1277c1=await this['repository'][_0x5e1f2a(0x407)][_0x5e1f2a(0x130)](_0x15e15c[_0x5e1f2a(0x1b0)],_0x15e15c);if(!_0x1277c1)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x1277c1;}catch(_0x337fc9){let _0x5cfa51='Erro\x20ao\x20editar\x20condição\x20do\x20fluxo',_0x2fba91=_0x337fc9 instanceof Error?_0x337fc9[_0x5e1f2a(0x33a)]:typeof _0x337fc9==_0x5e1f2a(0x41e)?JSON[_0x5e1f2a(0x718)](_0x337fc9):_0x337fc9,_0x5dc3de=_0x5cfa51+':\x20'+_0x2fba91;throw this[_0x5e1f2a(0x39e)][_0x5e1f2a(0x723)](this[_0x5e1f2a(0x653)]+'\x20('+this['instance'][_0x5e1f2a(0x6e4)]+_0x5e1f2a(0x17d)+_0x5dc3de),new m(_0x5dc3de);}}async[a0_0x37fa70(0x65f)](_0x9ce38c){const _0x5cac53=a0_0x37fa70;try{if(this['logger'][_0x5cac53(0x48f)](this[_0x5cac53(0x653)]+'\x20('+this[_0x5cac53(0x753)][_0x5cac53(0x6e4)]+_0x5cac53(0x757)),!this[_0x5cac53(0x1db)][_0x5cac53(0x59c)][_0x5cac53(0x3b4)](_0x579f84=>_0x579f84[_0x5cac53(0x1b0)]===_0x9ce38c[_0x5cac53(0x1b0)]))throw this[_0x5cac53(0x39e)]['verbose'](this[_0x5cac53(0x653)]+'\x20('+this['instance'][_0x5cac53(0x6e4)]+'):\x20Fluxo\x20\x27'+_0x9ce38c['_id']+_0x5cac53(0x19c)),new m(_0x5cac53(0x645));let _0x111c03=await this[_0x5cac53(0x210)][_0x5cac53(0x407)]['findOne']({'where':{'_id':_0x9ce38c[_0x5cac53(0x1b0)]}});if(!_0x111c03||!_0x111c03[_0x5cac53(0x758)]?.['includes'](this[_0x5cac53(0x753)][_0x5cac53(0x6e4)]))throw this[_0x5cac53(0x39e)][_0x5cac53(0x723)](this[_0x5cac53(0x653)]+'\x20('+this['instance'][_0x5cac53(0x6e4)]+_0x5cac53(0x21b)+_0x9ce38c['_id']+_0x5cac53(0x482)),new m(_0x5cac53(0x2e6)+_0x9ce38c[_0x5cac53(0x1b0)]+_0x5cac53(0x482));if(!_0x111c03[_0x5cac53(0x527)]?.[_0x5cac53(0x14a)](this[_0x5cac53(0x753)][_0x5cac53(0x6e4)]))throw new m(_0x5cac53(0x20e));let _0x4dbe24=!0x1;if(_0x9ce38c[_0x5cac53(0x5c8)]?.['delete']===!0x0)_0x111c03[_0x5cac53(0x696)]=_0x111c03[_0x5cac53(0x696)][_0x5cac53(0x1c2)](_0x15898b=>_0x15898b&&_0x9ce38c[_0x5cac53(0x5c8)]&&_0x15898b[_0x5cac53(0x1b0)]&&_0x9ce38c[_0x5cac53(0x5c8)][_0x5cac53(0x1b0)]&&_0x15898b[_0x5cac53(0x1b0)][_0x5cac53(0x2c5)]()!==_0x9ce38c[_0x5cac53(0x5c8)][_0x5cac53(0x1b0)][_0x5cac53(0x2c5)]()),_0x4dbe24=!0x0;else{let _0x292d2e=_0x111c03[_0x5cac53(0x696)][_0x5cac53(0x3b4)](_0x45326b=>_0x45326b&&_0x9ce38c[_0x5cac53(0x5c8)]&&_0x45326b[_0x5cac53(0x1b0)]&&_0x9ce38c[_0x5cac53(0x5c8)][_0x5cac53(0x1b0)]&&_0x45326b[_0x5cac53(0x1b0)][_0x5cac53(0x2c5)]()===_0x9ce38c[_0x5cac53(0x5c8)][_0x5cac53(0x1b0)][_0x5cac53(0x2c5)]());_0x292d2e?(_0x4dbe24=_0x292d2e['order']!==_0x9ce38c[_0x5cac53(0x5c8)][_0x5cac53(0x11e)],Object[_0x5cac53(0x4f8)](_0x292d2e,_0x9ce38c[_0x5cac53(0x5c8)])):(_0x111c03['varedits']['push'](_0x9ce38c['varedit']),_0x4dbe24=!0x0);}if(_0x4dbe24){_0x111c03['varedits']['sort']((_0x4a9deb,_0x40a825)=>_0x4a9deb[_0x5cac53(0x11e)]>_0x40a825[_0x5cac53(0x11e)]?0x1:_0x40a825[_0x5cac53(0x11e)]>_0x4a9deb[_0x5cac53(0x11e)]?-0x1:0x0);for(let _0x4e3c82=0x0;_0x4e3c82<_0x111c03[_0x5cac53(0x696)][_0x5cac53(0x426)];_0x4e3c82++)_0x111c03[_0x5cac53(0x696)][_0x4e3c82][_0x5cac53(0x11e)]=_0x4e3c82+0x1;}let _0x49e92a=await this[_0x5cac53(0x210)]['flow'][_0x5cac53(0x130)](_0x111c03[_0x5cac53(0x1b0)],_0x111c03);if(!_0x49e92a)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x49e92a;}catch(_0x121a55){let _0x277cf2=_0x5cac53(0x358),_0x5d7f5a=_0x121a55 instanceof Error?_0x121a55['message']:typeof _0x121a55==_0x5cac53(0x41e)?JSON[_0x5cac53(0x718)](_0x121a55):_0x121a55,_0x53ed39=_0x277cf2+':\x20'+_0x5d7f5a;throw this[_0x5cac53(0x39e)][_0x5cac53(0x723)](this['instanceName']+'\x20('+this[_0x5cac53(0x753)][_0x5cac53(0x6e4)]+'):\x20'+_0x53ed39),new m(_0x53ed39);}}async['editFlowVariable'](_0x122470){const _0x5a4eba=a0_0x37fa70;try{if(this['logger'][_0x5a4eba(0x48f)](this['instanceName']+'\x20('+this['instance'][_0x5a4eba(0x6e4)]+_0x5a4eba(0x497)),!this[_0x5a4eba(0x1db)][_0x5a4eba(0x59c)][_0x5a4eba(0x3b4)](_0x43d015=>_0x43d015['_id']===_0x122470['_id']))throw this[_0x5a4eba(0x39e)]['verbose'](this['instanceName']+'\x20('+this[_0x5a4eba(0x753)][_0x5a4eba(0x6e4)]+_0x5a4eba(0x619)+_0x122470['_id']+_0x5a4eba(0x19c)),new m(_0x5a4eba(0x645));let _0x572585=await this[_0x5a4eba(0x210)][_0x5a4eba(0x407)][_0x5a4eba(0x1e2)]({'where':{'_id':_0x122470[_0x5a4eba(0x1b0)]}});if(!_0x572585||!_0x572585[_0x5a4eba(0x758)]?.[_0x5a4eba(0x14a)](this[_0x5a4eba(0x753)]['wuid']))throw this[_0x5a4eba(0x39e)][_0x5a4eba(0x723)](this[_0x5a4eba(0x653)]+'\x20('+this[_0x5a4eba(0x753)]['wuid']+_0x5a4eba(0x21b)+_0x122470['_id']+_0x5a4eba(0x482)),new m('Flow\x20\x27'+_0x122470[_0x5a4eba(0x1b0)]+_0x5a4eba(0x482));if(!_0x572585[_0x5a4eba(0x527)]?.[_0x5a4eba(0x14a)](this[_0x5a4eba(0x753)][_0x5a4eba(0x6e4)]))throw new m(_0x5a4eba(0x20e));_0x122470[_0x5a4eba(0x57d)]['name']=_0x122470[_0x5a4eba(0x57d)][_0x5a4eba(0x410)][_0x5a4eba(0x6ba)](),_0x122470['variable'][_0x5a4eba(0x410)]['startsWith']('_')&&(_0x122470[_0x5a4eba(0x57d)][_0x5a4eba(0x410)]=_0x122470['variable'][_0x5a4eba(0x410)][_0x5a4eba(0xca)](0x1)),_0x122470['variable']['name']=_0x122470[_0x5a4eba(0x57d)][_0x5a4eba(0x410)][_0x5a4eba(0x6ba)]();let _0x373d1b=_0x572585[_0x5a4eba(0x6b8)][_0x5a4eba(0x3b4)](_0x993c4f=>_0x993c4f[_0x5a4eba(0x410)]===_0x122470[_0x5a4eba(0x57d)][_0x5a4eba(0x410)]);if(_0x373d1b?.[_0x5a4eba(0x500)]===!0x0)throw new Error('Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.');if(_0x122470['variable']?.[_0x5a4eba(0x6ad)]===!0x0){if(!_0x373d1b)return{'message':_0x5a4eba(0x2c0)};_0x572585[_0x5a4eba(0x6b8)]=_0x572585[_0x5a4eba(0x6b8)]['filter'](_0x4f0811=>_0x4f0811['name']!==_0x122470[_0x5a4eba(0x57d)]['name']);}else _0x373d1b?Object[_0x5a4eba(0x4f8)](_0x373d1b,_0x122470['variable']):_0x572585['variables'][_0x5a4eba(0x5ee)](_0x122470['variable']);let _0x1e52a5=await this[_0x5a4eba(0x210)]['flow'][_0x5a4eba(0x130)](_0x572585[_0x5a4eba(0x1b0)],_0x572585);if(!_0x1e52a5)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x1e52a5;}catch(_0x1a3013){let _0x141c12=_0x5a4eba(0x7bb),_0x5cfda5=_0x1a3013 instanceof Error?_0x1a3013[_0x5a4eba(0x33a)]:typeof _0x1a3013==_0x5a4eba(0x41e)?JSON[_0x5a4eba(0x718)](_0x1a3013):_0x1a3013,_0x58ac9b=_0x141c12+':\x20'+_0x5cfda5;throw this[_0x5a4eba(0x39e)][_0x5a4eba(0x723)](this['instanceName']+'\x20('+this[_0x5a4eba(0x753)][_0x5a4eba(0x6e4)]+_0x5a4eba(0x17d)+_0x58ac9b),new m(_0x58ac9b);}}async['startFlow'](_0x20aa08){const _0x31e488=a0_0x37fa70;let _0x814d6e=null;try{if(!this[_0x31e488(0x1db)]?.['flowConfig'][_0x31e488(0x104)])throw new m(_0x31e488(0x661));this[_0x31e488(0x39e)]['verbose'](this[_0x31e488(0x653)]+'\x20('+this[_0x31e488(0x753)][_0x31e488(0x6e4)]+_0x31e488(0x624));let _0x2a8fb3=(await this[_0x31e488(0x3c5)]({'numbers':[_0x20aa08[_0x31e488(0x6a8)]]}))[0x0];if(!_0x2a8fb3[_0x31e488(0x332)]&&!(0x0,w[_0x31e488(0x252)])(_0x2a8fb3['jid'])&&!_0x2a8fb3[_0x31e488(0xb1)]['includes']('@broadcast'))throw _0x814d6e=JSON[_0x31e488(0x718)](_0x2a8fb3,null,0x2),new m(_0x2a8fb3);let _0xdafe94;if(_0x20aa08[_0x31e488(0x410)][_0x31e488(0x426)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x31e488(0x132)](_0x20aa08['name'])?_0xdafe94=this[_0x31e488(0x1db)][_0x31e488(0x59c)][_0x31e488(0x3b4)](_0x389690=>_0x389690[_0x31e488(0x1b0)]===_0x20aa08[_0x31e488(0x410)]):_0xdafe94=this[_0x31e488(0x1db)][_0x31e488(0x59c)][_0x31e488(0x3b4)](_0x35b493=>_0x35b493['name']===_0x20aa08[_0x31e488(0x410)]),!_0xdafe94)throw this[_0x31e488(0x39e)][_0x31e488(0x48f)](this['instanceName']+'\x20('+this[_0x31e488(0x753)]['wuid']+_0x31e488(0x619)+_0x20aa08[_0x31e488(0x410)]+_0x31e488(0x19c)),new m(_0x31e488(0x645));let _0x22276b=await this[_0x31e488(0x210)][_0x31e488(0x407)][_0x31e488(0x1e2)]({'where':{'_id':_0xdafe94[_0x31e488(0x1b0)]}});if(!_0x22276b||!_0x22276b[_0x31e488(0x758)]?.[_0x31e488(0x14a)](this[_0x31e488(0x753)][_0x31e488(0x6e4)]))throw this[_0x31e488(0x39e)][_0x31e488(0x723)](this[_0x31e488(0x653)]+'\x20('+this['instance'][_0x31e488(0x6e4)]+_0x31e488(0x21b)+_0xdafe94['_id']+_0x31e488(0x482)),_0x814d6e=_0x31e488(0x2e6)+_0xdafe94['_id']+_0x31e488(0x482),new m(_0x814d6e);let _0x2dfe97=await this['createConversationforStartFlow'](_0x22276b,_0x2a8fb3[_0x31e488(0xb1)],_0x20aa08['changeVariables']);if(_0x2dfe97){this[_0x31e488(0x39e)][_0x31e488(0x48f)](this[_0x31e488(0x653)]+'\x20('+this[_0x31e488(0x753)][_0x31e488(0x6e4)]+_0x31e488(0x381));let _0x3f266d=await this[_0x31e488(0x729)](_0x2dfe97);return _0x3f266d&&await this['processblock'](_0x2dfe97,_0x3f266d),{'message':_0x31e488(0x9b)+_0x20aa08['remoteJid']};}}catch(_0x5d2088){if(this['logger'][_0x31e488(0x723)](this[_0x31e488(0x653)]+'\x20('+this[_0x31e488(0x753)][_0x31e488(0x6e4)]+_0x31e488(0x4a9)+(_0x5d2088 instanceof Error?_0x5d2088[_0x31e488(0x33a)]:JSON[_0x31e488(0x718)](_0x5d2088,null,0x2))),_0x814d6e=_0x5d2088 instanceof Error?_0x5d2088[_0x31e488(0x33a)]:JSON[_0x31e488(0x718)](_0x5d2088,null,0x2),_0x814d6e)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x814d6e);}}async[a0_0x37fa70(0x303)](_0x3345ef,_0x1f1fa5,_0x5a2cfd){const _0x5732dd=a0_0x37fa70;let _0x1f4ccc=null;try{if(!this[_0x5732dd(0x1db)]?.[_0x5732dd(0x67c)]['enabled'])throw new m(_0x5732dd(0x661));if(this['logger'][_0x5732dd(0x48f)](this[_0x5732dd(0x653)]+'\x20('+this[_0x5732dd(0x753)][_0x5732dd(0x6e4)]+_0x5732dd(0x624)),_0x1f1fa5){let _0x5b669c=(await this[_0x5732dd(0x3c5)]({'numbers':[_0x1f1fa5]}))[0x0];if(!_0x5b669c[_0x5732dd(0x332)]&&!(0x0,w[_0x5732dd(0x252)])(_0x5b669c[_0x5732dd(0xb1)])&&!_0x5b669c[_0x5732dd(0xb1)][_0x5732dd(0x14a)](_0x5732dd(0x50d)))throw _0x1f4ccc=JSON[_0x5732dd(0x718)](_0x5b669c,null,0x2),new m(_0x5b669c);_0x1f1fa5=_0x5b669c['jid'];}else _0x1f1fa5||(_0x1f1fa5=(0x0,Q['v4'])());let _0x476f13=await this['repository'][_0x5732dd(0x407)]['findOne']({'where':{'_id':_0x3345ef}});if(!_0x476f13||!_0x476f13[_0x5732dd(0x758)]?.[_0x5732dd(0x14a)](this['instance'][_0x5732dd(0x6e4)]))throw this[_0x5732dd(0x39e)][_0x5732dd(0x723)](this[_0x5732dd(0x653)]+'\x20('+this[_0x5732dd(0x753)]['wuid']+_0x5732dd(0x21b)+_0x3345ef+_0x5732dd(0x482)),new m('Flow\x20\x27'+_0x3345ef+_0x5732dd(0x482));let _0x3766dd=await this[_0x5732dd(0x26f)](_0x476f13,_0x1f1fa5,null);if(_0x3766dd){this[_0x5732dd(0x39e)][_0x5732dd(0x48f)](this[_0x5732dd(0x653)]+'\x20('+this[_0x5732dd(0x753)][_0x5732dd(0x6e4)]+_0x5732dd(0x3c3));let _0x5ad74b;if(_0x5a2cfd){let _0x27478c=_0x3766dd[_0x5732dd(0x5ed)][_0x5732dd(0x34a)],_0x13b49c=this[_0x5732dd(0x2c8)](_0x5a2cfd);Object['assign'](_0x27478c,_0x13b49c),_0x3766dd[_0x5732dd(0x5ed)][_0x5732dd(0x34a)]=_0x27478c,_0x5ad74b={'error':!0x1,'apiResponse':_0x5a2cfd};}let _0xa0c14f=await this['NextBlock'](_0x3766dd);return _0xa0c14f&&await this[_0x5732dd(0x702)](_0x3766dd,_0xa0c14f),{'message':'Flow\x20iniciado'};}}catch(_0x22ff38){if(this['logger'][_0x5732dd(0x723)](this[_0x5732dd(0x653)]+'\x20('+this[_0x5732dd(0x753)][_0x5732dd(0x6e4)]+'):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20'+(_0x22ff38 instanceof Error?_0x22ff38['message']:JSON[_0x5732dd(0x718)](_0x22ff38,null,0x2))),_0x1f4ccc=_0x22ff38 instanceof Error?_0x22ff38[_0x5732dd(0x33a)]:JSON[_0x5732dd(0x718)](_0x22ff38,null,0x2),_0x1f4ccc)throw new m(_0x5732dd(0x3b5)+_0x1f4ccc);}}async[a0_0x37fa70(0x23b)](_0x3a0e4b){const _0x1c79e2=a0_0x37fa70;try{let _0x1fa8f3={'remoteJid':_0x3a0e4b,'status':_0x1c79e2(0x364)},_0x5d4c7b={'status':_0x1c79e2(0x19b)},_0x145940=await this[_0x1c79e2(0x210)][_0x1c79e2(0x444)][_0x1c79e2(0x10e)](_0x1fa8f3,_0x5d4c7b,this[_0x1c79e2(0x753)][_0x1c79e2(0x6e4)]);return this[_0x1c79e2(0x39e)][_0x1c79e2(0x48f)](this[_0x1c79e2(0x653)]+'\x20('+this[_0x1c79e2(0x753)][_0x1c79e2(0x6e4)]+_0x1c79e2(0x5a2)),_0x145940;}catch(_0x2c0998){throw this[_0x1c79e2(0x39e)][_0x1c79e2(0x723)](this['instanceName']+'\x20('+this[_0x1c79e2(0x753)]['wuid']+'):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20'+_0x2c0998[_0x1c79e2(0x33a)]),_0x2c0998;}}async[a0_0x37fa70(0x26f)](_0x527a9d,_0x6bdff9,_0x4a22ae){const _0x55e8e3=a0_0x37fa70;this['logger']['verbose'](this[_0x55e8e3(0x653)]+'\x20('+this[_0x55e8e3(0x753)][_0x55e8e3(0x6e4)]+_0x55e8e3(0x76c)),await this[_0x55e8e3(0x23b)](_0x6bdff9);try{let _0x5270aa=require(_0x55e8e3(0x4ab))[_0x55e8e3(0x721)],_0x4c7a0b=Date[_0x55e8e3(0x5cf)](),_0xc838b1=_0x55e8e3(0x6c4),_0x55ca50={},_0x474f18={},_0x559494=this['AutomateSystem'][_0x55e8e3(0x59c)][_0x55e8e3(0x3b4)](_0x493079=>_0x493079['_id']===_0x527a9d['_id']?.[_0x55e8e3(0x2c5)]()),_0x13dd01=_0x559494?.[_0x55e8e3(0x6cf)]??_0x527a9d['minutesToClose']??0x0,_0x93061d=_0x559494?.[_0x55e8e3(0x3eb)]??_0x527a9d['readMessages']??!0x1,_0x43dd21={'flowId':_0x527a9d[_0x55e8e3(0x1b0)],..._0x527a9d,'chatLog':null},_0x563fba=await this[_0x55e8e3(0x523)](_0x43dd21[_0x55e8e3(0x6b8)]),_0x3685d2=await this[_0x55e8e3(0x19e)](_0x6bdff9),_0x60cb89={..._0x563fba,..._0x3685d2,'_remoteJid':_0x6bdff9},_0xf5cdc2={'lastReceivedMessage':_0x55ca50,'lastSendMessage':_0x474f18,'lastBlockId':_0xc838b1,'lastCondition':!0x0,'realVariables':_0x60cb89};_0x43dd21[_0x55e8e3(0x5ed)]=_0xf5cdc2,_0x43dd21[_0x55e8e3(0x5ed)][_0x55e8e3(0x34a)]={..._0x60cb89,..._0x4a22ae},delete _0x43dd21['_id'],_0x43dd21['_id']=new _0x5270aa(),_0x43dd21['lastInteraction']=_0x4c7a0b,_0x43dd21[_0x55e8e3(0x4c1)]=_0x55e8e3(0x364),_0x43dd21[_0x55e8e3(0x6a8)]=_0x6bdff9,_0x43dd21[_0x55e8e3(0x6cf)]=_0x13dd01,_0x43dd21['readMessages']=_0x93061d,_0x43dd21['_id']=_0x527a9d['_id'];let _0x29b046=await this['repository']['flowConversation'][_0x55e8e3(0x130)](_0x43dd21[_0x55e8e3(0x1b0)],_0x43dd21,this[_0x55e8e3(0x753)]['wuid']);return this[_0x55e8e3(0x39e)][_0x55e8e3(0x48f)](this[_0x55e8e3(0x653)]+'\x20('+this[_0x55e8e3(0x753)][_0x55e8e3(0x6e4)]+_0x55e8e3(0x20d)),_0x29b046?_0x43dd21:null;}catch(_0x1e43c5){let _0x1915f3=_0x55e8e3(0x34b),_0x46f101=_0x1e43c5 instanceof Error?_0x1e43c5[_0x55e8e3(0x33a)]:typeof _0x1e43c5=='object'?JSON[_0x55e8e3(0x718)](_0x1e43c5):_0x1e43c5,_0x1ce058=_0x1915f3+':\x20'+_0x46f101;throw this['logger'][_0x55e8e3(0x723)](this[_0x55e8e3(0x653)]+'\x20('+this[_0x55e8e3(0x753)][_0x55e8e3(0x6e4)]+_0x55e8e3(0x17d)+_0x1ce058),new m(_0x1ce058);}}async['getConversation'](_0x1013b0){const _0x154647=a0_0x37fa70;try{this[_0x154647(0x39e)][_0x154647(0x48f)](this[_0x154647(0x653)]+'\x20('+this[_0x154647(0x753)][_0x154647(0x6e4)]+'):\x20Buscando\x20conversa...'),this[_0x154647(0x39e)][_0x154647(0x48f)](this[_0x154647(0x653)]+'\x20('+this[_0x154647(0x753)][_0x154647(0x6e4)]+'):\x20Query\x20params:\x20'+_0x1013b0);let _0x1920bf={'where':{'_id':_0x1013b0}};return await this[_0x154647(0x210)][_0x154647(0x444)][_0x154647(0x1e2)](_0x1920bf,this[_0x154647(0x753)]['wuid']);}catch(_0x3e4f3f){let _0x30f4e0='Erro\x20ao\x20buscar\x20a\x20conversa',_0x2988dd=_0x3e4f3f instanceof Error?_0x3e4f3f[_0x154647(0x33a)]:typeof _0x3e4f3f=='object'?JSON[_0x154647(0x718)](_0x3e4f3f):_0x3e4f3f,_0x4e53cb=_0x30f4e0+':\x20'+_0x2988dd;throw this[_0x154647(0x39e)][_0x154647(0x723)](this[_0x154647(0x653)]+'\x20('+this[_0x154647(0x753)]['wuid']+'):\x20'+_0x4e53cb),new m(_0x4e53cb);}}async[a0_0x37fa70(0x48e)](_0x4542f2){const _0x2f80e2=a0_0x37fa70;try{return this[_0x2f80e2(0x39e)][_0x2f80e2(0x48f)](this['instanceName']+'\x20('+this[_0x2f80e2(0x753)]['wuid']+_0x2f80e2(0x3c9)),await this[_0x2f80e2(0x210)][_0x2f80e2(0x444)][_0x2f80e2(0x3b4)](_0x4542f2,this[_0x2f80e2(0x753)]['wuid']);}catch(_0x898800){let _0x103658='Erro\x20ao\x20buscar\x20conversas',_0x1fcd8e=_0x898800 instanceof Error?_0x898800[_0x2f80e2(0x33a)]:typeof _0x898800==_0x2f80e2(0x41e)?JSON[_0x2f80e2(0x718)](_0x898800):_0x898800,_0x390c16=_0x103658+':\x20'+_0x1fcd8e;throw this[_0x2f80e2(0x39e)][_0x2f80e2(0x723)](this[_0x2f80e2(0x653)]+'\x20('+this['instance']['wuid']+_0x2f80e2(0x17d)+_0x390c16),new m(_0x390c16);}}async['deleteConversation'](_0x178474){const _0x300d0f=a0_0x37fa70;try{return this[_0x300d0f(0x39e)][_0x300d0f(0x48f)](this[_0x300d0f(0x653)]+'\x20('+this['instance'][_0x300d0f(0x6e4)]+_0x300d0f(0x163)),this['logger'][_0x300d0f(0x48f)](this[_0x300d0f(0x653)]+'\x20('+this['instance'][_0x300d0f(0x6e4)]+_0x300d0f(0xdd)+_0x178474),(await this[_0x300d0f(0x210)][_0x300d0f(0x444)]['deleteOne']({'where':{'_id':_0x178474[_0x300d0f(0x1b0)]}},this[_0x300d0f(0x753)][_0x300d0f(0x6e4)]))[_0x300d0f(0x2ac)]===0x0?{'message':_0x300d0f(0x52f)}:{'message':_0x300d0f(0x4e1)};}catch(_0x58d4bc){let _0x40a226=_0x300d0f(0x157),_0x39c88=_0x58d4bc instanceof Error?_0x58d4bc[_0x300d0f(0x33a)]:typeof _0x58d4bc=='object'?JSON[_0x300d0f(0x718)](_0x58d4bc):_0x58d4bc,_0x1c9a4f=_0x40a226+':\x20'+_0x39c88;throw this[_0x300d0f(0x39e)][_0x300d0f(0x723)](this['instanceName']+'\x20('+this[_0x300d0f(0x753)][_0x300d0f(0x6e4)]+_0x300d0f(0x17d)+_0x1c9a4f),new m(_0x1c9a4f);}}async['editConversation'](_0x473713){const _0x4590b3=a0_0x37fa70;try{let {_id:_0x2fab52,chatLog:_0x568a12,status:_0x3cd81e}=_0x473713;if(!_0x2fab52)return{'message':_0x4590b3(0x46a)};let _0x4e51dc={};if(_0x3cd81e!==void 0x0&&(_0x4e51dc[_0x4590b3(0x4c1)]=_0x3cd81e),Object[_0x4590b3(0x674)](_0x4e51dc)[_0x4590b3(0x426)]===0x0)return{'message':'Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.'};let _0x35f724=await this[_0x4590b3(0x210)][_0x4590b3(0x444)][_0x4590b3(0x130)](_0x2fab52,_0x4e51dc,this[_0x4590b3(0x753)][_0x4590b3(0x6e4)]);return _0x35f724||{'message':_0x4590b3(0x782)};}catch(_0x399afc){let _0x1a7d15=_0x4590b3(0x76b),_0x352726=_0x399afc instanceof Error?_0x399afc['message']:typeof _0x399afc==_0x4590b3(0x41e)?JSON[_0x4590b3(0x718)](_0x399afc):_0x399afc,_0x1fc66f=_0x1a7d15+':\x20'+_0x352726;throw this[_0x4590b3(0x39e)][_0x4590b3(0x723)](this[_0x4590b3(0x653)]+'\x20('+this[_0x4590b3(0x753)][_0x4590b3(0x6e4)]+_0x4590b3(0x17d)+_0x1fc66f),new m(_0x1fc66f);}}async[a0_0x37fa70(0x5b1)](_0x3db611){const _0x31e36e=a0_0x37fa70;try{_0x3db611[_0x31e36e(0x1b0)]=this['createJid'](_0x3db611[_0x31e36e(0x1b0)]);let _0x2f5159=await this[_0x31e36e(0x210)][_0x31e36e(0x4a2)]['findOne']({'where':{'_id':_0x3db611[_0x31e36e(0x1b0)]}},this[_0x31e36e(0x753)][_0x31e36e(0x6e4)]);if(!_0x2f5159)throw new m('Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo');let {_id:_0x4670f7,leadInfo:_0x269194}=_0x3db611;if(!_0x4670f7)throw new Error(_0x31e36e(0x676));if(_0x3db611['delete']===_0x31e36e(0x1ea))return await this[_0x31e36e(0x5b0)](_0x3db611[_0x31e36e(0x1b0)]),await this['repository'][_0x31e36e(0x4a2)][_0x31e36e(0x6ad)]({'where':{'_id':_0x3db611[_0x31e36e(0x1b0)]}},this['instance'][_0x31e36e(0x6e4)]),await this[_0x31e36e(0x210)][_0x31e36e(0x33a)][_0x31e36e(0x6ad)]({'where':{'key':{'remoteJid':_0x3db611[_0x31e36e(0x1b0)]}}},this[_0x31e36e(0x753)][_0x31e36e(0x6e4)]),_0x3db611=await this[_0x31e36e(0x210)][_0x31e36e(0x4a2)][_0x31e36e(0x130)]({'where':{'_id':_0x3db611['_id']}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x31e36e(0x6e4)]),q(this[_0x31e36e(0x653)],_0x31e36e(0x5c9),{'chat':_0x3db611}),{'message':_0x31e36e(0x52c)};if(_0x3db611[_0x31e36e(0x6ad)]===_0x31e36e(0x6fb))return await this[_0x31e36e(0x210)][_0x31e36e(0x33a)][_0x31e36e(0x6ad)]({'where':{'key':{'remoteJid':_0x3db611[_0x31e36e(0x1b0)]}}},this[_0x31e36e(0x753)][_0x31e36e(0x6e4)]),_0x3db611=await this[_0x31e36e(0x210)][_0x31e36e(0x4a2)][_0x31e36e(0x130)]({'where':{'_id':_0x3db611['_id']}},{'lastmsg':0x0,'unreadcount':0x0},this['instance']['wuid']),q(this[_0x31e36e(0x653)],_0x31e36e(0x5c9),{'chat':_0x3db611}),{'message':_0x31e36e(0x2f7)};let _0x428f16=(_0x5d27d4,_0x3ef166,_0x1a8296)=>{_0x5d27d4&&_0x1a8296['forEach'](_0x116c00=>{const _0x43c82a=a0_0x58ef;_0x5d27d4[_0x116c00]!==void 0x0&&(_0x3ef166[_0x43c82a(0xe7)+_0x116c00]=_0x5d27d4[_0x116c00]);});},_0x1ff93b={};if(_0x31e36e(0x409)in _0x3db611&&(this[_0x31e36e(0x39e)]['verbose'](this[_0x31e36e(0x653)]+'\x20('+this[_0x31e36e(0x753)][_0x31e36e(0x6e4)]+'):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20'+_0x3db611[_0x31e36e(0x1b0)]),_0x3db611['muteEndTime']=_0x3db611[_0x31e36e(0x409)]===0x0?null:-0x1,await this[_0x31e36e(0x688)]['chatModify']({'mute':_0x3db611[_0x31e36e(0x409)]},_0x3db611[_0x31e36e(0x1b0)]),_0x1ff93b[_0x31e36e(0x409)]=Number(_0x3db611[_0x31e36e(0x409)])),_0x269194&&(_0x428f16(_0x269194,_0x1ff93b,['nome',_0x31e36e(0x246),_0x31e36e(0x6a5),_0x31e36e(0x91),_0x31e36e(0x4c1),_0x31e36e(0x65a),_0x31e36e(0x38c),_0x31e36e(0x2af),_0x31e36e(0xfd),'etiquetas','desativadoFluxoAte']),Array[_0x31e36e(0x72)](_0x269194[_0x31e36e(0x78b)])&&(_0x1ff93b['leadInfo.customFields']=_0x269194['customFields'][_0x31e36e(0x3c4)](_0x43cb83=>({'_id':_0x43cb83[_0x31e36e(0x1b0)],'value':_0x43cb83['value']}))),_0x3db611[_0x31e36e(0x500)]['etiquetas']!==void 0x0)){let _0x5c8c56=await this[_0x31e36e(0x210)][_0x31e36e(0x74d)][_0x31e36e(0x3b4)]({'where':{}},this[_0x31e36e(0x753)]['wuid']),_0x177be7=new Set(_0x3db611[_0x31e36e(0x500)][_0x31e36e(0x7b2)]||[]),_0x1840cb=new Set(_0x3db611[_0x31e36e(0x500)]['etiquetas']),_0x24df42=new Set(_0x5c8c56[_0x31e36e(0x3c4)](_0x30dbc5=>_0x30dbc5[_0x31e36e(0x1b0)])),_0x50c50c=[..._0x1840cb]['filter'](_0xaca938=>!_0x177be7[_0x31e36e(0x632)](_0xaca938)&&_0x24df42[_0x31e36e(0x632)](_0xaca938)),_0x536def=[..._0x177be7][_0x31e36e(0x1c2)](_0x2234d6=>!_0x1840cb[_0x31e36e(0x632)](_0x2234d6));if(_0x1ff93b[_0x31e36e(0x551)]=[..._0x177be7],_0x2f5159&&!_0x2f5159['imported']){for(let _0x5f05dd of _0x50c50c)await this[_0x31e36e(0x384)](_0x5f05dd,_0x3db611[_0x31e36e(0x1b0)]),_0x177be7[_0x31e36e(0xf8)](_0x5f05dd);for(let _0x39ae85 of _0x536def)await this[_0x31e36e(0xc5)](_0x39ae85,_0x3db611[_0x31e36e(0x1b0)]),_0x177be7[_0x31e36e(0x6ad)](_0x39ae85);}}if(_0x3db611[_0x31e36e(0x546)]!==void 0x0&&(_0x1ff93b[_0x31e36e(0x546)]=Number(_0x3db611['unreadcount'])),Object['keys'](_0x1ff93b)[_0x31e36e(0x426)]===0x0)throw new Error(_0x31e36e(0x664));let _0x3838bc=await this['repository'][_0x31e36e(0x4a2)][_0x31e36e(0x130)]({'where':{'_id':_0x3db611[_0x31e36e(0x1b0)]}},_0x1ff93b,this[_0x31e36e(0x753)]['wuid']);return _0x3838bc&&q(this[_0x31e36e(0x653)],_0x31e36e(0x5c9),{'chat':_0x3838bc}),_0x3838bc?(this[_0x31e36e(0x39e)][_0x31e36e(0x48f)](this[_0x31e36e(0x653)]+'\x20('+this[_0x31e36e(0x753)][_0x31e36e(0x6e4)]+_0x31e36e(0x17d)+JSON[_0x31e36e(0x718)](_0x3838bc,null,0x2)),_0x3838bc):{'message':_0x31e36e(0x54a)};}catch(_0x563067){let _0x10b78b=_0x31e36e(0x438),_0x349c4=_0x563067 instanceof Error?_0x563067['message']:typeof _0x563067==_0x31e36e(0x41e)?JSON[_0x31e36e(0x718)](_0x563067):_0x563067,_0x4fbfb6=_0x10b78b+':\x20'+_0x349c4;throw this[_0x31e36e(0x39e)][_0x31e36e(0x723)](this[_0x31e36e(0x653)]+'\x20('+this[_0x31e36e(0x753)][_0x31e36e(0x6e4)]+_0x31e36e(0x17d)+_0x4fbfb6),new m(_0x4fbfb6);}}async['AddChatLabel'](_0x92144d,_0x4c15ca){const _0x584ddf=a0_0x37fa70;try{await this['client']['addChatLabel'](_0x4c15ca,_0x92144d),this[_0x584ddf(0x39e)][_0x584ddf(0x11b)](this[_0x584ddf(0x653)]+'\x20('+this['instance'][_0x584ddf(0x6e4)]+_0x584ddf(0x7b5)+_0x92144d+_0x584ddf(0x5da)+_0x4c15ca+_0x584ddf(0x68f));}catch(_0x45a1ca){this[_0x584ddf(0x39e)][_0x584ddf(0x723)](_0x584ddf(0x4c4)+_0x92144d+_0x584ddf(0x335)+_0x4c15ca+':\x20'+_0x45a1ca);}}async[a0_0x37fa70(0xc5)](_0x5e286d,_0x1312f9){const _0x55742f=a0_0x37fa70;try{await this['client'][_0x55742f(0x97)](_0x1312f9,_0x5e286d),this[_0x55742f(0x39e)]['info'](this[_0x55742f(0x653)]+'\x20('+this[_0x55742f(0x753)][_0x55742f(0x6e4)]+_0x55742f(0x7b5)+_0x5e286d+_0x55742f(0x26b)+_0x1312f9+_0x55742f(0x68f));}catch(_0x5be8a6){this[_0x55742f(0x39e)][_0x55742f(0x723)](_0x55742f(0x5a9)+_0x5e286d+_0x55742f(0x27d)+_0x1312f9+':\x20'+_0x5be8a6);}}async['updateAgent'](_0x57332a){const _0x38972=a0_0x37fa70;try{let _0x4936c9=await this['repository']['automateSystem']['findOrCreate'](this[_0x38972(0x753)][_0x38972(0x6e4)]),_0x2d8e32=_0x57332a[_0x38972(0x1b0)]?_0x4936c9[_0x38972(0x2bd)][_0x38972(0x708)](_0x1ec4ca=>_0x1ec4ca[_0x38972(0x1b0)]===_0x57332a['_id']):-0x1;if(_0x57332a[_0x38972(0x6ad)]&&_0x2d8e32>-0x1)_0x4936c9['agents'][_0x38972(0x685)](_0x2d8e32,0x1);else{if(_0x2d8e32>-0x1){let _0x1eda41=_0x4936c9[_0x38972(0x2bd)][_0x2d8e32];_0x57332a[_0x38972(0x47c)]&&(_0x1eda41['fone']=_0x57332a[_0x38972(0x47c)]),_0x57332a[_0x38972(0x410)]&&(_0x1eda41[_0x38972(0x410)]=_0x57332a[_0x38972(0x410)]),_0x57332a[_0x38972(0x6a5)]&&(_0x1eda41[_0x38972(0x6a5)]=_0x57332a[_0x38972(0x6a5)]),_0x57332a[_0x38972(0x3f1)]&&(_0x1eda41[_0x38972(0x3f1)]=_0x57332a['role']);}else _0x4936c9[_0x38972(0x2bd)][_0x38972(0x5ee)]({'_id':_0x57332a[_0x38972(0x1b0)]||new we[(_0x38972(0x259))]['Types'][(_0x38972(0x721))]()['toString'](),'fone':_0x57332a[_0x38972(0x47c)],'name':_0x57332a[_0x38972(0x410)],'email':_0x57332a[_0x38972(0x6a5)],'role':_0x57332a[_0x38972(0x3f1)]});}let _0x5926cf={'agents':_0x4936c9[_0x38972(0x2bd)]},_0x4b8855=await this['repository']['automateSystem']['update'](_0x5926cf,this[_0x38972(0x753)][_0x38972(0x6e4)]);return this['AutomateSystem']=_0x4b8855,this[_0x38972(0x39e)][_0x38972(0x48f)](this[_0x38972(0x653)]+'\x20('+this[_0x38972(0x753)]['wuid']+_0x38972(0x315)),this[_0x38972(0x39e)]['verbose'](this[_0x38972(0x653)]+'\x20('+this['instance'][_0x38972(0x6e4)]+'):\x20'+this['AutomateSystem']),_0x4b8855;}catch(_0x16b0f1){let _0x4ba6d1=_0x38972(0x703),_0x9753ba=_0x16b0f1 instanceof Error?_0x16b0f1[_0x38972(0x33a)]:typeof _0x16b0f1==_0x38972(0x41e)?JSON[_0x38972(0x718)](_0x16b0f1):_0x16b0f1,_0xcc4612=_0x4ba6d1+':\x20'+_0x9753ba;throw this[_0x38972(0x39e)][_0x38972(0x723)](this[_0x38972(0x653)]+'\x20('+this[_0x38972(0x753)]['wuid']+_0x38972(0x17d)+_0xcc4612),new m(_0xcc4612);}}async[a0_0x37fa70(0x53d)](_0x31551e){const _0x139b50=a0_0x37fa70;try{let _0x241a02=await this[_0x139b50(0x210)][_0x139b50(0x2f8)]['findOrCreate'](this[_0x139b50(0x753)][_0x139b50(0x6e4)]),_0x56dce6=_0x31551e[_0x139b50(0x1b0)]?_0x241a02[_0x139b50(0x78b)][_0x139b50(0x708)](_0x29476f=>_0x29476f[_0x139b50(0x1b0)]===_0x31551e[_0x139b50(0x1b0)]):-0x1,_0x46714c=!0x1,_0x552c22=_0x241a02[_0x139b50(0x78b)]['some'](_0x351b96=>_0x351b96[_0x139b50(0x11e)]===_0x31551e['order']);if(_0x31551e['delete']&&_0x56dce6>-0x1)_0x241a02[_0x139b50(0x78b)][_0x139b50(0x685)](_0x56dce6,0x1),_0x46714c=!0x0;else{if(_0x56dce6>-0x1){if(_0x241a02[_0x139b50(0x78b)][_0x139b50(0xa6)](_0x123686=>_0x123686[_0x139b50(0x410)]===_0x31551e[_0x139b50(0x410)]&&_0x123686['_id']!==_0x31551e[_0x139b50(0x1b0)]))throw new Error(_0x139b50(0x593));let _0xdbb8e=_0x241a02['customFields'][_0x56dce6];_0x31551e[_0x139b50(0x11e)]&&(_0x552c22||!Number[_0x139b50(0x522)](_0x31551e['order']))&&(_0xdbb8e[_0x139b50(0x11e)]=_0x31551e[_0x139b50(0x11e)],_0x46714c=!0x0),_0x31551e[_0x139b50(0x410)]&&(_0xdbb8e[_0x139b50(0x410)]=_0x31551e[_0x139b50(0x410)]);}else{if(_0x241a02['customFields'][_0x139b50(0xa6)](_0x465382=>_0x465382[_0x139b50(0x410)]===_0x31551e[_0x139b50(0x410)]&&_0x465382[_0x139b50(0x1b0)]!==_0x31551e[_0x139b50(0x1b0)]))throw new Error(_0x139b50(0x593));_0x241a02[_0x139b50(0x78b)]['push']({'_id':_0x31551e[_0x139b50(0x1b0)]||new we[(_0x139b50(0x259))][(_0x139b50(0x4ce))]['ObjectId']()['toString'](),'order':_0x31551e[_0x139b50(0x11e)],'name':_0x31551e[_0x139b50(0x410)]}),_0x46714c=!0x0;}}if(_0x46714c){_0x241a02[_0x139b50(0x78b)][_0x139b50(0x31a)]((_0x1c3802,_0x6516cd)=>_0x1c3802[_0x139b50(0x11e)]>_0x6516cd['order']?0x1:_0x6516cd['order']>_0x1c3802['order']?-0x1:0x0);for(let _0x5797dc=0x0;_0x5797dc<_0x241a02[_0x139b50(0x78b)][_0x139b50(0x426)];_0x5797dc++)_0x241a02['customFields'][_0x5797dc][_0x139b50(0x11e)]=_0x5797dc+0x1;}let _0x138c76=await this[_0x139b50(0x210)][_0x139b50(0x2f8)][_0x139b50(0x6c8)](_0x241a02,this[_0x139b50(0x753)][_0x139b50(0x6e4)]);return this[_0x139b50(0x1db)]=_0x138c76,this['logger'][_0x139b50(0x48f)](this[_0x139b50(0x653)]+'\x20('+this['instance'][_0x139b50(0x6e4)]+'):\x20debug\x20alterando\x20this.AutomateSystem'),this['logger'][_0x139b50(0x48f)](this['instanceName']+'\x20('+this[_0x139b50(0x753)][_0x139b50(0x6e4)]+_0x139b50(0x17d)+this[_0x139b50(0x1db)]),_0x138c76;}catch(_0x4938f2){let _0x59f8df='Erro\x20ao\x20tentar\x20updateCustomFields',_0x25805d=_0x4938f2 instanceof Error?_0x4938f2['message']:typeof _0x4938f2=='object'?JSON[_0x139b50(0x718)](_0x4938f2):_0x4938f2,_0x45845b=_0x59f8df+':\x20'+_0x25805d;throw this[_0x139b50(0x39e)][_0x139b50(0x723)](this[_0x139b50(0x653)]+'\x20('+this[_0x139b50(0x753)][_0x139b50(0x6e4)]+_0x139b50(0x17d)+_0x45845b),new m(_0x45845b);}}async['updateAutoCompleteMessages'](_0x8bc6e0){const _0x57a27d=a0_0x37fa70;try{let _0x3d77b9=await this[_0x57a27d(0x210)][_0x57a27d(0x2f8)][_0x57a27d(0xa4)](this[_0x57a27d(0x753)][_0x57a27d(0x6e4)]),_0x18faed=_0x3d77b9?.[_0x57a27d(0x683)]?.[_0x57a27d(0x708)](_0x261336=>_0x261336[_0x57a27d(0x1b0)]===_0x8bc6e0?.[_0x57a27d(0x1b0)]);if(_0x8bc6e0?.[_0x57a27d(0x6ad)])_0x18faed>-0x1&&_0x3d77b9?.[_0x57a27d(0x683)]?.[_0x57a27d(0x685)](_0x18faed,0x1);else{if(_0x18faed>-0x1){let _0x334a9a=_0x3d77b9[_0x57a27d(0x683)][_0x18faed];_0x334a9a[_0x57a27d(0x11e)]=_0x8bc6e0?.[_0x57a27d(0x11e)]||_0x334a9a[_0x57a27d(0x11e)],_0x334a9a[_0x57a27d(0x501)]=_0x8bc6e0?.[_0x57a27d(0x501)]||_0x334a9a[_0x57a27d(0x501)],_0x334a9a[_0x57a27d(0x33a)]=_0x8bc6e0?.['message']||_0x334a9a['message'];}else{let _0xb01986={'_id':_0x8bc6e0?.['_id']||new we['default'][(_0x57a27d(0x4ce))]['ObjectId']()['toString'](),'order':_0x8bc6e0?.[_0x57a27d(0x11e)],'command':_0x8bc6e0?.['command'],'message':_0x8bc6e0?.[_0x57a27d(0x33a)]};_0x3d77b9?.['autoCompleteMessages']?.[_0x57a27d(0x5ee)](_0xb01986);}}_0x3d77b9?.['autoCompleteMessages']?.[_0x57a27d(0x31a)]((_0xd7250,_0x356e6d)=>_0xd7250[_0x57a27d(0x11e)]-_0x356e6d['order']);let _0x1c3e08=await this[_0x57a27d(0x210)][_0x57a27d(0x2f8)][_0x57a27d(0x6c8)](_0x3d77b9,this[_0x57a27d(0x753)]['wuid']);return this[_0x57a27d(0x1db)]=_0x1c3e08,this['logger'][_0x57a27d(0x48f)](this[_0x57a27d(0x653)]+'\x20('+this['instance'][_0x57a27d(0x6e4)]+_0x57a27d(0x746)),_0x1c3e08;}catch(_0x1b4bce){let _0x3765cc=_0x57a27d(0x62a),_0x550947=_0x1b4bce instanceof Error?_0x1b4bce[_0x57a27d(0x33a)]:typeof _0x1b4bce==_0x57a27d(0x41e)?JSON['stringify'](_0x1b4bce):_0x1b4bce,_0x50cb26=_0x3765cc+':\x20'+_0x550947;throw this[_0x57a27d(0x39e)][_0x57a27d(0x723)](this[_0x57a27d(0x653)]+'\x20('+this[_0x57a27d(0x753)]['wuid']+_0x57a27d(0x17d)+_0x50cb26),new m(_0x50cb26);}}async[a0_0x37fa70(0x49a)](_0x5a477a){const _0x13885f=a0_0x37fa70;try{let _0xa3bc79=await this['repository'][_0x13885f(0x2f8)][_0x13885f(0xa4)](this['instance'][_0x13885f(0x6e4)]);if(!_0xa3bc79)throw new Error('Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.');let _0x2cd6a8={'_id':_0xa3bc79[_0x13885f(0x1b0)],'flowConfig':{'enabled':_0x5a477a[_0x13885f(0x104)]??_0xa3bc79['flowConfig']['enabled'],'ignoreGroups':_0x5a477a[_0x13885f(0x772)]??_0xa3bc79[_0x13885f(0x67c)]['ignoreGroups'],'stopConversation':_0x5a477a[_0x13885f(0x6c6)][_0x13885f(0x6ba)]()??_0xa3bc79[_0x13885f(0x67c)][_0x13885f(0x6c6)][_0x13885f(0x6ba)](),'stopMinutes':_0x5a477a[_0x13885f(0x219)]??_0xa3bc79[_0x13885f(0x67c)][_0x13885f(0x219)],'stopWhenYouSendMsg':_0x5a477a['stopWhenYouSendMsg']??_0xa3bc79['flowConfig'][_0x13885f(0x479)]}},_0x57dafa=await this[_0x13885f(0x210)][_0x13885f(0x2f8)][_0x13885f(0x6c8)](_0x2cd6a8,this[_0x13885f(0x753)][_0x13885f(0x6e4)]);return this[_0x13885f(0x1db)]=_0x57dafa,this[_0x13885f(0x39e)][_0x13885f(0x48f)](this[_0x13885f(0x653)]+'\x20('+this[_0x13885f(0x753)][_0x13885f(0x6e4)]+_0x13885f(0x315)),this[_0x13885f(0x39e)][_0x13885f(0x48f)](this['instanceName']+'\x20('+this[_0x13885f(0x753)][_0x13885f(0x6e4)]+_0x13885f(0x17d)+this[_0x13885f(0x1db)]),setTimeout(()=>this[_0x13885f(0x715)](),0x7d0),_0x57dafa;}catch(_0x1217ff){let _0x6149bf='Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos',_0x8433b8=_0x1217ff instanceof Error?_0x1217ff[_0x13885f(0x33a)]:typeof _0x1217ff==_0x13885f(0x41e)?JSON['stringify'](_0x1217ff):_0x1217ff,_0xda6f25=_0x6149bf+':\x20'+_0x8433b8;throw this[_0x13885f(0x39e)][_0x13885f(0x723)](this[_0x13885f(0x653)]+'\x20('+this[_0x13885f(0x753)][_0x13885f(0x6e4)]+_0x13885f(0x17d)+_0xda6f25),new m(_0xda6f25);}}async[a0_0x37fa70(0x2b1)](){const _0x16e533=a0_0x37fa70;try{let _0xd49c53=await this[_0x16e533(0x210)][_0x16e533(0x2f8)][_0x16e533(0xa4)](this['instance']['wuid']);return this['AutomateSystem']=_0xd49c53,_0xd49c53;}catch(_0x467761){let _0x3cdfb0=_0x16e533(0x23f),_0x436481=_0x467761 instanceof Error?_0x467761[_0x16e533(0x33a)]:typeof _0x467761==_0x16e533(0x41e)?JSON[_0x16e533(0x718)](_0x467761):_0x467761,_0x406ff1=_0x3cdfb0+':\x20'+_0x436481;throw this[_0x16e533(0x39e)][_0x16e533(0x723)](this['instanceName']+'\x20('+this['instance'][_0x16e533(0x6e4)]+_0x16e533(0x17d)+_0x406ff1),new m(_0x406ff1);}}async[a0_0x37fa70(0x1b3)](){const _0x26bc7f=a0_0x37fa70;this[_0x26bc7f(0x753)][_0x26bc7f(0x69c)][_0x26bc7f(0x46e)]&&clearTimeout(this['instance']['ScheduleMessage']['timeout']),this['instance']['ScheduleMessage'][_0x26bc7f(0x46e)]=setTimeout(()=>{this['checkAndRestartProcess']();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x37fa70(0x334)](){const _0x43472c=a0_0x37fa70;Date[_0x43472c(0x5cf)]()-this[_0x43472c(0x753)]['ScheduleMessage']['lastSend']>=0x1d4c0&&(this[_0x43472c(0x39e)][_0x43472c(0x48f)](this['instanceName']+'\x20('+this['instance'][_0x43472c(0x6e4)]+_0x43472c(0x169)),this['instance'][_0x43472c(0x69c)]['processingGroup_id']=null,this[_0x43472c(0x753)][_0x43472c(0x69c)][_0x43472c(0x672)]=0x0,this[_0x43472c(0x753)]['ScheduleMessage'][_0x43472c(0x37f)]=0x0,this[_0x43472c(0x119)]=[],this[_0x43472c(0x29b)]=null,this[_0x43472c(0x1d5)]=null,await this[_0x43472c(0x715)]());}async[a0_0x37fa70(0x715)](){const _0x5afe46=a0_0x37fa70;let _0x3937a0=!0x1;this[_0x5afe46(0x119)]=[],this['nextMessageId']=null,this['processUUID']=(0x0,Q['v4'])(),await this[_0x5afe46(0x294)]();let _0x5ab87c=()=>{const _0x1d3406=_0x5afe46;this[_0x1d3406(0x39e)][_0x1d3406(0x48f)](this[_0x1d3406(0x653)]+'\x20('+this[_0x1d3406(0x753)][_0x1d3406(0x6e4)]+'):\x20this.processingGroup_id:\x20'+this[_0x1d3406(0x753)][_0x1d3406(0x69c)][_0x1d3406(0x1f0)]+_0x1d3406(0xbf));},_0x36dd97=async()=>{const _0x238c67=_0x5afe46;this['logger'][_0x238c67(0x48f)](this['instanceName']+'\x20('+this[_0x238c67(0x753)][_0x238c67(0x6e4)]+'):\x20Procurando\x20mensagens\x20para\x20envio');let _0x30be11=Date[_0x238c67(0x5cf)]()-0xc*0x3c*0x3c*0x3e8,_0x330526={'where':{'status':{'$in':[_0x238c67(0x4ff),_0x238c67(0x113)]},'$or':[{'when':{'$lte':Date[_0x238c67(0x5cf)](),'$gte':_0x30be11}},{'when':0x0}]}};return await this[_0x238c67(0x210)][_0x238c67(0x2b4)][_0x238c67(0x3b4)](_0x330526,this[_0x238c67(0x753)][_0x238c67(0x6e4)]);},_0x58543b=async _0x27f286=>{const _0x151f2d=_0x5afe46;let _0x53dcdd=await this[_0x151f2d(0x210)][_0x151f2d(0x2b4)][_0x151f2d(0x4a5)](_0x27f286,this[_0x151f2d(0x753)][_0x151f2d(0x6e4)]);this[_0x151f2d(0x119)]=_0x53dcdd[_0x151f2d(0x6fb)][_0x151f2d(0x1c2)](_0x59447f=>!_0x59447f[_0x151f2d(0x73c)]);},_0x505d6a=async _0x41cc70=>{const _0x52a9ab=_0x5afe46;let _0x2850bb=Math[_0x52a9ab(0x431)](Math[_0x52a9ab(0x6f5)]()*0x1389)+0xbb8;for(let _0x5242fe of _0x41cc70){let _0x10ce44={'_id':_0x5242fe['_id'],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x52a9ab(0x5cf)]()-0x2710}}]},_0x1758f8={'startSend':Date['now'](),'processUUID':this[_0x52a9ab(0x1d5)]};if(!await this[_0x52a9ab(0x210)][_0x52a9ab(0x2b4)][_0x52a9ab(0x130)](_0x10ce44,_0x1758f8,this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)]))return;if(!this[_0x52a9ab(0x753)][_0x52a9ab(0x69c)][_0x52a9ab(0x17b)]){this[_0x52a9ab(0x39e)][_0x52a9ab(0x48f)](this[_0x52a9ab(0x653)]+'\x20('+this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)]+_0x52a9ab(0x56c));break;}for((this[_0x52a9ab(0x119)][_0x52a9ab(0x426)]===0x0||!_0x3937a0)&&await _0x58543b(_0x5242fe[_0x52a9ab(0x1b0)]);this[_0x52a9ab(0x119)][_0x52a9ab(0x426)]>0x0||!_0x3937a0;){await this[_0x52a9ab(0x1b3)]();let _0x1d9b5a=this[_0x52a9ab(0x119)]['reduce']((_0x5b02d3,_0x3030fd)=>(_0x5b02d3[_0x52a9ab(0x11e)]??Number[_0x52a9ab(0x6cb)])<(_0x3030fd['order']??Number[_0x52a9ab(0x6cb)])?_0x5b02d3:_0x3030fd);if(!_0x1d9b5a)continue;if(this[_0x52a9ab(0x29b)]&&this[_0x52a9ab(0x29b)]!==_0x1d9b5a[_0x52a9ab(0x1b0)]){this[_0x52a9ab(0x39e)][_0x52a9ab(0x48f)](this[_0x52a9ab(0x653)]+'\x20('+this['instance']['wuid']+'):\x20Detecção\x20de\x20condição\x20de\x20corrida,\x20a\x20mensagem\x20'+_0x1d9b5a['_id']+_0x52a9ab(0x668));break;}if(this[_0x52a9ab(0x29b)]=_0x1d9b5a[_0x52a9ab(0x1b0)],this['instance']['ScheduleMessage']['lastSend']=Date[_0x52a9ab(0x5cf)](),this['instance'][_0x52a9ab(0x69c)][_0x52a9ab(0xad)]===_0x1d9b5a[_0x52a9ab(0x1b0)]){this[_0x52a9ab(0x39e)][_0x52a9ab(0x723)](this[_0x52a9ab(0x653)]+'\x20('+this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20para\x20'+_0x1d9b5a[_0x52a9ab(0x1b0)]+_0x52a9ab(0x23e));continue;}if(this[_0x52a9ab(0x753)]['ScheduleMessage'][_0x52a9ab(0xad)]=_0x1d9b5a[_0x52a9ab(0x1b0)],_0x1d9b5a['triedToSend']){this[_0x52a9ab(0x39e)][_0x52a9ab(0x48f)](this[_0x52a9ab(0x653)]+'\x20('+this[_0x52a9ab(0x753)]['wuid']+'):\x20Mensagem\x20já\x20enviada\x20para\x20'+_0x1d9b5a[_0x52a9ab(0x6a8)]+_0x52a9ab(0x2e5));continue;}if(!this[_0x52a9ab(0x753)][_0x52a9ab(0x69c)][_0x52a9ab(0x17b)]){this[_0x52a9ab(0x39e)]['verbose'](this[_0x52a9ab(0x653)]+'\x20('+this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)]+_0x52a9ab(0x5ca));break;}if(!this[_0x52a9ab(0x753)]['ScheduleMessage']['processingGroup_id']){this['logger'][_0x52a9ab(0x48f)](this[_0x52a9ab(0x653)]+'\x20('+this['instance'][_0x52a9ab(0x6e4)]+_0x52a9ab(0x518)+_0x5242fe[_0x52a9ab(0x1b0)]+'\x20foi\x20interrompido\x20pelo\x20usuário.');break;}if(_0x1d9b5a[_0x52a9ab(0x519)]===_0x52a9ab(0x407)&&!this[_0x52a9ab(0x1db)]?.[_0x52a9ab(0x67c)][_0x52a9ab(0x104)]){this[_0x52a9ab(0x39e)]['error'](this[_0x52a9ab(0x653)]+'\x20('+this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)]+_0x52a9ab(0x162));break;}let _0x184545={'idControl':_0x1d9b5a[_0x52a9ab(0x1b0)],'remoteJid':_0x1d9b5a[_0x52a9ab(0x6a8)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date[_0x52a9ab(0x5cf)]()},_0xe980b5=null;try{this['logger'][_0x52a9ab(0x48f)](this[_0x52a9ab(0x653)]+'\x20('+this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)]+_0x52a9ab(0x458)+_0x1d9b5a[_0x52a9ab(0x6a8)]);let _0x5c7d8b=await this[_0x52a9ab(0x406)](_0x1d9b5a[_0x52a9ab(0x6a8)],_0x1d9b5a);_0x184545[_0x52a9ab(0x723)]=_0x5c7d8b['error'],_0x184545['id']=_0x5c7d8b[_0x52a9ab(0x723)]?null:_0x5c7d8b['id'],_0x184545[_0x52a9ab(0xb0)]=_0x5c7d8b['error']?_0x5c7d8b[_0x52a9ab(0x54f)]?_0x5c7d8b[_0x52a9ab(0x54f)][_0x52a9ab(0x2c5)]():'':null;let _0x45d053=_0x5242fe[_0x52a9ab(0x6fb)]['findIndex'](_0x34f082=>_0x34f082[_0x52a9ab(0x1b0)]===_0x1d9b5a[_0x52a9ab(0x1b0)]);_0x45d053!==-0x1&&(_0x5242fe[_0x52a9ab(0x6fb)][_0x45d053]['triedToSend']=!0x0);let _0x1cf4d3={'$push':{'messagesSend':_0x184545},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x5de4be=[{'elem._id':_0x1d9b5a[_0x52a9ab(0x1b0)]}];if(this[_0x52a9ab(0x39e)][_0x52a9ab(0x48f)](this[_0x52a9ab(0x653)]+'\x20('+this['instance']['wuid']+_0x52a9ab(0x389)+_0x1d9b5a[_0x52a9ab(0x1b0)]),_0xe980b5=await this[_0x52a9ab(0x210)][_0x52a9ab(0x2b4)][_0x52a9ab(0x130)]({'_id':_0x5242fe[_0x52a9ab(0x1b0)]},_0x1cf4d3,this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)],{'arrayFilters':_0x5de4be}),_0x5c7d8b[_0x52a9ab(0x723)]){this[_0x52a9ab(0x39e)][_0x52a9ab(0x723)](this['instanceName']+'\x20('+this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)]+'):\x20Erro\x20ao\x20enviar\x20mensagem:\x20'+_0x5c7d8b[_0x52a9ab(0x54f)]);continue;}let _0x22bcdf=this[_0x52a9ab(0x24f)](_0x5242fe[_0x52a9ab(0x492)],_0x5242fe[_0x52a9ab(0x4ea)]);await this[_0x52a9ab(0x5e9)](_0x22bcdf);}catch(_0x4a9377){this['logger']['error'](this[_0x52a9ab(0x653)]+'\x20('+this[_0x52a9ab(0x753)]['wuid']+_0x52a9ab(0x166)+_0x1d9b5a['remoteJid']+':\x20'+(_0x4a9377 instanceof Error?_0x4a9377['message']:JSON[_0x52a9ab(0x718)](_0x4a9377,null,0x2))),_0x184545[_0x52a9ab(0x723)]=!0x0,_0x184545[_0x52a9ab(0xb0)]=_0x4a9377[_0x52a9ab(0x33a)];let _0x1434a0=_0x5242fe['messages'][_0x52a9ab(0x708)](_0x1643fb=>_0x1643fb[_0x52a9ab(0x1b0)]===_0x1d9b5a['_id']);_0x1434a0!==-0x1&&(_0x5242fe[_0x52a9ab(0x6fb)][_0x1434a0][_0x52a9ab(0x73c)]=!0x0);let _0x43a71a={'$push':{'messagesSend':_0x184545},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x2528a8=[{'elem._id':_0x1d9b5a[_0x52a9ab(0x1b0)]}];this[_0x52a9ab(0x39e)]['verbose'](this['instanceName']+'\x20('+this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)]+'):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20'+_0x1d9b5a[_0x52a9ab(0x1b0)]),_0xe980b5=await this[_0x52a9ab(0x210)][_0x52a9ab(0x2b4)][_0x52a9ab(0x130)]({'_id':_0x5242fe[_0x52a9ab(0x1b0)]},_0x43a71a,this['instance'][_0x52a9ab(0x6e4)],{'arrayFilters':_0x2528a8});}finally{if(_0xe980b5&&_0xe980b5[_0x52a9ab(0x4c1)]===_0x52a9ab(0x658)){this[_0x52a9ab(0x39e)][_0x52a9ab(0x48f)](this[_0x52a9ab(0x653)]+'\x20('+this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)]+_0x52a9ab(0x518)+_0x1d9b5a[_0x52a9ab(0x1b0)]+_0x52a9ab(0x309));break;}let _0x1cbc9a=_0xe980b5[_0x52a9ab(0x6fb)]['find'](_0x1b0b4c=>_0x1b0b4c[_0x52a9ab(0x1b0)]===_0x1d9b5a['_id']);if(_0x1cbc9a&&!_0x1cbc9a[_0x52a9ab(0x73c)]){let _0x553205={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x4a1db6=[{'elem._id':_0x1d9b5a['_id']}];await this['repository'][_0x52a9ab(0x2b4)][_0x52a9ab(0x130)]({'_id':_0xe980b5[_0x52a9ab(0x1b0)]},_0x553205,this[_0x52a9ab(0x753)]['wuid'],{'arrayFilters':_0x4a1db6});}if(this[_0x52a9ab(0x119)]=_0xe980b5[_0x52a9ab(0x6fb)][_0x52a9ab(0x1c2)](_0x53dd90=>!_0x53dd90[_0x52a9ab(0x73c)]),_0x3937a0=this[_0x52a9ab(0x119)][_0x52a9ab(0x426)]===0x0,this[_0x52a9ab(0x29b)]=this[_0x52a9ab(0x119)][_0x52a9ab(0x426)]>0x0?this['pendingMessages'][_0x52a9ab(0x221)]((_0x3c0e9d,_0x1bb1ac)=>(_0x3c0e9d['order']??Number[_0x52a9ab(0x6cb)])<(_0x1bb1ac['order']??Number[_0x52a9ab(0x6cb)])?_0x3c0e9d:_0x1bb1ac)[_0x52a9ab(0x1b0)]:null,_0xe980b5[_0x52a9ab(0x1d5)]!==this[_0x52a9ab(0x1d5)]){this[_0x52a9ab(0x39e)][_0x52a9ab(0x48f)](this[_0x52a9ab(0x653)]+'\x20('+this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)]+'):\x20Envio\x20interrompido\x20devido\x20a\x20UUID\x20de\x20processo\x20não\x20corresponder.');break;}}}this[_0x52a9ab(0x119)]=[],this[_0x52a9ab(0x29b)]=null;let _0x516d8c=await this['repository'][_0x52a9ab(0x2b4)][_0x52a9ab(0x4a5)](_0x5242fe[_0x52a9ab(0x1b0)],this['instance'][_0x52a9ab(0x6e4)]);if(_0x3937a0=_0x516d8c[_0x52a9ab(0x6fb)][_0x52a9ab(0x234)](_0x318929=>_0x318929[_0x52a9ab(0x73c)]),_0x3937a0&&_0x516d8c['status']!==_0x52a9ab(0x658)){this['instance'][_0x52a9ab(0x69c)][_0x52a9ab(0xad)]=null;let _0x1c6cf0={'$set':{'status':_0x52a9ab(0x6d1)}};await this['repository'][_0x52a9ab(0x2b4)][_0x52a9ab(0x443)](_0x516d8c[_0x52a9ab(0x1b0)],_0x1c6cf0,this[_0x52a9ab(0x753)][_0x52a9ab(0x6e4)]);}await new Promise(_0x3ea9de=>setTimeout(_0x3ea9de,_0x2850bb));}this[_0x52a9ab(0x119)]=[],this[_0x52a9ab(0x29b)]=null,this['processUUID']=null;},_0x284fc5=async()=>{const _0x5d12c4=_0x5afe46;let _0x325924={'where':{'status':_0x5d12c4(0x4ff),'when':{'$gt':Date[_0x5d12c4(0x5cf)]()}}},_0x321548=await this[_0x5d12c4(0x210)][_0x5d12c4(0x2b4)][_0x5d12c4(0x1e2)](_0x325924,this[_0x5d12c4(0x753)][_0x5d12c4(0x6e4)]);_0x321548&&_0x321548[_0x5d12c4(0x4f0)]-Date[_0x5d12c4(0x5cf)]()<=0x5265c00?this[_0x5d12c4(0x753)][_0x5d12c4(0x69c)][_0x5d12c4(0x37f)]=_0x321548['when']-Date['now']():this['instance'][_0x5d12c4(0x69c)]['delayMessage']=(0x3c+Math[_0x5d12c4(0x431)](Math[_0x5d12c4(0x6f5)]()*0x3c))*0x3c*0x3e8,this['instance']['ScheduleMessage'][_0x5d12c4(0x37f)]=Math[_0x5d12c4(0x453)](this[_0x5d12c4(0x753)][_0x5d12c4(0x69c)]['delayMessage'],0x1*0x2*0x3e8);let _0x19fd6d=Math[_0x5d12c4(0x478)](this[_0x5d12c4(0x753)][_0x5d12c4(0x69c)]['delayMessage']/0xea60);if(_0x321548){let _0x593c02=new Date(_0x321548[_0x5d12c4(0x4f0)])['toLocaleString']();this[_0x5d12c4(0x39e)][_0x5d12c4(0x48f)](this['instanceName']+'\x20('+this[_0x5d12c4(0x753)][_0x5d12c4(0x6e4)]+_0x5d12c4(0x374)+_0x593c02+_0x5d12c4(0x47a)+_0x19fd6d+_0x5d12c4(0x21c));}else this[_0x5d12c4(0x39e)][_0x5d12c4(0x48f)](this[_0x5d12c4(0x653)]+'\x20('+this[_0x5d12c4(0x753)]['wuid']+_0x5d12c4(0x2ec)+_0x19fd6d+_0x5d12c4(0x21c));setTimeout(()=>this[_0x5d12c4(0x715)](),this[_0x5d12c4(0x753)][_0x5d12c4(0x69c)]['delayMessage']);};if(this[_0x5afe46(0x753)][_0x5afe46(0x69c)]['processingGroup_id']){await this[_0x5afe46(0x1b3)](),_0x5ab87c();return;}if(!this['instance'][_0x5afe46(0x69c)][_0x5afe46(0x17b)]){this[_0x5afe46(0x39e)]['verbose'](this[_0x5afe46(0x653)]+'\x20('+this['instance'][_0x5afe46(0x6e4)]+_0x5afe46(0x41d)),this['instance'][_0x5afe46(0x69c)][_0x5afe46(0x1f0)]=null,this[_0x5afe46(0x753)]['ScheduleMessage']['lastSend']=0x0,this[_0x5afe46(0x753)]['ScheduleMessage'][_0x5afe46(0x37f)]=0x0,this[_0x5afe46(0x753)][_0x5afe46(0x69c)][_0x5afe46(0xad)]=null;return;}try{let _0x2aeae1=await _0x36dd97();_0x2aeae1[_0x5afe46(0x426)]===0x0?this['logger'][_0x5afe46(0x48f)](this[_0x5afe46(0x653)]+'\x20('+this[_0x5afe46(0x753)][_0x5afe46(0x6e4)]+_0x5afe46(0x3b1)):(this[_0x5afe46(0x753)][_0x5afe46(0x69c)][_0x5afe46(0x1f0)]=_0x2aeae1[0x0][_0x5afe46(0x1b0)],await _0x505d6a(_0x2aeae1)),await _0x284fc5(),this[_0x5afe46(0x753)][_0x5afe46(0x69c)][_0x5afe46(0x1f0)]=null,this['instance'][_0x5afe46(0x69c)][_0x5afe46(0xad)]=null;}catch(_0xd84d33){this[_0x5afe46(0x39e)][_0x5afe46(0x723)](_0x5afe46(0x404)+(_0xd84d33 instanceof Error?_0xd84d33[_0x5afe46(0x33a)]:JSON[_0x5afe46(0x718)](_0xd84d33,null,0x2)));}}[a0_0x37fa70(0x24f)](_0x1c2039,_0x568a00){const _0x5c24ca=a0_0x37fa70;return _0x1c2039=Math[_0x5c24ca(0x453)](0.5,_0x1c2039),_0x568a00=Math[_0x5c24ca(0x6e)](Math['max'](0x3,_0x568a00),0x78),Math[_0x5c24ca(0x431)](Math[_0x5c24ca(0x6f5)]()*(_0x568a00-_0x1c2039+0x1)+_0x1c2039)*0x3e8;}[a0_0x37fa70(0x5e9)](_0x474130){return new Promise(_0x188ab8=>setTimeout(_0x188ab8,_0x474130));}async[a0_0x37fa70(0x19e)](_0x51794d){const _0x35312d=a0_0x37fa70;if(!this[_0x35312d(0x1db)]&&(await this[_0x35312d(0x2b1)](),!this[_0x35312d(0x1db)]))return null;_0x51794d=this[_0x35312d(0x342)](_0x51794d);let _0x41ea5a=await this[_0x35312d(0x210)][_0x35312d(0x4a2)][_0x35312d(0x1e2)]({'where':{'_id':_0x51794d}},this[_0x35312d(0x753)][_0x35312d(0x6e4)]),_0x2125fd={};if(_0x41ea5a&&_0x41ea5a[_0x35312d(0x500)]){let _0x9d0d87=_0x41ea5a[_0x35312d(0x500)];typeof _0x9d0d87[_0x35312d(0x2c4)]=='string'&&(_0x2125fd['nome']=_0x9d0d87[_0x35312d(0x2c4)]),typeof _0x9d0d87[_0x35312d(0x246)]=='string'&&(_0x2125fd[_0x35312d(0x246)]=_0x9d0d87[_0x35312d(0x246)]),typeof _0x9d0d87['email']==_0x35312d(0x615)&&(_0x2125fd[_0x35312d(0x6a5)]=_0x9d0d87[_0x35312d(0x6a5)]),typeof _0x9d0d87[_0x35312d(0x91)]==_0x35312d(0x615)&&(_0x2125fd[_0x35312d(0x91)]=_0x9d0d87[_0x35312d(0x91)]),typeof _0x9d0d87[_0x35312d(0x4c1)]==_0x35312d(0x615)&&(_0x2125fd[_0x35312d(0x4c1)]=_0x9d0d87['status']),typeof _0x9d0d87[_0x35312d(0x65a)]==_0x35312d(0x615)&&(_0x2125fd['notas']=_0x9d0d87[_0x35312d(0x65a)]),typeof _0x9d0d87[_0x35312d(0xfd)]==_0x35312d(0x615)&&(_0x2125fd[_0x35312d(0xfd)]=_0x9d0d87[_0x35312d(0xfd)]),Array[_0x35312d(0x72)](_0x9d0d87[_0x35312d(0x38c)])&&(_0x2125fd[_0x35312d(0x38c)]=_0x9d0d87[_0x35312d(0x38c)][_0x35312d(0x114)](',\x20')),Array['isArray'](_0x9d0d87[_0x35312d(0x7b2)])&&(_0x2125fd[_0x35312d(0x7b2)]=_0x9d0d87[_0x35312d(0x7b2)][_0x35312d(0x114)](',\x20'));}return _0x41ea5a&&_0x41ea5a[_0x35312d(0x500)]&&_0x41ea5a[_0x35312d(0x500)][_0x35312d(0x78b)]&&_0x41ea5a[_0x35312d(0x500)]['customFields']['forEach'](_0x12ce28=>{const _0x67b2e5=_0x35312d;let _0x43be4f=this[_0x67b2e5(0x1db)]?.[_0x67b2e5(0x78b)][_0x67b2e5(0x3b4)](_0x1e3a4d=>_0x1e3a4d[_0x67b2e5(0x1b0)]===_0x12ce28[_0x67b2e5(0x1b0)]);_0x43be4f&&(_0x2125fd[_0x43be4f[_0x67b2e5(0x410)]]=_0x12ce28[_0x67b2e5(0x3b2)]);}),_0x2125fd;}async[a0_0x37fa70(0x70)](_0x1979f4,_0x57a81b){const _0x22982c=a0_0x37fa70;try{let _0x46140f=await this[_0x22982c(0x19e)](_0x57a81b);return this[_0x22982c(0x68a)](_0x1979f4,_0x46140f);}catch(_0x34b7c8){return this[_0x22982c(0x39e)][_0x22982c(0x723)](_0x22982c(0x42b)+_0x57a81b+':\x20'+_0x34b7c8),_0x1979f4;}}async[a0_0x37fa70(0x294)](){const _0x3f9c64=a0_0x37fa70;let _0x40c400=async(_0x59a9ed,_0x353408)=>{const _0x585f7a=a0_0x58ef;let _0x371986=(await this['repository']['scheduleMessage']['find']({'where':{'type':_0x59a9ed}},this[_0x585f7a(0x753)][_0x585f7a(0x6e4)]))[_0x585f7a(0x3c4)](async _0x3ee88d=>{const _0x3dbeb7=_0x585f7a;let _0x3cefbf=_0x353408(_0x3ee88d),_0xd025ab=_0x115404=>/^\d+$/[_0x3dbeb7(0x132)](_0x115404),_0x485315=_0x3ee88d[_0x3dbeb7(0x77d)]['filter'](_0x7e6617=>_0x7e6617[_0x3dbeb7(0x78)](_0x3dbeb7(0x561))?_0x7e6617[_0x3dbeb7(0x426)]>0x19:_0x7e6617[_0x3dbeb7(0x78)](_0x3dbeb7(0x322))?_0x7e6617['length']>0xf:_0xd025ab(_0x7e6617)?_0x7e6617[_0x3dbeb7(0x426)]>=0xb:!0x1)[_0x3dbeb7(0x3c4)](_0x46b659=>({'_id':(0x0,Q['v4'])(),'type':_0x3cefbf,'remoteJid':_0x46b659,'flow':_0x3ee88d[_0x3dbeb7(0xde)],'text':_0x3ee88d['message']?.['text'],'delay':_0x3ee88d[_0x3dbeb7(0x33a)]?.[_0x3dbeb7(0xb9)],'urlOrBase64':_0x3ee88d[_0x3dbeb7(0x33a)]?.[_0x3dbeb7(0x308)],'linkPreview':_0x3ee88d[_0x3dbeb7(0x33a)]?.[_0x3dbeb7(0x761)],'fileName':_0x3ee88d[_0x3dbeb7(0x33a)]?.[_0x3dbeb7(0x765)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x3dbeb7(0x210)][_0x3dbeb7(0x2b4)][_0x3dbeb7(0x443)](_0x3ee88d['_id'],{'$set':{'messages':_0x485315},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x3dbeb7(0x753)]['wuid']);}catch(_0x51d88a){console['error'](_0x3dbeb7(0x398)+_0x3ee88d[_0x3dbeb7(0x1b0)]+':',_0x51d88a);}});await Promise[_0x585f7a(0x1ea)](_0x371986);};await _0x40c400(_0x3f9c64(0x403),_0x4e216f=>_0x3f9c64(0x403)),await _0x40c400(_0x3f9c64(0x435),_0x480833=>_0x480833[_0x3f9c64(0x33a)]?.['mediatype']||'media'),await _0x40c400(_0x3f9c64(0x1a9),_0x214a8c=>_0x3f9c64(0x1a9)),await _0x40c400('flow',_0x24a51d=>_0x3f9c64(0x407)),await _0x40c400(_0x3f9c64(0x1b2),_0xf2055d=>'image'),await _0x40c400(_0x3f9c64(0x65c),_0x56f46b=>_0x3f9c64(0x65c)),await _0x40c400(_0x3f9c64(0x5be),_0x5ca35d=>_0x3f9c64(0x5be)),this['logger']['verbose'](this[_0x3f9c64(0x653)]+'\x20('+this[_0x3f9c64(0x753)]['wuid']+_0x3f9c64(0x174));}async['editScheduleMessage'](_0x5ab051){const _0x16352d=a0_0x37fa70;try{if(this[_0x16352d(0x39e)]['verbose'](this[_0x16352d(0x653)]+'\x20('+this['instance']['wuid']+_0x16352d(0x452)),_0x5ab051[_0x16352d(0x1b0)]||(_0x5ab051['_id']=(0x0,Q['v4'])()),this[_0x16352d(0x753)][_0x16352d(0x69c)][_0x16352d(0x1f0)]===_0x5ab051[_0x16352d(0x1b0)]?.['toString']()&&_0x5ab051[_0x16352d(0x4c1)]!=='stopped')throw new Error('Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.');if(_0x5ab051[_0x16352d(0x6ad)]&&_0x5ab051[_0x16352d(0x1b0)]){let _0x1ba9a3=await this['repository'][_0x16352d(0x2b4)][_0x16352d(0x730)](_0x5ab051[_0x16352d(0x1b0)],this[_0x16352d(0x753)][_0x16352d(0x6e4)]);return setTimeout(()=>this[_0x16352d(0x715)](),0x7d0),_0x1ba9a3;}let _0x4ffeb8=null;if(_0x5ab051[_0x16352d(0x1b0)]&&(_0x4ffeb8=await this[_0x16352d(0x210)]['scheduleMessage']['findById'](_0x5ab051[_0x16352d(0x1b0)],this[_0x16352d(0x753)]['wuid'])),_0x4ffeb8){let {_id:_0x234f38,owner:_0x4055ba,messages:_0x2d9424,status:_0x343a12,..._0x3f5d4a}=_0x5ab051;if(_0x2d9424){let _0x39b383=_0x2d9424[_0x16352d(0x1c2)](_0x5de220=>!_0x5de220[_0x16352d(0x1b0)]),_0x5f06cb=_0x2d9424[_0x16352d(0x1c2)](_0x4eed58=>_0x4eed58[_0x16352d(0x1b0)]&&!_0x4eed58[_0x16352d(0x6ad)]),_0x27c5bb=_0x2d9424[_0x16352d(0x1c2)](_0x4db877=>_0x4db877['_id']&&_0x4db877['delete']);if(_0x39b383[_0x16352d(0x426)]>0x0&&await this['addMessagesToGroup'](_0x5ab051[_0x16352d(0x1b0)],_0x39b383),_0x5f06cb[_0x16352d(0x426)]>0x0&&await this[_0x16352d(0x69d)]({'_id':_0x5ab051[_0x16352d(0x1b0)],'messages':_0x5f06cb}),_0x27c5bb['length']>0x0){let _0x5f184c=_0x27c5bb[_0x16352d(0x3c4)](_0x39bc0c=>({'updateOne':{'filter':{'_id':_0x5ab051['_id']},'update':{'$pull':{'messages':{'_id':_0x39bc0c[_0x16352d(0x1b0)]}}}}}));await this['repository'][_0x16352d(0x2b4)][_0x16352d(0x261)](_0x5f184c,this[_0x16352d(0x753)]['wuid']);}}let _0x500b79={'$set':_0x3f5d4a},_0x93a01=await this['repository'][_0x16352d(0x2b4)][_0x16352d(0x443)](_0x5ab051['_id'],_0x500b79,this[_0x16352d(0x753)]['wuid']);return _0x93a01&&(this[_0x16352d(0x64a)](_0x93a01[_0x16352d(0x6fb)]),await this['repository'][_0x16352d(0x2b4)][_0x16352d(0x443)](_0x93a01[_0x16352d(0x1b0)],{'$set':{'messages':_0x93a01[_0x16352d(0x6fb)]}},this[_0x16352d(0x753)]['wuid'])),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),await this[_0x16352d(0x294)](),_0x93a01;}else{_0x5ab051[_0x16352d(0x5d3)]=this[_0x16352d(0x753)][_0x16352d(0x6e4)],_0x5ab051[_0x16352d(0x6fb)]&&_0x5ab051[_0x16352d(0x6fb)][_0x16352d(0x4b7)](_0x381d13=>{const _0x882c87=_0x16352d;_0x381d13[_0x882c87(0x1b0)]||(_0x381d13[_0x882c87(0x1b0)]=(0x0,Q['v4'])()),delete _0x381d13[_0x882c87(0x73c)];});let _0x1e8918=await this[_0x16352d(0x210)]['scheduleMessage']['createAndSave'](_0x5ab051,this[_0x16352d(0x753)][_0x16352d(0x6e4)]);return _0x1e8918&&(this[_0x16352d(0x64a)](_0x1e8918['messages']),await this[_0x16352d(0x210)][_0x16352d(0x2b4)][_0x16352d(0x443)](_0x1e8918[_0x16352d(0x1b0)],{'$set':{'messages':_0x1e8918[_0x16352d(0x6fb)]}},this[_0x16352d(0x753)][_0x16352d(0x6e4)])),setTimeout(()=>this[_0x16352d(0x715)](),0x7d0),_0x1e8918;}}catch(_0x45412c){let _0x5bfbb8=_0x16352d(0x582),_0xc5071a=_0x45412c instanceof Error?_0x45412c[_0x16352d(0x33a)]:typeof _0x45412c==_0x16352d(0x41e)?JSON['stringify'](_0x45412c):_0x45412c,_0x5ea621=_0x5bfbb8+':\x20'+_0xc5071a;throw this['logger'][_0x16352d(0x723)](this['instanceName']+'\x20('+this[_0x16352d(0x753)][_0x16352d(0x6e4)]+_0x16352d(0x17d)+_0x5ea621),new m(_0x5ea621);}}async['addMessagesToGroup'](_0x3a9478,_0x900853){const _0x10472f=a0_0x37fa70;try{this[_0x10472f(0x39e)][_0x10472f(0x48f)](this[_0x10472f(0x653)]+'\x20('+this[_0x10472f(0x753)][_0x10472f(0x6e4)]+_0x10472f(0x275)),_0x900853[_0x10472f(0x4b7)](_0x421558=>{const _0x43c2aa=_0x10472f;_0x421558[_0x43c2aa(0x1b0)]||(_0x421558[_0x43c2aa(0x1b0)]=(0x0,Q['v4'])()),delete _0x421558[_0x43c2aa(0x73c)];});let _0x3c2a3d={'$push':{'messages':{'$each':_0x900853}}},_0xd8362b=await this[_0x10472f(0x210)][_0x10472f(0x2b4)]['updateOneById'](_0x3a9478,_0x3c2a3d,this[_0x10472f(0x753)][_0x10472f(0x6e4)]);return _0xd8362b&&(this['reorderMessages'](_0xd8362b['messages']),await this[_0x10472f(0x210)][_0x10472f(0x2b4)][_0x10472f(0x443)](_0xd8362b[_0x10472f(0x1b0)],{'$set':{'messages':_0xd8362b['messages']}},this[_0x10472f(0x753)][_0x10472f(0x6e4)])),_0xd8362b;}catch(_0x3a0897){let _0x1b5dde=_0x10472f(0x371),_0x363d71=_0x3a0897 instanceof Error?_0x3a0897[_0x10472f(0x33a)]:typeof _0x3a0897==_0x10472f(0x41e)?JSON[_0x10472f(0x718)](_0x3a0897):_0x3a0897,_0x4fcb51=_0x1b5dde+':\x20'+_0x363d71;throw this[_0x10472f(0x39e)][_0x10472f(0x723)](this[_0x10472f(0x653)]+'\x20('+this['instance'][_0x10472f(0x6e4)]+_0x10472f(0x17d)+_0x4fcb51),new m(_0x4fcb51);}}async[a0_0x37fa70(0x69d)](_0x51865d){const _0x351a12=a0_0x37fa70;try{if(this['logger']['verbose'](this[_0x351a12(0x653)]+'\x20('+this['instance'][_0x351a12(0x6e4)]+_0x351a12(0x5ec)),!_0x51865d[_0x351a12(0x1b0)]||!_0x51865d[_0x351a12(0x6fb)])throw new Error(_0x351a12(0x14b));let _0x163e4a=_0x51865d[_0x351a12(0x1b0)],_0x45bcd7=_0x51865d[_0x351a12(0x6fb)],_0x5cb718=_0x45bcd7['filter'](_0x902934=>!_0x902934[_0x351a12(0x6ad)])[_0x351a12(0x3c4)](_0x55d40d=>{const _0x3b5c6d=_0x351a12;let _0x1a3088=_0x55d40d[_0x3b5c6d(0x1b0)];if(!_0x1a3088)throw new Error(_0x3b5c6d(0x53b));return delete _0x55d40d['triedToSend'],{'updateOne':{'filter':{'_id':_0x163e4a,'messages._id':_0x1a3088},'update':{'$set':{'messages.$[elem]':_0x55d40d}},'arrayFilters':[{'elem._id':_0x1a3088}]}};}),_0x2dbba2=_0x45bcd7[_0x351a12(0x1c2)](_0x484d23=>_0x484d23[_0x351a12(0x6ad)])['map'](_0x45c0fe=>{const _0x2d6c35=_0x351a12;let _0x55c79e=_0x45c0fe[_0x2d6c35(0x1b0)];if(!_0x55c79e)throw new Error(_0x2d6c35(0x3b8));return{'updateOne':{'filter':{'_id':_0x163e4a},'update':{'$pull':{'messages':{'_id':_0x55c79e}}}}};}),_0x5e2d1e=[..._0x5cb718,..._0x2dbba2],_0x5ae0e1=await this[_0x351a12(0x210)]['scheduleMessage'][_0x351a12(0x261)](_0x5e2d1e,this[_0x351a12(0x753)][_0x351a12(0x6e4)]),_0x1dafee=await this[_0x351a12(0x210)]['scheduleMessage'][_0x351a12(0x4a5)](_0x163e4a,this[_0x351a12(0x753)][_0x351a12(0x6e4)]);return _0x1dafee&&(this[_0x351a12(0x64a)](_0x1dafee['messages']),await this[_0x351a12(0x210)][_0x351a12(0x2b4)][_0x351a12(0x443)](_0x1dafee[_0x351a12(0x1b0)],{'$set':{'messages':_0x1dafee['messages']}},this[_0x351a12(0x753)][_0x351a12(0x6e4)])),_0x1dafee;}catch(_0xc59803){let _0x4aec19=_0x351a12(0x62d),_0x3fc576=_0xc59803 instanceof Error?_0xc59803[_0x351a12(0x33a)]:typeof _0xc59803==_0x351a12(0x41e)?JSON[_0x351a12(0x718)](_0xc59803):_0xc59803,_0x448181=_0x4aec19+':\x20'+_0x3fc576;throw this[_0x351a12(0x39e)]['error'](this['instanceName']+'\x20('+this[_0x351a12(0x753)]['wuid']+_0x351a12(0x17d)+_0x448181),new m(_0x448181);}}async[a0_0x37fa70(0x793)](){const _0x108ee8=a0_0x37fa70;try{let _0x1cd8f1={'status':_0x108ee8(0x6d1)},_0x1720cf=await this[_0x108ee8(0x210)][_0x108ee8(0x2b4)][_0x108ee8(0x241)](_0x1cd8f1,this[_0x108ee8(0x753)][_0x108ee8(0x6e4)]);if(!_0x1720cf['error'])this[_0x108ee8(0x39e)][_0x108ee8(0x48f)](this[_0x108ee8(0x653)]+'\x20('+this[_0x108ee8(0x753)]['wuid']+_0x108ee8(0x348));else throw new Error(_0x1720cf['error']['message']||_0x108ee8(0xcc));return this[_0x108ee8(0x557)]();}catch(_0x4300ce){let _0x4c7376=_0x108ee8(0x4f1),_0x4997e3=_0x4300ce instanceof Error?_0x4300ce[_0x108ee8(0x33a)]:typeof _0x4300ce==_0x108ee8(0x41e)?JSON[_0x108ee8(0x718)](_0x4300ce):_0x4300ce,_0x4f738e=_0x4c7376+':\x20'+_0x4997e3;throw this['logger'][_0x108ee8(0x723)](this[_0x108ee8(0x653)]+'\x20('+this[_0x108ee8(0x753)][_0x108ee8(0x6e4)]+_0x108ee8(0x17d)+_0x4f738e),new m(_0x4f738e);}}async['getScheduleMessage'](){const _0x36556f=a0_0x37fa70;try{return await this['repository'][_0x36556f(0x2b4)][_0x36556f(0x3b4)]({'where':{}},this['instance'][_0x36556f(0x6e4)]);}catch(_0x339613){let _0x1af59e=_0x36556f(0x7bf),_0x8d0e25=_0x339613 instanceof Error?_0x339613[_0x36556f(0x33a)]:typeof _0x339613==_0x36556f(0x41e)?JSON['stringify'](_0x339613):_0x339613,_0x2383d7=_0x1af59e+':\x20'+_0x8d0e25;throw this[_0x36556f(0x39e)][_0x36556f(0x723)](this['instanceName']+'\x20('+this[_0x36556f(0x753)]['wuid']+_0x36556f(0x17d)+_0x2383d7),new m(_0x2383d7);}}[a0_0x37fa70(0x64a)](_0x1c5db9){const _0x2019e5=a0_0x37fa70;_0x1c5db9[_0x2019e5(0x31a)]((_0x43d6ec,_0x4eec74)=>_0x43d6ec[_0x2019e5(0x11e)]-_0x4eec74[_0x2019e5(0x11e)]),_0x1c5db9[_0x2019e5(0x4b7)]((_0x380813,_0x12668a)=>{_0x380813['order']=_0x12668a+0x1;});}async['SendScheduleMessage'](_0x28d838,_0x5504e0){const _0x252a71=a0_0x37fa70;try{if(!_0x5504e0)return this['logger'][_0x252a71(0x723)](this[_0x252a71(0x653)]+'\x20('+this[_0x252a71(0x753)][_0x252a71(0x6e4)]+_0x252a71(0x37e)),{'error':!0x0,'detail':_0x252a71(0x508)};if(_0x5504e0[_0x252a71(0x519)]===_0x252a71(0x407)&&!this[_0x252a71(0x1db)]?.[_0x252a71(0x67c)]['enabled'])return this[_0x252a71(0x39e)][_0x252a71(0x723)](this['instanceName']+'\x20('+this[_0x252a71(0x753)][_0x252a71(0x6e4)]+'):\x20Fluxos\x20não\x20estão\x20ativados'),{'error':!0x0,'detail':_0x252a71(0x661)};switch(_0x5504e0[_0x252a71(0x519)]){case _0x252a71(0x403):return await this['scheduleSendText'](_0x5504e0,_0x28d838);case'video':case _0x252a71(0x1b2):case _0x252a71(0x5be):return await this[_0x252a71(0x123)](_0x5504e0,_0x28d838);case _0x252a71(0x1a9):return await this[_0x252a71(0x5e0)](_0x5504e0,_0x28d838);case _0x252a71(0x407):let _0x5c6a2c=new Ke();return _0x5c6a2c[_0x252a71(0x410)]=_0x5504e0['flow'],_0x5c6a2c['remoteJid']=_0x28d838,await this[_0x252a71(0x2f9)](_0x5c6a2c);default:return this['logger']['error'](this[_0x252a71(0x653)]+'\x20('+this[_0x252a71(0x753)][_0x252a71(0x6e4)]+'):\x20Comando\x20desconhecido:\x20'+_0x5504e0['type']),{'error':!0x0,'detail':_0x252a71(0xf9)};}}catch(_0x3c1f99){return this['logger']['error'](this[_0x252a71(0x653)]+'\x20('+this['instance'][_0x252a71(0x6e4)]+'):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20'+(_0x3c1f99 instanceof Error?_0x3c1f99[_0x252a71(0x33a)]:JSON[_0x252a71(0x718)](_0x3c1f99,null,0x2))),{'error':!0x0,'detail':_0x3c1f99[_0x252a71(0x33a)]};}}async['scheduleSendText'](_0x17c161,_0x483635){const _0x199c70=a0_0x37fa70;if(this[_0x199c70(0x39e)]['verbose'](this[_0x199c70(0x653)]+'\x20('+this[_0x199c70(0x753)][_0x199c70(0x6e4)]+_0x199c70(0x3ad)+_0x483635+'\x27'),!_0x17c161[_0x199c70(0x403)]||_0x17c161[_0x199c70(0x403)][_0x199c70(0x426)]===0x0)return{'error':!0x0,'detail':_0x199c70(0x1ae)};let _0x2014e9=await this[_0x199c70(0x70)](_0x17c161['text'],_0x483635),_0x3dbb3c={'number':_0x483635,'options':{'delay':_0x17c161[_0x199c70(0xb9)],'linkPreview':_0x17c161['linkPreview']},'textMessage':{'text':_0x2014e9}},_0x3b3dd2=null;try{let _0x3ae13e=await this[_0x199c70(0x3a6)](_0x3dbb3c);if(_0x3ae13e&&_0x3ae13e['status'])return{'error':!0x1,'id':_0x3ae13e['key']['id']};_0x3b3dd2=JSON[_0x199c70(0x718)](_0x3ae13e),this[_0x199c70(0x39e)]['verbose'](this[_0x199c70(0x653)]+'\x20('+this['instance'][_0x199c70(0x6e4)]+_0x199c70(0x17d)+_0x3b3dd2);}catch(_0x48363f){this[_0x199c70(0x39e)][_0x199c70(0x723)](this[_0x199c70(0x653)]+'\x20('+this[_0x199c70(0x753)][_0x199c70(0x6e4)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20'+(_0x48363f instanceof Error?_0x48363f[_0x199c70(0x33a)]:JSON[_0x199c70(0x718)](_0x48363f,null,0x2))),_0x3b3dd2=_0x48363f[_0x199c70(0x33a)];}if(_0x3b3dd2)return{'error':!0x0,'detail':(typeof _0x3b3dd2==_0x199c70(0x41e)?JSON['stringify'](_0x3b3dd2,null,0x2):_0x3b3dd2)['replace'](/[\[\]{}\n]/g,'\x20')[_0x199c70(0x2e9)](/  +/g,'\x20')};}async[a0_0x37fa70(0x123)](_0x137530,_0x49e68c){const _0x23a456=a0_0x37fa70;this['logger'][_0x23a456(0x48f)](this[_0x23a456(0x653)]+'\x20('+this[_0x23a456(0x753)]['wuid']+_0x23a456(0x12d)+_0x49e68c+'\x27');let _0x1ff13a;_0x137530[_0x23a456(0x403)]&&_0x137530[_0x23a456(0x403)][_0x23a456(0x426)]>0x0&&(_0x1ff13a=await this[_0x23a456(0x70)](_0x137530['text'],_0x49e68c));let _0x2d2955={'number':_0x49e68c,'options':{'delay':_0x137530[_0x23a456(0xb9)],'linkPreview':_0x137530[_0x23a456(0x761)]},'mediaMessage':{'mediatype':_0x137530[_0x23a456(0x519)],'caption':_0x1ff13a,'media':_0x137530[_0x23a456(0x308)]}},_0xca82b4=null;try{let _0x5263bb=await this[_0x23a456(0x6ec)](_0x2d2955);if(_0x5263bb&&_0x5263bb[_0x23a456(0x4c1)])return{'error':!0x1,'id':_0x5263bb[_0x23a456(0x2d1)]['id']};_0xca82b4=JSON['stringify'](_0x5263bb),this[_0x23a456(0x39e)]['verbose'](this[_0x23a456(0x653)]+'\x20('+this['instance'][_0x23a456(0x6e4)]+_0x23a456(0x17d)+_0xca82b4);}catch(_0x1823d5){this[_0x23a456(0x39e)][_0x23a456(0x723)](this['instanceName']+'\x20('+this['instance'][_0x23a456(0x6e4)]+_0x23a456(0x2f6)+(_0x1823d5 instanceof Error?_0x1823d5[_0x23a456(0x33a)]:JSON[_0x23a456(0x718)](_0x1823d5,null,0x2))),_0xca82b4=_0x1823d5[_0x23a456(0x33a)];}if(_0xca82b4)return{'error':!0x0,'detail':(typeof _0xca82b4==_0x23a456(0x41e)?JSON[_0x23a456(0x718)](_0xca82b4,null,0x2):_0xca82b4)[_0x23a456(0x2e9)](/[\[\]{}\n]/g,'\x20')['replace'](/  +/g,'\x20')};}async['scheduleSendAudio'](_0x2aea4c,_0x3d37ca){const _0x59f06b=a0_0x37fa70;this[_0x59f06b(0x39e)][_0x59f06b(0x48f)](this[_0x59f06b(0x653)]+'\x20('+this[_0x59f06b(0x753)][_0x59f06b(0x6e4)]+_0x59f06b(0x156)+_0x3d37ca+'\x27');let _0x41ca93={'number':_0x3d37ca,'options':{'delay':_0x2aea4c['delay']},'audioMessage':{'audio':_0x2aea4c[_0x59f06b(0x308)]}},_0x4cce6e=null;try{let _0x218c63=await this[_0x59f06b(0x287)](_0x41ca93);if(_0x218c63&&_0x218c63[_0x59f06b(0x4c1)])return{'error':!0x1,'id':_0x218c63[_0x59f06b(0x2d1)]['id']};_0x4cce6e=JSON['stringify'](_0x218c63),this['logger'][_0x59f06b(0x48f)](this[_0x59f06b(0x653)]+'\x20('+this[_0x59f06b(0x753)][_0x59f06b(0x6e4)]+_0x59f06b(0x17d)+_0x4cce6e);}catch(_0xac9bf4){this[_0x59f06b(0x39e)][_0x59f06b(0x723)](this['instanceName']+'\x20('+this[_0x59f06b(0x753)][_0x59f06b(0x6e4)]+_0x59f06b(0x3a9)+(_0xac9bf4 instanceof Error?_0xac9bf4[_0x59f06b(0x33a)]:JSON[_0x59f06b(0x718)](_0xac9bf4,null,0x2))),_0x4cce6e=_0xac9bf4['message'];}if(_0x4cce6e)return{'error':!0x0,'detail':(typeof _0x4cce6e==_0x59f06b(0x41e)?JSON[_0x59f06b(0x718)](_0x4cce6e,null,0x2):_0x4cce6e)['replace'](/[\[\]{}\n]/g,'\x20')[_0x59f06b(0x2e9)](/  +/g,'\x20')};}async[a0_0x37fa70(0x4d5)](_0x5ac822){const _0x15581d=a0_0x37fa70;try{return await this[_0x15581d(0x688)][_0x15581d(0x40c)](_0x5ac822['groupJid'],_0x5ac822['description']),{'update':_0x15581d(0x630)};}catch(_0x1629d4){let _0x5b80f5=_0x15581d(0x504),_0x2fd052=_0x1629d4 instanceof Error?_0x1629d4[_0x15581d(0x33a)]:typeof _0x1629d4=='object'?JSON[_0x15581d(0x718)](_0x1629d4):_0x1629d4,_0x437025=_0x5b80f5+':\x20'+_0x2fd052;throw this['logger']['error'](this[_0x15581d(0x653)]+'\x20('+this['instance'][_0x15581d(0x6e4)]+_0x15581d(0x17d)+_0x437025),new x(_0x437025);}}async['groupName'](_0x28bed2){const _0x257823=a0_0x37fa70;try{return await this[_0x257823(0x688)][_0x257823(0x291)](_0x28bed2[_0x257823(0x211)],_0x28bed2['name']),{'update':'success'};}catch(_0x348b50){let _0x5b02d5='Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName',_0x1c8fcf=_0x348b50 instanceof Error?_0x348b50[_0x257823(0x33a)]:typeof _0x348b50==_0x257823(0x41e)?JSON[_0x257823(0x718)](_0x348b50):_0x348b50,_0x3dccf0=_0x5b02d5+':\x20'+_0x1c8fcf;throw this[_0x257823(0x39e)]['error'](this[_0x257823(0x653)]+'\x20('+this[_0x257823(0x753)][_0x257823(0x6e4)]+_0x257823(0x17d)+_0x3dccf0),new x(_0x3dccf0);}}async[a0_0x37fa70(0x6a7)](_0x13c892){const _0x66558f=a0_0x37fa70;try{let _0x4dc7fe=await this[_0x66558f(0x688)][_0x66558f(0x581)](_0x13c892['groupJid'],_0x13c892['expiration']);return{'success':!0x0};}catch(_0x5cc661){let _0x1016ab=_0x66558f(0x423),_0x393de9=_0x5cc661 instanceof Error?_0x5cc661[_0x66558f(0x33a)]:typeof _0x5cc661==_0x66558f(0x41e)?JSON['stringify'](_0x5cc661):_0x5cc661,_0x62a1b0=_0x1016ab+':\x20'+_0x393de9;throw this[_0x66558f(0x39e)][_0x66558f(0x723)](this[_0x66558f(0x653)]+'\x20('+this[_0x66558f(0x753)]['wuid']+_0x66558f(0x17d)+_0x62a1b0),new x(_0x62a1b0);}}async[a0_0x37fa70(0x214)](_0x15211f){const _0x164a1a=a0_0x37fa70;try{return await this['client'][_0x164a1a(0x320)](_0x15211f[_0x164a1a(0x211)],_0x15211f[_0x164a1a(0x28b)]),{'update':_0x164a1a(0x630)};}catch(_0x219bd4){let _0x1b9a11=_0x164a1a(0x4dd),_0x5b11dc=_0x219bd4 instanceof Error?_0x219bd4[_0x164a1a(0x33a)]:typeof _0x219bd4=='object'?JSON[_0x164a1a(0x718)](_0x219bd4):_0x219bd4,_0x26e3b6=_0x1b9a11+':\x20'+_0x5b11dc;throw this[_0x164a1a(0x39e)]['error'](this[_0x164a1a(0x653)]+'\x20('+this[_0x164a1a(0x753)][_0x164a1a(0x6e4)]+_0x164a1a(0x17d)+_0x26e3b6),new x(_0x26e3b6);}}async[a0_0x37fa70(0x5aa)](_0x2877ac){const _0x14fbb6=a0_0x37fa70;try{let _0x3c2ce2;if((0x0,L[_0x14fbb6(0xc8)])(_0x2877ac['image'])){let _0x50e9d1=new Date()[_0x14fbb6(0x5ac)](),_0x1f7df4=_0x2877ac[_0x14fbb6(0x1b2)]+_0x14fbb6(0x47b)+_0x50e9d1;_0x3c2ce2=(await Z[_0x14fbb6(0x259)][_0x14fbb6(0x7b6)](_0x1f7df4,{'responseType':_0x14fbb6(0x1d8)}))[_0x14fbb6(0x349)];}else{if((0x0,L[_0x14fbb6(0x6c0)])(_0x2877ac['image']))_0x3c2ce2=Buffer[_0x14fbb6(0x27b)](_0x2877ac[_0x14fbb6(0x1b2)],_0x14fbb6(0xf5));else throw new m(_0x14fbb6(0x41b));}return await this['client'][_0x14fbb6(0x52d)](_0x2877ac[_0x14fbb6(0x211)],_0x3c2ce2),{'update':'success'};}catch(_0x72716){let _0x31fea6=_0x14fbb6(0x233),_0xf42df4=_0x72716 instanceof Error?_0x72716['message']:typeof _0x72716==_0x14fbb6(0x41e)?JSON['stringify'](_0x72716):_0x72716,_0x2f2b01=_0x31fea6+':\x20'+_0xf42df4;throw this[_0x14fbb6(0x39e)][_0x14fbb6(0x723)](this[_0x14fbb6(0x653)]+'\x20('+this[_0x14fbb6(0x753)][_0x14fbb6(0x6e4)]+_0x14fbb6(0x17d)+_0x2f2b01),new x(_0x2f2b01);}}},Gt=class u{constructor(_0x2716db,_0x2aa01a,_0x46337d){const _0xb73561=a0_0x37fa70;this[_0xb73561(0xfb)]=_0x2716db,this[_0xb73561(0x763)]=_0x2aa01a,this[_0xb73561(0x210)]=_0x46337d,this['db']={},this[_0xb73561(0x650)]={},this['logger']=new $(u[_0xb73561(0x410)]),this[_0xb73561(0x2b6)]={},(this['removeInstance'](),this[_0xb73561(0x3d6)](),Object[_0xb73561(0x4f8)](this['db'],_0x2aa01a[_0xb73561(0x7b6)](_0xb73561(0x796))),Object[_0xb73561(0x4f8)](this[_0xb73561(0x650)],_0x2aa01a[_0xb73561(0x7b6)](_0xb73561(0x23c))),this[_0xb73561(0x6ac)]=this['db'][_0xb73561(0x464)]?this[_0xb73561(0x210)][_0xb73561(0xc9)]?.['db'](this['db']['CONNECTION'][_0xb73561(0x12f)]+'-instances'):void 0x0,this[_0xb73561(0x12c)]=this[_0xb73561(0x650)][_0xb73561(0x464)]?new ge(this[_0xb73561(0x650)]):void 0x0);}async[a0_0x37fa70(0x4c6)](_0x34b902){const _0xa85eb9=a0_0x37fa70;if(_0x34b902&&!this[_0xa85eb9(0x2b6)][_0x34b902])throw new V(_0xa85eb9(0x134)+_0x34b902+'\x22\x20not\x20found');let _0x3c4f52=[];for await(let [_0xa32e0e,_0x1b8e0b]of Object[_0xa85eb9(0x491)](this['waInstances']))if(_0x1b8e0b&&_0x1b8e0b[_0xa85eb9(0x3dd)][_0xa85eb9(0x68d)]===_0xa85eb9(0x364)){let _0x14b5c3=await this[_0xa85eb9(0x210)][_0xa85eb9(0x186)][_0xa85eb9(0x3b4)](_0xa32e0e);_0x3c4f52[_0xa85eb9(0x5ee)]({'instance':{'instanceName':_0xa32e0e,'apikey':_0x14b5c3['apikey'],'owner':_0x1b8e0b['wuid'],'profileName':await _0x1b8e0b[_0xa85eb9(0x2f4)]()||'not\x20loaded','profilePictureUrl':_0x1b8e0b[_0xa85eb9(0x434)]}});}return _0x3c4f52[_0xa85eb9(0x3b4)](_0x5acf0b=>_0x5acf0b['instance'][_0xa85eb9(0x653)]===_0x34b902)??_0x3c4f52;}async[a0_0x37fa70(0x745)](_0x474163){const _0x1602e5=a0_0x37fa70;if(this['db'][_0x1602e5(0x464)]&&(await this[_0x1602e5(0x210)][_0x1602e5(0xc9)][_0x1602e5(0x40a)](),(await this[_0x1602e5(0x6ac)]['collections']())[_0x1602e5(0x426)]>0x0&&await this[_0x1602e5(0x6ac)][_0x1602e5(0x4de)](_0x474163)),this['redis'][_0x1602e5(0x464)]){this[_0x1602e5(0x12c)][_0x1602e5(0x2ab)]=_0x474163,await this[_0x1602e5(0x12c)][_0x1602e5(0x45f)]();return;}}async[a0_0x37fa70(0x45c)](){const _0xaad133=a0_0x37fa70;await this['InstancesAlterarTodas']();let _0x4813df=async _0x30af3d=>{const _0x6ae1b5=a0_0x58ef;let _0x5a32ea=new Re(this[_0x6ae1b5(0x763)],this[_0x6ae1b5(0xfb)],this[_0x6ae1b5(0x210)]);_0x5a32ea['instanceName']=_0x30af3d,await _0x5a32ea[_0x6ae1b5(0x3b7)](),this[_0x6ae1b5(0x2b6)][_0x30af3d]=_0x5a32ea;};try{if(this[_0xaad133(0x650)][_0xaad133(0x464)]){let _0x53da33=await this['cache'][_0xaad133(0x39a)]();_0x53da33?.[_0xaad133(0x426)]>0x0&&_0x53da33[_0xaad133(0x4b7)](async _0x367794=>await _0x4813df(_0x367794['split'](':')[0x1]));return;}if(this['db']['ENABLED']){await this[_0xaad133(0x210)][_0xaad133(0xc9)][_0xaad133(0x40a)]();let _0x59cd70=await this['dbInstance'][_0xaad133(0x208)]();_0x59cd70[_0xaad133(0x426)]>0x0&&_0x59cd70[_0xaad133(0x4b7)](async _0x7cfde3=>await _0x4813df(_0x7cfde3[_0xaad133(0x699)][_0xaad133(0x2e9)](/^[\w-]+\./,'')));return;}}catch(_0x234e77){this[_0xaad133(0x39e)][_0xaad133(0x723)](_0x234e77);}}async['cleanDisconnectedInstances'](){const _0xfe2946=a0_0x37fa70;try{let _0xe5d945=await this['repository'][_0xfe2946(0x186)][_0xfe2946(0x89)]({'online':!0x1});for(let _0x39c9c9 of _0xe5d945){let _0x406dc0=_0x39c9c9['_id'];await me['removeIPv6ById'](ee,_0x406dc0);}console[_0xfe2946(0xec)](_0xfe2946(0x6c9)+_0xe5d945[_0xfe2946(0x426)]);let _0x1d6634={'online':!0x1},_0x3e0e31=await this['repository']['auth'][_0xfe2946(0x241)](_0x1d6634);console[_0xfe2946(0xec)]('Instâncias\x20removidas:\x20'+_0x3e0e31[_0xfe2946(0x5d9)]);}catch(_0x3f2156){console[_0xfe2946(0x723)](_0xfe2946(0x4fc),_0x3f2156);}}async[a0_0x37fa70(0x64b)](){const _0xa41d39=a0_0x37fa70;try{let _0xaab76e={'online':!0x1},_0x3b70ee={'online':!0x1,'lastDisconnect':Date[_0xa41d39(0x5cf)]()},_0x5947e8=await this[_0xa41d39(0x210)][_0xa41d39(0x186)][_0xa41d39(0x4b5)](_0xaab76e,_0x3b70ee);await this[_0xa41d39(0x63a)]();}catch(_0x2ff054){console[_0xa41d39(0x723)](_0xa41d39(0x6aa),_0x2ff054);}}[a0_0x37fa70(0x47e)](){const _0x5199a5=a0_0x37fa70;this[_0x5199a5(0xfb)]['on'](_0x5199a5(0x378),async _0x511dd1=>{const _0x62757b=_0x5199a5;try{this[_0x62757b(0x2b6)][_0x511dd1]=void 0x0;}catch{}try{this[_0x62757b(0x745)](_0x511dd1);}finally{this[_0x62757b(0x39e)][_0x62757b(0x71b)](_0x62757b(0x134)+_0x511dd1+_0x62757b(0x639));}});}[a0_0x37fa70(0x3d6)](){const _0x44b876=a0_0x37fa70;this[_0x44b876(0xfb)]['on'](_0x44b876(0x3b6),async _0x6a8e12=>{const _0x4b1916=_0x44b876;try{this[_0x4b1916(0x2b6)][_0x6a8e12]=void 0x0;}catch{}try{this[_0x4b1916(0x745)](_0x6a8e12);}finally{this[_0x4b1916(0x39e)][_0x4b1916(0x71b)](_0x4b1916(0x134)+_0x6a8e12+_0x4b1916(0x532));}});}},Bt=class extends O{[a0_0x37fa70(0x4ef)](_0x192dfb){return aa(_0x192dfb);}async[a0_0x37fa70(0x737)](_0x3a2f01){const _0x5da19b=a0_0x37fa70;if(_0x3a2f01['length']!==0x0)try{return{'insertCount':(await this['getChatModelForOwner'](_0x3a2f01[0x0][_0x5da19b(0x5d3)])[_0x5da19b(0x75e)]([..._0x3a2f01]))[_0x5da19b(0x426)]};}catch(_0x30ac11){return _0x30ac11;}}async[a0_0x37fa70(0x3b4)](_0xd80496,_0x2f63ed){const _0x422864=a0_0x37fa70;try{let _0x351f81=this['getChatModelForOwner'](_0x2f63ed),_0x4da346=T(_0xd80496[_0x422864(0x34f)]);return await _0x351f81[_0x422864(0x3b4)](_0x4da346)[_0x422864(0x31a)]({'lastmsg':-0x1})[_0x422864(0x485)](_0xd80496?.['limit']??0x0)['lean']();}catch{return[];}}async[a0_0x37fa70(0x6ad)](_0x5c185b,_0x3a2e82){const _0x4e6dad=a0_0x37fa70;try{return{'deletedCount':(await this[_0x4e6dad(0x4ef)](_0x3a2e82)[_0x4e6dad(0x241)]({..._0x5c185b['where']}))[_0x4e6dad(0x2ac)]};}catch(_0x48043a){return{'error':_0x48043a?.[_0x4e6dad(0x2c5)]()};}}async[a0_0x37fa70(0x79b)](_0x1871b0,_0x471e22){const _0x401841=a0_0x37fa70;try{return await this[_0x401841(0x4ef)](_0x471e22)[_0x401841(0x241)]({..._0x1871b0[_0x401841(0x34f)]}),[];}catch(_0x414cb3){return{'error':_0x414cb3?.[_0x401841(0x2c5)]()};}}async[a0_0x37fa70(0x1e2)](_0x1a1487,_0x15bf24){const _0x4cce2a=a0_0x37fa70;try{let _0x1cadcc=this[_0x4cce2a(0x4ef)](_0x15bf24),_0x28c6a6=T(_0x1a1487[_0x4cce2a(0x34f)]);return await _0x1cadcc[_0x4cce2a(0x1e2)](_0x28c6a6)['lean']();}catch{return null;}}async['updateOne'](_0x57d462,_0xca18fc,_0xb4d229,_0x3139f1,_0x338949=a0_0x37fa70(0x5d1)){const _0x231db3=a0_0x37fa70;try{let _0x1cb4f4={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x3139f1},_0xd0720b=this[_0x231db3(0x4ef)](_0xb4d229),_0x21ef78=T(_0x57d462[_0x231db3(0x34f)]);Object['keys'](_0xca18fc)[_0x231db3(0x4b7)](_0xa71345=>{_0xca18fc[_0xa71345]==null&&delete _0xca18fc[_0xa71345];});let _0x5daab2={};return _0x5daab2[_0x338949]=_0xca18fc,await _0xd0720b[_0x231db3(0xa2)](_0x21ef78,_0x5daab2,_0x1cb4f4);}catch(_0x2e9bd5){return console[_0x231db3(0x723)](_0x2e9bd5),null;}}async[a0_0x37fa70(0x10e)](_0x466006){const _0x31a2c7=a0_0x37fa70;try{let _0x3e0e11=this['getChatModelForOwner'](_0x466006[0x0][_0x31a2c7(0x6a6)][_0x31a2c7(0x34f)][_0x31a2c7(0x5d3)]),_0x58466f=_0x466006[_0x31a2c7(0x3c4)](_0x242f51=>({'updateOne':{'filter':{..._0x242f51[_0x31a2c7(0x6a6)][_0x31a2c7(0x34f)]},'update':{'$set':_0x242f51[_0x31a2c7(0x6c8)]},'upsert':!0x0}})),_0x50d247=await _0x3e0e11[_0x31a2c7(0x261)](_0x58466f);return _0x50d247[_0x31a2c7(0x7a3)]+_0x50d247[_0x31a2c7(0x9a)];}catch(_0x1e1d68){return console[_0x31a2c7(0x723)](_0x1e1d68),0x0;}}async[a0_0x37fa70(0x205)](_0x13d2af){const _0x5ee8d9=a0_0x37fa70;try{let _0x8ecd1d={'group_isCommunity':'','group_announce':'','group_size':''},_0x470f9f={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x186d3a={'$unset':_0x8ecd1d};return(await this[_0x5ee8d9(0x4ef)](_0x13d2af)[_0x5ee8d9(0x10e)](_0x470f9f,_0x186d3a))[_0x5ee8d9(0x7a3)];}catch(_0x24d443){return console[_0x5ee8d9(0x723)](_0x5ee8d9(0xb3),_0x24d443),0x0;}}async['updateMissingEtiquetas'](_0x2f622c){const _0x3884ff=a0_0x37fa70;try{let _0x560109=this[_0x3884ff(0x4ef)](_0x2f622c),_0x3f19ab={'leadInfo.etiquetas':{'$exists':!0x1}},_0x394dcd={'$set':{'leadInfo.etiquetas':[]}};return(await _0x560109['updateMany'](_0x3f19ab,_0x394dcd))[_0x3884ff(0x7a3)];}catch(_0x462c5d){return console[_0x3884ff(0x723)](_0x462c5d),0x0;}}async['updateMissingTags'](_0x5a209a){const _0x239b0b=a0_0x37fa70;try{let _0x427ede=this[_0x239b0b(0x4ef)](_0x5a209a),_0x1ad30e={'leadInfo.tags':{'$exists':!0x1}},_0x1501f3={'$set':{'leadInfo.tags':[]}};return(await _0x427ede[_0x239b0b(0x10e)](_0x1ad30e,_0x1501f3))[_0x239b0b(0x7a3)];}catch(_0x29d79e){return console[_0x239b0b(0x723)](_0x29d79e),0x0;}}async[a0_0x37fa70(0x740)](_0x5c2204){const _0xdb4da7=a0_0x37fa70;try{let _0x50efd4=this[_0xdb4da7(0x4ef)](_0x5c2204),_0x50f67e={'leadInfo.customFields':{'$exists':!0x1}},_0x31d518={'$set':{'leadInfo.customFields':[]}};return(await _0x50efd4[_0xdb4da7(0x10e)](_0x50f67e,_0x31d518))[_0xdb4da7(0x7a3)];}catch(_0x485565){return console[_0xdb4da7(0x723)](_0x485565),0x0;}}async['insertMany'](_0x3ff7d2,_0x556694){const _0x1d93c1=a0_0x37fa70;if(!Array['isArray'](_0x3ff7d2)||_0x3ff7d2[_0x1d93c1(0x426)]===0x0)throw new Error(_0x1d93c1(0x1ca));try{return(await this[_0x1d93c1(0x4ef)](_0x556694)[_0x1d93c1(0x75e)](_0x3ff7d2))[_0x1d93c1(0x426)];}catch(_0x38a147){throw console[_0x1d93c1(0x723)](_0x1d93c1(0x354),_0x38a147),_0x38a147;}}async[a0_0x37fa70(0x5b0)](_0x10571d,_0x381995){const _0x46c2ec=a0_0x37fa70;try{await this['getChatModelForOwner'](_0x381995)[_0x46c2ec(0x730)]({'_id':_0x10571d});}catch(_0x9ecf9e){throw console[_0x46c2ec(0x723)](_0x46c2ec(0xed),_0x9ecf9e),_0x9ecf9e;}}},Wt=class extends O{constructor(_0x755335,_0x58abdf,_0x585005){const _0x575866=a0_0x37fa70;super(_0x58abdf),this[_0x575866(0x626)]=_0x755335,this[_0x575866(0x763)]=_0x58abdf,this[_0x575866(0x79)]=_0x585005;}async['insert'](_0x51885f){const _0x14f8af=a0_0x37fa70;if(_0x51885f['length']!==0x0)try{return{'insertCount':(await this[_0x14f8af(0x626)]['insertMany']([..._0x51885f]))[_0x14f8af(0x426)]};}catch(_0x4f5ba2){return _0x4f5ba2;}}async[a0_0x37fa70(0x6c8)](_0x3096a3,_0x46cd87){const _0x33fad0=a0_0x37fa70;try{let _0x2196ee=T(_0x3096a3['where']);return{'updatedCount':(await this[_0x33fad0(0x626)][_0x33fad0(0x10e)](_0x2196ee,{'$set':_0x46cd87}))[_0x33fad0(0x7a3)]};}catch(_0x17eb91){return console[_0x33fad0(0x723)](_0x33fad0(0x11c),_0x17eb91),{'error':_0x17eb91[_0x33fad0(0x2c5)]()};}}async[a0_0x37fa70(0x283)](_0x10e860){const _0x466dbf=a0_0x37fa70;try{let _0x403c5d={'_id':{'$in':_0x10e860}};return await this[_0x466dbf(0x626)][_0x466dbf(0x3b4)](_0x403c5d)[_0x466dbf(0x2f3)]();}catch(_0x4ef195){return console[_0x466dbf(0x723)](_0x466dbf(0x5e4),_0x4ef195),[];}}async[a0_0x37fa70(0x6ad)](_0x506cea){const _0x3ef30=a0_0x37fa70;try{return{'deletedCount':(await this[_0x3ef30(0x626)][_0x3ef30(0x241)]({..._0x506cea['where']}))[_0x3ef30(0x2ac)]};}catch(_0x30b2e2){return{'error':_0x30b2e2?.['toString']()};}}async[a0_0x37fa70(0x3b4)](_0x4ec4d1){const _0x18ae49=a0_0x37fa70;try{let _0x3e440a=T(_0x4ec4d1[_0x18ae49(0x34f)]);return await this['cacheContactModel']['find'](_0x3e440a)[_0x18ae49(0x485)](_0x4ec4d1?.[_0x18ae49(0x485)]??0x0)['lean']();}catch{return[];}}async['findOne'](_0x9d7b6e){const _0x2cf195=a0_0x37fa70;try{let _0x548563=T(_0x9d7b6e['where']);return await this[_0x2cf195(0x626)][_0x2cf195(0x1e2)](_0x548563)[_0x2cf195(0x2f3)]();}catch{return null;}}},zt=class extends O{[a0_0x37fa70(0x43c)](_0x738366){return Na(_0x738366);}async[a0_0x37fa70(0x130)](_0xd643eb,_0x433251,_0x4a7eeb,_0x532f4f){const _0x202e8b=a0_0x37fa70;try{let _0x474598={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x532f4f},_0x4ab5d9=this[_0x202e8b(0x43c)](_0x4a7eeb),_0xcc1821=T(_0xd643eb[_0x202e8b(0x34f)]);return await _0x4ab5d9[_0x202e8b(0xa2)](_0xcc1821,{'$set':_0x433251},_0x474598);}catch(_0x1eb41e){return console['error'](_0x1eb41e),null;}}async[a0_0x37fa70(0x3b4)](_0x5f349f,_0x1b1c4b){const _0x3048be=a0_0x37fa70;try{let _0x52ffc0=this[_0x3048be(0x43c)](_0x1b1c4b),_0x438d3c=T(_0x5f349f[_0x3048be(0x34f)]);return await _0x52ffc0[_0x3048be(0x3b4)](_0x438d3c);}catch(_0x4c074d){console['error'](_0x4c074d);}}async[a0_0x37fa70(0x6ad)](_0x4b9789,_0x50ab56){const _0x30524b=a0_0x37fa70;try{let _0x4594ed=this[_0x30524b(0x43c)](_0x50ab56),_0x105ec3=T(_0x4b9789[_0x30524b(0x34f)]);await _0x4594ed['deleteMany'](_0x105ec3);}catch(_0x53e830){console[_0x30524b(0x723)](_0x53e830);}}async[a0_0x37fa70(0x79b)](_0x69d8ef){const _0x3e2d68=a0_0x37fa70;try{return await this[_0x3e2d68(0x43c)](_0x69d8ef)[_0x3e2d68(0x350)][_0x3e2d68(0x6e2)](),{'success':!0x0};}catch(_0x8998ce){return console[_0x3e2d68(0x723)](_0x8998ce),{'success':!0x1,'error':_0x8998ce};}}},Ht=class{constructor(_0x1a2ab5){const _0x52250f=a0_0x37fa70;this[_0x52250f(0x1a0)]=_0x1a2ab5;}async[a0_0x37fa70(0x5b1)]({instanceName:_0x4cbcdc},_0x396ece){const _0x23a76b=a0_0x37fa70;return await this[_0x23a76b(0x1a0)]['waInstances'][_0x4cbcdc][_0x23a76b(0x5b1)](_0x396ece);}async['whatsappNumber']({instanceName:_0x36bcbc},_0x3d4ed1){const _0x4198f2=a0_0x37fa70;return await this[_0x4198f2(0x1a0)][_0x4198f2(0x2b6)][_0x36bcbc][_0x4198f2(0x3c5)](_0x3d4ed1);}async[a0_0x37fa70(0x71a)]({instanceName:_0x36da58},_0x35aa78){const _0x269a0b=a0_0x37fa70;return await this[_0x269a0b(0x1a0)]['waInstances'][_0x36da58]['importChats'](_0x35aa78);}async[a0_0x37fa70(0x1a1)]({instanceName:_0xffaca9},_0x3d9be9){const _0x45875e=a0_0x37fa70;return await this['waMonitor'][_0x45875e(0x2b6)][_0xffaca9]['markMessageAsRead'](_0x3d9be9);}async['archiveChat']({instanceName:_0x6c056c},_0x46ab35){const _0x11478e=a0_0x37fa70;return await this[_0x11478e(0x1a0)][_0x11478e(0x2b6)][_0x6c056c][_0x11478e(0x278)](_0x46ab35);}async['deleteMessage']({instanceName:_0x45c717},_0xcf7328){const _0x1be5c4=a0_0x37fa70;return await this[_0x1be5c4(0x1a0)][_0x1be5c4(0x2b6)][_0x45c717][_0x1be5c4(0x270)](_0xcf7328);}async[a0_0x37fa70(0x34c)]({instanceName:_0x469277},_0x27f206){const _0x31186b=a0_0x37fa70;return await this['waMonitor'][_0x31186b(0x2b6)][_0x469277][_0x31186b(0x172)](_0x27f206['number']);}async[a0_0x37fa70(0x7ba)]({instanceName:_0x128872},_0x1dffaf){const _0x23a6c4=a0_0x37fa70;return await this[_0x23a6c4(0x1a0)][_0x23a6c4(0x2b6)][_0x128872][_0x23a6c4(0x7ba)](_0x1dffaf[_0x23a6c4(0x3d7)]);}async[a0_0x37fa70(0x69f)]({instanceName:_0x447daf},_0x42ea51){const _0x51e58a=a0_0x37fa70;return await this[_0x51e58a(0x1a0)][_0x51e58a(0x2b6)][_0x447daf]['updatePresence'](_0x42ea51);}async['fetchContacts']({instanceName:_0x42c2b7},_0xaf936e){const _0x1867dc=a0_0x37fa70;return await this[_0x1867dc(0x1a0)][_0x1867dc(0x2b6)][_0x42c2b7]['fetchContacts'](_0xaf936e);}async[a0_0x37fa70(0x449)]({instanceName:_0x3992af},_0x4f5631){return await this['waMonitor']['waInstances'][_0x3992af]['getBase64FromMediaMessage'](_0x4f5631);}async[a0_0x37fa70(0x67b)]({instanceName:_0x21c6ba},_0x14a8f4){const _0x24d91a=a0_0x37fa70;return await this[_0x24d91a(0x1a0)][_0x24d91a(0x2b6)][_0x21c6ba]['fetchMessages'](_0x14a8f4);}async[a0_0x37fa70(0x3da)]({instanceName:_0xeeba63}){const _0x49c266=a0_0x37fa70;return await this[_0x49c266(0x1a0)]['waInstances'][_0xeeba63][_0x49c266(0x3da)]();}async['fetchChats']({instanceName:_0x37df93}){return await this['waMonitor']['waInstances'][_0x37df93]['fetchChats']();}async[a0_0x37fa70(0x3b3)]({instanceName:_0x50891d}){const _0x4afeb0=a0_0x37fa70;return await this['waMonitor'][_0x4afeb0(0x2b6)][_0x50891d][_0x4afeb0(0x3b3)]();}async[a0_0x37fa70(0x445)]({instanceName:_0x1399a7},_0xf61d90){const _0x579de4=a0_0x37fa70;return await this[_0x579de4(0x1a0)]['waInstances'][_0x1399a7][_0x579de4(0x445)](_0xf61d90);}async[a0_0x37fa70(0x460)]({instanceName:_0x37472b},_0xbc11b3){const _0x4a4e34=a0_0x37fa70;return await this[_0x4a4e34(0x1a0)][_0x4a4e34(0x2b6)][_0x37472b][_0x4a4e34(0x460)](_0xbc11b3[_0x4a4e34(0x3d7)]);}async['updateProfileName']({instanceName:_0x44fd91},_0x22c32b){const _0xa198ba=a0_0x37fa70;return await this['waMonitor']['waInstances'][_0x44fd91][_0xa198ba(0x490)](_0x22c32b['name']);}async[a0_0x37fa70(0x4b1)]({instanceName:_0x53518e},_0x519e9f){const _0xbd398b=a0_0x37fa70;return await this[_0xbd398b(0x1a0)][_0xbd398b(0x2b6)][_0x53518e]['updateProfileStatus'](_0x519e9f['status']);}async['updateProfilePicture']({instanceName:_0x4a1ca9},_0x49eee6){const _0x26b7a9=a0_0x37fa70;return await this['waMonitor'][_0x26b7a9(0x2b6)][_0x4a1ca9][_0x26b7a9(0x52d)](_0x49eee6['picture']);}async[a0_0x37fa70(0xf2)]({instanceName:_0x2b2b23},_0x30101c){const _0x216f91=a0_0x37fa70;return await this[_0x216f91(0x1a0)][_0x216f91(0x2b6)][_0x2b2b23][_0x216f91(0xf2)]();}},Kt=require(a0_0x37fa70(0x7d)),Qt=class u{constructor(_0x38fa5e,_0x4166de,_0x3ecf9f,_0x56b993,_0x2e855b){const _0x4a0d6e=a0_0x37fa70;this[_0x4a0d6e(0x1a0)]=_0x38fa5e,this['configService']=_0x4166de,this['repository']=_0x3ecf9f,this[_0x4a0d6e(0xfb)]=_0x56b993,this[_0x4a0d6e(0x459)]=_0x2e855b,this[_0x4a0d6e(0x39e)]=new $(u[_0x4a0d6e(0x410)]);}async[a0_0x37fa70(0x27f)]({instanceName:_0x2b3d23,apikey:_0x59aaed,number:_0x21af0f,proxy:_0x399c7a=!0x0}){const _0x43d67f=a0_0x37fa70;try{let _0x46f79b=new Re(this[_0x43d67f(0x763)],this[_0x43d67f(0xfb)],this[_0x43d67f(0x210)]);_0x46f79b['instanceName']=_0x2b3d23,this[_0x43d67f(0x1a0)]['waInstances'][_0x46f79b[_0x43d67f(0x653)]]=_0x46f79b;let _0x3f4311={};_0x59aaed?(await this[_0x43d67f(0x210)][_0x43d67f(0x186)][_0x43d67f(0x31e)]({'apikey':_0x59aaed},_0x2b3d23),_0x3f4311[_0x43d67f(0x5f8)]=_0x59aaed):_0x3f4311=await this[_0x43d67f(0x459)][_0x43d67f(0x5bc)]({'instanceName':_0x46f79b['instanceName']});let _0x112ce3;if(_0x21af0f){if(_0x112ce3=await this[_0x43d67f(0x2c1)](_0x21af0f),_0x112ce3['error'])throw new x(_0x112ce3[_0x43d67f(0x723)][_0x43d67f(0x2c5)]());_0x21af0f=_0x112ce3['number'];}let _0x58d494;return await _0x46f79b['connectToWhatsapp'](_0x21af0f),await(0x0,Kt[_0x43d67f(0xb9)])(0xfa0),_0x21af0f&&await(0x0,Kt[_0x43d67f(0xb9)])(0xbb8),_0x58d494=_0x46f79b[_0x43d67f(0x474)],{'instance':{'instanceName':_0x46f79b['instanceName'],'status':_0x43d67f(0x47d)},'hash':_0x3f4311,'qrcode':_0x58d494};}catch(_0x3141e3){throw this['logger']['error'](_0x3141e3),_0x3141e3;}}async[a0_0x37fa70(0x22c)]({instanceName:_0x1138af,number:_0x3180dc=null}){const _0x398eda=a0_0x37fa70;try{let _0x2144e6=this['waMonitor']['waInstances'][_0x1138af];switch(_0x2144e6?.[_0x398eda(0x3dd)]?.[_0x398eda(0x68d)]){case _0x398eda(0x380):return await _0x2144e6['connectToWhatsapp'](_0x3180dc),await(0x0,Kt[_0x398eda(0xb9)])(0x7d0),_0x2144e6['qrCode'];case _0x398eda(0xd6):return _0x2144e6[_0x398eda(0x474)];default:return await this[_0x398eda(0x170)]({'instanceName':_0x1138af});}}catch(_0x3d35c7){this['logger'][_0x398eda(0xec)](_0x3d35c7);}}async[a0_0x37fa70(0x170)]({instanceName:_0x145f1a}){const _0x2ac0f9=a0_0x37fa70;let _0x435de1=this[_0x2ac0f9(0x1a0)][_0x2ac0f9(0x2b6)][_0x145f1a]['connectionStatus'],_0x458f77=null;_0x435de1['state']==='open'&&_0x145f1a&&(_0x458f77=await this[_0x2ac0f9(0x1a0)][_0x2ac0f9(0x4c6)](_0x145f1a));let _0x2365a2=null;return _0x435de1['state']===_0x2ac0f9(0xd6)&&_0x145f1a&&(_0x2365a2=this[_0x2ac0f9(0x1a0)][_0x2ac0f9(0x2b6)][_0x145f1a][_0x2ac0f9(0x474)]),{'instance':_0x145f1a,'connectionStatus':_0x435de1,'instanceInfo':_0x458f77,'qrcode':_0x2365a2};}async[a0_0x37fa70(0x2c1)](_0x185e14){const _0xd04e95=a0_0x37fa70;_0x185e14=_0x185e14[_0xd04e95(0x2e9)](/\D/g,'');let _0x4f6605=Object[_0xd04e95(0x674)](this['waMonitor'][_0xd04e95(0x2b6)])[_0xd04e95(0x1c2)](_0x117d6f=>{const _0x238014=_0xd04e95;let _0x2ba32a=this[_0x238014(0x1a0)][_0x238014(0x2b6)][_0x117d6f];return _0x2ba32a&&_0x2ba32a[_0x238014(0x3dd)]&&_0x2ba32a['connectionStatus'][_0x238014(0x68d)]===_0x238014(0x364);});if(_0x4f6605[_0xd04e95(0x426)]===0x0)return{'number':this['formatBRNumber'](_0x185e14)};let _0x1267df=Math[_0xd04e95(0x431)](Math['random']()*_0x4f6605[_0xd04e95(0x426)]),_0x2311c5=_0x4f6605[_0x1267df];try{let _0x44d886=(await this[_0xd04e95(0x1a0)]['waInstances'][_0x2311c5][_0xd04e95(0x3c5)]({'numbers':[_0x185e14]}))[_0xd04e95(0x5cd)]();return _0x44d886['exists']?{'number':_0x44d886[_0xd04e95(0xb1)][_0xd04e95(0x2e9)](_0xd04e95(0x561),'')}:{'number':_0x185e14,'error':_0xd04e95(0x3bc)};}catch(_0x28301d){return this[_0xd04e95(0x39e)]['error'](_0xd04e95(0x542)+_0x28301d),{'number':_0x185e14,'error':_0xd04e95(0x201)};}}[a0_0x37fa70(0x108)](_0x51026a){const _0x38f5d3=a0_0x37fa70;let _0x2dd3b0=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x38f5d3(0x2d4)](_0x51026a);if(_0x2dd3b0&&_0x2dd3b0[0x1]==='55'){let _0x9a17c9=_0x2dd3b0[0x2],_0x414f28=_0x2dd3b0[0x3],_0x1e2421=_0x2dd3b0[0x4];if(parseInt(_0x9a17c9)>=0x1f&&_0x414f28==='9')return _0x2dd3b0[0x1]+_0x9a17c9+_0x1e2421;}return _0x51026a;}async['restartInstance']({instanceName:_0x17ea27}){const _0x53d956=a0_0x37fa70;try{return this[_0x53d956(0x1a0)][_0x53d956(0x2b6)][_0x17ea27]?.[_0x53d956(0x688)]?.['ws']?.[_0x53d956(0x380)](),{'status':'SUCCESS','error':!0x1,'response':{'message':_0x53d956(0x161)}};}catch(_0x44bb22){this['logger'][_0x53d956(0x723)](_0x44bb22);}}async[a0_0x37fa70(0x427)]({instanceName:_0x1b27d3}){const _0x3e9fef=a0_0x37fa70;return _0x1b27d3?this[_0x3e9fef(0x1a0)][_0x3e9fef(0x4c6)](_0x1b27d3):this[_0x3e9fef(0x1a0)][_0x3e9fef(0x4c6)]();}async[a0_0x37fa70(0x124)]({instanceName:_0x359fd6}){const _0x5698c4=a0_0x37fa70;try{return await this['waMonitor'][_0x5698c4(0x2b6)][_0x359fd6]?.['client']?.[_0x5698c4(0x124)]('Log\x20out\x20instance:\x20'+_0x359fd6),{'error':!0x1,'message':_0x5698c4(0x4bc)};}catch(_0x2a7bf8){throw new x(_0x2a7bf8[_0x5698c4(0x2c5)]());}}async[a0_0x37fa70(0x428)]({instanceName:_0x405049}){const _0x5f53f8=a0_0x37fa70;if((await this[_0x5f53f8(0x170)]({'instanceName':_0x405049}))[_0x5f53f8(0x3dd)]['state']==='open')throw new m([_0x5f53f8(0x7a0),_0x5f53f8(0x5fa)]);try{return delete this[_0x5f53f8(0x1a0)][_0x5f53f8(0x2b6)][_0x405049],{'error':!0x1,'message':_0x5f53f8(0x1e3)};}catch(_0x25f958){throw new m(_0x25f958[_0x5f53f8(0x2c5)]());}}},re=require('class-validator'),Yt=class{constructor(_0x31df82){const _0xc8142c=a0_0x37fa70;this[_0xc8142c(0x1a0)]=_0x31df82;}async[a0_0x37fa70(0x11d)]({instanceName:_0x28f025},_0x28a083){const _0x25cb4d=a0_0x37fa70;return await this[_0x25cb4d(0x1a0)][_0x25cb4d(0x2b6)][_0x28f025][_0x25cb4d(0x3a6)](_0x28a083);}async['sendMenu']({instanceName:_0x3c3288},_0x5ee106){const _0x3f3904=a0_0x37fa70;return await this[_0x3f3904(0x1a0)][_0x3f3904(0x2b6)][_0x3c3288][_0x3f3904(0x340)](_0x5ee106);}async[a0_0x37fa70(0x481)]({instanceName:_0x3f1ed7},_0x575ac1){const _0x2a4d3e=a0_0x37fa70;if((0x0,re[_0x2a4d3e(0x6c0)])(_0x575ac1?.['mediaMessage']?.[_0x2a4d3e(0x435)])&&!_0x575ac1?.['mediaMessage']?.[_0x2a4d3e(0x765)])throw new m(_0x2a4d3e(0x58e));if((0x0,re[_0x2a4d3e(0xc8)])(_0x575ac1?.[_0x2a4d3e(0x6ec)]?.[_0x2a4d3e(0x435)])||(0x0,re['isBase64'])(_0x575ac1?.[_0x2a4d3e(0x6ec)]?.['media']))return await this[_0x2a4d3e(0x1a0)][_0x2a4d3e(0x2b6)][_0x3f1ed7]['mediaMessage'](_0x575ac1);throw new m(_0x2a4d3e(0x63d));}async[a0_0x37fa70(0x12e)]({instanceName:_0x7d5747},_0xb4c0){const _0x57307d=a0_0x37fa70;if((0x0,re[_0x57307d(0xc8)])(_0xb4c0['stickerMessage'][_0x57307d(0x1b2)])||(0x0,re[_0x57307d(0x6c0)])(_0xb4c0[_0x57307d(0x59e)]['image']))return await this[_0x57307d(0x1a0)]['waInstances'][_0x7d5747][_0x57307d(0x39d)](_0xb4c0);throw new m(_0x57307d(0x63d));}async['sendWhatsAppAudio']({instanceName:_0x4c7965},_0x1e5326){const _0x128dd7=a0_0x37fa70;if((0x0,re[_0x128dd7(0xc8)])(_0x1e5326['audioMessage'][_0x128dd7(0x1a9)])||(0x0,re[_0x128dd7(0x6c0)])(_0x1e5326[_0x128dd7(0x567)][_0x128dd7(0x1a9)]))return await this[_0x128dd7(0x1a0)][_0x128dd7(0x2b6)][_0x4c7965][_0x128dd7(0x287)](_0x1e5326);throw new m(_0x128dd7(0x63d));}async['sendButtons']({instanceName:_0x25f431},_0x2fbdb6){const _0x342004=a0_0x37fa70;if((0x0,re[_0x342004(0x6c0)])(_0x2fbdb6[_0x342004(0x63f)]['mediaMessage']?.[_0x342004(0x435)])&&!_0x2fbdb6[_0x342004(0x63f)][_0x342004(0x6ec)]?.[_0x342004(0x765)])throw new m(_0x342004(0x58e));return await this[_0x342004(0x1a0)][_0x342004(0x2b6)][_0x25f431][_0x342004(0x63f)](_0x2fbdb6);}async[a0_0x37fa70(0x669)]({instanceName:_0x2e49f4},_0x143b76){const _0x4e7be1=a0_0x37fa70;return await this[_0x4e7be1(0x1a0)]['waInstances'][_0x2e49f4][_0x4e7be1(0x6f6)](_0x143b76);}async[a0_0x37fa70(0x54c)]({instanceName:_0x1f81f6},_0x9ef1c5){const _0x257ff0=a0_0x37fa70;return await this[_0x257ff0(0x1a0)][_0x257ff0(0x2b6)][_0x1f81f6]['pollMessage'](_0x9ef1c5);}async['sendList']({instanceName:_0x18a6e4},_0x57b36f){const _0x108a33=a0_0x37fa70;return await this['waMonitor'][_0x108a33(0x2b6)][_0x18a6e4][_0x108a33(0x5a8)](_0x57b36f);}async[a0_0x37fa70(0xd8)]({instanceName:_0x52ab91},_0x53a8b1){const _0x576874=a0_0x37fa70;return await this[_0x576874(0x1a0)]['waInstances'][_0x52ab91]['contactMessage'](_0x53a8b1);}async['sendReaction']({instanceName:_0x5b14a2},_0x5c8906){const _0x2a50e7=a0_0x37fa70;if(!_0x5c8906[_0x2a50e7(0x514)][_0x2a50e7(0x297)]['match'](/[^\(\)\w\sà-ú"-\+]+/))throw new m(_0x2a50e7(0x727));return await this[_0x2a50e7(0x1a0)][_0x2a50e7(0x2b6)][_0x5b14a2][_0x2a50e7(0x514)](_0x5c8906);}async[a0_0x37fa70(0x604)]({instanceName:_0x12272c},_0x518e60){const _0xf4b980=a0_0x37fa70;return await this[_0xf4b980(0x1a0)]['waInstances'][_0x12272c][_0xf4b980(0x212)](_0x518e60);}},Li=require(a0_0x37fa70(0x789)),js=require('uuid'),Xt=class u{constructor(_0x4a05c6,_0x61c06c,_0x22ca7c){const _0xb82116=a0_0x37fa70;this['configService']=_0x4a05c6,this['waMonitor']=_0x61c06c,this[_0xb82116(0x210)]=_0x22ca7c,this[_0xb82116(0x39e)]=new $(u['name']);}async[a0_0x37fa70(0x7bc)](_0x2dcf09){const _0x5bfd52=a0_0x37fa70;let _0x51eed9=this[_0x5bfd52(0x763)][_0x5bfd52(0x7b6)](_0x5bfd52(0x725))[_0x5bfd52(0x25a)],_0x555bf0=(0x0,Li[_0x5bfd52(0x25e)])({'instanceName':_0x2dcf09['instanceName'],'apiName':nt,'tokenId':(0x0,js['v4'])()},_0x51eed9['SECRET'],{'expiresIn':_0x51eed9['EXPIRIN_IN'],'encoding':_0x5bfd52(0x616),'subject':'g-t'}),_0x16ff27=await this[_0x5bfd52(0x210)][_0x5bfd52(0x186)]['create']({'jwt':_0x555bf0},_0x2dcf09['instanceName']);if(_0x16ff27['error'])throw this[_0x5bfd52(0x39e)][_0x5bfd52(0x723)]({'localError':u[_0x5bfd52(0x410)]+_0x5bfd52(0x3ce),'error':_0x16ff27[_0x5bfd52(0x723)]}),new m(_0x5bfd52(0x10a),_0x16ff27['error']?.[_0x5bfd52(0x2c5)]());return{'jwt':_0x555bf0};}async[a0_0x37fa70(0x5f8)](_0x19f023){const _0x59b551=a0_0x37fa70;let _0x43f1d8=(0x0,js['v4'])()[_0x59b551(0x103)](),_0x2e9a7a=await this['repository'][_0x59b551(0x186)][_0x59b551(0x31e)]({'apikey':_0x43f1d8},_0x19f023[_0x59b551(0x653)]);if(_0x2e9a7a[_0x59b551(0x723)])throw this[_0x59b551(0x39e)][_0x59b551(0x723)]({'localError':u['name']+_0x59b551(0x3ce),'error':_0x2e9a7a[_0x59b551(0x723)]}),new m(_0x59b551(0x10a),_0x2e9a7a[_0x59b551(0x723)]?.['toString']());return{'apikey':_0x43f1d8};}async[a0_0x37fa70(0x5bc)](_0x542cf4){const _0x56a465=a0_0x37fa70;let _0x2692a1=this['configService'][_0x56a465(0x7b6)](_0x56a465(0x725));return await this[_0x2692a1['TYPE']](_0x542cf4);}},Zt=class{constructor(_0x33bdff){this['waMonitor']=_0x33bdff;}async[a0_0x37fa70(0x7f)](_0x2c2008,_0x31edce){const _0x449848=a0_0x37fa70;return await this['waMonitor'][_0x449848(0x2b6)][_0x2c2008['instanceName']][_0x449848(0x7f)](_0x31edce);}async['updateGroupPicture'](_0x38a8b5,_0xd5a658){const _0x38e3b1=a0_0x37fa70;return await this[_0x38e3b1(0x1a0)][_0x38e3b1(0x2b6)][_0x38a8b5[_0x38e3b1(0x653)]]['updateGroupPicture'](_0xd5a658);}async[a0_0x37fa70(0x4d5)](_0x31d6e0,_0x4a651a){const _0x24c344=a0_0x37fa70;return await this['waMonitor'][_0x24c344(0x2b6)][_0x31d6e0['instanceName']]['groupDesc'](_0x4a651a);}async[a0_0x37fa70(0x220)](_0x228f97,_0x3a0a52){const _0x22d610=a0_0x37fa70;return await this[_0x22d610(0x1a0)][_0x22d610(0x2b6)][_0x228f97['instanceName']][_0x22d610(0x220)](_0x3a0a52);}async[a0_0x37fa70(0x3e6)](_0xb78399,_0x4b1883){const _0x12cf80=a0_0x37fa70;return await this['waMonitor']['waInstances'][_0xb78399[_0x12cf80(0x653)]][_0x12cf80(0x3e6)](_0x4b1883);}async[a0_0x37fa70(0x214)](_0x22e19a,_0x4f410c){const _0xd5adcd=a0_0x37fa70;return await this[_0xd5adcd(0x1a0)]['waInstances'][_0x22e19a[_0xd5adcd(0x653)]][_0xd5adcd(0x214)](_0x4f410c);}async[a0_0x37fa70(0x385)](_0x54ed75,_0x46aaee){const _0x2a1ef7=a0_0x37fa70;return await this[_0x2a1ef7(0x1a0)]['waInstances'][_0x54ed75['instanceName']][_0x2a1ef7(0x5c2)](_0x46aaee);}async[a0_0x37fa70(0x511)](_0x3c4a96){const _0x5609c3=a0_0x37fa70;return await this[_0x5609c3(0x1a0)]['waInstances'][_0x3c4a96[_0x5609c3(0x653)]][_0x5609c3(0x511)]();}async[a0_0x37fa70(0x4d4)](_0x57276f,_0x2dd285){const _0x226230=a0_0x37fa70;return await this[_0x226230(0x1a0)]['waInstances'][_0x57276f[_0x226230(0x653)]][_0x226230(0x4d4)](_0x2dd285);}async['joinGroup'](_0x1d31b6,_0xcea326){const _0x2928cf=a0_0x37fa70;return await this[_0x2928cf(0x1a0)]['waInstances'][_0x1d31b6['instanceName']][_0x2928cf(0x84)](_0xcea326);}async[a0_0x37fa70(0x6fd)](_0x28b884,_0x502880){const _0x298557=a0_0x37fa70;return await this['waMonitor'][_0x298557(0x2b6)][_0x28b884[_0x298557(0x653)]][_0x298557(0x6fd)](_0x502880);}async[a0_0x37fa70(0x2d6)](_0x282039,_0x27aa82){const _0x41ee6a=a0_0x37fa70;return await this[_0x41ee6a(0x1a0)][_0x41ee6a(0x2b6)][_0x282039[_0x41ee6a(0x653)]][_0x41ee6a(0x2d6)](_0x27aa82);}async[a0_0x37fa70(0x687)](_0xd73fb5,_0x2686f6){const _0x50a900=a0_0x37fa70;return await this[_0x50a900(0x1a0)][_0x50a900(0x2b6)][_0xd73fb5[_0x50a900(0x653)]][_0x50a900(0x687)](_0x2686f6);}async[a0_0x37fa70(0x366)](_0x5e70f4,_0x4c191b){const _0x3cfe42=a0_0x37fa70;return await this['waMonitor'][_0x3cfe42(0x2b6)][_0x5e70f4['instanceName']][_0x3cfe42(0x4f9)](_0x4c191b);}async[a0_0x37fa70(0x6a7)](_0x1e1109,_0x3c916e){const _0x3e6376=a0_0x37fa70;return await this[_0x3e6376(0x1a0)][_0x3e6376(0x2b6)][_0x1e1109['instanceName']][_0x3e6376(0x6a7)](_0x3c916e);}async[a0_0x37fa70(0x28c)](_0x6d25b,_0x3f72b5){const _0x1f0993=a0_0x37fa70;return await this[_0x1f0993(0x1a0)]['waInstances'][_0x6d25b['instanceName']][_0x1f0993(0x28c)](_0x3f72b5);}},es=class{constructor(_0x24d2ea){const _0x5aaa98=a0_0x37fa70;this[_0x5aaa98(0x1a0)]=_0x24d2ea;}[a0_0x37fa70(0x31e)](_0x2e78b1,_0x186a53){const _0x5a72b4=a0_0x37fa70;return this[_0x5a72b4(0x1a0)][_0x5a72b4(0x2b6)][_0x2e78b1[_0x5a72b4(0x653)]][_0x5a72b4(0x131)](_0x186a53);}async['find'](_0x4c5572){const _0x3661e4=a0_0x37fa70;try{return await this['waMonitor'][_0x3661e4(0x2b6)][_0x4c5572['instanceName']]['findWebhook']();}catch{return{'enabled':null,'url':''};}}},Wp=new $(a0_0x37fa70(0x59d)),ts=class{constructor(_0x582144){const _0x59a5ae=a0_0x37fa70;this[_0x59a5ae(0x1a0)]=_0x582144;}async[a0_0x37fa70(0x6eb)](_0x1c0910,_0x5ab6ab){const _0x47bf65=a0_0x37fa70;return await this['waMonitor'][_0x47bf65(0x2b6)][_0x1c0910['instanceName']][_0x47bf65(0x6eb)](_0x5ab6ab);}async[a0_0x37fa70(0x557)](_0x5ea3c0){const _0x486342=a0_0x37fa70;return await this[_0x486342(0x1a0)][_0x486342(0x2b6)][_0x5ea3c0[_0x486342(0x653)]][_0x486342(0x557)]();}async[a0_0x37fa70(0x793)](_0x43f2a5){const _0x373d52=a0_0x37fa70;return await this['waMonitor'][_0x373d52(0x2b6)][_0x43f2a5[_0x373d52(0x653)]][_0x373d52(0x793)]();}async[a0_0x37fa70(0x2b1)](_0xc25d59){const _0x4cd412=a0_0x37fa70;return await this[_0x4cd412(0x1a0)][_0x4cd412(0x2b6)][_0xc25d59['instanceName']][_0x4cd412(0x2b1)]();}async[a0_0x37fa70(0x100)](_0xc66292,_0x55a278){const _0x4ea809=a0_0x37fa70;return await this[_0x4ea809(0x1a0)][_0x4ea809(0x2b6)][_0xc66292[_0x4ea809(0x653)]][_0x4ea809(0x100)](_0x55a278);}async[a0_0x37fa70(0x53d)](_0x51a924,_0x2ed9b2){const _0x2a4b0d=a0_0x37fa70;return await this[_0x2a4b0d(0x1a0)][_0x2a4b0d(0x2b6)][_0x51a924[_0x2a4b0d(0x653)]][_0x2a4b0d(0x53d)](_0x2ed9b2);}async[a0_0x37fa70(0x35a)](_0x3393af,_0x47c661){const _0xe25d77=a0_0x37fa70;return await this['waMonitor'][_0xe25d77(0x2b6)][_0x3393af['instanceName']][_0xe25d77(0x35a)](_0x47c661);}async[a0_0x37fa70(0x49a)](_0x5127bb,_0x2227a7){const _0x5a9c77=a0_0x37fa70;return await this['waMonitor'][_0x5a9c77(0x2b6)][_0x5127bb[_0x5a9c77(0x653)]][_0x5a9c77(0x49a)](_0x2227a7);}async['startFlow'](_0x22931b,_0x4d6edd){const _0x391628=a0_0x37fa70;return await this['waMonitor'][_0x391628(0x2b6)][_0x22931b[_0x391628(0x653)]]['startFlow'](_0x4d6edd);}async[a0_0x37fa70(0x303)](_0x1cc7df,_0xaa8c78,_0x27200d,_0x1eb5bb){const _0x432106=a0_0x37fa70;return await this['waMonitor']['waInstances'][_0x1cc7df][_0x432106(0x303)](_0xaa8c78,_0x27200d,_0x1eb5bb);}async[a0_0x37fa70(0x799)](_0x259e82,_0xa96e46){const _0xd51e35=a0_0x37fa70;return await this[_0xd51e35(0x1a0)][_0xd51e35(0x2b6)][_0x259e82[_0xd51e35(0x653)]]['getConversation'](_0xa96e46);}async[a0_0x37fa70(0x48e)](_0x48d794,_0x4568ac){const _0x479449=a0_0x37fa70;return await this[_0x479449(0x1a0)]['waInstances'][_0x48d794[_0x479449(0x653)]][_0x479449(0x48e)](_0x4568ac);}async[a0_0x37fa70(0x589)](_0x2e8aed,_0x1b93af){const _0x4d0826=a0_0x37fa70;return await this[_0x4d0826(0x1a0)][_0x4d0826(0x2b6)][_0x2e8aed[_0x4d0826(0x653)]][_0x4d0826(0x589)](_0x1b93af);}async[a0_0x37fa70(0x651)](_0x504de4,_0x3b2c0c){const _0x2e24fb=a0_0x37fa70;return await this[_0x2e24fb(0x1a0)][_0x2e24fb(0x2b6)][_0x504de4[_0x2e24fb(0x653)]]['deleteConversation'](_0x3b2c0c);}async[a0_0x37fa70(0x465)](_0x5a3247,_0x1b2783){const _0x2961f9=a0_0x37fa70;return await this[_0x2961f9(0x1a0)][_0x2961f9(0x2b6)][_0x5a3247[_0x2961f9(0x653)]][_0x2961f9(0x465)](_0x1b2783[_0x2961f9(0x1b0)]);}async[a0_0x37fa70(0x72f)](_0x443b04,_0x2f636e,_0x4de460){const _0x5eb948=a0_0x37fa70;return await this['waMonitor'][_0x5eb948(0x2b6)][_0x443b04['instanceName']][_0x5eb948(0x72f)](_0x2f636e,_0x4de460);}async['editFlow'](_0x14d73f,_0x1b2b2f,_0x5ea2e1){const _0x2ad677=a0_0x37fa70;return await this[_0x2ad677(0x1a0)]['waInstances'][_0x14d73f[_0x2ad677(0x653)]][_0x2ad677(0x776)](_0x1b2b2f,_0x5ea2e1);}async['editFlowBlock'](_0x2566de,_0x560462){const _0x28bc1e=a0_0x37fa70;return await this[_0x28bc1e(0x1a0)]['waInstances'][_0x2566de['instanceName']][_0x28bc1e(0x1b7)](_0x560462);}async['editFlowReply'](_0x3b6a1f,_0x2567b5){const _0x3f706c=a0_0x37fa70;return await this[_0x3f706c(0x1a0)][_0x3f706c(0x2b6)][_0x3b6a1f[_0x3f706c(0x653)]][_0x3f706c(0x59a)](_0x2567b5);}async[a0_0x37fa70(0x58c)](_0x21c548,_0x1d2bdb){const _0x74aeb4=a0_0x37fa70;return await this['waMonitor'][_0x74aeb4(0x2b6)][_0x21c548[_0x74aeb4(0x653)]][_0x74aeb4(0x58c)](_0x1d2bdb);}async[a0_0x37fa70(0x787)](_0x34f7fc,_0x2c65d4){const _0x1ae22d=a0_0x37fa70;return await this[_0x1ae22d(0x1a0)]['waInstances'][_0x34f7fc['instanceName']][_0x1ae22d(0x787)](_0x2c65d4);}async['editFlowVaredit'](_0x47d1c8,_0x56a7e9){const _0x36a78c=a0_0x37fa70;return await this[_0x36a78c(0x1a0)]['waInstances'][_0x47d1c8[_0x36a78c(0x653)]][_0x36a78c(0x65f)](_0x56a7e9);}async['editFlowVariable'](_0x4157e3,_0x4f234d){const _0x36e738=a0_0x37fa70;return await this['waMonitor'][_0x36e738(0x2b6)][_0x4157e3['instanceName']][_0x36e738(0x1de)](_0x4f234d);}async[a0_0x37fa70(0x6b2)](_0x515a8e,_0x210666){const _0x182074=a0_0x37fa70;return await this[_0x182074(0x1a0)][_0x182074(0x2b6)][_0x515a8e[_0x182074(0x653)]][_0x182074(0x6b2)](_0x210666);}async[a0_0x37fa70(0x2b7)](_0x53f908){const _0x50a084=a0_0x37fa70;return await this[_0x50a084(0x1a0)]['waInstances'][_0x53f908[_0x50a084(0x653)]]['allFlows']();}},ss=class{constructor(_0x129e33){const _0x28f925=a0_0x37fa70;this[_0x28f925(0x48d)]=_0x129e33;}async[a0_0x37fa70(0x1cf)](_0x2a84fa,_0x4c215b){const _0x490296=a0_0x37fa70;return this[_0x490296(0x48d)][_0x490296(0x31e)](_0x2a84fa,_0x4c215b);}async[a0_0x37fa70(0x73b)](_0x4ff804){const _0x582ef8=a0_0x37fa70;return this[_0x582ef8(0x48d)][_0x582ef8(0x3b4)](_0x4ff804);}},as=class extends O{constructor(_0x1609b8,_0x2c57dd){super(_0x2c57dd),this['webhookModel']=_0x1609b8,this['configService']=_0x2c57dd;}async['create'](_0x3338a5,_0x5df0df){const _0x5cae29=a0_0x37fa70;try{return this[_0x5cae29(0x122)][_0x5cae29(0x464)]?{'insertCount':(await this[_0x5cae29(0xb4)][_0x5cae29(0x379)]({'_id':_0x5df0df},{..._0x3338a5},{'upsert':!0x0}))[_0x5cae29(0x7a3)]}:{'insertCount':0x1};}catch(_0x3734f0){return _0x3734f0;}}async['delete'](_0x106fa5){const _0x3653bc=a0_0x37fa70;try{if(this[_0x3653bc(0x122)][_0x3653bc(0x464)]){await this[_0x3653bc(0xb4)][_0x3653bc(0x730)]({'_id':_0x106fa5});return;}}catch(_0x44d974){return{'error':_0x44d974};}}async[a0_0x37fa70(0x3b4)](_0xd6a864){const _0x5b8850=a0_0x37fa70;try{if(this[_0x5b8850(0x122)][_0x5b8850(0x464)])return await this[_0x5b8850(0xb4)][_0x5b8850(0x1e2)]({'_id':_0xd6a864});}catch{return{};}}},is=class extends O{constructor(_0x19970b,_0x5ac61f){const _0x14cf86=a0_0x37fa70;super(_0x5ac61f),this[_0x14cf86(0x535)]=_0x19970b,this[_0x14cf86(0x763)]=_0x5ac61f,this['auth']=_0x5ac61f['get'](_0x14cf86(0x725));}async[a0_0x37fa70(0x31e)](_0x374e85,_0x1b8486){const _0x2d1e38=a0_0x37fa70;try{if(this[_0x2d1e38(0x122)][_0x2d1e38(0x464)])return{'insertCount':(await this[_0x2d1e38(0x535)][_0x2d1e38(0x130)]({'_id':_0x1b8486},{'$set':{..._0x374e85}},{'upsert':!0x0}))[_0x2d1e38(0x7a3)]};}catch(_0x1b0591){return{'error':_0x1b0591};}}async[a0_0x37fa70(0x4b5)](_0x5a945c,_0x543855){const _0x3cb53b=a0_0x37fa70;try{if(this[_0x3cb53b(0x122)][_0x3cb53b(0x464)])return{'insertCount':(await this[_0x3cb53b(0x535)][_0x3cb53b(0x10e)](_0x5a945c,{'$set':_0x543855},{'upsert':!0x1}))[_0x3cb53b(0x7a3)]};throw new Error(_0x3cb53b(0x1ef));}catch(_0x514c93){return{'error':_0x514c93};}}async['deleteMany'](_0x259bc8){const _0x2f98e1=a0_0x37fa70;try{if(this[_0x2f98e1(0x122)][_0x2f98e1(0x464)])return{'insertCount':(await this[_0x2f98e1(0x535)][_0x2f98e1(0x241)](_0x259bc8))[_0x2f98e1(0x2ac)]};throw new Error(_0x2f98e1(0x534));}catch(_0x3d2884){return{'error':_0x3d2884};}}async[a0_0x37fa70(0x6ad)](_0x27f47c){const _0x301ec8=a0_0x37fa70;try{if(this[_0x301ec8(0x122)][_0x301ec8(0x464)]){await this[_0x301ec8(0x535)]['deleteOne']({'_id':_0x27f47c});return;}}catch(_0x45992f){return{'error':_0x45992f};}}async['find'](_0x3e6629){const _0x152cd1=a0_0x37fa70;try{if(this['dbSettings'][_0x152cd1(0x464)])return await this[_0x152cd1(0x535)][_0x152cd1(0x1e2)]({'_id':_0x3e6629});}catch{return{};}}async[a0_0x37fa70(0x14e)](){const _0x56253d=a0_0x37fa70;try{if(this[_0x56253d(0x122)][_0x56253d(0x464)])return await this['authModel'][_0x56253d(0x3b4)]();}catch{return[];}}async[a0_0x37fa70(0x89)](_0x4c98b0){const _0x942b18=a0_0x37fa70;try{if(this[_0x942b18(0x122)][_0x942b18(0x464)])return await this[_0x942b18(0x535)][_0x942b18(0x3b4)](_0x4c98b0);}catch{return[];}}},Ui=require('uuid'),os=class extends O{async[a0_0x37fa70(0x730)](_0x282558){const _0x1c4a43=a0_0x37fa70;try{let _0x253d93=T(_0x282558[_0x1c4a43(0x34f)]);return{'deletedCount':(await ye[_0x1c4a43(0x730)](_0x253d93))[_0x1c4a43(0x2ac)]};}catch(_0x2aa924){return{'error':_0x2aa924?.[_0x1c4a43(0x2c5)]()};}}async['updateOne'](_0x5b54d0,_0x251c25){const _0x37d45b=a0_0x37fa70;try{let _0x2ecbf2=await ye[_0x37d45b(0x4a5)](_0x5b54d0);return _0x2ecbf2?(Object[_0x37d45b(0x4f8)](_0x2ecbf2,_0x251c25),await _0x2ecbf2[_0x37d45b(0x58a)]()):(console[_0x37d45b(0x723)](_0x37d45b(0x7aa),_0x5b54d0),null);}catch(_0x412cf3){return console['error'](_0x37d45b(0x5b6),_0x412cf3),null;}}async['createAndSave'](_0x37437f){const _0x4b4e36=a0_0x37fa70;try{return await new ye(_0x37437f)['save']();}catch(_0x188db6){return console[_0x4b4e36(0x723)](_0x4b4e36(0x55b),_0x188db6),null;}}async[a0_0x37fa70(0x14e)](_0x2c59c1){const _0xe65eb=a0_0x37fa70;try{let _0x1cf951=_0x2c59c1[_0xe65eb(0x34f)]??{};return await ye[_0xe65eb(0x3b4)](_0x1cf951)[_0xe65eb(0x485)](_0x2c59c1[_0xe65eb(0x485)]??0x0)[_0xe65eb(0x2f3)]();}catch(_0x456654){return console[_0xe65eb(0x723)]('Erro\x20ao\x20buscar\x20fluxos:',_0x456654),[];}}async[a0_0x37fa70(0x1e2)](_0xe101){const _0x4f4ac0=a0_0x37fa70;try{let _0x1c46cd=T(_0xe101['where']);return await ye[_0x4f4ac0(0x1e2)](_0x1c46cd)[_0x4f4ac0(0x2f3)]();}catch{return null;}}async[a0_0x37fa70(0x1da)](_0x26344a){const _0x212604=a0_0x37fa70;try{let _0x427bcd=Ma(_0x26344a);if(!_0x427bcd)return console[_0x212604(0x723)](_0x212604(0x5b2)+_0x26344a),0x0;let _0x359857=await _0x427bcd[_0x212604(0x3b4)]({})[_0x212604(0x2f3)]();if(console['log']('Fluxos\x20encontrados\x20de\x20\x27'+_0x26344a+_0x212604(0x608)+_0x359857[_0x212604(0x426)]),!_0x359857||_0x359857[_0x212604(0x426)]===0x0)return console[_0x212604(0xec)](_0x212604(0x33c)+_0x26344a),0x0;let _0x3b75e9=_0x359857[_0x212604(0x3c4)](_0x5c1411=>{const _0x2c4441=_0x212604;let {global:_0x36beb0,startID:_0x3dec6a,sharePass:_0x2a7476,shareOwners:_0x36d27d,minutesToClose:_0x2f5b73,readMessages:_0x3b25fe,testingWith:_0x4cab4c,startCommandWord:_0x1d8a75,default:_0x2f940f,..._0x4d86f7}=_0x5c1411,_0x537011=Array[_0x2c4441(0x27b)](new Set([..._0x36d27d,_0x26344a])),_0x46a472=Array['from'](new Set([..._0x36d27d,_0x26344a]));return{..._0x4d86f7,'_id':(0x0,Ui['v4'])(),'owner':_0x26344a,'globalShow':_0x5c1411[_0x2c4441(0x6d)]===_0x2c4441(0x175),'whoCanEdit':_0x537011,'whoCanUse':_0x46a472};});return await ye[_0x212604(0x75e)](_0x3b75e9),await _0x427bcd['collection'][_0x212604(0x6e2)](),console[_0x212604(0xec)](_0x212604(0x62b)+_0x26344a+_0x212604(0x732)),_0x3b75e9[_0x212604(0x426)];}catch(_0x543bb1){return console[_0x212604(0x723)](_0x212604(0x15f)+_0x26344a+'\x27:',_0x543bb1),0x0;}}async['migrateAllOwnersFlowsToCentralizedCollection'](_0x394ecc){const _0x1d6b05=a0_0x37fa70;let _0x5824d0=0x0;for(let _0x35cdf0 of _0x394ecc){let _0x204060=await this[_0x1d6b05(0x1da)](_0x35cdf0);_0x5824d0+=_0x204060;}return console[_0x1d6b05(0xec)](_0x1d6b05(0x7ad)+_0x5824d0),_0x5824d0;}},rs=class extends O{[a0_0x37fa70(0x601)](_0x34d41e){return Ca(_0x34d41e);}async[a0_0x37fa70(0x737)](_0x526086){const _0x57e462=a0_0x37fa70;if(_0x526086['length']!==0x0)try{return{'insertCount':(await this[_0x57e462(0x601)](_0x526086[0x0]['owner'])['insertMany']([..._0x526086]))[_0x57e462(0x426)]};}catch(_0x15eaf1){return _0x15eaf1;}}async['delete'](_0x3adc67,_0x3a2558){const _0x516279=a0_0x37fa70;try{let _0x31f027=this[_0x516279(0x601)](_0x3a2558),_0x446099=T(_0x3adc67[_0x516279(0x34f)]);return{'deletedCount':(await _0x31f027['deleteMany'](_0x446099))[_0x516279(0x2ac)]};}catch(_0x164a46){return{'error':_0x164a46?.[_0x516279(0x2c5)]()};}}async['deleteOne'](_0x4c2be6,_0x9f5b51){const _0x2926a4=a0_0x37fa70;try{let _0x349e4e=this[_0x2926a4(0x601)](_0x9f5b51),_0x4901aa=T(_0x4c2be6['where']);return{'deletedCount':(await _0x349e4e[_0x2926a4(0x730)](_0x4901aa))[_0x2926a4(0x2ac)]};}catch(_0x3cc4f9){return{'error':_0x3cc4f9?.[_0x2926a4(0x2c5)]()};}}async[a0_0x37fa70(0x6c8)](_0x4527c6,_0xb3262f){const _0x5d7cec=a0_0x37fa70;try{if(_0x4527c6['length']===0x0)return;let _0x184936=this['getConversationModelForOwner'](_0xb3262f),_0x43187f=_0x4527c6[_0x5d7cec(0x3c4)](_0x583754=>({'updateOne':{'filter':{'name':_0x583754['name'],'owner':_0xb3262f},'update':{..._0x583754}}})),{modifiedCount:_0x5a8768}=await _0x184936['bulkWrite'](_0x43187f);return{'insertCount':_0x5a8768};}catch{return;}}async['updateMany'](_0x29da34,_0x565f6b,_0x1a3b86){const _0x561606=a0_0x37fa70;try{return{'modifiedCount':(await this[_0x561606(0x601)](_0x1a3b86)['updateMany'](_0x29da34,{'$set':_0x565f6b})[_0x561606(0x2d4)]())['modifiedCount']};}catch(_0x2436fe){return console[_0x561606(0x723)](_0x561606(0x244),_0x2436fe),{'error':_0x2436fe};}}async[a0_0x37fa70(0x130)](_0x1018f8,_0x2e22fd,_0x50edd6){const _0x44e120=a0_0x37fa70;try{return await this[_0x44e120(0x601)](_0x50edd6)[_0x44e120(0xa2)]({'_id':_0x1018f8},{'$set':_0x2e22fd},{'new':!0x0,'upsert':!0x0})[_0x44e120(0x2f3)]();}catch(_0x67515b){return console[_0x44e120(0x723)](_0x67515b),null;}}async[a0_0x37fa70(0x3b4)](_0x3a215c,_0x323da5){const _0xdb12f0=a0_0x37fa70;try{return await this[_0xdb12f0(0x601)](_0x323da5)[_0xdb12f0(0x3b4)](_0x3a215c)['sort']({'lastInteraction':-0x1})[_0xdb12f0(0x2f3)]();}catch{return[];}}async[a0_0x37fa70(0x1e2)](_0x387cc3,_0x2446ab){const _0x1b84fc=a0_0x37fa70;try{return await this[_0x1b84fc(0x601)](_0x2446ab)['findOne']({..._0x387cc3[_0x1b84fc(0x34f)]})[_0x1b84fc(0x2f3)]();}catch{return null;}}async[a0_0x37fa70(0x79b)](_0xcfc4be){const _0x54a780=a0_0x37fa70;try{return await this['getConversationModelForOwner'](_0xcfc4be)[_0x54a780(0x350)][_0x54a780(0x6e2)](),{'success':!0x0};}catch(_0x55140f){return console[_0x54a780(0x723)](_0x55140f),{'success':!0x1,'error':_0x55140f};}}},ns=class extends O{[a0_0x37fa70(0x15d)](_0x50c35f){return Ea(_0x50c35f);}async[a0_0x37fa70(0x261)](_0x429fa2,_0x1698de){const _0x18db92=a0_0x37fa70;try{return await this['getScheduleMessageModelForOwner'](_0x1698de)[_0x18db92(0x261)](_0x429fa2);}catch(_0x3970fb){return console[_0x18db92(0x723)](_0x18db92(0x422),_0x3970fb),null;}}async[a0_0x37fa70(0x184)](_0x281f85,_0x53cc5b){const _0x2de8ed=a0_0x37fa70;try{let _0x3dfce7=this['getScheduleMessageModelForOwner'](_0x53cc5b);return await new _0x3dfce7(_0x281f85)[_0x2de8ed(0x58a)]();}catch(_0x545bcb){return console[_0x2de8ed(0x723)](_0x2de8ed(0x204),_0x545bcb),null;}}async[a0_0x37fa70(0x730)](_0x19b034,_0x2a6508){const _0x4ea2d4=a0_0x37fa70;try{return await this[_0x4ea2d4(0x15d)](_0x2a6508)[_0x4ea2d4(0x5ad)](_0x19b034),{};}catch(_0x4383ec){return{'error':_0x4383ec?.[_0x4ea2d4(0x2c5)]()};}}async['updateOne'](_0x2578ad,_0x3d688c,_0x58320a,_0x272a14={}){const _0x4f22de=a0_0x37fa70;try{return await this[_0x4f22de(0x15d)](_0x58320a)[_0x4f22de(0xa2)](_0x2578ad,_0x3d688c,{..._0x272a14,'new':!0x0})[_0x4f22de(0x2f3)]();}catch(_0x5a909f){return console[_0x4f22de(0x723)]('Erro\x20ao\x20atualizar\x20uma\x20mensagem:',_0x5a909f),null;}}async['updateOneById'](_0x3f5213,_0x4fad85,_0xbc9279){const _0x117c60=a0_0x37fa70;try{return await this[_0x117c60(0x15d)](_0xbc9279)['findByIdAndUpdate'](_0x3f5213,_0x4fad85,{'new':!0x0})['lean']();}catch(_0x1f3d9e){return console[_0x117c60(0x723)](_0x117c60(0x54b),_0x1f3d9e),null;}}async[a0_0x37fa70(0x3b4)](_0x179651,_0x586f7b){const _0x347123=a0_0x37fa70;try{return await this['getScheduleMessageModelForOwner'](_0x586f7b)[_0x347123(0x3b4)](_0x179651['where'])[_0x347123(0x485)](_0x179651?.[_0x347123(0x485)]??0x0)[_0x347123(0x31a)]({'when':0x1})[_0x347123(0x2f3)]();}catch{return[];}}async[a0_0x37fa70(0x1e2)](_0x4b8f74,_0x22429e){const _0x3d0e7a=a0_0x37fa70;try{return await this[_0x3d0e7a(0x15d)](_0x22429e)[_0x3d0e7a(0x1e2)](_0x4b8f74[_0x3d0e7a(0x34f)])[_0x3d0e7a(0x31a)]({'when':0x1})[_0x3d0e7a(0x2f3)]();}catch{return null;}}async[a0_0x37fa70(0x4a5)](_0x2a1eef,_0x5340a9){const _0x1fa1c6=a0_0x37fa70;try{return await this[_0x1fa1c6(0x15d)](_0x5340a9)[_0x1fa1c6(0x4a5)](_0x2a1eef)[_0x1fa1c6(0x2f3)]();}catch{return null;}}async[a0_0x37fa70(0x241)](_0x5c11f3,_0x1a02e6){const _0x287517=a0_0x37fa70;try{return{'deletedCount':(await this[_0x287517(0x15d)](_0x1a02e6)['deleteMany'](_0x5c11f3))['deletedCount']};}catch(_0x32a43e){return console[_0x287517(0x723)](_0x287517(0x255),_0x32a43e),{'error':_0x32a43e};}}async[a0_0x37fa70(0x79b)](_0x2814c7){const _0x2290de=a0_0x37fa70;try{return await this[_0x2290de(0x15d)](_0x2814c7)[_0x2290de(0x350)][_0x2290de(0x6e2)](),{'success':!0x0};}catch(_0x4278cb){return console['error'](_0x4278cb),{'success':!0x1,'error':_0x4278cb};}}},cs=class extends O{async[a0_0x37fa70(0x6c8)](_0x10cd01,_0x2f06d6){const _0x51aacb=a0_0x37fa70;try{if(this['dbSettings'][_0x51aacb(0x464)])return await Te[_0x51aacb(0xa2)]({'_id':_0x2f06d6},{'$set':_0x10cd01},{'new':!0x0});}catch(_0x5b8d82){throw console[_0x51aacb(0x723)](_0x51aacb(0x480),_0x5b8d82),_0x5b8d82;}}async['findOrCreate'](_0x4c6a97){const _0x36ca18=a0_0x37fa70;try{let _0x336400=await Te['findById'](_0x4c6a97);return _0x336400?_0x336400['autoCompleteMessages']||(_0x336400['autoCompleteMessages']=[],await _0x336400[_0x36ca18(0x58a)]()):(_0x336400=new Te({'_id':_0x4c6a97,'autoCompleteMessages':[]}),await _0x336400[_0x36ca18(0x58a)]()),_0x336400;}catch(_0x21fa4a){return _0x21fa4a['code']===0x2af8&&_0x21fa4a['keyPattern']&&_0x21fa4a[_0x36ca18(0x505)]['autoCompleteMessages.command']?(console[_0x36ca18(0x723)](_0x36ca18(0x69e)),await Te[_0x36ca18(0x350)][_0x36ca18(0x76f)](_0x36ca18(0x6e5)),null):(console[_0x36ca18(0x723)]('Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:',_0x21fa4a),null);}}},Go=new $(a0_0x37fa70(0x73a)),Bo=new Xe(S),Wo=new Bt(S),zo=new lt(S),Ho=new Wt(na,S),Ko=new as(ma,S),Qo=new is(pa,S),Yo=new $e(He,S),Xo=new os(S),Zo=new zt(S),er=new rs(S),tr=new ns(S),sr=new cs(S),be=new Qe(Bo,Wo,zo,Ho,Ko,Qo,Yo,Xo,er,Zo,tr,sr,A?.[a0_0x37fa70(0x2a0)]()),z=new Gt(ms,S,be),ar=new Xt(S,z,be),ir=new es(z),Is=new ss(ir),_=new ts(z),he=new Qt(z,S,be,ms,ar),H=new Yt(z),k=new Ht(z),G=new Zt(z);Go[a0_0x37fa70(0x11b)]('Module\x20-\x20ON');var lg=require(a0_0x37fa70(0x36e)),Js=require('fs'),ji=I(require(a0_0x37fa70(0x155))),Ji=I(require(a0_0x37fa70(0x4e9))),je=class u{static #e;static set[a0_0x37fa70(0x64e)](_0x265416){this.#e=_0x265416;}static get[a0_0x37fa70(0x155)](){const _0x4087a7=a0_0x37fa70;let {FULLCHAIN:_0x2bed28,PRIVKEY:_0xaad4e7}=S[_0x4087a7(0x7b6)](_0x4087a7(0xe6));return ji[_0x4087a7(0x59b)]({'cert':(0x0,Js[_0x4087a7(0x690)])(_0x2bed28),'key':(0x0,Js[_0x4087a7(0x690)])(_0xaad4e7)},u.#e);}static get[a0_0x37fa70(0x4e9)](){const _0x35259e=a0_0x37fa70;return Ji[_0x35259e(0x59b)](u.#e);}},Je=I(require('fs')),zi=I(require(a0_0x37fa70(0x6c5))),qe=I(require('axios')),us=I(require(a0_0x37fa70(0x43f))),ls=require('child_process');function or(){const _0x505d28=a0_0x37fa70;z[_0x505d28(0x45c)]();let _0xa3a028=us[_0x505d28(0x259)]['join'](__dirname,_0x505d28(0x182));Wi(_0xa3a028);}var Wi=_0x45b961=>{const _0x4cb224=a0_0x37fa70;let _0x27c90b=Je[_0x4cb224(0x259)]['readdirSync'](_0x45b961),_0x114ead=0xc*0x3c*0x3c*0x3e8,_0x34534c=0x2*0x3c*0x3c*0x3e8,_0x313d8f=new Date()[_0x4cb224(0x5ac)]();_0x27c90b[_0x4cb224(0x4b7)](_0x4507c6=>{const _0x2afa1d=_0x4cb224;let _0x4bab97=us[_0x2afa1d(0x259)][_0x2afa1d(0x114)](_0x45b961,_0x4507c6),_0x4bb0cb=Je[_0x2afa1d(0x259)][_0x2afa1d(0x51c)](_0x4bab97)[_0x2afa1d(0x256)]['getTime']();_0x313d8f-_0x4bb0cb>_0x114ead&&(Je['default'][_0x2afa1d(0x6e8)](_0x4bab97),console[_0x2afa1d(0xec)](_0x2afa1d(0x383)+_0x4507c6));}),setTimeout(()=>Wi(_0x45b961),_0x34534c);};function rr(){const _0x55d7cb=a0_0x37fa70;let _0x1fc2ed=new $('SERVER'),_0x43d225=(0x0,Me[_0x55d7cb(0x259)])();_0x43d225[_0x55d7cb(0x50e)]((0x0,Bi[_0x55d7cb(0x259)])({'origin'(_0x4f0c97,_0x2dc69e){const _0x42bc80=_0x55d7cb;let {ORIGIN:_0x4a43c8}=S['get'](_0x42bc80(0x418));return _0x4f0c97||(_0x4f0c97='*'),_0x4a43c8[_0x42bc80(0xd9)]('*')!==-0x1||_0x4a43c8[_0x42bc80(0xd9)](_0x4f0c97)!==-0x1?_0x2dc69e(null,!0x0):_0x2dc69e(new Error(_0x42bc80(0x143)));},'methods':[...S['get'](_0x55d7cb(0x418))[_0x55d7cb(0x147)]],'credentials':S[_0x55d7cb(0x7b6)]('CORS')[_0x55d7cb(0x468)]}),(0x0,Me[_0x55d7cb(0x2f0)])({'extended':!0x0,'limit':_0x55d7cb(0x6ea)}),(0x0,Me[_0x55d7cb(0x185)])({'limit':_0x55d7cb(0x6ea)})),_0x43d225[_0x55d7cb(0x50e)]((_0x4d8067,_0x2e1c6a,_0x31dfaa)=>{const _0xce445=_0x55d7cb;_0x4d8067[_0xce445(0x43f)][_0xce445(0x262)](_0xce445(0x1d7))?_0x31dfaa():(0x0,Gi[_0xce445(0x259)])()(_0x4d8067,_0x2e1c6a,_0x31dfaa);}),_0x43d225[_0x55d7cb(0x21d)](_0x55d7cb(0x51a),_0x55d7cb(0x48b)),_0x43d225['set'](_0x55d7cb(0x506),(0x0,Vs[_0x55d7cb(0x114)])(ue,_0x55d7cb(0x506))),_0x43d225[_0x55d7cb(0x50e)](Me[_0x55d7cb(0x259)][_0x55d7cb(0x249)]((0x0,Vs['join'])(ue,'public'))),_0x43d225['use']((_0x595e23,_0x24ce06,_0x16d630)=>{const _0x350493=_0x55d7cb;let _0x15d646=_0x24ce06[_0x350493(0x536)];_0x24ce06[_0x350493(0x536)]=function(_0x2dc15b){const _0x23090e=_0x350493;if(_0x595e23[_0x23090e(0x6a6)][_0x23090e(0x2ff)]===_0x23090e(0x175)||_0x595e23['headers'][_0x23090e(0x6b3)]===_0x23090e(0x175)){let _0x4eb528=JSON[_0x23090e(0x3f5)](_0x2dc15b);_0x2dc15b=JSON[_0x23090e(0x718)](_0x4e4a37(_0x4eb528));}return _0x15d646[_0x23090e(0x6dd)](_0x24ce06,[_0x2dc15b]);},_0x16d630();}),_0x43d225[_0x55d7cb(0x50e)]('/',Fe),_0x43d225[_0x55d7cb(0x50e)]((_0x31df00,_0xa5a150,_0x1b9ac3,_0xa8c2f6)=>{const _0x10e677=_0x55d7cb;if(_0x31df00)return _0x1b9ac3[_0x10e677(0x4c1)](_0x31df00[_0x10e677(0x4c1)]||0x1f4)['json'](_0x31df00);},(_0x5e829a,_0x2239a3,_0x54b741)=>{const _0x40ab39=_0x55d7cb;let {method:_0x2f8463,url:_0x14b045}=_0x5e829a;_0x2239a3['status'](0x194)[_0x40ab39(0x185)]({'status':0x194,'message':_0x40ab39(0x512)+_0x2f8463[_0x40ab39(0x103)]()+'\x20'+_0x14b045,'error':_0x40ab39(0xb5)}),_0x54b741();});let _0x4e4a37=(_0x24215a,_0x6c4294=_0x55d7cb(0x72d))=>{const _0x4380fd=_0x55d7cb;let _0x4995d3=(_0x4e3eac,_0x8370d3=null,_0x838b7f=!0x1)=>{const _0x5a70e5=a0_0x58ef;let _0x38711c={};return Object[_0x5a70e5(0x674)](_0x4e3eac)[_0x5a70e5(0x4b7)](_0x259305=>{const _0x320efa=_0x5a70e5;let _0x3b8268=_0x4e3eac[_0x259305],_0x4a14a7=''+_0x6c4294+_0x259305;_0x8370d3&&!_0x838b7f&&(_0x4a14a7=_0x8370d3+'.'+_0x259305),!_0x3b8268&&_0x3b8268!==0x0&&_0x3b8268!==!0x1||typeof _0x3b8268>'u'?_0x38711c[_0x4a14a7]=null:typeof _0x3b8268!='object'&&!Array[_0x320efa(0x72)](_0x3b8268)?_0x38711c[_0x4a14a7]=_0x3b8268:typeof _0x3b8268==_0x320efa(0x41e)&&!Array['isArray'](_0x3b8268)?_0x38711c=Object[_0x320efa(0x4f8)](_0x38711c,_0x4995d3(_0x3b8268,_0x4a14a7)):Array[_0x320efa(0x72)](_0x3b8268)&&(typeof _0x3b8268[0x0]==_0x320efa(0x41e)?(_0x38711c[_0x4a14a7]=[],_0x3b8268[_0x320efa(0x4b7)](_0x2f3ba8=>{const _0xd7c79e=_0x320efa;_0x38711c[_0x4a14a7][_0xd7c79e(0x5ee)](_0x4995d3(_0x2f3ba8,_0x4a14a7,!0x0));})):_0x38711c[_0x4a14a7]=_0x3b8268);}),_0x38711c;};return Array[_0x4380fd(0x72)](_0x24215a)?_0x24215a[_0x4380fd(0x3c4)](_0x2851d5=>_0x4995d3(_0x2851d5)):typeof _0x24215a==_0x4380fd(0x41e)&&_0x24215a!==null?_0x4995d3(_0x24215a):{};},_0x1a8b26=S['get'](_0x55d7cb(0x556));je['app']=_0x43d225;let _0x5dbcfb=je[_0x1a8b26[_0x55d7cb(0x390)]],_0x486666=_0x55d7cb(0x591);_0x5dbcfb[_0x55d7cb(0x545)](_0x1a8b26['PORT'],()=>{const _0x85ab9d=_0x55d7cb;_0x1fc2ed[_0x85ab9d(0xec)](_0x486666),_0x1fc2ed[_0x85ab9d(0xec)](_0x1a8b26[_0x85ab9d(0x390)][_0x85ab9d(0x103)]()+_0x85ab9d(0x60b)+_0x1a8b26['PORT']);}),or(),ta();}var nr='https://github.com/uazapi/uazapi.git',cr=us[a0_0x37fa70(0x259)][a0_0x37fa70(0x114)](__dirname,a0_0x37fa70(0x3f0)),Ae=null;function lr(){return new Promise((_0x276586,_0x524a98)=>{const _0x1096c6=a0_0x58ef;Je[_0x1096c6(0x259)][_0x1096c6(0xf4)](cr,_0x1096c6(0x73d),(_0x4231d0,_0x2b4d93)=>{const _0x495469=_0x1096c6;if(_0x4231d0){Ae=_0x4231d0,_0x276586();return;}zi['default'][_0x495469(0x3f5)](_0x2b4d93)[_0x495469(0x14c)][_0x495469(0x75c)]===nr?(Ae=null,_0x276586()):(Ae=new Error(_0x495469(0x677)),_0x276586());});});}function a0_0x58ef(_0x13e264,_0x54a694){const _0x564af2=a0_0x564a();return a0_0x58ef=function(_0x58efa4,_0x1aec7e){_0x58efa4=_0x58efa4-0x6d;let _0x5d5f38=_0x564af2[_0x58efa4];return _0x5d5f38;},a0_0x58ef(_0x13e264,_0x54a694);}async function ur(){const _0x5ece13=a0_0x37fa70;try{await lr(),await Gs();}catch(_0x42b3a6){console[_0x5ece13(0x723)](_0x5ece13(0x268)+_0x42b3a6),process[_0x5ece13(0x396)](0x1);}}ur();async function Hi(){const _0x4d6a56=a0_0x37fa70;let _0x4a8756;try{_0x4a8756=(await qe[_0x4d6a56(0x259)][_0x4d6a56(0x7b6)](_0x4d6a56(0x424)))[_0x4d6a56(0x349)]['ip'];}catch(_0x2a085e){console[_0x4d6a56(0x723)](_0x2a085e);try{_0x4a8756=(await qe[_0x4d6a56(0x259)][_0x4d6a56(0x7b6)]('https://api.ipify.org?format=json'))[_0x4d6a56(0x349)]['ip'];}catch(_0x2505a3){console[_0x4d6a56(0x723)](_0x2505a3);try{_0x4a8756=(await qe['default'][_0x4d6a56(0x7b6)]('http://checkip.dyndns.org'))[_0x4d6a56(0x349)][_0x4d6a56(0x538)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x5745b1){return console['error'](_0x5745b1),!0x1;}}}return _0x4a8756;}var qi=0x0;async function dr(){const _0x4ec02e=a0_0x37fa70;let _0x57551c=await new ge(S['get'](_0x4ec02e(0x23c)))['instanceKeys']();return console[_0x4ec02e(0xec)](_0x4ec02e(0x46d),_0x57551c[_0x4ec02e(0x426)]),_0x57551c[_0x4ec02e(0x426)];}function pr(_0x139918){const _0x3795ad=a0_0x37fa70;let _0x5ab0d7=_0x139918[_0x3795ad(0x7b6)](_0x3795ad(0x556))['URL'],_0x5c3e98=_0x139918[_0x3795ad(0x7b6)](_0x3795ad(0xe6));console[_0x3795ad(0xec)]('Valor\x20da\x20URL\x20recuperada:',_0x5ab0d7),console[_0x3795ad(0xec)]('Configuração\x20SSL\x20recuperada:',_0x5c3e98);let _0x2c2caa='',_0x4dd8ca=_0x5ab0d7||'';if(_0x5ab0d7){let _0x25fb63=_0x5ab0d7[_0x3795ad(0x538)](/\/\/(.*?)\./);console[_0x3795ad(0xec)](_0x3795ad(0x14d),_0x25fb63),_0x25fb63&&_0x25fb63[0x1]&&(_0x2c2caa=_0x25fb63[0x1],console[_0x3795ad(0xec)](_0x3795ad(0x5a3),_0x2c2caa));}if(!_0x2c2caa&&_0x5c3e98&&_0x5c3e98['FULLCHAIN']){let _0xb10c73=_0x5c3e98[_0x3795ad(0x9f)]['split']('/');console['log']('Partes\x20do\x20caminho\x20FULLCHAIN:',_0xb10c73);let _0x558d94=_0xb10c73[_0xb10c73['length']-0x2];if(console[_0x3795ad(0xec)](_0x3795ad(0x202),_0x558d94),_0x558d94){let _0x54cd78=_0x558d94['split']('.');console['log'](_0x3795ad(0x577),_0x54cd78),_0x54cd78[_0x3795ad(0x426)]>0x2&&(_0x2c2caa=_0x54cd78[0x0],console[_0x3795ad(0xec)](_0x3795ad(0x29a),_0x2c2caa),_0x4dd8ca=''+_0x558d94);}}return{'subdomain':_0x2c2caa||_0x3795ad(0xe9),'fullURL':_0x4dd8ca||_0x3795ad(0x31c)};}var {subdomain:ee,fullURL:Bs}=pr(S);console[a0_0x37fa70(0xec)]('Subdomínio\x20final:',ee),console['log'](a0_0x37fa70(0x646),Bs);async function hr(){const _0x203a2c=a0_0x37fa70;let _0x5cecf3=S['get'](_0x203a2c(0x23c)),_0x4af647=S['get'](_0x203a2c(0x725))['API_KEY'][_0x203a2c(0x5af)],_0x3526d9=S[_0x203a2c(0x7b6)](_0x203a2c(0xe6)),_0x405b34=await Hi(),_0x2c3d83=S['get'](_0x203a2c(0x556))[_0x203a2c(0x39c)],_0x2bd2f0=Bs;try{let _0x38f342={'ip':_0x405b34||null,'redis_enable':_0x5cecf3?.[_0x203a2c(0x464)]||null,'apikey':_0x4af647||null,'ssl':_0x3526d9?.['PRIVKEY']||null,'lastupdate':Ki||null,'port':_0x2c3d83||null,'gitInstallError':Ae?.[_0x203a2c(0x33a)]||null,'url':_0x2bd2f0||null,'subdomain':ee};if(console[_0x203a2c(0xec)](_0x203a2c(0x325),_0x38f342['ip']),_0x5cecf3&&_0x5cecf3['ENABLED']){let _0x2a7068=await dr();_0x38f342[_0x203a2c(0x766)]=_0x2a7068||null;}for(let _0x5894ba in _0x38f342)_0x38f342[_0x203a2c(0x4ee)](_0x5894ba)&&_0x5894ba!=='ip'&&(_0x38f342[_0x5894ba]=JSON['stringify'](_0x38f342[_0x5894ba]));return(await qe[_0x203a2c(0x259)][_0x203a2c(0x3a2)](_0x203a2c(0x399),_0x38f342))[_0x203a2c(0x349)];}catch(_0x439797){return console['error'](_0x439797),!0x1;}}var qs=!0x1,Ki=0x259,gr=0x3,Vi=0x1b7740;async function Gs(){const _0x388fff=a0_0x37fa70;let _0x2e4891=_0x388fff(0x324);Ae===null&&(_0x2e4891=await Hi());let _0x17c473=await hr();if(_0x17c473){if(_0x17c473[_0x388fff(0x6d9)]['licenca']===!0x0){Ae===null&&_0x17c473[_0x388fff(0x6d9)][_0x388fff(0x580)]-Ki>0x0&&await mr(),qs||(qs=!0x0,rr());let _0x5cb756=0x24*0x3c*0x3c,_0xa47d98=_0x17c473[_0x388fff(0x6d9)][_0x388fff(0x71c)]>_0x5cb756?_0x5cb756:_0x17c473[_0x388fff(0x6d9)][_0x388fff(0x71c)],_0xf98023=Number(_0xa47d98);if(isNaN(_0xf98023)){console[_0x388fff(0x723)]('interval\x20não\x20é\x20um\x20número');return;}let _0x54469f=Math['floor'](_0xf98023/0xe10),_0x42ef9b=Math['floor'](_0xf98023%0xe10/0x3c),_0x3ca3e8=new Date(Date[_0x388fff(0x5cf)]()+_0xf98023*0x3e8);setTimeout(Gs,_0xf98023*0x3e8);let _0x20ad23=_0x97970=>_0x97970['toString']()[_0x388fff(0x42f)](0x2,'0'),_0x3d637d=_0x388fff(0x447)+_0x20ad23(_0x54469f)+_0x388fff(0x509)+_0x20ad23(_0x42ef9b)+_0x388fff(0x6bc)+_0x20ad23(_0x3ca3e8[_0x388fff(0x3ef)]())+':'+_0x20ad23(_0x3ca3e8[_0x388fff(0x151)]())+'.';console['log'](_0x3d637d);}else return console[_0x388fff(0xec)](_0x388fff(0x67d)),qs&&(console['log'](_0x388fff(0xe4)),process[_0x388fff(0x396)]()),_0x388fff(0x4c3);}else{if(qi++,qi<gr)console['log'](_0x388fff(0x1c5)+Vi/0xea60+_0x388fff(0x369)),setTimeout(Gs,Vi);else return console[_0x388fff(0x723)](_0x388fff(0x22d)),_0x388fff(0x27e);}}async function mr(){const _0x4e1786=a0_0x37fa70;console[_0x4e1786(0xec)]('Parando\x20aplicação,\x20atualização\x20recebida'),console[_0x4e1786(0xec)](_0x4e1786(0x66a)),(0x0,ls['spawn'])('pm2\x20flush',{'shell':!0x0})['on']('close',_0x1e4b64=>{const _0x4922ab=_0x4e1786;_0x1e4b64!==0x0?console[_0x4922ab(0x723)](_0x4922ab(0x783)):(console[_0x4922ab(0xec)](_0x4922ab(0x55f)),console[_0x4922ab(0xec)]('Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...'),(0x0,ls[_0x4922ab(0x4da)])(_0x4922ab(0x559),{'shell':!0x0})['on']('close',_0x686d96=>{const _0x556aef=_0x4922ab;if(_0x686d96!==0x0)console[_0x556aef(0x723)](_0x556aef(0x1c8));else{console['log'](_0x556aef(0x25f));let _0x234805=(0x0,ls[_0x556aef(0x4da)])(_0x556aef(0x301),{'shell':!0x0});_0x234805['stdout']['on']('data',_0x1b92dc=>{const _0x4134f3=_0x556aef;console['log'](_0x4134f3(0x78e)+_0x1b92dc);}),_0x234805[_0x556aef(0x317)]['on'](_0x556aef(0x349),_0xf4c347=>{const _0x53e3b1=_0x556aef;console[_0x53e3b1(0x723)](_0x53e3b1(0x4e4)+_0xf4c347);}),_0x234805['on'](_0x556aef(0x396),_0x3adc30=>{const _0x45e88a=_0x556aef;_0x3adc30!==0x0?console[_0x45e88a(0x723)](_0x45e88a(0x3ee)+_0x3adc30):console[_0x45e88a(0xec)](_0x45e88a(0x4ed)),console[_0x45e88a(0xec)](_0x45e88a(0xdc)),setTimeout(()=>process[_0x45e88a(0x396)](),0x2710);});}}));});}0x0&&(module[a0_0x37fa70(0x1fc)]={'fullURL':fullURL,'subdomain':subdomain});