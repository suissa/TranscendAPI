const a0_0x4a47c0=a0_0xa65b;(function(_0x278a9a,_0x23467f){const _0x176e2e=a0_0xa65b,_0x530503=_0x278a9a();while(!![]){try{const _0x20baf2=parseInt(_0x176e2e(0x262))/0x1*(-parseInt(_0x176e2e(0x545))/0x2)+parseInt(_0x176e2e(0x578))/0x3*(-parseInt(_0x176e2e(0x125))/0x4)+parseInt(_0x176e2e(0x7cc))/0x5+parseInt(_0x176e2e(0x152))/0x6+parseInt(_0x176e2e(0x479))/0x7*(-parseInt(_0x176e2e(0x350))/0x8)+parseInt(_0x176e2e(0x1ee))/0x9*(parseInt(_0x176e2e(0x2c7))/0xa)+parseInt(_0x176e2e(0x151))/0xb*(parseInt(_0x176e2e(0x119))/0xc);if(_0x20baf2===_0x23467f)break;else _0x530503['push'](_0x530503['shift']());}catch(_0x359e93){_0x530503['push'](_0x530503['shift']());}}}(a0_0x5767,0x2e879));var Hi=Object[a0_0x4a47c0(0x6e2)],Be=Object[a0_0x4a47c0(0x737)],Ki=Object[a0_0x4a47c0(0x5f6)],Qi=Object[a0_0x4a47c0(0x580)],Yi=Object[a0_0x4a47c0(0x2ca)],Xi=Object[a0_0x4a47c0(0x46f)]['hasOwnProperty'],Zi=(_0x37f6b2,_0x2547dd)=>{for(var _0x304762 in _0x2547dd)Be(_0x37f6b2,_0x304762,{'get':_0x2547dd[_0x304762],'enumerable':!0x0});},zs=(_0xc21437,_0x4f24a8,_0x1e54fc,_0x33d993)=>{const _0x2ab4ae=a0_0x4a47c0;if(_0x4f24a8&&typeof _0x4f24a8==_0x2ab4ae(0x2b9)||typeof _0x4f24a8==_0x2ab4ae(0x49e)){for(let _0x199226 of Qi(_0x4f24a8))!Xi[_0x2ab4ae(0x7ce)](_0xc21437,_0x199226)&&_0x199226!==_0x1e54fc&&Be(_0xc21437,_0x199226,{'get':()=>_0x4f24a8[_0x199226],'enumerable':!(_0x33d993=Ki(_0x4f24a8,_0x199226))||_0x33d993['enumerable']});}return _0xc21437;},I=(_0xb87a1,_0xb9e828,_0x4b9e44)=>(_0x4b9e44=_0xb87a1!=null?Hi(Yi(_0xb87a1)):{},zs(_0xb9e828||!_0xb87a1||!_0xb87a1['__esModule']?Be(_0x4b9e44,'default',{'value':_0xb87a1,'enumerable':!0x0}):_0x4b9e44,_0xb87a1)),eo=_0x163ec5=>zs(Be({},a0_0x4a47c0(0x4fc),{'value':!0x0}),_0x163ec5),gr={};Zi(gr,{'fullURL':()=>Bs,'subdomain':()=>K}),module[a0_0x4a47c0(0x19c)]=eo(gr);var qi=I(require(a0_0x4a47c0(0x474))),Ks=require('fs'),Qs=require(a0_0x4a47c0(0x2b7)),Ys=require(a0_0x4a47c0(0xce)),We=require('path'),ue=process[a0_0x4a47c0(0x96)](),Me=(0x0,We[a0_0x4a47c0(0x258)])(ue,'instances'),Hs=(0x0,We[a0_0x4a47c0(0x258)])(ue,a0_0x4a47c0(0x46d)),sn=(0x0,We[a0_0x4a47c0(0x258)])(ue,a0_0x4a47c0(0x734),'auth'),hs=class{constructor(){const _0x1bdc1a=a0_0x4a47c0;this[_0x1bdc1a(0x128)]();}[a0_0x4a47c0(0x58b)](_0x539371){return this['env'][_0x539371];}['loadEnv'](){const _0x35534b=a0_0x4a47c0;this[_0x35534b(0x507)]=process[_0x35534b(0x507)]?.[_0x35534b(0x4a8)]!==_0x35534b(0x23f)?this[_0x35534b(0xdf)]():this['envProcess'](),process[_0x35534b(0x507)]?.[_0x35534b(0x4a8)]==='true'&&(this[_0x35534b(0x507)]['SERVER'][_0x35534b(0x58c)]=_0x35534b(0x248),this[_0x35534b(0x507)]['SERVER'][_0x35534b(0x321)]=Number[_0x35534b(0x656)](process[_0x35534b(0x507)]?.[_0x35534b(0x715)]??'8080'));}[a0_0x4a47c0(0xdf)](){const _0x3525c9=a0_0x4a47c0;return(0x0,Qs[_0x3525c9(0x52a)])((0x0,Ks[_0x3525c9(0x402)])((0x0,Ys[_0x3525c9(0x258)])(Hs,'../env.yml'),{'encoding':_0x3525c9(0x51c)}));}[a0_0x4a47c0(0x3c1)](){const _0x1dd9b3=a0_0x4a47c0;return{'SERVER':{'TYPE':process[_0x1dd9b3(0x507)][_0x1dd9b3(0x468)],'PORT':Number[_0x1dd9b3(0x656)](process[_0x1dd9b3(0x507)]['SERVER_PORT']),'URL':process[_0x1dd9b3(0x507)][_0x1dd9b3(0x59d)]},'CORS':{'ORIGIN':process[_0x1dd9b3(0x507)][_0x1dd9b3(0x5f0)][_0x1dd9b3(0x31c)](','),'METHODS':process[_0x1dd9b3(0x507)][_0x1dd9b3(0x21f)][_0x1dd9b3(0x31c)](','),'CREDENTIALS':process['env']?.['CORS_CREDENTIALS']===_0x1dd9b3(0x23f)},'SSL_CONF':{'PRIVKEY':process[_0x1dd9b3(0x507)]?.[_0x1dd9b3(0x73f)],'FULLCHAIN':process['env']?.[_0x1dd9b3(0x769)]},'STORE':{'CLEANING_INTERVAL':Number['isInteger'](process['env']?.[_0x1dd9b3(0x6c8)])?Number['parseInt'](process[_0x1dd9b3(0x507)][_0x1dd9b3(0x6c8)]):void 0x0,'MESSAGES':process[_0x1dd9b3(0x507)]?.['STORE_MESSAGE']===_0x1dd9b3(0x23f),'CONTACTS':process[_0x1dd9b3(0x507)]?.['STORE_CONTACTS']===_0x1dd9b3(0x23f),'CHATS':process['env']?.[_0x1dd9b3(0x593)]===_0x1dd9b3(0x23f)},'DATABASE':{'CONNECTION':{'HOST':process[_0x1dd9b3(0x507)]?.['DATABASE_CONNECTION_HOST'],'PORT':Number['parseInt'](process[_0x1dd9b3(0x507)]?.[_0x1dd9b3(0x669)]),'USER':process[_0x1dd9b3(0x507)][_0x1dd9b3(0x218)],'PASSWORD':process[_0x1dd9b3(0x507)][_0x1dd9b3(0x637)],'URI':process[_0x1dd9b3(0x507)]['DATABASE_CONNECTION_URI'],'DB_PREFIX_NAME':process[_0x1dd9b3(0x507)][_0x1dd9b3(0xe0)]},'ENABLED':process['env']?.[_0x1dd9b3(0x6ef)]===_0x1dd9b3(0x23f)},'REDIS':{'ENABLED':process[_0x1dd9b3(0x507)]?.[_0x1dd9b3(0x3e4)]===_0x1dd9b3(0x23f),'URI':process[_0x1dd9b3(0x507)][_0x1dd9b3(0x1ea)]||_0x1dd9b3(0x4e1),'PREFIX_KEY':process[_0x1dd9b3(0x507)]['REDIS_PREFIX_KEY']||_0x1dd9b3(0x168)},'LOG':{'LEVEL':process[_0x1dd9b3(0x507)]?.[_0x1dd9b3(0x741)][_0x1dd9b3(0x31c)](','),'COLOR':process[_0x1dd9b3(0x507)]?.[_0x1dd9b3(0x67a)]==='true'},'PROXY':process['env']?.[_0x1dd9b3(0x375)]==='true','AUTHENTICATION':{'TYPE':process[_0x1dd9b3(0x507)][_0x1dd9b3(0x1c5)],'API_KEY':{'KEY':process[_0x1dd9b3(0x507)][_0x1dd9b3(0xb6)]},'JWT':{'EXPIRIN_IN':Number[_0x1dd9b3(0x502)](process['env']?.[_0x1dd9b3(0xec)])?Number[_0x1dd9b3(0x656)](process['env'][_0x1dd9b3(0xec)]):0xe10,'SECRET':process[_0x1dd9b3(0x507)][_0x1dd9b3(0x30b)]}}};}},b=new hs(),Vi=I(require('cors')),be=I(require('express')),Vs=require(a0_0x4a47c0(0xce)),gs=I(require('dayjs')),ms=(_0x13ff75=>(_0x13ff75['LOG']=a0_0x4a47c0(0x24a),_0x13ff75[a0_0x4a47c0(0x5bc)]='\x1b[34m',_0x13ff75[a0_0x4a47c0(0x57e)]=a0_0x4a47c0(0x787),_0x13ff75[a0_0x4a47c0(0x1ae)]='\x1b[31m',_0x13ff75[a0_0x4a47c0(0x3cd)]=a0_0x4a47c0(0x3b0),_0x13ff75[a0_0x4a47c0(0x25f)]=a0_0x4a47c0(0x4b3),_0x13ff75[a0_0x4a47c0(0x14d)]=a0_0x4a47c0(0x450),_0x13ff75))(ms||{}),Xs=(_0x52936c=>(_0x52936c['LOG']=a0_0x4a47c0(0xea),_0x52936c[a0_0x4a47c0(0x14d)]=a0_0x4a47c0(0x563),_0x52936c['INFO']=a0_0x4a47c0(0x778),_0x52936c[a0_0x4a47c0(0x57e)]=a0_0x4a47c0(0x7af),_0x52936c[a0_0x4a47c0(0x1ae)]=a0_0x4a47c0(0x472),_0x52936c[a0_0x4a47c0(0x3cd)]='\x1b[36m%s\x1b[0m',_0x52936c['VERBOSE']='\x1b[37m%s\x1b[0m',_0x52936c))(Xs||{}),Zs=(_0x593922=>(_0x593922[a0_0x4a47c0(0x717)]=a0_0x4a47c0(0x717),_0x593922[a0_0x4a47c0(0x57e)]=a0_0x4a47c0(0x57e),_0x593922[a0_0x4a47c0(0x5bc)]=a0_0x4a47c0(0x5bc),_0x593922[a0_0x4a47c0(0x14d)]='DARK',_0x593922[a0_0x4a47c0(0x1ae)]=a0_0x4a47c0(0x1ae),_0x593922[a0_0x4a47c0(0x3cd)]=a0_0x4a47c0(0x3cd),_0x593922[a0_0x4a47c0(0x25f)]=a0_0x4a47c0(0x25f),_0x593922))(Zs||{}),ea=(_0x5a50b0=>(_0x5a50b0[a0_0x4a47c0(0x717)]=a0_0x4a47c0(0xa8),_0x5a50b0[a0_0x4a47c0(0x5bc)]='\x1b[44m',_0x5a50b0['WARN']='\x1b[43m',_0x5a50b0['DARK']=a0_0x4a47c0(0x1ab),_0x5a50b0['ERROR']=a0_0x4a47c0(0x423),_0x5a50b0[a0_0x4a47c0(0x3cd)]=a0_0x4a47c0(0x105),_0x5a50b0['VERBOSE']=a0_0x4a47c0(0x23b),_0x5a50b0))(ea||{}),$=class{constructor(_0x79f03e=a0_0x4a47c0(0x6a0)){const _0x3bd6d4=a0_0x4a47c0;this[_0x3bd6d4(0x173)]=_0x79f03e,this['configService']=b;}['setContext'](_0x83a12){const _0xf8d8e3=a0_0x4a47c0;this[_0xf8d8e3(0x173)]=_0x83a12;}[a0_0x4a47c0(0x638)](_0xb7d807,_0x596809){const _0x1a4b23=a0_0x4a47c0;let _0x4a2361=[];this[_0x1a4b23(0x45a)]['get'](_0x1a4b23(0x717))[_0x1a4b23(0x42e)][_0x1a4b23(0x9e)](_0x3fb3f6=>_0x4a2361[_0x1a4b23(0x723)](Zs[_0x3fb3f6]));let _0x52f54e=typeof _0xb7d807;_0x4a2361[_0x1a4b23(0x795)](_0x596809)&&(b[_0x1a4b23(0x58b)](_0x1a4b23(0x717))[_0x1a4b23(0x1a0)]?(console['log']('\x1b[1m'+Xs[_0x596809],_0x1a4b23(0x49a),(0x0,gs[_0x1a4b23(0x339)])()['format']('DD/MM\x20HH:mm:ss'),_0x1a4b23(0x5c1),ms[_0x596809]+ea[_0x596809]+_0x1a4b23(0x756),_0x596809+'\x20\x1b[0m',_0x1a4b23(0x49f),this[_0x1a4b23(0x173)]+'\x1b[0m',ms[_0x596809],_0x52f54e!==_0x1a4b23(0x2b9)?_0xb7d807:'',_0x1a4b23(0x5c1)),_0x52f54e===_0x1a4b23(0x2b9)&&console[_0x1a4b23(0x18d)](_0xb7d807,'\x0a')):console[_0x1a4b23(0x18d)]((0x0,gs[_0x1a4b23(0x339)])()[_0x1a4b23(0x40b)](_0x1a4b23(0x233)),_0x596809+'\x20',''+this[_0x1a4b23(0x173)],_0xb7d807));}[a0_0x4a47c0(0x18d)](_0x424744){const _0x333217=a0_0x4a47c0;this[_0x333217(0x638)](_0x424744,_0x333217(0x717));}['info'](_0x45fc84){const _0x1d71a6=a0_0x4a47c0;this[_0x1d71a6(0x638)](_0x45fc84,_0x1d71a6(0x5bc));}['warn'](_0x4c7ee7){const _0x37dfc6=a0_0x4a47c0;this[_0x37dfc6(0x638)](_0x4c7ee7,_0x37dfc6(0x57e));}[a0_0x4a47c0(0x5f8)](_0x4c8a6d){const _0x1182cb=a0_0x4a47c0;this[_0x1182cb(0x638)](_0x4c8a6d,_0x1182cb(0x1ae));}['verbose'](_0x53297e){const _0x3f522a=a0_0x4a47c0;this[_0x3f522a(0x638)](_0x53297e,_0x3f522a(0x25f));}[a0_0x4a47c0(0x18a)](_0x4f8ed4){const _0x4ba890=a0_0x4a47c0;this[_0x4ba890(0x638)](_0x4f8ed4,_0x4ba890(0x3cd));}[a0_0x4a47c0(0x6a5)](_0x3b8253){const _0x69494a=a0_0x4a47c0;this['console'](_0x3b8253,_0x69494a(0x14d));}};function a0_0xa65b(_0x2d23e0,_0x3993da){const _0x5767fe=a0_0x5767();return a0_0xa65b=function(_0xa65b66,_0x38f3c9){_0xa65b66=_0xa65b66-0x93;let _0x456a86=_0x5767fe[_0xa65b66];return _0x456a86;},a0_0xa65b(_0x2d23e0,_0x3993da);}function ta(){const _0x2752f0=a0_0x4a47c0;process['on'](_0x2752f0(0x13d),(_0x5add1a,_0x2b86d2)=>{const _0x5a5802=_0x2752f0;new $('uncaughtException')[_0x5a5802(0x5f8)]({'origin':_0x2b86d2,'stderr':process['stderr']['fd'],'error':_0x5add1a});}),process['on'](_0x2752f0(0x7d5),(_0x85aaa6,_0x5b8e40)=>{const _0x56259c=_0x2752f0;new $(_0x56259c(0x7d5))[_0x56259c(0x5f8)]({'origin':_0x5b8e40,'stderr':process[_0x56259c(0x475)]['fd'],'error':_0x85aaa6});});}var sa=I(require(a0_0x4a47c0(0xee))),fs=new sa['default']({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Ce=require(a0_0x4a47c0(0x49d)),Ie=I(require(a0_0x4a47c0(0x49d))),ze=new $(a0_0x4a47c0(0x4dd)),U=b[a0_0x4a47c0(0x58b)](a0_0x4a47c0(0xf4)),R=U[a0_0x4a47c0(0x99)]?U['CONNECTION'][a0_0x4a47c0(0x6c3)]?Ie[a0_0x4a47c0(0x339)]['createConnection'](U[a0_0x4a47c0(0x75c)]['URI'],{'dbName':U[a0_0x4a47c0(0x75c)]['DB_PREFIX_NAME']+a0_0x4a47c0(0x524)}):Ie[a0_0x4a47c0(0x339)][a0_0x4a47c0(0x1fd)]('mongodb://'+U[a0_0x4a47c0(0x75c)][a0_0x4a47c0(0x6aa)]+':'+U[a0_0x4a47c0(0x75c)][a0_0x4a47c0(0x321)]+'?authSource=admin&readPreference=primary&directConnection=true',{'user':U['CONNECTION'][a0_0x4a47c0(0x11f)],'pass':U[a0_0x4a47c0(0x75c)][a0_0x4a47c0(0x7e3)],'dbName':U['CONNECTION'][a0_0x4a47c0(0x1f8)]+'-whatsapp-api'}):null;U[a0_0x4a47c0(0x99)]&&ze[a0_0x4a47c0(0x363)]('ON\x20-\x20dbName:\x20'+R[a0_0x4a47c0(0x221)]);var de=U[a0_0x4a47c0(0x99)]?U['CONNECTION'][a0_0x4a47c0(0x6c3)]?Ie[a0_0x4a47c0(0x339)][a0_0x4a47c0(0x1fd)](U['CONNECTION'][a0_0x4a47c0(0x6c3)],{'dbName':'cachedData-whatsapp'}):Ie[a0_0x4a47c0(0x339)][a0_0x4a47c0(0x1fd)](a0_0x4a47c0(0xf9)+U[a0_0x4a47c0(0x75c)][a0_0x4a47c0(0x6aa)]+':'+U[a0_0x4a47c0(0x75c)][a0_0x4a47c0(0x321)]+a0_0x4a47c0(0x565),{'user':U[a0_0x4a47c0(0x75c)]['USER'],'pass':U['CONNECTION']['PASSWORD'],'dbName':a0_0x4a47c0(0xf5)}):null;de&&ze[a0_0x4a47c0(0x363)](a0_0x4a47c0(0x198)+de[a0_0x4a47c0(0x221)]),process['on'](a0_0x4a47c0(0x4e9),()=>{const _0x2c2a0d=a0_0x4a47c0;R&&R[_0x2c2a0d(0x735)](()=>{const _0xec974f=_0x2c2a0d;ze['info'](_0xec974f(0x2c4));}),de&&de[_0x2c2a0d(0x735)](()=>{ze['info']('CacheContacts\x20database\x20connection\x20closed.');});});var to=new Ce[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),so=new Ce['Schema']({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),ao=new Ce[(a0_0x4a47c0(0x4fd))]({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),io=new Ce[(a0_0x4a47c0(0x4fd))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[to],'default':[]}},{'_id':!0x1}),oo=new Ce[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':io,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':so},'groupdata':{'type':ao,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),aa=_0x5009ad=>{const _0x27c320=a0_0x4a47c0;let _0x5a10ec='z_'+_0x5009ad+'_Chats';return R?.[_0x27c320(0x30a)](_0x27c320(0x7fb),oo,_0x5a10ec);},ia=require(a0_0x4a47c0(0x49d)),ro=new ia[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),oa=_0x3645e2=>{const _0x2b5776=a0_0x4a47c0;let _0x3b985d='z_'+_0x3645e2+_0x2b5776(0x44c);return R?.[_0x2b5776(0x30a)](_0x2b5776(0x310),ro,_0x3b985d);},ra=require(a0_0x4a47c0(0x49d)),ws=class{},no=new ra[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),na=de?.[a0_0x4a47c0(0x30a)](ws[a0_0x4a47c0(0x25b)],no,'ContactsAndGroups'),ca=require(a0_0x4a47c0(0x49d)),ys=class{},co=new ca[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),He=de?.[a0_0x4a47c0(0x30a)](ys[a0_0x4a47c0(0x25b)],co,a0_0x4a47c0(0x2f4)),la=require('mongoose'),lo=new la[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),ua=_0x530393=>{const _0x476506=a0_0x4a47c0;let _0x282a1c='z_'+_0x530393+'_Messages';return R?.[_0x476506(0x30a)](_0x476506(0x3be),lo,_0x282a1c);},da=require('mongoose'),bs=class{},uo=new da[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),pa=R?.[a0_0x4a47c0(0x30a)](bs[a0_0x4a47c0(0x25b)],uo,a0_0x4a47c0(0x102)),ha=require(a0_0x4a47c0(0x49d)),Ss=class{},ga=new ha[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});ga[a0_0x4a47c0(0x7f1)]('save',function(_0x4a99de){const _0x1e4762=a0_0x4a47c0;delete this[_0x1e4762(0x513)],delete this['flowIgnoreGroups'],delete this['flowPrefixCommand'],delete this[_0x1e4762(0x71b)],delete this['flowStopMinutes'],_0x4a99de();});var ma=R?.[a0_0x4a47c0(0x30a)](Ss[a0_0x4a47c0(0x25b)],ga,a0_0x4a47c0(0x63e)),P=require(a0_0x4a47c0(0x49d)),Ms=require(a0_0x4a47c0(0x6db)),Ke=class{},wa=new P['Schema']({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Cs=new P[(a0_0x4a47c0(0x4fd))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),po=new P['Schema']({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x4a47c0(0x48c)},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x4a47c0(0x272)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x4a47c0(0x4d1)},'pollErrorMessage':{'type':String,'default':a0_0x4a47c0(0x2a0)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),ya=new P[(a0_0x4a47c0(0x4fd))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),ho=new P[(a0_0x4a47c0(0x4fd))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),go=new P[(a0_0x4a47c0(0x4fd))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Ns=new P[(a0_0x4a47c0(0x4fd))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),mo=new P[(a0_0x4a47c0(0x4fd))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),ba=new P['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':po},'apirequest':ho,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':mo,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),Sa=new P['Schema']({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),Es=class{},Ma=new P['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[Ns],'blocks':[ba],'groups':[wa],'conditions':[ya],'varedits':[Sa],'replyOptions':{'type':[Cs],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0xf4745=a0_0x4a47c0;return _0xf4745(0x3ec)+Math['random']()['toString'](0x24)[_0xf4745(0x77c)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':a0_0x4a47c0(0x626)},'startID':{'type':String,'default':()=>(0x0,Ms['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ms['v4'])()},'shareOwners':{'type':[String],'default':[]}});Ma[a0_0x4a47c0(0x7f1)]('findOneAndUpdate',function(_0x4e0cd6){const _0x148965=a0_0x4a47c0;let _0x5e3e59=this[_0x148965(0x5b3)]();if(_0x5e3e59&&typeof _0x5e3e59==_0x148965(0x2b9)&&'$set'in _0x5e3e59){let _0x418bf2=_0x5e3e59[_0x148965(0x2ce)];if(_0x418bf2){let _0x434b7e=new Set(),_0x4f59f6=new Set(_0x418bf2[_0x148965(0x313)]?.[_0x148965(0x4b0)](_0x2afe53=>_0x2afe53[_0x148965(0x25b)])),_0x3250cb=JSON[_0x148965(0x52f)](_0x418bf2),_0x2a9e2f=/{{(?!_)([^}]*)}}/g,_0xa5969d;for(;(_0xa5969d=_0x2a9e2f[_0x148965(0x449)](_0x3250cb))!==null;)_0x4f59f6[_0x148965(0x130)](_0xa5969d[0x1])||_0x434b7e[_0x148965(0x4b1)](_0xa5969d[0x1]);_0x434b7e[_0x148965(0x317)]>0x0?(console[_0x148965(0x624)](_0x148965(0x4e7),Array[_0x148965(0x179)](_0x434b7e)),_0x418bf2[_0x148965(0x31f)]=Array[_0x148965(0x179)](_0x434b7e)):_0x418bf2[_0x148965(0x31f)]=[],this['setUpdate']({'$set':_0x418bf2});}}_0x4e0cd6();});var Ee=R?.[a0_0x4a47c0(0x30a)](Es[a0_0x4a47c0(0x25b)],Ma,a0_0x4a47c0(0x242)),fo=new P['Schema']({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[Ns],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[go]},{'_id':!0x1}),wo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[Ns],'blocks':[ba],'groups':[wa],'conditions':[ya],'varedits':[Sa],'replyOptions':{'type':[Cs],'default':[]},'chatLog':fo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x4a47c0(0x113)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x4a47c0(0x4d1)},'waitingMenu_replyOptions':{'type':[Cs],'default':[]}}),Ca=_0xa2d04e=>{const _0x1d17a9=a0_0x4a47c0;let _0x36171b='z_'+_0xa2d04e+'_FlowHistorico';return R?.[_0x1d17a9(0x30a)](_0x1d17a9(0x2dd),wo,_0x36171b);},yo=new P[(a0_0x4a47c0(0x4fd))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),fa=new P['Schema']({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),bo=new P[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[fa],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x4a47c0(0x4be)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[yo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':fa,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ea=_0x5e779d=>{const _0x43fb61=a0_0x4a47c0;let _0x5a7868='z_'+_0x5e779d+_0x43fb61(0x6ff);return R?.['model'](_0x43fb61(0x707),bo,_0x5a7868);},vs=class{},So=new P['Schema']({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),Mo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Co=new P['Schema']({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Eo=new P[(a0_0x4a47c0(0x4fd))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':'!stop'},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),vo=new P[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),No=new P[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[vo]},'customFields':{'type':[Co]},'flowConfig':{'type':Eo,'default':{}},'flows':{'type':[Mo],'default':[]},'autoCompleteMessages':{'type':[So],'default':[]}}),Te=R?.[a0_0x4a47c0(0x30a)](vs[a0_0x4a47c0(0x25b)],No,a0_0x4a47c0(0x22b)),va=require(a0_0x4a47c0(0x49d)),$o=new va[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),Na=_0x5abf1b=>{const _0x1a2387=a0_0x4a47c0;let _0x52a401='z_'+_0x5abf1b+_0x1a2387(0x60f);return R?.['model']('LabelModel',$o,_0x52a401);},_=class{constructor(_0xb71346){const _0x273c0f=a0_0x4a47c0;this[_0x273c0f(0x3d2)]=_0xb71346['get'](_0x273c0f(0xf4));}};function A(_0x1ed7fe){const _0x124a7c=a0_0x4a47c0;let _0x379016={};for(let [_0x5a1d8b,_0x35e489]of Object[_0x124a7c(0x3ce)](_0x1ed7fe))if(typeof _0x35e489==_0x124a7c(0x2b9)&&!Array[_0x124a7c(0x18e)](_0x35e489)){for(let [_0x258953,_0x18e950]of Object[_0x124a7c(0x3ce)](_0x35e489))_0x379016[_0x5a1d8b+'.'+_0x258953]=_0x18e950;}else _0x379016[_0x5a1d8b]=_0x35e489;return _0x379016;}function a0_0x5767(){const _0x275f47=['every','findGroupInfos','delAll','warn','API\x20Key\x20inválida.','false','deleteReplyOption','@s.whatsapp.net','updateGParticipant','presenceSubscribe','Falta\x20informação\x20para\x20a\x20chamada\x20API','contacts.update','FlowRouter','_error','updateGroupPicture','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','stateConnection','/wa-all-message',',\x20Minutes\x20to\x20Close:\x20','cleanStore','filter','mentions','DATABASE_CONNECTION_PASSWORD','console','locked','optionName','mongodb','Erro\x20ao\x20atualizar\x20o\x20flow.','updateGParticipate','webhook','basename','updateCustomFields','padStart','generateHash','deleteDoneMessages','textMessage','/wa-message','ephemeralMessage','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','Erro\x20ao\x20alterar\x20privacidade','all','Not\x20is\x20business\x20profile','editMessagesInGroup','/64\x20dev\x20','GROUP_PARTICIPANTS_UPDATE','https://ifconfig.me/ip','resetReconnectionVariables','vcard','updateAutoCompleteMessages','Primeiro\x20Valor:\x20','scheduleMessage','fromMe','parseInt','):\x20updateResult:','CONNECTION_UPDATE','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','\x0aitem',',\x20Segundo\x20Valor:\x20','connectedClient','Conversa\x20deletada\x20com\x20sucesso.','unavailable','instancias:\x20','scheduleSendMedia','delayChatLabel','\x20-y','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus','logger','deleteFlow','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','min','#64c4ff','DATABASE_CONNECTION_HOST','repeat','allContacts','menuType','height','Erro\x20ao\x20importar\x20chats','createServer','Router','*Pergunta*:\x20\x0a','findGroupInfo','prepareMediaMessage','\x20segundos','createClient','):\x20atualização\x20chat:\x20','StatusJidList\x20is\x20required','delaySecMin','):\x20Comando\x20desconhecido:\x20','LOG_COLOR','.jpg','pendingMessages','Não\x20respondeu\x20com\x20a\x20enquete.','poll','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20','demote','closeExistingConversations','getUniqueFlowName','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','cachedContact','stdout','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName','sending','Safari','#dfaef0','lastBlockId','notify','):\x20Envio\x20interrompido\x20devido\x20a\x20UUID\x20de\x20processo\x20não\x20corresponder.','group','emit','):\x20Buscando\x20flow,\x20id:\x20','Erro\x20ao\x20buscar\x20conversas','/chat','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','deletedCount','.ogg','.\x20Pulando.','/create','Nenhum\x20chat\x20encontrado\x20para\x20editar.','getBase64FromMediaMessage','params','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo','quoted','created','webp','restartInstance','insert','Logger','Valor\x20da\x20URL\x20recuperada:','isJidGroup','caption','endSession','dark','fetchStatus','FULLCHAIN','Nenhum\x20participante\x20válido\x20encontrado.','groupValidate','HOST','sticker','updateMissingEtiquetas','action','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','processingGroup','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','buttonText','waInstances','Mensagem\x20não\x20suportada','express-async-errors','ephemeralExpiration','Type\x20not\x20found','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','):\x20Error\x20processing\x20the\x20block:\x20','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','text','*\x0a\x0a','verify','/wa-contacts','sharePass','removeProfilePicture','deleteAll','axios','chats.delete','URI','send','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','phoneNumber','set','STORE_CLEANING_TERMINAL','BufferJSON','getDevice','replyOption','bodyString','out','updatePresence','sendPresenceUpdate','\x27\x20do\x20banco\x20de\x20dados...','\x20and\x20data:','getContactModelForOwner','request\x20received\x20in\x20scheduleMessage','.webm','notas','empty','):\x20Bloco\x20com\x20ID\x20','CHATS_UPSERT','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','No\x20suitable\x20network\x20interface\x20found','uuid','groupSetting','):\x20isVote:\x20','displayName','variable','convertaudio','onTime','create','memberAddMode','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','):\x20Entrou\x20na\x20função\x20stop','Erro\x20ao\x20substituir\x20variáveis\x20para\x20','HeaderType','trimmed','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','viewOnceMessageV2','):\x20Conversa\x20inserida\x20com\x20sucesso.','greater','):\x20ev.flush\x20realizado','processvaredits','DATABASE_ENABLED','sort','Mensagens\x20deletadas\x20com\x20sucesso.','binary','namespace','lastInteraction','global','oldValue','Erro\x20ao\x20iniciar\x20o\x20fluxo.','createIPv6','):\x20Adicionando\x20\x27','inet6','):\x20conversation.waitingMenu_name','buttons','removeIPv6','send.message','_ScheduleMessages','saveVariable','buffer','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','use','sectionsToString','downloadMediaMessage','https://github.com/uazapi/uazapi.git','ScheduleMessageModel','imagechat','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','latitude','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','):\x20encontrado\x20próxima\x20mensagem\x20para\x20','descId','canSendMessage','profile','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','processApiRequest','groupDesc','request_time','SERVER_PORT','#fed428','LOG','\x0a{\x20instance:\x20','put','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','flowStopConversation','updateProfileName','Error\x20updating\x20cache\x20contact:','editFlowGroup','reference','pairingCode','qrcode-terminal','waMonitor','push','https://jsonip.com','CORS','\x20minutos.\x20Será\x20às\x20','\x20tentativas.','lastCondition','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','removeInstance','):\x20Flow\x20desativado','connectionState','toLowerCase','_sender','removed','):\x20Editando\x20grupo\x20do\x20fluxo...','Type\x20is\x20required','):\x20Editando\x20variável\x20do\x20fluxo...','newValue','store','close','createConversationforStartFlow','defineProperty','scheduleSendText','getAutomateSystem','):Output\x20path:\x20','):\x20Usando\x20extensão\x20padrão:\x20','sendMedia','Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral','):\x20Flow\x20\x27','SSL_CONF_PRIVKEY','):\x20Going\x20to\x20','LOG_LEVEL','updateProfileStatus','chatLog','reconnectAttempts','expiration','findConversation','etiquetas','awaitingApproval','Cache\x20instance\x20update\x20result:\x20','last_update','fetchPrivacySettings','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','picture','ms\x20(tentativa\x20','this.reconnectAttempts:\x20','redisEnv','request\x20received\x20in\x20updateAutoCompleteMessages','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','instanceKeys','title','AutomateSystem\x20não\x20foi\x20inicializado','\x1b[1m','replaceValue','findByIdAndUpdate','\x20is\x20already\x20in\x20use.','Types','http://checkip.dyndns.org','CONNECTION','copyBlock','fetchInstances','replaceVariablesLogs','GUARD','sendContact','createWebhook','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','replaceVariables','processgoToFlow','notMatchRegex','_fromMe','updateChatGroupData','SSL_CONF_FULLCHAIN','Cache-Control','delaySecMax','class-validator','decryptPollVote','The\x20\x22','telefone','selectedOptions','floor','addBlock','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','Erro\x20ao\x20executar\x20bulkWrite:','messages.set','ex:\x20\x22groupJid=120362@g.us\x22','messageId','\x1b[34m%s\x1b[0m','Error\x20finding\x20many\x20contacts:','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','reorderReplyOptions','slice','keys','):\x20this.processingGroup._id:\x20','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','authorization','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant','repository','notEqual','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','):\x20Chat\x20','formatVCard','\x1b[33m','StartBot',',\x20lastCondition:\x20','):\x20Alterando\x20fluxo...','request\x20received\x20in\x20fetchConversation','MESSAGES_SET','getValidWhatsAppNumbers','messages.upsert','):\x20Entrou\x20na\x20função\x20saveReply','post','base64','getConversationModelForOwner','leadInfo.etiquetas',',\x20global:\x20','includes','crypto','}}\x20->\x20\x22','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','hGet','pictureUrl','flowConfig','proxy:\x20','NextBlock','KEY','Removidas\x20as\x20variáveis:\x20','vote','/instance/connect','\x20Tentativa\x20de\x20reconexão\x20','lean','imageMessage','replaceVariablesInObject','chats','isURL','Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups','):Image\x20converted\x20to\x20WebP','):\x20Error\x20processing\x20conditions:\x20','updateReplyOption','[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache','Subscribed\x20Events:','status','\x1b[33m%s\x1b[0m','applyvaredit','isCommunityAnnounce','):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20','Nenhum\x20fluxo\x20correspondente\x20encontrado.','Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup','#83e421','static','buttonMessage','getChatModelForOwner','leadInfo.desativadoFluxoAte','0123456789ABCDEF','scheduleFlow','addReplyOption','request\x20received\x20in\x20getFlow','deleteBlock','verbose','imgUrl','mimetype','update',',\x20Comparador:\x20','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','existsSync','editFlowVariable','copy','QRCODE_UPDATED','startID','):\x20não\x20encontrou','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','1398785szUlpv','editflow','call','request\x20received\x20in\x20allFlows','agents','processPollUpdateMessage','atendimentoAberto','sections','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','unhandledRejection','ip\x20-6\x20addr\x20add\x20','throwAndLogError','updateMissingCustomFields','toBRL','contactMessage','.TEL;waid=','Background\x20color\x20is\x20required','fetchConversation','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','announce','lastFetchAwaitingApproval','Falhou\x20ao\x20encontrar\x20chat\x20','groupRevokeInvite','PASSWORD','app-state-sync-key','findMessages','):\x20Parar\x20função\x20pois\x20não\x20está\x20conectado','statusMessage','contactsArrayMessage','.png','findMany','stopConversation','fetchProfilePictureUrl','editflowgroup','apirequest','flowConversation','\x5c$&','pre','\x20minutos','paused','lastSend','delayChatLabel_RETRY_DELAY_MS','Instance\x20logged\x20out','checkAndRestartProcess','inviteCode','sendText','editOperator','ChatModel','startFlowWebhook','everyOne','stickerMessage','CONTACTS_UPSERT','Erro\x20ao\x20tentar\x20autoCompleteMessages','text/event-stream','cwd','request\x20body:\x20','remove.instance','ENABLED','number','updateAgent','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','desativadoFluxoAte','forEach','triedToSend','expression','/wa-groups','setHeader','awaitSeconds','getDelay','leadInfo','}}\x20->\x20valor\x20não\x20encontrado','lastReceivedMessage','\x1b[42m','util','Valor\x20de\x20find\x20ou\x20replace\x20ausente','message','Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.','transformScheduledMessagesByType','/events/:instance','Group\x20not\x20found','):\x20Limpando\x20delayMessage','findOne','arrayUnique','50mb','#01d0e2','Erro\x20ao\x20copiar\x20o\x20documento','AUTHENTICATION_API_KEY','fetchLatestBaileysVersion','request\x20received\x20in\x20editFlow','labels.association','Validate','instance.','evaluateCondition','):Converted\x20image\x20deleted','):Desconectado,\x20parando\x20execução.','.mimetype','toDataURL','oldToken','Erro\x20ao\x20editar\x20a\x20conversa','badSession','shareOwners','insertCount','updateOne','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','done','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','events','Fluxos\x20não\x20estão\x20ativados','path','):Temp\x20image\x20deleted','getFlow','\x27\x20não\x20encontrado','File\x20written\x20to\x20path:\x20','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','whatsappNumbers','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','webhookService','pop','PLAYED','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','findLabels','/instance/delete','replaceVariablesChat','proto','envYaml','DATABASE_CONNECTION_DB_PREFIX_NAME','REDIS','blocks','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','Error\x20removing\x20IPv6\x20address:\x20','protocolMessage','upsertChats','shift','dbInstance','Erro\x20ao\x20encerrar\x20a\x20API','\x1b[32m%s\x1b[0m','boolean','AUTHENTICATION_JWT_EXPIRIN_IN','_p_','eventemitter2','variablesToObject','changeVariables','waitingMenu_id','Instance\x20restarted','dataValidate','DATABASE','cachedContacts-whatsapp','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','DisconnectReason','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','mongodb://','release','mkdirSync','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','lastMessage','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.','createOrUpdate','):\x20customFieldVariables','authentication','write','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','\x1b[46m','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','AutomateFunctions','max','less','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','findContacts','testIPv6','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','URL:','processUazapi','@whiskeysockets/baileys','delayChatLabel_MAX_RETRIES','\x20horas\x20e\x20','open','unlinkSync','json','\x20removido\x20do\x20chat\x20','createJid','public','71340TmYCqV','evaluateConditionTest','restart','substring','readFile','\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','USER','sendButtons','sendReaction','\x27\x20removido\x20do\x20AutomateSystem.','stopped','Cannot\x20','132uJDZQk','Subdomínio\x20não\x20encontrado','g-t','loadEnv','leadInfo.atendimentoAberto','shareFlow','):Image\x20path:\x20','fetchProfile','connectedName','/events','headers','has','editflowvaredit','fullName','initAuthCreds','sendMessageWithTyping','@broadcast','):\x20Enviando\x20localização','addMessagesToGroup','):\x20Mensagens\x20prontas\x20para\x20envio\x20encontradas:\x20','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','Falha\x20ao\x20recriar\x20IPv6.','stack','toString','uncaughtException','InstancesAlterarTodas','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','superadmin','Erro\x20ao\x20buscar\x20o\x20fluxo','off','Forbidden','command','Data\x20inválida\x20fornecida','Error\x20updating\x20message\x20status:','isBusiness','media','audioWhatsapp','groups_ignore',',\x20Resultado:\x20','whatsappNumber','DARK','getMessage','cacheInstanceModel','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','99wJlpko','373398okemPt','):\x20Query\x20params:\x20','onWhatsApp','sleep','cacheInstanceRepository','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20não\x20estão\x20ativados.','updateOneById','participant','waitingMenu_replyOptions','extractPhoneNumber','connectToWhatsappController','https://api.openai.com/v1/images/generations','.jwt','header','updateMediaMessage','pollCreationMessageKey','video','isJidUser','loadWebhook','):\x20nextBlock.uazapi.name','uazapi','Error\x20testing\x20IP\x20with\x20','createSectionsFromValues','flattenObject','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','uazapiSendText','leadInfo.customFields','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','Log\x20out\x20instance:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture','SEND_MESSAGE','context','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','sendMessageAck','query','reconnectTimestamps','uazapiSendContact','from','Enter\x20a\x20value\x20in\x20milliseconds','Request\x20Body:','^\x5cd+([-]\x5cd+)*@g.us$','uazapiSendLocation','IPv6\x20recriado\x20após\x20falhas\x20de\x20reconexão.','reactionMessage','Configuração\x20SSL\x20recuperada:','qrCode','Falha\x20ao\x20processar\x20a\x20solicitação','groupLeave','remoteJids','groupUpdateDescription','createInstance','\x20do\x20chat\x20','viewOnceMessage','Erro\x20ao\x20iniciar\x20fluxo:\x20','debug','nomecompleto','?timestamp=','log','isArray','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','processScheduleFlow','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20','extractRegex','findAndUpdateCacheContact','contacts.upsert','isValidIPv6Config','iniciando\x20fluxo\x20router','getLabelModelForOwner','ON\x20-\x20dbName:\x20','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','STORE','exports','integer','hSet','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','COLOR','findFlow','Erro\x20ao\x20atualizar\x20AutomateSystem:','Falha\x20ao\x20processar\x20a\x20solicitação\x20findRealGroups','listMessage','joinGroupValidate','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','sendStatus','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:','CHATS_DELETE','\x1b[40m','qrcode.updated','presence','ERROR','findOneAndUpdate','connection.update','request\x20received\x20in\x20deleteFlow','AppStateSyncKeyData','folder','):\x20error:\x20','getScheduleMessageModelForOwner','/wa-message-update','Erro\x20inesperado\x20em\x20processvaredits:\x20','):\x20Editando\x20edição\x20do\x20fluxo...','updateChatWithMessage','timeout','updateParticipant','TEL','deleteChat','):Type\x20defined\x20as\x20audio','numbers','https://chat.whatsapp.com/','Início','secondValue','isRunning','Not\x20Found','AUTHENTICATION_TYPE','chats.upsert','matchRegex','myAppStateKeyId','@g.us','promote','Generated\x20IPv6:\x20','realVariables','dbClient','readData','updateFlowConfig','remoteJid','normalizeMessage','apiResponse','Erro\x20ao\x20deletar\x20chat:','sendPoll','Stack\x20trace:','limit','\x22\x20not\x20found','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','\x20minutos...','Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo','/wa-connection-update','uazapiSendMenu','editflowblock','/wa-qrcode','modifiedCount','insertMany','CONTACTS_UPDATE','listType','editFlowReply','deleteConversation','editedMessage','Variável\x20não\x20encontrada!','startCommand','isConnected','cacheContactModel','REDIS_URI',']\x20(','startFlow','#9ab6c1','178191xWlTUW','_activedCount','chat\x20não\x20encontrado','code','connectionStatus','bodyStringErrorParse','output','Instance\x20deleted','cpf','MESSAGES_UPSERT','DB_PREFIX_NAME','readreceipts','sendCommand','WebhookGlobal','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting','createConnection','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','generateWAMessageFromContent','body','synchronizeAndMapFlows','clearVariables','groupAcceptInvite','\x20-i\x20','description','Erro\x20ao\x20buscar\x20a\x20conversa','.webp','):\x20Entrou\x20na\x20função\x20clearVariables','eventEmitter','apikey','):\x20enviado\x20para\x20[','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','):\x20Criou\x20conversa\x20no\x20startFlow','Tentando\x20reconectar...','readMessageBot','Module\x20-\x20ON','varedit','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','findChats','user','https://uazapi-plugin.bubbleapps.io/?url=','):\x20Editando\x20mensagens\x20no\x20grupo...','audio','DATABASE_CONNECTION_USER','contextInfo','.xls','instance','noConnection','):Image\x20is\x20base64','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo','CORS_METHODS','msgRetryCounterCache','$dbName','deleteMessageForEveryone','/automate','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','[all]','profilePicture','address','wuid','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','PRODUCT_LIST','AutomateSystem','autoCompleteMessages.command_1','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','convertaudioMP3','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','RECONNECT_TIME_FRAME','enabled','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','HH:mm:ss','editFlowVaredit','joinApprovalMode','Filtered\x20network\x20interfaces:\x20','Error\x20removing\x20unused\x20chat\x20fields:','jsonschema','statusJidList','):Error\x20in\x20converting\x20audio','\x1b[47m','setting','processUUID','/media','true','Instance\x20\x22','):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20','allFlows','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','/config','deleted','gifPlayback','http','participants','\x1b[32m','value','blockLogs','group-participants.update','/instance','tags','fetchProfilePicture','views','reaction','):\x20Editando\x20replyOption...','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact','inner','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','application/json','join','sendList','Fluxo\x20agendado\x20pelo\x20fluxo\x20','name','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','upsertedCount','firstValue','VERBOSE','convertedOptions','loggedOut','115557yzhgSR','Conexão\x20estabelecida','Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global','uazapiSendMedia','bearer','.xlsx','SINGLE_SELECT','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp','updateStopChat','ObjectId','toBrazilianNumberFormat','\x20:\x20','mediaMessage','CLEANING_INTERVAL','cleaningUp','keyPattern','Selecione','documentWithCaptionMessage','delay','):\x20Conversa\x20está\x20expirada\x20-\x20voto','readMessages','):\x20[messages.update]\x20group\x20ignored','):\x20Criou\x20conversa\x20no\x20startFlowWebhook','editflowvariable','):\x20\x27Enviando\x20mídia\x20para\x20\x27','test','spawn','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','Last\x20message\x20not\x20found','groupMetadata','The\x20global\x20api\x20key\x20must\x20be\x20set','isAdmin','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','\x22\x20cannot\x20be\x20empty','unknown\x20operation\x20type\x20[','save','):\x20newFirstValue\x20após\x20replaceVariables:','):\x20Enviando\x20contato','webhookMap','getConversation','auth','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','request\x20received\x20in\x20createFlow','font','order','descOwner','Falha\x20ao\x20criar\x20IPv6.','width','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.','imported','deleteInstance',',\x20isAdmin:\x20','chatModify','values','start','client','utf8','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','IPv6\x20Prefix\x20detected:\x20','):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!','reject','Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','-instances',',\x20resultado:\x20','E-mail:\x20','request\x20received\x20in\x20editFlowvariable','Instance\x20ID:','Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:','then','_activatedCount','minutesToClose','updateMany','cacheContact','IPv6\x20addresses\x20detected:\x20','https://','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','PRIVKEY','):\x20Fluxo\x20\x27','Message\x20absent\x20from\x20node','defineAuthState','request\x20received\x20in\x20deleteConversation','MESSAGES_UPDATE','Subdomínio\x20final:','Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...','js-yaml','MAX_SAFE_INTEGER','object','find','):\x20Entrou\x20na\x20função\x20goToFlow','):\x20Entrou\x20na\x20função\x20processawaitSeconds','audio/ogg','$addToSet','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','arraybuffer','setRestartTimeout','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','/message','Database\x20connection\x20closed.','customFields','del','180QrrgKo','automateSystem','networkInterface','getPrototypeOf','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','formatBRNumber','sha256','$set','bateu\x20events','):\x20Entrou\x20na\x20função\x20scheduleFlow','findWebhook','array','sendLocation','segundos','menuIgnoreNonVotes','delete','processConditions','STATUS_INSTANCE','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','conversationTimestamp','createAndSave','editScheduleMessage','ConversationModel','stopWhenYouSendMsg','content','connectToWhatsapp','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','result','username','request\x20received\x20in\x20updateFlowConfig','updateAll','dropIndex','keep-alive','statSync','updateMissingTags','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','RemoteJid:','Erro\x20de\x20atualização:\x20','responsavelid','privacySettings','collection','authModel','Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20','):Audio\x20converted\x20and\x20stored\x20in\x20cache','instances','XX:XX:XX:XX:XX:XX','updateOnlinePrivacy','pollErrorMessage','Esse\x20fluxo\x20não\x20permite\x20importação.','editFlowBlock','):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20','image','isBase64','closed','ButtonsMessage','\x5cd+','processclearVariables','Mac\x20OS','):\x20Enviando\x20mensagem\x20para\x20',',\x20valor\x20passado:\x20\x22','jid','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','\x0aFN:','ScheduleMessage','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','request\x20received\x20in\x20editFlowgroup','model','AUTHENTICATION_JWT_SECRET','preview','findById','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','SERVER_OFFLINE','ContactModel','type','#ff9484','variables','URL','storePath','chat','size',',\x20fará\x20nova\x20verificação\x20em\x20','getTime','request\x20received\x20in\x20updateAgent','getMessageModelForOwner','split','editChat','https','variablesNotFound','#f64847','PORT','PREFIX_KEY','contact_blacklist','lowerCase','admin','findRealGroups','isJWT','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','documentMessage','restrict','exists','removeChatLabel','extractMessageContent','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:','makeCacheableSignalKeyStore','fora\x20do\x20git','now','and','findGroups','The\x20','Limpando\x20logs\x20do\x20PM2...','apiName','assign','$pull','default','Partes\x20do\x20caminho\x20FULLCHAIN:','varedits','Missing\x20global\x20api\x20key','creds.update','https://api.elevenlabs.io/v1/text-to-speech/','ListType','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','Instância:\x20','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','):\x20whoCanUse\x20after\x20validation:\x20','response','deviceSentMessage','.error','sendMenu','footerText','readMessage','):\x20alterando\x20this.AutomateSystem','label','writeData','collections','some','deleteflow','2073296ExfBap','updatePrivacySettings',',\x20qrcodeCount:\x20','detectIPv6PrefixAndInterface','normalizeMessageContent','success','scheduleNextCheck','pollOnReplyDelete','temp-','request\x20received\x20in\x20getConversation','dbServer','\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','updateMessage','email','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','labelId','hex','https://v6.ident.me','sim','info','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','writeFileSync','editFlow','Erro\x20ao\x20buscar\x20Schedule\x20Messages','selectableCount','\x20saindo\x20da\x20função','updateBlock','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','groups','flowName','Deletion\x20failed','leaveGroup','audioMessage','):\x20Enviando\x20áudio','#d3a91f','sharp','Erro\x20ao\x20atualizar\x20agendamento\x20','PROXY','saveMediaToFile','execSync','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','charAt','data','request\x20received\x20in\x20starFlow','jpegThumbnail','groupRequestParticipantsList','\x20ao\x20chat\x20','CONTACTS_SET','Fluxo\x20id\x20\x27','where','data:\x20','isListOfNumbers','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','setNewValue','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','_remoteJid','statusCode','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20','whoCanUse','rows','isLong','retrySendMessage','configureIPv6','groupMemberAddMode','startCommandWord','Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20','.type','Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...','hbs','scheduleSendAudio','contactHandle','Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture','pow','groupadd','findOrCreate','Comando\x20desconhecido','Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','WA\x20MODULE','groupJid','rowId','OrAnd','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','currency','trim','\x20não\x20encontrado\x20para\x20cópia','Sistema\x20atualizado\x20com\x20sucesso!','JWT','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','contains','errors','last','owner','subjectTime','notContains','redis','messageContextInfo','\x1b[36m','/group','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','error\x20get\x20vote','request\x20received\x20in\x20updateCustomFields','originalUrl','match','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','hGetAll','):\x20[messages.upsert]\x20group\x20ignored','LICENSE_INVALID','cache','random','uazapiSendAudio','MessageModel','EXPIRIN_IN','userDevicesCache','envProcess','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc','\x20contacts','Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos','archiveChat','verifyWhatsAppNumber','removeIPv6ById','jwt','createConversationforgoToFlow','ff:fe','Fluxo\x20não\x20encontrado\x20na\x20memória.','.url','DEBUG','entries','apply','nome','Not\x20allowed\x20by\x20CORS','dbSettings','):\x20Editando\x20condição\x20do\x20fluxo...','\x20com\x20sucesso.','when','blockId','url','role','findGroup','):Delete\x20chat\x20in\x20client\x20for\x20number:\x20','):Archiving\x20chat','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence','GROUPS_UPDATE','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','color','leadInfo.','Erro\x20ao\x20editar\x20agentes','\x20adicionado\x20ao\x20chat\x20','.txt','REDIS_ENABLED','):\x20Grupo\x20','Erro\x20ao\x20aplicar\x20varedit:\x20','messageType','Flow\x20\x27','#ffc5c7','):\x20Conversa\x20atualizada\x20em\x20memória','next_groupId','!cmd_','urlOrBase64','findAll','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','goNextblock','removeData','writeFile','lastSendMessage','AddUserFlow','Erro\x20ao\x20inserir\x20chats:','):\x20Enviando\x20mídia','buttonId','CHATS_SET','findAndReplaceRegex','GROUPS_UPSERT','groupFetchAllParticipating','recording','authState','document','):\x20newSecondValue\x20após\x20replaceVariables:','mediatype','messageStubParameters','readFileSync','updateGroupsAddPrivacy','option','mediaSticker','express','getContentType','lastUpdate','Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.','desc','format','setWebhook','processawaitSeconds','replyOptions',',\x20received\x20','.mp3','getLastMessage','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','reviver','stopMinutes','length','chatHandle','saveChatVariables','groupSettingUpdate','pushName','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','qrcode','\x20depois\x20','.extension','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','https://uazapi-plugin.bubbleapps.io/','birthtime','goToFlow','method','\x1b[41m','editFlowCondition','Erro\x20ao\x20arquivar\x20chat','no.connection','Novo\x20IP\x20criado:\x20','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','):\x20leadInfoVariables','drop','contact','updateConversation','LEVEL','fetchMessages','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','delayMessage','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','.fileUrl','choices','request\x20received\x20in\x20getAutomateSystem','mentioned','getAllData','idSchedule','announcement','toNumber','detail','pt-BR','sendDataWebhook','Error\x20parsing\x20JSON:','SERVER','creds','ReplyOption\x20com\x20ID\x20','downloads','_id','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','Fluxo\x20\x27','Detalhes\x20do\x20erro:','):\x20delete\x20=\x20true','authService','exec','updateProfilePicture','organization','_Contacts','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','joinGroup','\x1b[30m','prepareWAMessageMedia','):Image\x20created','):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar','request\x20received\x20in\x20editFlowcondition','backgroundColor','Connection\x20closed\x20for\x20instance:\x20','globalShow','):\x20Procurando\x20conversa','ORG:','configService','autoCompleteMessages','truncatedto','stanzaId','):\x20Rótulo\x20atualizado:\x20','padEnd','/instance/create','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','importChatsAntigo','sem\x20texto\x20na\x20mensagem','deleteMany','createNewConversation','options','SERVER_TYPE','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','):\x20','PENDING','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','src','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','prototype','replace','IPv6\x20address\x20configured:\x20','\x1b[31m%s\x1b[0m','ip6eui','compression','stderr','archive','maxActives','toggleEphemeral','7FhbcDT','#d8e651','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','router','Deleted\x20','\x20inseridos\x20no\x20banco\x20de\x20dados...','flush','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','sendWhatsAppAudio','):\x20Deletando\x20conversa...','status@broadcast','/:instanceName','convertToWebP','fromObject','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','importChatsBatch','Invalid\x20format','sendSticker','list','longitude','newStoppedUntil','application/octet-stream','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','Erro\x20na\x20função\x20updateChatWithMessage:\x20','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','status.instance','valid','promisify','):\x20Erro\x20durante\x20a\x20atualização:\x20','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','generateRandomIPv6','\x1b[1m\x1b[37m','fone','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','mongoose','function','\x1b[33m\x1b[1m','createFlow','Last\x20message\x20not\x20found\x20for\x20number:\x20','saveTextReply','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','connectionClosed','deleteOne','groupInviteCode','available','DOCKER_ENV','splice','senderKeyDistributionMessage','):\x20Buscando\x20flow...','contentText','chats.update','\x20minutos\x20verificará\x20novas\x20mensagens','updateProfilePicturePrivacy','map','add','instanceCount','\x1b[37m','/webhook','timeInMinutes','upperCase',',\x20valor\x20a\x20encontrar:\x20\x22','editflowcondition','replaceVariablesInReplyOptions','isCommunity','groupName','Atualização:\x20','conditions','scheduled','profilePictureUrl','uazapiDeleteMessage','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','beautifyWithPlaceholders','string','groupGetInviteInfo','updateGroupWebhook','online','fetchLabels','licenca','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','END:VCARD','headerString','encoding','READ','audio/ogg;\x20codecs=opus','ipv6Prefix','Esse\x20fluxo\x20expirou','):\x20Falha\x20ao\x20deletar\x20mensagem.','fetchChats','admin_add','unlocked','profileName','waitingForReplyMenu','request\x20received\x20in\x20editConversation','Error\x20in\x20chatModify\x20for\x20number\x20','process','Garbage\x20collection\x20não\x20está\x20disponível.','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','Db\x20Connection','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','https://ipv6.jsonip.com','redis://127.0.0.1:6379','messageTimestamp','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','flow','):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20','parse','Variáveis\x20não\x20encontradas:','groupToggleEphemeral','beforeExit','cleanDisconnectedInstances',',\x20saindo.','conversation','getGroupMetadataCache','getProfileName','Erro\x20ao\x20adicionar\x20label\x20','updateGroupParticipantsWebhook','fetchBusinessProfile','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','mediaKey','/instance/fetchInstances','Bloco\x20com\x20ID\x20','IPv6\x20address\x20removed:\x20','updateStatusPrivacy','SSL_CONF','Usando\x20IP\x20existente:\x20','hasOwnProperty','.ogv','__esModule','Schema','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','logout','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','creation','isInteger','unreadcount','SERVER_ACK','Erro\x20ao\x20editar\x20o\x20bloco:\x20','Flow\x20iniciado\x20com\x20','env','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','request\x20received\x20in\x20deleteDoneMessages','messages','item','ephemeralDuration','jsonwebtoken','waitingMenu_text','not_announcement','replaceOne','webhookModel','flowActive','getTicketSystem','This\x20name\x20','startsWith','Subdomínio\x20extraído\x20da\x20URL:','#6f7bcf','):\x20this.client.authState.creds?.myAppStateKeyId:\x20','inviteUrl','no-cache','utf-8','abs','getVariablesChat','request_method','getStatus','.docx','validate','ip\x20-br\x20link\x20show','-whatsapp-api','capitalizedWords','findAndReplace','reorderMessages','groupId','Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20','load','[AUTH]\x20Database\x20is\x20not\x20enabled','https://api.openai.com/v1/audio/speech','groupJoinApprovalMode','autoCompleteMessages.command','stringify','AddChatLabel','Erro\x20ao\x20buscar\x20metadados\x20do\x20grupo\x20para\x20','pollCreationMessage','revokeInviteCode','dropCollection','reorderBlocks','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','end','):\x20Iniciando\x20bot...','isJidBroadcast','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','/media/','remove','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','SendScheduleMessage','toUpperCase','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','findParticipants','video-cover.png',',\x20Expiration\x20Time:\x20','findIndex','4hxXpcx','):Getting\x20image\x20from\x20url','getScheduleMessage','fetchContacts','vir','Message','approve','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','block','count','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','editConversation','Content-Type','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','pollCreationMessageV2','ignoreGroups','):\x20Label\x20','\x20atualizado\x20com\x20sucesso.\x20Ação:\x20','none','groupdata.participants','DaysToDelete','groupdata','messaging-history.set','ip\x20-6\x20addr\x20show\x20dev\x20','Rótulo\x20inválido\x20ou\x20sem\x20ID.','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','Erro\x20ao\x20atualizar\x20cacheInstance:','groupParticipantsUpdate','):\x20tem\x20blocks','\x1b[30m%s\x1b[0m','archived','?authSource=admin&readPreference=primary&directConnection=true','child_process','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','pollCreationMessageV3','Retornando\x20grupos\x20COM\x20cache','Read\x20messages','exit','menuMessage','key','verifiedName','groupUpdateSubject','Retornando\x20grupos\x20SEM\x20cache','markMessageAsRead','optionDescription','\x20foi\x20interrompido\x20pelo\x20usuário.','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','message_normalized','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','):\x20Criando\x20fluxo...','6456QVNpXr','Network\x20interfaces\x20detected:\x20','groupBetterSetting','):\x20Mensagem\x20já\x20enviada\x20para\x20','generate','docker','WARN','subject','getOwnPropertyNames','Erro\x20ao\x20deletar\x20mensagens:','endsWith','chatId','):\x20\x27Deletando\x20fluxo,\x20id:\x20','\x20-\x20ON:\x20','):\x20Ler\x20mensagem','getBusinessProfile','#b4ebff','#00a1f2','@redis/client','get','TYPE','):Notifying\x20clients\x20for\x20chat:\x20','indexOf','all_member_add','):\x20whoCanUse\x20before\x20validation:\x20','lastRealGroupsFetch','contacts','STORE_CHATS','.\x20Aguardando\x20','\x0a*Você\x20respondeu*:\x0a','Erro\x20ao\x20buscar\x20fluxos:','moreLogs','ListMessage','whoCanEdit','waitingMenu_ExpiredMessage','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','reduce','SERVER_URL','messageHandle','saveCreds','findManyByIds','deleteMessage','\x22,\x20valor\x20a\x20substituir:\x20\x22','unreadCount','flushHeaders','importChats','\x22reaction\x22\x20must\x20be\x20an\x20emoji','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','pollUpdateMessage','_pushName','):\x20lastBlockId:\x20','Error\x20while\x20deleting\x20message\x20for\x20everyone','ip\x20-6\x20addr\x20del\x20','):Image\x20is\x20url','RemoveChatLabel','loadInstance','yes','instanceName','Error\x20in\x20scheduleNextCheck:\x20','getUpdate','METHODS','content-type','state','localWebhook','findGroupsEspecial','):\x20\x27Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x27,\x20','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','deleteImportedChat','INFO','GET','\x20não\x20encontrado','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.','groupHandler','\x1b[0m','Valor\x20inicial:\x20\x22','routerPath','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','groups.update','):\x20Ignoring\x20group\x20messages.','label_jid','https://api.ipify.org?format=json','linkPreview','not\x20loaded','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','testingWith','):\x20debug\x20alterando\x20this.AutomateSystem','\x27...','getMinutes','TEXT','local_map','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','composing',',\x20pairCode:\x20','Content\x20is\x20required','saveConversationToDatabase','CHATS_UPDATE','processblock','view\x20engine','):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27','):\x20Query\x20params:','toLocaleString','website','labels.edit','Nenhum\x20chat\x20fornecido\x20para\x20inserção.','Instância\x20não\x20encontrada.','):Sending\x20audio\x20whatsapp','#ffffff','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','isValidAndUniqueIPv6','The\x20property\x20cannot\x20be\x20empty','fileName','instanceInfo','PRESENCE_UPDATE','\x22\x20-\x20NOT\x20CONNECTION','redirect','formatStatusMessage','Authentication\x20error','locationMessage','condition','inviteCodeDetails','CORS_ORIGIN','flows','pollMessage','Rótulo\x20deletado:\x27,\x20','\x20segundos\x20antes\x20de\x20reconectar...','equal','getOwnPropertyDescriptor','):\x20transformedCustomFieldVariables','error','AUTHENTICATION','Error\x20writing\x20file:\x20','toFile','.X-ABLabel:Celular\x0a','Error\x20adding\x20IPv6\x20address:\x20','groups.upsert','connecting','menuExpiredMessage','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','Resultado\x20da\x20correspondência\x20de\x20URL:','bulkWrite','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','Instance\x20Key\x20from\x20DB:','digest','./.git/config','connect','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.','toArray','error_log','stopMinutesMaxActives','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','sendMessage','_Labels','Close\x20connection','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','\x20instance\x20does\x20not\x20exist','):Processing\x20audio','Internal\x20Server\x20Error','\x20não\x20encontrado\x20para\x20atualização.','\x27\x20não\x20encontrado\x20na\x20memória','createHash','/exit','/wa-chats','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','muteEndTime','API_KEY','getClient','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.','messages.update','Partes\x20do\x20domínio:'];a0_0x5767=function(){return _0x275f47;};return a0_0x5767();}var Qe=class{constructor(_0x1eaf1c,_0x2365b3,_0x540a47,_0x4450c9,_0x5d28e1,_0x3cb6d9,_0xffdb8d,_0x4ab2c7,_0x3b20ba,_0x5d2f2a,_0x4da1ae,_0x4c4b84,_0x1d317f){const _0x1d0738=a0_0x4a47c0;this['message']=_0x1eaf1c,this['chat']=_0x2365b3,this['contact']=_0x540a47,this[_0x1d0738(0x2ab)]=_0x4450c9,this[_0x1d0738(0x63e)]=_0x5d28e1,this['auth']=_0x3cb6d9,this[_0x1d0738(0x21b)]=_0xffdb8d,this[_0x1d0738(0x4e4)]=_0x4ab2c7,this[_0x1d0738(0x7ef)]=_0x3b20ba,this[_0x1d0738(0x34b)]=_0x5d2f2a,this[_0x1d0738(0x654)]=_0x4da1ae,this[_0x1d0738(0x2c8)]=_0x4c4b84,this[_0x1d0738(0x1cd)]=_0x1d317f;}get[a0_0x4a47c0(0x35a)](){const _0x27a6d3=a0_0x4a47c0;return this[_0x27a6d3(0x1cd)];}},Ye=class{},Xe=class extends _{['getMessageModelForOwner'](_0x3f4fe8){return ua(_0x3f4fe8);}async['insert'](_0x24e58a,_0x3621bd){const _0x7d46d=a0_0x4a47c0;if(_0x24e58a[_0x7d46d(0x415)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x7d46d(0x31b)](_0x3621bd)[_0x7d46d(0x1e0)]([..._0x24e58a]))[_0x7d46d(0x415)]};}catch(_0x47078b){return _0x47078b;}}async[a0_0x4a47c0(0x2ba)](_0x4e403b,_0x22662e){const _0x139802=a0_0x4a47c0;try{let _0x4833e3=this[_0x139802(0x31b)](_0x22662e),_0x32aa09=A(_0x4e403b[_0x139802(0x381)]);return await _0x4833e3[_0x139802(0x2ba)](_0x32aa09)[_0x139802(0x6f0)]({'messageTimestamp':-0x1})['limit'](_0x4e403b?.[_0x139802(0x1d6)]??0x0)[_0x139802(0x7a3)]();}catch{return[];}}async['delete'](_0x2db969,_0x35f1af){const _0xde072b=a0_0x4a47c0;try{let _0x4abeb1=this[_0xde072b(0x31b)](_0x35f1af),_0x426713=A(_0x2db969['where']);await _0x4abeb1[_0xde072b(0x465)](_0x426713);}catch(_0x57e200){console['error'](_0x57e200);}}async[a0_0x4a47c0(0x7c2)](_0x522a5a,_0x56dad5,_0x1cff92){const _0x9e5c80=a0_0x4a47c0;try{let _0x51ff48=this[_0x9e5c80(0x31b)](_0x1cff92),_0xce4e76=A(_0x522a5a[_0x9e5c80(0x381)]);return await _0x51ff48[_0x9e5c80(0x1af)](_0xce4e76,{'$set':_0x56dad5},{'new':!0x0});}catch(_0x359762){throw console[_0x9e5c80(0x5f8)](_0x359762),_0x359762;}}async['insertMany'](_0x4eb65d,_0x53ef50){const _0x361fa8=a0_0x4a47c0;if(_0x4eb65d[_0x361fa8(0x415)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x361fa8(0x31b)](_0x53ef50)['insertMany']([..._0x4eb65d]))[_0x361fa8(0x415)]};}catch(_0x324bf6){return console[_0x361fa8(0x18d)]('ERROR:\x20',_0x324bf6),_0x324bf6;}}async[a0_0x4a47c0(0x6c0)](_0x10ea67){const _0x43ad46=a0_0x4a47c0;try{return await this[_0x43ad46(0x31b)](_0x10ea67)[_0x43ad46(0x2f0)][_0x43ad46(0x42b)](),{'success':!0x0};}catch(_0x17408e){return console[_0x43ad46(0x5f8)](_0x17408e),{'success':!0x1,'error':_0x17408e};}}},Ps=I(require('@ffmpeg-installer/ffmpeg')),w=I(require(a0_0x4a47c0(0x110))),Fe=require('fs'),j=I(require(a0_0x4a47c0(0xce))),te=I(require('axios')),_i=require(a0_0x4a47c0(0x6db)),xi=I(require('qrcode')),Di=I(require(a0_0x4a47c0(0x721))),$a=[a0_0x4a47c0(0x7a4),a0_0x4a47c0(0x329),a0_0x4a47c0(0x370),'videoMessage',a0_0x4a47c0(0x7fe)],Ra=[a0_0x4a47c0(0x646),a0_0x4a47c0(0x273),a0_0x4a47c0(0x188),a0_0x4a47c0(0x6ea)],ks=require('os'),qt=I(require('pino')),Ue=require('child_process'),Pi=require('node-mime-types'),fe=I(require(a0_0x4a47c0(0x49d))),L=require(a0_0x4a47c0(0x76c)),pe=class{constructor(_0x5cc893,_0x3ddb29,_0x3b3e7d){const _0xa2f0f3=a0_0x4a47c0;this[_0xa2f0f3(0x304)]=_0x5cc893,this[_0xa2f0f3(0x32b)]=_0x3ddb29,this['name']=_0x3b3e7d;}},Ze=class{},et=class{},Oe=class{},tt=class{},st=class{},ve=class{},at=class{},it=class{},ot=class{},rt=class{},kt=I(require(a0_0x4a47c0(0x406))),Aa=require('fs'),Ia=require(a0_0x4a47c0(0xce));async function _e(_0x1ce463){const _0x355468=a0_0x4a47c0;let _0x4d061a=z[_0x355468(0x6b2)][_0x1ce463];if(U[_0x355468(0x99)]){let _0xf4f39f=R['getClient']()['db'](U[_0x355468(0x75c)][_0x355468(0x1f8)]+'-instances')[_0x355468(0x2f0)](_0x1ce463);return _0x4d061a||(await _0xf4f39f[_0x355468(0x2ba)]({})[_0x355468(0x60a)]())[_0x355468(0x415)]>0x0;}return _0x4d061a||(0x0,Aa[_0x355468(0x7c5)])((0x0,Ia[_0x355468(0x258)])(Me,_0x1ce463));}async function Ta(_0x36faec,_0x508c08,_0x1945cd){const _0xaf5add=a0_0x4a47c0;if(_0x36faec['originalUrl']['includes'](_0xaf5add(0x460))||_0x36faec[_0xaf5add(0x3b5)][_0xaf5add(0x795)](_0xaf5add(0x4f4))||_0x36faec[_0xaf5add(0x3b5)][_0xaf5add(0x795)](_0xaf5add(0x618))||_0x36faec[_0xaf5add(0x3b5)]['includes']('/config')||_0x36faec['originalUrl'][_0xaf5add(0x795)](_0xaf5add(0x7a1))||_0x36faec[_0xaf5add(0x3b5)][_0xaf5add(0x795)]('/instance/connectionState')||_0x36faec[_0xaf5add(0x3b5)][_0xaf5add(0x795)](_0xaf5add(0xdc)))return _0x1945cd();let _0x552948=_0x36faec[_0xaf5add(0x699)];if(!_0x552948?.[_0xaf5add(0x5b1)])throw new m('instanceName\x20not\x20provided.');if(!await _e(_0x552948[_0xaf5add(0x5b1)]))throw new J(_0xaf5add(0x334)+_0x552948[_0xaf5add(0x5b1)]+_0xaf5add(0x612));_0x1945cd();}async function Oa(_0x16c0fd,_0x548dfb,_0xa0b47){const _0x5eb63a=a0_0x4a47c0;if(_0x16c0fd[_0x5eb63a(0x3b5)][_0x5eb63a(0x795)]('/instance/create')){let _0x4d904d=_0x16c0fd[_0x5eb63a(0x200)];if(await _e(_0x4d904d['instanceName']))throw new se(_0x5eb63a(0x515)+_0x4d904d[_0x5eb63a(0x5b1)]+_0x5eb63a(0x759));z['waInstances'][_0x4d904d[_0x5eb63a(0x5b1)]]&&delete z[_0x5eb63a(0x6b2)][_0x4d904d[_0x5eb63a(0x5b1)]];}_0xa0b47();}var _a=require(a0_0x4a47c0(0x76c)),xa=I(require(a0_0x4a47c0(0x50e))),nt=a0_0x4a47c0(0x168),Ao=new $(a0_0x4a47c0(0x760));async function Io(_0x195368,_0x156584,_0x10ac36){const _0x377e8c=a0_0x4a47c0;let _0x5026ce=_0x195368[_0x377e8c(0x58b)](_0x377e8c(0x20a));if(_0x5026ce&&b['get']('AUTHENTICATION')[_0x377e8c(0x61c)][_0x377e8c(0x79e)]!==_0x5026ce)throw new ce();if(b['get']('AUTHENTICATION')[_0x377e8c(0x61c)]['KEY']===_0x5026ce)return _0x10ac36();if((_0x195368[_0x377e8c(0x3b5)][_0x377e8c(0x795)](_0x377e8c(0x460))||_0x195368[_0x377e8c(0x3b5)][_0x377e8c(0x795)]('/instance/fetchInstances'))&&!_0x5026ce)throw new se(_0x377e8c(0x33c),_0x377e8c(0x280));let _0x4a10b7=b['get']('AUTHENTICATION')[_0x377e8c(0x3a6)];try{let [_0x109f91,_0x1b8713]=_0x195368[_0x377e8c(0x58b)](_0x377e8c(0x780))[_0x377e8c(0x31c)]('\x20');if(_0x109f91[_0x377e8c(0x72d)]()!==_0x377e8c(0x266))throw new ce();if(!(0x0,_a[_0x377e8c(0x327)])(_0x1b8713))throw new ce();let _0x2b4457=_0x195368['params'],_0x3ced27=xa[_0x377e8c(0x339)][_0x377e8c(0x6bc)](_0x1b8713,_0x4a10b7['SECRET'],{'ignoreExpiration':_0x4a10b7['EXPIRIN_IN']===0x0});if(_0x2b4457['instanceName']!==_0x3ced27[_0x377e8c(0x5b1)]||nt!==_0x3ced27[_0x377e8c(0x336)])throw new ce();return _0x10ac36();}catch(_0x5193ae){throw Ao[_0x377e8c(0x5f8)](_0x5193ae),new ce();}}async function To(_0x21c4ed,_0x33c419,_0x4020bb){const _0x396368=a0_0x4a47c0;let _0x16c891=b[_0x396368(0x58b)](_0x396368(0x5f9))['API_KEY'],_0x3ebfce=_0x21c4ed[_0x396368(0x58b)](_0x396368(0x20a));if(_0x16c891[_0x396368(0x79e)]===_0x3ebfce)return _0x4020bb();if(_0x21c4ed['originalUrl'][_0x396368(0x795)](_0x396368(0x460))){let _0x128ab7=Pa,_0x1916f8=_0x21c4ed[_0x396368(0x200)]['instanceName'];if(_0x128ab7&&_0x1916f8[_0x396368(0x72d)]()[_0x396368(0x516)](_0x128ab7[_0x396368(0x72d)]()))return _0x4020bb();if(!_0x3ebfce)throw new se(_0x396368(0x33c),_0x396368(0x280));}if(_0x21c4ed[_0x396368(0x3b5)][_0x396368(0x795)](_0x396368(0x4f4))&&!_0x3ebfce)throw new se(_0x396368(0x33c),_0x396368(0x280));if(_0x21c4ed[_0x396368(0x3b5)][_0x396368(0x795)](_0x396368(0x618))&&!_0x3ebfce)throw new se(_0x396368(0x33c),'The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x21c4ed[_0x396368(0x3b5)]['includes'](_0x396368(0x245))&&!_0x3ebfce)throw new se(_0x396368(0x33c),_0x396368(0x280));try{let _0xd96c99=_0x21c4ed[_0x396368(0x699)],_0x1e9253=await we[_0x396368(0x28a)][_0x396368(0x2ba)](_0xd96c99[_0x396368(0x5b1)]);if(_0x1e9253&&_0x1e9253[_0x396368(0x20a)]===_0x3ebfce)return _0x4020bb();}catch{}throw new ce();}var Da={'jwt':Io,'apikey':To},mi=require('express'),E=require('uuid'),C=(..._0x244a17)=>{const _0x175c45=a0_0x4a47c0;let _0x975def={};return _0x244a17[_0x175c45(0x9e)](_0x586cd7=>_0x975def[_0x586cd7]={'minLength':0x1,'description':_0x175c45(0x76e)+_0x586cd7+_0x175c45(0x283)}),{'if':{'propertyNames':{'enum':[..._0x244a17]}},'then':{'properties':_0x975def}};},v={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'instanceName':{'type':'string'}},...C('instanceName')},mc={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'oldToken':{'type':a0_0x4a47c0(0x4c4)}},'required':[a0_0x4a47c0(0xc1)],...C('oldToken')},fc={'properties':{'key':{'type':'object','properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x4a47c0(0x4c4)},'fromMe':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]}},'required':['id','remoteJid',a0_0x4a47c0(0x655)],...C('id',a0_0x4a47c0(0x1d0))},'message':{'type':'object'}}},ae={'properties':{'delay':{'type':a0_0x4a47c0(0x19d),'description':a0_0x4a47c0(0x17a)},'presence':{'type':'string','enum':[a0_0x4a47c0(0x65e),a0_0x4a47c0(0x4a7),a0_0x4a47c0(0x5d3),a0_0x4a47c0(0x3fc),a0_0x4a47c0(0x7f3)]}}},Z={'type':a0_0x4a47c0(0x4c4),'description':a0_0x4a47c0(0x48a)},ka={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'number':{...Z},'options':{...ae},'textMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'text':{'type':a0_0x4a47c0(0x4c4)}},'required':['text'],...C(a0_0x4a47c0(0x6ba))}},'required':['textMessage',a0_0x4a47c0(0x9a)]},La={'type':a0_0x4a47c0(0x4c4),'pattern':a0_0x4a47c0(0xda),'description':a0_0x4a47c0(0x48a)},wc={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'number':{...La},'options':{...ae},'textMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'text':{'type':a0_0x4a47c0(0x4c4)}},'required':['text'],...C('text')}},'required':[a0_0x4a47c0(0x644),a0_0x4a47c0(0x9a)]},yc={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'number':{...La},'options':{...ae},'mediaMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'mediatype':{'type':a0_0x4a47c0(0x4c4),'enum':['image',a0_0x4a47c0(0x3fe),a0_0x4a47c0(0x164),a0_0x4a47c0(0x217)]},'media':{'type':'string'},'fileName':{'type':a0_0x4a47c0(0x4c4)},'caption':{'type':a0_0x4a47c0(0x4c4)}},'required':['mediatype',a0_0x4a47c0(0x148)],...C(a0_0x4a47c0(0x5e6),'caption',a0_0x4a47c0(0x148))}},'required':['mediaMessage',a0_0x4a47c0(0x9a)]},Fa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'stickerMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'image':{'type':a0_0x4a47c0(0x4c4)}},'required':['image'],...C(a0_0x4a47c0(0x2fb))}},'required':[a0_0x4a47c0(0x7fe),'number']},Ua={'$id':(0x0,E['v4'])(),'type':'object','properties':{'statusMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'type':{'type':a0_0x4a47c0(0x4c4),'enum':[a0_0x4a47c0(0x6ba),a0_0x4a47c0(0x2fb),a0_0x4a47c0(0x217),a0_0x4a47c0(0x164)]},'content':{'type':a0_0x4a47c0(0x4c4)},'caption':{'type':a0_0x4a47c0(0x4c4)},'backgroundColor':{'type':'string'},'font':{'type':a0_0x4a47c0(0x19d),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x4a47c0(0x2d2),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4a47c0(0x4c4),'pattern':'^\x5cd+','description':'\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}},'allContacts':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]}},'required':['type',a0_0x4a47c0(0x2df)],...C(a0_0x4a47c0(0x311),a0_0x4a47c0(0x2df))}},'required':[a0_0x4a47c0(0x7e7)]},ja={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'number':{...Z},'options':{...ae},'mediaMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'mediatype':{'type':a0_0x4a47c0(0x4c4),'enum':[a0_0x4a47c0(0x2fb),a0_0x4a47c0(0x3fe),a0_0x4a47c0(0x164),a0_0x4a47c0(0x217)]},'media':{'type':a0_0x4a47c0(0x4c4)},'fileName':{'type':a0_0x4a47c0(0x4c4)},'caption':{'type':a0_0x4a47c0(0x4c4)}},'required':[a0_0x4a47c0(0x400),a0_0x4a47c0(0x148)],...C(a0_0x4a47c0(0x5e6),'caption',a0_0x4a47c0(0x148))}},'required':['mediaMessage',a0_0x4a47c0(0x9a)]},Ja={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'number':{...Z},'options':{...ae},'audioMessage':{'type':'object','properties':{'audio':{'type':a0_0x4a47c0(0x4c4)}},'required':[a0_0x4a47c0(0x217)],...C(a0_0x4a47c0(0x217))}},'required':[a0_0x4a47c0(0x370),a0_0x4a47c0(0x9a)]},qa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'pollMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'name':{'type':'string'},'selectableCount':{'type':a0_0x4a47c0(0x9a)},'values':{'type':a0_0x4a47c0(0x2d2),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x4a47c0(0x25b),'selectableCount',a0_0x4a47c0(0x298)],...C('name','selectableCount',a0_0x4a47c0(0x298))}},'required':[a0_0x4a47c0(0x9a),a0_0x4a47c0(0x5f2)]},Va={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'number':{...Z},'menuMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'text':{'type':a0_0x4a47c0(0x4c4)},'choices':{'type':a0_0x4a47c0(0x2d2),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x4a47c0(0x6ba),a0_0x4a47c0(0x434)],...C(a0_0x4a47c0(0x6ba),a0_0x4a47c0(0x434))}},'required':['number',a0_0x4a47c0(0x56c)]},Ga={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'number':{...Z},'options':{...ae},'buttonMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'title':{'type':a0_0x4a47c0(0x4c4)},'description':{'type':'string'},'footerText':{'type':'string'},'buttons':{'type':a0_0x4a47c0(0x2d2),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4a47c0(0x2b9),'properties':{'buttonText':{'type':a0_0x4a47c0(0x4c4)},'buttonId':{'type':a0_0x4a47c0(0x4c4)}},'required':[a0_0x4a47c0(0x6b1),a0_0x4a47c0(0x3f7)],...C(a0_0x4a47c0(0x6b1),a0_0x4a47c0(0x3f7))}},'mediaMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'media':{'type':a0_0x4a47c0(0x4c4)},'fileName':{'type':a0_0x4a47c0(0x4c4)},'mediatype':{'type':a0_0x4a47c0(0x4c4),'enum':[a0_0x4a47c0(0x2fb),'document',a0_0x4a47c0(0x164)]}},'required':['media','mediatype'],...C(a0_0x4a47c0(0x148),'fileName')}},'required':[a0_0x4a47c0(0x754),a0_0x4a47c0(0x6fc)],...C('title',a0_0x4a47c0(0x205))}},'required':[a0_0x4a47c0(0x9a),a0_0x4a47c0(0x7b7)]},Ba={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'number':{...Z},'options':{...ae},'locationMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'latitude':{'type':a0_0x4a47c0(0x9a)},'longitude':{'type':a0_0x4a47c0(0x9a)},'name':{'type':'string'},'address':{'type':a0_0x4a47c0(0x4c4)}},'required':[a0_0x4a47c0(0x70a),a0_0x4a47c0(0x48d)],...C('name','addresss')}},'required':[a0_0x4a47c0(0x9a),'locationMessage']},Wa={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'number':{...Z},'options':{...ae},'listMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'title':{'type':a0_0x4a47c0(0x4c4)},'description':{'type':'string'},'footerText':{'type':'string'},'buttonText':{'type':a0_0x4a47c0(0x4c4)},'sections':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':'string'},'rows':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4a47c0(0x2b9),'properties':{'title':{'type':a0_0x4a47c0(0x4c4)},'description':{'type':a0_0x4a47c0(0x4c4)},'rowId':{'type':a0_0x4a47c0(0x4c4)}},'required':[a0_0x4a47c0(0x754),a0_0x4a47c0(0x39f)],...C(a0_0x4a47c0(0x754),a0_0x4a47c0(0x39f))}}},'required':[a0_0x4a47c0(0x754),a0_0x4a47c0(0x38b)],...C('title')}}},'required':[a0_0x4a47c0(0x754),'description','buttonText',a0_0x4a47c0(0x7d3)],...C(a0_0x4a47c0(0x754),a0_0x4a47c0(0x205),a0_0x4a47c0(0x6b1),'footerText')}},'required':['number',a0_0x4a47c0(0x1a4)]},za={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'number':{...Z},'options':{...ae},'contactMessage':{'type':a0_0x4a47c0(0x2d2),'items':{'type':a0_0x4a47c0(0x2b9),'properties':{'fullName':{'type':a0_0x4a47c0(0x4c4)},'phoneNumber':{'type':a0_0x4a47c0(0x4c4),'minLength':0xa}},'required':[a0_0x4a47c0(0x132),a0_0x4a47c0(0x6c6)],...C(a0_0x4a47c0(0x132))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x4a47c0(0x9a),a0_0x4a47c0(0x7da)]},Ha={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'reactionMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'key':{'type':a0_0x4a47c0(0x2b9),'properties':{'id':{'type':'string'},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]}},'required':['id',a0_0x4a47c0(0x1d0),a0_0x4a47c0(0x655)],...C('id',a0_0x4a47c0(0x1d0))},'reaction':{'type':a0_0x4a47c0(0x4c4)}},'required':[a0_0x4a47c0(0x56d),a0_0x4a47c0(0x252)],...C(a0_0x4a47c0(0x252))}},'required':[a0_0x4a47c0(0x17f)]},Ka={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'numbers':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4a47c0(0x4c4),'pattern':'^\x5cd+','description':a0_0x4a47c0(0x46e)}}}},Qa={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'readMessages':{'type':a0_0x4a47c0(0x2d2),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x4a47c0(0x4c4)},'fromMe':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'remoteJid':{'type':'string'}},'required':['id',a0_0x4a47c0(0x655),'remoteJid'],...C('id','remoteJid')}}},'required':[a0_0x4a47c0(0x276)]},Ya={'$id':(0x0,E['v4'])(),'type':'object','properties':{'privacySettings':{'type':a0_0x4a47c0(0x2b9),'properties':{'readreceipts':{'type':a0_0x4a47c0(0x4c4),'enum':[a0_0x4a47c0(0x64a),a0_0x4a47c0(0x558)]},'profile':{'type':a0_0x4a47c0(0x4c4),'enum':['all',a0_0x4a47c0(0x592),a0_0x4a47c0(0x323),'none']},'status':{'type':a0_0x4a47c0(0x4c4),'enum':[a0_0x4a47c0(0x64a),a0_0x4a47c0(0x592),a0_0x4a47c0(0x323),'none']},'online':{'type':a0_0x4a47c0(0x4c4),'enum':[a0_0x4a47c0(0x64a),'match_last_seen']},'last':{'type':'string','enum':[a0_0x4a47c0(0x64a),'contacts','contact_blacklist','none']},'groupadd':{'type':a0_0x4a47c0(0x4c4),'enum':[a0_0x4a47c0(0x64a),a0_0x4a47c0(0x592),a0_0x4a47c0(0x323),a0_0x4a47c0(0x558)]}},'required':[a0_0x4a47c0(0x1f9),a0_0x4a47c0(0x70f),'status',a0_0x4a47c0(0x4c7),a0_0x4a47c0(0x3aa),a0_0x4a47c0(0x399)],...C(a0_0x4a47c0(0x1f9),a0_0x4a47c0(0x70f),a0_0x4a47c0(0x7ae),a0_0x4a47c0(0x4c7),a0_0x4a47c0(0x3aa),'groupadd')}},'required':[a0_0x4a47c0(0x2ef)]},Xa={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'lastMessage':{'type':a0_0x4a47c0(0x2b9),'properties':{'key':{'type':a0_0x4a47c0(0x2b9),'properties':{'id':{'type':a0_0x4a47c0(0x4c4)},'remoteJid':{'type':a0_0x4a47c0(0x4c4)},'fromMe':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]}},'required':['id',a0_0x4a47c0(0x655),a0_0x4a47c0(0x1d0)],...C('id','remoteJid')},'messageTimestamp':{'type':a0_0x4a47c0(0x19d),'minLength':0x1}},'required':['key'],...C('messageTimestamp')},'archive':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]}},'required':['lastMessage',a0_0x4a47c0(0x476)]},Za={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'id':{'type':a0_0x4a47c0(0x4c4)},'fromMe':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x4a47c0(0x4c4)},'participant':{'type':a0_0x4a47c0(0x4c4)}},'required':['id',a0_0x4a47c0(0x655),a0_0x4a47c0(0x1d0)],...C('id',a0_0x4a47c0(0x1d0),a0_0x4a47c0(0x15b))},ei={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'where':{'type':a0_0x4a47c0(0x2b9),'properties':{'_id':{'type':a0_0x4a47c0(0x4c4),'minLength':0x1},'pushName':{'type':a0_0x4a47c0(0x4c4),'minLength':0x1},'id':{'type':a0_0x4a47c0(0x4c4),'minLength':0x1}},...C('_id','id',a0_0x4a47c0(0x419))}}},ti={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'name':{'type':a0_0x4a47c0(0x4c4)}},...C('name')},si={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'status':{'type':a0_0x4a47c0(0x4c4)}},...C(a0_0x4a47c0(0x7ae))},xe={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{'type':a0_0x4a47c0(0x4c4)},'picture':{'type':a0_0x4a47c0(0x4c4)}}},ai={'type':a0_0x4a47c0(0x2b9),'properties':{'wuid':{'type':a0_0x4a47c0(0x4c4)},'name':{'type':'string'},'picture':{'type':'string'},'status':{'type':a0_0x4a47c0(0x4c4)},'isBusiness':{'type':a0_0x4a47c0(0xeb)}}},ii={'$id':(0x0,E['v4'])(),'type':'object','properties':{'where':{'type':a0_0x4a47c0(0x2b9),'properties':{'_id':{'type':a0_0x4a47c0(0x4c4),'minLength':0x1},'key':{'type':a0_0x4a47c0(0x2b9),'if':{'propertyNames':{'enum':[a0_0x4a47c0(0x655),a0_0x4a47c0(0x1d0),'id']}},'then':{'properties':{'remoteJid':{'type':'string','minLength':0x1,'description':a0_0x4a47c0(0x5e5)},'id':{'type':'string','minLength':0x1,'description':'The\x20property\x20cannot\x20be\x20empty'},'fromMe':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]}}}},'message':{'type':'object'}},...C(a0_0x4a47c0(0x443))},'limit':{'type':'integer'}}},bc={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'where':{'type':a0_0x4a47c0(0x2b9),'properties':{'_id':{'type':a0_0x4a47c0(0x4c4)},'remoteJid':{'type':a0_0x4a47c0(0x4c4)},'id':{'type':'string'},'fromMe':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x4a47c0(0x4c4)},'status':{'type':a0_0x4a47c0(0x4c4),'enum':['ERROR',a0_0x4a47c0(0x46b),a0_0x4a47c0(0x504),'DELIVERY_ACK',a0_0x4a47c0(0x4ce),a0_0x4a47c0(0xd8)]}},...C(a0_0x4a47c0(0x443),'remoteJid','id','status')},'limit':{'type':a0_0x4a47c0(0x19d)}}},oi={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'number':{...Z},'presence':{'type':a0_0x4a47c0(0x4c4),'enum':['unavailable',a0_0x4a47c0(0x4a7),'composing',a0_0x4a47c0(0x3fc),'paused']}},'required':['presence','number']},ri={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'subject':{'type':a0_0x4a47c0(0x4c4)},'description':{'type':'string'},'profilePicture':{'type':a0_0x4a47c0(0x4c4)},'participants':{'type':a0_0x4a47c0(0x2d2),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':'\x5cd+','description':a0_0x4a47c0(0x364)}}},'required':['subject',a0_0x4a47c0(0x249)],...C('subject',a0_0x4a47c0(0x205),'profilePicture')},De={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'groupJid':{'type':a0_0x4a47c0(0x4c4),'pattern':a0_0x4a47c0(0x17c)}},'required':[a0_0x4a47c0(0x39e)],...C(a0_0x4a47c0(0x39e))},ni={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'groupJid':{'type':'string'},'action':{'type':'string','enum':[a0_0x4a47c0(0x4b1),a0_0x4a47c0(0x53c),a0_0x4a47c0(0x1ca),a0_0x4a47c0(0x680),a0_0x4a47c0(0x29f),a0_0x4a47c0(0x54b)]},'participants':{'type':a0_0x4a47c0(0x2d2),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':a0_0x4a47c0(0x2ff),'description':'\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}},'required':['groupJid',a0_0x4a47c0(0x6ad),a0_0x4a47c0(0x249)],...C(a0_0x4a47c0(0x39e),a0_0x4a47c0(0x6ad))},ci={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'groupJid':{'type':a0_0x4a47c0(0x4c4)},'expiration':{'type':'number','enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x4a47c0(0x39e),'expiration'],...C('groupJid','expiration')},li={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'groupJid':{'type':'string'},'image':{'type':a0_0x4a47c0(0x4c4)}},'required':['groupJid',a0_0x4a47c0(0x2fb)],...C(a0_0x4a47c0(0x39e),a0_0x4a47c0(0x2fb))},ui={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'groupJid':{'type':a0_0x4a47c0(0x4c4)},'description':{'type':a0_0x4a47c0(0x4c4)}},'required':[a0_0x4a47c0(0x39e),a0_0x4a47c0(0x205)],...C('groupJid','description')},di={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'groupJid':{'type':a0_0x4a47c0(0x4c4)},'name':{'type':a0_0x4a47c0(0x4c4)}},'required':[a0_0x4a47c0(0x39e),a0_0x4a47c0(0x25b)],...C(a0_0x4a47c0(0x39e),a0_0x4a47c0(0x25b))},pi={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'groupJid':{'type':a0_0x4a47c0(0x4c4)},'setting':{'type':a0_0x4a47c0(0x4c4),'enum':['announcement','not_announcement',a0_0x4a47c0(0x4d5),a0_0x4a47c0(0x639)]}},'required':[a0_0x4a47c0(0x39e),a0_0x4a47c0(0x23c)],...C('groupJid',a0_0x4a47c0(0x23c))},hi={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'restrict':{'type':a0_0x4a47c0(0xeb)},'announce':{'type':a0_0x4a47c0(0xeb)},'memberAddMode':{'type':'boolean'},'joinApprovalMode':{'type':a0_0x4a47c0(0xeb)},'expiration':{'type':'integer','enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x4a47c0(0x4c4)},'description':{'type':a0_0x4a47c0(0x4c4)},'image':{'type':a0_0x4a47c0(0x4c4)}}},$s={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'inviteCode':{'type':a0_0x4a47c0(0x4c4)}},'required':[a0_0x4a47c0(0x7f8)],...C(a0_0x4a47c0(0x7f8))},gi={'$id':(0x0,E['v4'])(),'type':a0_0x4a47c0(0x2b9),'properties':{'url':{'type':a0_0x4a47c0(0x4c4)},'enabled':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]}},'required':['url',a0_0x4a47c0(0x231)]},Sc={'$id':(0x0,E['v4'])(),'type':'object','properties':{'local_map':{'type':'boolean','enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':'boolean','enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x4a47c0(0xeb),'enum':[!0x0,!0x1]}},'required':[a0_0x4a47c0(0x5d1),a0_0x4a47c0(0x2d8),a0_0x4a47c0(0x7c8),a0_0x4a47c0(0x78c),a0_0x4a47c0(0x2b4),a0_0x4a47c0(0x1f7),a0_0x4a47c0(0x172),a0_0x4a47c0(0x37f),a0_0x4a47c0(0x93),a0_0x4a47c0(0x1e1),a0_0x4a47c0(0x5e8),a0_0x4a47c0(0x3f8),a0_0x4a47c0(0x6d8),a0_0x4a47c0(0x5d7),'CHATS_DELETE',a0_0x4a47c0(0x658),'GROUPS_UPSERT',a0_0x4a47c0(0x3dd),a0_0x4a47c0(0x64e)],...C(a0_0x4a47c0(0x5d1),a0_0x4a47c0(0x2d8),'QRCODE_UPDATED',a0_0x4a47c0(0x78c),'MESSAGES_UPDATE','MESSAGES_UPSERT',a0_0x4a47c0(0x172),a0_0x4a47c0(0x37f),a0_0x4a47c0(0x93),'CONTACTS_UPDATE','PRESENCE_UPDATE',a0_0x4a47c0(0x3f8),a0_0x4a47c0(0x6d8),a0_0x4a47c0(0x5d7),a0_0x4a47c0(0x1aa),a0_0x4a47c0(0x658),a0_0x4a47c0(0x3fa),a0_0x4a47c0(0x3dd),a0_0x4a47c0(0x64e))},ct=class{},lt=class extends _{['getContactModelForOwner'](_0x394bd6){return oa(_0x394bd6);}async[a0_0x4a47c0(0x69f)](_0x52def2){const _0x326fc1=a0_0x4a47c0;if(_0x52def2['length']!==0x0)try{return{'insertCount':(await this['getContactModelForOwner'](_0x52def2[0x0][_0x326fc1(0x3ab)])[_0x326fc1(0x1e0)]([..._0x52def2]))[_0x326fc1(0x415)]};}catch(_0x13b364){return _0x13b364;}}async[a0_0x4a47c0(0x2d6)](_0x36d716,_0x333f78){const _0x3a900f=a0_0x4a47c0;try{return{'deletedCount':(await this[_0x3a900f(0x6d2)](_0x333f78)[_0x3a900f(0x465)]({..._0x36d716[_0x3a900f(0x381)]}))['deletedCount']};}catch(_0x3632be){return{'error':_0x3632be?.[_0x3a900f(0x13c)]()};}}async[a0_0x4a47c0(0x7c2)](_0x2e38ca,_0x7166f2){const _0x13f259=a0_0x4a47c0;try{if(_0x2e38ca[_0x13f259(0x415)]===0x0)return;let _0x449a0a=this[_0x13f259(0x6d2)](_0x7166f2),_0x1e9dbf=_0x2e38ca['map'](_0x35ddc4=>({'updateOne':{'filter':{'_id':_0x35ddc4[_0x13f259(0x443)],'owner':_0x7166f2},'update':{..._0x35ddc4}}})),{modifiedCount:_0x20d952}=await _0x449a0a[_0x13f259(0x603)](_0x1e9dbf);return{'insertCount':_0x20d952};}catch{return;}}async['find'](_0x29f0c8,_0x5069d6){const _0xb51a81=a0_0x4a47c0;try{let _0x654290=this[_0xb51a81(0x6d2)](_0x5069d6),_0x307116=A(_0x29f0c8[_0xb51a81(0x381)]);return await _0x654290[_0xb51a81(0x2ba)](_0x307116)['limit'](_0x29f0c8?.['limit']??0x0)['lean']();}catch{return[];}}async['findOne'](_0x549f51,_0x326045){const _0x3c6c76=a0_0x4a47c0;try{let _0x3db0ce=this[_0x3c6c76(0x6d2)](_0x326045),_0x168ec9=A(_0x549f51[_0x3c6c76(0x381)]);return await _0x3db0ce[_0x3c6c76(0xb1)](_0x168ec9)['lean']();}catch{return null;}}async[a0_0x4a47c0(0x6c0)](_0x24e675){const _0x44e047=a0_0x4a47c0;try{return await this[_0x44e047(0x6d2)](_0x24e675)[_0x44e047(0x2f0)]['drop'](),{'success':!0x0};}catch(_0x5b3911){return console['error'](_0x5b3911),{'success':!0x1,'error':_0x5b3911};}}},ut=require(a0_0x4a47c0(0x238)),Ic=require('express-async-errors'),Rs=new $(a0_0x4a47c0(0xba)),G=class{[a0_0x4a47c0(0x5c3)](_0x5ea71,_0x214145=!0x0){const _0x5b02a3=a0_0x4a47c0;let _0xf3ac57='/'+_0x5ea71;return _0x214145&&(_0xf3ac57+=_0x5b02a3(0x485)),_0xf3ac57;}async[a0_0x4a47c0(0xf3)](_0x5a3ae1){const _0xf1797e=a0_0x4a47c0;let {request:_0x439927,schema:_0x342107,ClassRef:_0x285038,execute:_0x474c09}=_0x5a3ae1,_0x846ab7=new _0x285038(),_0x467e51=_0x439927[_0xf1797e(0x200)],_0x2381fe=_0x439927['params'];_0x439927?.['query']&&Object[_0xf1797e(0x77d)](_0x439927[_0xf1797e(0x176)])[_0xf1797e(0x415)]>0x0&&Object[_0xf1797e(0x337)](_0x2381fe,_0x439927['query']),_0x439927[_0xf1797e(0x3b5)][_0xf1797e(0x795)](_0xf1797e(0x460))&&Object[_0xf1797e(0x337)](_0x2381fe,_0x467e51),Object[_0xf1797e(0x337)](_0x846ab7,_0x467e51);let _0x4288dd=_0x342107?(0x0,ut[_0xf1797e(0x522)])(_0x846ab7,_0x342107):{'valid':!0x0,'errors':[]};if(!_0x4288dd['valid']){let _0x3b88b0=_0x4288dd[_0xf1797e(0x3a9)][_0xf1797e(0x4b0)](({property:_0x490074,stack:_0x1b67a8,schema:_0xbc091})=>{const _0x4e368e=_0xf1797e;let _0x348cbe;return _0xbc091[_0x4e368e(0x205)]?_0x348cbe=_0xbc091[_0x4e368e(0x205)]:_0x348cbe=_0x1b67a8[_0x4e368e(0x470)](_0x4e368e(0xbb),''),{'property':_0x490074[_0x4e368e(0x470)](_0x4e368e(0xbb),''),'message':_0x348cbe};});throw Rs[_0xf1797e(0x5f8)]([..._0x3b88b0]),new m(..._0x3b88b0);}return await _0x474c09(_0x2381fe,_0x846ab7);}async[a0_0x4a47c0(0x6a9)](_0x136140){const _0x38208c=a0_0x4a47c0;let {request:_0x4a37c6,ClassRef:_0x306585,schema:_0xd004ed,execute:_0x53e41e}=_0x136140,_0x55d22f=_0x4a37c6[_0x38208c(0x176)];if(!_0x55d22f?.['groupJid'])throw new m(_0x38208c(0x44e),_0x38208c(0x776));let _0x31c0c7=_0x4a37c6['params'],_0x559210=_0x4a37c6['body'],_0x1da60c=new _0x306585();Object[_0x38208c(0x337)](_0x559210,_0x55d22f),Object[_0x38208c(0x337)](_0x1da60c,_0x559210);let _0x9b6e51=(0x0,ut[_0x38208c(0x522)])(_0x1da60c,_0xd004ed);if(!_0x9b6e51[_0x38208c(0x495)]){let _0x3d2047=_0x9b6e51[_0x38208c(0x3a9)]['map'](({property:_0x3f65c9,stack:_0x48bc74,schema:_0x524e8f})=>{const _0x2058b0=_0x38208c;let _0x238ccf;return _0x524e8f[_0x2058b0(0x205)]?_0x238ccf=_0x524e8f[_0x2058b0(0x205)]:_0x238ccf=_0x48bc74[_0x2058b0(0x470)](_0x2058b0(0xbb),''),{'property':_0x3f65c9['replace']('instance.',''),'message':_0x238ccf};});throw Rs['error']([..._0x3d2047]),new m(..._0x3d2047);}return await _0x53e41e(_0x31c0c7,_0x1da60c);}async['joinGroupValidate'](_0x1ef61b){const _0x2dea75=a0_0x4a47c0;let {request:_0x17fcb9,ClassRef:_0x2a72e7,schema:_0xdcfae7,execute:_0x4d8497}=_0x1ef61b,_0x1ded43=_0x17fcb9[_0x2dea75(0x200)];if(!_0x1ded43?.[_0x2dea75(0x7f8)])throw new m(_0x2dea75(0x378),'ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22');let _0x43fdee=_0x17fcb9[_0x2dea75(0x699)],_0x5065db=_0x17fcb9[_0x2dea75(0x200)],_0x18a361=new _0x2a72e7();Object['assign'](_0x5065db,_0x1ded43),Object[_0x2dea75(0x337)](_0x18a361,_0x5065db);let _0x57fa24=(0x0,ut[_0x2dea75(0x522)])(_0x18a361,_0xdcfae7);if(!_0x57fa24[_0x2dea75(0x495)]){let _0x3325a9=_0x57fa24[_0x2dea75(0x3a9)]['map'](({property:_0x1d2aa5,stack:_0x145b8c,schema:_0x473b84})=>{const _0x39bad8=_0x2dea75;let _0x2993ef;return _0x473b84[_0x39bad8(0x205)]?_0x2993ef=_0x473b84[_0x39bad8(0x205)]:_0x2993ef=_0x145b8c[_0x39bad8(0x470)](_0x39bad8(0xbb),''),{'property':_0x1d2aa5['replace'](_0x39bad8(0xbb),''),'message':_0x2993ef};});throw Rs[_0x2dea75(0x5f8)]([..._0x3325a9]),new m(..._0x3325a9);}return await _0x4d8497(_0x43fdee,_0x18a361);}},M=class{},Gc=new $('ChatRouter'),dt=class extends G{constructor(..._0x5632f6){const _0x5bca96=a0_0x4a47c0;super(),this[_0x5bca96(0x47d)]=(0x0,mi[_0x5bca96(0x670)])(),this[_0x5bca96(0x47d)][_0x5bca96(0x790)](this[_0x5bca96(0x5c3)](_0x5bca96(0x6ce)),..._0x5632f6,async(_0x129837,_0x6605ce)=>{const _0x271f64=_0x5bca96;let _0x561918=await this[_0x271f64(0xf3)]({'request':_0x129837,'schema':oi,'ClassRef':Ze,'execute':(_0x21e2e7,_0x5166c2)=>k[_0x271f64(0x6ce)](_0x21e2e7,_0x5166c2)});return _0x6605ce[_0x271f64(0x7ae)](0xc9)[_0x271f64(0x115)](_0x561918);})[_0x5bca96(0x790)](this['routerPath'](_0x5bca96(0xd4)),..._0x5632f6,async(_0xf8e364,_0x1c6624)=>{const _0x1ad78f=_0x5bca96;let _0x10b77d=await this[_0x1ad78f(0xf3)]({'request':_0xf8e364,'schema':Ka,'ClassRef':et,'execute':(_0x531871,_0x37401b)=>k[_0x1ad78f(0x14c)](_0x531871,_0x37401b)});return _0x1c6624[_0x1ad78f(0x7ae)](0xc9)[_0x1ad78f(0x115)](_0x10b77d);})['post'](this['routerPath']('editChat'),..._0x5632f6,async(_0x43a5b8,_0x282bfd)=>{const _0x1feb35=_0x5bca96;let _0x4fcc2a=await this[_0x1feb35(0xf3)]({'request':_0x43a5b8,'schema':v,'ClassRef':M,'execute':(_0x81cc39,_0x1f2dd3)=>k[_0x1feb35(0x31d)](_0x81cc39,_0x1f2dd3)});return _0x282bfd[_0x1feb35(0x7ae)](0xc9)[_0x1feb35(0x115)](_0x4fcc2a);})[_0x5bca96(0x719)](this[_0x5bca96(0x5c3)](_0x5bca96(0x571)),..._0x5632f6,async(_0x24bef7,_0x1cad1b)=>{const _0x10ac87=_0x5bca96;let _0x3d2a04=await this[_0x10ac87(0xf3)]({'request':_0x24bef7,'schema':Qa,'ClassRef':at,'execute':(_0x551132,_0x21c03a)=>k['readMessage'](_0x551132,_0x21c03a)});return _0x1cad1b['status'](0xc9)[_0x10ac87(0x115)](_0x3d2a04);})['put'](this['routerPath'](_0x5bca96(0x3c5)),..._0x5632f6,async(_0x2791a5,_0x57763f)=>{const _0x29e2a0=_0x5bca96;let _0x10748c=await this[_0x29e2a0(0xf3)]({'request':_0x2791a5,'schema':Xa,'ClassRef':it,'execute':(_0x596626,_0x9049dd)=>k['archiveChat'](_0x596626,_0x9049dd)});return _0x57763f[_0x29e2a0(0x7ae)](0xc9)[_0x29e2a0(0x115)](_0x10748c);})[_0x5bca96(0x2d6)](this[_0x5bca96(0x5c3)](_0x5bca96(0x222)),..._0x5632f6,async(_0x217167,_0x571af8)=>{const _0x5025b0=_0x5bca96;let _0x4d40f3=await this[_0x5025b0(0xf3)]({'request':_0x217167,'schema':Za,'ClassRef':rt,'execute':(_0x35a344,_0x5638b3)=>k[_0x5025b0(0x5a1)](_0x35a344,_0x5638b3)});return _0x571af8['status'](0xc9)['json'](_0x4d40f3);})[_0x5bca96(0x790)](this[_0x5bca96(0x5c3)](_0x5bca96(0x7ec)),..._0x5632f6,async(_0x294946,_0x3cdf15)=>{const _0x44495a=_0x5bca96;let _0x1f845a=await this[_0x44495a(0xf3)]({'request':_0x294946,'schema':xe,'ClassRef':Oe,'execute':(_0x59d2ac,_0x191054)=>k[_0x44495a(0x250)](_0x59d2ac,_0x191054)});return _0x3cdf15[_0x44495a(0x7ae)](0xc8)[_0x44495a(0x115)](_0x1f845a);})[_0x5bca96(0x790)](this[_0x5bca96(0x5c3)](_0x5bca96(0x12c)),..._0x5632f6,async(_0x19d7ee,_0x46bdf7)=>{const _0x59a9bd=_0x5bca96;let _0x4926a2=await this[_0x59a9bd(0xf3)]({'request':_0x19d7ee,'schema':ai,'ClassRef':Oe,'execute':(_0xff966f,_0x3fb77a)=>k['fetchProfile'](_0xff966f,_0x3fb77a)});return _0x46bdf7['status'](0xc8)[_0x59a9bd(0x115)](_0x4926a2);})[_0x5bca96(0x790)](this[_0x5bca96(0x5c3)](_0x5bca96(0x10b)),..._0x5632f6,async(_0x474cef,_0x24041d)=>{const _0x5d028b=_0x5bca96;let _0x469132=await this[_0x5d028b(0xf3)]({'request':_0x474cef,'schema':ei,'ClassRef':ct,'execute':(_0xb4610a,_0x2ad054)=>k[_0x5d028b(0x548)](_0xb4610a,_0x2ad054)});return _0x24041d[_0x5d028b(0x7ae)](0xc8)[_0x5d028b(0x115)](_0x469132);})[_0x5bca96(0x790)](this['routerPath']('getBase64FromMediaMessage'),..._0x5632f6,async(_0x101f73,_0x254b44)=>{const _0x1804f7=_0x5bca96;let _0xe73215=await this[_0x1804f7(0xf3)]({'request':_0x101f73,'schema':null,'ClassRef':Object,'execute':(_0x142f02,_0x5bbdf4)=>k[_0x1804f7(0x698)](_0x142f02,_0x5bbdf4)});return _0x254b44[_0x1804f7(0x7ae)](0xc9)['json'](_0xe73215);})[_0x5bca96(0x790)](this[_0x5bca96(0x5c3)](_0x5bca96(0x7e5)),..._0x5632f6,async(_0x21b97d,_0x42a14f)=>{const _0x2f72a9=_0x5bca96;let _0x224d6f=await this['dataValidate']({'request':_0x21b97d,'schema':ii,'ClassRef':Ye,'execute':(_0x44a739,_0x213a53)=>k[_0x2f72a9(0x42f)](_0x44a739,_0x213a53)});return _0x42a14f[_0x2f72a9(0x7ae)](0xc8)[_0x2f72a9(0x115)](_0x224d6f);})[_0x5bca96(0x58b)](this['routerPath'](_0x5bca96(0x213)),..._0x5632f6,async(_0x2236e3,_0x30f6ac)=>{const _0xfca026=_0x5bca96;let _0x310057=await this[_0xfca026(0xf3)]({'request':_0x2236e3,'schema':null,'ClassRef':M,'execute':_0x39e9f4=>k['fetchChats'](_0x39e9f4)});return _0x30f6ac['status'](0xc8)['json'](_0x310057);})['get'](this[_0x5bca96(0x5c3)](_0x5bca96(0xdb)),..._0x5632f6,async(_0x2045d9,_0x4693f2)=>{const _0x55fd19=_0x5bca96;let _0x579378=await this[_0x55fd19(0xf3)]({'request':_0x2045d9,'schema':null,'ClassRef':M,'execute':_0x202ad4=>k[_0x55fd19(0x4c8)](_0x202ad4)});return _0x4693f2['status'](0xc8)[_0x55fd19(0x115)](_0x579378);})[_0x5bca96(0x719)](this[_0x5bca96(0x5c3)](_0x5bca96(0x5a5)),..._0x5632f6,async(_0x306db8,_0x210c95)=>{const _0x2c1165=_0x5bca96;let _0x5b1f55=await this[_0x2c1165(0xf3)]({'request':_0x306db8,'schema':null,'ClassRef':Array,'execute':(_0xfe73b6,_0x290171)=>k[_0x2c1165(0x5a5)](_0xfe73b6,_0x290171)});return _0x210c95[_0x2c1165(0x7ae)](0xc8)[_0x2c1165(0x115)](_0x5b1f55);})['get'](this[_0x5bca96(0x5c3)](_0x5bca96(0x74b)),..._0x5632f6,async(_0x2cfc3b,_0xf99dc6)=>{const _0x2c3bf8=_0x5bca96;let _0x197153=await this['dataValidate']({'request':_0x2cfc3b,'schema':null,'ClassRef':M,'execute':_0x19b742=>k[_0x2c3bf8(0x74b)](_0x19b742)});return _0xf99dc6[_0x2c3bf8(0x7ae)](0xc8)[_0x2c3bf8(0x115)](_0x197153);})[_0x5bca96(0x719)](this[_0x5bca96(0x5c3)](_0x5bca96(0x351)),..._0x5632f6,async(_0x2937cd,_0x4fef74)=>{const _0x15e993=_0x5bca96;let _0x6aec47=await this[_0x15e993(0xf3)]({'request':_0x2937cd,'schema':Ya,'ClassRef':ot,'execute':(_0x2d0955,_0x14a18b)=>k[_0x15e993(0x351)](_0x2d0955,_0x14a18b)});return _0x4fef74['status'](0xc9)[_0x15e993(0x115)](_0x6aec47);})['post'](this[_0x5bca96(0x5c3)]('fetchBusinessProfile'),..._0x5632f6,async(_0x4e4070,_0x2afe1c)=>{const _0x5d3b04=_0x5bca96;let _0x34f617=await this[_0x5d3b04(0xf3)]({'request':_0x4e4070,'schema':xe,'ClassRef':ve,'execute':(_0xad174e,_0x27f533)=>k[_0x5d3b04(0x4f1)](_0xad174e,_0x27f533)});return _0x2afe1c[_0x5d3b04(0x7ae)](0xc8)[_0x5d3b04(0x115)](_0x34f617);})[_0x5bca96(0x790)](this[_0x5bca96(0x5c3)]('updateProfileName'),..._0x5632f6,async(_0x39fa6f,_0xfe1f49)=>{const _0x5d9669=_0x5bca96;let _0x1bdd65=await this[_0x5d9669(0xf3)]({'request':_0x39fa6f,'schema':ti,'ClassRef':tt,'execute':(_0xad58f4,_0x12cb07)=>k[_0x5d9669(0x71c)](_0xad58f4,_0x12cb07)});return _0xfe1f49[_0x5d9669(0x7ae)](0xc8)['json'](_0x1bdd65);})[_0x5bca96(0x790)](this['routerPath'](_0x5bca96(0x742)),..._0x5632f6,async(_0x1ff780,_0x34b901)=>{const _0x395a3f=_0x5bca96;let _0x137c4e=await this[_0x395a3f(0xf3)]({'request':_0x1ff780,'schema':si,'ClassRef':st,'execute':(_0xda3dab,_0x54ec61)=>k[_0x395a3f(0x742)](_0xda3dab,_0x54ec61)});return _0x34b901[_0x395a3f(0x7ae)](0xc8)[_0x395a3f(0x115)](_0x137c4e);})['put'](this[_0x5bca96(0x5c3)]('updateProfilePicture'),..._0x5632f6,async(_0x3d74c3,_0x1bb9c8)=>{const _0x5ec4b5=_0x5bca96;let _0x35243e=await this['dataValidate']({'request':_0x3d74c3,'schema':xe,'ClassRef':ve,'execute':(_0xa245df,_0x55a0eb)=>k[_0x5ec4b5(0x44a)](_0xa245df,_0x55a0eb)});return _0x1bb9c8['status'](0xc8)[_0x5ec4b5(0x115)](_0x35243e);})['delete'](this[_0x5bca96(0x5c3)](_0x5bca96(0x6bf)),..._0x5632f6,async(_0x204dd9,_0x571555)=>{const _0xf56027=_0x5bca96;let _0x31290b=await this['dataValidate']({'request':_0x204dd9,'schema':xe,'ClassRef':ve,'execute':(_0x1d75d8,_0x1c4a13)=>k['removeProfilePicture'](_0x1d75d8,_0x1c4a13)});return _0x571555[_0xf56027(0x7ae)](0xc8)[_0xf56027(0x115)](_0x31290b);});}},fi=require(a0_0x4a47c0(0x406)),pt=class{},ht=class{},gt=class{},mt=class{},ft=class{},wt=class{},ie=class{},Pe=class{},yt=class extends ie{},bt=class extends ie{},St=class extends G{constructor(..._0x4a6798){const _0x4741d8=a0_0x4a47c0;super(),this[_0x4741d8(0x47d)]=(0x0,fi[_0x4741d8(0x670)])(),this[_0x4741d8(0x47d)][_0x4741d8(0x790)](this[_0x4741d8(0x5c3)]('create'),..._0x4a6798,async(_0x3b3b95,_0x2e8d06)=>{const _0x8eb972=_0x4741d8;let _0x74817c=await this[_0x8eb972(0xf3)]({'request':_0x3b3b95,'schema':ri,'ClassRef':pt,'execute':(_0xed7ba8,_0x2bb7f5)=>V['createGroup'](_0xed7ba8,_0x2bb7f5)});_0x2e8d06[_0x8eb972(0x7ae)](0xc9)[_0x8eb972(0x115)](_0x74817c);})['put'](this[_0x4741d8(0x5c3)](_0x4741d8(0x62f)),..._0x4a6798,async(_0x4dd16c,_0x397ffd)=>{const _0x1a5467=_0x4741d8;let _0x5073ad=await this[_0x1a5467(0x6a9)]({'request':_0x4dd16c,'schema':li,'ClassRef':ht,'execute':(_0x59b449,_0x4d363a)=>V[_0x1a5467(0x62f)](_0x59b449,_0x4d363a)});_0x397ffd[_0x1a5467(0x7ae)](0xc9)['json'](_0x5073ad);})[_0x4741d8(0x719)](this['routerPath'](_0x4741d8(0x713)),..._0x4a6798,async(_0x42445e,_0x3f9bb5)=>{const _0x240ba1=_0x4741d8;let _0x452552=await this[_0x240ba1(0x6a9)]({'request':_0x42445e,'schema':ui,'ClassRef':gt,'execute':(_0x560da1,_0x45389b)=>V['groupDesc'](_0x560da1,_0x45389b)});_0x3f9bb5[_0x240ba1(0x7ae)](0xc9)[_0x240ba1(0x115)](_0x452552);})[_0x4741d8(0x719)](this[_0x4741d8(0x5c3)](_0x4741d8(0x4bb)),..._0x4a6798,async(_0x5c45ef,_0x5d9a7a)=>{const _0x53e24e=_0x4741d8;let _0x429451=await this[_0x53e24e(0x6a9)]({'request':_0x5c45ef,'schema':di,'ClassRef':mt,'execute':(_0x344c98,_0x265841)=>V['groupName'](_0x344c98,_0x265841)});_0x5d9a7a[_0x53e24e(0x7ae)](0xc9)[_0x53e24e(0x115)](_0x429451);})[_0x4741d8(0x719)](this[_0x4741d8(0x5c3)](_0x4741d8(0x57a)),..._0x4a6798,async(_0x42e030,_0x4cf7d0)=>{const _0x53ee1d=_0x4741d8;let _0x2e6638=await this[_0x53ee1d(0x6a9)]({'request':_0x42e030,'schema':hi,'ClassRef':wt,'execute':(_0x48c760,_0x374739)=>V[_0x53ee1d(0x57a)](_0x48c760,_0x374739)});_0x4cf7d0[_0x53ee1d(0x7ae)](0xc9)['json'](_0x2e6638);})[_0x4741d8(0x719)](this[_0x4741d8(0x5c3)](_0x4741d8(0x6dc)),..._0x4a6798,async(_0x5cfd11,_0x338fac)=>{const _0x453cc7=_0x4741d8;let _0x353a03=await this[_0x453cc7(0x6a9)]({'request':_0x5cfd11,'schema':pi,'ClassRef':ft,'execute':(_0x58f816,_0x3e81e5)=>V[_0x453cc7(0x6dc)](_0x58f816,_0x3e81e5)});_0x338fac['status'](0xc9)[_0x453cc7(0x115)](_0x353a03);})[_0x4741d8(0x719)](this[_0x4741d8(0x5c3)](_0x4741d8(0x478)),..._0x4a6798,async(_0x2127ec,_0x4d975a)=>{const _0x23f18d=_0x4741d8;let _0xa29e20=await this['groupValidate']({'request':_0x2127ec,'schema':ci,'ClassRef':bt,'execute':(_0x7a20b4,_0x3d1f5b)=>V[_0x23f18d(0x478)](_0x7a20b4,_0x3d1f5b)});_0x4d975a[_0x23f18d(0x7ae)](0xc9)['json'](_0xa29e20);})['get'](this['routerPath'](_0x4741d8(0x622)),..._0x4a6798,async(_0xf032e2,_0x38bab4)=>{const _0x30edfe=_0x4741d8;let _0x4d7297=await this[_0x30edfe(0x6a9)]({'request':_0xf032e2,'schema':De,'ClassRef':ie,'execute':(_0x2fd071,_0x1d6d4a)=>V[_0x30edfe(0x672)](_0x2fd071,_0x1d6d4a)});_0x38bab4[_0x30edfe(0x7ae)](0xc8)[_0x30edfe(0x115)](_0x4d7297);})[_0x4741d8(0x58b)](this[_0x4741d8(0x5c3)](_0x4741d8(0x333)),..._0x4a6798,async(_0x4828ab,_0xeb3651)=>{const _0x548a15=_0x4741d8;let _0x2b2260=await this['dataValidate']({'request':_0x4828ab,'schema':v,'ClassRef':M,'execute':_0x2c6186=>V[_0x548a15(0x333)](_0x2c6186)});_0xeb3651[_0x548a15(0x7ae)](0xc8)[_0x548a15(0x115)](_0x2b2260);})[_0x4741d8(0x58b)](this['routerPath']('participants'),..._0x4a6798,async(_0x5a1942,_0xaa6312)=>{const _0xf9a9d4=_0x4741d8;let _0x44d418=await this[_0xf9a9d4(0x6a9)]({'request':_0x5a1942,'schema':De,'ClassRef':ie,'execute':(_0x13f598,_0x508096)=>V[_0xf9a9d4(0x541)](_0x13f598,_0x508096)});_0xaa6312[_0xf9a9d4(0x7ae)](0xc8)['json'](_0x44d418);})[_0x4741d8(0x58b)](this[_0x4741d8(0x5c3)]('inviteCode'),..._0x4a6798,async(_0x25155c,_0x56b786)=>{const _0x366245=_0x4741d8;let _0x3f9a32=await this[_0x366245(0x6a9)]({'request':_0x25155c,'schema':De,'ClassRef':ie,'execute':(_0x15f362,_0x47b4d6)=>V[_0x366245(0x7f8)](_0x15f362,_0x47b4d6)});_0x56b786['status'](0xc8)[_0x366245(0x115)](_0x3f9a32);})['post'](this['routerPath'](_0x4741d8(0x5ef)),..._0x4a6798,async(_0x504f8f,_0x59bda5)=>{const _0x1edc50=_0x4741d8;let _0x899f9f=await this[_0x1edc50(0x1a5)]({'request':_0x504f8f,'schema':$s,'ClassRef':Pe,'execute':(_0xa2e056,_0x107f7c)=>V['groupGetInviteInfo'](_0xa2e056,_0x107f7c)});_0x59bda5[_0x1edc50(0x7ae)](0xc9)['json'](_0x899f9f);})['put'](this[_0x4741d8(0x5c3)](_0x4741d8(0x44f)),..._0x4a6798,async(_0x126c89,_0x59b1df)=>{const _0x52eb88=_0x4741d8;let _0x52ddf4=await this['joinGroupValidate']({'request':_0x126c89,'schema':$s,'ClassRef':Pe,'execute':(_0x2e13e4,_0x2ab3f9)=>V[_0x52eb88(0x44f)](_0x2e13e4,_0x2ab3f9)});_0x59b1df[_0x52eb88(0x7ae)](0xc9)[_0x52eb88(0x115)](_0x52ddf4);})[_0x4741d8(0x719)](this[_0x4741d8(0x5c3)](_0x4741d8(0x533)),..._0x4a6798,async(_0x3167d5,_0x4f9339)=>{const _0x37a193=_0x4741d8;let _0x164c62=await this[_0x37a193(0x6a9)]({'request':_0x3167d5,'schema':De,'ClassRef':ie,'execute':(_0x419b30,_0x14bd0c)=>V[_0x37a193(0x533)](_0x419b30,_0x14bd0c)});_0x4f9339[_0x37a193(0x7ae)](0xc9)[_0x37a193(0x115)](_0x164c62);})[_0x4741d8(0x719)](this['routerPath'](_0x4741d8(0x1bb)),..._0x4a6798,async(_0x366af5,_0x1a2f75)=>{const _0x164913=_0x4741d8;let _0x24a09b=await this[_0x164913(0x6a9)]({'request':_0x366af5,'schema':ni,'ClassRef':yt,'execute':(_0x43510b,_0x1240eb)=>V[_0x164913(0x63d)](_0x43510b,_0x1240eb)});_0x1a2f75[_0x164913(0x7ae)](0xc9)['json'](_0x24a09b);})['delete'](this['routerPath'](_0x4741d8(0x36f)),..._0x4a6798,async(_0x599bc2,_0x1bfd43)=>{const _0x52bc6e=_0x4741d8;let _0x2ba694=await this[_0x52bc6e(0x6a9)]({'request':_0x599bc2,'schema':{},'ClassRef':ie,'execute':(_0xd174b6,_0x163e71)=>V[_0x52bc6e(0x36f)](_0xd174b6,_0x163e71)});_0x1bfd43['status'](0xc8)[_0x52bc6e(0x115)](_0x2ba694);});}},wi=require('express'),Mt=class extends G{constructor(_0x3b20fe,..._0x1dd453){const _0x1693bb=a0_0x4a47c0;super(),this[_0x1693bb(0x45a)]=_0x3b20fe,this[_0x1693bb(0x47d)]=(0x0,wi[_0x1693bb(0x670)])();let _0x38ea21=_0x3b20fe['get'](_0x1693bb(0x5f9));this[_0x1693bb(0x47d)][_0x1693bb(0x790)](_0x1693bb(0x696),..._0x1dd453,async(_0x131fff,_0x5f63ad)=>{const _0x549463=_0x1693bb;let {instanceName:_0x296ed5,apikey:_0x5e79bf,number:_0x5966ad}=_0x131fff['body'],_0x1d3dea=await he[_0x549463(0x186)]({'instanceName':_0x296ed5,'apikey':_0x5e79bf,'number':_0x5966ad});return _0x5f63ad[_0x549463(0x7ae)](0xc9)[_0x549463(0x115)](_0x1d3dea);})[_0x1693bb(0x719)](this[_0x1693bb(0x5c3)](_0x1693bb(0x11b)),..._0x1dd453,async(_0xebe0c5,_0x1e2211)=>{const _0x43f6c5=_0x1693bb;let _0x4c8222=await this[_0x43f6c5(0xf3)]({'request':_0xebe0c5,'schema':v,'ClassRef':M,'execute':_0x3de8f5=>he['restartInstance'](_0x3de8f5)});return _0x1e2211[_0x43f6c5(0x7ae)](0xc8)[_0x43f6c5(0x115)](_0x4c8222);})[_0x1693bb(0x58b)](this['routerPath'](_0x1693bb(0x608)),..._0x1dd453,async(_0x41f816,_0x235a9f)=>{const _0x4aad72=_0x1693bb;let _0x5d9e39=await this[_0x4aad72(0xf3)]({'request':_0x41f816,'schema':v,'ClassRef':M,'execute':_0x284c90=>he[_0x4aad72(0x15e)](_0x284c90)});return _0x235a9f[_0x4aad72(0x7ae)](0xc8)['json'](_0x5d9e39);})['get'](this[_0x1693bb(0x5c3)](_0x1693bb(0x72c)),..._0x1dd453,async(_0x43a30a,_0x2a4dc4)=>{const _0x3604de=_0x1693bb;let _0x5a9176=await this[_0x3604de(0xf3)]({'request':_0x43a30a,'schema':v,'ClassRef':M,'execute':_0x53ffdc=>he[_0x3604de(0x72c)](_0x53ffdc)});return _0x2a4dc4[_0x3604de(0x7ae)](0xc8)[_0x3604de(0x115)](_0x5a9176);})[_0x1693bb(0x58b)](this['routerPath'](_0x1693bb(0x75e),!0x1),..._0x1dd453,async(_0x34707e,_0x3d27e7)=>{const _0x1712a3=_0x1693bb;let _0x1a75af=await this[_0x1712a3(0xf3)]({'request':_0x34707e,'schema':null,'ClassRef':M,'execute':_0x4e82e3=>he[_0x1712a3(0x75e)](_0x4e82e3)});return _0x3d27e7[_0x1712a3(0x7ae)](0xc8)[_0x1712a3(0x115)](_0x1a75af);})[_0x1693bb(0x2d6)](this['routerPath'](_0x1693bb(0x4ff)),..._0x1dd453,async(_0x123721,_0x5c76df)=>{const _0x492f40=_0x1693bb;let _0x36c128=await this[_0x492f40(0xf3)]({'request':_0x123721,'schema':v,'ClassRef':M,'execute':_0x2bfab5=>he['logout'](_0x2bfab5)});return _0x5c76df[_0x492f40(0x7ae)](0xc8)['json'](_0x36c128);})['delete'](this[_0x1693bb(0x5c3)]('delete'),..._0x1dd453,async(_0xa86bb8,_0x41a68b)=>{const _0x506869=_0x1693bb;let _0x1ff74d=await this['dataValidate']({'request':_0xa86bb8,'schema':v,'ClassRef':M,'execute':_0x530181=>he[_0x506869(0x295)](_0x530181)});return _0x41a68b['status'](0xc8)['json'](_0x1ff74d);});}},yi=require(a0_0x4a47c0(0x406)),As=class{},Y=class extends As{},Ct=class extends Y{},Et=class extends Y{},vt=class extends Y{},Nt=class extends Y{},ke=class extends Y{},$t=class extends Y{},Rt=class extends Y{},At=class extends Y{},It=class extends Y{},Tt=class extends Y{},Ot=class{},_t=class extends G{constructor(..._0x38cac2){const _0x4fd94d=a0_0x4a47c0;super(),this[_0x4fd94d(0x47d)]=(0x0,yi[_0x4fd94d(0x670)])(),this[_0x4fd94d(0x47d)][_0x4fd94d(0x790)](this['routerPath'](_0x4fd94d(0x7f9)),..._0x38cac2,async(_0x4928c1,_0x2ec6df)=>{const _0x51eab3=_0x4fd94d;let _0x1e9730=await this[_0x51eab3(0xf3)]({'request':_0x4928c1,'schema':ka,'ClassRef':Ct,'execute':(_0x9a7b30,_0x38646d)=>H[_0x51eab3(0x7f9)](_0x9a7b30,_0x38646d)});return _0x2ec6df['status'](0xc9)[_0x51eab3(0x115)](_0x1e9730);})[_0x4fd94d(0x790)](this[_0x4fd94d(0x5c3)]('sendMedia'),..._0x38cac2,async(_0x46c3a3,_0x58f99c)=>{const _0x1ffc8e=_0x4fd94d;let _0x41be99=await this[_0x1ffc8e(0xf3)]({'request':_0x46c3a3,'schema':ja,'ClassRef':ke,'execute':(_0x5b45c1,_0x104042)=>H[_0x1ffc8e(0x73c)](_0x5b45c1,_0x104042)});return _0x58f99c[_0x1ffc8e(0x7ae)](0xc9)[_0x1ffc8e(0x115)](_0x41be99);})[_0x4fd94d(0x790)](this[_0x4fd94d(0x5c3)](_0x4fd94d(0x347)),..._0x38cac2,async(_0x15ae1c,_0x465ab5)=>{const _0x3094dd=_0x4fd94d;let _0x1a330d=await this[_0x3094dd(0xf3)]({'request':_0x15ae1c,'schema':Va,'ClassRef':Nt,'execute':(_0x4eae2d,_0x5b8cb4)=>H[_0x3094dd(0x347)](_0x4eae2d,_0x5b8cb4)});return _0x465ab5[_0x3094dd(0x7ae)](0xc9)[_0x3094dd(0x115)](_0x1a330d);})[_0x4fd94d(0x790)](this[_0x4fd94d(0x5c3)](_0x4fd94d(0x482)),..._0x38cac2,async(_0x282e18,_0x5979d0)=>{const _0x366821=_0x4fd94d;let _0x1b1323=await this['dataValidate']({'request':_0x282e18,'schema':Ja,'ClassRef':ke,'execute':(_0x4494f3,_0x40a78d)=>H[_0x366821(0x482)](_0x4494f3,_0x40a78d)});return _0x5979d0['status'](0xc9)[_0x366821(0x115)](_0x1b1323);})[_0x4fd94d(0x790)](this[_0x4fd94d(0x5c3)](_0x4fd94d(0x120)),..._0x38cac2,async(_0x541d0d,_0x2c6be8)=>{const _0x53f36a=_0x4fd94d;let _0x2c4e82=await this[_0x53f36a(0xf3)]({'request':_0x541d0d,'schema':Ga,'ClassRef':Rt,'execute':(_0x2b8d6f,_0x3fd2c2)=>H[_0x53f36a(0x120)](_0x2b8d6f,_0x3fd2c2)});return _0x2c6be8['status'](0xc9)['json'](_0x2c4e82);})[_0x4fd94d(0x790)](this[_0x4fd94d(0x5c3)]('sendLocation'),..._0x38cac2,async(_0x57dcf5,_0x42edd0)=>{const _0x324d62=_0x4fd94d;let _0xa1a60e=await this[_0x324d62(0xf3)]({'request':_0x57dcf5,'schema':Ba,'ClassRef':At,'execute':(_0x57fe9f,_0x50e397)=>H[_0x324d62(0x2d3)](_0x57fe9f,_0x50e397)});return _0x42edd0[_0x324d62(0x7ae)](0xc9)[_0x324d62(0x115)](_0xa1a60e);})['post'](this[_0x4fd94d(0x5c3)](_0x4fd94d(0x259)),..._0x38cac2,async(_0x45c2d5,_0xc8bda2)=>{const _0x306e7f=_0x4fd94d;let _0x521a5c=await this[_0x306e7f(0xf3)]({'request':_0x45c2d5,'schema':Wa,'ClassRef':It,'execute':(_0x388796,_0x5b74f5)=>H[_0x306e7f(0x259)](_0x388796,_0x5b74f5)});return _0xc8bda2[_0x306e7f(0x7ae)](0xc9)[_0x306e7f(0x115)](_0x521a5c);})[_0x4fd94d(0x790)](this[_0x4fd94d(0x5c3)](_0x4fd94d(0x761)),..._0x38cac2,async(_0x496401,_0x52dee4)=>{const _0x5bd991=_0x4fd94d;let _0x162b4a=await this[_0x5bd991(0xf3)]({'request':_0x496401,'schema':za,'ClassRef':Tt,'execute':(_0x3ce8bb,_0x59b113)=>H['sendContact'](_0x3ce8bb,_0x59b113)});return _0x52dee4[_0x5bd991(0x7ae)](0xc9)[_0x5bd991(0x115)](_0x162b4a);})[_0x4fd94d(0x790)](this[_0x4fd94d(0x5c3)](_0x4fd94d(0x121)),..._0x38cac2,async(_0x1a3b28,_0x2ecc39)=>{const _0x71b7da=_0x4fd94d;let _0x47cff2=await this[_0x71b7da(0xf3)]({'request':_0x1a3b28,'schema':Ha,'ClassRef':Ot,'execute':(_0x5e01c9,_0x4a7094)=>H['sendReaction'](_0x5e01c9,_0x4a7094)});return _0x2ecc39[_0x71b7da(0x7ae)](0xc9)[_0x71b7da(0x115)](_0x47cff2);})[_0x4fd94d(0x790)](this[_0x4fd94d(0x5c3)](_0x4fd94d(0x1d4)),..._0x38cac2,async(_0x2a3ade,_0x3ac0cc)=>{const _0x41722b=_0x4fd94d;let _0x6841b7=await this[_0x41722b(0xf3)]({'request':_0x2a3ade,'schema':qa,'ClassRef':vt,'execute':(_0x56a9be,_0x5a8b44)=>H[_0x41722b(0x1d4)](_0x56a9be,_0x5a8b44)});return _0x3ac0cc[_0x41722b(0x7ae)](0xc9)[_0x41722b(0x115)](_0x6841b7);})[_0x4fd94d(0x790)](this[_0x4fd94d(0x5c3)](_0x4fd94d(0x1a7)),..._0x38cac2,async(_0x8159fb,_0xe876f0)=>{const _0x63e1f=_0x4fd94d;let _0x254256=await this['dataValidate']({'request':_0x8159fb,'schema':Ua,'ClassRef':Et,'execute':(_0x1ef7c6,_0x153313)=>H[_0x63e1f(0x1a7)](_0x1ef7c6,_0x153313)});return _0xe876f0[_0x63e1f(0x7ae)](0xc9)[_0x63e1f(0x115)](_0x254256);})[_0x4fd94d(0x790)](this[_0x4fd94d(0x5c3)](_0x4fd94d(0x48b)),..._0x38cac2,async(_0x3846df,_0x5ebf54)=>{const _0x459696=_0x4fd94d;let _0x51ba31=await this[_0x459696(0xf3)]({'request':_0x3846df,'schema':Fa,'ClassRef':$t,'execute':(_0x3067b4,_0x390c54)=>H['sendSticker'](_0x3067b4,_0x390c54)});return _0x5ebf54[_0x459696(0x7ae)](0xc9)[_0x459696(0x115)](_0x51ba31);});}},bi=require('express'),xt=class{},Dt=class extends G{constructor(..._0x2e48f9){const _0x37d8de=a0_0x4a47c0;super(),this['router']=(0x0,bi[_0x37d8de(0x670)])(),this[_0x37d8de(0x47d)]['post'](this['routerPath']('set'),..._0x2e48f9,async(_0x56e949,_0x5f3f4e)=>{const _0x4128b9=_0x37d8de;let _0x54ec5f=await this[_0x4128b9(0xf3)]({'request':_0x56e949,'schema':gi,'ClassRef':xt,'execute':(_0x39fc3b,_0x5d86bd)=>Is[_0x4128b9(0x762)](_0x39fc3b,_0x5d86bd)});_0x5f3f4e['status'](0xc9)[_0x4128b9(0x115)](_0x54ec5f);})['get'](this['routerPath'](_0x37d8de(0x2ba)),..._0x2e48f9,async(_0x20a673,_0xa1bb34)=>{const _0x4fb326=_0x37d8de;let _0x20f7b9=await this[_0x4fb326(0xf3)]({'request':_0x20a673,'schema':v,'ClassRef':M,'execute':_0x4898c4=>Is['findWebhook'](_0x4898c4)});_0xa1bb34['status'](0xc8)['json'](_0x20f7b9);});}},Si=require(a0_0x4a47c0(0x406)),y=new $(a0_0x4a47c0(0x62d)),Pt=class extends G{constructor(..._0x499edc){const _0x160633=a0_0x4a47c0;super(),this[_0x160633(0x47d)]=(0x0,Si[_0x160633(0x670)])(),this[_0x160633(0x47d)]['post'](this['routerPath'](_0x160633(0x654)),..._0x499edc,async(_0x1aafda,_0x4e67d2)=>{const _0x18c911=_0x160633;let _0x1ca5e8=_0x1aafda[_0x18c911(0x200)];y[_0x18c911(0x7bf)](_0x18c911(0x6d3)),y[_0x18c911(0x7bf)]('request\x20body:\x20'),y[_0x18c911(0x7bf)](_0x1aafda[_0x18c911(0x200)]);let _0x111a30=await this[_0x18c911(0xf3)]({'request':_0x1aafda,'schema':v,'ClassRef':M,'execute':_0x58cf42=>T[_0x18c911(0x2dc)](_0x58cf42,_0x1ca5e8)});_0x4e67d2[_0x18c911(0x7ae)](0xc8)[_0x18c911(0x115)](_0x111a30);})['get'](this[_0x160633(0x5c3)](_0x160633(0x654)),..._0x499edc,async(_0x47e912,_0x23e708)=>{const _0x96dd70=_0x160633;let _0x4297bc=await this['dataValidate']({'request':_0x47e912,'schema':v,'ClassRef':M,'execute':_0x56ee0d=>T['getScheduleMessage'](_0x56ee0d)});_0x23e708[_0x96dd70(0x7ae)](0xc8)[_0x96dd70(0x115)](_0x4297bc);})[_0x160633(0x2d6)](this['routerPath'](_0x160633(0x643)),..._0x499edc,async(_0x4e9a2e,_0x279bbe)=>{const _0x566b5b=_0x160633;y['verbose'](_0x566b5b(0x50a));let _0x308445=await this['dataValidate']({'request':_0x4e9a2e,'schema':v,'ClassRef':M,'execute':_0x13e75b=>T['deleteDoneMessages'](_0x13e75b)});_0x279bbe[_0x566b5b(0x7ae)](0xc8)[_0x566b5b(0x115)](_0x308445);})['post'](this[_0x160633(0x5c3)]('startFlow'),..._0x499edc,async(_0x41df37,_0xdaf18b)=>{const _0x7e9545=_0x160633;let _0x454da3=_0x41df37[_0x7e9545(0x200)];y[_0x7e9545(0x7bf)](_0x7e9545(0x37b)),y['verbose']('request\x20body:\x20'),y[_0x7e9545(0x7bf)](_0x41df37[_0x7e9545(0x200)]);let _0x166282=await this['dataValidate']({'request':_0x41df37,'schema':v,'ClassRef':M,'execute':_0x4876a4=>T[_0x7e9545(0x1ec)](_0x4876a4,_0x454da3)});_0xdaf18b[_0x7e9545(0x7ae)](0xc8)[_0x7e9545(0x115)](_0x166282);})[_0x160633(0x58b)](this['routerPath']('getAutomateSystem'),..._0x499edc,async(_0xa5429d,_0xd5426c)=>{const _0x2158a6=_0x160633;y[_0x2158a6(0x7bf)](_0x2158a6(0x435));let _0x1f6357=await this[_0x2158a6(0xf3)]({'request':_0xa5429d,'schema':v,'ClassRef':M,'execute':_0x2cb542=>T[_0x2158a6(0x739)](_0x2cb542)});_0xd5426c[_0x2158a6(0x7ae)](0xc8)[_0x2158a6(0x115)](_0x1f6357);})[_0x160633(0x58b)](this[_0x160633(0x5c3)](_0x160633(0x514)),..._0x499edc,async(_0x20483c,_0x31c271)=>{const _0x5b3f0c=_0x160633;y[_0x5b3f0c(0x7bf)](_0x5b3f0c(0x256));let _0x42688f=await this['dataValidate']({'request':_0x20483c,'schema':v,'ClassRef':M,'execute':_0x4bed11=>T[_0x5b3f0c(0x739)](_0x4bed11)});_0x31c271[_0x5b3f0c(0x7ae)](0xc8)[_0x5b3f0c(0x115)](_0x42688f);})[_0x160633(0x790)](this[_0x160633(0x5c3)](_0x160633(0x9b)),..._0x499edc,async(_0x4ba440,_0x199426)=>{const _0x5ab166=_0x160633;let _0x3d2653=_0x4ba440['body'];y[_0x5ab166(0x7bf)](_0x5ab166(0x31a)),y[_0x5ab166(0x7bf)]('request\x20body:\x20'),y[_0x5ab166(0x7bf)](_0x4ba440[_0x5ab166(0x200)]);let _0x3a92af=await this[_0x5ab166(0xf3)]({'request':_0x4ba440,'schema':v,'ClassRef':M,'execute':_0x5acdf5=>T['updateAgent'](_0x5acdf5,_0x3d2653)});_0x199426['status'](0xc8)[_0x5ab166(0x115)](_0x3a92af);})[_0x160633(0x790)](this[_0x160633(0x5c3)](_0x160633(0x640)),..._0x499edc,async(_0x22962a,_0x111d77)=>{const _0x44f921=_0x160633;let _0x495fde=_0x22962a[_0x44f921(0x200)];y[_0x44f921(0x7bf)](_0x44f921(0x3b4)),y[_0x44f921(0x7bf)](_0x44f921(0x97)),y[_0x44f921(0x7bf)](_0x22962a[_0x44f921(0x200)]);let _0x1f1b3d=await this[_0x44f921(0xf3)]({'request':_0x22962a,'schema':v,'ClassRef':M,'execute':_0x355007=>T[_0x44f921(0x640)](_0x355007,_0x495fde)});_0x111d77[_0x44f921(0x7ae)](0xc8)[_0x44f921(0x115)](_0x1f1b3d);})['post'](this[_0x160633(0x5c3)](_0x160633(0x652)),..._0x499edc,async(_0x4bcc38,_0x390fd7)=>{const _0x218570=_0x160633;let _0x2ba7eb=_0x4bcc38[_0x218570(0x200)];y[_0x218570(0x7bf)](_0x218570(0x751)),y[_0x218570(0x7bf)](_0x218570(0x97)),y[_0x218570(0x7bf)](_0x4bcc38['body']);let _0x12d7e1=await this['dataValidate']({'request':_0x4bcc38,'schema':v,'ClassRef':M,'execute':_0x341536=>T[_0x218570(0x652)](_0x341536,_0x2ba7eb)});_0x390fd7[_0x218570(0x7ae)](0xc8)[_0x218570(0x115)](_0x12d7e1);})[_0x160633(0x790)](this[_0x160633(0x5c3)]('updateFlowConfig'),..._0x499edc,async(_0x36a582,_0x3c3183)=>{const _0x310623=_0x160633;let _0x79c6c5=_0x36a582[_0x310623(0x200)];y[_0x310623(0x7bf)](_0x310623(0x2e4)),y[_0x310623(0x7bf)](_0x310623(0x97)),y['verbose'](_0x36a582[_0x310623(0x200)]);let _0x142a06=await this['dataValidate']({'request':_0x36a582,'schema':v,'ClassRef':M,'execute':_0x459cbb=>T[_0x310623(0x1cf)](_0x459cbb,_0x79c6c5)});_0x3c3183[_0x310623(0x7ae)](0xc8)[_0x310623(0x115)](_0x142a06);})[_0x160633(0x790)](this[_0x160633(0x5c3)]('getConversation'),..._0x499edc,async(_0x3d19f2,_0x4a61ed)=>{const _0x55eeb7=_0x160633;let _0x41ad5b=_0x3d19f2[_0x55eeb7(0x200)];y[_0x55eeb7(0x7bf)](_0x55eeb7(0x359)),y['verbose']('request\x20body:\x20'),y['verbose'](_0x3d19f2[_0x55eeb7(0x200)]);let _0x2dd701=await this[_0x55eeb7(0xf3)]({'request':_0x3d19f2,'schema':v,'ClassRef':M,'execute':_0x2f8a27=>T[_0x55eeb7(0x289)](_0x2f8a27,_0x41ad5b)});_0x4a61ed[_0x55eeb7(0x7ae)](0xc8)[_0x55eeb7(0x115)](_0x2dd701);})[_0x160633(0x790)](this[_0x160633(0x5c3)](_0x160633(0x7dd)),..._0x499edc,async(_0x5070d5,_0xb79d93)=>{const _0x6466a1=_0x160633;let _0x52a695=_0x5070d5[_0x6466a1(0x200)];y[_0x6466a1(0x7bf)](_0x6466a1(0x78b)),y[_0x6466a1(0x7bf)]('request\x20body:\x20'),y[_0x6466a1(0x7bf)](_0x5070d5[_0x6466a1(0x200)]);let _0x54a6a2=await this['dataValidate']({'request':_0x5070d5,'schema':v,'ClassRef':M,'execute':_0x3c68c6=>T[_0x6466a1(0x7dd)](_0x3c68c6,_0x52a695)});_0xb79d93[_0x6466a1(0x7ae)](0xc8)[_0x6466a1(0x115)](_0x54a6a2);})['post'](this[_0x160633(0x5c3)](_0x160633(0x550)),..._0x499edc,async(_0x485671,_0x27fa2d)=>{const _0x3906bd=_0x160633;let _0x2a1ec8=_0x485671[_0x3906bd(0x200)];y['verbose'](_0x3906bd(0x4d8)),y[_0x3906bd(0x7bf)](_0x3906bd(0x97)),y[_0x3906bd(0x7bf)](_0x485671['body']);let _0x20931e=await this[_0x3906bd(0xf3)]({'request':_0x485671,'schema':v,'ClassRef':M,'execute':_0x9ec3a5=>T[_0x3906bd(0x550)](_0x9ec3a5,_0x2a1ec8)});_0x27fa2d['status'](0xc8)['json'](_0x20931e);})[_0x160633(0x2d6)](this[_0x160633(0x5c3)](_0x160633(0x1e4)),..._0x499edc,async(_0x2ed26b,_0x59b8a0)=>{const _0x33ca9e=_0x160633;let _0x1a0e05=_0x2ed26b[_0x33ca9e(0x200)];y['verbose'](_0x33ca9e(0x2b3)),y['verbose'](_0x33ca9e(0x97)),y[_0x33ca9e(0x7bf)](_0x2ed26b['body']);let _0x3ef6b1=await this[_0x33ca9e(0xf3)]({'request':_0x2ed26b,'schema':v,'ClassRef':M,'execute':_0x1011c4=>T[_0x33ca9e(0x1e4)](_0x1011c4,_0x1a0e05)});_0x59b8a0[_0x33ca9e(0x7ae)](0xc8)[_0x33ca9e(0x115)](_0x3ef6b1);})[_0x160633(0x790)](this[_0x160633(0x5c3)]('createflow'),..._0x499edc,async(_0x2a59b2,_0x1f445a)=>{const _0x5deead=_0x160633;let _0x18e005=_0x2a59b2['body'],_0x5ac091=_0x2a59b2[_0x5deead(0x12f)][_0x5deead(0x20a)];y['verbose'](_0x5deead(0x28c)),y[_0x5deead(0x7bf)](_0x5deead(0x97)),y[_0x5deead(0x7bf)](_0x2a59b2[_0x5deead(0x200)]);let _0x352905=await this[_0x5deead(0xf3)]({'request':_0x2a59b2,'schema':v,'ClassRef':M,'execute':_0x5d0c3b=>T[_0x5deead(0x4a0)](_0x5d0c3b,_0x18e005,_0x5ac091)});_0x1f445a['status'](0xc8)[_0x5deead(0x115)](_0x352905);})[_0x160633(0x790)](this[_0x160633(0x5c3)](_0x160633(0x7cd)),..._0x499edc,async(_0x5eea35,_0x21b1a5)=>{const _0x56c6bd=_0x160633;let _0x3d89eb=_0x5eea35['body'],_0x154f9e=_0x5eea35[_0x56c6bd(0x12f)]['apikey'];y[_0x56c6bd(0x7bf)](_0x56c6bd(0xb8)),y[_0x56c6bd(0x7bf)]('request\x20body:\x20'),y['verbose'](_0x5eea35[_0x56c6bd(0x200)]),delete _0x3d89eb[_0x56c6bd(0xe2)],delete _0x3d89eb['variables'],delete _0x3d89eb['groups'],delete _0x3d89eb[_0x56c6bd(0x4bd)];let _0xc2de3b=await this[_0x56c6bd(0xf3)]({'request':_0x5eea35,'schema':v,'ClassRef':M,'execute':_0x152132=>T[_0x56c6bd(0x366)](_0x152132,_0x3d89eb,_0x154f9e)});_0x21b1a5[_0x56c6bd(0x7ae)](0xc8)[_0x56c6bd(0x115)](_0xc2de3b);})[_0x160633(0x790)](this['routerPath'](_0x160633(0x1dd)),..._0x499edc,async(_0x35de09,_0x32d801)=>{const _0x5c0ad1=_0x160633;let _0x30521d=_0x35de09[_0x5c0ad1(0x200)];y['verbose'](_0x5c0ad1(0xb8)),y[_0x5c0ad1(0x7bf)](_0x5c0ad1(0x97)),y['verbose'](_0x35de09[_0x5c0ad1(0x200)]);let _0x50ab54=await this[_0x5c0ad1(0xf3)]({'request':_0x35de09,'schema':v,'ClassRef':M,'execute':_0x34303d=>T['editFlowBlock'](_0x34303d,_0x30521d)});_0x32d801[_0x5c0ad1(0x7ae)](0xc8)['json'](_0x50ab54);})['post'](this[_0x160633(0x5c3)]('editflowreply'),..._0x499edc,async(_0x391103,_0x1a7d04)=>{const _0x2a1286=_0x160633;let _0x16b558=_0x391103[_0x2a1286(0x200)];y['verbose'](_0x2a1286(0xb8)),y['verbose']('request\x20body:\x20'),y[_0x2a1286(0x7bf)](_0x391103[_0x2a1286(0x200)]);let _0x383e5d=await this[_0x2a1286(0xf3)]({'request':_0x391103,'schema':v,'ClassRef':M,'execute':_0x112aae=>T[_0x2a1286(0x1e3)](_0x112aae,_0x16b558)});_0x1a7d04['status'](0xc8)[_0x2a1286(0x115)](_0x383e5d);})[_0x160633(0x790)](this[_0x160633(0x5c3)](_0x160633(0x131)),..._0x499edc,async(_0x10c36b,_0x46dfcf)=>{const _0x9bbbf4=_0x160633;let _0x432a5f=_0x10c36b[_0x9bbbf4(0x200)];y['verbose'](_0x9bbbf4(0xb8)),y[_0x9bbbf4(0x7bf)](_0x9bbbf4(0x97)),y[_0x9bbbf4(0x7bf)](_0x10c36b[_0x9bbbf4(0x200)]);let _0x290da3=await this['dataValidate']({'request':_0x10c36b,'schema':v,'ClassRef':M,'execute':_0x157459=>T[_0x9bbbf4(0x234)](_0x157459,_0x432a5f)});_0x46dfcf['status'](0xc8)[_0x9bbbf4(0x115)](_0x290da3);})[_0x160633(0x790)](this['routerPath'](_0x160633(0x7ed)),..._0x499edc,async(_0x2230e9,_0x464a65)=>{const _0x463be4=_0x160633;let _0x11f6ff=_0x2230e9[_0x463be4(0x200)];y[_0x463be4(0x7bf)](_0x463be4(0x309)),y[_0x463be4(0x7bf)](_0x463be4(0x97)),y[_0x463be4(0x7bf)](_0x2230e9[_0x463be4(0x200)]);let _0x3a7db3=await this[_0x463be4(0xf3)]({'request':_0x2230e9,'schema':v,'ClassRef':M,'execute':_0x53472d=>T[_0x463be4(0x71e)](_0x53472d,_0x11f6ff)});_0x464a65['status'](0xc8)[_0x463be4(0x115)](_0x3a7db3);})[_0x160633(0x790)](this['routerPath'](_0x160633(0x4b8)),..._0x499edc,async(_0x246ee3,_0x163798)=>{const _0x30b8df=_0x160633;let _0x3ddf8b=_0x246ee3[_0x30b8df(0x200)];y['verbose'](_0x30b8df(0x454)),y[_0x30b8df(0x7bf)]('request\x20body:\x20'),y[_0x30b8df(0x7bf)](_0x246ee3[_0x30b8df(0x200)]);let _0x396983=await this['dataValidate']({'request':_0x246ee3,'schema':v,'ClassRef':M,'execute':_0x3c82df=>T['editFlowCondition'](_0x3c82df,_0x3ddf8b)});_0x163798['status'](0xc8)[_0x30b8df(0x115)](_0x396983);})[_0x160633(0x790)](this['routerPath'](_0x160633(0x279)),..._0x499edc,async(_0x4304e2,_0x11b3e7)=>{const _0x468556=_0x160633;let _0x56a76b=_0x4304e2[_0x468556(0x200)];y['verbose'](_0x468556(0x2a4)),y[_0x468556(0x7bf)]('request\x20body:\x20'),y[_0x468556(0x7bf)](_0x4304e2[_0x468556(0x200)]);let _0x6a785f=await this['dataValidate']({'request':_0x4304e2,'schema':v,'ClassRef':M,'execute':_0x4f6c86=>T[_0x468556(0x7c6)](_0x4f6c86,_0x56a76b)});_0x11b3e7['status'](0xc8)[_0x468556(0x115)](_0x6a785f);})[_0x160633(0x790)](this['routerPath']('getflow'),..._0x499edc,async(_0x34c9ca,_0x11b276)=>{const _0x4b99f2=_0x160633;let _0x2d5fb7=_0x34c9ca[_0x4b99f2(0x200)];y[_0x4b99f2(0x7bf)](_0x4b99f2(0x7bd)),y[_0x4b99f2(0x7bf)](_0x4b99f2(0x97)),y[_0x4b99f2(0x7bf)](_0x34c9ca[_0x4b99f2(0x200)]);let _0x429e09=await this[_0x4b99f2(0xf3)]({'request':_0x34c9ca,'schema':v,'ClassRef':M,'execute':_0x267a24=>T[_0x4b99f2(0xd0)](_0x267a24,_0x2d5fb7)});_0x11b276[_0x4b99f2(0x7ae)](0xc8)[_0x4b99f2(0x115)](_0x429e09);})[_0x160633(0x2d6)](this[_0x160633(0x5c3)](_0x160633(0x34f)),..._0x499edc,async(_0x32cdba,_0x13be0b)=>{const _0xcd7097=_0x160633;let _0x33c6d1=_0x32cdba[_0xcd7097(0x200)];y['verbose'](_0xcd7097(0x1b1)),y['verbose']('request\x20body:\x20'),y['verbose'](_0x32cdba['body']);let _0x1503d9=await this['dataValidate']({'request':_0x32cdba,'schema':v,'ClassRef':M,'execute':_0x52dff5=>T['deleteFlow'](_0x52dff5,_0x33c6d1)});_0x13be0b[_0xcd7097(0x7ae)](0xc8)[_0xcd7097(0x115)](_0x1503d9);})['get'](this[_0x160633(0x5c3)]('allflows'),..._0x499edc,async(_0x3165c9,_0x38720e)=>{const _0x240f60=_0x160633;y['verbose'](_0x240f60(0x7cf));let _0x555cf4=await this['dataValidate']({'request':_0x3165c9,'schema':v,'ClassRef':M,'execute':_0x5a8c27=>T[_0x240f60(0x242)](_0x5a8c27)});_0x38720e[_0x240f60(0x7ae)](0xc8)['json'](_0x555cf4);});}},vi=I(require(a0_0x4a47c0(0xce))),oe={};function Mi(_0x797036,_0x672b3a,_0xccc6c3,_0x1b5c9){oe[_0x797036]||(oe[_0x797036]={}),oe[_0x797036][_0x672b3a]={'id':_0x672b3a,'response':_0xccc6c3,'events':_0x1b5c9};}function Ci(_0x3b5da7,_0x6c46ea){!oe[_0x3b5da7]||!oe[_0x3b5da7][_0x6c46ea]||delete oe[_0x3b5da7][_0x6c46ea];}function q(_0x5a5074,_0x5cc9b9,_0x59a9d7){const _0xaef10d=a0_0x4a47c0;if(!oe[_0x5a5074])return;let _0x27312a=_0xaef10d(0x382)+JSON['stringify'](_0x59a9d7)+'\x0a\x0a';Object[_0xaef10d(0x298)](oe[_0x5a5074])['forEach'](_0x82daa2=>{const _0x4a4ce1=_0xaef10d;_0x82daa2[_0x4a4ce1(0xcc)][_0x4a4ce1(0x795)](_0x5cc9b9)&&_0x82daa2[_0x4a4ce1(0x344)][_0x4a4ce1(0x103)](_0x27312a);});}function Ei(){const _0x114b86=a0_0x4a47c0;let _0x11b841={};for(let _0x1b5e73 in oe)_0x11b841[_0x1b5e73]=Object[_0x114b86(0x298)](oe[_0x1b5e73])[_0x114b86(0x4b0)](_0x530bb2=>({'id':_0x530bb2['id'],'events':_0x530bb2[_0x114b86(0xcc)]}));return _0x11b841;}var Ni=require('uuid'),Os=require(a0_0x4a47c0(0x49d)),Ts=class{},Oo=new Os[(a0_0x4a47c0(0x4fd))]({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),_o=new Os[(a0_0x4a47c0(0x4fd))]({'_id':{'type':String,'default':'config'},'WebhookGlobal':{'type':Oo},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Ne=R?.[a0_0x4a47c0(0x30a)](Ts[a0_0x4a47c0(0x25b)],_o,'All_Instances_Config'),xo=vi[a0_0x4a47c0(0x339)][a0_0x4a47c0(0x258)](__dirname,a0_0x4a47c0(0x442)),Le=(0x0,kt[a0_0x4a47c0(0x670)])(),Do=b[a0_0x4a47c0(0x58b)]('AUTHENTICATION')[a0_0x4a47c0(0x58c)],le=[Ta,Oa,Da[Do]];Le[a0_0x4a47c0(0x703)](a0_0x4a47c0(0x23e),kt['default'][a0_0x4a47c0(0x7b6)](xo))[a0_0x4a47c0(0x58b)](a0_0x4a47c0(0xae),async(_0x25959f,_0x51b058)=>{const _0x1733ff=a0_0x4a47c0;console['log'](_0x1733ff(0x2cf));let _0x301eb8=_0x25959f[_0x1733ff(0x699)][_0x1733ff(0x21b)],_0x4f1bf8=(_0x25959f[_0x1733ff(0x176)][_0x1733ff(0xcc)]||'')['split'](','),_0x28e22b=(0x0,Ni['v4'])();console[_0x1733ff(0x18d)](_0x1733ff(0x2a5),_0x301eb8),console[_0x1733ff(0x18d)](_0x1733ff(0x7ad),_0x4f1bf8);let _0x1e80cf=b[_0x1733ff(0x58b)](_0x1733ff(0x5f9))['API_KEY'],_0x164624=_0x25959f[_0x1733ff(0x176)][_0x1733ff(0x20a)];if(console['log']('API\x20Key\x20from\x20Request:',_0x164624),_0x1e80cf[_0x1733ff(0x79e)]!==_0x164624){console[_0x1733ff(0x18d)]('env.KEY\x20!==\x20key');try{let _0x2d421b=await we[_0x1733ff(0x28a)][_0x1733ff(0x2ba)](_0x301eb8);if(console['log'](_0x1733ff(0x605),_0x2d421b),!_0x2d421b||_0x2d421b[_0x1733ff(0x20a)]!==_0x164624)return console['log'](_0x1733ff(0x77a)),_0x51b058[_0x1733ff(0x7ae)](0x191)[_0x1733ff(0x6c4)](_0x1733ff(0x625));}catch(_0x55ac70){return console[_0x1733ff(0x5f8)](_0x1733ff(0x2bf),_0x55ac70),_0x51b058[_0x1733ff(0x7ae)](0x191)['send']('API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.');}}if(!await _e(_0x301eb8))return _0x51b058[_0x1733ff(0x7ae)](0x194)[_0x1733ff(0x6c4)](_0x1733ff(0x5e0));_0x51b058[_0x1733ff(0xa2)](_0x1733ff(0x551),_0x1733ff(0x95)),_0x51b058['setHeader'](_0x1733ff(0x76a),_0x1733ff(0x51b)),_0x51b058['setHeader']('Connection',_0x1733ff(0x2e7)),_0x51b058[_0x1733ff(0x5a4)]();let _0x51a51a=_0x1733ff(0x382)+JSON[_0x1733ff(0x52f)]({'info':_0x1733ff(0x263)})+'\x0a\x0a';_0x51b058[_0x1733ff(0x103)](_0x51a51a),Mi(_0x301eb8,_0x28e22b,_0x51b058,_0x4f1bf8),_0x25959f['on'](_0x1733ff(0x735),()=>{const _0x5f4aaf=_0x1733ff;console[_0x5f4aaf(0x18d)](_0x5f4aaf(0x456)+_0x301eb8),Ci(_0x301eb8,_0x28e22b);});}),Le['post']('/startFlow/:instance/:startID',async(_0x11650c,_0x4c2910)=>{const _0x4f96bf=a0_0x4a47c0;console[_0x4f96bf(0x18d)](_0x4f96bf(0x196));let _0xbf7ac3=_0x11650c[_0x4f96bf(0x699)][_0x4f96bf(0x21b)],_0x4940e8=_0x11650c[_0x4f96bf(0x699)]['startID'],_0x42fc03=_0x11650c[_0x4f96bf(0x176)][_0x4f96bf(0x1d0)]||'',_0x3fbcbb=_0x11650c['body'];console['log']('Instance\x20Name:',_0xbf7ac3),console[_0x4f96bf(0x18d)]('StartID:',_0x4940e8),console['log'](_0x4f96bf(0x2ec),_0x42fc03),console[_0x4f96bf(0x18d)](_0x4f96bf(0x17b),_0x3fbcbb);try{if(!await _e(_0xbf7ac3))return _0x4c2910['status'](0x194)[_0x4f96bf(0x6c4)](_0x4f96bf(0x5e0));let _0x19bf92=await T[_0x4f96bf(0x7fc)](_0xbf7ac3,_0x4940e8,_0x42fc03,_0x3fbcbb);_0x4c2910[_0x4f96bf(0x6c4)](_0x19bf92);}catch(_0xa971b8){console[_0x4f96bf(0x5f8)](_0xa971b8),_0x4c2910['status'](0x1f4)[_0x4f96bf(0x6c4)](_0x4f96bf(0x6f7));}}),Le[a0_0x4a47c0(0x58b)]('/clients-info',(_0x580f8f,_0x33730f)=>{const _0xe9a3b2=a0_0x4a47c0;let _0x5f163d=Ei();_0x33730f[_0xe9a3b2(0x115)](_0x5f163d);})[a0_0x4a47c0(0x58b)]('/',(_0x4610fa,_0x49f01c)=>{const _0x585000=a0_0x4a47c0;let _0xfad17=b[_0x585000(0x58b)]('SERVER')['URL'];if(_0xfad17){let _0x5d6aaa=encodeURIComponent(''+_0xfad17);_0x49f01c[_0x585000(0x5ea)]('https://uazapi-plugin.bubbleapps.io/?url='+_0x5d6aaa);return;}let _0x3f540b=b[_0x585000(0x58b)](_0x585000(0x4f8)),_0x39aba8=_0x3f540b&&_0x3f540b['FULLCHAIN'][_0x585000(0x31c)]('/')[0x4];if(_0x39aba8){let _0x64d9b2=encodeURIComponent(_0x585000(0x2ad)+_0x39aba8);_0x49f01c[_0x585000(0x5ea)](_0x585000(0x215)+_0x64d9b2);}else _0x49f01c[_0x585000(0x5ea)](_0x585000(0x41f));})[a0_0x4a47c0(0x719)]('/exit',...le,async(_0x2319cd,_0xcc94d0)=>{const _0x5995dc=a0_0x4a47c0;try{console[_0x5995dc(0x18d)]('Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit'),_0xcc94d0[_0x5995dc(0x7ae)](0xc8)[_0x5995dc(0x115)]({'message':_0x5995dc(0x61a)}),_0xcc94d0['on']('finish',()=>process[_0x5995dc(0x56b)](0x0));}catch(_0x37d24e){console[_0x5995dc(0x5f8)](_0x5995dc(0x2d9),_0x37d24e),_0xcc94d0[_0x5995dc(0x7ae)](0x1f4)['json']({'message':_0x5995dc(0xe9)});}})['put'](a0_0x4a47c0(0x245),...le,async(_0xfed7f7,_0x312ee6)=>{const _0x593615=a0_0x4a47c0;try{let _0x244826=_0xfed7f7[_0x593615(0x200)];await Ne[_0x593615(0xc6)]({},{'$set':_0x244826},{'upsert':!0x0});let _0x259ec4=await Ne[_0x593615(0xb1)]();_0x312ee6[_0x593615(0x115)](_0x259ec4);}catch(_0x4375c1){_0x312ee6[_0x593615(0x7ae)](0x190)[_0x593615(0x6c4)](_0x4375c1[_0x593615(0xab)]);}})[a0_0x4a47c0(0x58b)](a0_0x4a47c0(0x245),...le,async(_0x32baa4,_0x4911c8)=>{const _0x3a38b0=a0_0x4a47c0;try{let _0x4efe9b=await Ne[_0x3a38b0(0xb1)]();if(!_0x4efe9b)return _0x4911c8['json']({});_0x4911c8['json'](_0x4efe9b);}catch(_0x5728b5){_0x4911c8[_0x3a38b0(0x7ae)](0x1f4)[_0x3a38b0(0x6c4)](_0x5728b5[_0x3a38b0(0xab)]);}})['use'](a0_0x4a47c0(0x24e),new Mt(b,...le)[a0_0x4a47c0(0x47d)])[a0_0x4a47c0(0x703)](a0_0x4a47c0(0x2c3),new _t(...le)['router'])[a0_0x4a47c0(0x703)](a0_0x4a47c0(0x691),new dt(...le)[a0_0x4a47c0(0x47d)])['use'](a0_0x4a47c0(0x3b1),new St(...le)['router'])[a0_0x4a47c0(0x703)](a0_0x4a47c0(0x4b4),new Dt(...le)['router'])[a0_0x4a47c0(0x703)](a0_0x4a47c0(0x223),new Pt(...le)[a0_0x4a47c0(0x47d)]);var m=class{constructor(..._0x3c0b31){throw{'status':0x190,'error':'Bad\x20Request','message':_0x3c0b31['length']>0x0?_0x3c0b31:void 0x0};}},ce=class{constructor(..._0x4708e4){const _0x4987a2=a0_0x4a47c0;throw{'status':0x191,'error':'Unauthorized','message':_0x4708e4[_0x4987a2(0x415)]>0x0?_0x4708e4:void 0x0};}},se=class{constructor(..._0x2287a0){const _0x2c11cb=a0_0x4a47c0;throw{'status':0x193,'error':_0x2c11cb(0x143),'message':_0x2287a0['length']>0x0?_0x2287a0:void 0x0};}},J=class{constructor(..._0x189180){const _0x2d91b5=a0_0x4a47c0;throw{'status':0x194,'error':_0x2d91b5(0x1c4),'message':_0x189180[_0x2d91b5(0x415)]>0x0?_0x189180:void 0x0};}},x=class{constructor(..._0x285e82){const _0x36ec04=a0_0x4a47c0;throw{'status':0x1f4,'error':_0x36ec04(0x614),'message':_0x285e82[_0x36ec04(0x415)]>0x0?_0x285e82:void 0x0};}},ye=require('@whiskeysockets/baileys');async function _s(_0x330b7b){const _0x5c894c=a0_0x4a47c0;let _0x3dd0db=new $(_s[_0x5c894c(0x25b)]),_0x1a6f27=R[_0x5c894c(0x61d)](),_0x11570f=_0x1a6f27['db'](b[_0x5c894c(0x58b)](_0x5c894c(0xf4))[_0x5c894c(0x75c)][_0x5c894c(0x1f8)]+_0x5c894c(0x2a1))[_0x5c894c(0x2f0)](_0x330b7b),_0x1a2821=async(_0x3331e5,_0x5031a9)=>{const _0x1b3d7f=_0x5c894c;try{return await _0x1a6f27[_0x1b3d7f(0x608)](),await _0x11570f[_0x1b3d7f(0x511)]({'_id':_0x5031a9},JSON[_0x1b3d7f(0x4e6)](JSON[_0x1b3d7f(0x52f)](_0x3331e5,ye[_0x1b3d7f(0x6c9)]['replacer'])),{'upsert':!0x0});}catch{}},_0x3d1b02=async _0x51bbb4=>{const _0x10b309=_0x5c894c;try{await _0x1a6f27['connect']();let _0x2692c4=await _0x11570f[_0x10b309(0xb1)]({'_id':_0x51bbb4}),_0x4f604d=JSON[_0x10b309(0x52f)](_0x2692c4);return JSON[_0x10b309(0x4e6)](_0x4f604d,ye['BufferJSON'][_0x10b309(0x413)]);}catch{}},_0x588cb3=async _0x53a8ff=>{const _0x3d314f=_0x5c894c;try{return await _0x1a6f27['connect'](),await _0x11570f[_0x3d314f(0x4a5)]({'_id':_0x53a8ff});}catch{}},_0x564a0a=await _0x3d1b02(_0x5c894c(0x440))||(0x0,ye['initAuthCreds'])();return{'state':{'creds':_0x564a0a,'keys':{'get':async(_0x2ac9c0,_0x30ea58)=>{const _0x1543b5=_0x5c894c;let _0x5290f1={};return await Promise[_0x1543b5(0x64a)](_0x30ea58[_0x1543b5(0x4b0)](async _0x525a8e=>{const _0x33fa95=_0x1543b5;let _0x262df1=await _0x3d1b02(_0x2ac9c0+'-'+_0x525a8e);_0x2ac9c0==='app-state-sync-key'&&_0x262df1&&(_0x262df1=ye[_0x33fa95(0xde)][_0x33fa95(0x54a)]['AppStateSyncKeyData'][_0x33fa95(0x487)](_0x262df1)),_0x5290f1[_0x525a8e]=_0x262df1;})),_0x5290f1;},'set':async _0x26623b=>{const _0x1bdcfb=_0x5c894c;let _0x5b3f1d=[];for(let _0x185c5f in _0x26623b)for(let _0x19cbca in _0x26623b[_0x185c5f]){let _0x5c99d2=_0x26623b[_0x185c5f][_0x19cbca],_0x36a80f=_0x185c5f+'-'+_0x19cbca;_0x5b3f1d[_0x1bdcfb(0x723)](_0x5c99d2?_0x1a2821(_0x5c99d2,_0x36a80f):_0x588cb3(_0x36a80f));}await Promise[_0x1bdcfb(0x64a)](_0x5b3f1d);}}},'saveCreds':async()=>_0x1a2821(_0x564a0a,_0x5c894c(0x440))};}var Ls=I(require('long')),Fs=I(require('node-cache')),Ut=require(a0_0x4a47c0(0x110)),$i=require(a0_0x4a47c0(0x58a)),Ft=require('@whiskeysockets/baileys'),Lt;function Po(_0x1a3648){const _0x479b63=a0_0x4a47c0;return Lt||(Lt=(0x0,$i[_0x479b63(0x675)])({'url':_0x1a3648[_0x479b63(0x6c3)]}),Lt[_0x479b63(0x608)]()),Lt;}var ge=class u{constructor(_0x49784d,_0x3b84b1){const _0x247334=a0_0x4a47c0;this[_0x247334(0x750)]=_0x49784d,this['instanceName']=_0x3b84b1,this[_0x247334(0x664)]=new $(u['name']),this[_0x247334(0x29a)]=Po(_0x49784d);}set[a0_0x4a47c0(0x71f)](_0x1d633d){const _0xf2f3ca=a0_0x4a47c0;this[_0xf2f3ca(0x5b1)]=_0x1d633d;}async['instanceKeys'](){const _0x44b955=a0_0x4a47c0;try{return await this[_0x44b955(0x29a)][_0x44b955(0x1fa)]([_0x44b955(0x77d),this[_0x44b955(0x750)][_0x44b955(0x322)]+':*']);}catch(_0x1f7201){this[_0x44b955(0x664)][_0x44b955(0x5f8)](_0x1f7201);}}async[a0_0x4a47c0(0x34c)](_0x5a2861,_0x5ec585){const _0x1aba69=a0_0x4a47c0;try{let _0x42fc27=JSON['stringify'](_0x5ec585,Ft[_0x1aba69(0x6c9)]['replacer']);return await this[_0x1aba69(0x29a)][_0x1aba69(0x19e)](this[_0x1aba69(0x750)][_0x1aba69(0x322)]+':'+this[_0x1aba69(0x5b1)],_0x5a2861,_0x42fc27);}catch(_0x316ddf){this['logger'][_0x1aba69(0x5f8)](_0x316ddf);}}async[a0_0x4a47c0(0x437)](){const _0x6a284c=a0_0x4a47c0;try{let _0x2c3683=await this[_0x6a284c(0x29a)][_0x6a284c(0x3b8)](this['redisEnv'][_0x6a284c(0x322)]+':'+this['instanceName']);if(_0x2c3683){for(let _0x5387c4 in _0x2c3683)Object[_0x6a284c(0x46f)][_0x6a284c(0x4fa)][_0x6a284c(0x7ce)](_0x2c3683,_0x5387c4)&&(_0x2c3683[_0x5387c4]=JSON[_0x6a284c(0x4e6)](_0x2c3683[_0x5387c4],Ft['BufferJSON'][_0x6a284c(0x413)]));return _0x2c3683;}}catch(_0x3b1615){this[_0x6a284c(0x664)]['error'](_0x3b1615);}}async[a0_0x4a47c0(0x1ce)](_0x36d9ae){const _0x5838bf=a0_0x4a47c0;try{let _0x27ecb1=await this[_0x5838bf(0x29a)][_0x5838bf(0x799)](this[_0x5838bf(0x750)][_0x5838bf(0x322)]+':'+this[_0x5838bf(0x5b1)],_0x36d9ae);if(_0x27ecb1)return JSON[_0x5838bf(0x4e6)](_0x27ecb1,Ft['BufferJSON']['reviver']);}catch(_0x1f4ce8){this['logger'][_0x5838bf(0x5f8)](_0x1f4ce8);}}async[a0_0x4a47c0(0x3f1)](_0x546407){const _0x1d4fbb=a0_0x4a47c0;try{return await this[_0x1d4fbb(0x29a)]['hDel'](this[_0x1d4fbb(0x750)]['PREFIX_KEY']+':'+this[_0x1d4fbb(0x5b1)],_0x546407);}catch(_0x2b2ba5){this[_0x1d4fbb(0x664)][_0x1d4fbb(0x5f8)](_0x2b2ba5);}}async[a0_0x4a47c0(0x623)](_0x29d807){const _0x14d1d0=a0_0x4a47c0;try{return await this[_0x14d1d0(0x29a)][_0x14d1d0(0x2c6)](_0x29d807||this['redisEnv'][_0x14d1d0(0x322)]+':'+this['instanceName']);}catch(_0x5f07cb){this[_0x14d1d0(0x664)][_0x14d1d0(0x5f8)](_0x5f07cb);}}};async function xs(_0x4e9ec2,_0x2a6952){const _0x3982f2=a0_0x4a47c0;let _0x4ce55e=new $(xs[_0x3982f2(0x25b)]),_0xe9b854=new ge(_0x4e9ec2,_0x2a6952),_0x423237=async(_0x19da26,_0x2edc9e)=>{const _0x577426=_0x3982f2;try{return await _0xe9b854['writeData'](_0x2edc9e,_0x19da26);}catch(_0x20cfdd){return _0x4ce55e[_0x577426(0x5f8)]({'localError':'writeData','error':_0x20cfdd});}},_0x2502a3=async _0x4e689b=>{const _0x2f063c=_0x3982f2;try{return await _0xe9b854[_0x2f063c(0x1ce)](_0x4e689b);}catch(_0x4c402e){_0x4ce55e[_0x2f063c(0x5f8)]({'readData':_0x2f063c(0x34c),'error':_0x4c402e});return;}},_0x5a36d3=async _0x20d842=>{const _0x3fe177=_0x3982f2;try{return await _0xe9b854[_0x3fe177(0x3f1)](_0x20d842);}catch(_0x1ccd67){_0x4ce55e[_0x3fe177(0x5f8)]({'readData':_0x3fe177(0x3f1),'error':_0x1ccd67});}},_0x14ff3a=await _0x2502a3('creds')||(0x0,Ut[_0x3982f2(0x133)])();return{'state':{'creds':_0x14ff3a,'keys':{'get':async(_0xe0721f,_0x290f2b)=>{const _0x32d0c0=_0x3982f2;let _0x1d87d3={};return await Promise[_0x32d0c0(0x64a)](_0x290f2b[_0x32d0c0(0x4b0)](async _0x498906=>{const _0x29ebca=_0x32d0c0;let _0x3c86c8=await _0x2502a3(_0xe0721f+'-'+_0x498906);_0xe0721f===_0x29ebca(0x7e4)&&_0x3c86c8&&(_0x3c86c8=Ut[_0x29ebca(0xde)][_0x29ebca(0x54a)][_0x29ebca(0x1b2)][_0x29ebca(0x487)](_0x3c86c8)),_0x1d87d3[_0x498906]=_0x3c86c8;})),_0x1d87d3;},'set':async _0xbe455d=>{const _0x543ad4=_0x3982f2;let _0x88a477=[];for(let _0x26e42c in _0xbe455d)for(let _0x574be4 in _0xbe455d[_0x26e42c]){let _0x4e2fc8=_0xbe455d[_0x26e42c][_0x574be4],_0x549046=_0x26e42c+'-'+_0x574be4;_0x88a477[_0x543ad4(0x723)](_0x4e2fc8?await _0x423237(_0x4e2fc8,_0x549046):await _0x5a36d3(_0x549046));}await Promise[_0x543ad4(0x64a)](_0x88a477);}}},'saveCreds':async()=>await _0x423237(_0x14ff3a,_0x3982f2(0x440))};}var F=I(require('fs')),X=require(a0_0x4a47c0(0x6db)),Vt=I(require(a0_0x4a47c0(0x373))),Gt=require(a0_0x4a47c0(0x796)),Ri=require(a0_0x4a47c0(0x566)),Ai=require(a0_0x4a47c0(0xa9)),Ii=I(require(a0_0x4a47c0(0x6c1))),$e=class extends _{constructor(_0x1b861e,_0x1199f1,_0x193da1){const _0x357897=a0_0x4a47c0;super(_0x1199f1),this['cacheInstanceModel']=_0x1b861e,this[_0x357897(0x45a)]=_0x1199f1,this['dbConnection']=_0x193da1;}async['createOrUpdate'](_0x4cc92f,_0x936dc8){const _0x2744cb=a0_0x4a47c0;try{if(this[_0x2744cb(0x3d2)][_0x2744cb(0x99)]){console[_0x2744cb(0x18d)](_0x2744cb(0x20c)+_0x936dc8+_0x2744cb(0x6d1),_0x4cc92f);let _0x32a444=await this['cacheInstanceModel'][_0x2744cb(0x1af)]({'_id':_0x936dc8},{'$set':_0x4cc92f},{'new':!0x0,'upsert':!0x0});return console[_0x2744cb(0x18d)]('Database\x20update\x20result:',_0x32a444),_0x32a444;}}catch(_0x30676c){throw console[_0x2744cb(0x5f8)](_0x2744cb(0x560),_0x30676c),_0x30676c;}return null;}async[a0_0x4a47c0(0x4a5)](_0x2e4b97){const _0x39b7e4=a0_0x4a47c0;try{let _0x54054e=A(_0x2e4b97[_0x39b7e4(0x381)]);return{'deletedCount':(await this[_0x39b7e4(0x14f)][_0x39b7e4(0x4a5)](_0x54054e))[_0x39b7e4(0x693)]};}catch(_0x105f75){return{'error':_0x105f75?.[_0x39b7e4(0x13c)]()};}}async[a0_0x4a47c0(0xb1)](_0x5b9e56){const _0x3b840b=a0_0x4a47c0;try{let _0x1179d3=A(_0x5b9e56[_0x3b840b(0x381)]);return await this['cacheInstanceModel'][_0x3b840b(0xb1)](_0x1179d3)['lean']();}catch{return null;}}},jt=(0x0,Ai[a0_0x4a47c0(0x496)])(Ri[a0_0x4a47c0(0x449)]),ko=b[a0_0x4a47c0(0x58b)](a0_0x4a47c0(0x375)),Ds=class{constructor(){const _0x468e93=a0_0x4a47c0;this['cacheInstanceRepository']=new $e(He,b),(!this['ipv6Prefix']||!this[_0x468e93(0x2c9)])&&ko&&this[_0x468e93(0x353)]()[_0x468e93(0x2a7)](()=>{const _0x1cc01c=_0x468e93;console[_0x1cc01c(0x18d)](_0x1cc01c(0x29d)+this[_0x1cc01c(0x4d0)]),console['log']('Network\x20Interface\x20detected:\x20'+this[_0x1cc01c(0x2c9)]);})['catch'](_0x4390f1=>{const _0x4a3595=_0x468e93;console[_0x4a3595(0x5f8)](_0x4a3595(0x243)+_0x4390f1['message']);});}async[a0_0x4a47c0(0x353)](){const _0x5daef6=a0_0x4a47c0;try{let {stdout:_0x63480e}=await jt(_0x5daef6(0x523));console['log'](_0x5daef6(0x579)+_0x63480e);let _0x57d1c5=_0x63480e[_0x5daef6(0x31c)]('\x0a')[_0x5daef6(0x4b0)](_0x3659e8=>_0x3659e8[_0x5daef6(0x31c)]('\x20')[0x0])[_0x5daef6(0x635)](_0x46d427=>!_0x46d427[_0x5daef6(0x795)]('lo')&&!_0x46d427[_0x5daef6(0x795)](_0x5daef6(0x57d))&&!_0x46d427[_0x5daef6(0x795)](_0x5daef6(0x549))&&!_0x46d427['includes']('wl')&&!_0x46d427[_0x5daef6(0x795)]('@'));if(console['log'](_0x5daef6(0x236)+_0x57d1c5),_0x57d1c5['length']===0x0)throw new Error(_0x5daef6(0x6da));this[_0x5daef6(0x2c9)]=_0x57d1c5[0x0];let {stdout:_0x364258}=await jt(_0x5daef6(0x55d)+this[_0x5daef6(0x2c9)]);console[_0x5daef6(0x18d)](_0x5daef6(0x2ac)+_0x364258);let _0x1306db=_0x364258[_0x5daef6(0x31c)]('\x0a')['find'](_0x2fee26=>_0x2fee26[_0x5daef6(0x795)](_0x5daef6(0x6fa))&&_0x2fee26[_0x5daef6(0x795)](_0x5daef6(0x6f5)));if(!_0x1306db)throw new Error(_0x5daef6(0xf6));let _0x2158ae=_0x1306db[_0x5daef6(0x3b6)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x2158ae)throw new Error(_0x5daef6(0x70b));let [_0x163a91,_0xea0fd2,_0x158b0e]=_0x2158ae,_0x393c4f=Math[_0x5daef6(0x771)](Number(_0x158b0e)/0x10),_0x1a751a=Number(_0x158b0e)%0x10,_0x5b88d5=_0xea0fd2[_0x5daef6(0x31c)](':')[_0x5daef6(0x77c)](0x0,_0x393c4f)[_0x5daef6(0x258)](':');if(_0x1a751a>0x0){let _0x160783=_0xea0fd2['split'](':')[_0x393c4f],_0x2a133a=0xffff<<0x10-_0x1a751a&0xffff,_0x2cbb28=(parseInt(_0x160783,0x10)&_0x2a133a)[_0x5daef6(0x13c)](0x10)['padStart'](0x4,'0');_0x5b88d5+=':'+_0x2cbb28;}this[_0x5daef6(0x4d0)]=_0x5b88d5+':';}catch(_0x2a4ba0){console[_0x5daef6(0x5f8)](_0x5daef6(0x18f),_0x2a4ba0);}}async[a0_0x4a47c0(0x38e)](_0x205fa7){const _0x37e6ce=a0_0x4a47c0;let _0x1b47fb=_0x37e6ce(0x7d6)+_0x205fa7+'/64\x20dev\x20'+this[_0x37e6ce(0x2c9)];try{await jt(_0x1b47fb),console[_0x37e6ce(0x18d)](_0x37e6ce(0x471)+_0x205fa7);}catch(_0x96e86f){console[_0x37e6ce(0x5f8)](_0x37e6ce(0x5fd)+_0x96e86f);}}async[a0_0x4a47c0(0x6fd)](_0x1aaac1){const _0x584fdc=a0_0x4a47c0;let _0x3160db=_0x584fdc(0x5ac)+_0x1aaac1+_0x584fdc(0x64d)+this[_0x584fdc(0x2c9)];try{await jt(_0x3160db),console['log'](_0x584fdc(0x4f6)+_0x1aaac1);}catch(_0x49c168){console['error'](_0x584fdc(0xe4)+_0x49c168);}}['randomMac'](){const _0x5af395=a0_0x4a47c0;return _0x5af395(0x2f5)[_0x5af395(0x470)](/X/g,()=>_0x5af395(0x7ba)['charAt'](Math['floor'](Math['random']()*0x10)));}[a0_0x4a47c0(0x473)](_0x5ca710,_0x28405b){const _0x563d20=a0_0x4a47c0;let _0x55194f=_0x28405b['split'](':');return _0x55194f[0x0]=(parseInt(_0x55194f[0x0],0x10)^0x2)[_0x563d20(0x13c)](0x10)[_0x563d20(0x641)](0x2,'0'),''+_0x5ca710+_0x55194f[0x0]+_0x55194f[0x1]+':'+_0x55194f[0x2]+_0x563d20(0x3ca)+_0x55194f[0x3]+':'+_0x55194f[0x4]+_0x55194f[0x5];}[a0_0x4a47c0(0x499)](){const _0x2d18fc=a0_0x4a47c0;let _0x1d0294=this[_0x2d18fc(0x4d0)];_0x1d0294[_0x2d18fc(0x582)](':')||(_0x1d0294+=':');let _0x2e9a24=this['randomMac']();return this[_0x2d18fc(0x473)](_0x1d0294,_0x2e9a24);}[a0_0x4a47c0(0x195)](_0x325f9c){const _0x37f8e9=a0_0x4a47c0;return new RegExp('^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$')[_0x37f8e9(0x27b)](_0x325f9c);}async[a0_0x4a47c0(0x10c)](_0x39f866){const _0x3538a4=a0_0x4a47c0;let _0x40d900=[{'url':_0x3538a4(0x4e0),'parse':_0x2102ce=>_0x2102ce['ip']},{'url':'https://api64.ipify.org?format=json','parse':_0x17cc77=>_0x17cc77['ip']},{'url':_0x3538a4(0x64f),'parse':_0x229034=>_0x229034['trim']()},{'url':_0x3538a4(0x361),'parse':_0x32be4a=>_0x32be4a[_0x3538a4(0x3a3)]()}],_0x4b770a=_0x40d900[Math[_0x3538a4(0x771)](Math[_0x3538a4(0x3bc)]()*_0x40d900[_0x3538a4(0x415)])];try{let _0x3b3165=await Ii[_0x3538a4(0x339)][_0x3538a4(0x58b)](_0x4b770a[_0x3538a4(0x3d7)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x39f866}}),_0x288063=_0x4b770a[_0x3538a4(0x4e6)](_0x3b3165[_0x3538a4(0x37a)]);return _0x288063[_0x3538a4(0x72d)]()===_0x39f866[_0x3538a4(0x72d)]()?(console[_0x3538a4(0x18d)]('IP\x20confirmed:\x20'+_0x39f866),!0x0):(console['error']('IP\x20mismatch:\x20configured\x20'+_0x39f866+_0x3538a4(0x40f)+_0x288063),!0x1);}catch(_0x4180a7){return console[_0x3538a4(0x5f8)](_0x3538a4(0x169)+_0x4b770a[_0x3538a4(0x3d7)]+':\x20'+_0x4180a7[_0x3538a4(0xab)]),!0x1;}}async[a0_0x4a47c0(0x6f8)](_0x4898c7,_0x19bc5f){const _0xb02bb8=a0_0x4a47c0;if(!this['ipv6Prefix']||!this[_0xb02bb8(0x2c9)])return console[_0xb02bb8(0x5f8)](_0xb02bb8(0x4de)),null;let _0x2af6ef;do _0x2af6ef=this['generateRandomIPv6'](),console[_0xb02bb8(0x18d)](_0xb02bb8(0x1cb)+_0x2af6ef);while(!await this[_0xb02bb8(0x5e4)](_0x2af6ef));await this['configureIPv6'](_0x2af6ef),console['log']('Configured\x20IPv6:\x20'+_0x2af6ef);let _0x280cb9={'_id':_0x4898c7+'-'+_0x19bc5f,'ip':_0x2af6ef},_0x468921=await this['cacheInstanceRepository'][_0xb02bb8(0x100)](_0x280cb9,_0x280cb9[_0xb02bb8(0x443)]);return console['log'](_0xb02bb8(0x749)+_0x468921),_0x2af6ef;}async[a0_0x4a47c0(0x5e4)](_0xbcdaef){const _0x1395c5=a0_0x4a47c0;return this[_0x1395c5(0x195)](_0xbcdaef)?!await this[_0x1395c5(0x156)][_0x1395c5(0xb1)]({'where':{'ip':_0xbcdaef}}):!0x1;}async['removeIPv6ById'](_0x433a83,_0xf4cdfa){const _0x46df7c=a0_0x4a47c0;let _0x2385dc=_0x433a83+'-'+_0xf4cdfa,_0x5e89fd=await this[_0x46df7c(0x156)][_0x46df7c(0xb1)]({'where':{'_id':_0x2385dc}});_0x5e89fd&&_0x5e89fd['ip']&&(await this[_0x46df7c(0x6fd)](_0x5e89fd['ip']),await this[_0x46df7c(0x156)][_0x46df7c(0x4a5)]({'where':{'_id':_0x2385dc}}));}},Lo=new Ds(),re=Lo,Us='Safari',ki,me=null,Pa=null,Fo=0x3,Uo=null,Ti=b[a0_0x4a47c0(0x58b)](a0_0x4a47c0(0x5f9))['API_KEY'][a0_0x4a47c0(0x79e)],Oi=b[a0_0x4a47c0(0x58b)](a0_0x4a47c0(0x375));async function jo(){const _0x45f316=a0_0x4a47c0;let _0x9ed31c=await Ne['findOne']();me=_0x9ed31c?.[_0x45f316(0x1fb)]??null,Uo=_0x9ed31c?.[_0x45f316(0x55a)]??null,Us=_0x9ed31c?.[_0x45f316(0x65c)]??_0x45f316(0x688),ki=_0x9ed31c?.[_0x45f316(0x12d)]??K??_0x45f316(0x168);}async function Jo(){await jo();}Jo();var Jt={},Re=class u{constructor(_0x20e19d,_0x5dacaf,_0x2bab4d){const _0x2ba94e=a0_0x4a47c0;this['configService']=_0x20e19d,this[_0x2ba94e(0x209)]=_0x5dacaf,this[_0x2ba94e(0x782)]=_0x2bab4d,this['AutomateSystem']=null,this[_0x2ba94e(0x664)]=new $(u[_0x2ba94e(0x25b)]),this[_0x2ba94e(0x21b)]={},this[_0x2ba94e(0x5b7)]={},this[_0x2ba94e(0x631)]={'state':_0x2ba94e(0x735)},this['storePath']=(0x0,j['join'])(ue,_0x2ba94e(0x442)),this[_0x2ba94e(0x220)]=new Fs['default'](),this[_0x2ba94e(0x3c0)]=new Fs[(_0x2ba94e(0x339))](),this['endSession']=!0x1,this[_0x2ba94e(0x288)]={'status.instance':_0x2ba94e(0x1db),'connection.update':_0x2ba94e(0x1db),'qrcode.updated':_0x2ba94e(0x1de),'messages.upsert':_0x2ba94e(0x645),'send.message':_0x2ba94e(0x645),'messages.update':_0x2ba94e(0x1b6),'group.upsert':_0x2ba94e(0xa1),'group.update':_0x2ba94e(0xa1),'group-participants.update':'/wa-groups','messages.set':_0x2ba94e(0x632),'contacts.set':_0x2ba94e(0x6bd),'contacts.upsert':_0x2ba94e(0x6bd),'contacts.update':'/wa-contacts','presence.update':'/wa-presence','chats.set':_0x2ba94e(0x619),'chats.update':'/wa-chats','chats.upsert':'/wa-chats','chats.delete':_0x2ba94e(0x619)},this[_0x2ba94e(0x744)]=0x0,this[_0x2ba94e(0x177)]=[],this[_0x2ba94e(0x230)]=0xea60,this[_0x2ba94e(0x1c3)]=!0x1,this[_0x2ba94e(0x416)]={'chats.upsert':async(_0xe0e366,_0x1c355c)=>{const _0x3d2735=_0x2ba94e;let _0xa6f68b=[];for await(let _0x25c415 of _0xe0e366)_0xa6f68b[_0x3d2735(0x723)]({'_id':_0x25c415['id'],'owner':this[_0x3d2735(0x21b)][_0x3d2735(0x228)],'group':_0x25c415['id'][_0x3d2735(0x582)](_0x3d2735(0x1c9)),'name':_0x25c415[_0x3d2735(0x25b)]||_0x25c415[_0x3d2735(0x6de)]||null,'contactname':null,'lastmsg':_0x25c415[_0x3d2735(0x2da)]&&_0x25c415[_0x3d2735(0x2da)][_0x3d2735(0x13c)]()[_0x3d2735(0x415)]<0xd?_0x25c415[_0x3d2735(0x2da)]*0x3e8:_0x25c415[_0x3d2735(0x2da)]||null,'archived':_0x25c415['archived']||!0x1,'unreadcount':_0x25c415[_0x3d2735(0x5a3)]||0x0,'ephemeralExpiration':_0x25c415[_0x3d2735(0x6b5)]||0x0});this['sendDataWebhook'](_0x3d2735(0x1c6),_0xa6f68b);},'chats.update':async(_0x38e8cd,_0x3aaa6b)=>{const _0x4f9e8b=_0x2ba94e;for(let _0x21df8c of _0x38e8cd){let _0x88b85e={'_id':_0x21df8c['id'],'owner':this['instance'][_0x4f9e8b(0x228)],'archived':_0x21df8c[_0x4f9e8b(0x564)],'muteEndTime':_0x21df8c[_0x4f9e8b(0x61b)],'ephemeralExpiration':_0x21df8c['ephemeralExpiration']},_0xa0b128=!0x1,_0x521c0a={};_0x88b85e['archived']!=null&&(this[_0x4f9e8b(0x664)]['verbose'](this[_0x4f9e8b(0x5b1)]+'\x20('+this['instance'][_0x4f9e8b(0x228)]+'):\x20teve\x20mudanças\x20chat.archived:\x20'+_0x21df8c['id']+_0x4f9e8b(0x26d)+_0x21df8c[_0x4f9e8b(0x564)]),_0xa0b128=!0x0,_0x521c0a['archived']=_0x21df8c[_0x4f9e8b(0x564)]),_0x4f9e8b(0x61b)in _0x21df8c&&(this[_0x4f9e8b(0x664)][_0x4f9e8b(0x7bf)](this[_0x4f9e8b(0x5b1)]+'\x20('+this[_0x4f9e8b(0x21b)][_0x4f9e8b(0x228)]+'):\x20teve\x20mudanças\x20chat.muteEndTime:\x20'+_0x21df8c['id']+_0x4f9e8b(0x26d)+(_0x21df8c[_0x4f9e8b(0x61b)]??'0')),_0xa0b128=!0x0,_0x521c0a[_0x4f9e8b(0x61b)]=_0x21df8c[_0x4f9e8b(0x61b)]??0x0),'ephemeralExpiration'in _0x21df8c&&(this[_0x4f9e8b(0x664)][_0x4f9e8b(0x7bf)](this[_0x4f9e8b(0x5b1)]+'\x20('+this[_0x4f9e8b(0x21b)][_0x4f9e8b(0x228)]+_0x4f9e8b(0x241)+_0x21df8c['id']+'\x20:\x20'+(_0x21df8c[_0x4f9e8b(0x6b5)]!==void 0x0?_0x21df8c[_0x4f9e8b(0x6b5)]:'undefined')),_0x521c0a[_0x4f9e8b(0x6b5)]=_0x21df8c[_0x4f9e8b(0x6b5)]===null?0x0:_0x21df8c['ephemeralExpiration'],_0xa0b128=!0x0);let _0x18a5ce;_0xa0b128&&(_0x18a5ce=await this[_0x4f9e8b(0x782)]['chat']['updateOne']({'where':{'_id':_0x21df8c['id']}},_0x521c0a,this[_0x4f9e8b(0x21b)][_0x4f9e8b(0x228)])),_0x18a5ce&&q(this[_0x4f9e8b(0x5b1)],_0x4f9e8b(0x7a6),{'chat':_0x18a5ce});}},'chats.delete':async _0xfc15df=>{const _0x4114b5=_0x2ba94e;for(let _0x704f1a of _0xfc15df)if(_0x704f1a[_0x4114b5(0x582)](_0x4114b5(0x1c9))){await this['repository'][_0x4114b5(0x316)][_0x4114b5(0x2d6)]({'where':{'_id':_0x704f1a}},this[_0x4114b5(0x21b)][_0x4114b5(0x228)]);let _0x3ccb6c={'where':{'key':{'remoteJid':_0x704f1a}}};await this[_0x4114b5(0x782)][_0x4114b5(0xab)][_0x4114b5(0x2d6)](_0x3ccb6c,this[_0x4114b5(0x21b)]['wuid']);}else{await this[_0x4114b5(0x782)][_0x4114b5(0x316)][_0x4114b5(0xc6)]({'where':{'_id':_0x704f1a}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x4114b5(0x228)]);let _0x1cc364={'where':{'key':{'remoteJid':_0x704f1a}}};await this[_0x4114b5(0x782)][_0x4114b5(0xab)]['delete'](_0x1cc364,this['instance']['wuid']);}this[_0x4114b5(0x43d)](_0x4114b5(0x6c2),[..._0xfc15df]);}},this['contactHandle']={'contacts.upsert':async(_0x1bfbdd,_0x46c5b0)=>{const _0xd7e0cd=_0x2ba94e;let _0xffb88f=await this[_0xd7e0cd(0x782)][_0xd7e0cd(0x42c)][_0xd7e0cd(0x2ba)]({'where':{}},this['instance'][_0xd7e0cd(0x228)]),_0x485aa1=[];for await(let _0x4a58f6 of _0x1bfbdd)_0xffb88f[_0xd7e0cd(0x2ba)](_0x16537e=>_0x16537e[_0xd7e0cd(0x443)]===_0x4a58f6['id'])||_0x485aa1[_0xd7e0cd(0x723)]({'_id':_0x4a58f6['id'],'pushName':_0x4a58f6?.['name']||_0x4a58f6?.[_0xd7e0cd(0x56e)],'owner':this[_0xd7e0cd(0x21b)]['wuid']});this[_0xd7e0cd(0x43d)](_0xd7e0cd(0x194),_0x485aa1),await this[_0xd7e0cd(0x782)][_0xd7e0cd(0x42c)][_0xd7e0cd(0x69f)](_0x485aa1);},'contacts.update':async(_0x3cbe85,_0x142846)=>{const _0x2b9773=_0x2ba94e;let _0x2f44fc=[];for await(let _0x5a6e73 of _0x3cbe85)_0x2f44fc[_0x2b9773(0x723)]({'_id':_0x5a6e73['id'],'pushName':_0x5a6e73?.[_0x2b9773(0x25b)]??_0x5a6e73?.[_0x2b9773(0x56e)],'owner':this[_0x2b9773(0x21b)][_0x2b9773(0x228)]});this[_0x2b9773(0x43d)](_0x2b9773(0x62c),_0x2f44fc);}},this['messageHandle']={'messaging-history.set':async({messages:_0x9f71bb,chats:_0x815b8b,isLatest:_0x4c8d9d},_0x4c8ef7)=>{const _0x499e5e=_0x2ba94e;if(_0x4c8d9d){let _0x2b26b9=await Promise[_0x499e5e(0x64a)](_0x815b8b[_0x499e5e(0x4b0)](async _0x5ab633=>({'_id':_0x5ab633['id'],'owner':this[_0x499e5e(0x21b)][_0x499e5e(0x228)],'group':_0x5ab633['id'][_0x499e5e(0x582)]('@g.us'),'name':_0x5ab633['name']||_0x5ab633[_0x499e5e(0x6de)]||_0x5ab633[_0x499e5e(0x2e3)]||null,'contactname':null,'lastmsg':_0x5ab633[_0x499e5e(0x2da)]&&_0x5ab633['conversationTimestamp'][_0x499e5e(0x13c)]()[_0x499e5e(0x415)]<0xd?_0x5ab633['conversationTimestamp']*0x3e8:_0x5ab633[_0x499e5e(0x2da)]||null,'archived':_0x5ab633['archived']||!0x1,'unreadcount':_0x5ab633[_0x499e5e(0x5a3)]||0x0,'ephemeralExpiration':_0x5ab633[_0x499e5e(0x6b5)]||0x0,'muteEndTime':_0x5ab633[_0x499e5e(0x61b)]||0x0})));this[_0x499e5e(0x43d)]('chats.set',_0x2b26b9),await this[_0x499e5e(0xe6)](_0x2b26b9,_0x4c8ef7);}let _0x41daa9=[],_0x309340=Date[_0x499e5e(0x331)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x31a0d5]of Object[_0x499e5e(0x3ce)](_0x9f71bb)){if(_0x31a0d5['message']?.[_0x499e5e(0xe5)]||_0x31a0d5[_0x499e5e(0xab)]?.[_0x499e5e(0x4aa)]||!_0x31a0d5['message']||_0x31a0d5[_0x499e5e(0x56d)]['remoteJid']===_0x499e5e(0x484)||(Ls[_0x499e5e(0x339)][_0x499e5e(0x38c)](_0x31a0d5?.[_0x499e5e(0x4e2)])&&(_0x31a0d5[_0x499e5e(0x4e2)]=_0x31a0d5[_0x499e5e(0x4e2)]?.[_0x499e5e(0x43a)]()),_0x31a0d5[_0x499e5e(0x4e2)]&&_0x31a0d5[_0x499e5e(0x4e2)][_0x499e5e(0x13c)]()[_0x499e5e(0x415)]<0xd&&(_0x31a0d5[_0x499e5e(0x4e2)]=_0x31a0d5[_0x499e5e(0x4e2)]*0x3e8),_0x31a0d5['messageTimestamp']<_0x309340))continue;let _0x5a852d=(0x0,w[_0x499e5e(0x354)])(_0x31a0d5['message']),_0x1a5f68=(0x0,w['getContentType'])(_0x5a852d),{message_normalized:_0x54617b}=this['normalizeMessage'](_0x5a852d,_0x1a5f68,null);Object[_0x499e5e(0x77d)](_0x54617b)[_0x499e5e(0x415)]>0x0&&_0x41daa9[_0x499e5e(0x723)]({'_id':_0x31a0d5[_0x499e5e(0x56d)]['id'],'key':_0x31a0d5['key'],'pushName':_0x31a0d5[_0x499e5e(0x419)],'participant':_0x31a0d5[_0x499e5e(0x15b)],'message':_0x5a852d,'messageType':_0x1a5f68,'message_normalized':{'key':_0x31a0d5[_0x499e5e(0x56d)],'pushName':_0x31a0d5[_0x499e5e(0x419)],'messageTimestamp':_0x31a0d5['messageTimestamp'],..._0x54617b},'messageTimestamp':_0x31a0d5[_0x499e5e(0x4e2)],'owner':this[_0x499e5e(0x21b)][_0x499e5e(0x228)]});}_0x4c8ef7['ENABLED']&&_0x41daa9[_0x499e5e(0x415)]>0x0&&(this[_0x499e5e(0x664)][_0x499e5e(0x7bf)](this[_0x499e5e(0x5b1)]+'\x20('+this[_0x499e5e(0x21b)][_0x499e5e(0x228)]+'):\x20'+_0x41daa9['length']+'\x20mensagens\x20de\x20'+this[_0x499e5e(0x21b)][_0x499e5e(0x228)]+'\x20inseridas\x20no\x20banco\x20de\x20dados...'),await this[_0x499e5e(0x782)][_0x499e5e(0xab)][_0x499e5e(0x69f)]([..._0x41daa9],this[_0x499e5e(0x21b)][_0x499e5e(0x228)])),this[_0x499e5e(0x43d)](_0x499e5e(0x775),[..._0x41daa9]),_0x9f71bb=void 0x0;},'messages.upsert':async({messages:_0x5145f8,type:_0x3d1aa7},_0x26b14f)=>{const _0x12bd85=_0x2ba94e;for(let _0x14a65b of _0x5145f8){if(this[_0x12bd85(0x5b7)]?.[_0x12bd85(0x14a)]&&_0x14a65b[_0x12bd85(0x56d)]['remoteJid']['includes']('@g.us')){this['logger'][_0x12bd85(0x7bf)](this['instanceName']+'\x20('+this[_0x12bd85(0x21b)][_0x12bd85(0x228)]+_0x12bd85(0x3b9));return;}if(_0x3d1aa7!==_0x12bd85(0x68b)||!_0x14a65b?.[_0x12bd85(0xab)]||_0x14a65b[_0x12bd85(0xab)]?.[_0x12bd85(0xe5)]||_0x14a65b[_0x12bd85(0xab)][_0x12bd85(0x4aa)]||_0x14a65b[_0x12bd85(0x56d)][_0x12bd85(0x1d0)]==='status@broadcast')return;let _0x5bb326=null,_0x823e9b=null;if(_0x14a65b[_0x12bd85(0x401)]&&_0x14a65b[_0x12bd85(0x401)][0x0]===_0x12bd85(0x2b1)){console['error'](_0x12bd85(0x59b)),Jt[_0x14a65b[_0x12bd85(0x56d)]['id']]=_0x14a65b,this[_0x12bd85(0x38d)](_0x14a65b,0x0);return;}Jt[_0x14a65b[_0x12bd85(0x56d)]['id']]&&(console[_0x12bd85(0x5f8)](_0x12bd85(0x7ac)),delete Jt[_0x14a65b[_0x12bd85(0x56d)]['id']]);try{_0x5bb326=await this[_0x12bd85(0x7d1)](_0x14a65b),_0x823e9b=_0x5bb326?_0x5bb326[_0x12bd85(0x258)](','):null;}catch(_0x1d8562){this[_0x12bd85(0x664)]['verbose'](this[_0x12bd85(0x5b1)]+'\x20('+this[_0x12bd85(0x21b)][_0x12bd85(0x228)]+_0x12bd85(0x46a)+(_0x1d8562 instanceof Error?_0x1d8562[_0x12bd85(0xab)]:JSON[_0x12bd85(0x52f)](_0x1d8562,null,0x2))),_0x823e9b=_0x12bd85(0x3b3);}this['client'][_0x12bd85(0x6cf)](_0x12bd85(0x65e)),Ls[_0x12bd85(0x339)]['isLong'](_0x14a65b[_0x12bd85(0x4e2)])&&(_0x14a65b[_0x12bd85(0x4e2)]=_0x14a65b[_0x12bd85(0x4e2)]?.[_0x12bd85(0x43a)]()),_0x14a65b[_0x12bd85(0x4e2)]&&_0x14a65b['messageTimestamp'][_0x12bd85(0x13c)]()[_0x12bd85(0x415)]<0xd&&(_0x14a65b[_0x12bd85(0x4e2)]=_0x14a65b[_0x12bd85(0x4e2)]*0x3e8);let _0x2a1a5f=_0x14a65b[_0x12bd85(0xab)],_0xe3df6e=(0x0,w[_0x12bd85(0x354)])(_0x2a1a5f),_0x3684b9=(0x0,w[_0x12bd85(0x407)])(_0xe3df6e),{messageContent:_0x5b883e,message_normalized:_0x2e961d}=this[_0x12bd85(0x1d1)](_0xe3df6e,_0x3684b9,_0x823e9b);_0x3684b9===_0x12bd85(0xe5)&&_0x5b883e?.[_0x12bd85(0x1e5)]&&(_0x3684b9=_0x12bd85(0x1e5));let _0x3f0657,_0x7c241e=_0x14a65b[_0x12bd85(0x56d)]['remoteJid'][_0x12bd85(0x582)]('@g.us');if(_0x14a65b[_0x12bd85(0x56d)][_0x12bd85(0x655)])_0x3f0657=this[_0x12bd85(0x21b)][_0x12bd85(0x4bf)];else{let _0x80f4f4=_0x7c241e?_0x14a65b[_0x12bd85(0x56d)][_0x12bd85(0x15b)]:_0x14a65b['key']['remoteJid'];_0x3f0657=(await this[_0x12bd85(0x193)](_0x80f4f4,_0x14a65b[_0x12bd85(0x419)],!0x1))[_0x12bd85(0x684)][_0x12bd85(0x79a)];}let _0x18bb7c={'_id':_0x14a65b[_0x12bd85(0x56d)]['id'],'key':_0x14a65b['key'],'isGroup':_0x7c241e,'profilePictureUrl':_0x3f0657,'pushName':_0x14a65b['pushName'],'message':_0xe3df6e,'messageType':_0x3684b9,'message_normalized':{'key':_0x14a65b[_0x12bd85(0x56d)],'pushName':_0x14a65b[_0x12bd85(0x419)],'messageTimestamp':_0x14a65b[_0x12bd85(0x4e2)],'source':(0x0,w[_0x12bd85(0x6ca)])(_0x14a65b[_0x12bd85(0x56d)]['id']),..._0x2e961d},'messageTimestamp':_0x14a65b[_0x12bd85(0x4e2)],'owner':this[_0x12bd85(0x21b)][_0x12bd85(0x228)],'source':(0x0,w[_0x12bd85(0x6ca)])(_0x14a65b['key']['id']),'expiration':_0x5b883e?.[_0x12bd85(0x219)]?.[_0x12bd85(0x745)]||0x0};_0x5b883e||(this[_0x12bd85(0x664)][_0x12bd85(0x5f8)](_0x12bd85(0x6b3)),this[_0x12bd85(0x664)]['error'](_0x18bb7c)),this[_0x12bd85(0x664)][_0x12bd85(0x18d)](this[_0x12bd85(0x5b1)]+'\x20('+this[_0x12bd85(0x21b)][_0x12bd85(0x228)]+_0x12bd85(0x46a)+(_0x18bb7c[_0x12bd85(0x56d)]?.[_0x12bd85(0x655)]?'enviado\x20para':'recebido\x20de')+'\x20['+_0x18bb7c[_0x12bd85(0x56d)]?.[_0x12bd85(0x1d0)][_0x12bd85(0x470)](_0x12bd85(0x628),'')+_0x12bd85(0x1eb)+_0x18bb7c[_0x12bd85(0x3e7)]+')'),_0x18bb7c[_0x12bd85(0x575)]?.['text']&&this['logger'][_0x12bd85(0x18d)](_0x14a65b[_0x12bd85(0x56d)]['id']+':\x20'+_0x18bb7c[_0x12bd85(0x575)]?.[_0x12bd85(0x6ba)]),await this[_0x12bd85(0x782)][_0x12bd85(0xab)]['insert']([_0x18bb7c],this[_0x12bd85(0x21b)][_0x12bd85(0x228)]),this[_0x12bd85(0x43d)](_0x12bd85(0x78e),_0x18bb7c),q(this[_0x12bd85(0x5b1)],_0x12bd85(0x50b),{'message':_0x18bb7c}),_0x14a65b[_0x12bd85(0x56d)][_0x12bd85(0x1d0)]!=='status@broadcast'&&await this[_0x12bd85(0x1b9)](_0x26b14f,_0x18bb7c,'MESSAGES_UPSERT');}},'messages.update':async(_0x51b617,_0x482189)=>{const _0x5a36e8=_0x2ba94e;let _0x1d070f={0x0:'ERROR',0x1:_0x5a36e8(0x46b),0x2:'SERVER_ACK',0x3:'DELIVERY_ACK',0x4:_0x5a36e8(0x4ce),0x5:_0x5a36e8(0xd8)};for await(let {key:_0xc011a3,update:_0x58c809}of _0x51b617){if(this['localWebhook']?.[_0x5a36e8(0x14a)]&&_0xc011a3[_0x5a36e8(0x1d0)][_0x5a36e8(0x795)]('@g.us')){this['logger'][_0x5a36e8(0x7bf)](this[_0x5a36e8(0x5b1)]+'\x20('+this[_0x5a36e8(0x21b)][_0x5a36e8(0x228)]+_0x5a36e8(0x277));return;}if(_0xc011a3[_0x5a36e8(0x1d0)]!=='status@broadcast'){let _0x28ba98=Date[_0x5a36e8(0x331)](),_0x2f31ee;_0x58c809[_0x5a36e8(0xab)]===null&&_0x58c809[_0x5a36e8(0x7ae)]===void 0x0?_0x2f31ee='DELETED':_0x2f31ee=_0x1d070f[_0x58c809[_0x5a36e8(0x7ae)]];let _0xdeba18=_0xc011a3[_0x5a36e8(0x1d0)][_0x5a36e8(0x470)](/:\d{1,2}@/g,'@'),_0x30f919={..._0xc011a3,'remoteJid':_0xdeba18,'status':_0x2f31ee,'datetime':_0x28ba98,'owner':this[_0x5a36e8(0x21b)][_0x5a36e8(0x228)]};this['sendDataWebhook'](_0x5a36e8(0x61f),_0x30f919),await this[_0x5a36e8(0x35c)](_0xc011a3,_0x30f919);}}},'labels.association':async({type:_0x1c42f7,association:_0x3424b6})=>{const _0x1db57d=_0x2ba94e;if(_0x3424b6[_0x1db57d(0x311)]===_0x1db57d(0x5c7)){let _0x8a86ca,_0x268c4b=0x0;for(;!_0x8a86ca&&_0x268c4b<this[_0x1db57d(0x111)];)_0x8a86ca=await this[_0x1db57d(0x782)][_0x1db57d(0x316)][_0x1db57d(0xb1)]({'where':{'_id':_0x3424b6[_0x1db57d(0x583)]}},this['instance'][_0x1db57d(0x228)]),_0x8a86ca||(_0x268c4b++,this[_0x1db57d(0x664)][_0x1db57d(0x363)](this[_0x1db57d(0x5b1)]+'\x20('+this[_0x1db57d(0x21b)][_0x1db57d(0x228)]+_0x1db57d(0x785)+_0x3424b6['chatId']+_0x1db57d(0x35b)+this['delayChatLabel_RETRY_DELAY_MS']+_0x1db57d(0x74e)+_0x268c4b+'/'+this[_0x1db57d(0x111)]+')'),await this['delayChatLabel'](this[_0x1db57d(0x7f5)]));if(!_0x8a86ca){this['logger']['error'](_0x1db57d(0x7e1)+_0x3424b6[_0x1db57d(0x583)]+_0x1db57d(0x41c)+this[_0x1db57d(0x111)]+_0x1db57d(0x727));return;}switch(_0x1c42f7){case'add':console[_0x1db57d(0x18d)](_0x3424b6),await this[_0x1db57d(0x782)][_0x1db57d(0x316)][_0x1db57d(0xc6)]({'where':{'_id':_0x3424b6[_0x1db57d(0x583)]}},{'leadInfo.etiquetas':_0x3424b6[_0x1db57d(0x35f)]},this[_0x1db57d(0x21b)]['wuid'],void 0x0,_0x1db57d(0x2be));break;case'remove':console[_0x1db57d(0x18d)](_0x3424b6),await this['repository'][_0x1db57d(0x316)]['updateOne']({'where':{'_id':_0x3424b6[_0x1db57d(0x583)]}},{'leadInfo.etiquetas':_0x3424b6[_0x1db57d(0x35f)]},this[_0x1db57d(0x21b)][_0x1db57d(0x228)],void 0x0,_0x1db57d(0x338));break;default:this[_0x1db57d(0x664)][_0x1db57d(0x5f8)](_0x1db57d(0x284)+_0x1c42f7+']');}}},'labels.edit':async _0x31abb5=>{const _0x3bc502=_0x2ba94e;if(!_0x31abb5||!_0x31abb5['id']){this[_0x3bc502(0x664)][_0x3bc502(0x5f8)](_0x3bc502(0x55e));return;}if(!_0x31abb5[_0x3bc502(0x246)]){let _0x252d59=[_0x3bc502(0x312),_0x3bc502(0x668),_0x3bc502(0x716),_0x3bc502(0x689),_0x3bc502(0x1ed),'#56ccb4','#fe9dfe',_0x3bc502(0x372),_0x3bc502(0x518),_0x3bc502(0x47a),_0x3bc502(0xb4),_0x3bc502(0x3e9),'#92ceac',_0x3bc502(0x320),_0x3bc502(0x589),_0x3bc502(0x7b5),'#ffae04',_0x3bc502(0x588),'#9ba6ff','#9568cf'],_0x196f09;typeof _0x31abb5['color']==_0x3bc502(0x9a)&&_0x31abb5[_0x3bc502(0x3df)]>=0x0&&_0x31abb5[_0x3bc502(0x3df)]<_0x252d59[_0x3bc502(0x415)]?_0x196f09=_0x252d59[_0x31abb5['color']]:(this[_0x3bc502(0x664)][_0x3bc502(0x5f8)](_0x3bc502(0x529)+_0x31abb5[_0x3bc502(0x3df)]),_0x196f09='#000000');let _0x387fb4={'_id':_0x31abb5['id'],'colorHex':_0x196f09,'color':_0x31abb5?.['color'],'name':_0x31abb5?.[_0x3bc502(0x25b)],'owner':this[_0x3bc502(0x21b)]['wuid']};await this[_0x3bc502(0x782)]['label'][_0x3bc502(0xc6)]({'where':{'_id':_0x31abb5['id']}},_0x387fb4,this[_0x3bc502(0x21b)][_0x3bc502(0x228)]),this[_0x3bc502(0x664)][_0x3bc502(0x363)](this[_0x3bc502(0x5b1)]+'\x20('+this['instance'][_0x3bc502(0x228)]+_0x3bc502(0x45e)+_0x31abb5);}_0x31abb5[_0x3bc502(0x246)]&&(await this[_0x3bc502(0x782)]['label'][_0x3bc502(0x2d6)]({'where':{'_id':_0x31abb5['id']}},this[_0x3bc502(0x21b)]['wuid']),this[_0x3bc502(0x664)][_0x3bc502(0x363)](_0x3bc502(0x5f3)+_0x31abb5['id']));}},this[_0x2ba94e(0x5c0)]={'groups.upsert':async _0x3c688c=>{const _0x1923e5=_0x2ba94e;this[_0x1923e5(0x5b7)]?.[_0x1923e5(0x14a)]||this[_0x1923e5(0x43d)](_0x1923e5(0x5fe),_0x3c688c);for(let _0x538f42 of _0x3c688c)await this['updateGroupWebhook'](_0x538f42);},'groups.update':async _0x1b7bef=>{const _0x2141fd=_0x2ba94e;this[_0x2141fd(0x5b7)]?.['groups_ignore']||this['sendDataWebhook'](_0x2141fd(0x5c5),_0x1b7bef);for(let _0x1edc55 of _0x1b7bef)await this['updateGroupWebhook'](_0x1edc55);},'group-participants.update':async _0x223654=>{const _0x529ab8=_0x2ba94e;this[_0x529ab8(0x5b7)]?.[_0x529ab8(0x14a)]||this['sendDataWebhook'](_0x529ab8(0x24d),_0x223654),await this[_0x529ab8(0x4f0)](_0x223654);}},this['delayChatLabel_MAX_RETRIES']=0x5,this[_0x2ba94e(0x7f5)]=0x1388,this[_0x2ba94e(0x591)]=0x0,this[_0x2ba94e(0x7d1)]=async _0x415658=>{const _0x3b5c1c=_0x2ba94e;if(_0x415658[_0x3b5c1c(0xab)]?.[_0x3b5c1c(0x5a8)]){let _0x137d34=await this['getMessage'](_0x415658[_0x3b5c1c(0xab)][_0x3b5c1c(0x5a8)][_0x3b5c1c(0x163)],!0x0);if(_0x137d34){let _0x16a1b5=_0x137d34[_0x3b5c1c(0x56d)][_0x3b5c1c(0x655)]?this[_0x3b5c1c(0x21b)]['wuid']+_0x3b5c1c(0x628):_0x137d34[_0x3b5c1c(0x56d)][_0x3b5c1c(0x15b)]||_0x137d34[_0x3b5c1c(0x56d)]['remoteJid'],_0x4e97f3=_0x137d34[_0x3b5c1c(0x56d)]['id'],_0x18292c=_0x137d34[_0x3b5c1c(0xab)],_0x37d7a7=Buffer[_0x3b5c1c(0x179)](_0x18292c[_0x3b5c1c(0x3af)]['messageSecret']['toString'](_0x3b5c1c(0x360)),_0x3b5c1c(0x360)),_0x3699df=(0x0,w[_0x3b5c1c(0x76d)])(_0x415658[_0x3b5c1c(0xab)]['pollUpdateMessage'][_0x3b5c1c(0x7a0)],{'pollCreatorJid':_0x16a1b5,'pollMsgId':_0x4e97f3,'pollEncKey':_0x37d7a7,'voterJid':_0x415658[_0x3b5c1c(0x56d)][_0x3b5c1c(0x655)]?this[_0x3b5c1c(0x21b)][_0x3b5c1c(0x228)]+_0x3b5c1c(0x628):_0x415658[_0x3b5c1c(0x56d)][_0x3b5c1c(0x1d0)][_0x3b5c1c(0x582)]('g.us')?_0x415658[_0x3b5c1c(0x56d)][_0x3b5c1c(0x15b)]:_0x415658[_0x3b5c1c(0x56d)][_0x3b5c1c(0x1d0)]}),_0x415137=[],_0x24c394=_0x3699df[_0x3b5c1c(0x770)][_0x3b5c1c(0x4b0)](_0x5b3051=>Buffer[_0x3b5c1c(0x179)](_0x5b3051)[_0x3b5c1c(0x13c)](_0x3b5c1c(0x360)));for(let {optionName:_0x33b683}of _0x18292c['pollCreationMessage']?.[_0x3b5c1c(0x467)]||_0x18292c['pollCreationMessageV3']?.['options']||_0x18292c['pollCreationMessageV2']?.[_0x3b5c1c(0x467)])_0x24c394[_0x3b5c1c(0x58e)]((0x0,w[_0x3b5c1c(0x2cd)])(Buffer['from'](_0x33b683))[_0x3b5c1c(0x13c)](_0x3b5c1c(0x360)))>-0x1&&_0x415137[_0x3b5c1c(0x723)](_0x33b683);return _0x415137;}}return null;},this[_0x2ba94e(0x1d1)]=(_0x39b6f3,_0x3ec0a5,_0x215ba0)=>{const _0x214df8=_0x2ba94e;try{let _0x285e0f=_0x39b6f3?(0x0,w[_0x214df8(0x32d)])(_0x39b6f3)[_0x3ec0a5]:void 0x0,_0x372a44={},_0x587651=null,_0x3c053d=null,_0x216baa=null;_0x3ec0a5===_0x214df8(0xe5)&&_0x285e0f?.[_0x214df8(0x1e5)]&&(_0x3ec0a5=(0x0,w[_0x214df8(0x407)])(_0x285e0f[_0x214df8(0x1e5)]),_0x587651=_0x39b6f3['protocolMessage']['key']['id'],_0x285e0f=_0x39b6f3[_0x214df8(0xe5)]['editedMessage'][_0x3ec0a5]),_0x39b6f3[_0x3ec0a5]?.[_0x214df8(0x219)]?.[_0x214df8(0x45d)]&&_0x39b6f3[_0x3ec0a5]?.[_0x214df8(0x219)]?.['quotedMessage']&&(_0x3c053d=_0x39b6f3[_0x3ec0a5]['contextInfo'][_0x214df8(0x45d)]),_0x39b6f3[_0x214df8(0x17f)]&&(_0x216baa=_0x39b6f3[_0x214df8(0x17f)][_0x214df8(0x56d)]['id']);let _0x594c8f;if(_0x285e0f&&typeof _0x285e0f=='object'&&_0x214df8(0x163)in _0x285e0f&&({pollCreationMessageKey:_0x594c8f}=_0x285e0f),_0x3ec0a5===_0x214df8(0x532)||_0x3ec0a5===_0x214df8(0x554)||_0x3ec0a5===_0x214df8(0x568)){let _0xca4c1a=_0x285e0f[_0x214df8(0x467)]['map'](_0x5a2d0b=>_0x5a2d0b[_0x214df8(0x63a)])['join']('|');_0x372a44[_0x214df8(0x260)]=_0xca4c1a;}let _0xe2ef9b='';if(_0x285e0f&&(_0xe2ef9b+=_0x285e0f['name']?_0x285e0f['name']:'',_0xe2ef9b+=_0x285e0f['caption']?'\x20'+_0x285e0f[_0x214df8(0x6a3)]:'',_0xe2ef9b+=_0x285e0f[_0x214df8(0x4ec)]?'\x20'+_0x285e0f[_0x214df8(0x4ec)]:'',_0xe2ef9b+=_0x285e0f['displayName']?'\x20'+_0x285e0f['displayName']:''),_0x3ec0a5===_0x214df8(0x1a4)){_0xe2ef9b=(_0x285e0f[_0x214df8(0x754)]||'')+'\x0a'+(_0x285e0f[_0x214df8(0x205)]||'')+'\x0a'+(_0x285e0f[_0x214df8(0x348)]||'');let _0x230db6=this[_0x214df8(0x704)](_0x285e0f[_0x214df8(0x7d3)]);_0x372a44['convertedOptions']=_0x230db6;}if(_0x3ec0a5==='listResponseMessage'&&(_0x215ba0=_0x285e0f[_0x214df8(0x754)]),_0x285e0f&&_0x285e0f['vcard']){let _0x3991f6=this[_0x214df8(0x786)](JSON[_0x214df8(0x52f)](_0x285e0f[_0x214df8(0x651)],null,0x2));_0xe2ef9b=_0xe2ef9b+'\x0a'+_0x3991f6;}if(_0x285e0f){let {sections:_0x57e1cb,listType:_0x190072,displayName:_0x504087,vcard:_0x5673de,contactVcard:_0x5eec82,name:_0x58ee7c,caption:_0x10d950,conversation:_0x302b03,pollCreationMessageKey:_0x5da1e8,footerText:_0x416684,contentText:_0x527f54,pageCount:_0x2264a2,headerType:_0x24f1c9,isAvatar:_0xf19469,isAnimated:_0x2a315c,fallbackLc:_0x55a221,fallbackLg:_0x2447b1,namespace:_0x5099be,elementName:_0x563338,localizableParams:_0x13ba6e,viewOnce:_0x205445,height:_0x568d02,width:_0x51b6b8,key:_0xcc101b,firstScanLength:_0x4a0eee,firstScanSidecar:_0x117371,gifPlayback:_0x448faf,gifAttribution:_0x188026,midQualityFileSha256:_0x17f141,scansSidecar:_0x431974,streamingSidecar:_0x2da3ec,thumbnailHeight:_0x317d6e,thumbnailWidth:_0x4aea99,thumbnailEncSha256:_0x907406,thumbnailDirectPath:_0x18f419,canonicalUrl:_0x2352f7,matchedText:_0x58c7ce,previewType:_0x292414,thumbnailSha256:_0x379e75,deviceListMetadataVersion:_0x535c31,inviteLinkGroupTypeV2:_0x20c120,interactiveAnnotations:_0x446ac6,scanLengths:_0x201fc1,jpegThumbnail:_0xe58e5a,url:_0x515daf,mediaKeyTimestamp:_0x461319,waveform:_0x2a53f4,stickerSentTs:_0x5e8631,firstFrameLength:_0x161c3,fileEncSha256:_0x278aa3,contextInfo:_0x4db32f,firstFrameSidecar:_0x4497af,directPath:_0x2dab9b,fileSha256:_0x319250,mediaKey:_0x565dd5,senderTimestampMs:_0x274b16,..._0x5ea35d}=_0x285e0f;(_0x3ec0a5===_0x214df8(0x1a4)||_0x3ec0a5==='listResponseMessage')&&(delete _0x5ea35d[_0x214df8(0x754)],delete _0x5ea35d[_0x214df8(0x205)]),typeof _0x285e0f==_0x214df8(0x4c4)?_0x372a44={'text':_0x285e0f,'type':_0x3ec0a5||_0x214df8(0x4ec),..._0x587651&&{'edited':_0x587651},..._0x3c053d&&{'quoted':_0x3c053d},..._0x216baa&&{'reaction':_0x216baa}}:_0x372a44={'text':_0xe2ef9b,..._0x5ea35d,..._0x3ec0a5==='pollUpdateMessage'?{'poll_id':_0x285e0f['pollCreationMessageKey']['id'],'quoted':_0x285e0f['pollCreationMessageKey']['id'],'vote':_0x215ba0}:{},..._0x3ec0a5==='listResponseMessage'?{'vote':_0x215ba0}:{},'type':_0x3ec0a5,..._0x587651&&{'edited':_0x587651},..._0x3c053d&&{'quoted':_0x3c053d},..._0x216baa&&{'reaction':_0x216baa},...(_0x3ec0a5===_0x214df8(0x532)||_0x3ec0a5===_0x214df8(0x554)||_0x3ec0a5==='pollCreationMessageV3'||_0x3ec0a5===_0x214df8(0x1a4))&&{'convertedOptions':_0x372a44[_0x214df8(0x260)]}};}return{'messageType':_0x3ec0a5,'messageContent':_0x285e0f,'message_normalized':_0x372a44};}catch(_0x8146cd){return this['logger'][_0x214df8(0x5f8)]('Erro\x20ao\x20normalizar\x20a\x20mensagem:'+_0x8146cd),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this[_0x2ba94e(0x23d)]=null,this[_0x2ba94e(0x67c)]=[],(this['cleanStore'](),this[_0x2ba94e(0x21b)][_0x2ba94e(0x41b)]={'count':0x0},this[_0x2ba94e(0x21b)][_0x2ba94e(0x307)]={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}set[a0_0x4a47c0(0x5b1)](_0x42454b){const _0x1feef2=a0_0x4a47c0;if(!_0x42454b){this[_0x1feef2(0x21b)][_0x1feef2(0x25b)]=(0x0,_i['v4'])();return;}this['instance']['name']=_0x42454b,this[_0x1feef2(0x43d)]('status.instance',{'instance':this['instance'][_0x1feef2(0x25b)],'status':_0x1feef2(0x69c)});}get[a0_0x4a47c0(0x5b1)](){const _0x13d991=a0_0x4a47c0;return this['instance'][_0x13d991(0x25b)];}get[a0_0x4a47c0(0x228)](){const _0x41d937=a0_0x4a47c0;return this[_0x41d937(0x21b)][_0x41d937(0x228)];}async[a0_0x4a47c0(0x4ee)](){const _0xd31ded=a0_0x4a47c0;let _0x55f849=this[_0xd31ded(0x29a)][_0xd31ded(0x214)]?.[_0xd31ded(0x25b)]??this[_0xd31ded(0x29a)][_0xd31ded(0x214)]?.[_0xd31ded(0x56e)];if(!_0x55f849){if(this[_0xd31ded(0x45a)]['get'](_0xd31ded(0xf4))[_0xd31ded(0x99)]){let _0x59bb0b=await R['getClient']()['db'](this[_0xd31ded(0x45a)][_0xd31ded(0x58b)](_0xd31ded(0xf4))[_0xd31ded(0x75c)]['DB_PREFIX_NAME']+'-instances')[_0xd31ded(0x2f0)](this[_0xd31ded(0x5b1)])['findOne']({'_id':_0xd31ded(0x440)});if(_0x59bb0b){let _0x519ffd=JSON['parse'](JSON[_0xd31ded(0x52f)](_0x59bb0b),w['BufferJSON'][_0xd31ded(0x413)]);_0x55f849=_0x519ffd['me']?.['name']||_0x519ffd['me']?.['verifiedName'];}}else{if((0x0,Fe[_0xd31ded(0x7c5)])((0x0,j[_0xd31ded(0x258)])(Me,this[_0xd31ded(0x5b1)],'creds.json'))){let _0x4f07c1=JSON[_0xd31ded(0x4e6)]((0x0,Fe[_0xd31ded(0x402)])((0x0,j[_0xd31ded(0x258)])(Me,this['instanceName'],'creds.json'),{'encoding':_0xd31ded(0x51c)}));_0x55f849=_0x4f07c1['me']?.[_0xd31ded(0x25b)]||_0x4f07c1['me']?.[_0xd31ded(0x56e)];}}}return _0x55f849;}get[a0_0x4a47c0(0x4bf)](){const _0x463612=a0_0x4a47c0;return this[_0x463612(0x21b)][_0x463612(0x4bf)];}get[a0_0x4a47c0(0x181)](){const _0x4000e5=a0_0x4a47c0;return this['instance'][_0x4000e5(0x41b)]?.[_0x4000e5(0x720)]?{'pairingCode':this['instance'][_0x4000e5(0x41b)]?.['pairingCode']}:{'code':this[_0x4000e5(0x21b)][_0x4000e5(0x41b)]?.['code'],'base64':this[_0x4000e5(0x21b)][_0x4000e5(0x41b)]?.['base64']};}async[a0_0x4a47c0(0x166)](){const _0x1d6e0c=a0_0x4a47c0;let _0x11e9d3=await this[_0x1d6e0c(0x782)]['webhook']['find'](this['instanceName']);this['localWebhook'][_0x1d6e0c(0x3d7)]=_0x11e9d3?.[_0x1d6e0c(0x3d7)],this[_0x1d6e0c(0x5b7)][_0x1d6e0c(0x231)]=_0x11e9d3?.['enabled'],this[_0x1d6e0c(0x5b7)]['local_map']=_0x11e9d3?.['local_map'],this['localWebhook'][_0x1d6e0c(0x2d8)]=_0x11e9d3?.['STATUS_INSTANCE'],this['localWebhook'][_0x1d6e0c(0x7c8)]=_0x11e9d3?.[_0x1d6e0c(0x7c8)],this[_0x1d6e0c(0x5b7)][_0x1d6e0c(0x172)]=_0x11e9d3?.['SEND_MESSAGE'],this[_0x1d6e0c(0x5b7)][_0x1d6e0c(0x1f7)]=_0x11e9d3?.[_0x1d6e0c(0x1f7)],this[_0x1d6e0c(0x5b7)][_0x1d6e0c(0x2b4)]=_0x11e9d3?.[_0x1d6e0c(0x2b4)],this[_0x1d6e0c(0x5b7)][_0x1d6e0c(0x3fa)]=_0x11e9d3?.[_0x1d6e0c(0x3fa)],this['localWebhook'][_0x1d6e0c(0x3dd)]=_0x11e9d3?.[_0x1d6e0c(0x3dd)],this['localWebhook'][_0x1d6e0c(0x64e)]=_0x11e9d3?.[_0x1d6e0c(0x64e)],this[_0x1d6e0c(0x5b7)][_0x1d6e0c(0x3f8)]=_0x11e9d3?.['CHATS_SET'],this['localWebhook'][_0x1d6e0c(0x6d8)]=_0x11e9d3?.[_0x1d6e0c(0x6d8)],this[_0x1d6e0c(0x5b7)][_0x1d6e0c(0x5d7)]=_0x11e9d3?.['CHATS_UPDATE'],this[_0x1d6e0c(0x5b7)][_0x1d6e0c(0x1aa)]=_0x11e9d3?.[_0x1d6e0c(0x1aa)],this['localWebhook']['CONTACTS_SET']=_0x11e9d3?.[_0x1d6e0c(0x37f)],this[_0x1d6e0c(0x5b7)][_0x1d6e0c(0x93)]=_0x11e9d3?.[_0x1d6e0c(0x93)],this[_0x1d6e0c(0x5b7)][_0x1d6e0c(0x1e1)]=_0x11e9d3?.[_0x1d6e0c(0x1e1)],this['localWebhook'][_0x1d6e0c(0x5e8)]=_0x11e9d3?.[_0x1d6e0c(0x5e8)],this[_0x1d6e0c(0x5b7)][_0x1d6e0c(0x78c)]=_0x11e9d3?.[_0x1d6e0c(0x78c)],this['localWebhook'][_0x1d6e0c(0x658)]=_0x11e9d3?.[_0x1d6e0c(0x658)],this['localWebhook'][_0x1d6e0c(0x14a)]=_0x11e9d3?.[_0x1d6e0c(0x14a)];}async[a0_0x4a47c0(0x40c)](_0x1d83a1){const _0xa6f82b=a0_0x4a47c0;let _0x1638e4=[_0xa6f82b(0x443),_0xa6f82b(0x3d7),'enabled',_0xa6f82b(0x5d1),'STATUS_INSTANCE',_0xa6f82b(0x7c8),_0xa6f82b(0x2b4),'MESSAGES_UPSERT',_0xa6f82b(0x172),'GROUPS_UPSERT',_0xa6f82b(0x3dd),_0xa6f82b(0x64e),'CHATS_SET',_0xa6f82b(0x6d8),_0xa6f82b(0x5d7),_0xa6f82b(0x1aa),_0xa6f82b(0x37f),_0xa6f82b(0x93),_0xa6f82b(0x1e1),'PRESENCE_UPDATE','MESSAGES_SET',_0xa6f82b(0x658),'groups_ignore'],_0x10c16e={};return _0x1638e4[_0xa6f82b(0x9e)](_0x30309c=>{_0x1d83a1[_0x30309c]!==void 0x0&&(_0x10c16e[_0x30309c]=_0x1d83a1[_0x30309c]);}),_0x10c16e['url']&&(_0x10c16e[_0xa6f82b(0x3d7)]=_0x10c16e[_0xa6f82b(0x3d7)][_0xa6f82b(0x3a3)]()),await this[_0xa6f82b(0x782)][_0xa6f82b(0x63e)][_0xa6f82b(0x6e2)](_0x10c16e,this['instanceName']),Object[_0xa6f82b(0x337)](this[_0xa6f82b(0x5b7)],_0x10c16e),await this['repository'][_0xa6f82b(0x63e)][_0xa6f82b(0x2ba)](this[_0xa6f82b(0x5b1)]);}async[a0_0x4a47c0(0x2d1)](){const _0x1cb725=a0_0x4a47c0;return await this[_0x1cb725(0x782)]['webhook'][_0x1cb725(0x2ba)](this['instanceName']);}async[a0_0x4a47c0(0x43d)](_0x19579e,_0x34cdc7){const _0x4ed0e7=a0_0x4a47c0;let _0x589080=_0x19579e[_0x4ed0e7(0x470)](/[\.-]/gm,'_')['toUpperCase'](),_0x1fcfe6=this[_0x4ed0e7(0x5b7)][_0x4ed0e7(0x231)]&&(0x0,L[_0x4ed0e7(0x7a7)])(this[_0x4ed0e7(0x5b7)][_0x4ed0e7(0x3d7)])?this[_0x4ed0e7(0x5b7)][_0x4ed0e7(0x3d7)]+(this[_0x4ed0e7(0x5b7)][_0x4ed0e7(0x5d1)]?this[_0x4ed0e7(0x288)][_0x19579e]:''):null,_0xe0ca90=this['localWebhook'][_0x589080],_0x3b4cea=me&&me[_0x4ed0e7(0x231)]&&(0x0,L[_0x4ed0e7(0x7a7)])(me[_0x4ed0e7(0x3d7)])?me[_0x4ed0e7(0x3d7)]+(me['local_map']?this[_0x4ed0e7(0x288)][_0x19579e]:''):null,_0x33ebd2=me?me[_0x589080]:null;if(_0xe0ca90&&_0x1fcfe6)try{await te[_0x4ed0e7(0x339)][_0x4ed0e7(0x6e2)]({'baseURL':_0x1fcfe6})[_0x4ed0e7(0x790)]('',{'event':_0x19579e,'instance':this['instance'][_0x4ed0e7(0x25b)],'apikey':this[_0x4ed0e7(0x21b)][_0x4ed0e7(0x20a)],'data':_0x34cdc7}),this[_0x4ed0e7(0x664)][_0x4ed0e7(0x18d)](this[_0x4ed0e7(0x5b1)]+'\x20('+this[_0x4ed0e7(0x21b)][_0x4ed0e7(0x228)]+_0x4ed0e7(0x567)+_0x19579e+':\x20'+_0x1fcfe6);}catch{this[_0x4ed0e7(0x664)][_0x4ed0e7(0x5f8)](this[_0x4ed0e7(0x5b1)]+'\x20('+this[_0x4ed0e7(0x21b)][_0x4ed0e7(0x228)]+_0x4ed0e7(0x139)+_0x19579e+':\x20'+_0x1fcfe6);}if(_0x33ebd2&&_0x3b4cea)try{await te[_0x4ed0e7(0x339)][_0x4ed0e7(0x6e2)]({'baseURL':_0x3b4cea})[_0x4ed0e7(0x790)]('',{'event':_0x19579e,'instance':this[_0x4ed0e7(0x21b)][_0x4ed0e7(0x25b)],'apikey':this['instance'][_0x4ed0e7(0x20a)],'data':_0x34cdc7}),this[_0x4ed0e7(0x664)][_0x4ed0e7(0x18d)](this[_0x4ed0e7(0x5b1)]+'\x20('+this['instance'][_0x4ed0e7(0x228)]+_0x4ed0e7(0x604)+_0x19579e+':\x20'+_0x3b4cea);}catch{this[_0x4ed0e7(0x664)]['error'](this[_0x4ed0e7(0x5b1)]+'\x20('+this['instance']['wuid']+_0x4ed0e7(0x47b)+_0x19579e+':\x20'+_0x3b4cea);}}async['connectionUpdate']({qr:_0x47c8b8,connection:_0x4aa178,lastDisconnect:_0x5643bf}){const _0x5833d2=a0_0x4a47c0;if(_0x47c8b8){if(this['instance']['qrcode']['count']===Fo)return this[_0x5833d2(0x43d)]('qrcode.updated',{'message':_0x5833d2(0x229),'statusCode':w[_0x5833d2(0xf7)][_0x5833d2(0xc3)]}),this[_0x5833d2(0x631)]={'state':'refused','statusReason':w[_0x5833d2(0xf7)][_0x5833d2(0x4a4)]},this[_0x5833d2(0x43d)](_0x5833d2(0x1b0),{'instance':this['instance'][_0x5833d2(0x25b)],...this[_0x5833d2(0x631)]}),this['sendDataWebhook'](_0x5833d2(0x494),{'instance':this[_0x5833d2(0x21b)][_0x5833d2(0x25b)],'status':_0x5833d2(0x72f)}),this[_0x5833d2(0x782)][_0x5833d2(0x28a)][_0x5833d2(0x2d6)](this['instance'][_0x5833d2(0x25b)]),this['endSession']=!0x0,re[_0x5833d2(0x3c7)](K,this[_0x5833d2(0x21b)]['name']),this[_0x5833d2(0x209)][_0x5833d2(0x68e)](_0x5833d2(0x426),this[_0x5833d2(0x21b)][_0x5833d2(0x25b)]);this[_0x5833d2(0x21b)]['qrcode'][_0x5833d2(0x54e)]++;let _0xd87404={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x5833d2(0x5e2),'dark':'#000000'}};xi['default'][_0x5833d2(0xc0)](_0x47c8b8,_0xd87404,(_0x406278,_0x2bb7c8)=>{const _0x582394=_0x5833d2;if(_0x406278){this[_0x582394(0x664)][_0x582394(0x5f8)](this[_0x582394(0x5b1)]+'\x20('+this[_0x582394(0x21b)][_0x582394(0x228)]+_0x582394(0x4f2)+(_0x406278 instanceof Error?_0x406278[_0x582394(0xab)]:JSON[_0x582394(0x52f)](_0x406278,null,0x2)));return;}this[_0x582394(0x21b)][_0x582394(0x41b)]['base64']=_0x2bb7c8,this['instance'][_0x582394(0x41b)][_0x582394(0x1f1)]=_0x47c8b8,!this[_0x582394(0x6c6)]&&this[_0x582394(0x43d)](_0x582394(0x1ac),{'qrcode':{'instance':this[_0x582394(0x21b)]['name'],'pairingCode':this[_0x582394(0x21b)]['qrcode']['pairingCode'],'code':_0x47c8b8,'base64':_0x2bb7c8}});}),this[_0x5833d2(0x6c6)]?this[_0x5833d2(0x21b)][_0x5833d2(0x41b)][_0x5833d2(0x720)]||(await(0x0,w[_0x5833d2(0x274)])(0x7d0),this['instance']['qrcode'][_0x5833d2(0x720)]=await this[_0x5833d2(0x29a)]['requestPairingCode'](this['phoneNumber'])):this[_0x5833d2(0x21b)][_0x5833d2(0x41b)][_0x5833d2(0x720)]=null,Di[_0x5833d2(0x339)][_0x5833d2(0x57c)](_0x47c8b8,{'small':!0x0},_0x230af6=>this['logger']['log'](_0x5833d2(0x718)+this[_0x5833d2(0x21b)][_0x5833d2(0x25b)]+_0x5833d2(0x352)+this[_0x5833d2(0x21b)][_0x5833d2(0x41b)][_0x5833d2(0x54e)]+_0x5833d2(0x5d4)+this[_0x5833d2(0x21b)][_0x5833d2(0x41b)]['pairingCode']+'\x20}\x0a'+_0x230af6));}if(_0x4aa178&&(this[_0x5833d2(0x631)]={'state':_0x4aa178,'statusReason':_0x5643bf?.[_0x5833d2(0x5f8)]?.[_0x5833d2(0x1f4)]?.['statusCode']??0xc8},this[_0x5833d2(0x43d)](_0x5833d2(0x1b0),{'instance':this[_0x5833d2(0x21b)][_0x5833d2(0x25b)],...this[_0x5833d2(0x631)]})),_0x4aa178===_0x5833d2(0x735)){if(this[_0x5833d2(0x744)]++,this[_0x5833d2(0x177)][_0x5833d2(0x723)](Date['now']()),this['reconnectTimestamps']=this['reconnectTimestamps'][_0x5833d2(0x635)](_0x134dd3=>Date[_0x5833d2(0x331)]()-_0x134dd3<this[_0x5833d2(0x230)]),_0x5643bf['error']?.['output']?.[_0x5833d2(0x388)]!==w['DisconnectReason'][_0x5833d2(0x261)]){let _0x5c6f12=this[_0x5833d2(0x744)]<=0x1?0x0:Math[_0x5833d2(0x667)](Math[_0x5833d2(0x398)](0x2,this[_0x5833d2(0x744)]-0x1)*0x3e8,0x493e0);console[_0x5833d2(0x18d)](this[_0x5833d2(0x5b1)]+_0x5833d2(0x7a2)+this['reconnectAttempts']+_0x5833d2(0x594)+_0x5c6f12/0x3e8+_0x5833d2(0x5f4)),await new Promise(_0x148664=>setTimeout(_0x148664,_0x5c6f12)),console['log'](_0x5833d2(0x20e)),await this[_0x5833d2(0x2e0)]();}else{this[_0x5833d2(0x43d)](_0x5833d2(0x494),{'instance':this[_0x5833d2(0x21b)][_0x5833d2(0x25b)],'status':_0x5833d2(0x72f)}),this['instance'][_0x5833d2(0x307)][_0x5833d2(0x1e8)]=!0x1,this[_0x5833d2(0x782)][_0x5833d2(0x63e)]['delete'](this[_0x5833d2(0x5b1)]),this[_0x5833d2(0x782)]['auth'][_0x5833d2(0x6e2)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x5833d2(0x331)]()},this[_0x5833d2(0x21b)][_0x5833d2(0x25b)]),re[_0x5833d2(0x3c7)](K,this[_0x5833d2(0x21b)][_0x5833d2(0x25b)]);try{this['logger'][_0x5833d2(0x7bf)](this[_0x5833d2(0x5b1)]+'\x20('+this[_0x5833d2(0x21b)][_0x5833d2(0x228)]+_0x5833d2(0x30e));let _0x10b2dc=await this['repository'][_0x5833d2(0xab)][_0x5833d2(0x6c0)](this[_0x5833d2(0x21b)][_0x5833d2(0x228)]);_0x10b2dc[_0x5833d2(0x355)]?this['logger'][_0x5833d2(0x7bf)](this['instanceName']+'\x20('+this[_0x5833d2(0x21b)][_0x5833d2(0x228)]+_0x5833d2(0x3a1)):this['logger'][_0x5833d2(0x5f8)](_0x5833d2(0x391)+_0x10b2dc['error']);}catch(_0x2fa830){this[_0x5833d2(0x664)][_0x5833d2(0x5f8)](_0x5833d2(0x4c1)+_0x2fa830[_0x5833d2(0xab)]);}this[_0x5833d2(0x21b)][_0x5833d2(0x307)][_0x5833d2(0x431)]!==null&&(this[_0x5833d2(0x664)][_0x5833d2(0x7bf)](this[_0x5833d2(0x5b1)]+'\x20('+this[_0x5833d2(0x21b)][_0x5833d2(0x228)]+_0x5833d2(0xb0)),clearInterval(this[_0x5833d2(0x21b)][_0x5833d2(0x307)][_0x5833d2(0x431)]),this[_0x5833d2(0x21b)][_0x5833d2(0x307)][_0x5833d2(0x431)]=null),this[_0x5833d2(0x664)][_0x5833d2(0x7bf)](this[_0x5833d2(0x5b1)]+'\x20('+this[_0x5833d2(0x21b)][_0x5833d2(0x228)]+'):\x20Limpando\x20AutomateSystem'),this[_0x5833d2(0x22b)]=null,this[_0x5833d2(0x209)][_0x5833d2(0x68e)]('remove.instance',this['instance'][_0x5833d2(0x25b)],_0x5833d2(0x255)),this[_0x5833d2(0x29a)]?.['ws']?.[_0x5833d2(0x735)](),this[_0x5833d2(0x29a)][_0x5833d2(0x537)](new Error(_0x5833d2(0x610)));}}if(_0x4aa178===_0x5833d2(0x113)){this[_0x5833d2(0x664)][_0x5833d2(0x624)](this[_0x5833d2(0x5b1)]+'\x20('+this[_0x5833d2(0x21b)][_0x5833d2(0x228)]+_0x5833d2(0x519)+this[_0x5833d2(0x29a)][_0x5833d2(0x3fd)][_0x5833d2(0x440)]?.[_0x5833d2(0x1c8)]),this[_0x5833d2(0x29a)]['authState']['creds']?.[_0x5833d2(0x1c8)]||(this[_0x5833d2(0x664)]['warn'](this[_0x5833d2(0x5b1)]+'\x20('+this[_0x5833d2(0x21b)][_0x5833d2(0x228)]+_0x5833d2(0x6ed)),this['client']['ev'][_0x5833d2(0x480)]()),this[_0x5833d2(0x650)],this['instance']['wuid']=this[_0x5833d2(0x29a)][_0x5833d2(0x214)]['id'][_0x5833d2(0x470)](/:\d+/,'')[_0x5833d2(0x470)](_0x5833d2(0x628),''),this['instance'][_0x5833d2(0x4bf)]=(await this[_0x5833d2(0x226)](this[_0x5833d2(0x21b)][_0x5833d2(0x228)]+_0x5833d2(0x628)))[_0x5833d2(0x4bf)],this[_0x5833d2(0x782)]['auth'][_0x5833d2(0x6e2)]({'online':!0x0,'owner':this[_0x5833d2(0x21b)]['wuid'],'lastDisconnect':null},this[_0x5833d2(0x21b)][_0x5833d2(0x25b)]);let _0x3e6914='Número:\x20'+this['instance']['wuid'],_0x15f7fb=0x28,_0x285b0d=Math['floor']((_0x15f7fb-_0x3e6914[_0x5833d2(0x415)])/0x2),_0x216403='\x20'[_0x5833d2(0x66a)](_0x285b0d),_0x1a5a11='CONECTADO\x20À\x20UAZAPI',_0x13c31e=_0x5833d2(0x341)+this[_0x5833d2(0x21b)]['name'],_0x574497=(''+_0x216403+_0x3e6914+_0x216403)[_0x5833d2(0x45f)](_0x15f7fb,'\x20'),_0x3aa60c=(''+_0x216403+_0x1a5a11+_0x216403)[_0x5833d2(0x45f)](_0x15f7fb,'\x20'),_0x2a598c=(''+_0x216403+_0x13c31e+_0x216403)[_0x5833d2(0x45f)](_0x15f7fb,'\x20'),_0x2e3ffd=Math[_0x5833d2(0x108)](_0x574497[_0x5833d2(0x415)],_0x3aa60c['length'],_0x2a598c[_0x5833d2(0x415)]),_0x38ab08=_0x574497['padEnd'](_0x2e3ffd,'\x20'),_0x415564=_0x3aa60c[_0x5833d2(0x45f)](_0x2e3ffd,'\x20'),_0x4c760e=_0x2a598c[_0x5833d2(0x45f)](_0x2e3ffd,'\x20');this['logger'][_0x5833d2(0x363)]((_0x5833d2(0x22d)+'─'[_0x5833d2(0x66a)](_0x2e3ffd)+_0x5833d2(0x429)+_0x415564+_0x5833d2(0x27d)+_0x4c760e+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0x38ab08+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└'+'─'['repeat'](_0x2e3ffd)+'┘')[_0x5833d2(0x470)](/^ +/gm,'\x20\x20')),this['AutomateFunctions'](),this[_0x5833d2(0x21b)][_0x5833d2(0x307)][_0x5833d2(0x1e8)]=!0x0;}}[a0_0x4a47c0(0x650)](){const _0x1d3743=a0_0x4a47c0;this[_0x1d3743(0x744)]=0x0,this[_0x1d3743(0x177)]=[];}async['getMessage'](_0x4c4983,_0x978b9e=!0x1){const _0x2ec746=a0_0x4a47c0;try{let _0x303d17=await this[_0x2ec746(0x782)][_0x2ec746(0xab)][_0x2ec746(0x2ba)]({'where':{'_id':_0x4c4983['id']}},this['instance']['wuid']);return _0x978b9e?_0x303d17[0x0]:_0x303d17[0x0]['message'];}catch{return{'conversation':''};}}[a0_0x4a47c0(0x634)](){const _0x39985f=a0_0x4a47c0;let _0x472362=this[_0x39985f(0x45a)][_0x39985f(0x58b)](_0x39985f(0x19b)),_0x2899e8=this[_0x39985f(0x45a)]['get'](_0x39985f(0xf4));_0x472362?.[_0x39985f(0x26f)]&&!_0x2899e8[_0x39985f(0x99)]&&setInterval(()=>{const _0x5124cf=_0x39985f;try{for(let [_0x1ae8fc,_0x3c2382]of Object['entries'](_0x472362))_0x3c2382===!0x0&&(0x0,Ue[_0x5124cf(0x377)])('rm\x20-rf\x20'+(0x0,j['join'])(this['storePath'],_0x1ae8fc[_0x5124cf(0x72d)](),this['instance'][_0x5124cf(0x228)])+'/*.json');}catch{}},(_0x472362?.[_0x39985f(0x26f)]??0xe10)*0x3e8);}async[a0_0x4a47c0(0x2b2)](){const _0x1e1cf4=a0_0x4a47c0;let _0x219eb5=this[_0x1e1cf4(0x45a)][_0x1e1cf4(0x58b)](_0x1e1cf4(0xf4)),_0x4d71de=this[_0x1e1cf4(0x45a)][_0x1e1cf4(0x58b)](_0x1e1cf4(0xe1));return _0x4d71de?.[_0x1e1cf4(0x99)]?await xs(_0x4d71de,this[_0x1e1cf4(0x21b)]['name']):_0x219eb5[_0x1e1cf4(0x99)]?await _s(this[_0x1e1cf4(0x21b)][_0x1e1cf4(0x25b)]):await(0x0,w['useMultiFileAuthState'])((0x0,j[_0x1e1cf4(0x258)])(Me,this[_0x1e1cf4(0x21b)][_0x1e1cf4(0x25b)]));}async[a0_0x4a47c0(0x107)](){const _0x243aea=a0_0x4a47c0;let _0x1612fe=()=>Math[_0x243aea(0x771)](Math[_0x243aea(0x3bc)]()*0x4e21)+0x7d0,_0xbdb45b=async()=>{const _0x3bf540=_0x243aea;if(!this[_0x3bf540(0x21b)][_0x3bf540(0x307)][_0x3bf540(0x1e8)]){this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x3bf540(0x21b)][_0x3bf540(0x228)]+_0x3bf540(0xbe)),this[_0x3bf540(0x1c3)]=!0x1;return;}if(this[_0x3bf540(0x21b)][_0x3bf540(0x228)]&&this['AutomateSystem']&&this[_0x3bf540(0x21b)][_0x3bf540(0x307)][_0x3bf540(0x431)]!==null&&this[_0x3bf540(0x21b)][_0x3bf540(0x307)][_0x3bf540(0x431)]!==void 0x0){let _0x524715=Math['round'](this[_0x3bf540(0x21b)]['ScheduleMessage'][_0x3bf540(0x431)]/0xea60);this[_0x3bf540(0x664)][_0x3bf540(0x7bf)](this[_0x3bf540(0x5b1)]+'\x20('+this['instance']['wuid']+_0x3bf540(0x191)+_0x524715+_0x3bf540(0x4ae)),this[_0x3bf540(0x1c3)]=!0x1;return;}else this[_0x3bf540(0x21b)][_0x3bf540(0x228)]&&(this[_0x3bf540(0x664)][_0x3bf540(0x7bf)](this[_0x3bf540(0x5b1)]+'\x20('+this[_0x3bf540(0x21b)][_0x3bf540(0x228)]+_0x3bf540(0x1d8)),this['AutomateSystem']||(await this[_0x3bf540(0x739)](),this[_0x3bf540(0x326)](),this[_0x3bf540(0x201)]()),(this[_0x3bf540(0x21b)]['ScheduleMessage'][_0x3bf540(0x431)]===null||this['instance'][_0x3bf540(0x307)]['delayMessage']===void 0x0)&&await this['scheduleNextCheck']());if(this[_0x3bf540(0x1c3)]){let _0x26ec97=_0x1612fe();this[_0x3bf540(0x664)][_0x3bf540(0x7bf)](this[_0x3bf540(0x5b1)]+':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20'+_0x26ec97/0x3e8+_0x3bf540(0x674)),setTimeout(_0xbdb45b,_0x26ec97);}};if(this[_0x243aea(0x1c3)])return;this[_0x243aea(0x1c3)]=!0x0;let _0x28a2cc=_0x1612fe();setTimeout(_0xbdb45b,_0x28a2cc);}async[a0_0x4a47c0(0x201)](){const _0x3686ac=a0_0x4a47c0;let _0x4c9033=this[_0x3686ac(0x21b)][_0x3686ac(0x228)];try{let _0x51c7fd=await this['repository'][_0x3686ac(0x4e4)]['findAll']({'where':{'$or':[{'owner':_0x4c9033},{'whoCanUse':{'$in':[_0x4c9033]}},{'shareOwners':{'$in':[_0x4c9033]}}]}}),_0x46048b=new Map(this[_0x3686ac(0x22b)][_0x3686ac(0x5f1)][_0x3686ac(0x4b0)](_0x186525=>[_0x186525['_id'],_0x186525])),_0x4ab1f2=_0x51c7fd[_0x3686ac(0x4b0)](_0x3d2104=>{const _0x3e666a=_0x3686ac;let _0x1f69a6=_0x46048b[_0x3e666a(0x58b)](_0x3d2104[_0x3e666a(0x443)]?.[_0x3e666a(0x13c)]());return{'_id':_0x3d2104[_0x3e666a(0x443)]?.['toString'](),'name':_0x1f69a6?.['name']??_0x3d2104[_0x3e666a(0x25b)],'default':_0x1f69a6?.['default']??_0x3d2104[_0x3e666a(0x339)]??!0x1,'startCommand':_0x1f69a6?.[_0x3e666a(0x1e7)]??_0x3d2104[_0x3e666a(0x390)],'minutesToClose':_0x1f69a6?.[_0x3e666a(0x2a9)]??_0x3d2104[_0x3e666a(0x2a9)]??0xa,'readMessages':_0x1f69a6?.[_0x3e666a(0x276)]??_0x3d2104[_0x3e666a(0x276)]??!0x1,'testingWith':_0x1f69a6?.[_0x3e666a(0x5cc)]??_0x3d2104[_0x3e666a(0x5cc)],'canEdit':_0x3d2104[_0x3e666a(0x3ab)]===_0x4c9033||(_0x3d2104[_0x3e666a(0x599)]??[])['includes'](_0x4c9033),'usersCount':(_0x3d2104[_0x3e666a(0xc4)]??[])[_0x3e666a(0x415)]??0x0};}),_0x50e180=!0x1;_0x4ab1f2['forEach'](_0x4cee84=>{const _0x39ea1f=_0x3686ac;_0x4cee84[_0x39ea1f(0x339)]&&(_0x50e180?_0x4cee84[_0x39ea1f(0x339)]=!0x1:_0x50e180=!0x0);}),this[_0x3686ac(0x22b)][_0x3686ac(0x5f1)]=_0x4ab1f2;let _0x3f2cf4={'flows':_0x4ab1f2};return await this[_0x3686ac(0x782)]['automateSystem'][_0x3686ac(0x7c2)](_0x3f2cf4,_0x4c9033),this[_0x3686ac(0x664)][_0x3686ac(0x7bf)](this['instanceName']+'\x20('+_0x4c9033+_0x3686ac(0x53a)),_0x4ab1f2['length'];}catch(_0x50a587){return this[_0x3686ac(0x664)][_0x3686ac(0x5f8)](this['instanceName']+'\x20('+_0x4c9033+_0x3686ac(0x305)+(_0x50a587 instanceof Error?_0x50a587[_0x3686ac(0xab)]:JSON[_0x3686ac(0x52f)](_0x50a587,null,0x2))),{'message':_0x3686ac(0x488)+(_0x50a587 instanceof Error?_0x50a587[_0x3686ac(0xab)]:JSON['stringify'](_0x50a587,null,0x2))};}}async[a0_0x4a47c0(0x2e0)](_0x3b5a0f){const _0x48f674=a0_0x4a47c0;try{let _0x56a2cb=await this[_0x48f674(0x782)][_0x48f674(0x21b)][_0x48f674(0xb1)]({'where':{'_id':K+'-'+this[_0x48f674(0x5b1)]}}),_0x340716,_0x259f56=!re[_0x48f674(0x4d0)]||!re[_0x48f674(0x2c9)];console['log']('--------------------------------------'),console[_0x48f674(0x18d)](_0x48f674(0x79c),Oi),console[_0x48f674(0x18d)](_0x48f674(0x74f),this[_0x48f674(0x744)]),console[_0x48f674(0x18d)]('--------------------------------------'),Oi&&!_0x259f56&&(this['reconnectAttempts']<0x4||!this[_0x48f674(0x744)]?_0x56a2cb&&_0x56a2cb['ip']?(_0x340716=_0x56a2cb['ip'],console[_0x48f674(0x18d)](_0x48f674(0x4f9)+_0x340716)):(_0x340716=await re[_0x48f674(0x6f8)](K,this['instance']['name']),_0x340716?(console[_0x48f674(0x18d)]('Novo\x20IP\x20criado:\x20'+_0x340716),await(0x0,w['delay'])(0x7d0)):console[_0x48f674(0x5f8)](_0x48f674(0x290))):this['reconnectAttempts']<0x6&&(await re['removeIPv6ById'](K,this[_0x48f674(0x21b)]['name']),console[_0x48f674(0x18d)](_0x48f674(0x17e)),_0x340716=await re[_0x48f674(0x6f8)](K,this[_0x48f674(0x21b)][_0x48f674(0x25b)]),_0x340716?(console[_0x48f674(0x18d)](_0x48f674(0x427)+_0x340716),await(0x0,w[_0x48f674(0x274)])(0x7d0)):console['error'](_0x48f674(0x13a)))),this['loadWebhook'](),this[_0x48f674(0x21b)][_0x48f674(0x20a)]=(await this[_0x48f674(0x782)]['auth'][_0x48f674(0x2ba)](this[_0x48f674(0x21b)][_0x48f674(0x25b)]))[_0x48f674(0x20a)],this[_0x48f674(0x21b)][_0x48f674(0x3fd)]=await this[_0x48f674(0x2b2)]();let {version:_0x423bb8}=await(0x0,w[_0x48f674(0xb7)])(),_0x26fdad=[ki,Us,(0x0,ks[_0x48f674(0xfa)])()],_0x9de416={'localAddress':_0x340716,'auth':{'creds':this['instance'][_0x48f674(0x3fd)]['state'][_0x48f674(0x440)],'keys':(0x0,w[_0x48f674(0x32f)])(this[_0x48f674(0x21b)][_0x48f674(0x3fd)][_0x48f674(0x5b6)][_0x48f674(0x77d)],(0x0,qt[_0x48f674(0x339)])({'level':'error'}))},'logger':(0x0,qt['default'])({'level':_0x48f674(0x5f8)}),'printQRInTerminal':!0x1,'browser':_0x3b5a0f?[_0x48f674(0x301),Us,(0x0,ks['release'])()]:_0x26fdad,'version':_0x423bb8,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x410422=>{const _0x2b2d39=_0x48f674;let _0x840f=this['localWebhook']?.[_0x2b2d39(0x14a)]&&(0x0,w['isJidGroup'])(_0x410422);return(0x0,w[_0x2b2d39(0x539)])(_0x410422)||_0x840f;},'msgRetryCounterCache':this['msgRetryCounterCache'],'getMessage':async _0x1dbeff=>await this['getMessage'](_0x1dbeff),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x48f674(0x3c0)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x6a2a13){const _0x15449b=_0x48f674;return _0x6a2a13[_0x15449b(0x345)]?.[_0x15449b(0xab)]?.[_0x15449b(0x1a4)]?.[_0x15449b(0x1e2)]===w[_0x15449b(0xde)]['Message'][_0x15449b(0x598)][_0x15449b(0x33f)][_0x15449b(0x22a)]&&(_0x6a2a13=JSON[_0x15449b(0x4e6)](JSON[_0x15449b(0x52f)](_0x6a2a13)),_0x6a2a13[_0x15449b(0x345)]['message'][_0x15449b(0x1a4)][_0x15449b(0x1e2)]=w[_0x15449b(0xde)][_0x15449b(0x54a)][_0x15449b(0x598)][_0x15449b(0x33f)]['SINGLE_SELECT']),_0x6a2a13[_0x15449b(0x1a4)]?.[_0x15449b(0x1e2)]==w[_0x15449b(0xde)][_0x15449b(0x54a)]['ListMessage']['ListType'][_0x15449b(0x22a)]&&(_0x6a2a13=JSON[_0x15449b(0x4e6)](JSON['stringify'](_0x6a2a13)),_0x6a2a13['listMessage'][_0x15449b(0x1e2)]=w[_0x15449b(0xde)][_0x15449b(0x54a)][_0x15449b(0x598)]['ListType'][_0x15449b(0x268)]),_0x6a2a13;}};return this['endSession']=!0x1,this[_0x48f674(0x29a)]=(0x0,w[_0x48f674(0x339)])(_0x9de416),this['eventHandler'](),this['phoneNumber']=_0x3b5a0f,this[_0x48f674(0x29a)];}catch(_0x2b9cc6){let _0x443de5=_0x48f674(0x269),_0x5aba89=_0x2b9cc6 instanceof Error?_0x2b9cc6[_0x48f674(0xab)]:typeof _0x2b9cc6=='object'?JSON[_0x48f674(0x52f)](_0x2b9cc6):_0x2b9cc6,_0xc1ba36=_0x443de5+':\x20'+_0x5aba89;throw this[_0x48f674(0x664)]['error'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x48f674(0x46a)+_0xc1ba36),console[_0x48f674(0x5f8)](_0x48f674(0x446),_0x2b9cc6),_0x2b9cc6 instanceof Error&&console[_0x48f674(0x5f8)](_0x48f674(0x1d5),_0x2b9cc6[_0x48f674(0x13b)]),new x(_0xc1ba36);}}['eventHandler'](){const _0x552a32=a0_0x4a47c0;this[_0x552a32(0x29a)]['ev'][_0x552a32(0x4da)](_0x58a5b4=>{const _0x53a78e=_0x552a32;if(!this[_0x53a78e(0x6a4)]){let _0xd5b664=this[_0x53a78e(0x45a)][_0x53a78e(0x58b)]('DATABASE');if(_0x58a5b4[_0x53a78e(0x5de)]){let _0x33ef09=_0x58a5b4[_0x53a78e(0x5de)];this[_0x53a78e(0x59e)][_0x53a78e(0x5de)](_0x33ef09);}if(_0x58a5b4[_0x53a78e(0xb9)]){let _0x318c37=_0x58a5b4[_0x53a78e(0xb9)];this[_0x53a78e(0x59e)][_0x53a78e(0xb9)](_0x318c37);}if(_0x58a5b4['connection.update']&&this['connectionUpdate'](_0x58a5b4[_0x53a78e(0x1b0)]),_0x58a5b4[_0x53a78e(0x33d)]&&this[_0x53a78e(0x21b)][_0x53a78e(0x3fd)][_0x53a78e(0x59f)](),_0x58a5b4['messaging-history.set']){let _0x242141=_0x58a5b4[_0x53a78e(0x55c)];this['messageHandle'][_0x53a78e(0x55c)](_0x242141,_0xd5b664);}if(_0x58a5b4[_0x53a78e(0x78e)]){let _0x89c446=_0x58a5b4[_0x53a78e(0x78e)];this[_0x53a78e(0x59e)]['messages.upsert'](_0x89c446,_0xd5b664);}if(_0x58a5b4['messages.update']){let _0x420594=_0x58a5b4['messages.update'];this[_0x53a78e(0x59e)][_0x53a78e(0x61f)](_0x420594,_0xd5b664);}if(_0x58a5b4['presence.update']){let _0x1c900c=_0x58a5b4['presence.update'];if(this[_0x53a78e(0x5b7)]?.['groups_ignore']&&_0x1c900c['id'][_0x53a78e(0x795)](_0x53a78e(0x1c9)))return;this['sendDataWebhook']('presence.update',_0x1c900c);}if(_0x58a5b4[_0x53a78e(0x5fe)]){let _0x288376=_0x58a5b4[_0x53a78e(0x5fe)];this[_0x53a78e(0x5c0)]['groups.upsert'](_0x288376);}if(_0x58a5b4[_0x53a78e(0x5c5)]){let _0x32121c=_0x58a5b4['groups.update'];this['groupHandler'][_0x53a78e(0x5c5)](_0x32121c);}if(_0x58a5b4[_0x53a78e(0x24d)]){let _0x44efc1=_0x58a5b4[_0x53a78e(0x24d)];this['groupHandler']['group-participants.update'](_0x44efc1);}if(_0x58a5b4['chats.upsert']){let _0x444b2f=_0x58a5b4[_0x53a78e(0x1c6)];this['chatHandle']['chats.upsert'](_0x444b2f,_0xd5b664);}if(_0x58a5b4[_0x53a78e(0x4ad)]){let _0xc3c3d2=_0x58a5b4[_0x53a78e(0x4ad)];this[_0x53a78e(0x416)][_0x53a78e(0x4ad)](_0xc3c3d2,_0xd5b664);}if(_0x58a5b4['chats.delete']){let _0x5c4634=_0x58a5b4[_0x53a78e(0x6c2)];this[_0x53a78e(0x416)][_0x53a78e(0x6c2)](_0x5c4634);}if(_0x58a5b4[_0x53a78e(0x194)]){let _0x4380c2=_0x58a5b4['contacts.upsert'];this[_0x53a78e(0x396)][_0x53a78e(0x194)](_0x4380c2,_0xd5b664);}if(_0x58a5b4[_0x53a78e(0x62c)]){let _0x509da3=_0x58a5b4[_0x53a78e(0x62c)];this[_0x53a78e(0x396)][_0x53a78e(0x62c)](_0x509da3,_0xd5b664);}}});}async[a0_0x4a47c0(0x38d)](_0x1833cf,_0x593ebe){const _0x3e359d=a0_0x4a47c0;if(_0x593ebe>=0xa){console[_0x3e359d(0x5f8)](this[_0x3e359d(0x5b1)]+'\x20('+this[_0x3e359d(0x21b)]['wuid']+_0x3e359d(0x453)),delete Jt[_0x1833cf['key']['id']];return;}try{console[_0x3e359d(0x5f8)](this[_0x3e359d(0x5b1)]+'\x20('+this[_0x3e359d(0x21b)][_0x3e359d(0x228)]+_0x3e359d(0x7b2)+(_0x593ebe+0x1)),await this[_0x3e359d(0x29a)][_0x3e359d(0x175)](JSON[_0x3e359d(0x4e6)](_0x1833cf[_0x3e359d(0x401)][0x1],w[_0x3e359d(0x6c9)]['reviver'])),console['error'](_0x3e359d(0x4c2));}catch(_0x5102e0){console[_0x3e359d(0x5f8)](this[_0x3e359d(0x5b1)]+'\x20('+this['instance'][_0x3e359d(0x228)]+_0x3e359d(0x44d)+_0x5102e0),setTimeout(()=>this[_0x3e359d(0x38d)](_0x1833cf,_0x593ebe+0x1),Math[_0x3e359d(0x398)](0x2,_0x593ebe)*0x3e8);}}[a0_0x4a47c0(0x661)](_0x402bba){return new Promise(_0x33e0db=>setTimeout(_0x33e0db,_0x402bba));}['formatBRNumber'](_0x4dbd27){const _0x33240e=a0_0x4a47c0;_0x4dbd27=_0x4dbd27[_0x33240e(0x470)](/\D/g,'');let _0x205634=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x33240e(0x449)](_0x4dbd27);if(_0x205634&&_0x205634[0x1]==='55'){let _0x1a2cbf=_0x205634[0x2],_0x48d186=_0x205634[0x3],_0xb43947=_0x205634[0x4];if(parseInt(_0x1a2cbf)>=0x1f&&_0x48d186==='9')return _0x205634[0x1]+_0x1a2cbf+_0xb43947;}return _0x4dbd27;}[a0_0x4a47c0(0x117)](_0x4e050b){const _0x5c5a1f=a0_0x4a47c0;return _0x4e050b[_0x5c5a1f(0x795)](_0x5c5a1f(0x1c9))||_0x4e050b[_0x5c5a1f(0x795)](_0x5c5a1f(0x628))||_0x4e050b[_0x5c5a1f(0x795)]('@broadcast')?_0x4e050b:(_0x4e050b=_0x4e050b?.['replace'](/\s/g,'')[_0x5c5a1f(0x470)](/\+/g,'')[_0x5c5a1f(0x470)](/\(/g,'')['replace'](/\)/g,'')[_0x5c5a1f(0x31c)](/\:/)[0x0][_0x5c5a1f(0x31c)]('@')[0x0],_0x4e050b[_0x5c5a1f(0x415)]>=0x12?(_0x4e050b=_0x4e050b[_0x5c5a1f(0x470)](/[^\d-]/g,''),_0x4e050b+_0x5c5a1f(0x1c9)):(_0x4e050b=_0x4e050b[_0x5c5a1f(0x470)](/\D/g,''),_0x4e050b+_0x5c5a1f(0x628)));}async[a0_0x4a47c0(0x6ce)](_0x202ac8){const _0x30f340=a0_0x4a47c0;let _0x3f6a59=(await this[_0x30f340(0x14c)]({'numbers':[_0x202ac8[_0x30f340(0x9a)]]}))[0x0];if(!_0x3f6a59[_0x30f340(0x32b)]&&!(0x0,w[_0x30f340(0x6a2)])(_0x3f6a59[_0x30f340(0x304)])&&!_0x3f6a59[_0x30f340(0x304)]['includes'](_0x30f340(0x135)))throw new m(_0x3f6a59);let _0x3a7572=_0x3f6a59[_0x30f340(0x304)];try{return await this['client'][_0x30f340(0x62a)](_0x3a7572),await this['client'][_0x30f340(0x6cf)](_0x202ac8[_0x30f340(0x1ad)],_0x3a7572),{'status':0xc8,'presence':_0x202ac8['presence']};}catch(_0x1c1aa3){let _0x2c8ef5=_0x30f340(0x3dc),_0x29e53b=_0x1c1aa3 instanceof Error?_0x1c1aa3[_0x30f340(0xab)]:typeof _0x1c1aa3==_0x30f340(0x2b9)?JSON['stringify'](_0x1c1aa3):_0x1c1aa3,_0x70342c=_0x2c8ef5+':\x20'+_0x29e53b;throw this['logger']['error'](this[_0x30f340(0x5b1)]+'\x20('+this[_0x30f340(0x21b)][_0x30f340(0x228)]+_0x30f340(0x46a)+_0x70342c),new m(_0x70342c);}}async[a0_0x4a47c0(0x193)](_0x4f1949,_0x4fc8f5,_0x47070f,_0x480d26=!0x0){const _0x439823=a0_0x4a47c0;let _0x22f9e4=await this['repository'][_0x439823(0x2ab)][_0x439823(0xb1)]({'where':{'_id':_0x4f1949}});if(!_0x22f9e4&&!_0x480d26)return;let _0x217d90={'lastUpdate':Date[_0x439823(0x331)]()};if(_0x47070f||!_0x22f9e4?.[_0x439823(0x408)]||Date['now']()-_0x22f9e4['lastUpdate']>0x18*0x3c*0x3c*0x3e8)try{let _0xf13509=(await this[_0x439823(0x226)](_0x4f1949))['profilePictureUrl'];_0x217d90[_0x439823(0x79a)]=_0xf13509;}catch(_0x1b4d59){let _0x42cad7=_0x439823(0x254),_0x1e999c=_0x1b4d59 instanceof Error?_0x1b4d59[_0x439823(0xab)]:typeof _0x1b4d59==_0x439823(0x2b9)?JSON[_0x439823(0x52f)](_0x1b4d59):_0x1b4d59,_0x386db2=_0x42cad7+':\x20'+_0x1e999c;throw this['logger'][_0x439823(0x5f8)](this[_0x439823(0x5b1)]+'\x20('+this[_0x439823(0x21b)][_0x439823(0x228)]+_0x439823(0x46a)+_0x386db2),new m(_0x386db2);}return _0x4fc8f5&&_0x22f9e4?.[_0x439823(0x25b)]!==_0x4fc8f5&&(_0x217d90['name']=_0x4fc8f5),Object[_0x439823(0x77d)](_0x217d90)[_0x439823(0x415)]>0x1&&(_0x22f9e4?await this[_0x439823(0x782)][_0x439823(0x2ab)]['update']({'where':{'_id':_0x4f1949}},_0x217d90):await this[_0x439823(0x782)]['cacheContact'][_0x439823(0x69f)]([{'_id':_0x4f1949,..._0x217d90}]),_0x22f9e4={..._0x22f9e4,..._0x217d90}),{'cachedContact':_0x22f9e4};}async['profilePicture'](_0x1cc723){const _0x14c21f=a0_0x4a47c0;let _0x55e507=this[_0x14c21f(0x117)](_0x1cc723);try{return{'wuid':_0x55e507,'profilePictureUrl':await this[_0x14c21f(0x29a)][_0x14c21f(0x4bf)](_0x55e507,_0x14c21f(0x2fb))};}catch{return{'wuid':_0x55e507,'profilePictureUrl':null};}}async['sendMessageWithTyping'](_0x6e01a5,_0x2b4a3d,_0x424373){const _0x9066ad=a0_0x4a47c0;let _0x3780a0;try{let _0x669a38=(await this[_0x9066ad(0x14c)]({'numbers':[_0x6e01a5]}))?.[_0x9066ad(0xe7)]();if(!_0x669a38['exists']&&!(0x0,w['isJidGroup'])(_0x669a38[_0x9066ad(0x304)])&&!_0x669a38['jid']['includes']('@broadcast'))throw new m(_0x669a38);_0x3780a0=_0x669a38[_0x9066ad(0x304)];}catch(_0x5527ac){_0x3780a0=_0x6e01a5,this[_0x9066ad(0x664)]['warn'](this[_0x9066ad(0x5b1)]+'\x20('+this['instance']['wuid']+_0x9066ad(0x1b4)+_0x5527ac[_0x9066ad(0xab)]),this[_0x9066ad(0x664)][_0x9066ad(0x624)](this[_0x9066ad(0x5b1)]+'\x20('+this[_0x9066ad(0x21b)][_0x9066ad(0x228)]+'):\x20sender\x20=\x20number:\x20'+_0x3780a0);}try{if(_0x3780a0||(_0x3780a0=_0x6e01a5,this[_0x9066ad(0x664)]['warn'](this[_0x9066ad(0x5b1)]+'\x20('+this['instance'][_0x9066ad(0x228)]+_0x9066ad(0x461)+_0x3780a0)),_0x424373||(_0x424373={}),_0x424373?.[_0x9066ad(0x274)]){await this[_0x9066ad(0x29a)][_0x9066ad(0x62a)](_0x3780a0),await this[_0x9066ad(0x29a)][_0x9066ad(0x6cf)](_0x424373?.[_0x9066ad(0x1ad)]??_0x9066ad(0x5d3),_0x3780a0);let _0x141949=Math['min'](_0x424373[_0x9066ad(0x274)],0x2710);await(0x0,w[_0x9066ad(0x274)])(_0x141949),await this[_0x9066ad(0x29a)][_0x9066ad(0x6cf)](_0x9066ad(0x7f3),_0x3780a0);}let _0x3f7253=_0x424373?.['linkPreview']!=!0x1?void 0x0:!0x1,_0xbc0080;if(_0x424373?.[_0x9066ad(0x69b)]){let _0x2141db=_0x424373?.['quoted'],_0x283308=_0x2141db?.[_0x9066ad(0xab)]?_0x2141db:await this[_0x9066ad(0x14e)](_0x2141db[_0x9066ad(0x56d)],!0x0);_0x283308&&(_0xbc0080=_0x283308);}let _0x2cd435,_0x3fce37=null;if((0x0,w[_0x9066ad(0x6a2)])(_0x3780a0))try{if(_0x3fce37=await this[_0x9066ad(0x4ed)](_0x3780a0),!_0x3fce37)throw new J('Group\x20not\x20found');_0x424373?.[_0x9066ad(0x636)]&&(_0x424373[_0x9066ad(0x636)]?.[_0x9066ad(0x7fd)]?_0x2cd435=_0x3fce37['participants'][_0x9066ad(0x4b0)](_0x4a3455=>_0x4a3455['id']):_0x424373[_0x9066ad(0x636)]?.[_0x9066ad(0x436)]?.[_0x9066ad(0x415)]&&(_0x2cd435=_0x424373[_0x9066ad(0x636)][_0x9066ad(0x436)]['map'](_0x681744=>{const _0x4e32ec=_0x9066ad;let _0x695d4b=this[_0x4e32ec(0x117)](_0x681744);return(0x0,w['isJidGroup'])(_0x695d4b)?null:_0x695d4b;})));}catch{throw new J(_0x9066ad(0xaf));}let _0x479253=await this[_0x9066ad(0x782)][_0x9066ad(0x316)][_0x9066ad(0xb1)]({'where':{'_id':_0x3780a0}},this[_0x9066ad(0x21b)][_0x9066ad(0x228)]),_0x304edb=await((async()=>{const _0x483215=_0x9066ad;let _0x2c5486={'quoted':_0xbc0080,'ephemeralExpiration':_0x479253?.[_0x483215(0x6b5)]??0x0,'useCachedGroupMetadata':!0x0};if(!_0x2b4a3d[_0x483215(0x217)]&&!_0x2b4a3d[_0x483215(0x67e)]&&!_0x2b4a3d[_0x483215(0x6ab)]&&!_0x2b4a3d['conversation']&&_0x3780a0!==_0x483215(0x484)&&_0x2b4a3d['reactionMessage'])return await this['client']['sendMessage'](_0x3780a0,{'react':{'text':_0x2b4a3d['reactionMessage'][_0x483215(0x6ba)],'key':_0x2b4a3d[_0x483215(0x17f)][_0x483215(0x56d)]}},_0x2c5486);if(_0x2b4a3d[_0x483215(0x4ec)]){let _0x3b10fb=_0x2b4a3d[_0x483215(0x4ec)];return _0x424373?.[_0x483215(0xf0)]&&(_0x3b10fb=await this[_0x483215(0xdd)](_0x3b10fb,_0x3780a0)),await this[_0x483215(0x29a)]['sendMessage'](_0x3780a0,{'text':_0x3b10fb,'mentions':_0x2cd435,'linkPreview':_0x3f7253},_0x2c5486);}return!_0x2b4a3d['audio']&&!_0x2b4a3d[_0x483215(0x67e)]&&_0x3780a0!=_0x483215(0x484)?await this['client'][_0x483215(0x60e)](_0x3780a0,{'forward':{'key':{'remoteJid':this[_0x483215(0x21b)][_0x483215(0x228)],'fromMe':!0x0},'message':_0x2b4a3d},'mentions':_0x2cd435},_0x2c5486):_0x3780a0===_0x483215(0x484)?await this['client'][_0x483215(0x60e)](_0x3780a0,_0x2b4a3d[_0x483215(0x7ae)]['content'],{'backgroundColor':_0x2b4a3d[_0x483215(0x7ae)][_0x483215(0x404)][_0x483215(0x455)],'font':_0x2b4a3d[_0x483215(0x7ae)][_0x483215(0x404)][_0x483215(0x28d)],'statusJidList':_0x2b4a3d['status'][_0x483215(0x404)][_0x483215(0x239)]}):await this[_0x483215(0x29a)][_0x483215(0x60e)](_0x3780a0,_0x2b4a3d,_0x2c5486);})()),_0x44473b=(0x0,w[_0x9066ad(0x354)])(_0x304edb[_0x9066ad(0xab)]),_0x4f0677=(0x0,w['getContentType'])(_0x44473b),{message_normalized:_0x406bc5}=this[_0x9066ad(0x1d1)](_0x44473b,_0x4f0677,null),_0x342d34={'_id':_0x304edb['key']['id'],'key':_0x304edb['key'],'pushName':_0x304edb[_0x9066ad(0x419)],'isGroup':_0x304edb['key'][_0x9066ad(0x1d0)][_0x9066ad(0x582)](_0x9066ad(0x1c9)),'profilePictureUrl':this['instance'][_0x9066ad(0x4bf)],'message':_0x44473b,'messageType':_0x4f0677,'message_normalized':{'key':_0x304edb['key'],'pushName':_0x304edb[_0x9066ad(0x419)],'messageTimestamp':_0x304edb[_0x9066ad(0x4e2)]&&_0x304edb[_0x9066ad(0x4e2)][_0x9066ad(0x13c)]()[_0x9066ad(0x415)]<0xd?_0x304edb[_0x9066ad(0x4e2)]*0x3e8:_0x304edb[_0x9066ad(0x4e2)]||null,'source':(0x0,w['getDevice'])(_0x304edb[_0x9066ad(0x56d)]['id']),..._0x406bc5},'messageTimestamp':_0x304edb[_0x9066ad(0x4e2)]&&_0x304edb[_0x9066ad(0x4e2)][_0x9066ad(0x13c)]()[_0x9066ad(0x415)]<0xd?_0x304edb[_0x9066ad(0x4e2)]*0x3e8:_0x304edb[_0x9066ad(0x4e2)]||null,'owner':this['instance'][_0x9066ad(0x228)],'source':(0x0,w[_0x9066ad(0x6ca)])(_0x304edb[_0x9066ad(0x56d)]['id'])};return this['logger']['warn'](this[_0x9066ad(0x5b1)]+'\x20('+this[_0x9066ad(0x21b)][_0x9066ad(0x228)]+_0x9066ad(0x20b)+_0x342d34[_0x9066ad(0x56d)]?.[_0x9066ad(0x1d0)][_0x9066ad(0x470)](_0x9066ad(0x628),'')+_0x9066ad(0x1eb)+_0x342d34[_0x9066ad(0x3e7)]+')'),_0x342d34[_0x9066ad(0x575)]?.['text']&&this['logger']['warn'](_0x342d34[_0x9066ad(0x575)]?.[_0x9066ad(0x6ba)]),this[_0x9066ad(0x43d)](_0x9066ad(0x6fe),_0x342d34),q(this[_0x9066ad(0x5b1)],'messages',{'message':_0x342d34}),this['updateChatWithMessage'](this[_0x9066ad(0x45a)]['get'](_0x9066ad(0xf4)),_0x342d34,_0x9066ad(0x172),_0x479253),await this[_0x9066ad(0x782)][_0x9066ad(0xab)][_0x9066ad(0x69f)]([_0x342d34],this[_0x9066ad(0x21b)][_0x9066ad(0x228)]),_0x304edb;}catch(_0x289473){let _0x24d96c=_0x9066ad(0x2f2)+_0x3780a0,_0x36c1bd=_0x289473 instanceof Error?_0x289473[_0x9066ad(0xab)]:typeof _0x289473=='object'?JSON[_0x9066ad(0x52f)](_0x289473):_0x289473,_0x2c3c9f=_0x24d96c+':\x20'+_0x36c1bd;throw this[_0x9066ad(0x664)][_0x9066ad(0x5f8)](this['instanceName']+'\x20('+this['instance'][_0x9066ad(0x228)]+_0x9066ad(0x46a)+_0x2c3c9f),new m(_0x2c3c9f);}}async[a0_0x4a47c0(0x4ed)](_0x1edbd7){const _0x45b98d=a0_0x4a47c0;try{let _0x243cb5=await this[_0x45b98d(0x782)][_0x45b98d(0x316)][_0x45b98d(0xb1)]({'where':{'_id':_0x1edbd7}},this[_0x45b98d(0x21b)][_0x45b98d(0x228)]);return _0x243cb5?_0x243cb5[_0x45b98d(0x55b)]:null;}catch(_0x265b9a){return this['logger']['error'](_0x45b98d(0x531)+_0x1edbd7+':\x20'+_0x265b9a[_0x45b98d(0xab)]),null;}}get['connectionStatus'](){const _0x22d959=a0_0x4a47c0;return this[_0x22d959(0x631)];}async[a0_0x4a47c0(0x644)](_0x2be14f){const _0x2bfd67=a0_0x4a47c0;return await this[_0x2bfd67(0x134)](_0x2be14f['number'],{'conversation':_0x2be14f['textMessage']['text']},_0x2be14f?.[_0x2bfd67(0x467)]);}async[a0_0x4a47c0(0x5eb)](_0x3080c7){const _0x2feb22=a0_0x4a47c0;if(!_0x3080c7[_0x2feb22(0x311)])throw new m(_0x2feb22(0x731));if(!_0x3080c7[_0x2feb22(0x2df)])throw new m(_0x2feb22(0x5d5));if(_0x3080c7['allContacts']){let _0x251048=await this[_0x2feb22(0x782)]['contact'][_0x2feb22(0x2ba)]({'where':{}},this[_0x2feb22(0x21b)][_0x2feb22(0x228)]);if(!_0x251048['length'])throw new m('Contacts\x20not\x20found');_0x3080c7['statusJidList']=_0x251048[_0x2feb22(0x635)](_0xdcf305=>_0xdcf305[_0x2feb22(0x419)])['map'](_0x4707c5=>_0x4707c5[_0x2feb22(0x443)]);}if(!_0x3080c7[_0x2feb22(0x239)]?.[_0x2feb22(0x415)]&&!_0x3080c7[_0x2feb22(0x66b)])throw new m(_0x2feb22(0x677));if(_0x3080c7['type']==='text'){if(!_0x3080c7[_0x2feb22(0x455)])throw new m(_0x2feb22(0x7dc));if(!_0x3080c7[_0x2feb22(0x28d)])throw new m('Font\x20is\x20required');return{'content':{'text':_0x3080c7[_0x2feb22(0x2df)]},'option':{'backgroundColor':_0x3080c7['backgroundColor'],'font':_0x3080c7[_0x2feb22(0x28d)],'statusJidList':_0x3080c7[_0x2feb22(0x239)]}};}if(_0x3080c7[_0x2feb22(0x311)]===_0x2feb22(0x2fb))return{'content':{'image':{'url':_0x3080c7[_0x2feb22(0x2df)]},'caption':_0x3080c7[_0x2feb22(0x6a3)]},'option':{'statusJidList':_0x3080c7[_0x2feb22(0x239)]}};if(_0x3080c7[_0x2feb22(0x311)]===_0x2feb22(0x164))return{'content':{'video':{'url':_0x3080c7[_0x2feb22(0x2df)]},'caption':_0x3080c7[_0x2feb22(0x6a3)]},'option':{'statusJidList':_0x3080c7[_0x2feb22(0x239)]}};if(_0x3080c7[_0x2feb22(0x311)]===_0x2feb22(0x217)){this['logger'][_0x2feb22(0x7bf)](this[_0x2feb22(0x5b1)]+'\x20('+this['instance'][_0x2feb22(0x228)]+_0x2feb22(0x1be)),this[_0x2feb22(0x664)]['verbose'](this['instanceName']+'\x20('+this[_0x2feb22(0x21b)][_0x2feb22(0x228)]+_0x2feb22(0x613));let _0x7db8de=await this[_0x2feb22(0x6e0)](_0x3080c7[_0x2feb22(0x2df)]);if(typeof _0x7db8de==_0x2feb22(0x4c4)){this['logger'][_0x2feb22(0x7bf)](this[_0x2feb22(0x5b1)]+'\x20('+this[_0x2feb22(0x21b)][_0x2feb22(0x228)]+'):Audio\x20processed');let _0xa0b6c3=F[_0x2feb22(0x402)](_0x7db8de)['toString'](_0x2feb22(0x791));return{'content':{'audio':Buffer['from'](_0xa0b6c3,_0x2feb22(0x791)),'ptt':!0x0,'mimetype':_0x2feb22(0x2bd)},'option':{'statusJidList':_0x3080c7[_0x2feb22(0x239)]}};}else throw new x(_0x7db8de);}throw new m(_0x2feb22(0x6b6));}async['statusMessage'](_0xe2eda7){const _0x48135d=a0_0x4a47c0;return await this[_0x48135d(0x134)](_0x48135d(0x484),{'status':await this[_0x48135d(0x5eb)](_0xe2eda7[_0x48135d(0x7e7)])});}async[a0_0x4a47c0(0x673)](_0x12b4a2){const _0x435fea=a0_0x4a47c0;try{let _0x2698be=await(0x0,w[_0x435fea(0x451)])({[_0x12b4a2[_0x435fea(0x400)]]:(0x0,L['isURL'])(_0x12b4a2['media'])?{'url':_0x12b4a2[_0x435fea(0x148)]}:Buffer[_0x435fea(0x179)](_0x12b4a2[_0x435fea(0x148)],'base64')},{'upload':this[_0x435fea(0x29a)]['waUploadToServer']}),_0x1d471e=_0x12b4a2['mediatype']+_0x435fea(0x54a);if(_0x12b4a2[_0x435fea(0x400)]==='document'&&!_0x12b4a2[_0x435fea(0x5e6)]){let _0x59a78e=new RegExp(/.*\/(.+?)\./)[_0x435fea(0x449)](_0x12b4a2[_0x435fea(0x148)]);_0x12b4a2['fileName']=_0x59a78e?_0x59a78e[0x1]:null;}let _0x125a2f;return(0x0,L[_0x435fea(0x7a7)])(_0x12b4a2[_0x435fea(0x148)])?_0x125a2f=(await te[_0x435fea(0x339)][_0x435fea(0x58b)](_0x12b4a2[_0x435fea(0x148)],{'responseType':_0x435fea(0x2c0)}))[_0x435fea(0x12f)][_0x435fea(0x5b5)]:_0x125a2f=(0x0,Pi['getMIMEType'])(_0x12b4a2['fileName']),_0x2698be[_0x1d471e][_0x435fea(0x6a3)]=_0x12b4a2?.['caption'],_0x2698be[_0x1d471e][_0x435fea(0x7c1)]=_0x125a2f,_0x2698be[_0x1d471e][_0x435fea(0x5e6)]=_0x12b4a2[_0x435fea(0x5e6)],_0x12b4a2[_0x435fea(0x400)]===_0x435fea(0x164)&&(_0x2698be[_0x1d471e][_0x435fea(0x37c)]=Uint8Array['from']((0x0,Fe[_0x435fea(0x402)])((0x0,j['join'])(process[_0x435fea(0x96)](),_0x435fea(0x542)))),_0x2698be[_0x1d471e][_0x435fea(0x247)]=!0x1),(0x0,w[_0x435fea(0x1ff)])('',{[_0x1d471e]:{..._0x2698be[_0x1d471e]}},{'userJid':this[_0x435fea(0x21b)]['wuid']});}catch(_0x35d825){let _0x566556=_0x435fea(0xc7),_0x1cf347=_0x35d825 instanceof Error?_0x35d825[_0x435fea(0xab)]:typeof _0x35d825==_0x435fea(0x2b9)?JSON[_0x435fea(0x52f)](_0x35d825):_0x35d825,_0x2bacf1=_0x566556+':\x20'+_0x1cf347;throw this['logger'][_0x435fea(0x5f8)](this[_0x435fea(0x5b1)]+'\x20('+this['instance'][_0x435fea(0x228)]+_0x435fea(0x46a)+_0x2bacf1),new x(_0x2bacf1);}}async[a0_0x4a47c0(0x26e)](_0x56bcb9){const _0x2e247d=a0_0x4a47c0;let _0x2c4d68=await this[_0x2e247d(0x673)](_0x56bcb9['mediaMessage']);return await this[_0x2e247d(0x134)](_0x56bcb9['number'],{..._0x2c4d68[_0x2e247d(0xab)]},_0x56bcb9?.[_0x2e247d(0x467)]);}async[a0_0x4a47c0(0x486)](_0x1550de,_0x166301){const _0x88e3e8=a0_0x4a47c0;try{this[_0x88e3e8(0x664)]['verbose'](this[_0x88e3e8(0x5b1)]+'\x20('+this[_0x88e3e8(0x21b)]['wuid']+_0x88e3e8(0x1a8));let _0x3e1ae9,_0x38849c=_0x166301+'-'+new Date()['getTime']();this['logger'][_0x88e3e8(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x88e3e8(0x228)]+'):Hash\x20to\x20image\x20name:\x20'+_0x38849c);let _0x2f09de=''+(0x0,j['join'])(this['storePath'],_0x38849c+_0x88e3e8(0x207));if(this['logger'][_0x88e3e8(0x7bf)](this['instanceName']+'\x20('+this[_0x88e3e8(0x21b)][_0x88e3e8(0x228)]+_0x88e3e8(0x73a)+_0x2f09de),(0x0,L[_0x88e3e8(0x2fc)])(_0x1550de)){this[_0x88e3e8(0x664)]['verbose'](this[_0x88e3e8(0x5b1)]+'\x20('+this[_0x88e3e8(0x21b)][_0x88e3e8(0x228)]+_0x88e3e8(0x21d));let _0x1c3087=_0x1550de[_0x88e3e8(0x470)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x2bfd00=Buffer[_0x88e3e8(0x179)](_0x1c3087,_0x88e3e8(0x791));_0x3e1ae9=''+(0x0,j['join'])(this[_0x88e3e8(0x315)],_0x88e3e8(0x358)+_0x38849c+_0x88e3e8(0x7e9)),this[_0x88e3e8(0x664)][_0x88e3e8(0x7bf)](this[_0x88e3e8(0x5b1)]+'\x20('+this[_0x88e3e8(0x21b)][_0x88e3e8(0x228)]+'):Image\x20path:\x20'+_0x3e1ae9),await(0x0,Vt[_0x88e3e8(0x339)])(_0x2bfd00)[_0x88e3e8(0x5fb)](_0x3e1ae9),this[_0x88e3e8(0x664)][_0x88e3e8(0x7bf)](this[_0x88e3e8(0x5b1)]+'\x20('+this[_0x88e3e8(0x21b)]['wuid']+_0x88e3e8(0x452));}else{this['logger'][_0x88e3e8(0x7bf)](this[_0x88e3e8(0x5b1)]+'\x20('+this[_0x88e3e8(0x21b)][_0x88e3e8(0x228)]+_0x88e3e8(0x5ad));let _0x4c2d51=new Date()['getTime'](),_0x414a01=_0x1550de+_0x88e3e8(0x18c)+_0x4c2d51;this[_0x88e3e8(0x664)][_0x88e3e8(0x7bf)](this[_0x88e3e8(0x5b1)]+'\x20('+this[_0x88e3e8(0x21b)][_0x88e3e8(0x228)]+'):including\x20timestamp\x20in\x20url:\x20'+_0x414a01);let _0x5d4ee5=await te[_0x88e3e8(0x339)]['get'](_0x414a01,{'responseType':_0x88e3e8(0x2c0)});this[_0x88e3e8(0x664)]['verbose'](this[_0x88e3e8(0x5b1)]+'\x20('+this[_0x88e3e8(0x21b)]['wuid']+_0x88e3e8(0x546));let _0x240cd1=Buffer[_0x88e3e8(0x179)](_0x5d4ee5[_0x88e3e8(0x37a)],_0x88e3e8(0x6f2));_0x3e1ae9=''+(0x0,j[_0x88e3e8(0x258)])(this[_0x88e3e8(0x315)],_0x88e3e8(0x358)+_0x38849c+'.png'),this[_0x88e3e8(0x664)][_0x88e3e8(0x7bf)](this[_0x88e3e8(0x5b1)]+'\x20('+this[_0x88e3e8(0x21b)]['wuid']+_0x88e3e8(0x12b)+_0x3e1ae9),await(0x0,Vt[_0x88e3e8(0x339)])(_0x240cd1)[_0x88e3e8(0x5fb)](_0x3e1ae9),this[_0x88e3e8(0x664)][_0x88e3e8(0x7bf)](this[_0x88e3e8(0x5b1)]+'\x20('+this[_0x88e3e8(0x21b)][_0x88e3e8(0x228)]+_0x88e3e8(0x452));}return await(0x0,Vt[_0x88e3e8(0x339)])(_0x3e1ae9)[_0x88e3e8(0x69d)]()[_0x88e3e8(0x5fb)](_0x2f09de),this[_0x88e3e8(0x664)][_0x88e3e8(0x7bf)](this[_0x88e3e8(0x5b1)]+'\x20('+this[_0x88e3e8(0x21b)][_0x88e3e8(0x228)]+_0x88e3e8(0x7a9)),F[_0x88e3e8(0x114)](_0x3e1ae9),this['logger'][_0x88e3e8(0x7bf)](this[_0x88e3e8(0x5b1)]+'\x20('+this[_0x88e3e8(0x21b)][_0x88e3e8(0x228)]+_0x88e3e8(0xcf)),_0x2f09de;}catch(_0x58e89a){let _0x1b1adb='Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP',_0x20b6a1=_0x58e89a instanceof Error?_0x58e89a[_0x88e3e8(0xab)]:typeof _0x58e89a==_0x88e3e8(0x2b9)?JSON[_0x88e3e8(0x52f)](_0x58e89a):_0x58e89a,_0x2b528d=_0x1b1adb+':\x20'+_0x20b6a1;this['logger'][_0x88e3e8(0x5f8)](this[_0x88e3e8(0x5b1)]+'\x20('+this['instance']['wuid']+_0x88e3e8(0x46a)+_0x2b528d);}}async[a0_0x4a47c0(0x405)](_0x2b2611){const _0x25067c=a0_0x4a47c0;let _0x5761ed=await this[_0x25067c(0x486)](_0x2b2611[_0x25067c(0x7fe)]['image'],_0x2b2611[_0x25067c(0x9a)]),_0x2e53a0=await this[_0x25067c(0x134)](_0x2b2611[_0x25067c(0x9a)],{'sticker':{'url':_0x5761ed}},_0x2b2611?.[_0x25067c(0x467)]);return F[_0x25067c(0x114)](_0x5761ed),this[_0x25067c(0x664)]['verbose'](this[_0x25067c(0x5b1)]+'\x20('+this[_0x25067c(0x21b)][_0x25067c(0x228)]+_0x25067c(0xbd)),_0x2e53a0;}async['audioWhatsapp'](_0x446f91){const _0x3aa4f2=a0_0x4a47c0;if(this[_0x3aa4f2(0x664)][_0x3aa4f2(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x3aa4f2(0x228)]+_0x3aa4f2(0x5e1)),!_0x446f91[_0x3aa4f2(0x467)]?.[_0x3aa4f2(0x4cd)]&&_0x446f91['options']?.['encoding']!==!0x1&&(_0x446f91[_0x3aa4f2(0x467)][_0x3aa4f2(0x4cd)]=!0x0),_0x446f91[_0x3aa4f2(0x467)]?.[_0x3aa4f2(0x4cd)]){let _0x54ecf=await this[_0x3aa4f2(0x6e0)](_0x446f91[_0x3aa4f2(0x370)][_0x3aa4f2(0x217)]);if(typeof _0x54ecf==_0x3aa4f2(0x4c4)){let _0x4d5035=F[_0x3aa4f2(0x402)](_0x54ecf)[_0x3aa4f2(0x13c)](_0x3aa4f2(0x791));return this[_0x3aa4f2(0x134)](_0x446f91[_0x3aa4f2(0x9a)],{'audio':Buffer[_0x3aa4f2(0x179)](_0x4d5035,_0x3aa4f2(0x791)),'ptt':!0x0,'mimetype':_0x3aa4f2(0x4cf)},{'presence':_0x3aa4f2(0x3fc),'delay':_0x446f91?.['options']?.[_0x3aa4f2(0x274)]});}else throw new x(_0x54ecf);}return await this[_0x3aa4f2(0x134)](_0x446f91[_0x3aa4f2(0x9a)],{'audio':(0x0,L['isURL'])(_0x446f91[_0x3aa4f2(0x370)][_0x3aa4f2(0x217)])?{'url':_0x446f91[_0x3aa4f2(0x370)]['audio']}:Buffer[_0x3aa4f2(0x179)](_0x446f91[_0x3aa4f2(0x370)][_0x3aa4f2(0x217)],'base64'),'ptt':!0x0,'mimetype':_0x3aa4f2(0x4cf)},{'presence':_0x3aa4f2(0x3fc),'delay':_0x446f91?.[_0x3aa4f2(0x467)]?.[_0x3aa4f2(0x274)]});}async[a0_0x4a47c0(0x6e0)](_0x54814f){const _0x7f5c1a=a0_0x4a47c0;this[_0x7f5c1a(0x664)][_0x7f5c1a(0x7bf)](this['instanceName']+'\x20('+this[_0x7f5c1a(0x21b)][_0x7f5c1a(0x228)]+_0x7f5c1a(0x613));let _0x109e82=(0x0,L[_0x7f5c1a(0x7a7)])(_0x54814f)?(0x0,Gt[_0x7f5c1a(0x617)])('sha256')['update'](_0x54814f)[_0x7f5c1a(0x606)]('hex'):(0x0,Gt[_0x7f5c1a(0x617)])(_0x7f5c1a(0x2cd))['update'](_0x54814f)[_0x7f5c1a(0x606)](_0x7f5c1a(0x360)),_0x507bb0=''+(0x0,j[_0x7f5c1a(0x258)])(this['storePath'],_0x109e82+_0x7f5c1a(0x694));if(F[_0x7f5c1a(0x7c5)](_0x507bb0))return this[_0x7f5c1a(0x664)][_0x7f5c1a(0x7bf)](this['instanceName']+'\x20('+this[_0x7f5c1a(0x21b)][_0x7f5c1a(0x228)]+_0x7f5c1a(0x500)),_0x507bb0;let _0x61235f=''+(0x0,j[_0x7f5c1a(0x258)])(this['storePath'],_0x7f5c1a(0x358)+(0x0,X['v4'])()+_0x7f5c1a(0x410));if((0x0,L[_0x7f5c1a(0x7a7)])(_0x54814f)){let _0x135984=new Date()[_0x7f5c1a(0x319)](),_0x183aff=_0x54814f+'?timestamp='+_0x135984,_0x1cb928=await te['default']['get'](_0x183aff,{'responseType':'arraybuffer'});F[_0x7f5c1a(0x365)](_0x61235f,_0x1cb928[_0x7f5c1a(0x37a)]);}else{let _0x128131=Buffer[_0x7f5c1a(0x179)](_0x54814f,_0x7f5c1a(0x791));F[_0x7f5c1a(0x365)](_0x61235f,_0x128131);}return new Promise((_0x59e869,_0x479583)=>{const _0x4a1638=_0x7f5c1a;(0x0,Ue[_0x4a1638(0x449)])(Ps[_0x4a1638(0x339)][_0x4a1638(0xce)]+'\x20-i\x20'+_0x61235f+_0x4a1638(0x19f)+_0x507bb0+'\x20-y',_0x319280=>{const _0x4ce015=_0x4a1638;if(F[_0x4ce015(0x114)](_0x61235f),_0x319280){this['logger'][_0x4ce015(0x7bf)](this[_0x4ce015(0x5b1)]+'\x20('+this[_0x4ce015(0x21b)][_0x4ce015(0x228)]+_0x4ce015(0x23a)),_0x479583(_0x319280);return;}this[_0x4ce015(0x664)]['verbose'](this[_0x4ce015(0x5b1)]+'\x20('+this[_0x4ce015(0x21b)]['wuid']+_0x4ce015(0x2f3)),_0x59e869(_0x507bb0);});});}async[a0_0x4a47c0(0x22e)](_0x1bca46){const _0x274602=a0_0x4a47c0;this[_0x274602(0x664)][_0x274602(0x7bf)](this[_0x274602(0x5b1)]+'\x20('+this[_0x274602(0x21b)]['wuid']+_0x274602(0x613));let _0x427798=(0x0,Gt[_0x274602(0x617)])(_0x274602(0x2cd))[_0x274602(0x7c2)](_0x1bca46)[_0x274602(0x606)]('hex'),_0x39f49f=''+(0x0,j[_0x274602(0x258)])(this[_0x274602(0x315)],_0x427798+'.mp3');if(F[_0x274602(0x7c5)](_0x39f49f))return this['logger'][_0x274602(0x7bf)](this[_0x274602(0x5b1)]+'\x20('+this[_0x274602(0x21b)]['wuid']+_0x274602(0x500)),j[_0x274602(0x339)][_0x274602(0x63f)](_0x39f49f);let _0x4172a4=''+(0x0,j[_0x274602(0x258)])(this['storePath'],_0x274602(0x358)+_0x427798+_0x274602(0x694));if((0x0,L['isURL'])(_0x1bca46)){let _0x53406e=new Date()[_0x274602(0x319)](),_0x2eaa72=_0x1bca46+_0x274602(0x18c)+_0x53406e,_0x14f357=await te[_0x274602(0x339)][_0x274602(0x58b)](_0x2eaa72,{'responseType':'arraybuffer'});F[_0x274602(0x365)](_0x4172a4,_0x14f357['data']);}else{let _0x446dde=Buffer[_0x274602(0x179)](_0x1bca46,'base64');F[_0x274602(0x365)](_0x4172a4,_0x446dde);}return new Promise((_0x357320,_0x17c294)=>{const _0x14c5a5=_0x274602;(0x0,Ue[_0x14c5a5(0x449)])(Ps['default'][_0x14c5a5(0xce)]+_0x14c5a5(0x204)+_0x4172a4+_0x14c5a5(0x773)+_0x39f49f+_0x14c5a5(0x662),_0x1285cf=>{const _0x55baa0=_0x14c5a5;if(F[_0x55baa0(0x114)](_0x4172a4),_0x1285cf){this[_0x55baa0(0x664)][_0x55baa0(0x7bf)](this[_0x55baa0(0x5b1)]+'\x20('+this['instance'][_0x55baa0(0x228)]+_0x55baa0(0x23a)),_0x17c294(_0x1285cf);return;}this[_0x55baa0(0x664)][_0x55baa0(0x7bf)](this[_0x55baa0(0x5b1)]+'\x20('+this['instance'][_0x55baa0(0x228)]+'):Audio\x20converted\x20and\x20stored\x20in\x20cache'),_0x357320(j['default']['basename'](_0x39f49f));});});}async['buttonMessage'](_0x4df34e){const _0x4ec910=a0_0x4a47c0;let _0x3fec3e={},_0x4a5351=_0x4ec910(0x5d0);if(_0x4df34e[_0x4ec910(0x7b7)]?.[_0x4ec910(0x26e)]){_0x4a5351=_0x4df34e[_0x4ec910(0x7b7)][_0x4ec910(0x26e)]?.['mediatype'][_0x4ec910(0x53f)]()??_0x4ec910(0x5d0),_0x3fec3e[_0x4ec910(0x4f3)]=_0x4a5351[_0x4ec910(0x72d)]()+_0x4ec910(0x54a);let _0x35d9cf=await this['prepareMediaMessage'](_0x4df34e[_0x4ec910(0x7b7)][_0x4ec910(0x26e)]);_0x3fec3e['message']=_0x35d9cf[_0x4ec910(0xab)][_0x3fec3e[_0x4ec910(0x4f3)]],_0x3fec3e['contentText']='*'+_0x4df34e[_0x4ec910(0x7b7)][_0x4ec910(0x754)]+_0x4ec910(0x6bb)+_0x4df34e[_0x4ec910(0x7b7)][_0x4ec910(0x205)];}let _0x3cc75b={'text':_0x4df34e[_0x4ec910(0x7b7)][_0x4ec910(0x6fc)][_0x4ec910(0x4b0)](_0x5c137d=>_0x5c137d[_0x4ec910(0x6b1)]),'ids':_0x4df34e['buttonMessage'][_0x4ec910(0x6fc)]['map'](_0x26c0ad=>_0x26c0ad['buttonId'])};if(!(0x0,L[_0x4ec910(0xb2)])(_0x3cc75b[_0x4ec910(0x6ba)])||!(0x0,L[_0x4ec910(0xb2)])(_0x3cc75b['ids']))throw new m('Button\x20texts\x20cannot\x20be\x20repeated','Button\x20IDs\x20cannot\x20be\x20repeated.');return await this['sendMessageWithTyping'](_0x4df34e[_0x4ec910(0x9a)],{'buttonsMessage':{'text':_0x3fec3e?.[_0x4ec910(0x4f3)]?void 0x0:_0x4df34e[_0x4ec910(0x7b7)][_0x4ec910(0x754)],'contentText':_0x3fec3e?.[_0x4ec910(0x4ac)]??_0x4df34e[_0x4ec910(0x7b7)][_0x4ec910(0x205)],'footerText':_0x4df34e[_0x4ec910(0x7b7)]?.['footerText'],'buttons':_0x4df34e[_0x4ec910(0x7b7)][_0x4ec910(0x6fc)]['map'](_0x3120ad=>({'buttonText':{'displayText':_0x3120ad[_0x4ec910(0x6b1)]},'buttonId':_0x3120ad['buttonId'],'type':0x1})),'headerType':w['proto'][_0x4ec910(0x54a)][_0x4ec910(0x2fe)][_0x4ec910(0x6e7)][_0x4a5351],[_0x3fec3e?.[_0x4ec910(0x4f3)]]:_0x3fec3e?.['message']}},_0x4df34e?.['options']);}async[a0_0x4a47c0(0x5ed)](_0x6e6ed6){const _0x11f56d=a0_0x4a47c0;return await this[_0x11f56d(0x134)](_0x6e6ed6[_0x11f56d(0x9a)],{'locationMessage':{'degreesLatitude':_0x6e6ed6[_0x11f56d(0x5ed)][_0x11f56d(0x70a)],'degreesLongitude':_0x6e6ed6['locationMessage'][_0x11f56d(0x48d)],'name':_0x6e6ed6['locationMessage']?.[_0x11f56d(0x25b)],'address':_0x6e6ed6[_0x11f56d(0x5ed)]?.[_0x11f56d(0x227)]}},_0x6e6ed6?.['options']);}async['contactMessage'](_0x37d4f5){const _0x47870d=a0_0x4a47c0;let _0x5264e0={},_0x3fd792=async _0x496265=>{const _0x5ceb08=a0_0xa65b;let _0x212298=_0x5ceb08(0xd3)+_0x496265[_0x5ceb08(0x132)]+_0x5ceb08(0x306)+_0x496265[_0x5ceb08(0x132)]+'\x0a';_0x496265[_0x5ceb08(0x44b)]&&(_0x212298+=_0x5ceb08(0x459)+_0x496265['organization']+';\x0a'),_0x496265[_0x5ceb08(0x35d)]&&(_0x212298+='EMAIL:'+_0x496265[_0x5ceb08(0x35d)]+'\x0a'),_0x496265[_0x5ceb08(0x3d7)]&&(_0x212298+=_0x5ceb08(0x10e)+_0x496265[_0x5ceb08(0x3d7)]+'\x0a');let _0x33b73e='',_0x5de4af=0x1;if(_0x496265[_0x5ceb08(0x6c6)]){let _0x2a0a9a=_0x496265['phoneNumber'][_0x5ceb08(0x31c)]('|');for(let _0x2fa439 of _0x2a0a9a){let _0x335712=await this[_0x5ceb08(0x14c)]({'numbers':[_0x2fa439]}),_0x59f00e=(_0x335712[_0x5ceb08(0x415)]>0x0?_0x335712[0x0][_0x5ceb08(0x304)]:this['createJid'](_0x2fa439))[_0x5ceb08(0x470)](_0x5ceb08(0x628),'');_0x33b73e+=_0x5ceb08(0x50c)+_0x5de4af+_0x5ceb08(0x7db)+_0x59f00e+':'+_0x2fa439+_0x5ceb08(0x65a)+_0x5de4af+_0x5ceb08(0x5fc),_0x5de4af++;}}return _0x212298+=_0x33b73e+_0x5ceb08(0x4cb),_0x212298;};return _0x37d4f5[_0x47870d(0x7da)][_0x47870d(0x415)]===0x1?_0x5264e0[_0x47870d(0x7da)]={'displayName':_0x37d4f5[_0x47870d(0x7da)][0x0]['fullName'],'vcard':await _0x3fd792(_0x37d4f5['contactMessage'][0x0])}:_0x5264e0[_0x47870d(0x7e8)]={'displayName':_0x37d4f5['contactMessage']['length']+_0x47870d(0x3c3),'contacts':await Promise[_0x47870d(0x64a)](_0x37d4f5[_0x47870d(0x7da)]['map'](async _0x3c8c97=>({'displayName':_0x3c8c97[_0x47870d(0x132)],'vcard':await _0x3fd792(_0x3c8c97)})))},await this[_0x47870d(0x134)](_0x37d4f5[_0x47870d(0x9a)],{..._0x5264e0},_0x37d4f5?.[_0x47870d(0x467)]);}async['reactionMessage'](_0x5d04c1){const _0x1454b5=a0_0x4a47c0;return await this[_0x1454b5(0x134)](_0x5d04c1['reactionMessage'][_0x1454b5(0x56d)][_0x1454b5(0x1d0)],{'reactionMessage':{'key':_0x5d04c1[_0x1454b5(0x17f)][_0x1454b5(0x56d)],'text':_0x5d04c1[_0x1454b5(0x17f)][_0x1454b5(0x252)]}});}async[a0_0x4a47c0(0x14c)](_0x25c7ab){const _0x28c400=a0_0x4a47c0;let _0x46c9d0=[];for await(let _0x5ca11c of _0x25c7ab[_0x28c400(0x1bf)]){let _0x490394=this['createJid'](_0x5ca11c),_0x42eaea=!0x1;try{if((0x0,w[_0x28c400(0x6a2)])(_0x490394)){let _0x4611b4=(await this[_0x28c400(0x782)][_0x28c400(0x316)][_0x28c400(0xb1)]({'where':{'_id':_0x490394}},this[_0x28c400(0x21b)]['wuid']))[_0x28c400(0x55b)];_0x4611b4?(_0x42eaea=!0x0,_0x46c9d0['push'](new pe(_0x4611b4['id'],_0x42eaea,_0x4611b4?.[_0x28c400(0x57f)]))):(_0x4611b4=await this[_0x28c400(0x3d9)]({'groupJid':_0x490394},_0x28c400(0x255)),_0x46c9d0['push'](new pe(_0x4611b4['id'],!!_0x4611b4?.['id'],_0x4611b4?.['subject'])));}else{if(_0x490394[_0x28c400(0x795)]('@broadcast'))_0x46c9d0[_0x28c400(0x723)](new pe(_0x490394,!0x0));else{let _0x991e3=(await this[_0x28c400(0x29a)][_0x28c400(0x154)](_0x490394))[0x0];_0x46c9d0[_0x28c400(0x723)](new pe(_0x991e3[_0x28c400(0x304)],_0x991e3[_0x28c400(0x32b)]));}}}catch{(0x0,w['isJidGroup'])(_0x490394)||await this[_0x28c400(0x5bb)](_0x490394),_0x46c9d0[_0x28c400(0x723)](new pe(_0x5ca11c,!0x1));}}return _0x46c9d0;}async[a0_0x4a47c0(0x5bb)](_0x4c0e17){const _0x5539d6=a0_0x4a47c0;try{await this['repository'][_0x5539d6(0x316)][_0x5539d6(0xb1)]({'where':{'_id':_0x4c0e17,'imported':!0x0}},this['instance'][_0x5539d6(0x228)])&&(await this['repository'][_0x5539d6(0x316)][_0x5539d6(0x1bd)](_0x4c0e17,this[_0x5539d6(0x21b)][_0x5539d6(0x228)]),this[_0x5539d6(0x664)][_0x5539d6(0x363)]('Chat\x20com\x20ID\x20'+_0x4c0e17+_0x5539d6(0x4ca)));}catch(_0x3fc2a3){let _0x43e753=_0x5539d6(0x462),_0x68d0de=_0x3fc2a3 instanceof Error?_0x3fc2a3[_0x5539d6(0xab)]:typeof _0x3fc2a3=='object'?JSON[_0x5539d6(0x52f)](_0x3fc2a3):_0x3fc2a3,_0x415de5=_0x43e753+':\x20'+_0x68d0de;this['logger']['error'](this[_0x5539d6(0x5b1)]+'\x20('+this[_0x5539d6(0x21b)][_0x5539d6(0x228)]+_0x5539d6(0x46a)+_0x415de5);}}async[a0_0x4a47c0(0x571)](_0xa11531){const _0x58791a=a0_0x4a47c0;try{let _0x7609fa=_0xa11531['readMessages'][_0x58791a(0x635)](_0x1842a5=>(0x0,w[_0x58791a(0x6a2)])(_0x1842a5['remoteJid'])||(0x0,w[_0x58791a(0x165)])(_0x1842a5['remoteJid']))[_0x58791a(0x4b0)](_0x368d8c=>({'remoteJid':_0x368d8c['remoteJid'],'fromMe':_0x368d8c[_0x58791a(0x655)],'id':_0x368d8c['id']}));await this[_0x58791a(0x29a)]['readMessages'](_0x7609fa);let _0x583821=_0x7609fa[_0x58791a(0x4b0)](_0x5cc864=>this[_0x58791a(0x35c)](_0x5cc864,{'status':_0x58791a(0x4ce),'owner':this[_0x58791a(0x21b)][_0x58791a(0x228)]})),_0x44ce20=_0x7609fa[_0x58791a(0x4b0)](_0x195632=>this[_0x58791a(0x782)][_0x58791a(0x316)][_0x58791a(0xc6)]({'where':{'_id':_0x195632[_0x58791a(0x1d0)]}},{'unreadcount':0x0},this[_0x58791a(0x21b)][_0x58791a(0x228)])),[_0x5b7534,_0x3768d2]=await Promise['all']([Promise['all'](_0x583821),Promise['all'](_0x44ce20)]);return _0x3768d2[_0x58791a(0x635)](_0x6b5b9d=>_0x6b5b9d!==null)['forEach'](_0x1b4117=>{const _0x235663=_0x58791a;q(this[_0x235663(0x5b1)],_0x235663(0x7a6),{'chat':_0x1b4117});}),{'message':_0x58791a(0x56a),'read':'success'};}catch(_0xa4d73e){let _0x465b1d=_0x58791a(0x41a),_0x319c5e=_0xa4d73e instanceof Error?_0xa4d73e[_0x58791a(0xab)]:typeof _0xa4d73e==_0x58791a(0x2b9)?JSON[_0x58791a(0x52f)](_0xa4d73e):_0xa4d73e,_0x131f6e=_0x465b1d+':\x20'+_0x319c5e;throw this[_0x58791a(0x664)][_0x58791a(0x5f8)](this['instanceName']+'\x20('+this[_0x58791a(0x21b)][_0x58791a(0x228)]+_0x58791a(0x46a)+_0x131f6e),new x(_0x131f6e);}}async[a0_0x4a47c0(0x411)](_0x58b023){const _0x5f0212=a0_0x4a47c0;let _0xb9e75d={'where':{'key':{'remoteJid':_0x58b023}},'limit':0x1},_0x1dacfa=await this[_0x5f0212(0x42f)](_0xb9e75d);return _0x1dacfa||(this[_0x5f0212(0x664)][_0x5f0212(0x5f8)](_0x5f0212(0x4a1)+_0x58b023),null);}async[a0_0x4a47c0(0x3c5)](_0x383d63){const _0x25d8d4=a0_0x4a47c0;this[_0x25d8d4(0x664)][_0x25d8d4(0x7bf)](this[_0x25d8d4(0x5b1)]+'\x20('+this[_0x25d8d4(0x21b)][_0x25d8d4(0x228)]+_0x25d8d4(0x3db));try{let _0x3ea307=_0x383d63['lastMessage'],_0x9ea21=_0x383d63[_0x25d8d4(0x316)];if(!_0x3ea307&&_0x9ea21?_0x3ea307=await this[_0x25d8d4(0x411)](_0x9ea21):(_0x3ea307=_0x383d63[_0x25d8d4(0xfd)],_0x3ea307[_0x25d8d4(0x4e2)]=_0x3ea307?.[_0x25d8d4(0x4e2)]??Date['now'](),_0x9ea21=_0x3ea307?.[_0x25d8d4(0x56d)]?.['remoteJid']),!_0x3ea307||Object[_0x25d8d4(0x77d)](_0x3ea307)[_0x25d8d4(0x415)]===0x0)throw new J('Last\x20message\x20not\x20found');this['logger'][_0x25d8d4(0x7bf)](this['instanceName']+'\x20('+this[_0x25d8d4(0x21b)][_0x25d8d4(0x228)]+'):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20'+_0x9ea21);try{await this[_0x25d8d4(0x29a)][_0x25d8d4(0x297)]({'archive':_0x383d63[_0x25d8d4(0x476)],'lastMessages':[_0x3ea307]},this['createJid'](_0x9ea21));}catch(_0x42d4b8){let _0x12eecb=_0x25d8d4(0x4d9)+_0x9ea21,_0x538cff=_0x42d4b8 instanceof Error?_0x42d4b8[_0x25d8d4(0xab)]:typeof _0x42d4b8==_0x25d8d4(0x2b9)?JSON[_0x25d8d4(0x52f)](_0x42d4b8):_0x42d4b8,_0x11b633=_0x12eecb+':\x20'+_0x538cff;this[_0x25d8d4(0x664)]['error'](this[_0x25d8d4(0x5b1)]+'\x20('+this['instance'][_0x25d8d4(0x228)]+_0x25d8d4(0x46a)+_0x11b633);}this[_0x25d8d4(0x664)][_0x25d8d4(0x7bf)](this[_0x25d8d4(0x5b1)]+'\x20('+this['instance'][_0x25d8d4(0x228)]+_0x25d8d4(0x150)+_0x9ea21);let _0x1c04e1=await this[_0x25d8d4(0x782)][_0x25d8d4(0x316)][_0x25d8d4(0xc6)]({'where':{'_id':_0x3ea307?.['key']?.[_0x25d8d4(0x1d0)]}},{'archived':_0x383d63[_0x25d8d4(0x476)]},this[_0x25d8d4(0x21b)][_0x25d8d4(0x228)]);return _0x1c04e1?(this['logger'][_0x25d8d4(0x7bf)](this[_0x25d8d4(0x5b1)]+'\x20('+this[_0x25d8d4(0x21b)][_0x25d8d4(0x228)]+_0x25d8d4(0x58d)+JSON[_0x25d8d4(0x52f)](_0x1c04e1)),q(this[_0x25d8d4(0x5b1)],_0x25d8d4(0x7a6),{'chat':_0x1c04e1})):this['logger'][_0x25d8d4(0x5f8)](this[_0x25d8d4(0x5b1)]+'\x20('+this[_0x25d8d4(0x21b)][_0x25d8d4(0x228)]+_0x25d8d4(0x10a)+_0x9ea21),{'chatId':_0x9ea21,'archived':_0x383d63[_0x25d8d4(0x476)]};}catch(_0x3bed38){let _0x54f8da=_0x25d8d4(0x425),_0x49aeb5=_0x3bed38 instanceof Error?_0x3bed38['message']:typeof _0x3bed38==_0x25d8d4(0x2b9)?JSON['stringify'](_0x3bed38):_0x3bed38,_0x2d1eb5=_0x54f8da+':\x20'+_0x49aeb5;throw this[_0x25d8d4(0x664)][_0x25d8d4(0x5f8)](this[_0x25d8d4(0x5b1)]+'\x20('+this[_0x25d8d4(0x21b)]['wuid']+_0x25d8d4(0x46a)+_0x2d1eb5),new x(_0x2d1eb5);}}async[a0_0x4a47c0(0x1bd)](_0x312256){const _0x516d76=a0_0x4a47c0;this[_0x516d76(0x664)][_0x516d76(0x7bf)](this[_0x516d76(0x5b1)]+'\x20('+this['instance'][_0x516d76(0x228)]+'):Delete\x20chat');try{let _0x5db064=await this[_0x516d76(0x411)](_0x312256);if(!_0x5db064||Object[_0x516d76(0x77d)](_0x5db064)[_0x516d76(0x415)]===0x0)throw new J(_0x516d76(0x27e));let _0x320865=_0x5db064[0x0];this[_0x516d76(0x664)][_0x516d76(0x7bf)](this[_0x516d76(0x5b1)]+'\x20('+this[_0x516d76(0x21b)][_0x516d76(0x228)]+_0x516d76(0x3da)+_0x312256);try{await this['client'][_0x516d76(0x297)]({'delete':!0x0,'lastMessages':[{'key':_0x320865[_0x516d76(0x56d)],'messageTimestamp':_0x320865['messageTimestamp']}]},this[_0x516d76(0x117)](_0x312256));}catch(_0x325872){this['logger'][_0x516d76(0x5f8)](_0x516d76(0x4d9)+_0x312256+':\x20'+_0x325872[_0x516d76(0x13c)]());}this[_0x516d76(0x664)][_0x516d76(0x7bf)](this[_0x516d76(0x5b1)]+'\x20('+this[_0x516d76(0x21b)][_0x516d76(0x228)]+_0x516d76(0x150)+_0x312256);return;}catch(_0x5ac438){throw this[_0x516d76(0x664)][_0x516d76(0x5f8)](this['instanceName']+'\x20('+this[_0x516d76(0x21b)][_0x516d76(0x228)]+_0x516d76(0x4fe)+_0x5ac438[_0x516d76(0x13c)]()),new x({'archived':!0x1,'message':['An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.',_0x5ac438[_0x516d76(0x13c)]()]});}}async[a0_0x4a47c0(0x5a1)](_0x386e48){const _0x3e4e8a=a0_0x4a47c0;try{let _0x38fa67=await this['client'][_0x3e4e8a(0x60e)](_0x386e48[_0x3e4e8a(0x1d0)],{'delete':_0x386e48});try{let _0x25ec76=await this[_0x3e4e8a(0x35c)](_0x386e48,{'status':'DELETED','owner':this[_0x3e4e8a(0x21b)][_0x3e4e8a(0x228)]});this[_0x3e4e8a(0x664)][_0x3e4e8a(0x7bf)](this['instanceName']+'\x20('+this[_0x3e4e8a(0x21b)][_0x3e4e8a(0x228)]+_0x3e4e8a(0x657)+_0x25ec76);}catch(_0x3ab1b8){this[_0x3e4e8a(0x664)]['error'](_0x3e4e8a(0x146)+_0x3ab1b8);}return _0x38fa67;}catch(_0x988386){throw new x(_0x3e4e8a(0x5ab),_0x988386?.[_0x3e4e8a(0x13c)]());}}async['getBase64FromMediaMessage'](_0x752d7f){const _0xc18b9=a0_0x4a47c0;try{let _0x262621=_0x752d7f?.[_0xc18b9(0xab)]?_0x752d7f:await this[_0xc18b9(0x14e)](_0x752d7f[_0xc18b9(0x56d)],!0x0);for(let _0x11b18e of Ra)_0x262621[_0xc18b9(0xab)][_0x11b18e]&&(_0x262621['message']=_0x262621[_0xc18b9(0xab)][_0x11b18e][_0xc18b9(0xab)]);let _0x40dca4,_0x1ab1d1;for(let _0x8557a of $a)if(_0x40dca4=_0x262621[_0xc18b9(0xab)][_0x8557a],_0x40dca4){_0x1ab1d1=_0x8557a;break;}if(!_0x40dca4)throw _0xc18b9(0xfc);typeof _0x40dca4['mediaKey']==_0xc18b9(0x2b9)&&(_0x262621[_0xc18b9(0xab)]=JSON['parse'](JSON[_0xc18b9(0x52f)](_0x262621['message'])));let _0x1c716e=await(0x0,w[_0xc18b9(0x705)])({'key':_0x262621?.[_0xc18b9(0x56d)],'message':_0x262621?.[_0xc18b9(0xab)]},_0xc18b9(0x701),{},{'logger':(0x0,qt[_0xc18b9(0x339)])({'level':'silent'}),'reuploadRequest':this[_0xc18b9(0x29a)][_0xc18b9(0x162)]});if(!(_0x1c716e instanceof Buffer))throw new Error(_0xc18b9(0x7c4));let _0x2b1198=this[_0xc18b9(0x45a)][_0xc18b9(0x58b)](_0xc18b9(0xf4)),_0x4280b8,_0x4eba84;if(_0x40dca4[_0xc18b9(0x5e6)])_0x4280b8=_0x40dca4['fileName'];else{let _0x1a3ea8=_0x40dca4['mimetype']?.[_0xc18b9(0x3b6)](/\/(\w+)/),_0xcda3f5=_0x1a3ea8?_0x1a3ea8[0x1]:null;if(!_0xcda3f5)throw new Error('File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message');_0x4280b8=(0x0,X['v4'])()+'.'+_0xcda3f5;}_0x1ab1d1==='audioMessage'?_0x4eba84=_0xc18b9(0x53b)+await this[_0xc18b9(0x22e)](_0x1c716e[_0xc18b9(0x13c)](_0xc18b9(0x791))):(await this[_0xc18b9(0x376)](_0x1c716e,_0x4280b8),_0x4eba84=_0xc18b9(0x53b)+_0x4280b8);let _0x2e5746=this[_0xc18b9(0x45a)][_0xc18b9(0x58b)](_0xc18b9(0x43f))['URL'];if(!_0x2e5746){let _0x528919=this[_0xc18b9(0x45a)][_0xc18b9(0x58b)](_0xc18b9(0x4f8));_0x2e5746=_0xc18b9(0x2ad)+(_0x528919&&_0x528919[_0xc18b9(0x6a7)][_0xc18b9(0x31c)]('/')[0x4]);}_0x4eba84=''+_0x2e5746+_0x4eba84;let _0x12f6e2=0xc*0x3c*0x3c*0x3e8,_0x3bb444={'where':{'_id':_0x262621[_0xc18b9(0x56d)]['id']}},_0x3dda67={'message_normalized.fileUrl':_0x4eba84,'message_normalized.expires_fileUrl':Date['now']()+_0x12f6e2};try{let _0x20c6cd=await this[_0xc18b9(0x782)][_0xc18b9(0xab)][_0xc18b9(0x7c2)](_0x3bb444,_0x3dda67,this[_0xc18b9(0x21b)][_0xc18b9(0x228)]);_0x20c6cd&&q(this[_0xc18b9(0x5b1)],_0xc18b9(0x50b),{'message':_0x20c6cd});}catch(_0x105b1f){let _0x44f61e='Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage',_0x4439a8=_0x105b1f instanceof Error?_0x105b1f[_0xc18b9(0xab)]:typeof _0x105b1f==_0xc18b9(0x2b9)?JSON[_0xc18b9(0x52f)](_0x105b1f):_0x105b1f,_0x44ec03=_0x44f61e+':\x20'+_0x4439a8;this['logger'][_0xc18b9(0x5f8)](this[_0xc18b9(0x5b1)]+'\x20('+this[_0xc18b9(0x21b)][_0xc18b9(0x228)]+_0xc18b9(0x46a)+_0x44ec03);}return{'mediaType':_0x1ab1d1,'fileName':_0x40dca4[_0xc18b9(0x5e6)],'caption':_0x40dca4['caption'],'size':{'fileLength':_0x40dca4['fileLength'],'height':_0x40dca4[_0xc18b9(0x66d)],'width':_0x40dca4[_0xc18b9(0x291)]},'mimetype':_0x40dca4['mimetype'],'base64':_0x1c716e[_0xc18b9(0x13c)](_0xc18b9(0x791)),'fileUrl':_0x4eba84,'expires_fileUrl':Date['now']()+_0x12f6e2};}catch(_0x5d9495){let _0x140069=_0xc18b9(0x182),_0x25552d=_0x5d9495 instanceof Error?_0x5d9495[_0xc18b9(0xab)]:typeof _0x5d9495==_0xc18b9(0x2b9)?JSON['stringify'](_0x5d9495):_0x5d9495,_0x11744b=_0x140069+':\x20'+_0x25552d;throw this[_0xc18b9(0x664)][_0xc18b9(0x5f8)](this[_0xc18b9(0x5b1)]+'\x20('+this[_0xc18b9(0x21b)][_0xc18b9(0x228)]+_0xc18b9(0x46a)+_0x11744b),new m(_0x11744b);}}async[a0_0x4a47c0(0x376)](_0x469fc5,_0x104c73){const _0x458374=a0_0x4a47c0;let _0x5c1ccd=j[_0x458374(0x339)][_0x458374(0x258)](__dirname,_0x458374(0x442));F[_0x458374(0x7c5)](_0x5c1ccd)||F[_0x458374(0xfb)](_0x5c1ccd,{'recursive':!0x0});let _0x4cd95a=j[_0x458374(0x339)]['join'](_0x5c1ccd,_0x104c73);return new Promise((_0x36b567,_0x289a01)=>{const _0x2d0fc7=_0x458374;F[_0x2d0fc7(0x3f2)](_0x4cd95a,_0x469fc5,_0x271041=>{const _0x568ec3=_0x2d0fc7;_0x271041?(this['logger']['error'](_0x568ec3(0x5fa)+(_0x271041 instanceof Error?_0x271041[_0x568ec3(0xab)]:JSON[_0x568ec3(0x52f)](_0x271041,null,0x2))),_0x289a01(_0x271041)):(this[_0x568ec3(0x664)][_0x568ec3(0x18d)](_0x568ec3(0xd2)+_0x4cd95a),_0x36b567(_0x4cd95a));});});}async['fetchContacts'](_0xc72ced){const _0x30721a=a0_0x4a47c0;return await this['repository']['contact'][_0x30721a(0x2ba)](_0xc72ced,this[_0x30721a(0x21b)]['wuid']);}async[a0_0x4a47c0(0x4c8)](){const _0x2f4e7b=a0_0x4a47c0;return await this['repository'][_0x2f4e7b(0x34b)][_0x2f4e7b(0x2ba)]({'where':{}},this[_0x2f4e7b(0x21b)][_0x2f4e7b(0x228)]);}async[a0_0x4a47c0(0x42f)](_0x2a205c){const _0x52cdbc=a0_0x4a47c0;return await this[_0x52cdbc(0x782)][_0x52cdbc(0xab)][_0x52cdbc(0x2ba)](_0x2a205c,this[_0x52cdbc(0x21b)][_0x52cdbc(0x228)]);}async[a0_0x4a47c0(0x4d3)](){const _0x15f42c=a0_0x4a47c0;return this[_0x15f42c(0x782)][_0x15f42c(0x316)]['removeUnusedChatFields'](this[_0x15f42c(0x21b)][_0x15f42c(0x228)]),this['repository']['chat'][_0x15f42c(0x6ac)](this[_0x15f42c(0x21b)][_0x15f42c(0x228)]),this[_0x15f42c(0x782)][_0x15f42c(0x316)][_0x15f42c(0x2e9)](this[_0x15f42c(0x21b)]['wuid']),this[_0x15f42c(0x782)][_0x15f42c(0x316)][_0x15f42c(0x7d8)](this[_0x15f42c(0x21b)]['wuid']),await this[_0x15f42c(0x782)][_0x15f42c(0x316)][_0x15f42c(0x2ba)]({'where':{}},this[_0x15f42c(0x21b)]['wuid']);}async[a0_0x4a47c0(0x463)](_0x558c38){const _0x534995=a0_0x4a47c0;try{if(!Array[_0x534995(0x18e)](_0x558c38)||_0x558c38[_0x534995(0x415)]===0x0)throw new Error(_0x534995(0x576));let _0x58e75b=[],_0x3cd322=[];for(let _0x5d6d28 of _0x558c38){if(_0x5d6d28[_0x534995(0x443)])_0x5d6d28[_0x534995(0x443)]=this[_0x534995(0x117)](_0x5d6d28['_id']);else continue;await this[_0x534995(0x782)]['chat'][_0x534995(0xb1)]({'where':{'_id':_0x5d6d28[_0x534995(0x443)]}},this['instance'][_0x534995(0x228)])?_0x3cd322[_0x534995(0x723)]({'_id':_0x5d6d28[_0x534995(0x443)],'leadInfo':_0x5d6d28[_0x534995(0xa5)],'owner':this[_0x534995(0x21b)][_0x534995(0x228)]}):_0x58e75b['push']({'_id':_0x5d6d28['_id'],'owner':this[_0x534995(0x21b)][_0x534995(0x228)],'leadInfo':_0x5d6d28[_0x534995(0xa5)],'imported':!0x0});}return _0x3cd322[_0x534995(0x415)]>0x0&&await this[_0x534995(0x782)][_0x534995(0x316)][_0x534995(0x2aa)](_0x3cd322[_0x534995(0x4b0)](_0x3b04d3=>({'query':{'where':{'_id':_0x3b04d3[_0x534995(0x443)],'owner':this['instance'][_0x534995(0x228)]}},'update':_0x3b04d3}))),_0x58e75b[_0x534995(0x415)]>0x0&&await this[_0x534995(0x782)][_0x534995(0x316)][_0x534995(0x1e0)](_0x58e75b,this['instance'][_0x534995(0x228)]),{'updated':_0x3cd322[_0x534995(0x415)],'inserted':_0x58e75b['length']};}catch(_0x35beb6){let _0x41951d=_0x534995(0x66e),_0xa56066=_0x35beb6 instanceof Error?_0x35beb6[_0x534995(0xab)]:typeof _0x35beb6==_0x534995(0x2b9)?JSON[_0x534995(0x52f)](_0x35beb6):_0x35beb6,_0x54691b=_0x41951d+':\x20'+_0xa56066;throw this['logger'][_0x534995(0x5f8)](this[_0x534995(0x5b1)]+'\x20('+this[_0x534995(0x21b)][_0x534995(0x228)]+_0x534995(0x46a)+_0x54691b),new m(_0x54691b);}}async['importChats'](_0x2312d1){const _0x5d56e8=a0_0x4a47c0;try{if(!Array['isArray'](_0x2312d1)||_0x2312d1[_0x5d56e8(0x415)]===0x0)throw new Error(_0x5d56e8(0x576));let _0x94e85b=0x64,_0x15a833=0x0;for(let _0x126709=0x0;_0x126709<_0x2312d1[_0x5d56e8(0x415)];_0x126709+=_0x94e85b){let _0x13901b=_0x2312d1['slice'](_0x126709,_0x126709+_0x94e85b),{updated:_0x1db2d3}=await this[_0x5d56e8(0x489)](_0x13901b);_0x15a833+=_0x1db2d3;}return{'updated':_0x15a833};}catch(_0x34a8f3){let _0x3c4ccc=_0x5d56e8(0x66e),_0x499ab9=_0x34a8f3 instanceof Error?_0x34a8f3[_0x5d56e8(0xab)]:typeof _0x34a8f3==_0x5d56e8(0x2b9)?JSON['stringify'](_0x34a8f3):_0x34a8f3,_0x5bcfb6=_0x3c4ccc+':\x20'+_0x499ab9;throw this['logger'][_0x5d56e8(0x5f8)](this['instanceName']+'\x20('+this[_0x5d56e8(0x21b)][_0x5d56e8(0x228)]+_0x5d56e8(0x46a)+_0x5bcfb6),new m(_0x5bcfb6);}}async['importChatsBatch'](_0x5a9bfa){const _0x2d77f4=a0_0x4a47c0;try{let _0xfce155=await this[_0x2d77f4(0x782)]['label'][_0x2d77f4(0x2ba)]({'where':{}},this['instance']['wuid']),_0x20fad3=new Set(_0xfce155[_0x2d77f4(0x4b0)](_0x52659f=>_0x52659f[_0x2d77f4(0x443)])),_0xb3cc27=[],_0x2bb6ab=[];for(let _0x206ce0 of _0x5a9bfa){if(!_0x206ce0[_0x2d77f4(0x443)])continue;_0x206ce0[_0x2d77f4(0x443)]=this[_0x2d77f4(0x117)](_0x206ce0[_0x2d77f4(0x443)]);let _0x4dc870=await this['repository'][_0x2d77f4(0x316)][_0x2d77f4(0xb1)]({'where':{'_id':_0x206ce0[_0x2d77f4(0x443)]}},this[_0x2d77f4(0x21b)][_0x2d77f4(0x228)]),_0x11364e={};if(Object[_0x2d77f4(0x3ce)](_0x206ce0['leadInfo'])[_0x2d77f4(0x9e)](([_0x412ee7,_0x3d3014])=>{_0x11364e['leadInfo.'+_0x412ee7]=_0x3d3014;}),_0x4dc870&&!_0x4dc870['imported']){let _0x1aa9a7=(_0x206ce0[_0x2d77f4(0xa5)][_0x2d77f4(0x747)]||[])['filter'](_0x2a29d4=>_0x20fad3[_0x2d77f4(0x130)](_0x2a29d4)),_0x2aafda=new Set(_0x4dc870[_0x2d77f4(0xa5)]['etiquetas']||[]),_0x308fad=_0x1aa9a7[_0x2d77f4(0x635)](_0x29611d=>!_0x2aafda['has'](_0x29611d)),_0x3f3a66=[..._0x2aafda][_0x2d77f4(0x635)](_0x5072ea=>!_0x1aa9a7['includes'](_0x5072ea));_0x2bb6ab['push'](..._0x308fad[_0x2d77f4(0x4b0)](_0xb9e36f=>this[_0x2d77f4(0x530)](_0xb9e36f,_0x206ce0[_0x2d77f4(0x443)]))),_0x2bb6ab['push'](..._0x3f3a66[_0x2d77f4(0x4b0)](_0x296b92=>this[_0x2d77f4(0x5ae)](_0x296b92,_0x206ce0[_0x2d77f4(0x443)]))),_0x206ce0['leadInfo']['etiquetas']=_0x1aa9a7,_0xb3cc27[_0x2d77f4(0x723)]({'query':{'where':{'_id':_0x206ce0[_0x2d77f4(0x443)],'owner':this[_0x2d77f4(0x21b)][_0x2d77f4(0x228)]}},'update':_0x11364e});}else _0x11364e['imported']=!0x0,_0xb3cc27[_0x2d77f4(0x723)]({'query':{'where':{'_id':_0x206ce0[_0x2d77f4(0x443)],'owner':this[_0x2d77f4(0x21b)]['wuid']}},'update':_0x11364e});}let _0x43bdbf=await this['repository']['chat'][_0x2d77f4(0x2aa)](_0xb3cc27);return await Promise['all'](_0x2bb6ab),{'updated':_0x43bdbf};}catch(_0x43cdaf){let _0xecf89d=_0x2d77f4(0x66e),_0x4348a1=_0x43cdaf instanceof Error?_0x43cdaf[_0x2d77f4(0xab)]:typeof _0x43cdaf==_0x2d77f4(0x2b9)?JSON[_0x2d77f4(0x52f)](_0x43cdaf):_0x43cdaf,_0x3c967f=_0xecf89d+':\x20'+_0x4348a1;throw this[_0x2d77f4(0x664)][_0x2d77f4(0x5f8)](this[_0x2d77f4(0x5b1)]+'\x20('+this[_0x2d77f4(0x21b)][_0x2d77f4(0x228)]+_0x2d77f4(0x46a)+_0x3c967f),new m(_0x3c967f);}}async[a0_0x4a47c0(0x74b)](){const _0x2d3998=a0_0x4a47c0;return await this[_0x2d3998(0x29a)][_0x2d3998(0x74b)]();}async['updatePrivacySettings'](_0x5a9ba9){const _0x4d3049=a0_0x4a47c0;try{return await this['client']['updateReadReceiptsPrivacy'](_0x5a9ba9[_0x4d3049(0x2ef)][_0x4d3049(0x1f9)]),await this[_0x4d3049(0x29a)][_0x4d3049(0x4af)](_0x5a9ba9[_0x4d3049(0x2ef)][_0x4d3049(0x70f)]),await this['client'][_0x4d3049(0x4f7)](_0x5a9ba9[_0x4d3049(0x2ef)][_0x4d3049(0x7ae)]),await this[_0x4d3049(0x29a)][_0x4d3049(0x2f6)](_0x5a9ba9[_0x4d3049(0x2ef)][_0x4d3049(0x4c7)]),await this[_0x4d3049(0x29a)]['updateLastSeenPrivacy'](_0x5a9ba9[_0x4d3049(0x2ef)]['last']),await this[_0x4d3049(0x29a)][_0x4d3049(0x403)](_0x5a9ba9[_0x4d3049(0x2ef)][_0x4d3049(0x399)]),this[_0x4d3049(0x29a)]?.['ws']?.[_0x4d3049(0x735)](),{'update':_0x4d3049(0x355),'data':{'readreceipts':_0x5a9ba9['privacySettings']['readreceipts'],'profile':_0x5a9ba9[_0x4d3049(0x2ef)][_0x4d3049(0x70f)],'status':_0x5a9ba9[_0x4d3049(0x2ef)][_0x4d3049(0x7ae)],'online':_0x5a9ba9[_0x4d3049(0x2ef)][_0x4d3049(0x4c7)],'last':_0x5a9ba9['privacySettings'][_0x4d3049(0x3aa)],'groupadd':_0x5a9ba9['privacySettings'][_0x4d3049(0x399)]}};}catch(_0x4b3a68){let _0x9d4b=_0x4d3049(0x649),_0x26a033=_0x4b3a68 instanceof Error?_0x4b3a68[_0x4d3049(0xab)]:typeof _0x4b3a68==_0x4d3049(0x2b9)?JSON['stringify'](_0x4b3a68):_0x4b3a68,_0x1f3ee7=_0x9d4b+':\x20'+_0x26a033;throw this[_0x4d3049(0x664)]['error'](this[_0x4d3049(0x5b1)]+'\x20('+this[_0x4d3049(0x21b)][_0x4d3049(0x228)]+_0x4d3049(0x46a)+_0x1f3ee7),new m(_0x1f3ee7);}}async[a0_0x4a47c0(0x12c)](_0x92f2a4){const _0x340edf=a0_0x4a47c0;let _0x526b06=(_0x92f2a4?this[_0x340edf(0x117)](_0x92f2a4):this[_0x340edf(0x29a)]?.[_0x340edf(0x214)]?.['id'])[_0x340edf(0x470)](/:\d{1,2}@/g,'@');this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x340edf(0x21b)][_0x340edf(0x228)]+_0x340edf(0x490)+_0x526b06);let _0x141540=await this[_0x340edf(0x782)][_0x340edf(0x42c)][_0x340edf(0xb1)]({'where':{'_id':_0x526b06}},this[_0x340edf(0x21b)][_0x340edf(0x228)]),_0x53f077=_0x141540?_0x141540[_0x340edf(0x419)]:null;try{let _0x556bbd=(await this['whatsappNumber']({'numbers':[_0x526b06]}))?.[_0x340edf(0xe7)](),_0x354e2d=(await this['findAndUpdateCacheContact'](_0x526b06,null,!0x1))[_0x340edf(0x684)][_0x340edf(0x79a)],_0x578d6e=await this[_0x340edf(0x520)](_0x556bbd?.[_0x340edf(0x304)]),_0x56799c=await this[_0x340edf(0x4f1)](_0x556bbd?.['jid']),_0x414479=(await this['findAndUpdateCacheContact'](_0x526b06,null,!0x1))['cachedContact'][_0x340edf(0x25b)],_0x4bb4f1=await this[_0x340edf(0x782)][_0x340edf(0x316)]['findOne']({'where':{'_id':_0x526b06}},this['instance'][_0x340edf(0x228)]),_0x53de82={'imagechat':_0x354e2d,'contactname':_0x53f077||null,'pushName':_0x414479,'status':_0x578d6e?.['status'],'isBusiness':_0x56799c[_0x340edf(0x147)],'email':_0x56799c?.[_0x340edf(0x35d)],'description':_0x56799c?.[_0x340edf(0x205)],'website':_0x56799c?.['website']?.['shift'](),'lastcache':Date[_0x340edf(0x331)](),'imported':!_0x4bb4f1},_0x346910=await this[_0x340edf(0x782)][_0x340edf(0x316)][_0x340edf(0xc6)]({'where':{'_id':_0x526b06}},_0x53de82,this[_0x340edf(0x21b)]['wuid']),_0x247af2={'owner':this[_0x340edf(0x21b)][_0x340edf(0x228)],'_id':_0x526b06,'profilePictureUrl':_0x354e2d,'status':_0x578d6e?.['status']};return this[_0x340edf(0x782)]['contact'][_0x340edf(0x7c2)]([_0x247af2],this[_0x340edf(0x21b)][_0x340edf(0x228)]),_0x346910&&q(this[_0x340edf(0x5b1)],'chats',{'chat':_0x346910}),{'wuid':_0x556bbd?.[_0x340edf(0x304)]||_0x526b06,'name':_0x556bbd?.['name'],'pushName':_0x414479,'numberExists':_0x556bbd?.[_0x340edf(0x32b)],'picture':_0x354e2d,'status':_0x578d6e?.[_0x340edf(0x7ae)],'isBusiness':_0x56799c[_0x340edf(0x147)],'email':_0x56799c?.[_0x340edf(0x35d)],'description':_0x56799c?.[_0x340edf(0x205)],'website':_0x56799c?.[_0x340edf(0x5dd)]?.[_0x340edf(0xe7)]()};}catch(_0x3e9e18){return this[_0x340edf(0x664)]['error']('Error\x20fetching\x20and\x20updating\x20profile:\x20'+(_0x3e9e18 instanceof Error?_0x3e9e18[_0x340edf(0xab)]:JSON['stringify'](_0x3e9e18,null,0x2))),{};}}async[a0_0x4a47c0(0x4f1)](_0xb6ca7d){const _0x231896=a0_0x4a47c0;this[_0x231896(0x664)][_0x231896(0x7bf)](this[_0x231896(0x5b1)]+'\x20('+this[_0x231896(0x21b)][_0x231896(0x228)]+'):Fetching\x20business\x20profile');try{let _0x22acee=_0xb6ca7d?this['createJid'](_0xb6ca7d):this['instance'][_0x231896(0x228)],_0x2168de=await this['client'][_0x231896(0x587)](_0x22acee);return this[_0x231896(0x664)][_0x231896(0x7bf)](this[_0x231896(0x5b1)]+'\x20('+this[_0x231896(0x21b)]['wuid']+'):Trying\x20to\x20get\x20business\x20profile'),_0x2168de?(this[_0x231896(0x664)]['verbose'](this[_0x231896(0x5b1)]+'\x20('+this[_0x231896(0x21b)][_0x231896(0x228)]+'):Business\x20profile\x20fetched'),{'isBusiness':!0x0,..._0x2168de}):{'isBusiness':!0x1,'message':_0x231896(0x64b),...(await this[_0x231896(0x14c)]({'numbers':[_0x22acee]}))?.[_0x231896(0xe7)]()};}catch(_0x480757){let _0x4b988f='Falha\x20ao\x20processar\x20fetchBusinessProfile',_0x23243=_0x480757 instanceof Error?_0x480757[_0x231896(0xab)]:typeof _0x480757==_0x231896(0x2b9)?JSON[_0x231896(0x52f)](_0x480757):_0x480757,_0x3b919d=_0x4b988f+':\x20'+_0x23243;throw this['logger']['error'](this[_0x231896(0x5b1)]+'\x20('+this[_0x231896(0x21b)][_0x231896(0x228)]+_0x231896(0x46a)+_0x3b919d),new x(_0x3b919d);}}async[a0_0x4a47c0(0x520)](_0x10919a){const _0x10514f=a0_0x4a47c0;let _0x4ba1f5=this[_0x10514f(0x117)](_0x10919a);try{return{'wuid':_0x4ba1f5,'status':(await this[_0x10514f(0x29a)][_0x10514f(0x6a6)](_0x4ba1f5))?.[_0x10514f(0x7ae)]};}catch{return{'wuid':_0x4ba1f5,'status':null};}}async['updateProfileName'](_0x1d2b79){const _0x28d680=a0_0x4a47c0;try{return await this[_0x28d680(0x29a)][_0x28d680(0x71c)](_0x1d2b79),{'update':_0x28d680(0x355)};}catch(_0x6dd76e){let _0xc0cdc0=_0x28d680(0x686),_0x5c6415=_0x6dd76e instanceof Error?_0x6dd76e['message']:typeof _0x6dd76e=='object'?JSON[_0x28d680(0x52f)](_0x6dd76e):_0x6dd76e,_0x32197e=_0xc0cdc0+':\x20'+_0x5c6415;throw this[_0x28d680(0x664)][_0x28d680(0x5f8)](this[_0x28d680(0x5b1)]+'\x20('+this['instance'][_0x28d680(0x228)]+_0x28d680(0x46a)+_0x32197e),new x(_0x32197e);}}async[a0_0x4a47c0(0x742)](_0x236740){const _0x1c2182=a0_0x4a47c0;try{return await this[_0x1c2182(0x29a)][_0x1c2182(0x742)](_0x236740),{'update':_0x1c2182(0x355)};}catch(_0x71a62b){let _0x1373bb=_0x1c2182(0x663),_0x1db176=_0x71a62b instanceof Error?_0x71a62b[_0x1c2182(0xab)]:typeof _0x71a62b==_0x1c2182(0x2b9)?JSON['stringify'](_0x71a62b):_0x71a62b,_0x25ed45=_0x1373bb+':\x20'+_0x1db176;throw this[_0x1c2182(0x664)][_0x1c2182(0x5f8)](this[_0x1c2182(0x5b1)]+'\x20('+this['instance'][_0x1c2182(0x228)]+_0x1c2182(0x46a)+_0x25ed45),new x(_0x25ed45);}}async[a0_0x4a47c0(0x44a)](_0x2785f4){const _0x4f244e=a0_0x4a47c0;try{let _0x3d5de5;if((0x0,L['isURL'])(_0x2785f4)){let _0x1a4564=new Date()['getTime'](),_0x574fa5=_0x2785f4+_0x4f244e(0x18c)+_0x1a4564;_0x3d5de5=(await te[_0x4f244e(0x339)][_0x4f244e(0x58b)](_0x574fa5,{'responseType':_0x4f244e(0x2c0)}))[_0x4f244e(0x37a)];}else{if((0x0,L[_0x4f244e(0x2fc)])(_0x2785f4))_0x3d5de5=Buffer[_0x4f244e(0x179)](_0x2785f4,_0x4f244e(0x791));else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this[_0x4f244e(0x29a)][_0x4f244e(0x44a)](this['instance'][_0x4f244e(0x228)],_0x3d5de5),{'update':_0x4f244e(0x355)};}catch(_0xa24a96){let _0x1b7524='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture',_0x5d681b=_0xa24a96 instanceof Error?_0xa24a96[_0x4f244e(0xab)]:typeof _0xa24a96==_0x4f244e(0x2b9)?JSON['stringify'](_0xa24a96):_0xa24a96,_0x74126d=_0x1b7524+':\x20'+_0x5d681b;throw this[_0x4f244e(0x664)][_0x4f244e(0x5f8)](this[_0x4f244e(0x5b1)]+'\x20('+this['instance'][_0x4f244e(0x228)]+_0x4f244e(0x46a)+_0x74126d),new x(_0x74126d);}}async['removeProfilePicture'](){const _0x2febc1=a0_0x4a47c0;try{return await this[_0x2febc1(0x29a)][_0x2febc1(0x6bf)](this['instance'][_0x2febc1(0x228)]),{'update':_0x2febc1(0x355)};}catch(_0x338e06){let _0x141112=_0x2febc1(0x397),_0xf8cc8d=_0x338e06 instanceof Error?_0x338e06[_0x2febc1(0xab)]:typeof _0x338e06==_0x2febc1(0x2b9)?JSON[_0x2febc1(0x52f)](_0x338e06):_0x338e06,_0x6a407f=_0x141112+':\x20'+_0xf8cc8d;throw this[_0x2febc1(0x664)][_0x2febc1(0x5f8)](this[_0x2febc1(0x5b1)]+'\x20('+this['instance'][_0x2febc1(0x228)]+_0x2febc1(0x46a)+_0x6a407f),new x(_0x6a407f);}}async['createGroup'](_0x7722a8){const _0x5d529f=a0_0x4a47c0;try{let _0x2f259f=(await this['whatsappNumber']({'numbers':_0x7722a8[_0x5d529f(0x249)]}))['filter'](_0x499f59=>_0x499f59[_0x5d529f(0x32b)])[_0x5d529f(0x4b0)](_0x79d713=>_0x79d713['jid']),{id:_0x35c061}=await this[_0x5d529f(0x29a)]['groupCreate'](_0x7722a8['subject'],_0x2f259f);_0x7722a8?.[_0x5d529f(0x205)]&&await this[_0x5d529f(0x29a)]['groupUpdateDescription'](_0x35c061,_0x7722a8['description']);let _0x3b8538=await this[_0x5d529f(0x29a)][_0x5d529f(0x27f)](_0x35c061);return _0x3b8538[_0x5d529f(0x748)]=[],{'metadata':_0x3b8538};}catch(_0x35e5c8){let _0x4e9195=_0x5d529f(0x6c5),_0x4a4a80=_0x35e5c8 instanceof Error?_0x35e5c8[_0x5d529f(0xab)]:typeof _0x35e5c8==_0x5d529f(0x2b9)?JSON[_0x5d529f(0x52f)](_0x35e5c8):_0x35e5c8,_0x25f4d9=_0x4e9195+':\x20'+_0x4a4a80;throw this[_0x5d529f(0x664)][_0x5d529f(0x5f8)](this[_0x5d529f(0x5b1)]+'\x20('+this[_0x5d529f(0x21b)][_0x5d529f(0x228)]+_0x5d529f(0x46a)+_0x25f4d9),new x(_0x25f4d9);}}async[a0_0x4a47c0(0x57a)](_0x3fa56b){const _0xd19388=a0_0x4a47c0;try{if(_0x3fa56b['restrict']===!0x0&&await this['client']['groupSettingUpdate'](_0x3fa56b['groupJid'],_0xd19388(0x639)),_0x3fa56b['restrict']===!0x1&&await this[_0xd19388(0x29a)][_0xd19388(0x418)](_0x3fa56b[_0xd19388(0x39e)],_0xd19388(0x4d5)),_0x3fa56b[_0xd19388(0x7df)]===!0x0&&await this[_0xd19388(0x29a)][_0xd19388(0x418)](_0x3fa56b[_0xd19388(0x39e)],_0xd19388(0x439)),_0x3fa56b['announce']===!0x1&&await this[_0xd19388(0x29a)][_0xd19388(0x418)](_0x3fa56b[_0xd19388(0x39e)],_0xd19388(0x510)),_0x3fa56b[_0xd19388(0x6e3)]===!0x0&&await this[_0xd19388(0x29a)][_0xd19388(0x38f)](_0x3fa56b[_0xd19388(0x39e)],_0xd19388(0x58f)),_0x3fa56b['memberAddMode']===!0x1&&await this[_0xd19388(0x29a)]['groupMemberAddMode'](_0x3fa56b['groupJid'],_0xd19388(0x4d4)),_0x3fa56b['joinApprovalMode']===!0x0&&await this[_0xd19388(0x29a)]['groupJoinApprovalMode'](_0x3fa56b[_0xd19388(0x39e)],'on'),_0x3fa56b[_0xd19388(0x235)]===!0x1&&await this[_0xd19388(0x29a)][_0xd19388(0x52d)](_0x3fa56b[_0xd19388(0x39e)],_0xd19388(0x142)),typeof _0x3fa56b['expiration']<'u'&&_0x3fa56b['expiration']!==null&&await this['client'][_0xd19388(0x4e8)](_0x3fa56b[_0xd19388(0x39e)],_0x3fa56b[_0xd19388(0x745)]),_0x3fa56b['name']&&await this[_0xd19388(0x29a)][_0xd19388(0x56f)](_0x3fa56b[_0xd19388(0x39e)],_0x3fa56b[_0xd19388(0x25b)]),_0x3fa56b[_0xd19388(0x205)]&&await this[_0xd19388(0x29a)]['groupUpdateDescription'](_0x3fa56b[_0xd19388(0x39e)],_0x3fa56b[_0xd19388(0x205)]),_0x3fa56b['image']){let _0x42c23d;if((0x0,L[_0xd19388(0x7a7)])(_0x3fa56b[_0xd19388(0x2fb)])){let _0x4a0f66=new Date()[_0xd19388(0x319)](),_0x4043bb=_0x3fa56b[_0xd19388(0x2fb)]+_0xd19388(0x18c)+_0x4a0f66;_0x42c23d=(await te[_0xd19388(0x339)][_0xd19388(0x58b)](_0x4043bb,{'responseType':_0xd19388(0x2c0)}))[_0xd19388(0x37a)];}else{if((0x0,L[_0xd19388(0x2fc)])(_0x3fa56b[_0xd19388(0x2fb)]))_0x42c23d=Buffer['from'](_0x3fa56b[_0xd19388(0x2fb)],'base64');else throw new m(_0xd19388(0x16c));}await this[_0xd19388(0x29a)][_0xd19388(0x44a)](_0x3fa56b[_0xd19388(0x39e)],_0x42c23d);}return await this[_0xd19388(0x3d9)]({'groupJid':_0x3fa56b[_0xd19388(0x39e)]});}catch(_0x4cc2e7){let _0x3bb1ff=_0xd19388(0x1fc),_0x11e814=_0x4cc2e7 instanceof Error?_0x4cc2e7['message']:typeof _0x4cc2e7=='object'?JSON['stringify'](_0x4cc2e7):_0x4cc2e7,_0x4faf25=_0x3bb1ff+':\x20'+_0x11e814;throw this['logger'][_0xd19388(0x5f8)](this[_0xd19388(0x5b1)]+'\x20('+this[_0xd19388(0x21b)]['wuid']+_0xd19388(0x46a)+_0x4faf25),new x(_0x4faf25);}}async[a0_0x4a47c0(0x629)](_0x11ff1d){const _0x209f74=a0_0x4a47c0;try{if(_0x11ff1d[_0x209f74(0x6ad)]===_0x209f74(0x54b)||_0x11ff1d['action']==='reject'){let _0x5d6f2e=_0x11ff1d[_0x209f74(0x249)][_0x209f74(0x4b0)](_0x5334e9=>this[_0x209f74(0x117)](_0x5334e9));await this[_0x209f74(0x29a)]['groupRequestParticipantsUpdate'](_0x11ff1d[_0x209f74(0x39e)],_0x5d6f2e,_0x11ff1d[_0x209f74(0x6ad)]);}else{if(_0x11ff1d[_0x209f74(0x6ad)]===_0x209f74(0x4b1)){let _0x3ff926=(await this[_0x209f74(0x14c)]({'numbers':_0x11ff1d[_0x209f74(0x249)]}))[_0x209f74(0x635)](_0x3c2eb8=>_0x3c2eb8[_0x209f74(0x32b)])['map'](_0x494227=>this[_0x209f74(0x117)](_0x494227[_0x209f74(0x304)]));if(_0x3ff926[_0x209f74(0x415)]===0x0)throw new m(_0x209f74(0x6a8));await this[_0x209f74(0x29a)][_0x209f74(0x561)](_0x11ff1d[_0x209f74(0x39e)],_0x3ff926,'add');}else{let _0x5ce865=_0x11ff1d['participants'][_0x209f74(0x4b0)](_0x355911=>this['createJid'](_0x355911));await this[_0x209f74(0x29a)]['groupParticipantsUpdate'](_0x11ff1d[_0x209f74(0x39e)],_0x5ce865,_0x11ff1d[_0x209f74(0x6ad)]);}}return await this[_0x209f74(0x3d9)]({'groupJid':_0x11ff1d[_0x209f74(0x39e)]});}catch(_0x1720de){let _0x130d98=_0x209f74(0x781),_0x2e768d=_0x1720de instanceof Error?_0x1720de['message']:typeof _0x1720de==_0x209f74(0x2b9)?JSON[_0x209f74(0x52f)](_0x1720de):_0x1720de,_0x2d2d91=_0x130d98+':\x20'+_0x2e768d;throw this[_0x209f74(0x664)][_0x209f74(0x5f8)](this['instanceName']+'\x20('+this['instance'][_0x209f74(0x228)]+_0x209f74(0x46a)+_0x2d2d91),new m(_0x2d2d91);}}async[a0_0x4a47c0(0x4c5)](_0x365e23){const _0x70b30d=a0_0x4a47c0;try{return await this['client'][_0x70b30d(0x4c5)](_0x365e23[_0x70b30d(0x7f8)]);}catch(_0x5b89b2){let _0x594d25=_0x70b30d(0x21e),_0x485787=_0x5b89b2 instanceof Error?_0x5b89b2['message']:typeof _0x5b89b2=='object'?JSON[_0x70b30d(0x52f)](_0x5b89b2):_0x5b89b2,_0x5b0d9f=_0x594d25+':\x20'+_0x485787;throw this[_0x70b30d(0x664)][_0x70b30d(0x5f8)](this[_0x70b30d(0x5b1)]+'\x20('+this['instance'][_0x70b30d(0x228)]+_0x70b30d(0x46a)+_0x5b0d9f),new m(_0x5b0d9f);}}async[a0_0x4a47c0(0x3d9)](_0x21955a,_0x36ab80=a0_0x4a47c0(0x6cd)){const _0x3a9b50=a0_0x4a47c0;try{let _0x4dc59e=await this[_0x3a9b50(0x782)][_0x3a9b50(0x316)][_0x3a9b50(0xb1)]({'where':{'_id':_0x21955a[_0x3a9b50(0x39e)]}},this[_0x3a9b50(0x21b)]['wuid']),_0x1389f5=_0x4dc59e?_0x4dc59e[_0x3a9b50(0x55b)]:null,_0x525aec=0x18*0x3c*0x3c*0x3e8;if(!_0x1389f5||_0x1389f5[_0x3a9b50(0x408)]&&Date[_0x3a9b50(0x331)]()-_0x1389f5['lastUpdate']>_0x525aec){let _0x3ef75d=await this['client'][_0x3a9b50(0x27f)](_0x21955a['groupJid']);if(_0x3ef75d[_0x3a9b50(0x3ac)]=_0x3ef75d?.['subjectTime']&&_0x3ef75d[_0x3a9b50(0x3ac)]['toString']()[_0x3a9b50(0x415)]<0xd?_0x3ef75d?.['subjectTime']*0x3e8:_0x3ef75d?.[_0x3a9b50(0x3ac)]||null,_0x3ef75d[_0x3a9b50(0x501)]=_0x3ef75d?.[_0x3a9b50(0x501)]&&_0x3ef75d['creation']['toString']()[_0x3a9b50(0x415)]<0xd?_0x3ef75d?.['creation']*0x3e8:_0x3ef75d?.[_0x3a9b50(0x501)]||null,_0x1389f5={..._0x3ef75d,'lastUpdate':Date[_0x3a9b50(0x331)]()},!_0x3ef75d)return;}let _0x2ffa73=_0x1389f5[_0x3a9b50(0x249)][_0x3a9b50(0x34e)](_0x41f53c=>_0x41f53c['id']===this['instance']['wuid']+_0x3a9b50(0x628)&&_0x41f53c[_0x3a9b50(0x325)]!=null);!_0x1389f5['inviteCode']&&_0x2ffa73&&(_0x1389f5[_0x3a9b50(0x7f8)]=(await this[_0x3a9b50(0x7f8)](_0x21955a,!0x1))[_0x3a9b50(0x51a)]);let _0x44c2fc=(!_0x1389f5[_0x3a9b50(0x7df)]||_0x2ffa73)&&(!_0x1389f5['isCommunity']||_0x1389f5[_0x3a9b50(0x4ba)]&&_0x1389f5[_0x3a9b50(0x7b1)]&&_0x2ffa73);_0x1389f5[_0x3a9b50(0x281)]=_0x2ffa73,_0x1389f5['canSendMessage']=_0x44c2fc;let _0x4e59a0=[];if(_0x2ffa73&&_0x1389f5[_0x3a9b50(0x235)])try{_0x4e59a0=await this[_0x3a9b50(0x29a)][_0x3a9b50(0x37d)](_0x21955a[_0x3a9b50(0x39e)]),_0x1389f5[_0x3a9b50(0x7e0)]=Date[_0x3a9b50(0x331)]();}catch(_0x3a3304){this[_0x3a9b50(0x664)][_0x3a9b50(0x7bf)](this[_0x3a9b50(0x5b1)]+'\x20('+this[_0x3a9b50(0x21b)]['wuid']+_0x3a9b50(0x342)+_0x21955a[_0x3a9b50(0x39e)]+':\x20'+(_0x3a3304 instanceof Error?_0x3a3304[_0x3a9b50(0xab)]:JSON['stringify'](_0x3a3304,null,0x2)));}try{_0x1389f5[_0x3a9b50(0x2fb)]=(await this[_0x3a9b50(0x193)](_0x21955a[_0x3a9b50(0x39e)],null,!0x0))[_0x3a9b50(0x684)][_0x3a9b50(0x79a)];}catch(_0x41478d){this['logger'][_0x3a9b50(0x7bf)](this[_0x3a9b50(0x5b1)]+'\x20('+this[_0x3a9b50(0x21b)]['wuid']+_0x3a9b50(0x552)+_0x21955a[_0x3a9b50(0x39e)]+':\x20'+(_0x41478d instanceof Error?_0x41478d[_0x3a9b50(0xab)]:JSON['stringify'](_0x41478d,null,0x2)));}let _0x2c282c=_0x1389f5[_0x3a9b50(0x249)][_0x3a9b50(0x4b0)](_0x4c57da=>_0x4c57da['id']),_0x5d900a=_0x4e59a0[_0x3a9b50(0x4b0)](_0x3c804a=>_0x3c804a[_0x3a9b50(0x304)]),_0xf26bf4=await this['repository'][_0x3a9b50(0x2ab)][_0x3a9b50(0x5a0)]([..._0x2c282c,..._0x5d900a]);_0x1389f5[_0x3a9b50(0x249)]=_0x1389f5[_0x3a9b50(0x249)][_0x3a9b50(0x4b0)](_0x10c8bc=>{const _0x1c1c95=_0x3a9b50;let _0x372176=_0xf26bf4['find'](_0x3bab98=>_0x3bab98['_id']===_0x10c8bc['id']);return{'id':_0x10c8bc['id'],'isAdmin':[_0x1c1c95(0x325),_0x1c1c95(0x140)][_0x1c1c95(0x795)](_0x10c8bc[_0x1c1c95(0x325)]),'admin':_0x10c8bc[_0x1c1c95(0x325)],'pushName':_0x372176?.[_0x1c1c95(0x25b)],'profilePictureUrl':_0x372176?.[_0x1c1c95(0x79a)]};}),_0x1389f5['awaitingApproval']=_0x4e59a0[_0x3a9b50(0x4b0)](_0x274a69=>{const _0x32da37=_0x3a9b50;let _0x4ce5e5=_0xf26bf4['find'](_0x3f6b0a=>_0x3f6b0a[_0x32da37(0x443)]===_0x274a69['jid']);return{'id':_0x274a69[_0x32da37(0x304)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x4ce5e5?.[_0x32da37(0x25b)],'profilePictureUrl':_0x4ce5e5?.[_0x32da37(0x79a)],'request_method':_0x274a69[_0x32da37(0x51f)],'request_time':_0x274a69[_0x32da37(0x714)]};});let _0x4c5c33=await this[_0x3a9b50(0x782)][_0x3a9b50(0x316)][_0x3a9b50(0xc6)]({'where':{'_id':_0x21955a['groupJid']}},{'imagechat':_0x1389f5[_0x3a9b50(0x2fb)],'name':_0x1389f5[_0x3a9b50(0x57f)],'lastcache':Date[_0x3a9b50(0x331)](),'groupdata':_0x1389f5},this[_0x3a9b50(0x21b)][_0x3a9b50(0x228)]);return q(this[_0x3a9b50(0x5b1)],_0x3a9b50(0x7a6),{'chat':_0x4c5c33}),{'metadata':_0x1389f5};}catch(_0x2f2279){if(_0x36ab80===_0x3a9b50(0x255))return;throw new J('Error\x20fetching\x20group',_0x2f2279[_0x3a9b50(0xab)][_0x3a9b50(0x13c)]());}}async[a0_0x4a47c0(0x333)](){const _0x19ef49=a0_0x4a47c0;try{this[_0x19ef49(0x664)][_0x19ef49(0x363)](_0x19ef49(0x569));let _0x5d14fa=Date[_0x19ef49(0x331)](),_0x10e0e3=0x3*0x3c*0x3c*0x3e8;return _0x5d14fa-this[_0x19ef49(0x591)]>_0x10e0e3&&(this[_0x19ef49(0x326)](),this[_0x19ef49(0x591)]=_0x5d14fa),(await this['repository'][_0x19ef49(0x316)]['findGroupsEspecial']({'where':{'group':!0x0}},this['instance']['wuid']))[_0x19ef49(0x4b0)](_0x18dac8=>({..._0x18dac8['groupdata'],'groupJid':_0x18dac8['_id'],'image':_0x18dac8[_0x19ef49(0x708)]}));}catch(_0x13a1a9){let _0x564568=_0x19ef49(0x7a8),_0x5df970=_0x13a1a9 instanceof Error?_0x13a1a9[_0x19ef49(0xab)]:typeof _0x13a1a9=='object'?JSON[_0x19ef49(0x52f)](_0x13a1a9):_0x13a1a9,_0x19e5b1=_0x564568+':\x20'+_0x5df970;throw this[_0x19ef49(0x664)]['error'](this[_0x19ef49(0x5b1)]+'\x20('+this['instance'][_0x19ef49(0x228)]+_0x19ef49(0x46a)+_0x19e5b1),new J(_0x19e5b1);}}async['findRealGroups'](){const _0x3b5952=a0_0x4a47c0;try{this['logger'][_0x3b5952(0x363)](_0x3b5952(0x570));let _0x42f1c4=[],_0x357c12=await this['client'][_0x3b5952(0x3fb)](),_0x2d4e69=Object[_0x3b5952(0x298)](_0x357c12),_0x281205=_0x2d4e69[_0x3b5952(0x635)](_0x1d6ba5=>(0x0,w[_0x3b5952(0x6a2)])(_0x1d6ba5?.['id']))[_0x3b5952(0x4b0)](async _0x1d5c8b=>{const _0x5b55b2=_0x3b5952;try{return await this[_0x5b55b2(0x29a)][_0x5b55b2(0x4bf)](_0x1d5c8b['id'],_0x5b55b2(0x30c));}catch(_0x4f939a){return this['logger'][_0x5b55b2(0x7bf)](this[_0x5b55b2(0x5b1)]+'\x20('+this[_0x5b55b2(0x21b)][_0x5b55b2(0x228)]+_0x5b55b2(0x552)+_0x1d5c8b['id']+':\x20'+(_0x4f939a instanceof Error?_0x4f939a[_0x5b55b2(0xab)]:JSON[_0x5b55b2(0x52f)](_0x4f939a,null,0x2))),null;}}),_0x383588=await Promise[_0x3b5952(0x64a)](_0x281205);for(let _0x27f8af=0x0;_0x27f8af<_0x2d4e69[_0x3b5952(0x415)];_0x27f8af++){let _0x554427=_0x2d4e69[_0x27f8af];(0x0,w[_0x3b5952(0x6a2)])(_0x554427?.['id'])&&(_0x42f1c4[_0x3b5952(0x723)]({'groupJid':_0x554427?.['id'],'subject':_0x554427?.[_0x3b5952(0x57f)],'subjectOwner':_0x554427?.['subjectOwner']?.[_0x3b5952(0x31c)]('@')[0x0],'subjectTime':_0x554427?.[_0x3b5952(0x3ac)],'creation':_0x554427?.[_0x3b5952(0x501)],'size':_0x554427?.['participants']?.[_0x3b5952(0x415)],'owner':_0x554427?.[_0x3b5952(0x3ab)]?.[_0x3b5952(0x31c)]('@')[0x0],'desc':_0x554427?.[_0x3b5952(0x40a)],'restrict':_0x554427?.[_0x3b5952(0x32a)],'announce':_0x554427?.[_0x3b5952(0x7df)],'image':_0x383588[_0x27f8af],'isCommunity':_0x554427?.[_0x3b5952(0x4ba)],'joinApprovalMode':_0x554427?.[_0x3b5952(0x235)],'memberCanAddParticipant':_0x554427?.[_0x3b5952(0x6e3)],'participants':_0x554427?.[_0x3b5952(0x249)],'descOwner':_0x554427?.[_0x3b5952(0x28f)],'descId':_0x554427?.[_0x3b5952(0x70d)],'memberAddMode':_0x554427?.[_0x3b5952(0x6e3)],'isCommunityAnnounce':_0x554427?.[_0x3b5952(0x7b1)],'ephemeralDuration':_0x554427?.[_0x3b5952(0x50d)]||0x0,'author':_0x554427?.['author']}),this[_0x3b5952(0x768)](_0x2d4e69[_0x27f8af]));}return _0x42f1c4;}catch(_0x17a036){let _0x4365c5=_0x3b5952(0x1a3),_0x48a4a3=_0x17a036 instanceof Error?_0x17a036[_0x3b5952(0xab)]:typeof _0x17a036=='object'?JSON[_0x3b5952(0x52f)](_0x17a036):_0x17a036,_0x1195f8=_0x4365c5+':\x20'+_0x48a4a3;throw this['logger'][_0x3b5952(0x5f8)](this[_0x3b5952(0x5b1)]+'\x20('+this[_0x3b5952(0x21b)][_0x3b5952(0x228)]+_0x3b5952(0x46a)+_0x1195f8),new J(_0x1195f8);}}async[a0_0x4a47c0(0x768)](_0x2b6837){const _0x2d69fe=a0_0x4a47c0;let _0x47b8cd=await this[_0x2d69fe(0x782)][_0x2d69fe(0x316)][_0x2d69fe(0xb1)]({'where':{'_id':_0x2b6837['id']}},this[_0x2d69fe(0x21b)][_0x2d69fe(0x228)]);_0x2b6837['subjectTime']=_0x2b6837?.[_0x2d69fe(0x3ac)]&&_0x2b6837[_0x2d69fe(0x3ac)][_0x2d69fe(0x13c)]()[_0x2d69fe(0x415)]<0xd?_0x2b6837?.[_0x2d69fe(0x3ac)]*0x3e8:_0x2b6837?.[_0x2d69fe(0x3ac)]||null,_0x2b6837[_0x2d69fe(0x501)]=_0x2b6837?.[_0x2d69fe(0x501)]&&_0x2b6837['creation'][_0x2d69fe(0x13c)]()[_0x2d69fe(0x415)]<0xd?_0x2b6837?.[_0x2d69fe(0x501)]*0x3e8:_0x2b6837?.[_0x2d69fe(0x501)]||null;let _0x98fd92=_0x47b8cd?.['groupdata']?.[_0x2d69fe(0x748)]||[],_0x1b57aa=_0x47b8cd?.['groupdata']?.[_0x2d69fe(0x7e0)],_0x590a32=_0x2b6837[_0x2d69fe(0x249)][_0x2d69fe(0x4b0)](_0x312504=>{const _0x876138=_0x2d69fe;let _0x1f3a91=_0x47b8cd?.[_0x876138(0x55b)]?.['participants'][_0x876138(0x2ba)](_0x39faa5=>_0x39faa5['id']===_0x312504['id']);return{..._0x312504,'isAdmin':[_0x876138(0x325),_0x876138(0x140)][_0x876138(0x795)](_0x312504['admin']),'admin':_0x312504['admin'],'name':_0x1f3a91?.[_0x876138(0x25b)]||_0x312504[_0x876138(0x25b)],'imgUrl':_0x1f3a91?.['imgUrl']||_0x312504[_0x876138(0x7c0)]};}),_0x2abede=_0x590a32[_0x2d69fe(0x34e)](_0x3328b9=>_0x3328b9['id']===this[_0x2d69fe(0x21b)][_0x2d69fe(0x228)]+'@s.whatsapp.net'&&_0x3328b9['isAdmin']),_0x154556=(!_0x2b6837['announce']||_0x2abede)&&(!_0x2b6837[_0x2d69fe(0x4ba)]||_0x2b6837[_0x2d69fe(0x4ba)]&&_0x2b6837[_0x2d69fe(0x7b1)]&&_0x2abede),_0x548e23={..._0x2b6837,'participants':_0x590a32,'awaitingApproval':_0x98fd92,'lastFetchAwaitingApproval':_0x1b57aa,'isAdmin':_0x2abede,'canSendMessage':_0x154556,'lastUpdate':Date[_0x2d69fe(0x331)]()};await this[_0x2d69fe(0x782)][_0x2d69fe(0x316)][_0x2d69fe(0xc6)]({'where':{'_id':_0x2b6837['id']}},{'name':_0x2b6837[_0x2d69fe(0x57f)],'group':!0x0,'groupdata':_0x548e23,'lastcache':Date[_0x2d69fe(0x331)]()},this[_0x2d69fe(0x21b)][_0x2d69fe(0x228)]),q(this['instanceName'],_0x2d69fe(0x7a6),{'chat':_0x2b6837});}async[a0_0x4a47c0(0x4c6)](_0x2a954e){const _0x131ebc=a0_0x4a47c0;let _0x257713=await this[_0x131ebc(0x782)][_0x131ebc(0x316)]['findOne']({'where':{'_id':_0x2a954e['id']}},this[_0x131ebc(0x21b)][_0x131ebc(0x228)]);_0x2a954e[_0x131ebc(0x3ac)]=_0x2a954e?.[_0x131ebc(0x3ac)]&&_0x2a954e['subjectTime'][_0x131ebc(0x13c)]()[_0x131ebc(0x415)]<0xd?_0x2a954e?.['subjectTime']*0x3e8:_0x2a954e?.[_0x131ebc(0x3ac)]||null,_0x2a954e['creation']=_0x2a954e?.[_0x131ebc(0x501)]&&_0x2a954e[_0x131ebc(0x501)][_0x131ebc(0x13c)]()['length']<0xd?_0x2a954e?.[_0x131ebc(0x501)]*0x3e8:_0x2a954e?.[_0x131ebc(0x501)]||null,_0x2a954e[_0x131ebc(0x7f8)]&&(_0x2a954e['inviteCode']='https://chat.whatsapp.com/'+_0x2a954e[_0x131ebc(0x7f8)]);let _0x3c502a=_0x257713?.[_0x131ebc(0x55b)]?{..._0x257713[_0x131ebc(0x55b)]}:{};Object[_0x131ebc(0x77d)](_0x2a954e)[_0x131ebc(0x9e)](_0x265b15=>{_0x265b15!=='id'&&(_0x3c502a[_0x265b15]=_0x2a954e[_0x265b15]);});let _0x5148a2=_0x3c502a[_0x131ebc(0x249)]?.['some'](_0x2f3c33=>_0x2f3c33['id']===this['instance'][_0x131ebc(0x228)]+'@s.whatsapp.net'&&_0x2f3c33[_0x131ebc(0x281)])||!0x1;_0x3c502a[_0x131ebc(0x281)]=_0x5148a2;let _0x4015a0=(!_0x3c502a[_0x131ebc(0x7df)]||_0x5148a2)&&(!_0x3c502a[_0x131ebc(0x4ba)]||_0x3c502a[_0x131ebc(0x4ba)]&&_0x3c502a[_0x131ebc(0x7b1)]&&_0x5148a2);_0x3c502a[_0x131ebc(0x70e)]=_0x4015a0;let _0x1cb9f2={'group':!0x0,'groupdata':_0x3c502a};_0x2a954e[_0x131ebc(0x57f)]&&(_0x1cb9f2['name']=_0x2a954e[_0x131ebc(0x57f)]),await this[_0x131ebc(0x782)][_0x131ebc(0x316)]['updateOne']({'where':{'_id':_0x2a954e['id']}},_0x1cb9f2,this['instance'][_0x131ebc(0x228)],{'upsert':!0x0}),q(this['instanceName'],'chats',{'chat':_0x1cb9f2});}async[a0_0x4a47c0(0x4f0)](_0x38d4ab){const _0x52cde7=a0_0x4a47c0;let _0x5329f8=await this[_0x52cde7(0x782)][_0x52cde7(0x316)][_0x52cde7(0xb1)]({'where':{'_id':_0x38d4ab['id']}},this[_0x52cde7(0x21b)]['wuid']);if(!_0x5329f8||!_0x5329f8[_0x52cde7(0x55b)]){this['logger']['info'](this[_0x52cde7(0x5b1)]+'\x20('+this[_0x52cde7(0x21b)][_0x52cde7(0x228)]+_0x52cde7(0x5b9)+_0x38d4ab['id']);return;}let _0x5d1773=await this[_0x52cde7(0x782)][_0x52cde7(0x2ab)][_0x52cde7(0x5a0)](_0x38d4ab[_0x52cde7(0x249)]),_0x6f9a7c=[..._0x5329f8[_0x52cde7(0x55b)]?.[_0x52cde7(0x249)]];switch(_0x38d4ab[_0x52cde7(0x6ad)]){case _0x52cde7(0x4b1):let _0x28ad3d=_0x5d1773[_0x52cde7(0x4b0)](_0x4eb0ea=>({'id':_0x4eb0ea['_id'],'isAdmin':!0x1,'name':_0x4eb0ea['name'],'imgUrl':_0x4eb0ea[_0x52cde7(0x79a)]}));_0x6f9a7c=[..._0x6f9a7c,..._0x28ad3d];break;case'remove':_0x6f9a7c=_0x6f9a7c[_0x52cde7(0x635)](_0x3dc6b0=>!_0x38d4ab['participants'][_0x52cde7(0x795)](_0x3dc6b0['id']));break;case _0x52cde7(0x1ca):case _0x52cde7(0x680):_0x6f9a7c=_0x6f9a7c[_0x52cde7(0x4b0)](_0x31376a=>_0x38d4ab[_0x52cde7(0x249)][_0x52cde7(0x795)](_0x31376a['id'])?{..._0x31376a,'isAdmin':_0x38d4ab['action']===_0x52cde7(0x1ca)}:_0x31376a);break;}let _0x5d49b8=_0x6f9a7c[_0x52cde7(0x415)],_0x42138d=_0x6f9a7c[_0x52cde7(0x34e)](_0x377445=>_0x377445['id']===this[_0x52cde7(0x21b)][_0x52cde7(0x228)]+_0x52cde7(0x628)),_0x51b447=_0x42138d&&_0x6f9a7c[_0x52cde7(0x34e)](_0x30e545=>_0x30e545['id']===this[_0x52cde7(0x21b)]['wuid']+_0x52cde7(0x628)&&_0x30e545[_0x52cde7(0x281)]),_0x320cc1=_0x42138d&&(!_0x5329f8[_0x52cde7(0x55b)][_0x52cde7(0x7df)]||_0x51b447)&&(!_0x5329f8[_0x52cde7(0x55b)][_0x52cde7(0x4ba)]||_0x5329f8[_0x52cde7(0x55b)][_0x52cde7(0x4ba)]&&_0x51b447);await this[_0x52cde7(0x782)][_0x52cde7(0x316)][_0x52cde7(0xc6)]({'where':{'_id':_0x38d4ab['id']}},{'groupdata':{..._0x5329f8[_0x52cde7(0x55b)],'participants':_0x6f9a7c,'size':_0x5d49b8,'isAdmin':_0x51b447,'canSendMessage':_0x320cc1}},this[_0x52cde7(0x21b)][_0x52cde7(0x228)]),this[_0x52cde7(0x664)]['info'](this['instanceName']+'\x20('+this[_0x52cde7(0x21b)]['wuid']+_0x52cde7(0x3e5)+_0x38d4ab['id']+_0x52cde7(0x557)+_0x38d4ab[_0x52cde7(0x6ad)]+',\x20Novo\x20tamanho:\x20'+_0x5d49b8+_0x52cde7(0x296)+_0x51b447+',\x20canSendMessage:\x20'+_0x320cc1);}async[a0_0x4a47c0(0x7f8)](_0x2b02dd,_0x4237a8=!0x0){const _0x25548e=a0_0x4a47c0;try{let _0x9a028d=await this['client'][_0x25548e(0x4a6)](_0x2b02dd['groupJid']),_0x5ad6a1={'groupdata.inviteCode':'https://chat.whatsapp.com/'+_0x9a028d};if(_0x4237a8){let _0x491b73=await this[_0x25548e(0x782)][_0x25548e(0x316)]['updateOne']({'where':{'_id':_0x2b02dd[_0x25548e(0x39e)]}},_0x5ad6a1,this['instance']['wuid']);}return{'inviteUrl':_0x25548e(0x1c0)+_0x9a028d,'inviteCode':_0x9a028d};}catch(_0x453f5a){let _0x4ef595=_0x25548e(0x683),_0x2f504e=_0x453f5a instanceof Error?_0x453f5a[_0x25548e(0xab)]:typeof _0x453f5a==_0x25548e(0x2b9)?JSON[_0x25548e(0x52f)](_0x453f5a):_0x453f5a,_0x29ef0c=_0x4ef595+':\x20'+_0x2f504e;throw this[_0x25548e(0x664)][_0x25548e(0x5f8)](this[_0x25548e(0x5b1)]+'\x20('+this[_0x25548e(0x21b)][_0x25548e(0x228)]+_0x25548e(0x46a)+_0x29ef0c),new J(_0x29ef0c);}}async[a0_0x4a47c0(0x533)](_0x240ca8){const _0xe0fdc=a0_0x4a47c0;try{let _0x2bc030=await this[_0xe0fdc(0x29a)][_0xe0fdc(0x7e2)](_0x240ca8[_0xe0fdc(0x39e)]);return{'revoked':!0x0,'inviteUrl':_0xe0fdc(0x1c0)+_0x2bc030,'inviteCode':_0x2bc030};}catch(_0x49c658){let _0x34495c=_0xe0fdc(0x2cb),_0x522496=_0x49c658 instanceof Error?_0x49c658[_0xe0fdc(0xab)]:typeof _0x49c658==_0xe0fdc(0x2b9)?JSON[_0xe0fdc(0x52f)](_0x49c658):_0x49c658,_0x4464c9=_0x34495c+':\x20'+_0x522496;throw this[_0xe0fdc(0x664)][_0xe0fdc(0x5f8)](this[_0xe0fdc(0x5b1)]+'\x20('+this[_0xe0fdc(0x21b)][_0xe0fdc(0x228)]+_0xe0fdc(0x46a)+_0x4464c9),new J(_0x4464c9);}}async[a0_0x4a47c0(0x44f)](_0x5cc11b){const _0xfc33b2=a0_0x4a47c0;try{if((0x0,L[_0xfc33b2(0x7a7)])(_0x5cc11b[_0xfc33b2(0x7f8)]))var _0x3f8a18=_0x5cc11b[_0xfc33b2(0x7f8)][_0xfc33b2(0x31c)]('/')[0x3];else var _0x3f8a18=_0x5cc11b[_0xfc33b2(0x7f8)];let _0x37a473=await this[_0xfc33b2(0x29a)][_0xfc33b2(0x203)](_0x3f8a18);return this[_0xfc33b2(0x664)][_0xfc33b2(0x7bf)](this['instanceName']+'\x20('+this[_0xfc33b2(0x21b)][_0xfc33b2(0x228)]+_0xfc33b2(0x46a)+_0x37a473),{'join':!0x0,'inviteCode':_0x3f8a18,'groupJid':_0x37a473};}catch(_0x48d91a){let _0x52cdeb=_0xfc33b2(0x39c),_0x2675b1=_0x48d91a instanceof Error?_0x48d91a[_0xfc33b2(0xab)]:typeof _0x48d91a==_0xfc33b2(0x2b9)?JSON[_0xfc33b2(0x52f)](_0x48d91a):_0x48d91a,_0x521799=_0x52cdeb+':\x20'+_0x2675b1;throw this['logger'][_0xfc33b2(0x5f8)](this['instanceName']+'\x20('+this[_0xfc33b2(0x21b)][_0xfc33b2(0x228)]+_0xfc33b2(0x46a)+_0x521799),new J(_0x521799);}}async[a0_0x4a47c0(0x541)](_0x10af58){const _0x24f5cc=a0_0x4a47c0;try{return{'participants':(await this[_0x24f5cc(0x782)][_0x24f5cc(0x316)][_0x24f5cc(0xb1)]({'where':{'_id':_0x10af58[_0x24f5cc(0x39e)]}},this[_0x24f5cc(0x21b)][_0x24f5cc(0x228)]))['groupdata'][_0x24f5cc(0x249)]};}catch(_0x37451a){let _0x5ca92e='Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants',_0x5049e6=_0x37451a instanceof Error?_0x37451a['message']:typeof _0x37451a==_0x24f5cc(0x2b9)?JSON[_0x24f5cc(0x52f)](_0x37451a):_0x37451a,_0x5dbd58=_0x5ca92e+':\x20'+_0x5049e6;throw this[_0x24f5cc(0x664)]['error'](this[_0x24f5cc(0x5b1)]+'\x20('+this[_0x24f5cc(0x21b)]['wuid']+_0x24f5cc(0x46a)+_0x5dbd58),new J(_0x5dbd58);}}async['leaveGroup'](_0x14fa48){const _0x3e6fb7=a0_0x4a47c0;try{return await this[_0x3e6fb7(0x29a)][_0x3e6fb7(0x183)](_0x14fa48[_0x3e6fb7(0x39e)]),{'groupJid':_0x14fa48[_0x3e6fb7(0x39e)],'leave':!0x0};}catch(_0x208cf5){let _0x3d99ad=_0x3e6fb7(0x7b4),_0xcada6e=_0x208cf5 instanceof Error?_0x208cf5['message']:typeof _0x208cf5==_0x3e6fb7(0x2b9)?JSON[_0x3e6fb7(0x52f)](_0x208cf5):_0x208cf5,_0x12eadc=_0x3d99ad+':\x20'+_0xcada6e;throw this[_0x3e6fb7(0x664)][_0x3e6fb7(0x5f8)](this[_0x3e6fb7(0x5b1)]+'\x20('+this[_0x3e6fb7(0x21b)][_0x3e6fb7(0x228)]+'):\x20'+_0x12eadc),new m(_0x12eadc);}}async['pollMessage'](_0x45b6c6){const _0x528118=a0_0x4a47c0;return await this['sendMessageWithTyping'](_0x45b6c6[_0x528118(0x9a)],{'poll':{'name':_0x45b6c6[_0x528118(0x5f2)]?.['name'],'selectableCount':_0x45b6c6[_0x528118(0x5f2)][_0x528118(0x368)],'values':_0x45b6c6[_0x528118(0x5f2)][_0x528118(0x298)]}},_0x45b6c6?.[_0x528118(0x467)]);}async[a0_0x4a47c0(0x1a4)](_0x34a2e6){const _0x3ff024=a0_0x4a47c0;return await this['sendMessageWithTyping'](_0x34a2e6[_0x3ff024(0x9a)],{'listMessage':{'title':_0x34a2e6[_0x3ff024(0x1a4)][_0x3ff024(0x754)],'description':_0x34a2e6[_0x3ff024(0x1a4)]['description'],'buttonText':_0x34a2e6['listMessage']?.[_0x3ff024(0x6b1)],'footerText':_0x34a2e6['listMessage']?.[_0x3ff024(0x348)],'sections':_0x34a2e6[_0x3ff024(0x1a4)][_0x3ff024(0x7d3)],'listType':0x2}},_0x34a2e6?.[_0x3ff024(0x467)]);}async[a0_0x4a47c0(0x56c)](_0x941c3){const _0x992a25=a0_0x4a47c0;let _0x1e3054;if(_0x941c3[_0x992a25(0x56c)][_0x992a25(0x311)]==='list'){let _0x16852b=_0x941c3[_0x992a25(0x56c)][_0x992a25(0x6ba)][_0x992a25(0x58e)]('\x0a'),_0x2971b1='',_0x785a29='';_0x16852b!==-0x1?(_0x2971b1=_0x941c3[_0x992a25(0x56c)][_0x992a25(0x6ba)][_0x992a25(0x11c)](0x0,_0x16852b)['trim'](),_0x785a29=_0x941c3[_0x992a25(0x56c)][_0x992a25(0x6ba)]['substring'](_0x16852b+0x1)):_0x785a29=_0x941c3[_0x992a25(0x56c)][_0x992a25(0x6ba)];let _0x2012a3=_0x941c3[_0x992a25(0x56c)][_0x992a25(0x434)][_0x992a25(0x635)](_0x30a6ac=>_0x30a6ac[_0x992a25(0x3a3)]()!==''),_0x4b9f5a=this[_0x992a25(0x16a)](_0x2012a3);_0x1e3054={'listMessage':{'title':_0x2971b1,'description':_0x785a29,'buttonText':_0x941c3['menuMessage'][_0x992a25(0x6b1)]||_0x992a25(0x272),'footerText':_0x941c3[_0x992a25(0x56c)][_0x992a25(0x348)],'sections':_0x4b9f5a,'listType':0x2}};}else{if(_0x941c3[_0x992a25(0x56c)]['type']==='poll'){let _0x33c342=_0x941c3[_0x992a25(0x56c)]['choices'][_0x992a25(0x635)](_0x4abdaf=>!(_0x4abdaf[_0x992a25(0x516)]('[')&&_0x4abdaf['endsWith'](']'))&&_0x4abdaf['trim']()!=='')['map'](_0x1c9e4d=>_0x1c9e4d[_0x992a25(0x31c)]('\x0a')[0x0]);_0x1e3054={'poll':{'name':_0x941c3[_0x992a25(0x56c)][_0x992a25(0x6ba)],'selectableCount':_0x941c3[_0x992a25(0x56c)][_0x992a25(0x368)]||0x1,'values':_0x33c342}};}}return await this[_0x992a25(0x134)](_0x941c3[_0x992a25(0x9a)],_0x1e3054,_0x941c3?.[_0x992a25(0x467)]);}[a0_0x4a47c0(0x16a)](_0x624a5d){const _0xd99c7e=a0_0x4a47c0;let _0x6977d2=[],_0x46314a={'rows':[]};return _0x624a5d[_0xd99c7e(0x9e)](_0x5c3884=>{const _0x3994a8=_0xd99c7e;if(_0x5c3884[_0x3994a8(0x516)]('[')&&_0x5c3884['endsWith'](']'))_0x46314a[_0x3994a8(0x38b)][_0x3994a8(0x415)]>0x0&&_0x6977d2[_0x3994a8(0x723)](_0x46314a),_0x46314a={'title':_0x5c3884[_0x3994a8(0x77c)](0x1,-0x1),'rows':[]};else{let _0x4328ef=_0x5c3884[_0x3994a8(0x31c)]('\x0a')[_0x3994a8(0x4b0)](_0x238a83=>_0x238a83[_0x3994a8(0x3a3)]()),_0x2360b7=_0x4328ef[0x0],_0x105ad5=_0x4328ef[0x1]||null,_0x1ffc09=_0x4328ef[0x2]||_0x2360b7;_0x46314a['rows'][_0x3994a8(0x723)]({'title':_0x2360b7,'description':_0x105ad5,'rowId':_0x1ffc09});}}),_0x46314a[_0xd99c7e(0x38b)]['length']>0x0&&_0x6977d2['push'](_0x46314a),_0x6977d2;}async[a0_0x4a47c0(0x35c)](_0x1f5da1,_0x56c4f4){const _0x356c1e=a0_0x4a47c0;if(await this[_0x356c1e(0x14e)](_0x1f5da1,!0x0)){let _0x2d7d57={'where':{'_id':_0x1f5da1['id']}},_0x577cb8={'status':[_0x56c4f4['status']][0x0]};try{let _0x5eab47=await this[_0x356c1e(0x782)][_0x356c1e(0xab)][_0x356c1e(0x7c2)](_0x2d7d57,_0x577cb8,this[_0x356c1e(0x21b)]['wuid']);_0x5eab47&&q(this['instanceName'],'messages',{'message':_0x5eab47});}catch{}}}[a0_0x4a47c0(0x704)](_0x3f755e){const _0x1c2eed=a0_0x4a47c0;let _0xd083c=[];return _0x3f755e[_0x1c2eed(0x9e)](_0x5751a3=>{const _0x1ba1c7=_0x1c2eed;_0x5751a3[_0x1ba1c7(0x754)]&&_0xd083c[_0x1ba1c7(0x723)]('['+_0x5751a3[_0x1ba1c7(0x754)]+']'),_0x5751a3[_0x1ba1c7(0x38b)][_0x1ba1c7(0x9e)](_0x109fc7=>{_0xd083c['push'](_0x109fc7['title']);});}),_0xd083c[_0x1c2eed(0x258)]('|');}[a0_0x4a47c0(0x786)](_0x59fbc3){const _0x1f5643=a0_0x4a47c0;let _0x176bd3=_0x59fbc3['replace'](/\\n/g,'\x0a')[_0x1f5643(0x31c)]('\x0a')['filter'](_0x33d6cd=>_0x33d6cd[_0x1f5643(0x795)](_0x1f5643(0x1bc))||_0x33d6cd[_0x1f5643(0x795)]('EMAIL')),_0x249271='';return _0x176bd3['forEach'](_0x48689b=>{const _0x344d75=_0x1f5643;let _0x196b1d=/TEL(?:.*):(.+)/,_0x17bcc0=/EMAIL(?:.*):(.+)/,_0x2cbf2d=_0x48689b[_0x344d75(0x3b6)](_0x196b1d),_0x5599ae=_0x48689b[_0x344d75(0x3b6)](_0x17bcc0);if(_0x2cbf2d){let _0xfc2723=_0x2cbf2d[0x1]['replace'](/-| |\+|\(|\)/g,'')[_0x344d75(0x3a3)]();_0x249271+='Telefone:\x20'+_0xfc2723+'\x0a';}else{if(_0x5599ae){let _0x30b909=_0x5599ae[0x1]['trim']();_0x249271+=_0x344d75(0x2a3)+_0x30b909+'\x0a';}}}),_0x249271[_0x1f5643(0x3a3)]();}async['updateChatWithMessage'](_0x18068d,_0x394835,_0x24c268,_0x3e1326=null){const _0x426c62=a0_0x4a47c0;if(_0x18068d['ENABLED'])try{let _0x396399=_0x394835[_0x426c62(0x56d)]['remoteJid'][_0x426c62(0x470)](/:\d{1,2}@/g,'@'),_0x430143=_0x394835[_0x426c62(0x56d)][_0x426c62(0x655)],_0x1c548d=_0x396399[_0x426c62(0x582)](_0x426c62(0x1c9)),_0x45155a=_0x394835[_0x426c62(0x15b)]?.[_0x426c62(0x470)](/:\d{1,2}@/g,'@')||'',_0x27d413=_0x394835[_0x426c62(0x575)]?.[_0x426c62(0x6ba)]||_0x394835['message_normalized']?.[_0x426c62(0x6a3)]||_0x394835[_0x426c62(0x575)]?.[_0x426c62(0x7a0)]||_0x394835['message_normalized']?.[_0x426c62(0x25b)]||'',_0x410b0c={'_id':_0x394835[_0x426c62(0x443)],'remoteJid':_0x430143?this[_0x426c62(0x21b)]['wuid']:_0x1c548d?_0x45155a:_0x396399,'pushName':_0x430143?this[_0x426c62(0x21b)][_0x426c62(0x4d6)]||'Eu':_0x394835[_0x426c62(0x419)],'text':_0x27d413,'type':_0x394835[_0x426c62(0x3e7)],'when':_0x394835['messageTimestamp']||Date[_0x426c62(0x331)]()};_0x3e1326||(_0x3e1326=await this['repository']['chat'][_0x426c62(0xb1)]({'where':{'_id':_0x396399}},this[_0x426c62(0x21b)]['wuid']));let _0x341f65=_0x3e1326?_0x430143?_0x3e1326[_0x426c62(0x503)]:(_0x3e1326['unreadcount']||0x0)+0x1:_0x430143?0x0:0x1,_0x44094e={'lastmsg':_0x394835[_0x426c62(0x4e2)]||Date[_0x426c62(0x331)](),'ephemeralExpiration':_0x394835[_0x426c62(0x745)],'lastMessage':_0x410b0c,'unreadcount':_0x341f65,..._0x430143||_0x1c548d?{}:{'name':_0x394835['pushName']},..._0x1c548d?{'group':_0x1c548d}:{},...!_0x430143&&!_0x1c548d&&_0x394835[_0x426c62(0x4bf)]?{'imagechat':_0x394835[_0x426c62(0x4bf)]}:{}};if(!_0x1c548d&&(!_0x3e1326?.[_0x426c62(0xa5)]||!_0x3e1326[_0x426c62(0xa5)]['nome'])&&_0x394835[_0x426c62(0x419)]&&!_0x430143&&(_0x44094e={..._0x44094e,'leadInfo.nome':_0x394835['pushName']}),_0x3e1326?.[_0x426c62(0xa5)]['etiquetas']||(_0x44094e={..._0x44094e,'leadInfo.etiquetas':[]}),_0x3e1326?.[_0x426c62(0xa5)][_0x426c62(0x2c5)]||(_0x44094e={..._0x44094e,'leadInfo.customFields':[]}),_0x3e1326?.['leadInfo'][_0x426c62(0x24f)]||(_0x44094e={..._0x44094e,'leadInfo.tags':[]}),_0x3e1326&&_0x3e1326?.[_0x426c62(0x294)]){let _0x54df82=await this[_0x426c62(0x782)]['label'][_0x426c62(0x2ba)]({'where':{}},this[_0x426c62(0x21b)][_0x426c62(0x228)]),_0x33b677=new Set(_0x54df82[_0x426c62(0x4b0)](_0x191324=>_0x191324[_0x426c62(0x443)])),_0x558722=(_0x3e1326[_0x426c62(0xa5)]?.[_0x426c62(0x747)]||[])[_0x426c62(0x635)](_0x5ba4ce=>_0x33b677[_0x426c62(0x130)](_0x5ba4ce));_0x44094e={..._0x44094e,'imported':!0x1,'leadInfo.etiquetas':_0x558722};for(let _0x45727f of _0x558722)await this[_0x426c62(0x530)](_0x45727f,_0x396399);}if(!this[_0x426c62(0x22b)][_0x426c62(0x5f1)][_0x426c62(0x2ba)](_0x22b342=>_0x22b342['startCommand']&&_0x27d413[_0x426c62(0x795)](_0x22b342[_0x426c62(0x1e7)]))&&_0x24c268===_0x426c62(0x1f7)&&_0x430143&&this['AutomateSystem']?.[_0x426c62(0x79b)][_0x426c62(0x231)]&&_0x27d413[_0x426c62(0x3a3)]()!==this[_0x426c62(0x22b)]?.['flowConfig']['stopConversation'][_0x426c62(0x3a3)]()){let _0x45c206=(this[_0x426c62(0x22b)]?.['flowConfig'][_0x426c62(0x2de)]||0x0)*0xea60,_0x7fdbef=Date['now']()+_0x45c206;_0x3e1326?.['leadInfo']?.[_0x426c62(0x9d)]===0x0||(_0x44094e={..._0x44094e,'leadInfo.desativadoFluxoAte':_0x7fdbef},this[_0x426c62(0x664)][_0x426c62(0x7bf)](this[_0x426c62(0x5b1)]+'\x20('+this[_0x426c62(0x21b)][_0x426c62(0x228)]+_0x426c62(0x67f)+_0x7fdbef+'.'));}if(_0x27d413['trim']()===this[_0x426c62(0x22b)]?.[_0x426c62(0x79b)][_0x426c62(0x7eb)][_0x426c62(0x3a3)]()){this[_0x426c62(0x664)]['verbose'](this['instanceName']+'\x20('+this[_0x426c62(0x21b)][_0x426c62(0x228)]+_0x426c62(0x2fa)+_0x27d413);let _0x2208f2=Date['now']();this[_0x426c62(0x22b)]?.['flowConfig'][_0x426c62(0x414)]===0x0?_0x44094e={..._0x44094e,'leadInfo.desativadoFluxoAte':_0x2208f2+0x7591f6200}:_0x44094e={..._0x44094e,'leadInfo.desativadoFluxoAte':_0x2208f2+this[_0x426c62(0x22b)]?.[_0x426c62(0x79b)][_0x426c62(0x414)]*0x3c*0x3e8};}if(_0x3e1326=await this[_0x426c62(0x782)]['chat']['updateOne']({'where':{'_id':_0x396399}},_0x44094e,this[_0x426c62(0x21b)][_0x426c62(0x228)],{'new':!0x0,'upsert':!0x0}),_0x3e1326)q(this[_0x426c62(0x5b1)],'chats',{'chat':_0x3e1326});else{this[_0x426c62(0x664)]['error'](this[_0x426c62(0x5b1)]+'\x20('+this[_0x426c62(0x21b)][_0x426c62(0x228)]+_0x426c62(0x224));return;}if(_0x430143)return this[_0x426c62(0x664)][_0x426c62(0x7bf)](this['instanceName']+'\x20('+this[_0x426c62(0x21b)][_0x426c62(0x228)]+_0x426c62(0x16f)),null;if(!this[_0x426c62(0x22b)]?.['flowConfig']['enabled'])return this[_0x426c62(0x664)]['verbose'](this['instanceName']+'\x20('+this[_0x426c62(0x21b)][_0x426c62(0x228)]+_0x426c62(0x72b)),null;if(_0x3e1326[_0x426c62(0x443)][_0x426c62(0x795)](_0x426c62(0x1c9))&&this[_0x426c62(0x22b)]?.[_0x426c62(0x79b)][_0x426c62(0x555)]===!0x0)return this[_0x426c62(0x664)][_0x426c62(0x7bf)](this[_0x426c62(0x5b1)]+'\x20('+this['instance']['wuid']+_0x426c62(0x5c6)),null;if(_0x3e1326['leadInfo']){if(_0x3e1326['leadInfo']['desativadoFluxoAte']===0x0||_0x3e1326['leadInfo'][_0x426c62(0x7d2)])return this['logger'][_0x426c62(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x426c62(0x228)]+_0x426c62(0x2e1)+_0x396399+_0x426c62(0x4eb)),null;if(_0x3e1326[_0x426c62(0xa5)][_0x426c62(0x9d)]>Date[_0x426c62(0x331)]()&&!_0x394835['message_normalized']?.[_0x426c62(0x7a0)])return this['logger']['verbose'](this[_0x426c62(0x5b1)]+'\x20('+this['instance']['wuid']+_0x426c62(0x104)+new Date(_0x3e1326[_0x426c62(0xa5)][_0x426c62(0x9d)])['toLocaleString']()+',\x20saindo.'),null;}this[_0x426c62(0x664)][_0x426c62(0x7bf)](this[_0x426c62(0x5b1)]+'\x20('+this['instance'][_0x426c62(0x228)]+'):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações'),this[_0x426c62(0x788)](_0x394835,_0x24c268);}catch(_0x5d4335){let _0x5b0a26=_0x426c62(0x492),_0x103aa4=_0x5d4335 instanceof Error?_0x5d4335['message']:typeof _0x5d4335==_0x426c62(0x2b9)?JSON['stringify'](_0x5d4335):_0x5d4335,_0x35750b=_0x5b0a26+':\x20'+_0x103aa4;return this[_0x426c62(0x664)][_0x426c62(0x5f8)](this[_0x426c62(0x5b1)]+'\x20('+this[_0x426c62(0x21b)][_0x426c62(0x228)]+_0x426c62(0x46a)+_0x35750b),null;}}async[a0_0x4a47c0(0xe6)](_0x1531f0,_0x1d3f84){const _0x4719a7=a0_0x4a47c0;if(_0x1d3f84[_0x4719a7(0x99)]){let _0x3221c5=_0x1531f0[_0x4719a7(0x4b0)](async _0x5a7f37=>{const _0x7003b1=_0x4719a7;try{let _0x406afc={'_id':_0x5a7f37['_id'],'owner':_0x5a7f37[_0x7003b1(0x3ab)],'lastcache':0x0};if(Object[_0x7003b1(0x77d)](_0x5a7f37)[_0x7003b1(0x9e)](_0x5a6fae=>{_0x5a7f37[_0x5a6fae]!==null&&(_0x406afc[_0x5a6fae]=_0x5a7f37[_0x5a6fae]);}),_0x406afc[_0x7003b1(0x708)]===null&&(_0x406afc[_0x7003b1(0x708)]='Imagem\x20não\x20encontrada'),Object['keys'](_0x406afc)[_0x7003b1(0x415)]>0x0)return await this[_0x7003b1(0x782)][_0x7003b1(0x316)][_0x7003b1(0xc6)]({'where':{'_id':_0x5a7f37[_0x7003b1(0x443)]}},_0x406afc,this[_0x7003b1(0x21b)][_0x7003b1(0x228)]);}catch(_0x248e10){let _0x511507=_0x7003b1(0x292)+_0x5a7f37[_0x7003b1(0x443)],_0x539778=_0x248e10 instanceof Error?_0x248e10[_0x7003b1(0xab)]:typeof _0x248e10==_0x7003b1(0x2b9)?JSON[_0x7003b1(0x52f)](_0x248e10):_0x248e10,_0x568b1f=_0x511507+':\x20'+_0x539778;return this[_0x7003b1(0x664)][_0x7003b1(0x5f8)](this[_0x7003b1(0x5b1)]+'\x20('+this[_0x7003b1(0x21b)][_0x7003b1(0x228)]+'):\x20'+_0x568b1f),null;}}),_0x613339=(await Promise['all'](_0x3221c5))[_0x4719a7(0x635)](_0x161e29=>_0x161e29!==null)[_0x4719a7(0x415)];this[_0x4719a7(0x664)][_0x4719a7(0x7bf)](this[_0x4719a7(0x5b1)]+'\x20('+this['instance'][_0x4719a7(0x228)]+'):\x20'+_0x613339+'\x20chats\x20de\x20'+this[_0x4719a7(0x21b)][_0x4719a7(0x228)]+_0x4719a7(0x47f));}}async[a0_0x4a47c0(0x20f)](_0x6a3690){const _0x46194d=a0_0x4a47c0;this[_0x46194d(0x664)][_0x46194d(0x7bf)](this[_0x46194d(0x5b1)]+'\x20('+this[_0x46194d(0x21b)][_0x46194d(0x228)]+_0x46194d(0x586));let _0x56f0b={'readMessages':[{'remoteJid':_0x6a3690[_0x46194d(0x743)][_0x46194d(0xa7)][_0x46194d(0x56d)][_0x46194d(0x1d0)],'fromMe':_0x6a3690[_0x46194d(0x743)][_0x46194d(0xa7)][_0x46194d(0x56d)][_0x46194d(0x655)],'id':_0x6a3690[_0x46194d(0x743)][_0x46194d(0xa7)]['key']['id']}]};await this['markMessageAsRead'](_0x56f0b);}async['StartBot'](_0x20dc7a,_0x5b7f1d){const _0x53ca06=a0_0x4a47c0;try{let {key:_0x43790f,message_normalized:_0x24837b}=_0x20dc7a,_0x275bfa=_0x24837b,_0x462de0=_0x24837b[_0x53ca06(0x6ba)]||_0x24837b[_0x53ca06(0x6a3)]||_0x24837b[_0x53ca06(0x7a0)]||_0x24837b[_0x53ca06(0x25b)]||'',_0x5c4e14=_0x43790f[_0x53ca06(0x1d0)],_0x38c22a=null,_0x2de30a=this[_0x53ca06(0x22b)][_0x53ca06(0x5f1)][_0x53ca06(0x2ba)](_0x3dc8c4=>_0x3dc8c4[_0x53ca06(0x1e7)]&&_0x462de0[_0x53ca06(0x795)](_0x3dc8c4[_0x53ca06(0x1e7)]));if(_0x2de30a&&_0x5b7f1d===_0x53ca06(0x1f7)){let _0x2c1d1b=await this[_0x53ca06(0x782)][_0x53ca06(0x4e4)]['findOne']({'where':{'_id':_0x2de30a[_0x53ca06(0x443)]}});if(this[_0x53ca06(0x664)]['verbose'](this[_0x53ca06(0x5b1)]+'\x20('+this[_0x53ca06(0x21b)][_0x53ca06(0x228)]+_0x53ca06(0x491)),_0x2c1d1b&&_0x2c1d1b[_0x53ca06(0x38a)]?.[_0x53ca06(0x795)](this[_0x53ca06(0x21b)]['wuid']))_0x38c22a=await this[_0x53ca06(0x466)](_0x2c1d1b,_0x43790f,_0x275bfa);else return this[_0x53ca06(0x664)][_0x53ca06(0x7bf)](this['instanceName']+'\x20('+this[_0x53ca06(0x21b)][_0x53ca06(0x228)]+'):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo'),null;}else this[_0x53ca06(0x664)]['verbose'](this[_0x53ca06(0x5b1)]+'\x20('+this[_0x53ca06(0x21b)]['wuid']+_0x53ca06(0x53d));if(_0x38c22a=await this['findConversation'](_0x5c4e14,_0x275bfa),_0x38c22a){this[_0x53ca06(0x664)][_0x53ca06(0x7bf)](this['instanceName']+'\x20('+this[_0x53ca06(0x21b)][_0x53ca06(0x228)]+_0x53ca06(0x340)),!_0x43790f['fromMe']&&_0x38c22a[_0x53ca06(0x276)]&&this['readMessageBot'](_0x38c22a);let _0x555e4c=await this[_0x53ca06(0x79d)](_0x38c22a);_0x555e4c&&await this[_0x53ca06(0x5d8)](_0x38c22a,_0x555e4c);}}catch(_0x1befc0){this[_0x53ca06(0x664)][_0x53ca06(0x5f8)](this['instanceName']+'\x20('+this[_0x53ca06(0x21b)]['wuid']+_0x53ca06(0x763)+(_0x1befc0 instanceof Error?_0x1befc0[_0x53ca06(0xab)]:JSON['stringify'](_0x1befc0,null,0x2)));}}[a0_0x4a47c0(0x16b)](_0x2c2060,_0x2678e7='',_0x3c36b8={}){const _0x303c99=a0_0x4a47c0;return typeof _0x2c2060!=_0x303c99(0x2b9)||_0x2c2060===null?(_0x2678e7&&(_0x3c36b8[_0x2678e7]=_0x2c2060),_0x3c36b8):(Object[_0x303c99(0x3ce)](_0x2c2060)[_0x303c99(0x9e)](([_0x2c808e,_0x3bcae6])=>{const _0x2a6600=_0x303c99;let _0x28a467=_0x2678e7?_0x2678e7+'.'+_0x2c808e:'_'+_0x2c808e;Array[_0x2a6600(0x18e)](_0x3bcae6)?_0x3bcae6['forEach']((_0x3cb38d,_0x190d89)=>{this['flattenObject'](_0x3cb38d,_0x28a467+'['+_0x190d89+']',_0x3c36b8);}):typeof _0x3bcae6==_0x2a6600(0x2b9)&&_0x3bcae6!==null?this['flattenObject'](_0x3bcae6,_0x28a467,_0x3c36b8):_0x3c36b8[_0x28a467]=String(_0x3bcae6);}),_0x3c36b8);}['variablesToObject'](_0x539b26){const _0xb3ddce=a0_0x4a47c0;let _0xe94b5={};for(let _0x30bd38 of _0x539b26)typeof _0x30bd38['name']==_0xb3ddce(0x4c4)&&typeof _0x30bd38[_0xb3ddce(0x24b)]==_0xb3ddce(0x4c4)&&(_0xe94b5[_0x30bd38[_0xb3ddce(0x25b)]]=_0x30bd38[_0xb3ddce(0x24b)]);return _0xe94b5;}async[a0_0x4a47c0(0x79d)](_0x7521b3){const _0x14fd52=a0_0x4a47c0;if(!this[_0x14fd52(0x22b)]?.['flowConfig']['enabled']||_0x7521b3['status']!==_0x14fd52(0x113)&&_0x7521b3['waitingMenu_id']==='')return null;let _0x2022ac=_0x7521b3[_0x14fd52(0x743)]['lastBlockId']||_0x14fd52(0x299);typeof _0x7521b3[_0x14fd52(0x743)][_0x14fd52(0x728)]>'u'&&(_0x7521b3[_0x14fd52(0x743)][_0x14fd52(0x728)]=!0x0);let _0xfe5a13=_0x7521b3[_0x14fd52(0x743)]['lastCondition'];this[_0x14fd52(0x664)][_0x14fd52(0x7bf)](this[_0x14fd52(0x5b1)]+'\x20('+this[_0x14fd52(0x21b)][_0x14fd52(0x228)]+_0x14fd52(0x5aa)+_0x2022ac+_0x14fd52(0x789)+_0xfe5a13);let _0x3aab13=_0x2022ac===_0x14fd52(0x299)?_0x7521b3[_0x14fd52(0xe2)][_0x14fd52(0x2ba)](_0x151370=>_0x151370[_0x14fd52(0x311)]===_0x14fd52(0x299)):_0x7521b3['blocks']['find'](_0x4d0b45=>_0x4d0b45['_id']['toString']()===_0x2022ac[_0x14fd52(0x13c)]());if(!_0x3aab13)return this['logger'][_0x14fd52(0x5f8)](this[_0x14fd52(0x5b1)]+'\x20('+this['instance'][_0x14fd52(0x228)]+_0x14fd52(0x25c)+_0x2022ac),null;let _0x24fe62={'_pushName':_0x7521b3?.[_0x14fd52(0x743)]?.[_0x14fd52(0xa7)]?.[_0x14fd52(0x419)]||'','_sender':this[_0x14fd52(0x21b)]['wuid']||'',..._0x7521b3['chatLog'][_0x14fd52(0x1cc)]},_0x380592=null;if(_0x7521b3[_0x14fd52(0xf1)]){let _0x145a53=_0x7521b3['chatLog'][_0x14fd52(0xa7)][_0x14fd52(0x7a0)],_0x478d93=_0x7521b3[_0x14fd52(0x15c)][_0x14fd52(0x2ba)](_0x599b4e=>_0x599b4e['option']===_0x145a53);if(_0x478d93){let _0x33abde=_0x478d93['next_groupId'];if(_0x380592=_0x7521b3[_0x14fd52(0xe2)]['find'](_0x2ae09a=>_0x2ae09a[_0x14fd52(0x528)]===_0x33abde&&_0x2ae09a[_0x14fd52(0x28e)]===0x1),_0x3aab13[_0x14fd52(0x168)][_0x14fd52(0x357)]){let _0x3f5aa6={'id':_0x7521b3['waitingMenu_id'],'remoteJid':_0x7521b3[_0x14fd52(0x1d0)],'fromMe':!0x0};await this[_0x14fd52(0x5a1)](_0x3f5aa6);}if(_0x3aab13[_0x14fd52(0x168)][_0x14fd52(0x357)]&&_0x3aab13[_0x14fd52(0x168)]['pollMessageOnDelete']&&_0x3aab13[_0x14fd52(0x168)][_0x14fd52(0x66c)]===_0x14fd52(0x67e)){let _0x2114b5={'number':_0x7521b3[_0x14fd52(0x1d0)],'options':{'delay':0x0},'textMessage':{'text':_0x14fd52(0x671)+_0x7521b3['waitingMenu_text']+_0x14fd52(0x595)+_0x145a53}};await this[_0x14fd52(0x644)](_0x2114b5);}_0x7521b3[_0x14fd52(0x7ae)]=_0x14fd52(0x113),_0x7521b3[_0x14fd52(0xf1)]='',_0x7521b3['waitingMenu_text']='',_0x7521b3['waitingMenu_replyOptions']=[];}else{this['logger'][_0x14fd52(0x7bf)](this[_0x14fd52(0x5b1)]+'\x20('+this[_0x14fd52(0x21b)][_0x14fd52(0x228)]+_0x14fd52(0x6ae));let _0x554f49={'activatedCount':_0x7521b3[_0x14fd52(0x743)][_0x14fd52(0x24c)][_0x14fd52(0x635)](_0x5a729d=>String(_0x5a729d[_0x14fd52(0x3d6)])===String(_0x2022ac))[_0x14fd52(0x415)],'moreLogs':[_0x14fd52(0x67d)]};if(_0x3aab13[_0x14fd52(0x168)][_0x14fd52(0x2f7)]){let _0x3d7bd2={'number':_0x7521b3[_0x14fd52(0x1d0)],'options':{'delay':0x0},'textMessage':{'text':_0x3aab13[_0x14fd52(0x168)][_0x14fd52(0x2f7)]}};await this[_0x14fd52(0x644)](_0x3d7bd2);}if(_0x3aab13['maxActives']!==void 0x0&&_0x554f49['activatedCount']>=_0x3aab13[_0x14fd52(0x477)]){let _0x2f1c39=Date[_0x14fd52(0x331)](),_0x3ec76c=_0x3aab13['stopMinutesMaxActives']??0xa;isNaN(_0x3ec76c)&&(_0x3ec76c=0xa);let _0x5dcf92=_0x2f1c39+_0x3ec76c*0x3c*0x3e8;_0x554f49['newStoppedUntil']=_0x5dcf92,_0x554f49[_0x14fd52(0x597)][_0x14fd52(0x723)]('Atingido\x20interações\x20máximas,\x20parando\x20fluxo'),this[_0x14fd52(0x26a)](_0x7521b3,_0x5dcf92),_0x7521b3[_0x14fd52(0xf1)]='',_0x7521b3[_0x14fd52(0x50f)]='',_0x7521b3['waitingMenu_replyOptions']=[];}return this['updateConversation'](_0x7521b3,_0x3aab13,_0x554f49,!0x0),null;}}if(_0xfe5a13&&_0x3aab13[_0x14fd52(0x3eb)]&&!_0x7521b3[_0x14fd52(0xf1)]){let _0x38deaf=_0x7521b3[_0x14fd52(0xe2)]['filter'](_0xa4e52b=>_0xa4e52b[_0x14fd52(0x528)][_0x14fd52(0x13c)]()===_0x3aab13[_0x14fd52(0x3eb)]['toString']())[_0x14fd52(0x6f0)]((_0x3fc01c,_0x576eda)=>_0x3fc01c['order']-_0x576eda[_0x14fd52(0x28e)]);_0x38deaf[_0x14fd52(0x415)]>0x0&&(_0x380592=_0x38deaf[0x0]);}if(!_0x380592){let _0x334fd8=_0x3aab13[_0x14fd52(0x528)],_0x3edac7=_0x7521b3[_0x14fd52(0xe2)]['filter'](_0x2309db=>_0x2309db[_0x14fd52(0x528)]===_0x334fd8&&_0x2309db[_0x14fd52(0x28e)]>_0x3aab13['order'])[_0x14fd52(0x6f0)]((_0x95398c,_0x9e5108)=>_0x95398c['order']-_0x9e5108[_0x14fd52(0x28e)]);_0x3edac7[_0x14fd52(0x415)]>0x0&&(_0x380592=_0x3edac7[0x0]);}if(!_0x380592)return _0x7521b3[_0x14fd52(0x7ae)]=_0x14fd52(0x2fd),null;_0x7521b3['chatLog'][_0x14fd52(0x1cc)]=_0x24fe62;let _0x94f3f6=JSON[_0x14fd52(0x4e6)](JSON['stringify'](_0x380592));return this[_0x14fd52(0x7a5)](_0x94f3f6,_0x7521b3['chatLog'][_0x14fd52(0x1cc)]),_0x7521b3['chatLog']['lastBlockId']=_0x94f3f6[_0x14fd52(0x443)],_0x7521b3[_0x14fd52(0x743)][_0x14fd52(0x728)]=!0x0,_0x94f3f6;}[a0_0x4a47c0(0x764)](_0x59c7d9,_0x35ccad){const _0x252596=a0_0x4a47c0;return _0x59c7d9[_0x252596(0x470)](/\{\{([^}]+)\}\}/g,(_0x390e9d,_0x1f4752)=>_0x35ccad[_0x1f4752]||'');}[a0_0x4a47c0(0x7a5)](_0x3831ba,_0x385a27){const _0x427868=a0_0x4a47c0;for(let _0x3f27a7 in _0x3831ba)typeof _0x3831ba[_0x3f27a7]==_0x427868(0x4c4)?_0x3831ba[_0x3f27a7]=this[_0x427868(0x764)](_0x3831ba[_0x3f27a7],_0x385a27):typeof _0x3831ba[_0x3f27a7]==_0x427868(0x2b9)&&this[_0x427868(0x7a5)](_0x3831ba[_0x3f27a7],_0x385a27);}async['goNextblock'](_0x10bb99,_0x1a478b){const _0x2805ad=a0_0x4a47c0;let _0x15ebd7=_0x1a478b['_id'];if(_0x10bb99[_0x2805ad(0x743)]&&_0x10bb99[_0x2805ad(0x743)][_0x2805ad(0x24c)]){let _0xc2a6a9=_0x10bb99[_0x2805ad(0x743)]['blockLogs'][_0x2805ad(0x635)](_0x115052=>String(_0x115052[_0x2805ad(0x3d6)])===String(_0x15ebd7))[_0x2805ad(0xd7)]();if(_0xc2a6a9&&_0xc2a6a9[_0x2805ad(0x5f8)]&&_0x1a478b['stopIfLastReturnedError'])return _0x10bb99[_0x2805ad(0x7ae)]=_0x2805ad(0x2fd),await this['saveConversationToDatabase'](_0x10bb99),null;}if(_0x1a478b[_0x2805ad(0x311)]===_0x2805ad(0x168)&&_0x1a478b[_0x2805ad(0x168)][_0x2805ad(0x144)]===_0x2805ad(0x1d4)&&_0x10bb99[_0x2805ad(0xf1)])return _0x10bb99[_0x2805ad(0x743)]['lastBlockId']=_0x15ebd7,await this['saveConversationToDatabase'](_0x10bb99),null;let _0x191a4b=await this[_0x2805ad(0x79d)](_0x10bb99);if(_0x10bb99[_0x2805ad(0x743)]&&_0x10bb99[_0x2805ad(0x743)][_0x2805ad(0x24c)]){let _0x33d613=_0x10bb99[_0x2805ad(0x743)][_0x2805ad(0x24c)][_0x2805ad(0x635)](_0x3628bd=>String(_0x3628bd['blockId'])===String(_0x15ebd7))[_0x2805ad(0x415)];if(_0x1a478b[_0x2805ad(0x477)]!==void 0x0&&_0x33d613>=_0x1a478b['maxActives']){let _0x5b4c43=Date[_0x2805ad(0x331)](),_0x67d1f4=_0x1a478b[_0x2805ad(0x60c)]??0xa;isNaN(_0x67d1f4)&&(_0x67d1f4=0xa);let _0x6724c9=_0x5b4c43+_0x67d1f4*0x3c*0x3e8,_0x2c2c52={'newStoppedUntil':_0x6724c9};return this['updateStopChat'](_0x10bb99,_0x6724c9),this[_0x2805ad(0x42d)](_0x10bb99,_0x1a478b,_0x2c2c52,!0x0),null;}}_0x191a4b&&_0x191a4b['type']!==_0x2805ad(0x285)&&await this['processblock'](_0x10bb99,_0x191a4b),_0x191a4b||await this['saveConversationToDatabase'](_0x10bb99),_0x191a4b&&_0x191a4b[_0x2805ad(0x311)]===_0x2805ad(0x285)&&(_0x10bb99[_0x2805ad(0x743)][_0x2805ad(0x68a)]=_0x15ebd7,await this[_0x2805ad(0x5d6)](_0x10bb99));}async['processblock'](_0x43ba90,_0x5f3f15){const _0x47a70a=a0_0x4a47c0;try{let _0x390661=_0x5f3f15[_0x47a70a(0x311)];this[_0x47a70a(0x664)][_0x47a70a(0x7bf)](this[_0x47a70a(0x5b1)]+'\x20('+this['instance'][_0x47a70a(0x228)]+_0x47a70a(0x740)+_0x390661);let _0x27955a={'uazapi':()=>this[_0x47a70a(0x10f)](_0x43ba90,_0x5f3f15),'save':()=>this[_0x47a70a(0x4a2)](_0x43ba90,_0x5f3f15),'stop':()=>this['stopConversation'](_0x43ba90,_0x5f3f15),'condition':()=>this[_0x47a70a(0x2d7)](_0x43ba90,_0x5f3f15),'varedit':()=>this[_0x47a70a(0x6ee)](_0x43ba90,_0x5f3f15),'apirequest':()=>this[_0x47a70a(0x712)](_0x43ba90,_0x5f3f15),'goToFlow':()=>this['processgoToFlow'](_0x43ba90,_0x5f3f15),'scheduleFlow':()=>this[_0x47a70a(0x190)](_0x43ba90,_0x5f3f15),'awaitSeconds':()=>this[_0x47a70a(0x40d)](_0x43ba90,_0x5f3f15),'clearVariables':()=>this[_0x47a70a(0x300)](_0x43ba90,_0x5f3f15)}[_0x390661];_0x27955a&&await _0x27955a();}catch(_0x25d12e){this['logger'][_0x47a70a(0x5f8)](this[_0x47a70a(0x5b1)]+'\x20('+this[_0x47a70a(0x21b)][_0x47a70a(0x228)]+_0x47a70a(0x6b8)+(_0x25d12e instanceof Error?_0x25d12e[_0x47a70a(0xab)]:JSON['stringify'](_0x25d12e,null,0x2)));}}async[a0_0x4a47c0(0x40d)](_0x3571cf,_0x26d276){const _0x81bb0a=a0_0x4a47c0;if(this[_0x81bb0a(0x664)][_0x81bb0a(0x7bf)](this[_0x81bb0a(0x5b1)]+'\x20('+this[_0x81bb0a(0x21b)][_0x81bb0a(0x228)]+_0x81bb0a(0x2bc)),!_0x3571cf||!_0x26d276)return this[_0x81bb0a(0x664)][_0x81bb0a(0x5f8)](this[_0x81bb0a(0x5b1)]+'\x20('+this[_0x81bb0a(0x21b)][_0x81bb0a(0x228)]+_0x81bb0a(0x3b2)),null;let _0x1fe96c=+_0x26d276[_0x81bb0a(0xa3)];isNaN(_0x1fe96c)&&(_0x1fe96c=0x0),_0x1fe96c=Math[_0x81bb0a(0x667)](_0x1fe96c,0x3c),await(0x0,w[_0x81bb0a(0x274)])(_0x1fe96c*0x3e8);let _0xf44a30={'moreLogs':['Pausado\x20por\x20'+_0x1fe96c+_0x81bb0a(0x674)]};return await this[_0x81bb0a(0x42d)](_0x3571cf,_0x26d276,_0xf44a30),_0x1fe96c;}async[a0_0x4a47c0(0x300)](_0x4356ee,_0x29ca35){const _0x38cb3a=a0_0x4a47c0;if(this[_0x38cb3a(0x664)][_0x38cb3a(0x7bf)](this[_0x38cb3a(0x5b1)]+'\x20('+this[_0x38cb3a(0x21b)][_0x38cb3a(0x228)]+_0x38cb3a(0x208)),!_0x4356ee||!_0x29ca35)return this[_0x38cb3a(0x664)][_0x38cb3a(0x5f8)](this[_0x38cb3a(0x5b1)]+'\x20('+this[_0x38cb3a(0x21b)]['wuid']+_0x38cb3a(0x3b2)),null;let _0x12f2ce=[];if(_0x29ca35['clearVariables'][_0x38cb3a(0x3a3)]()===_0x38cb3a(0x225)){let _0x2a7c32=[_0x38cb3a(0x72e),_0x38cb3a(0x5a9),_0x38cb3a(0x62e),_0x38cb3a(0x1ef),_0x38cb3a(0x387),_0x38cb3a(0x443),_0x38cb3a(0x767)];_0x12f2ce=Object[_0x38cb3a(0x77d)](_0x4356ee['chatLog']['realVariables'])[_0x38cb3a(0x635)](_0x503670=>_0x503670['startsWith']('_')&&!_0x2a7c32[_0x38cb3a(0x795)](_0x503670));}else _0x12f2ce=_0x29ca35[_0x38cb3a(0x202)]['split']('|')[_0x38cb3a(0x4b0)](_0x415e06=>(_0x415e06=_0x415e06['replace'](/[{}]/g,'')[_0x38cb3a(0x3a3)](),_0x415e06[_0x38cb3a(0x516)]('_')?_0x415e06:'_'+_0x415e06));let _0x384460=[];_0x12f2ce[_0x38cb3a(0x9e)](_0x1a9680=>{const _0x204891=_0x38cb3a;_0x1a9680 in _0x4356ee[_0x204891(0x743)][_0x204891(0x1cc)]&&(delete _0x4356ee[_0x204891(0x743)][_0x204891(0x1cc)][_0x1a9680],_0x384460['push'](_0x1a9680));}),_0x384460['length']>0x0?this['logger'][_0x38cb3a(0x7bf)](this['instanceName']+'\x20('+this[_0x38cb3a(0x21b)][_0x38cb3a(0x228)]+_0x38cb3a(0x4e5)+_0x384460[_0x38cb3a(0x258)](',\x20')):this[_0x38cb3a(0x664)][_0x38cb3a(0x7bf)](this[_0x38cb3a(0x5b1)]+'\x20('+this[_0x38cb3a(0x21b)]['wuid']+'):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção');let _0x15ff7e={'moreLogs':[_0x38cb3a(0x79f)+_0x384460[_0x38cb3a(0x258)](',\x20')]};return await this[_0x38cb3a(0x42d)](_0x4356ee,_0x29ca35,_0x15ff7e),null;}async[a0_0x4a47c0(0x190)](_0x2b0399,_0x3c3de2){const _0x50262c=a0_0x4a47c0;if(this[_0x50262c(0x664)]['verbose'](this['instanceName']+'\x20('+this[_0x50262c(0x21b)][_0x50262c(0x228)]+_0x50262c(0x2d0)),!_0x2b0399||!_0x3c3de2)return this['logger'][_0x50262c(0x5f8)](this[_0x50262c(0x5b1)]+'\x20('+this[_0x50262c(0x21b)][_0x50262c(0x228)]+_0x50262c(0x3b2)),null;let _0x485bb9=_0x2b0399['remoteJid'];_0x3c3de2[_0x50262c(0x7bb)][_0x50262c(0x1d0)]&&_0x3c3de2[_0x50262c(0x7bb)][_0x50262c(0x1d0)][_0x50262c(0x3a3)]()!==''&&(_0x485bb9=_0x3c3de2['uazapi']['remoteJid'][_0x50262c(0x3a3)]());let _0x28e49d=_0x3c3de2['scheduleFlow'][_0x50262c(0x4b5)]*0xea60,_0x1b513b=Date[_0x50262c(0x331)]()+_0x28e49d,_0x5975f3={'status':_0x50262c(0x4be),'info':_0x50262c(0x25a)+_0x2b0399['name'],'remoteJids':[_0x485bb9],'when':_0x1b513b,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x50262c(0x4e4),'flowName':_0x3c3de2['scheduleFlow'][_0x50262c(0x36d)]};this[_0x50262c(0x2dc)](_0x5975f3);let _0x558adf=await this[_0x50262c(0x79d)](_0x2b0399);_0x558adf&&await this[_0x50262c(0x5d8)](_0x2b0399,_0x558adf);}async[a0_0x4a47c0(0x765)](_0x5bd7e9,_0x1fa5da){const _0x53337e=a0_0x4a47c0;if(this['logger'][_0x53337e(0x7bf)](this[_0x53337e(0x5b1)]+'\x20('+this[_0x53337e(0x21b)][_0x53337e(0x228)]+_0x53337e(0x2bb)),!_0x5bd7e9||!_0x1fa5da)return this[_0x53337e(0x664)][_0x53337e(0x5f8)](this[_0x53337e(0x5b1)]+'\x20('+this[_0x53337e(0x21b)]['wuid']+_0x53337e(0x3b2)),null;await this[_0x53337e(0x42d)](_0x5bd7e9,_0x1fa5da,{},!0x0,!0x0);let _0x487b9b=_0x1fa5da[_0x53337e(0x421)];_0x5bd7e9=await this[_0x53337e(0x3c9)](_0x487b9b,_0x5bd7e9[_0x53337e(0x1d0)],_0x5bd7e9[_0x53337e(0x743)]['realVariables']);let _0x753f13=await this[_0x53337e(0x79d)](_0x5bd7e9);_0x753f13&&await this['processblock'](_0x5bd7e9,_0x753f13);}async[a0_0x4a47c0(0x3c9)](_0x3ec70e,_0x1e011c,_0x346657){const _0x466725=a0_0x4a47c0;this[_0x466725(0x664)][_0x466725(0x7bf)](this[_0x466725(0x5b1)]+'\x20('+this['instance'][_0x466725(0x228)]+_0x466725(0x601));try{let _0x4446aa=this[_0x466725(0x22b)][_0x466725(0x5f1)][_0x466725(0x2ba)](_0x3082ae=>_0x3082ae[_0x466725(0x443)]===_0x3ec70e);_0x4446aa||this[_0x466725(0x664)][_0x466725(0x5f8)](this[_0x466725(0x5b1)]+'\x20('+this[_0x466725(0x21b)][_0x466725(0x228)]+_0x466725(0x73e)+_0x3ec70e+_0x466725(0x616));let _0x5d7a9c=await this['repository'][_0x466725(0x4e4)][_0x466725(0xb1)]({'where':{'_id':_0x4446aa[_0x466725(0x443)]}});if(!_0x5d7a9c||!_0x5d7a9c[_0x466725(0x38a)]?.[_0x466725(0x795)](this[_0x466725(0x21b)]['wuid']))throw this['logger'][_0x466725(0x5f8)](this[_0x466725(0x5b1)]+'\x20('+this[_0x466725(0x21b)]['wuid']+_0x466725(0x73e)+_0x3ec70e+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x3ec70e+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x3c80b2=require(_0x466725(0x63b))[_0x466725(0x26b)],_0x44305f=Date[_0x466725(0x331)](),_0x5d8a57='start',_0x417b80={},_0x14cf9d={},_0x328e01=this[_0x466725(0x22b)]['flows']['find'](_0x3d46cc=>_0x3d46cc[_0x466725(0x443)]===_0x5d7a9c['_id']?.['toString']()),_0x68eb0e=_0x328e01?.['minutesToClose']??_0x5d7a9c['minutesToClose']??0x0,_0x49a007=_0x328e01?.['readMessages']??_0x5d7a9c[_0x466725(0x276)]??!0x1,_0xbb21a2={'flowId':_0x4446aa[_0x466725(0x443)],'readMessages':_0x4446aa['readMessages'],..._0x5d7a9c,'chatLog':null},_0x2948a5={'lastReceivedMessage':_0x417b80,'lastSendMessage':_0x14cf9d,'lastBlockId':_0x5d8a57,'lastCondition':!0x0,'realVariables':_0x346657};_0xbb21a2[_0x466725(0x743)]=_0x2948a5,_0xbb21a2[_0x466725(0x743)]['realVariables']={..._0x346657},delete _0xbb21a2['_id'],_0xbb21a2[_0x466725(0x443)]=new _0x3c80b2(),_0xbb21a2['lastInteraction']=_0x44305f,_0xbb21a2[_0x466725(0x7ae)]=_0x466725(0x113),_0xbb21a2[_0x466725(0x1d0)]=_0x1e011c,_0xbb21a2['minutesToClose']=_0x68eb0e,_0xbb21a2[_0x466725(0x276)]=_0x49a007;let _0x405352=await this[_0x466725(0x782)][_0x466725(0x7ef)]['updateOne'](_0xbb21a2[_0x466725(0x443)],_0xbb21a2,this[_0x466725(0x21b)][_0x466725(0x228)]);return this[_0x466725(0x664)]['verbose'](this['instanceName']+'\x20('+this[_0x466725(0x21b)]['wuid']+_0x466725(0x6eb)),_0x405352?_0xbb21a2:null;}catch(_0xc19e4c){let _0x2ed42a=_0x466725(0xb5),_0x4052dc=_0xc19e4c instanceof Error?_0xc19e4c[_0x466725(0xab)]:typeof _0xc19e4c==_0x466725(0x2b9)?JSON[_0x466725(0x52f)](_0xc19e4c):_0xc19e4c,_0x425cf7=_0x2ed42a+':\x20'+_0x4052dc;throw this['logger'][_0x466725(0x5f8)](this[_0x466725(0x5b1)]+'\x20('+this[_0x466725(0x21b)]['wuid']+_0x466725(0x46a)+_0x425cf7),new m(_0x425cf7);}}async[a0_0x4a47c0(0x712)](_0xf13eec,_0x13d545){const _0x55173e=a0_0x4a47c0;let _0x5099e,_0x1eec32;try{let _0x2e1d1c=_0x13d545[_0x55173e(0x7ee)];if(!_0x2e1d1c||!_0x2e1d1c[_0x55173e(0x3d7)]||!_0x2e1d1c[_0x55173e(0x422)])throw new Error(_0x55173e(0x62b));let _0x4f7380;([_0x55173e(0x52c),_0x55173e(0x15f),_0x55173e(0x33e)][_0x55173e(0x34e)](_0xa456bb=>_0x2e1d1c['url'][_0x55173e(0x795)](_0xa456bb))||_0x2e1d1c['requestFile'])&&(_0x4f7380=_0x55173e(0x2c0));let _0x4c348e='\u205f',_0x280606;try{_0x280606=JSON[_0x55173e(0x4e6)](_0x2e1d1c[_0x55173e(0x6cc)][_0x55173e(0x470)](new RegExp(_0x4c348e,'g'),''));}catch(_0x476df6){throw _0x476df6;}let _0x1dc0e2={'method':_0x2e1d1c[_0x55173e(0x422)],'url':_0x2e1d1c[_0x55173e(0x3d7)],'headers':_0x2e1d1c[_0x55173e(0x161)]||{},..._0x2e1d1c[_0x55173e(0x422)]['toUpperCase']()!==_0x55173e(0x5bd)&&_0x2e1d1c[_0x55173e(0x6cc)]?{'data':JSON['parse'](_0x2e1d1c['bodyString'][_0x55173e(0x470)](new RegExp(_0x4c348e,'g'),''))}:{},..._0x4f7380&&{'responseType':_0x4f7380}},_0x18d6df=await(0x0,te[_0x55173e(0x339)])(_0x1dc0e2),_0x2c4547=_0x18d6df[_0x55173e(0x12f)][_0x55173e(0x5b5)];if(_0x2c4547&&_0x2c4547[_0x55173e(0x795)](_0x55173e(0x257))||typeof _0x18d6df['data']==_0x55173e(0x4c4)){if(typeof _0x18d6df['data']==_0x55173e(0x4c4)){let _0x135d24=_0x18d6df['data'][_0x55173e(0x470)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x55173e(0x3a3)]();try{_0x5099e=JSON[_0x55173e(0x4e6)](_0x135d24);}catch(_0x86ff7d){this['logger']['error'](_0x55173e(0x77f)+_0x86ff7d[_0x55173e(0xab)]),_0x5099e={'_apiResponse':_0x18d6df[_0x55173e(0x37a)]};}}else _0x5099e=_0x18d6df['data'];let _0x496fe9=_0xf13eec[_0x55173e(0x743)][_0x55173e(0x1cc)],_0x26ad25=this['flattenObject'](_0x5099e);return Object['assign'](_0x496fe9,_0x26ad25),_0xf13eec['chatLog']['realVariables']=_0x496fe9,_0x1eec32={'error':!0x1,'apiResponse':_0x5099e},this[_0x55173e(0x42d)](_0xf13eec,_0x13d545,_0x1eec32),_0x5099e;}if(_0x2c4547&&(_0x2c4547[_0x55173e(0x795)](_0x55173e(0x48f))||_0x2c4547[_0x55173e(0x795)](_0x55173e(0x2fb))||_0x2c4547[_0x55173e(0x795)](_0x55173e(0x217))||_0x2c4547[_0x55173e(0x795)]('video'))){this[_0x55173e(0x664)][_0x55173e(0x7bf)](this['instanceName']+'\x20('+this[_0x55173e(0x21b)]['wuid']+'):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20'+_0x2c4547);let _0x267a26=(0x0,X['v4'])(),_0x20c8d8='',_0x3979ad={'image/jpeg':_0x55173e(0x67b),'image/png':'.png','image/gif':'.gif','image/webp':_0x55173e(0x207),'image/svg+xml':'.svg','audio/mpeg':_0x55173e(0x410),'audio/ogg':_0x55173e(0x694),'audio/wav':'.wav','video/mp4':'.mp4','video/webm':_0x55173e(0x6d4),'video/ogg':_0x55173e(0x4fb),'text/plain':_0x55173e(0x3e3),'application/pdf':'.pdf','application/msword':'.doc','application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x55173e(0x521),'application/vnd.ms-excel':_0x55173e(0x21a),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x55173e(0x267),'application/vnd.ms-powerpoint':'.ppt','application/vnd.openxmlformats-officedocument.presentationml.presentation':'.pptx'};_0x3979ad[_0x2c4547]?(_0x20c8d8=_0x3979ad[_0x2c4547],this[_0x55173e(0x664)]['verbose'](this[_0x55173e(0x5b1)]+'\x20('+this[_0x55173e(0x21b)]['wuid']+'):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20'+_0x20c8d8)):(_0x20c8d8=_0x55173e(0x346),this[_0x55173e(0x664)][_0x55173e(0x7bf)](this[_0x55173e(0x5b1)]+'\x20('+this[_0x55173e(0x21b)][_0x55173e(0x228)]+_0x55173e(0x73b)+_0x20c8d8)),_0x267a26+=_0x20c8d8,this[_0x55173e(0x664)][_0x55173e(0x7bf)](this['instanceName']+'\x20('+this[_0x55173e(0x21b)][_0x55173e(0x228)]+'):\x20Nome\x20do\x20arquivo\x20gerado:\x20'+_0x267a26);let _0x2b1e38=this[_0x55173e(0x45a)][_0x55173e(0x58b)](_0x55173e(0x43f))[_0x55173e(0x314)];if(!_0x2b1e38){let _0x45709d=this[_0x55173e(0x45a)][_0x55173e(0x58b)](_0x55173e(0x4f8));_0x2b1e38=_0x55173e(0x2ad)+(_0x45709d&&_0x45709d['FULLCHAIN'][_0x55173e(0x31c)]('/')[0x4]);}let _0x395f1d=Buffer[_0x55173e(0x179)](_0x18d6df[_0x55173e(0x37a)]);await this[_0x55173e(0x376)](_0x395f1d,_0x267a26);let _0x244036=_0x55173e(0x53b)+_0x267a26;_0x244036=''+_0x2b1e38+_0x244036,_0x5099e={'fileUrl':_0x244036},_0xf13eec['chatLog'][_0x55173e(0x1cc)]['fileUrl']=_0x244036;let _0x155811=_0xf13eec[_0x55173e(0x743)][_0x55173e(0x1cc)],_0x5235b3=this[_0x55173e(0x16b)](_0x5099e);return Object[_0x55173e(0x337)](_0x155811,_0x5235b3),_0xf13eec[_0x55173e(0x743)][_0x55173e(0x1cc)]=_0x155811,_0x1eec32={'error':!0x1,'apiResponse':{'fileUrl':_0x244036}},this[_0x55173e(0x42d)](_0xf13eec,_0x13d545,_0x1eec32),_0x5099e;}}catch(_0x1a7b88){this[_0x55173e(0x664)][_0x55173e(0x5f8)]('Erro\x20ao\x20processar\x20a\x20chamada\x20API:'+_0x1a7b88[_0x55173e(0xab)]),_0x1a7b88[_0x55173e(0x344)]&&(_0x5099e=_0x1a7b88['response'][_0x55173e(0x37a)]);let _0x4de65a=_0xf13eec['chatLog'][_0x55173e(0x1cc)],_0x5402e9=this[_0x55173e(0x16b)](_0x5099e);return Object[_0x55173e(0x337)](_0x4de65a,_0x5402e9),_0xf13eec['chatLog'][_0x55173e(0x1cc)]=_0x4de65a,_0x1eec32={'error':!0x0,'errorLog':_0x1a7b88[_0x55173e(0x13c)](),'apiResponse':_0x5099e},this[_0x55173e(0x42d)](_0xf13eec,_0x13d545,_0x1eec32),{'success':!0x1};}}[a0_0x4a47c0(0x7b0)](_0x3c0175,_0x259727){const _0x25c008=a0_0x4a47c0;let _0x5719b2=_0x3ffd6f=>{const _0x64dd32=a0_0xa65b;let _0x3a2962=_0x3ffd6f[_0x64dd32(0x470)](/[^0-9.,-]/g,'')[_0x64dd32(0x470)](',','.'),_0x552dd3=parseFloat(_0x3a2962);return isNaN(_0x552dd3)?null:_0x552dd3;},_0x546835=_0x259727[_0x25c008(0x25e)],_0x394fc9=_0x259727[_0x25c008(0x1c2)];typeof _0x546835==_0x25c008(0x4c4)&&(_0x546835=this[_0x25c008(0x764)](_0x546835,_0x3c0175[_0x25c008(0x743)][_0x25c008(0x1cc)])??''),typeof _0x394fc9==_0x25c008(0x4c4)&&(_0x394fc9=this[_0x25c008(0x764)](_0x394fc9,_0x3c0175[_0x25c008(0x743)][_0x25c008(0x1cc)])??'');let _0x43b6ab=null;if(!_0x259727[_0x25c008(0x7fa)])return null;switch(this[_0x25c008(0x664)][_0x25c008(0x7bf)](this[_0x25c008(0x5b1)]+'\x20('+this[_0x25c008(0x21b)][_0x25c008(0x228)]+_0x25c008(0x286)+_0x546835),this[_0x25c008(0x664)]['verbose'](this[_0x25c008(0x5b1)]+'\x20('+this[_0x25c008(0x21b)]['wuid']+_0x25c008(0x3ff)+_0x394fc9),_0x259727[_0x25c008(0x7fa)]){case'+':case'-':case'*':case'/':let _0x3c2756=_0x5719b2(_0x546835||'0'),_0x2f6bde=_0x5719b2(_0x394fc9||'0');if(_0x3c2756===null)return null;switch(_0x259727[_0x25c008(0x7fa)]){case'+':_0x43b6ab=_0x3c2756+(_0x2f6bde??0x0);break;case'-':_0x43b6ab=_0x3c2756-(_0x2f6bde??0x0);break;case'*':_0x43b6ab=_0x3c2756*(_0x2f6bde??0x1);break;case'/':_0x2f6bde!==0x0&&(_0x43b6ab=_0x3c2756/(_0x2f6bde??0x1));break;}break;case _0x25c008(0x526):case _0x25c008(0x3f9):let _0x3fdb8a=_0x394fc9,_0x251582=_0x259727[_0x25c008(0x757)];if(typeof _0x251582==_0x25c008(0x4c4)&&(_0x251582=this['replaceVariables'](_0x251582,_0x3c0175['chatLog'][_0x25c008(0x1cc)])??''),_0x3fdb8a&&_0x251582!==void 0x0){let _0x2f94ca=_0x259727['editOperator']===_0x25c008(0x526)?new RegExp(_0x3fdb8a[_0x25c008(0x470)](/[-\/\\^$*+?.()|[\]{}]/g,_0x25c008(0x7f0)),'g'):new RegExp(_0x3fdb8a,'g');_0x43b6ab=_0x546835[_0x25c008(0x470)](_0x2f94ca,_0x251582);}else console['warn'](_0x25c008(0xaa));break;case _0x25c008(0x385):_0x43b6ab=_0x394fc9;break;case _0x25c008(0x192):let _0x587d95=_0x546835[_0x25c008(0x3b6)](new RegExp(_0x394fc9||''));_0x43b6ab=_0x587d95?_0x587d95[0x0]:'';break;case _0x25c008(0x45c):_0x43b6ab=_0x546835[_0x25c008(0x77c)](0x0,parseInt(_0x394fc9||'0'));break;case'truncatedtoEnd':let _0x1aacc7=parseInt(_0x394fc9||'0');_0x43b6ab=_0x546835[_0x25c008(0x77c)](_0x546835['length']-_0x1aacc7);break;case _0x25c008(0x26c):let _0x20a93f=_0x5719b2(_0x546835),_0x210fec=parseInt(_0x394fc9||'0');_0x210fec=Math[_0x25c008(0x51d)](_0x210fec),_0x20a93f!==null?_0x43b6ab=_0x20a93f['toLocaleString'](_0x25c008(0x43c),{'minimumFractionDigits':_0x210fec,'maximumFractionDigits':_0x210fec}):(console['warn'](_0x25c008(0x6b0)+_0x546835),_0x43b6ab=null);break;case _0x25c008(0x7d9):let _0x1c362b=_0x5719b2(_0x546835);_0x1c362b!==null?_0x43b6ab=_0x1c362b[_0x25c008(0x5dc)](_0x25c008(0x43c),{'style':_0x25c008(0x3a2),'currency':'BRL'}):(console[_0x25c008(0x624)]('Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20'+_0x546835),_0x43b6ab=null);break;case _0x25c008(0x4b6):_0x43b6ab=_0x546835[_0x25c008(0x53f)]();break;case _0x25c008(0x324):_0x43b6ab=_0x546835['toLowerCase']();break;case _0x25c008(0x525):_0x43b6ab=_0x546835[_0x25c008(0x31c)]('\x20')[_0x25c008(0x4b0)](_0x1a224f=>_0x1a224f[_0x25c008(0x379)](0x0)[_0x25c008(0x53f)]()+_0x1a224f[_0x25c008(0x77c)](0x1)[_0x25c008(0x72d)]())['join']('\x20');break;case _0x25c008(0x6e8):_0x43b6ab=_0x546835[_0x25c008(0x3a3)]();break;default:_0x43b6ab=_0x546835;}return _0x43b6ab!==null?_0x43b6ab[_0x25c008(0x13c)]():null;}async[a0_0x4a47c0(0x6ee)](_0x4c424a,_0x824d97){const _0x54eb66=a0_0x4a47c0;try{let _0x2cc025=_0x4c424a[_0x54eb66(0x33b)]?.[_0x54eb66(0x635)](_0x5e139d=>_0x5e139d['blockId']===_0x824d97[_0x54eb66(0x443)]?.[_0x54eb66(0x13c)]())||[],_0x72325b=_0x824d97['saveVariable'],_0x4d255d=null,_0x47ff4c=[],_0x456e36=_0x4c424a['chatLog']['realVariables'][_0x72325b];_0x47ff4c[_0x54eb66(0x723)](_0x54eb66(0x5c2)+_0x456e36+'\x22');for(let _0x33ff4a of _0x2cc025){_0x33ff4a[_0x54eb66(0x25e)]=_0x456e36,_0x4d255d=_0x33ff4a[_0x54eb66(0x25e)];let _0x736a88;try{_0x736a88=this[_0x54eb66(0x7b0)](_0x4c424a,_0x33ff4a);}catch(_0x1cfde4){this['logger'][_0x54eb66(0x5f8)](_0x54eb66(0x3e6)+_0x1cfde4[_0x54eb66(0xab)]);continue;}if(_0x736a88!==null){let _0x5a72f2='Operador:\x20\x22'+_0x33ff4a[_0x54eb66(0x7fa)]+'\x22',_0x569742=['toBRL',_0x54eb66(0x4b6),'lowerCase',_0x54eb66(0x525),_0x54eb66(0x6e8)];_0x33ff4a['editOperator']===_0x54eb66(0x526)||_0x33ff4a['editOperator']===_0x54eb66(0x3f9)?_0x5a72f2+=_0x54eb66(0x4b7)+_0x33ff4a['secondValue']+_0x54eb66(0x5a2)+_0x33ff4a[_0x54eb66(0x757)]+'\x22':!_0x569742['includes'](_0x33ff4a[_0x54eb66(0x7fa)])&&_0x33ff4a[_0x54eb66(0x1c2)]!==null&&_0x33ff4a[_0x54eb66(0x1c2)]!==void 0x0&&(_0x5a72f2+=_0x54eb66(0x303)+_0x33ff4a['secondValue']+'\x22'),_0x5a72f2+=_0x54eb66(0x2a2)+_0x736a88+'.',_0x47ff4c['push'](_0x5a72f2);}_0x736a88!==null&&(_0x456e36=_0x736a88);}if(_0x4c424a['chatLog']['realVariables']&&_0x824d97[_0x54eb66(0x700)]){_0x4c424a['chatLog'][_0x54eb66(0x1cc)][_0x824d97[_0x54eb66(0x700)]]=_0x456e36;let _0xf8a752={'variable':_0x824d97['saveVariable'],'oldValue':_0x4d255d,'newValue':_0x456e36,'moreLogs':_0x47ff4c};try{this[_0x54eb66(0x42d)](_0x4c424a,_0x824d97,_0xf8a752);}catch(_0x58812e){this[_0x54eb66(0x664)]['error']('Erro\x20ao\x20atualizar\x20conversa:\x20'+_0x58812e[_0x54eb66(0xab)]);}}return _0x72325b;}catch(_0xf412e4){return this[_0x54eb66(0x664)][_0x54eb66(0x5f8)](_0x54eb66(0x1b7)+_0xf412e4['message']),null;}}async['processConditions'](_0x9e672c,_0x17538d){const _0x5191eb=a0_0x4a47c0;try{let _0xc41165=[],_0x216dc4=_0x9e672c['conditions']['filter'](_0x12e62a=>_0x12e62a[_0x5191eb(0x3d6)]===_0x17538d[_0x5191eb(0x443)][_0x5191eb(0x13c)]()),_0x11a9db=null,_0x48cd5c=!0x1;for(let _0x40bd27 of _0x216dc4){let _0x4b1233=this[_0x5191eb(0xbc)](_0x9e672c,_0x40bd27);_0xc41165['push'](_0x5191eb(0x653)+_0x40bd27[_0x5191eb(0x25e)]+_0x5191eb(0x7c3)+_0x40bd27[_0x5191eb(0xa0)]+_0x5191eb(0x65b)+_0x40bd27[_0x5191eb(0x1c2)]+_0x5191eb(0x14b)+_0x4b1233),_0x11a9db===null?_0x11a9db=_0x4b1233:_0x40bd27[_0x5191eb(0x3a0)]===_0x5191eb(0x332)?(_0x11a9db=_0x11a9db&&_0x4b1233,_0x4b1233||(_0x48cd5c=!0x0)):_0x40bd27[_0x5191eb(0x3a0)]==='or'&&(_0x48cd5c||(_0x11a9db=_0x11a9db||_0x4b1233));}_0x11a9db===null&&(_0x11a9db=!0x0);let _0x4a2b64={'moreLogs':_0xc41165};_0x9e672c['chatLog']['lastCondition']=_0x11a9db,await this['updateConversation'](_0x9e672c,_0x17538d,_0x4a2b64);}catch(_0x517c35){this[_0x5191eb(0x664)][_0x5191eb(0x5f8)](this[_0x5191eb(0x5b1)]+'\x20('+this['instance']['wuid']+_0x5191eb(0x7aa)+(_0x517c35 instanceof Error?_0x517c35[_0x5191eb(0xab)]:JSON[_0x5191eb(0x52f)](_0x517c35,null,0x2)));}}[a0_0x4a47c0(0xbc)](_0x3882ee,_0x50dd3f){const _0x2e3d0c=a0_0x4a47c0;let _0x12ee2c=_0x50dd3f[_0x2e3d0c(0x25e)],_0x22e294=_0x50dd3f[_0x2e3d0c(0x1c2)];typeof _0x12ee2c=='string'&&(_0x12ee2c=this[_0x2e3d0c(0x764)](_0x12ee2c,_0x3882ee['chatLog']['realVariables'])??''),typeof _0x22e294==_0x2e3d0c(0x4c4)&&(_0x22e294=this[_0x2e3d0c(0x764)](_0x22e294,_0x3882ee[_0x2e3d0c(0x743)]['realVariables'])??'');try{switch(_0x50dd3f['expression']){case _0x2e3d0c(0x5f5):return _0x12ee2c===_0x22e294;case _0x2e3d0c(0x783):return _0x12ee2c!==_0x22e294;case _0x2e3d0c(0x3a8):return this[_0x2e3d0c(0x3a8)](_0x12ee2c,_0x22e294);case _0x2e3d0c(0x3ad):return!this[_0x2e3d0c(0x3a8)](_0x12ee2c,_0x22e294);case _0x2e3d0c(0x6ec):return parseFloat(_0x12ee2c)>parseFloat(_0x22e294);case'less':return parseFloat(_0x12ee2c)<parseFloat(_0x22e294);case'notEmpty':return _0x12ee2c!=='';case _0x2e3d0c(0x6d6):return _0x12ee2c==='';case _0x2e3d0c(0x1c7):return new RegExp(_0x22e294)[_0x2e3d0c(0x27b)](_0x12ee2c);case'notMatchRegex':return!new RegExp(_0x22e294)[_0x2e3d0c(0x27b)](_0x12ee2c);default:return!0x1;}}catch(_0x2fca08){return this[_0x2e3d0c(0x664)][_0x2e3d0c(0x5f8)](_0x2e3d0c(0x46c)+_0x2fca08),!0x1;}}['contains'](_0x528222,_0x441686){const _0x26ff39=a0_0x4a47c0;if(_0x528222===_0x441686&&/^\d+$/['test'](_0x528222))return!0x0;if(this['isListOfNumbers'](_0x528222)&&/^\d+$/[_0x26ff39(0x27b)](_0x441686)){let _0x4883a6=_0x528222[_0x26ff39(0x31c)](',')[_0x26ff39(0x4b0)](_0x3338f3=>parseInt(_0x3338f3[_0x26ff39(0x3a3)]())),_0x21d5e0=parseInt(_0x441686);return _0x4883a6[_0x26ff39(0x795)](_0x21d5e0);}return _0x528222[_0x26ff39(0x795)](_0x441686);}[a0_0x4a47c0(0x383)](_0x33d393){const _0x4a6ba5=a0_0x4a47c0;return/^\d+(,\d+)*$/[_0x4a6ba5(0x27b)](_0x33d393);}['processConditionsTest'](_0x10707c){const _0x33addb=a0_0x4a47c0;let _0x41a666=!0x0,_0x2d1145=null;for(let _0x212246 of _0x10707c){let _0x913853=this[_0x33addb(0x11a)](_0x212246);if(_0x2d1145==='or'&&_0x913853){_0x41a666=!0x0;break;}if(_0x2d1145==='and'&&!_0x913853){_0x41a666=!0x1;break;}_0x2d1145=_0x212246[_0x33addb(0x3a0)];}return _0x41a666;}[a0_0x4a47c0(0x11a)](_0x2a01b8){const _0x374a27=a0_0x4a47c0;let _0x4bdf20=_0x2a01b8[_0x374a27(0x25e)],_0x322ea1=_0x2a01b8[_0x374a27(0x1c2)];try{switch(_0x2a01b8[_0x374a27(0xa0)]){case'equal':return String(_0x4bdf20)===String(_0x322ea1);case _0x374a27(0x783):return String(_0x4bdf20)!==String(_0x322ea1);case _0x374a27(0x3a8):return String(_0x4bdf20)[_0x374a27(0x795)](String(_0x322ea1));case _0x374a27(0x3ad):return!String(_0x4bdf20)['includes'](String(_0x322ea1));case _0x374a27(0x6ec):return parseFloat(String(_0x4bdf20))>parseFloat(String(_0x322ea1));case _0x374a27(0x109):return parseFloat(String(_0x4bdf20))<parseFloat(String(_0x322ea1));case'notEmpty':return String(_0x4bdf20)!=='';case _0x374a27(0x6d6):return String(_0x4bdf20)==='';case _0x374a27(0x1c7):return new RegExp(String(_0x322ea1))[_0x374a27(0x27b)](String(_0x4bdf20));case _0x374a27(0x766):return!new RegExp(String(_0x322ea1))[_0x374a27(0x27b)](String(_0x4bdf20));default:return!0x1;}}catch(_0x2b47ba){return this[_0x374a27(0x664)][_0x374a27(0x5f8)](_0x374a27(0x46c)+_0x2b47ba),!0x1;}}async[a0_0x4a47c0(0x4a2)](_0x3a8997,_0xb61ced){const _0x3eaa13=a0_0x4a47c0;if(this[_0x3eaa13(0x664)][_0x3eaa13(0x7bf)](this[_0x3eaa13(0x5b1)]+'\x20('+this['instance'][_0x3eaa13(0x228)]+_0x3eaa13(0x78f)),!_0x3a8997||!_0xb61ced)return this[_0x3eaa13(0x664)][_0x3eaa13(0x5f8)](this[_0x3eaa13(0x5b1)]+'\x20('+this[_0x3eaa13(0x21b)][_0x3eaa13(0x228)]+_0x3eaa13(0x3b2)),null;let _0xffa541=_0x3a8997[_0x3eaa13(0x743)][_0x3eaa13(0xa7)][_0x3eaa13(0x56d)]['id'];this[_0x3eaa13(0x664)][_0x3eaa13(0x7bf)](this[_0x3eaa13(0x5b1)]+'\x20('+this[_0x3eaa13(0x21b)][_0x3eaa13(0x228)]+'):\x20mediaMessageInfoId\x20:\x20'+_0xffa541);let _0x499d55={'key':{'id':_0xffa541}},_0xbd3905=_0xb61ced['saveVariable'];_0x3a8997[_0x3eaa13(0x743)][_0x3eaa13(0x1cc)]['_'+_0xbd3905+_0x3eaa13(0x433)]=null,_0x3a8997[_0x3eaa13(0x743)][_0x3eaa13(0x1cc)]['_'+_0xbd3905+_0x3eaa13(0xbf)]=null,_0x3a8997[_0x3eaa13(0x743)][_0x3eaa13(0x1cc)]['_'+_0xbd3905+_0x3eaa13(0x41d)]=null,_0x3a8997[_0x3eaa13(0x743)]['realVariables']['_'+_0xbd3905+_0x3eaa13(0x392)]=_0x3a8997['chatLog'][_0x3eaa13(0xa7)][_0x3eaa13(0x311)];try{let _0x493236=await this['getBase64FromMediaMessage'](_0x499d55);this['logger'][_0x3eaa13(0x7bf)](this[_0x3eaa13(0x5b1)]+'\x20('+this[_0x3eaa13(0x21b)]['wuid']+_0x3eaa13(0x5cb)),_0x3a8997[_0x3eaa13(0x743)][_0x3eaa13(0x1cc)]['_'+_0xbd3905+_0x3eaa13(0x3cc)]=_0x493236['fileUrl'],_0x3a8997[_0x3eaa13(0x743)][_0x3eaa13(0x1cc)]['_'+_0xbd3905+_0x3eaa13(0xbf)]=_0x493236[_0x3eaa13(0x7c1)];let _0x455a0a=_0x493236[_0x3eaa13(0x7c1)][_0x3eaa13(0x3b6)](/\/(\w+)$/),_0x4dd2b0=_0x455a0a?_0x455a0a[0x1]:null;_0x3a8997[_0x3eaa13(0x743)][_0x3eaa13(0x1cc)]['_'+_0xbd3905+'.extension']=_0x4dd2b0,this[_0x3eaa13(0x664)][_0x3eaa13(0x7bf)](this[_0x3eaa13(0x5b1)]+'\x20('+this['instance']['wuid']+_0x3eaa13(0x5da)+_0xbd3905+'\x27.');}catch(_0x3128cc){this[_0x3eaa13(0x664)][_0x3eaa13(0x5f8)](this[_0x3eaa13(0x5b1)]+'\x20('+this[_0x3eaa13(0x21b)][_0x3eaa13(0x228)]+_0x3eaa13(0x389)+_0x3128cc[_0x3eaa13(0xab)]);}let _0x5e67d6=_0x3a8997['chatLog'][_0x3eaa13(0xa7)][_0x3eaa13(0x6ba)]||_0x3a8997[_0x3eaa13(0x743)]['lastReceivedMessage'][_0x3eaa13(0x6a3)]||_0x3a8997['chatLog'][_0x3eaa13(0xa7)][_0x3eaa13(0x7a0)];try{_0x3a8997[_0x3eaa13(0x743)][_0x3eaa13(0x1cc)]||(_0x3a8997['chatLog'][_0x3eaa13(0x1cc)]={});let _0x2eb048=_0x3a8997[_0x3eaa13(0x743)][_0x3eaa13(0x1cc)][_0xbd3905];_0x3a8997[_0x3eaa13(0x743)][_0x3eaa13(0x1cc)][_0xbd3905]=_0x5e67d6;let _0x54f577={'variable':_0xbd3905,'oldValue':_0x2eb048,'newValue':_0x5e67d6};this[_0x3eaa13(0x42d)](_0x3a8997,_0xb61ced,_0x54f577),this[_0x3eaa13(0x664)][_0x3eaa13(0x7bf)](this['instanceName']+'\x20('+this[_0x3eaa13(0x21b)]['wuid']+_0x3eaa13(0x3ea));}catch(_0x1a8419){let _0x3a66f4={'error':!0x0,'errorLog':_0x1a8419[_0x3eaa13(0x13c)]()};return this['updateConversation'](_0x3a8997,_0xb61ced,_0x3a66f4),this[_0x3eaa13(0x664)][_0x3eaa13(0x5f8)](this['instanceName']+'\x20('+this[_0x3eaa13(0x21b)]['wuid']+_0x3eaa13(0x497)+(_0x1a8419 instanceof Error?_0x1a8419[_0x3eaa13(0xab)]:JSON['stringify'](_0x1a8419,null,0x2))),null;}}async[a0_0x4a47c0(0x7eb)](_0x422713,_0x37dc1d){const _0xe9bbb=a0_0x4a47c0;if(this[_0xe9bbb(0x664)][_0xe9bbb(0x7bf)](this[_0xe9bbb(0x5b1)]+'\x20('+this[_0xe9bbb(0x21b)][_0xe9bbb(0x228)]+_0xe9bbb(0x6e5)),!_0x422713||!_0x37dc1d)return this[_0xe9bbb(0x664)]['error'](this[_0xe9bbb(0x5b1)]+'\x20('+this['instance']['wuid']+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x20831a=Date[_0xe9bbb(0x331)](),_0x195ede=parseInt(_0x37dc1d[_0xe9bbb(0x414)],0xa);if(isNaN(_0x195ede))return this[_0xe9bbb(0x664)][_0xe9bbb(0x5f8)](this[_0xe9bbb(0x5b1)]+'\x20('+this['instance'][_0xe9bbb(0x228)]+_0xe9bbb(0x444)),null;let _0xd53b19={'newStoppedUntil':_0x20831a+_0x195ede*0x3c*0x3e8};return await this[_0xe9bbb(0x42d)](_0x422713,_0x37dc1d,_0xd53b19,!0x0),null;}async[a0_0x4a47c0(0x10f)](_0x2bc6a7,_0x4908b8){const _0x243b66=a0_0x4a47c0;try{switch(_0x4908b8[_0x243b66(0x168)][_0x243b66(0x144)]){case _0x243b66(0x7f9):await this[_0x243b66(0x16d)](_0x2bc6a7,_0x4908b8);break;case'sendMedia':await this[_0x243b66(0x265)](_0x2bc6a7,_0x4908b8);break;case _0x243b66(0x2d3):await this[_0x243b66(0x17d)](_0x2bc6a7,_0x4908b8);break;case'sendAudio':await this['uazapiSendAudio'](_0x2bc6a7,_0x4908b8);break;case _0x243b66(0x761):await this[_0x243b66(0x178)](_0x2bc6a7,_0x4908b8);break;case'sendPoll':await this[_0x243b66(0x1dc)](_0x2bc6a7,_0x4908b8);break;case _0x243b66(0x347):await this[_0x243b66(0x1dc)](_0x2bc6a7,_0x4908b8);break;case _0x243b66(0x5a1):await this[_0x243b66(0x4c0)](_0x2bc6a7,_0x4908b8);break;default:this[_0x243b66(0x664)]['error'](this[_0x243b66(0x5b1)]+'\x20('+this['instance'][_0x243b66(0x228)]+_0x243b66(0x679)+_0x4908b8[_0x243b66(0x168)][_0x243b66(0x144)]);}}catch(_0x5f1415){this[_0x243b66(0x664)]['error'](this[_0x243b66(0x5b1)]+'\x20('+this[_0x243b66(0x21b)][_0x243b66(0x228)]+_0x243b66(0x729)+(_0x5f1415 instanceof Error?_0x5f1415[_0x243b66(0xab)]:JSON['stringify'](_0x5f1415,null,0x2)));}}async[a0_0x4a47c0(0x42d)](_0x2c6b1a,_0x5bd9e8,_0x4dbf3f,_0x49170d=!0x1,_0x4849d9=!0x1){const _0x1e5ee1=a0_0x4a47c0;_0x2c6b1a[_0x1e5ee1(0x743)][_0x1e5ee1(0x24c)]||(_0x2c6b1a['chatLog'][_0x1e5ee1(0x24c)]=[]);let _0x132e7e=(_0x2c6b1a[_0x1e5ee1(0x743)][_0x1e5ee1(0x24c)]?.[_0x1e5ee1(0x415)]??0x0)+0x1,_0x30bdda=_0x2c6b1a[_0x1e5ee1(0x743)]['blockLogs']['filter'](_0x409236=>String(_0x409236[_0x1e5ee1(0x3d6)])===String(_0x5bd9e8[_0x1e5ee1(0x443)]))[_0x1e5ee1(0x415)]+0x1,_0x6e8d50=_0x4dbf3f?.[_0x1e5ee1(0x6e1)]??Date[_0x1e5ee1(0x331)](),_0x1aac83=_0x4dbf3f?.[_0x1e5ee1(0x5f8)]?_0x4dbf3f['errorLog']??_0x4dbf3f[_0x1e5ee1(0x5f8)][_0x1e5ee1(0x13c)]():void 0x0,_0x531aa8={'onTime':_0x6e8d50,'blockId':_0x5bd9e8['_id'],'order':_0x132e7e,'activatedCount':_0x30bdda,'error':_0x4dbf3f?.[_0x1e5ee1(0x5f8)]??!0x1,'messageId':_0x4dbf3f?.[_0x1e5ee1(0x777)],'apiResponse':_0x4dbf3f?.[_0x1e5ee1(0x1d2)],'apiResponseString':_0x4dbf3f?.[_0x1e5ee1(0x1d2)]?JSON[_0x1e5ee1(0x52f)](_0x4dbf3f?.[_0x1e5ee1(0x1d2)]):void 0x0,'variable':_0x4dbf3f?.['variable'],'oldValue':_0x4dbf3f?.[_0x1e5ee1(0x6f6)],'newValue':_0x4dbf3f?.[_0x1e5ee1(0x733)],'newStoppedUntil':_0x4dbf3f?.['newStoppedUntil'],'moreLogs':_0x4dbf3f?.[_0x1e5ee1(0x597)],'errorLog':_0x1aac83};if(_0x4dbf3f[_0x1e5ee1(0x597)]&&_0x4dbf3f['moreLogs'][_0x1e5ee1(0x415)]>0x0){let _0x2a6ca4=_0x4dbf3f['moreLogs']['map'](_0x13c91b=>this[_0x1e5ee1(0x75f)](_0x13c91b,_0x2c6b1a[_0x1e5ee1(0x743)][_0x1e5ee1(0x1cc)]));_0x531aa8[_0x1e5ee1(0x597)]=_0x2a6ca4;}if(_0x2c6b1a[_0x1e5ee1(0x743)][_0x1e5ee1(0x1cc)]||(_0x2c6b1a[_0x1e5ee1(0x743)]['realVariables']={}),_0x2c6b1a[_0x1e5ee1(0x743)][_0x1e5ee1(0x1cc)][_0x1e5ee1(0x2a8)]=String(_0x30bdda),_0x2c6b1a[_0x1e5ee1(0x743)][_0x1e5ee1(0x1cc)][_0x1e5ee1(0x62e)]=String(_0x4dbf3f[_0x1e5ee1(0x5f8)]??!0x1),_0x2c6b1a[_0x1e5ee1(0x743)]['blockLogs'][_0x1e5ee1(0x723)](_0x531aa8),_0x2c6b1a[_0x1e5ee1(0x743)]['realVariables']['telefone']&&_0x2c6b1a['chatLog'][_0x1e5ee1(0x1cc)][_0x1e5ee1(0x76f)]!==_0x2c6b1a[_0x1e5ee1(0x1d0)]){let _0x57bc33=(await this['whatsappNumber']({'numbers':[_0x2c6b1a['chatLog']['realVariables'][_0x1e5ee1(0x76f)]]}))[0x0]['jid'];_0x2c6b1a['chatLog'][_0x1e5ee1(0x1cc)][_0x1e5ee1(0x76f)]=_0x57bc33,_0x2c6b1a[_0x1e5ee1(0x1d0)]=_0x57bc33;try{let _0x29e461={'_id':{'$ne':_0x2c6b1a['_id']},'remoteJid':_0x57bc33,'status':_0x1e5ee1(0x113)},_0x57f41d={'status':_0x1e5ee1(0x2fd)};await this['repository'][_0x1e5ee1(0x7ef)][_0x1e5ee1(0x2aa)](_0x29e461,_0x57f41d,this[_0x1e5ee1(0x21b)][_0x1e5ee1(0x228)]),this[_0x1e5ee1(0x664)][_0x1e5ee1(0x7bf)](this[_0x1e5ee1(0x5b1)]+'\x20('+this[_0x1e5ee1(0x21b)][_0x1e5ee1(0x228)]+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.');}catch(_0x527150){this['logger'][_0x1e5ee1(0x5f8)](this[_0x1e5ee1(0x5b1)]+'\x20('+this['instance'][_0x1e5ee1(0x228)]+'):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20'+_0x527150['message']);}try{let _0x189cb4=_0x2c6b1a[_0x1e5ee1(0x743)]['realVariables'],_0x24b622=await this[_0x1e5ee1(0x51e)](_0x57bc33),_0x5425ad={..._0x189cb4,..._0x24b622,'_remoteJid':_0x57bc33};_0x2c6b1a[_0x1e5ee1(0x743)]['realVariables']=_0x5425ad;}catch(_0x4713ad){this[_0x1e5ee1(0x664)][_0x1e5ee1(0x5f8)](this['instanceName']+'\x20('+this['instance'][_0x1e5ee1(0x228)]+_0x1e5ee1(0x6e4)+_0x4713ad['message']);}}_0x2c6b1a[_0x1e5ee1(0x743)]['lastBlockId']=_0x5bd9e8[_0x1e5ee1(0x443)][_0x1e5ee1(0x13c)](),_0x2c6b1a['chatLog'][_0x1e5ee1(0x3f3)]&&(_0x2c6b1a[_0x1e5ee1(0x743)][_0x1e5ee1(0x3f3)]=_0x2c6b1a[_0x1e5ee1(0x743)][_0x1e5ee1(0x3f3)]),_0x2c6b1a[_0x1e5ee1(0x743)][_0x1e5ee1(0xa7)]&&(_0x2c6b1a['chatLog']['lastReceivedMessage']=_0x2c6b1a[_0x1e5ee1(0x743)][_0x1e5ee1(0xa7)]),_0x2c6b1a[_0x1e5ee1(0x743)]['lastCondition']&&(_0x2c6b1a[_0x1e5ee1(0x743)][_0x1e5ee1(0x728)]=_0x2c6b1a[_0x1e5ee1(0x743)]['lastCondition']),_0x4849d9&&(_0x2c6b1a[_0x1e5ee1(0x7ae)]=_0x1e5ee1(0x2fd)),_0x49170d?this[_0x1e5ee1(0x5d6)](_0x2c6b1a):this[_0x1e5ee1(0x3f0)](_0x2c6b1a,_0x5bd9e8);}[a0_0x4a47c0(0x75f)](_0x157fd5,_0x14b766){const _0x4341b3=a0_0x4a47c0;return _0x157fd5[_0x4341b3(0x470)](/\{\{([^}]+)\}\}/g,(_0x39877a,_0x2d1512)=>_0x14b766[_0x2d1512]?'{{'+_0x2d1512+_0x4341b3(0x797)+_0x14b766[_0x2d1512]+'\x22':'{{'+_0x2d1512+_0x4341b3(0xa6));}async['saveConversationToDatabase'](_0x6f6f4c){const _0x1855ba=a0_0x4a47c0;try{let _0x38ff86=Object[_0x1855ba(0x3ce)](_0x6f6f4c[_0x1855ba(0x743)][_0x1855ba(0x1cc)])[_0x1855ba(0x4b0)](([_0x2ae552,_0x2f1bb9])=>({'name':_0x2ae552,'value':_0x2f1bb9})),_0x40d6cf={'status':_0x6f6f4c[_0x1855ba(0x7ae)],'remoteJid':_0x6f6f4c['remoteJid'],'blocks':_0x6f6f4c['blocks'],'waitingMenu_id':_0x6f6f4c[_0x1855ba(0xf1)],'waitingMenu_text':_0x6f6f4c['waitingMenu_text'],'waitingMenu_replyOptions':_0x6f6f4c[_0x1855ba(0x15c)],'chatLog':{'lastBlockId':_0x6f6f4c[_0x1855ba(0x743)][_0x1855ba(0x68a)],'lastSendMessage':_0x6f6f4c['chatLog'][_0x1855ba(0x3f3)],'lastReceivedMessage':_0x6f6f4c[_0x1855ba(0x743)][_0x1855ba(0xa7)],'lastCondition':_0x6f6f4c['chatLog']['lastCondition'],'chatVariables':_0x38ff86,'realVariables':_0x6f6f4c[_0x1855ba(0x743)]['realVariables'],'blockLogs':_0x6f6f4c[_0x1855ba(0x743)][_0x1855ba(0x24c)]}},_0x27e118=await this[_0x1855ba(0x782)][_0x1855ba(0x7ef)][_0x1855ba(0xc6)](_0x6f6f4c[_0x1855ba(0x443)],_0x40d6cf,this[_0x1855ba(0x21b)]['wuid']);if(_0x27e118){this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x1855ba(0x21b)][_0x1855ba(0x228)]+_0x1855ba(0x5c4)+_0x27e118[_0x1855ba(0x443)]);try{let _0x203045=[_0x1855ba(0x3d0),'nomecompleto','email','cpf',_0x1855ba(0x7ae),_0x1855ba(0x6d5),_0x1855ba(0x2ee),'tags',_0x1855ba(0x747),'atendimentoAberto'];if(!this[_0x1855ba(0x22b)]&&(await this[_0x1855ba(0x739)](),!this[_0x1855ba(0x22b)]))throw new Error(_0x1855ba(0x755));let _0x4f62e5=this[_0x1855ba(0x22b)]?.['customFields']['map'](_0x863eab=>_0x863eab[_0x1855ba(0x25b)]),_0x32c818={};Object[_0x1855ba(0x3ce)](_0x6f6f4c[_0x1855ba(0x743)][_0x1855ba(0x1cc)])['forEach'](([_0x595c04,_0x569ceb])=>{const _0x5a7535=_0x1855ba;_0x203045[_0x5a7535(0x795)](_0x595c04)&&(_0x595c04===_0x5a7535(0x24f)&&typeof _0x569ceb=='string'?_0x32c818[_0x595c04]=_0x569ceb['split'](',')['map'](_0x338a3b=>_0x338a3b[_0x5a7535(0x3a3)]())[_0x5a7535(0x635)](_0x39a7ae=>_0x39a7ae!==''):_0x595c04===_0x5a7535(0x747)&&typeof _0x569ceb==_0x5a7535(0x4c4)?_0x32c818[_0x595c04]=_0x569ceb[_0x5a7535(0x31c)](',')[_0x5a7535(0x4b0)](_0x205922=>_0x205922[_0x5a7535(0x3a3)]())[_0x5a7535(0x635)](_0x419f09=>_0x419f09!==''):_0x32c818[_0x595c04]=_0x569ceb);});let _0x4a70b0=_0x6f6f4c[_0x1855ba(0x743)][_0x1855ba(0x24c)][_0x6f6f4c[_0x1855ba(0x743)][_0x1855ba(0x24c)][_0x1855ba(0x415)]-0x1];if(_0x4a70b0){let _0x578c94=_0x4a70b0[_0x1855ba(0x48e)];_0x578c94!==void 0x0&&(_0x32c818[_0x1855ba(0x9d)]=_0x578c94[_0x1855ba(0x13c)]());}let _0x393ec2=_0x38ff86[_0x1855ba(0x635)](_0xae3b6e=>_0x4f62e5[_0x1855ba(0x795)](_0xae3b6e[_0x1855ba(0x25b)]));this[_0x1855ba(0x664)]['verbose'](this[_0x1855ba(0x5b1)]+'\x20('+this[_0x1855ba(0x21b)][_0x1855ba(0x228)]+_0x1855ba(0x42a)),this[_0x1855ba(0x664)][_0x1855ba(0x7bf)](_0x32c818),this['logger']['verbose'](this[_0x1855ba(0x5b1)]+'\x20('+this[_0x1855ba(0x21b)]['wuid']+_0x1855ba(0x101)),this[_0x1855ba(0x664)][_0x1855ba(0x7bf)](_0x393ec2);let _0x41058a=_0x393ec2[_0x1855ba(0x4b0)](_0x182f38=>{const _0x1bfc8b=_0x1855ba;let _0x449840=this[_0x1bfc8b(0x22b)]?.[_0x1bfc8b(0x2c5)][_0x1bfc8b(0x2ba)](_0x1e84f2=>_0x1e84f2['name']===_0x182f38[_0x1bfc8b(0x25b)]);if(!_0x449840)throw new Error('Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20'+_0x182f38[_0x1bfc8b(0x25b)]);return{'_id':_0x449840[_0x1bfc8b(0x443)],'value':_0x182f38[_0x1bfc8b(0x24b)]};});this[_0x1855ba(0x664)][_0x1855ba(0x7bf)](this[_0x1855ba(0x5b1)]+'\x20('+this[_0x1855ba(0x21b)][_0x1855ba(0x228)]+_0x1855ba(0x5f7)),this['logger']['verbose'](_0x41058a),await this[_0x1855ba(0x417)](_0x6f6f4c['remoteJid'],_0x32c818,_0x41058a);}catch(_0x3feb7c){this['logger'][_0x1855ba(0x5f8)](this[_0x1855ba(0x5b1)]+'\x20('+this[_0x1855ba(0x21b)][_0x1855ba(0x228)]+'):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20'+(_0x3feb7c instanceof Error?_0x3feb7c[_0x1855ba(0xab)]:JSON[_0x1855ba(0x52f)](_0x3feb7c,null,0x2)));}}else this[_0x1855ba(0x664)]['error'](this[_0x1855ba(0x5b1)]+'\x20('+this['instance']['wuid']+_0x1855ba(0x47c));}catch(_0x4b066a){this[_0x1855ba(0x664)][_0x1855ba(0x5f8)](this['instanceName']+'\x20('+this[_0x1855ba(0x21b)]['wuid']+_0x1855ba(0x35e)+(_0x4b066a instanceof Error?_0x4b066a[_0x1855ba(0xab)]:JSON[_0x1855ba(0x52f)](_0x4b066a,null,0x2)));}}async[a0_0x4a47c0(0x417)](_0x20639b,_0x18b1ba,_0x5cc500){const _0x4b8246=a0_0x4a47c0;try{let _0x438d51={'leadInfo.leadnome':_0x18b1ba[_0x4b8246(0x3d0)],'leadInfo.nomecompleto':_0x18b1ba[_0x4b8246(0x18b)],'leadInfo.email':_0x18b1ba[_0x4b8246(0x35d)],'leadInfo.cpf':_0x18b1ba['cpf'],'leadInfo.status':_0x18b1ba[_0x4b8246(0x7ae)],'leadInfo.notas':_0x18b1ba[_0x4b8246(0x6d5)],'leadInfo.responsavelid':_0x18b1ba[_0x4b8246(0x2ee)],'leadInfo.tags':_0x18b1ba['tags'],'leadInfo.etiquetas':_0x18b1ba['etiquetas'],'leadInfo.customFields':_0x5cc500,'leadInfo.atendimentoAberto':_0x18b1ba[_0x4b8246(0x7d2)]},_0x370f2d=await this[_0x4b8246(0x782)][_0x4b8246(0x316)][_0x4b8246(0xb1)]({'where':{'_id':_0x20639b}},this[_0x4b8246(0x21b)][_0x4b8246(0x228)]);if(!_0x370f2d)return _0x4b8246(0x1f0);let _0x54373e=new Set(_0x370f2d[_0x4b8246(0xa5)]['etiquetas']||[]),_0x561559=new Set(_0x18b1ba['etiquetas']||[]),_0x502a76=await this['repository'][_0x4b8246(0x34b)]['find']({'where':{}},this[_0x4b8246(0x21b)]['wuid']),_0x406143=new Set(_0x502a76[_0x4b8246(0x4b0)](_0x1c990d=>_0x1c990d[_0x4b8246(0x443)])),_0x2c2d5b=[..._0x561559]['filter'](_0x10a4bf=>!_0x54373e['has'](_0x10a4bf)&&_0x406143[_0x4b8246(0x130)](_0x10a4bf)),_0x457c77=[..._0x54373e][_0x4b8246(0x635)](_0x4b20b1=>!_0x561559[_0x4b8246(0x130)](_0x4b20b1));for(let _0x36e02f of _0x2c2d5b)await this[_0x4b8246(0x530)](_0x36e02f,_0x370f2d[_0x4b8246(0x443)]),_0x54373e['add'](_0x36e02f);for(let _0xebc6f of _0x457c77)await this[_0x4b8246(0x5ae)](_0xebc6f,_0x370f2d[_0x4b8246(0x443)]),_0x54373e[_0x4b8246(0x2d6)](_0xebc6f);if(_0x4b8246(0x9d)in _0x18b1ba){let _0x566fb1=_0x18b1ba[_0x4b8246(0x9d)];_0x438d51[_0x4b8246(0x7b9)]=_0x566fb1?Number(_0x566fb1):null;}if(_0x4b8246(0x7d2)in _0x18b1ba){let _0x1d4550=_0x18b1ba[_0x4b8246(0x7d2)][_0x4b8246(0x72d)]();_0x438d51[_0x4b8246(0x129)]=_0x1d4550===_0x4b8246(0x23f)||_0x1d4550==='1'||_0x1d4550===_0x4b8246(0x5b0)||_0x1d4550===_0x4b8246(0x362);}let _0x1380da=await this[_0x4b8246(0x782)][_0x4b8246(0x316)][_0x4b8246(0xc6)]({'where':{'_id':_0x20639b}},_0x438d51,this[_0x4b8246(0x21b)][_0x4b8246(0x228)]);_0x1380da?(this[_0x4b8246(0x664)][_0x4b8246(0x7bf)](this['instanceName']+'\x20('+this[_0x4b8246(0x21b)][_0x4b8246(0x228)]+_0x4b8246(0x29c)+_0x1380da['_id']),q(this[_0x4b8246(0x5b1)],_0x4b8246(0x7a6),{'chat':_0x1380da})):this[_0x4b8246(0x664)][_0x4b8246(0x5f8)](this[_0x4b8246(0x5b1)]+'\x20('+this['instance'][_0x4b8246(0x228)]+_0x4b8246(0x2eb));}catch(_0x44c170){this[_0x4b8246(0x664)][_0x4b8246(0x5f8)](this['instanceName']+'\x20('+this[_0x4b8246(0x21b)][_0x4b8246(0x228)]+_0x4b8246(0x5ba)+(_0x44c170 instanceof Error?_0x44c170[_0x4b8246(0xab)]:JSON['stringify'](_0x44c170,null,0x2)));}}async[a0_0x4a47c0(0x26a)](_0x27c7b0,_0x3dc8db){const _0x2266f7=a0_0x4a47c0;this[_0x2266f7(0x664)][_0x2266f7(0x7bf)](this['instanceName']+'\x20('+this[_0x2266f7(0x21b)][_0x2266f7(0x228)]+'):\x20atualização\x20chat:\x20'+_0x3dc8db);try{let _0x10f3d4=await this['repository']['chat'][_0x2266f7(0xc6)]({'where':{'_id':_0x27c7b0[_0x2266f7(0x1d0)]}},{'leadInfo.desativadoFluxoAte':_0x3dc8db},this[_0x2266f7(0x21b)][_0x2266f7(0x228)]);this[_0x2266f7(0x664)][_0x2266f7(0x7bf)](this[_0x2266f7(0x5b1)]+'\x20('+this[_0x2266f7(0x21b)][_0x2266f7(0x228)]+'):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20'+_0x27c7b0[_0x2266f7(0x443)]),this[_0x2266f7(0x664)][_0x2266f7(0x7bf)](this[_0x2266f7(0x5b1)]+'\x20('+this[_0x2266f7(0x21b)][_0x2266f7(0x228)]+_0x2266f7(0x676)+JSON[_0x2266f7(0x52f)](_0x10f3d4,null,0x2)),_0x10f3d4&&q(this[_0x2266f7(0x5b1)],_0x2266f7(0x7a6),{'chat':_0x10f3d4});}catch(_0x47aec7){this[_0x2266f7(0x664)][_0x2266f7(0x5f8)](this[_0x2266f7(0x5b1)]+'\x20('+this[_0x2266f7(0x21b)]['wuid']+_0x2266f7(0x412)+(_0x47aec7 instanceof Error?_0x47aec7[_0x2266f7(0xab)]:JSON[_0x2266f7(0x52f)](_0x47aec7,null,0x2)));}}async[a0_0x4a47c0(0x1a1)](_0x56c084){const _0x14db50=a0_0x4a47c0;try{this[_0x14db50(0x664)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x14db50(0x228)]+_0x14db50(0x4ab));let _0x20fcd9=_0x56c084['replace'](/\D/g,''),_0x5c592b=this[_0x14db50(0x22b)][_0x14db50(0x5f1)][_0x14db50(0x2ba)](_0x599ae4=>_0x599ae4[_0x14db50(0x5cc)]===_0x20fcd9);if(_0x5c592b||(this[_0x14db50(0x664)][_0x14db50(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x14db50(0x228)]+_0x14db50(0x574)),_0x5c592b=this[_0x14db50(0x22b)]['flows'][_0x14db50(0x2ba)](_0x104bed=>_0x104bed['default']===!0x0)),!_0x5c592b)return this['logger'][_0x14db50(0x7bf)](this['instanceName']+'\x20('+this[_0x14db50(0x21b)][_0x14db50(0x228)]+'):\x20Não\x20achou\x20nenhum\x20flow'),null;let _0x69f8f5=await this['repository'][_0x14db50(0x4e4)][_0x14db50(0xb1)]({'where':{'_id':_0x5c592b[_0x14db50(0x443)]}});if(!_0x69f8f5||!_0x69f8f5['whoCanUse']?.[_0x14db50(0x795)](this[_0x14db50(0x21b)][_0x14db50(0x228)]))throw this['logger'][_0x14db50(0x5f8)](this['instanceName']+'\x20('+this[_0x14db50(0x21b)][_0x14db50(0x228)]+_0x14db50(0x73e)+_0x69f8f5[_0x14db50(0x443)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x14db50(0x3e8)+_0x69f8f5[_0x14db50(0x443)]+_0x14db50(0x328));return _0x69f8f5;}catch(_0x1ea4ff){return this['logger']['error'](this[_0x14db50(0x5b1)]+'\x20('+this['instance']['wuid']+_0x14db50(0xfe)+(_0x1ea4ff instanceof Error?_0x1ea4ff['message']:JSON[_0x14db50(0x52f)](_0x1ea4ff,null,0x2))),null;}}async[a0_0x4a47c0(0x746)](_0x46792e,_0x20f6e9){const _0x3a507d=a0_0x4a47c0;try{let _0x4a831d=!!_0x20f6e9[_0x3a507d(0x7a0)],_0x28fe38=_0x20f6e9[_0x3a507d(0x69b)],_0x59a14f=null;if(this['logger'][_0x3a507d(0x7bf)](this[_0x3a507d(0x5b1)]+'\x20('+this[_0x3a507d(0x21b)][_0x3a507d(0x228)]+_0x3a507d(0x6dd)+_0x4a831d+'\x20quoted:\x20'+_0x28fe38),_0x4a831d){this[_0x3a507d(0x664)][_0x3a507d(0x7bf)](this[_0x3a507d(0x5b1)]+'\x20('+this['instance'][_0x3a507d(0x228)]+_0x3a507d(0x509));let _0x3580fb={'where':{'remoteJid':_0x46792e,'waitingMenu_id':_0x28fe38}};if(_0x59a14f=await this[_0x3a507d(0x782)]['flowConversation'][_0x3a507d(0xb1)](_0x3580fb,this['instance'][_0x3a507d(0x228)]),!_0x59a14f)return this['logger'][_0x3a507d(0x7bf)](this[_0x3a507d(0x5b1)]+'\x20('+this['instance'][_0x3a507d(0x228)]+_0x3a507d(0x7ca)),null;let _0x523a9b=Date[_0x3a507d(0x331)](),_0x31d6e5=_0x59a14f?.[_0x3a507d(0x2a9)]||0x0,_0x2e1d19=_0x523a9b-_0x31d6e5*0x3c*0x3e8;if(_0x59a14f[_0x3a507d(0x6f4)]<_0x2e1d19){this[_0x3a507d(0x664)][_0x3a507d(0x7bf)](this[_0x3a507d(0x5b1)]+'\x20('+this[_0x3a507d(0x21b)]['wuid']+_0x3a507d(0x275));let _0xb5dbec={'number':_0x59a14f['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x59a14f[_0x3a507d(0x59a)]}};await this[_0x3a507d(0x644)](_0xb5dbec);let _0x568963={'status':_0x3a507d(0x2fd),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this['repository'][_0x3a507d(0x7ef)][_0x3a507d(0xc6)](_0x59a14f['_id'],_0x568963,this[_0x3a507d(0x21b)]['wuid']),null;}return _0x59a14f[_0x3a507d(0x6f4)]=Date[_0x3a507d(0x331)](),_0x59a14f[_0x3a507d(0x743)][_0x3a507d(0xa7)]=_0x20f6e9,_0x59a14f;}else{this[_0x3a507d(0x664)][_0x3a507d(0x7bf)](this[_0x3a507d(0x5b1)]+'\x20('+this[_0x3a507d(0x21b)][_0x3a507d(0x228)]+_0x3a507d(0x46a)+this[_0x3a507d(0x21b)][_0x3a507d(0x228)]+_0x3a507d(0x11e)),this['logger'][_0x3a507d(0x7bf)](this[_0x3a507d(0x5b1)]+'\x20('+this[_0x3a507d(0x21b)][_0x3a507d(0x228)]+_0x3a507d(0x458));let _0x3a5888={'where':{'remoteJid':_0x46792e,'status':_0x3a507d(0x113)}};if(_0x59a14f=await this[_0x3a507d(0x782)][_0x3a507d(0x7ef)][_0x3a507d(0xb1)](_0x3a5888,this[_0x3a507d(0x21b)]['wuid']),!_0x59a14f){let _0x100c20=await this[_0x3a507d(0x1a1)](_0x46792e);if(_0x100c20&&(_0x59a14f=await this[_0x3a507d(0x466)](_0x100c20,_0x20f6e9[_0x3a507d(0x56d)],_0x20f6e9)),!_0x59a14f)return null;}let _0xf81914=Date[_0x3a507d(0x331)](),_0x331ee8=_0x59a14f?.['minutesToClose']||0x0,_0x3e8df3=_0xf81914-_0x331ee8*0x3c*0x3e8;if(this['logger'][_0x3a507d(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x3a507d(0x228)]+'):\x20Current\x20Time:\x20'+_0xf81914+_0x3a507d(0x633)+_0x331ee8+_0x3a507d(0x543)+_0x3e8df3),this[_0x3a507d(0x664)][_0x3a507d(0x7bf)](this[_0x3a507d(0x5b1)]+'\x20('+this[_0x3a507d(0x21b)][_0x3a507d(0x228)]+'):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot'),this[_0x3a507d(0x664)]['verbose'](this['instanceName']+'\x20('+this[_0x3a507d(0x21b)][_0x3a507d(0x228)]+'):\x20conversation.lastInteraction:\x20'+_0x59a14f['lastInteraction']),this[_0x3a507d(0x664)][_0x3a507d(0x7bf)](this['instanceName']+'\x20('+this[_0x3a507d(0x21b)][_0x3a507d(0x228)]+'):\x20expirationTime:\x20'+_0x3e8df3),_0x59a14f[_0x3a507d(0x6f4)]<_0x3e8df3){this[_0x3a507d(0x664)][_0x3a507d(0x7bf)](this[_0x3a507d(0x5b1)]+'\x20('+this[_0x3a507d(0x21b)][_0x3a507d(0x228)]+'):\x20Conversa\x20está\x20expirada');let _0x57fe06=await this[_0x3a507d(0x1a1)](_0x46792e);if(_0x57fe06===null)return null;_0x59a14f&&await this[_0x3a507d(0x782)][_0x3a507d(0x7ef)]['updateOne'](_0x59a14f[_0x3a507d(0x443)],{'status':_0x3a507d(0x2fd)},this[_0x3a507d(0x21b)][_0x3a507d(0x228)]),_0x59a14f=await this[_0x3a507d(0x466)](_0x57fe06,_0x20f6e9[_0x3a507d(0x56d)],_0x20f6e9);}return _0x59a14f[_0x3a507d(0x6f4)]=_0xf81914,_0x59a14f[_0x3a507d(0x743)][_0x3a507d(0xa7)]=_0x20f6e9,_0x59a14f;}}catch(_0x401fce){return this[_0x3a507d(0x664)][_0x3a507d(0x5f8)](this[_0x3a507d(0x5b1)]+'\x20('+this['instance'][_0x3a507d(0x228)]+'):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20'+(_0x401fce instanceof Error?_0x401fce[_0x3a507d(0xab)]:JSON[_0x3a507d(0x52f)](_0x401fce,null,0x2))),null;}}async[a0_0x4a47c0(0x466)](_0x432cbb,_0x593ea9,_0x310a30){const _0x36dc23=a0_0x4a47c0;this[_0x36dc23(0x664)]['verbose'](this['instanceName']+'\x20('+this[_0x36dc23(0x21b)][_0x36dc23(0x228)]+'):\x20Criando\x20nova\x20conversa[createNewConversation]');try{let _0x292149=require(_0x36dc23(0x63b))[_0x36dc23(0x26b)],_0x44e356=Date['now'](),_0x2427dd=_0x36dc23(0x299),_0x7aebac=_0x593ea9[_0x36dc23(0x655)]?null:_0x310a30,_0x41776e=_0x593ea9[_0x36dc23(0x655)]?_0x310a30:null,_0xd1a071=_0x593ea9[_0x36dc23(0x1d0)],_0x30b80d=this['AutomateSystem'][_0x36dc23(0x5f1)][_0x36dc23(0x2ba)](_0x10120f=>_0x10120f[_0x36dc23(0x443)]===_0x432cbb[_0x36dc23(0x443)]?.[_0x36dc23(0x13c)]()),_0x579703=_0x30b80d?.['minutesToClose']??_0x432cbb[_0x36dc23(0x2a9)]??0x0,_0x5baf85=_0x30b80d?.['readMessages']??_0x432cbb['readMessages']??!0x1;await this[_0x36dc23(0x681)](_0xd1a071);let _0x1db80a={'flowId':_0x432cbb['_id'],..._0x432cbb,'chatLog':null},_0x19ae3a=await this[_0x36dc23(0xef)](_0x1db80a[_0x36dc23(0x313)]),_0x2ff4b7=await this[_0x36dc23(0x51e)](_0xd1a071),_0x544195={..._0x19ae3a,..._0x2ff4b7,'_remoteJid':_0xd1a071},_0x4d047a={'lastReceivedMessage':_0x7aebac,'lastSendMessage':_0x41776e,'lastBlockId':_0x2427dd,'lastCondition':!0x0,'realVariables':_0x544195};_0x1db80a[_0x36dc23(0x743)]=_0x4d047a,delete _0x1db80a['_id'],_0x1db80a['_id']=new _0x292149(),_0x1db80a[_0x36dc23(0x6f4)]=_0x44e356,_0x1db80a[_0x36dc23(0x7ae)]=_0x36dc23(0x113),_0x1db80a[_0x36dc23(0x1d0)]=_0xd1a071,_0x1db80a[_0x36dc23(0x2a9)]=_0x579703,_0x1db80a['readMessages']=_0x5baf85;let _0x1b7bfe=await this[_0x36dc23(0x782)][_0x36dc23(0x7ef)]['updateOne'](_0x1db80a['_id'],_0x1db80a,this['instance'][_0x36dc23(0x228)]);return this[_0x36dc23(0x664)][_0x36dc23(0x7bf)](this['instanceName']+'\x20('+this[_0x36dc23(0x21b)]['wuid']+_0x36dc23(0x6eb)),_0x1b7bfe?_0x1db80a:null;}catch(_0x5a7ba1){return this[_0x36dc23(0x664)][_0x36dc23(0x5f8)](this[_0x36dc23(0x5b1)]+'\x20('+this[_0x36dc23(0x21b)][_0x36dc23(0x228)]+_0x36dc23(0x611)+(_0x5a7ba1 instanceof Error?_0x5a7ba1[_0x36dc23(0xab)]:JSON['stringify'](_0x5a7ba1,null,0x2))),_0x5a7ba1;}}async[a0_0x4a47c0(0x16d)](_0x31227f,_0x3f627a){const _0xd0fef4=a0_0x4a47c0;let _0x496bfa=_0x31227f[_0xd0fef4(0x1d0)];_0x3f627a[_0xd0fef4(0x168)]['remoteJid']&&_0x3f627a['uazapi']['remoteJid'][_0xd0fef4(0x3a3)]()!==''&&(_0x496bfa=_0x3f627a[_0xd0fef4(0x168)][_0xd0fef4(0x1d0)][_0xd0fef4(0x3a3)]()),this[_0xd0fef4(0x664)][_0xd0fef4(0x7bf)](this[_0xd0fef4(0x5b1)]+'\x20('+this['instance'][_0xd0fef4(0x228)]+'):\x20Enviando\x20texto');let _0x475019={'number':_0x496bfa,'options':{'delay':_0x3f627a[_0xd0fef4(0x168)][_0xd0fef4(0x274)],'linkPreview':_0x3f627a[_0xd0fef4(0x168)][_0xd0fef4(0x5c9)]},'textMessage':{'text':_0x3f627a['uazapi']['text']}};try{let _0x240642=await this[_0xd0fef4(0x644)](_0x475019);if(_0x240642){let _0x3bbb9c={'_id':_0x240642['key']['id'],'_fromMe':_0x240642[_0xd0fef4(0x56d)][_0xd0fef4(0x655)],'_remoteJid':_0x240642['key']['remoteJid']},_0xf4173a=(0x0,w[_0xd0fef4(0x354)])(_0x240642['message']),_0x974f71=(0x0,w[_0xd0fef4(0x407)])(_0xf4173a);_0x31227f[_0xd0fef4(0x743)][_0xd0fef4(0x68a)]=_0x3f627a[_0xd0fef4(0x443)][_0xd0fef4(0x13c)]();let {message_normalized:_0x2c7f08}=this[_0xd0fef4(0x1d1)](_0xf4173a,_0x974f71,null);_0x31227f[_0xd0fef4(0x743)][_0xd0fef4(0x3f3)]=await _0x2c7f08;let _0x335419={'messageId':_0x240642[_0xd0fef4(0x56d)]['id']},_0x357d3b=_0x31227f[_0xd0fef4(0x743)][_0xd0fef4(0x1cc)];Object['assign'](_0x357d3b,_0x3bbb9c),_0x31227f[_0xd0fef4(0x743)]['realVariables']=_0x357d3b,this[_0xd0fef4(0x42d)](_0x31227f,_0x3f627a,_0x335419);}else{let _0x168277={'error':!0x0};this[_0xd0fef4(0x42d)](_0x31227f,_0x3f627a,_0x168277),this['logger'][_0xd0fef4(0x5f8)](this[_0xd0fef4(0x5b1)]+'\x20('+this[_0xd0fef4(0x21b)][_0xd0fef4(0x228)]+_0xd0fef4(0x4dc));}}catch(_0x484e05){let _0x36250b={'error':!0x0,'errorLog':_0x484e05[_0xd0fef4(0x13c)]()};this[_0xd0fef4(0x42d)](_0x31227f,_0x3f627a,_0x36250b),this[_0xd0fef4(0x664)]['error'](this[_0xd0fef4(0x5b1)]+'\x20('+this[_0xd0fef4(0x21b)][_0xd0fef4(0x228)]+_0xd0fef4(0x384)+(_0x484e05 instanceof Error?_0x484e05[_0xd0fef4(0xab)]:JSON['stringify'](_0x484e05,null,0x2)));}}async['uazapiSendMedia'](_0xb6afb3,_0x554d6e){const _0x28d4bd=a0_0x4a47c0;let _0x209e68=_0xb6afb3[_0x28d4bd(0x1d0)];_0x554d6e[_0x28d4bd(0x168)][_0x28d4bd(0x1d0)]&&_0x554d6e[_0x28d4bd(0x168)][_0x28d4bd(0x1d0)][_0x28d4bd(0x3a3)]()!==''&&(_0x209e68=_0x554d6e['uazapi']['remoteJid'][_0x28d4bd(0x3a3)]()),this[_0x28d4bd(0x664)][_0x28d4bd(0x7bf)](this[_0x28d4bd(0x5b1)]+'\x20('+this['instance'][_0x28d4bd(0x228)]+_0x28d4bd(0x3f6));let _0x36cdd1={'number':_0x209e68,'options':{'delay':_0x554d6e[_0x28d4bd(0x168)][_0x28d4bd(0x274)],'linkPreview':_0x554d6e[_0x28d4bd(0x168)][_0x28d4bd(0x5c9)]},'mediaMessage':{'mediatype':_0x554d6e['uazapi'][_0x28d4bd(0x400)],'caption':_0x554d6e['uazapi'][_0x28d4bd(0x6a3)],'media':_0x554d6e[_0x28d4bd(0x168)][_0x28d4bd(0x148)],'fileName':_0x554d6e[_0x28d4bd(0x168)][_0x28d4bd(0x5e6)]}};try{let _0x5e37f0=await this['mediaMessage'](_0x36cdd1);if(_0x5e37f0){let _0x2781bb={'_id':_0x5e37f0['key']['id'],'_fromMe':_0x5e37f0[_0x28d4bd(0x56d)][_0x28d4bd(0x655)],'_remoteJid':_0x5e37f0['key'][_0x28d4bd(0x1d0)]},_0x54baa2=(0x0,w[_0x28d4bd(0x354)])(_0x5e37f0[_0x28d4bd(0xab)]),_0xd8de30=(0x0,w[_0x28d4bd(0x407)])(_0x54baa2);_0xb6afb3[_0x28d4bd(0x743)][_0x28d4bd(0x68a)]=_0x554d6e[_0x28d4bd(0x443)]['toString']();let {message_normalized:_0x95aeee}=this[_0x28d4bd(0x1d1)](_0x54baa2,_0xd8de30,null);_0xb6afb3[_0x28d4bd(0x743)][_0x28d4bd(0x3f3)]=await _0x95aeee;let _0x4948b3={'messageId':_0x5e37f0[_0x28d4bd(0x56d)]['id']},_0x51b319=_0xb6afb3['chatLog'][_0x28d4bd(0x1cc)];Object[_0x28d4bd(0x337)](_0x51b319,_0x2781bb),_0xb6afb3[_0x28d4bd(0x743)][_0x28d4bd(0x1cc)]=_0x51b319,this[_0x28d4bd(0x42d)](_0xb6afb3,_0x554d6e,_0x4948b3);}else{let _0x1a2326={'error':!0x0};this[_0x28d4bd(0x42d)](_0xb6afb3,_0x554d6e,_0x1a2326),this[_0x28d4bd(0x664)]['error'](this['instanceName']+'\x20('+this['instance'][_0x28d4bd(0x228)]+_0x28d4bd(0x49c));}}catch(_0x34ed0e){let _0x28a0cb={'error':!0x0,'errorLog':_0x34ed0e[_0x28d4bd(0x13c)]()};this[_0x28d4bd(0x42d)](_0xb6afb3,_0x554d6e,_0x28a0cb),this['logger']['error'](this[_0x28d4bd(0x5b1)]+'\x20('+this[_0x28d4bd(0x21b)]['wuid']+_0x28d4bd(0x212)+(_0x34ed0e instanceof Error?_0x34ed0e[_0x28d4bd(0xab)]:JSON['stringify'](_0x34ed0e,null,0x2)));}}async[a0_0x4a47c0(0x17d)](_0x46bb14,_0x221016){const _0x43865e=a0_0x4a47c0;let _0xce0550=_0x46bb14[_0x43865e(0x1d0)];_0x221016[_0x43865e(0x168)][_0x43865e(0x1d0)]&&_0x221016[_0x43865e(0x168)][_0x43865e(0x1d0)]['trim']()!==''&&(_0xce0550=_0x221016[_0x43865e(0x168)][_0x43865e(0x1d0)][_0x43865e(0x3a3)]()),this[_0x43865e(0x664)][_0x43865e(0x7bf)](this['instanceName']+'\x20('+this[_0x43865e(0x21b)][_0x43865e(0x228)]+_0x43865e(0x136));let _0x4ccfcf={'number':_0xce0550,'options':{'delay':_0x221016[_0x43865e(0x168)]['delay']},'locationMessage':{'name':_0x221016['uazapi'][_0x43865e(0x25b)],'address':_0x221016[_0x43865e(0x168)][_0x43865e(0x227)],'latitude':_0x221016['uazapi']['latitude'],'longitude':_0x221016[_0x43865e(0x168)][_0x43865e(0x48d)]}};try{let _0x3eaa43=await this[_0x43865e(0x5ed)](_0x4ccfcf);if(_0x3eaa43){let _0x4aceda={'_id':_0x3eaa43[_0x43865e(0x56d)]['id'],'_fromMe':_0x3eaa43[_0x43865e(0x56d)]['fromMe'],'_remoteJid':_0x3eaa43[_0x43865e(0x56d)][_0x43865e(0x1d0)]},_0x35f14e=(0x0,w[_0x43865e(0x354)])(_0x3eaa43[_0x43865e(0xab)]),_0x2c1775=(0x0,w[_0x43865e(0x407)])(_0x35f14e);_0x46bb14[_0x43865e(0x743)][_0x43865e(0x68a)]=_0x221016[_0x43865e(0x443)][_0x43865e(0x13c)]();let {message_normalized:_0x128dc0}=this[_0x43865e(0x1d1)](_0x35f14e,_0x2c1775,null);_0x46bb14[_0x43865e(0x743)][_0x43865e(0x3f3)]=await _0x128dc0;let _0x2d70e0={'messageId':_0x3eaa43['key']['id']},_0x151e6b=_0x46bb14[_0x43865e(0x743)][_0x43865e(0x1cc)];Object[_0x43865e(0x337)](_0x151e6b,_0x4aceda),_0x46bb14[_0x43865e(0x743)][_0x43865e(0x1cc)]=_0x151e6b,this[_0x43865e(0x42d)](_0x46bb14,_0x221016,_0x2d70e0);}else{let _0x310fa4={'error':!0x0};this[_0x43865e(0x42d)](_0x46bb14,_0x221016,_0x310fa4),this['logger'][_0x43865e(0x5f8)](this[_0x43865e(0x5b1)]+'\x20('+this[_0x43865e(0x21b)]['wuid']+_0x43865e(0x4df));}}catch(_0x50215c){let _0xfab268={'error':!0x0,'errorLog':_0x50215c['toString']()};this[_0x43865e(0x42d)](_0x46bb14,_0x221016,_0xfab268),this[_0x43865e(0x664)][_0x43865e(0x5f8)](this[_0x43865e(0x5b1)]+'\x20('+this[_0x43865e(0x21b)][_0x43865e(0x228)]+_0x43865e(0x1a6)+(_0x50215c instanceof Error?_0x50215c[_0x43865e(0xab)]:JSON[_0x43865e(0x52f)](_0x50215c,null,0x2)));}}async[a0_0x4a47c0(0x3bd)](_0x305224,_0x3c4d69){const _0x40bc46=a0_0x4a47c0;let _0x30eb5b=_0x305224[_0x40bc46(0x1d0)];_0x3c4d69[_0x40bc46(0x168)][_0x40bc46(0x1d0)]&&_0x3c4d69[_0x40bc46(0x168)][_0x40bc46(0x1d0)][_0x40bc46(0x3a3)]()!==''&&(_0x30eb5b=_0x3c4d69['uazapi'][_0x40bc46(0x1d0)][_0x40bc46(0x3a3)]()),this['logger'][_0x40bc46(0x7bf)](this[_0x40bc46(0x5b1)]+'\x20('+this[_0x40bc46(0x21b)]['wuid']+_0x40bc46(0x371));let _0x24d443={'number':_0x30eb5b,'options':{'delay':_0x3c4d69['uazapi'][_0x40bc46(0x274)]},'audioMessage':{'audio':_0x3c4d69[_0x40bc46(0x168)][_0x40bc46(0x217)]}};try{let _0xd425b3=await this[_0x40bc46(0x149)](_0x24d443);if(_0xd425b3){let _0x23a227={'_id':_0xd425b3[_0x40bc46(0x56d)]['id'],'_fromMe':_0xd425b3[_0x40bc46(0x56d)]['fromMe'],'_remoteJid':_0xd425b3[_0x40bc46(0x56d)][_0x40bc46(0x1d0)]},_0x2d9540=(0x0,w[_0x40bc46(0x354)])(_0xd425b3[_0x40bc46(0xab)]),_0x1202d9=(0x0,w[_0x40bc46(0x407)])(_0x2d9540);_0x305224[_0x40bc46(0x743)][_0x40bc46(0x68a)]=_0x3c4d69['_id'][_0x40bc46(0x13c)]();let {message_normalized:_0x544f97}=this[_0x40bc46(0x1d1)](_0x2d9540,_0x1202d9,null);_0x305224['chatLog'][_0x40bc46(0x3f3)]=await _0x544f97;let _0x1097e3={'messageId':_0xd425b3['key']['id']},_0xdad244=_0x305224[_0x40bc46(0x743)][_0x40bc46(0x1cc)];Object[_0x40bc46(0x337)](_0xdad244,_0x23a227),_0x305224[_0x40bc46(0x743)][_0x40bc46(0x1cc)]=_0xdad244,this[_0x40bc46(0x42d)](_0x305224,_0x3c4d69,_0x1097e3);}else{let _0x43ce0d={'error':!0x0};this[_0x40bc46(0x42d)](_0x305224,_0x3c4d69,_0x43ce0d),this[_0x40bc46(0x664)][_0x40bc46(0x5f8)](this[_0x40bc46(0x5b1)]+'\x20('+this[_0x40bc46(0x21b)]['wuid']+_0x40bc46(0x7d4));}}catch(_0x501bc7){let _0x1597a0={'error':!0x0,'errorLog':_0x501bc7[_0x40bc46(0x13c)]()};this[_0x40bc46(0x42d)](_0x305224,_0x3c4d69,_0x1597a0),this[_0x40bc46(0x664)][_0x40bc46(0x5f8)](this[_0x40bc46(0x5b1)]+'\x20('+this[_0x40bc46(0x21b)][_0x40bc46(0x228)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20'+(_0x501bc7 instanceof Error?_0x501bc7[_0x40bc46(0xab)]:JSON[_0x40bc46(0x52f)](_0x501bc7,null,0x2)));}}async['uazapiSendContact'](_0x1d4215,_0x374de0){const _0x42a13b=a0_0x4a47c0;let _0x23a92a=_0x1d4215[_0x42a13b(0x1d0)];_0x374de0[_0x42a13b(0x168)]['remoteJid']&&_0x374de0[_0x42a13b(0x168)]['remoteJid']['trim']()!==''&&(_0x23a92a=_0x374de0[_0x42a13b(0x168)][_0x42a13b(0x1d0)][_0x42a13b(0x3a3)]()),this[_0x42a13b(0x664)][_0x42a13b(0x7bf)](this[_0x42a13b(0x5b1)]+'\x20('+this[_0x42a13b(0x21b)]['wuid']+_0x42a13b(0x287));let _0x26e14f={'number':_0x23a92a,'options':{'delay':_0x374de0[_0x42a13b(0x168)][_0x42a13b(0x274)]},'contactMessage':[{'fullName':_0x374de0[_0x42a13b(0x168)][_0x42a13b(0x132)],'phoneNumber':_0x374de0[_0x42a13b(0x168)][_0x42a13b(0x6c6)]}]};try{let _0x48c62a=await this['contactMessage'](_0x26e14f);if(_0x48c62a){let _0x5e6989={'_id':_0x48c62a['key']['id'],'_fromMe':_0x48c62a[_0x42a13b(0x56d)][_0x42a13b(0x655)],'_remoteJid':_0x48c62a['key'][_0x42a13b(0x1d0)]},_0x45e87e=(0x0,w['normalizeMessageContent'])(_0x48c62a['message']),_0x1a6bd5=(0x0,w['getContentType'])(_0x45e87e);_0x1d4215['chatLog'][_0x42a13b(0x68a)]=_0x374de0[_0x42a13b(0x443)][_0x42a13b(0x13c)]();let {message_normalized:_0x3c365c}=this[_0x42a13b(0x1d1)](_0x45e87e,_0x1a6bd5,null);_0x1d4215[_0x42a13b(0x743)][_0x42a13b(0x3f3)]=await _0x3c365c;let _0x452993={'messageId':_0x48c62a[_0x42a13b(0x56d)]['id']},_0x113003=_0x1d4215['chatLog'][_0x42a13b(0x1cc)];Object['assign'](_0x113003,_0x5e6989),_0x1d4215[_0x42a13b(0x743)]['realVariables']=_0x113003,this[_0x42a13b(0x42d)](_0x1d4215,_0x374de0,_0x452993);}else{let _0x31bfdc={'error':!0x0};this[_0x42a13b(0x42d)](_0x1d4215,_0x374de0,_0x31bfdc),this['logger']['error'](this['instanceName']+'\x20('+this[_0x42a13b(0x21b)][_0x42a13b(0x228)]+_0x42a13b(0x308));}}catch(_0xc82b47){let _0x5ac453={'error':!0x0,'errorLog':_0xc82b47[_0x42a13b(0x13c)]()};this[_0x42a13b(0x42d)](_0x1d4215,_0x374de0,_0x5ac453),this[_0x42a13b(0x664)]['error'](this[_0x42a13b(0x5b1)]+'\x20('+this[_0x42a13b(0x21b)][_0x42a13b(0x228)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20'+(_0xc82b47 instanceof Error?_0xc82b47['message']:JSON[_0x42a13b(0x52f)](_0xc82b47,null,0x2)));}}[a0_0x4a47c0(0x4b9)](_0x4378c6,_0x519c3e){const _0x25ff0e=a0_0x4a47c0;for(let _0x424977 of _0x4378c6)_0x424977[_0x25ff0e(0x404)]&&(_0x424977['option']=this[_0x25ff0e(0x764)](_0x424977[_0x25ff0e(0x404)],_0x519c3e)),_0x424977['optionDescription']&&(_0x424977[_0x25ff0e(0x572)]=this['replaceVariables'](_0x424977[_0x25ff0e(0x572)],_0x519c3e));}async[a0_0x4a47c0(0x1dc)](_0x5d83b6,_0x411791){const _0x1e863d=a0_0x4a47c0;let _0x43610f=_0x5d83b6[_0x1e863d(0x1d0)];_0x411791['uazapi'][_0x1e863d(0x1d0)]&&_0x411791[_0x1e863d(0x168)][_0x1e863d(0x1d0)][_0x1e863d(0x3a3)]()!==''&&(_0x43610f=_0x411791[_0x1e863d(0x168)][_0x1e863d(0x1d0)][_0x1e863d(0x3a3)]()),this['logger']['verbose'](this[_0x1e863d(0x5b1)]+'\x20('+this[_0x1e863d(0x21b)][_0x1e863d(0x228)]+'):\x20Enviando\x20enquete');let _0x34b73c=_0x5d83b6[_0x1e863d(0x40e)]['filter'](_0x348eb5=>_0x348eb5['blockId']===_0x411791[_0x1e863d(0x443)])[_0x1e863d(0x6f0)]((_0x46e93b,_0x4f2eec)=>_0x46e93b[_0x1e863d(0x28e)]-_0x4f2eec[_0x1e863d(0x28e)]);this[_0x1e863d(0x4b9)](_0x34b73c,_0x5d83b6[_0x1e863d(0x743)][_0x1e863d(0x1cc)]);let _0x43b747=_0x34b73c[_0x1e863d(0x4b0)](_0x7bcaf4=>_0x7bcaf4[_0x1e863d(0x404)]),_0x201946={'number':_0x43610f,'menuMessage':{'type':_0x411791[_0x1e863d(0x168)][_0x1e863d(0x66c)]||_0x1e863d(0x67e),'text':_0x411791[_0x1e863d(0x168)]['text']||_0x411791['uazapi']['name'],'footerText':_0x411791[_0x1e863d(0x168)][_0x1e863d(0x348)],'buttonText':_0x411791[_0x1e863d(0x168)][_0x1e863d(0x6b1)],'selectableCount':0x1,'choices':_0x43b747},'options':{'delay':_0x411791[_0x1e863d(0x168)][_0x1e863d(0x274)]}};try{let _0x364041=await this['menuMessage'](_0x201946);if(_0x364041){let _0xc188fa={'_id':_0x364041[_0x1e863d(0x56d)]['id'],'_fromMe':_0x364041[_0x1e863d(0x56d)]['fromMe'],'_remoteJid':_0x364041['key'][_0x1e863d(0x1d0)]};_0x411791[_0x1e863d(0x168)][_0x1e863d(0x2d5)]===!0x0&&(_0x5d83b6[_0x1e863d(0x7ae)]=_0x1e863d(0x4d7),this[_0x1e863d(0x664)][_0x1e863d(0x7bf)](this['instanceName']+'\x20('+this[_0x1e863d(0x21b)][_0x1e863d(0x228)]+'):\x20conversation.status:\x20'+_0x5d83b6[_0x1e863d(0x7ae)])),this[_0x1e863d(0x664)]['verbose'](this[_0x1e863d(0x5b1)]+'\x20('+this['instance'][_0x1e863d(0x228)]+_0x1e863d(0x167)+(_0x411791[_0x1e863d(0x168)][_0x1e863d(0x25b)]||_0x411791[_0x1e863d(0x168)]['text'])),_0x5d83b6['waitingMenu_id']=_0x364041[_0x1e863d(0x56d)]['id'],_0x5d83b6[_0x1e863d(0x50f)]=_0x411791[_0x1e863d(0x168)][_0x1e863d(0x25b)]||_0x411791[_0x1e863d(0x168)]['text'],_0x5d83b6[_0x1e863d(0x15c)]=_0x34b73c,_0x411791['uazapi'][_0x1e863d(0x600)]&&(_0x5d83b6['waitingMenu_ExpiredMessage']=_0x411791[_0x1e863d(0x168)][_0x1e863d(0x600)]),this[_0x1e863d(0x664)][_0x1e863d(0x7bf)](this['instanceName']+'\x20('+this['instance'][_0x1e863d(0x228)]+_0x1e863d(0x6fb)+_0x5d83b6[_0x1e863d(0x50f)]);let _0x549709=(0x0,w[_0x1e863d(0x354)])(_0x364041['message']),_0x4a504c=(0x0,w[_0x1e863d(0x407)])(_0x549709);_0x5d83b6['chatLog'][_0x1e863d(0x68a)]=_0x411791[_0x1e863d(0x443)][_0x1e863d(0x13c)]();let {message_normalized:_0x29ed00}=this[_0x1e863d(0x1d1)](_0x549709,_0x4a504c,null);_0x5d83b6[_0x1e863d(0x743)][_0x1e863d(0x3f3)]=await _0x29ed00;let _0x155e58={'messageId':_0x364041[_0x1e863d(0x56d)]['id']},_0x22f6b8=_0x5d83b6['chatLog'][_0x1e863d(0x1cc)];Object[_0x1e863d(0x337)](_0x22f6b8,_0xc188fa),_0x5d83b6[_0x1e863d(0x743)][_0x1e863d(0x1cc)]=_0x22f6b8,this['updateConversation'](_0x5d83b6,_0x411791,_0x155e58);}else{let _0x4f1078={'error':!0x0};this[_0x1e863d(0x42d)](_0x5d83b6,_0x411791,_0x4f1078),this[_0x1e863d(0x664)][_0x1e863d(0x5f8)](this[_0x1e863d(0x5b1)]+'\x20('+this[_0x1e863d(0x21b)]['wuid']+_0x1e863d(0xd9));}}catch(_0x5b2bd2){let _0x321dc3={'error':!0x0,'errorLog':_0x5b2bd2 instanceof Error?_0x5b2bd2[_0x1e863d(0xab)]:JSON[_0x1e863d(0x52f)](_0x5b2bd2,null,0x2)};this['updateConversation'](_0x5d83b6,_0x411791,_0x321dc3),this[_0x1e863d(0x664)][_0x1e863d(0x5f8)](this[_0x1e863d(0x5b1)]+'\x20('+this['instance']['wuid']+_0x1e863d(0x702)+(_0x5b2bd2 instanceof Error?_0x5b2bd2['message']:JSON[_0x1e863d(0x52f)](_0x5b2bd2,null,0x2)));}}async[a0_0x4a47c0(0x4c0)](_0x13a9d6,_0x53de40){const _0x1123a3=a0_0x4a47c0;this['logger'][_0x1123a3(0x7bf)](this['instanceName']+'\x20('+this[_0x1123a3(0x21b)][_0x1123a3(0x228)]+'):\x20Deletando\x20mensagem');let _0x387a24=_0x13a9d6[_0x1123a3(0x743)][_0x1123a3(0x24c)][_0x1123a3(0x2ba)](_0x3e2377=>_0x3e2377['blockId'][_0x1123a3(0x13c)]()===_0x53de40[_0x1123a3(0x168)][_0x1123a3(0x3d6)]['toString']()),_0x5a755d={'id':_0x387a24[_0x1123a3(0x777)],'remoteJid':_0x387a24[_0x1123a3(0x1d0)],'fromMe':_0x387a24['fromMe']};try{let _0x4ce0c5=await this[_0x1123a3(0x5a1)](_0x5a755d);if(_0x4ce0c5){let _0x155c56=(0x0,w[_0x1123a3(0x354)])(_0x4ce0c5['message']),_0x5d0bc2=(0x0,w[_0x1123a3(0x407)])(_0x155c56);_0x13a9d6[_0x1123a3(0x743)]['lastBlockId']=_0x53de40['_id'][_0x1123a3(0x13c)]();let {message_normalized:_0x496b77}=this[_0x1123a3(0x1d1)](_0x155c56,_0x5d0bc2,null);_0x13a9d6[_0x1123a3(0x743)]['lastSendMessage']=await _0x496b77;let _0x125db4={};this['updateConversation'](_0x13a9d6,_0x53de40,_0x125db4);}else{let _0x4e189c={'error':!0x0};this[_0x1123a3(0x42d)](_0x13a9d6,_0x53de40,_0x4e189c),this[_0x1123a3(0x664)][_0x1123a3(0x5f8)](this[_0x1123a3(0x5b1)]+'\x20('+this[_0x1123a3(0x21b)][_0x1123a3(0x228)]+_0x1123a3(0x4d2));}}catch(_0x49ca46){let _0x3523c={'error':!0x0,'errorLog':_0x49ca46 instanceof Error?_0x49ca46[_0x1123a3(0xab)]:JSON[_0x1123a3(0x52f)](_0x49ca46,null,0x2)};this[_0x1123a3(0x42d)](_0x13a9d6,_0x53de40,_0x3523c),this[_0x1123a3(0x664)][_0x1123a3(0x5f8)](this[_0x1123a3(0x5b1)]+'\x20('+this[_0x1123a3(0x21b)][_0x1123a3(0x228)]+'):\x20Falha\x20ao\x20deletar\x20mensagem:\x20'+(_0x49ca46 instanceof Error?_0x49ca46[_0x1123a3(0xab)]:JSON[_0x1123a3(0x52f)](_0x49ca46,null,0x2)));}}async[a0_0x4a47c0(0x4a0)](_0x37669e,_0xae9a5a){const _0x10514e=a0_0x4a47c0;if(_0x37669e[_0x10514e(0x25b)]||(_0x37669e['name']=(0x0,X['v4'])()),_0xae9a5a!==Ti&&_0x37669e?.[_0x10514e(0x457)])throw new m(_0x10514e(0x264));if(_0x10514e(0x443)in _0x37669e&&'owner'in _0x37669e)return this[_0x10514e(0x3f4)](_0x37669e['owner'],_0x37669e[_0x10514e(0x443)]);this['logger'][_0x10514e(0x7bf)](this[_0x10514e(0x5b1)]+'\x20('+this[_0x10514e(0x21b)][_0x10514e(0x228)]+_0x10514e(0x577));let _0x3c5e65=this[_0x10514e(0x682)](_0x37669e[_0x10514e(0x25b)]),_0x2af8c5=new fe[(_0x10514e(0x75a))][(_0x10514e(0x26b))](),_0x4f7b52={'_id':_0x2af8c5,'default':!0x0,'title':_0x10514e(0x1c1),'x':0x0,'y':0x0},_0x51a9bd={'_id':new fe[(_0x10514e(0x75a))][(_0x10514e(0x26b))](),'order':0x1,'groupId':_0x2af8c5[_0x10514e(0x13c)](),'type':_0x10514e(0x299)},_0x23e75e=this[_0x10514e(0x21b)][_0x10514e(0x228)],_0x24e84={'_id':(0x0,X['v4'])(),'owner':_0x23e75e,'name':_0x3c5e65,'whoCanEdit':[_0x23e75e],'whoCanUse':[_0x23e75e],'groups':[_0x4f7b52],'blocks':[_0x51a9bd],..._0x37669e};try{let _0x282e6e=await this[_0x10514e(0x782)][_0x10514e(0x4e4)][_0x10514e(0x2db)](_0x24e84);return await this[_0x10514e(0x201)](),_0x282e6e;}catch(_0x51aa1e){let _0x16bae2='Erro\x20ao\x20criar\x20fluxo',_0x3b09b3=_0x51aa1e instanceof Error?_0x51aa1e[_0x10514e(0xab)]:typeof _0x51aa1e==_0x10514e(0x2b9)?JSON[_0x10514e(0x52f)](_0x51aa1e):_0x51aa1e,_0x2e9f38=_0x16bae2+':\x20'+_0x3b09b3;throw this[_0x10514e(0x664)]['error'](this[_0x10514e(0x5b1)]+'\x20('+this[_0x10514e(0x21b)][_0x10514e(0x228)]+_0x10514e(0x46a)+_0x2e9f38),new m(_0x2e9f38);}}async[a0_0x4a47c0(0x3f4)](_0x5ed6ed,_0x5783fe){const _0x3ad790=a0_0x4a47c0;try{this[_0x3ad790(0x664)][_0x3ad790(0x7bf)](this[_0x3ad790(0x5b1)]+'\x20('+this[_0x3ad790(0x21b)][_0x3ad790(0x228)]+'):\x20Criando\x20fluxo\x20compartilhado...');let _0x445f65=await this['repository'][_0x3ad790(0x4e4)][_0x3ad790(0xb1)]({'where':{'_id':_0x5783fe,'owner':_0x5ed6ed}});if(!_0x445f65)throw new m(_0x3ad790(0x7b3));if(_0x445f65[_0x3ad790(0x12a)]===!0x1&&!_0x445f65[_0x3ad790(0x457)])throw new m(_0x3ad790(0x2f8));let _0xf3f034=new Set(_0x445f65[_0x3ad790(0x38a)]??[]);_0xf3f034[_0x3ad790(0x4b1)](this[_0x3ad790(0x21b)]['wuid']);let _0xdd64bf=await this['repository'][_0x3ad790(0x4e4)][_0x3ad790(0xc6)](_0x5783fe,{..._0x445f65,'whoCanUse':Array['from'](_0xf3f034)});return await this['synchronizeAndMapFlows'](),_0xdd64bf;}catch(_0x157b43){let _0x1f86a2=_0x3ad790(0x692),_0x557a23=_0x157b43 instanceof Error?_0x157b43['message']:typeof _0x157b43==_0x3ad790(0x2b9)?JSON[_0x3ad790(0x52f)](_0x157b43):_0x157b43,_0x2152ab=_0x1f86a2+':\x20'+_0x557a23;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x3ad790(0x21b)][_0x3ad790(0x228)]+'):\x20'+_0x2152ab),new m(_0x2152ab);}}[a0_0x4a47c0(0x682)](_0x19ae38){const _0x2a2a4f=a0_0x4a47c0;let _0x33735b=_0x19ae38,_0x4c36fa=0x1;for(;this[_0x2a2a4f(0x22b)]['flows'][_0x2a2a4f(0x34e)](_0x13a42d=>_0x13a42d[_0x2a2a4f(0x25b)]===_0x33735b);)_0x4c36fa++,_0x33735b=_0x19ae38+'\x20('+_0x4c36fa+')';return _0x33735b;}async[a0_0x4a47c0(0x665)](_0x324c67){const _0x2e4156=a0_0x4a47c0;try{if(this[_0x2e4156(0x664)][_0x2e4156(0x7bf)](this[_0x2e4156(0x5b1)]+'\x20('+this[_0x2e4156(0x21b)][_0x2e4156(0x228)]+_0x2e4156(0x584)+_0x324c67[_0x2e4156(0x443)]+_0x2e4156(0x794)+_0x324c67['global']),!this['AutomateSystem'][_0x2e4156(0x5f1)]['find'](_0x42b417=>_0x42b417[_0x2e4156(0x443)]===_0x324c67[_0x2e4156(0x443)]))throw this[_0x2e4156(0x664)][_0x2e4156(0x7bf)](this[_0x2e4156(0x5b1)]+'\x20('+this[_0x2e4156(0x21b)][_0x2e4156(0x228)]+_0x2e4156(0x2b0)+_0x324c67[_0x2e4156(0x443)]+_0x2e4156(0xd1)),new m(_0x2e4156(0x3cb));let _0x5c38a8=await this[_0x2e4156(0x782)][_0x2e4156(0x4e4)][_0x2e4156(0xb1)]({'where':{'_id':_0x324c67['_id']}});if(!_0x5c38a8)throw new m(_0x2e4156(0x36b));if(this['instance']['wuid']===_0x5c38a8['owner']){this[_0x2e4156(0x664)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x2e4156(0x228)]+'):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27'+_0x324c67[_0x2e4156(0x443)]+_0x2e4156(0x6d0));let _0xdced2a=await this['repository']['flow'][_0x2e4156(0x4a5)]({'where':{'_id':_0x324c67[_0x2e4156(0x443)]}});return await this[_0x2e4156(0x201)](),_0xdced2a;}return this[_0x2e4156(0x664)][_0x2e4156(0x7bf)](this[_0x2e4156(0x5b1)]+'\x20('+this[_0x2e4156(0x21b)][_0x2e4156(0x228)]+'):\x20Removendo\x20\x27'+this[_0x2e4156(0x21b)][_0x2e4156(0x228)]+_0x2e4156(0x2ea)+_0x324c67[_0x2e4156(0x443)]+_0x2e4156(0x5ce)),_0x5c38a8[_0x2e4156(0x38a)]=(_0x5c38a8[_0x2e4156(0x38a)]??[])[_0x2e4156(0x635)](_0x4ee28a=>_0x4ee28a!==this[_0x2e4156(0x21b)][_0x2e4156(0x228)]),_0x5c38a8[_0x2e4156(0x599)]=(_0x5c38a8['whoCanEdit']??[])[_0x2e4156(0x635)](_0x4df95c=>_0x4df95c!==this[_0x2e4156(0x21b)]['wuid']),_0x5c38a8[_0x2e4156(0x599)][_0x2e4156(0x415)]===0x0&&_0x5c38a8[_0x2e4156(0x38a)][_0x2e4156(0x415)]>0x0&&(_0x5c38a8[_0x2e4156(0x599)]['push'](_0x5c38a8[_0x2e4156(0x38a)][0x0]),this[_0x2e4156(0x664)]['verbose'](this['instanceName']+'\x20('+this[_0x2e4156(0x21b)][_0x2e4156(0x228)]+_0x2e4156(0x6f9)+_0x5c38a8[_0x2e4156(0x38a)][0x0]+_0x2e4156(0x7cb)+_0x324c67[_0x2e4156(0x443)]+'\x27...')),await this[_0x2e4156(0x782)][_0x2e4156(0x4e4)][_0x2e4156(0xc6)](_0x5c38a8[_0x2e4156(0x443)],_0x5c38a8),await this['synchronizeAndMapFlows'](),{'message':_0x2e4156(0x445)+_0x324c67[_0x2e4156(0x25b)]+_0x2e4156(0x122)};}catch(_0x3ebc41){return this[_0x2e4156(0x664)][_0x2e4156(0x5f8)](this[_0x2e4156(0x5b1)]+'\x20('+this['instance'][_0x2e4156(0x228)]+_0x2e4156(0x55f)+(_0x3ebc41 instanceof Error?_0x3ebc41[_0x2e4156(0xab)]:JSON[_0x2e4156(0x52f)](_0x3ebc41,null,0x2))),{'message':_0x2e4156(0x232)+(_0x3ebc41 instanceof Error?_0x3ebc41[_0x2e4156(0xab)]:JSON['stringify'](_0x3ebc41,null,0x2))};}}async[a0_0x4a47c0(0xd0)](_0x18993b){const _0x39d54f=a0_0x4a47c0;try{if(this[_0x39d54f(0x664)][_0x39d54f(0x363)](this[_0x39d54f(0x5b1)]+'\x20('+this[_0x39d54f(0x21b)]['wuid']+_0x39d54f(0x68f)+_0x18993b),!this['AutomateSystem']&&(await this[_0x39d54f(0x739)](),!this['AutomateSystem']))return null;let _0x32c5c1=await this[_0x39d54f(0x782)][_0x39d54f(0x4e4)][_0x39d54f(0xb1)]({'where':{'_id':_0x18993b}});if(!_0x32c5c1)throw new m(_0x39d54f(0x380)+_0x18993b+_0x39d54f(0xd5));if(!(_0x32c5c1[_0x39d54f(0x457)]||_0x32c5c1[_0x39d54f(0x38a)]?.[_0x39d54f(0x795)](this['instance'][_0x39d54f(0x228)])))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27'+name+'\x27');_0x32c5c1['globalShow']&&!_0x32c5c1[_0x39d54f(0x38a)]?.[_0x39d54f(0x795)](this[_0x39d54f(0x21b)][_0x39d54f(0x228)])&&(_0x32c5c1[_0x39d54f(0x38a)]=[..._0x32c5c1[_0x39d54f(0x38a)]??[],this[_0x39d54f(0x21b)][_0x39d54f(0x228)]],await this[_0x39d54f(0x782)][_0x39d54f(0x4e4)][_0x39d54f(0xc6)](_0x32c5c1[_0x39d54f(0x443)],_0x32c5c1),this['synchronizeAndMapFlows']());let _0x383f02=this[_0x39d54f(0x22b)]?.[_0x39d54f(0x2c5)]['map'](_0x2376bf=>_0x2376bf[_0x39d54f(0x25b)]),_0x25eb54=[_0x39d54f(0x3d0),_0x39d54f(0x18b),_0x39d54f(0x35d),'cpf',_0x39d54f(0x7ae),'notas',_0x39d54f(0x2ee),_0x39d54f(0x24f),'etiquetas',_0x39d54f(0x76f),_0x39d54f(0x7d2)];_0x32c5c1['variables']=_0x32c5c1[_0x39d54f(0x313)][_0x39d54f(0x635)](_0x2d72cd=>!(_0x2d72cd[_0x39d54f(0x1b3)]==='leadInfo'||_0x2d72cd[_0x39d54f(0xa5)])),_0x25eb54[_0x39d54f(0x9e)](_0xa43612=>{const _0x3a260a=_0x39d54f;_0x32c5c1[_0x3a260a(0x313)][_0x3a260a(0x723)]({'folder':_0x3a260a(0xa5),'name':_0xa43612,'value':'','doc':'','leadInfo':!0x0});}),_0x383f02[_0x39d54f(0x9e)](_0x22cd07=>{const _0x566098=_0x39d54f;let _0x18ab68=_0x32c5c1[_0x566098(0x313)][_0x566098(0x544)](_0x5bb851=>_0x5bb851['name']===_0x22cd07);_0x18ab68===-0x1?_0x32c5c1[_0x566098(0x313)][_0x566098(0x723)]({'folder':_0x566098(0xa5),'name':_0x22cd07,'value':'','doc':'','leadInfo':!0x0}):(_0x32c5c1[_0x566098(0x313)][_0x18ab68][_0x566098(0x1b3)]=_0x566098(0xa5),_0x32c5c1['variables'][_0x18ab68][_0x566098(0xa5)]=!0x0);}),_0x32c5c1[_0x39d54f(0xe2)]&&_0x32c5c1[_0x39d54f(0xe2)][_0x39d54f(0x415)]>0x0&&_0x32c5c1['blocks']['forEach'](_0x16b48f=>{const _0x264f29=_0x39d54f;_0x16b48f[_0x264f29(0x528)]&&_0x16b48f['next_groupId']&&_0x16b48f[_0x264f29(0x528)]===_0x16b48f['next_groupId']&&(_0x16b48f[_0x264f29(0x3eb)]=null);});let _0x3487ff=await this[_0x39d54f(0x782)][_0x39d54f(0x4e4)]['updateOne'](_0x32c5c1['_id'],_0x32c5c1);if(!_0x3487ff)throw new Error(_0x39d54f(0x63c));return _0x3487ff;}catch(_0x2f353a){let _0x406316=_0x39d54f(0x141),_0x34eb02=_0x2f353a instanceof Error?_0x2f353a[_0x39d54f(0xab)]:typeof _0x2f353a==_0x39d54f(0x2b9)?JSON[_0x39d54f(0x52f)](_0x2f353a):_0x2f353a,_0xa2f1a3=_0x406316+':\x20'+_0x34eb02;throw this[_0x39d54f(0x664)][_0x39d54f(0x5f8)](this[_0x39d54f(0x5b1)]+'\x20('+this[_0x39d54f(0x21b)]['wuid']+'):\x20'+_0xa2f1a3),new m(_0xa2f1a3);}}async[a0_0x4a47c0(0x242)](){const _0x3363a5=a0_0x4a47c0;try{this[_0x3363a5(0x664)]['verbose'](this[_0x3363a5(0x5b1)]+'\x20('+this['instance'][_0x3363a5(0x228)]+'):\x20Buscando\x20todos\x20os\x20fluxos...'),await this[_0x3363a5(0x201)]();let _0x131c4e=await this[_0x3363a5(0x782)][_0x3363a5(0x4e4)][_0x3363a5(0x3ee)]({'where':{'globalShow':!0x0}});return[...this['AutomateSystem'][_0x3363a5(0x5f1)],..._0x131c4e];}catch(_0x72d50c){return this[_0x3363a5(0x664)][_0x3363a5(0x5f8)](this[_0x3363a5(0x5b1)]+'\x20('+this[_0x3363a5(0x21b)][_0x3363a5(0x228)]+_0x3363a5(0x6e9)+(_0x72d50c instanceof Error?_0x72d50c[_0x3363a5(0xab)]:JSON[_0x3363a5(0x52f)](_0x72d50c,null,0x2))),{'message':'Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20'+(_0x72d50c instanceof Error?_0x72d50c[_0x3363a5(0xab)]:String(_0x72d50c))};}}async['editFlow'](_0x182b23,_0x14e563){const _0x55d62e=a0_0x4a47c0;try{this['logger'][_0x55d62e(0x7bf)](this[_0x55d62e(0x5b1)]+'\x20('+this[_0x55d62e(0x21b)][_0x55d62e(0x228)]+_0x55d62e(0x78a));let _0x5303ff=this[_0x55d62e(0x22b)][_0x55d62e(0x5f1)]['find'](_0x2878f7=>_0x2878f7[_0x55d62e(0x443)]===_0x182b23['_id']);if(!_0x5303ff)throw this[_0x55d62e(0x664)][_0x55d62e(0x7bf)](this[_0x55d62e(0x5b1)]+'\x20('+this['instance'][_0x55d62e(0x228)]+'):\x20Fluxo\x20\x27'+_0x182b23[_0x55d62e(0x443)]+_0x55d62e(0xd1)),new m(_0x55d62e(0x3cb));let _0x1c3c7c=await this[_0x55d62e(0x782)][_0x55d62e(0x4e4)][_0x55d62e(0xb1)]({'where':{'_id':_0x182b23['_id']}});if(!_0x1c3c7c||!_0x1c3c7c['whoCanUse']?.['includes'](this[_0x55d62e(0x21b)][_0x55d62e(0x228)]))throw this[_0x55d62e(0x664)][_0x55d62e(0x5f8)](this['instanceName']+'\x20('+this['instance'][_0x55d62e(0x228)]+_0x55d62e(0x73e)+_0x182b23[_0x55d62e(0x443)]+_0x55d62e(0x328)),new m(_0x55d62e(0x3e8)+_0x182b23[_0x55d62e(0x443)]+_0x55d62e(0x328));let _0x283813=this['AutomateSystem'][_0x55d62e(0x5f1)][_0x55d62e(0x544)](_0x5a2b12=>_0x5a2b12['_id']===_0x5303ff[_0x55d62e(0x443)]);if(_0x283813!==-0x1){let _0x5efa86=this[_0x55d62e(0x22b)][_0x55d62e(0x5f1)][_0x283813];if(_0x5efa86[_0x55d62e(0x25b)]=_0x182b23[_0x55d62e(0x25b)]??_0x5efa86[_0x55d62e(0x25b)],_0x5efa86[_0x55d62e(0x339)]=_0x182b23[_0x55d62e(0x339)]??_0x5efa86[_0x55d62e(0x339)],_0x5efa86['testingWith']=_0x182b23[_0x55d62e(0x5cc)]??_0x5efa86['testingWith'],_0x5efa86['startCommand']=_0x182b23[_0x55d62e(0x390)]??_0x5efa86['startCommand'],_0x5efa86[_0x55d62e(0x2a9)]=_0x182b23[_0x55d62e(0x2a9)]??_0x5efa86[_0x55d62e(0x2a9)],_0x5efa86[_0x55d62e(0x276)]=_0x182b23[_0x55d62e(0x276)]??_0x5efa86[_0x55d62e(0x276)],_0x182b23[_0x55d62e(0x339)]&&this[_0x55d62e(0x22b)][_0x55d62e(0x5f1)][_0x55d62e(0x9e)]((_0x38e8a4,_0x4647b5)=>{const _0x3627f1=_0x55d62e;_0x4647b5!==_0x283813&&(_0x38e8a4[_0x3627f1(0x339)]=!0x1);}),this[_0x55d62e(0x22b)]['flows'][_0x283813]=_0x5efa86,!await this[_0x55d62e(0x782)][_0x55d62e(0x2c8)][_0x55d62e(0x7c2)]({'flows':this[_0x55d62e(0x22b)][_0x55d62e(0x5f1)]},this['instance'][_0x55d62e(0x228)]))throw new m(_0x55d62e(0x158));}let _0x4a11aa=[_0x55d62e(0x6f5),_0x55d62e(0x7c9),_0x55d62e(0x6be),_0x55d62e(0xc4)];for(let _0x4a0135 of _0x4a11aa)delete _0x182b23[_0x4a0135];if(_0x1c3c7c[_0x55d62e(0x599)]?.[_0x55d62e(0x795)](this[_0x55d62e(0x21b)][_0x55d62e(0x228)])||(_0x182b23={'_id':_0x182b23[_0x55d62e(0x443)]}),_0x14e563!==Ti&&_0x182b23?.[_0x55d62e(0x457)]&&!_0x1c3c7c?.['globalShow'])throw new m('Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.');let _0x1c1c40=new Set(_0x182b23[_0x55d62e(0x599)]??_0x1c3c7c['whoCanEdit']);_0x1c1c40[_0x55d62e(0x4b1)](_0x1c3c7c[_0x55d62e(0x3ab)]);let _0x5658ae=new Set(_0x182b23[_0x55d62e(0x38a)]??_0x1c3c7c[_0x55d62e(0x38a)]??[]);_0x1c1c40['forEach'](_0x5267e5=>_0x5658ae['add'](_0x5267e5)),_0x5658ae[_0x55d62e(0x4b1)](_0x1c3c7c[_0x55d62e(0x3ab)]),this[_0x55d62e(0x664)]['verbose'](this[_0x55d62e(0x5b1)]+'\x20('+this['instance']['wuid']+'):\x20whoCanEdit\x20before\x20validation:\x20'+Array[_0x55d62e(0x179)](_0x1c1c40)),this['logger'][_0x55d62e(0x7bf)](this[_0x55d62e(0x5b1)]+'\x20('+this['instance'][_0x55d62e(0x228)]+_0x55d62e(0x590)+Array[_0x55d62e(0x179)](_0x5658ae));let _0x3fcd06=await this['getValidWhatsAppNumbers'](Array[_0x55d62e(0x179)](_0x5658ae)),_0x5c380e=Array['from'](_0x1c1c40)[_0x55d62e(0x635)](_0x1a9dae=>_0x3fcd06[_0x55d62e(0x795)](_0x1a9dae)),_0x2a97dc=Array[_0x55d62e(0x179)](_0x5658ae)[_0x55d62e(0x635)](_0x47e2d1=>_0x3fcd06['includes'](_0x47e2d1));this[_0x55d62e(0x664)][_0x55d62e(0x7bf)](this[_0x55d62e(0x5b1)]+'\x20('+this[_0x55d62e(0x21b)]['wuid']+'):\x20whoCanEdit\x20after\x20validation:\x20'+_0x5c380e),this[_0x55d62e(0x664)][_0x55d62e(0x7bf)](this[_0x55d62e(0x5b1)]+'\x20('+this[_0x55d62e(0x21b)][_0x55d62e(0x228)]+_0x55d62e(0x343)+_0x2a97dc);let _0x2cc831={..._0x1c3c7c,..._0x182b23,'whoCanEdit':_0x5c380e,'whoCanUse':_0x2a97dc},_0xd38993=await this[_0x55d62e(0x782)][_0x55d62e(0x4e4)][_0x55d62e(0xc6)](_0x1c3c7c['_id'],_0x2cc831);return await this[_0x55d62e(0x201)](),_0xd38993;}catch(_0x2f4a3a){let _0x481e08='Erro\x20ao\x20alterar\x20fluxo',_0x2919c9=_0x2f4a3a instanceof Error?_0x2f4a3a['message']:typeof _0x2f4a3a==_0x55d62e(0x2b9)?JSON['stringify'](_0x2f4a3a):_0x2f4a3a,_0x23493e=_0x481e08+':\x20'+_0x2919c9;throw this[_0x55d62e(0x664)][_0x55d62e(0x5f8)](this['instanceName']+'\x20('+this['instance'][_0x55d62e(0x228)]+'):\x20'+_0x23493e),new m(_0x23493e);}}async[a0_0x4a47c0(0x78d)](_0xcdfb30){const _0x506f0a=a0_0x4a47c0;let _0x1f9a19={'numbers':_0xcdfb30};return(await this[_0x506f0a(0x14c)](_0x1f9a19))[_0x506f0a(0x635)](_0x36bcc6=>_0x36bcc6[_0x506f0a(0x32b)])[_0x506f0a(0x4b0)](_0x37e54a=>_0x37e54a['jid'])[_0x506f0a(0x4b0)](_0x52324f=>this['extractPhoneNumber'](_0x52324f));}[a0_0x4a47c0(0x15d)](_0x18dce2){const _0x42b245=a0_0x4a47c0;let _0x47a382=_0x18dce2[_0x42b245(0x3b6)](/\d+/);return _0x47a382?_0x47a382[0x0]:'';}async[a0_0x4a47c0(0x2f9)](_0x7639b4){const _0x570db1=a0_0x4a47c0;try{if(this[_0x570db1(0x664)][_0x570db1(0x7bf)](this[_0x570db1(0x5b1)]+'\x20('+this[_0x570db1(0x21b)][_0x570db1(0x228)]+'):\x20Editando\x20bloco...'),!this['AutomateSystem'][_0x570db1(0x5f1)]['find'](_0x27ba8b=>_0x27ba8b[_0x570db1(0x443)]===_0x7639b4[_0x570db1(0x443)]))throw this[_0x570db1(0x664)][_0x570db1(0x7bf)](this[_0x570db1(0x5b1)]+'\x20('+this[_0x570db1(0x21b)][_0x570db1(0x228)]+_0x570db1(0x2b0)+_0x7639b4[_0x570db1(0x443)]+_0x570db1(0xd1)),new m(_0x570db1(0x3cb));let _0x2d453b=await this[_0x570db1(0x782)][_0x570db1(0x4e4)][_0x570db1(0xb1)]({'where':{'_id':_0x7639b4[_0x570db1(0x443)]}});if(!_0x2d453b||!_0x2d453b[_0x570db1(0x38a)]?.['includes'](this[_0x570db1(0x21b)][_0x570db1(0x228)]))throw this[_0x570db1(0x664)][_0x570db1(0x5f8)](this[_0x570db1(0x5b1)]+'\x20('+this[_0x570db1(0x21b)][_0x570db1(0x228)]+_0x570db1(0x73e)+_0x7639b4['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x570db1(0x3e8)+_0x7639b4['_id']+_0x570db1(0x328));if(!_0x2d453b[_0x570db1(0x599)]?.[_0x570db1(0x795)](this['instance'][_0x570db1(0x228)]))throw new m(_0x570db1(0x784));let {block:_0x201546}=_0x7639b4;_0x201546?.[_0x570db1(0x7c7)]?this['copyBlock'](_0x2d453b,_0x7639b4):_0x201546?.[_0x570db1(0x2d6)]?this[_0x570db1(0x7be)](_0x2d453b,_0x7639b4):_0x201546[_0x570db1(0x443)]?await this[_0x570db1(0x36a)](_0x2d453b,_0x7639b4):this[_0x570db1(0x772)](_0x2d453b,_0x7639b4);let _0x242207=await this[_0x570db1(0x782)]['flow'][_0x570db1(0xc6)](_0x2d453b[_0x570db1(0x443)],_0x2d453b);if(!_0x242207)throw new Error(_0x570db1(0x63c));return _0x242207;}catch(_0x53da46){this[_0x570db1(0x7d7)](_0x570db1(0x505)+_0x53da46[_0x570db1(0xab)]);}}async[a0_0x4a47c0(0x75d)](_0x23bf41,_0x20acb2){const _0x23847e=a0_0x4a47c0;let _0x2862b4=_0x20acb2[_0x23847e(0x54d)][_0x23847e(0x443)],_0x8f8544=_0x23bf41[_0x23847e(0xe2)][_0x23847e(0x2ba)](_0x5a4484=>_0x5a4484[_0x23847e(0x443)][_0x23847e(0x13c)]()===_0x2862b4);if(!_0x8f8544){this[_0x23847e(0x664)]['error'](this[_0x23847e(0x5b1)]+'\x20('+this[_0x23847e(0x21b)][_0x23847e(0x228)]+_0x23847e(0x6d7)+_0x2862b4+_0x23847e(0x3a4));return;}this[_0x23847e(0x664)]['verbose'](this[_0x23847e(0x5b1)]+'\x20('+this[_0x23847e(0x21b)][_0x23847e(0x228)]+'):\x20Bloco\x20original\x20para\x20cópia:\x20'+JSON['stringify'](_0x8f8544));let _0x281e00=JSON['parse'](JSON[_0x23847e(0x52f)](_0x8f8544));_0x281e00[_0x23847e(0x443)]=new fe['default'][(_0x23847e(0x75a))][(_0x23847e(0x26b))](),this[_0x23847e(0x664)][_0x23847e(0x7bf)](this[_0x23847e(0x5b1)]+'\x20('+this[_0x23847e(0x21b)][_0x23847e(0x228)]+'):\x20Bloco\x20copiado:\x20'+JSON[_0x23847e(0x52f)](_0x281e00)),_0x23bf41[_0x23847e(0xe2)][_0x23847e(0x723)](_0x281e00),this[_0x23847e(0x535)](_0x23bf41[_0x23847e(0xe2)],_0x281e00[_0x23847e(0x528)]);}[a0_0x4a47c0(0x7d7)](_0x2f24a4){const _0xf84f05=a0_0x4a47c0;throw this[_0xf84f05(0x664)]['error'](this[_0xf84f05(0x5b1)]+'\x20('+this['instance']['wuid']+_0xf84f05(0x46a)+_0x2f24a4),new m(_0x2f24a4);}[a0_0x4a47c0(0x7be)](_0x5ebc1b,_0x2ae3ee){const _0x361724=a0_0x4a47c0;let {block:_0x6628ab}=_0x2ae3ee;if(_0x6628ab[_0x361724(0x311)]==='start'){this[_0x361724(0x7d7)](_0x361724(0x3a7));return;}if(!_0x6628ab[_0x361724(0x443)]){this[_0x361724(0x7d7)]('blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco');return;}let _0x23ccb1=_0x5ebc1b[_0x361724(0xe2)]['find'](_0x197ec=>_0x197ec[_0x361724(0x443)][_0x361724(0x13c)]()===_0x2ae3ee[_0x361724(0x54d)][_0x361724(0x443)]['toString']());if(!_0x23ccb1){this['throwAndLogError'](_0x361724(0x4f5)+_0x6628ab[_0x361724(0x443)]+_0x361724(0x5be));return;}_0x5ebc1b['blocks']=_0x5ebc1b[_0x361724(0xe2)][_0x361724(0x635)](_0x2ac7c1=>_0x2ac7c1['_id'][_0x361724(0x13c)]()!==_0x2ae3ee[_0x361724(0x54d)][_0x361724(0x443)][_0x361724(0x13c)]()),_0x5ebc1b['conditions']=_0x5ebc1b[_0x361724(0x4bd)][_0x361724(0x635)](_0x1ac054=>_0x1ac054[_0x361724(0x3d6)]!==_0x6628ab[_0x361724(0x443)]['toString']()),_0x5ebc1b['varedits']=_0x5ebc1b[_0x361724(0x33b)][_0x361724(0x635)](_0x2cd278=>_0x2cd278[_0x361724(0x3d6)]!==_0x6628ab[_0x361724(0x443)][_0x361724(0x13c)]()),_0x5ebc1b[_0x361724(0x40e)]=_0x5ebc1b[_0x361724(0x40e)][_0x361724(0x635)](_0x75ec89=>_0x75ec89['blockId']!==_0x6628ab[_0x361724(0x443)][_0x361724(0x13c)]()),this[_0x361724(0x535)](_0x5ebc1b[_0x361724(0xe2)],_0x23ccb1[_0x361724(0x528)]);}async[a0_0x4a47c0(0x36a)](_0x116294,_0x3486a8){const _0xad1d76=a0_0x4a47c0;let _0x13d7f1=_0x116294[_0xad1d76(0xe2)]['findIndex'](_0x570f5f=>_0x570f5f['_id'][_0xad1d76(0x13c)]()===_0x3486a8[_0xad1d76(0x54d)][_0xad1d76(0x443)][_0xad1d76(0x13c)]());if(this[_0xad1d76(0x664)][_0xad1d76(0x7bf)](this[_0xad1d76(0x5b1)]+'\x20('+this['instance'][_0xad1d76(0x228)]+_0xad1d76(0x647)+_0x13d7f1),_0x13d7f1===-0x1){this[_0xad1d76(0x664)][_0xad1d76(0x7bf)]('Bloco\x20com\x20ID\x20'+_0x3486a8[_0xad1d76(0x54d)][_0xad1d76(0x443)]+_0xad1d76(0x615));return;}if(_0x116294[_0xad1d76(0xe2)][_0x13d7f1][_0xad1d76(0x311)]===_0xad1d76(0x299)){let _0x2bf65d=Object[_0xad1d76(0x77d)](_0x3486a8[_0xad1d76(0x54d)]);if(_0x2bf65d[_0xad1d76(0x415)]>0x2||_0x2bf65d[_0xad1d76(0x415)]===0x2&&!_0x2bf65d[_0xad1d76(0x795)](_0xad1d76(0x3eb))){this[_0xad1d76(0x7d7)](_0xad1d76(0x540));return;}}let _0x4aa566=_0x116294[_0xad1d76(0xe2)][_0x13d7f1][_0xad1d76(0x528)];for(let _0x219d3b in _0x3486a8['block'])_0x3486a8[_0xad1d76(0x54d)][_0xad1d76(0x4fa)](_0x219d3b)&&(_0x116294[_0xad1d76(0xe2)][_0x13d7f1][_0x219d3b]=_0x3486a8['block'][_0x219d3b]);if(this['logger']['verbose'](this[_0xad1d76(0x5b1)]+'\x20('+this[_0xad1d76(0x21b)][_0xad1d76(0x228)]+_0xad1d76(0x10d)+JSON[_0xad1d76(0x52f)](_0x116294['blocks'][_0x13d7f1])),_0x116294[_0xad1d76(0xe2)][_0x13d7f1][_0xad1d76(0x7ee)]&&_0xad1d76(0x161)in _0x116294['blocks'][_0x13d7f1][_0xad1d76(0x7ee)]){this[_0xad1d76(0x664)][_0xad1d76(0x7bf)](this[_0xad1d76(0x5b1)]+'\x20('+this[_0xad1d76(0x21b)][_0xad1d76(0x228)]+_0xad1d76(0x508));let _0x39c2e2=JSON[_0xad1d76(0x52f)](_0x116294['blocks'][_0x13d7f1][_0xad1d76(0x7ee)][_0xad1d76(0x161)],null,0x1);_0x39c2e2[_0xad1d76(0x415)]>0x2&&(_0x39c2e2=_0x39c2e2[_0xad1d76(0x11c)](0x1,_0x39c2e2['length']-0x1)[_0xad1d76(0x3a3)]()),_0x116294[_0xad1d76(0xe2)][_0x13d7f1][_0xad1d76(0x7ee)][_0xad1d76(0x4cc)]=_0x39c2e2;}if(_0x116294[_0xad1d76(0xe2)][_0x13d7f1][_0xad1d76(0x7ee)]&&_0xad1d76(0x200)in _0x116294[_0xad1d76(0xe2)][_0x13d7f1]['apirequest']&&!(_0xad1d76(0x6cc)in _0x116294[_0xad1d76(0xe2)][_0x13d7f1]['apirequest'])){this[_0xad1d76(0x664)][_0xad1d76(0x7bf)](this['instanceName']+'\x20('+this[_0xad1d76(0x21b)][_0xad1d76(0x228)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x116294['blocks'][_0x13d7f1][_0xad1d76(0x7ee)][_0xad1d76(0x1f3)]=!0x1;let _0x3cb414=JSON[_0xad1d76(0x52f)](_0x116294[_0xad1d76(0xe2)][_0x13d7f1][_0xad1d76(0x7ee)][_0xad1d76(0x200)],null,0x2);_0x116294[_0xad1d76(0xe2)][_0x13d7f1][_0xad1d76(0x7ee)][_0xad1d76(0x6cc)]=_0x3cb414;}if(_0x116294[_0xad1d76(0xe2)][_0x13d7f1][_0xad1d76(0x7ee)]&&_0xad1d76(0x6cc)in _0x116294[_0xad1d76(0xe2)][_0x13d7f1]['apirequest']){_0x116294['blocks'][_0x13d7f1][_0xad1d76(0x7ee)][_0xad1d76(0x1f3)]=!0x1;let _0x118a6a=_0x116294[_0xad1d76(0xe2)][_0x13d7f1]['apirequest'][_0xad1d76(0x6cc)],_0x4abf09=this[_0xad1d76(0x4c3)](_0x118a6a);_0x116294[_0xad1d76(0xe2)][_0x13d7f1]['apirequest'][_0xad1d76(0x6cc)]=_0x4abf09[_0xad1d76(0x2e2)],_0x116294[_0xad1d76(0xe2)][_0x13d7f1][_0xad1d76(0x7ee)]['bodyStringErrorParse']=_0x4abf09[_0xad1d76(0x5f8)];}let _0x4bb8d6=_0x116294[_0xad1d76(0xe2)][_0x13d7f1][_0xad1d76(0x528)];_0x4aa566!==_0x4bb8d6?(this['reorderBlocks'](_0x116294[_0xad1d76(0xe2)],_0x4aa566),this[_0xad1d76(0x535)](_0x116294['blocks'],_0x4bb8d6)):this['reorderBlocks'](_0x116294[_0xad1d76(0xe2)],_0x4aa566);}[a0_0x4a47c0(0x4c3)](_0x586299){const _0x371a6f=a0_0x4a47c0;let _0x3df994='\u205f',_0x2dac0f=!0x1,_0x1dba44='';for(let _0x5e20a9=0x0;_0x5e20a9<_0x586299[_0x371a6f(0x415)];_0x5e20a9++){let _0x45b92c=_0x586299[_0x5e20a9];_0x45b92c==='\x22'&&(_0x5e20a9===0x0||_0x586299[_0x5e20a9-0x1]!=='\x5c')&&(_0x2dac0f=!_0x2dac0f),!(!_0x2dac0f&&(_0x45b92c==='\x0a'||_0x45b92c==='\x20'||_0x45b92c===_0x3df994))&&(_0x1dba44+=_0x45b92c);}let _0x5a843e={},_0x474fd7=9876543210.1234,_0x281189=_0x1dba44[_0x371a6f(0x470)](/\{\{([^}]+)\}\}/g,_0x111414=>{let _0x2e48e4=_0x111414,_0x5659e1=''+_0x474fd7;return _0x5a843e[_0x5659e1]=_0x2e48e4,_0x474fd7+=0.0001,_0x5659e1;}),_0xab9617='',_0x32670d=!0x1;try{let _0x498eb3=JSON[_0x371a6f(0x4e6)](_0x281189);_0xab9617=JSON[_0x371a6f(0x52f)](_0x498eb3,null,0x2),_0xab9617=_0xab9617[_0x371a6f(0x470)](/\n( +)/g,(_0x49e2a9,_0x1b5f4c)=>{const _0x9f62a6=_0x371a6f;let _0x2012aa=_0x1b5f4c[_0x9f62a6(0x415)];return'\x0a'+_0x3df994['repeat'](_0x2012aa*0x2);}),_0xab9617=_0xab9617[_0x371a6f(0x470)](/(\d{10,}\.\d+)/g,_0x5603cd=>_0x5a843e[_0x5603cd]||_0x5603cd);}catch(_0x48de79){this[_0x371a6f(0x664)][_0x371a6f(0x5f8)](_0x371a6f(0x43e)+_0x48de79),_0xab9617=_0x586299,_0x32670d=!0x0;}return{'result':_0xab9617,'error':_0x32670d};}[a0_0x4a47c0(0x772)](_0x4021b2,_0xa07ba8){const _0x28da4b=a0_0x4a47c0;if(_0xa07ba8[_0x28da4b(0x54d)]['type']===_0x28da4b(0x299)){this[_0x28da4b(0x7d7)](_0x28da4b(0x60d));return;}if(_0xa07ba8[_0x28da4b(0x54d)][_0x28da4b(0x7ee)]&&_0x28da4b(0x161)in _0xa07ba8[_0x28da4b(0x54d)]['apirequest']){this[_0x28da4b(0x664)][_0x28da4b(0x7bf)](this[_0x28da4b(0x5b1)]+'\x20('+this['instance'][_0x28da4b(0x228)]+_0x28da4b(0x508));let _0x53b3ea=JSON[_0x28da4b(0x52f)](_0xa07ba8[_0x28da4b(0x54d)][_0x28da4b(0x7ee)][_0x28da4b(0x161)],null,0x1);_0x53b3ea[_0x28da4b(0x415)]>0x2&&(_0x53b3ea=_0x53b3ea['substring'](0x1,_0x53b3ea[_0x28da4b(0x415)]-0x1)['trim']()),_0xa07ba8[_0x28da4b(0x54d)][_0x28da4b(0x7ee)]['headerString']=_0x53b3ea;}_0xa07ba8[_0x28da4b(0x54d)][_0x28da4b(0x7ee)]&&_0x28da4b(0x200)in _0xa07ba8[_0x28da4b(0x54d)][_0x28da4b(0x7ee)]&&(this[_0x28da4b(0x664)][_0x28da4b(0x7bf)](this['instanceName']+'\x20('+this[_0x28da4b(0x21b)]['wuid']+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0xa07ba8['block']['apirequest']['bodyString']=JSON[_0x28da4b(0x52f)](_0xa07ba8[_0x28da4b(0x54d)][_0x28da4b(0x7ee)]['body'],null,0x1)[_0x28da4b(0x3a3)]()),_0x4021b2['blocks'][_0x28da4b(0x723)](_0xa07ba8[_0x28da4b(0x54d)]),this[_0x28da4b(0x535)](_0x4021b2[_0x28da4b(0xe2)],_0xa07ba8[_0x28da4b(0x54d)][_0x28da4b(0x528)]);}[a0_0x4a47c0(0x535)](_0x223ebd,_0x2b5fcf){const _0x1f256a=a0_0x4a47c0;let _0x408f41=_0x223ebd['filter'](_0x514704=>_0x514704[_0x1f256a(0x528)]===_0x2b5fcf);_0x408f41[_0x1f256a(0x6f0)]((_0x390fb5,_0x16b491)=>_0x390fb5[_0x1f256a(0x28e)]-_0x16b491[_0x1f256a(0x28e)]),_0x408f41[_0x1f256a(0x9e)]((_0x2e7db9,_0x1c3c62)=>_0x2e7db9[_0x1f256a(0x28e)]=_0x1c3c62+0x1);}async[a0_0x4a47c0(0x1e3)](_0x5f4cd1){const _0x5494ab=a0_0x4a47c0;try{if(this[_0x5494ab(0x664)]['verbose'](this[_0x5494ab(0x5b1)]+'\x20('+this[_0x5494ab(0x21b)][_0x5494ab(0x228)]+_0x5494ab(0x253)),!_0x5f4cd1||!_0x5f4cd1[_0x5494ab(0x6cb)]){this[_0x5494ab(0x7d7)](_0x5494ab(0x145));return;}if(!this[_0x5494ab(0x22b)][_0x5494ab(0x5f1)][_0x5494ab(0x2ba)](_0x31ea43=>_0x31ea43[_0x5494ab(0x443)]===_0x5f4cd1[_0x5494ab(0x443)]))throw this[_0x5494ab(0x664)]['verbose'](this[_0x5494ab(0x5b1)]+'\x20('+this[_0x5494ab(0x21b)][_0x5494ab(0x228)]+_0x5494ab(0x2b0)+_0x5f4cd1[_0x5494ab(0x443)]+_0x5494ab(0xd1)),new m(_0x5494ab(0x3cb));let _0xf16dd3=await this[_0x5494ab(0x782)][_0x5494ab(0x4e4)][_0x5494ab(0xb1)]({'where':{'_id':_0x5f4cd1[_0x5494ab(0x443)]}});if(!_0xf16dd3||!_0xf16dd3[_0x5494ab(0x38a)]?.['includes'](this[_0x5494ab(0x21b)][_0x5494ab(0x228)]))throw this['logger']['error'](this[_0x5494ab(0x5b1)]+'\x20('+this[_0x5494ab(0x21b)][_0x5494ab(0x228)]+_0x5494ab(0x73e)+_0x5f4cd1[_0x5494ab(0x443)]+_0x5494ab(0x328)),new m(_0x5494ab(0x3e8)+_0x5f4cd1['_id']+_0x5494ab(0x328));if(!_0xf16dd3[_0x5494ab(0x599)]?.[_0x5494ab(0x795)](this[_0x5494ab(0x21b)][_0x5494ab(0x228)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let {replyOption:_0x407052}=_0x5f4cd1;_0x407052?.[_0x5494ab(0x2d6)]?(this[_0x5494ab(0x627)](_0xf16dd3,_0x5f4cd1),this[_0x5494ab(0x77b)](_0xf16dd3[_0x5494ab(0x40e)],_0x5f4cd1[_0x5494ab(0x6cb)]['blockId'])):_0x407052[_0x5494ab(0x443)]?(await this[_0x5494ab(0x7ab)](_0xf16dd3,_0x5f4cd1),this['reorderReplyOptions'](_0xf16dd3['replyOptions'],_0x5f4cd1[_0x5494ab(0x6cb)]['blockId'])):(this['addReplyOption'](_0xf16dd3,_0x5f4cd1),this[_0x5494ab(0x77b)](_0xf16dd3[_0x5494ab(0x40e)],_0x5f4cd1[_0x5494ab(0x6cb)][_0x5494ab(0x3d6)]));let _0x13a9c9=await this[_0x5494ab(0x782)][_0x5494ab(0x4e4)][_0x5494ab(0xc6)](_0xf16dd3['_id'],_0xf16dd3);if(!_0x13a9c9)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x13a9c9;}catch(_0x5405e5){this['throwAndLogError'](_0x5494ab(0xe3)+_0x5405e5);}}[a0_0x4a47c0(0x77b)](_0xd6bdae,_0x1a3fc2){const _0x4e1eb9=a0_0x4a47c0;_0xd6bdae['forEach'](_0x3b44f7=>{const _0x253ef2=a0_0xa65b;_0x3b44f7['blockId']===_0x1a3fc2&&_0x3b44f7[_0x253ef2(0x28e)]===void 0x0&&(_0x3b44f7[_0x253ef2(0x28e)]=0x270f);});let _0x350275=_0xd6bdae[_0x4e1eb9(0x635)](_0x4018ae=>_0x4018ae[_0x4e1eb9(0x3d6)]===_0x1a3fc2);_0x350275[_0x4e1eb9(0x6f0)]((_0x32878f,_0x26cad4)=>_0x32878f[_0x4e1eb9(0x28e)]-_0x26cad4[_0x4e1eb9(0x28e)]),_0x350275[_0x4e1eb9(0x9e)]((_0x53ce65,_0x10a8ed)=>{const _0x5055b3=_0x4e1eb9;_0x53ce65[_0x5055b3(0x28e)]=_0x10a8ed+0x1;}),_0xd6bdae['forEach'](_0x107dfb=>{const _0x3de70f=_0x4e1eb9;if(_0x107dfb['blockId']===_0x1a3fc2){let _0xed2fec=_0x350275[_0x3de70f(0x2ba)](_0x49fc66=>_0x49fc66[_0x3de70f(0x443)]&&_0x107dfb[_0x3de70f(0x443)]&&_0x49fc66[_0x3de70f(0x443)][_0x3de70f(0x13c)]()===_0x107dfb[_0x3de70f(0x443)][_0x3de70f(0x13c)]());_0xed2fec&&(_0x107dfb[_0x3de70f(0x28e)]=_0xed2fec[_0x3de70f(0x28e)]);}});}[a0_0x4a47c0(0x627)](_0x4ede29,_0x59501c){const _0x12366d=a0_0x4a47c0;let {replyOption:_0x7b9fb6}=_0x59501c;if(!_0x7b9fb6['_id']){this[_0x12366d(0x7d7)](_0x12366d(0x798));return;}if(!_0x4ede29['replyOptions'][_0x12366d(0x2ba)](_0x31aed9=>_0x31aed9[_0x12366d(0x443)][_0x12366d(0x13c)]()===_0x59501c[_0x12366d(0x6cb)]['_id'][_0x12366d(0x13c)]())){this[_0x12366d(0x7d7)]('ReplyOption\x20com\x20ID\x20'+_0x7b9fb6['_id']+'\x20não\x20encontrado');return;}_0x4ede29['replyOptions']=_0x4ede29[_0x12366d(0x40e)][_0x12366d(0x635)](_0x19c4f6=>_0x19c4f6['_id'][_0x12366d(0x13c)]()!==_0x59501c['replyOption']['_id'][_0x12366d(0x13c)]());}async[a0_0x4a47c0(0x7ab)](_0x27e983,_0x408ad3){const _0xe6bd0e=a0_0x4a47c0;let _0x4c23fc=_0x27e983[_0xe6bd0e(0x40e)][_0xe6bd0e(0x544)](_0xb670b9=>_0xb670b9[_0xe6bd0e(0x443)][_0xe6bd0e(0x13c)]()===_0x408ad3[_0xe6bd0e(0x6cb)]['_id']['toString']());if(_0x4c23fc===-0x1){this['throwAndLogError'](_0xe6bd0e(0x441)+_0x408ad3[_0xe6bd0e(0x6cb)][_0xe6bd0e(0x443)]+_0xe6bd0e(0x615));return;}for(let _0x29de95 in _0x408ad3['replyOption'])_0x408ad3[_0xe6bd0e(0x6cb)]['hasOwnProperty'](_0x29de95)&&(_0x27e983['replyOptions'][_0x4c23fc][_0x29de95]=_0x408ad3[_0xe6bd0e(0x6cb)][_0x29de95]);}[a0_0x4a47c0(0x7bc)](_0x34cf56,_0x4f4789){const _0x5b6abf=a0_0x4a47c0;_0x34cf56['replyOptions'][_0x5b6abf(0x723)](_0x4f4789[_0x5b6abf(0x6cb)]);}async[a0_0x4a47c0(0x71e)](_0x18345b){const _0x5365f0=a0_0x4a47c0;this[_0x5365f0(0x664)][_0x5365f0(0x7bf)](this[_0x5365f0(0x5b1)]+'\x20('+this[_0x5365f0(0x21b)][_0x5365f0(0x228)]+_0x5365f0(0x74c)+JSON['stringify'](_0x18345b,null,0x2));try{if(this[_0x5365f0(0x664)][_0x5365f0(0x7bf)](this[_0x5365f0(0x5b1)]+'\x20('+this['instance'][_0x5365f0(0x228)]+_0x5365f0(0x730)),!this[_0x5365f0(0x22b)][_0x5365f0(0x5f1)][_0x5365f0(0x2ba)](_0x189392=>_0x189392[_0x5365f0(0x443)]===_0x18345b[_0x5365f0(0x443)]))throw this[_0x5365f0(0x664)][_0x5365f0(0x7bf)](this[_0x5365f0(0x5b1)]+'\x20('+this[_0x5365f0(0x21b)][_0x5365f0(0x228)]+'):\x20Fluxo\x20\x27'+_0x18345b[_0x5365f0(0x443)]+'\x27\x20não\x20encontrado'),new m(_0x5365f0(0x3cb));let _0x4984b0=await this[_0x5365f0(0x782)]['flow']['findOne']({'where':{'_id':_0x18345b[_0x5365f0(0x443)]}});if(!_0x4984b0||!_0x4984b0[_0x5365f0(0x38a)]?.[_0x5365f0(0x795)](this[_0x5365f0(0x21b)]['wuid']))throw this[_0x5365f0(0x664)][_0x5365f0(0x5f8)](this[_0x5365f0(0x5b1)]+'\x20('+this[_0x5365f0(0x21b)][_0x5365f0(0x228)]+_0x5365f0(0x73e)+_0x18345b['_id']+_0x5365f0(0x328)),new m('Flow\x20\x27'+_0x18345b[_0x5365f0(0x443)]+_0x5365f0(0x328));if(!_0x4984b0[_0x5365f0(0x599)]?.[_0x5365f0(0x795)](this[_0x5365f0(0x21b)][_0x5365f0(0x228)]))throw new m(_0x5365f0(0x784));if(_0x18345b[_0x5365f0(0x68d)]&&_0x18345b[_0x5365f0(0x68d)]?.[_0x5365f0(0x2d6)]===!0x0){if(this[_0x5365f0(0x664)]['verbose'](this[_0x5365f0(0x5b1)]+'\x20('+this[_0x5365f0(0x21b)][_0x5365f0(0x228)]+_0x5365f0(0x447)),_0x18345b[_0x5365f0(0x68d)][_0x5365f0(0x339)]===!0x0)return{'message':_0x5365f0(0x648)};if(_0x4984b0['blocks'][_0x5365f0(0x34e)](_0x3bf273=>_0x3bf273['groupId'][_0x5365f0(0x13c)]()===_0x18345b[_0x5365f0(0x68d)][_0x5365f0(0x443)]))return this['logger'][_0x5365f0(0x7bf)](this[_0x5365f0(0x5b1)]+'\x20('+this[_0x5365f0(0x21b)]['wuid']+_0x5365f0(0x562)),{'message':_0x5365f0(0x6b7)};_0x4984b0[_0x5365f0(0x36c)]=_0x4984b0[_0x5365f0(0x36c)][_0x5365f0(0x635)](_0x179ded=>_0x179ded[_0x5365f0(0x443)]['toString']()!==_0x18345b[_0x5365f0(0x68d)][_0x5365f0(0x443)]);}else{if(_0x18345b[_0x5365f0(0x68d)]){if(_0x18345b[_0x5365f0(0x68d)]['default']===!0x0)return{'message':_0x5365f0(0x71a)};if(_0x18345b[_0x5365f0(0x68d)][_0x5365f0(0x443)]){let _0x268ee8=_0x4984b0['groups'][_0x5365f0(0x2ba)](_0x136e8f=>_0x136e8f['_id'][_0x5365f0(0x13c)]()===_0x18345b[_0x5365f0(0x68d)][_0x5365f0(0x443)]);_0x268ee8&&(_0x18345b[_0x5365f0(0x68d)]['x']<0x0&&(_0x18345b[_0x5365f0(0x68d)]['x']=0x0),_0x18345b[_0x5365f0(0x68d)]['y']<0x0&&(_0x18345b['group']['y']=0x0),Object[_0x5365f0(0x337)](_0x268ee8,_0x18345b['group']));}else _0x4984b0[_0x5365f0(0x36c)]['push'](_0x18345b[_0x5365f0(0x68d)]);}}let _0x831336=await this['repository'][_0x5365f0(0x4e4)]['updateOne'](_0x4984b0[_0x5365f0(0x443)],_0x4984b0);if(!_0x831336)throw new Error(_0x5365f0(0x63c));return _0x831336;}catch(_0x244c87){let _0x523c23=_0x5365f0(0x659),_0x4b1ed4=_0x244c87 instanceof Error?_0x244c87['message']:typeof _0x244c87==_0x5365f0(0x2b9)?JSON[_0x5365f0(0x52f)](_0x244c87):_0x244c87,_0x1f9a49=_0x523c23+':\x20'+_0x4b1ed4;throw this[_0x5365f0(0x664)]['error'](this[_0x5365f0(0x5b1)]+'\x20('+this[_0x5365f0(0x21b)][_0x5365f0(0x228)]+_0x5365f0(0x46a)+_0x1f9a49),new m(_0x1f9a49);}}async['editFlowCondition'](_0x40910){const _0x891234=a0_0x4a47c0;try{if(this['logger']['verbose'](this[_0x891234(0x5b1)]+'\x20('+this[_0x891234(0x21b)][_0x891234(0x228)]+_0x891234(0x3d3)),!this[_0x891234(0x22b)][_0x891234(0x5f1)][_0x891234(0x2ba)](_0x9695a3=>_0x9695a3[_0x891234(0x443)]===_0x40910[_0x891234(0x443)]))throw this['logger']['verbose'](this[_0x891234(0x5b1)]+'\x20('+this[_0x891234(0x21b)][_0x891234(0x228)]+_0x891234(0x2b0)+_0x40910[_0x891234(0x443)]+_0x891234(0xd1)),new m(_0x891234(0x3cb));let _0x11288b=await this[_0x891234(0x782)]['flow'][_0x891234(0xb1)]({'where':{'_id':_0x40910[_0x891234(0x443)]}});if(!_0x11288b||!_0x11288b[_0x891234(0x38a)]?.[_0x891234(0x795)](this[_0x891234(0x21b)][_0x891234(0x228)]))throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x891234(0x21b)]['wuid']+_0x891234(0x73e)+_0x40910[_0x891234(0x443)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x40910[_0x891234(0x443)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x11288b['whoCanEdit']?.[_0x891234(0x795)](this['instance'][_0x891234(0x228)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let _0x2be246=!0x1;if(_0x40910[_0x891234(0x5ee)]?.['delete']===!0x0)_0x11288b[_0x891234(0x4bd)]=_0x11288b[_0x891234(0x4bd)]['filter'](_0x5da730=>_0x5da730&&_0x40910['condition']&&_0x5da730[_0x891234(0x443)]&&_0x40910[_0x891234(0x5ee)]['_id']&&_0x5da730[_0x891234(0x443)][_0x891234(0x13c)]()!==_0x40910[_0x891234(0x5ee)][_0x891234(0x443)][_0x891234(0x13c)]()),_0x2be246=!0x0;else{let _0x577187=_0x11288b[_0x891234(0x4bd)][_0x891234(0x2ba)](_0x1e6806=>_0x1e6806&&_0x40910[_0x891234(0x5ee)]&&_0x1e6806['_id']&&_0x40910['condition'][_0x891234(0x443)]&&_0x1e6806[_0x891234(0x443)]['toString']()===_0x40910[_0x891234(0x5ee)][_0x891234(0x443)][_0x891234(0x13c)]());_0x577187?(_0x2be246=_0x577187['order']!==_0x40910[_0x891234(0x5ee)][_0x891234(0x28e)],Object['assign'](_0x577187,_0x40910[_0x891234(0x5ee)])):(_0x11288b[_0x891234(0x4bd)][_0x891234(0x723)](_0x40910[_0x891234(0x5ee)]),_0x2be246=!0x0);}if(_0x2be246){_0x11288b[_0x891234(0x4bd)]['sort']((_0x2bedbd,_0x8b70e)=>_0x2bedbd[_0x891234(0x28e)]>_0x8b70e[_0x891234(0x28e)]?0x1:_0x8b70e['order']>_0x2bedbd[_0x891234(0x28e)]?-0x1:0x0);for(let _0x108cc9=0x0;_0x108cc9<_0x11288b[_0x891234(0x4bd)][_0x891234(0x415)];_0x108cc9++)_0x11288b['conditions'][_0x108cc9][_0x891234(0x28e)]=_0x108cc9+0x1;_0x11288b[_0x891234(0x4bd)][_0x891234(0x415)]>0x0&&(_0x11288b[_0x891234(0x4bd)][0x0][_0x891234(0x3a0)]=_0x891234(0x332));}let _0x2d2a2a=await this[_0x891234(0x782)]['flow']['updateOne'](_0x11288b[_0x891234(0x443)],_0x11288b);if(!_0x2d2a2a)throw new Error(_0x891234(0x63c));return _0x2d2a2a;}catch(_0x2fc27e){let _0x450be4=_0x891234(0x199),_0x3fdabd=_0x2fc27e instanceof Error?_0x2fc27e['message']:typeof _0x2fc27e==_0x891234(0x2b9)?JSON[_0x891234(0x52f)](_0x2fc27e):_0x2fc27e,_0x22e5c7=_0x450be4+':\x20'+_0x3fdabd;throw this[_0x891234(0x664)][_0x891234(0x5f8)](this[_0x891234(0x5b1)]+'\x20('+this['instance'][_0x891234(0x228)]+_0x891234(0x46a)+_0x22e5c7),new m(_0x22e5c7);}}async[a0_0x4a47c0(0x234)](_0x4f7bd5){const _0x22a90f=a0_0x4a47c0;try{if(this[_0x22a90f(0x664)]['verbose'](this[_0x22a90f(0x5b1)]+'\x20('+this['instance'][_0x22a90f(0x228)]+_0x22a90f(0x1b8)),!this['AutomateSystem'][_0x22a90f(0x5f1)][_0x22a90f(0x2ba)](_0x52321f=>_0x52321f[_0x22a90f(0x443)]===_0x4f7bd5[_0x22a90f(0x443)]))throw this[_0x22a90f(0x664)]['verbose'](this[_0x22a90f(0x5b1)]+'\x20('+this[_0x22a90f(0x21b)][_0x22a90f(0x228)]+_0x22a90f(0x2b0)+_0x4f7bd5[_0x22a90f(0x443)]+'\x27\x20não\x20encontrado'),new m(_0x22a90f(0x3cb));let _0x4aaa4e=await this[_0x22a90f(0x782)][_0x22a90f(0x4e4)]['findOne']({'where':{'_id':_0x4f7bd5['_id']}});if(!_0x4aaa4e||!_0x4aaa4e['whoCanUse']?.[_0x22a90f(0x795)](this[_0x22a90f(0x21b)]['wuid']))throw this[_0x22a90f(0x664)]['error'](this['instanceName']+'\x20('+this[_0x22a90f(0x21b)]['wuid']+'):\x20Flow\x20\x27'+_0x4f7bd5[_0x22a90f(0x443)]+_0x22a90f(0x328)),new m(_0x22a90f(0x3e8)+_0x4f7bd5['_id']+_0x22a90f(0x328));if(!_0x4aaa4e[_0x22a90f(0x599)]?.[_0x22a90f(0x795)](this[_0x22a90f(0x21b)][_0x22a90f(0x228)]))throw new m(_0x22a90f(0x784));let _0x3c9eb2=!0x1;if(_0x4f7bd5[_0x22a90f(0x211)]?.[_0x22a90f(0x2d6)]===!0x0)_0x4aaa4e[_0x22a90f(0x33b)]=_0x4aaa4e['varedits'][_0x22a90f(0x635)](_0x310371=>_0x310371&&_0x4f7bd5[_0x22a90f(0x211)]&&_0x310371[_0x22a90f(0x443)]&&_0x4f7bd5[_0x22a90f(0x211)][_0x22a90f(0x443)]&&_0x310371[_0x22a90f(0x443)][_0x22a90f(0x13c)]()!==_0x4f7bd5[_0x22a90f(0x211)][_0x22a90f(0x443)][_0x22a90f(0x13c)]()),_0x3c9eb2=!0x0;else{let _0x5aea97=_0x4aaa4e[_0x22a90f(0x33b)][_0x22a90f(0x2ba)](_0x48abd8=>_0x48abd8&&_0x4f7bd5[_0x22a90f(0x211)]&&_0x48abd8[_0x22a90f(0x443)]&&_0x4f7bd5[_0x22a90f(0x211)][_0x22a90f(0x443)]&&_0x48abd8[_0x22a90f(0x443)][_0x22a90f(0x13c)]()===_0x4f7bd5['varedit'][_0x22a90f(0x443)][_0x22a90f(0x13c)]());_0x5aea97?(_0x3c9eb2=_0x5aea97[_0x22a90f(0x28e)]!==_0x4f7bd5['varedit'][_0x22a90f(0x28e)],Object['assign'](_0x5aea97,_0x4f7bd5[_0x22a90f(0x211)])):(_0x4aaa4e['varedits'][_0x22a90f(0x723)](_0x4f7bd5[_0x22a90f(0x211)]),_0x3c9eb2=!0x0);}if(_0x3c9eb2){_0x4aaa4e['varedits'][_0x22a90f(0x6f0)]((_0x1588db,_0x3d9701)=>_0x1588db[_0x22a90f(0x28e)]>_0x3d9701[_0x22a90f(0x28e)]?0x1:_0x3d9701[_0x22a90f(0x28e)]>_0x1588db[_0x22a90f(0x28e)]?-0x1:0x0);for(let _0x1c6ce0=0x0;_0x1c6ce0<_0x4aaa4e[_0x22a90f(0x33b)][_0x22a90f(0x415)];_0x1c6ce0++)_0x4aaa4e['varedits'][_0x1c6ce0][_0x22a90f(0x28e)]=_0x1c6ce0+0x1;}let _0xb779fa=await this[_0x22a90f(0x782)][_0x22a90f(0x4e4)]['updateOne'](_0x4aaa4e['_id'],_0x4aaa4e);if(!_0xb779fa)throw new Error(_0x22a90f(0x63c));return _0xb779fa;}catch(_0x4ee8a8){let _0x22c0a4=_0x22a90f(0x199),_0x12d85a=_0x4ee8a8 instanceof Error?_0x4ee8a8[_0x22a90f(0xab)]:typeof _0x4ee8a8=='object'?JSON[_0x22a90f(0x52f)](_0x4ee8a8):_0x4ee8a8,_0x1ebd29=_0x22c0a4+':\x20'+_0x12d85a;throw this['logger'][_0x22a90f(0x5f8)](this[_0x22a90f(0x5b1)]+'\x20('+this[_0x22a90f(0x21b)]['wuid']+'):\x20'+_0x1ebd29),new m(_0x1ebd29);}}async['editFlowVariable'](_0x39cadd){const _0x135000=a0_0x4a47c0;try{if(this[_0x135000(0x664)][_0x135000(0x7bf)](this['instanceName']+'\x20('+this[_0x135000(0x21b)][_0x135000(0x228)]+_0x135000(0x732)),!this[_0x135000(0x22b)][_0x135000(0x5f1)]['find'](_0x1e1391=>_0x1e1391['_id']===_0x39cadd['_id']))throw this['logger'][_0x135000(0x7bf)](this['instanceName']+'\x20('+this[_0x135000(0x21b)]['wuid']+'):\x20Fluxo\x20\x27'+_0x39cadd[_0x135000(0x443)]+_0x135000(0xd1)),new m(_0x135000(0x3cb));let _0x31316e=await this[_0x135000(0x782)]['flow'][_0x135000(0xb1)]({'where':{'_id':_0x39cadd[_0x135000(0x443)]}});if(!_0x31316e||!_0x31316e['whoCanUse']?.[_0x135000(0x795)](this[_0x135000(0x21b)][_0x135000(0x228)]))throw this[_0x135000(0x664)][_0x135000(0x5f8)](this[_0x135000(0x5b1)]+'\x20('+this[_0x135000(0x21b)][_0x135000(0x228)]+_0x135000(0x73e)+_0x39cadd[_0x135000(0x443)]+_0x135000(0x328)),new m(_0x135000(0x3e8)+_0x39cadd[_0x135000(0x443)]+_0x135000(0x328));if(!_0x31316e[_0x135000(0x599)]?.['includes'](this[_0x135000(0x21b)][_0x135000(0x228)]))throw new m(_0x135000(0x784));_0x39cadd[_0x135000(0x6df)][_0x135000(0x25b)]=_0x39cadd[_0x135000(0x6df)][_0x135000(0x25b)][_0x135000(0x3a3)](),_0x39cadd[_0x135000(0x6df)][_0x135000(0x25b)]['startsWith']('_')&&(_0x39cadd[_0x135000(0x6df)][_0x135000(0x25b)]=_0x39cadd['variable'][_0x135000(0x25b)][_0x135000(0x11c)](0x1)),_0x39cadd[_0x135000(0x6df)][_0x135000(0x25b)]=_0x39cadd[_0x135000(0x6df)][_0x135000(0x25b)]['trim']();let _0x2b76bf=_0x31316e['variables']['find'](_0x243380=>_0x243380[_0x135000(0x25b)]===_0x39cadd['variable'][_0x135000(0x25b)]);if(_0x2b76bf?.['leadInfo']===!0x0)throw new Error(_0x135000(0x106));if(_0x39cadd[_0x135000(0x6df)]?.[_0x135000(0x2d6)]===!0x0){if(!_0x2b76bf)return{'message':_0x135000(0x1e6)};_0x31316e[_0x135000(0x313)]=_0x31316e[_0x135000(0x313)]['filter'](_0x18fa97=>_0x18fa97[_0x135000(0x25b)]!==_0x39cadd[_0x135000(0x6df)][_0x135000(0x25b)]);}else _0x2b76bf?Object[_0x135000(0x337)](_0x2b76bf,_0x39cadd['variable']):_0x31316e[_0x135000(0x313)]['push'](_0x39cadd[_0x135000(0x6df)]);let _0x387590=await this[_0x135000(0x782)][_0x135000(0x4e4)]['updateOne'](_0x31316e['_id'],_0x31316e);if(!_0x387590)throw new Error(_0x135000(0x63c));return _0x387590;}catch(_0x1b715f){let _0x1bf9e6=_0x135000(0x69a),_0x593d2c=_0x1b715f instanceof Error?_0x1b715f['message']:typeof _0x1b715f==_0x135000(0x2b9)?JSON[_0x135000(0x52f)](_0x1b715f):_0x1b715f,_0xbe4b51=_0x1bf9e6+':\x20'+_0x593d2c;throw this[_0x135000(0x664)][_0x135000(0x5f8)](this[_0x135000(0x5b1)]+'\x20('+this[_0x135000(0x21b)][_0x135000(0x228)]+_0x135000(0x46a)+_0xbe4b51),new m(_0xbe4b51);}}async['startFlow'](_0x130cc4){const _0x3b05bb=a0_0x4a47c0;let _0x9769ff=null;try{if(!this[_0x3b05bb(0x22b)]?.[_0x3b05bb(0x79b)][_0x3b05bb(0x231)])throw new m(_0x3b05bb(0xcd));this[_0x3b05bb(0x664)][_0x3b05bb(0x7bf)](this[_0x3b05bb(0x5b1)]+'\x20('+this['instance'][_0x3b05bb(0x228)]+_0x3b05bb(0x538));let _0x323d83=(await this[_0x3b05bb(0x14c)]({'numbers':[_0x130cc4['remoteJid']]}))[0x0];if(!_0x323d83[_0x3b05bb(0x32b)]&&!(0x0,w[_0x3b05bb(0x6a2)])(_0x323d83[_0x3b05bb(0x304)])&&!_0x323d83[_0x3b05bb(0x304)]['includes'](_0x3b05bb(0x135)))throw _0x9769ff=JSON[_0x3b05bb(0x52f)](_0x323d83,null,0x2),new m(_0x323d83);let _0x198caa;if(_0x130cc4['name'][_0x3b05bb(0x415)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x3b05bb(0x27b)](_0x130cc4[_0x3b05bb(0x25b)])?_0x198caa=this[_0x3b05bb(0x22b)]['flows']['find'](_0x41dc4e=>_0x41dc4e[_0x3b05bb(0x443)]===_0x130cc4[_0x3b05bb(0x25b)]):_0x198caa=this[_0x3b05bb(0x22b)][_0x3b05bb(0x5f1)]['find'](_0x88fe57=>_0x88fe57['name']===_0x130cc4[_0x3b05bb(0x25b)]),!_0x198caa)throw this[_0x3b05bb(0x664)][_0x3b05bb(0x7bf)](this[_0x3b05bb(0x5b1)]+'\x20('+this[_0x3b05bb(0x21b)][_0x3b05bb(0x228)]+_0x3b05bb(0x2b0)+_0x130cc4[_0x3b05bb(0x25b)]+_0x3b05bb(0xd1)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x230d60=await this[_0x3b05bb(0x782)][_0x3b05bb(0x4e4)][_0x3b05bb(0xb1)]({'where':{'_id':_0x198caa[_0x3b05bb(0x443)]}});if(!_0x230d60||!_0x230d60[_0x3b05bb(0x38a)]?.[_0x3b05bb(0x795)](this[_0x3b05bb(0x21b)][_0x3b05bb(0x228)]))throw this[_0x3b05bb(0x664)][_0x3b05bb(0x5f8)](this['instanceName']+'\x20('+this[_0x3b05bb(0x21b)][_0x3b05bb(0x228)]+'):\x20Flow\x20\x27'+_0x198caa['_id']+_0x3b05bb(0x328)),_0x9769ff='Flow\x20\x27'+_0x198caa['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo',new m(_0x9769ff);let _0x513e2e=await this[_0x3b05bb(0x736)](_0x230d60,_0x323d83[_0x3b05bb(0x304)],_0x130cc4['changeVariables']);if(_0x513e2e){this[_0x3b05bb(0x664)][_0x3b05bb(0x7bf)](this[_0x3b05bb(0x5b1)]+'\x20('+this[_0x3b05bb(0x21b)]['wuid']+_0x3b05bb(0x20d));let _0x31f0eb=await this['NextBlock'](_0x513e2e);return _0x31f0eb&&await this['processblock'](_0x513e2e,_0x31f0eb),{'message':_0x3b05bb(0x506)+_0x130cc4[_0x3b05bb(0x1d0)]};}}catch(_0x329b18){if(this['logger'][_0x3b05bb(0x5f8)](this['instanceName']+'\x20('+this[_0x3b05bb(0x21b)]['wuid']+'):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20'+(_0x329b18 instanceof Error?_0x329b18[_0x3b05bb(0xab)]:JSON['stringify'](_0x329b18,null,0x2))),_0x9769ff=_0x329b18 instanceof Error?_0x329b18[_0x3b05bb(0xab)]:JSON['stringify'](_0x329b18,null,0x2),_0x9769ff)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x9769ff);}}async['startFlowWebhook'](_0x3be29f,_0x308a83,_0x265817){const _0x23d83b=a0_0x4a47c0;let _0x1816c4=null;try{if(!this[_0x23d83b(0x22b)]?.[_0x23d83b(0x79b)][_0x23d83b(0x231)])throw new m(_0x23d83b(0xcd));if(this[_0x23d83b(0x664)]['verbose'](this['instanceName']+'\x20('+this[_0x23d83b(0x21b)][_0x23d83b(0x228)]+'):\x20Iniciando\x20bot...'),_0x308a83){let _0x45dd81=(await this[_0x23d83b(0x14c)]({'numbers':[_0x308a83]}))[0x0];if(!_0x45dd81[_0x23d83b(0x32b)]&&!(0x0,w[_0x23d83b(0x6a2)])(_0x45dd81['jid'])&&!_0x45dd81[_0x23d83b(0x304)][_0x23d83b(0x795)](_0x23d83b(0x135)))throw _0x1816c4=JSON[_0x23d83b(0x52f)](_0x45dd81,null,0x2),new m(_0x45dd81);_0x308a83=_0x45dd81[_0x23d83b(0x304)];}else _0x308a83||(_0x308a83=(0x0,X['v4'])());let _0x5e099d=await this[_0x23d83b(0x782)][_0x23d83b(0x4e4)][_0x23d83b(0xb1)]({'where':{'_id':_0x3be29f}});if(!_0x5e099d||!_0x5e099d[_0x23d83b(0x38a)]?.[_0x23d83b(0x795)](this['instance']['wuid']))throw this['logger'][_0x23d83b(0x5f8)](this[_0x23d83b(0x5b1)]+'\x20('+this[_0x23d83b(0x21b)][_0x23d83b(0x228)]+_0x23d83b(0x73e)+_0x3be29f+_0x23d83b(0x328)),new m(_0x23d83b(0x3e8)+_0x3be29f+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x5b8210=await this[_0x23d83b(0x736)](_0x5e099d,_0x308a83,null);if(_0x5b8210){this[_0x23d83b(0x664)]['verbose'](this[_0x23d83b(0x5b1)]+'\x20('+this[_0x23d83b(0x21b)]['wuid']+_0x23d83b(0x278));let _0x45b5eb;if(_0x265817){let _0x464811=_0x5b8210['chatLog']['realVariables'],_0x37ed1a=this[_0x23d83b(0x16b)](_0x265817);Object[_0x23d83b(0x337)](_0x464811,_0x37ed1a),_0x5b8210['chatLog'][_0x23d83b(0x1cc)]=_0x464811,_0x45b5eb={'error':!0x1,'apiResponse':_0x265817};}let _0x48166b=await this[_0x23d83b(0x79d)](_0x5b8210);return _0x48166b&&await this[_0x23d83b(0x5d8)](_0x5b8210,_0x48166b),{'message':'Flow\x20iniciado'};}}catch(_0x4227bb){if(this[_0x23d83b(0x664)][_0x23d83b(0x5f8)](this['instanceName']+'\x20('+this[_0x23d83b(0x21b)]['wuid']+_0x23d83b(0x4e3)+(_0x4227bb instanceof Error?_0x4227bb[_0x23d83b(0xab)]:JSON[_0x23d83b(0x52f)](_0x4227bb,null,0x2))),_0x1816c4=_0x4227bb instanceof Error?_0x4227bb[_0x23d83b(0xab)]:JSON[_0x23d83b(0x52f)](_0x4227bb,null,0x2),_0x1816c4)throw new m(_0x23d83b(0x189)+_0x1816c4);}}async[a0_0x4a47c0(0x681)](_0x1f5100){const _0x1d7cff=a0_0x4a47c0;try{let _0x3c9d51={'remoteJid':_0x1f5100,'status':_0x1d7cff(0x113)},_0x594cbd={'status':_0x1d7cff(0x2fd)},_0x20d5e3=await this[_0x1d7cff(0x782)][_0x1d7cff(0x7ef)][_0x1d7cff(0x2aa)](_0x3c9d51,_0x594cbd,this['instance']['wuid']);return this[_0x1d7cff(0x664)]['verbose'](this[_0x1d7cff(0x5b1)]+'\x20('+this['instance'][_0x1d7cff(0x228)]+_0x1d7cff(0x244)),_0x20d5e3;}catch(_0x5ddc2f){throw this[_0x1d7cff(0x664)]['error'](this[_0x1d7cff(0x5b1)]+'\x20('+this[_0x1d7cff(0x21b)][_0x1d7cff(0x228)]+'):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20'+_0x5ddc2f[_0x1d7cff(0xab)]),_0x5ddc2f;}}async[a0_0x4a47c0(0x736)](_0x5950aa,_0x2fa385,_0x5cf3fa){const _0x25d0be=a0_0x4a47c0;this[_0x25d0be(0x664)]['verbose'](this[_0x25d0be(0x5b1)]+'\x20('+this[_0x25d0be(0x21b)]['wuid']+_0x25d0be(0x6d9)),await this[_0x25d0be(0x681)](_0x2fa385);try{let _0x5a0bc5=require(_0x25d0be(0x63b))[_0x25d0be(0x26b)],_0x3095bd=Date[_0x25d0be(0x331)](),_0x251bed=_0x25d0be(0x299),_0x140acd={},_0x2e7653={},_0x20511a=this[_0x25d0be(0x22b)][_0x25d0be(0x5f1)][_0x25d0be(0x2ba)](_0x379675=>_0x379675[_0x25d0be(0x443)]===_0x5950aa[_0x25d0be(0x443)]?.[_0x25d0be(0x13c)]()),_0x2e78b8=_0x20511a?.[_0x25d0be(0x2a9)]??_0x5950aa['minutesToClose']??0x0,_0x2ff826=_0x20511a?.[_0x25d0be(0x276)]??_0x5950aa[_0x25d0be(0x276)]??!0x1,_0x284ac6={'flowId':_0x5950aa[_0x25d0be(0x443)],..._0x5950aa,'chatLog':null},_0x1c59c3=await this[_0x25d0be(0xef)](_0x284ac6['variables']),_0x3c4b8b=await this[_0x25d0be(0x51e)](_0x2fa385),_0x5ebd06={..._0x1c59c3,..._0x3c4b8b,'_remoteJid':_0x2fa385},_0x37a689={'lastReceivedMessage':_0x140acd,'lastSendMessage':_0x2e7653,'lastBlockId':_0x251bed,'lastCondition':!0x0,'realVariables':_0x5ebd06};_0x284ac6[_0x25d0be(0x743)]=_0x37a689,_0x284ac6['chatLog'][_0x25d0be(0x1cc)]={..._0x5ebd06,..._0x5cf3fa},delete _0x284ac6['_id'],_0x284ac6[_0x25d0be(0x443)]=new _0x5a0bc5(),_0x284ac6['lastInteraction']=_0x3095bd,_0x284ac6[_0x25d0be(0x7ae)]='open',_0x284ac6[_0x25d0be(0x1d0)]=_0x2fa385,_0x284ac6[_0x25d0be(0x2a9)]=_0x2e78b8,_0x284ac6['readMessages']=_0x2ff826,_0x284ac6[_0x25d0be(0x443)]=_0x5950aa['_id'];let _0x4a7d12=await this['repository'][_0x25d0be(0x7ef)][_0x25d0be(0xc6)](_0x284ac6[_0x25d0be(0x443)],_0x284ac6,this['instance'][_0x25d0be(0x228)]);return this[_0x25d0be(0x664)]['verbose'](this['instanceName']+'\x20('+this[_0x25d0be(0x21b)][_0x25d0be(0x228)]+_0x25d0be(0x6eb)),_0x4a7d12?_0x284ac6:null;}catch(_0x4df97b){let _0x527f36=_0x25d0be(0xb5),_0x196470=_0x4df97b instanceof Error?_0x4df97b[_0x25d0be(0xab)]:typeof _0x4df97b==_0x25d0be(0x2b9)?JSON[_0x25d0be(0x52f)](_0x4df97b):_0x4df97b,_0x386cc5=_0x527f36+':\x20'+_0x196470;throw this[_0x25d0be(0x664)][_0x25d0be(0x5f8)](this[_0x25d0be(0x5b1)]+'\x20('+this['instance'][_0x25d0be(0x228)]+_0x25d0be(0x46a)+_0x386cc5),new m(_0x386cc5);}}async['getConversation'](_0x3100eb){const _0x3677ef=a0_0x4a47c0;try{this[_0x3677ef(0x664)][_0x3677ef(0x7bf)](this['instanceName']+'\x20('+this[_0x3677ef(0x21b)]['wuid']+'):\x20Buscando\x20conversa...'),this[_0x3677ef(0x664)][_0x3677ef(0x7bf)](this[_0x3677ef(0x5b1)]+'\x20('+this[_0x3677ef(0x21b)][_0x3677ef(0x228)]+_0x3677ef(0x153)+_0x3100eb);let _0x2fd9d4={'where':{'_id':_0x3100eb}};return await this['repository']['flowConversation']['findOne'](_0x2fd9d4,this[_0x3677ef(0x21b)][_0x3677ef(0x228)]);}catch(_0x241ae4){let _0x53ac5b=_0x3677ef(0x206),_0x1e3bc8=_0x241ae4 instanceof Error?_0x241ae4['message']:typeof _0x241ae4==_0x3677ef(0x2b9)?JSON['stringify'](_0x241ae4):_0x241ae4,_0x188d6c=_0x53ac5b+':\x20'+_0x1e3bc8;throw this[_0x3677ef(0x664)][_0x3677ef(0x5f8)](this[_0x3677ef(0x5b1)]+'\x20('+this[_0x3677ef(0x21b)][_0x3677ef(0x228)]+_0x3677ef(0x46a)+_0x188d6c),new m(_0x188d6c);}}async[a0_0x4a47c0(0x7dd)](_0x13c760){const _0x380311=a0_0x4a47c0;try{return this['logger'][_0x380311(0x7bf)](this[_0x380311(0x5b1)]+'\x20('+this[_0x380311(0x21b)][_0x380311(0x228)]+'):\x20Buscando\x20conversas...'),await this[_0x380311(0x782)][_0x380311(0x7ef)]['find'](_0x13c760,this[_0x380311(0x21b)]['wuid']);}catch(_0x962938){let _0x2be445=_0x380311(0x690),_0x2beff5=_0x962938 instanceof Error?_0x962938['message']:typeof _0x962938==_0x380311(0x2b9)?JSON[_0x380311(0x52f)](_0x962938):_0x962938,_0x408229=_0x2be445+':\x20'+_0x2beff5;throw this[_0x380311(0x664)][_0x380311(0x5f8)](this[_0x380311(0x5b1)]+'\x20('+this[_0x380311(0x21b)][_0x380311(0x228)]+'):\x20'+_0x408229),new m(_0x408229);}}async['deleteConversation'](_0x4346f2){const _0x34d39d=a0_0x4a47c0;try{return this[_0x34d39d(0x664)][_0x34d39d(0x7bf)](this[_0x34d39d(0x5b1)]+'\x20('+this[_0x34d39d(0x21b)][_0x34d39d(0x228)]+_0x34d39d(0x483)),this[_0x34d39d(0x664)][_0x34d39d(0x7bf)](this[_0x34d39d(0x5b1)]+'\x20('+this['instance'][_0x34d39d(0x228)]+_0x34d39d(0x5db)+_0x4346f2),(await this['repository'][_0x34d39d(0x7ef)][_0x34d39d(0x4a5)]({'where':{'_id':_0x4346f2[_0x34d39d(0x443)]}},this[_0x34d39d(0x21b)][_0x34d39d(0x228)]))[_0x34d39d(0x693)]===0x0?{'message':_0x34d39d(0x2c2)}:{'message':_0x34d39d(0x65d)};}catch(_0x35590d){let _0x423370='Erro\x20ao\x20deletar\x20a\x20conversa',_0x54e26d=_0x35590d instanceof Error?_0x35590d[_0x34d39d(0xab)]:typeof _0x35590d==_0x34d39d(0x2b9)?JSON[_0x34d39d(0x52f)](_0x35590d):_0x35590d,_0x2c95a3=_0x423370+':\x20'+_0x54e26d;throw this[_0x34d39d(0x664)][_0x34d39d(0x5f8)](this[_0x34d39d(0x5b1)]+'\x20('+this['instance']['wuid']+_0x34d39d(0x46a)+_0x2c95a3),new m(_0x2c95a3);}}async[a0_0x4a47c0(0x550)](_0x115429){const _0x37f1cd=a0_0x4a47c0;try{let {_id:_0x388b23,chatLog:_0x31614f,status:_0x1097b2}=_0x115429;if(!_0x388b23)return{'message':'O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.'};let _0x9f2d8c={};if(_0x1097b2!==void 0x0&&(_0x9f2d8c[_0x37f1cd(0x7ae)]=_0x1097b2),Object['keys'](_0x9f2d8c)[_0x37f1cd(0x415)]===0x0)return{'message':_0x37f1cd(0x432)};let _0x443fac=await this[_0x37f1cd(0x782)][_0x37f1cd(0x7ef)][_0x37f1cd(0xc6)](_0x388b23,_0x9f2d8c,this[_0x37f1cd(0x21b)][_0x37f1cd(0x228)]);return _0x443fac||{'message':'Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.'};}catch(_0x40a8f5){let _0x39e872=_0x37f1cd(0xc2),_0x27a79d=_0x40a8f5 instanceof Error?_0x40a8f5['message']:typeof _0x40a8f5==_0x37f1cd(0x2b9)?JSON[_0x37f1cd(0x52f)](_0x40a8f5):_0x40a8f5,_0xd1c247=_0x39e872+':\x20'+_0x27a79d;throw this[_0x37f1cd(0x664)][_0x37f1cd(0x5f8)](this['instanceName']+'\x20('+this['instance'][_0x37f1cd(0x228)]+_0x37f1cd(0x46a)+_0xd1c247),new m(_0xd1c247);}}async[a0_0x4a47c0(0x31d)](_0x397a22){const _0x31a828=a0_0x4a47c0;try{_0x397a22['_id']=this[_0x31a828(0x117)](_0x397a22[_0x31a828(0x443)]);let _0x552279=await this[_0x31a828(0x782)][_0x31a828(0x316)][_0x31a828(0xb1)]({'where':{'_id':_0x397a22['_id']}},this[_0x31a828(0x21b)][_0x31a828(0x228)]);if(!_0x552279)throw new m(_0x31a828(0x1da));let {_id:_0x266529,leadInfo:_0x2a2b78}=_0x397a22;if(!_0x266529)throw new Error('O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.');if(_0x397a22['delete']===_0x31a828(0x64a))return await this['deleteChat'](_0x397a22[_0x31a828(0x443)]),await this[_0x31a828(0x782)][_0x31a828(0x316)][_0x31a828(0x2d6)]({'where':{'_id':_0x397a22[_0x31a828(0x443)]}},this[_0x31a828(0x21b)]['wuid']),await this[_0x31a828(0x782)][_0x31a828(0xab)][_0x31a828(0x2d6)]({'where':{'key':{'remoteJid':_0x397a22[_0x31a828(0x443)]}}},this[_0x31a828(0x21b)][_0x31a828(0x228)]),_0x397a22=await this['repository'][_0x31a828(0x316)][_0x31a828(0xc6)]({'where':{'_id':_0x397a22[_0x31a828(0x443)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x31a828(0x21b)][_0x31a828(0x228)]),q(this[_0x31a828(0x5b1)],'chats',{'chat':_0x397a22}),{'message':_0x31a828(0x3b7)};if(_0x397a22['delete']==='messages')return await this[_0x31a828(0x782)][_0x31a828(0xab)][_0x31a828(0x2d6)]({'where':{'key':{'remoteJid':_0x397a22['_id']}}},this[_0x31a828(0x21b)][_0x31a828(0x228)]),_0x397a22=await this[_0x31a828(0x782)]['chat'][_0x31a828(0xc6)]({'where':{'_id':_0x397a22[_0x31a828(0x443)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x31a828(0x21b)][_0x31a828(0x228)]),q(this[_0x31a828(0x5b1)],_0x31a828(0x7a6),{'chat':_0x397a22}),{'message':_0x31a828(0x6f1)};let _0x5c0155=(_0x5be00d,_0x849c38,_0x25f2f1)=>{_0x5be00d&&_0x25f2f1['forEach'](_0x461933=>{const _0x5608b3=a0_0xa65b;_0x5be00d[_0x461933]!==void 0x0&&(_0x849c38[_0x5608b3(0x3e0)+_0x461933]=_0x5be00d[_0x461933]);});},_0x41a123={};if(_0x31a828(0x61b)in _0x397a22&&(this[_0x31a828(0x664)][_0x31a828(0x7bf)](this[_0x31a828(0x5b1)]+'\x20('+this[_0x31a828(0x21b)][_0x31a828(0x228)]+'):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20'+_0x397a22[_0x31a828(0x443)]),_0x397a22[_0x31a828(0x61b)]=_0x397a22[_0x31a828(0x61b)]===0x0?null:-0x1,await this[_0x31a828(0x29a)]['chatModify']({'mute':_0x397a22[_0x31a828(0x61b)]},_0x397a22[_0x31a828(0x443)]),_0x41a123[_0x31a828(0x61b)]=Number(_0x397a22[_0x31a828(0x61b)])),_0x2a2b78&&(_0x5c0155(_0x2a2b78,_0x41a123,[_0x31a828(0x3d0),_0x31a828(0x18b),_0x31a828(0x35d),_0x31a828(0x1f6),'status','notas',_0x31a828(0x24f),_0x31a828(0x7d2),'responsavelid',_0x31a828(0x747),_0x31a828(0x9d)]),Array[_0x31a828(0x18e)](_0x2a2b78[_0x31a828(0x2c5)])&&(_0x41a123[_0x31a828(0x16e)]=_0x2a2b78['customFields'][_0x31a828(0x4b0)](_0x57d256=>({'_id':_0x57d256['_id'],'value':_0x57d256[_0x31a828(0x24b)]}))),_0x397a22[_0x31a828(0xa5)][_0x31a828(0x747)]!==void 0x0)){let _0xdc98fa=await this[_0x31a828(0x782)][_0x31a828(0x34b)][_0x31a828(0x2ba)]({'where':{}},this[_0x31a828(0x21b)][_0x31a828(0x228)]),_0x33031a=new Set(_0x397a22['leadInfo'][_0x31a828(0x747)]||[]),_0x5c29eb=new Set(_0x397a22['leadInfo'][_0x31a828(0x747)]),_0x2286e6=new Set(_0xdc98fa['map'](_0x201208=>_0x201208[_0x31a828(0x443)])),_0x56a24a=[..._0x5c29eb][_0x31a828(0x635)](_0x4bc60a=>!_0x33031a[_0x31a828(0x130)](_0x4bc60a)&&_0x2286e6['has'](_0x4bc60a)),_0x1f5e22=[..._0x33031a][_0x31a828(0x635)](_0x1e99ec=>!_0x5c29eb['has'](_0x1e99ec));if(_0x41a123[_0x31a828(0x793)]=[..._0x33031a],_0x552279&&!_0x552279['imported']){for(let _0x269560 of _0x56a24a)await this[_0x31a828(0x530)](_0x269560,_0x397a22[_0x31a828(0x443)]),_0x33031a[_0x31a828(0x4b1)](_0x269560);for(let _0x4662b3 of _0x1f5e22)await this[_0x31a828(0x5ae)](_0x4662b3,_0x397a22[_0x31a828(0x443)]),_0x33031a[_0x31a828(0x2d6)](_0x4662b3);}}if(_0x397a22['unreadcount']!==void 0x0&&(_0x41a123[_0x31a828(0x503)]=Number(_0x397a22[_0x31a828(0x503)])),Object[_0x31a828(0x77d)](_0x41a123)[_0x31a828(0x415)]===0x0)throw new Error(_0x31a828(0x432));let _0x3c48fc=await this['repository'][_0x31a828(0x316)][_0x31a828(0xc6)]({'where':{'_id':_0x397a22[_0x31a828(0x443)]}},_0x41a123,this[_0x31a828(0x21b)][_0x31a828(0x228)]);return _0x3c48fc&&q(this[_0x31a828(0x5b1)],'chats',{'chat':_0x3c48fc}),_0x3c48fc?(this[_0x31a828(0x664)]['verbose'](this[_0x31a828(0x5b1)]+'\x20('+this[_0x31a828(0x21b)]['wuid']+_0x31a828(0x46a)+JSON['stringify'](_0x3c48fc,null,0x2)),_0x3c48fc):{'message':_0x31a828(0x697)};}catch(_0x53b5c6){let _0x400fd9='Erro\x20ao\x20editar\x20o\x20chat',_0x2ef235=_0x53b5c6 instanceof Error?_0x53b5c6[_0x31a828(0xab)]:typeof _0x53b5c6==_0x31a828(0x2b9)?JSON[_0x31a828(0x52f)](_0x53b5c6):_0x53b5c6,_0x47baec=_0x400fd9+':\x20'+_0x2ef235;throw this[_0x31a828(0x664)]['error'](this[_0x31a828(0x5b1)]+'\x20('+this[_0x31a828(0x21b)]['wuid']+'):\x20'+_0x47baec),new m(_0x47baec);}}async['AddChatLabel'](_0x5e913d,_0xcd47da){const _0x349962=a0_0x4a47c0;try{await this[_0x349962(0x29a)]['addChatLabel'](_0xcd47da,_0x5e913d),this[_0x349962(0x664)]['info'](this[_0x349962(0x5b1)]+'\x20('+this[_0x349962(0x21b)]['wuid']+_0x349962(0x556)+_0x5e913d+_0x349962(0x3e2)+_0xcd47da+_0x349962(0x3d4));}catch(_0x5d79dc){this[_0x349962(0x664)][_0x349962(0x5f8)](_0x349962(0x4ef)+_0x5e913d+_0x349962(0x37e)+_0xcd47da+':\x20'+_0x5d79dc);}}async[a0_0x4a47c0(0x5ae)](_0x584582,_0x15db67){const _0x56ea22=a0_0x4a47c0;try{await this['client'][_0x56ea22(0x32c)](_0x15db67,_0x584582),this[_0x56ea22(0x664)][_0x56ea22(0x363)](this['instanceName']+'\x20('+this[_0x56ea22(0x21b)][_0x56ea22(0x228)]+_0x56ea22(0x556)+_0x584582+_0x56ea22(0x116)+_0x15db67+_0x56ea22(0x3d4));}catch(_0x489cc8){this[_0x56ea22(0x664)][_0x56ea22(0x5f8)]('Erro\x20ao\x20remover\x20label\x20'+_0x584582+_0x56ea22(0x187)+_0x15db67+':\x20'+_0x489cc8);}}async['updateAgent'](_0x230fd6){const _0x1de04e=a0_0x4a47c0;try{let _0x3b6a09=await this[_0x1de04e(0x782)][_0x1de04e(0x2c8)][_0x1de04e(0x39a)](this[_0x1de04e(0x21b)]['wuid']),_0x3bba60=_0x230fd6[_0x1de04e(0x443)]?_0x3b6a09[_0x1de04e(0x7d0)][_0x1de04e(0x544)](_0x2e8e40=>_0x2e8e40[_0x1de04e(0x443)]===_0x230fd6[_0x1de04e(0x443)]):-0x1;if(_0x230fd6['delete']&&_0x3bba60>-0x1)_0x3b6a09[_0x1de04e(0x7d0)][_0x1de04e(0x4a9)](_0x3bba60,0x1);else{if(_0x3bba60>-0x1){let _0x16d5b2=_0x3b6a09[_0x1de04e(0x7d0)][_0x3bba60];_0x230fd6['fone']&&(_0x16d5b2[_0x1de04e(0x49b)]=_0x230fd6[_0x1de04e(0x49b)]),_0x230fd6[_0x1de04e(0x25b)]&&(_0x16d5b2[_0x1de04e(0x25b)]=_0x230fd6[_0x1de04e(0x25b)]),_0x230fd6[_0x1de04e(0x35d)]&&(_0x16d5b2[_0x1de04e(0x35d)]=_0x230fd6['email']),_0x230fd6[_0x1de04e(0x3d8)]&&(_0x16d5b2['role']=_0x230fd6[_0x1de04e(0x3d8)]);}else _0x3b6a09['agents'][_0x1de04e(0x723)]({'_id':_0x230fd6[_0x1de04e(0x443)]||new fe['default'][(_0x1de04e(0x75a))]['ObjectId']()[_0x1de04e(0x13c)](),'fone':_0x230fd6['fone'],'name':_0x230fd6[_0x1de04e(0x25b)],'email':_0x230fd6[_0x1de04e(0x35d)],'role':_0x230fd6[_0x1de04e(0x3d8)]});}let _0x1ab8ed={'agents':_0x3b6a09[_0x1de04e(0x7d0)]},_0x2a3248=await this[_0x1de04e(0x782)][_0x1de04e(0x2c8)][_0x1de04e(0x7c2)](_0x1ab8ed,this[_0x1de04e(0x21b)][_0x1de04e(0x228)]);return this['AutomateSystem']=_0x2a3248,this['logger'][_0x1de04e(0x7bf)](this[_0x1de04e(0x5b1)]+'\x20('+this[_0x1de04e(0x21b)][_0x1de04e(0x228)]+_0x1de04e(0x34a)),this[_0x1de04e(0x664)][_0x1de04e(0x7bf)](this[_0x1de04e(0x5b1)]+'\x20('+this[_0x1de04e(0x21b)]['wuid']+_0x1de04e(0x46a)+this['AutomateSystem']),_0x2a3248;}catch(_0x2a90ca){let _0x38e4a1=_0x1de04e(0x3e1),_0x3287b4=_0x2a90ca instanceof Error?_0x2a90ca[_0x1de04e(0xab)]:typeof _0x2a90ca=='object'?JSON[_0x1de04e(0x52f)](_0x2a90ca):_0x2a90ca,_0x4d0c8b=_0x38e4a1+':\x20'+_0x3287b4;throw this['logger']['error'](this[_0x1de04e(0x5b1)]+'\x20('+this[_0x1de04e(0x21b)]['wuid']+'):\x20'+_0x4d0c8b),new m(_0x4d0c8b);}}async[a0_0x4a47c0(0x640)](_0x56b898){const _0x4f3526=a0_0x4a47c0;try{let _0x2ddbaf=await this[_0x4f3526(0x782)][_0x4f3526(0x2c8)][_0x4f3526(0x39a)](this['instance'][_0x4f3526(0x228)]),_0x53b35a=_0x56b898[_0x4f3526(0x443)]?_0x2ddbaf[_0x4f3526(0x2c5)][_0x4f3526(0x544)](_0x9b3b80=>_0x9b3b80[_0x4f3526(0x443)]===_0x56b898['_id']):-0x1,_0x5f0f1e=!0x1,_0x3d544f=_0x2ddbaf[_0x4f3526(0x2c5)][_0x4f3526(0x34e)](_0x290eeb=>_0x290eeb[_0x4f3526(0x28e)]===_0x56b898[_0x4f3526(0x28e)]);if(_0x56b898['delete']&&_0x53b35a>-0x1)_0x2ddbaf[_0x4f3526(0x2c5)]['splice'](_0x53b35a,0x1),_0x5f0f1e=!0x0;else{if(_0x53b35a>-0x1){if(_0x2ddbaf[_0x4f3526(0x2c5)][_0x4f3526(0x34e)](_0x3a1c09=>_0x3a1c09[_0x4f3526(0x25b)]===_0x56b898['name']&&_0x3a1c09[_0x4f3526(0x443)]!==_0x56b898[_0x4f3526(0x443)]))throw new Error(_0x4f3526(0xf8));let _0x42f790=_0x2ddbaf[_0x4f3526(0x2c5)][_0x53b35a];_0x56b898['order']&&(_0x3d544f||!Number[_0x4f3526(0x502)](_0x56b898[_0x4f3526(0x28e)]))&&(_0x42f790[_0x4f3526(0x28e)]=_0x56b898[_0x4f3526(0x28e)],_0x5f0f1e=!0x0),_0x56b898[_0x4f3526(0x25b)]&&(_0x42f790[_0x4f3526(0x25b)]=_0x56b898['name']);}else{if(_0x2ddbaf[_0x4f3526(0x2c5)][_0x4f3526(0x34e)](_0x30a304=>_0x30a304[_0x4f3526(0x25b)]===_0x56b898[_0x4f3526(0x25b)]&&_0x30a304[_0x4f3526(0x443)]!==_0x56b898['_id']))throw new Error(_0x4f3526(0xf8));_0x2ddbaf[_0x4f3526(0x2c5)][_0x4f3526(0x723)]({'_id':_0x56b898[_0x4f3526(0x443)]||new fe[(_0x4f3526(0x339))][(_0x4f3526(0x75a))][(_0x4f3526(0x26b))]()[_0x4f3526(0x13c)](),'order':_0x56b898['order'],'name':_0x56b898[_0x4f3526(0x25b)]}),_0x5f0f1e=!0x0;}}if(_0x5f0f1e){_0x2ddbaf['customFields'][_0x4f3526(0x6f0)]((_0x89135d,_0x263fed)=>_0x89135d[_0x4f3526(0x28e)]>_0x263fed['order']?0x1:_0x263fed[_0x4f3526(0x28e)]>_0x89135d['order']?-0x1:0x0);for(let _0xafc7d9=0x0;_0xafc7d9<_0x2ddbaf[_0x4f3526(0x2c5)][_0x4f3526(0x415)];_0xafc7d9++)_0x2ddbaf[_0x4f3526(0x2c5)][_0xafc7d9][_0x4f3526(0x28e)]=_0xafc7d9+0x1;}let _0x34d996=await this[_0x4f3526(0x782)][_0x4f3526(0x2c8)][_0x4f3526(0x7c2)](_0x2ddbaf,this['instance']['wuid']);return this[_0x4f3526(0x22b)]=_0x34d996,this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x4f3526(0x21b)][_0x4f3526(0x228)]+_0x4f3526(0x5cd)),this[_0x4f3526(0x664)][_0x4f3526(0x7bf)](this['instanceName']+'\x20('+this[_0x4f3526(0x21b)][_0x4f3526(0x228)]+_0x4f3526(0x46a)+this['AutomateSystem']),_0x34d996;}catch(_0x3e4fd3){let _0x359864='Erro\x20ao\x20tentar\x20updateCustomFields',_0x314a99=_0x3e4fd3 instanceof Error?_0x3e4fd3['message']:typeof _0x3e4fd3==_0x4f3526(0x2b9)?JSON[_0x4f3526(0x52f)](_0x3e4fd3):_0x3e4fd3,_0x134e0f=_0x359864+':\x20'+_0x314a99;throw this['logger'][_0x4f3526(0x5f8)](this[_0x4f3526(0x5b1)]+'\x20('+this[_0x4f3526(0x21b)][_0x4f3526(0x228)]+_0x4f3526(0x46a)+_0x134e0f),new m(_0x134e0f);}}async[a0_0x4a47c0(0x652)](_0x1fbe36){const _0x33816f=a0_0x4a47c0;try{let _0x22ab6e=await this[_0x33816f(0x782)][_0x33816f(0x2c8)][_0x33816f(0x39a)](this['instance'][_0x33816f(0x228)]),_0x5c4c0a=_0x22ab6e?.[_0x33816f(0x45b)]?.[_0x33816f(0x544)](_0x28ec97=>_0x28ec97[_0x33816f(0x443)]===_0x1fbe36?.[_0x33816f(0x443)]);if(_0x1fbe36?.[_0x33816f(0x2d6)])_0x5c4c0a>-0x1&&_0x22ab6e?.[_0x33816f(0x45b)]?.[_0x33816f(0x4a9)](_0x5c4c0a,0x1);else{if(_0x5c4c0a>-0x1){let _0x5b2aa0=_0x22ab6e[_0x33816f(0x45b)][_0x5c4c0a];_0x5b2aa0[_0x33816f(0x28e)]=_0x1fbe36?.[_0x33816f(0x28e)]||_0x5b2aa0[_0x33816f(0x28e)],_0x5b2aa0[_0x33816f(0x144)]=_0x1fbe36?.[_0x33816f(0x144)]||_0x5b2aa0[_0x33816f(0x144)],_0x5b2aa0[_0x33816f(0xab)]=_0x1fbe36?.[_0x33816f(0xab)]||_0x5b2aa0['message'];}else{let _0x15c420={'_id':_0x1fbe36?.[_0x33816f(0x443)]||new fe[(_0x33816f(0x339))][(_0x33816f(0x75a))][(_0x33816f(0x26b))]()[_0x33816f(0x13c)](),'order':_0x1fbe36?.[_0x33816f(0x28e)],'command':_0x1fbe36?.[_0x33816f(0x144)],'message':_0x1fbe36?.[_0x33816f(0xab)]};_0x22ab6e?.[_0x33816f(0x45b)]?.[_0x33816f(0x723)](_0x15c420);}}_0x22ab6e?.[_0x33816f(0x45b)]?.['sort']((_0x395af1,_0x58cb45)=>_0x395af1[_0x33816f(0x28e)]-_0x58cb45[_0x33816f(0x28e)]);let _0x2d6dd9=await this[_0x33816f(0x782)]['automateSystem'][_0x33816f(0x7c2)](_0x22ab6e,this['instance'][_0x33816f(0x228)]);return this[_0x33816f(0x22b)]=_0x2d6dd9,this[_0x33816f(0x664)][_0x33816f(0x7bf)](this['instanceName']+'\x20('+this[_0x33816f(0x21b)][_0x33816f(0x228)]+_0x33816f(0x5cd)),_0x2d6dd9;}catch(_0x5a5012){let _0x5901b4=_0x33816f(0x94),_0x599f3a=_0x5a5012 instanceof Error?_0x5a5012[_0x33816f(0xab)]:typeof _0x5a5012==_0x33816f(0x2b9)?JSON[_0x33816f(0x52f)](_0x5a5012):_0x5a5012,_0x455ecd=_0x5901b4+':\x20'+_0x599f3a;throw this[_0x33816f(0x664)][_0x33816f(0x5f8)](this[_0x33816f(0x5b1)]+'\x20('+this[_0x33816f(0x21b)]['wuid']+_0x33816f(0x46a)+_0x455ecd),new m(_0x455ecd);}}async[a0_0x4a47c0(0x1cf)](_0x3b64a1){const _0x5e8839=a0_0x4a47c0;try{let _0x24b942=await this[_0x5e8839(0x782)][_0x5e8839(0x2c8)][_0x5e8839(0x39a)](this[_0x5e8839(0x21b)][_0x5e8839(0x228)]);if(!_0x24b942)throw new Error(_0x5e8839(0x409));let _0x11be93={'_id':_0x24b942[_0x5e8839(0x443)],'flowConfig':{'enabled':_0x3b64a1[_0x5e8839(0x231)]??_0x24b942[_0x5e8839(0x79b)]['enabled'],'ignoreGroups':_0x3b64a1[_0x5e8839(0x555)]??_0x24b942[_0x5e8839(0x79b)][_0x5e8839(0x555)],'stopConversation':_0x3b64a1['stopConversation']['trim']()??_0x24b942[_0x5e8839(0x79b)]['stopConversation'][_0x5e8839(0x3a3)](),'stopMinutes':_0x3b64a1[_0x5e8839(0x414)]??_0x24b942[_0x5e8839(0x79b)][_0x5e8839(0x414)],'stopWhenYouSendMsg':_0x3b64a1[_0x5e8839(0x2de)]??_0x24b942[_0x5e8839(0x79b)][_0x5e8839(0x2de)]}},_0x3e07a5=await this[_0x5e8839(0x782)][_0x5e8839(0x2c8)][_0x5e8839(0x7c2)](_0x11be93,this[_0x5e8839(0x21b)][_0x5e8839(0x228)]);return this[_0x5e8839(0x22b)]=_0x3e07a5,this['logger']['verbose'](this[_0x5e8839(0x5b1)]+'\x20('+this['instance']['wuid']+_0x5e8839(0x34a)),this[_0x5e8839(0x664)][_0x5e8839(0x7bf)](this['instanceName']+'\x20('+this[_0x5e8839(0x21b)][_0x5e8839(0x228)]+'):\x20'+this[_0x5e8839(0x22b)]),setTimeout(()=>this[_0x5e8839(0x356)](),0x7d0),_0x3e07a5;}catch(_0x523714){let _0x2e9995=_0x5e8839(0x3c4),_0x94afb4=_0x523714 instanceof Error?_0x523714['message']:typeof _0x523714==_0x5e8839(0x2b9)?JSON[_0x5e8839(0x52f)](_0x523714):_0x523714,_0xc1a6be=_0x2e9995+':\x20'+_0x94afb4;throw this['logger'][_0x5e8839(0x5f8)](this['instanceName']+'\x20('+this[_0x5e8839(0x21b)][_0x5e8839(0x228)]+_0x5e8839(0x46a)+_0xc1a6be),new m(_0xc1a6be);}}async[a0_0x4a47c0(0x739)](){const _0x50fe61=a0_0x4a47c0;try{let _0x4e08fb=await this[_0x50fe61(0x782)]['automateSystem'][_0x50fe61(0x39a)](this['instance'][_0x50fe61(0x228)]);return this[_0x50fe61(0x22b)]=_0x4e08fb,_0x4e08fb;}catch(_0x27a104){let _0x1d7a16='Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem',_0x43b8aa=_0x27a104 instanceof Error?_0x27a104[_0x50fe61(0xab)]:typeof _0x27a104=='object'?JSON['stringify'](_0x27a104):_0x27a104,_0x1f7e45=_0x1d7a16+':\x20'+_0x43b8aa;throw this[_0x50fe61(0x664)][_0x50fe61(0x5f8)](this[_0x50fe61(0x5b1)]+'\x20('+this[_0x50fe61(0x21b)][_0x50fe61(0x228)]+'):\x20'+_0x1f7e45),new m(_0x1f7e45);}}async['setRestartTimeout'](){const _0x459392=a0_0x4a47c0;this[_0x459392(0x21b)]['ScheduleMessage'][_0x459392(0x1ba)]&&clearTimeout(this[_0x459392(0x21b)]['ScheduleMessage']['timeout']),this[_0x459392(0x21b)][_0x459392(0x307)][_0x459392(0x1ba)]=setTimeout(()=>{const _0x1dca42=_0x459392;this[_0x1dca42(0x7f7)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x4a47c0(0x7f7)](){const _0x29915c=a0_0x4a47c0;Date[_0x29915c(0x331)]()-this['instance'][_0x29915c(0x307)][_0x29915c(0x7f4)]>=0x1d4c0&&(this[_0x29915c(0x664)][_0x29915c(0x7bf)](this[_0x29915c(0x5b1)]+'\x20('+this[_0x29915c(0x21b)][_0x29915c(0x228)]+'):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.'),this[_0x29915c(0x21b)][_0x29915c(0x307)][_0x29915c(0x6af)]=null,this[_0x29915c(0x21b)]['ScheduleMessage'][_0x29915c(0x7f4)]=0x0,this[_0x29915c(0x21b)][_0x29915c(0x307)][_0x29915c(0x431)]=0x0,this[_0x29915c(0x23d)]=null,await this['scheduleNextCheck']());}async[a0_0x4a47c0(0x356)](){const _0x1dbfb6=a0_0x4a47c0;let _0x124e2f=!0x1;this[_0x1dbfb6(0x67c)]=[],this['processUUID']=(0x0,X['v4'])(),await this['transformScheduledMessagesByType']();let _0x2b211e=()=>{const _0x2f9c4c=_0x1dbfb6;this['logger']['warn'](this[_0x2f9c4c(0x5b1)]+'\x20('+this[_0x2f9c4c(0x21b)]['wuid']+_0x2f9c4c(0x77e)+this[_0x2f9c4c(0x21b)][_0x2f9c4c(0x307)][_0x2f9c4c(0x6af)]?.[_0x2f9c4c(0x443)]+_0x2f9c4c(0x369));},_0x3d0a81=async()=>{const _0x2576a2=_0x1dbfb6;this['logger']['warn'](this[_0x2576a2(0x5b1)]+'\x20('+this['instance']['wuid']+'):\x20Procurando\x20mensagens\x20para\x20envio');let _0x2cafe5=new Date(Date[_0x2576a2(0x331)]()-0xc*0x3c*0x3c*0x3e8),_0x5a6d74={'where':{'status':{'$in':['scheduled','sending']},'$or':[{'when':{'$lte':new Date(),'$gte':_0x2cafe5}},{'when':0x0}]}},_0x2200f6=await this[_0x2576a2(0x782)]['scheduleMessage'][_0x2576a2(0x2ba)](_0x5a6d74,this[_0x2576a2(0x21b)]['wuid']);return this[_0x2576a2(0x664)][_0x2576a2(0x624)](this[_0x2576a2(0x5b1)]+'\x20('+this[_0x2576a2(0x21b)][_0x2576a2(0x228)]+_0x2576a2(0x138)+_0x2200f6[_0x2576a2(0x415)]),_0x2200f6;},_0x8a977d=()=>this[_0x1dbfb6(0x67c)][_0x1dbfb6(0x415)]===0x0?null:this[_0x1dbfb6(0x67c)][_0x1dbfb6(0x59c)]((_0xfd3523,_0x139259)=>(_0xfd3523[_0x1dbfb6(0x28e)]??Number[_0x1dbfb6(0x2b8)])<(_0x139259['order']??Number[_0x1dbfb6(0x2b8)])?_0xfd3523:_0x139259,this[_0x1dbfb6(0x67c)][0x0]),_0x5b8bd7=async _0x11daec=>{const _0x4d61ec=_0x1dbfb6;let _0x4e9b27=Math[_0x4d61ec(0x771)](Math[_0x4d61ec(0x3bc)]()*0x1389)+0xbb8;for(let _0x556af9 of _0x11daec){let _0x2ede34={'_id':_0x556af9['_id'],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date['now']()-0x2710}}]},_0x724d4f={'startSend':Date[_0x4d61ec(0x331)](),'processUUID':this[_0x4d61ec(0x23d)],'status':_0x4d61ec(0x687)};if(!await this[_0x4d61ec(0x782)][_0x4d61ec(0x654)][_0x4d61ec(0xc6)](_0x2ede34,_0x724d4f,this[_0x4d61ec(0x21b)]['wuid']))return;if(!this[_0x4d61ec(0x21b)][_0x4d61ec(0x307)][_0x4d61ec(0x1e8)]){this[_0x4d61ec(0x664)][_0x4d61ec(0x624)](this[_0x4d61ec(0x5b1)]+'\x20('+this[_0x4d61ec(0x21b)][_0x4d61ec(0x228)]+'):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected');break;}for(this[_0x4d61ec(0x67c)]=_0x556af9[_0x4d61ec(0x50b)][_0x4d61ec(0x635)](_0x13de95=>!_0x13de95[_0x4d61ec(0x9f)]);this[_0x4d61ec(0x67c)][_0x4d61ec(0x415)]>0x0||!_0x124e2f;){await this[_0x4d61ec(0x2c1)]();let _0x34075d=_0x8a977d();if(!_0x34075d){_0x124e2f=!0x0;break;}let _0x2e457c=_0x556af9['messages']['find'](_0x5da4f6=>_0x5da4f6[_0x4d61ec(0x443)]===_0x34075d[_0x4d61ec(0x443)]);if(!_0x2e457c){_0x124e2f=!0x0;break;}if(this[_0x4d61ec(0x21b)][_0x4d61ec(0x307)][_0x4d61ec(0x7f4)]=Date[_0x4d61ec(0x331)](),_0x2e457c[_0x4d61ec(0x9f)]){this[_0x4d61ec(0x664)][_0x4d61ec(0x624)](this[_0x4d61ec(0x5b1)]+'\x20('+this[_0x4d61ec(0x21b)]['wuid']+_0x4d61ec(0x57b)+_0x2e457c[_0x4d61ec(0x1d0)]+_0x4d61ec(0x695)),this['pendingMessages']=this[_0x4d61ec(0x67c)][_0x4d61ec(0x635)](_0x41c071=>_0x41c071[_0x4d61ec(0x443)]!==_0x2e457c[_0x4d61ec(0x443)]);continue;}if(!this[_0x4d61ec(0x21b)][_0x4d61ec(0x307)]['isConnected']){this['logger'][_0x4d61ec(0x624)](this[_0x4d61ec(0x5b1)]+'\x20('+this[_0x4d61ec(0x21b)][_0x4d61ec(0x228)]+_0x4d61ec(0xc8));break;}if(!this[_0x4d61ec(0x21b)][_0x4d61ec(0x307)][_0x4d61ec(0x6af)]){this[_0x4d61ec(0x664)]['warn'](this[_0x4d61ec(0x5b1)]+'\x20('+this['instance'][_0x4d61ec(0x228)]+_0x4d61ec(0x13f)+_0x556af9[_0x4d61ec(0x443)]+_0x4d61ec(0x573));break;}if(_0x2e457c[_0x4d61ec(0x311)]===_0x4d61ec(0x4e4)&&!this[_0x4d61ec(0x22b)]?.['flowConfig'][_0x4d61ec(0x231)]){this[_0x4d61ec(0x664)][_0x4d61ec(0x5f8)](this[_0x4d61ec(0x5b1)]+'\x20('+this[_0x4d61ec(0x21b)][_0x4d61ec(0x228)]+_0x4d61ec(0x159));break;}let _0x58df9b={'idControl':_0x2e457c[_0x4d61ec(0x443)],'remoteJid':_0x2e457c[_0x4d61ec(0x1d0)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date['now']()},_0x3a14bd=null;try{this[_0x4d61ec(0x664)]['warn'](this[_0x4d61ec(0x5b1)]+'\x20('+this[_0x4d61ec(0x21b)][_0x4d61ec(0x228)]+_0x4d61ec(0x302)+_0x2e457c[_0x4d61ec(0x1d0)]);let _0x5ae99b=await this['SendScheduleMessage'](_0x2e457c[_0x4d61ec(0x1d0)],_0x2e457c);_0x58df9b[_0x4d61ec(0x5f8)]=_0x5ae99b[_0x4d61ec(0x5f8)],_0x58df9b['id']=_0x5ae99b[_0x4d61ec(0x5f8)]?null:_0x5ae99b['id'],_0x58df9b[_0x4d61ec(0x60b)]=_0x5ae99b[_0x4d61ec(0x5f8)]?_0x5ae99b['detail']?_0x5ae99b[_0x4d61ec(0x43b)][_0x4d61ec(0x13c)]():'':null;let _0x440f37=_0x556af9[_0x4d61ec(0x50b)][_0x4d61ec(0x544)](_0x11c08c=>_0x11c08c[_0x4d61ec(0x443)]===_0x2e457c['_id']);_0x440f37!==-0x1&&(_0x556af9[_0x4d61ec(0x50b)][_0x440f37][_0x4d61ec(0x9f)]=!0x0);let _0x52459e={'$push':{'messagesSend':_0x58df9b},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x5543a5=[{'elem._id':_0x2e457c[_0x4d61ec(0x443)]}];if(this['logger'][_0x4d61ec(0x624)](this[_0x4d61ec(0x5b1)]+'\x20('+this[_0x4d61ec(0x21b)][_0x4d61ec(0x228)]+'):\x20Atualizando\x20status\x20da\x20mensagem\x20'+_0x2e457c[_0x4d61ec(0x443)]),_0x3a14bd=await this[_0x4d61ec(0x782)]['scheduleMessage'][_0x4d61ec(0xc6)]({'_id':_0x556af9[_0x4d61ec(0x443)]},_0x52459e,this['instance'][_0x4d61ec(0x228)],{'arrayFilters':_0x5543a5}),_0x5ae99b[_0x4d61ec(0x5f8)]){this[_0x4d61ec(0x664)][_0x4d61ec(0x5f8)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4d61ec(0x536)+_0x5ae99b[_0x4d61ec(0x43b)]);continue;}let _0xa65dd2=this['getDelay'](_0x556af9[_0x4d61ec(0x678)],_0x556af9[_0x4d61ec(0x76b)]);await this['sleep'](_0xa65dd2);}catch(_0x34dfcd){this[_0x4d61ec(0x664)][_0x4d61ec(0x5f8)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20'+_0x2e457c[_0x4d61ec(0x1d0)]+':\x20'+(_0x34dfcd instanceof Error?_0x34dfcd[_0x4d61ec(0xab)]:JSON[_0x4d61ec(0x52f)](_0x34dfcd,null,0x2))),_0x58df9b['error']=!0x0,_0x58df9b['error_log']=_0x34dfcd[_0x4d61ec(0xab)];let _0x26e186=_0x556af9['messages'][_0x4d61ec(0x544)](_0x237531=>_0x237531[_0x4d61ec(0x443)]===_0x2e457c[_0x4d61ec(0x443)]);_0x26e186!==-0x1&&(_0x556af9['messages'][_0x26e186][_0x4d61ec(0x9f)]=!0x0);let _0xbe4c8d={'$push':{'messagesSend':_0x58df9b},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x9d4410=[{'elem._id':_0x2e457c[_0x4d61ec(0x443)]}];this['logger'][_0x4d61ec(0x624)](this[_0x4d61ec(0x5b1)]+'\x20('+this[_0x4d61ec(0x21b)][_0x4d61ec(0x228)]+_0x4d61ec(0x5d2)+_0x2e457c['_id']),_0x3a14bd=await this[_0x4d61ec(0x782)][_0x4d61ec(0x654)][_0x4d61ec(0xc6)]({'_id':_0x556af9[_0x4d61ec(0x443)]},_0xbe4c8d,this[_0x4d61ec(0x21b)]['wuid'],{'arrayFilters':_0x9d4410});}finally{if(_0x3a14bd&&_0x3a14bd[_0x4d61ec(0x7ae)]===_0x4d61ec(0x123)){this[_0x4d61ec(0x664)][_0x4d61ec(0x624)](this[_0x4d61ec(0x5b1)]+'\x20('+this[_0x4d61ec(0x21b)][_0x4d61ec(0x228)]+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0x2e457c['_id']+_0x4d61ec(0x54c));break;}let _0x24ccd9=_0x3a14bd[_0x4d61ec(0x50b)][_0x4d61ec(0x2ba)](_0x2da0f5=>_0x2da0f5[_0x4d61ec(0x443)]===_0x2e457c['_id']);if(_0x24ccd9&&!_0x24ccd9[_0x4d61ec(0x9f)]){let _0x4ea806={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x13cb81=[{'elem._id':_0x2e457c[_0x4d61ec(0x443)]}];await this[_0x4d61ec(0x782)][_0x4d61ec(0x654)][_0x4d61ec(0xc6)]({'_id':_0x3a14bd['_id']},_0x4ea806,this[_0x4d61ec(0x21b)][_0x4d61ec(0x228)],{'arrayFilters':_0x13cb81});}if(this[_0x4d61ec(0x67c)]=_0x3a14bd['messages']['filter'](_0x36e8be=>!_0x36e8be[_0x4d61ec(0x9f)]),_0x124e2f=this[_0x4d61ec(0x67c)][_0x4d61ec(0x415)]===0x0,_0x3a14bd[_0x4d61ec(0x23d)]!==this[_0x4d61ec(0x23d)]){this[_0x4d61ec(0x664)][_0x4d61ec(0x624)](this[_0x4d61ec(0x5b1)]+'\x20('+this[_0x4d61ec(0x21b)][_0x4d61ec(0x228)]+_0x4d61ec(0x68c));return;}this[_0x4d61ec(0x21b)][_0x4d61ec(0x307)]['processingGroup']=_0x3a14bd;}}this[_0x4d61ec(0x67c)]=[];let _0x40b941=await this[_0x4d61ec(0x782)][_0x4d61ec(0x654)]['findById'](_0x556af9['_id'],this[_0x4d61ec(0x21b)]['wuid']);if(_0x124e2f=_0x40b941[_0x4d61ec(0x50b)][_0x4d61ec(0x621)](_0x1547d6=>_0x1547d6['triedToSend']),_0x124e2f&&_0x40b941[_0x4d61ec(0x7ae)]!=='stopped'){let _0x5cbd7f={'$set':{'status':_0x4d61ec(0xc9)}};await this[_0x4d61ec(0x782)][_0x4d61ec(0x654)][_0x4d61ec(0x15a)](_0x40b941[_0x4d61ec(0x443)],_0x5cbd7f,this['instance'][_0x4d61ec(0x228)]);}await new Promise(_0x439a74=>setTimeout(_0x439a74,_0x4e9b27)),global['gc']?global['gc']():console[_0x4d61ec(0x624)](_0x4d61ec(0x4db));}this[_0x4d61ec(0x23d)]=null;},_0x371331=async()=>{const _0x34da66=_0x1dbfb6;let _0x27c40d=new Date(Date[_0x34da66(0x331)]()-0x2932e00),_0x591cb8={'where':{'status':_0x34da66(0x4be),'$or':[{'when':{'$lte':new Date(),'$gte':_0x27c40d}},{'when':0x0}]}},_0x43e02b=await this[_0x34da66(0x782)][_0x34da66(0x654)][_0x34da66(0xb1)](_0x591cb8,this['instance'][_0x34da66(0x228)]);_0x43e02b&&_0x43e02b[_0x34da66(0x3d5)]-Date['now']()<=0x6ddd00?this[_0x34da66(0x21b)]['ScheduleMessage'][_0x34da66(0x431)]=_0x43e02b['when']-Date[_0x34da66(0x331)]():this[_0x34da66(0x21b)][_0x34da66(0x307)][_0x34da66(0x431)]=(0x3c+Math[_0x34da66(0x771)](Math['random']()*0x3c))*0x3c*0x3e8,this[_0x34da66(0x21b)][_0x34da66(0x307)][_0x34da66(0x431)]=Math[_0x34da66(0x108)](this[_0x34da66(0x21b)][_0x34da66(0x307)][_0x34da66(0x431)],0x1*0x2*0x3e8);let _0x278f72=Math['round'](this['instance'][_0x34da66(0x307)][_0x34da66(0x431)]/0xea60);if(_0x43e02b){let _0x28b8be=new Date(_0x43e02b[_0x34da66(0x3d5)])[_0x34da66(0x5dc)]();this[_0x34da66(0x664)][_0x34da66(0x624)](this['instanceName']+'\x20('+this[_0x34da66(0x21b)][_0x34da66(0x228)]+_0x34da66(0x70c)+_0x28b8be+_0x34da66(0x318)+_0x278f72+_0x34da66(0x7f2));}else this[_0x34da66(0x664)][_0x34da66(0x624)](this['instanceName']+'\x20('+this[_0x34da66(0x21b)][_0x34da66(0x228)]+_0x34da66(0x498)+_0x278f72+_0x34da66(0x7f2));setTimeout(()=>this['scheduleNextCheck'](),this['instance'][_0x34da66(0x307)][_0x34da66(0x431)]);};if(this[_0x1dbfb6(0x21b)]['ScheduleMessage'][_0x1dbfb6(0x6af)]){await this[_0x1dbfb6(0x2c1)](),_0x2b211e();return;}if(!this[_0x1dbfb6(0x21b)]['ScheduleMessage']['isConnected']){this[_0x1dbfb6(0x664)][_0x1dbfb6(0x624)](this['instanceName']+'\x20('+this[_0x1dbfb6(0x21b)][_0x1dbfb6(0x228)]+_0x1dbfb6(0x7e6)),this[_0x1dbfb6(0x21b)][_0x1dbfb6(0x307)]['processingGroup']=null,this['instance']['ScheduleMessage']['lastSend']=0x0,this[_0x1dbfb6(0x21b)]['ScheduleMessage'][_0x1dbfb6(0x431)]=0x0;return;}try{let _0x5eeffc=await _0x3d0a81();_0x5eeffc[_0x1dbfb6(0x415)]===0x0?this[_0x1dbfb6(0x664)][_0x1dbfb6(0x624)](this[_0x1dbfb6(0x5b1)]+'\x20('+this[_0x1dbfb6(0x21b)][_0x1dbfb6(0x228)]+_0x1dbfb6(0x469)):(this[_0x1dbfb6(0x21b)][_0x1dbfb6(0x307)][_0x1dbfb6(0x6af)]=_0x5eeffc[0x0],await _0x5b8bd7(_0x5eeffc)),await _0x371331(),this[_0x1dbfb6(0x21b)]['ScheduleMessage']['processingGroup']=null;}catch(_0xcd5b77){this[_0x1dbfb6(0x664)][_0x1dbfb6(0x5f8)](_0x1dbfb6(0x5b2)+(_0xcd5b77 instanceof Error?_0xcd5b77['message']:JSON[_0x1dbfb6(0x52f)](_0xcd5b77,null,0x2)));}}[a0_0x4a47c0(0xa4)](_0xcd89d5,_0x77cd3d){const _0x2cc612=a0_0x4a47c0;return _0xcd89d5=Math['max'](0.5,_0xcd89d5),_0x77cd3d=Math['min'](Math[_0x2cc612(0x108)](0x3,_0x77cd3d),0x78),Math[_0x2cc612(0x771)](Math[_0x2cc612(0x3bc)]()*(_0x77cd3d-_0xcd89d5+0x1)+_0xcd89d5)*0x3e8;}[a0_0x4a47c0(0x155)](_0x13be40){return new Promise(_0x956055=>setTimeout(_0x956055,_0x13be40));}async[a0_0x4a47c0(0x51e)](_0x2b2f3a){const _0x118dd8=a0_0x4a47c0;if(!this[_0x118dd8(0x22b)]&&(await this[_0x118dd8(0x739)](),!this[_0x118dd8(0x22b)]))return null;_0x2b2f3a=this[_0x118dd8(0x117)](_0x2b2f3a);let _0x525805=await this[_0x118dd8(0x782)][_0x118dd8(0x316)][_0x118dd8(0xb1)]({'where':{'_id':_0x2b2f3a}},this[_0x118dd8(0x21b)][_0x118dd8(0x228)]),_0x26fc12={};if(_0x525805&&_0x525805[_0x118dd8(0xa5)]){let _0xb978db=_0x525805['leadInfo'];typeof _0xb978db[_0x118dd8(0x3d0)]==_0x118dd8(0x4c4)&&(_0x26fc12[_0x118dd8(0x3d0)]=_0xb978db[_0x118dd8(0x3d0)]),typeof _0xb978db[_0x118dd8(0x18b)]==_0x118dd8(0x4c4)&&(_0x26fc12[_0x118dd8(0x18b)]=_0xb978db[_0x118dd8(0x18b)]),typeof _0xb978db[_0x118dd8(0x35d)]==_0x118dd8(0x4c4)&&(_0x26fc12[_0x118dd8(0x35d)]=_0xb978db[_0x118dd8(0x35d)]),typeof _0xb978db[_0x118dd8(0x1f6)]==_0x118dd8(0x4c4)&&(_0x26fc12[_0x118dd8(0x1f6)]=_0xb978db[_0x118dd8(0x1f6)]),typeof _0xb978db[_0x118dd8(0x7ae)]=='string'&&(_0x26fc12['status']=_0xb978db[_0x118dd8(0x7ae)]),typeof _0xb978db['notas']==_0x118dd8(0x4c4)&&(_0x26fc12[_0x118dd8(0x6d5)]=_0xb978db['notas']),typeof _0xb978db['responsavelid']==_0x118dd8(0x4c4)&&(_0x26fc12[_0x118dd8(0x2ee)]=_0xb978db[_0x118dd8(0x2ee)]),Array[_0x118dd8(0x18e)](_0xb978db[_0x118dd8(0x24f)])&&(_0x26fc12[_0x118dd8(0x24f)]=_0xb978db[_0x118dd8(0x24f)][_0x118dd8(0x258)](',\x20')),Array['isArray'](_0xb978db['etiquetas'])&&(_0x26fc12[_0x118dd8(0x747)]=_0xb978db[_0x118dd8(0x747)][_0x118dd8(0x258)](',\x20'));}return _0x525805&&_0x525805[_0x118dd8(0xa5)]&&_0x525805['leadInfo']['customFields']&&_0x525805[_0x118dd8(0xa5)][_0x118dd8(0x2c5)][_0x118dd8(0x9e)](_0x3e521c=>{const _0x394f48=_0x118dd8;let _0x3ab5d7=this[_0x394f48(0x22b)]?.[_0x394f48(0x2c5)][_0x394f48(0x2ba)](_0x1f06f0=>_0x1f06f0[_0x394f48(0x443)]===_0x3e521c[_0x394f48(0x443)]);_0x3ab5d7&&(_0x26fc12[_0x3ab5d7[_0x394f48(0x25b)]]=_0x3e521c[_0x394f48(0x24b)]);}),_0x26fc12;}async['replaceVariablesChat'](_0x6bd57c,_0x294ebf){const _0x1e126d=a0_0x4a47c0;try{let _0x985cd5=await this['getVariablesChat'](_0x294ebf);return this['replaceVariables'](_0x6bd57c,_0x985cd5);}catch(_0x561a7f){return this[_0x1e126d(0x664)][_0x1e126d(0x5f8)](_0x1e126d(0x6e6)+_0x294ebf+':\x20'+_0x561a7f),_0x6bd57c;}}async[a0_0x4a47c0(0xad)](){const _0x2381f3=a0_0x4a47c0;let _0x52df9c=async(_0x2948d5,_0x58438d)=>{const _0x278586=a0_0xa65b;let _0x23929b=(await this[_0x278586(0x782)]['scheduleMessage'][_0x278586(0x2ba)]({'where':{'type':_0x2948d5}},this['instance'][_0x278586(0x228)]))[_0x278586(0x4b0)](async _0x507fa5=>{const _0x1930dc=_0x278586;let _0x5c657f=_0x58438d(_0x507fa5),_0x246ecf=_0x32addd=>/^\d+$/['test'](_0x32addd),_0x15f1c3=_0x507fa5[_0x1930dc(0x184)]['filter'](_0x43bac8=>_0x43bac8[_0x1930dc(0x582)](_0x1930dc(0x628))?_0x43bac8[_0x1930dc(0x415)]>0x19:_0x43bac8[_0x1930dc(0x582)](_0x1930dc(0x1c9))?_0x43bac8['length']>0xf:_0x246ecf(_0x43bac8)?_0x43bac8[_0x1930dc(0x415)]>=0xb:!0x1)['map'](_0x2b3a32=>({'_id':(0x0,X['v4'])(),'idSchedule':_0x507fa5[_0x1930dc(0x443)],'type':_0x5c657f,'remoteJid':_0x2b3a32,'flow':_0x507fa5[_0x1930dc(0x36d)],'text':_0x507fa5[_0x1930dc(0xab)]?.['text'],'delay':_0x507fa5['message']?.[_0x1930dc(0x274)],'urlOrBase64':_0x507fa5['message']?.[_0x1930dc(0x3ed)],'linkPreview':_0x507fa5[_0x1930dc(0xab)]?.[_0x1930dc(0x5c9)],'fileName':_0x507fa5[_0x1930dc(0xab)]?.['fileName'],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x1930dc(0x782)][_0x1930dc(0x654)]['updateOneById'](_0x507fa5[_0x1930dc(0x443)],{'$set':{'messages':_0x15f1c3},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this['instance'][_0x1930dc(0x228)]);}catch(_0x3ab249){console[_0x1930dc(0x5f8)](_0x1930dc(0x374)+_0x507fa5[_0x1930dc(0x443)]+':',_0x3ab249);}});await Promise[_0x278586(0x64a)](_0x23929b);};await _0x52df9c(_0x2381f3(0x6ba),_0x28e1cf=>_0x2381f3(0x6ba)),await _0x52df9c(_0x2381f3(0x148),_0x5358d9=>_0x5358d9['message']?.[_0x2381f3(0x400)]||_0x2381f3(0x148)),await _0x52df9c(_0x2381f3(0x217),_0x3a41a9=>_0x2381f3(0x217)),await _0x52df9c(_0x2381f3(0x4e4),_0x98339b=>_0x2381f3(0x4e4)),await _0x52df9c(_0x2381f3(0x2fb),_0x91e00a=>_0x2381f3(0x2fb)),await _0x52df9c(_0x2381f3(0x164),_0x44d760=>_0x2381f3(0x164)),await _0x52df9c(_0x2381f3(0x3fe),_0x5c81c4=>_0x2381f3(0x3fe)),this[_0x2381f3(0x664)][_0x2381f3(0x624)](this[_0x2381f3(0x5b1)]+'\x20('+this['instance']['wuid']+_0x2381f3(0x29e));}async[a0_0x4a47c0(0x2dc)](_0x2d3c0f){const _0x146826=a0_0x4a47c0;try{if(this[_0x146826(0x664)][_0x146826(0x624)](this['instanceName']+'\x20('+this[_0x146826(0x21b)][_0x146826(0x228)]+_0x146826(0x630)),_0x2d3c0f[_0x146826(0x443)]||(_0x2d3c0f[_0x146826(0x443)]=(0x0,X['v4'])()),this[_0x146826(0x21b)][_0x146826(0x307)]['processingGroup']?.[_0x146826(0x443)]===_0x2d3c0f[_0x146826(0x443)]?.[_0x146826(0x13c)]()&&_0x2d3c0f[_0x146826(0x7ae)]!==_0x146826(0x123))throw new Error(_0x146826(0xac));if(_0x2d3c0f[_0x146826(0x2d6)]&&_0x2d3c0f[_0x146826(0x443)]){let _0x4f8dcb=await this[_0x146826(0x782)][_0x146826(0x654)][_0x146826(0x4a5)](_0x2d3c0f['_id'],this[_0x146826(0x21b)][_0x146826(0x228)]);return setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x4f8dcb;}let _0x1de7c3=null;if(_0x2d3c0f['_id']&&(_0x1de7c3=await this[_0x146826(0x782)][_0x146826(0x654)][_0x146826(0x30d)](_0x2d3c0f[_0x146826(0x443)],this[_0x146826(0x21b)][_0x146826(0x228)])),_0x1de7c3){let {_id:_0x4b4e69,owner:_0x5ba118,messages:_0x35f56f,..._0x1760a2}=_0x2d3c0f;if(_0x35f56f){let _0x6dfc9b=_0x35f56f[_0x146826(0x635)](_0x374e9b=>!_0x374e9b[_0x146826(0x443)]),_0x35aab8=_0x35f56f['filter'](_0x1fe579=>_0x1fe579[_0x146826(0x443)]&&!_0x1fe579[_0x146826(0x2d6)]),_0x584146=_0x35f56f['filter'](_0x357bc0=>_0x357bc0[_0x146826(0x443)]&&_0x357bc0[_0x146826(0x2d6)]);if(_0x6dfc9b[_0x146826(0x415)]>0x0&&await this[_0x146826(0x137)](_0x2d3c0f[_0x146826(0x443)],_0x6dfc9b),_0x35aab8['length']>0x0&&await this[_0x146826(0x64c)]({'_id':_0x2d3c0f[_0x146826(0x443)],'messages':_0x35aab8}),_0x584146[_0x146826(0x415)]>0x0){let _0x1891ff=_0x584146[_0x146826(0x4b0)](_0x3d6e0a=>({'updateOne':{'filter':{'_id':_0x2d3c0f[_0x146826(0x443)]},'update':{'$pull':{'messages':{'_id':_0x3d6e0a['_id']}}}}}));await this['repository'][_0x146826(0x654)][_0x146826(0x603)](_0x1891ff,this[_0x146826(0x21b)][_0x146826(0x228)]);}}let _0x12b314={'$set':{..._0x1760a2,'status':_0x2d3c0f[_0x146826(0x7ae)]||_0x1de7c3[_0x146826(0x7ae)]}},_0xb51dcf=await this[_0x146826(0x782)][_0x146826(0x654)][_0x146826(0x15a)](_0x2d3c0f[_0x146826(0x443)],_0x12b314,this[_0x146826(0x21b)][_0x146826(0x228)]);return _0xb51dcf&&(this['reorderMessages'](_0xb51dcf[_0x146826(0x50b)]),await this[_0x146826(0x782)][_0x146826(0x654)][_0x146826(0x15a)](_0xb51dcf[_0x146826(0x443)],{'$set':{'messages':_0xb51dcf[_0x146826(0x50b)]}},this[_0x146826(0x21b)][_0x146826(0x228)])),setTimeout(()=>this[_0x146826(0x356)](),0x7d0),await this[_0x146826(0xad)](),_0xb51dcf;}else{_0x2d3c0f[_0x146826(0x3ab)]=this[_0x146826(0x21b)][_0x146826(0x228)],_0x2d3c0f['messages']&&_0x2d3c0f['messages']['forEach'](_0x5252c1=>{const _0x4a4e4d=_0x146826;_0x5252c1[_0x4a4e4d(0x443)]||(_0x5252c1[_0x4a4e4d(0x443)]=(0x0,X['v4'])()),_0x5252c1[_0x4a4e4d(0x438)]||(_0x5252c1[_0x4a4e4d(0x438)]=_0x2d3c0f['_id']),delete _0x5252c1[_0x4a4e4d(0x9f)];});let _0x3b74ba=await this[_0x146826(0x782)]['scheduleMessage'][_0x146826(0x2db)](_0x2d3c0f,this[_0x146826(0x21b)][_0x146826(0x228)]);return _0x3b74ba&&(this[_0x146826(0x527)](_0x3b74ba[_0x146826(0x50b)]),await this[_0x146826(0x782)]['scheduleMessage'][_0x146826(0x15a)](_0x3b74ba[_0x146826(0x443)],{'$set':{'messages':_0x3b74ba['messages']}},this[_0x146826(0x21b)]['wuid'])),setTimeout(()=>this[_0x146826(0x356)](),0x7d0),_0x3b74ba;}}catch(_0x2cca07){let _0x2508a5=_0x146826(0x174),_0x14d40e=_0x2cca07 instanceof Error?_0x2cca07[_0x146826(0xab)]:typeof _0x2cca07==_0x146826(0x2b9)?JSON[_0x146826(0x52f)](_0x2cca07):_0x2cca07,_0x509bda=_0x2508a5+':\x20'+_0x14d40e;throw this[_0x146826(0x664)]['error'](this[_0x146826(0x5b1)]+'\x20('+this['instance'][_0x146826(0x228)]+_0x146826(0x46a)+_0x509bda),new m(_0x509bda);}}async[a0_0x4a47c0(0x137)](_0x224736,_0xb3966e){const _0x183ac0=a0_0x4a47c0;try{this['logger'][_0x183ac0(0x7bf)](this[_0x183ac0(0x5b1)]+'\x20('+this['instance'][_0x183ac0(0x228)]+_0x183ac0(0x5a7)),_0xb3966e[_0x183ac0(0x9e)](_0x4ede04=>{const _0xee1cfe=_0x183ac0;_0x4ede04['_id']||(_0x4ede04['_id']=(0x0,X['v4'])()),_0x4ede04[_0xee1cfe(0x438)]||(_0x4ede04[_0xee1cfe(0x438)]=_0x224736),delete _0x4ede04[_0xee1cfe(0x9f)];});let _0x2edaa0={'$push':{'messages':{'$each':_0xb3966e}}},_0x47d1c1=await this[_0x183ac0(0x782)][_0x183ac0(0x654)]['updateOneById'](_0x224736,_0x2edaa0,this[_0x183ac0(0x21b)][_0x183ac0(0x228)]);return _0x47d1c1&&(this['reorderMessages'](_0x47d1c1[_0x183ac0(0x50b)]),await this['repository'][_0x183ac0(0x654)][_0x183ac0(0x15a)](_0x47d1c1['_id'],{'$set':{'messages':_0x47d1c1[_0x183ac0(0x50b)]}},this['instance']['wuid'])),_0x47d1c1;}catch(_0x27ea91){let _0x49797f=_0x183ac0(0xca),_0x465e54=_0x27ea91 instanceof Error?_0x27ea91[_0x183ac0(0xab)]:typeof _0x27ea91==_0x183ac0(0x2b9)?JSON[_0x183ac0(0x52f)](_0x27ea91):_0x27ea91,_0x588209=_0x49797f+':\x20'+_0x465e54;throw this[_0x183ac0(0x664)][_0x183ac0(0x5f8)](this['instanceName']+'\x20('+this[_0x183ac0(0x21b)][_0x183ac0(0x228)]+'):\x20'+_0x588209),new m(_0x588209);}}async[a0_0x4a47c0(0x64c)](_0x5731b7){const _0x28f875=a0_0x4a47c0;try{if(this['logger'][_0x28f875(0x7bf)](this[_0x28f875(0x5b1)]+'\x20('+this[_0x28f875(0x21b)]['wuid']+_0x28f875(0x216)),!_0x5731b7['_id']||!_0x5731b7['messages'])throw new Error(_0x28f875(0x4a3));let _0x8e820f=_0x5731b7[_0x28f875(0x443)],_0x3612aa=_0x5731b7[_0x28f875(0x50b)],_0x3d9231=_0x3612aa[_0x28f875(0x635)](_0x12441e=>!_0x12441e['delete'])[_0x28f875(0x4b0)](_0x5cfb78=>{const _0x1fc7bf=_0x28f875;let _0x5ce973=_0x5cfb78[_0x1fc7bf(0x443)];if(!_0x5ce973)throw new Error(_0x1fc7bf(0x5bf));return _0x5cfb78[_0x1fc7bf(0x438)]||(_0x5cfb78[_0x1fc7bf(0x438)]=_0x8e820f),delete _0x5cfb78[_0x1fc7bf(0x9f)],{'updateOne':{'filter':{'_id':_0x8e820f,'messages._id':_0x5ce973},'update':{'$set':{'messages.$[elem]':_0x5cfb78}},'arrayFilters':[{'elem._id':_0x5ce973}]}};}),_0x404e53=_0x3612aa[_0x28f875(0x635)](_0x1654bc=>_0x1654bc[_0x28f875(0x2d6)])[_0x28f875(0x4b0)](_0x3e5e40=>{const _0x371f9e=_0x28f875;let _0x433c58=_0x3e5e40[_0x371f9e(0x443)];if(!_0x433c58)throw new Error(_0x371f9e(0xff));return{'updateOne':{'filter':{'_id':_0x8e820f},'update':{'$pull':{'messages':{'_id':_0x433c58}}}}};}),_0x5c717c=[..._0x3d9231,..._0x404e53],_0xd534e6=await this[_0x28f875(0x782)][_0x28f875(0x654)][_0x28f875(0x603)](_0x5c717c,this[_0x28f875(0x21b)][_0x28f875(0x228)]),_0x1b94b6=await this[_0x28f875(0x782)][_0x28f875(0x654)]['findById'](_0x8e820f,this['instance'][_0x28f875(0x228)]);return _0x1b94b6&&(this[_0x28f875(0x527)](_0x1b94b6['messages']),await this['repository'][_0x28f875(0x654)][_0x28f875(0x15a)](_0x1b94b6[_0x28f875(0x443)],{'$set':{'messages':_0x1b94b6[_0x28f875(0x50b)]}},this[_0x28f875(0x21b)][_0x28f875(0x228)])),_0x1b94b6;}catch(_0x34bf66){let _0x3ffde2=_0x28f875(0x666),_0x31ac42=_0x34bf66 instanceof Error?_0x34bf66['message']:typeof _0x34bf66=='object'?JSON['stringify'](_0x34bf66):_0x34bf66,_0x28829d=_0x3ffde2+':\x20'+_0x31ac42;throw this['logger'][_0x28f875(0x5f8)](this['instanceName']+'\x20('+this[_0x28f875(0x21b)]['wuid']+_0x28f875(0x46a)+_0x28829d),new m(_0x28829d);}}async[a0_0x4a47c0(0x643)](){const _0x5e5418=a0_0x4a47c0;try{let _0x47928a={'status':_0x5e5418(0xc9)},_0x313059=await this[_0x5e5418(0x782)][_0x5e5418(0x654)][_0x5e5418(0x465)](_0x47928a,this[_0x5e5418(0x21b)][_0x5e5418(0x228)]);if(!_0x313059['error'])this[_0x5e5418(0x664)][_0x5e5418(0x7bf)](this[_0x5e5418(0x5b1)]+'\x20('+this['instance'][_0x5e5418(0x228)]+_0x5e5418(0x493));else throw new Error(_0x313059[_0x5e5418(0x5f8)]['message']||_0x5e5418(0x3ef));return this[_0x5e5418(0x547)]();}catch(_0x1439aa){let _0x12ead0=_0x5e5418(0x282),_0x31d488=_0x1439aa instanceof Error?_0x1439aa[_0x5e5418(0xab)]:typeof _0x1439aa=='object'?JSON[_0x5e5418(0x52f)](_0x1439aa):_0x1439aa,_0x3fc9ef=_0x12ead0+':\x20'+_0x31d488;throw this['logger'][_0x5e5418(0x5f8)](this[_0x5e5418(0x5b1)]+'\x20('+this[_0x5e5418(0x21b)]['wuid']+_0x5e5418(0x46a)+_0x3fc9ef),new m(_0x3fc9ef);}}async[a0_0x4a47c0(0x547)](){const _0x375870=a0_0x4a47c0;try{return await this[_0x375870(0x782)][_0x375870(0x654)][_0x375870(0x2ba)]({'where':{}},this[_0x375870(0x21b)][_0x375870(0x228)]);}catch(_0x55b0a5){let _0x56a523=_0x375870(0x367),_0x25d0bd=_0x55b0a5 instanceof Error?_0x55b0a5[_0x375870(0xab)]:typeof _0x55b0a5==_0x375870(0x2b9)?JSON[_0x375870(0x52f)](_0x55b0a5):_0x55b0a5,_0x4e0c2c=_0x56a523+':\x20'+_0x25d0bd;throw this[_0x375870(0x664)][_0x375870(0x5f8)](this[_0x375870(0x5b1)]+'\x20('+this['instance'][_0x375870(0x228)]+_0x375870(0x46a)+_0x4e0c2c),new m(_0x4e0c2c);}}['reorderMessages'](_0xfc9e5f){const _0x589abc=a0_0x4a47c0;_0xfc9e5f[_0x589abc(0x6f0)]((_0x468ce7,_0x3cdcdd)=>_0x468ce7[_0x589abc(0x28e)]-_0x3cdcdd[_0x589abc(0x28e)]),_0xfc9e5f[_0x589abc(0x9e)]((_0x224230,_0x1c3cf2)=>{const _0x38b4de=_0x589abc;_0x224230[_0x38b4de(0x28e)]=_0x1c3cf2+0x1;});}async[a0_0x4a47c0(0x53e)](_0x5903c3,_0x279ffd){const _0xc9cf78=a0_0x4a47c0;try{if(!_0x279ffd)return this[_0xc9cf78(0x664)][_0xc9cf78(0x5f8)](this[_0xc9cf78(0x5b1)]+'\x20('+this[_0xc9cf78(0x21b)][_0xc9cf78(0x228)]+_0xc9cf78(0x22f)),{'error':!0x0,'detail':_0xc9cf78(0x9c)};if(_0x279ffd[_0xc9cf78(0x311)]===_0xc9cf78(0x4e4)&&!this['AutomateSystem']?.['flowConfig']['enabled'])return this[_0xc9cf78(0x664)][_0xc9cf78(0x5f8)](this['instanceName']+'\x20('+this[_0xc9cf78(0x21b)][_0xc9cf78(0x228)]+'):\x20Fluxos\x20não\x20estão\x20ativados'),{'error':!0x0,'detail':_0xc9cf78(0xcd)};switch(_0x279ffd['type']){case _0xc9cf78(0x6ba):return await this[_0xc9cf78(0x738)](_0x279ffd,_0x5903c3);case _0xc9cf78(0x164):case _0xc9cf78(0x2fb):case _0xc9cf78(0x3fe):return await this[_0xc9cf78(0x660)](_0x279ffd,_0x5903c3);case _0xc9cf78(0x217):return await this[_0xc9cf78(0x395)](_0x279ffd,_0x5903c3);case _0xc9cf78(0x4e4):let _0x4bcf3a=new Ke();return _0x4bcf3a[_0xc9cf78(0x25b)]=_0x279ffd[_0xc9cf78(0x4e4)],_0x4bcf3a[_0xc9cf78(0x1d0)]=_0x5903c3,await this['startFlow'](_0x4bcf3a);default:return this['logger'][_0xc9cf78(0x5f8)](this[_0xc9cf78(0x5b1)]+'\x20('+this['instance']['wuid']+_0xc9cf78(0x679)+_0x279ffd[_0xc9cf78(0x311)]),{'error':!0x0,'detail':_0xc9cf78(0x39b)};}}catch(_0x484c56){return this[_0xc9cf78(0x664)][_0xc9cf78(0x5f8)](this[_0xc9cf78(0x5b1)]+'\x20('+this[_0xc9cf78(0x21b)][_0xc9cf78(0x228)]+_0xc9cf78(0x386)+(_0x484c56 instanceof Error?_0x484c56[_0xc9cf78(0xab)]:JSON[_0xc9cf78(0x52f)](_0x484c56,null,0x2))),{'error':!0x0,'detail':_0x484c56['message']};}}async[a0_0x4a47c0(0x738)](_0x5bd151,_0x317e06){const _0x14dbf2=a0_0x4a47c0;if(this[_0x14dbf2(0x664)][_0x14dbf2(0x7bf)](this['instanceName']+'\x20('+this[_0x14dbf2(0x21b)][_0x14dbf2(0x228)]+'):\x20\x27Enviando\x20texto\x20para\x20\x27'+_0x317e06+'\x27'),!_0x5bd151[_0x14dbf2(0x6ba)]||_0x5bd151['text']['length']===0x0)return{'error':!0x0,'detail':_0x14dbf2(0x464)};let _0x204f8d=await this[_0x14dbf2(0xdd)](_0x5bd151[_0x14dbf2(0x6ba)],_0x317e06),_0x22bfae={'number':_0x317e06,'options':{'delay':_0x5bd151[_0x14dbf2(0x274)],'linkPreview':_0x5bd151['linkPreview']},'textMessage':{'text':_0x204f8d}},_0x14732a=null;try{let _0x2b70ec=await this[_0x14dbf2(0x644)](_0x22bfae);if(_0x2b70ec&&_0x2b70ec[_0x14dbf2(0x7ae)])return{'error':!0x1,'id':_0x2b70ec['key']['id']};_0x14732a=JSON[_0x14dbf2(0x52f)](_0x2b70ec),this[_0x14dbf2(0x664)][_0x14dbf2(0x7bf)](this[_0x14dbf2(0x5b1)]+'\x20('+this['instance'][_0x14dbf2(0x228)]+'):\x20'+_0x14732a);}catch(_0x1db0d9){this[_0x14dbf2(0x664)][_0x14dbf2(0x5f8)](this[_0x14dbf2(0x5b1)]+'\x20('+this[_0x14dbf2(0x21b)][_0x14dbf2(0x228)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20'+(_0x1db0d9 instanceof Error?_0x1db0d9[_0x14dbf2(0xab)]:JSON['stringify'](_0x1db0d9,null,0x2))),_0x14732a=_0x1db0d9['message'];}if(_0x14732a)return{'error':!0x0,'detail':(typeof _0x14732a=='object'?JSON['stringify'](_0x14732a,null,0x2):_0x14732a)[_0x14dbf2(0x470)](/[\[\]{}\n]/g,'\x20')['replace'](/  +/g,'\x20')};}async['scheduleSendMedia'](_0x2fdf75,_0x560ae1){const _0x2f3ab2=a0_0x4a47c0;this[_0x2f3ab2(0x664)][_0x2f3ab2(0x7bf)](this[_0x2f3ab2(0x5b1)]+'\x20('+this['instance']['wuid']+_0x2f3ab2(0x27a)+_0x560ae1+'\x27');let _0x1b4598;_0x2fdf75['text']&&_0x2fdf75[_0x2f3ab2(0x6ba)][_0x2f3ab2(0x415)]>0x0&&(_0x1b4598=await this[_0x2f3ab2(0xdd)](_0x2fdf75[_0x2f3ab2(0x6ba)],_0x560ae1));let _0x4ff945={'number':_0x560ae1,'options':{'delay':_0x2fdf75[_0x2f3ab2(0x274)],'linkPreview':_0x2fdf75[_0x2f3ab2(0x5c9)]},'mediaMessage':{'mediatype':_0x2fdf75[_0x2f3ab2(0x311)],'caption':_0x1b4598,'media':_0x2fdf75[_0x2f3ab2(0x3ed)]}},_0xd894a7=null;try{let _0x3b59f2=await this['mediaMessage'](_0x4ff945);if(_0x3b59f2&&_0x3b59f2[_0x2f3ab2(0x7ae)])return{'error':!0x1,'id':_0x3b59f2[_0x2f3ab2(0x56d)]['id']};_0xd894a7=JSON['stringify'](_0x3b59f2),this[_0x2f3ab2(0x664)][_0x2f3ab2(0x7bf)](this[_0x2f3ab2(0x5b1)]+'\x20('+this['instance'][_0x2f3ab2(0x228)]+_0x2f3ab2(0x46a)+_0xd894a7);}catch(_0x3cfc9d){this['logger'][_0x2f3ab2(0x5f8)](this[_0x2f3ab2(0x5b1)]+'\x20('+this[_0x2f3ab2(0x21b)][_0x2f3ab2(0x228)]+_0x2f3ab2(0x710)+(_0x3cfc9d instanceof Error?_0x3cfc9d[_0x2f3ab2(0xab)]:JSON[_0x2f3ab2(0x52f)](_0x3cfc9d,null,0x2))),_0xd894a7=_0x3cfc9d[_0x2f3ab2(0xab)];}if(_0xd894a7)return{'error':!0x0,'detail':(typeof _0xd894a7==_0x2f3ab2(0x2b9)?JSON[_0x2f3ab2(0x52f)](_0xd894a7,null,0x2):_0xd894a7)[_0x2f3ab2(0x470)](/[\[\]{}\n]/g,'\x20')[_0x2f3ab2(0x470)](/  +/g,'\x20')};}async[a0_0x4a47c0(0x395)](_0x59e1f4,_0x242bd8){const _0x5c2b21=a0_0x4a47c0;this[_0x5c2b21(0x664)]['verbose'](this[_0x5c2b21(0x5b1)]+'\x20('+this[_0x5c2b21(0x21b)]['wuid']+'):\x20\x27Enviando\x20audio\x20para\x20\x27'+_0x242bd8+'\x27');let _0x502858={'number':_0x242bd8,'options':{'delay':_0x59e1f4[_0x5c2b21(0x274)]},'audioMessage':{'audio':_0x59e1f4[_0x5c2b21(0x3ed)]}},_0x36eae1=null;try{let _0x40f66e=await this[_0x5c2b21(0x149)](_0x502858);if(_0x40f66e&&_0x40f66e[_0x5c2b21(0x7ae)])return{'error':!0x1,'id':_0x40f66e[_0x5c2b21(0x56d)]['id']};_0x36eae1=JSON[_0x5c2b21(0x52f)](_0x40f66e),this['logger'][_0x5c2b21(0x7bf)](this['instanceName']+'\x20('+this[_0x5c2b21(0x21b)]['wuid']+_0x5c2b21(0x46a)+_0x36eae1);}catch(_0x214646){this['logger']['error'](this['instanceName']+'\x20('+this['instance'][_0x5c2b21(0x228)]+_0x5c2b21(0x28b)+(_0x214646 instanceof Error?_0x214646['message']:JSON[_0x5c2b21(0x52f)](_0x214646,null,0x2))),_0x36eae1=_0x214646[_0x5c2b21(0xab)];}if(_0x36eae1)return{'error':!0x0,'detail':(typeof _0x36eae1==_0x5c2b21(0x2b9)?JSON[_0x5c2b21(0x52f)](_0x36eae1,null,0x2):_0x36eae1)[_0x5c2b21(0x470)](/[\[\]{}\n]/g,'\x20')['replace'](/  +/g,'\x20')};}async[a0_0x4a47c0(0x713)](_0x4ac07c){const _0x4fec20=a0_0x4a47c0;try{return await this['client'][_0x4fec20(0x185)](_0x4ac07c[_0x4fec20(0x39e)],_0x4ac07c[_0x4fec20(0x205)]),{'update':_0x4fec20(0x355)};}catch(_0x578897){let _0x5cdae6=_0x4fec20(0x3c2),_0x5bdafd=_0x578897 instanceof Error?_0x578897[_0x4fec20(0xab)]:typeof _0x578897==_0x4fec20(0x2b9)?JSON[_0x4fec20(0x52f)](_0x578897):_0x578897,_0x555c0a=_0x5cdae6+':\x20'+_0x5bdafd;throw this[_0x4fec20(0x664)][_0x4fec20(0x5f8)](this['instanceName']+'\x20('+this[_0x4fec20(0x21b)][_0x4fec20(0x228)]+_0x4fec20(0x46a)+_0x555c0a),new x(_0x555c0a);}}async[a0_0x4a47c0(0x4bb)](_0x239a86){const _0x2c3325=a0_0x4a47c0;try{return await this[_0x2c3325(0x29a)]['groupUpdateSubject'](_0x239a86[_0x2c3325(0x39e)],_0x239a86[_0x2c3325(0x25b)]),{'update':'success'};}catch(_0xdbc8e5){let _0x1ee009='Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName',_0x1c0885=_0xdbc8e5 instanceof Error?_0xdbc8e5[_0x2c3325(0xab)]:typeof _0xdbc8e5==_0x2c3325(0x2b9)?JSON['stringify'](_0xdbc8e5):_0xdbc8e5,_0x6d1c49=_0x1ee009+':\x20'+_0x1c0885;throw this[_0x2c3325(0x664)][_0x2c3325(0x5f8)](this[_0x2c3325(0x5b1)]+'\x20('+this['instance'][_0x2c3325(0x228)]+'):\x20'+_0x6d1c49),new x(_0x6d1c49);}}async[a0_0x4a47c0(0x478)](_0x113166){const _0x516919=a0_0x4a47c0;try{let _0x21bf39=await this[_0x516919(0x29a)][_0x516919(0x4e8)](_0x113166['groupJid'],_0x113166[_0x516919(0x745)]);return{'success':!0x0};}catch(_0x331bd6){let _0x5aed76=_0x516919(0x73d),_0x370d1a=_0x331bd6 instanceof Error?_0x331bd6[_0x516919(0xab)]:typeof _0x331bd6==_0x516919(0x2b9)?JSON[_0x516919(0x52f)](_0x331bd6):_0x331bd6,_0x112cd6=_0x5aed76+':\x20'+_0x370d1a;throw this[_0x516919(0x664)][_0x516919(0x5f8)](this[_0x516919(0x5b1)]+'\x20('+this['instance'][_0x516919(0x228)]+'):\x20'+_0x112cd6),new x(_0x112cd6);}}async['groupSetting'](_0x37dbf9){const _0x44fdaa=a0_0x4a47c0;try{return await this['client'][_0x44fdaa(0x418)](_0x37dbf9[_0x44fdaa(0x39e)],_0x37dbf9['setting']),{'update':_0x44fdaa(0x355)};}catch(_0x1b0098){let _0x372b88=_0x44fdaa(0xcb),_0x1de5b3=_0x1b0098 instanceof Error?_0x1b0098['message']:typeof _0x1b0098==_0x44fdaa(0x2b9)?JSON[_0x44fdaa(0x52f)](_0x1b0098):_0x1b0098,_0x34a8cd=_0x372b88+':\x20'+_0x1de5b3;throw this[_0x44fdaa(0x664)]['error'](this[_0x44fdaa(0x5b1)]+'\x20('+this[_0x44fdaa(0x21b)][_0x44fdaa(0x228)]+_0x44fdaa(0x46a)+_0x34a8cd),new x(_0x34a8cd);}}async[a0_0x4a47c0(0x62f)](_0x2601e5){const _0x4ebf87=a0_0x4a47c0;try{let _0x18d5fd;if((0x0,L[_0x4ebf87(0x7a7)])(_0x2601e5['image'])){let _0x235f8e=new Date()[_0x4ebf87(0x319)](),_0x30d5d7=_0x2601e5['image']+_0x4ebf87(0x18c)+_0x235f8e;_0x18d5fd=(await te[_0x4ebf87(0x339)]['get'](_0x30d5d7,{'responseType':_0x4ebf87(0x2c0)}))[_0x4ebf87(0x37a)];}else{if((0x0,L[_0x4ebf87(0x2fc)])(_0x2601e5['image']))_0x18d5fd=Buffer[_0x4ebf87(0x179)](_0x2601e5[_0x4ebf87(0x2fb)],_0x4ebf87(0x791));else throw new m(_0x4ebf87(0x16c));}return await this['client'][_0x4ebf87(0x44a)](_0x2601e5[_0x4ebf87(0x39e)],_0x18d5fd),{'update':_0x4ebf87(0x355)};}catch(_0x29df40){let _0x1e605d=_0x4ebf87(0x171),_0x5ade85=_0x29df40 instanceof Error?_0x29df40[_0x4ebf87(0xab)]:typeof _0x29df40==_0x4ebf87(0x2b9)?JSON[_0x4ebf87(0x52f)](_0x29df40):_0x29df40,_0x5bfb0f=_0x1e605d+':\x20'+_0x5ade85;throw this[_0x4ebf87(0x664)][_0x4ebf87(0x5f8)](this[_0x4ebf87(0x5b1)]+'\x20('+this['instance'][_0x4ebf87(0x228)]+_0x4ebf87(0x46a)+_0x5bfb0f),new x(_0x5bfb0f);}}},Bt=class u{constructor(_0x43a815,_0x505804,_0x4cd78f){const _0x1b6fa8=a0_0x4a47c0;this[_0x1b6fa8(0x209)]=_0x43a815,this[_0x1b6fa8(0x45a)]=_0x505804,this[_0x1b6fa8(0x782)]=_0x4cd78f,this['db']={},this[_0x1b6fa8(0x3ae)]={},this['logger']=new $(u[_0x1b6fa8(0x25b)]),this[_0x1b6fa8(0x6b2)]={},(this[_0x1b6fa8(0x72a)](),this[_0x1b6fa8(0x21c)](),Object[_0x1b6fa8(0x337)](this['db'],_0x505804[_0x1b6fa8(0x58b)](_0x1b6fa8(0xf4))),Object['assign'](this[_0x1b6fa8(0x3ae)],_0x505804['get'](_0x1b6fa8(0xe1))),this[_0x1b6fa8(0xe8)]=this['db'][_0x1b6fa8(0x99)]?this[_0x1b6fa8(0x782)][_0x1b6fa8(0x35a)]?.['db'](this['db'][_0x1b6fa8(0x75c)]['DB_PREFIX_NAME']+'-instances'):void 0x0,this['cache']=this['redis'][_0x1b6fa8(0x99)]?new ge(this['redis']):void 0x0);}async['instanceInfo'](_0x25d266){const _0x3c3025=a0_0x4a47c0;if(_0x25d266&&!this['waInstances'][_0x25d266])throw new J(_0x3c3025(0x240)+_0x25d266+_0x3c3025(0x1d7));let _0x5eda37=[];for await(let [_0x5e28b2,_0x2a6f39]of Object[_0x3c3025(0x3ce)](this['waInstances']))if(_0x2a6f39&&_0x2a6f39[_0x3c3025(0x1f2)][_0x3c3025(0x5b6)]==='open'){let _0x33b43a=await this[_0x3c3025(0x782)][_0x3c3025(0x28a)][_0x3c3025(0x2ba)](_0x5e28b2);_0x5eda37['push']({'instance':{'instanceName':_0x5e28b2,'apikey':_0x33b43a['apikey'],'owner':_0x2a6f39[_0x3c3025(0x228)],'profileName':await _0x2a6f39[_0x3c3025(0x4ee)]()||_0x3c3025(0x5ca),'profilePictureUrl':_0x2a6f39[_0x3c3025(0x4bf)]}});}return _0x5eda37[_0x3c3025(0x2ba)](_0x5e5343=>_0x5e5343[_0x3c3025(0x21b)][_0x3c3025(0x5b1)]===_0x25d266)??_0x5eda37;}async[a0_0x4a47c0(0x270)](_0x9e52df){const _0x28cb54=a0_0x4a47c0;if(this['db'][_0x28cb54(0x99)]&&(await this['repository'][_0x28cb54(0x35a)]['connect'](),(await this[_0x28cb54(0xe8)][_0x28cb54(0x34d)]())['length']>0x0&&await this[_0x28cb54(0xe8)][_0x28cb54(0x534)](_0x9e52df)),this[_0x28cb54(0x3ae)][_0x28cb54(0x99)]){this['cache'][_0x28cb54(0x71f)]=_0x9e52df,await this[_0x28cb54(0x3bb)]['delAll']();return;}}async[a0_0x4a47c0(0x5af)](){const _0x4b24cb=a0_0x4a47c0;await this['InstancesAlterarTodas']();let _0x178688=async _0x9d3bf=>{const _0x1ae31e=a0_0xa65b;let _0x5891ff=new Re(this['configService'],this[_0x1ae31e(0x209)],this['repository']);_0x5891ff['instanceName']=_0x9d3bf,await _0x5891ff[_0x1ae31e(0x2e0)](),this[_0x1ae31e(0x6b2)][_0x9d3bf]=_0x5891ff;};try{if(this[_0x4b24cb(0x3ae)][_0x4b24cb(0x99)]){let _0x54d616=await this[_0x4b24cb(0x3bb)][_0x4b24cb(0x753)]();_0x54d616?.['length']>0x0&&_0x54d616[_0x4b24cb(0x9e)](async _0x314339=>await _0x178688(_0x314339[_0x4b24cb(0x31c)](':')[0x1]));return;}if(this['db'][_0x4b24cb(0x99)]){await this[_0x4b24cb(0x782)][_0x4b24cb(0x35a)][_0x4b24cb(0x608)]();let _0x337395=await this[_0x4b24cb(0xe8)][_0x4b24cb(0x34d)]();_0x337395[_0x4b24cb(0x415)]>0x0&&_0x337395[_0x4b24cb(0x9e)](async _0x10eb23=>await _0x178688(_0x10eb23[_0x4b24cb(0x6f3)][_0x4b24cb(0x470)](/^[\w-]+\./,'')));return;}}catch(_0x5504d1){this[_0x4b24cb(0x664)][_0x4b24cb(0x5f8)](_0x5504d1);}}async[a0_0x4a47c0(0x4ea)](){const _0x18802a=a0_0x4a47c0;try{let _0x28113f=await this[_0x18802a(0x782)][_0x18802a(0x28a)][_0x18802a(0x7ea)]({'online':!0x1});for(let _0x49da2f of _0x28113f){let _0x132a73=_0x49da2f['_id'];await re[_0x18802a(0x3c7)](K,_0x132a73);}console[_0x18802a(0x18d)](_0x18802a(0x428)+_0x28113f['length']);let _0x2f2d51={'online':!0x1},_0x13cc47=await this[_0x18802a(0x782)][_0x18802a(0x28a)][_0x18802a(0x465)](_0x2f2d51);console[_0x18802a(0x18d)]('Instâncias\x20removidas:\x20'+_0x13cc47[_0x18802a(0xc5)]);}catch(_0x1fe772){console[_0x18802a(0x5f8)](_0x18802a(0x2a6),_0x1fe772);}}async[a0_0x4a47c0(0x13e)](){const _0x5b0850=a0_0x4a47c0;try{let _0x1b8b2a={'online':!0x1},_0x4dde37={'online':!0x1,'lastDisconnect':Date[_0x5b0850(0x331)]()},_0x337f35=await this[_0x5b0850(0x782)][_0x5b0850(0x28a)][_0x5b0850(0x2e5)](_0x1b8b2a,_0x4dde37);await this[_0x5b0850(0x4ea)]();}catch(_0x5ccacd){console['error']('Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:',_0x5ccacd);}}[a0_0x4a47c0(0x72a)](){const _0x2b260f=a0_0x4a47c0;this[_0x2b260f(0x209)]['on'](_0x2b260f(0x98),async _0x30e3a6=>{const _0x768ceb=_0x2b260f;try{this[_0x768ceb(0x6b2)][_0x30e3a6]=void 0x0;}catch{}try{this[_0x768ceb(0x270)](_0x30e3a6);}finally{this['logger']['warn'](_0x768ceb(0x240)+_0x30e3a6+'\x22\x20-\x20REMOVED');}});}['noConnection'](){const _0x39fc93=a0_0x4a47c0;this[_0x39fc93(0x209)]['on'](_0x39fc93(0x426),async _0x479c2a=>{const _0x5d42ce=_0x39fc93;try{this[_0x5d42ce(0x6b2)][_0x479c2a]=void 0x0;}catch{}try{this[_0x5d42ce(0x270)](_0x479c2a);}finally{this[_0x5d42ce(0x664)][_0x5d42ce(0x624)](_0x5d42ce(0x240)+_0x479c2a+_0x5d42ce(0x5e9));}});}},Wt=class extends _{[a0_0x4a47c0(0x7b8)](_0x31c733){return aa(_0x31c733);}async[a0_0x4a47c0(0x69f)](_0x5aa002){const _0x1ee359=a0_0x4a47c0;if(_0x5aa002[_0x1ee359(0x415)]!==0x0)try{return{'insertCount':(await this[_0x1ee359(0x7b8)](_0x5aa002[0x0][_0x1ee359(0x3ab)])['insertMany']([..._0x5aa002]))[_0x1ee359(0x415)]};}catch(_0x36786f){return _0x36786f;}}async[a0_0x4a47c0(0x2ba)](_0x57935c,_0xa9ec5a){const _0x3a8398=a0_0x4a47c0;try{let _0x44ea40=this[_0x3a8398(0x7b8)](_0xa9ec5a),_0xe428de=A(_0x57935c[_0x3a8398(0x381)]);return await _0x44ea40[_0x3a8398(0x2ba)](_0xe428de)['sort']({'lastmsg':-0x1})[_0x3a8398(0x1d6)](_0x57935c?.[_0x3a8398(0x1d6)]??0x0)[_0x3a8398(0x7a3)]();}catch{return[];}}async[a0_0x4a47c0(0x5b8)](_0x5b3bf1,_0x651419){const _0x1dfd14=a0_0x4a47c0;try{let _0x4b9167=this[_0x1dfd14(0x7b8)](_0x651419),_0x2c95ac=A(_0x5b3bf1[_0x1dfd14(0x381)]);return _0x2c95ac[_0x1dfd14(0x559)]={'$ne':[]},await _0x4b9167[_0x1dfd14(0x2ba)](_0x2c95ac)[_0x1dfd14(0x6f0)]({'lastmsg':-0x1})[_0x1dfd14(0x1d6)](_0x5b3bf1?.['limit']??0x0)[_0x1dfd14(0x7a3)]();}catch{return[];}}async['delete'](_0x57a4be,_0x5cae07){const _0x35433a=a0_0x4a47c0;try{return{'deletedCount':(await this['getChatModelForOwner'](_0x5cae07)[_0x35433a(0x465)]({..._0x57a4be[_0x35433a(0x381)]}))['deletedCount']};}catch(_0x377764){return{'error':_0x377764?.[_0x35433a(0x13c)]()};}}async[a0_0x4a47c0(0x6c0)](_0x4cd695,_0x403b8c){const _0x5a3177=a0_0x4a47c0;try{return await this['getChatModelForOwner'](_0x403b8c)[_0x5a3177(0x465)]({..._0x4cd695[_0x5a3177(0x381)]}),[];}catch(_0x4df766){return{'error':_0x4df766?.[_0x5a3177(0x13c)]()};}}async[a0_0x4a47c0(0xb1)](_0x55a2b0,_0x6ac37f){const _0x231246=a0_0x4a47c0;try{let _0x10b9a5=this['getChatModelForOwner'](_0x6ac37f),_0x5a26a6=A(_0x55a2b0[_0x231246(0x381)]);return await _0x10b9a5[_0x231246(0xb1)](_0x5a26a6)[_0x231246(0x7a3)]();}catch{return null;}}async[a0_0x4a47c0(0xc6)](_0x53866c,_0x22d1e4,_0x2a77b0,_0x3a8570,_0xf78f3f='$set'){const _0x5293ae=a0_0x4a47c0;try{let _0x5e2563={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x3a8570},_0x3ad52a=this[_0x5293ae(0x7b8)](_0x2a77b0),_0x2a5339=A(_0x53866c[_0x5293ae(0x381)]);Object[_0x5293ae(0x77d)](_0x22d1e4)[_0x5293ae(0x9e)](_0x26980a=>{_0x22d1e4[_0x26980a]==null&&delete _0x22d1e4[_0x26980a];});let _0x102e1d={};return _0x102e1d[_0xf78f3f]=_0x22d1e4,await _0x3ad52a[_0x5293ae(0x1af)](_0x2a5339,_0x102e1d,_0x5e2563);}catch(_0x2e6e69){return console[_0x5293ae(0x5f8)](_0x2e6e69),null;}}async[a0_0x4a47c0(0x2aa)](_0x34e640){const _0x1632ba=a0_0x4a47c0;try{let _0x5e6446=this[_0x1632ba(0x7b8)](_0x34e640[0x0]['query'][_0x1632ba(0x381)][_0x1632ba(0x3ab)]),_0x458c8d=_0x34e640['map'](_0x32d51d=>({'updateOne':{'filter':{..._0x32d51d[_0x1632ba(0x176)][_0x1632ba(0x381)]},'update':{'$set':_0x32d51d['update']},'upsert':!0x0}})),_0x51e153=await _0x5e6446['bulkWrite'](_0x458c8d);return _0x51e153[_0x1632ba(0x1df)]+_0x51e153[_0x1632ba(0x25d)];}catch(_0x6a3492){return console[_0x1632ba(0x5f8)](_0x6a3492),0x0;}}async['removeUnusedChatFields'](_0x5d1f5a){const _0x5e0ce4=a0_0x4a47c0;try{let _0x4632fc={'group_isCommunity':'','group_announce':'','group_size':''},_0x4639bb={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x1c80f6={'$unset':_0x4632fc};return(await this[_0x5e0ce4(0x7b8)](_0x5d1f5a)[_0x5e0ce4(0x2aa)](_0x4639bb,_0x1c80f6))[_0x5e0ce4(0x1df)];}catch(_0xc6f779){return console[_0x5e0ce4(0x5f8)](_0x5e0ce4(0x237),_0xc6f779),0x0;}}async['updateMissingEtiquetas'](_0x5c5029){const _0x20309a=a0_0x4a47c0;try{let _0x3680ed=this[_0x20309a(0x7b8)](_0x5c5029),_0x333c1e={'leadInfo.etiquetas':{'$exists':!0x1}},_0x2391d9={'$set':{'leadInfo.etiquetas':[]}};return(await _0x3680ed[_0x20309a(0x2aa)](_0x333c1e,_0x2391d9))['modifiedCount'];}catch(_0x4b8b5b){return console['error'](_0x4b8b5b),0x0;}}async[a0_0x4a47c0(0x2e9)](_0x2858d1){const _0x6cc62=a0_0x4a47c0;try{let _0x34851e=this[_0x6cc62(0x7b8)](_0x2858d1),_0x3108d8={'leadInfo.tags':{'$exists':!0x1}},_0x2c45b9={'$set':{'leadInfo.tags':[]}};return(await _0x34851e['updateMany'](_0x3108d8,_0x2c45b9))[_0x6cc62(0x1df)];}catch(_0x5ade04){return console[_0x6cc62(0x5f8)](_0x5ade04),0x0;}}async[a0_0x4a47c0(0x7d8)](_0xb3ab84){const _0x306e67=a0_0x4a47c0;try{let _0x3e169d=this[_0x306e67(0x7b8)](_0xb3ab84),_0x17e33a={'leadInfo.customFields':{'$exists':!0x1}},_0x4377d4={'$set':{'leadInfo.customFields':[]}};return(await _0x3e169d[_0x306e67(0x2aa)](_0x17e33a,_0x4377d4))['modifiedCount'];}catch(_0x184ad6){return console['error'](_0x184ad6),0x0;}}async[a0_0x4a47c0(0x1e0)](_0x311b05,_0x1b3430){const _0x35fc21=a0_0x4a47c0;if(!Array['isArray'](_0x311b05)||_0x311b05['length']===0x0)throw new Error(_0x35fc21(0x5df));try{return(await this[_0x35fc21(0x7b8)](_0x1b3430)[_0x35fc21(0x1e0)](_0x311b05))[_0x35fc21(0x415)];}catch(_0x56e92b){throw console[_0x35fc21(0x5f8)](_0x35fc21(0x3f5),_0x56e92b),_0x56e92b;}}async[a0_0x4a47c0(0x1bd)](_0x3e2701,_0x54066c){const _0x308a05=a0_0x4a47c0;try{await this[_0x308a05(0x7b8)](_0x54066c)[_0x308a05(0x4a5)]({'_id':_0x3e2701});}catch(_0x3894c7){throw console[_0x308a05(0x5f8)](_0x308a05(0x1d3),_0x3894c7),_0x3894c7;}}},zt=class extends _{constructor(_0x1cd0dd,_0x38ec1b,_0x38e35f){const _0x343816=a0_0x4a47c0;super(_0x38ec1b),this[_0x343816(0x1e9)]=_0x1cd0dd,this['configService']=_0x38ec1b,this['dbConnection']=_0x38e35f;}async[a0_0x4a47c0(0x69f)](_0xc3eccd){const _0x5c483f=a0_0x4a47c0;if(_0xc3eccd[_0x5c483f(0x415)]!==0x0)try{return{'insertCount':(await this[_0x5c483f(0x1e9)]['insertMany']([..._0xc3eccd]))[_0x5c483f(0x415)]};}catch(_0x22990f){return _0x22990f;}}async['update'](_0x219a01,_0x174471){const _0x4a91ea=a0_0x4a47c0;try{let _0x1e00af=A(_0x219a01['where']);return{'updatedCount':(await this['cacheContactModel'][_0x4a91ea(0x2aa)](_0x1e00af,{'$set':_0x174471}))['modifiedCount']};}catch(_0x9b2588){return console['error'](_0x4a91ea(0x71d),_0x9b2588),{'error':_0x9b2588['toString']()};}}async[a0_0x4a47c0(0x5a0)](_0x4f2396){const _0x5f0abb=a0_0x4a47c0;try{let _0x4304a9={'_id':{'$in':_0x4f2396}};return await this['cacheContactModel'][_0x5f0abb(0x2ba)](_0x4304a9)[_0x5f0abb(0x7a3)]();}catch(_0x5cdf3b){return console[_0x5f0abb(0x5f8)](_0x5f0abb(0x779),_0x5cdf3b),[];}}async['delete'](_0x3a1cfb){const _0x23a9e9=a0_0x4a47c0;try{return{'deletedCount':(await this['cacheContactModel'][_0x23a9e9(0x465)]({..._0x3a1cfb[_0x23a9e9(0x381)]}))['deletedCount']};}catch(_0x53c6c2){return{'error':_0x53c6c2?.[_0x23a9e9(0x13c)]()};}}async[a0_0x4a47c0(0x2ba)](_0x5646ee){const _0x264c26=a0_0x4a47c0;try{let _0x156661=A(_0x5646ee[_0x264c26(0x381)]);return await this[_0x264c26(0x1e9)]['find'](_0x156661)[_0x264c26(0x1d6)](_0x5646ee?.[_0x264c26(0x1d6)]??0x0)[_0x264c26(0x7a3)]();}catch{return[];}}async[a0_0x4a47c0(0xb1)](_0x548c04){const _0x2bb8e8=a0_0x4a47c0;try{let _0x51ff3b=A(_0x548c04['where']);return await this['cacheContactModel'][_0x2bb8e8(0xb1)](_0x51ff3b)[_0x2bb8e8(0x7a3)]();}catch{return null;}}},Ht=class extends _{['getLabelModelForOwner'](_0x459877){return Na(_0x459877);}async[a0_0x4a47c0(0xc6)](_0x5cd3f2,_0x5712c0,_0x52abb2,_0x5621c1){const _0x58e117=a0_0x4a47c0;try{let _0x58bae2={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x5621c1},_0x604053=this[_0x58e117(0x197)](_0x52abb2),_0x84d56=A(_0x5cd3f2['where']);return await _0x604053[_0x58e117(0x1af)](_0x84d56,{'$set':_0x5712c0},_0x58bae2);}catch(_0x3ca275){return console[_0x58e117(0x5f8)](_0x3ca275),null;}}async[a0_0x4a47c0(0x2ba)](_0x1f804b,_0x275031){const _0x5e5947=a0_0x4a47c0;try{let _0x2cdc5d=this[_0x5e5947(0x197)](_0x275031),_0x393926=A(_0x1f804b[_0x5e5947(0x381)]);return await _0x2cdc5d[_0x5e5947(0x2ba)](_0x393926);}catch(_0x5e73a0){console['error'](_0x5e73a0);}}async[a0_0x4a47c0(0x2d6)](_0x185c8c,_0x456e12){const _0xb9b615=a0_0x4a47c0;try{let _0x5203eb=this[_0xb9b615(0x197)](_0x456e12),_0x2bd526=A(_0x185c8c[_0xb9b615(0x381)]);await _0x5203eb[_0xb9b615(0x465)](_0x2bd526);}catch(_0x76b0f4){console[_0xb9b615(0x5f8)](_0x76b0f4);}}async['deleteAll'](_0x52f15a){const _0x354069=a0_0x4a47c0;try{return await this[_0x354069(0x197)](_0x52f15a)[_0x354069(0x2f0)][_0x354069(0x42b)](),{'success':!0x0};}catch(_0x3a0330){return console[_0x354069(0x5f8)](_0x3a0330),{'success':!0x1,'error':_0x3a0330};}}},Kt=class{constructor(_0xca9389){const _0xac5ab5=a0_0x4a47c0;this[_0xac5ab5(0x722)]=_0xca9389;}async[a0_0x4a47c0(0x31d)]({instanceName:_0x42e093},_0x512a1f){const _0x5ac545=a0_0x4a47c0;return await this[_0x5ac545(0x722)][_0x5ac545(0x6b2)][_0x42e093][_0x5ac545(0x31d)](_0x512a1f);}async['whatsappNumber']({instanceName:_0x47fed5},_0x894155){return await this['waMonitor']['waInstances'][_0x47fed5]['whatsappNumber'](_0x894155);}async[a0_0x4a47c0(0x5a5)]({instanceName:_0x29f37c},_0x3c2d81){const _0x4bf05e=a0_0x4a47c0;return await this['waMonitor'][_0x4bf05e(0x6b2)][_0x29f37c][_0x4bf05e(0x5a5)](_0x3c2d81);}async[a0_0x4a47c0(0x349)]({instanceName:_0xe23aeb},_0x207e4a){const _0x297275=a0_0x4a47c0;return await this[_0x297275(0x722)][_0x297275(0x6b2)][_0xe23aeb][_0x297275(0x571)](_0x207e4a);}async['archiveChat']({instanceName:_0x500c34},_0x5b275b){const _0x41785a=a0_0x4a47c0;return await this[_0x41785a(0x722)]['waInstances'][_0x500c34]['archiveChat'](_0x5b275b);}async[a0_0x4a47c0(0x5a1)]({instanceName:_0x256f23},_0x2f589a){const _0x3aabc8=a0_0x4a47c0;return await this[_0x3aabc8(0x722)]['waInstances'][_0x256f23][_0x3aabc8(0x5a1)](_0x2f589a);}async[a0_0x4a47c0(0x250)]({instanceName:_0x8c859c},_0x294846){const _0x34584a=a0_0x4a47c0;return await this[_0x34584a(0x722)][_0x34584a(0x6b2)][_0x8c859c][_0x34584a(0x226)](_0x294846['number']);}async[a0_0x4a47c0(0x12c)]({instanceName:_0x5c2b7b},_0x2e1692){const _0x53a56b=a0_0x4a47c0;return await this[_0x53a56b(0x722)][_0x53a56b(0x6b2)][_0x5c2b7b][_0x53a56b(0x12c)](_0x2e1692[_0x53a56b(0x9a)]);}async[a0_0x4a47c0(0x6ce)]({instanceName:_0x3bd986},_0x4f95fc){const _0x20c011=a0_0x4a47c0;return await this['waMonitor'][_0x20c011(0x6b2)][_0x3bd986][_0x20c011(0x6ce)](_0x4f95fc);}async[a0_0x4a47c0(0x548)]({instanceName:_0x5aeaa6},_0xb2d682){const _0x213266=a0_0x4a47c0;return await this[_0x213266(0x722)][_0x213266(0x6b2)][_0x5aeaa6][_0x213266(0x548)](_0xb2d682);}async[a0_0x4a47c0(0x698)]({instanceName:_0xa381d0},_0x1251fb){const _0xa29793=a0_0x4a47c0;return await this['waMonitor'][_0xa29793(0x6b2)][_0xa381d0][_0xa29793(0x698)](_0x1251fb);}async['fetchMessages']({instanceName:_0x245511},_0x51832c){const _0x2703f2=a0_0x4a47c0;return await this[_0x2703f2(0x722)][_0x2703f2(0x6b2)][_0x245511][_0x2703f2(0x42f)](_0x51832c);}async['fetchLabels']({instanceName:_0x1c6d2b}){const _0x54ad1f=a0_0x4a47c0;return await this['waMonitor']['waInstances'][_0x1c6d2b][_0x54ad1f(0x4c8)]();}async[a0_0x4a47c0(0x4d3)]({instanceName:_0x5e17ce}){const _0x10bfe5=a0_0x4a47c0;return await this[_0x10bfe5(0x722)][_0x10bfe5(0x6b2)][_0x5e17ce][_0x10bfe5(0x4d3)]();}async[a0_0x4a47c0(0x74b)]({instanceName:_0x2c8272}){const _0x53a834=a0_0x4a47c0;return await this[_0x53a834(0x722)]['waInstances'][_0x2c8272][_0x53a834(0x74b)]();}async[a0_0x4a47c0(0x351)]({instanceName:_0x4a9c0b},_0x150c13){const _0x234bbd=a0_0x4a47c0;return await this['waMonitor'][_0x234bbd(0x6b2)][_0x4a9c0b][_0x234bbd(0x351)](_0x150c13);}async[a0_0x4a47c0(0x4f1)]({instanceName:_0x29502f},_0x3c8dae){const _0x21685f=a0_0x4a47c0;return await this[_0x21685f(0x722)]['waInstances'][_0x29502f][_0x21685f(0x4f1)](_0x3c8dae['number']);}async['updateProfileName']({instanceName:_0x159a01},_0x4298cf){const _0x366770=a0_0x4a47c0;return await this[_0x366770(0x722)][_0x366770(0x6b2)][_0x159a01][_0x366770(0x71c)](_0x4298cf[_0x366770(0x25b)]);}async[a0_0x4a47c0(0x742)]({instanceName:_0x2522c3},_0x9fc665){const _0x49f500=a0_0x4a47c0;return await this[_0x49f500(0x722)][_0x49f500(0x6b2)][_0x2522c3][_0x49f500(0x742)](_0x9fc665[_0x49f500(0x7ae)]);}async['updateProfilePicture']({instanceName:_0xe5a5e8},_0x137d26){const _0x1e0719=a0_0x4a47c0;return await this[_0x1e0719(0x722)][_0x1e0719(0x6b2)][_0xe5a5e8][_0x1e0719(0x44a)](_0x137d26[_0x1e0719(0x74d)]);}async['removeProfilePicture']({instanceName:_0x25be15},_0xe42afd){const _0x5099c4=a0_0x4a47c0;return await this[_0x5099c4(0x722)][_0x5099c4(0x6b2)][_0x25be15]['removeProfilePicture']();}},Qt=require(a0_0x4a47c0(0x110)),Yt=class u{constructor(_0x423e2d,_0x29b1f3,_0x2b5806,_0x3f4559,_0x1eb194){const _0x24381f=a0_0x4a47c0;this[_0x24381f(0x722)]=_0x423e2d,this[_0x24381f(0x45a)]=_0x29b1f3,this[_0x24381f(0x782)]=_0x2b5806,this[_0x24381f(0x209)]=_0x3f4559,this[_0x24381f(0x448)]=_0x1eb194,this[_0x24381f(0x664)]=new $(u[_0x24381f(0x25b)]);}async[a0_0x4a47c0(0x186)]({instanceName:_0x2c580d,apikey:_0xeb6585,number:_0xbe7c74,proxy:_0x12e722=!0x0}){const _0x1c5727=a0_0x4a47c0;try{let _0x29bf96=new Re(this['configService'],this[_0x1c5727(0x209)],this['repository']);_0x29bf96[_0x1c5727(0x5b1)]=_0x2c580d,this[_0x1c5727(0x722)][_0x1c5727(0x6b2)][_0x29bf96[_0x1c5727(0x5b1)]]=_0x29bf96;let _0x564aed={};_0xeb6585?(await this[_0x1c5727(0x782)][_0x1c5727(0x28a)]['create']({'apikey':_0xeb6585},_0x2c580d),_0x564aed[_0x1c5727(0x20a)]=_0xeb6585):_0x564aed=await this['authService'][_0x1c5727(0x642)]({'instanceName':_0x29bf96[_0x1c5727(0x5b1)]});let _0x5e08af;if(_0xbe7c74){if(_0x5e08af=await this[_0x1c5727(0x3c6)](_0xbe7c74),_0x5e08af[_0x1c5727(0x5f8)])throw new x(_0x5e08af['error']['toString']());_0xbe7c74=_0x5e08af[_0x1c5727(0x9a)];}let _0x2a48ca;return await _0x29bf96[_0x1c5727(0x2e0)](_0xbe7c74),await(0x0,Qt[_0x1c5727(0x274)])(0xfa0),_0xbe7c74&&await(0x0,Qt['delay'])(0xbb8),_0x2a48ca=_0x29bf96[_0x1c5727(0x181)],{'instance':{'instanceName':_0x29bf96[_0x1c5727(0x5b1)],'status':_0x1c5727(0x69c)},'hash':_0x564aed,'qrcode':_0x2a48ca};}catch(_0x2f4000){throw this['logger'][_0x1c5727(0x5f8)](_0x2f4000),_0x2f4000;}}async[a0_0x4a47c0(0x15e)]({instanceName:_0x1be800,number:_0x2bc542=null}){const _0x180c66=a0_0x4a47c0;try{let _0x29e398=this['waMonitor'][_0x180c66(0x6b2)][_0x1be800];switch(_0x29e398?.['connectionStatus']?.[_0x180c66(0x5b6)]){case _0x180c66(0x735):return await _0x29e398[_0x180c66(0x2e0)](_0x2bc542),await(0x0,Qt[_0x180c66(0x274)])(0x7d0),_0x29e398[_0x180c66(0x181)];case _0x180c66(0x5ff):return _0x29e398[_0x180c66(0x181)];default:return await this[_0x180c66(0x72c)]({'instanceName':_0x1be800});}}catch(_0x177cbc){this['logger'][_0x180c66(0x18d)](_0x177cbc);}}async[a0_0x4a47c0(0x72c)]({instanceName:_0x23db00}){const _0x586842=a0_0x4a47c0;let _0x529b02=this[_0x586842(0x722)][_0x586842(0x6b2)][_0x23db00][_0x586842(0x1f2)],_0x24fd14=null;_0x529b02[_0x586842(0x5b6)]===_0x586842(0x113)&&_0x23db00&&(_0x24fd14=await this['waMonitor'][_0x586842(0x5e7)](_0x23db00));let _0x35eaa9=null;return _0x529b02[_0x586842(0x5b6)]==='connecting'&&_0x23db00&&(_0x35eaa9=this['waMonitor'][_0x586842(0x6b2)][_0x23db00][_0x586842(0x181)]),{'instance':_0x23db00,'connectionStatus':_0x529b02,'instanceInfo':_0x24fd14,'qrcode':_0x35eaa9};}async[a0_0x4a47c0(0x3c6)](_0x51aac8){const _0x4498a8=a0_0x4a47c0;_0x51aac8=_0x51aac8[_0x4498a8(0x470)](/\D/g,'');let _0x1ace66=Object['keys'](this[_0x4498a8(0x722)][_0x4498a8(0x6b2)])[_0x4498a8(0x635)](_0x5284da=>{const _0x33b92a=_0x4498a8;let _0x4abf46=this[_0x33b92a(0x722)][_0x33b92a(0x6b2)][_0x5284da];return _0x4abf46&&_0x4abf46['connectionStatus']&&_0x4abf46[_0x33b92a(0x1f2)][_0x33b92a(0x5b6)]==='open';});if(_0x1ace66[_0x4498a8(0x415)]===0x0)return{'number':this[_0x4498a8(0x2cc)](_0x51aac8)};let _0x2555a5=Math[_0x4498a8(0x771)](Math['random']()*_0x1ace66[_0x4498a8(0x415)]),_0x4b6591=_0x1ace66[_0x2555a5];try{let _0x5f4ea1=(await this['waMonitor'][_0x4498a8(0x6b2)][_0x4b6591][_0x4498a8(0x14c)]({'numbers':[_0x51aac8]}))[_0x4498a8(0xe7)]();return _0x5f4ea1['exists']?{'number':_0x5f4ea1[_0x4498a8(0x304)]['replace'](_0x4498a8(0x628),'')}:{'number':_0x51aac8,'error':'Número\x20não\x20possui\x20WhatsApp.'};}catch(_0x456096){return this[_0x4498a8(0x664)][_0x4498a8(0x5f8)](_0x4498a8(0x32e)+_0x456096),{'number':_0x51aac8,'error':_0x4498a8(0x609)};}}[a0_0x4a47c0(0x2cc)](_0x4ec44d){const _0x400812=a0_0x4a47c0;let _0x3f2a9d=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x400812(0x449)](_0x4ec44d);if(_0x3f2a9d&&_0x3f2a9d[0x1]==='55'){let _0x2a95b3=_0x3f2a9d[0x2],_0x2fdbe0=_0x3f2a9d[0x3],_0xca1234=_0x3f2a9d[0x4];if(parseInt(_0x2a95b3)>=0x1f&&_0x2fdbe0==='9')return _0x3f2a9d[0x1]+_0x2a95b3+_0xca1234;}return _0x4ec44d;}async[a0_0x4a47c0(0x69e)]({instanceName:_0xd37946}){const _0x42c9fb=a0_0x4a47c0;try{return this['waMonitor'][_0x42c9fb(0x6b2)][_0xd37946]?.[_0x42c9fb(0x29a)]?.['ws']?.['close'](),{'status':'SUCCESS','error':!0x1,'response':{'message':_0x42c9fb(0xf2)}};}catch(_0x57ff74){this[_0x42c9fb(0x664)]['error'](_0x57ff74);}}async[a0_0x4a47c0(0x75e)]({instanceName:_0x8bf4ab}){const _0x58a6a4=a0_0x4a47c0;return _0x8bf4ab?this[_0x58a6a4(0x722)]['instanceInfo'](_0x8bf4ab):this[_0x58a6a4(0x722)][_0x58a6a4(0x5e7)]();}async[a0_0x4a47c0(0x4ff)]({instanceName:_0x582467}){const _0x59cfaa=a0_0x4a47c0;try{return await this[_0x59cfaa(0x722)][_0x59cfaa(0x6b2)][_0x582467]?.[_0x59cfaa(0x29a)]?.[_0x59cfaa(0x4ff)](_0x59cfaa(0x170)+_0x582467),{'error':!0x1,'message':_0x59cfaa(0x7f6)};}catch(_0x143727){throw new x(_0x143727[_0x59cfaa(0x13c)]());}}async[a0_0x4a47c0(0x295)]({instanceName:_0x3c33b8}){const _0x2c8bff=a0_0x4a47c0;if((await this['connectionState']({'instanceName':_0x3c33b8}))[_0x2c8bff(0x1f2)][_0x2c8bff(0x5b6)]==='open')throw new m([_0x2c8bff(0x36e),'The\x20instance\x20needs\x20to\x20be\x20disconnected']);try{return delete this[_0x2c8bff(0x722)][_0x2c8bff(0x6b2)][_0x3c33b8],{'error':!0x1,'message':_0x2c8bff(0x1f5)};}catch(_0x360b73){throw new m(_0x360b73['toString']());}}},ne=require(a0_0x4a47c0(0x76c)),Xt=class{constructor(_0x8e4194){const _0x5ce80c=a0_0x4a47c0;this[_0x5ce80c(0x722)]=_0x8e4194;}async['sendText']({instanceName:_0xb8cc4d},_0x333f3b){const _0xda4064=a0_0x4a47c0;return await this[_0xda4064(0x722)]['waInstances'][_0xb8cc4d][_0xda4064(0x644)](_0x333f3b);}async[a0_0x4a47c0(0x347)]({instanceName:_0x20af86},_0x41a580){const _0x1a5179=a0_0x4a47c0;return await this[_0x1a5179(0x722)]['waInstances'][_0x20af86]['menuMessage'](_0x41a580);}async[a0_0x4a47c0(0x73c)]({instanceName:_0x468125},_0x3f2a87){const _0x15d3e9=a0_0x4a47c0;if((0x0,ne[_0x15d3e9(0x2fc)])(_0x3f2a87?.[_0x15d3e9(0x26e)]?.[_0x15d3e9(0x148)])&&!_0x3f2a87?.[_0x15d3e9(0x26e)]?.[_0x15d3e9(0x5e6)])throw new m(_0x15d3e9(0x19a));if((0x0,ne[_0x15d3e9(0x7a7)])(_0x3f2a87?.[_0x15d3e9(0x26e)]?.['media'])||(0x0,ne[_0x15d3e9(0x2fc)])(_0x3f2a87?.[_0x15d3e9(0x26e)]?.['media']))return await this[_0x15d3e9(0x722)]['waInstances'][_0x468125]['mediaMessage'](_0x3f2a87);throw new m(_0x15d3e9(0x752));}async[a0_0x4a47c0(0x48b)]({instanceName:_0x23afca},_0x45bb94){const _0x30b65c=a0_0x4a47c0;if((0x0,ne[_0x30b65c(0x7a7)])(_0x45bb94[_0x30b65c(0x7fe)]['image'])||(0x0,ne[_0x30b65c(0x2fc)])(_0x45bb94[_0x30b65c(0x7fe)][_0x30b65c(0x2fb)]))return await this[_0x30b65c(0x722)][_0x30b65c(0x6b2)][_0x23afca][_0x30b65c(0x405)](_0x45bb94);throw new m(_0x30b65c(0x752));}async[a0_0x4a47c0(0x482)]({instanceName:_0x22e41f},_0x41efd5){const _0x5a3562=a0_0x4a47c0;if((0x0,ne[_0x5a3562(0x7a7)])(_0x41efd5['audioMessage'][_0x5a3562(0x217)])||(0x0,ne[_0x5a3562(0x2fc)])(_0x41efd5['audioMessage'][_0x5a3562(0x217)]))return await this['waMonitor'][_0x5a3562(0x6b2)][_0x22e41f][_0x5a3562(0x149)](_0x41efd5);throw new m(_0x5a3562(0x752));}async['sendButtons']({instanceName:_0x21a0b5},_0x4fffeb){const _0x5593e8=a0_0x4a47c0;if((0x0,ne['isBase64'])(_0x4fffeb[_0x5593e8(0x7b7)][_0x5593e8(0x26e)]?.[_0x5593e8(0x148)])&&!_0x4fffeb[_0x5593e8(0x7b7)][_0x5593e8(0x26e)]?.[_0x5593e8(0x5e6)])throw new m(_0x5593e8(0x19a));return await this[_0x5593e8(0x722)][_0x5593e8(0x6b2)][_0x21a0b5]['buttonMessage'](_0x4fffeb);}async['sendLocation']({instanceName:_0x5973b0},_0x3b8ba7){const _0x44c7b4=a0_0x4a47c0;return await this['waMonitor'][_0x44c7b4(0x6b2)][_0x5973b0][_0x44c7b4(0x5ed)](_0x3b8ba7);}async[a0_0x4a47c0(0x1d4)]({instanceName:_0x4f99da},_0x940f16){const _0x2c75c6=a0_0x4a47c0;return await this[_0x2c75c6(0x722)][_0x2c75c6(0x6b2)][_0x4f99da][_0x2c75c6(0x5f2)](_0x940f16);}async[a0_0x4a47c0(0x259)]({instanceName:_0x55de3c},_0x5ed9a7){const _0xafd417=a0_0x4a47c0;return await this[_0xafd417(0x722)][_0xafd417(0x6b2)][_0x55de3c][_0xafd417(0x1a4)](_0x5ed9a7);}async[a0_0x4a47c0(0x761)]({instanceName:_0x388cf5},_0x11db54){const _0x2017b1=a0_0x4a47c0;return await this[_0x2017b1(0x722)][_0x2017b1(0x6b2)][_0x388cf5][_0x2017b1(0x7da)](_0x11db54);}async['sendReaction']({instanceName:_0x100729},_0x4ea307){const _0x1e3a1d=a0_0x4a47c0;if(!_0x4ea307[_0x1e3a1d(0x17f)]['reaction'][_0x1e3a1d(0x3b6)](/[^\(\)\w\sà-ú"-\+]+/))throw new m(_0x1e3a1d(0x5a6));return await this[_0x1e3a1d(0x722)][_0x1e3a1d(0x6b2)][_0x100729][_0x1e3a1d(0x17f)](_0x4ea307);}async[a0_0x4a47c0(0x1a7)]({instanceName:_0x1b53b4},_0x31d00a){const _0x16d261=a0_0x4a47c0;return await this[_0x16d261(0x722)][_0x16d261(0x6b2)][_0x1b53b4][_0x16d261(0x7e7)](_0x31d00a);}},Li=require('jsonwebtoken'),js=require('uuid'),Zt=class u{constructor(_0x22c222,_0x721a52,_0x506896){const _0x4d3df6=a0_0x4a47c0;this[_0x4d3df6(0x45a)]=_0x22c222,this[_0x4d3df6(0x722)]=_0x721a52,this['repository']=_0x506896,this[_0x4d3df6(0x664)]=new $(u['name']);}async[a0_0x4a47c0(0x3c8)](_0x206d97){const _0x1e2af0=a0_0x4a47c0;let _0x440a86=this[_0x1e2af0(0x45a)][_0x1e2af0(0x58b)](_0x1e2af0(0x5f9))[_0x1e2af0(0x3a6)],_0x146f76=(0x0,Li['sign'])({'instanceName':_0x206d97['instanceName'],'apiName':nt,'tokenId':(0x0,js['v4'])()},_0x440a86['SECRET'],{'expiresIn':_0x440a86[_0x1e2af0(0x3bf)],'encoding':_0x1e2af0(0x29b),'subject':_0x1e2af0(0x127)}),_0x57e8bb=await this['repository']['auth'][_0x1e2af0(0x6e2)]({'jwt':_0x146f76},_0x206d97[_0x1e2af0(0x5b1)]);if(_0x57e8bb[_0x1e2af0(0x5f8)])throw this['logger']['error']({'localError':u[_0x1e2af0(0x25b)]+_0x1e2af0(0x160),'error':_0x57e8bb[_0x1e2af0(0x5f8)]}),new m(_0x1e2af0(0x5ec),_0x57e8bb[_0x1e2af0(0x5f8)]?.['toString']());return{'jwt':_0x146f76};}async['apikey'](_0x1f38fa){const _0x27c131=a0_0x4a47c0;let _0x56436f=(0x0,js['v4'])()[_0x27c131(0x53f)](),_0x3792df=await this[_0x27c131(0x782)]['auth']['create']({'apikey':_0x56436f},_0x1f38fa[_0x27c131(0x5b1)]);if(_0x3792df[_0x27c131(0x5f8)])throw this[_0x27c131(0x664)][_0x27c131(0x5f8)]({'localError':u['name']+_0x27c131(0x160),'error':_0x3792df[_0x27c131(0x5f8)]}),new m('Authentication\x20error',_0x3792df[_0x27c131(0x5f8)]?.[_0x27c131(0x13c)]());return{'apikey':_0x56436f};}async[a0_0x4a47c0(0x642)](_0x56889c){const _0x412f95=a0_0x4a47c0;let _0x31c257=this['configService'][_0x412f95(0x58b)](_0x412f95(0x5f9));return await this[_0x31c257[_0x412f95(0x58c)]](_0x56889c);}},es=class{constructor(_0x472b3f){const _0x1301c5=a0_0x4a47c0;this[_0x1301c5(0x722)]=_0x472b3f;}async['createGroup'](_0x1266a3,_0xd30e8e){const _0x212152=a0_0x4a47c0;return await this['waMonitor']['waInstances'][_0x1266a3[_0x212152(0x5b1)]]['createGroup'](_0xd30e8e);}async[a0_0x4a47c0(0x62f)](_0x78f897,_0x5c5e24){const _0xa6e208=a0_0x4a47c0;return await this['waMonitor'][_0xa6e208(0x6b2)][_0x78f897['instanceName']][_0xa6e208(0x62f)](_0x5c5e24);}async[a0_0x4a47c0(0x713)](_0x3012fc,_0x4a22de){const _0x5accbe=a0_0x4a47c0;return await this[_0x5accbe(0x722)][_0x5accbe(0x6b2)][_0x3012fc['instanceName']][_0x5accbe(0x713)](_0x4a22de);}async['groupName'](_0x58268e,_0x4ac97a){const _0x57be71=a0_0x4a47c0;return await this[_0x57be71(0x722)][_0x57be71(0x6b2)][_0x58268e['instanceName']][_0x57be71(0x4bb)](_0x4ac97a);}async['groupBetterSetting'](_0x184884,_0x2b34ac){const _0x5a9485=a0_0x4a47c0;return await this[_0x5a9485(0x722)][_0x5a9485(0x6b2)][_0x184884[_0x5a9485(0x5b1)]][_0x5a9485(0x57a)](_0x2b34ac);}async[a0_0x4a47c0(0x6dc)](_0x2f1014,_0xab89ae){const _0x3912ce=a0_0x4a47c0;return await this['waMonitor']['waInstances'][_0x2f1014[_0x3912ce(0x5b1)]][_0x3912ce(0x6dc)](_0xab89ae);}async[a0_0x4a47c0(0x672)](_0x51b121,_0x182952){const _0x2e122b=a0_0x4a47c0;return await this[_0x2e122b(0x722)][_0x2e122b(0x6b2)][_0x51b121[_0x2e122b(0x5b1)]][_0x2e122b(0x3d9)](_0x182952);}async[a0_0x4a47c0(0x333)](_0x473b04){const _0x428a4a=a0_0x4a47c0;return await this['waMonitor'][_0x428a4a(0x6b2)][_0x473b04['instanceName']][_0x428a4a(0x333)]();}async[a0_0x4a47c0(0x7f8)](_0x499244,_0x330ee4){const _0x5e99f5=a0_0x4a47c0;return await this[_0x5e99f5(0x722)][_0x5e99f5(0x6b2)][_0x499244[_0x5e99f5(0x5b1)]][_0x5e99f5(0x7f8)](_0x330ee4);}async[a0_0x4a47c0(0x44f)](_0x42fc73,_0x1208ca){const _0x37ac9f=a0_0x4a47c0;return await this[_0x37ac9f(0x722)][_0x37ac9f(0x6b2)][_0x42fc73['instanceName']]['joinGroup'](_0x1208ca);}async[a0_0x4a47c0(0x4c5)](_0x714614,_0x280776){const _0x349d8e=a0_0x4a47c0;return await this['waMonitor']['waInstances'][_0x714614[_0x349d8e(0x5b1)]][_0x349d8e(0x4c5)](_0x280776);}async[a0_0x4a47c0(0x533)](_0x54ae2a,_0x29598d){const _0x41d2ea=a0_0x4a47c0;return await this[_0x41d2ea(0x722)]['waInstances'][_0x54ae2a['instanceName']]['revokeInviteCode'](_0x29598d);}async[a0_0x4a47c0(0x541)](_0x45e4b9,_0x5d3564){const _0x1993d4=a0_0x4a47c0;return await this[_0x1993d4(0x722)][_0x1993d4(0x6b2)][_0x45e4b9[_0x1993d4(0x5b1)]][_0x1993d4(0x541)](_0x5d3564);}async[a0_0x4a47c0(0x63d)](_0x146f8f,_0x32c65b){const _0x15955b=a0_0x4a47c0;return await this['waMonitor'][_0x15955b(0x6b2)][_0x146f8f['instanceName']][_0x15955b(0x629)](_0x32c65b);}async[a0_0x4a47c0(0x478)](_0x2675f6,_0x241fb4){const _0x14bcf6=a0_0x4a47c0;return await this[_0x14bcf6(0x722)]['waInstances'][_0x2675f6['instanceName']][_0x14bcf6(0x478)](_0x241fb4);}async[a0_0x4a47c0(0x36f)](_0x26d04c,_0x2dccb7){const _0x3dcb99=a0_0x4a47c0;return await this[_0x3dcb99(0x722)]['waInstances'][_0x26d04c[_0x3dcb99(0x5b1)]][_0x3dcb99(0x36f)](_0x2dccb7);}},ts=class{constructor(_0x28e4d6){const _0x31adfc=a0_0x4a47c0;this[_0x31adfc(0x722)]=_0x28e4d6;}[a0_0x4a47c0(0x6e2)](_0x37e51a,_0x54e2f5){const _0x382ed0=a0_0x4a47c0;return this[_0x382ed0(0x722)][_0x382ed0(0x6b2)][_0x37e51a[_0x382ed0(0x5b1)]][_0x382ed0(0x40c)](_0x54e2f5);}async[a0_0x4a47c0(0x2ba)](_0x1314f0){const _0xfd6d78=a0_0x4a47c0;try{return await this[_0xfd6d78(0x722)][_0xfd6d78(0x6b2)][_0x1314f0[_0xfd6d78(0x5b1)]][_0xfd6d78(0x2d1)]();}catch{return{'enabled':null,'url':''};}}},Gp=new $('FlowController'),ss=class{constructor(_0x1ee0ca){const _0x1eb3e8=a0_0x4a47c0;this[_0x1eb3e8(0x722)]=_0x1ee0ca;}async['editScheduleMessage'](_0x464b9e,_0x12d590){const _0x3f3cbe=a0_0x4a47c0;return await this[_0x3f3cbe(0x722)][_0x3f3cbe(0x6b2)][_0x464b9e[_0x3f3cbe(0x5b1)]][_0x3f3cbe(0x2dc)](_0x12d590);}async[a0_0x4a47c0(0x547)](_0x29db20){const _0x48efd4=a0_0x4a47c0;return await this[_0x48efd4(0x722)][_0x48efd4(0x6b2)][_0x29db20[_0x48efd4(0x5b1)]][_0x48efd4(0x547)]();}async[a0_0x4a47c0(0x643)](_0x505ef4){const _0x237abe=a0_0x4a47c0;return await this['waMonitor'][_0x237abe(0x6b2)][_0x505ef4[_0x237abe(0x5b1)]][_0x237abe(0x643)]();}async[a0_0x4a47c0(0x739)](_0x1bbd58){const _0x2752d7=a0_0x4a47c0;return await this[_0x2752d7(0x722)][_0x2752d7(0x6b2)][_0x1bbd58[_0x2752d7(0x5b1)]]['getAutomateSystem']();}async['updateAgent'](_0x5695f8,_0x208529){const _0x3cdacf=a0_0x4a47c0;return await this[_0x3cdacf(0x722)][_0x3cdacf(0x6b2)][_0x5695f8[_0x3cdacf(0x5b1)]][_0x3cdacf(0x9b)](_0x208529);}async['updateCustomFields'](_0x413854,_0x136384){const _0x38bbaa=a0_0x4a47c0;return await this['waMonitor'][_0x38bbaa(0x6b2)][_0x413854[_0x38bbaa(0x5b1)]]['updateCustomFields'](_0x136384);}async['updateAutoCompleteMessages'](_0x111501,_0x466eab){const _0x332831=a0_0x4a47c0;return await this[_0x332831(0x722)][_0x332831(0x6b2)][_0x111501[_0x332831(0x5b1)]][_0x332831(0x652)](_0x466eab);}async[a0_0x4a47c0(0x1cf)](_0x5d3d05,_0x113374){const _0x38fa52=a0_0x4a47c0;return await this[_0x38fa52(0x722)][_0x38fa52(0x6b2)][_0x5d3d05[_0x38fa52(0x5b1)]][_0x38fa52(0x1cf)](_0x113374);}async['startFlow'](_0xc09c7,_0x23ea2c){const _0x582f0e=a0_0x4a47c0;return await this[_0x582f0e(0x722)][_0x582f0e(0x6b2)][_0xc09c7[_0x582f0e(0x5b1)]][_0x582f0e(0x1ec)](_0x23ea2c);}async[a0_0x4a47c0(0x7fc)](_0x1ddd98,_0xd9cd70,_0x2e1827,_0x3905dd){const _0x251120=a0_0x4a47c0;return await this['waMonitor']['waInstances'][_0x1ddd98][_0x251120(0x7fc)](_0xd9cd70,_0x2e1827,_0x3905dd);}async['getConversation'](_0x9da9bc,_0x5ff113){const _0x4a97f6=a0_0x4a47c0;return await this[_0x4a97f6(0x722)][_0x4a97f6(0x6b2)][_0x9da9bc['instanceName']]['getConversation'](_0x5ff113);}async[a0_0x4a47c0(0x7dd)](_0x5715fe,_0x213135){const _0x305a5e=a0_0x4a47c0;return await this['waMonitor'][_0x305a5e(0x6b2)][_0x5715fe['instanceName']][_0x305a5e(0x7dd)](_0x213135);}async[a0_0x4a47c0(0x550)](_0x15a0d3,_0x3b9162){const _0x53d157=a0_0x4a47c0;return await this[_0x53d157(0x722)]['waInstances'][_0x15a0d3['instanceName']][_0x53d157(0x550)](_0x3b9162);}async['deleteConversation'](_0x160e92,_0x4146ff){const _0xed4ec4=a0_0x4a47c0;return await this[_0xed4ec4(0x722)][_0xed4ec4(0x6b2)][_0x160e92[_0xed4ec4(0x5b1)]]['deleteConversation'](_0x4146ff);}async['getFlow'](_0x3f73c9,_0x326ddf){const _0x2d01df=a0_0x4a47c0;return await this[_0x2d01df(0x722)][_0x2d01df(0x6b2)][_0x3f73c9['instanceName']][_0x2d01df(0xd0)](_0x326ddf[_0x2d01df(0x443)]);}async[a0_0x4a47c0(0x4a0)](_0x1d4cfd,_0x4bf2aa,_0x7de0d0){const _0x5de6a4=a0_0x4a47c0;return await this['waMonitor'][_0x5de6a4(0x6b2)][_0x1d4cfd[_0x5de6a4(0x5b1)]][_0x5de6a4(0x4a0)](_0x4bf2aa,_0x7de0d0);}async['editFlow'](_0x495a40,_0x3ccfc0,_0x1ea95a){const _0x2c3612=a0_0x4a47c0;return await this['waMonitor'][_0x2c3612(0x6b2)][_0x495a40['instanceName']]['editFlow'](_0x3ccfc0,_0x1ea95a);}async[a0_0x4a47c0(0x2f9)](_0x2b9536,_0x3d7d18){const _0x592319=a0_0x4a47c0;return await this['waMonitor'][_0x592319(0x6b2)][_0x2b9536[_0x592319(0x5b1)]][_0x592319(0x2f9)](_0x3d7d18);}async['editFlowReply'](_0x2458f7,_0x7dd137){const _0x587c82=a0_0x4a47c0;return await this[_0x587c82(0x722)][_0x587c82(0x6b2)][_0x2458f7[_0x587c82(0x5b1)]]['editFlowReply'](_0x7dd137);}async[a0_0x4a47c0(0x71e)](_0x4802a3,_0x3d1003){const _0x3bdb77=a0_0x4a47c0;return await this[_0x3bdb77(0x722)][_0x3bdb77(0x6b2)][_0x4802a3['instanceName']][_0x3bdb77(0x71e)](_0x3d1003);}async[a0_0x4a47c0(0x424)](_0x3ade8d,_0x1db3a1){const _0x5915a7=a0_0x4a47c0;return await this['waMonitor'][_0x5915a7(0x6b2)][_0x3ade8d[_0x5915a7(0x5b1)]][_0x5915a7(0x424)](_0x1db3a1);}async[a0_0x4a47c0(0x234)](_0xa50ff1,_0x5d9c3d){const _0x4f1473=a0_0x4a47c0;return await this['waMonitor'][_0x4f1473(0x6b2)][_0xa50ff1[_0x4f1473(0x5b1)]][_0x4f1473(0x234)](_0x5d9c3d);}async['editFlowVariable'](_0x3d6677,_0x53a8f7){const _0x502993=a0_0x4a47c0;return await this['waMonitor'][_0x502993(0x6b2)][_0x3d6677[_0x502993(0x5b1)]][_0x502993(0x7c6)](_0x53a8f7);}async['deleteFlow'](_0x47d49a,_0x4a7ebe){const _0x331f94=a0_0x4a47c0;return await this[_0x331f94(0x722)][_0x331f94(0x6b2)][_0x47d49a[_0x331f94(0x5b1)]][_0x331f94(0x665)](_0x4a7ebe);}async[a0_0x4a47c0(0x242)](_0xc7ddfa){const _0x117913=a0_0x4a47c0;return await this[_0x117913(0x722)][_0x117913(0x6b2)][_0xc7ddfa[_0x117913(0x5b1)]][_0x117913(0x242)]();}},as=class{constructor(_0x1efd94){const _0x168f72=a0_0x4a47c0;this[_0x168f72(0xd6)]=_0x1efd94;}async[a0_0x4a47c0(0x762)](_0x46376e,_0x32f372){const _0x5c37ee=a0_0x4a47c0;return this[_0x5c37ee(0xd6)]['create'](_0x46376e,_0x32f372);}async[a0_0x4a47c0(0x2d1)](_0x1d44b7){const _0x566aa2=a0_0x4a47c0;return this[_0x566aa2(0xd6)]['find'](_0x1d44b7);}},is=class extends _{constructor(_0xb4bdfb,_0x129347){const _0xd20988=a0_0x4a47c0;super(_0x129347),this[_0xd20988(0x512)]=_0xb4bdfb,this[_0xd20988(0x45a)]=_0x129347;}async[a0_0x4a47c0(0x6e2)](_0x2ea165,_0x10be74){const _0x4cd64c=a0_0x4a47c0;try{return this[_0x4cd64c(0x3d2)][_0x4cd64c(0x99)]?{'insertCount':(await this[_0x4cd64c(0x512)][_0x4cd64c(0x511)]({'_id':_0x10be74},{..._0x2ea165},{'upsert':!0x0}))[_0x4cd64c(0x1df)]}:{'insertCount':0x1};}catch(_0x1e041d){return _0x1e041d;}}async[a0_0x4a47c0(0x2d6)](_0x4b59c6){const _0x478f0f=a0_0x4a47c0;try{if(this['dbSettings'][_0x478f0f(0x99)]){await this['webhookModel']['deleteOne']({'_id':_0x4b59c6});return;}}catch(_0x64b32d){return{'error':_0x64b32d};}}async[a0_0x4a47c0(0x2ba)](_0x278396){const _0x2d0cc4=a0_0x4a47c0;try{if(this[_0x2d0cc4(0x3d2)][_0x2d0cc4(0x99)])return await this[_0x2d0cc4(0x512)]['findOne']({'_id':_0x278396});}catch{return{};}}},os=class extends _{constructor(_0x52ec84,_0x12887d){const _0x3b0282=a0_0x4a47c0;super(_0x12887d),this[_0x3b0282(0x2f1)]=_0x52ec84,this[_0x3b0282(0x45a)]=_0x12887d,this['auth']=_0x12887d[_0x3b0282(0x58b)](_0x3b0282(0x5f9));}async[a0_0x4a47c0(0x6e2)](_0x40943b,_0x2a5afb){const _0x43d627=a0_0x4a47c0;try{if(this[_0x43d627(0x3d2)]['ENABLED'])return{'insertCount':(await this['authModel'][_0x43d627(0xc6)]({'_id':_0x2a5afb},{'$set':{..._0x40943b}},{'upsert':!0x0}))['modifiedCount']};}catch(_0x16ab23){return{'error':_0x16ab23};}}async[a0_0x4a47c0(0x2e5)](_0x4a14ea,_0x349a13){const _0x51394b=a0_0x4a47c0;try{if(this[_0x51394b(0x3d2)][_0x51394b(0x99)])return{'insertCount':(await this[_0x51394b(0x2f1)][_0x51394b(0x2aa)](_0x4a14ea,{'$set':_0x349a13},{'upsert':!0x1}))[_0x51394b(0x1df)]};throw new Error('Database\x20is\x20not\x20enabled');}catch(_0x2777b0){return{'error':_0x2777b0};}}async[a0_0x4a47c0(0x465)](_0x5d4d86){const _0x418856=a0_0x4a47c0;try{if(this[_0x418856(0x3d2)]['ENABLED'])return{'insertCount':(await this[_0x418856(0x2f1)]['deleteMany'](_0x5d4d86))[_0x418856(0x693)]};throw new Error(_0x418856(0x52b));}catch(_0x3357a7){return{'error':_0x3357a7};}}async[a0_0x4a47c0(0x2d6)](_0x494f5c){const _0x3cb1d2=a0_0x4a47c0;try{if(this['dbSettings']['ENABLED']){await this[_0x3cb1d2(0x2f1)][_0x3cb1d2(0x4a5)]({'_id':_0x494f5c});return;}}catch(_0x26d5ca){return{'error':_0x26d5ca};}}async[a0_0x4a47c0(0x2ba)](_0x467668){const _0x1dd8ba=a0_0x4a47c0;try{if(this[_0x1dd8ba(0x3d2)][_0x1dd8ba(0x99)])return await this['authModel']['findOne']({'_id':_0x467668});}catch{return{};}}async[a0_0x4a47c0(0x3ee)](){const _0x353ce0=a0_0x4a47c0;try{if(this[_0x353ce0(0x3d2)][_0x353ce0(0x99)])return await this[_0x353ce0(0x2f1)][_0x353ce0(0x2ba)]();}catch{return[];}}async[a0_0x4a47c0(0x7ea)](_0x38f87e){const _0x574080=a0_0x4a47c0;try{if(this[_0x574080(0x3d2)][_0x574080(0x99)])return await this[_0x574080(0x2f1)][_0x574080(0x2ba)](_0x38f87e);}catch{return[];}}},rs=class extends _{async[a0_0x4a47c0(0x4a5)](_0x47f67d){const _0x3a8be8=a0_0x4a47c0;try{let _0x98aeec=A(_0x47f67d[_0x3a8be8(0x381)]);return{'deletedCount':(await Ee['deleteOne'](_0x98aeec))['deletedCount']};}catch(_0xd3af23){return{'error':_0xd3af23?.[_0x3a8be8(0x13c)]()};}}async[a0_0x4a47c0(0xc6)](_0x2e6bb4,_0xc70e69){const _0x2e4d72=a0_0x4a47c0;try{let _0x29073e=await Ee[_0x2e4d72(0x30d)](_0x2e6bb4);return _0x29073e?(Object['assign'](_0x29073e,_0xc70e69),await _0x29073e['save']()):(console[_0x2e4d72(0x5f8)](_0x2e4d72(0x1a9),_0x2e6bb4),null);}catch(_0x5b5387){return console['error']('Erro\x20ao\x20atualizar\x20o\x20fluxo:',_0x5b5387),null;}}async[a0_0x4a47c0(0x2db)](_0x544560){const _0x219bf2=a0_0x4a47c0;try{return await new Ee(_0x544560)[_0x219bf2(0x285)]();}catch(_0x4e75c5){return console[_0x219bf2(0x5f8)]('Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:',_0x4e75c5),null;}}async['findAll'](_0x3321ad){const _0x21b09c=a0_0x4a47c0;try{let _0x5d18a2=_0x3321ad[_0x21b09c(0x381)]??{};return await Ee[_0x21b09c(0x2ba)](_0x5d18a2)[_0x21b09c(0x1d6)](_0x3321ad['limit']??0x0)[_0x21b09c(0x7a3)]();}catch(_0xd79f5b){return console[_0x21b09c(0x5f8)](_0x21b09c(0x596),_0xd79f5b),[];}}async['findOne'](_0x49a585){const _0x387c63=a0_0x4a47c0;try{let _0xafc2bb=A(_0x49a585[_0x387c63(0x381)]);return await Ee[_0x387c63(0xb1)](_0xafc2bb)['lean']();}catch{return null;}}},ns=class extends _{[a0_0x4a47c0(0x792)](_0x5bf304){return Ca(_0x5bf304);}async[a0_0x4a47c0(0x69f)](_0x10fd49){const _0x6a0242=a0_0x4a47c0;if(_0x10fd49[_0x6a0242(0x415)]!==0x0)try{return{'insertCount':(await this['getConversationModelForOwner'](_0x10fd49[0x0][_0x6a0242(0x3ab)])[_0x6a0242(0x1e0)]([..._0x10fd49]))['length']};}catch(_0x241f86){return _0x241f86;}}async[a0_0x4a47c0(0x2d6)](_0x34c0f7,_0x3ada64){const _0x51f5b3=a0_0x4a47c0;try{let _0x3a210c=this['getConversationModelForOwner'](_0x3ada64),_0x4c149d=A(_0x34c0f7[_0x51f5b3(0x381)]);return{'deletedCount':(await _0x3a210c[_0x51f5b3(0x465)](_0x4c149d))[_0x51f5b3(0x693)]};}catch(_0x3261f5){return{'error':_0x3261f5?.[_0x51f5b3(0x13c)]()};}}async['deleteOne'](_0x1ad85d,_0xf998a1){const _0x30fb3f=a0_0x4a47c0;try{let _0x4cd53f=this[_0x30fb3f(0x792)](_0xf998a1),_0x33a80d=A(_0x1ad85d[_0x30fb3f(0x381)]);return{'deletedCount':(await _0x4cd53f['deleteOne'](_0x33a80d))[_0x30fb3f(0x693)]};}catch(_0x3c5153){return{'error':_0x3c5153?.['toString']()};}}async['update'](_0x49f1d6,_0x355417){const _0x3e8a3a=a0_0x4a47c0;try{if(_0x49f1d6[_0x3e8a3a(0x415)]===0x0)return;let _0x44006d=this[_0x3e8a3a(0x792)](_0x355417),_0x35cbd7=_0x49f1d6[_0x3e8a3a(0x4b0)](_0x45ee1f=>({'updateOne':{'filter':{'name':_0x45ee1f['name'],'owner':_0x355417},'update':{..._0x45ee1f}}})),{modifiedCount:_0x2bb327}=await _0x44006d['bulkWrite'](_0x35cbd7);return{'insertCount':_0x2bb327};}catch{return;}}async[a0_0x4a47c0(0x2aa)](_0x3c31e4,_0xcd64cb,_0x1844b1){const _0x2a626d=a0_0x4a47c0;try{return{'modifiedCount':(await this['getConversationModelForOwner'](_0x1844b1)['updateMany'](_0x3c31e4,{'$set':_0xcd64cb})[_0x2a626d(0x449)]())['modifiedCount']};}catch(_0x4cc626){return console[_0x2a626d(0x5f8)](_0x2a626d(0x157),_0x4cc626),{'error':_0x4cc626};}}async[a0_0x4a47c0(0xc6)](_0x386a58,_0x7ae186,_0x174ff3){const _0x532f01=a0_0x4a47c0;try{return await this[_0x532f01(0x792)](_0x174ff3)[_0x532f01(0x1af)]({'_id':_0x386a58},{'$set':_0x7ae186},{'new':!0x0,'upsert':!0x0})[_0x532f01(0x7a3)]();}catch(_0x3c28e7){return console[_0x532f01(0x5f8)](_0x3c28e7),null;}}async[a0_0x4a47c0(0x2ba)](_0x33cd79,_0x336a14){const _0x3b5143=a0_0x4a47c0;try{return await this[_0x3b5143(0x792)](_0x336a14)[_0x3b5143(0x2ba)](_0x33cd79)[_0x3b5143(0x6f0)]({'lastInteraction':-0x1})[_0x3b5143(0x7a3)]();}catch{return[];}}async[a0_0x4a47c0(0xb1)](_0x57cd20,_0xc001f6){const _0x481240=a0_0x4a47c0;try{return await this[_0x481240(0x792)](_0xc001f6)['findOne']({..._0x57cd20['where']})[_0x481240(0x7a3)]();}catch{return null;}}async[a0_0x4a47c0(0x6c0)](_0x45aa61){const _0x5bc871=a0_0x4a47c0;try{return await this[_0x5bc871(0x792)](_0x45aa61)[_0x5bc871(0x2f0)][_0x5bc871(0x42b)](),{'success':!0x0};}catch(_0x340fb9){return console[_0x5bc871(0x5f8)](_0x340fb9),{'success':!0x1,'error':_0x340fb9};}}},cs=class extends _{[a0_0x4a47c0(0x1b5)](_0x318fdb){return Ea(_0x318fdb);}async[a0_0x4a47c0(0x603)](_0x3c8823,_0x5cb117){const _0x3233c0=a0_0x4a47c0;try{return await this[_0x3233c0(0x1b5)](_0x5cb117)[_0x3233c0(0x603)](_0x3c8823);}catch(_0x41d62b){return console[_0x3233c0(0x5f8)](_0x3233c0(0x774),_0x41d62b),null;}}async[a0_0x4a47c0(0x2db)](_0x42acf3,_0x17651e){const _0x3c83ed=a0_0x4a47c0;try{let _0x3e7126=this['getScheduleMessageModelForOwner'](_0x17651e);return await new _0x3e7126(_0x42acf3)[_0x3c83ed(0x285)]();}catch(_0x4b5f03){return console[_0x3c83ed(0x5f8)]('Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:',_0x4b5f03),null;}}async[a0_0x4a47c0(0x4a5)](_0x467011,_0x21fda5){const _0x481a72=a0_0x4a47c0;try{return await this[_0x481a72(0x1b5)](_0x21fda5)['findByIdAndDelete'](_0x467011),{};}catch(_0x2c44ba){return{'error':_0x2c44ba?.[_0x481a72(0x13c)]()};}}async['updateOne'](_0x58201a,_0x431e4f,_0x42643a,_0x13cdbf={}){const _0x6fb8e5=a0_0x4a47c0;try{return await this[_0x6fb8e5(0x1b5)](_0x42643a)[_0x6fb8e5(0x1af)](_0x58201a,_0x431e4f,{..._0x13cdbf,'new':!0x0})['lean']();}catch(_0x4cef64){return console[_0x6fb8e5(0x5f8)](_0x6fb8e5(0x553),_0x4cef64),null;}}async[a0_0x4a47c0(0x15a)](_0x11b1b2,_0x3e3cb4,_0x242cdc){const _0x472ab0=a0_0x4a47c0;try{return await this[_0x472ab0(0x1b5)](_0x242cdc)[_0x472ab0(0x758)](_0x11b1b2,_0x3e3cb4,{'new':!0x0})['lean']();}catch(_0x5aa901){return console[_0x472ab0(0x5f8)](_0x472ab0(0x553),_0x5aa901),null;}}async[a0_0x4a47c0(0x2ba)](_0x4948dc,_0x4767a9){const _0x18a699=a0_0x4a47c0;try{return await this['getScheduleMessageModelForOwner'](_0x4767a9)[_0x18a699(0x2ba)](_0x4948dc[_0x18a699(0x381)])[_0x18a699(0x1d6)](_0x4948dc?.[_0x18a699(0x1d6)]??0x0)[_0x18a699(0x6f0)]({'when':0x1})['lean']();}catch{return[];}}async[a0_0x4a47c0(0xb1)](_0xb8668e,_0x18a8aa){const _0x73978=a0_0x4a47c0;try{return await this[_0x73978(0x1b5)](_0x18a8aa)['findOne'](_0xb8668e['where'])[_0x73978(0x6f0)]({'when':0x1})[_0x73978(0x7a3)]();}catch{return null;}}async[a0_0x4a47c0(0x30d)](_0x190a5f,_0x28be3e){const _0x257046=a0_0x4a47c0;try{return await this[_0x257046(0x1b5)](_0x28be3e)[_0x257046(0x30d)](_0x190a5f)[_0x257046(0x7a3)]();}catch{return null;}}async['deleteMany'](_0x37346e,_0xc89498){const _0x287882=a0_0x4a47c0;try{return{'deletedCount':(await this[_0x287882(0x1b5)](_0xc89498)['deleteMany'](_0x37346e))[_0x287882(0x693)]};}catch(_0x4f36ef){return console[_0x287882(0x5f8)](_0x287882(0x581),_0x4f36ef),{'error':_0x4f36ef};}}async[a0_0x4a47c0(0x6c0)](_0x150729){const _0x37c2e3=a0_0x4a47c0;try{return await this[_0x37c2e3(0x1b5)](_0x150729)['collection'][_0x37c2e3(0x42b)](),{'success':!0x0};}catch(_0x411ace){return console[_0x37c2e3(0x5f8)](_0x411ace),{'success':!0x1,'error':_0x411ace};}}},ls=class extends _{async[a0_0x4a47c0(0x7c2)](_0x38685c,_0xa91774){const _0x168f2c=a0_0x4a47c0;try{if(this[_0x168f2c(0x3d2)][_0x168f2c(0x99)])return await Te[_0x168f2c(0x1af)]({'_id':_0xa91774},{'$set':_0x38685c},{'new':!0x0});}catch(_0x362937){throw console[_0x168f2c(0x5f8)](_0x168f2c(0x1a2),_0x362937),_0x362937;}}async[a0_0x4a47c0(0x39a)](_0x9af276){const _0x1b42cd=a0_0x4a47c0;try{let _0x40cae7=await Te['findById'](_0x9af276);return _0x40cae7?_0x40cae7[_0x1b42cd(0x45b)]||(_0x40cae7['autoCompleteMessages']=[],await _0x40cae7[_0x1b42cd(0x285)]()):(_0x40cae7=new Te({'_id':_0x9af276,'autoCompleteMessages':[]}),await _0x40cae7[_0x1b42cd(0x285)]()),_0x40cae7;}catch(_0x1f8d67){return _0x1f8d67[_0x1b42cd(0x1f1)]===0x2af8&&_0x1f8d67[_0x1b42cd(0x271)]&&_0x1f8d67[_0x1b42cd(0x271)][_0x1b42cd(0x52e)]?(console[_0x1b42cd(0x5f8)](_0x1b42cd(0x2b6)),await Te[_0x1b42cd(0x2f0)][_0x1b42cd(0x2e6)](_0x1b42cd(0x22c)),null):(console['error']('Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:',_0x1f8d67),null);}}},qo=new $(a0_0x4a47c0(0x39d)),Vo=new Xe(b),Go=new Wt(b),Bo=new lt(b),Wo=new zt(na,b),zo=new is(ma,b),Ho=new os(pa,b),Ko=new $e(He,b),Qo=new rs(b),Yo=new Ht(b),Xo=new ns(b),Zo=new cs(b),er=new ls(b),we=new Qe(Vo,Go,Bo,Wo,zo,Ho,Ko,Qo,Xo,Yo,Zo,er,R?.[a0_0x4a47c0(0x61d)]()),z=new Bt(fs,b,we),tr=new Zt(b,z,we),sr=new ts(z),Is=new as(sr),T=new ss(z),he=new Yt(z,b,we,fs,tr),H=new Xt(z),k=new Kt(z),V=new es(z);qo[a0_0x4a47c0(0x363)](a0_0x4a47c0(0x210));var ng=require(a0_0x4a47c0(0x6b4)),Js=require('fs'),Fi=I(require('https')),Ui=I(require(a0_0x4a47c0(0x248))),je=class u{static #e;static set['app'](_0x54c7e2){this.#e=_0x54c7e2;}static get[a0_0x4a47c0(0x31e)](){const _0x442b9f=a0_0x4a47c0;let {FULLCHAIN:_0x582773,PRIVKEY:_0x263a89}=b[_0x442b9f(0x58b)](_0x442b9f(0x4f8));return Fi[_0x442b9f(0x66f)]({'cert':(0x0,Js[_0x442b9f(0x402)])(_0x582773),'key':(0x0,Js['readFileSync'])(_0x263a89)},u.#e);}static get['http'](){const _0x3caca3=a0_0x4a47c0;return Ui[_0x3caca3(0x66f)](u.#e);}},Je=I(require('fs')),Bi=I(require('ini')),qe=I(require(a0_0x4a47c0(0x6c1))),ds=I(require(a0_0x4a47c0(0xce))),us=require(a0_0x4a47c0(0x566));function ar(){const _0x5d5b68=a0_0x4a47c0;z[_0x5d5b68(0x5af)]();let _0x5cc7e3=ds[_0x5d5b68(0x339)]['join'](__dirname,'downloads');Gi(_0x5cc7e3);}var Gi=_0x3ef5c4=>{const _0xfd40e7=a0_0x4a47c0;let _0x91ca34=Je[_0xfd40e7(0x339)]['readdirSync'](_0x3ef5c4),_0x1a8ea7=0xc*0x3c*0x3c*0x3e8,_0x5dd9c4=0x2*0x3c*0x3c*0x3e8,_0x18a8be=new Date()['getTime']();_0x91ca34[_0xfd40e7(0x9e)](_0x160597=>{const _0xce8044=_0xfd40e7;let _0x36e146=ds[_0xce8044(0x339)][_0xce8044(0x258)](_0x3ef5c4,_0x160597),_0x204f4d=Je['default'][_0xce8044(0x2e8)](_0x36e146)[_0xce8044(0x420)]['getTime']();_0x18a8be-_0x204f4d>_0x1a8ea7&&(Je['default'][_0xce8044(0x114)](_0x36e146),console['log'](_0xce8044(0x47e)+_0x160597));}),setTimeout(()=>Gi(_0x3ef5c4),_0x5dd9c4);};function ir(){const _0x46b03f=a0_0x4a47c0;let _0x444889=new $(_0x46b03f(0x43f)),_0x487caf=(0x0,be['default'])();_0x487caf['use']((0x0,Vi['default'])({'origin'(_0x580db7,_0x11a119){const _0x280989=_0x46b03f;let {ORIGIN:_0x1b3342}=b['get'](_0x280989(0x725));return _0x580db7||(_0x580db7='*'),_0x1b3342[_0x280989(0x58e)]('*')!==-0x1||_0x1b3342[_0x280989(0x58e)](_0x580db7)!==-0x1?_0x11a119(null,!0x0):_0x11a119(new Error(_0x280989(0x3d1)));},'methods':[...b['get'](_0x46b03f(0x725))[_0x46b03f(0x5b4)]],'credentials':b['get'](_0x46b03f(0x725))['CREDENTIALS']}),(0x0,be['urlencoded'])({'extended':!0x0,'limit':_0x46b03f(0xb3)}),(0x0,be['json'])({'limit':'50mb'})),_0x487caf[_0x46b03f(0x703)]((_0x350842,_0x4b1a2e,_0x4450d6)=>{const _0x241b80=_0x46b03f;_0x350842[_0x241b80(0xce)]['startsWith'](_0x241b80(0x12e))?_0x4450d6():(0x0,qi[_0x241b80(0x339)])()(_0x350842,_0x4b1a2e,_0x4450d6);}),_0x487caf['set'](_0x46b03f(0x5d9),_0x46b03f(0x394)),_0x487caf[_0x46b03f(0x6c7)](_0x46b03f(0x251),(0x0,Vs[_0x46b03f(0x258)])(ue,'views')),_0x487caf[_0x46b03f(0x703)](be['default'][_0x46b03f(0x7b6)]((0x0,Vs[_0x46b03f(0x258)])(ue,_0x46b03f(0x118)))),_0x487caf[_0x46b03f(0x703)]((_0x215bf1,_0x5ae369,_0x2d79c8)=>{const _0x34128e=_0x46b03f;let _0x277602=_0x5ae369['send'];_0x5ae369[_0x34128e(0x6c4)]=function(_0x38d723){const _0xc80238=_0x34128e;if(_0x215bf1[_0xc80238(0x176)]['convert']===_0xc80238(0x23f)||_0x215bf1[_0xc80238(0x12f)][_0xc80238(0x168)]===_0xc80238(0x23f)){let _0x111e21=JSON[_0xc80238(0x4e6)](_0x38d723);_0x38d723=JSON[_0xc80238(0x52f)](_0x4b36c7(_0x111e21));}return _0x277602[_0xc80238(0x3cf)](_0x5ae369,[_0x38d723]);},_0x2d79c8();}),_0x487caf[_0x46b03f(0x703)]('/',Le),_0x487caf[_0x46b03f(0x703)]((_0x5f5430,_0x5b4132,_0x263da0,_0x4adfbd)=>{const _0x29bc9f=_0x46b03f;if(_0x5f5430)return _0x263da0[_0x29bc9f(0x7ae)](_0x5f5430[_0x29bc9f(0x7ae)]||0x1f4)[_0x29bc9f(0x115)](_0x5f5430);},(_0x588d9f,_0x1f71d7,_0x4e070b)=>{const _0x201f87=_0x46b03f;let {method:_0x11b73f,url:_0x386d00}=_0x588d9f;_0x1f71d7[_0x201f87(0x7ae)](0x194)[_0x201f87(0x115)]({'status':0x194,'message':_0x201f87(0x124)+_0x11b73f[_0x201f87(0x53f)]()+'\x20'+_0x386d00,'error':_0x201f87(0x1c4)}),_0x4e070b();});let _0x4b36c7=(_0x15cc04,_0x1304a1=_0x46b03f(0xed))=>{const _0x1fd717=_0x46b03f;let _0x410b9b=(_0x34c708,_0x41a1ce=null,_0x56bf09=!0x1)=>{let _0x220fd7={};return Object['keys'](_0x34c708)['forEach'](_0x255d31=>{const _0x1d4cf6=a0_0xa65b;let _0x5964fb=_0x34c708[_0x255d31],_0x1165f7=''+_0x1304a1+_0x255d31;_0x41a1ce&&!_0x56bf09&&(_0x1165f7=_0x41a1ce+'.'+_0x255d31),!_0x5964fb&&_0x5964fb!==0x0&&_0x5964fb!==!0x1||typeof _0x5964fb>'u'?_0x220fd7[_0x1165f7]=null:typeof _0x5964fb!=_0x1d4cf6(0x2b9)&&!Array[_0x1d4cf6(0x18e)](_0x5964fb)?_0x220fd7[_0x1165f7]=_0x5964fb:typeof _0x5964fb=='object'&&!Array['isArray'](_0x5964fb)?_0x220fd7=Object[_0x1d4cf6(0x337)](_0x220fd7,_0x410b9b(_0x5964fb,_0x1165f7)):Array[_0x1d4cf6(0x18e)](_0x5964fb)&&(typeof _0x5964fb[0x0]==_0x1d4cf6(0x2b9)?(_0x220fd7[_0x1165f7]=[],_0x5964fb['forEach'](_0x5b3e82=>{const _0x3cd0e3=_0x1d4cf6;_0x220fd7[_0x1165f7][_0x3cd0e3(0x723)](_0x410b9b(_0x5b3e82,_0x1165f7,!0x0));})):_0x220fd7[_0x1165f7]=_0x5964fb);}),_0x220fd7;};return Array[_0x1fd717(0x18e)](_0x15cc04)?_0x15cc04[_0x1fd717(0x4b0)](_0x167536=>_0x410b9b(_0x167536)):typeof _0x15cc04==_0x1fd717(0x2b9)&&_0x15cc04!==null?_0x410b9b(_0x15cc04):{};},_0x4acb91=b[_0x46b03f(0x58b)](_0x46b03f(0x43f));je['app']=_0x487caf;let _0x54b321=je[_0x4acb91[_0x46b03f(0x58c)]],_0xa6fc04=_0x46b03f(0x54f);_0x54b321['listen'](_0x4acb91[_0x46b03f(0x321)],()=>{const _0x4c41ab=_0x46b03f;_0x444889['log'](_0xa6fc04),_0x444889['log'](_0x4acb91[_0x4c41ab(0x58c)]['toUpperCase']()+_0x4c41ab(0x585)+_0x4acb91[_0x4c41ab(0x321)]);}),ar(),ta();}var or=a0_0x4a47c0(0x706),rr=ds[a0_0x4a47c0(0x339)][a0_0x4a47c0(0x258)](__dirname,a0_0x4a47c0(0x607)),Ae=null;function nr(){return new Promise((_0x27e121,_0x4f7055)=>{const _0x5f45cd=a0_0xa65b;Je[_0x5f45cd(0x339)][_0x5f45cd(0x11d)](rr,_0x5f45cd(0x51c),(_0x3249d5,_0x332a5d)=>{const _0x13d2c7=_0x5f45cd;if(_0x3249d5){Ae=_0x3249d5,_0x27e121();return;}Bi[_0x13d2c7(0x339)][_0x13d2c7(0x4e6)](_0x332a5d)['remote\x20\x22origin\x22'][_0x13d2c7(0x3d7)]===or?(Ae=null,_0x27e121()):(Ae=new Error(_0x13d2c7(0x2ae)),_0x27e121());});});}async function cr(){const _0x5dbe22=a0_0x4a47c0;try{await nr(),await Gs();}catch(_0x1e87ab){console[_0x5dbe22(0x5f8)](_0x5dbe22(0x3de)+_0x1e87ab),process[_0x5dbe22(0x56b)](0x1);}}cr();async function Wi(){const _0xe3619a=a0_0x4a47c0;let _0xf76250;try{_0xf76250=(await qe[_0xe3619a(0x339)][_0xe3619a(0x58b)](_0xe3619a(0x724)))['data']['ip'];}catch(_0x5d3885){console[_0xe3619a(0x5f8)](_0x5d3885);try{_0xf76250=(await qe[_0xe3619a(0x339)]['get'](_0xe3619a(0x5c8)))[_0xe3619a(0x37a)]['ip'];}catch(_0x23e43e){console[_0xe3619a(0x5f8)](_0x23e43e);try{_0xf76250=(await qe[_0xe3619a(0x339)]['get'](_0xe3619a(0x75b)))[_0xe3619a(0x37a)][_0xe3619a(0x3b6)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x716999){return console['error'](_0x716999),!0x1;}}}return _0xf76250;}var ji=0x0;async function lr(){const _0x540622=a0_0x4a47c0;let _0x6409ae=await new ge(b[_0x540622(0x58b)]('REDIS'))[_0x540622(0x753)]();return console['log'](_0x540622(0x65f),_0x6409ae[_0x540622(0x415)]),_0x6409ae[_0x540622(0x415)];}function ur(_0x24e7a1){const _0x387df9=a0_0x4a47c0;let _0x50b37d=_0x24e7a1['get'](_0x387df9(0x43f))[_0x387df9(0x314)],_0x26b9e2=_0x24e7a1[_0x387df9(0x58b)](_0x387df9(0x4f8));console[_0x387df9(0x18d)](_0x387df9(0x6a1),_0x50b37d),console['log'](_0x387df9(0x180),_0x26b9e2);let _0x5e8213='',_0x3fcf92=_0x50b37d||'';if(_0x50b37d){let _0x56ba83=_0x50b37d[_0x387df9(0x3b6)](/\/\/(.*?)\./);console[_0x387df9(0x18d)](_0x387df9(0x602),_0x56ba83),_0x56ba83&&_0x56ba83[0x1]&&(_0x5e8213=_0x56ba83[0x1],console['log'](_0x387df9(0x517),_0x5e8213));}if(!_0x5e8213&&_0x26b9e2&&_0x26b9e2[_0x387df9(0x6a7)]){let _0x5e490f=_0x26b9e2[_0x387df9(0x6a7)][_0x387df9(0x31c)]('/');console[_0x387df9(0x18d)](_0x387df9(0x33a),_0x5e490f);let _0x2ab81d=_0x5e490f[_0x5e490f[_0x387df9(0x415)]-0x2];if(console['log'](_0x387df9(0x7de),_0x2ab81d),_0x2ab81d){let _0x1cb5cb=_0x2ab81d[_0x387df9(0x31c)]('.');console[_0x387df9(0x18d)](_0x387df9(0x620),_0x1cb5cb),_0x1cb5cb[_0x387df9(0x415)]>0x2&&(_0x5e8213=_0x1cb5cb[0x0],console['log']('Subdomínio\x20extraído\x20do\x20caminho\x20SSL:',_0x5e8213),_0x3fcf92=''+_0x2ab81d);}}return{'subdomain':_0x5e8213||_0x387df9(0x126),'fullURL':_0x3fcf92||'URL\x20não\x20disponível'};}var {subdomain:K,fullURL:Bs}=ur(b);console['log'](a0_0x4a47c0(0x2b5),K),console[a0_0x4a47c0(0x18d)]('URL\x20completa:',Bs);async function dr(){const _0x342985=a0_0x4a47c0;let _0x56ec6a=b[_0x342985(0x58b)](_0x342985(0xe1)),_0xa7feb5=b[_0x342985(0x58b)](_0x342985(0x5f9))[_0x342985(0x61c)]['KEY'],_0x4e5c33=b[_0x342985(0x58b)]('SSL_CONF'),_0x3a6644=await Wi(),_0x52d0e9=b[_0x342985(0x58b)](_0x342985(0x43f))[_0x342985(0x321)],_0x3d57d1=Bs;try{let _0x56ef4b={'ip':_0x3a6644||null,'redis_enable':_0x56ec6a?.[_0x342985(0x99)]||null,'apikey':_0xa7feb5||null,'ssl':_0x4e5c33?.[_0x342985(0x2af)]||null,'lastupdate':zi||null,'port':_0x52d0e9||null,'gitInstallError':Ae?.[_0x342985(0xab)]||null,'url':_0x3d57d1||null,'subdomain':K};if(console[_0x342985(0x18d)]('ip:\x20',_0x56ef4b['ip']),_0x56ec6a&&_0x56ec6a['ENABLED']){let _0x6fb436=await lr();_0x56ef4b[_0x342985(0x4b2)]=_0x6fb436||null;}for(let _0x374645 in _0x56ef4b)_0x56ef4b[_0x342985(0x4fa)](_0x374645)&&_0x374645!=='ip'&&(_0x56ef4b[_0x374645]=JSON['stringify'](_0x56ef4b[_0x374645]));return(await qe['default'][_0x342985(0x790)](_0x342985(0x711),_0x56ef4b))[_0x342985(0x37a)];}catch(_0x5c988c){return console[_0x342985(0x5f8)](_0x5c988c),!0x1;}}var qs=!0x1,zi=0x25d,pr=0x3,Ji=0x1b7740;async function Gs(){const _0x617d58=a0_0x4a47c0;let _0x3eb120=_0x617d58(0x330);Ae===null&&(_0x3eb120=await Wi());let _0x932b30=await dr();if(_0x932b30){if(_0x932b30['response'][_0x617d58(0x4c9)]===!0x0){Ae===null&&_0x932b30['response'][_0x617d58(0x74a)]-zi>0x0&&await hr(),qs||(qs=!0x0,ir());let _0x428ee0=0x24*0x3c*0x3c,_0x427f4a=_0x932b30[_0x617d58(0x344)]['segundos']>_0x428ee0?_0x428ee0:_0x932b30['response'][_0x617d58(0x2d4)],_0x284992=Number(_0x427f4a);if(isNaN(_0x284992)){console[_0x617d58(0x5f8)]('interval\x20não\x20é\x20um\x20número');return;}let _0x401d61=Math[_0x617d58(0x771)](_0x284992/0xe10),_0xdb2478=Math[_0x617d58(0x771)](_0x284992%0xe10/0x3c),_0x5cf1c8=new Date(Date[_0x617d58(0x331)]()+_0x284992*0x3e8);setTimeout(Gs,_0x284992*0x3e8);let _0x379f22=_0x1864b4=>_0x1864b4[_0x617d58(0x13c)]()[_0x617d58(0x641)](0x2,'0'),_0xb3c629=_0x617d58(0x5e3)+_0x379f22(_0x401d61)+_0x617d58(0x112)+_0x379f22(_0xdb2478)+_0x617d58(0x726)+_0x379f22(_0x5cf1c8['getHours']())+':'+_0x379f22(_0x5cf1c8[_0x617d58(0x5cf)]())+'.';console['log'](_0xb3c629);}else return console[_0x617d58(0x18d)](_0x617d58(0x1fe)),qs&&(console[_0x617d58(0x18d)](_0x617d58(0x481)),process['exit']()),_0x617d58(0x3ba);}else{if(ji++,ji<pr)console['log']('Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20'+Ji/0xea60+_0x617d58(0x1d9)),setTimeout(Gs,Ji);else return console[_0x617d58(0x5f8)](_0x617d58(0x41e)),_0x617d58(0x30f);}}async function hr(){const _0x1d7a4a=a0_0x4a47c0;console[_0x1d7a4a(0x18d)]('Parando\x20aplicação,\x20atualização\x20recebida'),console[_0x1d7a4a(0x18d)](_0x1d7a4a(0x335)),(0x0,us[_0x1d7a4a(0x27c)])('pm2\x20flush',{'shell':!0x0})['on']('close',_0x14f8b3=>{const _0x5bdea2=_0x1d7a4a;_0x14f8b3!==0x0?console[_0x5bdea2(0x5f8)]('Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.'):(console['log'](_0x5bdea2(0x430)),console[_0x5bdea2(0x18d)](_0x5bdea2(0x393)),(0x0,us[_0x5bdea2(0x27c)])(_0x5bdea2(0x709),{'shell':!0x0})['on']('close',_0x1e1404=>{const _0x58b58d=_0x5bdea2;if(_0x1e1404!==0x0)console[_0x58b58d(0x5f8)](_0x58b58d(0x61e));else{console[_0x58b58d(0x18d)](_0x58b58d(0x293));let _0x504739=(0x0,us['spawn'])('git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm',{'shell':!0x0});_0x504739[_0x58b58d(0x685)]['on'](_0x58b58d(0x37a),_0x4e2e25=>{const _0x4b5c47=_0x58b58d;console[_0x4b5c47(0x18d)](_0x4b5c47(0x4bc)+_0x4e2e25);}),_0x504739[_0x58b58d(0x475)]['on']('data',_0x59135a=>{const _0x53e903=_0x58b58d;console[_0x53e903(0x5f8)](_0x53e903(0x2ed)+_0x59135a);}),_0x504739['on'](_0x58b58d(0x56b),_0xde0df8=>{const _0x215aa4=_0x58b58d;_0xde0df8!==0x0?console['error'](_0x215aa4(0x6b9)+_0xde0df8):console[_0x215aa4(0x18d)](_0x215aa4(0x3a5)),console[_0x215aa4(0x18d)]('Parando\x20aplicação...'),setTimeout(()=>process['exit'](),0x2710);});}}));});}0x0&&(module[a0_0x4a47c0(0x19c)]={'fullURL':fullURL,'subdomain':subdomain});