const a0_0x490cab=a0_0xe58b;(function(_0x16c42f,_0x5f54fa){const _0x5b075f=a0_0xe58b,_0xf7d18=_0x16c42f();while(!![]){try{const _0x39dd78=parseInt(_0x5b075f(0x749))/0x1*(parseInt(_0x5b075f(0x7df))/0x2)+-parseInt(_0x5b075f(0x3e0))/0x3+parseInt(_0x5b075f(0x1df))/0x4*(-parseInt(_0x5b075f(0x41c))/0x5)+-parseInt(_0x5b075f(0x3d8))/0x6*(-parseInt(_0x5b075f(0x15a))/0x7)+parseInt(_0x5b075f(0x454))/0x8*(-parseInt(_0x5b075f(0x709))/0x9)+parseInt(_0x5b075f(0x4e5))/0xa*(parseInt(_0x5b075f(0x758))/0xb)+parseInt(_0x5b075f(0x820))/0xc;if(_0x39dd78===_0x5f54fa)break;else _0xf7d18['push'](_0xf7d18['shift']());}catch(_0x4bda08){_0xf7d18['push'](_0xf7d18['shift']());}}}(a0_0x102b,0x4ff04));var zi=Object[a0_0x490cab(0x14c)],Ge=Object[a0_0x490cab(0x7d6)],Hi=Object['getOwnPropertyDescriptor'],Ki=Object[a0_0x490cab(0x3a2)],Qi=Object[a0_0x490cab(0x6b8)],Yi=Object[a0_0x490cab(0x58b)]['hasOwnProperty'],Xi=(_0x18bc2f,_0xf1745a)=>{for(var _0x1d80fd in _0xf1745a)Ge(_0x18bc2f,_0x1d80fd,{'get':_0xf1745a[_0x1d80fd],'enumerable':!0x0});},Ws=(_0x13d4dc,_0x47234c,_0xdadcd,_0x1633b5)=>{const _0x369346=a0_0x490cab;if(_0x47234c&&typeof _0x47234c==_0x369346(0x328)||typeof _0x47234c==_0x369346(0x42b)){for(let _0x31491c of Ki(_0x47234c))!Yi[_0x369346(0x78b)](_0x13d4dc,_0x31491c)&&_0x31491c!==_0xdadcd&&Ge(_0x13d4dc,_0x31491c,{'get':()=>_0x47234c[_0x31491c],'enumerable':!(_0x1633b5=Hi(_0x47234c,_0x31491c))||_0x1633b5[_0x369346(0x152)]});}return _0x13d4dc;},A=(_0x4d814b,_0x221154,_0x5db1f4)=>(_0x5db1f4=_0x4d814b!=null?zi(Qi(_0x4d814b)):{},Ws(_0x221154||!_0x4d814b||!_0x4d814b[a0_0x490cab(0x125)]?Ge(_0x5db1f4,a0_0x490cab(0x73a),{'value':_0x4d814b,'enumerable':!0x0}):_0x5db1f4,_0x4d814b)),Zi=_0x390594=>Ws(Ge({},a0_0x490cab(0x125),{'value':!0x0}),_0x390594),hr={};Xi(hr,{'fullURL':()=>Gs,'subdomain':()=>X}),module['exports']=Zi(hr);var Ji=A(require(a0_0x490cab(0x1a8))),Hs=require('fs'),Ks=require(a0_0x490cab(0x427)),Qs=require('path'),Be=require('path'),ce=process[a0_0x490cab(0x5c2)](),be=(0x0,Be[a0_0x490cab(0x4c8)])(ce,'instances'),zs=(0x0,Be[a0_0x490cab(0x4c8)])(ce,a0_0x490cab(0x5da)),sn=(0x0,Be[a0_0x490cab(0x4c8)])(ce,'store',a0_0x490cab(0x42a)),ps=class{constructor(){this['loadEnv']();}[a0_0x490cab(0x715)](_0x2a22cf){return this['env'][_0x2a22cf];}['loadEnv'](){const _0x2e04b8=a0_0x490cab;this[_0x2e04b8(0x529)]=process[_0x2e04b8(0x529)]?.['DOCKER_ENV']!==_0x2e04b8(0x3b1)?this[_0x2e04b8(0x736)]():this[_0x2e04b8(0x14e)](),process[_0x2e04b8(0x529)]?.[_0x2e04b8(0x563)]==='true'&&(this[_0x2e04b8(0x529)][_0x2e04b8(0x164)]['TYPE']=_0x2e04b8(0x157),this[_0x2e04b8(0x529)][_0x2e04b8(0x164)][_0x2e04b8(0x60c)]=Number[_0x2e04b8(0x5d7)](process['env']?.[_0x2e04b8(0x43e)]??_0x2e04b8(0x6dd)));}[a0_0x490cab(0x736)](){const _0xc5f697=a0_0x490cab;return(0x0,Ks['load'])((0x0,Hs[_0xc5f697(0x339)])((0x0,Qs['join'])(zs,_0xc5f697(0x2b4)),{'encoding':_0xc5f697(0x303)}));}[a0_0x490cab(0x14e)](){const _0x3c650c=a0_0x490cab;return{'SERVER':{'TYPE':process[_0x3c650c(0x529)][_0x3c650c(0x819)],'PORT':Number[_0x3c650c(0x5d7)](process[_0x3c650c(0x529)][_0x3c650c(0x43e)]),'URL':process[_0x3c650c(0x529)][_0x3c650c(0x4a0)]},'CORS':{'ORIGIN':process[_0x3c650c(0x529)]['CORS_ORIGIN'][_0x3c650c(0x6e6)](','),'METHODS':process[_0x3c650c(0x529)]['CORS_METHODS']['split'](','),'CREDENTIALS':process['env']?.[_0x3c650c(0x6e0)]===_0x3c650c(0x3b1)},'SSL_CONF':{'PRIVKEY':process[_0x3c650c(0x529)]?.[_0x3c650c(0x1ed)],'FULLCHAIN':process[_0x3c650c(0x529)]?.[_0x3c650c(0x212)]},'STORE':{'CLEANING_INTERVAL':Number[_0x3c650c(0x7a4)](process[_0x3c650c(0x529)]?.[_0x3c650c(0x82a)])?Number[_0x3c650c(0x5d7)](process[_0x3c650c(0x529)][_0x3c650c(0x82a)]):void 0x0,'MESSAGES':process[_0x3c650c(0x529)]?.['STORE_MESSAGE']===_0x3c650c(0x3b1),'CONTACTS':process[_0x3c650c(0x529)]?.[_0x3c650c(0x301)]===_0x3c650c(0x3b1),'CHATS':process[_0x3c650c(0x529)]?.[_0x3c650c(0x485)]===_0x3c650c(0x3b1)},'DATABASE':{'CONNECTION':{'HOST':process[_0x3c650c(0x529)]?.[_0x3c650c(0x636)],'PORT':Number[_0x3c650c(0x5d7)](process[_0x3c650c(0x529)]?.['DATABASE_CONNECTION_HOST']),'USER':process[_0x3c650c(0x529)][_0x3c650c(0x600)],'PASSWORD':process[_0x3c650c(0x529)][_0x3c650c(0x271)],'URI':process['env']['DATABASE_CONNECTION_URI'],'DB_PREFIX_NAME':process[_0x3c650c(0x529)]['DATABASE_CONNECTION_DB_PREFIX_NAME']},'ENABLED':process['env']?.[_0x3c650c(0x1b3)]===_0x3c650c(0x3b1)},'REDIS':{'ENABLED':process['env']?.[_0x3c650c(0x5f0)]==='true','URI':process['env'][_0x3c650c(0x76c)]||'redis://127.0.0.1:6379','PREFIX_KEY':process[_0x3c650c(0x529)]['REDIS_PREFIX_KEY']||_0x3c650c(0x48b)},'LOG':{'LEVEL':process[_0x3c650c(0x529)]?.['LOG_LEVEL']['split'](','),'COLOR':process[_0x3c650c(0x529)]?.[_0x3c650c(0x30f)]===_0x3c650c(0x3b1)},'PROXY':process[_0x3c650c(0x529)]?.[_0x3c650c(0x2fb)]==='true','AUTHENTICATION':{'TYPE':process[_0x3c650c(0x529)]['AUTHENTICATION_TYPE'],'API_KEY':{'KEY':process[_0x3c650c(0x529)][_0x3c650c(0x1d0)]},'JWT':{'EXPIRIN_IN':Number[_0x3c650c(0x7a4)](process[_0x3c650c(0x529)]?.[_0x3c650c(0x573)])?Number[_0x3c650c(0x5d7)](process[_0x3c650c(0x529)][_0x3c650c(0x573)]):0xe10,'SECRET':process[_0x3c650c(0x529)][_0x3c650c(0x65a)]}}};}},b=new ps(),qi=A(require(a0_0x490cab(0x2f5))),ye=A(require(a0_0x490cab(0x4b0))),qs=require(a0_0x490cab(0x57e)),hs=A(require(a0_0x490cab(0x2dc))),gs=(_0x1d64f0=>(_0x1d64f0[a0_0x490cab(0x291)]=a0_0x490cab(0x26d),_0x1d64f0[a0_0x490cab(0x812)]=a0_0x490cab(0x779),_0x1d64f0[a0_0x490cab(0x49a)]=a0_0x490cab(0x60e),_0x1d64f0[a0_0x490cab(0x48a)]='\x1b[31m',_0x1d64f0[a0_0x490cab(0x136)]=a0_0x490cab(0x7c3),_0x1d64f0[a0_0x490cab(0x2be)]=a0_0x490cab(0x7bc),_0x1d64f0[a0_0x490cab(0x31c)]='\x1b[30m',_0x1d64f0))(gs||{}),Ys=(_0x343d89=>(_0x343d89['LOG']=a0_0x490cab(0x167),_0x343d89[a0_0x490cab(0x31c)]=a0_0x490cab(0x818),_0x343d89[a0_0x490cab(0x812)]=a0_0x490cab(0x5be),_0x343d89[a0_0x490cab(0x49a)]=a0_0x490cab(0x40b),_0x343d89['ERROR']=a0_0x490cab(0x3f7),_0x343d89[a0_0x490cab(0x136)]='\x1b[36m%s\x1b[0m',_0x343d89['VERBOSE']='\x1b[37m%s\x1b[0m',_0x343d89))(Ys||{}),Xs=(_0x5e57bb=>(_0x5e57bb[a0_0x490cab(0x291)]=a0_0x490cab(0x291),_0x5e57bb[a0_0x490cab(0x49a)]=a0_0x490cab(0x49a),_0x5e57bb[a0_0x490cab(0x812)]=a0_0x490cab(0x812),_0x5e57bb[a0_0x490cab(0x31c)]=a0_0x490cab(0x31c),_0x5e57bb[a0_0x490cab(0x48a)]='ERROR',_0x5e57bb['DEBUG']='DEBUG',_0x5e57bb[a0_0x490cab(0x2be)]=a0_0x490cab(0x2be),_0x5e57bb))(Xs||{}),Zs=(_0x2d97eb=>(_0x2d97eb[a0_0x490cab(0x291)]=a0_0x490cab(0x6c7),_0x2d97eb[a0_0x490cab(0x812)]=a0_0x490cab(0x7d1),_0x2d97eb[a0_0x490cab(0x49a)]=a0_0x490cab(0x127),_0x2d97eb[a0_0x490cab(0x31c)]=a0_0x490cab(0x290),_0x2d97eb['ERROR']=a0_0x490cab(0x1ea),_0x2d97eb['DEBUG']='\x1b[46m',_0x2d97eb[a0_0x490cab(0x2be)]=a0_0x490cab(0x4c9),_0x2d97eb))(Zs||{}),$=class{constructor(_0x334510='Logger'){const _0x950812=a0_0x490cab;this[_0x950812(0x774)]=_0x334510,this[_0x950812(0x3ec)]=b;}[a0_0x490cab(0x44c)](_0x2feb70){this['context']=_0x2feb70;}[a0_0x490cab(0x6f1)](_0x47a962,_0x47221e){const _0x46fdfb=a0_0x490cab;let _0x2c00cc=[];this[_0x46fdfb(0x3ec)][_0x46fdfb(0x715)](_0x46fdfb(0x291))[_0x46fdfb(0x676)][_0x46fdfb(0x5aa)](_0x182555=>_0x2c00cc[_0x46fdfb(0x3de)](Xs[_0x182555]));let _0x441526=typeof _0x47a962;_0x2c00cc[_0x46fdfb(0x3d0)](_0x47221e)&&(b[_0x46fdfb(0x715)]('LOG')[_0x46fdfb(0x15e)]?(console[_0x46fdfb(0x1bd)]('\x1b[1m'+Ys[_0x47221e],_0x46fdfb(0x630),(0x0,hs['default'])()[_0x46fdfb(0x51b)](_0x46fdfb(0x27e)),_0x46fdfb(0x5c1),gs[_0x47221e]+Zs[_0x47221e]+_0x46fdfb(0x27f),_0x47221e+'\x20\x1b[0m',_0x46fdfb(0x2f4),this[_0x46fdfb(0x774)]+'\x1b[0m',gs[_0x47221e],_0x441526!==_0x46fdfb(0x328)?_0x47a962:'',_0x46fdfb(0x5c1)),_0x441526===_0x46fdfb(0x328)&&console[_0x46fdfb(0x1bd)](_0x47a962,'\x0a')):console['log']((0x0,hs[_0x46fdfb(0x73a)])()['format'](_0x46fdfb(0x2e0)),_0x47221e+'\x20',''+this[_0x46fdfb(0x774)],_0x47a962));}[a0_0x490cab(0x1bd)](_0x1988aa){const _0x3e0f46=a0_0x490cab;this[_0x3e0f46(0x6f1)](_0x1988aa,_0x3e0f46(0x291));}[a0_0x490cab(0x79f)](_0x306b19){const _0x45e8a1=a0_0x490cab;this[_0x45e8a1(0x6f1)](_0x306b19,'INFO');}[a0_0x490cab(0x487)](_0x584a1e){const _0x15a9e0=a0_0x490cab;this[_0x15a9e0(0x6f1)](_0x584a1e,_0x15a9e0(0x49a));}[a0_0x490cab(0x7a9)](_0x36032a){const _0xfaf159=a0_0x490cab;this['console'](_0x36032a,_0xfaf159(0x48a));}[a0_0x490cab(0x331)](_0x2f7fe8){const _0xf40069=a0_0x490cab;this[_0xf40069(0x6f1)](_0x2f7fe8,'VERBOSE');}[a0_0x490cab(0x564)](_0x2a13f7){const _0xa2bf6e=a0_0x490cab;this[_0xa2bf6e(0x6f1)](_0x2a13f7,_0xa2bf6e(0x136));}['dark'](_0x3dbd93){const _0x4122de=a0_0x490cab;this[_0x4122de(0x6f1)](_0x3dbd93,_0x4122de(0x31c));}};function ea(){const _0x4018e8=a0_0x490cab;process['on'](_0x4018e8(0x242),(_0x8698fd,_0x3f87eb)=>{const _0x2573e3=_0x4018e8;new $(_0x2573e3(0x242))[_0x2573e3(0x7a9)]({'origin':_0x3f87eb,'stderr':process[_0x2573e3(0x476)]['fd'],'error':_0x8698fd});}),process['on'](_0x4018e8(0x5d6),(_0x4678ff,_0x29c36b)=>{const _0x34be9c=_0x4018e8;new $(_0x34be9c(0x5d6))['error']({'origin':_0x29c36b,'stderr':process[_0x34be9c(0x476)]['fd'],'error':_0x4678ff});});}var ta=A(require(a0_0x490cab(0x5b9))),ms=new ta[(a0_0x490cab(0x73a))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Se=require('mongoose'),Ae=A(require(a0_0x490cab(0x312))),We=new $(a0_0x490cab(0x378)),F=b['get'](a0_0x490cab(0x1da)),R=F[a0_0x490cab(0x3c3)]?F[a0_0x490cab(0x4b9)][a0_0x490cab(0x368)]?Ae['default'][a0_0x490cab(0x20f)](F[a0_0x490cab(0x4b9)][a0_0x490cab(0x368)],{'dbName':F[a0_0x490cab(0x4b9)][a0_0x490cab(0x784)]+'-whatsapp-api'}):Ae[a0_0x490cab(0x73a)]['createConnection'](a0_0x490cab(0x69b)+F[a0_0x490cab(0x4b9)][a0_0x490cab(0x1d5)]+':'+F[a0_0x490cab(0x4b9)][a0_0x490cab(0x60c)]+'?authSource=admin&readPreference=primary&directConnection=true',{'user':F[a0_0x490cab(0x4b9)][a0_0x490cab(0x468)],'pass':F['CONNECTION'][a0_0x490cab(0x6a4)],'dbName':F[a0_0x490cab(0x4b9)][a0_0x490cab(0x784)]+a0_0x490cab(0x597)}):null;F[a0_0x490cab(0x3c3)]&&We[a0_0x490cab(0x79f)]('ON\x20-\x20dbName:\x20'+R[a0_0x490cab(0x6de)]);var le=F[a0_0x490cab(0x3c3)]?F[a0_0x490cab(0x4b9)][a0_0x490cab(0x368)]?Ae[a0_0x490cab(0x73a)]['createConnection'](F[a0_0x490cab(0x4b9)][a0_0x490cab(0x368)],{'dbName':a0_0x490cab(0x7a0)}):Ae[a0_0x490cab(0x73a)][a0_0x490cab(0x20f)]('mongodb://'+F[a0_0x490cab(0x4b9)]['HOST']+':'+F[a0_0x490cab(0x4b9)]['PORT']+a0_0x490cab(0x22c),{'user':F[a0_0x490cab(0x4b9)][a0_0x490cab(0x468)],'pass':F[a0_0x490cab(0x4b9)][a0_0x490cab(0x6a4)],'dbName':a0_0x490cab(0x641)}):null;le&&We[a0_0x490cab(0x79f)](a0_0x490cab(0x64f)+le[a0_0x490cab(0x6de)]),process['on'](a0_0x490cab(0x62d),()=>{const _0xf3b79b=a0_0x490cab;R&&R[_0xf3b79b(0x496)](()=>{We['info']('Database\x20connection\x20closed.');}),le&&le['close'](()=>{const _0x4736cd=_0xf3b79b;We[_0x4736cd(0x79f)](_0x4736cd(0x227));});});var eo=new Se[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),to=new Se[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),so=new Se['Schema']({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),ao=new Se[(a0_0x490cab(0x7b5))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[eo],'default':[]}},{'_id':!0x1}),io=new Se[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':ao,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':to},'groupdata':{'type':so,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),sa=_0xbf4fdc=>{const _0x5965ac=a0_0x490cab;let _0x31d8e3='z_'+_0xbf4fdc+'_Chats';return R?.['model'](_0x5965ac(0x43f),io,_0x31d8e3);},aa=require('mongoose'),oo=new aa[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ia=_0x3f49cf=>{const _0x3f6cf6=a0_0x490cab;let _0x5d7947='z_'+_0x3f49cf+_0x3f6cf6(0x26f);return R?.[_0x3f6cf6(0x82e)](_0x3f6cf6(0x159),oo,_0x5d7947);},oa=require(a0_0x490cab(0x312)),fs=class{},ro=new oa[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ra=le?.[a0_0x490cab(0x82e)](fs[a0_0x490cab(0x149)],ro,a0_0x490cab(0x302)),na=require(a0_0x490cab(0x312)),ws=class{},no=new na[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),ze=le?.[a0_0x490cab(0x82e)](ws[a0_0x490cab(0x149)],no,'instances'),ca=require(a0_0x490cab(0x312)),co=new ca['Schema']({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),la=_0x2dcace=>{const _0xd54906=a0_0x490cab;let _0x303c4c='z_'+_0x2dcace+'_Messages';return R?.[_0xd54906(0x82e)](_0xd54906(0x171),co,_0x303c4c);},ua=require('mongoose'),ys=class{},lo=new ua['Schema']({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),da=R?.[a0_0x490cab(0x82e)](ys[a0_0x490cab(0x149)],lo,a0_0x490cab(0x34f)),pa=require(a0_0x490cab(0x312)),bs=class{},ha=new pa[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});ha[a0_0x490cab(0x6f8)](a0_0x490cab(0x78e),function(_0x2bbe02){const _0x17c47e=a0_0x490cab;delete this[_0x17c47e(0x838)],delete this['flowIgnoreGroups'],delete this['flowPrefixCommand'],delete this[_0x17c47e(0x4b3)],delete this[_0x17c47e(0x7cf)],_0x2bbe02();});var ga=R?.['model'](bs[a0_0x490cab(0x149)],ha,a0_0x490cab(0x408)),D=require('mongoose'),Ss=require('uuid'),He=class{},fa=new D['Schema']({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Ms=new D['Schema']({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),uo=new D[(a0_0x490cab(0x7b5))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x490cab(0x73e)},'footerText':{'type':String},'buttonText':{'type':String,'default':'Selecione'},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x490cab(0x78f)},'pollErrorMessage':{'type':String,'default':a0_0x490cab(0x707)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),wa=new D[(a0_0x490cab(0x7b5))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),po=new D[(a0_0x490cab(0x7b5))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),ho=new D[(a0_0x490cab(0x7b5))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),vs=new D[(a0_0x490cab(0x7b5))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),go=new D['Schema']({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),ya=new D[(a0_0x490cab(0x7b5))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':uo},'apirequest':po,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':go,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),ba=new D[(a0_0x490cab(0x7b5))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),Cs=class{},Sa=new D['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[vs],'blocks':[ya],'groups':[fa],'conditions':[wa],'varedits':[ba],'replyOptions':{'type':[Ms],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x392bc7=a0_0x490cab;return _0x392bc7(0x311)+Math['random']()[_0x392bc7(0x751)](0x24)[_0x392bc7(0x3b7)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':a0_0x490cab(0x837)},'startID':{'type':String,'default':()=>(0x0,Ss['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ss['v4'])()},'shareOwners':{'type':[String],'default':[]}});Sa['pre'](a0_0x490cab(0x412),function(_0x314270){const _0x48a720=a0_0x490cab;let _0x325dae=this['getUpdate']();if(_0x325dae&&typeof _0x325dae==_0x48a720(0x328)&&_0x48a720(0x132)in _0x325dae){let _0x536b78=_0x325dae[_0x48a720(0x132)];if(_0x536b78){let _0x3abff4=new Set(),_0x206ac9=new Set(_0x536b78[_0x48a720(0x4bc)]?.['map'](_0x33d113=>_0x33d113[_0x48a720(0x149)])),_0x41922a=JSON[_0x48a720(0x647)](_0x536b78),_0x5a666d=/{{(?!_)([^}]*)}}/g,_0x59ca3f;for(;(_0x59ca3f=_0x5a666d[_0x48a720(0x7b8)](_0x41922a))!==null;)_0x206ac9[_0x48a720(0x1de)](_0x59ca3f[0x1])||_0x3abff4['add'](_0x59ca3f[0x1]);_0x3abff4[_0x48a720(0x17a)]>0x0?(console[_0x48a720(0x487)]('Variáveis\x20não\x20encontradas:',Array[_0x48a720(0x3f5)](_0x3abff4)),_0x536b78[_0x48a720(0x4d0)]=Array['from'](_0x3abff4)):_0x536b78[_0x48a720(0x4d0)]=[],this[_0x48a720(0x383)]({'$set':_0x536b78});}}_0x314270();});var Me=R?.[a0_0x490cab(0x82e)](Cs[a0_0x490cab(0x149)],Sa,'allFlows'),mo=new D['Schema']({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[vs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[ho]},{'_id':!0x1}),fo=new D[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[vs],'blocks':[ya],'groups':[fa],'conditions':[wa],'varedits':[ba],'replyOptions':{'type':[Ms],'default':[]},'chatLog':mo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':'open'},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':'Esse\x20fluxo\x20expirou'},'waitingMenu_replyOptions':{'type':[Ms],'default':[]}}),Ma=_0x466bf8=>{let _0x39044d='z_'+_0x466bf8+'_FlowHistorico';return R?.['model']('ConversationModel',fo,_0x39044d);},wo=new D[(a0_0x490cab(0x7b5))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),ma=new D[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'id':!0x0},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),yo=new D[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[ma],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x490cab(0x6e1)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[wo],'default':[]},'startSend':{'type':Number},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':ma,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ca=_0x57b3da=>{const _0x240a19=a0_0x490cab;let _0x2798a3='z_'+_0x57b3da+_0x240a19(0x323);return R?.['model'](_0x240a19(0x56c),yo,_0x2798a3);},Es=class{},bo=new D[(a0_0x490cab(0x7b5))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),So=new D['Schema']({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Mo=new D[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Co=new D[(a0_0x490cab(0x7b5))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':'!stop'},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),Eo=new D[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),vo=new D[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[Eo]},'customFields':{'type':[Mo]},'flowConfig':{'type':Co,'default':{}},'flows':{'type':[So],'default':[]},'autoCompleteMessages':{'type':[bo],'default':[]}}),Ie=R?.['model'](Es['name'],vo,a0_0x490cab(0x672)),Ea=require(a0_0x490cab(0x312)),No=new Ea[(a0_0x490cab(0x7b5))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),va=_0x5914d4=>{const _0x4e089b=a0_0x490cab;let _0x4d3347='z_'+_0x5914d4+_0x4e089b(0x1c8);return R?.[_0x4e089b(0x82e)](_0x4e089b(0x810),No,_0x4d3347);},_=class{constructor(_0xbd007c){const _0x2da07a=a0_0x490cab;this[_0x2da07a(0x836)]=_0xbd007c['get']('DATABASE');}};function I(_0x41fff7){const _0x43894d=a0_0x490cab;let _0x2c9772={};for(let [_0x441352,_0x43d651]of Object[_0x43894d(0x49e)](_0x41fff7))if(typeof _0x43d651==_0x43894d(0x328)&&!Array[_0x43894d(0x250)](_0x43d651)){for(let [_0x3fe92a,_0xb6593f]of Object[_0x43894d(0x49e)](_0x43d651))_0x2c9772[_0x441352+'.'+_0x3fe92a]=_0xb6593f;}else _0x2c9772[_0x441352]=_0x43d651;return _0x2c9772;}var Ke=class{constructor(_0x206629,_0x47a883,_0x1c3081,_0xec1c2e,_0x19ca9b,_0x562402,_0x3ec241,_0x4cbe42,_0x4f95aa,_0x19f3d3,_0x23ba32,_0x14d6f,_0x575019){const _0x403e47=a0_0x490cab;this[_0x403e47(0x202)]=_0x206629,this[_0x403e47(0x745)]=_0x47a883,this['contact']=_0x1c3081,this[_0x403e47(0x4a5)]=_0xec1c2e,this['webhook']=_0x19ca9b,this[_0x403e47(0x42a)]=_0x562402,this[_0x403e47(0x466)]=_0x3ec241,this['flow']=_0x4cbe42,this[_0x403e47(0x4cb)]=_0x4f95aa,this['label']=_0x19f3d3,this[_0x403e47(0x1bb)]=_0x23ba32,this['automateSystem']=_0x14d6f,this[_0x403e47(0x20b)]=_0x575019;}get[a0_0x490cab(0x65d)](){const _0x25cc04=a0_0x490cab;return this[_0x25cc04(0x20b)];}},Qe=class{},Ye=class extends _{[a0_0x490cab(0x2c8)](_0x7b2f78){return la(_0x7b2f78);}async[a0_0x490cab(0x505)](_0x17ea0e,_0x1613f3){const _0x363bbb=a0_0x490cab;if(_0x17ea0e[_0x363bbb(0x587)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x363bbb(0x2c8)](_0x1613f3)[_0x363bbb(0x575)]([..._0x17ea0e]))[_0x363bbb(0x587)]};}catch(_0x61d77d){return _0x61d77d;}}async[a0_0x490cab(0x5f9)](_0x8b914e,_0xb0e60e){const _0x3fbfc8=a0_0x490cab;try{let _0x2604b2=this[_0x3fbfc8(0x2c8)](_0xb0e60e),_0x257a98=I(_0x8b914e[_0x3fbfc8(0x83d)]);return await _0x2604b2[_0x3fbfc8(0x5f9)](_0x257a98)[_0x3fbfc8(0x644)]({'messageTimestamp':-0x1})[_0x3fbfc8(0x344)](_0x8b914e?.[_0x3fbfc8(0x344)]??0x0)[_0x3fbfc8(0x700)]();}catch{return[];}}async['delete'](_0x219788,_0x213f79){const _0x36e068=a0_0x490cab;try{let _0x573547=this[_0x36e068(0x2c8)](_0x213f79),_0x2e439a=I(_0x219788[_0x36e068(0x83d)]);await _0x573547[_0x36e068(0x46a)](_0x2e439a);}catch(_0x125a27){console['error'](_0x125a27);}}async['update'](_0xb24891,_0x1e50c3,_0x31a0e6){const _0x21eaeb=a0_0x490cab;try{let _0x11a6bc=this['getMessageModelForOwner'](_0x31a0e6),_0x44303a=I(_0xb24891[_0x21eaeb(0x83d)]);return await _0x11a6bc[_0x21eaeb(0x412)](_0x44303a,{'$set':_0x1e50c3},{'new':!0x0});}catch(_0x2fc251){throw console['error'](_0x2fc251),_0x2fc251;}}async[a0_0x490cab(0x575)](_0x250275,_0x239d47){const _0x5ce15f=a0_0x490cab;if(_0x250275[_0x5ce15f(0x587)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x5ce15f(0x2c8)](_0x239d47)[_0x5ce15f(0x575)]([..._0x250275]))['length']};}catch(_0x5c0450){return console[_0x5ce15f(0x1bd)](_0x5ce15f(0x5ea),_0x5c0450),_0x5c0450;}}async['deleteAll'](_0x220645){const _0x4f50da=a0_0x490cab;try{return await this[_0x4f50da(0x2c8)](_0x220645)['collection'][_0x4f50da(0x2ad)](),{'success':!0x0};}catch(_0x105389){return console[_0x4f50da(0x7a9)](_0x105389),{'success':!0x1,'error':_0x105389};}}},Ds=A(require(a0_0x490cab(0x5b4))),w=A(require(a0_0x490cab(0x21f))),Le=require('fs'),U=A(require(a0_0x490cab(0x57e))),Q=A(require('axios')),Oi=require(a0_0x490cab(0x829)),_i=A(require(a0_0x490cab(0x247))),xi=A(require('qrcode-terminal')),Na=['imageMessage',a0_0x490cab(0x5a3),'audioMessage','videoMessage',a0_0x490cab(0x652)],$a=['ephemeralMessage',a0_0x490cab(0x6a1),a0_0x490cab(0x195),a0_0x490cab(0x5bc)],Ps=require('os'),Jt=A(require(a0_0x490cab(0x669))),Fe=require(a0_0x490cab(0x5c3)),Di=require(a0_0x490cab(0x507)),me=A(require(a0_0x490cab(0x312))),k=require(a0_0x490cab(0x486)),ue=class{constructor(_0x2cc4ee,_0x22f4ca,_0x5c65e0){const _0x1d1eff=a0_0x490cab;this[_0x1d1eff(0x2ec)]=_0x2cc4ee,this[_0x1d1eff(0x232)]=_0x22f4ca,this[_0x1d1eff(0x149)]=_0x5c65e0;}},Xe=class{},Ze=class{},Te=class{},et=class{},tt=class{},Ce=class{},st=class{},at=class{},it=class{},ot=class{},Pt=A(require(a0_0x490cab(0x4b0))),Ra=require('fs'),Aa=require(a0_0x490cab(0x57e));async function Oe(_0x191efd){const _0x2966d9=a0_0x490cab;let _0x1a86dd=B['waInstances'][_0x191efd];if(F[_0x2966d9(0x3c3)]){let _0x995a7a=R[_0x2966d9(0x1b4)]()['db'](F[_0x2966d9(0x4b9)][_0x2966d9(0x784)]+_0x2966d9(0x5ca))[_0x2966d9(0x57f)](_0x191efd);return _0x1a86dd||(await _0x995a7a[_0x2966d9(0x5f9)]({})[_0x2966d9(0x470)]())[_0x2966d9(0x587)]>0x0;}return _0x1a86dd||(0x0,Ra[_0x2966d9(0x82b)])((0x0,Aa[_0x2966d9(0x4c8)])(be,_0x191efd));}async function Ia(_0x7efe2d,_0x1e24f2,_0x3ba009){const _0x2e1f71=a0_0x490cab;if(_0x7efe2d[_0x2e1f71(0x72e)]['includes'](_0x2e1f71(0x28a))||_0x7efe2d['originalUrl'][_0x2e1f71(0x3d0)](_0x2e1f71(0x3ae))||_0x7efe2d[_0x2e1f71(0x72e)][_0x2e1f71(0x3d0)](_0x2e1f71(0x2bf))||_0x7efe2d[_0x2e1f71(0x72e)]['includes']('/config')||_0x7efe2d['originalUrl']['includes'](_0x2e1f71(0x3d1))||_0x7efe2d['originalUrl'][_0x2e1f71(0x3d0)]('/instance/connectionState')||_0x7efe2d['originalUrl']['includes'](_0x2e1f71(0x1cf)))return _0x3ba009();let _0x5a2ac9=_0x7efe2d[_0x2e1f71(0x56a)];if(!_0x5a2ac9?.[_0x2e1f71(0x629)])throw new m('instanceName\x20not\x20provided.');if(!await Oe(_0x5a2ac9['instanceName']))throw new J(_0x2e1f71(0x280)+_0x5a2ac9[_0x2e1f71(0x629)]+_0x2e1f71(0x5e9));_0x3ba009();}async function Ta(_0x13f9cb,_0x22f76c,_0xfc2424){const _0x4d7cdc=a0_0x490cab;if(_0x13f9cb[_0x4d7cdc(0x72e)][_0x4d7cdc(0x3d0)]('/instance/create')){let _0x2d4472=_0x13f9cb[_0x4d7cdc(0x3db)];if(await Oe(_0x2d4472[_0x4d7cdc(0x629)]))throw new ee(_0x4d7cdc(0x2a0)+_0x2d4472[_0x4d7cdc(0x629)]+'\x20is\x20already\x20in\x20use.');B[_0x4d7cdc(0x23b)][_0x2d4472[_0x4d7cdc(0x629)]]&&delete B['waInstances'][_0x2d4472['instanceName']];}_0xfc2424();}var Oa=require(a0_0x490cab(0x486)),_a=A(require(a0_0x490cab(0x532))),rt=a0_0x490cab(0x48b),Ro=new $(a0_0x490cab(0x1d6));async function Ao(_0x482ee5,_0x448a75,_0x2a629c){const _0xbba247=a0_0x490cab;let _0x235eec=_0x482ee5[_0xbba247(0x715)]('apikey');if(_0x235eec&&b['get'](_0xbba247(0x448))['API_KEY'][_0xbba247(0x798)]!==_0x235eec)throw new re();if(b[_0xbba247(0x715)](_0xbba247(0x448))[_0xbba247(0x1d8)][_0xbba247(0x798)]===_0x235eec)return _0x2a629c();if((_0x482ee5[_0xbba247(0x72e)][_0xbba247(0x3d0)](_0xbba247(0x28a))||_0x482ee5[_0xbba247(0x72e)]['includes'](_0xbba247(0x3ae)))&&!_0x235eec)throw new ee(_0xbba247(0x6fa),'The\x20global\x20api\x20key\x20must\x20be\x20set');let _0x3a583e=b[_0xbba247(0x715)]('AUTHENTICATION')['JWT'];try{let [_0x23886a,_0x385cd0]=_0x482ee5[_0xbba247(0x715)]('authorization')[_0xbba247(0x6e6)]('\x20');if(_0x23886a[_0xbba247(0x637)]()!=='bearer')throw new re();if(!(0x0,Oa[_0xbba247(0x2e4)])(_0x385cd0))throw new re();let _0x3b6a09=_0x482ee5['params'],_0x94126a=_a[_0xbba247(0x73a)][_0xbba247(0x294)](_0x385cd0,_0x3a583e[_0xbba247(0x716)],{'ignoreExpiration':_0x3a583e[_0xbba247(0x281)]===0x0});if(_0x3b6a09['instanceName']!==_0x94126a[_0xbba247(0x629)]||rt!==_0x94126a[_0xbba247(0x363)])throw new re();return _0x2a629c();}catch(_0x487d4a){throw Ro['error'](_0x487d4a),new re();}}async function Io(_0x551196,_0x1051fb,_0x27fc70){const _0x7b2366=a0_0x490cab;let _0x59f82e=b[_0x7b2366(0x715)](_0x7b2366(0x448))[_0x7b2366(0x1d8)],_0x2eee3e=_0x551196[_0x7b2366(0x715)]('apikey');if(_0x59f82e[_0x7b2366(0x798)]===_0x2eee3e)return _0x27fc70();if(_0x551196[_0x7b2366(0x72e)][_0x7b2366(0x3d0)](_0x7b2366(0x28a))){let _0x298f99=Da,_0x421428=_0x551196[_0x7b2366(0x3db)][_0x7b2366(0x629)];if(_0x298f99&&_0x421428[_0x7b2366(0x637)]()[_0x7b2366(0x446)](_0x298f99[_0x7b2366(0x637)]()))return _0x27fc70();if(!_0x2eee3e)throw new ee(_0x7b2366(0x6fa),'The\x20global\x20api\x20key\x20must\x20be\x20set');}if(_0x551196[_0x7b2366(0x72e)][_0x7b2366(0x3d0)](_0x7b2366(0x3ae))&&!_0x2eee3e)throw new ee(_0x7b2366(0x6fa),_0x7b2366(0x78d));if(_0x551196['originalUrl'][_0x7b2366(0x3d0)]('/exit')&&!_0x2eee3e)throw new ee('Missing\x20global\x20api\x20key','The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x551196[_0x7b2366(0x72e)][_0x7b2366(0x3d0)](_0x7b2366(0x12c))&&!_0x2eee3e)throw new ee(_0x7b2366(0x6fa),_0x7b2366(0x78d));try{let _0x84ad97=_0x551196[_0x7b2366(0x56a)],_0x475bef=await fe[_0x7b2366(0x42a)][_0x7b2366(0x5f9)](_0x84ad97['instanceName']);if(_0x475bef&&_0x475bef[_0x7b2366(0x642)]===_0x2eee3e)return _0x27fc70();}catch{}throw new re();}var xa={'jwt':Ao,'apikey':Io},gi=require('express'),E=require(a0_0x490cab(0x829)),C=(..._0xc05524)=>{const _0x51ae04=a0_0x490cab;let _0x304b3a={};return _0xc05524['forEach'](_0x167683=>_0x304b3a[_0x167683]={'minLength':0x1,'description':_0x51ae04(0x3a0)+_0x167683+_0x51ae04(0x216)}),{'if':{'propertyNames':{'enum':[..._0xc05524]}},'then':{'properties':_0x304b3a}};},N={'$id':(0x0,E['v4'])(),'type':'object','properties':{'instanceName':{'type':'string'}},...C(a0_0x490cab(0x629))},mc={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'oldToken':{'type':a0_0x490cab(0x47c)}},'required':[a0_0x490cab(0x788)],...C('oldToken')},fc={'properties':{'key':{'type':a0_0x490cab(0x328),'properties':{'id':{'type':a0_0x490cab(0x47c)},'remoteJid':{'type':a0_0x490cab(0x47c)},'fromMe':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]}},'required':['id','remoteJid',a0_0x490cab(0x54e)],...C('id','remoteJid')},'message':{'type':a0_0x490cab(0x328)}}},te={'properties':{'delay':{'type':'integer','description':a0_0x490cab(0x815)},'presence':{'type':a0_0x490cab(0x47c),'enum':['unavailable',a0_0x490cab(0x11c),a0_0x490cab(0x2a8),a0_0x490cab(0x1a2),a0_0x490cab(0x777)]}}},H={'type':'string','description':a0_0x490cab(0x4b5)},Pa={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'number':{...H},'options':{...te},'textMessage':{'type':'object','properties':{'text':{'type':a0_0x490cab(0x47c)}},'required':[a0_0x490cab(0x120)],...C(a0_0x490cab(0x120))}},'required':[a0_0x490cab(0x59e),'number']},ka={'type':a0_0x490cab(0x47c),'pattern':a0_0x490cab(0x7ab),'description':a0_0x490cab(0x4b5)},wc={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...ka},'options':{...te},'textMessage':{'type':'object','properties':{'text':{'type':'string'}},'required':['text'],...C(a0_0x490cab(0x120))}},'required':[a0_0x490cab(0x59e),a0_0x490cab(0x7c9)]},yc={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'number':{...ka},'options':{...te},'mediaMessage':{'type':a0_0x490cab(0x328),'properties':{'mediatype':{'type':a0_0x490cab(0x47c),'enum':[a0_0x490cab(0x30b),a0_0x490cab(0x5a8),a0_0x490cab(0x4bf),a0_0x490cab(0x70d)]},'media':{'type':a0_0x490cab(0x47c)},'fileName':{'type':a0_0x490cab(0x47c)},'caption':{'type':a0_0x490cab(0x47c)}},'required':[a0_0x490cab(0x1b2),'media'],...C(a0_0x490cab(0x805),a0_0x490cab(0x2b8),a0_0x490cab(0x286))}},'required':[a0_0x490cab(0x2c7),a0_0x490cab(0x7c9)]},La={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'number':{...H},'options':{...te},'stickerMessage':{'type':'object','properties':{'image':{'type':'string'}},'required':[a0_0x490cab(0x30b)],...C(a0_0x490cab(0x30b))}},'required':[a0_0x490cab(0x652),a0_0x490cab(0x7c9)]},Fa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'statusMessage':{'type':'object','properties':{'type':{'type':a0_0x490cab(0x47c),'enum':[a0_0x490cab(0x120),a0_0x490cab(0x30b),'audio',a0_0x490cab(0x4bf)]},'content':{'type':a0_0x490cab(0x47c)},'caption':{'type':'string'},'backgroundColor':{'type':a0_0x490cab(0x47c)},'font':{'type':a0_0x490cab(0x1e0),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x490cab(0x11d),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x490cab(0x47c),'pattern':a0_0x490cab(0x627),'description':'\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}},'allContacts':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]}},'required':['type',a0_0x490cab(0x135)],...C(a0_0x490cab(0x5af),a0_0x490cab(0x135))}},'required':[a0_0x490cab(0x477)]},Ua={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'number':{...H},'options':{...te},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x490cab(0x47c),'enum':[a0_0x490cab(0x30b),a0_0x490cab(0x5a8),a0_0x490cab(0x4bf),a0_0x490cab(0x70d)]},'media':{'type':'string'},'fileName':{'type':'string'},'caption':{'type':a0_0x490cab(0x47c)}},'required':['mediatype',a0_0x490cab(0x286)],...C(a0_0x490cab(0x805),a0_0x490cab(0x2b8),a0_0x490cab(0x286))}},'required':[a0_0x490cab(0x2c7),'number']},ja={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'number':{...H},'options':{...te},'audioMessage':{'type':a0_0x490cab(0x328),'properties':{'audio':{'type':a0_0x490cab(0x47c)}},'required':[a0_0x490cab(0x70d)],...C(a0_0x490cab(0x70d))}},'required':[a0_0x490cab(0x5eb),a0_0x490cab(0x7c9)]},Ja={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'pollMessage':{'type':a0_0x490cab(0x328),'properties':{'name':{'type':a0_0x490cab(0x47c)},'selectableCount':{'type':a0_0x490cab(0x7c9)},'values':{'type':'array','minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x490cab(0x149),a0_0x490cab(0x43b),'values'],...C(a0_0x490cab(0x149),a0_0x490cab(0x43b),a0_0x490cab(0x33b))}},'required':[a0_0x490cab(0x7c9),a0_0x490cab(0x7e3)]},qa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'menuMessage':{'type':'object','properties':{'text':{'type':a0_0x490cab(0x47c)},'choices':{'type':a0_0x490cab(0x11d),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x490cab(0x120),'choices'],...C(a0_0x490cab(0x120),'choices')}},'required':[a0_0x490cab(0x7c9),a0_0x490cab(0x523)]},Va={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'number':{...H},'options':{...te},'buttonMessage':{'type':'object','properties':{'title':{'type':'string'},'description':{'type':'string'},'footerText':{'type':'string'},'buttons':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'buttonText':{'type':a0_0x490cab(0x47c)},'buttonId':{'type':a0_0x490cab(0x47c)}},'required':[a0_0x490cab(0x802),a0_0x490cab(0x2af)],...C(a0_0x490cab(0x802),a0_0x490cab(0x2af))}},'mediaMessage':{'type':a0_0x490cab(0x328),'properties':{'media':{'type':a0_0x490cab(0x47c)},'fileName':{'type':'string'},'mediatype':{'type':a0_0x490cab(0x47c),'enum':[a0_0x490cab(0x30b),'document','video']}},'required':[a0_0x490cab(0x286),'mediatype'],...C('media',a0_0x490cab(0x805))}},'required':[a0_0x490cab(0x256),a0_0x490cab(0x648)],...C(a0_0x490cab(0x256),a0_0x490cab(0x41a))}},'required':[a0_0x490cab(0x7c9),a0_0x490cab(0x353)]},Ga={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'number':{...H},'options':{...te},'locationMessage':{'type':a0_0x490cab(0x328),'properties':{'latitude':{'type':a0_0x490cab(0x7c9)},'longitude':{'type':a0_0x490cab(0x7c9)},'name':{'type':a0_0x490cab(0x47c)},'address':{'type':a0_0x490cab(0x47c)}},'required':['latitude',a0_0x490cab(0x685)],...C(a0_0x490cab(0x149),a0_0x490cab(0x37f))}},'required':[a0_0x490cab(0x7c9),'locationMessage']},Ba={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'number':{...H},'options':{...te},'listMessage':{'type':a0_0x490cab(0x328),'properties':{'title':{'type':'string'},'description':{'type':a0_0x490cab(0x47c)},'footerText':{'type':a0_0x490cab(0x47c)},'buttonText':{'type':a0_0x490cab(0x47c)},'sections':{'type':a0_0x490cab(0x11d),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x490cab(0x328),'properties':{'title':{'type':a0_0x490cab(0x47c)},'rows':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x490cab(0x328),'properties':{'title':{'type':a0_0x490cab(0x47c)},'description':{'type':a0_0x490cab(0x47c)},'rowId':{'type':a0_0x490cab(0x47c)}},'required':[a0_0x490cab(0x256),a0_0x490cab(0x83b)],...C(a0_0x490cab(0x256),'rowId')}}},'required':['title',a0_0x490cab(0x392)],...C(a0_0x490cab(0x256))}}},'required':[a0_0x490cab(0x256),a0_0x490cab(0x41a),a0_0x490cab(0x802),a0_0x490cab(0x680)],...C(a0_0x490cab(0x256),a0_0x490cab(0x41a),a0_0x490cab(0x802),a0_0x490cab(0x490))}},'required':[a0_0x490cab(0x7c9),'listMessage']},Wa={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'number':{...H},'options':{...te},'contactMessage':{'type':a0_0x490cab(0x11d),'items':{'type':a0_0x490cab(0x328),'properties':{'fullName':{'type':a0_0x490cab(0x47c)},'phoneNumber':{'type':a0_0x490cab(0x47c),'minLength':0xa}},'required':['fullName',a0_0x490cab(0x3cf)],...C(a0_0x490cab(0x296))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x490cab(0x7c9),a0_0x490cab(0x143)]},za={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'reactionMessage':{'type':a0_0x490cab(0x328),'properties':{'key':{'type':a0_0x490cab(0x328),'properties':{'id':{'type':a0_0x490cab(0x47c)},'remoteJid':{'type':a0_0x490cab(0x47c)},'fromMe':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]}},'required':['id','remoteJid',a0_0x490cab(0x54e)],...C('id','remoteJid')},'reaction':{'type':'string'}},'required':[a0_0x490cab(0x1c2),a0_0x490cab(0x64c)],...C(a0_0x490cab(0x64c))}},'required':[a0_0x490cab(0x738)]},Ha={'$id':(0x0,E['v4'])(),'type':'object','properties':{'numbers':{'type':a0_0x490cab(0x11d),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x490cab(0x47c),'pattern':a0_0x490cab(0x627),'description':a0_0x490cab(0x7fe)}}}},Ka={'$id':(0x0,E['v4'])(),'type':'object','properties':{'readMessages':{'type':a0_0x490cab(0x11d),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x490cab(0x47c)},'fromMe':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x490cab(0x47c)}},'required':['id',a0_0x490cab(0x54e),a0_0x490cab(0x133)],...C('id',a0_0x490cab(0x133))}}},'required':['readMessages']},Qa={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'privacySettings':{'type':a0_0x490cab(0x328),'properties':{'readreceipts':{'type':a0_0x490cab(0x47c),'enum':['all',a0_0x490cab(0x50f)]},'profile':{'type':a0_0x490cab(0x47c),'enum':[a0_0x490cab(0x6fc),a0_0x490cab(0x5d8),'contact_blacklist',a0_0x490cab(0x50f)]},'status':{'type':'string','enum':['all','contacts','contact_blacklist',a0_0x490cab(0x50f)]},'online':{'type':a0_0x490cab(0x47c),'enum':[a0_0x490cab(0x6fc),a0_0x490cab(0x528)]},'last':{'type':'string','enum':[a0_0x490cab(0x6fc),a0_0x490cab(0x5d8),a0_0x490cab(0x4a3),a0_0x490cab(0x50f)]},'groupadd':{'type':a0_0x490cab(0x47c),'enum':[a0_0x490cab(0x6fc),a0_0x490cab(0x5d8),'contact_blacklist',a0_0x490cab(0x50f)]}},'required':[a0_0x490cab(0x578),a0_0x490cab(0x1e6),'status',a0_0x490cab(0x1e1),'last',a0_0x490cab(0x3bd)],...C(a0_0x490cab(0x578),a0_0x490cab(0x1e6),a0_0x490cab(0x526),'online',a0_0x490cab(0x6cc),a0_0x490cab(0x3bd))}},'required':[a0_0x490cab(0x3f3)]},Ya={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'lastMessage':{'type':a0_0x490cab(0x328),'properties':{'key':{'type':a0_0x490cab(0x328),'properties':{'id':{'type':a0_0x490cab(0x47c)},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]}},'required':['id',a0_0x490cab(0x54e),a0_0x490cab(0x133)],...C('id',a0_0x490cab(0x133))},'messageTimestamp':{'type':'integer','minLength':0x1}},'required':['key'],...C(a0_0x490cab(0x80d))},'archive':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x490cab(0x122),a0_0x490cab(0x6d2)]},Xa={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'id':{'type':a0_0x490cab(0x47c)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x490cab(0x47c)},'participant':{'type':a0_0x490cab(0x47c)}},'required':['id',a0_0x490cab(0x54e),a0_0x490cab(0x133)],...C('id','remoteJid',a0_0x490cab(0x520))},Za={'$id':(0x0,E['v4'])(),'type':'object','properties':{'where':{'type':a0_0x490cab(0x328),'properties':{'_id':{'type':a0_0x490cab(0x47c),'minLength':0x1},'pushName':{'type':'string','minLength':0x1},'id':{'type':a0_0x490cab(0x47c),'minLength':0x1}},...C('_id','id',a0_0x490cab(0x640))}}},ei={'$id':(0x0,E['v4'])(),'type':'object','properties':{'name':{'type':'string'}},...C(a0_0x490cab(0x149))},ti={'$id':(0x0,E['v4'])(),'type':'object','properties':{'status':{'type':'string'}},...C('status')},_e={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'number':{'type':'string'},'picture':{'type':a0_0x490cab(0x47c)}}},si={'type':a0_0x490cab(0x328),'properties':{'wuid':{'type':a0_0x490cab(0x47c)},'name':{'type':a0_0x490cab(0x47c)},'picture':{'type':a0_0x490cab(0x47c)},'status':{'type':a0_0x490cab(0x47c)},'isBusiness':{'type':a0_0x490cab(0x5ed)}}},ai={'$id':(0x0,E['v4'])(),'type':'object','properties':{'where':{'type':a0_0x490cab(0x328),'properties':{'_id':{'type':'string','minLength':0x1},'key':{'type':a0_0x490cab(0x328),'if':{'propertyNames':{'enum':[a0_0x490cab(0x54e),a0_0x490cab(0x133),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x490cab(0x47c),'minLength':0x1,'description':a0_0x490cab(0x5dd)},'id':{'type':a0_0x490cab(0x47c),'minLength':0x1,'description':a0_0x490cab(0x5dd)},'fromMe':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]}}}},'message':{'type':'object'}},...C(a0_0x490cab(0x215))},'limit':{'type':a0_0x490cab(0x1e0)}}},bc={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'where':{'type':a0_0x490cab(0x328),'properties':{'_id':{'type':a0_0x490cab(0x47c)},'remoteJid':{'type':a0_0x490cab(0x47c)},'id':{'type':a0_0x490cab(0x47c)},'fromMe':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'participant':{'type':'string'},'status':{'type':'string','enum':[a0_0x490cab(0x48a),a0_0x490cab(0x3bf),a0_0x490cab(0x7c4),a0_0x490cab(0x74f),a0_0x490cab(0x282),a0_0x490cab(0x2c0)]}},...C(a0_0x490cab(0x215),a0_0x490cab(0x133),'id','status')},'limit':{'type':a0_0x490cab(0x1e0)}}},ii={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'number':{...H},'presence':{'type':a0_0x490cab(0x47c),'enum':[a0_0x490cab(0x445),'available',a0_0x490cab(0x2a8),a0_0x490cab(0x1a2),a0_0x490cab(0x777)]}},'required':[a0_0x490cab(0x1cd),a0_0x490cab(0x7c9)]},oi={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'subject':{'type':'string'},'description':{'type':'string'},'profilePicture':{'type':a0_0x490cab(0x47c)},'participants':{'type':a0_0x490cab(0x11d),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':a0_0x490cab(0x3d9),'description':a0_0x490cab(0x50a)}}},'required':[a0_0x490cab(0x278),a0_0x490cab(0x48d)],...C(a0_0x490cab(0x278),a0_0x490cab(0x41a),a0_0x490cab(0x6a0))},xe={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'groupJid':{'type':'string','pattern':a0_0x490cab(0x1a6)}},'required':[a0_0x490cab(0x768)],...C(a0_0x490cab(0x768))},ri={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'groupJid':{'type':'string'},'action':{'type':a0_0x490cab(0x47c),'enum':['add',a0_0x490cab(0x4e9),a0_0x490cab(0x65e),a0_0x490cab(0x268),a0_0x490cab(0x254),'approve']},'participants':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':'\x5cd+','description':a0_0x490cab(0x50a)}}},'required':[a0_0x490cab(0x768),'action',a0_0x490cab(0x48d)],...C(a0_0x490cab(0x768),a0_0x490cab(0x753))},ni={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'groupJid':{'type':a0_0x490cab(0x47c)},'expiration':{'type':a0_0x490cab(0x7c9),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x490cab(0x768),a0_0x490cab(0x467)],...C(a0_0x490cab(0x768),a0_0x490cab(0x467))},ci={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'groupJid':{'type':a0_0x490cab(0x47c)},'image':{'type':a0_0x490cab(0x47c)}},'required':['groupJid',a0_0x490cab(0x30b)],...C(a0_0x490cab(0x768),a0_0x490cab(0x30b))},li={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'groupJid':{'type':a0_0x490cab(0x47c)},'description':{'type':a0_0x490cab(0x47c)}},'required':[a0_0x490cab(0x768),a0_0x490cab(0x41a)],...C(a0_0x490cab(0x768),a0_0x490cab(0x41a))},ui={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'groupJid':{'type':'string'},'name':{'type':a0_0x490cab(0x47c)}},'required':[a0_0x490cab(0x768),a0_0x490cab(0x149)],...C(a0_0x490cab(0x768),a0_0x490cab(0x149))},di={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x490cab(0x47c)},'setting':{'type':'string','enum':[a0_0x490cab(0x610),a0_0x490cab(0x163),a0_0x490cab(0x24f),a0_0x490cab(0x3f8)]}},'required':[a0_0x490cab(0x768),a0_0x490cab(0x5f5)],...C(a0_0x490cab(0x768),a0_0x490cab(0x5f5))},pi={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'groupJid':{'type':a0_0x490cab(0x47c)},'restrict':{'type':a0_0x490cab(0x5ed)},'announce':{'type':a0_0x490cab(0x5ed)},'memberAddMode':{'type':'boolean'},'joinApprovalMode':{'type':a0_0x490cab(0x5ed)},'expiration':{'type':a0_0x490cab(0x1e0),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':'string'},'description':{'type':a0_0x490cab(0x47c)},'image':{'type':a0_0x490cab(0x47c)}}},Ns={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'inviteCode':{'type':a0_0x490cab(0x47c)}},'required':[a0_0x490cab(0x4af)],...C(a0_0x490cab(0x4af))},hi={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'url':{'type':a0_0x490cab(0x47c)},'enabled':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]}},'required':[a0_0x490cab(0x789),a0_0x490cab(0x431)]},Sc={'$id':(0x0,E['v4'])(),'type':a0_0x490cab(0x328),'properties':{'local_map':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x490cab(0x5ed),'enum':[!0x0,!0x1]}},'required':[a0_0x490cab(0x5d3),a0_0x490cab(0x3ee),'QRCODE_UPDATED',a0_0x490cab(0x71c),a0_0x490cab(0x2fc),'MESSAGES_UPSERT',a0_0x490cab(0x65c),'CONTACTS_SET',a0_0x490cab(0x239),a0_0x490cab(0x20a),a0_0x490cab(0x30a),a0_0x490cab(0x7f8),a0_0x490cab(0x267),a0_0x490cab(0x146),a0_0x490cab(0x6e7),'CONNECTION_UPDATE',a0_0x490cab(0x284),a0_0x490cab(0x62a),a0_0x490cab(0x194)],...C(a0_0x490cab(0x5d3),'STATUS_INSTANCE',a0_0x490cab(0x5a7),a0_0x490cab(0x71c),'MESSAGES_UPDATE','MESSAGES_UPSERT','SEND_MESSAGE','CONTACTS_SET',a0_0x490cab(0x239),'CONTACTS_UPDATE','PRESENCE_UPDATE',a0_0x490cab(0x7f8),a0_0x490cab(0x267),'CHATS_UPDATE',a0_0x490cab(0x6e7),a0_0x490cab(0x49c),a0_0x490cab(0x284),'GROUPS_UPDATE',a0_0x490cab(0x194))},nt=class{},ct=class extends _{['getContactModelForOwner'](_0x452da6){return ia(_0x452da6);}async[a0_0x490cab(0x505)](_0xee0085){const _0x39b35c=a0_0x490cab;if(_0xee0085[_0x39b35c(0x587)]!==0x0)try{return{'insertCount':(await this['getContactModelForOwner'](_0xee0085[0x0]['owner'])[_0x39b35c(0x575)]([..._0xee0085]))[_0x39b35c(0x587)]};}catch(_0x18c449){return _0x18c449;}}async['delete'](_0x55283c,_0x3d7076){const _0x5bc541=a0_0x490cab;try{return{'deletedCount':(await this[_0x5bc541(0x70a)](_0x3d7076)['deleteMany']({..._0x55283c[_0x5bc541(0x83d)]}))[_0x5bc541(0x717)]};}catch(_0x2b9a96){return{'error':_0x2b9a96?.[_0x5bc541(0x751)]()};}}async['update'](_0x1cddd9,_0x424819){const _0x34830b=a0_0x490cab;try{if(_0x1cddd9[_0x34830b(0x587)]===0x0)return;let _0x235722=this['getContactModelForOwner'](_0x424819),_0x1b9784=_0x1cddd9[_0x34830b(0x555)](_0x1475c5=>({'updateOne':{'filter':{'_id':_0x1475c5[_0x34830b(0x215)],'owner':_0x424819},'update':{..._0x1475c5}}})),{modifiedCount:_0x2e44e4}=await _0x235722['bulkWrite'](_0x1b9784);return{'insertCount':_0x2e44e4};}catch{return;}}async[a0_0x490cab(0x5f9)](_0x39c3ed,_0x2d8670){const _0x2ee2fc=a0_0x490cab;try{let _0x19f82f=this[_0x2ee2fc(0x70a)](_0x2d8670),_0x4d0a9c=I(_0x39c3ed[_0x2ee2fc(0x83d)]);return await _0x19f82f['find'](_0x4d0a9c)[_0x2ee2fc(0x344)](_0x39c3ed?.[_0x2ee2fc(0x344)]??0x0)[_0x2ee2fc(0x700)]();}catch{return[];}}async[a0_0x490cab(0x2cd)](_0x1d4c6e,_0x1b7aa7){const _0x540c3e=a0_0x490cab;try{let _0x1a921e=this[_0x540c3e(0x70a)](_0x1b7aa7),_0x62966e=I(_0x1d4c6e[_0x540c3e(0x83d)]);return await _0x1a921e[_0x540c3e(0x2cd)](_0x62966e)[_0x540c3e(0x700)]();}catch{return null;}}async[a0_0x490cab(0x3e4)](_0x2069c6){const _0x50a73e=a0_0x490cab;try{return await this[_0x50a73e(0x70a)](_0x2069c6)[_0x50a73e(0x57f)][_0x50a73e(0x2ad)](),{'success':!0x0};}catch(_0x50bd71){return console[_0x50a73e(0x7a9)](_0x50bd71),{'success':!0x1,'error':_0x50bd71};}}},lt=require(a0_0x490cab(0x19c)),Ic=require(a0_0x490cab(0x137)),$s=new $('Validate'),G=class{[a0_0x490cab(0x3ed)](_0x14f0f3,_0x1a7517=!0x0){let _0x510521='/'+_0x14f0f3;return _0x1a7517&&(_0x510521+='/:instanceName'),_0x510521;}async[a0_0x490cab(0x49b)](_0xc38f73){const _0x25c602=a0_0x490cab;let {request:_0x5ab0a4,schema:_0x3d4523,ClassRef:_0x541ecc,execute:_0x67ad60}=_0xc38f73,_0x52dd8a=new _0x541ecc(),_0x125996=_0x5ab0a4[_0x25c602(0x3db)],_0xe69c5a=_0x5ab0a4[_0x25c602(0x56a)];_0x5ab0a4?.[_0x25c602(0x298)]&&Object['keys'](_0x5ab0a4[_0x25c602(0x298)])[_0x25c602(0x587)]>0x0&&Object['assign'](_0xe69c5a,_0x5ab0a4['query']),_0x5ab0a4[_0x25c602(0x72e)]['includes'](_0x25c602(0x28a))&&Object[_0x25c602(0x17e)](_0xe69c5a,_0x125996),Object['assign'](_0x52dd8a,_0x125996);let _0x342446=_0x3d4523?(0x0,lt[_0x25c602(0x783)])(_0x52dd8a,_0x3d4523):{'valid':!0x0,'errors':[]};if(!_0x342446[_0x25c602(0x2a1)]){let _0x44f531=_0x342446[_0x25c602(0x7da)][_0x25c602(0x555)](({property:_0x36ce09,stack:_0x5f02f9,schema:_0x4dd601})=>{const _0x4f72f0=_0x25c602;let _0x4b12d8;return _0x4dd601[_0x4f72f0(0x41a)]?_0x4b12d8=_0x4dd601[_0x4f72f0(0x41a)]:_0x4b12d8=_0x5f02f9[_0x4f72f0(0x4d4)]('instance.',''),{'property':_0x36ce09['replace'](_0x4f72f0(0x442),''),'message':_0x4b12d8};});throw $s[_0x25c602(0x7a9)]([..._0x44f531]),new m(..._0x44f531);}return await _0x67ad60(_0xe69c5a,_0x52dd8a);}async[a0_0x490cab(0x340)](_0x560b52){const _0x2841c1=a0_0x490cab;let {request:_0x5ab8d9,ClassRef:_0x47bd8d,schema:_0x21e1d1,execute:_0x4af8a1}=_0x560b52,_0x558f73=_0x5ab8d9[_0x2841c1(0x298)];if(!_0x558f73?.['groupJid'])throw new m('The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','ex:\x20\x22groupJid=120362@g.us\x22');let _0x5afc70=_0x5ab8d9[_0x2841c1(0x56a)],_0x3a423b=_0x5ab8d9[_0x2841c1(0x3db)],_0x30d550=new _0x47bd8d();Object[_0x2841c1(0x17e)](_0x3a423b,_0x558f73),Object[_0x2841c1(0x17e)](_0x30d550,_0x3a423b);let _0x436a4b=(0x0,lt[_0x2841c1(0x783)])(_0x30d550,_0x21e1d1);if(!_0x436a4b[_0x2841c1(0x2a1)]){let _0x238219=_0x436a4b[_0x2841c1(0x7da)][_0x2841c1(0x555)](({property:_0x1d605f,stack:_0x123d06,schema:_0x2b5717})=>{const _0x2b9854=_0x2841c1;let _0x4a0f34;return _0x2b5717[_0x2b9854(0x41a)]?_0x4a0f34=_0x2b5717['description']:_0x4a0f34=_0x123d06[_0x2b9854(0x4d4)]('instance.',''),{'property':_0x1d605f[_0x2b9854(0x4d4)](_0x2b9854(0x442),''),'message':_0x4a0f34};});throw $s['error']([..._0x238219]),new m(..._0x238219);}return await _0x4af8a1(_0x5afc70,_0x30d550);}async[a0_0x490cab(0x5ce)](_0x57924e){const _0x2b2187=a0_0x490cab;let {request:_0x287550,ClassRef:_0x44948b,schema:_0x563c8c,execute:_0x3b555e}=_0x57924e,_0x2077ba=_0x287550['body'];if(!_0x2077ba?.['inviteCode'])throw new m('The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body',_0x2b2187(0x643));let _0x36ebad=_0x287550[_0x2b2187(0x56a)],_0x1d3d25=_0x287550['body'],_0x34c2c6=new _0x44948b();Object[_0x2b2187(0x17e)](_0x1d3d25,_0x2077ba),Object['assign'](_0x34c2c6,_0x1d3d25);let _0x37dbf4=(0x0,lt['validate'])(_0x34c2c6,_0x563c8c);if(!_0x37dbf4[_0x2b2187(0x2a1)]){let _0x556fc4=_0x37dbf4[_0x2b2187(0x7da)][_0x2b2187(0x555)](({property:_0x5a5dcf,stack:_0x22b634,schema:_0x5c46de})=>{const _0x17ace0=_0x2b2187;let _0x55e831;return _0x5c46de[_0x17ace0(0x41a)]?_0x55e831=_0x5c46de[_0x17ace0(0x41a)]:_0x55e831=_0x22b634[_0x17ace0(0x4d4)](_0x17ace0(0x442),''),{'property':_0x5a5dcf[_0x17ace0(0x4d4)](_0x17ace0(0x442),''),'message':_0x55e831};});throw $s[_0x2b2187(0x7a9)]([..._0x556fc4]),new m(..._0x556fc4);}return await _0x3b555e(_0x36ebad,_0x34c2c6);}},M=class{},Gc=new $(a0_0x490cab(0x761)),ut=class extends G{constructor(..._0x1bee30){const _0x2d9192=a0_0x490cab;super(),this[_0x2d9192(0x3a3)]=(0x0,gi['Router'])(),this[_0x2d9192(0x3a3)]['post'](this[_0x2d9192(0x3ed)](_0x2d9192(0x3d5)),..._0x1bee30,async(_0x2f030f,_0x156aae)=>{const _0xfd310f=_0x2d9192;let _0x406919=await this[_0xfd310f(0x49b)]({'request':_0x2f030f,'schema':ii,'ClassRef':Xe,'execute':(_0x1b04b9,_0x4f5c5f)=>P['updatePresence'](_0x1b04b9,_0x4f5c5f)});return _0x156aae[_0xfd310f(0x526)](0xc9)[_0xfd310f(0x497)](_0x406919);})[_0x2d9192(0x515)](this[_0x2d9192(0x3ed)]('whatsappNumbers'),..._0x1bee30,async(_0x129cb1,_0x5cfa8a)=>{const _0x36e850=_0x2d9192;let _0x154ac8=await this['dataValidate']({'request':_0x129cb1,'schema':Ha,'ClassRef':Ze,'execute':(_0x1c73c5,_0x4b2f54)=>P[_0x36e850(0x3d6)](_0x1c73c5,_0x4b2f54)});return _0x5cfa8a[_0x36e850(0x526)](0xc9)[_0x36e850(0x497)](_0x154ac8);})['post'](this['routerPath'](_0x2d9192(0x6db)),..._0x1bee30,async(_0x85c3dd,_0x20c68f)=>{const _0x215fa4=_0x2d9192;let _0x1307a1=await this[_0x215fa4(0x49b)]({'request':_0x85c3dd,'schema':N,'ClassRef':M,'execute':(_0x17db45,_0x1d343d)=>P[_0x215fa4(0x6db)](_0x17db45,_0x1d343d)});return _0x20c68f[_0x215fa4(0x526)](0xc9)['json'](_0x1307a1);})[_0x2d9192(0x6be)](this[_0x2d9192(0x3ed)]('markMessageAsRead'),..._0x1bee30,async(_0x3a86b7,_0x34d68a)=>{const _0x221fc1=_0x2d9192;let _0x5540ee=await this[_0x221fc1(0x49b)]({'request':_0x3a86b7,'schema':Ka,'ClassRef':st,'execute':(_0xca28a,_0x51acd1)=>P[_0x221fc1(0x161)](_0xca28a,_0x51acd1)});return _0x34d68a['status'](0xc9)[_0x221fc1(0x497)](_0x5540ee);})['put'](this[_0x2d9192(0x3ed)](_0x2d9192(0x249)),..._0x1bee30,async(_0x4210e5,_0xb3954d)=>{const _0x21e5b4=_0x2d9192;let _0x4c0d13=await this[_0x21e5b4(0x49b)]({'request':_0x4210e5,'schema':Ya,'ClassRef':at,'execute':(_0x4be75f,_0x37774d)=>P[_0x21e5b4(0x249)](_0x4be75f,_0x37774d)});return _0xb3954d['status'](0xc9)[_0x21e5b4(0x497)](_0x4c0d13);})[_0x2d9192(0x75b)](this['routerPath'](_0x2d9192(0x264)),..._0x1bee30,async(_0x5a1115,_0x2ee66a)=>{const _0x4331ec=_0x2d9192;let _0x4a6293=await this['dataValidate']({'request':_0x5a1115,'schema':Xa,'ClassRef':ot,'execute':(_0x5c3389,_0x218a85)=>P['deleteMessage'](_0x5c3389,_0x218a85)});return _0x2ee66a[_0x4331ec(0x526)](0xc9)[_0x4331ec(0x497)](_0x4a6293);})[_0x2d9192(0x515)](this[_0x2d9192(0x3ed)](_0x2d9192(0x61a)),..._0x1bee30,async(_0x2b42dd,_0x224ede)=>{const _0x2bcb70=_0x2d9192;let _0x3f3930=await this[_0x2bcb70(0x49b)]({'request':_0x2b42dd,'schema':_e,'ClassRef':Te,'execute':(_0x178646,_0x559ef8)=>P[_0x2bcb70(0x612)](_0x178646,_0x559ef8)});return _0x224ede[_0x2bcb70(0x526)](0xc8)['json'](_0x3f3930);})[_0x2d9192(0x515)](this[_0x2d9192(0x3ed)]('fetchProfile'),..._0x1bee30,async(_0x21e205,_0x3ba596)=>{const _0x36ddba=_0x2d9192;let _0x5052c8=await this[_0x36ddba(0x49b)]({'request':_0x21e205,'schema':si,'ClassRef':Te,'execute':(_0x68c297,_0x477262)=>P[_0x36ddba(0x5c8)](_0x68c297,_0x477262)});return _0x3ba596['status'](0xc8)[_0x36ddba(0x497)](_0x5052c8);})[_0x2d9192(0x515)](this[_0x2d9192(0x3ed)](_0x2d9192(0x71b)),..._0x1bee30,async(_0x1778fe,_0x17e433)=>{const _0xdc971d=_0x2d9192;let _0x3e792c=await this['dataValidate']({'request':_0x1778fe,'schema':Za,'ClassRef':nt,'execute':(_0x51f922,_0x419d6b)=>P[_0xdc971d(0x7f3)](_0x51f922,_0x419d6b)});return _0x17e433[_0xdc971d(0x526)](0xc8)[_0xdc971d(0x497)](_0x3e792c);})[_0x2d9192(0x515)](this[_0x2d9192(0x3ed)]('getBase64FromMediaMessage'),..._0x1bee30,async(_0x1661e7,_0x2b6dc5)=>{const _0x48a616=_0x2d9192;let _0x1ca8b3=await this[_0x48a616(0x49b)]({'request':_0x1661e7,'schema':null,'ClassRef':Object,'execute':(_0x31d5d0,_0x5cac4d)=>P[_0x48a616(0x552)](_0x31d5d0,_0x5cac4d)});return _0x2b6dc5[_0x48a616(0x526)](0xc9)['json'](_0x1ca8b3);})[_0x2d9192(0x515)](this[_0x2d9192(0x3ed)](_0x2d9192(0x300)),..._0x1bee30,async(_0x31ca45,_0x346798)=>{const _0x2aab71=_0x2d9192;let _0x21cecf=await this[_0x2aab71(0x49b)]({'request':_0x31ca45,'schema':ai,'ClassRef':Qe,'execute':(_0xc309a,_0x1d7407)=>P[_0x2aab71(0x726)](_0xc309a,_0x1d7407)});return _0x346798[_0x2aab71(0x526)](0xc8)[_0x2aab71(0x497)](_0x21cecf);})[_0x2d9192(0x715)](this[_0x2d9192(0x3ed)]('findChats'),..._0x1bee30,async(_0x4949d8,_0x27d944)=>{const _0xb5b3a4=_0x2d9192;let _0x3b4547=await this[_0xb5b3a4(0x49b)]({'request':_0x4949d8,'schema':null,'ClassRef':M,'execute':_0xef7bb0=>P[_0xb5b3a4(0x34d)](_0xef7bb0)});return _0x27d944[_0xb5b3a4(0x526)](0xc8)[_0xb5b3a4(0x497)](_0x3b4547);})[_0x2d9192(0x715)](this['routerPath'](_0x2d9192(0x681)),..._0x1bee30,async(_0x2b8e2e,_0x4504c1)=>{const _0x2d3fdc=_0x2d9192;let _0x57b673=await this[_0x2d3fdc(0x49b)]({'request':_0x2b8e2e,'schema':null,'ClassRef':M,'execute':_0x2fedd6=>P[_0x2d3fdc(0x5e7)](_0x2fedd6)});return _0x4504c1[_0x2d3fdc(0x526)](0xc8)[_0x2d3fdc(0x497)](_0x57b673);})[_0x2d9192(0x6be)](this[_0x2d9192(0x3ed)]('importChats'),..._0x1bee30,async(_0x189984,_0xe439b)=>{const _0xcd73f4=_0x2d9192;let _0x5e07be=await this[_0xcd73f4(0x49b)]({'request':_0x189984,'schema':null,'ClassRef':Array,'execute':(_0x2f3c07,_0x533a50)=>P[_0xcd73f4(0x613)](_0x2f3c07,_0x533a50)});return _0xe439b[_0xcd73f4(0x526)](0xc8)['json'](_0x5e07be);})[_0x2d9192(0x715)](this[_0x2d9192(0x3ed)](_0x2d9192(0x67e)),..._0x1bee30,async(_0x1ff99,_0x23c979)=>{const _0x12f434=_0x2d9192;let _0x40af81=await this[_0x12f434(0x49b)]({'request':_0x1ff99,'schema':null,'ClassRef':M,'execute':_0x1a191f=>P[_0x12f434(0x67e)](_0x1a191f)});return _0x23c979[_0x12f434(0x526)](0xc8)[_0x12f434(0x497)](_0x40af81);})[_0x2d9192(0x6be)](this[_0x2d9192(0x3ed)](_0x2d9192(0x4a1)),..._0x1bee30,async(_0x1b8468,_0x5049e5)=>{const _0x1205d3=_0x2d9192;let _0x2929c9=await this['dataValidate']({'request':_0x1b8468,'schema':Qa,'ClassRef':it,'execute':(_0xf6803d,_0x3ae85d)=>P[_0x1205d3(0x4a1)](_0xf6803d,_0x3ae85d)});return _0x5049e5['status'](0xc9)[_0x1205d3(0x497)](_0x2929c9);})['post'](this[_0x2d9192(0x3ed)](_0x2d9192(0x39b)),..._0x1bee30,async(_0x1f2e25,_0x528d10)=>{const _0x4bf966=_0x2d9192;let _0x434ab1=await this[_0x4bf966(0x49b)]({'request':_0x1f2e25,'schema':_e,'ClassRef':Ce,'execute':(_0x43c375,_0x24327c)=>P['fetchBusinessProfile'](_0x43c375,_0x24327c)});return _0x528d10[_0x4bf966(0x526)](0xc8)['json'](_0x434ab1);})[_0x2d9192(0x515)](this[_0x2d9192(0x3ed)](_0x2d9192(0x6b7)),..._0x1bee30,async(_0x3ea852,_0x313574)=>{const _0x4530ee=_0x2d9192;let _0x2a0a58=await this[_0x4530ee(0x49b)]({'request':_0x3ea852,'schema':ei,'ClassRef':et,'execute':(_0x158393,_0x524c6e)=>P[_0x4530ee(0x6b7)](_0x158393,_0x524c6e)});return _0x313574[_0x4530ee(0x526)](0xc8)[_0x4530ee(0x497)](_0x2a0a58);})[_0x2d9192(0x515)](this['routerPath'](_0x2d9192(0x659)),..._0x1bee30,async(_0x7b6948,_0xd858d3)=>{const _0x647721=_0x2d9192;let _0x548976=await this[_0x647721(0x49b)]({'request':_0x7b6948,'schema':ti,'ClassRef':tt,'execute':(_0x2fdd99,_0x5590d8)=>P['updateProfileStatus'](_0x2fdd99,_0x5590d8)});return _0xd858d3[_0x647721(0x526)](0xc8)[_0x647721(0x497)](_0x548976);})[_0x2d9192(0x6be)](this[_0x2d9192(0x3ed)](_0x2d9192(0x6c8)),..._0x1bee30,async(_0x4dee7a,_0xfeb150)=>{const _0x51e6bc=_0x2d9192;let _0x4da9ac=await this['dataValidate']({'request':_0x4dee7a,'schema':_e,'ClassRef':Ce,'execute':(_0x185b23,_0x440823)=>P[_0x51e6bc(0x6c8)](_0x185b23,_0x440823)});return _0xfeb150[_0x51e6bc(0x526)](0xc8)['json'](_0x4da9ac);})[_0x2d9192(0x75b)](this[_0x2d9192(0x3ed)]('removeProfilePicture'),..._0x1bee30,async(_0xc1e69,_0x1cb08f)=>{const _0x4c86a8=_0x2d9192;let _0x55fb9f=await this[_0x4c86a8(0x49b)]({'request':_0xc1e69,'schema':_e,'ClassRef':Ce,'execute':(_0x4fcd9b,_0x14cb60)=>P['removeProfilePicture'](_0x4fcd9b,_0x14cb60)});return _0x1cb08f[_0x4c86a8(0x526)](0xc8)['json'](_0x55fb9f);});}},mi=require(a0_0x490cab(0x4b0)),dt=class{},pt=class{},ht=class{},gt=class{},mt=class{},ft=class{},se=class{},De=class{},wt=class extends se{},yt=class extends se{},bt=class extends G{constructor(..._0x27befb){const _0x2e04a2=a0_0x490cab;super(),this[_0x2e04a2(0x3a3)]=(0x0,mi[_0x2e04a2(0x396)])(),this[_0x2e04a2(0x3a3)][_0x2e04a2(0x515)](this[_0x2e04a2(0x3ed)](_0x2e04a2(0x14c)),..._0x27befb,async(_0xb150f4,_0x246bce)=>{const _0x3caf99=_0x2e04a2;let _0x975981=await this['dataValidate']({'request':_0xb150f4,'schema':oi,'ClassRef':dt,'execute':(_0x45562b,_0x37d41f)=>q[_0x3caf99(0x35e)](_0x45562b,_0x37d41f)});_0x246bce[_0x3caf99(0x526)](0xc9)[_0x3caf99(0x497)](_0x975981);})[_0x2e04a2(0x6be)](this[_0x2e04a2(0x3ed)]('updateGroupPicture'),..._0x27befb,async(_0x335f68,_0x4d7285)=>{const _0x3fd8ed=_0x2e04a2;let _0x35d7d6=await this[_0x3fd8ed(0x340)]({'request':_0x335f68,'schema':ci,'ClassRef':pt,'execute':(_0x3f96f2,_0x393c7)=>q['updateGroupPicture'](_0x3f96f2,_0x393c7)});_0x4d7285[_0x3fd8ed(0x526)](0xc9)[_0x3fd8ed(0x497)](_0x35d7d6);})[_0x2e04a2(0x6be)](this[_0x2e04a2(0x3ed)](_0x2e04a2(0x1e4)),..._0x27befb,async(_0x2f132a,_0x10392c)=>{const _0x5db540=_0x2e04a2;let _0xb9ce01=await this[_0x5db540(0x340)]({'request':_0x2f132a,'schema':li,'ClassRef':ht,'execute':(_0x20b678,_0xde5baf)=>q[_0x5db540(0x1e4)](_0x20b678,_0xde5baf)});_0x10392c[_0x5db540(0x526)](0xc9)[_0x5db540(0x497)](_0xb9ce01);})['put'](this[_0x2e04a2(0x3ed)](_0x2e04a2(0x7e4)),..._0x27befb,async(_0x41ff36,_0x4c2c63)=>{const _0x4bcdd7=_0x2e04a2;let _0x53baab=await this['groupValidate']({'request':_0x41ff36,'schema':ui,'ClassRef':gt,'execute':(_0x2a57be,_0x497cb9)=>q[_0x4bcdd7(0x7e4)](_0x2a57be,_0x497cb9)});_0x4c2c63['status'](0xc9)[_0x4bcdd7(0x497)](_0x53baab);})[_0x2e04a2(0x6be)](this[_0x2e04a2(0x3ed)](_0x2e04a2(0x2ff)),..._0x27befb,async(_0x68311e,_0x49d23f)=>{const _0x252fa6=_0x2e04a2;let _0x4302b6=await this[_0x252fa6(0x340)]({'request':_0x68311e,'schema':pi,'ClassRef':ft,'execute':(_0x512df6,_0x133191)=>q['groupBetterSetting'](_0x512df6,_0x133191)});_0x49d23f[_0x252fa6(0x526)](0xc9)[_0x252fa6(0x497)](_0x4302b6);})[_0x2e04a2(0x6be)](this[_0x2e04a2(0x3ed)]('groupSetting'),..._0x27befb,async(_0x17f256,_0x3a466a)=>{const _0x2bd200=_0x2e04a2;let _0x3ac167=await this[_0x2bd200(0x340)]({'request':_0x17f256,'schema':di,'ClassRef':mt,'execute':(_0x1f8431,_0xc8d69)=>q[_0x2bd200(0x6c6)](_0x1f8431,_0xc8d69)});_0x3a466a[_0x2bd200(0x526)](0xc9)[_0x2bd200(0x497)](_0x3ac167);})['put'](this[_0x2e04a2(0x3ed)]('toggleEphemeral'),..._0x27befb,async(_0x2c4494,_0x3115c7)=>{const _0x93b785=_0x2e04a2;let _0x155775=await this['groupValidate']({'request':_0x2c4494,'schema':ni,'ClassRef':yt,'execute':(_0x368b2,_0x1ecfbc)=>q[_0x93b785(0x6ba)](_0x368b2,_0x1ecfbc)});_0x3115c7['status'](0xc9)[_0x93b785(0x497)](_0x155775);})[_0x2e04a2(0x715)](this[_0x2e04a2(0x3ed)](_0x2e04a2(0x690)),..._0x27befb,async(_0xde4a22,_0x3ac882)=>{const _0x40ff7f=_0x2e04a2;let _0x2b93f3=await this[_0x40ff7f(0x340)]({'request':_0xde4a22,'schema':xe,'ClassRef':se,'execute':(_0x14f6b8,_0x3b9e58)=>q['findGroupInfo'](_0x14f6b8,_0x3b9e58)});_0x3ac882[_0x40ff7f(0x526)](0xc8)[_0x40ff7f(0x497)](_0x2b93f3);})[_0x2e04a2(0x715)](this[_0x2e04a2(0x3ed)]('findGroups'),..._0x27befb,async(_0x1bb376,_0x261353)=>{const _0x12660f=_0x2e04a2;let _0x25e2f2=await this[_0x12660f(0x49b)]({'request':_0x1bb376,'schema':N,'ClassRef':M,'execute':_0x42733f=>q[_0x12660f(0x18a)](_0x42733f)});_0x261353['status'](0xc8)['json'](_0x25e2f2);})['get'](this[_0x2e04a2(0x3ed)](_0x2e04a2(0x48d)),..._0x27befb,async(_0x345cb0,_0x4a843b)=>{const _0x40cc44=_0x2e04a2;let _0x145f5e=await this['groupValidate']({'request':_0x345cb0,'schema':xe,'ClassRef':se,'execute':(_0x53945b,_0x2645a6)=>q['findParticipants'](_0x53945b,_0x2645a6)});_0x4a843b[_0x40cc44(0x526)](0xc8)['json'](_0x145f5e);})[_0x2e04a2(0x715)](this[_0x2e04a2(0x3ed)]('inviteCode'),..._0x27befb,async(_0x579240,_0x400a75)=>{const _0x23b958=_0x2e04a2;let _0x1ba194=await this[_0x23b958(0x340)]({'request':_0x579240,'schema':xe,'ClassRef':se,'execute':(_0x5d9701,_0x58c39e)=>q['inviteCode'](_0x5d9701,_0x58c39e)});_0x400a75['status'](0xc8)[_0x23b958(0x497)](_0x1ba194);})['post'](this[_0x2e04a2(0x3ed)](_0x2e04a2(0x634)),..._0x27befb,async(_0x4c0d65,_0x1b9a19)=>{const _0x7a060=_0x2e04a2;let _0x4397a5=await this[_0x7a060(0x5ce)]({'request':_0x4c0d65,'schema':Ns,'ClassRef':De,'execute':(_0x2efadd,_0x26d756)=>q[_0x7a060(0x112)](_0x2efadd,_0x26d756)});_0x1b9a19[_0x7a060(0x526)](0xc9)[_0x7a060(0x497)](_0x4397a5);})[_0x2e04a2(0x6be)](this[_0x2e04a2(0x3ed)](_0x2e04a2(0x36a)),..._0x27befb,async(_0x6a9a69,_0x82e5b8)=>{const _0x33de20=_0x2e04a2;let _0xbe9cb7=await this[_0x33de20(0x5ce)]({'request':_0x6a9a69,'schema':Ns,'ClassRef':De,'execute':(_0x278056,_0x563777)=>q[_0x33de20(0x36a)](_0x278056,_0x563777)});_0x82e5b8[_0x33de20(0x526)](0xc9)[_0x33de20(0x497)](_0xbe9cb7);})[_0x2e04a2(0x6be)](this[_0x2e04a2(0x3ed)](_0x2e04a2(0x740)),..._0x27befb,async(_0x595ded,_0x31c6ce)=>{const _0x321104=_0x2e04a2;let _0x281f6e=await this[_0x321104(0x340)]({'request':_0x595ded,'schema':xe,'ClassRef':se,'execute':(_0x463c44,_0x22580c)=>q[_0x321104(0x740)](_0x463c44,_0x22580c)});_0x31c6ce['status'](0xc9)[_0x321104(0x497)](_0x281f6e);})[_0x2e04a2(0x6be)](this[_0x2e04a2(0x3ed)]('updateParticipant'),..._0x27befb,async(_0x46a152,_0x5dcc21)=>{const _0x15e3ed=_0x2e04a2;let _0x4c64cf=await this[_0x15e3ed(0x340)]({'request':_0x46a152,'schema':ri,'ClassRef':wt,'execute':(_0x391c05,_0x38d2d4)=>q[_0x15e3ed(0x25f)](_0x391c05,_0x38d2d4)});_0x5dcc21[_0x15e3ed(0x526)](0xc9)[_0x15e3ed(0x497)](_0x4c64cf);})['delete'](this[_0x2e04a2(0x3ed)](_0x2e04a2(0x213)),..._0x27befb,async(_0x54fe8f,_0x459be4)=>{const _0x2b3b2b=_0x2e04a2;let _0x495ec4=await this['groupValidate']({'request':_0x54fe8f,'schema':{},'ClassRef':se,'execute':(_0x26d3e4,_0x1900a9)=>q[_0x2b3b2b(0x213)](_0x26d3e4,_0x1900a9)});_0x459be4[_0x2b3b2b(0x526)](0xc8)['json'](_0x495ec4);});}},fi=require(a0_0x490cab(0x4b0)),St=class extends G{constructor(_0x1ffdc8,..._0x1e0657){const _0x49605a=a0_0x490cab;super(),this[_0x49605a(0x3ec)]=_0x1ffdc8,this[_0x49605a(0x3a3)]=(0x0,fi[_0x49605a(0x396)])();let _0x4155b9=_0x1ffdc8[_0x49605a(0x715)](_0x49605a(0x448));this['router'][_0x49605a(0x515)](_0x49605a(0x79e),..._0x1e0657,async(_0x585b77,_0x539aa0)=>{const _0x2dd7f1=_0x49605a;let {instanceName:_0x4aad92,apikey:_0x5407b0,number:_0x49ccce}=_0x585b77['body'],_0x2d4db1=await de[_0x2dd7f1(0x531)]({'instanceName':_0x4aad92,'apikey':_0x5407b0,'number':_0x49ccce});return _0x539aa0[_0x2dd7f1(0x526)](0xc9)['json'](_0x2d4db1);})['put'](this['routerPath'](_0x49605a(0x1c1)),..._0x1e0657,async(_0x3c2154,_0xd15a1a)=>{const _0x285ead=_0x49605a;let _0x2c2cde=await this[_0x285ead(0x49b)]({'request':_0x3c2154,'schema':N,'ClassRef':M,'execute':_0x1fc7f4=>de['restartInstance'](_0x1fc7f4)});return _0xd15a1a['status'](0xc8)[_0x285ead(0x497)](_0x2c2cde);})[_0x49605a(0x715)](this[_0x49605a(0x3ed)](_0x49605a(0x3ca)),..._0x1e0657,async(_0x1ad17d,_0x571baf)=>{const _0x3bb496=_0x49605a;let _0x2e2571=await this[_0x3bb496(0x49b)]({'request':_0x1ad17d,'schema':N,'ClassRef':M,'execute':_0x4c67ea=>de[_0x3bb496(0x204)](_0x4c67ea)});return _0x571baf['status'](0xc8)[_0x3bb496(0x497)](_0x2e2571);})[_0x49605a(0x715)](this['routerPath'](_0x49605a(0x3d2)),..._0x1e0657,async(_0x5c1c66,_0x28c94)=>{const _0x5e2eae=_0x49605a;let _0x5a7703=await this[_0x5e2eae(0x49b)]({'request':_0x5c1c66,'schema':N,'ClassRef':M,'execute':_0x1970fb=>de[_0x5e2eae(0x3d2)](_0x1970fb)});return _0x28c94[_0x5e2eae(0x526)](0xc8)[_0x5e2eae(0x497)](_0x5a7703);})['get'](this['routerPath']('fetchInstances',!0x1),..._0x1e0657,async(_0x44fd69,_0x481d18)=>{const _0x1b1c37=_0x49605a;let _0x1ace4a=await this['dataValidate']({'request':_0x44fd69,'schema':null,'ClassRef':M,'execute':_0x11cdbc=>de['fetchInstances'](_0x11cdbc)});return _0x481d18[_0x1b1c37(0x526)](0xc8)[_0x1b1c37(0x497)](_0x1ace4a);})['delete'](this[_0x49605a(0x3ed)](_0x49605a(0x1a3)),..._0x1e0657,async(_0x5e1963,_0x41182b)=>{const _0x40ad2f=_0x49605a;let _0x20ffd2=await this[_0x40ad2f(0x49b)]({'request':_0x5e1963,'schema':N,'ClassRef':M,'execute':_0x2a26ec=>de[_0x40ad2f(0x1a3)](_0x2a26ec)});return _0x41182b[_0x40ad2f(0x526)](0xc8)[_0x40ad2f(0x497)](_0x20ffd2);})[_0x49605a(0x75b)](this[_0x49605a(0x3ed)](_0x49605a(0x75b)),..._0x1e0657,async(_0x2342d9,_0x3ee39f)=>{const _0xc9393b=_0x49605a;let _0x1a4e28=await this[_0xc9393b(0x49b)]({'request':_0x2342d9,'schema':N,'ClassRef':M,'execute':_0x18601a=>de['deleteInstance'](_0x18601a)});return _0x3ee39f['status'](0xc8)[_0xc9393b(0x497)](_0x1a4e28);});}},wi=require('express'),Rs=class{},z=class extends Rs{},Mt=class extends z{},Ct=class extends z{},Et=class extends z{},vt=class extends z{},Pe=class extends z{},Nt=class extends z{},$t=class extends z{},Rt=class extends z{},At=class extends z{},It=class extends z{},Tt=class{},Ot=class extends G{constructor(..._0x9b0fa5){const _0xefad1e=a0_0x490cab;super(),this[_0xefad1e(0x3a3)]=(0x0,wi[_0xefad1e(0x396)])(),this[_0xefad1e(0x3a3)][_0xefad1e(0x515)](this[_0xefad1e(0x3ed)](_0xefad1e(0x705)),..._0x9b0fa5,async(_0x57a5c0,_0x19e536)=>{const _0x3951c1=_0xefad1e;let _0x526e91=await this['dataValidate']({'request':_0x57a5c0,'schema':Pa,'ClassRef':Mt,'execute':(_0x551735,_0x31947c)=>W[_0x3951c1(0x705)](_0x551735,_0x31947c)});return _0x19e536['status'](0xc9)['json'](_0x526e91);})[_0xefad1e(0x515)](this[_0xefad1e(0x3ed)]('sendMedia'),..._0x9b0fa5,async(_0x1336aa,_0x12a69c)=>{const _0x3e58ba=_0xefad1e;let _0xb903f4=await this['dataValidate']({'request':_0x1336aa,'schema':Ua,'ClassRef':Pe,'execute':(_0x2dd9be,_0x400440)=>W['sendMedia'](_0x2dd9be,_0x400440)});return _0x12a69c['status'](0xc9)[_0x3e58ba(0x497)](_0xb903f4);})[_0xefad1e(0x515)](this['routerPath'](_0xefad1e(0x5bb)),..._0x9b0fa5,async(_0x2b89a5,_0x1ca12d)=>{const _0x131128=_0xefad1e;let _0x14e42b=await this[_0x131128(0x49b)]({'request':_0x2b89a5,'schema':qa,'ClassRef':vt,'execute':(_0xbd8d9c,_0xf3d11a)=>W[_0x131128(0x5bb)](_0xbd8d9c,_0xf3d11a)});return _0x1ca12d[_0x131128(0x526)](0xc9)[_0x131128(0x497)](_0x14e42b);})[_0xefad1e(0x515)](this[_0xefad1e(0x3ed)](_0xefad1e(0x755)),..._0x9b0fa5,async(_0x2151dc,_0x2866d8)=>{const _0x473d01=_0xefad1e;let _0x5c7ecf=await this[_0x473d01(0x49b)]({'request':_0x2151dc,'schema':ja,'ClassRef':Pe,'execute':(_0x1e73aa,_0x19962d)=>W[_0x473d01(0x755)](_0x1e73aa,_0x19962d)});return _0x2866d8[_0x473d01(0x526)](0xc9)[_0x473d01(0x497)](_0x5c7ecf);})[_0xefad1e(0x515)](this[_0xefad1e(0x3ed)](_0xefad1e(0x6ce)),..._0x9b0fa5,async(_0x1aecd5,_0x2f337d)=>{const _0x22ba6f=_0xefad1e;let _0x3be252=await this[_0x22ba6f(0x49b)]({'request':_0x1aecd5,'schema':Va,'ClassRef':$t,'execute':(_0x20f515,_0x33c388)=>W[_0x22ba6f(0x6ce)](_0x20f515,_0x33c388)});return _0x2f337d[_0x22ba6f(0x526)](0xc9)[_0x22ba6f(0x497)](_0x3be252);})['post'](this[_0xefad1e(0x3ed)](_0xefad1e(0x560)),..._0x9b0fa5,async(_0xcc6e52,_0x5ee6b1)=>{const _0x3aa3cd=_0xefad1e;let _0x1fa0cd=await this[_0x3aa3cd(0x49b)]({'request':_0xcc6e52,'schema':Ga,'ClassRef':Rt,'execute':(_0x1ef3dd,_0x52650a)=>W[_0x3aa3cd(0x560)](_0x1ef3dd,_0x52650a)});return _0x5ee6b1[_0x3aa3cd(0x526)](0xc9)[_0x3aa3cd(0x497)](_0x1fa0cd);})['post'](this['routerPath'](_0xefad1e(0x17b)),..._0x9b0fa5,async(_0x4aa596,_0x229f9f)=>{const _0x30be6c=_0xefad1e;let _0x4a16ea=await this[_0x30be6c(0x49b)]({'request':_0x4aa596,'schema':Ba,'ClassRef':At,'execute':(_0x2af46b,_0x3dd86c)=>W['sendList'](_0x2af46b,_0x3dd86c)});return _0x229f9f[_0x30be6c(0x526)](0xc9)['json'](_0x4a16ea);})[_0xefad1e(0x515)](this[_0xefad1e(0x3ed)](_0xefad1e(0x2c2)),..._0x9b0fa5,async(_0x55faa7,_0x2eda43)=>{const _0x1c08b8=_0xefad1e;let _0x36d139=await this[_0x1c08b8(0x49b)]({'request':_0x55faa7,'schema':Wa,'ClassRef':It,'execute':(_0x385b3c,_0x3bf467)=>W[_0x1c08b8(0x2c2)](_0x385b3c,_0x3bf467)});return _0x2eda43[_0x1c08b8(0x526)](0xc9)[_0x1c08b8(0x497)](_0x36d139);})['post'](this[_0xefad1e(0x3ed)](_0xefad1e(0x180)),..._0x9b0fa5,async(_0x1a2dea,_0x2d52aa)=>{const _0x4e0b6e=_0xefad1e;let _0xd851e=await this[_0x4e0b6e(0x49b)]({'request':_0x1a2dea,'schema':za,'ClassRef':Tt,'execute':(_0x55f1ca,_0x22e573)=>W[_0x4e0b6e(0x180)](_0x55f1ca,_0x22e573)});return _0x2d52aa['status'](0xc9)[_0x4e0b6e(0x497)](_0xd851e);})[_0xefad1e(0x515)](this[_0xefad1e(0x3ed)](_0xefad1e(0x405)),..._0x9b0fa5,async(_0x3e9bec,_0x165665)=>{const _0x8fc485=_0xefad1e;let _0x299040=await this['dataValidate']({'request':_0x3e9bec,'schema':Ja,'ClassRef':Et,'execute':(_0x22a2a3,_0x4a6ff2)=>W[_0x8fc485(0x405)](_0x22a2a3,_0x4a6ff2)});return _0x165665[_0x8fc485(0x526)](0xc9)[_0x8fc485(0x497)](_0x299040);})[_0xefad1e(0x515)](this[_0xefad1e(0x3ed)]('sendStatus'),..._0x9b0fa5,async(_0x34689f,_0x24c07e)=>{const _0xbde254=_0xefad1e;let _0x4440f8=await this[_0xbde254(0x49b)]({'request':_0x34689f,'schema':Fa,'ClassRef':Ct,'execute':(_0x1d8e29,_0x317f5d)=>W[_0xbde254(0x48c)](_0x1d8e29,_0x317f5d)});return _0x24c07e[_0xbde254(0x526)](0xc9)[_0xbde254(0x497)](_0x4440f8);})['post'](this[_0xefad1e(0x3ed)](_0xefad1e(0x380)),..._0x9b0fa5,async(_0x4ba87a,_0x33f55a)=>{const _0x35d8e0=_0xefad1e;let _0x3cd034=await this[_0x35d8e0(0x49b)]({'request':_0x4ba87a,'schema':La,'ClassRef':Nt,'execute':(_0x52d328,_0x392e57)=>W[_0x35d8e0(0x380)](_0x52d328,_0x392e57)});return _0x33f55a[_0x35d8e0(0x526)](0xc9)['json'](_0x3cd034);});}},yi=require(a0_0x490cab(0x4b0)),_t=class{},xt=class extends G{constructor(..._0x1ae5d8){const _0x200fdb=a0_0x490cab;super(),this[_0x200fdb(0x3a3)]=(0x0,yi[_0x200fdb(0x396)])(),this[_0x200fdb(0x3a3)]['post'](this[_0x200fdb(0x3ed)](_0x200fdb(0x5d4)),..._0x1ae5d8,async(_0x8c3575,_0x257385)=>{const _0x19bc8b=_0x200fdb;let _0x1ea03b=await this[_0x19bc8b(0x49b)]({'request':_0x8c3575,'schema':hi,'ClassRef':_t,'execute':(_0x3168cf,_0x2430d1)=>As['createWebhook'](_0x3168cf,_0x2430d1)});_0x257385['status'](0xc9)[_0x19bc8b(0x497)](_0x1ea03b);})[_0x200fdb(0x715)](this['routerPath']('find'),..._0x1ae5d8,async(_0xc5169b,_0x2f4484)=>{const _0x236cbe=_0x200fdb;let _0x29f84e=await this[_0x236cbe(0x49b)]({'request':_0xc5169b,'schema':N,'ClassRef':M,'execute':_0x499ada=>As['findWebhook'](_0x499ada)});_0x2f4484[_0x236cbe(0x526)](0xc8)[_0x236cbe(0x497)](_0x29f84e);});}},bi=require(a0_0x490cab(0x4b0)),y=new $(a0_0x490cab(0x6cd)),Dt=class extends G{constructor(..._0x461f6c){const _0x2c85d0=a0_0x490cab;super(),this['router']=(0x0,bi[_0x2c85d0(0x396)])(),this['router'][_0x2c85d0(0x515)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x1bb)),..._0x461f6c,async(_0x2ae3c0,_0xcf48d6)=>{const _0x52ca9a=_0x2c85d0;let _0x52154b=_0x2ae3c0[_0x52ca9a(0x3db)];y[_0x52ca9a(0x331)](_0x52ca9a(0x5b1)),y[_0x52ca9a(0x331)](_0x52ca9a(0x276)),y[_0x52ca9a(0x331)](_0x2ae3c0[_0x52ca9a(0x3db)]);let _0x2330a3=await this[_0x52ca9a(0x49b)]({'request':_0x2ae3c0,'schema':N,'ClassRef':M,'execute':_0x1d7873=>T[_0x52ca9a(0x22b)](_0x1d7873,_0x52154b)});_0xcf48d6[_0x52ca9a(0x526)](0xc8)['json'](_0x2330a3);})[_0x2c85d0(0x715)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x1bb)),..._0x461f6c,async(_0x4776d6,_0x59bcbb)=>{const _0x313105=_0x2c85d0;let _0x4ae09c=await this[_0x313105(0x49b)]({'request':_0x4776d6,'schema':N,'ClassRef':M,'execute':_0x2e4909=>T[_0x313105(0x757)](_0x2e4909)});_0x59bcbb['status'](0xc8)[_0x313105(0x497)](_0x4ae09c);})[_0x2c85d0(0x75b)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x160)),..._0x461f6c,async(_0x80ca7d,_0x43f65e)=>{const _0x558f3a=_0x2c85d0;y[_0x558f3a(0x331)](_0x558f3a(0x484));let _0x129c7c=await this[_0x558f3a(0x49b)]({'request':_0x80ca7d,'schema':N,'ClassRef':M,'execute':_0x147600=>T['deleteDoneMessages'](_0x147600)});_0x43f65e[_0x558f3a(0x526)](0xc8)[_0x558f3a(0x497)](_0x129c7c);})['post'](this[_0x2c85d0(0x3ed)]('startFlow'),..._0x461f6c,async(_0x3ffbba,_0x51b312)=>{const _0x78e25d=_0x2c85d0;let _0x527c6c=_0x3ffbba['body'];y[_0x78e25d(0x331)](_0x78e25d(0x4fe)),y['verbose'](_0x78e25d(0x276)),y[_0x78e25d(0x331)](_0x3ffbba['body']);let _0x219d60=await this[_0x78e25d(0x49b)]({'request':_0x3ffbba,'schema':N,'ClassRef':M,'execute':_0x15c145=>T[_0x78e25d(0x66b)](_0x15c145,_0x527c6c)});_0x51b312[_0x78e25d(0x526)](0xc8)[_0x78e25d(0x497)](_0x219d60);})[_0x2c85d0(0x715)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x2f2)),..._0x461f6c,async(_0x418611,_0x5d2fe0)=>{const _0x13a168=_0x2c85d0;y[_0x13a168(0x331)](_0x13a168(0x4ba));let _0xd29835=await this[_0x13a168(0x49b)]({'request':_0x418611,'schema':N,'ClassRef':M,'execute':_0x1be80b=>T[_0x13a168(0x2f2)](_0x1be80b)});_0x5d2fe0[_0x13a168(0x526)](0xc8)[_0x13a168(0x497)](_0xd29835);})[_0x2c85d0(0x715)](this[_0x2c85d0(0x3ed)]('getTicketSystem'),..._0x461f6c,async(_0x8a2183,_0x3c0843)=>{const _0x4737c=_0x2c85d0;y['verbose'](_0x4737c(0x53e));let _0xe48f0b=await this[_0x4737c(0x49b)]({'request':_0x8a2183,'schema':N,'ClassRef':M,'execute':_0x48dea7=>T['getAutomateSystem'](_0x48dea7)});_0x3c0843[_0x4737c(0x526)](0xc8)['json'](_0xe48f0b);})['post'](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x349)),..._0x461f6c,async(_0x1d01d3,_0x30ce68)=>{const _0x2895ec=_0x2c85d0;let _0x490ed4=_0x1d01d3['body'];y[_0x2895ec(0x331)](_0x2895ec(0x4f0)),y[_0x2895ec(0x331)](_0x2895ec(0x276)),y['verbose'](_0x1d01d3[_0x2895ec(0x3db)]);let _0x43c643=await this[_0x2895ec(0x49b)]({'request':_0x1d01d3,'schema':N,'ClassRef':M,'execute':_0x4de31b=>T[_0x2895ec(0x349)](_0x4de31b,_0x490ed4)});_0x30ce68[_0x2895ec(0x526)](0xc8)['json'](_0x43c643);})[_0x2c85d0(0x515)](this['routerPath']('updateCustomFields'),..._0x461f6c,async(_0x363841,_0x28004f)=>{const _0x4e8a75=_0x2c85d0;let _0x1d45b1=_0x363841[_0x4e8a75(0x3db)];y['verbose'](_0x4e8a75(0x5d1)),y[_0x4e8a75(0x331)](_0x4e8a75(0x276)),y['verbose'](_0x363841[_0x4e8a75(0x3db)]);let _0x183d27=await this[_0x4e8a75(0x49b)]({'request':_0x363841,'schema':N,'ClassRef':M,'execute':_0x447b5c=>T[_0x4e8a75(0x591)](_0x447b5c,_0x1d45b1)});_0x28004f['status'](0xc8)[_0x4e8a75(0x497)](_0x183d27);})[_0x2c85d0(0x515)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x3c1)),..._0x461f6c,async(_0xd2baed,_0x2d09d8)=>{const _0x2587d1=_0x2c85d0;let _0x4f547a=_0xd2baed[_0x2587d1(0x3db)];y[_0x2587d1(0x331)]('request\x20received\x20in\x20updateAutoCompleteMessages'),y[_0x2587d1(0x331)](_0x2587d1(0x276)),y[_0x2587d1(0x331)](_0xd2baed[_0x2587d1(0x3db)]);let _0xf4eb0=await this[_0x2587d1(0x49b)]({'request':_0xd2baed,'schema':N,'ClassRef':M,'execute':_0x146eef=>T['updateAutoCompleteMessages'](_0x146eef,_0x4f547a)});_0x2d09d8[_0x2587d1(0x526)](0xc8)[_0x2587d1(0x497)](_0xf4eb0);})[_0x2c85d0(0x515)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x828)),..._0x461f6c,async(_0x38d8d9,_0x8b8a07)=>{const _0x505c3c=_0x2c85d0;let _0x57cda6=_0x38d8d9[_0x505c3c(0x3db)];y[_0x505c3c(0x331)](_0x505c3c(0x3d7)),y[_0x505c3c(0x331)](_0x505c3c(0x276)),y[_0x505c3c(0x331)](_0x38d8d9['body']);let _0x3c5465=await this['dataValidate']({'request':_0x38d8d9,'schema':N,'ClassRef':M,'execute':_0x4269a3=>T['updateFlowConfig'](_0x4269a3,_0x57cda6)});_0x8b8a07[_0x505c3c(0x526)](0xc8)[_0x505c3c(0x497)](_0x3c5465);})[_0x2c85d0(0x515)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x797)),..._0x461f6c,async(_0x3178d9,_0x376042)=>{const _0xc8d051=_0x2c85d0;let _0x7da1e1=_0x3178d9[_0xc8d051(0x3db)];y['verbose'](_0xc8d051(0x5e1)),y[_0xc8d051(0x331)]('request\x20body:\x20'),y['verbose'](_0x3178d9['body']);let _0x559c08=await this['dataValidate']({'request':_0x3178d9,'schema':N,'ClassRef':M,'execute':_0x572fc9=>T[_0xc8d051(0x797)](_0x572fc9,_0x7da1e1)});_0x376042['status'](0xc8)[_0xc8d051(0x497)](_0x559c08);})[_0x2c85d0(0x515)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x542)),..._0x461f6c,async(_0x4f78ab,_0x5d218f)=>{const _0x36e045=_0x2c85d0;let _0x4af4e9=_0x4f78ab['body'];y[_0x36e045(0x331)](_0x36e045(0x68f)),y['verbose'](_0x36e045(0x276)),y[_0x36e045(0x331)](_0x4f78ab['body']);let _0x51fa85=await this[_0x36e045(0x49b)]({'request':_0x4f78ab,'schema':N,'ClassRef':M,'execute':_0x44f46a=>T[_0x36e045(0x542)](_0x44f46a,_0x4af4e9)});_0x5d218f[_0x36e045(0x526)](0xc8)[_0x36e045(0x497)](_0x51fa85);})[_0x2c85d0(0x515)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x5c0)),..._0x461f6c,async(_0x50a2d0,_0x22a89e)=>{const _0x1c0c9f=_0x2c85d0;let _0x388212=_0x50a2d0[_0x1c0c9f(0x3db)];y[_0x1c0c9f(0x331)](_0x1c0c9f(0x5c4)),y[_0x1c0c9f(0x331)](_0x1c0c9f(0x276)),y[_0x1c0c9f(0x331)](_0x50a2d0[_0x1c0c9f(0x3db)]);let _0x4dbd79=await this[_0x1c0c9f(0x49b)]({'request':_0x50a2d0,'schema':N,'ClassRef':M,'execute':_0x29141a=>T['editConversation'](_0x29141a,_0x388212)});_0x22a89e[_0x1c0c9f(0x526)](0xc8)[_0x1c0c9f(0x497)](_0x4dbd79);})[_0x2c85d0(0x75b)](this['routerPath']('deleteConversation'),..._0x461f6c,async(_0x435028,_0x16b533)=>{const _0x51007b=_0x2c85d0;let _0x5e9e0b=_0x435028[_0x51007b(0x3db)];y[_0x51007b(0x331)](_0x51007b(0x60b)),y['verbose'](_0x51007b(0x276)),y[_0x51007b(0x331)](_0x435028['body']);let _0x402fc6=await this[_0x51007b(0x49b)]({'request':_0x435028,'schema':N,'ClassRef':M,'execute':_0x54f8ec=>T['deleteConversation'](_0x54f8ec,_0x5e9e0b)});_0x16b533[_0x51007b(0x526)](0xc8)[_0x51007b(0x497)](_0x402fc6);})['post'](this['routerPath'](_0x2c85d0(0x49f)),..._0x461f6c,async(_0x367479,_0x46f174)=>{const _0x14df93=_0x2c85d0;let _0x2d959e=_0x367479[_0x14df93(0x3db)],_0xd02e=_0x367479[_0x14df93(0x174)][_0x14df93(0x642)];y[_0x14df93(0x331)]('request\x20received\x20in\x20createFlow'),y[_0x14df93(0x331)](_0x14df93(0x276)),y[_0x14df93(0x331)](_0x367479[_0x14df93(0x3db)]);let _0x49c67e=await this['dataValidate']({'request':_0x367479,'schema':N,'ClassRef':M,'execute':_0x2160e9=>T[_0x14df93(0x113)](_0x2160e9,_0x2d959e,_0xd02e)});_0x46f174[_0x14df93(0x526)](0xc8)[_0x14df93(0x497)](_0x49c67e);})[_0x2c85d0(0x515)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x2bc)),..._0x461f6c,async(_0x269a49,_0x14b484)=>{const _0x19df6b=_0x2c85d0;let _0xbdb27d=_0x269a49[_0x19df6b(0x3db)],_0x5c1f6c=_0x269a49[_0x19df6b(0x174)]['apikey'];y['verbose'](_0x19df6b(0x4a6)),y[_0x19df6b(0x331)](_0x19df6b(0x276)),y[_0x19df6b(0x331)](_0x269a49['body']),delete _0xbdb27d[_0x19df6b(0x7c0)],delete _0xbdb27d['variables'],delete _0xbdb27d[_0x19df6b(0x5d5)],delete _0xbdb27d[_0x19df6b(0x7fd)];let _0x340367=await this['dataValidate']({'request':_0x269a49,'schema':N,'ClassRef':M,'execute':_0x658b27=>T[_0x19df6b(0x367)](_0x658b27,_0xbdb27d,_0x5c1f6c)});_0x14b484[_0x19df6b(0x526)](0xc8)[_0x19df6b(0x497)](_0x340367);})['post'](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x6e4)),..._0x461f6c,async(_0x2eab93,_0x5d48fd)=>{const _0x1cb2f8=_0x2c85d0;let _0x194980=_0x2eab93['body'];y[_0x1cb2f8(0x331)](_0x1cb2f8(0x4a6)),y[_0x1cb2f8(0x331)](_0x1cb2f8(0x276)),y[_0x1cb2f8(0x331)](_0x2eab93[_0x1cb2f8(0x3db)]);let _0x2b6c79=await this[_0x1cb2f8(0x49b)]({'request':_0x2eab93,'schema':N,'ClassRef':M,'execute':_0x18ed03=>T[_0x1cb2f8(0x571)](_0x18ed03,_0x194980)});_0x5d48fd[_0x1cb2f8(0x526)](0xc8)[_0x1cb2f8(0x497)](_0x2b6c79);})[_0x2c85d0(0x515)](this['routerPath'](_0x2c85d0(0x3c0)),..._0x461f6c,async(_0x5c7016,_0x5cb315)=>{const _0x3056ac=_0x2c85d0;let _0x1f0712=_0x5c7016[_0x3056ac(0x3db)];y[_0x3056ac(0x331)]('request\x20received\x20in\x20editFlow'),y[_0x3056ac(0x331)](_0x3056ac(0x276)),y[_0x3056ac(0x331)](_0x5c7016[_0x3056ac(0x3db)]);let _0x339127=await this['dataValidate']({'request':_0x5c7016,'schema':N,'ClassRef':M,'execute':_0xf3403=>T[_0x3056ac(0x5b8)](_0xf3403,_0x1f0712)});_0x5cb315[_0x3056ac(0x526)](0xc8)[_0x3056ac(0x497)](_0x339127);})[_0x2c85d0(0x515)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x3fe)),..._0x461f6c,async(_0x18be99,_0x33a4dd)=>{const _0x56de2d=_0x2c85d0;let _0x28f4d1=_0x18be99[_0x56de2d(0x3db)];y[_0x56de2d(0x331)]('request\x20received\x20in\x20editFlow'),y[_0x56de2d(0x331)](_0x56de2d(0x276)),y[_0x56de2d(0x331)](_0x18be99['body']);let _0x23a342=await this['dataValidate']({'request':_0x18be99,'schema':N,'ClassRef':M,'execute':_0x19fd1a=>T[_0x56de2d(0x527)](_0x19fd1a,_0x28f4d1)});_0x33a4dd[_0x56de2d(0x526)](0xc8)[_0x56de2d(0x497)](_0x23a342);})[_0x2c85d0(0x515)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x1cb)),..._0x461f6c,async(_0x4a8726,_0x3b4266)=>{const _0x28ba9e=_0x2c85d0;let _0x5d1981=_0x4a8726['body'];y['verbose']('request\x20received\x20in\x20editFlowgroup'),y['verbose'](_0x28ba9e(0x276)),y[_0x28ba9e(0x331)](_0x4a8726['body']);let _0x5e1145=await this[_0x28ba9e(0x49b)]({'request':_0x4a8726,'schema':N,'ClassRef':M,'execute':_0xe860ed=>T[_0x28ba9e(0x78c)](_0xe860ed,_0x5d1981)});_0x3b4266[_0x28ba9e(0x526)](0xc8)['json'](_0x5e1145);})['post'](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x7db)),..._0x461f6c,async(_0x141aba,_0x23f607)=>{const _0x772466=_0x2c85d0;let _0x26f3f5=_0x141aba[_0x772466(0x3db)];y[_0x772466(0x331)](_0x772466(0x14f)),y[_0x772466(0x331)](_0x772466(0x276)),y[_0x772466(0x331)](_0x141aba[_0x772466(0x3db)]);let _0x54136a=await this['dataValidate']({'request':_0x141aba,'schema':N,'ClassRef':M,'execute':_0x1eb0d8=>T[_0x772466(0x234)](_0x1eb0d8,_0x26f3f5)});_0x23f607['status'](0xc8)[_0x772466(0x497)](_0x54136a);})['post'](this['routerPath']('editflowvariable'),..._0x461f6c,async(_0x312041,_0x838993)=>{const _0x32e571=_0x2c85d0;let _0x423085=_0x312041[_0x32e571(0x3db)];y[_0x32e571(0x331)](_0x32e571(0x39d)),y[_0x32e571(0x331)](_0x32e571(0x276)),y[_0x32e571(0x331)](_0x312041['body']);let _0x94e49c=await this[_0x32e571(0x49b)]({'request':_0x312041,'schema':N,'ClassRef':M,'execute':_0x5f0969=>T[_0x32e571(0x372)](_0x5f0969,_0x423085)});_0x838993[_0x32e571(0x526)](0xc8)[_0x32e571(0x497)](_0x94e49c);})[_0x2c85d0(0x515)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x766)),..._0x461f6c,async(_0x276c48,_0x447ae0)=>{const _0x4eddc6=_0x2c85d0;let _0x1dbaa3=_0x276c48[_0x4eddc6(0x3db)];y[_0x4eddc6(0x331)]('request\x20received\x20in\x20getFlow'),y[_0x4eddc6(0x331)]('request\x20body:\x20'),y[_0x4eddc6(0x331)](_0x276c48[_0x4eddc6(0x3db)]);let _0xe3feaa=await this[_0x4eddc6(0x49b)]({'request':_0x276c48,'schema':N,'ClassRef':M,'execute':_0x17ffee=>T[_0x4eddc6(0x6a3)](_0x17ffee,_0x1dbaa3)});_0x447ae0[_0x4eddc6(0x526)](0xc8)[_0x4eddc6(0x497)](_0xe3feaa);})[_0x2c85d0(0x75b)](this[_0x2c85d0(0x3ed)](_0x2c85d0(0x31a)),..._0x461f6c,async(_0x538437,_0x1f9f76)=>{const _0x1dc49b=_0x2c85d0;let _0x270dab=_0x538437[_0x1dc49b(0x3db)];y[_0x1dc49b(0x331)](_0x1dc49b(0x524)),y['verbose']('request\x20body:\x20'),y[_0x1dc49b(0x331)](_0x538437[_0x1dc49b(0x3db)]);let _0x2e8258=await this[_0x1dc49b(0x49b)]({'request':_0x538437,'schema':N,'ClassRef':M,'execute':_0x70aa18=>T[_0x1dc49b(0x246)](_0x70aa18,_0x270dab)});_0x1f9f76[_0x1dc49b(0x526)](0xc8)[_0x1dc49b(0x497)](_0x2e8258);})[_0x2c85d0(0x715)](this['routerPath'](_0x2c85d0(0x71a)),..._0x461f6c,async(_0x17f24c,_0x485b1)=>{const _0x55a582=_0x2c85d0;y[_0x55a582(0x331)](_0x55a582(0x826));let _0x1da3f2=await this[_0x55a582(0x49b)]({'request':_0x17f24c,'schema':N,'ClassRef':M,'execute':_0x444748=>T[_0x55a582(0x5fe)](_0x444748)});_0x485b1['status'](0xc8)[_0x55a582(0x497)](_0x1da3f2);});}},Ei=A(require(a0_0x490cab(0x57e))),ae={};function Si(_0x54bbb7,_0x137125,_0x2d93b2,_0x52d048){ae[_0x54bbb7]||(ae[_0x54bbb7]={}),ae[_0x54bbb7][_0x137125]={'id':_0x137125,'response':_0x2d93b2,'events':_0x52d048};}function Mi(_0x43cfd4,_0x6c3fd8){!ae[_0x43cfd4]||!ae[_0x43cfd4][_0x6c3fd8]||delete ae[_0x43cfd4][_0x6c3fd8];}function j(_0x37d20d,_0x522165,_0x24127e){const _0x552cdc=a0_0x490cab;if(!ae[_0x37d20d])return;let _0x11de2c=_0x552cdc(0x3eb)+JSON['stringify'](_0x24127e)+'\x0a\x0a';Object[_0x552cdc(0x33b)](ae[_0x37d20d])[_0x552cdc(0x5aa)](_0x20e3f9=>{const _0x4f7e3e=_0x552cdc;_0x20e3f9['events']['includes'](_0x522165)&&_0x20e3f9[_0x4f7e3e(0x7c8)][_0x4f7e3e(0x3b0)](_0x11de2c);});}function Ci(){const _0x1c625d=a0_0x490cab;let _0x4c3ef1={};for(let _0x54df4c in ae)_0x4c3ef1[_0x54df4c]=Object[_0x1c625d(0x33b)](ae[_0x54df4c])[_0x1c625d(0x555)](_0x53e1fd=>({'id':_0x53e1fd['id'],'events':_0x53e1fd[_0x1c625d(0x196)]}));return _0x4c3ef1;}var vi=require(a0_0x490cab(0x829)),Ts=require('mongoose'),Is=class{},To=new Ts[(a0_0x490cab(0x7b5))]({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),Oo=new Ts[(a0_0x490cab(0x7b5))]({'_id':{'type':String,'default':a0_0x490cab(0x79d)},'WebhookGlobal':{'type':To},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Ee=R?.[a0_0x490cab(0x82e)](Is[a0_0x490cab(0x149)],Oo,a0_0x490cab(0x35f)),_o=Ei[a0_0x490cab(0x73a)][a0_0x490cab(0x4c8)](__dirname,a0_0x490cab(0x814)),ke=(0x0,Pt[a0_0x490cab(0x396)])(),xo=b[a0_0x490cab(0x715)](a0_0x490cab(0x448))['TYPE'],ne=[Ia,Ta,xa[xo]];ke[a0_0x490cab(0x2ee)]('/media',Pt[a0_0x490cab(0x73a)][a0_0x490cab(0x1b6)](_o))['get'](a0_0x490cab(0x646),async(_0x5c8c28,_0x17ecab)=>{const _0x3811be=a0_0x490cab;console[_0x3811be(0x1bd)]('bateu\x20events');let _0x108413=_0x5c8c28[_0x3811be(0x56a)][_0x3811be(0x466)],_0x210b82=(_0x5c8c28[_0x3811be(0x298)][_0x3811be(0x196)]||'')[_0x3811be(0x6e6)](','),_0x4bc2b5=(0x0,vi['v4'])();console['log'](_0x3811be(0x1f2),_0x108413),console['log']('Subscribed\x20Events:',_0x210b82);let _0x26e759=b[_0x3811be(0x715)]('AUTHENTICATION')[_0x3811be(0x1d8)],_0x4a534d=_0x5c8c28[_0x3811be(0x298)][_0x3811be(0x642)];if(console['log']('API\x20Key\x20from\x20Request:',_0x4a534d),_0x26e759[_0x3811be(0x798)]!==_0x4a534d){console[_0x3811be(0x1bd)](_0x3811be(0x638));try{let _0x33d79e=await fe['auth'][_0x3811be(0x5f9)](_0x108413);if(console[_0x3811be(0x1bd)](_0x3811be(0x162),_0x33d79e),!_0x33d79e||_0x33d79e['apikey']!==_0x4a534d)return console[_0x3811be(0x1bd)](_0x3811be(0x2ae)),_0x17ecab['status'](0x191)[_0x3811be(0x369)](_0x3811be(0x230));}catch(_0x5ac748){return console['error']('Error\x20retrieving\x20instance\x20or\x20API\x20Key:',_0x5ac748),_0x17ecab['status'](0x191)[_0x3811be(0x369)]('API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.');}}if(!await Oe(_0x108413))return _0x17ecab[_0x3811be(0x526)](0x194)[_0x3811be(0x369)](_0x3811be(0x53d));_0x17ecab[_0x3811be(0x346)](_0x3811be(0x225),_0x3811be(0x150)),_0x17ecab[_0x3811be(0x346)](_0x3811be(0x7f5),_0x3811be(0x47f)),_0x17ecab[_0x3811be(0x346)]('Connection','keep-alive'),_0x17ecab[_0x3811be(0x2ab)]();let _0x13470d=_0x3811be(0x3eb)+JSON[_0x3811be(0x647)]({'info':_0x3811be(0x176)})+'\x0a\x0a';_0x17ecab[_0x3811be(0x3b0)](_0x13470d),Si(_0x108413,_0x4bc2b5,_0x17ecab,_0x210b82),_0x5c8c28['on'](_0x3811be(0x496),()=>{const _0x26f3e5=_0x3811be;console[_0x26f3e5(0x1bd)]('Connection\x20closed\x20for\x20instance:\x20'+_0x108413),Mi(_0x108413,_0x4bc2b5);});}),ke[a0_0x490cab(0x515)](a0_0x490cab(0x2db),async(_0x22be6d,_0x53080a)=>{const _0x24549f=a0_0x490cab;console['log'](_0x24549f(0x35b));let _0x3789b6=_0x22be6d[_0x24549f(0x56a)]['instance'],_0x4bcec8=_0x22be6d[_0x24549f(0x56a)][_0x24549f(0x82d)],_0x50cef0=_0x22be6d[_0x24549f(0x298)][_0x24549f(0x133)]||'',_0x5aa066=_0x22be6d[_0x24549f(0x3db)];console[_0x24549f(0x1bd)](_0x24549f(0x327),_0x3789b6),console['log'](_0x24549f(0x198),_0x4bcec8),console[_0x24549f(0x1bd)]('RemoteJid:',_0x50cef0),console[_0x24549f(0x1bd)](_0x24549f(0x25e),_0x5aa066);try{if(!await Oe(_0x3789b6))return _0x53080a[_0x24549f(0x526)](0x194)[_0x24549f(0x369)](_0x24549f(0x53d));let _0x34c25d=await T['startFlowWebhook'](_0x3789b6,_0x4bcec8,_0x50cef0,_0x5aa066);_0x53080a[_0x24549f(0x369)](_0x34c25d);}catch(_0x1eb12f){console[_0x24549f(0x7a9)](_0x1eb12f),_0x53080a[_0x24549f(0x526)](0x1f4)[_0x24549f(0x369)](_0x24549f(0x24e));}}),ke['get']('/clients-info',(_0x2cf716,_0x989d83)=>{const _0x15344f=a0_0x490cab;let _0x88fa17=Ci();_0x989d83[_0x15344f(0x497)](_0x88fa17);})[a0_0x490cab(0x715)]('/',(_0x418a58,_0x2ff19e)=>{const _0x4b6591=a0_0x490cab;let _0x3c7b3a=b[_0x4b6591(0x715)](_0x4b6591(0x164))[_0x4b6591(0x54c)];if(_0x3c7b3a){let _0x317d5e=encodeURIComponent(''+_0x3c7b3a);_0x2ff19e[_0x4b6591(0x618)](_0x4b6591(0x694)+_0x317d5e);return;}let _0x14bf89=b['get'](_0x4b6591(0x41e)),_0x5c2a1e=_0x14bf89&&_0x14bf89[_0x4b6591(0x7d0)][_0x4b6591(0x6e6)]('/')[0x4];if(_0x5c2a1e){let _0x51d47c=encodeURIComponent(_0x4b6591(0x208)+_0x5c2a1e);_0x2ff19e[_0x4b6591(0x618)](_0x4b6591(0x694)+_0x51d47c);}else _0x2ff19e['redirect'](_0x4b6591(0x795));})['put']('/exit',...ne,async(_0x53595c,_0x534a71)=>{const _0x3df785=a0_0x490cab;try{console[_0x3df785(0x1bd)](_0x3df785(0x1f9)),_0x534a71[_0x3df785(0x526)](0xc8)[_0x3df785(0x497)]({'message':_0x3df785(0x6c5)}),_0x534a71['on'](_0x3df785(0x32e),()=>process[_0x3df785(0x4fb)](0x0));}catch(_0x14eb11){console['error'](_0x3df785(0x1bc),_0x14eb11),_0x534a71[_0x3df785(0x526)](0x1f4)['json']({'message':_0x3df785(0x579)});}})['put'](a0_0x490cab(0x12c),...ne,async(_0x548d1a,_0x269ed3)=>{const _0x13210f=a0_0x490cab;try{let _0x3464fd=_0x548d1a[_0x13210f(0x3db)];await Ee[_0x13210f(0x341)]({},{'$set':_0x3464fd},{'upsert':!0x0});let _0x55d97c=await Ee[_0x13210f(0x2cd)]();_0x269ed3[_0x13210f(0x497)](_0x55d97c);}catch(_0x408f9a){_0x269ed3[_0x13210f(0x526)](0x190)[_0x13210f(0x369)](_0x408f9a[_0x13210f(0x202)]);}})[a0_0x490cab(0x715)](a0_0x490cab(0x12c),...ne,async(_0x4fa85f,_0x2a676e)=>{const _0x1c5f57=a0_0x490cab;try{let _0x10d94a=await Ee['findOne']();if(!_0x10d94a)return _0x2a676e[_0x1c5f57(0x497)]({});_0x2a676e[_0x1c5f57(0x497)](_0x10d94a);}catch(_0x27d39e){_0x2a676e['status'](0x1f4)[_0x1c5f57(0x369)](_0x27d39e[_0x1c5f57(0x202)]);}})[a0_0x490cab(0x2ee)]('/instance',new St(b,...ne)[a0_0x490cab(0x3a3)])[a0_0x490cab(0x2ee)](a0_0x490cab(0x44d),new Ot(...ne)[a0_0x490cab(0x3a3)])[a0_0x490cab(0x2ee)]('/chat',new ut(...ne)['router'])['use']('/group',new bt(...ne)[a0_0x490cab(0x3a3)])[a0_0x490cab(0x2ee)](a0_0x490cab(0x257),new xt(...ne)['router'])[a0_0x490cab(0x2ee)](a0_0x490cab(0x582),new Dt(...ne)[a0_0x490cab(0x3a3)]);function a0_0xe58b(_0x4f3fda,_0x5d7774){const _0x102b56=a0_0x102b();return a0_0xe58b=function(_0xe58b09,_0x14d11e){_0xe58b09=_0xe58b09-0x10d;let _0x54ec16=_0x102b56[_0xe58b09];return _0x54ec16;},a0_0xe58b(_0x4f3fda,_0x5d7774);}var m=class{constructor(..._0x2123d1){const _0x8300d1=a0_0x490cab;throw{'status':0x190,'error':_0x8300d1(0x166),'message':_0x2123d1[_0x8300d1(0x587)]>0x0?_0x2123d1:void 0x0};}},re=class{constructor(..._0x2b9e32){const _0x4bd3bb=a0_0x490cab;throw{'status':0x191,'error':_0x4bd3bb(0x1ab),'message':_0x2b9e32[_0x4bd3bb(0x587)]>0x0?_0x2b9e32:void 0x0};}},ee=class{constructor(..._0x2a7b30){const _0x5930d9=a0_0x490cab;throw{'status':0x193,'error':'Forbidden','message':_0x2a7b30[_0x5930d9(0x587)]>0x0?_0x2a7b30:void 0x0};}},J=class{constructor(..._0x464790){throw{'status':0x194,'error':'Not\x20Found','message':_0x464790['length']>0x0?_0x464790:void 0x0};}},x=class{constructor(..._0x4c12b7){const _0x472fb4=a0_0x490cab;throw{'status':0x1f4,'error':_0x472fb4(0x556),'message':_0x4c12b7[_0x472fb4(0x587)]>0x0?_0x4c12b7:void 0x0};}},we=require(a0_0x490cab(0x21f));async function Os(_0x207c37){const _0x5c5d1c=a0_0x490cab;let _0x40bce9=new $(Os['name']),_0x5cac20=R[_0x5c5d1c(0x1b4)](),_0x576f5b=_0x5cac20['db'](b[_0x5c5d1c(0x715)](_0x5c5d1c(0x1da))[_0x5c5d1c(0x4b9)][_0x5c5d1c(0x784)]+_0x5c5d1c(0x5ca))[_0x5c5d1c(0x57f)](_0x207c37),_0x4c5206=async(_0x2abb9d,_0x1654e7)=>{const _0x4519a1=_0x5c5d1c;try{return await _0x5cac20[_0x4519a1(0x3ca)](),await _0x576f5b[_0x4519a1(0x5ff)]({'_id':_0x1654e7},JSON[_0x4519a1(0x5a5)](JSON[_0x4519a1(0x647)](_0x2abb9d,we['BufferJSON']['replacer'])),{'upsert':!0x0});}catch{}},_0x79f927=async _0x45ef32=>{const _0x2b4da9=_0x5c5d1c;try{await _0x5cac20['connect']();let _0x25cfa8=await _0x576f5b[_0x2b4da9(0x2cd)]({'_id':_0x45ef32}),_0x4679a7=JSON[_0x2b4da9(0x647)](_0x25cfa8);return JSON['parse'](_0x4679a7,we['BufferJSON'][_0x2b4da9(0x57c)]);}catch{}},_0x293fbe=async _0x53b1b1=>{const _0x2f9464=_0x5c5d1c;try{return await _0x5cac20['connect'](),await _0x576f5b[_0x2f9464(0x7b4)]({'_id':_0x53b1b1});}catch{}},_0x41189f=await _0x79f927('creds')||(0x0,we['initAuthCreds'])();return{'state':{'creds':_0x41189f,'keys':{'get':async(_0xa80e47,_0x4835ac)=>{let _0xf30a98={};return await Promise['all'](_0x4835ac['map'](async _0xc8f87b=>{const _0x2d9bb4=a0_0xe58b;let _0x3c3a2b=await _0x79f927(_0xa80e47+'-'+_0xc8f87b);_0xa80e47===_0x2d9bb4(0x461)&&_0x3c3a2b&&(_0x3c3a2b=we[_0x2d9bb4(0x516)][_0x2d9bb4(0x711)][_0x2d9bb4(0x190)]['fromObject'](_0x3c3a2b)),_0xf30a98[_0xc8f87b]=_0x3c3a2b;})),_0xf30a98;},'set':async _0x43cbdb=>{const _0x4008fb=_0x5c5d1c;let _0xa0a63d=[];for(let _0x5c0ee6 in _0x43cbdb)for(let _0x432511 in _0x43cbdb[_0x5c0ee6]){let _0x1433fb=_0x43cbdb[_0x5c0ee6][_0x432511],_0x3356de=_0x5c0ee6+'-'+_0x432511;_0xa0a63d[_0x4008fb(0x3de)](_0x1433fb?_0x4c5206(_0x1433fb,_0x3356de):_0x293fbe(_0x3356de));}await Promise[_0x4008fb(0x6fc)](_0xa0a63d);}}},'saveCreds':async()=>_0x4c5206(_0x41189f,_0x5c5d1c(0x4e6))};}var ks=A(require('long')),Ls=A(require('node-cache')),Ft=require(a0_0x490cab(0x21f)),Ni=require(a0_0x490cab(0x26e)),Lt=require(a0_0x490cab(0x21f)),kt;function Do(_0x212254){const _0x2d2471=a0_0x490cab;return kt||(kt=(0x0,Ni[_0x2d2471(0x60d)])({'url':_0x212254[_0x2d2471(0x368)]}),kt[_0x2d2471(0x3ca)]()),kt;}var pe=class u{constructor(_0x12cd91,_0x36e2f5){const _0x46ba06=a0_0x490cab;this[_0x46ba06(0x4c1)]=_0x12cd91,this['instanceName']=_0x36e2f5,this[_0x46ba06(0x21e)]=new $(u[_0x46ba06(0x149)]),this['client']=Do(_0x12cd91);}set[a0_0x490cab(0x403)](_0x32c6cf){this['instanceName']=_0x32c6cf;}async['instanceKeys'](){const _0x2d7a1c=a0_0x490cab;try{return await this[_0x2d7a1c(0x386)]['sendCommand']([_0x2d7a1c(0x66a),this[_0x2d7a1c(0x4c1)][_0x2d7a1c(0x2f7)]+':*']);}catch(_0x3242a4){this[_0x2d7a1c(0x21e)][_0x2d7a1c(0x7a9)](_0x3242a4);}}async[a0_0x490cab(0x60a)](_0x4b48bb,_0x4b4f5e){const _0x432941=a0_0x490cab;try{let _0x605884=JSON['stringify'](_0x4b4f5e,Lt[_0x432941(0x77b)][_0x432941(0x6bd)]);return await this[_0x432941(0x386)][_0x432941(0x287)](this[_0x432941(0x4c1)][_0x432941(0x2f7)]+':'+this[_0x432941(0x629)],_0x4b48bb,_0x605884);}catch(_0x5c914b){this[_0x432941(0x21e)][_0x432941(0x7a9)](_0x5c914b);}}async[a0_0x490cab(0x471)](){const _0x2bbc67=a0_0x490cab;try{let _0x5ce534=await this[_0x2bbc67(0x386)][_0x2bbc67(0x110)](this[_0x2bbc67(0x4c1)][_0x2bbc67(0x2f7)]+':'+this[_0x2bbc67(0x629)]);if(_0x5ce534){for(let _0x48dcf9 in _0x5ce534)Object[_0x2bbc67(0x58b)][_0x2bbc67(0x375)]['call'](_0x5ce534,_0x48dcf9)&&(_0x5ce534[_0x48dcf9]=JSON[_0x2bbc67(0x5a5)](_0x5ce534[_0x48dcf9],Lt[_0x2bbc67(0x77b)]['reviver']));return _0x5ce534;}}catch(_0x593e37){this[_0x2bbc67(0x21e)][_0x2bbc67(0x7a9)](_0x593e37);}}async[a0_0x490cab(0x2cb)](_0x3694c8){const _0x412227=a0_0x490cab;try{let _0x4bcc0e=await this[_0x412227(0x386)]['hGet'](this[_0x412227(0x4c1)][_0x412227(0x2f7)]+':'+this['instanceName'],_0x3694c8);if(_0x4bcc0e)return JSON['parse'](_0x4bcc0e,Lt[_0x412227(0x77b)]['reviver']);}catch(_0x21d649){this[_0x412227(0x21e)]['error'](_0x21d649);}}async['removeData'](_0xe517fa){const _0xc74576=a0_0x490cab;try{return await this['client'][_0xc74576(0x2f3)](this[_0xc74576(0x4c1)][_0xc74576(0x2f7)]+':'+this[_0xc74576(0x629)],_0xe517fa);}catch(_0x3e1279){this['logger'][_0xc74576(0x7a9)](_0x3e1279);}}async['delAll'](_0x3d520a){const _0x594722=a0_0x490cab;try{return await this[_0x594722(0x386)][_0x594722(0x3e6)](_0x3d520a||this[_0x594722(0x4c1)][_0x594722(0x2f7)]+':'+this[_0x594722(0x629)]);}catch(_0x3c641e){this['logger']['error'](_0x3c641e);}}};async function _s(_0x333751,_0x694d2d){const _0x495734=a0_0x490cab;let _0x22d53d=new $(_s[_0x495734(0x149)]),_0x664730=new pe(_0x333751,_0x694d2d),_0x5c61f6=async(_0x352079,_0x359620)=>{const _0x4a4d7b=_0x495734;try{return await _0x664730[_0x4a4d7b(0x60a)](_0x359620,_0x352079);}catch(_0x33bd75){return _0x22d53d[_0x4a4d7b(0x7a9)]({'localError':'writeData','error':_0x33bd75});}},_0x30c6ed=async _0x1e3cd6=>{const _0x421a5d=_0x495734;try{return await _0x664730[_0x421a5d(0x2cb)](_0x1e3cd6);}catch(_0x4fa771){_0x22d53d['error']({'readData':'writeData','error':_0x4fa771});return;}},_0x5a1098=async _0x13615f=>{const _0x5528d5=_0x495734;try{return await _0x664730[_0x5528d5(0x664)](_0x13615f);}catch(_0x2d7ee2){_0x22d53d[_0x5528d5(0x7a9)]({'readData':'removeData','error':_0x2d7ee2});}},_0x394be4=await _0x30c6ed(_0x495734(0x4e6))||(0x0,Ft[_0x495734(0x622)])();return{'state':{'creds':_0x394be4,'keys':{'get':async(_0x206777,_0x3fa555)=>{const _0x4d28ab=_0x495734;let _0x4d0618={};return await Promise[_0x4d28ab(0x6fc)](_0x3fa555['map'](async _0x2bdbb6=>{const _0x11b48b=_0x4d28ab;let _0x3b95a4=await _0x30c6ed(_0x206777+'-'+_0x2bdbb6);_0x206777===_0x11b48b(0x461)&&_0x3b95a4&&(_0x3b95a4=Ft[_0x11b48b(0x516)][_0x11b48b(0x711)][_0x11b48b(0x190)][_0x11b48b(0x776)](_0x3b95a4)),_0x4d0618[_0x2bdbb6]=_0x3b95a4;})),_0x4d0618;},'set':async _0x473134=>{const _0x50325b=_0x495734;let _0x3fa573=[];for(let _0x5026ce in _0x473134)for(let _0x25a674 in _0x473134[_0x5026ce]){let _0x2c9ac5=_0x473134[_0x5026ce][_0x25a674],_0xcfac9c=_0x5026ce+'-'+_0x25a674;_0x3fa573['push'](_0x2c9ac5?await _0x5c61f6(_0x2c9ac5,_0xcfac9c):await _0x5a1098(_0xcfac9c));}await Promise[_0x50325b(0x6fc)](_0x3fa573);}}},'saveCreds':async()=>await _0x5c61f6(_0x394be4,_0x495734(0x4e6))};}var L=A(require('fs')),Y=require('uuid'),qt=A(require('sharp')),Vt=require(a0_0x490cab(0x7e5)),$i=require('child_process'),Ri=require('util'),Ai=A(require(a0_0x490cab(0x701))),ve=class extends _{constructor(_0x204c29,_0x1b53c1,_0x4971d3){const _0x791f52=a0_0x490cab;super(_0x1b53c1),this[_0x791f52(0x6d6)]=_0x204c29,this[_0x791f52(0x3ec)]=_0x1b53c1,this[_0x791f52(0x388)]=_0x4971d3;}async['createOrUpdate'](_0xd06194,_0x283ba8){const _0x54b19c=a0_0x490cab;try{if(this[_0x54b19c(0x836)][_0x54b19c(0x3c3)]){console[_0x54b19c(0x1bd)](_0x54b19c(0x238)+_0x283ba8+_0x54b19c(0x5cf),_0xd06194);let _0x13b4f0=await this[_0x54b19c(0x6d6)][_0x54b19c(0x412)]({'_id':_0x283ba8},{'$set':_0xd06194},{'new':!0x0,'upsert':!0x0});return console['log'](_0x54b19c(0x6af),_0x13b4f0),_0x13b4f0;}}catch(_0x30926b){throw console[_0x54b19c(0x7a9)](_0x54b19c(0x4f3),_0x30926b),_0x30926b;}return null;}async['deleteOne'](_0x4626ad){const _0x5449b2=a0_0x490cab;try{let _0x24c6cf=I(_0x4626ad[_0x5449b2(0x83d)]);return{'deletedCount':(await this[_0x5449b2(0x6d6)][_0x5449b2(0x7b4)](_0x24c6cf))['deletedCount']};}catch(_0x2ce135){return{'error':_0x2ce135?.[_0x5449b2(0x751)]()};}}async['findOne'](_0x2eee96){const _0x43903a=a0_0x490cab;try{let _0x42ae86=I(_0x2eee96[_0x43903a(0x83d)]);return await this[_0x43903a(0x6d6)][_0x43903a(0x2cd)](_0x42ae86)[_0x43903a(0x700)]();}catch{return null;}}},Ut=(0x0,Ri['promisify'])($i[a0_0x490cab(0x7b8)]),Po=b[a0_0x490cab(0x715)](a0_0x490cab(0x2fb)),xs=class{constructor(){const _0x56d7f0=a0_0x490cab;this['cacheInstanceRepository']=new ve(ze,b),(!this['ipv6Prefix']||!this[_0x56d7f0(0x153)])&&Po&&this[_0x56d7f0(0x134)]()['then'](()=>{const _0x2c58a2=_0x56d7f0;console['log'](_0x2c58a2(0x2e3)+this[_0x2c58a2(0x491)]),console[_0x2c58a2(0x1bd)](_0x2c58a2(0x70f)+this['networkInterface']);})['catch'](_0x4281c9=>{const _0x4fa356=_0x56d7f0;console[_0x4fa356(0x7a9)](_0x4fa356(0x231)+_0x4281c9[_0x4fa356(0x202)]);});}async[a0_0x490cab(0x134)](){const _0x3a2d20=a0_0x490cab;try{let {stdout:_0x347fcf}=await Ut(_0x3a2d20(0x66e));console[_0x3a2d20(0x1bd)](_0x3a2d20(0x4f9)+_0x347fcf);let _0x1890bd=_0x347fcf[_0x3a2d20(0x6e6)]('\x0a')[_0x3a2d20(0x555)](_0x5b79b2=>_0x5b79b2['split']('\x20')[0x0])[_0x3a2d20(0x5f7)](_0x54581d=>!_0x54581d[_0x3a2d20(0x3d0)]('lo')&&!_0x54581d[_0x3a2d20(0x3d0)](_0x3a2d20(0x2a5))&&!_0x54581d['includes'](_0x3a2d20(0x36c))&&!_0x54581d[_0x3a2d20(0x3d0)]('wl')&&!_0x54581d['includes']('@'));if(console['log'](_0x3a2d20(0x503)+_0x1890bd),_0x1890bd[_0x3a2d20(0x587)]===0x0)throw new Error(_0x3a2d20(0x693));this['networkInterface']=_0x1890bd[0x0];let {stdout:_0x4296c9}=await Ut(_0x3a2d20(0x35d)+this[_0x3a2d20(0x153)]);console[_0x3a2d20(0x1bd)](_0x3a2d20(0x781)+_0x4296c9);let _0x2bf996=_0x4296c9[_0x3a2d20(0x6e6)]('\x0a')[_0x3a2d20(0x5f9)](_0x234ddd=>_0x234ddd[_0x3a2d20(0x3d0)](_0x3a2d20(0x2b0))&&_0x234ddd['includes'](_0x3a2d20(0x42e)));if(!_0x2bf996)throw new Error('No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface');let _0x518f9b=_0x2bf996[_0x3a2d20(0x57d)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x518f9b)throw new Error(_0x3a2d20(0x7a5));let [_0x12eff0,_0x58ba2e,_0x394f32]=_0x518f9b,_0x3f3fb0=Math['floor'](Number(_0x394f32)/0x10),_0x1a83e5=Number(_0x394f32)%0x10,_0x4f2da6=_0x58ba2e[_0x3a2d20(0x6e6)](':')[_0x3a2d20(0x3b7)](0x0,_0x3f3fb0)[_0x3a2d20(0x4c8)](':');if(_0x1a83e5>0x0){let _0x16b010=_0x58ba2e[_0x3a2d20(0x6e6)](':')[_0x3f3fb0],_0x35f1d1=0xffff<<0x10-_0x1a83e5&0xffff,_0x395e45=(parseInt(_0x16b010,0x10)&_0x35f1d1)[_0x3a2d20(0x751)](0x10)['padStart'](0x4,'0');_0x4f2da6+=':'+_0x395e45;}this['ipv6Prefix']=_0x4f2da6+':';}catch(_0x585c80){console['error'](_0x3a2d20(0x77c),_0x585c80);}}async[a0_0x490cab(0x7a7)](_0x55d249){const _0x551709=a0_0x490cab;let _0x2b86b2='ip\x20-6\x20addr\x20add\x20'+_0x55d249+'/64\x20dev\x20'+this[_0x551709(0x153)];try{await Ut(_0x2b86b2),console[_0x551709(0x1bd)](_0x551709(0x5f4)+_0x55d249);}catch(_0x2c0c6d){throw console[_0x551709(0x7a9)](_0x551709(0x22e)+_0x2c0c6d),new Error(_0x551709(0x22e)+_0x2c0c6d);}}async['removeIPv6'](_0x4d0f21){const _0x343bce=a0_0x490cab;let _0x69373e='ip\x20-6\x20addr\x20del\x20'+_0x4d0f21+_0x343bce(0x1fb)+this[_0x343bce(0x153)];try{await Ut(_0x69373e),console[_0x343bce(0x1bd)](_0x343bce(0x1e2)+_0x4d0f21);}catch(_0x4d993c){throw console[_0x343bce(0x7a9)]('Error\x20removing\x20IPv6\x20address:\x20'+_0x4d993c),new Error('Error\x20removing\x20IPv6\x20address:\x20'+_0x4d993c);}}[a0_0x490cab(0x3ab)](){const _0x4d1dac=a0_0x490cab;return _0x4d1dac(0x1f5)[_0x4d1dac(0x4d4)](/X/g,()=>'0123456789ABCDEF'['charAt'](Math[_0x4d1dac(0x66f)](Math[_0x4d1dac(0x458)]()*0x10)));}[a0_0x490cab(0x2d6)](_0xd3d59e,_0x214297){const _0x368f51=a0_0x490cab;let _0x5365be=_0x214297[_0x368f51(0x6e6)](':');return _0x5365be[0x0]=(parseInt(_0x5365be[0x0],0x10)^0x2)['toString'](0x10)['padStart'](0x2,'0'),''+_0xd3d59e+_0x5365be[0x0]+_0x5365be[0x1]+':'+_0x5365be[0x2]+'ff:fe'+_0x5365be[0x3]+':'+_0x5365be[0x4]+_0x5365be[0x5];}[a0_0x490cab(0x38d)](){const _0x3de105=a0_0x490cab;let _0x582cc0=this[_0x3de105(0x491)];_0x582cc0[_0x3de105(0x381)](':')||(_0x582cc0+=':');let _0x1cef7d=this['randomMac']();return this[_0x3de105(0x2d6)](_0x582cc0,_0x1cef7d);}[a0_0x490cab(0x54f)](_0x2e23a1){const _0x42939e=a0_0x490cab;return new RegExp(_0x42939e(0x585))[_0x42939e(0x22f)](_0x2e23a1);}async[a0_0x490cab(0x45d)](_0x7c3b09){const _0x1e3ef7=a0_0x490cab;let _0x2ab8a6=[{'url':_0x1e3ef7(0x4ec),'parse':_0x55fea7=>_0x55fea7['ip']},{'url':'https://api64.ipify.org?format=json','parse':_0x2f8b61=>_0x2f8b61['ip']},{'url':_0x1e3ef7(0x517),'parse':_0x3a3f4e=>_0x3a3f4e[_0x1e3ef7(0x63d)]()},{'url':_0x1e3ef7(0x52b),'parse':_0x4312d4=>_0x4312d4[_0x1e3ef7(0x63d)]()}],_0x8fd3ba=_0x2ab8a6[Math[_0x1e3ef7(0x66f)](Math[_0x1e3ef7(0x458)]()*_0x2ab8a6[_0x1e3ef7(0x587)])];try{let _0x2be14e=await Ai[_0x1e3ef7(0x73a)][_0x1e3ef7(0x715)](_0x8fd3ba[_0x1e3ef7(0x789)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x7c3b09}}),_0x5bf935=_0x8fd3ba[_0x1e3ef7(0x5a5)](_0x2be14e['data']);return _0x5bf935[_0x1e3ef7(0x637)]()===_0x7c3b09[_0x1e3ef7(0x637)]()?(console[_0x1e3ef7(0x1bd)](_0x1e3ef7(0x2bd)+_0x7c3b09),!0x0):(console[_0x1e3ef7(0x7a9)](_0x1e3ef7(0x576)+_0x7c3b09+',\x20received\x20'+_0x5bf935),!0x1);}catch(_0x494199){return console[_0x1e3ef7(0x7a9)](_0x1e3ef7(0x39e)+_0x8fd3ba[_0x1e3ef7(0x789)]+':\x20'+_0x494199[_0x1e3ef7(0x202)]),!0x1;}}async[a0_0x490cab(0x1e3)](_0x1a8cec,_0x13e25e){const _0x98624f=a0_0x490cab;if(!this[_0x98624f(0x491)]||!this[_0x98624f(0x153)])return console['error'](_0x98624f(0x522)),null;let _0x1435d3;do _0x1435d3=this[_0x98624f(0x38d)](),console[_0x98624f(0x1bd)](_0x98624f(0x577)+_0x1435d3);while(!await this[_0x98624f(0x12d)](_0x1435d3));await this['configureIPv6'](_0x1435d3),console['log'](_0x98624f(0x199)+_0x1435d3);let _0x5b6d1c={'_id':_0x1a8cec+'-'+_0x13e25e,'ip':_0x1435d3},_0x1315e1=await this[_0x98624f(0x51c)]['createOrUpdate'](_0x5b6d1c,_0x5b6d1c[_0x98624f(0x215)]);return console[_0x98624f(0x1bd)](_0x98624f(0x3ba)+_0x1315e1),_0x1435d3;}async[a0_0x490cab(0x12d)](_0x2639f8){const _0x23a2bd=a0_0x490cab;return this['isValidIPv6Config'](_0x2639f8)?!await this[_0x23a2bd(0x51c)][_0x23a2bd(0x2cd)]({'where':{'ip':_0x2639f8}}):!0x1;}async['removeIPv6ById'](_0x325fa0,_0x5b4245){const _0x34e612=a0_0x490cab;let _0x271926=_0x325fa0+'-'+_0x5b4245,_0x120676=await this[_0x34e612(0x51c)][_0x34e612(0x2cd)]({'where':{'_id':_0x271926}});_0x120676&&_0x120676['ip']&&(await this['removeIPv6'](_0x120676['ip']),await this[_0x34e612(0x51c)][_0x34e612(0x7b4)]({'where':{'_id':_0x271926}}));}},ko=new xs(),he=ko,Fs=a0_0x490cab(0x350),Pi,ge=null,Da=null,Lo=0x3,Fo=null,Ii=b[a0_0x490cab(0x715)]('AUTHENTICATION')['API_KEY'][a0_0x490cab(0x798)],Ti=b[a0_0x490cab(0x715)](a0_0x490cab(0x2fb));async function Uo(){const _0x5457ed=a0_0x490cab;let _0x1791e7=await Ee[_0x5457ed(0x2cd)]();ge=_0x1791e7?.[_0x5457ed(0x7b0)]??null,Fo=_0x1791e7?.[_0x5457ed(0x46f)]??null,Fs=_0x1791e7?.[_0x5457ed(0x6d4)]??_0x5457ed(0x350),Pi=_0x1791e7?.[_0x5457ed(0x356)]??X??_0x5457ed(0x48b);}async function jo(){await Uo();}jo();function a0_0x102b(){const _0x22e3e5=['File\x20written\x20to\x20path:\x20','.gif','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','Erro\x20ao\x20importar\x20chats','Types','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','deleteChat','console','updateReadReceiptsPrivacy','):\x20Deletando\x20conversa...','updateGParticipant','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','pollErrorMessage','.ogv','pre','Flow\x20\x27','Missing\x20global\x20api\x20key','\x20}\x0a','all','RemoveChatLabel','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','startCommandWord','lean','axios','goNextblock','):\x20Não\x20achou\x20nenhum\x20flow','[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache','sendText','getProfileName','Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','Type\x20not\x20found','1492983hJMTBG','getContactModelForOwner','backgroundColor','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','audio','groupToggleEphemeral','Network\x20Interface\x20detected:\x20','Subdomínio\x20não\x20encontrado','Message','execSync','replaceVariablesLogs','badSession','get','SECRET','deletedCount','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','unknown\x20operation\x20type\x20[','allflows','findContacts','MESSAGES_SET','):\x20isVote:\x20','endSession','findManyByIds','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName','toLocaleString','\x20-y','gifPlayback','processConditions',',\x20isAdmin:\x20','fetchMessages','deleteImportedChat','removeInstance','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','Não\x20respondeu\x20com\x20a\x20enquete.','notas','expression','Partes\x20do\x20caminho\x20FULLCHAIN:','originalUrl','waitingMenu_id','.ogg','listMessage','.type','convert','dropCollection','groups.update','envYaml','processvaredits','reactionMessage','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','default','Erro\x20ao\x20atualizar\x20agendamento\x20','Instance\x20\x22','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','list','messages.set','revokeInviteCode','verifyWhatsAppNumber','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','convertedOptions','stateConnection','chat','redis','isBase64','connection.update','270VPSkPp','requestFile','authService','Nenhum\x20participante\x20válido\x20encontrado.','\x20com\x20sucesso.','JWT','DELIVERY_ACK','apirequest','toString','_fromMe','action','end','sendWhatsAppAudio','):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20','getScheduleMessage','37587BnUxKl','Nenhum\x20chat\x20encontrado\x20para\x20editar.','onTime','delete','getMessage','Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','Erro\x20ao\x20editar\x20o\x20bloco:\x20','Erro\x20ao\x20atualizar\x20o\x20fluxo:','):\x20Limpando\x20delayMessage','ChatRouter','The\x20instance\x20needs\x20to\x20be\x20disconnected','contains','toBrazilianNumberFormat','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','getflow','update','groupJid','DisconnectReason','LICENSE_INVALID','RECONNECT_TIME_FRAME','REDIS_URI','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','.xls','variablesToObject','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','poll','/wa-contacts','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName','context','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','fromObject','paused','output','\x1b[34m','mentions','BufferJSON','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','messageType','):\x20Editando\x20mensagens\x20no\x20grupo...','):Delete\x20chat\x20in\x20client\x20for\x20number:\x20','replyOption','IPv6\x20addresses\x20detected:\x20','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.','validate','DB_PREFIX_NAME','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','.\x20Aguardando\x20','\x27\x20não\x20encontrado\x20na\x20memória','oldToken','url','statSync','call','editFlowGroup','The\x20global\x20api\x20key\x20must\x20be\x20set','save','Esse\x20fluxo\x20expirou','ignoreGroups','findFlow','bulkWrite','resetReconnectionVariables','stopConversation','https://uazapi-plugin.bubbleapps.io/','variable','getConversation','KEY','collections','processawaitSeconds','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','dropIndex','config','/create','info','cachedData-whatsapp','view\x20engine','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.','loadWebhook','isInteger','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','insertCount','configureIPv6','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','error','updateMissingCustomFields','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','ip:\x20','delayChatLabel_RETRY_DELAY_MS','setRestartTimeout','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','WebhookGlobal','undefined','Comando\x20desconhecido','Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...','deleteOne','Schema','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','exec','muteEndTime','sectionsToString','Erro\x20ao\x20deletar\x20a\x20conversa','\x1b[37m','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact','webp','blocks','label_jid','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','\x1b[36m','SERVER_ACK','):\x20Error\x20processing\x20conditions:\x20','updateOneById','Log\x20out\x20instance:\x20','response','number','):\x20Fluxos\x20não\x20estão\x20ativados','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','):\x20debug\x20alterando\x20this.AutomateSystem','status@broadcast','creation','flowStopMinutes','FULLCHAIN','\x1b[44m','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','dbInstance','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done','evaluateConditionTest','defineProperty','getValidWhatsAppNumbers','next_groupId','getDevice','errors','editflowcondition','no.connection','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence','lastSendMessage','2932LrjWlW','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','protocolMessage','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','pollMessage','groupName','crypto','):Converted\x20image\x20deleted','Error\x20fetching\x20and\x20updating\x20profile:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','\x22,\x20valor\x20a\x20substituir:\x20\x22','telefone','website','responsavelid','):\x20Bloco\x20original\x20para\x20cópia:\x20','waitingMenu_text','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','updateGroupsAddPrivacy','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','fetchContacts','Tentando\x20reconectar...','Cache-Control','optionDescription','customFields','CHATS_SET','now','groupJoinApprovalMode','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','conditions','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','isRunning','mentioned','vcard','buttonText','globalShow','moreLogs','fileName','\x20atualizado\x20com\x20sucesso.\x20Ação:\x20','restrict','Font\x20is\x20required','.webm','Fluxo\x20agendado\x20pelo\x20fluxo\x20','):\x20whoCanUse\x20after\x20validation:\x20','waitingMenu_ExpiredMessage','messageTimestamp','instanceCount','Erro\x20ao\x20buscar\x20o\x20fluxo','LabelModel','getMIMEType','INFO','.mimetype','downloads','Enter\x20a\x20value\x20in\x20milliseconds','Atualização:\x20','pop','\x1b[30m%s\x1b[0m','SERVER_TYPE','readdirSync','newValue','menuIgnoreNonVotes','\x20ao\x20chat\x20','):\x20Entrou\x20na\x20função\x20stop',',\x20lastCondition:\x20','4472628VVzTDX','message_normalized','):Business\x20profile\x20fetched','Removidas\x20as\x20variáveis:\x20','groupAcceptInvite','.txt','request\x20received\x20in\x20allFlows','EMAIL:','updateFlowConfig','uuid','STORE_CLEANING_TERMINAL','existsSync','):\x20encontrado\x20próxima\x20mensagem\x20para\x20','startID','model','_activedCount','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','#01d0e2','testingWith','yes','.jpg','findAndUpdateCacheContact','dbSettings','false','flowActive','replaceVariablesChat','Nenhum\x20chat\x20fornecido\x20para\x20inserção.','rowId','Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture','where','basename','digest','Variável\x20não\x20encontrada!','delayChatLabel_MAX_RETRIES','):\x20Editando\x20condição\x20do\x20fluxo...','inner','):\x20Flow\x20\x27','hGetAll','unreadcount','groupGetInviteInfo','createFlow','):\x20updateResult:','Erro\x20ao\x20tentar\x20updateCustomFields','#000000','video-cover.png','Flow\x20iniciado','@s.whatsapp.net','Erro\x20ao\x20copiar\x20o\x20documento','prepareMediaMessage','available','array','errorLog','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','text','varedit','lastMessage','.mp3','conversationTimestamp','__esModule',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','\x1b[43m','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','subjectTime','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','editMessagesInGroup','/config','isValidAndUniqueIPv6','.png','msgRetryCounterCache','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','$set','remoteJid','detectIPv6PrefixAndInterface','content','DEBUG','express-async-errors','):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27','menuType','):\x20Falha\x20ao\x20deletar\x20mensagem.',',\x20Expiration\x20Time:\x20','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','):\x20Buscando\x20flow,\x20id:\x20','copy','descOwner','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','):\x20\x27Enviando\x20audio\x20para\x20\x27','synchronizeAndMapFlows','contactMessage','Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.','createSectionsFromValues','CHATS_UPDATE','createJid','createNewConversation','name','padStart','chat\x20não\x20encontrado','create','writeFile','envProcess','request\x20received\x20in\x20editFlowcondition','text/event-stream','webhookModel','enumerable','networkInterface','CONECTADO\x20À\x20UAZAPI','messages.upsert','spawn','http','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','ContactModel','42ujKTtN','flowConfig','leadInfo.','):Image\x20created','COLOR','role','deleteDoneMessages','readMessage','Instance\x20Key\x20from\x20DB:','not_announcement','SERVER','isConnected','Bad\x20Request','\x1b[32m%s\x1b[0m','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','delAll','#fe9dfe','):\x20whoCanUse\x20before\x20validation:\x20','DELETED','findByIdAndDelete','Authentication\x20error','quoted','):\x20Buscando\x20conversas...','MessageModel','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','):\x20Editando\x20edição\x20do\x20fluxo...','headers','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','Conexão\x20estabelecida',']\x20(','mimetype','Erro\x20ao\x20atualizar\x20o\x20flow.','size','sendList','_remoteJid','inviteUrl','assign','stanzaId','sendReaction','updateMessage','Falha\x20ao\x20processar\x20fetchBusinessProfile','editedMessage','Erro\x20ao\x20buscar\x20fluxos:','):\x20Label\x20','getMinutes','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','/wa-all-message','triedToSend','findGroups','userDevicesCache','cleanStore','):\x20Parar\x20função\x20pois\x20não\x20está\x20conectado','sending','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','AppStateSyncKeyData','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','ListType','connectToWhatsapp','GROUP_PARTICIPANTS_UPDATE','viewOnceMessage','events','content-type','StartID:','Configured\x20IPv6:\x20',',\x20global:\x20','#ffc5c7','jsonschema','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','):\x20Criando\x20fluxo...','webhookService','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','recording','logout','header','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','^\x5cd+([-]\x5cd+)*@g.us$','isCommunityAnnounce','compression','uazapiSendMenu','messageStubParameters','Unauthorized','):\x20Enviando\x20enquete','contacts.upsert','messageHandle','\x5c$&','http://checkip.dyndns.org','Número\x20não\x20possui\x20WhatsApp.','mediatype','DATABASE_ENABLED','getClient','Contacts\x20not\x20found','static','reorderBlocks','apiResponse','open','mediaSticker','scheduleMessage','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','log','capitalizedWords','labels.association','value','restart','key','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','menuExpiredMessage','\x20chats\x20de\x20','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','author','_Labels','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','deleteBlock','editflowgroup','temp-','presence','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','/instance/delete','AUTHENTICATION_API_KEY',',\x20Segundo\x20Valor:\x20','normalizeMessage','updateBlock','minutesToClose','HOST','GUARD','autoCompleteMessages','API_KEY','Erro\x20ao\x20inserir\x20chats:','DATABASE','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','add','_pushName','has','4NuEXyo','integer','online','IPv6\x20address\x20removed:\x20','createIPv6','groupDesc','pollCreationMessageV2','profile','#ffffff','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','block','\x1b[41m','encoding','app','SSL_CONF_PRIVKEY','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','preview','Erro\x20ao\x20editar\x20agentes','linkPreview','Instance\x20ID:','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','XX:XX:XX:XX:XX:XX','contentText','owner','checkAndRestartProcess','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','startFlowWebhook','/64\x20dev\x20','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','getScheduleMessageModelForOwner','urlOrBase64','waUploadToServer','/wa-message','audio/ogg;\x20codecs=opus','message','pow','connectToWhatsappController','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','BRL','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','https://','\x20minutos','CONTACTS_UPDATE','dbClient','Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20','/wa-groups','proxy:\x20','createConnection','AddChatLabel','refused','SSL_CONF_FULLCHAIN','leaveGroup','removeChatLabel','_id','\x22\x20cannot\x20be\x20empty','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','findById','Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global','upsertChats','):\x20teve\x20mudanças\x20chat.archived:\x20','profilePictureUrl','extractPhoneNumber','logger','@whiskeysockets/baileys','updateOnlinePrivacy','SERVER_OFFLINE','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo','equal','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','Content-Type','isBusiness','CacheContacts\x20database\x20connection\x20closed.','labels.edit','canSendMessage','latitude','editScheduleMessage','?authSource=admin&readPreference=primary&directConnection=true','processgoToFlow','Error\x20adding\x20IPv6\x20address:\x20','test','API\x20Key\x20inválida.','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','exists','findOrCreate','editFlowCondition','getChatModelForOwner','getConversationModelForOwner','deleteConversation','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','CONTACTS_UPSERT','updateConversation','waInstances','\x22\x20not\x20found','uazapiSendMedia','mongodb','PRODUCT_LIST','):\x20this.processingGroup_id:\x20','leadInfo','uncaughtException','Instance\x20deleted','charAt','waMonitor','deleteFlow','qrcode','updateMissingEtiquetas','archiveChat','sendPresenceUpdate','):\x20Buscando\x20flow...','):\x20Enviando\x20localização','\x20minutos...','Erro\x20ao\x20iniciar\x20o\x20fluxo.','unlocked','isArray','addBlock','Error\x20parsing\x20JSON:','keyPattern','reject','sendMedia','title','/webhook','.doc','some','fone','\x0aFN:','reconnectTimestamps','updateGroupWebhook','Request\x20Body:','updateGParticipate','):\x20Enviando\x20mensagem\x20para\x20','repository','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','https://github.com/uazapi/uazapi.git','deleteMessageForEveryone','unlinkSync','min','CHATS_UPSERT','demote','Erro\x20inesperado\x20em\x20processvaredits:\x20','\x27...','requestPairingCode','createWebhook','\x1b[32m','@redis/client','_Contacts','):\x20Chat\x20','DATABASE_CONNECTION_PASSWORD','Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.','Erro\x20ao\x20alterar\x20privacidade','\x20quoted:\x20','Error\x20removing\x20unused\x20chat\x20fields:','request\x20body:\x20','/media/','subject','):\x20lastBlockId:\x20','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','updateStatusPrivacy','lastCondition','):\x20Entrou\x20na\x20função\x20goToFlow','DD/MM\x20HH:mm:ss','\x1b[1m','The\x20','EXPIRIN_IN','READ','whoCanEdit','GROUPS_UPSERT','firstValue','media','hSet','):\x20Bloco\x20com\x20ID\x20','pollCreationMessageKey','/instance/create','count','EMAIL','eventEmitter','pollCreationMessage','\x20segundos','\x1b[40m','LOG','command','):Error\x20in\x20converting\x20audio','verify','Selecione','fullName','mkdirSync','query','defineAuthState','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20','groupHandler','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','Erro\x20ao\x20adicionar\x20label\x20','):\x20Erro\x20durante\x20a\x20atualização:\x20','):\x20tem\x20blocks','This\x20name\x20','valid','processApiRequest','onWhatsApp','statusCode','docker','closeExistingConversations','shift','composing','updateReplyOption','PRIVKEY','flushHeaders','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','drop','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','buttonId','inet6','Valor\x20de\x20find\x20ou\x20replace\x20ausente','Error\x20in\x20chatModify\x20for\x20number\x20','findWebhook','../env.yml','Last\x20message\x20not\x20found\x20for\x20number:\x20','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','):\x20Criou\x20conversa\x20no\x20startFlow','caption','Pausado\x20por\x20','\x0a*Você\x20respondeu*:\x0a',',\x20saindo.','editflow','IP\x20confirmed:\x20','VERBOSE','/exit','PLAYED','contacts.update','sendContact','utf8','agents','Erro\x20ao\x20deletar\x20mensagens:','fetchStatus','mediaMessage','getMessageModelForOwner','selectedOptions','imgUrl','readData','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','findOne','last_update','stdout','findMany','remove.instance','groups_ignore','uazapiSendText','):\x20alterando\x20this.AutomateSystem','cleaningUp','ip6eui','groupId','g.us','#83e421','METHODS','/startFlow/:instance/:startID','dayjs','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','archived','readFile','HH:mm:ss','cpf','):\x20Conversa\x20inserida\x20com\x20sucesso.','IPv6\x20Prefix\x20detected:\x20','isJWT','Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','):\x20Current\x20Time:\x20','apply','urlencoded','URL\x20completa:','):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20','jid','Rótulo\x20deletado:\x27,\x20','use',',\x20Novo\x20tamanho:\x20','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','getAutomateSystem','hDel','\x1b[33m\x1b[1m','cors','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','PREFIX_KEY','ORG:','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','@broadcast','PROXY','MESSAGES_UPDATE','Flow\x20iniciado\x20com\x20','public','groupBetterSetting','findMessages','STORE_CONTACTS','ContactsAndGroups','utf-8','subjectOwner','#b4ebff','Mensagens\x20deletadas\x20com\x20sucesso.','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','goToFlow','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','PRESENCE_UPDATE','image','repeat','loadInstance','convertToWebP','LOG_COLOR','):\x20teve\x20mudanças\x20chat.muteEndTime:\x20','!cmd_','mongoose','isURL','evaluateCondition','NextBlock','Read\x20messages','?timestamp=','stopMinutes','.pptx','deleteflow','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:','DARK','authModel','creds.update','SUCCESS','sendMessageAck','data','send.message','_ScheduleMessages','memberAddMode','ObjectId','Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants','Instance\x20Name:','object','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','pollMessageOnDelete','chatLog','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','not\x20loaded','finish','):\x20','toDataURL','verbose','choices','flattenObject','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','height','):\x20newSecondValue\x20após\x20replaceVariables:','sha256','createServer','readFileSync','):\x20conversation.lastInteraction:\x20','values','#ffae04','lastSend','listType','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','groupValidate','updateOne','processclearVariables','autoCompleteMessages.command_1','limit','groupCreate','setHeader','option','Conversa\x20deletada\x20com\x20sucesso.','updateAgent','getLabelModelForOwner','[AUTH]\x20Database\x20is\x20not\x20enabled','group-participants.update','fetchChats','Message\x20not\x20found','authentication','Safari','saveCreds','lastInteraction','buttonMessage','contact','mediaKey','connectedName','Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20','):\x20whoCanEdit\x20after\x20validation:\x20','):\x20Removendo\x20\x27','Error\x20fetching\x20group','iniciando\x20fluxo\x20router','Erro\x20ao\x20remover\x20label\x20','ip\x20-6\x20addr\x20show\x20dev\x20','createGroup','All_Instances_Config','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','.extension','flow','apiName','Parando\x20aplicação,\x20atualização\x20recebida','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','recebido\x20de','editFlow','URI','send','joinGroup','groupUpdateSubject','vir','\x27\x20não\x20encontrado','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','realVariables','hbs','sem\x20texto\x20na\x20mensagem','editFlowVariable','processScheduleFlow','):Output\x20path:\x20','hasOwnProperty','chats.delete','applyvaredit','Db\x20Connection','deleted','binary','admin','):\x20Iniciando\x20bot...','user','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','addresss','sendSticker','endsWith','):\x20transformedCustomFieldVariables','setUpdate','\x20-i\x20','.svg','client','awaitingApproval','dbConnection','generateHash',',\x20Minutes\x20to\x20Close:\x20','throwAndLogError','\x20depois\x20','generateRandomIPv6','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','findParticipants','tags','):\x20Atualizando\x20status\x20da\x20mensagem\x20','rows','https://api.openai.com/v1/audio/speech','organization','/wa-presence','Router','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','sign','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','fetchBusinessProfile','ButtonsMessage','request\x20received\x20in\x20editFlowvariable','Error\x20testing\x20IP\x20with\x20','maxActives','The\x20\x22','base64','getOwnPropertyNames','router','updateGroupParticipantsWebhook','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','Falta\x20informação\x20para\x20a\x20chamada\x20API','lastFetchAwaitingApproval','isAdmin','namespace','randomMac','saveVariable','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','/instance/fetchInstances','_sender','write','true','):\x20Entrou\x20na\x20função\x20scheduleFlow','):\x20Usando\x20extensão\x20padrão:\x20','lowerCase','_p_','processConditionsTest','slice','rm\x20-rf\x20','authState','Cache\x20instance\x20update\x20result:\x20','):Image\x20converted\x20to\x20WebP','process','groupadd','displayName','PENDING','editflowreply','updateAutoCompleteMessages','everyOne','ENABLED','END:VCARD','Subdomínio\x20final:','lastBlockId','/wa-connection-update','scheduleSendText','g-t','connect','StatusJidList\x20is\x20required','.X-ABLabel:Celular\x0a','timeout','/events','phoneNumber','includes','/instance/connect','connectionState','conversation','):\x20Alterando\x20fluxo...','updatePresence','whatsappNumber','request\x20received\x20in\x20updateFlowConfig','110076QSNQjr','\x5cd+','approve','body','\x22reaction\x22\x20must\x20be\x20an\x20emoji','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','push','replyOptions','1062051tabzNw','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','lastMessage_id','creds.json','deleteAll','cleanDisconnectedInstances','del','flows','done','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','data:\x20','configService','routerPath','STATUS_INSTANCE','):\x20Entrou\x20na\x20função\x20processawaitSeconds','cachedContact','ephemeralExpiration','OrAnd','privacySettings','):Type\x20defined\x20as\x20audio','from','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo','\x1b[31m%s\x1b[0m','locked','bodyString','\x20-\x20ON:\x20','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','upperCase','wuid','editflowvaredit','createAndSave','#dfaef0','birthtime','listen','reference','}}\x20->\x20\x22','sendPoll','Module\x20-\x20ON','Error\x20in\x20scheduleNextCheck:\x20','webhook','Not\x20Found','findIndex','\x1b[33m%s\x1b[0m','Not\x20allowed\x20by\x20CORS','sendMessage','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','):Audio\x20processed','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','AutomateSystem\x20não\x20foi\x20inicializado','findOneAndUpdate','emit','#64c4ff','buffer','CORS','desc','):Delete\x20chat','atendimentoAberto','description','.url','1933255uArBxW','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','SSL_CONF','reorderReplyOptions','messageId','isListOfNumbers','deleteInstance','notContains','updateMissingTags','stopMinutesMaxActives','picture','js-yaml','):\x20Query\x20params:','retrySendMessage','auth','function','createConversationforgoToFlow','CREDENTIALS','global','announce','method','enabled','/wa-qrcode','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','status.instance','sharePass','sendMessageWithTyping','\x22\x20-\x20REMOVED','ms\x20(tentativa\x20','addChatLabel','uazapiSendAudio','selectableCount','Erro\x20ao\x20atualizar\x20conversa:\x20','createHash','SERVER_PORT','ChatModel','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','label','instance.','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','unavailable','startsWith','.docx','AUTHENTICATION','delaySecMax','toNumber','Usando\x20IP\x20existente:\x20','setContext','/message','stopWhenYouSendMsg','convertaudioMP3','eventHandler','less','/wa-chats','Erro\x20ao\x20criar\x20fluxo','8pndCIm','readMessages','Button\x20texts\x20cannot\x20be\x20repeated','\x20não\x20encontrado\x20para\x20cópia','random','updateMany','getHours','Rótulo\x20inválido\x20ou\x20sem\x20ID.','.wav','testIPv6','views','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','#92ceac','app-state-sync-key','chats.update','#9568cf','#6f7bcf','useMultiFileAuthState','instance','expiration','USER','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','deleteMany','):\x20Adicionando\x20\x27','Limpando\x20logs\x20do\x20PM2...','isJidUser','):\x20Comando\x20desconhecido:\x20','DaysToDelete','toArray','getAllData','\x22\x20-\x20NOT\x20CONNECTION','removeIPv6ById','):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!','messages.update','stderr','statusMessage','Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups','currency','):Notifying\x20clients\x20for\x20chat:\x20','chatModify','string','pairingCode','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','no-cache','groupUpdateDescription','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','enviado\x20para','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','request\x20received\x20in\x20deleteDoneMessages','STORE_CHATS','class-validator','warn','removed','updateGroupPicture','ERROR','uazapi','sendStatus','participants','chats.upsert','Last\x20message\x20not\x20found','footerText','ipv6Prefix','startCommand','):Image\x20is\x20url','blockId','Deleted\x20','close','json','downloadMediaMessage','groupSettingUpdate','WARN','dataValidate','CONNECTION_UPDATE','):\x20Ignoring\x20group\x20messages.','entries','createflow','SERVER_URL','updatePrivacySettings','):Processing\x20audio','contact_blacklist','Nenhum\x20fluxo\x20correspondente\x20encontrado.','cacheContact','request\x20received\x20in\x20editFlow','InstancesAlterarTodas','delay','oldValue','contactHandle','arrayUnique','updateChatWithMessage','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','Fluxo\x20\x27','inviteCode','express','MESSAGES_UPSERT','getUniqueFlowName','flowStopConversation','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture','Invalid\x20format','):\x20Criando\x20nova\x20conversa[createNewConversation]','--------------------------------------','truncatedtoEnd','CONNECTION','request\x20received\x20in\x20getAutomateSystem','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','variables','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','):\x20Enviando\x20contato','video','updateStopChat','redisEnv','generateWAMessageFromContent','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage','indexOf','messages','):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20','REDIS','join','\x1b[47m','Telefone:\x20','flowConversation','Primeiro\x20Valor:\x20','):\x20Mensagem\x20já\x20enviada\x20para\x20','):\x20conversation.waitingMenu_name','shareOwners','variablesNotFound','groupRequestParticipantsUpdate','):\x20Editando\x20replyOption...','\x20inseridas\x20no\x20banco\x20de\x20dados...','replace','color','TEL','AddUserFlow','automateSystem','removeUnusedChatFields','):\x20[messages.update]\x20group\x20ignored','scheduleSendMedia','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','\x20minutos.\x20Será\x20às\x20','abs','\x27\x20do\x20banco\x20de\x20dados...','exports','formatStatusMessage','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant','):\x20nextBlock.uazapi.name','1040cxdZtn','creds','\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','formatBRNumber','remove','imagechat','created','https://ipv6.jsonip.com','replaceVariablesInReplyOptions','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','findConversation','request\x20received\x20in\x20updateAgent','start','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','Erro\x20ao\x20atualizar\x20cacheInstance:','\x20segundos\x20antes\x20de\x20reconectar...','Instâncias\x20removidas:\x20','\x20adicionado\x20ao\x20chat\x20','}}\x20->\x20valor\x20não\x20encontrado','):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','Network\x20interfaces\x20detected:\x20','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','exit','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.',',\x20canSendMessage:\x20','request\x20received\x20in\x20starFlow','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','application/octet-stream','connecting','):\x20error:\x20','Filtered\x20network\x20interfaces:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','insert','joinApprovalMode','node-mime-types','webhookMap','pollUpdateMessage','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','):\x20Criou\x20conversa\x20no\x20startFlowWebhook','\x0aitem','greater','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','none','processingGroup_id','deleteReplyOption','blockLogs','timeInMinutes','):\x20Fluxo\x20\x27','post','proto','https://ifconfig.me/ip','modifiedCount','Erro\x20ao\x20buscar\x20a\x20conversa','varedits','format','cacheInstanceRepository','waitingMenu_replyOptions','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','getDelay','participant','trimmed','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','menuMessage','request\x20received\x20in\x20deleteFlow','bodyStringErrorParse','status','editFlowVaredit','match_last_seen','env','Valor\x20inicial:\x20\x22','https://v6.ident.me','Database\x20is\x20not\x20enabled','superadmin','Not\x20is\x20business\x20profile','reconnectAttempts','markMessageAsRead','createInstance','jsonwebtoken','StartBot','saveConversationToDatabase','notEqual','flowName','address','updateLastSeenPrivacy','Button\x20IDs\x20cannot\x20be\x20repeated.','qrCode','normalizeMessageContent','closed','Instância\x20não\x20encontrada.','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','sticker','findByIdAndUpdate','fetchConversation','groupdata','):\x20Entrou\x20na\x20função\x20clearVariables','senderKeyDistributionMessage','):Image\x20is\x20base64','.ppt','jpegThumbnail','newStoppedUntil','Erro\x20na\x20função\x20updateChatWithMessage:\x20','ScheduleMessage','URL','connectionClosed','fromMe','isValidIPv6Config','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','toUpperCase','getBase64FromMediaMessage','Falhou\x20ao\x20encontrar\x20chat\x20','importChatsBatch','map','Internal\x20Server\x20Error','):\x20Enviando\x20áudio','chats.set','chatHandle','chatId','HeaderType','):\x20Enviando\x20texto','arraybuffer','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','Erro\x20ao\x20tentar\x20autoCompleteMessages','sendLocation','ids','isLong','DOCKER_ENV','debug','Instance\x20restarted','font','findGroup','Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:','saveMediaToFile','params','and','ScheduleMessageModel','noConnection','connectionStatus','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','groups.upsert','editFlowBlock','formatVCard','AUTHENTICATION_JWT_EXPIRIN_IN','processPollUpdateMessage','insertMany','IP\x20mismatch:\x20configured\x20','Generated\x20IPv6:\x20','readreceipts','Erro\x20ao\x20encerrar\x20a\x20API','WA\x20MODULE','\x20mensagens\x20de\x20','reviver','match','path','collection','condition','addMessagesToGroup','/automate','\x27\x20removido\x20do\x20AutomateSystem.','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$','Close\x20connection','length','https://chat.whatsapp.com/','replaceVariables','Mensagem\x20não\x20suportada','prototype','detail','):Archiving\x20chat','):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar','Content\x20is\x20required','when','updateCustomFields','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc','):Sending\x20audio\x20whatsapp','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','scheduleFlow','vote','-whatsapp-api','statusJidList','contextInfo','saveTextReply','groupMemberAddMode','):\x20Buscando\x20todos\x20os\x20fluxos...','messaging-history.set','textMessage','success','delayChatLabel','):\x20Entrou\x20na\x20função\x20saveReply','):\x20delete\x20=\x20true','documentMessage','request_method','parse','contactsArrayMessage','QRCODE_UPDATED','document','etiquetas','forEach','max','beautifyWithPlaceholders','lastUpdate',',\x20resultado:\x20','type','extractMessageContent','request\x20received\x20in\x20scheduleMessage','notMatchRegex','result','@ffmpeg-installer/ffmpeg','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','splice','copyBlock','editFlowReply','eventemitter2','uazapiDeleteMessage','sendMenu','viewOnceMessageV2','groupParticipantsUpdate','\x1b[34m%s\x1b[0m','headerString','editConversation','\x1b[0m','cwd','child_process','request\x20received\x20in\x20editConversation','padEnd','sleep','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo','fetchProfile','email','-instances','clearVariables','pollOnReplyDelete','\x20não\x20encontrado','joinGroupValidate','\x20and\x20data:','Instance\x20logged\x20out','request\x20received\x20in\x20updateCustomFields','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.','local_map','set','groups','unhandledRejection','parseInt','contacts',',\x20fará\x20nova\x20verificação\x20em\x20','src','pt-BR','instanceKeys','The\x20property\x20cannot\x20be\x20empty','pollCreationMessageV3','pictureUrl','\x20contacts','request\x20received\x20in\x20getConversation','_error','.fileUrl','getLastMessage','delayMessage','):\x20customFieldVariables','fetchLabels','localWebhook','\x20instance\x20does\x20not\x20exist','ERROR:\x20','audioMessage','secondValue','boolean','50mb','instanceInfo','REDIS_ENABLED','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','reorderMessages','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','IPv6\x20address\x20configured:\x20','setting','#56ccb4','filter','toFile','find','deleteMessage','):\x20\x27Enviando\x20mídia\x20para\x20\x27','hex','Subdomínio\x20extraído\x20do\x20caminho\x20SSL:','allFlows','replaceOne','DATABASE_CONNECTION_USER','):\x20Ler\x20mensagem','imported','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','fetchInstances','notEmpty','Fluxos\x20não\x20estão\x20ativados','findAndReplace','Bloco\x20com\x20ID\x20','findAll','writeData','request\x20received\x20in\x20deleteConversation','PORT','createClient','\x1b[33m','cacheContactModel','announcement','options','fetchProfilePicture','importChats','isCommunity','Type\x20is\x20required','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','):\x20Editando\x20variável\x20do\x20fluxo...','redirect','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp','fetchProfilePictureUrl','):Audio\x20converted\x20and\x20stored\x20in\x20cache','editOperator','audioWhatsapp','groupMetadata','addReplyOption','getTime','nomecompleto','initAuthCreds','):\x20leadInfoVariables','.webp','removeProfilePicture','getContentType','^\x5cd+','Group\x20not\x20found','instanceName','GROUPS_UPDATE','CONTACTS_SET','\x20removido\x20do\x20chat\x20','beforeExit','makeCacheableSignalKeyStore','https://jsonip.com','\x1b[1m\x1b[37m','Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...','Fluxo\x20não\x20encontrado\x20na\x20memória.','setWebhook','inviteCodeDetails','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','DATABASE_CONNECTION_HOST','toLowerCase','env.KEY\x20!==\x20key','storePath','remoteJids','error\x20get\x20vote','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','trim','):\x20Deletando\x20mensagem','groupLeave','pushName','cachedContacts-whatsapp','apikey','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','sort','*Pergunta*:\x20\x0a','/events/:instance','stringify','buttons','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','prepareWAMessageMedia','updateProfilePicturePrivacy','reaction','state','#9ba6ff','ON\x20-\x20dbName:\x20','stopped','#00a1f2','stickerMessage','Sistema\x20atualizado\x20com\x20sucesso!','connectionUpdate','\x20:\x20','Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20','group','every','updateProfileStatus','AUTHENTICATION_JWT_SECRET','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','SEND_MESSAGE','dbServer','promote','convertaudio','ephemeralDuration','$pull','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting','scheduleSendAudio','removeData','E-mail:\x20','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','processUazapi','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','pino','keys','startFlow','fora\x20do\x20git','delaySecMin','ip\x20-br\x20link\x20show','floor','AutomateFunctions','SINGLE_SELECT','AutomateSystem','getVariablesChat','):\x20Criando\x20fluxo\x20compartilhado...','):Image\x20path:\x20','LEVEL','CLEANING_INTERVAL','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','desativadoFluxoAte','error_log','createConversationforStartFlow','Error\x20updating\x20cache\x20contact:','segundos','fetchPrivacySettings','.TEL;waid=','sections','findLabels','@whatsapp.net','matchRegex','nome','longitude','restartInstance','findAndReplaceRegex','TEXT','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','generate','writeFileSync','STORE','unreadCount','):\x20sender\x20=\x20number:\x20','request\x20received\x20in\x20fetchConversation','findGroupInfos','Erro\x20ao\x20editar\x20a\x20conversa','substring','No\x20suitable\x20network\x20interface\x20found','https://uazapi-plugin.bubbleapps.io/?url=','whoCanUse','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','waitingForReplyMenu','isJidGroup','Erro\x20ao\x20deletar\x20chat:','order','mongodb://','leadInfo.atendimentoAberto','release','scheduleNextCheck','replaceVariablesInObject','profilePicture','documentWithCaptionMessage','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','getFlow','PASSWORD','lastReceivedMessage','verifiedName','$addToSet','cache','round','groupInviteCode','Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','application/json','Database\x20update\x20result:','readMessageBot','):\x20Enviando\x20mídia','#9ab6c1','sendDataWebhook','replaceValue','):\x20Query\x20params:\x20','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','updateProfileName','getPrototypeOf','uazapiSendContact','toggleEphemeral','labelId','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','replacer','put','findGroupInfo','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20não\x20estão\x20ativados.','Parando\x20aplicação...','changeVariables','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','fileUrl','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','groupSetting','\x1b[42m','updateProfilePicture','saveChatVariables','TYPE','code','last','FlowRouter','sendButtons','@g.us','processblock','locationMessage','archive','presence.update','connectedClient','):Temp\x20image\x20deleted','cacheInstanceModel','GET','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','):Fetching\x20business\x20profile','folder','editChat','jwt','8080','$dbName','licenca','CORS_CREDENTIALS','scheduled','https','ListMessage','editflowblock','transformScheduledMessagesByType','split','CHATS_DELETE','chats'];a0_0x102b=function(){return _0x22e3e5;};return a0_0x102b();}var jt={},Ne=class u{constructor(_0x2429f1,_0x4a2685,_0x1d5f19){const _0x3e497c=a0_0x490cab;this[_0x3e497c(0x3ec)]=_0x2429f1,this['eventEmitter']=_0x4a2685,this['repository']=_0x1d5f19,this[_0x3e497c(0x672)]=null,this[_0x3e497c(0x21e)]=new $(u['name']),this[_0x3e497c(0x466)]={},this[_0x3e497c(0x5e8)]={},this[_0x3e497c(0x744)]={'state':_0x3e497c(0x496)},this[_0x3e497c(0x639)]=(0x0,U[_0x3e497c(0x4c8)])(ce,_0x3e497c(0x814)),this[_0x3e497c(0x12f)]=new Ls[(_0x3e497c(0x73a))](),this[_0x3e497c(0x18b)]=new Ls['default'](),this['endSession']=!0x1,this[_0x3e497c(0x508)]={'status.instance':_0x3e497c(0x3c7),'connection.update':_0x3e497c(0x3c7),'qrcode.updated':_0x3e497c(0x432),'messages.upsert':_0x3e497c(0x200),'send.message':'/wa-message','messages.update':'/wa-message-update','group.upsert':_0x3e497c(0x20d),'group.update':_0x3e497c(0x20d),'group-participants.update':_0x3e497c(0x20d),'messages.set':_0x3e497c(0x188),'contacts.set':_0x3e497c(0x772),'contacts.upsert':_0x3e497c(0x772),'contacts.update':'/wa-contacts','presence.update':_0x3e497c(0x395),'chats.set':'/wa-chats','chats.update':_0x3e497c(0x452),'chats.upsert':_0x3e497c(0x452),'chats.delete':_0x3e497c(0x452)},this['reconnectAttempts']=0x0,this['reconnectTimestamps']=[],this['RECONNECT_TIME_FRAME']=0xea60,this[_0x3e497c(0x7ff)]=!0x1,this['chatHandle']={'chats.upsert':async(_0x4337da,_0xa9083e)=>{const _0x3068ae=_0x3e497c;let _0x875ebe=[];for await(let _0x4aa676 of _0x4337da)_0x875ebe['push']({'_id':_0x4aa676['id'],'owner':this[_0x3068ae(0x466)][_0x3068ae(0x3fd)],'group':_0x4aa676['id'][_0x3068ae(0x381)]('@g.us'),'name':_0x4aa676[_0x3068ae(0x149)]||_0x4aa676[_0x3068ae(0x3be)]||null,'contactname':null,'lastmsg':_0x4aa676[_0x3068ae(0x124)]&&_0x4aa676[_0x3068ae(0x124)][_0x3068ae(0x751)]()[_0x3068ae(0x587)]<0xd?_0x4aa676[_0x3068ae(0x124)]*0x3e8:_0x4aa676[_0x3068ae(0x124)]||null,'archived':_0x4aa676[_0x3068ae(0x2de)]||!0x1,'unreadcount':_0x4aa676[_0x3068ae(0x68d)]||0x0,'ephemeralExpiration':_0x4aa676[_0x3068ae(0x3f1)]||0x0});this[_0x3068ae(0x6b3)](_0x3068ae(0x48e),_0x875ebe);},'chats.update':async(_0x19cc8c,_0x553d94)=>{const _0x2ab4f7=_0x3e497c;for(let _0x85ef52 of _0x19cc8c){let _0x160b1c={'_id':_0x85ef52['id'],'owner':this[_0x2ab4f7(0x466)][_0x2ab4f7(0x3fd)],'archived':_0x85ef52['archived'],'muteEndTime':_0x85ef52[_0x2ab4f7(0x7b9)],'ephemeralExpiration':_0x85ef52[_0x2ab4f7(0x3f1)]},_0x544f34=!0x1,_0x77382a={};_0x160b1c[_0x2ab4f7(0x2de)]!=null&&(this[_0x2ab4f7(0x21e)][_0x2ab4f7(0x331)](this[_0x2ab4f7(0x629)]+'\x20('+this['instance']['wuid']+_0x2ab4f7(0x21b)+_0x85ef52['id']+_0x2ab4f7(0x655)+_0x85ef52[_0x2ab4f7(0x2de)]),_0x544f34=!0x0,_0x77382a['archived']=_0x85ef52[_0x2ab4f7(0x2de)]),_0x2ab4f7(0x7b9)in _0x85ef52&&(this['logger']['verbose'](this[_0x2ab4f7(0x629)]+'\x20('+this[_0x2ab4f7(0x466)][_0x2ab4f7(0x3fd)]+_0x2ab4f7(0x310)+_0x85ef52['id']+_0x2ab4f7(0x655)+(_0x85ef52[_0x2ab4f7(0x7b9)]??'0')),_0x544f34=!0x0,_0x77382a[_0x2ab4f7(0x7b9)]=_0x85ef52[_0x2ab4f7(0x7b9)]??0x0),'ephemeralExpiration'in _0x85ef52&&(this[_0x2ab4f7(0x21e)][_0x2ab4f7(0x331)](this[_0x2ab4f7(0x629)]+'\x20('+this[_0x2ab4f7(0x466)][_0x2ab4f7(0x3fd)]+_0x2ab4f7(0x756)+_0x85ef52['id']+_0x2ab4f7(0x655)+(_0x85ef52[_0x2ab4f7(0x3f1)]!==void 0x0?_0x85ef52[_0x2ab4f7(0x3f1)]:_0x2ab4f7(0x7b1))),_0x77382a[_0x2ab4f7(0x3f1)]=_0x85ef52[_0x2ab4f7(0x3f1)]===null?0x0:_0x85ef52['ephemeralExpiration'],_0x544f34=!0x0);let _0x4f708f;_0x544f34&&(_0x4f708f=await this[_0x2ab4f7(0x261)][_0x2ab4f7(0x745)][_0x2ab4f7(0x341)]({'where':{'_id':_0x85ef52['id']}},_0x77382a,this['instance']['wuid'])),_0x4f708f&&j(this['instanceName'],'chats',{'chat':_0x4f708f});}},'chats.delete':async _0x5cd1d3=>{const _0x57898b=_0x3e497c;for(let _0x49a094 of _0x5cd1d3)if(_0x49a094['endsWith'](_0x57898b(0x6cf))){await this[_0x57898b(0x261)][_0x57898b(0x745)][_0x57898b(0x75b)]({'where':{'_id':_0x49a094}},this['instance']['wuid']);let _0x153892={'where':{'key':{'remoteJid':_0x49a094}}};await this[_0x57898b(0x261)][_0x57898b(0x202)]['delete'](_0x153892,this[_0x57898b(0x466)][_0x57898b(0x3fd)]);}else{await this['repository'][_0x57898b(0x745)][_0x57898b(0x341)]({'where':{'_id':_0x49a094}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x57898b(0x466)][_0x57898b(0x3fd)]);let _0x3be754={'where':{'key':{'remoteJid':_0x49a094}}};await this[_0x57898b(0x261)]['message'][_0x57898b(0x75b)](_0x3be754,this[_0x57898b(0x466)][_0x57898b(0x3fd)]);}this[_0x57898b(0x6b3)](_0x57898b(0x376),[..._0x5cd1d3]);}},this[_0x3e497c(0x4aa)]={'contacts.upsert':async(_0x312fe6,_0x134136)=>{const _0x262a9a=_0x3e497c;let _0x206ff9=await this['repository'][_0x262a9a(0x354)][_0x262a9a(0x5f9)]({'where':{}},this[_0x262a9a(0x466)][_0x262a9a(0x3fd)]),_0x3aa2c3=[];for await(let _0x12c9f5 of _0x312fe6)_0x206ff9['find'](_0x596f49=>_0x596f49[_0x262a9a(0x215)]===_0x12c9f5['id'])||_0x3aa2c3['push']({'_id':_0x12c9f5['id'],'pushName':_0x12c9f5?.[_0x262a9a(0x149)]||_0x12c9f5?.['verifiedName'],'owner':this['instance']['wuid']});this[_0x262a9a(0x6b3)](_0x262a9a(0x1ad),_0x3aa2c3),await this['repository'][_0x262a9a(0x354)]['insert'](_0x3aa2c3);},'contacts.update':async(_0x20b9ea,_0x1cc860)=>{const _0xc2d765=_0x3e497c;let _0xbf0c54=[];for await(let _0x2f5481 of _0x20b9ea)_0xbf0c54[_0xc2d765(0x3de)]({'_id':_0x2f5481['id'],'pushName':_0x2f5481?.[_0xc2d765(0x149)]??_0x2f5481?.['verifiedName'],'owner':this[_0xc2d765(0x466)][_0xc2d765(0x3fd)]});this[_0xc2d765(0x6b3)](_0xc2d765(0x2c1),_0xbf0c54);}},this['messageHandle']={'messaging-history.set':async({messages:_0x56ac0f,chats:_0x27308e,isLatest:_0x53d54e},_0x3d2ee3)=>{const _0x4cf7a0=_0x3e497c;if(_0x53d54e){let _0x50f1a2=await Promise[_0x4cf7a0(0x6fc)](_0x27308e[_0x4cf7a0(0x555)](async _0x2060c3=>({'_id':_0x2060c3['id'],'owner':this['instance'][_0x4cf7a0(0x3fd)],'group':_0x2060c3['id'][_0x4cf7a0(0x381)](_0x4cf7a0(0x6cf)),'name':_0x2060c3[_0x4cf7a0(0x149)]||_0x2060c3['displayName']||_0x2060c3['username']||null,'contactname':null,'lastmsg':_0x2060c3[_0x4cf7a0(0x124)]&&_0x2060c3[_0x4cf7a0(0x124)][_0x4cf7a0(0x751)]()[_0x4cf7a0(0x587)]<0xd?_0x2060c3[_0x4cf7a0(0x124)]*0x3e8:_0x2060c3[_0x4cf7a0(0x124)]||null,'archived':_0x2060c3['archived']||!0x1,'unreadcount':_0x2060c3[_0x4cf7a0(0x68d)]||0x0,'ephemeralExpiration':_0x2060c3[_0x4cf7a0(0x3f1)]||0x0,'muteEndTime':_0x2060c3[_0x4cf7a0(0x7b9)]||0x0})));this[_0x4cf7a0(0x6b3)](_0x4cf7a0(0x558),_0x50f1a2),await this[_0x4cf7a0(0x21a)](_0x50f1a2,_0x3d2ee3);}let _0x5c0218=[],_0x1af210=Date[_0x4cf7a0(0x7f9)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x3ceba4]of Object['entries'](_0x56ac0f)){if(_0x3ceba4[_0x4cf7a0(0x202)]?.[_0x4cf7a0(0x7e1)]||_0x3ceba4['message']?.[_0x4cf7a0(0x545)]||!_0x3ceba4[_0x4cf7a0(0x202)]||_0x3ceba4['key']['remoteJid']===_0x4cf7a0(0x7cd)||(ks[_0x4cf7a0(0x73a)]['isLong'](_0x3ceba4?.[_0x4cf7a0(0x80d)])&&(_0x3ceba4[_0x4cf7a0(0x80d)]=_0x3ceba4[_0x4cf7a0(0x80d)]?.[_0x4cf7a0(0x44a)]()),_0x3ceba4[_0x4cf7a0(0x80d)]&&_0x3ceba4[_0x4cf7a0(0x80d)]['toString']()[_0x4cf7a0(0x587)]<0xd&&(_0x3ceba4['messageTimestamp']=_0x3ceba4[_0x4cf7a0(0x80d)]*0x3e8),_0x3ceba4['messageTimestamp']<_0x1af210))continue;let _0x519b4c=(0x0,w[_0x4cf7a0(0x53b)])(_0x3ceba4['message']),_0x4a6739=(0x0,w[_0x4cf7a0(0x626)])(_0x519b4c),{message_normalized:_0x476357}=this[_0x4cf7a0(0x1d2)](_0x519b4c,_0x4a6739,null);Object[_0x4cf7a0(0x66a)](_0x476357)[_0x4cf7a0(0x587)]>0x0&&_0x5c0218[_0x4cf7a0(0x3de)]({'_id':_0x3ceba4[_0x4cf7a0(0x1c2)]['id'],'key':_0x3ceba4[_0x4cf7a0(0x1c2)],'pushName':_0x3ceba4[_0x4cf7a0(0x640)],'participant':_0x3ceba4[_0x4cf7a0(0x520)],'message':_0x519b4c,'messageType':_0x4a6739,'message_normalized':{'key':_0x3ceba4['key'],'pushName':_0x3ceba4[_0x4cf7a0(0x640)],'messageTimestamp':_0x3ceba4[_0x4cf7a0(0x80d)],..._0x476357},'messageTimestamp':_0x3ceba4[_0x4cf7a0(0x80d)],'owner':this['instance'][_0x4cf7a0(0x3fd)]});}_0x3d2ee3[_0x4cf7a0(0x3c3)]&&_0x5c0218['length']>0x0&&(this[_0x4cf7a0(0x21e)][_0x4cf7a0(0x331)](this[_0x4cf7a0(0x629)]+'\x20('+this[_0x4cf7a0(0x466)]['wuid']+_0x4cf7a0(0x32f)+_0x5c0218[_0x4cf7a0(0x587)]+_0x4cf7a0(0x57b)+this[_0x4cf7a0(0x466)][_0x4cf7a0(0x3fd)]+_0x4cf7a0(0x4d3)),await this[_0x4cf7a0(0x261)][_0x4cf7a0(0x202)][_0x4cf7a0(0x505)]([..._0x5c0218],this[_0x4cf7a0(0x466)][_0x4cf7a0(0x3fd)])),this[_0x4cf7a0(0x6b3)](_0x4cf7a0(0x73f),[..._0x5c0218]),_0x56ac0f=void 0x0;},'messages.upsert':async({messages:_0x3b158a,type:_0xd38355},_0x149a06)=>{const _0x1bb937=_0x3e497c;for(let _0x116f2d of _0x3b158a){if(this[_0x1bb937(0x5e8)]?.[_0x1bb937(0x2d2)]&&_0x116f2d[_0x1bb937(0x1c2)][_0x1bb937(0x133)][_0x1bb937(0x3d0)]('@g.us')){this['logger']['verbose'](this[_0x1bb937(0x629)]+'\x20('+this[_0x1bb937(0x466)][_0x1bb937(0x3fd)]+'):\x20[messages.upsert]\x20group\x20ignored');return;}if(_0x116f2d['messageStubParameters']&&_0x116f2d[_0x1bb937(0x1aa)][0x0]==='Message\x20absent\x20from\x20node'){console[_0x1bb937(0x7a9)]('[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação'),jt[_0x116f2d[_0x1bb937(0x1c2)]['id']]=_0x116f2d,this['retrySendMessage'](_0x116f2d,0x0);return;}if(jt[_0x116f2d[_0x1bb937(0x1c2)]['id']]&&(console[_0x1bb937(0x7a9)](_0x1bb937(0x704)),delete jt[_0x116f2d[_0x1bb937(0x1c2)]['id']]),_0xd38355!=='notify'||!_0x116f2d?.[_0x1bb937(0x202)]||_0x116f2d['message']?.['protocolMessage']||_0x116f2d[_0x1bb937(0x202)]['senderKeyDistributionMessage']||_0x116f2d[_0x1bb937(0x1c2)][_0x1bb937(0x133)]==='status@broadcast')return;let _0x3ab91f=null,_0x40b70c=null;try{_0x3ab91f=await this[_0x1bb937(0x574)](_0x116f2d),_0x40b70c=_0x3ab91f?_0x3ab91f['join'](','):null;}catch(_0x2adc83){this[_0x1bb937(0x21e)][_0x1bb937(0x331)](this[_0x1bb937(0x629)]+'\x20('+this['instance']['wuid']+_0x1bb937(0x32f)+(_0x2adc83 instanceof Error?_0x2adc83[_0x1bb937(0x202)]:JSON[_0x1bb937(0x647)](_0x2adc83,null,0x2))),_0x40b70c=_0x1bb937(0x63b);}this[_0x1bb937(0x386)]['sendPresenceUpdate'](_0x1bb937(0x445)),ks[_0x1bb937(0x73a)][_0x1bb937(0x562)](_0x116f2d[_0x1bb937(0x80d)])&&(_0x116f2d[_0x1bb937(0x80d)]=_0x116f2d[_0x1bb937(0x80d)]?.['toNumber']()),_0x116f2d[_0x1bb937(0x80d)]&&_0x116f2d['messageTimestamp'][_0x1bb937(0x751)]()['length']<0xd&&(_0x116f2d[_0x1bb937(0x80d)]=_0x116f2d['messageTimestamp']*0x3e8);let _0x3d5245=_0x116f2d[_0x1bb937(0x202)],_0x76fcc0=(0x0,w['normalizeMessageContent'])(_0x3d5245),_0x57401a=(0x0,w[_0x1bb937(0x626)])(_0x76fcc0),{messageContent:_0x9b622,message_normalized:_0x60e688}=this[_0x1bb937(0x1d2)](_0x76fcc0,_0x57401a,_0x40b70c);_0x57401a===_0x1bb937(0x7e1)&&_0x9b622?.[_0x1bb937(0x183)]&&(_0x57401a='editedMessage');let _0x43c2a2,_0x483239=_0x116f2d[_0x1bb937(0x1c2)][_0x1bb937(0x133)][_0x1bb937(0x381)](_0x1bb937(0x6cf));if(_0x116f2d[_0x1bb937(0x1c2)][_0x1bb937(0x54e)])_0x43c2a2=this[_0x1bb937(0x466)][_0x1bb937(0x21c)];else{let _0x238cdb=_0x483239?_0x116f2d[_0x1bb937(0x1c2)][_0x1bb937(0x520)]:_0x116f2d[_0x1bb937(0x1c2)][_0x1bb937(0x133)];_0x43c2a2=(await this['findAndUpdateCacheContact'](_0x238cdb,_0x116f2d[_0x1bb937(0x640)],!0x1))[_0x1bb937(0x3f0)][_0x1bb937(0x5df)];}let _0x3d7c01={'_id':_0x116f2d[_0x1bb937(0x1c2)]['id'],'key':_0x116f2d[_0x1bb937(0x1c2)],'isGroup':_0x483239,'profilePictureUrl':_0x43c2a2,'pushName':_0x116f2d[_0x1bb937(0x640)],'message':_0x76fcc0,'messageType':_0x57401a,'message_normalized':{'key':_0x116f2d[_0x1bb937(0x1c2)],'pushName':_0x116f2d[_0x1bb937(0x640)],'messageTimestamp':_0x116f2d[_0x1bb937(0x80d)],'source':(0x0,w[_0x1bb937(0x7d9)])(_0x116f2d['key']['id']),..._0x60e688},'messageTimestamp':_0x116f2d['messageTimestamp'],'owner':this[_0x1bb937(0x466)][_0x1bb937(0x3fd)],'source':(0x0,w[_0x1bb937(0x7d9)])(_0x116f2d['key']['id']),'expiration':_0x9b622?.['contextInfo']?.[_0x1bb937(0x467)]||0x0};_0x9b622||(this[_0x1bb937(0x21e)][_0x1bb937(0x7a9)](_0x1bb937(0x58a)),this['logger'][_0x1bb937(0x7a9)](_0x3d7c01)),this[_0x1bb937(0x21e)][_0x1bb937(0x1bd)](this[_0x1bb937(0x629)]+'\x20('+this[_0x1bb937(0x466)][_0x1bb937(0x3fd)]+_0x1bb937(0x32f)+(_0x3d7c01[_0x1bb937(0x1c2)]?.['fromMe']?_0x1bb937(0x482):_0x1bb937(0x366))+'\x20['+_0x3d7c01[_0x1bb937(0x1c2)]?.[_0x1bb937(0x133)][_0x1bb937(0x4d4)](_0x1bb937(0x119),'')+']\x20('+_0x3d7c01[_0x1bb937(0x77d)]+')'),_0x3d7c01[_0x1bb937(0x821)]?.[_0x1bb937(0x120)]&&this[_0x1bb937(0x21e)][_0x1bb937(0x1bd)](_0x116f2d[_0x1bb937(0x1c2)]['id']+':\x20'+_0x3d7c01['message_normalized']?.[_0x1bb937(0x120)]),await this[_0x1bb937(0x261)][_0x1bb937(0x202)][_0x1bb937(0x505)]([_0x3d7c01],this[_0x1bb937(0x466)][_0x1bb937(0x3fd)]),this[_0x1bb937(0x6b3)](_0x1bb937(0x155),_0x3d7c01),j(this['instanceName'],_0x1bb937(0x4c5),{'message':_0x3d7c01}),_0x116f2d[_0x1bb937(0x1c2)][_0x1bb937(0x133)]!==_0x1bb937(0x7cd)&&await this[_0x1bb937(0x4ac)](_0x149a06,_0x3d7c01,'MESSAGES_UPSERT');}},'messages.update':async(_0x3e3c69,_0x39902f)=>{const _0x15b9b4=_0x3e497c;let _0x32d000={0x0:_0x15b9b4(0x48a),0x1:_0x15b9b4(0x3bf),0x2:'SERVER_ACK',0x3:'DELIVERY_ACK',0x4:_0x15b9b4(0x282),0x5:_0x15b9b4(0x2c0)};for await(let {key:_0x58109e,update:_0x8f605e}of _0x3e3c69){if(this[_0x15b9b4(0x5e8)]?.[_0x15b9b4(0x2d2)]&&_0x58109e['remoteJid'][_0x15b9b4(0x3d0)](_0x15b9b4(0x6cf))){this[_0x15b9b4(0x21e)][_0x15b9b4(0x331)](this[_0x15b9b4(0x629)]+'\x20('+this['instance'][_0x15b9b4(0x3fd)]+_0x15b9b4(0x4da));return;}if(_0x58109e[_0x15b9b4(0x133)]!==_0x15b9b4(0x7cd)){let _0x2ed784=Date[_0x15b9b4(0x7f9)](),_0x4877e8;_0x8f605e['message']===null&&_0x8f605e['status']===void 0x0?_0x4877e8='DELETED':_0x4877e8=_0x32d000[_0x8f605e['status']];let _0x3cec3f=_0x58109e[_0x15b9b4(0x133)]['replace'](/:\d{1,2}@/g,'@'),_0x19148c={..._0x58109e,'remoteJid':_0x3cec3f,'status':_0x4877e8,'datetime':_0x2ed784,'owner':this[_0x15b9b4(0x466)][_0x15b9b4(0x3fd)]};this['sendDataWebhook'](_0x15b9b4(0x475),_0x19148c),await this[_0x15b9b4(0x181)](_0x58109e,_0x19148c);}}},'labels.association':async({type:_0xe4498c,association:_0x5e1420})=>{const _0x60d3b9=_0x3e497c;if(_0x5e1420[_0x60d3b9(0x5af)]===_0x60d3b9(0x7c1)){let _0x32fecf,_0x54e6a8=0x0;for(;!_0x32fecf&&_0x54e6a8<this['delayChatLabel_MAX_RETRIES'];)_0x32fecf=await this['repository'][_0x60d3b9(0x745)][_0x60d3b9(0x2cd)]({'where':{'_id':_0x5e1420[_0x60d3b9(0x55a)]}},this[_0x60d3b9(0x466)][_0x60d3b9(0x3fd)]),_0x32fecf||(_0x54e6a8++,this[_0x60d3b9(0x21e)][_0x60d3b9(0x79f)](this[_0x60d3b9(0x629)]+'\x20('+this[_0x60d3b9(0x466)][_0x60d3b9(0x3fd)]+_0x60d3b9(0x270)+_0x5e1420[_0x60d3b9(0x55a)]+_0x60d3b9(0x4e7)+this[_0x60d3b9(0x7ad)]+_0x60d3b9(0x438)+_0x54e6a8+'/'+this[_0x60d3b9(0x841)]+')'),await this[_0x60d3b9(0x5a0)](this[_0x60d3b9(0x7ad)]));if(!_0x32fecf){this['logger'][_0x60d3b9(0x7a9)](_0x60d3b9(0x553)+_0x5e1420[_0x60d3b9(0x55a)]+_0x60d3b9(0x38c)+this[_0x60d3b9(0x841)]+'\x20tentativas.');return;}switch(_0xe4498c){case'add':console[_0x60d3b9(0x1bd)](_0x5e1420),await this[_0x60d3b9(0x261)][_0x60d3b9(0x745)][_0x60d3b9(0x341)]({'where':{'_id':_0x5e1420[_0x60d3b9(0x55a)]}},{'leadInfo.etiquetas':_0x5e1420[_0x60d3b9(0x6bb)]},this[_0x60d3b9(0x466)][_0x60d3b9(0x3fd)],void 0x0,_0x60d3b9(0x6a7));break;case'remove':console[_0x60d3b9(0x1bd)](_0x5e1420),await this[_0x60d3b9(0x261)][_0x60d3b9(0x745)][_0x60d3b9(0x341)]({'where':{'_id':_0x5e1420[_0x60d3b9(0x55a)]}},{'leadInfo.etiquetas':_0x5e1420[_0x60d3b9(0x6bb)]},this['instance'][_0x60d3b9(0x3fd)],void 0x0,_0x60d3b9(0x661));break;default:this[_0x60d3b9(0x21e)][_0x60d3b9(0x7a9)](_0x60d3b9(0x719)+_0xe4498c+']');}}},'labels.edit':async _0x3bd410=>{const _0x1781f8=_0x3e497c;if(!_0x3bd410||!_0x3bd410['id']){this[_0x1781f8(0x21e)][_0x1781f8(0x7a9)](_0x1781f8(0x45b));return;}if(!_0x3bd410[_0x1781f8(0x379)]){let _0x25cf5d=['#ff9484',_0x1781f8(0x414),'#fed428',_0x1781f8(0x400),_0x1781f8(0x6b2),_0x1781f8(0x5f6),_0x1781f8(0x16a),'#d3a91f',_0x1781f8(0x464),'#d8e651',_0x1781f8(0x831),_0x1781f8(0x19b),_0x1781f8(0x460),'#f64847',_0x1781f8(0x651),_0x1781f8(0x2d9),_0x1781f8(0x33c),_0x1781f8(0x305),_0x1781f8(0x64e),_0x1781f8(0x463)],_0x1b795c;typeof _0x3bd410[_0x1781f8(0x4d5)]==_0x1781f8(0x7c9)&&_0x3bd410['color']>=0x0&&_0x3bd410[_0x1781f8(0x4d5)]<_0x25cf5d['length']?_0x1b795c=_0x25cf5d[_0x3bd410[_0x1781f8(0x4d5)]]:(this[_0x1781f8(0x21e)][_0x1781f8(0x7a9)](_0x1781f8(0x656)+_0x3bd410[_0x1781f8(0x4d5)]),_0x1b795c=_0x1781f8(0x116));let _0x26d893={'_id':_0x3bd410['id'],'colorHex':_0x1b795c,'color':_0x3bd410?.['color'],'name':_0x3bd410?.[_0x1781f8(0x149)],'owner':this[_0x1781f8(0x466)][_0x1781f8(0x3fd)]};await this[_0x1781f8(0x261)]['label'][_0x1781f8(0x341)]({'where':{'_id':_0x3bd410['id']}},_0x26d893,this[_0x1781f8(0x466)][_0x1781f8(0x3fd)]),this[_0x1781f8(0x21e)][_0x1781f8(0x79f)](this['instanceName']+'\x20('+this[_0x1781f8(0x466)][_0x1781f8(0x3fd)]+'):\x20Rótulo\x20atualizado:\x20'+_0x3bd410);}_0x3bd410['deleted']&&(await this[_0x1781f8(0x261)][_0x1781f8(0x441)][_0x1781f8(0x75b)]({'where':{'_id':_0x3bd410['id']}},this[_0x1781f8(0x466)][_0x1781f8(0x3fd)]),this[_0x1781f8(0x21e)]['info'](_0x1781f8(0x2ed)+_0x3bd410['id']));}},this[_0x3e497c(0x29b)]={'groups.upsert':async _0x29a908=>{const _0x3b5e2a=_0x3e497c;this[_0x3b5e2a(0x5e8)]?.['groups_ignore']||this[_0x3b5e2a(0x6b3)](_0x3b5e2a(0x570),_0x29a908);for(let _0xd1d4da of _0x29a908)await this[_0x3b5e2a(0x25d)](_0xd1d4da);},'groups.update':async _0x5e735e=>{const _0x33ea4d=_0x3e497c;this['localWebhook']?.[_0x33ea4d(0x2d2)]||this[_0x33ea4d(0x6b3)](_0x33ea4d(0x735),_0x5e735e);for(let _0x1824c7 of _0x5e735e)await this[_0x33ea4d(0x25d)](_0x1824c7);},'group-participants.update':async _0x3c8cc3=>{const _0x286d7c=_0x3e497c;this['localWebhook']?.[_0x286d7c(0x2d2)]||this[_0x286d7c(0x6b3)](_0x286d7c(0x34c),_0x3c8cc3),await this['updateGroupParticipantsWebhook'](_0x3c8cc3);}},this[_0x3e497c(0x841)]=0x5,this['delayChatLabel_RETRY_DELAY_MS']=0x1388,this['processPollUpdateMessage']=async _0x2338b5=>{const _0x209178=_0x3e497c;if(_0x2338b5['message']?.[_0x209178(0x509)]){let _0x35c4cb=await this[_0x209178(0x75c)](_0x2338b5[_0x209178(0x202)]['pollUpdateMessage'][_0x209178(0x289)],!0x0);if(_0x35c4cb){let _0x41f0a5=_0x35c4cb['key'][_0x209178(0x54e)]?this[_0x209178(0x466)][_0x209178(0x3fd)]+_0x209178(0x119):_0x35c4cb[_0x209178(0x1c2)][_0x209178(0x520)]||_0x35c4cb[_0x209178(0x1c2)][_0x209178(0x133)],_0x1bfdfa=_0x35c4cb[_0x209178(0x1c2)]['id'],_0x21954b=_0x35c4cb[_0x209178(0x202)],_0x505673=Buffer[_0x209178(0x3f5)](_0x21954b['messageContextInfo']['messageSecret'][_0x209178(0x751)](_0x209178(0x5fc)),_0x209178(0x5fc)),_0x317f0f=(0x0,w['decryptPollVote'])(_0x2338b5[_0x209178(0x202)]['pollUpdateMessage'][_0x209178(0x596)],{'pollCreatorJid':_0x41f0a5,'pollMsgId':_0x1bfdfa,'pollEncKey':_0x505673,'voterJid':_0x2338b5['key'][_0x209178(0x54e)]?this[_0x209178(0x466)]['wuid']+'@s.whatsapp.net':_0x2338b5[_0x209178(0x1c2)][_0x209178(0x133)][_0x209178(0x381)](_0x209178(0x2d8))?_0x2338b5[_0x209178(0x1c2)][_0x209178(0x520)]:_0x2338b5[_0x209178(0x1c2)][_0x209178(0x133)]}),_0x9cd6fa=[],_0x8658cc=_0x317f0f[_0x209178(0x2c9)][_0x209178(0x555)](_0x3e300e=>Buffer[_0x209178(0x3f5)](_0x3e300e)[_0x209178(0x751)](_0x209178(0x5fc)));for(let {optionName:_0x2c4458}of _0x21954b[_0x209178(0x28e)]?.[_0x209178(0x611)]||_0x21954b[_0x209178(0x5de)]?.[_0x209178(0x611)]||_0x21954b[_0x209178(0x1e5)]?.[_0x209178(0x611)])_0x8658cc[_0x209178(0x4c4)]((0x0,w['sha256'])(Buffer[_0x209178(0x3f5)](_0x2c4458))[_0x209178(0x751)](_0x209178(0x5fc)))>-0x1&&_0x9cd6fa[_0x209178(0x3de)](_0x2c4458);return _0x9cd6fa;}}return null;},this[_0x3e497c(0x1d2)]=(_0xa69f92,_0x5c448f,_0x22cbeb)=>{const _0x2a31c7=_0x3e497c;try{let _0x4885cf=_0xa69f92?(0x0,w[_0x2a31c7(0x5b0)])(_0xa69f92)[_0x5c448f]:void 0x0,_0x23d6cd={},_0x3204b1=null,_0x5a8413=null,_0xc292a4=null;_0x5c448f===_0x2a31c7(0x7e1)&&_0x4885cf?.[_0x2a31c7(0x183)]&&(_0x5c448f=(0x0,w[_0x2a31c7(0x626)])(_0x4885cf['editedMessage']),_0x3204b1=_0xa69f92[_0x2a31c7(0x7e1)][_0x2a31c7(0x1c2)]['id'],_0x4885cf=_0xa69f92[_0x2a31c7(0x7e1)][_0x2a31c7(0x183)][_0x5c448f]),_0xa69f92[_0x5c448f]?.[_0x2a31c7(0x599)]?.[_0x2a31c7(0x17f)]&&_0xa69f92[_0x5c448f]?.[_0x2a31c7(0x599)]?.['quotedMessage']&&(_0x5a8413=_0xa69f92[_0x5c448f][_0x2a31c7(0x599)][_0x2a31c7(0x17f)]),_0xa69f92[_0x2a31c7(0x738)]&&(_0xc292a4=_0xa69f92[_0x2a31c7(0x738)][_0x2a31c7(0x1c2)]['id']);let _0x179d93;if(_0x4885cf&&typeof _0x4885cf==_0x2a31c7(0x328)&&_0x2a31c7(0x289)in _0x4885cf&&({pollCreationMessageKey:_0x179d93}=_0x4885cf),_0x5c448f===_0x2a31c7(0x28e)||_0x5c448f==='pollCreationMessageV2'||_0x5c448f===_0x2a31c7(0x5de)){let _0x3a4fa7=_0x4885cf[_0x2a31c7(0x611)][_0x2a31c7(0x555)](_0x310cc3=>_0x310cc3['optionName'])[_0x2a31c7(0x4c8)]('|');_0x23d6cd[_0x2a31c7(0x743)]=_0x3a4fa7;}let _0x569723='';if(_0x4885cf&&(_0x569723+=_0x4885cf[_0x2a31c7(0x149)]?_0x4885cf[_0x2a31c7(0x149)]:'',_0x569723+=_0x4885cf[_0x2a31c7(0x2b8)]?'\x20'+_0x4885cf[_0x2a31c7(0x2b8)]:'',_0x569723+=_0x4885cf[_0x2a31c7(0x3d3)]?'\x20'+_0x4885cf['conversation']:'',_0x569723+=_0x4885cf['displayName']?'\x20'+_0x4885cf[_0x2a31c7(0x3be)]:''),_0x5c448f===_0x2a31c7(0x731)){_0x569723=(_0x4885cf[_0x2a31c7(0x256)]||'')+'\x0a'+(_0x4885cf['description']||'')+'\x0a'+(_0x4885cf[_0x2a31c7(0x490)]||'');let _0x3b2218=this['sectionsToString'](_0x4885cf[_0x2a31c7(0x680)]);_0x23d6cd[_0x2a31c7(0x743)]=_0x3b2218;}if(_0x5c448f==='listResponseMessage'&&(_0x22cbeb=_0x4885cf[_0x2a31c7(0x256)]),_0x4885cf&&_0x4885cf[_0x2a31c7(0x801)]){let _0x46ac99=this['formatVCard'](JSON[_0x2a31c7(0x647)](_0x4885cf[_0x2a31c7(0x801)],null,0x2));_0x569723=_0x569723+'\x0a'+_0x46ac99;}if(_0x4885cf){let {sections:_0x364d34,listType:_0x8b27ad,displayName:_0x27eb68,vcard:_0x442578,contactVcard:_0xab2e16,name:_0x511026,caption:_0x404fc9,conversation:_0x170a31,pollCreationMessageKey:_0xe627d4,footerText:_0x196a2e,contentText:_0x5aceb1,pageCount:_0x257dbf,headerType:_0x3a0a9f,isAvatar:_0x24ecd4,isAnimated:_0x52de66,fallbackLc:_0x2c9788,fallbackLg:_0x191d0a,namespace:_0x189a40,elementName:_0x29bf24,localizableParams:_0x3a997a,viewOnce:_0x1c46ea,height:_0x456edf,width:_0x3c089c,key:_0x30dee8,firstScanLength:_0x301748,firstScanSidecar:_0x11451a,gifPlayback:_0x2e20af,gifAttribution:_0x2b924b,midQualityFileSha256:_0x3c2a94,scansSidecar:_0x56c20d,streamingSidecar:_0x5bde07,thumbnailHeight:_0x3f3bc8,thumbnailWidth:_0xb5a9ea,thumbnailEncSha256:_0x2708e1,thumbnailDirectPath:_0x3e7d9d,canonicalUrl:_0x4bf077,matchedText:_0x295143,previewType:_0x431351,thumbnailSha256:_0xb0f931,deviceListMetadataVersion:_0x2e7204,inviteLinkGroupTypeV2:_0xed9bdb,interactiveAnnotations:_0x247717,scanLengths:_0x371ee8,jpegThumbnail:_0x506c7e,url:_0x25daca,mediaKeyTimestamp:_0x31a2bd,waveform:_0x2a34cc,stickerSentTs:_0x51cef5,firstFrameLength:_0xdc5daa,fileEncSha256:_0x5eb8fc,contextInfo:_0xa992a6,firstFrameSidecar:_0x4c87a5,directPath:_0x266bd1,fileSha256:_0xb70d5b,mediaKey:_0x10cbe6,senderTimestampMs:_0xa56440,..._0x8fee1a}=_0x4885cf;(_0x5c448f===_0x2a31c7(0x731)||_0x5c448f==='listResponseMessage')&&(delete _0x8fee1a[_0x2a31c7(0x256)],delete _0x8fee1a[_0x2a31c7(0x41a)]),typeof _0x4885cf==_0x2a31c7(0x47c)?_0x23d6cd={'text':_0x4885cf,'type':_0x5c448f||'conversation',..._0x3204b1&&{'edited':_0x3204b1},..._0x5a8413&&{'quoted':_0x5a8413},..._0xc292a4&&{'reaction':_0xc292a4}}:_0x23d6cd={'text':_0x569723,..._0x8fee1a,..._0x5c448f==='pollUpdateMessage'?{'poll_id':_0x4885cf[_0x2a31c7(0x289)]['id'],'quoted':_0x4885cf[_0x2a31c7(0x289)]['id'],'vote':_0x22cbeb}:{},..._0x5c448f==='listResponseMessage'?{'vote':_0x22cbeb}:{},'type':_0x5c448f,..._0x3204b1&&{'edited':_0x3204b1},..._0x5a8413&&{'quoted':_0x5a8413},..._0xc292a4&&{'reaction':_0xc292a4},...(_0x5c448f===_0x2a31c7(0x28e)||_0x5c448f===_0x2a31c7(0x1e5)||_0x5c448f===_0x2a31c7(0x5de)||_0x5c448f===_0x2a31c7(0x731))&&{'convertedOptions':_0x23d6cd[_0x2a31c7(0x743)]}};}return{'messageType':_0x5c448f,'messageContent':_0x4885cf,'message_normalized':_0x23d6cd};}catch(_0x42ce19){return this['logger']['error']('Erro\x20ao\x20normalizar\x20a\x20mensagem:'+_0x42ce19),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},(this[_0x3e497c(0x18c)](),this[_0x3e497c(0x466)][_0x3e497c(0x247)]={'count':0x0},this[_0x3e497c(0x466)][_0x3e497c(0x54b)]={'isConnected':!0x1,'delayMessage':null,'processingGroup_id':null,'lastSend':0x0,'timeout':null,'lastMessage_id':null});}set[a0_0x490cab(0x629)](_0x5ae57b){const _0x1c8272=a0_0x490cab;if(!_0x5ae57b){this[_0x1c8272(0x466)][_0x1c8272(0x149)]=(0x0,Oi['v4'])();return;}this[_0x1c8272(0x466)][_0x1c8272(0x149)]=_0x5ae57b,this[_0x1c8272(0x6b3)](_0x1c8272(0x434),{'instance':this[_0x1c8272(0x466)][_0x1c8272(0x149)],'status':_0x1c8272(0x4eb)});}get[a0_0x490cab(0x629)](){const _0x5e5463=a0_0x490cab;return this[_0x5e5463(0x466)]['name'];}get[a0_0x490cab(0x3fd)](){const _0x28130e=a0_0x490cab;return this[_0x28130e(0x466)]['wuid'];}async[a0_0x490cab(0x706)](){const _0x36ab79=a0_0x490cab;let _0x54397d=this[_0x36ab79(0x386)][_0x36ab79(0x37d)]?.[_0x36ab79(0x149)]??this[_0x36ab79(0x386)][_0x36ab79(0x37d)]?.[_0x36ab79(0x6a6)];if(!_0x54397d){if(this[_0x36ab79(0x3ec)]['get'](_0x36ab79(0x1da))[_0x36ab79(0x3c3)]){let _0x2c7538=await R['getClient']()['db'](this[_0x36ab79(0x3ec)]['get']('DATABASE')[_0x36ab79(0x4b9)][_0x36ab79(0x784)]+_0x36ab79(0x5ca))[_0x36ab79(0x57f)](this[_0x36ab79(0x629)])[_0x36ab79(0x2cd)]({'_id':_0x36ab79(0x4e6)});if(_0x2c7538){let _0x15c2ff=JSON[_0x36ab79(0x5a5)](JSON[_0x36ab79(0x647)](_0x2c7538),w[_0x36ab79(0x77b)][_0x36ab79(0x57c)]);_0x54397d=_0x15c2ff['me']?.[_0x36ab79(0x149)]||_0x15c2ff['me']?.['verifiedName'];}}else{if((0x0,Le['existsSync'])((0x0,U[_0x36ab79(0x4c8)])(be,this[_0x36ab79(0x629)],_0x36ab79(0x3e3)))){let _0x2ad737=JSON[_0x36ab79(0x5a5)]((0x0,Le[_0x36ab79(0x339)])((0x0,U[_0x36ab79(0x4c8)])(be,this['instanceName'],_0x36ab79(0x3e3)),{'encoding':_0x36ab79(0x303)}));_0x54397d=_0x2ad737['me']?.[_0x36ab79(0x149)]||_0x2ad737['me']?.[_0x36ab79(0x6a6)];}}}return _0x54397d;}get[a0_0x490cab(0x21c)](){const _0x1b8188=a0_0x490cab;return this[_0x1b8188(0x466)][_0x1b8188(0x21c)];}get[a0_0x490cab(0x53a)](){const _0x4738c8=a0_0x490cab;return this[_0x4738c8(0x466)][_0x4738c8(0x247)]?.[_0x4738c8(0x47d)]?{'pairingCode':this['instance']['qrcode']?.[_0x4738c8(0x47d)]}:{'code':this[_0x4738c8(0x466)][_0x4738c8(0x247)]?.[_0x4738c8(0x6cb)],'base64':this['instance'][_0x4738c8(0x247)]?.[_0x4738c8(0x3a1)]};}async[a0_0x490cab(0x7a3)](){const _0x4f46d0=a0_0x490cab;let _0x36eb9e=await this['repository'][_0x4f46d0(0x408)][_0x4f46d0(0x5f9)](this['instanceName']);this[_0x4f46d0(0x5e8)][_0x4f46d0(0x789)]=_0x36eb9e?.[_0x4f46d0(0x789)],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x431)]=_0x36eb9e?.[_0x4f46d0(0x431)],this[_0x4f46d0(0x5e8)]['local_map']=_0x36eb9e?.[_0x4f46d0(0x5d3)],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x3ee)]=_0x36eb9e?.[_0x4f46d0(0x3ee)],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x5a7)]=_0x36eb9e?.[_0x4f46d0(0x5a7)],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x65c)]=_0x36eb9e?.[_0x4f46d0(0x65c)],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x4b1)]=_0x36eb9e?.[_0x4f46d0(0x4b1)],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x2fc)]=_0x36eb9e?.[_0x4f46d0(0x2fc)],this['localWebhook'][_0x4f46d0(0x284)]=_0x36eb9e?.[_0x4f46d0(0x284)],this[_0x4f46d0(0x5e8)]['GROUPS_UPDATE']=_0x36eb9e?.[_0x4f46d0(0x62a)],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x194)]=_0x36eb9e?.['GROUP_PARTICIPANTS_UPDATE'],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x7f8)]=_0x36eb9e?.[_0x4f46d0(0x7f8)],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x267)]=_0x36eb9e?.['CHATS_UPSERT'],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x146)]=_0x36eb9e?.['CHATS_UPDATE'],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x6e7)]=_0x36eb9e?.[_0x4f46d0(0x6e7)],this['localWebhook'][_0x4f46d0(0x62b)]=_0x36eb9e?.[_0x4f46d0(0x62b)],this[_0x4f46d0(0x5e8)]['CONTACTS_UPSERT']=_0x36eb9e?.['CONTACTS_UPSERT'],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x20a)]=_0x36eb9e?.[_0x4f46d0(0x20a)],this[_0x4f46d0(0x5e8)]['PRESENCE_UPDATE']=_0x36eb9e?.['PRESENCE_UPDATE'],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x71c)]=_0x36eb9e?.[_0x4f46d0(0x71c)],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x49c)]=_0x36eb9e?.[_0x4f46d0(0x49c)],this[_0x4f46d0(0x5e8)][_0x4f46d0(0x2d2)]=_0x36eb9e?.['groups_ignore'];}async[a0_0x490cab(0x633)](_0x17ae5f){const _0x4dc840=a0_0x490cab;let _0x408db8=['_id',_0x4dc840(0x789),'enabled','local_map',_0x4dc840(0x3ee),_0x4dc840(0x5a7),'MESSAGES_UPDATE',_0x4dc840(0x4b1),_0x4dc840(0x65c),_0x4dc840(0x284),_0x4dc840(0x62a),'GROUP_PARTICIPANTS_UPDATE',_0x4dc840(0x7f8),_0x4dc840(0x267),_0x4dc840(0x146),'CHATS_DELETE',_0x4dc840(0x62b),_0x4dc840(0x239),'CONTACTS_UPDATE','PRESENCE_UPDATE','MESSAGES_SET',_0x4dc840(0x49c),_0x4dc840(0x2d2)],_0x31b04b={};return _0x408db8[_0x4dc840(0x5aa)](_0x16d93c=>{_0x17ae5f[_0x16d93c]!==void 0x0&&(_0x31b04b[_0x16d93c]=_0x17ae5f[_0x16d93c]);}),_0x31b04b[_0x4dc840(0x789)]&&(_0x31b04b[_0x4dc840(0x789)]=_0x31b04b[_0x4dc840(0x789)][_0x4dc840(0x63d)]()),await this[_0x4dc840(0x261)][_0x4dc840(0x408)]['create'](_0x31b04b,this[_0x4dc840(0x629)]),Object[_0x4dc840(0x17e)](this['localWebhook'],_0x31b04b),await this[_0x4dc840(0x261)][_0x4dc840(0x408)][_0x4dc840(0x5f9)](this[_0x4dc840(0x629)]);}async[a0_0x490cab(0x2b3)](){const _0x327a26=a0_0x490cab;return await this[_0x327a26(0x261)]['webhook']['find'](this[_0x327a26(0x629)]);}async['sendDataWebhook'](_0xc9715e,_0x1702e8){const _0x83323f=a0_0x490cab;let _0x1d6977=_0xc9715e[_0x83323f(0x4d4)](/[\.-]/gm,'_')[_0x83323f(0x551)](),_0x2183fe=this[_0x83323f(0x5e8)]['enabled']&&(0x0,k[_0x83323f(0x313)])(this[_0x83323f(0x5e8)][_0x83323f(0x789)])?this['localWebhook'][_0x83323f(0x789)]+(this['localWebhook'][_0x83323f(0x5d3)]?this[_0x83323f(0x508)][_0xc9715e]:''):null,_0x40cf12=this[_0x83323f(0x5e8)][_0x1d6977],_0x5df6f2=ge&&ge[_0x83323f(0x431)]&&(0x0,k[_0x83323f(0x313)])(ge['url'])?ge[_0x83323f(0x789)]+(ge[_0x83323f(0x5d3)]?this[_0x83323f(0x508)][_0xc9715e]:''):null,_0x4c2bc8=ge?ge[_0x1d6977]:null;if(_0x40cf12&&_0x2183fe)try{await Q[_0x83323f(0x73a)][_0x83323f(0x14c)]({'baseURL':_0x2183fe})['post']('',{'event':_0xc9715e,'instance':this[_0x83323f(0x466)]['name'],'apikey':this[_0x83323f(0x466)][_0x83323f(0x642)],'data':_0x1702e8}),this[_0x83323f(0x21e)][_0x83323f(0x1bd)](this['instanceName']+'\x20('+this['instance'][_0x83323f(0x3fd)]+_0x83323f(0x11f)+_0xc9715e+':\x20'+_0x2183fe);}catch{this[_0x83323f(0x21e)][_0x83323f(0x7a9)](this[_0x83323f(0x629)]+'\x20('+this[_0x83323f(0x466)][_0x83323f(0x3fd)]+_0x83323f(0x76d)+_0xc9715e+':\x20'+_0x2183fe);}if(_0x4c2bc8&&_0x5df6f2)try{await Q[_0x83323f(0x73a)]['create']({'baseURL':_0x5df6f2})['post']('',{'event':_0xc9715e,'instance':this[_0x83323f(0x466)]['name'],'apikey':this[_0x83323f(0x466)]['apikey'],'data':_0x1702e8}),this[_0x83323f(0x21e)]['log'](this[_0x83323f(0x629)]+'\x20('+this['instance'][_0x83323f(0x3fd)]+_0x83323f(0x7e2)+_0xc9715e+':\x20'+_0x5df6f2);}catch{this['logger'][_0x83323f(0x7a9)](this[_0x83323f(0x629)]+'\x20('+this[_0x83323f(0x466)][_0x83323f(0x3fd)]+'):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20'+_0xc9715e+':\x20'+_0x5df6f2);}}async['connectionUpdate']({qr:_0x338b43,connection:_0x47fc1c,lastDisconnect:_0x4100bb,receivedPendingNotifications:_0x23c0a1}){const _0x236fb6=a0_0x490cab;if(_0x338b43){if(this[_0x236fb6(0x466)][_0x236fb6(0x247)]['count']===Lo)return this[_0x236fb6(0x6b3)]('qrcode.updated',{'message':_0x236fb6(0x7b6),'statusCode':w['DisconnectReason'][_0x236fb6(0x714)]}),this['stateConnection']={'state':_0x236fb6(0x211),'statusReason':w[_0x236fb6(0x769)][_0x236fb6(0x54d)]},this[_0x236fb6(0x6b3)](_0x236fb6(0x748),{'instance':this[_0x236fb6(0x466)][_0x236fb6(0x149)],...this[_0x236fb6(0x744)]}),this[_0x236fb6(0x6b3)](_0x236fb6(0x434),{'instance':this[_0x236fb6(0x466)]['name'],'status':'removed'}),this[_0x236fb6(0x261)][_0x236fb6(0x42a)][_0x236fb6(0x75b)](this[_0x236fb6(0x466)][_0x236fb6(0x149)]),this[_0x236fb6(0x71e)]=!0x0,he[_0x236fb6(0x473)](X,this['instance'][_0x236fb6(0x149)]),this[_0x236fb6(0x28d)][_0x236fb6(0x413)](_0x236fb6(0x7dc),this[_0x236fb6(0x466)][_0x236fb6(0x149)]);this[_0x236fb6(0x466)]['qrcode'][_0x236fb6(0x28b)]++;let _0x4fed61={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x236fb6(0x1e7),'dark':_0x236fb6(0x116)}};_i[_0x236fb6(0x73a)][_0x236fb6(0x330)](_0x338b43,_0x4fed61,(_0x227810,_0x209f17)=>{const _0xa1a5f0=_0x236fb6;if(_0x227810){this[_0xa1a5f0(0x21e)][_0xa1a5f0(0x7a9)](this[_0xa1a5f0(0x629)]+'\x20('+this[_0xa1a5f0(0x466)]['wuid']+_0xa1a5f0(0x3dd)+(_0x227810 instanceof Error?_0x227810[_0xa1a5f0(0x202)]:JSON[_0xa1a5f0(0x647)](_0x227810,null,0x2)));return;}this[_0xa1a5f0(0x466)][_0xa1a5f0(0x247)][_0xa1a5f0(0x3a1)]=_0x209f17,this['instance'][_0xa1a5f0(0x247)]['code']=_0x338b43,!this[_0xa1a5f0(0x3cf)]&&this[_0xa1a5f0(0x6b3)]('qrcode.updated',{'qrcode':{'instance':this['instance'][_0xa1a5f0(0x149)],'pairingCode':this[_0xa1a5f0(0x466)][_0xa1a5f0(0x247)][_0xa1a5f0(0x47d)],'code':_0x338b43,'base64':_0x209f17}});}),this[_0x236fb6(0x3cf)]?this[_0x236fb6(0x466)][_0x236fb6(0x247)]['pairingCode']||(await(0x0,w[_0x236fb6(0x4a8)])(0x7d0),this['instance']['qrcode']['pairingCode']=await this[_0x236fb6(0x386)][_0x236fb6(0x26b)](this['phoneNumber'])):this['instance'][_0x236fb6(0x247)][_0x236fb6(0x47d)]=null,xi['default'][_0x236fb6(0x68a)](_0x338b43,{'small':!0x0},_0x27d544=>this['logger']['log']('\x0a{\x20instance:\x20'+this[_0x236fb6(0x466)][_0x236fb6(0x149)]+',\x20qrcodeCount:\x20'+this[_0x236fb6(0x466)]['qrcode']['count']+',\x20pairCode:\x20'+this[_0x236fb6(0x466)]['qrcode']['pairingCode']+_0x236fb6(0x6fb)+_0x27d544));}if(_0x47fc1c&&(this[_0x236fb6(0x744)]={'state':_0x47fc1c,'statusReason':_0x4100bb?.[_0x236fb6(0x7a9)]?.[_0x236fb6(0x778)]?.[_0x236fb6(0x2a4)]??0xc8},this[_0x236fb6(0x6b3)](_0x236fb6(0x748),{'instance':this['instance']['name'],...this[_0x236fb6(0x744)]})),_0x47fc1c===_0x236fb6(0x496)){if(this[_0x236fb6(0x52f)]++,this[_0x236fb6(0x25c)][_0x236fb6(0x3de)](Date[_0x236fb6(0x7f9)]()),this[_0x236fb6(0x25c)]=this[_0x236fb6(0x25c)]['filter'](_0x584b59=>Date['now']()-_0x584b59<this[_0x236fb6(0x76b)]),_0x4100bb['error']?.[_0x236fb6(0x778)]?.[_0x236fb6(0x2a4)]!==w[_0x236fb6(0x769)]['loggedOut']){let _0x2ab6e6=this['reconnectAttempts']<=0x1?0x0:Math['min'](Math['pow'](0x2,this['reconnectAttempts']-0x1)*0x3e8,0x493e0);console['log'](this[_0x236fb6(0x629)]+'\x20Tentativa\x20de\x20reconexão\x20'+this['reconnectAttempts']+_0x236fb6(0x786)+_0x2ab6e6/0x3e8+_0x236fb6(0x4f4)),await new Promise(_0x2811b0=>setTimeout(_0x2811b0,_0x2ab6e6)),console[_0x236fb6(0x1bd)](_0x236fb6(0x7f4)),await this[_0x236fb6(0x193)]();}else{this[_0x236fb6(0x6b3)](_0x236fb6(0x434),{'instance':this[_0x236fb6(0x466)][_0x236fb6(0x149)],'status':_0x236fb6(0x488)}),this[_0x236fb6(0x466)][_0x236fb6(0x54b)][_0x236fb6(0x165)]=!0x1,this[_0x236fb6(0x261)][_0x236fb6(0x408)][_0x236fb6(0x75b)](this[_0x236fb6(0x629)]),this[_0x236fb6(0x261)]['auth'][_0x236fb6(0x14c)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x236fb6(0x7f9)]()},this[_0x236fb6(0x466)][_0x236fb6(0x149)]),he[_0x236fb6(0x473)](X,this[_0x236fb6(0x466)][_0x236fb6(0x149)]);try{this['logger'][_0x236fb6(0x331)](this[_0x236fb6(0x629)]+'\x20('+this['instance'][_0x236fb6(0x3fd)]+'):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...');let _0x40911c=await this['repository'][_0x236fb6(0x202)][_0x236fb6(0x3e4)](this[_0x236fb6(0x466)][_0x236fb6(0x3fd)]);_0x40911c['success']?this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x236fb6(0x466)]['wuid']+_0x236fb6(0x128)):this[_0x236fb6(0x21e)][_0x236fb6(0x7a9)](_0x236fb6(0x357)+_0x40911c['error']);}catch(_0xea352b){this[_0x236fb6(0x21e)][_0x236fb6(0x7a9)](_0x236fb6(0x4dc)+_0xea352b[_0x236fb6(0x202)]);}this['instance'][_0x236fb6(0x54b)][_0x236fb6(0x5e5)]!==null&&(this[_0x236fb6(0x21e)][_0x236fb6(0x331)](this[_0x236fb6(0x629)]+'\x20('+this[_0x236fb6(0x466)][_0x236fb6(0x3fd)]+_0x236fb6(0x760)),clearInterval(this['instance']['ScheduleMessage'][_0x236fb6(0x5e5)]),this[_0x236fb6(0x466)][_0x236fb6(0x54b)][_0x236fb6(0x5e5)]=null),this[_0x236fb6(0x21e)]['verbose'](this[_0x236fb6(0x629)]+'\x20('+this[_0x236fb6(0x466)][_0x236fb6(0x3fd)]+'):\x20Limpando\x20AutomateSystem'),this[_0x236fb6(0x672)]=null,this[_0x236fb6(0x28d)]['emit']('remove.instance',this[_0x236fb6(0x466)][_0x236fb6(0x149)],_0x236fb6(0x10e)),this['client']?.['ws']?.[_0x236fb6(0x496)](),this['client'][_0x236fb6(0x754)](new Error(_0x236fb6(0x586)));}}if(_0x47fc1c===_0x236fb6(0x1b9)){_0x23c0a1&&!this['client'][_0x236fb6(0x3b9)]['creds']?.['myAppStateKeyId']&&this[_0x236fb6(0x386)]['ev']['flush'](),this[_0x236fb6(0x793)],this[_0x236fb6(0x466)][_0x236fb6(0x3fd)]=this[_0x236fb6(0x386)][_0x236fb6(0x37d)]['id'][_0x236fb6(0x4d4)](/:\d+/,'')[_0x236fb6(0x4d4)](_0x236fb6(0x119),''),this[_0x236fb6(0x466)][_0x236fb6(0x21c)]=(await this[_0x236fb6(0x6a0)](this[_0x236fb6(0x466)][_0x236fb6(0x3fd)]+_0x236fb6(0x119)))[_0x236fb6(0x21c)],this['repository'][_0x236fb6(0x42a)][_0x236fb6(0x14c)]({'online':!0x0,'owner':this[_0x236fb6(0x466)]['wuid'],'lastDisconnect':null},this[_0x236fb6(0x466)][_0x236fb6(0x149)]);let _0x1b0c0e='Número:\x20'+this[_0x236fb6(0x466)][_0x236fb6(0x3fd)],_0x50dd15=0x28,_0x2a06ea=Math['floor']((_0x50dd15-_0x1b0c0e[_0x236fb6(0x587)])/0x2),_0x2546a3='\x20'[_0x236fb6(0x30c)](_0x2a06ea),_0x391a0e=_0x236fb6(0x154),_0x235a3c='Instância:\x20'+this[_0x236fb6(0x466)][_0x236fb6(0x149)],_0x56d687=(''+_0x2546a3+_0x1b0c0e+_0x2546a3)['padEnd'](_0x50dd15,'\x20'),_0x45c399=(''+_0x2546a3+_0x391a0e+_0x2546a3)[_0x236fb6(0x5c5)](_0x50dd15,'\x20'),_0x1d1000=(''+_0x2546a3+_0x235a3c+_0x2546a3)[_0x236fb6(0x5c5)](_0x50dd15,'\x20'),_0x19d4df=Math[_0x236fb6(0x5ab)](_0x56d687[_0x236fb6(0x587)],_0x45c399[_0x236fb6(0x587)],_0x1d1000[_0x236fb6(0x587)]),_0xfffafa=_0x56d687[_0x236fb6(0x5c5)](_0x19d4df,'\x20'),_0x564081=_0x45c399[_0x236fb6(0x5c5)](_0x19d4df,'\x20'),_0x3a8cb8=_0x1d1000['padEnd'](_0x19d4df,'\x20');this[_0x236fb6(0x21e)]['info']((_0x236fb6(0x7e8)+'─'[_0x236fb6(0x30c)](_0x19d4df)+_0x236fb6(0x550)+_0x564081+_0x236fb6(0x3a6)+_0x3a8cb8+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0xfffafa+_0x236fb6(0x3a5)+'─'[_0x236fb6(0x30c)](_0x19d4df)+'┘')[_0x236fb6(0x4d4)](/^ +/gm,'\x20\x20')),this[_0x236fb6(0x670)](),this['instance'][_0x236fb6(0x54b)][_0x236fb6(0x165)]=!0x0;}}[a0_0x490cab(0x793)](){const _0x231f67=a0_0x490cab;this[_0x231f67(0x52f)]=0x0,this[_0x231f67(0x25c)]=[];}async[a0_0x490cab(0x75c)](_0x36b715,_0x52df2e=!0x1){const _0x54e18c=a0_0x490cab;try{let _0x2454d9=await this[_0x54e18c(0x261)][_0x54e18c(0x202)][_0x54e18c(0x5f9)]({'where':{'_id':_0x36b715['id']}},this[_0x54e18c(0x466)][_0x54e18c(0x3fd)]);return _0x52df2e?_0x2454d9[0x0]:_0x2454d9[0x0][_0x54e18c(0x202)];}catch{return{'conversation':''};}}['cleanStore'](){const _0x333b23=a0_0x490cab;let _0x16a4ba=this['configService']['get'](_0x333b23(0x68c)),_0x4a8a63=this['configService']['get'](_0x333b23(0x1da));_0x16a4ba?.['CLEANING_INTERVAL']&&!_0x4a8a63[_0x333b23(0x3c3)]&&setInterval(()=>{const _0x266a4b=_0x333b23;try{for(let [_0x4611fd,_0x3e25f0]of Object[_0x266a4b(0x49e)](_0x16a4ba))_0x3e25f0===!0x0&&(0x0,Fe[_0x266a4b(0x712)])(_0x266a4b(0x3b8)+(0x0,U[_0x266a4b(0x4c8)])(this[_0x266a4b(0x639)],_0x4611fd[_0x266a4b(0x637)](),this[_0x266a4b(0x466)][_0x266a4b(0x3fd)])+'/*.json');}catch{}},(_0x16a4ba?.[_0x333b23(0x677)]??0xe10)*0x3e8);}async['defineAuthState'](){const _0x407ccd=a0_0x490cab;let _0x2dd186=this[_0x407ccd(0x3ec)][_0x407ccd(0x715)](_0x407ccd(0x1da)),_0x2506ff=this[_0x407ccd(0x3ec)][_0x407ccd(0x715)](_0x407ccd(0x4c7));return _0x2506ff?.[_0x407ccd(0x3c3)]?await _s(_0x2506ff,this[_0x407ccd(0x466)][_0x407ccd(0x149)]):_0x2dd186['ENABLED']?await Os(this[_0x407ccd(0x466)][_0x407ccd(0x149)]):await(0x0,w[_0x407ccd(0x465)])((0x0,U[_0x407ccd(0x4c8)])(be,this[_0x407ccd(0x466)][_0x407ccd(0x149)]));}async[a0_0x490cab(0x670)](){const _0x28c4c9=a0_0x490cab;let _0x58a1c9=()=>Math[_0x28c4c9(0x66f)](Math[_0x28c4c9(0x458)]()*0x4e21)+0x7d0,_0x8529b8=async()=>{const _0x54617a=_0x28c4c9;if(!this[_0x54617a(0x466)][_0x54617a(0x54b)][_0x54617a(0x165)]){this[_0x54617a(0x21e)][_0x54617a(0x331)](this[_0x54617a(0x629)]+'\x20('+this[_0x54617a(0x466)][_0x54617a(0x3fd)]+'):Desconectado,\x20parando\x20execução.'),this[_0x54617a(0x7ff)]=!0x1;return;}if(this['instance']['wuid']&&this['AutomateSystem']&&this[_0x54617a(0x466)][_0x54617a(0x54b)][_0x54617a(0x5e5)]!==null&&this['instance'][_0x54617a(0x54b)]['delayMessage']!==void 0x0){let _0x4823d2=Math['round'](this[_0x54617a(0x466)][_0x54617a(0x54b)]['delayMessage']/0xea60);this[_0x54617a(0x21e)][_0x54617a(0x331)](this['instanceName']+'\x20('+this[_0x54617a(0x466)][_0x54617a(0x3fd)]+'):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20'+_0x4823d2+'\x20minutos\x20verificará\x20novas\x20mensagens'),this[_0x54617a(0x7ff)]=!0x1;return;}else this['instance'][_0x54617a(0x3fd)]&&(this['logger']['verbose'](this[_0x54617a(0x629)]+'\x20('+this['instance'][_0x54617a(0x3fd)]+'):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...'),this[_0x54617a(0x672)]||(await this[_0x54617a(0x2f2)](),this[_0x54617a(0x18a)](),this[_0x54617a(0x142)]()),(this[_0x54617a(0x466)][_0x54617a(0x54b)]['delayMessage']===null||this[_0x54617a(0x466)][_0x54617a(0x54b)][_0x54617a(0x5e5)]===void 0x0)&&await this['scheduleNextCheck']());if(this[_0x54617a(0x7ff)]){let _0x1a3ff2=_0x58a1c9();this[_0x54617a(0x21e)][_0x54617a(0x331)](this[_0x54617a(0x629)]+_0x54617a(0x126)+_0x1a3ff2/0x3e8+'\x20segundos'),setTimeout(_0x8529b8,_0x1a3ff2);}};if(this[_0x28c4c9(0x7ff)])return;this[_0x28c4c9(0x7ff)]=!0x0;let _0xe9e3ae=_0x58a1c9();setTimeout(_0x8529b8,_0xe9e3ae);}async[a0_0x490cab(0x142)](){const _0x508378=a0_0x490cab;let _0x562ca4=this[_0x508378(0x466)][_0x508378(0x3fd)];try{let _0x26bd75=await this['repository'][_0x508378(0x362)][_0x508378(0x609)]({'where':{'$or':[{'owner':_0x562ca4},{'whoCanUse':{'$in':[_0x562ca4]}},{'shareOwners':{'$in':[_0x562ca4]}}]}}),_0x17cdae=new Map(this[_0x508378(0x672)][_0x508378(0x3e7)][_0x508378(0x555)](_0x560ea8=>[_0x560ea8[_0x508378(0x215)],_0x560ea8])),_0x29eaf1=_0x26bd75['map'](_0x97f69a=>{const _0x20dfc9=_0x508378;let _0xa60e90=_0x17cdae['get'](_0x97f69a[_0x20dfc9(0x215)]?.[_0x20dfc9(0x751)]());return{'_id':_0x97f69a[_0x20dfc9(0x215)]?.[_0x20dfc9(0x751)](),'name':_0xa60e90?.['name']??_0x97f69a[_0x20dfc9(0x149)],'default':_0xa60e90?.[_0x20dfc9(0x73a)]??_0x97f69a[_0x20dfc9(0x73a)]??!0x1,'startCommand':_0xa60e90?.[_0x20dfc9(0x492)]??_0x97f69a[_0x20dfc9(0x6ff)],'minutesToClose':_0xa60e90?.[_0x20dfc9(0x1d4)]??_0x97f69a[_0x20dfc9(0x1d4)]??0xa,'readMessages':_0xa60e90?.[_0x20dfc9(0x455)]??_0x97f69a[_0x20dfc9(0x455)]??!0x1,'testingWith':_0xa60e90?.[_0x20dfc9(0x832)]??_0x97f69a[_0x20dfc9(0x832)],'canEdit':_0x97f69a[_0x20dfc9(0x1f7)]===_0x562ca4||(_0x97f69a['whoCanEdit']??[])[_0x20dfc9(0x3d0)](_0x562ca4),'usersCount':(_0x97f69a['shareOwners']??[])[_0x20dfc9(0x587)]??0x0};}),_0x546e22=!0x1;_0x29eaf1[_0x508378(0x5aa)](_0x5141f4=>{const _0xc2b0b9=_0x508378;_0x5141f4['default']&&(_0x546e22?_0x5141f4[_0xc2b0b9(0x73a)]=!0x1:_0x546e22=!0x0);}),this[_0x508378(0x672)][_0x508378(0x3e7)]=_0x29eaf1;let _0x934967={'flows':_0x29eaf1};return await this['repository'][_0x508378(0x4d8)][_0x508378(0x767)](_0x934967,_0x562ca4),this['logger'][_0x508378(0x331)](this[_0x508378(0x629)]+'\x20('+_0x562ca4+_0x508378(0x4ad)),_0x29eaf1['length'];}catch(_0x3a2a94){return this[_0x508378(0x21e)][_0x508378(0x7a9)](this[_0x508378(0x629)]+'\x20('+_0x562ca4+'):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20'+(_0x3a2a94 instanceof Error?_0x3a2a94['message']:JSON[_0x508378(0x647)](_0x3a2a94,null,0x2))),{'message':_0x508378(0x50e)+(_0x3a2a94 instanceof Error?_0x3a2a94['message']:JSON[_0x508378(0x647)](_0x3a2a94,null,0x2))};}}async['connectToWhatsapp'](_0x3cd49a){const _0x5a63b3=a0_0x490cab;try{let _0x334096=await this[_0x5a63b3(0x261)]['instance'][_0x5a63b3(0x2cd)]({'where':{'_id':X+'-'+this[_0x5a63b3(0x629)]}}),_0x18b698;console[_0x5a63b3(0x1bd)](_0x5a63b3(0x4b7)),console[_0x5a63b3(0x1bd)](_0x5a63b3(0x20e),Ti),console[_0x5a63b3(0x1bd)]('this.reconnectAttempts:\x20',this[_0x5a63b3(0x52f)]),console[_0x5a63b3(0x1bd)](_0x5a63b3(0x4b7)),Ti&&(this[_0x5a63b3(0x52f)]<0x6||!this['reconnectAttempts'])&&(!he[_0x5a63b3(0x491)]||!he[_0x5a63b3(0x153)]?(console[_0x5a63b3(0x7a9)](_0x5a63b3(0x522)),_0x18b698=void 0x0):_0x334096&&_0x334096['ip']?(_0x18b698=_0x334096['ip'],console[_0x5a63b3(0x1bd)](_0x5a63b3(0x44b)+_0x18b698)):(_0x18b698=await he[_0x5a63b3(0x1e3)](X,this[_0x5a63b3(0x466)][_0x5a63b3(0x149)]),_0x18b698?(console[_0x5a63b3(0x1bd)]('Novo\x20IP\x20criado:\x20'+_0x18b698),await(0x0,w[_0x5a63b3(0x4a8)])(0x7d0)):console[_0x5a63b3(0x7a9)]('Falha\x20ao\x20criar\x20IPv6.'))),this[_0x5a63b3(0x7a3)](),this[_0x5a63b3(0x466)][_0x5a63b3(0x642)]=(await this[_0x5a63b3(0x261)][_0x5a63b3(0x42a)]['find'](this[_0x5a63b3(0x466)]['name']))[_0x5a63b3(0x642)],this[_0x5a63b3(0x466)]['authState']=await this[_0x5a63b3(0x299)]();let {version:_0x5533b7}=await(0x0,w['fetchLatestBaileysVersion'])(),_0x408268=[Pi,Fs,(0x0,Ps[_0x5a63b3(0x69d)])()],_0x3f4461={'localAddress':_0x18b698,'auth':{'creds':this[_0x5a63b3(0x466)]['authState']['state'][_0x5a63b3(0x4e6)],'keys':(0x0,w[_0x5a63b3(0x62e)])(this[_0x5a63b3(0x466)]['authState'][_0x5a63b3(0x64d)][_0x5a63b3(0x66a)],(0x0,Jt[_0x5a63b3(0x73a)])({'level':_0x5a63b3(0x7a9)}))},'logger':(0x0,Jt['default'])({'level':'error'}),'printQRInTerminal':!0x1,'browser':_0x3cd49a?['Mac\x20OS',Fs,(0x0,Ps[_0x5a63b3(0x69d)])()]:_0x408268,'version':_0x5533b7,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'connectTimeoutMs':0xea60,'qrTimeout':0x9c40,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x3e2def=>{const _0x56e034=_0x5a63b3;let _0x1059d7=_0x3e2def[_0x56e034(0x381)]('@newsletter'),_0x348b58=this[_0x56e034(0x5e8)]?.[_0x56e034(0x2d2)]&&_0x3e2def['endsWith']('@g.us');return _0x1059d7||(0x0,w['isJidBroadcast'])(_0x3e2def)||_0x348b58;},'msgRetryCounterCache':this[_0x5a63b3(0x12f)],'getMessage':async _0x39c10b=>await this['getMessage'](_0x39c10b),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x5a63b3(0x18b)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending':_0x4a598c=>(_0x4a598c[_0x5a63b3(0x731)]?.[_0x5a63b3(0x33e)]==w[_0x5a63b3(0x516)][_0x5a63b3(0x711)][_0x5a63b3(0x6e3)][_0x5a63b3(0x192)][_0x5a63b3(0x23f)]&&(_0x4a598c=JSON[_0x5a63b3(0x5a5)](JSON['stringify'](_0x4a598c)),_0x4a598c[_0x5a63b3(0x731)][_0x5a63b3(0x33e)]=w[_0x5a63b3(0x516)][_0x5a63b3(0x711)][_0x5a63b3(0x6e3)][_0x5a63b3(0x192)][_0x5a63b3(0x671)]),_0x4a598c)};return this[_0x5a63b3(0x71e)]=!0x1,this[_0x5a63b3(0x386)]=(0x0,w[_0x5a63b3(0x73a)])(_0x3f4461),this[_0x5a63b3(0x450)](),this['phoneNumber']=_0x3cd49a,this[_0x5a63b3(0x386)];}catch(_0x24f4b4){let _0x119cde=_0x5a63b3(0x619),_0x52978a=_0x24f4b4 instanceof Error?_0x24f4b4[_0x5a63b3(0x202)]:typeof _0x24f4b4=='object'?JSON[_0x5a63b3(0x647)](_0x24f4b4):_0x24f4b4,_0x2b6d81=_0x119cde+':\x20'+_0x52978a;throw this[_0x5a63b3(0x21e)][_0x5a63b3(0x7a9)](this[_0x5a63b3(0x629)]+'\x20('+this[_0x5a63b3(0x466)]['wuid']+_0x5a63b3(0x32f)+_0x2b6d81),new x(_0x2b6d81);}}['eventHandler'](){const _0x2ac2b2=a0_0x490cab;this[_0x2ac2b2(0x386)]['ev'][_0x2ac2b2(0x3bc)](_0x278dd2=>{const _0x3da60b=_0x2ac2b2;if(!this['endSession']){let _0x3db0f1=this['configService'][_0x3da60b(0x715)](_0x3da60b(0x1da));if(_0x278dd2[_0x3da60b(0x228)]){let _0x273ed4=_0x278dd2['labels.edit'];this[_0x3da60b(0x1ae)][_0x3da60b(0x228)](_0x273ed4);}if(_0x278dd2[_0x3da60b(0x1bf)]){let _0x1e3a5b=_0x278dd2[_0x3da60b(0x1bf)];this['messageHandle'][_0x3da60b(0x1bf)](_0x1e3a5b);}if(_0x278dd2[_0x3da60b(0x748)]&&this[_0x3da60b(0x654)](_0x278dd2['connection.update']),_0x278dd2[_0x3da60b(0x31e)]&&this['instance'][_0x3da60b(0x3b9)][_0x3da60b(0x351)](),_0x278dd2[_0x3da60b(0x59d)]){let _0x69edda=_0x278dd2[_0x3da60b(0x59d)];this[_0x3da60b(0x1ae)][_0x3da60b(0x59d)](_0x69edda,_0x3db0f1);}if(_0x278dd2['messages.upsert']){let _0x36680e=_0x278dd2[_0x3da60b(0x155)];this[_0x3da60b(0x1ae)][_0x3da60b(0x155)](_0x36680e,_0x3db0f1);}if(_0x278dd2[_0x3da60b(0x475)]){let _0xd6d580=_0x278dd2[_0x3da60b(0x475)];this[_0x3da60b(0x1ae)][_0x3da60b(0x475)](_0xd6d580,_0x3db0f1);}if(_0x278dd2[_0x3da60b(0x6d3)]){let _0x4a9015=_0x278dd2[_0x3da60b(0x6d3)];if(this[_0x3da60b(0x5e8)]?.[_0x3da60b(0x2d2)]&&_0x4a9015['id'][_0x3da60b(0x3d0)](_0x3da60b(0x6cf)))return;this[_0x3da60b(0x6b3)](_0x3da60b(0x6d3),_0x4a9015);}if(_0x278dd2['groups.upsert']){let _0x4b9caf=_0x278dd2[_0x3da60b(0x570)];this[_0x3da60b(0x29b)]['groups.upsert'](_0x4b9caf);}if(_0x278dd2['groups.update']){let _0x33971a=_0x278dd2[_0x3da60b(0x735)];this['groupHandler'][_0x3da60b(0x735)](_0x33971a);}if(_0x278dd2[_0x3da60b(0x34c)]){let _0x19a954=_0x278dd2[_0x3da60b(0x34c)];this[_0x3da60b(0x29b)][_0x3da60b(0x34c)](_0x19a954);}if(_0x278dd2[_0x3da60b(0x48e)]){let _0x35eab1=_0x278dd2[_0x3da60b(0x48e)];this[_0x3da60b(0x559)]['chats.upsert'](_0x35eab1,_0x3db0f1);}if(_0x278dd2[_0x3da60b(0x462)]){let _0x4b849d=_0x278dd2['chats.update'];this[_0x3da60b(0x559)]['chats.update'](_0x4b849d,_0x3db0f1);}if(_0x278dd2[_0x3da60b(0x376)]){let _0xad4d39=_0x278dd2[_0x3da60b(0x376)];this[_0x3da60b(0x559)]['chats.delete'](_0xad4d39);}if(_0x278dd2['contacts.upsert']){let _0xb660c9=_0x278dd2[_0x3da60b(0x1ad)];this[_0x3da60b(0x4aa)][_0x3da60b(0x1ad)](_0xb660c9,_0x3db0f1);}if(_0x278dd2[_0x3da60b(0x2c1)]){let _0x5aa8b9=_0x278dd2[_0x3da60b(0x2c1)];this[_0x3da60b(0x4aa)][_0x3da60b(0x2c1)](_0x5aa8b9,_0x3db0f1);}}});}async[a0_0x490cab(0x429)](_0x31c04a,_0x591ea7){const _0x2700d7=a0_0x490cab;if(_0x591ea7>=0xa){console[_0x2700d7(0x7a9)](this[_0x2700d7(0x629)]+'\x20('+this['instance'][_0x2700d7(0x3fd)]+_0x2700d7(0x58e)),delete jt[_0x31c04a[_0x2700d7(0x1c2)]['id']];return;}try{console[_0x2700d7(0x7a9)](this[_0x2700d7(0x629)]+'\x20('+this['instance'][_0x2700d7(0x3fd)]+'):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20'+(_0x591ea7+0x1)),await this[_0x2700d7(0x386)][_0x2700d7(0x320)](JSON[_0x2700d7(0x5a5)](_0x31c04a[_0x2700d7(0x1aa)][0x1],w[_0x2700d7(0x77b)][_0x2700d7(0x57c)])),console[_0x2700d7(0x7a9)](_0x2700d7(0x616));}catch(_0x240423){console['error'](this['instanceName']+'\x20('+this['instance'][_0x2700d7(0x3fd)]+_0x2700d7(0x36e)+_0x240423),setTimeout(()=>this[_0x2700d7(0x429)](_0x31c04a,_0x591ea7+0x1),Math[_0x2700d7(0x203)](0x2,_0x591ea7)*0x3e8);}}[a0_0x490cab(0x5a0)](_0xdc7fdd){return new Promise(_0x28cab3=>setTimeout(_0x28cab3,_0xdc7fdd));}[a0_0x490cab(0x4e8)](_0x49c397){const _0x4ed6fa=a0_0x490cab;_0x49c397=_0x49c397[_0x4ed6fa(0x4d4)](/\D/g,'');let _0x15d159=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x4ed6fa(0x7b8)](_0x49c397);if(_0x15d159&&_0x15d159[0x1]==='55'){let _0x44bcab=_0x15d159[0x2],_0x5eab36=_0x15d159[0x3],_0x24e593=_0x15d159[0x4];if(parseInt(_0x44bcab)>=0x1f&&_0x5eab36==='9')return _0x15d159[0x1]+_0x44bcab+_0x24e593;}return _0x49c397;}[a0_0x490cab(0x147)](_0x17eff4){const _0x3cd754=a0_0x490cab;return _0x17eff4['includes'](_0x3cd754(0x6cf))||_0x17eff4[_0x3cd754(0x3d0)](_0x3cd754(0x119))||_0x17eff4[_0x3cd754(0x3d0)](_0x3cd754(0x2fa))?_0x17eff4:(_0x17eff4=_0x17eff4?.[_0x3cd754(0x4d4)](/\s/g,'')[_0x3cd754(0x4d4)](/\+/g,'')[_0x3cd754(0x4d4)](/\(/g,'')[_0x3cd754(0x4d4)](/\)/g,'')[_0x3cd754(0x6e6)](/\:/)[0x0]['split']('@')[0x0],_0x17eff4[_0x3cd754(0x587)]>=0x12?(_0x17eff4=_0x17eff4[_0x3cd754(0x4d4)](/[^\d-]/g,''),_0x17eff4+'@g.us'):(_0x17eff4=_0x17eff4[_0x3cd754(0x4d4)](/\D/g,''),_0x17eff4+_0x3cd754(0x119)));}async[a0_0x490cab(0x3d5)](_0x3a31f7){const _0x5882c1=a0_0x490cab;let _0x5aaaf0=(await this[_0x5882c1(0x3d6)]({'numbers':[_0x3a31f7[_0x5882c1(0x7c9)]]}))[0x0];if(!_0x5aaaf0['exists']&&!(0x0,w[_0x5882c1(0x698)])(_0x5aaaf0['jid'])&&!_0x5aaaf0['jid'][_0x5882c1(0x3d0)]('@broadcast'))throw new m(_0x5aaaf0);let _0x1999e3=_0x5aaaf0[_0x5882c1(0x2ec)];try{return await this[_0x5882c1(0x386)]['presenceSubscribe'](_0x1999e3),await this[_0x5882c1(0x386)][_0x5882c1(0x24a)](_0x3a31f7[_0x5882c1(0x1cd)],_0x1999e3),{'status':0xc8,'presence':_0x3a31f7['presence']};}catch(_0x840bcb){let _0x1c2edf=_0x5882c1(0x7dd),_0x180106=_0x840bcb instanceof Error?_0x840bcb[_0x5882c1(0x202)]:typeof _0x840bcb==_0x5882c1(0x328)?JSON[_0x5882c1(0x647)](_0x840bcb):_0x840bcb,_0x3decd9=_0x1c2edf+':\x20'+_0x180106;throw this[_0x5882c1(0x21e)][_0x5882c1(0x7a9)](this[_0x5882c1(0x629)]+'\x20('+this['instance'][_0x5882c1(0x3fd)]+'):\x20'+_0x3decd9),new m(_0x3decd9);}}async[a0_0x490cab(0x835)](_0x20a379,_0x4374bc,_0x41916a,_0x1b04e1=!0x0){const _0x4c8583=a0_0x490cab;let _0x43d157=await this['repository'][_0x4c8583(0x4a5)][_0x4c8583(0x2cd)]({'where':{'_id':_0x20a379}});if(!_0x43d157&&!_0x1b04e1)return;let _0x15ac07={'lastUpdate':Date[_0x4c8583(0x7f9)]()};if(_0x41916a||!_0x43d157?.[_0x4c8583(0x5ad)]||Date[_0x4c8583(0x7f9)]()-_0x43d157[_0x4c8583(0x5ad)]>0x18*0x3c*0x3c*0x3e8)try{let _0x565122=(await this[_0x4c8583(0x6a0)](_0x20a379))[_0x4c8583(0x21c)];_0x15ac07[_0x4c8583(0x5df)]=_0x565122;}catch(_0x1ce609){let _0x2669f1=_0x4c8583(0x7be),_0x113c7c=_0x1ce609 instanceof Error?_0x1ce609[_0x4c8583(0x202)]:typeof _0x1ce609=='object'?JSON[_0x4c8583(0x647)](_0x1ce609):_0x1ce609,_0x4986f0=_0x2669f1+':\x20'+_0x113c7c;throw this['logger'][_0x4c8583(0x7a9)](this[_0x4c8583(0x629)]+'\x20('+this[_0x4c8583(0x466)][_0x4c8583(0x3fd)]+'):\x20'+_0x4986f0),new m(_0x4986f0);}return _0x4374bc&&_0x43d157?.[_0x4c8583(0x149)]!==_0x4374bc&&(_0x15ac07[_0x4c8583(0x149)]=_0x4374bc),Object[_0x4c8583(0x66a)](_0x15ac07)[_0x4c8583(0x587)]>0x1&&(_0x43d157?await this[_0x4c8583(0x261)][_0x4c8583(0x4a5)][_0x4c8583(0x767)]({'where':{'_id':_0x20a379}},_0x15ac07):await this[_0x4c8583(0x261)]['cacheContact'][_0x4c8583(0x505)]([{'_id':_0x20a379,..._0x15ac07}]),_0x43d157={..._0x43d157,..._0x15ac07}),{'cachedContact':_0x43d157};}async['profilePicture'](_0x263573){const _0x4ffb1c=a0_0x490cab;let _0x3fb29c=this['createJid'](_0x263573);try{return{'wuid':_0x3fb29c,'profilePictureUrl':await this[_0x4ffb1c(0x386)][_0x4ffb1c(0x21c)](_0x3fb29c,_0x4ffb1c(0x30b))};}catch{return{'wuid':_0x3fb29c,'profilePictureUrl':null};}}async['sendMessageWithTyping'](_0x5d0f7b,_0x3abc10,_0x5f1ad7){const _0x32d823=a0_0x490cab;let _0x387d32;try{let _0x459273=(await this[_0x32d823(0x3d6)]({'numbers':[_0x5d0f7b]}))[0x0];if(!_0x459273['exists']&&!(0x0,w[_0x32d823(0x698)])(_0x459273[_0x32d823(0x2ec)])&&!_0x459273[_0x32d823(0x2ec)][_0x32d823(0x3d0)](_0x32d823(0x2fa)))throw new m(_0x459273);_0x387d32=_0x459273[_0x32d823(0x2ec)];}catch(_0x3e82af){_0x387d32=_0x5d0f7b,this[_0x32d823(0x21e)]['warn'](this[_0x32d823(0x629)]+'\x20('+this['instance'][_0x32d823(0x3fd)]+_0x32d823(0x502)+_0x3e82af['message']),this['logger'][_0x32d823(0x487)](this[_0x32d823(0x629)]+'\x20('+this[_0x32d823(0x466)][_0x32d823(0x3fd)]+_0x32d823(0x68e)+_0x387d32);}try{if(_0x387d32||(_0x387d32=_0x5d0f7b,this['logger'][_0x32d823(0x487)](this['instanceName']+'\x20('+this[_0x32d823(0x466)][_0x32d823(0x3fd)]+_0x32d823(0x3fb)+_0x387d32)),_0x5f1ad7||(_0x5f1ad7={}),_0x5f1ad7?.[_0x32d823(0x4a8)]){await this[_0x32d823(0x386)]['presenceSubscribe'](_0x387d32),await this[_0x32d823(0x386)][_0x32d823(0x24a)](_0x5f1ad7?.[_0x32d823(0x1cd)]??_0x32d823(0x2a8),_0x387d32);let _0x544a49=Math[_0x32d823(0x266)](_0x5f1ad7[_0x32d823(0x4a8)],0x2710);await(0x0,w['delay'])(_0x544a49),await this['client'][_0x32d823(0x24a)](_0x32d823(0x777),_0x387d32);}let _0x1d712c=_0x5f1ad7?.[_0x32d823(0x1f1)]!=!0x1?void 0x0:!0x1,_0x560c31;if(_0x5f1ad7?.['quoted']){let _0x1e9bed=_0x5f1ad7?.[_0x32d823(0x16f)],_0x1cd0cc=_0x1e9bed?.[_0x32d823(0x202)]?_0x1e9bed:await this[_0x32d823(0x75c)](_0x1e9bed[_0x32d823(0x1c2)],!0x0);if(!_0x1cd0cc)throw _0x32d823(0x34e);_0x560c31=_0x1cd0cc;}let _0x2e0620;if((0x0,w[_0x32d823(0x698)])(_0x387d32))try{let _0x5870ab=(await this[_0x32d823(0x261)][_0x32d823(0x745)][_0x32d823(0x2cd)]({'where':{'_id':_0x387d32}},this[_0x32d823(0x466)][_0x32d823(0x3fd)]))[_0x32d823(0x543)];if(!_0x5870ab)throw new J(_0x32d823(0x628));_0x5f1ad7?.[_0x32d823(0x77a)]&&(_0x5f1ad7[_0x32d823(0x77a)]?.[_0x32d823(0x3c2)]?_0x2e0620=_0x5870ab['participants'][_0x32d823(0x555)](_0x4e0168=>_0x4e0168['id']):_0x5f1ad7[_0x32d823(0x77a)]?.[_0x32d823(0x800)]?.['length']&&(_0x2e0620=_0x5f1ad7['mentions'][_0x32d823(0x800)][_0x32d823(0x555)](_0x3525b2=>{const _0x133b3c=_0x32d823;let _0x3f3a43=this[_0x133b3c(0x147)](_0x3525b2);return(0x0,w['isJidGroup'])(_0x3f3a43)?null:_0x3f3a43;})));}catch{throw new J(_0x32d823(0x628));}let _0xe09d97=await this[_0x32d823(0x261)][_0x32d823(0x745)]['findOne']({'where':{'_id':_0x387d32}},this['instance'][_0x32d823(0x3fd)]),_0x2df635=await((async()=>{const _0x4b6bb2=_0x32d823;let _0x15eb61={'quoted':_0x560c31,'ephemeralExpiration':_0xe09d97?.['ephemeralExpiration']??0x0};if(!_0x3abc10[_0x4b6bb2(0x70d)]&&!_0x3abc10[_0x4b6bb2(0x771)]&&!_0x3abc10[_0x4b6bb2(0x540)]&&!_0x3abc10[_0x4b6bb2(0x3d3)]&&_0x387d32!==_0x4b6bb2(0x7cd)&&!_0x3abc10[_0x4b6bb2(0x70d)])return await this[_0x4b6bb2(0x386)]['sendMessage'](_0x387d32,{'forward':{'key':{'remoteJid':this[_0x4b6bb2(0x466)][_0x4b6bb2(0x3fd)],'fromMe':!0x0},'message':_0x3abc10},'mentions':_0x2e0620},_0x15eb61);if(_0x3abc10['reactionMessage'])return await this[_0x4b6bb2(0x386)][_0x4b6bb2(0x40d)](_0x387d32,{'react':{'text':_0x3abc10[_0x4b6bb2(0x738)][_0x4b6bb2(0x120)],'key':_0x3abc10[_0x4b6bb2(0x738)]['key']}},_0x15eb61);if(_0x3abc10[_0x4b6bb2(0x3d3)]){let _0x4ddb31=_0x3abc10[_0x4b6bb2(0x3d3)];return _0x5f1ad7?.[_0x4b6bb2(0x6c2)]&&(_0x4ddb31=await this[_0x4b6bb2(0x839)](_0x4ddb31,_0x387d32)),await this['client'][_0x4b6bb2(0x40d)](_0x387d32,{'text':_0x4ddb31,'mentions':_0x2e0620,'linkPreview':_0x1d712c},_0x15eb61);}return _0x387d32==='status@broadcast'?await this[_0x4b6bb2(0x386)][_0x4b6bb2(0x40d)](_0x387d32,_0x3abc10[_0x4b6bb2(0x526)][_0x4b6bb2(0x135)],{'backgroundColor':_0x3abc10[_0x4b6bb2(0x526)][_0x4b6bb2(0x347)][_0x4b6bb2(0x70b)],'font':_0x3abc10[_0x4b6bb2(0x526)][_0x4b6bb2(0x347)][_0x4b6bb2(0x566)],'statusJidList':_0x3abc10[_0x4b6bb2(0x526)][_0x4b6bb2(0x347)]['statusJidList']}):await this[_0x4b6bb2(0x386)][_0x4b6bb2(0x40d)](_0x387d32,_0x3abc10,_0x15eb61);})()),_0xfe5f69=(0x0,w[_0x32d823(0x53b)])(_0x2df635[_0x32d823(0x202)]),_0x372fea=(0x0,w[_0x32d823(0x626)])(_0xfe5f69),{message_normalized:_0x136028}=this[_0x32d823(0x1d2)](_0xfe5f69,_0x372fea,null),_0x48d9e9={'_id':_0x2df635[_0x32d823(0x1c2)]['id'],'key':_0x2df635[_0x32d823(0x1c2)],'pushName':_0x2df635[_0x32d823(0x640)],'isGroup':_0x2df635[_0x32d823(0x1c2)]['remoteJid']['endsWith'](_0x32d823(0x6cf)),'profilePictureUrl':this['instance'][_0x32d823(0x21c)],'message':_0xfe5f69,'messageType':_0x372fea,'message_normalized':{'key':_0x2df635['key'],'pushName':_0x2df635[_0x32d823(0x640)],'messageTimestamp':_0x2df635[_0x32d823(0x80d)]&&_0x2df635[_0x32d823(0x80d)][_0x32d823(0x751)]()[_0x32d823(0x587)]<0xd?_0x2df635[_0x32d823(0x80d)]*0x3e8:_0x2df635[_0x32d823(0x80d)]||null,'source':(0x0,w[_0x32d823(0x7d9)])(_0x2df635['key']['id']),..._0x136028},'messageTimestamp':_0x2df635[_0x32d823(0x80d)]&&_0x2df635[_0x32d823(0x80d)]['toString']()[_0x32d823(0x587)]<0xd?_0x2df635[_0x32d823(0x80d)]*0x3e8:_0x2df635[_0x32d823(0x80d)]||null,'owner':this[_0x32d823(0x466)][_0x32d823(0x3fd)],'source':(0x0,w[_0x32d823(0x7d9)])(_0x2df635['key']['id'])};return this[_0x32d823(0x21e)][_0x32d823(0x487)](this[_0x32d823(0x629)]+'\x20('+this['instance'][_0x32d823(0x3fd)]+'):\x20enviado\x20para\x20['+_0x48d9e9[_0x32d823(0x1c2)]?.[_0x32d823(0x133)][_0x32d823(0x4d4)](_0x32d823(0x119),'')+_0x32d823(0x177)+_0x48d9e9[_0x32d823(0x77d)]+')'),_0x48d9e9[_0x32d823(0x821)]?.[_0x32d823(0x120)]&&this['logger'][_0x32d823(0x487)](_0x48d9e9['message_normalized']?.[_0x32d823(0x120)]),this[_0x32d823(0x6b3)](_0x32d823(0x322),_0x48d9e9),j(this[_0x32d823(0x629)],_0x32d823(0x4c5),{'message':_0x48d9e9}),this[_0x32d823(0x4ac)](this[_0x32d823(0x3ec)]['get'](_0x32d823(0x1da)),_0x48d9e9,'SEND_MESSAGE',_0xe09d97),await this[_0x32d823(0x261)][_0x32d823(0x202)][_0x32d823(0x505)]([_0x48d9e9],this[_0x32d823(0x466)]['wuid']),_0x2df635;}catch(_0xaec514){let _0x31f147=_0x32d823(0x20c)+_0x387d32,_0x54b731=_0xaec514 instanceof Error?_0xaec514['message']:typeof _0xaec514==_0x32d823(0x328)?JSON[_0x32d823(0x647)](_0xaec514):_0xaec514,_0x4407fc=_0x31f147+':\x20'+_0x54b731;throw this['logger'][_0x32d823(0x7a9)](this[_0x32d823(0x629)]+'\x20('+this[_0x32d823(0x466)][_0x32d823(0x3fd)]+'):\x20'+_0x4407fc),new m(_0x4407fc);}}get[a0_0x490cab(0x56e)](){const _0x53c025=a0_0x490cab;return this[_0x53c025(0x744)];}async[a0_0x490cab(0x59e)](_0x131b3d){const _0x43486d=a0_0x490cab;return await this[_0x43486d(0x436)](_0x131b3d[_0x43486d(0x7c9)],{'conversation':_0x131b3d[_0x43486d(0x59e)][_0x43486d(0x120)]},_0x131b3d?.[_0x43486d(0x611)]);}async[a0_0x490cab(0x4e1)](_0x5284f1){const _0x53db80=a0_0x490cab;if(!_0x5284f1[_0x53db80(0x5af)])throw new m(_0x53db80(0x615));if(!_0x5284f1['content'])throw new m(_0x53db80(0x58f));if(_0x5284f1['allContacts']){let _0x59379d=await this[_0x53db80(0x261)][_0x53db80(0x354)][_0x53db80(0x5f9)]({'where':{}},this[_0x53db80(0x466)][_0x53db80(0x3fd)]);if(!_0x59379d[_0x53db80(0x587)])throw new m(_0x53db80(0x1b5));_0x5284f1[_0x53db80(0x598)]=_0x59379d[_0x53db80(0x5f7)](_0x26b695=>_0x26b695[_0x53db80(0x640)])[_0x53db80(0x555)](_0x58fb1b=>_0x58fb1b[_0x53db80(0x215)]);}if(!_0x5284f1[_0x53db80(0x598)]?.[_0x53db80(0x587)]&&!_0x5284f1['allContacts'])throw new m(_0x53db80(0x3cb));if(_0x5284f1[_0x53db80(0x5af)]===_0x53db80(0x120)){if(!_0x5284f1[_0x53db80(0x70b)])throw new m('Background\x20color\x20is\x20required');if(!_0x5284f1[_0x53db80(0x566)])throw new m(_0x53db80(0x808));return{'content':{'text':_0x5284f1[_0x53db80(0x135)]},'option':{'backgroundColor':_0x5284f1[_0x53db80(0x70b)],'font':_0x5284f1[_0x53db80(0x566)],'statusJidList':_0x5284f1[_0x53db80(0x598)]}};}if(_0x5284f1['type']==='image')return{'content':{'image':{'url':_0x5284f1[_0x53db80(0x135)]},'caption':_0x5284f1[_0x53db80(0x2b8)]},'option':{'statusJidList':_0x5284f1[_0x53db80(0x598)]}};if(_0x5284f1[_0x53db80(0x5af)]==='video')return{'content':{'video':{'url':_0x5284f1[_0x53db80(0x135)]},'caption':_0x5284f1[_0x53db80(0x2b8)]},'option':{'statusJidList':_0x5284f1[_0x53db80(0x598)]}};if(_0x5284f1[_0x53db80(0x5af)]===_0x53db80(0x70d)){this[_0x53db80(0x21e)][_0x53db80(0x331)](this[_0x53db80(0x629)]+'\x20('+this[_0x53db80(0x466)][_0x53db80(0x3fd)]+_0x53db80(0x3f4)),this[_0x53db80(0x21e)][_0x53db80(0x331)](this[_0x53db80(0x629)]+'\x20('+this[_0x53db80(0x466)]['wuid']+_0x53db80(0x4a2));let _0x1536c9=await this['convertaudio'](_0x5284f1[_0x53db80(0x135)]);if(typeof _0x1536c9=='string'){this[_0x53db80(0x21e)][_0x53db80(0x331)](this[_0x53db80(0x629)]+'\x20('+this[_0x53db80(0x466)][_0x53db80(0x3fd)]+_0x53db80(0x40f));let _0x560476=L[_0x53db80(0x339)](_0x1536c9)[_0x53db80(0x751)](_0x53db80(0x3a1));return{'content':{'audio':Buffer[_0x53db80(0x3f5)](_0x560476,_0x53db80(0x3a1)),'ptt':!0x0,'mimetype':'audio/ogg'},'option':{'statusJidList':_0x5284f1[_0x53db80(0x598)]}};}else throw new x(_0x1536c9);}throw new m(_0x53db80(0x708));}async[a0_0x490cab(0x477)](_0x999c2e){const _0x2358b7=a0_0x490cab;return await this[_0x2358b7(0x436)]('status@broadcast',{'status':await this[_0x2358b7(0x4e1)](_0x999c2e[_0x2358b7(0x477)])});}async[a0_0x490cab(0x11b)](_0x43ba3d){const _0x3f51fd=a0_0x490cab;try{let _0xce73c=await(0x0,w[_0x3f51fd(0x64a)])({[_0x43ba3d['mediatype']]:(0x0,k[_0x3f51fd(0x313)])(_0x43ba3d[_0x3f51fd(0x286)])?{'url':_0x43ba3d[_0x3f51fd(0x286)]}:Buffer['from'](_0x43ba3d['media'],_0x3f51fd(0x3a1))},{'upload':this[_0x3f51fd(0x386)][_0x3f51fd(0x1ff)]}),_0x413b4b=_0x43ba3d[_0x3f51fd(0x1b2)]+_0x3f51fd(0x711);if(_0x43ba3d[_0x3f51fd(0x1b2)]===_0x3f51fd(0x5a8)&&!_0x43ba3d[_0x3f51fd(0x805)]){let _0x4fd2c0=new RegExp(/.*\/(.+?)\./)[_0x3f51fd(0x7b8)](_0x43ba3d[_0x3f51fd(0x286)]);_0x43ba3d[_0x3f51fd(0x805)]=_0x4fd2c0?_0x4fd2c0[0x1]:null;}let _0x5d2b56;return(0x0,k[_0x3f51fd(0x313)])(_0x43ba3d[_0x3f51fd(0x286)])?_0x5d2b56=(await Q['default'][_0x3f51fd(0x715)](_0x43ba3d[_0x3f51fd(0x286)],{'responseType':_0x3f51fd(0x55d)}))['headers'][_0x3f51fd(0x197)]:_0x5d2b56=(0x0,Di[_0x3f51fd(0x811)])(_0x43ba3d[_0x3f51fd(0x805)]),_0xce73c[_0x413b4b][_0x3f51fd(0x2b8)]=_0x43ba3d?.[_0x3f51fd(0x2b8)],_0xce73c[_0x413b4b]['mimetype']=_0x5d2b56,_0xce73c[_0x413b4b][_0x3f51fd(0x805)]=_0x43ba3d[_0x3f51fd(0x805)],_0x43ba3d[_0x3f51fd(0x1b2)]===_0x3f51fd(0x4bf)&&(_0xce73c[_0x413b4b][_0x3f51fd(0x548)]=Uint8Array[_0x3f51fd(0x3f5)]((0x0,Le[_0x3f51fd(0x339)])((0x0,U[_0x3f51fd(0x4c8)])(process[_0x3f51fd(0x5c2)](),_0x3f51fd(0x117)))),_0xce73c[_0x413b4b][_0x3f51fd(0x723)]=!0x1),(0x0,w[_0x3f51fd(0x4c2)])('',{[_0x413b4b]:{..._0xce73c[_0x413b4b]}},{'userJid':this[_0x3f51fd(0x466)][_0x3f51fd(0x3fd)]});}catch(_0x2b7c69){let _0x46e086=_0x3f51fd(0x4c3),_0x5730b3=_0x2b7c69 instanceof Error?_0x2b7c69['message']:typeof _0x2b7c69==_0x3f51fd(0x328)?JSON['stringify'](_0x2b7c69):_0x2b7c69,_0x1638d4=_0x46e086+':\x20'+_0x5730b3;throw this[_0x3f51fd(0x21e)]['error'](this['instanceName']+'\x20('+this[_0x3f51fd(0x466)][_0x3f51fd(0x3fd)]+_0x3f51fd(0x32f)+_0x1638d4),new x(_0x1638d4);}}async[a0_0x490cab(0x2c7)](_0x2c3e7a){const _0x2ecceb=a0_0x490cab;let _0x137c2d=await this[_0x2ecceb(0x11b)](_0x2c3e7a[_0x2ecceb(0x2c7)]);return await this[_0x2ecceb(0x436)](_0x2c3e7a[_0x2ecceb(0x7c9)],{..._0x137c2d[_0x2ecceb(0x202)]},_0x2c3e7a?.[_0x2ecceb(0x611)]);}async['convertToWebP'](_0x2bc54a,_0x4553c7){const _0x112978=a0_0x490cab;try{this[_0x112978(0x21e)][_0x112978(0x331)](this[_0x112978(0x629)]+'\x20('+this[_0x112978(0x466)][_0x112978(0x3fd)]+'):Converting\x20image\x20to\x20WebP\x20to\x20sticker');let _0x3bddd9,_0x5cd95e=_0x4553c7+'-'+new Date()['getTime']();this[_0x112978(0x21e)][_0x112978(0x331)](this[_0x112978(0x629)]+'\x20('+this[_0x112978(0x466)][_0x112978(0x3fd)]+'):Hash\x20to\x20image\x20name:\x20'+_0x5cd95e);let _0x45783f=''+(0x0,U[_0x112978(0x4c8)])(this[_0x112978(0x639)],_0x5cd95e+'.webp');if(this[_0x112978(0x21e)][_0x112978(0x331)](this[_0x112978(0x629)]+'\x20('+this[_0x112978(0x466)][_0x112978(0x3fd)]+_0x112978(0x374)+_0x45783f),(0x0,k[_0x112978(0x747)])(_0x2bc54a)){this[_0x112978(0x21e)]['verbose'](this[_0x112978(0x629)]+'\x20('+this[_0x112978(0x466)][_0x112978(0x3fd)]+_0x112978(0x546));let _0x467677=_0x2bc54a[_0x112978(0x4d4)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x5453c0=Buffer['from'](_0x467677,_0x112978(0x3a1));_0x3bddd9=''+(0x0,U['join'])(this['storePath'],_0x112978(0x1cc)+_0x5cd95e+_0x112978(0x12e)),this[_0x112978(0x21e)][_0x112978(0x331)](this[_0x112978(0x629)]+'\x20('+this[_0x112978(0x466)]['wuid']+_0x112978(0x675)+_0x3bddd9),await(0x0,qt['default'])(_0x5453c0)['toFile'](_0x3bddd9),this[_0x112978(0x21e)]['verbose'](this[_0x112978(0x629)]+'\x20('+this[_0x112978(0x466)]['wuid']+_0x112978(0x15d));}else{this[_0x112978(0x21e)][_0x112978(0x331)](this['instanceName']+'\x20('+this[_0x112978(0x466)][_0x112978(0x3fd)]+_0x112978(0x493));let _0x3d0b=new Date()[_0x112978(0x620)](),_0x11e8e8=_0x2bc54a+_0x112978(0x317)+_0x3d0b;this['logger'][_0x112978(0x331)](this['instanceName']+'\x20('+this[_0x112978(0x466)]['wuid']+'):including\x20timestamp\x20in\x20url:\x20'+_0x11e8e8);let _0xc958cc=await Q[_0x112978(0x73a)][_0x112978(0x715)](_0x11e8e8,{'responseType':'arraybuffer'});this[_0x112978(0x21e)][_0x112978(0x331)](this[_0x112978(0x629)]+'\x20('+this['instance'][_0x112978(0x3fd)]+'):Getting\x20image\x20from\x20url');let _0x4489e3=Buffer[_0x112978(0x3f5)](_0xc958cc[_0x112978(0x321)],_0x112978(0x37a));_0x3bddd9=''+(0x0,U['join'])(this[_0x112978(0x639)],_0x112978(0x1cc)+_0x5cd95e+_0x112978(0x12e)),this['logger'][_0x112978(0x331)](this['instanceName']+'\x20('+this['instance'][_0x112978(0x3fd)]+_0x112978(0x675)+_0x3bddd9),await(0x0,qt[_0x112978(0x73a)])(_0x4489e3)['toFile'](_0x3bddd9),this[_0x112978(0x21e)][_0x112978(0x331)](this[_0x112978(0x629)]+'\x20('+this['instance'][_0x112978(0x3fd)]+'):Image\x20created');}return await(0x0,qt[_0x112978(0x73a)])(_0x3bddd9)[_0x112978(0x7bf)]()[_0x112978(0x5f8)](_0x45783f),this[_0x112978(0x21e)][_0x112978(0x331)](this[_0x112978(0x629)]+'\x20('+this[_0x112978(0x466)]['wuid']+_0x112978(0x3bb)),L['unlinkSync'](_0x3bddd9),this[_0x112978(0x21e)]['verbose'](this[_0x112978(0x629)]+'\x20('+this[_0x112978(0x466)]['wuid']+_0x112978(0x6d5)),_0x45783f;}catch(_0x397c08){let _0x2e6684=_0x112978(0x6ad),_0x5a8ded=_0x397c08 instanceof Error?_0x397c08[_0x112978(0x202)]:typeof _0x397c08==_0x112978(0x328)?JSON[_0x112978(0x647)](_0x397c08):_0x397c08,_0x33e3fb=_0x2e6684+':\x20'+_0x5a8ded;this['logger'][_0x112978(0x7a9)](this['instanceName']+'\x20('+this[_0x112978(0x466)][_0x112978(0x3fd)]+'):\x20'+_0x33e3fb);}}async[a0_0x490cab(0x1ba)](_0xb99879){const _0x1e741f=a0_0x490cab;let _0x526160=await this[_0x1e741f(0x30e)](_0xb99879[_0x1e741f(0x652)][_0x1e741f(0x30b)],_0xb99879[_0x1e741f(0x7c9)]),_0x42e279=await this['sendMessageWithTyping'](_0xb99879[_0x1e741f(0x7c9)],{'sticker':{'url':_0x526160}},_0xb99879?.[_0x1e741f(0x611)]);return L[_0x1e741f(0x265)](_0x526160),this[_0x1e741f(0x21e)][_0x1e741f(0x331)](this['instanceName']+'\x20('+this[_0x1e741f(0x466)][_0x1e741f(0x3fd)]+_0x1e741f(0x7e6)),_0x42e279;}async[a0_0x490cab(0x61d)](_0xebd9ef){const _0x24d540=a0_0x490cab;if(this['logger'][_0x24d540(0x331)](this[_0x24d540(0x629)]+'\x20('+this[_0x24d540(0x466)][_0x24d540(0x3fd)]+_0x24d540(0x593)),!_0xebd9ef[_0x24d540(0x611)]?.[_0x24d540(0x1eb)]&&_0xebd9ef[_0x24d540(0x611)]?.[_0x24d540(0x1eb)]!==!0x1&&(_0xebd9ef[_0x24d540(0x611)][_0x24d540(0x1eb)]=!0x0),_0xebd9ef[_0x24d540(0x611)]?.[_0x24d540(0x1eb)]){let _0x3ff613=await this['convertaudio'](_0xebd9ef['audioMessage']['audio']);if(typeof _0x3ff613==_0x24d540(0x47c)){let _0x5cc779=L[_0x24d540(0x339)](_0x3ff613)[_0x24d540(0x751)](_0x24d540(0x3a1));return this[_0x24d540(0x436)](_0xebd9ef[_0x24d540(0x7c9)],{'audio':Buffer['from'](_0x5cc779,_0x24d540(0x3a1)),'ptt':!0x0,'mimetype':_0x24d540(0x201)},{'presence':'recording','delay':_0xebd9ef?.[_0x24d540(0x611)]?.['delay']});}else throw new x(_0x3ff613);}return await this[_0x24d540(0x436)](_0xebd9ef[_0x24d540(0x7c9)],{'audio':(0x0,k[_0x24d540(0x313)])(_0xebd9ef[_0x24d540(0x5eb)][_0x24d540(0x70d)])?{'url':_0xebd9ef[_0x24d540(0x5eb)]['audio']}:Buffer[_0x24d540(0x3f5)](_0xebd9ef[_0x24d540(0x5eb)]['audio'],_0x24d540(0x3a1)),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':_0x24d540(0x1a2),'delay':_0xebd9ef?.[_0x24d540(0x611)]?.[_0x24d540(0x4a8)]});}async[a0_0x490cab(0x65f)](_0x56eca0){const _0x354bfa=a0_0x490cab;this['logger'][_0x354bfa(0x331)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x354bfa(0x4a2));let _0x3d46a7=(0x0,k[_0x354bfa(0x313)])(_0x56eca0)?(0x0,Vt['createHash'])(_0x354bfa(0x337))[_0x354bfa(0x767)](_0x56eca0)[_0x354bfa(0x83f)]('hex'):(0x0,Vt[_0x354bfa(0x43d)])('sha256')[_0x354bfa(0x767)](_0x56eca0)[_0x354bfa(0x83f)](_0x354bfa(0x5fc)),_0x57923b=''+(0x0,U[_0x354bfa(0x4c8)])(this['storePath'],_0x3d46a7+_0x354bfa(0x730));if(L['existsSync'](_0x57923b))return this['logger'][_0x354bfa(0x331)](this[_0x354bfa(0x629)]+'\x20('+this[_0x354bfa(0x466)][_0x354bfa(0x3fd)]+_0x354bfa(0x7bd)),_0x57923b;let _0x4ed26b=''+(0x0,U['join'])(this[_0x354bfa(0x639)],_0x354bfa(0x1cc)+(0x0,Y['v4'])()+_0x354bfa(0x123));if((0x0,k['isURL'])(_0x56eca0)){let _0x39bad7=new Date()[_0x354bfa(0x620)](),_0x45f3cb=_0x56eca0+_0x354bfa(0x317)+_0x39bad7,_0x5ac8d0=await Q['default'][_0x354bfa(0x715)](_0x45f3cb,{'responseType':_0x354bfa(0x55d)});L[_0x354bfa(0x68b)](_0x4ed26b,_0x5ac8d0[_0x354bfa(0x321)]);}else{let _0x47a05d=Buffer[_0x354bfa(0x3f5)](_0x56eca0,_0x354bfa(0x3a1));L[_0x354bfa(0x68b)](_0x4ed26b,_0x47a05d);}return new Promise((_0x560397,_0x2e2016)=>{const _0x19a5fe=_0x354bfa;(0x0,Fe[_0x19a5fe(0x7b8)])(Ds[_0x19a5fe(0x73a)][_0x19a5fe(0x57e)]+_0x19a5fe(0x384)+_0x4ed26b+_0x19a5fe(0x1e8)+_0x57923b+_0x19a5fe(0x722),_0x45743f=>{const _0x1a65e1=_0x19a5fe;if(L[_0x1a65e1(0x265)](_0x4ed26b),_0x45743f){this[_0x1a65e1(0x21e)][_0x1a65e1(0x331)](this[_0x1a65e1(0x629)]+'\x20('+this['instance'][_0x1a65e1(0x3fd)]+_0x1a65e1(0x293)),_0x2e2016(_0x45743f);return;}this['logger']['verbose'](this[_0x1a65e1(0x629)]+'\x20('+this[_0x1a65e1(0x466)]['wuid']+_0x1a65e1(0x61b)),_0x560397(_0x57923b);});});}async[a0_0x490cab(0x44f)](_0x121b4a){const _0x532cee=a0_0x490cab;this[_0x532cee(0x21e)][_0x532cee(0x331)](this[_0x532cee(0x629)]+'\x20('+this[_0x532cee(0x466)][_0x532cee(0x3fd)]+_0x532cee(0x4a2));let _0x8c84cf=(0x0,Vt[_0x532cee(0x43d)])('sha256')[_0x532cee(0x767)](_0x121b4a)['digest']('hex'),_0x48a366=''+(0x0,U[_0x532cee(0x4c8)])(this['storePath'],_0x8c84cf+_0x532cee(0x123));if(L['existsSync'](_0x48a366))return this['logger'][_0x532cee(0x331)](this[_0x532cee(0x629)]+'\x20('+this[_0x532cee(0x466)][_0x532cee(0x3fd)]+_0x532cee(0x7bd)),U[_0x532cee(0x73a)][_0x532cee(0x83e)](_0x48a366);let _0x1199e3=''+(0x0,U[_0x532cee(0x4c8)])(this[_0x532cee(0x639)],_0x532cee(0x1cc)+_0x8c84cf+_0x532cee(0x730));if((0x0,k[_0x532cee(0x313)])(_0x121b4a)){let _0x155b18=new Date()['getTime'](),_0x5681cf=_0x121b4a+_0x532cee(0x317)+_0x155b18,_0x4f523b=await Q['default'][_0x532cee(0x715)](_0x5681cf,{'responseType':_0x532cee(0x55d)});L[_0x532cee(0x68b)](_0x1199e3,_0x4f523b['data']);}else{let _0x4386ab=Buffer[_0x532cee(0x3f5)](_0x121b4a,'base64');L['writeFileSync'](_0x1199e3,_0x4386ab);}return new Promise((_0x34ccc4,_0x509227)=>{const _0x12bced=_0x532cee;(0x0,Fe['exec'])(Ds[_0x12bced(0x73a)][_0x12bced(0x57e)]+'\x20-i\x20'+_0x1199e3+_0x12bced(0x594)+_0x48a366+_0x12bced(0x722),_0x9bdf72=>{const _0x3f3cda=_0x12bced;if(L[_0x3f3cda(0x265)](_0x1199e3),_0x9bdf72){this['logger']['verbose'](this[_0x3f3cda(0x629)]+'\x20('+this[_0x3f3cda(0x466)][_0x3f3cda(0x3fd)]+_0x3f3cda(0x293)),_0x509227(_0x9bdf72);return;}this['logger'][_0x3f3cda(0x331)](this[_0x3f3cda(0x629)]+'\x20('+this[_0x3f3cda(0x466)][_0x3f3cda(0x3fd)]+_0x3f3cda(0x61b)),_0x34ccc4(U[_0x3f3cda(0x73a)][_0x3f3cda(0x83e)](_0x48a366));});});}async['buttonMessage'](_0x955bdc){const _0x21e40a=a0_0x490cab;let _0x12ecdb={},_0x2fb618='TEXT';if(_0x955bdc[_0x21e40a(0x353)]?.[_0x21e40a(0x2c7)]){_0x2fb618=_0x955bdc[_0x21e40a(0x353)]['mediaMessage']?.['mediatype'][_0x21e40a(0x551)]()??_0x21e40a(0x688),_0x12ecdb[_0x21e40a(0x355)]=_0x2fb618[_0x21e40a(0x637)]()+'Message';let _0x1d238d=await this[_0x21e40a(0x11b)](_0x955bdc[_0x21e40a(0x353)][_0x21e40a(0x2c7)]);_0x12ecdb[_0x21e40a(0x202)]=_0x1d238d['message'][_0x12ecdb[_0x21e40a(0x355)]],_0x12ecdb[_0x21e40a(0x1f6)]='*'+_0x955bdc['buttonMessage'][_0x21e40a(0x256)]+'*\x0a\x0a'+_0x955bdc[_0x21e40a(0x353)][_0x21e40a(0x41a)];}let _0x3a10b2={'text':_0x955bdc[_0x21e40a(0x353)][_0x21e40a(0x648)][_0x21e40a(0x555)](_0x125f0d=>_0x125f0d[_0x21e40a(0x802)]),'ids':_0x955bdc[_0x21e40a(0x353)][_0x21e40a(0x648)][_0x21e40a(0x555)](_0x4e4acf=>_0x4e4acf[_0x21e40a(0x2af)])};if(!(0x0,k[_0x21e40a(0x4ab)])(_0x3a10b2['text'])||!(0x0,k[_0x21e40a(0x4ab)])(_0x3a10b2[_0x21e40a(0x561)]))throw new m(_0x21e40a(0x456),_0x21e40a(0x539));return await this[_0x21e40a(0x436)](_0x955bdc[_0x21e40a(0x7c9)],{'buttonsMessage':{'text':_0x12ecdb?.[_0x21e40a(0x355)]?void 0x0:_0x955bdc[_0x21e40a(0x353)][_0x21e40a(0x256)],'contentText':_0x12ecdb?.[_0x21e40a(0x1f6)]??_0x955bdc[_0x21e40a(0x353)][_0x21e40a(0x41a)],'footerText':_0x955bdc[_0x21e40a(0x353)]?.['footerText'],'buttons':_0x955bdc['buttonMessage'][_0x21e40a(0x648)][_0x21e40a(0x555)](_0x541cd4=>({'buttonText':{'displayText':_0x541cd4[_0x21e40a(0x802)]},'buttonId':_0x541cd4[_0x21e40a(0x2af)],'type':0x1})),'headerType':w[_0x21e40a(0x516)][_0x21e40a(0x711)][_0x21e40a(0x39c)][_0x21e40a(0x55b)][_0x2fb618],[_0x12ecdb?.[_0x21e40a(0x355)]]:_0x12ecdb?.[_0x21e40a(0x202)]}},_0x955bdc?.['options']);}async['locationMessage'](_0x5aa12a){const _0x592c85=a0_0x490cab;return await this[_0x592c85(0x436)](_0x5aa12a[_0x592c85(0x7c9)],{'locationMessage':{'degreesLatitude':_0x5aa12a['locationMessage'][_0x592c85(0x22a)],'degreesLongitude':_0x5aa12a[_0x592c85(0x6d1)][_0x592c85(0x685)],'name':_0x5aa12a[_0x592c85(0x6d1)]?.[_0x592c85(0x149)],'address':_0x5aa12a[_0x592c85(0x6d1)]?.['address']}},_0x5aa12a?.['options']);}async['contactMessage'](_0x56467b){const _0x3fc045=a0_0x490cab;let _0xa2fdad={},_0x16468a=async _0x427402=>{const _0xa5cd6f=a0_0xe58b;let _0x2f0ada='BEGIN:VCARD\x0aVERSION:3.0\x0aN:'+_0x427402['fullName']+_0xa5cd6f(0x25b)+_0x427402['fullName']+'\x0a';_0x427402[_0xa5cd6f(0x394)]&&(_0x2f0ada+=_0xa5cd6f(0x2f8)+_0x427402[_0xa5cd6f(0x394)]+';\x0a'),_0x427402[_0xa5cd6f(0x5c9)]&&(_0x2f0ada+=_0xa5cd6f(0x827)+_0x427402[_0xa5cd6f(0x5c9)]+'\x0a'),_0x427402[_0xa5cd6f(0x789)]&&(_0x2f0ada+='URL:'+_0x427402[_0xa5cd6f(0x789)]+'\x0a');let _0x4b3627='',_0x5e29b5=0x1;if(_0x427402[_0xa5cd6f(0x3cf)]){let _0x581a91=_0x427402[_0xa5cd6f(0x3cf)][_0xa5cd6f(0x6e6)]('|');for(let _0x46037e of _0x581a91){let _0x1c1a6a=await this['whatsappNumber']({'numbers':[_0x46037e]}),_0x247346=(_0x1c1a6a[_0xa5cd6f(0x587)]>0x0?_0x1c1a6a[0x0][_0xa5cd6f(0x2ec)]:this['createJid'](_0x46037e))['replace'](_0xa5cd6f(0x119),'');_0x4b3627+='item'+_0x5e29b5+_0xa5cd6f(0x67f)+_0x247346+':'+_0x46037e+_0xa5cd6f(0x50c)+_0x5e29b5+_0xa5cd6f(0x3cc),_0x5e29b5++;}}return _0x2f0ada+=_0x4b3627+_0xa5cd6f(0x3c4),_0x2f0ada;};return _0x56467b[_0x3fc045(0x143)][_0x3fc045(0x587)]===0x1?_0xa2fdad[_0x3fc045(0x143)]={'displayName':_0x56467b[_0x3fc045(0x143)][0x0][_0x3fc045(0x296)],'vcard':await _0x16468a(_0x56467b[_0x3fc045(0x143)][0x0])}:_0xa2fdad[_0x3fc045(0x5a6)]={'displayName':_0x56467b['contactMessage'][_0x3fc045(0x587)]+_0x3fc045(0x5e0),'contacts':await Promise[_0x3fc045(0x6fc)](_0x56467b['contactMessage'][_0x3fc045(0x555)](async _0x211fe3=>({'displayName':_0x211fe3[_0x3fc045(0x296)],'vcard':await _0x16468a(_0x211fe3)})))},await this[_0x3fc045(0x436)](_0x56467b[_0x3fc045(0x7c9)],{..._0xa2fdad},_0x56467b?.[_0x3fc045(0x611)]);}async[a0_0x490cab(0x738)](_0x4d72ce){const _0x3c0176=a0_0x490cab;return await this[_0x3c0176(0x436)](_0x4d72ce['reactionMessage'][_0x3c0176(0x1c2)][_0x3c0176(0x133)],{'reactionMessage':{'key':_0x4d72ce[_0x3c0176(0x738)][_0x3c0176(0x1c2)],'text':_0x4d72ce[_0x3c0176(0x738)]['reaction']}});}async[a0_0x490cab(0x3d6)](_0x16523f){const _0x26ac5b=a0_0x490cab;let _0x220e44=[];for await(let _0x1209f4 of _0x16523f['numbers']){let _0x525da7=this[_0x26ac5b(0x147)](_0x1209f4),_0x3030fc=!0x1;try{if((0x0,w[_0x26ac5b(0x698)])(_0x525da7)){let _0x56e10c=(await this[_0x26ac5b(0x261)][_0x26ac5b(0x745)][_0x26ac5b(0x2cd)]({'where':{'_id':_0x525da7}},this['instance'][_0x26ac5b(0x3fd)]))[_0x26ac5b(0x543)];_0x56e10c?(_0x3030fc=!0x0,_0x220e44['push'](new ue(_0x56e10c['id'],_0x3030fc,_0x56e10c?.[_0x26ac5b(0x278)]))):(_0x56e10c=await this[_0x26ac5b(0x567)]({'groupJid':_0x525da7},'inner'),_0x220e44[_0x26ac5b(0x3de)](new ue(_0x56e10c['id'],!!_0x56e10c?.['id'],_0x56e10c?.[_0x26ac5b(0x278)])));}else{if(_0x525da7[_0x26ac5b(0x3d0)](_0x26ac5b(0x2fa)))_0x220e44['push'](new ue(_0x525da7,!0x0));else{let _0x410f82=(await this[_0x26ac5b(0x386)][_0x26ac5b(0x2a3)](_0x525da7))[0x0];_0x220e44[_0x26ac5b(0x3de)](new ue(_0x410f82['jid'],_0x410f82[_0x26ac5b(0x232)]));}}}catch{(0x0,w['isJidGroup'])(_0x525da7)||await this[_0x26ac5b(0x727)](_0x525da7),_0x220e44[_0x26ac5b(0x3de)](new ue(_0x1209f4,!0x1));}}return _0x220e44;}async['deleteImportedChat'](_0x2c342a){const _0x37e144=a0_0x490cab;try{await this['repository'][_0x37e144(0x745)][_0x37e144(0x2cd)]({'where':{'_id':_0x2c342a,'imported':!0x0}},this['instance'][_0x37e144(0x3fd)])&&(await this['repository'][_0x37e144(0x745)][_0x37e144(0x6f0)](_0x2c342a,this[_0x37e144(0x466)][_0x37e144(0x3fd)]),this[_0x37e144(0x21e)]['info']('Chat\x20com\x20ID\x20'+_0x2c342a+_0x37e144(0x2b6)));}catch(_0x3003b6){let _0x4b978e='Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat',_0x5baeaf=_0x3003b6 instanceof Error?_0x3003b6['message']:typeof _0x3003b6=='object'?JSON[_0x37e144(0x647)](_0x3003b6):_0x3003b6,_0x5b5de1=_0x4b978e+':\x20'+_0x5baeaf;this[_0x37e144(0x21e)]['error'](this[_0x37e144(0x629)]+'\x20('+this[_0x37e144(0x466)][_0x37e144(0x3fd)]+'):\x20'+_0x5b5de1);}}async[a0_0x490cab(0x530)](_0x137e9e){const _0xad8839=a0_0x490cab;try{let _0x4b959b=_0x137e9e[_0xad8839(0x455)][_0xad8839(0x5f7)](_0x7700f=>(0x0,w[_0xad8839(0x698)])(_0x7700f[_0xad8839(0x133)])||(0x0,w[_0xad8839(0x46d)])(_0x7700f['remoteJid']))[_0xad8839(0x555)](_0x7d160e=>({'remoteJid':_0x7d160e[_0xad8839(0x133)],'fromMe':_0x7d160e[_0xad8839(0x54e)],'id':_0x7d160e['id']}));await this[_0xad8839(0x386)][_0xad8839(0x455)](_0x4b959b);let _0x16f27e=_0x4b959b[_0xad8839(0x555)](_0x45e7f6=>this['updateMessage'](_0x45e7f6,{'status':_0xad8839(0x282),'owner':this[_0xad8839(0x466)][_0xad8839(0x3fd)]})),_0x1f9805=_0x4b959b[_0xad8839(0x555)](_0x265b92=>this['repository']['chat']['updateOne']({'where':{'_id':_0x265b92[_0xad8839(0x133)]}},{'unreadcount':0x0},this[_0xad8839(0x466)][_0xad8839(0x3fd)])),[_0x32c768,_0x7c1b3f]=await Promise[_0xad8839(0x6fc)]([Promise[_0xad8839(0x6fc)](_0x16f27e),Promise[_0xad8839(0x6fc)](_0x1f9805)]);return _0x7c1b3f[_0xad8839(0x5f7)](_0x469493=>_0x469493!==null)[_0xad8839(0x5aa)](_0x4c8fd9=>{const _0x10d26c=_0xad8839;j(this[_0x10d26c(0x629)],_0x10d26c(0x6e8),{'chat':_0x4c8fd9});}),{'message':_0xad8839(0x316),'read':'success'};}catch(_0x13d2db){let _0x28eb10=_0xad8839(0x217),_0x52f3d2=_0x13d2db instanceof Error?_0x13d2db[_0xad8839(0x202)]:typeof _0x13d2db==_0xad8839(0x328)?JSON[_0xad8839(0x647)](_0x13d2db):_0x13d2db,_0x1378af=_0x28eb10+':\x20'+_0x52f3d2;throw this[_0xad8839(0x21e)][_0xad8839(0x7a9)](this[_0xad8839(0x629)]+'\x20('+this['instance'][_0xad8839(0x3fd)]+_0xad8839(0x32f)+_0x1378af),new x(_0x1378af);}}async[a0_0x490cab(0x5e4)](_0x2179c7){const _0x35859f=a0_0x490cab;let _0x413732={'where':{'key':{'remoteJid':_0x2179c7}},'limit':0x1},_0x4f5e94=await this[_0x35859f(0x726)](_0x413732);return _0x4f5e94||(this[_0x35859f(0x21e)][_0x35859f(0x7a9)](_0x35859f(0x2b5)+_0x2179c7),null);}async[a0_0x490cab(0x249)](_0x3b61fd){const _0xadfa3f=a0_0x490cab;this[_0xadfa3f(0x21e)][_0xadfa3f(0x331)](this[_0xadfa3f(0x629)]+'\x20('+this['instance'][_0xadfa3f(0x3fd)]+_0xadfa3f(0x58d));try{let _0x510216=_0x3b61fd[_0xadfa3f(0x122)],_0x1741aa=_0x3b61fd[_0xadfa3f(0x745)];if(!_0x510216&&_0x1741aa?_0x510216=await this[_0xadfa3f(0x5e4)](_0x1741aa):(_0x510216=_0x3b61fd[_0xadfa3f(0x122)],_0x510216[_0xadfa3f(0x80d)]=_0x510216?.[_0xadfa3f(0x80d)]??Date[_0xadfa3f(0x7f9)](),_0x1741aa=_0x510216?.[_0xadfa3f(0x1c2)]?.['remoteJid']),!_0x510216||Object[_0xadfa3f(0x66a)](_0x510216)[_0xadfa3f(0x587)]===0x0)throw new J('Last\x20message\x20not\x20found');this['logger'][_0xadfa3f(0x331)](this[_0xadfa3f(0x629)]+'\x20('+this[_0xadfa3f(0x466)][_0xadfa3f(0x3fd)]+_0xadfa3f(0x397)+_0x1741aa);try{await this[_0xadfa3f(0x386)][_0xadfa3f(0x47b)]({'archive':_0x3b61fd['archive'],'lastMessages':[_0x510216]},this[_0xadfa3f(0x147)](_0x1741aa));}catch(_0x5036f5){let _0x564c21=_0xadfa3f(0x2b2)+_0x1741aa,_0x588603=_0x5036f5 instanceof Error?_0x5036f5[_0xadfa3f(0x202)]:typeof _0x5036f5==_0xadfa3f(0x328)?JSON[_0xadfa3f(0x647)](_0x5036f5):_0x5036f5,_0x499c91=_0x564c21+':\x20'+_0x588603;this[_0xadfa3f(0x21e)][_0xadfa3f(0x7a9)](this[_0xadfa3f(0x629)]+'\x20('+this[_0xadfa3f(0x466)]['wuid']+_0xadfa3f(0x32f)+_0x499c91);}this[_0xadfa3f(0x21e)][_0xadfa3f(0x331)](this[_0xadfa3f(0x629)]+'\x20('+this[_0xadfa3f(0x466)]['wuid']+_0xadfa3f(0x130)+_0x1741aa);let _0xfd22f1=await this[_0xadfa3f(0x261)][_0xadfa3f(0x745)]['updateOne']({'where':{'_id':_0x510216?.[_0xadfa3f(0x1c2)]?.['remoteJid']}},{'archived':_0x3b61fd[_0xadfa3f(0x6d2)]},this[_0xadfa3f(0x466)]['wuid']);return _0xfd22f1?(this[_0xadfa3f(0x21e)]['verbose'](this[_0xadfa3f(0x629)]+'\x20('+this['instance'][_0xadfa3f(0x3fd)]+_0xadfa3f(0x47a)+JSON['stringify'](_0xfd22f1)),j(this[_0xadfa3f(0x629)],_0xadfa3f(0x6e8),{'chat':_0xfd22f1})):this[_0xadfa3f(0x21e)]['error'](this['instanceName']+'\x20('+this['instance'][_0xadfa3f(0x3fd)]+_0xadfa3f(0x63c)+_0x1741aa),{'chatId':_0x1741aa,'archived':_0x3b61fd[_0xadfa3f(0x6d2)]};}catch(_0xc2d180){let _0x87927a='Erro\x20ao\x20arquivar\x20chat',_0x138fa3=_0xc2d180 instanceof Error?_0xc2d180[_0xadfa3f(0x202)]:typeof _0xc2d180==_0xadfa3f(0x328)?JSON[_0xadfa3f(0x647)](_0xc2d180):_0xc2d180,_0x1c9a49=_0x87927a+':\x20'+_0x138fa3;throw this[_0xadfa3f(0x21e)][_0xadfa3f(0x7a9)](this['instanceName']+'\x20('+this[_0xadfa3f(0x466)][_0xadfa3f(0x3fd)]+_0xadfa3f(0x32f)+_0x1c9a49),new x(_0x1c9a49);}}async['deleteChat'](_0x1022d){const _0x4a36c7=a0_0x490cab;this['logger'][_0x4a36c7(0x331)](this[_0x4a36c7(0x629)]+'\x20('+this[_0x4a36c7(0x466)][_0x4a36c7(0x3fd)]+_0x4a36c7(0x418));try{let _0x528acd=await this['getLastMessage'](_0x1022d);if(!_0x528acd||Object[_0x4a36c7(0x66a)](_0x528acd)[_0x4a36c7(0x587)]===0x0)throw new J(_0x4a36c7(0x48f));let _0x1f0b8a=_0x528acd[0x0];this['logger'][_0x4a36c7(0x331)](this['instanceName']+'\x20('+this[_0x4a36c7(0x466)]['wuid']+_0x4a36c7(0x77f)+_0x1022d);try{await this[_0x4a36c7(0x386)][_0x4a36c7(0x47b)]({'delete':!0x0,'lastMessages':[{'key':_0x1f0b8a[_0x4a36c7(0x1c2)],'messageTimestamp':_0x1f0b8a['messageTimestamp']}]},this[_0x4a36c7(0x147)](_0x1022d));}catch(_0x4e9143){this[_0x4a36c7(0x21e)][_0x4a36c7(0x7a9)]('Error\x20in\x20chatModify\x20for\x20number\x20'+_0x1022d+':\x20'+_0x4e9143['toString']());}this[_0x4a36c7(0x21e)][_0x4a36c7(0x331)](this[_0x4a36c7(0x629)]+'\x20('+this[_0x4a36c7(0x466)]['wuid']+_0x4a36c7(0x130)+_0x1022d);return;}catch(_0x2e7eab){throw this['logger'][_0x4a36c7(0x7a9)](this[_0x4a36c7(0x629)]+'\x20('+this[_0x4a36c7(0x466)]['wuid']+'):Error\x20occurred\x20while\x20archiving\x20chat:\x20'+_0x2e7eab[_0x4a36c7(0x751)]()),new x({'archived':!0x1,'message':['An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.',_0x2e7eab[_0x4a36c7(0x751)]()]});}}async[a0_0x490cab(0x5fa)](_0x24f42a){const _0x2fde04=a0_0x490cab;try{let _0x2d1e03=await this[_0x2fde04(0x386)][_0x2fde04(0x40d)](_0x24f42a[_0x2fde04(0x133)],{'delete':_0x24f42a});try{let _0x53bc03=await this[_0x2fde04(0x181)](_0x24f42a,{'status':_0x2fde04(0x16c),'owner':this[_0x2fde04(0x466)][_0x2fde04(0x3fd)]});this[_0x2fde04(0x21e)]['verbose'](this[_0x2fde04(0x629)]+'\x20('+this['instance'][_0x2fde04(0x3fd)]+_0x2fde04(0x114)+_0x53bc03);}catch(_0x7a9dbf){this['logger']['error']('Error\x20updating\x20message\x20status:'+_0x7a9dbf);}return _0x2d1e03;}catch(_0x5d74c4){throw new x('Error\x20while\x20deleting\x20message\x20for\x20everyone',_0x5d74c4?.['toString']());}}async['getBase64FromMediaMessage'](_0x2cadde){const _0xad91d7=a0_0x490cab;try{let _0x581d8f=_0x2cadde?.[_0xad91d7(0x202)]?_0x2cadde:await this[_0xad91d7(0x75c)](_0x2cadde[_0xad91d7(0x1c2)],!0x0);for(let _0x4c54c5 of $a)_0x581d8f[_0xad91d7(0x202)][_0x4c54c5]&&(_0x581d8f[_0xad91d7(0x202)]=_0x581d8f[_0xad91d7(0x202)][_0x4c54c5][_0xad91d7(0x202)]);let _0x2e5485,_0x510674;for(let _0x66b03c of Na)if(_0x2e5485=_0x581d8f[_0xad91d7(0x202)][_0x66b03c],_0x2e5485){_0x510674=_0x66b03c;break;}if(!_0x2e5485)throw _0xad91d7(0x666);typeof _0x2e5485['mediaKey']==_0xad91d7(0x328)&&(_0x581d8f[_0xad91d7(0x202)]=JSON['parse'](JSON[_0xad91d7(0x647)](_0x581d8f[_0xad91d7(0x202)])));let _0x2b2a3d=await(0x0,w[_0xad91d7(0x498)])({'key':_0x581d8f?.[_0xad91d7(0x1c2)],'message':_0x581d8f?.[_0xad91d7(0x202)]},_0xad91d7(0x415),{},{'logger':(0x0,Jt[_0xad91d7(0x73a)])({'level':'silent'}),'reuploadRequest':this['client']['updateMediaMessage']});if(!(_0x2b2a3d instanceof Buffer))throw new Error(_0xad91d7(0x12a));let _0x45379e=this['configService']['get'](_0xad91d7(0x1da)),_0x52d839,_0x37587c;if(_0x2e5485[_0xad91d7(0x805)])_0x52d839=_0x2e5485[_0xad91d7(0x805)];else{let _0x4e1615=_0x2e5485[_0xad91d7(0x178)]?.[_0xad91d7(0x57d)](/\/(\w+)/),_0x5f48e5=_0x4e1615?_0x4e1615[0x1]:null;if(!_0x5f48e5)throw new Error('File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message');_0x52d839=(0x0,Y['v4'])()+'.'+_0x5f48e5;}_0x510674===_0xad91d7(0x5eb)?_0x37587c='/media/'+await this[_0xad91d7(0x44f)](_0x2b2a3d[_0xad91d7(0x751)](_0xad91d7(0x3a1))):(await this['saveMediaToFile'](_0x2b2a3d,_0x52d839),_0x37587c='/media/'+_0x52d839);let _0x294fbd=this[_0xad91d7(0x3ec)][_0xad91d7(0x715)](_0xad91d7(0x164))['URL'];if(!_0x294fbd){let _0x148744=this['configService'][_0xad91d7(0x715)](_0xad91d7(0x41e));_0x294fbd='https://'+(_0x148744&&_0x148744['FULLCHAIN'][_0xad91d7(0x6e6)]('/')[0x4]);}_0x37587c=''+_0x294fbd+_0x37587c;let _0x323c75=0xc*0x3c*0x3c*0x3e8,_0x3c0b47={'where':{'_id':_0x581d8f[_0xad91d7(0x1c2)]['id']}},_0x443930={'message_normalized.fileUrl':_0x37587c,'message_normalized.expires_fileUrl':Date[_0xad91d7(0x7f9)]()+_0x323c75};try{let _0xe45f35=await this['repository'][_0xad91d7(0x202)]['update'](_0x3c0b47,_0x443930,this[_0xad91d7(0x466)][_0xad91d7(0x3fd)]);_0xe45f35&&j(this[_0xad91d7(0x629)],_0xad91d7(0x4c5),{'message':_0xe45f35});}catch(_0xa29af1){let _0x308d6a=_0xad91d7(0x6ab),_0x1b8be9=_0xa29af1 instanceof Error?_0xa29af1[_0xad91d7(0x202)]:typeof _0xa29af1==_0xad91d7(0x328)?JSON[_0xad91d7(0x647)](_0xa29af1):_0xa29af1,_0x95f500=_0x308d6a+':\x20'+_0x1b8be9;this[_0xad91d7(0x21e)]['error'](this[_0xad91d7(0x629)]+'\x20('+this['instance'][_0xad91d7(0x3fd)]+_0xad91d7(0x32f)+_0x95f500);}return{'mediaType':_0x510674,'fileName':_0x2e5485[_0xad91d7(0x805)],'caption':_0x2e5485[_0xad91d7(0x2b8)],'size':{'fileLength':_0x2e5485['fileLength'],'height':_0x2e5485[_0xad91d7(0x335)],'width':_0x2e5485['width']},'mimetype':_0x2e5485[_0xad91d7(0x178)],'base64':_0x2b2a3d['toString'](_0xad91d7(0x3a1)),'fileUrl':_0x37587c,'expires_fileUrl':Date[_0xad91d7(0x7f9)]()+_0x323c75};}catch(_0x3dff04){let _0x208790='Falha\x20ao\x20processar\x20a\x20solicitação',_0x45be22=_0x3dff04 instanceof Error?_0x3dff04[_0xad91d7(0x202)]:typeof _0x3dff04==_0xad91d7(0x328)?JSON[_0xad91d7(0x647)](_0x3dff04):_0x3dff04,_0x5b6449=_0x208790+':\x20'+_0x45be22;throw this[_0xad91d7(0x21e)][_0xad91d7(0x7a9)](this['instanceName']+'\x20('+this[_0xad91d7(0x466)][_0xad91d7(0x3fd)]+_0xad91d7(0x32f)+_0x5b6449),new m(_0x5b6449);}}async[a0_0x490cab(0x569)](_0x32166f,_0x129f28){const _0x26cd5c=a0_0x490cab;let _0x1b88f0=U[_0x26cd5c(0x73a)]['join'](__dirname,_0x26cd5c(0x814));L[_0x26cd5c(0x82b)](_0x1b88f0)||L[_0x26cd5c(0x297)](_0x1b88f0,{'recursive':!0x0});let _0x13e770=U[_0x26cd5c(0x73a)][_0x26cd5c(0x4c8)](_0x1b88f0,_0x129f28);return new Promise((_0x52ec99,_0x16bcf2)=>{const _0x46493b=_0x26cd5c;L[_0x46493b(0x14d)](_0x13e770,_0x32166f,_0x55142c=>{const _0x3df079=_0x46493b;_0x55142c?(this[_0x3df079(0x21e)]['error']('Error\x20writing\x20file:\x20'+(_0x55142c instanceof Error?_0x55142c['message']:JSON['stringify'](_0x55142c,null,0x2))),_0x16bcf2(_0x55142c)):(this[_0x3df079(0x21e)][_0x3df079(0x1bd)](_0x3df079(0x6e9)+_0x13e770),_0x52ec99(_0x13e770));});});}async[a0_0x490cab(0x7f3)](_0x274bdd){const _0x76d1e2=a0_0x490cab;return await this[_0x76d1e2(0x261)]['contact'][_0x76d1e2(0x5f9)](_0x274bdd,this[_0x76d1e2(0x466)][_0x76d1e2(0x3fd)]);}async[a0_0x490cab(0x5e7)](){const _0x11474d=a0_0x490cab;return await this[_0x11474d(0x261)][_0x11474d(0x441)][_0x11474d(0x5f9)]({'where':{}},this[_0x11474d(0x466)]['wuid']);}async[a0_0x490cab(0x726)](_0x29230f){const _0x40f24a=a0_0x490cab;return await this[_0x40f24a(0x261)][_0x40f24a(0x202)][_0x40f24a(0x5f9)](_0x29230f,this[_0x40f24a(0x466)][_0x40f24a(0x3fd)]);}async[a0_0x490cab(0x34d)](){const _0xa1f83f=a0_0x490cab;return this[_0xa1f83f(0x261)]['chat'][_0xa1f83f(0x4d9)](this[_0xa1f83f(0x466)][_0xa1f83f(0x3fd)]),this[_0xa1f83f(0x261)][_0xa1f83f(0x745)][_0xa1f83f(0x248)](this[_0xa1f83f(0x466)]['wuid']),this['repository'][_0xa1f83f(0x745)][_0xa1f83f(0x424)](this[_0xa1f83f(0x466)][_0xa1f83f(0x3fd)]),this[_0xa1f83f(0x261)]['chat'][_0xa1f83f(0x7aa)](this[_0xa1f83f(0x466)][_0xa1f83f(0x3fd)]),await this[_0xa1f83f(0x261)][_0xa1f83f(0x745)][_0xa1f83f(0x5f9)]({'where':{}},this[_0xa1f83f(0x466)][_0xa1f83f(0x3fd)]);}async['importChatsAntigo'](_0x50f74f){const _0x306476=a0_0x490cab;try{if(!Array[_0x306476(0x250)](_0x50f74f)||_0x50f74f[_0x306476(0x587)]===0x0)throw new Error(_0x306476(0x689));let _0x471732=[],_0x2eaa00=[];for(let _0x16c2bd of _0x50f74f){if(_0x16c2bd[_0x306476(0x215)])_0x16c2bd[_0x306476(0x215)]=this[_0x306476(0x147)](_0x16c2bd['_id']);else continue;await this['repository'][_0x306476(0x745)][_0x306476(0x2cd)]({'where':{'_id':_0x16c2bd[_0x306476(0x215)]}},this[_0x306476(0x466)][_0x306476(0x3fd)])?_0x2eaa00['push']({'_id':_0x16c2bd[_0x306476(0x215)],'leadInfo':_0x16c2bd[_0x306476(0x241)],'owner':this[_0x306476(0x466)][_0x306476(0x3fd)]}):_0x471732[_0x306476(0x3de)]({'_id':_0x16c2bd['_id'],'owner':this[_0x306476(0x466)][_0x306476(0x3fd)],'leadInfo':_0x16c2bd[_0x306476(0x241)],'imported':!0x0});}return _0x2eaa00[_0x306476(0x587)]>0x0&&await this[_0x306476(0x261)][_0x306476(0x745)]['updateMany'](_0x2eaa00[_0x306476(0x555)](_0x26caed=>({'query':{'where':{'_id':_0x26caed[_0x306476(0x215)],'owner':this[_0x306476(0x466)]['wuid']}},'update':_0x26caed}))),_0x471732[_0x306476(0x587)]>0x0&&await this[_0x306476(0x261)][_0x306476(0x745)][_0x306476(0x575)](_0x471732,this[_0x306476(0x466)][_0x306476(0x3fd)]),{'updated':_0x2eaa00[_0x306476(0x587)],'inserted':_0x471732[_0x306476(0x587)]};}catch(_0x2efd64){let _0x44ad75=_0x306476(0x6ec),_0x25e6e2=_0x2efd64 instanceof Error?_0x2efd64[_0x306476(0x202)]:typeof _0x2efd64==_0x306476(0x328)?JSON[_0x306476(0x647)](_0x2efd64):_0x2efd64,_0x432239=_0x44ad75+':\x20'+_0x25e6e2;throw this['logger']['error'](this[_0x306476(0x629)]+'\x20('+this[_0x306476(0x466)][_0x306476(0x3fd)]+_0x306476(0x32f)+_0x432239),new m(_0x432239);}}async[a0_0x490cab(0x613)](_0xd4fb2d){const _0x1b0371=a0_0x490cab;try{if(!Array[_0x1b0371(0x250)](_0xd4fb2d)||_0xd4fb2d[_0x1b0371(0x587)]===0x0)throw new Error(_0x1b0371(0x689));let _0x5cc607=0x64,_0xc180f=0x0;for(let _0xf931d2=0x0;_0xf931d2<_0xd4fb2d['length'];_0xf931d2+=_0x5cc607){let _0x590591=_0xd4fb2d[_0x1b0371(0x3b7)](_0xf931d2,_0xf931d2+_0x5cc607),{updated:_0x54dbb7}=await this[_0x1b0371(0x554)](_0x590591);_0xc180f+=_0x54dbb7;}return{'updated':_0xc180f};}catch(_0x3db2d1){let _0x75cd93=_0x1b0371(0x6ec),_0x4ed8a=_0x3db2d1 instanceof Error?_0x3db2d1[_0x1b0371(0x202)]:typeof _0x3db2d1==_0x1b0371(0x328)?JSON[_0x1b0371(0x647)](_0x3db2d1):_0x3db2d1,_0x4aa6c6=_0x75cd93+':\x20'+_0x4ed8a;throw this[_0x1b0371(0x21e)]['error'](this[_0x1b0371(0x629)]+'\x20('+this[_0x1b0371(0x466)]['wuid']+_0x1b0371(0x32f)+_0x4aa6c6),new m(_0x4aa6c6);}}async[a0_0x490cab(0x554)](_0x3e5c65){const _0x415533=a0_0x490cab;try{let _0x4c0f9c=await this[_0x415533(0x261)]['label']['find']({'where':{}},this[_0x415533(0x466)][_0x415533(0x3fd)]),_0x2b4b04=new Set(_0x4c0f9c[_0x415533(0x555)](_0x218ec6=>_0x218ec6[_0x415533(0x215)])),_0x10af03=[],_0x59f262=[];for(let _0x254746 of _0x3e5c65){if(!_0x254746[_0x415533(0x215)])continue;_0x254746['_id']=this[_0x415533(0x147)](_0x254746[_0x415533(0x215)]);let _0x34f2d9=await this['repository'][_0x415533(0x745)][_0x415533(0x2cd)]({'where':{'_id':_0x254746[_0x415533(0x215)]}},this[_0x415533(0x466)][_0x415533(0x3fd)]),_0x134d5d={};if(Object[_0x415533(0x49e)](_0x254746['leadInfo'])[_0x415533(0x5aa)](([_0x5d7f26,_0x55ca46])=>{const _0x26db95=_0x415533;_0x134d5d[_0x26db95(0x15c)+_0x5d7f26]=_0x55ca46;}),_0x34f2d9&&!_0x34f2d9[_0x415533(0x602)]){let _0x57aa9c=(_0x254746['leadInfo'][_0x415533(0x5a9)]||[])[_0x415533(0x5f7)](_0x3305e9=>_0x2b4b04['has'](_0x3305e9)),_0x471c3d=new Set(_0x34f2d9[_0x415533(0x241)][_0x415533(0x5a9)]||[]),_0x44532d=_0x57aa9c[_0x415533(0x5f7)](_0x24ffa7=>!_0x471c3d[_0x415533(0x1de)](_0x24ffa7)),_0x1c3cf7=[..._0x471c3d][_0x415533(0x5f7)](_0x423d6b=>!_0x57aa9c[_0x415533(0x3d0)](_0x423d6b));_0x59f262[_0x415533(0x3de)](..._0x44532d[_0x415533(0x555)](_0x59c6ff=>this[_0x415533(0x210)](_0x59c6ff,_0x254746[_0x415533(0x215)]))),_0x59f262[_0x415533(0x3de)](..._0x1c3cf7[_0x415533(0x555)](_0x27de4b=>this[_0x415533(0x6fd)](_0x27de4b,_0x254746[_0x415533(0x215)]))),_0x254746[_0x415533(0x241)][_0x415533(0x5a9)]=_0x57aa9c,_0x10af03[_0x415533(0x3de)]({'query':{'where':{'_id':_0x254746[_0x415533(0x215)],'owner':this['instance'][_0x415533(0x3fd)]}},'update':_0x134d5d});}else _0x134d5d[_0x415533(0x602)]=!0x0,_0x10af03[_0x415533(0x3de)]({'query':{'where':{'_id':_0x254746['_id'],'owner':this[_0x415533(0x466)][_0x415533(0x3fd)]}},'update':_0x134d5d});}let _0x4bedbe=await this[_0x415533(0x261)][_0x415533(0x745)][_0x415533(0x459)](_0x10af03);return await Promise[_0x415533(0x6fc)](_0x59f262),{'updated':_0x4bedbe};}catch(_0x5d73dc){let _0x391b2c=_0x415533(0x6ec),_0x118272=_0x5d73dc instanceof Error?_0x5d73dc['message']:typeof _0x5d73dc==_0x415533(0x328)?JSON[_0x415533(0x647)](_0x5d73dc):_0x5d73dc,_0xf297d1=_0x391b2c+':\x20'+_0x118272;throw this[_0x415533(0x21e)]['error'](this[_0x415533(0x629)]+'\x20('+this['instance']['wuid']+_0x415533(0x32f)+_0xf297d1),new m(_0xf297d1);}}async[a0_0x490cab(0x67e)](){const _0x2d21e9=a0_0x490cab;return await this[_0x2d21e9(0x386)]['fetchPrivacySettings']();}async['updatePrivacySettings'](_0x4f4076){const _0x5b98d7=a0_0x490cab;try{return await this['client'][_0x5b98d7(0x6f2)](_0x4f4076[_0x5b98d7(0x3f3)][_0x5b98d7(0x578)]),await this[_0x5b98d7(0x386)][_0x5b98d7(0x64b)](_0x4f4076['privacySettings'][_0x5b98d7(0x1e6)]),await this['client'][_0x5b98d7(0x27b)](_0x4f4076['privacySettings'][_0x5b98d7(0x526)]),await this[_0x5b98d7(0x386)][_0x5b98d7(0x220)](_0x4f4076['privacySettings'][_0x5b98d7(0x1e1)]),await this[_0x5b98d7(0x386)][_0x5b98d7(0x538)](_0x4f4076[_0x5b98d7(0x3f3)][_0x5b98d7(0x6cc)]),await this[_0x5b98d7(0x386)][_0x5b98d7(0x7f0)](_0x4f4076[_0x5b98d7(0x3f3)]['groupadd']),this['client']?.['ws']?.[_0x5b98d7(0x496)](),{'update':'success','data':{'readreceipts':_0x4f4076[_0x5b98d7(0x3f3)][_0x5b98d7(0x578)],'profile':_0x4f4076[_0x5b98d7(0x3f3)]['profile'],'status':_0x4f4076[_0x5b98d7(0x3f3)][_0x5b98d7(0x526)],'online':_0x4f4076[_0x5b98d7(0x3f3)][_0x5b98d7(0x1e1)],'last':_0x4f4076[_0x5b98d7(0x3f3)]['last'],'groupadd':_0x4f4076[_0x5b98d7(0x3f3)][_0x5b98d7(0x3bd)]}};}catch(_0x260ca9){let _0x56b6ba=_0x5b98d7(0x273),_0x25799e=_0x260ca9 instanceof Error?_0x260ca9[_0x5b98d7(0x202)]:typeof _0x260ca9=='object'?JSON['stringify'](_0x260ca9):_0x260ca9,_0x18a04e=_0x56b6ba+':\x20'+_0x25799e;throw this[_0x5b98d7(0x21e)][_0x5b98d7(0x7a9)](this[_0x5b98d7(0x629)]+'\x20('+this['instance'][_0x5b98d7(0x3fd)]+_0x5b98d7(0x32f)+_0x18a04e),new m(_0x18a04e);}}async[a0_0x490cab(0x5c8)](_0x2d39f8){const _0x860b6e=a0_0x490cab;let _0x47571c=(_0x2d39f8?this[_0x860b6e(0x147)](_0x2d39f8):this['client']?.[_0x860b6e(0x37d)]?.['id'])['replace'](/:\d{1,2}@/g,'@');this['logger']['verbose'](this[_0x860b6e(0x629)]+'\x20('+this['instance']['wuid']+_0x860b6e(0x6ac)+_0x47571c);let _0x458bf9=await this[_0x860b6e(0x261)][_0x860b6e(0x354)]['findOne']({'where':{'_id':_0x47571c}},this['instance'][_0x860b6e(0x3fd)]),_0x23001b=_0x458bf9?_0x458bf9[_0x860b6e(0x640)]:null;try{let _0x25e1fa=(await this[_0x860b6e(0x3d6)]({'numbers':[_0x47571c]}))?.[_0x860b6e(0x2a7)](),_0x33005b=(await this[_0x860b6e(0x835)](_0x47571c,null,!0x1))[_0x860b6e(0x3f0)][_0x860b6e(0x5df)],_0x2aee2f=await this['getStatus'](_0x25e1fa?.['jid']),_0x559a89=await this[_0x860b6e(0x39b)](_0x25e1fa?.[_0x860b6e(0x2ec)]),_0x143f72=(await this[_0x860b6e(0x835)](_0x47571c,null,!0x1))[_0x860b6e(0x3f0)][_0x860b6e(0x149)],_0x7aeae6=await this[_0x860b6e(0x261)][_0x860b6e(0x745)][_0x860b6e(0x2cd)]({'where':{'_id':_0x47571c}},this[_0x860b6e(0x466)]['wuid']),_0x27341d={'imagechat':_0x33005b,'contactname':_0x23001b||null,'pushName':_0x143f72,'status':_0x2aee2f?.[_0x860b6e(0x526)],'isBusiness':_0x559a89[_0x860b6e(0x226)],'email':_0x559a89?.[_0x860b6e(0x5c9)],'description':_0x559a89?.[_0x860b6e(0x41a)],'website':_0x559a89?.['website']?.[_0x860b6e(0x2a7)](),'lastcache':Date['now'](),'imported':!_0x7aeae6},_0x956cf6=await this[_0x860b6e(0x261)][_0x860b6e(0x745)][_0x860b6e(0x341)]({'where':{'_id':_0x47571c}},_0x27341d,this[_0x860b6e(0x466)][_0x860b6e(0x3fd)]),_0xce53a1={'owner':this[_0x860b6e(0x466)][_0x860b6e(0x3fd)],'_id':_0x47571c,'profilePictureUrl':_0x33005b,'status':_0x2aee2f?.[_0x860b6e(0x526)]};return this[_0x860b6e(0x261)][_0x860b6e(0x354)][_0x860b6e(0x767)]([_0xce53a1],this[_0x860b6e(0x466)]['wuid']),_0x956cf6&&j(this[_0x860b6e(0x629)],'chats',{'chat':_0x956cf6}),{'wuid':_0x25e1fa?.[_0x860b6e(0x2ec)]||_0x47571c,'name':_0x25e1fa?.[_0x860b6e(0x149)],'pushName':_0x143f72,'numberExists':_0x25e1fa?.[_0x860b6e(0x232)],'picture':_0x33005b,'status':_0x2aee2f?.[_0x860b6e(0x526)],'isBusiness':_0x559a89[_0x860b6e(0x226)],'email':_0x559a89?.['email'],'description':_0x559a89?.[_0x860b6e(0x41a)],'website':_0x559a89?.[_0x860b6e(0x7eb)]?.[_0x860b6e(0x2a7)]()};}catch(_0x3b2e62){return this['logger'][_0x860b6e(0x7a9)](_0x860b6e(0x7e7)+(_0x3b2e62 instanceof Error?_0x3b2e62[_0x860b6e(0x202)]:JSON[_0x860b6e(0x647)](_0x3b2e62,null,0x2))),{};}}async['fetchBusinessProfile'](_0x268384){const _0x1e1c7d=a0_0x490cab;this[_0x1e1c7d(0x21e)][_0x1e1c7d(0x331)](this[_0x1e1c7d(0x629)]+'\x20('+this[_0x1e1c7d(0x466)][_0x1e1c7d(0x3fd)]+_0x1e1c7d(0x6d9));try{let _0xac3903=_0x268384?this[_0x1e1c7d(0x147)](_0x268384):this[_0x1e1c7d(0x466)][_0x1e1c7d(0x3fd)],_0x10e685=await this[_0x1e1c7d(0x386)]['getBusinessProfile'](_0xac3903);return this[_0x1e1c7d(0x21e)]['verbose'](this[_0x1e1c7d(0x629)]+'\x20('+this[_0x1e1c7d(0x466)][_0x1e1c7d(0x3fd)]+'):Trying\x20to\x20get\x20business\x20profile'),_0x10e685?(this['logger'][_0x1e1c7d(0x331)](this[_0x1e1c7d(0x629)]+'\x20('+this['instance'][_0x1e1c7d(0x3fd)]+_0x1e1c7d(0x822)),{'isBusiness':!0x0,..._0x10e685}):{'isBusiness':!0x1,'message':_0x1e1c7d(0x52e),...(await this[_0x1e1c7d(0x3d6)]({'numbers':[_0xac3903]}))?.[_0x1e1c7d(0x2a7)]()};}catch(_0x24c3be){let _0x224511=_0x1e1c7d(0x182),_0x52cfc9=_0x24c3be instanceof Error?_0x24c3be[_0x1e1c7d(0x202)]:typeof _0x24c3be==_0x1e1c7d(0x328)?JSON['stringify'](_0x24c3be):_0x24c3be,_0x13e6f3=_0x224511+':\x20'+_0x52cfc9;throw this[_0x1e1c7d(0x21e)][_0x1e1c7d(0x7a9)](this[_0x1e1c7d(0x629)]+'\x20('+this[_0x1e1c7d(0x466)][_0x1e1c7d(0x3fd)]+_0x1e1c7d(0x32f)+_0x13e6f3),new x(_0x13e6f3);}}async['getStatus'](_0x2a4125){const _0x2885dc=a0_0x490cab;let _0x33ca06=this['createJid'](_0x2a4125);try{return{'wuid':_0x33ca06,'status':(await this[_0x2885dc(0x386)][_0x2885dc(0x2c6)](_0x33ca06))?.[_0x2885dc(0x526)]};}catch{return{'wuid':_0x33ca06,'status':null};}}async[a0_0x490cab(0x6b7)](_0x4903f2){const _0x2028ff=a0_0x490cab;try{return await this[_0x2028ff(0x386)][_0x2028ff(0x6b7)](_0x4903f2),{'update':_0x2028ff(0x59f)};}catch(_0x4da94c){let _0x5d88e6=_0x2028ff(0x773),_0x249465=_0x4da94c instanceof Error?_0x4da94c['message']:typeof _0x4da94c=='object'?JSON['stringify'](_0x4da94c):_0x4da94c,_0x41b545=_0x5d88e6+':\x20'+_0x249465;throw this['logger'][_0x2028ff(0x7a9)](this[_0x2028ff(0x629)]+'\x20('+this[_0x2028ff(0x466)][_0x2028ff(0x3fd)]+_0x2028ff(0x32f)+_0x41b545),new x(_0x41b545);}}async['updateProfileStatus'](_0x3dd18a){const _0x8971a7=a0_0x490cab;try{return await this[_0x8971a7(0x386)]['updateProfileStatus'](_0x3dd18a),{'update':'success'};}catch(_0x281e93){let _0x567398='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus',_0x386fe8=_0x281e93 instanceof Error?_0x281e93['message']:typeof _0x281e93==_0x8971a7(0x328)?JSON[_0x8971a7(0x647)](_0x281e93):_0x281e93,_0x3aa944=_0x567398+':\x20'+_0x386fe8;throw this[_0x8971a7(0x21e)]['error'](this['instanceName']+'\x20('+this[_0x8971a7(0x466)][_0x8971a7(0x3fd)]+_0x8971a7(0x32f)+_0x3aa944),new x(_0x3aa944);}}async[a0_0x490cab(0x6c8)](_0xdbe4c0){const _0x444305=a0_0x490cab;try{let _0x2a5875;if((0x0,k[_0x444305(0x313)])(_0xdbe4c0)){let _0x4f41cd=new Date()['getTime'](),_0x9d6d60=_0xdbe4c0+_0x444305(0x317)+_0x4f41cd;_0x2a5875=(await Q[_0x444305(0x73a)][_0x444305(0x715)](_0x9d6d60,{'responseType':_0x444305(0x55d)}))[_0x444305(0x321)];}else{if((0x0,k[_0x444305(0x747)])(_0xdbe4c0))_0x2a5875=Buffer[_0x444305(0x3f5)](_0xdbe4c0,_0x444305(0x3a1));else throw new m(_0x444305(0x38e));}return await this[_0x444305(0x386)][_0x444305(0x6c8)](this[_0x444305(0x466)][_0x444305(0x3fd)],_0x2a5875),{'update':_0x444305(0x59f)};}catch(_0x112f0e){let _0x192cee='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture',_0x1340d4=_0x112f0e instanceof Error?_0x112f0e[_0x444305(0x202)]:typeof _0x112f0e==_0x444305(0x328)?JSON['stringify'](_0x112f0e):_0x112f0e,_0xb22945=_0x192cee+':\x20'+_0x1340d4;throw this[_0x444305(0x21e)][_0x444305(0x7a9)](this[_0x444305(0x629)]+'\x20('+this[_0x444305(0x466)][_0x444305(0x3fd)]+_0x444305(0x32f)+_0xb22945),new x(_0xb22945);}}async['removeProfilePicture'](){const _0x5bfd94=a0_0x490cab;try{return await this['client'][_0x5bfd94(0x625)](this[_0x5bfd94(0x466)][_0x5bfd94(0x3fd)]),{'update':_0x5bfd94(0x59f)};}catch(_0x2581b6){let _0x590800=_0x5bfd94(0x83c),_0x9617c5=_0x2581b6 instanceof Error?_0x2581b6[_0x5bfd94(0x202)]:typeof _0x2581b6=='object'?JSON[_0x5bfd94(0x647)](_0x2581b6):_0x2581b6,_0x38aa88=_0x590800+':\x20'+_0x9617c5;throw this[_0x5bfd94(0x21e)]['error'](this[_0x5bfd94(0x629)]+'\x20('+this[_0x5bfd94(0x466)][_0x5bfd94(0x3fd)]+_0x5bfd94(0x32f)+_0x38aa88),new x(_0x38aa88);}}async[a0_0x490cab(0x35e)](_0x27c43d){const _0x18ed6f=a0_0x490cab;try{let _0x3316b3=(await this[_0x18ed6f(0x3d6)]({'numbers':_0x27c43d['participants']}))[_0x18ed6f(0x5f7)](_0x1e5636=>_0x1e5636[_0x18ed6f(0x232)])[_0x18ed6f(0x555)](_0x51be63=>_0x51be63[_0x18ed6f(0x2ec)]),{id:_0x394266}=await this[_0x18ed6f(0x386)][_0x18ed6f(0x345)](_0x27c43d[_0x18ed6f(0x278)],_0x3316b3);_0x27c43d?.[_0x18ed6f(0x41a)]&&await this[_0x18ed6f(0x386)][_0x18ed6f(0x480)](_0x394266,_0x27c43d[_0x18ed6f(0x41a)]);let _0x27ef1e=await this['client'][_0x18ed6f(0x61e)](_0x394266);return _0x27ef1e[_0x18ed6f(0x387)]=[],{'metadata':_0x27ef1e};}catch(_0x323b6a){let _0x2079a6=_0x18ed6f(0x334),_0x50364d=_0x323b6a instanceof Error?_0x323b6a[_0x18ed6f(0x202)]:typeof _0x323b6a==_0x18ed6f(0x328)?JSON[_0x18ed6f(0x647)](_0x323b6a):_0x323b6a,_0x31b1c5=_0x2079a6+':\x20'+_0x50364d;throw this['logger'][_0x18ed6f(0x7a9)](this['instanceName']+'\x20('+this[_0x18ed6f(0x466)][_0x18ed6f(0x3fd)]+'):\x20'+_0x31b1c5),new x(_0x31b1c5);}}async[a0_0x490cab(0x2ff)](_0x589f7b){const _0x3308a2=a0_0x490cab;try{if(_0x589f7b[_0x3308a2(0x807)]===!0x0&&await this[_0x3308a2(0x386)]['groupSettingUpdate'](_0x589f7b['groupJid'],_0x3308a2(0x3f8)),_0x589f7b[_0x3308a2(0x807)]===!0x1&&await this['client'][_0x3308a2(0x499)](_0x589f7b[_0x3308a2(0x768)],'unlocked'),_0x589f7b[_0x3308a2(0x42f)]===!0x0&&await this[_0x3308a2(0x386)][_0x3308a2(0x499)](_0x589f7b[_0x3308a2(0x768)],_0x3308a2(0x610)),_0x589f7b['announce']===!0x1&&await this[_0x3308a2(0x386)][_0x3308a2(0x499)](_0x589f7b[_0x3308a2(0x768)],_0x3308a2(0x163)),_0x589f7b[_0x3308a2(0x324)]===!0x0&&await this[_0x3308a2(0x386)][_0x3308a2(0x59b)](_0x589f7b[_0x3308a2(0x768)],'all_member_add'),_0x589f7b[_0x3308a2(0x324)]===!0x1&&await this[_0x3308a2(0x386)]['groupMemberAddMode'](_0x589f7b['groupJid'],'admin_add'),_0x589f7b[_0x3308a2(0x506)]===!0x0&&await this['client']['groupJoinApprovalMode'](_0x589f7b['groupJid'],'on'),_0x589f7b['joinApprovalMode']===!0x1&&await this[_0x3308a2(0x386)][_0x3308a2(0x7fa)](_0x589f7b[_0x3308a2(0x768)],'off'),typeof _0x589f7b[_0x3308a2(0x467)]<'u'&&_0x589f7b[_0x3308a2(0x467)]!==null&&await this[_0x3308a2(0x386)]['groupToggleEphemeral'](_0x589f7b[_0x3308a2(0x768)],_0x589f7b[_0x3308a2(0x467)]),_0x589f7b[_0x3308a2(0x149)]&&await this[_0x3308a2(0x386)][_0x3308a2(0x36b)](_0x589f7b[_0x3308a2(0x768)],_0x589f7b['name']),_0x589f7b[_0x3308a2(0x41a)]&&await this['client']['groupUpdateDescription'](_0x589f7b[_0x3308a2(0x768)],_0x589f7b[_0x3308a2(0x41a)]),_0x589f7b[_0x3308a2(0x30b)]){let _0x2437aa;if((0x0,k[_0x3308a2(0x313)])(_0x589f7b['image'])){let _0x30d665=new Date()[_0x3308a2(0x620)](),_0x5ec615=_0x589f7b[_0x3308a2(0x30b)]+_0x3308a2(0x317)+_0x30d665;_0x2437aa=(await Q[_0x3308a2(0x73a)][_0x3308a2(0x715)](_0x5ec615,{'responseType':_0x3308a2(0x55d)}))[_0x3308a2(0x321)];}else{if((0x0,k[_0x3308a2(0x747)])(_0x589f7b['image']))_0x2437aa=Buffer['from'](_0x589f7b[_0x3308a2(0x30b)],'base64');else throw new m(_0x3308a2(0x38e));}await this[_0x3308a2(0x386)][_0x3308a2(0x6c8)](_0x589f7b[_0x3308a2(0x768)],_0x2437aa);}return await this[_0x3308a2(0x567)]({'groupJid':_0x589f7b[_0x3308a2(0x768)]});}catch(_0x1fa064){let _0x76533a=_0x3308a2(0x662),_0x445314=_0x1fa064 instanceof Error?_0x1fa064[_0x3308a2(0x202)]:typeof _0x1fa064==_0x3308a2(0x328)?JSON[_0x3308a2(0x647)](_0x1fa064):_0x1fa064,_0x2a4d48=_0x76533a+':\x20'+_0x445314;throw this[_0x3308a2(0x21e)][_0x3308a2(0x7a9)](this[_0x3308a2(0x629)]+'\x20('+this['instance']['wuid']+_0x3308a2(0x32f)+_0x2a4d48),new x(_0x2a4d48);}}async[a0_0x490cab(0x6f4)](_0x108648){const _0x185768=a0_0x490cab;try{if(_0x108648[_0x185768(0x753)]===_0x185768(0x3da)||_0x108648[_0x185768(0x753)]==='reject'){let _0x33ba63=_0x108648['participants'][_0x185768(0x555)](_0x3a26b2=>this[_0x185768(0x147)](_0x3a26b2));await this[_0x185768(0x386)][_0x185768(0x4d1)](_0x108648['groupJid'],_0x33ba63,_0x108648[_0x185768(0x753)]);}else{if(_0x108648[_0x185768(0x753)]===_0x185768(0x1dc)){let _0x38fe59=(await this['whatsappNumber']({'numbers':_0x108648[_0x185768(0x48d)]}))[_0x185768(0x5f7)](_0x2dcc27=>_0x2dcc27[_0x185768(0x232)])[_0x185768(0x555)](_0x3acef6=>this[_0x185768(0x147)](_0x3acef6[_0x185768(0x2ec)]));if(_0x38fe59['length']===0x0)throw new m(_0x185768(0x74c));await this[_0x185768(0x386)][_0x185768(0x5bd)](_0x108648['groupJid'],_0x38fe59,'add');}else{let _0x10a6a2=_0x108648[_0x185768(0x48d)][_0x185768(0x555)](_0x4a8f6d=>this['createJid'](_0x4a8f6d));await this[_0x185768(0x386)][_0x185768(0x5bd)](_0x108648[_0x185768(0x768)],_0x10a6a2,_0x108648[_0x185768(0x753)]);}}return await this['findGroup']({'groupJid':_0x108648[_0x185768(0x768)]});}catch(_0x440aa8){let _0x23a912=_0x185768(0x4e3),_0x55719b=_0x440aa8 instanceof Error?_0x440aa8['message']:typeof _0x440aa8==_0x185768(0x328)?JSON[_0x185768(0x647)](_0x440aa8):_0x440aa8,_0x1dcc03=_0x23a912+':\x20'+_0x55719b;throw this[_0x185768(0x21e)][_0x185768(0x7a9)](this['instanceName']+'\x20('+this[_0x185768(0x466)][_0x185768(0x3fd)]+_0x185768(0x32f)+_0x1dcc03),new m(_0x1dcc03);}}async[a0_0x490cab(0x112)](_0x165f75){const _0x3d8f19=a0_0x490cab;try{return await this[_0x3d8f19(0x386)][_0x3d8f19(0x112)](_0x165f75[_0x3d8f19(0x4af)]);}catch(_0x50e764){let _0x35642a=_0x3d8f19(0x222),_0x141993=_0x50e764 instanceof Error?_0x50e764['message']:typeof _0x50e764==_0x3d8f19(0x328)?JSON[_0x3d8f19(0x647)](_0x50e764):_0x50e764,_0x388b18=_0x35642a+':\x20'+_0x141993;throw this[_0x3d8f19(0x21e)][_0x3d8f19(0x7a9)](this[_0x3d8f19(0x629)]+'\x20('+this[_0x3d8f19(0x466)]['wuid']+_0x3d8f19(0x32f)+_0x388b18),new m(_0x388b18);}}async['findGroup'](_0x186afc,_0xcd657e='out'){const _0x159d9f=a0_0x490cab;try{let _0x42d68a=await this[_0x159d9f(0x261)][_0x159d9f(0x745)][_0x159d9f(0x2cd)]({'where':{'_id':_0x186afc[_0x159d9f(0x768)]}},this[_0x159d9f(0x466)][_0x159d9f(0x3fd)]),_0x348985=_0x42d68a?_0x42d68a[_0x159d9f(0x543)]:null,_0x35681a=0x18*0x3c*0x3c*0x3e8;if(!_0x348985||_0x348985[_0x159d9f(0x5ad)]&&Date[_0x159d9f(0x7f9)]()-_0x348985[_0x159d9f(0x5ad)]>_0x35681a){let _0x20546c=await this[_0x159d9f(0x386)]['groupMetadata'](_0x186afc[_0x159d9f(0x768)]);if(_0x20546c[_0x159d9f(0x129)]=_0x20546c?.['subjectTime']&&_0x20546c[_0x159d9f(0x129)][_0x159d9f(0x751)]()[_0x159d9f(0x587)]<0xd?_0x20546c?.[_0x159d9f(0x129)]*0x3e8:_0x20546c?.[_0x159d9f(0x129)]||null,_0x20546c[_0x159d9f(0x7ce)]=_0x20546c?.[_0x159d9f(0x7ce)]&&_0x20546c[_0x159d9f(0x7ce)][_0x159d9f(0x751)]()[_0x159d9f(0x587)]<0xd?_0x20546c?.[_0x159d9f(0x7ce)]*0x3e8:_0x20546c?.[_0x159d9f(0x7ce)]||null,_0x348985={..._0x20546c,'lastUpdate':Date[_0x159d9f(0x7f9)]()},!_0x20546c)return;}let _0x50951f=_0x348985[_0x159d9f(0x48d)][_0x159d9f(0x259)](_0x417327=>_0x417327['id']===this[_0x159d9f(0x466)][_0x159d9f(0x3fd)]+'@s.whatsapp.net'&&_0x417327[_0x159d9f(0x37b)]!=null);!_0x348985[_0x159d9f(0x4af)]&&_0x50951f&&(_0x348985[_0x159d9f(0x4af)]=(await this[_0x159d9f(0x4af)](_0x186afc,!0x1))[_0x159d9f(0x17d)]);let _0xd7821e=(!_0x348985[_0x159d9f(0x42f)]||_0x50951f)&&(!_0x348985[_0x159d9f(0x614)]||_0x348985[_0x159d9f(0x614)]&&_0x348985[_0x159d9f(0x1a7)]&&_0x50951f);_0x348985[_0x159d9f(0x3a9)]=_0x50951f,_0x348985[_0x159d9f(0x229)]=_0xd7821e;let _0x13b40c=[];if(_0x50951f&&_0x348985[_0x159d9f(0x506)])try{_0x13b40c=await this[_0x159d9f(0x386)]['groupRequestParticipantsList'](_0x186afc[_0x159d9f(0x768)]),_0x348985[_0x159d9f(0x3a8)]=Date[_0x159d9f(0x7f9)]();}catch(_0x59422f){this[_0x159d9f(0x21e)][_0x159d9f(0x331)](this[_0x159d9f(0x629)]+'\x20('+this[_0x159d9f(0x466)][_0x159d9f(0x3fd)]+_0x159d9f(0x39a)+_0x186afc[_0x159d9f(0x768)]+':\x20'+(_0x59422f instanceof Error?_0x59422f[_0x159d9f(0x202)]:JSON['stringify'](_0x59422f,null,0x2)));}try{_0x348985[_0x159d9f(0x30b)]=(await this['findAndUpdateCacheContact'](_0x186afc[_0x159d9f(0x768)],null,!0x0))[_0x159d9f(0x3f0)]['pictureUrl'];}catch(_0x2923d8){this[_0x159d9f(0x21e)][_0x159d9f(0x331)](this[_0x159d9f(0x629)]+'\x20('+this[_0x159d9f(0x466)][_0x159d9f(0x3fd)]+_0x159d9f(0x29c)+_0x186afc[_0x159d9f(0x768)]+':\x20'+(_0x2923d8 instanceof Error?_0x2923d8[_0x159d9f(0x202)]:JSON['stringify'](_0x2923d8,null,0x2)));}let _0x3d2683=_0x348985[_0x159d9f(0x48d)][_0x159d9f(0x555)](_0x249fb8=>_0x249fb8['id']),_0x78b8e8=_0x13b40c['map'](_0x4bc57b=>_0x4bc57b[_0x159d9f(0x2ec)]),_0x164460=await this['repository'][_0x159d9f(0x4a5)][_0x159d9f(0x71f)]([..._0x3d2683,..._0x78b8e8]);_0x348985['participants']=_0x348985['participants'][_0x159d9f(0x555)](_0x10a661=>{const _0x2c5582=_0x159d9f;let _0x4ab119=_0x164460[_0x2c5582(0x5f9)](_0x13e3f7=>_0x13e3f7[_0x2c5582(0x215)]===_0x10a661['id']);return{'id':_0x10a661['id'],'isAdmin':['admin','superadmin'][_0x2c5582(0x3d0)](_0x10a661[_0x2c5582(0x37b)]),'admin':_0x10a661[_0x2c5582(0x37b)],'pushName':_0x4ab119?.[_0x2c5582(0x149)],'profilePictureUrl':_0x4ab119?.[_0x2c5582(0x5df)]};}),_0x348985[_0x159d9f(0x387)]=_0x13b40c[_0x159d9f(0x555)](_0x89b731=>{const _0x531fb8=_0x159d9f;let _0x5463d1=_0x164460[_0x531fb8(0x5f9)](_0x22a896=>_0x22a896['_id']===_0x89b731[_0x531fb8(0x2ec)]);return{'id':_0x89b731[_0x531fb8(0x2ec)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x5463d1?.[_0x531fb8(0x149)],'profilePictureUrl':_0x5463d1?.['pictureUrl'],'request_method':_0x89b731[_0x531fb8(0x5a4)],'request_time':_0x89b731['request_time']};});let _0x6022b8=await this[_0x159d9f(0x261)][_0x159d9f(0x745)][_0x159d9f(0x341)]({'where':{'_id':_0x186afc['groupJid']}},{'imagechat':_0x348985[_0x159d9f(0x30b)],'name':_0x348985[_0x159d9f(0x278)],'lastcache':Date[_0x159d9f(0x7f9)](),'groupdata':_0x348985},this['instance']['wuid']);return j(this[_0x159d9f(0x629)],_0x159d9f(0x6e8),{'chat':_0x6022b8}),{'metadata':_0x348985};}catch(_0x4fb34f){if(_0xcd657e==='inner')return;throw new J(_0x159d9f(0x35a),_0x4fb34f[_0x159d9f(0x202)][_0x159d9f(0x751)]());}}async['findGroups'](){const _0x3ea90c=a0_0x490cab;try{let _0x1a8b10=[],_0x4b4fc5=await this[_0x3ea90c(0x386)]['groupFetchAllParticipating'](),_0x410c52=Object[_0x3ea90c(0x33b)](_0x4b4fc5),_0x591f31=_0x410c52[_0x3ea90c(0x5f7)](_0xf2a778=>(0x0,w['isJidGroup'])(_0xf2a778?.['id']))[_0x3ea90c(0x555)](async _0x2c0209=>{const _0x5c2609=_0x3ea90c;try{return await this[_0x5c2609(0x386)][_0x5c2609(0x21c)](_0x2c0209['id'],_0x5c2609(0x1ef));}catch(_0x1ea08e){return this[_0x5c2609(0x21e)][_0x5c2609(0x331)](this['instanceName']+'\x20('+this['instance'][_0x5c2609(0x3fd)]+'):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20'+_0x2c0209['id']+':\x20'+(_0x1ea08e instanceof Error?_0x1ea08e[_0x5c2609(0x202)]:JSON[_0x5c2609(0x647)](_0x1ea08e,null,0x2))),null;}}),_0x592be7=await Promise['all'](_0x591f31);for(let _0x325ae9=0x0;_0x325ae9<_0x410c52[_0x3ea90c(0x587)];_0x325ae9++){let _0x1e34de=_0x410c52[_0x325ae9];(0x0,w['isJidGroup'])(_0x1e34de?.['id'])&&(_0x1a8b10['push']({'groupJid':_0x1e34de?.['id'],'subject':_0x1e34de?.[_0x3ea90c(0x278)],'subjectOwner':_0x1e34de?.[_0x3ea90c(0x304)]?.[_0x3ea90c(0x6e6)]('@')[0x0],'subjectTime':_0x1e34de?.[_0x3ea90c(0x129)],'creation':_0x1e34de?.[_0x3ea90c(0x7ce)],'size':_0x1e34de?.[_0x3ea90c(0x48d)]?.[_0x3ea90c(0x587)],'owner':_0x1e34de?.[_0x3ea90c(0x1f7)]?.[_0x3ea90c(0x6e6)]('@')[0x0],'desc':_0x1e34de?.[_0x3ea90c(0x417)],'restrict':_0x1e34de?.[_0x3ea90c(0x807)],'announce':_0x1e34de?.[_0x3ea90c(0x42f)],'image':_0x592be7[_0x325ae9],'isCommunity':_0x1e34de?.[_0x3ea90c(0x614)],'joinApprovalMode':_0x1e34de?.['joinApprovalMode'],'memberCanAddParticipant':_0x1e34de?.[_0x3ea90c(0x324)],'participants':_0x1e34de?.[_0x3ea90c(0x48d)],'descOwner':_0x1e34de?.[_0x3ea90c(0x13f)],'descId':_0x1e34de?.['descId'],'memberAddMode':_0x1e34de?.[_0x3ea90c(0x324)],'isCommunityAnnounce':_0x1e34de?.[_0x3ea90c(0x1a7)],'ephemeralDuration':_0x1e34de?.[_0x3ea90c(0x660)]||0x0,'author':_0x1e34de?.[_0x3ea90c(0x1c7)]}),this['updateChatGroupData'](_0x410c52[_0x325ae9]));}return _0x1a8b10;}catch(_0x25d067){let _0x1e1398=_0x3ea90c(0x478),_0xbf94db=_0x25d067 instanceof Error?_0x25d067[_0x3ea90c(0x202)]:typeof _0x25d067==_0x3ea90c(0x328)?JSON['stringify'](_0x25d067):_0x25d067,_0x5ae3d9=_0x1e1398+':\x20'+_0xbf94db;throw this[_0x3ea90c(0x21e)]['error'](this[_0x3ea90c(0x629)]+'\x20('+this[_0x3ea90c(0x466)]['wuid']+_0x3ea90c(0x32f)+_0x5ae3d9),new J(_0x5ae3d9);}}async['updateChatGroupData'](_0x516ee4){const _0x8e63f9=a0_0x490cab;let _0x643476=await this[_0x8e63f9(0x261)]['chat'][_0x8e63f9(0x2cd)]({'where':{'_id':_0x516ee4['id']}},this[_0x8e63f9(0x466)][_0x8e63f9(0x3fd)]);_0x516ee4['subjectTime']=_0x516ee4?.['subjectTime']&&_0x516ee4[_0x8e63f9(0x129)][_0x8e63f9(0x751)]()[_0x8e63f9(0x587)]<0xd?_0x516ee4?.[_0x8e63f9(0x129)]*0x3e8:_0x516ee4?.[_0x8e63f9(0x129)]||null,_0x516ee4[_0x8e63f9(0x7ce)]=_0x516ee4?.['creation']&&_0x516ee4[_0x8e63f9(0x7ce)][_0x8e63f9(0x751)]()[_0x8e63f9(0x587)]<0xd?_0x516ee4?.[_0x8e63f9(0x7ce)]*0x3e8:_0x516ee4?.[_0x8e63f9(0x7ce)]||null;let _0x5e6d12=_0x643476?.['groupdata']?.[_0x8e63f9(0x387)]||[],_0x264951=_0x643476?.[_0x8e63f9(0x543)]?.[_0x8e63f9(0x3a8)],_0x2815ab=_0x516ee4[_0x8e63f9(0x48d)][_0x8e63f9(0x555)](_0x26f22c=>{const _0x157c33=_0x8e63f9;let _0x26fd2a=_0x643476?.[_0x157c33(0x543)]?.[_0x157c33(0x48d)][_0x157c33(0x5f9)](_0x4e261d=>_0x4e261d['id']===_0x26f22c['id']);return{..._0x26f22c,'isAdmin':['admin',_0x157c33(0x52d)]['includes'](_0x26f22c[_0x157c33(0x37b)]),'admin':_0x26f22c[_0x157c33(0x37b)],'name':_0x26fd2a?.[_0x157c33(0x149)]||_0x26f22c[_0x157c33(0x149)],'imgUrl':_0x26fd2a?.[_0x157c33(0x2ca)]||_0x26f22c[_0x157c33(0x2ca)]};}),_0x2e48bb=_0x2815ab[_0x8e63f9(0x259)](_0x327804=>_0x327804['id']===this[_0x8e63f9(0x466)][_0x8e63f9(0x3fd)]+_0x8e63f9(0x119)&&_0x327804[_0x8e63f9(0x3a9)]),_0x232951=(!_0x516ee4[_0x8e63f9(0x42f)]||_0x2e48bb)&&(!_0x516ee4['isCommunity']||_0x516ee4['isCommunity']&&_0x516ee4[_0x8e63f9(0x1a7)]&&_0x2e48bb),_0x341b3a={..._0x516ee4,'participants':_0x2815ab,'awaitingApproval':_0x5e6d12,'lastFetchAwaitingApproval':_0x264951,'isAdmin':_0x2e48bb,'canSendMessage':_0x232951,'lastUpdate':Date[_0x8e63f9(0x7f9)]()};await this[_0x8e63f9(0x261)][_0x8e63f9(0x745)][_0x8e63f9(0x341)]({'where':{'_id':_0x516ee4['id']}},{'name':_0x516ee4[_0x8e63f9(0x278)],'group':!0x0,'groupdata':_0x341b3a,'lastcache':Date[_0x8e63f9(0x7f9)]()},this[_0x8e63f9(0x466)][_0x8e63f9(0x3fd)]),j(this[_0x8e63f9(0x629)],_0x8e63f9(0x6e8),{'chat':_0x516ee4});}async[a0_0x490cab(0x25d)](_0x40d48b){const _0x4bbb01=a0_0x490cab;let _0x4417c4=await this[_0x4bbb01(0x261)][_0x4bbb01(0x745)]['findOne']({'where':{'_id':_0x40d48b['id']}},this[_0x4bbb01(0x466)][_0x4bbb01(0x3fd)]);_0x40d48b[_0x4bbb01(0x129)]=_0x40d48b?.[_0x4bbb01(0x129)]&&_0x40d48b[_0x4bbb01(0x129)][_0x4bbb01(0x751)]()[_0x4bbb01(0x587)]<0xd?_0x40d48b?.[_0x4bbb01(0x129)]*0x3e8:_0x40d48b?.[_0x4bbb01(0x129)]||null,_0x40d48b['creation']=_0x40d48b?.[_0x4bbb01(0x7ce)]&&_0x40d48b[_0x4bbb01(0x7ce)][_0x4bbb01(0x751)]()[_0x4bbb01(0x587)]<0xd?_0x40d48b?.[_0x4bbb01(0x7ce)]*0x3e8:_0x40d48b?.['creation']||null,_0x40d48b['inviteCode']&&(_0x40d48b[_0x4bbb01(0x4af)]='https://chat.whatsapp.com/'+_0x40d48b['inviteCode']);let _0x269a84=_0x4417c4?.[_0x4bbb01(0x543)]?{..._0x4417c4[_0x4bbb01(0x543)]}:{};Object[_0x4bbb01(0x66a)](_0x40d48b)['forEach'](_0x5f4f6f=>{_0x5f4f6f!=='id'&&(_0x269a84[_0x5f4f6f]=_0x40d48b[_0x5f4f6f]);});let _0x170a84=_0x269a84[_0x4bbb01(0x48d)]?.[_0x4bbb01(0x259)](_0x41c9fa=>_0x41c9fa['id']===this['instance'][_0x4bbb01(0x3fd)]+_0x4bbb01(0x119)&&_0x41c9fa[_0x4bbb01(0x3a9)])||!0x1;_0x269a84[_0x4bbb01(0x3a9)]=_0x170a84;let _0x1e6a66=(!_0x269a84[_0x4bbb01(0x42f)]||_0x170a84)&&(!_0x269a84[_0x4bbb01(0x614)]||_0x269a84[_0x4bbb01(0x614)]&&_0x269a84['isCommunityAnnounce']&&_0x170a84);_0x269a84[_0x4bbb01(0x229)]=_0x1e6a66;let _0x479038={'group':!0x0,'groupdata':_0x269a84};_0x40d48b['subject']&&(_0x479038[_0x4bbb01(0x149)]=_0x40d48b[_0x4bbb01(0x278)]),await this[_0x4bbb01(0x261)][_0x4bbb01(0x745)]['updateOne']({'where':{'_id':_0x40d48b['id']}},_0x479038,this['instance'][_0x4bbb01(0x3fd)],{'upsert':!0x0}),j(this[_0x4bbb01(0x629)],'chats',{'chat':_0x479038});}async[a0_0x490cab(0x3a4)](_0x2db5b6){const _0x57f72c=a0_0x490cab;let _0x4d3213=await this['repository']['chat']['findOne']({'where':{'_id':_0x2db5b6['id']}},this[_0x57f72c(0x466)]['wuid']);if(!_0x4d3213||!_0x4d3213[_0x57f72c(0x543)]){this[_0x57f72c(0x21e)][_0x57f72c(0x79f)](this[_0x57f72c(0x629)]+'\x20('+this[_0x57f72c(0x466)][_0x57f72c(0x3fd)]+'):\x20\x27Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x27,\x20'+_0x2db5b6['id']);return;}let _0x43e896=await this[_0x57f72c(0x261)][_0x57f72c(0x4a5)]['findManyByIds'](_0x2db5b6['participants']),_0x113720=[..._0x4d3213['groupdata']?.['participants']];switch(_0x2db5b6[_0x57f72c(0x753)]){case _0x57f72c(0x1dc):let _0x57a5ef=_0x43e896[_0x57f72c(0x555)](_0x5bcfb8=>({'id':_0x5bcfb8[_0x57f72c(0x215)],'isAdmin':!0x1,'name':_0x5bcfb8['name'],'imgUrl':_0x5bcfb8[_0x57f72c(0x5df)]}));_0x113720=[..._0x113720,..._0x57a5ef];break;case'remove':_0x113720=_0x113720['filter'](_0x52aa85=>!_0x2db5b6[_0x57f72c(0x48d)]['includes'](_0x52aa85['id']));break;case _0x57f72c(0x65e):case'demote':_0x113720=_0x113720[_0x57f72c(0x555)](_0x155ad0=>_0x2db5b6['participants'][_0x57f72c(0x3d0)](_0x155ad0['id'])?{..._0x155ad0,'isAdmin':_0x2db5b6['action']===_0x57f72c(0x65e)}:_0x155ad0);break;}let _0x2b1d81=_0x113720[_0x57f72c(0x587)],_0x4d731c=_0x113720[_0x57f72c(0x259)](_0x34cfcd=>_0x34cfcd['id']===this['instance']['wuid']+'@s.whatsapp.net'),_0x12641c=_0x4d731c&&_0x113720[_0x57f72c(0x259)](_0x38d201=>_0x38d201['id']===this[_0x57f72c(0x466)]['wuid']+'@s.whatsapp.net'&&_0x38d201[_0x57f72c(0x3a9)]),_0x1fddd7=_0x4d731c&&(!_0x4d3213['groupdata'][_0x57f72c(0x42f)]||_0x12641c)&&(!_0x4d3213[_0x57f72c(0x543)][_0x57f72c(0x614)]||_0x4d3213[_0x57f72c(0x543)][_0x57f72c(0x614)]&&_0x12641c);await this[_0x57f72c(0x261)][_0x57f72c(0x745)][_0x57f72c(0x341)]({'where':{'_id':_0x2db5b6['id']}},{'groupdata':{..._0x4d3213[_0x57f72c(0x543)],'participants':_0x113720,'size':_0x2b1d81,'isAdmin':_0x12641c,'canSendMessage':_0x1fddd7}},this[_0x57f72c(0x466)][_0x57f72c(0x3fd)]),this['logger']['info'](this[_0x57f72c(0x629)]+'\x20('+this[_0x57f72c(0x466)][_0x57f72c(0x3fd)]+'):\x20Grupo\x20'+_0x2db5b6['id']+_0x57f72c(0x806)+_0x2db5b6[_0x57f72c(0x753)]+_0x57f72c(0x2ef)+_0x2b1d81+_0x57f72c(0x725)+_0x12641c+_0x57f72c(0x4fd)+_0x1fddd7);}async[a0_0x490cab(0x4af)](_0x54f02a,_0x2912ec=!0x0){const _0x3c5fd9=a0_0x490cab;try{let _0x40ceec=await this[_0x3c5fd9(0x386)][_0x3c5fd9(0x6aa)](_0x54f02a[_0x3c5fd9(0x768)]),_0x2bbdc7={'groupdata.inviteCode':_0x3c5fd9(0x588)+_0x40ceec};if(_0x2912ec){let _0xe43500=await this['repository'][_0x3c5fd9(0x745)]['updateOne']({'where':{'_id':_0x54f02a['groupJid']}},_0x2bbdc7,this[_0x3c5fd9(0x466)][_0x3c5fd9(0x3fd)]);}return{'inviteUrl':_0x3c5fd9(0x588)+_0x40ceec,'inviteCode':_0x40ceec};}catch(_0x57eb2b){let _0x2caea8=_0x3c5fd9(0x504),_0x144e49=_0x57eb2b instanceof Error?_0x57eb2b['message']:typeof _0x57eb2b==_0x3c5fd9(0x328)?JSON[_0x3c5fd9(0x647)](_0x57eb2b):_0x57eb2b,_0x49b77f=_0x2caea8+':\x20'+_0x144e49;throw this[_0x3c5fd9(0x21e)]['error'](this[_0x3c5fd9(0x629)]+'\x20('+this[_0x3c5fd9(0x466)][_0x3c5fd9(0x3fd)]+_0x3c5fd9(0x32f)+_0x49b77f),new J(_0x49b77f);}}async[a0_0x490cab(0x740)](_0x4e5a42){const _0x294e23=a0_0x490cab;try{let _0x2f916c=await this[_0x294e23(0x386)]['groupRevokeInvite'](_0x4e5a42[_0x294e23(0x768)]);return{'revoked':!0x0,'inviteUrl':'https://chat.whatsapp.com/'+_0x2f916c,'inviteCode':_0x2f916c};}catch(_0x4472c9){let _0x1a3fde=_0x294e23(0x1db),_0x14b3c9=_0x4472c9 instanceof Error?_0x4472c9[_0x294e23(0x202)]:typeof _0x4472c9==_0x294e23(0x328)?JSON[_0x294e23(0x647)](_0x4472c9):_0x4472c9,_0x225c27=_0x1a3fde+':\x20'+_0x14b3c9;throw this['logger'][_0x294e23(0x7a9)](this[_0x294e23(0x629)]+'\x20('+this[_0x294e23(0x466)]['wuid']+_0x294e23(0x32f)+_0x225c27),new J(_0x225c27);}}async[a0_0x490cab(0x36a)](_0x8eff56){const _0x2808a8=a0_0x490cab;try{if((0x0,k[_0x2808a8(0x313)])(_0x8eff56[_0x2808a8(0x4af)]))var _0x1ea770=_0x8eff56[_0x2808a8(0x4af)][_0x2808a8(0x6e6)]('/')[0x3];else var _0x1ea770=_0x8eff56[_0x2808a8(0x4af)];let _0x469d3d=await this[_0x2808a8(0x386)][_0x2808a8(0x824)](_0x1ea770);return this[_0x2808a8(0x21e)][_0x2808a8(0x331)](this['instanceName']+'\x20('+this[_0x2808a8(0x466)][_0x2808a8(0x3fd)]+_0x2808a8(0x32f)+_0x469d3d),{'join':!0x0,'inviteCode':_0x1ea770,'groupJid':_0x469d3d};}catch(_0x3fb9da){let _0x18ccb1=_0x2808a8(0x75d),_0x3d4151=_0x3fb9da instanceof Error?_0x3fb9da[_0x2808a8(0x202)]:typeof _0x3fb9da==_0x2808a8(0x328)?JSON['stringify'](_0x3fb9da):_0x3fb9da,_0x33da53=_0x18ccb1+':\x20'+_0x3d4151;throw this[_0x2808a8(0x21e)][_0x2808a8(0x7a9)](this['instanceName']+'\x20('+this[_0x2808a8(0x466)]['wuid']+_0x2808a8(0x32f)+_0x33da53),new J(_0x33da53);}}async[a0_0x490cab(0x38f)](_0x3ac2d5){const _0x8e484e=a0_0x490cab;try{return{'participants':(await this[_0x8e484e(0x261)][_0x8e484e(0x745)][_0x8e484e(0x2cd)]({'where':{'_id':_0x3ac2d5['groupJid']}},this[_0x8e484e(0x466)][_0x8e484e(0x3fd)]))[_0x8e484e(0x543)][_0x8e484e(0x48d)]};}catch(_0x4f3647){let _0xf977a=_0x8e484e(0x326),_0x3276e0=_0x4f3647 instanceof Error?_0x4f3647[_0x8e484e(0x202)]:typeof _0x4f3647=='object'?JSON[_0x8e484e(0x647)](_0x4f3647):_0x4f3647,_0x41a825=_0xf977a+':\x20'+_0x3276e0;throw this['logger'][_0x8e484e(0x7a9)](this['instanceName']+'\x20('+this[_0x8e484e(0x466)][_0x8e484e(0x3fd)]+_0x8e484e(0x32f)+_0x41a825),new J(_0x41a825);}}async[a0_0x490cab(0x213)](_0xf273ba){const _0x4839fd=a0_0x490cab;try{return await this[_0x4839fd(0x386)][_0x4839fd(0x63f)](_0xf273ba['groupJid']),{'groupJid':_0xf273ba[_0x4839fd(0x768)],'leave':!0x0};}catch(_0x458af5){let _0x1dc17e='Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup',_0x4077c0=_0x458af5 instanceof Error?_0x458af5['message']:typeof _0x458af5==_0x4839fd(0x328)?JSON[_0x4839fd(0x647)](_0x458af5):_0x458af5,_0x9e860=_0x1dc17e+':\x20'+_0x4077c0;throw this[_0x4839fd(0x21e)][_0x4839fd(0x7a9)](this[_0x4839fd(0x629)]+'\x20('+this['instance']['wuid']+_0x4839fd(0x32f)+_0x9e860),new m(_0x9e860);}}async[a0_0x490cab(0x7e3)](_0xfef743){const _0x375be4=a0_0x490cab;return await this['sendMessageWithTyping'](_0xfef743[_0x375be4(0x7c9)],{'poll':{'name':_0xfef743[_0x375be4(0x7e3)]?.[_0x375be4(0x149)],'selectableCount':_0xfef743[_0x375be4(0x7e3)]['selectableCount'],'values':_0xfef743['pollMessage'][_0x375be4(0x33b)]}},_0xfef743?.['options']);}async[a0_0x490cab(0x731)](_0x442c71){const _0x23dfae=a0_0x490cab;return await this[_0x23dfae(0x436)](_0x442c71[_0x23dfae(0x7c9)],{'listMessage':{'title':_0x442c71[_0x23dfae(0x731)]['title'],'description':_0x442c71[_0x23dfae(0x731)][_0x23dfae(0x41a)],'buttonText':_0x442c71[_0x23dfae(0x731)]?.[_0x23dfae(0x802)],'footerText':_0x442c71[_0x23dfae(0x731)]?.[_0x23dfae(0x490)],'sections':_0x442c71['listMessage'][_0x23dfae(0x680)],'listType':0x2}},_0x442c71?.[_0x23dfae(0x611)]);}async[a0_0x490cab(0x523)](_0x4507ae){const _0x4cf54c=a0_0x490cab;let _0x14ecae;if(_0x4507ae['menuMessage'][_0x4cf54c(0x5af)]==='list'){let _0x380619=_0x4507ae['menuMessage']['text'][_0x4cf54c(0x4c4)]('\x0a'),_0x38780b='',_0x89ae98='';_0x380619!==-0x1?(_0x38780b=_0x4507ae[_0x4cf54c(0x523)][_0x4cf54c(0x120)][_0x4cf54c(0x692)](0x0,_0x380619)[_0x4cf54c(0x63d)](),_0x89ae98=_0x4507ae[_0x4cf54c(0x523)]['text'][_0x4cf54c(0x692)](_0x380619+0x1)):_0x89ae98=_0x4507ae[_0x4cf54c(0x523)][_0x4cf54c(0x120)];let _0x30bc2e=_0x4507ae[_0x4cf54c(0x523)]['choices'][_0x4cf54c(0x5f7)](_0xb1f291=>_0xb1f291[_0x4cf54c(0x63d)]()!==''),_0x5e165f=this[_0x4cf54c(0x145)](_0x30bc2e);_0x14ecae={'listMessage':{'title':_0x38780b,'description':_0x89ae98,'buttonText':_0x4507ae['menuMessage'][_0x4cf54c(0x802)]||_0x4cf54c(0x295),'footerText':_0x4507ae['menuMessage']['footerText'],'sections':_0x5e165f,'listType':0x2}};}else{if(_0x4507ae['menuMessage'][_0x4cf54c(0x5af)]===_0x4cf54c(0x771)){let _0x2c5a54=_0x4507ae[_0x4cf54c(0x523)][_0x4cf54c(0x332)][_0x4cf54c(0x5f7)](_0x51d07b=>!(_0x51d07b[_0x4cf54c(0x446)]('[')&&_0x51d07b[_0x4cf54c(0x381)](']'))&&_0x51d07b['trim']()!=='')['map'](_0x122202=>_0x122202[_0x4cf54c(0x6e6)]('\x0a')[0x0]);_0x14ecae={'poll':{'name':_0x4507ae['menuMessage'][_0x4cf54c(0x120)],'selectableCount':_0x4507ae[_0x4cf54c(0x523)]['selectableCount']||0x1,'values':_0x2c5a54}};}}return await this[_0x4cf54c(0x436)](_0x4507ae['number'],_0x14ecae,_0x4507ae?.[_0x4cf54c(0x611)]);}[a0_0x490cab(0x145)](_0x10742a){const _0x134e8f=a0_0x490cab;let _0x8bfcc2=[],_0x15ec12={'rows':[]};return _0x10742a[_0x134e8f(0x5aa)](_0x44cec9=>{const _0x3a9fc2=_0x134e8f;if(_0x44cec9[_0x3a9fc2(0x446)]('[')&&_0x44cec9['endsWith'](']'))_0x15ec12[_0x3a9fc2(0x392)][_0x3a9fc2(0x587)]>0x0&&_0x8bfcc2[_0x3a9fc2(0x3de)](_0x15ec12),_0x15ec12={'title':_0x44cec9['slice'](0x1,-0x1),'rows':[]};else{let _0x42dabe=_0x44cec9[_0x3a9fc2(0x6e6)]('\x0a')[_0x3a9fc2(0x555)](_0x19bb10=>_0x19bb10['trim']()),_0x40d348=_0x42dabe[0x0],_0x146d06=_0x42dabe[0x1]||null,_0x1002ef=_0x42dabe[0x2]||_0x40d348;_0x15ec12['rows'][_0x3a9fc2(0x3de)]({'title':_0x40d348,'description':_0x146d06,'rowId':_0x1002ef});}}),_0x15ec12[_0x134e8f(0x392)][_0x134e8f(0x587)]>0x0&&_0x8bfcc2[_0x134e8f(0x3de)](_0x15ec12),_0x8bfcc2;}async['updateMessage'](_0x1eea2c,_0x4f045f){const _0x323bfe=a0_0x490cab;if(await this['getMessage'](_0x1eea2c,!0x0)){let _0x369600={'where':{'_id':_0x1eea2c['id']}},_0x18d1eb={'status':[_0x4f045f[_0x323bfe(0x526)]][0x0]};try{let _0x2696f7=await this[_0x323bfe(0x261)][_0x323bfe(0x202)]['update'](_0x369600,_0x18d1eb,this[_0x323bfe(0x466)][_0x323bfe(0x3fd)]);_0x2696f7&&j(this[_0x323bfe(0x629)],'messages',{'message':_0x2696f7});}catch{}}}[a0_0x490cab(0x7ba)](_0x456783){const _0x5aa4dd=a0_0x490cab;let _0x399f6b=[];return _0x456783['forEach'](_0x9a29e7=>{const _0x1e6761=a0_0xe58b;_0x9a29e7['title']&&_0x399f6b['push']('['+_0x9a29e7[_0x1e6761(0x256)]+']'),_0x9a29e7[_0x1e6761(0x392)]['forEach'](_0x3b6d02=>{const _0x23d60d=_0x1e6761;_0x399f6b['push'](_0x3b6d02[_0x23d60d(0x256)]);});}),_0x399f6b[_0x5aa4dd(0x4c8)]('|');}[a0_0x490cab(0x572)](_0x58e9a2){const _0x4ac0b6=a0_0x490cab;let _0x3015e2=_0x58e9a2[_0x4ac0b6(0x4d4)](/\\n/g,'\x0a')['split']('\x0a')[_0x4ac0b6(0x5f7)](_0x7f048a=>_0x7f048a[_0x4ac0b6(0x3d0)](_0x4ac0b6(0x4d6))||_0x7f048a[_0x4ac0b6(0x3d0)](_0x4ac0b6(0x28c))),_0x23f5d2='';return _0x3015e2[_0x4ac0b6(0x5aa)](_0x4d4147=>{const _0x5d732c=_0x4ac0b6;let _0x33c156=/TEL(?:.*):(.+)/,_0x52a949=/EMAIL(?:.*):(.+)/,_0x1493a6=_0x4d4147[_0x5d732c(0x57d)](_0x33c156),_0x49d7b5=_0x4d4147[_0x5d732c(0x57d)](_0x52a949);if(_0x1493a6){let _0x19af24=_0x1493a6[0x1][_0x5d732c(0x4d4)](/-| |\+|\(|\)/g,'')['trim']();_0x23f5d2+=_0x5d732c(0x4ca)+_0x19af24+'\x0a';}else{if(_0x49d7b5){let _0x43b863=_0x49d7b5[0x1][_0x5d732c(0x63d)]();_0x23f5d2+=_0x5d732c(0x665)+_0x43b863+'\x0a';}}}),_0x23f5d2[_0x4ac0b6(0x63d)]();}async[a0_0x490cab(0x4ac)](_0x1890a8,_0x1a367e,_0x5b7a33,_0x2d4bc5=null){const _0x44af87=a0_0x490cab;if(_0x1890a8[_0x44af87(0x3c3)])try{let _0x1c848b=_0x1a367e['key'][_0x44af87(0x133)][_0x44af87(0x4d4)](/:\d{1,2}@/g,'@'),_0x54731b=_0x1a367e['key'][_0x44af87(0x54e)],_0x2a385a=_0x1c848b[_0x44af87(0x381)](_0x44af87(0x6cf)),_0x390529=_0x1a367e[_0x44af87(0x520)]?.[_0x44af87(0x4d4)](/:\d{1,2}@/g,'@')||'',_0x11a21f=_0x1a367e[_0x44af87(0x821)]?.[_0x44af87(0x120)]||_0x1a367e['message_normalized']?.[_0x44af87(0x2b8)]||_0x1a367e['message_normalized']?.[_0x44af87(0x596)]||_0x1a367e[_0x44af87(0x821)]?.[_0x44af87(0x149)]||'',_0x2a1d5e={'_id':_0x1a367e['_id'],'remoteJid':_0x54731b?this[_0x44af87(0x466)][_0x44af87(0x3fd)]:_0x2a385a?_0x390529:_0x1c848b,'pushName':_0x54731b?this[_0x44af87(0x466)]['profileName']||'Eu':_0x1a367e[_0x44af87(0x640)],'text':_0x11a21f,'type':_0x1a367e[_0x44af87(0x77d)],'when':_0x1a367e[_0x44af87(0x80d)]||Date[_0x44af87(0x7f9)]()};_0x2d4bc5||(_0x2d4bc5=await this[_0x44af87(0x261)][_0x44af87(0x745)]['findOne']({'where':{'_id':_0x1c848b}},this['instance']['wuid']));let _0x303b7b=_0x2d4bc5?_0x54731b?_0x2d4bc5[_0x44af87(0x111)]:(_0x2d4bc5[_0x44af87(0x111)]||0x0)+0x1:_0x54731b?0x0:0x1,_0xd2e7b7={'lastmsg':_0x1a367e['messageTimestamp']||Date['now'](),'ephemeralExpiration':_0x1a367e[_0x44af87(0x467)],'lastMessage':_0x2a1d5e,'unreadcount':_0x303b7b,..._0x54731b||_0x2a385a?{}:{'name':_0x1a367e['pushName']},..._0x2a385a?{'group':_0x2a385a}:{},...!_0x54731b&&!_0x2a385a&&_0x1a367e[_0x44af87(0x21c)]?{'imagechat':_0x1a367e[_0x44af87(0x21c)]}:{}};if(!_0x2a385a&&(!_0x2d4bc5?.[_0x44af87(0x241)]||!_0x2d4bc5[_0x44af87(0x241)][_0x44af87(0x684)])&&_0x1a367e[_0x44af87(0x640)]&&!_0x54731b&&(_0xd2e7b7={..._0xd2e7b7,'leadInfo.nome':_0x1a367e['pushName']}),_0x2d4bc5?.['leadInfo']['etiquetas']||(_0xd2e7b7={..._0xd2e7b7,'leadInfo.etiquetas':[]}),_0x2d4bc5?.[_0x44af87(0x241)][_0x44af87(0x7f7)]||(_0xd2e7b7={..._0xd2e7b7,'leadInfo.customFields':[]}),_0x2d4bc5?.[_0x44af87(0x241)][_0x44af87(0x390)]||(_0xd2e7b7={..._0xd2e7b7,'leadInfo.tags':[]}),_0x2d4bc5&&_0x2d4bc5?.[_0x44af87(0x602)]){let _0x3c570a=await this['repository'][_0x44af87(0x441)]['find']({'where':{}},this[_0x44af87(0x466)]['wuid']),_0x455f9a=new Set(_0x3c570a[_0x44af87(0x555)](_0x593b59=>_0x593b59[_0x44af87(0x215)])),_0x5eefe6=(_0x2d4bc5[_0x44af87(0x241)]?.['etiquetas']||[])[_0x44af87(0x5f7)](_0x3ecc9a=>_0x455f9a[_0x44af87(0x1de)](_0x3ecc9a));_0xd2e7b7={..._0xd2e7b7,'imported':!0x1,'leadInfo.etiquetas':_0x5eefe6};for(let _0x1c9d2c of _0x5eefe6)await this['AddChatLabel'](_0x1c9d2c,_0x1c848b);}if(!this['AutomateSystem']['flows'][_0x44af87(0x5f9)](_0x50278f=>_0x50278f[_0x44af87(0x492)]&&_0x11a21f[_0x44af87(0x3d0)](_0x50278f['startCommand']))&&_0x5b7a33===_0x44af87(0x4b1)&&_0x54731b&&this[_0x44af87(0x672)]?.['flowConfig'][_0x44af87(0x431)]&&_0x11a21f['trim']()!==this[_0x44af87(0x672)]?.[_0x44af87(0x15b)][_0x44af87(0x794)][_0x44af87(0x63d)]()){let _0xa6fa18=(this['AutomateSystem']?.['flowConfig'][_0x44af87(0x44e)]||0x0)*0xea60,_0x16d25a=Date[_0x44af87(0x7f9)]()+_0xa6fa18;_0x2d4bc5?.['leadInfo']?.[_0x44af87(0x679)]===0x0||(_0xd2e7b7={..._0xd2e7b7,'leadInfo.desativadoFluxoAte':_0x16d25a},this['logger'][_0x44af87(0x331)](this[_0x44af87(0x629)]+'\x20('+this['instance'][_0x44af87(0x3fd)]+_0x44af87(0x29a)+_0x16d25a+'.'));}if(_0x11a21f[_0x44af87(0x63d)]()===this['AutomateSystem']?.[_0x44af87(0x15b)]['stopConversation'][_0x44af87(0x63d)]()){this[_0x44af87(0x21e)][_0x44af87(0x331)](this[_0x44af87(0x629)]+'\x20('+this['instance'][_0x44af87(0x3fd)]+'):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20'+_0x11a21f);let _0x39edfd=Date['now']();this[_0x44af87(0x672)]?.[_0x44af87(0x15b)][_0x44af87(0x318)]===0x0?_0xd2e7b7={..._0xd2e7b7,'leadInfo.desativadoFluxoAte':_0x39edfd+0x7591f6200}:_0xd2e7b7={..._0xd2e7b7,'leadInfo.desativadoFluxoAte':_0x39edfd+this['AutomateSystem']?.[_0x44af87(0x15b)][_0x44af87(0x318)]*0x3c*0x3e8};}if(_0x2d4bc5=await this['repository']['chat']['updateOne']({'where':{'_id':_0x1c848b}},_0xd2e7b7,this['instance'][_0x44af87(0x3fd)],{'new':!0x0,'upsert':!0x0}),_0x2d4bc5)j(this[_0x44af87(0x629)],_0x44af87(0x6e8),{'chat':_0x2d4bc5});else{this[_0x44af87(0x21e)][_0x44af87(0x7a9)](this['instanceName']+'\x20('+this[_0x44af87(0x466)][_0x44af87(0x3fd)]+_0x44af87(0x584));return;}if(_0x54731b)return this[_0x44af87(0x21e)][_0x44af87(0x331)](this['instanceName']+'\x20('+this[_0x44af87(0x466)][_0x44af87(0x3fd)]+'):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...'),null;if(!this['AutomateSystem']?.[_0x44af87(0x15b)][_0x44af87(0x431)])return this[_0x44af87(0x21e)][_0x44af87(0x331)](this[_0x44af87(0x629)]+'\x20('+this[_0x44af87(0x466)][_0x44af87(0x3fd)]+'):\x20Flow\x20desativado'),null;if(_0x2d4bc5[_0x44af87(0x215)]['includes'](_0x44af87(0x6cf))&&this['AutomateSystem']?.['flowConfig'][_0x44af87(0x790)]===!0x0)return this[_0x44af87(0x21e)][_0x44af87(0x331)](this[_0x44af87(0x629)]+'\x20('+this[_0x44af87(0x466)]['wuid']+_0x44af87(0x49d)),null;if(_0x2d4bc5[_0x44af87(0x241)]){if(_0x2d4bc5['leadInfo']['desativadoFluxoAte']===0x0||_0x2d4bc5[_0x44af87(0x241)][_0x44af87(0x419)])return this[_0x44af87(0x21e)][_0x44af87(0x331)](this[_0x44af87(0x629)]+'\x20('+this[_0x44af87(0x466)][_0x44af87(0x3fd)]+'):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20'+_0x1c848b+_0x44af87(0x2bb)),null;if(_0x2d4bc5['leadInfo'][_0x44af87(0x679)]>Date[_0x44af87(0x7f9)]()&&!_0x1a367e[_0x44af87(0x821)]?.['vote'])return this[_0x44af87(0x21e)][_0x44af87(0x331)](this[_0x44af87(0x629)]+'\x20('+this[_0x44af87(0x466)]['wuid']+'):\x20Está\x20configurado\x20para\x20parar\x20até\x20'+new Date(_0x2d4bc5[_0x44af87(0x241)][_0x44af87(0x679)])[_0x44af87(0x721)]()+_0x44af87(0x2bb)),null;}this[_0x44af87(0x21e)][_0x44af87(0x331)](this[_0x44af87(0x629)]+'\x20('+this[_0x44af87(0x466)]['wuid']+_0x44af87(0x6bc)),this[_0x44af87(0x533)](_0x1a367e,_0x5b7a33);}catch(_0x3aa8e7){let _0x2def83=_0x44af87(0x54a),_0x13045a=_0x3aa8e7 instanceof Error?_0x3aa8e7[_0x44af87(0x202)]:typeof _0x3aa8e7==_0x44af87(0x328)?JSON[_0x44af87(0x647)](_0x3aa8e7):_0x3aa8e7,_0x358588=_0x2def83+':\x20'+_0x13045a;return this['logger']['error'](this[_0x44af87(0x629)]+'\x20('+this[_0x44af87(0x466)][_0x44af87(0x3fd)]+_0x44af87(0x32f)+_0x358588),null;}}async['upsertChats'](_0x595f91,_0x7d810c){const _0x573507=a0_0x490cab;if(_0x7d810c[_0x573507(0x3c3)]){let _0x1ad112=_0x595f91['map'](async _0xb8c25f=>{const _0x3f516d=_0x573507;try{let _0x55e60e={'_id':_0xb8c25f['_id'],'owner':_0xb8c25f[_0x3f516d(0x1f7)],'lastcache':0x0};if(Object['keys'](_0xb8c25f)[_0x3f516d(0x5aa)](_0x4ed24c=>{_0xb8c25f[_0x4ed24c]!==null&&(_0x55e60e[_0x4ed24c]=_0xb8c25f[_0x4ed24c]);}),_0x55e60e[_0x3f516d(0x4ea)]===null&&(_0x55e60e[_0x3f516d(0x4ea)]='Imagem\x20não\x20encontrada'),Object['keys'](_0x55e60e)['length']>0x0)return await this[_0x3f516d(0x261)][_0x3f516d(0x745)][_0x3f516d(0x341)]({'where':{'_id':_0xb8c25f[_0x3f516d(0x215)]}},_0x55e60e,this['instance'][_0x3f516d(0x3fd)]);}catch(_0x14f0d9){let _0x5b6e5f=_0x3f516d(0x483)+_0xb8c25f[_0x3f516d(0x215)],_0x21d149=_0x14f0d9 instanceof Error?_0x14f0d9[_0x3f516d(0x202)]:typeof _0x14f0d9==_0x3f516d(0x328)?JSON[_0x3f516d(0x647)](_0x14f0d9):_0x14f0d9,_0x12bd59=_0x5b6e5f+':\x20'+_0x21d149;return this[_0x3f516d(0x21e)]['error'](this[_0x3f516d(0x629)]+'\x20('+this[_0x3f516d(0x466)][_0x3f516d(0x3fd)]+'):\x20'+_0x12bd59),null;}}),_0x14d0d8=(await Promise[_0x573507(0x6fc)](_0x1ad112))[_0x573507(0x5f7)](_0x4edace=>_0x4edace!==null)['length'];this[_0x573507(0x21e)][_0x573507(0x331)](this[_0x573507(0x629)]+'\x20('+this[_0x573507(0x466)]['wuid']+_0x573507(0x32f)+_0x14d0d8+_0x573507(0x1c5)+this['instance'][_0x573507(0x3fd)]+'\x20inseridos\x20no\x20banco\x20de\x20dados...');}}async[a0_0x490cab(0x6b0)](_0x5d3860){const _0x269590=a0_0x490cab;this[_0x269590(0x21e)][_0x269590(0x331)](this[_0x269590(0x629)]+'\x20('+this[_0x269590(0x466)][_0x269590(0x3fd)]+_0x269590(0x601));let _0x3fa219={'readMessages':[{'remoteJid':_0x5d3860[_0x269590(0x32b)]['lastReceivedMessage'][_0x269590(0x1c2)][_0x269590(0x133)],'fromMe':_0x5d3860[_0x269590(0x32b)][_0x269590(0x6a5)][_0x269590(0x1c2)][_0x269590(0x54e)],'id':_0x5d3860[_0x269590(0x32b)][_0x269590(0x6a5)][_0x269590(0x1c2)]['id']}]};await this[_0x269590(0x530)](_0x3fa219);}async['StartBot'](_0x288dd7,_0x3aeb9d){const _0x22926a=a0_0x490cab;try{let {key:_0x512de5,message_normalized:_0x508828}=_0x288dd7,_0x2610c7=_0x508828,_0x11347c=_0x508828[_0x22926a(0x120)]||_0x508828[_0x22926a(0x2b8)]||_0x508828['vote']||_0x508828[_0x22926a(0x149)]||'',_0x189e49=_0x512de5[_0x22926a(0x133)],_0x581a23=null,_0x3102c6=this['AutomateSystem']['flows'][_0x22926a(0x5f9)](_0x37c1ec=>_0x37c1ec[_0x22926a(0x492)]&&_0x11347c['includes'](_0x37c1ec['startCommand']));if(_0x3102c6&&_0x3aeb9d===_0x22926a(0x4b1)){let _0x4ac35e=await this['repository'][_0x22926a(0x362)]['findOne']({'where':{'_id':_0x3102c6['_id']}});if(this[_0x22926a(0x21e)][_0x22926a(0x331)](this[_0x22926a(0x629)]+'\x20('+this[_0x22926a(0x466)][_0x22926a(0x3fd)]+_0x22926a(0x3ad)),_0x4ac35e&&_0x4ac35e[_0x22926a(0x695)]?.['includes'](this[_0x22926a(0x466)][_0x22926a(0x3fd)]))_0x581a23=await this['createNewConversation'](_0x4ac35e,_0x512de5,_0x2610c7);else return this[_0x22926a(0x21e)][_0x22926a(0x331)](this[_0x22926a(0x629)]+'\x20('+this[_0x22926a(0x466)][_0x22926a(0x3fd)]+_0x22926a(0x5c7)),null;}else this[_0x22926a(0x21e)][_0x22926a(0x331)](this[_0x22926a(0x629)]+'\x20('+this['instance']['wuid']+'):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand');if(_0x581a23=await this[_0x22926a(0x4ef)](_0x189e49,_0x2610c7),_0x581a23){this[_0x22926a(0x21e)][_0x22926a(0x331)](this[_0x22926a(0x629)]+'\x20('+this['instance'][_0x22926a(0x3fd)]+_0x22926a(0x1a0)),!_0x512de5[_0x22926a(0x54e)]&&_0x581a23[_0x22926a(0x455)]&&this[_0x22926a(0x6b0)](_0x581a23);let _0x2812c3=await this[_0x22926a(0x315)](_0x581a23);_0x2812c3&&await this[_0x22926a(0x6d0)](_0x581a23,_0x2812c3);}}catch(_0x40155e){this[_0x22926a(0x21e)][_0x22926a(0x7a9)](this['instanceName']+'\x20('+this[_0x22926a(0x466)][_0x22926a(0x3fd)]+_0x22926a(0x191)+(_0x40155e instanceof Error?_0x40155e[_0x22926a(0x202)]:JSON['stringify'](_0x40155e,null,0x2)));}}['flattenObject'](_0x16976d,_0x4e2294='',_0x824155={}){const _0x47170b=a0_0x490cab;return typeof _0x16976d!='object'||_0x16976d===null?(_0x4e2294&&(_0x824155[_0x4e2294]=_0x16976d),_0x824155):(Object[_0x47170b(0x49e)](_0x16976d)[_0x47170b(0x5aa)](([_0x2d00ee,_0x5a480d])=>{const _0x809e09=_0x47170b;let _0x558ea2=_0x4e2294?_0x4e2294+'.'+_0x2d00ee:'_'+_0x2d00ee;Array[_0x809e09(0x250)](_0x5a480d)?_0x5a480d['forEach']((_0x879e7b,_0x16e537)=>{const _0x509aab=_0x809e09;this[_0x509aab(0x333)](_0x879e7b,_0x558ea2+'['+_0x16e537+']',_0x824155);}):typeof _0x5a480d==_0x809e09(0x328)&&_0x5a480d!==null?this['flattenObject'](_0x5a480d,_0x558ea2,_0x824155):_0x824155[_0x558ea2]=String(_0x5a480d);}),_0x824155);}[a0_0x490cab(0x76f)](_0x53eea7){const _0x16a90b=a0_0x490cab;let _0x4fcccb={};for(let _0x2feb65 of _0x53eea7)typeof _0x2feb65[_0x16a90b(0x149)]==_0x16a90b(0x47c)&&typeof _0x2feb65['value']=='string'&&(_0x4fcccb[_0x2feb65[_0x16a90b(0x149)]]=_0x2feb65[_0x16a90b(0x1c0)]);return _0x4fcccb;}async['NextBlock'](_0xdf38aa){const _0x103f42=a0_0x490cab;if(!this[_0x103f42(0x672)]?.[_0x103f42(0x15b)]['enabled']||_0xdf38aa[_0x103f42(0x526)]!==_0x103f42(0x1b9)&&_0xdf38aa[_0x103f42(0x72f)]==='')return null;let _0x4b0887=_0xdf38aa['chatLog'][_0x103f42(0x3c6)]||_0x103f42(0x4f1);typeof _0xdf38aa['chatLog'][_0x103f42(0x27c)]>'u'&&(_0xdf38aa[_0x103f42(0x32b)][_0x103f42(0x27c)]=!0x0);let _0x4a71ec=_0xdf38aa[_0x103f42(0x32b)][_0x103f42(0x27c)];this[_0x103f42(0x21e)][_0x103f42(0x331)](this[_0x103f42(0x629)]+'\x20('+this[_0x103f42(0x466)][_0x103f42(0x3fd)]+_0x103f42(0x279)+_0x4b0887+_0x103f42(0x81f)+_0x4a71ec);let _0x22c677=_0x4b0887==='start'?_0xdf38aa[_0x103f42(0x7c0)]['find'](_0x3fb47=>_0x3fb47[_0x103f42(0x5af)]==='start'):_0xdf38aa[_0x103f42(0x7c0)]['find'](_0x4eeecb=>_0x4eeecb['_id']['toString']()===_0x4b0887[_0x103f42(0x751)]());if(!_0x22c677)return this[_0x103f42(0x21e)][_0x103f42(0x7a9)](this[_0x103f42(0x629)]+'\x20('+this[_0x103f42(0x466)][_0x103f42(0x3fd)]+_0x103f42(0x19d)+_0x4b0887),null;let _0x7c04a={'_pushName':_0xdf38aa?.[_0x103f42(0x32b)]?.[_0x103f42(0x6a5)]?.[_0x103f42(0x640)]||'','_sender':this[_0x103f42(0x466)][_0x103f42(0x3fd)]||'',..._0xdf38aa[_0x103f42(0x32b)][_0x103f42(0x36f)]},_0x18ae5d=null;if(_0xdf38aa[_0x103f42(0x72f)]){let _0x2c919e=_0xdf38aa[_0x103f42(0x32b)][_0x103f42(0x6a5)][_0x103f42(0x596)],_0x3eb1cc=_0xdf38aa[_0x103f42(0x51d)][_0x103f42(0x5f9)](_0x16292e=>_0x16292e[_0x103f42(0x347)]===_0x2c919e);if(_0x3eb1cc){let _0x144b02=_0x3eb1cc[_0x103f42(0x7d8)];if(_0x18ae5d=_0xdf38aa['blocks'][_0x103f42(0x5f9)](_0x13cc2d=>_0x13cc2d[_0x103f42(0x2d7)]===_0x144b02&&_0x13cc2d[_0x103f42(0x69a)]===0x1),_0x22c677[_0x103f42(0x48b)][_0x103f42(0x5cc)]){let _0x892bcd={'id':_0xdf38aa[_0x103f42(0x72f)],'remoteJid':_0xdf38aa[_0x103f42(0x133)],'fromMe':!0x0};await this['deleteMessage'](_0x892bcd);}if(_0x22c677[_0x103f42(0x48b)][_0x103f42(0x5cc)]&&_0x22c677[_0x103f42(0x48b)][_0x103f42(0x32a)]&&_0x22c677['uazapi']['menuType']==='poll'){let _0xe0143c={'number':_0xdf38aa[_0x103f42(0x133)],'options':{'delay':0x0},'textMessage':{'text':_0x103f42(0x645)+_0xdf38aa['waitingMenu_text']+_0x103f42(0x2ba)+_0x2c919e}};await this['textMessage'](_0xe0143c);}_0xdf38aa['status']='open',_0xdf38aa[_0x103f42(0x72f)]='',_0xdf38aa[_0x103f42(0x7ee)]='',_0xdf38aa[_0x103f42(0x51d)]=[];}else{this[_0x103f42(0x21e)]['verbose'](this[_0x103f42(0x629)]+'\x20('+this['instance'][_0x103f42(0x3fd)]+_0x103f42(0x41d));let _0x394a37={'activatedCount':_0xdf38aa[_0x103f42(0x32b)][_0x103f42(0x512)][_0x103f42(0x5f7)](_0x42de6a=>String(_0x42de6a[_0x103f42(0x494)])===String(_0x4b0887))['length'],'moreLogs':[_0x103f42(0x72a)]};if(_0x22c677[_0x103f42(0x48b)][_0x103f42(0x6f6)]){let _0x1bf587={'number':_0xdf38aa['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x22c677['uazapi'][_0x103f42(0x6f6)]}};await this[_0x103f42(0x59e)](_0x1bf587);}if(_0x22c677[_0x103f42(0x39f)]!==void 0x0&&_0x394a37['activatedCount']>=_0x22c677['maxActives']){let _0x2232e6=Date[_0x103f42(0x7f9)](),_0x264613=_0x22c677['stopMinutesMaxActives']??0xa;isNaN(_0x264613)&&(_0x264613=0xa);let _0x5ac292=_0x2232e6+_0x264613*0x3c*0x3e8;_0x394a37['newStoppedUntil']=_0x5ac292,_0x394a37[_0x103f42(0x804)][_0x103f42(0x3de)](_0x103f42(0x187)),this[_0x103f42(0x4c0)](_0xdf38aa,_0x5ac292),_0xdf38aa[_0x103f42(0x72f)]='',_0xdf38aa[_0x103f42(0x7ee)]='',_0xdf38aa[_0x103f42(0x51d)]=[];}return this[_0x103f42(0x23a)](_0xdf38aa,_0x22c677,_0x394a37,!0x0),null;}}if(_0x4a71ec&&_0x22c677[_0x103f42(0x7d8)]&&!_0xdf38aa[_0x103f42(0x72f)]){let _0x57497a=_0xdf38aa[_0x103f42(0x7c0)][_0x103f42(0x5f7)](_0x87dc1d=>_0x87dc1d[_0x103f42(0x2d7)][_0x103f42(0x751)]()===_0x22c677[_0x103f42(0x7d8)][_0x103f42(0x751)]())['sort']((_0x52d008,_0x310d1d)=>_0x52d008[_0x103f42(0x69a)]-_0x310d1d[_0x103f42(0x69a)]);_0x57497a[_0x103f42(0x587)]>0x0&&(_0x18ae5d=_0x57497a[0x0]);}if(!_0x18ae5d){let _0x47144e=_0x22c677[_0x103f42(0x2d7)],_0x303bed=_0xdf38aa[_0x103f42(0x7c0)][_0x103f42(0x5f7)](_0x2574b5=>_0x2574b5['groupId']===_0x47144e&&_0x2574b5['order']>_0x22c677[_0x103f42(0x69a)])['sort']((_0x455578,_0x563a34)=>_0x455578[_0x103f42(0x69a)]-_0x563a34['order']);_0x303bed['length']>0x0&&(_0x18ae5d=_0x303bed[0x0]);}if(!_0x18ae5d)return _0xdf38aa[_0x103f42(0x526)]=_0x103f42(0x53c),null;_0xdf38aa[_0x103f42(0x32b)][_0x103f42(0x36f)]=_0x7c04a;let _0xf4a602=JSON[_0x103f42(0x5a5)](JSON[_0x103f42(0x647)](_0x18ae5d));return this[_0x103f42(0x69f)](_0xf4a602,_0xdf38aa['chatLog'][_0x103f42(0x36f)]),_0xdf38aa[_0x103f42(0x32b)]['lastBlockId']=_0xf4a602[_0x103f42(0x215)],_0xdf38aa[_0x103f42(0x32b)][_0x103f42(0x27c)]=!0x0,_0xf4a602;}[a0_0x490cab(0x589)](_0x442d26,_0x426b05){const _0x1f2693=a0_0x490cab;return _0x442d26[_0x1f2693(0x4d4)](/\{\{([^}]+)\}\}/g,(_0x1eca2f,_0x1707fa)=>_0x426b05[_0x1707fa]||'');}[a0_0x490cab(0x69f)](_0x5d4499,_0x2debee){const _0x1f3a57=a0_0x490cab;for(let _0x59a9ef in _0x5d4499)typeof _0x5d4499[_0x59a9ef]==_0x1f3a57(0x47c)?_0x5d4499[_0x59a9ef]=this[_0x1f3a57(0x589)](_0x5d4499[_0x59a9ef],_0x2debee):typeof _0x5d4499[_0x59a9ef]==_0x1f3a57(0x328)&&this[_0x1f3a57(0x69f)](_0x5d4499[_0x59a9ef],_0x2debee);}async[a0_0x490cab(0x702)](_0x1a93ca,_0x586a86){const _0x5100a0=a0_0x490cab;let _0x246560=_0x586a86['_id'];if(_0x1a93ca['chatLog']&&_0x1a93ca['chatLog'][_0x5100a0(0x512)]){let _0x30bc92=_0x1a93ca['chatLog'][_0x5100a0(0x512)][_0x5100a0(0x5f7)](_0x2615a1=>String(_0x2615a1[_0x5100a0(0x494)])===String(_0x246560))[_0x5100a0(0x817)]();if(_0x30bc92&&_0x30bc92[_0x5100a0(0x7a9)]&&_0x586a86['stopIfLastReturnedError'])return _0x1a93ca[_0x5100a0(0x526)]=_0x5100a0(0x53c),await this[_0x5100a0(0x534)](_0x1a93ca),null;}if(_0x586a86[_0x5100a0(0x5af)]===_0x5100a0(0x48b)&&_0x586a86[_0x5100a0(0x48b)][_0x5100a0(0x292)]===_0x5100a0(0x405)&&_0x1a93ca[_0x5100a0(0x72f)])return _0x1a93ca[_0x5100a0(0x32b)][_0x5100a0(0x3c6)]=_0x246560,await this['saveConversationToDatabase'](_0x1a93ca),null;let _0x5c0b0d=await this[_0x5100a0(0x315)](_0x1a93ca);if(_0x1a93ca[_0x5100a0(0x32b)]&&_0x1a93ca['chatLog'][_0x5100a0(0x512)]){let _0x49228f=_0x1a93ca[_0x5100a0(0x32b)]['blockLogs']['filter'](_0x3156c0=>String(_0x3156c0['blockId'])===String(_0x246560))[_0x5100a0(0x587)];if(_0x586a86[_0x5100a0(0x39f)]!==void 0x0&&_0x49228f>=_0x586a86[_0x5100a0(0x39f)]){let _0x2f932c=Date[_0x5100a0(0x7f9)](),_0x570c28=_0x586a86[_0x5100a0(0x425)]??0xa;isNaN(_0x570c28)&&(_0x570c28=0xa);let _0x3fc84c=_0x2f932c+_0x570c28*0x3c*0x3e8,_0x4d9b4e={'newStoppedUntil':_0x3fc84c};return this[_0x5100a0(0x4c0)](_0x1a93ca,_0x3fc84c),this['updateConversation'](_0x1a93ca,_0x586a86,_0x4d9b4e,!0x0),null;}}_0x5c0b0d&&_0x5c0b0d['type']!==_0x5100a0(0x78e)&&await this[_0x5100a0(0x6d0)](_0x1a93ca,_0x5c0b0d),_0x5c0b0d||await this['saveConversationToDatabase'](_0x1a93ca),_0x5c0b0d&&_0x5c0b0d[_0x5100a0(0x5af)]===_0x5100a0(0x78e)&&(_0x1a93ca[_0x5100a0(0x32b)][_0x5100a0(0x3c6)]=_0x246560,await this[_0x5100a0(0x534)](_0x1a93ca));}async[a0_0x490cab(0x6d0)](_0x6bffb0,_0xf49b22){const _0x2c6534=a0_0x490cab;try{let _0x263010=_0xf49b22[_0x2c6534(0x5af)];this[_0x2c6534(0x21e)][_0x2c6534(0x331)](this[_0x2c6534(0x629)]+'\x20('+this['instance'][_0x2c6534(0x3fd)]+'):\x20Going\x20to\x20'+_0x263010);let _0x53fd8a={'uazapi':()=>this[_0x2c6534(0x667)](_0x6bffb0,_0xf49b22),'save':()=>this['saveTextReply'](_0x6bffb0,_0xf49b22),'stop':()=>this[_0x2c6534(0x794)](_0x6bffb0,_0xf49b22),'condition':()=>this[_0x2c6534(0x724)](_0x6bffb0,_0xf49b22),'varedit':()=>this[_0x2c6534(0x737)](_0x6bffb0,_0xf49b22),'apirequest':()=>this[_0x2c6534(0x2a2)](_0x6bffb0,_0xf49b22),'goToFlow':()=>this[_0x2c6534(0x22d)](_0x6bffb0,_0xf49b22),'scheduleFlow':()=>this[_0x2c6534(0x373)](_0x6bffb0,_0xf49b22),'awaitSeconds':()=>this[_0x2c6534(0x79a)](_0x6bffb0,_0xf49b22),'clearVariables':()=>this[_0x2c6534(0x342)](_0x6bffb0,_0xf49b22)}[_0x263010];_0x53fd8a&&await _0x53fd8a();}catch(_0x32bb13){this[_0x2c6534(0x21e)]['error'](this[_0x2c6534(0x629)]+'\x20('+this[_0x2c6534(0x466)][_0x2c6534(0x3fd)]+'):\x20Error\x20processing\x20the\x20block:\x20'+(_0x32bb13 instanceof Error?_0x32bb13[_0x2c6534(0x202)]:JSON[_0x2c6534(0x647)](_0x32bb13,null,0x2)));}}async['processawaitSeconds'](_0x286cb4,_0x1e9e1c){const _0x6f5695=a0_0x490cab;if(this[_0x6f5695(0x21e)][_0x6f5695(0x331)](this[_0x6f5695(0x629)]+'\x20('+this['instance'][_0x6f5695(0x3fd)]+_0x6f5695(0x3ef)),!_0x286cb4||!_0x1e9e1c)return this[_0x6f5695(0x21e)][_0x6f5695(0x7a9)](this[_0x6f5695(0x629)]+'\x20('+this[_0x6f5695(0x466)][_0x6f5695(0x3fd)]+_0x6f5695(0x7b7)),null;let _0x1600e8=+_0x1e9e1c['awaitSeconds'];isNaN(_0x1600e8)&&(_0x1600e8=0x0),_0x1600e8=Math['min'](_0x1600e8,0x3c),await(0x0,w[_0x6f5695(0x4a8)])(_0x1600e8*0x3e8);let _0x59277e={'moreLogs':[_0x6f5695(0x2b9)+_0x1600e8+_0x6f5695(0x28f)]};return await this['updateConversation'](_0x286cb4,_0x1e9e1c,_0x59277e),_0x1600e8;}async[a0_0x490cab(0x342)](_0x517f5d,_0x1e9aaf){const _0x18d2ed=a0_0x490cab;if(this[_0x18d2ed(0x21e)][_0x18d2ed(0x331)](this[_0x18d2ed(0x629)]+'\x20('+this['instance'][_0x18d2ed(0x3fd)]+_0x18d2ed(0x544)),!_0x517f5d||!_0x1e9aaf)return this[_0x18d2ed(0x21e)][_0x18d2ed(0x7a9)](this[_0x18d2ed(0x629)]+'\x20('+this[_0x18d2ed(0x466)][_0x18d2ed(0x3fd)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x2d8c8f=[];if(_0x1e9aaf[_0x18d2ed(0x5cb)][_0x18d2ed(0x63d)]()==='[all]'){let _0x39bb47=[_0x18d2ed(0x3af),_0x18d2ed(0x1dd),_0x18d2ed(0x5e2),_0x18d2ed(0x82f),_0x18d2ed(0x17c),_0x18d2ed(0x215),_0x18d2ed(0x752)];_0x2d8c8f=Object['keys'](_0x517f5d[_0x18d2ed(0x32b)][_0x18d2ed(0x36f)])['filter'](_0x58e917=>_0x58e917[_0x18d2ed(0x446)]('_')&&!_0x39bb47['includes'](_0x58e917));}else _0x2d8c8f=_0x1e9aaf[_0x18d2ed(0x5cb)][_0x18d2ed(0x6e6)]('|')[_0x18d2ed(0x555)](_0x5e1447=>(_0x5e1447=_0x5e1447[_0x18d2ed(0x4d4)](/[{}]/g,'')[_0x18d2ed(0x63d)](),_0x5e1447[_0x18d2ed(0x446)]('_')?_0x5e1447:'_'+_0x5e1447));let _0x46d4ad=[];_0x2d8c8f[_0x18d2ed(0x5aa)](_0x21dc21=>{const _0x245bfc=_0x18d2ed;_0x21dc21 in _0x517f5d[_0x245bfc(0x32b)][_0x245bfc(0x36f)]&&(delete _0x517f5d[_0x245bfc(0x32b)][_0x245bfc(0x36f)][_0x21dc21],_0x46d4ad['push'](_0x21dc21));}),_0x46d4ad[_0x18d2ed(0x587)]>0x0?this[_0x18d2ed(0x21e)]['verbose'](this[_0x18d2ed(0x629)]+'\x20('+this['instance'][_0x18d2ed(0x3fd)]+_0x18d2ed(0x4c6)+_0x46d4ad[_0x18d2ed(0x4c8)](',\x20')):this[_0x18d2ed(0x21e)][_0x18d2ed(0x331)](this['instanceName']+'\x20('+this[_0x18d2ed(0x466)]['wuid']+'):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção');let _0x456d68={'moreLogs':[_0x18d2ed(0x823)+_0x46d4ad[_0x18d2ed(0x4c8)](',\x20')]};return await this[_0x18d2ed(0x23a)](_0x517f5d,_0x1e9aaf,_0x456d68),null;}async[a0_0x490cab(0x373)](_0xd64726,_0x4b2f42){const _0x227cdf=a0_0x490cab;if(this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x227cdf(0x3fd)]+_0x227cdf(0x3b2)),!_0xd64726||!_0x4b2f42)return this['logger'][_0x227cdf(0x7a9)](this[_0x227cdf(0x629)]+'\x20('+this['instance']['wuid']+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x238d9c=_0xd64726['remoteJid'];_0x4b2f42[_0x227cdf(0x595)][_0x227cdf(0x133)]&&_0x4b2f42[_0x227cdf(0x595)][_0x227cdf(0x133)][_0x227cdf(0x63d)]()!==''&&(_0x238d9c=_0x4b2f42['uazapi']['remoteJid'][_0x227cdf(0x63d)]());let _0x13d6c9=_0x4b2f42[_0x227cdf(0x595)][_0x227cdf(0x513)]*0xea60,_0x18e83b=Date['now']()+_0x13d6c9,_0x52c0df={'status':'scheduled','info':_0x227cdf(0x80a)+_0xd64726[_0x227cdf(0x149)],'remoteJids':[_0x238d9c],'when':_0x18e83b,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x227cdf(0x362),'flowName':_0x4b2f42[_0x227cdf(0x595)]['flowName']};this[_0x227cdf(0x22b)](_0x52c0df);let _0xc11439=await this[_0x227cdf(0x315)](_0xd64726);_0xc11439&&await this[_0x227cdf(0x6d0)](_0xd64726,_0xc11439);}async[a0_0x490cab(0x22d)](_0x46860b,_0x5ed40){const _0x2c17bd=a0_0x490cab;if(this[_0x2c17bd(0x21e)][_0x2c17bd(0x331)](this[_0x2c17bd(0x629)]+'\x20('+this[_0x2c17bd(0x466)][_0x2c17bd(0x3fd)]+_0x2c17bd(0x27d)),!_0x46860b||!_0x5ed40)return this[_0x2c17bd(0x21e)][_0x2c17bd(0x7a9)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x2c17bd(0x7b7)),null;await this[_0x2c17bd(0x23a)](_0x46860b,_0x5ed40,{},!0x0,!0x0);let _0x50a3ef=_0x5ed40[_0x2c17bd(0x308)];_0x46860b=await this['createConversationforgoToFlow'](_0x50a3ef,_0x46860b[_0x2c17bd(0x133)],_0x46860b['chatLog'][_0x2c17bd(0x36f)]);let _0x216b82=await this[_0x2c17bd(0x315)](_0x46860b);_0x216b82&&await this[_0x2c17bd(0x6d0)](_0x46860b,_0x216b82);}async[a0_0x490cab(0x42c)](_0x44a0f3,_0x125e98,_0x4fefd8){const _0x538a82=a0_0x490cab;this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x538a82(0x466)]['wuid']+_0x538a82(0x1c6));try{let _0x1e8ea6=this[_0x538a82(0x672)][_0x538a82(0x3e7)]['find'](_0x508f8c=>_0x508f8c[_0x538a82(0x215)]===_0x44a0f3);_0x1e8ea6||this[_0x538a82(0x21e)]['error'](this[_0x538a82(0x629)]+'\x20('+this['instance'][_0x538a82(0x3fd)]+'):\x20Flow\x20\x27'+_0x44a0f3+_0x538a82(0x787));let _0xb193a9=await this[_0x538a82(0x261)][_0x538a82(0x362)]['findOne']({'where':{'_id':_0x1e8ea6[_0x538a82(0x215)]}});if(!_0xb193a9||!_0xb193a9[_0x538a82(0x695)]?.[_0x538a82(0x3d0)](this[_0x538a82(0x466)]['wuid']))throw this[_0x538a82(0x21e)][_0x538a82(0x7a9)](this[_0x538a82(0x629)]+'\x20('+this[_0x538a82(0x466)]['wuid']+_0x538a82(0x10f)+_0x44a0f3+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x538a82(0x6f9)+_0x44a0f3+_0x538a82(0x6d8));let _0x348b2d=require(_0x538a82(0x23e))[_0x538a82(0x325)],_0x5bfeb5=Date[_0x538a82(0x7f9)](),_0x1c08b3=_0x538a82(0x4f1),_0x52909b={},_0x18353f={},_0x3671ef=this[_0x538a82(0x672)]['flows'][_0x538a82(0x5f9)](_0xc3c25c=>_0xc3c25c[_0x538a82(0x215)]===_0xb193a9[_0x538a82(0x215)]?.['toString']()),_0x1580f9=_0x3671ef?.[_0x538a82(0x1d4)]??_0xb193a9[_0x538a82(0x1d4)]??0x0,_0x55a33a=_0x3671ef?.['readMessages']??_0xb193a9[_0x538a82(0x455)]??!0x1,_0x46a65f={'flowId':_0x1e8ea6[_0x538a82(0x215)],'readMessages':_0x1e8ea6[_0x538a82(0x455)],..._0xb193a9,'chatLog':null},_0xd38dd7={'lastReceivedMessage':_0x52909b,'lastSendMessage':_0x18353f,'lastBlockId':_0x1c08b3,'lastCondition':!0x0,'realVariables':_0x4fefd8};_0x46a65f[_0x538a82(0x32b)]=_0xd38dd7,_0x46a65f[_0x538a82(0x32b)][_0x538a82(0x36f)]={..._0x4fefd8},delete _0x46a65f[_0x538a82(0x215)],_0x46a65f[_0x538a82(0x215)]=new _0x348b2d(),_0x46a65f[_0x538a82(0x352)]=_0x5bfeb5,_0x46a65f['status']=_0x538a82(0x1b9),_0x46a65f[_0x538a82(0x133)]=_0x125e98,_0x46a65f[_0x538a82(0x1d4)]=_0x1580f9,_0x46a65f[_0x538a82(0x455)]=_0x55a33a;let _0x26c83a=await this[_0x538a82(0x261)][_0x538a82(0x4cb)]['updateOne'](_0x46a65f[_0x538a82(0x215)],_0x46a65f,this[_0x538a82(0x466)][_0x538a82(0x3fd)]);return this[_0x538a82(0x21e)][_0x538a82(0x331)](this['instanceName']+'\x20('+this[_0x538a82(0x466)][_0x538a82(0x3fd)]+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x26c83a?_0x46a65f:null;}catch(_0x233d50){let _0x4ba9e6='Erro\x20ao\x20copiar\x20o\x20documento',_0x59dff1=_0x233d50 instanceof Error?_0x233d50['message']:typeof _0x233d50==_0x538a82(0x328)?JSON[_0x538a82(0x647)](_0x233d50):_0x233d50,_0x2568ba=_0x4ba9e6+':\x20'+_0x59dff1;throw this[_0x538a82(0x21e)][_0x538a82(0x7a9)](this[_0x538a82(0x629)]+'\x20('+this[_0x538a82(0x466)]['wuid']+_0x538a82(0x32f)+_0x2568ba),new m(_0x2568ba);}}async[a0_0x490cab(0x2a2)](_0x1d88b4,_0xbc943d){const _0x4dd111=a0_0x490cab;let _0x3acee0,_0x22fdfb;try{let _0x17483b=_0xbc943d[_0x4dd111(0x750)];if(!_0x17483b||!_0x17483b[_0x4dd111(0x789)]||!_0x17483b[_0x4dd111(0x430)])throw new Error(_0x4dd111(0x3a7));let _0x27e668;([_0x4dd111(0x393),'https://api.openai.com/v1/images/generations','https://api.elevenlabs.io/v1/text-to-speech/'][_0x4dd111(0x259)](_0x375ba7=>_0x17483b[_0x4dd111(0x789)][_0x4dd111(0x3d0)](_0x375ba7))||_0x17483b[_0x4dd111(0x74a)])&&(_0x27e668='arraybuffer');let _0xe26e6='\u205f',_0x2c9c50;try{_0x2c9c50=JSON['parse'](_0x17483b['bodyString'][_0x4dd111(0x4d4)](new RegExp(_0xe26e6,'g'),''));}catch(_0x5a6498){throw _0x5a6498;}let _0x59e348={'method':_0x17483b['method'],'url':_0x17483b['url'],'headers':_0x17483b[_0x4dd111(0x1a4)]||{},..._0x17483b[_0x4dd111(0x430)][_0x4dd111(0x551)]()!==_0x4dd111(0x6d7)&&_0x17483b[_0x4dd111(0x3f9)]?{'data':JSON['parse'](_0x17483b['bodyString']['replace'](new RegExp(_0xe26e6,'g'),''))}:{},..._0x27e668&&{'responseType':_0x27e668}},_0x1876c5=await(0x0,Q[_0x4dd111(0x73a)])(_0x59e348),_0x465b19=_0x1876c5[_0x4dd111(0x174)][_0x4dd111(0x197)];if(_0x465b19&&_0x465b19[_0x4dd111(0x3d0)](_0x4dd111(0x6ae))||typeof _0x1876c5[_0x4dd111(0x321)]==_0x4dd111(0x47c)){if(typeof _0x1876c5[_0x4dd111(0x321)]==_0x4dd111(0x47c)){let _0x4c72e8=_0x1876c5[_0x4dd111(0x321)][_0x4dd111(0x4d4)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')['trim']();try{_0x3acee0=JSON[_0x4dd111(0x5a5)](_0x4c72e8);}catch(_0x3dcaee){this['logger'][_0x4dd111(0x7a9)]('Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20'+_0x3dcaee[_0x4dd111(0x202)]),_0x3acee0={'_apiResponse':_0x1876c5[_0x4dd111(0x321)]};}}else _0x3acee0=_0x1876c5[_0x4dd111(0x321)];let _0x549d61=_0x1d88b4[_0x4dd111(0x32b)][_0x4dd111(0x36f)],_0x30e93c=this['flattenObject'](_0x3acee0);return Object[_0x4dd111(0x17e)](_0x549d61,_0x30e93c),_0x1d88b4[_0x4dd111(0x32b)][_0x4dd111(0x36f)]=_0x549d61,_0x22fdfb={'error':!0x1,'apiResponse':_0x3acee0},this[_0x4dd111(0x23a)](_0x1d88b4,_0xbc943d,_0x22fdfb),_0x3acee0;}if(_0x465b19&&(_0x465b19['includes'](_0x4dd111(0x500))||_0x465b19[_0x4dd111(0x3d0)](_0x4dd111(0x30b))||_0x465b19[_0x4dd111(0x3d0)](_0x4dd111(0x70d))||_0x465b19[_0x4dd111(0x3d0)](_0x4dd111(0x4bf)))){this['logger']['verbose'](this[_0x4dd111(0x629)]+'\x20('+this['instance']['wuid']+_0x4dd111(0x2eb)+_0x465b19);let _0x127de8=(0x0,Y['v4'])(),_0x7e3dff='',_0x30549e={'image/jpeg':_0x4dd111(0x834),'image/png':_0x4dd111(0x12e),'image/gif':_0x4dd111(0x6ea),'image/webp':_0x4dd111(0x624),'image/svg+xml':_0x4dd111(0x385),'audio/mpeg':_0x4dd111(0x123),'audio/ogg':'.ogg','audio/wav':_0x4dd111(0x45c),'video/mp4':'.mp4','video/webm':_0x4dd111(0x809),'video/ogg':_0x4dd111(0x6f7),'text/plain':_0x4dd111(0x825),'application/pdf':'.pdf','application/msword':_0x4dd111(0x258),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x4dd111(0x447),'application/vnd.ms-excel':_0x4dd111(0x76e),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':'.xlsx','application/vnd.ms-powerpoint':_0x4dd111(0x547),'application/vnd.openxmlformats-officedocument.presentationml.presentation':_0x4dd111(0x319)};_0x30549e[_0x465b19]?(_0x7e3dff=_0x30549e[_0x465b19],this[_0x4dd111(0x21e)]['verbose'](this[_0x4dd111(0x629)]+'\x20('+this[_0x4dd111(0x466)][_0x4dd111(0x3fd)]+_0x4dd111(0x4f8)+_0x7e3dff)):(_0x7e3dff='.error',this[_0x4dd111(0x21e)][_0x4dd111(0x331)](this[_0x4dd111(0x629)]+'\x20('+this[_0x4dd111(0x466)][_0x4dd111(0x3fd)]+_0x4dd111(0x3b3)+_0x7e3dff)),_0x127de8+=_0x7e3dff,this[_0x4dd111(0x21e)][_0x4dd111(0x331)](this[_0x4dd111(0x629)]+'\x20('+this[_0x4dd111(0x466)][_0x4dd111(0x3fd)]+_0x4dd111(0x172)+_0x127de8);let _0x403d76=this[_0x4dd111(0x3ec)]['get'](_0x4dd111(0x164))['URL'];if(!_0x403d76){let _0x488cee=this['configService'][_0x4dd111(0x715)](_0x4dd111(0x41e));_0x403d76=_0x4dd111(0x208)+(_0x488cee&&_0x488cee[_0x4dd111(0x7d0)][_0x4dd111(0x6e6)]('/')[0x4]);}let _0x3f2674=Buffer[_0x4dd111(0x3f5)](_0x1876c5[_0x4dd111(0x321)]);await this['saveMediaToFile'](_0x3f2674,_0x127de8);let _0x29bbec=_0x4dd111(0x277)+_0x127de8;_0x29bbec=''+_0x403d76+_0x29bbec,_0x3acee0={'fileUrl':_0x29bbec},_0x1d88b4[_0x4dd111(0x32b)][_0x4dd111(0x36f)][_0x4dd111(0x6c4)]=_0x29bbec;let _0x2d084b=_0x1d88b4[_0x4dd111(0x32b)]['realVariables'],_0x2c4cc4=this[_0x4dd111(0x333)](_0x3acee0);return Object['assign'](_0x2d084b,_0x2c4cc4),_0x1d88b4[_0x4dd111(0x32b)][_0x4dd111(0x36f)]=_0x2d084b,_0x22fdfb={'error':!0x1,'apiResponse':{'fileUrl':_0x29bbec}},this['updateConversation'](_0x1d88b4,_0xbc943d,_0x22fdfb),_0x3acee0;}}catch(_0x49f330){this[_0x4dd111(0x21e)][_0x4dd111(0x7a9)](_0x4dd111(0x1ee)+_0x49f330['message']),_0x49f330[_0x4dd111(0x7c8)]&&(_0x3acee0=_0x49f330[_0x4dd111(0x7c8)]['data']);let _0x3acb42=_0x1d88b4[_0x4dd111(0x32b)][_0x4dd111(0x36f)],_0x1a8593=this[_0x4dd111(0x333)](_0x3acee0);return Object[_0x4dd111(0x17e)](_0x3acb42,_0x1a8593),_0x1d88b4[_0x4dd111(0x32b)][_0x4dd111(0x36f)]=_0x3acb42,_0x22fdfb={'error':!0x0,'errorLog':_0x49f330['toString'](),'apiResponse':_0x3acee0},this[_0x4dd111(0x23a)](_0x1d88b4,_0xbc943d,_0x22fdfb),{'success':!0x1};}}[a0_0x490cab(0x377)](_0x4031c5,_0x3029df){const _0x2d1803=a0_0x490cab;let _0x164e1a=_0x1e76dc=>{let _0x588fde=_0x1e76dc['replace'](/[^0-9.,-]/g,'')['replace'](',','.'),_0x326857=parseFloat(_0x588fde);return isNaN(_0x326857)?null:_0x326857;},_0x2eb511=_0x3029df[_0x2d1803(0x285)],_0x2d30bf=_0x3029df[_0x2d1803(0x5ec)];typeof _0x2eb511==_0x2d1803(0x47c)&&(_0x2eb511=this[_0x2d1803(0x589)](_0x2eb511,_0x4031c5[_0x2d1803(0x32b)][_0x2d1803(0x36f)])??''),typeof _0x2d30bf=='string'&&(_0x2d30bf=this[_0x2d1803(0x589)](_0x2d30bf,_0x4031c5[_0x2d1803(0x32b)][_0x2d1803(0x36f)])??'');let _0x2ddeed=null;if(!_0x3029df[_0x2d1803(0x61c)])return null;switch(this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x2d1803(0x3fd)]+'):\x20newFirstValue\x20após\x20replaceVariables:'+_0x2eb511),this['logger'][_0x2d1803(0x331)](this['instanceName']+'\x20('+this[_0x2d1803(0x466)][_0x2d1803(0x3fd)]+_0x2d1803(0x336)+_0x2d30bf),_0x3029df[_0x2d1803(0x61c)]){case'+':case'-':case'*':case'/':let _0x563dd7=_0x164e1a(_0x2eb511||'0'),_0x39b616=_0x164e1a(_0x2d30bf||'0');if(_0x563dd7===null)return null;switch(_0x3029df['editOperator']){case'+':_0x2ddeed=_0x563dd7+(_0x39b616??0x0);break;case'-':_0x2ddeed=_0x563dd7-(_0x39b616??0x0);break;case'*':_0x2ddeed=_0x563dd7*(_0x39b616??0x1);break;case'/':_0x39b616!==0x0&&(_0x2ddeed=_0x563dd7/(_0x39b616??0x1));break;}break;case _0x2d1803(0x607):case _0x2d1803(0x687):let _0x1c04af=_0x2d30bf,_0x40f4e8=_0x3029df[_0x2d1803(0x6b4)];if(typeof _0x40f4e8==_0x2d1803(0x47c)&&(_0x40f4e8=this[_0x2d1803(0x589)](_0x40f4e8,_0x4031c5['chatLog'][_0x2d1803(0x36f)])??''),_0x1c04af&&_0x40f4e8!==void 0x0){let _0x3e650e=_0x3029df['editOperator']===_0x2d1803(0x607)?new RegExp(_0x1c04af[_0x2d1803(0x4d4)](/[-\/\\^$*+?.()|[\]{}]/g,_0x2d1803(0x1af)),'g'):new RegExp(_0x1c04af,'g');_0x2ddeed=_0x2eb511[_0x2d1803(0x4d4)](_0x3e650e,_0x40f4e8);}else console[_0x2d1803(0x487)](_0x2d1803(0x2b1));break;case'setNewValue':_0x2ddeed=_0x2d30bf;break;case'extractRegex':let _0x3dae54=_0x2eb511[_0x2d1803(0x57d)](new RegExp(_0x2d30bf||''));_0x2ddeed=_0x3dae54?_0x3dae54[0x0]:'';break;case'truncatedto':_0x2ddeed=_0x2eb511[_0x2d1803(0x3b7)](0x0,parseInt(_0x2d30bf||'0'));break;case _0x2d1803(0x4b8):let _0x2d55bb=parseInt(_0x2d30bf||'0');_0x2ddeed=_0x2eb511[_0x2d1803(0x3b7)](_0x2eb511[_0x2d1803(0x587)]-_0x2d55bb);break;case _0x2d1803(0x764):let _0x4ba594=_0x164e1a(_0x2eb511),_0x162164=parseInt(_0x2d30bf||'0');_0x162164=Math[_0x2d1803(0x4de)](_0x162164),_0x4ba594!==null?_0x2ddeed=_0x4ba594[_0x2d1803(0x721)](_0x2d1803(0x5db),{'minimumFractionDigits':_0x162164,'maximumFractionDigits':_0x162164}):(console[_0x2d1803(0x487)](_0x2d1803(0x365)+_0x2eb511),_0x2ddeed=null);break;case'toBRL':let _0x51344f=_0x164e1a(_0x2eb511);_0x51344f!==null?_0x2ddeed=_0x51344f[_0x2d1803(0x721)](_0x2d1803(0x5db),{'style':_0x2d1803(0x479),'currency':_0x2d1803(0x206)}):(console[_0x2d1803(0x487)]('Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20'+_0x2eb511),_0x2ddeed=null);break;case _0x2d1803(0x3fc):_0x2ddeed=_0x2eb511[_0x2d1803(0x551)]();break;case _0x2d1803(0x3b4):_0x2ddeed=_0x2eb511[_0x2d1803(0x637)]();break;case _0x2d1803(0x1be):_0x2ddeed=_0x2eb511[_0x2d1803(0x6e6)]('\x20')[_0x2d1803(0x555)](_0x48f775=>_0x48f775[_0x2d1803(0x244)](0x0)[_0x2d1803(0x551)]()+_0x48f775[_0x2d1803(0x3b7)](0x1)[_0x2d1803(0x637)]())['join']('\x20');break;case _0x2d1803(0x521):_0x2ddeed=_0x2eb511[_0x2d1803(0x63d)]();break;default:_0x2ddeed=_0x2eb511;}return _0x2ddeed!==null?_0x2ddeed[_0x2d1803(0x751)]():null;}async['processvaredits'](_0x3a65d5,_0x4ddf62){const _0x3ce4b0=a0_0x490cab;try{let _0x579591=_0x3a65d5[_0x3ce4b0(0x51a)]?.['filter'](_0x5b1deb=>_0x5b1deb[_0x3ce4b0(0x494)]===_0x4ddf62[_0x3ce4b0(0x215)]?.[_0x3ce4b0(0x751)]())||[],_0x3e91c4=_0x4ddf62[_0x3ce4b0(0x3ac)],_0x413044=null,_0x59e4f9=[],_0x59537e=_0x3a65d5[_0x3ce4b0(0x32b)][_0x3ce4b0(0x36f)][_0x3e91c4];_0x59e4f9[_0x3ce4b0(0x3de)](_0x3ce4b0(0x52a)+_0x59537e+'\x22');for(let _0x3a98d9 of _0x579591){_0x3a98d9[_0x3ce4b0(0x285)]=_0x59537e,_0x413044=_0x3a98d9[_0x3ce4b0(0x285)];let _0x81979f;try{_0x81979f=this[_0x3ce4b0(0x377)](_0x3a65d5,_0x3a98d9);}catch(_0x398cfe){this['logger'][_0x3ce4b0(0x7a9)]('Erro\x20ao\x20aplicar\x20varedit:\x20'+_0x398cfe[_0x3ce4b0(0x202)]);continue;}if(_0x81979f!==null){let _0x26b789='Operador:\x20\x22'+_0x3a98d9[_0x3ce4b0(0x61c)]+'\x22',_0x4deb4b=['toBRL',_0x3ce4b0(0x3fc),_0x3ce4b0(0x3b4),_0x3ce4b0(0x1be),'trimmed'];_0x3a98d9[_0x3ce4b0(0x61c)]===_0x3ce4b0(0x607)||_0x3a98d9[_0x3ce4b0(0x61c)]===_0x3ce4b0(0x687)?_0x26b789+=',\x20valor\x20a\x20encontrar:\x20\x22'+_0x3a98d9['secondValue']+_0x3ce4b0(0x7e9)+_0x3a98d9[_0x3ce4b0(0x6b4)]+'\x22':!_0x4deb4b[_0x3ce4b0(0x3d0)](_0x3a98d9[_0x3ce4b0(0x61c)])&&_0x3a98d9[_0x3ce4b0(0x5ec)]!==null&&_0x3a98d9[_0x3ce4b0(0x5ec)]!==void 0x0&&(_0x26b789+=',\x20valor\x20passado:\x20\x22'+_0x3a98d9[_0x3ce4b0(0x5ec)]+'\x22'),_0x26b789+=_0x3ce4b0(0x5ae)+_0x81979f+'.',_0x59e4f9['push'](_0x26b789);}_0x81979f!==null&&(_0x59537e=_0x81979f);}if(_0x3a65d5[_0x3ce4b0(0x32b)][_0x3ce4b0(0x36f)]&&_0x4ddf62[_0x3ce4b0(0x3ac)]){_0x3a65d5['chatLog'][_0x3ce4b0(0x36f)][_0x4ddf62[_0x3ce4b0(0x3ac)]]=_0x59537e;let _0x4a3e16={'variable':_0x4ddf62[_0x3ce4b0(0x3ac)],'oldValue':_0x413044,'newValue':_0x59537e,'moreLogs':_0x59e4f9};try{this['updateConversation'](_0x3a65d5,_0x4ddf62,_0x4a3e16);}catch(_0x14cc48){this[_0x3ce4b0(0x21e)]['error'](_0x3ce4b0(0x43c)+_0x14cc48[_0x3ce4b0(0x202)]);}}return _0x3e91c4;}catch(_0x391fb6){return this['logger'][_0x3ce4b0(0x7a9)](_0x3ce4b0(0x269)+_0x391fb6['message']),null;}}async[a0_0x490cab(0x724)](_0x16c998,_0x62dce9){const _0x5f2ada=a0_0x490cab;try{let _0x1cf2ef=[],_0xfdc291=_0x16c998[_0x5f2ada(0x7fd)][_0x5f2ada(0x5f7)](_0x30cb7a=>_0x30cb7a[_0x5f2ada(0x494)]===_0x62dce9[_0x5f2ada(0x215)][_0x5f2ada(0x751)]()),_0x39d28b=null,_0x8f6b48=!0x1;for(let _0x58362f of _0xfdc291){let _0x4ea81e=this['evaluateCondition'](_0x16c998,_0x58362f);_0x1cf2ef[_0x5f2ada(0x3de)](_0x5f2ada(0x4cc)+_0x58362f[_0x5f2ada(0x285)]+',\x20Comparador:\x20'+_0x58362f['expression']+_0x5f2ada(0x1d1)+_0x58362f[_0x5f2ada(0x5ec)]+',\x20Resultado:\x20'+_0x4ea81e),_0x39d28b===null?_0x39d28b=_0x4ea81e:_0x58362f[_0x5f2ada(0x3f2)]===_0x5f2ada(0x56b)?(_0x39d28b=_0x39d28b&&_0x4ea81e,_0x4ea81e||(_0x8f6b48=!0x0)):_0x58362f[_0x5f2ada(0x3f2)]==='or'&&(_0x8f6b48||(_0x39d28b=_0x39d28b||_0x4ea81e));}_0x39d28b===null&&(_0x39d28b=!0x0);let _0x4af48a={'moreLogs':_0x1cf2ef};_0x16c998[_0x5f2ada(0x32b)][_0x5f2ada(0x27c)]=_0x39d28b,await this[_0x5f2ada(0x23a)](_0x16c998,_0x62dce9,_0x4af48a);}catch(_0xace15e){this[_0x5f2ada(0x21e)][_0x5f2ada(0x7a9)](this['instanceName']+'\x20('+this[_0x5f2ada(0x466)][_0x5f2ada(0x3fd)]+_0x5f2ada(0x7c5)+(_0xace15e instanceof Error?_0xace15e[_0x5f2ada(0x202)]:JSON['stringify'](_0xace15e,null,0x2)));}}[a0_0x490cab(0x314)](_0x2c6bf4,_0x109852){const _0x4e354a=a0_0x490cab;let _0x679f34=_0x109852['firstValue'],_0x4ff81d=_0x109852[_0x4e354a(0x5ec)];typeof _0x679f34==_0x4e354a(0x47c)&&(_0x679f34=this[_0x4e354a(0x589)](_0x679f34,_0x2c6bf4[_0x4e354a(0x32b)][_0x4e354a(0x36f)])??''),typeof _0x4ff81d==_0x4e354a(0x47c)&&(_0x4ff81d=this[_0x4e354a(0x589)](_0x4ff81d,_0x2c6bf4[_0x4e354a(0x32b)][_0x4e354a(0x36f)])??'');try{switch(_0x109852['expression']){case'equal':return _0x679f34===_0x4ff81d;case _0x4e354a(0x535):return _0x679f34!==_0x4ff81d;case'contains':return this['contains'](_0x679f34,_0x4ff81d);case _0x4e354a(0x423):return!this[_0x4e354a(0x763)](_0x679f34,_0x4ff81d);case'greater':return parseFloat(_0x679f34)>parseFloat(_0x4ff81d);case _0x4e354a(0x451):return parseFloat(_0x679f34)<parseFloat(_0x4ff81d);case _0x4e354a(0x605):return _0x679f34!=='';case'empty':return _0x679f34==='';case _0x4e354a(0x683):return new RegExp(_0x4ff81d)[_0x4e354a(0x22f)](_0x679f34);case _0x4e354a(0x5b2):return!new RegExp(_0x4ff81d)[_0x4e354a(0x22f)](_0x679f34);default:return!0x1;}}catch(_0x3b4ef3){return this[_0x4e354a(0x21e)]['error'](_0x4e354a(0x13c)+_0x3b4ef3),!0x1;}}[a0_0x490cab(0x763)](_0x3c4914,_0x2b7b01){const _0xeb3515=a0_0x490cab;if(_0x3c4914===_0x2b7b01&&/^\d+$/[_0xeb3515(0x22f)](_0x3c4914))return!0x0;if(this['isListOfNumbers'](_0x3c4914)&&/^\d+$/[_0xeb3515(0x22f)](_0x2b7b01)){let _0x1dc429=_0x3c4914[_0xeb3515(0x6e6)](',')['map'](_0x27531d=>parseInt(_0x27531d[_0xeb3515(0x63d)]())),_0x4eca4a=parseInt(_0x2b7b01);return _0x1dc429[_0xeb3515(0x3d0)](_0x4eca4a);}return _0x3c4914['includes'](_0x2b7b01);}[a0_0x490cab(0x421)](_0x213ab6){return/^\d+(,\d+)*$/['test'](_0x213ab6);}[a0_0x490cab(0x3b6)](_0x4d3273){const _0x230d00=a0_0x490cab;let _0x4f4779=!0x0,_0x583339=null;for(let _0x368c8a of _0x4d3273){let _0x451e20=this[_0x230d00(0x7d5)](_0x368c8a);if(_0x583339==='or'&&_0x451e20){_0x4f4779=!0x0;break;}if(_0x583339===_0x230d00(0x56b)&&!_0x451e20){_0x4f4779=!0x1;break;}_0x583339=_0x368c8a[_0x230d00(0x3f2)];}return _0x4f4779;}[a0_0x490cab(0x7d5)](_0x53baf9){const _0x2aec8d=a0_0x490cab;let _0x5671ba=_0x53baf9['firstValue'],_0x3e874b=_0x53baf9['secondValue'];try{switch(_0x53baf9[_0x2aec8d(0x72c)]){case _0x2aec8d(0x223):return String(_0x5671ba)===String(_0x3e874b);case _0x2aec8d(0x535):return String(_0x5671ba)!==String(_0x3e874b);case'contains':return String(_0x5671ba)[_0x2aec8d(0x3d0)](String(_0x3e874b));case'notContains':return!String(_0x5671ba)[_0x2aec8d(0x3d0)](String(_0x3e874b));case _0x2aec8d(0x50d):return parseFloat(String(_0x5671ba))>parseFloat(String(_0x3e874b));case _0x2aec8d(0x451):return parseFloat(String(_0x5671ba))<parseFloat(String(_0x3e874b));case _0x2aec8d(0x605):return String(_0x5671ba)!=='';case'empty':return String(_0x5671ba)==='';case'matchRegex':return new RegExp(String(_0x3e874b))[_0x2aec8d(0x22f)](String(_0x5671ba));case'notMatchRegex':return!new RegExp(String(_0x3e874b))[_0x2aec8d(0x22f)](String(_0x5671ba));default:return!0x1;}}catch(_0x3f2f48){return this[_0x2aec8d(0x21e)][_0x2aec8d(0x7a9)](_0x2aec8d(0x13c)+_0x3f2f48),!0x1;}}async[a0_0x490cab(0x59a)](_0x4a4315,_0x732df9){const _0x766f80=a0_0x490cab;if(this['logger'][_0x766f80(0x331)](this[_0x766f80(0x629)]+'\x20('+this['instance'][_0x766f80(0x3fd)]+_0x766f80(0x5a1)),!_0x4a4315||!_0x732df9)return this[_0x766f80(0x21e)]['error'](this[_0x766f80(0x629)]+'\x20('+this[_0x766f80(0x466)]['wuid']+_0x766f80(0x7b7)),null;let _0x317ada=_0x4a4315[_0x766f80(0x32b)][_0x766f80(0x6a5)][_0x766f80(0x1c2)]['id'];this[_0x766f80(0x21e)][_0x766f80(0x331)](this['instanceName']+'\x20('+this[_0x766f80(0x466)][_0x766f80(0x3fd)]+'):\x20mediaMessageInfoId\x20:\x20'+_0x317ada);let _0x69c2c3={'key':{'id':_0x317ada}},_0x59136c=_0x732df9[_0x766f80(0x3ac)];_0x4a4315['chatLog']['realVariables']['_'+_0x59136c+_0x766f80(0x5e3)]=null,_0x4a4315[_0x766f80(0x32b)]['realVariables']['_'+_0x59136c+_0x766f80(0x813)]=null,_0x4a4315['chatLog'][_0x766f80(0x36f)]['_'+_0x59136c+_0x766f80(0x361)]=null,_0x4a4315[_0x766f80(0x32b)][_0x766f80(0x36f)]['_'+_0x59136c+_0x766f80(0x732)]=_0x4a4315[_0x766f80(0x32b)][_0x766f80(0x6a5)]['type'];try{let _0x2103aa=await this[_0x766f80(0x552)](_0x69c2c3);this['logger'][_0x766f80(0x331)](this[_0x766f80(0x629)]+'\x20('+this[_0x766f80(0x466)][_0x766f80(0x3fd)]+_0x766f80(0x3e1)),_0x4a4315[_0x766f80(0x32b)][_0x766f80(0x36f)]['_'+_0x59136c+_0x766f80(0x41b)]=_0x2103aa[_0x766f80(0x6c4)],_0x4a4315['chatLog'][_0x766f80(0x36f)]['_'+_0x59136c+_0x766f80(0x813)]=_0x2103aa[_0x766f80(0x178)];let _0x2580f8=_0x2103aa[_0x766f80(0x178)][_0x766f80(0x57d)](/\/(\w+)$/),_0x40cbb3=_0x2580f8?_0x2580f8[0x1]:null;_0x4a4315[_0x766f80(0x32b)][_0x766f80(0x36f)]['_'+_0x59136c+_0x766f80(0x361)]=_0x40cbb3,this[_0x766f80(0x21e)][_0x766f80(0x331)](this[_0x766f80(0x629)]+'\x20('+this[_0x766f80(0x466)][_0x766f80(0x3fd)]+_0x766f80(0x138)+_0x59136c+'\x27.');}catch(_0x146de4){this[_0x766f80(0x21e)][_0x766f80(0x7a9)](this['instanceName']+'\x20('+this[_0x766f80(0x466)][_0x766f80(0x3fd)]+'):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20'+_0x146de4[_0x766f80(0x202)]);}let _0x1d06f1=_0x4a4315[_0x766f80(0x32b)][_0x766f80(0x6a5)]['text']||_0x4a4315[_0x766f80(0x32b)][_0x766f80(0x6a5)][_0x766f80(0x2b8)]||_0x4a4315[_0x766f80(0x32b)][_0x766f80(0x6a5)][_0x766f80(0x596)];try{_0x4a4315['chatLog'][_0x766f80(0x36f)]||(_0x4a4315['chatLog'][_0x766f80(0x36f)]={});let _0x132d77=_0x4a4315['chatLog'][_0x766f80(0x36f)][_0x59136c];_0x4a4315['chatLog']['realVariables'][_0x59136c]=_0x1d06f1;let _0x5e0816={'variable':_0x59136c,'oldValue':_0x132d77,'newValue':_0x1d06f1};this[_0x766f80(0x23a)](_0x4a4315,_0x732df9,_0x5e0816),this[_0x766f80(0x21e)][_0x766f80(0x331)](this['instanceName']+'\x20('+this[_0x766f80(0x466)][_0x766f80(0x3fd)]+'):\x20Conversa\x20atualizada\x20em\x20memória');}catch(_0x1c972f){let _0x5ea698={'error':!0x0,'errorLog':_0x1c972f[_0x766f80(0x751)]()};return this[_0x766f80(0x23a)](_0x4a4315,_0x732df9,_0x5ea698),this[_0x766f80(0x21e)][_0x766f80(0x7a9)](this[_0x766f80(0x629)]+'\x20('+this[_0x766f80(0x466)]['wuid']+_0x766f80(0x29e)+(_0x1c972f instanceof Error?_0x1c972f[_0x766f80(0x202)]:JSON[_0x766f80(0x647)](_0x1c972f,null,0x2))),null;}}async[a0_0x490cab(0x794)](_0x1dd893,_0x585474){const _0x8b4188=a0_0x490cab;if(this[_0x8b4188(0x21e)][_0x8b4188(0x331)](this[_0x8b4188(0x629)]+'\x20('+this[_0x8b4188(0x466)][_0x8b4188(0x3fd)]+_0x8b4188(0x81e)),!_0x1dd893||!_0x585474)return this['logger'][_0x8b4188(0x7a9)](this[_0x8b4188(0x629)]+'\x20('+this['instance']['wuid']+_0x8b4188(0x7b7)),null;let _0x5d2b00=Date['now'](),_0x3bd5b9=parseInt(_0x585474[_0x8b4188(0x318)],0xa);if(isNaN(_0x3bd5b9))return this[_0x8b4188(0x21e)][_0x8b4188(0x7a9)](this[_0x8b4188(0x629)]+'\x20('+this[_0x8b4188(0x466)][_0x8b4188(0x3fd)]+_0x8b4188(0x18f)),null;let _0x21c7c1={'newStoppedUntil':_0x5d2b00+_0x3bd5b9*0x3c*0x3e8};return await this[_0x8b4188(0x23a)](_0x1dd893,_0x585474,_0x21c7c1,!0x0),null;}async[a0_0x490cab(0x667)](_0x145d1f,_0x1325d6){const _0x5be369=a0_0x490cab;try{switch(_0x1325d6[_0x5be369(0x48b)][_0x5be369(0x292)]){case _0x5be369(0x705):await this[_0x5be369(0x2d3)](_0x145d1f,_0x1325d6);break;case _0x5be369(0x255):await this[_0x5be369(0x23d)](_0x145d1f,_0x1325d6);break;case'sendLocation':await this['uazapiSendLocation'](_0x145d1f,_0x1325d6);break;case'sendAudio':await this[_0x5be369(0x43a)](_0x145d1f,_0x1325d6);break;case _0x5be369(0x2c2):await this[_0x5be369(0x6b9)](_0x145d1f,_0x1325d6);break;case'sendPoll':await this[_0x5be369(0x1a9)](_0x145d1f,_0x1325d6);break;case'sendMenu':await this['uazapiSendMenu'](_0x145d1f,_0x1325d6);break;case _0x5be369(0x5fa):await this[_0x5be369(0x5ba)](_0x145d1f,_0x1325d6);break;default:this[_0x5be369(0x21e)][_0x5be369(0x7a9)](this[_0x5be369(0x629)]+'\x20('+this['instance'][_0x5be369(0x3fd)]+_0x5be369(0x46e)+_0x1325d6[_0x5be369(0x48b)]['command']);}}catch(_0x5a48a9){this[_0x5be369(0x21e)]['error'](this[_0x5be369(0x629)]+'\x20('+this['instance'][_0x5be369(0x3fd)]+_0x5be369(0x668)+(_0x5a48a9 instanceof Error?_0x5a48a9[_0x5be369(0x202)]:JSON[_0x5be369(0x647)](_0x5a48a9,null,0x2)));}}async[a0_0x490cab(0x23a)](_0x163ada,_0xeed587,_0x5f2bdf,_0x3324ba=!0x1,_0x434f3b=!0x1){const _0x236566=a0_0x490cab;_0x163ada['chatLog'][_0x236566(0x512)]||(_0x163ada[_0x236566(0x32b)][_0x236566(0x512)]=[]);let _0x24feec=(_0x163ada['chatLog']['blockLogs']?.[_0x236566(0x587)]??0x0)+0x1,_0x43eb07=_0x163ada[_0x236566(0x32b)][_0x236566(0x512)][_0x236566(0x5f7)](_0x3f0111=>String(_0x3f0111['blockId'])===String(_0xeed587[_0x236566(0x215)]))[_0x236566(0x587)]+0x1,_0x20f19a=_0x5f2bdf?.[_0x236566(0x75a)]??Date[_0x236566(0x7f9)](),_0x4576b9=_0x5f2bdf?.[_0x236566(0x7a9)]?_0x5f2bdf[_0x236566(0x11e)]??_0x5f2bdf['error'][_0x236566(0x751)]():void 0x0,_0x5789ec={'onTime':_0x20f19a,'blockId':_0xeed587[_0x236566(0x215)],'order':_0x24feec,'activatedCount':_0x43eb07,'error':_0x5f2bdf?.[_0x236566(0x7a9)]??!0x1,'messageId':_0x5f2bdf?.[_0x236566(0x420)],'apiResponse':_0x5f2bdf?.['apiResponse'],'apiResponseString':_0x5f2bdf?.[_0x236566(0x1b8)]?JSON[_0x236566(0x647)](_0x5f2bdf?.['apiResponse']):void 0x0,'variable':_0x5f2bdf?.[_0x236566(0x796)],'oldValue':_0x5f2bdf?.[_0x236566(0x4a9)],'newValue':_0x5f2bdf?.[_0x236566(0x81b)],'newStoppedUntil':_0x5f2bdf?.[_0x236566(0x549)],'moreLogs':_0x5f2bdf?.[_0x236566(0x804)],'errorLog':_0x4576b9};if(_0x5f2bdf[_0x236566(0x804)]&&_0x5f2bdf[_0x236566(0x804)][_0x236566(0x587)]>0x0){let _0x59833c=_0x5f2bdf[_0x236566(0x804)][_0x236566(0x555)](_0x39f406=>this[_0x236566(0x713)](_0x39f406,_0x163ada[_0x236566(0x32b)][_0x236566(0x36f)]));_0x5789ec[_0x236566(0x804)]=_0x59833c;}if(_0x163ada[_0x236566(0x32b)][_0x236566(0x36f)]||(_0x163ada[_0x236566(0x32b)][_0x236566(0x36f)]={}),_0x163ada[_0x236566(0x32b)][_0x236566(0x36f)]['_activatedCount']=String(_0x43eb07),_0x163ada['chatLog'][_0x236566(0x36f)][_0x236566(0x5e2)]=String(_0x5f2bdf[_0x236566(0x7a9)]??!0x1),_0x163ada[_0x236566(0x32b)][_0x236566(0x512)]['push'](_0x5789ec),_0x163ada[_0x236566(0x32b)][_0x236566(0x36f)][_0x236566(0x7ea)]&&_0x163ada[_0x236566(0x32b)][_0x236566(0x36f)][_0x236566(0x7ea)]!==_0x163ada[_0x236566(0x133)]){let _0x1436aa=(await this[_0x236566(0x3d6)]({'numbers':[_0x163ada[_0x236566(0x32b)]['realVariables']['telefone']]}))[0x0][_0x236566(0x2ec)];_0x163ada['chatLog'][_0x236566(0x36f)][_0x236566(0x7ea)]=_0x1436aa,_0x163ada[_0x236566(0x133)]=_0x1436aa;try{let _0x15f5f8={'_id':{'$ne':_0x163ada[_0x236566(0x215)]},'remoteJid':_0x1436aa,'status':_0x236566(0x1b9)},_0x4a431f={'status':_0x236566(0x53c)};await this[_0x236566(0x261)][_0x236566(0x4cb)][_0x236566(0x459)](_0x15f5f8,_0x4a431f,this[_0x236566(0x466)]['wuid']),this['logger']['verbose'](this[_0x236566(0x629)]+'\x20('+this[_0x236566(0x466)][_0x236566(0x3fd)]+_0x236566(0x7ef));}catch(_0x52f94e){this['logger'][_0x236566(0x7a9)](this[_0x236566(0x629)]+'\x20('+this[_0x236566(0x466)][_0x236566(0x3fd)]+_0x236566(0x2f9)+_0x52f94e['message']);}try{let _0x54b6a4=_0x163ada[_0x236566(0x32b)][_0x236566(0x36f)],_0x16201c=await this[_0x236566(0x673)](_0x1436aa),_0x58eefa={..._0x54b6a4,..._0x16201c,'_remoteJid':_0x1436aa};_0x163ada[_0x236566(0x32b)]['realVariables']=_0x58eefa;}catch(_0xc347b3){this[_0x236566(0x21e)]['error'](this[_0x236566(0x629)]+'\x20('+this['instance'][_0x236566(0x3fd)]+'):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20'+_0xc347b3[_0x236566(0x202)]);}}_0x163ada[_0x236566(0x32b)][_0x236566(0x3c6)]=_0xeed587[_0x236566(0x215)]['toString'](),_0x163ada[_0x236566(0x32b)][_0x236566(0x7de)]&&(_0x163ada[_0x236566(0x32b)][_0x236566(0x7de)]=_0x163ada[_0x236566(0x32b)][_0x236566(0x7de)]),_0x163ada['chatLog'][_0x236566(0x6a5)]&&(_0x163ada['chatLog']['lastReceivedMessage']=_0x163ada[_0x236566(0x32b)][_0x236566(0x6a5)]),_0x163ada[_0x236566(0x32b)][_0x236566(0x27c)]&&(_0x163ada[_0x236566(0x32b)][_0x236566(0x27c)]=_0x163ada[_0x236566(0x32b)][_0x236566(0x27c)]),_0x434f3b&&(_0x163ada[_0x236566(0x526)]='closed'),_0x3324ba?this[_0x236566(0x534)](_0x163ada):this[_0x236566(0x702)](_0x163ada,_0xeed587);}['replaceVariablesLogs'](_0xe648ab,_0x3277d3){const _0x289a1a=a0_0x490cab;return _0xe648ab['replace'](/\{\{([^}]+)\}\}/g,(_0x155317,_0x4c9f2a)=>_0x3277d3[_0x4c9f2a]?'{{'+_0x4c9f2a+_0x289a1a(0x404)+_0x3277d3[_0x4c9f2a]+'\x22':'{{'+_0x4c9f2a+_0x289a1a(0x4f7));}async[a0_0x490cab(0x534)](_0xd4d2){const _0x599297=a0_0x490cab;try{let _0xc3d81e=Object['entries'](_0xd4d2[_0x599297(0x32b)]['realVariables'])[_0x599297(0x555)](([_0x3d98c8,_0x516c95])=>({'name':_0x3d98c8,'value':_0x516c95})),_0x3f8995={'status':_0xd4d2[_0x599297(0x526)],'remoteJid':_0xd4d2['remoteJid'],'blocks':_0xd4d2['blocks'],'waitingMenu_id':_0xd4d2['waitingMenu_id'],'waitingMenu_text':_0xd4d2[_0x599297(0x7ee)],'waitingMenu_replyOptions':_0xd4d2[_0x599297(0x51d)],'chatLog':{'lastBlockId':_0xd4d2[_0x599297(0x32b)]['lastBlockId'],'lastSendMessage':_0xd4d2[_0x599297(0x32b)]['lastSendMessage'],'lastReceivedMessage':_0xd4d2['chatLog'][_0x599297(0x6a5)],'lastCondition':_0xd4d2[_0x599297(0x32b)]['lastCondition'],'chatVariables':_0xc3d81e,'realVariables':_0xd4d2[_0x599297(0x32b)][_0x599297(0x36f)],'blockLogs':_0xd4d2['chatLog']['blockLogs']}},_0x4b18eb=await this[_0x599297(0x261)][_0x599297(0x4cb)]['updateOne'](_0xd4d2[_0x599297(0x215)],_0x3f8995,this[_0x599297(0x466)]['wuid']);if(_0x4b18eb){this[_0x599297(0x21e)][_0x599297(0x331)](this[_0x599297(0x629)]+'\x20('+this[_0x599297(0x466)]['wuid']+_0x599297(0x6fe)+_0x4b18eb[_0x599297(0x215)]);try{let _0x22e65b=[_0x599297(0x684),_0x599297(0x621),_0x599297(0x5c9),_0x599297(0x2e1),_0x599297(0x526),_0x599297(0x72b),'responsavelid','tags',_0x599297(0x5a9),'atendimentoAberto'];if(!this[_0x599297(0x672)]&&(await this[_0x599297(0x2f2)](),!this[_0x599297(0x672)]))throw new Error(_0x599297(0x411));let _0x49ee40=this[_0x599297(0x672)]?.[_0x599297(0x7f7)]['map'](_0x4d8734=>_0x4d8734['name']),_0x4cbec8={};Object[_0x599297(0x49e)](_0xd4d2[_0x599297(0x32b)][_0x599297(0x36f)])['forEach'](([_0x275eb9,_0x41851c])=>{const _0xe63e3=_0x599297;_0x22e65b[_0xe63e3(0x3d0)](_0x275eb9)&&(_0x275eb9===_0xe63e3(0x390)&&typeof _0x41851c==_0xe63e3(0x47c)?_0x4cbec8[_0x275eb9]=_0x41851c['split'](',')[_0xe63e3(0x555)](_0x4e4519=>_0x4e4519[_0xe63e3(0x63d)]())[_0xe63e3(0x5f7)](_0x5d8a48=>_0x5d8a48!==''):_0x275eb9===_0xe63e3(0x5a9)&&typeof _0x41851c==_0xe63e3(0x47c)?_0x4cbec8[_0x275eb9]=_0x41851c[_0xe63e3(0x6e6)](',')['map'](_0x4fed97=>_0x4fed97[_0xe63e3(0x63d)]())[_0xe63e3(0x5f7)](_0x568c51=>_0x568c51!==''):_0x4cbec8[_0x275eb9]=_0x41851c);});let _0x12ab31=_0xd4d2[_0x599297(0x32b)][_0x599297(0x512)][_0xd4d2[_0x599297(0x32b)][_0x599297(0x512)][_0x599297(0x587)]-0x1];if(_0x12ab31){let _0x2bcd4e=_0x12ab31['newStoppedUntil'];_0x2bcd4e!==void 0x0&&(_0x4cbec8['desativadoFluxoAte']=_0x2bcd4e['toString']());}let _0x385087=_0xc3d81e[_0x599297(0x5f7)](_0x524ba3=>_0x49ee40['includes'](_0x524ba3[_0x599297(0x149)]));this[_0x599297(0x21e)][_0x599297(0x331)](this[_0x599297(0x629)]+'\x20('+this[_0x599297(0x466)][_0x599297(0x3fd)]+_0x599297(0x623)),this[_0x599297(0x21e)][_0x599297(0x331)](_0x4cbec8),this[_0x599297(0x21e)][_0x599297(0x331)](this[_0x599297(0x629)]+'\x20('+this[_0x599297(0x466)][_0x599297(0x3fd)]+_0x599297(0x5e6)),this['logger'][_0x599297(0x331)](_0x385087);let _0x198b78=_0x385087[_0x599297(0x555)](_0x30576d=>{const _0x56ea4f=_0x599297;let _0x30f660=this[_0x56ea4f(0x672)]?.['customFields'][_0x56ea4f(0x5f9)](_0x511cff=>_0x511cff[_0x56ea4f(0x149)]===_0x30576d[_0x56ea4f(0x149)]);if(!_0x30f660)throw new Error(_0x56ea4f(0x6eb)+_0x30576d[_0x56ea4f(0x149)]);return{'_id':_0x30f660[_0x56ea4f(0x215)],'value':_0x30576d[_0x56ea4f(0x1c0)]};});this['logger'][_0x599297(0x331)](this['instanceName']+'\x20('+this[_0x599297(0x466)][_0x599297(0x3fd)]+_0x599297(0x382)),this['logger']['verbose'](_0x198b78),await this[_0x599297(0x6c9)](_0xd4d2[_0x599297(0x133)],_0x4cbec8,_0x198b78);}catch(_0xc6578e){this[_0x599297(0x21e)]['error'](this[_0x599297(0x629)]+'\x20('+this[_0x599297(0x466)][_0x599297(0x3fd)]+'):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20'+(_0xc6578e instanceof Error?_0xc6578e[_0x599297(0x202)]:JSON[_0x599297(0x647)](_0xc6578e,null,0x2)));}}else this['logger'][_0x599297(0x7a9)](this[_0x599297(0x629)]+'\x20('+this[_0x599297(0x466)][_0x599297(0x3fd)]+_0x599297(0x7c2));}catch(_0x353f94){this[_0x599297(0x21e)]['error'](this['instanceName']+'\x20('+this[_0x599297(0x466)][_0x599297(0x3fd)]+_0x599297(0x2f1)+(_0x353f94 instanceof Error?_0x353f94[_0x599297(0x202)]:JSON[_0x599297(0x647)](_0x353f94,null,0x2)));}}async[a0_0x490cab(0x6c9)](_0x3ddc69,_0x1b7f6f,_0x206b19){const _0x47db1a=a0_0x490cab;try{let _0x22c10a={'leadInfo.leadnome':_0x1b7f6f[_0x47db1a(0x684)],'leadInfo.nomecompleto':_0x1b7f6f[_0x47db1a(0x621)],'leadInfo.email':_0x1b7f6f[_0x47db1a(0x5c9)],'leadInfo.cpf':_0x1b7f6f['cpf'],'leadInfo.status':_0x1b7f6f[_0x47db1a(0x526)],'leadInfo.notas':_0x1b7f6f[_0x47db1a(0x72b)],'leadInfo.responsavelid':_0x1b7f6f[_0x47db1a(0x7ec)],'leadInfo.tags':_0x1b7f6f[_0x47db1a(0x390)],'leadInfo.etiquetas':_0x1b7f6f['etiquetas'],'leadInfo.customFields':_0x206b19,'leadInfo.atendimentoAberto':_0x1b7f6f[_0x47db1a(0x419)]},_0x3c5081=await this[_0x47db1a(0x261)][_0x47db1a(0x745)][_0x47db1a(0x2cd)]({'where':{'_id':_0x3ddc69}},this[_0x47db1a(0x466)][_0x47db1a(0x3fd)]);if(!_0x3c5081)return _0x47db1a(0x14b);let _0x4e9fa=new Set(_0x3c5081[_0x47db1a(0x241)][_0x47db1a(0x5a9)]||[]),_0x33cfd9=new Set(_0x1b7f6f['etiquetas']||[]),_0x336af6=await this[_0x47db1a(0x261)][_0x47db1a(0x441)][_0x47db1a(0x5f9)]({'where':{}},this[_0x47db1a(0x466)]['wuid']),_0x283bf8=new Set(_0x336af6[_0x47db1a(0x555)](_0x499e07=>_0x499e07[_0x47db1a(0x215)])),_0xa9ef0=[..._0x33cfd9][_0x47db1a(0x5f7)](_0x397a9d=>!_0x4e9fa[_0x47db1a(0x1de)](_0x397a9d)&&_0x283bf8[_0x47db1a(0x1de)](_0x397a9d)),_0x408f01=[..._0x4e9fa][_0x47db1a(0x5f7)](_0x1b718f=>!_0x33cfd9[_0x47db1a(0x1de)](_0x1b718f));for(let _0x25d730 of _0xa9ef0)await this[_0x47db1a(0x210)](_0x25d730,_0x3c5081['_id']),_0x4e9fa['add'](_0x25d730);for(let _0xc69db1 of _0x408f01)await this[_0x47db1a(0x6fd)](_0xc69db1,_0x3c5081[_0x47db1a(0x215)]),_0x4e9fa[_0x47db1a(0x75b)](_0xc69db1);if(_0x47db1a(0x679)in _0x1b7f6f){let _0x5f1660=_0x1b7f6f['desativadoFluxoAte'];_0x22c10a['leadInfo.desativadoFluxoAte']=_0x5f1660?Number(_0x5f1660):null;}if('atendimentoAberto'in _0x1b7f6f){let _0x33f07e=_0x1b7f6f[_0x47db1a(0x419)]['toLowerCase']();_0x22c10a[_0x47db1a(0x69c)]=_0x33f07e===_0x47db1a(0x3b1)||_0x33f07e==='1'||_0x33f07e===_0x47db1a(0x833)||_0x33f07e==='sim';}let _0x526433=await this[_0x47db1a(0x261)][_0x47db1a(0x745)][_0x47db1a(0x341)]({'where':{'_id':_0x3ddc69}},_0x22c10a,this[_0x47db1a(0x466)][_0x47db1a(0x3fd)]);_0x526433?(this[_0x47db1a(0x21e)][_0x47db1a(0x331)](this[_0x47db1a(0x629)]+'\x20('+this[_0x47db1a(0x466)]['wuid']+_0x47db1a(0x6f5)+_0x526433['_id']),j(this[_0x47db1a(0x629)],'chats',{'chat':_0x526433})):this['logger'][_0x47db1a(0x7a9)](this['instanceName']+'\x20('+this[_0x47db1a(0x466)]['wuid']+_0x47db1a(0x33f));}catch(_0x5c9f27){this[_0x47db1a(0x21e)][_0x47db1a(0x7a9)](this[_0x47db1a(0x629)]+'\x20('+this[_0x47db1a(0x466)][_0x47db1a(0x3fd)]+'):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20'+(_0x5c9f27 instanceof Error?_0x5c9f27[_0x47db1a(0x202)]:JSON[_0x47db1a(0x647)](_0x5c9f27,null,0x2)));}}async['updateStopChat'](_0x294ee0,_0x1547c5){const _0x4e1d9e=a0_0x490cab;this[_0x4e1d9e(0x21e)][_0x4e1d9e(0x331)](this['instanceName']+'\x20('+this[_0x4e1d9e(0x466)][_0x4e1d9e(0x3fd)]+'):\x20atualização\x20chat:\x20'+_0x1547c5);try{let _0x1f184e=await this[_0x4e1d9e(0x261)]['chat'][_0x4e1d9e(0x341)]({'where':{'_id':_0x294ee0[_0x4e1d9e(0x133)]}},{'leadInfo.desativadoFluxoAte':_0x1547c5},this[_0x4e1d9e(0x466)][_0x4e1d9e(0x3fd)]);this[_0x4e1d9e(0x21e)][_0x4e1d9e(0x331)](this['instanceName']+'\x20('+this['instance'][_0x4e1d9e(0x3fd)]+_0x4e1d9e(0x603)+_0x294ee0[_0x4e1d9e(0x215)]),this['logger'][_0x4e1d9e(0x331)](this['instanceName']+'\x20('+this[_0x4e1d9e(0x466)][_0x4e1d9e(0x3fd)]+'):\x20atualização\x20chat:\x20'+JSON[_0x4e1d9e(0x647)](_0x1f184e,null,0x2)),_0x1f184e&&j(this[_0x4e1d9e(0x629)],_0x4e1d9e(0x6e8),{'chat':_0x1f184e});}catch(_0xbed823){this['logger']['error'](this[_0x4e1d9e(0x629)]+'\x20('+this[_0x4e1d9e(0x466)][_0x4e1d9e(0x3fd)]+_0x4e1d9e(0x158)+(_0xbed823 instanceof Error?_0xbed823['message']:JSON[_0x4e1d9e(0x647)](_0xbed823,null,0x2)));}}async[a0_0x490cab(0x791)](_0x4f9982){const _0x5635d4=a0_0x490cab;try{this[_0x5635d4(0x21e)][_0x5635d4(0x331)](this['instanceName']+'\x20('+this['instance'][_0x5635d4(0x3fd)]+_0x5635d4(0x24b));let _0x464d69=_0x4f9982[_0x5635d4(0x4d4)](/\D/g,''),_0x2166f9=this['AutomateSystem']['flows'][_0x5635d4(0x5f9)](_0x26d17e=>_0x26d17e['testingWith']===_0x464d69);if(_0x2166f9||(this[_0x5635d4(0x21e)][_0x5635d4(0x331)](this[_0x5635d4(0x629)]+'\x20('+this[_0x5635d4(0x466)]['wuid']+_0x5635d4(0x70c)),_0x2166f9=this[_0x5635d4(0x672)][_0x5635d4(0x3e7)][_0x5635d4(0x5f9)](_0x513100=>_0x513100[_0x5635d4(0x73a)]===!0x0)),!_0x2166f9)return this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x5635d4(0x3fd)]+_0x5635d4(0x703)),null;let _0x2c993d=await this['repository'][_0x5635d4(0x362)][_0x5635d4(0x2cd)]({'where':{'_id':_0x2166f9[_0x5635d4(0x215)]}});if(!_0x2c993d||!_0x2c993d[_0x5635d4(0x695)]?.[_0x5635d4(0x3d0)](this[_0x5635d4(0x466)]['wuid']))throw this[_0x5635d4(0x21e)][_0x5635d4(0x7a9)](this['instanceName']+'\x20('+this[_0x5635d4(0x466)][_0x5635d4(0x3fd)]+'):\x20Flow\x20\x27'+_0x2c993d[_0x5635d4(0x215)]+_0x5635d4(0x6d8)),new m(_0x5635d4(0x6f9)+_0x2c993d[_0x5635d4(0x215)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');return _0x2c993d;}catch(_0x459621){return this[_0x5635d4(0x21e)][_0x5635d4(0x7a9)](this[_0x5635d4(0x629)]+'\x20('+this[_0x5635d4(0x466)][_0x5635d4(0x3fd)]+'):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20'+(_0x459621 instanceof Error?_0x459621[_0x5635d4(0x202)]:JSON['stringify'](_0x459621,null,0x2))),null;}}async[a0_0x490cab(0x4ef)](_0x22b846,_0x527b13){const _0x12fa36=a0_0x490cab;try{let _0x502af4=!!_0x527b13[_0x12fa36(0x596)],_0x172729=_0x527b13[_0x12fa36(0x16f)],_0x15c673=null;if(this[_0x12fa36(0x21e)][_0x12fa36(0x331)](this[_0x12fa36(0x629)]+'\x20('+this[_0x12fa36(0x466)][_0x12fa36(0x3fd)]+_0x12fa36(0x71d)+_0x502af4+_0x12fa36(0x274)+_0x172729),_0x502af4){this['logger'][_0x12fa36(0x331)](this['instanceName']+'\x20('+this[_0x12fa36(0x466)][_0x12fa36(0x3fd)]+_0x12fa36(0x3e9));let _0x31abfd={'where':{'remoteJid':_0x22b846,'waitingMenu_id':_0x172729}};if(_0x15c673=await this[_0x12fa36(0x261)]['flowConversation'][_0x12fa36(0x2cd)](_0x31abfd,this['instance'][_0x12fa36(0x3fd)]),!_0x15c673)return this[_0x12fa36(0x21e)][_0x12fa36(0x331)](this['instanceName']+'\x20('+this[_0x12fa36(0x466)][_0x12fa36(0x3fd)]+'):\x20não\x20encontrou'),null;let _0x35e5af=Date[_0x12fa36(0x7f9)](),_0x1ba09e=_0x15c673?.[_0x12fa36(0x1d4)]||0x0,_0x305cd6=_0x35e5af-_0x1ba09e*0x3c*0x3e8;if(_0x15c673[_0x12fa36(0x352)]<_0x305cd6){this[_0x12fa36(0x21e)][_0x12fa36(0x331)](this['instanceName']+'\x20('+this['instance'][_0x12fa36(0x3fd)]+'):\x20Conversa\x20está\x20expirada\x20-\x20voto');let _0x3828f3={'number':_0x15c673[_0x12fa36(0x133)],'options':{'delay':0x0},'textMessage':{'text':_0x15c673[_0x12fa36(0x80c)]}};await this['textMessage'](_0x3828f3);let _0x4aca40={'status':_0x12fa36(0x53c),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x12fa36(0x261)][_0x12fa36(0x4cb)][_0x12fa36(0x341)](_0x15c673[_0x12fa36(0x215)],_0x4aca40,this[_0x12fa36(0x466)][_0x12fa36(0x3fd)]),null;}return _0x15c673['lastInteraction']=Date['now'](),_0x15c673[_0x12fa36(0x32b)][_0x12fa36(0x6a5)]=_0x527b13,_0x15c673;}else{this[_0x12fa36(0x21e)]['verbose'](this[_0x12fa36(0x629)]+'\x20('+this[_0x12fa36(0x466)][_0x12fa36(0x3fd)]+_0x12fa36(0x32f)+this[_0x12fa36(0x466)][_0x12fa36(0x3fd)]+'\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário'),this['logger']['verbose'](this[_0x12fa36(0x629)]+'\x20('+this[_0x12fa36(0x466)]['wuid']+'):\x20Procurando\x20conversa');let _0x4c9f79={'where':{'remoteJid':_0x22b846,'status':_0x12fa36(0x1b9)}};if(_0x15c673=await this['repository'][_0x12fa36(0x4cb)][_0x12fa36(0x2cd)](_0x4c9f79,this[_0x12fa36(0x466)]['wuid']),!_0x15c673){let _0x18faaf=await this[_0x12fa36(0x791)](_0x22b846);if(_0x18faaf&&(_0x15c673=await this[_0x12fa36(0x148)](_0x18faaf,_0x527b13[_0x12fa36(0x1c2)],_0x527b13)),!_0x15c673)return null;}let _0x5106cb=Date[_0x12fa36(0x7f9)](),_0x595c62=_0x15c673?.[_0x12fa36(0x1d4)]||0x0,_0x208405=_0x5106cb-_0x595c62*0x3c*0x3e8;if(this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x12fa36(0x3fd)]+_0x12fa36(0x2e7)+_0x5106cb+_0x12fa36(0x38a)+_0x595c62+_0x12fa36(0x13b)+_0x208405),this[_0x12fa36(0x21e)][_0x12fa36(0x331)](this[_0x12fa36(0x629)]+'\x20('+this['instance'][_0x12fa36(0x3fd)]+'):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot'),this[_0x12fa36(0x21e)]['verbose'](this[_0x12fa36(0x629)]+'\x20('+this[_0x12fa36(0x466)][_0x12fa36(0x3fd)]+_0x12fa36(0x33a)+_0x15c673[_0x12fa36(0x352)]),this[_0x12fa36(0x21e)][_0x12fa36(0x331)](this[_0x12fa36(0x629)]+'\x20('+this[_0x12fa36(0x466)][_0x12fa36(0x3fd)]+'):\x20expirationTime:\x20'+_0x208405),_0x15c673['lastInteraction']<_0x208405){this[_0x12fa36(0x21e)][_0x12fa36(0x331)](this['instanceName']+'\x20('+this[_0x12fa36(0x466)][_0x12fa36(0x3fd)]+'):\x20Conversa\x20está\x20expirada');let _0x2944b2=await this[_0x12fa36(0x791)](_0x22b846);if(_0x2944b2===null)return null;_0x15c673&&await this[_0x12fa36(0x261)][_0x12fa36(0x4cb)][_0x12fa36(0x341)](_0x15c673[_0x12fa36(0x215)],{'status':_0x12fa36(0x53c)},this['instance'][_0x12fa36(0x3fd)]),_0x15c673=await this[_0x12fa36(0x148)](_0x2944b2,_0x527b13[_0x12fa36(0x1c2)],_0x527b13);}return _0x15c673['lastInteraction']=_0x5106cb,_0x15c673[_0x12fa36(0x32b)][_0x12fa36(0x6a5)]=_0x527b13,_0x15c673;}}catch(_0x16045b){return this['logger'][_0x12fa36(0x7a9)](this[_0x12fa36(0x629)]+'\x20('+this[_0x12fa36(0x466)][_0x12fa36(0x3fd)]+_0x12fa36(0x307)+(_0x16045b instanceof Error?_0x16045b[_0x12fa36(0x202)]:JSON['stringify'](_0x16045b,null,0x2))),null;}}async['createNewConversation'](_0x1add8f,_0x249f02,_0x30c36f){const _0x5a9792=a0_0x490cab;this[_0x5a9792(0x21e)]['verbose'](this[_0x5a9792(0x629)]+'\x20('+this['instance'][_0x5a9792(0x3fd)]+_0x5a9792(0x4b6));try{let _0x466b29=require(_0x5a9792(0x23e))['ObjectId'],_0x97614e=Date['now'](),_0x2baadd=_0x5a9792(0x4f1),_0x3146ce=_0x249f02[_0x5a9792(0x54e)]?null:_0x30c36f,_0x253f02=_0x249f02[_0x5a9792(0x54e)]?_0x30c36f:null,_0x469b9a=_0x249f02[_0x5a9792(0x133)],_0x7b71c5=this[_0x5a9792(0x672)][_0x5a9792(0x3e7)][_0x5a9792(0x5f9)](_0x16444e=>_0x16444e[_0x5a9792(0x215)]===_0x1add8f[_0x5a9792(0x215)]?.['toString']()),_0x1b1126=_0x7b71c5?.[_0x5a9792(0x1d4)]??_0x1add8f[_0x5a9792(0x1d4)]??0x0,_0x2b3c60=_0x7b71c5?.['readMessages']??_0x1add8f[_0x5a9792(0x455)]??!0x1;await this['closeExistingConversations'](_0x469b9a);let _0x483f64={'flowId':_0x1add8f[_0x5a9792(0x215)],..._0x1add8f,'chatLog':null},_0x4a55c4=await this[_0x5a9792(0x76f)](_0x483f64['variables']),_0x3fc320=await this[_0x5a9792(0x673)](_0x469b9a),_0x1a3fe4={..._0x4a55c4,..._0x3fc320,'_remoteJid':_0x469b9a},_0x1f8908={'lastReceivedMessage':_0x3146ce,'lastSendMessage':_0x253f02,'lastBlockId':_0x2baadd,'lastCondition':!0x0,'realVariables':_0x1a3fe4};_0x483f64[_0x5a9792(0x32b)]=_0x1f8908,delete _0x483f64[_0x5a9792(0x215)],_0x483f64[_0x5a9792(0x215)]=new _0x466b29(),_0x483f64[_0x5a9792(0x352)]=_0x97614e,_0x483f64[_0x5a9792(0x526)]=_0x5a9792(0x1b9),_0x483f64[_0x5a9792(0x133)]=_0x469b9a,_0x483f64[_0x5a9792(0x1d4)]=_0x1b1126,_0x483f64[_0x5a9792(0x455)]=_0x2b3c60;let _0x4fd54b=await this[_0x5a9792(0x261)][_0x5a9792(0x4cb)]['updateOne'](_0x483f64[_0x5a9792(0x215)],_0x483f64,this['instance'][_0x5a9792(0x3fd)]);return this['logger'][_0x5a9792(0x331)](this[_0x5a9792(0x629)]+'\x20('+this['instance'][_0x5a9792(0x3fd)]+_0x5a9792(0x2e2)),_0x4fd54b?_0x483f64:null;}catch(_0x51bb57){return this[_0x5a9792(0x21e)][_0x5a9792(0x7a9)](this[_0x5a9792(0x629)]+'\x20('+this[_0x5a9792(0x466)][_0x5a9792(0x3fd)]+_0x5a9792(0x6ee)+(_0x51bb57 instanceof Error?_0x51bb57[_0x5a9792(0x202)]:JSON[_0x5a9792(0x647)](_0x51bb57,null,0x2))),_0x51bb57;}}async[a0_0x490cab(0x2d3)](_0x33d5f3,_0x361a60){const _0x47ac1e=a0_0x490cab;let _0x4b6f49=_0x33d5f3['remoteJid'];_0x361a60[_0x47ac1e(0x48b)][_0x47ac1e(0x133)]&&_0x361a60[_0x47ac1e(0x48b)]['remoteJid'][_0x47ac1e(0x63d)]()!==''&&(_0x4b6f49=_0x361a60[_0x47ac1e(0x48b)][_0x47ac1e(0x133)]['trim']()),this[_0x47ac1e(0x21e)][_0x47ac1e(0x331)](this['instanceName']+'\x20('+this[_0x47ac1e(0x466)][_0x47ac1e(0x3fd)]+_0x47ac1e(0x55c));let _0x16fb1e={'number':_0x4b6f49,'options':{'delay':_0x361a60[_0x47ac1e(0x48b)][_0x47ac1e(0x4a8)],'linkPreview':_0x361a60[_0x47ac1e(0x48b)][_0x47ac1e(0x1f1)]},'textMessage':{'text':_0x361a60['uazapi']['text']}};try{let _0x5c018c=await this['textMessage'](_0x16fb1e);if(_0x5c018c){let _0x228321={'_id':_0x5c018c[_0x47ac1e(0x1c2)]['id'],'_fromMe':_0x5c018c['key'][_0x47ac1e(0x54e)],'_remoteJid':_0x5c018c[_0x47ac1e(0x1c2)][_0x47ac1e(0x133)]},_0x3b060d=(0x0,w[_0x47ac1e(0x53b)])(_0x5c018c[_0x47ac1e(0x202)]),_0x118d02=(0x0,w['getContentType'])(_0x3b060d);_0x33d5f3[_0x47ac1e(0x32b)][_0x47ac1e(0x3c6)]=_0x361a60['_id']['toString']();let {message_normalized:_0x5da3c2}=this[_0x47ac1e(0x1d2)](_0x3b060d,_0x118d02,null);_0x33d5f3[_0x47ac1e(0x32b)][_0x47ac1e(0x7de)]=await _0x5da3c2;let _0x4fed50={'messageId':_0x5c018c[_0x47ac1e(0x1c2)]['id']},_0x48ce7c=_0x33d5f3[_0x47ac1e(0x32b)][_0x47ac1e(0x36f)];Object[_0x47ac1e(0x17e)](_0x48ce7c,_0x228321),_0x33d5f3[_0x47ac1e(0x32b)]['realVariables']=_0x48ce7c,this[_0x47ac1e(0x23a)](_0x33d5f3,_0x361a60,_0x4fed50);}else{let _0x2cd7a6={'error':!0x0};this[_0x47ac1e(0x23a)](_0x33d5f3,_0x361a60,_0x2cd7a6),this[_0x47ac1e(0x21e)]['error'](this[_0x47ac1e(0x629)]+'\x20('+this[_0x47ac1e(0x466)][_0x47ac1e(0x3fd)]+_0x47ac1e(0x40e));}}catch(_0x421173){let _0x4910a1={'error':!0x0,'errorLog':_0x421173['toString']()};this[_0x47ac1e(0x23a)](_0x33d5f3,_0x361a60,_0x4910a1),this[_0x47ac1e(0x21e)][_0x47ac1e(0x7a9)](this[_0x47ac1e(0x629)]+'\x20('+this['instance'][_0x47ac1e(0x3fd)]+_0x47ac1e(0x696)+(_0x421173 instanceof Error?_0x421173[_0x47ac1e(0x202)]:JSON[_0x47ac1e(0x647)](_0x421173,null,0x2)));}}async[a0_0x490cab(0x23d)](_0x4d48c8,_0x5d9f32){const _0xc8ed5a=a0_0x490cab;let _0x107747=_0x4d48c8[_0xc8ed5a(0x133)];_0x5d9f32['uazapi'][_0xc8ed5a(0x133)]&&_0x5d9f32[_0xc8ed5a(0x48b)][_0xc8ed5a(0x133)]['trim']()!==''&&(_0x107747=_0x5d9f32[_0xc8ed5a(0x48b)]['remoteJid']['trim']()),this[_0xc8ed5a(0x21e)][_0xc8ed5a(0x331)](this['instanceName']+'\x20('+this[_0xc8ed5a(0x466)][_0xc8ed5a(0x3fd)]+_0xc8ed5a(0x6b1));let _0x299e5f={'number':_0x107747,'options':{'delay':_0x5d9f32[_0xc8ed5a(0x48b)][_0xc8ed5a(0x4a8)],'linkPreview':_0x5d9f32[_0xc8ed5a(0x48b)][_0xc8ed5a(0x1f1)]},'mediaMessage':{'mediatype':_0x5d9f32[_0xc8ed5a(0x48b)][_0xc8ed5a(0x1b2)],'caption':_0x5d9f32[_0xc8ed5a(0x48b)]['caption'],'media':_0x5d9f32[_0xc8ed5a(0x48b)][_0xc8ed5a(0x286)],'fileName':_0x5d9f32[_0xc8ed5a(0x48b)]['fileName']}};try{let _0x452f4b=await this[_0xc8ed5a(0x2c7)](_0x299e5f);if(_0x452f4b){let _0x1effef={'_id':_0x452f4b[_0xc8ed5a(0x1c2)]['id'],'_fromMe':_0x452f4b['key']['fromMe'],'_remoteJid':_0x452f4b[_0xc8ed5a(0x1c2)][_0xc8ed5a(0x133)]},_0x34d006=(0x0,w['normalizeMessageContent'])(_0x452f4b[_0xc8ed5a(0x202)]),_0x2b4a9e=(0x0,w['getContentType'])(_0x34d006);_0x4d48c8[_0xc8ed5a(0x32b)]['lastBlockId']=_0x5d9f32[_0xc8ed5a(0x215)][_0xc8ed5a(0x751)]();let {message_normalized:_0x13cea9}=this[_0xc8ed5a(0x1d2)](_0x34d006,_0x2b4a9e,null);_0x4d48c8[_0xc8ed5a(0x32b)][_0xc8ed5a(0x7de)]=await _0x13cea9;let _0x54ffe7={'messageId':_0x452f4b[_0xc8ed5a(0x1c2)]['id']},_0x19b1d3=_0x4d48c8[_0xc8ed5a(0x32b)][_0xc8ed5a(0x36f)];Object[_0xc8ed5a(0x17e)](_0x19b1d3,_0x1effef),_0x4d48c8[_0xc8ed5a(0x32b)][_0xc8ed5a(0x36f)]=_0x19b1d3,this[_0xc8ed5a(0x23a)](_0x4d48c8,_0x5d9f32,_0x54ffe7);}else{let _0x272ab5={'error':!0x0};this[_0xc8ed5a(0x23a)](_0x4d48c8,_0x5d9f32,_0x272ab5),this[_0xc8ed5a(0x21e)][_0xc8ed5a(0x7a9)](this[_0xc8ed5a(0x629)]+'\x20('+this[_0xc8ed5a(0x466)][_0xc8ed5a(0x3fd)]+_0xc8ed5a(0x309));}}catch(_0x29db52){let _0x538eff={'error':!0x0,'errorLog':_0x29db52[_0xc8ed5a(0x751)]()};this[_0xc8ed5a(0x23a)](_0x4d48c8,_0x5d9f32,_0x538eff),this[_0xc8ed5a(0x21e)][_0xc8ed5a(0x7a9)](this[_0xc8ed5a(0x629)]+'\x20('+this[_0xc8ed5a(0x466)]['wuid']+_0xc8ed5a(0x5b5)+(_0x29db52 instanceof Error?_0x29db52[_0xc8ed5a(0x202)]:JSON[_0xc8ed5a(0x647)](_0x29db52,null,0x2)));}}async['uazapiSendLocation'](_0x11e60e,_0x468937){const _0xef619d=a0_0x490cab;let _0x365ec2=_0x11e60e[_0xef619d(0x133)];_0x468937[_0xef619d(0x48b)][_0xef619d(0x133)]&&_0x468937['uazapi']['remoteJid'][_0xef619d(0x63d)]()!==''&&(_0x365ec2=_0x468937[_0xef619d(0x48b)][_0xef619d(0x133)][_0xef619d(0x63d)]()),this[_0xef619d(0x21e)]['verbose'](this['instanceName']+'\x20('+this[_0xef619d(0x466)][_0xef619d(0x3fd)]+_0xef619d(0x24c));let _0x3c9ae9={'number':_0x365ec2,'options':{'delay':_0x468937[_0xef619d(0x48b)][_0xef619d(0x4a8)]},'locationMessage':{'name':_0x468937[_0xef619d(0x48b)]['name'],'address':_0x468937[_0xef619d(0x48b)][_0xef619d(0x537)],'latitude':_0x468937[_0xef619d(0x48b)][_0xef619d(0x22a)],'longitude':_0x468937['uazapi'][_0xef619d(0x685)]}};try{let _0x235ae9=await this['locationMessage'](_0x3c9ae9);if(_0x235ae9){let _0x225497={'_id':_0x235ae9[_0xef619d(0x1c2)]['id'],'_fromMe':_0x235ae9[_0xef619d(0x1c2)][_0xef619d(0x54e)],'_remoteJid':_0x235ae9[_0xef619d(0x1c2)][_0xef619d(0x133)]},_0x1c9d34=(0x0,w[_0xef619d(0x53b)])(_0x235ae9[_0xef619d(0x202)]),_0x3e0206=(0x0,w[_0xef619d(0x626)])(_0x1c9d34);_0x11e60e[_0xef619d(0x32b)][_0xef619d(0x3c6)]=_0x468937[_0xef619d(0x215)][_0xef619d(0x751)]();let {message_normalized:_0x11341b}=this[_0xef619d(0x1d2)](_0x1c9d34,_0x3e0206,null);_0x11e60e[_0xef619d(0x32b)][_0xef619d(0x7de)]=await _0x11341b;let _0x17491c={'messageId':_0x235ae9[_0xef619d(0x1c2)]['id']},_0x595a56=_0x11e60e['chatLog']['realVariables'];Object[_0xef619d(0x17e)](_0x595a56,_0x225497),_0x11e60e[_0xef619d(0x32b)][_0xef619d(0x36f)]=_0x595a56,this[_0xef619d(0x23a)](_0x11e60e,_0x468937,_0x17491c);}else{let _0xca0daa={'error':!0x0};this['updateConversation'](_0x11e60e,_0x468937,_0xca0daa),this[_0xef619d(0x21e)][_0xef619d(0x7a9)](this[_0xef619d(0x629)]+'\x20('+this['instance'][_0xef619d(0x3fd)]+_0xef619d(0x3ea));}}catch(_0x504ffd){let _0x5a00d8={'error':!0x0,'errorLog':_0x504ffd[_0xef619d(0x751)]()};this[_0xef619d(0x23a)](_0x11e60e,_0x468937,_0x5a00d8),this['logger']['error'](this[_0xef619d(0x629)]+'\x20('+this[_0xef619d(0x466)][_0xef619d(0x3fd)]+_0xef619d(0x55e)+(_0x504ffd instanceof Error?_0x504ffd[_0xef619d(0x202)]:JSON['stringify'](_0x504ffd,null,0x2)));}}async[a0_0x490cab(0x43a)](_0x29c98b,_0x239b06){const _0x21ee44=a0_0x490cab;let _0x4b44ce=_0x29c98b[_0x21ee44(0x133)];_0x239b06[_0x21ee44(0x48b)][_0x21ee44(0x133)]&&_0x239b06[_0x21ee44(0x48b)]['remoteJid'][_0x21ee44(0x63d)]()!==''&&(_0x4b44ce=_0x239b06[_0x21ee44(0x48b)][_0x21ee44(0x133)]['trim']()),this[_0x21ee44(0x21e)][_0x21ee44(0x331)](this['instanceName']+'\x20('+this[_0x21ee44(0x466)][_0x21ee44(0x3fd)]+_0x21ee44(0x557));let _0xf2d669={'number':_0x4b44ce,'options':{'delay':_0x239b06[_0x21ee44(0x48b)][_0x21ee44(0x4a8)]},'audioMessage':{'audio':_0x239b06['uazapi'][_0x21ee44(0x70d)]}};try{let _0x502021=await this[_0x21ee44(0x61d)](_0xf2d669);if(_0x502021){let _0x299a1b={'_id':_0x502021[_0x21ee44(0x1c2)]['id'],'_fromMe':_0x502021[_0x21ee44(0x1c2)]['fromMe'],'_remoteJid':_0x502021[_0x21ee44(0x1c2)]['remoteJid']},_0x119dab=(0x0,w['normalizeMessageContent'])(_0x502021[_0x21ee44(0x202)]),_0x4f33ba=(0x0,w[_0x21ee44(0x626)])(_0x119dab);_0x29c98b[_0x21ee44(0x32b)][_0x21ee44(0x3c6)]=_0x239b06[_0x21ee44(0x215)][_0x21ee44(0x751)]();let {message_normalized:_0x4b4c5f}=this[_0x21ee44(0x1d2)](_0x119dab,_0x4f33ba,null);_0x29c98b[_0x21ee44(0x32b)]['lastSendMessage']=await _0x4b4c5f;let _0x4ca5a6={'messageId':_0x502021[_0x21ee44(0x1c2)]['id']},_0x468996=_0x29c98b[_0x21ee44(0x32b)][_0x21ee44(0x36f)];Object[_0x21ee44(0x17e)](_0x468996,_0x299a1b),_0x29c98b[_0x21ee44(0x32b)][_0x21ee44(0x36f)]=_0x468996,this[_0x21ee44(0x23a)](_0x29c98b,_0x239b06,_0x4ca5a6);}else{let _0x4d9a18={'error':!0x0};this[_0x21ee44(0x23a)](_0x29c98b,_0x239b06,_0x4d9a18),this[_0x21ee44(0x21e)][_0x21ee44(0x7a9)](this['instanceName']+'\x20('+this[_0x21ee44(0x466)][_0x21ee44(0x3fd)]+_0x21ee44(0x440));}}catch(_0x34de88){let _0x471553={'error':!0x0,'errorLog':_0x34de88[_0x21ee44(0x751)]()};this['updateConversation'](_0x29c98b,_0x239b06,_0x471553),this[_0x21ee44(0x21e)][_0x21ee44(0x7a9)](this[_0x21ee44(0x629)]+'\x20('+this['instance'][_0x21ee44(0x3fd)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20'+(_0x34de88 instanceof Error?_0x34de88['message']:JSON[_0x21ee44(0x647)](_0x34de88,null,0x2)));}}async['uazapiSendContact'](_0x5374fa,_0x36ae16){const _0x36ce56=a0_0x490cab;let _0x5b797b=_0x5374fa['remoteJid'];_0x36ae16[_0x36ce56(0x48b)][_0x36ce56(0x133)]&&_0x36ae16['uazapi'][_0x36ce56(0x133)][_0x36ce56(0x63d)]()!==''&&(_0x5b797b=_0x36ae16[_0x36ce56(0x48b)][_0x36ce56(0x133)][_0x36ce56(0x63d)]()),this[_0x36ce56(0x21e)]['verbose'](this['instanceName']+'\x20('+this[_0x36ce56(0x466)]['wuid']+_0x36ce56(0x4be));let _0x332662={'number':_0x5b797b,'options':{'delay':_0x36ae16[_0x36ce56(0x48b)][_0x36ce56(0x4a8)]},'contactMessage':[{'fullName':_0x36ae16[_0x36ce56(0x48b)][_0x36ce56(0x296)],'phoneNumber':_0x36ae16[_0x36ce56(0x48b)][_0x36ce56(0x3cf)]}]};try{let _0x1c68cd=await this[_0x36ce56(0x143)](_0x332662);if(_0x1c68cd){let _0x364530={'_id':_0x1c68cd['key']['id'],'_fromMe':_0x1c68cd[_0x36ce56(0x1c2)][_0x36ce56(0x54e)],'_remoteJid':_0x1c68cd[_0x36ce56(0x1c2)][_0x36ce56(0x133)]},_0x140c3e=(0x0,w['normalizeMessageContent'])(_0x1c68cd[_0x36ce56(0x202)]),_0x2df6dc=(0x0,w['getContentType'])(_0x140c3e);_0x5374fa[_0x36ce56(0x32b)][_0x36ce56(0x3c6)]=_0x36ae16[_0x36ce56(0x215)]['toString']();let {message_normalized:_0x2e1587}=this['normalizeMessage'](_0x140c3e,_0x2df6dc,null);_0x5374fa['chatLog']['lastSendMessage']=await _0x2e1587;let _0x2e46e0={'messageId':_0x1c68cd['key']['id']},_0x39eb3b=_0x5374fa[_0x36ce56(0x32b)]['realVariables'];Object[_0x36ce56(0x17e)](_0x39eb3b,_0x364530),_0x5374fa[_0x36ce56(0x32b)][_0x36ce56(0x36f)]=_0x39eb3b,this['updateConversation'](_0x5374fa,_0x36ae16,_0x2e46e0);}else{let _0x7d4bba={'error':!0x0};this['updateConversation'](_0x5374fa,_0x36ae16,_0x7d4bba),this[_0x36ce56(0x21e)][_0x36ce56(0x7a9)](this[_0x36ce56(0x629)]+'\x20('+this[_0x36ce56(0x466)][_0x36ce56(0x3fd)]+_0x36ce56(0x4bd));}}catch(_0x577b25){let _0x2d7fbb={'error':!0x0,'errorLog':_0x577b25['toString']()};this[_0x36ce56(0x23a)](_0x5374fa,_0x36ae16,_0x2d7fbb),this[_0x36ce56(0x21e)][_0x36ce56(0x7a9)](this['instanceName']+'\x20('+this[_0x36ce56(0x466)][_0x36ce56(0x3fd)]+_0x36ce56(0x2cc)+(_0x577b25 instanceof Error?_0x577b25[_0x36ce56(0x202)]:JSON[_0x36ce56(0x647)](_0x577b25,null,0x2)));}}[a0_0x490cab(0x4ed)](_0xc102a,_0x2acfe2){const _0x72a16f=a0_0x490cab;for(let _0x59b970 of _0xc102a)_0x59b970[_0x72a16f(0x347)]&&(_0x59b970[_0x72a16f(0x347)]=this[_0x72a16f(0x589)](_0x59b970[_0x72a16f(0x347)],_0x2acfe2)),_0x59b970['optionDescription']&&(_0x59b970[_0x72a16f(0x7f6)]=this[_0x72a16f(0x589)](_0x59b970['optionDescription'],_0x2acfe2));}async[a0_0x490cab(0x1a9)](_0x2c47ce,_0x47c40f){const _0x11dc4c=a0_0x490cab;let _0x143234=_0x2c47ce[_0x11dc4c(0x133)];_0x47c40f[_0x11dc4c(0x48b)]['remoteJid']&&_0x47c40f['uazapi'][_0x11dc4c(0x133)]['trim']()!==''&&(_0x143234=_0x47c40f['uazapi']['remoteJid'][_0x11dc4c(0x63d)]()),this['logger']['verbose'](this[_0x11dc4c(0x629)]+'\x20('+this[_0x11dc4c(0x466)][_0x11dc4c(0x3fd)]+_0x11dc4c(0x1ac));let _0x53be59=_0x2c47ce[_0x11dc4c(0x3df)]['filter'](_0x1c8974=>_0x1c8974[_0x11dc4c(0x494)]===_0x47c40f[_0x11dc4c(0x215)])[_0x11dc4c(0x644)]((_0x4d1f0d,_0x2e9389)=>_0x4d1f0d['order']-_0x2e9389['order']);this[_0x11dc4c(0x4ed)](_0x53be59,_0x2c47ce[_0x11dc4c(0x32b)]['realVariables']);let _0x1ae18d=_0x53be59[_0x11dc4c(0x555)](_0x34b870=>_0x34b870['option']),_0x5cb56d={'number':_0x143234,'menuMessage':{'type':_0x47c40f['uazapi'][_0x11dc4c(0x139)]||_0x11dc4c(0x771),'text':_0x47c40f[_0x11dc4c(0x48b)][_0x11dc4c(0x120)]||_0x47c40f[_0x11dc4c(0x48b)]['name'],'footerText':_0x47c40f[_0x11dc4c(0x48b)]['footerText'],'buttonText':_0x47c40f[_0x11dc4c(0x48b)][_0x11dc4c(0x802)],'selectableCount':0x1,'choices':_0x1ae18d},'options':{'delay':_0x47c40f[_0x11dc4c(0x48b)]['delay']}};try{let _0x206646=await this[_0x11dc4c(0x523)](_0x5cb56d);if(_0x206646){let _0x11f9d4={'_id':_0x206646[_0x11dc4c(0x1c2)]['id'],'_fromMe':_0x206646[_0x11dc4c(0x1c2)]['fromMe'],'_remoteJid':_0x206646[_0x11dc4c(0x1c2)]['remoteJid']};_0x47c40f[_0x11dc4c(0x48b)][_0x11dc4c(0x81c)]===!0x0&&(_0x2c47ce[_0x11dc4c(0x526)]=_0x11dc4c(0x697),this[_0x11dc4c(0x21e)][_0x11dc4c(0x331)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20conversation.status:\x20'+_0x2c47ce[_0x11dc4c(0x526)])),this[_0x11dc4c(0x21e)][_0x11dc4c(0x331)](this[_0x11dc4c(0x629)]+'\x20('+this[_0x11dc4c(0x466)]['wuid']+_0x11dc4c(0x4e4)+(_0x47c40f[_0x11dc4c(0x48b)][_0x11dc4c(0x149)]||_0x47c40f[_0x11dc4c(0x48b)][_0x11dc4c(0x120)])),_0x2c47ce[_0x11dc4c(0x72f)]=_0x206646[_0x11dc4c(0x1c2)]['id'],_0x2c47ce['waitingMenu_text']=_0x47c40f[_0x11dc4c(0x48b)][_0x11dc4c(0x149)]||_0x47c40f['uazapi']['text'],_0x2c47ce[_0x11dc4c(0x51d)]=_0x53be59,_0x47c40f['uazapi'][_0x11dc4c(0x1c4)]&&(_0x2c47ce[_0x11dc4c(0x80c)]=_0x47c40f['uazapi'][_0x11dc4c(0x1c4)]),this[_0x11dc4c(0x21e)]['verbose'](this[_0x11dc4c(0x629)]+'\x20('+this[_0x11dc4c(0x466)]['wuid']+_0x11dc4c(0x4ce)+_0x2c47ce[_0x11dc4c(0x7ee)]);let _0x41aae9=(0x0,w[_0x11dc4c(0x53b)])(_0x206646[_0x11dc4c(0x202)]),_0x52c7bb=(0x0,w['getContentType'])(_0x41aae9);_0x2c47ce[_0x11dc4c(0x32b)][_0x11dc4c(0x3c6)]=_0x47c40f[_0x11dc4c(0x215)]['toString']();let {message_normalized:_0x15cc1d}=this['normalizeMessage'](_0x41aae9,_0x52c7bb,null);_0x2c47ce['chatLog'][_0x11dc4c(0x7de)]=await _0x15cc1d;let _0xbbe0f8={'messageId':_0x206646[_0x11dc4c(0x1c2)]['id']},_0x5405b0=_0x2c47ce[_0x11dc4c(0x32b)][_0x11dc4c(0x36f)];Object[_0x11dc4c(0x17e)](_0x5405b0,_0x11f9d4),_0x2c47ce[_0x11dc4c(0x32b)][_0x11dc4c(0x36f)]=_0x5405b0,this[_0x11dc4c(0x23a)](_0x2c47ce,_0x47c40f,_0xbbe0f8);}else{let _0x75df1f={'error':!0x0};this['updateConversation'](_0x2c47ce,_0x47c40f,_0x75df1f),this[_0x11dc4c(0x21e)]['error'](this[_0x11dc4c(0x629)]+'\x20('+this[_0x11dc4c(0x466)][_0x11dc4c(0x3fd)]+_0x11dc4c(0x4ee));}}catch(_0x1138d3){let _0x283a53={'error':!0x0,'errorLog':_0x1138d3 instanceof Error?_0x1138d3[_0x11dc4c(0x202)]:JSON[_0x11dc4c(0x647)](_0x1138d3,null,0x2)};this['updateConversation'](_0x2c47ce,_0x47c40f,_0x283a53),this[_0x11dc4c(0x21e)][_0x11dc4c(0x7a9)](this[_0x11dc4c(0x629)]+'\x20('+this[_0x11dc4c(0x466)][_0x11dc4c(0x3fd)]+_0x11dc4c(0x1c3)+(_0x1138d3 instanceof Error?_0x1138d3[_0x11dc4c(0x202)]:JSON[_0x11dc4c(0x647)](_0x1138d3,null,0x2)));}}async[a0_0x490cab(0x5ba)](_0x1dcaee,_0x1ba029){const _0x1104f2=a0_0x490cab;this[_0x1104f2(0x21e)][_0x1104f2(0x331)](this[_0x1104f2(0x629)]+'\x20('+this['instance'][_0x1104f2(0x3fd)]+_0x1104f2(0x63e));let _0x4eb911=_0x1dcaee[_0x1104f2(0x32b)][_0x1104f2(0x512)][_0x1104f2(0x5f9)](_0x3bbc13=>_0x3bbc13[_0x1104f2(0x494)][_0x1104f2(0x751)]()===_0x1ba029[_0x1104f2(0x48b)][_0x1104f2(0x494)][_0x1104f2(0x751)]()),_0x110e30={'id':_0x4eb911[_0x1104f2(0x420)],'remoteJid':_0x4eb911['remoteJid'],'fromMe':_0x4eb911[_0x1104f2(0x54e)]};try{let _0x334790=await this[_0x1104f2(0x5fa)](_0x110e30);if(_0x334790){let _0x38bb2a=(0x0,w['normalizeMessageContent'])(_0x334790[_0x1104f2(0x202)]),_0x2df358=(0x0,w[_0x1104f2(0x626)])(_0x38bb2a);_0x1dcaee[_0x1104f2(0x32b)]['lastBlockId']=_0x1ba029[_0x1104f2(0x215)][_0x1104f2(0x751)]();let {message_normalized:_0x550653}=this[_0x1104f2(0x1d2)](_0x38bb2a,_0x2df358,null);_0x1dcaee[_0x1104f2(0x32b)]['lastSendMessage']=await _0x550653;let _0x2e910b={};this[_0x1104f2(0x23a)](_0x1dcaee,_0x1ba029,_0x2e910b);}else{let _0x29931c={'error':!0x0};this[_0x1104f2(0x23a)](_0x1dcaee,_0x1ba029,_0x29931c),this[_0x1104f2(0x21e)][_0x1104f2(0x7a9)](this['instanceName']+'\x20('+this[_0x1104f2(0x466)][_0x1104f2(0x3fd)]+_0x1104f2(0x13a));}}catch(_0x539581){let _0x4a0363={'error':!0x0,'errorLog':_0x539581 instanceof Error?_0x539581[_0x1104f2(0x202)]:JSON[_0x1104f2(0x647)](_0x539581,null,0x2)};this['updateConversation'](_0x1dcaee,_0x1ba029,_0x4a0363),this[_0x1104f2(0x21e)][_0x1104f2(0x7a9)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x1104f2(0x224)+(_0x539581 instanceof Error?_0x539581[_0x1104f2(0x202)]:JSON[_0x1104f2(0x647)](_0x539581,null,0x2)));}}async['createFlow'](_0x3ec5db,_0x3ceabd){const _0x3b945e=a0_0x490cab;if(_0x3ec5db[_0x3b945e(0x149)]||(_0x3ec5db[_0x3b945e(0x149)]=(0x0,Y['v4'])()),_0x3ceabd!==Ii&&_0x3ec5db?.[_0x3b945e(0x803)])throw new m(_0x3b945e(0x219));if(_0x3b945e(0x215)in _0x3ec5db&&_0x3b945e(0x1f7)in _0x3ec5db)return this[_0x3b945e(0x4d7)](_0x3ec5db[_0x3b945e(0x1f7)],_0x3ec5db[_0x3b945e(0x215)]);this['logger'][_0x3b945e(0x331)](this[_0x3b945e(0x629)]+'\x20('+this[_0x3b945e(0x466)][_0x3b945e(0x3fd)]+_0x3b945e(0x19e));let _0x167cf4=this[_0x3b945e(0x4b2)](_0x3ec5db[_0x3b945e(0x149)]),_0x172538=new me[(_0x3b945e(0x6ed))][(_0x3b945e(0x325))](),_0x2557f6={'_id':_0x172538,'default':!0x0,'title':'Início','x':0x0,'y':0x0},_0x4d93f0={'_id':new me[(_0x3b945e(0x6ed))][(_0x3b945e(0x325))](),'order':0x1,'groupId':_0x172538[_0x3b945e(0x751)](),'type':_0x3b945e(0x4f1)},_0x45b018=this[_0x3b945e(0x466)][_0x3b945e(0x3fd)],_0x320d0d={'_id':(0x0,Y['v4'])(),'owner':_0x45b018,'name':_0x167cf4,'whoCanEdit':[_0x45b018],'whoCanUse':[_0x45b018],'groups':[_0x2557f6],'blocks':[_0x4d93f0],..._0x3ec5db};try{let _0x3d9a0f=await this[_0x3b945e(0x261)][_0x3b945e(0x362)][_0x3b945e(0x3ff)](_0x320d0d);return await this[_0x3b945e(0x142)](),_0x3d9a0f;}catch(_0x132546){let _0x4ef61c=_0x3b945e(0x453),_0x1fe15b=_0x132546 instanceof Error?_0x132546[_0x3b945e(0x202)]:typeof _0x132546==_0x3b945e(0x328)?JSON[_0x3b945e(0x647)](_0x132546):_0x132546,_0x257a2b=_0x4ef61c+':\x20'+_0x1fe15b;throw this['logger'][_0x3b945e(0x7a9)](this[_0x3b945e(0x629)]+'\x20('+this[_0x3b945e(0x466)][_0x3b945e(0x3fd)]+_0x3b945e(0x32f)+_0x257a2b),new m(_0x257a2b);}}async[a0_0x490cab(0x4d7)](_0x4a2dc0,_0x48b8a7){const _0x2ebe9e=a0_0x490cab;try{this[_0x2ebe9e(0x21e)][_0x2ebe9e(0x331)](this[_0x2ebe9e(0x629)]+'\x20('+this['instance'][_0x2ebe9e(0x3fd)]+_0x2ebe9e(0x674));let _0xba4afb=await this[_0x2ebe9e(0x261)][_0x2ebe9e(0x362)][_0x2ebe9e(0x2cd)]({'where':{'_id':_0x48b8a7,'owner':_0x4a2dc0}});if(!_0xba4afb)throw new m(_0x2ebe9e(0x4a4));if(_0xba4afb['shareFlow']===!0x1&&!_0xba4afb[_0x2ebe9e(0x803)])throw new m('Esse\x20fluxo\x20não\x20permite\x20importação.');let _0xedb365=new Set(_0xba4afb['whoCanUse']??[]);_0xedb365[_0x2ebe9e(0x1dc)](this['instance'][_0x2ebe9e(0x3fd)]);let _0x47ba35=await this[_0x2ebe9e(0x261)][_0x2ebe9e(0x362)]['updateOne'](_0x48b8a7,{..._0xba4afb,'whoCanUse':Array['from'](_0xedb365)});return await this[_0x2ebe9e(0x142)](),_0x47ba35;}catch(_0x273e34){let _0x581dec='Erro\x20ao\x20criar\x20fluxo\x20compartilhado',_0x44e8f5=_0x273e34 instanceof Error?_0x273e34['message']:typeof _0x273e34==_0x2ebe9e(0x328)?JSON['stringify'](_0x273e34):_0x273e34,_0x55d68a=_0x581dec+':\x20'+_0x44e8f5;throw this['logger'][_0x2ebe9e(0x7a9)](this[_0x2ebe9e(0x629)]+'\x20('+this['instance']['wuid']+_0x2ebe9e(0x32f)+_0x55d68a),new m(_0x55d68a);}}['getUniqueFlowName'](_0x39aa59){const _0x4c3892=a0_0x490cab;let _0x5c5082=_0x39aa59,_0x59a3f7=0x1;for(;this[_0x4c3892(0x672)][_0x4c3892(0x3e7)][_0x4c3892(0x259)](_0x1295a9=>_0x1295a9[_0x4c3892(0x149)]===_0x5c5082);)_0x59a3f7++,_0x5c5082=_0x39aa59+'\x20('+_0x59a3f7+')';return _0x5c5082;}async[a0_0x490cab(0x246)](_0x45633c){const _0x1e0070=a0_0x490cab;try{if(this[_0x1e0070(0x21e)][_0x1e0070(0x331)](this[_0x1e0070(0x629)]+'\x20('+this[_0x1e0070(0x466)][_0x1e0070(0x3fd)]+'):\x20\x27Deletando\x20fluxo,\x20id:\x20'+_0x45633c[_0x1e0070(0x215)]+_0x1e0070(0x19a)+_0x45633c[_0x1e0070(0x42e)]),!this[_0x1e0070(0x672)][_0x1e0070(0x3e7)][_0x1e0070(0x5f9)](_0x2885bd=>_0x2885bd['_id']===_0x45633c[_0x1e0070(0x215)]))throw this[_0x1e0070(0x21e)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x1e0070(0x3fd)]+'):\x20Fluxo\x20\x27'+_0x45633c[_0x1e0070(0x215)]+_0x1e0070(0x36d)),new m(_0x1e0070(0x632));let _0x3284d5=await this[_0x1e0070(0x261)]['flow'][_0x1e0070(0x2cd)]({'where':{'_id':_0x45633c[_0x1e0070(0x215)]}});if(!_0x3284d5)throw new m('Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.');if(this[_0x1e0070(0x466)]['wuid']===_0x3284d5[_0x1e0070(0x1f7)]){this['logger'][_0x1e0070(0x331)](this[_0x1e0070(0x629)]+'\x20('+this[_0x1e0070(0x466)][_0x1e0070(0x3fd)]+_0x1e0070(0x2f0)+_0x45633c[_0x1e0070(0x215)]+_0x1e0070(0x4df));let _0x3ce987=await this[_0x1e0070(0x261)][_0x1e0070(0x362)]['deleteOne']({'where':{'_id':_0x45633c[_0x1e0070(0x215)]}});return await this['synchronizeAndMapFlows'](),_0x3ce987;}return this[_0x1e0070(0x21e)][_0x1e0070(0x331)](this[_0x1e0070(0x629)]+'\x20('+this[_0x1e0070(0x466)]['wuid']+_0x1e0070(0x359)+this[_0x1e0070(0x466)]['wuid']+'\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27'+_0x45633c[_0x1e0070(0x215)]+_0x1e0070(0x26a)),_0x3284d5[_0x1e0070(0x695)]=(_0x3284d5[_0x1e0070(0x695)]??[])[_0x1e0070(0x5f7)](_0x1beeeb=>_0x1beeeb!==this[_0x1e0070(0x466)]['wuid']),_0x3284d5[_0x1e0070(0x283)]=(_0x3284d5[_0x1e0070(0x283)]??[])['filter'](_0x7b2cac=>_0x7b2cac!==this[_0x1e0070(0x466)]['wuid']),_0x3284d5[_0x1e0070(0x283)][_0x1e0070(0x587)]===0x0&&_0x3284d5['whoCanUse'][_0x1e0070(0x587)]>0x0&&(_0x3284d5[_0x1e0070(0x283)][_0x1e0070(0x3de)](_0x3284d5[_0x1e0070(0x695)][0x0]),this[_0x1e0070(0x21e)][_0x1e0070(0x331)](this[_0x1e0070(0x629)]+'\x20('+this['instance']['wuid']+_0x1e0070(0x46b)+_0x3284d5[_0x1e0070(0x695)][0x0]+_0x1e0070(0x7a8)+_0x45633c[_0x1e0070(0x215)]+_0x1e0070(0x26a))),await this['repository'][_0x1e0070(0x362)][_0x1e0070(0x341)](_0x3284d5[_0x1e0070(0x215)],_0x3284d5),await this[_0x1e0070(0x142)](),{'message':_0x1e0070(0x4ae)+_0x45633c[_0x1e0070(0x149)]+_0x1e0070(0x583)};}catch(_0x51b848){return this[_0x1e0070(0x21e)]['error'](this['instanceName']+'\x20('+this[_0x1e0070(0x466)][_0x1e0070(0x3fd)]+_0x1e0070(0x2dd)+(_0x51b848 instanceof Error?_0x51b848[_0x1e0070(0x202)]:JSON['stringify'](_0x51b848,null,0x2))),{'message':_0x1e0070(0x4e2)+(_0x51b848 instanceof Error?_0x51b848[_0x1e0070(0x202)]:JSON[_0x1e0070(0x647)](_0x51b848,null,0x2))};}}async[a0_0x490cab(0x6a3)](_0xdb4ad7){const _0xfe49db=a0_0x490cab;try{if(this[_0xfe49db(0x21e)][_0xfe49db(0x79f)](this[_0xfe49db(0x629)]+'\x20('+this[_0xfe49db(0x466)][_0xfe49db(0x3fd)]+_0xfe49db(0x13d)+_0xdb4ad7),!this[_0xfe49db(0x672)]&&(await this[_0xfe49db(0x2f2)](),!this[_0xfe49db(0x672)]))return null;let _0x8fdb83=await this[_0xfe49db(0x261)][_0xfe49db(0x362)][_0xfe49db(0x2cd)]({'where':{'_id':_0xdb4ad7}});if(!_0x8fdb83)throw new m('Fluxo\x20id\x20\x27'+_0xdb4ad7+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.');if(!(_0x8fdb83[_0xfe49db(0x803)]||_0x8fdb83[_0xfe49db(0x695)]?.[_0xfe49db(0x3d0)](this[_0xfe49db(0x466)][_0xfe49db(0x3fd)])))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27'+name+'\x27');_0x8fdb83['globalShow']&&!_0x8fdb83[_0xfe49db(0x695)]?.[_0xfe49db(0x3d0)](this[_0xfe49db(0x466)]['wuid'])&&(_0x8fdb83[_0xfe49db(0x695)]=[..._0x8fdb83['whoCanUse']??[],this[_0xfe49db(0x466)]['wuid']],await this[_0xfe49db(0x261)][_0xfe49db(0x362)][_0xfe49db(0x341)](_0x8fdb83[_0xfe49db(0x215)],_0x8fdb83),this[_0xfe49db(0x142)]());let _0x81cdb4=this[_0xfe49db(0x672)]?.[_0xfe49db(0x7f7)][_0xfe49db(0x555)](_0xa99476=>_0xa99476['name']),_0x2d88a1=[_0xfe49db(0x684),_0xfe49db(0x621),_0xfe49db(0x5c9),_0xfe49db(0x2e1),'status',_0xfe49db(0x72b),_0xfe49db(0x7ec),_0xfe49db(0x390),_0xfe49db(0x5a9),_0xfe49db(0x7ea),_0xfe49db(0x419)];_0x8fdb83[_0xfe49db(0x4bc)]=_0x8fdb83['variables'][_0xfe49db(0x5f7)](_0x4ff562=>!(_0x4ff562[_0xfe49db(0x6da)]===_0xfe49db(0x241)||_0x4ff562[_0xfe49db(0x241)])),_0x2d88a1[_0xfe49db(0x5aa)](_0x531281=>{const _0x5a9733=_0xfe49db;_0x8fdb83[_0x5a9733(0x4bc)]['push']({'folder':'leadInfo','name':_0x531281,'value':'','doc':'','leadInfo':!0x0});}),_0x81cdb4[_0xfe49db(0x5aa)](_0x3c66c9=>{const _0x4b4f65=_0xfe49db;let _0x4918c2=_0x8fdb83[_0x4b4f65(0x4bc)]['findIndex'](_0xc086bf=>_0xc086bf[_0x4b4f65(0x149)]===_0x3c66c9);_0x4918c2===-0x1?_0x8fdb83['variables'][_0x4b4f65(0x3de)]({'folder':'leadInfo','name':_0x3c66c9,'value':'','doc':'','leadInfo':!0x0}):(_0x8fdb83['variables'][_0x4918c2][_0x4b4f65(0x6da)]='leadInfo',_0x8fdb83[_0x4b4f65(0x4bc)][_0x4918c2]['leadInfo']=!0x0);}),_0x8fdb83[_0xfe49db(0x7c0)]&&_0x8fdb83[_0xfe49db(0x7c0)][_0xfe49db(0x587)]>0x0&&_0x8fdb83[_0xfe49db(0x7c0)][_0xfe49db(0x5aa)](_0x59dd2f=>{const _0x4244a5=_0xfe49db;_0x59dd2f[_0x4244a5(0x2d7)]&&_0x59dd2f[_0x4244a5(0x7d8)]&&_0x59dd2f['groupId']===_0x59dd2f[_0x4244a5(0x7d8)]&&(_0x59dd2f['next_groupId']=null);});let _0x58b147=await this[_0xfe49db(0x261)][_0xfe49db(0x362)][_0xfe49db(0x341)](_0x8fdb83['_id'],_0x8fdb83);if(!_0x58b147)throw new Error(_0xfe49db(0x179));return _0x58b147;}catch(_0x296530){let _0x2a5b92=_0xfe49db(0x80f),_0x44aa76=_0x296530 instanceof Error?_0x296530[_0xfe49db(0x202)]:typeof _0x296530==_0xfe49db(0x328)?JSON[_0xfe49db(0x647)](_0x296530):_0x296530,_0x3763d1=_0x2a5b92+':\x20'+_0x44aa76;throw this[_0xfe49db(0x21e)][_0xfe49db(0x7a9)](this[_0xfe49db(0x629)]+'\x20('+this[_0xfe49db(0x466)][_0xfe49db(0x3fd)]+_0xfe49db(0x32f)+_0x3763d1),new m(_0x3763d1);}}async[a0_0x490cab(0x5fe)](){const _0x34d763=a0_0x490cab;try{this['logger'][_0x34d763(0x331)](this[_0x34d763(0x629)]+'\x20('+this[_0x34d763(0x466)]['wuid']+_0x34d763(0x59c)),await this[_0x34d763(0x142)]();let _0x3574a6=await this['repository']['flow']['findAll']({'where':{'globalShow':!0x0}});return[...this[_0x34d763(0x672)]['flows'],..._0x3574a6];}catch(_0x4d0299){return this[_0x34d763(0x21e)][_0x34d763(0x7a9)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x34d763(0x775)+(_0x4d0299 instanceof Error?_0x4d0299[_0x34d763(0x202)]:JSON['stringify'](_0x4d0299,null,0x2))),{'message':_0x34d763(0x51e)+(_0x4d0299 instanceof Error?_0x4d0299[_0x34d763(0x202)]:String(_0x4d0299))};}}async[a0_0x490cab(0x367)](_0x22ce00,_0x3830f1){const _0x58e222=a0_0x490cab;try{this[_0x58e222(0x21e)]['verbose'](this['instanceName']+'\x20('+this[_0x58e222(0x466)][_0x58e222(0x3fd)]+_0x58e222(0x3d4));let _0x2dfcfd=this[_0x58e222(0x672)][_0x58e222(0x3e7)]['find'](_0x3bf147=>_0x3bf147[_0x58e222(0x215)]===_0x22ce00[_0x58e222(0x215)]);if(!_0x2dfcfd)throw this[_0x58e222(0x21e)][_0x58e222(0x331)](this[_0x58e222(0x629)]+'\x20('+this[_0x58e222(0x466)][_0x58e222(0x3fd)]+'):\x20Fluxo\x20\x27'+_0x22ce00[_0x58e222(0x215)]+_0x58e222(0x36d)),new m(_0x58e222(0x632));let _0x4d65c2=await this['repository'][_0x58e222(0x362)][_0x58e222(0x2cd)]({'where':{'_id':_0x22ce00[_0x58e222(0x215)]}});if(!_0x4d65c2||!_0x4d65c2[_0x58e222(0x695)]?.[_0x58e222(0x3d0)](this[_0x58e222(0x466)]['wuid']))throw this[_0x58e222(0x21e)][_0x58e222(0x7a9)](this[_0x58e222(0x629)]+'\x20('+this[_0x58e222(0x466)]['wuid']+_0x58e222(0x10f)+_0x22ce00[_0x58e222(0x215)]+_0x58e222(0x6d8)),new m(_0x58e222(0x6f9)+_0x22ce00['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x5d8a9c=this[_0x58e222(0x672)][_0x58e222(0x3e7)][_0x58e222(0x40a)](_0x3e2b23=>_0x3e2b23[_0x58e222(0x215)]===_0x2dfcfd[_0x58e222(0x215)]);if(_0x5d8a9c!==-0x1){let _0x149c8d=this[_0x58e222(0x672)][_0x58e222(0x3e7)][_0x5d8a9c];if(_0x149c8d[_0x58e222(0x149)]=_0x22ce00[_0x58e222(0x149)]??_0x149c8d['name'],_0x149c8d['default']=_0x22ce00[_0x58e222(0x73a)]??_0x149c8d['default'],_0x149c8d[_0x58e222(0x832)]=_0x22ce00[_0x58e222(0x832)]??_0x149c8d['testingWith'],_0x149c8d[_0x58e222(0x492)]=_0x22ce00[_0x58e222(0x6ff)]??_0x149c8d[_0x58e222(0x492)],_0x149c8d['minutesToClose']=_0x22ce00[_0x58e222(0x1d4)]??_0x149c8d[_0x58e222(0x1d4)],_0x149c8d[_0x58e222(0x455)]=_0x22ce00[_0x58e222(0x455)]??_0x149c8d['readMessages'],_0x22ce00['default']&&this[_0x58e222(0x672)][_0x58e222(0x3e7)][_0x58e222(0x5aa)]((_0x7e8e0c,_0x1721f5)=>{const _0x3b18d6=_0x58e222;_0x1721f5!==_0x5d8a9c&&(_0x7e8e0c[_0x3b18d6(0x73a)]=!0x1);}),this['AutomateSystem'][_0x58e222(0x3e7)][_0x5d8a9c]=_0x149c8d,!await this[_0x58e222(0x261)][_0x58e222(0x4d8)][_0x58e222(0x767)]({'flows':this['AutomateSystem']['flows']},this[_0x58e222(0x466)][_0x58e222(0x3fd)]))throw new m(_0x58e222(0x7e0));}let _0x1e677a=[_0x58e222(0x42e),_0x58e222(0x82d),_0x58e222(0x435),_0x58e222(0x4cf)];for(let _0x55d496 of _0x1e677a)delete _0x22ce00[_0x55d496];if(_0x4d65c2['whoCanEdit']?.[_0x58e222(0x3d0)](this[_0x58e222(0x466)][_0x58e222(0x3fd)])||(_0x22ce00={'_id':_0x22ce00[_0x58e222(0x215)]}),_0x3830f1!==Ii&&_0x22ce00?.['globalShow']&&!_0x4d65c2?.[_0x58e222(0x803)])throw new m('Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.');let _0x4a75c8=new Set(_0x22ce00[_0x58e222(0x283)]??_0x4d65c2[_0x58e222(0x283)]);_0x4a75c8['add'](_0x4d65c2[_0x58e222(0x1f7)]);let _0xca31a5=new Set(_0x22ce00[_0x58e222(0x695)]??_0x4d65c2[_0x58e222(0x695)]??[]);_0x4a75c8['forEach'](_0x80347c=>_0xca31a5[_0x58e222(0x1dc)](_0x80347c)),_0xca31a5[_0x58e222(0x1dc)](_0x4d65c2[_0x58e222(0x1f7)]),this[_0x58e222(0x21e)][_0x58e222(0x331)](this[_0x58e222(0x629)]+'\x20('+this[_0x58e222(0x466)][_0x58e222(0x3fd)]+'):\x20whoCanEdit\x20before\x20validation:\x20'+Array[_0x58e222(0x3f5)](_0x4a75c8)),this[_0x58e222(0x21e)][_0x58e222(0x331)](this[_0x58e222(0x629)]+'\x20('+this[_0x58e222(0x466)][_0x58e222(0x3fd)]+_0x58e222(0x16b)+Array['from'](_0xca31a5));let _0x633b2f=await this[_0x58e222(0x7d7)](Array['from'](_0xca31a5)),_0x1d7689=Array[_0x58e222(0x3f5)](_0x4a75c8)['filter'](_0x1b707b=>_0x633b2f['includes'](_0x1b707b)),_0x538686=Array[_0x58e222(0x3f5)](_0xca31a5)[_0x58e222(0x5f7)](_0x24774e=>_0x633b2f['includes'](_0x24774e));this[_0x58e222(0x21e)][_0x58e222(0x331)](this[_0x58e222(0x629)]+'\x20('+this[_0x58e222(0x466)][_0x58e222(0x3fd)]+_0x58e222(0x358)+_0x1d7689),this[_0x58e222(0x21e)]['verbose'](this[_0x58e222(0x629)]+'\x20('+this[_0x58e222(0x466)][_0x58e222(0x3fd)]+_0x58e222(0x80b)+_0x538686);let _0x545c45={..._0x4d65c2,..._0x22ce00,'whoCanEdit':_0x1d7689,'whoCanUse':_0x538686},_0x5df304=await this[_0x58e222(0x261)][_0x58e222(0x362)][_0x58e222(0x341)](_0x4d65c2[_0x58e222(0x215)],_0x545c45);return await this[_0x58e222(0x142)](),_0x5df304;}catch(_0x1cd2f4){let _0x4c288e='Erro\x20ao\x20alterar\x20fluxo',_0x8b0566=_0x1cd2f4 instanceof Error?_0x1cd2f4['message']:typeof _0x1cd2f4==_0x58e222(0x328)?JSON[_0x58e222(0x647)](_0x1cd2f4):_0x1cd2f4,_0x1a6cbc=_0x4c288e+':\x20'+_0x8b0566;throw this[_0x58e222(0x21e)][_0x58e222(0x7a9)](this[_0x58e222(0x629)]+'\x20('+this[_0x58e222(0x466)]['wuid']+_0x58e222(0x32f)+_0x1a6cbc),new m(_0x1a6cbc);}}async[a0_0x490cab(0x7d7)](_0x4b705e){const _0x2c16cf=a0_0x490cab;let _0xde2dc9={'numbers':_0x4b705e};return(await this[_0x2c16cf(0x3d6)](_0xde2dc9))[_0x2c16cf(0x5f7)](_0x14d55b=>_0x14d55b['exists'])[_0x2c16cf(0x555)](_0x129c0e=>_0x129c0e[_0x2c16cf(0x2ec)])[_0x2c16cf(0x555)](_0x1a765f=>this['extractPhoneNumber'](_0x1a765f));}[a0_0x490cab(0x21d)](_0x14ece7){const _0x4292a=a0_0x490cab;let _0x31a6da=_0x14ece7[_0x4292a(0x57d)](/\d+/);return _0x31a6da?_0x31a6da[0x0]:'';}async['editFlowBlock'](_0x3152b8){const _0xc744e2=a0_0x490cab;try{if(this['logger'][_0xc744e2(0x331)](this['instanceName']+'\x20('+this[_0xc744e2(0x466)][_0xc744e2(0x3fd)]+'):\x20Editando\x20bloco...'),!this[_0xc744e2(0x672)][_0xc744e2(0x3e7)][_0xc744e2(0x5f9)](_0x8550c5=>_0x8550c5['_id']===_0x3152b8[_0xc744e2(0x215)]))throw this[_0xc744e2(0x21e)][_0xc744e2(0x331)](this[_0xc744e2(0x629)]+'\x20('+this[_0xc744e2(0x466)][_0xc744e2(0x3fd)]+_0xc744e2(0x514)+_0x3152b8[_0xc744e2(0x215)]+_0xc744e2(0x36d)),new m(_0xc744e2(0x632));let _0x24964c=await this[_0xc744e2(0x261)][_0xc744e2(0x362)]['findOne']({'where':{'_id':_0x3152b8['_id']}});if(!_0x24964c||!_0x24964c['whoCanUse']?.[_0xc744e2(0x3d0)](this[_0xc744e2(0x466)][_0xc744e2(0x3fd)]))throw this[_0xc744e2(0x21e)]['error'](this[_0xc744e2(0x629)]+'\x20('+this[_0xc744e2(0x466)][_0xc744e2(0x3fd)]+_0xc744e2(0x10f)+_0x3152b8['_id']+_0xc744e2(0x6d8)),new m(_0xc744e2(0x6f9)+_0x3152b8[_0xc744e2(0x215)]+_0xc744e2(0x6d8));if(!_0x24964c[_0xc744e2(0x283)]?.[_0xc744e2(0x3d0)](this[_0xc744e2(0x466)][_0xc744e2(0x3fd)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let {block:_0x539da8}=_0x3152b8;_0x539da8?.[_0xc744e2(0x13e)]?this[_0xc744e2(0x5b7)](_0x24964c,_0x3152b8):_0x539da8?.[_0xc744e2(0x75b)]?this[_0xc744e2(0x1ca)](_0x24964c,_0x3152b8):_0x539da8[_0xc744e2(0x215)]?await this[_0xc744e2(0x1d3)](_0x24964c,_0x3152b8):this[_0xc744e2(0x251)](_0x24964c,_0x3152b8);let _0x9afe32=await this[_0xc744e2(0x261)][_0xc744e2(0x362)][_0xc744e2(0x341)](_0x24964c[_0xc744e2(0x215)],_0x24964c);if(!_0x9afe32)throw new Error(_0xc744e2(0x179));return _0x9afe32;}catch(_0x572427){this[_0xc744e2(0x38b)](_0xc744e2(0x75e)+_0x572427[_0xc744e2(0x202)]);}}async[a0_0x490cab(0x5b7)](_0x123d4d,_0x4df3b4){const _0x4a45a1=a0_0x490cab;let _0x37c7f8=_0x4df3b4[_0x4a45a1(0x1e9)]['_id'],_0x25264=_0x123d4d[_0x4a45a1(0x7c0)][_0x4a45a1(0x5f9)](_0x16d4da=>_0x16d4da[_0x4a45a1(0x215)]['toString']()===_0x37c7f8);if(!_0x25264){this[_0x4a45a1(0x21e)][_0x4a45a1(0x7a9)](this[_0x4a45a1(0x629)]+'\x20('+this[_0x4a45a1(0x466)][_0x4a45a1(0x3fd)]+_0x4a45a1(0x288)+_0x37c7f8+_0x4a45a1(0x457));return;}this['logger'][_0x4a45a1(0x331)](this[_0x4a45a1(0x629)]+'\x20('+this[_0x4a45a1(0x466)][_0x4a45a1(0x3fd)]+_0x4a45a1(0x7ed)+JSON['stringify'](_0x25264));let _0x205488=JSON[_0x4a45a1(0x5a5)](JSON[_0x4a45a1(0x647)](_0x25264));_0x205488[_0x4a45a1(0x215)]=new me['default'][(_0x4a45a1(0x6ed))][(_0x4a45a1(0x325))](),this[_0x4a45a1(0x21e)][_0x4a45a1(0x331)](this[_0x4a45a1(0x629)]+'\x20('+this[_0x4a45a1(0x466)]['wuid']+'):\x20Bloco\x20copiado:\x20'+JSON[_0x4a45a1(0x647)](_0x205488)),_0x123d4d[_0x4a45a1(0x7c0)][_0x4a45a1(0x3de)](_0x205488),this[_0x4a45a1(0x1b7)](_0x123d4d[_0x4a45a1(0x7c0)],_0x205488[_0x4a45a1(0x2d7)]);}[a0_0x490cab(0x38b)](_0x41c244){const _0x4a437f=a0_0x490cab;throw this[_0x4a437f(0x21e)]['error'](this[_0x4a437f(0x629)]+'\x20('+this[_0x4a437f(0x466)]['wuid']+_0x4a437f(0x32f)+_0x41c244),new m(_0x41c244);}[a0_0x490cab(0x1ca)](_0x14404b,_0x346857){const _0x4aaf53=a0_0x490cab;let {block:_0x217dbf}=_0x346857;if(_0x217dbf[_0x4aaf53(0x5af)]==='start'){this[_0x4aaf53(0x38b)](_0x4aaf53(0x6a2));return;}if(!_0x217dbf[_0x4aaf53(0x215)]){this[_0x4aaf53(0x38b)](_0x4aaf53(0x5f3));return;}let _0x88dbbe=_0x14404b[_0x4aaf53(0x7c0)][_0x4aaf53(0x5f9)](_0x58d4cb=>_0x58d4cb[_0x4aaf53(0x215)]['toString']()===_0x346857[_0x4aaf53(0x1e9)][_0x4aaf53(0x215)][_0x4aaf53(0x751)]());if(!_0x88dbbe){this['throwAndLogError'](_0x4aaf53(0x608)+_0x217dbf[_0x4aaf53(0x215)]+_0x4aaf53(0x5cd));return;}_0x14404b[_0x4aaf53(0x7c0)]=_0x14404b[_0x4aaf53(0x7c0)][_0x4aaf53(0x5f7)](_0x1a2631=>_0x1a2631[_0x4aaf53(0x215)][_0x4aaf53(0x751)]()!==_0x346857['block'][_0x4aaf53(0x215)][_0x4aaf53(0x751)]()),_0x14404b['conditions']=_0x14404b['conditions'][_0x4aaf53(0x5f7)](_0x12e7f2=>_0x12e7f2[_0x4aaf53(0x494)]!==_0x217dbf[_0x4aaf53(0x215)][_0x4aaf53(0x751)]()),_0x14404b[_0x4aaf53(0x51a)]=_0x14404b[_0x4aaf53(0x51a)][_0x4aaf53(0x5f7)](_0x56d02f=>_0x56d02f[_0x4aaf53(0x494)]!==_0x217dbf[_0x4aaf53(0x215)][_0x4aaf53(0x751)]()),_0x14404b[_0x4aaf53(0x3df)]=_0x14404b['replyOptions']['filter'](_0x191a0f=>_0x191a0f[_0x4aaf53(0x494)]!==_0x217dbf[_0x4aaf53(0x215)]['toString']()),this[_0x4aaf53(0x1b7)](_0x14404b['blocks'],_0x88dbbe[_0x4aaf53(0x2d7)]);}async[a0_0x490cab(0x1d3)](_0x154b67,_0x427caf){const _0x337848=a0_0x490cab;let _0x23aa81=_0x154b67[_0x337848(0x7c0)][_0x337848(0x40a)](_0x53fa7c=>_0x53fa7c['_id'][_0x337848(0x751)]()===_0x427caf[_0x337848(0x1e9)][_0x337848(0x215)][_0x337848(0x751)]());if(this['logger']['verbose'](this[_0x337848(0x629)]+'\x20('+this[_0x337848(0x466)][_0x337848(0x3fd)]+_0x337848(0x4fa)+_0x23aa81),_0x23aa81===-0x1){this[_0x337848(0x21e)][_0x337848(0x331)](_0x337848(0x608)+_0x427caf[_0x337848(0x1e9)][_0x337848(0x215)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}if(_0x154b67[_0x337848(0x7c0)][_0x23aa81][_0x337848(0x5af)]===_0x337848(0x4f1)){let _0x3a00c9=Object[_0x337848(0x66a)](_0x427caf[_0x337848(0x1e9)]);if(_0x3a00c9[_0x337848(0x587)]>0x2||_0x3a00c9[_0x337848(0x587)]===0x2&&!_0x3a00c9[_0x337848(0x3d0)](_0x337848(0x7d8))){this['throwAndLogError']('Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão');return;}}let _0x5ea171=_0x154b67[_0x337848(0x7c0)][_0x23aa81]['groupId'];for(let _0x9d3e0d in _0x427caf[_0x337848(0x1e9)])_0x427caf[_0x337848(0x1e9)][_0x337848(0x375)](_0x9d3e0d)&&(_0x154b67[_0x337848(0x7c0)][_0x23aa81][_0x9d3e0d]=_0x427caf[_0x337848(0x1e9)][_0x9d3e0d]);if(this[_0x337848(0x21e)]['verbose'](this[_0x337848(0x629)]+'\x20('+this[_0x337848(0x466)][_0x337848(0x3fd)]+'):\x20Bloco\x20a\x20ser\x20atualizado:\x20'+JSON['stringify'](_0x154b67[_0x337848(0x7c0)][_0x23aa81])),_0x154b67[_0x337848(0x7c0)][_0x23aa81][_0x337848(0x750)]&&'header'in _0x154b67['blocks'][_0x23aa81][_0x337848(0x750)]){this[_0x337848(0x21e)][_0x337848(0x331)](this[_0x337848(0x629)]+'\x20('+this[_0x337848(0x466)]['wuid']+_0x337848(0x47e));let _0x2cc8c1=JSON[_0x337848(0x647)](_0x154b67[_0x337848(0x7c0)][_0x23aa81][_0x337848(0x750)][_0x337848(0x1a4)],null,0x1);_0x2cc8c1['length']>0x2&&(_0x2cc8c1=_0x2cc8c1[_0x337848(0x692)](0x1,_0x2cc8c1[_0x337848(0x587)]-0x1)[_0x337848(0x63d)]()),_0x154b67[_0x337848(0x7c0)][_0x23aa81][_0x337848(0x750)][_0x337848(0x5bf)]=_0x2cc8c1;}if(_0x154b67[_0x337848(0x7c0)][_0x23aa81][_0x337848(0x750)]&&'body'in _0x154b67[_0x337848(0x7c0)][_0x23aa81]['apirequest']&&!(_0x337848(0x3f9)in _0x154b67['blocks'][_0x23aa81][_0x337848(0x750)])){this[_0x337848(0x21e)][_0x337848(0x331)](this[_0x337848(0x629)]+'\x20('+this[_0x337848(0x466)][_0x337848(0x3fd)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x154b67['blocks'][_0x23aa81][_0x337848(0x750)][_0x337848(0x525)]=!0x1;let _0x1cbe4c=JSON[_0x337848(0x647)](_0x154b67[_0x337848(0x7c0)][_0x23aa81]['apirequest'][_0x337848(0x3db)],null,0x2);_0x154b67[_0x337848(0x7c0)][_0x23aa81][_0x337848(0x750)][_0x337848(0x3f9)]=_0x1cbe4c;}if(_0x154b67['blocks'][_0x23aa81]['apirequest']&&'bodyString'in _0x154b67[_0x337848(0x7c0)][_0x23aa81][_0x337848(0x750)]){_0x154b67[_0x337848(0x7c0)][_0x23aa81][_0x337848(0x750)][_0x337848(0x525)]=!0x1;let _0x55d40f=_0x154b67[_0x337848(0x7c0)][_0x23aa81][_0x337848(0x750)][_0x337848(0x3f9)],_0x5af721=this[_0x337848(0x5ac)](_0x55d40f);_0x154b67['blocks'][_0x23aa81][_0x337848(0x750)][_0x337848(0x3f9)]=_0x5af721[_0x337848(0x5b3)],_0x154b67['blocks'][_0x23aa81]['apirequest']['bodyStringErrorParse']=_0x5af721['error'];}let _0x3aa86a=_0x154b67[_0x337848(0x7c0)][_0x23aa81]['groupId'];_0x5ea171!==_0x3aa86a?(this[_0x337848(0x1b7)](_0x154b67[_0x337848(0x7c0)],_0x5ea171),this[_0x337848(0x1b7)](_0x154b67[_0x337848(0x7c0)],_0x3aa86a)):this[_0x337848(0x1b7)](_0x154b67[_0x337848(0x7c0)],_0x5ea171);}[a0_0x490cab(0x5ac)](_0x5f4de8){const _0x246024=a0_0x490cab;let _0x2dc37c='\u205f',_0x21cc00=!0x1,_0x5c5d5a='';for(let _0x194c4f=0x0;_0x194c4f<_0x5f4de8[_0x246024(0x587)];_0x194c4f++){let _0x18dccf=_0x5f4de8[_0x194c4f];_0x18dccf==='\x22'&&(_0x194c4f===0x0||_0x5f4de8[_0x194c4f-0x1]!=='\x5c')&&(_0x21cc00=!_0x21cc00),!(!_0x21cc00&&(_0x18dccf==='\x0a'||_0x18dccf==='\x20'||_0x18dccf===_0x2dc37c))&&(_0x5c5d5a+=_0x18dccf);}let _0xc8a7f9={},_0x489de2=9876543210.1234,_0x4cfe5a=_0x5c5d5a[_0x246024(0x4d4)](/\{\{([^}]+)\}\}/g,_0x26eb50=>{let _0x81f10a=_0x26eb50,_0x1cfa45=''+_0x489de2;return _0xc8a7f9[_0x1cfa45]=_0x81f10a,_0x489de2+=0.0001,_0x1cfa45;}),_0x3e1a47='',_0x481961=!0x1;try{let _0x32c3e5=JSON[_0x246024(0x5a5)](_0x4cfe5a);_0x3e1a47=JSON[_0x246024(0x647)](_0x32c3e5,null,0x2),_0x3e1a47=_0x3e1a47[_0x246024(0x4d4)](/\n( +)/g,(_0x1a6395,_0x403248)=>{const _0x75e03f=_0x246024;let _0x376dec=_0x403248[_0x75e03f(0x587)];return'\x0a'+_0x2dc37c[_0x75e03f(0x30c)](_0x376dec*0x2);}),_0x3e1a47=_0x3e1a47[_0x246024(0x4d4)](/(\d{10,}\.\d+)/g,_0x14f7e2=>_0xc8a7f9[_0x14f7e2]||_0x14f7e2);}catch(_0x4acea8){this[_0x246024(0x21e)][_0x246024(0x7a9)](_0x246024(0x252)+_0x4acea8),_0x3e1a47=_0x5f4de8,_0x481961=!0x0;}return{'result':_0x3e1a47,'error':_0x481961};}[a0_0x490cab(0x251)](_0x54193b,_0x1f0ef1){const _0x268d9a=a0_0x490cab;if(_0x1f0ef1[_0x268d9a(0x1e9)]['type']===_0x268d9a(0x4f1)){this[_0x268d9a(0x38b)]('Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão');return;}if(_0x1f0ef1['block'][_0x268d9a(0x750)]&&'header'in _0x1f0ef1[_0x268d9a(0x1e9)][_0x268d9a(0x750)]){this['logger'][_0x268d9a(0x331)](this['instanceName']+'\x20('+this[_0x268d9a(0x466)][_0x268d9a(0x3fd)]+_0x268d9a(0x47e));let _0x177e6a=JSON[_0x268d9a(0x647)](_0x1f0ef1['block'][_0x268d9a(0x750)]['header'],null,0x1);_0x177e6a[_0x268d9a(0x587)]>0x2&&(_0x177e6a=_0x177e6a[_0x268d9a(0x692)](0x1,_0x177e6a[_0x268d9a(0x587)]-0x1)['trim']()),_0x1f0ef1[_0x268d9a(0x1e9)][_0x268d9a(0x750)][_0x268d9a(0x5bf)]=_0x177e6a;}_0x1f0ef1[_0x268d9a(0x1e9)][_0x268d9a(0x750)]&&_0x268d9a(0x3db)in _0x1f0ef1[_0x268d9a(0x1e9)][_0x268d9a(0x750)]&&(this['logger'][_0x268d9a(0x331)](this[_0x268d9a(0x629)]+'\x20('+this[_0x268d9a(0x466)][_0x268d9a(0x3fd)]+_0x268d9a(0x399)),_0x1f0ef1[_0x268d9a(0x1e9)][_0x268d9a(0x750)][_0x268d9a(0x3f9)]=JSON[_0x268d9a(0x647)](_0x1f0ef1[_0x268d9a(0x1e9)][_0x268d9a(0x750)][_0x268d9a(0x3db)],null,0x1)[_0x268d9a(0x63d)]()),_0x54193b[_0x268d9a(0x7c0)]['push'](_0x1f0ef1[_0x268d9a(0x1e9)]),this['reorderBlocks'](_0x54193b['blocks'],_0x1f0ef1[_0x268d9a(0x1e9)][_0x268d9a(0x2d7)]);}['reorderBlocks'](_0x10fa29,_0x3b3caa){const _0x1b08cd=a0_0x490cab;let _0x668b33=_0x10fa29[_0x1b08cd(0x5f7)](_0x4b6464=>_0x4b6464[_0x1b08cd(0x2d7)]===_0x3b3caa);_0x668b33[_0x1b08cd(0x644)]((_0x1455f1,_0x28159f)=>_0x1455f1[_0x1b08cd(0x69a)]-_0x28159f[_0x1b08cd(0x69a)]),_0x668b33['forEach']((_0x29e0f5,_0xac9c62)=>_0x29e0f5['order']=_0xac9c62+0x1);}async['editFlowReply'](_0x5ae130){const _0x1b86e0=a0_0x490cab;try{if(this[_0x1b86e0(0x21e)]['verbose'](this[_0x1b86e0(0x629)]+'\x20('+this[_0x1b86e0(0x466)][_0x1b86e0(0x3fd)]+_0x1b86e0(0x4d2)),!_0x5ae130||!_0x5ae130[_0x1b86e0(0x780)]){this[_0x1b86e0(0x38b)]('Data\x20inválida\x20fornecida');return;}if(!this[_0x1b86e0(0x672)][_0x1b86e0(0x3e7)]['find'](_0x4874a8=>_0x4874a8['_id']===_0x5ae130[_0x1b86e0(0x215)]))throw this[_0x1b86e0(0x21e)]['verbose'](this[_0x1b86e0(0x629)]+'\x20('+this[_0x1b86e0(0x466)][_0x1b86e0(0x3fd)]+_0x1b86e0(0x514)+_0x5ae130[_0x1b86e0(0x215)]+_0x1b86e0(0x36d)),new m(_0x1b86e0(0x632));let _0x2a1181=await this['repository'][_0x1b86e0(0x362)][_0x1b86e0(0x2cd)]({'where':{'_id':_0x5ae130['_id']}});if(!_0x2a1181||!_0x2a1181['whoCanUse']?.['includes'](this['instance'][_0x1b86e0(0x3fd)]))throw this[_0x1b86e0(0x21e)]['error'](this[_0x1b86e0(0x629)]+'\x20('+this[_0x1b86e0(0x466)][_0x1b86e0(0x3fd)]+_0x1b86e0(0x10f)+_0x5ae130[_0x1b86e0(0x215)]+_0x1b86e0(0x6d8)),new m('Flow\x20\x27'+_0x5ae130['_id']+_0x1b86e0(0x6d8));if(!_0x2a1181['whoCanEdit']?.['includes'](this['instance']['wuid']))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let {replyOption:_0x533bc0}=_0x5ae130;_0x533bc0?.['delete']?(this[_0x1b86e0(0x511)](_0x2a1181,_0x5ae130),this[_0x1b86e0(0x41f)](_0x2a1181[_0x1b86e0(0x3df)],_0x5ae130[_0x1b86e0(0x780)][_0x1b86e0(0x494)])):_0x533bc0[_0x1b86e0(0x215)]?(await this[_0x1b86e0(0x2a9)](_0x2a1181,_0x5ae130),this[_0x1b86e0(0x41f)](_0x2a1181['replyOptions'],_0x5ae130[_0x1b86e0(0x780)]['blockId'])):(this['addReplyOption'](_0x2a1181,_0x5ae130),this[_0x1b86e0(0x41f)](_0x2a1181[_0x1b86e0(0x3df)],_0x5ae130[_0x1b86e0(0x780)][_0x1b86e0(0x494)]));let _0x56afef=await this[_0x1b86e0(0x261)]['flow'][_0x1b86e0(0x341)](_0x2a1181[_0x1b86e0(0x215)],_0x2a1181);if(!_0x56afef)throw new Error(_0x1b86e0(0x179));return _0x56afef;}catch(_0x1eb4b3){this[_0x1b86e0(0x38b)]('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0x1eb4b3);}}[a0_0x490cab(0x41f)](_0x4829ca,_0x3ca321){const _0x4aac74=a0_0x490cab;_0x4829ca[_0x4aac74(0x5aa)](_0x47c31c=>{const _0x5386e8=_0x4aac74;_0x47c31c[_0x5386e8(0x494)]===_0x3ca321&&_0x47c31c['order']===void 0x0&&(_0x47c31c['order']=0x270f);});let _0x396a0b=_0x4829ca[_0x4aac74(0x5f7)](_0x465f21=>_0x465f21[_0x4aac74(0x494)]===_0x3ca321);_0x396a0b[_0x4aac74(0x644)]((_0x48600d,_0x463ecf)=>_0x48600d[_0x4aac74(0x69a)]-_0x463ecf['order']),_0x396a0b[_0x4aac74(0x5aa)]((_0x24ecdb,_0x496c92)=>{_0x24ecdb['order']=_0x496c92+0x1;}),_0x4829ca[_0x4aac74(0x5aa)](_0x3ed90c=>{const _0x5a51b4=_0x4aac74;if(_0x3ed90c['blockId']===_0x3ca321){let _0x54e067=_0x396a0b['find'](_0x418428=>_0x418428['_id']&&_0x3ed90c[_0x5a51b4(0x215)]&&_0x418428[_0x5a51b4(0x215)]['toString']()===_0x3ed90c['_id'][_0x5a51b4(0x751)]());_0x54e067&&(_0x3ed90c[_0x5a51b4(0x69a)]=_0x54e067['order']);}});}[a0_0x490cab(0x511)](_0x4fd53e,_0x343703){const _0x48a861=a0_0x490cab;let {replyOption:_0x31376a}=_0x343703;if(!_0x31376a[_0x48a861(0x215)]){this[_0x48a861(0x38b)](_0x48a861(0x1f4));return;}if(!_0x4fd53e[_0x48a861(0x3df)][_0x48a861(0x5f9)](_0x392818=>_0x392818['_id'][_0x48a861(0x751)]()===_0x343703[_0x48a861(0x780)][_0x48a861(0x215)]['toString']())){this[_0x48a861(0x38b)]('ReplyOption\x20com\x20ID\x20'+_0x31376a[_0x48a861(0x215)]+_0x48a861(0x5cd));return;}_0x4fd53e[_0x48a861(0x3df)]=_0x4fd53e[_0x48a861(0x3df)]['filter'](_0x2678d4=>_0x2678d4[_0x48a861(0x215)][_0x48a861(0x751)]()!==_0x343703[_0x48a861(0x780)][_0x48a861(0x215)][_0x48a861(0x751)]());}async[a0_0x490cab(0x2a9)](_0x14ad8e,_0x10089c){const _0x1d097c=a0_0x490cab;let _0x57458b=_0x14ad8e['replyOptions'][_0x1d097c(0x40a)](_0x3aa9b4=>_0x3aa9b4[_0x1d097c(0x215)]['toString']()===_0x10089c[_0x1d097c(0x780)][_0x1d097c(0x215)][_0x1d097c(0x751)]());if(_0x57458b===-0x1){this[_0x1d097c(0x38b)]('ReplyOption\x20com\x20ID\x20'+_0x10089c[_0x1d097c(0x780)]['_id']+'\x20não\x20encontrado\x20para\x20atualização.');return;}for(let _0x51f881 in _0x10089c[_0x1d097c(0x780)])_0x10089c['replyOption'][_0x1d097c(0x375)](_0x51f881)&&(_0x14ad8e[_0x1d097c(0x3df)][_0x57458b][_0x51f881]=_0x10089c[_0x1d097c(0x780)][_0x51f881]);}[a0_0x490cab(0x61f)](_0x2af6a9,_0x129d0e){const _0x26f5b5=a0_0x490cab;_0x2af6a9[_0x26f5b5(0x3df)][_0x26f5b5(0x3de)](_0x129d0e['replyOption']);}async['editFlowGroup'](_0x1b244a){const _0x2a0982=a0_0x490cab;this[_0x2a0982(0x21e)][_0x2a0982(0x331)](this[_0x2a0982(0x629)]+'\x20('+this['instance'][_0x2a0982(0x3fd)]+_0x2a0982(0x329)+JSON[_0x2a0982(0x647)](_0x1b244a,null,0x2));try{if(this[_0x2a0982(0x21e)][_0x2a0982(0x331)](this['instanceName']+'\x20('+this[_0x2a0982(0x466)][_0x2a0982(0x3fd)]+'):\x20Editando\x20grupo\x20do\x20fluxo...'),!this[_0x2a0982(0x672)][_0x2a0982(0x3e7)][_0x2a0982(0x5f9)](_0x127ec9=>_0x127ec9[_0x2a0982(0x215)]===_0x1b244a[_0x2a0982(0x215)]))throw this[_0x2a0982(0x21e)]['verbose'](this[_0x2a0982(0x629)]+'\x20('+this[_0x2a0982(0x466)][_0x2a0982(0x3fd)]+_0x2a0982(0x514)+_0x1b244a[_0x2a0982(0x215)]+_0x2a0982(0x36d)),new m(_0x2a0982(0x632));let _0x1baea8=await this['repository'][_0x2a0982(0x362)]['findOne']({'where':{'_id':_0x1b244a[_0x2a0982(0x215)]}});if(!_0x1baea8||!_0x1baea8[_0x2a0982(0x695)]?.[_0x2a0982(0x3d0)](this[_0x2a0982(0x466)][_0x2a0982(0x3fd)]))throw this[_0x2a0982(0x21e)]['error'](this[_0x2a0982(0x629)]+'\x20('+this[_0x2a0982(0x466)][_0x2a0982(0x3fd)]+_0x2a0982(0x10f)+_0x1b244a['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x2a0982(0x6f9)+_0x1b244a[_0x2a0982(0x215)]+_0x2a0982(0x6d8));if(!_0x1baea8[_0x2a0982(0x283)]?.[_0x2a0982(0x3d0)](this[_0x2a0982(0x466)][_0x2a0982(0x3fd)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');if(_0x1b244a[_0x2a0982(0x657)]&&_0x1b244a[_0x2a0982(0x657)]?.[_0x2a0982(0x75b)]===!0x0){if(this[_0x2a0982(0x21e)]['verbose'](this[_0x2a0982(0x629)]+'\x20('+this[_0x2a0982(0x466)][_0x2a0982(0x3fd)]+_0x2a0982(0x5a2)),_0x1b244a[_0x2a0982(0x657)]['default']===!0x0)return{'message':_0x2a0982(0x32c)};if(_0x1baea8['blocks'][_0x2a0982(0x259)](_0x386911=>_0x386911[_0x2a0982(0x2d7)][_0x2a0982(0x751)]()===_0x1b244a[_0x2a0982(0x657)][_0x2a0982(0x215)]))return this[_0x2a0982(0x21e)][_0x2a0982(0x331)](this[_0x2a0982(0x629)]+'\x20('+this[_0x2a0982(0x466)]['wuid']+_0x2a0982(0x29f)),{'message':_0x2a0982(0x37e)};_0x1baea8[_0x2a0982(0x5d5)]=_0x1baea8[_0x2a0982(0x5d5)]['filter'](_0x515caf=>_0x515caf[_0x2a0982(0x215)][_0x2a0982(0x751)]()!==_0x1b244a[_0x2a0982(0x657)][_0x2a0982(0x215)]);}else{if(_0x1b244a[_0x2a0982(0x657)]){if(_0x1b244a[_0x2a0982(0x657)][_0x2a0982(0x73a)]===!0x0)return{'message':_0x2a0982(0x56f)};if(_0x1b244a[_0x2a0982(0x657)]['_id']){let _0x436846=_0x1baea8[_0x2a0982(0x5d5)][_0x2a0982(0x5f9)](_0x8f50e2=>_0x8f50e2[_0x2a0982(0x215)][_0x2a0982(0x751)]()===_0x1b244a[_0x2a0982(0x657)]['_id']);_0x436846&&(_0x1b244a[_0x2a0982(0x657)]['x']<0x0&&(_0x1b244a[_0x2a0982(0x657)]['x']=0x0),_0x1b244a['group']['y']<0x0&&(_0x1b244a[_0x2a0982(0x657)]['y']=0x0),Object[_0x2a0982(0x17e)](_0x436846,_0x1b244a[_0x2a0982(0x657)]));}else _0x1baea8[_0x2a0982(0x5d5)][_0x2a0982(0x3de)](_0x1b244a[_0x2a0982(0x657)]);}}let _0x445d0d=await this[_0x2a0982(0x261)][_0x2a0982(0x362)][_0x2a0982(0x341)](_0x1baea8[_0x2a0982(0x215)],_0x1baea8);if(!_0x445d0d)throw new Error(_0x2a0982(0x179));return _0x445d0d;}catch(_0xc8a285){let _0x1622ce='Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo',_0x53783a=_0xc8a285 instanceof Error?_0xc8a285[_0x2a0982(0x202)]:typeof _0xc8a285=='object'?JSON[_0x2a0982(0x647)](_0xc8a285):_0xc8a285,_0x6a1cd4=_0x1622ce+':\x20'+_0x53783a;throw this['logger'][_0x2a0982(0x7a9)](this[_0x2a0982(0x629)]+'\x20('+this[_0x2a0982(0x466)][_0x2a0982(0x3fd)]+'):\x20'+_0x6a1cd4),new m(_0x6a1cd4);}}async[a0_0x490cab(0x234)](_0x367570){const _0x6b1ee1=a0_0x490cab;try{if(this[_0x6b1ee1(0x21e)][_0x6b1ee1(0x331)](this[_0x6b1ee1(0x629)]+'\x20('+this['instance']['wuid']+_0x6b1ee1(0x10d)),!this['AutomateSystem'][_0x6b1ee1(0x3e7)][_0x6b1ee1(0x5f9)](_0x80003e=>_0x80003e['_id']===_0x367570['_id']))throw this[_0x6b1ee1(0x21e)][_0x6b1ee1(0x331)](this[_0x6b1ee1(0x629)]+'\x20('+this[_0x6b1ee1(0x466)]['wuid']+_0x6b1ee1(0x514)+_0x367570[_0x6b1ee1(0x215)]+_0x6b1ee1(0x36d)),new m(_0x6b1ee1(0x632));let _0x47ee69=await this[_0x6b1ee1(0x261)][_0x6b1ee1(0x362)][_0x6b1ee1(0x2cd)]({'where':{'_id':_0x367570[_0x6b1ee1(0x215)]}});if(!_0x47ee69||!_0x47ee69['whoCanUse']?.[_0x6b1ee1(0x3d0)](this[_0x6b1ee1(0x466)]['wuid']))throw this[_0x6b1ee1(0x21e)][_0x6b1ee1(0x7a9)](this[_0x6b1ee1(0x629)]+'\x20('+this[_0x6b1ee1(0x466)][_0x6b1ee1(0x3fd)]+_0x6b1ee1(0x10f)+_0x367570[_0x6b1ee1(0x215)]+_0x6b1ee1(0x6d8)),new m('Flow\x20\x27'+_0x367570[_0x6b1ee1(0x215)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x47ee69[_0x6b1ee1(0x283)]?.[_0x6b1ee1(0x3d0)](this[_0x6b1ee1(0x466)][_0x6b1ee1(0x3fd)]))throw new m(_0x6b1ee1(0x79b));let _0x59a65c=!0x1;if(_0x367570['condition']?.['delete']===!0x0)_0x47ee69['conditions']=_0x47ee69[_0x6b1ee1(0x7fd)][_0x6b1ee1(0x5f7)](_0x843f12=>_0x843f12&&_0x367570[_0x6b1ee1(0x580)]&&_0x843f12[_0x6b1ee1(0x215)]&&_0x367570['condition'][_0x6b1ee1(0x215)]&&_0x843f12[_0x6b1ee1(0x215)][_0x6b1ee1(0x751)]()!==_0x367570[_0x6b1ee1(0x580)]['_id'][_0x6b1ee1(0x751)]()),_0x59a65c=!0x0;else{let _0x559c63=_0x47ee69[_0x6b1ee1(0x7fd)]['find'](_0x5e3ebe=>_0x5e3ebe&&_0x367570[_0x6b1ee1(0x580)]&&_0x5e3ebe['_id']&&_0x367570[_0x6b1ee1(0x580)][_0x6b1ee1(0x215)]&&_0x5e3ebe[_0x6b1ee1(0x215)][_0x6b1ee1(0x751)]()===_0x367570[_0x6b1ee1(0x580)][_0x6b1ee1(0x215)][_0x6b1ee1(0x751)]());_0x559c63?(_0x59a65c=_0x559c63[_0x6b1ee1(0x69a)]!==_0x367570[_0x6b1ee1(0x580)]['order'],Object[_0x6b1ee1(0x17e)](_0x559c63,_0x367570['condition'])):(_0x47ee69[_0x6b1ee1(0x7fd)][_0x6b1ee1(0x3de)](_0x367570[_0x6b1ee1(0x580)]),_0x59a65c=!0x0);}if(_0x59a65c){_0x47ee69[_0x6b1ee1(0x7fd)][_0x6b1ee1(0x644)]((_0x2d6606,_0x58a229)=>_0x2d6606['order']>_0x58a229[_0x6b1ee1(0x69a)]?0x1:_0x58a229[_0x6b1ee1(0x69a)]>_0x2d6606[_0x6b1ee1(0x69a)]?-0x1:0x0);for(let _0x29f70c=0x0;_0x29f70c<_0x47ee69[_0x6b1ee1(0x7fd)][_0x6b1ee1(0x587)];_0x29f70c++)_0x47ee69[_0x6b1ee1(0x7fd)][_0x29f70c][_0x6b1ee1(0x69a)]=_0x29f70c+0x1;_0x47ee69[_0x6b1ee1(0x7fd)][_0x6b1ee1(0x587)]>0x0&&(_0x47ee69['conditions'][0x0][_0x6b1ee1(0x3f2)]='and');}let _0x17ace9=await this[_0x6b1ee1(0x261)][_0x6b1ee1(0x362)]['updateOne'](_0x47ee69['_id'],_0x47ee69);if(!_0x17ace9)throw new Error(_0x6b1ee1(0x179));return _0x17ace9;}catch(_0x1f3644){let _0x3125e4=_0x6b1ee1(0x7f1),_0x1f24a8=_0x1f3644 instanceof Error?_0x1f3644[_0x6b1ee1(0x202)]:typeof _0x1f3644==_0x6b1ee1(0x328)?JSON[_0x6b1ee1(0x647)](_0x1f3644):_0x1f3644,_0x344a87=_0x3125e4+':\x20'+_0x1f24a8;throw this[_0x6b1ee1(0x21e)][_0x6b1ee1(0x7a9)](this[_0x6b1ee1(0x629)]+'\x20('+this[_0x6b1ee1(0x466)][_0x6b1ee1(0x3fd)]+'):\x20'+_0x344a87),new m(_0x344a87);}}async['editFlowVaredit'](_0x269f00){const _0x184a2e=a0_0x490cab;try{if(this[_0x184a2e(0x21e)][_0x184a2e(0x331)](this[_0x184a2e(0x629)]+'\x20('+this[_0x184a2e(0x466)][_0x184a2e(0x3fd)]+_0x184a2e(0x173)),!this[_0x184a2e(0x672)][_0x184a2e(0x3e7)][_0x184a2e(0x5f9)](_0x2a792d=>_0x2a792d['_id']===_0x269f00[_0x184a2e(0x215)]))throw this[_0x184a2e(0x21e)]['verbose'](this[_0x184a2e(0x629)]+'\x20('+this[_0x184a2e(0x466)][_0x184a2e(0x3fd)]+_0x184a2e(0x514)+_0x269f00[_0x184a2e(0x215)]+'\x27\x20não\x20encontrado'),new m(_0x184a2e(0x632));let _0x5aae1d=await this[_0x184a2e(0x261)][_0x184a2e(0x362)][_0x184a2e(0x2cd)]({'where':{'_id':_0x269f00['_id']}});if(!_0x5aae1d||!_0x5aae1d[_0x184a2e(0x695)]?.[_0x184a2e(0x3d0)](this[_0x184a2e(0x466)][_0x184a2e(0x3fd)]))throw this['logger'][_0x184a2e(0x7a9)](this[_0x184a2e(0x629)]+'\x20('+this['instance']['wuid']+_0x184a2e(0x10f)+_0x269f00[_0x184a2e(0x215)]+_0x184a2e(0x6d8)),new m(_0x184a2e(0x6f9)+_0x269f00[_0x184a2e(0x215)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x5aae1d[_0x184a2e(0x283)]?.[_0x184a2e(0x3d0)](this[_0x184a2e(0x466)][_0x184a2e(0x3fd)]))throw new m(_0x184a2e(0x79b));let _0x114e42=!0x1;if(_0x269f00['varedit']?.['delete']===!0x0)_0x5aae1d[_0x184a2e(0x51a)]=_0x5aae1d[_0x184a2e(0x51a)][_0x184a2e(0x5f7)](_0x2db888=>_0x2db888&&_0x269f00['varedit']&&_0x2db888[_0x184a2e(0x215)]&&_0x269f00['varedit']['_id']&&_0x2db888[_0x184a2e(0x215)][_0x184a2e(0x751)]()!==_0x269f00['varedit'][_0x184a2e(0x215)][_0x184a2e(0x751)]()),_0x114e42=!0x0;else{let _0x326213=_0x5aae1d[_0x184a2e(0x51a)]['find'](_0x395ec7=>_0x395ec7&&_0x269f00[_0x184a2e(0x121)]&&_0x395ec7['_id']&&_0x269f00['varedit'][_0x184a2e(0x215)]&&_0x395ec7[_0x184a2e(0x215)][_0x184a2e(0x751)]()===_0x269f00[_0x184a2e(0x121)][_0x184a2e(0x215)][_0x184a2e(0x751)]());_0x326213?(_0x114e42=_0x326213['order']!==_0x269f00[_0x184a2e(0x121)]['order'],Object[_0x184a2e(0x17e)](_0x326213,_0x269f00[_0x184a2e(0x121)])):(_0x5aae1d['varedits']['push'](_0x269f00[_0x184a2e(0x121)]),_0x114e42=!0x0);}if(_0x114e42){_0x5aae1d['varedits']['sort']((_0x4e29d2,_0x351ea5)=>_0x4e29d2['order']>_0x351ea5['order']?0x1:_0x351ea5[_0x184a2e(0x69a)]>_0x4e29d2[_0x184a2e(0x69a)]?-0x1:0x0);for(let _0x55d9d4=0x0;_0x55d9d4<_0x5aae1d[_0x184a2e(0x51a)][_0x184a2e(0x587)];_0x55d9d4++)_0x5aae1d[_0x184a2e(0x51a)][_0x55d9d4][_0x184a2e(0x69a)]=_0x55d9d4+0x1;}let _0x55a7f8=await this[_0x184a2e(0x261)][_0x184a2e(0x362)][_0x184a2e(0x341)](_0x5aae1d[_0x184a2e(0x215)],_0x5aae1d);if(!_0x55a7f8)throw new Error(_0x184a2e(0x179));return _0x55a7f8;}catch(_0x3ed151){let _0x157413=_0x184a2e(0x7f1),_0x364fde=_0x3ed151 instanceof Error?_0x3ed151[_0x184a2e(0x202)]:typeof _0x3ed151==_0x184a2e(0x328)?JSON[_0x184a2e(0x647)](_0x3ed151):_0x3ed151,_0x4ce189=_0x157413+':\x20'+_0x364fde;throw this[_0x184a2e(0x21e)][_0x184a2e(0x7a9)](this[_0x184a2e(0x629)]+'\x20('+this[_0x184a2e(0x466)]['wuid']+_0x184a2e(0x32f)+_0x4ce189),new m(_0x4ce189);}}async[a0_0x490cab(0x372)](_0x21b6d0){const _0x2df8e2=a0_0x490cab;try{if(this[_0x2df8e2(0x21e)][_0x2df8e2(0x331)](this[_0x2df8e2(0x629)]+'\x20('+this['instance'][_0x2df8e2(0x3fd)]+_0x2df8e2(0x617)),!this[_0x2df8e2(0x672)]['flows'][_0x2df8e2(0x5f9)](_0x152d46=>_0x152d46[_0x2df8e2(0x215)]===_0x21b6d0['_id']))throw this[_0x2df8e2(0x21e)][_0x2df8e2(0x331)](this[_0x2df8e2(0x629)]+'\x20('+this[_0x2df8e2(0x466)][_0x2df8e2(0x3fd)]+'):\x20Fluxo\x20\x27'+_0x21b6d0[_0x2df8e2(0x215)]+_0x2df8e2(0x36d)),new m(_0x2df8e2(0x632));let _0xb41f7=await this['repository'][_0x2df8e2(0x362)][_0x2df8e2(0x2cd)]({'where':{'_id':_0x21b6d0[_0x2df8e2(0x215)]}});if(!_0xb41f7||!_0xb41f7[_0x2df8e2(0x695)]?.[_0x2df8e2(0x3d0)](this[_0x2df8e2(0x466)][_0x2df8e2(0x3fd)]))throw this[_0x2df8e2(0x21e)][_0x2df8e2(0x7a9)](this['instanceName']+'\x20('+this[_0x2df8e2(0x466)]['wuid']+_0x2df8e2(0x10f)+_0x21b6d0[_0x2df8e2(0x215)]+_0x2df8e2(0x6d8)),new m(_0x2df8e2(0x6f9)+_0x21b6d0[_0x2df8e2(0x215)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0xb41f7[_0x2df8e2(0x283)]?.[_0x2df8e2(0x3d0)](this['instance'][_0x2df8e2(0x3fd)]))throw new m(_0x2df8e2(0x79b));_0x21b6d0[_0x2df8e2(0x796)][_0x2df8e2(0x149)]=_0x21b6d0[_0x2df8e2(0x796)][_0x2df8e2(0x149)][_0x2df8e2(0x63d)](),_0x21b6d0[_0x2df8e2(0x796)]['name'][_0x2df8e2(0x446)]('_')&&(_0x21b6d0[_0x2df8e2(0x796)][_0x2df8e2(0x149)]=_0x21b6d0[_0x2df8e2(0x796)]['name'][_0x2df8e2(0x692)](0x1)),_0x21b6d0['variable'][_0x2df8e2(0x149)]=_0x21b6d0[_0x2df8e2(0x796)]['name']['trim']();let _0x4d0b72=_0xb41f7[_0x2df8e2(0x4bc)][_0x2df8e2(0x5f9)](_0x12ce0c=>_0x12ce0c['name']===_0x21b6d0['variable'][_0x2df8e2(0x149)]);if(_0x4d0b72?.[_0x2df8e2(0x241)]===!0x0)throw new Error('Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.');if(_0x21b6d0[_0x2df8e2(0x796)]?.[_0x2df8e2(0x75b)]===!0x0){if(!_0x4d0b72)return{'message':_0x2df8e2(0x840)};_0xb41f7[_0x2df8e2(0x4bc)]=_0xb41f7[_0x2df8e2(0x4bc)]['filter'](_0x398745=>_0x398745[_0x2df8e2(0x149)]!==_0x21b6d0[_0x2df8e2(0x796)]['name']);}else _0x4d0b72?Object[_0x2df8e2(0x17e)](_0x4d0b72,_0x21b6d0[_0x2df8e2(0x796)]):_0xb41f7[_0x2df8e2(0x4bc)][_0x2df8e2(0x3de)](_0x21b6d0[_0x2df8e2(0x796)]);let _0x14e888=await this[_0x2df8e2(0x261)][_0x2df8e2(0x362)][_0x2df8e2(0x341)](_0xb41f7['_id'],_0xb41f7);if(!_0x14e888)throw new Error(_0x2df8e2(0x179));return _0x14e888;}catch(_0x507ddc){let _0x562693=_0x2df8e2(0x3f6),_0x20aa7f=_0x507ddc instanceof Error?_0x507ddc[_0x2df8e2(0x202)]:typeof _0x507ddc==_0x2df8e2(0x328)?JSON['stringify'](_0x507ddc):_0x507ddc,_0xad2cc0=_0x562693+':\x20'+_0x20aa7f;throw this[_0x2df8e2(0x21e)][_0x2df8e2(0x7a9)](this[_0x2df8e2(0x629)]+'\x20('+this[_0x2df8e2(0x466)][_0x2df8e2(0x3fd)]+'):\x20'+_0xad2cc0),new m(_0xad2cc0);}}async['startFlow'](_0x273926){const _0x26e948=a0_0x490cab;let _0x4ffeb2=null;try{if(!this['AutomateSystem']?.[_0x26e948(0x15b)][_0x26e948(0x431)])throw new m(_0x26e948(0x606));this['logger'][_0x26e948(0x331)](this[_0x26e948(0x629)]+'\x20('+this[_0x26e948(0x466)][_0x26e948(0x3fd)]+_0x26e948(0x37c));let _0x25ff94=(await this[_0x26e948(0x3d6)]({'numbers':[_0x273926['remoteJid']]}))[0x0];if(!_0x25ff94['exists']&&!(0x0,w[_0x26e948(0x698)])(_0x25ff94[_0x26e948(0x2ec)])&&!_0x25ff94[_0x26e948(0x2ec)]['includes'](_0x26e948(0x2fa)))throw _0x4ffeb2=JSON[_0x26e948(0x647)](_0x25ff94,null,0x2),new m(_0x25ff94);let _0x124da6;if(_0x273926[_0x26e948(0x149)][_0x26e948(0x587)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x26e948(0x22f)](_0x273926[_0x26e948(0x149)])?_0x124da6=this[_0x26e948(0x672)]['flows']['find'](_0x5804f5=>_0x5804f5[_0x26e948(0x215)]===_0x273926[_0x26e948(0x149)]):_0x124da6=this[_0x26e948(0x672)][_0x26e948(0x3e7)][_0x26e948(0x5f9)](_0x56d250=>_0x56d250['name']===_0x273926[_0x26e948(0x149)]),!_0x124da6)throw this[_0x26e948(0x21e)][_0x26e948(0x331)](this['instanceName']+'\x20('+this[_0x26e948(0x466)]['wuid']+'):\x20Fluxo\x20\x27'+_0x273926[_0x26e948(0x149)]+'\x27\x20não\x20encontrado'),new m(_0x26e948(0x632));let _0x158474=await this['repository'][_0x26e948(0x362)][_0x26e948(0x2cd)]({'where':{'_id':_0x124da6['_id']}});if(!_0x158474||!_0x158474[_0x26e948(0x695)]?.[_0x26e948(0x3d0)](this[_0x26e948(0x466)][_0x26e948(0x3fd)]))throw this[_0x26e948(0x21e)][_0x26e948(0x7a9)](this[_0x26e948(0x629)]+'\x20('+this[_0x26e948(0x466)]['wuid']+_0x26e948(0x10f)+_0x124da6[_0x26e948(0x215)]+_0x26e948(0x6d8)),_0x4ffeb2='Flow\x20\x27'+_0x124da6[_0x26e948(0x215)]+_0x26e948(0x6d8),new m(_0x4ffeb2);let _0x390faa=await this['createConversationforStartFlow'](_0x158474,_0x25ff94['jid'],_0x273926[_0x26e948(0x6c2)]);if(_0x390faa){this[_0x26e948(0x21e)][_0x26e948(0x331)](this[_0x26e948(0x629)]+'\x20('+this[_0x26e948(0x466)][_0x26e948(0x3fd)]+_0x26e948(0x2b7));let _0x19e3fc=await this[_0x26e948(0x315)](_0x390faa);return _0x19e3fc&&await this['processblock'](_0x390faa,_0x19e3fc),{'message':_0x26e948(0x2fd)+_0x273926[_0x26e948(0x133)]};}}catch(_0x3dff3c){if(this['logger']['error'](this[_0x26e948(0x629)]+'\x20('+this['instance'][_0x26e948(0x3fd)]+_0x26e948(0x262)+(_0x3dff3c instanceof Error?_0x3dff3c['message']:JSON[_0x26e948(0x647)](_0x3dff3c,null,0x2))),_0x4ffeb2=_0x3dff3c instanceof Error?_0x3dff3c[_0x26e948(0x202)]:JSON[_0x26e948(0x647)](_0x3dff3c,null,0x2),_0x4ffeb2)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x4ffeb2);}}async[a0_0x490cab(0x1fa)](_0x572423,_0x4bc8ee,_0x2fb251){const _0x2c8537=a0_0x490cab;let _0x592c2=null;try{if(!this[_0x2c8537(0x672)]?.['flowConfig']['enabled'])throw new m('Fluxos\x20não\x20estão\x20ativados');if(this[_0x2c8537(0x21e)][_0x2c8537(0x331)](this[_0x2c8537(0x629)]+'\x20('+this[_0x2c8537(0x466)][_0x2c8537(0x3fd)]+_0x2c8537(0x37c)),_0x4bc8ee){let _0x1a30a0=(await this[_0x2c8537(0x3d6)]({'numbers':[_0x4bc8ee]}))[0x0];if(!_0x1a30a0[_0x2c8537(0x232)]&&!(0x0,w[_0x2c8537(0x698)])(_0x1a30a0['jid'])&&!_0x1a30a0[_0x2c8537(0x2ec)]['includes'](_0x2c8537(0x2fa)))throw _0x592c2=JSON[_0x2c8537(0x647)](_0x1a30a0,null,0x2),new m(_0x1a30a0);_0x4bc8ee=_0x1a30a0['jid'];}else _0x4bc8ee||(_0x4bc8ee=(0x0,Y['v4'])());let _0x4364b7=await this[_0x2c8537(0x261)][_0x2c8537(0x362)][_0x2c8537(0x2cd)]({'where':{'_id':_0x572423}});if(!_0x4364b7||!_0x4364b7[_0x2c8537(0x695)]?.[_0x2c8537(0x3d0)](this[_0x2c8537(0x466)]['wuid']))throw this['logger']['error'](this[_0x2c8537(0x629)]+'\x20('+this['instance'][_0x2c8537(0x3fd)]+_0x2c8537(0x10f)+_0x572423+_0x2c8537(0x6d8)),new m(_0x2c8537(0x6f9)+_0x572423+_0x2c8537(0x6d8));let _0x50e21e=await this[_0x2c8537(0x67b)](_0x4364b7,_0x4bc8ee,null);if(_0x50e21e){this['logger'][_0x2c8537(0x331)](this['instanceName']+'\x20('+this[_0x2c8537(0x466)][_0x2c8537(0x3fd)]+_0x2c8537(0x50b));let _0x5bfbec;if(_0x2fb251){let _0x31e4b4=_0x50e21e['chatLog'][_0x2c8537(0x36f)],_0xc71204=this[_0x2c8537(0x333)](_0x2fb251);Object['assign'](_0x31e4b4,_0xc71204),_0x50e21e[_0x2c8537(0x32b)][_0x2c8537(0x36f)]=_0x31e4b4,_0x5bfbec={'error':!0x1,'apiResponse':_0x2fb251};}let _0x43a0b8=await this['NextBlock'](_0x50e21e);return _0x43a0b8&&await this[_0x2c8537(0x6d0)](_0x50e21e,_0x43a0b8),{'message':_0x2c8537(0x118)};}}catch(_0x1095c7){if(this[_0x2c8537(0x21e)]['error'](this[_0x2c8537(0x629)]+'\x20('+this[_0x2c8537(0x466)][_0x2c8537(0x3fd)]+'):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20'+(_0x1095c7 instanceof Error?_0x1095c7[_0x2c8537(0x202)]:JSON[_0x2c8537(0x647)](_0x1095c7,null,0x2))),_0x592c2=_0x1095c7 instanceof Error?_0x1095c7['message']:JSON[_0x2c8537(0x647)](_0x1095c7,null,0x2),_0x592c2)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x592c2);}}async[a0_0x490cab(0x2a6)](_0x3b92b8){const _0x26f353=a0_0x490cab;try{let _0x5c9589={'remoteJid':_0x3b92b8,'status':_0x26f353(0x1b9)},_0x5be0bb={'status':_0x26f353(0x53c)},_0x564bff=await this[_0x26f353(0x261)][_0x26f353(0x4cb)]['updateMany'](_0x5c9589,_0x5be0bb,this[_0x26f353(0x466)][_0x26f353(0x3fd)]);return this[_0x26f353(0x21e)][_0x26f353(0x331)](this[_0x26f353(0x629)]+'\x20('+this[_0x26f353(0x466)]['wuid']+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.'),_0x564bff;}catch(_0x562922){throw this['logger']['error'](this[_0x26f353(0x629)]+'\x20('+this[_0x26f353(0x466)][_0x26f353(0x3fd)]+'):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20'+_0x562922[_0x26f353(0x202)]),_0x562922;}}async[a0_0x490cab(0x67b)](_0x2869a8,_0x2ae6b8,_0x57bb6d){const _0x5590a4=a0_0x490cab;this[_0x5590a4(0x21e)][_0x5590a4(0x331)](this[_0x5590a4(0x629)]+'\x20('+this[_0x5590a4(0x466)]['wuid']+_0x5590a4(0x1a1)),await this[_0x5590a4(0x2a6)](_0x2ae6b8);try{let _0x5749e6=require(_0x5590a4(0x23e))[_0x5590a4(0x325)],_0x16f305=Date[_0x5590a4(0x7f9)](),_0x5aba92=_0x5590a4(0x4f1),_0xb364e0={},_0x1b0217={},_0x33a064=this[_0x5590a4(0x672)][_0x5590a4(0x3e7)][_0x5590a4(0x5f9)](_0x255cc1=>_0x255cc1['_id']===_0x2869a8[_0x5590a4(0x215)]?.['toString']()),_0x1fccbd=_0x33a064?.[_0x5590a4(0x1d4)]??_0x2869a8[_0x5590a4(0x1d4)]??0x0,_0x5a32f3=_0x33a064?.[_0x5590a4(0x455)]??_0x2869a8['readMessages']??!0x1,_0x54dff6={'flowId':_0x2869a8[_0x5590a4(0x215)],..._0x2869a8,'chatLog':null},_0x5e178b=await this[_0x5590a4(0x76f)](_0x54dff6[_0x5590a4(0x4bc)]),_0xbfb69=await this['getVariablesChat'](_0x2ae6b8),_0x24d38b={..._0x5e178b,..._0xbfb69,'_remoteJid':_0x2ae6b8},_0x167cf3={'lastReceivedMessage':_0xb364e0,'lastSendMessage':_0x1b0217,'lastBlockId':_0x5aba92,'lastCondition':!0x0,'realVariables':_0x24d38b};_0x54dff6['chatLog']=_0x167cf3,_0x54dff6['chatLog']['realVariables']={..._0x24d38b,..._0x57bb6d},delete _0x54dff6['_id'],_0x54dff6[_0x5590a4(0x215)]=new _0x5749e6(),_0x54dff6[_0x5590a4(0x352)]=_0x16f305,_0x54dff6['status']=_0x5590a4(0x1b9),_0x54dff6[_0x5590a4(0x133)]=_0x2ae6b8,_0x54dff6[_0x5590a4(0x1d4)]=_0x1fccbd,_0x54dff6[_0x5590a4(0x455)]=_0x5a32f3,_0x54dff6[_0x5590a4(0x215)]=_0x2869a8[_0x5590a4(0x215)];let _0x3b01d8=await this[_0x5590a4(0x261)][_0x5590a4(0x4cb)]['updateOne'](_0x54dff6[_0x5590a4(0x215)],_0x54dff6,this[_0x5590a4(0x466)][_0x5590a4(0x3fd)]);return this[_0x5590a4(0x21e)][_0x5590a4(0x331)](this[_0x5590a4(0x629)]+'\x20('+this[_0x5590a4(0x466)][_0x5590a4(0x3fd)]+_0x5590a4(0x2e2)),_0x3b01d8?_0x54dff6:null;}catch(_0x7b88c6){let _0xbbf136=_0x5590a4(0x11a),_0x187d2c=_0x7b88c6 instanceof Error?_0x7b88c6[_0x5590a4(0x202)]:typeof _0x7b88c6==_0x5590a4(0x328)?JSON[_0x5590a4(0x647)](_0x7b88c6):_0x7b88c6,_0x592b51=_0xbbf136+':\x20'+_0x187d2c;throw this[_0x5590a4(0x21e)]['error'](this[_0x5590a4(0x629)]+'\x20('+this[_0x5590a4(0x466)]['wuid']+'):\x20'+_0x592b51),new m(_0x592b51);}}async[a0_0x490cab(0x797)](_0x3d358e){const _0x42eaaf=a0_0x490cab;try{this['logger'][_0x42eaaf(0x331)](this[_0x42eaaf(0x629)]+'\x20('+this[_0x42eaaf(0x466)][_0x42eaaf(0x3fd)]+'):\x20Buscando\x20conversa...'),this[_0x42eaaf(0x21e)][_0x42eaaf(0x331)](this[_0x42eaaf(0x629)]+'\x20('+this[_0x42eaaf(0x466)][_0x42eaaf(0x3fd)]+_0x42eaaf(0x6b5)+_0x3d358e);let _0x90c704={'where':{'_id':_0x3d358e}};return await this[_0x42eaaf(0x261)][_0x42eaaf(0x4cb)][_0x42eaaf(0x2cd)](_0x90c704,this['instance'][_0x42eaaf(0x3fd)]);}catch(_0x266d57){let _0x59c028=_0x42eaaf(0x519),_0x61049e=_0x266d57 instanceof Error?_0x266d57[_0x42eaaf(0x202)]:typeof _0x266d57==_0x42eaaf(0x328)?JSON[_0x42eaaf(0x647)](_0x266d57):_0x266d57,_0x2bf3ae=_0x59c028+':\x20'+_0x61049e;throw this[_0x42eaaf(0x21e)][_0x42eaaf(0x7a9)](this['instanceName']+'\x20('+this['instance'][_0x42eaaf(0x3fd)]+'):\x20'+_0x2bf3ae),new m(_0x2bf3ae);}}async[a0_0x490cab(0x542)](_0x470e8f){const _0x4309bf=a0_0x490cab;try{return this['logger'][_0x4309bf(0x331)](this['instanceName']+'\x20('+this[_0x4309bf(0x466)][_0x4309bf(0x3fd)]+_0x4309bf(0x170)),await this['repository'][_0x4309bf(0x4cb)][_0x4309bf(0x5f9)](_0x470e8f,this[_0x4309bf(0x466)][_0x4309bf(0x3fd)]);}catch(_0x4e05d0){let _0x2a3a24='Erro\x20ao\x20buscar\x20conversas',_0x23c292=_0x4e05d0 instanceof Error?_0x4e05d0[_0x4309bf(0x202)]:typeof _0x4e05d0==_0x4309bf(0x328)?JSON['stringify'](_0x4e05d0):_0x4e05d0,_0x3fd6a2=_0x2a3a24+':\x20'+_0x23c292;throw this[_0x4309bf(0x21e)][_0x4309bf(0x7a9)](this[_0x4309bf(0x629)]+'\x20('+this[_0x4309bf(0x466)][_0x4309bf(0x3fd)]+_0x4309bf(0x32f)+_0x3fd6a2),new m(_0x3fd6a2);}}async['deleteConversation'](_0x490741){const _0x1c25ca=a0_0x490cab;try{return this[_0x1c25ca(0x21e)][_0x1c25ca(0x331)](this['instanceName']+'\x20('+this[_0x1c25ca(0x466)][_0x1c25ca(0x3fd)]+_0x1c25ca(0x6f3)),this['logger'][_0x1c25ca(0x331)](this[_0x1c25ca(0x629)]+'\x20('+this['instance'][_0x1c25ca(0x3fd)]+_0x1c25ca(0x428)+_0x490741),(await this[_0x1c25ca(0x261)][_0x1c25ca(0x4cb)][_0x1c25ca(0x7b4)]({'where':{'_id':_0x490741[_0x1c25ca(0x215)]}},this['instance'][_0x1c25ca(0x3fd)]))[_0x1c25ca(0x717)]===0x0?{'message':_0x1c25ca(0x4fc)}:{'message':_0x1c25ca(0x348)};}catch(_0x479d9c){let _0x477497=_0x1c25ca(0x7bb),_0x14d0c9=_0x479d9c instanceof Error?_0x479d9c['message']:typeof _0x479d9c==_0x1c25ca(0x328)?JSON['stringify'](_0x479d9c):_0x479d9c,_0x2e30a5=_0x477497+':\x20'+_0x14d0c9;throw this[_0x1c25ca(0x21e)][_0x1c25ca(0x7a9)](this[_0x1c25ca(0x629)]+'\x20('+this[_0x1c25ca(0x466)][_0x1c25ca(0x3fd)]+_0x1c25ca(0x32f)+_0x2e30a5),new m(_0x2e30a5);}}async[a0_0x490cab(0x5c0)](_0x35ac2a){const _0x4872c0=a0_0x490cab;try{let {_id:_0xa6db8,chatLog:_0x451e9f,status:_0x49f5bd}=_0x35ac2a;if(!_0xa6db8)return{'message':_0x4872c0(0x4bb)};let _0x1d2ae5={};if(_0x49f5bd!==void 0x0&&(_0x1d2ae5[_0x4872c0(0x526)]=_0x49f5bd),Object[_0x4872c0(0x66a)](_0x1d2ae5)[_0x4872c0(0x587)]===0x0)return{'message':_0x4872c0(0x742)};let _0xf5388b=await this[_0x4872c0(0x261)][_0x4872c0(0x4cb)]['updateOne'](_0xa6db8,_0x1d2ae5,this['instance'][_0x4872c0(0x3fd)]);return _0xf5388b||{'message':_0x4872c0(0x5f1)};}catch(_0x486498){let _0x5dc34f=_0x4872c0(0x691),_0x3717ba=_0x486498 instanceof Error?_0x486498['message']:typeof _0x486498==_0x4872c0(0x328)?JSON[_0x4872c0(0x647)](_0x486498):_0x486498,_0x1fe002=_0x5dc34f+':\x20'+_0x3717ba;throw this[_0x4872c0(0x21e)]['error'](this[_0x4872c0(0x629)]+'\x20('+this[_0x4872c0(0x466)][_0x4872c0(0x3fd)]+_0x4872c0(0x32f)+_0x1fe002),new m(_0x1fe002);}}async['editChat'](_0x332273){const _0x48eb48=a0_0x490cab;try{_0x332273[_0x48eb48(0x215)]=this[_0x48eb48(0x147)](_0x332273[_0x48eb48(0x215)]);let _0x357ee4=await this[_0x48eb48(0x261)]['chat']['findOne']({'where':{'_id':_0x332273['_id']}},this['instance'][_0x48eb48(0x3fd)]);if(!_0x357ee4)throw new m('Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo');let {_id:_0x35c0d4,leadInfo:_0x508d85}=_0x332273;if(!_0x35c0d4)throw new Error(_0x48eb48(0x4f2));if(_0x332273['delete']===_0x48eb48(0x6fc))return await this[_0x48eb48(0x6f0)](_0x332273[_0x48eb48(0x215)]),await this['repository'][_0x48eb48(0x745)][_0x48eb48(0x75b)]({'where':{'_id':_0x332273[_0x48eb48(0x215)]}},this[_0x48eb48(0x466)][_0x48eb48(0x3fd)]),await this[_0x48eb48(0x261)]['message'][_0x48eb48(0x75b)]({'where':{'key':{'remoteJid':_0x332273[_0x48eb48(0x215)]}}},this[_0x48eb48(0x466)][_0x48eb48(0x3fd)]),_0x332273=await this['repository'][_0x48eb48(0x745)][_0x48eb48(0x341)]({'where':{'_id':_0x332273[_0x48eb48(0x215)]}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x48eb48(0x3fd)]),j(this['instanceName'],'chats',{'chat':_0x332273}),{'message':_0x48eb48(0x27a)};if(_0x332273[_0x48eb48(0x75b)]==='messages')return await this['repository'][_0x48eb48(0x202)]['delete']({'where':{'key':{'remoteJid':_0x332273['_id']}}},this[_0x48eb48(0x466)][_0x48eb48(0x3fd)]),_0x332273=await this[_0x48eb48(0x261)][_0x48eb48(0x745)]['updateOne']({'where':{'_id':_0x332273['_id']}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x48eb48(0x3fd)]),j(this[_0x48eb48(0x629)],_0x48eb48(0x6e8),{'chat':_0x332273}),{'message':_0x48eb48(0x306)};let _0x2addaf=(_0x7afe68,_0x10dc17,_0x49f625)=>{const _0x58763c=_0x48eb48;_0x7afe68&&_0x49f625[_0x58763c(0x5aa)](_0x2a17a9=>{const _0x1a7c9f=_0x58763c;_0x7afe68[_0x2a17a9]!==void 0x0&&(_0x10dc17[_0x1a7c9f(0x15c)+_0x2a17a9]=_0x7afe68[_0x2a17a9]);});},_0x4d7b93={};if(_0x48eb48(0x7b9)in _0x332273&&(this[_0x48eb48(0x21e)][_0x48eb48(0x331)](this[_0x48eb48(0x629)]+'\x20('+this['instance'][_0x48eb48(0x3fd)]+'):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20'+_0x332273[_0x48eb48(0x215)]),_0x332273[_0x48eb48(0x7b9)]=_0x332273[_0x48eb48(0x7b9)]===0x0?null:-0x1,await this[_0x48eb48(0x386)][_0x48eb48(0x47b)]({'mute':_0x332273[_0x48eb48(0x7b9)]},_0x332273[_0x48eb48(0x215)]),_0x4d7b93[_0x48eb48(0x7b9)]=Number(_0x332273[_0x48eb48(0x7b9)])),_0x508d85&&(_0x2addaf(_0x508d85,_0x4d7b93,[_0x48eb48(0x684),_0x48eb48(0x621),_0x48eb48(0x5c9),_0x48eb48(0x2e1),_0x48eb48(0x526),_0x48eb48(0x72b),'tags',_0x48eb48(0x419),_0x48eb48(0x7ec),_0x48eb48(0x5a9),_0x48eb48(0x679)]),Array[_0x48eb48(0x250)](_0x508d85[_0x48eb48(0x7f7)])&&(_0x4d7b93['leadInfo.customFields']=_0x508d85['customFields'][_0x48eb48(0x555)](_0x3399c8=>({'_id':_0x3399c8[_0x48eb48(0x215)],'value':_0x3399c8[_0x48eb48(0x1c0)]}))),_0x332273[_0x48eb48(0x241)][_0x48eb48(0x5a9)]!==void 0x0)){let _0x1063db=await this[_0x48eb48(0x261)][_0x48eb48(0x441)][_0x48eb48(0x5f9)]({'where':{}},this['instance']['wuid']),_0x35714d=new Set(_0x332273[_0x48eb48(0x241)][_0x48eb48(0x5a9)]||[]),_0x5c2255=new Set(_0x332273[_0x48eb48(0x241)]['etiquetas']),_0x408913=new Set(_0x1063db['map'](_0x29b935=>_0x29b935['_id'])),_0x38f3e5=[..._0x5c2255][_0x48eb48(0x5f7)](_0x7daecb=>!_0x35714d[_0x48eb48(0x1de)](_0x7daecb)&&_0x408913[_0x48eb48(0x1de)](_0x7daecb)),_0x2a088f=[..._0x35714d][_0x48eb48(0x5f7)](_0x37ed31=>!_0x5c2255['has'](_0x37ed31));if(_0x4d7b93['leadInfo.etiquetas']=[..._0x35714d],_0x357ee4&&!_0x357ee4[_0x48eb48(0x602)]){for(let _0x339ae0 of _0x38f3e5)await this[_0x48eb48(0x210)](_0x339ae0,_0x332273[_0x48eb48(0x215)]),_0x35714d[_0x48eb48(0x1dc)](_0x339ae0);for(let _0x36565a of _0x2a088f)await this['RemoveChatLabel'](_0x36565a,_0x332273[_0x48eb48(0x215)]),_0x35714d[_0x48eb48(0x75b)](_0x36565a);}}if(_0x332273[_0x48eb48(0x111)]!==void 0x0&&(_0x4d7b93[_0x48eb48(0x111)]=Number(_0x332273[_0x48eb48(0x111)])),Object[_0x48eb48(0x66a)](_0x4d7b93)[_0x48eb48(0x587)]===0x0)throw new Error(_0x48eb48(0x742));let _0x34fe8f=await this[_0x48eb48(0x261)][_0x48eb48(0x745)][_0x48eb48(0x341)]({'where':{'_id':_0x332273[_0x48eb48(0x215)]}},_0x4d7b93,this[_0x48eb48(0x466)][_0x48eb48(0x3fd)]);return _0x34fe8f&&j(this[_0x48eb48(0x629)],_0x48eb48(0x6e8),{'chat':_0x34fe8f}),_0x34fe8f?(this['logger'][_0x48eb48(0x331)](this[_0x48eb48(0x629)]+'\x20('+this[_0x48eb48(0x466)]['wuid']+_0x48eb48(0x32f)+JSON[_0x48eb48(0x647)](_0x34fe8f,null,0x2)),_0x34fe8f):{'message':_0x48eb48(0x759)};}catch(_0x54b98f){let _0x2a4ed9='Erro\x20ao\x20editar\x20o\x20chat',_0x1e1eaf=_0x54b98f instanceof Error?_0x54b98f[_0x48eb48(0x202)]:typeof _0x54b98f=='object'?JSON[_0x48eb48(0x647)](_0x54b98f):_0x54b98f,_0x2ac989=_0x2a4ed9+':\x20'+_0x1e1eaf;throw this[_0x48eb48(0x21e)][_0x48eb48(0x7a9)](this[_0x48eb48(0x629)]+'\x20('+this[_0x48eb48(0x466)][_0x48eb48(0x3fd)]+_0x48eb48(0x32f)+_0x2ac989),new m(_0x2ac989);}}async[a0_0x490cab(0x210)](_0xb69f5d,_0x5abc0d){const _0x34b40a=a0_0x490cab;try{await this[_0x34b40a(0x386)][_0x34b40a(0x439)](_0x5abc0d,_0xb69f5d),this[_0x34b40a(0x21e)][_0x34b40a(0x79f)](this[_0x34b40a(0x629)]+'\x20('+this[_0x34b40a(0x466)]['wuid']+_0x34b40a(0x185)+_0xb69f5d+_0x34b40a(0x4f6)+_0x5abc0d+_0x34b40a(0x74d));}catch(_0x2234c1){this['logger'][_0x34b40a(0x7a9)](_0x34b40a(0x29d)+_0xb69f5d+_0x34b40a(0x81d)+_0x5abc0d+':\x20'+_0x2234c1);}}async[a0_0x490cab(0x6fd)](_0x198851,_0x55d112){const _0x1db84b=a0_0x490cab;try{await this[_0x1db84b(0x386)][_0x1db84b(0x214)](_0x55d112,_0x198851),this[_0x1db84b(0x21e)]['info'](this[_0x1db84b(0x629)]+'\x20('+this[_0x1db84b(0x466)]['wuid']+_0x1db84b(0x185)+_0x198851+_0x1db84b(0x62c)+_0x55d112+_0x1db84b(0x74d));}catch(_0x5a7f8c){this[_0x1db84b(0x21e)][_0x1db84b(0x7a9)](_0x1db84b(0x35c)+_0x198851+'\x20do\x20chat\x20'+_0x55d112+':\x20'+_0x5a7f8c);}}async[a0_0x490cab(0x349)](_0x2fb184){const _0x464533=a0_0x490cab;try{let _0x1eb186=await this[_0x464533(0x261)][_0x464533(0x4d8)][_0x464533(0x233)](this[_0x464533(0x466)]['wuid']),_0x2b3978=_0x2fb184['_id']?_0x1eb186[_0x464533(0x2c4)][_0x464533(0x40a)](_0x2e2b55=>_0x2e2b55[_0x464533(0x215)]===_0x2fb184[_0x464533(0x215)]):-0x1;if(_0x2fb184['delete']&&_0x2b3978>-0x1)_0x1eb186['agents'][_0x464533(0x5b6)](_0x2b3978,0x1);else{if(_0x2b3978>-0x1){let _0x516468=_0x1eb186[_0x464533(0x2c4)][_0x2b3978];_0x2fb184['fone']&&(_0x516468[_0x464533(0x25a)]=_0x2fb184['fone']),_0x2fb184['name']&&(_0x516468['name']=_0x2fb184[_0x464533(0x149)]),_0x2fb184[_0x464533(0x5c9)]&&(_0x516468[_0x464533(0x5c9)]=_0x2fb184[_0x464533(0x5c9)]),_0x2fb184[_0x464533(0x15f)]&&(_0x516468[_0x464533(0x15f)]=_0x2fb184[_0x464533(0x15f)]);}else _0x1eb186[_0x464533(0x2c4)][_0x464533(0x3de)]({'_id':_0x2fb184[_0x464533(0x215)]||new me[(_0x464533(0x73a))][(_0x464533(0x6ed))]['ObjectId']()['toString'](),'fone':_0x2fb184[_0x464533(0x25a)],'name':_0x2fb184['name'],'email':_0x2fb184[_0x464533(0x5c9)],'role':_0x2fb184[_0x464533(0x15f)]});}let _0xc02c62={'agents':_0x1eb186[_0x464533(0x2c4)]},_0x4ad8fd=await this[_0x464533(0x261)][_0x464533(0x4d8)][_0x464533(0x767)](_0xc02c62,this['instance'][_0x464533(0x3fd)]);return this[_0x464533(0x672)]=_0x4ad8fd,this[_0x464533(0x21e)]['verbose'](this[_0x464533(0x629)]+'\x20('+this[_0x464533(0x466)]['wuid']+_0x464533(0x2d4)),this[_0x464533(0x21e)][_0x464533(0x331)](this[_0x464533(0x629)]+'\x20('+this[_0x464533(0x466)][_0x464533(0x3fd)]+_0x464533(0x32f)+this[_0x464533(0x672)]),_0x4ad8fd;}catch(_0x5f0329){let _0x30befb=_0x464533(0x1f0),_0x6d11c3=_0x5f0329 instanceof Error?_0x5f0329['message']:typeof _0x5f0329==_0x464533(0x328)?JSON[_0x464533(0x647)](_0x5f0329):_0x5f0329,_0x2dd833=_0x30befb+':\x20'+_0x6d11c3;throw this[_0x464533(0x21e)][_0x464533(0x7a9)](this[_0x464533(0x629)]+'\x20('+this[_0x464533(0x466)][_0x464533(0x3fd)]+_0x464533(0x32f)+_0x2dd833),new m(_0x2dd833);}}async[a0_0x490cab(0x591)](_0x5d7367){const _0x2d6f0b=a0_0x490cab;try{let _0x1e2c7f=await this[_0x2d6f0b(0x261)]['automateSystem'][_0x2d6f0b(0x233)](this[_0x2d6f0b(0x466)][_0x2d6f0b(0x3fd)]),_0x37eb15=_0x5d7367[_0x2d6f0b(0x215)]?_0x1e2c7f[_0x2d6f0b(0x7f7)][_0x2d6f0b(0x40a)](_0x551f55=>_0x551f55[_0x2d6f0b(0x215)]===_0x5d7367[_0x2d6f0b(0x215)]):-0x1,_0x1b0949=!0x1,_0x4aa914=_0x1e2c7f[_0x2d6f0b(0x7f7)]['some'](_0x1cca71=>_0x1cca71[_0x2d6f0b(0x69a)]===_0x5d7367['order']);if(_0x5d7367[_0x2d6f0b(0x75b)]&&_0x37eb15>-0x1)_0x1e2c7f[_0x2d6f0b(0x7f7)][_0x2d6f0b(0x5b6)](_0x37eb15,0x1),_0x1b0949=!0x0;else{if(_0x37eb15>-0x1){if(_0x1e2c7f[_0x2d6f0b(0x7f7)][_0x2d6f0b(0x259)](_0x32eee7=>_0x32eee7[_0x2d6f0b(0x149)]===_0x5d7367['name']&&_0x32eee7[_0x2d6f0b(0x215)]!==_0x5d7367['_id']))throw new Error(_0x2d6f0b(0x7cb));let _0x1b699e=_0x1e2c7f[_0x2d6f0b(0x7f7)][_0x37eb15];_0x5d7367['order']&&(_0x4aa914||!Number[_0x2d6f0b(0x7a4)](_0x5d7367[_0x2d6f0b(0x69a)]))&&(_0x1b699e['order']=_0x5d7367[_0x2d6f0b(0x69a)],_0x1b0949=!0x0),_0x5d7367[_0x2d6f0b(0x149)]&&(_0x1b699e[_0x2d6f0b(0x149)]=_0x5d7367[_0x2d6f0b(0x149)]);}else{if(_0x1e2c7f['customFields'][_0x2d6f0b(0x259)](_0x48814c=>_0x48814c[_0x2d6f0b(0x149)]===_0x5d7367[_0x2d6f0b(0x149)]&&_0x48814c[_0x2d6f0b(0x215)]!==_0x5d7367[_0x2d6f0b(0x215)]))throw new Error(_0x2d6f0b(0x7cb));_0x1e2c7f[_0x2d6f0b(0x7f7)][_0x2d6f0b(0x3de)]({'_id':_0x5d7367['_id']||new me[(_0x2d6f0b(0x73a))]['Types']['ObjectId']()['toString'](),'order':_0x5d7367['order'],'name':_0x5d7367[_0x2d6f0b(0x149)]}),_0x1b0949=!0x0;}}if(_0x1b0949){_0x1e2c7f[_0x2d6f0b(0x7f7)][_0x2d6f0b(0x644)]((_0x3ef76f,_0x179091)=>_0x3ef76f[_0x2d6f0b(0x69a)]>_0x179091[_0x2d6f0b(0x69a)]?0x1:_0x179091[_0x2d6f0b(0x69a)]>_0x3ef76f[_0x2d6f0b(0x69a)]?-0x1:0x0);for(let _0x5603cc=0x0;_0x5603cc<_0x1e2c7f[_0x2d6f0b(0x7f7)][_0x2d6f0b(0x587)];_0x5603cc++)_0x1e2c7f[_0x2d6f0b(0x7f7)][_0x5603cc][_0x2d6f0b(0x69a)]=_0x5603cc+0x1;}let _0x30dea6=await this[_0x2d6f0b(0x261)][_0x2d6f0b(0x4d8)][_0x2d6f0b(0x767)](_0x1e2c7f,this[_0x2d6f0b(0x466)][_0x2d6f0b(0x3fd)]);return this['AutomateSystem']=_0x30dea6,this[_0x2d6f0b(0x21e)][_0x2d6f0b(0x331)](this[_0x2d6f0b(0x629)]+'\x20('+this[_0x2d6f0b(0x466)]['wuid']+_0x2d6f0b(0x7cc)),this['logger'][_0x2d6f0b(0x331)](this[_0x2d6f0b(0x629)]+'\x20('+this['instance'][_0x2d6f0b(0x3fd)]+_0x2d6f0b(0x32f)+this[_0x2d6f0b(0x672)]),_0x30dea6;}catch(_0x87874f){let _0x35ee0d=_0x2d6f0b(0x115),_0x2ab690=_0x87874f instanceof Error?_0x87874f[_0x2d6f0b(0x202)]:typeof _0x87874f==_0x2d6f0b(0x328)?JSON[_0x2d6f0b(0x647)](_0x87874f):_0x87874f,_0x1dad73=_0x35ee0d+':\x20'+_0x2ab690;throw this['logger'][_0x2d6f0b(0x7a9)](this[_0x2d6f0b(0x629)]+'\x20('+this[_0x2d6f0b(0x466)][_0x2d6f0b(0x3fd)]+_0x2d6f0b(0x32f)+_0x1dad73),new m(_0x1dad73);}}async[a0_0x490cab(0x3c1)](_0x7358fb){const _0xc28fcc=a0_0x490cab;try{let _0x5c837f=await this[_0xc28fcc(0x261)][_0xc28fcc(0x4d8)][_0xc28fcc(0x233)](this[_0xc28fcc(0x466)][_0xc28fcc(0x3fd)]),_0x575213=_0x5c837f?.['autoCompleteMessages']?.[_0xc28fcc(0x40a)](_0x487a85=>_0x487a85[_0xc28fcc(0x215)]===_0x7358fb?.[_0xc28fcc(0x215)]);if(_0x7358fb?.['delete'])_0x575213>-0x1&&_0x5c837f?.[_0xc28fcc(0x1d7)]?.[_0xc28fcc(0x5b6)](_0x575213,0x1);else{if(_0x575213>-0x1){let _0x5206e9=_0x5c837f['autoCompleteMessages'][_0x575213];_0x5206e9[_0xc28fcc(0x69a)]=_0x7358fb?.['order']||_0x5206e9[_0xc28fcc(0x69a)],_0x5206e9['command']=_0x7358fb?.[_0xc28fcc(0x292)]||_0x5206e9[_0xc28fcc(0x292)],_0x5206e9[_0xc28fcc(0x202)]=_0x7358fb?.[_0xc28fcc(0x202)]||_0x5206e9[_0xc28fcc(0x202)];}else{let _0x187bc7={'_id':_0x7358fb?.['_id']||new me[(_0xc28fcc(0x73a))]['Types'][(_0xc28fcc(0x325))]()[_0xc28fcc(0x751)](),'order':_0x7358fb?.[_0xc28fcc(0x69a)],'command':_0x7358fb?.[_0xc28fcc(0x292)],'message':_0x7358fb?.['message']};_0x5c837f?.[_0xc28fcc(0x1d7)]?.['push'](_0x187bc7);}}_0x5c837f?.[_0xc28fcc(0x1d7)]?.['sort']((_0x1b570d,_0x346325)=>_0x1b570d['order']-_0x346325[_0xc28fcc(0x69a)]);let _0x565dd5=await this[_0xc28fcc(0x261)][_0xc28fcc(0x4d8)]['update'](_0x5c837f,this[_0xc28fcc(0x466)][_0xc28fcc(0x3fd)]);return this[_0xc28fcc(0x672)]=_0x565dd5,this['logger']['verbose'](this[_0xc28fcc(0x629)]+'\x20('+this['instance']['wuid']+_0xc28fcc(0x7cc)),_0x565dd5;}catch(_0x1c5105){let _0x17a6a4=_0xc28fcc(0x55f),_0x15077c=_0x1c5105 instanceof Error?_0x1c5105['message']:typeof _0x1c5105==_0xc28fcc(0x328)?JSON[_0xc28fcc(0x647)](_0x1c5105):_0x1c5105,_0x454cab=_0x17a6a4+':\x20'+_0x15077c;throw this[_0xc28fcc(0x21e)]['error'](this[_0xc28fcc(0x629)]+'\x20('+this[_0xc28fcc(0x466)][_0xc28fcc(0x3fd)]+_0xc28fcc(0x32f)+_0x454cab),new m(_0x454cab);}}async[a0_0x490cab(0x828)](_0x1cd463){const _0x14a865=a0_0x490cab;try{let _0x113749=await this[_0x14a865(0x261)][_0x14a865(0x4d8)][_0x14a865(0x233)](this[_0x14a865(0x466)][_0x14a865(0x3fd)]);if(!_0x113749)throw new Error(_0x14a865(0x144));let _0x2ec3e8={'_id':_0x113749[_0x14a865(0x215)],'flowConfig':{'enabled':_0x1cd463['enabled']??_0x113749[_0x14a865(0x15b)][_0x14a865(0x431)],'ignoreGroups':_0x1cd463[_0x14a865(0x790)]??_0x113749[_0x14a865(0x15b)]['ignoreGroups'],'stopConversation':_0x1cd463[_0x14a865(0x794)][_0x14a865(0x63d)]()??_0x113749[_0x14a865(0x15b)][_0x14a865(0x794)][_0x14a865(0x63d)](),'stopMinutes':_0x1cd463[_0x14a865(0x318)]??_0x113749[_0x14a865(0x15b)][_0x14a865(0x318)],'stopWhenYouSendMsg':_0x1cd463['stopWhenYouSendMsg']??_0x113749['flowConfig'][_0x14a865(0x44e)]}},_0x280bd2=await this[_0x14a865(0x261)][_0x14a865(0x4d8)][_0x14a865(0x767)](_0x2ec3e8,this['instance'][_0x14a865(0x3fd)]);return this[_0x14a865(0x672)]=_0x280bd2,this['logger'][_0x14a865(0x331)](this['instanceName']+'\x20('+this[_0x14a865(0x466)][_0x14a865(0x3fd)]+_0x14a865(0x2d4)),this['logger']['verbose'](this[_0x14a865(0x629)]+'\x20('+this[_0x14a865(0x466)][_0x14a865(0x3fd)]+'):\x20'+this['AutomateSystem']),setTimeout(()=>this[_0x14a865(0x69e)](),0x7d0),_0x280bd2;}catch(_0x5aeed0){let _0x5090c2=_0x14a865(0x2e5),_0x41bd6d=_0x5aeed0 instanceof Error?_0x5aeed0[_0x14a865(0x202)]:typeof _0x5aeed0==_0x14a865(0x328)?JSON[_0x14a865(0x647)](_0x5aeed0):_0x5aeed0,_0x398787=_0x5090c2+':\x20'+_0x41bd6d;throw this[_0x14a865(0x21e)]['error'](this[_0x14a865(0x629)]+'\x20('+this[_0x14a865(0x466)]['wuid']+'):\x20'+_0x398787),new m(_0x398787);}}async[a0_0x490cab(0x2f2)](){const _0x49d4ab=a0_0x490cab;try{let _0x3113e4=await this[_0x49d4ab(0x261)]['automateSystem'][_0x49d4ab(0x233)](this[_0x49d4ab(0x466)][_0x49d4ab(0x3fd)]);return this['AutomateSystem']=_0x3113e4,_0x3113e4;}catch(_0x2035a2){let _0x291956=_0x49d4ab(0x2f6),_0x4b6edd=_0x2035a2 instanceof Error?_0x2035a2[_0x49d4ab(0x202)]:typeof _0x2035a2==_0x49d4ab(0x328)?JSON[_0x49d4ab(0x647)](_0x2035a2):_0x2035a2,_0x58dc0a=_0x291956+':\x20'+_0x4b6edd;throw this['logger']['error'](this[_0x49d4ab(0x629)]+'\x20('+this[_0x49d4ab(0x466)][_0x49d4ab(0x3fd)]+_0x49d4ab(0x32f)+_0x58dc0a),new m(_0x58dc0a);}}async[a0_0x490cab(0x7ae)](){const _0x12b42a=a0_0x490cab;this['instance'][_0x12b42a(0x54b)][_0x12b42a(0x3cd)]&&clearTimeout(this[_0x12b42a(0x466)]['ScheduleMessage'][_0x12b42a(0x3cd)]),this['instance'][_0x12b42a(0x54b)]['timeout']=setTimeout(()=>{const _0xbf7198=_0x12b42a;this[_0xbf7198(0x1f8)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async['checkAndRestartProcess'](){const _0x371313=a0_0x490cab;Date[_0x371313(0x7f9)]()-this[_0x371313(0x466)]['ScheduleMessage'][_0x371313(0x33d)]>=0x1d4c0&&(this[_0x371313(0x21e)][_0x371313(0x331)](this[_0x371313(0x629)]+'\x20('+this[_0x371313(0x466)][_0x371313(0x3fd)]+_0x371313(0x2e6)),this[_0x371313(0x466)][_0x371313(0x54b)][_0x371313(0x510)]=null,this[_0x371313(0x466)][_0x371313(0x54b)][_0x371313(0x33d)]=0x0,this[_0x371313(0x466)]['ScheduleMessage']['delayMessage']=0x0,await this[_0x371313(0x69e)]());}async[a0_0x490cab(0x69e)](){const _0x5ef64f=a0_0x490cab;await this[_0x5ef64f(0x6e5)]();let _0x51c858=()=>{const _0x1e7f7f=_0x5ef64f;this[_0x1e7f7f(0x21e)]['verbose'](this[_0x1e7f7f(0x629)]+'\x20('+this[_0x1e7f7f(0x466)][_0x1e7f7f(0x3fd)]+_0x1e7f7f(0x240)+this[_0x1e7f7f(0x466)][_0x1e7f7f(0x54b)][_0x1e7f7f(0x510)]+'\x20saindo\x20da\x20função');},_0x3edfd3=async()=>{const _0x3ee580=_0x5ef64f;this[_0x3ee580(0x21e)][_0x3ee580(0x331)](this[_0x3ee580(0x629)]+'\x20('+this[_0x3ee580(0x466)]['wuid']+'):\x20Procurando\x20mensagens\x20para\x20envio');let _0x1771e2=Date[_0x3ee580(0x7f9)]()-0xc*0x3c*0x3c*0x3e8,_0x3968d6={'where':{'status':{'$in':[_0x3ee580(0x6e1),_0x3ee580(0x18e)]},'$or':[{'when':{'$lte':Date['now'](),'$gte':_0x1771e2}},{'when':0x0}]}};return await this[_0x3ee580(0x261)][_0x3ee580(0x1bb)][_0x3ee580(0x5f9)](_0x3968d6,this[_0x3ee580(0x466)][_0x3ee580(0x3fd)]);},_0x1b27db=async _0x1f804d=>{const _0x427bf3=_0x5ef64f;let _0x201d96=Math['floor'](Math['random']()*0x1389)+0xbb8;for(let _0x59bcce of _0x1f804d){let _0x43d155={'_id':_0x59bcce[_0x427bf3(0x215)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date['now']()-0x2710}}]},_0x3a8a5b={'startSend':Date['now']()};if(!await this['repository'][_0x427bf3(0x1bb)][_0x427bf3(0x341)](_0x43d155,_0x3a8a5b,this[_0x427bf3(0x466)][_0x427bf3(0x3fd)]))return;if(!this[_0x427bf3(0x466)][_0x427bf3(0x54b)]['isConnected']){this[_0x427bf3(0x21e)][_0x427bf3(0x331)](this[_0x427bf3(0x629)]+'\x20('+this[_0x427bf3(0x466)][_0x427bf3(0x3fd)]+_0x427bf3(0x73d));break;}let _0x2c9731=(_0x59bcce[_0x427bf3(0x4c5)]||[])[_0x427bf3(0x5f7)](_0x949163=>!_0x949163['triedToSend'])[_0x427bf3(0x644)]((_0x27ee54,_0x3041b2)=>(_0x27ee54['order']??0x0)-(_0x3041b2[_0x427bf3(0x69a)]??0x0));for(let _0x29dec8 of _0x2c9731){if(await this[_0x427bf3(0x7ae)](),this['instance'][_0x427bf3(0x54b)][_0x427bf3(0x33d)]=Date['now'](),this[_0x427bf3(0x466)][_0x427bf3(0x54b)][_0x427bf3(0x3e2)]===_0x29dec8[_0x427bf3(0x215)]){this['logger'][_0x427bf3(0x7a9)](this[_0x427bf3(0x629)]+'\x20('+this['instance'][_0x427bf3(0x3fd)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20para\x20'+_0x29dec8[_0x427bf3(0x215)]+'.\x20Removendo\x20da\x20lista\x20de\x20tentativas.');continue;}if(this[_0x427bf3(0x466)][_0x427bf3(0x54b)]['lastMessage_id']=_0x29dec8['_id'],_0x29dec8[_0x427bf3(0x189)]){this[_0x427bf3(0x21e)][_0x427bf3(0x331)](this[_0x427bf3(0x629)]+'\x20('+this['instance'][_0x427bf3(0x3fd)]+_0x427bf3(0x4cd)+_0x29dec8[_0x427bf3(0x133)]+'.\x20Pulando.');continue;}if(!this[_0x427bf3(0x466)][_0x427bf3(0x54b)][_0x427bf3(0x165)]){this[_0x427bf3(0x21e)][_0x427bf3(0x331)](this[_0x427bf3(0x629)]+'\x20('+this[_0x427bf3(0x466)]['wuid']+_0x427bf3(0x1ce));break;}if(!this[_0x427bf3(0x466)][_0x427bf3(0x54b)][_0x427bf3(0x510)]){this[_0x427bf3(0x21e)]['verbose'](this[_0x427bf3(0x629)]+'\x20('+this[_0x427bf3(0x466)]['wuid']+_0x427bf3(0x469)+_0x59bcce[_0x427bf3(0x215)]+'\x20foi\x20interrompido\x20pelo\x20usuário.');break;}if(_0x29dec8[_0x427bf3(0x5af)]==='flow'&&!this['AutomateSystem']?.[_0x427bf3(0x15b)][_0x427bf3(0x431)]){this[_0x427bf3(0x21e)][_0x427bf3(0x7a9)](this[_0x427bf3(0x629)]+'\x20('+this[_0x427bf3(0x466)][_0x427bf3(0x3fd)]+_0x427bf3(0x6c0));break;}let _0x2c1144={'idControl':_0x29dec8[_0x427bf3(0x215)],'remoteJid':_0x29dec8[_0x427bf3(0x133)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date[_0x427bf3(0x7f9)]()},_0x5253ef=null;try{this['logger'][_0x427bf3(0x331)](this[_0x427bf3(0x629)]+'\x20('+this[_0x427bf3(0x466)][_0x427bf3(0x3fd)]+_0x427bf3(0x260)+_0x29dec8[_0x427bf3(0x133)]);let _0x2ac960=await this['SendScheduleMessage'](_0x29dec8[_0x427bf3(0x133)],_0x29dec8);_0x2c1144['error']=_0x2ac960[_0x427bf3(0x7a9)],_0x2c1144['id']=_0x2ac960[_0x427bf3(0x7a9)]?null:_0x2ac960['id'],_0x2c1144['error_log']=_0x2ac960[_0x427bf3(0x7a9)]?_0x2ac960[_0x427bf3(0x58c)]?_0x2ac960['detail'][_0x427bf3(0x751)]():'':null;let _0x1a760e=_0x59bcce['messages'][_0x427bf3(0x40a)](_0xca4590=>_0xca4590['_id']===_0x29dec8[_0x427bf3(0x215)]);_0x1a760e!==-0x1&&(_0x59bcce[_0x427bf3(0x4c5)][_0x1a760e][_0x427bf3(0x189)]=!0x0);let _0x5a93cd={'$push':{'messagesSend':_0x2c1144},'$set':{'messages.$[elem].triedToSend':!0x0}},_0xbcddba=[{'elem._id':_0x29dec8['_id']}];if(this[_0x427bf3(0x21e)][_0x427bf3(0x331)](this['instanceName']+'\x20('+this[_0x427bf3(0x466)]['wuid']+_0x427bf3(0x391)+_0x29dec8[_0x427bf3(0x215)]),_0x5253ef=await this[_0x427bf3(0x261)][_0x427bf3(0x1bb)][_0x427bf3(0x341)]({'_id':_0x59bcce[_0x427bf3(0x215)]},_0x5a93cd,this[_0x427bf3(0x466)][_0x427bf3(0x3fd)],{'arrayFilters':_0xbcddba}),_0x2ac960[_0x427bf3(0x7a9)]){this[_0x427bf3(0x21e)][_0x427bf3(0x7a9)](this[_0x427bf3(0x629)]+'\x20('+this['instance'][_0x427bf3(0x3fd)]+_0x427bf3(0x4ff)+_0x2ac960[_0x427bf3(0x58c)]);continue;}let _0x3dc0d4=this[_0x427bf3(0x51f)](_0x59bcce[_0x427bf3(0x66d)],_0x59bcce[_0x427bf3(0x449)]);await this[_0x427bf3(0x5c6)](_0x3dc0d4);}catch(_0x2ae4ba){this[_0x427bf3(0x21e)][_0x427bf3(0x7a9)](this[_0x427bf3(0x629)]+'\x20('+this[_0x427bf3(0x466)][_0x427bf3(0x3fd)]+_0x427bf3(0x443)+_0x29dec8[_0x427bf3(0x133)]+':\x20'+(_0x2ae4ba instanceof Error?_0x2ae4ba[_0x427bf3(0x202)]:JSON[_0x427bf3(0x647)](_0x2ae4ba,null,0x2))),_0x2c1144[_0x427bf3(0x7a9)]=!0x0,_0x2c1144[_0x427bf3(0x67a)]=_0x2ae4ba[_0x427bf3(0x202)];let _0x2d3914=_0x59bcce[_0x427bf3(0x4c5)][_0x427bf3(0x40a)](_0x227d3b=>_0x227d3b[_0x427bf3(0x215)]===_0x29dec8[_0x427bf3(0x215)]);_0x2d3914!==-0x1&&(_0x59bcce[_0x427bf3(0x4c5)][_0x2d3914][_0x427bf3(0x189)]=!0x0);let _0x59eff1={'$push':{'messagesSend':_0x2c1144},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x53d229=[{'elem._id':_0x29dec8[_0x427bf3(0x215)]}];this[_0x427bf3(0x21e)][_0x427bf3(0x331)](this[_0x427bf3(0x629)]+'\x20('+this[_0x427bf3(0x466)][_0x427bf3(0x3fd)]+_0x427bf3(0x481)+_0x29dec8['_id']),_0x5253ef=await this[_0x427bf3(0x261)]['scheduleMessage'][_0x427bf3(0x341)]({'_id':_0x59bcce[_0x427bf3(0x215)]},_0x59eff1,this[_0x427bf3(0x466)][_0x427bf3(0x3fd)],{'arrayFilters':_0x53d229});}finally{if(_0x5253ef&&_0x5253ef[_0x427bf3(0x526)]===_0x427bf3(0x650)){this[_0x427bf3(0x21e)][_0x427bf3(0x331)](this['instanceName']+'\x20('+this[_0x427bf3(0x466)][_0x427bf3(0x3fd)]+_0x427bf3(0x469)+_0x29dec8[_0x427bf3(0x215)]+_0x427bf3(0x770));break;}}}let _0x3b21bd=await this[_0x427bf3(0x261)][_0x427bf3(0x1bb)][_0x427bf3(0x218)](_0x59bcce['_id'],this['instance'][_0x427bf3(0x3fd)]);if(_0x3b21bd[_0x427bf3(0x4c5)][_0x427bf3(0x658)](_0x3b941c=>_0x3b941c[_0x427bf3(0x189)])&&_0x3b21bd[_0x427bf3(0x526)]!==_0x427bf3(0x650)){this['instance']['ScheduleMessage'][_0x427bf3(0x3e2)]=null;let _0x1d20e0={'$set':{'status':_0x427bf3(0x3e8)}};await this['repository'][_0x427bf3(0x1bb)][_0x427bf3(0x7c6)](_0x3b21bd[_0x427bf3(0x215)],_0x1d20e0,this[_0x427bf3(0x466)][_0x427bf3(0x3fd)]);}await new Promise(_0xd10e81=>setTimeout(_0xd10e81,_0x201d96));}},_0x19285f=async()=>{const _0x36aa13=_0x5ef64f;let _0x431274={'where':{'status':'scheduled','when':{'$gt':Date[_0x36aa13(0x7f9)]()}}},_0xc5a025=await this[_0x36aa13(0x261)][_0x36aa13(0x1bb)]['findOne'](_0x431274,this['instance'][_0x36aa13(0x3fd)]);_0xc5a025&&_0xc5a025[_0x36aa13(0x590)]-Date[_0x36aa13(0x7f9)]()<=0x5265c00?this[_0x36aa13(0x466)][_0x36aa13(0x54b)][_0x36aa13(0x5e5)]=_0xc5a025['when']-Date[_0x36aa13(0x7f9)]():this[_0x36aa13(0x466)][_0x36aa13(0x54b)][_0x36aa13(0x5e5)]=(0x3c+Math[_0x36aa13(0x66f)](Math['random']()*0x3c))*0x3c*0x3e8,this[_0x36aa13(0x466)][_0x36aa13(0x54b)][_0x36aa13(0x5e5)]=Math['max'](this[_0x36aa13(0x466)][_0x36aa13(0x54b)][_0x36aa13(0x5e5)],0x1*0x2*0x3e8);let _0x181572=Math[_0x36aa13(0x6a9)](this[_0x36aa13(0x466)][_0x36aa13(0x54b)][_0x36aa13(0x5e5)]/0xea60);if(_0xc5a025){let _0x41a6c4=new Date(_0xc5a025['when'])[_0x36aa13(0x721)]();this['logger']['verbose'](this[_0x36aa13(0x629)]+'\x20('+this[_0x36aa13(0x466)][_0x36aa13(0x3fd)]+_0x36aa13(0x82c)+_0x41a6c4+_0x36aa13(0x5d9)+_0x181572+_0x36aa13(0x209));}else this['logger']['verbose'](this[_0x36aa13(0x629)]+'\x20('+this[_0x36aa13(0x466)][_0x36aa13(0x3fd)]+_0x36aa13(0x678)+_0x181572+'\x20minutos');setTimeout(()=>this[_0x36aa13(0x69e)](),this[_0x36aa13(0x466)][_0x36aa13(0x54b)]['delayMessage']);};if(this['instance']['ScheduleMessage'][_0x5ef64f(0x510)]){await this['setRestartTimeout'](),_0x51c858();return;}if(!this['instance'][_0x5ef64f(0x54b)][_0x5ef64f(0x165)]){this[_0x5ef64f(0x21e)][_0x5ef64f(0x331)](this['instanceName']+'\x20('+this[_0x5ef64f(0x466)]['wuid']+_0x5ef64f(0x18d)),this['instance']['ScheduleMessage']['processingGroup_id']=null,this[_0x5ef64f(0x466)][_0x5ef64f(0x54b)][_0x5ef64f(0x33d)]=0x0,this[_0x5ef64f(0x466)][_0x5ef64f(0x54b)][_0x5ef64f(0x5e5)]=0x0,this[_0x5ef64f(0x466)]['ScheduleMessage'][_0x5ef64f(0x3e2)]=null;return;}try{let _0x1c89c9=await _0x3edfd3();_0x1c89c9[_0x5ef64f(0x587)]===0x0?this[_0x5ef64f(0x21e)][_0x5ef64f(0x331)](this[_0x5ef64f(0x629)]+'\x20('+this[_0x5ef64f(0x466)]['wuid']+_0x5ef64f(0x1fc)):(this[_0x5ef64f(0x466)]['ScheduleMessage'][_0x5ef64f(0x510)]=_0x1c89c9[0x0][_0x5ef64f(0x215)],await _0x1b27db(_0x1c89c9)),await _0x19285f(),this['instance']['ScheduleMessage']['processingGroup_id']=null,this['instance'][_0x5ef64f(0x54b)][_0x5ef64f(0x3e2)]=null;}catch(_0x5e7561){this['logger']['error'](_0x5ef64f(0x407)+(_0x5e7561 instanceof Error?_0x5e7561[_0x5ef64f(0x202)]:JSON['stringify'](_0x5e7561,null,0x2)));}}[a0_0x490cab(0x51f)](_0x29bf1d,_0x45dc94){const _0x3fba56=a0_0x490cab;return _0x29bf1d=Math[_0x3fba56(0x5ab)](0.5,_0x29bf1d),_0x45dc94=Math[_0x3fba56(0x266)](Math[_0x3fba56(0x5ab)](0x3,_0x45dc94),0x78),Math[_0x3fba56(0x66f)](Math[_0x3fba56(0x458)]()*(_0x45dc94-_0x29bf1d+0x1)+_0x29bf1d)*0x3e8;}[a0_0x490cab(0x5c6)](_0x34f78e){return new Promise(_0x84ce54=>setTimeout(_0x84ce54,_0x34f78e));}async['getVariablesChat'](_0x6cef8f){const _0x54509d=a0_0x490cab;if(!this[_0x54509d(0x672)]&&(await this['getAutomateSystem'](),!this[_0x54509d(0x672)]))return null;_0x6cef8f=this[_0x54509d(0x147)](_0x6cef8f);let _0x3117f0=await this['repository']['chat'][_0x54509d(0x2cd)]({'where':{'_id':_0x6cef8f}},this[_0x54509d(0x466)][_0x54509d(0x3fd)]),_0x3be930={};if(_0x3117f0&&_0x3117f0[_0x54509d(0x241)]){let _0x4a79da=_0x3117f0[_0x54509d(0x241)];typeof _0x4a79da[_0x54509d(0x684)]=='string'&&(_0x3be930[_0x54509d(0x684)]=_0x4a79da[_0x54509d(0x684)]),typeof _0x4a79da[_0x54509d(0x621)]==_0x54509d(0x47c)&&(_0x3be930[_0x54509d(0x621)]=_0x4a79da[_0x54509d(0x621)]),typeof _0x4a79da[_0x54509d(0x5c9)]==_0x54509d(0x47c)&&(_0x3be930[_0x54509d(0x5c9)]=_0x4a79da[_0x54509d(0x5c9)]),typeof _0x4a79da[_0x54509d(0x2e1)]==_0x54509d(0x47c)&&(_0x3be930[_0x54509d(0x2e1)]=_0x4a79da['cpf']),typeof _0x4a79da[_0x54509d(0x526)]==_0x54509d(0x47c)&&(_0x3be930[_0x54509d(0x526)]=_0x4a79da[_0x54509d(0x526)]),typeof _0x4a79da[_0x54509d(0x72b)]==_0x54509d(0x47c)&&(_0x3be930[_0x54509d(0x72b)]=_0x4a79da[_0x54509d(0x72b)]),typeof _0x4a79da[_0x54509d(0x7ec)]==_0x54509d(0x47c)&&(_0x3be930[_0x54509d(0x7ec)]=_0x4a79da[_0x54509d(0x7ec)]),Array[_0x54509d(0x250)](_0x4a79da['tags'])&&(_0x3be930[_0x54509d(0x390)]=_0x4a79da[_0x54509d(0x390)][_0x54509d(0x4c8)](',\x20')),Array[_0x54509d(0x250)](_0x4a79da[_0x54509d(0x5a9)])&&(_0x3be930[_0x54509d(0x5a9)]=_0x4a79da[_0x54509d(0x5a9)][_0x54509d(0x4c8)](',\x20'));}return _0x3117f0&&_0x3117f0['leadInfo']&&_0x3117f0[_0x54509d(0x241)]['customFields']&&_0x3117f0[_0x54509d(0x241)]['customFields']['forEach'](_0x3681b5=>{const _0x25ae07=_0x54509d;let _0x256562=this['AutomateSystem']?.[_0x25ae07(0x7f7)]['find'](_0x20f3a2=>_0x20f3a2[_0x25ae07(0x215)]===_0x3681b5['_id']);_0x256562&&(_0x3be930[_0x256562[_0x25ae07(0x149)]]=_0x3681b5[_0x25ae07(0x1c0)]);}),_0x3be930;}async[a0_0x490cab(0x839)](_0x13aec8,_0x5a1754){const _0x3c2d74=a0_0x490cab;try{let _0x19cbaa=await this[_0x3c2d74(0x673)](_0x5a1754);return this['replaceVariables'](_0x13aec8,_0x19cbaa);}catch(_0x204dd9){return this[_0x3c2d74(0x21e)][_0x3c2d74(0x7a9)]('Erro\x20ao\x20substituir\x20variáveis\x20para\x20'+_0x5a1754+':\x20'+_0x204dd9),_0x13aec8;}}async[a0_0x490cab(0x6e5)](){const _0x356203=a0_0x490cab;let _0x4c285e=async(_0x5b5cdc,_0x31372e)=>{const _0x4c62c9=a0_0xe58b;let _0x33b368=(await this[_0x4c62c9(0x261)][_0x4c62c9(0x1bb)]['find']({'where':{'type':_0x5b5cdc}},this['instance'][_0x4c62c9(0x3fd)]))['map'](async _0x37292c=>{const _0x1f4422=_0x4c62c9;let _0x1f0c26=_0x31372e(_0x37292c),_0x35c291=_0x38b5cb=>/^\d+$/[_0x1f4422(0x22f)](_0x38b5cb),_0x50aee7=_0x37292c[_0x1f4422(0x63a)]['filter'](_0x4d4f79=>_0x4d4f79[_0x1f4422(0x381)](_0x1f4422(0x682))?_0x4d4f79[_0x1f4422(0x587)]>0x17:_0x4d4f79[_0x1f4422(0x381)](_0x1f4422(0x6cf))?_0x4d4f79[_0x1f4422(0x587)]>0xf:_0x35c291(_0x4d4f79)?_0x4d4f79[_0x1f4422(0x587)]>=0xb:!0x1)[_0x1f4422(0x555)](_0x3815ac=>({'_id':(0x0,Y['v4'])(),'type':_0x1f0c26,'remoteJid':_0x3815ac,'flow':_0x37292c[_0x1f4422(0x536)],'text':_0x37292c[_0x1f4422(0x202)]?.['text'],'delay':_0x37292c['message']?.[_0x1f4422(0x4a8)],'urlOrBase64':_0x37292c['message']?.[_0x1f4422(0x1fe)],'linkPreview':_0x37292c[_0x1f4422(0x202)]?.[_0x1f4422(0x1f1)],'fileName':_0x37292c[_0x1f4422(0x202)]?.[_0x1f4422(0x805)],'triedToSend':!0x1,'messagesSend':[]}));try{await this['repository'][_0x1f4422(0x1bb)][_0x1f4422(0x7c6)](_0x37292c[_0x1f4422(0x215)],{'$set':{'messages':_0x50aee7},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x1f4422(0x466)][_0x1f4422(0x3fd)]);}catch(_0x354077){console[_0x1f4422(0x7a9)](_0x1f4422(0x73b)+_0x37292c['_id']+':',_0x354077);}});await Promise[_0x4c62c9(0x6fc)](_0x33b368);};await _0x4c285e(_0x356203(0x120),_0x243473=>_0x356203(0x120)),await _0x4c285e(_0x356203(0x286),_0x28437b=>_0x28437b[_0x356203(0x202)]?.[_0x356203(0x1b2)]||'media'),await _0x4c285e('audio',_0x283018=>_0x356203(0x70d)),await _0x4c285e(_0x356203(0x362),_0x268d95=>_0x356203(0x362)),await _0x4c285e(_0x356203(0x30b),_0xf62c16=>'image'),await _0x4c285e(_0x356203(0x4bf),_0x359556=>_0x356203(0x4bf)),await _0x4c285e(_0x356203(0x5a8),_0x100e4f=>_0x356203(0x5a8)),this['logger']['verbose'](this[_0x356203(0x629)]+'\x20('+this[_0x356203(0x466)][_0x356203(0x3fd)]+_0x356203(0x474));}async[a0_0x490cab(0x22b)](_0x10166b){const _0x560892=a0_0x490cab;try{if(this[_0x560892(0x21e)][_0x560892(0x331)](this[_0x560892(0x629)]+'\x20('+this[_0x560892(0x466)]['wuid']+_0x560892(0x7fb)),_0x10166b[_0x560892(0x215)]||(_0x10166b['_id']=(0x0,Y['v4'])()),this[_0x560892(0x466)][_0x560892(0x54b)][_0x560892(0x510)]===_0x10166b[_0x560892(0x215)]?.[_0x560892(0x751)]()&&_0x10166b['status']!==_0x560892(0x650))throw new Error(_0x560892(0x272));if(_0x10166b[_0x560892(0x75b)]&&_0x10166b[_0x560892(0x215)]){let _0x365260=await this[_0x560892(0x261)][_0x560892(0x1bb)]['deleteOne'](_0x10166b[_0x560892(0x215)],this[_0x560892(0x466)][_0x560892(0x3fd)]);return setTimeout(()=>this[_0x560892(0x69e)](),0x7d0),_0x365260;}let _0x4f7e9b=null;if(_0x10166b[_0x560892(0x215)]&&(_0x4f7e9b=await this[_0x560892(0x261)][_0x560892(0x1bb)][_0x560892(0x218)](_0x10166b[_0x560892(0x215)],this[_0x560892(0x466)][_0x560892(0x3fd)])),_0x4f7e9b){let {_id:_0x13c0d0,owner:_0x267dab,messages:_0x242221,status:_0x4b956a,..._0x12cb20}=_0x10166b;if(_0x242221&&_0x4b956a!==_0x560892(0x650)){let _0x215e63=_0x242221[_0x560892(0x5f7)](_0x31fc48=>!_0x31fc48[_0x560892(0x215)]),_0x24a53f=_0x242221[_0x560892(0x5f7)](_0x3e2373=>_0x3e2373['_id']&&!_0x3e2373[_0x560892(0x75b)]),_0x25bfb2=_0x242221[_0x560892(0x5f7)](_0x243a5b=>_0x243a5b['_id']&&_0x243a5b[_0x560892(0x75b)]);if(_0x215e63['length']>0x0&&await this['addMessagesToGroup'](_0x10166b[_0x560892(0x215)],_0x215e63),_0x24a53f['length']>0x0&&await this[_0x560892(0x12b)]({'_id':_0x10166b[_0x560892(0x215)],'messages':_0x24a53f}),_0x25bfb2[_0x560892(0x587)]>0x0){let _0x309fe9=_0x25bfb2[_0x560892(0x555)](_0xffe67=>({'updateOne':{'filter':{'_id':_0x10166b['_id']},'update':{'$pull':{'messages':{'_id':_0xffe67[_0x560892(0x215)]}}}}}));await this[_0x560892(0x261)][_0x560892(0x1bb)][_0x560892(0x792)](_0x309fe9,this[_0x560892(0x466)][_0x560892(0x3fd)]);}}let _0xdffe52=_0x4b956a===_0x560892(0x650)?{'$set':{'status':_0x4b956a}}:{'$set':_0x12cb20},_0x1cd264=await this['repository'][_0x560892(0x1bb)][_0x560892(0x7c6)](_0x10166b[_0x560892(0x215)],_0xdffe52,this[_0x560892(0x466)]['wuid']);return _0x1cd264&&(this['reorderMessages'](_0x1cd264[_0x560892(0x4c5)]),await this[_0x560892(0x261)][_0x560892(0x1bb)]['updateOneById'](_0x1cd264[_0x560892(0x215)],{'$set':{'messages':_0x1cd264['messages']}},this[_0x560892(0x466)][_0x560892(0x3fd)])),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),await this[_0x560892(0x6e5)](),_0x1cd264;}else{_0x10166b[_0x560892(0x1f7)]=this[_0x560892(0x466)]['wuid'],_0x10166b[_0x560892(0x4c5)]&&_0x10166b[_0x560892(0x4c5)][_0x560892(0x5aa)](_0x530e39=>{const _0x31212b=_0x560892;_0x530e39[_0x31212b(0x215)]||(_0x530e39['_id']=(0x0,Y['v4'])()),delete _0x530e39[_0x31212b(0x189)];});let _0x2f8660=await this[_0x560892(0x261)][_0x560892(0x1bb)]['createAndSave'](_0x10166b,this[_0x560892(0x466)][_0x560892(0x3fd)]);return _0x2f8660&&(this[_0x560892(0x5f2)](_0x2f8660[_0x560892(0x4c5)]),await this[_0x560892(0x261)]['scheduleMessage']['updateOneById'](_0x2f8660[_0x560892(0x215)],{'$set':{'messages':_0x2f8660[_0x560892(0x4c5)]}},this[_0x560892(0x466)]['wuid'])),setTimeout(()=>this[_0x560892(0x69e)](),0x7d0),_0x2f8660;}}catch(_0x265290){let _0x44d51b=_0x560892(0x1f3),_0x19478c=_0x265290 instanceof Error?_0x265290[_0x560892(0x202)]:typeof _0x265290==_0x560892(0x328)?JSON['stringify'](_0x265290):_0x265290,_0x384205=_0x44d51b+':\x20'+_0x19478c;throw this[_0x560892(0x21e)][_0x560892(0x7a9)](this[_0x560892(0x629)]+'\x20('+this[_0x560892(0x466)][_0x560892(0x3fd)]+_0x560892(0x32f)+_0x384205),new m(_0x384205);}}async[a0_0x490cab(0x581)](_0x570226,_0x1564ef){const _0x2cf196=a0_0x490cab;try{this[_0x2cf196(0x21e)][_0x2cf196(0x331)](this[_0x2cf196(0x629)]+'\x20('+this['instance'][_0x2cf196(0x3fd)]+_0x2cf196(0x6c3)),_0x1564ef[_0x2cf196(0x5aa)](_0x55ee28=>{const _0x542713=_0x2cf196;_0x55ee28[_0x542713(0x215)]||(_0x55ee28['_id']=(0x0,Y['v4'])()),delete _0x55ee28[_0x542713(0x189)];});let _0x4d8b58={'$push':{'messages':{'$each':_0x1564ef}}},_0x165149=await this['repository']['scheduleMessage'][_0x2cf196(0x7c6)](_0x570226,_0x4d8b58,this[_0x2cf196(0x466)][_0x2cf196(0x3fd)]);return _0x165149&&(this[_0x2cf196(0x5f2)](_0x165149[_0x2cf196(0x4c5)]),await this[_0x2cf196(0x261)][_0x2cf196(0x1bb)][_0x2cf196(0x7c6)](_0x165149[_0x2cf196(0x215)],{'$set':{'messages':_0x165149[_0x2cf196(0x4c5)]}},this[_0x2cf196(0x466)]['wuid'])),_0x165149;}catch(_0x10acc4){let _0x397b4d=_0x2cf196(0x6ef),_0x142cbc=_0x10acc4 instanceof Error?_0x10acc4[_0x2cf196(0x202)]:typeof _0x10acc4==_0x2cf196(0x328)?JSON['stringify'](_0x10acc4):_0x10acc4,_0x6bfcda=_0x397b4d+':\x20'+_0x142cbc;throw this['logger'][_0x2cf196(0x7a9)](this['instanceName']+'\x20('+this['instance'][_0x2cf196(0x3fd)]+'):\x20'+_0x6bfcda),new m(_0x6bfcda);}}async['editMessagesInGroup'](_0x464549){const _0x101e35=a0_0x490cab;try{if(this[_0x101e35(0x21e)][_0x101e35(0x331)](this[_0x101e35(0x629)]+'\x20('+this['instance'][_0x101e35(0x3fd)]+_0x101e35(0x77e)),!_0x464549[_0x101e35(0x215)]||!_0x464549[_0x101e35(0x4c5)])throw new Error(_0x101e35(0x444));let _0x16c7d6=_0x464549[_0x101e35(0x215)],_0x60bc94=_0x464549[_0x101e35(0x4c5)],_0x1cd811=_0x60bc94[_0x101e35(0x5f7)](_0x361521=>!_0x361521[_0x101e35(0x75b)])['map'](_0x3aad01=>{const _0x47548b=_0x101e35;let _0x323da3=_0x3aad01[_0x47548b(0x215)];if(!_0x323da3)throw new Error('Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.');return delete _0x3aad01[_0x47548b(0x189)],{'updateOne':{'filter':{'_id':_0x16c7d6,'messages._id':_0x323da3},'update':{'$set':{'messages.$[elem]':_0x3aad01}},'arrayFilters':[{'elem._id':_0x323da3}]}};}),_0x1058f3=_0x60bc94[_0x101e35(0x5f7)](_0x421210=>_0x421210[_0x101e35(0x75b)])[_0x101e35(0x555)](_0x11c3ea=>{const _0x1950d3=_0x101e35;let _0x36ac03=_0x11c3ea[_0x1950d3(0x215)];if(!_0x36ac03)throw new Error(_0x1950d3(0x7a2));return{'updateOne':{'filter':{'_id':_0x16c7d6},'update':{'$pull':{'messages':{'_id':_0x36ac03}}}}};}),_0x59740c=[..._0x1cd811,..._0x1058f3],_0x3e7481=await this['repository'][_0x101e35(0x1bb)]['bulkWrite'](_0x59740c,this[_0x101e35(0x466)][_0x101e35(0x3fd)]),_0x1c66ef=await this[_0x101e35(0x261)][_0x101e35(0x1bb)][_0x101e35(0x218)](_0x16c7d6,this[_0x101e35(0x466)][_0x101e35(0x3fd)]);return _0x1c66ef&&(this[_0x101e35(0x5f2)](_0x1c66ef[_0x101e35(0x4c5)]),await this[_0x101e35(0x261)]['scheduleMessage'][_0x101e35(0x7c6)](_0x1c66ef[_0x101e35(0x215)],{'$set':{'messages':_0x1c66ef[_0x101e35(0x4c5)]}},this[_0x101e35(0x466)]['wuid'])),_0x1c66ef;}catch(_0x401bf6){let _0x5b942d=_0x101e35(0x649),_0x290957=_0x401bf6 instanceof Error?_0x401bf6['message']:typeof _0x401bf6==_0x101e35(0x328)?JSON['stringify'](_0x401bf6):_0x401bf6,_0x48419c=_0x5b942d+':\x20'+_0x290957;throw this['logger']['error'](this[_0x101e35(0x629)]+'\x20('+this[_0x101e35(0x466)][_0x101e35(0x3fd)]+'):\x20'+_0x48419c),new m(_0x48419c);}}async['deleteDoneMessages'](){const _0x319f73=a0_0x490cab;try{let _0x517f87={'status':_0x319f73(0x3e8)},_0x105cea=await this[_0x319f73(0x261)][_0x319f73(0x1bb)][_0x319f73(0x46a)](_0x517f87,this['instance'][_0x319f73(0x3fd)]);if(!_0x105cea[_0x319f73(0x7a9)])this[_0x319f73(0x21e)][_0x319f73(0x331)](this['instanceName']+'\x20('+this[_0x319f73(0x466)]['wuid']+'):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.');else throw new Error(_0x105cea[_0x319f73(0x7a9)]['message']||_0x319f73(0x1a5));return this[_0x319f73(0x757)]();}catch(_0x4bc771){let _0x42a8ae=_0x319f73(0x7d4),_0x3bc4ad=_0x4bc771 instanceof Error?_0x4bc771[_0x319f73(0x202)]:typeof _0x4bc771==_0x319f73(0x328)?JSON[_0x319f73(0x647)](_0x4bc771):_0x4bc771,_0x4457ee=_0x42a8ae+':\x20'+_0x3bc4ad;throw this['logger'][_0x319f73(0x7a9)](this['instanceName']+'\x20('+this[_0x319f73(0x466)][_0x319f73(0x3fd)]+'):\x20'+_0x4457ee),new m(_0x4457ee);}}async['getScheduleMessage'](){const _0x33a53d=a0_0x490cab;try{return await this['repository'][_0x33a53d(0x1bb)][_0x33a53d(0x5f9)]({'where':{}},this[_0x33a53d(0x466)]['wuid']);}catch(_0x3f2593){let _0xee55ce='Erro\x20ao\x20buscar\x20Schedule\x20Messages',_0x548e2c=_0x3f2593 instanceof Error?_0x3f2593[_0x33a53d(0x202)]:typeof _0x3f2593==_0x33a53d(0x328)?JSON['stringify'](_0x3f2593):_0x3f2593,_0x40b5d2=_0xee55ce+':\x20'+_0x548e2c;throw this['logger'][_0x33a53d(0x7a9)](this[_0x33a53d(0x629)]+'\x20('+this['instance']['wuid']+_0x33a53d(0x32f)+_0x40b5d2),new m(_0x40b5d2);}}[a0_0x490cab(0x5f2)](_0x4dd7c6){const _0x3b890b=a0_0x490cab;_0x4dd7c6[_0x3b890b(0x644)]((_0xea0c88,_0x2dbc75)=>_0xea0c88[_0x3b890b(0x69a)]-_0x2dbc75[_0x3b890b(0x69a)]),_0x4dd7c6[_0x3b890b(0x5aa)]((_0x409221,_0x131194)=>{const _0x2756e1=_0x3b890b;_0x409221[_0x2756e1(0x69a)]=_0x131194+0x1;});}async['SendScheduleMessage'](_0x192126,_0x44a335){const _0x1563df=a0_0x490cab;try{if(!_0x44a335)return this[_0x1563df(0x21e)]['error'](this['instanceName']+'\x20('+this[_0x1563df(0x466)][_0x1563df(0x3fd)]+_0x1563df(0x360)),{'error':!0x0,'detail':'Nenhuma\x20mensagem\x20encontrada\x20para\x20envio'};if(_0x44a335[_0x1563df(0x5af)]===_0x1563df(0x362)&&!this[_0x1563df(0x672)]?.[_0x1563df(0x15b)][_0x1563df(0x431)])return this[_0x1563df(0x21e)][_0x1563df(0x7a9)](this[_0x1563df(0x629)]+'\x20('+this['instance'][_0x1563df(0x3fd)]+_0x1563df(0x7ca)),{'error':!0x0,'detail':_0x1563df(0x606)};switch(_0x44a335[_0x1563df(0x5af)]){case _0x1563df(0x120):return await this[_0x1563df(0x3c8)](_0x44a335,_0x192126);case'video':case _0x1563df(0x30b):case _0x1563df(0x5a8):return await this[_0x1563df(0x4db)](_0x44a335,_0x192126);case _0x1563df(0x70d):return await this['scheduleSendAudio'](_0x44a335,_0x192126);case _0x1563df(0x362):let _0x51171e=new He();return _0x51171e['name']=_0x44a335[_0x1563df(0x362)],_0x51171e[_0x1563df(0x133)]=_0x192126,await this[_0x1563df(0x66b)](_0x51171e);default:return this[_0x1563df(0x21e)][_0x1563df(0x7a9)](this['instanceName']+'\x20('+this['instance'][_0x1563df(0x3fd)]+_0x1563df(0x46e)+_0x44a335[_0x1563df(0x5af)]),{'error':!0x0,'detail':_0x1563df(0x7b2)};}}catch(_0x359e3b){return this[_0x1563df(0x21e)][_0x1563df(0x7a9)](this[_0x1563df(0x629)]+'\x20('+this['instance'][_0x1563df(0x3fd)]+_0x1563df(0x7fc)+(_0x359e3b instanceof Error?_0x359e3b[_0x1563df(0x202)]:JSON[_0x1563df(0x647)](_0x359e3b,null,0x2))),{'error':!0x0,'detail':_0x359e3b[_0x1563df(0x202)]};}}async['scheduleSendText'](_0x33a0c1,_0x3b5b60){const _0x5cffae=a0_0x490cab;if(this[_0x5cffae(0x21e)][_0x5cffae(0x331)](this[_0x5cffae(0x629)]+'\x20('+this[_0x5cffae(0x466)][_0x5cffae(0x3fd)]+'):\x20\x27Enviando\x20texto\x20para\x20\x27'+_0x3b5b60+'\x27'),!_0x33a0c1[_0x5cffae(0x120)]||_0x33a0c1['text'][_0x5cffae(0x587)]===0x0)return{'error':!0x0,'detail':_0x5cffae(0x371)};let _0x417583=await this[_0x5cffae(0x839)](_0x33a0c1[_0x5cffae(0x120)],_0x3b5b60),_0x12a88c={'number':_0x3b5b60,'options':{'delay':_0x33a0c1[_0x5cffae(0x4a8)],'linkPreview':_0x33a0c1[_0x5cffae(0x1f1)]},'textMessage':{'text':_0x417583}},_0x3ef93a=null;try{let _0x25a42d=await this[_0x5cffae(0x59e)](_0x12a88c);if(_0x25a42d&&_0x25a42d[_0x5cffae(0x526)])return{'error':!0x1,'id':_0x25a42d['key']['id']};_0x3ef93a=JSON[_0x5cffae(0x647)](_0x25a42d),this[_0x5cffae(0x21e)][_0x5cffae(0x331)](this[_0x5cffae(0x629)]+'\x20('+this['instance'][_0x5cffae(0x3fd)]+_0x5cffae(0x32f)+_0x3ef93a);}catch(_0x103b9a){this[_0x5cffae(0x21e)][_0x5cffae(0x7a9)](this[_0x5cffae(0x629)]+'\x20('+this[_0x5cffae(0x466)][_0x5cffae(0x3fd)]+_0x5cffae(0x175)+(_0x103b9a instanceof Error?_0x103b9a[_0x5cffae(0x202)]:JSON[_0x5cffae(0x647)](_0x103b9a,null,0x2))),_0x3ef93a=_0x103b9a[_0x5cffae(0x202)];}if(_0x3ef93a)return{'error':!0x0,'detail':(typeof _0x3ef93a==_0x5cffae(0x328)?JSON['stringify'](_0x3ef93a,null,0x2):_0x3ef93a)[_0x5cffae(0x4d4)](/[\[\]{}\n]/g,'\x20')[_0x5cffae(0x4d4)](/  +/g,'\x20')};}async[a0_0x490cab(0x4db)](_0x3e0754,_0x1bcafa){const _0xa648bc=a0_0x490cab;this[_0xa648bc(0x21e)][_0xa648bc(0x331)](this[_0xa648bc(0x629)]+'\x20('+this[_0xa648bc(0x466)][_0xa648bc(0x3fd)]+_0xa648bc(0x5fb)+_0x1bcafa+'\x27');let _0x5844f6;_0x3e0754[_0xa648bc(0x120)]&&_0x3e0754[_0xa648bc(0x120)][_0xa648bc(0x587)]>0x0&&(_0x5844f6=await this[_0xa648bc(0x839)](_0x3e0754[_0xa648bc(0x120)],_0x1bcafa));let _0x5d7b12={'number':_0x1bcafa,'options':{'delay':_0x3e0754[_0xa648bc(0x4a8)],'linkPreview':_0x3e0754[_0xa648bc(0x1f1)]},'mediaMessage':{'mediatype':_0x3e0754[_0xa648bc(0x5af)],'caption':_0x5844f6,'media':_0x3e0754[_0xa648bc(0x1fe)]}},_0x1ae49a=null;try{let _0x36bd7e=await this['mediaMessage'](_0x5d7b12);if(_0x36bd7e&&_0x36bd7e[_0xa648bc(0x526)])return{'error':!0x1,'id':_0x36bd7e[_0xa648bc(0x1c2)]['id']};_0x1ae49a=JSON[_0xa648bc(0x647)](_0x36bd7e),this['logger']['verbose'](this[_0xa648bc(0x629)]+'\x20('+this[_0xa648bc(0x466)][_0xa648bc(0x3fd)]+_0xa648bc(0x32f)+_0x1ae49a);}catch(_0x5b3a41){this[_0xa648bc(0x21e)][_0xa648bc(0x7a9)](this[_0xa648bc(0x629)]+'\x20('+this[_0xa648bc(0x466)][_0xa648bc(0x3fd)]+_0xa648bc(0x65b)+(_0x5b3a41 instanceof Error?_0x5b3a41[_0xa648bc(0x202)]:JSON[_0xa648bc(0x647)](_0x5b3a41,null,0x2))),_0x1ae49a=_0x5b3a41[_0xa648bc(0x202)];}if(_0x1ae49a)return{'error':!0x0,'detail':(typeof _0x1ae49a==_0xa648bc(0x328)?JSON[_0xa648bc(0x647)](_0x1ae49a,null,0x2):_0x1ae49a)[_0xa648bc(0x4d4)](/[\[\]{}\n]/g,'\x20')[_0xa648bc(0x4d4)](/  +/g,'\x20')};}async[a0_0x490cab(0x663)](_0x4a0a36,_0x43c12e){const _0x5b941e=a0_0x490cab;this[_0x5b941e(0x21e)][_0x5b941e(0x331)](this[_0x5b941e(0x629)]+'\x20('+this['instance']['wuid']+_0x5b941e(0x141)+_0x43c12e+'\x27');let _0x424e50={'number':_0x43c12e,'options':{'delay':_0x4a0a36[_0x5b941e(0x4a8)]},'audioMessage':{'audio':_0x4a0a36['urlOrBase64']}},_0x19c75b=null;try{let _0x295d6d=await this[_0x5b941e(0x61d)](_0x424e50);if(_0x295d6d&&_0x295d6d[_0x5b941e(0x526)])return{'error':!0x1,'id':_0x295d6d['key']['id']};_0x19c75b=JSON[_0x5b941e(0x647)](_0x295d6d),this[_0x5b941e(0x21e)][_0x5b941e(0x331)](this[_0x5b941e(0x629)]+'\x20('+this[_0x5b941e(0x466)][_0x5b941e(0x3fd)]+_0x5b941e(0x32f)+_0x19c75b);}catch(_0x444048){this[_0x5b941e(0x21e)][_0x5b941e(0x7a9)](this[_0x5b941e(0x629)]+'\x20('+this[_0x5b941e(0x466)]['wuid']+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20'+(_0x444048 instanceof Error?_0x444048[_0x5b941e(0x202)]:JSON[_0x5b941e(0x647)](_0x444048,null,0x2))),_0x19c75b=_0x444048[_0x5b941e(0x202)];}if(_0x19c75b)return{'error':!0x0,'detail':(typeof _0x19c75b==_0x5b941e(0x328)?JSON[_0x5b941e(0x647)](_0x19c75b,null,0x2):_0x19c75b)['replace'](/[\[\]{}\n]/g,'\x20')[_0x5b941e(0x4d4)](/  +/g,'\x20')};}async[a0_0x490cab(0x1e4)](_0x2a3902){const _0x1f5041=a0_0x490cab;try{return await this[_0x1f5041(0x386)][_0x1f5041(0x480)](_0x2a3902['groupJid'],_0x2a3902[_0x1f5041(0x41a)]),{'update':'success'};}catch(_0x2c0e6b){let _0x55fe7b=_0x1f5041(0x592),_0x5245f5=_0x2c0e6b instanceof Error?_0x2c0e6b[_0x1f5041(0x202)]:typeof _0x2c0e6b=='object'?JSON['stringify'](_0x2c0e6b):_0x2c0e6b,_0x441496=_0x55fe7b+':\x20'+_0x5245f5;throw this[_0x1f5041(0x21e)]['error'](this[_0x1f5041(0x629)]+'\x20('+this[_0x1f5041(0x466)]['wuid']+'):\x20'+_0x441496),new x(_0x441496);}}async[a0_0x490cab(0x7e4)](_0x140a4c){const _0x5ef0c9=a0_0x490cab;try{return await this[_0x5ef0c9(0x386)][_0x5ef0c9(0x36b)](_0x140a4c[_0x5ef0c9(0x768)],_0x140a4c[_0x5ef0c9(0x149)]),{'update':_0x5ef0c9(0x59f)};}catch(_0x11ce0b){let _0x3d07c3=_0x5ef0c9(0x720),_0x2d418a=_0x11ce0b instanceof Error?_0x11ce0b[_0x5ef0c9(0x202)]:typeof _0x11ce0b==_0x5ef0c9(0x328)?JSON[_0x5ef0c9(0x647)](_0x11ce0b):_0x11ce0b,_0x31ed27=_0x3d07c3+':\x20'+_0x2d418a;throw this[_0x5ef0c9(0x21e)][_0x5ef0c9(0x7a9)](this[_0x5ef0c9(0x629)]+'\x20('+this[_0x5ef0c9(0x466)]['wuid']+_0x5ef0c9(0x32f)+_0x31ed27),new x(_0x31ed27);}}async[a0_0x490cab(0x6ba)](_0x362d4e){const _0x5b813a=a0_0x490cab;try{let _0x563947=await this['client'][_0x5b813a(0x70e)](_0x362d4e['groupJid'],_0x362d4e[_0x5b813a(0x467)]);return{'success':!0x0};}catch(_0x575fc0){let _0x2921d3='Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral',_0x12580b=_0x575fc0 instanceof Error?_0x575fc0[_0x5b813a(0x202)]:typeof _0x575fc0=='object'?JSON[_0x5b813a(0x647)](_0x575fc0):_0x575fc0,_0x2f9e61=_0x2921d3+':\x20'+_0x12580b;throw this[_0x5b813a(0x21e)][_0x5b813a(0x7a9)](this[_0x5b813a(0x629)]+'\x20('+this[_0x5b813a(0x466)]['wuid']+_0x5b813a(0x32f)+_0x2f9e61),new x(_0x2f9e61);}}async['groupSetting'](_0x318e2a){const _0x3b4b59=a0_0x490cab;try{return await this[_0x3b4b59(0x386)]['groupSettingUpdate'](_0x318e2a[_0x3b4b59(0x768)],_0x318e2a[_0x3b4b59(0x5f5)]),{'update':_0x3b4b59(0x59f)};}catch(_0x4a9389){let _0x474bdd=_0x3b4b59(0x718),_0x1c74d0=_0x4a9389 instanceof Error?_0x4a9389[_0x3b4b59(0x202)]:typeof _0x4a9389=='object'?JSON[_0x3b4b59(0x647)](_0x4a9389):_0x4a9389,_0x57871a=_0x474bdd+':\x20'+_0x1c74d0;throw this['logger'][_0x3b4b59(0x7a9)](this['instanceName']+'\x20('+this[_0x3b4b59(0x466)][_0x3b4b59(0x3fd)]+_0x3b4b59(0x32f)+_0x57871a),new x(_0x57871a);}}async[a0_0x490cab(0x489)](_0x80eb80){const _0x262829=a0_0x490cab;try{let _0x3be0e2;if((0x0,k['isURL'])(_0x80eb80['image'])){let _0x2e2335=new Date()[_0x262829(0x620)](),_0x1a5fb4=_0x80eb80[_0x262829(0x30b)]+_0x262829(0x317)+_0x2e2335;_0x3be0e2=(await Q[_0x262829(0x73a)][_0x262829(0x715)](_0x1a5fb4,{'responseType':'arraybuffer'}))[_0x262829(0x321)];}else{if((0x0,k[_0x262829(0x747)])(_0x80eb80[_0x262829(0x30b)]))_0x3be0e2=Buffer[_0x262829(0x3f5)](_0x80eb80[_0x262829(0x30b)],_0x262829(0x3a1));else throw new m(_0x262829(0x38e));}return await this[_0x262829(0x386)][_0x262829(0x6c8)](_0x80eb80[_0x262829(0x768)],_0x3be0e2),{'update':'success'};}catch(_0x22c70e){let _0x30613c=_0x262829(0x4b4),_0x438401=_0x22c70e instanceof Error?_0x22c70e['message']:typeof _0x22c70e=='object'?JSON[_0x262829(0x647)](_0x22c70e):_0x22c70e,_0x4ae3bb=_0x30613c+':\x20'+_0x438401;throw this[_0x262829(0x21e)]['error'](this[_0x262829(0x629)]+'\x20('+this['instance']['wuid']+_0x262829(0x32f)+_0x4ae3bb),new x(_0x4ae3bb);}}},Gt=class u{constructor(_0x5d9830,_0x5bef7f,_0x1d85fb){const _0x2f7b03=a0_0x490cab;this['eventEmitter']=_0x5d9830,this['configService']=_0x5bef7f,this[_0x2f7b03(0x261)]=_0x1d85fb,this['db']={},this[_0x2f7b03(0x746)]={},this[_0x2f7b03(0x21e)]=new $(u[_0x2f7b03(0x149)]),this['waInstances']={},(this[_0x2f7b03(0x728)](),this['noConnection'](),Object[_0x2f7b03(0x17e)](this['db'],_0x5bef7f[_0x2f7b03(0x715)](_0x2f7b03(0x1da))),Object[_0x2f7b03(0x17e)](this[_0x2f7b03(0x746)],_0x5bef7f['get'](_0x2f7b03(0x4c7))),this[_0x2f7b03(0x7d3)]=this['db'][_0x2f7b03(0x3c3)]?this['repository']['dbServer']?.['db'](this['db'][_0x2f7b03(0x4b9)][_0x2f7b03(0x784)]+'-instances'):void 0x0,this[_0x2f7b03(0x6a8)]=this['redis'][_0x2f7b03(0x3c3)]?new pe(this[_0x2f7b03(0x746)]):void 0x0);}async[a0_0x490cab(0x5ef)](_0x35cca5){const _0x4583c8=a0_0x490cab;if(_0x35cca5&&!this['waInstances'][_0x35cca5])throw new J(_0x4583c8(0x73c)+_0x35cca5+_0x4583c8(0x23c));let _0x2626e5=[];for await(let [_0x516713,_0x169b3f]of Object[_0x4583c8(0x49e)](this['waInstances']))if(_0x169b3f&&_0x169b3f[_0x4583c8(0x56e)][_0x4583c8(0x64d)]===_0x4583c8(0x1b9)){let _0x1405e2=await this[_0x4583c8(0x261)]['auth'][_0x4583c8(0x5f9)](_0x516713);_0x2626e5[_0x4583c8(0x3de)]({'instance':{'instanceName':_0x516713,'apikey':_0x1405e2[_0x4583c8(0x642)],'owner':_0x169b3f[_0x4583c8(0x3fd)],'profileName':await _0x169b3f[_0x4583c8(0x706)]()||_0x4583c8(0x32d),'profilePictureUrl':_0x169b3f['profilePictureUrl']}});}return _0x2626e5[_0x4583c8(0x5f9)](_0x34aac1=>_0x34aac1[_0x4583c8(0x466)][_0x4583c8(0x629)]===_0x35cca5)??_0x2626e5;}async[a0_0x490cab(0x2d5)](_0x59b240){const _0x27556e=a0_0x490cab;if(this['db'][_0x27556e(0x3c3)]&&(await this[_0x27556e(0x261)][_0x27556e(0x65d)]['connect'](),(await this[_0x27556e(0x7d3)]['collections']())[_0x27556e(0x587)]>0x0&&await this['dbInstance'][_0x27556e(0x734)](_0x59b240)),this[_0x27556e(0x746)][_0x27556e(0x3c3)]){this['cache'][_0x27556e(0x403)]=_0x59b240,await this[_0x27556e(0x6a8)][_0x27556e(0x169)]();return;}}async[a0_0x490cab(0x30d)](){const _0x2face5=a0_0x490cab;await this[_0x2face5(0x4a7)]();let _0x493767=async _0x2febf9=>{const _0x1f1a94=_0x2face5;let _0x261bb5=new Ne(this[_0x1f1a94(0x3ec)],this[_0x1f1a94(0x28d)],this[_0x1f1a94(0x261)]);_0x261bb5[_0x1f1a94(0x629)]=_0x2febf9,await _0x261bb5[_0x1f1a94(0x193)](),this[_0x1f1a94(0x23b)][_0x2febf9]=_0x261bb5;};try{if(this[_0x2face5(0x746)]['ENABLED']){let _0x44c60b=await this[_0x2face5(0x6a8)][_0x2face5(0x5dc)]();_0x44c60b?.[_0x2face5(0x587)]>0x0&&_0x44c60b[_0x2face5(0x5aa)](async _0x407ace=>await _0x493767(_0x407ace[_0x2face5(0x6e6)](':')[0x1]));return;}if(this['db'][_0x2face5(0x3c3)]){await this[_0x2face5(0x261)][_0x2face5(0x65d)][_0x2face5(0x3ca)]();let _0x294a8d=await this['dbInstance'][_0x2face5(0x799)]();_0x294a8d[_0x2face5(0x587)]>0x0&&_0x294a8d[_0x2face5(0x5aa)](async _0x3fca8a=>await _0x493767(_0x3fca8a[_0x2face5(0x3aa)][_0x2face5(0x4d4)](/^[\w-]+\./,'')));return;}}catch(_0xeef3ee){this[_0x2face5(0x21e)][_0x2face5(0x7a9)](_0xeef3ee);}}async[a0_0x490cab(0x3e5)](){const _0x4e3b83=a0_0x490cab;try{let _0x49f437=await this['repository']['auth'][_0x4e3b83(0x2d0)]({'online':!0x1});for(let _0x34ef4f of _0x49f437){let _0x301fd2=_0x34ef4f[_0x4e3b83(0x215)];await he[_0x4e3b83(0x473)](X,_0x301fd2);}console[_0x4e3b83(0x1bd)](_0x4e3b83(0x410)+_0x49f437[_0x4e3b83(0x587)]);let _0x46f088={'online':!0x1},_0x37aba7=await this['repository'][_0x4e3b83(0x42a)][_0x4e3b83(0x46a)](_0x46f088);console[_0x4e3b83(0x1bd)](_0x4e3b83(0x4f5)+_0x37aba7[_0x4e3b83(0x7a6)]);}catch(_0x5f41ac){console[_0x4e3b83(0x7a9)](_0x4e3b83(0x568),_0x5f41ac);}}async[a0_0x490cab(0x4a7)](){const _0x488692=a0_0x490cab;try{let _0x33562f={'online':!0x1},_0x47aa5b={'online':!0x1,'lastDisconnect':Date[_0x488692(0x7f9)]()},_0x4f0395=await this['repository'][_0x488692(0x42a)]['updateAll'](_0x33562f,_0x47aa5b);await this[_0x488692(0x3e5)]();}catch(_0x283a36){console[_0x488692(0x7a9)](_0x488692(0x785),_0x283a36);}}[a0_0x490cab(0x728)](){const _0x45724a=a0_0x490cab;this[_0x45724a(0x28d)]['on'](_0x45724a(0x2d1),async _0x29d451=>{const _0x53f29e=_0x45724a;try{this['waInstances'][_0x29d451]=void 0x0;}catch{}try{this[_0x53f29e(0x2d5)](_0x29d451);}finally{this['logger'][_0x53f29e(0x487)](_0x53f29e(0x73c)+_0x29d451+_0x53f29e(0x437));}});}[a0_0x490cab(0x56d)](){const _0x481504=a0_0x490cab;this[_0x481504(0x28d)]['on'](_0x481504(0x7dc),async _0x440a1c=>{const _0x43fd28=_0x481504;try{this[_0x43fd28(0x23b)][_0x440a1c]=void 0x0;}catch{}try{this[_0x43fd28(0x2d5)](_0x440a1c);}finally{this[_0x43fd28(0x21e)][_0x43fd28(0x487)](_0x43fd28(0x73c)+_0x440a1c+_0x43fd28(0x472));}});}},Bt=class extends _{[a0_0x490cab(0x235)](_0xe8b545){return sa(_0xe8b545);}async[a0_0x490cab(0x505)](_0x18b61f){const _0x1d3f40=a0_0x490cab;if(_0x18b61f['length']!==0x0)try{return{'insertCount':(await this[_0x1d3f40(0x235)](_0x18b61f[0x0][_0x1d3f40(0x1f7)])[_0x1d3f40(0x575)]([..._0x18b61f]))['length']};}catch(_0x18cab4){return _0x18cab4;}}async[a0_0x490cab(0x5f9)](_0x4e22f9,_0x211a52){const _0x1c9a60=a0_0x490cab;try{let _0x5c2a6e=this[_0x1c9a60(0x235)](_0x211a52),_0x237e6f=I(_0x4e22f9[_0x1c9a60(0x83d)]);return await _0x5c2a6e['find'](_0x237e6f)[_0x1c9a60(0x644)]({'lastmsg':-0x1})[_0x1c9a60(0x344)](_0x4e22f9?.[_0x1c9a60(0x344)]??0x0)[_0x1c9a60(0x700)]();}catch{return[];}}async[a0_0x490cab(0x75b)](_0x17041b,_0x27943b){const _0x183acf=a0_0x490cab;try{return{'deletedCount':(await this[_0x183acf(0x235)](_0x27943b)[_0x183acf(0x46a)]({..._0x17041b[_0x183acf(0x83d)]}))[_0x183acf(0x717)]};}catch(_0x461e02){return{'error':_0x461e02?.['toString']()};}}async[a0_0x490cab(0x3e4)](_0x4ba4a6,_0x2ce5e2){const _0x1c4f20=a0_0x490cab;try{return await this[_0x1c4f20(0x235)](_0x2ce5e2)['deleteMany']({..._0x4ba4a6['where']}),[];}catch(_0x5d719c){return{'error':_0x5d719c?.[_0x1c4f20(0x751)]()};}}async[a0_0x490cab(0x2cd)](_0x543148,_0x43eb4b){const _0x4f5f60=a0_0x490cab;try{let _0x261cd5=this['getChatModelForOwner'](_0x43eb4b),_0x42a35c=I(_0x543148[_0x4f5f60(0x83d)]);return await _0x261cd5[_0x4f5f60(0x2cd)](_0x42a35c)[_0x4f5f60(0x700)]();}catch{return null;}}async[a0_0x490cab(0x341)](_0x5c622b,_0x127e9f,_0x2b03fb,_0x33e7b3,_0x1e671b='$set'){const _0x48cce0=a0_0x490cab;try{let _0x3277b4={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x33e7b3},_0x225040=this[_0x48cce0(0x235)](_0x2b03fb),_0x2ee842=I(_0x5c622b['where']);Object[_0x48cce0(0x66a)](_0x127e9f)[_0x48cce0(0x5aa)](_0x494903=>{_0x127e9f[_0x494903]==null&&delete _0x127e9f[_0x494903];});let _0x422d5c={};return _0x422d5c[_0x1e671b]=_0x127e9f,await _0x225040[_0x48cce0(0x412)](_0x2ee842,_0x422d5c,_0x3277b4);}catch(_0x50d521){return console['error'](_0x50d521),null;}}async[a0_0x490cab(0x459)](_0x395a23){const _0xa1e363=a0_0x490cab;try{let _0x186e52=this[_0xa1e363(0x235)](_0x395a23[0x0][_0xa1e363(0x298)][_0xa1e363(0x83d)][_0xa1e363(0x1f7)]),_0x15e773=_0x395a23[_0xa1e363(0x555)](_0x540a72=>({'updateOne':{'filter':{..._0x540a72['query'][_0xa1e363(0x83d)]},'update':{'$set':_0x540a72[_0xa1e363(0x767)]},'upsert':!0x0}})),_0x5a8acf=await _0x186e52[_0xa1e363(0x792)](_0x15e773);return _0x5a8acf[_0xa1e363(0x518)]+_0x5a8acf['upsertedCount'];}catch(_0x566aa3){return console[_0xa1e363(0x7a9)](_0x566aa3),0x0;}}async[a0_0x490cab(0x4d9)](_0x4967de){const _0x2ab248=a0_0x490cab;try{let _0x156f8e={'group_isCommunity':'','group_announce':'','group_size':''},_0x5f3298={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x28deeb={'$unset':_0x156f8e};return(await this[_0x2ab248(0x235)](_0x4967de)[_0x2ab248(0x459)](_0x5f3298,_0x28deeb))['modifiedCount'];}catch(_0x5bd5c9){return console[_0x2ab248(0x7a9)](_0x2ab248(0x275),_0x5bd5c9),0x0;}}async[a0_0x490cab(0x248)](_0x3b053f){const _0x163965=a0_0x490cab;try{let _0x4d3135=this[_0x163965(0x235)](_0x3b053f),_0xf87ad0={'leadInfo.etiquetas':{'$exists':!0x1}},_0x4f1217={'$set':{'leadInfo.etiquetas':[]}};return(await _0x4d3135[_0x163965(0x459)](_0xf87ad0,_0x4f1217))[_0x163965(0x518)];}catch(_0x5adb98){return console['error'](_0x5adb98),0x0;}}async[a0_0x490cab(0x424)](_0x510e66){const _0x25a42c=a0_0x490cab;try{let _0x4824cb=this[_0x25a42c(0x235)](_0x510e66),_0x45cfbf={'leadInfo.tags':{'$exists':!0x1}},_0x393a23={'$set':{'leadInfo.tags':[]}};return(await _0x4824cb[_0x25a42c(0x459)](_0x45cfbf,_0x393a23))[_0x25a42c(0x518)];}catch(_0x28e47f){return console[_0x25a42c(0x7a9)](_0x28e47f),0x0;}}async['updateMissingCustomFields'](_0x318dd1){const _0x15b994=a0_0x490cab;try{let _0x567c48=this['getChatModelForOwner'](_0x318dd1),_0x59cd57={'leadInfo.customFields':{'$exists':!0x1}},_0x336088={'$set':{'leadInfo.customFields':[]}};return(await _0x567c48['updateMany'](_0x59cd57,_0x336088))['modifiedCount'];}catch(_0x289593){return console[_0x15b994(0x7a9)](_0x289593),0x0;}}async[a0_0x490cab(0x575)](_0x55d6c2,_0x5ee8f6){const _0x6e96df=a0_0x490cab;if(!Array[_0x6e96df(0x250)](_0x55d6c2)||_0x55d6c2['length']===0x0)throw new Error(_0x6e96df(0x83a));try{return(await this[_0x6e96df(0x235)](_0x5ee8f6)[_0x6e96df(0x575)](_0x55d6c2))[_0x6e96df(0x587)];}catch(_0x5225ee){throw console[_0x6e96df(0x7a9)](_0x6e96df(0x1d9),_0x5225ee),_0x5225ee;}}async['deleteChat'](_0x4ff980,_0x3b3ec6){const _0xa81249=a0_0x490cab;try{await this[_0xa81249(0x235)](_0x3b3ec6)[_0xa81249(0x7b4)]({'_id':_0x4ff980});}catch(_0x57d47f){throw console[_0xa81249(0x7a9)](_0xa81249(0x699),_0x57d47f),_0x57d47f;}}},Wt=class extends _{constructor(_0x58fd8e,_0x3a8804,_0x4e9646){const _0x574e34=a0_0x490cab;super(_0x3a8804),this['cacheContactModel']=_0x58fd8e,this[_0x574e34(0x3ec)]=_0x3a8804,this[_0x574e34(0x388)]=_0x4e9646;}async[a0_0x490cab(0x505)](_0x16b94a){const _0x4119ae=a0_0x490cab;if(_0x16b94a[_0x4119ae(0x587)]!==0x0)try{return{'insertCount':(await this[_0x4119ae(0x60f)][_0x4119ae(0x575)]([..._0x16b94a]))[_0x4119ae(0x587)]};}catch(_0x4b44f8){return _0x4b44f8;}}async[a0_0x490cab(0x767)](_0x2a54e6,_0x3851aa){const _0x4937c7=a0_0x490cab;try{let _0x54a238=I(_0x2a54e6[_0x4937c7(0x83d)]);return{'updatedCount':(await this[_0x4937c7(0x60f)][_0x4937c7(0x459)](_0x54a238,{'$set':_0x3851aa}))[_0x4937c7(0x518)]};}catch(_0x5d76b5){return console[_0x4937c7(0x7a9)](_0x4937c7(0x67c),_0x5d76b5),{'error':_0x5d76b5[_0x4937c7(0x751)]()};}}async['findManyByIds'](_0x351036){const _0x461798=a0_0x490cab;try{let _0x36ab83={'_id':{'$in':_0x351036}};return await this[_0x461798(0x60f)][_0x461798(0x5f9)](_0x36ab83)[_0x461798(0x700)]();}catch(_0x23e174){return console[_0x461798(0x7a9)]('Error\x20finding\x20many\x20contacts:',_0x23e174),[];}}async[a0_0x490cab(0x75b)](_0x437e54){const _0x4eee04=a0_0x490cab;try{return{'deletedCount':(await this[_0x4eee04(0x60f)]['deleteMany']({..._0x437e54[_0x4eee04(0x83d)]}))[_0x4eee04(0x717)]};}catch(_0x33ec1a){return{'error':_0x33ec1a?.[_0x4eee04(0x751)]()};}}async['find'](_0x3fd8d2){const _0xe70573=a0_0x490cab;try{let _0x30688d=I(_0x3fd8d2[_0xe70573(0x83d)]);return await this[_0xe70573(0x60f)]['find'](_0x30688d)[_0xe70573(0x344)](_0x3fd8d2?.[_0xe70573(0x344)]??0x0)[_0xe70573(0x700)]();}catch{return[];}}async['findOne'](_0x23ef7c){const _0x244b2e=a0_0x490cab;try{let _0x48f1ad=I(_0x23ef7c[_0x244b2e(0x83d)]);return await this[_0x244b2e(0x60f)][_0x244b2e(0x2cd)](_0x48f1ad)[_0x244b2e(0x700)]();}catch{return null;}}},zt=class extends _{[a0_0x490cab(0x34a)](_0x470442){return va(_0x470442);}async[a0_0x490cab(0x341)](_0x54a922,_0xfb839c,_0x3e54a0,_0x5ee28a){const _0x17aedd=a0_0x490cab;try{let _0x1fdf69={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x5ee28a},_0x4e8ae1=this[_0x17aedd(0x34a)](_0x3e54a0),_0x1fcb9e=I(_0x54a922['where']);return await _0x4e8ae1[_0x17aedd(0x412)](_0x1fcb9e,{'$set':_0xfb839c},_0x1fdf69);}catch(_0x1ed634){return console[_0x17aedd(0x7a9)](_0x1ed634),null;}}async[a0_0x490cab(0x5f9)](_0x3e0f41,_0x4c0806){const _0x5f1b3c=a0_0x490cab;try{let _0x6e3834=this[_0x5f1b3c(0x34a)](_0x4c0806),_0x4e8c49=I(_0x3e0f41[_0x5f1b3c(0x83d)]);return await _0x6e3834['find'](_0x4e8c49);}catch(_0x24ca09){console[_0x5f1b3c(0x7a9)](_0x24ca09);}}async[a0_0x490cab(0x75b)](_0x2cabe2,_0x266ab4){const _0x3844c5=a0_0x490cab;try{let _0x5d58fc=this['getLabelModelForOwner'](_0x266ab4),_0x4be8c9=I(_0x2cabe2[_0x3844c5(0x83d)]);await _0x5d58fc[_0x3844c5(0x46a)](_0x4be8c9);}catch(_0x369fe3){console[_0x3844c5(0x7a9)](_0x369fe3);}}async[a0_0x490cab(0x3e4)](_0x6e64fc){const _0x4dbf74=a0_0x490cab;try{return await this[_0x4dbf74(0x34a)](_0x6e64fc)[_0x4dbf74(0x57f)]['drop'](),{'success':!0x0};}catch(_0x41af9b){return console[_0x4dbf74(0x7a9)](_0x41af9b),{'success':!0x1,'error':_0x41af9b};}}},Ht=class{constructor(_0x1bf4c9){const _0x1d4f3e=a0_0x490cab;this[_0x1d4f3e(0x245)]=_0x1bf4c9;}async[a0_0x490cab(0x6db)]({instanceName:_0x4d8a66},_0x5099c7){const _0x36390d=a0_0x490cab;return await this[_0x36390d(0x245)]['waInstances'][_0x4d8a66][_0x36390d(0x6db)](_0x5099c7);}async[a0_0x490cab(0x3d6)]({instanceName:_0x37e887},_0x40c8d4){const _0x255951=a0_0x490cab;return await this[_0x255951(0x245)][_0x255951(0x23b)][_0x37e887]['whatsappNumber'](_0x40c8d4);}async[a0_0x490cab(0x613)]({instanceName:_0x20dc58},_0x3da52e){const _0x565ada=a0_0x490cab;return await this['waMonitor'][_0x565ada(0x23b)][_0x20dc58][_0x565ada(0x613)](_0x3da52e);}async[a0_0x490cab(0x161)]({instanceName:_0x3d46a3},_0x37d2ea){const _0x36d81c=a0_0x490cab;return await this[_0x36d81c(0x245)]['waInstances'][_0x3d46a3][_0x36d81c(0x530)](_0x37d2ea);}async[a0_0x490cab(0x249)]({instanceName:_0x15483f},_0x4241a8){const _0xa2fbb4=a0_0x490cab;return await this[_0xa2fbb4(0x245)]['waInstances'][_0x15483f][_0xa2fbb4(0x249)](_0x4241a8);}async[a0_0x490cab(0x5fa)]({instanceName:_0x6c35b9},_0x12df94){const _0x1a1393=a0_0x490cab;return await this[_0x1a1393(0x245)][_0x1a1393(0x23b)][_0x6c35b9][_0x1a1393(0x5fa)](_0x12df94);}async[a0_0x490cab(0x612)]({instanceName:_0x3db13e},_0xc08ed0){const _0x3de73a=a0_0x490cab;return await this[_0x3de73a(0x245)][_0x3de73a(0x23b)][_0x3db13e]['profilePicture'](_0xc08ed0[_0x3de73a(0x7c9)]);}async[a0_0x490cab(0x5c8)]({instanceName:_0x2a3aaa},_0x5dc527){const _0x41d7eb=a0_0x490cab;return await this[_0x41d7eb(0x245)]['waInstances'][_0x2a3aaa][_0x41d7eb(0x5c8)](_0x5dc527[_0x41d7eb(0x7c9)]);}async[a0_0x490cab(0x3d5)]({instanceName:_0x7ffc49},_0x130201){const _0x26f7cd=a0_0x490cab;return await this[_0x26f7cd(0x245)][_0x26f7cd(0x23b)][_0x7ffc49]['updatePresence'](_0x130201);}async[a0_0x490cab(0x7f3)]({instanceName:_0x231f34},_0x250f02){const _0xe38c9c=a0_0x490cab;return await this[_0xe38c9c(0x245)][_0xe38c9c(0x23b)][_0x231f34][_0xe38c9c(0x7f3)](_0x250f02);}async[a0_0x490cab(0x552)]({instanceName:_0x3a6e97},_0x1c913b){const _0x169603=a0_0x490cab;return await this['waMonitor'][_0x169603(0x23b)][_0x3a6e97][_0x169603(0x552)](_0x1c913b);}async['fetchMessages']({instanceName:_0x295cbd},_0x49fe9d){const _0x195c02=a0_0x490cab;return await this[_0x195c02(0x245)][_0x195c02(0x23b)][_0x295cbd]['fetchMessages'](_0x49fe9d);}async['fetchLabels']({instanceName:_0x10c2d7}){const _0x36edd4=a0_0x490cab;return await this[_0x36edd4(0x245)][_0x36edd4(0x23b)][_0x10c2d7]['fetchLabels']();}async['fetchChats']({instanceName:_0x3dc487}){const _0x5542f0=a0_0x490cab;return await this[_0x5542f0(0x245)]['waInstances'][_0x3dc487][_0x5542f0(0x34d)]();}async[a0_0x490cab(0x67e)]({instanceName:_0x275da2}){const _0x1374b2=a0_0x490cab;return await this[_0x1374b2(0x245)]['waInstances'][_0x275da2][_0x1374b2(0x67e)]();}async[a0_0x490cab(0x4a1)]({instanceName:_0x44b6fc},_0x146479){const _0xbe71f7=a0_0x490cab;return await this[_0xbe71f7(0x245)][_0xbe71f7(0x23b)][_0x44b6fc]['updatePrivacySettings'](_0x146479);}async[a0_0x490cab(0x39b)]({instanceName:_0xa1c472},_0x4b3018){const _0x3f027f=a0_0x490cab;return await this[_0x3f027f(0x245)][_0x3f027f(0x23b)][_0xa1c472][_0x3f027f(0x39b)](_0x4b3018[_0x3f027f(0x7c9)]);}async[a0_0x490cab(0x6b7)]({instanceName:_0x27281e},_0x4aae44){const _0xe5ac0e=a0_0x490cab;return await this['waMonitor']['waInstances'][_0x27281e]['updateProfileName'](_0x4aae44[_0xe5ac0e(0x149)]);}async[a0_0x490cab(0x659)]({instanceName:_0x138332},_0x9155f0){const _0x57737a=a0_0x490cab;return await this[_0x57737a(0x245)][_0x57737a(0x23b)][_0x138332][_0x57737a(0x659)](_0x9155f0[_0x57737a(0x526)]);}async[a0_0x490cab(0x6c8)]({instanceName:_0x29796d},_0x6a7f5){const _0x59ea8d=a0_0x490cab;return await this[_0x59ea8d(0x245)][_0x59ea8d(0x23b)][_0x29796d][_0x59ea8d(0x6c8)](_0x6a7f5[_0x59ea8d(0x426)]);}async[a0_0x490cab(0x625)]({instanceName:_0x230928},_0x30cc68){const _0x43046a=a0_0x490cab;return await this[_0x43046a(0x245)][_0x43046a(0x23b)][_0x230928][_0x43046a(0x625)]();}},Kt=require(a0_0x490cab(0x21f)),Qt=class u{constructor(_0x281e80,_0x19849e,_0x35f1e1,_0x5b3f9a,_0x103044){const _0x29cd54=a0_0x490cab;this['waMonitor']=_0x281e80,this[_0x29cd54(0x3ec)]=_0x19849e,this[_0x29cd54(0x261)]=_0x35f1e1,this['eventEmitter']=_0x5b3f9a,this[_0x29cd54(0x74b)]=_0x103044,this[_0x29cd54(0x21e)]=new $(u[_0x29cd54(0x149)]);}async[a0_0x490cab(0x531)]({instanceName:_0x4c6fec,apikey:_0x8b28e3,number:_0x181506,proxy:_0x30e66b=!0x0}){const _0x133da7=a0_0x490cab;try{let _0x27a128=new Ne(this[_0x133da7(0x3ec)],this[_0x133da7(0x28d)],this[_0x133da7(0x261)]);_0x27a128[_0x133da7(0x629)]=_0x4c6fec,this['waMonitor']['waInstances'][_0x27a128[_0x133da7(0x629)]]=_0x27a128;let _0x4ca71c={};_0x8b28e3?(await this['repository'][_0x133da7(0x42a)]['create']({'apikey':_0x8b28e3},_0x4c6fec),_0x4ca71c['apikey']=_0x8b28e3):_0x4ca71c=await this[_0x133da7(0x74b)][_0x133da7(0x389)]({'instanceName':_0x27a128['instanceName']});let _0x74527b;if(_0x181506){if(_0x74527b=await this[_0x133da7(0x741)](_0x181506),_0x74527b[_0x133da7(0x7a9)])throw new x(_0x74527b['error'][_0x133da7(0x751)]());_0x181506=_0x74527b['number'];}let _0x31acd7;return await _0x27a128[_0x133da7(0x193)](_0x181506),await(0x0,Kt[_0x133da7(0x4a8)])(0xfa0),_0x181506&&await(0x0,Kt[_0x133da7(0x4a8)])(0xbb8),_0x31acd7=_0x27a128[_0x133da7(0x53a)],{'instance':{'instanceName':_0x27a128[_0x133da7(0x629)],'status':_0x133da7(0x4eb)},'hash':_0x4ca71c,'qrcode':_0x31acd7};}catch(_0x4cefd9){throw this[_0x133da7(0x21e)]['error'](_0x4cefd9),_0x4cefd9;}}async[a0_0x490cab(0x204)]({instanceName:_0x231616,number:_0x1fc368=null}){const _0x4df472=a0_0x490cab;try{let _0x30ba37=this[_0x4df472(0x245)][_0x4df472(0x23b)][_0x231616];switch(_0x30ba37?.[_0x4df472(0x56e)]?.['state']){case _0x4df472(0x496):return await _0x30ba37[_0x4df472(0x193)](_0x1fc368),await(0x0,Kt[_0x4df472(0x4a8)])(0x7d0),_0x30ba37[_0x4df472(0x53a)];case _0x4df472(0x501):return _0x30ba37[_0x4df472(0x53a)];default:return await this['connectionState']({'instanceName':_0x231616});}}catch(_0x851db4){this[_0x4df472(0x21e)]['log'](_0x851db4);}}async[a0_0x490cab(0x3d2)]({instanceName:_0x22538c}){const _0x4c4be4=a0_0x490cab;let _0x129a1f=this['waMonitor'][_0x4c4be4(0x23b)][_0x22538c][_0x4c4be4(0x56e)],_0x846c11=null;_0x129a1f['state']===_0x4c4be4(0x1b9)&&_0x22538c&&(_0x846c11=await this[_0x4c4be4(0x245)][_0x4c4be4(0x5ef)](_0x22538c));let _0x371953=null;return _0x129a1f[_0x4c4be4(0x64d)]===_0x4c4be4(0x501)&&_0x22538c&&(_0x371953=this[_0x4c4be4(0x245)][_0x4c4be4(0x23b)][_0x22538c][_0x4c4be4(0x53a)]),{'instance':_0x22538c,'connectionStatus':_0x129a1f,'instanceInfo':_0x846c11,'qrcode':_0x371953};}async[a0_0x490cab(0x741)](_0x5835de){const _0x36a487=a0_0x490cab;_0x5835de=_0x5835de['replace'](/\D/g,'');let _0x372594=Object[_0x36a487(0x66a)](this[_0x36a487(0x245)][_0x36a487(0x23b)])['filter'](_0x1fd842=>{const _0x22db13=_0x36a487;let _0x161094=this['waMonitor'][_0x22db13(0x23b)][_0x1fd842];return _0x161094&&_0x161094[_0x22db13(0x56e)]&&_0x161094[_0x22db13(0x56e)][_0x22db13(0x64d)]===_0x22db13(0x1b9);});if(_0x372594[_0x36a487(0x587)]===0x0)return{'number':this[_0x36a487(0x4e8)](_0x5835de)};let _0x2725c8=Math['floor'](Math[_0x36a487(0x458)]()*_0x372594[_0x36a487(0x587)]),_0x2cc075=_0x372594[_0x2725c8];try{let _0x59a666=(await this[_0x36a487(0x245)]['waInstances'][_0x2cc075][_0x36a487(0x3d6)]({'numbers':[_0x5835de]}))['shift']();return _0x59a666[_0x36a487(0x232)]?{'number':_0x59a666['jid']['replace'](_0x36a487(0x119),'')}:{'number':_0x5835de,'error':_0x36a487(0x1b1)};}catch(_0x1d8418){return this[_0x36a487(0x21e)][_0x36a487(0x7a9)](_0x36a487(0x31b)+_0x1d8418),{'number':_0x5835de,'error':'Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.'};}}[a0_0x490cab(0x4e8)](_0x54ee5e){const _0x4c44b8=a0_0x490cab;let _0x473a79=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x4c44b8(0x7b8)](_0x54ee5e);if(_0x473a79&&_0x473a79[0x1]==='55'){let _0x29fe4b=_0x473a79[0x2],_0x2ea918=_0x473a79[0x3],_0x3e99eb=_0x473a79[0x4];if(parseInt(_0x29fe4b)>=0x1f&&_0x2ea918==='9')return _0x473a79[0x1]+_0x29fe4b+_0x3e99eb;}return _0x54ee5e;}async[a0_0x490cab(0x686)]({instanceName:_0x4d3bfc}){const _0x279a7c=a0_0x490cab;try{return this[_0x279a7c(0x245)][_0x279a7c(0x23b)][_0x4d3bfc]?.[_0x279a7c(0x386)]?.['ws']?.[_0x279a7c(0x496)](),{'status':_0x279a7c(0x31f),'error':!0x1,'response':{'message':_0x279a7c(0x565)}};}catch(_0x477b34){this[_0x279a7c(0x21e)][_0x279a7c(0x7a9)](_0x477b34);}}async[a0_0x490cab(0x604)]({instanceName:_0x1af1da}){const _0x16817f=a0_0x490cab;return _0x1af1da?this[_0x16817f(0x245)][_0x16817f(0x5ef)](_0x1af1da):this[_0x16817f(0x245)][_0x16817f(0x5ef)]();}async['logout']({instanceName:_0x528a02}){const _0x43ded6=a0_0x490cab;try{return await this['waMonitor']['waInstances'][_0x528a02]?.[_0x43ded6(0x386)]?.[_0x43ded6(0x1a3)](_0x43ded6(0x7c7)+_0x528a02),{'error':!0x1,'message':_0x43ded6(0x5d0)};}catch(_0x2b34c2){throw new x(_0x2b34c2['toString']());}}async[a0_0x490cab(0x422)]({instanceName:_0x107fa9}){const _0x2bc3dd=a0_0x490cab;if((await this[_0x2bc3dd(0x3d2)]({'instanceName':_0x107fa9}))[_0x2bc3dd(0x56e)][_0x2bc3dd(0x64d)]==='open')throw new m(['Deletion\x20failed',_0x2bc3dd(0x762)]);try{return delete this[_0x2bc3dd(0x245)]['waInstances'][_0x107fa9],{'error':!0x1,'message':_0x2bc3dd(0x243)};}catch(_0x435a88){throw new m(_0x435a88[_0x2bc3dd(0x751)]());}}},ie=require(a0_0x490cab(0x486)),Yt=class{constructor(_0x48c4ae){this['waMonitor']=_0x48c4ae;}async['sendText']({instanceName:_0x682502},_0xdf88ae){const _0x4695dc=a0_0x490cab;return await this[_0x4695dc(0x245)]['waInstances'][_0x682502][_0x4695dc(0x59e)](_0xdf88ae);}async[a0_0x490cab(0x5bb)]({instanceName:_0x23974b},_0x86e0e7){const _0x5271ea=a0_0x490cab;return await this[_0x5271ea(0x245)]['waInstances'][_0x23974b][_0x5271ea(0x523)](_0x86e0e7);}async[a0_0x490cab(0x255)]({instanceName:_0x1f7e0b},_0x3d15a1){const _0x3f3313=a0_0x490cab;if((0x0,ie[_0x3f3313(0x747)])(_0x3d15a1?.[_0x3f3313(0x2c7)]?.[_0x3f3313(0x286)])&&!_0x3d15a1?.[_0x3f3313(0x2c7)]?.['fileName'])throw new m('For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.');if((0x0,ie[_0x3f3313(0x313)])(_0x3d15a1?.[_0x3f3313(0x2c7)]?.[_0x3f3313(0x286)])||(0x0,ie['isBase64'])(_0x3d15a1?.[_0x3f3313(0x2c7)]?.[_0x3f3313(0x286)]))return await this['waMonitor']['waInstances'][_0x1f7e0b][_0x3f3313(0x2c7)](_0x3d15a1);throw new m(_0x3f3313(0x205));}async[a0_0x490cab(0x380)]({instanceName:_0x16c21a},_0x1abd23){const _0x24c98a=a0_0x490cab;if((0x0,ie[_0x24c98a(0x313)])(_0x1abd23[_0x24c98a(0x652)]['image'])||(0x0,ie[_0x24c98a(0x747)])(_0x1abd23[_0x24c98a(0x652)]['image']))return await this[_0x24c98a(0x245)][_0x24c98a(0x23b)][_0x16c21a][_0x24c98a(0x1ba)](_0x1abd23);throw new m(_0x24c98a(0x205));}async[a0_0x490cab(0x755)]({instanceName:_0xb1a217},_0x4d2fc0){const _0x2d179e=a0_0x490cab;if((0x0,ie[_0x2d179e(0x313)])(_0x4d2fc0[_0x2d179e(0x5eb)][_0x2d179e(0x70d)])||(0x0,ie[_0x2d179e(0x747)])(_0x4d2fc0[_0x2d179e(0x5eb)]['audio']))return await this[_0x2d179e(0x245)][_0x2d179e(0x23b)][_0xb1a217]['audioWhatsapp'](_0x4d2fc0);throw new m(_0x2d179e(0x205));}async[a0_0x490cab(0x6ce)]({instanceName:_0x3089dc},_0x48ba80){const _0x9d80e6=a0_0x490cab;if((0x0,ie[_0x9d80e6(0x747)])(_0x48ba80[_0x9d80e6(0x353)][_0x9d80e6(0x2c7)]?.[_0x9d80e6(0x286)])&&!_0x48ba80[_0x9d80e6(0x353)][_0x9d80e6(0x2c7)]?.['fileName'])throw new m(_0x9d80e6(0x729));return await this[_0x9d80e6(0x245)][_0x9d80e6(0x23b)][_0x3089dc][_0x9d80e6(0x353)](_0x48ba80);}async[a0_0x490cab(0x560)]({instanceName:_0x2c6f9c},_0x3df023){const _0x3171a5=a0_0x490cab;return await this[_0x3171a5(0x245)][_0x3171a5(0x23b)][_0x2c6f9c][_0x3171a5(0x6d1)](_0x3df023);}async[a0_0x490cab(0x405)]({instanceName:_0x3f19e7},_0xa2746d){const _0x541fcf=a0_0x490cab;return await this[_0x541fcf(0x245)]['waInstances'][_0x3f19e7][_0x541fcf(0x7e3)](_0xa2746d);}async[a0_0x490cab(0x17b)]({instanceName:_0x53fb8d},_0x60a8a0){const _0x1b2c4b=a0_0x490cab;return await this[_0x1b2c4b(0x245)]['waInstances'][_0x53fb8d][_0x1b2c4b(0x731)](_0x60a8a0);}async[a0_0x490cab(0x2c2)]({instanceName:_0x23d7f2},_0x4f6e4a){const _0xee88e4=a0_0x490cab;return await this[_0xee88e4(0x245)][_0xee88e4(0x23b)][_0x23d7f2][_0xee88e4(0x143)](_0x4f6e4a);}async['sendReaction']({instanceName:_0x2ebb09},_0xe03c35){const _0x54f1d6=a0_0x490cab;if(!_0xe03c35[_0x54f1d6(0x738)]['reaction']['match'](/[^\(\)\w\sà-ú"-\+]+/))throw new m(_0x54f1d6(0x3dc));return await this[_0x54f1d6(0x245)][_0x54f1d6(0x23b)][_0x2ebb09][_0x54f1d6(0x738)](_0xe03c35);}async[a0_0x490cab(0x48c)]({instanceName:_0x29daef},_0x2d7125){const _0x589f84=a0_0x490cab;return await this['waMonitor'][_0x589f84(0x23b)][_0x29daef]['statusMessage'](_0x2d7125);}},ki=require('jsonwebtoken'),Us=require('uuid'),Xt=class u{constructor(_0x441338,_0x7996c4,_0x1fd59c){const _0x3f72ca=a0_0x490cab;this[_0x3f72ca(0x3ec)]=_0x441338,this[_0x3f72ca(0x245)]=_0x7996c4,this['repository']=_0x1fd59c,this['logger']=new $(u['name']);}async[a0_0x490cab(0x6dc)](_0x6286a4){const _0x52c97f=a0_0x490cab;let _0x22f54d=this['configService'][_0x52c97f(0x715)](_0x52c97f(0x448))[_0x52c97f(0x74e)],_0x2124d5=(0x0,ki[_0x52c97f(0x398)])({'instanceName':_0x6286a4[_0x52c97f(0x629)],'apiName':rt,'tokenId':(0x0,Us['v4'])()},_0x22f54d[_0x52c97f(0x716)],{'expiresIn':_0x22f54d['EXPIRIN_IN'],'encoding':_0x52c97f(0x2c3),'subject':_0x52c97f(0x3c9)}),_0x5b90ff=await this[_0x52c97f(0x261)][_0x52c97f(0x42a)][_0x52c97f(0x14c)]({'jwt':_0x2124d5},_0x6286a4[_0x52c97f(0x629)]);if(_0x5b90ff['error'])throw this[_0x52c97f(0x21e)][_0x52c97f(0x7a9)]({'localError':u[_0x52c97f(0x149)]+'.jwt','error':_0x5b90ff['error']}),new m(_0x52c97f(0x16e),_0x5b90ff[_0x52c97f(0x7a9)]?.[_0x52c97f(0x751)]());return{'jwt':_0x2124d5};}async[a0_0x490cab(0x642)](_0x217d80){const _0x116641=a0_0x490cab;let _0x469235=(0x0,Us['v4'])()[_0x116641(0x551)](),_0x27eb01=await this['repository'][_0x116641(0x42a)]['create']({'apikey':_0x469235},_0x217d80[_0x116641(0x629)]);if(_0x27eb01['error'])throw this['logger'][_0x116641(0x7a9)]({'localError':u['name']+'.jwt','error':_0x27eb01[_0x116641(0x7a9)]}),new m(_0x116641(0x16e),_0x27eb01['error']?.[_0x116641(0x751)]());return{'apikey':_0x469235};}async[a0_0x490cab(0x389)](_0x1a4a13){const _0x255f1a=a0_0x490cab;let _0x11524=this[_0x255f1a(0x3ec)][_0x255f1a(0x715)](_0x255f1a(0x448));return await this[_0x11524[_0x255f1a(0x6ca)]](_0x1a4a13);}},Zt=class{constructor(_0x4e9203){const _0x9ed121=a0_0x490cab;this[_0x9ed121(0x245)]=_0x4e9203;}async[a0_0x490cab(0x35e)](_0x27f7b4,_0x2c5016){const _0x4033a1=a0_0x490cab;return await this[_0x4033a1(0x245)]['waInstances'][_0x27f7b4[_0x4033a1(0x629)]][_0x4033a1(0x35e)](_0x2c5016);}async[a0_0x490cab(0x489)](_0x33e4fc,_0x2e3459){const _0x5b2be2=a0_0x490cab;return await this[_0x5b2be2(0x245)]['waInstances'][_0x33e4fc[_0x5b2be2(0x629)]][_0x5b2be2(0x489)](_0x2e3459);}async[a0_0x490cab(0x1e4)](_0x216ff7,_0x58d693){const _0x3d7db3=a0_0x490cab;return await this[_0x3d7db3(0x245)][_0x3d7db3(0x23b)][_0x216ff7[_0x3d7db3(0x629)]][_0x3d7db3(0x1e4)](_0x58d693);}async[a0_0x490cab(0x7e4)](_0x1b7cd5,_0x1f210c){const _0x1c057f=a0_0x490cab;return await this['waMonitor']['waInstances'][_0x1b7cd5[_0x1c057f(0x629)]][_0x1c057f(0x7e4)](_0x1f210c);}async[a0_0x490cab(0x2ff)](_0x3f6315,_0x3ad53f){const _0x36cb51=a0_0x490cab;return await this['waMonitor'][_0x36cb51(0x23b)][_0x3f6315['instanceName']][_0x36cb51(0x2ff)](_0x3ad53f);}async['groupSetting'](_0x283004,_0x40fb41){const _0x27e882=a0_0x490cab;return await this[_0x27e882(0x245)][_0x27e882(0x23b)][_0x283004[_0x27e882(0x629)]][_0x27e882(0x6c6)](_0x40fb41);}async[a0_0x490cab(0x6bf)](_0x725b49,_0x53f322){const _0x4f79c9=a0_0x490cab;return await this[_0x4f79c9(0x245)][_0x4f79c9(0x23b)][_0x725b49[_0x4f79c9(0x629)]]['findGroup'](_0x53f322);}async[a0_0x490cab(0x18a)](_0x53fd09){const _0x505f46=a0_0x490cab;return await this[_0x505f46(0x245)]['waInstances'][_0x53fd09['instanceName']][_0x505f46(0x18a)]();}async[a0_0x490cab(0x4af)](_0x3c8dc7,_0x509d4b){const _0x22235c=a0_0x490cab;return await this[_0x22235c(0x245)]['waInstances'][_0x3c8dc7[_0x22235c(0x629)]][_0x22235c(0x4af)](_0x509d4b);}async[a0_0x490cab(0x36a)](_0x1b6ed2,_0x5ab85c){const _0x4d1a65=a0_0x490cab;return await this[_0x4d1a65(0x245)][_0x4d1a65(0x23b)][_0x1b6ed2[_0x4d1a65(0x629)]]['joinGroup'](_0x5ab85c);}async[a0_0x490cab(0x112)](_0x2ecf11,_0x169d5c){const _0x151d99=a0_0x490cab;return await this[_0x151d99(0x245)]['waInstances'][_0x2ecf11[_0x151d99(0x629)]]['groupGetInviteInfo'](_0x169d5c);}async[a0_0x490cab(0x740)](_0xda15db,_0x74e6b6){const _0x1a86ee=a0_0x490cab;return await this[_0x1a86ee(0x245)][_0x1a86ee(0x23b)][_0xda15db[_0x1a86ee(0x629)]][_0x1a86ee(0x740)](_0x74e6b6);}async['findParticipants'](_0x5b4bb4,_0x31f0d9){const _0x2d09bf=a0_0x490cab;return await this[_0x2d09bf(0x245)][_0x2d09bf(0x23b)][_0x5b4bb4[_0x2d09bf(0x629)]]['findParticipants'](_0x31f0d9);}async['updateGParticipate'](_0x59786e,_0x4e3f3f){const _0x3d23d6=a0_0x490cab;return await this[_0x3d23d6(0x245)][_0x3d23d6(0x23b)][_0x59786e[_0x3d23d6(0x629)]][_0x3d23d6(0x6f4)](_0x4e3f3f);}async[a0_0x490cab(0x6ba)](_0x528193,_0x43a224){const _0x2f7c19=a0_0x490cab;return await this[_0x2f7c19(0x245)][_0x2f7c19(0x23b)][_0x528193[_0x2f7c19(0x629)]][_0x2f7c19(0x6ba)](_0x43a224);}async['leaveGroup'](_0x2f0826,_0x4c02b3){const _0x127477=a0_0x490cab;return await this[_0x127477(0x245)][_0x127477(0x23b)][_0x2f0826[_0x127477(0x629)]][_0x127477(0x213)](_0x4c02b3);}},es=class{constructor(_0x1d68d9){const _0x3c2775=a0_0x490cab;this[_0x3c2775(0x245)]=_0x1d68d9;}[a0_0x490cab(0x14c)](_0x51dd09,_0x59e3d5){const _0xfd5297=a0_0x490cab;return this[_0xfd5297(0x245)][_0xfd5297(0x23b)][_0x51dd09['instanceName']][_0xfd5297(0x633)](_0x59e3d5);}async['find'](_0x21f324){const _0x490d5e=a0_0x490cab;try{return await this[_0x490d5e(0x245)][_0x490d5e(0x23b)][_0x21f324[_0x490d5e(0x629)]][_0x490d5e(0x2b3)]();}catch{return{'enabled':null,'url':''};}}},Gp=new $('FlowController'),ts=class{constructor(_0x3fe2ed){const _0x468ecf=a0_0x490cab;this[_0x468ecf(0x245)]=_0x3fe2ed;}async[a0_0x490cab(0x22b)](_0x1bd768,_0x5ccda9){const _0x29ae4e=a0_0x490cab;return await this[_0x29ae4e(0x245)][_0x29ae4e(0x23b)][_0x1bd768[_0x29ae4e(0x629)]][_0x29ae4e(0x22b)](_0x5ccda9);}async[a0_0x490cab(0x757)](_0x38ff57){const _0x4ba6da=a0_0x490cab;return await this['waMonitor'][_0x4ba6da(0x23b)][_0x38ff57[_0x4ba6da(0x629)]]['getScheduleMessage']();}async[a0_0x490cab(0x160)](_0x3309f3){const _0x5625a0=a0_0x490cab;return await this[_0x5625a0(0x245)][_0x5625a0(0x23b)][_0x3309f3['instanceName']][_0x5625a0(0x160)]();}async['getAutomateSystem'](_0x1c1e53){const _0x3a358c=a0_0x490cab;return await this['waMonitor'][_0x3a358c(0x23b)][_0x1c1e53[_0x3a358c(0x629)]][_0x3a358c(0x2f2)]();}async[a0_0x490cab(0x349)](_0x35d83a,_0x45bcd7){const _0x3971e6=a0_0x490cab;return await this[_0x3971e6(0x245)][_0x3971e6(0x23b)][_0x35d83a[_0x3971e6(0x629)]][_0x3971e6(0x349)](_0x45bcd7);}async[a0_0x490cab(0x591)](_0x4ac8a2,_0x2d57b0){const _0x888be=a0_0x490cab;return await this[_0x888be(0x245)][_0x888be(0x23b)][_0x4ac8a2['instanceName']][_0x888be(0x591)](_0x2d57b0);}async['updateAutoCompleteMessages'](_0x7d914d,_0x7ef679){const _0x353836=a0_0x490cab;return await this[_0x353836(0x245)]['waInstances'][_0x7d914d['instanceName']][_0x353836(0x3c1)](_0x7ef679);}async[a0_0x490cab(0x828)](_0x195bb0,_0x2dacfd){const _0x2a9269=a0_0x490cab;return await this[_0x2a9269(0x245)][_0x2a9269(0x23b)][_0x195bb0['instanceName']][_0x2a9269(0x828)](_0x2dacfd);}async[a0_0x490cab(0x66b)](_0x34ce39,_0x15a610){const _0x57850b=a0_0x490cab;return await this[_0x57850b(0x245)][_0x57850b(0x23b)][_0x34ce39[_0x57850b(0x629)]][_0x57850b(0x66b)](_0x15a610);}async[a0_0x490cab(0x1fa)](_0x109add,_0x270e51,_0x308607,_0x60446a){const _0x282fab=a0_0x490cab;return await this[_0x282fab(0x245)][_0x282fab(0x23b)][_0x109add]['startFlowWebhook'](_0x270e51,_0x308607,_0x60446a);}async[a0_0x490cab(0x797)](_0x367af7,_0x45e6db){const _0x2e7c76=a0_0x490cab;return await this[_0x2e7c76(0x245)][_0x2e7c76(0x23b)][_0x367af7[_0x2e7c76(0x629)]]['getConversation'](_0x45e6db);}async[a0_0x490cab(0x542)](_0x191752,_0x46585f){const _0xdbfa9e=a0_0x490cab;return await this[_0xdbfa9e(0x245)]['waInstances'][_0x191752[_0xdbfa9e(0x629)]]['fetchConversation'](_0x46585f);}async[a0_0x490cab(0x5c0)](_0xbe1b58,_0x1d05c6){const _0x6d4b28=a0_0x490cab;return await this[_0x6d4b28(0x245)][_0x6d4b28(0x23b)][_0xbe1b58[_0x6d4b28(0x629)]][_0x6d4b28(0x5c0)](_0x1d05c6);}async[a0_0x490cab(0x237)](_0x5ded0e,_0xea8ecb){const _0x1b2a68=a0_0x490cab;return await this[_0x1b2a68(0x245)][_0x1b2a68(0x23b)][_0x5ded0e[_0x1b2a68(0x629)]][_0x1b2a68(0x237)](_0xea8ecb);}async[a0_0x490cab(0x6a3)](_0x316bb8,_0x32079e){const _0x57f944=a0_0x490cab;return await this[_0x57f944(0x245)][_0x57f944(0x23b)][_0x316bb8[_0x57f944(0x629)]][_0x57f944(0x6a3)](_0x32079e[_0x57f944(0x215)]);}async['createFlow'](_0x5c7275,_0x1d5abd,_0x5753e2){const _0x2927b1=a0_0x490cab;return await this[_0x2927b1(0x245)][_0x2927b1(0x23b)][_0x5c7275[_0x2927b1(0x629)]]['createFlow'](_0x1d5abd,_0x5753e2);}async['editFlow'](_0x902823,_0x1319c4,_0x45d8d2){const _0x27fdfd=a0_0x490cab;return await this['waMonitor'][_0x27fdfd(0x23b)][_0x902823['instanceName']]['editFlow'](_0x1319c4,_0x45d8d2);}async['editFlowBlock'](_0x286850,_0x35f0b5){const _0x4ceb39=a0_0x490cab;return await this['waMonitor']['waInstances'][_0x286850[_0x4ceb39(0x629)]][_0x4ceb39(0x571)](_0x35f0b5);}async[a0_0x490cab(0x5b8)](_0x411d81,_0x17907b){const _0x393e71=a0_0x490cab;return await this[_0x393e71(0x245)][_0x393e71(0x23b)][_0x411d81[_0x393e71(0x629)]][_0x393e71(0x5b8)](_0x17907b);}async[a0_0x490cab(0x78c)](_0x4829b6,_0x14ff15){const _0x2b9b1d=a0_0x490cab;return await this['waMonitor'][_0x2b9b1d(0x23b)][_0x4829b6[_0x2b9b1d(0x629)]]['editFlowGroup'](_0x14ff15);}async[a0_0x490cab(0x234)](_0x3b88aa,_0x717012){const _0x2f5978=a0_0x490cab;return await this['waMonitor']['waInstances'][_0x3b88aa[_0x2f5978(0x629)]][_0x2f5978(0x234)](_0x717012);}async[a0_0x490cab(0x527)](_0x455246,_0x245540){const _0x161f8d=a0_0x490cab;return await this[_0x161f8d(0x245)][_0x161f8d(0x23b)][_0x455246[_0x161f8d(0x629)]][_0x161f8d(0x527)](_0x245540);}async[a0_0x490cab(0x372)](_0x411abf,_0x1635f5){const _0x5184a3=a0_0x490cab;return await this[_0x5184a3(0x245)][_0x5184a3(0x23b)][_0x411abf[_0x5184a3(0x629)]][_0x5184a3(0x372)](_0x1635f5);}async[a0_0x490cab(0x246)](_0x2106e1,_0x26639e){const _0x24fbd0=a0_0x490cab;return await this['waMonitor'][_0x24fbd0(0x23b)][_0x2106e1[_0x24fbd0(0x629)]][_0x24fbd0(0x246)](_0x26639e);}async[a0_0x490cab(0x5fe)](_0x4ae8d1){const _0x35e00c=a0_0x490cab;return await this[_0x35e00c(0x245)][_0x35e00c(0x23b)][_0x4ae8d1['instanceName']][_0x35e00c(0x5fe)]();}},ss=class{constructor(_0x422c92){this['webhookService']=_0x422c92;}async[a0_0x490cab(0x26c)](_0x7a4b3e,_0x23083e){const _0x461adb=a0_0x490cab;return this[_0x461adb(0x19f)][_0x461adb(0x14c)](_0x7a4b3e,_0x23083e);}async[a0_0x490cab(0x2b3)](_0x59fdc4){const _0xe92750=a0_0x490cab;return this[_0xe92750(0x19f)][_0xe92750(0x5f9)](_0x59fdc4);}},as=class extends _{constructor(_0x6586e8,_0x2a5dba){const _0x5b6135=a0_0x490cab;super(_0x2a5dba),this[_0x5b6135(0x151)]=_0x6586e8,this[_0x5b6135(0x3ec)]=_0x2a5dba;}async[a0_0x490cab(0x14c)](_0x1def0e,_0x3ac3ca){const _0x17bba9=a0_0x490cab;try{return this[_0x17bba9(0x836)][_0x17bba9(0x3c3)]?{'insertCount':(await this['webhookModel'][_0x17bba9(0x5ff)]({'_id':_0x3ac3ca},{..._0x1def0e},{'upsert':!0x0}))[_0x17bba9(0x518)]}:{'insertCount':0x1};}catch(_0x24c66d){return _0x24c66d;}}async['delete'](_0x52b0b4){const _0x228a12=a0_0x490cab;try{if(this[_0x228a12(0x836)][_0x228a12(0x3c3)]){await this['webhookModel']['deleteOne']({'_id':_0x52b0b4});return;}}catch(_0x310a82){return{'error':_0x310a82};}}async[a0_0x490cab(0x5f9)](_0x524692){const _0x2a3c06=a0_0x490cab;try{if(this[_0x2a3c06(0x836)][_0x2a3c06(0x3c3)])return await this[_0x2a3c06(0x151)]['findOne']({'_id':_0x524692});}catch{return{};}}},is=class extends _{constructor(_0x9f8574,_0x1ea334){const _0x2e7a8c=a0_0x490cab;super(_0x1ea334),this[_0x2e7a8c(0x31d)]=_0x9f8574,this[_0x2e7a8c(0x3ec)]=_0x1ea334,this[_0x2e7a8c(0x42a)]=_0x1ea334['get'](_0x2e7a8c(0x448));}async[a0_0x490cab(0x14c)](_0x35c032,_0x3098fc){const _0x4adeb5=a0_0x490cab;try{if(this['dbSettings'][_0x4adeb5(0x3c3)])return{'insertCount':(await this[_0x4adeb5(0x31d)][_0x4adeb5(0x341)]({'_id':_0x3098fc},{'$set':{..._0x35c032}},{'upsert':!0x0}))[_0x4adeb5(0x518)]};}catch(_0x4a4aa2){return{'error':_0x4a4aa2};}}async['updateAll'](_0x4c7c87,_0x5052f0){const _0x359514=a0_0x490cab;try{if(this['dbSettings'][_0x359514(0x3c3)])return{'insertCount':(await this[_0x359514(0x31d)]['updateMany'](_0x4c7c87,{'$set':_0x5052f0},{'upsert':!0x1}))[_0x359514(0x518)]};throw new Error(_0x359514(0x52c));}catch(_0x1a3b2a){return{'error':_0x1a3b2a};}}async[a0_0x490cab(0x46a)](_0x41529b){const _0x503496=a0_0x490cab;try{if(this[_0x503496(0x836)]['ENABLED'])return{'insertCount':(await this[_0x503496(0x31d)]['deleteMany'](_0x41529b))[_0x503496(0x717)]};throw new Error(_0x503496(0x34b));}catch(_0x145b6f){return{'error':_0x145b6f};}}async[a0_0x490cab(0x75b)](_0x4a3e63){const _0x4a75e4=a0_0x490cab;try{if(this[_0x4a75e4(0x836)][_0x4a75e4(0x3c3)]){await this['authModel'][_0x4a75e4(0x7b4)]({'_id':_0x4a3e63});return;}}catch(_0x27cdfd){return{'error':_0x27cdfd};}}async['find'](_0x45ee18){const _0x31cbbe=a0_0x490cab;try{if(this[_0x31cbbe(0x836)][_0x31cbbe(0x3c3)])return await this['authModel'][_0x31cbbe(0x2cd)]({'_id':_0x45ee18});}catch{return{};}}async['findAll'](){const _0x616341=a0_0x490cab;try{if(this[_0x616341(0x836)]['ENABLED'])return await this[_0x616341(0x31d)]['find']();}catch{return[];}}async[a0_0x490cab(0x2d0)](_0x40d6d1){const _0x35a876=a0_0x490cab;try{if(this[_0x35a876(0x836)]['ENABLED'])return await this[_0x35a876(0x31d)][_0x35a876(0x5f9)](_0x40d6d1);}catch{return[];}}},os=class extends _{async['deleteOne'](_0x1dc785){const _0x289493=a0_0x490cab;try{let _0x26438f=I(_0x1dc785[_0x289493(0x83d)]);return{'deletedCount':(await Me[_0x289493(0x7b4)](_0x26438f))[_0x289493(0x717)]};}catch(_0xdc722b){return{'error':_0xdc722b?.[_0x289493(0x751)]()};}}async['updateOne'](_0x478ad2,_0x1f0854){const _0x5c1bef=a0_0x490cab;try{let _0x2fde6c=await Me[_0x5c1bef(0x218)](_0x478ad2);return _0x2fde6c?(Object[_0x5c1bef(0x17e)](_0x2fde6c,_0x1f0854),await _0x2fde6c[_0x5c1bef(0x78e)]()):(console[_0x5c1bef(0x7a9)]('Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:',_0x478ad2),null);}catch(_0x15e455){return console[_0x5c1bef(0x7a9)](_0x5c1bef(0x75f),_0x15e455),null;}}async[a0_0x490cab(0x3ff)](_0x39f1c6){const _0x5595f6=a0_0x490cab;try{return await new Me(_0x39f1c6)['save']();}catch(_0x3b0e8d){return console['error'](_0x5595f6(0x7f2),_0x3b0e8d),null;}}async[a0_0x490cab(0x609)](_0x1ddb64){const _0x382339=a0_0x490cab;try{let _0x57766b=_0x1ddb64['where']??{};return await Me[_0x382339(0x5f9)](_0x57766b)['limit'](_0x1ddb64[_0x382339(0x344)]??0x0)[_0x382339(0x700)]();}catch(_0x4d2540){return console[_0x382339(0x7a9)](_0x382339(0x184),_0x4d2540),[];}}async[a0_0x490cab(0x2cd)](_0x5f2c56){const _0x431cb4=a0_0x490cab;try{let _0x4c0853=I(_0x5f2c56['where']);return await Me['findOne'](_0x4c0853)[_0x431cb4(0x700)]();}catch{return null;}}},rs=class extends _{[a0_0x490cab(0x236)](_0x27ad8b){return Ma(_0x27ad8b);}async[a0_0x490cab(0x505)](_0x1482a0){const _0x3b9475=a0_0x490cab;if(_0x1482a0['length']!==0x0)try{return{'insertCount':(await this[_0x3b9475(0x236)](_0x1482a0[0x0]['owner'])['insertMany']([..._0x1482a0]))[_0x3b9475(0x587)]};}catch(_0x5171ce){return _0x5171ce;}}async[a0_0x490cab(0x75b)](_0x5075df,_0x2f5bc8){const _0x44a1da=a0_0x490cab;try{let _0x3e3470=this[_0x44a1da(0x236)](_0x2f5bc8),_0x18132f=I(_0x5075df[_0x44a1da(0x83d)]);return{'deletedCount':(await _0x3e3470['deleteMany'](_0x18132f))['deletedCount']};}catch(_0x2f309a){return{'error':_0x2f309a?.[_0x44a1da(0x751)]()};}}async[a0_0x490cab(0x7b4)](_0x2b91a1,_0x26cd97){const _0x36beba=a0_0x490cab;try{let _0x1b6736=this[_0x36beba(0x236)](_0x26cd97),_0xc6b736=I(_0x2b91a1[_0x36beba(0x83d)]);return{'deletedCount':(await _0x1b6736[_0x36beba(0x7b4)](_0xc6b736))[_0x36beba(0x717)]};}catch(_0xe75faa){return{'error':_0xe75faa?.[_0x36beba(0x751)]()};}}async[a0_0x490cab(0x767)](_0x472bdc,_0xe4e079){const _0x3eafb3=a0_0x490cab;try{if(_0x472bdc[_0x3eafb3(0x587)]===0x0)return;let _0x52fde6=this[_0x3eafb3(0x236)](_0xe4e079),_0x27cc32=_0x472bdc[_0x3eafb3(0x555)](_0xe24e83=>({'updateOne':{'filter':{'name':_0xe24e83['name'],'owner':_0xe4e079},'update':{..._0xe24e83}}})),{modifiedCount:_0x3fbe4a}=await _0x52fde6[_0x3eafb3(0x792)](_0x27cc32);return{'insertCount':_0x3fbe4a};}catch{return;}}async['updateMany'](_0x3a93b4,_0xf54266,_0x38cef0){const _0x49dfc3=a0_0x490cab;try{return{'modifiedCount':(await this[_0x49dfc3(0x236)](_0x38cef0)[_0x49dfc3(0x459)](_0x3a93b4,{'$set':_0xf54266})[_0x49dfc3(0x7b8)]())[_0x49dfc3(0x518)]};}catch(_0xf923aa){return console[_0x49dfc3(0x7a9)](_0x49dfc3(0x635),_0xf923aa),{'error':_0xf923aa};}}async[a0_0x490cab(0x341)](_0x48002b,_0x461b0b,_0x33ffec){const _0x4a860d=a0_0x490cab;try{return await this[_0x4a860d(0x236)](_0x33ffec)['findOneAndUpdate']({'_id':_0x48002b},{'$set':_0x461b0b},{'new':!0x0,'upsert':!0x0})['lean']();}catch(_0x1aced8){return console['error'](_0x1aced8),null;}}async[a0_0x490cab(0x5f9)](_0x5bed4f,_0x4f8337){const _0x475466=a0_0x490cab;try{return await this[_0x475466(0x236)](_0x4f8337)[_0x475466(0x5f9)](_0x5bed4f)['sort']({'lastInteraction':-0x1})['lean']();}catch{return[];}}async[a0_0x490cab(0x2cd)](_0x15e6bf,_0x4cabef){const _0x5906d6=a0_0x490cab;try{return await this[_0x5906d6(0x236)](_0x4cabef)['findOne']({..._0x15e6bf[_0x5906d6(0x83d)]})['lean']();}catch{return null;}}async['deleteAll'](_0x5b7087){const _0x53d7f4=a0_0x490cab;try{return await this[_0x53d7f4(0x236)](_0x5b7087)[_0x53d7f4(0x57f)]['drop'](),{'success':!0x0};}catch(_0x4a869f){return console['error'](_0x4a869f),{'success':!0x1,'error':_0x4a869f};}}},ns=class extends _{[a0_0x490cab(0x1fd)](_0x2e1673){return Ca(_0x2e1673);}async[a0_0x490cab(0x792)](_0x2987fa,_0x2a9da4){const _0x4b1590=a0_0x490cab;try{return await this[_0x4b1590(0x1fd)](_0x2a9da4)[_0x4b1590(0x792)](_0x2987fa);}catch(_0x8f7719){return console[_0x4b1590(0x7a9)]('Erro\x20ao\x20executar\x20bulkWrite:',_0x8f7719),null;}}async[a0_0x490cab(0x3ff)](_0x4bbab3,_0x3f77c7){const _0x47f904=a0_0x490cab;try{let _0x5e3bf6=this[_0x47f904(0x1fd)](_0x3f77c7);return await new _0x5e3bf6(_0x4bbab3)['save']();}catch(_0x22d6df){return console[_0x47f904(0x7a9)](_0x47f904(0x168),_0x22d6df),null;}}async['deleteOne'](_0x3fb5de,_0x1b7b67){const _0x2d8e09=a0_0x490cab;try{return await this['getScheduleMessageModelForOwner'](_0x1b7b67)[_0x2d8e09(0x16d)](_0x3fb5de),{};}catch(_0x26b72f){return{'error':_0x26b72f?.[_0x2d8e09(0x751)]()};}}async[a0_0x490cab(0x341)](_0x8ea12a,_0x385de9,_0x959f08,_0x1e3152={}){const _0x3fd03a=a0_0x490cab;try{return await this[_0x3fd03a(0x1fd)](_0x959f08)[_0x3fd03a(0x412)](_0x8ea12a,_0x385de9,{..._0x1e3152,'new':!0x0})['lean']();}catch(_0x36dcf8){return console[_0x3fd03a(0x7a9)](_0x3fd03a(0x53f),_0x36dcf8),null;}}async[a0_0x490cab(0x7c6)](_0x28aa74,_0x23448e,_0x5e3232){const _0x168ec8=a0_0x490cab;try{return await this[_0x168ec8(0x1fd)](_0x5e3232)[_0x168ec8(0x541)](_0x28aa74,_0x23448e,{'new':!0x0})[_0x168ec8(0x700)]();}catch(_0x341085){return console[_0x168ec8(0x7a9)]('Erro\x20ao\x20atualizar\x20uma\x20mensagem:',_0x341085),null;}}async[a0_0x490cab(0x5f9)](_0x540ffc,_0x55193c){const _0x54744e=a0_0x490cab;try{return await this[_0x54744e(0x1fd)](_0x55193c)[_0x54744e(0x5f9)](_0x540ffc[_0x54744e(0x83d)])['limit'](_0x540ffc?.[_0x54744e(0x344)]??0x0)[_0x54744e(0x644)]({'when':0x1})[_0x54744e(0x700)]();}catch{return[];}}async[a0_0x490cab(0x2cd)](_0x366afc,_0x5ca6e5){const _0x4d7e0e=a0_0x490cab;try{return await this[_0x4d7e0e(0x1fd)](_0x5ca6e5)['findOne'](_0x366afc['where'])['sort']({'when':0x1})[_0x4d7e0e(0x700)]();}catch{return null;}}async[a0_0x490cab(0x218)](_0x5821ca,_0x1a2790){const _0x3780e9=a0_0x490cab;try{return await this[_0x3780e9(0x1fd)](_0x1a2790)[_0x3780e9(0x218)](_0x5821ca)[_0x3780e9(0x700)]();}catch{return null;}}async[a0_0x490cab(0x46a)](_0x21dc9e,_0x228da2){const _0x31a6ea=a0_0x490cab;try{return{'deletedCount':(await this['getScheduleMessageModelForOwner'](_0x228da2)[_0x31a6ea(0x46a)](_0x21dc9e))['deletedCount']};}catch(_0x497e85){return console[_0x31a6ea(0x7a9)](_0x31a6ea(0x2c5),_0x497e85),{'error':_0x497e85};}}async[a0_0x490cab(0x3e4)](_0x44d09a){const _0x126f8c=a0_0x490cab;try{return await this['getScheduleMessageModelForOwner'](_0x44d09a)['collection'][_0x126f8c(0x2ad)](),{'success':!0x0};}catch(_0x4ea0cf){return console['error'](_0x4ea0cf),{'success':!0x1,'error':_0x4ea0cf};}}},cs=class extends _{async['update'](_0x41a775,_0x33342c){const _0xfa39de=a0_0x490cab;try{if(this[_0xfa39de(0x836)][_0xfa39de(0x3c3)])return await Ie[_0xfa39de(0x412)]({'_id':_0x33342c},{'$set':_0x41a775},{'new':!0x0});}catch(_0x33852f){throw console[_0xfa39de(0x7a9)]('Erro\x20ao\x20atualizar\x20AutomateSystem:',_0x33852f),_0x33852f;}}async['findOrCreate'](_0x11b1fc){const _0x45c210=a0_0x490cab;try{let _0x4d0f36=await Ie[_0x45c210(0x218)](_0x11b1fc);return _0x4d0f36?_0x4d0f36[_0x45c210(0x1d7)]||(_0x4d0f36[_0x45c210(0x1d7)]=[],await _0x4d0f36[_0x45c210(0x78e)]()):(_0x4d0f36=new Ie({'_id':_0x11b1fc,'autoCompleteMessages':[]}),await _0x4d0f36[_0x45c210(0x78e)]()),_0x4d0f36;}catch(_0x3965b0){return _0x3965b0[_0x45c210(0x6cb)]===0x2af8&&_0x3965b0[_0x45c210(0x253)]&&_0x3965b0[_0x45c210(0x253)]['autoCompleteMessages.command']?(console[_0x45c210(0x7a9)](_0x45c210(0x7b3)),await Ie[_0x45c210(0x57f)][_0x45c210(0x79c)](_0x45c210(0x343)),null):(console[_0x45c210(0x7a9)](_0x45c210(0x765),_0x3965b0),null);}}},Jo=new $(a0_0x490cab(0x57a)),qo=new Ye(b),Vo=new Bt(b),Go=new ct(b),Bo=new Wt(ra,b),Wo=new as(ga,b),zo=new is(da,b),Ho=new ve(ze,b),Ko=new os(b),Qo=new zt(b),Yo=new rs(b),Xo=new ns(b),Zo=new cs(b),fe=new Ke(qo,Vo,Go,Bo,Wo,zo,Ho,Ko,Yo,Qo,Xo,Zo,R?.[a0_0x490cab(0x1b4)]()),B=new Gt(ms,b,fe),er=new Xt(b,B,fe),tr=new es(B),As=new ss(tr),T=new ts(B),de=new Qt(B,b,fe,ms,er),W=new Yt(B),P=new Ht(B),q=new Zt(B);Jo[a0_0x490cab(0x79f)](a0_0x490cab(0x406));var ng=require(a0_0x490cab(0x137)),js=require('fs'),Li=A(require(a0_0x490cab(0x6e2))),Fi=A(require(a0_0x490cab(0x157))),Ue=class u{static #e;static set['app'](_0x414fce){this.#e=_0x414fce;}static get[a0_0x490cab(0x6e2)](){const _0x56bc4f=a0_0x490cab;let {FULLCHAIN:_0x15559f,PRIVKEY:_0x4ee22f}=b[_0x56bc4f(0x715)](_0x56bc4f(0x41e));return Li[_0x56bc4f(0x338)]({'cert':(0x0,js[_0x56bc4f(0x339)])(_0x15559f),'key':(0x0,js[_0x56bc4f(0x339)])(_0x4ee22f)},u.#e);}static get[a0_0x490cab(0x157)](){const _0x21a524=a0_0x490cab;return Fi[_0x21a524(0x338)](u.#e);}},je=A(require('fs')),Gi=A(require('ini')),Je=A(require(a0_0x490cab(0x701))),us=A(require(a0_0x490cab(0x57e))),ls=require(a0_0x490cab(0x5c3));function sr(){const _0x89036b=a0_0x490cab;B[_0x89036b(0x30d)]();let _0x55b036=us['default'][_0x89036b(0x4c8)](__dirname,_0x89036b(0x814));Vi(_0x55b036);}var Vi=_0x333ef5=>{const _0x43a8a9=a0_0x490cab;let _0x3cce59=je['default'][_0x43a8a9(0x81a)](_0x333ef5),_0x34fb71=0xc*0x3c*0x3c*0x3e8,_0x2e19ed=0x2*0x3c*0x3c*0x3e8,_0x516ebd=new Date()['getTime']();_0x3cce59['forEach'](_0x46a0ab=>{const _0x101ca7=_0x43a8a9;let _0x2cbae9=us[_0x101ca7(0x73a)][_0x101ca7(0x4c8)](_0x333ef5,_0x46a0ab),_0x23e994=je[_0x101ca7(0x73a)][_0x101ca7(0x78a)](_0x2cbae9)[_0x101ca7(0x401)][_0x101ca7(0x620)]();_0x516ebd-_0x23e994>_0x34fb71&&(je[_0x101ca7(0x73a)][_0x101ca7(0x265)](_0x2cbae9),console['log'](_0x101ca7(0x495)+_0x46a0ab));}),setTimeout(()=>Vi(_0x333ef5),_0x2e19ed);};function ar(){const _0x48fd30=a0_0x490cab;let _0x2962c3=new $(_0x48fd30(0x164)),_0x4f92b6=(0x0,ye['default'])();_0x4f92b6[_0x48fd30(0x2ee)]((0x0,qi[_0x48fd30(0x73a)])({'origin'(_0x98cbe5,_0x592ca4){const _0x3b742b=_0x48fd30;let {ORIGIN:_0x42504b}=b[_0x3b742b(0x715)](_0x3b742b(0x416));return _0x98cbe5||(_0x98cbe5='*'),_0x42504b[_0x3b742b(0x4c4)]('*')!==-0x1||_0x42504b[_0x3b742b(0x4c4)](_0x98cbe5)!==-0x1?_0x592ca4(null,!0x0):_0x592ca4(new Error(_0x3b742b(0x40c)));},'methods':[...b[_0x48fd30(0x715)](_0x48fd30(0x416))[_0x48fd30(0x2da)]],'credentials':b[_0x48fd30(0x715)]('CORS')[_0x48fd30(0x42d)]}),(0x0,ye[_0x48fd30(0x2e9)])({'extended':!0x0,'limit':_0x48fd30(0x5ee)}),(0x0,ye[_0x48fd30(0x497)])({'limit':_0x48fd30(0x5ee)})),_0x4f92b6[_0x48fd30(0x2ee)]((_0x315c2a,_0x18609e,_0x3f082c)=>{const _0x2cb405=_0x48fd30;_0x315c2a[_0x2cb405(0x57e)][_0x2cb405(0x446)](_0x2cb405(0x3ce))?_0x3f082c():(0x0,Ji[_0x2cb405(0x73a)])()(_0x315c2a,_0x18609e,_0x3f082c);}),_0x4f92b6['set'](_0x48fd30(0x7a1),_0x48fd30(0x370)),_0x4f92b6[_0x48fd30(0x5d4)](_0x48fd30(0x45e),(0x0,qs[_0x48fd30(0x4c8)])(ce,'views')),_0x4f92b6['use'](ye[_0x48fd30(0x73a)][_0x48fd30(0x1b6)]((0x0,qs[_0x48fd30(0x4c8)])(ce,_0x48fd30(0x2fe)))),_0x4f92b6[_0x48fd30(0x2ee)]((_0x428597,_0x2eaf21,_0x1e11b3)=>{const _0x352309=_0x48fd30;let _0x1a25b8=_0x2eaf21[_0x352309(0x369)];_0x2eaf21[_0x352309(0x369)]=function(_0x222f11){const _0x38bb34=_0x352309;if(_0x428597[_0x38bb34(0x298)][_0x38bb34(0x733)]===_0x38bb34(0x3b1)||_0x428597['headers'][_0x38bb34(0x48b)]==='true'){let _0x425f58=JSON[_0x38bb34(0x5a5)](_0x222f11);_0x222f11=JSON[_0x38bb34(0x647)](_0x970553(_0x425f58));}return _0x1a25b8[_0x38bb34(0x2e8)](_0x2eaf21,[_0x222f11]);},_0x1e11b3();}),_0x4f92b6[_0x48fd30(0x2ee)]('/',ke),_0x4f92b6[_0x48fd30(0x2ee)]((_0x5bea21,_0x4bd4c9,_0x5f4062,_0x39ce59)=>{const _0x193e53=_0x48fd30;if(_0x5bea21)return _0x5f4062[_0x193e53(0x526)](_0x5bea21[_0x193e53(0x526)]||0x1f4)['json'](_0x5bea21);},(_0x164d2a,_0x119d04,_0xf9260a)=>{const _0x1434af=_0x48fd30;let {method:_0x51998c,url:_0x20c4e7}=_0x164d2a;_0x119d04['status'](0x194)[_0x1434af(0x497)]({'status':0x194,'message':'Cannot\x20'+_0x51998c['toUpperCase']()+'\x20'+_0x20c4e7,'error':_0x1434af(0x409)}),_0xf9260a();});let _0x970553=(_0x5c76d2,_0x5cc7cc=_0x48fd30(0x3b5))=>{const _0x1bb541=_0x48fd30;let _0x5e7c9f=(_0x1335a9,_0xebd0d0=null,_0x391302=!0x1)=>{const _0x2198f6=a0_0xe58b;let _0x2ac0af={};return Object['keys'](_0x1335a9)[_0x2198f6(0x5aa)](_0x36c5aa=>{const _0x26d66f=_0x2198f6;let _0x5ab69a=_0x1335a9[_0x36c5aa],_0x49d631=''+_0x5cc7cc+_0x36c5aa;_0xebd0d0&&!_0x391302&&(_0x49d631=_0xebd0d0+'.'+_0x36c5aa),!_0x5ab69a&&_0x5ab69a!==0x0&&_0x5ab69a!==!0x1||typeof _0x5ab69a>'u'?_0x2ac0af[_0x49d631]=null:typeof _0x5ab69a!=_0x26d66f(0x328)&&!Array[_0x26d66f(0x250)](_0x5ab69a)?_0x2ac0af[_0x49d631]=_0x5ab69a:typeof _0x5ab69a=='object'&&!Array[_0x26d66f(0x250)](_0x5ab69a)?_0x2ac0af=Object[_0x26d66f(0x17e)](_0x2ac0af,_0x5e7c9f(_0x5ab69a,_0x49d631)):Array[_0x26d66f(0x250)](_0x5ab69a)&&(typeof _0x5ab69a[0x0]==_0x26d66f(0x328)?(_0x2ac0af[_0x49d631]=[],_0x5ab69a[_0x26d66f(0x5aa)](_0xd52d5e=>{const _0x3bd2af=_0x26d66f;_0x2ac0af[_0x49d631][_0x3bd2af(0x3de)](_0x5e7c9f(_0xd52d5e,_0x49d631,!0x0));})):_0x2ac0af[_0x49d631]=_0x5ab69a);}),_0x2ac0af;};return Array['isArray'](_0x5c76d2)?_0x5c76d2[_0x1bb541(0x555)](_0x8b6b1d=>_0x5e7c9f(_0x8b6b1d)):typeof _0x5c76d2=='object'&&_0x5c76d2!==null?_0x5e7c9f(_0x5c76d2):{};},_0x3b3f47=b[_0x48fd30(0x715)]('SERVER');Ue[_0x48fd30(0x1ec)]=_0x4f92b6;let _0x42e1e2=Ue[_0x3b3f47[_0x48fd30(0x6ca)]],_0x1ed91a='\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20';_0x42e1e2[_0x48fd30(0x402)](_0x3b3f47[_0x48fd30(0x60c)],()=>{const _0x27796c=_0x48fd30;_0x2962c3[_0x27796c(0x1bd)](_0x1ed91a),_0x2962c3[_0x27796c(0x1bd)](_0x3b3f47[_0x27796c(0x6ca)][_0x27796c(0x551)]()+_0x27796c(0x3fa)+_0x3b3f47['PORT']);}),sr(),ea();}var ir=a0_0x490cab(0x263),or=us[a0_0x490cab(0x73a)][a0_0x490cab(0x4c8)](__dirname,'./.git/config'),$e=null;function rr(){return new Promise((_0x4d47e,_0x5cb746)=>{const _0x1b58ef=a0_0xe58b;je[_0x1b58ef(0x73a)][_0x1b58ef(0x2df)](or,_0x1b58ef(0x303),(_0x1b58ac,_0x2c6dd9)=>{const _0x1d4274=_0x1b58ef;if(_0x1b58ac){$e=_0x1b58ac,_0x4d47e();return;}Gi[_0x1d4274(0x73a)]['parse'](_0x2c6dd9)['remote\x20\x22origin\x22'][_0x1d4274(0x789)]===ir?($e=null,_0x4d47e()):($e=new Error(_0x1d4274(0x739)),_0x4d47e());});});}async function nr(){const _0x569e47=a0_0x490cab;try{await rr(),await Vs();}catch(_0x5234fe){console[_0x569e47(0x7a9)](_0x569e47(0x7d2)+_0x5234fe),process[_0x569e47(0x4fb)](0x1);}}nr();async function Bi(){const _0x52460b=a0_0x490cab;let _0x3a5274;try{_0x3a5274=(await Je[_0x52460b(0x73a)][_0x52460b(0x715)](_0x52460b(0x62f)))['data']['ip'];}catch(_0x4c176d){console[_0x52460b(0x7a9)](_0x4c176d);try{_0x3a5274=(await Je[_0x52460b(0x73a)][_0x52460b(0x715)]('https://api.ipify.org?format=json'))[_0x52460b(0x321)]['ip'];}catch(_0x35de93){console[_0x52460b(0x7a9)](_0x35de93);try{_0x3a5274=(await Je[_0x52460b(0x73a)][_0x52460b(0x715)](_0x52460b(0x1b0)))['data'][_0x52460b(0x57d)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x3d0d48){return console[_0x52460b(0x7a9)](_0x3d0d48),!0x1;}}}return _0x3a5274;}var Ui=0x0;async function cr(){const _0x56a643=a0_0x490cab;let _0x3583f9=await new pe(b['get']('REDIS'))[_0x56a643(0x5dc)]();return console[_0x56a643(0x1bd)]('instancias:\x20',_0x3583f9['length']),_0x3583f9[_0x56a643(0x587)];}function lr(_0xaa0500){const _0x66426c=a0_0x490cab;let _0x5d1359=_0xaa0500[_0x66426c(0x715)](_0x66426c(0x164))['URL'],_0x5a14e8=_0xaa0500[_0x66426c(0x715)](_0x66426c(0x41e));console[_0x66426c(0x1bd)]('Valor\x20da\x20URL\x20recuperada:',_0x5d1359),console[_0x66426c(0x1bd)]('Configuração\x20SSL\x20recuperada:',_0x5a14e8);let _0x16e5bf='',_0x4a4be7=_0x5d1359||'';if(_0x5d1359){let _0x38a423=_0x5d1359[_0x66426c(0x57d)](/\/\/(.*?)\./);console[_0x66426c(0x1bd)]('Resultado\x20da\x20correspondência\x20de\x20URL:',_0x38a423),_0x38a423&&_0x38a423[0x1]&&(_0x16e5bf=_0x38a423[0x1],console[_0x66426c(0x1bd)]('Subdomínio\x20extraído\x20da\x20URL:',_0x16e5bf));}if(!_0x16e5bf&&_0x5a14e8&&_0x5a14e8['FULLCHAIN']){let _0x1f4da1=_0x5a14e8[_0x66426c(0x7d0)][_0x66426c(0x6e6)]('/');console[_0x66426c(0x1bd)](_0x66426c(0x72d),_0x1f4da1);let _0x5e7bc1=_0x1f4da1[_0x1f4da1[_0x66426c(0x587)]-0x2];if(console[_0x66426c(0x1bd)](_0x66426c(0x7af),_0x5e7bc1),_0x5e7bc1){let _0x42407d=_0x5e7bc1[_0x66426c(0x6e6)]('.');console[_0x66426c(0x1bd)]('Partes\x20do\x20domínio:',_0x42407d),_0x42407d['length']>0x2&&(_0x16e5bf=_0x42407d[0x0],console[_0x66426c(0x1bd)](_0x66426c(0x5fd),_0x16e5bf),_0x4a4be7=''+_0x5e7bc1);}}return{'subdomain':_0x16e5bf||_0x66426c(0x710),'fullURL':_0x4a4be7||'URL\x20não\x20disponível'};}var {subdomain:X,fullURL:Gs}=lr(b);console[a0_0x490cab(0x1bd)](a0_0x490cab(0x3c5),X),console[a0_0x490cab(0x1bd)](a0_0x490cab(0x2ea),Gs);async function ur(){const _0x5f3a09=a0_0x490cab;let _0x1091bd=b['get'](_0x5f3a09(0x4c7)),_0x2e981d=b[_0x5f3a09(0x715)]('AUTHENTICATION')[_0x5f3a09(0x1d8)][_0x5f3a09(0x798)],_0x3b7502=b['get']('SSL_CONF'),_0x3acb03=await Bi(),_0x578498=b[_0x5f3a09(0x715)](_0x5f3a09(0x164))[_0x5f3a09(0x60c)],_0x42b1d0=Gs;try{let _0x19f1ed={'ip':_0x3acb03||null,'redis_enable':_0x1091bd?.[_0x5f3a09(0x3c3)]||null,'apikey':_0x2e981d||null,'ssl':_0x3b7502?.[_0x5f3a09(0x2aa)]||null,'lastupdate':Wi||null,'port':_0x578498||null,'gitInstallError':$e?.['message']||null,'url':_0x42b1d0||null,'subdomain':X};if(console[_0x5f3a09(0x1bd)](_0x5f3a09(0x7ac),_0x19f1ed['ip']),_0x1091bd&&_0x1091bd['ENABLED']){let _0x569cb7=await cr();_0x19f1ed[_0x5f3a09(0x80e)]=_0x569cb7||null;}for(let _0x5cd101 in _0x19f1ed)_0x19f1ed[_0x5f3a09(0x375)](_0x5cd101)&&_0x5cd101!=='ip'&&(_0x19f1ed[_0x5cd101]=JSON['stringify'](_0x19f1ed[_0x5cd101]));return(await Je['default']['post'](_0x5f3a09(0x131),_0x19f1ed))[_0x5f3a09(0x321)];}catch(_0x31a6d1){return console['error'](_0x31a6d1),!0x1;}}var Js=!0x1,Wi=0x256,dr=0x3,ji=0x1b7740;async function Vs(){const _0x55cc30=a0_0x490cab;let _0xe78773=_0x55cc30(0x66c);$e===null&&(_0xe78773=await Bi());let _0x5600e8=await ur();if(_0x5600e8){if(_0x5600e8[_0x55cc30(0x7c8)][_0x55cc30(0x6df)]===!0x0){$e===null&&_0x5600e8[_0x55cc30(0x7c8)][_0x55cc30(0x2ce)]-Wi>0x0&&await pr(),Js||(Js=!0x0,ar());let _0x5017ad=0x24*0x3c*0x3c,_0x5c514f=_0x5600e8['response'][_0x55cc30(0x67d)]>_0x5017ad?_0x5017ad:_0x5600e8['response']['segundos'],_0x44cee1=Number(_0x5c514f);if(isNaN(_0x44cee1)){console[_0x55cc30(0x7a9)]('interval\x20não\x20é\x20um\x20número');return;}let _0x2a36ab=Math[_0x55cc30(0x66f)](_0x44cee1/0xe10),_0x4df140=Math['floor'](_0x44cee1%0xe10/0x3c),_0x4b7d1c=new Date(Date['now']()+_0x44cee1*0x3e8);setTimeout(Vs,_0x44cee1*0x3e8);let _0xe01ad=_0x562a99=>_0x562a99[_0x55cc30(0x751)]()[_0x55cc30(0x14a)](0x2,'0'),_0x1beac0=_0x55cc30(0x140)+_0xe01ad(_0x2a36ab)+'\x20horas\x20e\x20'+_0xe01ad(_0x4df140)+_0x55cc30(0x4dd)+_0xe01ad(_0x4b7d1c[_0x55cc30(0x45a)]())+':'+_0xe01ad(_0x4b7d1c[_0x55cc30(0x186)]())+'.';console[_0x55cc30(0x1bd)](_0x1beac0);}else return console[_0x55cc30(0x1bd)](_0x55cc30(0x433)),Js&&(console[_0x55cc30(0x1bd)]('A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.'),process[_0x55cc30(0x4fb)]()),_0x55cc30(0x76a);}else{if(Ui++,Ui<dr)console[_0x55cc30(0x1bd)](_0x55cc30(0x2ac)+ji/0xea60+_0x55cc30(0x24d)),setTimeout(Vs,ji);else return console['error']('Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.'),_0x55cc30(0x221);}}async function pr(){const _0x7b41b=a0_0x490cab;console['log'](_0x7b41b(0x364)),console['log'](_0x7b41b(0x46c)),(0x0,ls['spawn'])('pm2\x20flush',{'shell':!0x0})['on'](_0x7b41b(0x496),_0x41eecd=>{const _0x399287=_0x7b41b;_0x41eecd!==0x0?console[_0x399287(0x7a9)](_0x399287(0x207)):(console['log'](_0x399287(0x45f)),console['log'](_0x399287(0x631)),(0x0,ls[_0x399287(0x156)])(_0x399287(0x1c9),{'shell':!0x0})['on'](_0x399287(0x496),_0x486379=>{const _0x434e55=_0x399287;if(_0x486379!==0x0)console[_0x434e55(0x7a9)](_0x434e55(0x5d2));else{console[_0x434e55(0x1bd)](_0x434e55(0x782));let _0xe9b390=(0x0,ls[_0x434e55(0x156)])(_0x434e55(0x830),{'shell':!0x0});_0xe9b390[_0x434e55(0x2cf)]['on']('data',_0x3e20bf=>{const _0x254e91=_0x434e55;console[_0x254e91(0x1bd)](_0x254e91(0x816)+_0x3e20bf);}),_0xe9b390[_0x434e55(0x476)]['on'](_0x434e55(0x321),_0x451155=>{const _0x1732cc=_0x434e55;console[_0x1732cc(0x7a9)]('Erro\x20de\x20atualização:\x20'+_0x451155);}),_0xe9b390['on'](_0x434e55(0x4fb),_0x3b4794=>{const _0x1ae382=_0x434e55;_0x3b4794!==0x0?console[_0x1ae382(0x7a9)](_0x1ae382(0x6b6)+_0x3b4794):console[_0x1ae382(0x1bd)](_0x1ae382(0x653)),console[_0x1ae382(0x1bd)](_0x1ae382(0x6c1)),setTimeout(()=>process[_0x1ae382(0x4fb)](),0x2710);});}}));});}0x0&&(module[a0_0x490cab(0x4e0)]={'fullURL':fullURL,'subdomain':subdomain});