function a0_0x5def(){const _0x3b12f0=['findFlow','readFileSync','flowConfig','env.KEY\x20!==\x20key','labelId','application/octet-stream','formatBRNumber','FlowRouter','Error\x20update\x20group\x20picture','closeExistingConversations','proto','getMessage','remoteJid','pairingCode','ORG:','connection.update','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','CORS_METHODS','stopConversation','request\x20received\x20in\x20editFlowgroup','downloads','hasOwnProperty','.gif','request\x20body:\x20','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','title','$dbName','Audio\x20processed','width','Converting\x20image\x20to\x20WebP\x20to\x20sticker','Sistema\x20atualizado\x20com\x20sucesso!','):\x20Visualizando\x20AutomateSystem','sharp','loadInstance','):\x20Iniciando\x20bot...','empty','Erro\x20ao\x20atualizar\x20múltiplos\x20fluxos:','\x20minutos','DARK','readMessageBot','_Contacts','mentions','scheduleNextCheck','DOCKER_ENV','uazapiSendAudio','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','Atualização:\x20','error','getStatus','filter','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','CONNECTION_UPDATE','webhookService','Database\x20is\x20not\x20enabled','updateGroupPicture','DaysToDelete','Erro\x20ao\x20editar\x20o\x20bloco:\x20','conversation','long','webhookModel','):\x20Error\x20processing\x20conditions:\x20','textMessage','subdomain','qrcode','/media','equal','remove','AUTHENTICATION','realVariables','7LtTRmd','block','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','jsonip.com','ButtonsMessage','getflow','updateChatWithMessage','COLOR','mediaKey','.\x20Pulando.','\x1b[1m','editedMessage','uazapiSendMedia','@whiskeysockets/baileys','):\x20Going\x20to\x20','deleteMessage','groupLeave','bodyString','):\x20Entrou\x20na\x20função\x20stop','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','flow','allContacts','lastBlockId','Erro\x20ao\x20buscar\x20conversas:\x20','flowActive','media','waitingMenu_replyOptions','messageHandle','):\x20Comando\x20desconhecido:\x20','):\x20Conversa\x20inserida\x20com\x20sucesso.','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','code','match_last_seen','):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20e\x20não\x20é\x20a\x20stopConversation.\x20Saindo\x20da\x20função.','lastMessage','):\x20Parar\x20função\x20pois\x20não\x20está\x20conectado','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','generateHash','\x0a{\x20instance:\x20','@s.whatsapp.net','getScheduleMessage','last_update','importChats','):\x20Erro\x20ao\x20buscar\x20a\x20conversa\x20','eventEmitter','labels.association','.jpg','replaceVariables','InstancesAlterarTodas','state','test','namespace','augusto.fcs@gmail.com','):\x20Erro\x20ao\x20deletar\x20mensagens\x20com\x20status\x20\x22done\x22:','\x20-\x20ON:\x20','Reiniciando\x20sistema\x20após\x20instalado\x20certificado...','unreadCount','throwAndLogError','app','authentication','request\x20received\x20in\x20deleteDoneMessages','CHATS_SET','Reinicialização\x20iniciada:\x20','\x20não\x20encontrado\x20para\x20cópia','connectionState','insertMany','):\x20isVote:\x20','buttons','CORS_CREDENTIALS','fetchChats','editFlowVaredit','reactionMessage','Instâncias\x20atualizadas\x20como\x20desconectadas:\x20','):\x20Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','createNewConversation','ip:\x20','preview','app-state-sync-key','variablesNotFound','audioWhatsapp','reconnectTimestamps','request\x20received\x20in\x20deleteConversation','SERVER','GUARD','array','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','nomecompleto','js-yaml','moreLogs','groupHandler','unhandledRejection','Missing\x20global\x20api\x20key','updateOnlinePrivacy','3830WPbdWw','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','data:\x20','Primeiro\x20Valor:\x20','creation','waitingMenu_ExpiredMessage','views','CREDENTIALS','waInstances','stderr','host','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','Message','findIndex','Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','instances','Erro\x20ao\x20atualizar\x20o\x20flow.','sendText','when','No\x20join\x20group\x20invite\x20code\x20or\x20url','logger','50mb','Data\x20inválida\x20fornecida','working','conditions','Error\x20status:','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','Connection\x20closed\x20for\x20instance:\x20','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','startFlow','getAllData','downloadMediaMessage','findOneAndUpdate','endSession','groupAcceptInvite','chats','.png','groups.upsert','load','flowname:\x20','AutomateSystem','enumerable','messages.set','):\x20Editando\x20grupo\x20do\x20fluxo...','allFlows','messaging-history.set','archiveChat','cpf','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','/wa-message','write','detail','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','Início','):\x20Enviando\x20mídia','LOG_COLOR','participant','Forbidden','action','allflows','Reordenando\x20replyOptions\x20para\x20o\x20blockId:','updateConversation','activatedCount','none','base64','envProcess','Valor\x20de\x20find\x20ou\x20replace\x20ausente',',\x20fará\x20nova\x20verificação\x20em\x20','menuMessage','envYaml','notify','.error','profilePictureUrl','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','sendCommand','picture','addReplyOption','ChatRouter','public','Image\x20converted\x20to\x20WebP','CORS_ORIGIN','isJidGroup','request\x20received\x20in\x20getAutomateSystem','):\x20Erro\x20ao\x20editar\x20a\x20conversa:\x20','Output\x20path:\x20','Variáveis\x20não\x20encontradas:','getClient','dyndns.org','updateStopChat','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20','delete','QRCODE_UPDATED','groupCreate','mentioned','listen','prepareMediaMessage','removeProfilePicture','isLong','birthtime','contains','3wpXuRs','connectionStatus','subject','Resultado\x20da\x20atualização:','E-mail:\x20','recording','updatePrivacySettings','password','.uazapi.dev','Hash\x20to\x20audio\x20name:\x20','add','announcement','contacts.update','https://github.com/uazapi/uazapi.git','editFlowBlock','findOrCreate','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','viewOnceMessageV2','\x20\x1b[0m','Chrome','Background\x20color\x20is\x20required','Conexão\x20estabelecida','sendMessageWithTyping','done','minutesToClose','groupRevokeInvite','createJid','pollMessage','existsSync','stdout','substring','privacySettings','editflowvariable','matchRegex','@ffmpeg-installer/ffmpeg','unlinkSync','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','customFields','Instance\x20Key\x20from\x20DB:','readMessage','groupInviteCode','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','reorderBlocks','restart','labels','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','contacts','message','FlowController','stanzaId','value','redirect','headers','limit','isRunning','messageId','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','update','Erro\x20ao\x20copiar\x20dados:','proxy-agent','owner','fileUrl','HH:mm:ss','.X-ABLabel:Celular\x0a','updateGParticipate','start','FULLCHAIN','):\x20updateResult:','groupValidate','deleteMessageForEveryone','processgoToFlow','urlencoded','ERROR:\x20','.txt','removeInstance','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','updateProfilePicture','deleteDoneMessages','):\x20Mensagem\x20já\x20enviada\x20para\x20','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','apikey','):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','fetchPrivacySettings','connect','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','.doc','Erro\x20inesperado\x20em\x20processvaredits:\x20','sendMenu','webhook','findGroup','editFlow','.ogg','request\x20received\x20in\x20updateCustomFields','):\x20Usando\x20extensão\x20padrão:\x20','video-cover.png','createConversationforgoToFlow','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP:','Erro\x20ao\x20alterar\x20o\x20fluxo:\x20','Erro\x20ao\x20remover\x20instâncias\x20antigas:',',\x20Comparador:\x20','No\x20participants','):\x20Conversa\x20está\x20expirada\x20-\x20voto','_activatedCount','createProxyConfig','):\x20Erro\x20ao\x20alterar\x20fluxo:\x20','waitingMenu_text','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','scheduleSendAudio','\x1b[40m','getBusinessProfile','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','findAndReplace','\x0a*Você\x20respondeu*:\x0a','\x20removido\x20do\x20chat\x20','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','SINGLE_SELECT','dark','address','/events/:instance','URL','addChatLabel','\x1b[30m','editflowvaredit','):\x20Buscando\x20conversa...','Output\x20audio\x20path:\x20','log','DATABASE_ENABLED','):\x20Criando\x20nova\x20conversa[createNewConversation]','):\x20Error\x20processing\x20the\x20block:\x20','out','Erro\x20ao\x20editar\x20a\x20conversa:\x20','Not\x20allowed\x20by\x20CORS','list','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','updateProfileStatus','):\x20Limpando\x20AutomateSystem','ex:\x20\x22groupJid=120362@g.us\x22','dbClient','imageMessage','Schema','console','toLocaleString','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20não\x20estão\x20ativados.','updateOneById','Failed\x20to\x20get\x20IP\x20from\x20','authState','videoMessage','\x1b[42m','authService','replaceVariablesLogs','BufferJSON','\x1b[47m','webhookMap','.mp3','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','instanceKeys','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20','getVariablesChat','Module\x20-\x20ON','removeData','/media/','ConversationModel','.ogv','responsavelid','Temp\x20audio\x20created','\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','ProxyAgent','saveTextReply','STORE_CHATS','scheduleMessages','):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20usuário\x20e\x20contém\x20palavras\x20para\x20pausar\x20o\x20fluxo','Error\x20fetching\x20group','listMessage','ensureChatIdsExist','generate','):\x20teve\x20mudanças\x20chat.displayName:\x20','indexOf','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','instanceName','):\x20Enviando\x20texto','Archiving\x20chat','Internal\x20Server\x20Error','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','):\x20Entrou\x20na\x20função\x20goToFlow','\x20quoted:\x20','--standalone','/instance','use','CONTACTS_UPDATE','getProfileName','processUazapi','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','DB_PREFIX_NAME','Error\x20removing\x20profile\x20picture','$unset','insert','verifiedName','Not\x20Found','child_process','copyBlock','_FlowHistorico','ENABLED','content','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','leadInfo','charAt','4279SDGJeW','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','store','menuExpiredMessage','createConnection','finish','findWebhook','\x1b[30m%s\x1b[0m','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','oldToken','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','):\x20Bloco\x20copiado:\x20','segundos','syscall','stopMinutesMaxActives','$addToSet','getPrototypeOf','METHODS','/instance/create','fileName','getOwnPropertyDescriptor','groupadd','chats.upsert','reorderReplyOptions','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','toBrazilianNumberFormat','info','editflowreply','src','^\x5cd+[\x5c.@\x5cw-]+','vote','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','header','cache','MESSAGES_UPSERT','findParticipants','newStoppedUntil','chats.delete','paused','rowId','Bloco\x20com\x20ID\x20','messageSecret','Error\x20while\x20deleting\x20message\x20for\x20everyone','key','floor','protocol','DATABASE_CONNECTION_HOST','lastSendMessage','string','sendContact','):\x20delete\x20=\x20true','poll','reference','request\x20received\x20in\x20updateFlowConfig','bearer','request\x20received\x20in\x20editFlow','dataValidate','audio/ogg','values','connectToWhatsappController','isBusiness','modifiedCount','\x20inseridos\x20no\x20banco\x20de\x20dados...','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos',',\x20Expiration\x20Time:\x20','qrcode.updated','groupToggleEphemeral','count','changeVariables','.TEL;waid=','hDel','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','):\x20atualização\x20chat:\x20','archived','):\x20customFieldVariables','goNextblock','ChatModel','match','instance.','Instance\x20restarted','creds.json','folder','_p_','Logger','\x20com\x20sucesso.','online','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','exec','rm\x20-rf\x20','findChats','leadInfo.desativadoFluxoAte','):\x20Query\x20params:','markMessageAsRead','ephemeralExpiration','mediatype','formatStatusMessage','resetReconnectionVariables','storePath','normalizeMessage','Rótulo\x20deletado:','CONECTADO\x20À\x20UAZAPI','whatsappNumber','sendLocation','}}\x20->\x20valor\x20não\x20encontrado','flowIgnoreGroups','collection','Group\x20not\x20found','SSL_CONF','path','):\x20Conversa\x20está\x20expirada','\x20is\x20already\x20in\x20use.','output','isBase64','replaceValue','The\x20global\x20api\x20key\x20must\x20be\x20set','Including\x20timestamp\x20in\x20url:\x20','https://uazapi-plugin.bubbleapps.io/','replaceOne','CONNECTION','Mensagem\x20não\x20suportada','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','/wa-groups','video','.sendDataWebhook-local','@g.us','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','editFlowVariable','viewOnceMessageV2Extension','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','AutomateFunctions','locationMessage','apirequest','reconnectAttempts','):\x20Alterando\x20fluxo...','request\x20received\x20in\x20editFlowvariable','conversationTimestamp','CHATS_UPDATE','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','checkAndRestartProcess','fetchLabels','now','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','sendMedia','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','instancias:\x20','delAll','uazapi','max','fromMe','Parando\x20aplicação,\x20atualização\x20recebida','?timestamp=','setWebhook','.webm','):\x20Erro\x20ao\x20editar\x20agentes:\x20','boolean','editConversation','Erro\x20ao\x20editar\x20agentes:\x20','blocks','description',',\x20resultado:\x20','username','express-async-errors','.docx','\x22\x20-\x20NOT\x20CONNECTION','gifPlayback','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','object','@redis/client','getDevice','setRestartTimer','):\x20Erro\x20durante\x20a\x20atualização:\x20','blockId','\x20chats\x20de\x20','call','fetchInstances','\x20minutos\x20verificará\x20novas\x20mensagens','Error\x20updating\x20message\x20status:','AppStateSyncKeyData','findGroupInfos','):\x20tem\x20blocks','isInteger','):\x20Criando\x20fluxo...','Audio\x20is\x20url','processvaredits','):\x20teve\x20mudanças\x20chat.archived:\x20','pollErrorMessage','bateu\x20events','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','leaveGroup','No\x20invite\x20code','options','findByIdAndUpdate','Erro\x20ao\x20deletar\x20mensagens:','groupJid','replyOption','fullName','stateConnection','cors','../env.yml','):\x20Erro\x20ao\x20tentar\x20updateCustomFields:\x20','\x20using\x20the\x20proxy:','lastmsg','metadata','listResponseMessage','expiration','webp','.svg','fetchProfilePictureUrl','variables','getTicketSystem','listType','uazapiSendContact','data','^\x5cd+','Nenhum\x20chat\x20encontrado\x20para\x20editar.','pollUpdateMessage','licenca','instanceInfo','saveCreds','onWhatsApp','del','.pptx','Image\x20is\x20base64','Unable\x20to\x20leave\x20the\x20group','ipify.org','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','PORT','):\x20Bloco\x20original\x20para\x20cópia:\x20','updateAgent','?authSource=admin&readPreference=primary&directConnection=true','):\x20conversation.waitingMenu_name','\x20contacts','message_normalized','chat','):\x20Erro\x20ao\x20criar\x20fluxo\x20','hbs','joinGroup','query','SERVER_PORT','convertToWebP','fetchStatus','Content\x20is\x20required','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20','saveVariable','presence.update','STATUS_INSTANCE','buttonId','isJidUser','oldValue','jid','audio/mp4','replyOptions','drop','/clients-info','Erro:','sectionsToString','includes','request\x20received\x20in\x20editConversation','Error\x20data:','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','The\x20property\x20cannot\x20be\x20empty','messageTimestamp','senderKeyDistributionMessage','SERVER_ACK','lastDisconnect','logout','desc','Router','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','Número:\x20','\x1b[37m','updateOne','SERVER_TYPE','unavailable','deleteInstance','sendMessage','headerString','editflowblock','scheduleSendMedia','Certbot:\x20','):\x20Edit\x20schedule\x20message...','process','deleteMany','/instance/delete','find','processPollUpdateMessage','replaceVariablesChat','\x20não\x20encontrado','Erro\x20ao\x20atualizar\x20o\x20fluxo:','):\x20debug\x20alterando\x20this.AutomateSystem','defineProperty','demote','not\x20loaded','/events','cwd','replaceVariablesInReplyOptions','):\x20Deletando\x20mensagem','protocolMessage','/wa-chats','trimmed','getConversation','deleteAll','ephemeralMessage','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','MAX_RECONNECT_ATTEMPTS','no.connection','3gRXGpP','Instance\x20\x22','Types','MESSAGES_SET','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','updateLastSeenPrivacy','groupUpdateDescription','forEach','statusJidList','findAndReplaceRegex','dbServer','Validate','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','userDevicesCache','inner','latitude','jwt','updateReadReceiptsPrivacy','ERROR','.mp4','wuid','pt-BR','scheduleMessage','json','updateMediaMessage','name','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','integer','default','fetchMessages','updateMessage','Erro\x20do\x20Certbot:\x20','contacts.upsert','port','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20','CONTACTS_SET','\x5cd+','pollCreationMessageV2','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','CHATS_DELETE','put','joinGroupValidate','https://uazapi-plugin.bubbleapps.io/?url=','):\x20Editando\x20condição\x20do\x20fluxo...','Fluxo\x20não\x20encontrado','processApiRequest','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','lastReceivedMessage','loadEnv','authModel','getHours','labels.edit','Não\x20foi\x20possível\x20obter\x20o\x20endereço\x20IP,\x20interrompendo\x20a\x20aplicação.','Flow\x20already\x20exists','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','keep-alive','Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','collections','push','Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','):\x20Erro\x20ao\x20buscar\x20conversas\x20','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','findGroupInfo','waMonitor','/instance/connectionState','setHeader','fetchContacts','getConversationModelForOwner','335900tDRSXJ','truncatedtoEnd','):\x20Editando\x20replyOption...','chatHandle','8080','updateParticipant','/wa-contacts','fetchProfile','OrAnd','WebhookGlobal','reaction','getMIMEType','contact','request\x20received\x20in\x20getFlow','Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos:\x20','statusMessage','\x22,\x20valor\x20a\x20substituir:\x20\x22','DD/MM\x20HH:mm:ss','post','GROUPS_UPSERT','):\x20Ler\x20mensagem','CLEANING_INTERVAL','getContactModelForOwner','status@broadcast','Instance\x20deleted','organization','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','stringify','API\x20Key\x20from\x20Request:','trim','selectedOptions','flowStopMinutes','request\x20received\x20in\x20getConversation','maxActives','evaluateCondition','\x1b[33m%s\x1b[0m','editOperator','context','padStart','binary','repeat','command','Deleted\x20','/config','-instances','sendPoll','Type\x20is\x20required','Content-Type','sections','random','PENDING','RECONNECT_TIME_FRAME','audio/aac','testProxy\x20response\x20from\x20','save','editflowgroup','Fluxos\x20não\x20estão\x20ativados','exit','removeChatLabel','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','\x1b[0m','announce','Erro\x20ao\x20executar\x20comando\x20de\x20reinicialização:\x20','group\x20ignored','request','variable','imagechat','--agree-tos','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','DATABASE_CONNECTION_USER','groupUpdateSubject','File\x20written\x20to\x20path:\x20','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','removeOlderDisconnectedInstances','Flow\x20iniciado\x20com\x20','uazapiDeleteMessage','createAndSave','Sending\x20audio\x20whatsapp','creds','Instance\x20logged\x20out','<subdomain>','buttonMessage','findOne','errorLog','env','updateCustomFields','expression','rows','getLastMessage','findGroups','Erro\x20ao\x20criar\x20o\x20fluxo:\x20','next_groupId','writeData','presenceSubscribe','CHATS_UPSERT','https://chat.whatsapp.com/','website','config','updateStatusPrivacy','sendSticker','LOG_LEVEL','AllProxy','variablesToObject','notEmpty','copyDataToNewModel','deleteOne','connectToWhatsapp','request\x20received\x20in\x20createFlow','assign','execSync','no-cache','_Messages','sendStatus','waUploadToServer','isURL','errors',',\x20Minutes\x20to\x20Close:\x20','loadWebhook','editChat','https://','Erro\x20ao\x20executar\x20o\x20Certbot.\x20Código\x20de\x20saída:\x20','fetchBusinessProfile','WARN','truncatedto','dbSettings','promote','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','mediaMessage','writeFile','Getting\x20profile\x20info','chatId','goToFlow','agents','apiResponse','where','READ','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','and','HeaderType','qrcode-terminal',',\x20lastCondition:\x20','uazapiSendMenu','dbInstance','Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','sendWhatsAppAudio','deleteConversation','PRESENCE_UPDATE','.jwt','.xls','create','):\x20Campos\x20a\x20serem\x20atualizados:','INFO','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','deletedCount','verify','round','):\x20Bloco\x20com\x20ID\x20','ListMessage','backgroundColor','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','):\x20Mensagens\x20com\x20status\x20\x22done\x22\x20deletadas\x20com\x20sucesso.','\x22\x20cannot\x20be\x20empty','744298GJaCAE','auth','validate','ini','Erro\x20ao\x20buscar\x20conversa:\x20','has','utf-8','Error\x20updating\x20profile\x20name','$pull','cleanStore','messages.upsert','stopWhenYouSendMsg','https','convertedOptions','/instance/connect','waitingMenu_id','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','):\x20teve\x20mudanças\x20chat.name:\x20','choices','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','arrayUnique','insertCount','getAutomateSystem','__esModule','):\x20Fluxos\x20não\x20estão\x20ativados','image','from','errno','groupMetadata','\x20não\x20encontrado\x20para\x20atualização.','):\x20newSecondValue\x20após\x20replaceVariables:','role','repository','\x22\x20-\x20REMOVED','vcard','selectableCount','noConnection','applyvaredit','):\x20','isArray','firstValue','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','findByIdAndDelete','5505025QTtXFU','):\x20Dados\x20migrados\x20com\x20sucesso','\x20saindo\x20da\x20função','profilePicture','):\x20Erro\x20ao\x20deletar\x20a\x20conversa\x20','groupSetting','editFlowReply','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-f\x20ipod\x20','This\x20name\x20','node-mime-types',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','height','STORE','StartBot','\x20-i\x20','stopMinutes','SECRET','pre','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','mkdirSync','\x1b[34m%s\x1b[0m','whatsappNumbers','Audio\x20is\x20base64','GROUPS_UPDATE','ScheduleMessageModel','order','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','sendButtons','AUTHENTICATION_JWT_EXPIRIN_IN','Erro\x20de\x20atualização:\x20','removed','size','formatVCard','longitude','Selecione','audio','REDIS_ENABLED','last','editFlowGroup','Flow\x20não\x20encontrado','):\x20Não\x20achou\x20nenhum\x20flow','updatePresence','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','newValue','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','):\x20Ignoring\x20group\x20messages.','timerId','waitingForReplyMenu','createInstance','):\x20Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20schedule\x20message:\x20','PRIVKEY','parseInt','Not\x20is\x20business\x20profile','slice','38568vFrZBA','audioMessage','including\x20timestamp\x20in\x20url:\x20','contactsArrayMessage','DATABASE_CONNECTION_PASSWORD','Label\x20','The\x20','sleep','createSectionsFromValues','Chat\x20com\x20ID\x20','text/event-stream','saveConversationToDatabase','prototype','toggleEphemeral','/exit','readreceipts','encoding','closed','https://jsonip.com','request\x20received\x20in\x20editFlowcondition','eventHandler','Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.','#000000','.sendDataWebhook-global','buttonText','group','_Chats','isConnected','Authentication\x20error','):\x20Editando\x20edição\x20do\x20fluxo...','groupDesc','mediaSticker','parse','updateProfileName','static','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','stoppedUntil','varedits','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','lean','option','nextBlock:','):\x20alterando\x20this.AutomateSystem','padEnd','738DVdhAH','!cmd_','request\x20received\x20in\x20fetchConversation','interval\x20não\x20é\x20um\x20número','Erro\x20ao\x20configurar\x20proxy:\x20','color','composing','Audio\x20converted\x20to\x20mp4','Profile\x20not\x20found','setContext','redisEnv','ids','toBRL','createGroup','sending','sign','updateMany','Rótulo\x20inválido\x20ou\x20sem\x20ID.','toLowerCase','groups','ObjectId','delaySecMin','mongoose','getDelay','utf8','redis://127.0.0.1:6379','Getting\x20profile\x20with\x20jid:\x20','arraybuffer','):\x20Buscando\x20conversas...','pushName','viewOnceMessage','deleteReplyOption','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20','updateBlock','defineAuthState','length','contextInfo','send','SendScheduleMessage','automateSystem','Instância\x20não\x20encontrada.','keys','text','prepareWAMessageMedia','replace','\x1b[31m','getTime','configService','convertaudio','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','extractRegex','saveMediaToFile','valid','Error\x20updating\x20setting','SUCCESS','flattenObject','lastSend','split','method','Erro\x20ao\x20inserir\x20chats:','created','Db\x20Connection','sendAudio','secondValue','originalUrl','getMessageModelForOwner','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','initAuthCreds','Error\x20message:','Erro\x20ao\x20remover\x20label\x20','mongodb','Erro\x20ao\x20tentar\x20updateCustomFields:\x20','pollCreationMessageKey','splice','END:VCARD','shift','lastCondition','upperCase','Image\x20created','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','Safari\x20(Mac\x20OS)','leadInfo.','ReplyOptions\x20finais\x20após\x20reordenação:','Error\x20updating\x20profile\x20picture','SSL_CONF_FULLCHAIN','pollCreationMessageV3','connectionClosed','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','http://checkip.dyndns.org','/wa-connection-update','router','getContentType','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','addresss','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','5330480aMgfwh','Temp\x20audio\x20path:\x20','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','uazapiSendLocation','findLabels','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','REDIS_PREFIX_KEY','emit','class-validator','Valor\x20inicial:\x20\x22','getChatModelForOwner','stack','TEXT','jsonwebtoken','localWebhook','Erro\x20ao\x20adicionar\x20label\x20','endsWith','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','phoneNumber','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','hGet','env.yml','font','status','stopped','http','deleteFlow','_ScheduleMessages','Font\x20is\x20required','contactMessage','Falha\x20ao\x20deletar\x20mensagens\x20antigas:','getScheduleMessageModelForOwner','lowerCase','\x1b[36m','$set','\x1b[33m\x1b[1m','Connection','fone','unknown\x20operation\x20type\x20[','Instâncias\x20removidas\x20por\x20estarem\x20desconectadas\x20há\x20mais\x20de\x2010\x20dias:\x20','CONTACTS_UPSERT','set','type','map','express','createflow','body','DisconnectReason','LOG','readData','subjectOwner','findConversation','params','connectionUpdate','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','findContacts',',\x20valor\x20passado:\x20\x22','groupFetchAllParticipating','Error\x20change\x20group\x20setting','apply','notContains','https://api.ipify.org?format=json','processingScheduleMessageId','DELETED','verbose','pollOnReplyDelete','*Pergunta*:\x20\x0a','uncaughtException','):\x20Flow\x20não\x20encontrado','WA\x20MODULE','SERVER_URL','contentText','participants','findAll','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','scheduleSendText','request\x20received\x20in\x20starFlow','Erro\x20ao\x20encerrar\x20a\x20API','Erro\x20ao\x20atualizar\x20conversa:\x20','.ppt','connectedName','EXPIRIN_IN','g.us','AddChatLabel',',\x20qrcodeCount:\x20','):\x20Procurando\x20conversa','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','):\x20Falha\x20ao\x20deletar\x20mensagem.','createServer','quoted','Type\x20not\x20found','fetchConversation','delay','exists','\x1b[41m','connectedClient','redis','KEY','readFile','tags','presence','some','toDataURL','Telefone:\x20','GROUP_PARTICIPANTS_UPDATE','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','Instância:\x20','!stop','profile','7907022myhTpc','createConversationforStartFlow','Enter\x20a\x20value\x20in\x20milliseconds','):\x20Buscando\x20todos\x20os\x20fluxos...','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','client','_id','all','updateGParticipant','toArray','\x20inseridas\x20no\x20banco\x20de\x20dados...','editFlowCondition','sendList','makeCacheableSignalKeyStore','ignoreGroups','deleted','JWT','chatLog','Não\x20é\x20possível\x20excluir\x20uma\x20mensagem\x20que\x20está\x20em\x20processamento.\x20Pause\x20primeiro\x20e\x20espere\x20em\x20torno\x20de\x2020\x20segundos\x20para\x20deletar',',\x20saindo.','chatModify','jpegThumbnail','available','flowConversation','getFlow','bulkWrite','messagesSend','\x1b[1m\x1b[37m','EMAIL','unreadcount','sendDataWebhook','AutomateSystem\x20não\x20foi\x20inicializado','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','pollCreationMessage','AUTHENTICATION_JWT_SECRET','editflow','Error\x20creating\x20group','Erro\x20ao\x20deletar\x20a\x20conversa:\x20','\x20mensagens\x20de\x20','editScheduleMessage','greater','uazapiSendText','footerText','):\x20Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos:\x20','://','):\x20Deletando\x20fluxo...','startsWith','contactname','temp-','varedit','getMinutes','pino','stickerMessage','leadInfo.customFields.','AUTHENTICATION_TYPE','archive','sticker','upsertChats','uuid','Erro\x20ao\x20atualizar\x20AutomateSystem:','getRandomText','.pdf','hex','PREFIX_KEY','Bad\x20Request','updateFlowConfig','contact_blacklist','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','Esse\x20fluxo\x20expirou','buffer','groupName','REDIS','instance','documentMessage','currency','readMessages','document','*\x0a\x0a','documentWithCaptionMessage','LEVEL','chats.set','local_map','Imagem\x20não\x20encontrada','scheduled','):\x20Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20','Error\x20in\x20markMessageAsRead:','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','MESSAGES_UPDATE','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','optionDescription','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','):\x20nextBlock.uazapi.name','\x1b[32m','desativadoFluxoAte','qrCode','contactHandle','messages.update','sendPresenceUpdate','VERBOSE','\x0aFN:','STORE_CONTACTS','STORE_CLEANING_TERMINAL','close','All_Instances_Config','getBase64FromMediaMessage','groups_ignore','fetchLatestBaileysVersion','creds.update','routerPath','true','less','certonly','):\x20não\x20encontrou','number','revokeInviteCode','exports','/create','Erro\x20ao\x20deletar\x20chat:','createFlow','remoteJidsRemaining','URI','success','API_KEY','jsonschema','label','LabelModel','setting','editflowcondition','hostname','writeFileSync','locked','\x0a38.154.227.167:5868:bkcihaei:jxnd6wd97u0s\x0a185.199.229.156:7492:bkcihaei:jxnd6wd97u0s\x0a185.199.228.220:7300:bkcihaei:jxnd6wd97u0s\x0a185.199.231.45:8382:bkcihaei:jxnd6wd97u0s\x0a188.74.210.207:6286:bkcihaei:jxnd6wd97u0s\x0a188.74.183.10:8279:bkcihaei:jxnd6wd97u0s\x0a188.74.210.21:6100:bkcihaei:jxnd6wd97u0s\x0a45.155.68.129:8133:bkcihaei:jxnd6wd97u0s\x0a154.95.36.199:6893:bkcihaei:jxnd6wd97u0s\x0a45.94.47.66:8110:bkcihaei:jxnd6wd97u0s\x0a','createWebhook','blockLogs','Configuração\x20de\x20proxy\x20inválida\x20gerada.','Processing\x20audio','linkPreview','g-t','/message','group-participants.update','\x20-y','ON\x20-\x20dbName:\x20','CORS','):\x20Flow\x20desativado','TEL','./.git/config','DATABASE','stopIfLastReturnedError','prefixCommand','.webp','shutdown\x20-r\x20now','events','):\x20Entrou\x20na\x20função\x20saveReply','updateReplyOption','Certbot\x20executado\x20com\x20sucesso.','model','join','\x20minutos.\x20Será\x20às\x20','SEND_MESSAGE','getLabelModelForOwner','open','addBlock','\x1b[32m%s\x1b[0m','lastInteraction','response','email','groups.update','getFlowModelForOwner','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','user','nome','ReplyOption\x20com\x20ID\x20','FlowModel','capitalizedWords','replaceVariablesInObject','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','toString','URL:','get','groupId','Erro\x20ao\x20aplicar\x20varedit:\x20','AUTHENTICATION_API_KEY','urlOrBase64','\x20segundos','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','Erro\x20ao\x20importar\x20chats:','everyOne','status.instance','findById','-whatsapp-api','notas','debug','NextBlock','url','Erro\x20ao\x20atualizar\x20o\x20arquivo\x20env.yml:','Cache-Control','spawn','):\x20Editando\x20bloco...','TYPE','fetchProfilePicture','enabled','content-type','deleteflow','chats.update','Last\x20message\x20not\x20found','delayMessage','fromObject','remove.instance','caption','DEBUG','_Flows','):\x20conversation.status:\x20','toUpperCase','RemoveChatLabel','condition','):\x20Buscando\x20flow...','):\x20Criou\x20conversa\x20no\x20startFlow:','\x1b[37m%s\x1b[0m','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','@broadcast','checkAndUpdateChatStatus','DELIVERY_ACK','\x1b[36m%s\x1b[0m','toFile','Error\x20in\x20scheduleNextCheck:\x20','/*.json','pop','sort','generateWAMessageFromContent','Comando\x20desconhecido','warn','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo\x20','reviver','entries','\x5c$&','inviteCode','Falta\x20informação\x20para\x20a\x20chamada\x20API','label_jid','badSession','statusCode','\x20minutos...','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','displayName','Error\x20updating\x20privacy\x20settings','copy','mimetype','mongodb://','deleteBlock','updateAll','Type\x20defined\x20as\x20audio','processConditions','tryProxy','silent','remote\x20\x22origin\x22','sendReaction','processblock','eventemitter2','testProxy','Log\x20out\x20instance:\x20','/instance/fetchInstances','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','Variável\x20não\x20encontrada!','messages'];a0_0x5def=function(){return _0x3b12f0;};return a0_0x5def();}const a0_0x397951=a0_0x44db;(function(_0x5d7bc3,_0x4d1200){const _0xcd37b0=a0_0x44db,_0x3bc4a6=_0x5d7bc3();while(!![]){try{const _0x5621a2=parseInt(_0xcd37b0(0x781))/0x1*(parseInt(_0xcd37b0(0x416))/0x2)+parseInt(_0xcd37b0(0x32d))/0x3*(-parseInt(_0xcd37b0(0x372))/0x4)+-parseInt(_0xcd37b0(0x441))/0x5+parseInt(_0xcd37b0(0x572))/0x6+parseInt(_0xcd37b0(0x6c0))/0x7*(parseInt(_0xcd37b0(0x504))/0x8)+parseInt(_0xcd37b0(0x4a3))/0x9*(parseInt(_0xcd37b0(0x71d))/0xa)+-parseInt(_0xcd37b0(0x1fb))/0xb*(parseInt(_0xcd37b0(0x477))/0xc);if(_0x5621a2===_0x4d1200)break;else _0x3bc4a6['push'](_0x3bc4a6['shift']());}catch(_0x570f8c){_0x3bc4a6['push'](_0x3bc4a6['shift']());}}}(a0_0x5def,0xaa1c6));var xr=Object[a0_0x397951(0x409)],Ie=Object[a0_0x397951(0x31d)],Pr=Object[a0_0x397951(0x20f)],_r=Object['getOwnPropertyNames'],$r=Object[a0_0x397951(0x20b)],kr=Object[a0_0x397951(0x483)][a0_0x397951(0x68f)],Lr=(_0x3d4f1e,_0x156aa6)=>{for(var _0x480c9b in _0x156aa6)Ie(_0x3d4f1e,_0x480c9b,{'get':_0x156aa6[_0x480c9b],'enumerable':!0x0});},Ds=(_0x8e5c7d,_0x3a11e1,_0x25224f,_0x50b1fd)=>{const _0x51e16d=a0_0x397951;if(_0x3a11e1&&typeof _0x3a11e1==_0x51e16d(0x2a1)||typeof _0x3a11e1=='function'){for(let _0x358a52 of _r(_0x3a11e1))!kr[_0x51e16d(0x2a8)](_0x8e5c7d,_0x358a52)&&_0x358a52!==_0x25224f&&Ie(_0x8e5c7d,_0x358a52,{'get':()=>_0x3a11e1[_0x358a52],'enumerable':!(_0x50b1fd=Pr(_0x3a11e1,_0x358a52))||_0x50b1fd[_0x51e16d(0x746)]});}return _0x8e5c7d;},R=(_0x3b7847,_0x4d8ca9,_0x17b299)=>(_0x17b299=_0x3b7847!=null?xr($r(_0x3b7847)):{},Ds(_0x4d8ca9||!_0x3b7847||!_0x3b7847[a0_0x397951(0x42d)]?Ie(_0x17b299,'default',{'value':_0x3b7847,'enumerable':!0x0}):_0x17b299,_0x3b7847)),Fr=_0x62fe18=>Ds(Ie({},a0_0x397951(0x42d),{'value':!0x0}),_0x62fe18),zo={};Lr(zo,{'subdomain':()=>Ms}),module[a0_0x397951(0x5e5)]=Fr(zo);var Rr=R(require('compression')),Ps=require('fs'),_s=require(a0_0x397951(0x717)),$s=require(a0_0x397951(0x267)),De=require('path'),ae=process[a0_0x397951(0x321)](),pe=(0x0,De[a0_0x397951(0x60e)])(ae,a0_0x397951(0x72c)),xs=(0x0,De[a0_0x397951(0x60e)])(ae,a0_0x397951(0x217)),ji=(0x0,De['join'])(ae,a0_0x397951(0x1fd),a0_0x397951(0x417)),Qt=class{constructor(){const _0xcce2f0=a0_0x397951;this[_0xcce2f0(0x35d)]();}[a0_0x397951(0x624)](_0x1a2698){const _0x4d5bdb=a0_0x397951;return this[_0x4d5bdb(0x3c6)][_0x1a2698];}[a0_0x397951(0x35d)](){const _0x456904=a0_0x397951;this[_0x456904(0x3c6)]=process['env']?.[_0x456904(0x6a5)]!=='true'?this[_0x456904(0x762)]():this[_0x456904(0x75e)](),process['env']?.[_0x456904(0x6a5)]===_0x456904(0x5df)&&(this[_0x456904(0x3c6)][_0x456904(0x712)][_0x456904(0x639)]=_0x456904(0x51e),this[_0x456904(0x3c6)][_0x456904(0x712)][_0x456904(0x2dd)]=Number['parseInt'](process['env']?.[_0x456904(0x2e9)]??_0x456904(0x376)));}[a0_0x397951(0x762)](){const _0x2011d8=a0_0x397951;return(0x0,_s[_0x2011d8(0x743)])((0x0,Ps['readFileSync'])((0x0,$s['join'])(xs,_0x2011d8(0x2c1)),{'encoding':_0x2011d8(0x41c)}));}[a0_0x397951(0x75e)](){const _0x492e8c=a0_0x397951;return{'SERVER':{'TYPE':process[_0x492e8c(0x3c6)][_0x492e8c(0x30b)],'PORT':Number[_0x492e8c(0x474)](process[_0x492e8c(0x3c6)][_0x492e8c(0x2e9)]),'URL':process[_0x492e8c(0x3c6)][_0x492e8c(0x54b)]},'CORS':{'ORIGIN':process[_0x492e8c(0x3c6)][_0x492e8c(0x76d)][_0x492e8c(0x4dc)](','),'METHODS':process['env'][_0x492e8c(0x68b)]['split'](','),'CREDENTIALS':process[_0x492e8c(0x3c6)]?.[_0x492e8c(0x704)]===_0x492e8c(0x5df)},'SSL_CONF':{'PRIVKEY':process['env']?.['SSL_CONF_PRIVKEY'],'FULLCHAIN':process[_0x492e8c(0x3c6)]?.[_0x492e8c(0x4f7)]},'STORE':{'CLEANING_INTERVAL':Number[_0x492e8c(0x2af)](process['env']?.[_0x492e8c(0x5d7)])?Number[_0x492e8c(0x474)](process[_0x492e8c(0x3c6)][_0x492e8c(0x5d7)]):void 0x0,'MESSAGES':process[_0x492e8c(0x3c6)]?.['STORE_MESSAGE']==='true','CONTACTS':process['env']?.[_0x492e8c(0x5d6)]===_0x492e8c(0x5df),'CHATS':process[_0x492e8c(0x3c6)]?.[_0x492e8c(0x1d5)]===_0x492e8c(0x5df)},'DATABASE':{'CONNECTION':{'HOST':process[_0x492e8c(0x3c6)]?.[_0x492e8c(0x229)],'PORT':Number[_0x492e8c(0x474)](process[_0x492e8c(0x3c6)]?.[_0x492e8c(0x229)]),'USER':process[_0x492e8c(0x3c6)][_0x492e8c(0x3b7)],'PASSWORD':process[_0x492e8c(0x3c6)][_0x492e8c(0x47b)],'URI':process['env']['DATABASE_CONNECTION_URI'],'DB_PREFIX_NAME':process[_0x492e8c(0x3c6)]['DATABASE_CONNECTION_DB_PREFIX_NAME']},'ENABLED':process['env']?.[_0x492e8c(0x1ab)]===_0x492e8c(0x5df)},'REDIS':{'ENABLED':process[_0x492e8c(0x3c6)]?.[_0x492e8c(0x465)]==='true','URI':process[_0x492e8c(0x3c6)]['REDIS_URI']||_0x492e8c(0x4bc),'PREFIX_KEY':process[_0x492e8c(0x3c6)][_0x492e8c(0x50b)]||_0x492e8c(0x28d)},'LOG':{'LEVEL':process[_0x492e8c(0x3c6)]?.[_0x492e8c(0x3d6)]['split'](','),'COLOR':process['env']?.[_0x492e8c(0x754)]===_0x492e8c(0x5df)},'AUTHENTICATION':{'TYPE':process[_0x492e8c(0x3c6)][_0x492e8c(0x5a8)],'API_KEY':{'KEY':process['env'][_0x492e8c(0x627)]},'JWT':{'EXPIRIN_IN':Number['isInteger'](process['env']?.[_0x492e8c(0x45d)])?Number[_0x492e8c(0x474)](process['env'][_0x492e8c(0x45d)]):0xe10,'SECRET':process[_0x492e8c(0x3c6)][_0x492e8c(0x594)]}}};}},b=new Qt(),Tr=R(require(a0_0x397951(0x2c0))),de=R(require(a0_0x397951(0x531))),As=require(a0_0x397951(0x267)),Yt=R(require('dayjs')),Xt=(_0x1e9f93=>(_0x1e9f93[a0_0x397951(0x535)]=a0_0x397951(0x5ce),_0x1e9f93[a0_0x397951(0x40b)]='\x1b[34m',_0x1e9f93[a0_0x397951(0x3ec)]='\x1b[33m',_0x1e9f93[a0_0x397951(0x33f)]=a0_0x397951(0x4d0),_0x1e9f93[a0_0x397951(0x644)]=a0_0x397951(0x526),_0x1e9f93['VERBOSE']=a0_0x397951(0x309),_0x1e9f93[a0_0x397951(0x6a0)]=a0_0x397951(0x1a6),_0x1e9f93))(Xt||{}),ks=(_0x51feaa=>(_0x51feaa[a0_0x397951(0x535)]=a0_0x397951(0x614),_0x51feaa['DARK']=a0_0x397951(0x202),_0x51feaa[a0_0x397951(0x40b)]=a0_0x397951(0x455),_0x51feaa[a0_0x397951(0x3ec)]=a0_0x397951(0x395),_0x51feaa[a0_0x397951(0x33f)]='\x1b[31m%s\x1b[0m',_0x51feaa['DEBUG']=a0_0x397951(0x651),_0x51feaa[a0_0x397951(0x5d4)]=a0_0x397951(0x64c),_0x51feaa))(ks||{}),Ls=(_0x35ced2=>(_0x35ced2[a0_0x397951(0x535)]=a0_0x397951(0x535),_0x35ced2['WARN']=a0_0x397951(0x3ec),_0x35ced2[a0_0x397951(0x40b)]=a0_0x397951(0x40b),_0x35ced2[a0_0x397951(0x6a0)]='DARK',_0x35ced2[a0_0x397951(0x33f)]='ERROR',_0x35ced2[a0_0x397951(0x644)]=a0_0x397951(0x644),_0x35ced2[a0_0x397951(0x5d4)]=a0_0x397951(0x5d4),_0x35ced2))(Ls||{}),Fs=(_0x3a9bc0=>(_0x3a9bc0['LOG']=a0_0x397951(0x1c0),_0x3a9bc0[a0_0x397951(0x40b)]='\x1b[44m',_0x3a9bc0[a0_0x397951(0x3ec)]='\x1b[43m',_0x3a9bc0[a0_0x397951(0x6a0)]=a0_0x397951(0x199),_0x3a9bc0[a0_0x397951(0x33f)]=a0_0x397951(0x563),_0x3a9bc0[a0_0x397951(0x644)]='\x1b[46m',_0x3a9bc0[a0_0x397951(0x5d4)]=a0_0x397951(0x1c4),_0x3a9bc0))(Fs||{}),v=class{constructor(_0x50232a=a0_0x397951(0x24e)){const _0x34930a=a0_0x397951;this[_0x34930a(0x397)]=_0x50232a,this[_0x34930a(0x4d2)]=b;}[a0_0x397951(0x4ac)](_0x1dcef3){const _0x4c7706=a0_0x397951;this[_0x4c7706(0x397)]=_0x1dcef3;}[a0_0x397951(0x1b9)](_0x393782,_0x21b8f1){const _0x32a60e=a0_0x397951;let _0x118826=[];this['configService'][_0x32a60e(0x624)]('LOG')[_0x32a60e(0x5c1)][_0x32a60e(0x334)](_0x2c12f5=>_0x118826[_0x32a60e(0x367)](Ls[_0x2c12f5]));let _0xbf40ae=typeof _0x393782;_0x118826[_0x32a60e(0x2fb)](_0x21b8f1)&&(b[_0x32a60e(0x624)](_0x32a60e(0x535))[_0x32a60e(0x6c7)]?(console[_0x32a60e(0x1aa)](_0x32a60e(0x6ca)+ks[_0x21b8f1],_0x32a60e(0x58d),(0x0,Yt['default'])()['format'](_0x32a60e(0x383)),_0x32a60e(0x3ae),Xt[_0x21b8f1]+Fs[_0x21b8f1]+_0x32a60e(0x6ca),_0x21b8f1+_0x32a60e(0x793),_0x32a60e(0x528),this['context']+_0x32a60e(0x3ae),Xt[_0x21b8f1],_0xbf40ae!=='object'?_0x393782:'','\x1b[0m'),_0xbf40ae===_0x32a60e(0x2a1)&&console[_0x32a60e(0x1aa)](_0x393782,'\x0a')):console[_0x32a60e(0x1aa)]((0x0,Yt[_0x32a60e(0x349)])()['format'](_0x32a60e(0x16b)),_0x21b8f1+'\x20',''+this[_0x32a60e(0x397)],_0x393782));}[a0_0x397951(0x1aa)](_0x55d90e){const _0x523c44=a0_0x397951;this[_0x523c44(0x1b9)](_0x55d90e,_0x523c44(0x535));}[a0_0x397951(0x215)](_0x18dccd){const _0x37aa32=a0_0x397951;this[_0x37aa32(0x1b9)](_0x18dccd,'INFO');}[a0_0x397951(0x659)](_0x5816a7){const _0x3410ee=a0_0x397951;this['console'](_0x5816a7,_0x3410ee(0x3ec));}[a0_0x397951(0x6aa)](_0x333e0a){const _0x4d155e=a0_0x397951;this[_0x4d155e(0x1b9)](_0x333e0a,_0x4d155e(0x33f));}[a0_0x397951(0x545)](_0x376db1){const _0x5c0a1e=a0_0x397951;this[_0x5c0a1e(0x1b9)](_0x376db1,_0x5c0a1e(0x5d4));}[a0_0x397951(0x632)](_0x1b1700){const _0x4ae5e3=a0_0x397951;this['console'](_0x1b1700,_0x4ae5e3(0x644));}[a0_0x397951(0x1a1)](_0x4fee69){const _0x4098b7=a0_0x397951;this['console'](_0x4fee69,_0x4098b7(0x6a0));}};function Us(){const _0x1955a9=a0_0x397951;process['on'](_0x1955a9(0x548),(_0x61d735,_0x465760)=>{const _0xd9258b=_0x1955a9;new v(_0xd9258b(0x548))[_0xd9258b(0x6aa)]({'origin':_0x465760,'stderr':process[_0xd9258b(0x726)]['fd'],'error':_0x61d735});}),process['on']('unhandledRejection',(_0x382d8b,_0x10ec6c)=>{const _0x21bdea=_0x1955a9;new v(_0x21bdea(0x71a))[_0x21bdea(0x6aa)]({'origin':_0x10ec6c,'stderr':process[_0x21bdea(0x726)]['fd'],'error':_0x382d8b});});}var Js=R(require(a0_0x397951(0x673))),Zt=new Js[(a0_0x397951(0x349))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),xe=require(a0_0x397951(0x4b9)),es=R(require(a0_0x397951(0x4b9))),Ur=new v(a0_0x397951(0x4e0)),V=b[a0_0x397951(0x624)]('DATABASE'),N=V[a0_0x397951(0x1f6)]?V[a0_0x397951(0x271)][a0_0x397951(0x5ea)]?es[a0_0x397951(0x349)][a0_0x397951(0x1ff)](V['CONNECTION']['URI'],{'dbName':V[a0_0x397951(0x271)][a0_0x397951(0x1ed)]+a0_0x397951(0x630)}):es[a0_0x397951(0x349)]['createConnection'](a0_0x397951(0x669)+V['CONNECTION']['HOST']+':'+V[a0_0x397951(0x271)][a0_0x397951(0x2dd)]+a0_0x397951(0x2e0),{'user':V['CONNECTION']['USER'],'pass':V[a0_0x397951(0x271)]['PASSWORD'],'dbName':V[a0_0x397951(0x271)]['DB_PREFIX_NAME']+a0_0x397951(0x630)}):null;V[a0_0x397951(0x1f6)]&&Ur['info'](a0_0x397951(0x5ff)+N[a0_0x397951(0x694)]);var Jr=new xe['Schema']({'_id':{'type':String,'_id':!0x0},'value':{'type':String},'chatId':{'type':String}}),jr=new xe[(a0_0x397951(0x1b8))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[Jr],'default':[]},'statusLead':{'type':String},'note':{'type':String},'disableFlowsUntil':{'type':Number},'serviceOpen':{'type':Boolean},'assignedTo':{'type':String}},{'_id':!0x1}),qr=new xe[(a0_0x397951(0x1b8))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':jr,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'group_size':{'type':Number},'group_announce':{'type':Boolean},'imported':{'type':Boolean},'labels':{'type':[String]}}),js=_0x4c7272=>{const _0x3108de=a0_0x397951;let _0x22f052='z_'+_0x4c7272+_0x3108de(0x491);return N?.[_0x3108de(0x60d)](_0x3108de(0x247),qr,_0x22f052);},qs=require('mongoose'),Vr=new qs['Schema']({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String,'minlength':0x1},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),Vs=_0x2726cc=>{const _0x313d8e=a0_0x397951;let _0x205304='z_'+_0x2726cc+_0x313d8e(0x6a2);return N?.[_0x313d8e(0x60d)]('ContactModel',Vr,_0x205304);},Bs=require(a0_0x397951(0x4b9)),Br=new Bs['Schema']({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String}}),Gs=_0x5dd702=>{const _0x561405=a0_0x397951;let _0x23635f='z_'+_0x5dd702+_0x561405(0x3e1);return N?.[_0x561405(0x60d)]('MessageModel',Br,_0x23635f);},Ws=require(a0_0x397951(0x4b9)),ts=class{},Gr=new Ws[(a0_0x397951(0x1b8))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'proxy':{'type':String}}),zs=N?.['model'](ts[a0_0x397951(0x346)],Gr,a0_0x397951(0x6fb)),Hs=require(a0_0x397951(0x4b9)),ss=class{},Ks=new Hs[(a0_0x397951(0x1b8))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});Ks[a0_0x397951(0x452)](a0_0x397951(0x3a8),function(_0x37089b){const _0x3dbb6b=a0_0x397951;delete this[_0x3dbb6b(0x6d8)],delete this[_0x3dbb6b(0x263)],delete this['flowPrefixCommand'],delete this['flowStopConversation'],delete this[_0x3dbb6b(0x391)],_0x37089b();});var Qs=N?.[a0_0x397951(0x60d)](ss[a0_0x397951(0x346)],Ks,a0_0x397951(0x185)),x=require(a0_0x397951(0x4b9)),Pe=class{},Ys=new x[(a0_0x397951(0x1b8))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),as=new x[(a0_0x397951(0x1b8))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),Wr=new x[(a0_0x397951(0x1b8))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x397951(0x1b1)},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x397951(0x463)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x397951(0x5b6)},'pollErrorMessage':{'type':String,'default':a0_0x397951(0x365)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),Xs=new x[(a0_0x397951(0x1b8))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),zr=new x[(a0_0x397951(0x1b8))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String}},{'_id':!0x1}),Hr=new x[(a0_0x397951(0x1b8))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Zs=new x['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':Wr},'apirequest':zr,'stopMinutes':{'type':String},'goToFlow':{'type':String},'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa}}),cs=new x[(a0_0x397951(0x1b8))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),ea=new x[(a0_0x397951(0x1b8))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),rs=class{},ls=new x[(a0_0x397951(0x1b8))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'readMessages':{'type':Boolean,'default':!0x1},'testingWith':{'type':String},'startCommandWord':{'type':String,'default':function(){const _0x19d45b=a0_0x397951;return _0x19d45b(0x4a4)+Math[_0x19d45b(0x3a3)]()[_0x19d45b(0x622)](0x24)[_0x19d45b(0x476)](0x2,0x7);},'required':!0x1,'minlength':0x5},'variables':[cs],'variablesNotFound':{'type':[String]},'blocks':[Zs],'groups':[Ys],'conditions':[Xs],'varedits':[ea],'replyOptions':{'type':[as],'default':[]}});ls[a0_0x397951(0x452)](a0_0x397951(0x3a8),function(_0x19cf4a){const _0x2f4bc8=a0_0x397951;let _0x44352e=new Set(),_0x4d3786=new Set(this[_0x2f4bc8(0x2cb)]?.[_0x2f4bc8(0x530)](_0x322332=>_0x322332['name'])),_0x90a8c4=JSON[_0x2f4bc8(0x38d)](this),_0xb57848=/{{(?!_)([^}]*)}}/g,_0x205c02;for(;(_0x205c02=_0xb57848[_0x2f4bc8(0x252)](_0x90a8c4))!==null;)_0x4d3786[_0x2f4bc8(0x41b)](_0x205c02[0x1])||_0x44352e[_0x2f4bc8(0x78b)](_0x205c02[0x1]);_0x44352e[_0x2f4bc8(0x460)]>0x0?(console['warn'](_0x2f4bc8(0x772),Array[_0x2f4bc8(0x430)](_0x44352e)),this[_0x2f4bc8(0x70e)]=Array[_0x2f4bc8(0x430)](_0x44352e)):this[_0x2f4bc8(0x70e)]=[],_0x19cf4a();});var ta=_0x5b4ae6=>{const _0x2183c8=a0_0x397951;let _0x47034e='z_'+_0x5b4ae6+_0x2183c8(0x645);return N?.[_0x2183c8(0x60d)](_0x2183c8(0x61e),ls,_0x47034e);},sa=N?.[a0_0x397951(0x60d)](rs[a0_0x397951(0x346)],ls,'flow'),Kr=new x[(a0_0x397951(0x1b8))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[cs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[Hr]},{'_id':!0x1}),os=class{},aa=new x['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[cs],'blocks':[Zs],'groups':[Ys],'conditions':[Xs],'varedits':[ea],'replyOptions':{'type':[as],'default':[]},'chatLog':Kr,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x397951(0x612)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x397951(0x5b6)},'waitingMenu_replyOptions':{'type':[as],'default':[]}}),ra=_0x511615=>{const _0x19005f=a0_0x397951;let _0x1cc2fd='z_'+_0x511615+_0x19005f(0x1f5);return N?.[_0x19005f(0x60d)](_0x19005f(0x1ce),aa,_0x1cc2fd);},oa=N?.['model'](os[a0_0x397951(0x346)],aa,a0_0x397951(0x589)),is=class{},Qr=new x[(a0_0x397951(0x1b8))]({'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),Yr=new x[(a0_0x397951(0x1b8))]({'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'mediatype':{'type':String},'fileName':{'type':String}},{'_id':!0x1}),ia=new x[(a0_0x397951(0x1b8))]({'owner':{'type':String},'status':{'type':String,'default':a0_0x397951(0x5c5)},'info':{'type':String},'type':{'type':String},'flowName':{'type':String},'message':{'type':Yr,'default':{}},'remoteJids':{'type':[String],'default':[]},'when':{'type':Number},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'messagesSend':{'type':[Qr],'default':[]},'remoteJidsRemaining':{'type':[String],'default':[]},'startSend':{'type':Number}}),na=_0x5aaa3c=>{const _0x41227e=a0_0x397951;let _0x51fa61='z_'+_0x5aaa3c+_0x41227e(0x520);return N?.['model'](_0x41227e(0x459),ia,_0x51fa61);},ca=N?.[a0_0x397951(0x60d)](is[a0_0x397951(0x346)],ia,a0_0x397951(0x1d6)),ns=class{},Xr=new x[(a0_0x397951(0x1b8))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Zr=new x['Schema']({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'},'stopConversation':{'type':String,'default':a0_0x397951(0x570)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa}},{'_id':!0x1}),eo=new x['Schema']({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),to=new x[(a0_0x397951(0x1b8))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[eo]},'customFields':{'type':[Xr]},'flowConfig':{'type':Zr,'default':{}}}),_e=N?.[a0_0x397951(0x60d)](ns['name'],to,a0_0x397951(0x745)),la=require('mongoose'),so=new la[(a0_0x397951(0x1b8))]({'_id':{'type':String},'name':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),ua=_0x4c5314=>{const _0x30f575=a0_0x397951;let _0x1d2e00='z_'+_0x4c5314+'_Labels';return N?.[_0x30f575(0x60d)](_0x30f575(0x5ef),so,_0x1d2e00);},I=class{constructor(_0x27121c){const _0x291e61=a0_0x397951;this[_0x291e61(0x3ee)]=_0x27121c[_0x291e61(0x624)](_0x291e61(0x604));}};function A(_0x341d75){const _0x187322=a0_0x397951;let _0x9605f2={};for(let [_0x37ee97,_0x3f81b0]of Object[_0x187322(0x65c)](_0x341d75))if(typeof _0x3f81b0==_0x187322(0x2a1)&&!Array[_0x187322(0x43d)](_0x3f81b0)){for(let [_0x4a47f7,_0x59ebff]of Object['entries'](_0x3f81b0))_0x9605f2[_0x37ee97+'.'+_0x4a47f7]=_0x59ebff;}else _0x9605f2[_0x37ee97]=_0x3f81b0;return _0x9605f2;}function a0_0x44db(_0x17fab3,_0x5078a1){const _0x5defa7=a0_0x5def();return a0_0x44db=function(_0x44db9c,_0x492d82){_0x44db9c=_0x44db9c-0x150;let _0x833e39=_0x5defa7[_0x44db9c];return _0x833e39;},a0_0x44db(_0x17fab3,_0x5078a1);}var $e=class{constructor(_0x319a6a,_0x2d47c9,_0x5b5e52,_0xabe258,_0x412963,_0x16b294,_0x3c92c8,_0xe82a97,_0x7034b7,_0x254af1,_0x228ada){const _0x1a2fe4=a0_0x397951;this[_0x1a2fe4(0x15c)]=_0x319a6a,this['chat']=_0x2d47c9,this[_0x1a2fe4(0x37e)]=_0x5b5e52,this[_0x1a2fe4(0x185)]=_0xabe258,this[_0x1a2fe4(0x417)]=_0x412963,this[_0x1a2fe4(0x6d4)]=_0x16b294,this[_0x1a2fe4(0x589)]=_0x3c92c8,this[_0x1a2fe4(0x5ee)]=_0xe82a97,this[_0x1a2fe4(0x343)]=_0x7034b7,this[_0x1a2fe4(0x4ca)]=_0x254af1,this[_0x1a2fe4(0x1b6)]=_0x228ada;}get[a0_0x397951(0x337)](){const _0x153b31=a0_0x397951;return this[_0x153b31(0x1b6)];}},ke=class{},Le=class extends I{[a0_0x397951(0x4e4)](_0x16a732){return Gs(_0x16a732);}async[a0_0x397951(0x1f0)](_0x27d532,_0xd33f5){const _0x113f4a=a0_0x397951;if(_0x27d532[_0x113f4a(0x4c6)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this['getMessageModelForOwner'](_0xd33f5)[_0x113f4a(0x701)]([..._0x27d532]))['length']};}catch(_0x3f5a84){return console[_0x113f4a(0x1aa)](_0x113f4a(0x175),_0x3f5a84),_0x3f5a84;}}async[a0_0x397951(0x317)](_0x94add5,_0x44ffc4){const _0x11a2c8=a0_0x397951;try{let _0xdfe6b7=this['getMessageModelForOwner'](_0x44ffc4),_0x4ab3bb=A(_0x94add5[_0x11a2c8(0x3f8)]);return await _0xdfe6b7[_0x11a2c8(0x317)](_0x4ab3bb)['sort']({'messageTimestamp':-0x1})['limit'](_0x94add5?.['limit']??0x0)[_0x11a2c8(0x49e)]();}catch{return[];}}async[a0_0x397951(0x777)](_0x2cec6f,_0x239f61){const _0x42276b=a0_0x397951;try{let _0x59a936=this['getMessageModelForOwner'](_0x239f61),_0x2e160f=A(_0x2cec6f['where']);await _0x59a936[_0x42276b(0x315)](_0x2e160f);}catch(_0x1855dc){console[_0x42276b(0x6aa)](_0x1855dc);}}async[a0_0x397951(0x166)](_0x40af50,_0x58ea08,_0x576907){const _0x108a6c=a0_0x397951;try{let _0x3f6299=this[_0x108a6c(0x4e4)](_0x576907),_0x374d71=A(_0x40af50[_0x108a6c(0x3f8)]);return await _0x3f6299[_0x108a6c(0x73d)](_0x374d71,{'$set':_0x58ea08},{'new':!0x0});}catch(_0xe6a0d8){throw console['error'](_0xe6a0d8),_0xe6a0d8;}}async[a0_0x397951(0x701)](_0x3b53e9,_0x33d03c){const _0x2a70d2=a0_0x397951;if(_0x3b53e9[_0x2a70d2(0x4c6)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x2a70d2(0x4e4)](_0x33d03c)[_0x2a70d2(0x701)]([..._0x3b53e9]))[_0x2a70d2(0x4c6)]};}catch(_0x25a9a8){return console[_0x2a70d2(0x1aa)](_0x2a70d2(0x175),_0x25a9a8),_0x25a9a8;}}async['deleteAll'](_0x4110cc){const _0x1b0724=a0_0x397951;try{return await this[_0x1b0724(0x4e4)](_0x4110cc)['collection'][_0x1b0724(0x2f7)](),{'success':!0x0};}catch(_0x571a38){return console[_0x1b0724(0x6aa)](_0x571a38),{'success':!0x1,'error':_0x571a38};}}},mr=R(require(a0_0x397951(0x7a3))),y=R(require(a0_0x397951(0x6cd))),Me=require('fs'),F=R(require('path')),se=R(require('axios')),hr=require(a0_0x397951(0x5ac)),fr=R(require(a0_0x397951(0x6ba))),yr=R(require(a0_0x397951(0x3ff))),da=[a0_0x397951(0x1b7),'documentMessage',a0_0x397951(0x478),a0_0x397951(0x1bf),a0_0x397951(0x5a6)],pa=[a0_0x397951(0x329),a0_0x397951(0x5c0),a0_0x397951(0x4c1),a0_0x397951(0x792)],bs=require('os'),At=R(require(a0_0x397951(0x5a5))),Dt=require(a0_0x397951(0x1f3)),Ot=require(a0_0x397951(0x44a)),ne=R(require(a0_0x397951(0x4b9))),$=require(a0_0x397951(0x50d)),ge=class{constructor(_0x1b35eb,_0x4f4dd2,_0x30bc30){const _0x48b4a3=a0_0x397951;this[_0x48b4a3(0x2f4)]=_0x1b35eb,this[_0x48b4a3(0x562)]=_0x4f4dd2,this['name']=_0x30bc30;}},Fe=class{},Ue=class{},we=class{},Je=class{},je=class{},me=class{},qe=class{},Ve=class{},Be=class{},Ge=class{},Mt=R(require(a0_0x397951(0x531))),ga=require('fs'),ma=require(a0_0x397951(0x267));async function We(_0x2cf3c5){const _0x28bad4=a0_0x397951;let _0x58a83e=B[_0x28bad4(0x725)][_0x2cf3c5];if(V[_0x28bad4(0x1f6)]){let _0x988a6=N[_0x28bad4(0x773)]()['db'](V['CONNECTION'][_0x28bad4(0x1ed)]+'-instances')[_0x28bad4(0x264)](_0x2cf3c5);return _0x58a83e||(await _0x988a6[_0x28bad4(0x317)]({})[_0x28bad4(0x57b)]())[_0x28bad4(0x4c6)]>0x0;}return _0x58a83e||(0x0,ga[_0x28bad4(0x79d)])((0x0,ma['join'])(pe,_0x2cf3c5));}async function ha(_0x261bf4,_0x98dbe6,_0x58eec2){const _0x1d0eec=a0_0x397951;if(_0x261bf4[_0x1d0eec(0x4e3)][_0x1d0eec(0x2fb)](_0x1d0eec(0x20d))||_0x261bf4[_0x1d0eec(0x4e3)][_0x1d0eec(0x2fb)]('/instance/fetchInstances')||_0x261bf4['originalUrl'][_0x1d0eec(0x2fb)](_0x1d0eec(0x485))||_0x261bf4['originalUrl'][_0x1d0eec(0x2fb)]('/config')||_0x261bf4[_0x1d0eec(0x4e3)]['includes'](_0x1d0eec(0x424))||_0x261bf4[_0x1d0eec(0x4e3)][_0x1d0eec(0x2fb)](_0x1d0eec(0x36e))||_0x261bf4[_0x1d0eec(0x4e3)][_0x1d0eec(0x2fb)](_0x1d0eec(0x316)))return _0x58eec2();let _0x4dd5b6=_0x261bf4[_0x1d0eec(0x539)];if(!_0x4dd5b6?.[_0x1d0eec(0x1df)])throw new m('instanceName\x20not\x20provided.');if(!await We(_0x4dd5b6['instanceName']))throw new L(_0x1d0eec(0x47d)+_0x4dd5b6[_0x1d0eec(0x1df)]+'\x20instance\x20does\x20not\x20exist');_0x58eec2();}async function fa(_0x3ae00b,_0xe38aac,_0xe85140){const _0x2f5ad3=a0_0x397951;if(_0x3ae00b[_0x2f5ad3(0x4e3)][_0x2f5ad3(0x2fb)](_0x2f5ad3(0x20d))){let _0x895aa=_0x3ae00b['body'];if(await We(_0x895aa[_0x2f5ad3(0x1df)]))throw new K(_0x2f5ad3(0x449)+_0x895aa[_0x2f5ad3(0x1df)]+_0x2f5ad3(0x269));B[_0x2f5ad3(0x725)][_0x895aa[_0x2f5ad3(0x1df)]]&&delete B[_0x2f5ad3(0x725)][_0x895aa[_0x2f5ad3(0x1df)]];}_0xe85140();}var ya=require(a0_0x397951(0x50d)),wa=R(require(a0_0x397951(0x512))),ze='uazapi',ro=new v(a0_0x397951(0x713));async function oo(_0x365ca8,_0x237488,_0x5906af){const _0x58776c=a0_0x397951;let _0x92e3fd=_0x365ca8[_0x58776c(0x624)](_0x58776c(0x17d));if(_0x92e3fd&&b[_0x58776c(0x624)](_0x58776c(0x6be))[_0x58776c(0x5ec)][_0x58776c(0x566)]!==_0x92e3fd)throw new ee();if(b[_0x58776c(0x624)](_0x58776c(0x6be))[_0x58776c(0x5ec)][_0x58776c(0x566)]===_0x92e3fd)return _0x5906af();if((_0x365ca8[_0x58776c(0x4e3)][_0x58776c(0x2fb)](_0x58776c(0x20d))||_0x365ca8[_0x58776c(0x4e3)][_0x58776c(0x2fb)](_0x58776c(0x676)))&&!_0x92e3fd)throw new K('Missing\x20global\x20api\x20key','The\x20global\x20api\x20key\x20must\x20be\x20set');let _0x236420=b[_0x58776c(0x624)](_0x58776c(0x6be))[_0x58776c(0x582)];try{let [_0x3eb2c3,_0x1d5dae]=_0x365ca8['get']('authorization')['split']('\x20');if(_0x3eb2c3[_0x58776c(0x4b5)]()!==_0x58776c(0x231))throw new ee();if(!(0x0,ya['isJWT'])(_0x1d5dae))throw new ee();let _0x4f7fb7=_0x365ca8[_0x58776c(0x539)],_0x3388cc=wa['default'][_0x58776c(0x40e)](_0x1d5dae,_0x236420[_0x58776c(0x451)],{'ignoreExpiration':_0x236420[_0x58776c(0x556)]===0x0});if(_0x4f7fb7[_0x58776c(0x1df)]!==_0x3388cc[_0x58776c(0x1df)]||ze!==_0x3388cc['apiName'])throw new ee();return _0x5906af();}catch(_0x47bed0){throw ro['error'](_0x47bed0),new ee();}}async function io(_0x4df0c8,_0x24d9ca,_0x3be5cd){const _0x252d6e=a0_0x397951;let _0x16bd74=b[_0x252d6e(0x624)](_0x252d6e(0x6be))[_0x252d6e(0x5ec)],_0x4af06b=_0x4df0c8[_0x252d6e(0x624)]('apikey');if(_0x16bd74[_0x252d6e(0x566)]===_0x4af06b)return _0x3be5cd();if(_0x4df0c8[_0x252d6e(0x4e3)][_0x252d6e(0x2fb)](_0x252d6e(0x20d))){let _0x17b410=He,_0x430215=_0x4df0c8['body'][_0x252d6e(0x1df)];if(_0x17b410&&_0x430215[_0x252d6e(0x4b5)]()[_0x252d6e(0x5a0)](_0x17b410[_0x252d6e(0x4b5)]()))return _0x3be5cd();if(!_0x4af06b)throw new K(_0x252d6e(0x71b),_0x252d6e(0x26d));}if(_0x4df0c8['originalUrl']['includes']('/instance/fetchInstances')&&!_0x4af06b)throw new K(_0x252d6e(0x71b),'The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x4df0c8[_0x252d6e(0x4e3)][_0x252d6e(0x2fb)](_0x252d6e(0x485))&&!_0x4af06b)throw new K(_0x252d6e(0x71b),_0x252d6e(0x26d));if(_0x4df0c8[_0x252d6e(0x4e3)]['includes'](_0x252d6e(0x39d))&&!_0x4af06b)throw new K(_0x252d6e(0x71b),_0x252d6e(0x26d));try{let _0x3e4036=_0x4df0c8[_0x252d6e(0x539)];if((await ce[_0x252d6e(0x417)][_0x252d6e(0x317)](_0x3e4036['instanceName']))[_0x252d6e(0x17d)]===_0x4af06b)return _0x3be5cd();}catch{}throw new ee();}var ba={'jwt':oo,'apikey':io},Za=require(a0_0x397951(0x531)),C=require(a0_0x397951(0x5ac)),E=(..._0x141bc9)=>{const _0x175df2=a0_0x397951;let _0x30595c={};return _0x141bc9[_0x175df2(0x334)](_0x2d508e=>_0x30595c[_0x2d508e]={'minLength':0x1,'description':'The\x20\x22'+_0x2d508e+_0x175df2(0x415)}),{'if':{'propertyNames':{'enum':[..._0x141bc9]}},'then':{'properties':_0x30595c}};},M={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'instanceName':{'type':a0_0x397951(0x22b)}},...E(a0_0x397951(0x1df))},Hn={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'oldToken':{'type':a0_0x397951(0x22b)}},'required':[a0_0x397951(0x204)],...E('oldToken')},Kn={'properties':{'key':{'type':a0_0x397951(0x2a1),'properties':{'id':{'type':a0_0x397951(0x22b)},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]}},'required':['id','remoteJid',a0_0x397951(0x28f)],...E('id',a0_0x397951(0x686))},'message':{'type':a0_0x397951(0x2a1)}}},Q={'properties':{'delay':{'type':a0_0x397951(0x348),'description':a0_0x397951(0x574)},'presence':{'type':a0_0x397951(0x22b),'enum':[a0_0x397951(0x30c),a0_0x397951(0x588),a0_0x397951(0x4a9),a0_0x397951(0x786),'paused']}}},z={'type':a0_0x397951(0x22b),'pattern':a0_0x397951(0x218),'description':'Invalid\x20format'},Sa={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'number':{...z},'options':{...Q},'textMessage':{'type':'object','properties':{'text':{'type':a0_0x397951(0x22b)}},'required':[a0_0x397951(0x4cd)],...E(a0_0x397951(0x4cd))}},'required':[a0_0x397951(0x6b8),a0_0x397951(0x5e3)]},Ea={'type':a0_0x397951(0x22b),'pattern':a0_0x397951(0x15a),'description':'Invalid\x20format'},Qn={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Ea},'options':{...Q},'textMessage':{'type':a0_0x397951(0x2a1),'properties':{'text':{'type':a0_0x397951(0x22b)}},'required':['text'],...E(a0_0x397951(0x4cd))}},'required':[a0_0x397951(0x6b8),'number']},Yn={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'number':{...Ea},'options':{...Q},'mediaMessage':{'type':a0_0x397951(0x2a1),'properties':{'mediatype':{'type':a0_0x397951(0x22b),'enum':[a0_0x397951(0x42f),a0_0x397951(0x5be),a0_0x397951(0x275),a0_0x397951(0x464)]},'media':{'type':'string'},'fileName':{'type':a0_0x397951(0x22b)},'caption':{'type':a0_0x397951(0x22b)}},'required':['mediatype','media'],...E(a0_0x397951(0x20e),a0_0x397951(0x643),a0_0x397951(0x6d9))}},'required':[a0_0x397951(0x3f1),'number']},Ca={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...z},'options':{...Q},'stickerMessage':{'type':a0_0x397951(0x2a1),'properties':{'image':{'type':a0_0x397951(0x22b)}},'required':['image'],...E(a0_0x397951(0x42f))}},'required':['stickerMessage','number']},Ma={'$id':(0x0,C['v4'])(),'type':'object','properties':{'statusMessage':{'type':a0_0x397951(0x2a1),'properties':{'type':{'type':'string','enum':['text',a0_0x397951(0x42f),'audio',a0_0x397951(0x275)]},'content':{'type':'string'},'caption':{'type':a0_0x397951(0x22b)},'backgroundColor':{'type':'string'},'font':{'type':a0_0x397951(0x348),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x397951(0x714),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':a0_0x397951(0x2d0),'description':a0_0x397951(0x1fc)}},'allContacts':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]}},'required':['type',a0_0x397951(0x1f7)],...E('type',a0_0x397951(0x1f7))}},'required':[a0_0x397951(0x381)]},va={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...z},'options':{...Q},'mediaMessage':{'type':a0_0x397951(0x2a1),'properties':{'mediatype':{'type':a0_0x397951(0x22b),'enum':[a0_0x397951(0x42f),a0_0x397951(0x5be),'video',a0_0x397951(0x464)]},'media':{'type':a0_0x397951(0x22b)},'fileName':{'type':a0_0x397951(0x22b)},'caption':{'type':a0_0x397951(0x22b)}},'required':[a0_0x397951(0x259),a0_0x397951(0x6d9)],...E(a0_0x397951(0x20e),a0_0x397951(0x643),a0_0x397951(0x6d9))}},'required':[a0_0x397951(0x3f1),a0_0x397951(0x5e3)]},Na={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'number':{...z},'options':{...Q},'audioMessage':{'type':a0_0x397951(0x2a1),'properties':{'audio':{'type':a0_0x397951(0x22b)}},'required':['audio'],...E(a0_0x397951(0x464))}},'required':[a0_0x397951(0x478),'number']},Ra={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...z},'pollMessage':{'type':a0_0x397951(0x2a1),'properties':{'name':{'type':a0_0x397951(0x22b)},'selectableCount':{'type':a0_0x397951(0x5e3)},'values':{'type':'array','minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x397951(0x346),'selectableCount','values'],...E(a0_0x397951(0x346),'selectableCount',a0_0x397951(0x235))}},'required':[a0_0x397951(0x5e3),'pollMessage']},Ta={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'number':{...z},'menuMessage':{'type':a0_0x397951(0x2a1),'properties':{'text':{'type':a0_0x397951(0x22b)},'choices':{'type':a0_0x397951(0x714),'minItems':0x2,'uniqueItems':!0x0}},'required':['text',a0_0x397951(0x428)],...E(a0_0x397951(0x4cd),a0_0x397951(0x428))}},'required':[a0_0x397951(0x5e3),a0_0x397951(0x761)]},Aa={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'number':{...z},'options':{...Q},'buttonMessage':{'type':a0_0x397951(0x2a1),'properties':{'title':{'type':a0_0x397951(0x22b)},'description':{'type':a0_0x397951(0x22b)},'footerText':{'type':'string'},'buttons':{'type':a0_0x397951(0x714),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'buttonText':{'type':a0_0x397951(0x22b)},'buttonId':{'type':a0_0x397951(0x22b)}},'required':[a0_0x397951(0x48f),'buttonId'],...E('buttonText',a0_0x397951(0x2f1))}},'mediaMessage':{'type':a0_0x397951(0x2a1),'properties':{'media':{'type':a0_0x397951(0x22b)},'fileName':{'type':a0_0x397951(0x22b)},'mediatype':{'type':'string','enum':['image',a0_0x397951(0x5be),a0_0x397951(0x275)]}},'required':['media','mediatype'],...E(a0_0x397951(0x6d9),a0_0x397951(0x20e))}},'required':[a0_0x397951(0x693),a0_0x397951(0x703)],...E('title',a0_0x397951(0x299))}},'required':[a0_0x397951(0x5e3),'buttonMessage']},Oa={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'number':{...z},'options':{...Q},'locationMessage':{'type':a0_0x397951(0x2a1),'properties':{'latitude':{'type':a0_0x397951(0x5e3)},'longitude':{'type':a0_0x397951(0x5e3)},'name':{'type':a0_0x397951(0x22b)},'address':{'type':a0_0x397951(0x22b)}},'required':[a0_0x397951(0x33c),a0_0x397951(0x462)],...E(a0_0x397951(0x346),a0_0x397951(0x502))}},'required':['number',a0_0x397951(0x27d)]},Ia={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'number':{...z},'options':{...Q},'listMessage':{'type':a0_0x397951(0x2a1),'properties':{'title':{'type':a0_0x397951(0x22b)},'description':{'type':a0_0x397951(0x22b)},'footerText':{'type':a0_0x397951(0x22b)},'buttonText':{'type':'string'},'sections':{'type':a0_0x397951(0x714),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x397951(0x2a1),'properties':{'title':{'type':'string'},'rows':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':a0_0x397951(0x22b)},'description':{'type':a0_0x397951(0x22b)},'rowId':{'type':'string'}},'required':['title',a0_0x397951(0x222)],...E(a0_0x397951(0x693),a0_0x397951(0x222))}}},'required':[a0_0x397951(0x693),'rows'],...E(a0_0x397951(0x693))}}},'required':[a0_0x397951(0x693),a0_0x397951(0x299),'buttonText',a0_0x397951(0x3a2)],...E(a0_0x397951(0x693),'description',a0_0x397951(0x48f),'footerText')}},'required':['number',a0_0x397951(0x1d9)]},Da={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'number':{...z},'options':{...Q},'contactMessage':{'type':'array','items':{'type':a0_0x397951(0x2a1),'properties':{'fullName':{'type':a0_0x397951(0x22b)},'phoneNumber':{'type':a0_0x397951(0x22b),'minLength':0xa}},'required':['fullName',a0_0x397951(0x517)],...E(a0_0x397951(0x2be))},'minItems':0x1,'uniqueItems':!0x0}},'required':['number',a0_0x397951(0x522)]},xa={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'reactionMessage':{'type':a0_0x397951(0x2a1),'properties':{'key':{'type':a0_0x397951(0x2a1),'properties':{'id':{'type':a0_0x397951(0x22b)},'remoteJid':{'type':'string'},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id','remoteJid',a0_0x397951(0x28f)],...E('id',a0_0x397951(0x686))},'reaction':{'type':a0_0x397951(0x22b)}},'required':[a0_0x397951(0x226),'reaction'],...E(a0_0x397951(0x37c))}},'required':[a0_0x397951(0x707)]},Pa={'$id':(0x0,C['v4'])(),'type':'object','properties':{'numbers':{'type':a0_0x397951(0x714),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':'^\x5cd+','description':'\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}}},_a={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'readMessages':{'type':a0_0x397951(0x714),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x397951(0x22b)},'fromMe':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x397951(0x22b)}},'required':['id',a0_0x397951(0x28f),a0_0x397951(0x686)],...E('id','remoteJid')}}},'required':[a0_0x397951(0x5bd)]},$a={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'privacySettings':{'type':'object','properties':{'readreceipts':{'type':a0_0x397951(0x22b),'enum':['all',a0_0x397951(0x75c)]},'profile':{'type':'string','enum':[a0_0x397951(0x579),'contacts',a0_0x397951(0x5b4),a0_0x397951(0x75c)]},'status':{'type':a0_0x397951(0x22b),'enum':[a0_0x397951(0x579),a0_0x397951(0x15b),a0_0x397951(0x5b4),a0_0x397951(0x75c)]},'online':{'type':'string','enum':[a0_0x397951(0x579),a0_0x397951(0x6e0)]},'last':{'type':a0_0x397951(0x22b),'enum':['all',a0_0x397951(0x15b),a0_0x397951(0x5b4),a0_0x397951(0x75c)]},'groupadd':{'type':a0_0x397951(0x22b),'enum':['all',a0_0x397951(0x15b),a0_0x397951(0x5b4),'none']}},'required':[a0_0x397951(0x486),a0_0x397951(0x571),a0_0x397951(0x51c),'online',a0_0x397951(0x466),a0_0x397951(0x210)],...E(a0_0x397951(0x486),a0_0x397951(0x571),a0_0x397951(0x51c),a0_0x397951(0x250),a0_0x397951(0x466),a0_0x397951(0x210))}},'required':[a0_0x397951(0x7a0)]},ka={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'lastMessage':{'type':a0_0x397951(0x2a1),'properties':{'key':{'type':'object','properties':{'id':{'type':'string'},'remoteJid':{'type':'string'},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id',a0_0x397951(0x28f),'remoteJid'],...E('id',a0_0x397951(0x686))},'messageTimestamp':{'type':a0_0x397951(0x348),'minLength':0x1}},'required':['key'],...E(a0_0x397951(0x300))},'archive':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]}},'required':[a0_0x397951(0x6e2),a0_0x397951(0x5a9)]},La={'$id':(0x0,C['v4'])(),'type':'object','properties':{'id':{'type':a0_0x397951(0x22b)},'fromMe':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'remoteJid':{'type':'string'},'participant':{'type':'string'}},'required':['id','fromMe',a0_0x397951(0x686)],...E('id','remoteJid',a0_0x397951(0x755))},Fa={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'where':{'type':a0_0x397951(0x2a1),'properties':{'_id':{'type':a0_0x397951(0x22b),'minLength':0x1},'pushName':{'type':'string','minLength':0x1},'id':{'type':a0_0x397951(0x22b),'minLength':0x1}},...E(a0_0x397951(0x578),'id',a0_0x397951(0x4c0))}}},Ua={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'name':{'type':a0_0x397951(0x22b)}},...E(a0_0x397951(0x346))},Ja={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'status':{'type':a0_0x397951(0x22b)}},...E(a0_0x397951(0x51c))},be={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'number':{'type':a0_0x397951(0x22b)},'picture':{'type':a0_0x397951(0x22b)}}},ja={'type':'object','properties':{'wuid':{'type':a0_0x397951(0x22b)},'name':{'type':a0_0x397951(0x22b)},'picture':{'type':a0_0x397951(0x22b)},'status':{'type':'string'},'isBusiness':{'type':a0_0x397951(0x295)}}},qa={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'where':{'type':a0_0x397951(0x2a1),'properties':{'_id':{'type':'string','minLength':0x1},'key':{'type':a0_0x397951(0x2a1),'if':{'propertyNames':{'enum':['fromMe',a0_0x397951(0x686),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x397951(0x22b),'minLength':0x1,'description':a0_0x397951(0x2ff)},'id':{'type':'string','minLength':0x1,'description':a0_0x397951(0x2ff)},'fromMe':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x397951(0x2a1)}},...E(a0_0x397951(0x578))},'limit':{'type':'integer'}}},Xn={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'where':{'type':a0_0x397951(0x2a1),'properties':{'_id':{'type':a0_0x397951(0x22b)},'remoteJid':{'type':a0_0x397951(0x22b)},'id':{'type':a0_0x397951(0x22b)},'fromMe':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x397951(0x22b)},'status':{'type':a0_0x397951(0x22b),'enum':['ERROR',a0_0x397951(0x3a4),a0_0x397951(0x302),a0_0x397951(0x650),a0_0x397951(0x3f9),'PLAYED']}},...E(a0_0x397951(0x578),a0_0x397951(0x686),'id',a0_0x397951(0x51c))},'limit':{'type':a0_0x397951(0x348)}}},Va={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'number':{...z},'presence':{'type':a0_0x397951(0x22b),'enum':['unavailable',a0_0x397951(0x588),a0_0x397951(0x4a9),a0_0x397951(0x786),'paused']}},'required':[a0_0x397951(0x569),a0_0x397951(0x5e3)]},Ba={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'subject':{'type':a0_0x397951(0x22b)},'description':{'type':a0_0x397951(0x22b)},'profilePicture':{'type':a0_0x397951(0x22b)},'participants':{'type':a0_0x397951(0x714),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':a0_0x397951(0x351),'description':a0_0x397951(0x197)}}},'required':[a0_0x397951(0x783),a0_0x397951(0x54d)],...E(a0_0x397951(0x783),a0_0x397951(0x299),'profilePicture')},Se={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'groupJid':{'type':a0_0x397951(0x22b),'pattern':'^\x5cd+([-]\x5cd+)*@g.us$'}},'required':[a0_0x397951(0x2bc)],...E(a0_0x397951(0x2bc))},Ga={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'action':{'type':a0_0x397951(0x22b),'enum':['add',a0_0x397951(0x6bd),a0_0x397951(0x3ef),a0_0x397951(0x31e)]},'participants':{'type':a0_0x397951(0x714),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x397951(0x22b),'minLength':0xa,'pattern':'\x5cd+','description':'\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}},'required':['groupJid',a0_0x397951(0x757),a0_0x397951(0x54d)],...E(a0_0x397951(0x2bc),'action')},Wa={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'groupJid':{'type':'string'},'expiration':{'type':a0_0x397951(0x5e3),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x397951(0x2bc),a0_0x397951(0x2c7)],...E(a0_0x397951(0x2bc),'expiration')},za={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'groupJid':{'type':a0_0x397951(0x22b)},'image':{'type':a0_0x397951(0x22b)}},'required':[a0_0x397951(0x2bc),a0_0x397951(0x42f)],...E(a0_0x397951(0x2bc),a0_0x397951(0x42f))},Ha={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'groupJid':{'type':a0_0x397951(0x22b)},'description':{'type':a0_0x397951(0x22b)}},'required':[a0_0x397951(0x2bc),a0_0x397951(0x299)],...E(a0_0x397951(0x2bc),a0_0x397951(0x299))},Ka={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'groupJid':{'type':a0_0x397951(0x22b)},'name':{'type':'string'}},'required':[a0_0x397951(0x2bc),a0_0x397951(0x346)],...E('groupJid','name')},Qa={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'groupJid':{'type':a0_0x397951(0x22b)},'setting':{'type':a0_0x397951(0x22b),'enum':[a0_0x397951(0x78c),'not_announcement','unlocked',a0_0x397951(0x5f4)]}},'required':[a0_0x397951(0x2bc),a0_0x397951(0x5f0)],...E(a0_0x397951(0x2bc),a0_0x397951(0x5f0))},Ya={'$id':(0x0,C['v4'])(),'type':'object','properties':{'inviteCode':{'type':a0_0x397951(0x22b)}},'required':[a0_0x397951(0x65e)],...E(a0_0x397951(0x65e))},Xa={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'url':{'type':a0_0x397951(0x22b)},'enabled':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x397951(0x634),'enabled']},Zn={'$id':(0x0,C['v4'])(),'type':a0_0x397951(0x2a1),'properties':{'local_map':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x397951(0x295),'enum':[!0x0,!0x1]}},'required':['local_map',a0_0x397951(0x2f0),a0_0x397951(0x778),a0_0x397951(0x330),'MESSAGES_UPDATE',a0_0x397951(0x21d),'SEND_MESSAGE',a0_0x397951(0x350),a0_0x397951(0x52d),a0_0x397951(0x1e9),'PRESENCE_UPDATE',a0_0x397951(0x6fd),a0_0x397951(0x3d0),a0_0x397951(0x283),a0_0x397951(0x354),a0_0x397951(0x6ae),a0_0x397951(0x385),a0_0x397951(0x458),a0_0x397951(0x56d)],...E(a0_0x397951(0x5c3),a0_0x397951(0x2f0),'QRCODE_UPDATED',a0_0x397951(0x330),a0_0x397951(0x5c9),'MESSAGES_UPSERT',a0_0x397951(0x610),a0_0x397951(0x350),a0_0x397951(0x52d),a0_0x397951(0x1e9),'PRESENCE_UPDATE',a0_0x397951(0x6fd),a0_0x397951(0x3d0),a0_0x397951(0x283),a0_0x397951(0x354),a0_0x397951(0x6ae),a0_0x397951(0x385),a0_0x397951(0x458),a0_0x397951(0x56d))},Ke=class{},Qe=class extends I{['getContactModelForOwner'](_0x22d42a){return Vs(_0x22d42a);}async[a0_0x397951(0x1f0)](_0x50be5c){const _0x239feb=a0_0x397951;if(_0x50be5c[_0x239feb(0x4c6)]!==0x0)try{return{'insertCount':(await this[_0x239feb(0x388)](_0x50be5c[0x0]['owner'])[_0x239feb(0x701)]([..._0x50be5c]))[_0x239feb(0x4c6)]};}catch(_0x5b936e){return _0x5b936e;}}async[a0_0x397951(0x777)](_0x54730c,_0xbc1a8c){const _0x2ff42a=a0_0x397951;try{return{'deletedCount':(await this['getContactModelForOwner'](_0xbc1a8c)[_0x2ff42a(0x315)]({..._0x54730c[_0x2ff42a(0x3f8)]}))[_0x2ff42a(0x40d)]};}catch(_0x23a152){return{'error':_0x23a152?.[_0x2ff42a(0x622)]()};}}async[a0_0x397951(0x166)](_0x2b32cf,_0x4f3e89){const _0x3e9e6c=a0_0x397951;try{if(_0x2b32cf['length']===0x0)return;let _0x207dc2=this[_0x3e9e6c(0x388)](_0x4f3e89),_0x4da418=_0x2b32cf['map'](_0x283859=>({'updateOne':{'filter':{'_id':_0x283859[_0x3e9e6c(0x578)],'owner':_0x4f3e89},'update':{..._0x283859}}})),{modifiedCount:_0x3ce369}=await _0x207dc2[_0x3e9e6c(0x58b)](_0x4da418);return{'insertCount':_0x3ce369};}catch{return;}}async[a0_0x397951(0x317)](_0x2a0384,_0xca53d0){const _0x495f2a=a0_0x397951;try{let _0x3d61b3=this[_0x495f2a(0x388)](_0xca53d0),_0x4551ec=A(_0x2a0384['where']);return await _0x3d61b3[_0x495f2a(0x317)](_0x4551ec)[_0x495f2a(0x162)](_0x2a0384?.[_0x495f2a(0x162)]??0x0)[_0x495f2a(0x49e)]();}catch{return[];}}async[a0_0x397951(0x3c4)](_0x588f09,_0x33f94e){const _0x189ebb=a0_0x397951;try{let _0x239d6f=this['getContactModelForOwner'](_0x33f94e),_0x19e5d0=A(_0x588f09[_0x189ebb(0x3f8)]);return await _0x239d6f[_0x189ebb(0x3c4)](_0x19e5d0)['lean']();}catch{return null;}}async[a0_0x397951(0x328)](_0x5efdd3){const _0x18f504=a0_0x397951;try{return await this[_0x18f504(0x388)](_0x5efdd3)[_0x18f504(0x264)][_0x18f504(0x2f7)](),{'success':!0x0};}catch(_0x3feb41){return console['error'](_0x3feb41),{'success':!0x1,'error':_0x3feb41};}}},Ye=require(a0_0x397951(0x5ed)),cc=require(a0_0x397951(0x29c)),us=new v(a0_0x397951(0x338)),j=class{['routerPath'](_0x5b8c12,_0x188bc7=!0x0){let _0x4d94d6='/'+_0x5b8c12;return _0x188bc7&&(_0x4d94d6+='/:instanceName'),_0x4d94d6;}async[a0_0x397951(0x233)](_0x5e9fb4){const _0x1147e5=a0_0x397951;let {request:_0x3f5693,schema:_0x3cd2ee,ClassRef:_0x641459,execute:_0xf380e0}=_0x5e9fb4,_0x5ad091=new _0x641459(),_0x266351=_0x3f5693[_0x1147e5(0x533)],_0x27cb87=_0x3f5693[_0x1147e5(0x539)];_0x3f5693?.['query']&&Object[_0x1147e5(0x4cc)](_0x3f5693[_0x1147e5(0x2e8)])[_0x1147e5(0x4c6)]>0x0&&Object['assign'](_0x27cb87,_0x3f5693[_0x1147e5(0x2e8)]),_0x3f5693[_0x1147e5(0x4e3)][_0x1147e5(0x2fb)]('/instance/create')&&Object['assign'](_0x27cb87,_0x266351),Object[_0x1147e5(0x3de)](_0x5ad091,_0x266351);let _0x9f39da=_0x3cd2ee?(0x0,Ye[_0x1147e5(0x418)])(_0x5ad091,_0x3cd2ee):{'valid':!0x0,'errors':[]};if(!_0x9f39da[_0x1147e5(0x4d7)]){let _0x2eb0cc=_0x9f39da[_0x1147e5(0x3e5)][_0x1147e5(0x530)](({property:_0x3528b5,stack:_0x5ac555,schema:_0x253847})=>{const _0x18cfa0=_0x1147e5;let _0x3fe7f1;return _0x253847[_0x18cfa0(0x299)]?_0x3fe7f1=_0x253847[_0x18cfa0(0x299)]:_0x3fe7f1=_0x5ac555[_0x18cfa0(0x4cf)]('instance.',''),{'property':_0x3528b5[_0x18cfa0(0x4cf)]('instance.',''),'message':_0x3fe7f1};});throw us[_0x1147e5(0x6aa)]([..._0x2eb0cc]),new m(..._0x2eb0cc);}return await _0xf380e0(_0x27cb87,_0x5ad091);}async[a0_0x397951(0x171)](_0x5f53c7){const _0x3b6965=a0_0x397951;let {request:_0x2ef4b1,ClassRef:_0x2cd5b6,schema:_0x34d2ed,execute:_0x36b351}=_0x5f53c7,_0x4291d4=_0x2ef4b1[_0x3b6965(0x2e8)];if(!_0x4291d4?.['groupJid'])throw new m(_0x3b6965(0x49a),_0x3b6965(0x1b5));let _0x4a4ebb=_0x2ef4b1[_0x3b6965(0x539)],_0x4ceca6=_0x2ef4b1[_0x3b6965(0x533)],_0x276874=new _0x2cd5b6();Object['assign'](_0x4ceca6,_0x4291d4),Object['assign'](_0x276874,_0x4ceca6);let _0x5f4744=(0x0,Ye[_0x3b6965(0x418)])(_0x276874,_0x34d2ed);if(!_0x5f4744['valid']){let _0x3cd758=_0x5f4744[_0x3b6965(0x3e5)][_0x3b6965(0x530)](({property:_0x13f71d,stack:_0x53d6b5,schema:_0x399818})=>{const _0x18378d=_0x3b6965;let _0x2ddc31;return _0x399818[_0x18378d(0x299)]?_0x2ddc31=_0x399818['description']:_0x2ddc31=_0x53d6b5[_0x18378d(0x4cf)](_0x18378d(0x249),''),{'property':_0x13f71d[_0x18378d(0x4cf)](_0x18378d(0x249),''),'message':_0x2ddc31};});throw us[_0x3b6965(0x6aa)]([..._0x3cd758]),new m(..._0x3cd758);}return await _0x36b351(_0x4a4ebb,_0x276874);}async[a0_0x397951(0x356)](_0x4794f1){const _0x2b1ee3=a0_0x397951;let {request:_0x351a4c,ClassRef:_0x2b11c9,schema:_0xdc8419,execute:_0x54c11a}=_0x4794f1,_0x5089a1=_0x351a4c[_0x2b1ee3(0x533)];if(!_0x5089a1?.[_0x2b1ee3(0x65e)])throw new m('The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body',_0x2b1ee3(0x506));let _0x594319=_0x351a4c[_0x2b1ee3(0x539)],_0x3f790d=_0x351a4c['body'],_0x17973b=new _0x2b11c9();Object[_0x2b1ee3(0x3de)](_0x3f790d,_0x5089a1),Object[_0x2b1ee3(0x3de)](_0x17973b,_0x3f790d);let _0x3517f2=(0x0,Ye[_0x2b1ee3(0x418)])(_0x17973b,_0xdc8419);if(!_0x3517f2['valid']){let _0x18ca95=_0x3517f2[_0x2b1ee3(0x3e5)]['map'](({property:_0x1425a3,stack:_0x575890,schema:_0x3cb8ce})=>{const _0x26eff2=_0x2b1ee3;let _0x4b9577;return _0x3cb8ce[_0x26eff2(0x299)]?_0x4b9577=_0x3cb8ce[_0x26eff2(0x299)]:_0x4b9577=_0x575890[_0x26eff2(0x4cf)](_0x26eff2(0x249),''),{'property':_0x1425a3[_0x26eff2(0x4cf)](_0x26eff2(0x249),''),'message':_0x4b9577};});throw us[_0x2b1ee3(0x6aa)]([..._0x18ca95]),new m(..._0x18ca95);}return await _0x54c11a(_0x594319,_0x17973b);}},S=class{},Mc=new v(a0_0x397951(0x76a)),Xe=class extends j{constructor(..._0x21c09a){const _0x5368e0=a0_0x397951;super(),this[_0x5368e0(0x4fe)]=(0x0,Za[_0x5368e0(0x306)])(),this[_0x5368e0(0x4fe)][_0x5368e0(0x384)](this[_0x5368e0(0x5de)](_0x5368e0(0x46a)),..._0x21c09a,async(_0x172bf6,_0x39805a)=>{const _0x47c7f4=_0x5368e0;let _0x1caa00=await this['dataValidate']({'request':_0x172bf6,'schema':Va,'ClassRef':Fe,'execute':(_0x50784d,_0x20c499)=>D['updatePresence'](_0x50784d,_0x20c499)});return _0x39805a[_0x47c7f4(0x51c)](0xc9)['json'](_0x1caa00);})[_0x5368e0(0x384)](this[_0x5368e0(0x5de)](_0x5368e0(0x456)),..._0x21c09a,async(_0x48d566,_0x5207c5)=>{const _0x1927b1=_0x5368e0;let _0x4e3de0=await this[_0x1927b1(0x233)]({'request':_0x48d566,'schema':Pa,'ClassRef':Ue,'execute':(_0x215ba2,_0x86f512)=>D[_0x1927b1(0x260)](_0x215ba2,_0x86f512)});return _0x5207c5[_0x1927b1(0x51c)](0xc9)[_0x1927b1(0x344)](_0x4e3de0);})[_0x5368e0(0x384)](this['routerPath'](_0x5368e0(0x3e8)),..._0x21c09a,async(_0x5dc5d2,_0x308361)=>{const _0x4f6631=_0x5368e0;let _0xa65973=await this[_0x4f6631(0x233)]({'request':_0x5dc5d2,'schema':M,'ClassRef':S,'execute':(_0x132438,_0x24a56a)=>D[_0x4f6631(0x3e8)](_0x132438,_0x24a56a)});return _0x308361[_0x4f6631(0x51c)](0xc9)[_0x4f6631(0x344)](_0xa65973);})[_0x5368e0(0x355)](this[_0x5368e0(0x5de)](_0x5368e0(0x257)),..._0x21c09a,async(_0x3e3f1d,_0x580961)=>{const _0x2c3293=_0x5368e0;let _0x509356=await this[_0x2c3293(0x233)]({'request':_0x3e3f1d,'schema':_a,'ClassRef':qe,'execute':(_0x58f73a,_0x2241bf)=>D[_0x2c3293(0x154)](_0x58f73a,_0x2241bf)});return _0x580961['status'](0xc9)[_0x2c3293(0x344)](_0x509356);})['put'](this[_0x5368e0(0x5de)](_0x5368e0(0x74b)),..._0x21c09a,async(_0x59147a,_0x2df744)=>{const _0x3f9655=_0x5368e0;let _0x5f2e70=await this[_0x3f9655(0x233)]({'request':_0x59147a,'schema':ka,'ClassRef':Ve,'execute':(_0xfffb41,_0x3f9b02)=>D[_0x3f9655(0x74b)](_0xfffb41,_0x3f9b02)});return _0x2df744['status'](0xc9)[_0x3f9655(0x344)](_0x5f2e70);})[_0x5368e0(0x777)](this[_0x5368e0(0x5de)](_0x5368e0(0x172)),..._0x21c09a,async(_0x3aa637,_0x32a338)=>{const _0x39eb32=_0x5368e0;let _0x18b6e5=await this[_0x39eb32(0x233)]({'request':_0x3aa637,'schema':La,'ClassRef':Ge,'execute':(_0x3323f1,_0x4ee119)=>D['deleteMessage'](_0x3323f1,_0x4ee119)});return _0x32a338['status'](0xc9)['json'](_0x18b6e5);})[_0x5368e0(0x384)](this[_0x5368e0(0x5de)](_0x5368e0(0x2ca)),..._0x21c09a,async(_0x6f1f3e,_0x4f0e24)=>{const _0x3a9ae1=_0x5368e0;let _0x28176e=await this[_0x3a9ae1(0x233)]({'request':_0x6f1f3e,'schema':be,'ClassRef':we,'execute':(_0xbad51f,_0x1fdb41)=>D['fetchProfilePicture'](_0xbad51f,_0x1fdb41)});return _0x4f0e24[_0x3a9ae1(0x51c)](0xc8)[_0x3a9ae1(0x344)](_0x28176e);})[_0x5368e0(0x384)](this[_0x5368e0(0x5de)](_0x5368e0(0x379)),..._0x21c09a,async(_0x3c8052,_0xfd4e4)=>{const _0x44dc0d=_0x5368e0;let _0x526c23=await this['dataValidate']({'request':_0x3c8052,'schema':ja,'ClassRef':we,'execute':(_0x4ee55e,_0xbb234a)=>D['fetchProfile'](_0x4ee55e,_0xbb234a)});return _0xfd4e4[_0x44dc0d(0x51c)](0xc8)[_0x44dc0d(0x344)](_0x526c23);})['post'](this[_0x5368e0(0x5de)](_0x5368e0(0x53c)),..._0x21c09a,async(_0x4bcd99,_0x4b90c9)=>{const _0x76fc3a=_0x5368e0;let _0xe7d414=await this['dataValidate']({'request':_0x4bcd99,'schema':Fa,'ClassRef':Ke,'execute':(_0x543741,_0x445877)=>D[_0x76fc3a(0x370)](_0x543741,_0x445877)});return _0x4b90c9[_0x76fc3a(0x51c)](0xc8)[_0x76fc3a(0x344)](_0xe7d414);})[_0x5368e0(0x384)](this[_0x5368e0(0x5de)]('getBase64FromMediaMessage'),..._0x21c09a,async(_0x54e455,_0x22261f)=>{const _0x3eb2bd=_0x5368e0;let _0x51b7a7=await this[_0x3eb2bd(0x233)]({'request':_0x54e455,'schema':null,'ClassRef':Object,'execute':(_0x12ef45,_0x5a998d)=>D[_0x3eb2bd(0x5da)](_0x12ef45,_0x5a998d)});return _0x22261f[_0x3eb2bd(0x51c)](0xc9)[_0x3eb2bd(0x344)](_0x51b7a7);})[_0x5368e0(0x384)](this[_0x5368e0(0x5de)]('findMessages'),..._0x21c09a,async(_0x21973e,_0x408518)=>{const _0x106098=_0x5368e0;let _0x52e543=await this[_0x106098(0x233)]({'request':_0x21973e,'schema':qa,'ClassRef':ke,'execute':(_0x2ace23,_0x4713a3)=>D['fetchMessages'](_0x2ace23,_0x4713a3)});return _0x408518[_0x106098(0x51c)](0xc8)[_0x106098(0x344)](_0x52e543);})['get'](this[_0x5368e0(0x5de)](_0x5368e0(0x254)),..._0x21c09a,async(_0x46a513,_0x342942)=>{const _0x272df6=_0x5368e0;let _0x259a2d=await this['dataValidate']({'request':_0x46a513,'schema':null,'ClassRef':S,'execute':_0x88e3a7=>D[_0x272df6(0x705)](_0x88e3a7)});return _0x342942['status'](0xc8)[_0x272df6(0x344)](_0x259a2d);})['get'](this['routerPath'](_0x5368e0(0x509)),..._0x21c09a,async(_0x4b64ff,_0xddeef1)=>{const _0x1ee910=_0x5368e0;let _0x510e8a=await this[_0x1ee910(0x233)]({'request':_0x4b64ff,'schema':null,'ClassRef':S,'execute':_0x216f65=>D[_0x1ee910(0x286)](_0x216f65)});return _0xddeef1['status'](0xc8)[_0x1ee910(0x344)](_0x510e8a);})[_0x5368e0(0x355)](this[_0x5368e0(0x5de)](_0x5368e0(0x6ea)),..._0x21c09a,async(_0x2df687,_0x323ab1)=>{const _0x42b2ac=_0x5368e0;let _0x4f0cf4=await this[_0x42b2ac(0x233)]({'request':_0x2df687,'schema':null,'ClassRef':Array,'execute':(_0x1e9bf6,_0x2cda4e)=>D[_0x42b2ac(0x6ea)](_0x1e9bf6,_0x2cda4e)});return _0x323ab1[_0x42b2ac(0x51c)](0xc8)[_0x42b2ac(0x344)](_0x4f0cf4);})[_0x5368e0(0x624)](this[_0x5368e0(0x5de)](_0x5368e0(0x17f)),..._0x21c09a,async(_0x3216d3,_0xada64d)=>{const _0x46664c=_0x5368e0;let _0x595dec=await this[_0x46664c(0x233)]({'request':_0x3216d3,'schema':null,'ClassRef':S,'execute':_0x5d0f68=>D[_0x46664c(0x17f)](_0x5d0f68)});return _0xada64d[_0x46664c(0x51c)](0xc8)['json'](_0x595dec);})[_0x5368e0(0x355)](this['routerPath']('updatePrivacySettings'),..._0x21c09a,async(_0x33d8e3,_0x19c955)=>{const _0x1740b3=_0x5368e0;let _0x85bd77=await this[_0x1740b3(0x233)]({'request':_0x33d8e3,'schema':$a,'ClassRef':Be,'execute':(_0x2d486e,_0x14ccae)=>D['updatePrivacySettings'](_0x2d486e,_0x14ccae)});return _0x19c955[_0x1740b3(0x51c)](0xc9)[_0x1740b3(0x344)](_0x85bd77);})[_0x5368e0(0x384)](this[_0x5368e0(0x5de)](_0x5368e0(0x3eb)),..._0x21c09a,async(_0x21f2a2,_0x3ea7c3)=>{const _0x1a09e6=_0x5368e0;let _0x29e2b1=await this[_0x1a09e6(0x233)]({'request':_0x21f2a2,'schema':be,'ClassRef':me,'execute':(_0x30d715,_0x5c2fc1)=>D[_0x1a09e6(0x3eb)](_0x30d715,_0x5c2fc1)});return _0x3ea7c3[_0x1a09e6(0x51c)](0xc8)[_0x1a09e6(0x344)](_0x29e2b1);})['post'](this[_0x5368e0(0x5de)]('updateProfileName'),..._0x21c09a,async(_0x5f2b5d,_0x5a7daf)=>{const _0xd3f78a=_0x5368e0;let _0x1c9557=await this['dataValidate']({'request':_0x5f2b5d,'schema':Ua,'ClassRef':Je,'execute':(_0x3cdc34,_0x2d722d)=>D[_0xd3f78a(0x498)](_0x3cdc34,_0x2d722d)});return _0x5a7daf[_0xd3f78a(0x51c)](0xc8)['json'](_0x1c9557);})[_0x5368e0(0x384)](this['routerPath']('updateProfileStatus'),..._0x21c09a,async(_0x14fc57,_0x282aaa)=>{const _0x4e0e07=_0x5368e0;let _0x558824=await this[_0x4e0e07(0x233)]({'request':_0x14fc57,'schema':Ja,'ClassRef':je,'execute':(_0x4a295c,_0x3899de)=>D[_0x4e0e07(0x1b3)](_0x4a295c,_0x3899de)});return _0x282aaa['status'](0xc8)[_0x4e0e07(0x344)](_0x558824);})[_0x5368e0(0x355)](this[_0x5368e0(0x5de)](_0x5368e0(0x179)),..._0x21c09a,async(_0x2cc330,_0x248b58)=>{const _0x4fcaf5=_0x5368e0;let _0x4fba42=await this[_0x4fcaf5(0x233)]({'request':_0x2cc330,'schema':be,'ClassRef':me,'execute':(_0x52e9eb,_0x41b299)=>D[_0x4fcaf5(0x179)](_0x52e9eb,_0x41b299)});return _0x248b58[_0x4fcaf5(0x51c)](0xc8)[_0x4fcaf5(0x344)](_0x4fba42);})[_0x5368e0(0x777)](this[_0x5368e0(0x5de)](_0x5368e0(0x77d)),..._0x21c09a,async(_0x111684,_0xeabf2d)=>{const _0x2ee5d2=_0x5368e0;let _0x565011=await this['dataValidate']({'request':_0x111684,'schema':be,'ClassRef':me,'execute':(_0x48916d,_0x6ee30f)=>D['removeProfilePicture'](_0x48916d,_0x6ee30f)});return _0xeabf2d['status'](0xc8)[_0x2ee5d2(0x344)](_0x565011);});}},er=require('express'),Ze=class{},et=class{},tt=class{},st=class{},at=class{},Y=class{},rt=class{},ot=class extends Y{},it=class extends Y{},nt=class extends j{constructor(..._0x491252){const _0x11785a=a0_0x397951;super(),this[_0x11785a(0x4fe)]=(0x0,er[_0x11785a(0x306)])(),this['router'][_0x11785a(0x384)](this[_0x11785a(0x5de)]('create'),..._0x491252,async(_0x483f78,_0x297674)=>{const _0x2cb07d=_0x11785a;let _0xcaef03=await this['dataValidate']({'request':_0x483f78,'schema':Ba,'ClassRef':Ze,'execute':(_0x358890,_0x1edc03)=>J[_0x2cb07d(0x4b0)](_0x358890,_0x1edc03)});_0x297674[_0x2cb07d(0x51c)](0xc9)['json'](_0xcaef03);})[_0x11785a(0x355)](this[_0x11785a(0x5de)]('updateGroupPicture'),..._0x491252,async(_0x9454f1,_0x50285f)=>{const _0x4f4258=_0x11785a;let _0x408205=await this['groupValidate']({'request':_0x9454f1,'schema':za,'ClassRef':et,'execute':(_0x2c87ad,_0x146628)=>J[_0x4f4258(0x6b1)](_0x2c87ad,_0x146628)});_0x50285f[_0x4f4258(0x51c)](0xc9)['json'](_0x408205);})[_0x11785a(0x355)](this[_0x11785a(0x5de)](_0x11785a(0x495)),..._0x491252,async(_0x26e71c,_0x2c1833)=>{const _0x1c48c7=_0x11785a;let _0x1f1e94=await this[_0x1c48c7(0x171)]({'request':_0x26e71c,'schema':Ha,'ClassRef':tt,'execute':(_0x17b7eb,_0x56bcc8)=>J[_0x1c48c7(0x495)](_0x17b7eb,_0x56bcc8)});_0x2c1833[_0x1c48c7(0x51c)](0xc9)[_0x1c48c7(0x344)](_0x1f1e94);})[_0x11785a(0x355)](this[_0x11785a(0x5de)](_0x11785a(0x5b8)),..._0x491252,async(_0x545756,_0x190f86)=>{const _0x240965=_0x11785a;let _0x532a10=await this[_0x240965(0x171)]({'request':_0x545756,'schema':Ka,'ClassRef':st,'execute':(_0x2275b9,_0x288d33)=>J[_0x240965(0x5b8)](_0x2275b9,_0x288d33)});_0x190f86[_0x240965(0x51c)](0xc9)[_0x240965(0x344)](_0x532a10);})[_0x11785a(0x355)](this[_0x11785a(0x5de)](_0x11785a(0x446)),..._0x491252,async(_0xe2e36,_0x58ae6f)=>{const _0x3938bf=_0x11785a;let _0x5b295d=await this[_0x3938bf(0x171)]({'request':_0xe2e36,'schema':Qa,'ClassRef':at,'execute':(_0x5c6869,_0x2b8752)=>J[_0x3938bf(0x446)](_0x5c6869,_0x2b8752)});_0x58ae6f[_0x3938bf(0x51c)](0xc9)[_0x3938bf(0x344)](_0x5b295d);})['put'](this[_0x11785a(0x5de)](_0x11785a(0x484)),..._0x491252,async(_0x4ee096,_0x14edd0)=>{const _0xa28b77=_0x11785a;let _0x18f705=await this[_0xa28b77(0x171)]({'request':_0x4ee096,'schema':Wa,'ClassRef':it,'execute':(_0x3574cd,_0x283eb3)=>J[_0xa28b77(0x484)](_0x3574cd,_0x283eb3)});_0x14edd0[_0xa28b77(0x51c)](0xc9)[_0xa28b77(0x344)](_0x18f705);})[_0x11785a(0x624)](this['routerPath'](_0x11785a(0x2ad)),..._0x491252,async(_0x3337ac,_0x1e76f0)=>{const _0x4b3476=_0x11785a;let _0x1b56ef=await this['groupValidate']({'request':_0x3337ac,'schema':Se,'ClassRef':Y,'execute':(_0x593711,_0x11c229)=>J[_0x4b3476(0x36c)](_0x593711,_0x11c229)});_0x1e76f0[_0x4b3476(0x51c)](0xc8)['json'](_0x1b56ef);})[_0x11785a(0x624)](this['routerPath'](_0x11785a(0x3cb)),..._0x491252,async(_0xb87866,_0x1b58b2)=>{const _0x3c5ec1=_0x11785a;let _0x1b314e=await this['dataValidate']({'request':_0xb87866,'schema':M,'ClassRef':S,'execute':_0x59b4bb=>J[_0x3c5ec1(0x3cb)](_0x59b4bb)});_0x1b58b2[_0x3c5ec1(0x51c)](0xc8)[_0x3c5ec1(0x344)](_0x1b314e);})['get'](this['routerPath']('participants'),..._0x491252,async(_0x537542,_0x109776)=>{const _0x48d730=_0x11785a;let _0x430c78=await this[_0x48d730(0x171)]({'request':_0x537542,'schema':Se,'ClassRef':Y,'execute':(_0x178ae7,_0x5df45)=>J[_0x48d730(0x21e)](_0x178ae7,_0x5df45)});_0x109776[_0x48d730(0x51c)](0xc8)[_0x48d730(0x344)](_0x430c78);})[_0x11785a(0x624)](this['routerPath'](_0x11785a(0x65e)),..._0x491252,async(_0x36a5fb,_0x274d80)=>{const _0x22faec=_0x11785a;let _0x393a7b=await this['groupValidate']({'request':_0x36a5fb,'schema':Se,'ClassRef':Y,'execute':(_0x12539c,_0x47ac3b)=>J['inviteCode'](_0x12539c,_0x47ac3b)});_0x274d80[_0x22faec(0x51c)](0xc8)[_0x22faec(0x344)](_0x393a7b);})[_0x11785a(0x355)](this[_0x11785a(0x5de)](_0x11785a(0x2e7)),..._0x491252,async(_0x158257,_0x5dfe62)=>{const _0x363a0c=_0x11785a;let _0x5503d1=await this[_0x363a0c(0x356)]({'request':_0x158257,'schema':Ya,'ClassRef':rt,'execute':(_0x2dd6a3,_0xeb7b28)=>J['joinGroup'](_0x2dd6a3,_0xeb7b28)});_0x5dfe62['status'](0xc9)[_0x363a0c(0x344)](_0x5503d1);})[_0x11785a(0x355)](this[_0x11785a(0x5de)]('revokeInviteCode'),..._0x491252,async(_0x41e470,_0x47736f)=>{const _0x3b2a62=_0x11785a;let _0x388afc=await this[_0x3b2a62(0x171)]({'request':_0x41e470,'schema':Se,'ClassRef':Y,'execute':(_0x34b03b,_0xcf84d0)=>J[_0x3b2a62(0x5e4)](_0x34b03b,_0xcf84d0)});_0x47736f['status'](0xc9)[_0x3b2a62(0x344)](_0x388afc);})[_0x11785a(0x355)](this[_0x11785a(0x5de)](_0x11785a(0x377)),..._0x491252,async(_0x53db52,_0x58f149)=>{const _0x126b5d=_0x11785a;let _0x4fe616=await this[_0x126b5d(0x171)]({'request':_0x53db52,'schema':Ga,'ClassRef':ot,'execute':(_0x2532ad,_0x1a4973)=>J[_0x126b5d(0x16d)](_0x2532ad,_0x1a4973)});_0x58f149[_0x126b5d(0x51c)](0xc9)[_0x126b5d(0x344)](_0x4fe616);})['delete'](this[_0x11785a(0x5de)]('leaveGroup'),..._0x491252,async(_0x1054a3,_0x47ac08)=>{const _0x43846b=_0x11785a;let _0x2e8684=await this[_0x43846b(0x171)]({'request':_0x1054a3,'schema':{},'ClassRef':Y,'execute':(_0x11c92e,_0x1d5a10)=>J['leaveGroup'](_0x11c92e,_0x1d5a10)});_0x47ac08[_0x43846b(0x51c)](0xc8)[_0x43846b(0x344)](_0x2e8684);});}},tr=require(a0_0x397951(0x531)),ct=class extends j{constructor(_0x5e0026,..._0x3563c5){const _0x400631=a0_0x397951;super(),this[_0x400631(0x4d2)]=_0x5e0026,this[_0x400631(0x4fe)]=(0x0,tr[_0x400631(0x306)])();let _0x3969e1=_0x5e0026[_0x400631(0x624)](_0x400631(0x6be));this[_0x400631(0x4fe)][_0x400631(0x384)](_0x400631(0x5e6),..._0x3563c5,async(_0x9376cb,_0x500a3e)=>{const _0x222b9e=_0x400631;let {instanceName:_0x71b951,apikey:_0xece36a,number:_0x48c15d}=_0x9376cb['body'],_0x157a1c=await re['createInstance']({'instanceName':_0x71b951,'apikey':_0xece36a,'number':_0x48c15d});return _0x500a3e['status'](0xc9)[_0x222b9e(0x344)](_0x157a1c);})[_0x400631(0x355)](this[_0x400631(0x5de)](_0x400631(0x158)),..._0x3563c5,async(_0x5baca8,_0x3a120f)=>{const _0x3a7cea=_0x400631;let _0x541c11=await this[_0x3a7cea(0x233)]({'request':_0x5baca8,'schema':M,'ClassRef':S,'execute':_0x194999=>re['restartInstance'](_0x194999)});return _0x3a120f[_0x3a7cea(0x51c)](0xc8)[_0x3a7cea(0x344)](_0x541c11);})[_0x400631(0x384)](this[_0x400631(0x5de)](_0x400631(0x180)),..._0x3563c5,async(_0x575c8b,_0x1b1621)=>{const _0x4d366d=_0x400631;let _0x2b8329=await this['dataValidate']({'request':_0x575c8b,'schema':M,'ClassRef':S,'execute':_0x5868ce=>re[_0x4d366d(0x236)](_0x5868ce)});return _0x1b1621[_0x4d366d(0x51c)](0xc8)[_0x4d366d(0x344)](_0x2b8329);})[_0x400631(0x624)](this[_0x400631(0x5de)](_0x400631(0x700)),..._0x3563c5,async(_0x8388a3,_0x44bb2a)=>{const _0x6cd237=_0x400631;let _0x19dff6=await this['dataValidate']({'request':_0x8388a3,'schema':M,'ClassRef':S,'execute':_0x39cca6=>re[_0x6cd237(0x700)](_0x39cca6)});return _0x44bb2a[_0x6cd237(0x51c)](0xc8)['json'](_0x19dff6);})[_0x400631(0x624)](this[_0x400631(0x5de)]('fetchInstances',!0x1),..._0x3563c5,async(_0xeac8e7,_0x4911d4)=>{const _0xfdf418=_0x400631;let _0xb6fc7b=await this['dataValidate']({'request':_0xeac8e7,'schema':null,'ClassRef':S,'execute':_0x4a6f84=>re[_0xfdf418(0x2a9)](_0x4a6f84)});return _0x4911d4[_0xfdf418(0x51c)](0xc8)[_0xfdf418(0x344)](_0xb6fc7b);})[_0x400631(0x777)](this[_0x400631(0x5de)](_0x400631(0x304)),..._0x3563c5,async(_0x5d0555,_0x44230f)=>{const _0xd0d14f=_0x400631;let _0x4e4e69=await this[_0xd0d14f(0x233)]({'request':_0x5d0555,'schema':M,'ClassRef':S,'execute':_0x16f232=>re[_0xd0d14f(0x304)](_0x16f232)});return _0x44230f[_0xd0d14f(0x51c)](0xc8)[_0xd0d14f(0x344)](_0x4e4e69);})['delete'](this['routerPath'](_0x400631(0x777)),..._0x3563c5,async(_0x77a103,_0x91aee0)=>{const _0xf1e35d=_0x400631;let _0x59613d=await this[_0xf1e35d(0x233)]({'request':_0x77a103,'schema':M,'ClassRef':S,'execute':_0x42344d=>re[_0xf1e35d(0x30d)](_0x42344d)});return _0x91aee0[_0xf1e35d(0x51c)](0xc8)[_0xf1e35d(0x344)](_0x59613d);});}},sr=require('express'),ds=class{},W=class extends ds{},lt=class extends W{},ut=class extends W{},dt=class extends W{},pt=class extends W{},Ee=class extends W{},gt=class extends W{},mt=class extends W{},ht=class extends W{},ft=class extends W{},yt=class extends W{},wt=class{},bt=class extends j{constructor(..._0xd5677c){const _0x5c58c6=a0_0x397951;super(),this[_0x5c58c6(0x4fe)]=(0x0,sr['Router'])(),this['router'][_0x5c58c6(0x384)](this['routerPath'](_0x5c58c6(0x72e)),..._0xd5677c,async(_0x3950a1,_0x54b766)=>{const _0x586747=_0x5c58c6;let _0x16c95a=await this[_0x586747(0x233)]({'request':_0x3950a1,'schema':Sa,'ClassRef':lt,'execute':(_0x5768a6,_0x5d9539)=>G[_0x586747(0x72e)](_0x5768a6,_0x5d9539)});return _0x54b766[_0x586747(0x51c)](0xc9)[_0x586747(0x344)](_0x16c95a);})[_0x5c58c6(0x384)](this[_0x5c58c6(0x5de)](_0x5c58c6(0x289)),..._0xd5677c,async(_0x50f318,_0x12041d)=>{const _0x2909d0=_0x5c58c6;let _0x4cfb93=await this[_0x2909d0(0x233)]({'request':_0x50f318,'schema':va,'ClassRef':Ee,'execute':(_0x593d9d,_0x19ad27)=>G[_0x2909d0(0x289)](_0x593d9d,_0x19ad27)});return _0x12041d[_0x2909d0(0x51c)](0xc9)[_0x2909d0(0x344)](_0x4cfb93);})[_0x5c58c6(0x384)](this[_0x5c58c6(0x5de)](_0x5c58c6(0x184)),..._0xd5677c,async(_0x473be0,_0x5ed2ae)=>{const _0x47560a=_0x5c58c6;let _0x7f004e=await this[_0x47560a(0x233)]({'request':_0x473be0,'schema':Ta,'ClassRef':pt,'execute':(_0x590cce,_0x1defb7)=>G['sendMenu'](_0x590cce,_0x1defb7)});return _0x5ed2ae[_0x47560a(0x51c)](0xc9)[_0x47560a(0x344)](_0x7f004e);})[_0x5c58c6(0x384)](this['routerPath'](_0x5c58c6(0x404)),..._0xd5677c,async(_0x25576d,_0x4ee4ec)=>{const _0x283da7=_0x5c58c6;let _0xc389c1=await this[_0x283da7(0x233)]({'request':_0x25576d,'schema':Na,'ClassRef':Ee,'execute':(_0x18dc6a,_0x5cbd09)=>G[_0x283da7(0x404)](_0x18dc6a,_0x5cbd09)});return _0x4ee4ec[_0x283da7(0x51c)](0xc9)[_0x283da7(0x344)](_0xc389c1);})[_0x5c58c6(0x384)](this[_0x5c58c6(0x5de)](_0x5c58c6(0x45c)),..._0xd5677c,async(_0x404da7,_0x60e566)=>{const _0x5dc48d=_0x5c58c6;let _0x22f5c1=await this['dataValidate']({'request':_0x404da7,'schema':Aa,'ClassRef':mt,'execute':(_0x5b95a8,_0x1f47cd)=>G[_0x5dc48d(0x45c)](_0x5b95a8,_0x1f47cd)});return _0x60e566[_0x5dc48d(0x51c)](0xc9)[_0x5dc48d(0x344)](_0x22f5c1);})[_0x5c58c6(0x384)](this[_0x5c58c6(0x5de)]('sendLocation'),..._0xd5677c,async(_0x30d4c8,_0x157e22)=>{const _0x19fd44=_0x5c58c6;let _0x47cf07=await this[_0x19fd44(0x233)]({'request':_0x30d4c8,'schema':Oa,'ClassRef':ht,'execute':(_0x4902a0,_0x206a77)=>G[_0x19fd44(0x261)](_0x4902a0,_0x206a77)});return _0x157e22[_0x19fd44(0x51c)](0xc9)[_0x19fd44(0x344)](_0x47cf07);})[_0x5c58c6(0x384)](this['routerPath']('sendList'),..._0xd5677c,async(_0x166c21,_0x252901)=>{const _0x8f57a0=_0x5c58c6;let _0x6f647d=await this[_0x8f57a0(0x233)]({'request':_0x166c21,'schema':Ia,'ClassRef':ft,'execute':(_0x5525f9,_0x75b638)=>G[_0x8f57a0(0x57e)](_0x5525f9,_0x75b638)});return _0x252901[_0x8f57a0(0x51c)](0xc9)[_0x8f57a0(0x344)](_0x6f647d);})[_0x5c58c6(0x384)](this[_0x5c58c6(0x5de)]('sendContact'),..._0xd5677c,async(_0x3d14ce,_0x521780)=>{const _0x2a37ec=_0x5c58c6;let _0x16138b=await this[_0x2a37ec(0x233)]({'request':_0x3d14ce,'schema':Da,'ClassRef':yt,'execute':(_0x280e33,_0x42873f)=>G['sendContact'](_0x280e33,_0x42873f)});return _0x521780[_0x2a37ec(0x51c)](0xc9)[_0x2a37ec(0x344)](_0x16138b);})[_0x5c58c6(0x384)](this[_0x5c58c6(0x5de)](_0x5c58c6(0x671)),..._0xd5677c,async(_0xf2c00d,_0x5a303b)=>{const _0x14fe2c=_0x5c58c6;let _0x4f4081=await this['dataValidate']({'request':_0xf2c00d,'schema':xa,'ClassRef':wt,'execute':(_0x284653,_0xa16880)=>G[_0x14fe2c(0x671)](_0x284653,_0xa16880)});return _0x5a303b[_0x14fe2c(0x51c)](0xc9)[_0x14fe2c(0x344)](_0x4f4081);})['post'](this[_0x5c58c6(0x5de)](_0x5c58c6(0x39f)),..._0xd5677c,async(_0x140155,_0x1ce782)=>{const _0x12b219=_0x5c58c6;let _0x550a75=await this[_0x12b219(0x233)]({'request':_0x140155,'schema':Ra,'ClassRef':dt,'execute':(_0x3b54c8,_0x140531)=>G[_0x12b219(0x39f)](_0x3b54c8,_0x140531)});return _0x1ce782[_0x12b219(0x51c)](0xc9)[_0x12b219(0x344)](_0x550a75);})[_0x5c58c6(0x384)](this['routerPath'](_0x5c58c6(0x3e2)),..._0xd5677c,async(_0xb89122,_0x360a07)=>{const _0x203243=_0x5c58c6;let _0x3316f0=await this[_0x203243(0x233)]({'request':_0xb89122,'schema':Ma,'ClassRef':ut,'execute':(_0x13aaad,_0x27b42e)=>G[_0x203243(0x3e2)](_0x13aaad,_0x27b42e)});return _0x360a07['status'](0xc9)[_0x203243(0x344)](_0x3316f0);})[_0x5c58c6(0x384)](this[_0x5c58c6(0x5de)](_0x5c58c6(0x3d5)),..._0xd5677c,async(_0x4bad6b,_0x13620e)=>{const _0x178515=_0x5c58c6;let _0x45e3ee=await this[_0x178515(0x233)]({'request':_0x4bad6b,'schema':Ca,'ClassRef':gt,'execute':(_0x70f9e4,_0x9d3cd4)=>G[_0x178515(0x3d5)](_0x70f9e4,_0x9d3cd4)});return _0x13620e[_0x178515(0x51c)](0xc9)['json'](_0x45e3ee);});}},ar=require(a0_0x397951(0x531)),St=class{},Et=class extends j{constructor(..._0xa7c132){const _0x5d22be=a0_0x397951;super(),this[_0x5d22be(0x4fe)]=(0x0,ar[_0x5d22be(0x306)])(),this[_0x5d22be(0x4fe)][_0x5d22be(0x384)](this[_0x5d22be(0x5de)]('set'),..._0xa7c132,async(_0x31eed3,_0x27369c)=>{const _0x4b6384=_0x5d22be;let _0x5d12fa=await this[_0x4b6384(0x233)]({'request':_0x31eed3,'schema':Xa,'ClassRef':St,'execute':(_0x29f3e4,_0x466158)=>ps[_0x4b6384(0x5f6)](_0x29f3e4,_0x466158)});_0x27369c['status'](0xc9)[_0x4b6384(0x344)](_0x5d12fa);})['get'](this[_0x5d22be(0x5de)](_0x5d22be(0x317)),..._0xa7c132,async(_0x2a886d,_0x47d59e)=>{const _0x55ed8d=_0x5d22be;let _0x1b434d=await this[_0x55ed8d(0x233)]({'request':_0x2a886d,'schema':M,'ClassRef':S,'execute':_0x226b64=>ps[_0x55ed8d(0x201)](_0x226b64)});_0x47d59e[_0x55ed8d(0x51c)](0xc8)[_0x55ed8d(0x344)](_0x1b434d);});}},rr=require(a0_0x397951(0x531)),f=new v(a0_0x397951(0x681)),Ct=class extends j{constructor(..._0x5d6eb3){const _0x31ca6d=a0_0x397951;super(),this[_0x31ca6d(0x4fe)]=(0x0,rr[_0x31ca6d(0x306)])(),this[_0x31ca6d(0x4fe)][_0x31ca6d(0x384)](this[_0x31ca6d(0x5de)]('scheduleMessage'),..._0x5d6eb3,async(_0x3acb55,_0x34d355)=>{const _0x3439ba=_0x31ca6d;let _0xd8868f=_0x3acb55[_0x3439ba(0x533)];f[_0x3439ba(0x545)]('request\x20received\x20in\x20scheduleMessage'),f['verbose'](_0x3439ba(0x691)),f[_0x3439ba(0x545)](_0x3acb55[_0x3439ba(0x533)]);let _0x20ee8d=await this[_0x3439ba(0x233)]({'request':_0x3acb55,'schema':M,'ClassRef':S,'execute':_0x143de5=>T[_0x3439ba(0x599)](_0x143de5,_0xd8868f)});_0x34d355['status'](0xc8)[_0x3439ba(0x344)](_0x20ee8d);})[_0x31ca6d(0x624)](this[_0x31ca6d(0x5de)]('scheduleMessage'),..._0x5d6eb3,async(_0xdbb7c,_0x4bea85)=>{const _0x40d2ec=_0x31ca6d;let _0x34680a=await this['dataValidate']({'request':_0xdbb7c,'schema':M,'ClassRef':S,'execute':_0x1dd2a0=>T[_0x40d2ec(0x6e8)](_0x1dd2a0)});_0x4bea85[_0x40d2ec(0x51c)](0xc8)[_0x40d2ec(0x344)](_0x34680a);})[_0x31ca6d(0x777)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x17a)),..._0x5d6eb3,async(_0xeb4b56,_0x143f52)=>{const _0x1c21bd=_0x31ca6d;f['verbose'](_0x1c21bd(0x6fc));let _0x339c07=await this[_0x1c21bd(0x233)]({'request':_0xeb4b56,'schema':M,'ClassRef':S,'execute':_0x56fb31=>T['deleteDoneMessages'](_0x56fb31)});_0x143f52[_0x1c21bd(0x51c)](0xc8)[_0x1c21bd(0x344)](_0x339c07);})[_0x31ca6d(0x384)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x73a)),..._0x5d6eb3,async(_0x36eaab,_0x51775b)=>{const _0x2144f1=_0x31ca6d;let _0x4a77f2=_0x36eaab[_0x2144f1(0x533)];f[_0x2144f1(0x545)](_0x2144f1(0x551)),f['verbose'](_0x2144f1(0x691)),f['verbose'](_0x36eaab[_0x2144f1(0x533)]);let _0x1fef7c=await this[_0x2144f1(0x233)]({'request':_0x36eaab,'schema':M,'ClassRef':S,'execute':_0x3025b7=>T[_0x2144f1(0x73a)](_0x3025b7,_0x4a77f2)});_0x51775b['status'](0xc8)[_0x2144f1(0x344)](_0x1fef7c);})[_0x31ca6d(0x624)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x42c)),..._0x5d6eb3,async(_0x44f92c,_0x3abd11)=>{const _0xcd7ff6=_0x31ca6d;f['verbose'](_0xcd7ff6(0x76f));let _0x264343=await this['dataValidate']({'request':_0x44f92c,'schema':M,'ClassRef':S,'execute':_0x151b3b=>T[_0xcd7ff6(0x42c)](_0x151b3b)});_0x3abd11['status'](0xc8)[_0xcd7ff6(0x344)](_0x264343);})['get'](this[_0x31ca6d(0x5de)](_0x31ca6d(0x2cc)),..._0x5d6eb3,async(_0x3b3fe0,_0x5912fb)=>{const _0x3e6dd9=_0x31ca6d;f[_0x3e6dd9(0x545)](_0x3e6dd9(0x1ec));let _0x259006=await this[_0x3e6dd9(0x233)]({'request':_0x3b3fe0,'schema':M,'ClassRef':S,'execute':_0x50812e=>T[_0x3e6dd9(0x42c)](_0x50812e)});_0x5912fb[_0x3e6dd9(0x51c)](0xc8)[_0x3e6dd9(0x344)](_0x259006);})[_0x31ca6d(0x384)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x2df)),..._0x5d6eb3,async(_0x440211,_0x484b6c)=>{const _0xf6e510=_0x31ca6d;let _0x55a014=_0x440211[_0xf6e510(0x533)];f[_0xf6e510(0x545)]('request\x20received\x20in\x20updateAgent'),f[_0xf6e510(0x545)](_0xf6e510(0x691)),f[_0xf6e510(0x545)](_0x440211['body']);let _0x2edffe=await this[_0xf6e510(0x233)]({'request':_0x440211,'schema':M,'ClassRef':S,'execute':_0x4bea1a=>T[_0xf6e510(0x2df)](_0x4bea1a,_0x55a014)});_0x484b6c[_0xf6e510(0x51c)](0xc8)[_0xf6e510(0x344)](_0x2edffe);})[_0x31ca6d(0x384)](this['routerPath'](_0x31ca6d(0x3c7)),..._0x5d6eb3,async(_0x25e1fa,_0x3c2ff4)=>{const _0x526194=_0x31ca6d;let _0x4cfe4c=_0x25e1fa[_0x526194(0x533)];f[_0x526194(0x545)](_0x526194(0x189)),f[_0x526194(0x545)](_0x526194(0x691)),f[_0x526194(0x545)](_0x25e1fa['body']);let _0x38b19e=await this[_0x526194(0x233)]({'request':_0x25e1fa,'schema':M,'ClassRef':S,'execute':_0x288796=>T[_0x526194(0x3c7)](_0x288796,_0x4cfe4c)});_0x3c2ff4[_0x526194(0x51c)](0xc8)['json'](_0x38b19e);})[_0x31ca6d(0x384)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x5b3)),..._0x5d6eb3,async(_0x5cd9c8,_0x1033be)=>{const _0x3e7c2e=_0x31ca6d;let _0x49217d=_0x5cd9c8[_0x3e7c2e(0x533)];f['verbose'](_0x3e7c2e(0x230)),f[_0x3e7c2e(0x545)](_0x3e7c2e(0x691)),f['verbose'](_0x5cd9c8['body']);let _0x422edd=await this['dataValidate']({'request':_0x5cd9c8,'schema':M,'ClassRef':S,'execute':_0x5766a6=>T['updateFlowConfig'](_0x5766a6,_0x49217d)});_0x1033be[_0x3e7c2e(0x51c)](0xc8)[_0x3e7c2e(0x344)](_0x422edd);})[_0x31ca6d(0x384)](this[_0x31ca6d(0x5de)]('getConversation'),..._0x5d6eb3,async(_0x370e18,_0x51a9c2)=>{const _0x3ddf4c=_0x31ca6d;let _0x3431d8=_0x370e18[_0x3ddf4c(0x533)];f[_0x3ddf4c(0x545)](_0x3ddf4c(0x392)),f[_0x3ddf4c(0x545)](_0x3ddf4c(0x691)),f[_0x3ddf4c(0x545)](_0x370e18[_0x3ddf4c(0x533)]);let _0x5d80f7=await this[_0x3ddf4c(0x233)]({'request':_0x370e18,'schema':M,'ClassRef':S,'execute':_0x178e8d=>T[_0x3ddf4c(0x327)](_0x178e8d,_0x3431d8)});_0x51a9c2[_0x3ddf4c(0x51c)](0xc8)['json'](_0x5d80f7);})[_0x31ca6d(0x384)](this['routerPath']('fetchConversation'),..._0x5d6eb3,async(_0x27a697,_0x55b223)=>{const _0x4bd385=_0x31ca6d;let _0x3cddb1=_0x27a697['body'];f[_0x4bd385(0x545)](_0x4bd385(0x4a5)),f[_0x4bd385(0x545)](_0x4bd385(0x691)),f[_0x4bd385(0x545)](_0x27a697[_0x4bd385(0x533)]);let _0xe3c665=await this[_0x4bd385(0x233)]({'request':_0x27a697,'schema':M,'ClassRef':S,'execute':_0x1bf9ee=>T[_0x4bd385(0x560)](_0x1bf9ee,_0x3cddb1)});_0x55b223[_0x4bd385(0x51c)](0xc8)[_0x4bd385(0x344)](_0xe3c665);})['post'](this['routerPath']('editConversation'),..._0x5d6eb3,async(_0x22e574,_0x4d4388)=>{const _0x547471=_0x31ca6d;let _0x408133=_0x22e574['body'];f['verbose'](_0x547471(0x2fc)),f[_0x547471(0x545)](_0x547471(0x691)),f[_0x547471(0x545)](_0x22e574[_0x547471(0x533)]);let _0x5c052d=await this['dataValidate']({'request':_0x22e574,'schema':M,'ClassRef':S,'execute':_0x2b4da0=>T[_0x547471(0x296)](_0x2b4da0,_0x408133)});_0x4d4388[_0x547471(0x51c)](0xc8)[_0x547471(0x344)](_0x5c052d);})[_0x31ca6d(0x777)](this[_0x31ca6d(0x5de)]('deleteConversation'),..._0x5d6eb3,async(_0x5117c0,_0x4809d2)=>{const _0x1fe23e=_0x31ca6d;let _0x38bd41=_0x5117c0['body'];f[_0x1fe23e(0x545)](_0x1fe23e(0x711)),f[_0x1fe23e(0x545)](_0x1fe23e(0x691)),f[_0x1fe23e(0x545)](_0x5117c0['body']);let _0x52ae4d=await this[_0x1fe23e(0x233)]({'request':_0x5117c0,'schema':M,'ClassRef':S,'execute':_0x53d385=>T[_0x1fe23e(0x405)](_0x53d385,_0x38bd41)});_0x4809d2['status'](0xc8)[_0x1fe23e(0x344)](_0x52ae4d);})[_0x31ca6d(0x384)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x532)),..._0x5d6eb3,async(_0x1f498d,_0x3ed618)=>{const _0x5333e7=_0x31ca6d;let _0x417af4=_0x1f498d[_0x5333e7(0x533)];f[_0x5333e7(0x545)](_0x5333e7(0x3dd)),f[_0x5333e7(0x545)](_0x5333e7(0x691)),f[_0x5333e7(0x545)](_0x1f498d[_0x5333e7(0x533)]);let _0x24860b=await this['dataValidate']({'request':_0x1f498d,'schema':M,'ClassRef':S,'execute':_0xa15256=>T[_0x5333e7(0x5e8)](_0xa15256,_0x417af4)});_0x3ed618[_0x5333e7(0x51c)](0xc8)[_0x5333e7(0x344)](_0x24860b);})[_0x31ca6d(0x384)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x595)),..._0x5d6eb3,async(_0x556e1b,_0x3c250b)=>{const _0x5b8214=_0x31ca6d;let _0x5509a7=_0x556e1b[_0x5b8214(0x533)];f[_0x5b8214(0x545)](_0x5b8214(0x232)),f[_0x5b8214(0x545)](_0x5b8214(0x691)),f['verbose'](_0x556e1b[_0x5b8214(0x533)]),delete _0x5509a7[_0x5b8214(0x298)],delete _0x5509a7[_0x5b8214(0x2cb)],delete _0x5509a7[_0x5b8214(0x4b6)],delete _0x5509a7[_0x5b8214(0x735)];let _0x23ffaa=await this[_0x5b8214(0x233)]({'request':_0x556e1b,'schema':M,'ClassRef':S,'execute':_0x2c7698=>T['editFlow'](_0x2c7698,_0x5509a7)});_0x3c250b['status'](0xc8)[_0x5b8214(0x344)](_0x23ffaa);})[_0x31ca6d(0x384)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x310)),..._0x5d6eb3,async(_0x2b48d1,_0x54f1ba)=>{const _0x4d6737=_0x31ca6d;let _0x4bc1a7=_0x2b48d1[_0x4d6737(0x533)];f[_0x4d6737(0x545)](_0x4d6737(0x232)),f[_0x4d6737(0x545)](_0x4d6737(0x691)),f[_0x4d6737(0x545)](_0x2b48d1[_0x4d6737(0x533)]);let _0x5466b8=await this[_0x4d6737(0x233)]({'request':_0x2b48d1,'schema':M,'ClassRef':S,'execute':_0x169f9c=>T[_0x4d6737(0x78f)](_0x169f9c,_0x4bc1a7)});_0x54f1ba[_0x4d6737(0x51c)](0xc8)[_0x4d6737(0x344)](_0x5466b8);})[_0x31ca6d(0x384)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x216)),..._0x5d6eb3,async(_0x3cabaf,_0x4ba1bb)=>{const _0x11d1ef=_0x31ca6d;let _0x9301ec=_0x3cabaf[_0x11d1ef(0x533)];f[_0x11d1ef(0x545)](_0x11d1ef(0x232)),f[_0x11d1ef(0x545)](_0x11d1ef(0x691)),f[_0x11d1ef(0x545)](_0x3cabaf[_0x11d1ef(0x533)]);let _0xdc7d04=await this[_0x11d1ef(0x233)]({'request':_0x3cabaf,'schema':M,'ClassRef':S,'execute':_0x3448da=>T[_0x11d1ef(0x447)](_0x3448da,_0x9301ec)});_0x4ba1bb['status'](0xc8)[_0x11d1ef(0x344)](_0xdc7d04);})['post'](this[_0x31ca6d(0x5de)](_0x31ca6d(0x1a7)),..._0x5d6eb3,async(_0x34cd18,_0x1f3aa7)=>{const _0x508224=_0x31ca6d;let _0x340526=_0x34cd18[_0x508224(0x533)];f[_0x508224(0x545)](_0x508224(0x232)),f['verbose']('request\x20body:\x20'),f[_0x508224(0x545)](_0x34cd18[_0x508224(0x533)]);let _0x57d165=await this[_0x508224(0x233)]({'request':_0x34cd18,'schema':M,'ClassRef':S,'execute':_0x281cd3=>T[_0x508224(0x706)](_0x281cd3,_0x340526)});_0x1f3aa7['status'](0xc8)[_0x508224(0x344)](_0x57d165);})[_0x31ca6d(0x384)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x3a9)),..._0x5d6eb3,async(_0x56c5e0,_0x226a34)=>{const _0x1b6897=_0x31ca6d;let _0x1ad09d=_0x56c5e0[_0x1b6897(0x533)];f['verbose'](_0x1b6897(0x68d)),f[_0x1b6897(0x545)](_0x1b6897(0x691)),f[_0x1b6897(0x545)](_0x56c5e0[_0x1b6897(0x533)]);let _0x512d07=await this[_0x1b6897(0x233)]({'request':_0x56c5e0,'schema':M,'ClassRef':S,'execute':_0x378474=>T['editFlowGroup'](_0x378474,_0x1ad09d)});_0x226a34[_0x1b6897(0x51c)](0xc8)['json'](_0x512d07);})['post'](this[_0x31ca6d(0x5de)](_0x31ca6d(0x5f1)),..._0x5d6eb3,async(_0x443ad9,_0x5a13c0)=>{const _0x4ff917=_0x31ca6d;let _0x8af74d=_0x443ad9[_0x4ff917(0x533)];f['verbose'](_0x4ff917(0x48a)),f[_0x4ff917(0x545)](_0x4ff917(0x691)),f[_0x4ff917(0x545)](_0x443ad9[_0x4ff917(0x533)]);let _0xfd025=await this[_0x4ff917(0x233)]({'request':_0x443ad9,'schema':M,'ClassRef':S,'execute':_0x4ed4e0=>T[_0x4ff917(0x57d)](_0x4ed4e0,_0x8af74d)});_0x5a13c0[_0x4ff917(0x51c)](0xc8)['json'](_0xfd025);})[_0x31ca6d(0x384)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x7a1)),..._0x5d6eb3,async(_0x1d94df,_0x51a7b6)=>{const _0x585b0c=_0x31ca6d;let _0x54b656=_0x1d94df[_0x585b0c(0x533)];f[_0x585b0c(0x545)](_0x585b0c(0x281)),f[_0x585b0c(0x545)](_0x585b0c(0x691)),f[_0x585b0c(0x545)](_0x1d94df[_0x585b0c(0x533)]);let _0x32c01c=await this[_0x585b0c(0x233)]({'request':_0x1d94df,'schema':M,'ClassRef':S,'execute':_0x4e9110=>T[_0x585b0c(0x279)](_0x4e9110,_0x54b656)});_0x51a7b6[_0x585b0c(0x51c)](0xc8)[_0x585b0c(0x344)](_0x32c01c);})[_0x31ca6d(0x384)](this['routerPath'](_0x31ca6d(0x6c5)),..._0x5d6eb3,async(_0x5cacfe,_0x761b88)=>{const _0xc073cf=_0x31ca6d;let _0x2cd270=_0x5cacfe[_0xc073cf(0x533)];f[_0xc073cf(0x545)](_0xc073cf(0x37f)),f[_0xc073cf(0x545)](_0xc073cf(0x691)),f[_0xc073cf(0x545)](_0x5cacfe[_0xc073cf(0x533)]);let _0x3fa923=await this[_0xc073cf(0x233)]({'request':_0x5cacfe,'schema':M,'ClassRef':S,'execute':_0xdde043=>T[_0xc073cf(0x58a)](_0xdde043,_0x2cd270)});_0x761b88[_0xc073cf(0x51c)](0xc8)['json'](_0x3fa923);})[_0x31ca6d(0x777)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x63d)),..._0x5d6eb3,async(_0x536fe1,_0xd11ffe)=>{const _0x3f5973=_0x31ca6d;let _0x5c8ad6=_0x536fe1['body'];f[_0x3f5973(0x545)]('request\x20received\x20in\x20deleteFlow'),f[_0x3f5973(0x545)](_0x3f5973(0x691)),f[_0x3f5973(0x545)](_0x536fe1['body']);let _0x2f3b2f=await this[_0x3f5973(0x233)]({'request':_0x536fe1,'schema':M,'ClassRef':S,'execute':_0x1c3e52=>T[_0x3f5973(0x51f)](_0x1c3e52,_0x5c8ad6)});_0xd11ffe[_0x3f5973(0x51c)](0xc8)[_0x3f5973(0x344)](_0x2f3b2f);})[_0x31ca6d(0x624)](this[_0x31ca6d(0x5de)](_0x31ca6d(0x758)),..._0x5d6eb3,async(_0x5def34,_0x1dfc29)=>{const _0x1d5283=_0x31ca6d;f[_0x1d5283(0x545)]('request\x20received\x20in\x20allFlows');let _0xb5405a=await this[_0x1d5283(0x233)]({'request':_0x5def34,'schema':M,'ClassRef':S,'execute':_0x408843=>T[_0x1d5283(0x749)](_0x408843)});_0x1dfc29[_0x1d5283(0x51c)](0xc8)['json'](_0xb5405a);});}},cr=R(require('path')),X={};function or(_0x3ed864,_0x185859,_0x4cca69,_0x59a598){X[_0x3ed864]||(X[_0x3ed864]={}),X[_0x3ed864][_0x185859]={'id':_0x185859,'response':_0x4cca69,'events':_0x59a598};}function ir(_0x218aa4,_0x38f87b){!X[_0x218aa4]||!X[_0x218aa4][_0x38f87b]||delete X[_0x218aa4][_0x38f87b];}function q(_0x2a1e03,_0x4e5a7a,_0x5f204e){const _0x4657b6=a0_0x397951;if(!X[_0x2a1e03])return;let _0x31772e=_0x4657b6(0x71f)+JSON[_0x4657b6(0x38d)](_0x5f204e)+'\x0a\x0a';Object['values'](X[_0x2a1e03])['forEach'](_0xbbf82c=>{const _0x1a1bce=_0x4657b6;_0xbbf82c[_0x1a1bce(0x609)][_0x1a1bce(0x2fb)](_0x4e5a7a)&&_0xbbf82c[_0x1a1bce(0x616)][_0x1a1bce(0x74f)](_0x31772e);});}function nr(){const _0x4c70d0=a0_0x397951;let _0x2b69de={};for(let _0x1b7344 in X)_0x2b69de[_0x1b7344]=Object[_0x4c70d0(0x235)](X[_0x1b7344])[_0x4c70d0(0x530)](_0x24876e=>({'id':_0x24876e['id'],'events':_0x24876e[_0x4c70d0(0x609)]}));return _0x2b69de;}var lr=require(a0_0x397951(0x5ac)),ms=require('mongoose'),gs=class{},no=new ms[(a0_0x397951(0x1b8))]({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),co=new ms[(a0_0x397951(0x1b8))]({'_id':{'type':String,'default':a0_0x397951(0x3d3)},'WebhookGlobal':{'type':no},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),he=N?.[a0_0x397951(0x60d)](gs[a0_0x397951(0x346)],co,a0_0x397951(0x5d9)),lo=cr['default']['join'](__dirname,a0_0x397951(0x68e)),vt=(0x0,Mt['Router'])(),uo=b[a0_0x397951(0x624)](a0_0x397951(0x6be))['TYPE'],te=[ha,fa,ba[uo]];vt[a0_0x397951(0x1e8)](a0_0x397951(0x6bb),Mt[a0_0x397951(0x349)][a0_0x397951(0x499)](lo))[a0_0x397951(0x624)](a0_0x397951(0x1a3),async(_0x5cc988,_0x49519e)=>{const _0x141ec5=a0_0x397951;console[_0x141ec5(0x1aa)](_0x141ec5(0x2b5));let _0x32e2fb=_0x5cc988[_0x141ec5(0x539)]['instance'],_0x46507c=(_0x5cc988[_0x141ec5(0x2e8)]['events']||'')[_0x141ec5(0x4dc)](','),_0x40652d=(0x0,lr['v4'])();console[_0x141ec5(0x1aa)]('Instance\x20ID:',_0x32e2fb),console['log']('Subscribed\x20Events:',_0x46507c);let _0x505e7f=b[_0x141ec5(0x624)](_0x141ec5(0x6be))['API_KEY'],_0x1a3792=_0x5cc988[_0x141ec5(0x2e8)][_0x141ec5(0x17d)];if(console[_0x141ec5(0x1aa)](_0x141ec5(0x38e),_0x1a3792),_0x505e7f[_0x141ec5(0x566)]!==_0x1a3792){console['log'](_0x141ec5(0x67d));try{let _0x344499=await ce['auth']['find'](_0x32e2fb);if(console['log'](_0x141ec5(0x153),_0x344499),!_0x344499||_0x344499['apikey']!==_0x1a3792)return console[_0x141ec5(0x1aa)](_0x141ec5(0x54f)),_0x49519e[_0x141ec5(0x51c)](0x191)[_0x141ec5(0x4c8)]('API\x20Key\x20inválida.');}catch(_0x5809fe){return console[_0x141ec5(0x6aa)](_0x141ec5(0x2b6),_0x5809fe),_0x49519e[_0x141ec5(0x51c)](0x191)[_0x141ec5(0x4c8)]('API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.');}}if(!await We(_0x32e2fb))return _0x49519e['status'](0x194)[_0x141ec5(0x4c8)](_0x141ec5(0x4cb));_0x49519e[_0x141ec5(0x36f)](_0x141ec5(0x3a1),_0x141ec5(0x481)),_0x49519e[_0x141ec5(0x36f)](_0x141ec5(0x636),_0x141ec5(0x3e0)),_0x49519e['setHeader'](_0x141ec5(0x529),_0x141ec5(0x364)),_0x49519e['flushHeaders']();let _0x1ea6b9='data:\x20'+JSON[_0x141ec5(0x38d)]({'info':_0x141ec5(0x796)})+'\x0a\x0a';_0x49519e['write'](_0x1ea6b9),or(_0x32e2fb,_0x40652d,_0x49519e,_0x46507c),_0x5cc988['on'](_0x141ec5(0x5d8),()=>{const _0x5d935f=_0x141ec5;console[_0x5d935f(0x1aa)](_0x5d935f(0x738)+_0x32e2fb),ir(_0x32e2fb,_0x40652d);});}),vt[a0_0x397951(0x624)](a0_0x397951(0x2f8),(_0x65eece,_0x3ef8fa)=>{let _0x1b1997=nr();_0x3ef8fa['json'](_0x1b1997);})[a0_0x397951(0x624)]('/',(_0x430e9a,_0x307fa2)=>{const _0xba46c9=a0_0x397951;let _0x3f54f9=b['get'](_0xba46c9(0x266)),_0x583cb0=_0x3f54f9&&_0x3f54f9[_0xba46c9(0x16f)][_0xba46c9(0x4dc)]('/')[0x4];if(_0x583cb0){let _0x26ff8b=encodeURIComponent(_0xba46c9(0x3e9)+_0x583cb0);_0x307fa2[_0xba46c9(0x160)](_0xba46c9(0x357)+_0x26ff8b);}else _0x307fa2[_0xba46c9(0x160)](_0xba46c9(0x26f));})[a0_0x397951(0x355)]('/exit',...te,async(_0x146510,_0xd0308b)=>{const _0x560ec8=a0_0x397951;try{console[_0x560ec8(0x1aa)](_0x560ec8(0x156)),_0xd0308b['status'](0xc8)[_0x560ec8(0x344)]({'message':_0x560ec8(0x766)}),_0xd0308b['on'](_0x560ec8(0x200),()=>process[_0x560ec8(0x3ab)](0x0));}catch(_0x1d491d){console[_0x560ec8(0x6aa)](_0x560ec8(0x165),_0x1d491d),_0xd0308b[_0x560ec8(0x51c)](0x1f4)[_0x560ec8(0x344)]({'message':_0x560ec8(0x552)});}})[a0_0x397951(0x355)]('/config',...te,async(_0x253392,_0x5cc03b)=>{const _0x5c3e7e=a0_0x397951;try{let _0x1715cf=_0x253392[_0x5c3e7e(0x533)];await he[_0x5c3e7e(0x30a)]({},{'$set':_0x1715cf},{'upsert':!0x0});let _0x11936f=await he[_0x5c3e7e(0x3c4)]();_0x5cc03b[_0x5c3e7e(0x344)](_0x11936f);}catch(_0x5a7db5){_0x5cc03b['status'](0x190)[_0x5c3e7e(0x4c8)](_0x5a7db5[_0x5c3e7e(0x15c)]);}})[a0_0x397951(0x624)](a0_0x397951(0x39d),...te,async(_0x4a9e44,_0x397e50)=>{const _0x1deb95=a0_0x397951;try{let _0x3f4c3a=await he[_0x1deb95(0x3c4)]();if(!_0x3f4c3a)return _0x397e50['json']({});_0x397e50['json'](_0x3f4c3a);}catch(_0x4ffd21){_0x397e50['status'](0x1f4)[_0x1deb95(0x4c8)](_0x4ffd21[_0x1deb95(0x15c)]);}})['use'](a0_0x397951(0x1e7),new ct(b,...te)['router'])[a0_0x397951(0x1e8)](a0_0x397951(0x5fc),new bt(...te)['router'])[a0_0x397951(0x1e8)]('/chat',new Xe(...te)[a0_0x397951(0x4fe)])[a0_0x397951(0x1e8)]('/group',new nt(...te)['router'])[a0_0x397951(0x1e8)]('/webhook',new Et(...te)[a0_0x397951(0x4fe)])[a0_0x397951(0x1e8)]('/automate',new Ct(...te)[a0_0x397951(0x4fe)]);var m=class{constructor(..._0x5403e1){const _0xbb51d3=a0_0x397951;throw{'status':0x190,'error':_0xbb51d3(0x5b2),'message':_0x5403e1[_0xbb51d3(0x4c6)]>0x0?_0x5403e1:void 0x0};}},ee=class{constructor(..._0x58354c){const _0x43eafd=a0_0x397951;throw{'status':0x191,'error':'Unauthorized','message':_0x58354c[_0x43eafd(0x4c6)]>0x0?_0x58354c:void 0x0};}},K=class{constructor(..._0x2af455){const _0x4a56eb=a0_0x397951;throw{'status':0x193,'error':_0x4a56eb(0x756),'message':_0x2af455[_0x4a56eb(0x4c6)]>0x0?_0x2af455:void 0x0};}},L=class{constructor(..._0x302ed3){const _0x48f101=a0_0x397951;throw{'status':0x194,'error':_0x48f101(0x1f2),'message':_0x302ed3['length']>0x0?_0x302ed3:void 0x0};}},O=class{constructor(..._0x33852f){const _0x1adb50=a0_0x397951;throw{'status':0x1f4,'error':_0x1adb50(0x1e2),'message':_0x33852f[_0x1adb50(0x4c6)]>0x0?_0x33852f:void 0x0};}},le=require(a0_0x397951(0x6cd));async function hs(_0x1368be){const _0x2e25cb=a0_0x397951;let _0xb5555f=new v(hs[_0x2e25cb(0x346)]),_0x3f738d=N[_0x2e25cb(0x773)](),_0x23d5b4=_0x3f738d['db'](b['get'](_0x2e25cb(0x604))[_0x2e25cb(0x271)][_0x2e25cb(0x1ed)]+_0x2e25cb(0x39e))[_0x2e25cb(0x264)](_0x1368be),_0x2d2e18=async(_0x295d7a,_0x39b766)=>{const _0x161780=_0x2e25cb;try{return await _0x3f738d[_0x161780(0x180)](),await _0x23d5b4['replaceOne']({'_id':_0x39b766},JSON['parse'](JSON[_0x161780(0x38d)](_0x295d7a,le[_0x161780(0x1c3)]['replacer'])),{'upsert':!0x0});}catch{}},_0x593512=async _0x1a698f=>{const _0x4cb902=_0x2e25cb;try{await _0x3f738d[_0x4cb902(0x180)]();let _0x4d4312=await _0x23d5b4[_0x4cb902(0x3c4)]({'_id':_0x1a698f}),_0x53d151=JSON[_0x4cb902(0x38d)](_0x4d4312);return JSON[_0x4cb902(0x497)](_0x53d151,le[_0x4cb902(0x1c3)][_0x4cb902(0x65b)]);}catch{}},_0xb90aa7=async _0x263cdd=>{const _0x19d927=_0x2e25cb;try{return await _0x3f738d[_0x19d927(0x180)](),await _0x23d5b4[_0x19d927(0x3db)]({'_id':_0x263cdd});}catch{}},_0x57d3d9=await _0x593512(_0x2e25cb(0x3c0))||(0x0,le[_0x2e25cb(0x4e6)])();return{'state':{'creds':_0x57d3d9,'keys':{'get':async(_0x40c743,_0x58d32a)=>{const _0x17935f=_0x2e25cb;let _0x3fb54c={};return await Promise[_0x17935f(0x579)](_0x58d32a[_0x17935f(0x530)](async _0x278f16=>{const _0x111322=_0x17935f;let _0x5ae582=await _0x593512(_0x40c743+'-'+_0x278f16);_0x40c743===_0x111322(0x70d)&&_0x5ae582&&(_0x5ae582=le['proto'][_0x111322(0x729)][_0x111322(0x2ac)][_0x111322(0x641)](_0x5ae582)),_0x3fb54c[_0x278f16]=_0x5ae582;})),_0x3fb54c;},'set':async _0x59917f=>{const _0x1a82d1=_0x2e25cb;let _0x5bfe0f=[];for(let _0x15ae1c in _0x59917f)for(let _0x54484b in _0x59917f[_0x15ae1c]){let _0x3f63ca=_0x59917f[_0x15ae1c][_0x54484b],_0x1e5ee1=_0x15ae1c+'-'+_0x54484b;_0x5bfe0f[_0x1a82d1(0x367)](_0x3f63ca?_0x2d2e18(_0x3f63ca,_0x1e5ee1):_0xb90aa7(_0x1e5ee1));}await Promise['all'](_0x5bfe0f);}}},'saveCreds':async()=>_0x2d2e18(_0x57d3d9,_0x2e25cb(0x3c0))};}var Ss=R(require(a0_0x397951(0x6b5))),Es=R(require('node-cache')),Tt=require(a0_0x397951(0x6cd)),ur=require(a0_0x397951(0x2a2)),Rt=require(a0_0x397951(0x6cd)),Nt;function po(_0x4a839c){const _0x1d0081=a0_0x397951;return Nt||(Nt=(0x0,ur['createClient'])({'url':_0x4a839c['URI']}),Nt[_0x1d0081(0x180)]()),Nt;}var oe=class c{constructor(_0x148c43,_0x52a11f){const _0x2bffc2=a0_0x397951;this[_0x2bffc2(0x4ad)]=_0x148c43,this[_0x2bffc2(0x1df)]=_0x52a11f,this[_0x2bffc2(0x731)]=new v(c[_0x2bffc2(0x346)]),this[_0x2bffc2(0x577)]=po(_0x148c43);}set[a0_0x397951(0x22f)](_0x257919){const _0x497ab0=a0_0x397951;this[_0x497ab0(0x1df)]=_0x257919;}async[a0_0x397951(0x1c8)](){const _0x147881=a0_0x397951;try{return await this[_0x147881(0x577)][_0x147881(0x767)](['keys',this[_0x147881(0x4ad)][_0x147881(0x5b1)]+':*']);}catch(_0x4a93cb){this[_0x147881(0x731)][_0x147881(0x6aa)](_0x4a93cb);}}async[a0_0x397951(0x3ce)](_0x53879f,_0x51e7f2){const _0xdd6cc0=a0_0x397951;try{let _0x22b46c=JSON[_0xdd6cc0(0x38d)](_0x51e7f2,Rt[_0xdd6cc0(0x1c3)]['replacer']);return await this[_0xdd6cc0(0x577)]['hSet'](this[_0xdd6cc0(0x4ad)][_0xdd6cc0(0x5b1)]+':'+this['instanceName'],_0x53879f,_0x22b46c);}catch(_0x3f5cee){this['logger'][_0xdd6cc0(0x6aa)](_0x3f5cee);}}async[a0_0x397951(0x73b)](){const _0x227010=a0_0x397951;try{let _0x509397=await this[_0x227010(0x577)]['hGetAll'](this[_0x227010(0x4ad)]['PREFIX_KEY']+':'+this[_0x227010(0x1df)]);if(_0x509397){for(let _0x222357 in _0x509397)Object[_0x227010(0x483)][_0x227010(0x68f)]['call'](_0x509397,_0x222357)&&(_0x509397[_0x222357]=JSON[_0x227010(0x497)](_0x509397[_0x222357],Rt[_0x227010(0x1c3)][_0x227010(0x65b)]));return _0x509397;}}catch(_0xc6bad1){this['logger']['error'](_0xc6bad1);}}async[a0_0x397951(0x536)](_0x16ae47){const _0x3680ae=a0_0x397951;try{let _0x1763d9=await this[_0x3680ae(0x577)][_0x3680ae(0x519)](this[_0x3680ae(0x4ad)][_0x3680ae(0x5b1)]+':'+this[_0x3680ae(0x1df)],_0x16ae47);if(_0x1763d9)return JSON[_0x3680ae(0x497)](_0x1763d9,Rt[_0x3680ae(0x1c3)]['reviver']);}catch(_0x3f3b5a){this[_0x3680ae(0x731)][_0x3680ae(0x6aa)](_0x3f3b5a);}}async[a0_0x397951(0x1cc)](_0x49c6c8){const _0x73c1d8=a0_0x397951;try{return await this[_0x73c1d8(0x577)][_0x73c1d8(0x241)](this[_0x73c1d8(0x4ad)]['PREFIX_KEY']+':'+this['instanceName'],_0x49c6c8);}catch(_0x1b2f60){this[_0x73c1d8(0x731)][_0x73c1d8(0x6aa)](_0x1b2f60);}}async[a0_0x397951(0x28c)](_0x1309fe){const _0x296a4e=a0_0x397951;try{return await this[_0x296a4e(0x577)][_0x296a4e(0x2d7)](_0x1309fe||this['redisEnv']['PREFIX_KEY']+':'+this[_0x296a4e(0x1df)]);}catch(_0x32000e){this[_0x296a4e(0x731)][_0x296a4e(0x6aa)](_0x32000e);}}};async function fs(_0x8f88b3,_0x47080c){let _0xe4fe1b=new v(fs['name']),_0x3577cc=new oe(_0x8f88b3,_0x47080c),_0x57ac2a=async(_0x2044d3,_0x91e4a5)=>{const _0x24c593=a0_0x44db;try{return await _0x3577cc['writeData'](_0x91e4a5,_0x2044d3);}catch(_0x3561ed){return _0xe4fe1b[_0x24c593(0x6aa)]({'localError':_0x24c593(0x3ce),'error':_0x3561ed});}},_0x218e14=async _0x16397c=>{const _0x261bb3=a0_0x44db;try{return await _0x3577cc[_0x261bb3(0x536)](_0x16397c);}catch(_0x106433){_0xe4fe1b[_0x261bb3(0x6aa)]({'readData':_0x261bb3(0x3ce),'error':_0x106433});return;}},_0x18270e=async _0x4014ab=>{const _0x189822=a0_0x44db;try{return await _0x3577cc[_0x189822(0x1cc)](_0x4014ab);}catch(_0x3122fe){_0xe4fe1b[_0x189822(0x6aa)]({'readData':_0x189822(0x1cc),'error':_0x3122fe});}},_0x23a0f1=await _0x218e14('creds')||(0x0,Tt['initAuthCreds'])();return{'state':{'creds':_0x23a0f1,'keys':{'get':async(_0x8c1498,_0x5d1429)=>{let _0x2f00b7={};return await Promise['all'](_0x5d1429['map'](async _0x442688=>{const _0x547998=a0_0x44db;let _0x2aa159=await _0x218e14(_0x8c1498+'-'+_0x442688);_0x8c1498===_0x547998(0x70d)&&_0x2aa159&&(_0x2aa159=Tt[_0x547998(0x684)]['Message'][_0x547998(0x2ac)][_0x547998(0x641)](_0x2aa159)),_0x2f00b7[_0x442688]=_0x2aa159;})),_0x2f00b7;},'set':async _0x4d3561=>{const _0x46048a=a0_0x44db;let _0x3bbfa5=[];for(let _0xca89b4 in _0x4d3561)for(let _0x574b72 in _0x4d3561[_0xca89b4]){let _0x365efb=_0x4d3561[_0xca89b4][_0x574b72],_0x4d0350=_0xca89b4+'-'+_0x574b72;_0x3bbfa5[_0x46048a(0x367)](_0x365efb?await _0x57ac2a(_0x365efb,_0x4d0350):await _0x18270e(_0x4d0350));}await Promise[_0x46048a(0x579)](_0x3bbfa5);}}},'saveCreds':async()=>await _0x57ac2a(_0x23a0f1,'creds')};}var k=R(require('fs')),Ce=require('uuid'),It=R(require(a0_0x397951(0x69a))),wr=require(a0_0x397951(0x168)),go=a0_0x397951(0x5f5)[a0_0x397951(0x38f)](),ys=go[a0_0x397951(0x4dc)]('\x0a')[a0_0x397951(0x530)](_0x142e3a=>{const _0x31b3e8=a0_0x397951;let _0x4c6f2e=_0x142e3a['split'](':');return{'host':_0x4c6f2e[0x0],'port':_0x4c6f2e[0x1],'username':_0x4c6f2e[0x2],'password':_0x4c6f2e[0x3],'protocol':_0x31b3e8(0x51e)};});function dr(){const _0x6b6bbd=a0_0x397951;if(ys[_0x6b6bbd(0x4c6)]===0x0)return null;let _0x3ab6ab=Math['floor'](Math['random']()*ys[_0x6b6bbd(0x4c6)]);return ys[_0x3ab6ab];}function ws(_0x25b967){const _0x5b2b96=a0_0x397951;return _0x25b967&&_0x25b967[_0x5b2b96(0x727)]&&_0x25b967[_0x5b2b96(0x34e)]&&_0x25b967[_0x5b2b96(0x29b)]&&_0x25b967[_0x5b2b96(0x788)];}var br=a0_0x397951(0x794),Cs,ie=null,pr=null,He=null,mo=0x3,ho=null,Sr=!0x1;async function fo(){const _0x24b2bd=a0_0x397951;let _0x3730f1=await he[_0x24b2bd(0x3c4)]();ie=_0x3730f1?.[_0x24b2bd(0x37b)]??null,ho=_0x3730f1?.[_0x24b2bd(0x6b2)]??null,br=_0x3730f1?.[_0x24b2bd(0x564)]??_0x24b2bd(0x794),Cs=_0x3730f1?.[_0x24b2bd(0x555)]??Ms??_0x24b2bd(0x28d),Sr=_0x3730f1?.[_0x24b2bd(0x3d7)]??!0x1,console[_0x24b2bd(0x1aa)]('CONFIGURAÇÃO\x20GERAL:'),console[_0x24b2bd(0x1aa)](_0x3730f1);}async function yo(){await fo();}yo();function _(_0x2c04b4){const _0x5220c8=a0_0x397951;if(_0x2c04b4[_0x5220c8(0x4c1)]||_0x2c04b4[_0x5220c8(0x792)]){let _0x335d0d=_0x2c04b4['viewOnceMessage']?_0x2c04b4[_0x5220c8(0x4c1)]['message']:_0x2c04b4[_0x5220c8(0x792)][_0x5220c8(0x15c)];return(0x0,y['getContentType'])(_0x335d0d);}return _0x2c04b4[_0x5220c8(0x4f8)]?_0x5220c8(0x4f8):_0x2c04b4[_0x5220c8(0x352)]?_0x5220c8(0x352):_0x2c04b4['viewOnceMessageV2Extension']?_0x5220c8(0x27a):(0x0,y[_0x5220c8(0x4ff)])(_0x2c04b4);}var gr={},fe=class c{constructor(_0x131963,_0x31f6dd,_0xf9768c){const _0x583544=a0_0x397951;this[_0x583544(0x4d2)]=_0x131963,this[_0x583544(0x6ec)]=_0x31f6dd,this[_0x583544(0x436)]=_0xf9768c,this[_0x583544(0x745)]=null,this[_0x583544(0x731)]=new v(c[_0x583544(0x346)]),this[_0x583544(0x5ba)]={},this[_0x583544(0x513)]={},this['stateConnection']={'state':_0x583544(0x5d8)},this[_0x583544(0x25c)]=(0x0,F[_0x583544(0x60e)])(ae,'downloads'),this['msgRetryCounterCache']=new Es[(_0x583544(0x349))](),this[_0x583544(0x33a)]=new Es[(_0x583544(0x349))](),this[_0x583544(0x73e)]=!0x1,this[_0x583544(0x1c5)]={'status.instance':_0x583544(0x4fd),'qrcode.updated':'/wa-qrcode','messages.upsert':_0x583544(0x74e),'messages.update':'/wa-message-update','send.message':_0x583544(0x74e),'group.upsert':_0x583544(0x274),'group.update':'/wa-groups','group-participants.update':_0x583544(0x274),'connection.update':_0x583544(0x4fd),'messages.set':'/wa-message','contacts.set':'/wa-contacts','contacts.upsert':'/wa-contacts','contacts.update':_0x583544(0x378),'presence.update':'/wa-presence','chats.set':_0x583544(0x325),'chats.update':_0x583544(0x325),'chats.upsert':'/wa-chats','chats.delete':_0x583544(0x325)},this[_0x583544(0x27f)]=0x0,this[_0x583544(0x710)]=[],this[_0x583544(0x32b)]=0xf,this[_0x583544(0x3a5)]=0x7530,this['isRunning']=!0x1,this[_0x583544(0x375)]={'chats.upsert':async(_0x54eee9,_0x1ac7b0)=>{const _0x571c4b=_0x583544;let _0x18c4ff=[];for await(let _0x193c6f of _0x54eee9)_0x18c4ff['push']({'_id':_0x193c6f['id'],'owner':this['instance'][_0x571c4b(0x341)],'group':_0x193c6f['id']['endsWith']('@g.us'),'name':_0x193c6f[_0x571c4b(0x346)]||_0x193c6f[_0x571c4b(0x665)]||null,'contactname':null,'lastmsg':_0x193c6f['conversationTimestamp']&&_0x193c6f[_0x571c4b(0x282)][_0x571c4b(0x622)]()[_0x571c4b(0x4c6)]<0xd?_0x193c6f[_0x571c4b(0x282)]*0x3e8:_0x193c6f[_0x571c4b(0x282)]||null,'archived':_0x193c6f[_0x571c4b(0x244)]||!0x1,'unreadcount':_0x193c6f[_0x571c4b(0x6f8)]||0x0});this[_0x571c4b(0x590)](_0x571c4b(0x211),_0x18c4ff);},'chats.update':async(_0x168c88,_0x207257)=>{const _0x168082=_0x583544;for(let _0x2e5f92 of _0x168c88){let _0x105614={'_id':_0x2e5f92['id'],'owner':this[_0x168082(0x5ba)][_0x168082(0x341)],'group':_0x2e5f92['id'][_0x168082(0x515)](_0x168082(0x277)),'name':_0x2e5f92[_0x168082(0x346)]||_0x2e5f92[_0x168082(0x665)],'archived':_0x2e5f92[_0x168082(0x244)],'ephemeralExpiration':_0x2e5f92[_0x168082(0x258)]},_0x3e515b=!0x1,_0x409a10={};_0x105614['archived']!=null&&(this[_0x168082(0x731)]['verbose'](this[_0x168082(0x1df)]+'\x20('+this[_0x168082(0x5ba)][_0x168082(0x341)]+_0x168082(0x2b3)+_0x2e5f92[_0x168082(0x244)]),_0x3e515b=!0x0,_0x409a10[_0x168082(0x244)]=_0x2e5f92[_0x168082(0x244)]),_0x2e5f92[_0x168082(0x346)]!=null&&(this[_0x168082(0x731)][_0x168082(0x545)](this['instanceName']+'\x20('+this['instance'][_0x168082(0x341)]+_0x168082(0x427)+_0x2e5f92[_0x168082(0x346)]),_0x3e515b=!0x0,_0x409a10['name']=_0x2e5f92['name']),_0x2e5f92[_0x168082(0x665)]!=null&&(this['logger'][_0x168082(0x545)](this[_0x168082(0x1df)]+'\x20('+this[_0x168082(0x5ba)][_0x168082(0x341)]+'):\x20teve\x20mudanças\x20chat.displayName:\x20'+_0x2e5f92[_0x168082(0x665)]),_0x3e515b=!0x0,_0x409a10[_0x168082(0x346)]=_0x2e5f92[_0x168082(0x665)]),_0x2e5f92[_0x168082(0x258)]!=null&&(this['logger'][_0x168082(0x545)](this[_0x168082(0x1df)]+'\x20('+this[_0x168082(0x5ba)][_0x168082(0x341)]+_0x168082(0x1dc)+_0x2e5f92[_0x168082(0x258)]),_0x3e515b=!0x0,_0x409a10['ephemeralExpiration']=_0x2e5f92[_0x168082(0x258)]);let _0x49c754;_0x3e515b&&(_0x49c754=await this[_0x168082(0x436)][_0x168082(0x2e4)][_0x168082(0x30a)]({'where':{'_id':_0x2e5f92['id']}},_0x409a10,this[_0x168082(0x5ba)][_0x168082(0x341)])),_0x49c754&&q(this['instanceName'],_0x168082(0x740),{'chat':_0x49c754});}},'chats.delete':async _0x4f0c4b=>{const _0x941b7b=_0x583544;this[_0x941b7b(0x590)]('chats.delete',[..._0x4f0c4b]);}},this[_0x583544(0x5d1)]={'contacts.upsert':async(_0x1703a3,_0x6f047d)=>{const _0xa199f6=_0x583544;let _0x3f7949=await this[_0xa199f6(0x436)][_0xa199f6(0x37e)][_0xa199f6(0x317)]({'where':{}},this[_0xa199f6(0x5ba)][_0xa199f6(0x341)]),_0x1e548e=[];for await(let _0x4103e9 of _0x1703a3)_0x3f7949['find'](_0x2e6c7d=>_0x2e6c7d[_0xa199f6(0x578)]===_0x4103e9['id'])||_0x1e548e[_0xa199f6(0x367)]({'_id':_0x4103e9['id'],'pushName':_0x4103e9?.['name']||_0x4103e9?.['verifiedName'],'owner':this[_0xa199f6(0x5ba)][_0xa199f6(0x341)]});this['sendDataWebhook'](_0xa199f6(0x34d),_0x1e548e),await this[_0xa199f6(0x436)][_0xa199f6(0x37e)][_0xa199f6(0x1f0)](_0x1e548e);},'contacts.update':async(_0x319a2e,_0x19decb)=>{const _0x503779=_0x583544;let _0x1a5b0d=[];for await(let _0x5c997a of _0x319a2e)_0x1a5b0d[_0x503779(0x367)]({'_id':_0x5c997a['id'],'pushName':_0x5c997a?.[_0x503779(0x346)]??_0x5c997a?.['verifiedName'],'owner':this[_0x503779(0x5ba)][_0x503779(0x341)]});this['sendDataWebhook'](_0x503779(0x78d),_0x1a5b0d);}},this[_0x583544(0x6db)]={'messaging-history.set':async({messages:_0x1bf745,chats:_0x2064c2,isLatest:_0x441c7c},_0x23b338)=>{const _0xd00e17=_0x583544;if(_0x441c7c){let _0xdd4cb0=await Promise['all'](_0x2064c2[_0xd00e17(0x530)](async _0x436752=>({'_id':_0x436752['id'],'owner':this[_0xd00e17(0x5ba)][_0xd00e17(0x341)],'group':_0x436752['id'][_0xd00e17(0x515)](_0xd00e17(0x277)),'name':_0x436752['name']||_0x436752['displayName']||null,'contactname':null,'lastmsg':_0x436752[_0xd00e17(0x282)]&&_0x436752[_0xd00e17(0x282)][_0xd00e17(0x622)]()[_0xd00e17(0x4c6)]<0xd?_0x436752[_0xd00e17(0x282)]*0x3e8:_0x436752[_0xd00e17(0x282)]||null,'archived':_0x436752['archived']||!0x1,'unreadcount':_0x436752[_0xd00e17(0x6f8)]||0x0})));this[_0xd00e17(0x590)](_0xd00e17(0x5c2),_0xdd4cb0),await this[_0xd00e17(0x5ab)](_0xdd4cb0,_0x23b338);}let _0xed3d58=[],_0x2baeb2=Date['now']()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x5c6cfe]of Object[_0xd00e17(0x65c)](_0x1bf745)){if(_0x5c6cfe[_0xd00e17(0x15c)]?.['protocolMessage']||_0x5c6cfe[_0xd00e17(0x15c)]?.[_0xd00e17(0x301)]||!_0x5c6cfe[_0xd00e17(0x15c)]||_0x5c6cfe[_0xd00e17(0x226)][_0xd00e17(0x686)]===_0xd00e17(0x389)||(Ss[_0xd00e17(0x349)][_0xd00e17(0x77e)](_0x5c6cfe?.[_0xd00e17(0x300)])&&(_0x5c6cfe[_0xd00e17(0x300)]=_0x5c6cfe[_0xd00e17(0x300)]?.['toNumber']()),_0x5c6cfe['messageTimestamp']&&_0x5c6cfe[_0xd00e17(0x300)][_0xd00e17(0x622)]()[_0xd00e17(0x4c6)]<0xd&&(_0x5c6cfe[_0xd00e17(0x300)]=_0x5c6cfe['messageTimestamp']*0x3e8),_0x5c6cfe[_0xd00e17(0x300)]<_0x2baeb2))continue;let {message_normalized:_0x261c10}=this['normalizeMessage'](_0x5c6cfe[_0xd00e17(0x15c)],_(_0x5c6cfe[_0xd00e17(0x15c)]),null);Object[_0xd00e17(0x4cc)](_0x261c10)[_0xd00e17(0x4c6)]>0x0&&_0xed3d58[_0xd00e17(0x367)]({'_id':_0x5c6cfe['key']['id'],'key':_0x5c6cfe[_0xd00e17(0x226)],'pushName':_0x5c6cfe[_0xd00e17(0x4c0)],'participant':_0x5c6cfe['participant'],'message':{..._0x5c6cfe[_0xd00e17(0x15c)]},'messageType':_(_0x5c6cfe[_0xd00e17(0x15c)]),'message_normalized':{'key':_0x5c6cfe[_0xd00e17(0x226)],'pushName':_0x5c6cfe[_0xd00e17(0x4c0)],'messageTimestamp':_0x5c6cfe[_0xd00e17(0x300)],..._0x261c10},'messageTimestamp':_0x5c6cfe[_0xd00e17(0x300)],'owner':this['instance'][_0xd00e17(0x341)]});}_0x23b338[_0xd00e17(0x1f6)]&&_0xed3d58['length']>0x0&&(this[_0xd00e17(0x731)][_0xd00e17(0x545)](this[_0xd00e17(0x1df)]+'\x20('+this[_0xd00e17(0x5ba)][_0xd00e17(0x341)]+_0xd00e17(0x43c)+_0xed3d58[_0xd00e17(0x4c6)]+_0xd00e17(0x598)+this[_0xd00e17(0x5ba)][_0xd00e17(0x341)]+_0xd00e17(0x57c)),await this['repository'][_0xd00e17(0x15c)]['insert']([..._0xed3d58],this[_0xd00e17(0x5ba)]['wuid'])),this[_0xd00e17(0x590)](_0xd00e17(0x747),[..._0xed3d58]),_0x1bf745=void 0x0;},'messages.upsert':async({messages:_0x14b63d,type:_0x58140a},_0x211c47)=>{const _0x24c308=_0x583544;let _0x142a3f=_0x14b63d[0x0];if(_0x58140a!==_0x24c308(0x763)||!_0x142a3f?.['message']||_0x142a3f[_0x24c308(0x15c)]?.[_0x24c308(0x324)]||_0x142a3f[_0x24c308(0x15c)]['senderKeyDistributionMessage']||_0x142a3f[_0x24c308(0x226)][_0x24c308(0x686)]==='status@broadcast')return;let _0x4300e5=null,_0x3c5162=null;try{_0x4300e5=await this[_0x24c308(0x318)](_0x142a3f),_0x3c5162=_0x4300e5?_0x4300e5[_0x24c308(0x60e)](','):null;}catch(_0x427226){this[_0x24c308(0x731)][_0x24c308(0x545)](this[_0x24c308(0x1df)]+'\x20('+this[_0x24c308(0x5ba)]['wuid']+_0x24c308(0x43c)+(_0x427226 instanceof Error?_0x427226[_0x24c308(0x15c)]:JSON[_0x24c308(0x38d)](_0x427226,null,0x2))),_0x3c5162='error\x20get\x20vote';}if(this[_0x24c308(0x577)][_0x24c308(0x5d3)](_0x24c308(0x30c)),Ss[_0x24c308(0x349)][_0x24c308(0x77e)](_0x142a3f[_0x24c308(0x300)])&&(_0x142a3f[_0x24c308(0x300)]=_0x142a3f[_0x24c308(0x300)]?.['toNumber']()),this['localWebhook']?.['groups_ignore']&&_0x142a3f[_0x24c308(0x226)][_0x24c308(0x686)][_0x24c308(0x2fb)](_0x24c308(0x277))){this[_0x24c308(0x731)]['verbose'](_0x24c308(0x3b1));return;}_0x142a3f['messageTimestamp']&&_0x142a3f['messageTimestamp']['toString']()[_0x24c308(0x4c6)]<0xd&&(_0x142a3f[_0x24c308(0x300)]=_0x142a3f[_0x24c308(0x300)]*0x3e8);let _0x130d58=_0x142a3f[_0x24c308(0x15c)],{messageContent:_0x50ebb7,message_normalized:_0x358f83}=this[_0x24c308(0x25d)](_0x130d58,_(_0x142a3f[_0x24c308(0x15c)]),_0x3c5162);_0x50ebb7||console[_0x24c308(0x6aa)](_0x24c308(0x272));let _0x231d0b={'_id':_0x142a3f[_0x24c308(0x226)]['id'],'key':_0x142a3f[_0x24c308(0x226)],'pushName':_0x142a3f['pushName'],'message':{..._0x142a3f[_0x24c308(0x15c)]},'messageType':_(_0x142a3f[_0x24c308(0x15c)]),'message_normalized':{'key':_0x142a3f['key'],'pushName':_0x142a3f[_0x24c308(0x4c0)],'messageTimestamp':_0x142a3f[_0x24c308(0x300)],'source':(0x0,y[_0x24c308(0x2a3)])(_0x142a3f['key']['id']),..._0x358f83},'messageTimestamp':_0x142a3f[_0x24c308(0x300)],'owner':this[_0x24c308(0x5ba)][_0x24c308(0x341)],'source':(0x0,y[_0x24c308(0x2a3)])(_0x142a3f[_0x24c308(0x226)]['id'])};this[_0x24c308(0x731)][_0x24c308(0x1aa)](_0x231d0b),await this['repository'][_0x24c308(0x15c)][_0x24c308(0x1f0)]([_0x231d0b],this['instance'][_0x24c308(0x341)]),this[_0x24c308(0x590)](_0x24c308(0x420),_0x231d0b),q(this[_0x24c308(0x1df)],_0x24c308(0x679),{'message':_0x231d0b}),_0x142a3f[_0x24c308(0x226)]['remoteJid']!==_0x24c308(0x389)&&await this['updateChatWithMessage'](_0x211c47,_0x231d0b,_0x24c308(0x21d));},'messages.update':async(_0x1630cd,_0x249086)=>{const _0x4ca1bc=_0x583544;let _0x1f001e={0x0:_0x4ca1bc(0x33f),0x1:_0x4ca1bc(0x3a4),0x2:'SERVER_ACK',0x3:_0x4ca1bc(0x650),0x4:_0x4ca1bc(0x3f9),0x5:'PLAYED'};for await(let {key:_0x492c4e,update:_0x30b793}of _0x1630cd){if(this[_0x4ca1bc(0x513)]?.[_0x4ca1bc(0x5db)]&&_0x492c4e['remoteJid'][_0x4ca1bc(0x2fb)](_0x4ca1bc(0x277))){this['logger'][_0x4ca1bc(0x545)]('group\x20ignored');return;}if(_0x492c4e[_0x4ca1bc(0x686)]!==_0x4ca1bc(0x389)){let _0x39d09a=Date[_0x4ca1bc(0x287)](),_0x56dc9f;_0x30b793[_0x4ca1bc(0x15c)]===null&&_0x30b793['status']===void 0x0?_0x56dc9f=_0x4ca1bc(0x544):_0x56dc9f=_0x1f001e[_0x30b793[_0x4ca1bc(0x51c)]];let _0x12779a=_0x492c4e[_0x4ca1bc(0x686)]['replace'](/:\d{1,2}@/g,'@'),_0x4801c6={..._0x492c4e,'remoteJid':_0x12779a,'status':_0x56dc9f,'datetime':_0x39d09a,'owner':this['instance'][_0x4ca1bc(0x341)]};this[_0x4ca1bc(0x590)](_0x4ca1bc(0x5d2),_0x4801c6),await this[_0x4ca1bc(0x34b)](_0x492c4e,_0x4801c6);}}},'labels.association':async({type:_0x1d37a1,association:_0x5823cc})=>{const _0x3afa30=_0x583544;if(_0x5823cc[_0x3afa30(0x52f)]===_0x3afa30(0x660))switch(_0x1d37a1){case _0x3afa30(0x78b):console[_0x3afa30(0x1aa)](_0x5823cc),await this[_0x3afa30(0x436)][_0x3afa30(0x2e4)]['updateOne']({'where':{'_id':_0x5823cc[_0x3afa30(0x3f4)]}},{'labels':_0x5823cc[_0x3afa30(0x67e)]},this[_0x3afa30(0x5ba)][_0x3afa30(0x341)],void 0x0,_0x3afa30(0x20a));break;case'remove':console[_0x3afa30(0x1aa)](_0x5823cc),await this[_0x3afa30(0x436)]['chat'][_0x3afa30(0x30a)]({'where':{'_id':_0x5823cc[_0x3afa30(0x3f4)]}},{'labels':_0x5823cc[_0x3afa30(0x67e)]},this[_0x3afa30(0x5ba)]['wuid'],void 0x0,_0x3afa30(0x41e));break;default:console[_0x3afa30(0x6aa)](_0x3afa30(0x52b)+_0x1d37a1+']');}},'labels.edit':async _0x1574db=>{const _0x3c26c4=_0x583544;if(!_0x1574db||!_0x1574db['id']){console[_0x3c26c4(0x6aa)](_0x3c26c4(0x4b4));return;}let _0x261a0a={'_id':_0x1574db['id'],'color':_0x1574db?.[_0x3c26c4(0x4a8)],'name':_0x1574db?.[_0x3c26c4(0x346)],'owner':this['instance'][_0x3c26c4(0x341)]};await this['repository'][_0x3c26c4(0x5ee)][_0x3c26c4(0x30a)]({'where':{'_id':_0x1574db['id']}},_0x261a0a,this[_0x3c26c4(0x5ba)][_0x3c26c4(0x341)]),console[_0x3c26c4(0x1aa)]('Rótulo\x20atualizado:',_0x1574db),_0x1574db[_0x3c26c4(0x581)]&&(await this['repository'][_0x3c26c4(0x5ee)][_0x3c26c4(0x777)]({'where':{'_id':_0x1574db['id']}},this[_0x3c26c4(0x5ba)][_0x3c26c4(0x341)]),console['log'](_0x3c26c4(0x25e),_0x1574db['id']));}},this[_0x583544(0x719)]={'groups.upsert':_0x507c5c=>{const _0x214df9=_0x583544;this[_0x214df9(0x590)](_0x214df9(0x742),_0x507c5c);},'groups.update':_0x57a77a=>{const _0x43609b=_0x583544;this[_0x43609b(0x590)](_0x43609b(0x618),_0x57a77a);},'group-participants.update':_0x437c12=>{const _0x5a6ed2=_0x583544;this[_0x5a6ed2(0x590)](_0x5a6ed2(0x5fd),_0x437c12);}},this[_0x583544(0x318)]=async _0x3ac374=>{const _0x42f282=_0x583544;if(_0x3ac374[_0x42f282(0x15c)]?.[_0x42f282(0x2d2)]){let _0x18dfec=await this['getMessage'](_0x3ac374['message']['pollUpdateMessage']['pollCreationMessageKey'],!0x0);if(_0x18dfec){let _0x4bfb7c=_0x18dfec['key']['fromMe']?this[_0x42f282(0x5ba)][_0x42f282(0x341)]+_0x42f282(0x6e7):_0x18dfec['key'][_0x42f282(0x755)]||_0x18dfec[_0x42f282(0x226)][_0x42f282(0x686)],_0x22af79=_0x18dfec[_0x42f282(0x226)]['id'],_0x1b77a4=_0x18dfec[_0x42f282(0x15c)],_0x33fd05=Buffer['from'](_0x1b77a4['messageContextInfo'][_0x42f282(0x224)][_0x42f282(0x622)]('hex'),'hex'),_0x3f99d7=(0x0,y['decryptPollVote'])(_0x3ac374[_0x42f282(0x15c)][_0x42f282(0x2d2)]['vote'],{'pollCreatorJid':_0x4bfb7c,'pollMsgId':_0x22af79,'pollEncKey':_0x33fd05,'voterJid':_0x3ac374[_0x42f282(0x226)][_0x42f282(0x28f)]?this[_0x42f282(0x5ba)][_0x42f282(0x341)]+_0x42f282(0x6e7):_0x3ac374[_0x42f282(0x226)][_0x42f282(0x686)][_0x42f282(0x515)](_0x42f282(0x557))?_0x3ac374[_0x42f282(0x226)][_0x42f282(0x755)]:_0x3ac374[_0x42f282(0x226)][_0x42f282(0x686)]}),_0x130539=[],_0xea4bf0=_0x3f99d7[_0x42f282(0x390)]['map'](_0x4afc95=>Buffer[_0x42f282(0x430)](_0x4afc95)['toString']('hex'));for(let {optionName:_0x282d1e}of _0x1b77a4[_0x42f282(0x593)]?.['options']||_0x1b77a4[_0x42f282(0x4f8)]?.[_0x42f282(0x2b9)]||_0x1b77a4[_0x42f282(0x352)]?.[_0x42f282(0x2b9)])_0xea4bf0[_0x42f282(0x1dd)]((0x0,y['sha256'])(Buffer[_0x42f282(0x430)](_0x282d1e))['toString'](_0x42f282(0x5b0)))>-0x1&&_0x130539[_0x42f282(0x367)](_0x282d1e);return _0x130539;}}return null;},this[_0x583544(0x25d)]=(_0x4c5dd6,_0x505d2d,_0x1f9102)=>{const _0x56d11a=_0x583544;try{let _0x3c124b=_0x505d2d?_0x4c5dd6[_0x505d2d]:void 0x0,_0x2b64ce={},_0x2dd01f=null,_0x3e27a9=null,_0x2b9dac=null;if(_0x4c5dd6[_0x56d11a(0x792)]?(_0x505d2d=_(_0x4c5dd6[_0x56d11a(0x792)][_0x56d11a(0x15c)]),_0x3c124b=_0x4c5dd6[_0x56d11a(0x792)]['message'][_0x505d2d]):_0x4c5dd6['viewOnceMessageV2Extension']?(_0x505d2d=_(_0x4c5dd6['viewOnceMessageV2Extension']['message']),_0x3c124b=_0x4c5dd6[_0x56d11a(0x27a)]['message'][_0x505d2d]):_0x4c5dd6[_0x56d11a(0x4c1)]?(_0x505d2d=_(_0x4c5dd6[_0x56d11a(0x4c1)][_0x56d11a(0x15c)]),_0x3c124b=_0x4c5dd6[_0x56d11a(0x4c1)]['message'][_0x505d2d]):_0x4c5dd6[_0x56d11a(0x329)]?(_0x505d2d=_(_0x4c5dd6[_0x56d11a(0x15c)][_0x56d11a(0x329)][_0x56d11a(0x15c)]),_0x3c124b=_0x4c5dd6[_0x56d11a(0x15c)][_0x56d11a(0x329)]['message'][_0x505d2d]):_0x4c5dd6[_0x56d11a(0x6cb)]?.[_0x56d11a(0x15c)]?.[_0x56d11a(0x324)]?.['editedMessage']?(_0x505d2d=_(_0x4c5dd6[_0x56d11a(0x6cb)]['message'][_0x56d11a(0x324)][_0x56d11a(0x6cb)]),_0x2dd01f=_0x4c5dd6[_0x56d11a(0x6cb)]['message'][_0x56d11a(0x324)][_0x56d11a(0x226)]['id'],_0x3c124b=_0x4c5dd6[_0x56d11a(0x6cb)][_0x56d11a(0x15c)][_0x56d11a(0x324)]['editedMessage'][_0x505d2d]):_0x3c124b=_0x4c5dd6[_0x505d2d],!_0x505d2d||!_0x3c124b)return console['error']('Unknown\x20message\x20type\x20or\x20empty\x20message',_0x4c5dd6),{'messageType':_0x505d2d,'messageContent':_0x3c124b,'message_normalized':{}};_0x4c5dd6[_0x505d2d]?.[_0x56d11a(0x4c7)]?.['stanzaId']&&_0x4c5dd6[_0x505d2d]?.[_0x56d11a(0x4c7)]?.['quotedMessage']&&(_0x3e27a9=_0x4c5dd6[_0x505d2d][_0x56d11a(0x4c7)][_0x56d11a(0x15e)]),_0x4c5dd6[_0x56d11a(0x707)]&&(_0x2b9dac=_0x4c5dd6[_0x56d11a(0x707)][_0x56d11a(0x226)]['id']);let _0x3c42b0;if(_0x3c124b&&typeof _0x3c124b==_0x56d11a(0x2a1)&&_0x56d11a(0x4eb)in _0x3c124b&&({pollCreationMessageKey:_0x3c42b0}=_0x3c124b),_0x505d2d===_0x56d11a(0x5c0)){let _0x5420e6=_0x3c124b?.['message']?.[_0x56d11a(0x5bb)];_0x5420e6&&(_0x3c124b=_0x5420e6);}if(_0x505d2d===_0x56d11a(0x593)||_0x505d2d==='pollCreationMessageV2'||_0x505d2d===_0x56d11a(0x4f8)){let _0x54d8a9=_0x3c124b[_0x56d11a(0x2b9)]['map'](_0x984ed5=>_0x984ed5['optionName'])['join']('|');_0x2b64ce[_0x56d11a(0x423)]=_0x54d8a9;}let _0x5ef709=_0x3c124b['name']||_0x3c124b[_0x56d11a(0x643)]||_0x3c124b[_0x56d11a(0x6b4)]||_0x3c124b[_0x56d11a(0x665)];if(_0x505d2d===_0x56d11a(0x1d9)){_0x5ef709=(_0x3c124b[_0x56d11a(0x693)]||'')+'\x0a'+(_0x3c124b[_0x56d11a(0x299)]||'')+'\x0a'+(_0x3c124b['footerText']||'');let _0xaf76cf=this[_0x56d11a(0x2fa)](_0x3c124b[_0x56d11a(0x3a2)]);_0x2b64ce[_0x56d11a(0x423)]=_0xaf76cf;}if(_0x505d2d===_0x56d11a(0x2c6)&&(_0x1f9102=_0x3c124b['title']),_0x3c124b[_0x56d11a(0x438)]){let _0x420e23=this[_0x56d11a(0x461)](JSON[_0x56d11a(0x38d)](_0x3c124b[_0x56d11a(0x438)],null,0x2));_0x5ef709=_0x5ef709+'\x0a'+_0x420e23;}if(_0x3c124b){let {sections:_0xd4cdbc,listType:_0x5f1d48,displayName:_0x55b174,vcard:_0x5b1a24,contactVcard:_0x5248af,name:_0x4dc817,caption:_0x596711,conversation:_0x2401fc,pollCreationMessageKey:_0x2e1cb1,footerText:_0xf4d7e6,contentText:_0x574579,pageCount:_0x342e19,headerType:_0x2ad35a,isAvatar:_0x324db0,isAnimated:_0xef39b1,fallbackLc:_0x353171,fallbackLg:_0x1e3b30,namespace:_0x5d5390,elementName:_0x1416e0,localizableParams:_0x280e42,viewOnce:_0x2fb647,height:_0x557749,width:_0x562353,key:_0x21d7fb,firstScanLength:_0x34fcd2,firstScanSidecar:_0x54e756,gifPlayback:_0x25bf1d,gifAttribution:_0x51d565,midQualityFileSha256:_0x142764,scansSidecar:_0x234363,streamingSidecar:_0x41ac65,thumbnailHeight:_0x217ef9,thumbnailWidth:_0x1c88d1,thumbnailEncSha256:_0x9548f1,thumbnailDirectPath:_0x175329,canonicalUrl:_0x473499,matchedText:_0x3d0c33,previewType:_0x2b25b9,thumbnailSha256:_0x3267f3,deviceListMetadataVersion:_0x5d5728,inviteLinkGroupTypeV2:_0x19f1e5,interactiveAnnotations:_0x704505,scanLengths:_0x171dba,jpegThumbnail:_0x37a62a,url:_0x2c376a,mediaKeyTimestamp:_0x54b753,waveform:_0x4f2891,stickerSentTs:_0x83ce1f,firstFrameLength:_0x5c4595,fileEncSha256:_0x1e5830,contextInfo:_0x318240,firstFrameSidecar:_0x3b99b7,directPath:_0x54ab7a,fileSha256:_0x4493be,mediaKey:_0x2b0202,senderTimestampMs:_0x21f686,..._0x4de4ad}=_0x3c124b;(_0x505d2d===_0x56d11a(0x1d9)||_0x505d2d==='listResponseMessage')&&(delete _0x4de4ad['title'],delete _0x4de4ad[_0x56d11a(0x299)]),typeof _0x3c124b==_0x56d11a(0x22b)?_0x2b64ce={'text':_0x3c124b,'type':_0x505d2d||_0x56d11a(0x6b4),..._0x2dd01f&&{'edited':_0x2dd01f},..._0x3e27a9&&{'quoted':_0x3e27a9},..._0x2b9dac&&{'reaction':_0x2b9dac}}:_0x2b64ce={'text':_0x5ef709,..._0x4de4ad,..._0x505d2d===_0x56d11a(0x2d2)?{'poll_id':_0x3c124b[_0x56d11a(0x4eb)]['id'],'quoted':_0x3c124b[_0x56d11a(0x4eb)]['id'],'vote':_0x1f9102}:{},..._0x505d2d===_0x56d11a(0x2c6)?{'vote':_0x1f9102}:{},'type':_0x505d2d,..._0x2dd01f&&{'edited':_0x2dd01f},..._0x3e27a9&&{'quoted':_0x3e27a9},..._0x2b9dac&&{'reaction':_0x2b9dac},...(_0x505d2d===_0x56d11a(0x593)||_0x505d2d==='pollCreationMessageV2'||_0x505d2d===_0x56d11a(0x4f8)||_0x505d2d===_0x56d11a(0x1d9))&&{'convertedOptions':_0x2b64ce[_0x56d11a(0x423)]}};}return{'messageType':_0x505d2d,'messageContent':_0x3c124b,'message_normalized':_0x2b64ce};}catch(_0x3c4e02){console[_0x56d11a(0x6aa)]('Erro\x20ao\x20normalizar\x20a\x20mensagem:',_0x3c4e02);}},this[_0x583544(0x543)]=null,this[_0x583544(0x4db)]=0x0,this[_0x583544(0x46f)]=null,(this[_0x583544(0x41f)](),this[_0x583544(0x5ba)][_0x583544(0x6ba)]={'count':0x0});}set[a0_0x397951(0x1df)](_0x132cc9){const _0x324302=a0_0x397951;if(!_0x132cc9){this[_0x324302(0x5ba)][_0x324302(0x346)]=(0x0,hr['v4'])();return;}this[_0x324302(0x5ba)]['name']=_0x132cc9,this['sendDataWebhook'](_0x324302(0x62e),{'instance':this['instance']['name'],'status':_0x324302(0x4df)});}get[a0_0x397951(0x1df)](){const _0xa75ec=a0_0x397951;return this[_0xa75ec(0x5ba)][_0xa75ec(0x346)];}get[a0_0x397951(0x341)](){const _0x351a7c=a0_0x397951;return this['instance'][_0x351a7c(0x341)];}async[a0_0x397951(0x1ea)](){const _0x431d78=a0_0x397951;let _0x3e55b9=this[_0x431d78(0x577)]['user']?.[_0x431d78(0x346)]??this[_0x431d78(0x577)][_0x431d78(0x61b)]?.[_0x431d78(0x1f1)];if(!_0x3e55b9){if(this[_0x431d78(0x4d2)]['get'](_0x431d78(0x604))[_0x431d78(0x1f6)]){let _0x1407f0=await N[_0x431d78(0x773)]()['db'](this['configService'][_0x431d78(0x624)](_0x431d78(0x604))[_0x431d78(0x271)]['DB_PREFIX_NAME']+_0x431d78(0x39e))[_0x431d78(0x264)](this['instanceName'])[_0x431d78(0x3c4)]({'_id':_0x431d78(0x3c0)});if(_0x1407f0){let _0x58a60d=JSON[_0x431d78(0x497)](JSON[_0x431d78(0x38d)](_0x1407f0),y[_0x431d78(0x1c3)][_0x431d78(0x65b)]);_0x3e55b9=_0x58a60d['me']?.[_0x431d78(0x346)]||_0x58a60d['me']?.[_0x431d78(0x1f1)];}}else{if((0x0,Me[_0x431d78(0x79d)])((0x0,F[_0x431d78(0x60e)])(pe,this[_0x431d78(0x1df)],_0x431d78(0x24b)))){let _0x9272aa=JSON[_0x431d78(0x497)]((0x0,Me['readFileSync'])((0x0,F[_0x431d78(0x60e)])(pe,this['instanceName'],_0x431d78(0x24b)),{'encoding':'utf-8'}));_0x3e55b9=_0x9272aa['me']?.[_0x431d78(0x346)]||_0x9272aa['me']?.['verifiedName'];}}}return _0x3e55b9;}get[a0_0x397951(0x765)](){return this['instance']['profilePictureUrl'];}get['qrCode'](){const _0x532580=a0_0x397951;return{'pairingCode':this['instance'][_0x532580(0x6ba)]?.[_0x532580(0x687)],'code':this['instance'][_0x532580(0x6ba)]?.[_0x532580(0x6df)],'base64':this[_0x532580(0x5ba)][_0x532580(0x6ba)]?.[_0x532580(0x75d)]};}async[a0_0x397951(0x3e7)](){const _0x23440d=a0_0x397951;let _0x510836=await this['repository']['webhook'][_0x23440d(0x317)](this[_0x23440d(0x1df)]);this[_0x23440d(0x513)][_0x23440d(0x634)]=_0x510836?.[_0x23440d(0x634)],this[_0x23440d(0x513)][_0x23440d(0x63b)]=_0x510836?.[_0x23440d(0x63b)],this[_0x23440d(0x513)][_0x23440d(0x5c3)]=_0x510836?.[_0x23440d(0x5c3)],this['localWebhook'][_0x23440d(0x2f0)]=_0x510836?.[_0x23440d(0x2f0)],this['localWebhook'][_0x23440d(0x778)]=_0x510836?.[_0x23440d(0x778)],this[_0x23440d(0x513)][_0x23440d(0x610)]=_0x510836?.[_0x23440d(0x610)],this[_0x23440d(0x513)][_0x23440d(0x21d)]=_0x510836?.[_0x23440d(0x21d)],this[_0x23440d(0x513)][_0x23440d(0x5c9)]=_0x510836?.['MESSAGES_UPDATE'],this[_0x23440d(0x513)][_0x23440d(0x385)]=_0x510836?.[_0x23440d(0x385)],this['localWebhook']['GROUPS_UPDATE']=_0x510836?.[_0x23440d(0x458)],this[_0x23440d(0x513)][_0x23440d(0x56d)]=_0x510836?.['GROUP_PARTICIPANTS_UPDATE'],this['localWebhook'][_0x23440d(0x6fd)]=_0x510836?.['CHATS_SET'],this[_0x23440d(0x513)][_0x23440d(0x3d0)]=_0x510836?.['CHATS_UPSERT'],this[_0x23440d(0x513)][_0x23440d(0x283)]=_0x510836?.[_0x23440d(0x283)],this[_0x23440d(0x513)][_0x23440d(0x354)]=_0x510836?.['CHATS_DELETE'],this['localWebhook'][_0x23440d(0x350)]=_0x510836?.['CONTACTS_SET'],this[_0x23440d(0x513)][_0x23440d(0x52d)]=_0x510836?.['CONTACTS_UPSERT'],this[_0x23440d(0x513)][_0x23440d(0x1e9)]=_0x510836?.[_0x23440d(0x1e9)],this['localWebhook']['PRESENCE_UPDATE']=_0x510836?.[_0x23440d(0x406)],this[_0x23440d(0x513)][_0x23440d(0x330)]=_0x510836?.[_0x23440d(0x330)],this['localWebhook'][_0x23440d(0x6ae)]=_0x510836?.[_0x23440d(0x6ae)],this['localWebhook'][_0x23440d(0x5db)]=_0x510836?.[_0x23440d(0x5db)];}async[a0_0x397951(0x292)](_0x121253){const _0x12bd06=a0_0x397951;let _0x4cc766=['_id','url',_0x12bd06(0x63b),_0x12bd06(0x5c3),_0x12bd06(0x2f0),_0x12bd06(0x778),_0x12bd06(0x5c9),_0x12bd06(0x21d),_0x12bd06(0x610),_0x12bd06(0x385),_0x12bd06(0x458),_0x12bd06(0x56d),_0x12bd06(0x6fd),_0x12bd06(0x3d0),_0x12bd06(0x283),_0x12bd06(0x354),_0x12bd06(0x350),_0x12bd06(0x52d),_0x12bd06(0x1e9),_0x12bd06(0x406),_0x12bd06(0x330),_0x12bd06(0x6ae),_0x12bd06(0x5db)],_0x2eb108={};return _0x4cc766[_0x12bd06(0x334)](_0x545405=>{_0x121253[_0x545405]!==void 0x0&&(_0x2eb108[_0x545405]=_0x121253[_0x545405]);}),await this[_0x12bd06(0x436)][_0x12bd06(0x185)][_0x12bd06(0x409)](_0x2eb108,this[_0x12bd06(0x1df)]),Object[_0x12bd06(0x3de)](this[_0x12bd06(0x513)],_0x2eb108),await this[_0x12bd06(0x436)][_0x12bd06(0x185)][_0x12bd06(0x317)](this[_0x12bd06(0x1df)]);}async['findWebhook'](){const _0x273613=a0_0x397951;return await this[_0x273613(0x436)]['webhook'][_0x273613(0x317)](this[_0x273613(0x1df)]);}async[a0_0x397951(0x590)](_0x47fb21,_0x4df5dc){const _0x23c5ae=a0_0x397951;let _0x436220=_0x47fb21[_0x23c5ae(0x4cf)](/[\.-]/gm,'_')[_0x23c5ae(0x647)](),_0xfe46a6=this[_0x23c5ae(0x513)][_0x23c5ae(0x63b)]&&(0x0,$[_0x23c5ae(0x3e4)])(this[_0x23c5ae(0x513)]['url'])?this[_0x23c5ae(0x513)][_0x23c5ae(0x634)]+(this['localWebhook'][_0x23c5ae(0x5c3)]?this[_0x23c5ae(0x1c5)][_0x47fb21]:''):null,_0x2d681e=this[_0x23c5ae(0x513)][_0x436220],_0x3d4235=ie&&ie[_0x23c5ae(0x63b)]&&(0x0,$[_0x23c5ae(0x3e4)])(ie['url'])?ie[_0x23c5ae(0x634)]+(ie[_0x23c5ae(0x5c3)]?this[_0x23c5ae(0x1c5)][_0x47fb21]:''):null,_0x4b0c29=ie?ie[_0x436220]:null;if(_0x2d681e&&_0xfe46a6)try{await se[_0x23c5ae(0x349)][_0x23c5ae(0x409)]({'baseURL':_0xfe46a6})[_0x23c5ae(0x384)]('',{'event':_0x47fb21,'instance':this[_0x23c5ae(0x5ba)][_0x23c5ae(0x346)],'data':_0x4df5dc}),this['logger'][_0x23c5ae(0x1aa)](_0x23c5ae(0x403)+_0x47fb21+':\x20'+_0xfe46a6);}catch(_0x5698a1){this[_0x23c5ae(0x731)][_0x23c5ae(0x6aa)](this[_0x23c5ae(0x1df)]+'\x20('+this[_0x23c5ae(0x5ba)]['wuid']+_0x23c5ae(0x43c)+{'local':c[_0x23c5ae(0x346)]+_0x23c5ae(0x276),'message':_0x5698a1?.[_0x23c5ae(0x15c)],'hostName':_0x5698a1?.['hostname'],'syscall':_0x5698a1?.[_0x23c5ae(0x208)],'code':_0x5698a1?.['code'],'error':_0x5698a1?.['errno'],'stack':_0x5698a1?.[_0x23c5ae(0x510)],'name':_0x5698a1?.['name']});}if(_0x4b0c29&&_0x3d4235)try{await se[_0x23c5ae(0x349)][_0x23c5ae(0x409)]({'baseURL':_0x3d4235})[_0x23c5ae(0x384)]('',{'event':_0x47fb21,'instance':this['instance'][_0x23c5ae(0x346)],'data':_0x4df5dc}),this[_0x23c5ae(0x731)]['log'](_0x23c5ae(0x6a8)+_0x47fb21+':\x20'+_0x3d4235);}catch(_0x2e1067){this[_0x23c5ae(0x731)][_0x23c5ae(0x6aa)](this['instanceName']+'\x20('+this[_0x23c5ae(0x5ba)]['wuid']+_0x23c5ae(0x43c)+{'local':c['name']+_0x23c5ae(0x48e),'message':_0x2e1067?.['message'],'hostName':_0x2e1067?.[_0x23c5ae(0x5f2)],'syscall':_0x2e1067?.[_0x23c5ae(0x208)],'code':_0x2e1067?.['code'],'error':_0x2e1067?.[_0x23c5ae(0x431)],'stack':_0x2e1067?.[_0x23c5ae(0x510)],'name':_0x2e1067?.[_0x23c5ae(0x346)]});}}async[a0_0x397951(0x53a)]({qr:_0x40f9bb,connection:_0x304b15,lastDisconnect:_0x1766fe}){const _0xd6fb25=a0_0x397951;if(_0x40f9bb){if(this[_0xd6fb25(0x5ba)][_0xd6fb25(0x6ba)][_0xd6fb25(0x23e)]===mo)return this[_0xd6fb25(0x590)](_0xd6fb25(0x23c),{'message':_0xd6fb25(0x36b),'statusCode':y[_0xd6fb25(0x534)][_0xd6fb25(0x661)]}),this['stateConnection']={'state':'refused','statusReason':y[_0xd6fb25(0x534)][_0xd6fb25(0x4f9)]},this['sendDataWebhook']('connection.update',{'instance':this[_0xd6fb25(0x5ba)][_0xd6fb25(0x346)],...this[_0xd6fb25(0x2bf)]}),this['sendDataWebhook'](_0xd6fb25(0x62e),{'instance':this['instance'][_0xd6fb25(0x346)],'status':_0xd6fb25(0x45f)}),this['repository'][_0xd6fb25(0x417)]['create']({'owner':'','online':!0x1,'lastDisconnect':Date[_0xd6fb25(0x287)]()},this[_0xd6fb25(0x5ba)][_0xd6fb25(0x346)]),this['endSession']=!0x0,this[_0xd6fb25(0x6ec)]['emit'](_0xd6fb25(0x32c),this[_0xd6fb25(0x5ba)][_0xd6fb25(0x346)]);this[_0xd6fb25(0x5ba)][_0xd6fb25(0x6ba)][_0xd6fb25(0x23e)]++;let _0x12d8c4={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':'#ffffff','dark':_0xd6fb25(0x48d)}};fr[_0xd6fb25(0x349)][_0xd6fb25(0x56b)](_0x40f9bb,_0x12d8c4,(_0x495386,_0x4aa589)=>{const _0x7e0d2e=_0xd6fb25;if(_0x495386){this[_0x7e0d2e(0x731)][_0x7e0d2e(0x6aa)](this[_0x7e0d2e(0x1df)]+'\x20('+this[_0x7e0d2e(0x5ba)][_0x7e0d2e(0x341)]+_0x7e0d2e(0x46d)+(_0x495386 instanceof Error?_0x495386[_0x7e0d2e(0x15c)]:JSON[_0x7e0d2e(0x38d)](_0x495386,null,0x2)));return;}this[_0x7e0d2e(0x5ba)][_0x7e0d2e(0x6ba)][_0x7e0d2e(0x75d)]=_0x4aa589,this[_0x7e0d2e(0x5ba)][_0x7e0d2e(0x6ba)][_0x7e0d2e(0x6df)]=_0x40f9bb,this['sendDataWebhook'](_0x7e0d2e(0x23c),{'qrcode':{'instance':this[_0x7e0d2e(0x5ba)]['name'],'pairingCode':this[_0x7e0d2e(0x5ba)][_0x7e0d2e(0x6ba)][_0x7e0d2e(0x687)],'code':_0x40f9bb,'base64':_0x4aa589}});}),this[_0xd6fb25(0x517)]?this[_0xd6fb25(0x5ba)]['qrcode'][_0xd6fb25(0x687)]=await this[_0xd6fb25(0x577)]['requestPairingCode'](this[_0xd6fb25(0x517)]):this[_0xd6fb25(0x5ba)][_0xd6fb25(0x6ba)][_0xd6fb25(0x687)]=null,yr['default'][_0xd6fb25(0x1db)](_0x40f9bb,{'small':!0x0},_0xf6fdc2=>this['logger']['log'](_0xd6fb25(0x6e6)+this[_0xd6fb25(0x5ba)][_0xd6fb25(0x346)]+_0xd6fb25(0x559)+this[_0xd6fb25(0x5ba)][_0xd6fb25(0x6ba)]['count']+',\x20pairCode:\x20'+this[_0xd6fb25(0x5ba)][_0xd6fb25(0x6ba)][_0xd6fb25(0x687)]+'\x20}\x0a'+_0xf6fdc2));}if(_0x304b15&&(this['stateConnection']={'state':_0x304b15,'statusReason':_0x1766fe?.[_0xd6fb25(0x6aa)]?.[_0xd6fb25(0x26a)]?.[_0xd6fb25(0x662)]??0xc8},this['sendDataWebhook']('connection.update',{'instance':this[_0xd6fb25(0x5ba)]['name'],...this[_0xd6fb25(0x2bf)]})),_0x304b15===_0xd6fb25(0x5d8)){if(this[_0xd6fb25(0x27f)]++,this[_0xd6fb25(0x710)][_0xd6fb25(0x367)](Date[_0xd6fb25(0x287)]()),this[_0xd6fb25(0x710)]=this[_0xd6fb25(0x710)]['filter'](_0x390a84=>Date[_0xd6fb25(0x287)]()-_0x390a84<this[_0xd6fb25(0x3a5)]),_0x1766fe['error']?.[_0xd6fb25(0x26a)]?.['statusCode']!==y['DisconnectReason']['loggedOut']&&this[_0xd6fb25(0x710)][_0xd6fb25(0x4c6)]<=this['MAX_RECONNECT_ATTEMPTS'])await this[_0xd6fb25(0x3dc)]();else{this[_0xd6fb25(0x590)](_0xd6fb25(0x62e),{'instance':this['instance']['name'],'status':_0xd6fb25(0x45f)}),this['isConnected']=!0x1,this['repository']['webhook'][_0xd6fb25(0x777)](this[_0xd6fb25(0x1df)]),this[_0xd6fb25(0x436)][_0xd6fb25(0x417)][_0xd6fb25(0x409)]({'owner':'','online':!0x1,'lastDisconnect':Date['now']()},this[_0xd6fb25(0x5ba)]['name']);try{this[_0xd6fb25(0x731)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...');let _0x193241=await this[_0xd6fb25(0x436)]['message'][_0xd6fb25(0x328)](this[_0xd6fb25(0x5ba)][_0xd6fb25(0x341)]);_0x193241[_0xd6fb25(0x5eb)]?this[_0xd6fb25(0x731)][_0xd6fb25(0x545)](this[_0xd6fb25(0x1df)]+'\x20('+this[_0xd6fb25(0x5ba)]['wuid']+_0xd6fb25(0x6de)):console[_0xd6fb25(0x6aa)](_0xd6fb25(0x368),_0x193241[_0xd6fb25(0x6aa)]);}catch(_0x1bd5d0){console[_0xd6fb25(0x6aa)](_0xd6fb25(0x523),_0x1bd5d0);}this['delayMessage']!==null&&(this[_0xd6fb25(0x731)][_0xd6fb25(0x545)](this[_0xd6fb25(0x1df)]+'\x20('+this[_0xd6fb25(0x5ba)][_0xd6fb25(0x341)]+'):\x20Limpando\x20delayMessage'),clearInterval(this['delayMessage']),this[_0xd6fb25(0x640)]=null),this[_0xd6fb25(0x731)][_0xd6fb25(0x545)](this[_0xd6fb25(0x1df)]+'\x20('+this[_0xd6fb25(0x5ba)][_0xd6fb25(0x341)]+_0xd6fb25(0x1b4)),this[_0xd6fb25(0x745)]=null,this['eventEmitter'][_0xd6fb25(0x50c)](_0xd6fb25(0x642),this[_0xd6fb25(0x5ba)][_0xd6fb25(0x346)],'inner'),this['client']?.['ws']?.['close'](),this[_0xd6fb25(0x577)]['end'](new Error('Close\x20connection'));}}if(_0x304b15===_0xd6fb25(0x612)){this[_0xd6fb25(0x25b)],this[_0xd6fb25(0x5ba)]['wuid']=this[_0xd6fb25(0x577)][_0xd6fb25(0x61b)]['id']['replace'](/:\d+/,'')[_0xd6fb25(0x4cf)](_0xd6fb25(0x6e7),''),this[_0xd6fb25(0x5ba)][_0xd6fb25(0x765)]=(await this[_0xd6fb25(0x444)](this[_0xd6fb25(0x5ba)]['wuid']+_0xd6fb25(0x6e7)))[_0xd6fb25(0x765)],this[_0xd6fb25(0x436)][_0xd6fb25(0x417)][_0xd6fb25(0x409)]({'online':!0x0,'owner':this[_0xd6fb25(0x5ba)][_0xd6fb25(0x341)],'lastDisconnect':null},this[_0xd6fb25(0x5ba)][_0xd6fb25(0x346)]);let _0x1e87ff=_0xd6fb25(0x308)+this[_0xd6fb25(0x5ba)][_0xd6fb25(0x341)],_0x2d3f4c=0x28,_0x413acd=Math[_0xd6fb25(0x227)]((_0x2d3f4c-_0x1e87ff[_0xd6fb25(0x4c6)])/0x2),_0x433dfa='\x20'['repeat'](_0x413acd),_0x5ecb68=_0xd6fb25(0x25f),_0x471b14=_0xd6fb25(0x56f)+this[_0xd6fb25(0x5ba)][_0xd6fb25(0x346)],_0x22d149=(''+_0x433dfa+_0x1e87ff+_0x433dfa)[_0xd6fb25(0x4a2)](_0x2d3f4c,'\x20'),_0x1dd98a=(''+_0x433dfa+_0x5ecb68+_0x433dfa)[_0xd6fb25(0x4a2)](_0x2d3f4c,'\x20'),_0x3cbb56=(''+_0x433dfa+_0x471b14+_0x433dfa)[_0xd6fb25(0x4a2)](_0x2d3f4c,'\x20'),_0x1a4722=Math['max'](_0x22d149['length'],_0x1dd98a[_0xd6fb25(0x4c6)],_0x3cbb56[_0xd6fb25(0x4c6)]),_0x442aad=_0x22d149[_0xd6fb25(0x4a2)](_0x1a4722,'\x20'),_0x558539=_0x1dd98a['padEnd'](_0x1a4722,'\x20'),_0x4f63e0=_0x3cbb56[_0xd6fb25(0x4a2)](_0x1a4722,'\x20');this['logger']['info'](('\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌'+'─'[_0xd6fb25(0x39a)](_0x1a4722)+_0xd6fb25(0x4fa)+_0x558539+_0xd6fb25(0x38c)+_0x4f63e0+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0x442aad+_0xd6fb25(0x677)+'─'[_0xd6fb25(0x39a)](_0x1a4722)+'┘')['replace'](/^ +/gm,'\x20\x20')),this['AutomateFunctions'](),this['isConnected']=!0x0;}}[a0_0x397951(0x25b)](){const _0x208b35=a0_0x397951;this[_0x208b35(0x27f)]=0x0,this[_0x208b35(0x710)]=[];}async[a0_0x397951(0x685)](_0x58b2f8,_0x1888aa=!0x1){const _0x514d97=a0_0x397951;try{let _0x1532be=await this[_0x514d97(0x436)][_0x514d97(0x15c)][_0x514d97(0x317)]({'where':{'_id':_0x58b2f8['id']}},this[_0x514d97(0x5ba)][_0x514d97(0x341)]);return _0x1888aa?_0x1532be[0x0]:_0x1532be[0x0][_0x514d97(0x15c)];}catch{return{'conversation':''};}}['cleanStore'](){const _0x2cf3c7=a0_0x397951;let _0x2b01f2=this['configService'][_0x2cf3c7(0x624)](_0x2cf3c7(0x44d)),_0xdaf788=this[_0x2cf3c7(0x4d2)]['get']('DATABASE');_0x2b01f2?.[_0x2cf3c7(0x387)]&&!_0xdaf788[_0x2cf3c7(0x1f6)]&&setInterval(()=>{const _0x50e747=_0x2cf3c7;try{for(let [_0x5f065a,_0x40d392]of Object[_0x50e747(0x65c)](_0x2b01f2))_0x40d392===!0x0&&(0x0,Dt[_0x50e747(0x3df)])(_0x50e747(0x253)+(0x0,F['join'])(this[_0x50e747(0x25c)],_0x5f065a[_0x50e747(0x4b5)](),this[_0x50e747(0x5ba)]['wuid'])+_0x50e747(0x654));}catch{}},(_0x2b01f2?.[_0x2cf3c7(0x387)]??0xe10)*0x3e8);}async[a0_0x397951(0x4c5)](){const _0x2c3506=a0_0x397951;let _0x2d459e=this['configService']['get'](_0x2c3506(0x604)),_0x2dc7f9=this['configService'][_0x2c3506(0x624)](_0x2c3506(0x5b9));return _0x2dc7f9?.[_0x2c3506(0x1f6)]?await fs(_0x2dc7f9,this[_0x2c3506(0x5ba)][_0x2c3506(0x346)]):_0x2d459e[_0x2c3506(0x1f6)]?await hs(this[_0x2c3506(0x5ba)]['name']):await(0x0,y['useMultiFileAuthState'])((0x0,F[_0x2c3506(0x60e)])(pe,this[_0x2c3506(0x5ba)][_0x2c3506(0x346)]));}async[a0_0x397951(0x27c)](){const _0x1c7327=a0_0x397951;let _0x164b6b=()=>Math['floor'](Math[_0x1c7327(0x3a3)]()*0x2711)+0x7d0,_0x18a7b6=async()=>{const _0x313921=_0x1c7327;if(!this[_0x313921(0x492)]){this[_0x313921(0x731)]['verbose']('Desconectado,\x20parando\x20execução.'),this[_0x313921(0x163)]=!0x1;return;}if(this[_0x313921(0x5ba)][_0x313921(0x341)]&&this[_0x313921(0x745)]&&this[_0x313921(0x640)]!==null&&this[_0x313921(0x640)]!==void 0x0){let _0x244c94=Math[_0x313921(0x40f)](this[_0x313921(0x640)]/0xea60);this[_0x313921(0x731)]['verbose'](this[_0x313921(0x1df)]+'\x20('+this['instance']['wuid']+_0x313921(0x2ed)+_0x244c94+_0x313921(0x2aa)),this['isRunning']=!0x1;return;}else this['instance'][_0x313921(0x341)]&&(this['logger'][_0x313921(0x545)](this[_0x313921(0x1df)]+'\x20('+this['instance'][_0x313921(0x341)]+'):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...'),await this['repository'][_0x313921(0x589)][_0x313921(0x3da)](this['instance'][_0x313921(0x341)]),await this[_0x313921(0x436)]['flow'][_0x313921(0x3da)](this['instance'][_0x313921(0x341)]),await this[_0x313921(0x436)][_0x313921(0x343)]['copyDataToNewModel'](this['instance']['wuid']),this[_0x313921(0x731)]['verbose'](this[_0x313921(0x1df)]+'\x20('+this[_0x313921(0x5ba)][_0x313921(0x341)]+_0x313921(0x442)),this[_0x313921(0x745)]||await this[_0x313921(0x42c)](),(this[_0x313921(0x640)]===null||this['delayMessage']===void 0x0)&&await this['scheduleNextCheck']());if(this[_0x313921(0x163)]){let _0x18ca04=_0x164b6b();this[_0x313921(0x731)][_0x313921(0x545)](this[_0x313921(0x1df)]+_0x313921(0x44b)+_0x18ca04/0x3e8+_0x313921(0x629)),setTimeout(_0x18a7b6,_0x18ca04);}};if(this['isRunning'])return;this['isRunning']=!0x0;let _0x5a7dec=_0x164b6b();setTimeout(_0x18a7b6,_0x5a7dec);}async[a0_0x397951(0x674)](_0x30f701,_0x20ef2c,_0x3c4777,_0x35cf4b,_0x2a245a){const _0x9a106=a0_0x397951;this['logger']['verbose']('requested\x20testProxy');try{let _0xeaae98={'host':_0x30f701,'port':parseInt(_0x20ef2c),'protocol':_0x3c4777};_0x35cf4b&&_0x2a245a&&(_0xeaae98={..._0xeaae98,'auth':{'username':_0x35cf4b,'password':_0x2a245a}});let _0x25a537=[_0x9a106(0x489),_0x9a106(0x542),_0x9a106(0x4fc)];for(let _0x41f4a6 of _0x25a537)try{let _0x3ada5b=await se[_0x9a106(0x349)][_0x9a106(0x624)](_0x41f4a6,{'proxy':_0xeaae98}),_0x2b9afa;return _0x41f4a6['includes'](_0x9a106(0x6c3))||_0x41f4a6[_0x9a106(0x2fb)](_0x9a106(0x2db))?_0x2b9afa=_0x3ada5b[_0x9a106(0x2cf)]['ip']:_0x41f4a6[_0x9a106(0x2fb)](_0x9a106(0x774))&&(_0x2b9afa=_0x3ada5b['data'][_0x9a106(0x248)](/\d+\.\d+\.\d+\.\d+/)[0x0]),this[_0x9a106(0x731)][_0x9a106(0x545)](_0x9a106(0x3a7)+_0x41f4a6+':\x20'+_0x2b9afa),!0x0;}catch(_0x2b253c){this[_0x9a106(0x731)]['error'](_0x9a106(0x1bd)+_0x41f4a6+_0x9a106(0x2c3)+_0x2b253c);}return!0x1;}catch(_0x408be0){return this[_0x9a106(0x731)][_0x9a106(0x6aa)]('testProxy\x20error:\x20'+_0x408be0),_0x408be0[_0x9a106(0x616)]?(this['logger'][_0x9a106(0x6aa)](_0x9a106(0x2fd)+_0x408be0[_0x9a106(0x616)][_0x9a106(0x2cf)]),this[_0x9a106(0x731)][_0x9a106(0x6aa)](_0x9a106(0x736)+_0x408be0['response'][_0x9a106(0x51c)]),this[_0x9a106(0x731)][_0x9a106(0x6aa)]('Error\x20headers:'+_0x408be0[_0x9a106(0x616)][_0x9a106(0x161)])):_0x408be0[_0x9a106(0x3b2)]?this[_0x9a106(0x731)][_0x9a106(0x6aa)]('No\x20response\x20received:'+_0x408be0[_0x9a106(0x3b2)]):this[_0x9a106(0x731)][_0x9a106(0x6aa)](_0x9a106(0x4e7)+_0x408be0[_0x9a106(0x15c)]),!0x1;}}async[a0_0x397951(0x66e)](_0x4fe381){const _0x1e52cc=a0_0x397951;if(console['log'](_0x1e52cc(0x66e)),await this[_0x1e52cc(0x674)](_0x4fe381['host'],_0x4fe381[_0x1e52cc(0x34e)],_0x4fe381[_0x1e52cc(0x228)],_0x4fe381[_0x1e52cc(0x29b)],_0x4fe381[_0x1e52cc(0x788)])){console[_0x1e52cc(0x1aa)](_0x1e52cc(0x734));let _0x5516b3=_0x4fe381[_0x1e52cc(0x228)]+_0x1e52cc(0x59e)+_0x4fe381[_0x1e52cc(0x727)]+':'+_0x4fe381['port'];return _0x4fe381['username']&&_0x4fe381['password']&&(_0x5516b3=_0x4fe381[_0x1e52cc(0x29b)]+':'+_0x4fe381[_0x1e52cc(0x788)]+'@'+_0x5516b3),this['repository'][_0x1e52cc(0x417)][_0x1e52cc(0x409)]({'proxy':_0x5516b3},this[_0x1e52cc(0x5ba)]['name']),{'agent':new wr[(_0x1e52cc(0x1d3))](_0x5516b3)};}return null;}['createProxyConfig'](_0x5f3ed9){const _0x5df55a=a0_0x397951;let _0x249a1d=_0x5f3ed9[_0x5df55a(0x4dc)](':');if(_0x249a1d['length']!==0x4)throw new Error('Formato\x20inválido\x20de\x20proxy');return{'host':_0x249a1d[0x0],'port':_0x249a1d[0x1],'username':_0x249a1d[0x2],'password':_0x249a1d[0x3],'protocol':_0x5df55a(0x51e)};}async[a0_0x397951(0x3dc)](_0x45f211,_0x30c8de=!0x0){const _0x8e9819=a0_0x397951;try{let _0x981e58={},_0x24d589=0x0;if(Sr&&_0x30c8de){let _0x2d8d07;try{let _0x179664=(await this[_0x8e9819(0x436)]['auth'][_0x8e9819(0x317)](this[_0x8e9819(0x1df)]))['proxy'];for(_0x179664&&(_0x2d8d07=this[_0x8e9819(0x194)](_0x179664)),_0x179664&&ws(_0x2d8d07)&&(_0x981e58=await this[_0x8e9819(0x66e)](_0x2d8d07),_0x981e58&&_0x24d589++);!_0x981e58&&_0x24d589<0x3;){let _0x4b8136=dr();if(_0x4b8136){if(_0x2d8d07=this[_0x8e9819(0x194)](_0x4b8136['host']+':'+_0x4b8136['port']+':'+_0x4b8136['username']+':'+_0x4b8136[_0x8e9819(0x788)]),ws(_0x2d8d07)){if(_0x981e58=await this[_0x8e9819(0x66e)](_0x2d8d07),_0x981e58)break;}else this[_0x8e9819(0x731)]['error'](_0x8e9819(0x5f8));}_0x24d589++;}}catch(_0x1ad27f){this[_0x8e9819(0x731)][_0x8e9819(0x6aa)](_0x8e9819(0x4a7)+_0x1ad27f),_0x981e58={};}!_0x981e58&&_0x24d589>=0x3&&(this['logger'][_0x8e9819(0x659)]('Nenhum\x20proxy\x20funcional\x20encontrado\x20após\x203\x20tentativas.\x20Prosseguindo\x20sem\x20proxy.'),_0x981e58={});}this[_0x8e9819(0x3e7)](),this['instance'][_0x8e9819(0x1be)]=await this[_0x8e9819(0x4c5)]();let {version:_0x2b7ed5}=await(0x0,y[_0x8e9819(0x5dc)])(),_0x4e1f9e=[Cs,br,(0x0,bs['release'])()];console[_0x8e9819(0x1aa)](_0x8e9819(0x2b9)),console['log'](_0x981e58);let _0x3999d2={..._0x981e58,'auth':{'creds':this['instance'][_0x8e9819(0x1be)][_0x8e9819(0x6f1)][_0x8e9819(0x3c0)],'keys':(0x0,y[_0x8e9819(0x57f)])(this[_0x8e9819(0x5ba)][_0x8e9819(0x1be)]['state'][_0x8e9819(0x4cc)],(0x0,At['default'])({'level':'error'}))},'logger':(0x0,At[_0x8e9819(0x349)])({'level':_0x8e9819(0x6aa)}),'printQRInTerminal':!0x1,'browser':_0x45f211?[_0x8e9819(0x4f3),Cs,(0x0,bs['release'])()]:_0x4e1f9e,'version':_0x2b7ed5,'retryRequestDelayMs':0xfa,'connectTimeoutMs':0xea60,'qrTimeout':0x9c40,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'msgRetryCounterCache':this['msgRetryCounterCache'],'getMessage':async _0x14685a=>await this[_0x8e9819(0x685)](_0x14685a),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this['userDevicesCache'],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending':_0x580ad5=>(_0x580ad5[_0x8e9819(0x1d9)]?.[_0x8e9819(0x2cd)]==y[_0x8e9819(0x684)][_0x8e9819(0x729)][_0x8e9819(0x411)]['ListType']['PRODUCT_LIST']&&(_0x580ad5=JSON[_0x8e9819(0x497)](JSON[_0x8e9819(0x38d)](_0x580ad5)),_0x580ad5['listMessage']['listType']=y['proto']['Message'][_0x8e9819(0x411)]['ListType'][_0x8e9819(0x1a0)]),_0x580ad5)};return this[_0x8e9819(0x73e)]=!0x1,this[_0x8e9819(0x577)]=(0x0,y[_0x8e9819(0x349)])(_0x3999d2),this[_0x8e9819(0x48b)](),this[_0x8e9819(0x517)]=_0x45f211,this[_0x8e9819(0x577)];}catch(_0x50895e){throw this['logger'][_0x8e9819(0x6aa)](this[_0x8e9819(0x1df)]+'\x20('+this['instance']['wuid']+_0x8e9819(0x43c)+(_0x50895e instanceof Error?_0x50895e['message']:JSON[_0x8e9819(0x38d)](_0x50895e,null,0x2))),new O(_0x50895e?.[_0x8e9819(0x622)]());}}[a0_0x397951(0x48b)](){const _0x1ca730=a0_0x397951;this[_0x1ca730(0x577)]['ev'][_0x1ca730(0x314)](_0x15a9e5=>{const _0x4039bd=_0x1ca730;if(!this[_0x4039bd(0x73e)]){let _0x2edbef=this[_0x4039bd(0x4d2)][_0x4039bd(0x624)](_0x4039bd(0x604));if(_0x15a9e5[_0x4039bd(0x360)]){let _0x466bf5=_0x15a9e5[_0x4039bd(0x360)];this['messageHandle'][_0x4039bd(0x360)](_0x466bf5);}if(_0x15a9e5[_0x4039bd(0x6ed)]){let _0x3b134f=_0x15a9e5[_0x4039bd(0x6ed)];this[_0x4039bd(0x6db)][_0x4039bd(0x6ed)](_0x3b134f);}if(_0x15a9e5[_0x4039bd(0x689)]&&this[_0x4039bd(0x53a)](_0x15a9e5[_0x4039bd(0x689)]),_0x15a9e5[_0x4039bd(0x5dd)]&&this[_0x4039bd(0x5ba)][_0x4039bd(0x1be)][_0x4039bd(0x2d5)](),_0x15a9e5[_0x4039bd(0x74a)]){let _0x1769c6=_0x15a9e5['messaging-history.set'];this[_0x4039bd(0x6db)][_0x4039bd(0x74a)](_0x1769c6,_0x2edbef);}if(_0x15a9e5[_0x4039bd(0x420)]){let _0x4e9489=_0x15a9e5['messages.upsert'];this[_0x4039bd(0x6db)][_0x4039bd(0x420)](_0x4e9489,_0x2edbef);}if(_0x15a9e5[_0x4039bd(0x5d2)]){let _0x20a43a=_0x15a9e5['messages.update'];_0x20a43a[_0x4039bd(0x334)](_0x2bbebd=>{const _0x361d91=_0x4039bd;if(gr[_0x2bbebd[_0x361d91(0x226)]['id']]){this[_0x361d91(0x577)]['ev'][_0x361d91(0x50c)]('messages.upsert',{'messages':[_0x2bbebd],'type':'notify'}),delete gr[_0x2bbebd[_0x361d91(0x226)]['id']];return;}}),this['messageHandle'][_0x4039bd(0x5d2)](_0x20a43a,_0x2edbef);}if(_0x15a9e5[_0x4039bd(0x2ef)]){let _0xe2a4d8=_0x15a9e5[_0x4039bd(0x2ef)];if(this[_0x4039bd(0x513)]?.[_0x4039bd(0x5db)]&&_0xe2a4d8['id'][_0x4039bd(0x2fb)](_0x4039bd(0x277)))return;this[_0x4039bd(0x590)]('presence.update',_0xe2a4d8);}if(!this[_0x4039bd(0x513)]?.['groups_ignore']){if(_0x15a9e5[_0x4039bd(0x742)]){let _0x3d2b5e=_0x15a9e5[_0x4039bd(0x742)];this[_0x4039bd(0x719)]['groups.upsert'](_0x3d2b5e);}if(_0x15a9e5[_0x4039bd(0x618)]){let _0x51d950=_0x15a9e5[_0x4039bd(0x618)];this[_0x4039bd(0x719)][_0x4039bd(0x618)](_0x51d950);}if(_0x15a9e5[_0x4039bd(0x5fd)]){let _0x4571df=_0x15a9e5[_0x4039bd(0x5fd)];this[_0x4039bd(0x719)]['group-participants.update'](_0x4571df);}}if(_0x15a9e5['chats.upsert']){let _0x30d711=_0x15a9e5['chats.upsert'];this[_0x4039bd(0x375)][_0x4039bd(0x211)](_0x30d711,_0x2edbef);}if(_0x15a9e5[_0x4039bd(0x63e)]){let _0x26422d=_0x15a9e5['chats.update'];this[_0x4039bd(0x375)][_0x4039bd(0x63e)](_0x26422d,_0x2edbef);}if(_0x15a9e5[_0x4039bd(0x220)]){let _0x117f56=_0x15a9e5[_0x4039bd(0x220)];this[_0x4039bd(0x375)][_0x4039bd(0x220)](_0x117f56);}if(_0x15a9e5[_0x4039bd(0x34d)]){let _0x1088d7=_0x15a9e5[_0x4039bd(0x34d)];this[_0x4039bd(0x5d1)]['contacts.upsert'](_0x1088d7,_0x2edbef);}if(_0x15a9e5[_0x4039bd(0x78d)]){let _0x37f27c=_0x15a9e5[_0x4039bd(0x78d)];this['contactHandle']['contacts.update'](_0x37f27c,_0x2edbef);}}});}[a0_0x397951(0x680)](_0x4fce6f){const _0x50c076=a0_0x397951;let _0x366c9a=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x50c076(0x252)](_0x4fce6f);if(_0x366c9a&&_0x366c9a[0x1]==='55'){let _0x36a1df=_0x366c9a[0x2],_0x29c97d=_0x366c9a[0x3],_0x366f4e=_0x366c9a[0x4];if(_0x36a1df>='31'&&_0x29c97d==='9')return _0x366c9a[0x1]+_0x36a1df+_0x366f4e;}return _0x4fce6f;}[a0_0x397951(0x79b)](_0x278a45){const _0x533b5b=a0_0x397951;return _0x278a45[_0x533b5b(0x2fb)](_0x533b5b(0x277))||_0x278a45['includes'](_0x533b5b(0x6e7))||_0x278a45[_0x533b5b(0x2fb)]('@broadcast')?_0x278a45:(_0x278a45=_0x278a45?.['replace'](/\s/g,'')[_0x533b5b(0x4cf)](/\+/g,'')[_0x533b5b(0x4cf)](/\(/g,'')[_0x533b5b(0x4cf)](/\)/g,'')['split'](/\:/)[0x0][_0x533b5b(0x4dc)]('@')[0x0],_0x278a45[_0x533b5b(0x4c6)]>=0x12?(_0x278a45=_0x278a45[_0x533b5b(0x4cf)](/[^\d-]/g,''),_0x278a45+_0x533b5b(0x277)):(_0x278a45=_0x278a45[_0x533b5b(0x4cf)](/\D/g,''),this[_0x533b5b(0x680)](_0x278a45)+_0x533b5b(0x6e7)));}async[a0_0x397951(0x46a)](_0x345750){const _0x2851ed=a0_0x397951;let _0x165cce=this[_0x2851ed(0x79b)](_0x345750['number']),_0x1ce57d=(await this[_0x2851ed(0x260)]({'numbers':[_0x165cce]}))[0x0];if(!_0x1ce57d['exists']&&!(0x0,y[_0x2851ed(0x76e)])(_0x1ce57d[_0x2851ed(0x2f4)]))throw new m(_0x1ce57d);let _0x2895f7=(0x0,y[_0x2851ed(0x76e)])(_0x165cce)?_0x165cce:_0x1ce57d[_0x2851ed(0x2f4)];if((0x0,y[_0x2851ed(0x76e)])(_0x2895f7))try{await this[_0x2851ed(0x577)][_0x2851ed(0x432)](_0x2895f7);}catch{throw new L(_0x2851ed(0x265));}try{return await this[_0x2851ed(0x577)]['presenceSubscribe'](_0x2895f7),await this['client'][_0x2851ed(0x5d3)](_0x345750[_0x2851ed(0x569)],_0x165cce),{'status':0xc8,'presence':_0x345750[_0x2851ed(0x569)]};}catch(_0x5f0042){throw new m(_0x5f0042['toString']());}}async['profilePicture'](_0x127085){const _0x224d5d=a0_0x397951;let _0x735f98=this[_0x224d5d(0x79b)](_0x127085);try{return{'wuid':_0x735f98,'profilePictureUrl':await this[_0x224d5d(0x577)][_0x224d5d(0x765)](_0x735f98,'image')};}catch{return{'wuid':_0x735f98,'profilePictureUrl':null};}}async[a0_0x397951(0x797)](_0x28db77,_0x13faa1,_0x4ca1e1){const _0x48fb02=a0_0x397951;_0x4ca1e1||(_0x4ca1e1={});let _0x39577b=(await this[_0x48fb02(0x260)]({'numbers':[_0x28db77]}))[0x0];if(!_0x39577b[_0x48fb02(0x562)]&&!(0x0,y[_0x48fb02(0x76e)])(_0x39577b['jid'])&&!_0x39577b[_0x48fb02(0x2f4)][_0x48fb02(0x2fb)](_0x48fb02(0x64e)))throw new m(_0x39577b);let _0x72b409=_0x39577b[_0x48fb02(0x2f4)];try{_0x4ca1e1?.[_0x48fb02(0x561)]&&(await this[_0x48fb02(0x577)][_0x48fb02(0x3cf)](_0x72b409),await this[_0x48fb02(0x577)][_0x48fb02(0x5d3)](_0x4ca1e1?.[_0x48fb02(0x569)]??'composing',_0x72b409),await(0x0,y[_0x48fb02(0x561)])(_0x4ca1e1[_0x48fb02(0x561)]),await this['client'][_0x48fb02(0x5d3)](_0x48fb02(0x221),_0x72b409));let _0x584b8d=_0x4ca1e1?.[_0x48fb02(0x5fa)]!=!0x1?void 0x0:!0x1,_0x6745bd;if(_0x4ca1e1?.[_0x48fb02(0x55e)]){let _0x8707f7=_0x4ca1e1?.['quoted'],_0x2bb8d6=_0x8707f7?.[_0x48fb02(0x15c)]?_0x8707f7:await this[_0x48fb02(0x685)](_0x8707f7[_0x48fb02(0x226)],!0x0);if(!_0x2bb8d6)throw'Message\x20not\x20found';_0x6745bd=_0x2bb8d6;}let _0x3e182c;if((0x0,y[_0x48fb02(0x76e)])(_0x72b409))try{let _0x1e5c38=await this[_0x48fb02(0x577)][_0x48fb02(0x432)](_0x72b409);if(!_0x1e5c38)throw new L(_0x48fb02(0x265));_0x4ca1e1?.[_0x48fb02(0x6a3)]&&(_0x4ca1e1[_0x48fb02(0x6a3)]?.[_0x48fb02(0x62d)]?_0x3e182c=_0x1e5c38[_0x48fb02(0x54d)]['map'](_0x43ea6c=>_0x43ea6c['id']):_0x4ca1e1['mentions']?.[_0x48fb02(0x77a)]?.[_0x48fb02(0x4c6)]&&(_0x3e182c=_0x4ca1e1['mentions'][_0x48fb02(0x77a)][_0x48fb02(0x530)](_0x398139=>{const _0x217736=_0x48fb02;let _0x2d532f=this[_0x217736(0x79b)](_0x398139);return(0x0,y[_0x217736(0x76e)])(_0x2d532f)?null:_0x2d532f;})));}catch{throw new L('Group\x20not\x20found');}let _0x4287d6=await((async()=>{const _0x336619=_0x48fb02;let _0x498e91={'quoted':_0x6745bd};if(!_0x13faa1[_0x336619(0x464)]&&!_0x13faa1[_0x336619(0x22e)]&&!_0x13faa1[_0x336619(0x5aa)]&&!_0x13faa1['conversation']&&_0x72b409!==_0x336619(0x389)&&!_0x13faa1[_0x336619(0x464)])return await this[_0x336619(0x577)][_0x336619(0x30e)](_0x72b409,{'forward':{'key':{'remoteJid':this[_0x336619(0x5ba)][_0x336619(0x341)],'fromMe':!0x0},'message':_0x13faa1},'mentions':_0x3e182c},_0x498e91);if(_0x13faa1[_0x336619(0x6b4)]){let _0x62d90a=_0x13faa1[_0x336619(0x6b4)];return _0x4ca1e1?.[_0x336619(0x23f)]&&(_0x62d90a=await this[_0x336619(0x319)](_0x62d90a,_0x72b409)),await this[_0x336619(0x577)][_0x336619(0x30e)](_0x72b409,{'text':_0x62d90a,'mentions':_0x3e182c,'linkPreview':_0x584b8d},_0x498e91);}return _0x72b409===_0x336619(0x389)?await this[_0x336619(0x577)][_0x336619(0x30e)](_0x72b409,_0x13faa1[_0x336619(0x51c)][_0x336619(0x1f7)],{'backgroundColor':_0x13faa1[_0x336619(0x51c)][_0x336619(0x49f)][_0x336619(0x412)],'font':_0x13faa1[_0x336619(0x51c)]['option'][_0x336619(0x51b)],'statusJidList':_0x13faa1[_0x336619(0x51c)][_0x336619(0x49f)][_0x336619(0x335)]}):await this[_0x336619(0x577)][_0x336619(0x30e)](_0x72b409,_0x13faa1,_0x498e91);})()),{message_normalized:_0x3df954}=this[_0x48fb02(0x25d)](_0x4287d6['message'],_(_0x4287d6[_0x48fb02(0x15c)]),null),_0x29c8b3={'_id':_0x4287d6['key']['id'],'key':_0x4287d6[_0x48fb02(0x226)],'pushName':_0x4287d6[_0x48fb02(0x4c0)],'message':{..._0x4287d6['message']},'messageType':_(_0x4287d6[_0x48fb02(0x15c)]),'message_normalized':{'key':_0x4287d6[_0x48fb02(0x226)],'pushName':_0x4287d6[_0x48fb02(0x4c0)],'messageTimestamp':_0x4287d6['messageTimestamp']&&_0x4287d6[_0x48fb02(0x300)]['toString']()[_0x48fb02(0x4c6)]<0xd?_0x4287d6[_0x48fb02(0x300)]*0x3e8:_0x4287d6[_0x48fb02(0x300)]||null,'source':(0x0,y[_0x48fb02(0x2a3)])(_0x4287d6[_0x48fb02(0x226)]['id']),..._0x3df954},'messageTimestamp':_0x4287d6[_0x48fb02(0x300)]&&_0x4287d6[_0x48fb02(0x300)][_0x48fb02(0x622)]()['length']<0xd?_0x4287d6[_0x48fb02(0x300)]*0x3e8:_0x4287d6[_0x48fb02(0x300)]||null,'owner':this['instance'][_0x48fb02(0x341)],'source':(0x0,y[_0x48fb02(0x2a3)])(_0x4287d6['key']['id'])};return this['logger'][_0x48fb02(0x1aa)](_0x29c8b3),this['sendDataWebhook']('send.message',_0x29c8b3),q(this['instanceName'],_0x48fb02(0x679),{'message':_0x29c8b3}),this[_0x48fb02(0x6c6)](this['configService'][_0x48fb02(0x624)]('DATABASE'),_0x29c8b3,_0x48fb02(0x610)),await this['repository'][_0x48fb02(0x15c)][_0x48fb02(0x1f0)]([_0x29c8b3],this[_0x48fb02(0x5ba)][_0x48fb02(0x341)]),_0x4287d6;}catch(_0x18507e){throw this[_0x48fb02(0x731)][_0x48fb02(0x6aa)](this['instanceName']+'\x20('+this[_0x48fb02(0x5ba)][_0x48fb02(0x341)]+'):\x20'+_0x18507e[_0x48fb02(0x622)]()),new m(_0x18507e[_0x48fb02(0x622)]());}}get[a0_0x397951(0x782)](){const _0x57cf1d=a0_0x397951;return this[_0x57cf1d(0x2bf)];}async[a0_0x397951(0x6b8)](_0x3a4ac1){const _0x981086=a0_0x397951;let _0xbd8b97=pr,_0x485219=He;return _0x485219&&this['instanceName']['toLowerCase']()[_0x981086(0x2fb)](_0x485219['toLowerCase']())&&(_0x3a4ac1['textMessage'][_0x981086(0x4cd)]+='\x0a\x0a'+_0xbd8b97),await this[_0x981086(0x797)](_0x3a4ac1[_0x981086(0x5e3)],{'conversation':_0x3a4ac1[_0x981086(0x6b8)][_0x981086(0x4cd)]},_0x3a4ac1?.[_0x981086(0x2b9)]);}async[a0_0x397951(0x25a)](_0x54400c){const _0x53ac57=a0_0x397951;if(!_0x54400c[_0x53ac57(0x52f)])throw new m(_0x53ac57(0x3a0));if(!_0x54400c['content'])throw new m(_0x53ac57(0x2ec));if(_0x54400c[_0x53ac57(0x6d5)]){let _0x4d1577=await this[_0x53ac57(0x436)][_0x53ac57(0x37e)][_0x53ac57(0x317)]({'where':{}},this[_0x53ac57(0x5ba)][_0x53ac57(0x341)]);if(!_0x4d1577['length'])throw new m('Contacts\x20not\x20found');_0x54400c[_0x53ac57(0x335)]=_0x4d1577[_0x53ac57(0x6ac)](_0x145ae8=>_0x145ae8[_0x53ac57(0x4c0)])['map'](_0x1b63f7=>_0x1b63f7[_0x53ac57(0x578)]);}if(!_0x54400c['statusJidList']?.['length']&&!_0x54400c['allContacts'])throw new m('StatusJidList\x20is\x20required');if(_0x54400c[_0x53ac57(0x52f)]===_0x53ac57(0x4cd)){if(!_0x54400c[_0x53ac57(0x412)])throw new m(_0x53ac57(0x795));if(!_0x54400c[_0x53ac57(0x51b)])throw new m(_0x53ac57(0x521));return{'content':{'text':_0x54400c[_0x53ac57(0x1f7)]},'option':{'backgroundColor':_0x54400c[_0x53ac57(0x412)],'font':_0x54400c[_0x53ac57(0x51b)],'statusJidList':_0x54400c[_0x53ac57(0x335)]}};}if(_0x54400c[_0x53ac57(0x52f)]===_0x53ac57(0x42f))return{'content':{'image':{'url':_0x54400c['content']},'caption':_0x54400c[_0x53ac57(0x643)]},'option':{'statusJidList':_0x54400c[_0x53ac57(0x335)]}};if(_0x54400c['type']===_0x53ac57(0x275))return{'content':{'video':{'url':_0x54400c['content']},'caption':_0x54400c['caption']},'option':{'statusJidList':_0x54400c[_0x53ac57(0x335)]}};if(_0x54400c['type']==='audio'){this[_0x53ac57(0x731)]['verbose'](_0x53ac57(0x66c)),this[_0x53ac57(0x731)][_0x53ac57(0x545)](_0x53ac57(0x5f9));let _0x9bb453=await this['convertaudio'](_0x54400c[_0x53ac57(0x1f7)]);if(typeof _0x9bb453==_0x53ac57(0x22b)){this[_0x53ac57(0x731)][_0x53ac57(0x545)](_0x53ac57(0x695));let _0x2c0328=k['readFileSync'](_0x9bb453)[_0x53ac57(0x622)](_0x53ac57(0x75d)),_0x196229={'content':{'audio':Buffer[_0x53ac57(0x430)](_0x2c0328,_0x53ac57(0x75d)),'ptt':!0x0,'mimetype':_0x53ac57(0x2f5)},'option':{'statusJidList':_0x54400c[_0x53ac57(0x335)]}};return k[_0x53ac57(0x150)](_0x9bb453),_0x196229;}else throw new O(_0x9bb453);}throw new m(_0x53ac57(0x55f));}async[a0_0x397951(0x381)](_0x10bc51){const _0x4f29a2=a0_0x397951;return await this[_0x4f29a2(0x797)](_0x4f29a2(0x389),{'status':await this['formatStatusMessage'](_0x10bc51[_0x4f29a2(0x381)])});}async[a0_0x397951(0x77c)](_0x32529e){const _0x2c2c42=a0_0x397951;try{let _0x387c29=await(0x0,y[_0x2c2c42(0x4ce)])({[_0x32529e[_0x2c2c42(0x259)]]:(0x0,$['isURL'])(_0x32529e[_0x2c2c42(0x6d9)])?{'url':_0x32529e[_0x2c2c42(0x6d9)]}:Buffer['from'](_0x32529e[_0x2c2c42(0x6d9)],_0x2c2c42(0x75d))},{'upload':this[_0x2c2c42(0x577)][_0x2c2c42(0x3e3)]}),_0x2f931e=_0x32529e[_0x2c2c42(0x259)]+'Message';if(_0x32529e[_0x2c2c42(0x259)]===_0x2c2c42(0x5be)&&!_0x32529e['fileName']){let _0x55e328=new RegExp(/.*\/(.+?)\./)['exec'](_0x32529e[_0x2c2c42(0x6d9)]);_0x32529e[_0x2c2c42(0x20e)]=_0x55e328?_0x55e328[0x1]:null;}let _0x5cb8f1=(0x0,$['isURL'])(_0x32529e[_0x2c2c42(0x6d9)])?_0x32529e[_0x2c2c42(0x6d9)][_0x2c2c42(0x4dc)]('?')[0x0]:_0x32529e[_0x2c2c42(0x6d9)];this['logger']['verbose']('URL\x20limpa:\x20'+_0x5cb8f1);let _0x2636a7;(0x0,$[_0x2c2c42(0x3e4)])(_0x32529e['media'])?_0x2636a7=(0x0,Ot[_0x2c2c42(0x37d)])(_0x5cb8f1):_0x32529e[_0x2c2c42(0x20e)]&&_0x32529e[_0x2c2c42(0x20e)]['includes']('.')?_0x2636a7=(0x0,Ot[_0x2c2c42(0x37d)])(_0x32529e['fileName']):_0x2636a7=(0x0,Ot[_0x2c2c42(0x37d)])(_0x32529e[_0x2c2c42(0x6d9)]);let _0x516d0d=pr,_0x71dacd=He;return _0x71dacd&&this[_0x2c2c42(0x1df)][_0x2c2c42(0x4b5)]()['includes'](_0x71dacd[_0x2c2c42(0x4b5)]())&&(_0x32529e[_0x2c2c42(0x643)]+='\x0a\x0a'+_0x516d0d),_0x387c29[_0x2f931e][_0x2c2c42(0x643)]=_0x32529e?.['caption'],_0x387c29[_0x2f931e][_0x2c2c42(0x668)]=_0x2636a7,_0x387c29[_0x2f931e]['fileName']=_0x32529e[_0x2c2c42(0x20e)],_0x32529e[_0x2c2c42(0x259)]===_0x2c2c42(0x275)&&(_0x387c29[_0x2f931e][_0x2c2c42(0x587)]=Uint8Array['from']((0x0,Me[_0x2c2c42(0x67b)])((0x0,F[_0x2c2c42(0x60e)])(process[_0x2c2c42(0x321)](),_0x2c2c42(0x18b)))),_0x387c29[_0x2f931e][_0x2c2c42(0x29f)]=!0x1),(0x0,y[_0x2c2c42(0x657)])('',{[_0x2f931e]:{..._0x387c29[_0x2f931e]}},{'userJid':this[_0x2c2c42(0x5ba)][_0x2c2c42(0x341)]});}catch(_0x2bea36){throw this[_0x2c2c42(0x731)]['error'](this['instanceName']+'\x20('+this[_0x2c2c42(0x5ba)][_0x2c2c42(0x341)]+_0x2c2c42(0x43c)+(_0x2bea36 instanceof Error?_0x2bea36[_0x2c2c42(0x15c)]:JSON[_0x2c2c42(0x38d)](_0x2bea36,null,0x2))),new O(_0x2bea36?.[_0x2c2c42(0x622)]()||_0x2bea36);}}async['mediaMessage'](_0x54199b){const _0x33dc59=a0_0x397951;let _0xd79124=await this[_0x33dc59(0x77c)](_0x54199b[_0x33dc59(0x3f1)]);return await this[_0x33dc59(0x797)](_0x54199b[_0x33dc59(0x5e3)],{..._0xd79124[_0x33dc59(0x15c)]},_0x54199b?.[_0x33dc59(0x2b9)]);}async[a0_0x397951(0x2ea)](_0x48865a,_0x2c5cca){const _0x491271=a0_0x397951;try{this[_0x491271(0x731)]['verbose'](_0x491271(0x697));let _0x26ca5a,_0x410dcc=_0x2c5cca+'-'+new Date()[_0x491271(0x4d1)]();this[_0x491271(0x731)]['verbose']('Hash\x20to\x20image\x20name:\x20'+_0x410dcc);let _0x5d5148=''+(0x0,F['join'])(this['storePath'],_0x410dcc+_0x491271(0x607));if(this['logger'][_0x491271(0x545)](_0x491271(0x771)+_0x5d5148),(0x0,$[_0x491271(0x26b)])(_0x48865a)){this['logger'][_0x491271(0x545)](_0x491271(0x2d9));let _0x454ccb=_0x48865a[_0x491271(0x4cf)](/^data:image\/(jpeg|png|gif);base64,/,''),_0xf8083b=Buffer[_0x491271(0x430)](_0x454ccb,_0x491271(0x75d));_0x26ca5a=''+(0x0,F[_0x491271(0x60e)])(this[_0x491271(0x25c)],_0x491271(0x5a2)+_0x410dcc+_0x491271(0x741)),this[_0x491271(0x731)]['verbose']('Image\x20path:\x20'+_0x26ca5a),await(0x0,It['default'])(_0xf8083b)[_0x491271(0x652)](_0x26ca5a),this[_0x491271(0x731)][_0x491271(0x545)](_0x491271(0x4f1));}else{this['logger'][_0x491271(0x545)]('Image\x20is\x20url');let _0x14da5d=new Date()[_0x491271(0x4d1)](),_0x5ea962=_0x48865a+_0x491271(0x291)+_0x14da5d;this[_0x491271(0x731)][_0x491271(0x545)](_0x491271(0x479)+_0x5ea962);let _0x307029=await se[_0x491271(0x349)][_0x491271(0x624)](_0x5ea962,{'responseType':_0x491271(0x4be)});this[_0x491271(0x731)][_0x491271(0x545)]('Getting\x20image\x20from\x20url');let _0x112d20=Buffer[_0x491271(0x430)](_0x307029[_0x491271(0x2cf)],_0x491271(0x399));_0x26ca5a=''+(0x0,F[_0x491271(0x60e)])(this[_0x491271(0x25c)],_0x491271(0x5a2)+_0x410dcc+_0x491271(0x741)),this[_0x491271(0x731)][_0x491271(0x545)]('Image\x20path:\x20'+_0x26ca5a),await(0x0,It[_0x491271(0x349)])(_0x112d20)[_0x491271(0x652)](_0x26ca5a),this[_0x491271(0x731)][_0x491271(0x545)](_0x491271(0x4f1));}return await(0x0,It['default'])(_0x26ca5a)[_0x491271(0x2c8)]()[_0x491271(0x652)](_0x5d5148),this[_0x491271(0x731)][_0x491271(0x545)](_0x491271(0x76c)),k[_0x491271(0x150)](_0x26ca5a),this['logger'][_0x491271(0x545)]('Temp\x20image\x20deleted'),_0x5d5148;}catch(_0x2c4d2d){console['error'](_0x491271(0x18d),_0x2c4d2d instanceof Error?_0x2c4d2d[_0x491271(0x15c)]:JSON['stringify'](_0x2c4d2d,null,0x2));}}async['mediaSticker'](_0x188de1){const _0x504d34=a0_0x397951;let _0x42230a=await this[_0x504d34(0x2ea)](_0x188de1['stickerMessage']['image'],_0x188de1['number']),_0x51ad20=await this[_0x504d34(0x797)](_0x188de1[_0x504d34(0x5e3)],{'sticker':{'url':_0x42230a}},_0x188de1?.[_0x504d34(0x2b9)]);return k[_0x504d34(0x150)](_0x42230a),this['logger'][_0x504d34(0x545)]('Converted\x20image\x20deleted'),_0x51ad20;}async[a0_0x397951(0x70f)](_0x1a3641){const _0x52eb72=a0_0x397951;if(this[_0x52eb72(0x731)][_0x52eb72(0x545)](_0x52eb72(0x3bf)),!_0x1a3641['options']?.[_0x52eb72(0x487)]&&_0x1a3641[_0x52eb72(0x2b9)]?.[_0x52eb72(0x487)]!==!0x1&&(_0x1a3641[_0x52eb72(0x2b9)][_0x52eb72(0x487)]=!0x0),_0x1a3641['options']?.[_0x52eb72(0x487)]){let _0x18e5de=await this['convertaudio'](_0x1a3641['audioMessage'][_0x52eb72(0x464)]);if(typeof _0x18e5de=='string'){let _0x39e313=k['readFileSync'](_0x18e5de)[_0x52eb72(0x622)]('base64'),_0x238050=this[_0x52eb72(0x797)](_0x1a3641[_0x52eb72(0x5e3)],{'audio':Buffer[_0x52eb72(0x430)](_0x39e313,'base64'),'ptt':!0x0,'mimetype':_0x52eb72(0x2f5)},{'presence':'recording','delay':_0x1a3641?.['options']?.['delay']});return k[_0x52eb72(0x150)](_0x18e5de),this[_0x52eb72(0x731)][_0x52eb72(0x545)]('Converted\x20audio\x20deleted'),_0x238050;}else throw new O(_0x18e5de);}return await this[_0x52eb72(0x797)](_0x1a3641[_0x52eb72(0x5e3)],{'audio':(0x0,$[_0x52eb72(0x3e4)])(_0x1a3641[_0x52eb72(0x478)][_0x52eb72(0x464)])?{'url':_0x1a3641[_0x52eb72(0x478)][_0x52eb72(0x464)]}:Buffer['from'](_0x1a3641[_0x52eb72(0x478)][_0x52eb72(0x464)],'base64'),'ptt':!0x0,'mimetype':_0x52eb72(0x3a6)},{'presence':_0x52eb72(0x786),'delay':_0x1a3641?.[_0x52eb72(0x2b9)]?.[_0x52eb72(0x561)]});}async['convertaudio'](_0xdcfef5){const _0x21e1d8=a0_0x397951;this[_0x21e1d8(0x731)]['verbose'](_0x21e1d8(0x5f9));let _0x4b8293,_0x2332a0,_0x439122=(0x0,Ce['v4'])();if(this[_0x21e1d8(0x731)][_0x21e1d8(0x545)](_0x21e1d8(0x78a)+_0x439122),(0x0,$[_0x21e1d8(0x3e4)])(_0xdcfef5)){this[_0x21e1d8(0x731)]['verbose'](_0x21e1d8(0x2b1)),_0x2332a0=''+(0x0,F['join'])(this[_0x21e1d8(0x25c)],_0x439122+'.mp4'),_0x4b8293=''+(0x0,F[_0x21e1d8(0x60e)])(this['storePath'],_0x21e1d8(0x5a2)+_0x439122+_0x21e1d8(0x1c6)),this['logger']['verbose'](_0x21e1d8(0x1a9)+_0x2332a0),this[_0x21e1d8(0x731)][_0x21e1d8(0x545)](_0x21e1d8(0x505)+_0x4b8293);let _0x10ca91=new Date()['getTime'](),_0x41375d=_0xdcfef5+_0x21e1d8(0x291)+_0x10ca91;this['logger'][_0x21e1d8(0x545)](_0x21e1d8(0x26e)+_0x41375d);let _0x99f6e1=await se['default'][_0x21e1d8(0x624)](_0x41375d,{'responseType':_0x21e1d8(0x4be)});this['logger'][_0x21e1d8(0x545)]('Getting\x20audio\x20from\x20url'),k[_0x21e1d8(0x5f3)](_0x4b8293,_0x99f6e1['data']);}else{this[_0x21e1d8(0x731)][_0x21e1d8(0x545)](_0x21e1d8(0x457)),_0x2332a0=''+(0x0,F[_0x21e1d8(0x60e)])(this[_0x21e1d8(0x25c)],_0x439122+_0x21e1d8(0x340)),_0x4b8293=''+(0x0,F[_0x21e1d8(0x60e)])(this[_0x21e1d8(0x25c)],_0x21e1d8(0x5a2)+_0x439122+_0x21e1d8(0x1c6)),this[_0x21e1d8(0x731)][_0x21e1d8(0x545)](_0x21e1d8(0x1a9)+_0x2332a0),this[_0x21e1d8(0x731)]['verbose'](_0x21e1d8(0x505)+_0x4b8293);let _0x29533d=Buffer[_0x21e1d8(0x430)](_0xdcfef5,_0x21e1d8(0x75d));k[_0x21e1d8(0x5f3)](_0x4b8293,_0x29533d),this[_0x21e1d8(0x731)][_0x21e1d8(0x545)](_0x21e1d8(0x1d1));}return this[_0x21e1d8(0x731)]['verbose']('Converting\x20audio\x20to\x20mp4'),new Promise((_0x16263c,_0x328e9e)=>{const _0x347e1f=_0x21e1d8;(0x0,Dt[_0x347e1f(0x252)])(mr[_0x347e1f(0x349)][_0x347e1f(0x267)]+_0x347e1f(0x44f)+_0x4b8293+_0x347e1f(0x448)+_0x2332a0+_0x347e1f(0x5fe),_0x49bb58=>{const _0x4abdc5=_0x347e1f;k[_0x4abdc5(0x150)](_0x4b8293),this[_0x4abdc5(0x731)]['verbose']('Temp\x20audio\x20deleted'),_0x49bb58&&_0x328e9e(_0x49bb58),this[_0x4abdc5(0x731)][_0x4abdc5(0x545)](_0x4abdc5(0x4aa)),_0x16263c(_0x2332a0);});});}async['buttonMessage'](_0x2a3513){const _0x25e3ab=a0_0x397951;let _0x1e92ee={},_0x43f03a=_0x25e3ab(0x511);if(_0x2a3513[_0x25e3ab(0x3c3)]?.[_0x25e3ab(0x3f1)]){_0x43f03a=_0x2a3513['buttonMessage'][_0x25e3ab(0x3f1)]?.[_0x25e3ab(0x259)][_0x25e3ab(0x647)]()??_0x25e3ab(0x511),_0x1e92ee['mediaKey']=_0x43f03a[_0x25e3ab(0x4b5)]()+'Message';let _0x568f70=await this['prepareMediaMessage'](_0x2a3513[_0x25e3ab(0x3c3)][_0x25e3ab(0x3f1)]);_0x1e92ee[_0x25e3ab(0x15c)]=_0x568f70[_0x25e3ab(0x15c)][_0x1e92ee[_0x25e3ab(0x6c8)]],_0x1e92ee[_0x25e3ab(0x54c)]='*'+_0x2a3513['buttonMessage']['title']+_0x25e3ab(0x5bf)+_0x2a3513[_0x25e3ab(0x3c3)]['description'];}let _0x5088a5={'text':_0x2a3513['buttonMessage'][_0x25e3ab(0x703)]['map'](_0x1e7794=>_0x1e7794['buttonText']),'ids':_0x2a3513[_0x25e3ab(0x3c3)]['buttons']['map'](_0x489b2a=>_0x489b2a['buttonId'])};if(!(0x0,$[_0x25e3ab(0x42a)])(_0x5088a5['text'])||!(0x0,$['arrayUnique'])(_0x5088a5[_0x25e3ab(0x4ae)]))throw new m('Button\x20texts\x20cannot\x20be\x20repeated','Button\x20IDs\x20cannot\x20be\x20repeated.');return await this['sendMessageWithTyping'](_0x2a3513[_0x25e3ab(0x5e3)],{'buttonsMessage':{'text':_0x1e92ee?.[_0x25e3ab(0x6c8)]?void 0x0:_0x2a3513[_0x25e3ab(0x3c3)][_0x25e3ab(0x693)],'contentText':_0x1e92ee?.[_0x25e3ab(0x54c)]??_0x2a3513[_0x25e3ab(0x3c3)][_0x25e3ab(0x299)],'footerText':_0x2a3513[_0x25e3ab(0x3c3)]?.[_0x25e3ab(0x59c)],'buttons':_0x2a3513[_0x25e3ab(0x3c3)][_0x25e3ab(0x703)][_0x25e3ab(0x530)](_0x42a093=>({'buttonText':{'displayText':_0x42a093[_0x25e3ab(0x48f)]},'buttonId':_0x42a093[_0x25e3ab(0x2f1)],'type':0x1})),'headerType':y[_0x25e3ab(0x684)][_0x25e3ab(0x729)][_0x25e3ab(0x6c4)][_0x25e3ab(0x3fe)][_0x43f03a],[_0x1e92ee?.[_0x25e3ab(0x6c8)]]:_0x1e92ee?.['message']}},_0x2a3513?.['options']);}async[a0_0x397951(0x27d)](_0x574c7a){const _0x50e32b=a0_0x397951;return await this['sendMessageWithTyping'](_0x574c7a[_0x50e32b(0x5e3)],{'locationMessage':{'degreesLatitude':_0x574c7a['locationMessage'][_0x50e32b(0x33c)],'degreesLongitude':_0x574c7a['locationMessage'][_0x50e32b(0x462)],'name':_0x574c7a['locationMessage']?.[_0x50e32b(0x346)],'address':_0x574c7a['locationMessage']?.[_0x50e32b(0x1a2)]}},_0x574c7a?.['options']);}async['contactMessage'](_0x503d87){const _0xb16bac=a0_0x397951;let _0x50a2aa={},_0x902f11=_0x44f870=>{const _0x525c65=a0_0x44db;let _0x536c70='BEGIN:VCARD\x0aVERSION:3.0\x0aN:'+_0x44f870[_0x525c65(0x2be)]+_0x525c65(0x5d5)+_0x44f870['fullName']+'\x0a';_0x44f870[_0x525c65(0x38b)]&&(_0x536c70+=_0x525c65(0x688)+_0x44f870[_0x525c65(0x38b)]+';\x0a'),_0x44f870['email']&&(_0x536c70+='EMAIL:'+_0x44f870[_0x525c65(0x617)]+'\x0a'),_0x44f870['url']&&(_0x536c70+=_0x525c65(0x623)+_0x44f870[_0x525c65(0x634)]+'\x0a');let _0x2878dc='';return _0x44f870[_0x525c65(0x517)]&&_0x44f870[_0x525c65(0x517)][_0x525c65(0x4dc)]('|')[_0x525c65(0x334)]((_0x3062a9,_0x22d39b)=>{const _0x482ad2=_0x525c65;let _0x1d036b=this[_0x482ad2(0x79b)](_0x3062a9)[_0x482ad2(0x4cf)](_0x482ad2(0x6e7),'');_0x2878dc+='item'+(_0x22d39b+0x1)+_0x482ad2(0x240)+_0x1d036b+':'+_0x3062a9+'\x0aitem'+(_0x22d39b+0x1)+_0x482ad2(0x16c);}),_0x536c70+=_0x2878dc+_0x525c65(0x4ed),_0x536c70;};return _0x503d87['contactMessage'][_0xb16bac(0x4c6)]===0x1?_0x50a2aa[_0xb16bac(0x522)]={'displayName':_0x503d87[_0xb16bac(0x522)][0x0][_0xb16bac(0x2be)],'vcard':_0x902f11(_0x503d87[_0xb16bac(0x522)][0x0])}:_0x50a2aa[_0xb16bac(0x47a)]={'displayName':_0x503d87['contactMessage'][_0xb16bac(0x4c6)]+_0xb16bac(0x2e2),'contacts':_0x503d87[_0xb16bac(0x522)][_0xb16bac(0x530)](_0x4b2663=>({'displayName':_0x4b2663[_0xb16bac(0x2be)],'vcard':_0x902f11(_0x4b2663)}))},await this[_0xb16bac(0x797)](_0x503d87['number'],{..._0x50a2aa},_0x503d87?.[_0xb16bac(0x2b9)]);}async['reactionMessage'](_0x4647a2){const _0x1ca90c=a0_0x397951;return await this[_0x1ca90c(0x797)](_0x4647a2[_0x1ca90c(0x707)][_0x1ca90c(0x226)][_0x1ca90c(0x686)],{'reactionMessage':{'key':_0x4647a2[_0x1ca90c(0x707)][_0x1ca90c(0x226)],'text':_0x4647a2[_0x1ca90c(0x707)][_0x1ca90c(0x37c)]}});}async['whatsappNumber'](_0x5972ea){const _0x24a79f=a0_0x397951;let _0x8f7b50=[];for await(let _0x3ac52b of _0x5972ea['numbers']){let _0x22e23d=this[_0x24a79f(0x79b)](_0x3ac52b),_0x2516b9=!0x1;try{if((0x0,y[_0x24a79f(0x76e)])(_0x22e23d)){let _0x42cb22=await this[_0x24a79f(0x186)]({'groupJid':_0x22e23d},_0x24a79f(0x33b));_0x8f7b50[_0x24a79f(0x367)](new ge(_0x42cb22['metadata']['id'],!!_0x42cb22?.[_0x24a79f(0x2c5)]['id'],_0x42cb22?.[_0x24a79f(0x2c5)][_0x24a79f(0x783)])),_0x2516b9=!!_0x42cb22?.[_0x24a79f(0x2c5)]['id'];}else{let _0x33cd1d=(await this[_0x24a79f(0x577)][_0x24a79f(0x2d6)](_0x22e23d))[0x0];_0x8f7b50[_0x24a79f(0x367)](new ge(_0x33cd1d['jid'],_0x33cd1d[_0x24a79f(0x562)])),_0x2516b9=_0x33cd1d[_0x24a79f(0x562)];}}catch{_0x8f7b50[_0x24a79f(0x367)](new ge(_0x3ac52b,!0x1));}finally{await this[_0x24a79f(0x64f)](_0x22e23d,_0x2516b9);}}return _0x8f7b50;}async[a0_0x397951(0x64f)](_0x2063f6,_0x1d43f0){const _0x55ee08=a0_0x397951;try{await this['repository'][_0x55ee08(0x2e4)][_0x55ee08(0x3c4)]({'where':{'_id':_0x2063f6,'imported':!0x0}},this[_0x55ee08(0x5ba)][_0x55ee08(0x341)])&&(_0x1d43f0?await this[_0x55ee08(0x436)][_0x55ee08(0x2e4)][_0x55ee08(0x30a)]({'where':{'_id':_0x2063f6}},{'imported':!0x1},this[_0x55ee08(0x5ba)][_0x55ee08(0x341)],void 0x0,_0x55ee08(0x1ef)):(await this['repository'][_0x55ee08(0x2e4)]['deleteChat'](_0x2063f6,this[_0x55ee08(0x5ba)][_0x55ee08(0x341)]),console[_0x55ee08(0x1aa)](_0x55ee08(0x480)+_0x2063f6+'\x20foi\x20removido\x20por\x20não\x20ser\x20válido.')));}catch(_0x298057){console[_0x55ee08(0x6aa)]('Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat:',_0x298057);}}async[a0_0x397951(0x257)](_0x57a755){const _0x548d98=a0_0x397951;try{let _0x14a72e=_0x57a755['readMessages'][_0x548d98(0x6ac)](_0x278732=>(0x0,y[_0x548d98(0x76e)])(_0x278732[_0x548d98(0x686)])||(0x0,y[_0x548d98(0x2f2)])(_0x278732[_0x548d98(0x686)]))[_0x548d98(0x530)](_0x51a4f8=>({'remoteJid':_0x51a4f8['remoteJid'],'fromMe':_0x51a4f8[_0x548d98(0x28f)],'id':_0x51a4f8['id']}));await this['client'][_0x548d98(0x5bd)](_0x14a72e);let _0x3eabc5=_0x14a72e['map'](_0x48d113=>this[_0x548d98(0x34b)](_0x48d113,{'status':_0x548d98(0x3f9),'owner':this[_0x548d98(0x5ba)][_0x548d98(0x341)]})),_0x48bb01=_0x14a72e[_0x548d98(0x530)](_0xa81a9a=>this[_0x548d98(0x436)][_0x548d98(0x2e4)][_0x548d98(0x30a)]({'where':{'_id':_0xa81a9a['remoteJid']}},{'unreadcount':0x0},this[_0x548d98(0x5ba)][_0x548d98(0x341)])),[_0x16b6bf,_0x1288b2]=await Promise[_0x548d98(0x579)]([Promise['all'](_0x3eabc5),Promise[_0x548d98(0x579)](_0x48bb01)]);return _0x1288b2[_0x548d98(0x6ac)](_0x45af4e=>_0x45af4e!==null)[_0x548d98(0x334)](_0x9a072a=>{const _0x2219d9=_0x548d98;q(this[_0x2219d9(0x1df)],_0x2219d9(0x740),{'chat':_0x9a072a});}),{'message':'Read\x20messages','read':'success'};}catch(_0x1cac92){throw console['error'](_0x548d98(0x5c7),_0x1cac92),new O('Read\x20messages\x20fail',_0x1cac92[_0x548d98(0x622)]());}}async[a0_0x397951(0x3ca)](_0x53e623){const _0x2f030b=a0_0x397951;let _0x3a4af1=await this[_0x2f030b(0x34a)]({'where':{'key':{'remoteJid':_0x53e623}}}),_0x17a47c=_0x3a4af1[_0x2f030b(0x655)]();for(let _0x36bef5 of _0x3a4af1)_0x36bef5[_0x2f030b(0x300)]>=_0x17a47c[_0x2f030b(0x300)]&&(_0x17a47c=_0x36bef5);return _0x17a47c;}async[a0_0x397951(0x74b)](_0x3c2945){const _0x35b836=a0_0x397951;this['logger'][_0x35b836(0x545)](_0x35b836(0x1e1));try{let _0x53d9b8=_0x3c2945[_0x35b836(0x6e2)],_0x5a951f=_0x3c2945[_0x35b836(0x2e4)];if(!_0x53d9b8&&_0x5a951f?_0x53d9b8=await this['getLastMessage'](_0x5a951f):(_0x53d9b8=_0x3c2945[_0x35b836(0x6e2)],_0x53d9b8[_0x35b836(0x300)]=_0x53d9b8?.[_0x35b836(0x300)]??Date[_0x35b836(0x287)](),_0x5a951f=_0x53d9b8?.[_0x35b836(0x226)]?.[_0x35b836(0x686)]),!_0x53d9b8||Object[_0x35b836(0x4cc)](_0x53d9b8)[_0x35b836(0x4c6)]===0x0)throw new L(_0x35b836(0x63f));await this[_0x35b836(0x577)][_0x35b836(0x586)]({'archive':_0x3c2945[_0x35b836(0x5a9)],'lastMessages':[_0x53d9b8]},this[_0x35b836(0x79b)](_0x5a951f));let _0x3e80cf=await this[_0x35b836(0x436)][_0x35b836(0x2e4)]['updateOne']({'where':{'_id':_0x53d9b8?.[_0x35b836(0x226)]?.[_0x35b836(0x686)]}},{'archived':_0x3c2945[_0x35b836(0x5a9)]},this[_0x35b836(0x5ba)][_0x35b836(0x341)]);return _0x3e80cf&&q(this[_0x35b836(0x1df)],'chats',{'chat':_0x3e80cf}),{'chatId':_0x5a951f,'archived':_0x3c2945[_0x35b836(0x5a9)]};}catch(_0x266809){throw new O({'archived':!0x1,'message':['An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.',_0x266809[_0x35b836(0x622)]()]});}}async['deleteMessage'](_0xdbc873){const _0x5679a4=a0_0x397951;try{let _0x590e52=await this['client'][_0x5679a4(0x30e)](_0xdbc873['remoteJid'],{'delete':_0xdbc873});try{let _0x2ad32e=await this['updateMessage'](_0xdbc873,{'status':_0x5679a4(0x544),'owner':this[_0x5679a4(0x5ba)]['wuid']});this[_0x5679a4(0x731)][_0x5679a4(0x545)](this['instanceName']+'\x20('+this[_0x5679a4(0x5ba)][_0x5679a4(0x341)]+_0x5679a4(0x170)+_0x2ad32e);}catch(_0x19cb25){console[_0x5679a4(0x6aa)](_0x5679a4(0x2ab),_0x19cb25);}return _0x590e52;}catch(_0x1b1129){throw new O(_0x5679a4(0x225),_0x1b1129?.[_0x5679a4(0x622)]());}}async[a0_0x397951(0x5da)](_0x43b74d){const _0x15fe44=a0_0x397951;try{let _0x436688=_0x43b74d?.[_0x15fe44(0x15c)]?_0x43b74d:await this['getMessage'](_0x43b74d[_0x15fe44(0x226)],!0x0);for(let _0x1d6a0d of pa)_0x436688[_0x15fe44(0x15c)][_0x1d6a0d]&&(_0x436688[_0x15fe44(0x15c)]=_0x436688[_0x15fe44(0x15c)][_0x1d6a0d][_0x15fe44(0x15c)]);let _0x412878,_0x423429;for(let _0x447f96 of da)if(_0x412878=_0x436688[_0x15fe44(0x15c)][_0x447f96],_0x412878){_0x423429=_0x447f96;break;}if(!_0x412878)throw'The\x20message\x20is\x20not\x20of\x20the\x20media\x20type';typeof _0x412878[_0x15fe44(0x6c8)]=='object'&&(_0x436688[_0x15fe44(0x15c)]=JSON[_0x15fe44(0x497)](JSON[_0x15fe44(0x38d)](_0x436688['message'])));let _0x3b9235=await(0x0,y[_0x15fe44(0x73c)])({'key':_0x436688?.[_0x15fe44(0x226)],'message':_0x436688?.[_0x15fe44(0x15c)]},_0x15fe44(0x5b7),{},{'logger':(0x0,At['default'])({'level':_0x15fe44(0x66f)}),'reuploadRequest':this[_0x15fe44(0x577)][_0x15fe44(0x345)]});if(!(_0x3b9235 instanceof Buffer))throw new Error('Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.');let _0x3869f7=this[_0x15fe44(0x4d2)][_0x15fe44(0x624)]('DATABASE'),_0x42b260,_0x2fe0d9;if(_0x412878[_0x15fe44(0x20e)])_0x42b260=_0x412878[_0x15fe44(0x20e)];else{let _0x4b8be0=_0x412878['mimetype']?.[_0x15fe44(0x248)](/\/(\w+)/),_0x115fb3=_0x4b8be0?_0x4b8be0[0x1]:null;if(!_0x115fb3)throw new Error(_0x15fe44(0x363));_0x42b260=(0x0,Ce['v4'])()+'.'+_0x115fb3;}_0x423429==='audioMessage'&&_0x412878[_0x15fe44(0x668)]===_0x15fe44(0x234)?(_0x42b260=(0x0,Ce['v4'])()+_0x15fe44(0x188),_0x2fe0d9=_0x15fe44(0x1cd)+await this[_0x15fe44(0x4d3)](_0x3b9235[_0x15fe44(0x622)](_0x15fe44(0x75d)))):(await this[_0x15fe44(0x4d6)](_0x3b9235,_0x42b260),_0x2fe0d9=_0x15fe44(0x1cd)+_0x42b260);let _0x6dc23b=this[_0x15fe44(0x4d2)][_0x15fe44(0x624)](_0x15fe44(0x712))[_0x15fe44(0x1a4)];if(!_0x6dc23b){let _0x2049e8=this[_0x15fe44(0x4d2)][_0x15fe44(0x624)](_0x15fe44(0x266));_0x6dc23b=_0x15fe44(0x3e9)+(_0x2049e8&&_0x2049e8[_0x15fe44(0x16f)][_0x15fe44(0x4dc)]('/')[0x4]);}_0x2fe0d9=''+_0x6dc23b+_0x2fe0d9;let _0x5c628=0xc*0x3c*0x3c*0x3e8,_0x5ef31d={'where':{'_id':_0x436688[_0x15fe44(0x226)]['id']}},_0x5e2048={'message_normalized.fileUrl':_0x2fe0d9,'message_normalized.expires_fileUrl':Date[_0x15fe44(0x287)]()+_0x5c628};try{let _0x387e08=await this['repository'][_0x15fe44(0x15c)][_0x15fe44(0x166)](_0x5ef31d,_0x5e2048,this[_0x15fe44(0x5ba)][_0x15fe44(0x341)]);_0x387e08&&q(this[_0x15fe44(0x1df)],'messages',{'message':_0x387e08});}catch(_0x3122e7){this['logger'][_0x15fe44(0x6aa)](this[_0x15fe44(0x1df)]+'\x20('+this[_0x15fe44(0x5ba)][_0x15fe44(0x341)]+_0x15fe44(0x43c)+(_0x3122e7 instanceof Error?_0x3122e7['message']:JSON[_0x15fe44(0x38d)](_0x3122e7,null,0x2)));}return{'mediaType':_0x423429,'fileName':_0x412878[_0x15fe44(0x20e)],'caption':_0x412878[_0x15fe44(0x643)],'size':{'fileLength':_0x412878['fileLength'],'height':_0x412878[_0x15fe44(0x44c)],'width':_0x412878[_0x15fe44(0x696)]},'mimetype':_0x412878[_0x15fe44(0x668)],'base64':_0x3b9235[_0x15fe44(0x622)](_0x15fe44(0x75d)),'fileUrl':_0x2fe0d9,'expires_fileUrl':Date[_0x15fe44(0x287)]()+_0x5c628};}catch(_0x4b560a){throw this[_0x15fe44(0x731)][_0x15fe44(0x6aa)](this['instanceName']+'\x20('+this[_0x15fe44(0x5ba)]['wuid']+_0x15fe44(0x43c)+(_0x4b560a instanceof Error?_0x4b560a[_0x15fe44(0x15c)]:JSON[_0x15fe44(0x38d)](_0x4b560a,null,0x2))),new m(_0x4b560a['toString']());}}async[a0_0x397951(0x4d6)](_0x321527,_0x5bb20f){const _0x72917c=a0_0x397951;let _0x49a5d7=F[_0x72917c(0x349)][_0x72917c(0x60e)](__dirname,_0x72917c(0x68e));k[_0x72917c(0x79d)](_0x49a5d7)||k[_0x72917c(0x454)](_0x49a5d7,{'recursive':!0x0});let _0x384250=F[_0x72917c(0x349)]['join'](_0x49a5d7,_0x5bb20f);return new Promise((_0x5c79b7,_0x4bcd00)=>{const _0x1f6abe=_0x72917c;k[_0x1f6abe(0x3f2)](_0x384250,_0x321527,_0x2188ff=>{const _0x218a1c=_0x1f6abe;_0x2188ff?(this[_0x218a1c(0x731)]['error']('Error\x20writing\x20file:\x20'+(_0x2188ff instanceof Error?_0x2188ff[_0x218a1c(0x15c)]:JSON[_0x218a1c(0x38d)](_0x2188ff,null,0x2))),_0x4bcd00(_0x2188ff)):(this[_0x218a1c(0x731)][_0x218a1c(0x1aa)](_0x218a1c(0x3b9)+_0x384250),_0x5c79b7(_0x384250));});});}async[a0_0x397951(0x370)](_0x314763){const _0x1dd6b5=a0_0x397951;return await this['repository']['contact'][_0x1dd6b5(0x317)](_0x314763,this[_0x1dd6b5(0x5ba)][_0x1dd6b5(0x341)]);}async[a0_0x397951(0x286)](){const _0x44ad59=a0_0x397951;return await this['repository'][_0x44ad59(0x5ee)][_0x44ad59(0x317)]({'where':{}},this[_0x44ad59(0x5ba)]['wuid']);}async[a0_0x397951(0x34a)](_0x361efc){const _0x53725f=a0_0x397951;return await this[_0x53725f(0x436)][_0x53725f(0x15c)][_0x53725f(0x317)](_0x361efc,this[_0x53725f(0x5ba)][_0x53725f(0x341)]);}async[a0_0x397951(0x705)](){const _0x490c91=a0_0x397951;let _0x4dec6f=[{'query':{'where':{'owner':this['instance'][_0x490c91(0x341)],'leadInfo.tags':{'$exists':!0x1}}},'update':{'leadInfo':{'tags':[]}}},{'query':{'where':{'owner':this[_0x490c91(0x5ba)][_0x490c91(0x341)],'leadInfo.customFields':{'$exists':!0x1}}},'update':{'leadInfo':{'customFields':[]}}}];return await this[_0x490c91(0x436)][_0x490c91(0x2e4)][_0x490c91(0x4b3)](_0x4dec6f),this['ensureChatIdsExist'](),await this['repository'][_0x490c91(0x2e4)][_0x490c91(0x317)]({'where':{}},this[_0x490c91(0x5ba)][_0x490c91(0x341)]);}async[a0_0x397951(0x1da)](){const _0x2d1180=a0_0x397951;let _0x689649=await this[_0x2d1180(0x436)]['chat'][_0x2d1180(0x317)]({'where':{}},this[_0x2d1180(0x5ba)]['wuid']);for(let _0x45285f of _0x689649)for(let _0x57637e=0x0;_0x57637e<_0x45285f[_0x2d1180(0x1f9)][_0x2d1180(0x152)]['length'];_0x57637e++)if(!_0x45285f[_0x2d1180(0x1f9)]['customFields'][_0x57637e]['chatId']){let _0x211283={'where':{'_id':_0x45285f[_0x2d1180(0x578)]}},_0x2e1a18={[_0x2d1180(0x5a7)+_0x57637e+'.chatId']:_0x45285f[_0x2d1180(0x578)]};await this[_0x2d1180(0x436)]['chat'][_0x2d1180(0x30a)](_0x211283,_0x2e1a18,this[_0x2d1180(0x5ba)][_0x2d1180(0x341)]);}}async[a0_0x397951(0x6ea)](_0x36b6ee){const _0x31f22f=a0_0x397951;try{if(!Array[_0x31f22f(0x43d)](_0x36b6ee)||_0x36b6ee[_0x31f22f(0x4c6)]===0x0)throw new Error('Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.');let _0x131223=[],_0x5dda70=[];for(let _0x5bb8c9 of _0x36b6ee){if(_0x5bb8c9[_0x31f22f(0x578)])_0x5bb8c9[_0x31f22f(0x578)]=this[_0x31f22f(0x79b)](_0x5bb8c9[_0x31f22f(0x578)]);else continue;await this[_0x31f22f(0x436)][_0x31f22f(0x2e4)][_0x31f22f(0x3c4)]({'where':{'_id':_0x5bb8c9['_id']}},this['instance']['wuid'])?_0x5dda70[_0x31f22f(0x367)]({'_id':_0x5bb8c9[_0x31f22f(0x578)],'leadInfo':_0x5bb8c9['leadInfo'],'owner':this[_0x31f22f(0x5ba)][_0x31f22f(0x341)]}):_0x131223['push']({'_id':_0x5bb8c9['_id'],'owner':this['instance'][_0x31f22f(0x341)],'leadInfo':_0x5bb8c9[_0x31f22f(0x1f9)]});}return _0x5dda70[_0x31f22f(0x4c6)]>0x0&&await this[_0x31f22f(0x436)][_0x31f22f(0x2e4)][_0x31f22f(0x4b3)](_0x5dda70[_0x31f22f(0x530)](_0x499df6=>({'query':{'where':{'_id':_0x499df6[_0x31f22f(0x578)],'owner':this[_0x31f22f(0x5ba)][_0x31f22f(0x341)]}},'update':_0x499df6}))),_0x131223[_0x31f22f(0x4c6)]>0x0&&await this[_0x31f22f(0x436)][_0x31f22f(0x2e4)][_0x31f22f(0x701)](_0x131223,this[_0x31f22f(0x5ba)][_0x31f22f(0x341)]),{'updated':_0x5dda70[_0x31f22f(0x4c6)],'inserted':_0x131223[_0x31f22f(0x4c6)]};}catch(_0xae451b){throw console[_0x31f22f(0x6aa)](_0x31f22f(0x62c),_0xae451b),_0xae451b;}}async['fetchPrivacySettings'](){const _0x2072b2=a0_0x397951;return await this['client'][_0x2072b2(0x17f)]();}async[a0_0x397951(0x787)](_0x2441a8){const _0x54bb08=a0_0x397951;try{return await this[_0x54bb08(0x577)][_0x54bb08(0x33e)](_0x2441a8[_0x54bb08(0x7a0)][_0x54bb08(0x486)]),await this[_0x54bb08(0x577)]['updateProfilePicturePrivacy'](_0x2441a8['privacySettings'][_0x54bb08(0x571)]),await this[_0x54bb08(0x577)][_0x54bb08(0x3d4)](_0x2441a8['privacySettings'][_0x54bb08(0x51c)]),await this[_0x54bb08(0x577)][_0x54bb08(0x71c)](_0x2441a8['privacySettings'][_0x54bb08(0x250)]),await this[_0x54bb08(0x577)][_0x54bb08(0x332)](_0x2441a8[_0x54bb08(0x7a0)][_0x54bb08(0x466)]),await this[_0x54bb08(0x577)]['updateGroupsAddPrivacy'](_0x2441a8[_0x54bb08(0x7a0)][_0x54bb08(0x210)]),this[_0x54bb08(0x577)]?.['ws']?.[_0x54bb08(0x5d8)](),{'update':_0x54bb08(0x5eb),'data':{'readreceipts':_0x2441a8[_0x54bb08(0x7a0)][_0x54bb08(0x486)],'profile':_0x2441a8[_0x54bb08(0x7a0)]['profile'],'status':_0x2441a8[_0x54bb08(0x7a0)][_0x54bb08(0x51c)],'online':_0x2441a8[_0x54bb08(0x7a0)][_0x54bb08(0x250)],'last':_0x2441a8[_0x54bb08(0x7a0)][_0x54bb08(0x466)],'groupadd':_0x2441a8[_0x54bb08(0x7a0)][_0x54bb08(0x210)]}};}catch(_0x249ae8){throw new O(_0x54bb08(0x666),_0x249ae8[_0x54bb08(0x622)]());}}async['fetchProfile2'](_0x101ee9){const _0x1f6802=a0_0x397951;let _0x56752c=_0x101ee9?this[_0x1f6802(0x79b)](_0x101ee9):this['client']?.['user']?.['id'];this[_0x1f6802(0x731)][_0x1f6802(0x545)](_0x1f6802(0x4bd)+_0x56752c);try{if(this['logger'][_0x1f6802(0x545)](_0x1f6802(0x3f3)),_0x101ee9){let _0x50bee6=(await this['whatsappNumber']({'numbers':[_0x56752c]}))?.[_0x1f6802(0x4ee)](),_0x57d3ea=await this[_0x1f6802(0x444)](_0x50bee6?.[_0x1f6802(0x2f4)]),_0x2166d3=await this[_0x1f6802(0x6ab)](_0x50bee6?.['jid']),_0xebac0e=await this[_0x1f6802(0x3eb)](_0x50bee6?.[_0x1f6802(0x2f4)]);return{'wuid':_0x50bee6?.['jid']||_0x56752c,'name':_0x50bee6?.[_0x1f6802(0x346)],'numberExists':_0x50bee6?.[_0x1f6802(0x562)],'picture':_0x57d3ea?.[_0x1f6802(0x765)],'status':_0x2166d3?.['status'],'isBusiness':_0xebac0e[_0x1f6802(0x237)],'email':_0xebac0e?.[_0x1f6802(0x617)],'description':_0xebac0e?.[_0x1f6802(0x299)],'website':_0xebac0e?.[_0x1f6802(0x3d2)]?.[_0x1f6802(0x4ee)]()};}}catch{return this[_0x1f6802(0x731)][_0x1f6802(0x545)](_0x1f6802(0x4ab)),{'wuid':_0x56752c,'name':null,'picture':null,'status':null,'os':null,'isBusiness':!0x1};}}async[a0_0x397951(0x379)](_0x2df1f3){const _0x405725=a0_0x397951;let _0x1e8b35=(_0x2df1f3?this['createJid'](_0x2df1f3):this['client']?.[_0x405725(0x61b)]?.['id'])[_0x405725(0x4cf)](/:\d{1,2}@/g,'@');this['logger'][_0x405725(0x545)](_0x405725(0x72b)+_0x1e8b35);let _0x14845e=await this['repository'][_0x405725(0x37e)][_0x405725(0x3c4)]({'where':{'_id':_0x1e8b35}},this[_0x405725(0x5ba)][_0x405725(0x341)]),_0x2700c6=_0x14845e?_0x14845e[_0x405725(0x4c0)]:null;try{let _0x21d4e5=(await this['whatsappNumber']({'numbers':[_0x1e8b35]}))?.['shift'](),_0x2f1c02=await this['profilePicture'](_0x21d4e5?.[_0x405725(0x2f4)]),_0x1af1c6=await this['getStatus'](_0x21d4e5?.[_0x405725(0x2f4)]),_0x41384a=await this[_0x405725(0x3eb)](_0x21d4e5?.['jid']),_0xa51f19={'imagechat':_0x2f1c02?.[_0x405725(0x765)],'contactname':_0x2700c6||null,'status':_0x1af1c6?.[_0x405725(0x51c)],'isBusiness':_0x41384a['isBusiness'],'email':_0x41384a?.[_0x405725(0x617)],'description':_0x41384a?.['description'],'website':_0x41384a?.[_0x405725(0x3d2)]?.['shift'](),'lastcache':Date[_0x405725(0x287)]()},_0x87d517=await this[_0x405725(0x436)]['chat']['updateOne']({'where':{'_id':_0x1e8b35}},_0xa51f19,this[_0x405725(0x5ba)][_0x405725(0x341)]),_0x2ba04b={'owner':this[_0x405725(0x5ba)][_0x405725(0x341)],'_id':_0x1e8b35,'profilePictureUrl':_0x2f1c02?.['profilePictureUrl'],'status':_0x1af1c6?.['status']};return this[_0x405725(0x436)]['contact']['update']([_0x2ba04b],this[_0x405725(0x5ba)]['wuid']),_0x87d517&&q(this['instanceName'],_0x405725(0x740),{'chat':_0x87d517}),{'wuid':_0x21d4e5?.[_0x405725(0x2f4)]||_0x1e8b35,'name':_0x21d4e5?.[_0x405725(0x346)],'numberExists':_0x21d4e5?.[_0x405725(0x562)],'picture':_0x2f1c02?.['profilePictureUrl'],'status':_0x1af1c6?.['status'],'isBusiness':_0x41384a[_0x405725(0x237)],'email':_0x41384a?.[_0x405725(0x617)],'description':_0x41384a?.[_0x405725(0x299)],'website':_0x41384a?.[_0x405725(0x3d2)]?.[_0x405725(0x4ee)]()};}catch(_0x920dda){return this[_0x405725(0x731)][_0x405725(0x6aa)]('Error\x20fetching\x20and\x20updating\x20profile:\x20'+(_0x920dda instanceof Error?_0x920dda[_0x405725(0x15c)]:JSON[_0x405725(0x38d)](_0x920dda,null,0x2))),{};}}async['fetchBusinessProfile'](_0xd9f54d){const _0x11e0d1=a0_0x397951;this['logger'][_0x11e0d1(0x545)]('Fetching\x20business\x20profile');try{let _0x3b390f=_0xd9f54d?this['createJid'](_0xd9f54d):this[_0x11e0d1(0x5ba)][_0x11e0d1(0x341)],_0x12f34a=await this[_0x11e0d1(0x577)][_0x11e0d1(0x19a)](_0x3b390f);return this[_0x11e0d1(0x731)][_0x11e0d1(0x545)]('Trying\x20to\x20get\x20business\x20profile'),_0x12f34a?(this[_0x11e0d1(0x731)][_0x11e0d1(0x545)]('Business\x20profile\x20fetched'),{'isBusiness':!0x0,..._0x12f34a}):{'isBusiness':!0x1,'message':_0x11e0d1(0x475),...(await this[_0x11e0d1(0x260)]({'numbers':[_0x3b390f]}))?.[_0x11e0d1(0x4ee)]()};}catch(_0x3c162f){throw new O(_0x11e0d1(0x41d),_0x3c162f[_0x11e0d1(0x622)]());}}async['getStatus'](_0x146721){const _0x8da76c=a0_0x397951;let _0x326644=this[_0x8da76c(0x79b)](_0x146721);try{return{'wuid':_0x326644,'status':(await this[_0x8da76c(0x577)][_0x8da76c(0x2eb)](_0x326644))?.['status']};}catch{return{'wuid':_0x326644,'status':null};}}async[a0_0x397951(0x498)](_0x969797){const _0x53461b=a0_0x397951;try{return await this['client'][_0x53461b(0x498)](_0x969797),{'update':_0x53461b(0x5eb)};}catch(_0x138d49){throw new O(_0x53461b(0x41d),_0x138d49[_0x53461b(0x622)]());}}async['updateProfileStatus'](_0x169665){const _0x5a3eb7=a0_0x397951;try{return await this[_0x5a3eb7(0x577)][_0x5a3eb7(0x1b3)](_0x169665),{'update':_0x5a3eb7(0x5eb)};}catch(_0x161e4b){throw new O('Error\x20updating\x20profile\x20status',_0x161e4b[_0x5a3eb7(0x622)]());}}async['updateProfilePicture'](_0x4092f4){const _0x3ad939=a0_0x397951;try{let _0x1546fe;if((0x0,$['isURL'])(_0x4092f4)){let _0xc31753=new Date()[_0x3ad939(0x4d1)](),_0x43c580=_0x4092f4+_0x3ad939(0x291)+_0xc31753;_0x1546fe=(await se[_0x3ad939(0x349)][_0x3ad939(0x624)](_0x43c580,{'responseType':_0x3ad939(0x4be)}))[_0x3ad939(0x2cf)];}else{if((0x0,$['isBase64'])(_0x4092f4))_0x1546fe=Buffer[_0x3ad939(0x430)](_0x4092f4,_0x3ad939(0x75d));else throw new m(_0x3ad939(0x331));}return await this[_0x3ad939(0x577)][_0x3ad939(0x179)](this[_0x3ad939(0x5ba)][_0x3ad939(0x341)],_0x1546fe),{'update':_0x3ad939(0x5eb)};}catch(_0x2536ff){throw new O(_0x3ad939(0x4f6),_0x2536ff[_0x3ad939(0x622)]());}}async[a0_0x397951(0x77d)](){const _0x3e5b7a=a0_0x397951;try{return await this[_0x3e5b7a(0x577)][_0x3e5b7a(0x77d)](this[_0x3e5b7a(0x5ba)][_0x3e5b7a(0x341)]),{'update':'success'};}catch(_0x591acd){throw new O(_0x3e5b7a(0x1ee),_0x591acd[_0x3e5b7a(0x622)]());}}async[a0_0x397951(0x4b0)](_0x999d0c){const _0x42cbf0=a0_0x397951;try{let _0x42e393=_0x999d0c[_0x42cbf0(0x54d)][_0x42cbf0(0x530)](_0x47669b=>this[_0x42cbf0(0x79b)](_0x47669b)),{id:_0x778b01}=await this[_0x42cbf0(0x577)][_0x42cbf0(0x779)](_0x999d0c[_0x42cbf0(0x783)],_0x42e393);return _0x999d0c?.['description']&&await this[_0x42cbf0(0x577)]['groupUpdateDescription'](_0x778b01,_0x999d0c[_0x42cbf0(0x299)]),{'metadata':await this['client'][_0x42cbf0(0x432)](_0x778b01)};}catch(_0x348164){throw this[_0x42cbf0(0x731)][_0x42cbf0(0x6aa)](this[_0x42cbf0(0x1df)]+'\x20('+this[_0x42cbf0(0x5ba)][_0x42cbf0(0x341)]+_0x42cbf0(0x43c)+(_0x348164 instanceof Error?_0x348164[_0x42cbf0(0x15c)]:JSON[_0x42cbf0(0x38d)](_0x348164,null,0x2))),new O(_0x42cbf0(0x596),_0x348164['toString']());}}async[a0_0x397951(0x6b1)](_0x13de5e){const _0x144341=a0_0x397951;try{let _0x3184dc;if((0x0,$[_0x144341(0x3e4)])(_0x13de5e[_0x144341(0x42f)])){let _0x23bf3d=new Date()[_0x144341(0x4d1)](),_0x4efca0=_0x13de5e['image']+_0x144341(0x291)+_0x23bf3d;_0x3184dc=(await se[_0x144341(0x349)][_0x144341(0x624)](_0x4efca0,{'responseType':_0x144341(0x4be)}))[_0x144341(0x2cf)];}else{if((0x0,$[_0x144341(0x26b)])(_0x13de5e['image']))_0x3184dc=Buffer['from'](_0x13de5e[_0x144341(0x42f)],'base64');else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this['client'][_0x144341(0x179)](_0x13de5e['groupJid'],_0x3184dc),{'update':'success'};}catch(_0x290491){throw new O(_0x144341(0x682),_0x290491[_0x144341(0x622)]());}}async['findGroup'](_0x10b3f7,_0x465e75=a0_0x397951(0x1ae)){const _0x4c0623=a0_0x397951;try{let _0x1eccee=await this['client'][_0x4c0623(0x432)](_0x10b3f7[_0x4c0623(0x2bc)]),_0x252cc3=null;try{_0x252cc3=(await this[_0x4c0623(0x444)](_0x10b3f7[_0x4c0623(0x2bc)]))['profilePictureUrl'];}catch(_0x4b10f8){this['logger'][_0x4c0623(0x545)](this[_0x4c0623(0x1df)]+'\x20('+this[_0x4c0623(0x5ba)][_0x4c0623(0x341)]+_0x4c0623(0x1b2)+_0x10b3f7[_0x4c0623(0x2bc)]+':\x20'+(_0x4b10f8 instanceof Error?_0x4b10f8['message']:JSON[_0x4c0623(0x38d)](_0x4b10f8,null,0x2)));}let _0x597866=await this[_0x4c0623(0x436)]['chat'][_0x4c0623(0x30a)]({'where':{'_id':_0x10b3f7['groupJid']}},{'imagechat':_0x252cc3,'name':_0x1eccee['subject'],'group_size':_0x1eccee[_0x4c0623(0x460)],'group_announce':_0x1eccee[_0x4c0623(0x3af)],'lastcache':Date[_0x4c0623(0x287)]()},this[_0x4c0623(0x5ba)]['wuid']);return _0x597866&&q(this['instanceName'],_0x4c0623(0x740),{'chat':_0x597866}),{'metadata':_0x1eccee,'image':_0x252cc3};}catch(_0x48ea64){if(_0x465e75===_0x4c0623(0x33b))return;throw new L(_0x4c0623(0x1d8),_0x48ea64[_0x4c0623(0x622)]());}}async['groupDesc'](_0x192baf){const _0xe36762=a0_0x397951;try{return await this[_0xe36762(0x577)][_0xe36762(0x333)](_0x192baf[_0xe36762(0x2bc)],_0x192baf[_0xe36762(0x299)]),{'update':_0xe36762(0x5eb)};}catch(_0x3ddc85){throw new O('Error\x20change\x20group\x20description',_0x3ddc85['toString']());}}async[a0_0x397951(0x5b8)](_0x133e76){const _0x5ca858=a0_0x397951;try{return await this[_0x5ca858(0x577)][_0x5ca858(0x3b8)](_0x133e76[_0x5ca858(0x2bc)],_0x133e76[_0x5ca858(0x346)]),{'update':_0x5ca858(0x5eb)};}catch(_0x2db273){throw new O('Error\x20change\x20group\x20name',_0x2db273['toString']());}}async[a0_0x397951(0x446)](_0x231bcc){const _0x56fc1a=a0_0x397951;try{return await this[_0x56fc1a(0x577)]['groupSettingUpdate'](_0x231bcc[_0x56fc1a(0x2bc)],_0x231bcc[_0x56fc1a(0x5f0)]),{'update':_0x56fc1a(0x5eb)};}catch(_0x1f8c89){throw new O(_0x56fc1a(0x53f),_0x1f8c89['toString']());}}async[a0_0x397951(0x3cb)](){const _0x1f51a9=a0_0x397951;try{let _0x412fc4=[],_0x2ee533=await this[_0x1f51a9(0x577)][_0x1f51a9(0x53e)](),_0x1631c9=Object[_0x1f51a9(0x235)](_0x2ee533),_0x50a122=_0x1631c9[_0x1f51a9(0x6ac)](_0x30cb15=>(0x0,y[_0x1f51a9(0x76e)])(_0x30cb15?.['id']))[_0x1f51a9(0x530)](async _0x254a3a=>{const _0x40a659=_0x1f51a9;try{return await this[_0x40a659(0x577)][_0x40a659(0x765)](_0x254a3a['id'],_0x40a659(0x70c));}catch(_0x11ef00){return this[_0x40a659(0x731)][_0x40a659(0x545)](this[_0x40a659(0x1df)]+'\x20('+this['instance']['wuid']+_0x40a659(0x1b2)+_0x254a3a['id']+':\x20'+(_0x11ef00 instanceof Error?_0x11ef00[_0x40a659(0x15c)]:JSON[_0x40a659(0x38d)](_0x11ef00,null,0x2))),null;}}),_0x51b4d1=await Promise[_0x1f51a9(0x579)](_0x50a122);for(let _0x968d82=0x0;_0x968d82<_0x1631c9[_0x1f51a9(0x4c6)];_0x968d82++){let _0xd3b53e=_0x1631c9[_0x968d82];(0x0,y['isJidGroup'])(_0xd3b53e?.['id'])&&_0x412fc4[_0x1f51a9(0x367)]({'groupJid':_0xd3b53e?.['id'],'subject':_0xd3b53e?.[_0x1f51a9(0x783)],'subjectOwner':_0xd3b53e?.[_0x1f51a9(0x537)]?.[_0x1f51a9(0x4dc)]('@')[0x0],'subjectTime':_0xd3b53e?.['subjectTime'],'size':_0xd3b53e?.['participants']?.[_0x1f51a9(0x4c6)],'owner':_0xd3b53e?.[_0x1f51a9(0x169)]?.[_0x1f51a9(0x4dc)]('@')[0x0],'creation':_0xd3b53e?.[_0x1f51a9(0x721)],'desc':_0xd3b53e?.[_0x1f51a9(0x305)],'restrict':_0xd3b53e?.['restrict'],'announce':_0xd3b53e?.[_0x1f51a9(0x3af)],'image':_0x51b4d1[_0x968d82]});}return _0x412fc4;}catch(_0x44ff08){throw new L(_0x1f51a9(0x1d8),_0x44ff08['toString']());}}async[a0_0x397951(0x65e)](_0xa3dcb2){const _0x467c76=a0_0x397951;try{let _0x49c25b=await this['client'][_0x467c76(0x155)](_0xa3dcb2[_0x467c76(0x2bc)]);return{'inviteUrl':_0x467c76(0x3d1)+_0x49c25b,'inviteCode':_0x49c25b};}catch(_0x138b01){throw new L(_0x467c76(0x2b8),_0x138b01[_0x467c76(0x622)]());}}async[a0_0x397951(0x5e4)](_0x9dabc){const _0x32a3e5=a0_0x397951;try{let _0x2ce98f=await this[_0x32a3e5(0x577)][_0x32a3e5(0x79a)](_0x9dabc[_0x32a3e5(0x2bc)]);return{'revoked':!0x0,'inviteUrl':_0x32a3e5(0x3d1)+_0x2ce98f,'inviteCode':_0x2ce98f};}catch(_0x58de01){throw new L('Revoke\x20error',_0x58de01[_0x32a3e5(0x622)]());}}async[a0_0x397951(0x2e7)](_0x3b2891){const _0x480251=a0_0x397951;try{if((0x0,$[_0x480251(0x3e4)])(_0x3b2891['inviteCode']))var _0x3524bd=_0x3b2891[_0x480251(0x65e)]['split']('/')[0x3];else var _0x3524bd=_0x3b2891[_0x480251(0x65e)];let _0x2427ee=await this['client'][_0x480251(0x73f)](_0x3524bd);return this[_0x480251(0x731)][_0x480251(0x545)](this[_0x480251(0x1df)]+'\x20('+this['instance'][_0x480251(0x341)]+_0x480251(0x43c)+_0x2427ee),{'join':!0x0,'inviteCode':_0x3524bd,'groupJid':_0x2427ee};}catch(_0x399f66){throw new L(_0x480251(0x730),_0x399f66['toString']());}}async[a0_0x397951(0x21e)](_0x3a7b7a){const _0x130c3e=a0_0x397951;try{return{'participants':(await this[_0x130c3e(0x577)]['groupMetadata'](_0x3a7b7a[_0x130c3e(0x2bc)]))['participants']};}catch(_0x3fbf60){throw new L(_0x130c3e(0x191),_0x3fbf60[_0x130c3e(0x622)]());}}async[a0_0x397951(0x57a)](_0x4aa972){const _0x4c67fe=a0_0x397951;try{let _0xf735e5=_0x4aa972[_0x4c67fe(0x54d)][_0x4c67fe(0x530)](_0x540eee=>this['createJid'](_0x540eee));return{'updateParticipants':await this[_0x4c67fe(0x577)]['groupParticipantsUpdate'](_0x4aa972[_0x4c67fe(0x2bc)],_0xf735e5,_0x4aa972[_0x4c67fe(0x757)])};}catch(_0xcce155){throw new m('Error\x20updating\x20participants',_0xcce155[_0x4c67fe(0x622)]());}}async[a0_0x397951(0x484)](_0x5e3cf7){const _0x45f6f1=a0_0x397951;try{let _0x447601=await this[_0x45f6f1(0x577)][_0x45f6f1(0x23d)](_0x5e3cf7[_0x45f6f1(0x2bc)],_0x5e3cf7[_0x45f6f1(0x2c7)]);return{'success':!0x0};}catch(_0x32f635){throw new m(_0x45f6f1(0x4d8),_0x32f635[_0x45f6f1(0x622)]());}}async[a0_0x397951(0x2b7)](_0x20c85d){const _0x5edc6f=a0_0x397951;try{return await this[_0x5edc6f(0x577)][_0x5edc6f(0x6d0)](_0x20c85d[_0x5edc6f(0x2bc)]),{'groupJid':_0x20c85d[_0x5edc6f(0x2bc)],'leave':!0x0};}catch(_0x143d87){throw new m(_0x5edc6f(0x2da),_0x143d87[_0x5edc6f(0x622)]());}}async[a0_0x397951(0x79c)](_0x1400c9){const _0x280ec4=a0_0x397951;return await this[_0x280ec4(0x797)](_0x1400c9['number'],{'poll':{'name':_0x1400c9[_0x280ec4(0x79c)]?.[_0x280ec4(0x346)],'selectableCount':_0x1400c9[_0x280ec4(0x79c)]['selectableCount'],'values':_0x1400c9['pollMessage'][_0x280ec4(0x235)]}},_0x1400c9?.[_0x280ec4(0x2b9)]);}async[a0_0x397951(0x1d9)](_0x2ef366){const _0x2350c4=a0_0x397951;return await this['sendMessageWithTyping'](_0x2ef366[_0x2350c4(0x5e3)],{'listMessage':{'title':_0x2ef366['listMessage']['title'],'description':_0x2ef366['listMessage']['description'],'buttonText':_0x2ef366['listMessage']?.['buttonText'],'footerText':_0x2ef366['listMessage']?.[_0x2350c4(0x59c)],'sections':_0x2ef366[_0x2350c4(0x1d9)][_0x2350c4(0x3a2)],'listType':0x2}},_0x2ef366?.[_0x2350c4(0x2b9)]);}async[a0_0x397951(0x761)](_0x312b34){const _0x4232de=a0_0x397951;let _0x33704f;if(_0x312b34['menuMessage'][_0x4232de(0x52f)]===_0x4232de(0x1b1)){let _0x1cf519=_0x312b34[_0x4232de(0x761)]['text'][_0x4232de(0x1dd)]('\x0a'),_0x4a36cc='',_0x10daf0='';_0x1cf519!==-0x1?(_0x4a36cc=_0x312b34[_0x4232de(0x761)][_0x4232de(0x4cd)][_0x4232de(0x79f)](0x0,_0x1cf519)[_0x4232de(0x38f)](),_0x10daf0=_0x312b34[_0x4232de(0x761)]['text'][_0x4232de(0x79f)](_0x1cf519+0x1)):_0x10daf0=_0x312b34[_0x4232de(0x761)][_0x4232de(0x4cd)];let _0x2a492b=this[_0x4232de(0x47f)](_0x312b34[_0x4232de(0x761)]['choices']);_0x33704f={'listMessage':{'title':_0x4a36cc,'description':_0x10daf0,'buttonText':_0x312b34['menuMessage'][_0x4232de(0x48f)]||'Selecione','footerText':_0x312b34[_0x4232de(0x761)][_0x4232de(0x59c)],'sections':_0x2a492b,'listType':0x2}};}else{if(_0x312b34[_0x4232de(0x761)][_0x4232de(0x52f)]===_0x4232de(0x22e)){let _0x1191e6=_0x312b34[_0x4232de(0x761)]['choices']['filter'](_0x2e257f=>!(_0x2e257f['startsWith']('[')&&_0x2e257f[_0x4232de(0x515)](']')))['map'](_0xe18ca0=>_0xe18ca0[_0x4232de(0x4dc)]('\x0a')[0x0]);_0x33704f={'poll':{'name':_0x312b34[_0x4232de(0x761)][_0x4232de(0x4cd)],'selectableCount':_0x312b34['menuMessage'][_0x4232de(0x439)]||0x1,'values':_0x1191e6}};}}return await this['sendMessageWithTyping'](_0x312b34[_0x4232de(0x5e3)],_0x33704f,_0x312b34?.['options']);}[a0_0x397951(0x47f)](_0x4f5020){const _0x3c09d6=a0_0x397951;let _0x2a1eb9=[],_0x9910c9={'rows':[]};return _0x4f5020['forEach'](_0x2a90a9=>{const _0x2cf831=a0_0x44db;if(_0x2a90a9['startsWith']('[')&&_0x2a90a9['endsWith'](']'))_0x9910c9[_0x2cf831(0x3c9)][_0x2cf831(0x4c6)]>0x0&&_0x2a1eb9[_0x2cf831(0x367)](_0x9910c9),_0x9910c9={'title':_0x2a90a9[_0x2cf831(0x476)](0x1,-0x1),'rows':[]};else{let _0x43cfad=_0x2a90a9['split']('\x0a')[_0x2cf831(0x530)](_0x2b243f=>_0x2b243f[_0x2cf831(0x38f)]()),_0x54814b=_0x43cfad[0x0],_0x294379=_0x43cfad[0x1]||null,_0x2034b4=_0x43cfad[0x2]||_0x54814b;_0x9910c9[_0x2cf831(0x3c9)][_0x2cf831(0x367)]({'title':_0x54814b,'description':_0x294379,'rowId':_0x2034b4});}}),_0x9910c9[_0x3c09d6(0x3c9)]['length']>0x0&&_0x2a1eb9[_0x3c09d6(0x367)](_0x9910c9),_0x2a1eb9;}async['updateMessage'](_0x2d5c2a,_0x3cba16){const _0xc82279=a0_0x397951;if(await this[_0xc82279(0x685)](_0x2d5c2a,!0x0)){let _0xe74894={'where':{'_id':_0x2d5c2a['id']}},_0xdabf3d={'status':[_0x3cba16[_0xc82279(0x51c)]][0x0]};try{let _0x454c58=await this['repository']['message'][_0xc82279(0x166)](_0xe74894,_0xdabf3d,this[_0xc82279(0x5ba)][_0xc82279(0x341)]);_0x454c58&&q(this[_0xc82279(0x1df)],_0xc82279(0x679),{'message':_0x454c58});}catch{}}}[a0_0x397951(0x2fa)](_0x1e591e){const _0xd84076=a0_0x397951;let _0x402af2=[];return _0x1e591e[_0xd84076(0x334)](_0x2e0941=>{const _0x512448=_0xd84076;_0x2e0941[_0x512448(0x693)]&&_0x402af2[_0x512448(0x367)]('['+_0x2e0941['title']+']'),_0x2e0941['rows'][_0x512448(0x334)](_0x132f48=>{const _0x38af50=_0x512448;let _0x6a696b=_0x132f48['title'];_0x132f48[_0x38af50(0x299)]&&(_0x6a696b+='\x0a'+_0x132f48[_0x38af50(0x299)]),_0x6a696b+='\x0a'+_0x132f48['rowId'],_0x402af2['push'](_0x6a696b);});}),_0x402af2['join']('|');}[a0_0x397951(0x461)](_0x352823){const _0x12858f=a0_0x397951;let _0x4e9610=_0x352823['replace'](/\\n/g,'\x0a')[_0x12858f(0x4dc)]('\x0a')[_0x12858f(0x6ac)](_0x4b5176=>_0x4b5176[_0x12858f(0x2fb)](_0x12858f(0x602))||_0x4b5176[_0x12858f(0x2fb)](_0x12858f(0x58e))),_0x224739='';return _0x4e9610[_0x12858f(0x334)](_0x4c840b=>{const _0x17b210=_0x12858f;let _0x44e532=/TEL(?:.*):(.+)/,_0x2c5c90=/EMAIL(?:.*):(.+)/,_0x1f44df=_0x4c840b[_0x17b210(0x248)](_0x44e532),_0x3443e1=_0x4c840b['match'](_0x2c5c90);if(_0x1f44df){let _0x2def05=_0x1f44df[0x1]['replace'](/-| |\+|\(|\)/g,'')['trim']();_0x224739+=_0x17b210(0x56c)+_0x2def05+'\x0a';}else{if(_0x3443e1){let _0x3fab46=_0x3443e1[0x1]['trim']();_0x224739+=_0x17b210(0x785)+_0x3fab46+'\x0a';}}}),_0x224739[_0x12858f(0x38f)]();}async[a0_0x397951(0x6c6)](_0x4901b1,_0x136329,_0x217a2e){const _0x252c02=a0_0x397951;if(!_0x4901b1[_0x252c02(0x1f6)])return;let _0x369dda=_0x136329['key'][_0x252c02(0x686)][_0x252c02(0x4cf)](/:\d{1,2}@/g,'@'),_0x357f00=_0x136329[_0x252c02(0x226)]['fromMe'],_0x3b1285=_0x369dda[_0x252c02(0x515)]('@g.us'),_0x38d39c=_0x136329['message_normalized']?.[_0x252c02(0x4cd)]||_0x136329['message_normalized']?.[_0x252c02(0x643)]||_0x136329[_0x252c02(0x2e3)]?.[_0x252c02(0x219)]||_0x136329['message_normalized']?.[_0x252c02(0x346)],_0x5de1b2={'lastmsg':_0x136329[_0x252c02(0x300)]||Date[_0x252c02(0x287)](),'unreadcount':_0x357f00?0x0:0x1,..._0x357f00||_0x3b1285?{}:{'name':_0x136329[_0x252c02(0x4c0)]},..._0x3b1285?{'group':_0x3b1285}:{}};if(_0x217a2e===_0x252c02(0x21d)&&_0x357f00&&this[_0x252c02(0x745)]?.[_0x252c02(0x67c)][_0x252c02(0x63b)]&&!_0x38d39c[_0x252c02(0x5a0)](this[_0x252c02(0x745)]?.[_0x252c02(0x67c)][_0x252c02(0x606)])){let _0x423ad9=(this['AutomateSystem']?.[_0x252c02(0x67c)]['stopWhenYouSendMsg']||0x5)*0xea60,_0x3d97b7=Date['now']()+_0x423ad9;_0x5de1b2['leadInfo.desativadoFluxoAte']=_0x3d97b7,this['logger'][_0x252c02(0x545)](this['instanceName']+'\x20('+this[_0x252c02(0x5ba)][_0x252c02(0x341)]+'):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20'+_0x3d97b7+'.');}let _0x273d5d=await this['repository'][_0x252c02(0x2e4)]['updateOne']({'where':{'_id':_0x369dda}},_0x5de1b2,this['instance'][_0x252c02(0x341)],{'new':!0x0,'upsert':!0x0});if(!_0x3b1285&&(!_0x273d5d?.[_0x252c02(0x1f9)]||!_0x273d5d[_0x252c02(0x1f9)][_0x252c02(0x61c)])&&_0x136329[_0x252c02(0x4c0)]&&!_0x357f00&&await this[_0x252c02(0x436)][_0x252c02(0x2e4)]['updateOne']({'where':{'_id':_0x369dda}},{'leadInfo':{'nome':_0x136329[_0x252c02(0x4c0)]}},this[_0x252c02(0x5ba)]['wuid'],{'new':!0x0,'upsert':!0x1}),_0x273d5d)q(this['instanceName'],_0x252c02(0x740),{'chat':_0x273d5d});else{this[_0x252c02(0x731)][_0x252c02(0x6aa)](this['instanceName']+'\x20('+this[_0x252c02(0x5ba)][_0x252c02(0x341)]+_0x252c02(0x3f0));return;}if(!this['AutomateSystem']?.['flowConfig'][_0x252c02(0x63b)])return this[_0x252c02(0x731)][_0x252c02(0x545)](this[_0x252c02(0x1df)]+'\x20('+this[_0x252c02(0x5ba)][_0x252c02(0x341)]+_0x252c02(0x601)),null;if(_0x273d5d[_0x252c02(0x578)][_0x252c02(0x2fb)](_0x252c02(0x277))&&this['AutomateSystem']?.[_0x252c02(0x67c)][_0x252c02(0x580)]===!0x0)return this['logger'][_0x252c02(0x545)](this[_0x252c02(0x1df)]+'\x20('+this[_0x252c02(0x5ba)][_0x252c02(0x341)]+_0x252c02(0x46e)),null;if(_0x273d5d[_0x252c02(0x1f9)]){if(_0x273d5d['leadInfo']['desativadoFluxoAte']===0x0||_0x273d5d[_0x252c02(0x1f9)]['atendimentoAberto'])return this[_0x252c02(0x731)]['verbose'](this[_0x252c02(0x1df)]+'\x20('+this[_0x252c02(0x5ba)][_0x252c02(0x341)]+_0x252c02(0x307)+_0x369dda+_0x252c02(0x585)),null;if(_0x273d5d[_0x252c02(0x1f9)][_0x252c02(0x5cf)]>Date[_0x252c02(0x287)]()&&!_0x136329[_0x252c02(0x2e3)]?.[_0x252c02(0x219)])return this[_0x252c02(0x731)][_0x252c02(0x545)](this[_0x252c02(0x1df)]+'\x20('+this[_0x252c02(0x5ba)][_0x252c02(0x341)]+_0x252c02(0x278)+new Date(_0x273d5d[_0x252c02(0x1f9)]['desativadoFluxoAte'])['toLocaleString']()+',\x20saindo.'),null;}this[_0x252c02(0x731)][_0x252c02(0x545)](this[_0x252c02(0x1df)]+'\x20('+this['instance'][_0x252c02(0x341)]+_0x252c02(0x2dc)),this[_0x252c02(0x44e)](_0x217a2e,_0x136329);}async[a0_0x397951(0x5ab)](_0x4f4c52,_0x10efbd){const _0x1499e9=a0_0x397951;if(_0x10efbd['ENABLED']){let _0x4e4d54=_0x4f4c52[_0x1499e9(0x530)](async _0x267c37=>{const _0x2ce499=_0x1499e9;try{let _0x13abd3={'_id':_0x267c37[_0x2ce499(0x578)],'owner':_0x267c37['owner'],'lastcache':0x0};if(_0x267c37['group']!==null&&(_0x13abd3[_0x2ce499(0x490)]=_0x267c37[_0x2ce499(0x490)]),_0x267c37[_0x2ce499(0x346)]!==null&&(_0x13abd3[_0x2ce499(0x346)]=_0x267c37[_0x2ce499(0x346)]),_0x267c37[_0x2ce499(0x5a1)]!==null&&(_0x13abd3[_0x2ce499(0x5a1)]=_0x267c37[_0x2ce499(0x5a1)]),_0x267c37[_0x2ce499(0x3b4)]!==null&&(_0x13abd3[_0x2ce499(0x3b4)]=_0x267c37[_0x2ce499(0x3b4)]),_0x267c37[_0x2ce499(0x3b4)]===null&&(_0x13abd3[_0x2ce499(0x3b4)]=_0x2ce499(0x5c4)),_0x267c37[_0x2ce499(0x2c4)]!==null&&(_0x13abd3[_0x2ce499(0x2c4)]=_0x267c37['lastmsg']),_0x267c37[_0x2ce499(0x244)]!==null&&(_0x13abd3[_0x2ce499(0x244)]=_0x267c37[_0x2ce499(0x244)]),_0x267c37[_0x2ce499(0x58f)]!==null&&(_0x13abd3[_0x2ce499(0x58f)]=_0x267c37[_0x2ce499(0x58f)]),Object[_0x2ce499(0x4cc)](_0x13abd3)[_0x2ce499(0x4c6)]>0x0)return await this[_0x2ce499(0x436)][_0x2ce499(0x2e4)]['updateOne']({'where':{'_id':_0x267c37[_0x2ce499(0x578)]}},_0x13abd3,this[_0x2ce499(0x5ba)][_0x2ce499(0x341)]);}catch(_0x3e367a){return console['error']('Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20'+_0x267c37['_id']+':',_0x3e367a),null;}}),_0x3e925d=(await Promise['all'](_0x4e4d54))[_0x1499e9(0x6ac)](_0x31f7d7=>_0x31f7d7!==null)[_0x1499e9(0x4c6)];this[_0x1499e9(0x731)][_0x1499e9(0x545)](this[_0x1499e9(0x1df)]+'\x20('+this[_0x1499e9(0x5ba)][_0x1499e9(0x341)]+_0x1499e9(0x43c)+_0x3e925d+_0x1499e9(0x2a7)+this[_0x1499e9(0x5ba)]['wuid']+_0x1499e9(0x239));}}async[a0_0x397951(0x6a1)](_0x38c327){const _0x18165a=a0_0x397951;this[_0x18165a(0x731)][_0x18165a(0x545)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x18165a(0x386));let _0x2b707c={'readMessages':[{'remoteJid':_0x38c327[_0x18165a(0x583)][_0x18165a(0x35c)][_0x18165a(0x226)][_0x18165a(0x686)],'fromMe':_0x38c327['chatLog'][_0x18165a(0x35c)][_0x18165a(0x226)][_0x18165a(0x28f)],'id':_0x38c327[_0x18165a(0x583)][_0x18165a(0x35c)][_0x18165a(0x226)]['id']}]};await this[_0x18165a(0x257)](_0x2b707c);}async[a0_0x397951(0x44e)](_0x3777f8,_0x158d4e){const _0x314994=a0_0x397951;try{let {key:_0x26ade1,message_normalized:_0x23f413}=_0x158d4e,_0x4fb087=_0x23f413,_0x3615da=_0x23f413[_0x314994(0x4cd)]||_0x23f413[_0x314994(0x643)]||_0x23f413[_0x314994(0x219)]||_0x23f413['name'],_0x37b89c=_0x26ade1[_0x314994(0x686)],_0x301958;if(_0x4fb087['key'][_0x314994(0x28f)]&&_0x3615da[_0x314994(0x38f)]()!==this[_0x314994(0x745)]?.['flowConfig'][_0x314994(0x68c)][_0x314994(0x38f)]())return this[_0x314994(0x731)][_0x314994(0x545)](this['instanceName']+'\x20('+this['instance'][_0x314994(0x341)]+_0x314994(0x6e1)),null;if(_0x4fb087[_0x314994(0x226)][_0x314994(0x28f)]&&_0x3615da[_0x314994(0x38f)]()===this['AutomateSystem']?.[_0x314994(0x67c)][_0x314994(0x68c)][_0x314994(0x38f)]()){this['logger'][_0x314994(0x545)](this[_0x314994(0x1df)]+'\x20('+this[_0x314994(0x5ba)][_0x314994(0x341)]+_0x314994(0x1d7));let _0xbf7603=await this[_0x314994(0x436)][_0x314994(0x589)][_0x314994(0x317)]({'remoteJid':_0x37b89c,'status':'open'},this['instance'][_0x314994(0x341)]);this[_0x314994(0x731)][_0x314994(0x545)](this[_0x314994(0x1df)]+'\x20('+this[_0x314994(0x5ba)]['wuid']+'):\x20Conversas\x20encontradas:'+_0xbf7603);let _0x37ec83=Date['now'](),_0x3e4971;return this['AutomateSystem']?.[_0x314994(0x67c)][_0x314994(0x450)]===0x0?_0x3e4971={'stoppedUntil':_0x37ec83+0x7591f6200}:_0x3e4971={'stoppedUntil':_0x37ec83+this['AutomateSystem']?.[_0x314994(0x67c)][_0x314994(0x450)]*0x3c*0x3e8},this[_0x314994(0x731)][_0x314994(0x545)](this['instanceName']+'\x20('+this[_0x314994(0x5ba)][_0x314994(0x341)]+_0x314994(0x40a)+_0x3e4971),this[_0x314994(0x775)](_0x301958,_0x3e4971[_0x314994(0x49b)]),null;}if(_0x3615da&&_0x3615da[_0x314994(0x5a0)](this['AutomateSystem']?.['flowConfig'][_0x314994(0x606)])&&_0x3615da[_0x314994(0x4c6)]>0x4){let _0x11ddbc=await this[_0x314994(0x436)][_0x314994(0x6d4)]['findOne']({'where':{'startCommandWord':_0x3615da}},this[_0x314994(0x5ba)]['wuid']);if(this[_0x314994(0x731)][_0x314994(0x545)](this[_0x314994(0x1df)]+'\x20('+this[_0x314994(0x5ba)][_0x314994(0x341)]+_0x314994(0x1f8)),_0x11ddbc)_0x301958=await this[_0x314994(0x70a)](_0x11ddbc,_0x4fb087[_0x314994(0x226)],_0x4fb087);else return this[_0x314994(0x731)][_0x314994(0x545)](this[_0x314994(0x1df)]+'\x20('+this[_0x314994(0x5ba)][_0x314994(0x341)]+_0x314994(0x6e4)),null;}else _0x301958=await this[_0x314994(0x538)](_0x37b89c,_0x4fb087);if(_0x301958){this['logger'][_0x314994(0x545)](this[_0x314994(0x1df)]+'\x20('+this[_0x314994(0x5ba)][_0x314994(0x341)]+'):\x20Encontrou\x20conversa\x20no\x20startBot:\x20'),!_0x26ade1[_0x314994(0x28f)]&&_0x301958[_0x314994(0x5bd)]&&this[_0x314994(0x6a1)](_0x301958);let _0x5b8148=await this['NextBlock'](_0x301958);_0x5b8148&&await this[_0x314994(0x672)](_0x301958,_0x5b8148);}}catch(_0x5db32b){this[_0x314994(0x731)][_0x314994(0x6aa)](this['instanceName']+'\x20('+this[_0x314994(0x5ba)][_0x314994(0x341)]+_0x314994(0x17c)+(_0x5db32b instanceof Error?_0x5db32b[_0x314994(0x15c)]:JSON['stringify'](_0x5db32b,null,0x2)));}}['flattenObject'](_0x5d2097,_0x1e9bcf='',_0x411aa5={},_0x308f8d=!0x0){const _0x57fb92=a0_0x397951;for(let _0x1e24b3 in _0x5d2097){let _0x522bba=_0x308f8d?'_'+_0x1e24b3:''+_0x1e9bcf+_0x1e24b3;typeof _0x5d2097[_0x1e24b3]=='object'&&_0x5d2097[_0x1e24b3]!==null?this[_0x57fb92(0x4da)](_0x5d2097[_0x1e24b3],_0x522bba+'.',_0x411aa5,!0x1):_0x411aa5[_0x522bba]=String(_0x5d2097[_0x1e24b3]);}return _0x411aa5;}[a0_0x397951(0x3d8)](_0x19dcce){const _0x4bfb01=a0_0x397951;let _0x29fd5c={};for(let _0x1127bd of _0x19dcce)typeof _0x1127bd[_0x4bfb01(0x346)]==_0x4bfb01(0x22b)&&typeof _0x1127bd['value']==_0x4bfb01(0x22b)&&(_0x29fd5c[_0x1127bd['name']]=_0x1127bd[_0x4bfb01(0x15f)]);return _0x29fd5c;}async[a0_0x397951(0x633)](_0x55226c){const _0x36c69d=a0_0x397951;if(!this[_0x36c69d(0x745)]?.[_0x36c69d(0x67c)][_0x36c69d(0x63b)]||_0x55226c['status']!=='open'&&_0x55226c[_0x36c69d(0x425)]==='')return null;let _0x5d0625=_0x55226c[_0x36c69d(0x583)][_0x36c69d(0x6d6)]||_0x36c69d(0x16e);typeof _0x55226c[_0x36c69d(0x583)][_0x36c69d(0x4ef)]>'u'&&(_0x55226c[_0x36c69d(0x583)]['lastCondition']=!0x0);let _0x2002ca=_0x55226c[_0x36c69d(0x583)]['lastCondition'];this[_0x36c69d(0x731)][_0x36c69d(0x545)](this[_0x36c69d(0x1df)]+'\x20('+this[_0x36c69d(0x5ba)][_0x36c69d(0x341)]+'):\x20lastBlockId:\x20'+_0x5d0625+_0x36c69d(0x400)+_0x2002ca);let _0x46add1=_0x5d0625===_0x36c69d(0x16e)?_0x55226c[_0x36c69d(0x298)][_0x36c69d(0x317)](_0x355fa8=>_0x355fa8['type']===_0x36c69d(0x16e)):_0x55226c[_0x36c69d(0x298)][_0x36c69d(0x317)](_0x385c2d=>_0x385c2d['_id'][_0x36c69d(0x622)]()===_0x5d0625[_0x36c69d(0x622)]());if(!_0x46add1)return this[_0x36c69d(0x731)]['error'](this['instanceName']+'\x20('+this['instance'][_0x36c69d(0x341)]+_0x36c69d(0x3fa)+_0x5d0625),null;let _0x38c17c={'_pushName':_0x55226c[_0x36c69d(0x583)][_0x36c69d(0x35c)]['pushName'],..._0x55226c['chatLog']['realVariables']},_0x1b00fc=null;if(_0x55226c[_0x36c69d(0x425)]){let _0x27d484=_0x55226c['chatLog']['lastReceivedMessage'][_0x36c69d(0x219)],_0x30b052=_0x55226c['waitingMenu_replyOptions']['find'](_0x398410=>_0x398410[_0x36c69d(0x49f)]===_0x27d484);if(_0x30b052){let _0x47d33e=_0x30b052[_0x36c69d(0x3cd)];if(_0x1b00fc=_0x55226c[_0x36c69d(0x298)]['find'](_0x42edd3=>_0x42edd3[_0x36c69d(0x625)]===_0x47d33e&&_0x42edd3[_0x36c69d(0x45a)]===0x1),_0x46add1[_0x36c69d(0x28d)][_0x36c69d(0x546)]){let _0x1b6242={'id':_0x55226c['waitingMenu_id'],'remoteJid':_0x55226c[_0x36c69d(0x686)],'fromMe':!0x0};await this['deleteMessage'](_0x1b6242);}if(_0x46add1[_0x36c69d(0x28d)][_0x36c69d(0x546)]&&_0x46add1[_0x36c69d(0x28d)]['pollMessageOnDelete']&&_0x46add1[_0x36c69d(0x28d)]['menuType']===_0x36c69d(0x22e)){let _0x4867e9={'number':_0x55226c[_0x36c69d(0x686)],'options':{'delay':0x0},'textMessage':{'text':_0x36c69d(0x547)+_0x55226c[_0x36c69d(0x196)]+_0x36c69d(0x19d)+_0x27d484}};await this[_0x36c69d(0x6b8)](_0x4867e9);}_0x55226c['status']='open',_0x55226c[_0x36c69d(0x425)]='',_0x55226c[_0x36c69d(0x196)]='',_0x55226c['waitingMenu_replyOptions']=[];}else{this[_0x36c69d(0x731)][_0x36c69d(0x545)](this[_0x36c69d(0x1df)]+'\x20('+this[_0x36c69d(0x5ba)][_0x36c69d(0x341)]+'):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um');let _0x5f21f2={'activatedCount':_0x55226c[_0x36c69d(0x583)][_0x36c69d(0x5f7)][_0x36c69d(0x6ac)](_0x35ae36=>String(_0x35ae36[_0x36c69d(0x2a6)])===String(_0x5d0625))['length'],'moreLogs':['Não\x20respondeu\x20com\x20a\x20enquete.']};if(_0x46add1[_0x36c69d(0x28d)][_0x36c69d(0x2b4)]){let _0x26dcff={'number':_0x55226c[_0x36c69d(0x686)],'options':{'delay':0x0},'textMessage':{'text':_0x46add1[_0x36c69d(0x28d)]['pollErrorMessage']}};await this[_0x36c69d(0x6b8)](_0x26dcff);}if(_0x46add1[_0x36c69d(0x393)]!==void 0x0&&_0x5f21f2[_0x36c69d(0x75b)]>=_0x46add1[_0x36c69d(0x393)]){let _0x395a5d=Date['now'](),_0x4f426b=_0x46add1['stopMinutesMaxActives']??0xa;isNaN(_0x4f426b)&&(_0x4f426b=0xa);let _0x33de97=_0x395a5d+_0x4f426b*0x3c*0x3e8;_0x5f21f2[_0x36c69d(0x21f)]=_0x33de97,_0x5f21f2[_0x36c69d(0x718)]['push']('Atingido\x20interações\x20máximas,\x20parando\x20fluxo'),this[_0x36c69d(0x775)](_0x55226c,_0x33de97),_0x55226c[_0x36c69d(0x425)]='',_0x55226c[_0x36c69d(0x196)]='',_0x55226c[_0x36c69d(0x6da)]=[];}return this['updateConversation'](_0x55226c,_0x46add1,_0x5f21f2,!0x0),null;}}if(_0x2002ca&&_0x46add1[_0x36c69d(0x3cd)]&&!_0x55226c['waitingMenu_id']){let _0x1a6222=_0x55226c[_0x36c69d(0x298)][_0x36c69d(0x6ac)](_0x37826f=>_0x37826f[_0x36c69d(0x625)][_0x36c69d(0x622)]()===_0x46add1[_0x36c69d(0x3cd)][_0x36c69d(0x622)]())[_0x36c69d(0x656)]((_0x4a7f0a,_0x54b806)=>_0x4a7f0a[_0x36c69d(0x45a)]-_0x54b806['order']);_0x1a6222['length']>0x0&&(_0x1b00fc=_0x1a6222[0x0]);}if(!_0x1b00fc){let _0x2fec31=_0x46add1[_0x36c69d(0x625)],_0x207f61=_0x55226c[_0x36c69d(0x298)][_0x36c69d(0x6ac)](_0x33b2bb=>_0x33b2bb[_0x36c69d(0x625)]===_0x2fec31&&_0x33b2bb[_0x36c69d(0x45a)]>_0x46add1[_0x36c69d(0x45a)])[_0x36c69d(0x656)]((_0x471915,_0x404056)=>_0x471915[_0x36c69d(0x45a)]-_0x404056['order']);_0x207f61['length']>0x0&&(_0x1b00fc=_0x207f61[0x0]);}if(!_0x1b00fc)return _0x55226c['status']='closed',null;_0x55226c[_0x36c69d(0x583)][_0x36c69d(0x6bf)]=_0x38c17c;let _0x29cd61=JSON[_0x36c69d(0x497)](JSON[_0x36c69d(0x38d)](_0x1b00fc));return this[_0x36c69d(0x620)](_0x29cd61,_0x55226c[_0x36c69d(0x583)][_0x36c69d(0x6bf)]),_0x55226c['chatLog'][_0x36c69d(0x6d6)]=_0x29cd61[_0x36c69d(0x578)],_0x55226c[_0x36c69d(0x583)][_0x36c69d(0x4ef)]=!0x0,_0x29cd61;}[a0_0x397951(0x6ef)](_0x5c218f,_0x2ce177){const _0x45c46d=a0_0x397951;return _0x5c218f[_0x45c46d(0x4cf)](/\{\{([^}]+)\}\}/g,(_0x40c770,_0x593b9e)=>_0x2ce177[_0x593b9e]||'');}[a0_0x397951(0x620)](_0x5baf6f,_0x27be53){const _0x48beda=a0_0x397951;for(let _0x20a916 in _0x5baf6f)typeof _0x5baf6f[_0x20a916]==_0x48beda(0x22b)?_0x5baf6f[_0x20a916]=this['replaceVariables'](_0x5baf6f[_0x20a916],_0x27be53):typeof _0x5baf6f[_0x20a916]==_0x48beda(0x2a1)&&this[_0x48beda(0x620)](_0x5baf6f[_0x20a916],_0x27be53);}async[a0_0x397951(0x246)](_0x48ba40,_0x3a48aa){const _0x21c06c=a0_0x397951;let _0x1c71ad=_0x3a48aa['_id'];if(_0x48ba40['chatLog']&&_0x48ba40[_0x21c06c(0x583)][_0x21c06c(0x5f7)]){let _0x147634=_0x48ba40[_0x21c06c(0x583)][_0x21c06c(0x5f7)]['filter'](_0x4bcb98=>String(_0x4bcb98[_0x21c06c(0x2a6)])===String(_0x1c71ad))[_0x21c06c(0x655)]();if(_0x147634&&_0x147634['error']&&_0x3a48aa[_0x21c06c(0x605)])return _0x48ba40['status']=_0x21c06c(0x488),await this[_0x21c06c(0x482)](_0x48ba40),null;}if(_0x3a48aa[_0x21c06c(0x52f)]===_0x21c06c(0x28d)&&_0x3a48aa[_0x21c06c(0x28d)]['command']===_0x21c06c(0x39f)&&_0x48ba40[_0x21c06c(0x425)])return _0x48ba40[_0x21c06c(0x583)][_0x21c06c(0x6d6)]=_0x1c71ad,await this['saveConversationToDatabase'](_0x48ba40),null;let _0x40dae6=await this[_0x21c06c(0x633)](_0x48ba40);if(_0x48ba40[_0x21c06c(0x583)]&&_0x48ba40['chatLog']['blockLogs']){let _0x5288b5=_0x48ba40[_0x21c06c(0x583)][_0x21c06c(0x5f7)]['filter'](_0x1e5987=>String(_0x1e5987[_0x21c06c(0x2a6)])===String(_0x1c71ad))[_0x21c06c(0x4c6)];if(_0x3a48aa[_0x21c06c(0x393)]!==void 0x0&&_0x5288b5>=_0x3a48aa[_0x21c06c(0x393)]){let _0x2df3b3=Date[_0x21c06c(0x287)](),_0x4e1fa6=_0x3a48aa[_0x21c06c(0x209)]??0xa;isNaN(_0x4e1fa6)&&(_0x4e1fa6=0xa);let _0x53f639=_0x2df3b3+_0x4e1fa6*0x3c*0x3e8,_0x2e44b9={'newStoppedUntil':_0x53f639};return this[_0x21c06c(0x775)](_0x48ba40,_0x53f639),this[_0x21c06c(0x75a)](_0x48ba40,_0x3a48aa,_0x2e44b9,!0x0),null;}}_0x40dae6&&_0x40dae6[_0x21c06c(0x52f)]!=='save'&&await this['processblock'](_0x48ba40,_0x40dae6),_0x40dae6||await this['saveConversationToDatabase'](_0x48ba40),_0x40dae6&&_0x40dae6[_0x21c06c(0x52f)]==='save'&&(_0x48ba40['chatLog'][_0x21c06c(0x6d6)]=_0x1c71ad,await this[_0x21c06c(0x482)](_0x48ba40));}async['processblock'](_0x5ebdc3,_0x87a91){const _0x2a5878=a0_0x397951;try{let _0xebede3=_0x87a91['type'];this[_0x2a5878(0x731)]['verbose'](this[_0x2a5878(0x1df)]+'\x20('+this[_0x2a5878(0x5ba)]['wuid']+_0x2a5878(0x6ce)+_0xebede3);let _0x2e2daa={'uazapi':()=>this[_0x2a5878(0x1eb)](_0x5ebdc3,_0x87a91),'save':()=>this[_0x2a5878(0x1d4)](_0x5ebdc3,_0x87a91),'stop':()=>this[_0x2a5878(0x68c)](_0x5ebdc3,_0x87a91),'condition':()=>this['processConditions'](_0x5ebdc3,_0x87a91),'varedit':()=>this[_0x2a5878(0x2b2)](_0x5ebdc3,_0x87a91),'apirequest':()=>this[_0x2a5878(0x35a)](_0x5ebdc3,_0x87a91),'goToFlow':()=>this['processgoToFlow'](_0x5ebdc3,_0x87a91)}[_0xebede3];_0x2e2daa&&await _0x2e2daa();}catch(_0x3b171d){this[_0x2a5878(0x731)]['error'](this[_0x2a5878(0x1df)]+'\x20('+this[_0x2a5878(0x5ba)][_0x2a5878(0x341)]+_0x2a5878(0x1ad)+(_0x3b171d instanceof Error?_0x3b171d['message']:JSON[_0x2a5878(0x38d)](_0x3b171d,null,0x2)));}}async[a0_0x397951(0x173)](_0x571c0b,_0x123db7){const _0x442c10=a0_0x397951;if(this[_0x442c10(0x731)]['verbose'](this[_0x442c10(0x1df)]+'\x20('+this[_0x442c10(0x5ba)][_0x442c10(0x341)]+_0x442c10(0x1e4)),!_0x571c0b||!_0x123db7)return this[_0x442c10(0x731)][_0x442c10(0x6aa)](this[_0x442c10(0x1df)]+'\x20('+this[_0x442c10(0x5ba)]['wuid']+_0x442c10(0x23a)),null;await this['updateConversation'](_0x571c0b,_0x123db7,{},!0x0,!0x0),console['log'](_0x442c10(0x4a0)),console[_0x442c10(0x1aa)](_0x123db7);let _0x24c1f0=_0x123db7[_0x442c10(0x3f5)];console[_0x442c10(0x1aa)](_0x442c10(0x744),_0x24c1f0),_0x571c0b=await this[_0x442c10(0x18c)](_0x24c1f0,_0x571c0b[_0x442c10(0x686)],_0x571c0b[_0x442c10(0x583)]['realVariables']),this[_0x442c10(0x731)]['verbose'](this[_0x442c10(0x1df)]+'\x20('+this['instance']['wuid']+'):\x20Criada\x20conversa\x20nova\x20(gotoflow)');let _0x5b5c3c=await this[_0x442c10(0x633)](_0x571c0b);_0x5b5c3c&&await this[_0x442c10(0x672)](_0x571c0b,_0x5b5c3c);}async[a0_0x397951(0x18c)](_0x23377d,_0x1972d7,_0x3e9728){const _0x158070=a0_0x397951;this[_0x158070(0x731)][_0x158070(0x545)](this[_0x158070(0x1df)]+'\x20('+this['instance'][_0x158070(0x341)]+_0x158070(0x4d4));try{if(_0x23377d=await this['repository'][_0x158070(0x6d4)][_0x158070(0x3c4)]({'where':{'name':_0x23377d}},this[_0x158070(0x5ba)][_0x158070(0x341)]),!_0x23377d)return this[_0x158070(0x731)][_0x158070(0x6aa)](this[_0x158070(0x1df)]+'\x20('+this['instance'][_0x158070(0x341)]+_0x158070(0x549)),null;let _0x2ba5d5=require(_0x158070(0x4e9))['ObjectId'],_0x1dca7b=Date[_0x158070(0x287)](),_0x92997f=_0x158070(0x16e),_0x2eb169={},_0x3b3350={},_0x2a8213={..._0x23377d,'chatLog':null},_0x5e1c7b={'lastReceivedMessage':_0x2eb169,'lastSendMessage':_0x3b3350,'lastBlockId':_0x92997f,'lastCondition':!0x0,'realVariables':_0x3e9728};_0x2a8213[_0x158070(0x583)]=_0x5e1c7b,_0x2a8213[_0x158070(0x583)][_0x158070(0x6bf)]={..._0x3e9728},delete _0x2a8213[_0x158070(0x578)],_0x2a8213['_id']=new _0x2ba5d5(),_0x2a8213[_0x158070(0x615)]=_0x1dca7b,_0x2a8213[_0x158070(0x51c)]=_0x158070(0x612),_0x2a8213[_0x158070(0x686)]=_0x1972d7;let _0x5d2326=await this['repository'][_0x158070(0x589)]['updateOne'](_0x2a8213[_0x158070(0x578)],_0x2a8213,this['instance']['wuid']);return this[_0x158070(0x731)][_0x158070(0x545)](this['instanceName']+'\x20('+this[_0x158070(0x5ba)][_0x158070(0x341)]+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x5d2326?_0x2a8213:null;}catch(_0x5037f5){throw this[_0x158070(0x731)]['error'](this[_0x158070(0x1df)]+'\x20('+this[_0x158070(0x5ba)][_0x158070(0x341)]+_0x158070(0x426)+(_0x5037f5 instanceof Error?_0x5037f5[_0x158070(0x15c)]:JSON[_0x158070(0x38d)](_0x5037f5,null,0x2))),new m(_0x5037f5[_0x158070(0x15c)]);}}async[a0_0x397951(0x35a)](_0x82deb2,_0xce15fb){const _0x59aac6=a0_0x397951;let _0x34accd,_0x1a679e;try{let _0x4d8f3f=_0xce15fb[_0x59aac6(0x27e)];if(!_0x4d8f3f||!_0x4d8f3f['url']||!_0x4d8f3f['method'])throw new Error(_0x59aac6(0x65f));let _0x3cb785={'method':_0x4d8f3f[_0x59aac6(0x4dd)],'url':_0x4d8f3f[_0x59aac6(0x634)],'headers':_0x4d8f3f[_0x59aac6(0x21b)]||{},'data':_0x4d8f3f[_0x59aac6(0x533)]||{},'responseType':_0x59aac6(0x4be)},_0x48e61f=await(0x0,se[_0x59aac6(0x349)])(_0x3cb785),_0x4759e6=_0x48e61f[_0x59aac6(0x161)][_0x59aac6(0x63c)];if(_0x4759e6&&_0x4759e6['includes']('application/json')){_0x34accd=_0x48e61f[_0x59aac6(0x2cf)];let _0x5e5589=_0x82deb2[_0x59aac6(0x583)][_0x59aac6(0x6bf)],_0x1c59dd=this['flattenObject'](_0x34accd);return Object[_0x59aac6(0x3de)](_0x5e5589,_0x1c59dd),_0x82deb2[_0x59aac6(0x583)][_0x59aac6(0x6bf)]=_0x5e5589,_0x1a679e={'error':!0x1,'apiResponse':_0x34accd},this[_0x59aac6(0x75a)](_0x82deb2,_0xce15fb,_0x1a679e),_0x34accd;}if(_0x4759e6&&(_0x4759e6[_0x59aac6(0x2fb)](_0x59aac6(0x67f))||_0x4759e6[_0x59aac6(0x2fb)](_0x59aac6(0x42f))||_0x4759e6[_0x59aac6(0x2fb)](_0x59aac6(0x464))||_0x4759e6[_0x59aac6(0x2fb)](_0x59aac6(0x275)))){this[_0x59aac6(0x731)][_0x59aac6(0x545)](this['instanceName']+'\x20('+this[_0x59aac6(0x5ba)][_0x59aac6(0x341)]+'):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20'+_0x4759e6);let _0x318a11=(0x0,Ce['v4'])(),_0x5c7223='',_0x30982e={'image/jpeg':_0x59aac6(0x6ee),'image/png':_0x59aac6(0x741),'image/gif':_0x59aac6(0x690),'image/webp':_0x59aac6(0x607),'image/svg+xml':_0x59aac6(0x2c9),'audio/mpeg':_0x59aac6(0x1c6),'audio/ogg':_0x59aac6(0x188),'audio/wav':'.wav','video/mp4':_0x59aac6(0x340),'video/webm':_0x59aac6(0x293),'video/ogg':_0x59aac6(0x1cf),'text/plain':_0x59aac6(0x176),'application/pdf':_0x59aac6(0x5af),'application/msword':_0x59aac6(0x182),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x59aac6(0x29d),'application/vnd.ms-excel':_0x59aac6(0x408),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':'.xlsx','application/vnd.ms-powerpoint':_0x59aac6(0x554),'application/vnd.openxmlformats-officedocument.presentationml.presentation':_0x59aac6(0x2d8)};_0x30982e[_0x4759e6]?(_0x5c7223=_0x30982e[_0x4759e6],this[_0x59aac6(0x731)][_0x59aac6(0x545)](this['instanceName']+'\x20('+this[_0x59aac6(0x5ba)][_0x59aac6(0x341)]+_0x59aac6(0x17e)+_0x5c7223)):(_0x5c7223=_0x59aac6(0x764),this['logger'][_0x59aac6(0x545)](this[_0x59aac6(0x1df)]+'\x20('+this['instance'][_0x59aac6(0x341)]+_0x59aac6(0x18a)+_0x5c7223)),_0x318a11+=_0x5c7223,this['logger'][_0x59aac6(0x545)](this['instanceName']+'\x20('+this['instance'][_0x59aac6(0x341)]+_0x59aac6(0x284)+_0x318a11);let _0x4a8d6f=this['configService']['get']('SERVER')['URL'];if(!_0x4a8d6f){let _0x375fdf=this['configService'][_0x59aac6(0x624)](_0x59aac6(0x266));_0x4a8d6f=_0x59aac6(0x3e9)+(_0x375fdf&&_0x375fdf[_0x59aac6(0x16f)][_0x59aac6(0x4dc)]('/')[0x4]);}let _0x13592f=Buffer['from'](_0x48e61f[_0x59aac6(0x2cf)]);await this[_0x59aac6(0x4d6)](_0x13592f,_0x318a11);let _0x45d276=_0x59aac6(0x1cd)+_0x318a11;_0x45d276=''+_0x4a8d6f+_0x45d276,_0x34accd={'fileUrl':_0x45d276},_0x82deb2[_0x59aac6(0x583)][_0x59aac6(0x6bf)][_0x59aac6(0x16a)]=_0x45d276;let _0x3d669c=_0x82deb2['chatLog']['realVariables'],_0x377fe3=this[_0x59aac6(0x4da)](_0x34accd);return Object[_0x59aac6(0x3de)](_0x3d669c,_0x377fe3),_0x82deb2[_0x59aac6(0x583)]['realVariables']=_0x3d669c,_0x1a679e={'error':!0x1,'apiResponse':{'fileUrl':_0x45d276}},this[_0x59aac6(0x75a)](_0x82deb2,_0xce15fb,_0x1a679e),_0x34accd;}}catch(_0x4ec413){console['error'](_0x59aac6(0x739),_0x4ec413),_0x4ec413[_0x59aac6(0x616)]&&(_0x34accd=_0x4ec413[_0x59aac6(0x616)][_0x59aac6(0x2cf)]);let _0x2199e0=_0x82deb2[_0x59aac6(0x583)]['realVariables'],_0x38a373=this[_0x59aac6(0x4da)](_0x34accd);return Object[_0x59aac6(0x3de)](_0x2199e0,_0x38a373),_0x82deb2['chatLog']['realVariables']=_0x2199e0,_0x1a679e={'error':!0x0,'errorLog':_0x4ec413[_0x59aac6(0x622)](),'apiResponse':_0x34accd},this['updateConversation'](_0x82deb2,_0xce15fb,_0x1a679e),{'success':!0x1};}}[a0_0x397951(0x43b)](_0x5e1838,_0x1b749c){const _0x35449c=a0_0x397951;let _0x5e7ed7=_0x16b69f=>{const _0x590f6d=a0_0x44db;let _0x597c22=_0x16b69f[_0x590f6d(0x4cf)](/[^0-9.,-]/g,'')[_0x590f6d(0x4cf)](',','.'),_0x1a6520=parseFloat(_0x597c22);return isNaN(_0x1a6520)?null:_0x1a6520;},_0xe0cf24=_0x1b749c[_0x35449c(0x43e)],_0x5c8bdc=_0x1b749c['secondValue'];typeof _0xe0cf24==_0x35449c(0x22b)&&(_0xe0cf24=this[_0x35449c(0x6ef)](_0xe0cf24,_0x5e1838[_0x35449c(0x583)][_0x35449c(0x6bf)])??''),typeof _0x5c8bdc=='string'&&(_0x5c8bdc=this[_0x35449c(0x6ef)](_0x5c8bdc,_0x5e1838[_0x35449c(0x583)][_0x35449c(0x6bf)])??'');let _0x19c037=null;if(!_0x1b749c[_0x35449c(0x396)])return null;switch(this['logger']['verbose'](this[_0x35449c(0x1df)]+'\x20('+this[_0x35449c(0x5ba)][_0x35449c(0x341)]+'):\x20newFirstValue\x20após\x20replaceVariables:'+_0xe0cf24),this[_0x35449c(0x731)][_0x35449c(0x545)](this[_0x35449c(0x1df)]+'\x20('+this[_0x35449c(0x5ba)]['wuid']+_0x35449c(0x434)+_0x5c8bdc),_0x1b749c[_0x35449c(0x396)]){case'+':case'-':case'*':case'/':let _0x375b5c=_0x5e7ed7(_0xe0cf24||'0'),_0x525223=_0x5e7ed7(_0x5c8bdc||'0');if(_0x375b5c===null)return null;switch(_0x1b749c['editOperator']){case'+':_0x19c037=_0x375b5c+(_0x525223??0x0);break;case'-':_0x19c037=_0x375b5c-(_0x525223??0x0);break;case'*':_0x19c037=_0x375b5c*(_0x525223??0x1);break;case'/':_0x525223!==0x0&&(_0x19c037=_0x375b5c/(_0x525223??0x1));break;}break;case _0x35449c(0x19c):case'findAndReplaceRegex':let _0x2c68f3=_0x5c8bdc,_0x53a0ab=_0x1b749c[_0x35449c(0x26c)];if(typeof _0x53a0ab==_0x35449c(0x22b)&&(_0x53a0ab=this[_0x35449c(0x6ef)](_0x53a0ab,_0x5e1838[_0x35449c(0x583)][_0x35449c(0x6bf)])??''),_0x2c68f3&&_0x53a0ab!==void 0x0){let _0x235e60=_0x1b749c[_0x35449c(0x396)]===_0x35449c(0x19c)?new RegExp(_0x2c68f3[_0x35449c(0x4cf)](/[-\/\\^$*+?.()|[\]{}]/g,_0x35449c(0x65d)),'g'):new RegExp(_0x2c68f3,'g');_0x19c037=_0xe0cf24[_0x35449c(0x4cf)](_0x235e60,_0x53a0ab);}else console[_0x35449c(0x659)](_0x35449c(0x75f));break;case'setNewValue':_0x19c037=_0x5c8bdc;break;case _0x35449c(0x4d5):let _0x45750c=_0xe0cf24['match'](new RegExp(_0x5c8bdc||''));_0x19c037=_0x45750c?_0x45750c[0x0]:'';break;case _0x35449c(0x3ed):_0x19c037=_0xe0cf24[_0x35449c(0x476)](0x0,parseInt(_0x5c8bdc||'0'));break;case _0x35449c(0x373):let _0x571bd2=parseInt(_0x5c8bdc||'0');_0x19c037=_0xe0cf24['slice'](_0xe0cf24[_0x35449c(0x4c6)]-_0x571bd2);break;case _0x35449c(0x214):let _0x3a93f1=_0x5e7ed7(_0xe0cf24),_0x5d2ff7=parseInt(_0x5c8bdc||'0');_0x5d2ff7=Math['abs'](_0x5d2ff7),_0x3a93f1!==null?_0x19c037=_0x3a93f1['toLocaleString'](_0x35449c(0x342),{'minimumFractionDigits':_0x5d2ff7,'maximumFractionDigits':_0x5d2ff7}):(console[_0x35449c(0x659)](_0x35449c(0x5b5)+_0xe0cf24),_0x19c037=null);break;case _0x35449c(0x4af):let _0x4c9db4=_0x5e7ed7(_0xe0cf24);_0x4c9db4!==null?_0x19c037=_0x4c9db4['toLocaleString'](_0x35449c(0x342),{'style':_0x35449c(0x5bc),'currency':'BRL'}):(console[_0x35449c(0x659)](_0x35449c(0x369)+_0xe0cf24),_0x19c037=null);break;case _0x35449c(0x4f0):_0x19c037=_0xe0cf24[_0x35449c(0x647)]();break;case _0x35449c(0x525):_0x19c037=_0xe0cf24[_0x35449c(0x4b5)]();break;case _0x35449c(0x61f):_0x19c037=_0xe0cf24[_0x35449c(0x4dc)]('\x20')['map'](_0x36d4e6=>_0x36d4e6[_0x35449c(0x1fa)](0x0)[_0x35449c(0x647)]()+_0x36d4e6[_0x35449c(0x476)](0x1)[_0x35449c(0x4b5)]())[_0x35449c(0x60e)]('\x20');break;case'trimmed':_0x19c037=_0xe0cf24[_0x35449c(0x38f)]();break;default:_0x19c037=_0xe0cf24;}return _0x19c037!==null?_0x19c037[_0x35449c(0x622)]():null;}async['processvaredits'](_0x55b70f,_0x23eb2f){const _0x3a4e40=a0_0x397951;try{let _0x4acc73=_0x55b70f[_0x3a4e40(0x49c)]?.['filter'](_0x4ec137=>_0x4ec137['blockId']===_0x23eb2f[_0x3a4e40(0x578)]?.['toString']())||[],_0x191f5d=_0x23eb2f[_0x3a4e40(0x2ee)],_0x246718=null,_0x1fc843=[],_0x1b3a4f=_0x55b70f['chatLog'][_0x3a4e40(0x6bf)][_0x191f5d];_0x1fc843[_0x3a4e40(0x367)](_0x3a4e40(0x50e)+_0x1b3a4f+'\x22');for(let _0x52e8b8 of _0x4acc73){_0x52e8b8[_0x3a4e40(0x43e)]=_0x1b3a4f,_0x246718=_0x52e8b8[_0x3a4e40(0x43e)];let _0x352b82;try{_0x352b82=this[_0x3a4e40(0x43b)](_0x55b70f,_0x52e8b8);}catch(_0x257d49){console[_0x3a4e40(0x6aa)](_0x3a4e40(0x626)+_0x257d49[_0x3a4e40(0x15c)]);continue;}if(_0x352b82!==null){let _0x5af06e='Operador:\x20\x22'+_0x52e8b8[_0x3a4e40(0x396)]+'\x22',_0x12d032=[_0x3a4e40(0x4af),_0x3a4e40(0x4f0),_0x3a4e40(0x525),'capitalizedWords',_0x3a4e40(0x326)];_0x52e8b8[_0x3a4e40(0x396)]===_0x3a4e40(0x19c)||_0x52e8b8[_0x3a4e40(0x396)]===_0x3a4e40(0x336)?_0x5af06e+=',\x20valor\x20a\x20encontrar:\x20\x22'+_0x52e8b8[_0x3a4e40(0x4e2)]+_0x3a4e40(0x382)+_0x52e8b8['replaceValue']+'\x22':!_0x12d032[_0x3a4e40(0x2fb)](_0x52e8b8[_0x3a4e40(0x396)])&&_0x52e8b8['secondValue']!==null&&_0x52e8b8['secondValue']!==void 0x0&&(_0x5af06e+=_0x3a4e40(0x53d)+_0x52e8b8['secondValue']+'\x22'),_0x5af06e+=_0x3a4e40(0x29a)+_0x352b82+'.',_0x1fc843[_0x3a4e40(0x367)](_0x5af06e);}_0x352b82!==null&&(_0x1b3a4f=_0x352b82);}if(_0x55b70f[_0x3a4e40(0x583)][_0x3a4e40(0x6bf)]&&_0x23eb2f[_0x3a4e40(0x2ee)]){_0x55b70f['chatLog'][_0x3a4e40(0x6bf)][_0x23eb2f[_0x3a4e40(0x2ee)]]=_0x1b3a4f;let _0x4c4d3e={'variable':_0x23eb2f['saveVariable'],'oldValue':_0x246718,'newValue':_0x1b3a4f,'moreLogs':_0x1fc843};try{this['updateConversation'](_0x55b70f,_0x23eb2f,_0x4c4d3e);}catch(_0x20d90c){console[_0x3a4e40(0x6aa)](_0x3a4e40(0x553)+_0x20d90c[_0x3a4e40(0x15c)]);}}return _0x191f5d;}catch(_0x2f4d1f){return console['error'](_0x3a4e40(0x183)+_0x2f4d1f[_0x3a4e40(0x15c)]),null;}}async[a0_0x397951(0x66d)](_0x369c3c,_0x511ebd){const _0x5022dd=a0_0x397951;try{let _0x58bdae=[],_0x12c572=_0x369c3c['conditions'][_0x5022dd(0x6ac)](_0x50b908=>_0x50b908[_0x5022dd(0x2a6)]===_0x511ebd[_0x5022dd(0x578)][_0x5022dd(0x622)]()),_0x164275=null,_0x2327b0=!0x1;for(let _0x144154 of _0x12c572){let _0x8c5052=this[_0x5022dd(0x394)](_0x369c3c,_0x144154);_0x58bdae[_0x5022dd(0x367)](_0x5022dd(0x720)+_0x144154[_0x5022dd(0x43e)]+_0x5022dd(0x190)+_0x144154['expression']+',\x20Segundo\x20Valor:\x20'+_0x144154[_0x5022dd(0x4e2)]+',\x20Resultado:\x20'+_0x8c5052),_0x164275===null?_0x164275=_0x8c5052:_0x144154[_0x5022dd(0x37a)]===_0x5022dd(0x3fd)?(_0x164275=_0x164275&&_0x8c5052,_0x8c5052||(_0x2327b0=!0x0)):_0x144154[_0x5022dd(0x37a)]==='or'&&(_0x2327b0||(_0x164275=_0x164275||_0x8c5052));}_0x164275===null&&(_0x164275=!0x0);let _0x1d04a9={'moreLogs':_0x58bdae};_0x369c3c[_0x5022dd(0x583)][_0x5022dd(0x4ef)]=_0x164275,await this[_0x5022dd(0x75a)](_0x369c3c,_0x511ebd,_0x1d04a9);}catch(_0x59bbb7){this[_0x5022dd(0x731)][_0x5022dd(0x6aa)](this[_0x5022dd(0x1df)]+'\x20('+this[_0x5022dd(0x5ba)][_0x5022dd(0x341)]+_0x5022dd(0x6b7)+(_0x59bbb7 instanceof Error?_0x59bbb7[_0x5022dd(0x15c)]:JSON[_0x5022dd(0x38d)](_0x59bbb7,null,0x2)));}}[a0_0x397951(0x394)](_0x3a2b93,_0x4f6e57){const _0x3eec77=a0_0x397951;let _0x4efded=_0x4f6e57['firstValue'],_0x1de840=_0x4f6e57[_0x3eec77(0x4e2)];typeof _0x4efded==_0x3eec77(0x22b)&&(_0x4efded=this['replaceVariables'](_0x4efded,_0x3a2b93['chatLog'][_0x3eec77(0x6bf)])??''),typeof _0x1de840=='string'&&(_0x1de840=this['replaceVariables'](_0x1de840,_0x3a2b93[_0x3eec77(0x583)][_0x3eec77(0x6bf)])??'');try{switch(_0x4f6e57[_0x3eec77(0x3c8)]){case _0x3eec77(0x6bc):return _0x4efded===_0x1de840;case'notEqual':return _0x4efded!==_0x1de840;case _0x3eec77(0x780):return _0x4efded[_0x3eec77(0x2fb)](_0x1de840);case _0x3eec77(0x541):return!_0x4efded['includes'](_0x1de840);case _0x3eec77(0x59a):return parseFloat(_0x4efded)>parseFloat(_0x1de840);case _0x3eec77(0x5e0):return parseFloat(_0x4efded)<parseFloat(_0x1de840);case _0x3eec77(0x3d9):return _0x4efded!=='';case _0x3eec77(0x69d):return _0x4efded==='';case _0x3eec77(0x7a2):return new RegExp(_0x1de840)[_0x3eec77(0x6f2)](_0x4efded);case'notMatchRegex':return!new RegExp(_0x1de840)[_0x3eec77(0x6f2)](_0x4efded);default:return!0x1;}}catch(_0x5bf12f){return console[_0x3eec77(0x6aa)](_0x3eec77(0x3b6)+_0x5bf12f),!0x1;}}['processConditionsTest'](_0x93f5){const _0x1cafdc=a0_0x397951;let _0x81c9f7=!0x0,_0x4960a2=null;for(let _0x276508 of _0x93f5){let _0x3df403=this['evaluateConditionTest'](_0x276508);if(_0x4960a2==='or'&&_0x3df403){_0x81c9f7=!0x0;break;}if(_0x4960a2===_0x1cafdc(0x3fd)&&!_0x3df403){_0x81c9f7=!0x1;break;}_0x4960a2=_0x276508['OrAnd'];}return _0x81c9f7;}['evaluateConditionTest'](_0x4e88db){const _0xeb04b8=a0_0x397951;let _0xe65999=_0x4e88db['firstValue'],_0x34c869=_0x4e88db[_0xeb04b8(0x4e2)];try{switch(_0x4e88db[_0xeb04b8(0x3c8)]){case _0xeb04b8(0x6bc):return String(_0xe65999)===String(_0x34c869);case'notEqual':return String(_0xe65999)!==String(_0x34c869);case _0xeb04b8(0x780):return String(_0xe65999)['includes'](String(_0x34c869));case _0xeb04b8(0x541):return!String(_0xe65999)['includes'](String(_0x34c869));case _0xeb04b8(0x59a):return parseFloat(String(_0xe65999))>parseFloat(String(_0x34c869));case _0xeb04b8(0x5e0):return parseFloat(String(_0xe65999))<parseFloat(String(_0x34c869));case _0xeb04b8(0x3d9):return String(_0xe65999)!=='';case _0xeb04b8(0x69d):return String(_0xe65999)==='';case _0xeb04b8(0x7a2):return new RegExp(String(_0x34c869))[_0xeb04b8(0x6f2)](String(_0xe65999));case'notMatchRegex':return!new RegExp(String(_0x34c869))[_0xeb04b8(0x6f2)](String(_0xe65999));default:return!0x1;}}catch(_0x1a8006){return console[_0xeb04b8(0x6aa)](_0xeb04b8(0x3b6)+_0x1a8006),!0x1;}}async['saveTextReply'](_0x2ceb10,_0x226f9b){const _0x5438eb=a0_0x397951;if(this['logger'][_0x5438eb(0x545)](this[_0x5438eb(0x1df)]+'\x20('+this[_0x5438eb(0x5ba)][_0x5438eb(0x341)]+_0x5438eb(0x60a)),!_0x2ceb10||!_0x226f9b)return this['logger'][_0x5438eb(0x6aa)](this['instanceName']+'\x20('+this[_0x5438eb(0x5ba)]['wuid']+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x20609d=_0x226f9b[_0x5438eb(0x2ee)],_0x2917ed=_0x2ceb10[_0x5438eb(0x583)][_0x5438eb(0x35c)][_0x5438eb(0x4cd)]||_0x2ceb10['chatLog'][_0x5438eb(0x35c)]['caption']||_0x2ceb10[_0x5438eb(0x583)][_0x5438eb(0x35c)][_0x5438eb(0x219)];try{_0x2ceb10[_0x5438eb(0x583)][_0x5438eb(0x6bf)]||(_0x2ceb10[_0x5438eb(0x583)][_0x5438eb(0x6bf)]={});let _0x1422cc=_0x2ceb10[_0x5438eb(0x583)][_0x5438eb(0x6bf)][_0x20609d];_0x2ceb10[_0x5438eb(0x583)][_0x5438eb(0x6bf)][_0x20609d]=_0x2917ed;let _0x24dad3={'variable':_0x20609d,'oldValue':_0x1422cc,'newValue':_0x2917ed};this[_0x5438eb(0x75a)](_0x2ceb10,_0x226f9b,_0x24dad3),this[_0x5438eb(0x731)][_0x5438eb(0x545)](this['instanceName']+'\x20('+this[_0x5438eb(0x5ba)][_0x5438eb(0x341)]+'):\x20Conversa\x20atualizada\x20em\x20memória');}catch(_0x340da2){let _0xfa5299={'error':!0x0,'errorLog':_0x340da2[_0x5438eb(0x622)]()};return this['updateConversation'](_0x2ceb10,_0x226f9b,_0xfa5299),this[_0x5438eb(0x731)]['error'](this[_0x5438eb(0x1df)]+'\x20('+this[_0x5438eb(0x5ba)][_0x5438eb(0x341)]+_0x5438eb(0x2a5)+(_0x340da2 instanceof Error?_0x340da2[_0x5438eb(0x15c)]:JSON['stringify'](_0x340da2,null,0x2))),null;}}async[a0_0x397951(0x68c)](_0x37e8e0,_0x592c1b){const _0x181850=a0_0x397951;if(this[_0x181850(0x731)]['verbose'](this[_0x181850(0x1df)]+'\x20('+this[_0x181850(0x5ba)][_0x181850(0x341)]+_0x181850(0x6d2)),!_0x37e8e0||!_0x592c1b)return this['logger'][_0x181850(0x6aa)](this[_0x181850(0x1df)]+'\x20('+this[_0x181850(0x5ba)][_0x181850(0x341)]+_0x181850(0x23a)),null;let _0x41f791=Date[_0x181850(0x287)](),_0x28c9b7=parseInt(_0x592c1b[_0x181850(0x450)],0xa);if(isNaN(_0x28c9b7))return this[_0x181850(0x731)]['error'](this[_0x181850(0x1df)]+'\x20('+this['instance'][_0x181850(0x341)]+_0x181850(0x273)),null;let _0x37a654={'newStoppedUntil':_0x41f791+_0x28c9b7*0x3c*0x3e8};return await this[_0x181850(0x75a)](_0x37e8e0,_0x592c1b,_0x37a654,!0x0),null;}async['processUazapi'](_0x127c46,_0x1ceb97){const _0x4b0043=a0_0x397951;try{switch(_0x1ceb97['uazapi'][_0x4b0043(0x39b)]){case _0x4b0043(0x72e):await this[_0x4b0043(0x59b)](_0x127c46,_0x1ceb97);break;case _0x4b0043(0x289):await this[_0x4b0043(0x6cc)](_0x127c46,_0x1ceb97);break;case _0x4b0043(0x261):await this[_0x4b0043(0x508)](_0x127c46,_0x1ceb97);break;case _0x4b0043(0x4e1):await this[_0x4b0043(0x6a6)](_0x127c46,_0x1ceb97);break;case _0x4b0043(0x22c):await this[_0x4b0043(0x2ce)](_0x127c46,_0x1ceb97);break;case _0x4b0043(0x39f):await this[_0x4b0043(0x401)](_0x127c46,_0x1ceb97);break;case _0x4b0043(0x184):await this['uazapiSendMenu'](_0x127c46,_0x1ceb97);break;case _0x4b0043(0x6cf):await this[_0x4b0043(0x3bd)](_0x127c46,_0x1ceb97);break;default:this[_0x4b0043(0x731)][_0x4b0043(0x6aa)](this[_0x4b0043(0x1df)]+'\x20('+this[_0x4b0043(0x5ba)]['wuid']+_0x4b0043(0x6dc)+_0x1ceb97[_0x4b0043(0x28d)][_0x4b0043(0x39b)]);}}catch(_0x58f6e8){this[_0x4b0043(0x731)][_0x4b0043(0x6aa)](this[_0x4b0043(0x1df)]+'\x20('+this['instance'][_0x4b0043(0x341)]+'):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20'+(_0x58f6e8 instanceof Error?_0x58f6e8[_0x4b0043(0x15c)]:JSON[_0x4b0043(0x38d)](_0x58f6e8,null,0x2)));}}async[a0_0x397951(0x75a)](_0x1d3f9f,_0x1b6e0e,_0x156584,_0x2c7e5c=!0x1,_0x3f106e=!0x1){const _0x42f424=a0_0x397951;_0x1d3f9f['chatLog'][_0x42f424(0x5f7)]||(_0x1d3f9f[_0x42f424(0x583)]['blockLogs']=[]);let _0x45f754=(_0x1d3f9f[_0x42f424(0x583)][_0x42f424(0x5f7)]?.[_0x42f424(0x4c6)]??0x0)+0x1,_0x238952=_0x1d3f9f[_0x42f424(0x583)][_0x42f424(0x5f7)][_0x42f424(0x6ac)](_0x3a094b=>String(_0x3a094b[_0x42f424(0x2a6)])===String(_0x1b6e0e['_id']))['length']+0x1,_0x109669=_0x156584?.['onTime']??Date[_0x42f424(0x287)](),_0x5ef45a=_0x156584?.[_0x42f424(0x6aa)]?_0x156584[_0x42f424(0x3c5)]??_0x156584[_0x42f424(0x6aa)][_0x42f424(0x622)]():void 0x0,_0x5d1fd3={'onTime':_0x109669,'blockId':_0x1b6e0e[_0x42f424(0x578)],'order':_0x45f754,'activatedCount':_0x238952,'error':_0x156584?.['error']??!0x1,'messageId':_0x156584?.[_0x42f424(0x164)],'apiResponse':_0x156584?.[_0x42f424(0x3f7)],'apiResponseString':_0x156584?.[_0x42f424(0x3f7)]?JSON[_0x42f424(0x38d)](_0x156584?.['apiResponse']):void 0x0,'variable':_0x156584?.[_0x42f424(0x3b3)],'oldValue':_0x156584?.[_0x42f424(0x2f3)],'newValue':_0x156584?.[_0x42f424(0x46c)],'newStoppedUntil':_0x156584?.['newStoppedUntil'],'moreLogs':_0x156584?.['moreLogs'],'errorLog':_0x5ef45a};if(_0x156584[_0x42f424(0x718)]&&_0x156584[_0x42f424(0x718)][_0x42f424(0x4c6)]>0x0){let _0x283b80=_0x156584[_0x42f424(0x718)][_0x42f424(0x530)](_0x159289=>this[_0x42f424(0x1c2)](_0x159289,_0x1d3f9f[_0x42f424(0x583)][_0x42f424(0x6bf)]));_0x5d1fd3[_0x42f424(0x718)]=_0x283b80;}_0x1d3f9f['chatLog'][_0x42f424(0x6bf)]||(_0x1d3f9f[_0x42f424(0x583)]['realVariables']={}),_0x1d3f9f[_0x42f424(0x583)][_0x42f424(0x6bf)][_0x42f424(0x193)]=String(_0x238952),_0x1d3f9f[_0x42f424(0x583)]['realVariables']['_error']=String(_0x156584[_0x42f424(0x6aa)]??!0x1),_0x1d3f9f[_0x42f424(0x583)][_0x42f424(0x5f7)][_0x42f424(0x367)](_0x5d1fd3),_0x1d3f9f[_0x42f424(0x583)][_0x42f424(0x6d6)]=_0x1b6e0e['_id']['toString'](),_0x1d3f9f[_0x42f424(0x583)]['lastSendMessage']&&(_0x1d3f9f[_0x42f424(0x583)][_0x42f424(0x22a)]=_0x1d3f9f[_0x42f424(0x583)][_0x42f424(0x22a)]),_0x1d3f9f['chatLog'][_0x42f424(0x35c)]&&(_0x1d3f9f[_0x42f424(0x583)][_0x42f424(0x35c)]=_0x1d3f9f['chatLog'][_0x42f424(0x35c)]),_0x1d3f9f[_0x42f424(0x583)]['lastCondition']&&(_0x1d3f9f[_0x42f424(0x583)][_0x42f424(0x4ef)]=_0x1d3f9f[_0x42f424(0x583)][_0x42f424(0x4ef)]),_0x3f106e&&(_0x1d3f9f[_0x42f424(0x51c)]=_0x42f424(0x488)),_0x2c7e5c?this[_0x42f424(0x482)](_0x1d3f9f):this['goNextblock'](_0x1d3f9f,_0x1b6e0e);}[a0_0x397951(0x1c2)](_0x30713a,_0x2282b5){const _0x447a0e=a0_0x397951;return _0x30713a[_0x447a0e(0x4cf)](/\{\{([^}]+)\}\}/g,(_0x1fe14e,_0x4460e4)=>_0x2282b5[_0x4460e4]?'{{'+_0x4460e4+'}}\x20->\x20\x22'+_0x2282b5[_0x4460e4]+'\x22':'{{'+_0x4460e4+_0x447a0e(0x262));}async[a0_0x397951(0x482)](_0x26c79d){const _0x103fe=a0_0x397951;try{let _0x22ae9b=Object[_0x103fe(0x65c)](_0x26c79d['chatLog'][_0x103fe(0x6bf)])[_0x103fe(0x530)](([_0x170130,_0x197a67])=>({'name':_0x170130,'value':_0x197a67})),_0x57e91f={'status':_0x26c79d['status'],'blocks':_0x26c79d[_0x103fe(0x298)],'waitingMenu_id':_0x26c79d[_0x103fe(0x425)],'waitingMenu_text':_0x26c79d['waitingMenu_text'],'waitingMenu_replyOptions':_0x26c79d['waitingMenu_replyOptions'],'chatLog':{'lastBlockId':_0x26c79d[_0x103fe(0x583)][_0x103fe(0x6d6)],'lastSendMessage':_0x26c79d[_0x103fe(0x583)][_0x103fe(0x22a)],'lastReceivedMessage':_0x26c79d[_0x103fe(0x583)][_0x103fe(0x35c)],'lastCondition':_0x26c79d[_0x103fe(0x583)][_0x103fe(0x4ef)],'chatVariables':_0x22ae9b,'realVariables':_0x26c79d[_0x103fe(0x583)][_0x103fe(0x6bf)],'blockLogs':_0x26c79d['chatLog'][_0x103fe(0x5f7)]}},_0x30e235=await this[_0x103fe(0x436)][_0x103fe(0x589)]['updateOne'](_0x26c79d[_0x103fe(0x578)],_0x57e91f,this[_0x103fe(0x5ba)]['wuid']);if(_0x30e235){this[_0x103fe(0x731)]['verbose'](this[_0x103fe(0x1df)]+'\x20('+this[_0x103fe(0x5ba)][_0x103fe(0x341)]+'):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20'+_0x30e235['_id']);try{let _0x218173=['nome','nomecompleto',_0x103fe(0x617),_0x103fe(0x74c),_0x103fe(0x51c),_0x103fe(0x631),_0x103fe(0x1d0),_0x103fe(0x568)];if(!this[_0x103fe(0x745)]&&(await this[_0x103fe(0x42c)](),!this['AutomateSystem']))throw new Error(_0x103fe(0x591));let _0x5832a1=this[_0x103fe(0x745)]?.[_0x103fe(0x152)][_0x103fe(0x530)](_0x403e00=>_0x403e00[_0x103fe(0x346)]),_0xa5f241={};Object['entries'](_0x26c79d[_0x103fe(0x583)][_0x103fe(0x6bf)])['forEach'](([_0x3f4355,_0x591b5e])=>{const _0x2bb13f=_0x103fe;_0x218173[_0x2bb13f(0x2fb)](_0x3f4355)&&(_0x3f4355==='tags'&&typeof _0x591b5e==_0x2bb13f(0x22b)?_0xa5f241[_0x3f4355]=_0x591b5e[_0x2bb13f(0x4dc)](',')[_0x2bb13f(0x530)](_0x42bbb2=>_0x42bbb2[_0x2bb13f(0x38f)]())[_0x2bb13f(0x6ac)](_0x8b4ce9=>_0x8b4ce9!==''):_0xa5f241[_0x3f4355]=_0x591b5e);});let _0x5b4c09=_0x26c79d[_0x103fe(0x583)][_0x103fe(0x5f7)][_0x26c79d[_0x103fe(0x583)]['blockLogs'][_0x103fe(0x4c6)]-0x1];if(_0x5b4c09){let _0x32e7db=_0x5b4c09[_0x103fe(0x21f)];_0x32e7db!==void 0x0&&(_0xa5f241[_0x103fe(0x5cf)]=_0x32e7db[_0x103fe(0x622)]());}let _0x445d45=_0x22ae9b[_0x103fe(0x6ac)](_0x3b0603=>_0x5832a1['includes'](_0x3b0603[_0x103fe(0x346)]));this['logger'][_0x103fe(0x545)](this[_0x103fe(0x1df)]+'\x20('+this[_0x103fe(0x5ba)][_0x103fe(0x341)]+'):\x20leadInfoVariables'),this[_0x103fe(0x731)][_0x103fe(0x545)](_0xa5f241),this['logger']['verbose'](this[_0x103fe(0x1df)]+'\x20('+this['instance'][_0x103fe(0x341)]+_0x103fe(0x245)),this[_0x103fe(0x731)][_0x103fe(0x545)](_0x445d45);let _0x1ea01f=_0x445d45[_0x103fe(0x530)](_0x3585f0=>{const _0x4d9ade=_0x103fe;let _0x44e582=this['AutomateSystem']?.[_0x4d9ade(0x152)][_0x4d9ade(0x317)](_0x67d895=>_0x67d895[_0x4d9ade(0x346)]===_0x3585f0[_0x4d9ade(0x346)]);if(!_0x44e582)throw new Error(_0x4d9ade(0x19f)+_0x3585f0['name']);return{'_id':_0x44e582[_0x4d9ade(0x578)],'value':_0x3585f0[_0x4d9ade(0x15f)]};});this[_0x103fe(0x731)][_0x103fe(0x545)](this[_0x103fe(0x1df)]+'\x20('+this['instance'][_0x103fe(0x341)]+'):\x20transformedCustomFieldVariables'),this[_0x103fe(0x731)]['verbose'](_0x1ea01f),await this['saveChatVariables'](_0x26c79d[_0x103fe(0x686)],_0xa5f241,_0x1ea01f);}catch(_0x115c6b){this[_0x103fe(0x731)][_0x103fe(0x6aa)](this[_0x103fe(0x1df)]+'\x20('+this[_0x103fe(0x5ba)][_0x103fe(0x341)]+_0x103fe(0x203)+(_0x115c6b instanceof Error?_0x115c6b[_0x103fe(0x15c)]:JSON[_0x103fe(0x38d)](_0x115c6b,null,0x2)));}}else this[_0x103fe(0x731)][_0x103fe(0x6aa)](this[_0x103fe(0x1df)]+'\x20('+this['instance'][_0x103fe(0x341)]+_0x103fe(0x576));}catch(_0x1b671a){this[_0x103fe(0x731)][_0x103fe(0x6aa)](this[_0x103fe(0x1df)]+'\x20('+this['instance'][_0x103fe(0x341)]+_0x103fe(0x737)+(_0x1b671a instanceof Error?_0x1b671a[_0x103fe(0x15c)]:JSON[_0x103fe(0x38d)](_0x1b671a,null,0x2)));}}async['saveChatVariables'](_0x18a743,_0x2ca38d,_0x35f2f3){const _0x5cbc77=a0_0x397951;try{let _0x15d42b={'leadInfo.leadnome':_0x2ca38d[_0x5cbc77(0x61c)],'leadInfo.nomecompleto':_0x2ca38d[_0x5cbc77(0x716)],'leadInfo.email':_0x2ca38d[_0x5cbc77(0x617)],'leadInfo.cpf':_0x2ca38d[_0x5cbc77(0x74c)],'leadInfo.status':_0x2ca38d[_0x5cbc77(0x51c)],'leadInfo.notas':_0x2ca38d[_0x5cbc77(0x631)],'leadInfo.responsavelid':_0x2ca38d[_0x5cbc77(0x1d0)],'leadInfo.tags':_0x2ca38d[_0x5cbc77(0x568)],'leadInfo.customFields':_0x35f2f3};if(_0x5cbc77(0x5cf)in _0x2ca38d){let _0x25feda=_0x2ca38d[_0x5cbc77(0x5cf)];_0x15d42b[_0x5cbc77(0x255)]=_0x25feda?Number(_0x25feda):null;}let _0x3f04dc=await this[_0x5cbc77(0x436)]['chat'][_0x5cbc77(0x30a)]({'where':{'_id':_0x18a743}},_0x15d42b,this[_0x5cbc77(0x5ba)]['wuid']);_0x3f04dc?(this['logger'][_0x5cbc77(0x545)](this[_0x5cbc77(0x1df)]+'\x20('+this['instance']['wuid']+_0x5cbc77(0x4fb)+_0x3f04dc['_id']),q(this[_0x5cbc77(0x1df)],_0x5cbc77(0x740),{'chat':_0x3f04dc})):this[_0x5cbc77(0x731)][_0x5cbc77(0x6aa)](this[_0x5cbc77(0x1df)]+'\x20('+this[_0x5cbc77(0x5ba)]['wuid']+_0x5cbc77(0x251));}catch(_0x1e0f56){this[_0x5cbc77(0x731)][_0x5cbc77(0x6aa)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20'+(_0x1e0f56 instanceof Error?_0x1e0f56['message']:JSON[_0x5cbc77(0x38d)](_0x1e0f56,null,0x2)));}}async[a0_0x397951(0x775)](_0x588d7,_0x297ea4){const _0x26876b=a0_0x397951;this['logger'][_0x26876b(0x545)](this[_0x26876b(0x1df)]+'\x20('+this[_0x26876b(0x5ba)]['wuid']+_0x26876b(0x243)+_0x297ea4);try{let _0x39287b=await this['repository'][_0x26876b(0x2e4)][_0x26876b(0x30a)]({'where':{'_id':_0x588d7['remoteJid']}},{'leadInfo.desativadoFluxoAte':_0x297ea4},this['instance']['wuid']);this[_0x26876b(0x731)]['verbose'](this[_0x26876b(0x1df)]+'\x20('+this['instance'][_0x26876b(0x341)]+'):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20'+_0x588d7[_0x26876b(0x578)]),this[_0x26876b(0x731)]['verbose'](this[_0x26876b(0x1df)]+'\x20('+this[_0x26876b(0x5ba)][_0x26876b(0x341)]+_0x26876b(0x243)+JSON[_0x26876b(0x38d)](_0x39287b,null,0x2)),_0x39287b&&q(this[_0x26876b(0x1df)],_0x26876b(0x740),{'chat':_0x39287b});}catch(_0x289696){this[_0x26876b(0x731)]['error'](this[_0x26876b(0x1df)]+'\x20('+this[_0x26876b(0x5ba)]['wuid']+_0x26876b(0x664)+(_0x289696 instanceof Error?_0x289696[_0x26876b(0x15c)]:JSON[_0x26876b(0x38d)](_0x289696,null,0x2)));}}async[a0_0x397951(0x67a)](_0x438690){const _0x28917e=a0_0x397951;try{this['logger'][_0x28917e(0x545)](this[_0x28917e(0x1df)]+'\x20('+this['instance'][_0x28917e(0x341)]+_0x28917e(0x64a));let _0x495586=_0x438690[_0x28917e(0x4cf)](/\D/g,''),_0x3167f6=await this['repository'][_0x28917e(0x6d4)]['findOne']({'where':{'testingWith':_0x495586}},this[_0x28917e(0x5ba)][_0x28917e(0x341)]);return _0x3167f6||(this[_0x28917e(0x731)][_0x28917e(0x545)](this[_0x28917e(0x1df)]+'\x20('+this[_0x28917e(0x5ba)][_0x28917e(0x341)]+'):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...'),_0x3167f6=await this[_0x28917e(0x436)][_0x28917e(0x6d4)][_0x28917e(0x3c4)]({'where':{'default':!0x0}},this[_0x28917e(0x5ba)][_0x28917e(0x341)])),_0x3167f6||(this[_0x28917e(0x731)][_0x28917e(0x545)](this['instanceName']+'\x20('+this[_0x28917e(0x5ba)][_0x28917e(0x341)]+_0x28917e(0x469)),null);}catch(_0x25ac6f){return this[_0x28917e(0x731)][_0x28917e(0x6aa)](this['instanceName']+'\x20('+this[_0x28917e(0x5ba)][_0x28917e(0x341)]+'):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20'+(_0x25ac6f instanceof Error?_0x25ac6f[_0x28917e(0x15c)]:JSON[_0x28917e(0x38d)](_0x25ac6f,null,0x2))),null;}}async[a0_0x397951(0x538)](_0xa36509,_0x126f2a){const _0x3bb474=a0_0x397951;try{let _0x5d6093=!!_0x126f2a[_0x3bb474(0x219)],_0x4a3f5a=_0x126f2a[_0x3bb474(0x55e)],_0x2746f6=null;if(this[_0x3bb474(0x731)][_0x3bb474(0x545)](this[_0x3bb474(0x1df)]+'\x20('+this[_0x3bb474(0x5ba)][_0x3bb474(0x341)]+_0x3bb474(0x702)+_0x5d6093+_0x3bb474(0x1e5)+_0x4a3f5a),_0x5d6093){this[_0x3bb474(0x731)][_0x3bb474(0x545)](this[_0x3bb474(0x1df)]+'\x20('+this['instance'][_0x3bb474(0x341)]+_0x3bb474(0x64d));let _0x3f68be={'where':{'remoteJid':_0xa36509,'waitingMenu_id':_0x4a3f5a}};if(_0x2746f6=await this[_0x3bb474(0x436)][_0x3bb474(0x589)][_0x3bb474(0x3c4)](_0x3f68be,this[_0x3bb474(0x5ba)]['wuid']),!_0x2746f6)return this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x3bb474(0x5ba)][_0x3bb474(0x341)]+_0x3bb474(0x5e2)),null;let _0x2bd80a=Date[_0x3bb474(0x287)](),_0x175d81=_0x2746f6?.['minutesToClose']||0x0,_0x426849=_0x2bd80a-_0x175d81*0x3c*0x3e8;if(_0x2746f6[_0x3bb474(0x615)]<_0x426849){this['logger']['verbose'](this[_0x3bb474(0x1df)]+'\x20('+this['instance'][_0x3bb474(0x341)]+_0x3bb474(0x192));let _0x2c3163={'number':_0x2746f6[_0x3bb474(0x686)],'options':{'delay':0x0},'textMessage':{'text':_0x2746f6[_0x3bb474(0x722)]}};await this[_0x3bb474(0x6b8)](_0x2c3163);let _0x53821a={'status':_0x3bb474(0x488),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x3bb474(0x436)][_0x3bb474(0x589)][_0x3bb474(0x30a)](_0x2746f6[_0x3bb474(0x578)],_0x53821a,this['instance']['wuid']),null;}return _0x2746f6[_0x3bb474(0x615)]=Date[_0x3bb474(0x287)](),_0x2746f6[_0x3bb474(0x583)][_0x3bb474(0x35c)]=_0x126f2a,_0x2746f6;}else{this[_0x3bb474(0x731)][_0x3bb474(0x545)](this[_0x3bb474(0x1df)]+'\x20('+this['instance'][_0x3bb474(0x341)]+'):\x20'+this[_0x3bb474(0x5ba)][_0x3bb474(0x341)]+_0x3bb474(0x1d2)),this[_0x3bb474(0x731)][_0x3bb474(0x545)](this[_0x3bb474(0x1df)]+'\x20('+this['instance']['wuid']+_0x3bb474(0x55a));let _0x2020e2={'where':{'remoteJid':_0xa36509,'status':'open'}};if(_0x2746f6=await this[_0x3bb474(0x436)][_0x3bb474(0x589)][_0x3bb474(0x3c4)](_0x2020e2,this[_0x3bb474(0x5ba)]['wuid']),!_0x2746f6){let _0x5c7ea2=await this[_0x3bb474(0x67a)](_0xa36509);if(_0x5c7ea2&&(_0x2746f6=await this[_0x3bb474(0x70a)](_0x5c7ea2,_0x126f2a[_0x3bb474(0x226)],_0x126f2a)),!_0x2746f6)return null;}let _0x26cca9=Date[_0x3bb474(0x287)](),_0x39913b=_0x2746f6?.[_0x3bb474(0x799)]||0x0,_0x1c62dc=_0x26cca9-_0x39913b*0x3c*0x3e8;if(this['logger'][_0x3bb474(0x545)](this['instanceName']+'\x20('+this[_0x3bb474(0x5ba)][_0x3bb474(0x341)]+'):\x20Current\x20Time:\x20'+_0x26cca9+_0x3bb474(0x3e6)+_0x39913b+_0x3bb474(0x23b)+_0x1c62dc),this[_0x3bb474(0x731)][_0x3bb474(0x545)](this[_0x3bb474(0x1df)]+'\x20('+this[_0x3bb474(0x5ba)][_0x3bb474(0x341)]+'):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot'),this[_0x3bb474(0x731)][_0x3bb474(0x545)](this[_0x3bb474(0x1df)]+'\x20('+this[_0x3bb474(0x5ba)][_0x3bb474(0x341)]+'):\x20conversation.lastInteraction:\x20'+_0x2746f6[_0x3bb474(0x615)]),this[_0x3bb474(0x731)]['verbose'](this[_0x3bb474(0x1df)]+'\x20('+this[_0x3bb474(0x5ba)]['wuid']+'):\x20expirationTime:\x20'+_0x1c62dc),_0x2746f6['lastInteraction']<_0x1c62dc){this[_0x3bb474(0x731)][_0x3bb474(0x545)](this[_0x3bb474(0x1df)]+'\x20('+this[_0x3bb474(0x5ba)][_0x3bb474(0x341)]+_0x3bb474(0x268));let _0x53cf20=await this[_0x3bb474(0x67a)](_0xa36509);if(_0x53cf20===null)return null;_0x2746f6&&await this[_0x3bb474(0x436)]['flowConversation'][_0x3bb474(0x30a)](_0x2746f6[_0x3bb474(0x578)],{'status':_0x3bb474(0x488)},this[_0x3bb474(0x5ba)][_0x3bb474(0x341)]),_0x2746f6=await this[_0x3bb474(0x70a)](_0x53cf20,_0x126f2a[_0x3bb474(0x226)],_0x126f2a);}return _0x2746f6[_0x3bb474(0x615)]=_0x26cca9,_0x2746f6['chatLog'][_0x3bb474(0x35c)]=_0x126f2a,_0x2746f6;}}catch(_0x243d42){return this['logger'][_0x3bb474(0x6aa)](this['instanceName']+'\x20('+this[_0x3bb474(0x5ba)][_0x3bb474(0x341)]+_0x3bb474(0x62b)+(_0x243d42 instanceof Error?_0x243d42['message']:JSON[_0x3bb474(0x38d)](_0x243d42,null,0x2))),null;}}async[a0_0x397951(0x70a)](_0x134410,_0x421026,_0x4f986e){const _0x24e5d9=a0_0x397951;this['logger'][_0x24e5d9(0x545)](this['instanceName']+'\x20('+this[_0x24e5d9(0x5ba)][_0x24e5d9(0x341)]+_0x24e5d9(0x1ac));try{let _0x43978c=require('mongodb')['ObjectId'],_0x5b1deb=Date[_0x24e5d9(0x287)](),_0x1bc6ff=_0x24e5d9(0x16e),_0xad4d64=_0x421026[_0x24e5d9(0x28f)]?null:_0x4f986e,_0x7e7c05=_0x421026[_0x24e5d9(0x28f)]?_0x4f986e:null,_0xe9140a=_0x421026[_0x24e5d9(0x686)];await this['closeExistingConversations'](_0xe9140a);let _0x3a4975={..._0x134410,'chatLog':null},_0x3b0946=await this[_0x24e5d9(0x3d8)](_0x3a4975['variables']),_0x11396f=await this[_0x24e5d9(0x1ca)](_0xe9140a),_0x43ac1b={..._0x3b0946,..._0x11396f,'_remoteJid':_0xe9140a},_0x3b036d={'lastReceivedMessage':_0xad4d64,'lastSendMessage':_0x7e7c05,'lastBlockId':_0x1bc6ff,'lastCondition':!0x0,'realVariables':_0x43ac1b};_0x3a4975['chatLog']=_0x3b036d,delete _0x3a4975[_0x24e5d9(0x578)],_0x3a4975['_id']=new _0x43978c(),_0x3a4975['lastInteraction']=_0x5b1deb,_0x3a4975['status']=_0x24e5d9(0x612),_0x3a4975[_0x24e5d9(0x686)]=_0xe9140a;let _0x12a777=await this[_0x24e5d9(0x436)][_0x24e5d9(0x589)][_0x24e5d9(0x30a)](_0x3a4975['_id'],_0x3a4975,this[_0x24e5d9(0x5ba)][_0x24e5d9(0x341)]);return this[_0x24e5d9(0x731)][_0x24e5d9(0x545)](this[_0x24e5d9(0x1df)]+'\x20('+this[_0x24e5d9(0x5ba)][_0x24e5d9(0x341)]+_0x24e5d9(0x6dd)),_0x12a777?_0x3a4975:null;}catch(_0x263719){return this[_0x24e5d9(0x731)][_0x24e5d9(0x6aa)](this[_0x24e5d9(0x1df)]+'\x20('+this['instance'][_0x24e5d9(0x341)]+_0x24e5d9(0x426)+(_0x263719 instanceof Error?_0x263719[_0x24e5d9(0x15c)]:JSON[_0x24e5d9(0x38d)](_0x263719,null,0x2))),_0x263719;}}async[a0_0x397951(0x59b)](_0x2dc663,_0x1e96a4){const _0x348676=a0_0x397951;let _0x5087fb=_0x2dc663[_0x348676(0x686)];_0x1e96a4[_0x348676(0x28d)][_0x348676(0x686)]&&_0x1e96a4[_0x348676(0x28d)]['remoteJid']['trim']()!==''&&(_0x5087fb=_0x1e96a4[_0x348676(0x28d)]['remoteJid'][_0x348676(0x38f)]()),this[_0x348676(0x731)][_0x348676(0x545)](this[_0x348676(0x1df)]+'\x20('+this['instance']['wuid']+'):\x20Enviando\x20texto');let _0xd7d614={'number':_0x5087fb,'options':{'delay':_0x1e96a4[_0x348676(0x28d)][_0x348676(0x561)]},'textMessage':{'text':_0x1e96a4[_0x348676(0x28d)]['text']}};try{let _0x401634=await this[_0x348676(0x6b8)](_0xd7d614);if(_0x401634){let _0x147a59={'_id':_0x401634[_0x348676(0x226)]['id'],'_fromMe':_0x401634[_0x348676(0x226)][_0x348676(0x28f)],'_remoteJid':_0x401634[_0x348676(0x226)]['remoteJid']};_0x2dc663[_0x348676(0x583)][_0x348676(0x6d6)]=_0x1e96a4[_0x348676(0x578)][_0x348676(0x622)]();let {message_normalized:_0x5cb2ef}=this[_0x348676(0x25d)](_0x401634[_0x348676(0x15c)],_(_0x401634[_0x348676(0x15c)]),null);_0x2dc663[_0x348676(0x583)][_0x348676(0x22a)]=await _0x5cb2ef;let _0x389895={'messageId':_0x401634[_0x348676(0x226)]['id']},_0x45c87e=_0x2dc663['chatLog']['realVariables'];Object[_0x348676(0x3de)](_0x45c87e,_0x147a59),_0x2dc663[_0x348676(0x583)][_0x348676(0x6bf)]=_0x45c87e,this['updateConversation'](_0x2dc663,_0x1e96a4,_0x389895);}else{let _0x2f4af3={'error':!0x0};this['updateConversation'](_0x2dc663,_0x1e96a4,_0x2f4af3),this[_0x348676(0x731)][_0x348676(0x6aa)](this['instanceName']+'\x20('+this[_0x348676(0x5ba)]['wuid']+_0x348676(0x213));}}catch(_0x3bb87b){let _0x3210ec={'error':!0x0,'errorLog':_0x3bb87b[_0x348676(0x622)]()};this['updateConversation'](_0x2dc663,_0x1e96a4,_0x3210ec),this[_0x348676(0x731)][_0x348676(0x6aa)](this[_0x348676(0x1df)]+'\x20('+this[_0x348676(0x5ba)][_0x348676(0x341)]+_0x348676(0x353)+(_0x3bb87b instanceof Error?_0x3bb87b[_0x348676(0x15c)]:JSON[_0x348676(0x38d)](_0x3bb87b,null,0x2)));}}async['uazapiSendMedia'](_0x5f2004,_0xf3d880){const _0x4a5879=a0_0x397951;let _0xa31553=_0x5f2004[_0x4a5879(0x686)];_0xf3d880[_0x4a5879(0x28d)][_0x4a5879(0x686)]&&_0xf3d880[_0x4a5879(0x28d)]['remoteJid']['trim']()!==''&&(_0xa31553=_0xf3d880[_0x4a5879(0x28d)][_0x4a5879(0x686)]['trim']()),this[_0x4a5879(0x731)][_0x4a5879(0x545)](this['instanceName']+'\x20('+this['instance'][_0x4a5879(0x341)]+'):\x20Enviando\x20mídia');let _0x1bddaf={'number':_0xa31553,'options':{'delay':_0xf3d880[_0x4a5879(0x28d)][_0x4a5879(0x561)]},'mediaMessage':{'mediatype':_0xf3d880['uazapi']['mediatype'],'caption':_0xf3d880[_0x4a5879(0x28d)][_0x4a5879(0x643)],'media':_0xf3d880[_0x4a5879(0x28d)][_0x4a5879(0x6d9)],'fileName':_0xf3d880[_0x4a5879(0x28d)][_0x4a5879(0x20e)]}};try{let _0x4db9ea=await this[_0x4a5879(0x3f1)](_0x1bddaf);if(_0x4db9ea){let _0x3a2415={'_id':_0x4db9ea[_0x4a5879(0x226)]['id'],'_fromMe':_0x4db9ea[_0x4a5879(0x226)][_0x4a5879(0x28f)],'_remoteJid':_0x4db9ea[_0x4a5879(0x226)][_0x4a5879(0x686)]};_0x5f2004['chatLog'][_0x4a5879(0x6d6)]=_0xf3d880[_0x4a5879(0x578)][_0x4a5879(0x622)]();let {message_normalized:_0xe8f884}=this[_0x4a5879(0x25d)](_0x4db9ea[_0x4a5879(0x15c)],_(_0x4db9ea[_0x4a5879(0x15c)]),null);_0x5f2004[_0x4a5879(0x583)][_0x4a5879(0x22a)]=await _0xe8f884;let _0x59451b={'messageId':_0x4db9ea[_0x4a5879(0x226)]['id']},_0x410f13=_0x5f2004[_0x4a5879(0x583)][_0x4a5879(0x6bf)];Object['assign'](_0x410f13,_0x3a2415),_0x5f2004[_0x4a5879(0x583)][_0x4a5879(0x6bf)]=_0x410f13,this['updateConversation'](_0x5f2004,_0xf3d880,_0x59451b);}else{let _0x28d8b6={'error':!0x0};this[_0x4a5879(0x75a)](_0x5f2004,_0xf3d880,_0x28d8b6),this['logger'][_0x4a5879(0x6aa)](this[_0x4a5879(0x1df)]+'\x20('+this[_0x4a5879(0x5ba)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.');}}catch(_0xc1c6ad){let _0x472224={'error':!0x0,'errorLog':_0xc1c6ad[_0x4a5879(0x622)]()};this[_0x4a5879(0x75a)](_0x5f2004,_0xf3d880,_0x472224),this[_0x4a5879(0x731)][_0x4a5879(0x6aa)](this[_0x4a5879(0x1df)]+'\x20('+this[_0x4a5879(0x5ba)][_0x4a5879(0x341)]+_0x4a5879(0x53b)+(_0xc1c6ad instanceof Error?_0xc1c6ad[_0x4a5879(0x15c)]:JSON['stringify'](_0xc1c6ad,null,0x2)));}}async[a0_0x397951(0x508)](_0x3e93eb,_0x58416d){const _0x49eaab=a0_0x397951;let _0x5187df=_0x3e93eb[_0x49eaab(0x686)];_0x58416d['uazapi']['remoteJid']&&_0x58416d[_0x49eaab(0x28d)][_0x49eaab(0x686)][_0x49eaab(0x38f)]()!==''&&(_0x5187df=_0x58416d[_0x49eaab(0x28d)][_0x49eaab(0x686)][_0x49eaab(0x38f)]()),this[_0x49eaab(0x731)][_0x49eaab(0x545)](this[_0x49eaab(0x1df)]+'\x20('+this[_0x49eaab(0x5ba)][_0x49eaab(0x341)]+'):\x20Enviando\x20localização');let _0x5101c8={'number':_0x5187df,'options':{'delay':_0x58416d[_0x49eaab(0x28d)][_0x49eaab(0x561)]},'locationMessage':{'name':_0x58416d['uazapi'][_0x49eaab(0x346)],'address':_0x58416d[_0x49eaab(0x28d)][_0x49eaab(0x1a2)],'latitude':_0x58416d['uazapi'][_0x49eaab(0x33c)],'longitude':_0x58416d[_0x49eaab(0x28d)][_0x49eaab(0x462)]}};try{let _0x5e01ea=await this[_0x49eaab(0x27d)](_0x5101c8);if(_0x5e01ea){let _0x5665c0={'_id':_0x5e01ea[_0x49eaab(0x226)]['id'],'_fromMe':_0x5e01ea['key']['fromMe'],'_remoteJid':_0x5e01ea[_0x49eaab(0x226)][_0x49eaab(0x686)]};_0x3e93eb[_0x49eaab(0x583)]['lastBlockId']=_0x58416d[_0x49eaab(0x578)][_0x49eaab(0x622)]();let {message_normalized:_0x4835d0}=this[_0x49eaab(0x25d)](_0x5e01ea['message'],_(_0x5e01ea[_0x49eaab(0x15c)]),null);_0x3e93eb[_0x49eaab(0x583)][_0x49eaab(0x22a)]=await _0x4835d0;let _0x12b2d1={'messageId':_0x5e01ea['key']['id']},_0x4b0f97=_0x3e93eb[_0x49eaab(0x583)][_0x49eaab(0x6bf)];Object[_0x49eaab(0x3de)](_0x4b0f97,_0x5665c0),_0x3e93eb['chatLog']['realVariables']=_0x4b0f97,this[_0x49eaab(0x75a)](_0x3e93eb,_0x58416d,_0x12b2d1);}else{let _0x13593b={'error':!0x0};this[_0x49eaab(0x75a)](_0x3e93eb,_0x58416d,_0x13593b),this[_0x49eaab(0x731)][_0x49eaab(0x6aa)](this[_0x49eaab(0x1df)]+'\x20('+this['instance']['wuid']+_0x49eaab(0x516));}}catch(_0x18dbf1){let _0xc11b19={'error':!0x0,'errorLog':_0x18dbf1[_0x49eaab(0x622)]()};this[_0x49eaab(0x75a)](_0x3e93eb,_0x58416d,_0xc11b19),this[_0x49eaab(0x731)][_0x49eaab(0x6aa)](this[_0x49eaab(0x1df)]+'\x20('+this[_0x49eaab(0x5ba)][_0x49eaab(0x341)]+_0x49eaab(0x35b)+(_0x18dbf1 instanceof Error?_0x18dbf1[_0x49eaab(0x15c)]:JSON[_0x49eaab(0x38d)](_0x18dbf1,null,0x2)));}}async[a0_0x397951(0x6a6)](_0x1b2396,_0x2cf6f2){const _0x5538c4=a0_0x397951;let _0x3a7e4f=_0x1b2396[_0x5538c4(0x686)];_0x2cf6f2['uazapi'][_0x5538c4(0x686)]&&_0x2cf6f2[_0x5538c4(0x28d)]['remoteJid'][_0x5538c4(0x38f)]()!==''&&(_0x3a7e4f=_0x2cf6f2[_0x5538c4(0x28d)][_0x5538c4(0x686)][_0x5538c4(0x38f)]()),this[_0x5538c4(0x731)][_0x5538c4(0x545)](this[_0x5538c4(0x1df)]+'\x20('+this[_0x5538c4(0x5ba)][_0x5538c4(0x341)]+'):\x20Enviando\x20áudio');let _0x59e3aa={'number':_0x3a7e4f,'options':{'delay':_0x2cf6f2[_0x5538c4(0x28d)][_0x5538c4(0x561)]},'audioMessage':{'audio':_0x2cf6f2['uazapi']['audio']}};try{let _0x175632=await this['audioWhatsapp'](_0x59e3aa);if(_0x175632){let _0x37a1bb={'_id':_0x175632[_0x5538c4(0x226)]['id'],'_fromMe':_0x175632[_0x5538c4(0x226)]['fromMe'],'_remoteJid':_0x175632['key'][_0x5538c4(0x686)]};_0x1b2396[_0x5538c4(0x583)][_0x5538c4(0x6d6)]=_0x2cf6f2['_id'][_0x5538c4(0x622)]();let {message_normalized:_0x5bd0cd}=this[_0x5538c4(0x25d)](_0x175632['message'],_(_0x175632['message']),null);_0x1b2396['chatLog'][_0x5538c4(0x22a)]=await _0x5bd0cd;let _0x7bac57={'messageId':_0x175632['key']['id']},_0x2caac6=_0x1b2396[_0x5538c4(0x583)]['realVariables'];Object['assign'](_0x2caac6,_0x37a1bb),_0x1b2396[_0x5538c4(0x583)]['realVariables']=_0x2caac6,this[_0x5538c4(0x75a)](_0x1b2396,_0x2cf6f2,_0x7bac57);}else{let _0x1bc1dc={'error':!0x0};this[_0x5538c4(0x75a)](_0x1b2396,_0x2cf6f2,_0x1bc1dc),this[_0x5538c4(0x731)]['error'](this[_0x5538c4(0x1df)]+'\x20('+this['instance'][_0x5538c4(0x341)]+_0x5538c4(0x4f2));}}catch(_0x4ec0f8){let _0x20b84f={'error':!0x0,'errorLog':_0x4ec0f8['toString']()};this[_0x5538c4(0x75a)](_0x1b2396,_0x2cf6f2,_0x20b84f),this[_0x5538c4(0x731)][_0x5538c4(0x6aa)](this[_0x5538c4(0x1df)]+'\x20('+this[_0x5538c4(0x5ba)][_0x5538c4(0x341)]+_0x5538c4(0x34f)+(_0x4ec0f8 instanceof Error?_0x4ec0f8[_0x5538c4(0x15c)]:JSON['stringify'](_0x4ec0f8,null,0x2)));}}async[a0_0x397951(0x2ce)](_0x4de575,_0x1c3913){const _0x1b9267=a0_0x397951;let _0x59e458=_0x4de575[_0x1b9267(0x686)];_0x1c3913['uazapi']['remoteJid']&&_0x1c3913['uazapi']['remoteJid'][_0x1b9267(0x38f)]()!==''&&(_0x59e458=_0x1c3913[_0x1b9267(0x28d)][_0x1b9267(0x686)]['trim']()),this['logger'][_0x1b9267(0x545)](this['instanceName']+'\x20('+this['instance'][_0x1b9267(0x341)]+'):\x20Enviando\x20contato');let _0xc652b7={'number':_0x59e458,'options':{'delay':_0x1c3913[_0x1b9267(0x28d)][_0x1b9267(0x561)]},'contactMessage':[{'fullName':_0x1c3913['uazapi'][_0x1b9267(0x2be)],'phoneNumber':_0x1c3913[_0x1b9267(0x28d)][_0x1b9267(0x517)]}]};try{let _0x1acdde=await this[_0x1b9267(0x522)](_0xc652b7);if(_0x1acdde){let _0x29a1d2={'_id':_0x1acdde[_0x1b9267(0x226)]['id'],'_fromMe':_0x1acdde['key'][_0x1b9267(0x28f)],'_remoteJid':_0x1acdde['key'][_0x1b9267(0x686)]};_0x4de575[_0x1b9267(0x583)][_0x1b9267(0x6d6)]=_0x1c3913['_id'][_0x1b9267(0x622)]();let {message_normalized:_0x35819b}=this[_0x1b9267(0x25d)](_0x1acdde[_0x1b9267(0x15c)],_(_0x1acdde[_0x1b9267(0x15c)]),null);_0x4de575[_0x1b9267(0x583)][_0x1b9267(0x22a)]=await _0x35819b;let _0x51315a={'messageId':_0x1acdde['key']['id']},_0x9b0bf6=_0x4de575[_0x1b9267(0x583)][_0x1b9267(0x6bf)];Object[_0x1b9267(0x3de)](_0x9b0bf6,_0x29a1d2),_0x4de575['chatLog'][_0x1b9267(0x6bf)]=_0x9b0bf6,this[_0x1b9267(0x75a)](_0x4de575,_0x1c3913,_0x51315a);}else{let _0x234818={'error':!0x0};this[_0x1b9267(0x75a)](_0x4de575,_0x1c3913,_0x234818),this[_0x1b9267(0x731)][_0x1b9267(0x6aa)](this[_0x1b9267(0x1df)]+'\x20('+this[_0x1b9267(0x5ba)][_0x1b9267(0x341)]+_0x1b9267(0x1c7));}}catch(_0x298795){let _0x3b198={'error':!0x0,'errorLog':_0x298795[_0x1b9267(0x622)]()};this[_0x1b9267(0x75a)](_0x4de575,_0x1c3913,_0x3b198),this[_0x1b9267(0x731)][_0x1b9267(0x6aa)](this['instanceName']+'\x20('+this[_0x1b9267(0x5ba)][_0x1b9267(0x341)]+_0x1b9267(0x6d3)+(_0x298795 instanceof Error?_0x298795['message']:JSON[_0x1b9267(0x38d)](_0x298795,null,0x2)));}}[a0_0x397951(0x322)](_0x15f4e8,_0x22f9b0){const _0x5b19cb=a0_0x397951;for(let _0x4c437a of _0x15f4e8)_0x4c437a[_0x5b19cb(0x49f)]&&(_0x4c437a['option']=this[_0x5b19cb(0x6ef)](_0x4c437a[_0x5b19cb(0x49f)],_0x22f9b0)),_0x4c437a['optionDescription']&&(_0x4c437a[_0x5b19cb(0x5cb)]=this[_0x5b19cb(0x6ef)](_0x4c437a[_0x5b19cb(0x5cb)],_0x22f9b0));}async[a0_0x397951(0x401)](_0x19b55a,_0xb54905){const _0x2338b4=a0_0x397951;let _0x1e045f=_0x19b55a[_0x2338b4(0x686)];_0xb54905[_0x2338b4(0x28d)][_0x2338b4(0x686)]&&_0xb54905[_0x2338b4(0x28d)][_0x2338b4(0x686)][_0x2338b4(0x38f)]()!==''&&(_0x1e045f=_0xb54905[_0x2338b4(0x28d)][_0x2338b4(0x686)][_0x2338b4(0x38f)]()),this['logger']['verbose'](this[_0x2338b4(0x1df)]+'\x20('+this[_0x2338b4(0x5ba)][_0x2338b4(0x341)]+'):\x20Enviando\x20enquete');let _0x40864e=_0x19b55a['replyOptions'][_0x2338b4(0x6ac)](_0x5e67fb=>_0x5e67fb[_0x2338b4(0x2a6)]===_0xb54905[_0x2338b4(0x578)])[_0x2338b4(0x656)]((_0x5c9106,_0x3145ee)=>_0x5c9106[_0x2338b4(0x45a)]-_0x3145ee[_0x2338b4(0x45a)]);this[_0x2338b4(0x322)](_0x40864e,_0x19b55a[_0x2338b4(0x583)][_0x2338b4(0x6bf)]);let _0x427ee6=_0x40864e[_0x2338b4(0x530)](_0x3a5bfd=>_0x3a5bfd[_0x2338b4(0x49f)]),_0x31962a={'number':_0x1e045f,'menuMessage':{'type':_0xb54905['uazapi']['menuType']||'poll','text':_0xb54905[_0x2338b4(0x28d)]['text']||_0xb54905[_0x2338b4(0x28d)][_0x2338b4(0x346)],'footerText':_0xb54905['uazapi']['footerText'],'buttonText':_0xb54905[_0x2338b4(0x28d)][_0x2338b4(0x48f)],'selectableCount':0x1,'choices':_0x427ee6},'options':{'delay':_0xb54905['uazapi']['delay']}};try{let _0x4e1961=await this[_0x2338b4(0x761)](_0x31962a);if(_0x4e1961){let _0x4e29e1={'_id':_0x4e1961[_0x2338b4(0x226)]['id'],'_fromMe':_0x4e1961[_0x2338b4(0x226)][_0x2338b4(0x28f)],'_remoteJid':_0x4e1961[_0x2338b4(0x226)][_0x2338b4(0x686)]};_0xb54905[_0x2338b4(0x28d)]['menuIgnoreNonVotes']===!0x0&&(_0x19b55a[_0x2338b4(0x51c)]=_0x2338b4(0x470),this[_0x2338b4(0x731)][_0x2338b4(0x545)](this['instanceName']+'\x20('+this[_0x2338b4(0x5ba)][_0x2338b4(0x341)]+_0x2338b4(0x646)+_0x19b55a[_0x2338b4(0x51c)])),this[_0x2338b4(0x731)][_0x2338b4(0x545)](this[_0x2338b4(0x1df)]+'\x20('+this[_0x2338b4(0x5ba)]['wuid']+_0x2338b4(0x5cd)+(_0xb54905[_0x2338b4(0x28d)][_0x2338b4(0x346)]||_0xb54905[_0x2338b4(0x28d)][_0x2338b4(0x4cd)])),_0x19b55a[_0x2338b4(0x425)]=_0x4e1961['key']['id'],_0x19b55a['waitingMenu_text']=_0xb54905[_0x2338b4(0x28d)][_0x2338b4(0x346)]||_0xb54905[_0x2338b4(0x28d)]['text'],_0x19b55a[_0x2338b4(0x6da)]=_0x40864e,_0xb54905[_0x2338b4(0x28d)][_0x2338b4(0x1fe)]&&(_0x19b55a[_0x2338b4(0x722)]=_0xb54905[_0x2338b4(0x28d)][_0x2338b4(0x1fe)]),this['logger'][_0x2338b4(0x545)](this['instanceName']+'\x20('+this[_0x2338b4(0x5ba)][_0x2338b4(0x341)]+_0x2338b4(0x2e1)+_0x19b55a[_0x2338b4(0x196)]),_0x19b55a[_0x2338b4(0x583)][_0x2338b4(0x6d6)]=_0xb54905[_0x2338b4(0x578)]['toString']();let {message_normalized:_0x52a3a3}=this[_0x2338b4(0x25d)](_0x4e1961[_0x2338b4(0x15c)],_(_0x4e1961[_0x2338b4(0x15c)]),null);_0x19b55a[_0x2338b4(0x583)][_0x2338b4(0x22a)]=await _0x52a3a3;let _0xfb7b48={'messageId':_0x4e1961['key']['id']},_0x20c202=_0x19b55a[_0x2338b4(0x583)][_0x2338b4(0x6bf)];Object[_0x2338b4(0x3de)](_0x20c202,_0x4e29e1),_0x19b55a[_0x2338b4(0x583)][_0x2338b4(0x6bf)]=_0x20c202,this['updateConversation'](_0x19b55a,_0xb54905,_0xfb7b48);}else{let _0x561c13={'error':!0x0};this[_0x2338b4(0x75a)](_0x19b55a,_0xb54905,_0x561c13),this[_0x2338b4(0x731)][_0x2338b4(0x6aa)](this[_0x2338b4(0x1df)]+'\x20('+this[_0x2338b4(0x5ba)]['wuid']+_0x2338b4(0x728));}}catch(_0x544dba){let _0x1e7c81={'error':!0x0,'errorLog':_0x544dba instanceof Error?_0x544dba[_0x2338b4(0x15c)]:JSON[_0x2338b4(0x38d)](_0x544dba,null,0x2)};this[_0x2338b4(0x75a)](_0x19b55a,_0xb54905,_0x1e7c81),this[_0x2338b4(0x731)][_0x2338b4(0x6aa)](this[_0x2338b4(0x1df)]+'\x20('+this['instance'][_0x2338b4(0x341)]+_0x2338b4(0x28a)+(_0x544dba instanceof Error?_0x544dba[_0x2338b4(0x15c)]:JSON[_0x2338b4(0x38d)](_0x544dba,null,0x2)));}}async[a0_0x397951(0x3bd)](_0x35a4b3,_0x13139a){const _0x4df001=a0_0x397951;this[_0x4df001(0x731)][_0x4df001(0x545)](this[_0x4df001(0x1df)]+'\x20('+this[_0x4df001(0x5ba)]['wuid']+_0x4df001(0x323));let _0x4153c6=_0x35a4b3['chatLog'][_0x4df001(0x5f7)]['find'](_0x430ed=>_0x430ed['blockId'][_0x4df001(0x622)]()===_0x13139a[_0x4df001(0x28d)][_0x4df001(0x2a6)][_0x4df001(0x622)]()),_0x3772f7={'id':_0x4153c6[_0x4df001(0x164)],'remoteJid':_0x4153c6['remoteJid'],'fromMe':_0x4153c6[_0x4df001(0x28f)]};try{let _0x2e74c2=await this[_0x4df001(0x6cf)](_0x3772f7);if(_0x2e74c2){_0x35a4b3[_0x4df001(0x583)][_0x4df001(0x6d6)]=_0x13139a[_0x4df001(0x578)]['toString']();let {message_normalized:_0x579d94}=this['normalizeMessage'](_0x2e74c2[_0x4df001(0x15c)],_(_0x2e74c2[_0x4df001(0x15c)]),null);_0x35a4b3[_0x4df001(0x583)][_0x4df001(0x22a)]=await _0x579d94;let _0x35aa34={};this[_0x4df001(0x75a)](_0x35a4b3,_0x13139a,_0x35aa34);}else{let _0x238fd6={'error':!0x0};this[_0x4df001(0x75a)](_0x35a4b3,_0x13139a,_0x238fd6),this[_0x4df001(0x731)][_0x4df001(0x6aa)](this['instanceName']+'\x20('+this['instance'][_0x4df001(0x341)]+_0x4df001(0x55c));}}catch(_0x158a13){let _0x3b2d64={'error':!0x0,'errorLog':_0x158a13 instanceof Error?_0x158a13[_0x4df001(0x15c)]:JSON['stringify'](_0x158a13,null,0x2)};this[_0x4df001(0x75a)](_0x35a4b3,_0x13139a,_0x3b2d64),this[_0x4df001(0x731)][_0x4df001(0x6aa)](this[_0x4df001(0x1df)]+'\x20('+this[_0x4df001(0x5ba)][_0x4df001(0x341)]+_0x4df001(0x347)+(_0x158a13 instanceof Error?_0x158a13[_0x4df001(0x15c)]:JSON[_0x4df001(0x38d)](_0x158a13,null,0x2)));}}async['createFlow'](_0xda0027){const _0x14debe=a0_0x397951;try{if(this[_0x14debe(0x731)][_0x14debe(0x545)](this[_0x14debe(0x1df)]+'\x20('+this[_0x14debe(0x5ba)][_0x14debe(0x341)]+_0x14debe(0x2b0)),await this[_0x14debe(0x436)][_0x14debe(0x6d4)][_0x14debe(0x3c4)]({'where':{'name':_0xda0027[_0x14debe(0x346)]}},this[_0x14debe(0x5ba)][_0x14debe(0x341)]))return{'message':_0x14debe(0x362)};_0xda0027[_0x14debe(0x349)]===!0x0&&await this[_0x14debe(0x436)][_0x14debe(0x6d4)]['updateMany']({},{'default':!0x1},this['instance'][_0x14debe(0x341)]);let _0x250ddd=new ne[(_0x14debe(0x32f))][(_0x14debe(0x4b7))](),_0xf0582b={'_id':_0x250ddd,'default':!0x0,'title':_0x14debe(0x752),'x':0x0,'y':0x0},_0x4a4d8e={'_id':new ne[(_0x14debe(0x32f))][(_0x14debe(0x4b7))](),'order':0x1,'groupId':_0x250ddd['toString'](),'type':'start'},_0x224cfb={'_id':new ne[(_0x14debe(0x32f))]['ObjectId'](),'owner':this[_0x14debe(0x5ba)][_0x14debe(0x341)],'name':_0xda0027['name'],'groups':[_0xf0582b],'blocks':[_0x4a4d8e],..._0xda0027};return _0x224cfb=await this[_0x14debe(0x436)][_0x14debe(0x6d4)]['createAndSave'](_0x224cfb,this['instance']['wuid']),_0x224cfb;}catch(_0x2e5638){throw this[_0x14debe(0x731)][_0x14debe(0x6aa)](this[_0x14debe(0x1df)]+'\x20('+this[_0x14debe(0x5ba)][_0x14debe(0x341)]+_0x14debe(0x2e5)+(_0x2e5638 instanceof Error?_0x2e5638[_0x14debe(0x15c)]:JSON[_0x14debe(0x38d)](_0x2e5638,null,0x2))),new m(_0x14debe(0x3cc)+_0x2e5638);}}async[a0_0x397951(0x51f)](_0x455e8b){const _0x3270db=a0_0x397951;try{return this[_0x3270db(0x731)]['verbose'](this[_0x3270db(0x1df)]+'\x20('+this[_0x3270db(0x5ba)][_0x3270db(0x341)]+_0x3270db(0x59f)),await this['repository'][_0x3270db(0x6d4)][_0x3270db(0x3db)]({'where':{'name':_0x455e8b}},this[_0x3270db(0x5ba)]['wuid']);}catch(_0x1a6b16){return this['logger'][_0x3270db(0x6aa)](this['instanceName']+'\x20('+this[_0x3270db(0x5ba)]['wuid']+_0x3270db(0x46b)+(_0x1a6b16 instanceof Error?_0x1a6b16[_0x3270db(0x15c)]:JSON[_0x3270db(0x38d)](_0x1a6b16,null,0x2))),{'message':_0x3270db(0x339)+_0x1a6b16};}}async[a0_0x397951(0x58a)](_0x210a65){const _0x540753=a0_0x397951;try{this['logger']['verbose'](this[_0x540753(0x1df)]+'\x20('+this[_0x540753(0x5ba)]['wuid']+_0x540753(0x64a));let _0x2e73ef=await this['repository'][_0x540753(0x6d4)][_0x540753(0x3c4)]({'where':{'name':_0x210a65}},this[_0x540753(0x5ba)][_0x540753(0x341)]);if(!_0x2e73ef)throw new Error(_0x540753(0x468));if(!this[_0x540753(0x745)]&&(await this['getAutomateSystem'](),!this[_0x540753(0x745)]))return null;let _0x52871b=this['AutomateSystem']?.[_0x540753(0x152)][_0x540753(0x530)](_0x4d7188=>_0x4d7188[_0x540753(0x346)]),_0x4b8e99=[_0x540753(0x61c),_0x540753(0x716),_0x540753(0x617),'cpf',_0x540753(0x51c),'notas',_0x540753(0x1d0),_0x540753(0x568)];_0x2e73ef['variables']=_0x2e73ef[_0x540753(0x2cb)]['filter'](_0x5e33f0=>!(_0x5e33f0[_0x540753(0x24c)]===_0x540753(0x1f9)||_0x5e33f0[_0x540753(0x1f9)])),_0x4b8e99[_0x540753(0x334)](_0xee0fd9=>{const _0x3f1ad1=_0x540753;_0x2e73ef[_0x3f1ad1(0x2cb)][_0x3f1ad1(0x367)]({'folder':_0x3f1ad1(0x1f9),'name':_0xee0fd9,'value':'','doc':'','leadInfo':!0x0});}),_0x52871b['forEach'](_0x4b25a9=>{const _0x519c57=_0x540753;let _0x11b63c=_0x2e73ef[_0x519c57(0x2cb)][_0x519c57(0x72a)](_0x24a728=>_0x24a728[_0x519c57(0x346)]===_0x4b25a9);_0x11b63c===-0x1?_0x2e73ef[_0x519c57(0x2cb)][_0x519c57(0x367)]({'folder':_0x519c57(0x1f9),'name':_0x4b25a9,'value':'','doc':'','leadInfo':!0x0}):(_0x2e73ef[_0x519c57(0x2cb)][_0x11b63c][_0x519c57(0x24c)]=_0x519c57(0x1f9),_0x2e73ef[_0x519c57(0x2cb)][_0x11b63c][_0x519c57(0x1f9)]=!0x0);}),_0x2e73ef[_0x540753(0x298)]&&_0x2e73ef[_0x540753(0x298)]['length']>0x0&&_0x2e73ef[_0x540753(0x298)]['forEach'](_0x12d609=>{const _0x5a8f98=_0x540753;_0x12d609[_0x5a8f98(0x625)]&&_0x12d609['next_groupId']&&_0x12d609[_0x5a8f98(0x625)]===_0x12d609['next_groupId']&&(_0x12d609[_0x5a8f98(0x3cd)]=null);});let _0x854033=await this[_0x540753(0x436)][_0x540753(0x6d4)][_0x540753(0x30a)](_0x2e73ef[_0x540753(0x578)],_0x2e73ef,this[_0x540753(0x5ba)]['wuid']);if(!_0x854033)throw new Error(_0x540753(0x72d));return _0x854033;}catch(_0x1818c6){throw this[_0x540753(0x731)][_0x540753(0x6aa)](this['instanceName']+'\x20('+this[_0x540753(0x5ba)][_0x540753(0x341)]+_0x540753(0x65a)+(_0x1818c6 instanceof Error?_0x1818c6[_0x540753(0x15c)]:JSON[_0x540753(0x38d)](_0x1818c6,null,0x2))),new m('Erro\x20ao\x20buscar\x20o\x20fluxo:\x20'+_0x1818c6);}}async[a0_0x397951(0x749)](){const _0x2f6924=a0_0x397951;try{return this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x2f6924(0x5ba)][_0x2f6924(0x341)]+_0x2f6924(0x575)),await this[_0x2f6924(0x436)][_0x2f6924(0x6d4)][_0x2f6924(0x54e)]({'where':{}},this[_0x2f6924(0x5ba)][_0x2f6924(0x341)]);}catch(_0x3b88ef){return this[_0x2f6924(0x731)][_0x2f6924(0x6aa)](this[_0x2f6924(0x1df)]+'\x20('+this[_0x2f6924(0x5ba)]['wuid']+_0x2f6924(0x518)+(_0x3b88ef instanceof Error?_0x3b88ef[_0x2f6924(0x15c)]:JSON[_0x2f6924(0x38d)](_0x3b88ef,null,0x2))),{'message':_0x2f6924(0x21a)+_0x3b88ef};}}async[a0_0x397951(0x187)](_0x5ce151){const _0x36d151=a0_0x397951;try{this[_0x36d151(0x731)][_0x36d151(0x545)](this[_0x36d151(0x1df)]+'\x20('+this[_0x36d151(0x5ba)][_0x36d151(0x341)]+_0x36d151(0x280));let _0x1b7ce0=await this[_0x36d151(0x436)][_0x36d151(0x6d4)][_0x36d151(0x3c4)]({'where':{'name':_0x5ce151[_0x36d151(0x346)]}},this[_0x36d151(0x5ba)][_0x36d151(0x341)]);return _0x1b7ce0?(_0x5ce151[_0x36d151(0x349)]===!0x0&&await this[_0x36d151(0x436)][_0x36d151(0x6d4)]['updateMany']({},{'default':!0x1},this[_0x36d151(0x5ba)][_0x36d151(0x341)]),await this[_0x36d151(0x436)]['flow'][_0x36d151(0x30a)](_0x1b7ce0[_0x36d151(0x578)],_0x5ce151,this[_0x36d151(0x5ba)]['wuid'])):{'message':_0x36d151(0x359)};}catch(_0x36034b){throw this[_0x36d151(0x731)]['error'](this['instanceName']+'\x20('+this[_0x36d151(0x5ba)]['wuid']+_0x36d151(0x195)+(_0x36034b instanceof Error?_0x36034b[_0x36d151(0x15c)]:JSON[_0x36d151(0x38d)](_0x36034b,null,0x2))),new m(_0x36d151(0x18e)+(_0x36034b instanceof Error?_0x36034b['message']:JSON['stringify'](_0x36034b,null,0x2)));}}async[a0_0x397951(0x78f)](_0x1cf276){const _0x43106c=a0_0x397951;try{this[_0x43106c(0x731)][_0x43106c(0x545)](this['instanceName']+'\x20('+this[_0x43106c(0x5ba)][_0x43106c(0x341)]+_0x43106c(0x638));let _0x1acaf9=await this[_0x43106c(0x436)][_0x43106c(0x6d4)]['findOne']({'where':{'name':_0x1cf276[_0x43106c(0x346)]}},this[_0x43106c(0x5ba)][_0x43106c(0x341)]);_0x1acaf9||this[_0x43106c(0x6f9)](_0x43106c(0x468));let {block:_0x18ec43}=_0x1cf276;_0x18ec43?.[_0x43106c(0x667)]?this[_0x43106c(0x1f4)](_0x1acaf9,_0x1cf276):_0x18ec43?.[_0x43106c(0x777)]?this[_0x43106c(0x66a)](_0x1acaf9,_0x1cf276):_0x18ec43[_0x43106c(0x578)]?await this[_0x43106c(0x4c4)](_0x1acaf9,_0x1cf276):this[_0x43106c(0x613)](_0x1acaf9,_0x1cf276);let _0x383092=await this[_0x43106c(0x436)][_0x43106c(0x6d4)]['updateOne'](_0x1acaf9[_0x43106c(0x578)],_0x1acaf9,this[_0x43106c(0x5ba)]['wuid']);if(!_0x383092)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x383092;}catch(_0x10366f){this[_0x43106c(0x6f9)](_0x43106c(0x6b3)+_0x10366f);}}async[a0_0x397951(0x1f4)](_0x3dc15e,_0x1d46e1){const _0x34e1be=a0_0x397951;let _0x3a61c4=_0x1d46e1[_0x34e1be(0x6c1)]['_id'],_0x976a5f=_0x3dc15e[_0x34e1be(0x298)][_0x34e1be(0x317)](_0x3efde1=>_0x3efde1[_0x34e1be(0x578)][_0x34e1be(0x622)]()===_0x3a61c4);if(!_0x976a5f){this[_0x34e1be(0x731)][_0x34e1be(0x6aa)](this[_0x34e1be(0x1df)]+'\x20('+this[_0x34e1be(0x5ba)][_0x34e1be(0x341)]+_0x34e1be(0x410)+_0x3a61c4+_0x34e1be(0x6ff));return;}this[_0x34e1be(0x731)]['verbose'](this[_0x34e1be(0x1df)]+'\x20('+this[_0x34e1be(0x5ba)][_0x34e1be(0x341)]+_0x34e1be(0x2de)+JSON[_0x34e1be(0x38d)](_0x976a5f));let _0x1d09e6=JSON['parse'](JSON[_0x34e1be(0x38d)](_0x976a5f));_0x1d09e6[_0x34e1be(0x578)]=new ne[(_0x34e1be(0x349))][(_0x34e1be(0x32f))][(_0x34e1be(0x4b7))](),this[_0x34e1be(0x731)][_0x34e1be(0x545)](this[_0x34e1be(0x1df)]+'\x20('+this[_0x34e1be(0x5ba)][_0x34e1be(0x341)]+_0x34e1be(0x206)+JSON[_0x34e1be(0x38d)](_0x1d09e6)),_0x3dc15e[_0x34e1be(0x298)][_0x34e1be(0x367)](_0x1d09e6),this[_0x34e1be(0x157)](_0x3dc15e[_0x34e1be(0x298)],_0x1d09e6['groupId']);}['throwAndLogError'](_0x20066a){const _0x55a284=a0_0x397951;throw this[_0x55a284(0x731)][_0x55a284(0x6aa)](this[_0x55a284(0x1df)]+'\x20('+this[_0x55a284(0x5ba)][_0x55a284(0x341)]+'):\x20'+_0x20066a),new m(_0x20066a);}[a0_0x397951(0x66a)](_0x3c7cd9,_0x2e5888){const _0x5359be=a0_0x397951;let {block:_0x5e363d}=_0x2e5888;if(_0x5e363d['type']===_0x5359be(0x16e)){this[_0x5359be(0x6f9)](_0x5359be(0x453));return;}if(!_0x5e363d[_0x5359be(0x578)]){this[_0x5359be(0x6f9)](_0x5359be(0x71e));return;}let _0x54907b=_0x3c7cd9['blocks'][_0x5359be(0x317)](_0xd16de4=>_0xd16de4[_0x5359be(0x578)]['toString']()===_0x2e5888['block'][_0x5359be(0x578)][_0x5359be(0x622)]());if(!_0x54907b){this[_0x5359be(0x6f9)](_0x5359be(0x223)+_0x5e363d[_0x5359be(0x578)]+_0x5359be(0x31a));return;}_0x3c7cd9[_0x5359be(0x298)]=_0x3c7cd9['blocks'][_0x5359be(0x6ac)](_0x276a8e=>_0x276a8e[_0x5359be(0x578)][_0x5359be(0x622)]()!==_0x2e5888['block'][_0x5359be(0x578)][_0x5359be(0x622)]()),_0x3c7cd9[_0x5359be(0x735)]=_0x3c7cd9['conditions'][_0x5359be(0x6ac)](_0x4ddcc3=>_0x4ddcc3[_0x5359be(0x2a6)]!==_0x5e363d['_id'][_0x5359be(0x622)]()),_0x3c7cd9[_0x5359be(0x49c)]=_0x3c7cd9['varedits'][_0x5359be(0x6ac)](_0x3904b0=>_0x3904b0[_0x5359be(0x2a6)]!==_0x5e363d['_id'][_0x5359be(0x622)]()),_0x3c7cd9[_0x5359be(0x2f6)]=_0x3c7cd9['replyOptions'][_0x5359be(0x6ac)](_0x598811=>_0x598811[_0x5359be(0x2a6)]!==_0x5e363d['_id'][_0x5359be(0x622)]()),this['reorderBlocks'](_0x3c7cd9[_0x5359be(0x298)],_0x54907b['groupId']);}async[a0_0x397951(0x4c4)](_0x43787f,_0x32cdef){const _0x270d0d=a0_0x397951;let _0x573038=_0x43787f[_0x270d0d(0x298)]['findIndex'](_0x4c19b9=>_0x4c19b9[_0x270d0d(0x578)][_0x270d0d(0x622)]()===_0x32cdef[_0x270d0d(0x6c1)][_0x270d0d(0x578)]['toString']());if(this[_0x270d0d(0x731)][_0x270d0d(0x545)](this[_0x270d0d(0x1df)]+'\x20('+this[_0x270d0d(0x5ba)]['wuid']+_0x270d0d(0x68a)+_0x573038),_0x573038===-0x1){this[_0x270d0d(0x731)][_0x270d0d(0x545)](_0x270d0d(0x223)+_0x32cdef[_0x270d0d(0x6c1)]['_id']+_0x270d0d(0x433));return;}if(_0x43787f[_0x270d0d(0x298)][_0x573038]['type']==='start'){let _0x52cf5b=Object['keys'](_0x32cdef['block']);if(_0x52cf5b[_0x270d0d(0x4c6)]>0x2||_0x52cf5b[_0x270d0d(0x4c6)]===0x2&&!_0x52cf5b[_0x270d0d(0x2fb)](_0x270d0d(0x3cd))){this['throwAndLogError']('Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão');return;}}let _0xb87824=_0x43787f[_0x270d0d(0x298)][_0x573038][_0x270d0d(0x625)];for(let _0x1e14e2 in _0x32cdef[_0x270d0d(0x6c1)])_0x32cdef[_0x270d0d(0x6c1)][_0x270d0d(0x68f)](_0x1e14e2)&&(_0x43787f[_0x270d0d(0x298)][_0x573038][_0x1e14e2]=_0x32cdef['block'][_0x1e14e2]);if(this[_0x270d0d(0x731)][_0x270d0d(0x545)](this[_0x270d0d(0x1df)]+'\x20('+this['instance']['wuid']+_0x270d0d(0x413)+JSON[_0x270d0d(0x38d)](_0x43787f[_0x270d0d(0x298)][_0x573038])),_0x43787f['blocks'][_0x573038][_0x270d0d(0x27e)]&&'header'in _0x43787f[_0x270d0d(0x298)][_0x573038][_0x270d0d(0x27e)]){this[_0x270d0d(0x731)][_0x270d0d(0x545)](this[_0x270d0d(0x1df)]+'\x20('+this[_0x270d0d(0x5ba)][_0x270d0d(0x341)]+_0x270d0d(0x715));let _0x499352=JSON[_0x270d0d(0x38d)](_0x43787f[_0x270d0d(0x298)][_0x573038][_0x270d0d(0x27e)][_0x270d0d(0x21b)],null,0x1);_0x499352[_0x270d0d(0x4c6)]>0x2&&(_0x499352=_0x499352[_0x270d0d(0x79f)](0x1,_0x499352[_0x270d0d(0x4c6)]-0x1)[_0x270d0d(0x38f)]()),_0x43787f[_0x270d0d(0x298)][_0x573038][_0x270d0d(0x27e)]['headerString']=_0x499352;}if(_0x43787f[_0x270d0d(0x298)][_0x573038][_0x270d0d(0x27e)]&&'body'in _0x43787f[_0x270d0d(0x298)][_0x573038]['apirequest']){this[_0x270d0d(0x731)][_0x270d0d(0x545)](this[_0x270d0d(0x1df)]+'\x20('+this[_0x270d0d(0x5ba)][_0x270d0d(0x341)]+_0x270d0d(0x3fb));let _0x3400e8=JSON[_0x270d0d(0x38d)](_0x43787f[_0x270d0d(0x298)][_0x573038][_0x270d0d(0x27e)]['body'],null,0x1);_0x3400e8['length']>0x2&&(_0x3400e8=_0x3400e8[_0x270d0d(0x79f)](0x1,_0x3400e8[_0x270d0d(0x4c6)]-0x1)['trim']()),_0x43787f['blocks'][_0x573038][_0x270d0d(0x27e)][_0x270d0d(0x6d1)]=_0x3400e8;}let _0xfc385d=_0x43787f[_0x270d0d(0x298)][_0x573038][_0x270d0d(0x625)];_0xb87824!==_0xfc385d?(this['reorderBlocks'](_0x43787f[_0x270d0d(0x298)],_0xb87824),this['reorderBlocks'](_0x43787f[_0x270d0d(0x298)],_0xfc385d)):this[_0x270d0d(0x157)](_0x43787f[_0x270d0d(0x298)],_0xb87824);}['addBlock'](_0x3253f0,_0x1881b6){const _0x1b7be9=a0_0x397951;if(_0x1881b6['block'][_0x1b7be9(0x52f)]===_0x1b7be9(0x16e)){this[_0x1b7be9(0x6f9)](_0x1b7be9(0x45b));return;}if(_0x1881b6[_0x1b7be9(0x6c1)][_0x1b7be9(0x27e)]&&_0x1b7be9(0x21b)in _0x1881b6[_0x1b7be9(0x6c1)]['apirequest']){this[_0x1b7be9(0x731)]['verbose'](this[_0x1b7be9(0x1df)]+'\x20('+this[_0x1b7be9(0x5ba)]['wuid']+'):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString');let _0x228768=JSON[_0x1b7be9(0x38d)](_0x1881b6[_0x1b7be9(0x6c1)][_0x1b7be9(0x27e)][_0x1b7be9(0x21b)],null,0x1);_0x228768[_0x1b7be9(0x4c6)]>0x2&&(_0x228768=_0x228768[_0x1b7be9(0x79f)](0x1,_0x228768[_0x1b7be9(0x4c6)]-0x1)[_0x1b7be9(0x38f)]()),_0x1881b6[_0x1b7be9(0x6c1)][_0x1b7be9(0x27e)][_0x1b7be9(0x30f)]=_0x228768;}_0x1881b6['block'][_0x1b7be9(0x27e)]&&'body'in _0x1881b6[_0x1b7be9(0x6c1)][_0x1b7be9(0x27e)]&&(this[_0x1b7be9(0x731)]['verbose'](this[_0x1b7be9(0x1df)]+'\x20('+this['instance'][_0x1b7be9(0x341)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x1881b6[_0x1b7be9(0x6c1)][_0x1b7be9(0x27e)][_0x1b7be9(0x6d1)]=JSON[_0x1b7be9(0x38d)](_0x1881b6[_0x1b7be9(0x6c1)][_0x1b7be9(0x27e)]['body'],null,0x1)[_0x1b7be9(0x38f)]()),_0x3253f0['blocks'][_0x1b7be9(0x367)](_0x1881b6[_0x1b7be9(0x6c1)]),this['reorderBlocks'](_0x3253f0[_0x1b7be9(0x298)],_0x1881b6[_0x1b7be9(0x6c1)][_0x1b7be9(0x625)]);}[a0_0x397951(0x157)](_0x13ad68,_0x352a31){const _0x50a6fb=a0_0x397951;let _0x53f516=_0x13ad68[_0x50a6fb(0x6ac)](_0x473de8=>_0x473de8[_0x50a6fb(0x625)]===_0x352a31);_0x53f516[_0x50a6fb(0x656)]((_0x2b227c,_0x23fde1)=>_0x2b227c[_0x50a6fb(0x45a)]-_0x23fde1[_0x50a6fb(0x45a)]),_0x53f516['forEach']((_0x1a85f4,_0x30f8e5)=>_0x1a85f4['order']=_0x30f8e5+0x1);}async[a0_0x397951(0x447)](_0x8a0502){const _0xbc1662=a0_0x397951;try{if(this[_0xbc1662(0x731)]['verbose'](this[_0xbc1662(0x1df)]+'\x20('+this['instance'][_0xbc1662(0x341)]+_0xbc1662(0x374)),!_0x8a0502||!_0x8a0502[_0xbc1662(0x2bd)]){this[_0xbc1662(0x6f9)](_0xbc1662(0x733));return;}let _0x3df006=await this[_0xbc1662(0x436)][_0xbc1662(0x6d4)][_0xbc1662(0x3c4)]({'where':{'name':_0x8a0502[_0xbc1662(0x346)]}},this['instance']['wuid']);_0x3df006||this[_0xbc1662(0x6f9)](_0xbc1662(0x468));let {replyOption:_0x439dfe}=_0x8a0502;_0x439dfe?.[_0xbc1662(0x777)]?(this[_0xbc1662(0x4c2)](_0x3df006,_0x8a0502),this[_0xbc1662(0x212)](_0x3df006[_0xbc1662(0x2f6)],_0x8a0502[_0xbc1662(0x2bd)]['blockId'])):_0x439dfe[_0xbc1662(0x578)]?(await this[_0xbc1662(0x60b)](_0x3df006,_0x8a0502),this['reorderReplyOptions'](_0x3df006[_0xbc1662(0x2f6)],_0x8a0502[_0xbc1662(0x2bd)][_0xbc1662(0x2a6)])):(this['addReplyOption'](_0x3df006,_0x8a0502),this[_0xbc1662(0x212)](_0x3df006['replyOptions'],_0x8a0502[_0xbc1662(0x2bd)]['blockId']));let _0x65c94b=await this[_0xbc1662(0x436)][_0xbc1662(0x6d4)][_0xbc1662(0x30a)](_0x3df006[_0xbc1662(0x578)],_0x3df006,this['instance'][_0xbc1662(0x341)]);if(!_0x65c94b)throw new Error(_0xbc1662(0x72d));return _0x65c94b;}catch(_0x5e0b0c){this[_0xbc1662(0x6f9)](_0xbc1662(0x5cc)+_0x5e0b0c);}}[a0_0x397951(0x212)](_0x75124d,_0x366460){const _0x3450aa=a0_0x397951;console['log'](_0x3450aa(0x759),_0x366460),_0x75124d[_0x3450aa(0x334)](_0x30fb8e=>{const _0x5a69a0=_0x3450aa;_0x30fb8e[_0x5a69a0(0x2a6)]===_0x366460&&_0x30fb8e[_0x5a69a0(0x45a)]===void 0x0&&(_0x30fb8e[_0x5a69a0(0x45a)]=0x270f);});let _0x48ae9a=_0x75124d[_0x3450aa(0x6ac)](_0x54fa06=>_0x54fa06[_0x3450aa(0x2a6)]===_0x366460);_0x48ae9a[_0x3450aa(0x656)]((_0x389395,_0x4be9e8)=>_0x389395[_0x3450aa(0x45a)]-_0x4be9e8['order']),_0x48ae9a[_0x3450aa(0x334)]((_0x11475c,_0xabbf65)=>{_0x11475c['order']=_0xabbf65+0x1;}),_0x75124d[_0x3450aa(0x334)](_0x3080a0=>{const _0x59209a=_0x3450aa;if(_0x3080a0[_0x59209a(0x2a6)]===_0x366460){let _0x272605=_0x48ae9a[_0x59209a(0x317)](_0x4cf926=>_0x4cf926[_0x59209a(0x578)][_0x59209a(0x622)]()===_0x3080a0[_0x59209a(0x578)][_0x59209a(0x622)]());_0x272605&&(_0x3080a0[_0x59209a(0x45a)]=_0x272605[_0x59209a(0x45a)]);}}),console[_0x3450aa(0x1aa)](_0x3450aa(0x4f5),_0x75124d);}['deleteReplyOption'](_0x33a5e4,_0x3ddd1e){const _0x4d14e1=a0_0x397951;let {replyOption:_0x17f10f}=_0x3ddd1e;if(!_0x17f10f[_0x4d14e1(0x578)]){this[_0x4d14e1(0x6f9)](_0x4d14e1(0x32a));return;}if(!_0x33a5e4[_0x4d14e1(0x2f6)][_0x4d14e1(0x317)](_0x320052=>_0x320052[_0x4d14e1(0x578)][_0x4d14e1(0x622)]()===_0x3ddd1e[_0x4d14e1(0x2bd)][_0x4d14e1(0x578)]['toString']())){this[_0x4d14e1(0x6f9)](_0x4d14e1(0x61d)+_0x17f10f[_0x4d14e1(0x578)]+_0x4d14e1(0x31a));return;}_0x33a5e4['replyOptions']=_0x33a5e4[_0x4d14e1(0x2f6)][_0x4d14e1(0x6ac)](_0x2bf1ca=>_0x2bf1ca[_0x4d14e1(0x578)][_0x4d14e1(0x622)]()!==_0x3ddd1e[_0x4d14e1(0x2bd)]['_id']['toString']());}async['updateReplyOption'](_0x3642dd,_0x20ce04){const _0x36c54d=a0_0x397951;let _0x5b379b=_0x3642dd[_0x36c54d(0x2f6)][_0x36c54d(0x72a)](_0x48fe55=>_0x48fe55[_0x36c54d(0x578)][_0x36c54d(0x622)]()===_0x20ce04[_0x36c54d(0x2bd)][_0x36c54d(0x578)][_0x36c54d(0x622)]());if(_0x5b379b===-0x1){this[_0x36c54d(0x6f9)](_0x36c54d(0x61d)+_0x20ce04['replyOption'][_0x36c54d(0x578)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}for(let _0xecdd8e in _0x20ce04[_0x36c54d(0x2bd)])_0x20ce04[_0x36c54d(0x2bd)][_0x36c54d(0x68f)](_0xecdd8e)&&(_0x3642dd[_0x36c54d(0x2f6)][_0x5b379b][_0xecdd8e]=_0x20ce04['replyOption'][_0xecdd8e]);}[a0_0x397951(0x769)](_0x424320,_0x2f0b14){const _0x9c03aa=a0_0x397951;_0x424320[_0x9c03aa(0x2f6)][_0x9c03aa(0x367)](_0x2f0b14[_0x9c03aa(0x2bd)]);}async[a0_0x397951(0x467)](_0x12d9c1){const _0x15289c=a0_0x397951;this[_0x15289c(0x731)][_0x15289c(0x545)](this[_0x15289c(0x1df)]+'\x20('+this[_0x15289c(0x5ba)]['wuid']+'):\x20Dados\x20recebidos\x20no\x20editFlowGroup:'+_0x12d9c1);try{this[_0x15289c(0x731)][_0x15289c(0x545)](this['instanceName']+'\x20('+this[_0x15289c(0x5ba)][_0x15289c(0x341)]+_0x15289c(0x748));let _0x2b20eb=await this[_0x15289c(0x436)][_0x15289c(0x6d4)]['findOne']({'where':{'name':_0x12d9c1['name']}},this[_0x15289c(0x5ba)][_0x15289c(0x341)]);if(!_0x2b20eb)throw new Error(_0x15289c(0x468));if(_0x12d9c1[_0x15289c(0x490)]&&_0x12d9c1[_0x15289c(0x490)]?.[_0x15289c(0x777)]===!0x0){if(this[_0x15289c(0x731)][_0x15289c(0x545)](this[_0x15289c(0x1df)]+'\x20('+this[_0x15289c(0x5ba)][_0x15289c(0x341)]+_0x15289c(0x22d)),_0x12d9c1[_0x15289c(0x490)][_0x15289c(0x349)]===!0x0)return{'message':_0x15289c(0x2fe)};if(_0x2b20eb[_0x15289c(0x298)]['some'](_0x51231a=>_0x51231a[_0x15289c(0x625)]['toString']()===_0x12d9c1[_0x15289c(0x490)][_0x15289c(0x578)]))return this[_0x15289c(0x731)][_0x15289c(0x545)](this['instanceName']+'\x20('+this['instance'][_0x15289c(0x341)]+_0x15289c(0x2ae)),{'message':_0x15289c(0x429)};_0x2b20eb['groups']=_0x2b20eb['groups'][_0x15289c(0x6ac)](_0x43da59=>_0x43da59[_0x15289c(0x578)][_0x15289c(0x622)]()!==_0x12d9c1['group']['_id']);}else{if(_0x12d9c1[_0x15289c(0x490)]){if(_0x12d9c1[_0x15289c(0x490)][_0x15289c(0x349)]===!0x0)return{'message':_0x15289c(0x500)};if(_0x12d9c1['group']['_id']){let _0x28d9f2=_0x2b20eb[_0x15289c(0x4b6)]['find'](_0x1f05d6=>_0x1f05d6['_id']['toString']()===_0x12d9c1[_0x15289c(0x490)][_0x15289c(0x578)]);_0x28d9f2&&(_0x12d9c1['group']['x']<0x0&&(_0x12d9c1['group']['x']=0x0),_0x12d9c1['group']['y']<0x0&&(_0x12d9c1[_0x15289c(0x490)]['y']=0x0),Object[_0x15289c(0x3de)](_0x28d9f2,_0x12d9c1[_0x15289c(0x490)]));}else _0x2b20eb[_0x15289c(0x4b6)][_0x15289c(0x367)](_0x12d9c1[_0x15289c(0x490)]);}}let _0xe409c8=await this[_0x15289c(0x436)][_0x15289c(0x6d4)][_0x15289c(0x30a)](_0x2b20eb[_0x15289c(0x578)],_0x2b20eb,this['instance'][_0x15289c(0x341)]);if(!_0xe409c8)throw new Error(_0x15289c(0x72d));return _0xe409c8;}catch(_0x4797e5){throw this[_0x15289c(0x731)][_0x15289c(0x6aa)](this['instanceName']+'\x20('+this[_0x15289c(0x5ba)][_0x15289c(0x341)]+'):\x20Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20'+(_0x4797e5 instanceof Error?_0x4797e5['message']:JSON['stringify'](_0x4797e5,null,0x2))),new m(_0x15289c(0x776)+(_0x4797e5 instanceof Error?_0x4797e5[_0x15289c(0x15c)]:JSON[_0x15289c(0x38d)](_0x4797e5,null,0x2)));}}async[a0_0x397951(0x57d)](_0x2625e6){const _0x326eb6=a0_0x397951;try{this[_0x326eb6(0x731)][_0x326eb6(0x545)](this[_0x326eb6(0x1df)]+'\x20('+this[_0x326eb6(0x5ba)][_0x326eb6(0x341)]+_0x326eb6(0x358));let _0x42e8b3=await this['repository'][_0x326eb6(0x6d4)][_0x326eb6(0x3c4)]({'where':{'name':_0x2625e6[_0x326eb6(0x346)]}},this[_0x326eb6(0x5ba)][_0x326eb6(0x341)]);if(!_0x42e8b3)throw new Error('Flow\x20não\x20encontrado');let _0x21ee43=!0x1;if(_0x2625e6[_0x326eb6(0x649)]?.[_0x326eb6(0x777)]===!0x0)_0x42e8b3['conditions']=_0x42e8b3[_0x326eb6(0x735)][_0x326eb6(0x6ac)](_0x1414bc=>_0x1414bc&&_0x2625e6[_0x326eb6(0x649)]&&_0x1414bc['_id']&&_0x2625e6[_0x326eb6(0x649)][_0x326eb6(0x578)]&&_0x1414bc['_id'][_0x326eb6(0x622)]()!==_0x2625e6[_0x326eb6(0x649)][_0x326eb6(0x578)][_0x326eb6(0x622)]()),_0x21ee43=!0x0;else{let _0x404388=_0x42e8b3['conditions']['find'](_0x2a6ef6=>_0x2a6ef6&&_0x2625e6[_0x326eb6(0x649)]&&_0x2a6ef6[_0x326eb6(0x578)]&&_0x2625e6[_0x326eb6(0x649)][_0x326eb6(0x578)]&&_0x2a6ef6[_0x326eb6(0x578)][_0x326eb6(0x622)]()===_0x2625e6[_0x326eb6(0x649)][_0x326eb6(0x578)][_0x326eb6(0x622)]());_0x404388?(_0x21ee43=_0x404388['order']!==_0x2625e6[_0x326eb6(0x649)][_0x326eb6(0x45a)],Object[_0x326eb6(0x3de)](_0x404388,_0x2625e6[_0x326eb6(0x649)])):(_0x42e8b3[_0x326eb6(0x735)][_0x326eb6(0x367)](_0x2625e6[_0x326eb6(0x649)]),_0x21ee43=!0x0);}if(_0x21ee43){_0x42e8b3[_0x326eb6(0x735)][_0x326eb6(0x656)]((_0x2d5656,_0x1ef2e8)=>_0x2d5656[_0x326eb6(0x45a)]>_0x1ef2e8[_0x326eb6(0x45a)]?0x1:_0x1ef2e8[_0x326eb6(0x45a)]>_0x2d5656[_0x326eb6(0x45a)]?-0x1:0x0);for(let _0x1c5a96=0x0;_0x1c5a96<_0x42e8b3[_0x326eb6(0x735)][_0x326eb6(0x4c6)];_0x1c5a96++)_0x42e8b3[_0x326eb6(0x735)][_0x1c5a96]['order']=_0x1c5a96+0x1;_0x42e8b3['conditions']['length']>0x0&&(_0x42e8b3['conditions'][0x0][_0x326eb6(0x37a)]=_0x326eb6(0x3fd));}let _0x42dc57=await this[_0x326eb6(0x436)][_0x326eb6(0x6d4)]['updateOne'](_0x42e8b3[_0x326eb6(0x578)],_0x42e8b3,this['instance']['wuid']);if(!_0x42dc57)throw new Error(_0x326eb6(0x72d));return _0x42dc57;}catch(_0x201241){throw this[_0x326eb6(0x731)][_0x326eb6(0x6aa)](this[_0x326eb6(0x1df)]+'\x20('+this[_0x326eb6(0x5ba)][_0x326eb6(0x341)]+_0x326eb6(0x709)+(_0x201241 instanceof Error?_0x201241[_0x326eb6(0x15c)]:JSON[_0x326eb6(0x38d)](_0x201241,null,0x2))),new Error(_0x326eb6(0x2a0)+(_0x201241 instanceof Error?_0x201241[_0x326eb6(0x15c)]:JSON[_0x326eb6(0x38d)](_0x201241,null,0x2)));}}async[a0_0x397951(0x706)](_0x1b12c5){const _0x5c5033=a0_0x397951;try{this['logger'][_0x5c5033(0x545)](this[_0x5c5033(0x1df)]+'\x20('+this[_0x5c5033(0x5ba)][_0x5c5033(0x341)]+_0x5c5033(0x494));let _0x387bc3=await this[_0x5c5033(0x436)][_0x5c5033(0x6d4)][_0x5c5033(0x3c4)]({'where':{'name':_0x1b12c5['name']}},this['instance'][_0x5c5033(0x341)]);if(!_0x387bc3)throw new Error(_0x5c5033(0x468));let _0x2b8093=!0x1;if(_0x1b12c5[_0x5c5033(0x5a3)]?.[_0x5c5033(0x777)]===!0x0)_0x387bc3[_0x5c5033(0x49c)]=_0x387bc3['varedits'][_0x5c5033(0x6ac)](_0x2958b9=>_0x2958b9&&_0x1b12c5[_0x5c5033(0x5a3)]&&_0x2958b9['_id']&&_0x1b12c5['varedit']['_id']&&_0x2958b9[_0x5c5033(0x578)][_0x5c5033(0x622)]()!==_0x1b12c5[_0x5c5033(0x5a3)]['_id']['toString']()),_0x2b8093=!0x0;else{let _0x48fd2a=_0x387bc3[_0x5c5033(0x49c)][_0x5c5033(0x317)](_0x429ee1=>_0x429ee1&&_0x1b12c5[_0x5c5033(0x5a3)]&&_0x429ee1[_0x5c5033(0x578)]&&_0x1b12c5['varedit']['_id']&&_0x429ee1['_id'][_0x5c5033(0x622)]()===_0x1b12c5[_0x5c5033(0x5a3)][_0x5c5033(0x578)][_0x5c5033(0x622)]());_0x48fd2a?(_0x2b8093=_0x48fd2a[_0x5c5033(0x45a)]!==_0x1b12c5[_0x5c5033(0x5a3)][_0x5c5033(0x45a)],Object[_0x5c5033(0x3de)](_0x48fd2a,_0x1b12c5[_0x5c5033(0x5a3)])):(_0x387bc3['varedits']['push'](_0x1b12c5[_0x5c5033(0x5a3)]),_0x2b8093=!0x0);}if(_0x2b8093){_0x387bc3[_0x5c5033(0x49c)]['sort']((_0x310fcd,_0x4a6e5a)=>_0x310fcd[_0x5c5033(0x45a)]>_0x4a6e5a[_0x5c5033(0x45a)]?0x1:_0x4a6e5a[_0x5c5033(0x45a)]>_0x310fcd[_0x5c5033(0x45a)]?-0x1:0x0);for(let _0x53187d=0x0;_0x53187d<_0x387bc3[_0x5c5033(0x49c)]['length'];_0x53187d++)_0x387bc3[_0x5c5033(0x49c)][_0x53187d][_0x5c5033(0x45a)]=_0x53187d+0x1;}let _0x2860c1=await this[_0x5c5033(0x436)][_0x5c5033(0x6d4)][_0x5c5033(0x30a)](_0x387bc3[_0x5c5033(0x578)],_0x387bc3,this[_0x5c5033(0x5ba)]['wuid']);if(!_0x2860c1)throw new Error(_0x5c5033(0x72d));return _0x2860c1;}catch(_0xfa291){throw this[_0x5c5033(0x731)]['error'](this[_0x5c5033(0x1df)]+'\x20('+this[_0x5c5033(0x5ba)][_0x5c5033(0x341)]+_0x5c5033(0x709)+(_0xfa291 instanceof Error?_0xfa291[_0x5c5033(0x15c)]:JSON[_0x5c5033(0x38d)](_0xfa291,null,0x2))),new m('Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20'+(_0xfa291 instanceof Error?_0xfa291[_0x5c5033(0x15c)]:JSON[_0x5c5033(0x38d)](_0xfa291,null,0x2)));}}async[a0_0x397951(0x279)](_0x573d9f){const _0x54ec0f=a0_0x397951;try{this[_0x54ec0f(0x731)][_0x54ec0f(0x545)](this[_0x54ec0f(0x1df)]+'\x20('+this[_0x54ec0f(0x5ba)][_0x54ec0f(0x341)]+'):\x20Editando\x20variável\x20do\x20fluxo...');let _0x820bfa=await this[_0x54ec0f(0x436)][_0x54ec0f(0x6d4)]['findOne']({'where':{'name':_0x573d9f['name']}},this[_0x54ec0f(0x5ba)][_0x54ec0f(0x341)]);if(!_0x820bfa)throw new Error(_0x54ec0f(0x468));_0x573d9f[_0x54ec0f(0x3b3)][_0x54ec0f(0x346)]=_0x573d9f[_0x54ec0f(0x3b3)][_0x54ec0f(0x346)][_0x54ec0f(0x38f)](),_0x573d9f['variable']['name'][_0x54ec0f(0x5a0)]('_')&&(_0x573d9f[_0x54ec0f(0x3b3)][_0x54ec0f(0x346)]=_0x573d9f[_0x54ec0f(0x3b3)][_0x54ec0f(0x346)]['substring'](0x1)),_0x573d9f[_0x54ec0f(0x3b3)][_0x54ec0f(0x346)]=_0x573d9f['variable'][_0x54ec0f(0x346)][_0x54ec0f(0x38f)]();let _0x41e13b=_0x820bfa[_0x54ec0f(0x2cb)][_0x54ec0f(0x317)](_0x4d5043=>_0x4d5043[_0x54ec0f(0x346)]===_0x573d9f['variable'][_0x54ec0f(0x346)]);if(_0x41e13b?.['leadInfo']===!0x0)throw new Error(_0x54ec0f(0x27b));if(_0x573d9f['variable']?.[_0x54ec0f(0x777)]===!0x0){if(!_0x41e13b)return{'message':_0x54ec0f(0x678)};_0x820bfa[_0x54ec0f(0x2cb)]=_0x820bfa[_0x54ec0f(0x2cb)][_0x54ec0f(0x6ac)](_0x5d27ad=>_0x5d27ad['name']!==_0x573d9f[_0x54ec0f(0x3b3)][_0x54ec0f(0x346)]);}else _0x41e13b?Object['assign'](_0x41e13b,_0x573d9f['variable']):_0x820bfa[_0x54ec0f(0x2cb)][_0x54ec0f(0x367)](_0x573d9f[_0x54ec0f(0x3b3)]);let _0x3204ed=await this['repository'][_0x54ec0f(0x6d4)]['updateOne'](_0x820bfa[_0x54ec0f(0x578)],_0x820bfa,this['instance'][_0x54ec0f(0x341)]);if(!_0x3204ed)throw new Error(_0x54ec0f(0x72d));return _0x3204ed;}catch(_0x589ca8){throw this[_0x54ec0f(0x731)][_0x54ec0f(0x6aa)](this[_0x54ec0f(0x1df)]+'\x20('+this['instance'][_0x54ec0f(0x341)]+'):\x20Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20'+(_0x589ca8 instanceof Error?_0x589ca8['message']:JSON[_0x54ec0f(0x38d)](_0x589ca8,null,0x2))),new m(_0x54ec0f(0x4c3)+(_0x589ca8 instanceof Error?_0x589ca8[_0x54ec0f(0x15c)]:JSON[_0x54ec0f(0x38d)](_0x589ca8,null,0x2)));}}async[a0_0x397951(0x73a)](_0x3c9683){const _0x1183c7=a0_0x397951;let _0x18552e=null;try{if(!this[_0x1183c7(0x745)]?.[_0x1183c7(0x67c)][_0x1183c7(0x63b)])throw new m(_0x1183c7(0x3aa));this[_0x1183c7(0x731)]['verbose'](this['instanceName']+'\x20('+this[_0x1183c7(0x5ba)][_0x1183c7(0x341)]+_0x1183c7(0x69c));let _0x35f689=(await this[_0x1183c7(0x260)]({'numbers':[_0x3c9683[_0x1183c7(0x686)]]}))[0x0];if(!_0x35f689[_0x1183c7(0x562)]&&!(0x0,y['isJidGroup'])(_0x35f689[_0x1183c7(0x2f4)])&&!_0x35f689[_0x1183c7(0x2f4)][_0x1183c7(0x2fb)](_0x1183c7(0x64e)))throw _0x18552e=JSON[_0x1183c7(0x38d)](_0x35f689,null,0x2),new m(_0x35f689);let _0x416d94=await this[_0x1183c7(0x436)][_0x1183c7(0x6d4)][_0x1183c7(0x3c4)]({'where':{'name':_0x3c9683[_0x1183c7(0x346)]}},this[_0x1183c7(0x5ba)][_0x1183c7(0x341)]);if(!_0x416d94)return this[_0x1183c7(0x731)][_0x1183c7(0x6aa)](this[_0x1183c7(0x1df)]+'\x20('+this['instance']['wuid']+_0x1183c7(0x549)),{'message':_0x1183c7(0x468)};let _0x1c6748=await this['createConversationforStartFlow'](_0x416d94,_0x35f689['jid'],_0x3c9683[_0x1183c7(0x23f)]);if(_0x1c6748){this[_0x1183c7(0x731)][_0x1183c7(0x545)](this[_0x1183c7(0x1df)]+'\x20('+this['instance'][_0x1183c7(0x341)]+_0x1183c7(0x64b));let _0x1a73af=await this['NextBlock'](_0x1c6748);return _0x1a73af&&await this[_0x1183c7(0x672)](_0x1c6748,_0x1a73af),{'message':_0x1183c7(0x3bc)+_0x3c9683['remoteJid']};}}catch(_0x3029e9){if(this['logger']['error'](this['instanceName']+'\x20('+this[_0x1183c7(0x5ba)][_0x1183c7(0x341)]+_0x1183c7(0x242)+(_0x3029e9 instanceof Error?_0x3029e9[_0x1183c7(0x15c)]:JSON[_0x1183c7(0x38d)](_0x3029e9,null,0x2))),_0x18552e=_0x3029e9 instanceof Error?_0x3029e9['message']:JSON[_0x1183c7(0x38d)](_0x3029e9,null,0x2),_0x18552e)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x18552e);}}async[a0_0x397951(0x683)](_0x342136){const _0x90d0f5=a0_0x397951;try{let _0xb3856d={'remoteJid':_0x342136,'status':_0x90d0f5(0x612)},_0x10c564={'status':_0x90d0f5(0x488)},_0x1bf546=await this[_0x90d0f5(0x436)][_0x90d0f5(0x589)][_0x90d0f5(0x4b3)](_0xb3856d,_0x10c564,this[_0x90d0f5(0x5ba)][_0x90d0f5(0x341)]);return this[_0x90d0f5(0x731)][_0x90d0f5(0x545)](this[_0x90d0f5(0x1df)]+'\x20('+this[_0x90d0f5(0x5ba)][_0x90d0f5(0x341)]+_0x90d0f5(0x592)),_0x1bf546;}catch(_0x3ac1df){throw this[_0x90d0f5(0x731)][_0x90d0f5(0x6aa)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x90d0f5(0x5ca)+_0x3ac1df[_0x90d0f5(0x15c)]),_0x3ac1df;}}async[a0_0x397951(0x573)](_0x3faf3d,_0x567e81,_0x2bb837){const _0x68777a=a0_0x397951;this[_0x68777a(0x731)][_0x68777a(0x545)](this['instanceName']+'\x20('+this[_0x68777a(0x5ba)]['wuid']+_0x68777a(0x19b)),await this[_0x68777a(0x683)](_0x567e81);try{let _0x4da734=require(_0x68777a(0x4e9))['ObjectId'],_0x591f97=Date[_0x68777a(0x287)](),_0x5caef7='start',_0x49956c={},_0x2fdb44={},_0x452b48={..._0x3faf3d,'chatLog':null},_0x421134=await this[_0x68777a(0x3d8)](_0x452b48['variables']),_0x39c70a=await this[_0x68777a(0x1ca)](_0x567e81),_0x26d0e2={..._0x421134,..._0x39c70a,'_remoteJid':_0x567e81},_0x496505={'lastReceivedMessage':_0x49956c,'lastSendMessage':_0x2fdb44,'lastBlockId':_0x5caef7,'lastCondition':!0x0,'realVariables':_0x26d0e2};_0x452b48[_0x68777a(0x583)]=_0x496505,_0x452b48[_0x68777a(0x583)][_0x68777a(0x6bf)]={..._0x26d0e2,..._0x2bb837},delete _0x452b48['_id'],_0x452b48[_0x68777a(0x578)]=new _0x4da734(),_0x452b48['lastInteraction']=_0x591f97,_0x452b48[_0x68777a(0x51c)]=_0x68777a(0x612),_0x452b48['remoteJid']=_0x567e81;let _0x268c9c=await this['repository'][_0x68777a(0x589)]['updateOne'](_0x452b48[_0x68777a(0x578)],_0x452b48,this[_0x68777a(0x5ba)][_0x68777a(0x341)]);return this[_0x68777a(0x731)][_0x68777a(0x545)](this[_0x68777a(0x1df)]+'\x20('+this[_0x68777a(0x5ba)]['wuid']+_0x68777a(0x6dd)),_0x268c9c?_0x452b48:null;}catch(_0x59a3e9){throw this['logger'][_0x68777a(0x6aa)](this[_0x68777a(0x1df)]+'\x20('+this[_0x68777a(0x5ba)][_0x68777a(0x341)]+_0x68777a(0x426)+(_0x59a3e9 instanceof Error?_0x59a3e9['message']:JSON[_0x68777a(0x38d)](_0x59a3e9,null,0x2))),new m(_0x59a3e9[_0x68777a(0x15c)]);}}async['getConversation'](_0x534cf5){const _0x4be53b=a0_0x397951;try{this['logger']['verbose'](this[_0x4be53b(0x1df)]+'\x20('+this[_0x4be53b(0x5ba)]['wuid']+_0x4be53b(0x1a8)),this[_0x4be53b(0x731)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x4be53b(0x341)]+'):\x20Query\x20params:\x20'+_0x534cf5);let _0x257bfc={'where':{'_id':_0x534cf5}};return await this['repository'][_0x4be53b(0x589)][_0x4be53b(0x3c4)](_0x257bfc,this[_0x4be53b(0x5ba)]['wuid']);}catch(_0x1e7b71){throw this[_0x4be53b(0x731)][_0x4be53b(0x6aa)](this[_0x4be53b(0x1df)]+'\x20('+this[_0x4be53b(0x5ba)][_0x4be53b(0x341)]+_0x4be53b(0x6eb)+(_0x1e7b71 instanceof Error?_0x1e7b71[_0x4be53b(0x15c)]:JSON['stringify'](_0x1e7b71,null,0x2))),new m(_0x4be53b(0x41a)+_0x1e7b71['message']);}}async[a0_0x397951(0x560)](_0x437dcf){const _0x1b95be=a0_0x397951;try{return this[_0x1b95be(0x731)]['verbose'](this[_0x1b95be(0x1df)]+'\x20('+this[_0x1b95be(0x5ba)][_0x1b95be(0x341)]+_0x1b95be(0x4bf)),await this[_0x1b95be(0x436)][_0x1b95be(0x589)][_0x1b95be(0x317)](_0x437dcf,this[_0x1b95be(0x5ba)][_0x1b95be(0x341)]);}catch(_0xc44a6d){throw this[_0x1b95be(0x731)][_0x1b95be(0x6aa)](this[_0x1b95be(0x1df)]+'\x20('+this['instance']['wuid']+_0x1b95be(0x36a)+(_0xc44a6d instanceof Error?_0xc44a6d[_0x1b95be(0x15c)]:JSON['stringify'](_0xc44a6d,null,0x2))),new m(_0x1b95be(0x6d7)+_0xc44a6d[_0x1b95be(0x15c)]);}}async['deleteConversation'](_0x34ce12){const _0x48609a=a0_0x397951;try{return this[_0x48609a(0x731)][_0x48609a(0x545)](this[_0x48609a(0x1df)]+'\x20('+this[_0x48609a(0x5ba)]['wuid']+'):\x20Deletando\x20conversa...'),this[_0x48609a(0x731)][_0x48609a(0x545)](this[_0x48609a(0x1df)]+'\x20('+this[_0x48609a(0x5ba)][_0x48609a(0x341)]+_0x48609a(0x256)+_0x34ce12),(await this[_0x48609a(0x436)]['flowConversation']['deleteOne']({'where':{'_id':_0x34ce12}},this['instance'][_0x48609a(0x341)]))['deletedCount']===0x0?{'message':_0x48609a(0x151)}:{'message':'Conversa\x20deletada\x20com\x20sucesso.'};}catch(_0xee741e){throw this['logger'][_0x48609a(0x6aa)](this[_0x48609a(0x1df)]+'\x20('+this[_0x48609a(0x5ba)][_0x48609a(0x341)]+_0x48609a(0x445)+(_0xee741e instanceof Error?_0xee741e[_0x48609a(0x15c)]:JSON[_0x48609a(0x38d)](_0xee741e,null,0x2))),new m(_0x48609a(0x597)+_0xee741e['message']);}}async[a0_0x397951(0x296)](_0x1e4a26){const _0x5bd0a4=a0_0x397951;try{let {_id:_0x3273fe,chatLog:_0x1d1d02,status:_0x3db21e}=_0x1e4a26;if(!_0x3273fe)return{'message':'O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.'};let _0x2e5c8c={};if(_0x3db21e!==void 0x0&&(_0x2e5c8c[_0x5bd0a4(0x51c)]=_0x3db21e),Object[_0x5bd0a4(0x4cc)](_0x2e5c8c)[_0x5bd0a4(0x4c6)]===0x0)return{'message':_0x5bd0a4(0x751)};let _0x114b29=await this[_0x5bd0a4(0x436)]['flowConversation'][_0x5bd0a4(0x30a)](_0x3273fe,_0x2e5c8c,this[_0x5bd0a4(0x5ba)][_0x5bd0a4(0x341)]);return _0x114b29||{'message':_0x5bd0a4(0x205)};}catch(_0x4f38d5){throw this['logger'][_0x5bd0a4(0x6aa)](this[_0x5bd0a4(0x1df)]+'\x20('+this[_0x5bd0a4(0x5ba)][_0x5bd0a4(0x341)]+_0x5bd0a4(0x770)+(_0x4f38d5 instanceof Error?_0x4f38d5['message']:JSON[_0x5bd0a4(0x38d)](_0x4f38d5,null,0x2))),new m(_0x5bd0a4(0x1af)+_0x4f38d5[_0x5bd0a4(0x15c)]);}}async[a0_0x397951(0x3e8)](_0x151fdf){const _0x548757=a0_0x397951;try{_0x151fdf['_id']=this[_0x548757(0x79b)](_0x151fdf[_0x548757(0x578)]);let {_id:_0x29c61a,leadInfo:_0x54ae4a}=_0x151fdf;if(!_0x29c61a)throw new Error(_0x548757(0x6a7));let _0x502132=(_0x12c723,_0x3a070b,_0x2f8b5d)=>{const _0x11dad7=_0x548757;_0x2f8b5d[_0x11dad7(0x334)](_0x55034f=>{const _0x435f61=_0x11dad7;_0x12c723[_0x55034f]!==void 0x0&&(_0x3a070b[_0x435f61(0x4f4)+_0x55034f]=_0x12c723[_0x55034f]);});},_0x4cad34={};if(_0x502132(_0x54ae4a,_0x4cad34,[_0x548757(0x61c),_0x548757(0x716),_0x548757(0x617),_0x548757(0x74c),_0x548757(0x51c),_0x548757(0x631),_0x548757(0x568),'atendimentoAberto',_0x548757(0x1d0)]),Array[_0x548757(0x43d)](_0x54ae4a[_0x548757(0x152)])&&(_0x4cad34['leadInfo.customFields']=_0x54ae4a['customFields'][_0x548757(0x530)](_0x27277f=>({'_id':_0x27277f[_0x548757(0x578)],'value':_0x27277f[_0x548757(0x15f)]}))),_0x151fdf[_0x548757(0x1f9)]['desativadoFluxoAte']!==void 0x0&&(_0x4cad34[_0x548757(0x255)]=Number(_0x151fdf[_0x548757(0x1f9)][_0x548757(0x5cf)])),_0x151fdf[_0x548757(0x58f)]!==void 0x0&&(_0x4cad34[_0x548757(0x58f)]=Number(_0x151fdf[_0x548757(0x58f)])),Object[_0x548757(0x4cc)](_0x4cad34)[_0x548757(0x4c6)]===0x0)throw new Error(_0x548757(0x751));let _0x2366dd=await this[_0x548757(0x436)][_0x548757(0x2e4)]['findOne']({'where':{'_id':_0x151fdf[_0x548757(0x578)]}},this['instance'][_0x548757(0x341)]);if(!_0x2366dd){let _0x54be09=(await this[_0x548757(0x260)]({'numbers':[_0x151fdf[_0x548757(0x578)]]}))[0x0];if(!_0x54be09[_0x548757(0x562)]&&!(0x0,y[_0x548757(0x76e)])(_0x54be09[_0x548757(0x2f4)])&&!_0x54be09[_0x548757(0x2f4)][_0x548757(0x2fb)]('@broadcast'))throw new m(_0x54be09);_0x151fdf[_0x548757(0x578)]=_0x54be09['jid'];}if(_0x151fdf[_0x548757(0x159)]!==void 0x0){let _0x479d12=await this[_0x548757(0x436)][_0x548757(0x5ee)]['find']({'where':{}},this['instance'][_0x548757(0x341)]),_0x5cf7b2=new Set(_0x2366dd[_0x548757(0x159)]||[]),_0x44e8c1=new Set(_0x151fdf['labels']),_0x5c4584=new Set(_0x479d12[_0x548757(0x530)](_0xe8ea82=>_0xe8ea82['_id'])),_0x3d80af=[..._0x44e8c1][_0x548757(0x6ac)](_0x182cc0=>!_0x5cf7b2[_0x548757(0x41b)](_0x182cc0)&&_0x5c4584[_0x548757(0x41b)](_0x182cc0)),_0x3ab573=[..._0x5cf7b2][_0x548757(0x6ac)](_0x26a9ed=>!_0x44e8c1[_0x548757(0x41b)](_0x26a9ed));for(let _0x1612c2 of _0x3d80af)await this[_0x548757(0x558)](_0x1612c2,_0x151fdf[_0x548757(0x578)]),_0x5cf7b2[_0x548757(0x78b)](_0x1612c2);for(let _0x7e544d of _0x3ab573)await this[_0x548757(0x648)](_0x7e544d,_0x151fdf[_0x548757(0x578)]),_0x5cf7b2[_0x548757(0x777)](_0x7e544d);_0x4cad34[_0x548757(0x159)]=[..._0x5cf7b2];}let _0x3e8c18=await this[_0x548757(0x436)][_0x548757(0x2e4)][_0x548757(0x30a)]({'where':{'_id':_0x151fdf[_0x548757(0x578)]}},_0x4cad34,this[_0x548757(0x5ba)][_0x548757(0x341)]);return _0x3e8c18&&q(this[_0x548757(0x1df)],_0x548757(0x740),{'chat':_0x3e8c18}),_0x3e8c18?(this[_0x548757(0x731)][_0x548757(0x545)](this[_0x548757(0x1df)]+'\x20('+this[_0x548757(0x5ba)][_0x548757(0x341)]+_0x548757(0x43c)+JSON['stringify'](_0x3e8c18,null,0x2)),_0x3e8c18):{'message':_0x548757(0x2d1)};}catch(_0x365e1d){throw this[_0x548757(0x731)][_0x548757(0x6aa)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20editar\x20o\x20chat:\x20'+(_0x365e1d instanceof Error?_0x365e1d[_0x548757(0x15c)]:JSON[_0x548757(0x38d)](_0x365e1d,null,0x2))),new m('Erro\x20ao\x20editar\x20o\x20chat:\x20'+_0x365e1d[_0x548757(0x15c)]);}}async[a0_0x397951(0x558)](_0x36b561,_0x36a09a){const _0x3f80b6=a0_0x397951;try{await this[_0x3f80b6(0x577)][_0x3f80b6(0x1a5)](_0x36a09a,_0x36b561),console['log'](_0x3f80b6(0x47c)+_0x36b561+'\x20adicionado\x20ao\x20chat\x20'+_0x36a09a+_0x3f80b6(0x24f));}catch(_0x3fbe2b){console[_0x3f80b6(0x6aa)](_0x3f80b6(0x514)+_0x36b561+'\x20ao\x20chat\x20'+_0x36a09a+':',_0x3fbe2b);}}async['RemoveChatLabel'](_0x3a8d49,_0x307091){const _0x5e27f7=a0_0x397951;try{await this['client'][_0x5e27f7(0x3ac)](_0x307091,_0x3a8d49),console[_0x5e27f7(0x1aa)](_0x5e27f7(0x47c)+_0x3a8d49+_0x5e27f7(0x19e)+_0x307091+'\x20com\x20sucesso.');}catch(_0x192faf){console[_0x5e27f7(0x6aa)](_0x5e27f7(0x4e8)+_0x3a8d49+'\x20do\x20chat\x20'+_0x307091+':',_0x192faf);}}async[a0_0x397951(0x2df)](_0x3d80fb){const _0x3fb668=a0_0x397951;try{let _0x232051=await this[_0x3fb668(0x436)][_0x3fb668(0x4ca)][_0x3fb668(0x790)](this[_0x3fb668(0x5ba)][_0x3fb668(0x341)]),_0x2a5764=_0x3d80fb[_0x3fb668(0x578)]?_0x232051['agents']['findIndex'](_0x568d64=>_0x568d64[_0x3fb668(0x578)]===_0x3d80fb['_id']):-0x1;if(_0x3d80fb['delete']&&_0x2a5764>-0x1)_0x232051[_0x3fb668(0x3f6)][_0x3fb668(0x4ec)](_0x2a5764,0x1);else{if(_0x2a5764>-0x1){let _0x4a6a7c=_0x232051[_0x3fb668(0x3f6)][_0x2a5764];_0x3d80fb[_0x3fb668(0x52a)]&&(_0x4a6a7c[_0x3fb668(0x52a)]=_0x3d80fb['fone']),_0x3d80fb['name']&&(_0x4a6a7c[_0x3fb668(0x346)]=_0x3d80fb[_0x3fb668(0x346)]),_0x3d80fb[_0x3fb668(0x617)]&&(_0x4a6a7c[_0x3fb668(0x617)]=_0x3d80fb['email']),_0x3d80fb['role']&&(_0x4a6a7c['role']=_0x3d80fb[_0x3fb668(0x435)]);}else _0x232051[_0x3fb668(0x3f6)][_0x3fb668(0x367)]({'_id':_0x3d80fb['_id']||new ne['default'][(_0x3fb668(0x32f))]['ObjectId']()[_0x3fb668(0x622)](),'fone':_0x3d80fb['fone'],'name':_0x3d80fb[_0x3fb668(0x346)],'email':_0x3d80fb[_0x3fb668(0x617)],'role':_0x3d80fb[_0x3fb668(0x435)]});}let _0x86185b={'agents':_0x232051['agents']},_0x5b038d=await this[_0x3fb668(0x436)][_0x3fb668(0x4ca)]['update'](_0x86185b,this[_0x3fb668(0x5ba)][_0x3fb668(0x341)]);return this[_0x3fb668(0x745)]=_0x5b038d,this[_0x3fb668(0x731)]['verbose'](this[_0x3fb668(0x1df)]+'\x20('+this[_0x3fb668(0x5ba)][_0x3fb668(0x341)]+_0x3fb668(0x4a1)),this[_0x3fb668(0x731)][_0x3fb668(0x545)](this['instanceName']+'\x20('+this[_0x3fb668(0x5ba)][_0x3fb668(0x341)]+'):\x20'+this['AutomateSystem']),_0x5b038d;}catch(_0x5b2041){throw this[_0x3fb668(0x731)][_0x3fb668(0x6aa)](this['instanceName']+'\x20('+this[_0x3fb668(0x5ba)][_0x3fb668(0x341)]+_0x3fb668(0x294)+(_0x5b2041 instanceof Error?_0x5b2041['message']:JSON[_0x3fb668(0x38d)](_0x5b2041,null,0x2))),new m(_0x3fb668(0x297)+_0x5b2041[_0x3fb668(0x15c)]);}}async[a0_0x397951(0x3c7)](_0x456fb0){const _0x507e03=a0_0x397951;try{let _0x2a2fc4=await this[_0x507e03(0x436)][_0x507e03(0x4ca)][_0x507e03(0x790)](this[_0x507e03(0x5ba)][_0x507e03(0x341)]),_0x143ddb=_0x456fb0[_0x507e03(0x578)]?_0x2a2fc4[_0x507e03(0x152)][_0x507e03(0x72a)](_0x235866=>_0x235866[_0x507e03(0x578)]===_0x456fb0[_0x507e03(0x578)]):-0x1,_0x4b9387=!0x1,_0x2b3d76=_0x2a2fc4[_0x507e03(0x152)][_0x507e03(0x56a)](_0x8855bd=>_0x8855bd[_0x507e03(0x45a)]===_0x456fb0['order']);if(_0x456fb0[_0x507e03(0x777)]&&_0x143ddb>-0x1)_0x2a2fc4[_0x507e03(0x152)][_0x507e03(0x4ec)](_0x143ddb,0x1),_0x4b9387=!0x0;else{if(_0x143ddb>-0x1){if(_0x2a2fc4[_0x507e03(0x152)][_0x507e03(0x56a)](_0x2bcb8c=>_0x2bcb8c[_0x507e03(0x346)]===_0x456fb0[_0x507e03(0x346)]&&_0x2bcb8c[_0x507e03(0x578)]!==_0x456fb0[_0x507e03(0x578)]))throw new Error(_0x507e03(0x40c));let _0xd8ee2b=_0x2a2fc4['customFields'][_0x143ddb];_0x456fb0[_0x507e03(0x45a)]&&(_0x2b3d76||!Number[_0x507e03(0x2af)](_0x456fb0[_0x507e03(0x45a)]))&&(_0xd8ee2b['order']=_0x456fb0[_0x507e03(0x45a)],_0x4b9387=!0x0),_0x456fb0[_0x507e03(0x346)]&&(_0xd8ee2b['name']=_0x456fb0['name']);}else{if(_0x2a2fc4['customFields'][_0x507e03(0x56a)](_0xf846d=>_0xf846d[_0x507e03(0x346)]===_0x456fb0['name']&&_0xf846d['_id']!==_0x456fb0['_id']))throw new Error(_0x507e03(0x40c));_0x2a2fc4[_0x507e03(0x152)]['push']({'_id':_0x456fb0[_0x507e03(0x578)]||new ne[(_0x507e03(0x349))][(_0x507e03(0x32f))][(_0x507e03(0x4b7))]()[_0x507e03(0x622)](),'order':_0x456fb0[_0x507e03(0x45a)],'name':_0x456fb0[_0x507e03(0x346)]}),_0x4b9387=!0x0;}}if(_0x4b9387){_0x2a2fc4['customFields'][_0x507e03(0x656)]((_0x41ee6f,_0x1502f9)=>_0x41ee6f[_0x507e03(0x45a)]>_0x1502f9[_0x507e03(0x45a)]?0x1:_0x1502f9[_0x507e03(0x45a)]>_0x41ee6f[_0x507e03(0x45a)]?-0x1:0x0);for(let _0xac2b6b=0x0;_0xac2b6b<_0x2a2fc4[_0x507e03(0x152)][_0x507e03(0x4c6)];_0xac2b6b++)_0x2a2fc4[_0x507e03(0x152)][_0xac2b6b][_0x507e03(0x45a)]=_0xac2b6b+0x1;}let _0x1f8613=await this[_0x507e03(0x436)][_0x507e03(0x4ca)][_0x507e03(0x166)](_0x2a2fc4,this['instance'][_0x507e03(0x341)]);return this[_0x507e03(0x745)]=_0x1f8613,this[_0x507e03(0x731)]['verbose'](this[_0x507e03(0x1df)]+'\x20('+this[_0x507e03(0x5ba)][_0x507e03(0x341)]+_0x507e03(0x31c)),this['logger'][_0x507e03(0x545)](this[_0x507e03(0x1df)]+'\x20('+this['instance'][_0x507e03(0x341)]+_0x507e03(0x43c)+this[_0x507e03(0x745)]),_0x1f8613;}catch(_0x2c50d8){throw this['logger'][_0x507e03(0x6aa)](this[_0x507e03(0x1df)]+'\x20('+this[_0x507e03(0x5ba)][_0x507e03(0x341)]+_0x507e03(0x2c2)+(_0x2c50d8 instanceof Error?_0x2c50d8[_0x507e03(0x15c)]:JSON[_0x507e03(0x38d)](_0x2c50d8,null,0x2))),new m(_0x507e03(0x4ea)+_0x2c50d8[_0x507e03(0x15c)]);}}async[a0_0x397951(0x5b3)](_0x3a7ae4){const _0x45c86a=a0_0x397951;try{let _0x16902f=await this[_0x45c86a(0x436)][_0x45c86a(0x4ca)]['findOrCreate'](this[_0x45c86a(0x5ba)][_0x45c86a(0x341)]);if(!_0x16902f)throw new Error(_0x45c86a(0x48c));let _0x5613ac={'_id':_0x16902f[_0x45c86a(0x578)],'flowConfig':{'enabled':_0x3a7ae4[_0x45c86a(0x63b)]??_0x16902f['flowConfig']['enabled'],'ignoreGroups':_0x3a7ae4[_0x45c86a(0x580)]??_0x16902f[_0x45c86a(0x67c)]['ignoreGroups'],'prefixCommand':_0x3a7ae4[_0x45c86a(0x606)]??_0x16902f[_0x45c86a(0x67c)][_0x45c86a(0x606)],'stopConversation':_0x3a7ae4['stopConversation']??_0x16902f[_0x45c86a(0x67c)]['stopConversation'],'stopMinutes':_0x3a7ae4[_0x45c86a(0x450)]??_0x16902f[_0x45c86a(0x67c)]['stopMinutes'],'stopWhenYouSendMsg':_0x3a7ae4['stopWhenYouSendMsg']??_0x16902f[_0x45c86a(0x67c)][_0x45c86a(0x421)]}},_0x5f40fc=await this[_0x45c86a(0x436)]['automateSystem'][_0x45c86a(0x166)](_0x5613ac,this[_0x45c86a(0x5ba)][_0x45c86a(0x341)]);return this[_0x45c86a(0x745)]=_0x5f40fc,this[_0x45c86a(0x731)][_0x45c86a(0x545)](this[_0x45c86a(0x1df)]+'\x20('+this[_0x45c86a(0x5ba)][_0x45c86a(0x341)]+'):\x20alterando\x20this.AutomateSystem'),this[_0x45c86a(0x731)][_0x45c86a(0x545)](this[_0x45c86a(0x1df)]+'\x20('+this[_0x45c86a(0x5ba)][_0x45c86a(0x341)]+'):\x20'+this[_0x45c86a(0x745)]),setTimeout(()=>this[_0x45c86a(0x6a4)](),0x7d0),_0x5f40fc;}catch(_0x5e227f){throw this[_0x45c86a(0x731)][_0x45c86a(0x6aa)](this['instanceName']+'\x20('+this['instance'][_0x45c86a(0x341)]+_0x45c86a(0x59d)+(_0x5e227f instanceof Error?_0x5e227f[_0x45c86a(0x15c)]:JSON[_0x45c86a(0x38d)](_0x5e227f,null,0x2))),new m(_0x45c86a(0x380)+_0x5e227f['message']);}}async[a0_0x397951(0x42c)](){const _0xd0e9f4=a0_0x397951;try{let _0x181ec1=await this[_0xd0e9f4(0x436)][_0xd0e9f4(0x4ca)]['findOrCreate'](this[_0xd0e9f4(0x5ba)][_0xd0e9f4(0x341)]);return this[_0xd0e9f4(0x745)]=_0x181ec1,this['logger'][_0xd0e9f4(0x545)](this[_0xd0e9f4(0x1df)]+'\x20('+this['instance'][_0xd0e9f4(0x341)]+_0xd0e9f4(0x699)),this[_0xd0e9f4(0x731)]['verbose'](this[_0xd0e9f4(0x745)]),_0x181ec1;}catch(_0x2b4f4f){throw this[_0xd0e9f4(0x731)]['error'](this[_0xd0e9f4(0x1df)]+'\x20('+this[_0xd0e9f4(0x5ba)]['wuid']+_0xd0e9f4(0x5c6)+(_0x2b4f4f instanceof Error?_0x2b4f4f[_0xd0e9f4(0x15c)]:JSON[_0xd0e9f4(0x38d)](_0x2b4f4f,null,0x2))),new m(_0xd0e9f4(0x1c9)+_0x2b4f4f[_0xd0e9f4(0x15c)]);}}async[a0_0x397951(0x2a4)](){const _0x5b8eb4=a0_0x397951;this[_0x5b8eb4(0x46f)]&&clearTimeout(this[_0x5b8eb4(0x46f)]),this[_0x5b8eb4(0x46f)]=setTimeout(()=>{this['checkAndRestartProcess']();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x397951(0x285)](){const _0x2eaa4a=a0_0x397951;Date[_0x2eaa4a(0x287)]()-this[_0x2eaa4a(0x4db)]>=0x1d4c0&&(this['logger']['verbose'](this[_0x2eaa4a(0x1df)]+'\x20('+this[_0x2eaa4a(0x5ba)][_0x2eaa4a(0x341)]+_0x2eaa4a(0x288)),this[_0x2eaa4a(0x543)]=null,this[_0x2eaa4a(0x4db)]=0x0,this[_0x2eaa4a(0x640)]=0x0,await this['scheduleNextCheck']());}async['scheduleNextCheck'](){const _0x238cee=a0_0x397951;let _0x5e54ed=()=>{const _0x84a520=a0_0x44db;this[_0x84a520(0x731)][_0x84a520(0x545)](this[_0x84a520(0x1df)]+'\x20('+this['instance'][_0x84a520(0x341)]+'):\x20this.processingScheduleMessageId:\x20'+this[_0x84a520(0x543)]+_0x84a520(0x443));},_0x362a47=async()=>{const _0x55e8bf=a0_0x44db;this[_0x55e8bf(0x731)][_0x55e8bf(0x545)](this[_0x55e8bf(0x1df)]+'\x20('+this[_0x55e8bf(0x5ba)][_0x55e8bf(0x341)]+'):\x20Procurando\x20mensagens\x20para\x20envio');let _0x446284=Date[_0x55e8bf(0x287)]()-0xc*0x3c*0x3c*0x3e8,_0x54e38a={'where':{'status':{'$in':[_0x55e8bf(0x5c5),_0x55e8bf(0x4b1)]},'$or':[{'when':{'$lte':Date[_0x55e8bf(0x287)](),'$gte':_0x446284}},{'when':0x0}]}};return await this[_0x55e8bf(0x436)]['scheduleMessage'][_0x55e8bf(0x317)](_0x54e38a,this[_0x55e8bf(0x5ba)]['wuid']);},_0x27b051=async _0x21aa81=>{const _0x442893=a0_0x44db;for(let _0x584f64 of _0x21aa81){let _0x48caa4={'_id':_0x584f64['_id'],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x442893(0x287)]()-0x1770}}]},_0x2b375e={'startSend':Date[_0x442893(0x287)]()};if(!await this[_0x442893(0x436)][_0x442893(0x343)][_0x442893(0x30a)](_0x48caa4,_0x2b375e,this[_0x442893(0x5ba)][_0x442893(0x341)]))return;if(!this[_0x442893(0x492)]){this[_0x442893(0x731)][_0x442893(0x545)](this[_0x442893(0x1df)]+'\x20('+this[_0x442893(0x5ba)][_0x442893(0x341)]+_0x442893(0x1e3));break;}if(_0x584f64[_0x442893(0x52f)]===_0x442893(0x6d4)&&!this['AutomateSystem']?.['flowConfig'][_0x442893(0x63b)]){this[_0x442893(0x731)][_0x442893(0x6aa)](this['instanceName']+'\x20('+this[_0x442893(0x5ba)][_0x442893(0x341)]+_0x442893(0x1bb));continue;}(!_0x584f64['remoteJidsRemaining']||_0x584f64[_0x442893(0x5e9)]['length']===0x0)&&(_0x584f64=await this[_0x442893(0x436)][_0x442893(0x343)]['updateOneById'](_0x584f64[_0x442893(0x578)],{'status':_0x442893(0x4b1),'remoteJidsRemaining':[..._0x584f64['remoteJids']]},this[_0x442893(0x5ba)]['wuid']));for(let _0x5aba9a of _0x584f64[_0x442893(0x5e9)]){if(await this['setRestartTimer'](),this[_0x442893(0x4db)]=Date[_0x442893(0x287)](),_0x584f64[_0x442893(0x58c)]['some'](_0x5f37de=>_0x5f37de[_0x442893(0x686)]===_0x5aba9a)){this[_0x442893(0x731)][_0x442893(0x545)](this[_0x442893(0x1df)]+'\x20('+this[_0x442893(0x5ba)][_0x442893(0x341)]+_0x442893(0x17b)+_0x5aba9a+_0x442893(0x6c9));continue;}if(!this['isConnected']){this[_0x442893(0x731)]['verbose'](this[_0x442893(0x1df)]+'\x20('+this[_0x442893(0x5ba)][_0x442893(0x341)]+_0x442893(0x61a));break;}if(!this[_0x442893(0x543)]){this[_0x442893(0x731)]['verbose'](this[_0x442893(0x1df)]+'\x20('+this[_0x442893(0x5ba)]['wuid']+_0x442893(0x692)+_0x584f64['_id']+'\x20foi\x20interrompido\x20pelo\x20usuário.');break;}if(_0x584f64[_0x442893(0x52f)]===_0x442893(0x6d4)&&!this[_0x442893(0x745)]?.[_0x442893(0x67c)][_0x442893(0x63b)]){this[_0x442893(0x731)][_0x442893(0x6aa)](this[_0x442893(0x1df)]+'\x20('+this[_0x442893(0x5ba)][_0x442893(0x341)]+_0x442893(0x1bb));break;}let _0x22a0ab={'remoteJid':_0x5aba9a,'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date[_0x442893(0x287)]()},_0x2baf24=null;try{let _0x1c5fab=await this[_0x442893(0x4c9)](_0x5aba9a,_0x584f64);_0x22a0ab[_0x442893(0x6aa)]=_0x1c5fab[_0x442893(0x6aa)],_0x22a0ab['id']=_0x1c5fab[_0x442893(0x6aa)]?null:_0x1c5fab['id'],_0x22a0ab['error_log']=_0x1c5fab[_0x442893(0x6aa)]?_0x1c5fab[_0x442893(0x750)]?_0x1c5fab['detail'][_0x442893(0x622)]():'':null;let _0x3b4569={'$push':{'messagesSend':_0x22a0ab},'$pull':{'remoteJidsRemaining':_0x5aba9a}},_0x5c8a1d=_0x584f64[_0x442893(0x578)];if(_0x2baf24=await this[_0x442893(0x436)][_0x442893(0x343)][_0x442893(0x1bc)](_0x5c8a1d,_0x3b4569,this['instance'][_0x442893(0x341)]),_0x1c5fab[_0x442893(0x6aa)])continue;let _0x51aac6=this['getDelay'](_0x584f64[_0x442893(0x4b8)],_0x584f64['delaySecMax']);await this[_0x442893(0x47e)](_0x51aac6);}catch(_0x350520){this[_0x442893(0x731)][_0x442893(0x6aa)](this[_0x442893(0x1df)]+'\x20('+this[_0x442893(0x5ba)][_0x442893(0x341)]+_0x442893(0x3ba)+_0x5aba9a+':\x20'+(_0x350520 instanceof Error?_0x350520[_0x442893(0x15c)]:JSON['stringify'](_0x350520,null,0x2))),_0x22a0ab['error']=!0x0,_0x22a0ab['error_log']=_0x350520[_0x442893(0x15c)];let _0x56df42={'$push':{'messagesSend':_0x22a0ab},'$pull':{'remoteJidsRemaining':_0x5aba9a}},_0x9dca4a=_0x584f64[_0x442893(0x578)];_0x2baf24=await this[_0x442893(0x436)]['scheduleMessage'][_0x442893(0x1bc)](_0x9dca4a,_0x56df42,this[_0x442893(0x5ba)][_0x442893(0x341)]);}finally{if(_0x2baf24&&_0x2baf24[_0x442893(0x51c)]===_0x442893(0x51d)){this[_0x442893(0x731)]['verbose'](this['instanceName']+'\x20('+this[_0x442893(0x5ba)][_0x442893(0x341)]+_0x442893(0x692)+_0x584f64[_0x442893(0x578)]+_0x442893(0x503));break;}}}let _0x474294=await this[_0x442893(0x436)][_0x442893(0x343)][_0x442893(0x62f)](_0x584f64[_0x442893(0x578)],this[_0x442893(0x5ba)][_0x442893(0x341)]);if(_0x474294[_0x442893(0x5e9)][_0x442893(0x4c6)]===0x0&&_0x474294[_0x442893(0x51c)]!=='stopped'){let _0x5019ef={'$set':{'status':'done'}},_0x513bbb=_0x474294[_0x442893(0x578)];await this[_0x442893(0x436)]['scheduleMessage'][_0x442893(0x1bc)](_0x513bbb,_0x5019ef,this['instance'][_0x442893(0x341)]);}await new Promise(_0x3e5fe2=>setTimeout(_0x3e5fe2,0x1388));}},_0x2904df=async()=>{const _0x1c211c=a0_0x44db;let _0x5b7586={'where':{'status':'scheduled','when':{'$gt':Date[_0x1c211c(0x287)]()}}},_0x57dd93=await this[_0x1c211c(0x436)]['scheduleMessage'][_0x1c211c(0x3c4)](_0x5b7586,this[_0x1c211c(0x5ba)][_0x1c211c(0x341)]);_0x57dd93&&_0x57dd93[_0x1c211c(0x72f)]-Date['now']()<=0x5265c00?this[_0x1c211c(0x640)]=_0x57dd93['when']-Date[_0x1c211c(0x287)]():this['delayMessage']=(0x3c+Math[_0x1c211c(0x227)](Math['random']()*0x3c))*0x3c*0x3e8,this[_0x1c211c(0x640)]=Math[_0x1c211c(0x28e)](this['delayMessage'],0x7d0);let _0x5b1aa3=Math[_0x1c211c(0x40f)](this[_0x1c211c(0x640)]/0xea60);if(_0x57dd93){let _0x25ebda=new Date(_0x57dd93[_0x1c211c(0x72f)])[_0x1c211c(0x1ba)]();this[_0x1c211c(0x731)]['verbose'](this['instanceName']+'\x20('+this[_0x1c211c(0x5ba)][_0x1c211c(0x341)]+'):\x20encontrado\x20próxima\x20mensagem\x20para\x20'+_0x25ebda+_0x1c211c(0x760)+_0x5b1aa3+_0x1c211c(0x69f));}else this['logger'][_0x1c211c(0x545)](this[_0x1c211c(0x1df)]+'\x20('+this['instance'][_0x1c211c(0x341)]+_0x1c211c(0x6ad)+_0x5b1aa3+_0x1c211c(0x69f));setTimeout(()=>this[_0x1c211c(0x6a4)](),this[_0x1c211c(0x640)]);};if(this[_0x238cee(0x543)]){await this[_0x238cee(0x2a4)](),_0x5e54ed();return;}if(!this['isConnected']){this[_0x238cee(0x731)][_0x238cee(0x545)](this['instanceName']+'\x20('+this[_0x238cee(0x5ba)][_0x238cee(0x341)]+_0x238cee(0x6e3)),this[_0x238cee(0x543)]=null,this[_0x238cee(0x4db)]=0x0,this[_0x238cee(0x640)]=0x0;return;}try{let _0x234083=await _0x362a47();_0x234083[_0x238cee(0x4c6)]===0x0?this[_0x238cee(0x731)][_0x238cee(0x545)](this['instanceName']+'\x20('+this[_0x238cee(0x5ba)]['wuid']+_0x238cee(0x621)):(this[_0x238cee(0x543)]=_0x234083[0x0][_0x238cee(0x578)],await _0x27b051(_0x234083)),await _0x2904df(),this[_0x238cee(0x543)]=null;}catch(_0x22a4ea){this[_0x238cee(0x731)][_0x238cee(0x6aa)](_0x238cee(0x653)+(_0x22a4ea instanceof Error?_0x22a4ea[_0x238cee(0x15c)]:JSON[_0x238cee(0x38d)](_0x22a4ea,null,0x2)));}}[a0_0x397951(0x4ba)](_0x5999be,_0x407773){const _0x27e422=a0_0x397951;return _0x5999be=Math['max'](0.5,_0x5999be),_0x407773=Math['min'](Math[_0x27e422(0x28e)](0x3,_0x407773),0x78),Math[_0x27e422(0x227)](Math[_0x27e422(0x3a3)]()*(_0x407773-_0x5999be+0x1)+_0x5999be)*0x3e8;}[a0_0x397951(0x47e)](_0xe68d53){return new Promise(_0xf053a9=>setTimeout(_0xf053a9,_0xe68d53));}async[a0_0x397951(0x1ca)](_0x24c432){const _0x2dee41=a0_0x397951;if(!this['AutomateSystem']&&(await this['getAutomateSystem'](),!this['AutomateSystem']))return null;_0x24c432=this[_0x2dee41(0x79b)](_0x24c432);let _0x570a45=await this[_0x2dee41(0x436)][_0x2dee41(0x2e4)]['findOne']({'where':{'_id':_0x24c432}},this['instance']['wuid']),_0x6d727a={};if(_0x570a45&&_0x570a45[_0x2dee41(0x1f9)]){let _0x462cb6=_0x570a45['leadInfo'];typeof _0x462cb6['nome']==_0x2dee41(0x22b)&&(_0x6d727a[_0x2dee41(0x61c)]=_0x462cb6[_0x2dee41(0x61c)]),typeof _0x462cb6[_0x2dee41(0x716)]==_0x2dee41(0x22b)&&(_0x6d727a['nomecompleto']=_0x462cb6[_0x2dee41(0x716)]),typeof _0x462cb6[_0x2dee41(0x617)]==_0x2dee41(0x22b)&&(_0x6d727a[_0x2dee41(0x617)]=_0x462cb6[_0x2dee41(0x617)]),typeof _0x462cb6[_0x2dee41(0x74c)]==_0x2dee41(0x22b)&&(_0x6d727a[_0x2dee41(0x74c)]=_0x462cb6[_0x2dee41(0x74c)]),typeof _0x462cb6[_0x2dee41(0x51c)]==_0x2dee41(0x22b)&&(_0x6d727a['status']=_0x462cb6[_0x2dee41(0x51c)]),typeof _0x462cb6['notas']==_0x2dee41(0x22b)&&(_0x6d727a[_0x2dee41(0x631)]=_0x462cb6[_0x2dee41(0x631)]),typeof _0x462cb6['responsavelid']=='string'&&(_0x6d727a[_0x2dee41(0x1d0)]=_0x462cb6[_0x2dee41(0x1d0)]),Array['isArray'](_0x462cb6[_0x2dee41(0x568)])&&(_0x6d727a['tags']=_0x462cb6[_0x2dee41(0x568)][_0x2dee41(0x60e)](',\x20'));}return _0x570a45&&_0x570a45[_0x2dee41(0x1f9)]&&_0x570a45[_0x2dee41(0x1f9)][_0x2dee41(0x152)]&&_0x570a45['leadInfo'][_0x2dee41(0x152)][_0x2dee41(0x334)](_0x4eea77=>{const _0x3c758c=_0x2dee41;let _0x1ef3be=this['AutomateSystem']?.['customFields'][_0x3c758c(0x317)](_0x3a3f46=>_0x3a3f46[_0x3c758c(0x578)]===_0x4eea77[_0x3c758c(0x578)]);_0x1ef3be&&(_0x6d727a[_0x1ef3be['name']]=_0x4eea77[_0x3c758c(0x15f)]);}),_0x6d727a;}async[a0_0x397951(0x319)](_0x55aa99,_0x336bdf){const _0xd65464=a0_0x397951;let _0x68d415=await this[_0xd65464(0x1ca)](_0x336bdf);return this['replaceVariables'](_0x55aa99,_0x68d415);}async[a0_0x397951(0x599)](_0x104061){const _0x594988=a0_0x397951;try{if(this[_0x594988(0x731)][_0x594988(0x545)](this[_0x594988(0x1df)]+'\x20('+this[_0x594988(0x5ba)][_0x594988(0x341)]+_0x594988(0x313)),_0x104061[_0x594988(0x777)]&&_0x104061[_0x594988(0x578)]){if(this[_0x594988(0x543)]===_0x104061[_0x594988(0x578)][_0x594988(0x622)]())throw new Error(_0x594988(0x584));let _0x2711c6=await this['repository']['scheduleMessage'][_0x594988(0x3db)](_0x104061[_0x594988(0x578)],this['instance'][_0x594988(0x341)]);return setTimeout(()=>this[_0x594988(0x6a4)](),0x7d0),_0x2711c6;}let _0x28fb3c;if(_0x104061[_0x594988(0x578)]&&(_0x28fb3c=await this['repository'][_0x594988(0x343)][_0x594988(0x62f)](_0x104061[_0x594988(0x578)],this[_0x594988(0x5ba)][_0x594988(0x341)])),_0x28fb3c){let _0x440c9d;if(this[_0x594988(0x543)]===_0x28fb3c[_0x594988(0x578)]['toString']())_0x440c9d={'$set':{'status':_0x104061[_0x594988(0x51c)]}};else{let {_id:_0x52013c,..._0x370ebe}=_0x104061;_0x440c9d={'$set':_0x370ebe};}let _0x13c321=await this[_0x594988(0x436)][_0x594988(0x343)][_0x594988(0x1bc)](_0x104061[_0x594988(0x578)],_0x440c9d,this[_0x594988(0x5ba)][_0x594988(0x341)]);return setTimeout(()=>this[_0x594988(0x6a4)](),0x7d0),_0x13c321;}else{_0x104061[_0x594988(0x169)]=this[_0x594988(0x5ba)][_0x594988(0x341)];let _0x286429=await this[_0x594988(0x436)][_0x594988(0x343)][_0x594988(0x3be)](_0x104061,this[_0x594988(0x5ba)][_0x594988(0x341)]);return setTimeout(()=>this[_0x594988(0x6a4)](),0x7d0),_0x286429;}}catch(_0xaf6d49){throw this[_0x594988(0x731)]['error'](this[_0x594988(0x1df)]+'\x20('+this[_0x594988(0x5ba)][_0x594988(0x341)]+_0x594988(0x472)+(_0xaf6d49 instanceof Error?_0xaf6d49[_0x594988(0x15c)]:JSON[_0x594988(0x38d)](_0xaf6d49,null,0x2))),new m(_0x594988(0x2f9)+_0xaf6d49[_0x594988(0x15c)]);}}async[a0_0x397951(0x6e8)](){const _0x31fe35=a0_0x397951;try{return await this[_0x31fe35(0x436)]['scheduleMessage'][_0x31fe35(0x317)]({'where':{}},this[_0x31fe35(0x5ba)][_0x31fe35(0x341)]);}catch(_0x4d2948){throw this['logger']['error'](this[_0x31fe35(0x1df)]+'\x20('+this['instance'][_0x31fe35(0x341)]+'):\x20Erro\x20ao\x20buscar\x20Schedule\x20Messages:'+(_0x4d2948 instanceof Error?_0x4d2948['message']:JSON[_0x31fe35(0x38d)](_0x4d2948,null,0x2))),new m('Erro:'+_0x4d2948[_0x31fe35(0x15c)]);}}async[a0_0x397951(0x17a)](){const _0x2c2fe8=a0_0x397951;try{let _0x4e4a3c={'status':_0x2c2fe8(0x798)},_0x470716=await this['repository'][_0x2c2fe8(0x343)][_0x2c2fe8(0x315)](_0x4e4a3c,this[_0x2c2fe8(0x5ba)][_0x2c2fe8(0x341)]);if(!_0x470716['error'])this[_0x2c2fe8(0x731)][_0x2c2fe8(0x545)](this[_0x2c2fe8(0x1df)]+'\x20('+this[_0x2c2fe8(0x5ba)][_0x2c2fe8(0x341)]+_0x2c2fe8(0x414));else throw new Error(_0x470716[_0x2c2fe8(0x6aa)][_0x2c2fe8(0x15c)]||'Erro\x20desconhecido\x20ao\x20deletar\x20mensagens');return this['getScheduleMessage']();}catch(_0x25da53){throw this[_0x2c2fe8(0x731)][_0x2c2fe8(0x6aa)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x2c2fe8(0x6f5)+(_0x25da53 instanceof Error?_0x25da53[_0x2c2fe8(0x15c)]:JSON[_0x2c2fe8(0x38d)](_0x25da53,null,0x2))),new m(_0x2c2fe8(0x2f9)+_0x25da53[_0x2c2fe8(0x15c)]);}}async['SendScheduleMessage'](_0x4ea678,_0x4860b7){const _0x370c6d=a0_0x397951;try{if(_0x4860b7[_0x370c6d(0x52f)]==='flow'&&!this['AutomateSystem']?.[_0x370c6d(0x67c)][_0x370c6d(0x63b)])return this[_0x370c6d(0x731)][_0x370c6d(0x6aa)](this[_0x370c6d(0x1df)]+'\x20('+this[_0x370c6d(0x5ba)]['wuid']+_0x370c6d(0x42e)),{'error':!0x0,'detail':_0x370c6d(0x3aa)};switch(_0x4860b7['type']){case _0x370c6d(0x4cd):return await this['scheduleSendText'](_0x4860b7,_0x4ea678);case _0x370c6d(0x6d9):return await this[_0x370c6d(0x311)](_0x4860b7,_0x4ea678);case _0x370c6d(0x464):return await this[_0x370c6d(0x198)](_0x4860b7,_0x4ea678);case'flow':let _0x555d2d=new Pe();return _0x555d2d[_0x370c6d(0x346)]=_0x4860b7['flowName'],_0x555d2d['remoteJid']=_0x4ea678,await this[_0x370c6d(0x73a)](_0x555d2d);break;default:return this[_0x370c6d(0x731)]['error'](this[_0x370c6d(0x1df)]+'\x20('+this['instance'][_0x370c6d(0x341)]+'):\x20Comando\x20desconhecido:\x20'+_0x4860b7[_0x370c6d(0x52f)]),{'error':!0x0,'detail':_0x370c6d(0x658)};}}catch(_0x1bab7e){return this[_0x370c6d(0x731)][_0x370c6d(0x6aa)](this[_0x370c6d(0x1df)]+'\x20('+this[_0x370c6d(0x5ba)][_0x370c6d(0x341)]+_0x370c6d(0x43f)+(_0x1bab7e instanceof Error?_0x1bab7e[_0x370c6d(0x15c)]:JSON[_0x370c6d(0x38d)](_0x1bab7e,null,0x2))),{'error':!0x0,'detail':_0x1bab7e['message']};}}[a0_0x397951(0x5ae)](_0x4ea750){const _0x594f51=a0_0x397951;let _0x207a8c=_0x4ea750[_0x594f51(0x4dc)]('|'),_0x256caa=Math[_0x594f51(0x227)](Math[_0x594f51(0x3a3)]()*_0x207a8c[_0x594f51(0x4c6)]);return _0x207a8c[_0x256caa]['trim']();}async[a0_0x397951(0x550)](_0x2e9f60,_0x14edfd){const _0x1a4327=a0_0x397951;if(this[_0x1a4327(0x731)][_0x1a4327(0x545)](this['instanceName']+'\x20('+this[_0x1a4327(0x5ba)][_0x1a4327(0x341)]+_0x1a4327(0x1e0)),!_0x2e9f60[_0x1a4327(0x15c)]['text']||_0x2e9f60[_0x1a4327(0x15c)][_0x1a4327(0x4cd)][_0x1a4327(0x4c6)]===0x0)return{'error':!0x0,'detail':'sem\x20texto\x20na\x20mensagem'};let _0x2637eb=this[_0x1a4327(0x5ae)](_0x2e9f60[_0x1a4327(0x15c)][_0x1a4327(0x4cd)]),_0x1640d9=await this[_0x1a4327(0x319)](_0x2637eb,_0x14edfd),_0x431b44={'number':_0x14edfd,'options':{'delay':_0x2e9f60[_0x1a4327(0x15c)][_0x1a4327(0x561)]},'textMessage':{'text':_0x1640d9}},_0x5f5178=null;try{let _0x14dda9=await this[_0x1a4327(0x6b8)](_0x431b44);if(_0x14dda9&&_0x14dda9[_0x1a4327(0x51c)])return{'error':!0x1,'id':_0x14dda9[_0x1a4327(0x226)]['id']};_0x5f5178=JSON[_0x1a4327(0x38d)](_0x14dda9),this[_0x1a4327(0x731)]['verbose'](this['instanceName']+'\x20('+this[_0x1a4327(0x5ba)][_0x1a4327(0x341)]+_0x1a4327(0x43c)+_0x5f5178);}catch(_0x1ad300){this[_0x1a4327(0x731)]['error'](this[_0x1a4327(0x1df)]+'\x20('+this[_0x1a4327(0x5ba)][_0x1a4327(0x341)]+_0x1a4327(0x4e5)+(_0x1ad300 instanceof Error?_0x1ad300[_0x1a4327(0x15c)]:JSON[_0x1a4327(0x38d)](_0x1ad300,null,0x2))),_0x5f5178=_0x1ad300[_0x1a4327(0x15c)];}if(_0x5f5178)return{'error':!0x0,'detail':(typeof _0x5f5178=='object'?JSON[_0x1a4327(0x38d)](_0x5f5178,null,0x2):_0x5f5178)[_0x1a4327(0x4cf)](/[\[\]{}\n]/g,'\x20')[_0x1a4327(0x4cf)](/  +/g,'\x20')};}async[a0_0x397951(0x311)](_0x35e8e8,_0x2a3bf2){const _0x150011=a0_0x397951;this[_0x150011(0x731)]['verbose'](this['instanceName']+'\x20('+this[_0x150011(0x5ba)][_0x150011(0x341)]+_0x150011(0x753));let _0x570314;if(_0x35e8e8[_0x150011(0x15c)][_0x150011(0x4cd)]&&_0x35e8e8[_0x150011(0x15c)][_0x150011(0x4cd)][_0x150011(0x4c6)]>0x0){let _0x446597=this[_0x150011(0x5ae)](_0x35e8e8[_0x150011(0x15c)][_0x150011(0x4cd)]);_0x570314=await this[_0x150011(0x319)](_0x446597,_0x2a3bf2);}let _0x48dc14={'number':_0x2a3bf2,'options':{'delay':_0x35e8e8['message'][_0x150011(0x561)]},'mediaMessage':{'mediatype':_0x35e8e8[_0x150011(0x15c)]['mediatype'],'caption':_0x570314,'media':_0x35e8e8[_0x150011(0x15c)]['urlOrBase64']}},_0x488956=null;try{let _0x445b55=await this[_0x150011(0x3f1)](_0x48dc14);if(_0x445b55&&_0x445b55[_0x150011(0x51c)])return{'error':!0x1,'id':_0x445b55['key']['id']};_0x488956=JSON[_0x150011(0x38d)](_0x445b55),this['logger']['verbose'](this[_0x150011(0x1df)]+'\x20('+this[_0x150011(0x5ba)][_0x150011(0x341)]+_0x150011(0x43c)+_0x488956);}catch(_0x34e062){this[_0x150011(0x731)][_0x150011(0x6aa)](this[_0x150011(0x1df)]+'\x20('+this[_0x150011(0x5ba)]['wuid']+_0x150011(0x56e)+(_0x34e062 instanceof Error?_0x34e062[_0x150011(0x15c)]:JSON[_0x150011(0x38d)](_0x34e062,null,0x2))),_0x488956=_0x34e062[_0x150011(0x15c)];}if(_0x488956)return{'error':!0x0,'detail':(typeof _0x488956==_0x150011(0x2a1)?JSON[_0x150011(0x38d)](_0x488956,null,0x2):_0x488956)['replace'](/[\[\]{}\n]/g,'\x20')[_0x150011(0x4cf)](/  +/g,'\x20')};}async[a0_0x397951(0x198)](_0x3597f3,_0x5541aa){const _0xf56005=a0_0x397951;this[_0xf56005(0x731)][_0xf56005(0x545)](this[_0xf56005(0x1df)]+'\x20('+this[_0xf56005(0x5ba)][_0xf56005(0x341)]+'):\x20Enviando\x20áudio');let _0x4c47dd={'number':_0x5541aa,'options':{'delay':_0x3597f3[_0xf56005(0x15c)][_0xf56005(0x561)]},'audioMessage':{'audio':_0x3597f3[_0xf56005(0x15c)][_0xf56005(0x628)]}},_0x485d7d=null;try{let _0x1daba2=await this[_0xf56005(0x70f)](_0x4c47dd);if(_0x1daba2&&_0x1daba2[_0xf56005(0x51c)])return{'error':!0x1,'id':_0x1daba2[_0xf56005(0x226)]['id']};_0x485d7d=JSON[_0xf56005(0x38d)](_0x1daba2),this[_0xf56005(0x731)][_0xf56005(0x545)](this[_0xf56005(0x1df)]+'\x20('+this[_0xf56005(0x5ba)]['wuid']+'):\x20'+_0x485d7d);}catch(_0x4987f4){this[_0xf56005(0x731)][_0xf56005(0x6aa)](this[_0xf56005(0x1df)]+'\x20('+this[_0xf56005(0x5ba)][_0xf56005(0x341)]+_0xf56005(0x3ad)+(_0x4987f4 instanceof Error?_0x4987f4['message']:JSON[_0xf56005(0x38d)](_0x4987f4,null,0x2))),_0x485d7d=_0x4987f4[_0xf56005(0x15c)];}if(_0x485d7d)return{'error':!0x0,'detail':(typeof _0x485d7d=='object'?JSON[_0xf56005(0x38d)](_0x485d7d,null,0x2):_0x485d7d)[_0xf56005(0x4cf)](/[\[\]{}\n]/g,'\x20')[_0xf56005(0x4cf)](/  +/g,'\x20')};}},xt=class c{constructor(_0x1637d1,_0xaeae7d,_0x1516b5){const _0x87c5a=a0_0x397951;this[_0x87c5a(0x6ec)]=_0x1637d1,this[_0x87c5a(0x4d2)]=_0xaeae7d,this['repository']=_0x1516b5,this['db']={},this[_0x87c5a(0x565)]={},this['logger']=new v(c[_0x87c5a(0x346)]),this[_0x87c5a(0x725)]={},(this[_0x87c5a(0x177)](),this['noConnection'](),Object[_0x87c5a(0x3de)](this['db'],_0xaeae7d[_0x87c5a(0x624)](_0x87c5a(0x604))),Object[_0x87c5a(0x3de)](this[_0x87c5a(0x565)],_0xaeae7d['get'](_0x87c5a(0x5b9))),this[_0x87c5a(0x402)]=this['db'][_0x87c5a(0x1f6)]?this[_0x87c5a(0x436)]['dbServer']?.['db'](this['db'][_0x87c5a(0x271)][_0x87c5a(0x1ed)]+'-instances'):void 0x0,this[_0x87c5a(0x21c)]=this['redis'][_0x87c5a(0x1f6)]?new oe(this[_0x87c5a(0x565)]):void 0x0);}async[a0_0x397951(0x2d4)](_0x939b25){const _0x316079=a0_0x397951;if(_0x939b25&&!this[_0x316079(0x725)][_0x939b25])throw new L(_0x316079(0x32e)+_0x939b25+'\x22\x20not\x20found');let _0x5e26c0=[];for await(let [_0x4f9373,_0x3c9e80]of Object[_0x316079(0x65c)](this[_0x316079(0x725)]))if(_0x3c9e80&&_0x3c9e80[_0x316079(0x782)][_0x316079(0x6f1)]===_0x316079(0x612)){let _0x394aca=await this[_0x316079(0x436)]['auth']['find'](_0x4f9373);_0x5e26c0[_0x316079(0x367)]({'instance':{'instanceName':_0x4f9373,'apikey':_0x394aca[_0x316079(0x17d)],'owner':_0x3c9e80['wuid'],'profileName':await _0x3c9e80[_0x316079(0x1ea)]()||_0x316079(0x31f),'profilePictureUrl':_0x3c9e80['profilePictureUrl']}});}return _0x5e26c0[_0x316079(0x317)](_0xcba1f2=>_0xcba1f2['instance'][_0x316079(0x1df)]===_0x939b25)??_0x5e26c0;}async['cleaningUp'](_0x54aa52){const _0x3c12bd=a0_0x397951;if(this['db']['ENABLED']&&(await this['repository']['dbServer']['connect'](),(await this[_0x3c12bd(0x402)][_0x3c12bd(0x366)]())[_0x3c12bd(0x4c6)]>0x0&&await this['dbInstance']['dropCollection'](_0x54aa52)),this[_0x3c12bd(0x565)][_0x3c12bd(0x1f6)]){this[_0x3c12bd(0x21c)][_0x3c12bd(0x22f)]=_0x54aa52,await this[_0x3c12bd(0x21c)][_0x3c12bd(0x28c)]();return;}}async[a0_0x397951(0x69b)](){const _0xac0f4b=a0_0x397951;await this[_0xac0f4b(0x6f0)]();let _0xd72aa9=async _0x26eb0d=>{const _0x523a24=_0xac0f4b;let _0x479612=new fe(this['configService'],this[_0x523a24(0x6ec)],this[_0x523a24(0x436)]);_0x479612[_0x523a24(0x1df)]=_0x26eb0d,await _0x479612[_0x523a24(0x3dc)](),this[_0x523a24(0x725)][_0x26eb0d]=_0x479612;};try{if(this[_0xac0f4b(0x565)][_0xac0f4b(0x1f6)]){let _0xa5f41b=await this['cache'][_0xac0f4b(0x1c8)]();_0xa5f41b?.[_0xac0f4b(0x4c6)]>0x0&&_0xa5f41b[_0xac0f4b(0x334)](async _0x3c64ae=>await _0xd72aa9(_0x3c64ae['split'](':')[0x1]));return;}if(this['db'][_0xac0f4b(0x1f6)]){await this[_0xac0f4b(0x436)]['dbServer'][_0xac0f4b(0x180)]();let _0x565310=await this['dbInstance'][_0xac0f4b(0x366)]();_0x565310[_0xac0f4b(0x4c6)]>0x0&&_0x565310[_0xac0f4b(0x334)](async _0x390702=>await _0xd72aa9(_0x390702[_0xac0f4b(0x6f3)][_0xac0f4b(0x4cf)](/^[\w-]+\./,'')));return;}}catch(_0x5aa910){this['logger']['error'](_0x5aa910);}}async['InstancesAsDisconnectedX'](){const _0x17e021=a0_0x397951;let _0x365377=await this['repository']['auth']['findAll'](),_0x27ff5d=_0x365377[_0x17e021(0x6ac)](_0x4a6c0d=>!this[_0x17e021(0x725)][_0x4a6c0d['_id']]&&(_0x4a6c0d[_0x17e021(0x250)]||typeof _0x4a6c0d[_0x17e021(0x250)]>'u'));_0x27ff5d[_0x17e021(0x4c6)]>0x0&&await Promise[_0x17e021(0x579)](_0x27ff5d[_0x17e021(0x530)](async _0x5577b3=>{const _0x5547e8=_0x17e021;let _0x31da7c={'online':!0x1,'lastDisconnect':Date[_0x5547e8(0x287)]()};await this[_0x5547e8(0x436)]['auth'][_0x5547e8(0x409)](_0x31da7c,_0x5577b3[_0x5547e8(0x578)]);}));let _0x18188a=Date[_0x17e021(0x287)]()-0xa*0x18*0x3c*0x3c*0x3e8,_0xd8eff1=_0x365377[_0x17e021(0x6ac)](_0x54d120=>!this['waInstances'][_0x54d120[_0x17e021(0x578)]]&&typeof _0x54d120[_0x17e021(0x303)]<'u'&&_0x54d120[_0x17e021(0x303)]<_0x18188a);_0xd8eff1[_0x17e021(0x4c6)]>0x0&&await Promise[_0x17e021(0x579)](_0xd8eff1['map'](async _0x5f2c2d=>{}));}async[a0_0x397951(0x6f0)](){const _0x502c9b=a0_0x397951;try{let _0x409829={'$or':[{'online':{'$exists':!0x1}},{'lastDisconnect':{'$exists':!0x1}}]},_0x2d9bd2={'online':!0x1,'lastDisconnect':Date[_0x502c9b(0x287)]()},_0x24afc6=await this[_0x502c9b(0x436)]['auth'][_0x502c9b(0x66b)](_0x409829,_0x2d9bd2);console[_0x502c9b(0x1aa)](_0x502c9b(0x708)+_0x24afc6[_0x502c9b(0x42b)]),await this[_0x502c9b(0x3bb)]();}catch(_0x2deed0){console[_0x502c9b(0x6aa)](_0x502c9b(0x507),_0x2deed0);}}async[a0_0x397951(0x3bb)](){const _0x138345=a0_0x397951;try{let _0x314896={'online':!0x1,'lastDisconnect':{'$lt':0x337f9800}},_0x143625=await this['repository']['auth'][_0x138345(0x315)](_0x314896);console['log'](_0x138345(0x52c)+_0x143625[_0x138345(0x42b)]);}catch(_0x3a377e){console['error'](_0x138345(0x18f),_0x3a377e);}}['removeInstance'](){const _0x43adf8=a0_0x397951;this[_0x43adf8(0x6ec)]['on']('remove.instance',async _0x3cb195=>{const _0x317288=_0x43adf8;try{this[_0x317288(0x725)][_0x3cb195]=void 0x0;}catch{}try{this['cleaningUp'](_0x3cb195);}finally{this[_0x317288(0x731)][_0x317288(0x659)]('Instance\x20\x22'+_0x3cb195+_0x317288(0x437));}});}[a0_0x397951(0x43a)](){const _0x5ec61a=a0_0x397951;this[_0x5ec61a(0x6ec)]['on'](_0x5ec61a(0x32c),async _0x3b9318=>{const _0x11290c=_0x5ec61a;try{this[_0x11290c(0x725)][_0x3b9318]=void 0x0;}catch{}try{this['cleaningUp'](_0x3b9318);}finally{this['logger'][_0x11290c(0x659)](_0x11290c(0x32e)+_0x3b9318+_0x11290c(0x29e));}});}},Pt=class extends I{[a0_0x397951(0x50f)](_0x58286e){return js(_0x58286e);}async[a0_0x397951(0x1f0)](_0x435768){const _0x17c3ac=a0_0x397951;if(_0x435768[_0x17c3ac(0x4c6)]!==0x0)try{return{'insertCount':(await this[_0x17c3ac(0x50f)](_0x435768[0x0][_0x17c3ac(0x169)])['insertMany']([..._0x435768]))['length']};}catch(_0xce58ba){return _0xce58ba;}}async[a0_0x397951(0x317)](_0x499c65,_0x513ed1){const _0x56e3e4=a0_0x397951;try{let _0x40cf64=this[_0x56e3e4(0x50f)](_0x513ed1),_0x353807=A(_0x499c65[_0x56e3e4(0x3f8)]);return await _0x40cf64[_0x56e3e4(0x317)](_0x353807)[_0x56e3e4(0x656)]({'lastmsg':-0x1})['limit'](_0x499c65?.[_0x56e3e4(0x162)]??0x0)[_0x56e3e4(0x49e)]();}catch{return[];}}async[a0_0x397951(0x328)](_0x3338bc,_0x8e2a79){const _0x43e3fa=a0_0x397951;try{return await this[_0x43e3fa(0x50f)](_0x8e2a79)[_0x43e3fa(0x315)]({..._0x3338bc[_0x43e3fa(0x3f8)]}),[];}catch(_0x4380e2){return{'error':_0x4380e2?.[_0x43e3fa(0x622)]()};}}async['findOne'](_0x48ec17,_0x1aae81){const _0x310da6=a0_0x397951;try{let _0x1b332e=this['getChatModelForOwner'](_0x1aae81),_0x13d231=A(_0x48ec17[_0x310da6(0x3f8)]);return await _0x1b332e[_0x310da6(0x3c4)](_0x13d231)[_0x310da6(0x49e)]();}catch{return null;}}async[a0_0x397951(0x30a)](_0x4f86cf,_0x2844a1,_0x3eaaa4,_0x4441f7,_0x54221f=a0_0x397951(0x527)){const _0x170cb5=a0_0x397951;try{let _0x283970={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x4441f7},_0x2a77e0=this['getChatModelForOwner'](_0x3eaaa4),_0x581a33=A(_0x4f86cf[_0x170cb5(0x3f8)]),_0xea52c5={};return _0xea52c5[_0x54221f]=_0x2844a1,await _0x2a77e0[_0x170cb5(0x73d)](_0x581a33,_0xea52c5,_0x283970);}catch(_0x235efb){return console['error'](_0x235efb),null;}}async[a0_0x397951(0x4b3)](_0x2b68f7){const _0x48c836=a0_0x397951;try{let _0xb35e39=this['getChatModelForOwner'](_0x2b68f7[0x0]['query'][_0x48c836(0x3f8)][_0x48c836(0x169)]),_0x4124bb=_0x2b68f7[_0x48c836(0x530)](_0x40c245=>({'updateOne':{'filter':{..._0x40c245[_0x48c836(0x2e8)]['where']},'update':{'$set':_0x40c245[_0x48c836(0x166)]}}}));return(await _0xb35e39['bulkWrite'](_0x4124bb))[_0x48c836(0x238)];}catch(_0x15aeb4){return console[_0x48c836(0x6aa)](_0x15aeb4),0x0;}}async[a0_0x397951(0x701)](_0x1225d3,_0x380aab){const _0x4d1d0f=a0_0x397951;if(!Array[_0x4d1d0f(0x43d)](_0x1225d3)||_0x1225d3[_0x4d1d0f(0x4c6)]===0x0)throw new Error('Nenhum\x20chat\x20fornecido\x20para\x20inserção.');try{return(await this[_0x4d1d0f(0x50f)](_0x380aab)['insertMany'](_0x1225d3))[_0x4d1d0f(0x4c6)];}catch(_0x164e90){throw console[_0x4d1d0f(0x6aa)](_0x4d1d0f(0x4de),_0x164e90),_0x164e90;}}async['incrementIsValidAttempts'](_0x587122,_0x4631f8){const _0x3e3df7=a0_0x397951;try{await this[_0x3e3df7(0x50f)](_0x4631f8)[_0x3e3df7(0x30a)]({'_id':_0x587122},{'$inc':{'isValidAttempts':0x1}});}catch(_0x5c0305){throw console[_0x3e3df7(0x6aa)]('Erro\x20ao\x20incrementar\x20isValidAttempts:',_0x5c0305),_0x5c0305;}}async['deleteChat'](_0x36f7ae,_0x37ea08){const _0x2ee9bd=a0_0x397951;try{await this[_0x2ee9bd(0x50f)](_0x37ea08)[_0x2ee9bd(0x3db)]({'_id':_0x36f7ae});}catch(_0x151cbe){throw console[_0x2ee9bd(0x6aa)](_0x2ee9bd(0x5e7),_0x151cbe),_0x151cbe;}}},_t=class extends I{[a0_0x397951(0x611)](_0x5655d4){return ua(_0x5655d4);}async[a0_0x397951(0x30a)](_0x4424f7,_0x12882c,_0x23113f,_0x3479d4){const _0x13d8e8=a0_0x397951;try{let _0xfffc0c={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x3479d4},_0x570ab0=this[_0x13d8e8(0x611)](_0x23113f),_0x277517=A(_0x4424f7[_0x13d8e8(0x3f8)]);return await _0x570ab0[_0x13d8e8(0x73d)](_0x277517,{'$set':_0x12882c},_0xfffc0c);}catch(_0x45f2dc){return console['error'](_0x45f2dc),null;}}async[a0_0x397951(0x317)](_0x12a2c0,_0xd329ee){const _0x193383=a0_0x397951;try{let _0x187a47=this[_0x193383(0x611)](_0xd329ee),_0x12b2e9=A(_0x12a2c0[_0x193383(0x3f8)]);return await _0x187a47[_0x193383(0x317)](_0x12b2e9);}catch(_0x1dcde6){console[_0x193383(0x6aa)](_0x1dcde6);}}async[a0_0x397951(0x777)](_0x229167,_0x439fb5){const _0x5b2f3d=a0_0x397951;try{let _0x74d5f=this[_0x5b2f3d(0x611)](_0x439fb5),_0x4e9c4d=A(_0x229167[_0x5b2f3d(0x3f8)]);await _0x74d5f['deleteMany'](_0x4e9c4d);}catch(_0x3b7310){console['error'](_0x3b7310);}}async[a0_0x397951(0x328)](_0x4808ba){const _0xad2d5a=a0_0x397951;try{return await this[_0xad2d5a(0x611)](_0x4808ba)[_0xad2d5a(0x264)][_0xad2d5a(0x2f7)](),{'success':!0x0};}catch(_0x4b34f3){return console[_0xad2d5a(0x6aa)](_0x4b34f3),{'success':!0x1,'error':_0x4b34f3};}}},$t=class{constructor(_0x4c5f1b){const _0x269e82=a0_0x397951;this[_0x269e82(0x36d)]=_0x4c5f1b;}async[a0_0x397951(0x3e8)]({instanceName:_0x4f96f3},_0x552245){const _0x4b3060=a0_0x397951;return await this[_0x4b3060(0x36d)][_0x4b3060(0x725)][_0x4f96f3][_0x4b3060(0x3e8)](_0x552245);}async['whatsappNumber']({instanceName:_0x303251},_0x1031d3){const _0x33f2a6=a0_0x397951;return await this[_0x33f2a6(0x36d)]['waInstances'][_0x303251][_0x33f2a6(0x260)](_0x1031d3);}async[a0_0x397951(0x6ea)]({instanceName:_0x440311},_0x3fe012){const _0x1ca7bd=a0_0x397951;return await this['waMonitor']['waInstances'][_0x440311][_0x1ca7bd(0x6ea)](_0x3fe012);}async[a0_0x397951(0x154)]({instanceName:_0x2d15cc},_0x319cdf){const _0x215400=a0_0x397951;return await this[_0x215400(0x36d)][_0x215400(0x725)][_0x2d15cc]['markMessageAsRead'](_0x319cdf);}async[a0_0x397951(0x74b)]({instanceName:_0x226c29},_0x3b601f){const _0x2b6831=a0_0x397951;return await this['waMonitor'][_0x2b6831(0x725)][_0x226c29][_0x2b6831(0x74b)](_0x3b601f);}async[a0_0x397951(0x6cf)]({instanceName:_0x5bdf8d},_0x1cdab7){const _0x4205ad=a0_0x397951;return await this[_0x4205ad(0x36d)][_0x4205ad(0x725)][_0x5bdf8d][_0x4205ad(0x6cf)](_0x1cdab7);}async[a0_0x397951(0x63a)]({instanceName:_0x4194bd},_0x507db0){const _0x153fa1=a0_0x397951;return await this['waMonitor'][_0x153fa1(0x725)][_0x4194bd][_0x153fa1(0x444)](_0x507db0['number']);}async[a0_0x397951(0x379)]({instanceName:_0x4d0655},_0x4cad99){const _0xe884c4=a0_0x397951;return await this[_0xe884c4(0x36d)][_0xe884c4(0x725)][_0x4d0655][_0xe884c4(0x379)](_0x4cad99[_0xe884c4(0x5e3)]);}async[a0_0x397951(0x46a)]({instanceName:_0x26a5fd},_0x48dad8){const _0x3f0e35=a0_0x397951;return await this[_0x3f0e35(0x36d)][_0x3f0e35(0x725)][_0x26a5fd][_0x3f0e35(0x46a)](_0x48dad8);}async['fetchContacts']({instanceName:_0x38d835},_0x4b3d12){const _0x95cac2=a0_0x397951;return await this[_0x95cac2(0x36d)][_0x95cac2(0x725)][_0x38d835][_0x95cac2(0x370)](_0x4b3d12);}async[a0_0x397951(0x5da)]({instanceName:_0x440b4b},_0x2c6010){const _0x4f3690=a0_0x397951;return await this[_0x4f3690(0x36d)][_0x4f3690(0x725)][_0x440b4b][_0x4f3690(0x5da)](_0x2c6010);}async['fetchMessages']({instanceName:_0x321a6b},_0x4a9e4f){const _0xb54131=a0_0x397951;return await this[_0xb54131(0x36d)][_0xb54131(0x725)][_0x321a6b]['fetchMessages'](_0x4a9e4f);}async[a0_0x397951(0x286)]({instanceName:_0x35203d}){const _0xcbbd87=a0_0x397951;return await this[_0xcbbd87(0x36d)]['waInstances'][_0x35203d]['fetchLabels']();}async[a0_0x397951(0x705)]({instanceName:_0x15d629}){const _0xb7c31b=a0_0x397951;return await this[_0xb7c31b(0x36d)][_0xb7c31b(0x725)][_0x15d629][_0xb7c31b(0x705)]();}async[a0_0x397951(0x17f)]({instanceName:_0x4399ee}){const _0x16a663=a0_0x397951;return await this[_0x16a663(0x36d)]['waInstances'][_0x4399ee][_0x16a663(0x17f)]();}async['updatePrivacySettings']({instanceName:_0x2f6509},_0x150712){const _0x2c7309=a0_0x397951;return await this['waMonitor'][_0x2c7309(0x725)][_0x2f6509]['updatePrivacySettings'](_0x150712);}async[a0_0x397951(0x3eb)]({instanceName:_0x5e54b4},_0x1afbda){const _0x1a7df4=a0_0x397951;return await this['waMonitor']['waInstances'][_0x5e54b4][_0x1a7df4(0x3eb)](_0x1afbda[_0x1a7df4(0x5e3)]);}async['updateProfileName']({instanceName:_0x150f61},_0x3cb804){const _0x36699b=a0_0x397951;return await this['waMonitor']['waInstances'][_0x150f61][_0x36699b(0x498)](_0x3cb804[_0x36699b(0x346)]);}async['updateProfileStatus']({instanceName:_0x58abb8},_0x2e07f7){const _0x3ecdb7=a0_0x397951;return await this[_0x3ecdb7(0x36d)][_0x3ecdb7(0x725)][_0x58abb8]['updateProfileStatus'](_0x2e07f7['status']);}async[a0_0x397951(0x179)]({instanceName:_0x14c593},_0x26943c){const _0x22655f=a0_0x397951;return await this[_0x22655f(0x36d)][_0x22655f(0x725)][_0x14c593][_0x22655f(0x179)](_0x26943c[_0x22655f(0x768)]);}async[a0_0x397951(0x77d)]({instanceName:_0x486994},_0x516cb1){const _0x56b1ff=a0_0x397951;return await this[_0x56b1ff(0x36d)][_0x56b1ff(0x725)][_0x486994][_0x56b1ff(0x77d)]();}},vs=require('@whiskeysockets/baileys'),kt=class c{constructor(_0x185b80,_0x148cf4,_0x5d4ff4,_0x2d64d7,_0x4034ec){const _0x3b33dc=a0_0x397951;this[_0x3b33dc(0x36d)]=_0x185b80,this['configService']=_0x148cf4,this[_0x3b33dc(0x436)]=_0x5d4ff4,this['eventEmitter']=_0x2d64d7,this[_0x3b33dc(0x1c1)]=_0x4034ec,this[_0x3b33dc(0x731)]=new v(c['name']);}async[a0_0x397951(0x471)]({instanceName:_0x4dea2e,apikey:_0x53b6ef,number:_0x24d524,proxy:_0x31868b=!0x0}){const _0x2f1daa=a0_0x397951;try{let _0x3f4ac9=new fe(this[_0x2f1daa(0x4d2)],this['eventEmitter'],this[_0x2f1daa(0x436)]);_0x3f4ac9['instanceName']=_0x4dea2e,this['waMonitor']['waInstances'][_0x3f4ac9[_0x2f1daa(0x1df)]]=_0x3f4ac9;let _0x580184={};_0x53b6ef?(await this[_0x2f1daa(0x436)][_0x2f1daa(0x417)]['create']({'apikey':_0x53b6ef},_0x4dea2e),_0x580184['apikey']=_0x53b6ef):_0x580184=await this[_0x2f1daa(0x1c1)][_0x2f1daa(0x6e5)]({'instanceName':_0x3f4ac9['instanceName']});let _0x1ac649;return await _0x3f4ac9['connectToWhatsapp'](_0x24d524,_0x31868b),await(0x0,vs['delay'])(0x7d0),_0x1ac649=_0x3f4ac9[_0x2f1daa(0x5d0)],{'instance':{'instanceName':_0x3f4ac9[_0x2f1daa(0x1df)],'status':_0x2f1daa(0x4df)},'hash':_0x580184,'qrcode':_0x1ac649};}catch(_0x3d4c2d){this['logger'][_0x2f1daa(0x6aa)](_0x3d4c2d);}}async[a0_0x397951(0x236)]({instanceName:_0xde512d,number:_0x2c83ad=null,proxy:_0x2d08a8=!0x0}){const _0xe3c8ca=a0_0x397951;try{let _0x525e98=this[_0xe3c8ca(0x36d)][_0xe3c8ca(0x725)][_0xde512d];switch(_0x525e98?.['connectionStatus']?.[_0xe3c8ca(0x6f1)]){case _0xe3c8ca(0x5d8):return await _0x525e98[_0xe3c8ca(0x3dc)](_0x2c83ad,_0x2d08a8),await(0x0,vs[_0xe3c8ca(0x561)])(0x7d0),_0x525e98[_0xe3c8ca(0x5d0)];case'connecting':return _0x525e98[_0xe3c8ca(0x5d0)];default:return await this[_0xe3c8ca(0x700)]({'instanceName':_0xde512d});}}catch(_0x1fe20f){this[_0xe3c8ca(0x731)][_0xe3c8ca(0x1aa)](_0x1fe20f);}}async[a0_0x397951(0x700)]({instanceName:_0x589817}){const _0x2fc163=a0_0x397951;let _0x18bfd4=this['waMonitor'][_0x2fc163(0x725)][_0x589817][_0x2fc163(0x782)],_0x331361=null;_0x18bfd4[_0x2fc163(0x6f1)]===_0x2fc163(0x612)&&_0x589817&&(_0x331361=await this[_0x2fc163(0x36d)][_0x2fc163(0x2d4)](_0x589817));let _0x48d958=null;return _0x18bfd4[_0x2fc163(0x6f1)]==='connecting'&&_0x589817&&(_0x48d958=this[_0x2fc163(0x36d)][_0x2fc163(0x725)][_0x589817][_0x2fc163(0x5d0)]),{'instance':_0x589817,'connectionStatus':_0x18bfd4,'instanceInfo':_0x331361,'qrcode':_0x48d958};}async['restartInstance']({instanceName:_0x292d24}){const _0x50f43e=a0_0x397951;try{return this[_0x50f43e(0x36d)]['waInstances'][_0x292d24]?.[_0x50f43e(0x577)]?.['ws']?.[_0x50f43e(0x5d8)](),{'status':_0x50f43e(0x4d9),'error':!0x1,'response':{'message':_0x50f43e(0x24a)}};}catch(_0xe605a3){this['logger'][_0x50f43e(0x6aa)](_0xe605a3);}}async[a0_0x397951(0x2a9)]({instanceName:_0x3d6fdf}){const _0x16b9f5=a0_0x397951;return _0x3d6fdf?this[_0x16b9f5(0x36d)][_0x16b9f5(0x2d4)](_0x3d6fdf):this['waMonitor']['instanceInfo']();}async['logout']({instanceName:_0x51ec57}){const _0x21dc13=a0_0x397951;try{return await this['waMonitor'][_0x21dc13(0x725)][_0x51ec57]?.[_0x21dc13(0x577)]?.['logout'](_0x21dc13(0x675)+_0x51ec57),{'error':!0x1,'message':_0x21dc13(0x3c1)};}catch(_0x304cdc){throw new O(_0x304cdc[_0x21dc13(0x622)]());}}async[a0_0x397951(0x30d)]({instanceName:_0x4f8809}){const _0x5af513=a0_0x397951;if((await this[_0x5af513(0x700)]({'instanceName':_0x4f8809}))['connectionStatus']['state']===_0x5af513(0x612))throw new m(['Deletion\x20failed','The\x20instance\x20needs\x20to\x20be\x20disconnected']);try{return delete this['waMonitor'][_0x5af513(0x725)][_0x4f8809],{'error':!0x1,'message':_0x5af513(0x38a)};}catch(_0x444c84){throw new m(_0x444c84[_0x5af513(0x622)]());}}},Z=require(a0_0x397951(0x50d)),Lt=class{constructor(_0x5114d7){this['waMonitor']=_0x5114d7;}async[a0_0x397951(0x72e)]({instanceName:_0x539fd1},_0x3865f7){const _0x547d7e=a0_0x397951;return await this['waMonitor'][_0x547d7e(0x725)][_0x539fd1][_0x547d7e(0x6b8)](_0x3865f7);}async[a0_0x397951(0x184)]({instanceName:_0x2321ac},_0x5df127){const _0x40da38=a0_0x397951;return await this[_0x40da38(0x36d)]['waInstances'][_0x2321ac][_0x40da38(0x761)](_0x5df127);}async[a0_0x397951(0x289)]({instanceName:_0x3fb195},_0x1108b3){const _0x323ffc=a0_0x397951;if((0x0,Z[_0x323ffc(0x26b)])(_0x1108b3?.[_0x323ffc(0x3f1)]?.['media'])&&!_0x1108b3?.[_0x323ffc(0x3f1)]?.['fileName'])throw new m(_0x323ffc(0x62a));if((0x0,Z['isURL'])(_0x1108b3?.[_0x323ffc(0x3f1)]?.['media'])||(0x0,Z[_0x323ffc(0x26b)])(_0x1108b3?.[_0x323ffc(0x3f1)]?.[_0x323ffc(0x6d9)]))return await this[_0x323ffc(0x36d)][_0x323ffc(0x725)][_0x3fb195][_0x323ffc(0x3f1)](_0x1108b3);throw new m(_0x323ffc(0x74d));}async['sendSticker']({instanceName:_0x2d130e},_0x26f625){const _0x5c0360=a0_0x397951;if((0x0,Z[_0x5c0360(0x3e4)])(_0x26f625['stickerMessage'][_0x5c0360(0x42f)])||(0x0,Z[_0x5c0360(0x26b)])(_0x26f625[_0x5c0360(0x5a6)][_0x5c0360(0x42f)]))return await this[_0x5c0360(0x36d)]['waInstances'][_0x2d130e][_0x5c0360(0x496)](_0x26f625);throw new m(_0x5c0360(0x74d));}async['sendWhatsAppAudio']({instanceName:_0xf298a9},_0x369032){const _0x2aa5e4=a0_0x397951;if((0x0,Z['isURL'])(_0x369032[_0x2aa5e4(0x478)][_0x2aa5e4(0x464)])||(0x0,Z['isBase64'])(_0x369032[_0x2aa5e4(0x478)][_0x2aa5e4(0x464)]))return await this[_0x2aa5e4(0x36d)][_0x2aa5e4(0x725)][_0xf298a9][_0x2aa5e4(0x70f)](_0x369032);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async['sendButtons']({instanceName:_0x9e73c1},_0x34579e){const _0x2efafa=a0_0x397951;if((0x0,Z[_0x2efafa(0x26b)])(_0x34579e['buttonMessage'][_0x2efafa(0x3f1)]?.[_0x2efafa(0x6d9)])&&!_0x34579e[_0x2efafa(0x3c3)][_0x2efafa(0x3f1)]?.[_0x2efafa(0x20e)])throw new m(_0x2efafa(0x62a));return await this[_0x2efafa(0x36d)]['waInstances'][_0x9e73c1]['buttonMessage'](_0x34579e);}async['sendLocation']({instanceName:_0x2de35b},_0x126a3c){const _0x2935ba=a0_0x397951;return await this[_0x2935ba(0x36d)][_0x2935ba(0x725)][_0x2de35b]['locationMessage'](_0x126a3c);}async['sendPoll']({instanceName:_0x4853f7},_0x343f40){const _0x476843=a0_0x397951;return await this['waMonitor'][_0x476843(0x725)][_0x4853f7]['pollMessage'](_0x343f40);}async[a0_0x397951(0x57e)]({instanceName:_0x4d1a57},_0x4f4103){const _0x17aaff=a0_0x397951;return await this['waMonitor'][_0x17aaff(0x725)][_0x4d1a57]['listMessage'](_0x4f4103);}async[a0_0x397951(0x22c)]({instanceName:_0x48ad57},_0x15b115){const _0x18c182=a0_0x397951;return await this[_0x18c182(0x36d)]['waInstances'][_0x48ad57]['contactMessage'](_0x15b115);}async[a0_0x397951(0x671)]({instanceName:_0x118228},_0x5427f8){const _0x201c49=a0_0x397951;if(!_0x5427f8[_0x201c49(0x707)][_0x201c49(0x37c)]['match'](/[^\(\)\w\sà-ú"-\+]+/))throw new m('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this[_0x201c49(0x36d)]['waInstances'][_0x118228]['reactionMessage'](_0x5427f8);}async[a0_0x397951(0x3e2)]({instanceName:_0x43fcaa},_0x22d75c){const _0x20a6e2=a0_0x397951;return await this['waMonitor'][_0x20a6e2(0x725)][_0x43fcaa]['statusMessage'](_0x22d75c);}},Er=require(a0_0x397951(0x512)),Ns=require(a0_0x397951(0x5ac)),Ft=class c{constructor(_0xc99097,_0x1e6330,_0x46a10c){const _0x4a121b=a0_0x397951;this[_0x4a121b(0x4d2)]=_0xc99097,this['waMonitor']=_0x1e6330,this[_0x4a121b(0x436)]=_0x46a10c,this[_0x4a121b(0x731)]=new v(c[_0x4a121b(0x346)]);}async[a0_0x397951(0x33d)](_0x52a74d){const _0x2c3eab=a0_0x397951;let _0x2fd2f1=this[_0x2c3eab(0x4d2)]['get'](_0x2c3eab(0x6be))['JWT'],_0x53901f=(0x0,Er[_0x2c3eab(0x4b2)])({'instanceName':_0x52a74d[_0x2c3eab(0x1df)],'apiName':ze,'tokenId':(0x0,Ns['v4'])()},_0x2fd2f1[_0x2c3eab(0x451)],{'expiresIn':_0x2fd2f1[_0x2c3eab(0x556)],'encoding':_0x2c3eab(0x4bb),'subject':_0x2c3eab(0x5fb)}),_0x2b3140=await this['repository']['auth'][_0x2c3eab(0x409)]({'jwt':_0x53901f},_0x52a74d[_0x2c3eab(0x1df)]);if(_0x2b3140['error'])throw this[_0x2c3eab(0x731)]['error']({'localError':c[_0x2c3eab(0x346)]+_0x2c3eab(0x407),'error':_0x2b3140[_0x2c3eab(0x6aa)]}),new m(_0x2c3eab(0x493),_0x2b3140[_0x2c3eab(0x6aa)]?.[_0x2c3eab(0x622)]());return{'jwt':_0x53901f};}async[a0_0x397951(0x17d)](_0x1da4f0){const _0x1c0a04=a0_0x397951;let _0x38044b=(0x0,Ns['v4'])()[_0x1c0a04(0x647)](),_0x54413c=await this['repository'][_0x1c0a04(0x417)][_0x1c0a04(0x409)]({'apikey':_0x38044b},_0x1da4f0[_0x1c0a04(0x1df)]);if(_0x54413c[_0x1c0a04(0x6aa)])throw this['logger'][_0x1c0a04(0x6aa)]({'localError':c[_0x1c0a04(0x346)]+_0x1c0a04(0x407),'error':_0x54413c[_0x1c0a04(0x6aa)]}),new m(_0x1c0a04(0x493),_0x54413c['error']?.['toString']());return{'apikey':_0x38044b};}async[a0_0x397951(0x6e5)](_0x3f6453){const _0x1547da=a0_0x397951;let _0xb95d61=this['configService']['get'](_0x1547da(0x6be));return await this[_0xb95d61[_0x1547da(0x639)]](_0x3f6453);}},Ut=class{constructor(_0x34d5ca){const _0x40df24=a0_0x397951;this[_0x40df24(0x36d)]=_0x34d5ca;}async[a0_0x397951(0x4b0)](_0x262deb,_0x281f4f){const _0x427cc7=a0_0x397951;return await this[_0x427cc7(0x36d)][_0x427cc7(0x725)][_0x262deb['instanceName']][_0x427cc7(0x4b0)](_0x281f4f);}async['updateGroupPicture'](_0x596636,_0x335241){const _0x182eae=a0_0x397951;return await this[_0x182eae(0x36d)][_0x182eae(0x725)][_0x596636[_0x182eae(0x1df)]][_0x182eae(0x6b1)](_0x335241);}async[a0_0x397951(0x495)](_0x12f9cb,_0x47fcb9){const _0x5b1add=a0_0x397951;return await this[_0x5b1add(0x36d)]['waInstances'][_0x12f9cb[_0x5b1add(0x1df)]][_0x5b1add(0x495)](_0x47fcb9);}async['groupName'](_0x3675bb,_0x3afacf){const _0x2c574d=a0_0x397951;return await this['waMonitor'][_0x2c574d(0x725)][_0x3675bb[_0x2c574d(0x1df)]][_0x2c574d(0x5b8)](_0x3afacf);}async[a0_0x397951(0x446)](_0x3b86f7,_0x23d96c){const _0x48e0f5=a0_0x397951;return await this[_0x48e0f5(0x36d)][_0x48e0f5(0x725)][_0x3b86f7['instanceName']]['groupSetting'](_0x23d96c);}async[a0_0x397951(0x36c)](_0x31fa73,_0x33a2b1){const _0x144fc6=a0_0x397951;return await this['waMonitor']['waInstances'][_0x31fa73[_0x144fc6(0x1df)]]['findGroup'](_0x33a2b1);}async[a0_0x397951(0x3cb)](_0x5c2116){const _0x48ff91=a0_0x397951;return await this[_0x48ff91(0x36d)][_0x48ff91(0x725)][_0x5c2116[_0x48ff91(0x1df)]][_0x48ff91(0x3cb)]();}async[a0_0x397951(0x65e)](_0x538c17,_0xdb54c0){const _0x365ddc=a0_0x397951;return await this[_0x365ddc(0x36d)][_0x365ddc(0x725)][_0x538c17[_0x365ddc(0x1df)]][_0x365ddc(0x65e)](_0xdb54c0);}async[a0_0x397951(0x2e7)](_0x16411b,_0x2cdbd9){const _0x5f3815=a0_0x397951;return await this[_0x5f3815(0x36d)][_0x5f3815(0x725)][_0x16411b[_0x5f3815(0x1df)]][_0x5f3815(0x2e7)](_0x2cdbd9);}async[a0_0x397951(0x5e4)](_0x20bf7d,_0x444644){const _0xb4bdde=a0_0x397951;return await this['waMonitor'][_0xb4bdde(0x725)][_0x20bf7d[_0xb4bdde(0x1df)]][_0xb4bdde(0x5e4)](_0x444644);}async[a0_0x397951(0x21e)](_0x5c5120,_0x5a97e5){const _0x226b79=a0_0x397951;return await this[_0x226b79(0x36d)][_0x226b79(0x725)][_0x5c5120['instanceName']][_0x226b79(0x21e)](_0x5a97e5);}async[a0_0x397951(0x16d)](_0x19fd54,_0x299bcf){const _0x1efc94=a0_0x397951;return await this[_0x1efc94(0x36d)][_0x1efc94(0x725)][_0x19fd54[_0x1efc94(0x1df)]][_0x1efc94(0x57a)](_0x299bcf);}async['toggleEphemeral'](_0x34ed41,_0x37110b){const _0xbbc9d4=a0_0x397951;return await this['waMonitor'][_0xbbc9d4(0x725)][_0x34ed41[_0xbbc9d4(0x1df)]][_0xbbc9d4(0x484)](_0x37110b);}async[a0_0x397951(0x2b7)](_0xdb8e66,_0x517837){const _0x45f99c=a0_0x397951;return await this[_0x45f99c(0x36d)]['waInstances'][_0xdb8e66[_0x45f99c(0x1df)]][_0x45f99c(0x2b7)](_0x517837);}},Jt=class{constructor(_0x6bea1c){const _0x468e76=a0_0x397951;this[_0x468e76(0x36d)]=_0x6bea1c;}['create'](_0x541d25,_0x528de8){const _0x18c2d2=a0_0x397951;return this[_0x18c2d2(0x36d)][_0x18c2d2(0x725)][_0x541d25['instanceName']]['setWebhook'](_0x528de8);}async[a0_0x397951(0x317)](_0x5e53c9){const _0x22180b=a0_0x397951;try{return await this[_0x22180b(0x36d)]['waInstances'][_0x5e53c9[_0x22180b(0x1df)]][_0x22180b(0x201)]();}catch{return{'enabled':null,'url':''};}}},Yd=new v(a0_0x397951(0x15d)),jt=class{constructor(_0x53930c){const _0x25de60=a0_0x397951;this[_0x25de60(0x36d)]=_0x53930c;}async[a0_0x397951(0x599)](_0x628212,_0x32ac9d){const _0x44624b=a0_0x397951;return await this[_0x44624b(0x36d)][_0x44624b(0x725)][_0x628212[_0x44624b(0x1df)]][_0x44624b(0x599)](_0x32ac9d);}async[a0_0x397951(0x6e8)](_0x21bdda){const _0x419f21=a0_0x397951;return await this[_0x419f21(0x36d)][_0x419f21(0x725)][_0x21bdda[_0x419f21(0x1df)]][_0x419f21(0x6e8)]();}async[a0_0x397951(0x17a)](_0x2c2f44){const _0x3ddb51=a0_0x397951;return await this[_0x3ddb51(0x36d)]['waInstances'][_0x2c2f44['instanceName']][_0x3ddb51(0x17a)]();}async[a0_0x397951(0x42c)](_0x4228c3){const _0x9d93b8=a0_0x397951;return await this['waMonitor'][_0x9d93b8(0x725)][_0x4228c3[_0x9d93b8(0x1df)]][_0x9d93b8(0x42c)]();}async[a0_0x397951(0x2df)](_0x2b6713,_0x3d4b8c){const _0x1751d1=a0_0x397951;return await this[_0x1751d1(0x36d)][_0x1751d1(0x725)][_0x2b6713[_0x1751d1(0x1df)]][_0x1751d1(0x2df)](_0x3d4b8c);}async[a0_0x397951(0x3c7)](_0x210814,_0x4c15d9){const _0x4ff053=a0_0x397951;return await this['waMonitor']['waInstances'][_0x210814[_0x4ff053(0x1df)]][_0x4ff053(0x3c7)](_0x4c15d9);}async[a0_0x397951(0x5b3)](_0x522ca0,_0x328c36){const _0x3ae315=a0_0x397951;return await this[_0x3ae315(0x36d)][_0x3ae315(0x725)][_0x522ca0[_0x3ae315(0x1df)]][_0x3ae315(0x5b3)](_0x328c36);}async['startFlow'](_0x4d82da,_0x5e1eb1){const _0x33bc8f=a0_0x397951;return await this[_0x33bc8f(0x36d)][_0x33bc8f(0x725)][_0x4d82da[_0x33bc8f(0x1df)]][_0x33bc8f(0x73a)](_0x5e1eb1);}async[a0_0x397951(0x327)](_0x23476a,_0x4a792d){const _0x1ad336=a0_0x397951;return await this[_0x1ad336(0x36d)][_0x1ad336(0x725)][_0x23476a['instanceName']][_0x1ad336(0x327)](_0x4a792d);}async[a0_0x397951(0x560)](_0x2f5c95,_0x505dd0){const _0x3aabdb=a0_0x397951;return await this[_0x3aabdb(0x36d)][_0x3aabdb(0x725)][_0x2f5c95[_0x3aabdb(0x1df)]]['fetchConversation'](_0x505dd0);}async['editConversation'](_0x3a0d65,_0x490e11){const _0x1a65a8=a0_0x397951;return await this[_0x1a65a8(0x36d)]['waInstances'][_0x3a0d65[_0x1a65a8(0x1df)]][_0x1a65a8(0x296)](_0x490e11);}async[a0_0x397951(0x405)](_0x420ef2,_0x166759){const _0x5d39a0=a0_0x397951;return await this['waMonitor'][_0x5d39a0(0x725)][_0x420ef2[_0x5d39a0(0x1df)]][_0x5d39a0(0x405)](_0x166759);}async['getFlow'](_0x1e4f87,_0x96f72f){const _0x291380=a0_0x397951;return await this[_0x291380(0x36d)]['waInstances'][_0x1e4f87['instanceName']][_0x291380(0x58a)](_0x96f72f[_0x291380(0x346)]);}async[a0_0x397951(0x5e8)](_0x5211a1,_0x227c45){const _0x156488=a0_0x397951;return await this['waMonitor']['waInstances'][_0x5211a1[_0x156488(0x1df)]][_0x156488(0x5e8)](_0x227c45);}async[a0_0x397951(0x187)](_0x4bfbe7,_0x4c289e){const _0x4b2e39=a0_0x397951;return await this[_0x4b2e39(0x36d)][_0x4b2e39(0x725)][_0x4bfbe7[_0x4b2e39(0x1df)]]['editFlow'](_0x4c289e);}async[a0_0x397951(0x78f)](_0x2e2eb7,_0x4cc207){const _0x2abbf2=a0_0x397951;return await this['waMonitor'][_0x2abbf2(0x725)][_0x2e2eb7[_0x2abbf2(0x1df)]][_0x2abbf2(0x78f)](_0x4cc207);}async['editFlowReply'](_0x28e83c,_0x25e42c){const _0x4759eb=a0_0x397951;return await this[_0x4759eb(0x36d)][_0x4759eb(0x725)][_0x28e83c[_0x4759eb(0x1df)]][_0x4759eb(0x447)](_0x25e42c);}async['editFlowGroup'](_0x24d4cc,_0x1049e2){const _0x27fd6a=a0_0x397951;return await this['waMonitor'][_0x27fd6a(0x725)][_0x24d4cc[_0x27fd6a(0x1df)]][_0x27fd6a(0x467)](_0x1049e2);}async[a0_0x397951(0x57d)](_0x329755,_0x4f1873){const _0x3600ac=a0_0x397951;return await this[_0x3600ac(0x36d)][_0x3600ac(0x725)][_0x329755[_0x3600ac(0x1df)]][_0x3600ac(0x57d)](_0x4f1873);}async[a0_0x397951(0x706)](_0x223a4f,_0x339965){const _0x4e7be9=a0_0x397951;return await this[_0x4e7be9(0x36d)][_0x4e7be9(0x725)][_0x223a4f[_0x4e7be9(0x1df)]][_0x4e7be9(0x706)](_0x339965);}async[a0_0x397951(0x279)](_0x1912b4,_0x472ef6){const _0x2b5744=a0_0x397951;return await this[_0x2b5744(0x36d)][_0x2b5744(0x725)][_0x1912b4[_0x2b5744(0x1df)]]['editFlowVariable'](_0x472ef6);}async[a0_0x397951(0x51f)](_0x23a5a5,_0x583082){const _0x26c141=a0_0x397951;return await this[_0x26c141(0x36d)][_0x26c141(0x725)][_0x23a5a5[_0x26c141(0x1df)]][_0x26c141(0x51f)](_0x583082[_0x26c141(0x346)]);}async[a0_0x397951(0x749)](_0x98345f){const _0x26683f=a0_0x397951;return await this[_0x26683f(0x36d)][_0x26683f(0x725)][_0x98345f[_0x26683f(0x1df)]][_0x26683f(0x749)]();}},qt=class{constructor(_0x2a4e46){const _0x156c84=a0_0x397951;this[_0x156c84(0x6af)]=_0x2a4e46;}async[a0_0x397951(0x5f6)](_0x2f267f,_0x132603){return this['webhookService']['create'](_0x2f267f,_0x132603);}async[a0_0x397951(0x201)](_0x4d9bdc){const _0xecbdc5=a0_0x397951;return this[_0xecbdc5(0x6af)][_0xecbdc5(0x317)](_0x4d9bdc);}},Vt=class extends I{constructor(_0xd77904,_0x2da9b3){const _0x431b5f=a0_0x397951;super(_0x2da9b3),this[_0x431b5f(0x6b6)]=_0xd77904,this[_0x431b5f(0x4d2)]=_0x2da9b3;}async[a0_0x397951(0x409)](_0x56668c,_0x33167f){const _0x27413a=a0_0x397951;try{return this[_0x27413a(0x3ee)][_0x27413a(0x1f6)]?{'insertCount':(await this[_0x27413a(0x6b6)][_0x27413a(0x270)]({'_id':_0x33167f},{..._0x56668c},{'upsert':!0x0}))[_0x27413a(0x238)]}:{'insertCount':0x1};}catch(_0x35f6f1){return _0x35f6f1;}}async[a0_0x397951(0x777)](_0x39c9e2){const _0x557a61=a0_0x397951;try{if(this[_0x557a61(0x3ee)]['ENABLED']){await this[_0x557a61(0x6b6)][_0x557a61(0x3db)]({'_id':_0x39c9e2});return;}}catch(_0x4b94f8){return{'error':_0x4b94f8};}}async[a0_0x397951(0x317)](_0x3dfaa2){const _0x3cac5f=a0_0x397951;try{if(this[_0x3cac5f(0x3ee)][_0x3cac5f(0x1f6)])return await this[_0x3cac5f(0x6b6)][_0x3cac5f(0x3c4)]({'_id':_0x3dfaa2});}catch{return{};}}},Bt=class extends I{constructor(_0x33396f,_0x23bf0b){const _0x52406b=a0_0x397951;super(_0x23bf0b),this[_0x52406b(0x35e)]=_0x33396f,this[_0x52406b(0x4d2)]=_0x23bf0b,this[_0x52406b(0x417)]=_0x23bf0b[_0x52406b(0x624)](_0x52406b(0x6be));}async[a0_0x397951(0x409)](_0x2132d1,_0x11049e){const _0x367742=a0_0x397951;try{if(this['dbSettings'][_0x367742(0x1f6)])return{'insertCount':(await this[_0x367742(0x35e)][_0x367742(0x30a)]({'_id':_0x11049e},{'$set':{..._0x2132d1}},{'upsert':!0x0}))[_0x367742(0x238)]};}catch(_0x497af7){return{'error':_0x497af7};}}async[a0_0x397951(0x66b)](_0x245c9b,_0x41d5f1){const _0x524bec=a0_0x397951;try{if(this[_0x524bec(0x3ee)][_0x524bec(0x1f6)])return{'insertCount':(await this[_0x524bec(0x35e)][_0x524bec(0x4b3)](_0x245c9b,{'$set':_0x41d5f1},{'upsert':!0x1}))[_0x524bec(0x238)]};throw new Error('Database\x20is\x20not\x20enabled');}catch(_0x55b48c){return{'error':_0x55b48c};}}async[a0_0x397951(0x315)](_0x43348c){const _0x48ae57=a0_0x397951;try{if(this[_0x48ae57(0x3ee)][_0x48ae57(0x1f6)])return{'insertCount':(await this[_0x48ae57(0x35e)][_0x48ae57(0x315)](_0x43348c))[_0x48ae57(0x40d)]};throw new Error(_0x48ae57(0x6b0));}catch(_0x41feaf){return{'error':_0x41feaf};}}async[a0_0x397951(0x777)](_0x4088dc){const _0x59d500=a0_0x397951;try{if(this['dbSettings'][_0x59d500(0x1f6)]){await this[_0x59d500(0x35e)]['deleteOne']({'_id':_0x4088dc});return;}}catch(_0x3989f1){return{'error':_0x3989f1};}}async['find'](_0x35e890){const _0x42eb78=a0_0x397951;try{if(this[_0x42eb78(0x3ee)][_0x42eb78(0x1f6)])return await this[_0x42eb78(0x35e)][_0x42eb78(0x3c4)]({'_id':_0x35e890});}catch{return{};}}async['findAll'](){const _0x51eb10=a0_0x397951;try{if(this[_0x51eb10(0x3ee)][_0x51eb10(0x1f6)])return await this['authModel'][_0x51eb10(0x317)]();}catch{return[];}}},Gt=class extends I{['getFlowModelForOwner'](_0x292695){return ta(_0x292695);}async[a0_0x397951(0x3da)](_0xde31dd){const _0x2d1ae8=a0_0x397951;try{let _0x170464=sa,_0x229725=this[_0x2d1ae8(0x619)](_0xde31dd),_0x191cff=await _0x170464[_0x2d1ae8(0x317)]({'owner':_0xde31dd})['lean'](),_0x29843e=[],_0x4068ca=[];for(let _0x32a19e of _0x191cff)await _0x229725['findById'](_0x32a19e['_id'])[_0x2d1ae8(0x49e)]()||(_0x29843e['push'](_0x32a19e),_0x4068ca[_0x2d1ae8(0x367)](_0x32a19e[_0x2d1ae8(0x578)]));return _0x29843e[_0x2d1ae8(0x4c6)]>0x0&&await _0x229725[_0x2d1ae8(0x701)](_0x29843e,{'ordered':!0x1}),{'success':!0x0};}catch(_0x35ca16){return console['error'](_0x2d1ae8(0x167),_0x35ca16),{'success':!0x1,'error':_0x35ca16};}}async['delete'](_0x443acc,_0x14839a){const _0x610993=a0_0x397951;try{let _0x5280df=this[_0x610993(0x619)](_0x14839a),_0x1c1375=A(_0x443acc[_0x610993(0x3f8)]);return{'deletedCount':(await _0x5280df[_0x610993(0x315)](_0x1c1375))[_0x610993(0x40d)]};}catch(_0x1d0409){return{'error':_0x1d0409?.[_0x610993(0x622)]()};}}async['deleteOne'](_0x3aff34,_0x31c219){const _0xa5ebb0=a0_0x397951;try{let _0x2bd454=this['getFlowModelForOwner'](_0x31c219),_0x2ca3a1=A(_0x3aff34[_0xa5ebb0(0x3f8)]);return{'deletedCount':(await _0x2bd454[_0xa5ebb0(0x3db)](_0x2ca3a1))[_0xa5ebb0(0x40d)]};}catch(_0x3ccd97){return{'error':_0x3ccd97?.[_0xa5ebb0(0x622)]()};}}async[a0_0x397951(0x30a)](_0x58a155,_0x568508,_0x43f511){const _0x232fe7=a0_0x397951;try{return await this['getFlowModelForOwner'](_0x43f511)[_0x232fe7(0x2ba)](_0x58a155,_0x568508,{'new':!0x0});}catch(_0x16c8a4){return console['error'](_0x232fe7(0x31b),_0x16c8a4),null;}}async[a0_0x397951(0x3be)](_0x4fb1ad,_0xf837af){const _0x3aaa86=a0_0x397951;try{let _0x1199b1=this[_0x3aaa86(0x619)](_0xf837af);return await new _0x1199b1(_0x4fb1ad)[_0x3aaa86(0x3a8)]();}catch(_0x6b2112){return console[_0x3aaa86(0x6aa)](_0x3aaa86(0x55b),_0x6b2112),null;}}async[a0_0x397951(0x4b3)](_0xc25008,_0x1ad24e,_0x480d63){const _0x1a4639=a0_0x397951;try{return{'modifiedCount':(await this['getFlowModelForOwner'](_0x480d63)[_0x1a4639(0x4b3)](_0xc25008,{'$set':_0x1ad24e}))[_0x1a4639(0x238)]};}catch(_0x2b6af0){return console[_0x1a4639(0x6aa)](_0x1a4639(0x69e),_0x2b6af0),{'error':_0x2b6af0};}}async[a0_0x397951(0x54e)](_0x5510c3,_0x430b31){const _0xab5830=a0_0x397951;try{let _0x1ad335=this[_0xab5830(0x619)](_0x430b31),_0x9dd2fa=A(_0x5510c3[_0xab5830(0x3f8)]);return await _0x1ad335[_0xab5830(0x317)](_0x9dd2fa)[_0xab5830(0x162)](_0x5510c3?.[_0xab5830(0x162)]??0x0)[_0xab5830(0x49e)]();}catch{return[];}}async[a0_0x397951(0x3c4)](_0x53e87c,_0x379dfd){const _0x4fde88=a0_0x397951;try{let _0xe7018f=this[_0x4fde88(0x619)](_0x379dfd),_0x9b1b43=A(_0x53e87c[_0x4fde88(0x3f8)]);return await _0xe7018f[_0x4fde88(0x3c4)](_0x9b1b43)[_0x4fde88(0x49e)]();}catch{return null;}}async[a0_0x397951(0x328)](_0x14b21a){const _0x2c3d5c=a0_0x397951;try{return await this[_0x2c3d5c(0x619)](_0x14b21a)[_0x2c3d5c(0x264)][_0x2c3d5c(0x2f7)](),{'success':!0x0};}catch(_0x52d055){return console[_0x2c3d5c(0x6aa)](_0x52d055),{'success':!0x1,'error':_0x52d055};}}},Wt=class extends I{[a0_0x397951(0x371)](_0x483650){return ra(_0x483650);}async[a0_0x397951(0x3da)](_0x3e99dd){const _0xff7a4c=a0_0x397951;try{let _0x4f677b=oa,_0x4576fc=this[_0xff7a4c(0x371)](_0x3e99dd),_0x453f14=await _0x4f677b[_0xff7a4c(0x317)]({'owner':_0x3e99dd})[_0xff7a4c(0x49e)](),_0x441993=[],_0x181e47=[];for(let _0x53b4ad of _0x453f14)await _0x4576fc[_0xff7a4c(0x62f)](_0x53b4ad[_0xff7a4c(0x578)])[_0xff7a4c(0x49e)]()||(_0x441993[_0xff7a4c(0x367)](_0x53b4ad),_0x181e47[_0xff7a4c(0x367)](_0x53b4ad['_id']));return _0x441993[_0xff7a4c(0x4c6)]>0x0&&await _0x4576fc[_0xff7a4c(0x701)](_0x441993,{'ordered':!0x1}),{'success':!0x0};}catch(_0x393586){return console[_0xff7a4c(0x6aa)](_0xff7a4c(0x167),_0x393586),{'success':!0x1,'error':_0x393586};}}async[a0_0x397951(0x1f0)](_0x2c8348){const _0x5f29e0=a0_0x397951;if(_0x2c8348['length']!==0x0)try{return{'insertCount':(await this[_0x5f29e0(0x371)](_0x2c8348[0x0][_0x5f29e0(0x169)])['insertMany']([..._0x2c8348]))['length']};}catch(_0x35ea7c){return _0x35ea7c;}}async[a0_0x397951(0x777)](_0x13c79a,_0x30d645){const _0x5e285c=a0_0x397951;try{let _0xfb0ad2=this['getConversationModelForOwner'](_0x30d645),_0x28d5f8=A(_0x13c79a['where']);return{'deletedCount':(await _0xfb0ad2[_0x5e285c(0x315)](_0x28d5f8))[_0x5e285c(0x40d)]};}catch(_0x1c9756){return{'error':_0x1c9756?.['toString']()};}}async[a0_0x397951(0x3db)](_0x4f2275,_0x35f4ab){const _0x44af23=a0_0x397951;try{let _0x19bd1b=this[_0x44af23(0x371)](_0x35f4ab),_0x36f2cb=A(_0x4f2275[_0x44af23(0x3f8)]);return{'deletedCount':(await _0x19bd1b[_0x44af23(0x3db)](_0x36f2cb))['deletedCount']};}catch(_0x4b4707){return{'error':_0x4b4707?.[_0x44af23(0x622)]()};}}async[a0_0x397951(0x166)](_0x20b724,_0x3884cc){const _0x3f0ac6=a0_0x397951;try{if(_0x20b724[_0x3f0ac6(0x4c6)]===0x0)return;let _0x5be1fa=this[_0x3f0ac6(0x371)](_0x3884cc),_0x329cd9=_0x20b724['map'](_0x20c2a3=>({'updateOne':{'filter':{'name':_0x20c2a3[_0x3f0ac6(0x346)],'owner':_0x3884cc},'update':{..._0x20c2a3}}})),{modifiedCount:_0xe5448f}=await _0x5be1fa[_0x3f0ac6(0x58b)](_0x329cd9);return{'insertCount':_0xe5448f};}catch{return;}}async[a0_0x397951(0x4b3)](_0x544108,_0x439f48,_0x12e168){const _0x4ebb4d=a0_0x397951;try{return{'modifiedCount':(await this[_0x4ebb4d(0x371)](_0x12e168)[_0x4ebb4d(0x4b3)](_0x544108,{'$set':_0x439f48}))[_0x4ebb4d(0x238)]};}catch(_0x26b327){return console['error']('Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:',_0x26b327),{'error':_0x26b327};}}async[a0_0x397951(0x30a)](_0x2f72c2,_0x2a6ae1,_0x3929c8){const _0xecb10c=a0_0x397951;try{return await this[_0xecb10c(0x371)](_0x3929c8)['findOneAndUpdate']({'_id':_0x2f72c2},{'$set':_0x2a6ae1},{'new':!0x0,'upsert':!0x0})[_0xecb10c(0x49e)]();}catch(_0x9d8f96){return console['error'](_0x9d8f96),null;}}async[a0_0x397951(0x317)](_0x5c1acf,_0x33da0f){const _0x2c2387=a0_0x397951;try{return await this[_0x2c2387(0x371)](_0x33da0f)[_0x2c2387(0x317)](_0x5c1acf)[_0x2c2387(0x656)]({'lastInteraction':-0x1})[_0x2c2387(0x49e)]();}catch{return[];}}async[a0_0x397951(0x3c4)](_0x11eddd,_0xf1dad4){const _0x284fbf=a0_0x397951;try{return await this[_0x284fbf(0x371)](_0xf1dad4)[_0x284fbf(0x3c4)]({..._0x11eddd[_0x284fbf(0x3f8)]})[_0x284fbf(0x49e)]();}catch{return null;}}async[a0_0x397951(0x328)](_0x9ac8b6){const _0x2a2092=a0_0x397951;try{return await this['getConversationModelForOwner'](_0x9ac8b6)['collection'][_0x2a2092(0x2f7)](),{'success':!0x0};}catch(_0x5115d9){return console[_0x2a2092(0x6aa)](_0x5115d9),{'success':!0x1,'error':_0x5115d9};}}},zt=class extends I{[a0_0x397951(0x524)](_0x5e0099){return na(_0x5e0099);}async[a0_0x397951(0x3da)](_0x466b0e){const _0x125f13=a0_0x397951;try{let _0x5d3ee5=ca,_0x584ee6=this[_0x125f13(0x524)](_0x466b0e),_0x3b2c44=await _0x5d3ee5['find']({'owner':_0x466b0e})[_0x125f13(0x49e)](),_0x1ae546=[],_0x4b8e84=[];for(let _0x3dcc4c of _0x3b2c44)await _0x584ee6[_0x125f13(0x62f)](_0x3dcc4c[_0x125f13(0x578)])[_0x125f13(0x49e)]()||(_0x1ae546['push'](_0x3dcc4c),_0x4b8e84['push'](_0x3dcc4c[_0x125f13(0x578)]));return _0x1ae546[_0x125f13(0x4c6)]>0x0&&await _0x584ee6[_0x125f13(0x701)](_0x1ae546,{'ordered':!0x1}),{'success':!0x0};}catch(_0x279b87){return console[_0x125f13(0x6aa)](_0x125f13(0x167),_0x279b87),{'success':!0x1,'error':_0x279b87};}}async['createAndSave'](_0x147db2,_0x59412c){const _0x3fbd68=a0_0x397951;try{let _0x185e45=this[_0x3fbd68(0x524)](_0x59412c);return await new _0x185e45(_0x147db2)['save']();}catch(_0x4b80ad){return console[_0x3fbd68(0x6aa)](_0x3fbd68(0x55b),_0x4b80ad),null;}}async[a0_0x397951(0x3db)](_0x4f3ced,_0x123e25){const _0x310e39=a0_0x397951;try{return await this[_0x310e39(0x524)](_0x123e25)[_0x310e39(0x440)](_0x4f3ced),{};}catch(_0x2700b3){return{'error':_0x2700b3?.[_0x310e39(0x622)]()};}}async[a0_0x397951(0x30a)](_0x27ebcf,_0x2b02f3,_0x2c5527){const _0x339d21=a0_0x397951;try{return await this[_0x339d21(0x524)](_0x2c5527)[_0x339d21(0x73d)](_0x27ebcf,{'$set':_0x2b02f3},{'new':!0x0})[_0x339d21(0x49e)]();}catch(_0xf3c157){return console['error'](_0x339d21(0x6c2),_0xf3c157),null;}}async[a0_0x397951(0x1bc)](_0x4e74a2,_0x366cf4,_0x194bf3){const _0x2db00c=a0_0x397951;try{return await this['getScheduleMessageModelForOwner'](_0x194bf3)[_0x2db00c(0x2ba)](_0x4e74a2,_0x366cf4,{'new':!0x0})['lean']();}catch(_0x45d425){return console[_0x2db00c(0x6aa)](_0x2db00c(0x6c2),_0x45d425),null;}}async[a0_0x397951(0x317)](_0x225c5f,_0x31d347){const _0xe04482=a0_0x397951;try{return await this[_0xe04482(0x524)](_0x31d347)['find'](_0x225c5f['where'])[_0xe04482(0x162)](_0x225c5f?.[_0xe04482(0x162)]??0x0)[_0xe04482(0x656)]({'when':0x1})[_0xe04482(0x49e)]();}catch{return[];}}async[a0_0x397951(0x3c4)](_0x5cccb9,_0x12b4d5){const _0x858b4=a0_0x397951;try{return await this[_0x858b4(0x524)](_0x12b4d5)['findOne'](_0x5cccb9[_0x858b4(0x3f8)])['sort']({'when':0x1})[_0x858b4(0x49e)]();}catch{return null;}}async['findById'](_0x474776,_0x3611c3){const _0x5ab364=a0_0x397951;try{return await this[_0x5ab364(0x524)](_0x3611c3)[_0x5ab364(0x62f)](_0x474776)[_0x5ab364(0x49e)]();}catch{return null;}}async['deleteMany'](_0x1ecc0d,_0x32d1dc){const _0x208fd7=a0_0x397951;try{return{'deletedCount':(await this[_0x208fd7(0x524)](_0x32d1dc)['deleteMany'](_0x1ecc0d))[_0x208fd7(0x40d)]};}catch(_0x11b296){return console[_0x208fd7(0x6aa)](_0x208fd7(0x2bb),_0x11b296),{'error':_0x11b296};}}async['deleteAll'](_0x1c3448){const _0x5b3ef4=a0_0x397951;try{return await this[_0x5b3ef4(0x524)](_0x1c3448)[_0x5b3ef4(0x264)][_0x5b3ef4(0x2f7)](),{'success':!0x0};}catch(_0x5700aa){return console['error'](_0x5700aa),{'success':!0x1,'error':_0x5700aa};}}},Ht=class extends I{async[a0_0x397951(0x166)](_0x52cb86,_0x3beb70){const _0x56f9c0=a0_0x397951;try{if(this[_0x56f9c0(0x3ee)][_0x56f9c0(0x1f6)]){let _0x3d4e4d=await _e[_0x56f9c0(0x73d)]({'_id':_0x3beb70},{'$set':_0x52cb86},{'new':!0x0});return console[_0x56f9c0(0x1aa)](_0x56f9c0(0x784),_0x3d4e4d),_0x3d4e4d;}}catch(_0x4dfd04){throw console[_0x56f9c0(0x6aa)](_0x56f9c0(0x5ad),_0x4dfd04),_0x4dfd04;}}async[a0_0x397951(0x790)](_0x34daad){const _0x5d8a36=a0_0x397951;try{let _0x5f3999=await _e['findById'](_0x34daad);return _0x5f3999||(_0x5f3999=new _e({'_id':_0x34daad}),await _0x5f3999['save']()),_0x5f3999;}catch(_0x2eb009){return console[_0x5d8a36(0x6aa)](_0x5d8a36(0x501),_0x2eb009),null;}}},wo=new v(a0_0x397951(0x54a)),bo=new Le(b),So=new Pt(b),Eo=new Qe(b),Co=new Vt(Qs,b),Mo=new Bt(zs,b),vo=new Gt(b),No=new _t(b),Ro=new Wt(b),To=new zt(b),Ao=new Ht(b),ce=new $e(bo,So,Eo,Co,Mo,vo,Ro,No,To,Ao,N?.['getClient']()),B=new xt(Zt,b,ce),Oo=new Ft(b,B,ce),Io=new Jt(B),ps=new qt(Io),T=new jt(B),re=new kt(B,b,ce,Zt,Oo),G=new Lt(B),D=new $t(B),J=new Ut(B);wo[a0_0x397951(0x215)](a0_0x397951(0x1cb));var gg=require(a0_0x397951(0x29c)),Rs=require('fs'),Cr=R(require(a0_0x397951(0x422))),Mr=R(require('http')),ve=class c{static #e;static set[a0_0x397951(0x6fa)](_0x30e442){this.#e=_0x30e442;}static get[a0_0x397951(0x422)](){const _0x1ba1ab=a0_0x397951;let {FULLCHAIN:_0x3b0e05,PRIVKEY:_0x3c4346}=b[_0x1ba1ab(0x624)](_0x1ba1ab(0x266));return Cr[_0x1ba1ab(0x55d)]({'cert':(0x0,Rs[_0x1ba1ab(0x67b)])(_0x3b0e05),'key':(0x0,Rs['readFileSync'])(_0x3c4346)},c.#e);}static get[a0_0x397951(0x51e)](){const _0x1b8799=a0_0x397951;return Mr[_0x1b8799(0x55d)](c.#e);}},ue=R(require('fs')),Or=R(require(a0_0x397951(0x419))),Ne=R(require('axios')),Te=R(require(a0_0x397951(0x267))),Ae=require(a0_0x397951(0x1f3));function Do(){const _0x3b8f7a=a0_0x397951;B[_0x3b8f7a(0x69b)]();let _0x292db0=Te[_0x3b8f7a(0x349)]['join'](__dirname,_0x3b8f7a(0x68e));Ar(_0x292db0);}var Ar=_0x490fe5=>{const _0x4e342a=a0_0x397951;let _0x33eec8=ue[_0x4e342a(0x349)]['readdirSync'](_0x490fe5),_0x35c0f2=0xc*0x3c*0x3c*0x3e8,_0x184d15=0x2*0x3c*0x3c*0x3e8,_0x5cecc4=new Date()['getTime']();_0x33eec8[_0x4e342a(0x334)](_0x7b4fd6=>{const _0x983d99=_0x4e342a;let _0x406c19=Te[_0x983d99(0x349)][_0x983d99(0x60e)](_0x490fe5,_0x7b4fd6),_0x555db7=ue[_0x983d99(0x349)]['statSync'](_0x406c19)[_0x983d99(0x77f)][_0x983d99(0x4d1)]();_0x5cecc4-_0x555db7>_0x35c0f2&&(ue[_0x983d99(0x349)]['unlinkSync'](_0x406c19),console[_0x983d99(0x1aa)](_0x983d99(0x39c)+_0x7b4fd6));}),setTimeout(()=>Ar(_0x490fe5),_0x184d15);};function xo(){const _0x566979=a0_0x397951;let _0x505eac=new v(_0x566979(0x712)),_0x28b481=(0x0,de[_0x566979(0x349)])();_0x28b481[_0x566979(0x1e8)]((0x0,Tr[_0x566979(0x349)])({'origin'(_0x2b9764,_0x4ae7ef){const _0x16bcaa=_0x566979;let {ORIGIN:_0x3ff098}=b['get'](_0x16bcaa(0x600));return _0x2b9764||(_0x2b9764='*'),_0x3ff098[_0x16bcaa(0x1dd)]('*')!==-0x1||_0x3ff098[_0x16bcaa(0x1dd)](_0x2b9764)!==-0x1?_0x4ae7ef(null,!0x0):_0x4ae7ef(new Error(_0x16bcaa(0x1b0)));},'methods':[...b[_0x566979(0x624)](_0x566979(0x600))[_0x566979(0x20c)]],'credentials':b['get'](_0x566979(0x600))[_0x566979(0x724)]}),(0x0,de[_0x566979(0x174)])({'extended':!0x0,'limit':'50mb'}),(0x0,de['json'])({'limit':_0x566979(0x732)})),_0x28b481[_0x566979(0x1e8)]((_0x2c46de,_0x573f4e,_0x147922)=>{const _0x131218=_0x566979;_0x2c46de[_0x131218(0x267)][_0x131218(0x5a0)](_0x131218(0x320))?_0x147922():(0x0,Rr['default'])()(_0x2c46de,_0x573f4e,_0x147922);}),_0x28b481[_0x566979(0x52e)]('view\x20engine',_0x566979(0x2e6)),_0x28b481[_0x566979(0x52e)]('views',(0x0,As[_0x566979(0x60e)])(ae,_0x566979(0x723))),_0x28b481['use'](de[_0x566979(0x349)][_0x566979(0x499)]((0x0,As[_0x566979(0x60e)])(ae,_0x566979(0x76b)))),_0x28b481[_0x566979(0x1e8)]((_0xd943c5,_0x35bee8,_0x5a60c8)=>{const _0x1944a5=_0x566979;let _0x5333c1=_0x35bee8[_0x1944a5(0x4c8)];_0x35bee8[_0x1944a5(0x4c8)]=function(_0x31f382){const _0xf02f79=_0x1944a5;if(_0xd943c5['query']['convert']==='true'||_0xd943c5['headers'][_0xf02f79(0x28d)]===_0xf02f79(0x5df)){let _0x35cc23=JSON[_0xf02f79(0x497)](_0x31f382);_0x31f382=JSON['stringify'](_0x240c7a(_0x35cc23));}return _0x5333c1[_0xf02f79(0x540)](_0x35bee8,[_0x31f382]);},_0x5a60c8();}),_0x28b481[_0x566979(0x1e8)]('/',vt),_0x28b481[_0x566979(0x1e8)]((_0x579c69,_0x4feddd,_0x165b4b,_0xc115b3)=>{const _0x5e7660=_0x566979;if(_0x579c69)return _0x165b4b[_0x5e7660(0x51c)](_0x579c69[_0x5e7660(0x51c)]||0x1f4)[_0x5e7660(0x344)](_0x579c69);},(_0x5a1e3d,_0x41a07a,_0x13b5e4)=>{const _0x3961bd=_0x566979;let {method:_0x9c1d5f,url:_0x30a2b0}=_0x5a1e3d;_0x41a07a[_0x3961bd(0x51c)](0x194)[_0x3961bd(0x344)]({'status':0x194,'message':'Cannot\x20'+_0x9c1d5f[_0x3961bd(0x647)]()+'\x20'+_0x30a2b0,'error':_0x3961bd(0x1f2)}),_0x13b5e4();});let _0x240c7a=(_0xce8819,_0x2c5a65=_0x566979(0x24d))=>{const _0x205d07=_0x566979;let _0x84063=(_0x5f2f94,_0x3f246c=null,_0x451f64=!0x1)=>{const _0xfbbf25=a0_0x44db;let _0x3b0d36={};return Object[_0xfbbf25(0x4cc)](_0x5f2f94)[_0xfbbf25(0x334)](_0x1b2ca8=>{const _0x1f2ff9=_0xfbbf25;let _0x3c73cf=_0x5f2f94[_0x1b2ca8],_0x231a15=''+_0x2c5a65+_0x1b2ca8;_0x3f246c&&!_0x451f64&&(_0x231a15=_0x3f246c+'.'+_0x1b2ca8),!_0x3c73cf&&_0x3c73cf!==0x0&&_0x3c73cf!==!0x1||typeof _0x3c73cf>'u'?_0x3b0d36[_0x231a15]=null:typeof _0x3c73cf!='object'&&!Array[_0x1f2ff9(0x43d)](_0x3c73cf)?_0x3b0d36[_0x231a15]=_0x3c73cf:typeof _0x3c73cf==_0x1f2ff9(0x2a1)&&!Array[_0x1f2ff9(0x43d)](_0x3c73cf)?_0x3b0d36=Object['assign'](_0x3b0d36,_0x84063(_0x3c73cf,_0x231a15)):Array[_0x1f2ff9(0x43d)](_0x3c73cf)&&(typeof _0x3c73cf[0x0]==_0x1f2ff9(0x2a1)?(_0x3b0d36[_0x231a15]=[],_0x3c73cf[_0x1f2ff9(0x334)](_0x352d27=>{_0x3b0d36[_0x231a15]['push'](_0x84063(_0x352d27,_0x231a15,!0x0));})):_0x3b0d36[_0x231a15]=_0x3c73cf);}),_0x3b0d36;};return Array[_0x205d07(0x43d)](_0xce8819)?_0xce8819[_0x205d07(0x530)](_0x1f41fd=>_0x84063(_0x1f41fd)):typeof _0xce8819=='object'&&_0xce8819!==null?_0x84063(_0xce8819):{};},_0x1c1222=b[_0x566979(0x624)](_0x566979(0x712));ve[_0x566979(0x6fa)]=_0x28b481;let _0x42f1b5=ve[_0x1c1222[_0x566979(0x639)]],_0x195eda='\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20';_0x42f1b5[_0x566979(0x77b)](_0x1c1222[_0x566979(0x2dd)],()=>{const _0xbdf186=_0x566979;_0x505eac[_0xbdf186(0x1aa)](_0x195eda),_0x505eac[_0xbdf186(0x1aa)](_0x1c1222['TYPE'][_0xbdf186(0x647)]()+_0xbdf186(0x6f6)+_0x1c1222[_0xbdf186(0x2dd)]);}),Do(),Us();}var Po=a0_0x397951(0x78e),_o=Te[a0_0x397951(0x349)][a0_0x397951(0x60e)](__dirname,a0_0x397951(0x603)),Re=null;function $o(){return new Promise((_0xf00032,_0xda2bdd)=>{const _0x1e06b4=a0_0x44db;ue[_0x1e06b4(0x349)][_0x1e06b4(0x567)](_o,_0x1e06b4(0x41c),(_0x556171,_0x3fa262)=>{const _0xeaba7b=_0x1e06b4;if(_0x556171){Re=_0x556171,_0xf00032();return;}Or[_0xeaba7b(0x349)]['parse'](_0x3fa262)[_0xeaba7b(0x670)][_0xeaba7b(0x634)]===Po?(Re=null,_0xf00032()):(Re=new Error(_0xeaba7b(0x791)),_0xf00032());});});}async function ko(){const _0x29c03e=a0_0x397951;try{await $o(),await Os();}catch(_0x3a9114){console['error']('Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20'+_0x3a9114),process[_0x29c03e(0x3ab)](0x1);}}ko();async function Ir(){const _0x32f65c=a0_0x397951;let _0x2f6791;try{_0x2f6791=(await Ne[_0x32f65c(0x349)][_0x32f65c(0x624)](_0x32f65c(0x489)))[_0x32f65c(0x2cf)]['ip'];}catch(_0x57697d){console[_0x32f65c(0x6aa)](_0x57697d);try{_0x2f6791=(await Ne[_0x32f65c(0x349)][_0x32f65c(0x624)](_0x32f65c(0x542)))[_0x32f65c(0x2cf)]['ip'];}catch(_0x2c6109){console[_0x32f65c(0x6aa)](_0x2c6109);try{_0x2f6791=(await Ne[_0x32f65c(0x349)][_0x32f65c(0x624)](_0x32f65c(0x4fc)))[_0x32f65c(0x2cf)][_0x32f65c(0x248)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x75ad6a){return console[_0x32f65c(0x6aa)](_0x75ad6a),!0x1;}}}return _0x2f6791;}var vr=0x0;async function Lo(){const _0x2ee471=a0_0x397951;let _0x450e1f=await new oe(b[_0x2ee471(0x624)](_0x2ee471(0x5b9)))[_0x2ee471(0x1c8)]();return console[_0x2ee471(0x1aa)](_0x2ee471(0x28b),_0x450e1f[_0x2ee471(0x4c6)]),_0x450e1f[_0x2ee471(0x4c6)];}function Fo(_0x3822a1){const _0x1a4fba=a0_0x397951;let _0x520a4b=_0x3822a1['get'](_0x1a4fba(0x712))[_0x1a4fba(0x1a4)],_0x4bf679=_0x3822a1[_0x1a4fba(0x624)](_0x1a4fba(0x266)),_0x33e497;if(_0x520a4b){let _0x547e78=_0x520a4b[_0x1a4fba(0x248)](/\/\/(.*?)\./);_0x547e78&&_0x547e78[0x1]&&(_0x33e497=_0x547e78[0x1]);}if(!_0x33e497&&_0x4bf679&&_0x4bf679[_0x1a4fba(0x16f)]){let _0x8ad947=_0x4bf679[_0x1a4fba(0x16f)]['split']('/'),_0x52d4ec=_0x8ad947[_0x8ad947['length']-0x2];if(_0x52d4ec){let _0x462fbe=_0x52d4ec[_0x1a4fba(0x4dc)]('.');_0x462fbe['length']>0x2&&(_0x33e497=_0x462fbe[0x0]);}}return _0x33e497;}var Ms=Fo(b);async function Uo(){const _0x5c1982=a0_0x397951;let _0xb01839=b[_0x5c1982(0x624)](_0x5c1982(0x5b9)),_0x2b32f1=b[_0x5c1982(0x624)](_0x5c1982(0x6be))[_0x5c1982(0x5ec)][_0x5c1982(0x566)],_0x2adc55=b[_0x5c1982(0x624)]('SSL_CONF'),_0x2d2923=await Ir(),_0x2d00e6=b['get'](_0x5c1982(0x712))[_0x5c1982(0x2dd)],_0x3c1330=b[_0x5c1982(0x624)](_0x5c1982(0x712))[_0x5c1982(0x1a4)];try{let _0x1adbd0={'ip':_0x2d2923||null,'redis_enable':_0xb01839?.['ENABLED']||null,'apikey':_0x2b32f1||null,'ssl':_0x2adc55?.['PRIVKEY']||null,'lastupdate':Dr||null,'port':_0x2d00e6||null,'gitInstallError':Re?.['message']||null,'url':_0x3c1330||null};if(console['log'](_0x5c1982(0x70b),_0x1adbd0['ip']),_0xb01839&&_0xb01839[_0x5c1982(0x1f6)]){let _0x4ad354=await Lo();_0x1adbd0['instanceCount']=_0x4ad354||null;}for(let _0x1a58e9 in _0x1adbd0)_0x1adbd0['hasOwnProperty'](_0x1a58e9)&&_0x1a58e9!=='ip'&&(_0x1adbd0[_0x1a58e9]=JSON['stringify'](_0x1adbd0[_0x1a58e9]));return(await Ne[_0x5c1982(0x349)][_0x5c1982(0x384)]('https://uazapi.bubbleapps.io/api/1.1/wf/verificar/',_0x1adbd0))[_0x5c1982(0x2cf)];}catch(_0x8f3574){return console['error'](_0x8f3574),!0x1;}}var Ts=!0x1,Dr=0x21d,Jo=0x3,Nr=0x1b7740;async function Os(){const _0x5d44be=a0_0x397951;if(!await Ir())return console[_0x5d44be(0x6aa)](_0x5d44be(0x361)),'NO_IP';let _0x358091=await Uo();if(_0x358091){if(_0x358091['response'][_0x5d44be(0x2d3)]===!0x0){b['get'](_0x5d44be(0x266))[_0x5d44be(0x473)][_0x5d44be(0x2fb)](_0x5d44be(0x3c2))&&_0x358091[_0x5d44be(0x616)][_0x5d44be(0x6b9)]&&(await Vo(_0x358091[_0x5d44be(0x616)][_0x5d44be(0x6b9)],qo),await Bo(_0x5d44be(0x6f4),_0x358091[_0x5d44be(0x616)][_0x5d44be(0x6b9)]),console[_0x5d44be(0x1aa)](_0x5d44be(0x6f7)),setTimeout(()=>Wo(),0x2710)),Re===null&&_0x358091[_0x5d44be(0x616)][_0x5d44be(0x6e9)]-Dr>0x0&&await jo(),Ts||(Ts=!0x0,xo());let _0x1667e4=0x24*0x3c*0x3c,_0x2ef0ab=_0x358091['response'][_0x5d44be(0x207)]>_0x1667e4?_0x1667e4:_0x358091[_0x5d44be(0x616)][_0x5d44be(0x207)],_0x3d56d2=Number(_0x2ef0ab);if(isNaN(_0x3d56d2)){console[_0x5d44be(0x6aa)](_0x5d44be(0x4a6));return;}let _0x2db129=Math[_0x5d44be(0x227)](_0x3d56d2/0xe10),_0x1cc71d=Math[_0x5d44be(0x227)](_0x3d56d2%0xe10/0x3c),_0x2e0960=new Date(Date['now']()+_0x3d56d2*0x3e8);setTimeout(Os,_0x3d56d2*0x3e8);let _0x3fd9d6=_0x3ee314=>_0x3ee314[_0x5d44be(0x622)]()[_0x5d44be(0x398)](0x2,'0'),_0x337be5=_0x5d44be(0x49d)+_0x3fd9d6(_0x2db129)+'\x20horas\x20e\x20'+_0x3fd9d6(_0x1cc71d)+_0x5d44be(0x60f)+_0x3fd9d6(_0x2e0960[_0x5d44be(0x35f)]())+':'+_0x3fd9d6(_0x2e0960[_0x5d44be(0x5a4)]())+'.';console[_0x5d44be(0x1aa)](_0x337be5);}else return console['log'](_0x5d44be(0x5c8)),Ts&&(console[_0x5d44be(0x1aa)]('A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.'),process['exit']()),'LICENSE_INVALID';}else{if(vr++,vr<Jo)console['log'](_0x5d44be(0x178)+Nr/0xea60+_0x5d44be(0x663)),setTimeout(Os,Nr);else return console[_0x5d44be(0x6aa)](_0x5d44be(0x50a)),'SERVER_OFFLINE';}}async function jo(){const _0x716078=a0_0x397951;console[_0x716078(0x1aa)](_0x716078(0x290));let _0x29ecbd=(0x0,Ae[_0x716078(0x637)])(_0x716078(0x3fc),{'shell':!0x0});_0x29ecbd[_0x716078(0x79e)]['on'](_0x716078(0x2cf),_0x5dd0df=>{const _0x2d8ffa=_0x716078;console[_0x2d8ffa(0x1aa)](_0x2d8ffa(0x6a9)+_0x5dd0df);}),_0x29ecbd[_0x716078(0x726)]['on']('data',_0x3b3ad5=>{const _0x342980=_0x716078;console[_0x342980(0x6aa)](_0x342980(0x45e)+_0x3b3ad5);}),_0x29ecbd['on'](_0x716078(0x3ab),_0x88380e=>{const _0x4dda0c=_0x716078;_0x88380e!==0x0?console[_0x4dda0c(0x6aa)](_0x4dda0c(0x1de)+_0x88380e):console[_0x4dda0c(0x1aa)](_0x4dda0c(0x698)),console[_0x4dda0c(0x1aa)]('Parando\x20aplicação...'),setTimeout(()=>process[_0x4dda0c(0x3ab)](),0x2710);});}var qo=Te[a0_0x397951(0x349)][a0_0x397951(0x60e)](__dirname,a0_0x397951(0x51a));async function Vo(_0x7c7649,_0x25c6de){const _0x3d0de6=a0_0x397951;let _0x27966e=Go();_0x7c7649=_0x7c7649['replace'](_0x3d0de6(0x789),'');try{let _0x4545d9=ue[_0x3d0de6(0x349)][_0x3d0de6(0x67b)](_0x25c6de,_0x3d0de6(0x4bb));_0x4545d9=_0x4545d9[_0x3d0de6(0x4cf)](/<apikey>/,_0x27966e),_0x4545d9=_0x4545d9[_0x3d0de6(0x4cf)](/<subdomain>/g,_0x7c7649),ue[_0x3d0de6(0x349)][_0x3d0de6(0x5f3)](_0x25c6de,_0x4545d9,_0x3d0de6(0x4bb)),console['log']('Arquivo\x20env.yml\x20atualizado\x20com\x20sucesso.');}catch(_0x4b97fb){console[_0x3d0de6(0x6aa)](_0x3d0de6(0x635),_0x4b97fb);}}function Bo(_0x3464d9,_0x27ec17){return new Promise((_0x501d6b,_0x34fd4a)=>{const _0x2b426e=a0_0x44db;let _0x169b15=(0x0,Ae[_0x2b426e(0x637)])('certbot',[_0x2b426e(0x5e1),_0x2b426e(0x1e6),'-m',_0x3464d9,_0x2b426e(0x3b5),'-d',_0x27ec17]);_0x169b15[_0x2b426e(0x79e)]['on'](_0x2b426e(0x2cf),_0x256835=>{const _0x1626e0=_0x2b426e;console['log'](_0x1626e0(0x312)+_0x256835[_0x1626e0(0x622)]());}),_0x169b15['stderr']['on'](_0x2b426e(0x2cf),_0x2eb881=>{const _0x1ba8e8=_0x2b426e;console['error'](_0x1ba8e8(0x34c)+_0x2eb881[_0x1ba8e8(0x622)]());}),_0x169b15['on'](_0x2b426e(0x5d8),_0x301df5=>{const _0x6952e8=_0x2b426e;_0x301df5!==0x0?(console[_0x6952e8(0x6aa)]('Erro\x20ao\x20executar\x20o\x20Certbot.\x20Código\x20de\x20saída:\x20'+_0x301df5),_0x34fd4a(_0x6952e8(0x3ea)+_0x301df5)):(console['log'](_0x6952e8(0x60c)),_0x501d6b());});});}function Go(_0x105999=0x32){const _0x5127ce=a0_0x397951;let _0x3ee3fe=_0x5127ce(0x181),_0x364fea='';for(let _0x4df9e8=0x0;_0x4df9e8<_0x105999;_0x4df9e8++)_0x364fea+=_0x3ee3fe[_0x5127ce(0x1fa)](Math[_0x5127ce(0x227)](Math['random']()*_0x3ee3fe[_0x5127ce(0x4c6)]));return _0x364fea;}function Wo(){const _0x264e13=a0_0x397951;(0x0,Ae[_0x264e13(0x252)])(_0x264e13(0x608),(_0x1f5a51,_0x56548d,_0x52bf51)=>{const _0xda95ca=_0x264e13;if(_0x1f5a51){console[_0xda95ca(0x6aa)](_0xda95ca(0x3b0)+_0x1f5a51);return;}if(_0x52bf51){console[_0xda95ca(0x6aa)]('Erro\x20de\x20reinicialização:\x20'+_0x52bf51);return;}console[_0xda95ca(0x1aa)](_0xda95ca(0x6fe)+_0x56548d);});}0x0&&(module[a0_0x397951(0x5e5)]={'subdomain':subdomain});