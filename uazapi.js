const a0_0x27119e=a0_0x2b59;(function(_0x3c4210,_0x403ed4){const _0x1624fa=a0_0x2b59,_0x3e6ed4=_0x3c4210();while(!![]){try{const _0x3381f7=-parseInt(_0x1624fa(0x5e6))/0x1+parseInt(_0x1624fa(0x49e))/0x2+parseInt(_0x1624fa(0x198))/0x3*(-parseInt(_0x1624fa(0x579))/0x4)+parseInt(_0x1624fa(0x5bd))/0x5+-parseInt(_0x1624fa(0x548))/0x6+parseInt(_0x1624fa(0x3e1))/0x7+parseInt(_0x1624fa(0x120))/0x8*(parseInt(_0x1624fa(0x1da))/0x9);if(_0x3381f7===_0x403ed4)break;else _0x3e6ed4['push'](_0x3e6ed4['shift']());}catch(_0x4375cc){_0x3e6ed4['push'](_0x3e6ed4['shift']());}}}(a0_0x4be1,0x26f22));var Uo=Object[a0_0x27119e(0x447)],Bs=Object[a0_0x27119e(0x2d7)],Vo=Object[a0_0x27119e(0x4fe)],jo=Object[a0_0x27119e(0x382)],Bo=Object[a0_0x27119e(0x323)],Fo=Object[a0_0x27119e(0x32a)][a0_0x27119e(0x591)],Jo=(_0x918244,_0x12e1fe,_0x4e8f20,_0x2c7f9b)=>{const _0x1c958b=a0_0x27119e;if(_0x12e1fe&&typeof _0x12e1fe==_0x1c958b(0x5f1)||typeof _0x12e1fe==_0x1c958b(0x10b)){for(let _0xfc1336 of jo(_0x12e1fe))!Fo['call'](_0x918244,_0xfc1336)&&_0xfc1336!==_0x4e8f20&&Bs(_0x918244,_0xfc1336,{'get':()=>_0x12e1fe[_0xfc1336],'enumerable':!(_0x2c7f9b=Vo(_0x12e1fe,_0xfc1336))||_0x2c7f9b[_0x1c958b(0x3ad)]});}return _0x918244;},T=(_0x310faa,_0x5115cd,_0x26f762)=>(_0x26f762=_0x310faa!=null?Uo(Bo(_0x310faa)):{},Jo(_0x5115cd||!_0x310faa||!_0x310faa[a0_0x27119e(0x3ea)]?Bs(_0x26f762,'default',{'value':_0x310faa,'enumerable':!0x0}):_0x26f762,_0x310faa)),Do=T(require('compression')),Js=require('fs'),Gs=require(a0_0x27119e(0x19c)),qs=require(a0_0x27119e(0x342)),Ue=require(a0_0x27119e(0x342)),Y=process[a0_0x27119e(0x4db)](),j=(0x0,Ue[a0_0x27119e(0x3eb)])(Y,a0_0x27119e(0x1c0)),Fs=(0x0,Ue['join'])(Y,a0_0x27119e(0x38f)),es=(0x0,Ue[a0_0x27119e(0x3eb)])(Y,a0_0x27119e(0x358),a0_0x27119e(0x655)),Ws=require(a0_0x27119e(0x16f)),ts=class{constructor(){const _0x276423=a0_0x27119e;this[_0x276423(0x4d2)]();}[a0_0x27119e(0x201)](_0x57d084){const _0x5a1cef=a0_0x27119e;return this[_0x5a1cef(0x576)][_0x57d084];}['loadEnv'](){const _0x2dbd44=a0_0x27119e;this['env']=process[_0x2dbd44(0x576)]?.[_0x2dbd44(0x67d)]!==_0x2dbd44(0x39f)?this[_0x2dbd44(0x192)]():this['envProcess'](),this['env']['PRODUCTION']=process[_0x2dbd44(0x576)]?.[_0x2dbd44(0x463)]===_0x2dbd44(0x64c),process[_0x2dbd44(0x576)]?.[_0x2dbd44(0x67d)]===_0x2dbd44(0x39f)&&(this[_0x2dbd44(0x576)]['SERVER'][_0x2dbd44(0x202)]='http',this[_0x2dbd44(0x576)][_0x2dbd44(0x3a8)][_0x2dbd44(0x17c)]=Number[_0x2dbd44(0x274)](process[_0x2dbd44(0x576)]?.['SERVER_PORT']??_0x2dbd44(0x68a)));}[a0_0x27119e(0x192)](){const _0x2394a3=a0_0x27119e;return(0x0,Gs[_0x2394a3(0x630)])((0x0,Js[_0x2394a3(0x48e)])((0x0,qs['join'])(Fs,'../env.yml'),{'encoding':_0x2394a3(0x14b)}));}['envProcess'](){const _0x1cd9fb=a0_0x27119e;return{'SERVER':{'TYPE':process[_0x1cd9fb(0x576)]['SERVER_TYPE'],'PORT':Number[_0x1cd9fb(0x274)](process[_0x1cd9fb(0x576)]['SERVER_PORT'])},'CORS':{'ORIGIN':process['env'][_0x1cd9fb(0x55e)][_0x1cd9fb(0x29e)](','),'METHODS':process[_0x1cd9fb(0x576)][_0x1cd9fb(0x2c3)]['split'](','),'CREDENTIALS':process['env']?.[_0x1cd9fb(0x48f)]===_0x1cd9fb(0x39f)},'SSL_CONF':{'PRIVKEY':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x1a1)],'FULLCHAIN':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x182)]},'STORE':{'CLEANING_INTERVAL':Number['isInteger'](process[_0x1cd9fb(0x576)]?.['STORE_CLEANING_TERMINAL'])?Number[_0x1cd9fb(0x274)](process[_0x1cd9fb(0x576)][_0x1cd9fb(0x659)]):void 0x0,'MESSAGES':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x561)]===_0x1cd9fb(0x39f),'CONTACTS':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x204)]===_0x1cd9fb(0x39f),'CHATS':process['env']?.[_0x1cd9fb(0x666)]==='true'},'DATABASE':{'CONNECTION':{'HOST':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x131)],'PORT':Number[_0x1cd9fb(0x274)](process['env']?.[_0x1cd9fb(0x131)]),'USER':process['env'][_0x1cd9fb(0x4ba)],'PASSWORD':process['env'][_0x1cd9fb(0x3ec)],'URI':process[_0x1cd9fb(0x576)]['DATABASE_CONNECTION_URI'],'DB_PREFIX_NAME':process[_0x1cd9fb(0x576)][_0x1cd9fb(0x267)]},'ENABLED':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x2aa)]===_0x1cd9fb(0x39f)},'REDIS':{'ENABLED':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x5cd)]===_0x1cd9fb(0x39f),'URI':process['env']['REDIS_URI'],'PREFIX_KEY':process[_0x1cd9fb(0x576)][_0x1cd9fb(0x466)]},'LOG':{'LEVEL':process[_0x1cd9fb(0x576)]?.['LOG_LEVEL'][_0x1cd9fb(0x29e)](','),'COLOR':process['env']?.[_0x1cd9fb(0x21b)]===_0x1cd9fb(0x39f)},'DEL_INSTANCE':(0x0,Ws[_0x1cd9fb(0x3fa)])(process['env']?.[_0x1cd9fb(0x423)])?process['env'][_0x1cd9fb(0x423)]===_0x1cd9fb(0x39f):Number[_0x1cd9fb(0x274)](process[_0x1cd9fb(0x576)][_0x1cd9fb(0x423)])||!0x1,'WEBHOOK':{'WEBHOOK_MAP':process[_0x1cd9fb(0x576)][_0x1cd9fb(0x5ff)]?process[_0x1cd9fb(0x576)]['WEBHOOK_MAP']===_0x1cd9fb(0x39f):!0x1,'GLOBAL':{'URL':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x690)],'ENABLED':process[_0x1cd9fb(0x576)]?.['WEBHOOK_GLOBAL_ENABLED']==='true'},'EVENTS':{'STATUS_INSTANCE':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x21a)]===_0x1cd9fb(0x39f),'QRCODE_UPDATED':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x143)]===_0x1cd9fb(0x39f),'MESSAGES_SET':process[_0x1cd9fb(0x576)]?.['WEBHOOK_EVENTS_MESSAGES_SET']==='true','MESSAGES_UPSERT':process[_0x1cd9fb(0x576)]?.['WEBHOOK_EVENTS_MESSAGES_UPSERT']===_0x1cd9fb(0x39f),'MESSAGES_UPDATE':process[_0x1cd9fb(0x576)]?.['WEBHOOK_EVENTS_MESSAGES_UPDATE']===_0x1cd9fb(0x39f),'SEND_MESSAGE':process[_0x1cd9fb(0x576)]?.['WEBHOOK_EVENTS_SEND_MESSAGE']===_0x1cd9fb(0x39f),'CONTACTS_SET':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x105)]===_0x1cd9fb(0x39f),'CONTACTS_UPDATE':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x5ac)]==='true','CONTACTS_UPSERT':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x6d7)]===_0x1cd9fb(0x39f),'PRESENCE_UPDATE':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x6c7)]==='true','CHATS_SET':process[_0x1cd9fb(0x576)]?.['WEBHOOK_EVENTS_CHATS_SET']===_0x1cd9fb(0x39f),'CHATS_UPDATE':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x5c7)]===_0x1cd9fb(0x39f),'CHATS_UPSERT':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x377)]===_0x1cd9fb(0x39f),'CHATS_DELETE':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x353)]==='true','CONNECTION_UPDATE':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x49c)]===_0x1cd9fb(0x39f),'GROUPS_UPSERT':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x458)]===_0x1cd9fb(0x39f),'GROUP_UPDATE':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x27e)]==='true','GROUP_PARTICIPANTS_UPDATE':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x449)]===_0x1cd9fb(0x39f),'NEW_JWT_TOKEN':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x469)]==='true'}},'CONFIG_SESSION_PHONE':{'CLIENT':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x169)]||'uazapi','NAME':process['env']?.[_0x1cd9fb(0x17f)]||_0x1cd9fb(0x24e)},'QRCODE':{'LIMIT':Number[_0x1cd9fb(0x274)](process['env'][_0x1cd9fb(0x23b)])||0x5},'TRIAL_AD':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x239)],'TRIAL_INSTANCE_NAME':process[_0x1cd9fb(0x576)]?.['TRIAL_INSTANCE_NAME'],'AUTOUPDATE':process[_0x1cd9fb(0x576)]?.['AUTOUPDATE']===_0x1cd9fb(0x39f),'PHONE':process[_0x1cd9fb(0x576)]?.[_0x1cd9fb(0x11b)],'AUTHENTICATION':{'TYPE':process[_0x1cd9fb(0x576)][_0x1cd9fb(0x12d)],'API_KEY':{'KEY':process[_0x1cd9fb(0x576)][_0x1cd9fb(0x1d0)]},'JWT':{'EXPIRIN_IN':Number['isInteger'](process['env']?.[_0x1cd9fb(0x434)])?Number[_0x1cd9fb(0x274)](process[_0x1cd9fb(0x576)][_0x1cd9fb(0x434)]):0xe10,'SECRET':process[_0x1cd9fb(0x576)][_0x1cd9fb(0x414)]}}};}},y=new ts(),Po=T(require(a0_0x27119e(0x50b))),me=T(require(a0_0x27119e(0x14e))),ks=require('path'),ss=T(require('dayjs')),as=(_0x4ffa6b=>(_0x4ffa6b[a0_0x27119e(0x3ca)]=a0_0x27119e(0x656),_0x4ffa6b[a0_0x27119e(0x327)]=a0_0x27119e(0x199),_0x4ffa6b[a0_0x27119e(0x3b3)]='\x1b[33m',_0x4ffa6b[a0_0x27119e(0x386)]='\x1b[31m',_0x4ffa6b['DEBUG']=a0_0x27119e(0x37f),_0x4ffa6b[a0_0x27119e(0x174)]=a0_0x27119e(0x34f),_0x4ffa6b[a0_0x27119e(0x25b)]=a0_0x27119e(0x1f2),_0x4ffa6b))(as||{}),Hs=(_0x5a76ee=>(_0x5a76ee[a0_0x27119e(0x3ca)]=a0_0x27119e(0x4f0),_0x5a76ee[a0_0x27119e(0x25b)]=a0_0x27119e(0x6b5),_0x5a76ee['INFO']=a0_0x27119e(0x17a),_0x5a76ee[a0_0x27119e(0x3b3)]=a0_0x27119e(0x61e),_0x5a76ee[a0_0x27119e(0x386)]=a0_0x27119e(0x4aa),_0x5a76ee['DEBUG']=a0_0x27119e(0x618),_0x5a76ee[a0_0x27119e(0x174)]=a0_0x27119e(0x680),_0x5a76ee))(Hs||{}),Ks=(_0x29addf=>(_0x29addf['LOG']='LOG',_0x29addf['WARN']='WARN',_0x29addf[a0_0x27119e(0x327)]=a0_0x27119e(0x327),_0x29addf[a0_0x27119e(0x25b)]=a0_0x27119e(0x25b),_0x29addf[a0_0x27119e(0x386)]=a0_0x27119e(0x386),_0x29addf['DEBUG']=a0_0x27119e(0x679),_0x29addf[a0_0x27119e(0x174)]=a0_0x27119e(0x174),_0x29addf))(Ks||{}),zs=(_0x1b53aa=>(_0x1b53aa[a0_0x27119e(0x3ca)]=a0_0x27119e(0x1a2),_0x1b53aa[a0_0x27119e(0x327)]=a0_0x27119e(0x14a),_0x1b53aa[a0_0x27119e(0x3b3)]=a0_0x27119e(0x2f8),_0x1b53aa[a0_0x27119e(0x25b)]=a0_0x27119e(0x4eb),_0x1b53aa['ERROR']=a0_0x27119e(0x52f),_0x1b53aa[a0_0x27119e(0x679)]='\x1b[46m',_0x1b53aa[a0_0x27119e(0x174)]='\x1b[47m',_0x1b53aa))(zs||{}),C=class{constructor(_0x1c7887=a0_0x27119e(0x1e7)){const _0x41cf40=a0_0x27119e;this['context']=_0x1c7887,this[_0x41cf40(0x593)]=y;}[a0_0x27119e(0x283)](_0x33f44d){const _0x4768f4=a0_0x27119e;this[_0x4768f4(0x1d2)]=_0x33f44d;}[a0_0x27119e(0x376)](_0x58174b,_0x56615a){const _0x293ffb=a0_0x27119e;let _0x24e52c=[];this['configService'][_0x293ffb(0x201)](_0x293ffb(0x3ca))[_0x293ffb(0x262)][_0x293ffb(0xfc)](_0x45a145=>_0x24e52c[_0x293ffb(0x461)](Ks[_0x45a145]));let _0x59111b=typeof _0x58174b;_0x24e52c['includes'](_0x56615a)&&(y[_0x293ffb(0x201)](_0x293ffb(0x3ca))['COLOR']?(console[_0x293ffb(0x502)]('\x1b[1m'+Hs[_0x56615a],'\x1b[1m\x1b[37m',(0x0,ss[_0x293ffb(0x2c9)])()[_0x293ffb(0x44f)](_0x293ffb(0x6b7)),_0x293ffb(0x42d),as[_0x56615a]+zs[_0x56615a]+_0x293ffb(0x494),_0x56615a+_0x293ffb(0x589),_0x293ffb(0x1fb),this[_0x293ffb(0x1d2)]+_0x293ffb(0x42d),as[_0x56615a],_0x59111b!==_0x293ffb(0x5f1)?_0x58174b:'',_0x293ffb(0x42d)),_0x59111b==='object'&&console[_0x293ffb(0x502)](_0x58174b,'\x0a')):console['log']((0x0,ss[_0x293ffb(0x2c9)])()[_0x293ffb(0x44f)](_0x293ffb(0x6d0)),_0x56615a+'\x20',''+this[_0x293ffb(0x1d2)],_0x58174b));}[a0_0x27119e(0x502)](_0x4bee05){const _0x4af316=a0_0x27119e;this[_0x4af316(0x376)](_0x4bee05,'LOG');}[a0_0x27119e(0x36d)](_0x37f04a){const _0x11c752=a0_0x27119e;this[_0x11c752(0x376)](_0x37f04a,_0x11c752(0x327));}[a0_0x27119e(0x5f9)](_0x1791b7){const _0x2ef637=a0_0x27119e;this[_0x2ef637(0x376)](_0x1791b7,_0x2ef637(0x3b3));}[a0_0x27119e(0x258)](_0x58f3c5){const _0x285e5c=a0_0x27119e;this[_0x285e5c(0x376)](_0x58f3c5,_0x285e5c(0x386));}[a0_0x27119e(0x234)](_0x449946){const _0x21928c=a0_0x27119e;this['console'](_0x449946,_0x21928c(0x174));}[a0_0x27119e(0x54b)](_0x1e0109){const _0xdf84d8=a0_0x27119e;this['console'](_0x1e0109,_0xdf84d8(0x679));}[a0_0x27119e(0x264)](_0x4c8364){const _0x5d356a=a0_0x27119e;this['console'](_0x4c8364,_0x5d356a(0x25b));}};function Qs(){const _0x561a49=a0_0x27119e;process['on'](_0x561a49(0x32d),(_0x56671f,_0x43dc78)=>{const _0x3d823d=_0x561a49;new C(_0x3d823d(0x32d))['error']({'origin':_0x43dc78,'stderr':process[_0x3d823d(0x3cd)]['fd'],'error':_0x56671f});}),process['on'](_0x561a49(0x246),(_0x4e1823,_0x4a5567)=>{const _0x2523a2=_0x561a49;new C('unhandledRejection')[_0x2523a2(0x258)]({'origin':_0x4a5567,'stderr':process['stderr']['fd'],'error':_0x4e1823});});}var Ys=T(require(a0_0x27119e(0x1e4))),os=new Ys[(a0_0x27119e(0x2c9))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),le=require(a0_0x27119e(0x342)),he=require('fs'),is=require(a0_0x27119e(0x342)),B=class{constructor(_0x2292dd){const _0x2d706e=a0_0x27119e;this[_0x2d706e(0x47c)]=(0x0,is[_0x2d706e(0x3eb)])(Y,_0x2d706e(0x358)),this[_0x2d706e(0x41d)]=_0x38cf34=>{const _0x375ef7=_0x2d706e;(0x0,he[_0x375ef7(0x4be)])(_0x38cf34[_0x375ef7(0x342)])||(0x0,he[_0x375ef7(0x445)])(_0x38cf34[_0x375ef7(0x342)],{'recursive':!0x0});try{return(0x0,he[_0x375ef7(0x45e)])((0x0,is[_0x375ef7(0x3eb)])(_0x38cf34[_0x375ef7(0x342)],_0x38cf34[_0x375ef7(0x2eb)]+_0x375ef7(0x5de)),JSON[_0x375ef7(0x5f2)]({..._0x38cf34[_0x375ef7(0x5a7)]}),{'encoding':_0x375ef7(0x14b)}),{'message':_0x375ef7(0x4cb)};}finally{_0x38cf34[_0x375ef7(0x5a7)]=void 0x0;}},this[_0x2d706e(0x19b)]=_0x2292dd[_0x2d706e(0x201)](_0x2d706e(0x4b8));}['insert'](_0x1d2637,_0x438881=!0x1){const _0x239a37=a0_0x27119e;throw new Error(_0x239a37(0x404));}[a0_0x27119e(0x36e)](_0x445514){const _0x276619=a0_0x27119e;throw new Error(_0x276619(0x404));}[a0_0x27119e(0x2d3)](_0x4563b8,_0x2fb2cb){const _0x45766a=a0_0x27119e;throw new Error(_0x45766a(0x404));}},oe=require('fs'),Ve=class{},je=class extends B{constructor(_0x2be1d6,_0xc6735c){super(_0xc6735c),this['messageModel']=_0x2be1d6,this['configService']=_0xc6735c;}async[a0_0x27119e(0x315)](_0x12ac9c,_0x1f78ab=!0x1){const _0x2e7a5a=a0_0x27119e;if(_0x12ac9c[_0x2e7a5a(0x57f)]!==0x0)try{return this[_0x2e7a5a(0x19b)]['ENABLED']&&_0x1f78ab?{'insertCount':(await this['messageModel'][_0x2e7a5a(0x5bf)]([..._0x12ac9c]))['length']}:_0x1f78ab?(_0x12ac9c[_0x2e7a5a(0xfc)](_0x586f09=>this[_0x2e7a5a(0x41d)]({'path':(0x0,le[_0x2e7a5a(0x3eb)])(this[_0x2e7a5a(0x47c)],_0x2e7a5a(0x231),_0x586f09[_0x2e7a5a(0x1a7)]),'fileName':_0x586f09['key']['id'],'data':_0x586f09})),{'insertCount':_0x12ac9c[_0x2e7a5a(0x57f)]}):{'insertCount':0x0};}catch(_0x3b2081){return console[_0x2e7a5a(0x502)](_0x2e7a5a(0x103),_0x3b2081),_0x3b2081;}finally{_0x12ac9c=void 0x0;}}async[a0_0x27119e(0x36e)](_0xdad57){const _0x4faa39=a0_0x27119e;try{if(this[_0x4faa39(0x19b)][_0x4faa39(0x371)]){if(_0xdad57?.[_0x4faa39(0x52d)]?.[_0x4faa39(0x4dc)]){for(let [_0x4c169b,_0x392ef3]of Object[_0x4faa39(0x67b)](_0xdad57[_0x4faa39(0x52d)][_0x4faa39(0x4dc)]))_0xdad57[_0x4faa39(0x52d)]['key.'+_0x4c169b]=_0x392ef3;delete _0xdad57?.['where']?.[_0x4faa39(0x4dc)];}return await this[_0x4faa39(0x66b)][_0x4faa39(0x36e)]({..._0xdad57[_0x4faa39(0x52d)]})['sort']({'messageTimestamp':-0x1})[_0x4faa39(0x66c)](_0xdad57?.[_0x4faa39(0x66c)]??0x0);}let _0x26c70a=[];if(_0xdad57?.[_0x4faa39(0x52d)]?.['key']?.['id'])_0x26c70a[_0x4faa39(0x461)](JSON[_0x4faa39(0x279)]((0x0,oe['readFileSync'])((0x0,le[_0x4faa39(0x3eb)])(this[_0x4faa39(0x47c)],_0x4faa39(0x231),_0xdad57[_0x4faa39(0x52d)]['owner'],_0xdad57[_0x4faa39(0x52d)][_0x4faa39(0x4dc)]['id']+_0x4faa39(0x5de)),{'encoding':'utf-8'})));else{let _0x375478=(0x0,oe[_0x4faa39(0x63d)])((0x0,le[_0x4faa39(0x3eb)])(this[_0x4faa39(0x47c)],_0x4faa39(0x231),_0xdad57[_0x4faa39(0x52d)][_0x4faa39(0x1a7)]),{'encoding':_0x4faa39(0x14b)});for await(let _0x12545e of _0x375478)_0x12545e['isFile']()&&_0x26c70a[_0x4faa39(0x461)](JSON[_0x4faa39(0x279)]((0x0,oe[_0x4faa39(0x48e)])((0x0,le[_0x4faa39(0x3eb)])(this[_0x4faa39(0x47c)],_0x4faa39(0x231),_0xdad57[_0x4faa39(0x52d)][_0x4faa39(0x1a7)],_0x12545e[_0x4faa39(0x3c5)]),{'encoding':'utf-8'})));}return _0x26c70a[_0x4faa39(0x3e3)]((_0x5b50f0,_0x7a0e18)=>_0x7a0e18[_0x4faa39(0x602)]-_0x5b50f0['messageTimestamp'])[_0x4faa39(0x37b)](0x0,_0xdad57?.[_0x4faa39(0x66c)]??_0x26c70a[_0x4faa39(0x57f)]);}catch{return[];}}async[a0_0x27119e(0x2d3)](_0x13bb29){const _0x10e770=a0_0x27119e;try{if(this[_0x10e770(0x19b)][_0x10e770(0x371)])await this['messageModel']['deleteMany']({..._0x13bb29[_0x10e770(0x52d)]});else{let {owner:_0x4582fa}=_0x13bb29['where'];(0x0,oe[_0x10e770(0x32f)])((0x0,le[_0x10e770(0x3eb)])(this[_0x10e770(0x47c)],_0x10e770(0x231),_0x4582fa))[_0x10e770(0xfc)](_0x48b386=>{const _0x1465a7=_0x10e770;let _0x49a374=(0x0,le['join'])(this[_0x1465a7(0x47c)],'messages',_0x4582fa,_0x48b386);(0x0,oe[_0x1465a7(0x2dd)])(_0x49a374);});}}catch(_0x1af9fb){console[_0x10e770(0x258)](_0x1af9fb);}}async['update'](_0x2c7ac1,_0x3e8e40){const _0x2e4668=a0_0x27119e;try{let _0x2b0ddb=null;if(this['dbSettings'][_0x2e4668(0x371)])return _0x2b0ddb=await this['messageModel'][_0x2e4668(0x6a6)]({..._0x2c7ac1[_0x2e4668(0x52d)]},{'$set':_0x3e8e40},{'new':!0x0}),_0x2b0ddb;}catch(_0xfd3610){throw console[_0x2e4668(0x258)](_0xfd3610),_0xfd3610;}}async['insertMany'](_0x26734f,_0x175dfe=!0x1){const _0x57a46e=a0_0x27119e;if(_0x26734f['length']!==0x0)try{return this[_0x57a46e(0x19b)]['ENABLED']&&_0x175dfe?{'insertCount':(await this['messageModel']['insertMany']([..._0x26734f]))['length']}:_0x175dfe?(_0x26734f['forEach'](_0x422daa=>this[_0x57a46e(0x41d)]({'path':(0x0,le['join'])(this[_0x57a46e(0x47c)],'messages',_0x422daa[_0x57a46e(0x1a7)]),'fileName':_0x422daa[_0x57a46e(0x4dc)]['id'],'data':_0x422daa})),{'insertCount':_0x26734f[_0x57a46e(0x57f)]}):{'insertCount':0x0};}catch(_0x51f72f){return console[_0x57a46e(0x502)](_0x57a46e(0x103),_0x51f72f),_0x51f72f;}finally{_0x26734f=void 0x0;}}},se=require('fs'),uo=T(require('@ffmpeg-installer/ffmpeg')),w=T(require(a0_0x27119e(0x6b3))),_e=require('fs'),$=T(require('path')),ue=T(require(a0_0x27119e(0x693))),po=require('uuid'),go=T(require(a0_0x27119e(0x2e1))),mo=T(require(a0_0x27119e(0x2c8))),Xs=[a0_0x27119e(0x1a4),a0_0x27119e(0x553),a0_0x27119e(0x5e0),a0_0x27119e(0x269),a0_0x27119e(0x435)],Zs=[a0_0x27119e(0x415),a0_0x27119e(0x6a5),a0_0x27119e(0x1cf),a0_0x27119e(0x6a9)],ho=require('os'),kt=T(require('pino')),Vt=require(a0_0x27119e(0x1df)),Ns=require(a0_0x27119e(0x6a8)),Be=require('mongoose'),rs=T(require('mongoose')),ea=new C(a0_0x27119e(0x1af)),G=y[a0_0x27119e(0x201)](a0_0x27119e(0x4b8)),M=G['ENABLED']?G[a0_0x27119e(0x1e9)][a0_0x27119e(0x454)]?rs[a0_0x27119e(0x2c9)][a0_0x27119e(0x37c)](G['CONNECTION'][a0_0x27119e(0x454)],{'dbName':G[a0_0x27119e(0x1e9)]['DB_PREFIX_NAME']+a0_0x27119e(0x2e5)}):rs['default'][a0_0x27119e(0x37c)]('mongodb://'+G[a0_0x27119e(0x1e9)][a0_0x27119e(0x475)]+':'+G[a0_0x27119e(0x1e9)][a0_0x27119e(0x17c)]+a0_0x27119e(0x4e1),{'user':G[a0_0x27119e(0x1e9)][a0_0x27119e(0x30c)],'pass':G[a0_0x27119e(0x1e9)]['PASSWORD'],'dbName':G['CONNECTION'][a0_0x27119e(0x1bc)]+'-whatsapp-api'}):null;G[a0_0x27119e(0x371)]&&ea['info'](a0_0x27119e(0x280)+M['$dbName']);function a0_0x4be1(){const _0x5a81d4=['truncatedtoEnd','pollUpdateMessage','.json','Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','audioMessage','Error\x20fetching\x20group','events','Temp\x20audio\x20created','.mp4','redirect','295342GvGJzg','noConnection','delInstanceFiles','\x20instance\x20does\x20not\x20exist','findParticipants','vote','Including\x20timestamp\x20in\x20url:\x20','exec','chatModel','processConditions','Last\x20message\x20not\x20found','object','stringify','chats.set','createConversationforStartFlow','isArray','):\x20Conversa\x20está\x20expirada','DELETED','scheduleSendAudio','warn','GLOBAL','saveVariable','slice','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','presenceSubscribe','WEBHOOK_MAP','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','save','messageTimestamp','restart','checkAndUpdateChats','groupToggleEphemeral','toBRL','updateProfileStatus',',\x20Expiration\x20Time:\x20','message-up','Erro\x20ao\x20criar\x20o\x20fluxo:\x20','match_last_seen','less','Sistema\x20atualizado\x20com\x20sucesso!','closed','processPollUpdateMessage','chat','):\x20','AppStateSyncKeyData','pollCreationMessage','waMonit','Instance\x20ID:','waMonitor','groupUpdateDescription','\x1b[36m%s\x1b[0m','Início','\x20install\x20error:\x20','Full\x20file\x20path:','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','groupCreate','\x1b[33m%s\x1b[0m','):\x20não\x20encontrou','inviteCode','Error\x20change\x20group\x20description','hGet','mediaKey','Getting\x20profile\x20info','Flow\x20não\x20encontrado','.\x20Código\x20de\x20saída\x20','sendMessage','longitude','presence.update','instanceInfo','):\x20Flow\x20desativado','toLowerCase','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','scheduleSendText','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','load','AUTOUPDATE','webhookService','URL:','\x20messages.update.','sendPresenceUpdate','):\x20Editando\x20grupo\x20do\x20fluxo...','request\x20received\x20in\x20editConversation','sendAudio','upperCase','cpf','empty','Operador:\x20\x22','opendirSync','):\x20transformedCustomFieldVariables','scheduleMessage','lastInteraction','):\x20Campos\x20a\x20serem\x20atualizados:','params','replacer','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','stack','SEND_MESSAGE','https://jsonip.com','groupParticipantsUpdate','Deletion\x20failed','next_groupId','createNewConversation','PROD','eventEmitter','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','):\x20Limpando\x20AutomateSystem','reactionMessage','normalizeMessage','sendMedia','JWT','\x20minutos\x20verificará\x20novas\x20mensagens','auth','\x1b[32m','sendMessageWithTyping','):\x20Entrou\x20na\x20função\x20stop','STORE_CLEANING_TERMINAL','chats','defineAuthState','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','messaging-history.set','latitude','FULLCHAIN','Falta\x20informação\x20para\x20a\x20chamada\x20API','replaceVariables','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','isDirectory','from','addReplyOption','STORE_CHATS','):\x20Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20','notify','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','request\x20received\x20in\x20deleteDoneMessages','messageModel','limit','logout','Validate','updateGroupPicture','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20','method','/*.json','\x20-\x20ON:\x20','Router','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20áudio:','delay','Content\x20is\x20required','whatsappNumber','DEBUG','groups.upsert','entries','namespace','DOCKER_ENV','model','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','\x1b[37m%s\x1b[0m','action','app-state-sync-key','):\x20Enviando\x20localização','_p_','messages.update','removeData','replaceVariablesLogs','delaySecMax','Erro\x20inesperado\x20em\x20processvaredits:\x20','8080','readreceipts','rowId','):\x20Iniciando\x20bot...','scheduleMessages','urlencoded','WEBHOOK_GLOBAL_URL','.X-ABLabel:Celular\x0a','findChats','axios','Flow\x20already\x20exists','fetchProfilePicture','CREDENTIALS','statusMessage','Imagem\x20não\x20encontrada','\x20não\x20encontrado','API_KEY','notEmpty','AUTHENTICATION','tags','NAME','order','variablesToObject','long','\x5c$&','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','flowPrefixCommand','documentWithCaptionMessage','findOneAndUpdate','gifPlayback','node-mime-types','viewOnceMessageV2','saveMediaToFile','capitalizedWords','stopMinutesMaxActives','includes','request\x20body:\x20','Connection','Erro\x20ao\x20iniciar\x20fluxo:\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','@whiskeysockets/baileys','):\x20debug\x20alterando\x20this.AutomateSystem','\x1b[30m%s\x1b[0m','Converted\x20audio\x20deleted','DD/MM\x20HH:mm:ss','syscall','scheduled','lastMessage','stanzaId','Contacts\x20not\x20found','\x22\x20not\x20found','linkPreview','GUARD','minutesToClose','rm\x20-rf\x20','isBusiness','local_map','urlOrBase64','deleteMany','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','WEBHOOK_EVENTS_PRESENCE_UPDATE','deleteMessageForEveryone','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','localWebhook','logger','editFlowReply','replaceOne','including\x20timestamp\x20in\x20url:\x20','não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','HH:mm:ss','/instance/fetchInstances','Fluxo\x20não\x20encontrado','ex:\x20\x22groupJid=120362@g.us\x22','contextInfo','CONTACTS_UPSERT','):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20usuário\x20e\x20contém\x20palavras\x20para\x20pausar\x20o\x20fluxo','WEBHOOK_EVENTS_CONTACTS_UPSERT','subjectTime','use','getflow','allContacts','instanceKeys','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20','Comando\x20desconhecido','/exit','notas','licenca','_doc','authService','findAndReplaceRegex','fetchChats','request\x20received\x20in\x20createFlow','forEach','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','Hash\x20to\x20image\x20name:\x20','setting','validate','/instance/create','Cache-Control','ERROR:\x20','fetchPrivacySettings','WEBHOOK_EVENTS_CONTACTS_SET','wuid','updateGParticipant','toggleEphemeral','stopConversation','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','function','type','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','processblock','#ffffff',',\x20Comparador:\x20','findGroupInfo','):\x20Erro\x20ao\x20buscar\x20conversas\x20','replaceVariablesInReplyOptions','contacts','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','sendText','Button\x20texts\x20cannot\x20be\x20repeated','CHATS_UPSERT','tokenId','displayName','PHONE','statusJidList','pollCreationMessageKey','utf8',',\x20qrcodeCount:\x20','7464ciBSyg','Conexão\x20estabelecida',',\x20Minutes\x20to\x20Close:\x20','updateStopChat','font','connect','getProfileName','@s.whatsapp.net','close','fetchInstances','updateProfilePicturePrivacy','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','):\x20Visualizando\x20AutomateSystem','AUTHENTICATION_TYPE','updateConversation',',\x20Resultado:\x20','http','DATABASE_CONNECTION_HOST','Instance\x20\x22','oldToken','sendLocation','):\x20Enviando\x20áudio','/webhook','errno','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','query','endsWith','group','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','_activatedCount','\x20-y','conversation','):\x20Erro\x20ao\x20editar\x20o\x20chat:\x20','json','remote\x20\x22origin\x22','WEBHOOK_EVENTS_QRCODE_UPDATED','https','/wa-groups','MESSAGES_UPSERT','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','Archiving\x20chat','all','\x1b[44m','utf-8','sendWhatsAppAudio','50mb','express','SERVER_ACK','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','Image\x20path:\x20','Error\x20update\x20group\x20picture','\x20-i\x20','):\x20customFieldVariables','Message','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','description','/wa-chats','processvaredits','padEnd','desativadoFluxoAte','routerPath','verifiedName','No\x20participants','Types','profilePicture','mongodb','option','ORG:','Unknown\x20message\x20type\x20encountered','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','updateProfilePicture','updateReplyOption','The\x20\x22','CONFIG_SESSION_PHONE_CLIENT','.png','options','\x20is\x20already\x20in\x20use.','lastSend','remove.instance','class-validator','fromMe','notEqual','deleteOne','flowIgnoreGroups','VERBOSE','updateFlowConfig','firstValue','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','caption','):\x20conversation.lastInteraction:\x20','\x1b[34m%s\x1b[0m','stateConnection','PORT','toLocaleString','groups','CONFIG_SESSION_PHONE_NAME','Background\x20color\x20is\x20required','groupValidate','SSL_CONF_FULLCHAIN','groups.update','groupSetting','):\x20Erro\x20ao\x20editar\x20agentes:\x20','.mp3','restartInstance','pollErrorMessage','\x22\x20cannot\x20be\x20empty','):\x20Conversa\x20inserida\x20com\x20sucesso.','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','client','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','Audio\x20processed',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','round','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','envYaml','fetchProfile2','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','getRandomText','/wa-qrcode','pollOnReplyDelete','51369CnYfeP','\x1b[34m','contactModel','dbSettings','js-yaml','):\x20Erro\x20durante\x20a\x20atualização:\x20','markMessageAsRead','*\x0a\x0a','block','SSL_CONF_PRIVKEY','\x1b[42m','groupId','imageMessage','Enter\x20a\x20value\x20in\x20milliseconds','\x0a*Você\x20respondeu*:\x0a','owner','not\x20loaded','setWebhook','EMAIL','reviver','Error\x20updating\x20profile\x20name','uazapiSendAudio','participant','Db\x20Connection','connection.update','repeat','processConditionsTest','Instance\x20restarted','updatePresence','):\x20Procurando\x20conversa','editflowcondition','release','Original\x20filename:','locationMessage','Error\x20updating\x20profile\x20status','lastBlockId','DB_PREFIX_NAME','Invalid\x20format','\x20chats\x20de\x20','lastSendMessage','instances','https://','Nenhum\x20chat\x20encontrado\x20para\x20editar.','saveChatVariables','startFlow','qrcode.updated','LIMIT','rows','findGroups','views','flowname:\x20','replyOption','\x20inseridas\x20no\x20banco\x20de\x20dados...','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','readMessages','viewOnceMessage','AUTHENTICATION_API_KEY','editFlow','context','Connection\x20closed\x20for\x20instance:\x20','Já\x20existe\x20fluxo\x20com\x20esse\x20nome',',\x20valor\x20a\x20encontrar:\x20\x22','KEY','Error\x20change\x20group\x20setting','request\x20received\x20in\x20fetchConversation','editFlowVaredit','531vIdTar','groupInviteCode','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:','lastCondition','--version','child_process','/wa-message','headerString','send.message','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','eventemitter2','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','getStatus','Logger','Image\x20created','CONNECTION','editflowvariable','Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','notContains','variables','Getting\x20image\x20from\x20url','some','https://github.com/uazapi/uazapi.git','sendPoll','\x1b[30m','):\x20Conversa\x20atualizada\x20em\x20memória','msgRetryCounterCache','getDevice','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','deleteConversation','flowStopMinutes','getVariablesChat','sticker','\x1b[33m\x1b[1m','NO_IP','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','selectableCount','formatStatusMessage','contact_blacklist','get','TYPE','groupDesc','STORE_CONTACTS','):\x20Criando\x20nova\x20conversa','removeProfilePicture','Trying\x20to\x20get\x20business\x20profile','The\x20instance\x20is\x20already\x20connected','File\x20written\x20to\x20path:\x20','connectionStatus','authState','TRIAL_INSTANCE_NAME','uazapiSendLocation','groupFetchAllParticipating','fone','response','The\x20property\x20cannot\x20be\x20empty','findStatusMessage','statusCode','refreshToken','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','code','):\x20Entrou\x20na\x20função\x20saveReply','stopped','Module\x20-\x20ON','WEBHOOK_EVENTS_STATUS_INSTANCE','LOG_COLOR','realVariables','and','reorderBlocks','getConversation','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','fetchMessages','status.instance','hGetAll','Falha\x20ao\x20deletar\x20mensagens\x20antigas:','leadInfo','boolean','CONNECTION_UPDATE','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','findByIdAndUpdate','prepareWAMessageMedia','\x0a{\x20instance:\x20','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','trimmed','/refreshToken','messages','Message\x20not\x20found','dbServer','verbose','fetchStatusMessage','):\x20isVote','changeVariables','DisconnectReason','TRIAL_AD','toBrazilianNumberFormat','QRCODE_LIMIT','No\x20invite\x20code','jid','updateAgent',',\x20resultado:\x20','loadWebhook','\x20não\x20encontrado\x20para\x20atualização.','archiveChat','https://chat.whatsapp.com/','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','group\x20ignored','unhandledRejection','):\x20teve\x20mudanças\x20chat.name:\x20','unavailable','):\x20Buscando\x20conversas...','Erro\x20ao\x20alterar\x20o\x20fluxo:\x20','contactMessage','):\x20Alterando\x20fluxo...','Log\x20out\x20instance:\x20','chrome','allflows','success','Content-Type','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','fetchLatestBaileysVersion','Error\x20deleting\x20instance\x20from\x20memory.','userDevicesCache','group-participants.update','pop','error','.refreshToken','variablesNotFound','DARK','./.git/config','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','authentication','apikey','/group','variable','LEVEL','!cmd_','dark','indexOf','errorLog','DATABASE_CONNECTION_DB_PREFIX_NAME','):\x20encontrado\x20próxima\x20mensagem\x20para\x20','videoMessage','Output\x20audio\x20path:\x20','joinGroup','everyOne','end','message','status@broadcast','deleteflow','request\x20received\x20in\x20editFlowgroup','fetchStatus','g.us','parseInt','sendStatus','EXPIRIN_IN','Número:\x20','fetchContacts','parse','stopIfLastReturnedError','findOne','dbClient','connecting','WEBHOOK_EVENTS_GROUPS_UPDATE','varedits','ON\x20-\x20dbName:\x20','request\x20received\x20in\x20editFlowvariable','process','setContext','createInstance','created','findFlow','organization','ObjectId','groupRevokeInvite','repository','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo\x20','data:\x20','editflowreply','chats.delete','):\x20alterando\x20this.AutomateSystem','Instância\x20não\x20encontrada.','Read\x20messages\x20fail','Forbidden','interval\x20não\x20é\x20um\x20número','trim','createClient','contentText','Tanto\x20id\x20quanto\x20owner\x20são\x20necessários\x20para\x20criar\x20ou\x20editar\x20um\x20chat.','Error\x20updating\x20participants','Erro\x20de\x20atualização:\x20','url','replaceValue','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','}}\x20->\x20valor\x20não\x20encontrado','split','groupName','/chat','Error\x20updating\x20privacy\x20settings','atendimentoAberto','Error\x20while\x20deleting\x20message\x20for\x20everyone','\x20install\x20output:\x20','/create','TEXT','env.KEY\x20!==\x20key','):\x20expirationTime:\x20','PENDING','DATABASE_ENABLED','text/event-stream','):\x20delete\x20=\x20true','Revoke\x20error','datetime','string','EVENTS','waInstances','$set','fromObject','findWebhook','creds.json','Profile\x20not\x20found','Button\x20IDs\x20cannot\x20be\x20repeated.','instance.','user','):\x20Criando\x20fluxo...','blockLogs','request\x20received\x20in\x20getFlow','?timestamp=','getMinutes','isConnected','URL','Deleted\x20','EMAIL:','CORS_METHODS','redis-server','delayMessage','writeData','map','qrcode-terminal','default','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','downloadMediaMessage','getTime','\x20minutos','):\x20Buscando\x20flow...','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','new.jwt','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','delete','numbers','createGroup','joinGroupValidate','defineProperty','fileLength','isJidGroup','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','pollCreationMessageV3','NEW_JWT_TOKEN','unlinkSync','archived','convert','):\x20Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','qrcode','done','):\x20Não\x20achou\x20nenhum\x20flow','finish','-whatsapp-api','findMessages','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','assign','readMessage','Business\x20profile\x20fetched','fileName','generateHash','STATUS_INSTANCE','router','resetReconnectionVariables','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','request\x20received\x20in\x20updateFlowConfig','binary','\x20inseridos\x20no\x20banco\x20de\x20dados...','downloads','Fluxos\x20não\x20estão\x20ativados','Error\x20updating\x20message\x20status:','LICENSE_INVALID','\x1b[43m','):\x20Error\x20processing\x20conditions:\x20','pre','charAt','agents','):\x20Limpando\x20delayMessage','has','hex','restrict','protocolMessage','Media\x20folder\x20does\x20not\x20exist,\x20creating\x20folder...','_id','keep-alive','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','pollMessage','poll_id','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','editScheduleMessage','endSession','):\x20Deletando\x20conversa...','USER','waitingPoll_replyOptions','ios','GROUPS_UPDATE','connected','fetchBusinessProfile','mentions','request\x20received\x20in\x20getConversation','getContentType','insert','.webp','request\x20received\x20in\x20starFlow','put','editFlowVariable','buttonId','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','varedit','scheduleSendMedia','call','editflowgroup','ButtonsMessage','Erro\x20ao\x20aplicar\x20varedit:\x20','role','getPrototypeOf','sendDataWebhook','uazapiSendMedia','sendList','INFO','Authentication\x20error','reconnectAttempts','prototype','):\x20Editando\x20bloco...','performBulkUpdate','uncaughtException','/wa-connection-update','readdirSync','deleteDoneMessages','prefixCommand','arrayUnique','instance','notMatchRegex','mongoose','writeFile','Error\x20removing\x20profile\x20picture','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','Temp\x20audio\x20deleted','apiResponse','deleteFlow','count','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','listen','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','Erro\x20ao\x20tentar\x20updateCustomFields:\x20','number','path','):\x20Deletando\x20mensagem','isInteger','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','Unable\x20to\x20leave\x20the\x20group','replyOptions','lastReceivedMessage','video','Erro\x20ao\x20editar\x20a\x20conversa:\x20','conditions','header','available','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','\x1b[37m','evaluateCondition','CLIENT','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','WEBHOOK_EVENTS_CHATS_DELETE','allFlows','apirequest','):\x20this.processingScheduleMessageId:\x20','groups_ignore','store','presence','editConversation','Não\x20foi\x20possível\x20obter\x20o\x20endereço\x20IP,\x20interrompendo\x20a\x20aplicação.','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','closeExistingConversations','Erro:','sendContact','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','/wa-presence','webhook','replace','base64','sudo\x20apt\x20install\x20-y\x20redis-server','contactHandle','groupSettingUpdate','contact','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','CONTACTS_SET','then','web','info','find','apiName','@broadcast','ENABLED','app','updateCustomFields','messageContextInfo','Variável\x20não\x20encontrada!','console','WEBHOOK_EVENTS_CHATS_UPSERT','nome','saveTextReply','Erro\x20ao\x20instalar\x20','splice','createConnection',',\x20saindo.','SendScheduleMessage','\x1b[36m','extractRegex','Schema','getOwnPropertyNames','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20','editOperator','WEBHOOK','ERROR','processApiRequest','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20e\x20não\x20é\x20a\x20stopConversation.\x20Saindo\x20da\x20função.','messages.set','Image\x20converted\x20to\x20WebP','convertaudio','request\x20received\x20in\x20allFlows','src','convertToWebP','when','):\x20Editando\x20edição\x20do\x20fluxo...','Erro\x20ao\x20editar\x20o\x20bloco:\x20','setNewValue','nextBlock:','last','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','contacts.upsert','):\x20Criada\x20conversa\x20nova\x20(gotoflow)','getLastMessage','):\x20teve\x20mudanças\x20chat.archived:\x20','formatBRNumber','CONFIG_SESSION_PHONE','authorization','true','.jwt','size','findIndex','optionName','Primeiro\x20Valor:\x20','isURL','send','uazapi','SERVER','Type\x20not\x20found','removed','OrAnd','originalUrl','enumerable','\x0aitem','waitingPoll_id','):\x20updateResult:','enabled','cleanStore','WARN','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','findGroup','random','Subscribed\x20Events:','exists','view\x20engine','flowConfig','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','):\x20Mensagens\x20com\x20status\x20\x22done\x22\x20deletadas\x20com\x20sucesso.','):\x20Error\x20processing\x20the\x20block:\x20','pollMessageOnDelete','fetchConversation','whatsappNumbers','):\x20Criou\x20conversa\x20no\x20startFlow:','Image\x20is\x20url','Erro\x20ao\x20deletar\x20a\x20conversa:\x20','Erro\x20ao\x20encerrar\x20a\x20API','name','editFlowCondition','remove','):\x20Conversas\x20encontradas:','Getting\x20profile\x20with\x20jid:\x20','LOG','toString','fullName','stderr','document','reaction','flattenObject','\x22\x20-\x20NOT\x20CONNECTION','stdout','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','deleteBlock','padStart','hostname','/media/','request\x20received\x20in\x20updateCustomFields','Falha\x20ao\x20deletar\x20mensagens:','Not\x20Found','):\x20Editando\x20replyOption...','bearer','greater','exit','expression','leadInfo.','2062928YGTaZb','getMessage','sort','bulkWrite','request\x20received\x20in\x20scheduleMessage','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','):\x20Erro\x20ao\x20alterar\x20fluxo:\x20','blocks','Erro\x20ao\x20atualizar\x20conversa:\x20','__esModule','join','DATABASE_CONNECTION_PASSWORD','senderKeyDistributionMessage','\x20minutos...','pt-BR','):\x20Current\x20Time:\x20','findConversation','):\x20Erro\x20ao\x20deletar\x20mensagens\x20com\x20status\x20\x22done\x22:','profilePictureUrl','):\x20Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20','Data\x20inválida\x20fornecida','backgroundColor','remoteJid','getDelay','messageHandle','isBooleanString','messages.upsert','RECONNECT_TIME_FRAME','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','prepareMediaMessage','composing','mimetype','uuid','getAutomateSystem','Flow\x20iniciado\x20com\x20','Method\x20not\x20implemented.','):\x20Tentando\x20deletar\x20todas\x20mensagens\x20updates...','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','start','):\x20Editando\x20variável\x20do\x20fluxo...','connectionClosed','findById','evaluateConditionTest','editflowvaredit','mediaSticker','Não\x20respondeu\x20com\x20a\x20enquete.','getBase64FromMediaMessage','keys','messageId','Erro\x20ao\x20editar\x20o\x20chat:\x20','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','AUTHENTICATION_JWT_SECRET','ephemeralMessage','privacySettings','website','sign','remoteJidsRemaining','/events','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','):\x20Dados\x20recebidos\x20no\x20editFlowGroup:','writeStore','throwAndLogError','onTime','errors','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','QRCODE_UPDATED','DEL_INSTANCE','last_update','redisEnv','scheduleNextCheck','instanceName\x20not\x20provided.','CONTACTS_UPDATE','SSL_CONF','READ','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','remoteJids','\x1b[0m','mediaMessage','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','):\x20Edit\x20schedule\x20message...','ReplyOption\x20com\x20ID\x20','optionDescription','E-mail:\x20','AUTHENTICATION_JWT_EXPIRIN_IN','stickerMessage','delInstanceTime','updateMediaMessage','PREFIX_KEY','startsWith','online','saveConversationToDatabase','sendButtons','max','addBlock','open','cleaningUp','ffmpeg','responsavelid','add','nomecompleto','mkdirSync','Próxima\x20verificação\x20em\x20','create','title','WEBHOOK_EVENTS_GROUP_PARTICIPANTS_UPDATE','Por\x20favor,\x20responda\x20à\x20última\x20enquete\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','chats.upsert','Desconectado,\x20parando\x20execução.','arraybuffer','):\x20Ignoring\x20group\x20messages.','format','getTicketSystem','encoding','contactsArrayMessage','textMessage','URI','findAndReplace','newStoppedUntil','Atualização:\x20','WEBHOOK_EVENTS_GROUPS_UPSERT','Instance\x20Key\x20from\x20DB:','command','temp-','Close\x20connection','Telefone:\x20','writeFileSync','del','audio/mp4','push','buttonMessage','NODE_ENV','createConversationforgoToFlow','metadata','REDIS_PREFIX_KEY','blockId','content','WEBHOOK_EVENTS_NEW_JWT_TOKEN','update','messageUpdate','):\x20Enviando\x20enquete','updatePrivacySettings','@g.us','):\x20Erro\x20ao\x20editar\x20a\x20conversa:\x20','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','vcard','Fetching\x20business\x20profile','^\x5cd+','getFlow','HOST','shift','The\x20global\x20api\x20key\x20must\x20be\x20set','Media\x20folder\x20path:','/wa-message-update','contains','audio/ogg','storePath','emit','updateMessage','editFlowBlock','desc','isJidUser','updateMany','saveCreds','MESSAGES_SET','onWhatsApp','createServer','uazapiSendText','android','END:VCARD','https://uazapi-plugin.bubbleapps.io/?url=','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','):\x20teve\x20mudanças\x20chat.displayName:\x20','@redis/client','readFileSync','CORS_CREDENTIALS','!stop','substring','instanceName','):\x20Erro\x20ao\x20criar\x20fluxo\x20','\x1b[1m','jsonwebtoken','customFields','PRESENCE_UPDATE','):\x20newFirstValue\x20após\x20replaceVariables:','GROUP_PARTICIPANTS_UPDATE','isBase64','FlowRouter','WEBHOOK_EVENTS_CONNECTION_UPDATE','status','75308OWSnPt','updateProfileName','/media','matchRegex','unreadcount','CONECTADO\x20À\x20UAZAPI','):\x20Query\x20params:','modifiedCount','moreLogs','waitingPoll_name','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','chats.update','\x1b[31m%s\x1b[0m',',\x20valor\x20passado:\x20\x22','*Pergunta*:\x20\x0a','birthtime','getClient','truncatedto','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','):\x20conversation.waitingPollname','revokeInviteCode','jwt','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','fetchProfile','abs','DATABASE','flowStopConversation','DATABASE_CONNECTION_USER','dbInstance','Processing\x20audio','Output\x20path:\x20','existsSync','ini','sharp','getHours','readData','deleteMessage','MESSAGES_UPDATE','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','headers','toArray','getBusinessProfile','initAuthCreds','groupLeave','create\x20-\x20success','sendReaction','equal','messageUpModel','applyvaredit','-instances','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','loadEnv','updateGroupsAddPrivacy','createJid','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','updateOnlinePrivacy','):\x20newSecondValue\x20após\x20replaceVariables:','getScheduleMessage','phoneNumber','cwd','key','static','groupAcceptInvite','\x20segundos','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','?authSource=admin&readPreference=primary&directConnection=true','):\x20Flow\x20não\x20encontrado','Erro\x20ao\x20editar\x20agentes:\x20','groupHandler','Group\x20not\x20found','sending','setHeader','mediatype','recording','body','\x1b[40m','profile','buttons','subjectOwner','audio','\x1b[32m%s\x1b[0m','dataValidate','condition','connectionState','Erro\x20na\x20migração:','sleep','FlowController','media','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','editedMessage','contactname','editflowblock','\x5cd+','segundos','getOwnPropertyDescriptor','Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','isJWT','StartBot','log','chatLog','NextBlock','address','uazapiSendPoll','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','maxActives','https://api.ipify.org?format=json','request\x20received\x20in\x20updateAgent','cors','getMIMEType','isFile','expiration','goNextblock','CHATS_SET','eventHandler','Invalid\x20\x22oldToken\x22','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','CLEANING_INTERVAL','DELIVERY_ACK','state','.\x20Pulando.','ignoreGroups','not_announcement','Image\x20is\x20base64','findGroupInfos','Temp\x20image\x20deleted','deleteInstance','text','/wa-contacts','Converted\x20image\x20deleted','updateGParticipate','filter','newValue','flow','):\x20atualização\x20chat:\x20','collection','Conversa\x20deletada\x20com\x20sucesso.','locked','reconnectTimestamps','Type\x20is\x20required','):\x20Erro\x20ao\x20buscar\x20a\x20conversa\x20','leadInfo.desativadoFluxoAte','where','editFlowGroup','\x1b[41m','hbs','readMessageBot','height','formatVCard','AutomateSystem','unreadCount','Missing\x20global\x20api\x20key','toFile',',\x20fará\x20nova\x20verificação\x20em\x20','audioWhatsapp','rmSync','uazapiSendContact','listMessage','This\x20name\x20','image','GROUPS_UPSERT','array','now','connectToWhatsapp','QRCODE','editChat','request\x20received\x20in\x20editFlowcondition','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','verify','345216EanEDE','uazapiDeleteMessage','participants','debug','/automate','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','SECRET','collections','none','Read\x20messages','creds','documentMessage','Cannot\x20','REDIS','post','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','output','):\x20Deletados\x20','Type\x20defined\x20as\x20audio','PLAYED','request\x20received\x20in\x20deleteConversation','badSession','CORS_ORIGIN','value','imagechat','STORE_MESSAGE','sendSticker','deleteReplyOption','Temp\x20audio\x20path:\x20','Parando\x20aplicação...','request\x20received\x20in\x20editFlow','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','chatModify','Error\x20creating\x20group','inner','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','express-async-errors','}}\x20->\x20\x22','audio/ogg;\x20codecs=opus','):\x20Enviando\x20mídia','creation','pushName','floor','/:instanceName','webhookModel','hSet','env','buffer','groupadd','8rmnjZn','sections','Valor\x20de\x20find\x20ou\x20replace\x20ausente','pollCreationMessageV2','leaveGroup','updateOne','length','updateReadReceiptsPrivacy','#000000','loggedOut','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','\x20foi\x20interrompido\x20pelo\x20usuário.','):\x20nextBlock.uazapi.name','test','createFlow','isLong','\x20\x1b[0m','integer','processingScheduleMessageId','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','processgoToFlow','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','fetchProfilePictureUrl','set','hasOwnProperty','generateWAMessageFromContent','configService','values','buttonText','conversationTimestamp','lastmsg','currency','findContacts','Falha\x20ao\x20deletar\x20mensagens\x20updates:','):\x20Comando\x20desconhecido:\x20','Error\x20in\x20markMessageAsRead:','Variáveis\x20não\x20encontradas:','):\x20Enviando\x20texto','BufferJSON','creds.update','bodyString','secondValue','redis','CORS','):\x20Deletando\x20fluxo...','\x22,\x20valor\x20a\x20substituir:\x20\x22','data','announce','):\x20Enviando\x20contato','toUpperCase','):\x20Buscando\x20conversa...','WEBHOOK_EVENTS_CONTACTS_UPDATE','delAll','redisCache','hDel','write','newName','lean','webhookMap','CHATS_DELETE','removeInstance','):\x20lastBlockId:\x20','delaySecMin','\x0aFN:','mentioned','):\x20Erro\x20ao\x20deletar\x20a\x20conversa\x20','valid','upsertChats','796205CIGJNP','stopMinutes','insertMany','Instance\x20logged\x20out','messagesSend','qrCode','email','sha256','groupMetadata','goToFlow','WEBHOOK_EVENTS_CHATS_UPDATE','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','readFile','authModel','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','promote','REDIS_ENABLED','match','groupJid','paused','processUazapi','chatHandle','getAllData','/clients-info','updateChatWithMessage','-version','subject','contacts.update','CHATS_UPDATE','replaceVariablesChat','isRunning'];a0_0x4be1=function(){return _0x5a81d4;};return a0_0x4be1();}async function Go(){const _0xae148c=a0_0x27119e;await D[_0xae148c(0x482)]({'leadInfo.tags':{'$exists':!0x1}},{'$set':{'leadInfo.tags':[]}}),await D['updateMany']({'leadInfo.customFields':{'$exists':!0x1}},{'$set':{'leadInfo.customFields':[]}}),await D[_0xae148c(0x482)]({},{'$unset':{'lastUpdate':0x1,'lastMsgUpdate':0x1}});}M?.['on'](a0_0x27119e(0x310),()=>{const _0x4c9dba=a0_0x27119e;D&&Go()['catch'](_0x21eb17=>ea['error'](_0x4c9dba(0x4f4)+_0x21eb17));});var ns=class{},qo=new Be[(a0_0x27119e(0x381))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),Wo=new Be[(a0_0x27119e(0x381))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[qo],'default':[]},'statusLead':{'type':String},'note':{'type':String},'disableFlowsUntil':{'type':Number},'serviceOpen':{'type':Boolean},'assignedTo':{'type':String}},{'_id':!0x1}),Ho=new Be[(a0_0x27119e(0x381))]({'_id':{'type':String,'_id':!0x0},'id':{'type':String,'required':!0x0,'minlength':0x1},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number},'unreadcount':{'type':Number},'lastcache':{'type':Number},'leadInfo':{'type':Wo,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'group_size':{'type':Number},'group_announce':{'type':Boolean},'lastUpdate':{'type':Number},'lastMsgUpdate':{'type':Number}}),D=M?.[a0_0x27119e(0x67e)](ns['name'],Ho,a0_0x27119e(0x65a)),ta=require(a0_0x27119e(0x335)),cs=class{},Ko=new ta[(a0_0x27119e(0x381))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'id':{'type':String,'required':!0x0,'minlength':0x1},'profilePictureUrl':{'type':String,'minlength':0x1},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String}}),Fe=M?.['model'](cs[a0_0x27119e(0x3c5)],Ko,a0_0x27119e(0x114)),O=require(a0_0x27119e(0x335)),sa=new O['Schema']({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),ls=new O[(a0_0x27119e(0x381))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),zo=new O['Schema']({'command':{'type':String},'text':{'type':String},'delay':{'type':Number},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'pollErrorMessage':{'type':String,'default':a0_0x27119e(0x44a)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),aa=new O[(a0_0x27119e(0x381))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),oa=new O['Schema']({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String}},{'_id':!0x1}),Qo=new O['Schema']({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),ia=new O[(a0_0x27119e(0x381))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':zo},'apirequest':oa,'stopMinutes':{'type':String},'goToFlow':{'type':String},'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa}}),hs=new O['Schema']({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),ra=new O[(a0_0x27119e(0x381))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),us=class{},na=new O[(a0_0x27119e(0x381))]({'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'readMessages':{'type':Boolean,'default':!0x1},'testingWith':{'type':String},'startCommandWord':{'type':String,'default':function(){const _0x5d9875=a0_0x27119e;return _0x5d9875(0x263)+Math[_0x5d9875(0x3b6)]()['toString'](0x24)[_0x5d9875(0x5fc)](0x2,0x7);},'required':!0x1,'minlength':0x5},'variables':[hs],'variablesNotFound':{'type':[String]},'blocks':[ia],'groups':[sa],'conditions':[aa],'varedits':[ra],'replyOptions':{'type':[ls],'default':[]}});na[a0_0x27119e(0x2fa)](a0_0x27119e(0x601),function(_0x453e8e){const _0x372e43=a0_0x27119e;let _0x2e327e=new Set(),_0x4a3a20=new Set(this['variables']?.[_0x372e43(0x2c7)](_0x4604b9=>_0x4604b9['name'])),_0x584ea0=JSON[_0x372e43(0x5f2)](this),_0x299acb=/{{(?!_)([^}]*)}}/g,_0x17d631;for(;(_0x17d631=_0x299acb[_0x372e43(0x5ed)](_0x584ea0))!==null;)_0x4a3a20[_0x372e43(0x2fe)](_0x17d631[0x1])||_0x2e327e[_0x372e43(0x443)](_0x17d631[0x1]);_0x2e327e[_0x372e43(0x3a1)]>0x0?(console['warn'](_0x372e43(0x59d),Array['from'](_0x2e327e)),this[_0x372e43(0x25a)]=Array[_0x372e43(0x664)](_0x2e327e)):this[_0x372e43(0x25a)]=[],_0x453e8e();});var I=M?.[a0_0x27119e(0x67e)](us['name'],na,a0_0x27119e(0x524)),Yo=new O[(a0_0x27119e(0x381))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[hs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[Qo]},{'_id':!0x1}),ds=class{},Xo=new O['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[hs],'blocks':[ia],'groups':[sa],'conditions':[aa],'varedits':[ra],'replyOptions':{'type':[ls],'default':[]},'chatLog':Yo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x27119e(0x43f)},'waitingPoll_id':{'type':String},'waitingPoll_name':{'type':String},'waitingPoll_replyOptions':{'type':[ls],'default':[]}}),F=M?.['model'](ds[a0_0x27119e(0x3c5)],Xo,'flowConversation'),ps=class{},Zo=new O[(a0_0x27119e(0x381))]({'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'mediatype':{'type':String},'fileName':{'type':String}},{'_id':!0x1}),ei=new O[(a0_0x27119e(0x381))]({'owner':{'type':String},'status':{'type':String,'default':a0_0x27119e(0x6b9)},'info':{'type':String},'type':{'type':String},'flowName':{'type':String},'message':{'type':Zo,'default':{}},'remoteJids':{'type':[String],'default':[]},'when':{'type':Number},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'messagesSend':{'type':[Object],'default':[]},'remoteJidsRemaining':{'type':[String],'default':[]},'startSend':{'type':Number}}),U=M?.[a0_0x27119e(0x67e)](ps['name'],ei,a0_0x27119e(0x68e)),gs=class{},ti=new O[(a0_0x27119e(0x381))]({'name':{'type':String},'requests':[oa],'owner':{'type':String}}),en=M?.['model'](gs['name'],ti,'saveAPI'),ms=class{},si=new O[(a0_0x27119e(0x381))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),ai=new O[(a0_0x27119e(0x381))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'},'stopConversation':{'type':String,'default':a0_0x27119e(0x490)},'stopMinutes':{'type':Number,'default':0x14}},{'_id':!0x1}),oi=new O['Schema']({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),ii=new O[(a0_0x27119e(0x381))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[oi]},'customFields':{'type':[si]},'flowConfig':{'type':ai,'default':{}}}),ie=M?.[a0_0x27119e(0x67e)](ms['name'],ii,'AutomateSystem'),be=T(require(a0_0x27119e(0x335))),k=require('class-validator'),fe=class{constructor(_0x18688e,_0x3b545e,_0x13add1){const _0xdbc14f=a0_0x27119e;this[_0xdbc14f(0x23d)]=_0x18688e,this[_0xdbc14f(0x3b8)]=_0x3b545e,this[_0xdbc14f(0x3c5)]=_0x13add1;}},Je=class{},Ge=class{},Ce=class{},qe=class{},We=class{},we=class{},He=class{},Ke=class{},ze=class{},Qe=class{},Pt=T(require('express')),ca=require('fs'),la=require(a0_0x27119e(0x342));async function Ye(_0x434977){const _0x13eef9=a0_0x27119e;let _0xe7e7de=J[_0x13eef9(0x2b1)][_0x434977];if(G[_0x13eef9(0x371)]){let _0x5f1727=M['getClient']()['db'](G[_0x13eef9(0x1e9)][_0x13eef9(0x1bc)]+_0x13eef9(0x4d0))['collection'](_0x434977);return _0xe7e7de||(await _0x5f1727[_0x13eef9(0x36e)]({})[_0x13eef9(0x4c7)]())[_0x13eef9(0x57f)]>0x0;}return _0xe7e7de||(0x0,ca[_0x13eef9(0x4be)])((0x0,la['join'])(j,_0x434977));}async function fs(_0x139207,_0x372ade,_0x30a839){const _0xc6635d=a0_0x27119e;if(_0x139207[_0xc6635d(0x3ac)]['includes']('/instance/create')||_0x139207['originalUrl'][_0xc6635d(0x6ad)]('/instance/fetchInstances')||_0x139207[_0xc6635d(0x3ac)][_0xc6635d(0x6ad)](_0xc6635d(0xf4)))return _0x30a839();let _0x2896ba=_0x139207[_0xc6635d(0x642)];if(!_0x2896ba?.[_0xc6635d(0x492)])throw new g(_0xc6635d(0x427));if(!await Ye(_0x2896ba['instanceName']))throw new x('The\x20'+_0x2896ba['instanceName']+_0xc6635d(0x5e9));_0x30a839();}async function ua(_0x5e38d5,_0x3293e3,_0x124e17){const _0x254601=a0_0x27119e;if(_0x5e38d5['originalUrl'][_0x254601(0x6ad)](_0x254601(0x101))){let _0x119efa=_0x5e38d5['body'];if(await Ye(_0x119efa['instanceName']))throw new re(_0x254601(0x53d)+_0x119efa[_0x254601(0x492)]+_0x254601(0x16c));J[_0x254601(0x2b1)][_0x119efa[_0x254601(0x492)]]&&delete J['waInstances'][_0x119efa[_0x254601(0x492)]];}_0x124e17();}var da=require(a0_0x27119e(0x16f)),pa=T(require(a0_0x27119e(0x495))),Xe=a0_0x27119e(0x3a7),ni=new C(a0_0x27119e(0x6bf));async function ci(_0x2205c1,_0x45f8cd,_0x36b7ee){const _0x2f25c7=a0_0x27119e;let _0xccd1fb=_0x2205c1['get'](_0x2f25c7(0x25f));if(_0xccd1fb&&y[_0x2f25c7(0x201)](_0x2f25c7(0x69c))[_0x2f25c7(0x69a)][_0x2f25c7(0x1d6)]!==_0xccd1fb)throw new ne();if(y[_0x2f25c7(0x201)](_0x2f25c7(0x69c))[_0x2f25c7(0x69a)]['KEY']===_0xccd1fb)return _0x36b7ee();if((_0x2205c1[_0x2f25c7(0x3ac)][_0x2f25c7(0x6ad)]('/instance/create')||_0x2205c1[_0x2f25c7(0x3ac)][_0x2f25c7(0x6ad)](_0x2f25c7(0x6d1)))&&!_0xccd1fb)throw new re(_0x2f25c7(0x536),_0x2f25c7(0x477));let _0x1abd18=y[_0x2f25c7(0x201)](_0x2f25c7(0x69c))[_0x2f25c7(0x653)];try{let [_0x26bfde,_0x19bad5]=_0x2205c1['get'](_0x2f25c7(0x39e))['split']('\x20');if(_0x26bfde[_0x2f25c7(0x62c)]()!==_0x2f25c7(0x3dc))throw new ne();if(!(0x0,da[_0x2f25c7(0x500)])(_0x19bad5))throw new ne();let _0x3d3833=_0x2205c1[_0x2f25c7(0x642)],_0x26ebed=pa['default'][_0x2f25c7(0x547)](_0x19bad5,_0x1abd18[_0x2f25c7(0x54e)],{'ignoreExpiration':_0x1abd18['EXPIRIN_IN']===0x0});if(_0x3d3833[_0x2f25c7(0x492)]!==_0x26ebed[_0x2f25c7(0x492)]||Xe!==_0x26ebed[_0x2f25c7(0x36f)])throw new ne();return _0x36b7ee();}catch(_0x518d3a){throw ni[_0x2f25c7(0x258)](_0x518d3a),new ne();}}async function li(_0x423fb1,_0x3de374,_0x18d2e7){const _0x5176fc=a0_0x27119e;let _0x1dd857=y['get'](_0x5176fc(0x69c))[_0x5176fc(0x69a)],_0x282a8b=_0x423fb1[_0x5176fc(0x201)](_0x5176fc(0x25f));if(_0x1dd857[_0x5176fc(0x1d6)]===_0x282a8b)return _0x18d2e7();if(_0x423fb1['originalUrl'][_0x5176fc(0x6ad)](_0x5176fc(0x101))){let _0x53e5f9=y['get'](_0x5176fc(0x20c)),_0x5aac6a=_0x423fb1[_0x5176fc(0x4ea)][_0x5176fc(0x492)];if(_0x53e5f9&&_0x5aac6a[_0x5176fc(0x62c)]()[_0x5176fc(0x439)](_0x53e5f9[_0x5176fc(0x62c)]()))return _0x18d2e7();if(!_0x282a8b)throw new re(_0x5176fc(0x536),_0x5176fc(0x477));}if(_0x423fb1[_0x5176fc(0x3ac)][_0x5176fc(0x6ad)](_0x5176fc(0x6d1))&&!_0x282a8b)throw new re(_0x5176fc(0x536),'The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x423fb1['originalUrl']['includes']('/exit')&&!_0x282a8b)throw new re(_0x5176fc(0x536),_0x5176fc(0x477));try{let _0x28c980=_0x423fb1[_0x5176fc(0x642)];if((await de[_0x5176fc(0x655)][_0x5176fc(0x36e)](_0x28c980['instanceName']))[_0x5176fc(0x25f)]===_0x282a8b)return _0x18d2e7();}catch{}throw new ne();}var ga={'jwt':ci,'apikey':li},Ka=require(a0_0x27119e(0x14e)),E=require(a0_0x27119e(0x401)),S=(..._0x24b96a)=>{const _0x3feabd=a0_0x27119e;let _0x43019e={};return _0x24b96a[_0x3feabd(0xfc)](_0x353065=>_0x43019e[_0x353065]={'minLength':0x1,'description':_0x3feabd(0x168)+_0x353065+_0x3feabd(0x189)}),{'if':{'propertyNames':{'enum':[..._0x24b96a]}},'then':{'properties':_0x43019e}};},v={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'instanceName':{'type':'string'}},...S(a0_0x27119e(0x492))},ma={'$id':(0x0,E['v4'])(),'type':'object','properties':{'oldToken':{'type':a0_0x27119e(0x2af)}},'required':['oldToken'],...S(a0_0x27119e(0x133))},wn={'properties':{'key':{'type':a0_0x27119e(0x5f1),'properties':{'id':{'type':a0_0x27119e(0x2af)},'remoteJid':{'type':a0_0x27119e(0x2af)},'fromMe':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]}},'required':['id',a0_0x27119e(0x3f7),a0_0x27119e(0x170)],...S('id','remoteJid')},'message':{'type':a0_0x27119e(0x5f1)}}},X={'properties':{'delay':{'type':a0_0x27119e(0x58a),'description':a0_0x27119e(0x1a5)},'presence':{'type':'string','enum':['unavailable',a0_0x27119e(0x34d),a0_0x27119e(0x3ff),a0_0x27119e(0x4e9),a0_0x27119e(0x5d0)]}}},Z={'type':a0_0x27119e(0x2af),'pattern':'^\x5cd+[\x5c.@\x5cw-]+','description':a0_0x27119e(0x1bd)},ha={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'number':{...Z},'options':{...X},'textMessage':{'type':a0_0x27119e(0x5f1),'properties':{'text':{'type':a0_0x27119e(0x2af)}},'required':[a0_0x27119e(0x51e)],...S(a0_0x27119e(0x51e))}},'required':[a0_0x27119e(0x453),a0_0x27119e(0x341)]},fa={'type':a0_0x27119e(0x2af),'pattern':a0_0x27119e(0xfd),'description':a0_0x27119e(0x1bd)},yn={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...fa},'options':{...X},'textMessage':{'type':a0_0x27119e(0x5f1),'properties':{'text':{'type':'string'}},'required':[a0_0x27119e(0x51e)],...S(a0_0x27119e(0x51e))}},'required':[a0_0x27119e(0x453),a0_0x27119e(0x341)]},bn={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'number':{...fa},'options':{...X},'mediaMessage':{'type':a0_0x27119e(0x5f1),'properties':{'mediatype':{'type':a0_0x27119e(0x2af),'enum':[a0_0x27119e(0x53e),a0_0x27119e(0x3ce),a0_0x27119e(0x349),a0_0x27119e(0x4ef)]},'media':{'type':a0_0x27119e(0x2af)},'fileName':{'type':a0_0x27119e(0x2af)},'caption':{'type':'string'}},'required':[a0_0x27119e(0x4e8),a0_0x27119e(0x4f7)],...S(a0_0x27119e(0x2eb),a0_0x27119e(0x178),'media')}},'required':[a0_0x27119e(0x42e),a0_0x27119e(0x341)]},wa={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'number':{...Z},'options':{...X},'stickerMessage':{'type':a0_0x27119e(0x5f1),'properties':{'image':{'type':'string'}},'required':[a0_0x27119e(0x53e)],...S('image')}},'required':['stickerMessage',a0_0x27119e(0x341)]},ya={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'statusMessage':{'type':a0_0x27119e(0x5f1),'properties':{'type':{'type':a0_0x27119e(0x2af),'enum':[a0_0x27119e(0x51e),'image',a0_0x27119e(0x4ef),a0_0x27119e(0x349)]},'content':{'type':'string'},'caption':{'type':a0_0x27119e(0x2af)},'backgroundColor':{'type':a0_0x27119e(0x2af)},'font':{'type':'integer','minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x27119e(0x540),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x27119e(0x2af),'pattern':a0_0x27119e(0x473),'description':a0_0x27119e(0x3d3)}},'allContacts':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]}},'required':[a0_0x27119e(0x10c),a0_0x27119e(0x468)],...S(a0_0x27119e(0x10c),a0_0x27119e(0x468))}},'required':[a0_0x27119e(0x697)]},ba={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...X},'mediaMessage':{'type':a0_0x27119e(0x5f1),'properties':{'mediatype':{'type':a0_0x27119e(0x2af),'enum':[a0_0x27119e(0x53e),a0_0x27119e(0x3ce),a0_0x27119e(0x349),a0_0x27119e(0x4ef)]},'media':{'type':a0_0x27119e(0x2af)},'fileName':{'type':'string'},'caption':{'type':a0_0x27119e(0x2af)}},'required':[a0_0x27119e(0x4e8),a0_0x27119e(0x4f7)],...S(a0_0x27119e(0x2eb),'caption','media')}},'required':[a0_0x27119e(0x42e),a0_0x27119e(0x341)]},Sa={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'number':{...Z},'options':{...X},'audioMessage':{'type':a0_0x27119e(0x5f1),'properties':{'audio':{'type':a0_0x27119e(0x2af)}},'required':['audio'],...S(a0_0x27119e(0x4ef))}},'required':[a0_0x27119e(0x5e0),a0_0x27119e(0x341)]},Ea={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'number':{...Z},'pollMessage':{'type':a0_0x27119e(0x5f1),'properties':{'name':{'type':'string'},'selectableCount':{'type':a0_0x27119e(0x341)},'values':{'type':'array','minItems':0x2,'uniqueItems':!0x0}},'required':['name',a0_0x27119e(0x1fe),a0_0x27119e(0x594)],...S(a0_0x27119e(0x3c5),a0_0x27119e(0x1fe),'values')}},'required':[a0_0x27119e(0x341),a0_0x27119e(0x306)]},va={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'number':{...Z},'options':{...X},'buttonMessage':{'type':a0_0x27119e(0x5f1),'properties':{'title':{'type':'string'},'description':{'type':a0_0x27119e(0x2af)},'footerText':{'type':'string'},'buttons':{'type':a0_0x27119e(0x540),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x27119e(0x5f1),'properties':{'buttonText':{'type':'string'},'buttonId':{'type':a0_0x27119e(0x2af)}},'required':['buttonText',a0_0x27119e(0x31a)],...S('buttonText',a0_0x27119e(0x31a))}},'mediaMessage':{'type':a0_0x27119e(0x5f1),'properties':{'media':{'type':a0_0x27119e(0x2af)},'fileName':{'type':'string'},'mediatype':{'type':a0_0x27119e(0x2af),'enum':[a0_0x27119e(0x53e),a0_0x27119e(0x3ce),a0_0x27119e(0x349)]}},'required':['media',a0_0x27119e(0x4e8)],...S('media','fileName')}},'required':[a0_0x27119e(0x448),a0_0x27119e(0x4ed)],...S(a0_0x27119e(0x448),a0_0x27119e(0x157))}},'required':[a0_0x27119e(0x341),a0_0x27119e(0x462)]},Na={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...X},'locationMessage':{'type':a0_0x27119e(0x5f1),'properties':{'latitude':{'type':a0_0x27119e(0x341)},'longitude':{'type':a0_0x27119e(0x341)},'name':{'type':'string'},'address':{'type':a0_0x27119e(0x2af)}},'required':[a0_0x27119e(0x65e),a0_0x27119e(0x628)],...S(a0_0x27119e(0x3c5),'addresss')}},'required':['number','locationMessage']},Ca={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'number':{...Z},'options':{...X},'listMessage':{'type':a0_0x27119e(0x5f1),'properties':{'title':{'type':a0_0x27119e(0x2af)},'description':{'type':a0_0x27119e(0x2af)},'footerText':{'type':'string'},'buttonText':{'type':a0_0x27119e(0x2af)},'sections':{'type':a0_0x27119e(0x540),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x27119e(0x5f1),'properties':{'title':{'type':a0_0x27119e(0x2af)},'rows':{'type':a0_0x27119e(0x540),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x27119e(0x5f1),'properties':{'title':{'type':'string'},'description':{'type':a0_0x27119e(0x2af)},'rowId':{'type':a0_0x27119e(0x2af)}},'required':[a0_0x27119e(0x448),'description',a0_0x27119e(0x68c)],...S(a0_0x27119e(0x448),'description',a0_0x27119e(0x68c))}}},'required':[a0_0x27119e(0x448),a0_0x27119e(0x1c7)],...S(a0_0x27119e(0x448))}}},'required':[a0_0x27119e(0x448),a0_0x27119e(0x157),'buttonText',a0_0x27119e(0x57a)],...S(a0_0x27119e(0x448),'description',a0_0x27119e(0x595),'footerText')}},'required':[a0_0x27119e(0x341),a0_0x27119e(0x53c)]},Ta={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...X},'contactMessage':{'type':a0_0x27119e(0x540),'items':{'type':a0_0x27119e(0x5f1),'properties':{'fullName':{'type':'string'},'phoneNumber':{'type':a0_0x27119e(0x2af),'minLength':0xa}},'required':['fullName',a0_0x27119e(0x4da)],...S(a0_0x27119e(0x3cc))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x27119e(0x341),a0_0x27119e(0x24b)]},Ma={'$id':(0x0,E['v4'])(),'type':'object','properties':{'reactionMessage':{'type':a0_0x27119e(0x5f1),'properties':{'key':{'type':a0_0x27119e(0x5f1),'properties':{'id':{'type':a0_0x27119e(0x2af)},'remoteJid':{'type':a0_0x27119e(0x2af)},'fromMe':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]}},'required':['id','remoteJid','fromMe'],...S('id',a0_0x27119e(0x3f7))},'reaction':{'type':'string'}},'required':[a0_0x27119e(0x4dc),a0_0x27119e(0x3cf)],...S(a0_0x27119e(0x3cf))}},'required':[a0_0x27119e(0x650)]},Ra={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'numbers':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x27119e(0x2af),'pattern':'^\x5cd+','description':a0_0x27119e(0x662)}}}},Aa={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'readMessages':{'type':a0_0x27119e(0x540),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x27119e(0x2af)},'fromMe':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x27119e(0x2af)}},'required':['id','fromMe',a0_0x27119e(0x3f7)],...S('id',a0_0x27119e(0x3f7))}}},'required':[a0_0x27119e(0x1ce)]},Ia={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'privacySettings':{'type':a0_0x27119e(0x5f1),'properties':{'readreceipts':{'type':a0_0x27119e(0x2af),'enum':[a0_0x27119e(0x149),a0_0x27119e(0x550)]},'profile':{'type':a0_0x27119e(0x2af),'enum':['all','contacts',a0_0x27119e(0x200),a0_0x27119e(0x550)]},'status':{'type':'string','enum':['all','contacts','contact_blacklist',a0_0x27119e(0x550)]},'online':{'type':'string','enum':['all',a0_0x27119e(0x60b)]},'last':{'type':a0_0x27119e(0x2af),'enum':[a0_0x27119e(0x149),a0_0x27119e(0x114),a0_0x27119e(0x200),a0_0x27119e(0x550)]},'groupadd':{'type':a0_0x27119e(0x2af),'enum':['all','contacts',a0_0x27119e(0x200),a0_0x27119e(0x550)]}},'required':['readreceipts',a0_0x27119e(0x4ec),'status','online','last','groupadd'],...S(a0_0x27119e(0x68b),a0_0x27119e(0x4ec),a0_0x27119e(0x49d),a0_0x27119e(0x43a),'last',a0_0x27119e(0x578))}},'required':['privacySettings']},Da={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'lastMessage':{'type':a0_0x27119e(0x5f1),'properties':{'key':{'type':'object','properties':{'id':{'type':'string'},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]}},'required':['id',a0_0x27119e(0x170),a0_0x27119e(0x3f7)],...S('id',a0_0x27119e(0x3f7))},'messageTimestamp':{'type':'integer','minLength':0x1}},'required':[a0_0x27119e(0x4dc)],...S('messageTimestamp')},'archive':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]}},'required':[a0_0x27119e(0x6ba),'archive']},Pa={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'id':{'type':'string'},'fromMe':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'remoteJid':{'type':'string'},'participant':{'type':a0_0x27119e(0x2af)}},'required':['id','fromMe','remoteJid'],...S('id',a0_0x27119e(0x3f7),a0_0x27119e(0x1ae))},Oa={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x27119e(0x2af),'minLength':0x1},'pushName':{'type':'string','minLength':0x1},'id':{'type':a0_0x27119e(0x2af),'minLength':0x1}},...S(a0_0x27119e(0x303),'id',a0_0x27119e(0x571))}}},_a={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'name':{'type':a0_0x27119e(0x2af)}},...S(a0_0x27119e(0x3c5))},xa={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'status':{'type':a0_0x27119e(0x2af)}},...S(a0_0x27119e(0x49d))},Te={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'number':{'type':'string'},'picture':{'type':a0_0x27119e(0x2af)}}},$a={'type':a0_0x27119e(0x5f1),'properties':{'wuid':{'type':a0_0x27119e(0x2af)},'name':{'type':a0_0x27119e(0x2af)},'picture':{'type':a0_0x27119e(0x2af)},'status':{'type':a0_0x27119e(0x2af)},'isBusiness':{'type':a0_0x27119e(0x227)}}},ka={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'where':{'type':a0_0x27119e(0x5f1),'properties':{'_id':{'type':'string','minLength':0x1},'key':{'type':a0_0x27119e(0x5f1),'if':{'propertyNames':{'enum':[a0_0x27119e(0x170),a0_0x27119e(0x3f7),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x27119e(0x2af),'minLength':0x1,'description':a0_0x27119e(0x211)},'id':{'type':a0_0x27119e(0x2af),'minLength':0x1,'description':a0_0x27119e(0x211)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x27119e(0x5f1)}},...S('_id')},'limit':{'type':'integer'}}},La={'$id':(0x0,E['v4'])(),'type':'object','properties':{'where':{'type':a0_0x27119e(0x5f1),'properties':{'_id':{'type':a0_0x27119e(0x2af)},'remoteJid':{'type':a0_0x27119e(0x2af)},'id':{'type':'string'},'fromMe':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x27119e(0x2af)},'status':{'type':a0_0x27119e(0x2af),'enum':[a0_0x27119e(0x386),'PENDING',a0_0x27119e(0x14f),a0_0x27119e(0x515),a0_0x27119e(0x42a),a0_0x27119e(0x55b)]}},...S('_id','remoteJid','id',a0_0x27119e(0x49d))},'limit':{'type':a0_0x27119e(0x58a)}}},Ua={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'number':{...Z},'presence':{'type':a0_0x27119e(0x2af),'enum':['unavailable',a0_0x27119e(0x34d),a0_0x27119e(0x3ff),a0_0x27119e(0x4e9),a0_0x27119e(0x5d0)]}},'required':[a0_0x27119e(0x359),a0_0x27119e(0x341)]},Va={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'subject':{'type':a0_0x27119e(0x2af)},'description':{'type':a0_0x27119e(0x2af)},'profilePicture':{'type':a0_0x27119e(0x2af)},'participants':{'type':a0_0x27119e(0x540),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x27119e(0x2af),'minLength':0xa,'pattern':'\x5cd+','description':a0_0x27119e(0x388)}}},'required':['subject',a0_0x27119e(0x54a)],...S(a0_0x27119e(0x5d7),a0_0x27119e(0x157),a0_0x27119e(0x160))},Me={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'groupJid':{'type':a0_0x27119e(0x2af),'pattern':'^\x5cd+([-]\x5cd+)*@g.us$'}},'required':['groupJid'],...S(a0_0x27119e(0x5cf))},ja={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'groupJid':{'type':a0_0x27119e(0x2af)},'action':{'type':a0_0x27119e(0x2af),'enum':[a0_0x27119e(0x443),a0_0x27119e(0x3c7),a0_0x27119e(0x5cc),'demote']},'participants':{'type':a0_0x27119e(0x540),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x27119e(0x2af),'minLength':0xa,'pattern':a0_0x27119e(0x4fc),'description':a0_0x27119e(0x388)}}},'required':[a0_0x27119e(0x5cf),a0_0x27119e(0x681),a0_0x27119e(0x54a)],...S(a0_0x27119e(0x5cf),a0_0x27119e(0x681))},Ba={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'groupJid':{'type':'string'},'expiration':{'type':'number','enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x27119e(0x5cf),a0_0x27119e(0x50e)],...S('groupJid',a0_0x27119e(0x50e))},Fa={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'groupJid':{'type':a0_0x27119e(0x2af)},'image':{'type':a0_0x27119e(0x2af)}},'required':[a0_0x27119e(0x5cf),a0_0x27119e(0x53e)],...S('groupJid',a0_0x27119e(0x53e))},Ja={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'groupJid':{'type':a0_0x27119e(0x2af)},'description':{'type':a0_0x27119e(0x2af)}},'required':[a0_0x27119e(0x5cf),a0_0x27119e(0x157)],...S(a0_0x27119e(0x5cf),a0_0x27119e(0x157))},Ga={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'groupJid':{'type':'string'},'name':{'type':a0_0x27119e(0x2af)}},'required':[a0_0x27119e(0x5cf),'name'],...S(a0_0x27119e(0x5cf),a0_0x27119e(0x3c5))},qa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'setting':{'type':'string','enum':['announcement',a0_0x27119e(0x519),'unlocked',a0_0x27119e(0x528)]}},'required':[a0_0x27119e(0x5cf),a0_0x27119e(0xff)],...S(a0_0x27119e(0x5cf),a0_0x27119e(0xff))},Wa={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'inviteCode':{'type':a0_0x27119e(0x2af)}},'required':['inviteCode'],...S(a0_0x27119e(0x620))},Ha={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'url':{'type':a0_0x27119e(0x2af)},'enabled':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]}},'required':[a0_0x27119e(0x29a),a0_0x27119e(0x3b1)]},Sn={'$id':(0x0,E['v4'])(),'type':a0_0x27119e(0x5f1),'properties':{'local_map':{'type':'boolean','enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':'boolean','enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x27119e(0x227),'enum':[!0x0,!0x1]}},'required':['local_map',a0_0x27119e(0x2ed),a0_0x27119e(0x422),a0_0x27119e(0x484),'MESSAGES_UPDATE',a0_0x27119e(0x146),a0_0x27119e(0x646),a0_0x27119e(0x36a),'CONTACTS_UPSERT',a0_0x27119e(0x428),a0_0x27119e(0x497),'CHATS_SET',a0_0x27119e(0x118),'CHATS_UPDATE',a0_0x27119e(0x5b4),a0_0x27119e(0x228),a0_0x27119e(0x53f),a0_0x27119e(0x30f),a0_0x27119e(0x499)],...S(a0_0x27119e(0x6c3),a0_0x27119e(0x2ed),'QRCODE_UPDATED',a0_0x27119e(0x484),a0_0x27119e(0x4c4),a0_0x27119e(0x146),'SEND_MESSAGE',a0_0x27119e(0x36a),'CONTACTS_UPSERT','CONTACTS_UPDATE',a0_0x27119e(0x497),a0_0x27119e(0x510),'CHATS_UPSERT',a0_0x27119e(0x5d9),'CHATS_DELETE',a0_0x27119e(0x228),'GROUPS_UPSERT',a0_0x27119e(0x30f),'GROUP_PARTICIPANTS_UPDATE')},Ae=require('fs'),Re=require('path'),Ze=class{},et=class extends B{constructor(_0x569ff4,_0x5f4131){const _0x3bc231=a0_0x27119e;super(_0x5f4131),this[_0x3bc231(0x19a)]=_0x569ff4,this[_0x3bc231(0x593)]=_0x5f4131;}async['insert'](_0xf526c7,_0x17eb84=!0x1){const _0x3b0177=a0_0x27119e;if(_0xf526c7['length']!==0x0)try{return this[_0x3b0177(0x19b)][_0x3b0177(0x371)]&&_0x17eb84?{'insertCount':(await this[_0x3b0177(0x19a)][_0x3b0177(0x5bf)]([..._0xf526c7]))[_0x3b0177(0x57f)]}:(_0xf526c7['forEach'](_0x1c882e=>{const _0x4f7931=_0x3b0177;this[_0x4f7931(0x41d)]({'path':(0x0,Re[_0x4f7931(0x3eb)])(this[_0x4f7931(0x47c)],_0x4f7931(0x114),_0x1c882e[_0x4f7931(0x1a7)]),'fileName':_0x1c882e['id'],'data':_0x1c882e});}),{'insertCount':_0xf526c7[_0x3b0177(0x57f)]});}catch(_0x3b5f22){return _0x3b5f22;}finally{_0xf526c7=void 0x0;}}async[a0_0x27119e(0x2d3)](_0x3ef17f){const _0x23d7f2=a0_0x27119e;try{return this[_0x23d7f2(0x19b)][_0x23d7f2(0x371)]?await this[_0x23d7f2(0x19a)][_0x23d7f2(0x6c5)]({..._0x3ef17f[_0x23d7f2(0x52d)]}):{'deleted':{'contact':_0x3ef17f[_0x23d7f2(0x52d)]['id']}};}catch(_0x51eb4d){return{'error':_0x51eb4d?.[_0x23d7f2(0x3cb)]()};}}async[a0_0x27119e(0x46a)](_0x4c060e,_0x1c33e3=!0x1){const _0x407913=a0_0x27119e;try{if(_0x4c060e[_0x407913(0x57f)]===0x0)return;if(this[_0x407913(0x19b)]['ENABLED']&&_0x1c33e3){let _0x54cddb=_0x4c060e[_0x407913(0x2c7)](_0x2c8c2b=>({'updateOne':{'filter':{'id':_0x2c8c2b['id']},'update':{..._0x2c8c2b},'upsert':!0x0}})),{nModified:_0x4d1f63}=await this[_0x407913(0x19a)][_0x407913(0x3e4)](_0x54cddb);return{'insertCount':_0x4d1f63};}}catch{return;}}async[a0_0x27119e(0x36e)](_0x13fe40){const _0x54a139=a0_0x27119e;try{if(this['dbSettings'][_0x54a139(0x371)])return await this[_0x54a139(0x19a)][_0x54a139(0x36e)]({..._0x13fe40[_0x54a139(0x52d)]});let _0x305bd8=[];if(_0x13fe40?.[_0x54a139(0x52d)]?.['id'])_0x305bd8[_0x54a139(0x461)](JSON[_0x54a139(0x279)]((0x0,Ae[_0x54a139(0x48e)])((0x0,Re[_0x54a139(0x3eb)])(this[_0x54a139(0x47c)],_0x54a139(0x114),_0x13fe40[_0x54a139(0x52d)][_0x54a139(0x1a7)],_0x13fe40[_0x54a139(0x52d)]['id']+'.json'),{'encoding':_0x54a139(0x14b)})));else{let _0x18f9bf=(0x0,Ae['opendirSync'])((0x0,Re[_0x54a139(0x3eb)])(this[_0x54a139(0x47c)],_0x54a139(0x114),_0x13fe40['where'][_0x54a139(0x1a7)]),{'encoding':_0x54a139(0x14b)});for await(let _0x2dae2e of _0x18f9bf)_0x2dae2e[_0x54a139(0x50d)]()&&_0x305bd8[_0x54a139(0x461)](JSON[_0x54a139(0x279)]((0x0,Ae[_0x54a139(0x48e)])((0x0,Re[_0x54a139(0x3eb)])(this[_0x54a139(0x47c)],_0x54a139(0x114),_0x13fe40['where'][_0x54a139(0x1a7)],_0x2dae2e[_0x54a139(0x3c5)]),{'encoding':_0x54a139(0x14b)})));}return _0x305bd8;}catch{return[];}}},tt=require('jsonschema'),Mn=require(a0_0x27119e(0x56c)),ws=new C(a0_0x27119e(0x66e)),L=class{constructor(){}[a0_0x27119e(0x15c)](_0x238f6c,_0x5cfb8a=!0x0){const _0x52a6e4=a0_0x27119e;let _0x47e646='/'+_0x238f6c;return _0x5cfb8a&&(_0x47e646+=_0x52a6e4(0x573)),_0x47e646;}async[a0_0x27119e(0x4f1)](_0x21b373){const _0x53c950=a0_0x27119e;let {request:_0x4cd09e,schema:_0x28c96f,ClassRef:_0x547d08,execute:_0x2cb3a2}=_0x21b373,_0x1185e7=new _0x547d08(),_0x163c44=_0x4cd09e[_0x53c950(0x4ea)],_0x1ff468=_0x4cd09e['params'];_0x4cd09e?.[_0x53c950(0x139)]&&Object[_0x53c950(0x410)](_0x4cd09e['query'])[_0x53c950(0x57f)]>0x0&&Object[_0x53c950(0x2e8)](_0x1ff468,_0x4cd09e['query']),_0x4cd09e['originalUrl'][_0x53c950(0x6ad)]('/instance/create')&&Object[_0x53c950(0x2e8)](_0x1ff468,_0x163c44),Object[_0x53c950(0x2e8)](_0x1185e7,_0x163c44);let _0x7ab66=_0x28c96f?(0x0,tt[_0x53c950(0x100)])(_0x1185e7,_0x28c96f):{'valid':!0x0,'errors':[]};if(!_0x7ab66[_0x53c950(0x5bb)]){let _0x13503e=_0x7ab66[_0x53c950(0x420)]['map'](({property:_0x3331cd,stack:_0xe3616c,schema:_0x36f3d9})=>{const _0xbc8b50=_0x53c950;let _0x4b3176;return _0x36f3d9[_0xbc8b50(0x157)]?_0x4b3176=_0x36f3d9[_0xbc8b50(0x157)]:_0x4b3176=_0xe3616c[_0xbc8b50(0x363)](_0xbc8b50(0x2b8),''),{'property':_0x3331cd['replace']('instance.',''),'message':_0x4b3176};});throw ws[_0x53c950(0x258)]([..._0x13503e]),new g(..._0x13503e);}return await _0x2cb3a2(_0x1ff468,_0x1185e7);}async['groupValidate'](_0x446578){const _0x4c5239=a0_0x27119e;let {request:_0x5ba8aa,ClassRef:_0xa44de,schema:_0x11cc8b,execute:_0x297be0}=_0x446578,_0x42fa85=_0x5ba8aa['query'];if(!_0x42fa85?.[_0x4c5239(0x5cf)])throw new g(_0x4c5239(0x150),_0x4c5239(0x6d3));let _0x267140=_0x5ba8aa[_0x4c5239(0x642)],_0x105074=_0x5ba8aa['body'],_0x16b34d=new _0xa44de();Object[_0x4c5239(0x2e8)](_0x105074,_0x42fa85),Object['assign'](_0x16b34d,_0x105074);let _0x148394=(0x0,tt[_0x4c5239(0x100)])(_0x16b34d,_0x11cc8b);if(!_0x148394[_0x4c5239(0x5bb)]){let _0x424300=_0x148394['errors'][_0x4c5239(0x2c7)](({property:_0x3431ca,stack:_0x2f6197,schema:_0x37bfa0})=>{const _0x124018=_0x4c5239;let _0x377ad9;return _0x37bfa0[_0x124018(0x157)]?_0x377ad9=_0x37bfa0[_0x124018(0x157)]:_0x377ad9=_0x2f6197[_0x124018(0x363)]('instance.',''),{'property':_0x3431ca[_0x124018(0x363)](_0x124018(0x2b8),''),'message':_0x377ad9};});throw ws[_0x4c5239(0x258)]([..._0x424300]),new g(..._0x424300);}return await _0x297be0(_0x267140,_0x16b34d);}async[a0_0x27119e(0x2d6)](_0x45c8aa){const _0x5d0cfa=a0_0x27119e;let {request:_0x571bc0,ClassRef:_0x54f541,schema:_0x15663e,execute:_0x257234}=_0x45c8aa,_0x164c05=_0x571bc0[_0x5d0cfa(0x4ea)];if(!_0x164c05?.[_0x5d0cfa(0x620)])throw new g(_0x5d0cfa(0x397),_0x5d0cfa(0x65c));let _0x3b385b=_0x571bc0[_0x5d0cfa(0x642)],_0x539fae=_0x571bc0['body'],_0x40a615=new _0x54f541();Object[_0x5d0cfa(0x2e8)](_0x539fae,_0x164c05),Object[_0x5d0cfa(0x2e8)](_0x40a615,_0x539fae);let _0x779906=(0x0,tt[_0x5d0cfa(0x100)])(_0x40a615,_0x15663e);if(!_0x779906[_0x5d0cfa(0x5bb)]){let _0x51f03b=_0x779906[_0x5d0cfa(0x420)][_0x5d0cfa(0x2c7)](({property:_0x4d4744,stack:_0x195d77,schema:_0x226c6b})=>{const _0x35b8c9=_0x5d0cfa;let _0x10376c;return _0x226c6b[_0x35b8c9(0x157)]?_0x10376c=_0x226c6b[_0x35b8c9(0x157)]:_0x10376c=_0x195d77[_0x35b8c9(0x363)]('instance.',''),{'property':_0x4d4744[_0x35b8c9(0x363)]('instance.',''),'message':_0x10376c};});throw ws[_0x5d0cfa(0x258)]([..._0x51f03b]),new g(..._0x51f03b);}return await _0x257234(_0x3b385b,_0x40a615);}},Ie=require(a0_0x27119e(0x342)),De=require('fs'),st=class{},at=class extends B{constructor(_0x166bf9,_0x586eb1){const _0x5a8c36=a0_0x27119e;super(_0x586eb1),this['messageUpModel']=_0x166bf9,this[_0x5a8c36(0x593)]=_0x586eb1;}async['insert'](_0x30cc3d,_0x20f7b8){const _0x175b21=a0_0x27119e;if(_0x30cc3d[_0x175b21(0x57f)]!==0x0)try{if(this['dbSettings']['ENABLED']&&_0x20f7b8)return{'insertCount':(await this[_0x175b21(0x4ce)][_0x175b21(0x5bf)]([..._0x30cc3d]))['length']};_0x30cc3d[_0x175b21(0xfc)](_0x238a25=>{const _0x460f8f=_0x175b21;this['writeStore']({'path':(0x0,Ie[_0x460f8f(0x3eb)])(this['storePath'],'message-up',_0x238a25[_0x460f8f(0x1a7)]),'fileName':_0x238a25['id'],'data':_0x238a25});});}catch(_0x186656){return _0x186656;}}async['find'](_0x373bf2){const _0x41f5d8=a0_0x27119e;try{if(this['dbSettings']['ENABLED'])return await this[_0x41f5d8(0x4ce)]['find']({..._0x373bf2[_0x41f5d8(0x52d)]})[_0x41f5d8(0x3e3)]({'datetime':-0x1})[_0x41f5d8(0x66c)](_0x373bf2?.[_0x41f5d8(0x66c)]??0x0);let _0x152526=[];if(_0x373bf2?.[_0x41f5d8(0x52d)]?.['id'])_0x152526[_0x41f5d8(0x461)](JSON[_0x41f5d8(0x279)]((0x0,De[_0x41f5d8(0x48e)])((0x0,Ie[_0x41f5d8(0x3eb)])(this[_0x41f5d8(0x47c)],_0x41f5d8(0x609),_0x373bf2[_0x41f5d8(0x52d)][_0x41f5d8(0x1a7)],_0x373bf2[_0x41f5d8(0x52d)]['id']+'.json'),{'encoding':_0x41f5d8(0x14b)})));else{let _0x55ad2e=(0x0,De[_0x41f5d8(0x63d)])((0x0,Ie['join'])(this[_0x41f5d8(0x47c)],'message-up',_0x373bf2[_0x41f5d8(0x52d)][_0x41f5d8(0x1a7)]),{'encoding':'utf-8'});for await(let _0x20c3c8 of _0x55ad2e)_0x20c3c8[_0x41f5d8(0x50d)]()&&_0x152526['push'](JSON['parse']((0x0,De[_0x41f5d8(0x48e)])((0x0,Ie[_0x41f5d8(0x3eb)])(this[_0x41f5d8(0x47c)],_0x41f5d8(0x609),_0x373bf2[_0x41f5d8(0x52d)][_0x41f5d8(0x1a7)],_0x20c3c8[_0x41f5d8(0x3c5)]),{'encoding':_0x41f5d8(0x14b)})));}return _0x152526['sort']((_0x54185b,_0x56dfbd)=>_0x56dfbd[_0x41f5d8(0x2ae)]-_0x54185b['datetime'])['splice'](0x0,_0x373bf2?.[_0x41f5d8(0x66c)]??_0x152526[_0x41f5d8(0x57f)]);}catch{return[];}}async[a0_0x27119e(0x2d3)](_0x9b49c9){const _0x39f9e8=a0_0x27119e;try{if(this[_0x39f9e8(0x19b)]['ENABLED'])return await this[_0x39f9e8(0x4ce)][_0x39f9e8(0x6c5)]({..._0x9b49c9[_0x39f9e8(0x52d)]});}catch(_0x36ff06){return console[_0x39f9e8(0x258)](_0x39f9e8(0x3d9),_0x36ff06),_0x36ff06;}}},b=class{},ot=class extends L{constructor(..._0x4d5547){const _0x2cc03f=a0_0x27119e;super(),this['router']=(0x0,Ka['Router'])(),this[_0x2cc03f(0x2ee)]['post'](this[_0x2cc03f(0x15c)](_0x2cc03f(0x1b4)),..._0x4d5547,async(_0x6989bd,_0x378ec2)=>{const _0x33f5ce=_0x2cc03f;let _0x245b51=await this[_0x33f5ce(0x4f1)]({'request':_0x6989bd,'schema':Ua,'ClassRef':Je,'execute':(_0x5ba170,_0x2282f9)=>P[_0x33f5ce(0x1b4)](_0x5ba170,_0x2282f9)});return _0x378ec2[_0x33f5ce(0x49d)](0xc9)['json'](_0x245b51);})[_0x2cc03f(0x556)](this[_0x2cc03f(0x15c)](_0x2cc03f(0x3c0)),..._0x4d5547,async(_0x3abb9e,_0x4dc63c)=>{const _0x479dba=_0x2cc03f;let _0x2b89f6=await this[_0x479dba(0x4f1)]({'request':_0x3abb9e,'schema':Ra,'ClassRef':Ge,'execute':(_0x53a10c,_0x1bab79)=>P['whatsappNumber'](_0x53a10c,_0x1bab79)});return _0x4dc63c[_0x479dba(0x49d)](0xc9)[_0x479dba(0x141)](_0x2b89f6);})[_0x2cc03f(0x556)](this['routerPath'](_0x2cc03f(0x544)),..._0x4d5547,async(_0x3378b2,_0x39bd4f)=>{const _0x5e2255=_0x2cc03f;let _0x47f257=await this['dataValidate']({'request':_0x3378b2,'schema':v,'ClassRef':b,'execute':(_0x366d0e,_0x29ab1f)=>P[_0x5e2255(0x544)](_0x366d0e,_0x29ab1f)});return _0x39bd4f[_0x5e2255(0x49d)](0xc9)['json'](_0x47f257);})['put'](this['routerPath'](_0x2cc03f(0x19e)),..._0x4d5547,async(_0x49ad31,_0x27b2ec)=>{const _0xfcdbc0=_0x2cc03f;let _0xf868ed=await this[_0xfcdbc0(0x4f1)]({'request':_0x49ad31,'schema':Aa,'ClassRef':He,'execute':(_0x1dad8d,_0x31ac81)=>P['readMessage'](_0x1dad8d,_0x31ac81)});return _0x27b2ec[_0xfcdbc0(0x49d)](0xc9)[_0xfcdbc0(0x141)](_0xf868ed);})[_0x2cc03f(0x318)](this[_0x2cc03f(0x15c)](_0x2cc03f(0x242)),..._0x4d5547,async(_0x8ccfe1,_0x41a5e9)=>{const _0x1f63fc=_0x2cc03f;let _0x2ef95e=await this['dataValidate']({'request':_0x8ccfe1,'schema':Da,'ClassRef':Ke,'execute':(_0x2fe52c,_0x1850c0)=>P[_0x1f63fc(0x242)](_0x2fe52c,_0x1850c0)});return _0x41a5e9[_0x1f63fc(0x49d)](0xc9)[_0x1f63fc(0x141)](_0x2ef95e);})[_0x2cc03f(0x2d3)](this[_0x2cc03f(0x15c)](_0x2cc03f(0x6c8)),..._0x4d5547,async(_0x3b6d09,_0x15f0b4)=>{const _0x277a0f=_0x2cc03f;let _0x5edd25=await this['dataValidate']({'request':_0x3b6d09,'schema':Pa,'ClassRef':Qe,'execute':(_0x472eb5,_0x5718db)=>P['deleteMessage'](_0x472eb5,_0x5718db)});return _0x15f0b4[_0x277a0f(0x49d)](0xc9)['json'](_0x5edd25);})[_0x2cc03f(0x556)](this['routerPath'](_0x2cc03f(0x58f)),..._0x4d5547,async(_0x1523e1,_0x422126)=>{const _0x2d349e=_0x2cc03f;let _0x106658=await this[_0x2d349e(0x4f1)]({'request':_0x1523e1,'schema':Te,'ClassRef':Ce,'execute':(_0xcd9260,_0x1382d8)=>P[_0x2d349e(0x695)](_0xcd9260,_0x1382d8)});return _0x422126[_0x2d349e(0x49d)](0xc8)[_0x2d349e(0x141)](_0x106658);})[_0x2cc03f(0x556)](this['routerPath']('fetchProfile'),..._0x4d5547,async(_0x591f58,_0x5e1913)=>{const _0x276730=_0x2cc03f;let _0x3bb4a8=await this['dataValidate']({'request':_0x591f58,'schema':$a,'ClassRef':Ce,'execute':(_0x4a2150,_0x357933)=>P[_0x276730(0x4b6)](_0x4a2150,_0x357933)});return _0x5e1913['status'](0xc8)[_0x276730(0x141)](_0x3bb4a8);})[_0x2cc03f(0x556)](this[_0x2cc03f(0x15c)](_0x2cc03f(0x599)),..._0x4d5547,async(_0x25f8bf,_0x5c938f)=>{const _0x59a256=_0x2cc03f;let _0x30144d=await this[_0x59a256(0x4f1)]({'request':_0x25f8bf,'schema':Oa,'ClassRef':Ze,'execute':(_0x449121,_0xa56d04)=>P[_0x59a256(0x278)](_0x449121,_0xa56d04)});return _0x5c938f[_0x59a256(0x49d)](0xc8)[_0x59a256(0x141)](_0x30144d);})[_0x2cc03f(0x556)](this['routerPath'](_0x2cc03f(0x40f)),..._0x4d5547,async(_0x450fac,_0x3e2e78)=>{const _0x405200=_0x2cc03f;let _0x15d972=await this[_0x405200(0x4f1)]({'request':_0x450fac,'schema':null,'ClassRef':Object,'execute':(_0x5b9441,_0x531165)=>P['getBase64FromMediaMessage'](_0x5b9441,_0x531165)});return _0x3e2e78[_0x405200(0x49d)](0xc9)[_0x405200(0x141)](_0x15d972);})[_0x2cc03f(0x556)](this[_0x2cc03f(0x15c)](_0x2cc03f(0x2e6)),..._0x4d5547,async(_0x3fe06b,_0x19dfdd)=>{const _0x39ed53=_0x2cc03f;let _0x35ae96=await this[_0x39ed53(0x4f1)]({'request':_0x3fe06b,'schema':ka,'ClassRef':Ve,'execute':(_0x5ae2af,_0x30c9e5)=>P[_0x39ed53(0x222)](_0x5ae2af,_0x30c9e5)});return _0x19dfdd[_0x39ed53(0x49d)](0xc8)[_0x39ed53(0x141)](_0x35ae96);})['post'](this[_0x2cc03f(0x15c)](_0x2cc03f(0x212)),..._0x4d5547,async(_0xa6e4f8,_0x2bc119)=>{const _0x515010=_0x2cc03f;let _0x1f5999=await this[_0x515010(0x4f1)]({'request':_0xa6e4f8,'schema':La,'ClassRef':st,'execute':(_0x271fe7,_0x581ee3)=>P['fetchStatusMessage'](_0x271fe7,_0x581ee3)});return _0x2bc119['status'](0xc8)[_0x515010(0x141)](_0x1f5999);})[_0x2cc03f(0x201)](this[_0x2cc03f(0x15c)](_0x2cc03f(0x692)),..._0x4d5547,async(_0x480e0a,_0x2be9ea)=>{const _0x50fc88=_0x2cc03f;let _0x4b6df4=await this[_0x50fc88(0x4f1)]({'request':_0x480e0a,'schema':null,'ClassRef':b,'execute':_0x4faa60=>P[_0x50fc88(0xfa)](_0x4faa60)});return _0x2be9ea['status'](0xc8)['json'](_0x4b6df4);})[_0x2cc03f(0x201)](this[_0x2cc03f(0x15c)](_0x2cc03f(0x104)),..._0x4d5547,async(_0x4a934d,_0x576ff7)=>{const _0xdf6819=_0x2cc03f;let _0x1742b4=await this['dataValidate']({'request':_0x4a934d,'schema':null,'ClassRef':b,'execute':_0x40b202=>P[_0xdf6819(0x104)](_0x40b202)});return _0x576ff7[_0xdf6819(0x49d)](0xc8)[_0xdf6819(0x141)](_0x1742b4);})[_0x2cc03f(0x318)](this[_0x2cc03f(0x15c)](_0x2cc03f(0x46d)),..._0x4d5547,async(_0x23b4c5,_0x2dd425)=>{const _0x1598b8=_0x2cc03f;let _0x28dd4d=await this[_0x1598b8(0x4f1)]({'request':_0x23b4c5,'schema':Ia,'ClassRef':ze,'execute':(_0x1178d0,_0x11974e)=>P[_0x1598b8(0x46d)](_0x1178d0,_0x11974e)});return _0x2dd425['status'](0xc9)[_0x1598b8(0x141)](_0x28dd4d);})[_0x2cc03f(0x556)](this['routerPath'](_0x2cc03f(0x311)),..._0x4d5547,async(_0x1db201,_0x3e84fe)=>{const _0x26ae87=_0x2cc03f;let _0x33f129=await this[_0x26ae87(0x4f1)]({'request':_0x1db201,'schema':Te,'ClassRef':we,'execute':(_0x39ac29,_0x24d114)=>P['fetchBusinessProfile'](_0x39ac29,_0x24d114)});return _0x3e84fe[_0x26ae87(0x49d)](0xc8)['json'](_0x33f129);})[_0x2cc03f(0x556)](this[_0x2cc03f(0x15c)](_0x2cc03f(0x49f)),..._0x4d5547,async(_0x21169a,_0xfa754c)=>{const _0x56be17=_0x2cc03f;let _0x5026b6=await this[_0x56be17(0x4f1)]({'request':_0x21169a,'schema':_a,'ClassRef':qe,'execute':(_0x5afa70,_0x46d2e8)=>P[_0x56be17(0x49f)](_0x5afa70,_0x46d2e8)});return _0xfa754c[_0x56be17(0x49d)](0xc8)[_0x56be17(0x141)](_0x5026b6);})[_0x2cc03f(0x556)](this[_0x2cc03f(0x15c)](_0x2cc03f(0x607)),..._0x4d5547,async(_0x46fb08,_0x5dff71)=>{const _0x5a4d4b=_0x2cc03f;let _0x45200f=await this[_0x5a4d4b(0x4f1)]({'request':_0x46fb08,'schema':xa,'ClassRef':We,'execute':(_0x43f758,_0x79795b)=>P[_0x5a4d4b(0x607)](_0x43f758,_0x79795b)});return _0x5dff71[_0x5a4d4b(0x49d)](0xc8)['json'](_0x45200f);})[_0x2cc03f(0x318)](this['routerPath'](_0x2cc03f(0x166)),..._0x4d5547,async(_0x4a2ab8,_0x40b6c1)=>{const _0x290860=_0x2cc03f;let _0x118f0d=await this[_0x290860(0x4f1)]({'request':_0x4a2ab8,'schema':Te,'ClassRef':we,'execute':(_0x431628,_0x169389)=>P[_0x290860(0x166)](_0x431628,_0x169389)});return _0x40b6c1['status'](0xc8)[_0x290860(0x141)](_0x118f0d);})[_0x2cc03f(0x2d3)](this[_0x2cc03f(0x15c)]('removeProfilePicture'),..._0x4d5547,async(_0x517ffd,_0x440653)=>{const _0x345dad=_0x2cc03f;let _0x34ce5d=await this[_0x345dad(0x4f1)]({'request':_0x517ffd,'schema':Te,'ClassRef':we,'execute':(_0x26daa2,_0x18668a)=>P[_0x345dad(0x206)](_0x26daa2,_0x18668a)});return _0x440653[_0x345dad(0x49d)](0xc8)[_0x345dad(0x141)](_0x34ce5d);});}},za=require(a0_0x27119e(0x14e)),it=class{},rt=class{},nt=class{},ct=class{},lt=class{},ee=class{},ut=class{},dt=class extends ee{},pt=class extends ee{},gt=class extends L{constructor(..._0x2573c8){const _0x131793=a0_0x27119e;super(),this['router']=(0x0,za['Router'])(),this[_0x131793(0x2ee)][_0x131793(0x556)](this['routerPath'](_0x131793(0x447)),..._0x2573c8,async(_0x1bd77c,_0x237694)=>{const _0x347f27=_0x131793;let _0x5f52bf=await this[_0x347f27(0x4f1)]({'request':_0x1bd77c,'schema':Va,'ClassRef':it,'execute':(_0x5dc954,_0x1afd88)=>V[_0x347f27(0x2d5)](_0x5dc954,_0x1afd88)});_0x237694['status'](0xc9)['json'](_0x5f52bf);})['put'](this['routerPath'](_0x131793(0x66f)),..._0x2573c8,async(_0x589056,_0x56507a)=>{const _0x26c92d=_0x131793;let _0x5f252e=await this['groupValidate']({'request':_0x589056,'schema':Fa,'ClassRef':rt,'execute':(_0x156c75,_0x2e7d2b)=>V[_0x26c92d(0x66f)](_0x156c75,_0x2e7d2b)});_0x56507a[_0x26c92d(0x49d)](0xc9)[_0x26c92d(0x141)](_0x5f252e);})[_0x131793(0x318)](this[_0x131793(0x15c)](_0x131793(0x203)),..._0x2573c8,async(_0x537380,_0x4750e2)=>{const _0x29abc5=_0x131793;let _0x4c2a8d=await this[_0x29abc5(0x181)]({'request':_0x537380,'schema':Ja,'ClassRef':nt,'execute':(_0x44a170,_0x150199)=>V['groupDesc'](_0x44a170,_0x150199)});_0x4750e2[_0x29abc5(0x49d)](0xc9)[_0x29abc5(0x141)](_0x4c2a8d);})[_0x131793(0x318)](this[_0x131793(0x15c)]('groupName'),..._0x2573c8,async(_0x1e8ced,_0x204c52)=>{const _0x44aef3=_0x131793;let _0x1f70ed=await this['groupValidate']({'request':_0x1e8ced,'schema':Ga,'ClassRef':ct,'execute':(_0x2f97a4,_0x15d091)=>V[_0x44aef3(0x29f)](_0x2f97a4,_0x15d091)});_0x204c52[_0x44aef3(0x49d)](0xc9)[_0x44aef3(0x141)](_0x1f70ed);})['put'](this[_0x131793(0x15c)](_0x131793(0x184)),..._0x2573c8,async(_0x38dc5d,_0x18583c)=>{const _0x34bb11=_0x131793;let _0x1ba234=await this['groupValidate']({'request':_0x38dc5d,'schema':qa,'ClassRef':lt,'execute':(_0x12e2f9,_0xd62626)=>V[_0x34bb11(0x184)](_0x12e2f9,_0xd62626)});_0x18583c['status'](0xc9)['json'](_0x1ba234);})['put'](this[_0x131793(0x15c)](_0x131793(0x108)),..._0x2573c8,async(_0x5c3951,_0x28c868)=>{const _0x1e5009=_0x131793;let _0x5200c3=await this[_0x1e5009(0x181)]({'request':_0x5c3951,'schema':Ba,'ClassRef':pt,'execute':(_0x1df3a1,_0x4e3cca)=>V[_0x1e5009(0x108)](_0x1df3a1,_0x4e3cca)});_0x28c868[_0x1e5009(0x49d)](0xc9)[_0x1e5009(0x141)](_0x5200c3);})[_0x131793(0x201)](this[_0x131793(0x15c)](_0x131793(0x51b)),..._0x2573c8,async(_0x8c1857,_0x5a8315)=>{const _0x167d3a=_0x131793;let _0x386691=await this[_0x167d3a(0x181)]({'request':_0x8c1857,'schema':Me,'ClassRef':ee,'execute':(_0x21fbb1,_0x5edd17)=>V[_0x167d3a(0x111)](_0x21fbb1,_0x5edd17)});_0x5a8315[_0x167d3a(0x49d)](0xc8)[_0x167d3a(0x141)](_0x386691);})[_0x131793(0x201)](this[_0x131793(0x15c)](_0x131793(0x1c8)),..._0x2573c8,async(_0x300b31,_0x324d8c)=>{const _0x594a99=_0x131793;let _0x3b0d6c=await this['dataValidate']({'request':_0x300b31,'schema':v,'ClassRef':b,'execute':_0x335cac=>V[_0x594a99(0x1c8)](_0x335cac)});_0x324d8c['status'](0xc8)[_0x594a99(0x141)](_0x3b0d6c);})[_0x131793(0x201)](this[_0x131793(0x15c)](_0x131793(0x54a)),..._0x2573c8,async(_0x4b463d,_0x4a1645)=>{const _0x4e87b5=_0x131793;let _0x546355=await this[_0x4e87b5(0x181)]({'request':_0x4b463d,'schema':Me,'ClassRef':ee,'execute':(_0x458060,_0x16173b)=>V[_0x4e87b5(0x5ea)](_0x458060,_0x16173b)});_0x4a1645[_0x4e87b5(0x49d)](0xc8)[_0x4e87b5(0x141)](_0x546355);})[_0x131793(0x201)](this[_0x131793(0x15c)](_0x131793(0x620)),..._0x2573c8,async(_0x3e552c,_0x465f3d)=>{const _0x369688=_0x131793;let _0x621c17=await this[_0x369688(0x181)]({'request':_0x3e552c,'schema':Me,'ClassRef':ee,'execute':(_0x57ae21,_0xc84a5)=>V[_0x369688(0x620)](_0x57ae21,_0xc84a5)});_0x465f3d[_0x369688(0x49d)](0xc8)[_0x369688(0x141)](_0x621c17);})[_0x131793(0x318)](this[_0x131793(0x15c)](_0x131793(0x26b)),..._0x2573c8,async(_0x4e34a8,_0x213cdb)=>{const _0x4667de=_0x131793;let _0x1d837a=await this[_0x4667de(0x2d6)]({'request':_0x4e34a8,'schema':Wa,'ClassRef':ut,'execute':(_0x2bb1a0,_0x46b705)=>V[_0x4667de(0x26b)](_0x2bb1a0,_0x46b705)});_0x213cdb[_0x4667de(0x49d)](0xc9)[_0x4667de(0x141)](_0x1d837a);})[_0x131793(0x318)](this['routerPath'](_0x131793(0x4b2)),..._0x2573c8,async(_0x4d30cb,_0x17d8de)=>{const _0x15b282=_0x131793;let _0xfafaab=await this[_0x15b282(0x181)]({'request':_0x4d30cb,'schema':Me,'ClassRef':ee,'execute':(_0x23b528,_0x50c4b1)=>V[_0x15b282(0x4b2)](_0x23b528,_0x50c4b1)});_0x17d8de[_0x15b282(0x49d)](0xc9)[_0x15b282(0x141)](_0xfafaab);})[_0x131793(0x318)](this[_0x131793(0x15c)]('updateParticipant'),..._0x2573c8,async(_0x36cbb4,_0x2b1dab)=>{const _0x5501f9=_0x131793;let _0xb259a9=await this['groupValidate']({'request':_0x36cbb4,'schema':ja,'ClassRef':dt,'execute':(_0x4692d9,_0x556e80)=>V[_0x5501f9(0x521)](_0x4692d9,_0x556e80)});_0x2b1dab['status'](0xc9)[_0x5501f9(0x141)](_0xb259a9);})[_0x131793(0x2d3)](this['routerPath'](_0x131793(0x57d)),..._0x2573c8,async(_0x3e9d33,_0x12c5d7)=>{const _0x4b588d=_0x131793;let _0x4d50f2=await this[_0x4b588d(0x181)]({'request':_0x3e9d33,'schema':{},'ClassRef':ee,'execute':(_0x7f9e5a,_0x17aebb)=>V['leaveGroup'](_0x7f9e5a,_0x17aebb)});_0x12c5d7[_0x4b588d(0x49d)](0xc8)['json'](_0x4d50f2);});}},Xa=require(a0_0x27119e(0x14e)),Pe=require(a0_0x27119e(0x495)),ys=require('uuid'),Qa=require(a0_0x27119e(0x16f)),Ya=T(require(a0_0x27119e(0x693))),mt=class{},ht=class c{constructor(_0x32490f,_0x45d4c1,_0x3c7910){const _0x42978f=a0_0x27119e;this['configService']=_0x32490f,this[_0x42978f(0x616)]=_0x45d4c1,this[_0x42978f(0x28a)]=_0x3c7910,this['logger']=new C(c[_0x42978f(0x3c5)]);}async[a0_0x27119e(0x4b3)](_0x15cc88){const _0x1e12b2=a0_0x27119e;let _0x3975ef=this[_0x1e12b2(0x593)][_0x1e12b2(0x201)]('AUTHENTICATION')[_0x1e12b2(0x653)],_0xa60bc0=(0x0,Pe[_0x1e12b2(0x418)])({'instanceName':_0x15cc88['instanceName'],'apiName':Xe,'tokenId':(0x0,ys['v4'])()},_0x3975ef[_0x1e12b2(0x54e)],{'expiresIn':_0x3975ef[_0x1e12b2(0x276)],'encoding':_0x1e12b2(0x11e),'subject':'g-t'}),_0x1f813a=await this[_0x1e12b2(0x28a)][_0x1e12b2(0x655)][_0x1e12b2(0x447)]({'jwt':_0xa60bc0},_0x15cc88[_0x1e12b2(0x492)]);if(_0x1f813a[_0x1e12b2(0x258)])throw this[_0x1e12b2(0x6cb)][_0x1e12b2(0x258)]({'localError':c[_0x1e12b2(0x3c5)]+_0x1e12b2(0x3a0),'error':_0x1f813a[_0x1e12b2(0x258)]}),new g(_0x1e12b2(0x328),_0x1f813a[_0x1e12b2(0x258)]?.['toString']());return{'jwt':_0xa60bc0};}async[a0_0x27119e(0x25f)](_0x52882e){const _0x536028=a0_0x27119e;let _0x1cd51d=(0x0,ys['v4'])()['toUpperCase'](),_0x2f4084=await this[_0x536028(0x28a)][_0x536028(0x655)][_0x536028(0x447)]({'apikey':_0x1cd51d},_0x52882e[_0x536028(0x492)]);if(_0x2f4084[_0x536028(0x258)])throw this[_0x536028(0x6cb)][_0x536028(0x258)]({'localError':c[_0x536028(0x3c5)]+_0x536028(0x3a0),'error':_0x2f4084[_0x536028(0x258)]}),new g('Authentication\x20error',_0x2f4084[_0x536028(0x258)]?.[_0x536028(0x3cb)]());return{'apikey':_0x1cd51d};}async[a0_0x27119e(0x2ec)](_0x3ad84a){const _0x134e9f=a0_0x27119e;let _0x1c3904=this[_0x134e9f(0x593)][_0x134e9f(0x201)](_0x134e9f(0x69c));return await this[_0x1c3904[_0x134e9f(0x202)]](_0x3ad84a);}async['refreshToken']({oldToken:_0xcd8a8b}){const _0x5f1104=a0_0x27119e;if(!(0x0,Qa['isJWT'])(_0xcd8a8b))throw new g(_0x5f1104(0x512));try{let _0x387dc7=this[_0x5f1104(0x593)]['get'](_0x5f1104(0x69c))['JWT'],_0x1e8721=(0x0,Pe[_0x5f1104(0x547)])(_0xcd8a8b,_0x387dc7[_0x5f1104(0x54e)],{'ignoreExpiration':!0x0}),_0x27d323=await this[_0x5f1104(0x28a)]['auth'][_0x5f1104(0x36e)](_0x1e8721[_0x5f1104(0x492)]),_0x438943=(0x0,Pe[_0x5f1104(0x547)])(_0x27d323[_0x5f1104(0x4b3)],_0x387dc7[_0x5f1104(0x54e)],{'ignoreExpiration':!0x0});if(_0x1e8721[_0x5f1104(0x119)]!==_0x438943[_0x5f1104(0x119)])throw new g(_0x5f1104(0x512));let _0x121aee={'jwt':(await this[_0x5f1104(0x4b3)]({'instanceName':_0x1e8721[_0x5f1104(0x492)]}))[_0x5f1104(0x4b3)],'instanceName':_0x1e8721[_0x5f1104(0x492)]};try{let _0x58978c=await this[_0x5f1104(0x28a)][_0x5f1104(0x362)][_0x5f1104(0x36e)](_0x1e8721[_0x5f1104(0x492)]);_0x58978c?.[_0x5f1104(0x3b1)]&&this[_0x5f1104(0x593)][_0x5f1104(0x201)](_0x5f1104(0x385))[_0x5f1104(0x2b0)][_0x5f1104(0x2dc)]&&await Ya[_0x5f1104(0x2c9)][_0x5f1104(0x447)]({'baseURL':_0x58978c[_0x5f1104(0x29a)]})[_0x5f1104(0x556)]('',{'event':_0x5f1104(0x2d1),'instance':_0x1e8721['instanceName'],'data':_0x121aee},{'params':{'owner':this[_0x5f1104(0x616)]['waInstances'][_0x1e8721[_0x5f1104(0x492)]][_0x5f1104(0x106)]}});}catch(_0x35cb77){this[_0x5f1104(0x6cb)][_0x5f1104(0x258)](_0x35cb77);}return _0x121aee;}catch(_0x46f64a){throw this[_0x5f1104(0x6cb)]['error']({'localError':c[_0x5f1104(0x3c5)]+_0x5f1104(0x259),'error':_0x46f64a}),new g(_0x5f1104(0x512));}}},ft=class extends L{constructor(_0x5a0a2b,..._0x175a85){const _0x27b549=a0_0x27119e;super(),this[_0x27b549(0x593)]=_0x5a0a2b,this['router']=(0x0,Xa[_0x27b549(0x674)])();let _0x3e1ef7=_0x5a0a2b[_0x27b549(0x201)](_0x27b549(0x69c));this['router'][_0x27b549(0x556)](_0x27b549(0x2a5),..._0x175a85,async(_0x1f7e92,_0x40a04d)=>{const _0x3a0254=_0x27b549;let {instanceName:_0x3f310a,apikey:_0x3de2ae}=_0x1f7e92['body'],_0x466158=await ce[_0x3a0254(0x284)]({'instanceName':_0x3f310a,'apikey':_0x3de2ae});return _0x40a04d[_0x3a0254(0x49d)](0xc9)[_0x3a0254(0x141)](_0x466158);})['put'](this[_0x27b549(0x15c)](_0x27b549(0x603)),..._0x175a85,async(_0x486046,_0x29592b)=>{const _0x104f9e=_0x27b549;let _0x5d4f09=await this['dataValidate']({'request':_0x486046,'schema':v,'ClassRef':b,'execute':_0x1c7a78=>ce[_0x104f9e(0x187)](_0x1c7a78)});return _0x29592b['status'](0xc8)[_0x104f9e(0x141)](_0x5d4f09);})[_0x27b549(0x201)](this[_0x27b549(0x15c)]('connect'),..._0x175a85,async(_0x5f067a,_0x3648d3)=>{const _0x3598ce=_0x27b549;let _0x1e0400=await this[_0x3598ce(0x4f1)]({'request':_0x5f067a,'schema':v,'ClassRef':b,'execute':_0x239b0a=>ce['connectToWhatsapp'](_0x239b0a)});return _0x3648d3[_0x3598ce(0x49d)](0xc8)[_0x3598ce(0x141)](_0x1e0400);})[_0x27b549(0x201)](this[_0x27b549(0x15c)]('connectionState'),..._0x175a85,async(_0x42a22d,_0x2804d6)=>{const _0x435040=_0x27b549;let _0x75b662=await this[_0x435040(0x4f1)]({'request':_0x42a22d,'schema':v,'ClassRef':b,'execute':_0x1d5a4a=>ce[_0x435040(0x4f3)](_0x1d5a4a)});return _0x2804d6[_0x435040(0x49d)](0xc8)['json'](_0x75b662);})[_0x27b549(0x201)](this[_0x27b549(0x15c)](_0x27b549(0x129),!0x1),..._0x175a85,async(_0x428d53,_0x2b618f)=>{const _0x38e4c5=_0x27b549;let _0x5da100=await this[_0x38e4c5(0x4f1)]({'request':_0x428d53,'schema':null,'ClassRef':b,'execute':_0x1d4d5b=>ce[_0x38e4c5(0x129)](_0x1d4d5b)});return _0x2b618f[_0x38e4c5(0x49d)](0xc8)[_0x38e4c5(0x141)](_0x5da100);})['delete'](this[_0x27b549(0x15c)](_0x27b549(0x66d)),..._0x175a85,async(_0xb66f08,_0x4ebe1f)=>{const _0x482a8a=_0x27b549;let _0x2278f8=await this[_0x482a8a(0x4f1)]({'request':_0xb66f08,'schema':v,'ClassRef':b,'execute':_0x5b44cd=>ce[_0x482a8a(0x66d)](_0x5b44cd)});return _0x4ebe1f['status'](0xc8)[_0x482a8a(0x141)](_0x2278f8);})[_0x27b549(0x2d3)](this[_0x27b549(0x15c)]('delete'),..._0x175a85,async(_0x202f8e,_0x2670d0)=>{const _0x1e588a=_0x27b549;let _0x1ae7ac=await this['dataValidate']({'request':_0x202f8e,'schema':v,'ClassRef':b,'execute':_0x114b62=>ce[_0x1e588a(0x51d)](_0x114b62)});return _0x2670d0['status'](0xc8)[_0x1e588a(0x141)](_0x1ae7ac);}),_0x3e1ef7[_0x27b549(0x202)]==='jwt'&&this[_0x27b549(0x2ee)][_0x27b549(0x318)](_0x27b549(0x230),async(_0x337c5f,_0x40dd7d)=>{const _0x3fc93b=_0x27b549;let _0x41e12b=await this[_0x3fc93b(0x4f1)]({'request':_0x337c5f,'schema':ma,'ClassRef':mt,'execute':(_0x550f05,_0x1d76ef)=>ce[_0x3fc93b(0x214)](_0x550f05,_0x1d76ef)});return _0x40dd7d[_0x3fc93b(0x49d)](0xc9)[_0x3fc93b(0x141)](_0x41e12b);});}},Za=require(a0_0x27119e(0x14e)),bs=class{},z=class extends bs{},wt=class extends z{},yt=class extends z{},bt=class extends z{},Oe=class extends z{},St=class extends z{},Et=class extends z{},vt=class extends z{},Nt=class extends z{},Ct=class extends z{},Tt=class{},Mt=class extends L{constructor(..._0x30e175){const _0x134e5c=a0_0x27119e;super(),this[_0x134e5c(0x2ee)]=(0x0,Za[_0x134e5c(0x674)])(),this[_0x134e5c(0x2ee)][_0x134e5c(0x556)](this[_0x134e5c(0x15c)](_0x134e5c(0x116)),..._0x30e175,async(_0x2cf12e,_0x262cfb)=>{const _0x1fa372=_0x134e5c;let _0x4ddda1=await this[_0x1fa372(0x4f1)]({'request':_0x2cf12e,'schema':ha,'ClassRef':wt,'execute':(_0x19f06e,_0x92bc5a)=>K[_0x1fa372(0x116)](_0x19f06e,_0x92bc5a)});return _0x262cfb[_0x1fa372(0x49d)](0xc9)[_0x1fa372(0x141)](_0x4ddda1);})['post'](this[_0x134e5c(0x15c)](_0x134e5c(0x652)),..._0x30e175,async(_0x175cc4,_0x2d1991)=>{const _0x34eabb=_0x134e5c;let _0x9cca5e=await this[_0x34eabb(0x4f1)]({'request':_0x175cc4,'schema':ba,'ClassRef':Oe,'execute':(_0x488663,_0x51f76f)=>K['sendMedia'](_0x488663,_0x51f76f)});return _0x2d1991[_0x34eabb(0x49d)](0xc9)['json'](_0x9cca5e);})[_0x134e5c(0x556)](this['routerPath'](_0x134e5c(0x14c)),..._0x30e175,async(_0x2eca6e,_0x27052f)=>{const _0x102aab=_0x134e5c;let _0x48f9ad=await this['dataValidate']({'request':_0x2eca6e,'schema':Sa,'ClassRef':Oe,'execute':(_0x5d7c4b,_0x133da9)=>K[_0x102aab(0x14c)](_0x5d7c4b,_0x133da9)});return _0x27052f['status'](0xc9)[_0x102aab(0x141)](_0x48f9ad);})[_0x134e5c(0x556)](this['routerPath'](_0x134e5c(0x43c)),..._0x30e175,async(_0x2f4338,_0x5a4af1)=>{const _0xd57843=_0x134e5c;let _0x5c8cc4=await this[_0xd57843(0x4f1)]({'request':_0x2f4338,'schema':va,'ClassRef':Et,'execute':(_0x1106d0,_0x1b449c)=>K[_0xd57843(0x43c)](_0x1106d0,_0x1b449c)});return _0x5a4af1[_0xd57843(0x49d)](0xc9)[_0xd57843(0x141)](_0x5c8cc4);})['post'](this['routerPath'](_0x134e5c(0x134)),..._0x30e175,async(_0xb4bd8a,_0x3a8059)=>{const _0x34bf46=_0x134e5c;let _0x5a4ffb=await this[_0x34bf46(0x4f1)]({'request':_0xb4bd8a,'schema':Na,'ClassRef':vt,'execute':(_0x31c50c,_0x483139)=>K[_0x34bf46(0x134)](_0x31c50c,_0x483139)});return _0x3a8059['status'](0xc9)[_0x34bf46(0x141)](_0x5a4ffb);})[_0x134e5c(0x556)](this['routerPath'](_0x134e5c(0x326)),..._0x30e175,async(_0x2018da,_0x5456bd)=>{const _0x28d18e=_0x134e5c;let _0x4c68eb=await this[_0x28d18e(0x4f1)]({'request':_0x2018da,'schema':Ca,'ClassRef':Nt,'execute':(_0x4dbf14,_0x282ae6)=>K['sendList'](_0x4dbf14,_0x282ae6)});return _0x5456bd[_0x28d18e(0x49d)](0xc9)['json'](_0x4c68eb);})[_0x134e5c(0x556)](this['routerPath'](_0x134e5c(0x35f)),..._0x30e175,async(_0x35ef43,_0x22d515)=>{const _0x5987ce=_0x134e5c;let _0x1c50c9=await this[_0x5987ce(0x4f1)]({'request':_0x35ef43,'schema':Ta,'ClassRef':Ct,'execute':(_0x4a1239,_0x35ca09)=>K[_0x5987ce(0x35f)](_0x4a1239,_0x35ca09)});return _0x22d515[_0x5987ce(0x49d)](0xc9)[_0x5987ce(0x141)](_0x1c50c9);})['post'](this[_0x134e5c(0x15c)](_0x134e5c(0x4cc)),..._0x30e175,async(_0x5a6b4b,_0x8d7843)=>{const _0x35640a=_0x134e5c;let _0x5891ad=await this[_0x35640a(0x4f1)]({'request':_0x5a6b4b,'schema':Ma,'ClassRef':Tt,'execute':(_0x10f2f1,_0x452bae)=>K['sendReaction'](_0x10f2f1,_0x452bae)});return _0x8d7843[_0x35640a(0x49d)](0xc9)[_0x35640a(0x141)](_0x5891ad);})[_0x134e5c(0x556)](this[_0x134e5c(0x15c)](_0x134e5c(0x1f1)),..._0x30e175,async(_0x50c6e1,_0x58c037)=>{const _0x51f9ec=_0x134e5c;let _0x3ca3ef=await this['dataValidate']({'request':_0x50c6e1,'schema':Ea,'ClassRef':bt,'execute':(_0x48a93f,_0x3ecad4)=>K[_0x51f9ec(0x1f1)](_0x48a93f,_0x3ecad4)});return _0x58c037['status'](0xc9)[_0x51f9ec(0x141)](_0x3ca3ef);})[_0x134e5c(0x556)](this[_0x134e5c(0x15c)](_0x134e5c(0x275)),..._0x30e175,async(_0x26a2c6,_0x438a31)=>{const _0x5ba490=_0x134e5c;let _0x3ff97f=await this[_0x5ba490(0x4f1)]({'request':_0x26a2c6,'schema':ya,'ClassRef':yt,'execute':(_0x54e860,_0x4d371f)=>K[_0x5ba490(0x275)](_0x54e860,_0x4d371f)});return _0x438a31['status'](0xc9)[_0x5ba490(0x141)](_0x3ff97f);})['post'](this[_0x134e5c(0x15c)](_0x134e5c(0x562)),..._0x30e175,async(_0x505816,_0x31cb50)=>{const _0x3d5273=_0x134e5c;let _0x2d5244=await this['dataValidate']({'request':_0x505816,'schema':wa,'ClassRef':St,'execute':(_0x30610b,_0x17ccc)=>K[_0x3d5273(0x562)](_0x30610b,_0x17ccc)});return _0x31cb50['status'](0xc9)[_0x3d5273(0x141)](_0x2d5244);});}},eo=require(a0_0x27119e(0x14e)),Rt=class extends L{constructor(..._0x18662f){const _0x5b5492=a0_0x27119e;super(),this[_0x5b5492(0x2ee)]=(0x0,eo[_0x5b5492(0x674)])(),this[_0x5b5492(0x2ee)]['get'](this[_0x5b5492(0x15c)]('qrcode'),..._0x18662f,(_0x48b264,_0x21179c)=>to[_0x5b5492(0x2e1)](_0x48b264,_0x21179c));}},so=require(a0_0x27119e(0x14e)),At=class{},It=class extends L{constructor(..._0x249f01){const _0x23dfaf=a0_0x27119e;super(),this[_0x23dfaf(0x2ee)]=(0x0,so['Router'])(),this[_0x23dfaf(0x2ee)][_0x23dfaf(0x556)](this[_0x23dfaf(0x15c)](_0x23dfaf(0x590)),..._0x249f01,async(_0x4d87f1,_0x908961)=>{const _0x337937=_0x23dfaf;let _0x20cdc2=await this[_0x337937(0x4f1)]({'request':_0x4d87f1,'schema':Ha,'ClassRef':At,'execute':(_0x15633a,_0x1d2027)=>Ss['createWebhook'](_0x15633a,_0x1d2027)});_0x908961['status'](0xc9)[_0x337937(0x141)](_0x20cdc2);})[_0x23dfaf(0x201)](this[_0x23dfaf(0x15c)]('find'),..._0x249f01,async(_0x2a7806,_0x20b386)=>{const _0x37aee4=_0x23dfaf;let _0xdee429=await this[_0x37aee4(0x4f1)]({'request':_0x2a7806,'schema':v,'ClassRef':b,'execute':_0x362929=>Ss['findWebhook'](_0x362929)});_0x20b386[_0x37aee4(0x49d)](0xc8)['json'](_0xdee429);});}},ao=require('express'),f=new C(a0_0x27119e(0x49b)),Dt=class extends L{constructor(..._0x113e2f){const _0x5956ac=a0_0x27119e;super(),this[_0x5956ac(0x2ee)]=(0x0,ao[_0x5956ac(0x674)])(),this['router'][_0x5956ac(0x556)](this[_0x5956ac(0x15c)](_0x5956ac(0x63f)),..._0x113e2f,async(_0x4fb83c,_0x51249e)=>{const _0x3889eb=_0x5956ac;let _0x45aa4b=_0x4fb83c[_0x3889eb(0x4ea)];f[_0x3889eb(0x234)](_0x3889eb(0x3e5)),f[_0x3889eb(0x234)]('request\x20body:\x20'),f[_0x3889eb(0x234)](_0x4fb83c[_0x3889eb(0x4ea)]);let _0x271d3c=await this[_0x3889eb(0x4f1)]({'request':_0x4fb83c,'schema':v,'ClassRef':b,'execute':_0x4bdff1=>R[_0x3889eb(0x309)](_0x4bdff1,_0x45aa4b)});_0x51249e[_0x3889eb(0x49d)](0xc8)[_0x3889eb(0x141)](_0x271d3c);})[_0x5956ac(0x201)](this[_0x5956ac(0x15c)](_0x5956ac(0x63f)),..._0x113e2f,async(_0x3450eb,_0x1c7c49)=>{const _0x2f36c2=_0x5956ac;let _0x39a4e9=await this[_0x2f36c2(0x4f1)]({'request':_0x3450eb,'schema':v,'ClassRef':b,'execute':_0x1f20cb=>R[_0x2f36c2(0x4d9)](_0x1f20cb)});_0x1c7c49[_0x2f36c2(0x49d)](0xc8)[_0x2f36c2(0x141)](_0x39a4e9);})['delete'](this[_0x5956ac(0x15c)](_0x5956ac(0x330)),..._0x113e2f,async(_0x34dfa1,_0x3b55e9)=>{const _0x30e8f2=_0x5956ac;f['verbose'](_0x30e8f2(0x66a));let _0x10d694=await this[_0x30e8f2(0x4f1)]({'request':_0x34dfa1,'schema':v,'ClassRef':b,'execute':_0x2fd357=>R['deleteDoneMessages'](_0x2fd357)});_0x3b55e9[_0x30e8f2(0x49d)](0xc8)[_0x30e8f2(0x141)](_0x10d694);})['post'](this[_0x5956ac(0x15c)](_0x5956ac(0x1c4)),..._0x113e2f,async(_0x4d1044,_0x528bc6)=>{const _0x22e422=_0x5956ac;let _0x4a6cb8=_0x4d1044[_0x22e422(0x4ea)];f[_0x22e422(0x234)](_0x22e422(0x317)),f[_0x22e422(0x234)](_0x22e422(0x6ae)),f[_0x22e422(0x234)](_0x4d1044[_0x22e422(0x4ea)]);let _0x382185=await this['dataValidate']({'request':_0x4d1044,'schema':v,'ClassRef':b,'execute':_0x406a63=>R[_0x22e422(0x1c4)](_0x406a63,_0x4a6cb8)});_0x528bc6[_0x22e422(0x49d)](0xc8)[_0x22e422(0x141)](_0x382185);})['get'](this[_0x5956ac(0x15c)](_0x5956ac(0x402)),..._0x113e2f,async(_0x634cec,_0x14627a)=>{const _0x59a2ba=_0x5956ac;f[_0x59a2ba(0x234)]('request\x20received\x20in\x20getAutomateSystem');let _0x2312a8=await this['dataValidate']({'request':_0x634cec,'schema':v,'ClassRef':b,'execute':_0xacf618=>R[_0x59a2ba(0x402)](_0xacf618)});_0x14627a['status'](0xc8)['json'](_0x2312a8);})[_0x5956ac(0x201)](this[_0x5956ac(0x15c)](_0x5956ac(0x450)),..._0x113e2f,async(_0x4c15c9,_0x11a61f)=>{const _0x45c0ea=_0x5956ac;f[_0x45c0ea(0x234)](_0x45c0ea(0x413));let _0x388458=await this[_0x45c0ea(0x4f1)]({'request':_0x4c15c9,'schema':v,'ClassRef':b,'execute':_0x3f0206=>R[_0x45c0ea(0x402)](_0x3f0206)});_0x11a61f[_0x45c0ea(0x49d)](0xc8)[_0x45c0ea(0x141)](_0x388458);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)](_0x5956ac(0x23e)),..._0x113e2f,async(_0x1edf68,_0x3b0d05)=>{const _0x3de7bb=_0x5956ac;let _0x5d3da9=_0x1edf68['body'];f['verbose'](_0x3de7bb(0x50a)),f[_0x3de7bb(0x234)](_0x3de7bb(0x6ae)),f[_0x3de7bb(0x234)](_0x1edf68[_0x3de7bb(0x4ea)]);let _0x2e0c78=await this['dataValidate']({'request':_0x1edf68,'schema':v,'ClassRef':b,'execute':_0xb91326=>R['updateAgent'](_0xb91326,_0x5d3da9)});_0x3b0d05[_0x3de7bb(0x49d)](0xc8)[_0x3de7bb(0x141)](_0x2e0c78);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)](_0x5956ac(0x373)),..._0x113e2f,async(_0xd1ea61,_0x1dd408)=>{const _0x557972=_0x5956ac;let _0x367f4a=_0xd1ea61[_0x557972(0x4ea)];f[_0x557972(0x234)](_0x557972(0x3d8)),f[_0x557972(0x234)](_0x557972(0x6ae)),f[_0x557972(0x234)](_0xd1ea61[_0x557972(0x4ea)]);let _0x42fb6e=await this['dataValidate']({'request':_0xd1ea61,'schema':v,'ClassRef':b,'execute':_0x26f95d=>R[_0x557972(0x373)](_0x26f95d,_0x367f4a)});_0x1dd408[_0x557972(0x49d)](0xc8)[_0x557972(0x141)](_0x42fb6e);})[_0x5956ac(0x556)](this['routerPath'](_0x5956ac(0x175)),..._0x113e2f,async(_0x3c98e7,_0x3ddf28)=>{const _0xdd545a=_0x5956ac;let _0x72b674=_0x3c98e7[_0xdd545a(0x4ea)];f[_0xdd545a(0x234)](_0xdd545a(0x2f1)),f[_0xdd545a(0x234)](_0xdd545a(0x6ae)),f['verbose'](_0x3c98e7[_0xdd545a(0x4ea)]);let _0x36280b=await this['dataValidate']({'request':_0x3c98e7,'schema':v,'ClassRef':b,'execute':_0x14d866=>R[_0xdd545a(0x175)](_0x14d866,_0x72b674)});_0x3ddf28['status'](0xc8)[_0xdd545a(0x141)](_0x36280b);})[_0x5956ac(0x556)](this['routerPath'](_0x5956ac(0x21f)),..._0x113e2f,async(_0x552bcd,_0x28c91f)=>{const _0x3cbad6=_0x5956ac;let _0x57ed75=_0x552bcd[_0x3cbad6(0x4ea)];f[_0x3cbad6(0x234)](_0x3cbad6(0x313)),f[_0x3cbad6(0x234)](_0x3cbad6(0x6ae)),f['verbose'](_0x552bcd[_0x3cbad6(0x4ea)]);let _0x932cbe=await this[_0x3cbad6(0x4f1)]({'request':_0x552bcd,'schema':v,'ClassRef':b,'execute':_0x342d36=>R[_0x3cbad6(0x21f)](_0x342d36,_0x57ed75)});_0x28c91f['status'](0xc8)['json'](_0x932cbe);})['post'](this[_0x5956ac(0x15c)](_0x5956ac(0x3bf)),..._0x113e2f,async(_0x44e1a8,_0x335906)=>{const _0x55d44e=_0x5956ac;let _0x43190e=_0x44e1a8[_0x55d44e(0x4ea)];f['verbose'](_0x55d44e(0x1d8)),f[_0x55d44e(0x234)](_0x55d44e(0x6ae)),f[_0x55d44e(0x234)](_0x44e1a8[_0x55d44e(0x4ea)]);let _0x400ef0=await this[_0x55d44e(0x4f1)]({'request':_0x44e1a8,'schema':v,'ClassRef':b,'execute':_0x2a708a=>R['fetchConversation'](_0x2a708a,_0x43190e)});_0x335906[_0x55d44e(0x49d)](0xc8)[_0x55d44e(0x141)](_0x400ef0);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)](_0x5956ac(0x35a)),..._0x113e2f,async(_0x165536,_0x1f7688)=>{const _0x4942d3=_0x5956ac;let _0x5b2d2f=_0x165536[_0x4942d3(0x4ea)];f[_0x4942d3(0x234)](_0x4942d3(0x637)),f[_0x4942d3(0x234)](_0x4942d3(0x6ae)),f[_0x4942d3(0x234)](_0x165536[_0x4942d3(0x4ea)]);let _0x44165b=await this[_0x4942d3(0x4f1)]({'request':_0x165536,'schema':v,'ClassRef':b,'execute':_0x1e3667=>R[_0x4942d3(0x35a)](_0x1e3667,_0x5b2d2f)});_0x1f7688[_0x4942d3(0x49d)](0xc8)[_0x4942d3(0x141)](_0x44165b);})[_0x5956ac(0x2d3)](this['routerPath']('deleteConversation'),..._0x113e2f,async(_0x30dacf,_0x38aee0)=>{const _0x1cd467=_0x5956ac;let _0x2b9c41=_0x30dacf['body'];f[_0x1cd467(0x234)](_0x1cd467(0x55c)),f[_0x1cd467(0x234)](_0x1cd467(0x6ae)),f[_0x1cd467(0x234)](_0x30dacf[_0x1cd467(0x4ea)]);let _0x542a20=await this[_0x1cd467(0x4f1)]({'request':_0x30dacf,'schema':v,'ClassRef':b,'execute':_0x1f8ce9=>R['deleteConversation'](_0x1f8ce9,_0x2b9c41)});_0x38aee0[_0x1cd467(0x49d)](0xc8)['json'](_0x542a20);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)]('createflow'),..._0x113e2f,async(_0x44eb5c,_0x1ae98b)=>{const _0x424d67=_0x5956ac;let _0x56546c=_0x44eb5c[_0x424d67(0x4ea)];f[_0x424d67(0x234)](_0x424d67(0xfb)),f[_0x424d67(0x234)](_0x424d67(0x6ae)),f[_0x424d67(0x234)](_0x44eb5c['body']);let _0x80facd=await this[_0x424d67(0x4f1)]({'request':_0x44eb5c,'schema':v,'ClassRef':b,'execute':_0x3278f3=>R[_0x424d67(0x587)](_0x3278f3,_0x56546c)});_0x1ae98b[_0x424d67(0x49d)](0xc8)[_0x424d67(0x141)](_0x80facd);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)]('editflow'),..._0x113e2f,async(_0xdbae92,_0xff42dc)=>{const _0x4f44c3=_0x5956ac;let _0x210869=_0xdbae92['body'];f['verbose'](_0x4f44c3(0x566)),f[_0x4f44c3(0x234)](_0x4f44c3(0x6ae)),f['verbose'](_0xdbae92[_0x4f44c3(0x4ea)]),delete _0x210869[_0x4f44c3(0x3e8)],delete _0x210869[_0x4f44c3(0x1ed)],delete _0x210869[_0x4f44c3(0x17e)],delete _0x210869['conditions'];let _0x404111=await this[_0x4f44c3(0x4f1)]({'request':_0xdbae92,'schema':v,'ClassRef':b,'execute':_0x54e7b6=>R[_0x4f44c3(0x1d1)](_0x54e7b6,_0x210869)});_0xff42dc[_0x4f44c3(0x49d)](0xc8)[_0x4f44c3(0x141)](_0x404111);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)](_0x5956ac(0x4fb)),..._0x113e2f,async(_0x3878e4,_0x29b238)=>{const _0x53e635=_0x5956ac;let _0x5e3d7c=_0x3878e4['body'];f[_0x53e635(0x234)]('request\x20received\x20in\x20editFlow'),f['verbose'](_0x53e635(0x6ae)),f['verbose'](_0x3878e4[_0x53e635(0x4ea)]);let _0x85184c=await this[_0x53e635(0x4f1)]({'request':_0x3878e4,'schema':v,'ClassRef':b,'execute':_0x58a83f=>R[_0x53e635(0x47f)](_0x58a83f,_0x5e3d7c)});_0x29b238[_0x53e635(0x49d)](0xc8)[_0x53e635(0x141)](_0x85184c);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)](_0x5956ac(0x28d)),..._0x113e2f,async(_0xe408f4,_0xada4a)=>{const _0x11c912=_0x5956ac;let _0x1fb163=_0xe408f4[_0x11c912(0x4ea)];f[_0x11c912(0x234)](_0x11c912(0x566)),f[_0x11c912(0x234)]('request\x20body:\x20'),f[_0x11c912(0x234)](_0xe408f4['body']);let _0x44df02=await this[_0x11c912(0x4f1)]({'request':_0xe408f4,'schema':v,'ClassRef':b,'execute':_0x89c5eb=>R[_0x11c912(0x6cc)](_0x89c5eb,_0x1fb163)});_0xada4a['status'](0xc8)[_0x11c912(0x141)](_0x44df02);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)](_0x5956ac(0x40c)),..._0x113e2f,async(_0x561c72,_0x424db9)=>{const _0xe7c09=_0x5956ac;let _0x1c6ff3=_0x561c72['body'];f[_0xe7c09(0x234)](_0xe7c09(0x566)),f[_0xe7c09(0x234)]('request\x20body:\x20'),f['verbose'](_0x561c72[_0xe7c09(0x4ea)]);let _0x2cd494=await this[_0xe7c09(0x4f1)]({'request':_0x561c72,'schema':v,'ClassRef':b,'execute':_0x33f3b4=>R['editFlowVaredit'](_0x33f3b4,_0x1c6ff3)});_0x424db9[_0xe7c09(0x49d)](0xc8)['json'](_0x2cd494);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)](_0x5956ac(0x31f)),..._0x113e2f,async(_0x502541,_0x5df058)=>{const _0x21e5f2=_0x5956ac;let _0x44919a=_0x502541[_0x21e5f2(0x4ea)];f['verbose'](_0x21e5f2(0x271)),f[_0x21e5f2(0x234)](_0x21e5f2(0x6ae)),f[_0x21e5f2(0x234)](_0x502541['body']);let _0x51c00d=await this[_0x21e5f2(0x4f1)]({'request':_0x502541,'schema':v,'ClassRef':b,'execute':_0x46c9ff=>R[_0x21e5f2(0x52e)](_0x46c9ff,_0x44919a)});_0x5df058[_0x21e5f2(0x49d)](0xc8)['json'](_0x51c00d);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)](_0x5956ac(0x1b6)),..._0x113e2f,async(_0x91228e,_0x1f2a6e)=>{const _0x42a433=_0x5956ac;let _0x4bbddd=_0x91228e[_0x42a433(0x4ea)];f[_0x42a433(0x234)](_0x42a433(0x545)),f[_0x42a433(0x234)](_0x42a433(0x6ae)),f[_0x42a433(0x234)](_0x91228e[_0x42a433(0x4ea)]);let _0x30f602=await this[_0x42a433(0x4f1)]({'request':_0x91228e,'schema':v,'ClassRef':b,'execute':_0x367d6d=>R['editFlowCondition'](_0x367d6d,_0x4bbddd)});_0x1f2a6e[_0x42a433(0x49d)](0xc8)[_0x42a433(0x141)](_0x30f602);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)](_0x5956ac(0x1ea)),..._0x113e2f,async(_0x3a6f4a,_0x5767b6)=>{const _0x1d0484=_0x5956ac;let _0x32ca9f=_0x3a6f4a[_0x1d0484(0x4ea)];f[_0x1d0484(0x234)](_0x1d0484(0x281)),f['verbose'](_0x1d0484(0x6ae)),f[_0x1d0484(0x234)](_0x3a6f4a['body']);let _0x20543b=await this[_0x1d0484(0x4f1)]({'request':_0x3a6f4a,'schema':v,'ClassRef':b,'execute':_0x10d3e1=>R[_0x1d0484(0x319)](_0x10d3e1,_0x32ca9f)});_0x5767b6[_0x1d0484(0x49d)](0xc8)[_0x1d0484(0x141)](_0x20543b);})[_0x5956ac(0x556)](this[_0x5956ac(0x15c)](_0x5956ac(0xef)),..._0x113e2f,async(_0x16115d,_0x1bd680)=>{const _0x508add=_0x5956ac;let _0x2c9642=_0x16115d[_0x508add(0x4ea)];f['verbose'](_0x508add(0x2bc)),f[_0x508add(0x234)](_0x508add(0x6ae)),f[_0x508add(0x234)](_0x16115d['body']);let _0x2f9a0d=await this['dataValidate']({'request':_0x16115d,'schema':v,'ClassRef':b,'execute':_0x270643=>R[_0x508add(0x474)](_0x270643,_0x2c9642)});_0x1bd680[_0x508add(0x49d)](0xc8)[_0x508add(0x141)](_0x2f9a0d);})[_0x5956ac(0x2d3)](this['routerPath'](_0x5956ac(0x270)),..._0x113e2f,async(_0x13933c,_0xfc06ec)=>{const _0x867a91=_0x5956ac;let _0x33b0d4=_0x13933c['body'];f[_0x867a91(0x234)]('request\x20received\x20in\x20createFlow'),f['verbose'](_0x867a91(0x6ae)),f[_0x867a91(0x234)](_0x13933c[_0x867a91(0x4ea)]);let _0x4f88fe=await this[_0x867a91(0x4f1)]({'request':_0x13933c,'schema':v,'ClassRef':b,'execute':_0x2bbec8=>R[_0x867a91(0x33b)](_0x2bbec8,_0x33b0d4)});_0xfc06ec[_0x867a91(0x49d)](0xc8)[_0x867a91(0x141)](_0x4f88fe);})[_0x5956ac(0x201)](this['routerPath'](_0x5956ac(0x24f)),..._0x113e2f,async(_0x179e21,_0x195768)=>{const _0x54fa5e=_0x5956ac;f[_0x54fa5e(0x234)](_0x54fa5e(0x38e));let _0x4087fe=await this[_0x54fa5e(0x4f1)]({'request':_0x179e21,'schema':v,'ClassRef':b,'execute':_0x583afc=>R[_0x54fa5e(0x354)](_0x583afc)});_0x195768['status'](0xc8)[_0x54fa5e(0x141)](_0x4087fe);});}},no=T(require(a0_0x27119e(0x342))),te={};function oo(_0x2aeeed,_0x2ceba1,_0xcafcc3,_0xaeafc0){te[_0x2aeeed]||(te[_0x2aeeed]={}),te[_0x2aeeed][_0x2ceba1]={'id':_0x2ceba1,'response':_0xcafcc3,'events':_0xaeafc0};}function io(_0x2be9f0,_0x257923){!te[_0x2be9f0]||!te[_0x2be9f0][_0x257923]||delete te[_0x2be9f0][_0x257923];}function q(_0x232e34,_0x10cdbf,_0x50e821){const _0x1ad02b=a0_0x27119e;if(!te[_0x232e34])return;let _0x34cf8e=_0x1ad02b(0x28c)+JSON[_0x1ad02b(0x5f2)](_0x50e821)+'\x0a\x0a';Object[_0x1ad02b(0x594)](te[_0x232e34])[_0x1ad02b(0xfc)](_0x1cc2a=>{const _0x1017e9=_0x1ad02b;_0x1cc2a[_0x1017e9(0x5e2)][_0x1017e9(0x6ad)](_0x10cdbf)&&_0x1cc2a[_0x1017e9(0x210)][_0x1017e9(0x5b0)](_0x34cf8e);});}function ro(){const _0x3ecb92=a0_0x27119e;let _0x35c8c3={};for(let _0x3c32b0 in te)_0x35c8c3[_0x3c32b0]=Object[_0x3ecb92(0x594)](te[_0x3c32b0])[_0x3ecb92(0x2c7)](_0x158ea7=>({'id':_0x158ea7['id'],'events':_0x158ea7['events']}));return _0x35c8c3;}var co=require(a0_0x27119e(0x401)),ui=no[a0_0x27119e(0x2c9)][a0_0x27119e(0x3eb)](__dirname,'downloads'),Ot=(0x0,Pt[a0_0x27119e(0x674)])(),di=y['get'](a0_0x27119e(0x69c))['TYPE'],pe=[fs,ua,ga[di]];function a0_0x2b59(_0x5dc8aa,_0x448176){const _0x4be1d9=a0_0x4be1();return a0_0x2b59=function(_0x2b5915,_0x4e3598){_0x2b5915=_0x2b5915-0xef;let _0x9d0e5e=_0x4be1d9[_0x2b5915];return _0x9d0e5e;},a0_0x2b59(_0x5dc8aa,_0x448176);}Ot[a0_0x27119e(0x6d9)](a0_0x27119e(0x4a0),Pt[a0_0x27119e(0x2c9)]['static'](ui))[a0_0x27119e(0x201)]('/events/:instance',async(_0x294bb2,_0x2c30ac)=>{const _0x4b0cdb=a0_0x27119e;console['log']('bateu\x20events');let _0x52ca96=_0x294bb2[_0x4b0cdb(0x642)]['instance'],_0x15b7cf=(_0x294bb2[_0x4b0cdb(0x139)][_0x4b0cdb(0x5e2)]||'')[_0x4b0cdb(0x29e)](','),_0x57f3c1=(0x0,co['v4'])();console[_0x4b0cdb(0x502)](_0x4b0cdb(0x615),_0x52ca96),console[_0x4b0cdb(0x502)](_0x4b0cdb(0x3b7),_0x15b7cf);let _0x46a386=y[_0x4b0cdb(0x201)]('AUTHENTICATION')['API_KEY'],_0x16eaae=_0x294bb2[_0x4b0cdb(0x139)][_0x4b0cdb(0x25f)];if(console['log']('API\x20Key\x20from\x20Request:',_0x16eaae),_0x46a386['KEY']!==_0x16eaae){console[_0x4b0cdb(0x502)](_0x4b0cdb(0x2a7));try{let _0x4b863b=await de[_0x4b0cdb(0x655)][_0x4b0cdb(0x36e)](_0x52ca96);if(console[_0x4b0cdb(0x502)](_0x4b0cdb(0x459),_0x4b863b),!_0x4b863b||_0x4b863b[_0x4b0cdb(0x25f)]!==_0x16eaae)return console[_0x4b0cdb(0x502)](_0x4b0cdb(0x229)),_0x2c30ac['status'](0x191)[_0x4b0cdb(0x3a6)]('API\x20Key\x20inválida.');}catch(_0x110e9a){return console[_0x4b0cdb(0x258)]('Error\x20retrieving\x20instance\x20or\x20API\x20Key:',_0x110e9a),_0x2c30ac[_0x4b0cdb(0x49d)](0x191)['send'](_0x4b0cdb(0x406));}}if(!await Ye(_0x52ca96))return _0x2c30ac['status'](0x194)[_0x4b0cdb(0x3a6)](_0x4b0cdb(0x290));_0x2c30ac[_0x4b0cdb(0x4e7)](_0x4b0cdb(0x251),_0x4b0cdb(0x2ab)),_0x2c30ac[_0x4b0cdb(0x4e7)](_0x4b0cdb(0x102),'no-cache'),_0x2c30ac[_0x4b0cdb(0x4e7)](_0x4b0cdb(0x6af),_0x4b0cdb(0x304)),_0x2c30ac['flushHeaders']();let _0xa27f68=_0x4b0cdb(0x28c)+JSON[_0x4b0cdb(0x5f2)]({'info':_0x4b0cdb(0x121)})+'\x0a\x0a';_0x2c30ac[_0x4b0cdb(0x5b0)](_0xa27f68),oo(_0x52ca96,_0x57f3c1,_0x2c30ac,_0x15b7cf),_0x294bb2['on'](_0x4b0cdb(0x128),()=>{const _0x32ea46=_0x4b0cdb;console['log'](_0x32ea46(0x1d3)+_0x52ca96),io(_0x52ca96,_0x57f3c1);});}),Ot[a0_0x27119e(0x201)](a0_0x27119e(0x5d4),(_0x358767,_0x5f1733)=>{let _0x2e59b6=ro();_0x5f1733['json'](_0x2e59b6);})[a0_0x27119e(0x201)]('/',(_0x12443b,_0xd0e6ca)=>{const _0x2bf4ef=a0_0x27119e;let _0x1b62b4=y[_0x2bf4ef(0x201)](_0x2bf4ef(0x429)),_0x4c54e0=_0x1b62b4&&_0x1b62b4[_0x2bf4ef(0x65f)][_0x2bf4ef(0x29e)]('/')[0x4];if(_0x4c54e0){let _0x156613=encodeURIComponent(_0x2bf4ef(0x1c1)+_0x4c54e0);_0xd0e6ca[_0x2bf4ef(0x5e5)](_0x2bf4ef(0x48a)+_0x156613);}else _0xd0e6ca[_0x2bf4ef(0x5e5)]('https://uazapi-plugin.bubbleapps.io/');})[a0_0x27119e(0x318)](a0_0x27119e(0xf4),...pe,async(_0x546c0f,_0x18fff3)=>{const _0x273c9e=a0_0x27119e;try{console[_0x273c9e(0x502)](_0x273c9e(0x61c)),_0x18fff3[_0x273c9e(0x49d)](0xc8)['json']({'message':'API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos'}),_0x18fff3['on'](_0x273c9e(0x2e4),()=>process[_0x273c9e(0x3de)](0x0));}catch(_0x2d0b0c){console[_0x273c9e(0x258)]('Erro\x20ao\x20tentar\x20encerrar\x20a\x20API',_0x2d0b0c),_0x18fff3[_0x273c9e(0x49d)](0x1f4)[_0x273c9e(0x141)]({'message':_0x273c9e(0x3c4)});}})['use']('/instance',new ft(y,...pe)[a0_0x27119e(0x2ee)],new Rt(fs)[a0_0x27119e(0x2ee)])[a0_0x27119e(0x6d9)]('/message',new Mt(...pe)[a0_0x27119e(0x2ee)])[a0_0x27119e(0x6d9)](a0_0x27119e(0x2a0),new ot(...pe)['router'])['use'](a0_0x27119e(0x260),new gt(...pe)[a0_0x27119e(0x2ee)])[a0_0x27119e(0x6d9)](a0_0x27119e(0x136),new It(...pe)[a0_0x27119e(0x2ee)])[a0_0x27119e(0x6d9)](a0_0x27119e(0x54c),new Dt(...pe)['router']);var g=class{constructor(..._0x54cdcf){const _0x19d5a3=a0_0x27119e;throw{'status':0x190,'error':'Bad\x20Request','message':_0x54cdcf[_0x19d5a3(0x57f)]>0x0?_0x54cdcf:void 0x0};}},ne=class{constructor(..._0x441381){const _0xac8fa7=a0_0x27119e;throw{'status':0x191,'error':'Unauthorized','message':_0x441381[_0xac8fa7(0x57f)]>0x0?_0x441381:void 0x0};}},re=class{constructor(..._0x4f5600){const _0x3fa918=a0_0x27119e;throw{'status':0x193,'error':_0x3fa918(0x292),'message':_0x4f5600[_0x3fa918(0x57f)]>0x0?_0x4f5600:void 0x0};}},x=class{constructor(..._0x494d56){const _0x31fd4c=a0_0x27119e;throw{'status':0x194,'error':'Not\x20Found','message':_0x494d56[_0x31fd4c(0x57f)]>0x0?_0x494d56:void 0x0};}},A=class{constructor(..._0x3f3c82){const _0x215197=a0_0x27119e;throw{'status':0x1f4,'error':'Internal\x20Server\x20Error','message':_0x3f3c82[_0x215197(0x57f)]>0x0?_0x3f3c82:void 0x0};}},ge=require(a0_0x27119e(0x6b3));async function Es(_0x2ebfbf){const _0x43c032=a0_0x27119e;let _0x2a6d33=new C(Es['name']),_0x5437c2=M[_0x43c032(0x4ae)](),_0x2ed39a=_0x5437c2['db'](y[_0x43c032(0x201)]('DATABASE')[_0x43c032(0x1e9)]['DB_PREFIX_NAME']+_0x43c032(0x4d0))[_0x43c032(0x526)](_0x2ebfbf),_0x47355d=async(_0x57016a,_0x5c049e)=>{const _0x4cafa5=_0x43c032;try{return await _0x5437c2['connect'](),await _0x2ed39a[_0x4cafa5(0x6cd)]({'_id':_0x5c049e},JSON['parse'](JSON['stringify'](_0x57016a,ge['BufferJSON'][_0x4cafa5(0x643)])),{'upsert':!0x0});}catch{}},_0x58c924=async _0x4a76f5=>{const _0x3fc21f=_0x43c032;try{await _0x5437c2[_0x3fc21f(0x125)]();let _0xca4186=await _0x2ed39a[_0x3fc21f(0x27b)]({'_id':_0x4a76f5}),_0x42c130=JSON[_0x3fc21f(0x5f2)](_0xca4186);return JSON[_0x3fc21f(0x279)](_0x42c130,ge[_0x3fc21f(0x59f)]['reviver']);}catch{}},_0x3ba517=async _0x484231=>{const _0x10b4a2=_0x43c032;try{return await _0x5437c2[_0x10b4a2(0x125)](),await _0x2ed39a['deleteOne']({'_id':_0x484231});}catch{}},_0x242363=await _0x58c924('creds')||(0x0,ge['initAuthCreds'])();return{'state':{'creds':_0x242363,'keys':{'get':async(_0x41bdbe,_0x3684a5)=>{const _0x2fe239=_0x43c032;let _0x2bdb8b={};return await Promise[_0x2fe239(0x149)](_0x3684a5['map'](async _0x16a59c=>{const _0x583540=_0x2fe239;let _0x217b0e=await _0x58c924(_0x41bdbe+'-'+_0x16a59c);_0x41bdbe===_0x583540(0x682)&&_0x217b0e&&(_0x217b0e=ge['proto'][_0x583540(0x155)][_0x583540(0x612)][_0x583540(0x2b3)](_0x217b0e)),_0x2bdb8b[_0x16a59c]=_0x217b0e;})),_0x2bdb8b;},'set':async _0x433603=>{const _0x13128c=_0x43c032;let _0x32f519=[];for(let _0x20d47c in _0x433603)for(let _0x3c7861 in _0x433603[_0x20d47c]){let _0x4529c8=_0x433603[_0x20d47c][_0x3c7861],_0x243d97=_0x20d47c+'-'+_0x3c7861;_0x32f519[_0x13128c(0x461)](_0x4529c8?_0x47355d(_0x4529c8,_0x243d97):_0x3ba517(_0x243d97));}await Promise[_0x13128c(0x149)](_0x32f519);}}},'saveCreds':async()=>_0x47355d(_0x242363,_0x43c032(0x552))};}var Cs=T(require(a0_0x27119e(0x6a1))),Ts=T(require('node-cache')),$t=require(a0_0x27119e(0x6b3)),lo=require(a0_0x27119e(0x48d)),xt=require('@whiskeysockets/baileys'),_t;function pi(_0xffa9df){const _0x4b81e9=a0_0x27119e;return _t||(_t=(0x0,lo[_0x4b81e9(0x295)])({'url':_0xffa9df[_0x4b81e9(0x454)]}),_t[_0x4b81e9(0x125)]()),_t;}var ye=class c{constructor(_0x119a1f,_0xd7b7c1){const _0x31026c=a0_0x27119e;this[_0x31026c(0x425)]=_0x119a1f,this['instanceName']=_0xd7b7c1,this[_0x31026c(0x6cb)]=new C(c['name']),this[_0x31026c(0x18c)]=pi(_0x119a1f);}set['reference'](_0x518d87){const _0x20db55=a0_0x27119e;this[_0x20db55(0x492)]=_0x518d87;}async[a0_0x27119e(0xf1)](){const _0x3e00db=a0_0x27119e;try{return await this[_0x3e00db(0x18c)]['sendCommand'](['keys',this['redisEnv'][_0x3e00db(0x438)]+':*']);}catch(_0x415ece){this[_0x3e00db(0x6cb)][_0x3e00db(0x258)](_0x415ece);}}async[a0_0x27119e(0x2c6)](_0x58302a,_0x4e4fa9){const _0x205959=a0_0x27119e;try{let _0x1ae058=JSON['stringify'](_0x4e4fa9,xt['BufferJSON'][_0x205959(0x643)]);return await this[_0x205959(0x18c)][_0x205959(0x575)](this[_0x205959(0x425)][_0x205959(0x438)]+':'+this[_0x205959(0x492)],_0x58302a,_0x1ae058);}catch(_0xbe710){this[_0x205959(0x6cb)][_0x205959(0x258)](_0xbe710);}}async[a0_0x27119e(0x5d3)](){const _0x191f40=a0_0x27119e;try{let _0x4d748c=await this[_0x191f40(0x18c)][_0x191f40(0x224)](this[_0x191f40(0x425)][_0x191f40(0x438)]+':'+this[_0x191f40(0x492)]);if(_0x4d748c){for(let _0x4de923 in _0x4d748c)Object[_0x191f40(0x32a)]['hasOwnProperty'][_0x191f40(0x31e)](_0x4d748c,_0x4de923)&&(_0x4d748c[_0x4de923]=JSON[_0x191f40(0x279)](_0x4d748c[_0x4de923],xt['BufferJSON'][_0x191f40(0x1ab)]));return _0x4d748c;}}catch(_0x431598){this[_0x191f40(0x6cb)]['error'](_0x431598);}}async[a0_0x27119e(0x4c2)](_0x4fd8b1){const _0x3bd7e1=a0_0x27119e;try{let _0x2800c7=await this['client'][_0x3bd7e1(0x622)](this[_0x3bd7e1(0x425)][_0x3bd7e1(0x438)]+':'+this[_0x3bd7e1(0x492)],_0x4fd8b1);if(_0x2800c7)return JSON[_0x3bd7e1(0x279)](_0x2800c7,xt[_0x3bd7e1(0x59f)][_0x3bd7e1(0x1ab)]);}catch(_0x560cb7){this[_0x3bd7e1(0x6cb)][_0x3bd7e1(0x258)](_0x560cb7);}}async[a0_0x27119e(0x686)](_0x34f56b){const _0x377129=a0_0x27119e;try{return await this[_0x377129(0x18c)][_0x377129(0x5af)](this['redisEnv'][_0x377129(0x438)]+':'+this[_0x377129(0x492)],_0x34f56b);}catch(_0xecba38){this[_0x377129(0x6cb)][_0x377129(0x258)](_0xecba38);}}async['delAll'](_0x63cf67){const _0x16ca22=a0_0x27119e;try{return await this[_0x16ca22(0x18c)][_0x16ca22(0x45f)](_0x63cf67||this['redisEnv'][_0x16ca22(0x438)]+':'+this['instanceName']);}catch(_0x3ed076){this[_0x16ca22(0x6cb)][_0x16ca22(0x258)](_0x3ed076);}}};async function vs(_0x2aa2d5,_0x103d3b){const _0x520242=a0_0x27119e;let _0x5adc5f=new C(vs[_0x520242(0x3c5)]),_0x24a078=new ye(_0x2aa2d5,_0x103d3b),_0x4036be=async(_0x38a065,_0x54d96f)=>{const _0xab692e=_0x520242;try{return await _0x24a078[_0xab692e(0x2c6)](_0x54d96f,_0x38a065);}catch(_0x5b5188){return _0x5adc5f['error']({'localError':'writeData','error':_0x5b5188});}},_0x3edd78=async _0x54a97c=>{const _0x5af57c=_0x520242;try{return await _0x24a078['readData'](_0x54a97c);}catch(_0x2cbe32){_0x5adc5f[_0x5af57c(0x258)]({'readData':'writeData','error':_0x2cbe32});return;}},_0x52a1c3=async _0x3658f7=>{const _0x2951b1=_0x520242;try{return await _0x24a078[_0x2951b1(0x686)](_0x3658f7);}catch(_0x4ef0c3){_0x5adc5f[_0x2951b1(0x258)]({'readData':_0x2951b1(0x686),'error':_0x4ef0c3});}},_0x3aeab8=await _0x3edd78(_0x520242(0x552))||(0x0,$t[_0x520242(0x4c9)])();return{'state':{'creds':_0x3aeab8,'keys':{'get':async(_0x431a3f,_0xc6b5aa)=>{let _0x58659c={};return await Promise['all'](_0xc6b5aa['map'](async _0x538f51=>{const _0x2db740=a0_0x2b59;let _0x186f90=await _0x3edd78(_0x431a3f+'-'+_0x538f51);_0x431a3f===_0x2db740(0x682)&&_0x186f90&&(_0x186f90=$t['proto']['Message']['AppStateSyncKeyData']['fromObject'](_0x186f90)),_0x58659c[_0x538f51]=_0x186f90;})),_0x58659c;},'set':async _0x4c450e=>{const _0x3b000d=_0x520242;let _0x23f610=[];for(let _0x32b282 in _0x4c450e)for(let _0x24e109 in _0x4c450e[_0x32b282]){let _0x651dfb=_0x4c450e[_0x32b282][_0x24e109],_0x2e1dbd=_0x32b282+'-'+_0x24e109;_0x23f610['push'](_0x651dfb?await _0x4036be(_0x651dfb,_0x2e1dbd):await _0x52a1c3(_0x2e1dbd));}await Promise[_0x3b000d(0x149)](_0x23f610);}}},'saveCreds':async()=>await _0x4036be(_0x3aeab8,_0x520242(0x552))};}var _=T(require('fs')),Lt=require(a0_0x27119e(0x401)),Ut=T(require(a0_0x27119e(0x4c0)));function W(_0x4bb8cb){const _0x47589e=a0_0x27119e;if(_0x4bb8cb[_0x47589e(0x1cf)]||_0x4bb8cb[_0x47589e(0x6a9)]){let _0x4dab94=_0x4bb8cb['viewOnceMessage']?_0x4bb8cb['viewOnceMessage'][_0x47589e(0x26e)]:_0x4bb8cb[_0x47589e(0x6a9)][_0x47589e(0x26e)];return(0x0,w[_0x47589e(0x314)])(_0x4dab94);}return _0x4bb8cb['pollCreationMessageV3']?'pollCreationMessageV3':_0x4bb8cb[_0x47589e(0x57c)]?_0x47589e(0x57c):(0x0,w[_0x47589e(0x314)])(_0x4bb8cb);}var Se=class c{constructor(_0x7caa99,_0x57a996,_0x5ba11c){const _0x2a9f60=a0_0x27119e;this[_0x2a9f60(0x593)]=_0x7caa99,this[_0x2a9f60(0x64d)]=_0x57a996,this[_0x2a9f60(0x28a)]=_0x5ba11c,this['AutomateSystem']=null,this[_0x2a9f60(0x6cb)]=new C(c[_0x2a9f60(0x3c5)]),this[_0x2a9f60(0x333)]={},this[_0x2a9f60(0x6ca)]={},this[_0x2a9f60(0x17b)]={'state':_0x2a9f60(0x128)},this[_0x2a9f60(0x47c)]=(0x0,$[_0x2a9f60(0x3eb)])(Y,_0x2a9f60(0x2f4)),this[_0x2a9f60(0x1f4)]=new Ts[(_0x2a9f60(0x2c9))](),this[_0x2a9f60(0x255)]=new Ts[(_0x2a9f60(0x2c9))](),this[_0x2a9f60(0x30a)]=!0x1,this[_0x2a9f60(0x5b3)]={'status.instance':_0x2a9f60(0x32e),'qrcode.updated':_0x2a9f60(0x196),'messages.upsert':_0x2a9f60(0x1e0),'messages.update':_0x2a9f60(0x479),'send.message':_0x2a9f60(0x1e0),'group.upsert':_0x2a9f60(0x145),'group.update':'/wa-groups','group-participants.update':_0x2a9f60(0x145),'connection.update':'/wa-connection-update','messages.set':_0x2a9f60(0x1e0),'contacts.set':'/wa-contacts','contacts.upsert':_0x2a9f60(0x51f),'contacts.update':'/wa-contacts','presence.update':_0x2a9f60(0x361),'chats.set':_0x2a9f60(0x158),'chats.update':_0x2a9f60(0x158),'chats.upsert':_0x2a9f60(0x158),'chats.delete':_0x2a9f60(0x158)},this[_0x2a9f60(0x329)]=0x0,this[_0x2a9f60(0x529)]=[],this['MAX_RECONNECT_ATTEMPTS']=0xf,this[_0x2a9f60(0x3fc)]=0x7530,this[_0x2a9f60(0x5db)]=!0x1,this[_0x2a9f60(0x5d2)]={'chats.upsert':async(_0x3e88df,_0x9b6277)=>{const _0x156808=_0x2a9f60;let _0x39550c=await this[_0x156808(0x28a)][_0x156808(0x610)]['find']({'where':{'owner':this[_0x156808(0x333)][_0x156808(0x106)]}}),_0x4fb0f9=[];for await(let _0x150710 of _0x3e88df)_0x39550c[_0x156808(0x36e)](_0x400831=>_0x400831['id']===_0x150710['id'])||_0x4fb0f9[_0x156808(0x461)]({'id':_0x150710['id'],'owner':this['instance'][_0x156808(0x106)],'group':_0x150710['id'][_0x156808(0x13a)](_0x156808(0x46e)),'name':_0x150710[_0x156808(0x3c5)]||_0x150710['displayName']||null,'contactname':null,'lastmsg':_0x150710['conversationTimestamp']&&_0x150710[_0x156808(0x596)][_0x156808(0x3cb)]()[_0x156808(0x57f)]<0xd?_0x150710[_0x156808(0x596)]*0x3e8:_0x150710[_0x156808(0x596)]||null,'archived':_0x150710[_0x156808(0x2de)]||!0x1,'unreadcount':_0x150710[_0x156808(0x535)]||0x0});await this['sendDataWebhook'](_0x156808(0x44b),_0x4fb0f9);},'chats.update':async(_0x4537fe,_0x4b0ffa)=>{const _0x1c5cc8=_0x2a9f60;for(let _0x2362f0 of _0x4537fe){let _0x4275b3={'id':_0x2362f0['id'],'owner':this[_0x1c5cc8(0x333)][_0x1c5cc8(0x106)],'group':_0x2362f0['id'][_0x1c5cc8(0x13a)](_0x1c5cc8(0x46e)),'name':_0x2362f0['name']||_0x2362f0[_0x1c5cc8(0x11a)],'archived':_0x2362f0['archived']},_0x2d69c3=!0x1,_0x478151={'id':_0x2362f0['id'],'owner':this[_0x1c5cc8(0x333)][_0x1c5cc8(0x106)]},_0x42a39b={};_0x4275b3[_0x1c5cc8(0x2de)]!=null&&(this[_0x1c5cc8(0x6cb)][_0x1c5cc8(0x234)](this[_0x1c5cc8(0x492)]+'\x20('+this[_0x1c5cc8(0x333)][_0x1c5cc8(0x106)]+_0x1c5cc8(0x39b)+_0x2362f0['archived']),_0x2d69c3=!0x0,_0x42a39b[_0x1c5cc8(0x2de)]=_0x2362f0[_0x1c5cc8(0x2de)]),_0x2362f0[_0x1c5cc8(0x3c5)]!=null&&(this[_0x1c5cc8(0x6cb)][_0x1c5cc8(0x234)](this[_0x1c5cc8(0x492)]+'\x20('+this[_0x1c5cc8(0x333)][_0x1c5cc8(0x106)]+_0x1c5cc8(0x247)+_0x2362f0[_0x1c5cc8(0x3c5)]),_0x2d69c3=!0x0,_0x42a39b[_0x1c5cc8(0x3c5)]=_0x2362f0[_0x1c5cc8(0x3c5)]),_0x2362f0[_0x1c5cc8(0x11a)]!=null&&(this[_0x1c5cc8(0x6cb)][_0x1c5cc8(0x234)](this[_0x1c5cc8(0x492)]+'\x20('+this[_0x1c5cc8(0x333)][_0x1c5cc8(0x106)]+_0x1c5cc8(0x48c)+_0x2362f0[_0x1c5cc8(0x11a)]),_0x2d69c3=!0x0,_0x42a39b[_0x1c5cc8(0x3c5)]=_0x2362f0['displayName']);let _0x2e0393;_0x2d69c3&&_0x4b0ffa[_0x1c5cc8(0x371)]&&(_0x2e0393=await D['findOneAndUpdate'](_0x478151,{'$set':_0x42a39b},{'new':!0x0})),_0x2e0393&&q(this[_0x1c5cc8(0x492)],'chats',{'chat':_0x2e0393});}},'chats.delete':async _0x5a4cf9=>{const _0x31fb60=_0x2a9f60;await this[_0x31fb60(0x324)](_0x31fb60(0x28e),[..._0x5a4cf9]);}},this[_0x2a9f60(0x366)]={'contacts.upsert':async(_0x3c71f0,_0x35b737)=>{const _0x1baff4=_0x2a9f60;let _0x1d3588=await this[_0x1baff4(0x28a)]['contact'][_0x1baff4(0x36e)]({'where':{'owner':this['instance'][_0x1baff4(0x106)]}}),_0x3a4465=[];for await(let _0x51844e of _0x3c71f0)_0x1d3588[_0x1baff4(0x36e)](_0x13fdd6=>_0x13fdd6['id']===_0x51844e['id'])||_0x3a4465[_0x1baff4(0x461)]({'id':_0x51844e['id'],'pushName':_0x51844e?.[_0x1baff4(0x3c5)]||_0x51844e?.['verifiedName'],'owner':this[_0x1baff4(0x333)][_0x1baff4(0x106)]});await this[_0x1baff4(0x324)]('contacts.upsert',_0x3a4465),await this[_0x1baff4(0x28a)][_0x1baff4(0x368)][_0x1baff4(0x315)](_0x3a4465,_0x35b737['ENABLED']);let _0x4a65d1=[];for(let _0x2afff of _0x3a4465){let [_0x3d1fd3,_0x4e53fa]=await Promise[_0x1baff4(0x149)]([this[_0x1baff4(0x160)](_0x2afff['id']),(await this['getStatus'](_0x2afff['id']))[_0x1baff4(0x49d)]]);_0x4a65d1['push']({..._0x2afff,'profilePictureUrl':_0x3d1fd3[_0x1baff4(0x3f3)],'status':_0x4e53fa});}await this[_0x1baff4(0x28a)][_0x1baff4(0x368)]['update'](_0x4a65d1,_0x35b737['ENABLED']),await this[_0x1baff4(0x604)]();},'contacts.update':async(_0x4c0e82,_0x7b2a5b)=>{const _0x18e649=_0x2a9f60;let _0xbc02cc=[];for await(let _0x4d6689 of _0x4c0e82)_0xbc02cc[_0x18e649(0x461)]({'id':_0x4d6689['id'],'pushName':_0x4d6689?.['name']??_0x4d6689?.['verifiedName'],'profilePictureUrl':(await this[_0x18e649(0x160)](_0x4d6689['id']))[_0x18e649(0x3f3)],'owner':this[_0x18e649(0x333)][_0x18e649(0x106)]});await this['sendDataWebhook'](_0x18e649(0x5d8),_0xbc02cc);}},this[_0x2a9f60(0x3f9)]={'messaging-history.set':async({messages:_0x3b4a27,chats:_0x5dfd4c,isLatest:_0x3316ce},_0x59e9d2)=>{const _0x3d18f1=_0x2a9f60;if(_0x3316ce){let _0x2333a7=await Promise[_0x3d18f1(0x149)](_0x5dfd4c[_0x3d18f1(0x2c7)](async _0xb05eca=>({'id':_0xb05eca['id'],'owner':this[_0x3d18f1(0x333)][_0x3d18f1(0x106)],'group':_0xb05eca['id']['endsWith'](_0x3d18f1(0x46e)),'name':_0xb05eca[_0x3d18f1(0x3c5)]||_0xb05eca[_0x3d18f1(0x11a)]||null,'contactname':null,'imagechat':(await this['profilePicture'](_0xb05eca['id']))[_0x3d18f1(0x3f3)],'lastmsg':_0xb05eca[_0x3d18f1(0x596)]&&_0xb05eca[_0x3d18f1(0x596)][_0x3d18f1(0x3cb)]()[_0x3d18f1(0x57f)]<0xd?_0xb05eca[_0x3d18f1(0x596)]*0x3e8:_0xb05eca[_0x3d18f1(0x596)]||null,'archived':_0xb05eca[_0x3d18f1(0x2de)]||!0x1,'unreadcount':_0xb05eca[_0x3d18f1(0x535)]||0x0})));await this[_0x3d18f1(0x324)](_0x3d18f1(0x5f3),_0x2333a7),await this['upsertChats'](_0x2333a7,_0x59e9d2),await this[_0x3d18f1(0x604)]();}let _0x55575c=[],_0x598fab=Date['now']()-0x7*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x48d999]of Object['entries'](_0x3b4a27)){if(_0x48d999[_0x3d18f1(0x26e)]?.[_0x3d18f1(0x301)]||_0x48d999['message']?.[_0x3d18f1(0x3ed)]||!_0x48d999[_0x3d18f1(0x26e)]||_0x48d999[_0x3d18f1(0x4dc)][_0x3d18f1(0x3f7)]===_0x3d18f1(0x26f)||(Cs[_0x3d18f1(0x2c9)][_0x3d18f1(0x588)](_0x48d999?.[_0x3d18f1(0x602)])&&(_0x48d999[_0x3d18f1(0x602)]=_0x48d999['messageTimestamp']?.['toNumber']()),_0x48d999[_0x3d18f1(0x602)]&&_0x48d999[_0x3d18f1(0x602)][_0x3d18f1(0x3cb)]()['length']<0xd&&(_0x48d999['messageTimestamp']=_0x48d999['messageTimestamp']*0x3e8),_0x48d999[_0x3d18f1(0x602)]<_0x598fab))continue;let {message_normalized:_0x797e4f}=this[_0x3d18f1(0x651)](_0x48d999[_0x3d18f1(0x26e)],W(_0x48d999[_0x3d18f1(0x26e)]),null);_0x55575c[_0x3d18f1(0x461)]({'key':_0x48d999[_0x3d18f1(0x4dc)],'pushName':_0x48d999['pushName'],'participant':_0x48d999[_0x3d18f1(0x1ae)],'message':{..._0x48d999[_0x3d18f1(0x26e)]},'messageType':W(_0x48d999[_0x3d18f1(0x26e)]),'message_normalized':{'key':_0x48d999['key'],'pushName':_0x48d999[_0x3d18f1(0x571)],'messageTimestamp':_0x48d999[_0x3d18f1(0x602)],..._0x797e4f},'messageTimestamp':_0x48d999[_0x3d18f1(0x602)],'owner':this[_0x3d18f1(0x333)][_0x3d18f1(0x106)]});}_0x59e9d2[_0x3d18f1(0x371)]&&_0x55575c[_0x3d18f1(0x57f)]>0x0&&(this[_0x3d18f1(0x6cb)][_0x3d18f1(0x234)](this['instanceName']+'\x20('+this[_0x3d18f1(0x333)][_0x3d18f1(0x106)]+_0x3d18f1(0x611)+_0x55575c['length']+'\x20mensagens\x20de\x20'+this[_0x3d18f1(0x333)]['wuid']+_0x3d18f1(0x1cc)),await this['repository'][_0x3d18f1(0x26e)][_0x3d18f1(0x315)]([..._0x55575c],_0x59e9d2[_0x3d18f1(0x371)])),this['sendDataWebhook'](_0x3d18f1(0x38b),[..._0x55575c]),_0x3b4a27=void 0x0;},'messages.upsert':async({messages:_0x5db2c7,type:_0x5720a1},_0x27cf4c)=>{const _0x311899=_0x2a9f60;let _0x510f4e=_0x5db2c7[0x0];if(_0x5720a1!==_0x311899(0x668)||!_0x510f4e?.[_0x311899(0x26e)]||_0x510f4e[_0x311899(0x26e)]?.[_0x311899(0x301)]||_0x510f4e[_0x311899(0x26e)][_0x311899(0x3ed)]||_0x510f4e[_0x311899(0x4dc)]['remoteJid']===_0x311899(0x26f))return;let _0x70984a=null,_0x429875=null;try{_0x70984a=await this['processPollUpdateMessage'](_0x510f4e),_0x429875=_0x70984a?_0x70984a[_0x311899(0x3eb)](','):null;}catch(_0x3e3022){this[_0x311899(0x6cb)][_0x311899(0x234)](this[_0x311899(0x492)]+'\x20('+this[_0x311899(0x333)][_0x311899(0x106)]+_0x311899(0x611)+_0x3e3022[_0x311899(0x26e)]),_0x429875='error\x20get\x20vote';}if(this['client'][_0x311899(0x635)](_0x311899(0x248)),Cs[_0x311899(0x2c9)][_0x311899(0x588)](_0x510f4e[_0x311899(0x602)])&&(_0x510f4e['messageTimestamp']=_0x510f4e[_0x311899(0x602)]?.['toNumber']()),this[_0x311899(0x6ca)]?.[_0x311899(0x357)]&&_0x510f4e[_0x311899(0x4dc)][_0x311899(0x3f7)][_0x311899(0x6ad)](_0x311899(0x46e))){this[_0x311899(0x6cb)][_0x311899(0x234)](_0x311899(0x245));return;}_0x510f4e[_0x311899(0x602)]&&_0x510f4e[_0x311899(0x602)][_0x311899(0x3cb)]()['length']<0xd&&(_0x510f4e[_0x311899(0x602)]=_0x510f4e[_0x311899(0x602)]*0x3e8);let _0x59202d=_0x510f4e[_0x311899(0x26e)],{messageContent:_0xfca5b4,message_normalized:_0x328a86}=this[_0x311899(0x651)](_0x59202d,W(_0x510f4e['message']),_0x429875);_0xfca5b4||console[_0x311899(0x258)]('Mensagem\x20não\x20suportada');let _0x133dcc={'key':_0x510f4e[_0x311899(0x4dc)],'pushName':_0x510f4e[_0x311899(0x571)],'message':{..._0x510f4e[_0x311899(0x26e)]},'messageType':W(_0x510f4e['message']),'message_normalized':{'key':_0x510f4e[_0x311899(0x4dc)],'pushName':_0x510f4e['pushName'],'messageTimestamp':_0x510f4e[_0x311899(0x602)],'source':(0x0,w[_0x311899(0x1f5)])(_0x510f4e[_0x311899(0x4dc)]['id']),..._0x328a86},'messageTimestamp':_0x510f4e[_0x311899(0x602)],'owner':this[_0x311899(0x333)][_0x311899(0x106)]};this['logger'][_0x311899(0x502)](_0x133dcc),await this[_0x311899(0x28a)][_0x311899(0x26e)]['insert']([_0x133dcc],_0x27cf4c[_0x311899(0x371)]),await this['sendDataWebhook'](_0x311899(0x3fb),_0x133dcc),q(this[_0x311899(0x492)],_0x311899(0x231),{'message':_0x133dcc}),_0x510f4e['key'][_0x311899(0x3f7)]!==_0x311899(0x26f)&&await this[_0x311899(0x5d5)](_0x27cf4c,_0x133dcc,_0x311899(0x146));},'messages.update':async(_0x37294e,_0x2e5d35)=>{const _0x323f3c=_0x2a9f60;let _0x3b8c81={0x0:_0x323f3c(0x386),0x1:_0x323f3c(0x2a9),0x2:_0x323f3c(0x14f),0x3:_0x323f3c(0x515),0x4:_0x323f3c(0x42a),0x5:_0x323f3c(0x55b)};for await(let {key:_0x38f4c0,update:_0x169789}of _0x37294e){if(this[_0x323f3c(0x6ca)]?.[_0x323f3c(0x357)]&&_0x38f4c0[_0x323f3c(0x3f7)][_0x323f3c(0x6ad)](_0x323f3c(0x46e))){this[_0x323f3c(0x6cb)][_0x323f3c(0x234)](_0x323f3c(0x245));return;}if(_0x38f4c0['remoteJid']!=='status@broadcast'){let _0x147322=Date[_0x323f3c(0x541)](),_0x34be02;_0x169789[_0x323f3c(0x26e)]===null&&_0x169789[_0x323f3c(0x49d)]===void 0x0?_0x34be02='DELETED':_0x34be02=_0x3b8c81[_0x169789['status']];let _0x5a6cda=_0x38f4c0[_0x323f3c(0x3f7)][_0x323f3c(0x363)](/:\d{1,2}@/g,'@'),_0x96903f={..._0x38f4c0,'remoteJid':_0x5a6cda,'status':_0x34be02,'datetime':_0x147322,'owner':this[_0x323f3c(0x333)][_0x323f3c(0x106)]};await this[_0x323f3c(0x324)]('messages.update',_0x96903f),await this[_0x323f3c(0x28a)]['messageUpdate'][_0x323f3c(0x315)]([_0x96903f],_0x2e5d35[_0x323f3c(0x371)]),await this['updateMessage'](_0x38f4c0,_0x5a6cda,_0x96903f);}}}},this['groupHandler']={'groups.upsert':_0xa47587=>{const _0xa51604=_0x2a9f60;this[_0xa51604(0x324)](_0xa51604(0x67a),_0xa47587);},'groups.update':_0x999567=>{const _0x151c8f=_0x2a9f60;this[_0x151c8f(0x324)](_0x151c8f(0x183),_0x999567);},'group-participants.update':_0x32615a=>{const _0x40640f=_0x2a9f60;this[_0x40640f(0x324)](_0x40640f(0x256),_0x32615a);}},this[_0x2a9f60(0x60f)]=async _0x52a6dd=>{const _0x5be45a=_0x2a9f60;if(_0x52a6dd['message']?.[_0x5be45a(0x5dd)]){let _0x2f56a0=await this['getMessage'](_0x52a6dd[_0x5be45a(0x26e)]['pollUpdateMessage'][_0x5be45a(0x11d)],!0x0);if(_0x2f56a0){let _0x550239=_0x2f56a0[_0x5be45a(0x4dc)][_0x5be45a(0x170)]?this['instance']['wuid']+_0x5be45a(0x127):_0x2f56a0[_0x5be45a(0x4dc)][_0x5be45a(0x1ae)]||_0x2f56a0['key'][_0x5be45a(0x3f7)],_0x2c7ba1=_0x2f56a0[_0x5be45a(0x4dc)]['id'],_0x395930=_0x2f56a0[_0x5be45a(0x26e)],_0x1e8b7c=Buffer[_0x5be45a(0x664)](_0x395930[_0x5be45a(0x374)]['messageSecret'][_0x5be45a(0x3cb)](_0x5be45a(0x2ff)),_0x5be45a(0x2ff)),_0x83801e=(0x0,w['decryptPollVote'])(_0x52a6dd[_0x5be45a(0x26e)][_0x5be45a(0x5dd)]['vote'],{'pollCreatorJid':_0x550239,'pollMsgId':_0x2c7ba1,'pollEncKey':_0x1e8b7c,'voterJid':_0x52a6dd['key']['fromMe']?this[_0x5be45a(0x333)][_0x5be45a(0x106)]+_0x5be45a(0x127):_0x52a6dd[_0x5be45a(0x4dc)][_0x5be45a(0x3f7)][_0x5be45a(0x13a)](_0x5be45a(0x273))?_0x52a6dd[_0x5be45a(0x4dc)][_0x5be45a(0x1ae)]:_0x52a6dd[_0x5be45a(0x4dc)][_0x5be45a(0x3f7)]}),_0x81a5f9=[],_0x2c0a28=_0x83801e['selectedOptions']['map'](_0x118b02=>Buffer[_0x5be45a(0x664)](_0x118b02)[_0x5be45a(0x3cb)](_0x5be45a(0x2ff)));for(let {optionName:_0x2cb5b2}of _0x395930[_0x5be45a(0x613)]?.[_0x5be45a(0x16b)]||_0x395930[_0x5be45a(0x2db)]?.['options']||_0x395930[_0x5be45a(0x57c)]?.[_0x5be45a(0x16b)])_0x2c0a28['indexOf']((0x0,w[_0x5be45a(0x5c4)])(Buffer[_0x5be45a(0x664)](_0x2cb5b2))[_0x5be45a(0x3cb)](_0x5be45a(0x2ff)))>-0x1&&_0x81a5f9[_0x5be45a(0x461)](_0x2cb5b2);return _0x81a5f9;}}return null;},this[_0x2a9f60(0x651)]=(_0x361c50,_0x56ccd3,_0x3a37bc)=>{const _0x4ae91f=_0x2a9f60;let _0x465793=_0x56ccd3?_0x361c50[_0x56ccd3]:void 0x0,_0x4a4334={},_0x28dd53=null,_0x2ef443=null,_0x52df87=null;if(_0x361c50['viewOnceMessageV2']?_0x465793=_0x361c50[_0x4ae91f(0x6a9)][_0x4ae91f(0x26e)][_0x56ccd3]:_0x361c50['viewOnceMessage']?_0x465793=_0x361c50[_0x4ae91f(0x1cf)][_0x4ae91f(0x26e)][_0x56ccd3]:_0x361c50[_0x4ae91f(0x415)]?_0x465793=_0x361c50[_0x4ae91f(0x415)][_0x4ae91f(0x26e)][_0x56ccd3]:_0x361c50['editedMessage']?.[_0x4ae91f(0x26e)]?.[_0x4ae91f(0x301)]?.[_0x4ae91f(0x4f9)]?(_0x28dd53=_0x361c50[_0x4ae91f(0x4f9)][_0x4ae91f(0x26e)][_0x4ae91f(0x301)][_0x4ae91f(0x4dc)]['id'],_0x361c50[_0x4ae91f(0x4f9)][_0x4ae91f(0x26e)][_0x4ae91f(0x301)]['editedMessage'][_0x4ae91f(0x13f)]?_0x465793=_0x361c50[_0x4ae91f(0x4f9)]['message'][_0x4ae91f(0x301)]['editedMessage'][_0x4ae91f(0x13f)]:_0x361c50['editedMessage']['message'][_0x4ae91f(0x301)][_0x4ae91f(0x4f9)][_0x4ae91f(0x1a4)]?_0x465793=_0x361c50[_0x4ae91f(0x4f9)]['message'][_0x4ae91f(0x301)][_0x4ae91f(0x4f9)][_0x4ae91f(0x1a4)][_0x4ae91f(0x178)]:_0x361c50['editedMessage'][_0x4ae91f(0x26e)][_0x4ae91f(0x301)][_0x4ae91f(0x4f9)][_0x4ae91f(0x269)]?_0x465793=_0x361c50['editedMessage'][_0x4ae91f(0x26e)][_0x4ae91f(0x301)][_0x4ae91f(0x4f9)]['videoMessage'][_0x4ae91f(0x178)]:_0x361c50['editedMessage']['message'][_0x4ae91f(0x301)][_0x4ae91f(0x4f9)][_0x4ae91f(0x6a5)]?_0x465793=_0x361c50[_0x4ae91f(0x4f9)][_0x4ae91f(0x26e)]['protocolMessage'][_0x4ae91f(0x4f9)]['documentWithCaptionMessage']['message']['documentMessage']['caption']:_0x465793=_0x361c50['editedMessage'][_0x4ae91f(0x26e)][_0x4ae91f(0x301)][_0x4ae91f(0x4f9)]):_0x465793=_0x361c50[_0x56ccd3],!_0x56ccd3||!_0x465793){console[_0x4ae91f(0x258)](_0x4ae91f(0x164),_0x361c50);return;}_0x361c50[_0x56ccd3]?.[_0x4ae91f(0x6d4)]?.['stanzaId']&&_0x361c50[_0x56ccd3]?.['contextInfo']?.['quotedMessage']&&(_0x2ef443=_0x361c50[_0x56ccd3][_0x4ae91f(0x6d4)][_0x4ae91f(0x6bb)]),_0x361c50[_0x4ae91f(0x650)]&&(_0x52df87=_0x361c50['reactionMessage'][_0x4ae91f(0x4dc)]['id']);let _0x1ff19d;if(_0x465793&&typeof _0x465793==_0x4ae91f(0x5f1)&&_0x4ae91f(0x11d)in _0x465793&&({pollCreationMessageKey:_0x1ff19d}=_0x465793),_0x56ccd3===_0x4ae91f(0x6a5)){let _0x10ab9d=_0x465793?.[_0x4ae91f(0x26e)]?.[_0x4ae91f(0x553)];_0x10ab9d&&(_0x465793=_0x10ab9d);}if(_0x56ccd3===_0x4ae91f(0x613)||_0x56ccd3==='pollCreationMessageV2'||_0x56ccd3==='pollCreationMessageV3'){let _0x40f535=_0x465793[_0x4ae91f(0x16b)][_0x4ae91f(0x2c7)](_0x14ee50=>_0x14ee50[_0x4ae91f(0x3a3)])[_0x4ae91f(0x3eb)]('|');_0x4a4334['convertedOptions']=_0x40f535;}let _0x4d2c72=_0x465793[_0x4ae91f(0x3c5)]||_0x465793[_0x4ae91f(0x178)]||_0x465793['conversation']||_0x465793[_0x4ae91f(0x11a)];if(_0x465793[_0x4ae91f(0x471)]){let _0x4d4f67=this['formatVCard'](JSON[_0x4ae91f(0x5f2)](_0x465793[_0x4ae91f(0x471)],null,0x2));_0x4d2c72=_0x4d2c72+'\x0a'+_0x4d4f67;}if(_0x465793){let {displayName:_0x23de8e,vcard:_0xab0753,contactVcard:_0x1bff40,name:_0x25ebee,caption:_0x21d0e7,conversation:_0x38458a,pollCreationMessageKey:_0x12ba4d,footerText:_0x554359,contentText:_0x860007,pageCount:_0x4b4070,headerType:_0x302fc7,isAvatar:_0x1171eb,isAnimated:_0x24d98c,fallbackLc:_0x4da1ce,fallbackLg:_0x53523a,namespace:_0x11cbf7,elementName:_0x3f3a5c,localizableParams:_0x547c24,viewOnce:_0x49aa3d,height:_0x1938a7,width:_0x3335ae,key:_0x25ddee,firstScanLength:_0x4859b2,firstScanSidecar:_0x2eeec7,gifPlayback:_0x262b2f,gifAttribution:_0x39a8d8,midQualityFileSha256:_0xcfe504,scansSidecar:_0x203d5b,streamingSidecar:_0x30a7ac,thumbnailHeight:_0x330ab4,thumbnailWidth:_0x31e50c,thumbnailEncSha256:_0x205667,thumbnailDirectPath:_0x31b4bc,canonicalUrl:_0xb0e36c,matchedText:_0x357ec1,previewType:_0x3d9eb5,thumbnailSha256:_0x2bea95,deviceListMetadataVersion:_0x2ce0c0,inviteLinkGroupTypeV2:_0x3016d9,interactiveAnnotations:_0x8ecb20,scanLengths:_0x1dd968,jpegThumbnail:_0xbf6164,url:_0x49d8fd,mediaKeyTimestamp:_0x14f865,waveform:_0x2ab719,stickerSentTs:_0x5c3396,firstFrameLength:_0x49fa67,fileEncSha256:_0x233bd8,contextInfo:_0x256231,firstFrameSidecar:_0x32e9be,directPath:_0x497b4e,fileSha256:_0x4e7bb8,mediaKey:_0x161f67,senderTimestampMs:_0x3d0ca1,..._0xb4b232}=_0x465793;typeof _0x465793==_0x4ae91f(0x2af)?_0x4a4334={'text':_0x465793,'type':_0x56ccd3||_0x4ae91f(0x13f),..._0x28dd53&&{'edited':_0x28dd53},..._0x2ef443&&{'quoted':_0x2ef443},..._0x52df87&&{'reaction':_0x52df87}}:_0x4a4334={'text':_0x4d2c72,..._0xb4b232,..._0x56ccd3===_0x4ae91f(0x5dd)?{'poll_id':_0x465793[_0x4ae91f(0x11d)]['id'],'vote':_0x3a37bc}:{},'type':_0x56ccd3,..._0x28dd53&&{'edited':_0x28dd53},..._0x2ef443&&{'quoted':_0x2ef443},..._0x52df87&&{'reaction':_0x52df87},...(_0x56ccd3===_0x4ae91f(0x613)||_0x56ccd3===_0x4ae91f(0x57c)||_0x56ccd3===_0x4ae91f(0x2db))&&{'convertedOptions':_0x4a4334['convertedOptions']}};}return{'messageType':_0x56ccd3,'messageContent':_0x465793,'message_normalized':_0x4a4334};},this[_0x2a9f60(0x58b)]=null,this[_0x2a9f60(0x16d)]=0x0,(this['cleanStore'](),this['instance'][_0x2a9f60(0x2e1)]={'count':0x0});}set[a0_0x27119e(0x492)](_0x5d43eb){const _0x356dc4=a0_0x27119e;if(!_0x5d43eb){this[_0x356dc4(0x333)][_0x356dc4(0x3c5)]=(0x0,po['v4'])();return;}this[_0x356dc4(0x333)][_0x356dc4(0x3c5)]=_0x5d43eb,this[_0x356dc4(0x324)](_0x356dc4(0x223),{'instance':this[_0x356dc4(0x333)][_0x356dc4(0x3c5)],'status':_0x356dc4(0x285)});}get[a0_0x27119e(0x492)](){const _0x6d232a=a0_0x27119e;return this[_0x6d232a(0x333)][_0x6d232a(0x3c5)];}get[a0_0x27119e(0x106)](){const _0x211e2f=a0_0x27119e;return this[_0x211e2f(0x333)][_0x211e2f(0x106)];}async['getProfileName'](){const _0x46d867=a0_0x27119e;let _0x1b94e0=this['client'][_0x46d867(0x2b9)]?.[_0x46d867(0x3c5)]??this[_0x46d867(0x18c)]['user']?.[_0x46d867(0x15d)];if(!_0x1b94e0){if(this['configService']['get'](_0x46d867(0x4b8))['ENABLED']){let _0x14f948=await M['getClient']()['db'](this[_0x46d867(0x593)][_0x46d867(0x201)](_0x46d867(0x4b8))[_0x46d867(0x1e9)][_0x46d867(0x1bc)]+_0x46d867(0x4d0))[_0x46d867(0x526)](this[_0x46d867(0x492)])[_0x46d867(0x27b)]({'_id':_0x46d867(0x552)});if(_0x14f948){let _0x41ecfc=JSON[_0x46d867(0x279)](JSON['stringify'](_0x14f948),w[_0x46d867(0x59f)][_0x46d867(0x1ab)]);_0x1b94e0=_0x41ecfc['me']?.[_0x46d867(0x3c5)]||_0x41ecfc['me']?.[_0x46d867(0x15d)];}}else{if((0x0,_e['existsSync'])((0x0,$[_0x46d867(0x3eb)])(j,this[_0x46d867(0x492)],_0x46d867(0x2b5)))){let _0x1124f1=JSON['parse']((0x0,_e[_0x46d867(0x48e)])((0x0,$[_0x46d867(0x3eb)])(j,this['instanceName'],'creds.json'),{'encoding':_0x46d867(0x14b)}));_0x1b94e0=_0x1124f1['me']?.[_0x46d867(0x3c5)]||_0x1124f1['me']?.[_0x46d867(0x15d)];}}}return _0x1b94e0;}get['profilePictureUrl'](){const _0x13201a=a0_0x27119e;return this['instance'][_0x13201a(0x3f3)];}get[a0_0x27119e(0x5c2)](){const _0x307054=a0_0x27119e;return{'code':this[_0x307054(0x333)][_0x307054(0x2e1)]?.['code'],'base64':this[_0x307054(0x333)][_0x307054(0x2e1)]?.[_0x307054(0x364)]};}async['loadWebhook'](){const _0x445e06=a0_0x27119e;let _0x4ad04a=await this[_0x445e06(0x28a)][_0x445e06(0x362)][_0x445e06(0x36e)](this[_0x445e06(0x492)]);this['localWebhook'][_0x445e06(0x29a)]=_0x4ad04a?.[_0x445e06(0x29a)],this[_0x445e06(0x6ca)][_0x445e06(0x3b1)]=_0x4ad04a?.[_0x445e06(0x3b1)],this[_0x445e06(0x6ca)][_0x445e06(0x6c3)]=_0x4ad04a?.[_0x445e06(0x6c3)],this['localWebhook'][_0x445e06(0x2ed)]=_0x4ad04a?.['STATUS_INSTANCE'],this[_0x445e06(0x6ca)]['QRCODE_UPDATED']=_0x4ad04a?.['QRCODE_UPDATED'],this['localWebhook']['SEND_MESSAGE']=_0x4ad04a?.[_0x445e06(0x646)],this[_0x445e06(0x6ca)][_0x445e06(0x146)]=_0x4ad04a?.[_0x445e06(0x146)],this[_0x445e06(0x6ca)][_0x445e06(0x4c4)]=_0x4ad04a?.[_0x445e06(0x4c4)],this['localWebhook'][_0x445e06(0x53f)]=_0x4ad04a?.['GROUPS_UPSERT'],this[_0x445e06(0x6ca)]['GROUPS_UPDATE']=_0x4ad04a?.[_0x445e06(0x30f)],this[_0x445e06(0x6ca)]['GROUP_PARTICIPANTS_UPDATE']=_0x4ad04a?.['GROUP_PARTICIPANTS_UPDATE'],this[_0x445e06(0x6ca)]['CHATS_SET']=_0x4ad04a?.['CHATS_SET'],this['localWebhook'][_0x445e06(0x118)]=_0x4ad04a?.[_0x445e06(0x118)],this['localWebhook']['CHATS_UPDATE']=_0x4ad04a?.[_0x445e06(0x5d9)],this[_0x445e06(0x6ca)][_0x445e06(0x5b4)]=_0x4ad04a?.['CHATS_DELETE'],this[_0x445e06(0x6ca)][_0x445e06(0x36a)]=_0x4ad04a?.[_0x445e06(0x36a)],this[_0x445e06(0x6ca)][_0x445e06(0x6d5)]=_0x4ad04a?.[_0x445e06(0x6d5)],this[_0x445e06(0x6ca)][_0x445e06(0x428)]=_0x4ad04a?.[_0x445e06(0x428)],this[_0x445e06(0x6ca)][_0x445e06(0x497)]=_0x4ad04a?.['PRESENCE_UPDATE'],this[_0x445e06(0x6ca)][_0x445e06(0x484)]=_0x4ad04a?.[_0x445e06(0x484)],this[_0x445e06(0x6ca)]['CONNECTION_UPDATE']=_0x4ad04a?.['CONNECTION_UPDATE'],this[_0x445e06(0x6ca)][_0x445e06(0x357)]=_0x4ad04a?.[_0x445e06(0x357)];}async[a0_0x27119e(0x1a9)](_0x439bfb){const _0x5a3d64=a0_0x27119e;let _0x277f78=[_0x5a3d64(0x303),_0x5a3d64(0x29a),_0x5a3d64(0x3b1),_0x5a3d64(0x6c3),'STATUS_INSTANCE',_0x5a3d64(0x422),_0x5a3d64(0x4c4),_0x5a3d64(0x146),_0x5a3d64(0x646),_0x5a3d64(0x53f),_0x5a3d64(0x30f),'GROUP_PARTICIPANTS_UPDATE',_0x5a3d64(0x510),_0x5a3d64(0x118),_0x5a3d64(0x5d9),_0x5a3d64(0x5b4),'CONTACTS_SET',_0x5a3d64(0x6d5),'CONTACTS_UPDATE',_0x5a3d64(0x497),_0x5a3d64(0x484),'CONNECTION_UPDATE','groups_ignore'],_0x42691e={};return _0x277f78[_0x5a3d64(0xfc)](_0xfe7a8e=>{_0x439bfb[_0xfe7a8e]!==void 0x0&&(_0x42691e[_0xfe7a8e]=_0x439bfb[_0xfe7a8e]);}),await this[_0x5a3d64(0x28a)]['webhook'][_0x5a3d64(0x447)](_0x42691e,this[_0x5a3d64(0x492)]),Object[_0x5a3d64(0x2e8)](this['localWebhook'],_0x42691e),await this[_0x5a3d64(0x28a)]['webhook'][_0x5a3d64(0x36e)](this[_0x5a3d64(0x492)]);}async[a0_0x27119e(0x2b4)](){const _0x1f5655=a0_0x27119e;return await this[_0x1f5655(0x28a)][_0x1f5655(0x362)]['find'](this['instanceName']);}async[a0_0x27119e(0x324)](_0x10bab9,_0x1cf777){const _0x226c5b=a0_0x27119e;let _0x5e957f=this[_0x226c5b(0x593)]['get'](_0x226c5b(0x385)),_0x299651=_0x10bab9['replace'](/[\.-]/gm,'_')['toUpperCase'](),_0x2061d4=this[_0x226c5b(0x6ca)][_0x226c5b(0x3b1)]&&(0x0,k[_0x226c5b(0x3a5)])(this['localWebhook'][_0x226c5b(0x29a)])?this[_0x226c5b(0x6ca)][_0x226c5b(0x29a)]+(this[_0x226c5b(0x6ca)]['local_map']?this[_0x226c5b(0x5b3)][_0x10bab9]:''):null,_0x578e1c=_0x5e957f?.[_0x226c5b(0x5fa)],_0x469a78=_0x578e1c&&_0x578e1c?.['ENABLED']&&(0x0,k[_0x226c5b(0x3a5)])(_0x578e1c['URL'])?_0x578e1c[_0x226c5b(0x2c0)]+(_0x5e957f[_0x226c5b(0x5ff)]?this[_0x226c5b(0x5b3)][_0x10bab9]:''):null,_0x379d92=this[_0x226c5b(0x6ca)][_0x299651],_0x284e86=_0x5e957f?.[_0x226c5b(0x2b0)]?.[_0x299651];if(_0x379d92&&_0x2061d4)try{await ue['default']['create']({'baseURL':_0x2061d4})['post']('',{'event':_0x10bab9,'instance':this[_0x226c5b(0x333)][_0x226c5b(0x3c5)],'data':_0x1cf777}),this[_0x226c5b(0x6cb)]['log']('Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0x10bab9+':\x20'+_0x2061d4);}catch(_0x50348c){this[_0x226c5b(0x6cb)][_0x226c5b(0x258)](this[_0x226c5b(0x492)]+'\x20('+this[_0x226c5b(0x333)][_0x226c5b(0x106)]+_0x226c5b(0x611)+{'local':c['name']+'.sendDataWebhook-local','message':_0x50348c?.[_0x226c5b(0x26e)],'hostName':_0x50348c?.['hostname'],'syscall':_0x50348c?.['syscall'],'code':_0x50348c?.['code'],'error':_0x50348c?.['errno'],'stack':_0x50348c?.[_0x226c5b(0x645)],'name':_0x50348c?.[_0x226c5b(0x3c5)]});}if(_0x284e86&&_0x469a78)try{await ue[_0x226c5b(0x2c9)][_0x226c5b(0x447)]({'baseURL':_0x469a78})[_0x226c5b(0x556)]('',{'event':_0x10bab9,'instance':this[_0x226c5b(0x333)][_0x226c5b(0x3c5)],'data':_0x1cf777}),this[_0x226c5b(0x6cb)][_0x226c5b(0x502)](_0x226c5b(0x1eb)+_0x10bab9+':\x20'+_0x469a78);}catch(_0x545f95){this[_0x226c5b(0x6cb)][_0x226c5b(0x258)](this[_0x226c5b(0x492)]+'\x20('+this[_0x226c5b(0x333)][_0x226c5b(0x106)]+_0x226c5b(0x611)+{'local':c[_0x226c5b(0x3c5)]+'.sendDataWebhook-global','message':_0x545f95?.['message'],'hostName':_0x545f95?.[_0x226c5b(0x3d6)],'syscall':_0x545f95?.[_0x226c5b(0x6b8)],'code':_0x545f95?.[_0x226c5b(0x216)],'error':_0x545f95?.[_0x226c5b(0x137)],'stack':_0x545f95?.[_0x226c5b(0x645)],'name':_0x545f95?.[_0x226c5b(0x3c5)]});}}async['connectionUpdate']({qr:_0x5565ac,connection:_0x4afc16,lastDisconnect:_0x2522d9}){const _0x56fdbf=a0_0x27119e;if(_0x5565ac){if(this[_0x56fdbf(0x333)]['qrcode'][_0x56fdbf(0x33c)]===this['configService'][_0x56fdbf(0x201)](_0x56fdbf(0x543))[_0x56fdbf(0x1c6)])return this[_0x56fdbf(0x324)](_0x56fdbf(0x1c5),{'message':_0x56fdbf(0x147),'statusCode':w[_0x56fdbf(0x238)][_0x56fdbf(0x55d)]}),this[_0x56fdbf(0x324)](_0x56fdbf(0x1b0),{'instance':this[_0x56fdbf(0x333)][_0x56fdbf(0x3c5)],'state':'refused','statusReason':w[_0x56fdbf(0x238)][_0x56fdbf(0x409)]}),this[_0x56fdbf(0x324)](_0x56fdbf(0x223),{'instance':this[_0x56fdbf(0x333)][_0x56fdbf(0x3c5)],'status':_0x56fdbf(0x3aa)}),this[_0x56fdbf(0x30a)]=!0x0,this[_0x56fdbf(0x64d)][_0x56fdbf(0x47d)]('no.connection',this[_0x56fdbf(0x333)][_0x56fdbf(0x3c5)]);this[_0x56fdbf(0x333)][_0x56fdbf(0x2e1)][_0x56fdbf(0x33c)]++;let _0x22ddde={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x56fdbf(0x10f),'dark':_0x56fdbf(0x581)}};go[_0x56fdbf(0x2c9)]['toDataURL'](_0x5565ac,_0x22ddde,(_0x3733a2,_0x419b28)=>{const _0x47518c=_0x56fdbf;if(_0x3733a2){this[_0x47518c(0x6cb)][_0x47518c(0x258)](this[_0x47518c(0x492)]+'\x20('+this[_0x47518c(0x333)][_0x47518c(0x106)]+_0x47518c(0x42f)+_0x3733a2['toString']());return;}this[_0x47518c(0x333)][_0x47518c(0x2e1)][_0x47518c(0x364)]=_0x419b28,this['instance']['qrcode'][_0x47518c(0x216)]=_0x5565ac,this[_0x47518c(0x324)](_0x47518c(0x1c5),{'qrcode':{'instance':this[_0x47518c(0x333)][_0x47518c(0x3c5)],'code':_0x5565ac,'base64':_0x419b28}});}),mo['default']['generate'](_0x5565ac,{'small':!0x0},_0x5643ea=>this[_0x56fdbf(0x6cb)][_0x56fdbf(0x502)](_0x56fdbf(0x22c)+this[_0x56fdbf(0x333)][_0x56fdbf(0x3c5)]+_0x56fdbf(0x11f)+this[_0x56fdbf(0x333)][_0x56fdbf(0x2e1)][_0x56fdbf(0x33c)]+'\x20}\x0a'+_0x5643ea));}if(_0x4afc16&&(this['stateConnection']={'state':_0x4afc16,'statusReason':_0x2522d9?.[_0x56fdbf(0x258)]?.['output']?.[_0x56fdbf(0x213)]??0xc8},this[_0x56fdbf(0x324)](_0x56fdbf(0x1b0),{'instance':this['instance'][_0x56fdbf(0x3c5)],...this['stateConnection']})),_0x4afc16===_0x56fdbf(0x128)){if(this[_0x56fdbf(0x329)]++,this[_0x56fdbf(0x529)][_0x56fdbf(0x461)](Date[_0x56fdbf(0x541)]()),this[_0x56fdbf(0x529)]=this['reconnectTimestamps'][_0x56fdbf(0x522)](_0x1d8443=>Date[_0x56fdbf(0x541)]()-_0x1d8443<this['RECONNECT_TIME_FRAME']),_0x2522d9[_0x56fdbf(0x258)]?.[_0x56fdbf(0x558)]?.['statusCode']!==w[_0x56fdbf(0x238)][_0x56fdbf(0x582)]&&this[_0x56fdbf(0x529)][_0x56fdbf(0x57f)]<=this['MAX_RECONNECT_ATTEMPTS'])await this[_0x56fdbf(0x542)]();else{this[_0x56fdbf(0x324)]('status.instance',{'instance':this[_0x56fdbf(0x333)][_0x56fdbf(0x3c5)],'status':_0x56fdbf(0x3aa)}),this[_0x56fdbf(0x2bf)]=!0x1;try{this[_0x56fdbf(0x6cb)][_0x56fdbf(0x234)](this[_0x56fdbf(0x492)]+'\x20('+this[_0x56fdbf(0x333)][_0x56fdbf(0x106)]+_0x56fdbf(0x405));let _0x213d4b={'where':{'owner':this[_0x56fdbf(0x333)][_0x56fdbf(0x106)]}},_0x17df35=(await this[_0x56fdbf(0x28a)][_0x56fdbf(0x46b)]['find'](_0x213d4b))[_0x56fdbf(0x57f)];await this[_0x56fdbf(0x28a)]['messageUpdate']['delete'](_0x213d4b),this['logger']['verbose'](this[_0x56fdbf(0x492)]+'\x20('+this[_0x56fdbf(0x333)][_0x56fdbf(0x106)]+'):\x20Deletados\x20'+_0x17df35+_0x56fdbf(0x634));}catch(_0x219f33){console['error'](_0x56fdbf(0x59a),_0x219f33);}try{this[_0x56fdbf(0x6cb)][_0x56fdbf(0x234)](this[_0x56fdbf(0x492)]+'\x20('+this[_0x56fdbf(0x333)][_0x56fdbf(0x106)]+_0x56fdbf(0x2cf));let _0x1712a5={'where':{'owner':this[_0x56fdbf(0x333)][_0x56fdbf(0x106)]}},_0x2887bc=(await this[_0x56fdbf(0x28a)][_0x56fdbf(0x26e)]['find'](_0x1712a5))[_0x56fdbf(0x57f)];await this[_0x56fdbf(0x28a)][_0x56fdbf(0x26e)][_0x56fdbf(0x2d3)](_0x1712a5),this['logger'][_0x56fdbf(0x234)](this['instanceName']+'\x20('+this['instance'][_0x56fdbf(0x106)]+_0x56fdbf(0x559)+_0x2887bc+'\x20messages.');}catch(_0x31cd49){console[_0x56fdbf(0x258)](_0x56fdbf(0x225),_0x31cd49);}this[_0x56fdbf(0x2c5)]!==null&&(this[_0x56fdbf(0x6cb)][_0x56fdbf(0x234)](this[_0x56fdbf(0x492)]+'\x20('+this['instance'][_0x56fdbf(0x106)]+_0x56fdbf(0x2fd)),clearInterval(this['delayMessage']),this['delayMessage']=null),this['logger'][_0x56fdbf(0x234)](this['instanceName']+'\x20('+this[_0x56fdbf(0x333)]['wuid']+_0x56fdbf(0x64f)),this['AutomateSystem']=null,this[_0x56fdbf(0x64d)][_0x56fdbf(0x47d)](_0x56fdbf(0x16e),this['instance'][_0x56fdbf(0x3c5)],_0x56fdbf(0x56a)),this[_0x56fdbf(0x18c)]?.['ws']?.[_0x56fdbf(0x128)](),this[_0x56fdbf(0x18c)][_0x56fdbf(0x26d)](new Error(_0x56fdbf(0x45c)));}}if(_0x4afc16===_0x56fdbf(0x43f)){this[_0x56fdbf(0x2ef)],this[_0x56fdbf(0x333)][_0x56fdbf(0x106)]=this[_0x56fdbf(0x18c)]['user']['id']['replace'](/:\d+/,'')[_0x56fdbf(0x363)](_0x56fdbf(0x127),''),this[_0x56fdbf(0x333)][_0x56fdbf(0x3f3)]=(await this[_0x56fdbf(0x160)](this[_0x56fdbf(0x333)][_0x56fdbf(0x106)]+_0x56fdbf(0x127)))[_0x56fdbf(0x3f3)];let _0x5185df=_0x56fdbf(0x277)+this[_0x56fdbf(0x333)][_0x56fdbf(0x106)],_0x15c986=0x28,_0x2585d8=Math[_0x56fdbf(0x572)]((_0x15c986-_0x5185df[_0x56fdbf(0x57f)])/0x2),_0x5b4713='\x20'['repeat'](_0x2585d8),_0x37f277=_0x56fdbf(0x4a3),_0x1cd877='Instância:\x20'+this[_0x56fdbf(0x333)][_0x56fdbf(0x3c5)],_0x3c32f8=(''+_0x5b4713+_0x5185df+_0x5b4713)[_0x56fdbf(0x15a)](_0x15c986,'\x20'),_0x52db33=(''+_0x5b4713+_0x37f277+_0x5b4713)['padEnd'](_0x15c986,'\x20'),_0x48eb81=(''+_0x5b4713+_0x1cd877+_0x5b4713)[_0x56fdbf(0x15a)](_0x15c986,'\x20'),_0x233193=Math[_0x56fdbf(0x43d)](_0x3c32f8[_0x56fdbf(0x57f)],_0x52db33[_0x56fdbf(0x57f)],_0x48eb81[_0x56fdbf(0x57f)]),_0x90a4e7=_0x3c32f8[_0x56fdbf(0x15a)](_0x233193,'\x20'),_0x23132f=_0x52db33[_0x56fdbf(0x15a)](_0x233193,'\x20'),_0x5cca4e=_0x48eb81[_0x56fdbf(0x15a)](_0x233193,'\x20');this[_0x56fdbf(0x6cb)]['info']((_0x56fdbf(0x41b)+'─'[_0x56fdbf(0x1b1)](_0x233193)+_0x56fdbf(0x4b0)+_0x23132f+_0x56fdbf(0x62f)+_0x5cca4e+_0x56fdbf(0x62f)+_0x90a4e7+_0x56fdbf(0x600)+'─'['repeat'](_0x233193)+'┘')[_0x56fdbf(0x363)](/^ +/gm,'\x20\x20')),this['AutomateFunctions'](),this[_0x56fdbf(0x2bf)]=!0x0;}}[a0_0x27119e(0x2ef)](){const _0x583d6a=a0_0x27119e;this[_0x583d6a(0x329)]=0x0,this[_0x583d6a(0x529)]=[];}async[a0_0x27119e(0x3e2)](_0x7dff41,_0x3f11bb=!0x1){const _0x46325a=a0_0x27119e;try{let _0x3d1942=await this['repository'][_0x46325a(0x26e)][_0x46325a(0x36e)]({'where':{'owner':this['instance']['wuid'],'key':{'id':_0x7dff41['id']}}});return _0x3f11bb?_0x3d1942[0x0]:_0x3d1942[0x0][_0x46325a(0x26e)];}catch{return{'conversation':''};}}[a0_0x27119e(0x3b2)](){const _0x4eb3ea=a0_0x27119e;let _0x3a4586=this['configService'][_0x4eb3ea(0x201)]('STORE'),_0x141983=this[_0x4eb3ea(0x593)][_0x4eb3ea(0x201)](_0x4eb3ea(0x4b8));_0x3a4586?.['CLEANING_INTERVAL']&&!_0x141983[_0x4eb3ea(0x371)]&&setInterval(()=>{const _0x22d75b=_0x4eb3ea;try{for(let [_0x3aa487,_0x30c32f]of Object[_0x22d75b(0x67b)](_0x3a4586))_0x30c32f===!0x0&&(0x0,Vt['execSync'])(_0x22d75b(0x6c1)+(0x0,$[_0x22d75b(0x3eb)])(this[_0x22d75b(0x47c)],_0x3aa487[_0x22d75b(0x62c)](),this[_0x22d75b(0x333)][_0x22d75b(0x106)])+_0x22d75b(0x672));}catch{}},(_0x3a4586?.[_0x4eb3ea(0x514)]??0xe10)*0x3e8);}async[a0_0x27119e(0x65b)](){const _0x1961e8=a0_0x27119e;let _0x5d92ee=this[_0x1961e8(0x593)][_0x1961e8(0x201)](_0x1961e8(0x4b8)),_0xdc0955=this[_0x1961e8(0x593)][_0x1961e8(0x201)](_0x1961e8(0x555));return _0xdc0955?.[_0x1961e8(0x371)]?await vs(_0xdc0955,this['instance'][_0x1961e8(0x3c5)]):_0x5d92ee[_0x1961e8(0x371)]?await Es(this['instance'][_0x1961e8(0x3c5)]):await(0x0,w['useMultiFileAuthState'])((0x0,$[_0x1961e8(0x3eb)])(j,this[_0x1961e8(0x333)][_0x1961e8(0x3c5)]));}async['AutomateFunctions'](){const _0xb55851=a0_0x27119e;let _0x935b59=()=>Math[_0xb55851(0x572)](Math[_0xb55851(0x3b6)]()*0x2711)+0x7d0,_0x4a54f3=async()=>{const _0x289084=_0xb55851;if(!this[_0x289084(0x2bf)]){this['logger']['verbose'](_0x289084(0x44c)),this[_0x289084(0x5db)]=!0x1;return;}if(this[_0x289084(0x333)]['wuid']&&this[_0x289084(0x534)]&&this['delayMessage']!==null&&this['delayMessage']!==void 0x0){let _0x27cea3=Math[_0x289084(0x190)](this[_0x289084(0x2c5)]/0xea60);this['logger']['verbose'](this[_0x289084(0x492)]+'\x20('+this[_0x289084(0x333)][_0x289084(0x106)]+_0x289084(0x670)+_0x27cea3+_0x289084(0x654)),this[_0x289084(0x5db)]=!0x1;return;}else this['instance'][_0x289084(0x106)]&&(this['logger'][_0x289084(0x234)](this[_0x289084(0x492)]+'\x20('+this[_0x289084(0x333)][_0x289084(0x106)]+'):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...'),this[_0x289084(0x534)]||await this[_0x289084(0x402)](),(this['delayMessage']===null||this[_0x289084(0x2c5)]===void 0x0)&&await this[_0x289084(0x426)]());if(this[_0x289084(0x5db)]){let _0x14b571=_0x935b59();this[_0x289084(0x6cb)][_0x289084(0x234)](this['instanceName']+_0x289084(0x18f)+_0x14b571/0x3e8+_0x289084(0x4df)),setTimeout(_0x4a54f3,_0x14b571);}};if(this[_0xb55851(0x5db)])return;this[_0xb55851(0x5db)]=!0x0;let _0x29110b=_0x935b59();setTimeout(_0x4a54f3,_0x29110b);}async['connectToWhatsapp'](){const _0x3c5aa9=a0_0x27119e;try{this[_0x3c5aa9(0x240)](),this[_0x3c5aa9(0x333)]['authState']=await this[_0x3c5aa9(0x65b)]();let {version:_0x1fa156}=await(0x0,w[_0x3c5aa9(0x253)])(),_0x438070=this[_0x3c5aa9(0x593)][_0x3c5aa9(0x201)](_0x3c5aa9(0x39d)),_0x3f7dc6=[_0x438070[_0x3c5aa9(0x351)],_0x438070[_0x3c5aa9(0x69e)],(0x0,ho[_0x3c5aa9(0x1b7)])()],_0x2f4147={'auth':{'creds':this[_0x3c5aa9(0x333)][_0x3c5aa9(0x20b)]['state'][_0x3c5aa9(0x552)],'keys':(0x0,w['makeCacheableSignalKeyStore'])(this[_0x3c5aa9(0x333)]['authState'][_0x3c5aa9(0x516)]['keys'],(0x0,kt[_0x3c5aa9(0x2c9)])({'level':'error'}))},'logger':(0x0,kt['default'])({'level':_0x3c5aa9(0x258)}),'printQRInTerminal':!0x1,'browser':_0x3f7dc6,'version':_0x1fa156,'connectTimeoutMs':0xea60,'qrTimeout':0x9c40,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'msgRetryCounterCache':this['msgRetryCounterCache'],'getMessage':async _0x4e423d=>await this[_0x3c5aa9(0x3e2)](_0x4e423d),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x0,'userDevicesCache':this[_0x3c5aa9(0x255)],'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa},'patchMessageBeforeSending':_0x1cf407=>(!!(_0x1cf407['buttonsMessage']||_0x1cf407[_0x3c5aa9(0x53c)])&&(_0x1cf407={'viewOnceMessageV2':{'message':{'messageContextInfo':{'deviceListMetadataVersion':0x2,'deviceListMetadata':{}},..._0x1cf407}}}),_0x1cf407)};return this[_0x3c5aa9(0x30a)]=!0x1,this[_0x3c5aa9(0x18c)]=(0x0,w[_0x3c5aa9(0x2c9)])(_0x2f4147),this[_0x3c5aa9(0x511)](),this[_0x3c5aa9(0x18c)];}catch(_0x3c7c07){throw this[_0x3c5aa9(0x6cb)][_0x3c5aa9(0x258)](this[_0x3c5aa9(0x492)]+'\x20('+this[_0x3c5aa9(0x333)][_0x3c5aa9(0x106)]+_0x3c5aa9(0x611)+_0x3c7c07),new A(_0x3c7c07?.[_0x3c5aa9(0x3cb)]());}}['eventHandler'](){const _0x2da1ad=a0_0x27119e;this[_0x2da1ad(0x18c)]['ev'][_0x2da1ad(0x282)](_0x2cc0cd=>{const _0x52195b=_0x2da1ad;if(!this[_0x52195b(0x30a)]){let _0x493caf=this[_0x52195b(0x593)][_0x52195b(0x201)](_0x52195b(0x4b8));if(_0x2cc0cd['connection.update']&&this['connectionUpdate'](_0x2cc0cd[_0x52195b(0x1b0)]),_0x2cc0cd[_0x52195b(0x5a0)]&&this[_0x52195b(0x333)]['authState'][_0x52195b(0x483)](),_0x2cc0cd[_0x52195b(0x65d)]){let _0x195b1f=_0x2cc0cd[_0x52195b(0x65d)];this[_0x52195b(0x3f9)][_0x52195b(0x65d)](_0x195b1f,_0x493caf);}if(_0x2cc0cd[_0x52195b(0x3fb)]){let _0x474b93=_0x2cc0cd[_0x52195b(0x3fb)];this[_0x52195b(0x3f9)][_0x52195b(0x3fb)](_0x474b93,_0x493caf);}if(_0x2cc0cd['messages.update']){let _0x4a449b=_0x2cc0cd[_0x52195b(0x685)];this[_0x52195b(0x3f9)][_0x52195b(0x685)](_0x4a449b,_0x493caf);}if(_0x2cc0cd[_0x52195b(0x629)]){let _0x1b813e=_0x2cc0cd[_0x52195b(0x629)];if(this[_0x52195b(0x6ca)]?.[_0x52195b(0x357)]&&_0x1b813e['id'][_0x52195b(0x6ad)](_0x52195b(0x46e)))return;this[_0x52195b(0x324)](_0x52195b(0x629),_0x1b813e);}if(!this[_0x52195b(0x6ca)]?.[_0x52195b(0x357)]){if(_0x2cc0cd[_0x52195b(0x67a)]){let _0x199d3c=_0x2cc0cd[_0x52195b(0x67a)];this[_0x52195b(0x4e4)][_0x52195b(0x67a)](_0x199d3c);}if(_0x2cc0cd[_0x52195b(0x183)]){let _0x19726e=_0x2cc0cd[_0x52195b(0x183)];this['groupHandler'][_0x52195b(0x183)](_0x19726e);}if(_0x2cc0cd['group-participants.update']){let _0x842ebf=_0x2cc0cd[_0x52195b(0x256)];this[_0x52195b(0x4e4)]['group-participants.update'](_0x842ebf);}}if(_0x2cc0cd[_0x52195b(0x44b)]){let _0x4b8085=_0x2cc0cd[_0x52195b(0x44b)];this['chatHandle'][_0x52195b(0x44b)](_0x4b8085,_0x493caf);}if(_0x2cc0cd['chats.update']){let _0x5a9517=_0x2cc0cd[_0x52195b(0x4a9)];this['chatHandle'][_0x52195b(0x4a9)](_0x5a9517,_0x493caf);}if(_0x2cc0cd[_0x52195b(0x28e)]){let _0x253282=_0x2cc0cd[_0x52195b(0x28e)];this['chatHandle']['chats.delete'](_0x253282);}if(_0x2cc0cd['contacts.upsert']){let _0x35e1d9=_0x2cc0cd[_0x52195b(0x398)];this[_0x52195b(0x366)][_0x52195b(0x398)](_0x35e1d9,_0x493caf);}if(_0x2cc0cd[_0x52195b(0x5d8)]){let _0x231210=_0x2cc0cd['contacts.update'];this[_0x52195b(0x366)][_0x52195b(0x5d8)](_0x231210,_0x493caf);}}});}['formatBRNumber'](_0x3000c9){const _0x1c779a=a0_0x27119e;let _0x856d0c=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x1c779a(0x5ed)](_0x3000c9);if(_0x856d0c&&_0x856d0c[0x1]==='55'){let _0x2fd85b=_0x856d0c[0x2],_0x59a25d=_0x856d0c[0x3],_0x1ec33d=_0x856d0c[0x4];if(_0x2fd85b>='31'&&_0x59a25d==='9')return _0x856d0c[0x1]+_0x2fd85b+_0x1ec33d;}return _0x3000c9;}[a0_0x27119e(0x4d4)](_0x47a692){const _0x38fae6=a0_0x27119e;return _0x47a692[_0x38fae6(0x6ad)](_0x38fae6(0x46e))||_0x47a692[_0x38fae6(0x6ad)](_0x38fae6(0x127))||_0x47a692[_0x38fae6(0x6ad)](_0x38fae6(0x370))?_0x47a692:(_0x47a692=_0x47a692?.['replace'](/\s/g,'')[_0x38fae6(0x363)](/\+/g,'')[_0x38fae6(0x363)](/\(/g,'')['replace'](/\)/g,'')[_0x38fae6(0x29e)](/\:/)[0x0][_0x38fae6(0x29e)]('@')[0x0],_0x47a692['length']>=0x12?(_0x47a692=_0x47a692['replace'](/[^\d-]/g,''),_0x47a692+_0x38fae6(0x46e)):(_0x47a692=_0x47a692[_0x38fae6(0x363)](/\D/g,''),this[_0x38fae6(0x39c)](_0x47a692)+'@s.whatsapp.net'));}async[a0_0x27119e(0x1b4)](_0x42d8d1){const _0x46cfa1=a0_0x27119e;let _0x37c0f7=this[_0x46cfa1(0x4d4)](_0x42d8d1['number']),_0x4ffa3b=(await this[_0x46cfa1(0x678)]({'numbers':[_0x37c0f7]}))[0x0];if(!_0x4ffa3b[_0x46cfa1(0x3b8)]&&!(0x0,w[_0x46cfa1(0x2d9)])(_0x4ffa3b['jid']))throw new g(_0x4ffa3b);let _0x3aaa93=(0x0,w[_0x46cfa1(0x2d9)])(_0x37c0f7)?_0x37c0f7:_0x4ffa3b['jid'];if((0x0,w[_0x46cfa1(0x2d9)])(_0x3aaa93))try{await this[_0x46cfa1(0x18c)][_0x46cfa1(0x5c5)](_0x3aaa93);}catch{throw new x(_0x46cfa1(0x4e5));}try{return await this[_0x46cfa1(0x18c)][_0x46cfa1(0x5fe)](_0x3aaa93),await this[_0x46cfa1(0x18c)]['sendPresenceUpdate'](_0x42d8d1['presence'],_0x37c0f7),{'status':0xc8,'presence':_0x42d8d1[_0x46cfa1(0x359)]};}catch(_0x5664ca){throw new g(_0x5664ca['toString']());}}async[a0_0x27119e(0x160)](_0x12187e){const _0x9cc239=a0_0x27119e;let _0x2a294c=this[_0x9cc239(0x4d4)](_0x12187e);try{return{'wuid':_0x2a294c,'profilePictureUrl':await this[_0x9cc239(0x18c)][_0x9cc239(0x3f3)](_0x2a294c,_0x9cc239(0x53e))};}catch{return{'wuid':_0x2a294c,'profilePictureUrl':null};}}async[a0_0x27119e(0x657)](_0x300c56,_0x13bb82,_0x5c0174){const _0x2f2698=a0_0x27119e;let _0x3ab462=(await this[_0x2f2698(0x678)]({'numbers':[_0x300c56]}))[0x0];if(!_0x3ab462[_0x2f2698(0x3b8)]&&!(0x0,w['isJidGroup'])(_0x3ab462[_0x2f2698(0x23d)])&&!_0x3ab462['jid'][_0x2f2698(0x6ad)]('@broadcast'))throw new g(_0x3ab462);let _0x13cbb8=_0x3ab462['jid'];try{_0x5c0174?.[_0x2f2698(0x676)]&&(await this[_0x2f2698(0x18c)][_0x2f2698(0x5fe)](_0x13cbb8),await this[_0x2f2698(0x18c)][_0x2f2698(0x635)](_0x5c0174?.['presence']??'composing',_0x13cbb8),await(0x0,w[_0x2f2698(0x676)])(_0x5c0174[_0x2f2698(0x676)]),await this['client'][_0x2f2698(0x635)](_0x2f2698(0x5d0),_0x13cbb8));let _0x52ebe8=_0x5c0174?.[_0x2f2698(0x6be)]!=!0x1?void 0x0:!0x1,_0xa4384b;if(_0x5c0174?.['quoted']){let _0x1502c6=_0x5c0174?.['quoted'],_0xed8f9=_0x1502c6?.['message']?_0x1502c6:await this[_0x2f2698(0x3e2)](_0x1502c6[_0x2f2698(0x4dc)],!0x0);if(!_0xed8f9)throw _0x2f2698(0x232);_0xa4384b=_0xed8f9;}let _0x583f72;if((0x0,w[_0x2f2698(0x2d9)])(_0x13cbb8))try{let _0x298453=await this[_0x2f2698(0x18c)]['groupMetadata'](_0x13cbb8);if(!_0x298453)throw new x('Group\x20not\x20found');_0x5c0174?.[_0x2f2698(0x312)]&&(_0x5c0174[_0x2f2698(0x312)]?.[_0x2f2698(0x26c)]?_0x583f72=_0x298453[_0x2f2698(0x54a)][_0x2f2698(0x2c7)](_0x30c86b=>_0x30c86b['id']):_0x5c0174[_0x2f2698(0x312)]?.[_0x2f2698(0x5b9)]?.[_0x2f2698(0x57f)]&&(_0x583f72=_0x5c0174[_0x2f2698(0x312)][_0x2f2698(0x5b9)][_0x2f2698(0x2c7)](_0x3d4f21=>{const _0x387c13=_0x2f2698;let _0x632943=this[_0x387c13(0x4d4)](_0x3d4f21);return(0x0,w[_0x387c13(0x2d9)])(_0x632943)?null:_0x632943;})));}catch{throw new x(_0x2f2698(0x4e5));}let _0x277485=await((async()=>{const _0x5cac82=_0x2f2698;let _0x351646={'quoted':_0xa4384b};if(!_0x13bb82[_0x5cac82(0x4ef)]&&!_0x13bb82['poll']&&!_0x13bb82[_0x5cac82(0x1fa)]&&!_0x13bb82['conversation']&&_0x13cbb8!=='status@broadcast'&&!_0x13bb82[_0x5cac82(0x4ef)])return await this[_0x5cac82(0x18c)][_0x5cac82(0x627)](_0x13cbb8,{'forward':{'key':{'remoteJid':this['instance'][_0x5cac82(0x106)],'fromMe':!0x0},'message':_0x13bb82},'mentions':_0x583f72},_0x351646);if(_0x13bb82[_0x5cac82(0x13f)]){let _0x13b692=_0x13bb82[_0x5cac82(0x13f)];return _0x5c0174?.[_0x5cac82(0x237)]&&(_0x13b692=await this[_0x5cac82(0x5da)](_0x13b692,_0x13cbb8)),await this[_0x5cac82(0x18c)][_0x5cac82(0x627)](_0x13cbb8,{'text':_0x13b692,'mentions':_0x583f72,'linkPreview':_0x52ebe8},_0x351646);}return _0x13cbb8===_0x5cac82(0x26f)?await this[_0x5cac82(0x18c)][_0x5cac82(0x627)](_0x13cbb8,_0x13bb82[_0x5cac82(0x49d)]['content'],{'backgroundColor':_0x13bb82[_0x5cac82(0x49d)][_0x5cac82(0x162)][_0x5cac82(0x3f6)],'font':_0x13bb82['status'][_0x5cac82(0x162)]['font'],'statusJidList':_0x13bb82['status'][_0x5cac82(0x162)][_0x5cac82(0x11c)]}):await this['client'][_0x5cac82(0x627)](_0x13cbb8,_0x13bb82,_0x351646);})()),{message_normalized:_0x5aca88}=this['normalizeMessage'](_0x277485[_0x2f2698(0x26e)],W(_0x277485[_0x2f2698(0x26e)]),null),_0x101576={'key':_0x277485[_0x2f2698(0x4dc)],'pushName':_0x277485[_0x2f2698(0x571)],'message':{..._0x277485[_0x2f2698(0x26e)]},'messageType':W(_0x277485['message']),'message_normalized':{'key':_0x277485[_0x2f2698(0x4dc)],'pushName':_0x277485[_0x2f2698(0x571)],'messageTimestamp':_0x277485['messageTimestamp']&&_0x277485[_0x2f2698(0x602)]['toString']()[_0x2f2698(0x57f)]<0xd?_0x277485[_0x2f2698(0x602)]*0x3e8:_0x277485['messageTimestamp']||null,'source':(0x0,w[_0x2f2698(0x1f5)])(_0x277485[_0x2f2698(0x4dc)]['id']),..._0x5aca88},'messageTimestamp':_0x277485[_0x2f2698(0x602)]&&_0x277485['messageTimestamp'][_0x2f2698(0x3cb)]()['length']<0xd?_0x277485[_0x2f2698(0x602)]*0x3e8:_0x277485[_0x2f2698(0x602)]||null,'owner':this['instance']['wuid'],'source':(0x0,w[_0x2f2698(0x1f5)])(_0x277485['key']['id'])};return this[_0x2f2698(0x6cb)][_0x2f2698(0x502)](_0x101576),await this[_0x2f2698(0x324)](_0x2f2698(0x1e2),_0x101576),q(this[_0x2f2698(0x492)],_0x2f2698(0x231),{'message':_0x101576}),this[_0x2f2698(0x5d5)](this[_0x2f2698(0x593)][_0x2f2698(0x201)](_0x2f2698(0x4b8)),_0x101576,_0x2f2698(0x646)),await this[_0x2f2698(0x28a)][_0x2f2698(0x26e)][_0x2f2698(0x315)]([_0x101576],this[_0x2f2698(0x593)][_0x2f2698(0x201)](_0x2f2698(0x4b8))['ENABLED']),_0x277485;}catch(_0x4ddbc4){throw this[_0x2f2698(0x6cb)][_0x2f2698(0x258)](this[_0x2f2698(0x492)]+'\x20('+this[_0x2f2698(0x333)][_0x2f2698(0x106)]+'):\x20'+_0x4ddbc4['toString']()),new g(_0x4ddbc4[_0x2f2698(0x3cb)]());}}get[a0_0x27119e(0x20a)](){const _0x5054b9=a0_0x27119e;return this[_0x5054b9(0x17b)];}async[a0_0x27119e(0x453)](_0x5c47bd){const _0x36564c=a0_0x27119e;let _0x4a16bb=this['configService'][_0x36564c(0x201)](_0x36564c(0x239)),_0x7f202d=this['configService']['get'](_0x36564c(0x20c));return _0x7f202d&&this[_0x36564c(0x492)][_0x36564c(0x62c)]()['includes'](_0x7f202d[_0x36564c(0x62c)]())&&(_0x5c47bd['textMessage'][_0x36564c(0x51e)]+='\x0a\x0a'+_0x4a16bb),await this[_0x36564c(0x657)](_0x5c47bd[_0x36564c(0x341)],{'conversation':_0x5c47bd[_0x36564c(0x453)][_0x36564c(0x51e)]},_0x5c47bd?.[_0x36564c(0x16b)]);}async[a0_0x27119e(0x1ff)](_0x21ced0){const _0x7bbc39=a0_0x27119e;if(!_0x21ced0[_0x7bbc39(0x10c)])throw new g(_0x7bbc39(0x52a));if(!_0x21ced0['content'])throw new g(_0x7bbc39(0x677));if(_0x21ced0[_0x7bbc39(0xf0)]){let _0x2b48dc=await this[_0x7bbc39(0x28a)][_0x7bbc39(0x368)][_0x7bbc39(0x36e)]({'where':{'owner':this[_0x7bbc39(0x333)]['wuid']}});if(!_0x2b48dc[_0x7bbc39(0x57f)])throw new g(_0x7bbc39(0x6bc));_0x21ced0[_0x7bbc39(0x11c)]=_0x2b48dc[_0x7bbc39(0x522)](_0x590985=>_0x590985[_0x7bbc39(0x571)])[_0x7bbc39(0x2c7)](_0x9c6b4b=>_0x9c6b4b['id']);}if(!_0x21ced0[_0x7bbc39(0x11c)]?.['length']&&!_0x21ced0[_0x7bbc39(0xf0)])throw new g('StatusJidList\x20is\x20required');if(_0x21ced0[_0x7bbc39(0x10c)]===_0x7bbc39(0x51e)){if(!_0x21ced0[_0x7bbc39(0x3f6)])throw new g(_0x7bbc39(0x180));if(!_0x21ced0['font'])throw new g('Font\x20is\x20required');return{'content':{'text':_0x21ced0[_0x7bbc39(0x468)]},'option':{'backgroundColor':_0x21ced0[_0x7bbc39(0x3f6)],'font':_0x21ced0[_0x7bbc39(0x124)],'statusJidList':_0x21ced0[_0x7bbc39(0x11c)]}};}if(_0x21ced0[_0x7bbc39(0x10c)]==='image')return{'content':{'image':{'url':_0x21ced0[_0x7bbc39(0x468)]},'caption':_0x21ced0[_0x7bbc39(0x178)]},'option':{'statusJidList':_0x21ced0[_0x7bbc39(0x11c)]}};if(_0x21ced0[_0x7bbc39(0x10c)]===_0x7bbc39(0x349))return{'content':{'video':{'url':_0x21ced0[_0x7bbc39(0x468)]},'caption':_0x21ced0[_0x7bbc39(0x178)]},'option':{'statusJidList':_0x21ced0['statusJidList']}};if(_0x21ced0[_0x7bbc39(0x10c)]===_0x7bbc39(0x4ef)){this[_0x7bbc39(0x6cb)][_0x7bbc39(0x234)](_0x7bbc39(0x55a)),this[_0x7bbc39(0x6cb)][_0x7bbc39(0x234)](_0x7bbc39(0x4bc));let _0x11fbde=await this[_0x7bbc39(0x38d)](_0x21ced0[_0x7bbc39(0x468)]);if(typeof _0x11fbde==_0x7bbc39(0x2af)){this[_0x7bbc39(0x6cb)][_0x7bbc39(0x234)](_0x7bbc39(0x18e));let _0x237acf=_[_0x7bbc39(0x48e)](_0x11fbde)[_0x7bbc39(0x3cb)](_0x7bbc39(0x364)),_0x551dc8={'content':{'audio':Buffer['from'](_0x237acf,_0x7bbc39(0x364)),'ptt':!0x0,'mimetype':_0x7bbc39(0x460)},'option':{'statusJidList':_0x21ced0['statusJidList']}};return _['unlinkSync'](_0x11fbde),_0x551dc8;}else throw new A(_0x11fbde);}throw new g(_0x7bbc39(0x3a9));}async[a0_0x27119e(0x697)](_0x3a4e04){const _0x37c7c8=a0_0x27119e;return await this[_0x37c7c8(0x657)]('status@broadcast',{'status':await this[_0x37c7c8(0x1ff)](_0x3a4e04[_0x37c7c8(0x697)])});}async[a0_0x27119e(0x3fe)](_0x2b20b1){const _0x550d0a=a0_0x27119e;try{let _0x3bee4f=await(0x0,w[_0x550d0a(0x22b)])({[_0x2b20b1[_0x550d0a(0x4e8)]]:(0x0,k[_0x550d0a(0x3a5)])(_0x2b20b1[_0x550d0a(0x4f7)])?{'url':_0x2b20b1[_0x550d0a(0x4f7)]}:Buffer[_0x550d0a(0x664)](_0x2b20b1['media'],_0x550d0a(0x364))},{'upload':this['client']['waUploadToServer']}),_0x173921=_0x2b20b1[_0x550d0a(0x4e8)]+_0x550d0a(0x155);if(_0x2b20b1[_0x550d0a(0x4e8)]===_0x550d0a(0x3ce)&&!_0x2b20b1[_0x550d0a(0x2eb)]){let _0x86a878=new RegExp(/.*\/(.+?)\./)[_0x550d0a(0x5ed)](_0x2b20b1[_0x550d0a(0x4f7)]);_0x2b20b1['fileName']=_0x86a878[0x1];}let _0x447f40;(0x0,k[_0x550d0a(0x3a5)])(_0x2b20b1['media'])?_0x447f40=(0x0,Ns['getMIMEType'])(_0x2b20b1[_0x550d0a(0x4f7)]):_0x447f40=(0x0,Ns[_0x550d0a(0x50c)])(_0x2b20b1[_0x550d0a(0x2eb)]);let _0x3dabc0=this['configService'][_0x550d0a(0x201)](_0x550d0a(0x239)),_0x505c83=this[_0x550d0a(0x593)][_0x550d0a(0x201)](_0x550d0a(0x20c));return _0x505c83&&this[_0x550d0a(0x492)][_0x550d0a(0x62c)]()['includes'](_0x505c83['toLowerCase']())&&(_0x2b20b1['caption']+='\x0a\x0a'+_0x3dabc0),_0x3bee4f[_0x173921][_0x550d0a(0x178)]=_0x2b20b1?.[_0x550d0a(0x178)],_0x3bee4f[_0x173921][_0x550d0a(0x400)]=_0x447f40,_0x3bee4f[_0x173921]['fileName']=_0x2b20b1[_0x550d0a(0x2eb)],_0x2b20b1[_0x550d0a(0x4e8)]===_0x550d0a(0x349)&&(_0x3bee4f[_0x173921]['jpegThumbnail']=Uint8Array[_0x550d0a(0x664)]((0x0,_e['readFileSync'])((0x0,$[_0x550d0a(0x3eb)])(process[_0x550d0a(0x4db)](),'video-cover.png'))),_0x3bee4f[_0x173921][_0x550d0a(0x6a7)]=!0x1),(0x0,w[_0x550d0a(0x592)])('',{[_0x173921]:{..._0x3bee4f[_0x173921]}},{'userJid':this[_0x550d0a(0x333)][_0x550d0a(0x106)]});}catch(_0x5b5f78){throw this[_0x550d0a(0x6cb)][_0x550d0a(0x258)](this[_0x550d0a(0x492)]+'\x20('+this[_0x550d0a(0x333)]['wuid']+_0x550d0a(0x611)+_0x5b5f78),new A(_0x5b5f78?.[_0x550d0a(0x3cb)]()||_0x5b5f78);}}async[a0_0x27119e(0x42e)](_0x5dcb49){const _0x2ecf55=a0_0x27119e;let _0x50cc7a=await this[_0x2ecf55(0x3fe)](_0x5dcb49[_0x2ecf55(0x42e)]);return await this[_0x2ecf55(0x657)](_0x5dcb49[_0x2ecf55(0x341)],{..._0x50cc7a[_0x2ecf55(0x26e)]},_0x5dcb49?.[_0x2ecf55(0x16b)]);}async['convertToWebP'](_0x1d7b91,_0x25a4c7){const _0x3de0d4=a0_0x27119e;try{this[_0x3de0d4(0x6cb)][_0x3de0d4(0x234)]('Converting\x20image\x20to\x20WebP\x20to\x20sticker');let _0x453d34,_0x156752=_0x25a4c7+'-'+new Date()['getTime']();this['logger'][_0x3de0d4(0x234)](_0x3de0d4(0xfe)+_0x156752);let _0x59734c=''+(0x0,$[_0x3de0d4(0x3eb)])(this[_0x3de0d4(0x47c)],_0x156752+_0x3de0d4(0x316));if(this[_0x3de0d4(0x6cb)]['verbose'](_0x3de0d4(0x4bd)+_0x59734c),(0x0,k[_0x3de0d4(0x49a)])(_0x1d7b91)){this[_0x3de0d4(0x6cb)][_0x3de0d4(0x234)](_0x3de0d4(0x51a));let _0x1b9196=_0x1d7b91[_0x3de0d4(0x363)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x2e7b9f=Buffer['from'](_0x1b9196,'base64');_0x453d34=''+(0x0,$[_0x3de0d4(0x3eb)])(this[_0x3de0d4(0x47c)],_0x3de0d4(0x45b)+_0x156752+'.png'),this[_0x3de0d4(0x6cb)][_0x3de0d4(0x234)](_0x3de0d4(0x151)+_0x453d34),await(0x0,Ut['default'])(_0x2e7b9f)[_0x3de0d4(0x537)](_0x453d34),this[_0x3de0d4(0x6cb)][_0x3de0d4(0x234)](_0x3de0d4(0x1e8));}else{this[_0x3de0d4(0x6cb)]['verbose'](_0x3de0d4(0x3c2));let _0x1f390e=new Date()[_0x3de0d4(0x2cc)](),_0x14a98a=_0x1d7b91+'?timestamp='+_0x1f390e;this['logger']['verbose'](_0x3de0d4(0x6ce)+_0x14a98a);let _0x5e0019=await ue[_0x3de0d4(0x2c9)]['get'](_0x14a98a,{'responseType':'arraybuffer'});this['logger'][_0x3de0d4(0x234)](_0x3de0d4(0x1ee));let _0x4866c2=Buffer['from'](_0x5e0019[_0x3de0d4(0x5a7)],_0x3de0d4(0x2f2));_0x453d34=''+(0x0,$['join'])(this[_0x3de0d4(0x47c)],_0x3de0d4(0x45b)+_0x156752+_0x3de0d4(0x16a)),this['logger'][_0x3de0d4(0x234)](_0x3de0d4(0x151)+_0x453d34),await(0x0,Ut[_0x3de0d4(0x2c9)])(_0x4866c2)['toFile'](_0x453d34),this['logger'][_0x3de0d4(0x234)](_0x3de0d4(0x1e8));}return await(0x0,Ut['default'])(_0x453d34)['webp']()[_0x3de0d4(0x537)](_0x59734c),this[_0x3de0d4(0x6cb)][_0x3de0d4(0x234)](_0x3de0d4(0x38c)),_[_0x3de0d4(0x2dd)](_0x453d34),this[_0x3de0d4(0x6cb)][_0x3de0d4(0x234)](_0x3de0d4(0x51c)),_0x59734c;}catch(_0x509bca){console['error']('Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP:',_0x509bca);}}async[a0_0x27119e(0x40d)](_0x57c073){const _0x5ddba1=a0_0x27119e;let _0x21aaec=await this[_0x5ddba1(0x390)](_0x57c073['stickerMessage'][_0x5ddba1(0x53e)],_0x57c073[_0x5ddba1(0x341)]),_0x10f86d=await this['sendMessageWithTyping'](_0x57c073[_0x5ddba1(0x341)],{'sticker':{'url':_0x21aaec}},_0x57c073?.['options']);return _[_0x5ddba1(0x2dd)](_0x21aaec),this[_0x5ddba1(0x6cb)][_0x5ddba1(0x234)](_0x5ddba1(0x520)),_0x10f86d;}async[a0_0x27119e(0x539)](_0x5bb7bd){const _0x3641ba=a0_0x27119e;if(this['logger'][_0x3641ba(0x234)]('Sending\x20audio\x20whatsapp'),!_0x5bb7bd['options']?.['encoding']&&_0x5bb7bd[_0x3641ba(0x16b)]?.[_0x3641ba(0x451)]!==!0x1&&(_0x5bb7bd[_0x3641ba(0x16b)][_0x3641ba(0x451)]=!0x0),_0x5bb7bd[_0x3641ba(0x16b)]?.['encoding']){let _0x18a658=await this[_0x3641ba(0x38d)](_0x5bb7bd[_0x3641ba(0x5e0)]['audio']);if(typeof _0x18a658==_0x3641ba(0x2af)){let _0x8ad4e7=_[_0x3641ba(0x48e)](_0x18a658)[_0x3641ba(0x3cb)](_0x3641ba(0x364)),_0x147898=this[_0x3641ba(0x657)](_0x5bb7bd[_0x3641ba(0x341)],{'audio':Buffer[_0x3641ba(0x664)](_0x8ad4e7,'base64'),'ptt':!0x0,'mimetype':'audio/mp4'},{'presence':_0x3641ba(0x4e9),'delay':_0x5bb7bd?.[_0x3641ba(0x16b)]?.['delay']});return _[_0x3641ba(0x2dd)](_0x18a658),this['logger'][_0x3641ba(0x234)](_0x3641ba(0x6b6)),_0x147898;}else throw new A(_0x18a658);}return await this[_0x3641ba(0x657)](_0x5bb7bd[_0x3641ba(0x341)],{'audio':(0x0,k[_0x3641ba(0x3a5)])(_0x5bb7bd['audioMessage']['audio'])?{'url':_0x5bb7bd['audioMessage'][_0x3641ba(0x4ef)]}:Buffer[_0x3641ba(0x664)](_0x5bb7bd[_0x3641ba(0x5e0)]['audio'],_0x3641ba(0x364)),'ptt':!0x0,'mimetype':_0x3641ba(0x56e)},{'presence':_0x3641ba(0x4e9),'delay':_0x5bb7bd?.[_0x3641ba(0x16b)]?.['delay']});}async[a0_0x27119e(0x38d)](_0x478f47){const _0x28faff=a0_0x27119e;this['logger'][_0x28faff(0x234)]('Processing\x20audio');let _0x578978,_0x3199e0,_0xc8dd67=(0x0,Lt['v4'])();if(this[_0x28faff(0x6cb)][_0x28faff(0x234)]('Hash\x20to\x20audio\x20name:\x20'+_0xc8dd67),(0x0,k[_0x28faff(0x3a5)])(_0x478f47)){this['logger'][_0x28faff(0x234)]('Audio\x20is\x20url'),_0x3199e0=''+(0x0,$[_0x28faff(0x3eb)])(this[_0x28faff(0x47c)],_0xc8dd67+_0x28faff(0x5e4)),_0x578978=''+(0x0,$['join'])(this[_0x28faff(0x47c)],_0x28faff(0x45b)+_0xc8dd67+_0x28faff(0x186)),this[_0x28faff(0x6cb)][_0x28faff(0x234)]('Output\x20audio\x20path:\x20'+_0x3199e0),this[_0x28faff(0x6cb)][_0x28faff(0x234)](_0x28faff(0x564)+_0x578978);let _0x151639=new Date()['getTime'](),_0xe4c44f=_0x478f47+'?timestamp='+_0x151639;this[_0x28faff(0x6cb)][_0x28faff(0x234)](_0x28faff(0x5ec)+_0xe4c44f);let _0x1169bc=await ue[_0x28faff(0x2c9)][_0x28faff(0x201)](_0xe4c44f,{'responseType':_0x28faff(0x44d)});this[_0x28faff(0x6cb)][_0x28faff(0x234)]('Getting\x20audio\x20from\x20url'),_[_0x28faff(0x45e)](_0x578978,_0x1169bc[_0x28faff(0x5a7)]);}else{this[_0x28faff(0x6cb)][_0x28faff(0x234)]('Audio\x20is\x20base64'),_0x3199e0=''+(0x0,$[_0x28faff(0x3eb)])(this[_0x28faff(0x47c)],_0xc8dd67+'.mp4'),_0x578978=''+(0x0,$[_0x28faff(0x3eb)])(this[_0x28faff(0x47c)],_0x28faff(0x45b)+_0xc8dd67+_0x28faff(0x186)),this[_0x28faff(0x6cb)][_0x28faff(0x234)](_0x28faff(0x26a)+_0x3199e0),this['logger'][_0x28faff(0x234)]('Temp\x20audio\x20path:\x20'+_0x578978);let _0x29a008=Buffer[_0x28faff(0x664)](_0x478f47,'base64');_[_0x28faff(0x45e)](_0x578978,_0x29a008),this[_0x28faff(0x6cb)][_0x28faff(0x234)](_0x28faff(0x5e3));}return this[_0x28faff(0x6cb)][_0x28faff(0x234)]('Converting\x20audio\x20to\x20mp4'),new Promise((_0x4eaec8,_0x1f50ab)=>{const _0x2c0893=_0x28faff;(0x0,Vt[_0x2c0893(0x5ed)])(uo['default'][_0x2c0893(0x342)]+_0x2c0893(0x153)+_0x578978+'\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-f\x20ipod\x20'+_0x3199e0+_0x2c0893(0x13e),_0x30df46=>{const _0xdc8e39=_0x2c0893;_[_0xdc8e39(0x2dd)](_0x578978),this[_0xdc8e39(0x6cb)][_0xdc8e39(0x234)](_0xdc8e39(0x339)),_0x30df46&&_0x1f50ab(_0x30df46),this[_0xdc8e39(0x6cb)]['verbose']('Audio\x20converted\x20to\x20mp4'),_0x4eaec8(_0x3199e0);});});}async[a0_0x27119e(0x462)](_0x4f2c1e){const _0x571a9c=a0_0x27119e;let _0x42b821={},_0x16db0e=_0x571a9c(0x2a6);if(_0x4f2c1e[_0x571a9c(0x462)]?.[_0x571a9c(0x42e)]){_0x16db0e=_0x4f2c1e['buttonMessage'][_0x571a9c(0x42e)]?.[_0x571a9c(0x4e8)][_0x571a9c(0x5aa)]()??_0x571a9c(0x2a6),_0x42b821[_0x571a9c(0x623)]=_0x16db0e[_0x571a9c(0x62c)]()+_0x571a9c(0x155);let _0x389d54=await this[_0x571a9c(0x3fe)](_0x4f2c1e[_0x571a9c(0x462)][_0x571a9c(0x42e)]);_0x42b821['message']=_0x389d54[_0x571a9c(0x26e)][_0x42b821[_0x571a9c(0x623)]],_0x42b821['contentText']='*'+_0x4f2c1e[_0x571a9c(0x462)][_0x571a9c(0x448)]+_0x571a9c(0x19f)+_0x4f2c1e['buttonMessage'][_0x571a9c(0x157)];}let _0x6aa0bd={'text':_0x4f2c1e[_0x571a9c(0x462)][_0x571a9c(0x4ed)][_0x571a9c(0x2c7)](_0x601125=>_0x601125['buttonText']),'ids':_0x4f2c1e[_0x571a9c(0x462)][_0x571a9c(0x4ed)][_0x571a9c(0x2c7)](_0x39d69e=>_0x39d69e[_0x571a9c(0x31a)])};if(!(0x0,k[_0x571a9c(0x332)])(_0x6aa0bd['text'])||!(0x0,k['arrayUnique'])(_0x6aa0bd['ids']))throw new g(_0x571a9c(0x117),_0x571a9c(0x2b7));return await this['sendMessageWithTyping'](_0x4f2c1e[_0x571a9c(0x341)],{'buttonsMessage':{'text':_0x42b821?.[_0x571a9c(0x623)]?void 0x0:_0x4f2c1e[_0x571a9c(0x462)]['title'],'contentText':_0x42b821?.[_0x571a9c(0x296)]??_0x4f2c1e[_0x571a9c(0x462)][_0x571a9c(0x157)],'footerText':_0x4f2c1e[_0x571a9c(0x462)]?.['footerText'],'buttons':_0x4f2c1e[_0x571a9c(0x462)][_0x571a9c(0x4ed)][_0x571a9c(0x2c7)](_0x38ac2f=>({'buttonText':{'displayText':_0x38ac2f[_0x571a9c(0x595)]},'buttonId':_0x38ac2f[_0x571a9c(0x31a)],'type':0x1})),'headerType':w['proto']['Message'][_0x571a9c(0x320)]['HeaderType'][_0x16db0e],[_0x42b821?.['mediaKey']]:_0x42b821?.[_0x571a9c(0x26e)]}},_0x4f2c1e?.[_0x571a9c(0x16b)]);}async[a0_0x27119e(0x1b9)](_0x40dd39){const _0x215a32=a0_0x27119e;return await this[_0x215a32(0x657)](_0x40dd39[_0x215a32(0x341)],{'locationMessage':{'degreesLatitude':_0x40dd39[_0x215a32(0x1b9)][_0x215a32(0x65e)],'degreesLongitude':_0x40dd39[_0x215a32(0x1b9)][_0x215a32(0x628)],'name':_0x40dd39['locationMessage']?.[_0x215a32(0x3c5)],'address':_0x40dd39[_0x215a32(0x1b9)]?.['address']}},_0x40dd39?.['options']);}async['listMessage'](_0x275f98){const _0xfe7bf0=a0_0x27119e;return await this[_0xfe7bf0(0x657)](_0x275f98[_0xfe7bf0(0x341)],{'listMessage':{'title':_0x275f98[_0xfe7bf0(0x53c)][_0xfe7bf0(0x448)],'description':_0x275f98[_0xfe7bf0(0x53c)][_0xfe7bf0(0x157)],'buttonText':_0x275f98[_0xfe7bf0(0x53c)]?.['buttonText'],'footerText':_0x275f98[_0xfe7bf0(0x53c)]?.['footerText'],'sections':_0x275f98['listMessage']['sections'],'listType':0x1}},_0x275f98?.[_0xfe7bf0(0x16b)]);}async['contactMessage'](_0x15b2ca){const _0x1d035d=a0_0x27119e;let _0x3e49c5={},_0x4e84dd=_0x4a5a18=>{const _0x2d2037=a0_0x2b59;let _0x53df19='BEGIN:VCARD\x0aVERSION:3.0\x0aN:'+_0x4a5a18['fullName']+_0x2d2037(0x5b8)+_0x4a5a18[_0x2d2037(0x3cc)]+'\x0a';_0x4a5a18[_0x2d2037(0x287)]&&(_0x53df19+=_0x2d2037(0x163)+_0x4a5a18['organization']+';\x0a'),_0x4a5a18[_0x2d2037(0x5c3)]&&(_0x53df19+=_0x2d2037(0x2c2)+_0x4a5a18[_0x2d2037(0x5c3)]+'\x0a'),_0x4a5a18[_0x2d2037(0x29a)]&&(_0x53df19+=_0x2d2037(0x633)+_0x4a5a18[_0x2d2037(0x29a)]+'\x0a');let _0xd015e5='';return _0x4a5a18['phoneNumber']&&_0x4a5a18['phoneNumber']['split']('|')[_0x2d2037(0xfc)]((_0x3b5776,_0x1b8e85)=>{const _0x6a49c6=_0x2d2037;let _0xe23c37=this['createJid'](_0x3b5776)[_0x6a49c6(0x363)](_0x6a49c6(0x127),'');_0xd015e5+='item'+(_0x1b8e85+0x1)+'.TEL;waid='+_0xe23c37+':'+_0x3b5776+_0x6a49c6(0x3ae)+(_0x1b8e85+0x1)+_0x6a49c6(0x691);}),_0x53df19+=_0xd015e5+_0x2d2037(0x489),_0x53df19;};return _0x15b2ca[_0x1d035d(0x24b)]['length']===0x1?_0x3e49c5[_0x1d035d(0x24b)]={'displayName':_0x15b2ca['contactMessage'][0x0][_0x1d035d(0x3cc)],'vcard':_0x4e84dd(_0x15b2ca['contactMessage'][0x0])}:_0x3e49c5[_0x1d035d(0x452)]={'displayName':_0x15b2ca[_0x1d035d(0x24b)][_0x1d035d(0x57f)]+'\x20contacts','contacts':_0x15b2ca[_0x1d035d(0x24b)][_0x1d035d(0x2c7)](_0x573aec=>({'displayName':_0x573aec['fullName'],'vcard':_0x4e84dd(_0x573aec)}))},await this[_0x1d035d(0x657)](_0x15b2ca[_0x1d035d(0x341)],{..._0x3e49c5},_0x15b2ca?.[_0x1d035d(0x16b)]);}async[a0_0x27119e(0x650)](_0x26d2fc){const _0x50656f=a0_0x27119e;return await this[_0x50656f(0x657)](_0x26d2fc[_0x50656f(0x650)][_0x50656f(0x4dc)][_0x50656f(0x3f7)],{'reactionMessage':{'key':_0x26d2fc[_0x50656f(0x650)][_0x50656f(0x4dc)],'text':_0x26d2fc[_0x50656f(0x650)][_0x50656f(0x3cf)]}});}async['whatsappNumber'](_0x288215){const _0x2441d9=a0_0x27119e;let _0x593cb3=[];for await(let _0x551a64 of _0x288215[_0x2441d9(0x2d4)]){let _0x1096d4=this[_0x2441d9(0x4d4)](_0x551a64);if((0x0,w[_0x2441d9(0x2d9)])(_0x1096d4)){let _0x37b78f=await this[_0x2441d9(0x3b5)]({'groupJid':_0x1096d4},_0x2441d9(0x56a));_0x593cb3[_0x2441d9(0x461)](new fe(_0x37b78f[_0x2441d9(0x465)]['id'],!!_0x37b78f?.[_0x2441d9(0x465)]['id'],_0x37b78f?.[_0x2441d9(0x465)][_0x2441d9(0x5d7)]));}else try{let _0x452805=(await this[_0x2441d9(0x18c)][_0x2441d9(0x485)](_0x1096d4))[0x0];_0x593cb3[_0x2441d9(0x461)](new fe(_0x452805['jid'],_0x452805[_0x2441d9(0x3b8)]));}catch{_0x593cb3[_0x2441d9(0x461)](new fe(_0x551a64,!0x1));}}return _0x593cb3;}async[a0_0x27119e(0x19e)](_0x537d89){const _0xa9cc6d=a0_0x27119e;try{let _0x5486ab=_0x537d89['readMessages'][_0xa9cc6d(0x522)](_0xc6159=>(0x0,w[_0xa9cc6d(0x2d9)])(_0xc6159[_0xa9cc6d(0x3f7)])||(0x0,w[_0xa9cc6d(0x481)])(_0xc6159[_0xa9cc6d(0x3f7)]))[_0xa9cc6d(0x2c7)](_0x9f17a0=>({'remoteJid':_0x9f17a0[_0xa9cc6d(0x3f7)],'fromMe':_0x9f17a0[_0xa9cc6d(0x170)],'id':_0x9f17a0['id']}));await this[_0xa9cc6d(0x18c)][_0xa9cc6d(0x1ce)](_0x5486ab);let _0x38ff43=_0x5486ab[_0xa9cc6d(0x2c7)](_0x1971ca=>this[_0xa9cc6d(0x47e)](_0x1971ca,_0x1971ca[_0xa9cc6d(0x3f7)],{'status':_0xa9cc6d(0x42a),'owner':this['instance'][_0xa9cc6d(0x106)]})),_0x25303c=_0x5486ab[_0xa9cc6d(0x2c7)](_0x42ccca=>D[_0xa9cc6d(0x6a6)]({'id':_0x42ccca[_0xa9cc6d(0x3f7)],'owner':this[_0xa9cc6d(0x333)][_0xa9cc6d(0x106)]},{'$set':{'unreadcount':0x0}},{'new':!0x0})),[_0x194446,_0x1a88c1]=await Promise[_0xa9cc6d(0x149)]([Promise[_0xa9cc6d(0x149)](_0x38ff43),Promise[_0xa9cc6d(0x149)](_0x25303c)]);return _0x1a88c1['filter'](_0x5e64a9=>_0x5e64a9!==null)[_0xa9cc6d(0xfc)](_0x1ac99d=>{const _0x339ee9=_0xa9cc6d;q(this['instanceName'],_0x339ee9(0x65a),{'chat':_0x1ac99d});}),{'message':_0xa9cc6d(0x551),'read':_0xa9cc6d(0x250)};}catch(_0x35fc73){throw console['error'](_0xa9cc6d(0x59c),_0x35fc73),new A(_0xa9cc6d(0x291),_0x35fc73[_0xa9cc6d(0x3cb)]());}}async[a0_0x27119e(0x39a)](_0x584fb7){const _0x1ad1ca=a0_0x27119e;let _0x48fff1=await this[_0x1ad1ca(0x222)]({'where':{'key':{'remoteJid':_0x584fb7},'owner':this['instance'][_0x1ad1ca(0x3c5)]}}),_0x43bfda=_0x48fff1['pop']();for(let _0x200273 of _0x48fff1)_0x200273[_0x1ad1ca(0x602)]>=_0x43bfda['messageTimestamp']&&(_0x43bfda=_0x200273);return _0x43bfda;}async[a0_0x27119e(0x242)](_0xc32ec6){const _0x58749a=a0_0x27119e;this['logger'][_0x58749a(0x234)](_0x58749a(0x148));try{let _0xd65e16=_0xc32ec6[_0x58749a(0x6ba)],_0x215d66=_0xc32ec6[_0x58749a(0x610)];if(!_0xd65e16&&_0x215d66?_0xd65e16=await this[_0x58749a(0x39a)](_0x215d66):(_0xd65e16=_0xc32ec6[_0x58749a(0x6ba)],_0xd65e16['messageTimestamp']=_0xd65e16?.[_0x58749a(0x602)]??Date['now'](),_0x215d66=_0xd65e16?.[_0x58749a(0x4dc)]?.[_0x58749a(0x3f7)]),!_0xd65e16||Object[_0x58749a(0x410)](_0xd65e16)[_0x58749a(0x57f)]===0x0)throw new x(_0x58749a(0x5f0));return await this[_0x58749a(0x18c)][_0x58749a(0x568)]({'archive':_0xc32ec6['archive'],'lastMessages':[_0xd65e16]},this['createJid'](_0x215d66)),{'chatId':_0x215d66,'archived':!0x0};}catch(_0x16a12f){throw new A({'archived':!0x1,'message':[_0x58749a(0x35c),_0x16a12f[_0x58749a(0x3cb)]()]});}}async[a0_0x27119e(0x4c3)](_0x1f3d6a){const _0x50ea81=a0_0x27119e;try{let _0x1ee5c2=await this[_0x50ea81(0x18c)][_0x50ea81(0x627)](_0x1f3d6a[_0x50ea81(0x3f7)],{'delete':_0x1f3d6a});try{let _0x3fb4f7=await this[_0x50ea81(0x47e)](_0x1f3d6a,_0x1f3d6a[_0x50ea81(0x3f7)],{'status':_0x50ea81(0x5f7),'owner':this[_0x50ea81(0x333)][_0x50ea81(0x106)]});this[_0x50ea81(0x6cb)][_0x50ea81(0x234)](this[_0x50ea81(0x492)]+'\x20('+this['instance'][_0x50ea81(0x106)]+_0x50ea81(0x3b0)+_0x3fb4f7);}catch(_0x4baeba){console[_0x50ea81(0x258)](_0x50ea81(0x2f6),_0x4baeba);}return _0x1ee5c2;}catch(_0x1e1920){throw new A(_0x50ea81(0x2a3),_0x1e1920?.[_0x50ea81(0x3cb)]());}}async[a0_0x27119e(0x40f)](_0x517433){const _0xa91264=a0_0x27119e;try{let _0x4636d0=_0x517433?.[_0xa91264(0x26e)]?_0x517433:await this[_0xa91264(0x3e2)](_0x517433[_0xa91264(0x4dc)],!0x0);for(let _0x26f46d of Zs)_0x4636d0[_0xa91264(0x26e)][_0x26f46d]&&(_0x4636d0[_0xa91264(0x26e)]=_0x4636d0[_0xa91264(0x26e)][_0x26f46d][_0xa91264(0x26e)]);let _0x4325da,_0x42719d;for(let _0x2bf7f4 of Xs)if(_0x4325da=_0x4636d0['message'][_0x2bf7f4],_0x4325da){_0x42719d=_0x2bf7f4;break;}if(!_0x4325da)throw _0xa91264(0x54d);typeof _0x4325da[_0xa91264(0x623)]==_0xa91264(0x5f1)&&(_0x4636d0['message']=JSON[_0xa91264(0x279)](JSON[_0xa91264(0x5f2)](_0x4636d0[_0xa91264(0x26e)])));let _0x210c39=await(0x0,w[_0xa91264(0x2cb)])({'key':_0x4636d0?.[_0xa91264(0x4dc)],'message':_0x4636d0?.[_0xa91264(0x26e)]},_0xa91264(0x577),{},{'logger':(0x0,kt[_0xa91264(0x2c9)])({'level':_0xa91264(0x258)}),'reuploadRequest':this[_0xa91264(0x18c)][_0xa91264(0x437)]});if(!(_0x210c39 instanceof Buffer))throw new Error(_0xa91264(0x507));let _0xd583f=this['configService'][_0xa91264(0x201)](_0xa91264(0x4b8)),_0x5d3da3,_0x4df72f;if(_0x4325da[_0xa91264(0x2eb)])_0x5d3da3=_0x4325da[_0xa91264(0x2eb)];else{let _0x239b9e=_0x4325da[_0xa91264(0x400)]?.[_0xa91264(0x5ce)](/\/(\w+)/),_0x3923ff=_0x239b9e?_0x239b9e[0x1]:null;if(!_0x3923ff)throw new Error(_0xa91264(0x165));_0x5d3da3=(0x0,Lt['v4'])()+'.'+_0x3923ff;}_0x42719d==='audioMessage'&&_0x4325da[_0xa91264(0x400)]===_0xa91264(0x47b)?(_0x5d3da3=(0x0,Lt['v4'])()+'.ogg',_0x4df72f='/media/'+await this['convertaudio'](_0x210c39[_0xa91264(0x3cb)]('base64'))):(await this[_0xa91264(0x6aa)](_0x210c39,_0x5d3da3),_0x4df72f=_0xa91264(0x3d7)+_0x5d3da3);let _0x2e76c3=this[_0xa91264(0x593)][_0xa91264(0x201)](_0xa91264(0x429)),_0x1e6e0e=this[_0xa91264(0x593)][_0xa91264(0x201)](_0xa91264(0x3a8))[_0xa91264(0x17c)],_0x30f388=_0x2e76c3&&_0x2e76c3[_0xa91264(0x65f)][_0xa91264(0x29e)]('/')[0x4];_0x1e6e0e===0x1bb&&(_0x4df72f=''+(_0xa91264(0x1c1)+_0x30f388)+_0x4df72f);let _0x3067ac=0xc*0x3c*0x3c*0x3e8;if(_0xd583f[_0xa91264(0x371)]){let _0x9538d5={'where':{'key':{'id':_0x4636d0[_0xa91264(0x4dc)]['id'],'remoteJid':_0x4636d0[_0xa91264(0x4dc)]['remoteJid'],'fromMe':_0x4636d0['key'][_0xa91264(0x170)]},'owner':this['instance']['wuid']}};_0x4636d0[_0xa91264(0x4dc)][_0xa91264(0x3f7)][_0xa91264(0x13a)](_0xa91264(0x46e))&&(_0x9538d5[_0xa91264(0x52d)][_0xa91264(0x4dc)][_0xa91264(0x1ae)]=_0x4636d0['key'][_0xa91264(0x1ae)]);let _0x882204={'message_normalized.fileUrl':_0x4df72f,'message_normalized.expires_fileUrl':Date[_0xa91264(0x541)]()+_0x3067ac};try{let _0x566056=await this['repository'][_0xa91264(0x26e)]['update'](_0x9538d5,_0x882204);_0x566056&&q(this[_0xa91264(0x492)],_0xa91264(0x231),{'message':_0x566056});}catch{}}return{'mediaType':_0x42719d,'fileName':_0x4325da[_0xa91264(0x2eb)],'caption':_0x4325da[_0xa91264(0x178)],'size':{'fileLength':_0x4325da[_0xa91264(0x2d8)],'height':_0x4325da[_0xa91264(0x532)],'width':_0x4325da['width']},'mimetype':_0x4325da[_0xa91264(0x400)],'base64':_0x210c39[_0xa91264(0x3cb)](_0xa91264(0x364)),'fileUrl':_0x4df72f,'expires_fileUrl':Date[_0xa91264(0x541)]()+_0x3067ac};}catch(_0x12cfdd){throw this[_0xa91264(0x6cb)][_0xa91264(0x258)](this[_0xa91264(0x492)]+'\x20('+this[_0xa91264(0x333)][_0xa91264(0x106)]+_0xa91264(0x611)+_0x12cfdd),new g(_0x12cfdd['toString']());}}async[a0_0x27119e(0x6aa)](_0x4da732,_0xea4ee2){const _0x11ddb1=a0_0x27119e;console['log']('Initial\x20__dirname:',__dirname),console[_0x11ddb1(0x502)](_0x11ddb1(0x1b8),_0xea4ee2);let _0x1acfb4=$[_0x11ddb1(0x2c9)][_0x11ddb1(0x3eb)](__dirname,'downloads');console[_0x11ddb1(0x502)](_0x11ddb1(0x478),_0x1acfb4),_['existsSync'](_0x1acfb4)||(this['logger'][_0x11ddb1(0x502)](_0x11ddb1(0x302)),_[_0x11ddb1(0x445)](_0x1acfb4,{'recursive':!0x0}));let _0x158e11=$['default'][_0x11ddb1(0x3eb)](_0x1acfb4,_0xea4ee2);return console[_0x11ddb1(0x502)](_0x11ddb1(0x61b),_0x158e11),new Promise((_0x5e19db,_0x27e3ef)=>{const _0x3de1cb=_0x11ddb1;_[_0x3de1cb(0x336)](_0x158e11,_0x4da732,_0x43ac71=>{const _0x568cde=_0x3de1cb;_0x43ac71?(this['logger'][_0x568cde(0x258)]('Error\x20writing\x20file:\x20'+_0x43ac71[_0x568cde(0x26e)]),_0x27e3ef(_0x43ac71)):(this[_0x568cde(0x6cb)][_0x568cde(0x502)](_0x568cde(0x209)+_0x158e11),_0x5e19db(_0x158e11));});});}async[a0_0x27119e(0x278)](_0x3ecedb){const _0xfd843e=a0_0x27119e;return _0x3ecedb?.[_0xfd843e(0x52d)]?_0x3ecedb['where']['owner']=this[_0xfd843e(0x333)][_0xfd843e(0x106)]:_0x3ecedb={'where':{'owner':this[_0xfd843e(0x333)][_0xfd843e(0x106)]}},await this['repository']['contact'][_0xfd843e(0x36e)](_0x3ecedb);}async[a0_0x27119e(0x222)](_0x2d16b){const _0x27f88c=a0_0x27119e;return _0x2d16b?.[_0x27f88c(0x52d)]?_0x2d16b[_0x27f88c(0x52d)][_0x27f88c(0x1a7)]=this[_0x27f88c(0x333)]['wuid']:_0x2d16b={'where':{'owner':this['instance'][_0x27f88c(0x106)]},'limit':_0x2d16b?.['limit']},await this[_0x27f88c(0x28a)][_0x27f88c(0x26e)][_0x27f88c(0x36e)](_0x2d16b);}async[a0_0x27119e(0x235)](_0xdf8471){const _0x41bd98=a0_0x27119e;return _0xdf8471?.['where']?_0xdf8471['where'][_0x41bd98(0x1a7)]=this['instance'][_0x41bd98(0x106)]:_0xdf8471={'where':{'owner':this[_0x41bd98(0x333)][_0x41bd98(0x106)]},'limit':_0xdf8471?.[_0x41bd98(0x66c)]},await this['repository']['messageUpdate'][_0x41bd98(0x36e)](_0xdf8471);}async['fetchChats'](){const _0x106833=a0_0x27119e;return await this['repository']['chat'][_0x106833(0x36e)]({'where':{'owner':this[_0x106833(0x333)][_0x106833(0x106)]}});}async[a0_0x27119e(0x104)](){const _0x3a0f9e=a0_0x27119e;return await this['client'][_0x3a0f9e(0x104)]();}async[a0_0x27119e(0x46d)](_0x2d24cb){const _0x52d0ff=a0_0x27119e;try{return await this[_0x52d0ff(0x18c)][_0x52d0ff(0x580)](_0x2d24cb[_0x52d0ff(0x416)][_0x52d0ff(0x68b)]),await this[_0x52d0ff(0x18c)][_0x52d0ff(0x12a)](_0x2d24cb[_0x52d0ff(0x416)][_0x52d0ff(0x4ec)]),await this['client']['updateStatusPrivacy'](_0x2d24cb[_0x52d0ff(0x416)][_0x52d0ff(0x49d)]),await this[_0x52d0ff(0x18c)][_0x52d0ff(0x4d7)](_0x2d24cb[_0x52d0ff(0x416)]['online']),await this[_0x52d0ff(0x18c)]['updateLastSeenPrivacy'](_0x2d24cb[_0x52d0ff(0x416)]['last']),await this['client'][_0x52d0ff(0x4d3)](_0x2d24cb['privacySettings'][_0x52d0ff(0x578)]),this[_0x52d0ff(0x18c)]?.['ws']?.[_0x52d0ff(0x128)](),{'update':_0x52d0ff(0x250),'data':{'readreceipts':_0x2d24cb['privacySettings'][_0x52d0ff(0x68b)],'profile':_0x2d24cb[_0x52d0ff(0x416)]['profile'],'status':_0x2d24cb['privacySettings'][_0x52d0ff(0x49d)],'online':_0x2d24cb[_0x52d0ff(0x416)][_0x52d0ff(0x43a)],'last':_0x2d24cb[_0x52d0ff(0x416)][_0x52d0ff(0x396)],'groupadd':_0x2d24cb['privacySettings'][_0x52d0ff(0x578)]}};}catch(_0x4dfc17){throw new A(_0x52d0ff(0x2a1),_0x4dfc17[_0x52d0ff(0x3cb)]());}}async[a0_0x27119e(0x193)](_0x1f3437){const _0x19885b=a0_0x27119e;let _0x596c9c=_0x1f3437?this[_0x19885b(0x4d4)](_0x1f3437):this['client']?.[_0x19885b(0x2b9)]?.['id'];this[_0x19885b(0x6cb)][_0x19885b(0x234)](_0x19885b(0x3c9)+_0x596c9c);try{if(this[_0x19885b(0x6cb)][_0x19885b(0x234)](_0x19885b(0x624)),_0x1f3437){let _0x4a4ae2=(await this[_0x19885b(0x678)]({'numbers':[_0x596c9c]}))?.[_0x19885b(0x476)](),_0x516a61=await this[_0x19885b(0x160)](_0x4a4ae2?.[_0x19885b(0x23d)]),_0x5cb6d0=await this[_0x19885b(0x1e6)](_0x4a4ae2?.[_0x19885b(0x23d)]),_0x9fb134=await this['fetchBusinessProfile'](_0x4a4ae2?.[_0x19885b(0x23d)]);return{'wuid':_0x4a4ae2?.[_0x19885b(0x23d)]||_0x596c9c,'name':_0x4a4ae2?.[_0x19885b(0x3c5)],'numberExists':_0x4a4ae2?.[_0x19885b(0x3b8)],'picture':_0x516a61?.[_0x19885b(0x3f3)],'status':_0x5cb6d0?.[_0x19885b(0x49d)],'isBusiness':_0x9fb134[_0x19885b(0x6c2)],'email':_0x9fb134?.['email'],'description':_0x9fb134?.[_0x19885b(0x157)],'website':_0x9fb134?.[_0x19885b(0x417)]?.[_0x19885b(0x476)]()};}}catch{return this['logger'][_0x19885b(0x234)](_0x19885b(0x2b6)),{'wuid':_0x596c9c,'name':null,'picture':null,'status':null,'os':null,'isBusiness':!0x1};}}async['fetchProfile'](_0x2bd4b4){const _0x20d7e3=a0_0x27119e;let _0xabc60c=_0x2bd4b4?this['createJid'](_0x2bd4b4):this[_0x20d7e3(0x18c)]?.['user']?.['id'];this[_0x20d7e3(0x6cb)][_0x20d7e3(0x234)](_0x20d7e3(0x5df)+_0xabc60c);let _0x178b37=await Fe['findOne']({'id':_0xabc60c}),_0x1a131e=_0x178b37?_0x178b37[_0x20d7e3(0x571)]:null;try{let _0x494c98=(await this[_0x20d7e3(0x678)]({'numbers':[_0xabc60c]}))?.[_0x20d7e3(0x476)](),_0x3bc22c=await this[_0x20d7e3(0x160)](_0x494c98?.[_0x20d7e3(0x23d)]),_0x149e73=await this[_0x20d7e3(0x1e6)](_0x494c98?.['jid']),_0x4645db=await this[_0x20d7e3(0x311)](_0x494c98?.[_0x20d7e3(0x23d)]),_0x33a94c={'imagechat':_0x3bc22c?.[_0x20d7e3(0x3f3)],'contactname':_0x1a131e||null,'status':_0x149e73?.[_0x20d7e3(0x49d)],'isBusiness':_0x4645db['isBusiness'],'email':_0x4645db?.['email'],'description':_0x4645db?.[_0x20d7e3(0x157)],'website':_0x4645db?.[_0x20d7e3(0x417)]?.['shift'](),'lastcache':Date[_0x20d7e3(0x541)]()},_0x5534ca=await D[_0x20d7e3(0x6a6)]({'id':_0xabc60c,'owner':this['instance'][_0x20d7e3(0x106)]},{'$set':_0x33a94c,'$setOnInsert':{'name':_0x494c98?.[_0x20d7e3(0x3c5)]||null}},{'upsert':!0x0,'new':!0x0});return _0x5534ca&&q(this[_0x20d7e3(0x492)],'chats',{'chat':_0x5534ca}),{'wuid':_0x494c98?.[_0x20d7e3(0x23d)]||_0xabc60c,'name':_0x494c98?.[_0x20d7e3(0x3c5)],'numberExists':_0x494c98?.[_0x20d7e3(0x3b8)],'picture':_0x3bc22c?.[_0x20d7e3(0x3f3)],'status':_0x149e73?.[_0x20d7e3(0x49d)],'isBusiness':_0x4645db[_0x20d7e3(0x6c2)],'email':_0x4645db?.[_0x20d7e3(0x5c3)],'description':_0x4645db?.['description'],'website':_0x4645db?.[_0x20d7e3(0x417)]?.['shift']()};}catch(_0x12384d){return this[_0x20d7e3(0x6cb)][_0x20d7e3(0x258)]('Error\x20fetching\x20and\x20updating\x20profile:\x20'+_0x12384d),{};}}async['fetchBusinessProfile'](_0x5b2cbf){const _0x5d6943=a0_0x27119e;this[_0x5d6943(0x6cb)][_0x5d6943(0x234)](_0x5d6943(0x472));try{let _0x2a6aa9=_0x5b2cbf?this[_0x5d6943(0x4d4)](_0x5b2cbf):this[_0x5d6943(0x333)]['wuid'],_0x104dcb=await this[_0x5d6943(0x18c)][_0x5d6943(0x4c8)](_0x2a6aa9);return this['logger'][_0x5d6943(0x234)](_0x5d6943(0x207)),_0x104dcb?(this[_0x5d6943(0x6cb)]['verbose'](_0x5d6943(0x2ea)),{'isBusiness':!0x0,..._0x104dcb}):{'isBusiness':!0x1,'message':'Not\x20is\x20business\x20profile',...(await this[_0x5d6943(0x678)]({'numbers':[_0x2a6aa9]}))?.[_0x5d6943(0x476)]()};}catch(_0x5c8e95){throw new A(_0x5d6943(0x1ac),_0x5c8e95[_0x5d6943(0x3cb)]());}}async[a0_0x27119e(0x1e6)](_0x404527){const _0x515804=a0_0x27119e;let _0x138a97=this[_0x515804(0x4d4)](_0x404527);try{return{'wuid':_0x138a97,'status':(await this[_0x515804(0x18c)][_0x515804(0x272)](_0x138a97))?.[_0x515804(0x49d)]};}catch{return{'wuid':_0x138a97,'status':null};}}async[a0_0x27119e(0x49f)](_0x1ad4b4){const _0x65157b=a0_0x27119e;try{return await this[_0x65157b(0x18c)][_0x65157b(0x49f)](_0x1ad4b4),{'update':_0x65157b(0x250)};}catch(_0x2db58e){throw new A(_0x65157b(0x1ac),_0x2db58e[_0x65157b(0x3cb)]());}}async[a0_0x27119e(0x607)](_0xdb6cf6){const _0x4cbe2a=a0_0x27119e;try{return await this[_0x4cbe2a(0x18c)][_0x4cbe2a(0x607)](_0xdb6cf6),{'update':_0x4cbe2a(0x250)};}catch(_0xa4aae8){throw new A(_0x4cbe2a(0x1ba),_0xa4aae8[_0x4cbe2a(0x3cb)]());}}async[a0_0x27119e(0x166)](_0x4c7abf){const _0x467ee7=a0_0x27119e;try{let _0x59d479;if((0x0,k[_0x467ee7(0x3a5)])(_0x4c7abf)){let _0x1fd068=new Date()[_0x467ee7(0x2cc)](),_0x25adad=_0x4c7abf+_0x467ee7(0x2bd)+_0x1fd068;_0x59d479=(await ue[_0x467ee7(0x2c9)][_0x467ee7(0x201)](_0x25adad,{'responseType':_0x467ee7(0x44d)}))['data'];}else{if((0x0,k[_0x467ee7(0x49a)])(_0x4c7abf))_0x59d479=Buffer[_0x467ee7(0x664)](_0x4c7abf,_0x467ee7(0x364));else throw new g(_0x467ee7(0x305));}return await this['client'][_0x467ee7(0x166)](this[_0x467ee7(0x333)][_0x467ee7(0x106)],_0x59d479),{'update':_0x467ee7(0x250)};}catch(_0x249a7d){throw new A('Error\x20updating\x20profile\x20picture',_0x249a7d[_0x467ee7(0x3cb)]());}}async[a0_0x27119e(0x206)](){const _0x583e28=a0_0x27119e;try{return await this[_0x583e28(0x18c)][_0x583e28(0x206)](this[_0x583e28(0x333)][_0x583e28(0x106)]),{'update':'success'};}catch(_0x503b4b){throw new A(_0x583e28(0x337),_0x503b4b[_0x583e28(0x3cb)]());}}async[a0_0x27119e(0x2d5)](_0x4eed42){const _0x3a3747=a0_0x27119e;try{let _0x1552da=_0x4eed42[_0x3a3747(0x54a)][_0x3a3747(0x2c7)](_0x2f5743=>this[_0x3a3747(0x4d4)](_0x2f5743)),{id:_0x4c6398}=await this['client'][_0x3a3747(0x61d)](_0x4eed42['subject'],_0x1552da);return _0x4eed42?.['description']&&await this[_0x3a3747(0x18c)][_0x3a3747(0x617)](_0x4c6398,_0x4eed42[_0x3a3747(0x157)]),{'metadata':await this[_0x3a3747(0x18c)]['groupMetadata'](_0x4c6398)};}catch(_0x369b9f){throw this[_0x3a3747(0x6cb)][_0x3a3747(0x258)](this['instanceName']+'\x20('+this[_0x3a3747(0x333)]['wuid']+_0x3a3747(0x611)+_0x369b9f),new A(_0x3a3747(0x569),_0x369b9f[_0x3a3747(0x3cb)]());}}async['updateGroupPicture'](_0x5970d1){const _0x16e672=a0_0x27119e;try{let _0x3d0326;if((0x0,k['isURL'])(_0x5970d1[_0x16e672(0x53e)])){let _0x330ec4=new Date()[_0x16e672(0x2cc)](),_0x1644a9=_0x5970d1[_0x16e672(0x53e)]+_0x16e672(0x2bd)+_0x330ec4;_0x3d0326=(await ue[_0x16e672(0x2c9)]['get'](_0x1644a9,{'responseType':_0x16e672(0x44d)}))[_0x16e672(0x5a7)];}else{if((0x0,k[_0x16e672(0x49a)])(_0x5970d1[_0x16e672(0x53e)]))_0x3d0326=Buffer[_0x16e672(0x664)](_0x5970d1[_0x16e672(0x53e)],'base64');else throw new g(_0x16e672(0x305));}return await this[_0x16e672(0x18c)][_0x16e672(0x166)](_0x5970d1[_0x16e672(0x5cf)],_0x3d0326),{'update':_0x16e672(0x250)};}catch(_0x9c0ef0){throw new A(_0x16e672(0x152),_0x9c0ef0[_0x16e672(0x3cb)]());}}async['findGroup'](_0x53ff7c,_0x4126a9='out'){const _0x2d3e66=a0_0x27119e;try{let _0x5eb246=await this[_0x2d3e66(0x18c)][_0x2d3e66(0x5c5)](_0x53ff7c[_0x2d3e66(0x5cf)]),_0x1588b9=null;try{_0x1588b9=await this[_0x2d3e66(0x18c)][_0x2d3e66(0x3f3)](_0x53ff7c[_0x2d3e66(0x5cf)],_0x2d3e66(0x53e));}catch(_0x9db2bb){this[_0x2d3e66(0x6cb)][_0x2d3e66(0x234)](this[_0x2d3e66(0x492)]+'\x20('+this['instance'][_0x2d3e66(0x106)]+_0x2d3e66(0x567)+_0x53ff7c[_0x2d3e66(0x5cf)]+':\x20'+_0x9db2bb[_0x2d3e66(0x3cb)]());}let _0x2d7b3a=await D[_0x2d3e66(0x6a6)]({'id':_0x53ff7c['groupJid'],'owner':this[_0x2d3e66(0x333)][_0x2d3e66(0x106)]},{'$set':{'imagechat':_0x1588b9,'name':_0x5eb246[_0x2d3e66(0x5d7)],'group_size':_0x5eb246['size'],'group_announce':_0x5eb246['announce'],'lastcache':Date[_0x2d3e66(0x541)]()}},{'new':!0x0,'upsert':!0x0});return _0x2d7b3a&&q(this[_0x2d3e66(0x492)],_0x2d3e66(0x65a),{'chat':_0x2d7b3a}),{'metadata':_0x5eb246,'image':_0x1588b9};}catch(_0x353c89){if(_0x4126a9===_0x2d3e66(0x56a))return;throw new x(_0x2d3e66(0x5e1),_0x353c89[_0x2d3e66(0x3cb)]());}}async[a0_0x27119e(0x203)](_0x4c9179){const _0x5ed97a=a0_0x27119e;try{return await this[_0x5ed97a(0x18c)]['groupUpdateDescription'](_0x4c9179[_0x5ed97a(0x5cf)],_0x4c9179[_0x5ed97a(0x157)]),{'update':'success'};}catch(_0x43c0e5){throw new A(_0x5ed97a(0x621),_0x43c0e5[_0x5ed97a(0x3cb)]());}}async[a0_0x27119e(0x29f)](_0x1982c2){const _0x49ec41=a0_0x27119e;try{return await this['client']['groupUpdateSubject'](_0x1982c2[_0x49ec41(0x5cf)],_0x1982c2[_0x49ec41(0x3c5)]),{'update':'success'};}catch(_0x55e5b1){throw new A('Error\x20change\x20group\x20name',_0x55e5b1[_0x49ec41(0x3cb)]());}}async['groupSetting'](_0x4f30a3){const _0x2109f7=a0_0x27119e;try{return await this[_0x2109f7(0x18c)][_0x2109f7(0x367)](_0x4f30a3[_0x2109f7(0x5cf)],_0x4f30a3[_0x2109f7(0xff)]),{'update':_0x2109f7(0x250)};}catch(_0x3e6cb3){throw new A(_0x2109f7(0x1d7),_0x3e6cb3[_0x2109f7(0x3cb)]());}}async[a0_0x27119e(0x1c8)](){const _0x369b3a=a0_0x27119e;try{let _0x189c77=[],_0x19df94=await this[_0x369b3a(0x18c)][_0x369b3a(0x20e)](),_0x4e5139=Object['values'](_0x19df94),_0x4e3ad2=_0x4e5139['filter'](_0x43c9ec=>(0x0,w['isJidGroup'])(_0x43c9ec?.['id']))[_0x369b3a(0x2c7)](async _0x317172=>{const _0x3e9ab6=_0x369b3a;try{return await this['client']['profilePictureUrl'](_0x317172['id'],_0x3e9ab6(0x53e));}catch(_0x5ad843){return this[_0x3e9ab6(0x6cb)]['verbose'](this[_0x3e9ab6(0x492)]+'\x20('+this[_0x3e9ab6(0x333)][_0x3e9ab6(0x106)]+_0x3e9ab6(0x567)+_0x317172['id']+':\x20'+_0x5ad843['toString']()),null;}}),_0x47ceb1=await Promise['all'](_0x4e3ad2);for(let _0x3f00ac=0x0;_0x3f00ac<_0x4e5139['length'];_0x3f00ac++){let _0x1abe9e=_0x4e5139[_0x3f00ac];(0x0,w[_0x369b3a(0x2d9)])(_0x1abe9e?.['id'])&&_0x189c77[_0x369b3a(0x461)]({'groupJid':_0x1abe9e?.['id'],'subject':_0x1abe9e?.[_0x369b3a(0x5d7)],'subjectOwner':_0x1abe9e?.[_0x369b3a(0x4ee)]?.['split']('@')[0x0],'subjectTime':_0x1abe9e?.[_0x369b3a(0x6d8)],'size':_0x1abe9e?.[_0x369b3a(0x54a)]?.['length'],'owner':_0x1abe9e?.[_0x369b3a(0x1a7)]?.[_0x369b3a(0x29e)]('@')[0x0],'creation':_0x1abe9e?.[_0x369b3a(0x570)],'desc':_0x1abe9e?.[_0x369b3a(0x480)],'restrict':_0x1abe9e?.[_0x369b3a(0x300)],'announce':_0x1abe9e?.[_0x369b3a(0x5a8)],'image':_0x47ceb1[_0x3f00ac]});}return _0x189c77;}catch(_0x1a17d6){throw new x(_0x369b3a(0x5e1),_0x1a17d6[_0x369b3a(0x3cb)]());}}async[a0_0x27119e(0x620)](_0x1b45ba){const _0x117e5b=a0_0x27119e;try{let _0x3abd75=await this[_0x117e5b(0x18c)][_0x117e5b(0x1db)](_0x1b45ba['groupJid']);return{'inviteUrl':_0x117e5b(0x243)+_0x3abd75,'inviteCode':_0x3abd75};}catch(_0x36e303){throw new x(_0x117e5b(0x23c),_0x36e303[_0x117e5b(0x3cb)]());}}async[a0_0x27119e(0x4b2)](_0x1078b7){const _0x49fea4=a0_0x27119e;try{let _0x4b1351=await this[_0x49fea4(0x18c)][_0x49fea4(0x289)](_0x1078b7[_0x49fea4(0x5cf)]);return{'revoked':!0x0,'inviteUrl':'https://chat.whatsapp.com/'+_0x4b1351,'inviteCode':_0x4b1351};}catch(_0x24cdad){throw new x(_0x49fea4(0x2ad),_0x24cdad['toString']());}}async[a0_0x27119e(0x26b)](_0x406483){const _0x2aa85b=a0_0x27119e;try{if((0x0,k[_0x2aa85b(0x3a5)])(_0x406483['inviteCode']))var _0x2c72a9=_0x406483[_0x2aa85b(0x620)][_0x2aa85b(0x29e)]('/')[0x3];else var _0x2c72a9=_0x406483[_0x2aa85b(0x620)];let _0x2ca9cc=await this[_0x2aa85b(0x18c)][_0x2aa85b(0x4de)](_0x2c72a9);return this['logger'][_0x2aa85b(0x234)](this[_0x2aa85b(0x492)]+'\x20('+this[_0x2aa85b(0x333)]['wuid']+_0x2aa85b(0x611)+_0x2ca9cc),{'join':!0x0,'inviteCode':_0x2c72a9,'groupJid':_0x2ca9cc};}catch(_0x4f3e01){throw new x('No\x20join\x20group\x20invite\x20code\x20or\x20url',_0x4f3e01['toString']());}}async[a0_0x27119e(0x5ea)](_0x421ffd){const _0x4bda03=a0_0x27119e;try{return{'participants':(await this[_0x4bda03(0x18c)][_0x4bda03(0x5c5)](_0x421ffd[_0x4bda03(0x5cf)]))[_0x4bda03(0x54a)]};}catch(_0x3771b2){throw new x(_0x4bda03(0x15e),_0x3771b2[_0x4bda03(0x3cb)]());}}async[a0_0x27119e(0x107)](_0x11d0a5){const _0x394281=a0_0x27119e;try{let _0x1560dd=_0x11d0a5[_0x394281(0x54a)][_0x394281(0x2c7)](_0x2b66af=>this[_0x394281(0x4d4)](_0x2b66af));return{'updateParticipants':await this[_0x394281(0x18c)][_0x394281(0x648)](_0x11d0a5['groupJid'],_0x1560dd,_0x11d0a5[_0x394281(0x681)])};}catch(_0x1e02bb){throw new g(_0x394281(0x298),_0x1e02bb[_0x394281(0x3cb)]());}}async[a0_0x27119e(0x108)](_0x25b534){const _0x3d63ca=a0_0x27119e;try{let _0x39c2b5=await this[_0x3d63ca(0x18c)][_0x3d63ca(0x605)](_0x25b534['groupJid'],_0x25b534[_0x3d63ca(0x50e)]);return{'success':!0x0};}catch(_0x53e789){throw new g('Error\x20updating\x20setting',_0x53e789[_0x3d63ca(0x3cb)]());}}async['leaveGroup'](_0x356f33){const _0x4592ba=a0_0x27119e;try{return await this[_0x4592ba(0x18c)][_0x4592ba(0x4ca)](_0x356f33[_0x4592ba(0x5cf)]),{'groupJid':_0x356f33['groupJid'],'leave':!0x0};}catch(_0x2aa6e1){throw new g(_0x4592ba(0x346),_0x2aa6e1['toString']());}}async[a0_0x27119e(0x306)](_0x113756){const _0x243666=a0_0x27119e;return await this[_0x243666(0x657)](_0x113756[_0x243666(0x341)],{'poll':{'name':_0x113756['pollMessage']?.[_0x243666(0x3c5)],'selectableCount':_0x113756['pollMessage'][_0x243666(0x1fe)],'values':_0x113756[_0x243666(0x306)]['values']}},_0x113756?.[_0x243666(0x16b)]);}async[a0_0x27119e(0x47e)](_0x5d6c47,_0x5c7dac,_0x18e503){const _0x13aa58=a0_0x27119e;if(await this['getMessage'](_0x5d6c47,!0x0)){let _0x55bccb={'where':{'key':{'id':_0x5d6c47['id'],'remoteJid':_0x5c7dac,'fromMe':_0x5d6c47[_0x13aa58(0x170)]},'owner':this[_0x13aa58(0x333)][_0x13aa58(0x106)]}},_0x4117c6={'status':[_0x18e503[_0x13aa58(0x49d)]][0x0]};try{let _0x3c927d=await this['repository'][_0x13aa58(0x26e)][_0x13aa58(0x46a)](_0x55bccb,_0x4117c6);_0x3c927d&&q(this['instanceName'],'messages',{'message':_0x3c927d});}catch{}}}[a0_0x27119e(0x533)](_0xca0020){const _0x1f903f=a0_0x27119e;let _0x4036ca=_0xca0020[_0x1f903f(0x363)](/\\n/g,'\x0a')[_0x1f903f(0x29e)]('\x0a')[_0x1f903f(0x522)](_0x47fda3=>_0x47fda3[_0x1f903f(0x6ad)]('TEL')||_0x47fda3[_0x1f903f(0x6ad)](_0x1f903f(0x1aa))),_0x24cbb3='';return _0x4036ca[_0x1f903f(0xfc)](_0x1a96e3=>{const _0x282516=_0x1f903f;let _0x5dff00=/TEL(?:.*):(.+)/,_0xf72a31=/EMAIL(?:.*):(.+)/,_0x2e3561=_0x1a96e3[_0x282516(0x5ce)](_0x5dff00),_0x358491=_0x1a96e3['match'](_0xf72a31);if(_0x2e3561){let _0xc94d77=_0x2e3561[0x1][_0x282516(0x363)](/-| |\+|\(|\)/g,'')[_0x282516(0x294)]();_0x24cbb3+=_0x282516(0x45d)+_0xc94d77+'\x0a';}else{if(_0x358491){let _0x49d9a3=_0x358491[0x1][_0x282516(0x294)]();_0x24cbb3+=_0x282516(0x433)+_0x49d9a3+'\x0a';}}}),_0x24cbb3[_0x1f903f(0x294)]();}async[a0_0x27119e(0x5d5)](_0x4b0780,_0x136820,_0x644473){const _0x21bbd0=a0_0x27119e;let _0x579878=_0x136820[_0x21bbd0(0x4dc)][_0x21bbd0(0x3f7)],_0x17e3ea=_0x136820[_0x21bbd0(0x4dc)][_0x21bbd0(0x170)],_0x3a095f=_0x579878[_0x21bbd0(0x13a)](_0x21bbd0(0x46e));if(!_0x4b0780['ENABLED'])return;let _0x33a558={'$set':{..._0x17e3ea?{'unreadcount':0x0,'lastmsg':_0x136820[_0x21bbd0(0x602)]||Date[_0x21bbd0(0x541)]()}:{'lastmsg':_0x136820['messageTimestamp']||Date['now']()},..._0x17e3ea||_0x3a095f?{}:{'name':_0x136820[_0x21bbd0(0x571)]}},'$setOnInsert':{'group':_0x3a095f,'leadInfo.tags':[],'leadInfo.customFields':[],...!_0x17e3ea&&!_0x3a095f?{'leadInfo.nome':_0x136820['pushName']}:{}},..._0x17e3ea?{}:{'$inc':{'unreadcount':0x1}}},_0x27d1c2={'new':!0x0,'upsert':!0x0,'setDefaultsOnInsert':!0x0},_0x163d19=await D[_0x21bbd0(0x6a6)]({'id':_0x579878,'owner':this[_0x21bbd0(0x333)][_0x21bbd0(0x106)]},_0x33a558,_0x27d1c2);if(_0x163d19?(!_0x3a095f&&(!_0x163d19['leadInfo']||!_0x163d19[_0x21bbd0(0x226)][_0x21bbd0(0x378)])&&_0x136820[_0x21bbd0(0x571)]&&!_0x17e3ea&&(_0x33a558={'$set':{'leadInfo.nome':_0x136820[_0x21bbd0(0x571)]}},_0x163d19=await D[_0x21bbd0(0x6a6)]({'id':_0x579878,'owner':this['instance'][_0x21bbd0(0x106)]},_0x33a558,_0x27d1c2)),q(this['instanceName'],_0x21bbd0(0x65a),{'chat':_0x163d19})):this[_0x21bbd0(0x6cb)]['error'](this['instanceName']+'\x20('+this[_0x21bbd0(0x333)][_0x21bbd0(0x106)]+_0x21bbd0(0x194)),!this['AutomateSystem']?.['flowConfig']['enabled'])return this[_0x21bbd0(0x6cb)][_0x21bbd0(0x234)](this[_0x21bbd0(0x492)]+'\x20('+this[_0x21bbd0(0x333)][_0x21bbd0(0x106)]+_0x21bbd0(0x62b)),null;if(_0x163d19['id']['includes'](_0x21bbd0(0x46e))&&this['AutomateSystem']?.[_0x21bbd0(0x3ba)][_0x21bbd0(0x518)]===!0x0)return this[_0x21bbd0(0x6cb)][_0x21bbd0(0x234)](this[_0x21bbd0(0x492)]+'\x20('+this['instance']['wuid']+_0x21bbd0(0x44e)),null;if(_0x163d19[_0x21bbd0(0x226)]){if(_0x163d19[_0x21bbd0(0x226)][_0x21bbd0(0x15b)]===0x0||_0x163d19[_0x21bbd0(0x226)][_0x21bbd0(0x2a2)])return this['logger'][_0x21bbd0(0x234)](this[_0x21bbd0(0x492)]+'\x20('+this[_0x21bbd0(0x333)][_0x21bbd0(0x106)]+_0x21bbd0(0x352)+_0x579878+',\x20saindo.'),null;if(_0x163d19[_0x21bbd0(0x226)]['desativadoFluxoAte']>Date['now']())return this[_0x21bbd0(0x6cb)]['verbose'](this[_0x21bbd0(0x492)]+'\x20('+this[_0x21bbd0(0x333)][_0x21bbd0(0x106)]+_0x21bbd0(0x138)+new Date(_0x163d19['leadInfo'][_0x21bbd0(0x15b)])[_0x21bbd0(0x17d)]()+_0x21bbd0(0x37d)),null;}this['logger'][_0x21bbd0(0x234)](this['instanceName']+'\x20('+this[_0x21bbd0(0x333)]['wuid']+_0x21bbd0(0x360)),this[_0x21bbd0(0x501)](_0x644473,_0x136820,this[_0x21bbd0(0x333)][_0x21bbd0(0x106)]);}async[a0_0x27119e(0x604)](){const _0x84fbfe=a0_0x27119e;let _0x183032=await this[_0x84fbfe(0x28a)]['contact'][_0x84fbfe(0x36e)]({'where':{'owner':this['instance'][_0x84fbfe(0x106)]}}),_0x2869d2=0x0,_0x10beb9=[];for(let _0x43006e of _0x183032)_0x10beb9['push']({'updateOne':{'filter':{'id':_0x43006e['id'],'owner':this['instance']['wuid']},'update':{'$set':{'contactname':_0x43006e['pushName']}}}}),_0x10beb9[_0x84fbfe(0x57f)]===0x1f4&&(_0x2869d2+=await this[_0x84fbfe(0x32c)](_0x10beb9),_0x10beb9=[]);_0x10beb9[_0x84fbfe(0x57f)]>0x0&&(_0x2869d2+=await this[_0x84fbfe(0x32c)](_0x10beb9)),this['logger'][_0x84fbfe(0x234)](this[_0x84fbfe(0x492)]+'\x20('+this[_0x84fbfe(0x333)][_0x84fbfe(0x106)]+_0x84fbfe(0x611)+_0x2869d2+_0x84fbfe(0x1be)+this[_0x84fbfe(0x333)][_0x84fbfe(0x106)]+'\x20foram\x20adicionados\x20\x22contactname\x22\x20');}async[a0_0x27119e(0x32c)](_0x226959){const _0x86d348=a0_0x27119e;return(await D[_0x86d348(0x3e4)](_0x226959))['modifiedCount'];}async[a0_0x27119e(0x5bc)](_0x4f2864,_0xd23f91){const _0x6b7f9c=a0_0x27119e;if(_0xd23f91['ENABLED']){let _0x10601f=_0x4f2864[_0x6b7f9c(0x2c7)](async _0x43eabb=>{const _0x19d401=_0x6b7f9c;try{let _0x5f35f8={'$set':{'id':_0x43eabb['id'],'owner':_0x43eabb[_0x19d401(0x1a7)],'lastcache':0x0}};if(_0x43eabb[_0x19d401(0x13b)]!==null&&(_0x5f35f8[_0x19d401(0x2b2)]['group']=_0x43eabb[_0x19d401(0x13b)]),_0x43eabb[_0x19d401(0x3c5)]!==null&&(_0x5f35f8[_0x19d401(0x2b2)]['name']=_0x43eabb['name']),_0x43eabb[_0x19d401(0x4fa)]!==null&&(_0x5f35f8['$set'][_0x19d401(0x4fa)]=_0x43eabb[_0x19d401(0x4fa)]),_0x43eabb[_0x19d401(0x560)]!==null&&(_0x5f35f8['$set']['imagechat']=_0x43eabb[_0x19d401(0x560)]),_0x43eabb[_0x19d401(0x560)]===null&&(_0x5f35f8['$set'][_0x19d401(0x560)]=_0x19d401(0x698)),_0x43eabb[_0x19d401(0x597)]!==null&&(_0x5f35f8[_0x19d401(0x2b2)][_0x19d401(0x597)]=_0x43eabb['lastmsg']),_0x43eabb[_0x19d401(0x2de)]!==null&&(_0x5f35f8['$set'][_0x19d401(0x2de)]=_0x43eabb[_0x19d401(0x2de)]),_0x43eabb[_0x19d401(0x4a2)]!==null&&(_0x5f35f8[_0x19d401(0x2b2)][_0x19d401(0x4a2)]=_0x43eabb['unreadcount']),Object[_0x19d401(0x410)](_0x5f35f8[_0x19d401(0x2b2)])[_0x19d401(0x57f)]>0x0)return await D[_0x19d401(0x6a6)]({'id':_0x43eabb['id'],'owner':_0x43eabb['owner']},_0x5f35f8,{'new':!0x0,'upsert':!0x0});}catch(_0x152bdb){return console[_0x19d401(0x258)](_0x19d401(0x10d)+_0x43eabb['id']+':',_0x152bdb),null;}}),_0x187bb4=(await Promise[_0x6b7f9c(0x149)](_0x10601f))[_0x6b7f9c(0x522)](_0x594542=>_0x594542!==null)[_0x6b7f9c(0x57f)];this[_0x6b7f9c(0x6cb)]['verbose'](this['instanceName']+'\x20('+this[_0x6b7f9c(0x333)][_0x6b7f9c(0x106)]+_0x6b7f9c(0x611)+_0x187bb4+'\x20chats\x20de\x20'+this['instance'][_0x6b7f9c(0x106)]+_0x6b7f9c(0x2f3));}}async[a0_0x27119e(0x531)](_0x64ea42){const _0x286f81=a0_0x27119e;this[_0x286f81(0x6cb)][_0x286f81(0x234)](this['instanceName']+'\x20('+this[_0x286f81(0x333)][_0x286f81(0x106)]+'):\x20Ler\x20mensagem');let _0x584808={'readMessages':[{'remoteJid':_0x64ea42['chatLog'][_0x286f81(0x348)]['key'][_0x286f81(0x3f7)],'fromMe':_0x64ea42['chatLog'][_0x286f81(0x348)][_0x286f81(0x4dc)]['fromMe'],'id':_0x64ea42[_0x286f81(0x503)][_0x286f81(0x348)][_0x286f81(0x4dc)]['id']}]};await this[_0x286f81(0x19e)](_0x584808);}async[a0_0x27119e(0x501)](_0x5883bc,_0x5a8c3a,_0x21047a){const _0x5eb52a=a0_0x27119e;try{let {key:_0x569480,message_normalized:_0x144949}=_0x5a8c3a,_0x313123=_0x144949,_0x4bdfff=_0x144949['text']||_0x144949[_0x5eb52a(0x178)]||_0x144949['vote']||_0x144949[_0x5eb52a(0x3c5)],_0x1c11c8=_0x569480[_0x5eb52a(0x3f7)],_0x54a11b;if(_0x313123[_0x5eb52a(0x4dc)][_0x5eb52a(0x170)]&&_0x4bdfff[_0x5eb52a(0x294)]()!==this[_0x5eb52a(0x534)]?.['flowConfig'][_0x5eb52a(0x109)][_0x5eb52a(0x294)]())return this[_0x5eb52a(0x6cb)][_0x5eb52a(0x234)](this[_0x5eb52a(0x492)]+'\x20('+this[_0x5eb52a(0x333)]['wuid']+_0x5eb52a(0x38a)),null;if(_0x313123[_0x5eb52a(0x4dc)]['fromMe']&&_0x4bdfff[_0x5eb52a(0x294)]()===this[_0x5eb52a(0x534)]?.[_0x5eb52a(0x3ba)][_0x5eb52a(0x109)][_0x5eb52a(0x294)]()){this[_0x5eb52a(0x6cb)]['verbose'](this[_0x5eb52a(0x492)]+'\x20('+this[_0x5eb52a(0x333)][_0x5eb52a(0x106)]+_0x5eb52a(0x6d6));let _0x277392=await F['find']({'owner':_0x21047a,'remoteJid':_0x1c11c8,'status':_0x5eb52a(0x43f)});this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x5eb52a(0x333)][_0x5eb52a(0x106)]+_0x5eb52a(0x3c8)+_0x277392);let _0x1b62a8=Date[_0x5eb52a(0x541)](),_0xd80526;return this['AutomateSystem']?.[_0x5eb52a(0x3ba)][_0x5eb52a(0x5be)]===0x0?_0xd80526={'stoppedUntil':_0x1b62a8+0x7591f6200}:_0xd80526={'stoppedUntil':_0x1b62a8+this['AutomateSystem']?.['flowConfig'][_0x5eb52a(0x5be)]*0x3c*0x3e8},this['logger']['verbose'](this[_0x5eb52a(0x492)]+'\x20('+this['instance'][_0x5eb52a(0x106)]+_0x5eb52a(0x641)+_0xd80526),this[_0x5eb52a(0x123)](_0x54a11b,_0xd80526['stoppedUntil']),null;}if(_0x4bdfff&&_0x4bdfff[_0x5eb52a(0x439)](this['AutomateSystem']?.[_0x5eb52a(0x3ba)]['prefixCommand'])&&_0x4bdfff[_0x5eb52a(0x57f)]>0x4){let _0x6e7f63=await I['findOne']({'owner':_0x21047a,'startCommandWord':_0x4bdfff});if(this[_0x5eb52a(0x6cb)][_0x5eb52a(0x234)](this[_0x5eb52a(0x492)]+'\x20('+this[_0x5eb52a(0x333)]['wuid']+_0x5eb52a(0x6a3)),_0x6e7f63)_0x54a11b=await this[_0x5eb52a(0x64b)](_0x6e7f63,_0x313123[_0x5eb52a(0x4dc)],_0x313123);else return this['logger'][_0x5eb52a(0x234)](this[_0x5eb52a(0x492)]+'\x20('+this[_0x5eb52a(0x333)][_0x5eb52a(0x106)]+_0x5eb52a(0x2d2)),null;}else _0x54a11b=await this[_0x5eb52a(0x3f1)](_0x21047a,_0x1c11c8,_0x313123);if(_0x54a11b){this[_0x5eb52a(0x6cb)][_0x5eb52a(0x234)](this[_0x5eb52a(0x492)]+'\x20('+this[_0x5eb52a(0x333)]['wuid']+'):\x20Encontrou\x20conversa\x20no\x20startBot:\x20'),!_0x569480['fromMe']&&_0x54a11b['readMessages']&&this[_0x5eb52a(0x531)](_0x54a11b);let _0x39a93e=await this[_0x5eb52a(0x504)](_0x54a11b);_0x39a93e&&await this[_0x5eb52a(0x10e)](_0x54a11b,_0x39a93e,_0x54a11b['remoteJid']);}}catch(_0x22f78b){this[_0x5eb52a(0x6cb)]['error'](this[_0x5eb52a(0x492)]+'\x20('+this[_0x5eb52a(0x333)]['wuid']+_0x5eb52a(0x13c)+_0x22f78b);}}[a0_0x27119e(0x3d0)](_0x4ae49e,_0x394342='',_0x2f4922={},_0x35c7e1=!0x0){const _0x782ac1=a0_0x27119e;for(let _0x226c5a in _0x4ae49e){let _0x7f0f6d=_0x35c7e1?'_'+_0x226c5a:''+_0x394342+_0x226c5a;typeof _0x4ae49e[_0x226c5a]==_0x782ac1(0x5f1)&&_0x4ae49e[_0x226c5a]!==null?this[_0x782ac1(0x3d0)](_0x4ae49e[_0x226c5a],_0x7f0f6d+'.',_0x2f4922,!0x1):_0x2f4922[_0x7f0f6d]=_0x4ae49e[_0x226c5a];}return _0x2f4922;}[a0_0x27119e(0x6a0)](_0x5befa6){const _0x4783a4=a0_0x27119e;let _0x3770aa={};for(let _0x2957f3 of _0x5befa6)typeof _0x2957f3[_0x4783a4(0x3c5)]=='string'&&typeof _0x2957f3[_0x4783a4(0x55f)]=='string'&&(_0x3770aa[_0x2957f3[_0x4783a4(0x3c5)]]=_0x2957f3[_0x4783a4(0x55f)]);return _0x3770aa;}async[a0_0x27119e(0x504)](_0x59cb22){const _0x9069d6=a0_0x27119e;if(!this[_0x9069d6(0x534)]?.[_0x9069d6(0x3ba)][_0x9069d6(0x3b1)]||_0x59cb22[_0x9069d6(0x49d)]!==_0x9069d6(0x43f)&&_0x59cb22[_0x9069d6(0x3af)]==='')return null;let _0x4e1d95=_0x59cb22[_0x9069d6(0x503)][_0x9069d6(0x1bb)]||_0x9069d6(0x407);typeof _0x59cb22[_0x9069d6(0x503)]['lastCondition']>'u'&&(_0x59cb22[_0x9069d6(0x503)][_0x9069d6(0x1dd)]=!0x0);let _0x5e7fc2=_0x59cb22['chatLog'][_0x9069d6(0x1dd)];this[_0x9069d6(0x6cb)][_0x9069d6(0x234)](this[_0x9069d6(0x492)]+'\x20('+this[_0x9069d6(0x333)][_0x9069d6(0x106)]+_0x9069d6(0x5b6)+_0x4e1d95+',\x20lastCondition:\x20'+_0x5e7fc2);let _0x6ec518=_0x4e1d95==='start'?_0x59cb22[_0x9069d6(0x3e8)][_0x9069d6(0x36e)](_0x19b495=>_0x19b495[_0x9069d6(0x10c)]===_0x9069d6(0x407)):_0x59cb22[_0x9069d6(0x3e8)]['find'](_0xe5a490=>_0xe5a490['_id'][_0x9069d6(0x3cb)]()===_0x4e1d95[_0x9069d6(0x3cb)]());if(!_0x6ec518)return this[_0x9069d6(0x6cb)][_0x9069d6(0x258)](this['instanceName']+'\x20('+this[_0x9069d6(0x333)]['wuid']+'):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20'+_0x4e1d95),null;let _0x3df42a={'_pushName':_0x59cb22[_0x9069d6(0x503)]['lastReceivedMessage'][_0x9069d6(0x571)],..._0x59cb22[_0x9069d6(0x503)]['realVariables']},_0xf75e69=null;if(_0x59cb22['waitingPoll_id']){let _0x290991=_0x59cb22['chatLog'][_0x9069d6(0x348)]['vote'],_0x538cb0=_0x59cb22[_0x9069d6(0x30d)]['find'](_0x2c8059=>_0x2c8059[_0x9069d6(0x162)]===_0x290991);if(_0x538cb0){let _0x39c05e=_0x538cb0[_0x9069d6(0x64a)];if(_0xf75e69=_0x59cb22[_0x9069d6(0x3e8)][_0x9069d6(0x36e)](_0xfe88a7=>_0xfe88a7[_0x9069d6(0x1a3)]===_0x39c05e&&_0xfe88a7[_0x9069d6(0x69f)]===0x1),_0x6ec518[_0x9069d6(0x3a7)][_0x9069d6(0x197)]){let _0x1e2f91={'id':_0x59cb22[_0x9069d6(0x3af)],'remoteJid':_0x59cb22['remoteJid'],'fromMe':!0x0};await this[_0x9069d6(0x4c3)](_0x1e2f91);}if(_0x6ec518[_0x9069d6(0x3a7)][_0x9069d6(0x197)]&&_0x6ec518['uazapi'][_0x9069d6(0x3be)]){let _0x559104={'number':_0x59cb22['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x9069d6(0x4ac)+_0x59cb22['waitingPoll_name']+_0x9069d6(0x1a6)+_0x290991}};await this[_0x9069d6(0x453)](_0x559104);}_0x59cb22[_0x9069d6(0x49d)]='open',_0x59cb22[_0x9069d6(0x3af)]='',_0x59cb22[_0x9069d6(0x4a7)]='',_0x59cb22['waitingPoll_replyOptions']=[];}else{this[_0x9069d6(0x6cb)][_0x9069d6(0x234)](this[_0x9069d6(0x492)]+'\x20('+this[_0x9069d6(0x333)][_0x9069d6(0x106)]+_0x9069d6(0x48b));let _0x50bf1b={'activatedCount':_0x59cb22[_0x9069d6(0x503)][_0x9069d6(0x2bb)]['filter'](_0x60a81c=>String(_0x60a81c[_0x9069d6(0x467)])===String(_0x4e1d95))[_0x9069d6(0x57f)],'moreLogs':[_0x9069d6(0x40e)]};if(_0x6ec518[_0x9069d6(0x3a7)][_0x9069d6(0x188)]){let _0x3df932={'number':_0x59cb22[_0x9069d6(0x3f7)],'options':{'delay':0x0},'textMessage':{'text':_0x6ec518[_0x9069d6(0x3a7)][_0x9069d6(0x188)]}};await this[_0x9069d6(0x453)](_0x3df932);}if(_0x6ec518[_0x9069d6(0x508)]!==void 0x0&&_0x50bf1b['activatedCount']>=_0x6ec518[_0x9069d6(0x508)]){let _0x8dcaa9=Date[_0x9069d6(0x541)](),_0x11591b=_0x6ec518[_0x9069d6(0x6ac)]??0xa;isNaN(_0x11591b)&&(_0x11591b=0xa);let _0x4b6bb7=_0x8dcaa9+_0x11591b*0x3c*0x3e8;_0x50bf1b[_0x9069d6(0x456)]=_0x4b6bb7,_0x50bf1b[_0x9069d6(0x4a6)]['push'](_0x9069d6(0x156)),this['updateStopChat'](_0x59cb22,_0x4b6bb7),_0x59cb22[_0x9069d6(0x3af)]='',_0x59cb22['waitingPoll_name']='',_0x59cb22[_0x9069d6(0x30d)]=[];}return this[_0x9069d6(0x12e)](_0x59cb22,_0x6ec518,_0x50bf1b,!0x0),null;}}if(_0x5e7fc2&&_0x6ec518[_0x9069d6(0x64a)]&&!_0x59cb22[_0x9069d6(0x3af)]){let _0x52496c=_0x59cb22[_0x9069d6(0x3e8)][_0x9069d6(0x522)](_0x15ff0f=>_0x15ff0f[_0x9069d6(0x1a3)][_0x9069d6(0x3cb)]()===_0x6ec518[_0x9069d6(0x64a)][_0x9069d6(0x3cb)]())[_0x9069d6(0x3e3)]((_0xe3809,_0x235070)=>_0xe3809[_0x9069d6(0x69f)]-_0x235070['order']);_0x52496c[_0x9069d6(0x57f)]>0x0&&(_0xf75e69=_0x52496c[0x0]);}if(!_0xf75e69){let _0x23b8c1=_0x6ec518[_0x9069d6(0x1a3)],_0x5b1e82=_0x59cb22[_0x9069d6(0x3e8)][_0x9069d6(0x522)](_0x5357b8=>_0x5357b8['groupId']===_0x23b8c1&&_0x5357b8[_0x9069d6(0x69f)]>_0x6ec518[_0x9069d6(0x69f)])[_0x9069d6(0x3e3)]((_0x4e8919,_0x29da3a)=>_0x4e8919[_0x9069d6(0x69f)]-_0x29da3a[_0x9069d6(0x69f)]);_0x5b1e82[_0x9069d6(0x57f)]>0x0&&(_0xf75e69=_0x5b1e82[0x0]);}if(!_0xf75e69)return _0x59cb22['status']=_0x9069d6(0x60e),null;_0x59cb22[_0x9069d6(0x503)][_0x9069d6(0x21c)]=_0x3df42a;let _0x9ba1b3=JSON[_0x9069d6(0x279)](JSON[_0x9069d6(0x5f2)](_0xf75e69));return this['replaceVariablesInObject'](_0x9ba1b3,_0x59cb22[_0x9069d6(0x503)][_0x9069d6(0x21c)]),_0x59cb22['chatLog'][_0x9069d6(0x1bb)]=_0x9ba1b3[_0x9069d6(0x303)],_0x59cb22[_0x9069d6(0x503)]['lastCondition']=!0x0,_0x9ba1b3;}[a0_0x27119e(0x661)](_0x3bb1c5,_0x2ca9f4){const _0x3dd303=a0_0x27119e;return _0x3bb1c5[_0x3dd303(0x363)](/\{\{([^}]+)\}\}/g,(_0x31ae57,_0x17deb0)=>_0x2ca9f4[_0x17deb0]||'');}['replaceVariablesInObject'](_0x39d248,_0x1785eb){const _0x17a915=a0_0x27119e;for(let _0x309aa5 in _0x39d248)typeof _0x39d248[_0x309aa5]=='string'?_0x39d248[_0x309aa5]=this[_0x17a915(0x661)](_0x39d248[_0x309aa5],_0x1785eb):typeof _0x39d248[_0x309aa5]==_0x17a915(0x5f1)&&this['replaceVariablesInObject'](_0x39d248[_0x309aa5],_0x1785eb);}async[a0_0x27119e(0x50f)](_0x5d1729,_0xf05319){const _0x528db9=a0_0x27119e;let _0x34fdf3=_0xf05319[_0x528db9(0x303)];if(_0x5d1729[_0x528db9(0x503)]&&_0x5d1729['chatLog'][_0x528db9(0x2bb)]){let _0x4326d0=_0x5d1729['chatLog'][_0x528db9(0x2bb)][_0x528db9(0x522)](_0x3d48d9=>String(_0x3d48d9[_0x528db9(0x467)])===String(_0x34fdf3))[_0x528db9(0x257)]();if(_0x4326d0&&_0x4326d0[_0x528db9(0x258)]&&_0xf05319[_0x528db9(0x27a)])return _0x5d1729[_0x528db9(0x49d)]=_0x528db9(0x60e),await this[_0x528db9(0x43b)](_0x5d1729),null;}if(_0xf05319[_0x528db9(0x10c)]===_0x528db9(0x3a7)&&_0xf05319[_0x528db9(0x3a7)][_0x528db9(0x45a)]===_0x528db9(0x1f1)&&_0x5d1729[_0x528db9(0x3af)])return _0x5d1729[_0x528db9(0x503)][_0x528db9(0x1bb)]=_0x34fdf3,await this[_0x528db9(0x43b)](_0x5d1729),null;let _0x539efe=await this[_0x528db9(0x504)](_0x5d1729);if(_0x5d1729[_0x528db9(0x503)]&&_0x5d1729[_0x528db9(0x503)][_0x528db9(0x2bb)]){let _0x5c17e3=_0x5d1729['chatLog'][_0x528db9(0x2bb)][_0x528db9(0x522)](_0x401569=>String(_0x401569[_0x528db9(0x467)])===String(_0x34fdf3))['length'];if(_0xf05319['maxActives']!==void 0x0&&_0x5c17e3>=_0xf05319[_0x528db9(0x508)]){let _0x2378a9=Date[_0x528db9(0x541)](),_0x1e6d10=_0xf05319[_0x528db9(0x6ac)]??0xa;isNaN(_0x1e6d10)&&(_0x1e6d10=0xa);let _0x230970=_0x2378a9+_0x1e6d10*0x3c*0x3e8,_0x59ba3c={'newStoppedUntil':_0x230970};return this[_0x528db9(0x123)](_0x5d1729,_0x230970),this[_0x528db9(0x12e)](_0x5d1729,_0xf05319,_0x59ba3c,!0x0),null;}}_0x539efe&&_0x539efe[_0x528db9(0x10c)]!=='save'&&await this['processblock'](_0x5d1729,_0x539efe,_0x5d1729[_0x528db9(0x3f7)]),_0x539efe||await this['saveConversationToDatabase'](_0x5d1729),_0x539efe&&_0x539efe['type']===_0x528db9(0x601)&&(_0x5d1729[_0x528db9(0x503)][_0x528db9(0x1bb)]=_0x34fdf3,await this[_0x528db9(0x43b)](_0x5d1729));}async[a0_0x27119e(0x10e)](_0x285a84,_0x4b6fef,_0x4394f4){const _0x5b3add=a0_0x27119e;try{let _0xc954a0=_0x4b6fef[_0x5b3add(0x10c)];this['logger']['verbose'](this[_0x5b3add(0x492)]+'\x20('+this[_0x5b3add(0x333)]['wuid']+'):\x20Going\x20to\x20'+_0xc954a0);let _0x18c86f={'uazapi':()=>this['processUazapi'](_0x285a84,_0x4b6fef,_0x4394f4),'save':()=>this[_0x5b3add(0x379)](_0x285a84,_0x4b6fef),'stop':()=>this[_0x5b3add(0x109)](_0x285a84,_0x4b6fef),'condition':()=>this[_0x5b3add(0x5ef)](_0x285a84,_0x4b6fef),'varedit':()=>this[_0x5b3add(0x159)](_0x285a84,_0x4b6fef),'apirequest':()=>this[_0x5b3add(0x387)](_0x285a84,_0x4b6fef),'goToFlow':()=>this['processgoToFlow'](_0x285a84,_0x4b6fef)}[_0xc954a0];_0x18c86f&&await _0x18c86f();}catch(_0x42380c){this[_0x5b3add(0x6cb)][_0x5b3add(0x258)](this[_0x5b3add(0x492)]+'\x20('+this[_0x5b3add(0x333)][_0x5b3add(0x106)]+_0x5b3add(0x3bd)+_0x42380c);}}async[a0_0x27119e(0x58d)](_0x42ab62,_0x47baaa){const _0x8c1b2a=a0_0x27119e;if(this[_0x8c1b2a(0x6cb)][_0x8c1b2a(0x234)](this['instanceName']+'\x20('+this[_0x8c1b2a(0x333)][_0x8c1b2a(0x106)]+'):\x20Entrou\x20na\x20função\x20goToFlow'),!_0x42ab62||!_0x47baaa)return this['logger'][_0x8c1b2a(0x258)](this[_0x8c1b2a(0x492)]+'\x20('+this[_0x8c1b2a(0x333)][_0x8c1b2a(0x106)]+_0x8c1b2a(0x369)),null;await this['updateConversation'](_0x42ab62,_0x47baaa,{},!0x0,!0x0),console[_0x8c1b2a(0x502)](_0x8c1b2a(0x395)),console[_0x8c1b2a(0x502)](_0x47baaa);let _0x3ccfe4=_0x47baaa[_0x8c1b2a(0x5c6)];console[_0x8c1b2a(0x502)](_0x8c1b2a(0x1ca),_0x3ccfe4),_0x42ab62=await this[_0x8c1b2a(0x464)](_0x3ccfe4,_0x42ab62[_0x8c1b2a(0x3f7)],_0x42ab62[_0x8c1b2a(0x503)][_0x8c1b2a(0x21c)]),this[_0x8c1b2a(0x6cb)][_0x8c1b2a(0x234)](this[_0x8c1b2a(0x492)]+'\x20('+this[_0x8c1b2a(0x333)][_0x8c1b2a(0x106)]+_0x8c1b2a(0x399));let _0xd0f503=await this[_0x8c1b2a(0x504)](_0x42ab62);_0xd0f503&&await this['processblock'](_0x42ab62,_0xd0f503,_0x42ab62['remoteJid']);}async[a0_0x27119e(0x464)](_0x7fe304,_0x1fb63c,_0x10eb42){const _0x3731b0=a0_0x27119e;this['logger'][_0x3731b0(0x234)](this[_0x3731b0(0x492)]+'\x20('+this['instance']['wuid']+'):\x20Criando\x20nova\x20conversa');try{if(_0x7fe304=await I[_0x3731b0(0x27b)]({'owner':this[_0x3731b0(0x333)]['wuid'],'name':_0x7fe304}),!_0x7fe304)return this[_0x3731b0(0x6cb)][_0x3731b0(0x258)](this[_0x3731b0(0x492)]+'\x20('+this[_0x3731b0(0x333)][_0x3731b0(0x106)]+_0x3731b0(0x4e2)),null;let _0x61341f=require('mongodb')[_0x3731b0(0x288)],_0x1e8e38=Date['now'](),_0x4e31b7=_0x3731b0(0x407),_0x891819={},_0x1b822d={},_0x36a58b={..._0x7fe304[_0x3731b0(0xf7)],'chatLog':null},_0x4c28ab={'lastReceivedMessage':_0x891819,'lastSendMessage':_0x1b822d,'lastBlockId':_0x4e31b7,'lastCondition':!0x0,'realVariables':_0x10eb42};_0x36a58b[_0x3731b0(0x503)]=_0x4c28ab,_0x36a58b[_0x3731b0(0x503)][_0x3731b0(0x21c)]={..._0x10eb42},delete _0x36a58b[_0x3731b0(0x303)],_0x36a58b[_0x3731b0(0x303)]=new _0x61341f(),_0x36a58b[_0x3731b0(0x640)]=_0x1e8e38,_0x36a58b[_0x3731b0(0x49d)]=_0x3731b0(0x43f),_0x36a58b[_0x3731b0(0x3f7)]=_0x1fb63c;let _0x14f18d=await F[_0x3731b0(0x447)](_0x36a58b);return this['logger'][_0x3731b0(0x234)](this[_0x3731b0(0x492)]+'\x20('+this[_0x3731b0(0x333)][_0x3731b0(0x106)]+_0x3731b0(0x18a)),_0x14f18d?_0x36a58b:null;}catch(_0x3f1c3e){throw this[_0x3731b0(0x6cb)][_0x3731b0(0x258)](this[_0x3731b0(0x492)]+'\x20('+this[_0x3731b0(0x333)][_0x3731b0(0x106)]+_0x3731b0(0x345)+_0x3f1c3e),new g(_0x3f1c3e[_0x3731b0(0x26e)]);}}async['processApiRequest'](_0x522d72,_0x433c30){const _0x2a323d=a0_0x27119e;let _0x4c776f,_0x1db48a;try{let _0x58a49d=_0x433c30[_0x2a323d(0x355)];if(!_0x58a49d||!_0x58a49d[_0x2a323d(0x29a)]||!_0x58a49d[_0x2a323d(0x671)])throw new Error(_0x2a323d(0x660));let _0x45634d={'method':_0x58a49d[_0x2a323d(0x671)],'url':_0x58a49d[_0x2a323d(0x29a)],'headers':_0x58a49d[_0x2a323d(0x34c)]||{},'data':_0x58a49d[_0x2a323d(0x4ea)]||{}};_0x4c776f=(await(0x0,ue[_0x2a323d(0x2c9)])(_0x45634d))['data'];let _0x3a7968=_0x522d72[_0x2a323d(0x503)][_0x2a323d(0x21c)],_0xb40d2b=this[_0x2a323d(0x3d0)](_0x4c776f);return Object[_0x2a323d(0x2e8)](_0x3a7968,_0xb40d2b),_0x522d72[_0x2a323d(0x503)][_0x2a323d(0x21c)]=_0x3a7968,_0x1db48a={'error':!0x1,'apiResponse':_0x4c776f},this[_0x2a323d(0x12e)](_0x522d72,_0x433c30,_0x1db48a),_0x4c776f;}catch(_0x5ddab7){console[_0x2a323d(0x258)](_0x2a323d(0x389),_0x5ddab7),_0x5ddab7[_0x2a323d(0x210)]&&(_0x4c776f=_0x5ddab7[_0x2a323d(0x210)][_0x2a323d(0x5a7)]);let _0x3be2a4=_0x522d72[_0x2a323d(0x503)][_0x2a323d(0x21c)],_0x42b407=this[_0x2a323d(0x3d0)](_0x4c776f);return Object['assign'](_0x3be2a4,_0x42b407),_0x522d72[_0x2a323d(0x503)][_0x2a323d(0x21c)]=_0x3be2a4,_0x1db48a={'error':!0x0,'errorLog':_0x5ddab7[_0x2a323d(0x3cb)](),'apiResponse':_0x4c776f},this[_0x2a323d(0x12e)](_0x522d72,_0x433c30,_0x1db48a),{'success':!0x1};}}[a0_0x27119e(0x4cf)](_0xbd8825,_0x2afd1b){const _0x5d0e1e=a0_0x27119e;let _0x2207e1=_0x57e8a2=>{const _0x38eda5=a0_0x2b59;let _0x154968=_0x57e8a2['replace'](/[^0-9.,-]/g,'')[_0x38eda5(0x363)](',','.'),_0x443937=parseFloat(_0x154968);return isNaN(_0x443937)?null:_0x443937;},_0x40c786=_0x2afd1b[_0x5d0e1e(0x176)],_0x20aa12=_0x2afd1b[_0x5d0e1e(0x5a2)];typeof _0x40c786==_0x5d0e1e(0x2af)&&(_0x40c786=this['replaceVariables'](_0x40c786,_0xbd8825[_0x5d0e1e(0x503)]['realVariables'])??''),typeof _0x20aa12==_0x5d0e1e(0x2af)&&(_0x20aa12=this[_0x5d0e1e(0x661)](_0x20aa12,_0xbd8825[_0x5d0e1e(0x503)]['realVariables'])??'');let _0x16e583=null;if(!_0x40c786||!_0x2afd1b[_0x5d0e1e(0x384)])return null;switch(this['logger']['verbose'](this[_0x5d0e1e(0x492)]+'\x20('+this[_0x5d0e1e(0x333)]['wuid']+_0x5d0e1e(0x498)+_0x40c786),this[_0x5d0e1e(0x6cb)][_0x5d0e1e(0x234)](this[_0x5d0e1e(0x492)]+'\x20('+this[_0x5d0e1e(0x333)]['wuid']+_0x5d0e1e(0x4d8)+_0x20aa12),_0x2afd1b[_0x5d0e1e(0x384)]){case'+':case'-':case'*':case'/':let _0x4b31d5=_0x2207e1(_0x40c786),_0x23fe1b=_0x2207e1(_0x20aa12||'0');if(_0x4b31d5===null)return null;switch(_0x2afd1b[_0x5d0e1e(0x384)]){case'+':_0x16e583=_0x4b31d5+(_0x23fe1b??0x0);break;case'-':_0x16e583=_0x4b31d5-(_0x23fe1b??0x0);break;case'*':_0x16e583=_0x4b31d5*(_0x23fe1b??0x1);break;case'/':_0x23fe1b!==0x0&&(_0x16e583=_0x4b31d5/(_0x23fe1b??0x1));break;}break;case _0x5d0e1e(0x455):case _0x5d0e1e(0xf9):let _0x4dc30a=_0x20aa12,_0x42a050=_0x2afd1b[_0x5d0e1e(0x29b)];if(typeof _0x42a050==_0x5d0e1e(0x2af)&&(_0x42a050=this[_0x5d0e1e(0x661)](_0x42a050,_0xbd8825[_0x5d0e1e(0x503)][_0x5d0e1e(0x21c)])??''),_0x4dc30a&&_0x42a050!==void 0x0){let _0x2ccf2b=_0x2afd1b[_0x5d0e1e(0x384)]===_0x5d0e1e(0x455)?new RegExp(_0x4dc30a['replace'](/[-\/\\^$*+?.()|[\]{}]/g,_0x5d0e1e(0x6a2)),'g'):new RegExp(_0x4dc30a,'g');_0x16e583=_0x40c786[_0x5d0e1e(0x363)](_0x2ccf2b,_0x42a050);}else console['warn'](_0x5d0e1e(0x57b));break;case _0x5d0e1e(0x394):_0x16e583=_0x20aa12;break;case _0x5d0e1e(0x380):let _0x4596c2=_0x40c786[_0x5d0e1e(0x5ce)](new RegExp(_0x20aa12||''));_0x16e583=_0x4596c2?_0x4596c2[0x0]:'';break;case _0x5d0e1e(0x4af):_0x16e583=_0x40c786[_0x5d0e1e(0x5fc)](0x0,parseInt(_0x20aa12||'0'));break;case _0x5d0e1e(0x5dc):let _0x1926be=parseInt(_0x20aa12||'0');_0x16e583=_0x40c786[_0x5d0e1e(0x5fc)](_0x40c786[_0x5d0e1e(0x57f)]-_0x1926be);break;case _0x5d0e1e(0x23a):let _0x2b847c=_0x2207e1(_0x40c786),_0x351e2a=parseInt(_0x20aa12||'0');_0x351e2a=Math[_0x5d0e1e(0x4b7)](_0x351e2a),_0x2b847c!==null?_0x16e583=_0x2b847c[_0x5d0e1e(0x17d)](_0x5d0e1e(0x3ef),{'minimumFractionDigits':_0x351e2a,'maximumFractionDigits':_0x351e2a}):(console[_0x5d0e1e(0x5f9)](_0x5d0e1e(0x6c6)+_0x40c786),_0x16e583=null);break;case'toBRL':let _0x297076=_0x2207e1(_0x40c786);_0x297076!==null?_0x16e583=_0x297076['toLocaleString']('pt-BR',{'style':_0x5d0e1e(0x598),'currency':'BRL'}):(console['warn'](_0x5d0e1e(0x669)+_0x40c786),_0x16e583=null);break;case _0x5d0e1e(0x639):_0x16e583=_0x40c786[_0x5d0e1e(0x5aa)]();break;case'lowerCase':_0x16e583=_0x40c786[_0x5d0e1e(0x62c)]();break;case _0x5d0e1e(0x6ab):_0x16e583=_0x40c786[_0x5d0e1e(0x29e)]('\x20')[_0x5d0e1e(0x2c7)](_0x28837a=>_0x28837a[_0x5d0e1e(0x2fb)](0x0)[_0x5d0e1e(0x5aa)]()+_0x28837a[_0x5d0e1e(0x5fc)](0x1)[_0x5d0e1e(0x62c)]())[_0x5d0e1e(0x3eb)]('\x20');break;case _0x5d0e1e(0x22f):_0x16e583=_0x40c786['trim']();break;default:_0x16e583=_0x40c786;}return _0x16e583!==null?_0x16e583['toString']():null;}async[a0_0x27119e(0x159)](_0x5d7031,_0x49a06c){const _0x507ad3=a0_0x27119e;try{let _0x4f94b3=_0x5d7031['varedits']?.[_0x507ad3(0x522)](_0x1a7603=>_0x1a7603[_0x507ad3(0x467)]===_0x49a06c[_0x507ad3(0x303)]?.[_0x507ad3(0x3cb)]())||[],_0x2a9ad8=_0x49a06c[_0x507ad3(0x5fb)],_0xad88ae=null,_0x4ff4a2=[],_0x376218=_0x5d7031[_0x507ad3(0x503)]['realVariables'][_0x2a9ad8];_0x4ff4a2[_0x507ad3(0x461)]('Valor\x20inicial:\x20\x22'+_0x376218+'\x22');for(let _0x105dc0 of _0x4f94b3){_0x105dc0['firstValue']=_0x376218,_0xad88ae=_0x105dc0[_0x507ad3(0x176)];let _0x4d2d70;try{_0x4d2d70=this['applyvaredit'](_0x5d7031,_0x105dc0);}catch(_0x164b55){console['error'](_0x507ad3(0x321)+_0x164b55[_0x507ad3(0x26e)]);continue;}if(_0x4d2d70!==null){let _0x14d17d=_0x507ad3(0x63c)+_0x105dc0[_0x507ad3(0x384)]+'\x22',_0x647715=[_0x507ad3(0x606),'upperCase','lowerCase','capitalizedWords',_0x507ad3(0x22f)];_0x105dc0[_0x507ad3(0x384)]===_0x507ad3(0x455)||_0x105dc0[_0x507ad3(0x384)]==='findAndReplaceRegex'?_0x14d17d+=_0x507ad3(0x1d5)+_0x105dc0[_0x507ad3(0x5a2)]+_0x507ad3(0x5a6)+_0x105dc0[_0x507ad3(0x29b)]+'\x22':!_0x647715[_0x507ad3(0x6ad)](_0x105dc0[_0x507ad3(0x384)])&&_0x105dc0[_0x507ad3(0x5a2)]!==null&&_0x105dc0[_0x507ad3(0x5a2)]!==void 0x0&&(_0x14d17d+=_0x507ad3(0x4ab)+_0x105dc0[_0x507ad3(0x5a2)]+'\x22'),_0x14d17d+=_0x507ad3(0x23f)+_0x4d2d70+'.',_0x4ff4a2[_0x507ad3(0x461)](_0x14d17d);}_0x4d2d70!==null&&(_0x376218=_0x4d2d70);}if(_0x5d7031[_0x507ad3(0x503)][_0x507ad3(0x21c)]&&_0x49a06c[_0x507ad3(0x5fb)]){_0x5d7031[_0x507ad3(0x503)]['realVariables'][_0x49a06c[_0x507ad3(0x5fb)]]=_0x376218;let _0x42fba4={'variable':_0x49a06c[_0x507ad3(0x5fb)],'oldValue':_0xad88ae,'newValue':_0x376218,'moreLogs':_0x4ff4a2};try{this['updateConversation'](_0x5d7031,_0x49a06c,_0x42fba4);}catch(_0x12cfc5){console[_0x507ad3(0x258)](_0x507ad3(0x3e9)+_0x12cfc5[_0x507ad3(0x26e)]);}}return _0x2a9ad8;}catch(_0x5105c6){return console[_0x507ad3(0x258)](_0x507ad3(0x689)+_0x5105c6[_0x507ad3(0x26e)]),null;}}async[a0_0x27119e(0x5ef)](_0x5f173e,_0x2e2791){const _0x3c56db=a0_0x27119e;try{let _0x5e2cad=[],_0x496e7c=_0x5f173e[_0x3c56db(0x34b)][_0x3c56db(0x522)](_0x21b0f4=>_0x21b0f4[_0x3c56db(0x467)]===_0x2e2791['_id']['toString']()),_0x336a15=null,_0x567eec=!0x1;for(let _0x2d9b1e of _0x496e7c){let _0x1029b2=this[_0x3c56db(0x350)](_0x5f173e,_0x2d9b1e);_0x5e2cad['push'](_0x3c56db(0x3a4)+_0x2d9b1e[_0x3c56db(0x176)]+_0x3c56db(0x110)+_0x2d9b1e[_0x3c56db(0x3df)]+',\x20Segundo\x20Valor:\x20'+_0x2d9b1e['secondValue']+_0x3c56db(0x12f)+_0x1029b2),_0x336a15===null?_0x336a15=_0x1029b2:_0x2d9b1e[_0x3c56db(0x3ab)]===_0x3c56db(0x21d)?(_0x336a15=_0x336a15&&_0x1029b2,_0x1029b2||(_0x567eec=!0x0)):_0x2d9b1e[_0x3c56db(0x3ab)]==='or'&&(_0x567eec||(_0x336a15=_0x336a15||_0x1029b2));}_0x336a15===null&&(_0x336a15=!0x0);let _0x1d884d={'moreLogs':_0x5e2cad};_0x336a15?(_0x5f173e[_0x3c56db(0x503)][_0x3c56db(0x1dd)]=!0x0,this['updateConversation'](_0x5f173e,_0x2e2791,_0x1d884d)):(_0x5f173e[_0x3c56db(0x503)][_0x3c56db(0x1dd)]=!0x1,this[_0x3c56db(0x12e)](_0x5f173e,_0x2e2791,_0x1d884d));}catch(_0x2e19f2){this[_0x3c56db(0x6cb)][_0x3c56db(0x258)](this[_0x3c56db(0x492)]+'\x20('+this['instance'][_0x3c56db(0x106)]+_0x3c56db(0x2f9)+_0x2e19f2);}}[a0_0x27119e(0x350)](_0x595bf7,_0x5a4aec){const _0x8f3643=a0_0x27119e;let _0x2aa0d9=_0x5a4aec[_0x8f3643(0x176)],_0x22612c=_0x5a4aec[_0x8f3643(0x5a2)];typeof _0x2aa0d9=='string'&&(_0x2aa0d9=this['replaceVariables'](_0x2aa0d9,_0x595bf7[_0x8f3643(0x503)][_0x8f3643(0x21c)])??''),typeof _0x22612c==_0x8f3643(0x2af)&&(_0x22612c=this[_0x8f3643(0x661)](_0x22612c,_0x595bf7[_0x8f3643(0x503)][_0x8f3643(0x21c)])??'');try{switch(_0x5a4aec['expression']){case _0x8f3643(0x4cd):return _0x2aa0d9===_0x22612c;case _0x8f3643(0x171):return _0x2aa0d9!==_0x22612c;case _0x8f3643(0x47a):return _0x2aa0d9[_0x8f3643(0x6ad)](_0x22612c);case _0x8f3643(0x1ec):return!_0x2aa0d9['includes'](_0x22612c);case _0x8f3643(0x3dd):return parseFloat(_0x2aa0d9)>parseFloat(_0x22612c);case'less':return parseFloat(_0x2aa0d9)<parseFloat(_0x22612c);case _0x8f3643(0x69b):return _0x2aa0d9!=='';case _0x8f3643(0x63b):return _0x2aa0d9==='';case _0x8f3643(0x4a1):return new RegExp(_0x22612c)[_0x8f3643(0x586)](_0x2aa0d9);case'notMatchRegex':return!new RegExp(_0x22612c)[_0x8f3643(0x586)](_0x2aa0d9);default:return!0x1;}}catch(_0xc3ab8b){return console[_0x8f3643(0x258)](_0x8f3643(0x4b4)+_0xc3ab8b),!0x1;}}[a0_0x27119e(0x1b2)](_0x3edd8b){const _0x4c215d=a0_0x27119e;let _0x1f2d1f=!0x0,_0x50d76a=null;for(let _0x266cac of _0x3edd8b){let _0x42b8e5=this[_0x4c215d(0x40b)](_0x266cac);if(_0x50d76a==='or'&&_0x42b8e5){_0x1f2d1f=!0x0;break;}if(_0x50d76a===_0x4c215d(0x21d)&&!_0x42b8e5){_0x1f2d1f=!0x1;break;}_0x50d76a=_0x266cac[_0x4c215d(0x3ab)];}return _0x1f2d1f;}[a0_0x27119e(0x40b)](_0x5e3d97){const _0x1cea3d=a0_0x27119e;let _0x18003e=_0x5e3d97['firstValue'],_0x152bf2=_0x5e3d97['secondValue'];try{switch(_0x5e3d97['expression']){case _0x1cea3d(0x4cd):return String(_0x18003e)===String(_0x152bf2);case'notEqual':return String(_0x18003e)!==String(_0x152bf2);case _0x1cea3d(0x47a):return String(_0x18003e)[_0x1cea3d(0x6ad)](String(_0x152bf2));case _0x1cea3d(0x1ec):return!String(_0x18003e)['includes'](String(_0x152bf2));case _0x1cea3d(0x3dd):return parseFloat(String(_0x18003e))>parseFloat(String(_0x152bf2));case _0x1cea3d(0x60c):return parseFloat(String(_0x18003e))<parseFloat(String(_0x152bf2));case _0x1cea3d(0x69b):return String(_0x18003e)!=='';case _0x1cea3d(0x63b):return String(_0x18003e)==='';case _0x1cea3d(0x4a1):return new RegExp(String(_0x152bf2))[_0x1cea3d(0x586)](String(_0x18003e));case _0x1cea3d(0x334):return!new RegExp(String(_0x152bf2))[_0x1cea3d(0x586)](String(_0x18003e));default:return!0x1;}}catch(_0x198e77){return console[_0x1cea3d(0x258)](_0x1cea3d(0x4b4)+_0x198e77),!0x1;}}async[a0_0x27119e(0x379)](_0x21c154,_0x3bc56a){const _0x1347f0=a0_0x27119e;if(this[_0x1347f0(0x6cb)]['verbose'](this['instanceName']+'\x20('+this[_0x1347f0(0x333)]['wuid']+_0x1347f0(0x217)),!_0x21c154||!_0x3bc56a)return this[_0x1347f0(0x6cb)][_0x1347f0(0x258)](this[_0x1347f0(0x492)]+'\x20('+this[_0x1347f0(0x333)][_0x1347f0(0x106)]+_0x1347f0(0x369)),null;let _0x1530d0=_0x3bc56a[_0x1347f0(0x5fb)],_0x3eb0f9=_0x21c154[_0x1347f0(0x503)]['lastReceivedMessage']['text']||_0x21c154[_0x1347f0(0x503)][_0x1347f0(0x348)]['caption']||_0x21c154['chatLog'][_0x1347f0(0x348)][_0x1347f0(0x5eb)];try{_0x21c154['chatLog'][_0x1347f0(0x21c)]||(_0x21c154[_0x1347f0(0x503)][_0x1347f0(0x21c)]={});let _0x3f797d=_0x21c154['chatLog'][_0x1347f0(0x21c)][_0x1530d0];_0x21c154['chatLog'][_0x1347f0(0x21c)][_0x1530d0]=_0x3eb0f9;let _0x3f89bf={'variable':_0x1530d0,'oldValue':_0x3f797d,'newValue':_0x3eb0f9};this['updateConversation'](_0x21c154,_0x3bc56a,_0x3f89bf),this[_0x1347f0(0x6cb)][_0x1347f0(0x234)](this[_0x1347f0(0x492)]+'\x20('+this['instance'][_0x1347f0(0x106)]+_0x1347f0(0x1f3));}catch(_0x424625){let _0x90ba9={'error':!0x0,'errorLog':_0x424625['toString']()};return this[_0x1347f0(0x12e)](_0x21c154,_0x3bc56a,_0x90ba9),this[_0x1347f0(0x6cb)][_0x1347f0(0x258)](this[_0x1347f0(0x492)]+'\x20('+this['instance'][_0x1347f0(0x106)]+_0x1347f0(0x19d)+_0x424625[_0x1347f0(0x26e)]),null;}}async[a0_0x27119e(0x109)](_0x3c3e6d,_0xf052e3){const _0x59614c=a0_0x27119e;if(this['logger'][_0x59614c(0x234)](this[_0x59614c(0x492)]+'\x20('+this['instance'][_0x59614c(0x106)]+_0x59614c(0x658)),!_0x3c3e6d||!_0xf052e3)return this[_0x59614c(0x6cb)][_0x59614c(0x258)](this[_0x59614c(0x492)]+'\x20('+this[_0x59614c(0x333)]['wuid']+_0x59614c(0x369)),null;let _0x5ac82b=Date['now'](),_0x22ce8b=parseInt(_0xf052e3['stopMinutes'],0xa);if(isNaN(_0x22ce8b))return this[_0x59614c(0x6cb)][_0x59614c(0x258)](this[_0x59614c(0x492)]+'\x20('+this[_0x59614c(0x333)]['wuid']+'):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número'),null;let _0x1e1009={'newStoppedUntil':_0x5ac82b+_0x22ce8b*0x3c*0x3e8};return await this['updateConversation'](_0x3c3e6d,_0xf052e3,_0x1e1009,!0x0),null;}async[a0_0x27119e(0x5d1)](_0x140b5c,_0x47e6e6,_0x59aeea){const _0x1c0856=a0_0x27119e;try{switch(_0x47e6e6['uazapi'][_0x1c0856(0x45a)]){case _0x1c0856(0x116):await this[_0x1c0856(0x487)](_0x140b5c,_0x47e6e6,_0x59aeea);break;case _0x1c0856(0x652):await this[_0x1c0856(0x325)](_0x140b5c,_0x47e6e6,_0x59aeea);break;case'sendLocation':await this[_0x1c0856(0x20d)](_0x140b5c,_0x47e6e6,_0x59aeea);break;case _0x1c0856(0x638):await this[_0x1c0856(0x1ad)](_0x140b5c,_0x47e6e6,_0x59aeea);break;case _0x1c0856(0x35f):await this[_0x1c0856(0x53b)](_0x140b5c,_0x47e6e6,_0x59aeea);break;case _0x1c0856(0x1f1):await this[_0x1c0856(0x506)](_0x140b5c,_0x47e6e6,_0x59aeea);break;case _0x1c0856(0x4c3):await this[_0x1c0856(0x549)](_0x140b5c,_0x47e6e6,_0x59aeea);break;default:this['logger'][_0x1c0856(0x258)](this['instanceName']+'\x20('+this[_0x1c0856(0x333)][_0x1c0856(0x106)]+_0x1c0856(0x59b)+_0x47e6e6[_0x1c0856(0x3a7)]['command']);}}catch(_0x2b7eb5){this[_0x1c0856(0x6cb)]['error'](this[_0x1c0856(0x492)]+'\x20('+this[_0x1c0856(0x333)]['wuid']+_0x1c0856(0x6b2)+_0x2b7eb5);}}async[a0_0x27119e(0x12e)](_0x4c0885,_0x5b5d46,_0x5a18d6,_0x22e878=!0x1,_0x3162e0=!0x1){const _0x3ae857=a0_0x27119e;_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x2bb)]||(_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x2bb)]=[]);let _0x392f2d=(_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x2bb)]?.[_0x3ae857(0x57f)]??0x0)+0x1,_0x34aea6=_0x4c0885[_0x3ae857(0x503)]['blockLogs'][_0x3ae857(0x522)](_0xbeab7c=>String(_0xbeab7c[_0x3ae857(0x467)])===String(_0x5b5d46['_id']))[_0x3ae857(0x57f)]+0x1,_0x9f24b9=_0x5a18d6?.[_0x3ae857(0x41f)]??Date['now'](),_0xc6365b=_0x5a18d6?.[_0x3ae857(0x258)]?_0x5a18d6[_0x3ae857(0x266)]??_0x5a18d6[_0x3ae857(0x258)][_0x3ae857(0x3cb)]():void 0x0,_0x1e022d={'onTime':_0x9f24b9,'blockId':_0x5b5d46['_id'],'order':_0x392f2d,'activatedCount':_0x34aea6,'error':_0x5a18d6?.[_0x3ae857(0x258)]??!0x1,'messageId':_0x5a18d6?.['messageId'],'apiResponse':_0x5a18d6?.[_0x3ae857(0x33a)],'apiResponseString':_0x5a18d6?.[_0x3ae857(0x33a)]?JSON[_0x3ae857(0x5f2)](_0x5a18d6?.[_0x3ae857(0x33a)]):void 0x0,'variable':_0x5a18d6?.[_0x3ae857(0x261)],'oldValue':_0x5a18d6?.['oldValue'],'newValue':_0x5a18d6?.[_0x3ae857(0x523)],'newStoppedUntil':_0x5a18d6?.[_0x3ae857(0x456)],'moreLogs':_0x5a18d6?.[_0x3ae857(0x4a6)],'errorLog':_0xc6365b};if(_0x5a18d6[_0x3ae857(0x4a6)]&&_0x5a18d6['moreLogs'][_0x3ae857(0x57f)]>0x0){let _0x1372a5=_0x5a18d6[_0x3ae857(0x4a6)]['map'](_0x3b2097=>this[_0x3ae857(0x687)](_0x3b2097,_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x21c)]));_0x1e022d['moreLogs']=_0x1372a5;}_0x4c0885[_0x3ae857(0x503)]['realVariables']||(_0x4c0885['chatLog']['realVariables']={}),_0x4c0885[_0x3ae857(0x503)]['realVariables'][_0x3ae857(0x13d)]=String(_0x34aea6),_0x4c0885[_0x3ae857(0x503)]['realVariables']['_error']=String(_0x5a18d6[_0x3ae857(0x258)]??!0x1),_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x2bb)][_0x3ae857(0x461)](_0x1e022d),_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x1bb)]=_0x5b5d46[_0x3ae857(0x303)][_0x3ae857(0x3cb)](),_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x1bf)]&&(_0x4c0885['chatLog'][_0x3ae857(0x1bf)]=_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x1bf)]),_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x348)]&&(_0x4c0885['chatLog']['lastReceivedMessage']=_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x348)]),_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x1dd)]&&(_0x4c0885['chatLog']['lastCondition']=_0x4c0885[_0x3ae857(0x503)][_0x3ae857(0x1dd)]),_0x3162e0&&(_0x4c0885[_0x3ae857(0x49d)]='closed'),_0x22e878?this[_0x3ae857(0x43b)](_0x4c0885):this[_0x3ae857(0x50f)](_0x4c0885,_0x5b5d46);}[a0_0x27119e(0x687)](_0x15224a,_0x5b92fe){const _0x5c6715=a0_0x27119e;return _0x15224a['replace'](/\{\{([^}]+)\}\}/g,(_0x2834ca,_0x22cd2e)=>_0x5b92fe[_0x22cd2e]?'{{'+_0x22cd2e+_0x5c6715(0x56d)+_0x5b92fe[_0x22cd2e]+'\x22':'{{'+_0x22cd2e+_0x5c6715(0x29d));}async['saveConversationToDatabase'](_0x10facd){const _0x333885=a0_0x27119e;try{let _0x1d8cf0=Object[_0x333885(0x67b)](_0x10facd[_0x333885(0x503)][_0x333885(0x21c)])[_0x333885(0x2c7)](([_0x49cac5,_0x5b5eee])=>({'name':_0x49cac5,'value':_0x5b5eee})),_0x343dc=await F['findOneAndUpdate']({'_id':_0x10facd[_0x333885(0x303)]},{'$set':{'chatLog.lastBlockId':_0x10facd[_0x333885(0x503)][_0x333885(0x1bb)],'blocks':_0x10facd[_0x333885(0x3e8)],'chatLog.lastSendMessage':_0x10facd[_0x333885(0x503)]['lastSendMessage'],'chatLog.lastReceivedMessage':_0x10facd[_0x333885(0x503)][_0x333885(0x348)],'chatLog.lastCondition':_0x10facd['chatLog']['lastCondition'],'chatLog.chatVariables':_0x1d8cf0,'chatLog.realVariables':_0x10facd[_0x333885(0x503)][_0x333885(0x21c)],'status':_0x10facd[_0x333885(0x49d)],'chatLog.blockLogs':_0x10facd[_0x333885(0x503)][_0x333885(0x2bb)],'waitingPoll_id':_0x10facd[_0x333885(0x3af)],'waitingPoll_name':_0x10facd[_0x333885(0x4a7)],'waitingPoll_replyOptions':_0x10facd[_0x333885(0x30d)]}},{'new':!0x0});if(_0x343dc){this[_0x333885(0x6cb)]['verbose'](this['instanceName']+'\x20('+this[_0x333885(0x333)][_0x333885(0x106)]+_0x333885(0x5fd)+_0x343dc[_0x333885(0x303)]);try{let _0x706901=[_0x333885(0x378),_0x333885(0x444),_0x333885(0x5c3),_0x333885(0x63a),_0x333885(0x49d),_0x333885(0xf5),_0x333885(0x442),_0x333885(0x69d)];if(!this[_0x333885(0x534)]&&(await this[_0x333885(0x402)](),!this[_0x333885(0x534)]))throw new Error('AutomateSystem\x20não\x20foi\x20inicializado');let _0x137585=this[_0x333885(0x534)]?.[_0x333885(0x496)][_0x333885(0x2c7)](_0x2cab0c=>_0x2cab0c[_0x333885(0x3c5)]),_0x2335af={};Object['entries'](_0x10facd[_0x333885(0x503)][_0x333885(0x21c)])[_0x333885(0xfc)](([_0x54ebd3,_0x27d567])=>{const _0x4a4c99=_0x333885;_0x706901[_0x4a4c99(0x6ad)](_0x54ebd3)&&(_0x54ebd3===_0x4a4c99(0x69d)&&typeof _0x27d567==_0x4a4c99(0x2af)?_0x2335af[_0x54ebd3]=_0x27d567[_0x4a4c99(0x29e)](',')['map'](_0x35fdec=>_0x35fdec[_0x4a4c99(0x294)]())[_0x4a4c99(0x522)](_0x1d0c85=>_0x1d0c85!==''):_0x2335af[_0x54ebd3]=_0x27d567);});let _0x5e6fcd=_0x10facd[_0x333885(0x503)][_0x333885(0x2bb)][_0x10facd[_0x333885(0x503)]['blockLogs'][_0x333885(0x57f)]-0x1];if(_0x5e6fcd){let _0x383be1=_0x5e6fcd[_0x333885(0x456)];_0x383be1!==void 0x0&&(_0x2335af[_0x333885(0x15b)]=_0x383be1[_0x333885(0x3cb)]());}let _0x2afeda=_0x1d8cf0['filter'](_0x20c700=>_0x137585[_0x333885(0x6ad)](_0x20c700['name']));this[_0x333885(0x6cb)][_0x333885(0x234)](this['instanceName']+'\x20('+this[_0x333885(0x333)][_0x333885(0x106)]+'):\x20leadInfoVariables'),this[_0x333885(0x6cb)]['verbose'](_0x2335af),this['logger'][_0x333885(0x234)](this['instanceName']+'\x20('+this[_0x333885(0x333)][_0x333885(0x106)]+_0x333885(0x154)),this['logger']['verbose'](_0x2afeda);let _0x2e5685=_0x2afeda[_0x333885(0x2c7)](_0x25f0dd=>{const _0x4a1439=_0x333885;let _0x5211a6=this[_0x4a1439(0x534)]?.['customFields'][_0x4a1439(0x36e)](_0xb77a88=>_0xb77a88[_0x4a1439(0x3c5)]===_0x25f0dd[_0x4a1439(0x3c5)]);if(!_0x5211a6)throw new Error(_0x4a1439(0x252)+_0x25f0dd[_0x4a1439(0x3c5)]);return{'_id':_0x5211a6[_0x4a1439(0x303)],'value':_0x25f0dd[_0x4a1439(0x55f)]};});this[_0x333885(0x6cb)][_0x333885(0x234)](this['instanceName']+'\x20('+this[_0x333885(0x333)][_0x333885(0x106)]+_0x333885(0x63e)),this[_0x333885(0x6cb)]['verbose'](_0x2e5685),await this[_0x333885(0x1c3)](_0x10facd[_0x333885(0x3f7)],_0x2335af,_0x2e5685);}catch(_0x271de1){this[_0x333885(0x6cb)][_0x333885(0x258)](this[_0x333885(0x492)]+'\x20('+this[_0x333885(0x333)][_0x333885(0x106)]+_0x333885(0x62d)+JSON[_0x333885(0x5f2)](_0x271de1));}}else this[_0x333885(0x6cb)][_0x333885(0x258)](this[_0x333885(0x492)]+'\x20('+this[_0x333885(0x333)][_0x333885(0x106)]+'):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida');}catch(_0xadb3f3){this[_0x333885(0x6cb)]['error'](this[_0x333885(0x492)]+'\x20('+this[_0x333885(0x333)][_0x333885(0x106)]+_0x333885(0x1cd)+JSON[_0x333885(0x5f2)](_0xadb3f3));}}async[a0_0x27119e(0x1c3)](_0x506bf9,_0x231ef8,_0x5eea74){const _0x1ee8d3=a0_0x27119e;try{let _0x1eb5b7={'leadInfo.leadnome':_0x231ef8[_0x1ee8d3(0x378)],'leadInfo.nomecompleto':_0x231ef8[_0x1ee8d3(0x444)],'leadInfo.email':_0x231ef8['email'],'leadInfo.cpf':_0x231ef8[_0x1ee8d3(0x63a)],'leadInfo.status':_0x231ef8[_0x1ee8d3(0x49d)],'leadInfo.notas':_0x231ef8[_0x1ee8d3(0xf5)],'leadInfo.responsavelid':_0x231ef8[_0x1ee8d3(0x442)],'leadInfo.tags':_0x231ef8['tags'],'leadInfo.customFields':_0x5eea74};if('desativadoFluxoAte'in _0x231ef8){let _0x4bafda=_0x231ef8[_0x1ee8d3(0x15b)];_0x1eb5b7[_0x1ee8d3(0x52c)]=_0x4bafda?Number(_0x4bafda):null;}let _0x38304a=await D['findOneAndUpdate']({'id':_0x506bf9,'owner':this[_0x1ee8d3(0x333)][_0x1ee8d3(0x106)]},{'$set':_0x1eb5b7},{'new':!0x0,'upsert':!0x0});_0x38304a?(this[_0x1ee8d3(0x6cb)]['verbose'](this[_0x1ee8d3(0x492)]+'\x20('+this[_0x1ee8d3(0x333)][_0x1ee8d3(0x106)]+_0x1ee8d3(0x29c)+_0x38304a[_0x1ee8d3(0x303)]),q(this[_0x1ee8d3(0x492)],_0x1ee8d3(0x65a),{'chat':_0x38304a})):this[_0x1ee8d3(0x6cb)][_0x1ee8d3(0x258)](this[_0x1ee8d3(0x492)]+'\x20('+this[_0x1ee8d3(0x333)][_0x1ee8d3(0x106)]+'):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD');}catch(_0x5ed4a1){this[_0x1ee8d3(0x6cb)][_0x1ee8d3(0x258)](this[_0x1ee8d3(0x492)]+'\x20('+this[_0x1ee8d3(0x333)]['wuid']+_0x1ee8d3(0x3fd)+_0x5ed4a1);}}async[a0_0x27119e(0x123)](_0x58b5f9,_0x3538cc){const _0x4e9371=a0_0x27119e;this[_0x4e9371(0x6cb)]['verbose'](this['instanceName']+'\x20('+this[_0x4e9371(0x333)][_0x4e9371(0x106)]+'):\x20atualização\x20chat:\x20'+_0x3538cc);try{let _0xf16ad5=await D[_0x4e9371(0x6a6)]({'id':_0x58b5f9[_0x4e9371(0x3f7)],'owner':_0x58b5f9[_0x4e9371(0x1a7)]},{'$set':{'leadInfo.desativadoFluxoAte':_0x3538cc}},{'new':!0x0});this[_0x4e9371(0x6cb)][_0x4e9371(0x234)](this['instanceName']+'\x20('+this[_0x4e9371(0x333)][_0x4e9371(0x106)]+_0x4e9371(0x221)+_0x58b5f9['_id']),this[_0x4e9371(0x6cb)]['verbose'](this[_0x4e9371(0x492)]+'\x20('+this[_0x4e9371(0x333)][_0x4e9371(0x106)]+_0x4e9371(0x525)+JSON[_0x4e9371(0x5f2)](_0xf16ad5,null,0x2)),_0xf16ad5&&q(this[_0x4e9371(0x492)],_0x4e9371(0x65a),{'chat':_0xf16ad5});}catch(_0xa54156){this[_0x4e9371(0x6cb)][_0x4e9371(0x258)](this[_0x4e9371(0x492)]+'\x20('+this[_0x4e9371(0x333)]['wuid']+_0x4e9371(0x5c8)+JSON[_0x4e9371(0x5f2)](_0xa54156));}}async[a0_0x27119e(0x286)](_0x470ec0,_0x587ce7){const _0x477727=a0_0x27119e;try{this['logger']['verbose'](this[_0x477727(0x492)]+'\x20('+this[_0x477727(0x333)][_0x477727(0x106)]+_0x477727(0x2ce));let _0x43926b=_0x587ce7[_0x477727(0x363)](/\D/g,''),_0x27232a=await I[_0x477727(0x27b)]({'owner':_0x470ec0,'testingWith':_0x43926b});return _0x27232a||(this[_0x477727(0x6cb)][_0x477727(0x234)](this[_0x477727(0x492)]+'\x20('+this['instance'][_0x477727(0x106)]+_0x477727(0x557)),_0x27232a=await I[_0x477727(0x27b)]({'owner':_0x470ec0,'default':!0x0})),_0x27232a||(this[_0x477727(0x6cb)]['verbose'](this[_0x477727(0x492)]+'\x20('+this[_0x477727(0x333)][_0x477727(0x106)]+_0x477727(0x2e3)),null);}catch(_0x11b5ff){return this['logger'][_0x477727(0x258)](this[_0x477727(0x492)]+'\x20('+this[_0x477727(0x333)]['wuid']+_0x477727(0x470)+_0x11b5ff),null;}}async[a0_0x27119e(0x3f1)](_0x1ed04f,_0x28a2df,_0x20641f){const _0x316101=a0_0x27119e;try{let _0x4ca56c=!!_0x20641f[_0x316101(0x5eb)],_0x16aa11=_0x20641f[_0x316101(0x307)],_0x31accc=null;if(this[_0x316101(0x6cb)][_0x316101(0x234)](this[_0x316101(0x492)]+'\x20('+this[_0x316101(0x333)][_0x316101(0x106)]+_0x316101(0x236)+_0x4ca56c+'poll_id'+_0x16aa11),_0x4ca56c)return this[_0x316101(0x6cb)][_0x316101(0x234)](this[_0x316101(0x492)]+'\x20('+this[_0x316101(0x333)][_0x316101(0x106)]+'):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto'),_0x31accc=await F[_0x316101(0x27b)]({'owner':_0x1ed04f,'remoteJid':_0x28a2df,'waitingPoll_id':_0x16aa11}),_0x31accc?(_0x31accc[_0x316101(0x640)]=Date[_0x316101(0x541)](),_0x31accc['chatLog'][_0x316101(0x348)]=_0x20641f,_0x31accc):(this[_0x316101(0x6cb)]['verbose'](this[_0x316101(0x492)]+'\x20('+this[_0x316101(0x333)][_0x316101(0x106)]+_0x316101(0x61f)),null);{if(this['logger'][_0x316101(0x234)](this[_0x316101(0x492)]+'\x20('+this[_0x316101(0x333)][_0x316101(0x106)]+_0x316101(0x611)+this['instance']['wuid']+_0x316101(0x6cf)),this[_0x316101(0x6cb)][_0x316101(0x234)](this[_0x316101(0x492)]+'\x20('+this[_0x316101(0x333)]['wuid']+_0x316101(0x1b5)),_0x31accc=await F[_0x316101(0x27b)]({'owner':_0x1ed04f,'remoteJid':_0x28a2df,'status':_0x316101(0x43f)}),!_0x31accc){let _0x27f76e=await this[_0x316101(0x286)](_0x1ed04f,_0x28a2df);if(_0x27f76e&&(_0x31accc=await this['createNewConversation'](_0x27f76e,_0x20641f[_0x316101(0x4dc)],_0x20641f)),!_0x31accc)return null;}let _0x3f3b17=Date[_0x316101(0x541)](),_0x5a6cc9=_0x31accc?.[_0x316101(0x6c0)]||0x0,_0x18f18f=_0x3f3b17-_0x5a6cc9*0x3c*0x3e8;if(this['logger'][_0x316101(0x234)](this['instanceName']+'\x20('+this[_0x316101(0x333)][_0x316101(0x106)]+_0x316101(0x3f0)+_0x3f3b17+_0x316101(0x122)+_0x5a6cc9+_0x316101(0x608)+_0x18f18f),this[_0x316101(0x6cb)][_0x316101(0x234)](this[_0x316101(0x492)]+'\x20('+this[_0x316101(0x333)][_0x316101(0x106)]+_0x316101(0x2da)),this[_0x316101(0x6cb)][_0x316101(0x234)](this['instanceName']+'\x20('+this[_0x316101(0x333)][_0x316101(0x106)]+_0x316101(0x179)+_0x31accc['lastInteraction']),this['logger'][_0x316101(0x234)](this[_0x316101(0x492)]+'\x20('+this[_0x316101(0x333)][_0x316101(0x106)]+_0x316101(0x2a8)+_0x18f18f),_0x31accc[_0x316101(0x640)]<_0x18f18f){this['logger'][_0x316101(0x234)](this[_0x316101(0x492)]+'\x20('+this[_0x316101(0x333)]['wuid']+_0x316101(0x5f6));let _0x40613c=await this['findFlow'](_0x1ed04f,_0x28a2df);if(_0x40613c===null)return null;_0x31accc&&await F[_0x316101(0x57e)]({'_id':_0x31accc[_0x316101(0x303)]},{'status':_0x316101(0x60e)}),_0x31accc=await this[_0x316101(0x64b)](_0x40613c,_0x20641f[_0x316101(0x4dc)],_0x20641f);}return _0x31accc[_0x316101(0x640)]=_0x3f3b17,_0x31accc[_0x316101(0x503)]['lastReceivedMessage']=_0x20641f,_0x31accc;}}catch(_0xc08b5c){return this['logger'][_0x316101(0x258)](this[_0x316101(0x492)]+'\x20('+this['instance'][_0x316101(0x106)]+_0x316101(0x18d)+_0xc08b5c),null;}}async[a0_0x27119e(0x64b)](_0x4ea90c,_0x53c203,_0x5bc0da){const _0x111738=a0_0x27119e;this[_0x111738(0x6cb)]['verbose'](this[_0x111738(0x492)]+'\x20('+this['instance'][_0x111738(0x106)]+_0x111738(0x205));try{let _0x306915=require(_0x111738(0x161))['ObjectId'],_0x46557b=Date[_0x111738(0x541)](),_0x48b09b=_0x111738(0x407),_0x1a00c4=_0x53c203['fromMe']?null:_0x5bc0da,_0x59ee2b=_0x53c203[_0x111738(0x170)]?_0x5bc0da:null,_0x5aea61=_0x53c203[_0x111738(0x3f7)];await this['closeExistingConversations'](_0x5aea61);let _0x5e3b66={..._0x4ea90c['_doc'],'chatLog':null},_0xb810aa=await this['variablesToObject'](_0x5e3b66['variables']),_0x4af756=await this[_0x111738(0x1f9)](_0x5aea61),_0x56ecb9={..._0xb810aa,..._0x4af756,'_remoteJid':_0x5aea61},_0x409235={'lastReceivedMessage':_0x1a00c4,'lastSendMessage':_0x59ee2b,'lastBlockId':_0x48b09b,'lastCondition':!0x0,'realVariables':_0x56ecb9};_0x5e3b66[_0x111738(0x503)]=_0x409235,delete _0x5e3b66['_id'],_0x5e3b66[_0x111738(0x303)]=new _0x306915(),_0x5e3b66[_0x111738(0x640)]=_0x46557b,_0x5e3b66['status']='open',_0x5e3b66[_0x111738(0x3f7)]=_0x5aea61;let _0x184c5=await F[_0x111738(0x447)](_0x5e3b66);return this['logger'][_0x111738(0x234)](this['instanceName']+'\x20('+this[_0x111738(0x333)][_0x111738(0x106)]+_0x111738(0x18a)),_0x184c5?_0x5e3b66:null;}catch(_0x4331c3){return this[_0x111738(0x6cb)][_0x111738(0x258)](this[_0x111738(0x492)]+'\x20('+this[_0x111738(0x333)][_0x111738(0x106)]+_0x111738(0x345)+_0x4331c3),_0x4331c3;}}async[a0_0x27119e(0x487)](_0x964af5,_0x555a3e,_0x4b3432){const _0x4be173=a0_0x27119e;this['logger']['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4be173(0x59e));let _0x3b742f={'number':_0x4b3432,'options':{'delay':_0x555a3e[_0x4be173(0x3a7)][_0x4be173(0x676)]},'textMessage':{'text':_0x555a3e[_0x4be173(0x3a7)][_0x4be173(0x51e)]}};try{let _0x16a079=await this[_0x4be173(0x453)](_0x3b742f);if(_0x16a079){let _0x21259d={'_id':_0x16a079['key']['id'],'_fromMe':_0x16a079[_0x4be173(0x4dc)][_0x4be173(0x170)],'_remoteJid':_0x16a079['key'][_0x4be173(0x3f7)]};_0x964af5[_0x4be173(0x503)][_0x4be173(0x1bb)]=_0x555a3e[_0x4be173(0x303)][_0x4be173(0x3cb)]();let {message_normalized:_0x4559de}=this[_0x4be173(0x651)](_0x16a079[_0x4be173(0x26e)],W(_0x16a079[_0x4be173(0x26e)]),null);_0x964af5[_0x4be173(0x503)][_0x4be173(0x1bf)]=await _0x4559de;let _0x4e5014={'messageId':_0x16a079['key']['id']},_0x50fff1=_0x964af5[_0x4be173(0x503)]['realVariables'];Object['assign'](_0x50fff1,_0x21259d),_0x964af5[_0x4be173(0x503)][_0x4be173(0x21c)]=_0x50fff1,this[_0x4be173(0x12e)](_0x964af5,_0x555a3e,_0x4e5014);}else{let _0x164522={'error':!0x0};this[_0x4be173(0x12e)](_0x964af5,_0x555a3e,_0x164522),this['logger'][_0x4be173(0x258)](this['instanceName']+'\x20('+this[_0x4be173(0x333)][_0x4be173(0x106)]+_0x4be173(0x12b));}}catch(_0x332139){let _0x440b17={'error':!0x0,'errorLog':_0x332139[_0x4be173(0x3cb)]()};this[_0x4be173(0x12e)](_0x964af5,_0x555a3e,_0x440b17),this[_0x4be173(0x6cb)][_0x4be173(0x258)](this[_0x4be173(0x492)]+'\x20('+this['instance'][_0x4be173(0x106)]+_0x4be173(0x1fd)+_0x332139[_0x4be173(0x3cb)]());}}async[a0_0x27119e(0x325)](_0x260343,_0x4a82e3,_0x4a9c87){const _0x425e0f=a0_0x27119e;this[_0x425e0f(0x6cb)]['verbose'](this[_0x425e0f(0x492)]+'\x20('+this['instance'][_0x425e0f(0x106)]+_0x425e0f(0x56f));let _0x42c6da={'number':_0x4a9c87,'options':{'delay':_0x4a82e3['uazapi']['delay']},'mediaMessage':{'mediatype':_0x4a82e3[_0x425e0f(0x3a7)][_0x425e0f(0x4e8)],'caption':_0x4a82e3[_0x425e0f(0x3a7)]['caption'],'media':_0x4a82e3[_0x425e0f(0x3a7)][_0x425e0f(0x4f7)]}};try{let _0x526990=await this[_0x425e0f(0x42e)](_0x42c6da);if(_0x526990){let _0x451380={'_id':_0x526990[_0x425e0f(0x4dc)]['id'],'_fromMe':_0x526990[_0x425e0f(0x4dc)][_0x425e0f(0x170)],'_remoteJid':_0x526990[_0x425e0f(0x4dc)][_0x425e0f(0x3f7)]};_0x260343[_0x425e0f(0x503)][_0x425e0f(0x1bb)]=_0x4a82e3['_id'][_0x425e0f(0x3cb)]();let {message_normalized:_0x12a747}=this[_0x425e0f(0x651)](_0x526990['message'],W(_0x526990[_0x425e0f(0x26e)]),null);_0x260343[_0x425e0f(0x503)][_0x425e0f(0x1bf)]=await _0x12a747;let _0x5d81db={'messageId':_0x526990[_0x425e0f(0x4dc)]['id']},_0x4ca778=_0x260343[_0x425e0f(0x503)][_0x425e0f(0x21c)];Object[_0x425e0f(0x2e8)](_0x4ca778,_0x451380),_0x260343[_0x425e0f(0x503)][_0x425e0f(0x21c)]=_0x4ca778,this[_0x425e0f(0x12e)](_0x260343,_0x4a82e3,_0x5d81db);}else{let _0x864b69={'error':!0x0};this['updateConversation'](_0x260343,_0x4a82e3,_0x864b69),this[_0x425e0f(0x6cb)][_0x425e0f(0x258)](this[_0x425e0f(0x492)]+'\x20('+this[_0x425e0f(0x333)][_0x425e0f(0x106)]+_0x425e0f(0x64e));}}catch(_0x40869a){let _0x667d5f={'error':!0x0,'errorLog':_0x40869a['toString']()};this[_0x425e0f(0x12e)](_0x260343,_0x4a82e3,_0x667d5f),this[_0x425e0f(0x6cb)][_0x425e0f(0x258)](this['instanceName']+'\x20('+this[_0x425e0f(0x333)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20'+_0x40869a['toString']());}}async[a0_0x27119e(0x20d)](_0x338acc,_0x25caf6,_0x50b745){const _0x2205d9=a0_0x27119e;this['logger'][_0x2205d9(0x234)](this[_0x2205d9(0x492)]+'\x20('+this['instance'][_0x2205d9(0x106)]+_0x2205d9(0x683));let _0x5d93e6={'number':_0x50b745,'options':{'delay':_0x25caf6['uazapi'][_0x2205d9(0x676)]},'locationMessage':{'name':_0x25caf6[_0x2205d9(0x3a7)][_0x2205d9(0x3c5)],'address':_0x25caf6[_0x2205d9(0x3a7)][_0x2205d9(0x505)],'latitude':_0x25caf6[_0x2205d9(0x3a7)][_0x2205d9(0x65e)],'longitude':_0x25caf6[_0x2205d9(0x3a7)][_0x2205d9(0x628)]}};try{let _0x3416ce=await this[_0x2205d9(0x1b9)](_0x5d93e6);if(_0x3416ce){let _0x36b475={'_id':_0x3416ce['key']['id'],'_fromMe':_0x3416ce[_0x2205d9(0x4dc)]['fromMe'],'_remoteJid':_0x3416ce[_0x2205d9(0x4dc)][_0x2205d9(0x3f7)]};_0x338acc['chatLog'][_0x2205d9(0x1bb)]=_0x25caf6[_0x2205d9(0x303)][_0x2205d9(0x3cb)]();let {message_normalized:_0x2f108e}=this['normalizeMessage'](_0x3416ce[_0x2205d9(0x26e)],W(_0x3416ce['message']),null);_0x338acc[_0x2205d9(0x503)]['lastSendMessage']=await _0x2f108e;let _0x2dcde5={'messageId':_0x3416ce[_0x2205d9(0x4dc)]['id']},_0x46e442=_0x338acc[_0x2205d9(0x503)]['realVariables'];Object['assign'](_0x46e442,_0x36b475),_0x338acc[_0x2205d9(0x503)]['realVariables']=_0x46e442,this['updateConversation'](_0x338acc,_0x25caf6,_0x2dcde5);}else{let _0x4838a1={'error':!0x0};this[_0x2205d9(0x12e)](_0x338acc,_0x25caf6,_0x4838a1),this[_0x2205d9(0x6cb)][_0x2205d9(0x258)](this[_0x2205d9(0x492)]+'\x20('+this[_0x2205d9(0x333)]['wuid']+_0x2205d9(0x33f));}}catch(_0x398a9f){let _0x48cafe={'error':!0x0,'errorLog':_0x398a9f['toString']()};this[_0x2205d9(0x12e)](_0x338acc,_0x25caf6,_0x48cafe),this[_0x2205d9(0x6cb)]['error'](this['instanceName']+'\x20('+this[_0x2205d9(0x333)][_0x2205d9(0x106)]+_0x2205d9(0x33d)+_0x398a9f[_0x2205d9(0x3cb)]());}}async[a0_0x27119e(0x1ad)](_0x5ee436,_0x2fcece,_0x39d7c3){const _0x32966e=a0_0x27119e;this[_0x32966e(0x6cb)]['verbose'](this['instanceName']+'\x20('+this[_0x32966e(0x333)]['wuid']+_0x32966e(0x135));let _0x4e5506={'number':_0x39d7c3,'options':{'delay':_0x2fcece[_0x32966e(0x3a7)][_0x32966e(0x676)]},'audioMessage':{'audio':_0x2fcece[_0x32966e(0x3a7)][_0x32966e(0x4ef)]}};try{let _0xcd11b0=await this[_0x32966e(0x539)](_0x4e5506);if(_0xcd11b0){let _0xcbf640={'_id':_0xcd11b0[_0x32966e(0x4dc)]['id'],'_fromMe':_0xcd11b0[_0x32966e(0x4dc)]['fromMe'],'_remoteJid':_0xcd11b0['key'][_0x32966e(0x3f7)]};_0x5ee436[_0x32966e(0x503)][_0x32966e(0x1bb)]=_0x2fcece[_0x32966e(0x303)][_0x32966e(0x3cb)]();let {message_normalized:_0x43c028}=this[_0x32966e(0x651)](_0xcd11b0[_0x32966e(0x26e)],W(_0xcd11b0[_0x32966e(0x26e)]),null);_0x5ee436[_0x32966e(0x503)]['lastSendMessage']=await _0x43c028;let _0x52706e={'messageId':_0xcd11b0[_0x32966e(0x4dc)]['id']},_0x2f4680=_0x5ee436['chatLog'][_0x32966e(0x21c)];Object[_0x32966e(0x2e8)](_0x2f4680,_0xcbf640),_0x5ee436[_0x32966e(0x503)][_0x32966e(0x21c)]=_0x2f4680,this[_0x32966e(0x12e)](_0x5ee436,_0x2fcece,_0x52706e);}else{let _0x35fd1f={'error':!0x0};this['updateConversation'](_0x5ee436,_0x2fcece,_0x35fd1f),this[_0x32966e(0x6cb)][_0x32966e(0x258)](this[_0x32966e(0x492)]+'\x20('+this['instance'][_0x32966e(0x106)]+_0x32966e(0x6b1));}}catch(_0x426cd0){let _0x694d96={'error':!0x0,'errorLog':_0x426cd0[_0x32966e(0x3cb)]()};this['updateConversation'](_0x5ee436,_0x2fcece,_0x694d96),this[_0x32966e(0x6cb)]['error'](this[_0x32966e(0x492)]+'\x20('+this[_0x32966e(0x333)][_0x32966e(0x106)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20'+_0x426cd0[_0x32966e(0x3cb)]());}}async[a0_0x27119e(0x53b)](_0x31ea30,_0x295e73,_0x3e96cd){const _0x4a0d04=a0_0x27119e;this['logger'][_0x4a0d04(0x234)](this[_0x4a0d04(0x492)]+'\x20('+this[_0x4a0d04(0x333)][_0x4a0d04(0x106)]+_0x4a0d04(0x5a9));let _0x26336e={'number':_0x3e96cd,'options':{'delay':_0x295e73[_0x4a0d04(0x3a7)]['delay']},'contactMessage':[{'fullName':_0x295e73[_0x4a0d04(0x3a7)][_0x4a0d04(0x3cc)],'phoneNumber':_0x295e73[_0x4a0d04(0x3a7)]['phoneNumber']}]};try{let _0x336904=await this[_0x4a0d04(0x24b)](_0x26336e);if(_0x336904){let _0x521b28={'_id':_0x336904[_0x4a0d04(0x4dc)]['id'],'_fromMe':_0x336904['key'][_0x4a0d04(0x170)],'_remoteJid':_0x336904[_0x4a0d04(0x4dc)][_0x4a0d04(0x3f7)]};_0x31ea30[_0x4a0d04(0x503)][_0x4a0d04(0x1bb)]=_0x295e73[_0x4a0d04(0x303)][_0x4a0d04(0x3cb)]();let {message_normalized:_0x4dab00}=this['normalizeMessage'](_0x336904[_0x4a0d04(0x26e)],W(_0x336904['message']),null);_0x31ea30[_0x4a0d04(0x503)][_0x4a0d04(0x1bf)]=await _0x4dab00;let _0x986472={'messageId':_0x336904[_0x4a0d04(0x4dc)]['id']},_0x2ff9fa=_0x31ea30[_0x4a0d04(0x503)][_0x4a0d04(0x21c)];Object[_0x4a0d04(0x2e8)](_0x2ff9fa,_0x521b28),_0x31ea30['chatLog']['realVariables']=_0x2ff9fa,this[_0x4a0d04(0x12e)](_0x31ea30,_0x295e73,_0x986472);}else{let _0x2f787c={'error':!0x0};this[_0x4a0d04(0x12e)](_0x31ea30,_0x295e73,_0x2f787c),this['logger'][_0x4a0d04(0x258)](this[_0x4a0d04(0x492)]+'\x20('+this[_0x4a0d04(0x333)][_0x4a0d04(0x106)]+_0x4a0d04(0x4d6));}}catch(_0x16d4f8){let _0x9550f0={'error':!0x0,'errorLog':_0x16d4f8[_0x4a0d04(0x3cb)]()};this[_0x4a0d04(0x12e)](_0x31ea30,_0x295e73,_0x9550f0),this[_0x4a0d04(0x6cb)]['error'](this[_0x4a0d04(0x492)]+'\x20('+this[_0x4a0d04(0x333)]['wuid']+_0x4a0d04(0x25d)+_0x16d4f8[_0x4a0d04(0x3cb)]());}}[a0_0x27119e(0x113)](_0x9db9f7,_0x525c0e){const _0x25007c=a0_0x27119e;for(let _0x2344b8 of _0x9db9f7)_0x2344b8[_0x25007c(0x162)]&&(_0x2344b8[_0x25007c(0x162)]=this['replaceVariables'](_0x2344b8[_0x25007c(0x162)],_0x525c0e)),_0x2344b8['optionDescription']&&(_0x2344b8[_0x25007c(0x432)]=this[_0x25007c(0x661)](_0x2344b8['optionDescription'],_0x525c0e));}async['uazapiSendPoll'](_0x2f181,_0x2f532f,_0x45b22d){const _0x596cca=a0_0x27119e;this[_0x596cca(0x6cb)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x596cca(0x106)]+_0x596cca(0x46c));let _0x3de7d4=_0x2f181['replyOptions'][_0x596cca(0x522)](_0xe74282=>_0xe74282[_0x596cca(0x467)]===_0x2f532f[_0x596cca(0x303)]);this['replaceVariablesInReplyOptions'](_0x3de7d4,_0x2f181[_0x596cca(0x503)][_0x596cca(0x21c)]);let _0x7a7a3d=_0x3de7d4[_0x596cca(0x2c7)](_0x5c2d81=>_0x5c2d81['option']),_0x44ac21={'number':_0x45b22d,'options':{'delay':_0x2f532f[_0x596cca(0x3a7)]['delay']},'pollMessage':{'name':_0x2f532f[_0x596cca(0x3a7)]['name'],'selectableCount':0x1,'values':_0x7a7a3d}};try{let _0x17e0f3=await this['pollMessage'](_0x44ac21);if(_0x17e0f3){let _0x5e63a4={'_id':_0x17e0f3[_0x596cca(0x4dc)]['id'],'_fromMe':_0x17e0f3[_0x596cca(0x4dc)][_0x596cca(0x170)],'_remoteJid':_0x17e0f3[_0x596cca(0x4dc)][_0x596cca(0x3f7)]};this[_0x596cca(0x6cb)][_0x596cca(0x234)](this[_0x596cca(0x492)]+'\x20('+this[_0x596cca(0x333)][_0x596cca(0x106)]+_0x596cca(0x585)+_0x2f532f[_0x596cca(0x3a7)][_0x596cca(0x3c5)]),_0x2f181[_0x596cca(0x3af)]=_0x17e0f3['key']['id'],_0x2f181[_0x596cca(0x4a7)]=_0x2f532f['uazapi'][_0x596cca(0x3c5)],_0x2f181['waitingPoll_replyOptions']=_0x3de7d4,this[_0x596cca(0x6cb)][_0x596cca(0x234)](this[_0x596cca(0x492)]+'\x20('+this[_0x596cca(0x333)][_0x596cca(0x106)]+_0x596cca(0x4b1)+_0x2f181[_0x596cca(0x4a7)]),_0x2f181[_0x596cca(0x503)]['lastBlockId']=_0x2f532f[_0x596cca(0x303)][_0x596cca(0x3cb)]();let {message_normalized:_0x34058a}=this['normalizeMessage'](_0x17e0f3['message'],W(_0x17e0f3[_0x596cca(0x26e)]),null);_0x2f181['chatLog'][_0x596cca(0x1bf)]=await _0x34058a;let _0x3131bd={'messageId':_0x17e0f3[_0x596cca(0x4dc)]['id']},_0x1e5039=_0x2f181[_0x596cca(0x503)][_0x596cca(0x21c)];Object[_0x596cca(0x2e8)](_0x1e5039,_0x5e63a4),_0x2f181['chatLog'][_0x596cca(0x21c)]=_0x1e5039,this['updateConversation'](_0x2f181,_0x2f532f,_0x3131bd);}else{let _0x59a0ff={'error':!0x0};this[_0x596cca(0x12e)](_0x2f181,_0x2f532f,_0x59a0ff),this[_0x596cca(0x6cb)][_0x596cca(0x258)](this['instanceName']+'\x20('+this[_0x596cca(0x333)][_0x596cca(0x106)]+_0x596cca(0x421));}}catch(_0x273f31){let _0x7264e9={'error':!0x0,'errorLog':_0x273f31[_0x596cca(0x3cb)]()};this['updateConversation'](_0x2f181,_0x2f532f,_0x7264e9),this[_0x596cca(0x6cb)]['error'](this[_0x596cca(0x492)]+'\x20('+this[_0x596cca(0x333)][_0x596cca(0x106)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20'+_0x273f31['toString']());}}async[a0_0x27119e(0x549)](_0x4ed7c4,_0x23d69d,_0x3a2115){const _0x22f62e=a0_0x27119e;this[_0x22f62e(0x6cb)][_0x22f62e(0x234)](this[_0x22f62e(0x492)]+'\x20('+this['instance'][_0x22f62e(0x106)]+_0x22f62e(0x343));let _0x274d99=_0x4ed7c4[_0x22f62e(0x503)][_0x22f62e(0x2bb)][_0x22f62e(0x36e)](_0x57b5f9=>_0x57b5f9[_0x22f62e(0x467)][_0x22f62e(0x3cb)]()===_0x23d69d[_0x22f62e(0x3a7)]['blockId'][_0x22f62e(0x3cb)]()),_0x3ddd30={'id':_0x274d99[_0x22f62e(0x411)],'remoteJid':_0x274d99[_0x22f62e(0x3f7)],'fromMe':_0x274d99[_0x22f62e(0x170)]};try{let _0x46e7c3=await this['deleteMessage'](_0x3ddd30);if(_0x46e7c3){_0x4ed7c4[_0x22f62e(0x503)][_0x22f62e(0x1bb)]=_0x23d69d[_0x22f62e(0x303)]['toString']();let {message_normalized:_0x539533}=this[_0x22f62e(0x651)](_0x46e7c3[_0x22f62e(0x26e)],W(_0x46e7c3[_0x22f62e(0x26e)]),null);_0x4ed7c4[_0x22f62e(0x503)][_0x22f62e(0x1bf)]=await _0x539533;let _0x46d58a={};this[_0x22f62e(0x12e)](_0x4ed7c4,_0x23d69d,_0x46d58a);}else{let _0x11ae17={'error':!0x0};this[_0x22f62e(0x12e)](_0x4ed7c4,_0x23d69d,_0x11ae17),this[_0x22f62e(0x6cb)][_0x22f62e(0x258)](this['instanceName']+'\x20('+this['instance'][_0x22f62e(0x106)]+'):\x20Falha\x20ao\x20deletar\x20mensagem.');}}catch(_0x1c49c0){let _0x348e38={'error':!0x0,'errorLog':_0x1c49c0[_0x22f62e(0x3cb)]()};this[_0x22f62e(0x12e)](_0x4ed7c4,_0x23d69d,_0x348e38),this['logger'][_0x22f62e(0x258)](this[_0x22f62e(0x492)]+'\x20('+this[_0x22f62e(0x333)][_0x22f62e(0x106)]+_0x22f62e(0x215)+_0x1c49c0[_0x22f62e(0x3cb)]());}}async[a0_0x27119e(0x587)](_0x3c1b75){const _0x17b603=a0_0x27119e;try{if(this['logger'][_0x17b603(0x234)](this[_0x17b603(0x492)]+'\x20('+this[_0x17b603(0x333)][_0x17b603(0x106)]+_0x17b603(0x2ba)),await I[_0x17b603(0x27b)]({'owner':this[_0x17b603(0x333)][_0x17b603(0x106)],'name':_0x3c1b75['name']}))return{'message':_0x17b603(0x694)};_0x3c1b75[_0x17b603(0x2c9)]===!0x0&&await I[_0x17b603(0x482)]({'owner':this[_0x17b603(0x333)][_0x17b603(0x106)]},{'default':!0x1});let _0x1fbec7=new be[(_0x17b603(0x15f))][(_0x17b603(0x288))](),_0x417c9a={'_id':_0x1fbec7,'default':!0x0,'title':_0x17b603(0x619),'x':0x0,'y':0x0},_0x1ad82c={'_id':new be[(_0x17b603(0x15f))][(_0x17b603(0x288))](),'order':0x1,'groupId':_0x1fbec7[_0x17b603(0x3cb)](),'type':'start'};return await I[_0x17b603(0x447)]({'owner':this[_0x17b603(0x333)][_0x17b603(0x106)],'name':_0x3c1b75[_0x17b603(0x3c5)],'groups':[_0x417c9a],'blocks':[_0x1ad82c],..._0x3c1b75});}catch(_0x3edf88){throw this[_0x17b603(0x6cb)]['error'](this['instanceName']+'\x20('+this[_0x17b603(0x333)][_0x17b603(0x106)]+_0x17b603(0x493)+_0x3edf88),new g(_0x17b603(0x60a)+_0x3edf88);}}async[a0_0x27119e(0x33b)](_0x1ed85c){const _0x219154=a0_0x27119e;try{return this[_0x219154(0x6cb)][_0x219154(0x234)](this[_0x219154(0x492)]+'\x20('+this[_0x219154(0x333)]['wuid']+_0x219154(0x5a5)),await I[_0x219154(0x172)]({'owner':this[_0x219154(0x333)][_0x219154(0x106)],'name':_0x1ed85c});}catch(_0x431f83){return this[_0x219154(0x6cb)]['error'](this[_0x219154(0x492)]+'\x20('+this[_0x219154(0x333)][_0x219154(0x106)]+'):\x20Erro\x20ao\x20deletar\x20fluxo\x20'+_0x431f83),{'message':_0x219154(0x191)+_0x431f83};}}async[a0_0x27119e(0x474)](_0x20bab6){const _0x2545be=a0_0x27119e;try{this[_0x2545be(0x6cb)][_0x2545be(0x234)](this[_0x2545be(0x492)]+'\x20('+this['instance']['wuid']+_0x2545be(0x2ce));let _0x396205=await I[_0x2545be(0x27b)]({'owner':this[_0x2545be(0x333)][_0x2545be(0x106)],'name':_0x20bab6});if(!_0x396205)throw new Error(_0x2545be(0x625));if(!this[_0x2545be(0x534)]&&(await this['getAutomateSystem'](),!this[_0x2545be(0x534)]))return null;let _0x2a92e3=this[_0x2545be(0x534)]?.[_0x2545be(0x496)][_0x2545be(0x2c7)](_0x426adc=>_0x426adc[_0x2545be(0x3c5)]),_0x17f7fb=[_0x2545be(0x378),'nomecompleto','email',_0x2545be(0x63a),_0x2545be(0x49d),_0x2545be(0xf5),_0x2545be(0x442),_0x2545be(0x69d)];return _0x396205[_0x2545be(0x1ed)]=_0x396205[_0x2545be(0x1ed)]['filter'](_0x171fc7=>!_0x17f7fb['includes'](_0x171fc7[_0x2545be(0x3c5)])),_0x17f7fb['forEach'](_0x578a3f=>{const _0x121690=_0x2545be;_0x396205[_0x121690(0x1ed)][_0x121690(0x461)]({'folder':_0x121690(0x226),'name':_0x578a3f,'value':'','doc':'','leadInfo':!0x0});}),_0x396205[_0x2545be(0x1ed)]=_0x396205[_0x2545be(0x1ed)][_0x2545be(0x522)](_0x1805d8=>!_0x2a92e3[_0x2545be(0x6ad)](_0x1805d8[_0x2545be(0x3c5)])),_0x2a92e3['forEach'](_0x59c2fb=>{const _0x3815ea=_0x2545be;_0x396205[_0x3815ea(0x1ed)][_0x3815ea(0x1ef)](_0x478b6b=>_0x478b6b['name']===_0x59c2fb&&_0x478b6b[_0x3815ea(0x226)]===!0x0)||_0x396205[_0x3815ea(0x1ed)][_0x3815ea(0x461)]({'folder':_0x3815ea(0x226),'name':_0x59c2fb,'value':'','doc':'','leadInfo':!0x0});}),await _0x396205[_0x2545be(0x601)](),_0x396205;}catch(_0x533a19){throw this[_0x2545be(0x6cb)][_0x2545be(0x258)](this[_0x2545be(0x492)]+'\x20('+this[_0x2545be(0x333)][_0x2545be(0x106)]+_0x2545be(0x28b)+_0x533a19),new g(_0x2545be(0x4ff)+_0x533a19);}}async['allFlows'](){const _0x557b2d=a0_0x27119e;try{return this[_0x557b2d(0x6cb)][_0x557b2d(0x234)](this[_0x557b2d(0x492)]+'\x20('+this[_0x557b2d(0x333)][_0x557b2d(0x106)]+'):\x20Buscando\x20todos\x20os\x20fluxos...'),await I[_0x557b2d(0x36e)]({'owner':this[_0x557b2d(0x333)]['wuid']});}catch(_0x4faa6a){return this[_0x557b2d(0x6cb)]['error'](this['instanceName']+'\x20('+this[_0x557b2d(0x333)]['wuid']+_0x557b2d(0x2ca)+_0x4faa6a),{'message':_0x557b2d(0x4e0)+_0x4faa6a};}}async[a0_0x27119e(0x1d1)](_0x1ac59d){const _0x178d23=a0_0x27119e;try{this[_0x178d23(0x6cb)]['verbose'](this['instanceName']+'\x20('+this[_0x178d23(0x333)][_0x178d23(0x106)]+_0x178d23(0x24c));let _0x4b5d9c=await I[_0x178d23(0x27b)]({'owner':this[_0x178d23(0x333)][_0x178d23(0x106)],'name':_0x1ac59d[_0x178d23(0x3c5)]});if(!_0x4b5d9c)return{'message':_0x178d23(0x6d2)};if(_0x1ac59d[_0x178d23(0x2c9)]===!0x0&&await I['updateMany']({'owner':this[_0x178d23(0x333)]['wuid']},{'default':!0x1}),_0x1ac59d['newName']){if(await I[_0x178d23(0x27b)]({'owner':this['instance'][_0x178d23(0x106)],'name':_0x1ac59d['newName']}))return{'message':_0x178d23(0x1d4)};_0x1ac59d[_0x178d23(0x3c5)]=_0x1ac59d['newName'],delete _0x1ac59d[_0x178d23(0x5b1)];}return await I[_0x178d23(0x22a)](_0x4b5d9c[_0x178d23(0x303)],{'$set':_0x1ac59d},{'new':!0x0});}catch(_0x2eab15){throw this[_0x178d23(0x6cb)][_0x178d23(0x258)](this[_0x178d23(0x492)]+'\x20('+this[_0x178d23(0x333)][_0x178d23(0x106)]+_0x178d23(0x3e7)+_0x2eab15),new g(_0x178d23(0x24a)+_0x2eab15);}}async[a0_0x27119e(0x47f)](_0x34e2e9){const _0x4a4d68=a0_0x27119e;try{this[_0x4a4d68(0x6cb)][_0x4a4d68(0x234)](this[_0x4a4d68(0x492)]+'\x20('+this[_0x4a4d68(0x333)]['wuid']+_0x4a4d68(0x32b));let _0x2cea55={'owner':this[_0x4a4d68(0x333)][_0x4a4d68(0x106)],'name':_0x34e2e9['name']},_0x127cb6=await I[_0x4a4d68(0x27b)](_0x2cea55);_0x127cb6||this['throwAndLogError']('Flow\x20não\x20encontrado');let {block:_0x431003}=_0x34e2e9;return _0x431003?.[_0x4a4d68(0x2d3)]?this[_0x4a4d68(0x3d4)](_0x127cb6,_0x34e2e9):_0x431003[_0x4a4d68(0x303)]?await this['updateBlock'](_0x127cb6,_0x34e2e9):this['addBlock'](_0x127cb6,_0x34e2e9),await _0x127cb6['save'](),_0x127cb6;}catch(_0x40c53f){this[_0x4a4d68(0x41e)](_0x4a4d68(0x393)+_0x40c53f);}}[a0_0x27119e(0x41e)](_0x1a473f){const _0x3d2f5b=a0_0x27119e;throw this[_0x3d2f5b(0x6cb)][_0x3d2f5b(0x258)](this['instanceName']+'\x20('+this['instance'][_0x3d2f5b(0x106)]+'):\x20'+_0x1a473f),new g(_0x1a473f);}[a0_0x27119e(0x3d4)](_0x46b885,_0x23f1ef){const _0x184299=a0_0x27119e;let {block:_0x15c595}=_0x23f1ef;if(_0x15c595[_0x184299(0x10c)]===_0x184299(0x407)){this['throwAndLogError'](_0x184299(0x1f6));return;}if(!_0x15c595[_0x184299(0x303)]){this[_0x184299(0x41e)]('blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco');return;}let _0xa52250=_0x46b885['blocks'][_0x184299(0x36e)](_0x3b0517=>_0x3b0517[_0x184299(0x303)][_0x184299(0x3cb)]()===_0x23f1ef['block'][_0x184299(0x303)][_0x184299(0x3cb)]());if(!_0xa52250){this[_0x184299(0x41e)]('Bloco\x20com\x20ID\x20'+_0x15c595[_0x184299(0x303)]+_0x184299(0x699));return;}_0x46b885['blocks']=_0x46b885['blocks'][_0x184299(0x522)](_0x2f6db1=>_0x2f6db1[_0x184299(0x303)][_0x184299(0x3cb)]()!==_0x23f1ef[_0x184299(0x1a0)][_0x184299(0x303)][_0x184299(0x3cb)]()),_0x46b885[_0x184299(0x34b)]=_0x46b885[_0x184299(0x34b)][_0x184299(0x522)](_0x215070=>_0x215070[_0x184299(0x467)]!==_0x15c595['_id'][_0x184299(0x3cb)]()),_0x46b885['varedits']=_0x46b885[_0x184299(0x27f)]['filter'](_0x42cff0=>_0x42cff0[_0x184299(0x467)]!==_0x15c595[_0x184299(0x303)]['toString']()),_0x46b885[_0x184299(0x347)]=_0x46b885[_0x184299(0x347)]['filter'](_0x146bb5=>_0x146bb5[_0x184299(0x467)]!==_0x15c595[_0x184299(0x303)][_0x184299(0x3cb)]()),this[_0x184299(0x21e)](_0x46b885['blocks'],_0xa52250[_0x184299(0x1a3)]);}async['updateBlock'](_0x24a39d,_0x40acf9){const _0x178bd3=a0_0x27119e;let _0x130e0b=_0x24a39d[_0x178bd3(0x3e8)][_0x178bd3(0x3a2)](_0x3e5ba8=>_0x3e5ba8[_0x178bd3(0x303)][_0x178bd3(0x3cb)]()===_0x40acf9[_0x178bd3(0x1a0)][_0x178bd3(0x303)][_0x178bd3(0x3cb)]());if(this[_0x178bd3(0x6cb)][_0x178bd3(0x234)](this[_0x178bd3(0x492)]+'\x20('+this[_0x178bd3(0x333)]['wuid']+_0x178bd3(0x220)+_0x130e0b),_0x130e0b===-0x1){this[_0x178bd3(0x6cb)][_0x178bd3(0x234)]('Bloco\x20com\x20ID\x20'+_0x40acf9[_0x178bd3(0x1a0)][_0x178bd3(0x303)]+_0x178bd3(0x241));return;}if(_0x24a39d[_0x178bd3(0x3e8)][_0x130e0b][_0x178bd3(0x10c)]==='start'){let _0x14b289=Object[_0x178bd3(0x410)](_0x40acf9[_0x178bd3(0x1a0)]);if(_0x14b289[_0x178bd3(0x57f)]>0x2||_0x14b289[_0x178bd3(0x57f)]===0x2&&!_0x14b289[_0x178bd3(0x6ad)](_0x178bd3(0x64a))){this['throwAndLogError'](_0x178bd3(0x31b));return;}}let _0x492566=_0x24a39d[_0x178bd3(0x3e8)][_0x130e0b][_0x178bd3(0x1a3)];for(let _0x477926 in _0x40acf9[_0x178bd3(0x1a0)])_0x40acf9[_0x178bd3(0x1a0)][_0x178bd3(0x591)](_0x477926)&&(_0x24a39d[_0x178bd3(0x3e8)][_0x130e0b][_0x477926]=_0x40acf9['block'][_0x477926]);if(this[_0x178bd3(0x6cb)][_0x178bd3(0x234)](this[_0x178bd3(0x492)]+'\x20('+this['instance'][_0x178bd3(0x106)]+_0x178bd3(0x546)+JSON[_0x178bd3(0x5f2)](_0x24a39d['blocks'][_0x130e0b])),_0x24a39d[_0x178bd3(0x3e8)][_0x130e0b]['apirequest']&&_0x178bd3(0x34c)in _0x24a39d['blocks'][_0x130e0b][_0x178bd3(0x355)]){this['logger']['verbose'](this[_0x178bd3(0x492)]+'\x20('+this[_0x178bd3(0x333)][_0x178bd3(0x106)]+_0x178bd3(0x115));let _0x578b16=JSON[_0x178bd3(0x5f2)](_0x24a39d[_0x178bd3(0x3e8)][_0x130e0b][_0x178bd3(0x355)]['header'],null,0x1);_0x578b16[_0x178bd3(0x57f)]>0x2&&(_0x578b16=_0x578b16[_0x178bd3(0x491)](0x1,_0x578b16[_0x178bd3(0x57f)]-0x1)[_0x178bd3(0x294)]()),_0x24a39d[_0x178bd3(0x3e8)][_0x130e0b][_0x178bd3(0x355)]['headerString']=_0x578b16;}if(_0x24a39d[_0x178bd3(0x3e8)][_0x130e0b]['apirequest']&&'body'in _0x24a39d['blocks'][_0x130e0b][_0x178bd3(0x355)]){this[_0x178bd3(0x6cb)]['verbose'](this[_0x178bd3(0x492)]+'\x20('+this[_0x178bd3(0x333)][_0x178bd3(0x106)]+_0x178bd3(0x22e));let _0x2d51e0=JSON[_0x178bd3(0x5f2)](_0x24a39d[_0x178bd3(0x3e8)][_0x130e0b]['apirequest'][_0x178bd3(0x4ea)],null,0x1);_0x2d51e0[_0x178bd3(0x57f)]>0x2&&(_0x2d51e0=_0x2d51e0[_0x178bd3(0x491)](0x1,_0x2d51e0[_0x178bd3(0x57f)]-0x1)[_0x178bd3(0x294)]()),_0x24a39d['blocks'][_0x130e0b]['apirequest'][_0x178bd3(0x5a1)]=_0x2d51e0;}let _0x291188=_0x24a39d['blocks'][_0x130e0b][_0x178bd3(0x1a3)];_0x492566!==_0x291188?(this[_0x178bd3(0x21e)](_0x24a39d[_0x178bd3(0x3e8)],_0x492566),this['reorderBlocks'](_0x24a39d[_0x178bd3(0x3e8)],_0x291188)):this[_0x178bd3(0x21e)](_0x24a39d[_0x178bd3(0x3e8)],_0x492566);}[a0_0x27119e(0x43e)](_0x65f9be,_0x512d12){const _0x474da7=a0_0x27119e;if(_0x512d12[_0x474da7(0x1a0)][_0x474da7(0x10c)]===_0x474da7(0x407)){this[_0x474da7(0x41e)](_0x474da7(0x22d));return;}if(_0x512d12[_0x474da7(0x1a0)][_0x474da7(0x355)]&&'header'in _0x512d12[_0x474da7(0x1a0)][_0x474da7(0x355)]){this['logger'][_0x474da7(0x234)](this['instanceName']+'\x20('+this[_0x474da7(0x333)]['wuid']+_0x474da7(0x115));let _0x593120=JSON[_0x474da7(0x5f2)](_0x512d12[_0x474da7(0x1a0)][_0x474da7(0x355)][_0x474da7(0x34c)],null,0x1);_0x593120['length']>0x2&&(_0x593120=_0x593120[_0x474da7(0x491)](0x1,_0x593120['length']-0x1)[_0x474da7(0x294)]()),_0x512d12[_0x474da7(0x1a0)]['apirequest'][_0x474da7(0x1e1)]=_0x593120;}_0x512d12[_0x474da7(0x1a0)][_0x474da7(0x355)]&&_0x474da7(0x4ea)in _0x512d12[_0x474da7(0x1a0)][_0x474da7(0x355)]&&(this[_0x474da7(0x6cb)][_0x474da7(0x234)](this[_0x474da7(0x492)]+'\x20('+this[_0x474da7(0x333)][_0x474da7(0x106)]+_0x474da7(0x22e)),_0x512d12[_0x474da7(0x1a0)]['apirequest'][_0x474da7(0x5a1)]=JSON[_0x474da7(0x5f2)](_0x512d12[_0x474da7(0x1a0)][_0x474da7(0x355)][_0x474da7(0x4ea)],null,0x1)[_0x474da7(0x294)]()),_0x65f9be[_0x474da7(0x3e8)][_0x474da7(0x461)](_0x512d12[_0x474da7(0x1a0)]),this['reorderBlocks'](_0x65f9be['blocks'],_0x512d12[_0x474da7(0x1a0)]['groupId']);}['reorderBlocks'](_0x49ee95,_0x429317){const _0x338d3e=a0_0x27119e;let _0x234adf=_0x49ee95[_0x338d3e(0x522)](_0x42daec=>_0x42daec[_0x338d3e(0x1a3)]===_0x429317);_0x234adf['sort']((_0x4e1c0c,_0x14d42f)=>_0x4e1c0c[_0x338d3e(0x69f)]-_0x14d42f[_0x338d3e(0x69f)]),_0x234adf[_0x338d3e(0xfc)]((_0x4eee03,_0x3fc92c)=>_0x4eee03[_0x338d3e(0x69f)]=_0x3fc92c+0x1);}async[a0_0x27119e(0x6cc)](_0x27d7c8){const _0xfcbb82=a0_0x27119e;try{if(this[_0xfcbb82(0x6cb)]['verbose'](this[_0xfcbb82(0x492)]+'\x20('+this[_0xfcbb82(0x333)][_0xfcbb82(0x106)]+_0xfcbb82(0x3db)),!_0x27d7c8||!_0x27d7c8[_0xfcbb82(0x1cb)]){this['throwAndLogError'](_0xfcbb82(0x3f5));return;}let _0x12a163={'owner':this['instance']['wuid'],'name':_0x27d7c8[_0xfcbb82(0x3c5)]},_0x2f9087=await I['findOne'](_0x12a163);_0x2f9087||this[_0xfcbb82(0x41e)](_0xfcbb82(0x625));let {replyOption:_0x9bb74a}=_0x27d7c8;return _0x9bb74a?.[_0xfcbb82(0x2d3)]?this[_0xfcbb82(0x563)](_0x2f9087,_0x27d7c8):_0x9bb74a[_0xfcbb82(0x303)]?await this['updateReplyOption'](_0x2f9087,_0x27d7c8):this[_0xfcbb82(0x665)](_0x2f9087,_0x27d7c8),await _0x2f9087[_0xfcbb82(0x601)](),_0x2f9087;}catch(_0x153426){this['throwAndLogError'](_0xfcbb82(0x244)+_0x153426);}}[a0_0x27119e(0x563)](_0x4e94e0,_0x5b8b59){const _0x43fb1e=a0_0x27119e;let {replyOption:_0x6cff9b}=_0x5b8b59;if(!_0x6cff9b[_0x43fb1e(0x303)]){this['throwAndLogError'](_0x43fb1e(0x58e));return;}if(!_0x4e94e0[_0x43fb1e(0x347)][_0x43fb1e(0x36e)](_0x2e278b=>_0x2e278b[_0x43fb1e(0x303)][_0x43fb1e(0x3cb)]()===_0x5b8b59[_0x43fb1e(0x1cb)]['_id'][_0x43fb1e(0x3cb)]())){this[_0x43fb1e(0x41e)](_0x43fb1e(0x431)+_0x6cff9b['_id']+_0x43fb1e(0x699));return;}_0x4e94e0[_0x43fb1e(0x347)]=_0x4e94e0[_0x43fb1e(0x347)][_0x43fb1e(0x522)](_0x1aae15=>_0x1aae15['_id'][_0x43fb1e(0x3cb)]()!==_0x5b8b59['replyOption'][_0x43fb1e(0x303)][_0x43fb1e(0x3cb)]());}async[a0_0x27119e(0x167)](_0x55b71c,_0xc071a9){const _0x18491d=a0_0x27119e;let _0x1e2da5=_0x55b71c[_0x18491d(0x347)][_0x18491d(0x3a2)](_0x169c98=>_0x169c98[_0x18491d(0x303)][_0x18491d(0x3cb)]()===_0xc071a9[_0x18491d(0x1cb)][_0x18491d(0x303)]['toString']());if(_0x1e2da5===-0x1){this[_0x18491d(0x41e)](_0x18491d(0x431)+_0xc071a9['replyOption']['_id']+'\x20não\x20encontrado\x20para\x20atualização.');return;}for(let _0x53a379 in _0xc071a9[_0x18491d(0x1cb)])_0xc071a9[_0x18491d(0x1cb)][_0x18491d(0x591)](_0x53a379)&&(_0x55b71c[_0x18491d(0x347)][_0x1e2da5][_0x53a379]=_0xc071a9[_0x18491d(0x1cb)][_0x53a379]);}[a0_0x27119e(0x665)](_0x1057e4,_0x13210f){const _0x128f96=a0_0x27119e;_0x1057e4[_0x128f96(0x347)]['push'](_0x13210f[_0x128f96(0x1cb)]);}async[a0_0x27119e(0x52e)](_0x2bad5a){const _0x72db5e=a0_0x27119e;this[_0x72db5e(0x6cb)][_0x72db5e(0x234)](this['instanceName']+'\x20('+this[_0x72db5e(0x333)][_0x72db5e(0x106)]+_0x72db5e(0x41c)+_0x2bad5a);try{this['logger'][_0x72db5e(0x234)](this[_0x72db5e(0x492)]+'\x20('+this[_0x72db5e(0x333)][_0x72db5e(0x106)]+_0x72db5e(0x636));let _0xc9c229={'owner':this[_0x72db5e(0x333)][_0x72db5e(0x106)],'name':_0x2bad5a[_0x72db5e(0x3c5)]},_0x4ff0a8=await I[_0x72db5e(0x27b)](_0xc9c229);if(!_0x4ff0a8)throw new Error(_0x72db5e(0x625));if(_0x2bad5a[_0x72db5e(0x13b)]&&_0x2bad5a['group']?.[_0x72db5e(0x2d3)]===!0x0){if(this[_0x72db5e(0x6cb)][_0x72db5e(0x234)](this[_0x72db5e(0x492)]+'\x20('+this['instance'][_0x72db5e(0x106)]+_0x72db5e(0x2ac)),_0x2bad5a['group'][_0x72db5e(0x2c9)]===!0x0)return{'message':_0x72db5e(0x58c)};if(_0x4ff0a8[_0x72db5e(0x3e8)]['some'](_0x451a4d=>_0x451a4d[_0x72db5e(0x1a3)][_0x72db5e(0x3cb)]()===_0x2bad5a[_0x72db5e(0x13b)][_0x72db5e(0x303)]))return this[_0x72db5e(0x6cb)][_0x72db5e(0x234)](this[_0x72db5e(0x492)]+'\x20('+this[_0x72db5e(0x333)]['wuid']+'):\x20tem\x20blocks'),{'message':_0x72db5e(0x18b)};_0x4ff0a8[_0x72db5e(0x17e)]=_0x4ff0a8[_0x72db5e(0x17e)]['filter'](_0xd51576=>_0xd51576['_id'][_0x72db5e(0x3cb)]()!==_0x2bad5a[_0x72db5e(0x13b)]['_id']);}else{if(_0x2bad5a[_0x72db5e(0x13b)]){if(_0x2bad5a[_0x72db5e(0x13b)][_0x72db5e(0x2c9)]===!0x0)return{'message':_0x72db5e(0x4d5)};if(_0x2bad5a['group'][_0x72db5e(0x303)]){let _0x4aef42=_0x4ff0a8['groups']['find'](_0x589484=>_0x589484[_0x72db5e(0x303)][_0x72db5e(0x3cb)]()===_0x2bad5a[_0x72db5e(0x13b)][_0x72db5e(0x303)]);_0x4aef42&&(_0x2bad5a[_0x72db5e(0x13b)]['x']<0x0&&(_0x2bad5a['group']['x']=0x0),_0x2bad5a[_0x72db5e(0x13b)]['y']<0x0&&(_0x2bad5a[_0x72db5e(0x13b)]['y']=0x0),Object['assign'](_0x4aef42,_0x2bad5a['group']));}else _0x4ff0a8[_0x72db5e(0x17e)][_0x72db5e(0x461)](_0x2bad5a[_0x72db5e(0x13b)]);}}return await _0x4ff0a8[_0x72db5e(0x601)](),_0x4ff0a8;}catch(_0xdbe3b0){throw this[_0x72db5e(0x6cb)][_0x72db5e(0x258)](this[_0x72db5e(0x492)]+'\x20('+this[_0x72db5e(0x333)][_0x72db5e(0x106)]+'):\x20Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20'+_0xdbe3b0),new g(_0x72db5e(0xf2)+_0xdbe3b0);}}async[a0_0x27119e(0x3c6)](_0x5f50d2){const _0x3c4b37=a0_0x27119e;try{this[_0x3c4b37(0x6cb)][_0x3c4b37(0x234)](this[_0x3c4b37(0x492)]+'\x20('+this[_0x3c4b37(0x333)][_0x3c4b37(0x106)]+'):\x20Editando\x20condição\x20do\x20fluxo...');let _0x10bc15={'owner':this[_0x3c4b37(0x333)][_0x3c4b37(0x106)],'name':_0x5f50d2[_0x3c4b37(0x3c5)]},_0x545b96=await I[_0x3c4b37(0x27b)](_0x10bc15);if(!_0x545b96)throw new Error(_0x3c4b37(0x625));let _0x3ab318=!0x1;if(_0x5f50d2[_0x3c4b37(0x4f2)]?.[_0x3c4b37(0x2d3)]===!0x0)_0x545b96[_0x3c4b37(0x34b)]=_0x545b96[_0x3c4b37(0x34b)]['filter'](_0x4fb522=>_0x4fb522&&_0x5f50d2[_0x3c4b37(0x4f2)]&&_0x4fb522[_0x3c4b37(0x303)]&&_0x5f50d2['condition'][_0x3c4b37(0x303)]&&_0x4fb522[_0x3c4b37(0x303)][_0x3c4b37(0x3cb)]()!==_0x5f50d2['condition'][_0x3c4b37(0x303)][_0x3c4b37(0x3cb)]()),_0x3ab318=!0x0;else{let _0x159b2d=_0x545b96[_0x3c4b37(0x34b)][_0x3c4b37(0x36e)](_0x58dd81=>_0x58dd81&&_0x5f50d2[_0x3c4b37(0x4f2)]&&_0x58dd81['_id']&&_0x5f50d2[_0x3c4b37(0x4f2)][_0x3c4b37(0x303)]&&_0x58dd81['_id'][_0x3c4b37(0x3cb)]()===_0x5f50d2['condition'][_0x3c4b37(0x303)]['toString']());_0x159b2d?(_0x3ab318=_0x159b2d[_0x3c4b37(0x69f)]!==_0x5f50d2[_0x3c4b37(0x4f2)]['order'],Object[_0x3c4b37(0x2e8)](_0x159b2d,_0x5f50d2[_0x3c4b37(0x4f2)])):(_0x545b96[_0x3c4b37(0x34b)][_0x3c4b37(0x461)](_0x5f50d2[_0x3c4b37(0x4f2)]),_0x3ab318=!0x0);}if(_0x3ab318){_0x545b96['conditions'][_0x3c4b37(0x3e3)]((_0x4743af,_0x22c026)=>_0x4743af[_0x3c4b37(0x69f)]>_0x22c026[_0x3c4b37(0x69f)]?0x1:_0x22c026['order']>_0x4743af[_0x3c4b37(0x69f)]?-0x1:0x0);for(let _0x198106=0x0;_0x198106<_0x545b96[_0x3c4b37(0x34b)][_0x3c4b37(0x57f)];_0x198106++)_0x545b96[_0x3c4b37(0x34b)][_0x198106][_0x3c4b37(0x69f)]=_0x198106+0x1;_0x545b96[_0x3c4b37(0x34b)][_0x3c4b37(0x57f)]>0x0&&(_0x545b96[_0x3c4b37(0x34b)][0x0][_0x3c4b37(0x3ab)]=_0x3c4b37(0x21d));}return await _0x545b96[_0x3c4b37(0x601)](),_0x545b96;}catch(_0x85c7c2){throw this[_0x3c4b37(0x6cb)]['error'](this[_0x3c4b37(0x492)]+'\x20('+this['instance'][_0x3c4b37(0x106)]+_0x3c4b37(0x2e0)+_0x85c7c2),new Error(_0x3c4b37(0x4f8)+_0x85c7c2);}}async['editFlowVaredit'](_0x1530da){const _0x1baee6=a0_0x27119e;try{this[_0x1baee6(0x6cb)][_0x1baee6(0x234)](this[_0x1baee6(0x492)]+'\x20('+this['instance'][_0x1baee6(0x106)]+_0x1baee6(0x392));let _0x596b2d={'owner':this['instance'][_0x1baee6(0x106)],'name':_0x1530da[_0x1baee6(0x3c5)]},_0x1aa967=await I[_0x1baee6(0x27b)](_0x596b2d);if(!_0x1aa967)throw new Error(_0x1baee6(0x625));let _0x182888=!0x1;if(_0x1530da[_0x1baee6(0x31c)]?.[_0x1baee6(0x2d3)]===!0x0)_0x1aa967[_0x1baee6(0x27f)]=_0x1aa967['varedits']['filter'](_0x5bf2a3=>_0x5bf2a3&&_0x1530da[_0x1baee6(0x31c)]&&_0x5bf2a3[_0x1baee6(0x303)]&&_0x1530da[_0x1baee6(0x31c)]['_id']&&_0x5bf2a3['_id'][_0x1baee6(0x3cb)]()!==_0x1530da[_0x1baee6(0x31c)][_0x1baee6(0x303)][_0x1baee6(0x3cb)]()),_0x182888=!0x0;else{let _0x354170=_0x1aa967[_0x1baee6(0x27f)]['find'](_0x59b2ea=>_0x59b2ea&&_0x1530da['varedit']&&_0x59b2ea[_0x1baee6(0x303)]&&_0x1530da[_0x1baee6(0x31c)]['_id']&&_0x59b2ea[_0x1baee6(0x303)][_0x1baee6(0x3cb)]()===_0x1530da[_0x1baee6(0x31c)][_0x1baee6(0x303)]['toString']());_0x354170?(_0x182888=_0x354170[_0x1baee6(0x69f)]!==_0x1530da[_0x1baee6(0x31c)][_0x1baee6(0x69f)],Object[_0x1baee6(0x2e8)](_0x354170,_0x1530da[_0x1baee6(0x31c)])):(_0x1aa967[_0x1baee6(0x27f)]['push'](_0x1530da['varedit']),_0x182888=!0x0);}if(_0x182888){_0x1aa967[_0x1baee6(0x27f)][_0x1baee6(0x3e3)]((_0x400e97,_0x5f1139)=>_0x400e97[_0x1baee6(0x69f)]>_0x5f1139['order']?0x1:_0x5f1139[_0x1baee6(0x69f)]>_0x400e97[_0x1baee6(0x69f)]?-0x1:0x0);for(let _0x40a432=0x0;_0x40a432<_0x1aa967['varedits'][_0x1baee6(0x57f)];_0x40a432++)_0x1aa967[_0x1baee6(0x27f)][_0x40a432][_0x1baee6(0x69f)]=_0x40a432+0x1;}return await _0x1aa967[_0x1baee6(0x601)](),_0x1aa967;}catch(_0x58e7e3){throw this[_0x1baee6(0x6cb)][_0x1baee6(0x258)](this[_0x1baee6(0x492)]+'\x20('+this[_0x1baee6(0x333)]['wuid']+_0x1baee6(0x2e0)+_0x58e7e3),new g(_0x1baee6(0x4f8)+_0x58e7e3);}}async[a0_0x27119e(0x319)](_0x4f8a9e){const _0x6bb755=a0_0x27119e;try{this[_0x6bb755(0x6cb)]['verbose'](this[_0x6bb755(0x492)]+'\x20('+this[_0x6bb755(0x333)][_0x6bb755(0x106)]+_0x6bb755(0x408));let _0xb2236f={'owner':this[_0x6bb755(0x333)]['wuid'],'name':_0x4f8a9e[_0x6bb755(0x3c5)]},_0x35b546=await I[_0x6bb755(0x27b)](_0xb2236f);if(!_0x35b546)throw new Error('Flow\x20não\x20encontrado');_0x4f8a9e['variable']['name']=_0x4f8a9e[_0x6bb755(0x261)][_0x6bb755(0x3c5)][_0x6bb755(0x294)](),_0x4f8a9e['variable'][_0x6bb755(0x3c5)][_0x6bb755(0x439)]('_')&&(_0x4f8a9e[_0x6bb755(0x261)]['name']=_0x4f8a9e[_0x6bb755(0x261)][_0x6bb755(0x3c5)][_0x6bb755(0x491)](0x1)),_0x4f8a9e[_0x6bb755(0x261)][_0x6bb755(0x3c5)]=_0x4f8a9e['variable']['name'][_0x6bb755(0x294)]();let _0x2067bd=_0x35b546['variables'][_0x6bb755(0x36e)](_0x5c07ef=>_0x5c07ef[_0x6bb755(0x3c5)]===_0x4f8a9e[_0x6bb755(0x261)][_0x6bb755(0x3c5)]);if(_0x2067bd?.['leadInfo']===!0x0)throw new Error(_0x6bb755(0x2d0));if(_0x4f8a9e['variable']?.[_0x6bb755(0x2d3)]===!0x0){if(!_0x2067bd)return{'message':_0x6bb755(0x375)};_0x35b546[_0x6bb755(0x1ed)]=_0x35b546[_0x6bb755(0x1ed)][_0x6bb755(0x522)](_0x23a3c4=>_0x23a3c4[_0x6bb755(0x3c5)]!==_0x4f8a9e[_0x6bb755(0x261)][_0x6bb755(0x3c5)]);}else _0x2067bd?Object[_0x6bb755(0x2e8)](_0x2067bd,_0x4f8a9e[_0x6bb755(0x261)]):_0x35b546[_0x6bb755(0x1ed)][_0x6bb755(0x461)](_0x4f8a9e[_0x6bb755(0x261)]);return await _0x35b546['save'](),_0x35b546;}catch(_0x1a52bc){throw this['logger'][_0x6bb755(0x258)](this[_0x6bb755(0x492)]+'\x20('+this[_0x6bb755(0x333)][_0x6bb755(0x106)]+_0x6bb755(0x3f4)+_0x1a52bc),new g(_0x6bb755(0x383)+_0x1a52bc);}}async[a0_0x27119e(0x1c4)](_0x2c2d90){const _0xa2b7d=a0_0x27119e;try{if(!this[_0xa2b7d(0x534)]?.[_0xa2b7d(0x3ba)][_0xa2b7d(0x3b1)])throw new g(_0xa2b7d(0x2f5));this[_0xa2b7d(0x6cb)][_0xa2b7d(0x234)](this['instanceName']+'\x20('+this['instance'][_0xa2b7d(0x106)]+_0xa2b7d(0x68d));let _0x5e6f7e=(await this[_0xa2b7d(0x678)]({'numbers':[_0x2c2d90[_0xa2b7d(0x3f7)]]}))[0x0];if(!_0x5e6f7e[_0xa2b7d(0x3b8)]&&!(0x0,w['isJidGroup'])(_0x5e6f7e[_0xa2b7d(0x23d)])&&!_0x5e6f7e[_0xa2b7d(0x23d)]['includes']('@broadcast'))throw new g(_0x5e6f7e);let _0x322cc0=await I['findOne']({'owner':this[_0xa2b7d(0x333)][_0xa2b7d(0x106)],'name':_0x2c2d90[_0xa2b7d(0x3c5)]});if(!_0x322cc0)return this['logger'][_0xa2b7d(0x258)](this['instanceName']+'\x20('+this['instance']['wuid']+_0xa2b7d(0x4e2)),{'message':_0xa2b7d(0x625)};let _0x498c00=await this['createConversationforStartFlow'](_0x322cc0,_0x5e6f7e['jid'],_0x2c2d90[_0xa2b7d(0x237)]);if(_0x498c00){this[_0xa2b7d(0x6cb)][_0xa2b7d(0x234)](this[_0xa2b7d(0x492)]+'\x20('+this[_0xa2b7d(0x333)]['wuid']+_0xa2b7d(0x3c1));let _0x54dce4=await this['NextBlock'](_0x498c00);return _0x54dce4&&await this[_0xa2b7d(0x10e)](_0x498c00,_0x54dce4,_0x498c00['remoteJid']),{'message':_0xa2b7d(0x403)+_0x2c2d90[_0xa2b7d(0x3f7)]};}}catch(_0x219e45){if(this[_0xa2b7d(0x6cb)][_0xa2b7d(0x258)](this[_0xa2b7d(0x492)]+'\x20('+this[_0xa2b7d(0x333)][_0xa2b7d(0x106)]+'):\x20Erro\x20ao\x20iniciar\x20fluxo\x20'+_0x219e45),_0x219e45&&_0x219e45[_0xa2b7d(0x26e)]&&Array['isArray'](_0x219e45[_0xa2b7d(0x26e)])&&_0x219e45[_0xa2b7d(0x26e)][0x0]){let {jid:_0x598366,exists:_0x34bdc8}=_0x219e45['message'][0x0];}throw new g(_0xa2b7d(0x6b0)+_0x219e45['message']);}}async[a0_0x27119e(0x35d)](_0x232f38){const _0x24fef4=a0_0x27119e;let _0x4da7e6=await F[_0x24fef4(0x482)]({'owner':this[_0x24fef4(0x333)]['wuid'],'remoteJid':_0x232f38,'status':_0x24fef4(0x43f)},{'$set':{'status':_0x24fef4(0x60e)}});return this[_0x24fef4(0x6cb)][_0x24fef4(0x234)](this[_0x24fef4(0x492)]+'\x20('+this[_0x24fef4(0x333)][_0x24fef4(0x106)]+_0x24fef4(0x1e3)),_0x4da7e6;}async[a0_0x27119e(0x5f4)](_0x13fdd1,_0x564e83,_0xfa5f72){const _0x77d462=a0_0x27119e;this[_0x77d462(0x6cb)]['verbose'](this[_0x77d462(0x492)]+'\x20('+this[_0x77d462(0x333)][_0x77d462(0x106)]+_0x77d462(0x205)),await this['closeExistingConversations'](_0x564e83);try{let _0x53d580=require(_0x77d462(0x161))[_0x77d462(0x288)],_0x51aa6b=Date[_0x77d462(0x541)](),_0x389bb1=_0x77d462(0x407),_0x8295c8={},_0x5c7b8f={},_0x2c0c48={..._0x13fdd1[_0x77d462(0xf7)],'chatLog':null},_0x22ddad=await this[_0x77d462(0x6a0)](_0x2c0c48[_0x77d462(0x1ed)]),_0x558ebd=await this['getVariablesChat'](_0x564e83),_0x4b7de9={..._0x22ddad,..._0x558ebd,'_remoteJid':_0x564e83},_0x3b2cea={'lastReceivedMessage':_0x8295c8,'lastSendMessage':_0x5c7b8f,'lastBlockId':_0x389bb1,'lastCondition':!0x0,'realVariables':_0x4b7de9};_0x2c0c48[_0x77d462(0x503)]=_0x3b2cea,_0x2c0c48['chatLog'][_0x77d462(0x21c)]={..._0x4b7de9,..._0xfa5f72},delete _0x2c0c48[_0x77d462(0x303)],_0x2c0c48[_0x77d462(0x303)]=new _0x53d580(),_0x2c0c48[_0x77d462(0x640)]=_0x51aa6b,_0x2c0c48[_0x77d462(0x49d)]='open',_0x2c0c48[_0x77d462(0x3f7)]=_0x564e83;let _0x59337a=await F[_0x77d462(0x447)](_0x2c0c48);return this[_0x77d462(0x6cb)][_0x77d462(0x234)](this[_0x77d462(0x492)]+'\x20('+this['instance'][_0x77d462(0x106)]+_0x77d462(0x18a)),_0x59337a?_0x2c0c48:null;}catch(_0x405149){throw this[_0x77d462(0x6cb)][_0x77d462(0x258)](this['instanceName']+'\x20('+this[_0x77d462(0x333)][_0x77d462(0x106)]+_0x77d462(0x345)+_0x405149),new g(_0x405149[_0x77d462(0x26e)]);}}async[a0_0x27119e(0x21f)](_0x11f015){const _0xb6ea85=a0_0x27119e;try{return this[_0xb6ea85(0x6cb)][_0xb6ea85(0x234)](this[_0xb6ea85(0x492)]+'\x20('+this['instance'][_0xb6ea85(0x106)]+_0xb6ea85(0x5ab)),this[_0xb6ea85(0x6cb)]['verbose'](this[_0xb6ea85(0x492)]+'\x20('+this[_0xb6ea85(0x333)][_0xb6ea85(0x106)]+_0xb6ea85(0x4a4)+{'owner':this[_0xb6ea85(0x333)][_0xb6ea85(0x106)],'_id':_0x11f015}),await F[_0xb6ea85(0x27b)]({'owner':this[_0xb6ea85(0x333)]['wuid'],'_id':_0x11f015});}catch(_0x11ab5f){throw this['logger'][_0xb6ea85(0x258)](this[_0xb6ea85(0x492)]+'\x20('+this[_0xb6ea85(0x333)][_0xb6ea85(0x106)]+_0xb6ea85(0x52b)+_0x11ab5f),new g('Erro\x20ao\x20buscar\x20conversa:\x20'+_0x11ab5f[_0xb6ea85(0x26e)]);}}async[a0_0x27119e(0x3bf)](_0x4d7be9,_0x10dffd=0x64){const _0x59fe4d=a0_0x27119e;try{this[_0x59fe4d(0x6cb)][_0x59fe4d(0x234)](this['instanceName']+'\x20('+this[_0x59fe4d(0x333)][_0x59fe4d(0x106)]+_0x59fe4d(0x249));let _0x402fe8={..._0x4d7be9,'owner':this[_0x59fe4d(0x333)]['wuid']};return this[_0x59fe4d(0x6cb)][_0x59fe4d(0x234)](_0x402fe8),await F[_0x59fe4d(0x36e)](_0x402fe8)['limit'](_0x10dffd)['sort']({'lastInteraction':-0x1});}catch(_0x2c44a0){throw this['logger']['error'](this[_0x59fe4d(0x492)]+'\x20('+this[_0x59fe4d(0x333)][_0x59fe4d(0x106)]+_0x59fe4d(0x112)+_0x2c44a0),new g('Erro\x20ao\x20buscar\x20conversas:\x20'+_0x2c44a0[_0x59fe4d(0x26e)]);}}async[a0_0x27119e(0x1f7)](_0x549d18){const _0x2e52c6=a0_0x27119e;try{return this['logger'][_0x2e52c6(0x234)](this['instanceName']+'\x20('+this[_0x2e52c6(0x333)][_0x2e52c6(0x106)]+_0x2e52c6(0x30b)),this[_0x2e52c6(0x6cb)]['verbose'](this[_0x2e52c6(0x492)]+'\x20('+this['instance'][_0x2e52c6(0x106)]+_0x2e52c6(0x4a4)+{'owner':this[_0x2e52c6(0x333)][_0x2e52c6(0x106)],'_id':_0x549d18}),(await F[_0x2e52c6(0x172)]({'owner':this[_0x2e52c6(0x333)]['wuid'],'_id':_0x549d18}))['deletedCount']===0x0?{'message':_0x2e52c6(0x1e5)}:{'message':_0x2e52c6(0x527)};}catch(_0x1c61dd){throw this['logger'][_0x2e52c6(0x258)](this[_0x2e52c6(0x492)]+'\x20('+this[_0x2e52c6(0x333)]['wuid']+_0x2e52c6(0x5ba)+_0x1c61dd),new g(_0x2e52c6(0x3c3)+_0x1c61dd[_0x2e52c6(0x26e)]);}}async[a0_0x27119e(0x35a)](_0x58ed0a){const _0x3b86e5=a0_0x27119e;try{let {_id:_0x4547c0,chatLog:_0x3590bc,status:_0x53993b}=_0x58ed0a;if(!_0x4547c0)return{'message':_0x3b86e5(0x4d1)};let _0x3153c8={};if(_0x53993b!==void 0x0&&(_0x3153c8[_0x3b86e5(0x49d)]=_0x53993b),Object[_0x3b86e5(0x410)](_0x3153c8)['length']===0x0)return{'message':'Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.'};let _0x4cd160=this[_0x3b86e5(0x333)]['wuid'],_0x58a628=await F['findOneAndUpdate']({'_id':_0x4547c0,'owner':_0x4cd160},{'$set':_0x3153c8},{'new':!0x0});return _0x58a628||{'message':_0x3b86e5(0x644)};}catch(_0x45bfb3){throw this[_0x3b86e5(0x6cb)]['error'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x3b86e5(0x46f)+_0x45bfb3),new g(_0x3b86e5(0x34a)+_0x45bfb3[_0x3b86e5(0x26e)]);}}async['editChat'](_0x19a090){const _0x10a4db=a0_0x27119e;try{_0x19a090['id']=this['createJid'](_0x19a090['id']);let {id:_0xb91b28,leadInfo:_0x5ecc01}=_0x19a090;if(!_0xb91b28)throw new Error(_0x10a4db(0x56b));let _0x2aef62=(_0x38ec5d,_0x565e7f,_0x300285)=>{const _0x34f446=_0x10a4db;_0x300285[_0x34f446(0xfc)](_0x327cf2=>{const _0x47b98a=_0x34f446;_0x38ec5d[_0x327cf2]!==void 0x0&&(_0x565e7f[_0x47b98a(0x3e0)+_0x327cf2]=_0x38ec5d[_0x327cf2]);});},_0x7ee6b0={};if(_0x2aef62(_0x5ecc01,_0x7ee6b0,[_0x10a4db(0x378),_0x10a4db(0x444),_0x10a4db(0x5c3),_0x10a4db(0x63a),'status',_0x10a4db(0xf5),_0x10a4db(0x69d),_0x10a4db(0x2a2),_0x10a4db(0x442)]),Array[_0x10a4db(0x5f5)](_0x5ecc01['customFields'])&&(_0x7ee6b0['leadInfo.customFields']=_0x5ecc01[_0x10a4db(0x496)][_0x10a4db(0x2c7)](_0x1fa2d6=>({'_id':_0x1fa2d6['_id'],'value':_0x1fa2d6[_0x10a4db(0x55f)]}))),_0x19a090[_0x10a4db(0x226)][_0x10a4db(0x15b)]!==void 0x0&&(_0x7ee6b0[_0x10a4db(0x52c)]=Number(_0x19a090[_0x10a4db(0x226)][_0x10a4db(0x15b)])),_0x19a090[_0x10a4db(0x4a2)]!==void 0x0&&(_0x7ee6b0[_0x10a4db(0x4a2)]=Number(_0x19a090[_0x10a4db(0x4a2)])),Object[_0x10a4db(0x410)](_0x7ee6b0)[_0x10a4db(0x57f)]===0x0)throw new Error(_0x10a4db(0x10a));let _0x15771e=this[_0x10a4db(0x333)]['wuid'];if(!_0x15771e)throw new Error(_0x10a4db(0x297));if(!await D[_0x10a4db(0x27b)]({'id':_0x19a090['id'],'owner':_0x15771e})){let _0x49c3df=(await this[_0x10a4db(0x678)]({'numbers':[_0x19a090['id']]}))[0x0];if(!_0x49c3df['exists']&&!(0x0,w[_0x10a4db(0x2d9)])(_0x49c3df['jid'])&&!_0x49c3df[_0x10a4db(0x23d)][_0x10a4db(0x6ad)](_0x10a4db(0x370)))throw new g(_0x49c3df);_0x19a090['id']=_0x49c3df['jid'];}let _0x2750be=await D[_0x10a4db(0x6a6)]({'id':_0x19a090['id'],'owner':_0x15771e},{'$set':_0x7ee6b0},{'new':!0x0,'upsert':!0x0});return _0x2750be&&q(this['instanceName'],_0x10a4db(0x65a),{'chat':_0x2750be}),_0x2750be?(this[_0x10a4db(0x6cb)]['verbose'](this[_0x10a4db(0x492)]+'\x20('+this[_0x10a4db(0x333)][_0x10a4db(0x106)]+_0x10a4db(0x611)+_0x2750be),_0x2750be):{'message':_0x10a4db(0x1c2)};}catch(_0xa03b3d){throw this[_0x10a4db(0x6cb)][_0x10a4db(0x258)](this[_0x10a4db(0x492)]+'\x20('+this[_0x10a4db(0x333)][_0x10a4db(0x106)]+_0x10a4db(0x140)+_0xa03b3d),new g(_0x10a4db(0x412)+_0xa03b3d[_0x10a4db(0x26e)]);}}async[a0_0x27119e(0x23e)](_0x42a87b){const _0x37fa1d=a0_0x27119e;let _0x24c1ed=this['instance'][_0x37fa1d(0x106)];try{let _0x3d0b1b=await ie[_0x37fa1d(0x40a)](_0x24c1ed);_0x3d0b1b||(_0x3d0b1b=new ie({'_id':_0x24c1ed}),await _0x3d0b1b[_0x37fa1d(0x601)]());let _0x12b1f8=_0x42a87b[_0x37fa1d(0x303)]?_0x3d0b1b[_0x37fa1d(0x2fc)][_0x37fa1d(0x3a2)](_0x53c1fa=>_0x53c1fa[_0x37fa1d(0x303)]===_0x42a87b['_id']):-0x1;if(_0x42a87b[_0x37fa1d(0x2d3)]&&_0x12b1f8>-0x1)_0x3d0b1b[_0x37fa1d(0x2fc)][_0x37fa1d(0x37b)](_0x12b1f8,0x1);else{if(_0x12b1f8>-0x1){let _0x389ce2=_0x3d0b1b[_0x37fa1d(0x2fc)][_0x12b1f8];_0x42a87b[_0x37fa1d(0x20f)]&&(_0x389ce2[_0x37fa1d(0x20f)]=_0x42a87b['fone']),_0x42a87b[_0x37fa1d(0x3c5)]&&(_0x389ce2['name']=_0x42a87b['name']),_0x42a87b[_0x37fa1d(0x5c3)]&&(_0x389ce2[_0x37fa1d(0x5c3)]=_0x42a87b[_0x37fa1d(0x5c3)]),_0x42a87b[_0x37fa1d(0x322)]&&(_0x389ce2[_0x37fa1d(0x322)]=_0x42a87b[_0x37fa1d(0x322)]);}else _0x3d0b1b['agents'][_0x37fa1d(0x461)]({'_id':_0x42a87b['_id']||new be[(_0x37fa1d(0x2c9))][(_0x37fa1d(0x15f))][(_0x37fa1d(0x288))]()[_0x37fa1d(0x3cb)](),'fone':_0x42a87b[_0x37fa1d(0x20f)],'name':_0x42a87b[_0x37fa1d(0x3c5)],'email':_0x42a87b['email'],'role':_0x42a87b[_0x37fa1d(0x322)]});}let _0xdda93e=await _0x3d0b1b[_0x37fa1d(0x601)]();return this['AutomateSystem']=_0xdda93e,this[_0x37fa1d(0x6cb)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x37fa1d(0x28f)),this[_0x37fa1d(0x6cb)][_0x37fa1d(0x234)](this['instanceName']+'\x20('+this[_0x37fa1d(0x333)]['wuid']+_0x37fa1d(0x611)+this['AutomateSystem']),_0xdda93e;}catch(_0x54931a){throw this[_0x37fa1d(0x6cb)][_0x37fa1d(0x258)](this['instanceName']+'\x20('+this[_0x37fa1d(0x333)][_0x37fa1d(0x106)]+_0x37fa1d(0x185)+_0x54931a),new g(_0x37fa1d(0x4e3)+_0x54931a['message']);}}async[a0_0x27119e(0x373)](_0x10e972){const _0xeae2ce=a0_0x27119e;let _0x4fcbf1=this[_0xeae2ce(0x333)]['wuid'];try{let _0x2ff831=await ie[_0xeae2ce(0x40a)](_0x4fcbf1);_0x2ff831||(_0x2ff831=new ie({'_id':_0x4fcbf1}),await _0x2ff831[_0xeae2ce(0x601)]());let _0x93e5d2=_0x10e972[_0xeae2ce(0x303)]?_0x2ff831[_0xeae2ce(0x496)][_0xeae2ce(0x3a2)](_0x37a60c=>_0x37a60c[_0xeae2ce(0x303)]===_0x10e972[_0xeae2ce(0x303)]):-0x1,_0x96bad5=!0x1,_0x45b63c=_0x2ff831['customFields'][_0xeae2ce(0x1ef)](_0x46b2ea=>_0x46b2ea[_0xeae2ce(0x69f)]===_0x10e972['order']);if(_0x10e972[_0xeae2ce(0x2d3)]&&_0x93e5d2>-0x1)_0x2ff831[_0xeae2ce(0x496)][_0xeae2ce(0x37b)](_0x93e5d2,0x1),_0x96bad5=!0x0;else{if(_0x93e5d2>-0x1){if(_0x2ff831[_0xeae2ce(0x496)][_0xeae2ce(0x1ef)](_0x5dbdd9=>_0x5dbdd9[_0xeae2ce(0x3c5)]===_0x10e972[_0xeae2ce(0x3c5)]&&_0x5dbdd9[_0xeae2ce(0x303)]!==_0x10e972[_0xeae2ce(0x303)]))throw new Error(_0xeae2ce(0x67f));let _0x56a96f=_0x2ff831[_0xeae2ce(0x496)][_0x93e5d2];_0x10e972[_0xeae2ce(0x69f)]&&(_0x45b63c||!Number[_0xeae2ce(0x344)](_0x10e972[_0xeae2ce(0x69f)]))&&(_0x56a96f[_0xeae2ce(0x69f)]=_0x10e972[_0xeae2ce(0x69f)],_0x96bad5=!0x0),_0x10e972['name']&&(_0x56a96f[_0xeae2ce(0x3c5)]=_0x10e972[_0xeae2ce(0x3c5)]);}else{if(_0x2ff831[_0xeae2ce(0x496)]['some'](_0x251a29=>_0x251a29['name']===_0x10e972[_0xeae2ce(0x3c5)]&&_0x251a29[_0xeae2ce(0x303)]!==_0x10e972[_0xeae2ce(0x303)]))throw new Error(_0xeae2ce(0x67f));_0x2ff831[_0xeae2ce(0x496)][_0xeae2ce(0x461)]({'_id':_0x10e972['_id']||new be[(_0xeae2ce(0x2c9))][(_0xeae2ce(0x15f))][(_0xeae2ce(0x288))]()['toString'](),'order':_0x10e972[_0xeae2ce(0x69f)],'name':_0x10e972[_0xeae2ce(0x3c5)]}),_0x96bad5=!0x0;}}if(_0x96bad5){_0x2ff831['customFields'][_0xeae2ce(0x3e3)]((_0x130838,_0x4b61c3)=>_0x130838[_0xeae2ce(0x69f)]>_0x4b61c3[_0xeae2ce(0x69f)]?0x1:_0x4b61c3[_0xeae2ce(0x69f)]>_0x130838[_0xeae2ce(0x69f)]?-0x1:0x0);for(let _0x4f60b9=0x0;_0x4f60b9<_0x2ff831[_0xeae2ce(0x496)]['length'];_0x4f60b9++)_0x2ff831[_0xeae2ce(0x496)][_0x4f60b9]['order']=_0x4f60b9+0x1;}let _0x160ca6=await _0x2ff831[_0xeae2ce(0x601)]();return this[_0xeae2ce(0x534)]=_0x160ca6,this[_0xeae2ce(0x6cb)][_0xeae2ce(0x234)](this[_0xeae2ce(0x492)]+'\x20('+this[_0xeae2ce(0x333)][_0xeae2ce(0x106)]+_0xeae2ce(0x6b4)),this[_0xeae2ce(0x6cb)][_0xeae2ce(0x234)](this['instanceName']+'\x20('+this['instance'][_0xeae2ce(0x106)]+_0xeae2ce(0x611)+this[_0xeae2ce(0x534)]),_0x160ca6;}catch(_0x16012f){throw this[_0xeae2ce(0x6cb)][_0xeae2ce(0x258)](this[_0xeae2ce(0x492)]+'\x20('+this['instance'][_0xeae2ce(0x106)]+'):\x20Erro\x20ao\x20tentar\x20updateCustomFields:\x20'+_0x16012f),new g(_0xeae2ce(0x340)+_0x16012f['message']);}}async[a0_0x27119e(0x175)](_0x2ae678){const _0x4263a0=a0_0x27119e;let _0x93bf41=this[_0x4263a0(0x333)][_0x4263a0(0x106)];try{let _0x39837c=await ie[_0x4263a0(0x40a)](_0x93bf41);_0x39837c||(_0x39837c=new ie({'_id':_0x93bf41}),await _0x39837c[_0x4263a0(0x601)]()),_0x39837c[_0x4263a0(0x3ba)][_0x4263a0(0x3b1)]=_0x2ae678?.[_0x4263a0(0x3b1)]!==void 0x0?_0x2ae678?.[_0x4263a0(0x3b1)]:_0x39837c[_0x4263a0(0x3ba)][_0x4263a0(0x3b1)],_0x39837c[_0x4263a0(0x3ba)]['ignoreGroups']=_0x2ae678?.[_0x4263a0(0x518)]!==void 0x0?_0x2ae678?.[_0x4263a0(0x518)]:_0x39837c[_0x4263a0(0x3ba)][_0x4263a0(0x518)],_0x39837c[_0x4263a0(0x3ba)][_0x4263a0(0x331)]=_0x2ae678?.[_0x4263a0(0x331)]??_0x39837c[_0x4263a0(0x3ba)]['prefixCommand'],_0x39837c[_0x4263a0(0x3ba)][_0x4263a0(0x109)]=_0x2ae678?.[_0x4263a0(0x109)]??_0x39837c[_0x4263a0(0x3ba)][_0x4263a0(0x109)],_0x39837c['flowConfig']['stopMinutes']=_0x2ae678?.[_0x4263a0(0x5be)]??_0x39837c[_0x4263a0(0x3ba)][_0x4263a0(0x5be)];let _0x15155a=await _0x39837c[_0x4263a0(0x601)]();return this[_0x4263a0(0x534)]=_0x15155a,this['logger'][_0x4263a0(0x234)](this[_0x4263a0(0x492)]+'\x20('+this[_0x4263a0(0x333)]['wuid']+_0x4263a0(0x28f)),this['logger']['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4263a0(0x611)+this[_0x4263a0(0x534)]),_0x15155a;}catch(_0x5d2d4f){throw this[_0x4263a0(0x6cb)][_0x4263a0(0x258)](this[_0x4263a0(0x492)]+'\x20('+this[_0x4263a0(0x333)][_0x4263a0(0x106)]+'):\x20Erro\x20ao\x20editar\x20agentes:\x20'+_0x5d2d4f),new g('Erro\x20ao\x20editar\x20agentes:\x20'+_0x5d2d4f['message']);}}async['getAutomateSystem'](){const _0x39a0d1=a0_0x27119e;let _0x311ac9=this[_0x39a0d1(0x333)]['wuid'];try{let _0x5eb8f0=await ie['findById'](_0x311ac9);return _0x5eb8f0||(_0x5eb8f0=new ie({'_id':_0x311ac9})),_0x5eb8f0[_0x39a0d1(0x3ba)]=_0x5eb8f0['flowConfig']||{},_0x5eb8f0[_0x39a0d1(0x3ba)]['enabled']===void 0x0&&(_0x5eb8f0['flowConfig']['enabled']=!0x1),_0x5eb8f0['flowConfig'][_0x39a0d1(0x518)]===void 0x0&&(_0x5eb8f0[_0x39a0d1(0x3ba)][_0x39a0d1(0x518)]=!0x0),_0x5eb8f0[_0x39a0d1(0x3ba)][_0x39a0d1(0x331)]===void 0x0&&(_0x5eb8f0[_0x39a0d1(0x3ba)][_0x39a0d1(0x331)]='!'),_0x5eb8f0[_0x39a0d1(0x3ba)][_0x39a0d1(0x109)]===void 0x0&&(_0x5eb8f0[_0x39a0d1(0x3ba)][_0x39a0d1(0x109)]=_0x39a0d1(0x490)),_0x5eb8f0['flowConfig'][_0x39a0d1(0x5be)]===void 0x0&&(_0x5eb8f0['flowConfig'][_0x39a0d1(0x5be)]=0x14),await _0x5eb8f0[_0x39a0d1(0x601)](),this[_0x39a0d1(0x534)]=_0x5eb8f0,this[_0x39a0d1(0x6cb)][_0x39a0d1(0x234)](this[_0x39a0d1(0x492)]+'\x20('+this['instance'][_0x39a0d1(0x106)]+_0x39a0d1(0x12c)),this[_0x39a0d1(0x6cb)][_0x39a0d1(0x234)](this[_0x39a0d1(0x534)]),_0x5eb8f0;}catch(_0x1d3a00){throw this['logger']['error'](this[_0x39a0d1(0x492)]+'\x20('+this[_0x39a0d1(0x333)][_0x39a0d1(0x106)]+_0x39a0d1(0x667)+_0x1d3a00[_0x39a0d1(0x26e)]),new g('Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20'+_0x1d3a00[_0x39a0d1(0x26e)]);}}async['scheduleNextCheck'](){const _0x58daf9=a0_0x27119e;let _0x2fae5a=()=>{const _0x359d88=a0_0x2b59;this['logger']['verbose'](this[_0x359d88(0x492)]+'\x20('+this[_0x359d88(0x333)][_0x359d88(0x106)]+_0x359d88(0x356)+this[_0x359d88(0x58b)]+'\x20saindo\x20da\x20função');},_0x13e8e3=async()=>{const _0x14ef93=a0_0x2b59;this[_0x14ef93(0x6cb)][_0x14ef93(0x234)](this[_0x14ef93(0x492)]+'\x20('+this[_0x14ef93(0x333)][_0x14ef93(0x106)]+'):\x20Procurando\x20mensagens\x20para\x20envio');let _0xb417e3=Date[_0x14ef93(0x541)]()-0xc*0x3c*0x3c*0x3e8;return await U[_0x14ef93(0x36e)]({'owner':this[_0x14ef93(0x333)][_0x14ef93(0x106)],'status':{'$in':[_0x14ef93(0x6b9),'sending']},'$or':[{'when':{'$lte':Date['now'](),'$gte':_0xb417e3}},{'when':0x0}]});},_0x4424f0=async _0x4b2f85=>{const _0x251025=a0_0x2b59;for(let _0x5482b8 of _0x4b2f85){if(!await U['findOneAndUpdate']({'_id':_0x5482b8['_id'],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x251025(0x541)]()-0x1770}}]},{'$set':{'startSend':Date[_0x251025(0x541)]()}}))return;if(!this['isConnected']){this[_0x251025(0x6cb)][_0x251025(0x234)](this[_0x251025(0x492)]+'\x20('+this[_0x251025(0x333)][_0x251025(0x106)]+_0x251025(0x3e6));break;}(!_0x5482b8[_0x251025(0x419)]||_0x5482b8[_0x251025(0x419)][_0x251025(0x57f)]===0x0)&&(_0x5482b8=await U[_0x251025(0x22a)](_0x5482b8[_0x251025(0x303)],{'$set':{'status':_0x251025(0x4e6),'remoteJidsRemaining':[..._0x5482b8[_0x251025(0x42c)]]}},{'new':!0x0}));for(let _0xcc42b of _0x5482b8[_0x251025(0x419)]){if(this['lastSend']=Date[_0x251025(0x541)](),_0x5482b8[_0x251025(0x5c1)][_0x251025(0x1ef)](_0x56a595=>_0x56a595[_0x251025(0x3f7)]===_0xcc42b)){this[_0x251025(0x6cb)][_0x251025(0x234)](this[_0x251025(0x492)]+'\x20('+this['instance']['wuid']+'):\x20Mensagem\x20já\x20enviada\x20para\x20'+_0xcc42b+_0x251025(0x517));continue;}try{let _0x4c167d=await this[_0x251025(0x37e)](_0xcc42b,_0x5482b8),_0x48bf1e={'remoteJid':_0xcc42b,'error':_0x4c167d['error'],'id':_0x4c167d['id']||null,'error_log':_0x4c167d['error_log']||null,'log_timestamp':Date[_0x251025(0x541)]()};if((await U[_0x251025(0x22a)](_0x5482b8[_0x251025(0x303)],{'$push':{'messagesSend':_0x48bf1e},'$pull':{'remoteJidsRemaining':_0xcc42b}},{'new':!0x0}))['status']==='stopped'){this[_0x251025(0x6cb)][_0x251025(0x234)](this[_0x251025(0x492)]+'\x20('+this['instance'][_0x251025(0x106)]+_0x251025(0x308)+_0x5482b8[_0x251025(0x303)]+_0x251025(0x6c9));break;}if(!this[_0x251025(0x2bf)]){this[_0x251025(0x6cb)][_0x251025(0x234)](this[_0x251025(0x492)]+'\x20('+this[_0x251025(0x333)][_0x251025(0x106)]+'):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.');break;}if(!this[_0x251025(0x58b)]){this[_0x251025(0x6cb)][_0x251025(0x234)](this['instanceName']+'\x20('+this[_0x251025(0x333)]['wuid']+_0x251025(0x308)+_0x5482b8[_0x251025(0x303)]+_0x251025(0x584));break;}let _0x4ba8bc=this[_0x251025(0x3f8)](_0x5482b8[_0x251025(0x5b7)],_0x5482b8[_0x251025(0x688)]);await this[_0x251025(0x4f5)](_0x4ba8bc);}catch(_0xa5aaa7){this['logger'][_0x251025(0x258)](this[_0x251025(0x492)]+'\x20('+this[_0x251025(0x333)][_0x251025(0x106)]+_0x251025(0x583)+_0xcc42b+':\x20'+_0xa5aaa7[_0x251025(0x26e)]);let _0xd4bb17={'remoteJid':_0xcc42b,'status':_0x251025(0x258),'timestamp':Date[_0x251025(0x541)](),'error':_0xa5aaa7[_0x251025(0x26e)]};await U['findByIdAndUpdate'](_0x5482b8[_0x251025(0x303)],{'$push':{'messagesSend':_0xd4bb17},'$pull':{'remoteJidsRemaining':_0xcc42b}},{'new':!0x0});}}let _0x25ae3b=await U[_0x251025(0x40a)](_0x5482b8['_id']);_0x25ae3b[_0x251025(0x419)]['length']===0x0&&_0x25ae3b[_0x251025(0x49d)]!==_0x251025(0x218)&&await U['findByIdAndUpdate'](_0x5482b8['_id'],{'$set':{'status':_0x251025(0x2e2)}},{'new':!0x0}),await new Promise(_0x59fc39=>setTimeout(_0x59fc39,0x1388));}},_0x46aa8d=async()=>{const _0x135aa9=a0_0x2b59;let _0x75432=await U['findOne']({'owner':this['instance'][_0x135aa9(0x106)],'status':_0x135aa9(0x6b9),'when':{'$gt':Date[_0x135aa9(0x541)]()}})[_0x135aa9(0x3e3)]({'when':0x1});_0x75432&&_0x75432['when']-Date['now']()<=0x5265c00?this['delayMessage']=_0x75432[_0x135aa9(0x391)]-Date[_0x135aa9(0x541)]():this[_0x135aa9(0x2c5)]=(0x3c+Math[_0x135aa9(0x572)](Math[_0x135aa9(0x3b6)]()*0x3c))*0x3c*0x3e8,this[_0x135aa9(0x2c5)]=Math[_0x135aa9(0x43d)](this[_0x135aa9(0x2c5)],0x7d0);let _0x1a65ce=Math[_0x135aa9(0x190)](this[_0x135aa9(0x2c5)]/0xea60);if(_0x75432){let _0x10eff5=new Date(_0x75432[_0x135aa9(0x391)])[_0x135aa9(0x17d)]();this['logger'][_0x135aa9(0x234)](this[_0x135aa9(0x492)]+'\x20('+this[_0x135aa9(0x333)][_0x135aa9(0x106)]+_0x135aa9(0x268)+_0x10eff5+_0x135aa9(0x538)+_0x1a65ce+_0x135aa9(0x2cd));}else this[_0x135aa9(0x6cb)][_0x135aa9(0x234)](this['instanceName']+'\x20('+this['instance'][_0x135aa9(0x106)]+'):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20'+_0x1a65ce+_0x135aa9(0x2cd));setTimeout(()=>this['scheduleNextCheck'](),this['delayMessage']);};if(this[_0x58daf9(0x58b)]&&Date[_0x58daf9(0x541)]()-this[_0x58daf9(0x16d)]<0x1d4c0){_0x2fae5a();return;}try{let _0x26d429=await _0x13e8e3();_0x26d429[_0x58daf9(0x57f)]===0x0?this[_0x58daf9(0x6cb)][_0x58daf9(0x234)](this[_0x58daf9(0x492)]+'\x20('+this[_0x58daf9(0x333)][_0x58daf9(0x106)]+_0x58daf9(0x4a8)):(this['processingScheduleMessageId']=_0x26d429[0x0][_0x58daf9(0x303)],await _0x4424f0(_0x26d429)),await _0x46aa8d(),this['processingScheduleMessageId']=null;}catch(_0x46904c){this[_0x58daf9(0x6cb)][_0x58daf9(0x258)]('Error\x20in\x20scheduleNextCheck:\x20'+_0x46904c['message']);}}[a0_0x27119e(0x3f8)](_0x5d25db,_0x4b510b){const _0x50edfe=a0_0x27119e;return _0x5d25db=Math[_0x50edfe(0x43d)](0.5,_0x5d25db),_0x4b510b=Math[_0x50edfe(0x43d)](0x3,_0x4b510b),Math[_0x50edfe(0x572)](Math[_0x50edfe(0x3b6)]()*(_0x4b510b-_0x5d25db+0x1)+_0x5d25db)*0x3e8;}[a0_0x27119e(0x4f5)](_0x544471){return new Promise(_0x1d8af4=>setTimeout(_0x1d8af4,_0x544471));}async[a0_0x27119e(0x1f9)](_0x30ae70){const _0x3097bd=a0_0x27119e;if(!this[_0x3097bd(0x534)]&&(await this[_0x3097bd(0x402)](),!this['AutomateSystem']))return null;_0x30ae70=this[_0x3097bd(0x4d4)](_0x30ae70);let _0x4335df=await D[_0x3097bd(0x27b)]({'id':_0x30ae70,'owner':this[_0x3097bd(0x333)][_0x3097bd(0x106)]}),_0x257a4b={};if(_0x4335df&&_0x4335df[_0x3097bd(0x226)]){let _0xf24eb=_0x4335df[_0x3097bd(0x226)];typeof _0xf24eb['nome']=='string'&&(_0x257a4b[_0x3097bd(0x378)]=_0xf24eb[_0x3097bd(0x378)]),typeof _0xf24eb[_0x3097bd(0x444)]=='string'&&(_0x257a4b[_0x3097bd(0x444)]=_0xf24eb[_0x3097bd(0x444)]),typeof _0xf24eb['email']==_0x3097bd(0x2af)&&(_0x257a4b['email']=_0xf24eb['email']),typeof _0xf24eb[_0x3097bd(0x63a)]==_0x3097bd(0x2af)&&(_0x257a4b['cpf']=_0xf24eb[_0x3097bd(0x63a)]),typeof _0xf24eb[_0x3097bd(0x49d)]==_0x3097bd(0x2af)&&(_0x257a4b[_0x3097bd(0x49d)]=_0xf24eb[_0x3097bd(0x49d)]),typeof _0xf24eb[_0x3097bd(0xf5)]==_0x3097bd(0x2af)&&(_0x257a4b[_0x3097bd(0xf5)]=_0xf24eb[_0x3097bd(0xf5)]),typeof _0xf24eb[_0x3097bd(0x442)]==_0x3097bd(0x2af)&&(_0x257a4b[_0x3097bd(0x442)]=_0xf24eb['responsavelid']),Array[_0x3097bd(0x5f5)](_0xf24eb[_0x3097bd(0x69d)])&&(_0x257a4b[_0x3097bd(0x69d)]=_0xf24eb[_0x3097bd(0x69d)]['join'](',\x20'));}return _0x4335df&&_0x4335df['leadInfo']&&_0x4335df['leadInfo'][_0x3097bd(0x496)]&&_0x4335df['leadInfo']['customFields'][_0x3097bd(0xfc)](_0x5aa347=>{const _0x1aaef6=_0x3097bd;let _0x2206b2=this[_0x1aaef6(0x534)]?.['customFields'][_0x1aaef6(0x36e)](_0x237e75=>_0x237e75[_0x1aaef6(0x303)]===_0x5aa347[_0x1aaef6(0x303)]);_0x2206b2&&(_0x257a4b[_0x2206b2[_0x1aaef6(0x3c5)]]=_0x5aa347[_0x1aaef6(0x55f)]);}),_0x257a4b;}async[a0_0x27119e(0x5da)](_0x28b3a2,_0x5fae25){const _0x3ba04e=a0_0x27119e;let _0x3d7ce5=await this[_0x3ba04e(0x1f9)](_0x5fae25);return this[_0x3ba04e(0x661)](_0x28b3a2,_0x3d7ce5);}async['editScheduleMessage'](_0x7f23e8){const _0x3e325d=a0_0x27119e;try{if(this[_0x3e325d(0x6cb)][_0x3e325d(0x234)](this[_0x3e325d(0x492)]+'\x20('+this[_0x3e325d(0x333)][_0x3e325d(0x106)]+_0x3e325d(0x430)),_0x7f23e8[_0x3e325d(0x2d3)]&&_0x7f23e8[_0x3e325d(0x303)]){if(this[_0x3e325d(0x58b)]===_0x7f23e8[_0x3e325d(0x303)][_0x3e325d(0x3cb)]())throw new Error('Não\x20é\x20possível\x20excluir\x20uma\x20mensagem\x20que\x20está\x20atualmente\x20em\x20processamento.\x20Pause\x20primeiro\x20e\x20espere\x20em\x20torno\x20de\x2020\x20segundos\x20para\x20deletar');let _0x4f4bee=await U['findByIdAndDelete'](_0x7f23e8[_0x3e325d(0x303)]);return setTimeout(()=>this[_0x3e325d(0x426)](),0x7d0),_0x4f4bee;}let _0x1e8754;if(_0x7f23e8[_0x3e325d(0x303)]&&(_0x1e8754=await U['findOne']({'owner':this['instance'][_0x3e325d(0x106)],'_id':_0x7f23e8[_0x3e325d(0x303)]})),_0x1e8754){let _0x51c55f=_0x7f23e8;this[_0x3e325d(0x58b)]===_0x1e8754[_0x3e325d(0x303)][_0x3e325d(0x3cb)]()&&(_0x51c55f={'status':_0x7f23e8['status'],'_id':_0x7f23e8[_0x3e325d(0x303)]});let _0xd49e03=await U[_0x3e325d(0x22a)](_0x1e8754[_0x3e325d(0x303)],{'$set':_0x51c55f},{'new':!0x0});return setTimeout(()=>this[_0x3e325d(0x426)](),0x7d0),_0xd49e03;}else{_0x7f23e8[_0x3e325d(0x1a7)]=this['instance'][_0x3e325d(0x106)];let _0x4e0fd2=await new U(_0x7f23e8)[_0x3e325d(0x601)]();return setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x4e0fd2;}}catch(_0x11866b){throw this[_0x3e325d(0x6cb)][_0x3e325d(0x258)](this[_0x3e325d(0x492)]+'\x20('+this[_0x3e325d(0x333)][_0x3e325d(0x106)]+'):\x20Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20schedule\x20message:\x20'+_0x11866b),new g(_0x3e325d(0x35e)+_0x11866b['message']);}}async['getScheduleMessage'](){const _0x1ce6df=a0_0x27119e;try{return await U[_0x1ce6df(0x36e)]({'owner':this[_0x1ce6df(0x333)]['wuid']})[_0x1ce6df(0x3e3)]({'when':0x1});}catch(_0x14b916){throw this[_0x1ce6df(0x6cb)][_0x1ce6df(0x258)](this[_0x1ce6df(0x492)]+'\x20('+this[_0x1ce6df(0x333)][_0x1ce6df(0x106)]+'):\x20Erro\x20ao\x20buscar\x20Schedule\x20Messages:'+_0x14b916),new g(_0x1ce6df(0x35e)+_0x14b916[_0x1ce6df(0x26e)]);}}async[a0_0x27119e(0x330)](){const _0x1cb1c4=a0_0x27119e;try{return await U[_0x1cb1c4(0x6c5)]({'owner':this[_0x1cb1c4(0x333)][_0x1cb1c4(0x106)],'status':'done'}),this[_0x1cb1c4(0x6cb)][_0x1cb1c4(0x234)](this['instanceName']+'\x20('+this['instance'][_0x1cb1c4(0x106)]+_0x1cb1c4(0x3bc)),this[_0x1cb1c4(0x4d9)]();}catch(_0x3b974e){throw this['logger'][_0x1cb1c4(0x258)](this[_0x1cb1c4(0x492)]+'\x20('+this[_0x1cb1c4(0x333)]['wuid']+_0x1cb1c4(0x3f2)+_0x3b974e),new g(_0x1cb1c4(0x35e)+_0x3b974e[_0x1cb1c4(0x26e)]);}}async[a0_0x27119e(0x37e)](_0x23a4a5,_0x590095){const _0x124e16=a0_0x27119e;try{switch(_0x590095[_0x124e16(0x10c)]){case _0x124e16(0x51e):return await this[_0x124e16(0x62e)](_0x590095,_0x23a4a5);case _0x124e16(0x4f7):return await this[_0x124e16(0x31d)](_0x590095,_0x23a4a5);case _0x124e16(0x4ef):return await this[_0x124e16(0x5f8)](_0x590095,_0x23a4a5);default:return this[_0x124e16(0x6cb)]['error'](this[_0x124e16(0x492)]+'\x20('+this[_0x124e16(0x333)][_0x124e16(0x106)]+_0x124e16(0x59b)+_0x590095[_0x124e16(0x10c)]),{'status':'error','detail':_0x124e16(0xf3)};}}catch(_0x2d6d61){return this[_0x124e16(0x6cb)]['error'](this['instanceName']+'\x20('+this[_0x124e16(0x333)]['wuid']+_0x124e16(0x34e)+_0x2d6d61),{'status':_0x124e16(0x258),'detail':_0x2d6d61[_0x124e16(0x26e)]};}}['getRandomText'](_0x1b7086){const _0xbe84ce=a0_0x27119e;let _0x3c0f88=_0x1b7086[_0xbe84ce(0x29e)]('|'),_0x433194=Math[_0xbe84ce(0x572)](Math[_0xbe84ce(0x3b6)]()*_0x3c0f88[_0xbe84ce(0x57f)]);return _0x3c0f88[_0x433194][_0xbe84ce(0x294)]();}async[a0_0x27119e(0x62e)](_0x290cde,_0x355c14){const _0x3974c8=a0_0x27119e;if(this['logger']['verbose'](this[_0x3974c8(0x492)]+'\x20('+this[_0x3974c8(0x333)][_0x3974c8(0x106)]+_0x3974c8(0x59e)),!_0x290cde['message'][_0x3974c8(0x51e)]||_0x290cde[_0x3974c8(0x26e)]['text'][_0x3974c8(0x57f)]===0x0)return{'error':!0x0,'error_log':'sem\x20texto\x20na\x20mensagem'};let _0x1e1027=this[_0x3974c8(0x195)](_0x290cde['message'][_0x3974c8(0x51e)]),_0x3dd3a0=await this[_0x3974c8(0x5da)](_0x1e1027,_0x355c14),_0x41d64b={'number':_0x355c14,'options':{'delay':_0x290cde[_0x3974c8(0x26e)][_0x3974c8(0x676)]},'textMessage':{'text':_0x3dd3a0}},_0x48405b=null;try{let _0x541781=await this[_0x3974c8(0x453)](_0x41d64b);if(_0x541781&&_0x541781[_0x3974c8(0x49d)])return{'error':!0x1,'id':_0x541781[_0x3974c8(0x4dc)]['id']};_0x48405b=JSON[_0x3974c8(0x5f2)](_0x541781),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x3974c8(0x333)][_0x3974c8(0x106)]+_0x3974c8(0x611)+_0x48405b);}catch(_0x5f945e){this[_0x3974c8(0x6cb)][_0x3974c8(0x258)](this[_0x3974c8(0x492)]+'\x20('+this[_0x3974c8(0x333)][_0x3974c8(0x106)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:'+_0x5f945e),_0x48405b=_0x5f945e[_0x3974c8(0x26e)];}if(_0x48405b)return{'error':!0x0,'error_log':(typeof _0x48405b==_0x3974c8(0x5f1)?JSON[_0x3974c8(0x5f2)](_0x48405b,null,0x2):_0x48405b)[_0x3974c8(0x363)](/[\[\]{}\n]/g,'\x20')[_0x3974c8(0x363)](/  +/g,'\x20')};}async[a0_0x27119e(0x31d)](_0x1e3a3c,_0x2216ec){const _0xd8c82f=a0_0x27119e;this[_0xd8c82f(0x6cb)][_0xd8c82f(0x234)](this['instanceName']+'\x20('+this['instance'][_0xd8c82f(0x106)]+'):\x20Enviando\x20mídia');let _0x1c1663;if(_0x1e3a3c[_0xd8c82f(0x26e)][_0xd8c82f(0x51e)]&&_0x1e3a3c[_0xd8c82f(0x26e)][_0xd8c82f(0x51e)][_0xd8c82f(0x57f)]>0x0){let _0x472dbb=this['getRandomText'](_0x1e3a3c['message'][_0xd8c82f(0x51e)]);_0x1c1663=await this['replaceVariablesChat'](_0x472dbb,_0x2216ec);}let _0x529719={'number':_0x2216ec,'options':{'delay':_0x1e3a3c['message'][_0xd8c82f(0x676)]},'mediaMessage':{'mediatype':_0x1e3a3c[_0xd8c82f(0x26e)][_0xd8c82f(0x4e8)],'caption':_0x1c1663,'media':_0x1e3a3c[_0xd8c82f(0x26e)][_0xd8c82f(0x6c4)]}},_0x599a9b=null;try{let _0x1c1039=await this[_0xd8c82f(0x42e)](_0x529719);if(_0x1c1039&&_0x1c1039[_0xd8c82f(0x49d)])return{'error':!0x1,'id':_0x1c1039[_0xd8c82f(0x4dc)]['id']};_0x599a9b=JSON['stringify'](_0x1c1039),this[_0xd8c82f(0x6cb)][_0xd8c82f(0x234)](this['instanceName']+'\x20('+this[_0xd8c82f(0x333)][_0xd8c82f(0x106)]+_0xd8c82f(0x611)+_0x599a9b);}catch(_0x36b60d){this[_0xd8c82f(0x6cb)][_0xd8c82f(0x258)](this[_0xd8c82f(0x492)]+'\x20('+this[_0xd8c82f(0x333)][_0xd8c82f(0x106)]+_0xd8c82f(0x1dc)+_0x36b60d[_0xd8c82f(0x26e)]),_0x599a9b=_0x36b60d[_0xd8c82f(0x26e)];}if(_0x599a9b)return{'error':!0x0,'error_log':(typeof _0x599a9b==_0xd8c82f(0x5f1)?JSON[_0xd8c82f(0x5f2)](_0x599a9b,null,0x2):_0x599a9b)[_0xd8c82f(0x363)](/[\[\]{}\n]/g,'\x20')[_0xd8c82f(0x363)](/  +/g,'\x20')};}async[a0_0x27119e(0x5f8)](_0x41d2b8,_0x7b6011){const _0x2c7b23=a0_0x27119e;this[_0x2c7b23(0x6cb)]['verbose'](this[_0x2c7b23(0x492)]+'\x20('+this[_0x2c7b23(0x333)][_0x2c7b23(0x106)]+_0x2c7b23(0x135));let _0x4041ea={'number':_0x7b6011,'options':{'delay':_0x41d2b8[_0x2c7b23(0x26e)]['delay']},'audioMessage':{'audio':_0x41d2b8[_0x2c7b23(0x26e)][_0x2c7b23(0x6c4)]}},_0x48222d=null;try{let _0x279717=await this['audioWhatsapp'](_0x4041ea);if(_0x279717&&_0x279717[_0x2c7b23(0x49d)])return{'error':!0x1,'id':_0x279717[_0x2c7b23(0x4dc)]['id']};_0x48222d=JSON['stringify'](_0x279717),this['logger'][_0x2c7b23(0x234)](this[_0x2c7b23(0x492)]+'\x20('+this[_0x2c7b23(0x333)][_0x2c7b23(0x106)]+_0x2c7b23(0x611)+_0x48222d);}catch(_0x2c32ff){this[_0x2c7b23(0x6cb)]['error'](this['instanceName']+'\x20('+this[_0x2c7b23(0x333)][_0x2c7b23(0x106)]+_0x2c7b23(0x675)+_0x2c32ff),_0x48222d=_0x2c32ff['message'];}if(_0x48222d)return{'error':!0x0,'error_log':(typeof _0x48222d=='object'?JSON['stringify'](_0x48222d,null,0x2):_0x48222d)[_0x2c7b23(0x363)](/[\[\]{}\n]/g,'\x20')[_0x2c7b23(0x363)](/  +/g,'\x20')};}},Ee=require(a0_0x27119e(0x342)),jt=class c{constructor(_0xd14a0b,_0x3605c5,_0x46fff2){const _0x523da2=a0_0x27119e;this[_0x523da2(0x64d)]=_0xd14a0b,this['configService']=_0x3605c5,this[_0x523da2(0x28a)]=_0x46fff2,this['db']={},this['redis']={},this[_0x523da2(0x6cb)]=new C(c[_0x523da2(0x3c5)]),this[_0x523da2(0x2b1)]={},(this['removeInstance'](),this['noConnection'](),this['delInstanceFiles'](),Object[_0x523da2(0x2e8)](this['db'],_0x3605c5[_0x523da2(0x201)](_0x523da2(0x4b8))),Object['assign'](this['redis'],_0x3605c5[_0x523da2(0x201)](_0x523da2(0x555))),this[_0x523da2(0x4bb)]=this['db']['ENABLED']?this[_0x523da2(0x28a)][_0x523da2(0x233)]?.['db'](this['db'][_0x523da2(0x1e9)][_0x523da2(0x1bc)]+_0x523da2(0x4d0)):void 0x0,this[_0x523da2(0x5ae)]=this[_0x523da2(0x5a3)][_0x523da2(0x371)]?new ye(this[_0x523da2(0x5a3)]):void 0x0);}[a0_0x27119e(0x436)](_0x2b1f87){const _0x289af3=a0_0x27119e;let _0x3d247b=this['configService'][_0x289af3(0x201)]('DEL_INSTANCE');typeof _0x3d247b==_0x289af3(0x341)&&_0x3d247b>0x0&&setTimeout(()=>{const _0x597d8d=_0x289af3;this['waInstances'][_0x2b1f87]?.[_0x597d8d(0x20a)]?.['state']!==_0x597d8d(0x43f)&&delete this[_0x597d8d(0x2b1)][_0x2b1f87];},0x3e8*0x3c*_0x3d247b);}async['instanceInfo'](_0x28a22f){const _0xed4db5=a0_0x27119e;if(_0x28a22f&&!this['waInstances'][_0x28a22f])throw new x('Instance\x20\x22'+_0x28a22f+_0xed4db5(0x6bd));let _0x5452cf=[];for await(let [_0x39a198,_0x42077e]of Object['entries'](this['waInstances']))if(_0x42077e&&_0x42077e[_0xed4db5(0x20a)][_0xed4db5(0x516)]===_0xed4db5(0x43f)){let _0x16938a=await this[_0xed4db5(0x28a)][_0xed4db5(0x655)][_0xed4db5(0x36e)](_0x39a198);_0x5452cf[_0xed4db5(0x461)]({'instance':{'instanceName':_0x39a198,'apikey':_0x16938a[_0xed4db5(0x25f)],'owner':_0x42077e[_0xed4db5(0x106)],'profileName':await _0x42077e[_0xed4db5(0x126)]()||_0xed4db5(0x1a8),'profilePictureUrl':_0x42077e[_0xed4db5(0x3f3)]}});}return _0x5452cf[_0xed4db5(0x36e)](_0x3b0acb=>_0x3b0acb[_0xed4db5(0x333)][_0xed4db5(0x492)]===_0x28a22f)??_0x5452cf;}[a0_0x27119e(0x5e8)](){setInterval(async()=>{const _0x5038c5=a0_0x2b59;if(this['db'][_0x5038c5(0x371)])(await this[_0x5038c5(0x4bb)][_0x5038c5(0x54f)]())[_0x5038c5(0xfc)](async _0x174414=>{const _0x562197=_0x5038c5;let _0xaf3dc3=_0x174414['namespace'][_0x562197(0x363)](/^[\w-]+./,'');await this[_0x562197(0x4bb)]['collection'](_0xaf3dc3)[_0x562197(0x6c5)]({'$or':[{'_id':{'$regex':/^app.state.*/}},{'_id':{'$regex':/^session-.*/}}]});});else{let _0x54f36c=(0x0,se['opendirSync'])(j,{'encoding':'utf-8'});for await(let _0xca9b44 of _0x54f36c)_0xca9b44[_0x5038c5(0x663)]()&&(0x0,se[_0x5038c5(0x32f)])((0x0,Ee['join'])(j,_0xca9b44[_0x5038c5(0x3c5)]),{'encoding':_0x5038c5(0x14b)})[_0x5038c5(0xfc)](async _0x3caf6c=>{const _0x1480de=_0x5038c5;(_0x3caf6c[_0x1480de(0x5ce)](/^app.state.*/)||_0x3caf6c[_0x1480de(0x5ce)](/^session-.*/))&&(0x0,se[_0x1480de(0x53a)])((0x0,Ee[_0x1480de(0x3eb)])(j,_0xca9b44[_0x1480de(0x3c5)],_0x3caf6c),{'recursive':!0x0,'force':!0x0});});}},0xe10*0x3e8*0x2);}async[a0_0x27119e(0x440)](_0x5b2372){const _0x2ebdc8=a0_0x27119e;this['db'][_0x2ebdc8(0x371)]&&(await this[_0x2ebdc8(0x28a)][_0x2ebdc8(0x233)][_0x2ebdc8(0x125)](),(await this['dbInstance'][_0x2ebdc8(0x54f)]())[_0x2ebdc8(0x57f)]>0x0&&await this[_0x2ebdc8(0x4bb)]['dropCollection'](_0x5b2372)),this['redis']['ENABLED']&&(this[_0x2ebdc8(0x5ae)]['reference']=_0x5b2372,await this[_0x2ebdc8(0x5ae)][_0x2ebdc8(0x5ad)]()),!this['db'][_0x2ebdc8(0x371)]&&!this[_0x2ebdc8(0x5a3)]['ENABLED']&&(0x0,se[_0x2ebdc8(0x53a)])((0x0,Ee[_0x2ebdc8(0x3eb)])(j,_0x5b2372),{'recursive':!0x0,'force':!0x0});}async['loadInstance'](){const _0x56aae3=a0_0x27119e;let _0x160e42=async _0x2f74ea=>{const _0x8f25ee=a0_0x2b59;let _0x83249a=new Se(this['configService'],this['eventEmitter'],this[_0x8f25ee(0x28a)]);_0x83249a[_0x8f25ee(0x492)]=_0x2f74ea,await _0x83249a[_0x8f25ee(0x542)](),this[_0x8f25ee(0x2b1)][_0x2f74ea]=_0x83249a;};try{if(this[_0x56aae3(0x5a3)]['ENABLED']){let _0xe29461=await this[_0x56aae3(0x5ae)][_0x56aae3(0xf1)]();_0xe29461?.[_0x56aae3(0x57f)]>0x0&&_0xe29461[_0x56aae3(0xfc)](async _0x404ca6=>await _0x160e42(_0x404ca6[_0x56aae3(0x29e)](':')[0x1]));}if(this['db'][_0x56aae3(0x371)]){await this['repository'][_0x56aae3(0x233)]['connect']();let _0x5c2c7e=await this[_0x56aae3(0x4bb)]['collections']();_0x5c2c7e[_0x56aae3(0x57f)]>0x0&&_0x5c2c7e[_0x56aae3(0xfc)](async _0x465686=>await _0x160e42(_0x465686[_0x56aae3(0x67c)]['replace'](/^[\w-]+\./,'')));return;}let _0x5cfbc2=(0x0,se['opendirSync'])(j,{'encoding':'utf-8'});for await(let _0x4f9a9d of _0x5cfbc2)if(_0x4f9a9d['isDirectory']()){if((0x0,se['readdirSync'])((0x0,Ee[_0x56aae3(0x3eb)])(j,_0x4f9a9d['name']),{'encoding':'utf-8'})['length']===0x0){(0x0,se['rmSync'])((0x0,Ee[_0x56aae3(0x3eb)])(j,_0x4f9a9d[_0x56aae3(0x3c5)]),{'recursive':!0x0,'force':!0x0});break;}await _0x160e42(_0x4f9a9d[_0x56aae3(0x3c5)]);}}catch(_0x4de6dc){this[_0x56aae3(0x6cb)][_0x56aae3(0x258)](_0x4de6dc);}}[a0_0x27119e(0x5b5)](){this['eventEmitter']['on']('remove.instance',async _0x594587=>{const _0xfae737=a0_0x2b59;try{this[_0xfae737(0x2b1)][_0x594587]=void 0x0;}catch{}try{this[_0xfae737(0x440)](_0x594587);}finally{this[_0xfae737(0x6cb)][_0xfae737(0x5f9)](_0xfae737(0x132)+_0x594587+'\x22\x20-\x20REMOVED');}});}[a0_0x27119e(0x5e7)](){const _0x18a627=a0_0x27119e;this[_0x18a627(0x64d)]['on']('no.connection',async _0x2993c0=>{const _0x584eb1=_0x18a627;try{this[_0x584eb1(0x2b1)][_0x2993c0]=void 0x0,this[_0x584eb1(0x440)](_0x2993c0);}catch(_0x2331a6){this[_0x584eb1(0x6cb)][_0x584eb1(0x258)]({'localError':_0x584eb1(0x5e7),'warn':_0x584eb1(0x254),'error':_0x2331a6});}finally{this[_0x584eb1(0x6cb)][_0x584eb1(0x5f9)](_0x584eb1(0x132)+_0x2993c0+_0x584eb1(0x3d1));}});}},xe=require(a0_0x27119e(0x342)),ve=require('fs'),Bt=class extends B{constructor(_0xd2802,_0x332290){const _0x5f7460=a0_0x27119e;super(_0x332290),this[_0x5f7460(0x5ee)]=_0xd2802,this['configService']=_0x332290;}async['insert'](_0x1d7ea3,_0x13c235=!0x1){const _0x21321b=a0_0x27119e;if(_0x1d7ea3[_0x21321b(0x57f)]!==0x0)try{return this['dbSettings'][_0x21321b(0x371)]&&_0x13c235?{'insertCount':(await this[_0x21321b(0x5ee)][_0x21321b(0x5bf)]([..._0x1d7ea3]))['length']}:(_0x1d7ea3['forEach'](_0x426c4a=>{const _0x499954=_0x21321b;this['writeStore']({'path':(0x0,xe[_0x499954(0x3eb)])(this[_0x499954(0x47c)],'chats',_0x426c4a[_0x499954(0x1a7)]),'fileName':_0x426c4a['id'],'data':_0x426c4a});}),{'insertCount':_0x1d7ea3['length']});}catch(_0x1e4532){return _0x1e4532;}finally{_0x1d7ea3=void 0x0;}}async[a0_0x27119e(0x36e)](_0x5f1103){const _0xc83be4=a0_0x27119e;try{if(this[_0xc83be4(0x19b)][_0xc83be4(0x371)])return await this['chatModel'][_0xc83be4(0x36e)]({'owner':_0x5f1103[_0xc83be4(0x52d)]['owner']})[_0xc83be4(0x3e3)]({'lastmsg':-0x1})['limit'](_0x5f1103?.[_0xc83be4(0x66c)]??0x0)[_0xc83be4(0x5b2)]();let _0x5dec08=[],_0x41d2c=(0x0,ve['opendirSync'])((0x0,xe[_0xc83be4(0x3eb)])(this[_0xc83be4(0x47c)],_0xc83be4(0x65a),_0x5f1103['where'][_0xc83be4(0x1a7)]));for await(let _0xd4ea94 of _0x41d2c)_0xd4ea94[_0xc83be4(0x50d)]()&&_0x5dec08[_0xc83be4(0x461)](JSON['parse']((0x0,ve['readFileSync'])((0x0,xe[_0xc83be4(0x3eb)])(this[_0xc83be4(0x47c)],_0xc83be4(0x65a),_0x5f1103[_0xc83be4(0x52d)][_0xc83be4(0x1a7)],_0xd4ea94[_0xc83be4(0x3c5)]),{'encoding':_0xc83be4(0x14b)})));return _0x5dec08;}catch{return[];}}async['delete'](_0x55918a){const _0x5231ff=a0_0x27119e;try{return this['dbSettings'][_0x5231ff(0x371)]?await this[_0x5231ff(0x5ee)][_0x5231ff(0x6c5)]({..._0x55918a[_0x5231ff(0x52d)]}):((0x0,ve[_0x5231ff(0x53a)])((0x0,xe[_0x5231ff(0x3eb)])(this['storePath'],_0x5231ff(0x65a),_0x55918a[_0x5231ff(0x52d)][_0x5231ff(0x1a7)],_0x55918a[_0x5231ff(0x52d)]['id']+'.josn'),{'force':!0x0,'recursive':!0x0}),{'deleted':{'chatId':_0x55918a[_0x5231ff(0x52d)]['id']}});}catch(_0x1b0d6d){return{'error':_0x1b0d6d?.[_0x5231ff(0x3cb)]()};}}async[a0_0x27119e(0x27b)](_0x461c98){const _0x222b93=a0_0x27119e;try{if(this[_0x222b93(0x19b)][_0x222b93(0x371)])return await this['chatModel'][_0x222b93(0x27b)]({'owner':_0x461c98[_0x222b93(0x52d)]['owner']})[_0x222b93(0x5b2)]();}catch{return null;}}async[a0_0x27119e(0x46a)](_0xbb0efa,_0x3c3418){const _0x2065b3=a0_0x27119e;try{this[_0x2065b3(0x19b)][_0x2065b3(0x371)]&&await this[_0x2065b3(0x5ee)][_0x2065b3(0x57e)]({..._0xbb0efa[_0x2065b3(0x52d)]},{'$set':_0x3c3418});}catch(_0x5982a9){console[_0x2065b3(0x258)](_0x5982a9);}}async['updateMany'](_0x54b1e6,_0x52b141){const _0x2fde55=a0_0x27119e;try{if(this[_0x2fde55(0x19b)][_0x2fde55(0x371)]){let _0x20b3d8=_0x54b1e6[_0x2fde55(0x2c7)]((_0x1b3867,_0x1c45ff)=>({'updateOne':{'filter':{..._0x1b3867[_0x2fde55(0x52d)]},'update':{'$set':_0x52b141[_0x1c45ff]}}}));await this['chatModel'][_0x2fde55(0x3e4)](_0x20b3d8);}}catch(_0x40102d){console[_0x2fde55(0x258)](_0x40102d);}}},Ft=class{constructor(_0x2fc1c8){const _0x23f196=a0_0x27119e;this[_0x23f196(0x616)]=_0x2fc1c8;}async[a0_0x27119e(0x544)]({instanceName:_0x38c948},_0x43ac14){const _0x35cf55=a0_0x27119e;return await this[_0x35cf55(0x616)][_0x35cf55(0x2b1)][_0x38c948]['editChat'](_0x43ac14);}async[a0_0x27119e(0x678)]({instanceName:_0x146824},_0x2f9e79){const _0x49a7cd=a0_0x27119e;return await this[_0x49a7cd(0x616)][_0x49a7cd(0x2b1)][_0x146824]['whatsappNumber'](_0x2f9e79);}async[a0_0x27119e(0x2e9)]({instanceName:_0x45dc4f},_0x5cb4c9){const _0x558e0a=a0_0x27119e;return await this[_0x558e0a(0x616)][_0x558e0a(0x2b1)][_0x45dc4f][_0x558e0a(0x19e)](_0x5cb4c9);}async[a0_0x27119e(0x242)]({instanceName:_0x626546},_0x45e4da){const _0x59dce8=a0_0x27119e;return await this[_0x59dce8(0x616)][_0x59dce8(0x2b1)][_0x626546][_0x59dce8(0x242)](_0x45e4da);}async[a0_0x27119e(0x4c3)]({instanceName:_0x156903},_0xf1fcfd){const _0xe0d3d7=a0_0x27119e;return await this['waMonitor']['waInstances'][_0x156903][_0xe0d3d7(0x4c3)](_0xf1fcfd);}async[a0_0x27119e(0x695)]({instanceName:_0x588049},_0x628b57){const _0x3a7486=a0_0x27119e;return await this['waMonitor'][_0x3a7486(0x2b1)][_0x588049][_0x3a7486(0x160)](_0x628b57[_0x3a7486(0x341)]);}async['fetchProfile']({instanceName:_0x4c8445},_0x3d2700){const _0x35d0cf=a0_0x27119e;return await this['waMonitor'][_0x35d0cf(0x2b1)][_0x4c8445]['fetchProfile'](_0x3d2700[_0x35d0cf(0x341)]);}async[a0_0x27119e(0x1b4)]({instanceName:_0x5aafce},_0x2c12a9){const _0x1e894c=a0_0x27119e;return await this['waMonitor']['waInstances'][_0x5aafce][_0x1e894c(0x1b4)](_0x2c12a9);}async[a0_0x27119e(0x278)]({instanceName:_0x308065},_0xb3d44a){const _0x5c2a04=a0_0x27119e;return await this['waMonitor'][_0x5c2a04(0x2b1)][_0x308065]['fetchContacts'](_0xb3d44a);}async[a0_0x27119e(0x40f)]({instanceName:_0x5c50f4},_0xea6fd7){const _0x1ee9ab=a0_0x27119e;return await this['waMonitor'][_0x1ee9ab(0x2b1)][_0x5c50f4]['getBase64FromMediaMessage'](_0xea6fd7);}async[a0_0x27119e(0x222)]({instanceName:_0x3d1696},_0xfcd292){const _0x28bb79=a0_0x27119e;return await this['waMonitor'][_0x28bb79(0x2b1)][_0x3d1696][_0x28bb79(0x222)](_0xfcd292);}async[a0_0x27119e(0x235)]({instanceName:_0x3a9824},_0x46e1f1){const _0x2f78eb=a0_0x27119e;return await this[_0x2f78eb(0x616)]['waInstances'][_0x3a9824][_0x2f78eb(0x235)](_0x46e1f1);}async[a0_0x27119e(0xfa)]({instanceName:_0x567829}){const _0x42bda6=a0_0x27119e;return await this[_0x42bda6(0x616)][_0x42bda6(0x2b1)][_0x567829][_0x42bda6(0xfa)]();}async[a0_0x27119e(0x104)]({instanceName:_0x270958}){const _0x40698f=a0_0x27119e;return await this[_0x40698f(0x616)][_0x40698f(0x2b1)][_0x270958][_0x40698f(0x104)]();}async[a0_0x27119e(0x46d)]({instanceName:_0x1c3c55},_0x260044){const _0x1905c4=a0_0x27119e;return await this[_0x1905c4(0x616)]['waInstances'][_0x1c3c55][_0x1905c4(0x46d)](_0x260044);}async[a0_0x27119e(0x311)]({instanceName:_0x1c3314},_0xe12a9d){const _0x5ab4be=a0_0x27119e;return await this['waMonitor'][_0x5ab4be(0x2b1)][_0x1c3314][_0x5ab4be(0x311)](_0xe12a9d[_0x5ab4be(0x341)]);}async[a0_0x27119e(0x49f)]({instanceName:_0x2510c4},_0x261cdc){const _0x84ea09=a0_0x27119e;return await this[_0x84ea09(0x616)][_0x84ea09(0x2b1)][_0x2510c4][_0x84ea09(0x49f)](_0x261cdc[_0x84ea09(0x3c5)]);}async[a0_0x27119e(0x607)]({instanceName:_0x269865},_0x2ce4b3){const _0x4c5b5b=a0_0x27119e;return await this[_0x4c5b5b(0x616)]['waInstances'][_0x269865][_0x4c5b5b(0x607)](_0x2ce4b3[_0x4c5b5b(0x49d)]);}async['updateProfilePicture']({instanceName:_0x5b9aaf},_0x286cb3){const _0x20aa24=a0_0x27119e;return await this['waMonitor']['waInstances'][_0x5b9aaf][_0x20aa24(0x166)](_0x286cb3['picture']);}async[a0_0x27119e(0x206)]({instanceName:_0x5bf652},_0x2c862d){const _0x3934e2=a0_0x27119e;return await this[_0x3934e2(0x616)][_0x3934e2(0x2b1)][_0x5bf652][_0x3934e2(0x206)]();}},Ms=require(a0_0x27119e(0x6b3)),Jt=class c{constructor(_0x2f44a5,_0x484bfa,_0x34bc80,_0x1d7adf,_0x1ca95a){const _0x1c281c=a0_0x27119e;this[_0x1c281c(0x616)]=_0x2f44a5,this['configService']=_0x484bfa,this[_0x1c281c(0x28a)]=_0x34bc80,this['eventEmitter']=_0x1d7adf,this[_0x1c281c(0xf8)]=_0x1ca95a,this[_0x1c281c(0x6cb)]=new C(c[_0x1c281c(0x3c5)]);}async['createInstance']({instanceName:_0x1164cd,apikey:_0x55891c}){const _0x4d0551=a0_0x27119e;let _0x926a6b=new Se(this[_0x4d0551(0x593)],this[_0x4d0551(0x64d)],this[_0x4d0551(0x28a)]);_0x926a6b[_0x4d0551(0x492)]=_0x1164cd,this[_0x4d0551(0x616)][_0x4d0551(0x2b1)][_0x926a6b[_0x4d0551(0x492)]]=_0x926a6b,this[_0x4d0551(0x616)][_0x4d0551(0x436)](_0x926a6b[_0x4d0551(0x492)]);let _0x3e5a4e={};_0x55891c?(await this[_0x4d0551(0x28a)][_0x4d0551(0x655)][_0x4d0551(0x447)]({'apikey':_0x55891c},_0x1164cd),_0x3e5a4e['apikey']=_0x55891c):_0x3e5a4e=await this['authService']['generateHash']({'instanceName':_0x926a6b[_0x4d0551(0x492)]});let _0x34022c;return await _0x926a6b['connectToWhatsapp'](),await(0x0,Ms[_0x4d0551(0x676)])(0x7d0),_0x34022c=_0x926a6b[_0x4d0551(0x5c2)],{'instance':{'instanceName':_0x926a6b[_0x4d0551(0x492)],'status':'created'},'hash':_0x3e5a4e,'qrcode':_0x34022c};}async[a0_0x27119e(0x542)]({instanceName:_0x5429ab}){const _0x2f91e1=a0_0x27119e;try{let _0x495760=this['waMonitor'][_0x2f91e1(0x2b1)][_0x5429ab];switch(_0x495760[_0x2f91e1(0x20a)]?.[_0x2f91e1(0x516)]){case _0x2f91e1(0x128):return await _0x495760[_0x2f91e1(0x542)](),await(0x0,Ms[_0x2f91e1(0x676)])(0x7d0),_0x495760[_0x2f91e1(0x5c2)];case _0x2f91e1(0x27d):return _0x495760[_0x2f91e1(0x5c2)];default:return await this[_0x2f91e1(0x4f3)]({'instanceName':_0x5429ab});}}catch(_0x572e3b){this[_0x2f91e1(0x6cb)][_0x2f91e1(0x502)](_0x572e3b);}}async[a0_0x27119e(0x4f3)]({instanceName:_0xaaea39}){const _0x3bb186=a0_0x27119e;let _0x2cbfd2=this[_0x3bb186(0x616)][_0x3bb186(0x2b1)][_0xaaea39][_0x3bb186(0x20a)],_0x3ffc23=null;_0x2cbfd2[_0x3bb186(0x516)]===_0x3bb186(0x43f)&&_0xaaea39&&(_0x3ffc23=await this[_0x3bb186(0x616)]['instanceInfo'](_0xaaea39));let _0x15aaeb=null;return _0x2cbfd2[_0x3bb186(0x516)]===_0x3bb186(0x27d)&&_0xaaea39&&(_0x15aaeb=this[_0x3bb186(0x616)]['waInstances'][_0xaaea39][_0x3bb186(0x5c2)]),{'instance':_0xaaea39,'connectionStatus':_0x2cbfd2,'instanceInfo':_0x3ffc23,'qrcode':_0x15aaeb};}async[a0_0x27119e(0x187)]({instanceName:_0x2a04cc}){const _0x3d30d7=a0_0x27119e;try{return this[_0x3d30d7(0x616)]['waInstances'][_0x2a04cc]?.[_0x3d30d7(0x18c)]?.['ws']?.[_0x3d30d7(0x128)](),{'status':'SUCCESS','error':!0x1,'response':{'message':_0x3d30d7(0x1b3)}};}catch(_0x2fd2f2){this[_0x3d30d7(0x6cb)][_0x3d30d7(0x258)](_0x2fd2f2);}}async[a0_0x27119e(0x129)]({instanceName:_0x344a86}){const _0x476cec=a0_0x27119e;return _0x344a86?this[_0x476cec(0x616)][_0x476cec(0x62a)](_0x344a86):this['waMonitor']['instanceInfo']();}async[a0_0x27119e(0x66d)]({instanceName:_0x33cd87}){const _0x20cf54=a0_0x27119e;try{return await this[_0x20cf54(0x616)]['waInstances'][_0x33cd87]?.[_0x20cf54(0x18c)]?.[_0x20cf54(0x66d)](_0x20cf54(0x24d)+_0x33cd87),{'error':!0x1,'message':_0x20cf54(0x5c0)};}catch(_0x14e715){throw new A(_0x14e715[_0x20cf54(0x3cb)]());}}async['deleteInstance']({instanceName:_0x3fca34}){const _0x1be847=a0_0x27119e;if((await this[_0x1be847(0x4f3)]({'instanceName':_0x3fca34}))[_0x1be847(0x20a)][_0x1be847(0x516)]===_0x1be847(0x43f))throw new g([_0x1be847(0x649),'The\x20instance\x20needs\x20to\x20be\x20disconnected']);try{return delete this[_0x1be847(0x616)]['waInstances'][_0x3fca34],{'error':!0x1,'message':'Instance\x20deleted'};}catch(_0x45f6c4){throw new g(_0x45f6c4[_0x1be847(0x3cb)]());}}async['refreshToken'](_0x3fe1ab,_0x4cdd1c){const _0x110ba5=a0_0x27119e;return await this['authService'][_0x110ba5(0x214)](_0x4cdd1c);}},ae=require('class-validator'),Gt=class{constructor(_0x1c34bf){const _0x41e93b=a0_0x27119e;this[_0x41e93b(0x616)]=_0x1c34bf;}async[a0_0x27119e(0x116)]({instanceName:_0x9fb17f},_0x197cea){const _0x209278=a0_0x27119e;return await this[_0x209278(0x616)][_0x209278(0x2b1)][_0x9fb17f][_0x209278(0x453)](_0x197cea);}async[a0_0x27119e(0x652)]({instanceName:_0x512953},_0x41ee33){const _0x4223a7=a0_0x27119e;if((0x0,ae['isBase64'])(_0x41ee33?.[_0x4223a7(0x42e)]?.['media'])&&!_0x41ee33?.['mediaMessage']?.['fileName'])throw new g(_0x4223a7(0x4b5));if((0x0,ae[_0x4223a7(0x3a5)])(_0x41ee33?.[_0x4223a7(0x42e)]?.[_0x4223a7(0x4f7)])||(0x0,ae[_0x4223a7(0x49a)])(_0x41ee33?.[_0x4223a7(0x42e)]?.['media']))return await this[_0x4223a7(0x616)][_0x4223a7(0x2b1)][_0x512953][_0x4223a7(0x42e)](_0x41ee33);throw new g('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x27119e(0x562)]({instanceName:_0x348ec7},_0x5ccf43){const _0x4619bc=a0_0x27119e;if((0x0,ae['isURL'])(_0x5ccf43['stickerMessage'][_0x4619bc(0x53e)])||(0x0,ae[_0x4619bc(0x49a)])(_0x5ccf43[_0x4619bc(0x435)][_0x4619bc(0x53e)]))return await this[_0x4619bc(0x616)][_0x4619bc(0x2b1)][_0x348ec7][_0x4619bc(0x40d)](_0x5ccf43);throw new g(_0x4619bc(0x513));}async['sendWhatsAppAudio']({instanceName:_0x5c9bc9},_0x49ff4e){const _0x3952d3=a0_0x27119e;if((0x0,ae[_0x3952d3(0x3a5)])(_0x49ff4e[_0x3952d3(0x5e0)][_0x3952d3(0x4ef)])||(0x0,ae[_0x3952d3(0x49a)])(_0x49ff4e[_0x3952d3(0x5e0)][_0x3952d3(0x4ef)]))return await this[_0x3952d3(0x616)]['waInstances'][_0x5c9bc9][_0x3952d3(0x539)](_0x49ff4e);throw new g(_0x3952d3(0x513));}async[a0_0x27119e(0x43c)]({instanceName:_0x21d85d},_0x39e8fe){const _0x6dc5d8=a0_0x27119e;if((0x0,ae[_0x6dc5d8(0x49a)])(_0x39e8fe[_0x6dc5d8(0x462)][_0x6dc5d8(0x42e)]?.[_0x6dc5d8(0x4f7)])&&!_0x39e8fe['buttonMessage']['mediaMessage']?.[_0x6dc5d8(0x2eb)])throw new g(_0x6dc5d8(0x4b5));return await this[_0x6dc5d8(0x616)][_0x6dc5d8(0x2b1)][_0x21d85d][_0x6dc5d8(0x462)](_0x39e8fe);}async[a0_0x27119e(0x134)]({instanceName:_0x279fc8},_0x26999b){const _0x19e256=a0_0x27119e;return await this[_0x19e256(0x616)]['waInstances'][_0x279fc8]['locationMessage'](_0x26999b);}async[a0_0x27119e(0x1f1)]({instanceName:_0x26cb14},_0x4669e3){const _0xd44b56=a0_0x27119e;return await this['waMonitor'][_0xd44b56(0x2b1)][_0x26cb14]['pollMessage'](_0x4669e3);}async[a0_0x27119e(0x326)]({instanceName:_0x20e368},_0xdc9686){const _0x584444=a0_0x27119e;return await this[_0x584444(0x616)][_0x584444(0x2b1)][_0x20e368][_0x584444(0x53c)](_0xdc9686);}async[a0_0x27119e(0x35f)]({instanceName:_0x11c04b},_0x441ada){const _0x50b0ff=a0_0x27119e;return await this['waMonitor'][_0x50b0ff(0x2b1)][_0x11c04b]['contactMessage'](_0x441ada);}async[a0_0x27119e(0x4cc)]({instanceName:_0x29bad1},_0x36b3e1){const _0x2e8600=a0_0x27119e;if(!_0x36b3e1[_0x2e8600(0x650)][_0x2e8600(0x3cf)]['match'](/[^\(\)\w\sà-ú"-\+]+/))throw new g('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this[_0x2e8600(0x616)][_0x2e8600(0x2b1)][_0x29bad1]['reactionMessage'](_0x36b3e1);}async[a0_0x27119e(0x275)]({instanceName:_0x10dad8},_0x2b3704){const _0x2e4e2f=a0_0x27119e;return await this[_0x2e4e2f(0x616)]['waInstances'][_0x10dad8][_0x2e4e2f(0x697)](_0x2b3704);}},qt=class{constructor(_0x4c01e9){const _0x3107d5=a0_0x27119e;this[_0x3107d5(0x616)]=_0x4c01e9;}async[a0_0x27119e(0x2d5)](_0x4fe764,_0x3ea905){const _0x4c7d6a=a0_0x27119e;return await this[_0x4c7d6a(0x616)]['waInstances'][_0x4fe764['instanceName']][_0x4c7d6a(0x2d5)](_0x3ea905);}async[a0_0x27119e(0x66f)](_0x535a91,_0x424857){const _0x80500e=a0_0x27119e;return await this[_0x80500e(0x616)]['waInstances'][_0x535a91[_0x80500e(0x492)]][_0x80500e(0x66f)](_0x424857);}async[a0_0x27119e(0x203)](_0x59bbf1,_0x13916a){const _0x1a7499=a0_0x27119e;return await this[_0x1a7499(0x616)][_0x1a7499(0x2b1)][_0x59bbf1['instanceName']][_0x1a7499(0x203)](_0x13916a);}async[a0_0x27119e(0x29f)](_0x1eed11,_0x3f863e){const _0x58eca0=a0_0x27119e;return await this[_0x58eca0(0x616)]['waInstances'][_0x1eed11['instanceName']][_0x58eca0(0x29f)](_0x3f863e);}async['groupSetting'](_0x2d6a35,_0x38e694){const _0x19bc7f=a0_0x27119e;return await this['waMonitor'][_0x19bc7f(0x2b1)][_0x2d6a35['instanceName']][_0x19bc7f(0x184)](_0x38e694);}async[a0_0x27119e(0x111)](_0x15f1b9,_0x4ff9ce){const _0x50c183=a0_0x27119e;return await this[_0x50c183(0x616)][_0x50c183(0x2b1)][_0x15f1b9['instanceName']]['findGroup'](_0x4ff9ce);}async[a0_0x27119e(0x1c8)](_0xf0c2e6){const _0x4b5076=a0_0x27119e;return await this['waMonitor'][_0x4b5076(0x2b1)][_0xf0c2e6[_0x4b5076(0x492)]][_0x4b5076(0x1c8)]();}async[a0_0x27119e(0x620)](_0x2ce100,_0x307af8){const _0x52ce2a=a0_0x27119e;return await this['waMonitor'][_0x52ce2a(0x2b1)][_0x2ce100['instanceName']]['inviteCode'](_0x307af8);}async['joinGroup'](_0x3b176e,_0x1f1513){const _0x3b36b1=a0_0x27119e;return await this['waMonitor']['waInstances'][_0x3b176e[_0x3b36b1(0x492)]][_0x3b36b1(0x26b)](_0x1f1513);}async[a0_0x27119e(0x4b2)](_0x5253b6,_0x21ef58){const _0x2e7d9b=a0_0x27119e;return await this[_0x2e7d9b(0x616)][_0x2e7d9b(0x2b1)][_0x5253b6['instanceName']][_0x2e7d9b(0x4b2)](_0x21ef58);}async[a0_0x27119e(0x5ea)](_0x37c13b,_0x1d96e9){const _0x53e0d7=a0_0x27119e;return await this[_0x53e0d7(0x616)]['waInstances'][_0x37c13b[_0x53e0d7(0x492)]]['findParticipants'](_0x1d96e9);}async[a0_0x27119e(0x521)](_0x51b99d,_0x5bb32e){const _0x58a67a=a0_0x27119e;return await this[_0x58a67a(0x616)][_0x58a67a(0x2b1)][_0x51b99d[_0x58a67a(0x492)]][_0x58a67a(0x107)](_0x5bb32e);}async[a0_0x27119e(0x108)](_0x59944d,_0x17a3a1){const _0x3e6ab4=a0_0x27119e;return await this[_0x3e6ab4(0x616)]['waInstances'][_0x59944d[_0x3e6ab4(0x492)]][_0x3e6ab4(0x108)](_0x17a3a1);}async['leaveGroup'](_0x1ccfbc,_0x56decb){const _0x1c4eb8=a0_0x27119e;return await this[_0x1c4eb8(0x616)][_0x1c4eb8(0x2b1)][_0x1ccfbc['instanceName']]['leaveGroup'](_0x56decb);}},Wt=class{constructor(_0x2e0556,_0x15277e){const _0x3ae85f=a0_0x27119e;this[_0x3ae85f(0x614)]=_0x2e0556,this[_0x3ae85f(0x593)]=_0x15277e;}async[a0_0x27119e(0x2e1)](_0xd3a378,_0x41d2d3){const _0x45ffbb=a0_0x27119e;try{let _0x4b7a43=_0xd3a378['params'];if(this[_0x45ffbb(0x614)][_0x45ffbb(0x2b1)][_0x4b7a43[_0x45ffbb(0x492)]][_0x45ffbb(0x20a)][_0x45ffbb(0x516)]==='open')throw new g(_0x45ffbb(0x208));let _0x1dd721=this[_0x45ffbb(0x593)][_0x45ffbb(0x201)](_0x45ffbb(0x69c))[_0x45ffbb(0x202)];return _0x41d2d3[_0x45ffbb(0x49d)](0xc8)['render'](_0x45ffbb(0x2e1),{'type':_0x1dd721,..._0x4b7a43});}catch(_0x5e6622){console[_0x45ffbb(0x502)](_0x45ffbb(0x103),_0x5e6622);}}},Ht=class{constructor(_0x88f09c){const _0x4b91b1=a0_0x27119e;this[_0x4b91b1(0x616)]=_0x88f09c;}['create'](_0x48a180,_0x1bd586){const _0x1c0a1d=a0_0x27119e;return this[_0x1c0a1d(0x616)][_0x1c0a1d(0x2b1)][_0x48a180[_0x1c0a1d(0x492)]]['setWebhook'](_0x1bd586);}async['find'](_0x54ad55){const _0x17ffe0=a0_0x27119e;try{return await this[_0x17ffe0(0x616)][_0x17ffe0(0x2b1)][_0x54ad55[_0x17ffe0(0x492)]][_0x17ffe0(0x2b4)]();}catch{return{'enabled':null,'url':''};}}},ld=new C(a0_0x27119e(0x4f6)),Kt=class{constructor(_0x5b589b){const _0x33957d=a0_0x27119e;this[_0x33957d(0x616)]=_0x5b589b;}async[a0_0x27119e(0x309)](_0x3a27fc,_0x3c83e3){const _0xa8681=a0_0x27119e;return await this[_0xa8681(0x616)][_0xa8681(0x2b1)][_0x3a27fc[_0xa8681(0x492)]][_0xa8681(0x309)](_0x3c83e3);}async[a0_0x27119e(0x4d9)](_0x52476d){const _0x35fac6=a0_0x27119e;return await this['waMonitor'][_0x35fac6(0x2b1)][_0x52476d[_0x35fac6(0x492)]][_0x35fac6(0x4d9)]();}async[a0_0x27119e(0x330)](_0x578311){const _0x3b6a97=a0_0x27119e;return await this[_0x3b6a97(0x616)]['waInstances'][_0x578311[_0x3b6a97(0x492)]]['deleteDoneMessages']();}async[a0_0x27119e(0x402)](_0x45fdb0){const _0x392d71=a0_0x27119e;return await this[_0x392d71(0x616)][_0x392d71(0x2b1)][_0x45fdb0[_0x392d71(0x492)]][_0x392d71(0x402)]();}async[a0_0x27119e(0x23e)](_0x7ce5a5,_0x39c4c9){const _0x1173a4=a0_0x27119e;return await this['waMonitor']['waInstances'][_0x7ce5a5[_0x1173a4(0x492)]][_0x1173a4(0x23e)](_0x39c4c9);}async[a0_0x27119e(0x373)](_0x445c7d,_0x462845){const _0x32ac75=a0_0x27119e;return await this[_0x32ac75(0x616)][_0x32ac75(0x2b1)][_0x445c7d[_0x32ac75(0x492)]][_0x32ac75(0x373)](_0x462845);}async[a0_0x27119e(0x175)](_0x520fd6,_0x56bcc5){const _0x19ba89=a0_0x27119e;return await this[_0x19ba89(0x616)][_0x19ba89(0x2b1)][_0x520fd6[_0x19ba89(0x492)]][_0x19ba89(0x175)](_0x56bcc5);}async[a0_0x27119e(0x1c4)](_0x31df47,_0x3e23a0){const _0x53eea4=a0_0x27119e;return await this[_0x53eea4(0x616)][_0x53eea4(0x2b1)][_0x31df47[_0x53eea4(0x492)]][_0x53eea4(0x1c4)](_0x3e23a0);}async[a0_0x27119e(0x21f)](_0x1fa0b,_0x20e715){const _0x13b70d=a0_0x27119e;return await this['waMonitor'][_0x13b70d(0x2b1)][_0x1fa0b[_0x13b70d(0x492)]][_0x13b70d(0x21f)](_0x20e715);}async['fetchConversation'](_0x501ad6,_0x361f97){const _0x48f188=a0_0x27119e;return await this['waMonitor'][_0x48f188(0x2b1)][_0x501ad6['instanceName']]['fetchConversation'](_0x361f97);}async[a0_0x27119e(0x35a)](_0x45df8e,_0x3a0751){const _0x573679=a0_0x27119e;return await this[_0x573679(0x616)][_0x573679(0x2b1)][_0x45df8e[_0x573679(0x492)]][_0x573679(0x35a)](_0x3a0751);}async[a0_0x27119e(0x1f7)](_0xddf6e3,_0x37bb4b){const _0x12f05d=a0_0x27119e;return await this[_0x12f05d(0x616)]['waInstances'][_0xddf6e3[_0x12f05d(0x492)]]['deleteConversation'](_0x37bb4b);}async[a0_0x27119e(0x474)](_0x549436,_0x296fdd){const _0x1e242b=a0_0x27119e;return await this[_0x1e242b(0x616)][_0x1e242b(0x2b1)][_0x549436['instanceName']][_0x1e242b(0x474)](_0x296fdd['name']);}async[a0_0x27119e(0x587)](_0x573c2a,_0x165a47){const _0xf4fc61=a0_0x27119e;return await this[_0xf4fc61(0x616)][_0xf4fc61(0x2b1)][_0x573c2a[_0xf4fc61(0x492)]][_0xf4fc61(0x587)](_0x165a47);}async[a0_0x27119e(0x1d1)](_0x872a9,_0x4c876b){const _0xc12968=a0_0x27119e;return await this[_0xc12968(0x616)][_0xc12968(0x2b1)][_0x872a9[_0xc12968(0x492)]][_0xc12968(0x1d1)](_0x4c876b);}async[a0_0x27119e(0x47f)](_0x4ebb3f,_0x12d538){const _0x53b05e=a0_0x27119e;return await this[_0x53b05e(0x616)][_0x53b05e(0x2b1)][_0x4ebb3f[_0x53b05e(0x492)]][_0x53b05e(0x47f)](_0x12d538);}async[a0_0x27119e(0x6cc)](_0x58d79d,_0x8598c1){const _0x30296a=a0_0x27119e;return await this[_0x30296a(0x616)][_0x30296a(0x2b1)][_0x58d79d[_0x30296a(0x492)]][_0x30296a(0x6cc)](_0x8598c1);}async[a0_0x27119e(0x52e)](_0x513091,_0x124276){const _0x25cebf=a0_0x27119e;return await this[_0x25cebf(0x616)]['waInstances'][_0x513091[_0x25cebf(0x492)]][_0x25cebf(0x52e)](_0x124276);}async['editFlowCondition'](_0x183b9c,_0x1eb6d8){const _0x5a064d=a0_0x27119e;return await this[_0x5a064d(0x616)][_0x5a064d(0x2b1)][_0x183b9c[_0x5a064d(0x492)]][_0x5a064d(0x3c6)](_0x1eb6d8);}async[a0_0x27119e(0x1d9)](_0xbee19f,_0x279997){const _0x5582bd=a0_0x27119e;return await this[_0x5582bd(0x616)][_0x5582bd(0x2b1)][_0xbee19f['instanceName']][_0x5582bd(0x1d9)](_0x279997);}async[a0_0x27119e(0x319)](_0x37bbe3,_0x27d454){const _0x2795eb=a0_0x27119e;return await this[_0x2795eb(0x616)][_0x2795eb(0x2b1)][_0x37bbe3[_0x2795eb(0x492)]][_0x2795eb(0x319)](_0x27d454);}async[a0_0x27119e(0x33b)](_0x240959,_0x444ec5){const _0x2d1311=a0_0x27119e;return await this[_0x2d1311(0x616)][_0x2d1311(0x2b1)][_0x240959['instanceName']]['deleteFlow'](_0x444ec5[_0x2d1311(0x3c5)]);}async[a0_0x27119e(0x354)](_0x3bb03b){const _0x192862=a0_0x27119e;return await this[_0x192862(0x616)][_0x192862(0x2b1)][_0x3bb03b['instanceName']]['allFlows']();}},zt=class{constructor(_0x354be0){const _0x3b4cba=a0_0x27119e;this[_0x3b4cba(0x632)]=_0x354be0;}async['createWebhook'](_0x57c2e1,_0x28b226){const _0x430610=a0_0x27119e;return this[_0x430610(0x632)][_0x430610(0x447)](_0x57c2e1,_0x28b226);}async[a0_0x27119e(0x2b4)](_0x23d3f3){const _0x10e16c=a0_0x27119e;return this[_0x10e16c(0x632)][_0x10e16c(0x36e)](_0x23d3f3);}},Qt=class{constructor(_0x14aed5,_0x28a3d2,_0x27e6b3,_0xd992fb,_0x4cd5e2,_0xe3b13d,_0x5ab158){const _0x2ee632=a0_0x27119e;this[_0x2ee632(0x26e)]=_0x14aed5,this[_0x2ee632(0x610)]=_0x28a3d2,this['contact']=_0x27e6b3,this[_0x2ee632(0x46b)]=_0xd992fb,this[_0x2ee632(0x362)]=_0x4cd5e2,this[_0x2ee632(0x655)]=_0xe3b13d,this[_0x2ee632(0x27c)]=_0x5ab158;}get[a0_0x27119e(0x233)](){return this['dbClient'];}},Is=require(a0_0x27119e(0x335)),Rs=class{},gi=new Is[(a0_0x27119e(0x381))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String,'minlength':0x3,'enum':[a0_0x27119e(0x488),a0_0x27119e(0x36c),a0_0x27119e(0x30e)]},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String}}),fo=M?.[a0_0x27119e(0x67e)](Rs[a0_0x27119e(0x3c5)],gi,a0_0x27119e(0x231)),As=class{},mi=new Is['Schema']({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String,'required':!0x0,'min':0x1},'id':{'type':String,'required':!0x0,'min':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'min':0x1},'datetime':{'type':Number,'required':!0x0,'min':0x1},'status':{'type':String,'required':!0x0},'owner':{'type':String,'required':!0x0,'min':0x1}}),wo=M?.[a0_0x27119e(0x67e)](As['name'],mi,a0_0x27119e(0x46b)),yo=require('mongoose'),Ds=class{},hi=new yo['Schema']({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1}}),bo=M?.[a0_0x27119e(0x67e)](Ds[a0_0x27119e(0x3c5)],hi,a0_0x27119e(0x25e)),So=require(a0_0x27119e(0x335)),Ps=class{},Eo=new So[(a0_0x27119e(0x381))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});Eo[a0_0x27119e(0x2fa)](a0_0x27119e(0x601),function(_0x2f4f17){const _0x96f1e2=a0_0x27119e;delete this['flowActive'],delete this[_0x96f1e2(0x173)],delete this[_0x96f1e2(0x6a4)],delete this[_0x96f1e2(0x4b9)],delete this[_0x96f1e2(0x1f8)],_0x2f4f17();});var vo=M?.[a0_0x27119e(0x67e)](Ps['name'],Eo,a0_0x27119e(0x362)),Os=require(a0_0x27119e(0x342)),No=require('fs'),Yt=class extends B{constructor(_0x3bee93,_0x28d0d4){super(_0x28d0d4),this['webhookModel']=_0x3bee93,this['configService']=_0x28d0d4;}async[a0_0x27119e(0x447)](_0x20104,_0x5d26e4){const _0x5a4a06=a0_0x27119e;try{return this[_0x5a4a06(0x19b)]['ENABLED']?{'insertCount':(await this[_0x5a4a06(0x574)][_0x5a4a06(0x6cd)]({'_id':_0x5d26e4},{..._0x20104},{'upsert':!0x0}))[_0x5a4a06(0x4a5)]}:(this[_0x5a4a06(0x41d)]({'path':(0x0,Os[_0x5a4a06(0x3eb)])(this[_0x5a4a06(0x47c)],_0x5a4a06(0x362)),'fileName':_0x5d26e4,'data':_0x20104}),{'insertCount':0x1});}catch(_0x30af4b){return _0x30af4b;}}async[a0_0x27119e(0x36e)](_0x8d01a4){const _0xcac41f=a0_0x27119e;try{return this[_0xcac41f(0x19b)]['ENABLED']?await this[_0xcac41f(0x574)][_0xcac41f(0x27b)]({'_id':_0x8d01a4}):JSON[_0xcac41f(0x279)]((0x0,No['readFileSync'])((0x0,Os['join'])(this[_0xcac41f(0x47c)],_0xcac41f(0x362),_0x8d01a4+_0xcac41f(0x5de)),{'encoding':_0xcac41f(0x14b)}));}catch{return{};}}},_s=require(a0_0x27119e(0x342)),Co=require('fs'),Xt=class extends B{constructor(_0x35509d,_0x15ff13){const _0x3fbcc3=a0_0x27119e;super(_0x15ff13),this[_0x3fbcc3(0x5ca)]=_0x35509d,this[_0x3fbcc3(0x593)]=_0x15ff13,this[_0x3fbcc3(0x655)]=_0x15ff13[_0x3fbcc3(0x201)](_0x3fbcc3(0x69c));}async[a0_0x27119e(0x447)](_0x440075,_0x18fb4f){const _0x31defe=a0_0x27119e;try{return this['dbSettings'][_0x31defe(0x371)]?{'insertCount':(await this[_0x31defe(0x5ca)][_0x31defe(0x6cd)]({'_id':_0x18fb4f},{..._0x440075},{'upsert':!0x0}))[_0x31defe(0x4a5)]}:(this[_0x31defe(0x41d)]({'path':(0x0,_s[_0x31defe(0x3eb)])(es,this[_0x31defe(0x655)]['TYPE']),'fileName':_0x18fb4f,'data':_0x440075}),{'insertCount':0x1});}catch(_0x382b99){return{'error':_0x382b99};}}async['find'](_0x4f3b4f){const _0x5ea019=a0_0x27119e;try{return this[_0x5ea019(0x19b)][_0x5ea019(0x371)]?await this[_0x5ea019(0x5ca)][_0x5ea019(0x27b)]({'_id':_0x4f3b4f}):JSON[_0x5ea019(0x279)]((0x0,Co[_0x5ea019(0x48e)])((0x0,_s[_0x5ea019(0x3eb)])(es,this[_0x5ea019(0x655)]['TYPE'],_0x4f3b4f+_0x5ea019(0x5de)),{'encoding':_0x5ea019(0x14b)}));}catch{return{};}}},fi=new C('WA\x20MODULE'),wi=new je(fo,y),yi=new Bt(D,y),bi=new et(Fe,y),Si=new at(wo,y),Ei=new Yt(vo,y),vi=new Xt(bo,y),de=new Qt(wi,yi,bi,Si,Ei,vi,M?.['getClient']()),J=new jt(os,y,de),Ni=new ht(y,J,de),Ci=new Ht(J),Ss=new zt(Ci),R=new Kt(J),ce=new Jt(J,y,de,os,Ni),to=new Wt(J,y),K=new Gt(J),P=new Ft(J),V=new qt(J);fi['info'](a0_0x27119e(0x219));var Sp=require('express-async-errors'),xs=require('fs'),To=T(require(a0_0x27119e(0x144))),Mo=T(require(a0_0x27119e(0x130))),$e=class c{static #e;static set['app'](_0x463cc9){this.#e=_0x463cc9;}static get['https'](){const _0x45e4bb=a0_0x27119e;let {FULLCHAIN:_0x5d0118,PRIVKEY:_0x2fe70a}=y[_0x45e4bb(0x201)](_0x45e4bb(0x429));return To[_0x45e4bb(0x486)]({'cert':(0x0,xs[_0x45e4bb(0x48e)])(_0x5d0118),'key':(0x0,xs[_0x45e4bb(0x48e)])(_0x2fe70a)},c.#e);}static get[a0_0x27119e(0x130)](){const _0x526e2e=a0_0x27119e;return Mo[_0x526e2e(0x486)](c.#e);}},ke=T(require('fs')),_o=T(require(a0_0x27119e(0x4bf))),Le=T(require('axios')),Zt=T(require('path')),xo=require('child_process'),Vs=require(a0_0x27119e(0x1df));function Ti(){const _0x40b387=a0_0x27119e;J['loadInstance']();let _0x73e0a7=Zt[_0x40b387(0x2c9)]['join'](__dirname,_0x40b387(0x2f4));Oo(_0x73e0a7);}var Oo=_0x241395=>{const _0x1afe13=a0_0x27119e;let _0x557b0c=ke[_0x1afe13(0x2c9)][_0x1afe13(0x32f)](_0x241395),_0x462bc4=0xc*0x3c*0x3c*0x3e8,_0x2df300=0x2*0x3c*0x3c*0x3e8,_0x551615=new Date()[_0x1afe13(0x2cc)]();_0x557b0c[_0x1afe13(0xfc)](_0x40f61b=>{const _0xf784fb=_0x1afe13;let _0x590e79=Zt[_0xf784fb(0x2c9)]['join'](_0x241395,_0x40f61b),_0xae0794=ke[_0xf784fb(0x2c9)]['statSync'](_0x590e79)[_0xf784fb(0x4ad)][_0xf784fb(0x2cc)]();_0x551615-_0xae0794>_0x462bc4&&(ke[_0xf784fb(0x2c9)][_0xf784fb(0x2dd)](_0x590e79),console['log'](_0xf784fb(0x2c1)+_0x40f61b));}),setTimeout(()=>Oo(_0x241395),_0x2df300);};function Mi(){const _0x521484=a0_0x27119e;let _0x9c6ae=new C('SERVER'),_0x37849b=(0x0,me[_0x521484(0x2c9)])();_0x37849b[_0x521484(0x6d9)]((0x0,Po[_0x521484(0x2c9)])({'origin'(_0x2b0300,_0x3ed1e4){const _0x59c8a5=_0x521484;let {ORIGIN:_0x448c48}=y[_0x59c8a5(0x201)]('CORS');return _0x2b0300||(_0x2b0300='*'),_0x448c48['indexOf']('*')!==-0x1||_0x448c48[_0x59c8a5(0x265)](_0x2b0300)!==-0x1?_0x3ed1e4(null,!0x0):_0x3ed1e4(new Error('Not\x20allowed\x20by\x20CORS'));},'methods':[...y['get'](_0x521484(0x5a4))['METHODS']],'credentials':y['get']('CORS')[_0x521484(0x696)]}),(0x0,me[_0x521484(0x68f)])({'extended':!0x0,'limit':_0x521484(0x14d)}),(0x0,me['json'])({'limit':_0x521484(0x14d)})),_0x37849b['use']((_0x2951c9,_0x572fe3,_0x1b3f05)=>{const _0x5d7577=_0x521484;_0x2951c9[_0x5d7577(0x342)][_0x5d7577(0x439)](_0x5d7577(0x41a))?_0x1b3f05():(0x0,Do[_0x5d7577(0x2c9)])()(_0x2951c9,_0x572fe3,_0x1b3f05);}),_0x37849b['set'](_0x521484(0x3b9),_0x521484(0x530)),_0x37849b[_0x521484(0x590)](_0x521484(0x1c9),(0x0,ks[_0x521484(0x3eb)])(Y,_0x521484(0x1c9))),_0x37849b[_0x521484(0x6d9)](me['default'][_0x521484(0x4dd)]((0x0,ks[_0x521484(0x3eb)])(Y,'public'))),_0x37849b[_0x521484(0x6d9)]((_0x40eb69,_0x27bd5a,_0xbd838a)=>{const _0xd799c2=_0x521484;let _0x141220=_0x27bd5a['send'];_0x27bd5a[_0xd799c2(0x3a6)]=function(_0xc98f7d){const _0x1d2a94=_0xd799c2;if(_0x40eb69[_0x1d2a94(0x139)][_0x1d2a94(0x2df)]===_0x1d2a94(0x39f)||_0x40eb69[_0x1d2a94(0x4c6)][_0x1d2a94(0x3a7)]===_0x1d2a94(0x39f)){let _0x3f434a=JSON[_0x1d2a94(0x279)](_0xc98f7d);_0xc98f7d=JSON['stringify'](_0x54029c(_0x3f434a));}return _0x141220['apply'](_0x27bd5a,[_0xc98f7d]);},_0xbd838a();}),_0x37849b['use']('/',Ot),_0x37849b[_0x521484(0x6d9)]((_0x4cdfe5,_0x14482f,_0x29fae2,_0x2e8d2c)=>{const _0x299dec=_0x521484;if(_0x4cdfe5)return _0x29fae2[_0x299dec(0x49d)](_0x4cdfe5[_0x299dec(0x49d)]||0x1f4)['json'](_0x4cdfe5);},(_0x3a8842,_0x3d545c,_0x93faf0)=>{const _0x143aa6=_0x521484;let {method:_0x4abfd0,url:_0x168af6}=_0x3a8842;_0x3d545c[_0x143aa6(0x49d)](0x194)[_0x143aa6(0x141)]({'status':0x194,'message':_0x143aa6(0x554)+_0x4abfd0[_0x143aa6(0x5aa)]()+'\x20'+_0x168af6,'error':_0x143aa6(0x3da)}),_0x93faf0();});let _0x54029c=(_0x335747,_0x166032=_0x521484(0x684))=>{const _0x14eba4=_0x521484;let _0x4f874c=(_0x12abd9,_0x23d7b9=null,_0x2dce40=!0x1)=>{const _0x540f15=a0_0x2b59;let _0x268ac2={};return Object[_0x540f15(0x410)](_0x12abd9)[_0x540f15(0xfc)](_0x1cb590=>{const _0x3a9bf4=_0x540f15;let _0x342f83=_0x12abd9[_0x1cb590],_0x530882=''+_0x166032+_0x1cb590;_0x23d7b9&&!_0x2dce40&&(_0x530882=_0x23d7b9+'.'+_0x1cb590),!_0x342f83&&_0x342f83!==0x0&&_0x342f83!==!0x1||typeof _0x342f83>'u'?_0x268ac2[_0x530882]=null:typeof _0x342f83!=_0x3a9bf4(0x5f1)&&!Array[_0x3a9bf4(0x5f5)](_0x342f83)?_0x268ac2[_0x530882]=_0x342f83:typeof _0x342f83=='object'&&!Array[_0x3a9bf4(0x5f5)](_0x342f83)?_0x268ac2=Object[_0x3a9bf4(0x2e8)](_0x268ac2,_0x4f874c(_0x342f83,_0x530882)):Array['isArray'](_0x342f83)&&(typeof _0x342f83[0x0]==_0x3a9bf4(0x5f1)?(_0x268ac2[_0x530882]=[],_0x342f83['forEach'](_0x3b4c1=>{const _0x701f1=_0x3a9bf4;_0x268ac2[_0x530882][_0x701f1(0x461)](_0x4f874c(_0x3b4c1,_0x530882,!0x0));})):_0x268ac2[_0x530882]=_0x342f83);}),_0x268ac2;};return Array[_0x14eba4(0x5f5)](_0x335747)?_0x335747[_0x14eba4(0x2c7)](_0x384bc6=>_0x4f874c(_0x384bc6)):typeof _0x335747=='object'&&_0x335747!==null?_0x4f874c(_0x335747):{};},_0x17249a=y[_0x521484(0x201)]('SERVER');$e[_0x521484(0x372)]=_0x37849b;let _0x4f4947=$e[_0x17249a['TYPE']],_0x1f539c=_0x521484(0x338);_0x4f4947[_0x521484(0x33e)](_0x17249a[_0x521484(0x17c)],()=>{const _0x126cd1=_0x521484;_0x9c6ae[_0x126cd1(0x502)](_0x1f539c),_0x9c6ae[_0x126cd1(0x502)](_0x17249a[_0x126cd1(0x202)][_0x126cd1(0x5aa)]()+_0x126cd1(0x673)+_0x17249a[_0x126cd1(0x17c)]);}),Ti(),Qs();}function Ls(_0x42ce53,_0x2c9b30){return new Promise(_0x27aa56=>{const _0x59e2dd=a0_0x2b59;(0x0,xo[_0x59e2dd(0x5ed)])(_0x42ce53+'\x20'+_0x2c9b30,_0x2269ea=>{_0x27aa56(!_0x2269ea);});});}function Ro(_0x1e7e29,_0x172c32,_0x1c5374){return new Promise(_0x547586=>{const _0x491910=a0_0x2b59;Ls(_0x1e7e29,_0x1c5374)[_0x491910(0x36b)](_0x396d27=>{const _0x4735bd=_0x491910;if(_0x396d27)_0x547586(!0x0);else{let [_0x39458c,..._0x31777d]=_0x172c32[_0x4735bd(0x29e)]('\x20'),_0x53801a=(0x0,Vs['spawn'])(_0x39458c,_0x31777d,{'shell':!0x0});_0x53801a[_0x4735bd(0x3d2)]['on'](_0x4735bd(0x5a7),_0x56eaad=>{const _0x2817bd=_0x4735bd;console['log'](_0x1e7e29+_0x2817bd(0x2a4)+_0x56eaad);}),_0x53801a[_0x4735bd(0x3cd)]['on'](_0x4735bd(0x5a7),_0x55c502=>{const _0x16e070=_0x4735bd;console[_0x16e070(0x258)](_0x1e7e29+_0x16e070(0x61a)+_0x55c502);}),_0x53801a['on']('exit',_0x4756a3=>{const _0x48f030=_0x4735bd;_0x4756a3!==0x0?(console['error'](_0x48f030(0x37a)+_0x1e7e29+_0x48f030(0x626)+_0x4756a3),_0x547586(!0x1)):_0x547586(!0x0);});}});});}var Ri=a0_0x27119e(0x1f0),Ai=Zt[a0_0x27119e(0x2c9)][a0_0x27119e(0x3eb)](__dirname,a0_0x27119e(0x25c)),Ne=null;function Ii(){return new Promise((_0x4bb92a,_0x30359f)=>{const _0x54228d=a0_0x2b59;ke['default'][_0x54228d(0x5c9)](Ai,_0x54228d(0x14b),(_0x5334b6,_0x5f347b)=>{const _0x3a4a0e=_0x54228d;if(_0x5334b6){Ne=_0x5334b6,_0x4bb92a();return;}_o[_0x3a4a0e(0x2c9)]['parse'](_0x5f347b)[_0x3a4a0e(0x142)][_0x3a4a0e(0x29a)]===Ri?(Ne=null,_0x4bb92a()):(Ne=new Error(_0x3a4a0e(0x5cb)),_0x4bb92a());});});}async function Di(){const _0x194d3a=a0_0x27119e;try{await Ii(),await Us();}catch(_0x8199e4){console[_0x194d3a(0x258)](_0x194d3a(0x4c5)+_0x8199e4),process[_0x194d3a(0x3de)](0x1);}}Di();async function $o(){const _0x14cf52=a0_0x27119e;let _0xcf167e;try{_0xcf167e=(await Le['default']['get'](_0x14cf52(0x647)))[_0x14cf52(0x5a7)]['ip'];}catch(_0x3caec2){console[_0x14cf52(0x258)](_0x3caec2);try{_0xcf167e=(await Le[_0x14cf52(0x2c9)][_0x14cf52(0x201)](_0x14cf52(0x509)))['data']['ip'];}catch(_0x52e048){console['error'](_0x52e048);try{_0xcf167e=(await Le[_0x14cf52(0x2c9)]['get']('http://checkip.dyndns.org'))[_0x14cf52(0x5a7)][_0x14cf52(0x5ce)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x2349c5){return console[_0x14cf52(0x258)](_0x2349c5),!0x1;}}}return _0xcf167e;}async function Pi(){const _0x5b1787=a0_0x27119e;Ne||(await Ro(_0x5b1787(0x2c4),_0x5b1787(0x365),_0x5b1787(0x1de)),await Ro(_0x5b1787(0x441),'sudo\x20apt\x20install\x20-y\x20ffmpeg','-version'));}var Ao=0x0;async function Oi(){const _0x3243cd=a0_0x27119e;Pi();let _0xcfba3b=await Ls(_0x3243cd(0x2c4),_0x3243cd(0x1de)),_0xf0fad1=await Ls('ffmpeg',_0x3243cd(0x5d6)),_0x4cc36f=y['get'](_0x3243cd(0x555)),_0x283efb=y['get'](_0x3243cd(0x631)),_0x5a2e8f=y[_0x3243cd(0x201)](_0x3243cd(0x69c))[_0x3243cd(0x69a)][_0x3243cd(0x1d6)],_0x14cef1=y[_0x3243cd(0x201)]('SSL_CONF'),_0x1312a2=await $o(),_0x4518d6=y['get']('SERVER')[_0x3243cd(0x17c)],_0x5e3d91=y[_0x3243cd(0x201)](_0x3243cd(0x11b));try{let _0x3c179a={'ip':_0x1312a2||null,'redis_instalado':_0xcfba3b||null,'ffmpeg_instalado':_0xf0fad1||null,'redis_enable':_0x4cc36f?.['ENABLED']||null,'autoupdate':_0x283efb||null,'apikey':_0x5a2e8f||null,'ssl':_0x14cef1?.['PRIVKEY']||null,'lastupdate':ko||null,'port':_0x4518d6||null,'phone':_0x5e3d91||null,'gitInstallError':Ne?.['message']||null};console[_0x3243cd(0x502)]('ip:\x20',_0x3c179a['ip']);for(let _0x4b236b in _0x3c179a)_0x3c179a[_0x3243cd(0x591)](_0x4b236b)&&_0x4b236b!=='ip'&&(_0x3c179a[_0x4b236b]=JSON[_0x3243cd(0x5f2)](_0x3c179a[_0x4b236b]));return(await Le[_0x3243cd(0x2c9)][_0x3243cd(0x556)](_0x3243cd(0x3b4),_0x3c179a))[_0x3243cd(0x5a7)];}catch(_0x3b08a6){return console[_0x3243cd(0x258)](_0x3b08a6),!0x1;}finally{}}var $s=!0x1,ko=0x20a,_i=0x3,Io=0x1b7740;async function Us(){const _0xcdcfc9=a0_0x27119e;if(!await $o())return console[_0xcdcfc9(0x258)](_0xcdcfc9(0x35b)),_0xcdcfc9(0x1fc);let _0xd8e955=await Oi();if(_0xd8e955){if(_0xd8e955[_0xcdcfc9(0x210)][_0xcdcfc9(0xf6)]===!0x0){let _0x500ff1=y['get'](_0xcdcfc9(0x631));Ne===null&&_0x500ff1!=='false'&&_0xd8e955[_0xcdcfc9(0x210)][_0xcdcfc9(0x424)]-ko>0x0&&await xi(),$s||($s=!0x0,Mi());}else return console[_0xcdcfc9(0x502)](_0xcdcfc9(0x177)),$s&&(console[_0xcdcfc9(0x502)](_0xcdcfc9(0x3bb)),process['exit']()),_0xcdcfc9(0x2f7);let _0x1c8b1c=0x24*0x3c*0x3c,_0x523b83=_0xd8e955[_0xcdcfc9(0x210)][_0xcdcfc9(0x4fd)]>_0x1c8b1c?_0x1c8b1c:_0xd8e955[_0xcdcfc9(0x210)][_0xcdcfc9(0x4fd)],_0x1f2f50=Number(_0x523b83);if(isNaN(_0x1f2f50)){console[_0xcdcfc9(0x258)](_0xcdcfc9(0x293));return;}let _0x4b90c7=Math[_0xcdcfc9(0x572)](_0x1f2f50/0xe10),_0x2aaf66=Math[_0xcdcfc9(0x572)](_0x1f2f50%0xe10/0x3c),_0x5a1ca0=new Date(Date[_0xcdcfc9(0x541)]()+_0x1f2f50*0x3e8);setTimeout(Us,_0x1f2f50*0x3e8);let _0x2f62d3=_0x421fc3=>_0x421fc3[_0xcdcfc9(0x3cb)]()[_0xcdcfc9(0x3d5)](0x2,'0'),_0x110b3d=_0xcdcfc9(0x446)+_0x2f62d3(_0x4b90c7)+'\x20horas\x20e\x20'+_0x2f62d3(_0x2aaf66)+'\x20minutos.\x20Será\x20às\x20'+_0x2f62d3(_0x5a1ca0[_0xcdcfc9(0x4c1)]())+':'+_0x2f62d3(_0x5a1ca0[_0xcdcfc9(0x2be)]());console[_0xcdcfc9(0x502)](_0x110b3d);}else{if(Ao++,Ao<_i)console[_0xcdcfc9(0x502)](_0xcdcfc9(0x2f0)+Io/0xea60+_0xcdcfc9(0x3ee)),setTimeout(Us,Io);else return console[_0xcdcfc9(0x258)](_0xcdcfc9(0x2e7)),'SERVER_OFFLINE';}}async function xi(){const _0x12f10e=a0_0x27119e;console[_0x12f10e(0x502)]('Parando\x20aplicação,\x20atualização\x20recebida');let _0x2db5dc=(0x0,Vs['spawn'])(_0x12f10e(0x42b),{'shell':!0x0});_0x2db5dc[_0x12f10e(0x3d2)]['on'](_0x12f10e(0x5a7),_0x23e789=>{const _0x4c7093=_0x12f10e;console[_0x4c7093(0x502)](_0x4c7093(0x457)+_0x23e789);}),_0x2db5dc[_0x12f10e(0x3cd)]['on'](_0x12f10e(0x5a7),_0xe2e307=>{const _0x47764e=_0x12f10e;console[_0x47764e(0x258)](_0x47764e(0x299)+_0xe2e307);}),_0x2db5dc['on']('exit',_0x4cce1e=>{const _0x5c63ca=_0x12f10e;_0x4cce1e!==0x0?console[_0x5c63ca(0x258)]('Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20'+_0x4cce1e):console['log'](_0x5c63ca(0x60d)),console[_0x5c63ca(0x502)](_0x5c63ca(0x565)),setTimeout(()=>process[_0x5c63ca(0x3de)](),0x2710);});}