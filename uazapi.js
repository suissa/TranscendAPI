const a0_0x3f352e=a0_0x1206;(function(_0x340f85,_0x422cf8){const _0x43f488=a0_0x1206,_0x44cbc4=_0x340f85();while(!![]){try{const _0x3fd6c4=-parseInt(_0x43f488(0x72e))/0x1*(-parseInt(_0x43f488(0x4a7))/0x2)+-parseInt(_0x43f488(0x201))/0x3+parseInt(_0x43f488(0x40f))/0x4*(parseInt(_0x43f488(0x74c))/0x5)+-parseInt(_0x43f488(0x25b))/0x6+-parseInt(_0x43f488(0x223))/0x7*(parseInt(_0x43f488(0x3c9))/0x8)+parseInt(_0x43f488(0x310))/0x9+-parseInt(_0x43f488(0x2d9))/0xa;if(_0x3fd6c4===_0x422cf8)break;else _0x44cbc4['push'](_0x44cbc4['shift']());}catch(_0x31bdd1){_0x44cbc4['push'](_0x44cbc4['shift']());}}}(a0_0x26ed,0x95aa8));var Gi=Object[a0_0x3f352e(0x325)],qe=Object[a0_0x3f352e(0x7dd)],Bi=Object[a0_0x3f352e(0x291)],Wi=Object['getOwnPropertyNames'],zi=Object[a0_0x3f352e(0x7e5)],Hi=Object['prototype'][a0_0x3f352e(0x6e9)],Ki=(_0x38e06e,_0x334918)=>{for(var _0x476f4a in _0x334918)qe(_0x38e06e,_0x476f4a,{'get':_0x334918[_0x476f4a],'enumerable':!0x0});},Vs=(_0x2cb7c8,_0x537b4c,_0x4a9750,_0x220bcb)=>{const _0x18384c=a0_0x3f352e;if(_0x537b4c&&typeof _0x537b4c==_0x18384c(0x5a0)||typeof _0x537b4c==_0x18384c(0x396)){for(let _0xb6eabd of Wi(_0x537b4c))!Hi[_0x18384c(0x145)](_0x2cb7c8,_0xb6eabd)&&_0xb6eabd!==_0x4a9750&&qe(_0x2cb7c8,_0xb6eabd,{'get':()=>_0x537b4c[_0xb6eabd],'enumerable':!(_0x220bcb=Bi(_0x537b4c,_0xb6eabd))||_0x220bcb[_0x18384c(0x71d)]});}return _0x2cb7c8;},A=(_0x3fb525,_0x2ed173,_0x56f7e7)=>(_0x56f7e7=_0x3fb525!=null?Gi(zi(_0x3fb525)):{},Vs(_0x2ed173||!_0x3fb525||!_0x3fb525[a0_0x3f352e(0x7a8)]?qe(_0x56f7e7,a0_0x3f352e(0x164),{'value':_0x3fb525,'enumerable':!0x0}):_0x56f7e7,_0x3fb525)),Qi=_0x202894=>Vs(qe({},a0_0x3f352e(0x7a8),{'value':!0x0}),_0x202894),ur={};Ki(ur,{'fullURL':()=>qs,'subdomain':()=>W}),module[a0_0x3f352e(0x679)]=Qi(ur);var Fi=A(require('compression')),Bs=require('fs'),Ws=require(a0_0x3f352e(0x6c9)),zs=require(a0_0x3f352e(0x17a)),Ve=require(a0_0x3f352e(0x17a)),ne=process['cwd'](),be=(0x0,Ve['join'])(ne,a0_0x3f352e(0x5b7)),Gs=(0x0,Ve[a0_0x3f352e(0x348)])(ne,a0_0x3f352e(0x388)),sn=(0x0,Ve[a0_0x3f352e(0x348)])(ne,'store',a0_0x3f352e(0x554)),us=class{constructor(){const _0x3395dd=a0_0x3f352e;this[_0x3395dd(0x216)]();}[a0_0x3f352e(0x427)](_0x4e3374){const _0x31e3c3=a0_0x3f352e;return this[_0x31e3c3(0x548)][_0x4e3374];}[a0_0x3f352e(0x216)](){const _0x437c00=a0_0x3f352e;this['env']=process[_0x437c00(0x548)]?.['DOCKER_ENV']!==_0x437c00(0xf3)?this['envYaml']():this[_0x437c00(0x1ca)](),process[_0x437c00(0x548)]?.[_0x437c00(0x562)]===_0x437c00(0xf3)&&(this[_0x437c00(0x548)][_0x437c00(0x597)][_0x437c00(0x355)]=_0x437c00(0x17b),this[_0x437c00(0x548)][_0x437c00(0x597)]['PORT']=Number[_0x437c00(0x2c9)](process[_0x437c00(0x548)]?.['SERVER_PORT']??_0x437c00(0x565)));}[a0_0x3f352e(0x496)](){const _0x37a148=a0_0x3f352e;return(0x0,Ws[_0x37a148(0x5e6)])((0x0,Bs[_0x37a148(0x3a4)])((0x0,zs[_0x37a148(0x348)])(Gs,_0x37a148(0x22f)),{'encoding':_0x37a148(0x12d)}));}[a0_0x3f352e(0x1ca)](){const _0x50c2e2=a0_0x3f352e;return{'SERVER':{'TYPE':process[_0x50c2e2(0x548)][_0x50c2e2(0x71c)],'PORT':Number[_0x50c2e2(0x2c9)](process[_0x50c2e2(0x548)][_0x50c2e2(0x7ae)]),'URL':process[_0x50c2e2(0x548)][_0x50c2e2(0x524)]},'CORS':{'ORIGIN':process[_0x50c2e2(0x548)][_0x50c2e2(0x73d)][_0x50c2e2(0x384)](','),'METHODS':process[_0x50c2e2(0x548)][_0x50c2e2(0x236)][_0x50c2e2(0x384)](','),'CREDENTIALS':process[_0x50c2e2(0x548)]?.[_0x50c2e2(0x67d)]===_0x50c2e2(0xf3)},'SSL_CONF':{'PRIVKEY':process[_0x50c2e2(0x548)]?.['SSL_CONF_PRIVKEY'],'FULLCHAIN':process['env']?.[_0x50c2e2(0x10d)]},'STORE':{'CLEANING_INTERVAL':Number[_0x50c2e2(0x702)](process[_0x50c2e2(0x548)]?.['STORE_CLEANING_TERMINAL'])?Number[_0x50c2e2(0x2c9)](process[_0x50c2e2(0x548)][_0x50c2e2(0x7c8)]):void 0x0,'MESSAGES':process[_0x50c2e2(0x548)]?.['STORE_MESSAGE']===_0x50c2e2(0xf3),'CONTACTS':process['env']?.[_0x50c2e2(0x222)]===_0x50c2e2(0xf3),'CHATS':process[_0x50c2e2(0x548)]?.[_0x50c2e2(0xb0)]===_0x50c2e2(0xf3)},'DATABASE':{'CONNECTION':{'HOST':process['env']?.[_0x50c2e2(0x406)],'PORT':Number[_0x50c2e2(0x2c9)](process[_0x50c2e2(0x548)]?.[_0x50c2e2(0x406)]),'USER':process[_0x50c2e2(0x548)][_0x50c2e2(0x761)],'PASSWORD':process[_0x50c2e2(0x548)]['DATABASE_CONNECTION_PASSWORD'],'URI':process[_0x50c2e2(0x548)][_0x50c2e2(0x659)],'DB_PREFIX_NAME':process[_0x50c2e2(0x548)]['DATABASE_CONNECTION_DB_PREFIX_NAME']},'ENABLED':process['env']?.[_0x50c2e2(0x5eb)]===_0x50c2e2(0xf3)},'REDIS':{'ENABLED':process[_0x50c2e2(0x548)]?.[_0x50c2e2(0x4b7)]===_0x50c2e2(0xf3),'URI':process[_0x50c2e2(0x548)][_0x50c2e2(0x2ec)]||'redis://127.0.0.1:6379','PREFIX_KEY':process[_0x50c2e2(0x548)]['REDIS_PREFIX_KEY']||_0x50c2e2(0x7e9)},'LOG':{'LEVEL':process[_0x50c2e2(0x548)]?.['LOG_LEVEL'][_0x50c2e2(0x384)](','),'COLOR':process['env']?.[_0x50c2e2(0x69c)]===_0x50c2e2(0xf3)},'PROXY':process['env']?.[_0x50c2e2(0x41c)]===_0x50c2e2(0xf3),'AUTHENTICATION':{'TYPE':process[_0x50c2e2(0x548)][_0x50c2e2(0x749)],'API_KEY':{'KEY':process[_0x50c2e2(0x548)][_0x50c2e2(0x7a9)]},'JWT':{'EXPIRIN_IN':Number[_0x50c2e2(0x702)](process[_0x50c2e2(0x548)]?.[_0x50c2e2(0x534)])?Number['parseInt'](process[_0x50c2e2(0x548)][_0x50c2e2(0x534)]):0xe10,'SECRET':process['env'][_0x50c2e2(0x594)]}}};}},S=new us(),Ui=A(require(a0_0x3f352e(0x55c))),we=A(require('express')),js=require(a0_0x3f352e(0x17a)),ds=A(require(a0_0x3f352e(0x43f))),ps=(_0x527b4e=>(_0x527b4e[a0_0x3f352e(0x453)]=a0_0x3f352e(0x2c7),_0x527b4e[a0_0x3f352e(0x121)]=a0_0x3f352e(0x5a9),_0x527b4e[a0_0x3f352e(0x431)]=a0_0x3f352e(0x797),_0x527b4e[a0_0x3f352e(0x481)]=a0_0x3f352e(0x20e),_0x527b4e[a0_0x3f352e(0x264)]='\x1b[36m',_0x527b4e[a0_0x3f352e(0x74b)]=a0_0x3f352e(0x5ff),_0x527b4e[a0_0x3f352e(0x640)]=a0_0x3f352e(0x3ac),_0x527b4e))(ps||{}),Hs=(_0x540fd4=>(_0x540fd4[a0_0x3f352e(0x453)]=a0_0x3f352e(0x621),_0x540fd4[a0_0x3f352e(0x640)]=a0_0x3f352e(0x4ec),_0x540fd4['INFO']=a0_0x3f352e(0x5c9),_0x540fd4['WARN']=a0_0x3f352e(0x4f6),_0x540fd4[a0_0x3f352e(0x481)]='\x1b[31m%s\x1b[0m',_0x540fd4[a0_0x3f352e(0x264)]=a0_0x3f352e(0x651),_0x540fd4[a0_0x3f352e(0x74b)]=a0_0x3f352e(0x587),_0x540fd4))(Hs||{}),Ks=(_0x5616c0=>(_0x5616c0['LOG']=a0_0x3f352e(0x453),_0x5616c0[a0_0x3f352e(0x431)]=a0_0x3f352e(0x431),_0x5616c0[a0_0x3f352e(0x121)]='INFO',_0x5616c0[a0_0x3f352e(0x640)]=a0_0x3f352e(0x640),_0x5616c0[a0_0x3f352e(0x481)]=a0_0x3f352e(0x481),_0x5616c0[a0_0x3f352e(0x264)]='DEBUG',_0x5616c0[a0_0x3f352e(0x74b)]=a0_0x3f352e(0x74b),_0x5616c0))(Ks||{}),Qs=(_0x376e68=>(_0x376e68[a0_0x3f352e(0x453)]=a0_0x3f352e(0x4fd),_0x376e68[a0_0x3f352e(0x121)]=a0_0x3f352e(0x52e),_0x376e68[a0_0x3f352e(0x431)]='\x1b[43m',_0x376e68[a0_0x3f352e(0x640)]=a0_0x3f352e(0x152),_0x376e68[a0_0x3f352e(0x481)]=a0_0x3f352e(0x43c),_0x376e68[a0_0x3f352e(0x264)]=a0_0x3f352e(0x42e),_0x376e68[a0_0x3f352e(0x74b)]='\x1b[47m',_0x376e68))(Qs||{}),$=class{constructor(_0x57a900=a0_0x3f352e(0x63f)){const _0x76b814=a0_0x3f352e;this[_0x76b814(0x4de)]=_0x57a900,this[_0x76b814(0x446)]=S;}[a0_0x3f352e(0x44e)](_0x28866b){const _0x4c0cd5=a0_0x3f352e;this[_0x4c0cd5(0x4de)]=_0x28866b;}[a0_0x3f352e(0x10b)](_0x44f419,_0x54a18c){const _0x10539c=a0_0x3f352e;let _0x8fee87=[];this[_0x10539c(0x446)][_0x10539c(0x427)](_0x10539c(0x453))[_0x10539c(0x488)][_0x10539c(0x62c)](_0x480886=>_0x8fee87['push'](Ks[_0x480886]));let _0x2edf5d=typeof _0x44f419;_0x8fee87[_0x10539c(0x2bf)](_0x54a18c)&&(S[_0x10539c(0x427)]('LOG')[_0x10539c(0x690)]?(console[_0x10539c(0x133)]('\x1b[1m'+Hs[_0x54a18c],_0x10539c(0x4ed),(0x0,ds[_0x10539c(0x164)])()['format'](_0x10539c(0x5ae)),_0x10539c(0x53e),ps[_0x54a18c]+Qs[_0x54a18c]+_0x10539c(0x11b),_0x54a18c+_0x10539c(0x32b),_0x10539c(0x24c),this[_0x10539c(0x4de)]+'\x1b[0m',ps[_0x54a18c],_0x2edf5d!==_0x10539c(0x5a0)?_0x44f419:'',_0x10539c(0x53e)),_0x2edf5d===_0x10539c(0x5a0)&&console[_0x10539c(0x133)](_0x44f419,'\x0a')):console[_0x10539c(0x133)]((0x0,ds[_0x10539c(0x164)])()[_0x10539c(0x116)]('HH:mm:ss'),_0x54a18c+'\x20',''+this[_0x10539c(0x4de)],_0x44f419));}[a0_0x3f352e(0x133)](_0x9c7192){const _0x4a4467=a0_0x3f352e;this[_0x4a4467(0x10b)](_0x9c7192,_0x4a4467(0x453));}['info'](_0x54780e){const _0x4c7b75=a0_0x3f352e;this[_0x4c7b75(0x10b)](_0x54780e,'INFO');}[a0_0x3f352e(0x76b)](_0x340318){const _0x336d3b=a0_0x3f352e;this[_0x336d3b(0x10b)](_0x340318,'WARN');}[a0_0x3f352e(0x4b3)](_0x4a2dde){const _0x45afa5=a0_0x3f352e;this[_0x45afa5(0x10b)](_0x4a2dde,_0x45afa5(0x481));}[a0_0x3f352e(0x72d)](_0x1db1d7){const _0x305702=a0_0x3f352e;this[_0x305702(0x10b)](_0x1db1d7,'VERBOSE');}[a0_0x3f352e(0x2be)](_0xd7cacc){const _0x2f7d8d=a0_0x3f352e;this[_0x2f7d8d(0x10b)](_0xd7cacc,_0x2f7d8d(0x264));}[a0_0x3f352e(0x7b1)](_0x2274dc){const _0x22def8=a0_0x3f352e;this[_0x22def8(0x10b)](_0x2274dc,_0x22def8(0x640));}};function Ys(){const _0x213417=a0_0x3f352e;process['on'](_0x213417(0x3fe),(_0x543893,_0x28118c)=>{const _0x12df74=_0x213417;new $('uncaughtException')[_0x12df74(0x4b3)]({'origin':_0x28118c,'stderr':process[_0x12df74(0x6df)]['fd'],'error':_0x543893});}),process['on']('unhandledRejection',(_0x41f940,_0x2292c2)=>{const _0x50fb38=_0x213417;new $(_0x50fb38(0x538))[_0x50fb38(0x4b3)]({'origin':_0x2292c2,'stderr':process['stderr']['fd'],'error':_0x41f940});});}var Xs=A(require(a0_0x3f352e(0x125))),hs=new Xs[(a0_0x3f352e(0x164))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Se=require(a0_0x3f352e(0x3ef)),Ae=A(require(a0_0x3f352e(0x3ef))),Ge=new $('Db\x20Connection'),F=S[a0_0x3f352e(0x427)](a0_0x3f352e(0x611)),R=F[a0_0x3f352e(0x681)]?F[a0_0x3f352e(0x68c)]['URI']?Ae['default']['createConnection'](F[a0_0x3f352e(0x68c)][a0_0x3f352e(0x2f5)],{'dbName':F[a0_0x3f352e(0x68c)][a0_0x3f352e(0x331)]+a0_0x3f352e(0x599)}):Ae[a0_0x3f352e(0x164)][a0_0x3f352e(0x379)]('mongodb://'+F[a0_0x3f352e(0x68c)]['HOST']+':'+F['CONNECTION'][a0_0x3f352e(0x44a)]+'?authSource=admin&readPreference=primary&directConnection=true',{'user':F[a0_0x3f352e(0x68c)][a0_0x3f352e(0x29e)],'pass':F[a0_0x3f352e(0x68c)][a0_0x3f352e(0x2c4)],'dbName':F[a0_0x3f352e(0x68c)][a0_0x3f352e(0x331)]+a0_0x3f352e(0x599)}):null;F[a0_0x3f352e(0x681)]&&Ge[a0_0x3f352e(0x567)]('ON\x20-\x20dbName:\x20'+R[a0_0x3f352e(0x50c)]);var ce=F[a0_0x3f352e(0x681)]?F[a0_0x3f352e(0x68c)]['URI']?Ae[a0_0x3f352e(0x164)][a0_0x3f352e(0x379)](F['CONNECTION'][a0_0x3f352e(0x2f5)],{'dbName':a0_0x3f352e(0x37a)}):Ae[a0_0x3f352e(0x164)][a0_0x3f352e(0x379)]('mongodb://'+F[a0_0x3f352e(0x68c)][a0_0x3f352e(0x2f9)]+':'+F[a0_0x3f352e(0x68c)][a0_0x3f352e(0x44a)]+a0_0x3f352e(0x3ea),{'user':F['CONNECTION'][a0_0x3f352e(0x29e)],'pass':F[a0_0x3f352e(0x68c)][a0_0x3f352e(0x2c4)],'dbName':a0_0x3f352e(0xf8)}):null;ce&&Ge['info'](a0_0x3f352e(0x1af)+ce[a0_0x3f352e(0x50c)]),process['on'](a0_0x3f352e(0x281),()=>{const _0x30daef=a0_0x3f352e;R&&R[_0x30daef(0x4b2)](()=>{const _0x14d0cd=_0x30daef;Ge['info'](_0x14d0cd(0x5f1));}),ce&&ce[_0x30daef(0x4b2)](()=>{const _0x4d5a4f=_0x30daef;Ge[_0x4d5a4f(0x567)](_0x4d5a4f(0x753));});});var Yi=new Se[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),Xi=new Se[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),Zi=new Se['Schema']({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),eo=new Se[(a0_0x3f352e(0x6d9))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[Yi],'default':[]}},{'_id':!0x1}),to=new Se[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':eo,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':Xi},'groupdata':{'type':Zi,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),Zs=_0x5a4960=>{const _0x9d4bb0=a0_0x3f352e;let _0x15f64d='z_'+_0x5a4960+_0x9d4bb0(0x3e7);return R?.[_0x9d4bb0(0x61e)](_0x9d4bb0(0x303),to,_0x15f64d);},ea=require(a0_0x3f352e(0x3ef)),so=new ea[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ta=_0x384302=>{const _0x29aa05=a0_0x3f352e;let _0x4167f5='z_'+_0x384302+_0x29aa05(0x300);return R?.[_0x29aa05(0x61e)]('ContactModel',so,_0x4167f5);},sa=require(a0_0x3f352e(0x3ef)),gs=class{},ao=new sa[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),aa=ce?.[a0_0x3f352e(0x61e)](gs['name'],ao,a0_0x3f352e(0x657)),ia=require(a0_0x3f352e(0x3ef)),ms=class{},io=new ia['Schema']({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),Be=ce?.['model'](ms['name'],io,'instances'),oa=require(a0_0x3f352e(0x3ef)),oo=new oa[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),ra=_0x1e689a=>{const _0xeb33a0=a0_0x3f352e;let _0x1d4d9f='z_'+_0x1e689a+_0xeb33a0(0x47c);return R?.[_0xeb33a0(0x61e)]('MessageModel',oo,_0x1d4d9f);},na=require(a0_0x3f352e(0x3ef)),fs=class{},ro=new na['Schema']({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),ca=R?.[a0_0x3f352e(0x61e)](fs['name'],ro,a0_0x3f352e(0x29a)),la=require(a0_0x3f352e(0x3ef)),ws=class{},ua=new la[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});ua['pre'](a0_0x3f352e(0x5b5),function(_0x2f2937){const _0x58f8e1=a0_0x3f352e;delete this['flowActive'],delete this['flowIgnoreGroups'],delete this[_0x58f8e1(0x79a)],delete this[_0x58f8e1(0x6af)],delete this[_0x58f8e1(0x272)],_0x2f2937();});var da=R?.[a0_0x3f352e(0x61e)](ws[a0_0x3f352e(0x5f4)],ua,a0_0x3f352e(0x20c)),D=require('mongoose'),ys=require(a0_0x3f352e(0x3bb)),We=class{},bs=class{},ha=new D[(a0_0x3f352e(0x6d9))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Ss=new D['Schema']({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),no=new D[(a0_0x3f352e(0x6d9))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x3f352e(0x7b6)},'footerText':{'type':String},'buttonText':{'type':String,'default':'Selecione'},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':'Esse\x20fluxo\x20expirou'},'pollErrorMessage':{'type':String,'default':'Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.'},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),ga=new D['Schema']({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),co=new D[(a0_0x3f352e(0x6d9))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),lo=new D['Schema']({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Cs=new D[(a0_0x3f352e(0x6d9))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),uo=new D['Schema']({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),ma=new D['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':no},'apirequest':co,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':uo,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),fa=new D[(a0_0x3f352e(0x6d9))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),wa=new D[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[Cs],'blocks':[ma],'groups':[ha],'conditions':[ga],'varedits':[fa],'replyOptions':{'type':[Ss],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x3d6b53=a0_0x3f352e;return'!cmd_'+Math['random']()[_0x3d6b53(0x123)](0x24)[_0x3d6b53(0x4d9)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':'false'},'startID':{'type':String,'default':()=>(0x0,ys['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,ys['v4'])()},'shareOwners':{'type':[String],'default':[]}});wa[a0_0x3f352e(0x3dc)](a0_0x3f352e(0x76e),function(_0x5d9bfb){const _0x1d9fd4=a0_0x3f352e;let _0x2ce763=this['getUpdate']();if(_0x2ce763&&typeof _0x2ce763=='object'&&'$set'in _0x2ce763){let _0x24ffac=_0x2ce763['$set'];if(_0x24ffac){let _0x285c95=new Set(),_0x5d7c1a=new Set(_0x24ffac[_0x1d9fd4(0x25c)]?.[_0x1d9fd4(0xff)](_0x59c6f5=>_0x59c6f5['name'])),_0x3e2e4c=JSON[_0x1d9fd4(0x1bb)](_0x24ffac),_0x2a42c5=/{{(?!_)([^}]*)}}/g,_0x703579;for(;(_0x703579=_0x2a42c5[_0x1d9fd4(0x7d5)](_0x3e2e4c))!==null;)_0x5d7c1a['has'](_0x703579[0x1])||_0x285c95[_0x1d9fd4(0x41a)](_0x703579[0x1]);_0x285c95[_0x1d9fd4(0x58f)]>0x0?(console['warn'](_0x1d9fd4(0x33b),Array[_0x1d9fd4(0x3a3)](_0x285c95)),_0x24ffac[_0x1d9fd4(0x3b1)]=Array[_0x1d9fd4(0x3a3)](_0x285c95)):_0x24ffac[_0x1d9fd4(0x3b1)]=[],this[_0x1d9fd4(0x755)]({'$set':_0x24ffac});}}_0x5d9bfb();});var Me=R?.[a0_0x3f352e(0x61e)](bs[a0_0x3f352e(0x5f4)],wa,a0_0x3f352e(0x1b3)),po=new D[(a0_0x3f352e(0x6d9))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[Cs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[lo]},{'_id':!0x1}),ho=new D[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[Cs],'blocks':[ma],'groups':[ha],'conditions':[ga],'varedits':[fa],'replyOptions':{'type':[Ss],'default':[]},'chatLog':po,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x3f352e(0x6d3)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x3f352e(0x6fa)},'waitingMenu_replyOptions':{'type':[Ss],'default':[]}}),ya=_0x2fcf4e=>{const _0xce20fd=a0_0x3f352e;let _0x3c22a1='z_'+_0x2fcf4e+_0xce20fd(0x59a);return R?.['model'](_0xce20fd(0x176),ho,_0x3c22a1);},go=new D[(a0_0x3f352e(0x6d9))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),pa=new D[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),mo=new D[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[pa],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x3f352e(0x365)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[go],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':pa,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),ba=_0x513f0e=>{const _0x243170=a0_0x3f352e;let _0x5ea3ab='z_'+_0x513f0e+'_ScheduleMessages';return R?.[_0x243170(0x61e)](_0x243170(0x29f),mo,_0x5ea3ab);},Ms=class{},fo=new D[(a0_0x3f352e(0x6d9))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),wo=new D[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),yo=new D[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),bo=new D[(a0_0x3f352e(0x6d9))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':'!stop'},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),So=new D[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),Mo=new D[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[So]},'customFields':{'type':[yo]},'flowConfig':{'type':bo,'default':{}},'flows':{'type':[wo],'default':[]},'autoCompleteMessages':{'type':[fo],'default':[]}}),Ie=R?.[a0_0x3f352e(0x61e)](Ms[a0_0x3f352e(0x5f4)],Mo,'AutomateSystem'),Sa=require(a0_0x3f352e(0x3ef)),Co=new Sa[(a0_0x3f352e(0x6d9))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),Ma=_0x116a39=>{const _0x288616=a0_0x3f352e;let _0x2126a5='z_'+_0x116a39+'_Labels';return R?.[_0x288616(0x61e)](_0x288616(0x130),Co,_0x2126a5);},_=class{constructor(_0x130eaa){const _0x3fdb77=a0_0x3f352e;this[_0x3fdb77(0x13f)]=_0x130eaa['get'](_0x3fdb77(0x611));}};function I(_0xe4add1){const _0x5eeb26=a0_0x3f352e;let _0x4f7710={};for(let [_0x41eac0,_0x5f4e37]of Object[_0x5eeb26(0x37b)](_0xe4add1))if(typeof _0x5f4e37==_0x5eeb26(0x5a0)&&!Array[_0x5eeb26(0xae)](_0x5f4e37)){for(let [_0x53e0bc,_0x1e25c8]of Object[_0x5eeb26(0x37b)](_0x5f4e37))_0x4f7710[_0x41eac0+'.'+_0x53e0bc]=_0x1e25c8;}else _0x4f7710[_0x41eac0]=_0x5f4e37;return _0x4f7710;}var ze=class{constructor(_0x49c67e,_0x298784,_0x2fe8b3,_0x16df02,_0x3237dd,_0x3591af,_0x411a0e,_0x12f160,_0x528a37,_0x1573e2,_0x41fd15,_0x273fe9,_0x3baadb){const _0x3e0170=a0_0x3f352e;this[_0x3e0170(0x499)]=_0x49c67e,this['chat']=_0x298784,this[_0x3e0170(0x4d3)]=_0x2fe8b3,this[_0x3e0170(0x2df)]=_0x16df02,this[_0x3e0170(0x20c)]=_0x3237dd,this[_0x3e0170(0x554)]=_0x3591af,this['instance']=_0x411a0e,this[_0x3e0170(0x2b2)]=_0x12f160,this[_0x3e0170(0x5b0)]=_0x528a37,this[_0x3e0170(0x716)]=_0x1573e2,this[_0x3e0170(0x1c0)]=_0x41fd15,this[_0x3e0170(0x2d3)]=_0x273fe9,this[_0x3e0170(0x200)]=_0x3baadb;}get[a0_0x3f352e(0x4f8)](){const _0x367e8f=a0_0x3f352e;return this[_0x367e8f(0x200)];}},He=class{},Ke=class extends _{[a0_0x3f352e(0x33f)](_0x52c966){return ra(_0x52c966);}async['insert'](_0x1aeee2,_0x246c66){const _0x1ae29e=a0_0x3f352e;if(_0x1aeee2[_0x1ae29e(0x45c)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x1ae29e(0x33f)](_0x246c66)[_0x1ae29e(0x190)]([..._0x1aeee2]))[_0x1ae29e(0x45c)]};}catch(_0x37f194){return _0x37f194;}}async[a0_0x3f352e(0x71f)](_0x4eb51e,_0x5a79c7){const _0x1e382d=a0_0x3f352e;try{let _0x251769=this[_0x1e382d(0x33f)](_0x5a79c7),_0x4db5ac=I(_0x4eb51e[_0x1e382d(0x56d)]);return await _0x251769[_0x1e382d(0x71f)](_0x4db5ac)['sort']({'messageTimestamp':-0x1})['limit'](_0x4eb51e?.['limit']??0x0)[_0x1e382d(0x684)]();}catch{return[];}}async[a0_0x3f352e(0x49b)](_0x215bab,_0x437931){const _0x165dd9=a0_0x3f352e;try{let _0x23fdf2=this[_0x165dd9(0x33f)](_0x437931),_0x47be33=I(_0x215bab['where']);await _0x23fdf2[_0x165dd9(0x3f9)](_0x47be33);}catch(_0x49a2a9){console[_0x165dd9(0x4b3)](_0x49a2a9);}}async[a0_0x3f352e(0x6c1)](_0x21966e,_0x1241b2,_0x3b37f7){const _0x548f50=a0_0x3f352e;try{let _0x5798fb=this[_0x548f50(0x33f)](_0x3b37f7),_0x27df76=I(_0x21966e[_0x548f50(0x56d)]);return await _0x5798fb['findOneAndUpdate'](_0x27df76,{'$set':_0x1241b2},{'new':!0x0});}catch(_0x5cb86f){throw console[_0x548f50(0x4b3)](_0x5cb86f),_0x5cb86f;}}async['insertMany'](_0x28b347,_0x113d99){const _0x2c2e9b=a0_0x3f352e;if(_0x28b347['length']===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x2c2e9b(0x33f)](_0x113d99)['insertMany']([..._0x28b347]))[_0x2c2e9b(0x45c)]};}catch(_0xb1df4d){return console[_0x2c2e9b(0x133)](_0x2c2e9b(0x77a),_0xb1df4d),_0xb1df4d;}}async[a0_0x3f352e(0x695)](_0x4c770a){const _0x2eca07=a0_0x3f352e;try{return await this[_0x2eca07(0x33f)](_0x4c770a)['collection']['drop'](),{'success':!0x0};}catch(_0x3329c8){return console['error'](_0x3329c8),{'success':!0x1,'error':_0x3329c8};}}},_s=A(require(a0_0x3f352e(0x6fc))),w=A(require(a0_0x3f352e(0x7e7))),Le=require('fs'),U=A(require(a0_0x3f352e(0x17a))),Y=A(require(a0_0x3f352e(0x27f))),Ai=require('uuid'),Ii=A(require('qrcode')),Ti=A(require(a0_0x3f352e(0x783))),Ca=[a0_0x3f352e(0x50d),a0_0x3f352e(0x746),a0_0x3f352e(0x6bb),a0_0x3f352e(0x2b7),a0_0x3f352e(0x52a)],Ea=['ephemeralMessage','documentWithCaptionMessage',a0_0x3f352e(0x415),a0_0x3f352e(0x346)],xs=require('os'),Ut=A(require(a0_0x3f352e(0x576))),Fe=require(a0_0x3f352e(0x2f3)),Oi=require('node-mime-types'),he=A(require(a0_0x3f352e(0x3ef))),k=require('class-validator'),le=class{constructor(_0x5906c9,_0x271fae,_0x416ec3){const _0x361e94=a0_0x3f352e;this['jid']=_0x5906c9,this[_0x361e94(0x5af)]=_0x271fae,this[_0x361e94(0x5f4)]=_0x416ec3;}},Qe=class{},Ye=class{},Te=class{},Xe=class{},Ze=class{},Ce=class{},et=class{},tt=class{},st=class{},at=class{},xt=A(require(a0_0x3f352e(0x5b1))),va=require('fs'),Na=require(a0_0x3f352e(0x17a));async function Oe(_0x166aee){const _0x125fa6=a0_0x3f352e;let _0x430de9=G['waInstances'][_0x166aee];if(F[_0x125fa6(0x681)]){let _0x2023ac=R[_0x125fa6(0x4b1)]()['db'](F['CONNECTION'][_0x125fa6(0x331)]+_0x125fa6(0x2ab))[_0x125fa6(0x48b)](_0x166aee);return _0x430de9||(await _0x2023ac[_0x125fa6(0x71f)]({})[_0x125fa6(0x728)]())[_0x125fa6(0x45c)]>0x0;}return _0x430de9||(0x0,va[_0x125fa6(0x735)])((0x0,Na[_0x125fa6(0x348)])(be,_0x166aee));}async function $a(_0x2685c0,_0x2b488b,_0xa46fd6){const _0x4ac1ae=a0_0x3f352e;if(_0x2685c0[_0x4ac1ae(0x3e5)][_0x4ac1ae(0x2bf)]('/instance/create')||_0x2685c0[_0x4ac1ae(0x3e5)][_0x4ac1ae(0x2bf)]('/instance/fetchInstances')||_0x2685c0[_0x4ac1ae(0x3e5)][_0x4ac1ae(0x2bf)](_0x4ac1ae(0x20a))||_0x2685c0[_0x4ac1ae(0x3e5)]['includes']('/config')||_0x2685c0[_0x4ac1ae(0x3e5)][_0x4ac1ae(0x2bf)](_0x4ac1ae(0x6b5))||_0x2685c0['originalUrl'][_0x4ac1ae(0x2bf)](_0x4ac1ae(0x27b))||_0x2685c0[_0x4ac1ae(0x3e5)]['includes'](_0x4ac1ae(0x1b4)))return _0xa46fd6();let _0x46678e=_0x2685c0[_0x4ac1ae(0x3e1)];if(!_0x46678e?.[_0x4ac1ae(0x78b)])throw new m('instanceName\x20not\x20provided.');if(!await Oe(_0x46678e[_0x4ac1ae(0x78b)]))throw new j(_0x4ac1ae(0x180)+_0x46678e[_0x4ac1ae(0x78b)]+_0x4ac1ae(0x1f6));_0xa46fd6();}async function Ra(_0x27ceca,_0xef742b,_0x1b6058){const _0x491a0d=a0_0x3f352e;if(_0x27ceca['originalUrl']['includes'](_0x491a0d(0x1bc))){let _0x540ca2=_0x27ceca[_0x491a0d(0x6a4)];if(await Oe(_0x540ca2[_0x491a0d(0x78b)]))throw new Z(_0x491a0d(0x61c)+_0x540ca2['instanceName']+_0x491a0d(0x6ad));G['waInstances'][_0x540ca2[_0x491a0d(0x78b)]]&&delete G[_0x491a0d(0x39e)][_0x540ca2[_0x491a0d(0x78b)]];}_0x1b6058();}var Aa=require(a0_0x3f352e(0x5a6)),Ia=A(require(a0_0x3f352e(0x21e))),it=a0_0x3f352e(0x7e9),vo=new $(a0_0x3f352e(0x4f3));async function No(_0x5b5bbb,_0x5799bd,_0x1bd43b){const _0xc0bd88=a0_0x3f352e;let _0xced792=_0x5b5bbb[_0xc0bd88(0x427)]('apikey');if(_0xced792&&S[_0xc0bd88(0x427)]('AUTHENTICATION')['API_KEY']['KEY']!==_0xced792)throw new oe();if(S[_0xc0bd88(0x427)](_0xc0bd88(0xdc))['API_KEY'][_0xc0bd88(0x785)]===_0xced792)return _0x1bd43b();if((_0x5b5bbb[_0xc0bd88(0x3e5)][_0xc0bd88(0x2bf)]('/instance/create')||_0x5b5bbb['originalUrl'][_0xc0bd88(0x2bf)](_0xc0bd88(0x2a9)))&&!_0xced792)throw new Z(_0xc0bd88(0x405),_0xc0bd88(0x5ac));let _0xb00c5b=S[_0xc0bd88(0x427)](_0xc0bd88(0xdc))['JWT'];try{let [_0x43ac04,_0x278df0]=_0x5b5bbb[_0xc0bd88(0x427)](_0xc0bd88(0x6f9))['split']('\x20');if(_0x43ac04['toLowerCase']()!=='bearer')throw new oe();if(!(0x0,Aa['isJWT'])(_0x278df0))throw new oe();let _0x142d2a=_0x5b5bbb['params'],_0x259614=Ia[_0xc0bd88(0x164)]['verify'](_0x278df0,_0xb00c5b[_0xc0bd88(0x6aa)],{'ignoreExpiration':_0xb00c5b[_0xc0bd88(0x4c7)]===0x0});if(_0x142d2a['instanceName']!==_0x259614[_0xc0bd88(0x78b)]||it!==_0x259614[_0xc0bd88(0x65d)])throw new oe();return _0x1bd43b();}catch(_0x1a37df){throw vo['error'](_0x1a37df),new oe();}}async function $o(_0x106db4,_0x1514b7,_0x3fbe5b){const _0x25a02d=a0_0x3f352e;let _0x49eaf6=S[_0x25a02d(0x427)]('AUTHENTICATION')[_0x25a02d(0xa9)],_0x37a9ba=_0x106db4[_0x25a02d(0x427)](_0x25a02d(0x6dc));if(_0x49eaf6[_0x25a02d(0x785)]===_0x37a9ba)return _0x3fbe5b();if(_0x106db4[_0x25a02d(0x3e5)]['includes'](_0x25a02d(0x1bc))){let _0x3a67a0=Oa,_0x3053aa=_0x106db4['body'][_0x25a02d(0x78b)];if(_0x3a67a0&&_0x3053aa[_0x25a02d(0x711)]()[_0x25a02d(0x77f)](_0x3a67a0[_0x25a02d(0x711)]()))return _0x3fbe5b();if(!_0x37a9ba)throw new Z(_0x25a02d(0x405),'The\x20global\x20api\x20key\x20must\x20be\x20set');}if(_0x106db4[_0x25a02d(0x3e5)]['includes'](_0x25a02d(0x2a9))&&!_0x37a9ba)throw new Z(_0x25a02d(0x405),_0x25a02d(0x5ac));if(_0x106db4['originalUrl']['includes'](_0x25a02d(0x20a))&&!_0x37a9ba)throw new Z('Missing\x20global\x20api\x20key',_0x25a02d(0x5ac));if(_0x106db4[_0x25a02d(0x3e5)][_0x25a02d(0x2bf)]('/config')&&!_0x37a9ba)throw new Z(_0x25a02d(0x405),_0x25a02d(0x5ac));try{let _0xfa993b=_0x106db4['params'],_0x531611=await me['auth']['find'](_0xfa993b[_0x25a02d(0x78b)]);if(_0x531611&&_0x531611[_0x25a02d(0x6dc)]===_0x37a9ba)return _0x3fbe5b();}catch{}throw new oe();}var Ta={'jwt':No,'apikey':$o},di=require('express'),E=require(a0_0x3f352e(0x3bb)),C=(..._0x1c2b73)=>{const _0x872fb4=a0_0x3f352e;let _0xef6b4e={};return _0x1c2b73[_0x872fb4(0x62c)](_0x5c17d4=>_0xef6b4e[_0x5c17d4]={'minLength':0x1,'description':'The\x20\x22'+_0x5c17d4+'\x22\x20cannot\x20be\x20empty'}),{'if':{'propertyNames':{'enum':[..._0x1c2b73]}},'then':{'properties':_0xef6b4e}};},v={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'instanceName':{'type':a0_0x3f352e(0x6e4)}},...C(a0_0x3f352e(0x78b))},mc={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'oldToken':{'type':a0_0x3f352e(0x6e4)}},'required':['oldToken'],...C(a0_0x3f352e(0x2a6))},fc={'properties':{'key':{'type':a0_0x3f352e(0x5a0),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x3f352e(0x6e4)},'fromMe':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]}},'required':['id',a0_0x3f352e(0x183),a0_0x3f352e(0x5cf)],...C('id',a0_0x3f352e(0x183))},'message':{'type':a0_0x3f352e(0x5a0)}}},ee={'properties':{'delay':{'type':a0_0x3f352e(0x46e),'description':a0_0x3f352e(0x652)},'presence':{'type':'string','enum':[a0_0x3f352e(0x19e),a0_0x3f352e(0x701),a0_0x3f352e(0x709),a0_0x3f352e(0x366),'paused']}}},K={'type':a0_0x3f352e(0x6e4),'description':a0_0x3f352e(0x10e)},_a={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...K},'options':{...ee},'textMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'text':{'type':a0_0x3f352e(0x6e4)}},'required':[a0_0x3f352e(0x21b)],...C(a0_0x3f352e(0x21b))}},'required':[a0_0x3f352e(0x197),a0_0x3f352e(0x596)]},xa={'type':a0_0x3f352e(0x6e4),'pattern':a0_0x3f352e(0x479),'description':a0_0x3f352e(0x10e)},wc={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'number':{...xa},'options':{...ee},'textMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'text':{'type':'string'}},'required':[a0_0x3f352e(0x21b)],...C(a0_0x3f352e(0x21b))}},'required':[a0_0x3f352e(0x197),'number']},yc={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'number':{...xa},'options':{...ee},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':'string','enum':['image',a0_0x3f352e(0x28d),a0_0x3f352e(0x69a),a0_0x3f352e(0x185)]},'media':{'type':a0_0x3f352e(0x6e4)},'fileName':{'type':'string'},'caption':{'type':a0_0x3f352e(0x6e4)}},'required':[a0_0x3f352e(0x220),a0_0x3f352e(0x207)],...C(a0_0x3f352e(0x241),a0_0x3f352e(0x2ae),a0_0x3f352e(0x207))}},'required':['mediaMessage',a0_0x3f352e(0x596)]},Da={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...K},'options':{...ee},'stickerMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'image':{'type':'string'}},'required':[a0_0x3f352e(0x763)],...C(a0_0x3f352e(0x763))}},'required':[a0_0x3f352e(0x52a),a0_0x3f352e(0x596)]},Pa={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'statusMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'type':{'type':a0_0x3f352e(0x6e4),'enum':['text',a0_0x3f352e(0x763),a0_0x3f352e(0x185),a0_0x3f352e(0x69a)]},'content':{'type':'string'},'caption':{'type':a0_0x3f352e(0x6e4)},'backgroundColor':{'type':'string'},'font':{'type':a0_0x3f352e(0x46e),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x3f352e(0x6ea),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':a0_0x3f352e(0x530),'description':a0_0x3f352e(0x459)}},'allContacts':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]}},'required':[a0_0x3f352e(0x6d7),'content'],...C('type',a0_0x3f352e(0x7d8))}},'required':['statusMessage']},ka={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'number':{...K},'options':{...ee},'mediaMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'mediatype':{'type':a0_0x3f352e(0x6e4),'enum':[a0_0x3f352e(0x763),a0_0x3f352e(0x28d),a0_0x3f352e(0x69a),a0_0x3f352e(0x185)]},'media':{'type':a0_0x3f352e(0x6e4)},'fileName':{'type':'string'},'caption':{'type':a0_0x3f352e(0x6e4)}},'required':[a0_0x3f352e(0x220),a0_0x3f352e(0x207)],...C(a0_0x3f352e(0x241),a0_0x3f352e(0x2ae),a0_0x3f352e(0x207))}},'required':[a0_0x3f352e(0x582),'number']},La={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'number':{...K},'options':{...ee},'audioMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'audio':{'type':'string'}},'required':[a0_0x3f352e(0x185)],...C(a0_0x3f352e(0x185))}},'required':[a0_0x3f352e(0x6bb),a0_0x3f352e(0x596)]},Fa={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'number':{...K},'pollMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'name':{'type':a0_0x3f352e(0x6e4)},'selectableCount':{'type':a0_0x3f352e(0x596)},'values':{'type':'array','minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x3f352e(0x5f4),'selectableCount',a0_0x3f352e(0x514)],...C(a0_0x3f352e(0x5f4),a0_0x3f352e(0x2a0),a0_0x3f352e(0x514))}},'required':[a0_0x3f352e(0x596),a0_0x3f352e(0xe4)]},Ua={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'number':{...K},'menuMessage':{'type':'object','properties':{'text':{'type':'string'},'choices':{'type':a0_0x3f352e(0x6ea),'minItems':0x2,'uniqueItems':!0x0}},'required':['text','choices'],...C(a0_0x3f352e(0x21b),a0_0x3f352e(0x4e3))}},'required':[a0_0x3f352e(0x596),a0_0x3f352e(0x717)]},ja={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...K},'options':{...ee},'buttonMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'title':{'type':a0_0x3f352e(0x6e4)},'description':{'type':'string'},'footerText':{'type':a0_0x3f352e(0x6e4)},'buttons':{'type':a0_0x3f352e(0x6ea),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'buttonText':{'type':a0_0x3f352e(0x6e4)},'buttonId':{'type':a0_0x3f352e(0x6e4)}},'required':[a0_0x3f352e(0x6ce),a0_0x3f352e(0x7e6)],...C('buttonText','buttonId')}},'mediaMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'media':{'type':'string'},'fileName':{'type':a0_0x3f352e(0x6e4)},'mediatype':{'type':a0_0x3f352e(0x6e4),'enum':[a0_0x3f352e(0x763),a0_0x3f352e(0x28d),'video']}},'required':['media',a0_0x3f352e(0x220)],...C(a0_0x3f352e(0x207),a0_0x3f352e(0x241))}},'required':[a0_0x3f352e(0x2dc),a0_0x3f352e(0x1a2)],...C(a0_0x3f352e(0x2dc),a0_0x3f352e(0x131))}},'required':[a0_0x3f352e(0x596),'buttonMessage']},Ja={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'number':{...K},'options':{...ee},'locationMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'latitude':{'type':a0_0x3f352e(0x596)},'longitude':{'type':'number'},'name':{'type':a0_0x3f352e(0x6e4)},'address':{'type':a0_0x3f352e(0x6e4)}},'required':[a0_0x3f352e(0x2d2),a0_0x3f352e(0x1d8)],...C(a0_0x3f352e(0x5f4),a0_0x3f352e(0x6a6))}},'required':['number',a0_0x3f352e(0x3a9)]},qa={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'number':{...K},'options':{...ee},'listMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'title':{'type':a0_0x3f352e(0x6e4)},'description':{'type':'string'},'footerText':{'type':a0_0x3f352e(0x6e4)},'buttonText':{'type':a0_0x3f352e(0x6e4)},'sections':{'type':a0_0x3f352e(0x6ea),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3f352e(0x5a0),'properties':{'title':{'type':a0_0x3f352e(0x6e4)},'rows':{'type':a0_0x3f352e(0x6ea),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3f352e(0x5a0),'properties':{'title':{'type':a0_0x3f352e(0x6e4)},'description':{'type':'string'},'rowId':{'type':'string'}},'required':[a0_0x3f352e(0x2dc),a0_0x3f352e(0x1fc)],...C(a0_0x3f352e(0x2dc),a0_0x3f352e(0x1fc))}}},'required':['title','rows'],...C(a0_0x3f352e(0x2dc))}}},'required':[a0_0x3f352e(0x2dc),'description','buttonText',a0_0x3f352e(0x1b2)],...C(a0_0x3f352e(0x2dc),a0_0x3f352e(0x131),a0_0x3f352e(0x6ce),a0_0x3f352e(0x656))}},'required':[a0_0x3f352e(0x596),a0_0x3f352e(0x6cf)]},Va={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'number':{...K},'options':{...ee},'contactMessage':{'type':a0_0x3f352e(0x6ea),'items':{'type':a0_0x3f352e(0x5a0),'properties':{'fullName':{'type':'string'},'phoneNumber':{'type':a0_0x3f352e(0x6e4),'minLength':0xa}},'required':[a0_0x3f352e(0x627),a0_0x3f352e(0x46a)],...C(a0_0x3f352e(0x627))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x3f352e(0x596),a0_0x3f352e(0x1fa)]},Ga={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'reactionMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'key':{'type':'object','properties':{'id':{'type':a0_0x3f352e(0x6e4)},'remoteJid':{'type':a0_0x3f352e(0x6e4)},'fromMe':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]}},'required':['id',a0_0x3f352e(0x183),a0_0x3f352e(0x5cf)],...C('id',a0_0x3f352e(0x183))},'reaction':{'type':a0_0x3f352e(0x6e4)}},'required':[a0_0x3f352e(0x2bb),a0_0x3f352e(0x4e5)],...C('reaction')}},'required':[a0_0x3f352e(0x757)]},Ba={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'numbers':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3f352e(0x6e4),'pattern':a0_0x3f352e(0x530),'description':'\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}}},Wa={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'readMessages':{'type':a0_0x3f352e(0x6ea),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x3f352e(0x6e4)},'fromMe':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x3f352e(0x6e4)}},'required':['id',a0_0x3f352e(0x5cf),'remoteJid'],...C('id',a0_0x3f352e(0x183))}}},'required':[a0_0x3f352e(0x4e4)]},za={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'privacySettings':{'type':a0_0x3f352e(0x5a0),'properties':{'readreceipts':{'type':'string','enum':['all',a0_0x3f352e(0x43a)]},'profile':{'type':a0_0x3f352e(0x6e4),'enum':['all',a0_0x3f352e(0x643),a0_0x3f352e(0xbc),a0_0x3f352e(0x43a)]},'status':{'type':'string','enum':[a0_0x3f352e(0x7c7),'contacts',a0_0x3f352e(0xbc),'none']},'online':{'type':'string','enum':['all',a0_0x3f352e(0x273)]},'last':{'type':'string','enum':[a0_0x3f352e(0x7c7),a0_0x3f352e(0x643),a0_0x3f352e(0xbc),a0_0x3f352e(0x43a)]},'groupadd':{'type':a0_0x3f352e(0x6e4),'enum':[a0_0x3f352e(0x7c7),'contacts',a0_0x3f352e(0xbc),a0_0x3f352e(0x43a)]}},'required':[a0_0x3f352e(0xd6),'profile',a0_0x3f352e(0x62a),'online',a0_0x3f352e(0x332),a0_0x3f352e(0x16b)],...C(a0_0x3f352e(0xd6),a0_0x3f352e(0x779),a0_0x3f352e(0x62a),a0_0x3f352e(0x630),a0_0x3f352e(0x332),a0_0x3f352e(0x16b))}},'required':['privacySettings']},Ha={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'lastMessage':{'type':a0_0x3f352e(0x5a0),'properties':{'key':{'type':a0_0x3f352e(0x5a0),'properties':{'id':{'type':a0_0x3f352e(0x6e4)},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]}},'required':['id','fromMe',a0_0x3f352e(0x183)],...C('id',a0_0x3f352e(0x183))},'messageTimestamp':{'type':a0_0x3f352e(0x46e),'minLength':0x1}},'required':[a0_0x3f352e(0x2bb)],...C('messageTimestamp')},'archive':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]}},'required':[a0_0x3f352e(0x1c4),'archive']},Ka={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'id':{'type':'string'},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x3f352e(0x6e4)},'participant':{'type':a0_0x3f352e(0x6e4)}},'required':['id',a0_0x3f352e(0x5cf),a0_0x3f352e(0x183)],...C('id','remoteJid','participant')},Qa={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x3f352e(0x6e4),'minLength':0x1},'pushName':{'type':'string','minLength':0x1},'id':{'type':a0_0x3f352e(0x6e4),'minLength':0x1}},...C('_id','id',a0_0x3f352e(0x22a))}}},Ya={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'name':{'type':a0_0x3f352e(0x6e4)}},...C(a0_0x3f352e(0x5f4))},Xa={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'status':{'type':a0_0x3f352e(0x6e4)}},...C(a0_0x3f352e(0x62a))},_e={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'number':{'type':a0_0x3f352e(0x6e4)},'picture':{'type':'string'}}},Za={'type':a0_0x3f352e(0x5a0),'properties':{'wuid':{'type':'string'},'name':{'type':a0_0x3f352e(0x6e4)},'picture':{'type':a0_0x3f352e(0x6e4)},'status':{'type':a0_0x3f352e(0x6e4)},'isBusiness':{'type':a0_0x3f352e(0x2b3)}}},ei={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'where':{'type':'object','properties':{'_id':{'type':'string','minLength':0x1},'key':{'type':a0_0x3f352e(0x5a0),'if':{'propertyNames':{'enum':[a0_0x3f352e(0x5cf),a0_0x3f352e(0x183),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x3f352e(0x6e4),'minLength':0x1,'description':a0_0x3f352e(0x70d)},'id':{'type':a0_0x3f352e(0x6e4),'minLength':0x1,'description':a0_0x3f352e(0x70d)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x3f352e(0x5a0)}},...C(a0_0x3f352e(0x68d))},'limit':{'type':a0_0x3f352e(0x46e)}}},bc={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'where':{'type':a0_0x3f352e(0x5a0),'properties':{'_id':{'type':a0_0x3f352e(0x6e4)},'remoteJid':{'type':a0_0x3f352e(0x6e4)},'id':{'type':'string'},'fromMe':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x3f352e(0x6e4)},'status':{'type':a0_0x3f352e(0x6e4),'enum':[a0_0x3f352e(0x481),a0_0x3f352e(0x3c2),'SERVER_ACK',a0_0x3f352e(0x1fe),a0_0x3f352e(0x573),a0_0x3f352e(0x492)]}},...C('_id','remoteJid','id',a0_0x3f352e(0x62a))},'limit':{'type':a0_0x3f352e(0x46e)}}},ti={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'number':{...K},'presence':{'type':'string','enum':[a0_0x3f352e(0x19e),a0_0x3f352e(0x701),a0_0x3f352e(0x709),a0_0x3f352e(0x366),a0_0x3f352e(0x475)]}},'required':[a0_0x3f352e(0x28b),a0_0x3f352e(0x596)]},si={'$id':(0x0,E['v4'])(),'type':'object','properties':{'subject':{'type':'string'},'description':{'type':'string'},'profilePicture':{'type':a0_0x3f352e(0x6e4)},'participants':{'type':a0_0x3f352e(0x6ea),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':a0_0x3f352e(0x119),'description':a0_0x3f352e(0x271)}}},'required':['subject',a0_0x3f352e(0x6b7)],...C(a0_0x3f352e(0x507),a0_0x3f352e(0x131),a0_0x3f352e(0x1ee))},xe={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'groupJid':{'type':a0_0x3f352e(0x6e4),'pattern':a0_0x3f352e(0x1de)}},'required':[a0_0x3f352e(0x7df)],...C(a0_0x3f352e(0x7df))},ai={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'groupJid':{'type':a0_0x3f352e(0x6e4)},'action':{'type':'string','enum':['add',a0_0x3f352e(0xab),a0_0x3f352e(0x67b),a0_0x3f352e(0x439),a0_0x3f352e(0x65b),a0_0x3f352e(0x676)]},'participants':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3f352e(0x6e4),'minLength':0xa,'pattern':'\x5cd+','description':'\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}},'required':[a0_0x3f352e(0x7df),a0_0x3f352e(0x5c7),a0_0x3f352e(0x6b7)],...C(a0_0x3f352e(0x7df),a0_0x3f352e(0x5c7))},ii={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'groupJid':{'type':a0_0x3f352e(0x6e4)},'expiration':{'type':a0_0x3f352e(0x596),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':['groupJid',a0_0x3f352e(0x5f3)],...C(a0_0x3f352e(0x7df),a0_0x3f352e(0x5f3))},oi={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x3f352e(0x6e4)},'image':{'type':a0_0x3f352e(0x6e4)}},'required':[a0_0x3f352e(0x7df),a0_0x3f352e(0x763)],...C('groupJid','image')},ri={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'groupJid':{'type':'string'},'description':{'type':a0_0x3f352e(0x6e4)}},'required':[a0_0x3f352e(0x7df),a0_0x3f352e(0x131)],...C(a0_0x3f352e(0x7df),'description')},ni={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'groupJid':{'type':a0_0x3f352e(0x6e4)},'name':{'type':a0_0x3f352e(0x6e4)}},'required':[a0_0x3f352e(0x7df),a0_0x3f352e(0x5f4)],...C(a0_0x3f352e(0x7df),a0_0x3f352e(0x5f4))},ci={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x3f352e(0x6e4)},'setting':{'type':a0_0x3f352e(0x6e4),'enum':[a0_0x3f352e(0x213),a0_0x3f352e(0x254),a0_0x3f352e(0x19d),a0_0x3f352e(0x570)]}},'required':['groupJid',a0_0x3f352e(0x78d)],...C(a0_0x3f352e(0x7df),'setting')},li={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'restrict':{'type':'boolean'},'announce':{'type':'boolean'},'memberAddMode':{'type':a0_0x3f352e(0x2b3)},'joinApprovalMode':{'type':'boolean'},'expiration':{'type':a0_0x3f352e(0x46e),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':'string'},'description':{'type':a0_0x3f352e(0x6e4)},'image':{'type':'string'}}},Es={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'inviteCode':{'type':a0_0x3f352e(0x6e4)}},'required':[a0_0x3f352e(0x1b6)],...C(a0_0x3f352e(0x1b6))},ui={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'url':{'type':'string'},'enabled':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]}},'required':[a0_0x3f352e(0x163),a0_0x3f352e(0x167)]},Sc={'$id':(0x0,E['v4'])(),'type':a0_0x3f352e(0x5a0),'properties':{'local_map':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x3f352e(0x2b3),'enum':[!0x0,!0x1]}},'required':[a0_0x3f352e(0x395),a0_0x3f352e(0x1dc),'QRCODE_UPDATED',a0_0x3f352e(0x430),a0_0x3f352e(0x63e),'MESSAGES_UPSERT',a0_0x3f352e(0x266),a0_0x3f352e(0x523),a0_0x3f352e(0x798),a0_0x3f352e(0x2d4),'PRESENCE_UPDATE',a0_0x3f352e(0x1d3),a0_0x3f352e(0x361),a0_0x3f352e(0x55e),a0_0x3f352e(0x510),a0_0x3f352e(0x2d6),a0_0x3f352e(0x77c),a0_0x3f352e(0x244),a0_0x3f352e(0x11e)],...C(a0_0x3f352e(0x395),a0_0x3f352e(0x1dc),'QRCODE_UPDATED','MESSAGES_SET',a0_0x3f352e(0x63e),a0_0x3f352e(0x451),a0_0x3f352e(0x266),a0_0x3f352e(0x523),a0_0x3f352e(0x798),'CONTACTS_UPDATE','PRESENCE_UPDATE',a0_0x3f352e(0x1d3),'CHATS_UPSERT',a0_0x3f352e(0x55e),a0_0x3f352e(0x510),a0_0x3f352e(0x2d6),a0_0x3f352e(0x77c),a0_0x3f352e(0x244),a0_0x3f352e(0x11e))},ot=class{},rt=class extends _{['getContactModelForOwner'](_0x4de212){return ta(_0x4de212);}async['insert'](_0x178e37){const _0x57197c=a0_0x3f352e;if(_0x178e37['length']!==0x0)try{return{'insertCount':(await this[_0x57197c(0x6be)](_0x178e37[0x0][_0x57197c(0x19a)])[_0x57197c(0x190)]([..._0x178e37]))[_0x57197c(0x45c)]};}catch(_0x1a874b){return _0x1a874b;}}async[a0_0x3f352e(0x49b)](_0x82c4be,_0x33e30d){const _0x496cc1=a0_0x3f352e;try{return{'deletedCount':(await this['getContactModelForOwner'](_0x33e30d)['deleteMany']({..._0x82c4be[_0x496cc1(0x56d)]}))[_0x496cc1(0x329)]};}catch(_0xdb0456){return{'error':_0xdb0456?.[_0x496cc1(0x123)]()};}}async[a0_0x3f352e(0x6c1)](_0x5d7818,_0x3f204b){const _0x3b4a57=a0_0x3f352e;try{if(_0x5d7818[_0x3b4a57(0x45c)]===0x0)return;let _0x5cb6e1=this[_0x3b4a57(0x6be)](_0x3f204b),_0x117541=_0x5d7818[_0x3b4a57(0xff)](_0x2588da=>({'updateOne':{'filter':{'_id':_0x2588da[_0x3b4a57(0x68d)],'owner':_0x3f204b},'update':{..._0x2588da}}})),{modifiedCount:_0x325c47}=await _0x5cb6e1[_0x3b4a57(0x48e)](_0x117541);return{'insertCount':_0x325c47};}catch{return;}}async[a0_0x3f352e(0x71f)](_0x400748,_0x37d6d9){const _0x3d37d5=a0_0x3f352e;try{let _0x3d09ad=this[_0x3d37d5(0x6be)](_0x37d6d9),_0x2b9307=I(_0x400748[_0x3d37d5(0x56d)]);return await _0x3d09ad[_0x3d37d5(0x71f)](_0x2b9307)[_0x3d37d5(0x518)](_0x400748?.['limit']??0x0)[_0x3d37d5(0x684)]();}catch{return[];}}async[a0_0x3f352e(0x312)](_0x2ab4d6,_0x53de76){const _0x58c17a=a0_0x3f352e;try{let _0x174e09=this[_0x58c17a(0x6be)](_0x53de76),_0x1f36bf=I(_0x2ab4d6['where']);return await _0x174e09[_0x58c17a(0x312)](_0x1f36bf)[_0x58c17a(0x684)]();}catch{return null;}}async[a0_0x3f352e(0x695)](_0x3e7909){const _0x411e39=a0_0x3f352e;try{return await this[_0x411e39(0x6be)](_0x3e7909)['collection'][_0x411e39(0x4f0)](),{'success':!0x0};}catch(_0x218599){return console['error'](_0x218599),{'success':!0x1,'error':_0x218599};}}},nt=require(a0_0x3f352e(0x5e1)),Ic=require('express-async-errors'),vs=new $(a0_0x3f352e(0x20d)),V=class{['routerPath'](_0x4a25aa,_0x5f057e=!0x0){const _0x25e321=a0_0x3f352e;let _0x3bfb41='/'+_0x4a25aa;return _0x5f057e&&(_0x3bfb41+=_0x25e321(0x3e0)),_0x3bfb41;}async[a0_0x3f352e(0x6b0)](_0x347a93){const _0x11d484=a0_0x3f352e;let {request:_0x185800,schema:_0x530fde,ClassRef:_0x27e02b,execute:_0x42e2eb}=_0x347a93,_0x440d53=new _0x27e02b(),_0x5ac08e=_0x185800['body'],_0x37fd0f=_0x185800[_0x11d484(0x3e1)];_0x185800?.[_0x11d484(0x175)]&&Object[_0x11d484(0x75c)](_0x185800['query'])[_0x11d484(0x45c)]>0x0&&Object[_0x11d484(0x4ce)](_0x37fd0f,_0x185800[_0x11d484(0x175)]),_0x185800[_0x11d484(0x3e5)][_0x11d484(0x2bf)]('/instance/create')&&Object[_0x11d484(0x4ce)](_0x37fd0f,_0x5ac08e),Object['assign'](_0x440d53,_0x5ac08e);let _0x20ca92=_0x530fde?(0x0,nt[_0x11d484(0x109)])(_0x440d53,_0x530fde):{'valid':!0x0,'errors':[]};if(!_0x20ca92[_0x11d484(0x3a7)]){let _0x1e550c=_0x20ca92[_0x11d484(0x633)][_0x11d484(0xff)](({property:_0x2eb169,stack:_0x590960,schema:_0x4d0b14})=>{const _0x40ba51=_0x11d484;let _0x5a485d;return _0x4d0b14[_0x40ba51(0x131)]?_0x5a485d=_0x4d0b14[_0x40ba51(0x131)]:_0x5a485d=_0x590960[_0x40ba51(0x166)]('instance.',''),{'property':_0x2eb169[_0x40ba51(0x166)]('instance.',''),'message':_0x5a485d};});throw vs['error']([..._0x1e550c]),new m(..._0x1e550c);}return await _0x42e2eb(_0x37fd0f,_0x440d53);}async['groupValidate'](_0x4e7013){const _0x408743=a0_0x3f352e;let {request:_0x461934,ClassRef:_0x423230,schema:_0x48e17e,execute:_0x5448e8}=_0x4e7013,_0x5f4ab3=_0x461934['query'];if(!_0x5f4ab3?.['groupJid'])throw new m(_0x408743(0x13a),_0x408743(0x513));let _0xba131a=_0x461934['params'],_0x61dc89=_0x461934[_0x408743(0x6a4)],_0xf6cc7a=new _0x423230();Object[_0x408743(0x4ce)](_0x61dc89,_0x5f4ab3),Object[_0x408743(0x4ce)](_0xf6cc7a,_0x61dc89);let _0x5e28a9=(0x0,nt[_0x408743(0x109)])(_0xf6cc7a,_0x48e17e);if(!_0x5e28a9[_0x408743(0x3a7)]){let _0x268df4=_0x5e28a9[_0x408743(0x633)][_0x408743(0xff)](({property:_0x584d9a,stack:_0x9995bc,schema:_0x1a6704})=>{const _0x5f5484=_0x408743;let _0x3106be;return _0x1a6704['description']?_0x3106be=_0x1a6704[_0x5f5484(0x131)]:_0x3106be=_0x9995bc['replace'](_0x5f5484(0x661),''),{'property':_0x584d9a['replace'](_0x5f5484(0x661),''),'message':_0x3106be};});throw vs['error']([..._0x268df4]),new m(..._0x268df4);}return await _0x5448e8(_0xba131a,_0xf6cc7a);}async[a0_0x3f352e(0x374)](_0x16f94a){const _0x377e74=a0_0x3f352e;let {request:_0x3987ca,ClassRef:_0x14ec51,schema:_0x40d52f,execute:_0x19b50e}=_0x16f94a,_0x2b22b5=_0x3987ca['body'];if(!_0x2b22b5?.['inviteCode'])throw new m('The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body',_0x377e74(0x39b));let _0x5d42f4=_0x3987ca[_0x377e74(0x3e1)],_0x289fc4=_0x3987ca['body'],_0x571f80=new _0x14ec51();Object[_0x377e74(0x4ce)](_0x289fc4,_0x2b22b5),Object[_0x377e74(0x4ce)](_0x571f80,_0x289fc4);let _0x5644f7=(0x0,nt[_0x377e74(0x109)])(_0x571f80,_0x40d52f);if(!_0x5644f7[_0x377e74(0x3a7)]){let _0x150af6=_0x5644f7[_0x377e74(0x633)]['map'](({property:_0x361ad1,stack:_0x27b0b8,schema:_0x44d6b5})=>{const _0x3df624=_0x377e74;let _0x5a1a5b;return _0x44d6b5[_0x3df624(0x131)]?_0x5a1a5b=_0x44d6b5['description']:_0x5a1a5b=_0x27b0b8[_0x3df624(0x166)](_0x3df624(0x661),''),{'property':_0x361ad1[_0x3df624(0x166)]('instance.',''),'message':_0x5a1a5b};});throw vs[_0x377e74(0x4b3)]([..._0x150af6]),new m(..._0x150af6);}return await _0x19b50e(_0x5d42f4,_0x571f80);}},M=class{},Gc=new $(a0_0x3f352e(0x6c2)),ct=class extends V{constructor(..._0x31ae8c){const _0x266968=a0_0x3f352e;super(),this[_0x266968(0x5d4)]=(0x0,di[_0x266968(0x5da)])(),this[_0x266968(0x5d4)][_0x266968(0x436)](this[_0x266968(0x687)](_0x266968(0x277)),..._0x31ae8c,async(_0x59852c,_0x1d98c9)=>{const _0x24c80e=_0x266968;let _0x276309=await this[_0x24c80e(0x6b0)]({'request':_0x59852c,'schema':ti,'ClassRef':Qe,'execute':(_0xcf9212,_0x526ce8)=>P[_0x24c80e(0x277)](_0xcf9212,_0x526ce8)});return _0x1d98c9[_0x24c80e(0x62a)](0xc9)[_0x24c80e(0x17c)](_0x276309);})[_0x266968(0x436)](this[_0x266968(0x687)](_0x266968(0x569)),..._0x31ae8c,async(_0x3bd409,_0x2fc7b3)=>{const _0x8b70c6=_0x266968;let _0x56285b=await this['dataValidate']({'request':_0x3bd409,'schema':Ba,'ClassRef':Ye,'execute':(_0x17086b,_0x5215f9)=>P['whatsappNumber'](_0x17086b,_0x5215f9)});return _0x2fc7b3['status'](0xc9)[_0x8b70c6(0x17c)](_0x56285b);})[_0x266968(0x436)](this[_0x266968(0x687)](_0x266968(0x4e2)),..._0x31ae8c,async(_0x5cdd5b,_0x41f7e3)=>{const _0x33ae73=_0x266968;let _0x3ab9c3=await this['dataValidate']({'request':_0x5cdd5b,'schema':v,'ClassRef':M,'execute':(_0x2b7dda,_0x10dd7f)=>P[_0x33ae73(0x4e2)](_0x2b7dda,_0x10dd7f)});return _0x41f7e3[_0x33ae73(0x62a)](0xc9)[_0x33ae73(0x17c)](_0x3ab9c3);})[_0x266968(0x7d7)](this[_0x266968(0x687)](_0x266968(0x5bf)),..._0x31ae8c,async(_0x168abb,_0x3ccea6)=>{const _0x2cfbe0=_0x266968;let _0x2c2cc1=await this['dataValidate']({'request':_0x168abb,'schema':Wa,'ClassRef':et,'execute':(_0x2fe169,_0x72a494)=>P[_0x2cfbe0(0x53d)](_0x2fe169,_0x72a494)});return _0x3ccea6['status'](0xc9)[_0x2cfbe0(0x17c)](_0x2c2cc1);})[_0x266968(0x7d7)](this[_0x266968(0x687)](_0x266968(0x157)),..._0x31ae8c,async(_0x4e72fa,_0x2da189)=>{const _0x574dcf=_0x266968;let _0x514a63=await this[_0x574dcf(0x6b0)]({'request':_0x4e72fa,'schema':Ha,'ClassRef':tt,'execute':(_0x4eefe6,_0x9a49de)=>P[_0x574dcf(0x157)](_0x4eefe6,_0x9a49de)});return _0x2da189['status'](0xc9)[_0x574dcf(0x17c)](_0x514a63);})[_0x266968(0x49b)](this[_0x266968(0x687)](_0x266968(0x5ee)),..._0x31ae8c,async(_0x495ec1,_0xaec93c)=>{const _0x5b1dea=_0x266968;let _0x1f4836=await this[_0x5b1dea(0x6b0)]({'request':_0x495ec1,'schema':Ka,'ClassRef':at,'execute':(_0x442d0e,_0x5a26f0)=>P[_0x5b1dea(0x3b8)](_0x442d0e,_0x5a26f0)});return _0xaec93c['status'](0xc9)['json'](_0x1f4836);})[_0x266968(0x436)](this[_0x266968(0x687)](_0x266968(0x463)),..._0x31ae8c,async(_0x2d877f,_0x5410cf)=>{const _0x57e0ba=_0x266968;let _0xb69d7=await this['dataValidate']({'request':_0x2d877f,'schema':_e,'ClassRef':Te,'execute':(_0x168d86,_0x1426c7)=>P['fetchProfilePicture'](_0x168d86,_0x1426c7)});return _0x5410cf[_0x57e0ba(0x62a)](0xc8)[_0x57e0ba(0x17c)](_0xb69d7);})[_0x266968(0x436)](this[_0x266968(0x687)]('fetchProfile'),..._0x31ae8c,async(_0x5b47d9,_0xed4239)=>{const _0x4e8a56=_0x266968;let _0x41c3de=await this[_0x4e8a56(0x6b0)]({'request':_0x5b47d9,'schema':Za,'ClassRef':Te,'execute':(_0x26abe1,_0x558d56)=>P[_0x4e8a56(0x17d)](_0x26abe1,_0x558d56)});return _0xed4239[_0x4e8a56(0x62a)](0xc8)[_0x4e8a56(0x17c)](_0x41c3de);})['post'](this[_0x266968(0x687)]('findContacts'),..._0x31ae8c,async(_0x296f49,_0x177b1d)=>{const _0x5ebafa=_0x266968;let _0x31413a=await this[_0x5ebafa(0x6b0)]({'request':_0x296f49,'schema':Qa,'ClassRef':ot,'execute':(_0x20c8e7,_0x17709f)=>P['fetchContacts'](_0x20c8e7,_0x17709f)});return _0x177b1d[_0x5ebafa(0x62a)](0xc8)[_0x5ebafa(0x17c)](_0x31413a);})[_0x266968(0x436)](this[_0x266968(0x687)](_0x266968(0x600)),..._0x31ae8c,async(_0x13ec1b,_0x5e028d)=>{const _0x45ae80=_0x266968;let _0x580bd3=await this[_0x45ae80(0x6b0)]({'request':_0x13ec1b,'schema':null,'ClassRef':Object,'execute':(_0xc16230,_0x2f6988)=>P[_0x45ae80(0x600)](_0xc16230,_0x2f6988)});return _0x5e028d[_0x45ae80(0x62a)](0xc9)[_0x45ae80(0x17c)](_0x580bd3);})['post'](this[_0x266968(0x687)](_0x266968(0x70b)),..._0x31ae8c,async(_0x131fac,_0x56e941)=>{const _0x2867fa=_0x266968;let _0x37b120=await this[_0x2867fa(0x6b0)]({'request':_0x131fac,'schema':ei,'ClassRef':He,'execute':(_0x1149ec,_0x12dc93)=>P[_0x2867fa(0x3dd)](_0x1149ec,_0x12dc93)});return _0x56e941['status'](0xc8)['json'](_0x37b120);})[_0x266968(0x427)](this['routerPath']('findChats'),..._0x31ae8c,async(_0x3f3968,_0x9b8dd2)=>{const _0x1c00ba=_0x266968;let _0x24551e=await this[_0x1c00ba(0x6b0)]({'request':_0x3f3968,'schema':null,'ClassRef':M,'execute':_0x1c5c2=>P['fetchChats'](_0x1c5c2)});return _0x9b8dd2[_0x1c00ba(0x62a)](0xc8)[_0x1c00ba(0x17c)](_0x24551e);})[_0x266968(0x427)](this[_0x266968(0x687)](_0x266968(0x516)),..._0x31ae8c,async(_0x4fe995,_0x360471)=>{const _0x2e3906=_0x266968;let _0x1b83c8=await this[_0x2e3906(0x6b0)]({'request':_0x4fe995,'schema':null,'ClassRef':M,'execute':_0x398422=>P[_0x2e3906(0x1d2)](_0x398422)});return _0x360471['status'](0xc8)['json'](_0x1b83c8);})[_0x266968(0x7d7)](this[_0x266968(0x687)]('importChats'),..._0x31ae8c,async(_0x1b2215,_0xad0632)=>{const _0x20983b=_0x266968;let _0x35df06=await this[_0x20983b(0x6b0)]({'request':_0x1b2215,'schema':null,'ClassRef':Array,'execute':(_0x2bad09,_0x4c08c9)=>P[_0x20983b(0x561)](_0x2bad09,_0x4c08c9)});return _0xad0632[_0x20983b(0x62a)](0xc8)[_0x20983b(0x17c)](_0x35df06);})[_0x266968(0x427)](this['routerPath'](_0x266968(0x103)),..._0x31ae8c,async(_0x1741f9,_0x2bb701)=>{const _0x116e79=_0x266968;let _0x25c699=await this[_0x116e79(0x6b0)]({'request':_0x1741f9,'schema':null,'ClassRef':M,'execute':_0x332acc=>P[_0x116e79(0x103)](_0x332acc)});return _0x2bb701[_0x116e79(0x62a)](0xc8)[_0x116e79(0x17c)](_0x25c699);})[_0x266968(0x7d7)](this[_0x266968(0x687)](_0x266968(0x4df)),..._0x31ae8c,async(_0x5b3276,_0x398d26)=>{const _0x40d989=_0x266968;let _0x1eaf16=await this[_0x40d989(0x6b0)]({'request':_0x5b3276,'schema':za,'ClassRef':st,'execute':(_0x15d8dd,_0x575b8b)=>P[_0x40d989(0x4df)](_0x15d8dd,_0x575b8b)});return _0x398d26[_0x40d989(0x62a)](0xc9)['json'](_0x1eaf16);})[_0x266968(0x436)](this['routerPath'](_0x266968(0x136)),..._0x31ae8c,async(_0x55d29b,_0x2fdc36)=>{const _0xb64f85=_0x266968;let _0x4766ea=await this['dataValidate']({'request':_0x55d29b,'schema':_e,'ClassRef':Ce,'execute':(_0x5788bf,_0x532a06)=>P['fetchBusinessProfile'](_0x5788bf,_0x532a06)});return _0x2fdc36[_0xb64f85(0x62a)](0xc8)[_0xb64f85(0x17c)](_0x4766ea);})[_0x266968(0x436)](this[_0x266968(0x687)](_0x266968(0x32c)),..._0x31ae8c,async(_0x833646,_0x474cb8)=>{const _0x34adc6=_0x266968;let _0x404f18=await this['dataValidate']({'request':_0x833646,'schema':Ya,'ClassRef':Xe,'execute':(_0x1578bc,_0x9287ab)=>P[_0x34adc6(0x32c)](_0x1578bc,_0x9287ab)});return _0x474cb8[_0x34adc6(0x62a)](0xc8)[_0x34adc6(0x17c)](_0x404f18);})[_0x266968(0x436)](this[_0x266968(0x687)](_0x266968(0x4dc)),..._0x31ae8c,async(_0x459173,_0x3ea2e2)=>{const _0x3b6d61=_0x266968;let _0x59e004=await this['dataValidate']({'request':_0x459173,'schema':Xa,'ClassRef':Ze,'execute':(_0x1b1b4a,_0x103769)=>P[_0x3b6d61(0x4dc)](_0x1b1b4a,_0x103769)});return _0x3ea2e2[_0x3b6d61(0x62a)](0xc8)['json'](_0x59e004);})[_0x266968(0x7d7)](this[_0x266968(0x687)](_0x266968(0x7b7)),..._0x31ae8c,async(_0x9b23bc,_0x1a5a71)=>{const _0x50234f=_0x266968;let _0x3115e5=await this[_0x50234f(0x6b0)]({'request':_0x9b23bc,'schema':_e,'ClassRef':Ce,'execute':(_0x333c6b,_0x312f15)=>P[_0x50234f(0x7b7)](_0x333c6b,_0x312f15)});return _0x1a5a71['status'](0xc8)[_0x50234f(0x17c)](_0x3115e5);})[_0x266968(0x49b)](this[_0x266968(0x687)](_0x266968(0x414)),..._0x31ae8c,async(_0x1c4538,_0x2dfe4e)=>{const _0x54e02c=_0x266968;let _0x56e4a2=await this[_0x54e02c(0x6b0)]({'request':_0x1c4538,'schema':_e,'ClassRef':Ce,'execute':(_0x2b2712,_0x1ace67)=>P[_0x54e02c(0x414)](_0x2b2712,_0x1ace67)});return _0x2dfe4e['status'](0xc8)[_0x54e02c(0x17c)](_0x56e4a2);});}},pi=require(a0_0x3f352e(0x5b1)),lt=class{},ut=class{},dt=class{},pt=class{},ht=class{},gt=class{},te=class{},De=class{},mt=class extends te{},ft=class extends te{},wt=class extends V{constructor(..._0x284762){const _0x3b6292=a0_0x3f352e;super(),this['router']=(0x0,pi[_0x3b6292(0x5da)])(),this[_0x3b6292(0x5d4)][_0x3b6292(0x436)](this['routerPath'](_0x3b6292(0x325)),..._0x284762,async(_0x431641,_0x1aa3ae)=>{const _0x25aa93=_0x3b6292;let _0x478b0d=await this[_0x25aa93(0x6b0)]({'request':_0x431641,'schema':si,'ClassRef':lt,'execute':(_0x78673a,_0x271b97)=>q[_0x25aa93(0x5ec)](_0x78673a,_0x271b97)});_0x1aa3ae[_0x25aa93(0x62a)](0xc9)[_0x25aa93(0x17c)](_0x478b0d);})[_0x3b6292(0x7d7)](this['routerPath'](_0x3b6292(0x790)),..._0x284762,async(_0x4a94ec,_0xa4fa0e)=>{const _0x28ee98=_0x3b6292;let _0x48407f=await this[_0x28ee98(0x4da)]({'request':_0x4a94ec,'schema':oi,'ClassRef':ut,'execute':(_0x8af57d,_0x563417)=>q['updateGroupPicture'](_0x8af57d,_0x563417)});_0xa4fa0e[_0x28ee98(0x62a)](0xc9)['json'](_0x48407f);})[_0x3b6292(0x7d7)](this[_0x3b6292(0x687)]('groupDesc'),..._0x284762,async(_0x1bfe63,_0x55722a)=>{const _0xa0eaa9=_0x3b6292;let _0x2948d9=await this[_0xa0eaa9(0x4da)]({'request':_0x1bfe63,'schema':ri,'ClassRef':dt,'execute':(_0x1e3a20,_0x134705)=>q[_0xa0eaa9(0x3f1)](_0x1e3a20,_0x134705)});_0x55722a['status'](0xc9)[_0xa0eaa9(0x17c)](_0x2948d9);})[_0x3b6292(0x7d7)](this[_0x3b6292(0x687)](_0x3b6292(0x557)),..._0x284762,async(_0x595d08,_0x231c09)=>{const _0x131927=_0x3b6292;let _0x3d61d8=await this[_0x131927(0x4da)]({'request':_0x595d08,'schema':ni,'ClassRef':pt,'execute':(_0x747351,_0xbf6e35)=>q['groupName'](_0x747351,_0xbf6e35)});_0x231c09[_0x131927(0x62a)](0xc9)[_0x131927(0x17c)](_0x3d61d8);})[_0x3b6292(0x7d7)](this[_0x3b6292(0x687)](_0x3b6292(0x149)),..._0x284762,async(_0x27a3a2,_0x2c9d75)=>{const _0x40febc=_0x3b6292;let _0x34087b=await this['groupValidate']({'request':_0x27a3a2,'schema':li,'ClassRef':gt,'execute':(_0x2f83ee,_0x4c52ab)=>q[_0x40febc(0x149)](_0x2f83ee,_0x4c52ab)});_0x2c9d75[_0x40febc(0x62a)](0xc9)[_0x40febc(0x17c)](_0x34087b);})[_0x3b6292(0x7d7)](this[_0x3b6292(0x687)](_0x3b6292(0x3aa)),..._0x284762,async(_0x1e8cd7,_0x1e11fa)=>{const _0x40f1e2=_0x3b6292;let _0x7e7286=await this[_0x40f1e2(0x4da)]({'request':_0x1e8cd7,'schema':ci,'ClassRef':ht,'execute':(_0x522a70,_0x807adf)=>q['groupSetting'](_0x522a70,_0x807adf)});_0x1e11fa[_0x40f1e2(0x62a)](0xc9)['json'](_0x7e7286);})[_0x3b6292(0x7d7)](this[_0x3b6292(0x687)](_0x3b6292(0xe2)),..._0x284762,async(_0x5448cf,_0x41b458)=>{const _0x5a601c=_0x3b6292;let _0x44a377=await this['groupValidate']({'request':_0x5448cf,'schema':ii,'ClassRef':ft,'execute':(_0x115926,_0x2bafb6)=>q[_0x5a601c(0xe2)](_0x115926,_0x2bafb6)});_0x41b458[_0x5a601c(0x62a)](0xc9)[_0x5a601c(0x17c)](_0x44a377);})[_0x3b6292(0x427)](this[_0x3b6292(0x687)](_0x3b6292(0x40c)),..._0x284762,async(_0x3b7ec4,_0x524038)=>{const _0x1634d6=_0x3b6292;let _0x4a2874=await this[_0x1634d6(0x4da)]({'request':_0x3b7ec4,'schema':xe,'ClassRef':te,'execute':(_0x1668b7,_0x1d6a7a)=>q[_0x1634d6(0x1b8)](_0x1668b7,_0x1d6a7a)});_0x524038[_0x1634d6(0x62a)](0xc8)[_0x1634d6(0x17c)](_0x4a2874);})[_0x3b6292(0x427)](this['routerPath']('findGroups'),..._0x284762,async(_0xcceef6,_0x4f0dbd)=>{const _0x3d25c2=_0x3b6292;let _0x2d658e=await this[_0x3d25c2(0x6b0)]({'request':_0xcceef6,'schema':v,'ClassRef':M,'execute':_0x3f3fca=>q[_0x3d25c2(0x5df)](_0x3f3fca)});_0x4f0dbd[_0x3d25c2(0x62a)](0xc8)[_0x3d25c2(0x17c)](_0x2d658e);})[_0x3b6292(0x427)](this[_0x3b6292(0x687)](_0x3b6292(0x6b7)),..._0x284762,async(_0x3f6d98,_0xba3281)=>{const _0x1b5c7a=_0x3b6292;let _0x401808=await this[_0x1b5c7a(0x4da)]({'request':_0x3f6d98,'schema':xe,'ClassRef':te,'execute':(_0x5d7ff0,_0x582de2)=>q['findParticipants'](_0x5d7ff0,_0x582de2)});_0xba3281[_0x1b5c7a(0x62a)](0xc8)[_0x1b5c7a(0x17c)](_0x401808);})['get'](this[_0x3b6292(0x687)](_0x3b6292(0x1b6)),..._0x284762,async(_0x4faff8,_0x3f4bd5)=>{const _0x111348=_0x3b6292;let _0x281e4f=await this[_0x111348(0x4da)]({'request':_0x4faff8,'schema':xe,'ClassRef':te,'execute':(_0xbd8985,_0x522119)=>q[_0x111348(0x1b6)](_0xbd8985,_0x522119)});_0x3f4bd5[_0x111348(0x62a)](0xc8)[_0x111348(0x17c)](_0x281e4f);})['post'](this[_0x3b6292(0x687)](_0x3b6292(0x432)),..._0x284762,async(_0x7246a4,_0x4a3f9b)=>{const _0x3b46fe=_0x3b6292;let _0x5838f7=await this[_0x3b46fe(0x374)]({'request':_0x7246a4,'schema':Es,'ClassRef':De,'execute':(_0x2b5212,_0x3e09ae)=>q[_0x3b46fe(0x483)](_0x2b5212,_0x3e09ae)});_0x4a3f9b[_0x3b46fe(0x62a)](0xc9)[_0x3b46fe(0x17c)](_0x5838f7);})['put'](this['routerPath'](_0x3b6292(0x155)),..._0x284762,async(_0x415587,_0x26fb63)=>{const _0x59d7ce=_0x3b6292;let _0x534225=await this['joinGroupValidate']({'request':_0x415587,'schema':Es,'ClassRef':De,'execute':(_0x21890e,_0x3d3d90)=>q['joinGroup'](_0x21890e,_0x3d3d90)});_0x26fb63[_0x59d7ce(0x62a)](0xc9)[_0x59d7ce(0x17c)](_0x534225);})[_0x3b6292(0x7d7)](this[_0x3b6292(0x687)]('revokeInviteCode'),..._0x284762,async(_0x47082d,_0x5da9cb)=>{const _0x3b8074=_0x3b6292;let _0x3c3126=await this[_0x3b8074(0x4da)]({'request':_0x47082d,'schema':xe,'ClassRef':te,'execute':(_0x4c5493,_0xd65264)=>q[_0x3b8074(0x57d)](_0x4c5493,_0xd65264)});_0x5da9cb['status'](0xc9)[_0x3b8074(0x17c)](_0x3c3126);})[_0x3b6292(0x7d7)](this['routerPath'](_0x3b6292(0x14c)),..._0x284762,async(_0x39a43e,_0x4ad741)=>{const _0x59ee21=_0x3b6292;let _0x1571ee=await this[_0x59ee21(0x4da)]({'request':_0x39a43e,'schema':ai,'ClassRef':mt,'execute':(_0x52f979,_0x24606b)=>q[_0x59ee21(0x71e)](_0x52f979,_0x24606b)});_0x4ad741[_0x59ee21(0x62a)](0xc9)['json'](_0x1571ee);})[_0x3b6292(0x49b)](this[_0x3b6292(0x687)]('leaveGroup'),..._0x284762,async(_0x55d781,_0x4c879b)=>{const _0x41b1a1=_0x3b6292;let _0x906ce0=await this['groupValidate']({'request':_0x55d781,'schema':{},'ClassRef':te,'execute':(_0xb4dbe8,_0x7fa910)=>q[_0x41b1a1(0xdb)](_0xb4dbe8,_0x7fa910)});_0x4c879b[_0x41b1a1(0x62a)](0xc8)[_0x41b1a1(0x17c)](_0x906ce0);});}},hi=require(a0_0x3f352e(0x5b1)),yt=class extends V{constructor(_0x18f1a6,..._0x412c13){const _0x92a4db=a0_0x3f352e;super(),this[_0x92a4db(0x446)]=_0x18f1a6,this[_0x92a4db(0x5d4)]=(0x0,hi[_0x92a4db(0x5da)])();let _0x56a054=_0x18f1a6[_0x92a4db(0x427)](_0x92a4db(0xdc));this[_0x92a4db(0x5d4)]['post'](_0x92a4db(0xd4),..._0x412c13,async(_0x82b4d0,_0x207bbd)=>{const _0x33e8a8=_0x92a4db;let {instanceName:_0x3c920e,apikey:_0x1dcdc1,number:_0x40724c}=_0x82b4d0[_0x33e8a8(0x6a4)],_0x2746b7=await ue[_0x33e8a8(0x618)]({'instanceName':_0x3c920e,'apikey':_0x1dcdc1,'number':_0x40724c});return _0x207bbd['status'](0xc9)[_0x33e8a8(0x17c)](_0x2746b7);})[_0x92a4db(0x7d7)](this['routerPath'](_0x92a4db(0x209)),..._0x412c13,async(_0x6ba99b,_0x4afbda)=>{const _0x4b3165=_0x92a4db;let _0x37d167=await this[_0x4b3165(0x6b0)]({'request':_0x6ba99b,'schema':v,'ClassRef':M,'execute':_0x140ed9=>ue[_0x4b3165(0x771)](_0x140ed9)});return _0x4afbda[_0x4b3165(0x62a)](0xc8)[_0x4b3165(0x17c)](_0x37d167);})['get'](this[_0x92a4db(0x687)](_0x92a4db(0xc8)),..._0x412c13,async(_0x5a6fd8,_0x412bd6)=>{const _0xa5e854=_0x92a4db;let _0x3a80d1=await this[_0xa5e854(0x6b0)]({'request':_0x5a6fd8,'schema':v,'ClassRef':M,'execute':_0x43dd49=>ue['connectToWhatsappController'](_0x43dd49)});return _0x412bd6[_0xa5e854(0x62a)](0xc8)[_0xa5e854(0x17c)](_0x3a80d1);})['get'](this[_0x92a4db(0x687)](_0x92a4db(0x356)),..._0x412c13,async(_0x2298be,_0x8a8692)=>{const _0x4ecea5=_0x92a4db;let _0x14e75e=await this[_0x4ecea5(0x6b0)]({'request':_0x2298be,'schema':v,'ClassRef':M,'execute':_0x38daa4=>ue['connectionState'](_0x38daa4)});return _0x8a8692[_0x4ecea5(0x62a)](0xc8)[_0x4ecea5(0x17c)](_0x14e75e);})[_0x92a4db(0x427)](this[_0x92a4db(0x687)](_0x92a4db(0x6a0),!0x1),..._0x412c13,async(_0x446518,_0x5d0fc7)=>{const _0x317c9a=_0x92a4db;let _0x3c7c88=await this['dataValidate']({'request':_0x446518,'schema':null,'ClassRef':M,'execute':_0x442a9f=>ue['fetchInstances'](_0x442a9f)});return _0x5d0fc7['status'](0xc8)[_0x317c9a(0x17c)](_0x3c7c88);})[_0x92a4db(0x49b)](this[_0x92a4db(0x687)](_0x92a4db(0x1f5)),..._0x412c13,async(_0x24b762,_0x5c19c6)=>{const _0x2d84db=_0x92a4db;let _0x5dffac=await this[_0x2d84db(0x6b0)]({'request':_0x24b762,'schema':v,'ClassRef':M,'execute':_0x29854d=>ue[_0x2d84db(0x1f5)](_0x29854d)});return _0x5c19c6['status'](0xc8)['json'](_0x5dffac);})[_0x92a4db(0x49b)](this['routerPath'](_0x92a4db(0x49b)),..._0x412c13,async(_0x3fb06d,_0x1f6171)=>{const _0x399f50=_0x92a4db;let _0x332551=await this[_0x399f50(0x6b0)]({'request':_0x3fb06d,'schema':v,'ClassRef':M,'execute':_0x59f9b9=>ue['deleteInstance'](_0x59f9b9)});return _0x1f6171[_0x399f50(0x62a)](0xc8)[_0x399f50(0x17c)](_0x332551);});}},gi=require('express'),Ns=class{},z=class extends Ns{},bt=class extends z{},St=class extends z{},Mt=class extends z{},Ct=class extends z{},Pe=class extends z{},Et=class extends z{},vt=class extends z{},Nt=class extends z{},$t=class extends z{},Rt=class extends z{},At=class{},It=class extends V{constructor(..._0x1989fb){const _0x45f5bb=a0_0x3f352e;super(),this[_0x45f5bb(0x5d4)]=(0x0,gi[_0x45f5bb(0x5da)])(),this['router']['post'](this[_0x45f5bb(0x687)](_0x45f5bb(0xdd)),..._0x1989fb,async(_0x466f75,_0x209cc3)=>{const _0x2f1e75=_0x45f5bb;let _0x2ab898=await this[_0x2f1e75(0x6b0)]({'request':_0x466f75,'schema':_a,'ClassRef':bt,'execute':(_0x5c8b0e,_0x3824de)=>B[_0x2f1e75(0xdd)](_0x5c8b0e,_0x3824de)});return _0x209cc3[_0x2f1e75(0x62a)](0xc9)[_0x2f1e75(0x17c)](_0x2ab898);})[_0x45f5bb(0x436)](this[_0x45f5bb(0x687)](_0x45f5bb(0x63b)),..._0x1989fb,async(_0x224a9d,_0x10139c)=>{const _0x811fee=_0x45f5bb;let _0x40290d=await this[_0x811fee(0x6b0)]({'request':_0x224a9d,'schema':ka,'ClassRef':Pe,'execute':(_0x5e6a7c,_0x38dd3c)=>B[_0x811fee(0x63b)](_0x5e6a7c,_0x38dd3c)});return _0x10139c[_0x811fee(0x62a)](0xc9)[_0x811fee(0x17c)](_0x40290d);})[_0x45f5bb(0x436)](this['routerPath'](_0x45f5bb(0x29b)),..._0x1989fb,async(_0x1ab9ac,_0x5e5af1)=>{const _0x7b1ad1=_0x45f5bb;let _0x4b81f6=await this[_0x7b1ad1(0x6b0)]({'request':_0x1ab9ac,'schema':Ua,'ClassRef':Ct,'execute':(_0x24d807,_0x427bf0)=>B[_0x7b1ad1(0x29b)](_0x24d807,_0x427bf0)});return _0x5e5af1[_0x7b1ad1(0x62a)](0xc9)['json'](_0x4b81f6);})['post'](this['routerPath']('sendWhatsAppAudio'),..._0x1989fb,async(_0x59bd9f,_0x2d5975)=>{const _0x1e48d7=_0x45f5bb;let _0x37a4b3=await this[_0x1e48d7(0x6b0)]({'request':_0x59bd9f,'schema':La,'ClassRef':Pe,'execute':(_0xd5cf2e,_0x57b7dc)=>B[_0x1e48d7(0x274)](_0xd5cf2e,_0x57b7dc)});return _0x2d5975['status'](0xc9)[_0x1e48d7(0x17c)](_0x37a4b3);})[_0x45f5bb(0x436)](this['routerPath'](_0x45f5bb(0x41d)),..._0x1989fb,async(_0x2ee42a,_0x3728aa)=>{const _0xfb00ea=_0x45f5bb;let _0x103869=await this[_0xfb00ea(0x6b0)]({'request':_0x2ee42a,'schema':ja,'ClassRef':vt,'execute':(_0x228abe,_0xe1bcf2)=>B[_0xfb00ea(0x41d)](_0x228abe,_0xe1bcf2)});return _0x3728aa[_0xfb00ea(0x62a)](0xc9)[_0xfb00ea(0x17c)](_0x103869);})[_0x45f5bb(0x436)](this['routerPath'](_0x45f5bb(0x255)),..._0x1989fb,async(_0x25e52d,_0x185f0e)=>{const _0x37d31b=_0x45f5bb;let _0xb33f25=await this['dataValidate']({'request':_0x25e52d,'schema':Ja,'ClassRef':Nt,'execute':(_0x5c4fc8,_0x552d3d)=>B[_0x37d31b(0x255)](_0x5c4fc8,_0x552d3d)});return _0x185f0e['status'](0xc9)['json'](_0xb33f25);})['post'](this[_0x45f5bb(0x687)](_0x45f5bb(0x326)),..._0x1989fb,async(_0x404915,_0x5d2c29)=>{const _0x5dace1=_0x45f5bb;let _0x107357=await this[_0x5dace1(0x6b0)]({'request':_0x404915,'schema':qa,'ClassRef':$t,'execute':(_0x5ca62b,_0x44ba80)=>B[_0x5dace1(0x326)](_0x5ca62b,_0x44ba80)});return _0x5d2c29[_0x5dace1(0x62a)](0xc9)[_0x5dace1(0x17c)](_0x107357);})[_0x45f5bb(0x436)](this[_0x45f5bb(0x687)](_0x45f5bb(0x3f0)),..._0x1989fb,async(_0x38856c,_0x5a8763)=>{const _0x30da34=_0x45f5bb;let _0x5326d2=await this[_0x30da34(0x6b0)]({'request':_0x38856c,'schema':Va,'ClassRef':Rt,'execute':(_0x25a647,_0x308b96)=>B['sendContact'](_0x25a647,_0x308b96)});return _0x5a8763['status'](0xc9)[_0x30da34(0x17c)](_0x5326d2);})[_0x45f5bb(0x436)](this['routerPath'](_0x45f5bb(0x422)),..._0x1989fb,async(_0x1bde12,_0x309f37)=>{const _0x1ee65d=_0x45f5bb;let _0x330dce=await this['dataValidate']({'request':_0x1bde12,'schema':Ga,'ClassRef':At,'execute':(_0x3ebbce,_0x4a35d3)=>B[_0x1ee65d(0x422)](_0x3ebbce,_0x4a35d3)});return _0x309f37[_0x1ee65d(0x62a)](0xc9)['json'](_0x330dce);})[_0x45f5bb(0x436)](this[_0x45f5bb(0x687)]('sendPoll'),..._0x1989fb,async(_0x3ec1f5,_0x2c4759)=>{const _0x4c8dca=_0x45f5bb;let _0x390209=await this[_0x4c8dca(0x6b0)]({'request':_0x3ec1f5,'schema':Fa,'ClassRef':Mt,'execute':(_0x4b18fd,_0x4e4d85)=>B[_0x4c8dca(0x34d)](_0x4b18fd,_0x4e4d85)});return _0x2c4759['status'](0xc9)['json'](_0x390209);})[_0x45f5bb(0x436)](this[_0x45f5bb(0x687)]('sendStatus'),..._0x1989fb,async(_0x2904e3,_0x1d4404)=>{const _0x3da76b=_0x45f5bb;let _0x5140e9=await this['dataValidate']({'request':_0x2904e3,'schema':Pa,'ClassRef':St,'execute':(_0x51533f,_0x20d9bb)=>B[_0x3da76b(0x26a)](_0x51533f,_0x20d9bb)});return _0x1d4404[_0x3da76b(0x62a)](0xc9)[_0x3da76b(0x17c)](_0x5140e9);})[_0x45f5bb(0x436)](this[_0x45f5bb(0x687)](_0x45f5bb(0x316)),..._0x1989fb,async(_0x4ae134,_0x28ae46)=>{const _0x18ec16=_0x45f5bb;let _0x217814=await this[_0x18ec16(0x6b0)]({'request':_0x4ae134,'schema':Da,'ClassRef':Et,'execute':(_0x3c51ab,_0x2afa13)=>B['sendSticker'](_0x3c51ab,_0x2afa13)});return _0x28ae46['status'](0xc9)[_0x18ec16(0x17c)](_0x217814);});}},mi=require(a0_0x3f352e(0x5b1)),Tt=class{},Ot=class extends V{constructor(..._0x26be39){const _0x3f18b4=a0_0x3f352e;super(),this[_0x3f18b4(0x5d4)]=(0x0,mi[_0x3f18b4(0x5da)])(),this[_0x3f18b4(0x5d4)]['post'](this[_0x3f18b4(0x687)](_0x3f18b4(0x782)),..._0x26be39,async(_0x2f1206,_0x268c00)=>{const _0x51af62=_0x3f18b4;let _0x13757b=await this['dataValidate']({'request':_0x2f1206,'schema':ui,'ClassRef':Tt,'execute':(_0x499e56,_0x58faae)=>$s[_0x51af62(0xd7)](_0x499e56,_0x58faae)});_0x268c00[_0x51af62(0x62a)](0xc9)['json'](_0x13757b);})['get'](this[_0x3f18b4(0x687)](_0x3f18b4(0x71f)),..._0x26be39,async(_0x1e3b77,_0x5e1662)=>{const _0x518013=_0x3f18b4;let _0x2c3ac7=await this[_0x518013(0x6b0)]({'request':_0x1e3b77,'schema':v,'ClassRef':M,'execute':_0x4bca39=>$s[_0x518013(0x2b8)](_0x4bca39)});_0x5e1662['status'](0xc8)[_0x518013(0x17c)](_0x2c3ac7);});}},fi=require(a0_0x3f352e(0x5b1)),y=new $(a0_0x3f352e(0x1bd)),_t=class extends V{constructor(..._0x29349b){const _0x400760=a0_0x3f352e;super(),this[_0x400760(0x5d4)]=(0x0,fi['Router'])(),this[_0x400760(0x5d4)][_0x400760(0x436)](this[_0x400760(0x687)](_0x400760(0x1c0)),..._0x29349b,async(_0x5ac04f,_0x31c992)=>{const _0x5bc93b=_0x400760;let _0x5660a7=_0x5ac04f[_0x5bc93b(0x6a4)];y['verbose']('request\x20received\x20in\x20scheduleMessage'),y[_0x5bc93b(0x72d)](_0x5bc93b(0x1c2)),y[_0x5bc93b(0x72d)](_0x5ac04f[_0x5bc93b(0x6a4)]);let _0x217042=await this[_0x5bc93b(0x6b0)]({'request':_0x5ac04f,'schema':v,'ClassRef':M,'execute':_0x38538a=>O[_0x5bc93b(0x36c)](_0x38538a,_0x5660a7)});_0x31c992[_0x5bc93b(0x62a)](0xc8)[_0x5bc93b(0x17c)](_0x217042);})[_0x400760(0x427)](this['routerPath'](_0x400760(0x1c0)),..._0x29349b,async(_0x36a138,_0x4f77bf)=>{const _0x8dec46=_0x400760;let _0x1ea761=await this[_0x8dec46(0x6b0)]({'request':_0x36a138,'schema':v,'ClassRef':M,'execute':_0x4e5fb3=>O[_0x8dec46(0x2c6)](_0x4e5fb3)});_0x4f77bf[_0x8dec46(0x62a)](0xc8)[_0x8dec46(0x17c)](_0x1ea761);})[_0x400760(0x49b)](this['routerPath'](_0x400760(0x484)),..._0x29349b,async(_0x2f1fac,_0x13765e)=>{const _0x3c3db7=_0x400760;y[_0x3c3db7(0x72d)](_0x3c3db7(0xd2));let _0x4d5b50=await this[_0x3c3db7(0x6b0)]({'request':_0x2f1fac,'schema':v,'ClassRef':M,'execute':_0x218e00=>O[_0x3c3db7(0x484)](_0x218e00)});_0x13765e[_0x3c3db7(0x62a)](0xc8)['json'](_0x4d5b50);})['post'](this[_0x400760(0x687)](_0x400760(0x32a)),..._0x29349b,async(_0x2c8ac3,_0x5e2d61)=>{const _0x4e2f9b=_0x400760;let _0x184949=_0x2c8ac3['body'];y[_0x4e2f9b(0x72d)]('request\x20received\x20in\x20starFlow'),y[_0x4e2f9b(0x72d)](_0x4e2f9b(0x1c2)),y[_0x4e2f9b(0x72d)](_0x2c8ac3[_0x4e2f9b(0x6a4)]);let _0x59570c=await this[_0x4e2f9b(0x6b0)]({'request':_0x2c8ac3,'schema':v,'ClassRef':M,'execute':_0x35898f=>O[_0x4e2f9b(0x32a)](_0x35898f,_0x184949)});_0x5e2d61[_0x4e2f9b(0x62a)](0xc8)[_0x4e2f9b(0x17c)](_0x59570c);})[_0x400760(0x427)](this[_0x400760(0x687)](_0x400760(0x444)),..._0x29349b,async(_0xcdfbc8,_0x55a121)=>{const _0x5235e4=_0x400760;y[_0x5235e4(0x72d)](_0x5235e4(0x28f));let _0x81f75b=await this[_0x5235e4(0x6b0)]({'request':_0xcdfbc8,'schema':v,'ClassRef':M,'execute':_0x3ea439=>O[_0x5235e4(0x444)](_0x3ea439)});_0x55a121[_0x5235e4(0x62a)](0xc8)[_0x5235e4(0x17c)](_0x81f75b);})[_0x400760(0x427)](this['routerPath']('getTicketSystem'),..._0x29349b,async(_0x2f8560,_0x2e36dd)=>{const _0x10d596=_0x400760;y[_0x10d596(0x72d)](_0x10d596(0x2b4));let _0x42abce=await this[_0x10d596(0x6b0)]({'request':_0x2f8560,'schema':v,'ClassRef':M,'execute':_0x1564c0=>O[_0x10d596(0x444)](_0x1564c0)});_0x2e36dd[_0x10d596(0x62a)](0xc8)[_0x10d596(0x17c)](_0x42abce);})[_0x400760(0x436)](this[_0x400760(0x687)]('updateAgent'),..._0x29349b,async(_0x57eebc,_0x150c51)=>{const _0x19e402=_0x400760;let _0x39e40c=_0x57eebc[_0x19e402(0x6a4)];y[_0x19e402(0x72d)](_0x19e402(0x404)),y[_0x19e402(0x72d)](_0x19e402(0x1c2)),y['verbose'](_0x57eebc[_0x19e402(0x6a4)]);let _0x2acecc=await this[_0x19e402(0x6b0)]({'request':_0x57eebc,'schema':v,'ClassRef':M,'execute':_0x45d86d=>O[_0x19e402(0x141)](_0x45d86d,_0x39e40c)});_0x150c51[_0x19e402(0x62a)](0xc8)[_0x19e402(0x17c)](_0x2acecc);})[_0x400760(0x436)](this[_0x400760(0x687)](_0x400760(0x248)),..._0x29349b,async(_0x183ad5,_0xd6b9f2)=>{const _0x552d41=_0x400760;let _0x456bca=_0x183ad5[_0x552d41(0x6a4)];y['verbose'](_0x552d41(0x26d)),y['verbose'](_0x552d41(0x1c2)),y['verbose'](_0x183ad5[_0x552d41(0x6a4)]);let _0x172397=await this['dataValidate']({'request':_0x183ad5,'schema':v,'ClassRef':M,'execute':_0x178a0b=>O['updateCustomFields'](_0x178a0b,_0x456bca)});_0xd6b9f2[_0x552d41(0x62a)](0xc8)['json'](_0x172397);})[_0x400760(0x436)](this[_0x400760(0x687)](_0x400760(0x202)),..._0x29349b,async(_0x2acc4a,_0x5ce7d6)=>{const _0x5eefd8=_0x400760;let _0x363a6d=_0x2acc4a[_0x5eefd8(0x6a4)];y[_0x5eefd8(0x72d)](_0x5eefd8(0xb6)),y[_0x5eefd8(0x72d)]('request\x20body:\x20'),y['verbose'](_0x2acc4a[_0x5eefd8(0x6a4)]);let _0x9e9afd=await this[_0x5eefd8(0x6b0)]({'request':_0x2acc4a,'schema':v,'ClassRef':M,'execute':_0x2234ff=>O[_0x5eefd8(0x202)](_0x2234ff,_0x363a6d)});_0x5ce7d6[_0x5eefd8(0x62a)](0xc8)['json'](_0x9e9afd);})['post'](this[_0x400760(0x687)](_0x400760(0x6de)),..._0x29349b,async(_0x2bf370,_0x23c841)=>{const _0x857dbc=_0x400760;let _0x3b8c6e=_0x2bf370[_0x857dbc(0x6a4)];y['verbose'](_0x857dbc(0x75f)),y['verbose'](_0x857dbc(0x1c2)),y[_0x857dbc(0x72d)](_0x2bf370[_0x857dbc(0x6a4)]);let _0x4a4dae=await this[_0x857dbc(0x6b0)]({'request':_0x2bf370,'schema':v,'ClassRef':M,'execute':_0x4d9999=>O[_0x857dbc(0x6de)](_0x4d9999,_0x3b8c6e)});_0x23c841[_0x857dbc(0x62a)](0xc8)['json'](_0x4a4dae);})[_0x400760(0x436)](this[_0x400760(0x687)](_0x400760(0x7c5)),..._0x29349b,async(_0x5313b1,_0x2a7f65)=>{const _0x741596=_0x400760;let _0x49453b=_0x5313b1[_0x741596(0x6a4)];y[_0x741596(0x72d)](_0x741596(0x1e3)),y['verbose'](_0x741596(0x1c2)),y[_0x741596(0x72d)](_0x5313b1['body']);let _0x16613e=await this[_0x741596(0x6b0)]({'request':_0x5313b1,'schema':v,'ClassRef':M,'execute':_0x289d2a=>O['getConversation'](_0x289d2a,_0x49453b)});_0x2a7f65[_0x741596(0x62a)](0xc8)['json'](_0x16613e);})['post'](this['routerPath'](_0x400760(0x2ce)),..._0x29349b,async(_0x3e8e9e,_0x4b902a)=>{const _0x5e6cdb=_0x400760;let _0x2312f6=_0x3e8e9e['body'];y['verbose'](_0x5e6cdb(0x10a)),y[_0x5e6cdb(0x72d)](_0x5e6cdb(0x1c2)),y[_0x5e6cdb(0x72d)](_0x3e8e9e[_0x5e6cdb(0x6a4)]);let _0x33f316=await this[_0x5e6cdb(0x6b0)]({'request':_0x3e8e9e,'schema':v,'ClassRef':M,'execute':_0x41907f=>O[_0x5e6cdb(0x2ce)](_0x41907f,_0x2312f6)});_0x4b902a['status'](0xc8)[_0x5e6cdb(0x17c)](_0x33f316);})[_0x400760(0x436)](this[_0x400760(0x687)](_0x400760(0x55b)),..._0x29349b,async(_0x3b6922,_0x5159e0)=>{const _0x11df3d=_0x400760;let _0x3577c0=_0x3b6922[_0x11df3d(0x6a4)];y['verbose']('request\x20received\x20in\x20editConversation'),y[_0x11df3d(0x72d)](_0x11df3d(0x1c2)),y['verbose'](_0x3b6922[_0x11df3d(0x6a4)]);let _0x1ca833=await this[_0x11df3d(0x6b0)]({'request':_0x3b6922,'schema':v,'ClassRef':M,'execute':_0x411b5c=>O[_0x11df3d(0x55b)](_0x411b5c,_0x3577c0)});_0x5159e0[_0x11df3d(0x62a)](0xc8)[_0x11df3d(0x17c)](_0x1ca833);})['delete'](this[_0x400760(0x687)](_0x400760(0x420)),..._0x29349b,async(_0xcccfd,_0x471179)=>{const _0x1b1be3=_0x400760;let _0x643e33=_0xcccfd[_0x1b1be3(0x6a4)];y['verbose'](_0x1b1be3(0x66a)),y['verbose'](_0x1b1be3(0x1c2)),y[_0x1b1be3(0x72d)](_0xcccfd[_0x1b1be3(0x6a4)]);let _0x51456b=await this[_0x1b1be3(0x6b0)]({'request':_0xcccfd,'schema':v,'ClassRef':M,'execute':_0x2ac569=>O[_0x1b1be3(0x420)](_0x2ac569,_0x643e33)});_0x471179[_0x1b1be3(0x62a)](0xc8)['json'](_0x51456b);})['post'](this['routerPath'](_0x400760(0x323)),..._0x29349b,async(_0x4b389b,_0x289b65)=>{const _0xba66ea=_0x400760;let _0x537362=_0x4b389b[_0xba66ea(0x6a4)],_0x251588=_0x4b389b[_0xba66ea(0x450)][_0xba66ea(0x6dc)];y[_0xba66ea(0x72d)](_0xba66ea(0x1df)),y[_0xba66ea(0x72d)]('request\x20body:\x20'),y[_0xba66ea(0x72d)](_0x4b389b[_0xba66ea(0x6a4)]);let _0x526209=await this['dataValidate']({'request':_0x4b389b,'schema':v,'ClassRef':M,'execute':_0x5f2f06=>O[_0xba66ea(0x6cd)](_0x5f2f06,_0x537362,_0x251588)});_0x289b65['status'](0xc8)['json'](_0x526209);})['post'](this['routerPath']('editflow'),..._0x29349b,async(_0xb92ca9,_0x376528)=>{const _0x8772ff=_0x400760;let _0x4ae899=_0xb92ca9[_0x8772ff(0x6a4)],_0x40cb39=_0xb92ca9[_0x8772ff(0x450)][_0x8772ff(0x6dc)];y['verbose']('request\x20received\x20in\x20editFlow'),y['verbose'](_0x8772ff(0x1c2)),y[_0x8772ff(0x72d)](_0xb92ca9['body']),delete _0x4ae899['blocks'],delete _0x4ae899['variables'],delete _0x4ae899['groups'],delete _0x4ae899[_0x8772ff(0x52c)];let _0x5120c2=await this[_0x8772ff(0x6b0)]({'request':_0xb92ca9,'schema':v,'ClassRef':M,'execute':_0x32fb96=>O[_0x8772ff(0x110)](_0x32fb96,_0x4ae899,_0x40cb39)});_0x376528[_0x8772ff(0x62a)](0xc8)[_0x8772ff(0x17c)](_0x5120c2);})[_0x400760(0x436)](this[_0x400760(0x687)](_0x400760(0xb8)),..._0x29349b,async(_0x385ba7,_0x2a14eb)=>{const _0x1d186c=_0x400760;let _0x4ddb50=_0x385ba7['body'];y[_0x1d186c(0x72d)](_0x1d186c(0x6bc)),y[_0x1d186c(0x72d)](_0x1d186c(0x1c2)),y[_0x1d186c(0x72d)](_0x385ba7[_0x1d186c(0x6a4)]);let _0x3f9951=await this[_0x1d186c(0x6b0)]({'request':_0x385ba7,'schema':v,'ClassRef':M,'execute':_0x17f884=>O[_0x1d186c(0x5d2)](_0x17f884,_0x4ddb50)});_0x2a14eb['status'](0xc8)['json'](_0x3f9951);})[_0x400760(0x436)](this[_0x400760(0x687)]('editflowreply'),..._0x29349b,async(_0x51a258,_0x3f5188)=>{const _0xdedce=_0x400760;let _0x564d73=_0x51a258['body'];y[_0xdedce(0x72d)](_0xdedce(0x6bc)),y['verbose'](_0xdedce(0x1c2)),y['verbose'](_0x51a258['body']);let _0x17f704=await this['dataValidate']({'request':_0x51a258,'schema':v,'ClassRef':M,'execute':_0x227c1e=>O[_0xdedce(0x34f)](_0x227c1e,_0x564d73)});_0x3f5188['status'](0xc8)['json'](_0x17f704);})[_0x400760(0x436)](this[_0x400760(0x687)](_0x400760(0x327)),..._0x29349b,async(_0x55151c,_0x32a10f)=>{const _0xf3b5fc=_0x400760;let _0x5d9a77=_0x55151c[_0xf3b5fc(0x6a4)];y[_0xf3b5fc(0x72d)](_0xf3b5fc(0x6bc)),y['verbose'](_0xf3b5fc(0x1c2)),y[_0xf3b5fc(0x72d)](_0x55151c['body']);let _0x2eda48=await this[_0xf3b5fc(0x6b0)]({'request':_0x55151c,'schema':v,'ClassRef':M,'execute':_0x287cff=>O[_0xf3b5fc(0x673)](_0x287cff,_0x5d9a77)});_0x32a10f[_0xf3b5fc(0x62a)](0xc8)[_0xf3b5fc(0x17c)](_0x2eda48);})[_0x400760(0x436)](this[_0x400760(0x687)](_0x400760(0x468)),..._0x29349b,async(_0xd9dac9,_0x5c479f)=>{const _0x22e5a1=_0x400760;let _0x1cff0d=_0xd9dac9[_0x22e5a1(0x6a4)];y['verbose']('request\x20received\x20in\x20editFlowgroup'),y[_0x22e5a1(0x72d)](_0x22e5a1(0x1c2)),y[_0x22e5a1(0x72d)](_0xd9dac9[_0x22e5a1(0x6a4)]);let _0x1e6773=await this[_0x22e5a1(0x6b0)]({'request':_0xd9dac9,'schema':v,'ClassRef':M,'execute':_0x4b99bc=>O[_0x22e5a1(0x5e0)](_0x4b99bc,_0x1cff0d)});_0x5c479f['status'](0xc8)[_0x22e5a1(0x17c)](_0x1e6773);})['post'](this[_0x400760(0x687)]('editflowcondition'),..._0x29349b,async(_0x10416d,_0x1b40f6)=>{const _0x32a1a8=_0x400760;let _0x4690ea=_0x10416d[_0x32a1a8(0x6a4)];y[_0x32a1a8(0x72d)]('request\x20received\x20in\x20editFlowcondition'),y['verbose']('request\x20body:\x20'),y[_0x32a1a8(0x72d)](_0x10416d['body']);let _0x4299fa=await this[_0x32a1a8(0x6b0)]({'request':_0x10416d,'schema':v,'ClassRef':M,'execute':_0x3d8dfb=>O[_0x32a1a8(0x683)](_0x3d8dfb,_0x4690ea)});_0x1b40f6[_0x32a1a8(0x62a)](0xc8)[_0x32a1a8(0x17c)](_0x4299fa);})[_0x400760(0x436)](this['routerPath'](_0x400760(0x1db)),..._0x29349b,async(_0x1297be,_0x206d45)=>{const _0x29cbd0=_0x400760;let _0x425dae=_0x1297be[_0x29cbd0(0x6a4)];y[_0x29cbd0(0x72d)](_0x29cbd0(0x44f)),y['verbose'](_0x29cbd0(0x1c2)),y[_0x29cbd0(0x72d)](_0x1297be[_0x29cbd0(0x6a4)]);let _0x5700e6=await this['dataValidate']({'request':_0x1297be,'schema':v,'ClassRef':M,'execute':_0x551485=>O[_0x29cbd0(0x2b1)](_0x551485,_0x425dae)});_0x206d45[_0x29cbd0(0x62a)](0xc8)[_0x29cbd0(0x17c)](_0x5700e6);})[_0x400760(0x436)](this[_0x400760(0x687)](_0x400760(0x177)),..._0x29349b,async(_0x42004c,_0x5f51e4)=>{const _0xc546f2=_0x400760;let _0x22133d=_0x42004c[_0xc546f2(0x6a4)];y[_0xc546f2(0x72d)](_0xc546f2(0x787)),y[_0xc546f2(0x72d)]('request\x20body:\x20'),y['verbose'](_0x42004c['body']);let _0xdaef54=await this['dataValidate']({'request':_0x42004c,'schema':v,'ClassRef':M,'execute':_0x7725ab=>O['getFlow'](_0x7725ab,_0x22133d)});_0x5f51e4[_0xc546f2(0x62a)](0xc8)[_0xc546f2(0x17c)](_0xdaef54);})[_0x400760(0x49b)](this[_0x400760(0x687)]('deleteflow'),..._0x29349b,async(_0x36c017,_0x2c7b4f)=>{const _0x5f2d1a=_0x400760;let _0x4a7f0f=_0x36c017[_0x5f2d1a(0x6a4)];y['verbose'](_0x5f2d1a(0x546)),y[_0x5f2d1a(0x72d)](_0x5f2d1a(0x1c2)),y[_0x5f2d1a(0x72d)](_0x36c017[_0x5f2d1a(0x6a4)]);let _0x165b63=await this['dataValidate']({'request':_0x36c017,'schema':v,'ClassRef':M,'execute':_0x5813ff=>O[_0x5f2d1a(0x21f)](_0x5813ff,_0x4a7f0f)});_0x2c7b4f['status'](0xc8)[_0x5f2d1a(0x17c)](_0x165b63);})[_0x400760(0x427)](this[_0x400760(0x687)]('allflows'),..._0x29349b,async(_0x538149,_0xb6fc1a)=>{const _0x1b9a22=_0x400760;y[_0x1b9a22(0x72d)](_0x1b9a22(0x5e9));let _0x4edcef=await this[_0x1b9a22(0x6b0)]({'request':_0x538149,'schema':v,'ClassRef':M,'execute':_0x3668f5=>O[_0x1b9a22(0x1b3)](_0x3668f5)});_0xb6fc1a[_0x1b9a22(0x62a)](0xc8)[_0x1b9a22(0x17c)](_0x4edcef);});}},Si=A(require('path')),se={};function wi(_0x53ebe5,_0x478116,_0x3c5fd3,_0x32b138){se[_0x53ebe5]||(se[_0x53ebe5]={}),se[_0x53ebe5][_0x478116]={'id':_0x478116,'response':_0x3c5fd3,'events':_0x32b138};}function yi(_0x163339,_0x25f2b6){!se[_0x163339]||!se[_0x163339][_0x25f2b6]||delete se[_0x163339][_0x25f2b6];}function J(_0x1afe9b,_0x4f8259,_0x7c0d69){const _0x1539c3=a0_0x3f352e;if(!se[_0x1afe9b])return;let _0x42837a=_0x1539c3(0x34b)+JSON[_0x1539c3(0x1bb)](_0x7c0d69)+'\x0a\x0a';Object[_0x1539c3(0x514)](se[_0x1afe9b])[_0x1539c3(0x62c)](_0x232675=>{const _0x479e92=_0x1539c3;_0x232675['events'][_0x479e92(0x2bf)](_0x4f8259)&&_0x232675[_0x479e92(0x7b2)]['write'](_0x42837a);});}function bi(){const _0x2833a8=a0_0x3f352e;let _0x430ad7={};for(let _0x2f86b7 in se)_0x430ad7[_0x2f86b7]=Object[_0x2833a8(0x514)](se[_0x2f86b7])['map'](_0x1e25ce=>({'id':_0x1e25ce['id'],'events':_0x1e25ce[_0x2833a8(0x25f)]}));return _0x430ad7;}var Mi=require(a0_0x3f352e(0x3bb)),As=require(a0_0x3f352e(0x3ef)),Rs=class{},Ro=new As[(a0_0x3f352e(0x6d9))]({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),Ao=new As[(a0_0x3f352e(0x6d9))]({'_id':{'type':String,'default':'config'},'WebhookGlobal':{'type':Ro},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Ee=R?.[a0_0x3f352e(0x61e)](Rs[a0_0x3f352e(0x5f4)],Ao,a0_0x3f352e(0x773)),Io=Si[a0_0x3f352e(0x164)][a0_0x3f352e(0x348)](__dirname,a0_0x3f352e(0x45a)),ke=(0x0,xt[a0_0x3f352e(0x5da)])(),To=S[a0_0x3f352e(0x427)](a0_0x3f352e(0xdc))[a0_0x3f352e(0x355)],re=[$a,Ra,Ta[To]];ke[a0_0x3f352e(0x509)](a0_0x3f352e(0xa7),xt[a0_0x3f352e(0x164)]['static'](Io))[a0_0x3f352e(0x427)]('/events/:instance',async(_0x2e7b0e,_0x2a68f4)=>{const _0x41281f=a0_0x3f352e;console[_0x41281f(0x133)]('bateu\x20events');let _0x2c4286=_0x2e7b0e[_0x41281f(0x3e1)]['instance'],_0x5b6f45=(_0x2e7b0e[_0x41281f(0x175)][_0x41281f(0x25f)]||'')[_0x41281f(0x384)](','),_0x207326=(0x0,Mi['v4'])();console[_0x41281f(0x133)](_0x41281f(0x10f),_0x2c4286),console[_0x41281f(0x133)](_0x41281f(0x601),_0x5b6f45);let _0x3e6928=S['get'](_0x41281f(0xdc))['API_KEY'],_0x34da98=_0x2e7b0e['query'][_0x41281f(0x6dc)];if(console[_0x41281f(0x133)](_0x41281f(0x187),_0x34da98),_0x3e6928[_0x41281f(0x785)]!==_0x34da98){console[_0x41281f(0x133)](_0x41281f(0x3d4));try{let _0x5ae3cb=await me[_0x41281f(0x554)][_0x41281f(0x71f)](_0x2c4286);if(console['log'](_0x41281f(0x3f4),_0x5ae3cb),!_0x5ae3cb||_0x5ae3cb[_0x41281f(0x6dc)]!==_0x34da98)return console[_0x41281f(0x133)](_0x41281f(0x38c)),_0x2a68f4['status'](0x191)[_0x41281f(0x5f8)](_0x41281f(0x11a));}catch(_0x471cd8){return console[_0x41281f(0x4b3)](_0x41281f(0xa8),_0x471cd8),_0x2a68f4[_0x41281f(0x62a)](0x191)[_0x41281f(0x5f8)](_0x41281f(0x3c4));}}if(!await Oe(_0x2c4286))return _0x2a68f4['status'](0x194)[_0x41281f(0x5f8)](_0x41281f(0x707));_0x2a68f4[_0x41281f(0x449)](_0x41281f(0x6b6),_0x41281f(0x504)),_0x2a68f4[_0x41281f(0x449)]('Cache-Control',_0x41281f(0x161)),_0x2a68f4['setHeader']('Connection',_0x41281f(0x189)),_0x2a68f4[_0x41281f(0x712)]();let _0x4ac5b4=_0x41281f(0x34b)+JSON[_0x41281f(0x1bb)]({'info':_0x41281f(0x1a1)})+'\x0a\x0a';_0x2a68f4['write'](_0x4ac5b4),wi(_0x2c4286,_0x207326,_0x2a68f4,_0x5b6f45),_0x2e7b0e['on']('close',()=>{const _0x500ba2=_0x41281f;console[_0x500ba2(0x133)]('Connection\x20closed\x20for\x20instance:\x20'+_0x2c4286),yi(_0x2c4286,_0x207326);});}),ke[a0_0x3f352e(0x436)]('/startFlow/:instance/:startID',async(_0x18f67a,_0x3d6f93)=>{const _0x5c2641=a0_0x3f352e;console[_0x5c2641(0x133)]('iniciando\x20fluxo\x20router');let _0x4b4019=_0x18f67a[_0x5c2641(0x3e1)][_0x5c2641(0x799)],_0x4c60d8=_0x18f67a['params'][_0x5c2641(0x545)],_0x723ab2=_0x18f67a[_0x5c2641(0x175)]['remoteJid']||'',_0x3fa2f0=_0x18f67a['body'];console[_0x5c2641(0x133)](_0x5c2641(0x227),_0x4b4019),console[_0x5c2641(0x133)]('StartID:',_0x4c60d8),console[_0x5c2641(0x133)](_0x5c2641(0x590),_0x723ab2),console[_0x5c2641(0x133)](_0x5c2641(0x57b),_0x3fa2f0);try{if(!await Oe(_0x4b4019))return _0x3d6f93[_0x5c2641(0x62a)](0x194)[_0x5c2641(0x5f8)]('Instância\x20não\x20encontrada.');let _0x37a029=await O[_0x5c2641(0x674)](_0x4b4019,_0x4c60d8,_0x723ab2,_0x3fa2f0);_0x3d6f93[_0x5c2641(0x5f8)](_0x37a029);}catch(_0x486cdc){console[_0x5c2641(0x4b3)](_0x486cdc),_0x3d6f93['status'](0x1f4)[_0x5c2641(0x5f8)](_0x5c2641(0x335));}}),ke[a0_0x3f352e(0x427)](a0_0x3f352e(0x178),(_0x6f281,_0x2f686c)=>{let _0xb29713=bi();_0x2f686c['json'](_0xb29713);})[a0_0x3f352e(0x427)]('/',(_0x1e4ae9,_0x1c2e12)=>{const _0xff6456=a0_0x3f352e;let _0x33da20=S['get'](_0xff6456(0x597))[_0xff6456(0x298)];if(_0x33da20){let _0x46cb80=encodeURIComponent(''+_0x33da20);_0x1c2e12[_0xff6456(0x49e)](_0xff6456(0x43b)+_0x46cb80);return;}let _0x5a14aa=S[_0xff6456(0x427)]('SSL_CONF'),_0x5c3e86=_0x5a14aa&&_0x5a14aa[_0xff6456(0xbb)][_0xff6456(0x384)]('/')[0x4];if(_0x5c3e86){let _0x3d2ce=encodeURIComponent(_0xff6456(0x4b5)+_0x5c3e86);_0x1c2e12[_0xff6456(0x49e)](_0xff6456(0x43b)+_0x3d2ce);}else _0x1c2e12[_0xff6456(0x49e)](_0xff6456(0x1f7));})['put']('/exit',...re,async(_0x4d53c5,_0xe03752)=>{const _0xe5c5c6=a0_0x3f352e;try{console['log'](_0xe5c5c6(0x105)),_0xe03752[_0xe5c5c6(0x62a)](0xc8)['json']({'message':_0xe5c5c6(0x48c)}),_0xe03752['on'](_0xe5c5c6(0x7e0),()=>process[_0xe5c5c6(0x1ec)](0x0));}catch(_0x2d14fe){console[_0xe5c5c6(0x4b3)]('Erro\x20ao\x20tentar\x20encerrar\x20a\x20API',_0x2d14fe),_0xe03752[_0xe5c5c6(0x62a)](0x1f4)[_0xe5c5c6(0x17c)]({'message':'Erro\x20ao\x20encerrar\x20a\x20API'});}})[a0_0x3f352e(0x7d7)]('/config',...re,async(_0x57c78e,_0x2d56c9)=>{const _0xa66601=a0_0x3f352e;try{let _0x13a6f7=_0x57c78e[_0xa66601(0x6a4)];await Ee[_0xa66601(0x372)]({},{'$set':_0x13a6f7},{'upsert':!0x0});let _0x5dbadb=await Ee['findOne']();_0x2d56c9[_0xa66601(0x17c)](_0x5dbadb);}catch(_0x3e1259){_0x2d56c9[_0xa66601(0x62a)](0x190)[_0xa66601(0x5f8)](_0x3e1259[_0xa66601(0x499)]);}})['get'](a0_0x3f352e(0x748),...re,async(_0x402b22,_0x3a89a8)=>{const _0x47b19c=a0_0x3f352e;try{let _0x5e7dfb=await Ee[_0x47b19c(0x312)]();if(!_0x5e7dfb)return _0x3a89a8[_0x47b19c(0x17c)]({});_0x3a89a8[_0x47b19c(0x17c)](_0x5e7dfb);}catch(_0x2c18fc){_0x3a89a8[_0x47b19c(0x62a)](0x1f4)[_0x47b19c(0x5f8)](_0x2c18fc[_0x47b19c(0x499)]);}})[a0_0x3f352e(0x509)]('/instance',new yt(S,...re)[a0_0x3f352e(0x5d4)])[a0_0x3f352e(0x509)](a0_0x3f352e(0x6f5),new It(...re)[a0_0x3f352e(0x5d4)])[a0_0x3f352e(0x509)](a0_0x3f352e(0x525),new ct(...re)[a0_0x3f352e(0x5d4)])['use'](a0_0x3f352e(0x3b9),new wt(...re)[a0_0x3f352e(0x5d4)])['use'](a0_0x3f352e(0x563),new Ot(...re)[a0_0x3f352e(0x5d4)])[a0_0x3f352e(0x509)](a0_0x3f352e(0x528),new _t(...re)[a0_0x3f352e(0x5d4)]);var m=class{constructor(..._0x426d0e){const _0x494eef=a0_0x3f352e;throw{'status':0x190,'error':_0x494eef(0x1ff),'message':_0x426d0e[_0x494eef(0x45c)]>0x0?_0x426d0e:void 0x0};}},oe=class{constructor(..._0x467397){const _0x2646e9=a0_0x3f352e;throw{'status':0x191,'error':_0x2646e9(0x5c8),'message':_0x467397[_0x2646e9(0x45c)]>0x0?_0x467397:void 0x0};}},Z=class{constructor(..._0x556bb8){const _0x246a66=a0_0x3f352e;throw{'status':0x193,'error':_0x246a66(0x7bc),'message':_0x556bb8[_0x246a66(0x45c)]>0x0?_0x556bb8:void 0x0};}},j=class{constructor(..._0x20cbaf){const _0x15e56a=a0_0x3f352e;throw{'status':0x194,'error':_0x15e56a(0x243),'message':_0x20cbaf[_0x15e56a(0x45c)]>0x0?_0x20cbaf:void 0x0};}},x=class{constructor(..._0x206e62){const _0x16c662=a0_0x3f352e;throw{'status':0x1f4,'error':'Internal\x20Server\x20Error','message':_0x206e62[_0x16c662(0x45c)]>0x0?_0x206e62:void 0x0};}},fe=require(a0_0x3f352e(0x7e7));async function Is(_0x44f2ad){const _0x38545f=a0_0x3f352e;let _0x39c542=new $(Is[_0x38545f(0x5f4)]),_0x271499=R[_0x38545f(0x4b1)](),_0xf4728b=_0x271499['db'](S[_0x38545f(0x427)]('DATABASE')[_0x38545f(0x68c)][_0x38545f(0x331)]+'-instances')[_0x38545f(0x48b)](_0x44f2ad),_0x40572e=async(_0x114a38,_0xd3bee2)=>{const _0x2de419=_0x38545f;try{return await _0x271499[_0x2de419(0xc8)](),await _0xf4728b['replaceOne']({'_id':_0xd3bee2},JSON['parse'](JSON[_0x2de419(0x1bb)](_0x114a38,fe[_0x2de419(0x7bf)]['replacer'])),{'upsert':!0x0});}catch{}},_0x4a0516=async _0x207226=>{const _0x56472f=_0x38545f;try{await _0x271499[_0x56472f(0xc8)]();let _0xb6d9d9=await _0xf4728b[_0x56472f(0x312)]({'_id':_0x207226}),_0x2dd65d=JSON[_0x56472f(0x1bb)](_0xb6d9d9);return JSON[_0x56472f(0x4d4)](_0x2dd65d,fe[_0x56472f(0x7bf)]['reviver']);}catch{}},_0x55c977=async _0x151a65=>{try{return await _0x271499['connect'](),await _0xf4728b['deleteOne']({'_id':_0x151a65});}catch{}},_0x1ce850=await _0x4a0516(_0x38545f(0xed))||(0x0,fe[_0x38545f(0x28a)])();return{'state':{'creds':_0x1ce850,'keys':{'get':async(_0x244780,_0x14ae4d)=>{const _0x22644b=_0x38545f;let _0xcfae6f={};return await Promise[_0x22644b(0x7c7)](_0x14ae4d['map'](async _0x1b1aaa=>{const _0x534eb8=_0x22644b;let _0x21b12d=await _0x4a0516(_0x244780+'-'+_0x1b1aaa);_0x244780===_0x534eb8(0x566)&&_0x21b12d&&(_0x21b12d=fe[_0x534eb8(0x605)][_0x534eb8(0x104)]['AppStateSyncKeyData']['fromObject'](_0x21b12d)),_0xcfae6f[_0x1b1aaa]=_0x21b12d;})),_0xcfae6f;},'set':async _0x374a3d=>{const _0x20b16=_0x38545f;let _0x3bf2e9=[];for(let _0x237740 in _0x374a3d)for(let _0x3d3d84 in _0x374a3d[_0x237740]){let _0x25a187=_0x374a3d[_0x237740][_0x3d3d84],_0x2d3c27=_0x237740+'-'+_0x3d3d84;_0x3bf2e9['push'](_0x25a187?_0x40572e(_0x25a187,_0x2d3c27):_0x55c977(_0x2d3c27));}await Promise[_0x20b16(0x7c7)](_0x3bf2e9);}}},'saveCreds':async()=>_0x40572e(_0x1ce850,_0x38545f(0xed))};}var Ds=A(require('long')),Ps=A(require(a0_0x3f352e(0x7e4))),kt=require('@whiskeysockets/baileys'),Ci=require('@redis/client'),Pt=require('@whiskeysockets/baileys'),Dt;function Oo(_0x329c48){const _0x48007f=a0_0x3f352e;return Dt||(Dt=(0x0,Ci[_0x48007f(0x6f8)])({'url':_0x329c48[_0x48007f(0x2f5)]}),Dt['connect']()),Dt;}var de=class u{constructor(_0x1fec7f,_0x38dd76){const _0x12657f=a0_0x3f352e;this[_0x12657f(0x7cf)]=_0x1fec7f,this['instanceName']=_0x38dd76,this[_0x12657f(0x112)]=new $(u[_0x12657f(0x5f4)]),this[_0x12657f(0x3de)]=Oo(_0x1fec7f);}set[a0_0x3f352e(0x527)](_0x348ee3){this['instanceName']=_0x348ee3;}async[a0_0x3f352e(0x503)](){const _0x24bac1=a0_0x3f352e;try{return await this[_0x24bac1(0x3de)]['sendCommand']([_0x24bac1(0x75c),this[_0x24bac1(0x7cf)][_0x24bac1(0x2ca)]+':*']);}catch(_0x37847a){this['logger']['error'](_0x37847a);}}async[a0_0x3f352e(0x77e)](_0x5c3b08,_0x2d179f){const _0x39b87b=a0_0x3f352e;try{let _0xfd881e=JSON['stringify'](_0x2d179f,Pt[_0x39b87b(0x7bf)][_0x39b87b(0x4c9)]);return await this['client'][_0x39b87b(0x19c)](this[_0x39b87b(0x7cf)]['PREFIX_KEY']+':'+this[_0x39b87b(0x78b)],_0x5c3b08,_0xfd881e);}catch(_0x3aefcd){this[_0x39b87b(0x112)][_0x39b87b(0x4b3)](_0x3aefcd);}}async[a0_0x3f352e(0xbf)](){const _0x3ec1f4=a0_0x3f352e;try{let _0x8ccb56=await this['client']['hGetAll'](this['redisEnv']['PREFIX_KEY']+':'+this['instanceName']);if(_0x8ccb56){for(let _0x1fecf8 in _0x8ccb56)Object[_0x3ec1f4(0x1e1)][_0x3ec1f4(0x6e9)][_0x3ec1f4(0x145)](_0x8ccb56,_0x1fecf8)&&(_0x8ccb56[_0x1fecf8]=JSON[_0x3ec1f4(0x4d4)](_0x8ccb56[_0x1fecf8],Pt[_0x3ec1f4(0x7bf)][_0x3ec1f4(0x394)]));return _0x8ccb56;}}catch(_0x3983cd){this['logger'][_0x3ec1f4(0x4b3)](_0x3983cd);}}async[a0_0x3f352e(0x752)](_0x296bd2){const _0x464ce7=a0_0x3f352e;try{let _0x2a3f10=await this[_0x464ce7(0x3de)]['hGet'](this[_0x464ce7(0x7cf)][_0x464ce7(0x2ca)]+':'+this[_0x464ce7(0x78b)],_0x296bd2);if(_0x2a3f10)return JSON[_0x464ce7(0x4d4)](_0x2a3f10,Pt[_0x464ce7(0x7bf)][_0x464ce7(0x394)]);}catch(_0x5765e4){this[_0x464ce7(0x112)][_0x464ce7(0x4b3)](_0x5765e4);}}async[a0_0x3f352e(0x3e4)](_0x50907b){const _0x387159=a0_0x3f352e;try{return await this[_0x387159(0x3de)][_0x387159(0x215)](this[_0x387159(0x7cf)]['PREFIX_KEY']+':'+this['instanceName'],_0x50907b);}catch(_0x4afc37){this['logger']['error'](_0x4afc37);}}async[a0_0x3f352e(0x1cd)](_0x246ea3){const _0x451785=a0_0x3f352e;try{return await this[_0x451785(0x3de)][_0x451785(0x397)](_0x246ea3||this['redisEnv']['PREFIX_KEY']+':'+this[_0x451785(0x78b)]);}catch(_0x4b83a0){this[_0x451785(0x112)][_0x451785(0x4b3)](_0x4b83a0);}}};async function Ts(_0x3ba211,_0x29e63f){const _0x5aa705=a0_0x3f352e;let _0x11d1cf=new $(Ts[_0x5aa705(0x5f4)]),_0x37833f=new de(_0x3ba211,_0x29e63f),_0x3774c4=async(_0x41d085,_0x589fbc)=>{const _0x45ab1a=_0x5aa705;try{return await _0x37833f[_0x45ab1a(0x77e)](_0x589fbc,_0x41d085);}catch(_0x5a23fa){return _0x11d1cf[_0x45ab1a(0x4b3)]({'localError':_0x45ab1a(0x77e),'error':_0x5a23fa});}},_0x32258d=async _0x5bc38c=>{const _0x405d36=_0x5aa705;try{return await _0x37833f[_0x405d36(0x752)](_0x5bc38c);}catch(_0x494fb1){_0x11d1cf[_0x405d36(0x4b3)]({'readData':'writeData','error':_0x494fb1});return;}},_0x2a5078=async _0x181de4=>{const _0x7225cd=_0x5aa705;try{return await _0x37833f[_0x7225cd(0x3e4)](_0x181de4);}catch(_0x3645fc){_0x11d1cf['error']({'readData':_0x7225cd(0x3e4),'error':_0x3645fc});}},_0xb00af0=await _0x32258d(_0x5aa705(0xed))||(0x0,kt[_0x5aa705(0x28a)])();return{'state':{'creds':_0xb00af0,'keys':{'get':async(_0x35ef45,_0x5e2c87)=>{const _0x206556=_0x5aa705;let _0x3b4da2={};return await Promise[_0x206556(0x7c7)](_0x5e2c87[_0x206556(0xff)](async _0x4b3983=>{const _0x519baf=_0x206556;let _0xcc2f13=await _0x32258d(_0x35ef45+'-'+_0x4b3983);_0x35ef45===_0x519baf(0x566)&&_0xcc2f13&&(_0xcc2f13=kt[_0x519baf(0x605)][_0x519baf(0x104)][_0x519baf(0x781)]['fromObject'](_0xcc2f13)),_0x3b4da2[_0x4b3983]=_0xcc2f13;})),_0x3b4da2;},'set':async _0xf4767a=>{const _0x39e0b1=_0x5aa705;let _0x537cf0=[];for(let _0x374ba8 in _0xf4767a)for(let _0x41dbc7 in _0xf4767a[_0x374ba8]){let _0x5d15e1=_0xf4767a[_0x374ba8][_0x41dbc7],_0x1d0fe1=_0x374ba8+'-'+_0x41dbc7;_0x537cf0[_0x39e0b1(0x5ea)](_0x5d15e1?await _0x3774c4(_0x5d15e1,_0x1d0fe1):await _0x2a5078(_0x1d0fe1));}await Promise['all'](_0x537cf0);}}},'saveCreds':async()=>await _0x3774c4(_0xb00af0,_0x5aa705(0xed))};}var L=A(require('fs')),X=require(a0_0x3f352e(0x3bb)),jt=A(require(a0_0x3f352e(0x6c6))),Ne=require(a0_0x3f352e(0xb7)),Ei=require(a0_0x3f352e(0x2f3)),vi=require('util'),Ni=A(require(a0_0x3f352e(0x27f))),ve=class extends _{constructor(_0x396361,_0x24d057,_0x360f8d){const _0x511d1a=a0_0x3f352e;super(_0x24d057),this['cacheInstanceModel']=_0x396361,this['configService']=_0x24d057,this[_0x511d1a(0x40b)]=_0x360f8d;}async['createOrUpdate'](_0x33e012,_0x12156f){const _0x587402=a0_0x3f352e;try{if(this[_0x587402(0x13f)]['ENABLED']){console[_0x587402(0x133)](_0x587402(0x7af)+_0x12156f+_0x587402(0x447),_0x33e012);let _0x453e96=await this[_0x587402(0x434)][_0x587402(0x76e)]({'_id':_0x12156f},{'$set':_0x33e012},{'new':!0x0,'upsert':!0x0});return console[_0x587402(0x133)](_0x587402(0x4e6),_0x453e96),_0x453e96;}}catch(_0xaa115b){throw console[_0x587402(0x4b3)](_0x587402(0x12e),_0xaa115b),_0xaa115b;}return null;}async[a0_0x3f352e(0xe9)](_0x35a16e){const _0x160ddc=a0_0x3f352e;try{let _0x348e88=I(_0x35a16e[_0x160ddc(0x56d)]);return{'deletedCount':(await this[_0x160ddc(0x434)]['deleteOne'](_0x348e88))[_0x160ddc(0x329)]};}catch(_0x14eb4d){return{'error':_0x14eb4d?.[_0x160ddc(0x123)]()};}}async[a0_0x3f352e(0x312)](_0x424583){const _0x43cd9f=a0_0x3f352e;try{let _0x20ae0d=I(_0x424583[_0x43cd9f(0x56d)]);return await this[_0x43cd9f(0x434)][_0x43cd9f(0x312)](_0x20ae0d)['lean']();}catch{return null;}}},Lt=(0x0,vi[a0_0x3f352e(0x506)])(Ei[a0_0x3f352e(0x7d5)]),_o=S[a0_0x3f352e(0x427)](a0_0x3f352e(0x41c)),Os=class{constructor(){const _0x61855f=a0_0x3f352e;this[_0x61855f(0x330)]=new ve(Be,S),(!this[_0x61855f(0x4c0)]||!this[_0x61855f(0x23b)])&&_o&&this['detectIPv6PrefixAndInterface']()[_0x61855f(0x41f)](()=>{const _0x1ff380=_0x61855f;console[_0x1ff380(0x133)](_0x1ff380(0x304)+this[_0x1ff380(0x4c0)]),console['log'](_0x1ff380(0x780)+this[_0x1ff380(0x23b)]);})['catch'](_0x14adbd=>{const _0xf5a1b2=_0x61855f;console[_0xf5a1b2(0x4b3)](_0xf5a1b2(0x256)+_0x14adbd[_0xf5a1b2(0x499)]);});}async[a0_0x3f352e(0x143)](){const _0x985cb6=a0_0x3f352e;try{let {stdout:_0xf6b003}=await Lt(_0x985cb6(0x529));console[_0x985cb6(0x133)](_0x985cb6(0x4a5)+_0xf6b003);let _0x53fec3=_0xf6b003['split']('\x0a')[_0x985cb6(0xff)](_0xb10eb4=>_0xb10eb4['split']('\x20')[0x0])['filter'](_0x20095c=>!_0x20095c[_0x985cb6(0x2bf)]('lo')&&!_0x20095c[_0x985cb6(0x2bf)]('docker')&&!_0x20095c['includes'](_0x985cb6(0x72b))&&!_0x20095c[_0x985cb6(0x2bf)]('wl')&&!_0x20095c[_0x985cb6(0x2bf)]('@'));if(console[_0x985cb6(0x133)]('Filtered\x20network\x20interfaces:\x20'+_0x53fec3),_0x53fec3[_0x985cb6(0x45c)]===0x0)throw new Error(_0x985cb6(0x75b));this[_0x985cb6(0x23b)]=_0x53fec3[0x0];let {stdout:_0x1e4d05}=await Lt('ip\x20-6\x20addr\x20show\x20dev\x20'+this[_0x985cb6(0x23b)]);console[_0x985cb6(0x133)](_0x985cb6(0x5c4)+_0x1e4d05);let _0x352791=_0x1e4d05[_0x985cb6(0x384)]('\x0a')[_0x985cb6(0x71f)](_0x2954cb=>_0x2954cb[_0x985cb6(0x2bf)](_0x985cb6(0x2fb))&&_0x2954cb[_0x985cb6(0x2bf)](_0x985cb6(0xc7)));if(!_0x352791)throw new Error(_0x985cb6(0x3d1));let _0x362186=_0x352791[_0x985cb6(0x235)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x362186)throw new Error('Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address');let [_0x28c29b,_0x533c55,_0x1d77e1]=_0x362186,_0x300ab3=Math[_0x985cb6(0x62b)](Number(_0x1d77e1)/0x10),_0x4472d5=Number(_0x1d77e1)%0x10,_0x124568=_0x533c55[_0x985cb6(0x384)](':')[_0x985cb6(0x4d9)](0x0,_0x300ab3)['join'](':');if(_0x4472d5>0x0){let _0xf4224f=_0x533c55['split'](':')[_0x300ab3],_0x22ff2a=0xffff<<0x10-_0x4472d5&0xffff,_0x36ebe4=(parseInt(_0xf4224f,0x10)&_0x22ff2a)[_0x985cb6(0x123)](0x10)[_0x985cb6(0x494)](0x4,'0');_0x124568+=':'+_0x36ebe4;}this[_0x985cb6(0x4c0)]=_0x124568+':';}catch(_0x569ef7){console[_0x985cb6(0x4b3)](_0x985cb6(0x1d5),_0x569ef7);}}async[a0_0x3f352e(0x67c)](_0x33491b){const _0x1a3bf8=a0_0x3f352e;let _0x1d4396=_0x1a3bf8(0x23d)+_0x33491b+'/64\x20dev\x20'+this['networkInterface'];try{await Lt(_0x1d4396),console[_0x1a3bf8(0x133)](_0x1a3bf8(0x584)+_0x33491b);}catch(_0x3a5b2d){console[_0x1a3bf8(0x4b3)]('Error\x20adding\x20IPv6\x20address:\x20'+_0x3a5b2d);}}async[a0_0x3f352e(0x313)](_0x537fb8){const _0x3bdc9c=a0_0x3f352e;let _0x10af90=_0x3bdc9c(0x1a9)+_0x537fb8+_0x3bdc9c(0x170)+this[_0x3bdc9c(0x23b)];try{await Lt(_0x10af90),console[_0x3bdc9c(0x133)](_0x3bdc9c(0x338)+_0x537fb8);}catch(_0x20005b){console['error'](_0x3bdc9c(0x63a)+_0x20005b);}}[a0_0x3f352e(0x7d0)](){const _0xf35d8d=a0_0x3f352e;return _0xf35d8d(0x5e2)[_0xf35d8d(0x166)](/X/g,()=>'0123456789ABCDEF'[_0xf35d8d(0x315)](Math[_0xf35d8d(0x62b)](Math['random']()*0x10)));}['ip6eui'](_0x403fe4,_0xbf3117){const _0x53a5d6=a0_0x3f352e;let _0x1a2bea=_0xbf3117[_0x53a5d6(0x384)](':');return _0x1a2bea[0x0]=(parseInt(_0x1a2bea[0x0],0x10)^0x2)[_0x53a5d6(0x123)](0x10)[_0x53a5d6(0x494)](0x2,'0'),''+_0x403fe4+_0x1a2bea[0x0]+_0x1a2bea[0x1]+':'+_0x1a2bea[0x2]+'ff:fe'+_0x1a2bea[0x3]+':'+_0x1a2bea[0x4]+_0x1a2bea[0x5];}[a0_0x3f352e(0x3a0)](){const _0x2a9275=a0_0x3f352e;let _0x4c0808=this[_0x2a9275(0x4c0)];_0x4c0808[_0x2a9275(0x3ff)](':')||(_0x4c0808+=':');let _0x1e5073=this[_0x2a9275(0x7d0)]();return this['ip6eui'](_0x4c0808,_0x1e5073);}['isValidIPv6Config'](_0x5b840c){return new RegExp('^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$')['test'](_0x5b840c);}async[a0_0x3f352e(0x29c)](_0x14ad82){const _0x23e685=a0_0x3f352e;let _0x436410=[{'url':'https://ipv6.jsonip.com','parse':_0x2542df=>_0x2542df['ip']},{'url':_0x23e685(0x198),'parse':_0x2d1a03=>_0x2d1a03['ip']},{'url':'https://ifconfig.me/ip','parse':_0x3fb599=>_0x3fb599[_0x23e685(0x1e6)]()},{'url':'https://v6.ident.me','parse':_0x590e8f=>_0x590e8f[_0x23e685(0x1e6)]()}],_0x2188af=_0x436410[Math[_0x23e685(0x62b)](Math[_0x23e685(0x52f)]()*_0x436410[_0x23e685(0x45c)])];try{let _0xb1361e=await Ni['default'][_0x23e685(0x427)](_0x2188af[_0x23e685(0x163)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x14ad82}}),_0x4a438d=_0x2188af[_0x23e685(0x4d4)](_0xb1361e[_0x23e685(0x742)]);return _0x4a438d[_0x23e685(0x711)]()===_0x14ad82[_0x23e685(0x711)]()?(console['log'](_0x23e685(0x188)+_0x14ad82),!0x0):(console['error'](_0x23e685(0x5b3)+_0x14ad82+_0x23e685(0x219)+_0x4a438d),!0x1);}catch(_0x1626e5){return console['error']('Error\x20testing\x20IP\x20with\x20'+_0x2188af[_0x23e685(0x163)]+':\x20'+_0x1626e5[_0x23e685(0x499)]),!0x1;}}async['createIPv6'](_0x466831,_0x47c0ce){const _0x2f0a31=a0_0x3f352e;if(!this[_0x2f0a31(0x4c0)]||!this[_0x2f0a31(0x23b)])return console[_0x2f0a31(0x4b3)]('IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.'),null;let _0x24b894;do _0x24b894=this[_0x2f0a31(0x3a0)](),console[_0x2f0a31(0x133)](_0x2f0a31(0x75a)+_0x24b894);while(!await this[_0x2f0a31(0x4a8)](_0x24b894));await this[_0x2f0a31(0x67c)](_0x24b894),console['log'](_0x2f0a31(0x3b4)+_0x24b894);let _0x4ad005={'_id':_0x466831+'-'+_0x47c0ce,'ip':_0x24b894},_0x2e27ea=await this[_0x2f0a31(0x330)]['createOrUpdate'](_0x4ad005,_0x4ad005[_0x2f0a31(0x68d)]);return console['log']('Cache\x20instance\x20update\x20result:\x20'+_0x2e27ea),_0x24b894;}async[a0_0x3f352e(0x4a8)](_0x4d34f1){const _0x3a406a=a0_0x3f352e;return this[_0x3a406a(0x21d)](_0x4d34f1)?!await this[_0x3a406a(0x330)][_0x3a406a(0x312)]({'where':{'ip':_0x4d34f1}}):!0x1;}async[a0_0x3f352e(0x107)](_0x5a9496,_0x5deee0){const _0x43b4e3=a0_0x3f352e;let _0x9fa0e5=_0x5a9496+'-'+_0x5deee0,_0x3aaa25=await this['cacheInstanceRepository'][_0x43b4e3(0x312)]({'where':{'_id':_0x9fa0e5}});_0x3aaa25&&_0x3aaa25['ip']&&(await this[_0x43b4e3(0x313)](_0x3aaa25['ip']),await this[_0x43b4e3(0x330)][_0x43b4e3(0xe9)]({'where':{'_id':_0x9fa0e5}}));}},xo=new Os(),ae=xo,ks=a0_0x3f352e(0x3e2),_i,pe=null,Oa=null,Do=0x3,Po=null,$i=S['get'](a0_0x3f352e(0xdc))['API_KEY']['KEY'],Ri=S[a0_0x3f352e(0x427)]('PROXY');async function ko(){const _0x270c15=a0_0x3f352e;let _0xb9d6ec=await Ee['findOne']();pe=_0xb9d6ec?.['WebhookGlobal']??null,Po=_0xb9d6ec?.['DaysToDelete']??null,ks=_0xb9d6ec?.[_0x270c15(0x770)]??'Safari',_i=_0xb9d6ec?.[_0x270c15(0x1ae)]??W??_0x270c15(0x7e9);}function a0_0x26ed(){const _0x5c3f0b=['GROUPS_UPSERT','convertedOptions','writeData','startsWith','Network\x20Interface\x20detected:\x20','AppStateSyncKeyData','set','qrcode-terminal','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.','KEY','createNewConversation','request\x20received\x20in\x20getFlow','MAX_SAFE_INTEGER','):\x20Enviando\x20mídia','digest','instanceName','autoCompleteMessages','setting','application/json','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','updateGroupPicture','Erro\x20ao\x20editar\x20agentes','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','instanceCount','#00a1f2','saveMediaToFile','Conversa\x20deletada\x20com\x20sucesso.','\x1b[33m','CONTACTS_UPSERT','instance','flowPrefixCommand','Limpando\x20logs\x20do\x20PM2...','):Image\x20created','fileLength','\x20minutos...','leadInfo.','getLabelModelForOwner','):\x20tem\x20blocks','substring','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','readdirSync','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','pow','):\x20[messages.update]\x20group\x20ignored','__esModule','AUTHENTICATION_API_KEY','Erro\x20ao\x20deletar\x20mensagens:','sending','findAndReplace','audio/ogg;\x20codecs=opus','SERVER_PORT','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','public','dark','response','.jwt','chats.upsert','sendPresenceUpdate','list','updateProfilePicture','END:VCARD','):\x20Error\x20processing\x20conditions:\x20','cacheContactModel','messageHandle','Forbidden','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','repository','BufferJSON','instanceInfo','findManyByIds','\x20não\x20encontrado\x20para\x20cópia','EMAIL','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','getConversation','):\x20Enviando\x20enquete','all','STORE_CLEANING_TERMINAL','addBlock','):\x20Flow\x20desativado','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','isRunning','creds.update','checkAndRestartProcess','redisEnv','randomMac','Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral','unreadcount','leadInfo.atendimentoAberto','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','exec','toLocaleString','put','content','Rótulo\x20inválido\x20ou\x20sem\x20ID.','contacts.update','displayName','firstValue','defineProperty','myAppStateKeyId','groupJid','finish','updateMissingTags','groupdata','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','node-cache','getPrototypeOf','buttonId','@whiskeysockets/baileys','mkdirSync','uazapi','getContentType','groupMetadata','Erro\x20ao\x20deletar\x20a\x20conversa','chatId','OrAnd','Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global','Error\x20while\x20deleting\x20message\x20for\x20everyone','Not\x20allowed\x20by\x20CORS','getHours','CONECTADO\x20À\x20UAZAPI','pollCreationMessage','/media','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','API_KEY','uazapiSendContact','remove','startCommandWord','):\x20Query\x20params:','isArray','\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','STORE_CHATS','\x20minutos','sendDataWebhook','Erro\x20ao\x20editar\x20a\x20conversa','Fluxo\x20agendado\x20pelo\x20fluxo\x20','Erro\x20ao\x20alterar\x20fluxo','request\x20received\x20in\x20updateAutoCompleteMessages','crypto','editflowblock','listType','queue','FULLCHAIN','contact_blacklist','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','organization','getAllData','):Trying\x20to\x20get\x20business\x20profile','Erro\x20ao\x20importar\x20chats','privacySettings','Instância:\x20','Stack\x20trace:','createSectionsFromValues',',\x20Expiration\x20Time:\x20','global','connect','):\x20newSecondValue\x20após\x20replaceVariables:','Fluxo\x20não\x20encontrado\x20na\x20memória.','gifPlayback','https://api.ipify.org?format=json','isCommunityAnnounce','Erro\x20ao\x20substituir\x20variáveis\x20para\x20','processclearVariables','$set','):\x20Editando\x20grupo\x20do\x20fluxo...','request\x20received\x20in\x20deleteDoneMessages',',\x20valor\x20passado:\x20\x22','/create','request_time','readreceipts','createWebhook','protocolMessage','):\x20debug\x20alterando\x20this.AutomateSystem','IPv6\x20recriado\x20após\x20falhas\x20de\x20reconexão.','leaveGroup','AUTHENTICATION','sendText','):\x20Criou\x20conversa\x20no\x20startFlow','URL\x20não\x20disponível','Falha\x20ao\x20recriar\x20IPv6.','statusMessage','toggleEphemeral','generateWAMessageFromContent','pollMessage','bodyStringErrorParse','\x0a{\x20instance:\x20','):\x20Going\x20to\x20','proxy:\x20','deleteOne',',\x20Novo\x20tamanho:\x20','/media/','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','creds','cache','#fe9dfe','getMessage','item','Garbage\x20collection\x20não\x20está\x20disponível.','true','cleanStore','getDelay','\x20não\x20encontrado\x20para\x20atualização.','ListMessage','cachedContacts-whatsapp','Erro\x20ao\x20atualizar\x20o\x20flow.','URL\x20completa:','updateMessage','deleteChat','processUazapi','removeInstance','map','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','storePath','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','fetchPrivacySettings','Message','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20','removeIPv6ById','):\x20Grupo\x20','validate','request\x20received\x20in\x20fetchConversation','console','CREDENTIALS','SSL_CONF_FULLCHAIN','Invalid\x20format','Instance\x20ID:','editFlow','contains','logger','menuIgnoreNonVotes','editMessagesInGroup','\x22\x20-\x20NOT\x20CONNECTION','format','username','#f64847','\x5cd+','API\x20Key\x20inválida.','\x1b[1m','localWebhook','closeExistingConversations','GROUP_PARTICIPANTS_UPDATE','groupParticipantsUpdate','/wa-groups','INFO','no.connection','toString','spawn','eventemitter2','updateAll','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','sendMessageWithTyping','Subdomínio\x20não\x20encontrado','Valor\x20da\x20URL\x20recuperada:','_activatedCount','pollCreationMessageV2','utf-8','Erro\x20ao\x20atualizar\x20cacheInstance:','):\x20Buscando\x20todos\x20os\x20fluxos...','LabelModel','description','trimmed','log','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','chatLog','fetchBusinessProfile','processblock','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','messageSecret','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','synchronizeAndMapFlows','awaitSeconds','status.instance','delayChatLabel_MAX_RETRIES','dbSettings','findByIdAndUpdate','updateAgent','updateMediaMessage','detectIPv6PrefixAndInterface','groupRequestParticipantsList','call','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.','statusCode','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','groupBetterSetting','):Converted\x20image\x20deleted','variable','updateParticipant','stateConnection','listResponseMessage','):\x20Removendo\x20\x27','saveCreds','reconnectAttempts','\x1b[40m','pollCreationMessageKey','getTime','joinGroup','Error\x20finding\x20many\x20contacts:','archiveChat','):\x20whoCanUse\x20before\x20validation:\x20','lastReceivedMessage','rows','updateChatGroupData','Erro\x20ao\x20editar\x20o\x20chat','):\x20ev.flush\x20realizado','realVariables','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:','Module\x20-\x20ON','no-cache','messageId','url','default','chatModify','replace','enabled','isListOfNumbers','participant','\x20com\x20sucesso.','groupadd','sticker','atendimentoAberto','#d8e651',']\x20(','/64\x20dev\x20','connection.update','groups','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','initializeQueue','query','ConversationModel','getflow','/clients-info','groupRevokeInvite','path','http','json','fetchProfile','contacts.upsert','dropIndex','The\x20','getChatModelForOwner','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','remoteJid','EMAIL:','audio','stanzaId','API\x20Key\x20from\x20Request:','IP\x20confirmed:\x20','keep-alive','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','groupFetchAllParticipating','Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.','updateStopChat','processApiRequest','STORE','insertMany','):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção','onWhatsApp','SINGLE_SELECT','round','lastBlockId','now','textMessage','https://api64.ipify.org?format=json','RECONNECT_TIME_FRAME','owner','):\x20Procurando\x20mensagens\x20para\x20envio','hSet','unlocked','unavailable','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','subjectTime','Conexão\x20estabelecida','buttons','):\x20Entrou\x20na\x20função\x20scheduleFlow','isBusiness','\x20do\x20chat\x20','webhookModel','font','messages','ip\x20-6\x20addr\x20del\x20','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','lowerCase','):\x20Editando\x20replyOption...','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','connectedName','ON\x20-\x20dbName:\x20','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','sections','allFlows','/instance/delete','upsertChats','inviteCode','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','findGroupInfo','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','lastCondition','stringify','/instance/create','FlowRouter','):Desconectado,\x20parando\x20execução.','chats.update','scheduleMessage',',\x20pairCode:\x20','request\x20body:\x20','chats.delete','lastMessage','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','METHODS','cwd','_remoteJid','):\x20Editando\x20mensagens\x20no\x20grupo...','envProcess','onTime','dbInstance','delAll','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','groupHandler','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','updateGroupsAddPrivacy','fetchLabels','CHATS_SET','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','longitude','@broadcast','descOwner','editflowvariable','STATUS_INSTANCE','stopMinutesMaxActives','^\x5cd+([-]\x5cd+)*@g.us$','request\x20received\x20in\x20createFlow','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:','prototype','addMessagesToGroup','request\x20received\x20in\x20getConversation','replyOption','descId','trim','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','.error','delaySecMax','Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...','messageStubParameters','exit','apirequest','profilePicture','Imagem\x20não\x20encontrada','authService','--------------------------------------','fone','\x20depois\x20','modifiedCount','logout','\x20instance\x20does\x20not\x20exist','https://uazapi-plugin.bubbleapps.io/','Error\x20updating\x20message\x20status:','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','contactMessage','\x20minutos.\x20Será\x20às\x20','rowId','evaluateCondition','DELIVERY_ACK','Bad\x20Request','dbClient','2017164QGmKfK','updateAutoCompleteMessages','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','#9568cf','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','stopIfLastReturnedError','media','editedMessage','restart','/exit','saveConversationToDatabase','webhook','Validate','\x1b[31m','):\x20Buscando\x20conversas...','):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20','qrCode','https://chat.whatsapp.com/','announcement','Button\x20IDs\x20cannot\x20be\x20repeated.','hDel','loadEnv','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','):\x20\x27Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x27,\x20',',\x20received\x20','groups_ignore','text','notas','isValidIPv6Config','jsonwebtoken','deleteFlow','mediatype','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','STORE_CONTACTS','1082991jwIUXA','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','replyOptions','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','Instance\x20Name:','Não\x20respondeu\x20com\x20a\x20enquete.','.webp','pushName','isAdmin','sendMessageAck','flowConfig','Database\x20is\x20not\x20enabled','../env.yml','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','):Image\x20path:\x20','apiResponse','setNewValue','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','match','CORS_METHODS','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','lastUpdate','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','convertToWebP','networkInterface','chatHandle','ip\x20-6\x20addr\x20add\x20','):\x20Iniciando\x20bot...','waitingMenu_replyOptions','copyBlock','fileName','value','Not\x20Found','GROUPS_UPDATE','deleteBlock','@s.whatsapp.net','#fed428','updateCustomFields','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','):\x20Conversa\x20atualizada\x20em\x20memória','):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20','\x1b[33m\x1b[1m','):\x20Enviando\x20contato','updateStatusPrivacy','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','\x20contacts','presence.update','AutomateFunctions','findParticipants','not_announcement','sendLocation','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','#6f7bcf','AddChatLabel','pendingMessages','emit','1205220bLteTj','variables','prepareMediaMessage','messages.set','events','https://api.elevenlabs.io/v1/text-to-speech/','.docx','Parando\x20aplicação...','addReplyOption','DEBUG','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','SEND_MESSAGE','menuType','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','lastRealGroupsFetch','sendStatus','findAndReplaceRegex','updateReadReceiptsPrivacy','request\x20received\x20in\x20updateCustomFields','optionDescription','archive','updateConversation','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','flowStopMinutes','match_last_seen','sendWhatsAppAudio','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','when','updatePresence','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','.xls','sectionsToString','/instance/connectionState','awaitingApproval','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','prepareWAMessageMedia','axios','replaceVariablesInObject','beforeExit','muteEndTime','Error\x20parsing\x20JSON:','/wa-presence','Erro\x20ao\x20executar\x20bulkWrite:','getMinutes','Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants','WA\x20MODULE','pop','initAuthCreds','presence','notEqual','document','poll','request\x20received\x20in\x20getAutomateSystem','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','getOwnPropertyDescriptor',',\x20qrcodeCount:\x20','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.','):\x20Criando\x20fluxo\x20compartilhado...','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','Valor\x20inicial:\x20\x22','Erro\x20ao\x20buscar\x20a\x20conversa','URL','Message\x20absent\x20from\x20node','authentication','sendMenu','testIPv6','ignoreGroups','USER','ScheduleMessageModel','selectableCount','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20','DELETED','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','.mp4','replaceValue','oldToken','#ffffff','output','/instance/fetchInstances','PRODUCT_LIST','-instances','saveTextReply','presenceSubscribe','caption','groupId','getBusinessProfile','editFlowVariable','flow','boolean','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','videoMessage','findWebhook','connectionClosed','StatusJidList\x20is\x20required','key','):\x20[messages.upsert]\x20group\x20ignored','block','debug','includes','\x20}\x0a','verifyWhatsAppNumber','Retornando\x20grupos\x20SEM\x20cache','Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','PASSWORD','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','getScheduleMessage','\x1b[32m','findAndUpdateCacheContact','parseInt','PREFIX_KEY','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','Button\x20texts\x20cannot\x20be\x20repeated','loggedOut','fetchConversation','conversation','isBase64','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName','latitude','automateSystem','CONTACTS_UPDATE','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','CONNECTION_UPDATE','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','Número\x20não\x20possui\x20WhatsApp.','1303070THRZsj','request_method','SERVER_OFFLINE','title','canSendMessage','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','cacheContact','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','\x20atualizado\x20com\x20sucesso.\x20Ação:\x20','reorderReplyOptions','varedits','upperCase','decryptPollVote','condition','birthtime','):\x20enviado\x20para\x20[','Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.','*\x0a\x0a','menuExpiredMessage','REDIS_URI','pollUpdateMessage','conversationTimestamp','Read\x20messages','Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20','testingWith','):\x20Editando\x20variável\x20do\x20fluxo...','child_process','Erro\x20inesperado\x20em\x20processvaredits:\x20','URI','Instance\x20\x22','AutomateSystem','desativadoFluxoAte','HOST','ScheduleMessage','inet6','flush','mediaSticker','AddUserFlow','findRealGroups','_Contacts','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','ButtonsMessage','ChatModel','IPv6\x20Prefix\x20detected:\x20','\x20quoted:\x20','):\x20Label\x20','delayChatLabel',',\x20global:\x20','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','chats.set','findConversation','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','importChatsBatch','\x20:\x20','10120923xzfOlK','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','findOne','removeIPv6','):\x20Editando\x20bloco...','charAt','sendSticker','findFlow','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','):\x20Mensagem\x20já\x20enviada\x20para\x20','silent','cleaningUp','Erro\x20ao\x20tentar\x20updateCustomFields','updateOneById','autoCompleteMessages.command_1','createIPv6','enviado\x20para','Erro\x20ao\x20criar\x20fluxo','.X-ABLabel:Celular\x0a','createflow','sendAudio','create','sendList','editflowvaredit','?timestamp=','deletedCount','startFlow','\x20\x1b[0m','updateProfileName','defineAuthState','Authentication\x20error','reduce','cacheInstanceRepository','DB_PREFIX_NAME','last','InstancesAlterarTodas','flows','Erro\x20ao\x20iniciar\x20o\x20fluxo.','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','ListType','IPv6\x20address\x20removed:\x20','video-cover.png','_activedCount','Variáveis\x20não\x20encontradas:','max','.extension',',\x20fará\x20nova\x20verificação\x20em\x20','getMessageModelForOwner','SendScheduleMessage','[AUTH]\x20Database\x20is\x20not\x20enabled','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','):\x20Criando\x20fluxo...','sort','groupToggleEphemeral','viewOnceMessageV2','maxActives','join','stack','\x20Tentativa\x20de\x20reconexão\x20','data:\x20','extractMessageContent','sendPoll','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','editFlowReply','pollOnReplyDelete','Partes\x20do\x20domínio:','):\x20Entrou\x20na\x20função\x20processawaitSeconds','):\x20Ignoring\x20group\x20messages.','mongodb','TYPE','connectionState','blocks','app','arraybuffer','profileName','_pushName','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','verifiedName','flowName','Erro\x20ao\x20copiar\x20o\x20documento','CHATS_UPSERT','success','Falta\x20informação\x20para\x20a\x20chamada\x20API','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','scheduled','recording','):\x20Adicionando\x20\x27','indexOf','qrcode.updated','CORS','imported','editScheduleMessage','Erro\x20ao\x20editar\x20o\x20bloco:\x20','createJid','):Processing\x20audio','group','waitingMenu_id','updateOne','timeout','joinGroupValidate','collections','uazapiSendText','sendMessage','some','createConnection','cachedData-whatsapp','entries','toBRL','):\x20Deletando\x20conversa...','):\x20Chat\x20','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','_error','test','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','Erro\x20ao\x20iniciar\x20fluxo:\x20','split','whoCanUse','creation','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','src','Primeiro\x20Valor:\x20','audio/ogg','):\x20Flow\x20\x27','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','.\x20Pulando.','HeaderType','fetchContacts','\x0aFN:','yes','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','reviver','local_map','function','del','Error\x20fetching\x20group','extractPhoneNumber','loadWebhook','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','nomecompleto','Chat\x20com\x20ID\x20','waInstances','uazapiDeleteMessage','generateRandomIPv6','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','Sistema\x20atualizado\x20com\x20sucesso!','from','readFileSync','ms\x20(tentativa\x20','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','valid','):\x20Buscando\x20conversa...','locationMessage','groupSetting','jid','\x1b[30m','group-participants.update','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','):\x20Ler\x20mensagem','\x20minutos\x20verificará\x20novas\x20mensagens','variablesNotFound','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','findOrCreate','Configured\x20IPv6:\x20','\x0a*Você\x20respondeu*:\x0a','.ogv','.svg','deleteMessage','/group','Deletion\x20failed','uuid','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','sim','Falhou\x20ao\x20encontrar\x20chat\x20','lastSendMessage','.jpg','replaceVariablesChat','PENDING','getConversationModelForOwner','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','):Output\x20path:\x20','uazapiSendLocation','namespace','formatBRNumber','40eUnNMU','getScheduleMessageModelForOwner','wuid','Telefone:\x20','getUniqueFlowName','Mensagem\x20não\x20suportada','processPollUpdateMessage','Erro\x20ao\x20deletar\x20chat:','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','Falha\x20ao\x20processar\x20a\x20solicitação','reconnectTimestamps','env.KEY\x20!==\x20key','chat\x20não\x20encontrado','whatsappNumber','evaluateConditionTest','headerString','\x20horas\x20e\x20','triedToSend','#ffae04','pre','fetchMessages','client','Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup','/:instanceName','params','Safari','tags','removeData','originalUrl','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo','_Chats','Valor\x20de\x20find\x20ou\x20replace\x20ausente','createAndSave','?authSource=admin&readPreference=primary&directConnection=true','agents','code','retrySendMessage','Início','mongoose','sendContact','groupDesc','capitalizedWords','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','Instance\x20Key\x20from\x20DB:','createConversationforgoToFlow','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','):\x20Conversa\x20inserida\x20com\x20sucesso.','unknown\x20operation\x20type\x20[','deleteMany','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','undefined','deleteReplyOption','throwAndLogError','uncaughtException','endsWith','view\x20engine','color','remoteJids','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','request\x20received\x20in\x20updateAgent','Missing\x20global\x20api\x20key','DATABASE_CONNECTION_HOST','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','Erro\x20ao\x20buscar\x20Schedule\x20Messages','stopConversation','processReadyMessages','dbConnection','findGroupInfos','options','deviceSentMessage','4oOMccN','height','normalizeMessageContent','getReadyToSendMessages','Pausado\x20por\x20','removeProfilePicture','viewOnceMessage','qrcode','Nenhum\x20participante\x20válido\x20encontrado.','E-mail:\x20','Erro\x20ao\x20buscar\x20o\x20fluxo','add','less','PROXY','sendButtons',',\x20canSendMessage:\x20','then','deleteConversation','):\x20conversation.status:\x20','sendReaction','[all]','):\x20Enviando\x20texto','Usando\x20IP\x20existente:\x20','):\x20teve\x20mudanças\x20chat.archived:\x20','get','content-type','notify','scheduleSendMedia','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','idSchedule','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','\x1b[46m','delayMessage','MESSAGES_SET','WARN','inviteCodeDetails','):\x20','cacheInstanceModel','\x27\x20não\x20encontrado','post','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','ObjectId','demote','none','https://uazapi-plugin.bubbleapps.io/?url=','\x1b[41m','messageTimestamp','sleep','dayjs','convertaudioMP3','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo','updateGroupWebhook','groupInviteCode','getAutomateSystem','labels.association','configService','\x20and\x20data:','truncatedtoEnd','setHeader','PORT',',\x20valor\x20a\x20encontrar:\x20\x22','\x5c$&','.ogg','setContext','request\x20received\x20in\x20editFlowvariable','headers','MESSAGES_UPSERT','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','LOG','createHash','abs','writeFileSync','variablesToObject','authState','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','downloads','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','length','Data\x20inválida\x20fornecida','readMessageBot','bodyString','\x27\x20removido\x20do\x20AutomateSystem.','):\x20Fluxo\x20\x27','):\x20this.client.authState.creds?.myAppStateKeyId:\x20','fetchProfilePictureUrl','Close\x20connection','):Image\x20converted\x20to\x20WebP','extractRegex','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','editflowgroup','blockLogs','phoneNumber','Erro\x20ao\x20arquivar\x20chat','JWT','$pull','integer','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','):\x20whoCanEdit\x20after\x20validation:\x20','temp-','updateChatWithMessage','encoding','paused','notContains','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','unlinkSync','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName','linkPreview','_Messages','isJidGroup','varedit','http://checkip.dyndns.org','Fluxo\x20\x27','ERROR','inviteUrl','groupGetInviteInfo','deleteDoneMessages','File\x20written\x20to\x20path:\x20','pollCreationMessageV3','webp','LEVEL','getMIMEType','.\x20Aguardando\x20','collection','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','reorderBlocks','bulkWrite','Types','):\x20Enviando\x20áudio','audioWhatsapp','PLAYED','.TEL;waid=','padStart','filter','envYaml','writeFile','GET','message','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','delete','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','Flow\x20iniciado\x20com\x20','redirect','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','arrayUnique','isJidBroadcast','state','):\x20newFirstValue\x20após\x20replaceVariables:','removeChatLabel','Network\x20interfaces\x20detected:\x20','messaging-history.set','742936xBcyqY','isValidAndUniqueIPv6','scheduleNextCheck','urlOrBase64','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','waMonitor','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','copy','updateMany','getClient','close','error','messages.update','https://','findIndex','REDIS_ENABLED','#000000','\x27...','mentions','messages.upsert','isCommunity','Erro\x20ao\x20inserir\x20chats:','Cannot\x20','):\x20Buscando\x20flow...','ipv6Prefix','vote','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','):\x20Atualizando\x20status\x20da\x20mensagem\x20','truncatedto','saveVariable','.type','EXPIRIN_IN','getProfileName','replacer','50mb','groupUpdateDescription','Erro\x20ao\x20adicionar\x20label\x20','basename','assign','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','waitingMenu_text','Log\x20out\x20instance:\x20','Subdomínio\x20extraído\x20do\x20caminho\x20SSL:','contact','parse','@g.us','scheduleSendText','):\x20Limpando\x20AutomateSystem','Fluxos\x20não\x20estão\x20ativados','slice','groupValidate','cachedContact','updateProfileStatus','):\x20Entrou\x20na\x20função\x20clearVariables','context','updatePrivacySettings','processingGroup','has','editChat','choices','readMessages','reaction','Database\x20update\x20result:','):Getting\x20image\x20from\x20url','isLong','processScheduleFlow','views','normalizeMessage','\x1b[30m%s\x1b[0m','\x1b[1m\x1b[37m','findMany','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','drop','generateHash','findByIdAndDelete','GUARD','quoted','out','\x1b[33m%s\x1b[0m','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage','dbServer','vcard','connectToWhatsappController','eventHandler','blockId','\x1b[42m','Erro\x20ao\x20atualizar\x20o\x20fluxo:','stopWhenYouSendMsg','superadmin','):Business\x20profile\x20fetched','repeat','instanceKeys','text/event-stream','fetchChats','promisify','subject','fileUrl','use','oldValue','Erro\x20ao\x20tentar\x20autoCompleteMessages','$dbName','imageMessage','badSession','\x20inseridas\x20no\x20banco\x20de\x20dados...','CHATS_DELETE','and','):\x20Entrou\x20na\x20função\x20goToFlow','ex:\x20\x22groupJid=120362@g.us\x22','values','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','findLabels','replaceOne','limit','Operador:\x20\x22','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20','Last\x20message\x20not\x20found\x20for\x20number:\x20','archived','getDevice','getStatus','min','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','DisconnectReason','pt-BR','CONTACTS_SET','SERVER_URL','/chat','removeUnusedChatFields','reference','/automate','ip\x20-br\x20link\x20show','stickerMessage','updateBlock','conditions','\x27\x20não\x20encontrado\x20na\x20memória','\x1b[44m','random','^\x5cd+','imagechat','applyvaredit','option','AUTHENTICATION_JWT_EXPIRIN_IN','https','sha256','buttonMessage','unhandledRejection','Flow\x20iniciado','apply','mimetype','scheduleSendAudio','readMessage','\x1b[0m','Retornando\x20grupos\x20COM\x20cache','matchRegex','lastFetchAwaitingApproval','):\x20Fluxos\x20não\x20estão\x20ativados','replaceVariables','nome','startID','request\x20received\x20in\x20deleteFlow','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','env','SSL_CONF','pm2\x20flush','userDevicesCache','delayChatLabel_RETRY_DELAY_MS','Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo','):\x20Entrou\x20na\x20função\x20stop','Instance\x20deleted','messageType','hex',',\x20Comparador:\x20','whoCanEdit','auth','email','loadInstance','groupName','utf8','processConditionsTest','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','editConversation','cors','eventEmitter','CHATS_UPDATE','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','importChats','DOCKER_ENV','/webhook','sem\x20texto\x20na\x20mensagem','8080','app-state-sync-key','info','):Archiving\x20chat','whatsappNumbers','msgRetryCounterCache','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture','every','where','):\x20whoCanUse\x20after\x20validation:\x20','):\x20Comando\x20desconhecido:\x20','locked','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','joinApprovalMode','READ','.doc','):\x20Conversa\x20está\x20expirada','pino','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','ReplyOption\x20com\x20ID\x20','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','Request\x20Body:','Last\x20message\x20not\x20found','revokeInviteCode','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20','padEnd','Group\x20not\x20found','preview','mediaMessage','method','IPv6\x20address\x20configured:\x20','):\x20Alterando\x20fluxo...','CLEANING_INTERVAL','\x1b[37m%s\x1b[0m','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','connectionStatus','):\x20leadInfoVariables','requestPairingCode','scheduleFlow','findAll','):\x20updateResult:','size','RemoteJid:','Contacts\x20not\x20found','.url','):\x20isVote:\x20','AUTHENTICATION_JWT_SECRET','BRL','number','SERVER','telefone','-whatsapp-api','_FlowHistorico','webhookMap','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','/wa-chats','groups.update','):\x20Não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','object','shift','Error\x20fetching\x20and\x20updating\x20profile:\x20','shareOwners','/wa-connection-update','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','class-validator','website','waitingMenu_ExpiredMessage','\x1b[34m','lastSend','StartBot','The\x20global\x20api\x20key\x20must\x20be\x20set','leadInfo.desativadoFluxoAte','DD/MM\x20HH:mm:ss','exists','flowConversation','express','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','IP\x20mismatch:\x20configured\x20','count','save','activatedCount','instances','Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos','):\x20Enviando\x20localização','command','fetchStatus','memberAddMode','*Pergunta*:\x20\x0a','Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20','markMessageAsRead','role','endSession','):Notifying\x20clients\x20for\x20chat:\x20','currency','IPv6\x20addresses\x20detected:\x20','groups.upsert','isJidUser','action','Unauthorized','\x1b[34m%s\x1b[0m','fetchLatestBaileysVersion','):\x20error:\x20','#64c4ff','importChatsAntigo','updateLastSeenPrivacy','fromMe','groupAcceptInvite','Variável\x20não\x20encontrada!','editFlowBlock','noConnection','router','removed','allContacts','Falha\x20ao\x20processar\x20a\x20solicitação\x20findRealGroups','/wa-message','Tentando\x20reconectar...','Router','updateReplyOption','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','webhookService','globalShow','findGroups','editFlowGroup','jsonschema','XX:XX:XX:XX:XX:XX','Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...','\x22\x20-\x20REMOVED','saveChatVariables','load','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','Novo\x20IP\x20criado:\x20','request\x20received\x20in\x20allFlows','push','DATABASE_ENABLED','createGroup','https://jsonip.com','deleteMessageForEveryone','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','getLastMessage','Database\x20connection\x20closed.','):Delete\x20chat\x20in\x20client\x20for\x20number:\x20','expiration','name','autoCompleteMessages.command','):\x20atualização\x20chat:\x20','statusJidList','send','Subdomínio\x20extraído\x20da\x20URL:','convert','):Hash\x20to\x20image\x20name:\x20','statSync','REDIS','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','\x1b[37m','getBase64FromMediaMessage','Subscribed\x20Events:','transformScheduledMessagesByType','g.us','address','proto','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture','imgUrl',',\x20isAdmin:\x20','closed','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','base64','uazapiSendMenu','):Error\x20in\x20converting\x20audio','toFile','DATABASE','etiquetas','connectionUpdate','):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar','findGroup','Mensagens\x20deletadas\x20com\x20sucesso.','contentText','createInstance','Rótulo\x20deletado:\x27,\x20','segundos','upsertedCount','This\x20name\x20',',\x20Segundo\x20Valor:\x20','model','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','\x1b[32m%s\x1b[0m','createConversationforStartFlow','deleteImportedChat','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','Erro\x20ao\x20buscar\x20conversas','\x20adicionado\x20ao\x20chat\x20','fullName','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','chat','status','floor','forEach','groupSettingUpdate','Nenhum\x20chat\x20fornecido\x20para\x20inserção.','Flow\x20\x27','online','updateGroupParticipantsWebhook','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','errors','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','done','notMatchRegex','getValidWhatsAppNumbers','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','formatVCard','Error\x20removing\x20IPv6\x20address:\x20','sendMedia','):\x20Query\x20params:\x20','Erro\x20ao\x20buscar\x20fluxos:','MESSAGES_UPDATE','Logger','DARK','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus','user','contacts','):\x20delete\x20=\x20true','admin_add','/wa-contacts','message_normalized','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','ids','interval\x20não\x20é\x20um\x20número','hbs','secondValue','dropCollection','optionName','):\x20Current\x20Time:\x20','mediaKey','\x1b[36m%s\x1b[0m','Enter\x20a\x20value\x20in\x20milliseconds','pairingCode','leadInfo.etiquetas','):\x20Entrou\x20na\x20função\x20saveReply','footerText','ContactsAndGroups','off','DATABASE_CONNECTION_URI','Erro\x20ao\x20atualizar\x20conversa:\x20','reject','\x20segundos\x20antes\x20de\x20reconectar...','apiName','Parando\x20aplicação,\x20atualização\x20recebida','status@broadcast','authModel','instance.','groupJoinApprovalMode','isURL','beautifyWithPlaceholders',',\x20saindo.','formatStatusMessage','RemoveChatLabel','admin','.mp3','request\x20received\x20in\x20deleteConversation','):\x20Bloco\x20original\x20para\x20cópia:\x20','SUCCESS','#01d0e2','randomBytes','refused','pollErrorMessage','moreLogs','Resultado\x20da\x20correspondência\x20de\x20URL:','editFlowVaredit','startFlowWebhook','.fileUrl','approve','\x20tentativas.','/wa-all-message','exports',',\x20Minutes\x20to\x20Close:\x20','promote','configureIPv6','CORS_CREDENTIALS','https://github.com/uazapi/uazapi.git','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','deleteInstance','ENABLED','):\x20mediaMessageInfoId\x20:\x20','editFlowCondition','lean','setWebhook','groupUpdateSubject','routerPath','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','pictureUrl','\x20segundos','CONNECTION','_id','\x20-i\x20','):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!','COLOR','start','notEmpty','header','Font\x20is\x20required','deleteAll','):\x20Error\x20processing\x20the\x20block:\x20','.pdf','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','video','findById','LOG_COLOR','responsavelid','uazapiSendMedia','https://api.openai.com/v1/audio/speech','fetchInstances','timeInMinutes','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','delay','body','connecting','addresss','ip:\x20','):Audio\x20processed','.mimetype','SECRET','order','toUpperCase','\x20is\x20already\x20in\x20use.','stopMinutes','flowStopConversation','dataValidate','):\x20Não\x20achou\x20nenhum\x20flow','Instâncias\x20removidas:\x20','):Type\x20defined\x20as\x20audio','newStoppedUntil','/instance/connect','Content-Type','participants','#92ceac','stopped','):\x20Criando\x20nova\x20conversa[createNewConversation]','audioMessage','request\x20received\x20in\x20editFlow','announce','getContactModelForOwner','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','):\x20Buscando\x20flow,\x20id:\x20','update','ChatRouter','resetReconnectionVariables','everyOne','reorderMessages','sharp','goNextblock','licenca','js-yaml','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','newValue','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','createFlow','buttonText','listMessage','Mac\x20OS','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','):\x20Rótulo\x20atualizado:\x20','open','\x20ao\x20chat\x20','processgoToFlow','instancias:\x20','type','Configuração\x20SSL\x20recuperada:','Schema','connectToWhatsapp','}}\x20->\x20\x22','apikey','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','updateFlowConfig','stderr','changeVariables','Erro\x20ao\x20remover\x20label\x20','folder','splice','string','.webm','execSync','Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.','customFields','hasOwnProperty','array','uazapiSendAudio','):Audio\x20converted\x20and\x20stored\x20in\x20cache','updateMissingCustomFields','buffer','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','not\x20loaded','Instance\x20restarted','keyPattern','QRCODE_UPDATED','/message','\x22\x20not\x20found','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','createClient','authorization','Esse\x20fluxo\x20expirou','ORG:','@ffmpeg-installer/ffmpeg','contactHandle','groupMemberAddMode','):\x20\x27Deletando\x20fluxo,\x20id:\x20','profilePictureUrl','available','isInteger','insert','leadInfo','deleted','processawaitSeconds','Instância\x20não\x20encontrada.','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','composing','Removidas\x20as\x20variáveis:\x20','findMessages','inner','The\x20property\x20cannot\x20be\x20empty','):\x20Falha\x20ao\x20deletar\x20mensagem.','processConditions','cleanDisconnectedInstances','toLowerCase','flushHeaders','\x22,\x20valor\x20a\x20substituir:\x20\x22','):\x20teve\x20mudanças\x20chat.muteEndTime:\x20','replaceVariablesLogs','label','menuMessage','Comando\x20desconhecido','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','Detalhes\x20do\x20erro:','Erro\x20de\x20atualização:\x20','SERVER_TYPE','enumerable','updateGParticipate','find','sharePass','contextInfo','\x20foi\x20interrompido\x20pelo\x20usuário.','Esse\x20fluxo\x20não\x20permite\x20importação.','}}\x20->\x20valor\x20não\x20encontrado','chats','startCommand','last_update','toArray','remove.instance','restrict','vir','Error\x20in\x20chatModify\x20for\x20number\x20','verbose','2TVuGtx','stdout','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','Número:\x20','#dfaef0','):\x20Enviando\x20mensagem\x20para\x20','minutesToClose','existsSync','editOperator','ini','Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage','selectedOptions','clearVariables','toDataURL','backgroundColor','CORS_ORIGIN','getFlow','isConnected','flattenObject','):\x20Bloco\x20com\x20ID\x20','data','NextBlock','cpf','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','documentMessage','\x20inseridos\x20no\x20banco\x20de\x20dados...','/config','AUTHENTICATION_TYPE','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','VERBOSE','2613395qdCOZF','error_log','ephemeralExpiration','getVariablesChat','replaceVariablesInReplyOptions','lastInteraction','readData','CacheContacts\x20database\x20connection\x20closed.','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','setUpdate','greater','reactionMessage','listen','expression','Generated\x20IPv6:\x20','No\x20suitable\x20network\x20interface\x20found','keys','):\x20\x27Enviando\x20mídia\x20para\x20\x27','Bloco\x20com\x20ID\x20','request\x20received\x20in\x20updateFlowConfig','):\x20Editando\x20edição\x20do\x20fluxo...','DATABASE_CONNECTION_USER',',\x20lastCondition:\x20','image','Erro\x20ao\x20normalizar\x20a\x20mensagem:','detail','):\x20Deletando\x20mensagem','unreadCount','creds.json','next_groupId','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','warn','redis','):\x20Limpando\x20delayMessage','findOneAndUpdate','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','connectedClient','restartInstance','convertaudio','All_Instances_Config','labels.edit','):\x20\x27Enviando\x20texto\x20para\x20\x27','.xlsx',',\x20resultado:\x20','createServer','profile','ERROR:\x20','Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27'];a0_0x26ed=function(){return _0x5c3f0b;};return a0_0x26ed();}async function Lo(){await ko();}Lo();var Ft={},$e=class u{constructor(_0x2571f9,_0x1f82c9,_0x409e66){const _0x18220d=a0_0x3f352e;this[_0x18220d(0x446)]=_0x2571f9,this['eventEmitter']=_0x1f82c9,this[_0x18220d(0x7be)]=_0x409e66,this['AutomateSystem']=null,this[_0x18220d(0x112)]=new $(u[_0x18220d(0x5f4)]),this[_0x18220d(0x799)]={},this[_0x18220d(0x11c)]={},this[_0x18220d(0x14d)]={'state':_0x18220d(0x4b2)},this['storePath']=(0x0,U['join'])(ne,_0x18220d(0x45a)),this[_0x18220d(0x56a)]=new Ps[(_0x18220d(0x164))](),this[_0x18220d(0x54b)]=new Ps[(_0x18220d(0x164))](),this[_0x18220d(0x5c1)]=!0x1,this[_0x18220d(0x59b)]={'status.instance':_0x18220d(0x5a4),'connection.update':_0x18220d(0x5a4),'qrcode.updated':'/wa-qrcode','messages.upsert':_0x18220d(0x5d8),'send.message':_0x18220d(0x5d8),'messages.update':'/wa-message-update','group.upsert':_0x18220d(0x120),'group.update':_0x18220d(0x120),'group-participants.update':_0x18220d(0x120),'messages.set':_0x18220d(0x678),'contacts.set':'/wa-contacts','contacts.upsert':_0x18220d(0x646),'contacts.update':_0x18220d(0x646),'presence.update':_0x18220d(0x284),'chats.set':'/wa-chats','chats.update':'/wa-chats','chats.upsert':_0x18220d(0x59d),'chats.delete':_0x18220d(0x59d)},this[_0x18220d(0x151)]=0x0,this[_0x18220d(0x3d3)]=[],this[_0x18220d(0x199)]=0xea60,this[_0x18220d(0x7cc)]=!0x1,this[_0x18220d(0x23c)]={'chats.upsert':async(_0x1aab1c,_0x3603f5)=>{const _0x1eae75=_0x18220d;let _0x2b178d=[];for await(let _0x4f7967 of _0x1aab1c)_0x2b178d[_0x1eae75(0x5ea)]({'_id':_0x4f7967['id'],'owner':this[_0x1eae75(0x799)][_0x1eae75(0x3cb)],'group':_0x4f7967['id'][_0x1eae75(0x3ff)](_0x1eae75(0x4d5)),'name':_0x4f7967[_0x1eae75(0x5f4)]||_0x4f7967[_0x1eae75(0x7db)]||null,'contactname':null,'lastmsg':_0x4f7967[_0x1eae75(0x2ee)]&&_0x4f7967[_0x1eae75(0x2ee)][_0x1eae75(0x123)]()[_0x1eae75(0x45c)]<0xd?_0x4f7967[_0x1eae75(0x2ee)]*0x3e8:_0x4f7967[_0x1eae75(0x2ee)]||null,'archived':_0x4f7967[_0x1eae75(0x51c)]||!0x1,'unreadcount':_0x4f7967[_0x1eae75(0x767)]||0x0,'ephemeralExpiration':_0x4f7967[_0x1eae75(0x74e)]||0x0});this[_0x1eae75(0xb2)](_0x1eae75(0x7b4),_0x2b178d);},'chats.update':async(_0x3cfbd7,_0x50b4ce)=>{const _0x5a15e7=_0x18220d;for(let _0x46b77d of _0x3cfbd7){let _0xe1fc08={'_id':_0x46b77d['id'],'owner':this['instance'][_0x5a15e7(0x3cb)],'archived':_0x46b77d[_0x5a15e7(0x51c)],'muteEndTime':_0x46b77d[_0x5a15e7(0x282)],'ephemeralExpiration':_0x46b77d[_0x5a15e7(0x74e)]},_0x429106=!0x1,_0x2c65d6={};_0xe1fc08[_0x5a15e7(0x51c)]!=null&&(this[_0x5a15e7(0x112)][_0x5a15e7(0x72d)](this[_0x5a15e7(0x78b)]+'\x20('+this['instance'][_0x5a15e7(0x3cb)]+_0x5a15e7(0x426)+_0x46b77d['id']+_0x5a15e7(0x30f)+_0x46b77d[_0x5a15e7(0x51c)]),_0x429106=!0x0,_0x2c65d6[_0x5a15e7(0x51c)]=_0x46b77d[_0x5a15e7(0x51c)]),_0x5a15e7(0x282)in _0x46b77d&&(this['logger'][_0x5a15e7(0x72d)](this['instanceName']+'\x20('+this[_0x5a15e7(0x799)][_0x5a15e7(0x3cb)]+_0x5a15e7(0x714)+_0x46b77d['id']+_0x5a15e7(0x30f)+(_0x46b77d[_0x5a15e7(0x282)]??'0')),_0x429106=!0x0,_0x2c65d6['muteEndTime']=_0x46b77d['muteEndTime']??0x0),_0x5a15e7(0x74e)in _0x46b77d&&(this[_0x5a15e7(0x112)]['verbose'](this[_0x5a15e7(0x78b)]+'\x20('+this['instance'][_0x5a15e7(0x3cb)]+'):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20'+_0x46b77d['id']+_0x5a15e7(0x30f)+(_0x46b77d[_0x5a15e7(0x74e)]!==void 0x0?_0x46b77d[_0x5a15e7(0x74e)]:_0x5a15e7(0x3fb))),_0x2c65d6['ephemeralExpiration']=_0x46b77d[_0x5a15e7(0x74e)]===null?0x0:_0x46b77d[_0x5a15e7(0x74e)],_0x429106=!0x0);let _0x994ecb;_0x429106&&(_0x994ecb=await this[_0x5a15e7(0x7be)][_0x5a15e7(0x629)][_0x5a15e7(0x372)]({'where':{'_id':_0x46b77d['id']}},_0x2c65d6,this[_0x5a15e7(0x799)][_0x5a15e7(0x3cb)])),_0x994ecb&&J(this[_0x5a15e7(0x78b)],_0x5a15e7(0x725),{'chat':_0x994ecb});}},'chats.delete':async _0x938379=>{const _0x2416be=_0x18220d;for(let _0x3d57f2 of _0x938379)if(_0x3d57f2[_0x2416be(0x3ff)]('@g.us')){await this[_0x2416be(0x7be)]['chat'][_0x2416be(0x49b)]({'where':{'_id':_0x3d57f2}},this['instance'][_0x2416be(0x3cb)]);let _0xb31924={'where':{'key':{'remoteJid':_0x3d57f2}}};await this[_0x2416be(0x7be)][_0x2416be(0x499)]['delete'](_0xb31924,this[_0x2416be(0x799)][_0x2416be(0x3cb)]);}else{await this[_0x2416be(0x7be)][_0x2416be(0x629)]['updateOne']({'where':{'_id':_0x3d57f2}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x2416be(0x799)][_0x2416be(0x3cb)]);let _0x590644={'where':{'key':{'remoteJid':_0x3d57f2}}};await this[_0x2416be(0x7be)][_0x2416be(0x499)][_0x2416be(0x49b)](_0x590644,this['instance'][_0x2416be(0x3cb)]);}this[_0x2416be(0xb2)]('chats.delete',[..._0x938379]);}},this[_0x18220d(0x6fd)]={'contacts.upsert':async(_0x308699,_0x102deb)=>{const _0x54267e=_0x18220d;let _0x4b6571=await this[_0x54267e(0x7be)][_0x54267e(0x4d3)][_0x54267e(0x71f)]({'where':{}},this[_0x54267e(0x799)][_0x54267e(0x3cb)]),_0x4e6768=[];for await(let _0x23f51e of _0x308699)_0x4b6571[_0x54267e(0x71f)](_0xa8162f=>_0xa8162f[_0x54267e(0x68d)]===_0x23f51e['id'])||_0x4e6768[_0x54267e(0x5ea)]({'_id':_0x23f51e['id'],'pushName':_0x23f51e?.['name']||_0x23f51e?.[_0x54267e(0x35e)],'owner':this[_0x54267e(0x799)][_0x54267e(0x3cb)]});this[_0x54267e(0xb2)](_0x54267e(0x17e),_0x4e6768),await this[_0x54267e(0x7be)][_0x54267e(0x4d3)]['insert'](_0x4e6768);},'contacts.update':async(_0x18c491,_0x453f9a)=>{const _0x18811a=_0x18220d;let _0x1d155a=[];for await(let _0x2eb597 of _0x18c491)_0x1d155a[_0x18811a(0x5ea)]({'_id':_0x2eb597['id'],'pushName':_0x2eb597?.[_0x18811a(0x5f4)]??_0x2eb597?.[_0x18811a(0x35e)],'owner':this[_0x18811a(0x799)][_0x18811a(0x3cb)]});this[_0x18811a(0xb2)](_0x18811a(0x7da),_0x1d155a);}},this[_0x18220d(0x7bb)]={'messaging-history.set':async({messages:_0x43ad91,chats:_0x3e92f2,isLatest:_0x532b3d},_0x53b63d)=>{const _0x24caac=_0x18220d;if(_0x532b3d){let _0x3210d8=await Promise['all'](_0x3e92f2[_0x24caac(0xff)](async _0x5ef68e=>({'_id':_0x5ef68e['id'],'owner':this[_0x24caac(0x799)][_0x24caac(0x3cb)],'group':_0x5ef68e['id']['endsWith'](_0x24caac(0x4d5)),'name':_0x5ef68e[_0x24caac(0x5f4)]||_0x5ef68e['displayName']||_0x5ef68e[_0x24caac(0x117)]||null,'contactname':null,'lastmsg':_0x5ef68e[_0x24caac(0x2ee)]&&_0x5ef68e[_0x24caac(0x2ee)]['toString']()[_0x24caac(0x45c)]<0xd?_0x5ef68e['conversationTimestamp']*0x3e8:_0x5ef68e['conversationTimestamp']||null,'archived':_0x5ef68e[_0x24caac(0x51c)]||!0x1,'unreadcount':_0x5ef68e[_0x24caac(0x767)]||0x0,'ephemeralExpiration':_0x5ef68e[_0x24caac(0x74e)]||0x0,'muteEndTime':_0x5ef68e['muteEndTime']||0x0})));this[_0x24caac(0xb2)](_0x24caac(0x30b),_0x3210d8),await this[_0x24caac(0x1b5)](_0x3210d8,_0x53b63d);}let _0x1c4895=[],_0xb2c820=Date[_0x24caac(0x196)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x1620c9]of Object['entries'](_0x43ad91)){if(_0x1620c9['message']?.[_0x24caac(0xd8)]||_0x1620c9['message']?.['senderKeyDistributionMessage']||!_0x1620c9[_0x24caac(0x499)]||_0x1620c9[_0x24caac(0x2bb)]['remoteJid']===_0x24caac(0x65f)||(Ds[_0x24caac(0x164)][_0x24caac(0x4e8)](_0x1620c9?.[_0x24caac(0x43d)])&&(_0x1620c9[_0x24caac(0x43d)]=_0x1620c9[_0x24caac(0x43d)]?.['toNumber']()),_0x1620c9['messageTimestamp']&&_0x1620c9[_0x24caac(0x43d)][_0x24caac(0x123)]()['length']<0xd&&(_0x1620c9[_0x24caac(0x43d)]=_0x1620c9[_0x24caac(0x43d)]*0x3e8),_0x1620c9['messageTimestamp']<_0xb2c820))continue;let _0x2917a2=(0x0,w[_0x24caac(0x411)])(_0x1620c9['message']),_0xbcadaa=(0x0,w[_0x24caac(0x7ea)])(_0x2917a2),{message_normalized:_0x392e99}=this[_0x24caac(0x4eb)](_0x2917a2,_0xbcadaa,null);Object[_0x24caac(0x75c)](_0x392e99)[_0x24caac(0x45c)]>0x0&&_0x1c4895[_0x24caac(0x5ea)]({'_id':_0x1620c9[_0x24caac(0x2bb)]['id'],'key':_0x1620c9['key'],'pushName':_0x1620c9[_0x24caac(0x22a)],'participant':_0x1620c9[_0x24caac(0x169)],'message':_0x2917a2,'messageType':_0xbcadaa,'message_normalized':{'key':_0x1620c9[_0x24caac(0x2bb)],'pushName':_0x1620c9[_0x24caac(0x22a)],'messageTimestamp':_0x1620c9[_0x24caac(0x43d)],..._0x392e99},'messageTimestamp':_0x1620c9[_0x24caac(0x43d)],'owner':this[_0x24caac(0x799)][_0x24caac(0x3cb)]});}_0x53b63d[_0x24caac(0x681)]&&_0x1c4895[_0x24caac(0x45c)]>0x0&&(this[_0x24caac(0x112)][_0x24caac(0x72d)](this[_0x24caac(0x78b)]+'\x20('+this[_0x24caac(0x799)]['wuid']+'):\x20'+_0x1c4895['length']+'\x20mensagens\x20de\x20'+this[_0x24caac(0x799)][_0x24caac(0x3cb)]+_0x24caac(0x50f)),await this['repository']['message'][_0x24caac(0x703)]([..._0x1c4895],this[_0x24caac(0x799)]['wuid'])),this[_0x24caac(0xb2)](_0x24caac(0x25e),[..._0x1c4895]),_0x43ad91=void 0x0;},'messages.upsert':async({messages:_0x1b8e21,type:_0x202c0c},_0x190db5)=>{const _0x3d86bd=_0x18220d;for(let _0x4ebe51 of _0x1b8e21){if(this['localWebhook']?.[_0x3d86bd(0x21a)]&&_0x4ebe51[_0x3d86bd(0x2bb)]['remoteJid'][_0x3d86bd(0x2bf)](_0x3d86bd(0x4d5))){this['logger'][_0x3d86bd(0x72d)](this[_0x3d86bd(0x78b)]+'\x20('+this[_0x3d86bd(0x799)][_0x3d86bd(0x3cb)]+_0x3d86bd(0x2bc));return;}if(_0x202c0c!==_0x3d86bd(0x429)||!_0x4ebe51?.[_0x3d86bd(0x499)]||_0x4ebe51[_0x3d86bd(0x499)]?.[_0x3d86bd(0xd8)]||_0x4ebe51['message']['senderKeyDistributionMessage']||_0x4ebe51[_0x3d86bd(0x2bb)][_0x3d86bd(0x183)]===_0x3d86bd(0x65f))return;let _0x467d98=null,_0x23db70=null;if(_0x4ebe51[_0x3d86bd(0x1eb)]&&_0x4ebe51['messageStubParameters'][0x0]===_0x3d86bd(0x299)){console['error'](_0x3d86bd(0x579)),Ft[_0x4ebe51['key']['id']]=_0x4ebe51,this[_0x3d86bd(0x3ed)](_0x4ebe51,0x0);return;}Ft[_0x4ebe51[_0x3d86bd(0x2bb)]['id']]&&(console[_0x3d86bd(0x4b3)]('[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache'),delete Ft[_0x4ebe51[_0x3d86bd(0x2bb)]['id']]);try{_0x467d98=await this[_0x3d86bd(0x3cf)](_0x4ebe51),_0x23db70=_0x467d98?_0x467d98[_0x3d86bd(0x348)](','):null;}catch(_0x26c763){this[_0x3d86bd(0x112)]['verbose'](this['instanceName']+'\x20('+this[_0x3d86bd(0x799)][_0x3d86bd(0x3cb)]+_0x3d86bd(0x433)+(_0x26c763 instanceof Error?_0x26c763[_0x3d86bd(0x499)]:JSON[_0x3d86bd(0x1bb)](_0x26c763,null,0x2))),_0x23db70='error\x20get\x20vote';}this['client'][_0x3d86bd(0x7b5)](_0x3d86bd(0x19e)),Ds[_0x3d86bd(0x164)][_0x3d86bd(0x4e8)](_0x4ebe51[_0x3d86bd(0x43d)])&&(_0x4ebe51[_0x3d86bd(0x43d)]=_0x4ebe51[_0x3d86bd(0x43d)]?.['toNumber']()),_0x4ebe51[_0x3d86bd(0x43d)]&&_0x4ebe51['messageTimestamp'][_0x3d86bd(0x123)]()[_0x3d86bd(0x45c)]<0xd&&(_0x4ebe51[_0x3d86bd(0x43d)]=_0x4ebe51['messageTimestamp']*0x3e8);let _0x456db6=_0x4ebe51[_0x3d86bd(0x499)],_0x566c3c=(0x0,w['normalizeMessageContent'])(_0x456db6),_0x51c95a=(0x0,w[_0x3d86bd(0x7ea)])(_0x566c3c),{messageContent:_0x2ddd3d,message_normalized:_0x5045d3}=this['normalizeMessage'](_0x566c3c,_0x51c95a,_0x23db70);_0x51c95a===_0x3d86bd(0xd8)&&_0x2ddd3d?.[_0x3d86bd(0x208)]&&(_0x51c95a=_0x3d86bd(0x208));let _0x48d51f,_0xe48e40=_0x4ebe51[_0x3d86bd(0x2bb)]['remoteJid']['endsWith'](_0x3d86bd(0x4d5));if(_0x4ebe51[_0x3d86bd(0x2bb)]['fromMe'])_0x48d51f=this[_0x3d86bd(0x799)][_0x3d86bd(0x700)];else{let _0x5cb40b=_0xe48e40?_0x4ebe51[_0x3d86bd(0x2bb)][_0x3d86bd(0x169)]:_0x4ebe51[_0x3d86bd(0x2bb)][_0x3d86bd(0x183)];_0x48d51f=(await this['findAndUpdateCacheContact'](_0x5cb40b,_0x4ebe51[_0x3d86bd(0x22a)],!0x1))[_0x3d86bd(0x4db)][_0x3d86bd(0x68a)];}let _0x1a7d5a={'_id':_0x4ebe51['key']['id'],'key':_0x4ebe51['key'],'isGroup':_0xe48e40,'profilePictureUrl':_0x48d51f,'pushName':_0x4ebe51['pushName'],'message':_0x566c3c,'messageType':_0x51c95a,'message_normalized':{'key':_0x4ebe51[_0x3d86bd(0x2bb)],'pushName':_0x4ebe51[_0x3d86bd(0x22a)],'messageTimestamp':_0x4ebe51[_0x3d86bd(0x43d)],'source':(0x0,w[_0x3d86bd(0x51d)])(_0x4ebe51['key']['id']),..._0x5045d3},'messageTimestamp':_0x4ebe51[_0x3d86bd(0x43d)],'owner':this[_0x3d86bd(0x799)]['wuid'],'source':(0x0,w['getDevice'])(_0x4ebe51[_0x3d86bd(0x2bb)]['id']),'expiration':_0x2ddd3d?.[_0x3d86bd(0x721)]?.[_0x3d86bd(0x5f3)]||0x0};_0x2ddd3d||(this[_0x3d86bd(0x112)][_0x3d86bd(0x4b3)](_0x3d86bd(0x3ce)),this[_0x3d86bd(0x112)][_0x3d86bd(0x4b3)](_0x1a7d5a)),this[_0x3d86bd(0x112)][_0x3d86bd(0x133)](this[_0x3d86bd(0x78b)]+'\x20('+this[_0x3d86bd(0x799)]['wuid']+_0x3d86bd(0x433)+(_0x1a7d5a['key']?.[_0x3d86bd(0x5cf)]?_0x3d86bd(0x320):'recebido\x20de')+'\x20['+_0x1a7d5a[_0x3d86bd(0x2bb)]?.[_0x3d86bd(0x183)]['replace'](_0x3d86bd(0x246),'')+']\x20('+_0x1a7d5a[_0x3d86bd(0x550)]+')'),_0x1a7d5a['message_normalized']?.[_0x3d86bd(0x21b)]&&this[_0x3d86bd(0x112)][_0x3d86bd(0x133)](_0x4ebe51[_0x3d86bd(0x2bb)]['id']+':\x20'+_0x1a7d5a[_0x3d86bd(0x647)]?.[_0x3d86bd(0x21b)]),await this[_0x3d86bd(0x7be)][_0x3d86bd(0x499)][_0x3d86bd(0x703)]([_0x1a7d5a],this['instance'][_0x3d86bd(0x3cb)]),this[_0x3d86bd(0xb2)]('messages.upsert',_0x1a7d5a),J(this[_0x3d86bd(0x78b)],_0x3d86bd(0x1a8),{'message':_0x1a7d5a}),_0x4ebe51[_0x3d86bd(0x2bb)][_0x3d86bd(0x183)]!==_0x3d86bd(0x65f)&&await this[_0x3d86bd(0x473)](_0x190db5,_0x1a7d5a,_0x3d86bd(0x451));}},'messages.update':async(_0x524d1d,_0x1daded)=>{const _0x35d66b=_0x18220d;let _0x466084={0x0:_0x35d66b(0x481),0x1:_0x35d66b(0x3c2),0x2:'SERVER_ACK',0x3:_0x35d66b(0x1fe),0x4:_0x35d66b(0x573),0x5:_0x35d66b(0x492)};for await(let {key:_0x332121,update:_0x1818e7}of _0x524d1d){if(this['localWebhook']?.[_0x35d66b(0x21a)]&&_0x332121[_0x35d66b(0x183)]['includes']('@g.us')){this[_0x35d66b(0x112)][_0x35d66b(0x72d)](this[_0x35d66b(0x78b)]+'\x20('+this['instance'][_0x35d66b(0x3cb)]+_0x35d66b(0x7a7));return;}if(_0x332121[_0x35d66b(0x183)]!==_0x35d66b(0x65f)){let _0x4d9936=Date[_0x35d66b(0x196)](),_0x44e754;_0x1818e7[_0x35d66b(0x499)]===null&&_0x1818e7['status']===void 0x0?_0x44e754=_0x35d66b(0x2a2):_0x44e754=_0x466084[_0x1818e7[_0x35d66b(0x62a)]];let _0x581ea5=_0x332121[_0x35d66b(0x183)][_0x35d66b(0x166)](/:\d{1,2}@/g,'@'),_0x520bbd={..._0x332121,'remoteJid':_0x581ea5,'status':_0x44e754,'datetime':_0x4d9936,'owner':this[_0x35d66b(0x799)][_0x35d66b(0x3cb)]};this[_0x35d66b(0xb2)](_0x35d66b(0x4b4),_0x520bbd),await this[_0x35d66b(0xfb)](_0x332121,_0x520bbd);}}},'labels.association':async({type:_0x4cec76,association:_0x4110f5})=>{const _0x2ed5f1=_0x18220d;if(_0x4110f5['type']==='label_jid'){let _0x2a45f2,_0x72fac5=0x0;for(;!_0x2a45f2&&_0x72fac5<this[_0x2ed5f1(0x13e)];)_0x2a45f2=await this[_0x2ed5f1(0x7be)][_0x2ed5f1(0x629)][_0x2ed5f1(0x312)]({'where':{'_id':_0x4110f5[_0x2ed5f1(0x7ed)]}},this[_0x2ed5f1(0x799)][_0x2ed5f1(0x3cb)]),_0x2a45f2||(_0x72fac5++,this['logger'][_0x2ed5f1(0x567)](this['instanceName']+'\x20('+this[_0x2ed5f1(0x799)][_0x2ed5f1(0x3cb)]+_0x2ed5f1(0x37e)+_0x4110f5[_0x2ed5f1(0x7ed)]+_0x2ed5f1(0xaf)+this[_0x2ed5f1(0x54c)]+_0x2ed5f1(0x3a5)+_0x72fac5+'/'+this[_0x2ed5f1(0x13e)]+')'),await this[_0x2ed5f1(0x307)](this[_0x2ed5f1(0x54c)]));if(!_0x2a45f2){this[_0x2ed5f1(0x112)][_0x2ed5f1(0x4b3)](_0x2ed5f1(0x3be)+_0x4110f5[_0x2ed5f1(0x7ed)]+_0x2ed5f1(0x1f3)+this['delayChatLabel_MAX_RETRIES']+_0x2ed5f1(0x677));return;}switch(_0x4cec76){case'add':console[_0x2ed5f1(0x133)](_0x4110f5),await this[_0x2ed5f1(0x7be)][_0x2ed5f1(0x629)][_0x2ed5f1(0x372)]({'where':{'_id':_0x4110f5[_0x2ed5f1(0x7ed)]}},{'leadInfo.etiquetas':_0x4110f5['labelId']},this[_0x2ed5f1(0x799)][_0x2ed5f1(0x3cb)],void 0x0,'$addToSet');break;case'remove':console[_0x2ed5f1(0x133)](_0x4110f5),await this[_0x2ed5f1(0x7be)][_0x2ed5f1(0x629)][_0x2ed5f1(0x372)]({'where':{'_id':_0x4110f5[_0x2ed5f1(0x7ed)]}},{'leadInfo.etiquetas':_0x4110f5['labelId']},this[_0x2ed5f1(0x799)][_0x2ed5f1(0x3cb)],void 0x0,_0x2ed5f1(0x46d));break;default:this[_0x2ed5f1(0x112)][_0x2ed5f1(0x4b3)](_0x2ed5f1(0x3f8)+_0x4cec76+']');}}},'labels.edit':async _0x300755=>{const _0x450158=_0x18220d;if(!_0x300755||!_0x300755['id']){this[_0x450158(0x112)][_0x450158(0x4b3)](_0x450158(0x7d9));return;}if(!_0x300755[_0x450158(0x705)]){let _0x3c1edc=['#ff9484',_0x450158(0x5cc),_0x450158(0x247),_0x450158(0x732),'#9ab6c1','#56ccb4',_0x450158(0xef),'#d3a91f',_0x450158(0x257),_0x450158(0x16e),_0x450158(0x66d),'#ffc5c7',_0x450158(0x6b8),_0x450158(0x118),_0x450158(0x794),'#83e421',_0x450158(0x3db),'#b4ebff','#9ba6ff',_0x450158(0x204)],_0x3bff01;typeof _0x300755[_0x450158(0x401)]==_0x450158(0x596)&&_0x300755[_0x450158(0x401)]>=0x0&&_0x300755[_0x450158(0x401)]<_0x3c1edc[_0x450158(0x45c)]?_0x3bff01=_0x3c1edc[_0x300755[_0x450158(0x401)]]:(this['logger'][_0x450158(0x4b3)](_0x450158(0x5be)+_0x300755[_0x450158(0x401)]),_0x3bff01=_0x450158(0x4b8));let _0x5ac635={'_id':_0x300755['id'],'colorHex':_0x3bff01,'color':_0x300755?.['color'],'name':_0x300755?.['name'],'owner':this[_0x450158(0x799)][_0x450158(0x3cb)]};await this[_0x450158(0x7be)][_0x450158(0x716)][_0x450158(0x372)]({'where':{'_id':_0x300755['id']}},_0x5ac635,this[_0x450158(0x799)][_0x450158(0x3cb)]),this[_0x450158(0x112)][_0x450158(0x567)](this[_0x450158(0x78b)]+'\x20('+this['instance'][_0x450158(0x3cb)]+_0x450158(0x6d2)+_0x300755);}_0x300755[_0x450158(0x705)]&&(await this[_0x450158(0x7be)][_0x450158(0x716)]['delete']({'where':{'_id':_0x300755['id']}},this['instance'][_0x450158(0x3cb)]),this[_0x450158(0x112)][_0x450158(0x567)](_0x450158(0x619)+_0x300755['id']));}},this['groupHandler']={'groups.upsert':async _0x8c3d1d=>{const _0x5c566e=_0x18220d;this['localWebhook']?.[_0x5c566e(0x21a)]||this['sendDataWebhook'](_0x5c566e(0x5c5),_0x8c3d1d);for(let _0x1879e3 of _0x8c3d1d)await this[_0x5c566e(0x442)](_0x1879e3);},'groups.update':async _0x3f7924=>{const _0x43d4f4=_0x18220d;this['localWebhook']?.[_0x43d4f4(0x21a)]||this[_0x43d4f4(0xb2)](_0x43d4f4(0x59e),_0x3f7924);for(let _0x315def of _0x3f7924)await this['updateGroupWebhook'](_0x315def);},'group-participants.update':async _0x1160a7=>{const _0x5e6f94=_0x18220d;this[_0x5e6f94(0x11c)]?.[_0x5e6f94(0x21a)]||this[_0x5e6f94(0xb2)](_0x5e6f94(0x3ad),_0x1160a7),await this[_0x5e6f94(0x631)](_0x1160a7);}},this['delayChatLabel_MAX_RETRIES']=0x5,this[_0x18220d(0x54c)]=0x1388,this[_0x18220d(0x269)]=0x0,this[_0x18220d(0x3cf)]=async _0x6bc253=>{const _0x40d3aa=_0x18220d;if(_0x6bc253[_0x40d3aa(0x499)]?.[_0x40d3aa(0x2ed)]){let _0x236d59=await this['getMessage'](_0x6bc253[_0x40d3aa(0x499)][_0x40d3aa(0x2ed)][_0x40d3aa(0x153)],!0x0);if(_0x236d59){let _0x5c5000=_0x236d59[_0x40d3aa(0x2bb)][_0x40d3aa(0x5cf)]?this[_0x40d3aa(0x799)][_0x40d3aa(0x3cb)]+_0x40d3aa(0x246):_0x236d59[_0x40d3aa(0x2bb)]['participant']||_0x236d59[_0x40d3aa(0x2bb)]['remoteJid'],_0xe9f2df=_0x236d59[_0x40d3aa(0x2bb)]['id'],_0x145c9a=_0x236d59[_0x40d3aa(0x499)],_0x3550cd=Buffer[_0x40d3aa(0x3a3)](_0x145c9a['messageContextInfo'][_0x40d3aa(0x139)]['toString'](_0x40d3aa(0x551)),_0x40d3aa(0x551)),_0x1e1464=(0x0,w[_0x40d3aa(0x2e5)])(_0x6bc253[_0x40d3aa(0x499)]['pollUpdateMessage'][_0x40d3aa(0x4c1)],{'pollCreatorJid':_0x5c5000,'pollMsgId':_0xe9f2df,'pollEncKey':_0x3550cd,'voterJid':_0x6bc253[_0x40d3aa(0x2bb)][_0x40d3aa(0x5cf)]?this['instance']['wuid']+'@s.whatsapp.net':_0x6bc253[_0x40d3aa(0x2bb)][_0x40d3aa(0x183)][_0x40d3aa(0x3ff)](_0x40d3aa(0x603))?_0x6bc253['key'][_0x40d3aa(0x169)]:_0x6bc253['key']['remoteJid']}),_0x41b616=[],_0x29236f=_0x1e1464[_0x40d3aa(0x739)][_0x40d3aa(0xff)](_0x18feef=>Buffer[_0x40d3aa(0x3a3)](_0x18feef)['toString'](_0x40d3aa(0x551)));for(let {optionName:_0x15f751}of _0x145c9a[_0x40d3aa(0xa6)]?.[_0x40d3aa(0x40d)]||_0x145c9a[_0x40d3aa(0x486)]?.[_0x40d3aa(0x40d)]||_0x145c9a[_0x40d3aa(0x12c)]?.[_0x40d3aa(0x40d)])_0x29236f['indexOf']((0x0,w['sha256'])(Buffer[_0x40d3aa(0x3a3)](_0x15f751))['toString'](_0x40d3aa(0x551)))>-0x1&&_0x41b616[_0x40d3aa(0x5ea)](_0x15f751);return _0x41b616;}}return null;},this[_0x18220d(0x4eb)]=(_0x15d99c,_0x591cb,_0x1a9f18)=>{const _0x3904a1=_0x18220d;try{let _0x97588c=_0x15d99c?(0x0,w[_0x3904a1(0x34c)])(_0x15d99c)[_0x591cb]:void 0x0,_0x1c8de1={},_0x5b3dcf=null,_0x2a7273=null,_0x2dd482=null;_0x591cb===_0x3904a1(0xd8)&&_0x97588c?.[_0x3904a1(0x208)]&&(_0x591cb=(0x0,w[_0x3904a1(0x7ea)])(_0x97588c[_0x3904a1(0x208)]),_0x5b3dcf=_0x15d99c[_0x3904a1(0xd8)][_0x3904a1(0x2bb)]['id'],_0x97588c=_0x15d99c['protocolMessage'][_0x3904a1(0x208)][_0x591cb]),_0x15d99c[_0x591cb]?.[_0x3904a1(0x721)]?.['stanzaId']&&_0x15d99c[_0x591cb]?.[_0x3904a1(0x721)]?.['quotedMessage']&&(_0x2a7273=_0x15d99c[_0x591cb][_0x3904a1(0x721)][_0x3904a1(0x186)]),_0x15d99c[_0x3904a1(0x757)]&&(_0x2dd482=_0x15d99c[_0x3904a1(0x757)][_0x3904a1(0x2bb)]['id']);let _0x57a661;if(_0x97588c&&typeof _0x97588c=='object'&&_0x3904a1(0x153)in _0x97588c&&({pollCreationMessageKey:_0x57a661}=_0x97588c),_0x591cb===_0x3904a1(0xa6)||_0x591cb===_0x3904a1(0x12c)||_0x591cb===_0x3904a1(0x486)){let _0x3e00e1=_0x97588c[_0x3904a1(0x40d)][_0x3904a1(0xff)](_0x310bff=>_0x310bff[_0x3904a1(0x64e)])[_0x3904a1(0x348)]('|');_0x1c8de1[_0x3904a1(0x77d)]=_0x3e00e1;}let _0xe9c750='';if(_0x97588c&&(_0xe9c750+=_0x97588c['name']?_0x97588c[_0x3904a1(0x5f4)]:'',_0xe9c750+=_0x97588c[_0x3904a1(0x2ae)]?'\x20'+_0x97588c['caption']:'',_0xe9c750+=_0x97588c['conversation']?'\x20'+_0x97588c['conversation']:'',_0xe9c750+=_0x97588c[_0x3904a1(0x7db)]?'\x20'+_0x97588c[_0x3904a1(0x7db)]:''),_0x591cb===_0x3904a1(0x6cf)){_0xe9c750=(_0x97588c['title']||'')+'\x0a'+(_0x97588c['description']||'')+'\x0a'+(_0x97588c[_0x3904a1(0x656)]||'');let _0x3d847=this[_0x3904a1(0x27a)](_0x97588c['sections']);_0x1c8de1[_0x3904a1(0x77d)]=_0x3d847;}if(_0x591cb==='listResponseMessage'&&(_0x1a9f18=_0x97588c[_0x3904a1(0x2dc)]),_0x97588c&&_0x97588c[_0x3904a1(0x4f9)]){let _0x34a6fb=this[_0x3904a1(0x639)](JSON[_0x3904a1(0x1bb)](_0x97588c[_0x3904a1(0x4f9)],null,0x2));_0xe9c750=_0xe9c750+'\x0a'+_0x34a6fb;}if(_0x97588c){let {sections:_0x57419a,listType:_0x570b28,displayName:_0x6a7917,vcard:_0x164994,contactVcard:_0x8e3711,name:_0x2d778b,caption:_0x5bdf39,conversation:_0x95d854,pollCreationMessageKey:_0x52d0bc,footerText:_0xe9400d,contentText:_0x16fa21,pageCount:_0x4e4abb,headerType:_0x2cc867,isAvatar:_0x37cc9c,isAnimated:_0x351e86,fallbackLc:_0x5342c1,fallbackLg:_0x2390fe,namespace:_0x51e8f1,elementName:_0x11a1eb,localizableParams:_0x330b82,viewOnce:_0x26f918,height:_0x149b76,width:_0x153992,key:_0x289c86,firstScanLength:_0x2be705,firstScanSidecar:_0xfc2ef,gifPlayback:_0x379d87,gifAttribution:_0x23eeb1,midQualityFileSha256:_0x127866,scansSidecar:_0x46f6fb,streamingSidecar:_0x4f738b,thumbnailHeight:_0x581267,thumbnailWidth:_0x17750c,thumbnailEncSha256:_0x173005,thumbnailDirectPath:_0x4d5bc4,canonicalUrl:_0x28f39c,matchedText:_0x290552,previewType:_0x5a111f,thumbnailSha256:_0x39ea79,deviceListMetadataVersion:_0x1a6b1f,inviteLinkGroupTypeV2:_0x48ee87,interactiveAnnotations:_0x3476e1,scanLengths:_0x29b4e8,jpegThumbnail:_0x409e11,url:_0x367e6d,mediaKeyTimestamp:_0x411b8c,waveform:_0x1235f0,stickerSentTs:_0x167062,firstFrameLength:_0x43e3c9,fileEncSha256:_0x38f58c,contextInfo:_0x23622a,firstFrameSidecar:_0x2e5f54,directPath:_0x58b321,fileSha256:_0x3fffe4,mediaKey:_0x2d4ffd,senderTimestampMs:_0x2246a8,..._0x4c348f}=_0x97588c;(_0x591cb===_0x3904a1(0x6cf)||_0x591cb===_0x3904a1(0x14e))&&(delete _0x4c348f[_0x3904a1(0x2dc)],delete _0x4c348f['description']),typeof _0x97588c==_0x3904a1(0x6e4)?_0x1c8de1={'text':_0x97588c,'type':_0x591cb||_0x3904a1(0x2cf),..._0x5b3dcf&&{'edited':_0x5b3dcf},..._0x2a7273&&{'quoted':_0x2a7273},..._0x2dd482&&{'reaction':_0x2dd482}}:_0x1c8de1={'text':_0xe9c750,..._0x4c348f,..._0x591cb==='pollUpdateMessage'?{'poll_id':_0x97588c['pollCreationMessageKey']['id'],'quoted':_0x97588c[_0x3904a1(0x153)]['id'],'vote':_0x1a9f18}:{},..._0x591cb===_0x3904a1(0x14e)?{'vote':_0x1a9f18}:{},'type':_0x591cb,..._0x5b3dcf&&{'edited':_0x5b3dcf},..._0x2a7273&&{'quoted':_0x2a7273},..._0x2dd482&&{'reaction':_0x2dd482},...(_0x591cb===_0x3904a1(0xa6)||_0x591cb==='pollCreationMessageV2'||_0x591cb==='pollCreationMessageV3'||_0x591cb===_0x3904a1(0x6cf))&&{'convertedOptions':_0x1c8de1[_0x3904a1(0x77d)]}};}return{'messageType':_0x591cb,'messageContent':_0x97588c,'message_normalized':_0x1c8de1};}catch(_0x3bac88){return this[_0x3904a1(0x112)][_0x3904a1(0x4b3)](_0x3904a1(0x764)+_0x3bac88),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this['pendingMessages']=[],(this[_0x18220d(0xf4)](),this['initializeQueue'](),this[_0x18220d(0x799)][_0x18220d(0x416)]={'count':0x0},this['instance'][_0x18220d(0x2fa)]={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}set['instanceName'](_0x6368a7){const _0x479cb8=a0_0x3f352e;if(!_0x6368a7){this[_0x479cb8(0x799)]['name']=(0x0,Ai['v4'])();return;}this[_0x479cb8(0x799)][_0x479cb8(0x5f4)]=_0x6368a7,this[_0x479cb8(0xb2)]('status.instance',{'instance':this[_0x479cb8(0x799)][_0x479cb8(0x5f4)],'status':'created'});}get['instanceName'](){const _0x597343=a0_0x3f352e;return this[_0x597343(0x799)][_0x597343(0x5f4)];}get['wuid'](){const _0x57b58f=a0_0x3f352e;return this[_0x57b58f(0x799)]['wuid'];}async['getProfileName'](){const _0x5916c5=a0_0x3f352e;let _0x14198e=this[_0x5916c5(0x3de)][_0x5916c5(0x642)]?.[_0x5916c5(0x5f4)]??this[_0x5916c5(0x3de)][_0x5916c5(0x642)]?.[_0x5916c5(0x35e)];if(!_0x14198e){if(this[_0x5916c5(0x446)]['get'](_0x5916c5(0x611))[_0x5916c5(0x681)]){let _0x5d63eb=await R['getClient']()['db'](this[_0x5916c5(0x446)]['get']('DATABASE')[_0x5916c5(0x68c)][_0x5916c5(0x331)]+_0x5916c5(0x2ab))[_0x5916c5(0x48b)](this[_0x5916c5(0x78b)])[_0x5916c5(0x312)]({'_id':'creds'});if(_0x5d63eb){let _0x73d475=JSON[_0x5916c5(0x4d4)](JSON[_0x5916c5(0x1bb)](_0x5d63eb),w['BufferJSON'][_0x5916c5(0x394)]);_0x14198e=_0x73d475['me']?.[_0x5916c5(0x5f4)]||_0x73d475['me']?.['verifiedName'];}}else{if((0x0,Le[_0x5916c5(0x735)])((0x0,U[_0x5916c5(0x348)])(be,this[_0x5916c5(0x78b)],_0x5916c5(0x768)))){let _0x10d48d=JSON[_0x5916c5(0x4d4)]((0x0,Le['readFileSync'])((0x0,U[_0x5916c5(0x348)])(be,this[_0x5916c5(0x78b)],_0x5916c5(0x768)),{'encoding':_0x5916c5(0x12d)}));_0x14198e=_0x10d48d['me']?.[_0x5916c5(0x5f4)]||_0x10d48d['me']?.[_0x5916c5(0x35e)];}}}return _0x14198e;}get['profilePictureUrl'](){const _0xd9010b=a0_0x3f352e;return this[_0xd9010b(0x799)]['profilePictureUrl'];}get[a0_0x3f352e(0x211)](){const _0x5a43d0=a0_0x3f352e;return this['instance'][_0x5a43d0(0x416)]?.[_0x5a43d0(0x653)]?{'pairingCode':this['instance']['qrcode']?.[_0x5a43d0(0x653)]}:{'code':this[_0x5a43d0(0x799)][_0x5a43d0(0x416)]?.[_0x5a43d0(0x3ec)],'base64':this['instance'][_0x5a43d0(0x416)]?.[_0x5a43d0(0x60d)]};}async[a0_0x3f352e(0x39a)](){const _0x3cd798=a0_0x3f352e;let _0x2870ea=await this['repository'][_0x3cd798(0x20c)]['find'](this[_0x3cd798(0x78b)]);this[_0x3cd798(0x11c)]['url']=_0x2870ea?.[_0x3cd798(0x163)],this['localWebhook']['enabled']=_0x2870ea?.['enabled'],this[_0x3cd798(0x11c)][_0x3cd798(0x395)]=_0x2870ea?.[_0x3cd798(0x395)],this[_0x3cd798(0x11c)][_0x3cd798(0x1dc)]=_0x2870ea?.['STATUS_INSTANCE'],this[_0x3cd798(0x11c)][_0x3cd798(0x6f4)]=_0x2870ea?.[_0x3cd798(0x6f4)],this[_0x3cd798(0x11c)][_0x3cd798(0x266)]=_0x2870ea?.[_0x3cd798(0x266)],this[_0x3cd798(0x11c)][_0x3cd798(0x451)]=_0x2870ea?.[_0x3cd798(0x451)],this[_0x3cd798(0x11c)][_0x3cd798(0x63e)]=_0x2870ea?.[_0x3cd798(0x63e)],this[_0x3cd798(0x11c)][_0x3cd798(0x77c)]=_0x2870ea?.[_0x3cd798(0x77c)],this['localWebhook'][_0x3cd798(0x244)]=_0x2870ea?.[_0x3cd798(0x244)],this[_0x3cd798(0x11c)][_0x3cd798(0x11e)]=_0x2870ea?.[_0x3cd798(0x11e)],this['localWebhook'][_0x3cd798(0x1d3)]=_0x2870ea?.[_0x3cd798(0x1d3)],this['localWebhook'][_0x3cd798(0x361)]=_0x2870ea?.['CHATS_UPSERT'],this[_0x3cd798(0x11c)][_0x3cd798(0x55e)]=_0x2870ea?.['CHATS_UPDATE'],this['localWebhook'][_0x3cd798(0x510)]=_0x2870ea?.[_0x3cd798(0x510)],this[_0x3cd798(0x11c)][_0x3cd798(0x523)]=_0x2870ea?.[_0x3cd798(0x523)],this[_0x3cd798(0x11c)][_0x3cd798(0x798)]=_0x2870ea?.['CONTACTS_UPSERT'],this[_0x3cd798(0x11c)]['CONTACTS_UPDATE']=_0x2870ea?.['CONTACTS_UPDATE'],this[_0x3cd798(0x11c)]['PRESENCE_UPDATE']=_0x2870ea?.['PRESENCE_UPDATE'],this[_0x3cd798(0x11c)]['MESSAGES_SET']=_0x2870ea?.['MESSAGES_SET'],this[_0x3cd798(0x11c)][_0x3cd798(0x2d6)]=_0x2870ea?.[_0x3cd798(0x2d6)],this[_0x3cd798(0x11c)][_0x3cd798(0x21a)]=_0x2870ea?.[_0x3cd798(0x21a)];}async[a0_0x3f352e(0x685)](_0x582c50){const _0x4d7c3d=a0_0x3f352e;let _0x5d930d=[_0x4d7c3d(0x68d),'url',_0x4d7c3d(0x167),_0x4d7c3d(0x395),_0x4d7c3d(0x1dc),_0x4d7c3d(0x6f4),'MESSAGES_UPDATE','MESSAGES_UPSERT','SEND_MESSAGE',_0x4d7c3d(0x77c),_0x4d7c3d(0x244),_0x4d7c3d(0x11e),_0x4d7c3d(0x1d3),'CHATS_UPSERT',_0x4d7c3d(0x55e),_0x4d7c3d(0x510),_0x4d7c3d(0x523),_0x4d7c3d(0x798),_0x4d7c3d(0x2d4),'PRESENCE_UPDATE',_0x4d7c3d(0x430),_0x4d7c3d(0x2d6),_0x4d7c3d(0x21a)],_0x41b45a={};return _0x5d930d['forEach'](_0x5d7526=>{_0x582c50[_0x5d7526]!==void 0x0&&(_0x41b45a[_0x5d7526]=_0x582c50[_0x5d7526]);}),_0x41b45a[_0x4d7c3d(0x163)]&&(_0x41b45a[_0x4d7c3d(0x163)]=_0x41b45a[_0x4d7c3d(0x163)][_0x4d7c3d(0x1e6)]()),await this[_0x4d7c3d(0x7be)][_0x4d7c3d(0x20c)][_0x4d7c3d(0x325)](_0x41b45a,this[_0x4d7c3d(0x78b)]),Object[_0x4d7c3d(0x4ce)](this[_0x4d7c3d(0x11c)],_0x41b45a),await this[_0x4d7c3d(0x7be)][_0x4d7c3d(0x20c)][_0x4d7c3d(0x71f)](this['instanceName']);}async[a0_0x3f352e(0x2b8)](){const _0x39d1b0=a0_0x3f352e;return await this[_0x39d1b0(0x7be)][_0x39d1b0(0x20c)][_0x39d1b0(0x71f)](this['instanceName']);}async[a0_0x3f352e(0xb2)](_0xd1067f,_0xc6d6bb){const _0xb233a7=a0_0x3f352e;let _0x38553b=_0xd1067f['replace'](/[\.-]/gm,'_')[_0xb233a7(0x6ac)](),_0x47b6ee=this[_0xb233a7(0x11c)][_0xb233a7(0x167)]&&(0x0,k['isURL'])(this[_0xb233a7(0x11c)][_0xb233a7(0x163)])?this[_0xb233a7(0x11c)]['url']+(this['localWebhook'][_0xb233a7(0x395)]?this['webhookMap'][_0xd1067f]:''):null,_0x19ecbd=this[_0xb233a7(0x11c)][_0x38553b],_0x22178f=pe&&pe[_0xb233a7(0x167)]&&(0x0,k[_0xb233a7(0x663)])(pe[_0xb233a7(0x163)])?pe[_0xb233a7(0x163)]+(pe[_0xb233a7(0x395)]?this[_0xb233a7(0x59b)][_0xd1067f]:''):null,_0x3d5179=pe?pe[_0x38553b]:null;if(_0x19ecbd&&_0x47b6ee)try{await Y['default']['create']({'baseURL':_0x47b6ee})['post']('',{'event':_0xd1067f,'instance':this[_0xb233a7(0x799)]['name'],'apikey':this[_0xb233a7(0x799)]['apikey'],'data':_0xc6d6bb}),this['logger'][_0xb233a7(0x133)](this[_0xb233a7(0x78b)]+'\x20('+this[_0xb233a7(0x799)][_0xb233a7(0x3cb)]+_0xb233a7(0x547)+_0xd1067f+':\x20'+_0x47b6ee);}catch{this[_0xb233a7(0x112)][_0xb233a7(0x4b3)](this[_0xb233a7(0x78b)]+'\x20('+this[_0xb233a7(0x799)]['wuid']+_0xb233a7(0x74a)+_0xd1067f+':\x20'+_0x47b6ee);}if(_0x3d5179&&_0x22178f)try{await Y[_0xb233a7(0x164)][_0xb233a7(0x325)]({'baseURL':_0x22178f})['post']('',{'event':_0xd1067f,'instance':this[_0xb233a7(0x799)][_0xb233a7(0x5f4)],'apikey':this[_0xb233a7(0x799)][_0xb233a7(0x6dc)],'data':_0xc6d6bb}),this[_0xb233a7(0x112)][_0xb233a7(0x133)](this[_0xb233a7(0x78b)]+'\x20('+this[_0xb233a7(0x799)]['wuid']+_0xb233a7(0x100)+_0xd1067f+':\x20'+_0x22178f);}catch{this['logger'][_0xb233a7(0x4b3)](this[_0xb233a7(0x78b)]+'\x20('+this[_0xb233a7(0x799)][_0xb233a7(0x3cb)]+'):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20'+_0xd1067f+':\x20'+_0x22178f);}}async[a0_0x3f352e(0x613)]({qr:_0x517cc3,connection:_0x33f6f1,lastDisconnect:_0x10d19a}){const _0x33a5d9=a0_0x3f352e;if(_0x517cc3){if(this[_0x33a5d9(0x799)][_0x33a5d9(0x416)][_0x33a5d9(0x5b4)]===Do)return this[_0x33a5d9(0xb2)](_0x33a5d9(0x369),{'message':'Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','statusCode':w[_0x33a5d9(0x521)][_0x33a5d9(0x50e)]}),this[_0x33a5d9(0x14d)]={'state':_0x33a5d9(0x66f),'statusReason':w[_0x33a5d9(0x521)][_0x33a5d9(0x2b9)]},this[_0x33a5d9(0xb2)](_0x33a5d9(0x171),{'instance':this['instance']['name'],...this[_0x33a5d9(0x14d)]}),this[_0x33a5d9(0xb2)](_0x33a5d9(0x13d),{'instance':this['instance'][_0x33a5d9(0x5f4)],'status':_0x33a5d9(0x5d5)}),this['repository'][_0x33a5d9(0x554)][_0x33a5d9(0x49b)](this[_0x33a5d9(0x799)][_0x33a5d9(0x5f4)]),this['endSession']=!0x0,ae[_0x33a5d9(0x107)](W,this[_0x33a5d9(0x799)][_0x33a5d9(0x5f4)]),this[_0x33a5d9(0x55d)][_0x33a5d9(0x25a)](_0x33a5d9(0x122),this[_0x33a5d9(0x799)][_0x33a5d9(0x5f4)]);this[_0x33a5d9(0x799)][_0x33a5d9(0x416)][_0x33a5d9(0x5b4)]++;let _0x5d6807={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x33a5d9(0x2a7),'dark':'#000000'}};Ii[_0x33a5d9(0x164)][_0x33a5d9(0x73b)](_0x517cc3,_0x5d6807,(_0x430315,_0x548076)=>{const _0x2ca316=_0x33a5d9;if(_0x430315){this[_0x2ca316(0x112)][_0x2ca316(0x4b3)](this['instanceName']+'\x20('+this[_0x2ca316(0x799)][_0x2ca316(0x3cb)]+_0x2ca316(0x632)+(_0x430315 instanceof Error?_0x430315[_0x2ca316(0x499)]:JSON[_0x2ca316(0x1bb)](_0x430315,null,0x2)));return;}this[_0x2ca316(0x799)]['qrcode'][_0x2ca316(0x60d)]=_0x548076,this[_0x2ca316(0x799)][_0x2ca316(0x416)]['code']=_0x517cc3,!this[_0x2ca316(0x46a)]&&this[_0x2ca316(0xb2)](_0x2ca316(0x369),{'qrcode':{'instance':this[_0x2ca316(0x799)]['name'],'pairingCode':this['instance'][_0x2ca316(0x416)][_0x2ca316(0x653)],'code':_0x517cc3,'base64':_0x548076}});}),this[_0x33a5d9(0x46a)]?this['instance'][_0x33a5d9(0x416)]['pairingCode']||(await(0x0,w[_0x33a5d9(0x6a3)])(0x7d0),this[_0x33a5d9(0x799)][_0x33a5d9(0x416)][_0x33a5d9(0x653)]=await this['client'][_0x33a5d9(0x58b)](this['phoneNumber'])):this[_0x33a5d9(0x799)]['qrcode'][_0x33a5d9(0x653)]=null,Ti[_0x33a5d9(0x164)]['generate'](_0x517cc3,{'small':!0x0},_0x3f5987=>this[_0x33a5d9(0x112)][_0x33a5d9(0x133)](_0x33a5d9(0xe6)+this[_0x33a5d9(0x799)][_0x33a5d9(0x5f4)]+_0x33a5d9(0x292)+this['instance'][_0x33a5d9(0x416)][_0x33a5d9(0x5b4)]+_0x33a5d9(0x1c1)+this[_0x33a5d9(0x799)][_0x33a5d9(0x416)][_0x33a5d9(0x653)]+_0x33a5d9(0x2c0)+_0x3f5987));}if(_0x33f6f1&&(this[_0x33a5d9(0x14d)]={'state':_0x33f6f1,'statusReason':_0x10d19a?.[_0x33a5d9(0x4b3)]?.[_0x33a5d9(0x2a8)]?.[_0x33a5d9(0x147)]??0xc8},this[_0x33a5d9(0xb2)]('connection.update',{'instance':this['instance'][_0x33a5d9(0x5f4)],...this[_0x33a5d9(0x14d)]})),_0x33f6f1===_0x33a5d9(0x4b2)){if(this[_0x33a5d9(0x151)]++,this[_0x33a5d9(0x3d3)][_0x33a5d9(0x5ea)](Date[_0x33a5d9(0x196)]()),this['reconnectTimestamps']=this['reconnectTimestamps'][_0x33a5d9(0x495)](_0x4710e7=>Date['now']()-_0x4710e7<this['RECONNECT_TIME_FRAME']),_0x10d19a['error']?.[_0x33a5d9(0x2a8)]?.[_0x33a5d9(0x147)]!==w[_0x33a5d9(0x521)][_0x33a5d9(0x2cd)]){let _0x64dbf0=this['reconnectAttempts']<=0x1?0x0:Math[_0x33a5d9(0x51f)](Math['pow'](0x2,this[_0x33a5d9(0x151)]-0x1)*0x3e8,0x493e0);console[_0x33a5d9(0x133)](this[_0x33a5d9(0x78b)]+_0x33a5d9(0x34a)+this['reconnectAttempts']+_0x33a5d9(0x48a)+_0x64dbf0/0x3e8+_0x33a5d9(0x65c)),await new Promise(_0x59a0b9=>setTimeout(_0x59a0b9,_0x64dbf0)),console[_0x33a5d9(0x133)](_0x33a5d9(0x5d9)),await this['connectToWhatsapp']();}else{this[_0x33a5d9(0xb2)](_0x33a5d9(0x13d),{'instance':this[_0x33a5d9(0x799)][_0x33a5d9(0x5f4)],'status':'removed'}),this[_0x33a5d9(0x799)][_0x33a5d9(0x2fa)][_0x33a5d9(0x73f)]=!0x1,this[_0x33a5d9(0x7be)][_0x33a5d9(0x20c)]['delete'](this[_0x33a5d9(0x78b)]),this[_0x33a5d9(0x7be)][_0x33a5d9(0x554)]['create']({'owner':'','online':!0x1,'lastDisconnect':Date[_0x33a5d9(0x196)]()},this['instance'][_0x33a5d9(0x5f4)]),ae['removeIPv6ById'](W,this[_0x33a5d9(0x799)][_0x33a5d9(0x5f4)]);try{this['logger'][_0x33a5d9(0x72d)](this['instanceName']+'\x20('+this[_0x33a5d9(0x799)][_0x33a5d9(0x3cb)]+_0x33a5d9(0x318));let _0x5d5da0=await this[_0x33a5d9(0x7be)][_0x33a5d9(0x499)][_0x33a5d9(0x695)](this[_0x33a5d9(0x799)][_0x33a5d9(0x3cb)]);_0x5d5da0['success']?this['logger'][_0x33a5d9(0x72d)](this[_0x33a5d9(0x78b)]+'\x20('+this[_0x33a5d9(0x799)][_0x33a5d9(0x3cb)]+_0x33a5d9(0x1b9)):this[_0x33a5d9(0x112)][_0x33a5d9(0x4b3)]('Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20'+_0x5d5da0[_0x33a5d9(0x4b3)]);}catch(_0x28bf15){this[_0x33a5d9(0x112)][_0x33a5d9(0x4b3)]('Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20'+_0x28bf15['message']);}this['instance'][_0x33a5d9(0x2fa)][_0x33a5d9(0x42f)]!==null&&(this['logger'][_0x33a5d9(0x72d)](this[_0x33a5d9(0x78b)]+'\x20('+this[_0x33a5d9(0x799)][_0x33a5d9(0x3cb)]+_0x33a5d9(0x76d)),clearInterval(this['instance']['ScheduleMessage']['delayMessage']),this[_0x33a5d9(0x799)]['ScheduleMessage'][_0x33a5d9(0x42f)]=null),this[_0x33a5d9(0x112)][_0x33a5d9(0x72d)](this[_0x33a5d9(0x78b)]+'\x20('+this[_0x33a5d9(0x799)][_0x33a5d9(0x3cb)]+_0x33a5d9(0x4d7)),this[_0x33a5d9(0x2f7)]=null,this['eventEmitter']['emit'](_0x33a5d9(0x729),this[_0x33a5d9(0x799)][_0x33a5d9(0x5f4)],_0x33a5d9(0x70c)),this[_0x33a5d9(0x3de)]?.['ws']?.[_0x33a5d9(0x4b2)](),this['client']['end'](new Error(_0x33a5d9(0x464)));}}if(_0x33f6f1===_0x33a5d9(0x6d3)){this[_0x33a5d9(0x112)][_0x33a5d9(0x76b)](this['instanceName']+'\x20('+this['instance'][_0x33a5d9(0x3cb)]+_0x33a5d9(0x462)+this['client']['authState']['creds']?.[_0x33a5d9(0x7de)]),this['client'][_0x33a5d9(0x458)][_0x33a5d9(0xed)]?.[_0x33a5d9(0x7de)]||(this[_0x33a5d9(0x112)][_0x33a5d9(0x76b)](this['instanceName']+'\x20('+this['instance'][_0x33a5d9(0x3cb)]+_0x33a5d9(0x15d)),this[_0x33a5d9(0x3de)]['ev'][_0x33a5d9(0x2fc)]()),this[_0x33a5d9(0x6c3)],this[_0x33a5d9(0x799)]['wuid']=this[_0x33a5d9(0x3de)]['user']['id'][_0x33a5d9(0x166)](/:\d+/,'')['replace'](_0x33a5d9(0x246),''),this[_0x33a5d9(0x799)]['profilePictureUrl']=(await this[_0x33a5d9(0x1ee)](this[_0x33a5d9(0x799)][_0x33a5d9(0x3cb)]+_0x33a5d9(0x246)))[_0x33a5d9(0x700)],this[_0x33a5d9(0x7be)][_0x33a5d9(0x554)][_0x33a5d9(0x325)]({'online':!0x0,'owner':this['instance'][_0x33a5d9(0x3cb)],'lastDisconnect':null},this[_0x33a5d9(0x799)]['name']);let _0x38caa6=_0x33a5d9(0x731)+this['instance'][_0x33a5d9(0x3cb)],_0x9fe9d7=0x28,_0x2813f9=Math[_0x33a5d9(0x62b)]((_0x9fe9d7-_0x38caa6[_0x33a5d9(0x45c)])/0x2),_0x113dac='\x20'[_0x33a5d9(0x502)](_0x2813f9),_0x3c1da2=_0x33a5d9(0xa5),_0xdc4623=_0x33a5d9(0xc3)+this[_0x33a5d9(0x799)]['name'],_0x3f1500=(''+_0x113dac+_0x38caa6+_0x113dac)['padEnd'](_0x9fe9d7,'\x20'),_0x32962f=(''+_0x113dac+_0x3c1da2+_0x113dac)[_0x33a5d9(0x57f)](_0x9fe9d7,'\x20'),_0x1f2a5c=(''+_0x113dac+_0xdc4623+_0x113dac)[_0x33a5d9(0x57f)](_0x9fe9d7,'\x20'),_0x27c8b2=Math[_0x33a5d9(0x33c)](_0x3f1500[_0x33a5d9(0x45c)],_0x32962f['length'],_0x1f2a5c[_0x33a5d9(0x45c)]),_0x54c40a=_0x3f1500[_0x33a5d9(0x57f)](_0x27c8b2,'\x20'),_0x20494e=_0x32962f[_0x33a5d9(0x57f)](_0x27c8b2,'\x20'),_0x3a6704=_0x1f2a5c[_0x33a5d9(0x57f)](_0x27c8b2,'\x20');this[_0x33a5d9(0x112)]['info']((_0x33a5d9(0x6cc)+'─'[_0x33a5d9(0x502)](_0x27c8b2)+_0x33a5d9(0x1aa)+_0x20494e+_0x33a5d9(0x3bc)+_0x3a6704+_0x33a5d9(0x3bc)+_0x54c40a+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└'+'─'[_0x33a5d9(0x502)](_0x27c8b2)+'┘')[_0x33a5d9(0x166)](/^ +/gm,'\x20\x20')),this[_0x33a5d9(0x252)](),this[_0x33a5d9(0x799)][_0x33a5d9(0x2fa)]['isConnected']=!0x0;}}['resetReconnectionVariables'](){const _0x3bea7b=a0_0x3f352e;this[_0x3bea7b(0x151)]=0x0,this[_0x3bea7b(0x3d3)]=[];}async[a0_0x3f352e(0xf0)](_0x38648e,_0x40ffe9=!0x1){const _0x33ccd4=a0_0x3f352e;try{let _0x585e2c=await this[_0x33ccd4(0x7be)]['message'][_0x33ccd4(0x71f)]({'where':{'_id':_0x38648e['id']}},this[_0x33ccd4(0x799)][_0x33ccd4(0x3cb)]);return _0x40ffe9?_0x585e2c[0x0]:_0x585e2c[0x0][_0x33ccd4(0x499)];}catch{return{'conversation':''};}}[a0_0x3f352e(0xf4)](){const _0x52565c=a0_0x3f352e;let _0x599f70=this[_0x52565c(0x446)][_0x52565c(0x427)](_0x52565c(0x18f)),_0x21a85f=this[_0x52565c(0x446)][_0x52565c(0x427)](_0x52565c(0x611));_0x599f70?.[_0x52565c(0x586)]&&!_0x21a85f[_0x52565c(0x681)]&&setInterval(()=>{const _0x4db039=_0x52565c;try{for(let [_0x48f17e,_0x34a3e0]of Object['entries'](_0x599f70))_0x34a3e0===!0x0&&(0x0,Fe[_0x4db039(0x6e6)])('rm\x20-rf\x20'+(0x0,U[_0x4db039(0x348)])(this['storePath'],_0x48f17e[_0x4db039(0x711)](),this[_0x4db039(0x799)][_0x4db039(0x3cb)])+'/*.json');}catch{}},(_0x599f70?.[_0x52565c(0x586)]??0xe10)*0x3e8);}async[a0_0x3f352e(0x32d)](){const _0x5a00d1=a0_0x3f352e;let _0x111cca=this[_0x5a00d1(0x446)][_0x5a00d1(0x427)](_0x5a00d1(0x611)),_0x1894d9=this[_0x5a00d1(0x446)][_0x5a00d1(0x427)](_0x5a00d1(0x5fd));return _0x1894d9?.[_0x5a00d1(0x681)]?await Ts(_0x1894d9,this['instance'][_0x5a00d1(0x5f4)]):_0x111cca[_0x5a00d1(0x681)]?await Is(this['instance'][_0x5a00d1(0x5f4)]):await(0x0,w['useMultiFileAuthState'])((0x0,U['join'])(be,this[_0x5a00d1(0x799)]['name']));}async['AutomateFunctions'](){const _0xd93fee=a0_0x3f352e;let _0x468e67=()=>Math[_0xd93fee(0x62b)](Math['random']()*0x4e21)+0x7d0,_0x26f064=async()=>{const _0x48ee53=_0xd93fee;if(!this[_0x48ee53(0x799)]['ScheduleMessage'][_0x48ee53(0x73f)]){this[_0x48ee53(0x112)][_0x48ee53(0x72d)](this[_0x48ee53(0x78b)]+'\x20('+this[_0x48ee53(0x799)][_0x48ee53(0x3cb)]+_0x48ee53(0x1be)),this['isRunning']=!0x1;return;}if(this[_0x48ee53(0x799)][_0x48ee53(0x3cb)]&&this[_0x48ee53(0x2f7)]&&this[_0x48ee53(0x799)]['ScheduleMessage'][_0x48ee53(0x42f)]!==null&&this[_0x48ee53(0x799)]['ScheduleMessage'][_0x48ee53(0x42f)]!==void 0x0){let _0x2c8f26=Math[_0x48ee53(0x194)](this[_0x48ee53(0x799)][_0x48ee53(0x2fa)][_0x48ee53(0x42f)]/0xea60);this[_0x48ee53(0x112)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x48ee53(0x51a)+_0x2c8f26+_0x48ee53(0x3b0)),this[_0x48ee53(0x7cc)]=!0x1;return;}else this[_0x48ee53(0x799)][_0x48ee53(0x3cb)]&&(this['logger'][_0x48ee53(0x72d)](this[_0x48ee53(0x78b)]+'\x20('+this[_0x48ee53(0x799)][_0x48ee53(0x3cb)]+_0x48ee53(0x6f7)),this['AutomateSystem']||(await this['getAutomateSystem'](),this[_0x48ee53(0x2ff)](),this[_0x48ee53(0x13b)]()),(this['instance'][_0x48ee53(0x2fa)][_0x48ee53(0x42f)]===null||this[_0x48ee53(0x799)][_0x48ee53(0x2fa)]['delayMessage']===void 0x0)&&await this[_0x48ee53(0x4a9)]());if(this[_0x48ee53(0x7cc)]){let _0x27e6dc=_0x468e67();this[_0x48ee53(0x112)]['verbose'](this[_0x48ee53(0x78b)]+':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20'+_0x27e6dc/0x3e8+_0x48ee53(0x68b)),setTimeout(_0x26f064,_0x27e6dc);}};if(this[_0xd93fee(0x7cc)])return;this[_0xd93fee(0x7cc)]=!0x0;let _0x28bb9b=_0x468e67();setTimeout(_0x26f064,_0x28bb9b);}async[a0_0x3f352e(0x13b)](){const _0x3c1d47=a0_0x3f352e;let _0x4bfa2d=this[_0x3c1d47(0x799)][_0x3c1d47(0x3cb)];try{let _0x4b5624=await this['repository'][_0x3c1d47(0x2b2)][_0x3c1d47(0x58d)]({'where':{'$or':[{'owner':_0x4bfa2d},{'whoCanUse':{'$in':[_0x4bfa2d]}},{'shareOwners':{'$in':[_0x4bfa2d]}}]}}),_0x34b049=new Map(this['AutomateSystem'][_0x3c1d47(0x334)][_0x3c1d47(0xff)](_0x40cae0=>[_0x40cae0['_id'],_0x40cae0])),_0x454419=_0x4b5624[_0x3c1d47(0xff)](_0x2475ad=>{const _0x40dc53=_0x3c1d47;let _0x1bfcde=_0x34b049['get'](_0x2475ad[_0x40dc53(0x68d)]?.[_0x40dc53(0x123)]());return{'_id':_0x2475ad[_0x40dc53(0x68d)]?.['toString'](),'name':_0x1bfcde?.[_0x40dc53(0x5f4)]??_0x2475ad['name'],'default':_0x1bfcde?.['default']??_0x2475ad[_0x40dc53(0x164)]??!0x1,'startCommand':_0x1bfcde?.[_0x40dc53(0x726)]??_0x2475ad[_0x40dc53(0xac)],'minutesToClose':_0x1bfcde?.[_0x40dc53(0x734)]??_0x2475ad[_0x40dc53(0x734)]??0xa,'readMessages':_0x1bfcde?.['readMessages']??_0x2475ad[_0x40dc53(0x4e4)]??!0x1,'testingWith':_0x1bfcde?.[_0x40dc53(0x2f1)]??_0x2475ad[_0x40dc53(0x2f1)],'canEdit':_0x2475ad[_0x40dc53(0x19a)]===_0x4bfa2d||(_0x2475ad[_0x40dc53(0x553)]??[])[_0x40dc53(0x2bf)](_0x4bfa2d),'usersCount':(_0x2475ad['shareOwners']??[])[_0x40dc53(0x45c)]??0x0};}),_0x5d98e6=!0x1;_0x454419[_0x3c1d47(0x62c)](_0x529321=>{_0x529321['default']&&(_0x5d98e6?_0x529321['default']=!0x1:_0x5d98e6=!0x0);}),this[_0x3c1d47(0x2f7)][_0x3c1d47(0x334)]=_0x454419;let _0x2f68f2={'flows':_0x454419};return await this['repository'][_0x3c1d47(0x2d3)][_0x3c1d47(0x6c1)](_0x2f68f2,_0x4bfa2d),this[_0x3c1d47(0x112)]['verbose'](this['instanceName']+'\x20('+_0x4bfa2d+_0x3c1d47(0x221)),_0x454419[_0x3c1d47(0x45c)];}catch(_0x19f973){return this[_0x3c1d47(0x112)][_0x3c1d47(0x4b3)](this[_0x3c1d47(0x78b)]+'\x20('+_0x4bfa2d+_0x3c1d47(0x34e)+(_0x19f973 instanceof Error?_0x19f973[_0x3c1d47(0x499)]:JSON[_0x3c1d47(0x1bb)](_0x19f973,null,0x2))),{'message':_0x3c1d47(0x42d)+(_0x19f973 instanceof Error?_0x19f973[_0x3c1d47(0x499)]:JSON[_0x3c1d47(0x1bb)](_0x19f973,null,0x2))};}}async['connectToWhatsapp'](_0x1adab1){const _0x133003=a0_0x3f352e;try{let _0x3dd86e=await this[_0x133003(0x7be)][_0x133003(0x799)][_0x133003(0x312)]({'where':{'_id':W+'-'+this['instanceName']}}),_0x5bce22,_0x196db5=!ae[_0x133003(0x4c0)]||!ae[_0x133003(0x23b)];console[_0x133003(0x133)]('--------------------------------------'),console[_0x133003(0x133)](_0x133003(0xe8),Ri),console['log']('this.reconnectAttempts:\x20',this[_0x133003(0x151)]),console['log'](_0x133003(0x1f1)),Ri&&!_0x196db5&&(this[_0x133003(0x151)]<0x4||!this[_0x133003(0x151)]?_0x3dd86e&&_0x3dd86e['ip']?(_0x5bce22=_0x3dd86e['ip'],console['log'](_0x133003(0x425)+_0x5bce22)):(_0x5bce22=await ae['createIPv6'](W,this[_0x133003(0x799)][_0x133003(0x5f4)]),_0x5bce22?(console['log']('Novo\x20IP\x20criado:\x20'+_0x5bce22),await(0x0,w[_0x133003(0x6a3)])(0x7d0)):console[_0x133003(0x4b3)]('Falha\x20ao\x20criar\x20IPv6.')):this['reconnectAttempts']<0x6&&(await ae[_0x133003(0x107)](W,this[_0x133003(0x799)]['name']),console[_0x133003(0x133)](_0x133003(0xda)),_0x5bce22=await ae[_0x133003(0x31f)](W,this['instance']['name']),_0x5bce22?(console['log'](_0x133003(0x5e8)+_0x5bce22),await(0x0,w[_0x133003(0x6a3)])(0x7d0)):console[_0x133003(0x4b3)](_0x133003(0xe0)))),this[_0x133003(0x39a)](),this['instance'][_0x133003(0x6dc)]=(await this[_0x133003(0x7be)][_0x133003(0x554)]['find'](this[_0x133003(0x799)][_0x133003(0x5f4)]))['apikey'],this['instance'][_0x133003(0x458)]=await this[_0x133003(0x32d)]();let {version:_0x39fe41}=await(0x0,w[_0x133003(0x5ca)])(),_0x169b80=[_i,ks,(0x0,xs['release'])()],_0x250837={'localAddress':_0x5bce22,'auth':{'creds':this[_0x133003(0x799)][_0x133003(0x458)][_0x133003(0x4a2)][_0x133003(0xed)],'keys':(0x0,w['makeCacheableSignalKeyStore'])(this[_0x133003(0x799)][_0x133003(0x458)][_0x133003(0x4a2)][_0x133003(0x75c)],(0x0,Ut['default'])({'level':_0x133003(0x4b3)}))},'logger':(0x0,Ut['default'])({'level':_0x133003(0x4b3)}),'printQRInTerminal':!0x1,'browser':_0x1adab1?[_0x133003(0x6d0),ks,(0x0,xs['release'])()]:_0x169b80,'version':_0x39fe41,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x32b5ba=>{const _0x11be46=_0x133003;let _0x438976=this[_0x11be46(0x11c)]?.['groups_ignore']&&(0x0,w[_0x11be46(0x47d)])(_0x32b5ba);return(0x0,w[_0x11be46(0x4a1)])(_0x32b5ba)||_0x438976;},'msgRetryCounterCache':this[_0x133003(0x56a)],'getMessage':async _0x16ed4d=>await this[_0x133003(0xf0)](_0x16ed4d),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x133003(0x54b)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x5a52da){const _0x5aed69=_0x133003;return _0x5a52da[_0x5aed69(0x40e)]?.[_0x5aed69(0x499)]?.[_0x5aed69(0x6cf)]?.[_0x5aed69(0xb9)]===w['proto'][_0x5aed69(0x104)]['ListMessage']['ListType'][_0x5aed69(0x2aa)]&&(_0x5a52da=JSON['parse'](JSON['stringify'](_0x5a52da)),_0x5a52da[_0x5aed69(0x40e)][_0x5aed69(0x499)]['listMessage'][_0x5aed69(0xb9)]=w['proto'][_0x5aed69(0x104)][_0x5aed69(0xf7)]['ListType'][_0x5aed69(0x193)]),_0x5a52da['listMessage']?.['listType']==w[_0x5aed69(0x605)][_0x5aed69(0x104)][_0x5aed69(0xf7)][_0x5aed69(0x337)][_0x5aed69(0x2aa)]&&(_0x5a52da=JSON['parse'](JSON['stringify'](_0x5a52da)),_0x5a52da[_0x5aed69(0x6cf)]['listType']=w[_0x5aed69(0x605)][_0x5aed69(0x104)][_0x5aed69(0xf7)][_0x5aed69(0x337)]['SINGLE_SELECT']),_0x5a52da;}};return this[_0x133003(0x5c1)]=!0x1,this[_0x133003(0x3de)]=(0x0,w[_0x133003(0x164)])(_0x250837),this['eventHandler'](),this['phoneNumber']=_0x1adab1,this[_0x133003(0x3de)];}catch(_0x4ac0c0){let _0x3960e9='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp',_0x174e47=_0x4ac0c0 instanceof Error?_0x4ac0c0['message']:typeof _0x4ac0c0==_0x133003(0x5a0)?JSON[_0x133003(0x1bb)](_0x4ac0c0):_0x4ac0c0,_0x34962a=_0x3960e9+':\x20'+_0x174e47;throw this[_0x133003(0x112)][_0x133003(0x4b3)](this['instanceName']+'\x20('+this[_0x133003(0x799)]['wuid']+_0x133003(0x433)+_0x34962a),console['error'](_0x133003(0x71a),_0x4ac0c0),_0x4ac0c0 instanceof Error&&console[_0x133003(0x4b3)](_0x133003(0xc4),_0x4ac0c0[_0x133003(0x349)]),new x(_0x34962a);}}[a0_0x3f352e(0x4fb)](){const _0x5987bd=a0_0x3f352e;this[_0x5987bd(0x3de)]['ev']['process'](_0x14d5d0=>{const _0x10abde=_0x5987bd;if(!this['endSession']){let _0x1f9af7=this[_0x10abde(0x446)]['get'](_0x10abde(0x611));if(_0x14d5d0[_0x10abde(0x774)]){let _0x4ea753=_0x14d5d0['labels.edit'];this[_0x10abde(0x7bb)]['labels.edit'](_0x4ea753);}if(_0x14d5d0[_0x10abde(0x445)]){let _0x3e1b99=_0x14d5d0['labels.association'];this['messageHandle'][_0x10abde(0x445)](_0x3e1b99);}if(_0x14d5d0[_0x10abde(0x171)]&&this[_0x10abde(0x613)](_0x14d5d0[_0x10abde(0x171)]),_0x14d5d0[_0x10abde(0x7cd)]&&this[_0x10abde(0x799)][_0x10abde(0x458)][_0x10abde(0x150)](),_0x14d5d0[_0x10abde(0x4a6)]){let _0x5ead3b=_0x14d5d0[_0x10abde(0x4a6)];this[_0x10abde(0x7bb)]['messaging-history.set'](_0x5ead3b,_0x1f9af7);}if(_0x14d5d0[_0x10abde(0x4bb)]){let _0x172156=_0x14d5d0[_0x10abde(0x4bb)];this['messageHandle'][_0x10abde(0x4bb)](_0x172156,_0x1f9af7);}if(_0x14d5d0[_0x10abde(0x4b4)]){let _0x2eb966=_0x14d5d0[_0x10abde(0x4b4)];this[_0x10abde(0x7bb)][_0x10abde(0x4b4)](_0x2eb966,_0x1f9af7);}if(_0x14d5d0[_0x10abde(0x251)]){let _0x2dc0e0=_0x14d5d0[_0x10abde(0x251)];if(this[_0x10abde(0x11c)]?.[_0x10abde(0x21a)]&&_0x2dc0e0['id'][_0x10abde(0x2bf)](_0x10abde(0x4d5)))return;this[_0x10abde(0xb2)](_0x10abde(0x251),_0x2dc0e0);}if(_0x14d5d0[_0x10abde(0x5c5)]){let _0x36b6f0=_0x14d5d0[_0x10abde(0x5c5)];this['groupHandler'][_0x10abde(0x5c5)](_0x36b6f0);}if(_0x14d5d0[_0x10abde(0x59e)]){let _0x4ae5b1=_0x14d5d0['groups.update'];this[_0x10abde(0x1cf)][_0x10abde(0x59e)](_0x4ae5b1);}if(_0x14d5d0[_0x10abde(0x3ad)]){let _0x115ecc=_0x14d5d0[_0x10abde(0x3ad)];this['groupHandler'][_0x10abde(0x3ad)](_0x115ecc);}if(_0x14d5d0[_0x10abde(0x7b4)]){let _0x448bec=_0x14d5d0[_0x10abde(0x7b4)];this[_0x10abde(0x23c)][_0x10abde(0x7b4)](_0x448bec,_0x1f9af7);}if(_0x14d5d0['chats.update']){let _0x55f297=_0x14d5d0['chats.update'];this['chatHandle'][_0x10abde(0x1bf)](_0x55f297,_0x1f9af7);}if(_0x14d5d0[_0x10abde(0x1c3)]){let _0x4f7461=_0x14d5d0[_0x10abde(0x1c3)];this[_0x10abde(0x23c)][_0x10abde(0x1c3)](_0x4f7461);}if(_0x14d5d0[_0x10abde(0x17e)]){let _0x165b53=_0x14d5d0['contacts.upsert'];this[_0x10abde(0x6fd)][_0x10abde(0x17e)](_0x165b53,_0x1f9af7);}if(_0x14d5d0[_0x10abde(0x7da)]){let _0x26f31f=_0x14d5d0['contacts.update'];this[_0x10abde(0x6fd)][_0x10abde(0x7da)](_0x26f31f,_0x1f9af7);}}});}async[a0_0x3f352e(0x3ed)](_0x4f09a1,_0x563c5b){const _0x3f4103=a0_0x3f352e;if(_0x563c5b>=0xa){console[_0x3f4103(0x4b3)](this[_0x3f4103(0x78b)]+'\x20('+this[_0x3f4103(0x799)][_0x3f4103(0x3cb)]+_0x3f4103(0x614)),delete Ft[_0x4f09a1['key']['id']];return;}try{console[_0x3f4103(0x4b3)](this['instanceName']+'\x20('+this[_0x3f4103(0x799)][_0x3f4103(0x3cb)]+'):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20'+(_0x563c5b+0x1)),await this[_0x3f4103(0x3de)][_0x3f4103(0x22c)](JSON[_0x3f4103(0x4d4)](_0x4f09a1[_0x3f4103(0x1eb)][0x1],w[_0x3f4103(0x7bf)][_0x3f4103(0x394)])),console[_0x3f4103(0x4b3)](_0x3f4103(0x4ac));}catch(_0x55deeb){console[_0x3f4103(0x4b3)](this[_0x3f4103(0x78b)]+'\x20('+this['instance'][_0x3f4103(0x3cb)]+_0x3f4103(0x7bd)+_0x55deeb),setTimeout(()=>this[_0x3f4103(0x3ed)](_0x4f09a1,_0x563c5b+0x1),Math[_0x3f4103(0x7a6)](0x2,_0x563c5b)*0x3e8);}}[a0_0x3f352e(0x307)](_0x3082eb){return new Promise(_0x5e35e1=>setTimeout(_0x5e35e1,_0x3082eb));}[a0_0x3f352e(0x3c8)](_0x5285c0){const _0x4e78c9=a0_0x3f352e;_0x5285c0=_0x5285c0[_0x4e78c9(0x166)](/\D/g,'');let _0xc0dcf2=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x4e78c9(0x7d5)](_0x5285c0);if(_0xc0dcf2&&_0xc0dcf2[0x1]==='55'){let _0x53a12f=_0xc0dcf2[0x2],_0x10f8d6=_0xc0dcf2[0x3],_0x273b7b=_0xc0dcf2[0x4];if(parseInt(_0x53a12f)>=0x1f&&_0x10f8d6==='9')return _0xc0dcf2[0x1]+_0x53a12f+_0x273b7b;}return _0x5285c0;}[a0_0x3f352e(0x36e)](_0x170c90){const _0x47ae8c=a0_0x3f352e;return _0x170c90[_0x47ae8c(0x2bf)]('@g.us')||_0x170c90['includes'](_0x47ae8c(0x246))||_0x170c90[_0x47ae8c(0x2bf)](_0x47ae8c(0x1d9))?_0x170c90:(_0x170c90=_0x170c90?.[_0x47ae8c(0x166)](/\s/g,'')[_0x47ae8c(0x166)](/\+/g,'')[_0x47ae8c(0x166)](/\(/g,'')[_0x47ae8c(0x166)](/\)/g,'')[_0x47ae8c(0x384)](/\:/)[0x0][_0x47ae8c(0x384)]('@')[0x0],_0x170c90['length']>=0x12?(_0x170c90=_0x170c90[_0x47ae8c(0x166)](/[^\d-]/g,''),_0x170c90+'@g.us'):(_0x170c90=_0x170c90[_0x47ae8c(0x166)](/\D/g,''),_0x170c90+'@s.whatsapp.net'));}async[a0_0x3f352e(0x277)](_0x25b6a9){const _0x474e9e=a0_0x3f352e;let _0x50184e=(await this['whatsappNumber']({'numbers':[_0x25b6a9[_0x474e9e(0x596)]]}))[0x0];if(!_0x50184e[_0x474e9e(0x5af)]&&!(0x0,w[_0x474e9e(0x47d)])(_0x50184e[_0x474e9e(0x3ab)])&&!_0x50184e[_0x474e9e(0x3ab)]['includes'](_0x474e9e(0x1d9)))throw new m(_0x50184e);let _0x1322a5=_0x50184e[_0x474e9e(0x3ab)];try{return await this[_0x474e9e(0x3de)][_0x474e9e(0x2ad)](_0x1322a5),await this[_0x474e9e(0x3de)][_0x474e9e(0x7b5)](_0x25b6a9[_0x474e9e(0x28b)],_0x1322a5),{'status':0xc8,'presence':_0x25b6a9[_0x474e9e(0x28b)]};}catch(_0xd17eec){let _0x57cf64='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence',_0x25d089=_0xd17eec instanceof Error?_0xd17eec[_0x474e9e(0x499)]:typeof _0xd17eec=='object'?JSON[_0x474e9e(0x1bb)](_0xd17eec):_0xd17eec,_0x1b695e=_0x57cf64+':\x20'+_0x25d089;throw this[_0x474e9e(0x112)][_0x474e9e(0x4b3)](this[_0x474e9e(0x78b)]+'\x20('+this['instance'][_0x474e9e(0x3cb)]+'):\x20'+_0x1b695e),new m(_0x1b695e);}}async[a0_0x3f352e(0x2c8)](_0x3ec479,_0x19532f,_0x1b5acd,_0x3204d1=!0x0){const _0x17d331=a0_0x3f352e;let _0x51abf9=await this[_0x17d331(0x7be)][_0x17d331(0x2df)][_0x17d331(0x312)]({'where':{'_id':_0x3ec479}});if(!_0x51abf9&&!_0x3204d1)return;let _0x39e780={'lastUpdate':Date['now']()};if(_0x1b5acd||!_0x51abf9?.['lastUpdate']||Date[_0x17d331(0x196)]()-_0x51abf9[_0x17d331(0x238)]>0x18*0x3c*0x3c*0x3e8)try{let _0x3ceaab=(await this[_0x17d331(0x1ee)](_0x3ec479))[_0x17d331(0x700)];_0x39e780['pictureUrl']=_0x3ceaab;}catch(_0xd1c024){let _0x28abb4='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact',_0x3f5478=_0xd1c024 instanceof Error?_0xd1c024['message']:typeof _0xd1c024=='object'?JSON[_0x17d331(0x1bb)](_0xd1c024):_0xd1c024,_0xc9407a=_0x28abb4+':\x20'+_0x3f5478;throw this[_0x17d331(0x112)][_0x17d331(0x4b3)](this[_0x17d331(0x78b)]+'\x20('+this[_0x17d331(0x799)][_0x17d331(0x3cb)]+_0x17d331(0x433)+_0xc9407a),new m(_0xc9407a);}return _0x19532f&&_0x51abf9?.[_0x17d331(0x5f4)]!==_0x19532f&&(_0x39e780[_0x17d331(0x5f4)]=_0x19532f),Object[_0x17d331(0x75c)](_0x39e780)[_0x17d331(0x45c)]>0x1&&(_0x51abf9?await this[_0x17d331(0x7be)][_0x17d331(0x2df)]['update']({'where':{'_id':_0x3ec479}},_0x39e780):await this[_0x17d331(0x7be)][_0x17d331(0x2df)][_0x17d331(0x703)]([{'_id':_0x3ec479,..._0x39e780}]),_0x51abf9={..._0x51abf9,..._0x39e780}),{'cachedContact':_0x51abf9};}async[a0_0x3f352e(0x1ee)](_0x585928){const _0x21a8ba=a0_0x3f352e;let _0x437112=this[_0x21a8ba(0x36e)](_0x585928);try{return{'wuid':_0x437112,'profilePictureUrl':await this[_0x21a8ba(0x3de)][_0x21a8ba(0x700)](_0x437112,_0x21a8ba(0x763))};}catch{return{'wuid':_0x437112,'profilePictureUrl':null};}}async['sendMessageWithTyping'](_0x10860c,_0x4bbebd,_0x331a4c){const _0x11ff1e=a0_0x3f352e;let _0x1036bc;try{let _0x4b66ef=(await this[_0x11ff1e(0x3d6)]({'numbers':[_0x10860c]}))?.['shift']();if(!_0x4b66ef[_0x11ff1e(0x5af)]&&!(0x0,w['isJidGroup'])(_0x4b66ef[_0x11ff1e(0x3ab)])&&!_0x4b66ef[_0x11ff1e(0x3ab)][_0x11ff1e(0x2bf)](_0x11ff1e(0x1d9)))throw new m(_0x4b66ef);_0x1036bc=_0x4b66ef[_0x11ff1e(0x3ab)];}catch(_0xbd72d){_0x1036bc=_0x10860c,this[_0x11ff1e(0x112)][_0x11ff1e(0x76b)](this[_0x11ff1e(0x78b)]+'\x20('+this[_0x11ff1e(0x799)][_0x11ff1e(0x3cb)]+_0x11ff1e(0x5cb)+_0xbd72d[_0x11ff1e(0x499)]),this[_0x11ff1e(0x112)][_0x11ff1e(0x76b)](this['instanceName']+'\x20('+this[_0x11ff1e(0x799)][_0x11ff1e(0x3cb)]+'):\x20sender\x20=\x20number:\x20'+_0x1036bc);}try{if(_0x1036bc||(_0x1036bc=_0x10860c,this[_0x11ff1e(0x112)][_0x11ff1e(0x76b)](this['instanceName']+'\x20('+this[_0x11ff1e(0x799)][_0x11ff1e(0x3cb)]+_0x11ff1e(0xec)+_0x1036bc)),_0x331a4c||(_0x331a4c={}),_0x331a4c?.[_0x11ff1e(0x6a3)]){await this[_0x11ff1e(0x3de)][_0x11ff1e(0x2ad)](_0x1036bc),await this['client'][_0x11ff1e(0x7b5)](_0x331a4c?.[_0x11ff1e(0x28b)]??_0x11ff1e(0x709),_0x1036bc);let _0x9008b0=Math[_0x11ff1e(0x51f)](_0x331a4c[_0x11ff1e(0x6a3)],0x2710);await(0x0,w['delay'])(_0x9008b0),await this[_0x11ff1e(0x3de)]['sendPresenceUpdate'](_0x11ff1e(0x475),_0x1036bc);}let _0x8ff7af=_0x331a4c?.[_0x11ff1e(0x47b)]!=!0x1?void 0x0:!0x1,_0x108570;if(_0x331a4c?.[_0x11ff1e(0x4f4)]){let _0x50db33=_0x331a4c?.[_0x11ff1e(0x4f4)],_0x54fcf7=_0x50db33?.[_0x11ff1e(0x499)]?_0x50db33:await this[_0x11ff1e(0xf0)](_0x50db33[_0x11ff1e(0x2bb)],!0x0);_0x54fcf7&&(_0x108570=_0x54fcf7);}let _0xd2e32f=await this[_0x11ff1e(0x7be)]['chat'][_0x11ff1e(0x312)]({'where':{'_id':_0x1036bc}},this[_0x11ff1e(0x799)][_0x11ff1e(0x3cb)]),_0xa9a877,_0x302b94=null;if((0x0,w[_0x11ff1e(0x47d)])(_0x1036bc))try{if(_0x302b94=_0xd2e32f[_0x11ff1e(0x7e2)],!_0x302b94)throw new j('Group\x20not\x20found');_0x331a4c?.['mentions']&&(_0x331a4c[_0x11ff1e(0x4ba)]?.[_0x11ff1e(0x6c4)]?_0xa9a877=_0x302b94[_0x11ff1e(0x6b7)]['map'](_0x16364f=>_0x16364f['id']):_0x331a4c[_0x11ff1e(0x4ba)]?.['mentioned']?.[_0x11ff1e(0x45c)]&&(_0xa9a877=_0x331a4c[_0x11ff1e(0x4ba)]['mentioned'][_0x11ff1e(0xff)](_0x48b4f2=>{const _0x4faa6a=_0x11ff1e;let _0xcca657=this['createJid'](_0x48b4f2);return(0x0,w[_0x4faa6a(0x47d)])(_0xcca657)?null:_0xcca657;})));}catch{throw new j(_0x11ff1e(0x580));}let _0x4bcd7f=await((async()=>{const _0x175825=_0x11ff1e;let _0x433b21={'quoted':_0x108570,'ephemeralExpiration':_0xd2e32f?.[_0x175825(0x74e)]??0x0,'messageId':'3EB0'+(0x0,Ne[_0x175825(0x66e)])(0x12)[_0x175825(0x123)](_0x175825(0x551))[_0x175825(0x6ac)]()};if(!_0x4bbebd[_0x175825(0x185)]&&!_0x4bbebd[_0x175825(0x28e)]&&!_0x4bbebd[_0x175825(0x16c)]&&!_0x4bbebd[_0x175825(0x2cf)]&&_0x1036bc!=='status@broadcast'&&_0x4bbebd[_0x175825(0x757)])return await this[_0x175825(0x3de)]['sendMessage'](_0x1036bc,{'react':{'text':_0x4bbebd['reactionMessage'][_0x175825(0x21b)],'key':_0x4bbebd[_0x175825(0x757)][_0x175825(0x2bb)]}},_0x433b21);if(_0x4bbebd[_0x175825(0x2cf)]){let _0xcba7=_0x4bbebd[_0x175825(0x2cf)];return _0x331a4c?.[_0x175825(0x6e0)]&&(_0xcba7=await this[_0x175825(0x3c1)](_0xcba7,_0x1036bc)),await this[_0x175825(0x3de)]['sendMessage'](_0x1036bc,{'text':_0xcba7,'mentions':_0xa9a877,'linkPreview':_0x8ff7af},_0x433b21);}return!_0x4bbebd['audio']&&!_0x4bbebd['poll']&&_0x1036bc!=_0x175825(0x65f)?await this[_0x175825(0x3de)][_0x175825(0x377)](_0x1036bc,{'forward':{'key':{'remoteJid':this[_0x175825(0x799)][_0x175825(0x3cb)],'fromMe':!0x0},'message':_0x4bbebd},'mentions':_0xa9a877},_0x433b21):_0x1036bc===_0x175825(0x65f)?await this[_0x175825(0x3de)]['sendMessage'](_0x1036bc,_0x4bbebd[_0x175825(0x62a)]['content'],{'backgroundColor':_0x4bbebd[_0x175825(0x62a)][_0x175825(0x533)][_0x175825(0x73c)],'font':_0x4bbebd['status'][_0x175825(0x533)][_0x175825(0x1a7)],'statusJidList':_0x4bbebd[_0x175825(0x62a)]['option']['statusJidList']}):await this[_0x175825(0x3de)]['sendMessage'](_0x1036bc,_0x4bbebd,_0x433b21);})()),_0x4dfbc3=(0x0,w[_0x11ff1e(0x411)])(_0x4bcd7f[_0x11ff1e(0x499)]),_0x1eb013=(0x0,w[_0x11ff1e(0x7ea)])(_0x4dfbc3),{message_normalized:_0x3eda13}=this['normalizeMessage'](_0x4dfbc3,_0x1eb013,null),_0x4d4bfc={'_id':_0x4bcd7f[_0x11ff1e(0x2bb)]['id'],'key':_0x4bcd7f['key'],'pushName':_0x4bcd7f[_0x11ff1e(0x22a)],'isGroup':_0x4bcd7f[_0x11ff1e(0x2bb)][_0x11ff1e(0x183)][_0x11ff1e(0x3ff)](_0x11ff1e(0x4d5)),'profilePictureUrl':this[_0x11ff1e(0x799)][_0x11ff1e(0x700)],'message':_0x4dfbc3,'messageType':_0x1eb013,'message_normalized':{'key':_0x4bcd7f['key'],'pushName':_0x4bcd7f[_0x11ff1e(0x22a)],'messageTimestamp':_0x4bcd7f[_0x11ff1e(0x43d)]&&_0x4bcd7f[_0x11ff1e(0x43d)]['toString']()['length']<0xd?_0x4bcd7f['messageTimestamp']*0x3e8:_0x4bcd7f[_0x11ff1e(0x43d)]||null,'source':(0x0,w['getDevice'])(_0x4bcd7f[_0x11ff1e(0x2bb)]['id']),..._0x3eda13},'messageTimestamp':_0x4bcd7f[_0x11ff1e(0x43d)]&&_0x4bcd7f[_0x11ff1e(0x43d)][_0x11ff1e(0x123)]()[_0x11ff1e(0x45c)]<0xd?_0x4bcd7f[_0x11ff1e(0x43d)]*0x3e8:_0x4bcd7f[_0x11ff1e(0x43d)]||null,'owner':this['instance'][_0x11ff1e(0x3cb)],'source':(0x0,w[_0x11ff1e(0x51d)])(_0x4bcd7f[_0x11ff1e(0x2bb)]['id'])};return this[_0x11ff1e(0x112)]['warn'](this[_0x11ff1e(0x78b)]+'\x20('+this['instance'][_0x11ff1e(0x3cb)]+_0x11ff1e(0x2e8)+_0x4d4bfc[_0x11ff1e(0x2bb)]?.['remoteJid'][_0x11ff1e(0x166)](_0x11ff1e(0x246),'')+_0x11ff1e(0x16f)+_0x4d4bfc[_0x11ff1e(0x550)]+')'),_0x4d4bfc[_0x11ff1e(0x647)]?.[_0x11ff1e(0x21b)]&&this[_0x11ff1e(0x112)]['warn'](_0x4d4bfc[_0x11ff1e(0x647)]?.[_0x11ff1e(0x21b)]),this['sendDataWebhook']('send.message',_0x4d4bfc),J(this[_0x11ff1e(0x78b)],_0x11ff1e(0x1a8),{'message':_0x4d4bfc}),this[_0x11ff1e(0x473)](this[_0x11ff1e(0x446)][_0x11ff1e(0x427)]('DATABASE'),_0x4d4bfc,_0x11ff1e(0x266),_0xd2e32f),await this[_0x11ff1e(0x7be)]['message']['insert']([_0x4d4bfc],this[_0x11ff1e(0x799)][_0x11ff1e(0x3cb)]),_0x4bcd7f;}catch(_0x3834e4){let _0x28f444=_0x11ff1e(0x2f0)+_0x1036bc,_0x3f1dff=_0x3834e4 instanceof Error?_0x3834e4[_0x11ff1e(0x499)]:typeof _0x3834e4=='object'?JSON[_0x11ff1e(0x1bb)](_0x3834e4):_0x3834e4,_0x2334b8=_0x28f444+':\x20'+_0x3f1dff;throw this['logger']['error'](this[_0x11ff1e(0x78b)]+'\x20('+this[_0x11ff1e(0x799)][_0x11ff1e(0x3cb)]+_0x11ff1e(0x433)+_0x2334b8),new m(_0x2334b8);}}get['connectionStatus'](){return this['stateConnection'];}async[a0_0x3f352e(0x197)](_0xedf13b){const _0x406faf=a0_0x3f352e;return await this[_0x406faf(0x128)](_0xedf13b['number'],{'conversation':_0xedf13b[_0x406faf(0x197)]['text']},_0xedf13b?.[_0x406faf(0x40d)]);}async[a0_0x3f352e(0x666)](_0x38f19f){const _0x1f1c26=a0_0x3f352e;if(!_0x38f19f['type'])throw new m('Type\x20is\x20required');if(!_0x38f19f['content'])throw new m('Content\x20is\x20required');if(_0x38f19f[_0x1f1c26(0x5d6)]){let _0x3c1377=await this['repository']['contact']['find']({'where':{}},this['instance'][_0x1f1c26(0x3cb)]);if(!_0x3c1377[_0x1f1c26(0x45c)])throw new m(_0x1f1c26(0x591));_0x38f19f[_0x1f1c26(0x5f7)]=_0x3c1377['filter'](_0x239d33=>_0x239d33[_0x1f1c26(0x22a)])[_0x1f1c26(0xff)](_0x2af943=>_0x2af943['_id']);}if(!_0x38f19f['statusJidList']?.[_0x1f1c26(0x45c)]&&!_0x38f19f['allContacts'])throw new m(_0x1f1c26(0x2ba));if(_0x38f19f[_0x1f1c26(0x6d7)]===_0x1f1c26(0x21b)){if(!_0x38f19f['backgroundColor'])throw new m('Background\x20color\x20is\x20required');if(!_0x38f19f['font'])throw new m(_0x1f1c26(0x694));return{'content':{'text':_0x38f19f[_0x1f1c26(0x7d8)]},'option':{'backgroundColor':_0x38f19f['backgroundColor'],'font':_0x38f19f[_0x1f1c26(0x1a7)],'statusJidList':_0x38f19f[_0x1f1c26(0x5f7)]}};}if(_0x38f19f[_0x1f1c26(0x6d7)]===_0x1f1c26(0x763))return{'content':{'image':{'url':_0x38f19f[_0x1f1c26(0x7d8)]},'caption':_0x38f19f['caption']},'option':{'statusJidList':_0x38f19f['statusJidList']}};if(_0x38f19f['type']===_0x1f1c26(0x69a))return{'content':{'video':{'url':_0x38f19f[_0x1f1c26(0x7d8)]},'caption':_0x38f19f['caption']},'option':{'statusJidList':_0x38f19f['statusJidList']}};if(_0x38f19f['type']===_0x1f1c26(0x185)){this[_0x1f1c26(0x112)][_0x1f1c26(0x72d)](this[_0x1f1c26(0x78b)]+'\x20('+this[_0x1f1c26(0x799)][_0x1f1c26(0x3cb)]+_0x1f1c26(0x6b3)),this['logger'][_0x1f1c26(0x72d)](this[_0x1f1c26(0x78b)]+'\x20('+this[_0x1f1c26(0x799)]['wuid']+'):Processing\x20audio');let _0x23fabf=await this[_0x1f1c26(0x772)](_0x38f19f['content']);if(typeof _0x23fabf==_0x1f1c26(0x6e4)){this[_0x1f1c26(0x112)][_0x1f1c26(0x72d)](this[_0x1f1c26(0x78b)]+'\x20('+this['instance'][_0x1f1c26(0x3cb)]+_0x1f1c26(0x6a8));let _0x5e4397=L[_0x1f1c26(0x3a4)](_0x23fabf)[_0x1f1c26(0x123)]('base64');return{'content':{'audio':Buffer['from'](_0x5e4397,_0x1f1c26(0x60d)),'ptt':!0x0,'mimetype':_0x1f1c26(0x38a)},'option':{'statusJidList':_0x38f19f[_0x1f1c26(0x5f7)]}};}else throw new x(_0x23fabf);}throw new m('Type\x20not\x20found');}async['statusMessage'](_0x2aa174){const _0x369aaa=a0_0x3f352e;return await this[_0x369aaa(0x128)](_0x369aaa(0x65f),{'status':await this[_0x369aaa(0x666)](_0x2aa174['statusMessage'])});}async['prepareMediaMessage'](_0x3e8158){const _0x3d5585=a0_0x3f352e;try{let _0x36d9d2=await(0x0,w[_0x3d5585(0x27e)])({[_0x3e8158[_0x3d5585(0x220)]]:(0x0,k[_0x3d5585(0x663)])(_0x3e8158[_0x3d5585(0x207)])?{'url':_0x3e8158[_0x3d5585(0x207)]}:Buffer['from'](_0x3e8158[_0x3d5585(0x207)],_0x3d5585(0x60d))},{'upload':this['client']['waUploadToServer']}),_0x382e2d=_0x3e8158['mediatype']+_0x3d5585(0x104);if(_0x3e8158[_0x3d5585(0x220)]===_0x3d5585(0x28d)&&!_0x3e8158[_0x3d5585(0x241)]){let _0x23d9a3=new RegExp(/.*\/(.+?)\./)[_0x3d5585(0x7d5)](_0x3e8158[_0x3d5585(0x207)]);_0x3e8158[_0x3d5585(0x241)]=_0x23d9a3?_0x23d9a3[0x1]:null;}let _0x27cb10;return(0x0,k['isURL'])(_0x3e8158[_0x3d5585(0x207)])?_0x27cb10=(await Y['default'][_0x3d5585(0x427)](_0x3e8158[_0x3d5585(0x207)],{'responseType':_0x3d5585(0x359)}))['headers'][_0x3d5585(0x428)]:_0x27cb10=(0x0,Oi[_0x3d5585(0x489)])(_0x3e8158[_0x3d5585(0x241)]),_0x36d9d2[_0x382e2d]['caption']=_0x3e8158?.[_0x3d5585(0x2ae)],_0x36d9d2[_0x382e2d][_0x3d5585(0x53b)]=_0x27cb10,_0x36d9d2[_0x382e2d]['fileName']=_0x3e8158['fileName'],_0x3e8158['mediatype']===_0x3d5585(0x69a)&&(_0x36d9d2[_0x382e2d]['jpegThumbnail']=Uint8Array['from']((0x0,Le[_0x3d5585(0x3a4)])((0x0,U[_0x3d5585(0x348)])(process[_0x3d5585(0x1c7)](),_0x3d5585(0x339)))),_0x36d9d2[_0x382e2d][_0x3d5585(0xcb)]=!0x1),(0x0,w[_0x3d5585(0xe3)])('',{[_0x382e2d]:{..._0x36d9d2[_0x382e2d]}},{'userJid':this['instance'][_0x3d5585(0x3cb)]});}catch(_0x397241){let _0x5e8756=_0x3d5585(0x4f7),_0x2b3b49=_0x397241 instanceof Error?_0x397241[_0x3d5585(0x499)]:typeof _0x397241==_0x3d5585(0x5a0)?JSON[_0x3d5585(0x1bb)](_0x397241):_0x397241,_0x36c9cb=_0x5e8756+':\x20'+_0x2b3b49;throw this[_0x3d5585(0x112)][_0x3d5585(0x4b3)](this[_0x3d5585(0x78b)]+'\x20('+this['instance'][_0x3d5585(0x3cb)]+_0x3d5585(0x433)+_0x36c9cb),new x(_0x36c9cb);}}async[a0_0x3f352e(0x582)](_0x5e1029){const _0x7abbd7=a0_0x3f352e;let _0x28b3df=await this[_0x7abbd7(0x25d)](_0x5e1029[_0x7abbd7(0x582)]);return await this[_0x7abbd7(0x128)](_0x5e1029[_0x7abbd7(0x596)],{..._0x28b3df[_0x7abbd7(0x499)]},_0x5e1029?.[_0x7abbd7(0x40d)]);}async[a0_0x3f352e(0x23a)](_0xcfa554,_0x31420e){const _0x3705d8=a0_0x3f352e;try{this[_0x3705d8(0x112)]['verbose'](this[_0x3705d8(0x78b)]+'\x20('+this[_0x3705d8(0x799)][_0x3705d8(0x3cb)]+'):Converting\x20image\x20to\x20WebP\x20to\x20sticker');let _0x4be719,_0x36373e=_0x31420e+'-'+new Date()[_0x3705d8(0x154)]();this[_0x3705d8(0x112)]['verbose'](this[_0x3705d8(0x78b)]+'\x20('+this[_0x3705d8(0x799)]['wuid']+_0x3705d8(0x5fb)+_0x36373e);let _0x53e1f8=''+(0x0,U['join'])(this[_0x3705d8(0x101)],_0x36373e+_0x3705d8(0x229));if(this[_0x3705d8(0x112)][_0x3705d8(0x72d)](this[_0x3705d8(0x78b)]+'\x20('+this['instance'][_0x3705d8(0x3cb)]+_0x3705d8(0x3c5)+_0x53e1f8),(0x0,k[_0x3705d8(0x2d0)])(_0xcfa554)){this[_0x3705d8(0x112)][_0x3705d8(0x72d)](this[_0x3705d8(0x78b)]+'\x20('+this[_0x3705d8(0x799)][_0x3705d8(0x3cb)]+'):Image\x20is\x20base64');let _0x52be1d=_0xcfa554['replace'](/^data:image\/(jpeg|png|gif);base64,/,''),_0x295b5b=Buffer[_0x3705d8(0x3a3)](_0x52be1d,'base64');_0x4be719=''+(0x0,U[_0x3705d8(0x348)])(this['storePath'],_0x3705d8(0x472)+_0x36373e+'.png'),this[_0x3705d8(0x112)][_0x3705d8(0x72d)](this['instanceName']+'\x20('+this[_0x3705d8(0x799)][_0x3705d8(0x3cb)]+'):Image\x20path:\x20'+_0x4be719),await(0x0,jt[_0x3705d8(0x164)])(_0x295b5b)[_0x3705d8(0x610)](_0x4be719),this[_0x3705d8(0x112)][_0x3705d8(0x72d)](this[_0x3705d8(0x78b)]+'\x20('+this[_0x3705d8(0x799)]['wuid']+'):Image\x20created');}else{this[_0x3705d8(0x112)][_0x3705d8(0x72d)](this['instanceName']+'\x20('+this['instance'][_0x3705d8(0x3cb)]+'):Image\x20is\x20url');let _0x43e8da=new Date()[_0x3705d8(0x154)](),_0xf84b51=_0xcfa554+_0x3705d8(0x328)+_0x43e8da;this['logger'][_0x3705d8(0x72d)](this[_0x3705d8(0x78b)]+'\x20('+this['instance'][_0x3705d8(0x3cb)]+'):including\x20timestamp\x20in\x20url:\x20'+_0xf84b51);let _0x4cf198=await Y[_0x3705d8(0x164)][_0x3705d8(0x427)](_0xf84b51,{'responseType':_0x3705d8(0x359)});this[_0x3705d8(0x112)][_0x3705d8(0x72d)](this['instanceName']+'\x20('+this['instance'][_0x3705d8(0x3cb)]+_0x3705d8(0x4e7));let _0x17205d=Buffer[_0x3705d8(0x3a3)](_0x4cf198['data'],'binary');_0x4be719=''+(0x0,U[_0x3705d8(0x348)])(this[_0x3705d8(0x101)],_0x3705d8(0x472)+_0x36373e+'.png'),this[_0x3705d8(0x112)][_0x3705d8(0x72d)](this[_0x3705d8(0x78b)]+'\x20('+this[_0x3705d8(0x799)][_0x3705d8(0x3cb)]+_0x3705d8(0x231)+_0x4be719),await(0x0,jt[_0x3705d8(0x164)])(_0x17205d)[_0x3705d8(0x610)](_0x4be719),this['logger'][_0x3705d8(0x72d)](this[_0x3705d8(0x78b)]+'\x20('+this[_0x3705d8(0x799)][_0x3705d8(0x3cb)]+_0x3705d8(0x79c));}return await(0x0,jt[_0x3705d8(0x164)])(_0x4be719)[_0x3705d8(0x487)]()[_0x3705d8(0x610)](_0x53e1f8),this[_0x3705d8(0x112)][_0x3705d8(0x72d)](this[_0x3705d8(0x78b)]+'\x20('+this[_0x3705d8(0x799)][_0x3705d8(0x3cb)]+_0x3705d8(0x465)),L['unlinkSync'](_0x4be719),this[_0x3705d8(0x112)][_0x3705d8(0x72d)](this['instanceName']+'\x20('+this[_0x3705d8(0x799)][_0x3705d8(0x3cb)]+'):Temp\x20image\x20deleted'),_0x53e1f8;}catch(_0x592f9f){let _0x4b36e1=_0x3705d8(0x7cb),_0x55bca2=_0x592f9f instanceof Error?_0x592f9f[_0x3705d8(0x499)]:typeof _0x592f9f==_0x3705d8(0x5a0)?JSON[_0x3705d8(0x1bb)](_0x592f9f):_0x592f9f,_0x5d42ca=_0x4b36e1+':\x20'+_0x55bca2;this[_0x3705d8(0x112)]['error'](this[_0x3705d8(0x78b)]+'\x20('+this[_0x3705d8(0x799)]['wuid']+'):\x20'+_0x5d42ca);}}async['mediaSticker'](_0x362d0c){const _0x2bc117=a0_0x3f352e;let _0x48becb=await this['convertToWebP'](_0x362d0c[_0x2bc117(0x52a)][_0x2bc117(0x763)],_0x362d0c[_0x2bc117(0x596)]),_0xa714d4=await this[_0x2bc117(0x128)](_0x362d0c[_0x2bc117(0x596)],{'sticker':{'url':_0x48becb}},_0x362d0c?.[_0x2bc117(0x40d)]);return L[_0x2bc117(0x478)](_0x48becb),this[_0x2bc117(0x112)][_0x2bc117(0x72d)](this[_0x2bc117(0x78b)]+'\x20('+this[_0x2bc117(0x799)][_0x2bc117(0x3cb)]+_0x2bc117(0x14a)),_0xa714d4;}async[a0_0x3f352e(0x491)](_0xdb33d5){const _0xb690ba=a0_0x3f352e;if(this[_0xb690ba(0x112)][_0xb690ba(0x72d)](this[_0xb690ba(0x78b)]+'\x20('+this['instance'][_0xb690ba(0x3cb)]+'):Sending\x20audio\x20whatsapp'),!_0xdb33d5[_0xb690ba(0x40d)]?.[_0xb690ba(0x474)]&&_0xdb33d5['options']?.[_0xb690ba(0x474)]!==!0x1&&(_0xdb33d5[_0xb690ba(0x40d)]['encoding']=!0x0),_0xdb33d5[_0xb690ba(0x40d)]?.[_0xb690ba(0x474)]){let _0x37b61f=await this[_0xb690ba(0x772)](_0xdb33d5[_0xb690ba(0x6bb)]['audio']);if(typeof _0x37b61f==_0xb690ba(0x6e4)){let _0x56c6ab=L['readFileSync'](_0x37b61f)[_0xb690ba(0x123)](_0xb690ba(0x60d));return this[_0xb690ba(0x128)](_0xdb33d5[_0xb690ba(0x596)],{'audio':Buffer['from'](_0x56c6ab,_0xb690ba(0x60d)),'ptt':!0x0,'mimetype':_0xb690ba(0x7ad)},{'presence':_0xb690ba(0x366),'delay':_0xdb33d5?.['options']?.[_0xb690ba(0x6a3)]});}else throw new x(_0x37b61f);}return await this[_0xb690ba(0x128)](_0xdb33d5[_0xb690ba(0x596)],{'audio':(0x0,k[_0xb690ba(0x663)])(_0xdb33d5[_0xb690ba(0x6bb)][_0xb690ba(0x185)])?{'url':_0xdb33d5[_0xb690ba(0x6bb)][_0xb690ba(0x185)]}:Buffer[_0xb690ba(0x3a3)](_0xdb33d5[_0xb690ba(0x6bb)][_0xb690ba(0x185)],'base64'),'ptt':!0x0,'mimetype':_0xb690ba(0x7ad)},{'presence':'recording','delay':_0xdb33d5?.[_0xb690ba(0x40d)]?.[_0xb690ba(0x6a3)]});}async[a0_0x3f352e(0x772)](_0x5b9732){const _0x201008=a0_0x3f352e;this[_0x201008(0x112)][_0x201008(0x72d)](this[_0x201008(0x78b)]+'\x20('+this[_0x201008(0x799)]['wuid']+'):Processing\x20audio');let _0x5924f5=(0x0,k['isURL'])(_0x5b9732)?(0x0,Ne[_0x201008(0x454)])(_0x201008(0x536))['update'](_0x5b9732)[_0x201008(0x78a)](_0x201008(0x551)):(0x0,Ne['createHash'])('sha256')['update'](_0x5b9732)[_0x201008(0x78a)](_0x201008(0x551)),_0xa69d74=''+(0x0,U[_0x201008(0x348)])(this['storePath'],_0x5924f5+'.ogg');if(L[_0x201008(0x735)](_0xa69d74))return this[_0x201008(0x112)][_0x201008(0x72d)](this[_0x201008(0x78b)]+'\x20('+this[_0x201008(0x799)]['wuid']+_0x201008(0x342)),_0xa69d74;let _0x3ac185=''+(0x0,U['join'])(this[_0x201008(0x101)],_0x201008(0x472)+(0x0,X['v4'])()+'.mp3');if((0x0,k['isURL'])(_0x5b9732)){let _0x433162=new Date()[_0x201008(0x154)](),_0x18fd5b=_0x5b9732+'?timestamp='+_0x433162,_0x2d57b6=await Y[_0x201008(0x164)][_0x201008(0x427)](_0x18fd5b,{'responseType':'arraybuffer'});L[_0x201008(0x456)](_0x3ac185,_0x2d57b6['data']);}else{let _0x3394d8=Buffer[_0x201008(0x3a3)](_0x5b9732,_0x201008(0x60d));L['writeFileSync'](_0x3ac185,_0x3394d8);}return new Promise((_0x9fc161,_0x2534ea)=>{const _0x5e6d28=_0x201008;(0x0,Fe[_0x5e6d28(0x7d5)])(_s[_0x5e6d28(0x164)]['path']+_0x5e6d28(0x68e)+_0x3ac185+_0x5e6d28(0x392)+_0xa69d74+'\x20-y',_0x3d2244=>{const _0x1fea07=_0x5e6d28;if(L['unlinkSync'](_0x3ac185),_0x3d2244){this[_0x1fea07(0x112)][_0x1fea07(0x72d)](this[_0x1fea07(0x78b)]+'\x20('+this[_0x1fea07(0x799)][_0x1fea07(0x3cb)]+_0x1fea07(0x60f)),_0x2534ea(_0x3d2244);return;}this[_0x1fea07(0x112)][_0x1fea07(0x72d)](this[_0x1fea07(0x78b)]+'\x20('+this[_0x1fea07(0x799)][_0x1fea07(0x3cb)]+_0x1fea07(0x6ec)),_0x9fc161(_0xa69d74);});});}async[a0_0x3f352e(0x440)](_0x16e212){const _0x7cf432=a0_0x3f352e;this['logger']['verbose'](this[_0x7cf432(0x78b)]+'\x20('+this[_0x7cf432(0x799)][_0x7cf432(0x3cb)]+_0x7cf432(0x36f));let _0x3fcd51=(0x0,Ne[_0x7cf432(0x454)])(_0x7cf432(0x536))[_0x7cf432(0x6c1)](_0x16e212)[_0x7cf432(0x78a)](_0x7cf432(0x551)),_0x1320dd=''+(0x0,U['join'])(this[_0x7cf432(0x101)],_0x3fcd51+'.mp3');if(L[_0x7cf432(0x735)](_0x1320dd))return this[_0x7cf432(0x112)]['verbose'](this[_0x7cf432(0x78b)]+'\x20('+this[_0x7cf432(0x799)]['wuid']+_0x7cf432(0x342)),U['default'][_0x7cf432(0x4cd)](_0x1320dd);let _0x5b6e2a=''+(0x0,U[_0x7cf432(0x348)])(this['storePath'],_0x7cf432(0x472)+_0x3fcd51+_0x7cf432(0x44d));if((0x0,k[_0x7cf432(0x663)])(_0x16e212)){let _0x222a60=new Date()[_0x7cf432(0x154)](),_0x4049e4=_0x16e212+_0x7cf432(0x328)+_0x222a60,_0x93c0f1=await Y[_0x7cf432(0x164)][_0x7cf432(0x427)](_0x4049e4,{'responseType':_0x7cf432(0x359)});L[_0x7cf432(0x456)](_0x5b6e2a,_0x93c0f1[_0x7cf432(0x742)]);}else{let _0x26053e=Buffer['from'](_0x16e212,_0x7cf432(0x60d));L[_0x7cf432(0x456)](_0x5b6e2a,_0x26053e);}return new Promise((_0x335354,_0x2818e2)=>{const _0x4199b0=_0x7cf432;(0x0,Fe[_0x4199b0(0x7d5)])(_s[_0x4199b0(0x164)][_0x4199b0(0x17a)]+_0x4199b0(0x68e)+_0x5b6e2a+_0x4199b0(0x387)+_0x1320dd+'\x20-y',_0x3d94ab=>{const _0x27388e=_0x4199b0;if(L[_0x27388e(0x478)](_0x5b6e2a),_0x3d94ab){this['logger']['verbose'](this[_0x27388e(0x78b)]+'\x20('+this[_0x27388e(0x799)][_0x27388e(0x3cb)]+_0x27388e(0x60f)),_0x2818e2(_0x3d94ab);return;}this[_0x27388e(0x112)]['verbose'](this[_0x27388e(0x78b)]+'\x20('+this[_0x27388e(0x799)]['wuid']+'):Audio\x20converted\x20and\x20stored\x20in\x20cache'),_0x335354(U['default'][_0x27388e(0x4cd)](_0x1320dd));});});}async['buttonMessage'](_0x45e22d){const _0x44686c=a0_0x3f352e;let _0x391c41={},_0x25d6d5='TEXT';if(_0x45e22d[_0x44686c(0x537)]?.[_0x44686c(0x582)]){_0x25d6d5=_0x45e22d['buttonMessage'][_0x44686c(0x582)]?.['mediatype']['toUpperCase']()??'TEXT',_0x391c41[_0x44686c(0x650)]=_0x25d6d5['toLowerCase']()+_0x44686c(0x104);let _0x47a906=await this[_0x44686c(0x25d)](_0x45e22d['buttonMessage']['mediaMessage']);_0x391c41[_0x44686c(0x499)]=_0x47a906[_0x44686c(0x499)][_0x391c41[_0x44686c(0x650)]],_0x391c41[_0x44686c(0x617)]='*'+_0x45e22d[_0x44686c(0x537)][_0x44686c(0x2dc)]+_0x44686c(0x2ea)+_0x45e22d[_0x44686c(0x537)]['description'];}let _0x406ac0={'text':_0x45e22d[_0x44686c(0x537)][_0x44686c(0x1a2)][_0x44686c(0xff)](_0x4353f2=>_0x4353f2[_0x44686c(0x6ce)]),'ids':_0x45e22d[_0x44686c(0x537)][_0x44686c(0x1a2)][_0x44686c(0xff)](_0x18b289=>_0x18b289[_0x44686c(0x7e6)])};if(!(0x0,k[_0x44686c(0x4a0)])(_0x406ac0[_0x44686c(0x21b)])||!(0x0,k[_0x44686c(0x4a0)])(_0x406ac0[_0x44686c(0x649)]))throw new m(_0x44686c(0x2cc),_0x44686c(0x214));return await this['sendMessageWithTyping'](_0x45e22d['number'],{'buttonsMessage':{'text':_0x391c41?.['mediaKey']?void 0x0:_0x45e22d['buttonMessage']['title'],'contentText':_0x391c41?.[_0x44686c(0x617)]??_0x45e22d['buttonMessage']['description'],'footerText':_0x45e22d['buttonMessage']?.['footerText'],'buttons':_0x45e22d[_0x44686c(0x537)][_0x44686c(0x1a2)]['map'](_0x5dc8d6=>({'buttonText':{'displayText':_0x5dc8d6[_0x44686c(0x6ce)]},'buttonId':_0x5dc8d6[_0x44686c(0x7e6)],'type':0x1})),'headerType':w[_0x44686c(0x605)][_0x44686c(0x104)][_0x44686c(0x302)][_0x44686c(0x38e)][_0x25d6d5],[_0x391c41?.[_0x44686c(0x650)]]:_0x391c41?.['message']}},_0x45e22d?.['options']);}async['locationMessage'](_0x42d465){const _0x5d5f24=a0_0x3f352e;return await this[_0x5d5f24(0x128)](_0x42d465['number'],{'locationMessage':{'degreesLatitude':_0x42d465[_0x5d5f24(0x3a9)][_0x5d5f24(0x2d2)],'degreesLongitude':_0x42d465['locationMessage'][_0x5d5f24(0x1d8)],'name':_0x42d465[_0x5d5f24(0x3a9)]?.[_0x5d5f24(0x5f4)],'address':_0x42d465[_0x5d5f24(0x3a9)]?.[_0x5d5f24(0x604)]}},_0x42d465?.[_0x5d5f24(0x40d)]);}async['contactMessage'](_0x4d5df2){const _0x12803c=a0_0x3f352e;let _0x4f6235={},_0x3c5961=async _0x24f9aa=>{const _0x12e515=a0_0x1206;let _0xf02146=_0x12e515(0x1d6)+_0x24f9aa['fullName']+_0x12e515(0x390)+_0x24f9aa['fullName']+'\x0a';_0x24f9aa[_0x12e515(0xbe)]&&(_0xf02146+=_0x12e515(0x6fb)+_0x24f9aa[_0x12e515(0xbe)]+';\x0a'),_0x24f9aa[_0x12e515(0x555)]&&(_0xf02146+=_0x12e515(0x184)+_0x24f9aa[_0x12e515(0x555)]+'\x0a'),_0x24f9aa[_0x12e515(0x163)]&&(_0xf02146+='URL:'+_0x24f9aa[_0x12e515(0x163)]+'\x0a');let _0x1492e4='',_0x2bf3e8=0x1;if(_0x24f9aa[_0x12e515(0x46a)]){let _0x138812=_0x24f9aa[_0x12e515(0x46a)][_0x12e515(0x384)]('|');for(let _0x47b40b of _0x138812){let _0x16d25a=await this['whatsappNumber']({'numbers':[_0x47b40b]}),_0x65ea77=(_0x16d25a[_0x12e515(0x45c)]>0x0?_0x16d25a[0x0][_0x12e515(0x3ab)]:this[_0x12e515(0x36e)](_0x47b40b))[_0x12e515(0x166)]('@s.whatsapp.net','');_0x1492e4+=_0x12e515(0xf1)+_0x2bf3e8+_0x12e515(0x493)+_0x65ea77+':'+_0x47b40b+'\x0aitem'+_0x2bf3e8+_0x12e515(0x322),_0x2bf3e8++;}}return _0xf02146+=_0x1492e4+_0x12e515(0x7b8),_0xf02146;};return _0x4d5df2['contactMessage'][_0x12803c(0x45c)]===0x1?_0x4f6235[_0x12803c(0x1fa)]={'displayName':_0x4d5df2['contactMessage'][0x0]['fullName'],'vcard':await _0x3c5961(_0x4d5df2[_0x12803c(0x1fa)][0x0])}:_0x4f6235['contactsArrayMessage']={'displayName':_0x4d5df2[_0x12803c(0x1fa)][_0x12803c(0x45c)]+_0x12803c(0x250),'contacts':await Promise[_0x12803c(0x7c7)](_0x4d5df2[_0x12803c(0x1fa)][_0x12803c(0xff)](async _0x222733=>({'displayName':_0x222733[_0x12803c(0x627)],'vcard':await _0x3c5961(_0x222733)})))},await this[_0x12803c(0x128)](_0x4d5df2['number'],{..._0x4f6235},_0x4d5df2?.['options']);}async[a0_0x3f352e(0x757)](_0x278eaa){const _0xcc1d34=a0_0x3f352e;return await this[_0xcc1d34(0x128)](_0x278eaa[_0xcc1d34(0x757)][_0xcc1d34(0x2bb)]['remoteJid'],{'reactionMessage':{'key':_0x278eaa[_0xcc1d34(0x757)]['key'],'text':_0x278eaa[_0xcc1d34(0x757)][_0xcc1d34(0x4e5)]}});}async['whatsappNumber'](_0x3f4167){const _0x524166=a0_0x3f352e;let _0x340700=[];for await(let _0x296402 of _0x3f4167['numbers']){let _0x421dca=this[_0x524166(0x36e)](_0x296402),_0x2228ae=!0x1;try{if((0x0,w[_0x524166(0x47d)])(_0x421dca)){let _0x323324=(await this['repository'][_0x524166(0x629)]['findOne']({'where':{'_id':_0x421dca}},this[_0x524166(0x799)][_0x524166(0x3cb)]))[_0x524166(0x7e2)];_0x323324?(_0x2228ae=!0x0,_0x340700[_0x524166(0x5ea)](new le(_0x323324['id'],_0x2228ae,_0x323324?.[_0x524166(0x507)]))):(_0x323324=await this['findGroup']({'groupJid':_0x421dca},'inner'),_0x340700[_0x524166(0x5ea)](new le(_0x323324['id'],!!_0x323324?.['id'],_0x323324?.[_0x524166(0x507)])));}else{if(_0x421dca[_0x524166(0x2bf)]('@broadcast'))_0x340700[_0x524166(0x5ea)](new le(_0x421dca,!0x0));else{let _0x679ee=(await this[_0x524166(0x3de)][_0x524166(0x192)](_0x421dca))[0x0];_0x340700[_0x524166(0x5ea)](new le(_0x679ee[_0x524166(0x3ab)],_0x679ee[_0x524166(0x5af)]));}}}catch{(0x0,w[_0x524166(0x47d)])(_0x421dca)||await this['deleteImportedChat'](_0x421dca),_0x340700[_0x524166(0x5ea)](new le(_0x296402,!0x1));}}return _0x340700;}async[a0_0x3f352e(0x623)](_0x4161de){const _0x96459e=a0_0x3f352e;try{await this[_0x96459e(0x7be)][_0x96459e(0x629)][_0x96459e(0x312)]({'where':{'_id':_0x4161de,'imported':!0x0}},this[_0x96459e(0x799)][_0x96459e(0x3cb)])&&(await this[_0x96459e(0x7be)]['chat'][_0x96459e(0xfc)](_0x4161de,this[_0x96459e(0x799)][_0x96459e(0x3cb)]),this[_0x96459e(0x112)][_0x96459e(0x567)](_0x96459e(0x39d)+_0x4161de+_0x96459e(0x5b2)));}catch(_0x2c622b){let _0x11c703=_0x96459e(0x46f),_0x3e7e84=_0x2c622b instanceof Error?_0x2c622b['message']:typeof _0x2c622b==_0x96459e(0x5a0)?JSON[_0x96459e(0x1bb)](_0x2c622b):_0x2c622b,_0x5c7c62=_0x11c703+':\x20'+_0x3e7e84;this[_0x96459e(0x112)][_0x96459e(0x4b3)](this[_0x96459e(0x78b)]+'\x20('+this[_0x96459e(0x799)][_0x96459e(0x3cb)]+_0x96459e(0x433)+_0x5c7c62);}}async[a0_0x3f352e(0x5bf)](_0x44a625){const _0x59c7df=a0_0x3f352e;try{let _0x2de7b0=_0x44a625['readMessages'][_0x59c7df(0x495)](_0x19681b=>(0x0,w['isJidGroup'])(_0x19681b[_0x59c7df(0x183)])||(0x0,w[_0x59c7df(0x5c6)])(_0x19681b[_0x59c7df(0x183)]))[_0x59c7df(0xff)](_0x1ae913=>({'remoteJid':_0x1ae913['remoteJid'],'fromMe':_0x1ae913[_0x59c7df(0x5cf)],'id':_0x1ae913['id']}));await this[_0x59c7df(0x3de)][_0x59c7df(0x4e4)](_0x2de7b0);let _0x105578=_0x2de7b0['map'](_0x5dbc0a=>this[_0x59c7df(0xfb)](_0x5dbc0a,{'status':_0x59c7df(0x573),'owner':this[_0x59c7df(0x799)]['wuid']})),_0x4fec33=_0x2de7b0['map'](_0x20e5dd=>this[_0x59c7df(0x7be)][_0x59c7df(0x629)][_0x59c7df(0x372)]({'where':{'_id':_0x20e5dd['remoteJid']}},{'unreadcount':0x0},this[_0x59c7df(0x799)]['wuid'])),[_0x3a35c,_0x248b4f]=await Promise['all']([Promise['all'](_0x105578),Promise[_0x59c7df(0x7c7)](_0x4fec33)]);return _0x248b4f[_0x59c7df(0x495)](_0x53adc4=>_0x53adc4!==null)[_0x59c7df(0x62c)](_0x4396ef=>{const _0x404e41=_0x59c7df;J(this[_0x404e41(0x78b)],_0x404e41(0x725),{'chat':_0x4396ef});}),{'message':_0x59c7df(0x2ef),'read':'success'};}catch(_0x346dad){let _0x2e60f9=_0x59c7df(0x577),_0x3c65f9=_0x346dad instanceof Error?_0x346dad[_0x59c7df(0x499)]:typeof _0x346dad==_0x59c7df(0x5a0)?JSON[_0x59c7df(0x1bb)](_0x346dad):_0x346dad,_0x5ecee3=_0x2e60f9+':\x20'+_0x3c65f9;throw this['logger'][_0x59c7df(0x4b3)](this[_0x59c7df(0x78b)]+'\x20('+this[_0x59c7df(0x799)]['wuid']+'):\x20'+_0x5ecee3),new x(_0x5ecee3);}}async[a0_0x3f352e(0x5f0)](_0x509cac){const _0xe7bc39=a0_0x3f352e;let _0x402317={'where':{'key':{'remoteJid':_0x509cac}},'limit':0x1},_0x26dd4e=await this[_0xe7bc39(0x3dd)](_0x402317);return _0x26dd4e||(this[_0xe7bc39(0x112)][_0xe7bc39(0x4b3)](_0xe7bc39(0x51b)+_0x509cac),null);}async[a0_0x3f352e(0x157)](_0x151b8b){const _0x5af6d3=a0_0x3f352e;this['logger'][_0x5af6d3(0x72d)](this[_0x5af6d3(0x78b)]+'\x20('+this['instance'][_0x5af6d3(0x3cb)]+_0x5af6d3(0x568));try{let _0x52926f=_0x151b8b[_0x5af6d3(0x1c4)],_0x2dda7a=_0x151b8b[_0x5af6d3(0x629)];if(!_0x52926f&&_0x2dda7a?_0x52926f=await this['getLastMessage'](_0x2dda7a):(_0x52926f=_0x151b8b[_0x5af6d3(0x1c4)],_0x52926f['messageTimestamp']=_0x52926f?.[_0x5af6d3(0x43d)]??Date[_0x5af6d3(0x196)](),_0x2dda7a=_0x52926f?.['key']?.[_0x5af6d3(0x183)]),!_0x52926f||Object['keys'](_0x52926f)[_0x5af6d3(0x45c)]===0x0)throw new j('Last\x20message\x20not\x20found');this['logger'][_0x5af6d3(0x72d)](this['instanceName']+'\x20('+this[_0x5af6d3(0x799)][_0x5af6d3(0x3cb)]+_0x5af6d3(0x49f)+_0x2dda7a);try{await this['client'][_0x5af6d3(0x165)]({'archive':_0x151b8b['archive'],'lastMessages':[_0x52926f]},this[_0x5af6d3(0x36e)](_0x2dda7a));}catch(_0x38a294){let _0x457df7='Error\x20in\x20chatModify\x20for\x20number\x20'+_0x2dda7a,_0x2807d0=_0x38a294 instanceof Error?_0x38a294[_0x5af6d3(0x499)]:typeof _0x38a294==_0x5af6d3(0x5a0)?JSON['stringify'](_0x38a294):_0x38a294,_0x30f1e6=_0x457df7+':\x20'+_0x2807d0;this[_0x5af6d3(0x112)][_0x5af6d3(0x4b3)](this[_0x5af6d3(0x78b)]+'\x20('+this[_0x5af6d3(0x799)][_0x5af6d3(0x3cb)]+'):\x20'+_0x30f1e6);}this[_0x5af6d3(0x112)][_0x5af6d3(0x72d)](this[_0x5af6d3(0x78b)]+'\x20('+this[_0x5af6d3(0x799)]['wuid']+_0x5af6d3(0x301)+_0x2dda7a);let _0x30eef0=await this[_0x5af6d3(0x7be)][_0x5af6d3(0x629)][_0x5af6d3(0x372)]({'where':{'_id':_0x52926f?.[_0x5af6d3(0x2bb)]?.[_0x5af6d3(0x183)]}},{'archived':_0x151b8b[_0x5af6d3(0x26f)]},this[_0x5af6d3(0x799)]['wuid']);return _0x30eef0?(this[_0x5af6d3(0x112)][_0x5af6d3(0x72d)](this[_0x5af6d3(0x78b)]+'\x20('+this[_0x5af6d3(0x799)]['wuid']+_0x5af6d3(0x5c2)+JSON['stringify'](_0x30eef0)),J(this[_0x5af6d3(0x78b)],'chats',{'chat':_0x30eef0})):this[_0x5af6d3(0x112)][_0x5af6d3(0x4b3)](this['instanceName']+'\x20('+this[_0x5af6d3(0x799)][_0x5af6d3(0x3cb)]+_0x5af6d3(0x5dc)+_0x2dda7a),{'chatId':_0x2dda7a,'archived':_0x151b8b[_0x5af6d3(0x26f)]};}catch(_0x318260){let _0x27dd2=_0x5af6d3(0x46b),_0x34822c=_0x318260 instanceof Error?_0x318260[_0x5af6d3(0x499)]:typeof _0x318260==_0x5af6d3(0x5a0)?JSON[_0x5af6d3(0x1bb)](_0x318260):_0x318260,_0x4e2145=_0x27dd2+':\x20'+_0x34822c;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x5af6d3(0x799)][_0x5af6d3(0x3cb)]+'):\x20'+_0x4e2145),new x(_0x4e2145);}}async['deleteChat'](_0x4a422b){const _0x337e82=a0_0x3f352e;this['logger']['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+'):Delete\x20chat');try{let _0x509e98=await this['getLastMessage'](_0x4a422b);if(!_0x509e98||Object[_0x337e82(0x75c)](_0x509e98)['length']===0x0)throw new j(_0x337e82(0x57c));let _0x3c91f2=_0x509e98[0x0];this[_0x337e82(0x112)][_0x337e82(0x72d)](this[_0x337e82(0x78b)]+'\x20('+this['instance']['wuid']+_0x337e82(0x5f2)+_0x4a422b);try{await this['client'][_0x337e82(0x165)]({'delete':!0x0,'lastMessages':[{'key':_0x3c91f2[_0x337e82(0x2bb)],'messageTimestamp':_0x3c91f2[_0x337e82(0x43d)]}]},this[_0x337e82(0x36e)](_0x4a422b));}catch(_0x118a6d){this[_0x337e82(0x112)][_0x337e82(0x4b3)](_0x337e82(0x72c)+_0x4a422b+':\x20'+_0x118a6d['toString']());}this[_0x337e82(0x112)][_0x337e82(0x72d)](this[_0x337e82(0x78b)]+'\x20('+this[_0x337e82(0x799)][_0x337e82(0x3cb)]+_0x337e82(0x301)+_0x4a422b);return;}catch(_0xa827e3){throw this[_0x337e82(0x112)][_0x337e82(0x4b3)](this[_0x337e82(0x78b)]+'\x20('+this[_0x337e82(0x799)][_0x337e82(0x3cb)]+'):Error\x20occurred\x20while\x20archiving\x20chat:\x20'+_0xa827e3['toString']()),new x({'archived':!0x1,'message':[_0x337e82(0x382),_0xa827e3['toString']()]});}}async[a0_0x3f352e(0x3b8)](_0x4d39f8){const _0x219eb6=a0_0x3f352e;try{let _0x4ecab9=await this[_0x219eb6(0x3de)][_0x219eb6(0x377)](_0x4d39f8[_0x219eb6(0x183)],{'delete':_0x4d39f8});try{let _0x39e67f=await this[_0x219eb6(0xfb)](_0x4d39f8,{'status':_0x219eb6(0x2a2),'owner':this[_0x219eb6(0x799)]['wuid']});this['logger']['verbose'](this[_0x219eb6(0x78b)]+'\x20('+this[_0x219eb6(0x799)]['wuid']+_0x219eb6(0x58e)+_0x39e67f);}catch(_0x3b30c4){this[_0x219eb6(0x112)][_0x219eb6(0x4b3)](_0x219eb6(0x1f8)+_0x3b30c4);}return _0x4ecab9;}catch(_0x47b4eb){throw new x(_0x219eb6(0xa2),_0x47b4eb?.[_0x219eb6(0x123)]());}}async[a0_0x3f352e(0x600)](_0x3b5ab2){const _0x85cf11=a0_0x3f352e;try{let _0x14deca=_0x3b5ab2?.[_0x85cf11(0x499)]?_0x3b5ab2:await this[_0x85cf11(0xf0)](_0x3b5ab2[_0x85cf11(0x2bb)],!0x0);for(let _0x466402 of Ea)_0x14deca[_0x85cf11(0x499)][_0x466402]&&(_0x14deca[_0x85cf11(0x499)]=_0x14deca[_0x85cf11(0x499)][_0x466402][_0x85cf11(0x499)]);let _0x28446a,_0x4e4fc6;for(let _0x552d82 of Ca)if(_0x28446a=_0x14deca[_0x85cf11(0x499)][_0x552d82],_0x28446a){_0x4e4fc6=_0x552d82;break;}if(!_0x28446a)throw _0x85cf11(0x1b1);typeof _0x28446a[_0x85cf11(0x650)]=='object'&&(_0x14deca[_0x85cf11(0x499)]=JSON[_0x85cf11(0x4d4)](JSON[_0x85cf11(0x1bb)](_0x14deca[_0x85cf11(0x499)])));let _0x2d8dc2=await(0x0,w['downloadMediaMessage'])({'key':_0x14deca?.[_0x85cf11(0x2bb)],'message':_0x14deca?.[_0x85cf11(0x499)]},_0x85cf11(0x6ee),{},{'logger':(0x0,Ut[_0x85cf11(0x164)])({'level':_0x85cf11(0x31a)}),'reuploadRequest':this[_0x85cf11(0x3de)][_0x85cf11(0x142)]});if(!(_0x2d8dc2 instanceof Buffer))throw new Error(_0x85cf11(0x24f));let _0x216331=this['configService'][_0x85cf11(0x427)](_0x85cf11(0x611)),_0x29f4fb,_0x370e91;if(_0x28446a[_0x85cf11(0x241)])_0x29f4fb=_0x28446a[_0x85cf11(0x241)];else{let _0x2f0192=_0x28446a['mimetype']?.['match'](/\/(\w+)/),_0x550d8c=_0x2f0192?_0x2f0192[0x1]:null;if(!_0x550d8c)throw new Error(_0x85cf11(0x3a6));_0x29f4fb=(0x0,X['v4'])()+'.'+_0x550d8c;}_0x4e4fc6===_0x85cf11(0x6bb)?_0x370e91='/media/'+await this[_0x85cf11(0x440)](_0x2d8dc2[_0x85cf11(0x123)]('base64')):(await this[_0x85cf11(0x795)](_0x2d8dc2,_0x29f4fb),_0x370e91=_0x85cf11(0xeb)+_0x29f4fb);let _0x21fadd=this['configService'][_0x85cf11(0x427)](_0x85cf11(0x597))[_0x85cf11(0x298)];if(!_0x21fadd){let _0x3dad77=this[_0x85cf11(0x446)][_0x85cf11(0x427)]('SSL_CONF');_0x21fadd=_0x85cf11(0x4b5)+(_0x3dad77&&_0x3dad77[_0x85cf11(0xbb)][_0x85cf11(0x384)]('/')[0x4]);}_0x370e91=''+_0x21fadd+_0x370e91;let _0x35a40f=0xc*0x3c*0x3c*0x3e8,_0x44de28={'where':{'_id':_0x14deca[_0x85cf11(0x2bb)]['id']}},_0xd16683={'message_normalized.fileUrl':_0x370e91,'message_normalized.expires_fileUrl':Date['now']()+_0x35a40f};try{let _0x1a0ea5=await this[_0x85cf11(0x7be)][_0x85cf11(0x499)][_0x85cf11(0x6c1)](_0x44de28,_0xd16683,this[_0x85cf11(0x799)][_0x85cf11(0x3cb)]);_0x1a0ea5&&J(this[_0x85cf11(0x78b)],_0x85cf11(0x1a8),{'message':_0x1a0ea5});}catch(_0xcf9829){let _0x57011b=_0x85cf11(0x738),_0x25ebff=_0xcf9829 instanceof Error?_0xcf9829[_0x85cf11(0x499)]:typeof _0xcf9829==_0x85cf11(0x5a0)?JSON[_0x85cf11(0x1bb)](_0xcf9829):_0xcf9829,_0x4f5c37=_0x57011b+':\x20'+_0x25ebff;this[_0x85cf11(0x112)][_0x85cf11(0x4b3)](this[_0x85cf11(0x78b)]+'\x20('+this['instance'][_0x85cf11(0x3cb)]+_0x85cf11(0x433)+_0x4f5c37);}return{'mediaType':_0x4e4fc6,'fileName':_0x28446a[_0x85cf11(0x241)],'caption':_0x28446a[_0x85cf11(0x2ae)],'size':{'fileLength':_0x28446a[_0x85cf11(0x79d)],'height':_0x28446a[_0x85cf11(0x410)],'width':_0x28446a['width']},'mimetype':_0x28446a[_0x85cf11(0x53b)],'base64':_0x2d8dc2[_0x85cf11(0x123)]('base64'),'fileUrl':_0x370e91,'expires_fileUrl':Date[_0x85cf11(0x196)]()+_0x35a40f};}catch(_0x356d91){let _0x59c5f4=_0x85cf11(0x3d2),_0x3de36c=_0x356d91 instanceof Error?_0x356d91[_0x85cf11(0x499)]:typeof _0x356d91==_0x85cf11(0x5a0)?JSON[_0x85cf11(0x1bb)](_0x356d91):_0x356d91,_0x6579a6=_0x59c5f4+':\x20'+_0x3de36c;throw this[_0x85cf11(0x112)]['error'](this['instanceName']+'\x20('+this[_0x85cf11(0x799)][_0x85cf11(0x3cb)]+_0x85cf11(0x433)+_0x6579a6),new m(_0x6579a6);}}async[a0_0x3f352e(0x795)](_0x10b202,_0x20b86f){const _0x470adf=a0_0x3f352e;let _0x5cf0f6=U[_0x470adf(0x164)][_0x470adf(0x348)](__dirname,_0x470adf(0x45a));L['existsSync'](_0x5cf0f6)||L[_0x470adf(0x7e8)](_0x5cf0f6,{'recursive':!0x0});let _0x505633=U[_0x470adf(0x164)]['join'](_0x5cf0f6,_0x20b86f);return new Promise((_0x1ddbc4,_0x116275)=>{const _0x28c7ba=_0x470adf;L[_0x28c7ba(0x497)](_0x505633,_0x10b202,_0x433cbc=>{const _0x316f6c=_0x28c7ba;_0x433cbc?(this['logger'][_0x316f6c(0x4b3)]('Error\x20writing\x20file:\x20'+(_0x433cbc instanceof Error?_0x433cbc[_0x316f6c(0x499)]:JSON[_0x316f6c(0x1bb)](_0x433cbc,null,0x2))),_0x116275(_0x433cbc)):(this[_0x316f6c(0x112)][_0x316f6c(0x133)](_0x316f6c(0x485)+_0x505633),_0x1ddbc4(_0x505633));});});}async[a0_0x3f352e(0x38f)](_0x11388a){const _0x1bed19=a0_0x3f352e;return await this['repository'][_0x1bed19(0x4d3)][_0x1bed19(0x71f)](_0x11388a,this[_0x1bed19(0x799)][_0x1bed19(0x3cb)]);}async[a0_0x3f352e(0x1d2)](){const _0x1dc383=a0_0x3f352e;return await this[_0x1dc383(0x7be)]['label'][_0x1dc383(0x71f)]({'where':{}},this['instance']['wuid']);}async['fetchMessages'](_0xb7a51){const _0x434ece=a0_0x3f352e;return await this[_0x434ece(0x7be)][_0x434ece(0x499)][_0x434ece(0x71f)](_0xb7a51,this[_0x434ece(0x799)][_0x434ece(0x3cb)]);}async[a0_0x3f352e(0x505)](){const _0x5c4e8f=a0_0x3f352e;return this[_0x5c4e8f(0x7be)][_0x5c4e8f(0x629)]['removeUnusedChatFields'](this[_0x5c4e8f(0x799)][_0x5c4e8f(0x3cb)]),this[_0x5c4e8f(0x7be)]['chat']['updateMissingEtiquetas'](this[_0x5c4e8f(0x799)][_0x5c4e8f(0x3cb)]),this[_0x5c4e8f(0x7be)][_0x5c4e8f(0x629)][_0x5c4e8f(0x7e1)](this['instance'][_0x5c4e8f(0x3cb)]),this[_0x5c4e8f(0x7be)][_0x5c4e8f(0x629)][_0x5c4e8f(0x6ed)](this[_0x5c4e8f(0x799)]['wuid']),await this[_0x5c4e8f(0x7be)][_0x5c4e8f(0x629)][_0x5c4e8f(0x71f)]({'where':{}},this[_0x5c4e8f(0x799)][_0x5c4e8f(0x3cb)]);}async[a0_0x3f352e(0x5cd)](_0x11c561){const _0x74b495=a0_0x3f352e;try{if(!Array[_0x74b495(0xae)](_0x11c561)||_0x11c561['length']===0x0)throw new Error('Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.');let _0x235f94=[],_0x53783b=[];for(let _0x15a3e8 of _0x11c561){if(_0x15a3e8[_0x74b495(0x68d)])_0x15a3e8[_0x74b495(0x68d)]=this[_0x74b495(0x36e)](_0x15a3e8[_0x74b495(0x68d)]);else continue;await this['repository']['chat'][_0x74b495(0x312)]({'where':{'_id':_0x15a3e8[_0x74b495(0x68d)]}},this[_0x74b495(0x799)][_0x74b495(0x3cb)])?_0x53783b[_0x74b495(0x5ea)]({'_id':_0x15a3e8[_0x74b495(0x68d)],'leadInfo':_0x15a3e8[_0x74b495(0x704)],'owner':this[_0x74b495(0x799)][_0x74b495(0x3cb)]}):_0x235f94[_0x74b495(0x5ea)]({'_id':_0x15a3e8[_0x74b495(0x68d)],'owner':this['instance'][_0x74b495(0x3cb)],'leadInfo':_0x15a3e8[_0x74b495(0x704)],'imported':!0x0});}return _0x53783b[_0x74b495(0x45c)]>0x0&&await this[_0x74b495(0x7be)]['chat'][_0x74b495(0x4b0)](_0x53783b['map'](_0x39952e=>({'query':{'where':{'_id':_0x39952e[_0x74b495(0x68d)],'owner':this[_0x74b495(0x799)][_0x74b495(0x3cb)]}},'update':_0x39952e}))),_0x235f94[_0x74b495(0x45c)]>0x0&&await this[_0x74b495(0x7be)]['chat'][_0x74b495(0x190)](_0x235f94,this[_0x74b495(0x799)]['wuid']),{'updated':_0x53783b[_0x74b495(0x45c)],'inserted':_0x235f94[_0x74b495(0x45c)]};}catch(_0xd584d4){let _0x43e44e=_0x74b495(0xc1),_0x3314d7=_0xd584d4 instanceof Error?_0xd584d4['message']:typeof _0xd584d4==_0x74b495(0x5a0)?JSON[_0x74b495(0x1bb)](_0xd584d4):_0xd584d4,_0x503665=_0x43e44e+':\x20'+_0x3314d7;throw this['logger'][_0x74b495(0x4b3)](this[_0x74b495(0x78b)]+'\x20('+this[_0x74b495(0x799)][_0x74b495(0x3cb)]+_0x74b495(0x433)+_0x503665),new m(_0x503665);}}async[a0_0x3f352e(0x561)](_0x4ed956){const _0x4fc6ae=a0_0x3f352e;try{if(!Array[_0x4fc6ae(0xae)](_0x4ed956)||_0x4ed956[_0x4fc6ae(0x45c)]===0x0)throw new Error(_0x4fc6ae(0x393));let _0xf4700=0x64,_0x393c17=0x0;for(let _0x140a80=0x0;_0x140a80<_0x4ed956[_0x4fc6ae(0x45c)];_0x140a80+=_0xf4700){let _0x12506f=_0x4ed956[_0x4fc6ae(0x4d9)](_0x140a80,_0x140a80+_0xf4700),{updated:_0x43629a}=await this[_0x4fc6ae(0x30e)](_0x12506f);_0x393c17+=_0x43629a;}return{'updated':_0x393c17};}catch(_0x37cf77){let _0x22fc29='Erro\x20ao\x20importar\x20chats',_0xd05700=_0x37cf77 instanceof Error?_0x37cf77[_0x4fc6ae(0x499)]:typeof _0x37cf77==_0x4fc6ae(0x5a0)?JSON[_0x4fc6ae(0x1bb)](_0x37cf77):_0x37cf77,_0x3b4323=_0x22fc29+':\x20'+_0xd05700;throw this[_0x4fc6ae(0x112)][_0x4fc6ae(0x4b3)](this['instanceName']+'\x20('+this[_0x4fc6ae(0x799)][_0x4fc6ae(0x3cb)]+_0x4fc6ae(0x433)+_0x3b4323),new m(_0x3b4323);}}async[a0_0x3f352e(0x30e)](_0x1452aa){const _0x42cfa8=a0_0x3f352e;try{let _0x4461a5=await this[_0x42cfa8(0x7be)][_0x42cfa8(0x716)][_0x42cfa8(0x71f)]({'where':{}},this[_0x42cfa8(0x799)][_0x42cfa8(0x3cb)]),_0x376092=new Set(_0x4461a5[_0x42cfa8(0xff)](_0x33408f=>_0x33408f[_0x42cfa8(0x68d)])),_0x3e45b0=[],_0x223554=[];for(let _0x4166e4 of _0x1452aa){if(!_0x4166e4[_0x42cfa8(0x68d)])continue;_0x4166e4[_0x42cfa8(0x68d)]=this['createJid'](_0x4166e4['_id']);let _0x3f4bbd=await this[_0x42cfa8(0x7be)][_0x42cfa8(0x629)][_0x42cfa8(0x312)]({'where':{'_id':_0x4166e4[_0x42cfa8(0x68d)]}},this['instance'][_0x42cfa8(0x3cb)]),_0x2a06c8={};if(Object[_0x42cfa8(0x37b)](_0x4166e4[_0x42cfa8(0x704)])[_0x42cfa8(0x62c)](([_0x466ef5,_0x379de9])=>{const _0x213e6c=_0x42cfa8;_0x2a06c8[_0x213e6c(0x79f)+_0x466ef5]=_0x379de9;}),_0x3f4bbd&&!_0x3f4bbd[_0x42cfa8(0x36b)]){let _0x42a109=(_0x4166e4[_0x42cfa8(0x704)][_0x42cfa8(0x612)]||[])['filter'](_0xa77eda=>_0x376092[_0x42cfa8(0x4e1)](_0xa77eda)),_0x64274=new Set(_0x3f4bbd[_0x42cfa8(0x704)][_0x42cfa8(0x612)]||[]),_0x193650=_0x42a109[_0x42cfa8(0x495)](_0x349f7b=>!_0x64274[_0x42cfa8(0x4e1)](_0x349f7b)),_0x295dbe=[..._0x64274][_0x42cfa8(0x495)](_0x500d41=>!_0x42a109[_0x42cfa8(0x2bf)](_0x500d41));_0x223554['push'](..._0x193650[_0x42cfa8(0xff)](_0x331750=>this[_0x42cfa8(0x258)](_0x331750,_0x4166e4[_0x42cfa8(0x68d)]))),_0x223554[_0x42cfa8(0x5ea)](..._0x295dbe['map'](_0xc64c8d=>this[_0x42cfa8(0x667)](_0xc64c8d,_0x4166e4['_id']))),_0x4166e4[_0x42cfa8(0x704)]['etiquetas']=_0x42a109,_0x3e45b0[_0x42cfa8(0x5ea)]({'query':{'where':{'_id':_0x4166e4[_0x42cfa8(0x68d)],'owner':this[_0x42cfa8(0x799)]['wuid']}},'update':_0x2a06c8});}else _0x2a06c8['imported']=!0x0,_0x3e45b0[_0x42cfa8(0x5ea)]({'query':{'where':{'_id':_0x4166e4[_0x42cfa8(0x68d)],'owner':this[_0x42cfa8(0x799)][_0x42cfa8(0x3cb)]}},'update':_0x2a06c8});}let _0x38e6d0=await this[_0x42cfa8(0x7be)]['chat'][_0x42cfa8(0x4b0)](_0x3e45b0);return await Promise['all'](_0x223554),{'updated':_0x38e6d0};}catch(_0x203726){let _0x1ef27d=_0x42cfa8(0xc1),_0x5dd9ba=_0x203726 instanceof Error?_0x203726[_0x42cfa8(0x499)]:typeof _0x203726=='object'?JSON[_0x42cfa8(0x1bb)](_0x203726):_0x203726,_0x3c2a3a=_0x1ef27d+':\x20'+_0x5dd9ba;throw this[_0x42cfa8(0x112)][_0x42cfa8(0x4b3)](this['instanceName']+'\x20('+this[_0x42cfa8(0x799)]['wuid']+'):\x20'+_0x3c2a3a),new m(_0x3c2a3a);}}async[a0_0x3f352e(0x103)](){const _0x511c10=a0_0x3f352e;return await this[_0x511c10(0x3de)]['fetchPrivacySettings']();}async[a0_0x3f352e(0x4df)](_0x331c01){const _0x3589c2=a0_0x3f352e;try{return await this[_0x3589c2(0x3de)][_0x3589c2(0x26c)](_0x331c01[_0x3589c2(0xc2)][_0x3589c2(0xd6)]),await this[_0x3589c2(0x3de)]['updateProfilePicturePrivacy'](_0x331c01[_0x3589c2(0xc2)]['profile']),await this[_0x3589c2(0x3de)][_0x3589c2(0x24e)](_0x331c01['privacySettings']['status']),await this[_0x3589c2(0x3de)]['updateOnlinePrivacy'](_0x331c01[_0x3589c2(0xc2)][_0x3589c2(0x630)]),await this[_0x3589c2(0x3de)][_0x3589c2(0x5ce)](_0x331c01[_0x3589c2(0xc2)][_0x3589c2(0x332)]),await this[_0x3589c2(0x3de)][_0x3589c2(0x1d1)](_0x331c01['privacySettings'][_0x3589c2(0x16b)]),this[_0x3589c2(0x3de)]?.['ws']?.[_0x3589c2(0x4b2)](),{'update':'success','data':{'readreceipts':_0x331c01[_0x3589c2(0xc2)][_0x3589c2(0xd6)],'profile':_0x331c01[_0x3589c2(0xc2)][_0x3589c2(0x779)],'status':_0x331c01[_0x3589c2(0xc2)][_0x3589c2(0x62a)],'online':_0x331c01[_0x3589c2(0xc2)][_0x3589c2(0x630)],'last':_0x331c01[_0x3589c2(0xc2)]['last'],'groupadd':_0x331c01['privacySettings'][_0x3589c2(0x16b)]}};}catch(_0x5175c3){let _0x3a9338='Erro\x20ao\x20alterar\x20privacidade',_0x132506=_0x5175c3 instanceof Error?_0x5175c3['message']:typeof _0x5175c3==_0x3589c2(0x5a0)?JSON['stringify'](_0x5175c3):_0x5175c3,_0x1e87a7=_0x3a9338+':\x20'+_0x132506;throw this[_0x3589c2(0x112)][_0x3589c2(0x4b3)](this[_0x3589c2(0x78b)]+'\x20('+this[_0x3589c2(0x799)]['wuid']+_0x3589c2(0x433)+_0x1e87a7),new m(_0x1e87a7);}}async[a0_0x3f352e(0x17d)](_0xbf9c96){const _0x68909e=a0_0x3f352e;let _0x586530=(_0xbf9c96?this[_0x68909e(0x36e)](_0xbf9c96):this[_0x68909e(0x3de)]?.[_0x68909e(0x642)]?.['id'])[_0x68909e(0x166)](/:\d{1,2}@/g,'@');this[_0x68909e(0x112)][_0x68909e(0x72d)](this[_0x68909e(0x78b)]+'\x20('+this[_0x68909e(0x799)][_0x68909e(0x3cb)]+_0x68909e(0x37f)+_0x586530);let _0x3a36e8=await this[_0x68909e(0x7be)][_0x68909e(0x4d3)][_0x68909e(0x312)]({'where':{'_id':_0x586530}},this['instance'][_0x68909e(0x3cb)]),_0x391946=_0x3a36e8?_0x3a36e8[_0x68909e(0x22a)]:null;try{let _0x167543=(await this[_0x68909e(0x3d6)]({'numbers':[_0x586530]}))?.[_0x68909e(0x5a1)](),_0x1ce62c=(await this[_0x68909e(0x2c8)](_0x586530,null,!0x1))[_0x68909e(0x4db)][_0x68909e(0x68a)],_0x35b38b=await this[_0x68909e(0x51e)](_0x167543?.[_0x68909e(0x3ab)]),_0x183069=await this[_0x68909e(0x136)](_0x167543?.[_0x68909e(0x3ab)]),_0x2595c4=(await this[_0x68909e(0x2c8)](_0x586530,null,!0x1))['cachedContact']['name'],_0x373b38=await this[_0x68909e(0x7be)][_0x68909e(0x629)]['findOne']({'where':{'_id':_0x586530}},this['instance'][_0x68909e(0x3cb)]),_0x343a59={'imagechat':_0x1ce62c,'contactname':_0x391946||null,'pushName':_0x2595c4,'status':_0x35b38b?.['status'],'isBusiness':_0x183069[_0x68909e(0x1a4)],'email':_0x183069?.[_0x68909e(0x555)],'description':_0x183069?.[_0x68909e(0x131)],'website':_0x183069?.[_0x68909e(0x5a7)]?.[_0x68909e(0x5a1)](),'lastcache':Date[_0x68909e(0x196)](),'imported':!_0x373b38},_0x33bf5d=await this[_0x68909e(0x7be)][_0x68909e(0x629)][_0x68909e(0x372)]({'where':{'_id':_0x586530}},_0x343a59,this[_0x68909e(0x799)][_0x68909e(0x3cb)]),_0x93545f={'owner':this['instance']['wuid'],'_id':_0x586530,'profilePictureUrl':_0x1ce62c,'status':_0x35b38b?.[_0x68909e(0x62a)]};return this[_0x68909e(0x7be)][_0x68909e(0x4d3)][_0x68909e(0x6c1)]([_0x93545f],this[_0x68909e(0x799)][_0x68909e(0x3cb)]),_0x33bf5d&&J(this[_0x68909e(0x78b)],_0x68909e(0x725),{'chat':_0x33bf5d}),{'wuid':_0x167543?.[_0x68909e(0x3ab)]||_0x586530,'name':_0x167543?.[_0x68909e(0x5f4)],'pushName':_0x2595c4,'numberExists':_0x167543?.[_0x68909e(0x5af)],'picture':_0x1ce62c,'status':_0x35b38b?.[_0x68909e(0x62a)],'isBusiness':_0x183069[_0x68909e(0x1a4)],'email':_0x183069?.[_0x68909e(0x555)],'description':_0x183069?.[_0x68909e(0x131)],'website':_0x183069?.[_0x68909e(0x5a7)]?.[_0x68909e(0x5a1)]()};}catch(_0xa3dbd3){return this['logger'][_0x68909e(0x4b3)](_0x68909e(0x5a2)+(_0xa3dbd3 instanceof Error?_0xa3dbd3['message']:JSON['stringify'](_0xa3dbd3,null,0x2))),{};}}async['fetchBusinessProfile'](_0x2473ba){const _0x5d060a=a0_0x3f352e;this[_0x5d060a(0x112)][_0x5d060a(0x72d)](this[_0x5d060a(0x78b)]+'\x20('+this[_0x5d060a(0x799)][_0x5d060a(0x3cb)]+'):Fetching\x20business\x20profile');try{let _0x591f5c=_0x2473ba?this['createJid'](_0x2473ba):this[_0x5d060a(0x799)][_0x5d060a(0x3cb)],_0x116b6a=await this[_0x5d060a(0x3de)][_0x5d060a(0x2b0)](_0x591f5c);return this['logger'][_0x5d060a(0x72d)](this[_0x5d060a(0x78b)]+'\x20('+this[_0x5d060a(0x799)][_0x5d060a(0x3cb)]+_0x5d060a(0xc0)),_0x116b6a?(this[_0x5d060a(0x112)]['verbose'](this[_0x5d060a(0x78b)]+'\x20('+this[_0x5d060a(0x799)]['wuid']+_0x5d060a(0x501)),{'isBusiness':!0x0,..._0x116b6a}):{'isBusiness':!0x1,'message':'Not\x20is\x20business\x20profile',...(await this[_0x5d060a(0x3d6)]({'numbers':[_0x591f5c]}))?.[_0x5d060a(0x5a1)]()};}catch(_0x50bb6e){let _0x47fb03='Falha\x20ao\x20processar\x20fetchBusinessProfile',_0x442f53=_0x50bb6e instanceof Error?_0x50bb6e['message']:typeof _0x50bb6e=='object'?JSON['stringify'](_0x50bb6e):_0x50bb6e,_0x249063=_0x47fb03+':\x20'+_0x442f53;throw this[_0x5d060a(0x112)][_0x5d060a(0x4b3)](this[_0x5d060a(0x78b)]+'\x20('+this['instance'][_0x5d060a(0x3cb)]+_0x5d060a(0x433)+_0x249063),new x(_0x249063);}}async[a0_0x3f352e(0x51e)](_0x2fae39){const _0x17e7c1=a0_0x3f352e;let _0x534727=this[_0x17e7c1(0x36e)](_0x2fae39);try{return{'wuid':_0x534727,'status':(await this[_0x17e7c1(0x3de)][_0x17e7c1(0x5bb)](_0x534727))[0x0]?.[_0x17e7c1(0x62a)]};}catch{return{'wuid':_0x534727,'status':null};}}async['updateProfileName'](_0x9390d6){const _0x5759ba=a0_0x3f352e;try{return await this[_0x5759ba(0x3de)]['updateProfileName'](_0x9390d6),{'update':_0x5759ba(0x362)};}catch(_0x51dbc4){let _0x263868=_0x5759ba(0x2d1),_0x20cc47=_0x51dbc4 instanceof Error?_0x51dbc4[_0x5759ba(0x499)]:typeof _0x51dbc4==_0x5759ba(0x5a0)?JSON[_0x5759ba(0x1bb)](_0x51dbc4):_0x51dbc4,_0x883687=_0x263868+':\x20'+_0x20cc47;throw this['logger'][_0x5759ba(0x4b3)](this[_0x5759ba(0x78b)]+'\x20('+this['instance'][_0x5759ba(0x3cb)]+'):\x20'+_0x883687),new x(_0x883687);}}async['updateProfileStatus'](_0x18c77d){const _0x4b9cd0=a0_0x3f352e;try{return await this['client']['updateProfileStatus'](_0x18c77d),{'update':'success'};}catch(_0x2a049f){let _0x43eb95=_0x4b9cd0(0x641),_0x4ad4ca=_0x2a049f instanceof Error?_0x2a049f[_0x4b9cd0(0x499)]:typeof _0x2a049f==_0x4b9cd0(0x5a0)?JSON[_0x4b9cd0(0x1bb)](_0x2a049f):_0x2a049f,_0x4ed43c=_0x43eb95+':\x20'+_0x4ad4ca;throw this['logger']['error'](this[_0x4b9cd0(0x78b)]+'\x20('+this[_0x4b9cd0(0x799)][_0x4b9cd0(0x3cb)]+_0x4b9cd0(0x433)+_0x4ed43c),new x(_0x4ed43c);}}async[a0_0x3f352e(0x7b7)](_0x9550e6){const _0x24a8da=a0_0x3f352e;try{let _0x354b3f;if((0x0,k[_0x24a8da(0x663)])(_0x9550e6)){let _0x2c5979=new Date()['getTime'](),_0x1d19e3=_0x9550e6+_0x24a8da(0x328)+_0x2c5979;_0x354b3f=(await Y[_0x24a8da(0x164)][_0x24a8da(0x427)](_0x1d19e3,{'responseType':_0x24a8da(0x359)}))[_0x24a8da(0x742)];}else{if((0x0,k[_0x24a8da(0x2d0)])(_0x9550e6))_0x354b3f=Buffer['from'](_0x9550e6,_0x24a8da(0x60d));else throw new m(_0x24a8da(0x6a2));}return await this['client'][_0x24a8da(0x7b7)](this[_0x24a8da(0x799)][_0x24a8da(0x3cb)],_0x354b3f),{'update':_0x24a8da(0x362)};}catch(_0x3fdbff){let _0x4d31c2=_0x24a8da(0x56b),_0xae5296=_0x3fdbff instanceof Error?_0x3fdbff[_0x24a8da(0x499)]:typeof _0x3fdbff==_0x24a8da(0x5a0)?JSON[_0x24a8da(0x1bb)](_0x3fdbff):_0x3fdbff,_0x2bf5a9=_0x4d31c2+':\x20'+_0xae5296;throw this[_0x24a8da(0x112)][_0x24a8da(0x4b3)](this[_0x24a8da(0x78b)]+'\x20('+this[_0x24a8da(0x799)]['wuid']+_0x24a8da(0x433)+_0x2bf5a9),new x(_0x2bf5a9);}}async[a0_0x3f352e(0x414)](){const _0x5da9eb=a0_0x3f352e;try{return await this['client'][_0x5da9eb(0x414)](this[_0x5da9eb(0x799)][_0x5da9eb(0x3cb)]),{'update':'success'};}catch(_0x1777a7){let _0x417a84=_0x5da9eb(0x608),_0x3b47c1=_0x1777a7 instanceof Error?_0x1777a7[_0x5da9eb(0x499)]:typeof _0x1777a7==_0x5da9eb(0x5a0)?JSON['stringify'](_0x1777a7):_0x1777a7,_0xb60325=_0x417a84+':\x20'+_0x3b47c1;throw this[_0x5da9eb(0x112)][_0x5da9eb(0x4b3)](this['instanceName']+'\x20('+this[_0x5da9eb(0x799)][_0x5da9eb(0x3cb)]+_0x5da9eb(0x433)+_0xb60325),new x(_0xb60325);}}async['createGroup'](_0x512125){const _0x11259e=a0_0x3f352e;try{let _0x374d30=(await this[_0x11259e(0x3d6)]({'numbers':_0x512125[_0x11259e(0x6b7)]}))[_0x11259e(0x495)](_0x4d7d86=>_0x4d7d86['exists'])[_0x11259e(0xff)](_0x108383=>_0x108383['jid']),{id:_0xa400d9}=await this[_0x11259e(0x3de)]['groupCreate'](_0x512125[_0x11259e(0x507)],_0x374d30);_0x512125?.[_0x11259e(0x131)]&&await this['client']['groupUpdateDescription'](_0xa400d9,_0x512125[_0x11259e(0x131)]);let _0x3d4ab6=await this[_0x11259e(0x3de)]['groupMetadata'](_0xa400d9);return _0x3d4ab6[_0x11259e(0x27c)]=[],{'metadata':_0x3d4ab6};}catch(_0x21ee17){let _0x2c6301=_0x11259e(0x19f),_0x42e40a=_0x21ee17 instanceof Error?_0x21ee17[_0x11259e(0x499)]:typeof _0x21ee17=='object'?JSON['stringify'](_0x21ee17):_0x21ee17,_0x3d33f9=_0x2c6301+':\x20'+_0x42e40a;throw this[_0x11259e(0x112)][_0x11259e(0x4b3)](this[_0x11259e(0x78b)]+'\x20('+this['instance'][_0x11259e(0x3cb)]+_0x11259e(0x433)+_0x3d33f9),new x(_0x3d33f9);}}async['groupBetterSetting'](_0x1e886c){const _0x42ac46=a0_0x3f352e;try{if(_0x1e886c[_0x42ac46(0x72a)]===!0x0&&await this[_0x42ac46(0x3de)]['groupSettingUpdate'](_0x1e886c['groupJid'],'locked'),_0x1e886c[_0x42ac46(0x72a)]===!0x1&&await this['client'][_0x42ac46(0x62d)](_0x1e886c[_0x42ac46(0x7df)],_0x42ac46(0x19d)),_0x1e886c[_0x42ac46(0x6bd)]===!0x0&&await this[_0x42ac46(0x3de)][_0x42ac46(0x62d)](_0x1e886c[_0x42ac46(0x7df)],_0x42ac46(0x213)),_0x1e886c[_0x42ac46(0x6bd)]===!0x1&&await this['client']['groupSettingUpdate'](_0x1e886c[_0x42ac46(0x7df)],_0x42ac46(0x254)),_0x1e886c[_0x42ac46(0x5bc)]===!0x0&&await this[_0x42ac46(0x3de)][_0x42ac46(0x6fe)](_0x1e886c['groupJid'],'all_member_add'),_0x1e886c['memberAddMode']===!0x1&&await this[_0x42ac46(0x3de)][_0x42ac46(0x6fe)](_0x1e886c[_0x42ac46(0x7df)],_0x42ac46(0x645)),_0x1e886c[_0x42ac46(0x572)]===!0x0&&await this[_0x42ac46(0x3de)][_0x42ac46(0x662)](_0x1e886c[_0x42ac46(0x7df)],'on'),_0x1e886c['joinApprovalMode']===!0x1&&await this[_0x42ac46(0x3de)][_0x42ac46(0x662)](_0x1e886c[_0x42ac46(0x7df)],_0x42ac46(0x658)),typeof _0x1e886c[_0x42ac46(0x5f3)]<'u'&&_0x1e886c['expiration']!==null&&await this[_0x42ac46(0x3de)][_0x42ac46(0x345)](_0x1e886c[_0x42ac46(0x7df)],_0x1e886c[_0x42ac46(0x5f3)]),_0x1e886c[_0x42ac46(0x5f4)]&&await this[_0x42ac46(0x3de)][_0x42ac46(0x686)](_0x1e886c[_0x42ac46(0x7df)],_0x1e886c[_0x42ac46(0x5f4)]),_0x1e886c[_0x42ac46(0x131)]&&await this[_0x42ac46(0x3de)][_0x42ac46(0x4cb)](_0x1e886c[_0x42ac46(0x7df)],_0x1e886c['description']),_0x1e886c['image']){let _0x4f7db6;if((0x0,k[_0x42ac46(0x663)])(_0x1e886c[_0x42ac46(0x763)])){let _0x434cd3=new Date()[_0x42ac46(0x154)](),_0x3e5c6e=_0x1e886c['image']+_0x42ac46(0x328)+_0x434cd3;_0x4f7db6=(await Y[_0x42ac46(0x164)][_0x42ac46(0x427)](_0x3e5c6e,{'responseType':_0x42ac46(0x359)}))[_0x42ac46(0x742)];}else{if((0x0,k[_0x42ac46(0x2d0)])(_0x1e886c[_0x42ac46(0x763)]))_0x4f7db6=Buffer[_0x42ac46(0x3a3)](_0x1e886c[_0x42ac46(0x763)],_0x42ac46(0x60d));else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}await this['client'][_0x42ac46(0x7b7)](_0x1e886c[_0x42ac46(0x7df)],_0x4f7db6);}return await this['findGroup']({'groupJid':_0x1e886c[_0x42ac46(0x7df)]});}catch(_0x4bed3f){let _0x26f6c8=_0x42ac46(0x4ab),_0x2f1d27=_0x4bed3f instanceof Error?_0x4bed3f[_0x42ac46(0x499)]:typeof _0x4bed3f==_0x42ac46(0x5a0)?JSON[_0x42ac46(0x1bb)](_0x4bed3f):_0x4bed3f,_0x17d8ff=_0x26f6c8+':\x20'+_0x2f1d27;throw this[_0x42ac46(0x112)][_0x42ac46(0x4b3)](this[_0x42ac46(0x78b)]+'\x20('+this[_0x42ac46(0x799)][_0x42ac46(0x3cb)]+_0x42ac46(0x433)+_0x17d8ff),new x(_0x17d8ff);}}async['updateGParticipant'](_0x3ec357){const _0x22b7e0=a0_0x3f352e;try{if(_0x3ec357[_0x22b7e0(0x5c7)]===_0x22b7e0(0x676)||_0x3ec357[_0x22b7e0(0x5c7)]==='reject'){let _0x2b443f=_0x3ec357[_0x22b7e0(0x6b7)][_0x22b7e0(0xff)](_0x1c3b4a=>this[_0x22b7e0(0x36e)](_0x1c3b4a));await this[_0x22b7e0(0x3de)]['groupRequestParticipantsUpdate'](_0x3ec357['groupJid'],_0x2b443f,_0x3ec357['action']);}else{if(_0x3ec357[_0x22b7e0(0x5c7)]===_0x22b7e0(0x41a)){let _0x396914=(await this[_0x22b7e0(0x3d6)]({'numbers':_0x3ec357[_0x22b7e0(0x6b7)]}))[_0x22b7e0(0x495)](_0x4edf8c=>_0x4edf8c['exists'])[_0x22b7e0(0xff)](_0x1e032c=>this[_0x22b7e0(0x36e)](_0x1e032c['jid']));if(_0x396914[_0x22b7e0(0x45c)]===0x0)throw new m(_0x22b7e0(0x417));await this[_0x22b7e0(0x3de)][_0x22b7e0(0x11f)](_0x3ec357[_0x22b7e0(0x7df)],_0x396914,_0x22b7e0(0x41a));}else{let _0x585521=_0x3ec357[_0x22b7e0(0x6b7)][_0x22b7e0(0xff)](_0x2ccf39=>this[_0x22b7e0(0x36e)](_0x2ccf39));await this[_0x22b7e0(0x3de)][_0x22b7e0(0x11f)](_0x3ec357[_0x22b7e0(0x7df)],_0x585521,_0x3ec357['action']);}}return await this[_0x22b7e0(0x615)]({'groupJid':_0x3ec357[_0x22b7e0(0x7df)]});}catch(_0x91e32f){let _0x491ab9='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant',_0x2ae191=_0x91e32f instanceof Error?_0x91e32f[_0x22b7e0(0x499)]:typeof _0x91e32f==_0x22b7e0(0x5a0)?JSON[_0x22b7e0(0x1bb)](_0x91e32f):_0x91e32f,_0x4d87f4=_0x491ab9+':\x20'+_0x2ae191;throw this['logger'][_0x22b7e0(0x4b3)](this[_0x22b7e0(0x78b)]+'\x20('+this[_0x22b7e0(0x799)][_0x22b7e0(0x3cb)]+_0x22b7e0(0x433)+_0x4d87f4),new m(_0x4d87f4);}}async[a0_0x3f352e(0x483)](_0x236a5e){const _0x1bb5f2=a0_0x3f352e;try{return await this['client'][_0x1bb5f2(0x483)](_0x236a5e[_0x1bb5f2(0x1b6)]);}catch(_0x1a43e9){let _0x2c26fb=_0x1bb5f2(0x441),_0x4aa6e3=_0x1a43e9 instanceof Error?_0x1a43e9['message']:typeof _0x1a43e9==_0x1bb5f2(0x5a0)?JSON[_0x1bb5f2(0x1bb)](_0x1a43e9):_0x1a43e9,_0x405dec=_0x2c26fb+':\x20'+_0x4aa6e3;throw this[_0x1bb5f2(0x112)][_0x1bb5f2(0x4b3)](this['instanceName']+'\x20('+this[_0x1bb5f2(0x799)][_0x1bb5f2(0x3cb)]+'):\x20'+_0x405dec),new m(_0x405dec);}}async[a0_0x3f352e(0x615)](_0x3a2e8f,_0xef8849=a0_0x3f352e(0x4f5)){const _0x3ea792=a0_0x3f352e;try{let _0x27a92b=await this[_0x3ea792(0x7be)][_0x3ea792(0x629)]['findOne']({'where':{'_id':_0x3a2e8f['groupJid']}},this['instance'][_0x3ea792(0x3cb)]),_0x3e0c2d=_0x27a92b?_0x27a92b[_0x3ea792(0x7e2)]:null,_0x5399a0=0x18*0x3c*0x3c*0x3e8;if(!_0x3e0c2d||_0x3e0c2d['lastUpdate']&&Date[_0x3ea792(0x196)]()-_0x3e0c2d[_0x3ea792(0x238)]>_0x5399a0){let _0x2a1b39=await this[_0x3ea792(0x3de)][_0x3ea792(0x7eb)](_0x3a2e8f['groupJid']);if(_0x2a1b39[_0x3ea792(0x1a0)]=_0x2a1b39?.[_0x3ea792(0x1a0)]&&_0x2a1b39['subjectTime'][_0x3ea792(0x123)]()['length']<0xd?_0x2a1b39?.[_0x3ea792(0x1a0)]*0x3e8:_0x2a1b39?.[_0x3ea792(0x1a0)]||null,_0x2a1b39[_0x3ea792(0x386)]=_0x2a1b39?.['creation']&&_0x2a1b39['creation'][_0x3ea792(0x123)]()[_0x3ea792(0x45c)]<0xd?_0x2a1b39?.[_0x3ea792(0x386)]*0x3e8:_0x2a1b39?.['creation']||null,_0x3e0c2d={..._0x2a1b39,'lastUpdate':Date['now']()},!_0x2a1b39)return;}let _0x126794=_0x3e0c2d[_0x3ea792(0x6b7)][_0x3ea792(0x378)](_0x57d0fa=>_0x57d0fa['id']===this['instance'][_0x3ea792(0x3cb)]+_0x3ea792(0x246)&&_0x57d0fa[_0x3ea792(0x668)]!=null);!_0x3e0c2d['inviteCode']&&_0x126794&&(_0x3e0c2d[_0x3ea792(0x1b6)]=(await this[_0x3ea792(0x1b6)](_0x3a2e8f,!0x1))[_0x3ea792(0x482)]);let _0x101149=(!_0x3e0c2d['announce']||_0x126794)&&(!_0x3e0c2d[_0x3ea792(0x4bc)]||_0x3e0c2d[_0x3ea792(0x4bc)]&&_0x3e0c2d[_0x3ea792(0xcd)]&&_0x126794);_0x3e0c2d['isAdmin']=_0x126794,_0x3e0c2d[_0x3ea792(0x2dd)]=_0x101149;let _0x4b22a9=[];if(_0x126794&&_0x3e0c2d[_0x3ea792(0x572)])try{_0x4b22a9=await this[_0x3ea792(0x3de)][_0x3ea792(0x144)](_0x3a2e8f[_0x3ea792(0x7df)]),_0x3e0c2d[_0x3ea792(0x541)]=Date[_0x3ea792(0x196)]();}catch(_0x1728c1){this[_0x3ea792(0x112)][_0x3ea792(0x72d)](this[_0x3ea792(0x78b)]+'\x20('+this[_0x3ea792(0x799)][_0x3ea792(0x3cb)]+'):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20'+_0x3a2e8f[_0x3ea792(0x7df)]+':\x20'+(_0x1728c1 instanceof Error?_0x1728c1['message']:JSON[_0x3ea792(0x1bb)](_0x1728c1,null,0x2)));}try{_0x3e0c2d[_0x3ea792(0x763)]=(await this['findAndUpdateCacheContact'](_0x3a2e8f[_0x3ea792(0x7df)],null,!0x0))[_0x3ea792(0x4db)]['pictureUrl'];}catch(_0x513354){this[_0x3ea792(0x112)][_0x3ea792(0x72d)](this['instanceName']+'\x20('+this[_0x3ea792(0x799)][_0x3ea792(0x3cb)]+_0x3ea792(0x719)+_0x3a2e8f[_0x3ea792(0x7df)]+':\x20'+(_0x513354 instanceof Error?_0x513354['message']:JSON['stringify'](_0x513354,null,0x2)));}let _0xfa8c03=_0x3e0c2d[_0x3ea792(0x6b7)]['map'](_0x44d434=>_0x44d434['id']),_0x403bc9=_0x4b22a9['map'](_0xf4d311=>_0xf4d311['jid']),_0x41a775=await this[_0x3ea792(0x7be)][_0x3ea792(0x2df)][_0x3ea792(0x7c1)]([..._0xfa8c03,..._0x403bc9]);_0x3e0c2d[_0x3ea792(0x6b7)]=_0x3e0c2d[_0x3ea792(0x6b7)][_0x3ea792(0xff)](_0xd3bf39=>{const _0x4adb24=_0x3ea792;let _0x4ade75=_0x41a775[_0x4adb24(0x71f)](_0x37ad50=>_0x37ad50[_0x4adb24(0x68d)]===_0xd3bf39['id']);return{'id':_0xd3bf39['id'],'isAdmin':['admin',_0x4adb24(0x500)][_0x4adb24(0x2bf)](_0xd3bf39[_0x4adb24(0x668)]),'admin':_0xd3bf39[_0x4adb24(0x668)],'pushName':_0x4ade75?.[_0x4adb24(0x5f4)],'profilePictureUrl':_0x4ade75?.[_0x4adb24(0x68a)]};}),_0x3e0c2d[_0x3ea792(0x27c)]=_0x4b22a9['map'](_0x7f8664=>{const _0x5ee478=_0x3ea792;let _0x13fd7e=_0x41a775[_0x5ee478(0x71f)](_0x407bd1=>_0x407bd1['_id']===_0x7f8664[_0x5ee478(0x3ab)]);return{'id':_0x7f8664[_0x5ee478(0x3ab)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x13fd7e?.['name'],'profilePictureUrl':_0x13fd7e?.['pictureUrl'],'request_method':_0x7f8664[_0x5ee478(0x2da)],'request_time':_0x7f8664[_0x5ee478(0xd5)]};});let _0x4ef999=await this[_0x3ea792(0x7be)][_0x3ea792(0x629)]['updateOne']({'where':{'_id':_0x3a2e8f[_0x3ea792(0x7df)]}},{'imagechat':_0x3e0c2d[_0x3ea792(0x763)],'name':_0x3e0c2d[_0x3ea792(0x507)],'lastcache':Date[_0x3ea792(0x196)](),'groupdata':_0x3e0c2d},this[_0x3ea792(0x799)][_0x3ea792(0x3cb)]);return J(this[_0x3ea792(0x78b)],_0x3ea792(0x725),{'chat':_0x4ef999}),{'metadata':_0x3e0c2d};}catch(_0x2af1f4){if(_0xef8849===_0x3ea792(0x70c))return;throw new j(_0x3ea792(0x398),_0x2af1f4['message'][_0x3ea792(0x123)]());}}async[a0_0x3f352e(0x5df)](){const _0x7c1233=a0_0x3f352e;try{this[_0x7c1233(0x112)][_0x7c1233(0x567)](_0x7c1233(0x53f));let _0x3536e3=Date[_0x7c1233(0x196)](),_0x1e4f07=0x3*0x3c*0x3c*0x3e8;return _0x3536e3-this[_0x7c1233(0x269)]>_0x1e4f07&&(this[_0x7c1233(0x2ff)](),this[_0x7c1233(0x269)]=_0x3536e3),(await this[_0x7c1233(0x7be)][_0x7c1233(0x629)]['findGroupsEspecial']({'where':{'group':!0x0}},this[_0x7c1233(0x799)][_0x7c1233(0x3cb)]))[_0x7c1233(0xff)](_0x489045=>({..._0x489045[_0x7c1233(0x7e2)],'groupJid':_0x489045?.['_id'],'participants':_0x489045?.['groupdata']?.[_0x7c1233(0x6b7)]||[],'awaitingApproval':_0x489045?.[_0x7c1233(0x7e2)]?.['awaitingApproval']||[],'image':_0x489045?.[_0x7c1233(0x531)]}));}catch(_0x1ac09e){let _0x3a8aad=_0x7c1233(0x2b5),_0x12ab1c=_0x1ac09e instanceof Error?_0x1ac09e[_0x7c1233(0x499)]:typeof _0x1ac09e==_0x7c1233(0x5a0)?JSON[_0x7c1233(0x1bb)](_0x1ac09e):_0x1ac09e,_0x59d47d=_0x3a8aad+':\x20'+_0x12ab1c;throw this[_0x7c1233(0x112)][_0x7c1233(0x4b3)](this[_0x7c1233(0x78b)]+'\x20('+this['instance'][_0x7c1233(0x3cb)]+_0x7c1233(0x433)+_0x59d47d),new j(_0x59d47d);}}async[a0_0x3f352e(0x2ff)](){const _0x5f0661=a0_0x3f352e;try{this[_0x5f0661(0x112)][_0x5f0661(0x567)](_0x5f0661(0x2c2));let _0x13ad02=[],_0x156630=await this['client'][_0x5f0661(0x18b)](),_0x505363=Object[_0x5f0661(0x514)](_0x156630),_0xa396a9=_0x505363[_0x5f0661(0x495)](_0x4685dd=>(0x0,w[_0x5f0661(0x47d)])(_0x4685dd?.['id']))[_0x5f0661(0xff)](async _0x18b0a0=>{const _0x25e516=_0x5f0661;try{return await this[_0x25e516(0x3de)][_0x25e516(0x700)](_0x18b0a0['id'],_0x25e516(0x581));}catch(_0x2f0b54){return this['logger'][_0x25e516(0x72d)](this['instanceName']+'\x20('+this[_0x25e516(0x799)][_0x25e516(0x3cb)]+_0x25e516(0x719)+_0x18b0a0['id']+':\x20'+(_0x2f0b54 instanceof Error?_0x2f0b54['message']:JSON[_0x25e516(0x1bb)](_0x2f0b54,null,0x2))),null;}}),_0x2eac80=await Promise[_0x5f0661(0x7c7)](_0xa396a9);for(let _0x411c21=0x0;_0x411c21<_0x505363[_0x5f0661(0x45c)];_0x411c21++){let _0xca60a9=_0x505363[_0x411c21];(0x0,w[_0x5f0661(0x47d)])(_0xca60a9?.['id'])&&(_0x13ad02[_0x5f0661(0x5ea)]({'groupJid':_0xca60a9?.['id'],'subject':_0xca60a9?.[_0x5f0661(0x507)],'subjectOwner':_0xca60a9?.['subjectOwner']?.['split']('@')[0x0],'subjectTime':_0xca60a9?.[_0x5f0661(0x1a0)],'creation':_0xca60a9?.[_0x5f0661(0x386)],'size':_0xca60a9?.[_0x5f0661(0x6b7)]?.[_0x5f0661(0x45c)],'owner':_0xca60a9?.[_0x5f0661(0x19a)]?.[_0x5f0661(0x384)]('@')[0x0],'desc':_0xca60a9?.['desc'],'restrict':_0xca60a9?.[_0x5f0661(0x72a)],'announce':_0xca60a9?.['announce'],'image':_0x2eac80[_0x411c21],'isCommunity':_0xca60a9?.['isCommunity'],'joinApprovalMode':_0xca60a9?.[_0x5f0661(0x572)],'memberCanAddParticipant':_0xca60a9?.[_0x5f0661(0x5bc)],'participants':_0xca60a9?.['participants'],'descOwner':_0xca60a9?.[_0x5f0661(0x1da)],'descId':_0xca60a9?.[_0x5f0661(0x1e5)],'memberAddMode':_0xca60a9?.[_0x5f0661(0x5bc)],'isCommunityAnnounce':_0xca60a9?.['isCommunityAnnounce'],'ephemeralDuration':_0xca60a9?.['ephemeralDuration']||0x0,'author':_0xca60a9?.['author']}),this[_0x5f0661(0x15b)](_0x505363[_0x411c21]));}return _0x13ad02;}catch(_0x23c887){let _0x5dc526=_0x5f0661(0x5d7),_0x36d8b1=_0x23c887 instanceof Error?_0x23c887[_0x5f0661(0x499)]:typeof _0x23c887=='object'?JSON[_0x5f0661(0x1bb)](_0x23c887):_0x23c887,_0x7bb5cc=_0x5dc526+':\x20'+_0x36d8b1;throw this[_0x5f0661(0x112)][_0x5f0661(0x4b3)](this[_0x5f0661(0x78b)]+'\x20('+this[_0x5f0661(0x799)][_0x5f0661(0x3cb)]+'):\x20'+_0x7bb5cc),new j(_0x7bb5cc);}}async[a0_0x3f352e(0x15b)](_0x144978){const _0x4ead40=a0_0x3f352e;let _0x165c9b=await this[_0x4ead40(0x7be)][_0x4ead40(0x629)][_0x4ead40(0x312)]({'where':{'_id':_0x144978['id']}},this['instance'][_0x4ead40(0x3cb)]);_0x144978[_0x4ead40(0x1a0)]=_0x144978?.['subjectTime']&&_0x144978[_0x4ead40(0x1a0)][_0x4ead40(0x123)]()['length']<0xd?_0x144978?.[_0x4ead40(0x1a0)]*0x3e8:_0x144978?.[_0x4ead40(0x1a0)]||null,_0x144978[_0x4ead40(0x386)]=_0x144978?.[_0x4ead40(0x386)]&&_0x144978[_0x4ead40(0x386)][_0x4ead40(0x123)]()[_0x4ead40(0x45c)]<0xd?_0x144978?.[_0x4ead40(0x386)]*0x3e8:_0x144978?.[_0x4ead40(0x386)]||null;let _0x550450=_0x165c9b?.[_0x4ead40(0x7e2)]?.[_0x4ead40(0x27c)]||[],_0x3130ec=_0x165c9b?.[_0x4ead40(0x7e2)]?.['lastFetchAwaitingApproval'],_0x19d974=_0x144978[_0x4ead40(0x6b7)][_0x4ead40(0xff)](_0x307c7f=>{const _0xaed193=_0x4ead40;let _0x999d35=_0x165c9b?.[_0xaed193(0x7e2)]?.[_0xaed193(0x6b7)][_0xaed193(0x71f)](_0x2f8507=>_0x2f8507['id']===_0x307c7f['id']);return{..._0x307c7f,'isAdmin':['admin','superadmin']['includes'](_0x307c7f[_0xaed193(0x668)]),'admin':_0x307c7f['admin'],'name':_0x999d35?.[_0xaed193(0x5f4)]||_0x307c7f[_0xaed193(0x5f4)],'imgUrl':_0x999d35?.[_0xaed193(0x609)]||_0x307c7f['imgUrl']};}),_0x56be0a=_0x19d974[_0x4ead40(0x378)](_0xb5f909=>_0xb5f909['id']===this['instance'][_0x4ead40(0x3cb)]+_0x4ead40(0x246)&&_0xb5f909[_0x4ead40(0x22b)]),_0x22f504=(!_0x144978[_0x4ead40(0x6bd)]||_0x56be0a)&&(!_0x144978[_0x4ead40(0x4bc)]||_0x144978[_0x4ead40(0x4bc)]&&_0x144978[_0x4ead40(0xcd)]&&_0x56be0a),_0x324775={..._0x144978,'participants':_0x19d974,'awaitingApproval':_0x550450,'lastFetchAwaitingApproval':_0x3130ec,'isAdmin':_0x56be0a,'canSendMessage':_0x22f504,'lastUpdate':Date[_0x4ead40(0x196)]()};await this[_0x4ead40(0x7be)]['chat']['updateOne']({'where':{'_id':_0x144978['id']}},{'name':_0x144978[_0x4ead40(0x507)],'group':!0x0,'groupdata':_0x324775,'lastcache':Date[_0x4ead40(0x196)]()},this[_0x4ead40(0x799)][_0x4ead40(0x3cb)]),J(this[_0x4ead40(0x78b)],'chats',{'chat':_0x144978});}async[a0_0x3f352e(0x442)](_0x4172c1){const _0x23e0fd=a0_0x3f352e;let _0xa6ad7c=await this[_0x23e0fd(0x7be)]['chat']['findOne']({'where':{'_id':_0x4172c1['id']}},this[_0x23e0fd(0x799)][_0x23e0fd(0x3cb)]);_0x4172c1[_0x23e0fd(0x1a0)]=_0x4172c1?.[_0x23e0fd(0x1a0)]&&_0x4172c1[_0x23e0fd(0x1a0)][_0x23e0fd(0x123)]()[_0x23e0fd(0x45c)]<0xd?_0x4172c1?.[_0x23e0fd(0x1a0)]*0x3e8:_0x4172c1?.[_0x23e0fd(0x1a0)]||null,_0x4172c1[_0x23e0fd(0x386)]=_0x4172c1?.['creation']&&_0x4172c1[_0x23e0fd(0x386)][_0x23e0fd(0x123)]()['length']<0xd?_0x4172c1?.[_0x23e0fd(0x386)]*0x3e8:_0x4172c1?.[_0x23e0fd(0x386)]||null,_0x4172c1[_0x23e0fd(0x1b6)]&&(_0x4172c1[_0x23e0fd(0x1b6)]='https://chat.whatsapp.com/'+_0x4172c1[_0x23e0fd(0x1b6)]);let _0x27738a=_0xa6ad7c?.[_0x23e0fd(0x7e2)]?{..._0xa6ad7c[_0x23e0fd(0x7e2)]}:{};Object[_0x23e0fd(0x75c)](_0x4172c1)['forEach'](_0x453335=>{_0x453335!=='id'&&(_0x27738a[_0x453335]=_0x4172c1[_0x453335]);});let _0x38b710=_0x27738a[_0x23e0fd(0x6b7)]?.[_0x23e0fd(0x378)](_0x31b049=>_0x31b049['id']===this[_0x23e0fd(0x799)][_0x23e0fd(0x3cb)]+_0x23e0fd(0x246)&&_0x31b049['isAdmin'])||!0x1;_0x27738a[_0x23e0fd(0x22b)]=_0x38b710;let _0x24868b=(!_0x27738a[_0x23e0fd(0x6bd)]||_0x38b710)&&(!_0x27738a[_0x23e0fd(0x4bc)]||_0x27738a[_0x23e0fd(0x4bc)]&&_0x27738a[_0x23e0fd(0xcd)]&&_0x38b710);_0x27738a[_0x23e0fd(0x2dd)]=_0x24868b;let _0x5045bc={'group':!0x0,'groupdata':_0x27738a};_0x4172c1[_0x23e0fd(0x507)]&&(_0x5045bc[_0x23e0fd(0x5f4)]=_0x4172c1[_0x23e0fd(0x507)]),await this[_0x23e0fd(0x7be)]['chat'][_0x23e0fd(0x372)]({'where':{'_id':_0x4172c1['id']}},_0x5045bc,this[_0x23e0fd(0x799)][_0x23e0fd(0x3cb)],{'upsert':!0x0}),J(this[_0x23e0fd(0x78b)],_0x23e0fd(0x725),{'chat':_0x5045bc});}async['updateGroupParticipantsWebhook'](_0x4bfe35){const _0x1db508=a0_0x3f352e;let _0x5d2506=await this[_0x1db508(0x7be)][_0x1db508(0x629)][_0x1db508(0x312)]({'where':{'_id':_0x4bfe35['id']}},this[_0x1db508(0x799)]['wuid']);if(!_0x5d2506||!_0x5d2506['groupdata']){this['logger']['info'](this[_0x1db508(0x78b)]+'\x20('+this[_0x1db508(0x799)][_0x1db508(0x3cb)]+_0x1db508(0x218)+_0x4bfe35['id']);return;}let _0x26d864=await this[_0x1db508(0x7be)][_0x1db508(0x2df)]['findManyByIds'](_0x4bfe35['participants']),_0x362400=[..._0x5d2506['groupdata']?.['participants']];switch(_0x4bfe35[_0x1db508(0x5c7)]){case _0x1db508(0x41a):let _0x21546e=_0x26d864['map'](_0x19075a=>({'id':_0x19075a[_0x1db508(0x68d)],'isAdmin':!0x1,'name':_0x19075a[_0x1db508(0x5f4)],'imgUrl':_0x19075a['pictureUrl']}));_0x362400=[..._0x362400,..._0x21546e];break;case _0x1db508(0xab):_0x362400=_0x362400[_0x1db508(0x495)](_0x129551=>!_0x4bfe35[_0x1db508(0x6b7)][_0x1db508(0x2bf)](_0x129551['id']));break;case'promote':case _0x1db508(0x439):_0x362400=_0x362400[_0x1db508(0xff)](_0x41dfe1=>_0x4bfe35[_0x1db508(0x6b7)]['includes'](_0x41dfe1['id'])?{..._0x41dfe1,'isAdmin':_0x4bfe35['action']===_0x1db508(0x67b)}:_0x41dfe1);break;}let _0x4e8e03=_0x362400[_0x1db508(0x45c)],_0x4c639f=_0x362400['some'](_0x55ad7b=>_0x55ad7b['id']===this['instance'][_0x1db508(0x3cb)]+_0x1db508(0x246)),_0x56b4b1=_0x4c639f&&_0x362400['some'](_0x309ec8=>_0x309ec8['id']===this[_0x1db508(0x799)][_0x1db508(0x3cb)]+_0x1db508(0x246)&&_0x309ec8[_0x1db508(0x22b)]),_0x90778f=_0x4c639f&&(!_0x5d2506[_0x1db508(0x7e2)][_0x1db508(0x6bd)]||_0x56b4b1)&&(!_0x5d2506['groupdata'][_0x1db508(0x4bc)]||_0x5d2506[_0x1db508(0x7e2)][_0x1db508(0x4bc)]&&_0x56b4b1);await this[_0x1db508(0x7be)][_0x1db508(0x629)]['updateOne']({'where':{'_id':_0x4bfe35['id']}},{'groupdata':{..._0x5d2506[_0x1db508(0x7e2)],'participants':_0x362400,'size':_0x4e8e03,'isAdmin':_0x56b4b1,'canSendMessage':_0x90778f}},this[_0x1db508(0x799)]['wuid']),this[_0x1db508(0x112)]['info'](this['instanceName']+'\x20('+this[_0x1db508(0x799)][_0x1db508(0x3cb)]+_0x1db508(0x108)+_0x4bfe35['id']+_0x1db508(0x2e1)+_0x4bfe35[_0x1db508(0x5c7)]+_0x1db508(0xea)+_0x4e8e03+_0x1db508(0x60a)+_0x56b4b1+_0x1db508(0x41e)+_0x90778f);}async[a0_0x3f352e(0x1b6)](_0x48109a,_0x3bd64f=!0x0){const _0x302985=a0_0x3f352e;try{let _0x445488=await this['client'][_0x302985(0x443)](_0x48109a[_0x302985(0x7df)]),_0x118b6c={'groupdata.inviteCode':_0x302985(0x212)+_0x445488};if(_0x3bd64f){let _0x5ec3cf=await this[_0x302985(0x7be)][_0x302985(0x629)][_0x302985(0x372)]({'where':{'_id':_0x48109a['groupJid']}},_0x118b6c,this['instance'][_0x302985(0x3cb)]);}return{'inviteUrl':'https://chat.whatsapp.com/'+_0x445488,'inviteCode':_0x445488};}catch(_0x223f3b){let _0x41343a=_0x302985(0x437),_0x68e5a9=_0x223f3b instanceof Error?_0x223f3b[_0x302985(0x499)]:typeof _0x223f3b==_0x302985(0x5a0)?JSON['stringify'](_0x223f3b):_0x223f3b,_0x242944=_0x41343a+':\x20'+_0x68e5a9;throw this[_0x302985(0x112)]['error'](this[_0x302985(0x78b)]+'\x20('+this[_0x302985(0x799)][_0x302985(0x3cb)]+_0x302985(0x433)+_0x242944),new j(_0x242944);}}async[a0_0x3f352e(0x57d)](_0x12b6a7){const _0x435b9e=a0_0x3f352e;try{let _0x37e123=await this['client'][_0x435b9e(0x179)](_0x12b6a7[_0x435b9e(0x7df)]);return{'revoked':!0x0,'inviteUrl':_0x435b9e(0x212)+_0x37e123,'inviteCode':_0x37e123};}catch(_0x3cac16){let _0x50a569=_0x435b9e(0x5ef),_0x16ad9a=_0x3cac16 instanceof Error?_0x3cac16[_0x435b9e(0x499)]:typeof _0x3cac16=='object'?JSON[_0x435b9e(0x1bb)](_0x3cac16):_0x3cac16,_0x18e95a=_0x50a569+':\x20'+_0x16ad9a;throw this[_0x435b9e(0x112)][_0x435b9e(0x4b3)](this['instanceName']+'\x20('+this[_0x435b9e(0x799)]['wuid']+_0x435b9e(0x433)+_0x18e95a),new j(_0x18e95a);}}async[a0_0x3f352e(0x155)](_0x510320){const _0x2d1a13=a0_0x3f352e;try{if((0x0,k[_0x2d1a13(0x663)])(_0x510320[_0x2d1a13(0x1b6)]))var _0x3d9215=_0x510320['inviteCode']['split']('/')[0x3];else var _0x3d9215=_0x510320[_0x2d1a13(0x1b6)];let _0x64be9f=await this[_0x2d1a13(0x3de)][_0x2d1a13(0x5d0)](_0x3d9215);return this[_0x2d1a13(0x112)][_0x2d1a13(0x72d)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x2d1a13(0x433)+_0x64be9f),{'join':!0x0,'inviteCode':_0x3d9215,'groupJid':_0x64be9f};}catch(_0x2548ff){let _0x47d5e9=_0x2d1a13(0x2c3),_0xb168e8=_0x2548ff instanceof Error?_0x2548ff['message']:typeof _0x2548ff==_0x2d1a13(0x5a0)?JSON[_0x2d1a13(0x1bb)](_0x2548ff):_0x2548ff,_0x4eb790=_0x47d5e9+':\x20'+_0xb168e8;throw this[_0x2d1a13(0x112)][_0x2d1a13(0x4b3)](this[_0x2d1a13(0x78b)]+'\x20('+this[_0x2d1a13(0x799)]['wuid']+_0x2d1a13(0x433)+_0x4eb790),new j(_0x4eb790);}}async[a0_0x3f352e(0x253)](_0x2f12ef){const _0x2ca7fb=a0_0x3f352e;try{return{'participants':(await this['repository'][_0x2ca7fb(0x629)][_0x2ca7fb(0x312)]({'where':{'_id':_0x2f12ef[_0x2ca7fb(0x7df)]}},this[_0x2ca7fb(0x799)]['wuid']))['groupdata'][_0x2ca7fb(0x6b7)]};}catch(_0x4ea47d){let _0x4774d8=_0x2ca7fb(0x287),_0x62bc34=_0x4ea47d instanceof Error?_0x4ea47d[_0x2ca7fb(0x499)]:typeof _0x4ea47d==_0x2ca7fb(0x5a0)?JSON['stringify'](_0x4ea47d):_0x4ea47d,_0x38ed65=_0x4774d8+':\x20'+_0x62bc34;throw this['logger'][_0x2ca7fb(0x4b3)](this[_0x2ca7fb(0x78b)]+'\x20('+this[_0x2ca7fb(0x799)][_0x2ca7fb(0x3cb)]+_0x2ca7fb(0x433)+_0x38ed65),new j(_0x38ed65);}}async[a0_0x3f352e(0xdb)](_0x3f7998){const _0x366081=a0_0x3f352e;try{return await this[_0x366081(0x3de)]['groupLeave'](_0x3f7998[_0x366081(0x7df)]),{'groupJid':_0x3f7998[_0x366081(0x7df)],'leave':!0x0};}catch(_0xec4b3){let _0xa670e6=_0x366081(0x3df),_0x358050=_0xec4b3 instanceof Error?_0xec4b3[_0x366081(0x499)]:typeof _0xec4b3==_0x366081(0x5a0)?JSON['stringify'](_0xec4b3):_0xec4b3,_0x3e7a79=_0xa670e6+':\x20'+_0x358050;throw this[_0x366081(0x112)][_0x366081(0x4b3)](this['instanceName']+'\x20('+this['instance'][_0x366081(0x3cb)]+_0x366081(0x433)+_0x3e7a79),new m(_0x3e7a79);}}async[a0_0x3f352e(0xe4)](_0x508521){const _0x470699=a0_0x3f352e;return await this[_0x470699(0x128)](_0x508521[_0x470699(0x596)],{'poll':{'name':_0x508521[_0x470699(0xe4)]?.[_0x470699(0x5f4)],'selectableCount':_0x508521[_0x470699(0xe4)][_0x470699(0x2a0)],'values':_0x508521[_0x470699(0xe4)][_0x470699(0x514)]}},_0x508521?.['options']);}async[a0_0x3f352e(0x6cf)](_0x107015){const _0x5ed310=a0_0x3f352e;return await this[_0x5ed310(0x128)](_0x107015[_0x5ed310(0x596)],{'listMessage':{'title':_0x107015[_0x5ed310(0x6cf)][_0x5ed310(0x2dc)],'description':_0x107015[_0x5ed310(0x6cf)][_0x5ed310(0x131)],'buttonText':_0x107015[_0x5ed310(0x6cf)]?.[_0x5ed310(0x6ce)],'footerText':_0x107015[_0x5ed310(0x6cf)]?.['footerText'],'sections':_0x107015[_0x5ed310(0x6cf)][_0x5ed310(0x1b2)],'listType':0x2}},_0x107015?.[_0x5ed310(0x40d)]);}async[a0_0x3f352e(0x717)](_0x8a3fc9){const _0x187409=a0_0x3f352e;let _0xf83916;if(_0x8a3fc9[_0x187409(0x717)][_0x187409(0x6d7)]===_0x187409(0x7b6)){let _0x44e02f=_0x8a3fc9[_0x187409(0x717)][_0x187409(0x21b)][_0x187409(0x368)]('\x0a'),_0x54e26a='',_0x5ee47b='';_0x44e02f!==-0x1?(_0x54e26a=_0x8a3fc9[_0x187409(0x717)][_0x187409(0x21b)]['substring'](0x0,_0x44e02f)[_0x187409(0x1e6)](),_0x5ee47b=_0x8a3fc9['menuMessage'][_0x187409(0x21b)][_0x187409(0x7a2)](_0x44e02f+0x1)):_0x5ee47b=_0x8a3fc9[_0x187409(0x717)][_0x187409(0x21b)];let _0x391fd7=_0x8a3fc9[_0x187409(0x717)]['choices']['filter'](_0x505556=>_0x505556[_0x187409(0x1e6)]()!==''),_0x3f04bc=this['createSectionsFromValues'](_0x391fd7);_0xf83916={'listMessage':{'title':_0x54e26a,'description':_0x5ee47b,'buttonText':_0x8a3fc9[_0x187409(0x717)][_0x187409(0x6ce)]||'Selecione','footerText':_0x8a3fc9[_0x187409(0x717)][_0x187409(0x656)],'sections':_0x3f04bc,'listType':0x2}};}else{if(_0x8a3fc9[_0x187409(0x717)][_0x187409(0x6d7)]===_0x187409(0x28e)){let _0x5b5c68=_0x8a3fc9['menuMessage'][_0x187409(0x4e3)][_0x187409(0x495)](_0x45f60d=>!(_0x45f60d['startsWith']('[')&&_0x45f60d[_0x187409(0x3ff)](']'))&&_0x45f60d[_0x187409(0x1e6)]()!=='')[_0x187409(0xff)](_0x38e03c=>_0x38e03c[_0x187409(0x384)]('\x0a')[0x0]);_0xf83916={'poll':{'name':_0x8a3fc9['menuMessage'][_0x187409(0x21b)],'selectableCount':_0x8a3fc9[_0x187409(0x717)]['selectableCount']||0x1,'values':_0x5b5c68}};}}return await this[_0x187409(0x128)](_0x8a3fc9[_0x187409(0x596)],_0xf83916,_0x8a3fc9?.[_0x187409(0x40d)]);}[a0_0x3f352e(0xc5)](_0xca747f){const _0x1a643f=a0_0x3f352e;let _0x428437=[],_0x284fce={'rows':[]};return _0xca747f[_0x1a643f(0x62c)](_0x113379=>{const _0x1fbae5=_0x1a643f;if(_0x113379[_0x1fbae5(0x77f)]('[')&&_0x113379[_0x1fbae5(0x3ff)](']'))_0x284fce[_0x1fbae5(0x15a)][_0x1fbae5(0x45c)]>0x0&&_0x428437['push'](_0x284fce),_0x284fce={'title':_0x113379['slice'](0x1,-0x1),'rows':[]};else{let _0x1f1bea=_0x113379[_0x1fbae5(0x384)]('\x0a')[_0x1fbae5(0xff)](_0x3a759c=>_0x3a759c[_0x1fbae5(0x1e6)]()),_0x427fd0=_0x1f1bea[0x0],_0x42f208=_0x1f1bea[0x1]||null,_0x43600a=_0x1f1bea[0x2]||_0x427fd0;_0x284fce[_0x1fbae5(0x15a)][_0x1fbae5(0x5ea)]({'title':_0x427fd0,'description':_0x42f208,'rowId':_0x43600a});}}),_0x284fce[_0x1a643f(0x15a)][_0x1a643f(0x45c)]>0x0&&_0x428437[_0x1a643f(0x5ea)](_0x284fce),_0x428437;}async[a0_0x3f352e(0xfb)](_0x3706bf,_0x50bb12){const _0x2025b4=a0_0x3f352e;if(await this['getMessage'](_0x3706bf,!0x0)){let _0x1b85b4={'where':{'_id':_0x3706bf['id']}},_0x5959be={'status':[_0x50bb12[_0x2025b4(0x62a)]][0x0]};try{let _0x36922f=await this['repository']['message']['update'](_0x1b85b4,_0x5959be,this[_0x2025b4(0x799)][_0x2025b4(0x3cb)]);_0x36922f&&J(this['instanceName'],_0x2025b4(0x1a8),{'message':_0x36922f});}catch{}}}[a0_0x3f352e(0x27a)](_0x1ff787){const _0x316d12=a0_0x3f352e;let _0x559b7f=[];return _0x1ff787[_0x316d12(0x62c)](_0x4c8715=>{const _0x40ef3a=_0x316d12;_0x4c8715[_0x40ef3a(0x2dc)]&&_0x559b7f['push']('['+_0x4c8715[_0x40ef3a(0x2dc)]+']'),_0x4c8715[_0x40ef3a(0x15a)][_0x40ef3a(0x62c)](_0x256f6e=>{const _0x4ead21=_0x40ef3a;_0x559b7f[_0x4ead21(0x5ea)](_0x256f6e[_0x4ead21(0x2dc)]);});}),_0x559b7f[_0x316d12(0x348)]('|');}[a0_0x3f352e(0x639)](_0x2d1914){const _0x23902b=a0_0x3f352e;let _0x284604=_0x2d1914['replace'](/\\n/g,'\x0a')[_0x23902b(0x384)]('\x0a')[_0x23902b(0x495)](_0x160696=>_0x160696[_0x23902b(0x2bf)]('TEL')||_0x160696['includes'](_0x23902b(0x7c3))),_0x518fb1='';return _0x284604['forEach'](_0x3fa48f=>{const _0x129761=_0x23902b;let _0x4b9ccd=/TEL(?:.*):(.+)/,_0x4d70ad=/EMAIL(?:.*):(.+)/,_0x512b1e=_0x3fa48f['match'](_0x4b9ccd),_0x5b0a38=_0x3fa48f[_0x129761(0x235)](_0x4d70ad);if(_0x512b1e){let _0x291f5a=_0x512b1e[0x1]['replace'](/-| |\+|\(|\)/g,'')[_0x129761(0x1e6)]();_0x518fb1+=_0x129761(0x3cc)+_0x291f5a+'\x0a';}else{if(_0x5b0a38){let _0x3d28f4=_0x5b0a38[0x1][_0x129761(0x1e6)]();_0x518fb1+=_0x129761(0x418)+_0x3d28f4+'\x0a';}}}),_0x518fb1[_0x23902b(0x1e6)]();}async[a0_0x3f352e(0x473)](_0x217982,_0x414732,_0x405241,_0x34ecb4=null){const _0x5c577a=a0_0x3f352e;if(_0x217982[_0x5c577a(0x681)])try{let _0x4bcc92=_0x414732['key'][_0x5c577a(0x183)]['replace'](/:\d{1,2}@/g,'@'),_0x26aa82=_0x414732[_0x5c577a(0x2bb)]['fromMe'],_0x468a23=_0x4bcc92['endsWith'](_0x5c577a(0x4d5)),_0x5b57a9=_0x414732[_0x5c577a(0x169)]?.[_0x5c577a(0x166)](/:\d{1,2}@/g,'@')||'',_0x192cea=_0x414732[_0x5c577a(0x647)]?.[_0x5c577a(0x21b)]||_0x414732[_0x5c577a(0x647)]?.[_0x5c577a(0x2ae)]||_0x414732[_0x5c577a(0x647)]?.[_0x5c577a(0x4c1)]||_0x414732[_0x5c577a(0x647)]?.['name']||'',_0x473c0f={'_id':_0x414732[_0x5c577a(0x68d)],'remoteJid':_0x26aa82?this['instance'][_0x5c577a(0x3cb)]:_0x468a23?_0x5b57a9:_0x4bcc92,'pushName':_0x26aa82?this[_0x5c577a(0x799)][_0x5c577a(0x35a)]||'Eu':_0x414732[_0x5c577a(0x22a)],'text':_0x192cea,'type':_0x414732[_0x5c577a(0x550)],'when':_0x414732[_0x5c577a(0x43d)]||Date[_0x5c577a(0x196)]()};_0x34ecb4||(_0x34ecb4=await this[_0x5c577a(0x7be)][_0x5c577a(0x629)][_0x5c577a(0x312)]({'where':{'_id':_0x4bcc92}},this[_0x5c577a(0x799)][_0x5c577a(0x3cb)]));let _0x5a959b=_0x34ecb4?_0x26aa82?_0x34ecb4[_0x5c577a(0x7d2)]:(_0x34ecb4[_0x5c577a(0x7d2)]||0x0)+0x1:_0x26aa82?0x0:0x1,_0x19a4d9={'lastmsg':_0x414732[_0x5c577a(0x43d)]||Date[_0x5c577a(0x196)](),'ephemeralExpiration':_0x414732['expiration'],'lastMessage':_0x473c0f,'unreadcount':_0x5a959b,..._0x26aa82||_0x468a23?{}:{'name':_0x414732[_0x5c577a(0x22a)]},..._0x468a23?{'group':_0x468a23}:{},...!_0x26aa82&&!_0x468a23&&_0x414732['profilePictureUrl']?{'imagechat':_0x414732[_0x5c577a(0x700)]}:{}};if(!_0x468a23&&(!_0x34ecb4?.[_0x5c577a(0x704)]||!_0x34ecb4[_0x5c577a(0x704)][_0x5c577a(0x544)])&&_0x414732[_0x5c577a(0x22a)]&&!_0x26aa82&&(_0x19a4d9={..._0x19a4d9,'leadInfo.nome':_0x414732[_0x5c577a(0x22a)]}),_0x34ecb4?.[_0x5c577a(0x704)][_0x5c577a(0x612)]||(_0x19a4d9={..._0x19a4d9,'leadInfo.etiquetas':[]}),_0x34ecb4?.[_0x5c577a(0x704)][_0x5c577a(0x6e8)]||(_0x19a4d9={..._0x19a4d9,'leadInfo.customFields':[]}),_0x34ecb4?.[_0x5c577a(0x704)][_0x5c577a(0x3e3)]||(_0x19a4d9={..._0x19a4d9,'leadInfo.tags':[]}),_0x34ecb4&&_0x34ecb4?.[_0x5c577a(0x36b)]){let _0x446d8a=await this['repository'][_0x5c577a(0x716)][_0x5c577a(0x71f)]({'where':{}},this['instance']['wuid']),_0xd04107=new Set(_0x446d8a[_0x5c577a(0xff)](_0x2c123d=>_0x2c123d[_0x5c577a(0x68d)])),_0x1433dc=(_0x34ecb4[_0x5c577a(0x704)]?.[_0x5c577a(0x612)]||[])['filter'](_0x44698f=>_0xd04107[_0x5c577a(0x4e1)](_0x44698f));_0x19a4d9={..._0x19a4d9,'imported':!0x1,'leadInfo.etiquetas':_0x1433dc};for(let _0x22338c of _0x1433dc)await this[_0x5c577a(0x258)](_0x22338c,_0x4bcc92);}if(!this['AutomateSystem']['flows']['find'](_0x2b75f9=>_0x2b75f9[_0x5c577a(0x726)]&&_0x192cea[_0x5c577a(0x2bf)](_0x2b75f9[_0x5c577a(0x726)]))&&_0x405241===_0x5c577a(0x451)&&_0x26aa82&&this[_0x5c577a(0x2f7)]?.[_0x5c577a(0x22d)][_0x5c577a(0x167)]&&_0x192cea[_0x5c577a(0x1e6)]()!==this[_0x5c577a(0x2f7)]?.[_0x5c577a(0x22d)][_0x5c577a(0x409)]['trim']()){let _0x3170d1=(this[_0x5c577a(0x2f7)]?.[_0x5c577a(0x22d)][_0x5c577a(0x4ff)]||0x0)*0xea60,_0x58da90=Date[_0x5c577a(0x196)]()+_0x3170d1;_0x34ecb4?.[_0x5c577a(0x704)]?.[_0x5c577a(0x2f8)]===0x0||(_0x19a4d9={..._0x19a4d9,'leadInfo.desativadoFluxoAte':_0x58da90},this[_0x5c577a(0x112)][_0x5c577a(0x72d)](this['instanceName']+'\x20('+this[_0x5c577a(0x799)][_0x5c577a(0x3cb)]+_0x5c577a(0x2a1)+_0x58da90+'.'));}if(_0x192cea[_0x5c577a(0x1e6)]()===this['AutomateSystem']?.[_0x5c577a(0x22d)][_0x5c577a(0x409)]['trim']()){this[_0x5c577a(0x112)][_0x5c577a(0x72d)](this['instanceName']+'\x20('+this[_0x5c577a(0x799)][_0x5c577a(0x3cb)]+_0x5c577a(0x24b)+_0x192cea);let _0xb3c1e0=Date[_0x5c577a(0x196)]();this[_0x5c577a(0x2f7)]?.[_0x5c577a(0x22d)][_0x5c577a(0x6ae)]===0x0?_0x19a4d9={..._0x19a4d9,'leadInfo.desativadoFluxoAte':_0xb3c1e0+0x7591f6200}:_0x19a4d9={..._0x19a4d9,'leadInfo.desativadoFluxoAte':_0xb3c1e0+this['AutomateSystem']?.['flowConfig']['stopMinutes']*0x3c*0x3e8};}if(_0x34ecb4=await this[_0x5c577a(0x7be)][_0x5c577a(0x629)][_0x5c577a(0x372)]({'where':{'_id':_0x4bcc92}},_0x19a4d9,this[_0x5c577a(0x799)][_0x5c577a(0x3cb)],{'new':!0x0,'upsert':!0x0}),_0x34ecb4)J(this[_0x5c577a(0x78b)],_0x5c577a(0x725),{'chat':_0x34ecb4});else{this[_0x5c577a(0x112)][_0x5c577a(0x4b3)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x5c577a(0x1f9));return;}if(_0x26aa82)return this[_0x5c577a(0x112)][_0x5c577a(0x72d)](this[_0x5c577a(0x78b)]+'\x20('+this[_0x5c577a(0x799)]['wuid']+_0x5c577a(0x57a)),null;if(!this[_0x5c577a(0x2f7)]?.[_0x5c577a(0x22d)]['enabled'])return this[_0x5c577a(0x112)][_0x5c577a(0x72d)](this['instanceName']+'\x20('+this['instance'][_0x5c577a(0x3cb)]+_0x5c577a(0x7ca)),null;if(_0x34ecb4['_id'][_0x5c577a(0x2bf)](_0x5c577a(0x4d5))&&this['AutomateSystem']?.[_0x5c577a(0x22d)][_0x5c577a(0x29d)]===!0x0)return this[_0x5c577a(0x112)]['verbose'](this[_0x5c577a(0x78b)]+'\x20('+this['instance'][_0x5c577a(0x3cb)]+_0x5c577a(0x353)),null;if(_0x34ecb4[_0x5c577a(0x704)]){if(_0x34ecb4['leadInfo'][_0x5c577a(0x2f8)]===0x0||_0x34ecb4[_0x5c577a(0x704)][_0x5c577a(0x16d)])return this[_0x5c577a(0x112)][_0x5c577a(0x72d)](this[_0x5c577a(0x78b)]+'\x20('+this[_0x5c577a(0x799)][_0x5c577a(0x3cb)]+_0x5c577a(0x3fa)+_0x4bcc92+_0x5c577a(0x665)),null;if(_0x34ecb4[_0x5c577a(0x704)][_0x5c577a(0x2f8)]>Date[_0x5c577a(0x196)]()&&!_0x414732[_0x5c577a(0x647)]?.[_0x5c577a(0x4c1)])return this[_0x5c577a(0x112)][_0x5c577a(0x72d)](this[_0x5c577a(0x78b)]+'\x20('+this[_0x5c577a(0x799)][_0x5c577a(0x3cb)]+_0x5c577a(0x239)+new Date(_0x34ecb4[_0x5c577a(0x704)][_0x5c577a(0x2f8)])[_0x5c577a(0x7d6)]()+_0x5c577a(0x665)),null;}this['logger'][_0x5c577a(0x72d)](this[_0x5c577a(0x78b)]+'\x20('+this[_0x5c577a(0x799)]['wuid']+'):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações'),this[_0x5c577a(0x5ab)](_0x414732,_0x405241);}catch(_0x5e6ff8){let _0x4418da='Erro\x20na\x20função\x20updateChatWithMessage:\x20',_0x181637=_0x5e6ff8 instanceof Error?_0x5e6ff8[_0x5c577a(0x499)]:typeof _0x5e6ff8==_0x5c577a(0x5a0)?JSON[_0x5c577a(0x1bb)](_0x5e6ff8):_0x5e6ff8,_0x3d45a8=_0x4418da+':\x20'+_0x181637;return this[_0x5c577a(0x112)]['error'](this[_0x5c577a(0x78b)]+'\x20('+this[_0x5c577a(0x799)]['wuid']+_0x5c577a(0x433)+_0x3d45a8),null;}}async['upsertChats'](_0x47e0a0,_0x3f9d0b){const _0x28b6af=a0_0x3f352e;if(_0x3f9d0b['ENABLED']){let _0x4538f5=_0x47e0a0[_0x28b6af(0xff)](async _0x1de0af=>{const _0x375381=_0x28b6af;try{let _0x578ba4={'_id':_0x1de0af['_id'],'owner':_0x1de0af['owner'],'lastcache':0x0};if(Object['keys'](_0x1de0af)[_0x375381(0x62c)](_0xc1b27c=>{_0x1de0af[_0xc1b27c]!==null&&(_0x578ba4[_0xc1b27c]=_0x1de0af[_0xc1b27c]);}),_0x578ba4[_0x375381(0x531)]===null&&(_0x578ba4[_0x375381(0x531)]=_0x375381(0x1ef)),Object[_0x375381(0x75c)](_0x578ba4)[_0x375381(0x45c)]>0x0)return await this['repository'][_0x375381(0x629)][_0x375381(0x372)]({'where':{'_id':_0x1de0af['_id']}},_0x578ba4,this[_0x375381(0x799)][_0x375381(0x3cb)]);}catch(_0x14734a){let _0x125a81=_0x375381(0x607)+_0x1de0af[_0x375381(0x68d)],_0x543809=_0x14734a instanceof Error?_0x14734a[_0x375381(0x499)]:typeof _0x14734a=='object'?JSON[_0x375381(0x1bb)](_0x14734a):_0x14734a,_0x1de0b8=_0x125a81+':\x20'+_0x543809;return this['logger'][_0x375381(0x4b3)](this['instanceName']+'\x20('+this[_0x375381(0x799)][_0x375381(0x3cb)]+_0x375381(0x433)+_0x1de0b8),null;}}),_0x18c786=(await Promise['all'](_0x4538f5))[_0x28b6af(0x495)](_0x167780=>_0x167780!==null)[_0x28b6af(0x45c)];this[_0x28b6af(0x112)]['verbose'](this[_0x28b6af(0x78b)]+'\x20('+this[_0x28b6af(0x799)][_0x28b6af(0x3cb)]+_0x28b6af(0x433)+_0x18c786+'\x20chats\x20de\x20'+this[_0x28b6af(0x799)][_0x28b6af(0x3cb)]+_0x28b6af(0x747));}}async[a0_0x3f352e(0x45e)](_0x12d48f){const _0x41dee3=a0_0x3f352e;this[_0x41dee3(0x112)]['verbose'](this[_0x41dee3(0x78b)]+'\x20('+this['instance'][_0x41dee3(0x3cb)]+_0x41dee3(0x3af));let _0x33b0ae={'readMessages':[{'remoteJid':_0x12d48f['chatLog'][_0x41dee3(0x159)][_0x41dee3(0x2bb)][_0x41dee3(0x183)],'fromMe':_0x12d48f[_0x41dee3(0x135)]['lastReceivedMessage'][_0x41dee3(0x2bb)][_0x41dee3(0x5cf)],'id':_0x12d48f[_0x41dee3(0x135)]['lastReceivedMessage'][_0x41dee3(0x2bb)]['id']}]};await this[_0x41dee3(0x5bf)](_0x33b0ae);}async[a0_0x3f352e(0x5ab)](_0x3d7274,_0x3c6ddb){const _0x444e4e=a0_0x3f352e;try{let {key:_0x2953f6,message_normalized:_0x33911f}=_0x3d7274,_0x12506=_0x33911f,_0xd2ef1e=_0x33911f[_0x444e4e(0x21b)]||_0x33911f[_0x444e4e(0x2ae)]||_0x33911f['vote']||_0x33911f[_0x444e4e(0x5f4)]||'',_0x4ecf68=_0x2953f6[_0x444e4e(0x183)],_0x22e200=null,_0x1121db=this['AutomateSystem'][_0x444e4e(0x334)][_0x444e4e(0x71f)](_0x408220=>_0x408220[_0x444e4e(0x726)]&&_0xd2ef1e['includes'](_0x408220['startCommand']));if(_0x1121db&&_0x3c6ddb===_0x444e4e(0x451)){let _0x397c70=await this['repository'][_0x444e4e(0x2b2)][_0x444e4e(0x312)]({'where':{'_id':_0x1121db[_0x444e4e(0x68d)]}});if(this[_0x444e4e(0x112)]['verbose'](this[_0x444e4e(0x78b)]+'\x20('+this[_0x444e4e(0x799)]['wuid']+_0x444e4e(0x708)),_0x397c70&&_0x397c70[_0x444e4e(0x385)]?.['includes'](this['instance'][_0x444e4e(0x3cb)]))_0x22e200=await this[_0x444e4e(0x786)](_0x397c70,_0x2953f6,_0x12506);else return this[_0x444e4e(0x112)][_0x444e4e(0x72d)](this[_0x444e4e(0x78b)]+'\x20('+this[_0x444e4e(0x799)]['wuid']+_0x444e4e(0x3e6)),null;}else this['logger'][_0x444e4e(0x72d)](this['instanceName']+'\x20('+this['instance'][_0x444e4e(0x3cb)]+_0x444e4e(0x6ca));if(_0x22e200=await this[_0x444e4e(0x30c)](_0x4ecf68,_0x12506),_0x22e200){this[_0x444e4e(0x112)][_0x444e4e(0x72d)](this['instanceName']+'\x20('+this[_0x444e4e(0x799)]['wuid']+_0x444e4e(0x226)),!_0x2953f6['fromMe']&&_0x22e200['readMessages']&&this[_0x444e4e(0x45e)](_0x22e200);let _0x57f9fa=await this[_0x444e4e(0x743)](_0x22e200);_0x57f9fa&&await this['processblock'](_0x22e200,_0x57f9fa);}}catch(_0x194a81){this['logger'][_0x444e4e(0x4b3)](this[_0x444e4e(0x78b)]+'\x20('+this[_0x444e4e(0x799)][_0x444e4e(0x3cb)]+_0x444e4e(0x364)+(_0x194a81 instanceof Error?_0x194a81['message']:JSON[_0x444e4e(0x1bb)](_0x194a81,null,0x2)));}}['flattenObject'](_0x47f510,_0x4ac6bc='',_0x517fda={}){const _0x25bcba=a0_0x3f352e;return typeof _0x47f510!=_0x25bcba(0x5a0)||_0x47f510===null?(_0x4ac6bc&&(_0x517fda[_0x4ac6bc]=_0x47f510),_0x517fda):(Object[_0x25bcba(0x37b)](_0x47f510)[_0x25bcba(0x62c)](([_0x3edfc6,_0x2905e4])=>{const _0x3fec97=_0x25bcba;let _0x2d96bb=_0x4ac6bc?_0x4ac6bc+'.'+_0x3edfc6:'_'+_0x3edfc6;Array['isArray'](_0x2905e4)?_0x2905e4[_0x3fec97(0x62c)]((_0x5f5a4f,_0x3b2a24)=>{const _0x3d8017=_0x3fec97;this[_0x3d8017(0x740)](_0x5f5a4f,_0x2d96bb+'['+_0x3b2a24+']',_0x517fda);}):typeof _0x2905e4=='object'&&_0x2905e4!==null?this['flattenObject'](_0x2905e4,_0x2d96bb,_0x517fda):_0x517fda[_0x2d96bb]=String(_0x2905e4);}),_0x517fda);}[a0_0x3f352e(0x457)](_0x51966d){const _0x3f63d5=a0_0x3f352e;let _0x4c548e={};for(let _0x49152d of _0x51966d)typeof _0x49152d['name']=='string'&&typeof _0x49152d['value']==_0x3f63d5(0x6e4)&&(_0x4c548e[_0x49152d['name']]=_0x49152d[_0x3f63d5(0x242)]);return _0x4c548e;}async[a0_0x3f352e(0x743)](_0x6aae51){const _0x4014bc=a0_0x3f352e;if(!this[_0x4014bc(0x2f7)]?.['flowConfig'][_0x4014bc(0x167)]||_0x6aae51[_0x4014bc(0x62a)]!==_0x4014bc(0x6d3)&&_0x6aae51[_0x4014bc(0x371)]==='')return null;let _0x532a48=_0x6aae51['chatLog'][_0x4014bc(0x195)]||_0x4014bc(0x691);typeof _0x6aae51[_0x4014bc(0x135)][_0x4014bc(0x1ba)]>'u'&&(_0x6aae51[_0x4014bc(0x135)]['lastCondition']=!0x0);let _0x3d9346=_0x6aae51[_0x4014bc(0x135)][_0x4014bc(0x1ba)];this[_0x4014bc(0x112)][_0x4014bc(0x72d)](this[_0x4014bc(0x78b)]+'\x20('+this[_0x4014bc(0x799)][_0x4014bc(0x3cb)]+'):\x20lastBlockId:\x20'+_0x532a48+_0x4014bc(0x762)+_0x3d9346);let _0x5d5697=_0x532a48===_0x4014bc(0x691)?_0x6aae51[_0x4014bc(0x357)][_0x4014bc(0x71f)](_0x5136d6=>_0x5136d6[_0x4014bc(0x6d7)]===_0x4014bc(0x691)):_0x6aae51[_0x4014bc(0x357)][_0x4014bc(0x71f)](_0x33cabd=>_0x33cabd[_0x4014bc(0x68d)]['toString']()===_0x532a48[_0x4014bc(0x123)]());if(!_0x5d5697)return this[_0x4014bc(0x112)][_0x4014bc(0x4b3)](this[_0x4014bc(0x78b)]+'\x20('+this[_0x4014bc(0x799)][_0x4014bc(0x3cb)]+_0x4014bc(0x275)+_0x532a48),null;let _0x3cb8bd={'_pushName':_0x6aae51?.[_0x4014bc(0x135)]?.[_0x4014bc(0x159)]?.[_0x4014bc(0x22a)]||'','_sender':this['instance'][_0x4014bc(0x3cb)]||'',..._0x6aae51[_0x4014bc(0x135)]['realVariables']},_0x4fffa4=null;if(_0x6aae51['waitingMenu_id']){let _0x298f03=_0x6aae51[_0x4014bc(0x135)][_0x4014bc(0x159)][_0x4014bc(0x4c1)],_0x44bfa0=_0x6aae51[_0x4014bc(0x23f)][_0x4014bc(0x71f)](_0x45528a=>_0x45528a[_0x4014bc(0x533)]===_0x298f03);if(_0x44bfa0){let _0x30d286=_0x44bfa0[_0x4014bc(0x769)];if(_0x4fffa4=_0x6aae51['blocks'][_0x4014bc(0x71f)](_0x59e765=>_0x59e765[_0x4014bc(0x2af)]===_0x30d286&&_0x59e765['order']===0x1),_0x5d5697['uazapi']['pollOnReplyDelete']){let _0xd58c24={'id':_0x6aae51[_0x4014bc(0x371)],'remoteJid':_0x6aae51[_0x4014bc(0x183)],'fromMe':!0x0};await this[_0x4014bc(0x3b8)](_0xd58c24);}if(_0x5d5697['uazapi'][_0x4014bc(0x350)]&&_0x5d5697[_0x4014bc(0x7e9)]['pollMessageOnDelete']&&_0x5d5697[_0x4014bc(0x7e9)][_0x4014bc(0x267)]===_0x4014bc(0x28e)){let _0x3cd848={'number':_0x6aae51[_0x4014bc(0x183)],'options':{'delay':0x0},'textMessage':{'text':_0x4014bc(0x5bd)+_0x6aae51[_0x4014bc(0x4d0)]+_0x4014bc(0x3b5)+_0x298f03}};await this[_0x4014bc(0x197)](_0x3cd848);}_0x6aae51[_0x4014bc(0x62a)]=_0x4014bc(0x6d3),_0x6aae51[_0x4014bc(0x371)]='',_0x6aae51['waitingMenu_text']='',_0x6aae51[_0x4014bc(0x23f)]=[];}else{this['logger'][_0x4014bc(0x72d)](this[_0x4014bc(0x78b)]+'\x20('+this[_0x4014bc(0x799)]['wuid']+_0x4014bc(0x290));let _0x32a12d={'activatedCount':_0x6aae51['chatLog'][_0x4014bc(0x469)][_0x4014bc(0x495)](_0xefe547=>String(_0xefe547[_0x4014bc(0x4fc)])===String(_0x532a48))['length'],'moreLogs':[_0x4014bc(0x228)]};if(_0x5d5697[_0x4014bc(0x7e9)]['pollErrorMessage']){let _0x197c98={'number':_0x6aae51[_0x4014bc(0x183)],'options':{'delay':0x0},'textMessage':{'text':_0x5d5697[_0x4014bc(0x7e9)][_0x4014bc(0x670)]}};await this[_0x4014bc(0x197)](_0x197c98);}if(_0x5d5697[_0x4014bc(0x347)]!==void 0x0&&_0x32a12d[_0x4014bc(0x5b6)]>=_0x5d5697['maxActives']){let _0x3b5ff8=Date['now'](),_0xfedc72=_0x5d5697[_0x4014bc(0x1dd)]??0xa;isNaN(_0xfedc72)&&(_0xfedc72=0xa);let _0x445cfd=_0x3b5ff8+_0xfedc72*0x3c*0x3e8;_0x32a12d[_0x4014bc(0x6b4)]=_0x445cfd,_0x32a12d[_0x4014bc(0x671)][_0x4014bc(0x5ea)](_0x4014bc(0x217)),this['updateStopChat'](_0x6aae51,_0x445cfd),_0x6aae51[_0x4014bc(0x371)]='',_0x6aae51[_0x4014bc(0x4d0)]='',_0x6aae51[_0x4014bc(0x23f)]=[];}return this['updateConversation'](_0x6aae51,_0x5d5697,_0x32a12d,!0x0),null;}}if(_0x3d9346&&_0x5d5697[_0x4014bc(0x769)]&&!_0x6aae51[_0x4014bc(0x371)]){let _0x4227aa=_0x6aae51[_0x4014bc(0x357)][_0x4014bc(0x495)](_0x350793=>_0x350793['groupId']['toString']()===_0x5d5697[_0x4014bc(0x769)]['toString']())[_0x4014bc(0x344)]((_0x3b920d,_0x87b290)=>_0x3b920d['order']-_0x87b290[_0x4014bc(0x6ab)]);_0x4227aa[_0x4014bc(0x45c)]>0x0&&(_0x4fffa4=_0x4227aa[0x0]);}if(!_0x4fffa4){let _0x29e42e=_0x5d5697['groupId'],_0xdce72b=_0x6aae51[_0x4014bc(0x357)][_0x4014bc(0x495)](_0x29fb17=>_0x29fb17['groupId']===_0x29e42e&&_0x29fb17[_0x4014bc(0x6ab)]>_0x5d5697[_0x4014bc(0x6ab)])[_0x4014bc(0x344)]((_0x173c00,_0x155adb)=>_0x173c00['order']-_0x155adb[_0x4014bc(0x6ab)]);_0xdce72b['length']>0x0&&(_0x4fffa4=_0xdce72b[0x0]);}if(!_0x4fffa4)return _0x6aae51[_0x4014bc(0x62a)]='closed',null;_0x6aae51[_0x4014bc(0x135)]['realVariables']=_0x3cb8bd;let _0x351001=JSON[_0x4014bc(0x4d4)](JSON['stringify'](_0x4fffa4));return this[_0x4014bc(0x280)](_0x351001,_0x6aae51[_0x4014bc(0x135)][_0x4014bc(0x15e)]),_0x6aae51[_0x4014bc(0x135)][_0x4014bc(0x195)]=_0x351001[_0x4014bc(0x68d)],_0x6aae51[_0x4014bc(0x135)]['lastCondition']=!0x0,_0x351001;}[a0_0x3f352e(0x543)](_0x4d04e7,_0x4ce04f){const _0x38d58e=a0_0x3f352e;return _0x4d04e7[_0x38d58e(0x166)](/\{\{([^}]+)\}\}/g,(_0x3b3a1f,_0x35784c)=>_0x4ce04f[_0x35784c]||'');}['replaceVariablesInObject'](_0x21f4a4,_0x47277a){const _0x3bba46=a0_0x3f352e;for(let _0x2c2e22 in _0x21f4a4)typeof _0x21f4a4[_0x2c2e22]==_0x3bba46(0x6e4)?_0x21f4a4[_0x2c2e22]=this[_0x3bba46(0x543)](_0x21f4a4[_0x2c2e22],_0x47277a):typeof _0x21f4a4[_0x2c2e22]==_0x3bba46(0x5a0)&&this[_0x3bba46(0x280)](_0x21f4a4[_0x2c2e22],_0x47277a);}async[a0_0x3f352e(0x6c7)](_0x454c09,_0x572581){const _0xc46406=a0_0x3f352e;let _0x249b4f=_0x572581[_0xc46406(0x68d)];if(_0x454c09[_0xc46406(0x135)]&&_0x454c09['chatLog'][_0xc46406(0x469)]){let _0x507651=_0x454c09[_0xc46406(0x135)][_0xc46406(0x469)][_0xc46406(0x495)](_0x5864e5=>String(_0x5864e5[_0xc46406(0x4fc)])===String(_0x249b4f))[_0xc46406(0x289)]();if(_0x507651&&_0x507651[_0xc46406(0x4b3)]&&_0x572581[_0xc46406(0x206)])return _0x454c09['status']='closed',await this[_0xc46406(0x20b)](_0x454c09),null;}if(_0x572581[_0xc46406(0x6d7)]===_0xc46406(0x7e9)&&_0x572581[_0xc46406(0x7e9)]['command']===_0xc46406(0x34d)&&_0x454c09[_0xc46406(0x371)])return _0x454c09['chatLog'][_0xc46406(0x195)]=_0x249b4f,await this[_0xc46406(0x20b)](_0x454c09),null;let _0xfc5ec6=await this[_0xc46406(0x743)](_0x454c09);if(_0x454c09[_0xc46406(0x135)]&&_0x454c09[_0xc46406(0x135)]['blockLogs']){let _0xe0951c=_0x454c09[_0xc46406(0x135)][_0xc46406(0x469)][_0xc46406(0x495)](_0x1690c7=>String(_0x1690c7[_0xc46406(0x4fc)])===String(_0x249b4f))['length'];if(_0x572581[_0xc46406(0x347)]!==void 0x0&&_0xe0951c>=_0x572581[_0xc46406(0x347)]){let _0x32f914=Date['now'](),_0x5c9cdc=_0x572581['stopMinutesMaxActives']??0xa;isNaN(_0x5c9cdc)&&(_0x5c9cdc=0xa);let _0x2aabae=_0x32f914+_0x5c9cdc*0x3c*0x3e8,_0x254cdd={'newStoppedUntil':_0x2aabae};return this[_0xc46406(0x18d)](_0x454c09,_0x2aabae),this[_0xc46406(0x270)](_0x454c09,_0x572581,_0x254cdd,!0x0),null;}}_0xfc5ec6&&_0xfc5ec6['type']!==_0xc46406(0x5b5)&&await this[_0xc46406(0x137)](_0x454c09,_0xfc5ec6),_0xfc5ec6||await this['saveConversationToDatabase'](_0x454c09),_0xfc5ec6&&_0xfc5ec6[_0xc46406(0x6d7)]==='save'&&(_0x454c09[_0xc46406(0x135)][_0xc46406(0x195)]=_0x249b4f,await this[_0xc46406(0x20b)](_0x454c09));}async[a0_0x3f352e(0x137)](_0x16c023,_0x138a93){const _0x1aa7ac=a0_0x3f352e;try{let _0x2babe6=_0x138a93[_0x1aa7ac(0x6d7)];this['logger'][_0x1aa7ac(0x72d)](this[_0x1aa7ac(0x78b)]+'\x20('+this[_0x1aa7ac(0x799)][_0x1aa7ac(0x3cb)]+_0x1aa7ac(0xe7)+_0x2babe6);let _0x444905={'uazapi':()=>this['processUazapi'](_0x16c023,_0x138a93),'save':()=>this[_0x1aa7ac(0x2ac)](_0x16c023,_0x138a93),'stop':()=>this['stopConversation'](_0x16c023,_0x138a93),'condition':()=>this['processConditions'](_0x16c023,_0x138a93),'varedit':()=>this['processvaredits'](_0x16c023,_0x138a93),'apirequest':()=>this[_0x1aa7ac(0x18e)](_0x16c023,_0x138a93),'goToFlow':()=>this[_0x1aa7ac(0x6d5)](_0x16c023,_0x138a93),'scheduleFlow':()=>this[_0x1aa7ac(0x4e9)](_0x16c023,_0x138a93),'awaitSeconds':()=>this[_0x1aa7ac(0x706)](_0x16c023,_0x138a93),'clearVariables':()=>this[_0x1aa7ac(0xcf)](_0x16c023,_0x138a93)}[_0x2babe6];_0x444905&&await _0x444905();}catch(_0x1c978b){this[_0x1aa7ac(0x112)][_0x1aa7ac(0x4b3)](this[_0x1aa7ac(0x78b)]+'\x20('+this[_0x1aa7ac(0x799)][_0x1aa7ac(0x3cb)]+_0x1aa7ac(0x696)+(_0x1c978b instanceof Error?_0x1c978b['message']:JSON[_0x1aa7ac(0x1bb)](_0x1c978b,null,0x2)));}}async[a0_0x3f352e(0x706)](_0x52a9fb,_0xa973d1){const _0x53537f=a0_0x3f352e;if(this[_0x53537f(0x112)][_0x53537f(0x72d)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x53537f(0x352)),!_0x52a9fb||!_0xa973d1)return this[_0x53537f(0x112)][_0x53537f(0x4b3)](this['instanceName']+'\x20('+this[_0x53537f(0x799)][_0x53537f(0x3cb)]+_0x53537f(0x224)),null;let _0x120b42=+_0xa973d1[_0x53537f(0x13c)];isNaN(_0x120b42)&&(_0x120b42=0x0),_0x120b42=Math[_0x53537f(0x51f)](_0x120b42,0x3c),await(0x0,w[_0x53537f(0x6a3)])(_0x120b42*0x3e8);let _0x3b3934={'moreLogs':[_0x53537f(0x413)+_0x120b42+_0x53537f(0x68b)]};return await this[_0x53537f(0x270)](_0x52a9fb,_0xa973d1,_0x3b3934),_0x120b42;}async[a0_0x3f352e(0xcf)](_0x4e01fd,_0x51cef7){const _0x296bb8=a0_0x3f352e;if(this[_0x296bb8(0x112)][_0x296bb8(0x72d)](this[_0x296bb8(0x78b)]+'\x20('+this[_0x296bb8(0x799)]['wuid']+_0x296bb8(0x4dd)),!_0x4e01fd||!_0x51cef7)return this[_0x296bb8(0x112)]['error'](this[_0x296bb8(0x78b)]+'\x20('+this[_0x296bb8(0x799)]['wuid']+_0x296bb8(0x224)),null;let _0x46650b=[];if(_0x51cef7[_0x296bb8(0x73a)][_0x296bb8(0x1e6)]()===_0x296bb8(0x423)){let _0xe8f7cd=['_sender',_0x296bb8(0x35b),_0x296bb8(0x380),_0x296bb8(0x33a),_0x296bb8(0x1c8),_0x296bb8(0x68d),'_fromMe'];_0x46650b=Object[_0x296bb8(0x75c)](_0x4e01fd[_0x296bb8(0x135)][_0x296bb8(0x15e)])[_0x296bb8(0x495)](_0x225baa=>_0x225baa[_0x296bb8(0x77f)]('_')&&!_0xe8f7cd[_0x296bb8(0x2bf)](_0x225baa));}else _0x46650b=_0x51cef7[_0x296bb8(0x73a)][_0x296bb8(0x384)]('|')[_0x296bb8(0xff)](_0x39d700=>(_0x39d700=_0x39d700[_0x296bb8(0x166)](/[{}]/g,'')['trim'](),_0x39d700[_0x296bb8(0x77f)]('_')?_0x39d700:'_'+_0x39d700));let _0x2dc8fb=[];_0x46650b[_0x296bb8(0x62c)](_0x5971f5=>{const _0x3e639d=_0x296bb8;_0x5971f5 in _0x4e01fd[_0x3e639d(0x135)][_0x3e639d(0x15e)]&&(delete _0x4e01fd['chatLog']['realVariables'][_0x5971f5],_0x2dc8fb['push'](_0x5971f5));}),_0x2dc8fb[_0x296bb8(0x45c)]>0x0?this[_0x296bb8(0x112)][_0x296bb8(0x72d)](this[_0x296bb8(0x78b)]+'\x20('+this['instance']['wuid']+_0x296bb8(0x210)+_0x2dc8fb[_0x296bb8(0x348)](',\x20')):this[_0x296bb8(0x112)][_0x296bb8(0x72d)](this['instanceName']+'\x20('+this[_0x296bb8(0x799)][_0x296bb8(0x3cb)]+_0x296bb8(0x191));let _0x52a8b4={'moreLogs':[_0x296bb8(0x70a)+_0x2dc8fb[_0x296bb8(0x348)](',\x20')]};return await this[_0x296bb8(0x270)](_0x4e01fd,_0x51cef7,_0x52a8b4),null;}async[a0_0x3f352e(0x4e9)](_0x2893fd,_0x2fb13d){const _0x56fd5f=a0_0x3f352e;if(this['logger'][_0x56fd5f(0x72d)](this[_0x56fd5f(0x78b)]+'\x20('+this[_0x56fd5f(0x799)][_0x56fd5f(0x3cb)]+_0x56fd5f(0x1a3)),!_0x2893fd||!_0x2fb13d)return this[_0x56fd5f(0x112)]['error'](this[_0x56fd5f(0x78b)]+'\x20('+this[_0x56fd5f(0x799)][_0x56fd5f(0x3cb)]+_0x56fd5f(0x224)),null;let _0xe6297e=_0x2893fd[_0x56fd5f(0x183)];_0x2fb13d[_0x56fd5f(0x58c)]['remoteJid']&&_0x2fb13d[_0x56fd5f(0x58c)]['remoteJid'][_0x56fd5f(0x1e6)]()!==''&&(_0xe6297e=_0x2fb13d['uazapi']['remoteJid']['trim']());let _0x377698=_0x2fb13d[_0x56fd5f(0x58c)][_0x56fd5f(0x6a1)]*0xea60,_0xfa3154=Date['now']()+_0x377698,_0x49f4a4={'status':_0x56fd5f(0x365),'info':_0x56fd5f(0xb4)+_0x2893fd['name'],'remoteJids':[_0xe6297e],'when':_0xfa3154,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x56fd5f(0x2b2),'flowName':_0x2fb13d[_0x56fd5f(0x58c)][_0x56fd5f(0x35f)]};this[_0x56fd5f(0x36c)](_0x49f4a4);let _0x1d3d15=await this['NextBlock'](_0x2893fd);_0x1d3d15&&await this[_0x56fd5f(0x137)](_0x2893fd,_0x1d3d15);}async['processgoToFlow'](_0x297750,_0x12ae1d){const _0x124c07=a0_0x3f352e;if(this[_0x124c07(0x112)]['verbose'](this[_0x124c07(0x78b)]+'\x20('+this[_0x124c07(0x799)][_0x124c07(0x3cb)]+_0x124c07(0x512)),!_0x297750||!_0x12ae1d)return this[_0x124c07(0x112)][_0x124c07(0x4b3)](this[_0x124c07(0x78b)]+'\x20('+this[_0x124c07(0x799)]['wuid']+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;await this['updateConversation'](_0x297750,_0x12ae1d,{},!0x0,!0x0);let _0x5dbd7e=_0x12ae1d['goToFlow'];_0x297750=await this[_0x124c07(0x3f5)](_0x5dbd7e,_0x297750[_0x124c07(0x183)],_0x297750['chatLog'][_0x124c07(0x15e)]);let _0xf2849f=await this[_0x124c07(0x743)](_0x297750);_0xf2849f&&await this[_0x124c07(0x137)](_0x297750,_0xf2849f);}async['createConversationforgoToFlow'](_0x5a4966,_0x392c4a,_0x522623){const _0xc4698=a0_0x3f352e;this['logger'][_0xc4698(0x72d)](this[_0xc4698(0x78b)]+'\x20('+this[_0xc4698(0x799)]['wuid']+_0xc4698(0x249));try{let _0x357be1=this[_0xc4698(0x2f7)][_0xc4698(0x334)][_0xc4698(0x71f)](_0x3fe74c=>_0x3fe74c['_id']===_0x5a4966);_0x357be1||this['logger']['error'](this[_0xc4698(0x78b)]+'\x20('+this['instance'][_0xc4698(0x3cb)]+'):\x20Flow\x20\x27'+_0x5a4966+_0xc4698(0x52d));let _0x418601=await this[_0xc4698(0x7be)][_0xc4698(0x2b2)][_0xc4698(0x312)]({'where':{'_id':_0x357be1[_0xc4698(0x68d)]}});if(!_0x418601||!_0x418601['whoCanUse']?.[_0xc4698(0x2bf)](this[_0xc4698(0x799)][_0xc4698(0x3cb)]))throw this[_0xc4698(0x112)][_0xc4698(0x4b3)](this[_0xc4698(0x78b)]+'\x20('+this[_0xc4698(0x799)][_0xc4698(0x3cb)]+_0xc4698(0x38b)+_0x5a4966+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0xc4698(0x62f)+_0x5a4966+_0xc4698(0x6bf));let _0x19f8a5=require(_0xc4698(0x354))[_0xc4698(0x438)],_0x1dca50=Date[_0xc4698(0x196)](),_0x148cd0=_0xc4698(0x691),_0x4f749d={},_0x55e976={},_0x4c9075=this[_0xc4698(0x2f7)]['flows'][_0xc4698(0x71f)](_0x4c571b=>_0x4c571b[_0xc4698(0x68d)]===_0x418601[_0xc4698(0x68d)]?.[_0xc4698(0x123)]()),_0xb6154a=_0x4c9075?.[_0xc4698(0x734)]??_0x418601[_0xc4698(0x734)]??0x0,_0x304fc9=_0x4c9075?.[_0xc4698(0x4e4)]??_0x418601['readMessages']??!0x1,_0x5e5dde={'flowId':_0x357be1[_0xc4698(0x68d)],'readMessages':_0x357be1['readMessages'],..._0x418601,'chatLog':null},_0x21bb65={'lastReceivedMessage':_0x4f749d,'lastSendMessage':_0x55e976,'lastBlockId':_0x148cd0,'lastCondition':!0x0,'realVariables':_0x522623};_0x5e5dde[_0xc4698(0x135)]=_0x21bb65,_0x5e5dde[_0xc4698(0x135)][_0xc4698(0x15e)]={..._0x522623},delete _0x5e5dde[_0xc4698(0x68d)],_0x5e5dde[_0xc4698(0x68d)]=new _0x19f8a5(),_0x5e5dde[_0xc4698(0x751)]=_0x1dca50,_0x5e5dde[_0xc4698(0x62a)]=_0xc4698(0x6d3),_0x5e5dde[_0xc4698(0x183)]=_0x392c4a,_0x5e5dde[_0xc4698(0x734)]=_0xb6154a,_0x5e5dde['readMessages']=_0x304fc9;let _0x41c69e=await this[_0xc4698(0x7be)][_0xc4698(0x5b0)][_0xc4698(0x372)](_0x5e5dde[_0xc4698(0x68d)],_0x5e5dde,this[_0xc4698(0x799)][_0xc4698(0x3cb)]);return this['logger'][_0xc4698(0x72d)](this[_0xc4698(0x78b)]+'\x20('+this['instance'][_0xc4698(0x3cb)]+_0xc4698(0x3f7)),_0x41c69e?_0x5e5dde:null;}catch(_0x340dcf){let _0x233ad5=_0xc4698(0x360),_0x591780=_0x340dcf instanceof Error?_0x340dcf['message']:typeof _0x340dcf=='object'?JSON[_0xc4698(0x1bb)](_0x340dcf):_0x340dcf,_0x5c3797=_0x233ad5+':\x20'+_0x591780;throw this['logger'][_0xc4698(0x4b3)](this[_0xc4698(0x78b)]+'\x20('+this[_0xc4698(0x799)][_0xc4698(0x3cb)]+_0xc4698(0x433)+_0x5c3797),new m(_0x5c3797);}}async['processApiRequest'](_0x456dbd,_0x249f21){const _0x1dc47d=a0_0x3f352e;let _0x17d396,_0x301cb5;try{let _0xb7e8d4=_0x249f21['apirequest'];if(!_0xb7e8d4||!_0xb7e8d4[_0x1dc47d(0x163)]||!_0xb7e8d4[_0x1dc47d(0x583)])throw new Error(_0x1dc47d(0x363));let _0x47db28;([_0x1dc47d(0x69f),'https://api.openai.com/v1/images/generations',_0x1dc47d(0x260)][_0x1dc47d(0x378)](_0x484f3a=>_0xb7e8d4[_0x1dc47d(0x163)][_0x1dc47d(0x2bf)](_0x484f3a))||_0xb7e8d4['requestFile'])&&(_0x47db28='arraybuffer');let _0x27c360='\u205f',_0x5c03ba;try{_0x5c03ba=JSON['parse'](_0xb7e8d4[_0x1dc47d(0x45f)][_0x1dc47d(0x166)](new RegExp(_0x27c360,'g'),''));}catch(_0x33b3d5){throw _0x33b3d5;}let _0x21549e={'method':_0xb7e8d4[_0x1dc47d(0x583)],'url':_0xb7e8d4['url'],'headers':_0xb7e8d4[_0x1dc47d(0x693)]||{},..._0xb7e8d4['method']['toUpperCase']()!==_0x1dc47d(0x498)&&_0xb7e8d4['bodyString']?{'data':JSON[_0x1dc47d(0x4d4)](_0xb7e8d4['bodyString'][_0x1dc47d(0x166)](new RegExp(_0x27c360,'g'),''))}:{},..._0x47db28&&{'responseType':_0x47db28}},_0x923414=await(0x0,Y['default'])(_0x21549e),_0x42cde6=_0x923414['headers']['content-type'];if(_0x42cde6&&_0x42cde6['includes'](_0x1dc47d(0x78e))||typeof _0x923414['data']==_0x1dc47d(0x6e4)){if(typeof _0x923414[_0x1dc47d(0x742)]=='string'){let _0x3d470c=_0x923414[_0x1dc47d(0x742)][_0x1dc47d(0x166)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x1dc47d(0x1e6)]();try{_0x17d396=JSON['parse'](_0x3d470c);}catch(_0x535c40){this[_0x1dc47d(0x112)]['error']('Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20'+_0x535c40[_0x1dc47d(0x499)]),_0x17d396={'_apiResponse':_0x923414[_0x1dc47d(0x742)]};}}else _0x17d396=_0x923414[_0x1dc47d(0x742)];let _0x4ec393=_0x456dbd[_0x1dc47d(0x135)][_0x1dc47d(0x15e)],_0x240c2d=this['flattenObject'](_0x17d396);return Object[_0x1dc47d(0x4ce)](_0x4ec393,_0x240c2d),_0x456dbd[_0x1dc47d(0x135)]['realVariables']=_0x4ec393,_0x301cb5={'error':!0x1,'apiResponse':_0x17d396},this[_0x1dc47d(0x270)](_0x456dbd,_0x249f21,_0x301cb5),_0x17d396;}if(_0x42cde6&&(_0x42cde6['includes']('application/octet-stream')||_0x42cde6[_0x1dc47d(0x2bf)]('image')||_0x42cde6['includes'](_0x1dc47d(0x185))||_0x42cde6[_0x1dc47d(0x2bf)](_0x1dc47d(0x69a)))){this['logger'][_0x1dc47d(0x72d)](this[_0x1dc47d(0x78b)]+'\x20('+this['instance']['wuid']+'):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20'+_0x42cde6);let _0x5be920=(0x0,X['v4'])(),_0x1e7964='',_0xb14a4={'image/jpeg':_0x1dc47d(0x3c0),'image/png':'.png','image/gif':'.gif','image/webp':'.webp','image/svg+xml':_0x1dc47d(0x3b7),'audio/mpeg':_0x1dc47d(0x669),'audio/ogg':_0x1dc47d(0x44d),'audio/wav':'.wav','video/mp4':_0x1dc47d(0x2a4),'video/webm':_0x1dc47d(0x6e5),'video/ogg':_0x1dc47d(0x3b6),'text/plain':'.txt','application/pdf':_0x1dc47d(0x697),'application/msword':_0x1dc47d(0x574),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x1dc47d(0x261),'application/vnd.ms-excel':_0x1dc47d(0x279),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x1dc47d(0x776),'application/vnd.ms-powerpoint':'.ppt','application/vnd.openxmlformats-officedocument.presentationml.presentation':'.pptx'};_0xb14a4[_0x42cde6]?(_0x1e7964=_0xb14a4[_0x42cde6],this[_0x1dc47d(0x112)][_0x1dc47d(0x72d)](this[_0x1dc47d(0x78b)]+'\x20('+this[_0x1dc47d(0x799)]['wuid']+_0x1dc47d(0x620)+_0x1e7964)):(_0x1e7964=_0x1dc47d(0x1e8),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x1dc47d(0x799)][_0x1dc47d(0x3cb)]+'):\x20Usando\x20extensão\x20padrão:\x20'+_0x1e7964)),_0x5be920+=_0x1e7964,this[_0x1dc47d(0x112)][_0x1dc47d(0x72d)](this[_0x1dc47d(0x78b)]+'\x20('+this[_0x1dc47d(0x799)]['wuid']+'):\x20Nome\x20do\x20arquivo\x20gerado:\x20'+_0x5be920);let _0x33334d=this[_0x1dc47d(0x446)]['get']('SERVER')[_0x1dc47d(0x298)];if(!_0x33334d){let _0x3556df=this[_0x1dc47d(0x446)]['get']('SSL_CONF');_0x33334d=_0x1dc47d(0x4b5)+(_0x3556df&&_0x3556df[_0x1dc47d(0xbb)][_0x1dc47d(0x384)]('/')[0x4]);}let _0x504867=Buffer[_0x1dc47d(0x3a3)](_0x923414[_0x1dc47d(0x742)]);await this['saveMediaToFile'](_0x504867,_0x5be920);let _0x2f2bc1=_0x1dc47d(0xeb)+_0x5be920;_0x2f2bc1=''+_0x33334d+_0x2f2bc1,_0x17d396={'fileUrl':_0x2f2bc1},_0x456dbd['chatLog']['realVariables'][_0x1dc47d(0x508)]=_0x2f2bc1;let _0xa2e015=_0x456dbd[_0x1dc47d(0x135)][_0x1dc47d(0x15e)],_0x4de21b=this[_0x1dc47d(0x740)](_0x17d396);return Object['assign'](_0xa2e015,_0x4de21b),_0x456dbd['chatLog'][_0x1dc47d(0x15e)]=_0xa2e015,_0x301cb5={'error':!0x1,'apiResponse':{'fileUrl':_0x2f2bc1}},this[_0x1dc47d(0x270)](_0x456dbd,_0x249f21,_0x301cb5),_0x17d396;}}catch(_0x1bd000){this[_0x1dc47d(0x112)]['error'](_0x1dc47d(0x3b2)+_0x1bd000['message']),_0x1bd000[_0x1dc47d(0x7b2)]&&(_0x17d396=_0x1bd000[_0x1dc47d(0x7b2)]['data']);let _0x5ea1f3=_0x456dbd['chatLog'][_0x1dc47d(0x15e)],_0x35a4be=this[_0x1dc47d(0x740)](_0x17d396);return Object[_0x1dc47d(0x4ce)](_0x5ea1f3,_0x35a4be),_0x456dbd[_0x1dc47d(0x135)][_0x1dc47d(0x15e)]=_0x5ea1f3,_0x301cb5={'error':!0x0,'errorLog':_0x1bd000[_0x1dc47d(0x123)](),'apiResponse':_0x17d396},this['updateConversation'](_0x456dbd,_0x249f21,_0x301cb5),{'success':!0x1};}}[a0_0x3f352e(0x532)](_0x1cf4db,_0x46760c){const _0x5a1109=a0_0x3f352e;let _0x1597ac=_0x2c6f56=>{const _0x2d316d=a0_0x1206;let _0x529899=_0x2c6f56[_0x2d316d(0x166)](/[^0-9.,-]/g,'')[_0x2d316d(0x166)](',','.'),_0x4a0710=parseFloat(_0x529899);return isNaN(_0x4a0710)?null:_0x4a0710;},_0x1bf484=_0x46760c[_0x5a1109(0x7dc)],_0x4f0c7b=_0x46760c[_0x5a1109(0x64c)];typeof _0x1bf484=='string'&&(_0x1bf484=this[_0x5a1109(0x543)](_0x1bf484,_0x1cf4db[_0x5a1109(0x135)]['realVariables'])??''),typeof _0x4f0c7b==_0x5a1109(0x6e4)&&(_0x4f0c7b=this[_0x5a1109(0x543)](_0x4f0c7b,_0x1cf4db[_0x5a1109(0x135)][_0x5a1109(0x15e)])??'');let _0x380e76=null;if(!_0x46760c[_0x5a1109(0x736)])return null;switch(this[_0x5a1109(0x112)][_0x5a1109(0x72d)](this[_0x5a1109(0x78b)]+'\x20('+this['instance']['wuid']+_0x5a1109(0x4a3)+_0x1bf484),this[_0x5a1109(0x112)][_0x5a1109(0x72d)](this[_0x5a1109(0x78b)]+'\x20('+this['instance'][_0x5a1109(0x3cb)]+_0x5a1109(0xc9)+_0x4f0c7b),_0x46760c['editOperator']){case'+':case'-':case'*':case'/':let _0x3ffaa1=_0x1597ac(_0x1bf484||'0'),_0x404591=_0x1597ac(_0x4f0c7b||'0');if(_0x3ffaa1===null)return null;switch(_0x46760c[_0x5a1109(0x736)]){case'+':_0x380e76=_0x3ffaa1+(_0x404591??0x0);break;case'-':_0x380e76=_0x3ffaa1-(_0x404591??0x0);break;case'*':_0x380e76=_0x3ffaa1*(_0x404591??0x1);break;case'/':_0x404591!==0x0&&(_0x380e76=_0x3ffaa1/(_0x404591??0x1));break;}break;case'findAndReplace':case'findAndReplaceRegex':let _0x4fd1e0=_0x4f0c7b,_0xc8e9a9=_0x46760c[_0x5a1109(0x2a5)];if(typeof _0xc8e9a9=='string'&&(_0xc8e9a9=this[_0x5a1109(0x543)](_0xc8e9a9,_0x1cf4db[_0x5a1109(0x135)][_0x5a1109(0x15e)])??''),_0x4fd1e0&&_0xc8e9a9!==void 0x0){let _0x21d81b=_0x46760c[_0x5a1109(0x736)]===_0x5a1109(0x7ac)?new RegExp(_0x4fd1e0[_0x5a1109(0x166)](/[-\/\\^$*+?.()|[\]{}]/g,_0x5a1109(0x44c)),'g'):new RegExp(_0x4fd1e0,'g');_0x380e76=_0x1bf484[_0x5a1109(0x166)](_0x21d81b,_0xc8e9a9);}else console[_0x5a1109(0x76b)](_0x5a1109(0x3e8));break;case _0x5a1109(0x233):_0x380e76=_0x4f0c7b;break;case _0x5a1109(0x466):let _0x32467e=_0x1bf484[_0x5a1109(0x235)](new RegExp(_0x4f0c7b||''));_0x380e76=_0x32467e?_0x32467e[0x0]:'';break;case _0x5a1109(0x4c4):_0x380e76=_0x1bf484[_0x5a1109(0x4d9)](0x0,parseInt(_0x4f0c7b||'0'));break;case _0x5a1109(0x448):let _0x595eb3=parseInt(_0x4f0c7b||'0');_0x380e76=_0x1bf484[_0x5a1109(0x4d9)](_0x1bf484['length']-_0x595eb3);break;case'toBrazilianNumberFormat':let _0x1a09bd=_0x1597ac(_0x1bf484),_0x523bfb=parseInt(_0x4f0c7b||'0');_0x523bfb=Math[_0x5a1109(0x455)](_0x523bfb),_0x1a09bd!==null?_0x380e76=_0x1a09bd[_0x5a1109(0x7d6)](_0x5a1109(0x522),{'minimumFractionDigits':_0x523bfb,'maximumFractionDigits':_0x523bfb}):(console[_0x5a1109(0x76b)](_0x5a1109(0x477)+_0x1bf484),_0x380e76=null);break;case'toBRL':let _0x24aed8=_0x1597ac(_0x1bf484);_0x24aed8!==null?_0x380e76=_0x24aed8[_0x5a1109(0x7d6)](_0x5a1109(0x522),{'style':_0x5a1109(0x5c3),'currency':_0x5a1109(0x595)}):(console[_0x5a1109(0x76b)](_0x5a1109(0x336)+_0x1bf484),_0x380e76=null);break;case _0x5a1109(0x2e4):_0x380e76=_0x1bf484[_0x5a1109(0x6ac)]();break;case _0x5a1109(0x1ab):_0x380e76=_0x1bf484['toLowerCase']();break;case _0x5a1109(0x3f2):_0x380e76=_0x1bf484['split']('\x20')[_0x5a1109(0xff)](_0x48b374=>_0x48b374[_0x5a1109(0x315)](0x0)[_0x5a1109(0x6ac)]()+_0x48b374[_0x5a1109(0x4d9)](0x1)[_0x5a1109(0x711)]())[_0x5a1109(0x348)]('\x20');break;case'convertToString':_0x380e76=JSON[_0x5a1109(0x1bb)](_0x1bf484);break;case _0x5a1109(0x132):_0x380e76=_0x1bf484[_0x5a1109(0x1e6)]();break;default:_0x380e76=_0x1bf484;}return _0x380e76!==null?_0x380e76['toString']():null;}async['processvaredits'](_0x313614,_0xf7cad){const _0xeac26c=a0_0x3f352e;try{let _0x1df2b4=_0x313614[_0xeac26c(0x2e3)]?.['filter'](_0x1c9033=>_0x1c9033[_0xeac26c(0x4fc)]===_0xf7cad[_0xeac26c(0x68d)]?.['toString']())||[],_0x2a72ba=_0xf7cad[_0xeac26c(0x4c5)],_0x51c292=null,_0x394444=[],_0x4909d5=_0x313614[_0xeac26c(0x135)][_0xeac26c(0x15e)][_0x2a72ba];_0x394444[_0xeac26c(0x5ea)](_0xeac26c(0x296)+_0x4909d5+'\x22');for(let _0x5b1555 of _0x1df2b4){_0x5b1555['firstValue']=_0x4909d5,_0x51c292=_0x5b1555[_0xeac26c(0x7dc)];let _0x5518aa;try{_0x5518aa=this[_0xeac26c(0x532)](_0x313614,_0x5b1555);}catch(_0x2b92f7){this[_0xeac26c(0x112)][_0xeac26c(0x4b3)]('Erro\x20ao\x20aplicar\x20varedit:\x20'+_0x2b92f7[_0xeac26c(0x499)]);continue;}if(_0x5518aa!==null){let _0x15ee51=_0xeac26c(0x519)+_0x5b1555['editOperator']+'\x22',_0x2edc41=[_0xeac26c(0x37c),_0xeac26c(0x2e4),_0xeac26c(0x1ab),'capitalizedWords',_0xeac26c(0x132)];_0x5b1555[_0xeac26c(0x736)]===_0xeac26c(0x7ac)||_0x5b1555[_0xeac26c(0x736)]===_0xeac26c(0x26b)?_0x15ee51+=_0xeac26c(0x44b)+_0x5b1555[_0xeac26c(0x64c)]+_0xeac26c(0x713)+_0x5b1555[_0xeac26c(0x2a5)]+'\x22':!_0x2edc41['includes'](_0x5b1555[_0xeac26c(0x736)])&&_0x5b1555['secondValue']!==null&&_0x5b1555[_0xeac26c(0x64c)]!==void 0x0&&(_0x15ee51+=_0xeac26c(0xd3)+_0x5b1555['secondValue']+'\x22'),_0x15ee51+=_0xeac26c(0x777)+_0x5518aa+'.',_0x394444['push'](_0x15ee51);}_0x5518aa!==null&&(_0x4909d5=_0x5518aa);}if(_0x313614[_0xeac26c(0x135)]['realVariables']&&_0xf7cad[_0xeac26c(0x4c5)]){_0x313614[_0xeac26c(0x135)][_0xeac26c(0x15e)][_0xf7cad[_0xeac26c(0x4c5)]]=_0x4909d5;let _0x10ede0={'variable':_0xf7cad[_0xeac26c(0x4c5)],'oldValue':_0x51c292,'newValue':_0x4909d5,'moreLogs':_0x394444};try{this[_0xeac26c(0x270)](_0x313614,_0xf7cad,_0x10ede0);}catch(_0x641495){this[_0xeac26c(0x112)]['error'](_0xeac26c(0x65a)+_0x641495[_0xeac26c(0x499)]);}}return _0x2a72ba;}catch(_0x1fd368){return this[_0xeac26c(0x112)][_0xeac26c(0x4b3)](_0xeac26c(0x2f4)+_0x1fd368[_0xeac26c(0x499)]),null;}}async[a0_0x3f352e(0x70f)](_0x1b2d07,_0x265f3d){const _0x3005cf=a0_0x3f352e;try{let _0x443919=[],_0x2babca=_0x1b2d07[_0x3005cf(0x52c)][_0x3005cf(0x495)](_0x2096b5=>_0x2096b5[_0x3005cf(0x4fc)]===_0x265f3d[_0x3005cf(0x68d)][_0x3005cf(0x123)]()),_0x46e064=null,_0x44aed1=!0x1;for(let _0x379a23 of _0x2babca){let _0x28b710=this['evaluateCondition'](_0x1b2d07,_0x379a23);_0x443919[_0x3005cf(0x5ea)](_0x3005cf(0x389)+_0x379a23[_0x3005cf(0x7dc)]+_0x3005cf(0x552)+_0x379a23[_0x3005cf(0x759)]+_0x3005cf(0x61d)+_0x379a23[_0x3005cf(0x64c)]+',\x20Resultado:\x20'+_0x28b710),_0x46e064===null?_0x46e064=_0x28b710:_0x379a23[_0x3005cf(0x7ee)]===_0x3005cf(0x511)?(_0x46e064=_0x46e064&&_0x28b710,_0x28b710||(_0x44aed1=!0x0)):_0x379a23[_0x3005cf(0x7ee)]==='or'&&(_0x44aed1||(_0x46e064=_0x46e064||_0x28b710));}_0x46e064===null&&(_0x46e064=!0x0);let _0xc5e6d1={'moreLogs':_0x443919};_0x1b2d07['chatLog'][_0x3005cf(0x1ba)]=_0x46e064,await this[_0x3005cf(0x270)](_0x1b2d07,_0x265f3d,_0xc5e6d1);}catch(_0x185572){this[_0x3005cf(0x112)][_0x3005cf(0x4b3)](this[_0x3005cf(0x78b)]+'\x20('+this[_0x3005cf(0x799)][_0x3005cf(0x3cb)]+_0x3005cf(0x7b9)+(_0x185572 instanceof Error?_0x185572[_0x3005cf(0x499)]:JSON['stringify'](_0x185572,null,0x2)));}}[a0_0x3f352e(0x1fd)](_0x41daf0,_0x115ad3){const _0x9bcd34=a0_0x3f352e;let _0x350ee2=_0x115ad3[_0x9bcd34(0x7dc)],_0xce9eaf=_0x115ad3[_0x9bcd34(0x64c)];typeof _0x350ee2==_0x9bcd34(0x6e4)&&(_0x350ee2=this[_0x9bcd34(0x543)](_0x350ee2,_0x41daf0[_0x9bcd34(0x135)][_0x9bcd34(0x15e)])??''),typeof _0xce9eaf=='string'&&(_0xce9eaf=this[_0x9bcd34(0x543)](_0xce9eaf,_0x41daf0[_0x9bcd34(0x135)][_0x9bcd34(0x15e)])??'');try{switch(_0x115ad3[_0x9bcd34(0x759)]){case'equal':return _0x350ee2===_0xce9eaf;case _0x9bcd34(0x28c):return _0x350ee2!==_0xce9eaf;case _0x9bcd34(0x111):return this[_0x9bcd34(0x111)](_0x350ee2,_0xce9eaf);case _0x9bcd34(0x476):return!this[_0x9bcd34(0x111)](_0x350ee2,_0xce9eaf);case _0x9bcd34(0x756):return parseFloat(_0x350ee2)>parseFloat(_0xce9eaf);case _0x9bcd34(0x41b):return parseFloat(_0x350ee2)<parseFloat(_0xce9eaf);case _0x9bcd34(0x692):return _0x350ee2!=='';case'empty':return _0x350ee2==='';case _0x9bcd34(0x540):return new RegExp(_0xce9eaf)[_0x9bcd34(0x381)](_0x350ee2);case _0x9bcd34(0x636):return!new RegExp(_0xce9eaf)[_0x9bcd34(0x381)](_0x350ee2);default:return!0x1;}}catch(_0x1ad0ac){return this[_0x9bcd34(0x112)][_0x9bcd34(0x4b3)](_0x9bcd34(0x30d)+_0x1ad0ac),!0x1;}}[a0_0x3f352e(0x111)](_0x58958a,_0x46ecee){const _0x55d50d=a0_0x3f352e;if(_0x58958a===_0x46ecee&&/^\d+$/['test'](_0x58958a))return!0x0;if(this[_0x55d50d(0x168)](_0x58958a)&&/^\d+$/[_0x55d50d(0x381)](_0x46ecee)){let _0x3e3dd0=_0x58958a[_0x55d50d(0x384)](',')['map'](_0x5f4311=>parseInt(_0x5f4311[_0x55d50d(0x1e6)]())),_0x26d889=parseInt(_0x46ecee);return _0x3e3dd0[_0x55d50d(0x2bf)](_0x26d889);}return _0x58958a[_0x55d50d(0x2bf)](_0x46ecee);}['isListOfNumbers'](_0x4ee184){const _0x3bbb64=a0_0x3f352e;return/^\d+(,\d+)*$/[_0x3bbb64(0x381)](_0x4ee184);}[a0_0x3f352e(0x559)](_0x45f743){const _0x51895b=a0_0x3f352e;let _0x43264a=!0x0,_0x94aacb=null;for(let _0x36d035 of _0x45f743){let _0x2653db=this[_0x51895b(0x3d7)](_0x36d035);if(_0x94aacb==='or'&&_0x2653db){_0x43264a=!0x0;break;}if(_0x94aacb==='and'&&!_0x2653db){_0x43264a=!0x1;break;}_0x94aacb=_0x36d035[_0x51895b(0x7ee)];}return _0x43264a;}[a0_0x3f352e(0x3d7)](_0x30023b){const _0x2eb474=a0_0x3f352e;let _0x1da2dc=_0x30023b[_0x2eb474(0x7dc)],_0x336853=_0x30023b[_0x2eb474(0x64c)];try{switch(_0x30023b['expression']){case'equal':return String(_0x1da2dc)===String(_0x336853);case _0x2eb474(0x28c):return String(_0x1da2dc)!==String(_0x336853);case _0x2eb474(0x111):return String(_0x1da2dc)[_0x2eb474(0x2bf)](String(_0x336853));case'notContains':return!String(_0x1da2dc)[_0x2eb474(0x2bf)](String(_0x336853));case'greater':return parseFloat(String(_0x1da2dc))>parseFloat(String(_0x336853));case _0x2eb474(0x41b):return parseFloat(String(_0x1da2dc))<parseFloat(String(_0x336853));case _0x2eb474(0x692):return String(_0x1da2dc)!=='';case'empty':return String(_0x1da2dc)==='';case _0x2eb474(0x540):return new RegExp(String(_0x336853))[_0x2eb474(0x381)](String(_0x1da2dc));case _0x2eb474(0x636):return!new RegExp(String(_0x336853))[_0x2eb474(0x381)](String(_0x1da2dc));default:return!0x1;}}catch(_0x1213ed){return this['logger'][_0x2eb474(0x4b3)](_0x2eb474(0x30d)+_0x1213ed),!0x1;}}async[a0_0x3f352e(0x2ac)](_0x308190,_0x3cdc50){const _0x8efb81=a0_0x3f352e;if(this[_0x8efb81(0x112)][_0x8efb81(0x72d)](this[_0x8efb81(0x78b)]+'\x20('+this[_0x8efb81(0x799)][_0x8efb81(0x3cb)]+_0x8efb81(0x655)),!_0x308190||!_0x3cdc50)return this[_0x8efb81(0x112)][_0x8efb81(0x4b3)](this['instanceName']+'\x20('+this[_0x8efb81(0x799)][_0x8efb81(0x3cb)]+_0x8efb81(0x224)),null;let _0x394a4e=_0x308190[_0x8efb81(0x135)]['lastReceivedMessage'][_0x8efb81(0x2bb)]['id'];this[_0x8efb81(0x112)][_0x8efb81(0x72d)](this[_0x8efb81(0x78b)]+'\x20('+this['instance'][_0x8efb81(0x3cb)]+_0x8efb81(0x682)+_0x394a4e);let _0x1ce046={'key':{'id':_0x394a4e}},_0x48bfdb=_0x3cdc50['saveVariable'];_0x308190[_0x8efb81(0x135)][_0x8efb81(0x15e)]['_'+_0x48bfdb+_0x8efb81(0x675)]=null,_0x308190[_0x8efb81(0x135)][_0x8efb81(0x15e)]['_'+_0x48bfdb+_0x8efb81(0x6a9)]=null,_0x308190['chatLog']['realVariables']['_'+_0x48bfdb+_0x8efb81(0x33d)]=null,_0x308190['chatLog']['realVariables']['_'+_0x48bfdb+_0x8efb81(0x4c6)]=_0x308190[_0x8efb81(0x135)][_0x8efb81(0x159)]['type'];try{let _0x13b4f1=await this[_0x8efb81(0x600)](_0x1ce046);this[_0x8efb81(0x112)]['verbose'](this[_0x8efb81(0x78b)]+'\x20('+this[_0x8efb81(0x799)][_0x8efb81(0x3cb)]+_0x8efb81(0x634)),_0x308190[_0x8efb81(0x135)]['realVariables']['_'+_0x48bfdb+_0x8efb81(0x592)]=_0x13b4f1[_0x8efb81(0x508)],_0x308190['chatLog'][_0x8efb81(0x15e)]['_'+_0x48bfdb+_0x8efb81(0x6a9)]=_0x13b4f1[_0x8efb81(0x53b)];let _0x27c196=_0x13b4f1[_0x8efb81(0x53b)][_0x8efb81(0x235)](/\/(\w+)$/),_0x479988=_0x27c196?_0x27c196[0x1]:null;_0x308190[_0x8efb81(0x135)][_0x8efb81(0x15e)]['_'+_0x48bfdb+_0x8efb81(0x33d)]=_0x479988,this[_0x8efb81(0x112)][_0x8efb81(0x72d)](this[_0x8efb81(0x78b)]+'\x20('+this[_0x8efb81(0x799)][_0x8efb81(0x3cb)]+'):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27'+_0x48bfdb+'\x27.');}catch(_0x2675ce){this[_0x8efb81(0x112)]['error'](this[_0x8efb81(0x78b)]+'\x20('+this[_0x8efb81(0x799)][_0x8efb81(0x3cb)]+_0x8efb81(0x106)+_0x2675ce['message']);}let _0x3d632d=_0x308190[_0x8efb81(0x135)][_0x8efb81(0x159)][_0x8efb81(0x21b)]||_0x308190[_0x8efb81(0x135)][_0x8efb81(0x159)][_0x8efb81(0x2ae)]||_0x308190['chatLog'][_0x8efb81(0x159)]['vote'];try{_0x308190[_0x8efb81(0x135)]['realVariables']||(_0x308190['chatLog'][_0x8efb81(0x15e)]={});let _0x34ff13=_0x308190[_0x8efb81(0x135)][_0x8efb81(0x15e)][_0x48bfdb];_0x308190[_0x8efb81(0x135)][_0x8efb81(0x15e)][_0x48bfdb]=_0x3d632d;let _0x486802={'variable':_0x48bfdb,'oldValue':_0x34ff13,'newValue':_0x3d632d};this[_0x8efb81(0x270)](_0x308190,_0x3cdc50,_0x486802),this[_0x8efb81(0x112)]['verbose'](this[_0x8efb81(0x78b)]+'\x20('+this[_0x8efb81(0x799)]['wuid']+_0x8efb81(0x24a));}catch(_0x5f4524){let _0x4bbb57={'error':!0x0,'errorLog':_0x5f4524[_0x8efb81(0x123)]()};return this['updateConversation'](_0x308190,_0x3cdc50,_0x4bbb57),this[_0x8efb81(0x112)]['error'](this['instanceName']+'\x20('+this['instance'][_0x8efb81(0x3cb)]+'):\x20Erro\x20durante\x20a\x20atualização:\x20'+(_0x5f4524 instanceof Error?_0x5f4524[_0x8efb81(0x499)]:JSON[_0x8efb81(0x1bb)](_0x5f4524,null,0x2))),null;}}async[a0_0x3f352e(0x409)](_0xe13abc,_0x3d865f){const _0x4ac9d5=a0_0x3f352e;if(this[_0x4ac9d5(0x112)]['verbose'](this[_0x4ac9d5(0x78b)]+'\x20('+this[_0x4ac9d5(0x799)][_0x4ac9d5(0x3cb)]+_0x4ac9d5(0x54e)),!_0xe13abc||!_0x3d865f)return this[_0x4ac9d5(0x112)][_0x4ac9d5(0x4b3)](this[_0x4ac9d5(0x78b)]+'\x20('+this[_0x4ac9d5(0x799)][_0x4ac9d5(0x3cb)]+_0x4ac9d5(0x224)),null;let _0x101a4=Date[_0x4ac9d5(0x196)](),_0x10f01d=parseInt(_0x3d865f[_0x4ac9d5(0x6ae)],0xa);if(isNaN(_0x10f01d))return this[_0x4ac9d5(0x112)][_0x4ac9d5(0x4b3)](this['instanceName']+'\x20('+this[_0x4ac9d5(0x799)][_0x4ac9d5(0x3cb)]+_0x4ac9d5(0x4ae)),null;let _0x378cf8={'newStoppedUntil':_0x101a4+_0x10f01d*0x3c*0x3e8};return await this['updateConversation'](_0xe13abc,_0x3d865f,_0x378cf8,!0x0),null;}async[a0_0x3f352e(0xfd)](_0x51c698,_0x3cb690){const _0x38674c=a0_0x3f352e;try{switch(_0x3cb690[_0x38674c(0x7e9)][_0x38674c(0x5ba)]){case _0x38674c(0xdd):await this[_0x38674c(0x376)](_0x51c698,_0x3cb690);break;case _0x38674c(0x63b):await this[_0x38674c(0x69e)](_0x51c698,_0x3cb690);break;case _0x38674c(0x255):await this['uazapiSendLocation'](_0x51c698,_0x3cb690);break;case _0x38674c(0x324):await this[_0x38674c(0x6eb)](_0x51c698,_0x3cb690);break;case _0x38674c(0x3f0):await this[_0x38674c(0xaa)](_0x51c698,_0x3cb690);break;case'sendPoll':await this['uazapiSendMenu'](_0x51c698,_0x3cb690);break;case'sendMenu':await this[_0x38674c(0x60e)](_0x51c698,_0x3cb690);break;case _0x38674c(0x3b8):await this[_0x38674c(0x39f)](_0x51c698,_0x3cb690);break;default:this[_0x38674c(0x112)][_0x38674c(0x4b3)](this['instanceName']+'\x20('+this[_0x38674c(0x799)]['wuid']+_0x38674c(0x56f)+_0x3cb690[_0x38674c(0x7e9)][_0x38674c(0x5ba)]);}}catch(_0x1c7a7d){this[_0x38674c(0x112)]['error'](this[_0x38674c(0x78b)]+'\x20('+this[_0x38674c(0x799)]['wuid']+_0x38674c(0x4c2)+(_0x1c7a7d instanceof Error?_0x1c7a7d['message']:JSON['stringify'](_0x1c7a7d,null,0x2)));}}async[a0_0x3f352e(0x270)](_0x5513f9,_0xb46bbe,_0x3c1cde,_0x157681=!0x1,_0x35c41a=!0x1){const _0x50dbef=a0_0x3f352e;_0x5513f9['chatLog'][_0x50dbef(0x469)]||(_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x469)]=[]);let _0x2f7e3d=(_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x469)]?.[_0x50dbef(0x45c)]??0x0)+0x1,_0x584f82=_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x469)][_0x50dbef(0x495)](_0x4ffb74=>String(_0x4ffb74[_0x50dbef(0x4fc)])===String(_0xb46bbe[_0x50dbef(0x68d)]))[_0x50dbef(0x45c)]+0x1,_0x41c7a8=_0x3c1cde?.[_0x50dbef(0x1cb)]??Date[_0x50dbef(0x196)](),_0x17e26f=_0x3c1cde?.[_0x50dbef(0x4b3)]?_0x3c1cde['errorLog']??_0x3c1cde[_0x50dbef(0x4b3)][_0x50dbef(0x123)]():void 0x0,_0x1c864b={'onTime':_0x41c7a8,'blockId':_0xb46bbe[_0x50dbef(0x68d)],'order':_0x2f7e3d,'activatedCount':_0x584f82,'error':_0x3c1cde?.[_0x50dbef(0x4b3)]??!0x1,'messageId':_0x3c1cde?.[_0x50dbef(0x162)],'apiResponse':_0x3c1cde?.[_0x50dbef(0x232)],'apiResponseString':_0x3c1cde?.[_0x50dbef(0x232)]?JSON['stringify'](_0x3c1cde?.[_0x50dbef(0x232)]):void 0x0,'variable':_0x3c1cde?.[_0x50dbef(0x14b)],'oldValue':_0x3c1cde?.[_0x50dbef(0x50a)],'newValue':_0x3c1cde?.[_0x50dbef(0x6cb)],'newStoppedUntil':_0x3c1cde?.[_0x50dbef(0x6b4)],'moreLogs':_0x3c1cde?.[_0x50dbef(0x671)],'errorLog':_0x17e26f};if(_0x3c1cde[_0x50dbef(0x671)]&&_0x3c1cde[_0x50dbef(0x671)][_0x50dbef(0x45c)]>0x0){let _0x8a1cf6=_0x3c1cde[_0x50dbef(0x671)][_0x50dbef(0xff)](_0x1a1adb=>this['replaceVariablesLogs'](_0x1a1adb,_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x15e)]));_0x1c864b[_0x50dbef(0x671)]=_0x8a1cf6;}if(_0x5513f9[_0x50dbef(0x135)]['realVariables']||(_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x15e)]={}),_0x5513f9['chatLog'][_0x50dbef(0x15e)][_0x50dbef(0x12b)]=String(_0x584f82),_0x5513f9[_0x50dbef(0x135)]['realVariables'][_0x50dbef(0x380)]=String(_0x3c1cde[_0x50dbef(0x4b3)]??!0x1),_0x5513f9[_0x50dbef(0x135)]['blockLogs'][_0x50dbef(0x5ea)](_0x1c864b),_0x5513f9[_0x50dbef(0x135)]['realVariables'][_0x50dbef(0x598)]&&_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x15e)]['telefone']!==_0x5513f9[_0x50dbef(0x183)]){let _0x586995=(await this[_0x50dbef(0x3d6)]({'numbers':[_0x5513f9['chatLog'][_0x50dbef(0x15e)]['telefone']]}))[0x0][_0x50dbef(0x3ab)];_0x5513f9['chatLog'][_0x50dbef(0x15e)][_0x50dbef(0x598)]=_0x586995,_0x5513f9[_0x50dbef(0x183)]=_0x586995;try{let _0xde91f8={'_id':{'$ne':_0x5513f9['_id']},'remoteJid':_0x586995,'status':_0x50dbef(0x6d3)},_0x16851b={'status':_0x50dbef(0x60b)};await this[_0x50dbef(0x7be)][_0x50dbef(0x5b0)][_0x50dbef(0x4b0)](_0xde91f8,_0x16851b,this[_0x50dbef(0x799)]['wuid']),this[_0x50dbef(0x112)]['verbose'](this['instanceName']+'\x20('+this[_0x50dbef(0x799)][_0x50dbef(0x3cb)]+_0x50dbef(0x520));}catch(_0x5ef6d7){this[_0x50dbef(0x112)]['error'](this['instanceName']+'\x20('+this[_0x50dbef(0x799)][_0x50dbef(0x3cb)]+_0x50dbef(0x55a)+_0x5ef6d7['message']);}try{let _0x5a22e5=_0x5513f9[_0x50dbef(0x135)]['realVariables'],_0x35e7a1=await this['getVariablesChat'](_0x586995),_0x396e9d={..._0x5a22e5,..._0x35e7a1,'_remoteJid':_0x586995};_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x15e)]=_0x396e9d;}catch(_0x33bdaa){this[_0x50dbef(0x112)][_0x50dbef(0x4b3)](this[_0x50dbef(0x78b)]+'\x20('+this[_0x50dbef(0x799)][_0x50dbef(0x3cb)]+_0x50dbef(0x5fe)+_0x33bdaa[_0x50dbef(0x499)]);}}_0x5513f9['chatLog'][_0x50dbef(0x195)]=_0xb46bbe[_0x50dbef(0x68d)][_0x50dbef(0x123)](),_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x3bf)]&&(_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x3bf)]=_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x3bf)]),_0x5513f9['chatLog']['lastReceivedMessage']&&(_0x5513f9[_0x50dbef(0x135)]['lastReceivedMessage']=_0x5513f9[_0x50dbef(0x135)]['lastReceivedMessage']),_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x1ba)]&&(_0x5513f9[_0x50dbef(0x135)]['lastCondition']=_0x5513f9[_0x50dbef(0x135)][_0x50dbef(0x1ba)]),_0x35c41a&&(_0x5513f9[_0x50dbef(0x62a)]=_0x50dbef(0x60b)),_0x157681?this[_0x50dbef(0x20b)](_0x5513f9):this[_0x50dbef(0x6c7)](_0x5513f9,_0xb46bbe);}[a0_0x3f352e(0x715)](_0x2e8588,_0x8b3457){const _0x22ea69=a0_0x3f352e;return _0x2e8588[_0x22ea69(0x166)](/\{\{([^}]+)\}\}/g,(_0x52bc70,_0x34af50)=>_0x8b3457[_0x34af50]?'{{'+_0x34af50+_0x22ea69(0x6db)+_0x8b3457[_0x34af50]+'\x22':'{{'+_0x34af50+_0x22ea69(0x724));}async[a0_0x3f352e(0x20b)](_0x490cea){const _0x54c78f=a0_0x3f352e;try{let _0xedcfd5=Object['entries'](_0x490cea[_0x54c78f(0x135)]['realVariables'])[_0x54c78f(0xff)](([_0x18bcba,_0x3c3554])=>({'name':_0x18bcba,'value':_0x3c3554})),_0x121985={'status':_0x490cea['status'],'remoteJid':_0x490cea[_0x54c78f(0x183)],'blocks':_0x490cea[_0x54c78f(0x357)],'waitingMenu_id':_0x490cea[_0x54c78f(0x371)],'waitingMenu_text':_0x490cea['waitingMenu_text'],'waitingMenu_replyOptions':_0x490cea[_0x54c78f(0x23f)],'chatLog':{'lastBlockId':_0x490cea[_0x54c78f(0x135)]['lastBlockId'],'lastSendMessage':_0x490cea[_0x54c78f(0x135)][_0x54c78f(0x3bf)],'lastReceivedMessage':_0x490cea[_0x54c78f(0x135)][_0x54c78f(0x159)],'lastCondition':_0x490cea[_0x54c78f(0x135)][_0x54c78f(0x1ba)],'chatVariables':_0xedcfd5,'realVariables':_0x490cea['chatLog']['realVariables'],'blockLogs':_0x490cea[_0x54c78f(0x135)][_0x54c78f(0x469)]}},_0x10b021=await this[_0x54c78f(0x7be)]['flowConversation'][_0x54c78f(0x372)](_0x490cea[_0x54c78f(0x68d)],_0x121985,this[_0x54c78f(0x799)][_0x54c78f(0x3cb)]);if(_0x10b021){this['logger'][_0x54c78f(0x72d)](this['instanceName']+'\x20('+this[_0x54c78f(0x799)][_0x54c78f(0x3cb)]+_0x54c78f(0x403)+_0x10b021[_0x54c78f(0x68d)]);try{let _0x554f1a=[_0x54c78f(0x544),_0x54c78f(0x39c),'email','cpf','status',_0x54c78f(0x21c),_0x54c78f(0x69d),_0x54c78f(0x3e3),_0x54c78f(0x612),_0x54c78f(0x16d)];if(!this[_0x54c78f(0x2f7)]&&(await this[_0x54c78f(0x444)](),!this[_0x54c78f(0x2f7)]))throw new Error('AutomateSystem\x20não\x20foi\x20inicializado');let _0x4bdb10=this[_0x54c78f(0x2f7)]?.[_0x54c78f(0x6e8)]['map'](_0x210ff7=>_0x210ff7[_0x54c78f(0x5f4)]),_0x33dabf={};Object['entries'](_0x490cea[_0x54c78f(0x135)][_0x54c78f(0x15e)])[_0x54c78f(0x62c)](([_0x362fb2,_0x190fc0])=>{const _0x4a860e=_0x54c78f;_0x554f1a[_0x4a860e(0x2bf)](_0x362fb2)&&(_0x362fb2===_0x4a860e(0x3e3)&&typeof _0x190fc0==_0x4a860e(0x6e4)?_0x33dabf[_0x362fb2]=_0x190fc0['split'](',')[_0x4a860e(0xff)](_0x57c927=>_0x57c927[_0x4a860e(0x1e6)]())['filter'](_0x1d08e2=>_0x1d08e2!==''):_0x362fb2===_0x4a860e(0x612)&&typeof _0x190fc0==_0x4a860e(0x6e4)?_0x33dabf[_0x362fb2]=_0x190fc0[_0x4a860e(0x384)](',')[_0x4a860e(0xff)](_0x59f708=>_0x59f708[_0x4a860e(0x1e6)]())[_0x4a860e(0x495)](_0x8e1b0b=>_0x8e1b0b!==''):_0x33dabf[_0x362fb2]=_0x190fc0);});let _0x3458cc=_0x490cea[_0x54c78f(0x135)][_0x54c78f(0x469)][_0x490cea[_0x54c78f(0x135)][_0x54c78f(0x469)][_0x54c78f(0x45c)]-0x1];if(_0x3458cc){let _0x1923cd=_0x3458cc[_0x54c78f(0x6b4)];_0x1923cd!==void 0x0&&(_0x33dabf[_0x54c78f(0x2f8)]=_0x1923cd[_0x54c78f(0x123)]());}let _0x3b8425=_0xedcfd5[_0x54c78f(0x495)](_0x1a8a94=>_0x4bdb10[_0x54c78f(0x2bf)](_0x1a8a94[_0x54c78f(0x5f4)]));this[_0x54c78f(0x112)][_0x54c78f(0x72d)](this['instanceName']+'\x20('+this['instance'][_0x54c78f(0x3cb)]+_0x54c78f(0x58a)),this[_0x54c78f(0x112)][_0x54c78f(0x72d)](_0x33dabf),this[_0x54c78f(0x112)][_0x54c78f(0x72d)](this[_0x54c78f(0x78b)]+'\x20('+this[_0x54c78f(0x799)]['wuid']+'):\x20customFieldVariables'),this[_0x54c78f(0x112)][_0x54c78f(0x72d)](_0x3b8425);let _0x6b1d9f=_0x3b8425[_0x54c78f(0xff)](_0x20a1cf=>{const _0x37e1a6=_0x54c78f;let _0x2b8bf6=this[_0x37e1a6(0x2f7)]?.[_0x37e1a6(0x6e8)][_0x37e1a6(0x71f)](_0x43958f=>_0x43958f[_0x37e1a6(0x5f4)]===_0x20a1cf[_0x37e1a6(0x5f4)]);if(!_0x2b8bf6)throw new Error(_0x37e1a6(0x7a5)+_0x20a1cf['name']);return{'_id':_0x2b8bf6[_0x37e1a6(0x68d)],'value':_0x20a1cf[_0x37e1a6(0x242)]};});this[_0x54c78f(0x112)][_0x54c78f(0x72d)](this[_0x54c78f(0x78b)]+'\x20('+this['instance'][_0x54c78f(0x3cb)]+'):\x20transformedCustomFieldVariables'),this['logger']['verbose'](_0x6b1d9f),await this[_0x54c78f(0x5e5)](_0x490cea[_0x54c78f(0x183)],_0x33dabf,_0x6b1d9f);}catch(_0x5695a7){this[_0x54c78f(0x112)][_0x54c78f(0x4b3)](this['instanceName']+'\x20('+this[_0x54c78f(0x799)][_0x54c78f(0x3cb)]+_0x54c78f(0x467)+(_0x5695a7 instanceof Error?_0x5695a7[_0x54c78f(0x499)]:JSON[_0x54c78f(0x1bb)](_0x5695a7,null,0x2)));}}else this['logger'][_0x54c78f(0x4b3)](this[_0x54c78f(0x78b)]+'\x20('+this[_0x54c78f(0x799)][_0x54c78f(0x3cb)]+_0x54c78f(0x2a3));}catch(_0x36144d){this['logger']['error'](this[_0x54c78f(0x78b)]+'\x20('+this[_0x54c78f(0x799)][_0x54c78f(0x3cb)]+_0x54c78f(0x452)+(_0x36144d instanceof Error?_0x36144d[_0x54c78f(0x499)]:JSON[_0x54c78f(0x1bb)](_0x36144d,null,0x2)));}}async[a0_0x3f352e(0x5e5)](_0x43eb38,_0x49fd48,_0x5170fa){const _0x3bfa8a=a0_0x3f352e;try{let _0x44cb54={'leadInfo.leadnome':_0x49fd48[_0x3bfa8a(0x544)],'leadInfo.nomecompleto':_0x49fd48[_0x3bfa8a(0x39c)],'leadInfo.email':_0x49fd48[_0x3bfa8a(0x555)],'leadInfo.cpf':_0x49fd48[_0x3bfa8a(0x744)],'leadInfo.status':_0x49fd48[_0x3bfa8a(0x62a)],'leadInfo.notas':_0x49fd48[_0x3bfa8a(0x21c)],'leadInfo.responsavelid':_0x49fd48[_0x3bfa8a(0x69d)],'leadInfo.tags':_0x49fd48[_0x3bfa8a(0x3e3)],'leadInfo.etiquetas':_0x49fd48[_0x3bfa8a(0x612)],'leadInfo.customFields':_0x5170fa,'leadInfo.atendimentoAberto':_0x49fd48[_0x3bfa8a(0x16d)]},_0x1a0b6c=await this[_0x3bfa8a(0x7be)]['chat'][_0x3bfa8a(0x312)]({'where':{'_id':_0x43eb38}},this['instance']['wuid']);if(!_0x1a0b6c)return _0x3bfa8a(0x3d5);let _0x515a1b=new Set(_0x1a0b6c['leadInfo'][_0x3bfa8a(0x612)]||[]),_0x51774e=new Set(_0x49fd48[_0x3bfa8a(0x612)]||[]),_0x2c23da=await this['repository'][_0x3bfa8a(0x716)][_0x3bfa8a(0x71f)]({'where':{}},this[_0x3bfa8a(0x799)][_0x3bfa8a(0x3cb)]),_0x1a69a3=new Set(_0x2c23da[_0x3bfa8a(0xff)](_0x35a412=>_0x35a412[_0x3bfa8a(0x68d)])),_0x414dfc=[..._0x51774e][_0x3bfa8a(0x495)](_0x4bfede=>!_0x515a1b[_0x3bfa8a(0x4e1)](_0x4bfede)&&_0x1a69a3[_0x3bfa8a(0x4e1)](_0x4bfede)),_0x4ed55a=[..._0x515a1b][_0x3bfa8a(0x495)](_0x1f1d40=>!_0x51774e[_0x3bfa8a(0x4e1)](_0x1f1d40));for(let _0x18329c of _0x414dfc)await this[_0x3bfa8a(0x258)](_0x18329c,_0x1a0b6c[_0x3bfa8a(0x68d)]),_0x515a1b[_0x3bfa8a(0x41a)](_0x18329c);for(let _0x36a642 of _0x4ed55a)await this[_0x3bfa8a(0x667)](_0x36a642,_0x1a0b6c[_0x3bfa8a(0x68d)]),_0x515a1b[_0x3bfa8a(0x49b)](_0x36a642);if('desativadoFluxoAte'in _0x49fd48){let _0x296ccf=_0x49fd48['desativadoFluxoAte'];_0x44cb54[_0x3bfa8a(0x5ad)]=_0x296ccf?Number(_0x296ccf):null;}if(_0x3bfa8a(0x16d)in _0x49fd48){let _0x25407c=_0x49fd48[_0x3bfa8a(0x16d)][_0x3bfa8a(0x711)]();_0x44cb54[_0x3bfa8a(0x7d3)]=_0x25407c===_0x3bfa8a(0xf3)||_0x25407c==='1'||_0x25407c===_0x3bfa8a(0x391)||_0x25407c===_0x3bfa8a(0x3bd);}let _0x2dea6c=await this[_0x3bfa8a(0x7be)][_0x3bfa8a(0x629)][_0x3bfa8a(0x372)]({'where':{'_id':_0x43eb38}},_0x44cb54,this['instance']['wuid']);_0x2dea6c?(this['logger'][_0x3bfa8a(0x72d)](this[_0x3bfa8a(0x78b)]+'\x20('+this[_0x3bfa8a(0x799)]['wuid']+_0x3bfa8a(0x407)+_0x2dea6c[_0x3bfa8a(0x68d)]),J(this[_0x3bfa8a(0x78b)],_0x3bfa8a(0x725),{'chat':_0x2dea6c})):this[_0x3bfa8a(0x112)][_0x3bfa8a(0x4b3)](this[_0x3bfa8a(0x78b)]+'\x20('+this[_0x3bfa8a(0x799)][_0x3bfa8a(0x3cb)]+_0x3bfa8a(0x78f));}catch(_0x3c6abc){this[_0x3bfa8a(0x112)][_0x3bfa8a(0x4b3)](this[_0x3bfa8a(0x78b)]+'\x20('+this[_0x3bfa8a(0x799)][_0x3bfa8a(0x3cb)]+_0x3bfa8a(0x76a)+(_0x3c6abc instanceof Error?_0x3c6abc['message']:JSON[_0x3bfa8a(0x1bb)](_0x3c6abc,null,0x2)));}}async[a0_0x3f352e(0x18d)](_0x2194f1,_0x25f00a){const _0x97c925=a0_0x3f352e;this[_0x97c925(0x112)][_0x97c925(0x72d)](this['instanceName']+'\x20('+this[_0x97c925(0x799)][_0x97c925(0x3cb)]+'):\x20atualização\x20chat:\x20'+_0x25f00a);try{let _0x32d285=await this['repository'][_0x97c925(0x629)][_0x97c925(0x372)]({'where':{'_id':_0x2194f1[_0x97c925(0x183)]}},{'leadInfo.desativadoFluxoAte':_0x25f00a},this[_0x97c925(0x799)][_0x97c925(0x3cb)]);this['logger'][_0x97c925(0x72d)](this[_0x97c925(0x78b)]+'\x20('+this[_0x97c925(0x799)]['wuid']+_0x97c925(0x560)+_0x2194f1[_0x97c925(0x68d)]),this[_0x97c925(0x112)][_0x97c925(0x72d)](this[_0x97c925(0x78b)]+'\x20('+this[_0x97c925(0x799)][_0x97c925(0x3cb)]+_0x97c925(0x5f6)+JSON[_0x97c925(0x1bb)](_0x32d285,null,0x2)),_0x32d285&&J(this[_0x97c925(0x78b)],'chats',{'chat':_0x32d285});}catch(_0x1edc38){this['logger'][_0x97c925(0x4b3)](this[_0x97c925(0x78b)]+'\x20('+this['instance'][_0x97c925(0x3cb)]+_0x97c925(0x7c4)+(_0x1edc38 instanceof Error?_0x1edc38[_0x97c925(0x499)]:JSON['stringify'](_0x1edc38,null,0x2)));}}async['findFlow'](_0x2453b1){const _0x55f4ca=a0_0x3f352e;try{this[_0x55f4ca(0x112)][_0x55f4ca(0x72d)](this['instanceName']+'\x20('+this[_0x55f4ca(0x799)]['wuid']+_0x55f4ca(0x4bf));let _0x23b09a=_0x2453b1[_0x55f4ca(0x166)](/\D/g,''),_0x29c406=this[_0x55f4ca(0x2f7)][_0x55f4ca(0x334)][_0x55f4ca(0x71f)](_0x37c7c2=>_0x37c7c2[_0x55f4ca(0x2f1)]===_0x23b09a);if(_0x29c406||(this['logger'][_0x55f4ca(0x72d)](this['instanceName']+'\x20('+this[_0x55f4ca(0x799)][_0x55f4ca(0x3cb)]+_0x55f4ca(0x1d4)),_0x29c406=this[_0x55f4ca(0x2f7)][_0x55f4ca(0x334)][_0x55f4ca(0x71f)](_0x4e408b=>_0x4e408b[_0x55f4ca(0x164)]===!0x0)),!_0x29c406)return this['logger'][_0x55f4ca(0x72d)](this[_0x55f4ca(0x78b)]+'\x20('+this[_0x55f4ca(0x799)][_0x55f4ca(0x3cb)]+_0x55f4ca(0x6b1)),null;let _0x34506f=await this[_0x55f4ca(0x7be)][_0x55f4ca(0x2b2)][_0x55f4ca(0x312)]({'where':{'_id':_0x29c406['_id']}});if(!_0x34506f||!_0x34506f[_0x55f4ca(0x385)]?.[_0x55f4ca(0x2bf)](this[_0x55f4ca(0x799)][_0x55f4ca(0x3cb)]))throw this[_0x55f4ca(0x112)]['error'](this[_0x55f4ca(0x78b)]+'\x20('+this[_0x55f4ca(0x799)][_0x55f4ca(0x3cb)]+_0x55f4ca(0x38b)+_0x34506f['_id']+_0x55f4ca(0x6bf)),new m('Flow\x20\x27'+_0x34506f['_id']+_0x55f4ca(0x6bf));return _0x34506f;}catch(_0x2a0c9e){return this[_0x55f4ca(0x112)][_0x55f4ca(0x4b3)](this[_0x55f4ca(0x78b)]+'\x20('+this[_0x55f4ca(0x799)][_0x55f4ca(0x3cb)]+'):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20'+(_0x2a0c9e instanceof Error?_0x2a0c9e[_0x55f4ca(0x499)]:JSON['stringify'](_0x2a0c9e,null,0x2))),null;}}async[a0_0x3f352e(0x30c)](_0x5b1eb9,_0xa60837){const _0x53acf8=a0_0x3f352e;try{let _0x245d29=!!_0xa60837['vote'],_0x1f9281=_0xa60837[_0x53acf8(0x4f4)],_0xd3485f=null;if(this[_0x53acf8(0x112)][_0x53acf8(0x72d)](this[_0x53acf8(0x78b)]+'\x20('+this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]+_0x53acf8(0x593)+_0x245d29+_0x53acf8(0x305)+_0x1f9281),_0x245d29){this[_0x53acf8(0x112)][_0x53acf8(0x72d)](this[_0x53acf8(0x78b)]+'\x20('+this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]+_0x53acf8(0xbd));let _0x316b8e={'where':{'remoteJid':_0x5b1eb9,'waitingMenu_id':_0x1f9281}};if(_0xd3485f=await this[_0x53acf8(0x7be)][_0x53acf8(0x5b0)][_0x53acf8(0x312)](_0x316b8e,this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]),!_0xd3485f)return this['logger'][_0x53acf8(0x72d)](this[_0x53acf8(0x78b)]+'\x20('+this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]+'):\x20não\x20encontrou'),null;let _0x2c4c09=Date[_0x53acf8(0x196)](),_0x2d5663=_0xd3485f?.[_0x53acf8(0x734)]||0x0,_0x53253f=_0x2c4c09-_0x2d5663*0x3c*0x3e8;if(_0xd3485f['lastInteraction']<_0x53253f){this[_0x53acf8(0x112)][_0x53acf8(0x72d)](this[_0x53acf8(0x78b)]+'\x20('+this['instance'][_0x53acf8(0x3cb)]+'):\x20Conversa\x20está\x20expirada\x20-\x20voto');let _0x1150d6={'number':_0xd3485f[_0x53acf8(0x183)],'options':{'delay':0x0},'textMessage':{'text':_0xd3485f[_0x53acf8(0x5a8)]}};await this[_0x53acf8(0x197)](_0x1150d6);let _0x41b6d2={'status':'closed','waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x53acf8(0x7be)][_0x53acf8(0x5b0)][_0x53acf8(0x372)](_0xd3485f[_0x53acf8(0x68d)],_0x41b6d2,this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]),null;}return _0xd3485f['lastInteraction']=Date[_0x53acf8(0x196)](),_0xd3485f[_0x53acf8(0x135)][_0x53acf8(0x159)]=_0xa60837,_0xd3485f;}else{this[_0x53acf8(0x112)]['verbose'](this['instanceName']+'\x20('+this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]+'):\x20'+this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]+'\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário'),this[_0x53acf8(0x112)][_0x53acf8(0x72d)](this[_0x53acf8(0x78b)]+'\x20('+this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]+'):\x20Procurando\x20conversa');let _0x205fa5={'where':{'remoteJid':_0x5b1eb9,'status':_0x53acf8(0x6d3)}};if(_0xd3485f=await this[_0x53acf8(0x7be)][_0x53acf8(0x5b0)][_0x53acf8(0x312)](_0x205fa5,this['instance']['wuid']),!_0xd3485f){let _0x3d6c29=await this[_0x53acf8(0x317)](_0x5b1eb9);if(_0x3d6c29&&(_0xd3485f=await this[_0x53acf8(0x786)](_0x3d6c29,_0xa60837[_0x53acf8(0x2bb)],_0xa60837)),!_0xd3485f)return null;}let _0x38bebb=Date[_0x53acf8(0x196)](),_0x57d2e9=_0xd3485f?.['minutesToClose']||0x0,_0x5005e1=_0x38bebb-_0x57d2e9*0x3c*0x3e8;if(this[_0x53acf8(0x112)][_0x53acf8(0x72d)](this[_0x53acf8(0x78b)]+'\x20('+this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]+_0x53acf8(0x64f)+_0x38bebb+_0x53acf8(0x67a)+_0x57d2e9+_0x53acf8(0xc6)+_0x5005e1),this[_0x53acf8(0x112)][_0x53acf8(0x72d)](this['instanceName']+'\x20('+this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]+_0x53acf8(0x2d5)),this[_0x53acf8(0x112)][_0x53acf8(0x72d)](this[_0x53acf8(0x78b)]+'\x20('+this['instance'][_0x53acf8(0x3cb)]+'):\x20conversation.lastInteraction:\x20'+_0xd3485f[_0x53acf8(0x751)]),this[_0x53acf8(0x112)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20expirationTime:\x20'+_0x5005e1),_0xd3485f['lastInteraction']<_0x5005e1){this[_0x53acf8(0x112)][_0x53acf8(0x72d)](this[_0x53acf8(0x78b)]+'\x20('+this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]+_0x53acf8(0x575));let _0x200b5b=await this[_0x53acf8(0x317)](_0x5b1eb9);if(_0x200b5b===null)return null;_0xd3485f&&await this[_0x53acf8(0x7be)][_0x53acf8(0x5b0)][_0x53acf8(0x372)](_0xd3485f['_id'],{'status':_0x53acf8(0x60b)},this[_0x53acf8(0x799)][_0x53acf8(0x3cb)]),_0xd3485f=await this[_0x53acf8(0x786)](_0x200b5b,_0xa60837[_0x53acf8(0x2bb)],_0xa60837);}return _0xd3485f[_0x53acf8(0x751)]=_0x38bebb,_0xd3485f[_0x53acf8(0x135)][_0x53acf8(0x159)]=_0xa60837,_0xd3485f;}}catch(_0x119a6e){return this[_0x53acf8(0x112)][_0x53acf8(0x4b3)](this['instanceName']+'\x20('+this[_0x53acf8(0x799)]['wuid']+_0x53acf8(0x699)+(_0x119a6e instanceof Error?_0x119a6e[_0x53acf8(0x499)]:JSON[_0x53acf8(0x1bb)](_0x119a6e,null,0x2))),null;}}async[a0_0x3f352e(0x786)](_0x1249d9,_0x467e79,_0x271db7){const _0x31c7da=a0_0x3f352e;this['logger'][_0x31c7da(0x72d)](this[_0x31c7da(0x78b)]+'\x20('+this['instance']['wuid']+_0x31c7da(0x6ba));try{let _0x26d853=require(_0x31c7da(0x354))[_0x31c7da(0x438)],_0x1154c0=Date['now'](),_0x47f38e='start',_0x14f5a3=_0x467e79[_0x31c7da(0x5cf)]?null:_0x271db7,_0x31a20f=_0x467e79[_0x31c7da(0x5cf)]?_0x271db7:null,_0x346023=_0x467e79[_0x31c7da(0x183)],_0x31d137=this[_0x31c7da(0x2f7)][_0x31c7da(0x334)]['find'](_0x1992ef=>_0x1992ef[_0x31c7da(0x68d)]===_0x1249d9[_0x31c7da(0x68d)]?.[_0x31c7da(0x123)]()),_0x1f47a6=_0x31d137?.[_0x31c7da(0x734)]??_0x1249d9[_0x31c7da(0x734)]??0x0,_0xdffd74=_0x31d137?.[_0x31c7da(0x4e4)]??_0x1249d9[_0x31c7da(0x4e4)]??!0x1;await this[_0x31c7da(0x11d)](_0x346023);let _0x4cdd29={'flowId':_0x1249d9[_0x31c7da(0x68d)],..._0x1249d9,'chatLog':null},_0x3bd14d=await this['variablesToObject'](_0x4cdd29[_0x31c7da(0x25c)]),_0x59eecf=await this['getVariablesChat'](_0x346023),_0x5290ef={..._0x3bd14d,..._0x59eecf,'_remoteJid':_0x346023},_0x59b4a0={'lastReceivedMessage':_0x14f5a3,'lastSendMessage':_0x31a20f,'lastBlockId':_0x47f38e,'lastCondition':!0x0,'realVariables':_0x5290ef};_0x4cdd29[_0x31c7da(0x135)]=_0x59b4a0,delete _0x4cdd29[_0x31c7da(0x68d)],_0x4cdd29['_id']=new _0x26d853(),_0x4cdd29[_0x31c7da(0x751)]=_0x1154c0,_0x4cdd29['status']=_0x31c7da(0x6d3),_0x4cdd29[_0x31c7da(0x183)]=_0x346023,_0x4cdd29[_0x31c7da(0x734)]=_0x1f47a6,_0x4cdd29['readMessages']=_0xdffd74;let _0x20d5bd=await this['repository'][_0x31c7da(0x5b0)]['updateOne'](_0x4cdd29['_id'],_0x4cdd29,this[_0x31c7da(0x799)][_0x31c7da(0x3cb)]);return this[_0x31c7da(0x112)][_0x31c7da(0x72d)](this[_0x31c7da(0x78b)]+'\x20('+this[_0x31c7da(0x799)][_0x31c7da(0x3cb)]+_0x31c7da(0x3f7)),_0x20d5bd?_0x4cdd29:null;}catch(_0x2708f7){return this[_0x31c7da(0x112)]['error'](this['instanceName']+'\x20('+this[_0x31c7da(0x799)]['wuid']+_0x31c7da(0x1d7)+(_0x2708f7 instanceof Error?_0x2708f7[_0x31c7da(0x499)]:JSON[_0x31c7da(0x1bb)](_0x2708f7,null,0x2))),_0x2708f7;}}async[a0_0x3f352e(0x376)](_0x23d5ba,_0x4481f2){const _0x46d492=a0_0x3f352e;let _0x5a4f3e=_0x23d5ba['remoteJid'];_0x4481f2[_0x46d492(0x7e9)][_0x46d492(0x183)]&&_0x4481f2[_0x46d492(0x7e9)]['remoteJid'][_0x46d492(0x1e6)]()!==''&&(_0x5a4f3e=_0x4481f2[_0x46d492(0x7e9)][_0x46d492(0x183)]['trim']()),this[_0x46d492(0x112)][_0x46d492(0x72d)](this[_0x46d492(0x78b)]+'\x20('+this['instance'][_0x46d492(0x3cb)]+_0x46d492(0x424));let _0xdbc674={'number':_0x5a4f3e,'options':{'delay':_0x4481f2['uazapi'][_0x46d492(0x6a3)],'linkPreview':_0x4481f2['uazapi'][_0x46d492(0x47b)]},'textMessage':{'text':_0x4481f2[_0x46d492(0x7e9)]['text']}};try{let _0x17bba1=await this['textMessage'](_0xdbc674);if(_0x17bba1){let _0x8cc9e6={'_id':_0x17bba1[_0x46d492(0x2bb)]['id'],'_fromMe':_0x17bba1[_0x46d492(0x2bb)][_0x46d492(0x5cf)],'_remoteJid':_0x17bba1[_0x46d492(0x2bb)][_0x46d492(0x183)]},_0x50e30e=(0x0,w[_0x46d492(0x411)])(_0x17bba1['message']),_0x254c4c=(0x0,w[_0x46d492(0x7ea)])(_0x50e30e);_0x23d5ba[_0x46d492(0x135)][_0x46d492(0x195)]=_0x4481f2[_0x46d492(0x68d)][_0x46d492(0x123)]();let {message_normalized:_0x1d89dc}=this[_0x46d492(0x4eb)](_0x50e30e,_0x254c4c,null);_0x23d5ba[_0x46d492(0x135)][_0x46d492(0x3bf)]=await _0x1d89dc;let _0x31ab31={'messageId':_0x17bba1[_0x46d492(0x2bb)]['id']},_0x2cb072=_0x23d5ba[_0x46d492(0x135)][_0x46d492(0x15e)];Object['assign'](_0x2cb072,_0x8cc9e6),_0x23d5ba[_0x46d492(0x135)][_0x46d492(0x15e)]=_0x2cb072,this[_0x46d492(0x270)](_0x23d5ba,_0x4481f2,_0x31ab31);}else{let _0x503904={'error':!0x0};this['updateConversation'](_0x23d5ba,_0x4481f2,_0x503904),this['logger']['error'](this[_0x46d492(0x78b)]+'\x20('+this[_0x46d492(0x799)][_0x46d492(0x3cb)]+_0x46d492(0x3f3));}}catch(_0x538420){let _0x2d5189={'error':!0x0,'errorLog':_0x538420[_0x46d492(0x123)]()};this[_0x46d492(0x270)](_0x23d5ba,_0x4481f2,_0x2d5189),this[_0x46d492(0x112)]['error'](this[_0x46d492(0x78b)]+'\x20('+this[_0x46d492(0x799)]['wuid']+_0x46d492(0x2c5)+(_0x538420 instanceof Error?_0x538420['message']:JSON[_0x46d492(0x1bb)](_0x538420,null,0x2)));}}async['uazapiSendMedia'](_0x2cc1e7,_0x390f6a){const _0x2ff57b=a0_0x3f352e;let _0x2009db=_0x2cc1e7[_0x2ff57b(0x183)];_0x390f6a[_0x2ff57b(0x7e9)]['remoteJid']&&_0x390f6a['uazapi'][_0x2ff57b(0x183)]['trim']()!==''&&(_0x2009db=_0x390f6a['uazapi'][_0x2ff57b(0x183)][_0x2ff57b(0x1e6)]()),this[_0x2ff57b(0x112)][_0x2ff57b(0x72d)](this['instanceName']+'\x20('+this[_0x2ff57b(0x799)][_0x2ff57b(0x3cb)]+_0x2ff57b(0x789));let _0x3fdcb4={'number':_0x2009db,'options':{'delay':_0x390f6a[_0x2ff57b(0x7e9)][_0x2ff57b(0x6a3)],'linkPreview':_0x390f6a['uazapi'][_0x2ff57b(0x47b)]},'mediaMessage':{'mediatype':_0x390f6a[_0x2ff57b(0x7e9)][_0x2ff57b(0x220)],'caption':_0x390f6a[_0x2ff57b(0x7e9)]['caption'],'media':_0x390f6a[_0x2ff57b(0x7e9)][_0x2ff57b(0x207)],'fileName':_0x390f6a['uazapi'][_0x2ff57b(0x241)]}};try{let _0x4fb88a=await this['mediaMessage'](_0x3fdcb4);if(_0x4fb88a){let _0x22b959={'_id':_0x4fb88a[_0x2ff57b(0x2bb)]['id'],'_fromMe':_0x4fb88a[_0x2ff57b(0x2bb)][_0x2ff57b(0x5cf)],'_remoteJid':_0x4fb88a[_0x2ff57b(0x2bb)][_0x2ff57b(0x183)]},_0x2329a9=(0x0,w[_0x2ff57b(0x411)])(_0x4fb88a[_0x2ff57b(0x499)]),_0x4126a7=(0x0,w[_0x2ff57b(0x7ea)])(_0x2329a9);_0x2cc1e7[_0x2ff57b(0x135)][_0x2ff57b(0x195)]=_0x390f6a[_0x2ff57b(0x68d)][_0x2ff57b(0x123)]();let {message_normalized:_0x130189}=this[_0x2ff57b(0x4eb)](_0x2329a9,_0x4126a7,null);_0x2cc1e7[_0x2ff57b(0x135)][_0x2ff57b(0x3bf)]=await _0x130189;let _0x4d9901={'messageId':_0x4fb88a[_0x2ff57b(0x2bb)]['id']},_0xf86009=_0x2cc1e7[_0x2ff57b(0x135)][_0x2ff57b(0x15e)];Object[_0x2ff57b(0x4ce)](_0xf86009,_0x22b959),_0x2cc1e7['chatLog'][_0x2ff57b(0x15e)]=_0xf86009,this['updateConversation'](_0x2cc1e7,_0x390f6a,_0x4d9901);}else{let _0x3cc74a={'error':!0x0};this[_0x2ff57b(0x270)](_0x2cc1e7,_0x390f6a,_0x3cc74a),this[_0x2ff57b(0x112)][_0x2ff57b(0x4b3)](this[_0x2ff57b(0x78b)]+'\x20('+this[_0x2ff57b(0x799)][_0x2ff57b(0x3cb)]+_0x2ff57b(0x278));}}catch(_0x276a3a){let _0x49a661={'error':!0x0,'errorLog':_0x276a3a[_0x2ff57b(0x123)]()};this[_0x2ff57b(0x270)](_0x2cc1e7,_0x390f6a,_0x49a661),this[_0x2ff57b(0x112)][_0x2ff57b(0x4b3)](this[_0x2ff57b(0x78b)]+'\x20('+this['instance']['wuid']+_0x2ff57b(0x470)+(_0x276a3a instanceof Error?_0x276a3a['message']:JSON[_0x2ff57b(0x1bb)](_0x276a3a,null,0x2)));}}async[a0_0x3f352e(0x3c6)](_0x438a64,_0x23574d){const _0x1b04c3=a0_0x3f352e;let _0x2c31f8=_0x438a64[_0x1b04c3(0x183)];_0x23574d[_0x1b04c3(0x7e9)][_0x1b04c3(0x183)]&&_0x23574d[_0x1b04c3(0x7e9)][_0x1b04c3(0x183)][_0x1b04c3(0x1e6)]()!==''&&(_0x2c31f8=_0x23574d[_0x1b04c3(0x7e9)][_0x1b04c3(0x183)]['trim']()),this[_0x1b04c3(0x112)][_0x1b04c3(0x72d)](this[_0x1b04c3(0x78b)]+'\x20('+this[_0x1b04c3(0x799)][_0x1b04c3(0x3cb)]+_0x1b04c3(0x5b9));let _0x450273={'number':_0x2c31f8,'options':{'delay':_0x23574d['uazapi'][_0x1b04c3(0x6a3)]},'locationMessage':{'name':_0x23574d[_0x1b04c3(0x7e9)]['name'],'address':_0x23574d[_0x1b04c3(0x7e9)][_0x1b04c3(0x604)],'latitude':_0x23574d['uazapi'][_0x1b04c3(0x2d2)],'longitude':_0x23574d['uazapi']['longitude']}};try{let _0x266bbb=await this[_0x1b04c3(0x3a9)](_0x450273);if(_0x266bbb){let _0x328f4e={'_id':_0x266bbb['key']['id'],'_fromMe':_0x266bbb[_0x1b04c3(0x2bb)]['fromMe'],'_remoteJid':_0x266bbb[_0x1b04c3(0x2bb)][_0x1b04c3(0x183)]},_0x4155c4=(0x0,w['normalizeMessageContent'])(_0x266bbb[_0x1b04c3(0x499)]),_0x4c576e=(0x0,w[_0x1b04c3(0x7ea)])(_0x4155c4);_0x438a64[_0x1b04c3(0x135)]['lastBlockId']=_0x23574d[_0x1b04c3(0x68d)][_0x1b04c3(0x123)]();let {message_normalized:_0x57162c}=this[_0x1b04c3(0x4eb)](_0x4155c4,_0x4c576e,null);_0x438a64[_0x1b04c3(0x135)][_0x1b04c3(0x3bf)]=await _0x57162c;let _0x5d1cb5={'messageId':_0x266bbb[_0x1b04c3(0x2bb)]['id']},_0x40a5ce=_0x438a64[_0x1b04c3(0x135)][_0x1b04c3(0x15e)];Object[_0x1b04c3(0x4ce)](_0x40a5ce,_0x328f4e),_0x438a64[_0x1b04c3(0x135)]['realVariables']=_0x40a5ce,this[_0x1b04c3(0x270)](_0x438a64,_0x23574d,_0x5d1cb5);}else{let _0x4f9c97={'error':!0x0};this[_0x1b04c3(0x270)](_0x438a64,_0x23574d,_0x4f9c97),this['logger'][_0x1b04c3(0x4b3)](this['instanceName']+'\x20('+this[_0x1b04c3(0x799)][_0x1b04c3(0x3cb)]+_0x1b04c3(0x237));}}catch(_0x300598){let _0x139730={'error':!0x0,'errorLog':_0x300598['toString']()};this[_0x1b04c3(0x270)](_0x438a64,_0x23574d,_0x139730),this[_0x1b04c3(0x112)][_0x1b04c3(0x4b3)](this[_0x1b04c3(0x78b)]+'\x20('+this[_0x1b04c3(0x799)][_0x1b04c3(0x3cb)]+_0x1b04c3(0x3ae)+(_0x300598 instanceof Error?_0x300598[_0x1b04c3(0x499)]:JSON[_0x1b04c3(0x1bb)](_0x300598,null,0x2)));}}async[a0_0x3f352e(0x6eb)](_0x5dfce4,_0x482aba){const _0x509182=a0_0x3f352e;let _0x370a39=_0x5dfce4[_0x509182(0x183)];_0x482aba[_0x509182(0x7e9)][_0x509182(0x183)]&&_0x482aba[_0x509182(0x7e9)][_0x509182(0x183)]['trim']()!==''&&(_0x370a39=_0x482aba['uazapi'][_0x509182(0x183)][_0x509182(0x1e6)]()),this[_0x509182(0x112)][_0x509182(0x72d)](this['instanceName']+'\x20('+this[_0x509182(0x799)][_0x509182(0x3cb)]+_0x509182(0x490));let _0x58a72d={'number':_0x370a39,'options':{'delay':_0x482aba[_0x509182(0x7e9)]['delay']},'audioMessage':{'audio':_0x482aba[_0x509182(0x7e9)]['audio']}};try{let _0x266206=await this[_0x509182(0x491)](_0x58a72d);if(_0x266206){let _0x47714f={'_id':_0x266206[_0x509182(0x2bb)]['id'],'_fromMe':_0x266206[_0x509182(0x2bb)][_0x509182(0x5cf)],'_remoteJid':_0x266206[_0x509182(0x2bb)][_0x509182(0x183)]},_0x1b147d=(0x0,w[_0x509182(0x411)])(_0x266206[_0x509182(0x499)]),_0x5dc2d2=(0x0,w['getContentType'])(_0x1b147d);_0x5dfce4['chatLog'][_0x509182(0x195)]=_0x482aba['_id']['toString']();let {message_normalized:_0x2767a1}=this[_0x509182(0x4eb)](_0x1b147d,_0x5dc2d2,null);_0x5dfce4[_0x509182(0x135)]['lastSendMessage']=await _0x2767a1;let _0x23bee0={'messageId':_0x266206['key']['id']},_0x2203a8=_0x5dfce4[_0x509182(0x135)]['realVariables'];Object[_0x509182(0x4ce)](_0x2203a8,_0x47714f),_0x5dfce4[_0x509182(0x135)][_0x509182(0x15e)]=_0x2203a8,this['updateConversation'](_0x5dfce4,_0x482aba,_0x23bee0);}else{let _0x33dfe8={'error':!0x0};this[_0x509182(0x270)](_0x5dfce4,_0x482aba,_0x33dfe8),this[_0x509182(0x112)][_0x509182(0x4b3)](this[_0x509182(0x78b)]+'\x20('+this[_0x509182(0x799)]['wuid']+_0x509182(0x515));}}catch(_0x3718c0){let _0x37f559={'error':!0x0,'errorLog':_0x3718c0['toString']()};this[_0x509182(0x270)](_0x5dfce4,_0x482aba,_0x37f559),this[_0x509182(0x112)][_0x509182(0x4b3)](this[_0x509182(0x78b)]+'\x20('+this[_0x509182(0x799)][_0x509182(0x3cb)]+_0x509182(0x57e)+(_0x3718c0 instanceof Error?_0x3718c0[_0x509182(0x499)]:JSON['stringify'](_0x3718c0,null,0x2)));}}async[a0_0x3f352e(0xaa)](_0x4419e2,_0x43894e){const _0x119515=a0_0x3f352e;let _0xaab0dc=_0x4419e2[_0x119515(0x183)];_0x43894e[_0x119515(0x7e9)][_0x119515(0x183)]&&_0x43894e[_0x119515(0x7e9)]['remoteJid'][_0x119515(0x1e6)]()!==''&&(_0xaab0dc=_0x43894e[_0x119515(0x7e9)][_0x119515(0x183)][_0x119515(0x1e6)]()),this[_0x119515(0x112)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x119515(0x24d));let _0x2f6ce3={'number':_0xaab0dc,'options':{'delay':_0x43894e[_0x119515(0x7e9)]['delay']},'contactMessage':[{'fullName':_0x43894e['uazapi'][_0x119515(0x627)],'phoneNumber':_0x43894e[_0x119515(0x7e9)]['phoneNumber']}]};try{let _0x456253=await this[_0x119515(0x1fa)](_0x2f6ce3);if(_0x456253){let _0x51ae13={'_id':_0x456253['key']['id'],'_fromMe':_0x456253[_0x119515(0x2bb)][_0x119515(0x5cf)],'_remoteJid':_0x456253[_0x119515(0x2bb)]['remoteJid']},_0x21e956=(0x0,w[_0x119515(0x411)])(_0x456253[_0x119515(0x499)]),_0x369b16=(0x0,w[_0x119515(0x7ea)])(_0x21e956);_0x4419e2['chatLog'][_0x119515(0x195)]=_0x43894e[_0x119515(0x68d)][_0x119515(0x123)]();let {message_normalized:_0x3841b6}=this[_0x119515(0x4eb)](_0x21e956,_0x369b16,null);_0x4419e2['chatLog'][_0x119515(0x3bf)]=await _0x3841b6;let _0x3ed03a={'messageId':_0x456253[_0x119515(0x2bb)]['id']},_0xcfc259=_0x4419e2[_0x119515(0x135)][_0x119515(0x15e)];Object[_0x119515(0x4ce)](_0xcfc259,_0x51ae13),_0x4419e2['chatLog'][_0x119515(0x15e)]=_0xcfc259,this[_0x119515(0x270)](_0x4419e2,_0x43894e,_0x3ed03a);}else{let _0x48c239={'error':!0x0};this['updateConversation'](_0x4419e2,_0x43894e,_0x48c239),this['logger']['error'](this[_0x119515(0x78b)]+'\x20('+this[_0x119515(0x799)][_0x119515(0x3cb)]+_0x119515(0x102));}}catch(_0x392975){let _0x49e06d={'error':!0x0,'errorLog':_0x392975[_0x119515(0x123)]()};this[_0x119515(0x270)](_0x4419e2,_0x43894e,_0x49e06d),this[_0x119515(0x112)]['error'](this[_0x119515(0x78b)]+'\x20('+this['instance'][_0x119515(0x3cb)]+_0x119515(0x61f)+(_0x392975 instanceof Error?_0x392975['message']:JSON['stringify'](_0x392975,null,0x2)));}}[a0_0x3f352e(0x750)](_0x452f89,_0x1009c7){const _0x2a47a0=a0_0x3f352e;for(let _0x549478 of _0x452f89)_0x549478[_0x2a47a0(0x533)]&&(_0x549478['option']=this[_0x2a47a0(0x543)](_0x549478[_0x2a47a0(0x533)],_0x1009c7)),_0x549478[_0x2a47a0(0x26e)]&&(_0x549478[_0x2a47a0(0x26e)]=this[_0x2a47a0(0x543)](_0x549478['optionDescription'],_0x1009c7));}async['uazapiSendMenu'](_0x281157,_0x1f05b9){const _0x25aa40=a0_0x3f352e;let _0x89bf29=_0x281157[_0x25aa40(0x183)];_0x1f05b9[_0x25aa40(0x7e9)][_0x25aa40(0x183)]&&_0x1f05b9[_0x25aa40(0x7e9)][_0x25aa40(0x183)][_0x25aa40(0x1e6)]()!==''&&(_0x89bf29=_0x1f05b9[_0x25aa40(0x7e9)][_0x25aa40(0x183)][_0x25aa40(0x1e6)]()),this[_0x25aa40(0x112)]['verbose'](this[_0x25aa40(0x78b)]+'\x20('+this[_0x25aa40(0x799)][_0x25aa40(0x3cb)]+_0x25aa40(0x7c6));let _0x29531b=_0x281157[_0x25aa40(0x225)][_0x25aa40(0x495)](_0x57d0e4=>_0x57d0e4[_0x25aa40(0x4fc)]===_0x1f05b9[_0x25aa40(0x68d)])[_0x25aa40(0x344)]((_0x104d04,_0x4c6177)=>_0x104d04[_0x25aa40(0x6ab)]-_0x4c6177['order']);this[_0x25aa40(0x750)](_0x29531b,_0x281157[_0x25aa40(0x135)][_0x25aa40(0x15e)]);let _0x58f0db=_0x29531b[_0x25aa40(0xff)](_0x3a7084=>_0x3a7084['option']),_0x5bcbd1={'number':_0x89bf29,'menuMessage':{'type':_0x1f05b9[_0x25aa40(0x7e9)][_0x25aa40(0x267)]||_0x25aa40(0x28e),'text':_0x1f05b9[_0x25aa40(0x7e9)]['text']||_0x1f05b9[_0x25aa40(0x7e9)][_0x25aa40(0x5f4)],'footerText':_0x1f05b9[_0x25aa40(0x7e9)][_0x25aa40(0x656)],'buttonText':_0x1f05b9[_0x25aa40(0x7e9)]['buttonText'],'selectableCount':0x1,'choices':_0x58f0db},'options':{'delay':_0x1f05b9[_0x25aa40(0x7e9)][_0x25aa40(0x6a3)]}};try{let _0x155995=await this['menuMessage'](_0x5bcbd1);if(_0x155995){let _0x54e629={'_id':_0x155995['key']['id'],'_fromMe':_0x155995[_0x25aa40(0x2bb)][_0x25aa40(0x5cf)],'_remoteJid':_0x155995[_0x25aa40(0x2bb)][_0x25aa40(0x183)]};_0x1f05b9[_0x25aa40(0x7e9)][_0x25aa40(0x113)]===!0x0&&(_0x281157[_0x25aa40(0x62a)]='waitingForReplyMenu',this[_0x25aa40(0x112)][_0x25aa40(0x72d)](this[_0x25aa40(0x78b)]+'\x20('+this['instance']['wuid']+_0x25aa40(0x421)+_0x281157[_0x25aa40(0x62a)])),this[_0x25aa40(0x112)][_0x25aa40(0x72d)](this[_0x25aa40(0x78b)]+'\x20('+this[_0x25aa40(0x799)][_0x25aa40(0x3cb)]+'):\x20nextBlock.uazapi.name'+(_0x1f05b9[_0x25aa40(0x7e9)]['name']||_0x1f05b9[_0x25aa40(0x7e9)]['text'])),_0x281157['waitingMenu_id']=_0x155995[_0x25aa40(0x2bb)]['id'],_0x281157[_0x25aa40(0x4d0)]=_0x1f05b9[_0x25aa40(0x7e9)][_0x25aa40(0x5f4)]||_0x1f05b9[_0x25aa40(0x7e9)]['text'],_0x281157['waitingMenu_replyOptions']=_0x29531b,_0x1f05b9[_0x25aa40(0x7e9)][_0x25aa40(0x2eb)]&&(_0x281157[_0x25aa40(0x5a8)]=_0x1f05b9[_0x25aa40(0x7e9)][_0x25aa40(0x2eb)]),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x25aa40(0x799)][_0x25aa40(0x3cb)]+'):\x20conversation.waitingMenu_name'+_0x281157['waitingMenu_text']);let _0xdf2772=(0x0,w[_0x25aa40(0x411)])(_0x155995[_0x25aa40(0x499)]),_0x2950cc=(0x0,w['getContentType'])(_0xdf2772);_0x281157[_0x25aa40(0x135)]['lastBlockId']=_0x1f05b9[_0x25aa40(0x68d)][_0x25aa40(0x123)]();let {message_normalized:_0x265ac5}=this['normalizeMessage'](_0xdf2772,_0x2950cc,null);_0x281157['chatLog'][_0x25aa40(0x3bf)]=await _0x265ac5;let _0x85ece1={'messageId':_0x155995['key']['id']},_0x191966=_0x281157[_0x25aa40(0x135)][_0x25aa40(0x15e)];Object[_0x25aa40(0x4ce)](_0x191966,_0x54e629),_0x281157[_0x25aa40(0x135)]['realVariables']=_0x191966,this[_0x25aa40(0x270)](_0x281157,_0x1f05b9,_0x85ece1);}else{let _0x1260ab={'error':!0x0};this[_0x25aa40(0x270)](_0x281157,_0x1f05b9,_0x1260ab),this[_0x25aa40(0x112)][_0x25aa40(0x4b3)](this['instanceName']+'\x20('+this[_0x25aa40(0x799)][_0x25aa40(0x3cb)]+_0x25aa40(0x2e0));}}catch(_0x480ab6){let _0x37e3a4={'error':!0x0,'errorLog':_0x480ab6 instanceof Error?_0x480ab6['message']:JSON['stringify'](_0x480ab6,null,0x2)};this[_0x25aa40(0x270)](_0x281157,_0x1f05b9,_0x37e3a4),this[_0x25aa40(0x112)][_0x25aa40(0x4b3)](this['instanceName']+'\x20('+this[_0x25aa40(0x799)][_0x25aa40(0x3cb)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20'+(_0x480ab6 instanceof Error?_0x480ab6[_0x25aa40(0x499)]:JSON[_0x25aa40(0x1bb)](_0x480ab6,null,0x2)));}}async[a0_0x3f352e(0x39f)](_0x14660b,_0xc93357){const _0x17ea54=a0_0x3f352e;this[_0x17ea54(0x112)][_0x17ea54(0x72d)](this['instanceName']+'\x20('+this[_0x17ea54(0x799)][_0x17ea54(0x3cb)]+_0x17ea54(0x766));let _0x1b9fb3=_0x14660b[_0x17ea54(0x135)]['blockLogs']['find'](_0x14d14b=>_0x14d14b['blockId'][_0x17ea54(0x123)]()===_0xc93357[_0x17ea54(0x7e9)]['blockId'][_0x17ea54(0x123)]()),_0x59e675={'id':_0x1b9fb3[_0x17ea54(0x162)],'remoteJid':_0x1b9fb3[_0x17ea54(0x183)],'fromMe':_0x1b9fb3['fromMe']};try{let _0x5d2e9c=await this[_0x17ea54(0x3b8)](_0x59e675);if(_0x5d2e9c){let _0x4031cb=(0x0,w[_0x17ea54(0x411)])(_0x5d2e9c[_0x17ea54(0x499)]),_0x2ae0d6=(0x0,w[_0x17ea54(0x7ea)])(_0x4031cb);_0x14660b[_0x17ea54(0x135)][_0x17ea54(0x195)]=_0xc93357[_0x17ea54(0x68d)]['toString']();let {message_normalized:_0xf51e83}=this[_0x17ea54(0x4eb)](_0x4031cb,_0x2ae0d6,null);_0x14660b['chatLog'][_0x17ea54(0x3bf)]=await _0xf51e83;let _0x2247ce={};this[_0x17ea54(0x270)](_0x14660b,_0xc93357,_0x2247ce);}else{let _0x20ad4f={'error':!0x0};this[_0x17ea54(0x270)](_0x14660b,_0xc93357,_0x20ad4f),this['logger'][_0x17ea54(0x4b3)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x17ea54(0x70e));}}catch(_0x628b92){let _0x3e689e={'error':!0x0,'errorLog':_0x628b92 instanceof Error?_0x628b92[_0x17ea54(0x499)]:JSON[_0x17ea54(0x1bb)](_0x628b92,null,0x2)};this['updateConversation'](_0x14660b,_0xc93357,_0x3e689e),this['logger'][_0x17ea54(0x4b3)](this['instanceName']+'\x20('+this['instance'][_0x17ea54(0x3cb)]+_0x17ea54(0x138)+(_0x628b92 instanceof Error?_0x628b92[_0x17ea54(0x499)]:JSON['stringify'](_0x628b92,null,0x2)));}}async[a0_0x3f352e(0x6cd)](_0x58ebd9,_0x4d3092){const _0x1bd1cb=a0_0x3f352e;if(_0x58ebd9[_0x1bd1cb(0x5f4)]||(_0x58ebd9['name']=(0x0,X['v4'])()),_0x4d3092!==$i&&_0x58ebd9?.[_0x1bd1cb(0x5de)])throw new m(_0x1bd1cb(0xa1));if(_0x1bd1cb(0x68d)in _0x58ebd9&&'owner'in _0x58ebd9)return this[_0x1bd1cb(0x2fe)](_0x58ebd9[_0x1bd1cb(0x19a)],_0x58ebd9[_0x1bd1cb(0x68d)]);this[_0x1bd1cb(0x112)]['verbose'](this[_0x1bd1cb(0x78b)]+'\x20('+this[_0x1bd1cb(0x799)][_0x1bd1cb(0x3cb)]+_0x1bd1cb(0x343));let _0x58fb1b=this[_0x1bd1cb(0x3cd)](_0x58ebd9[_0x1bd1cb(0x5f4)]),_0x25d3e4=new he[(_0x1bd1cb(0x48f))][(_0x1bd1cb(0x438))](),_0x54c3f5={'_id':_0x25d3e4,'default':!0x0,'title':_0x1bd1cb(0x3ee),'x':0x0,'y':0x0},_0xa5085e={'_id':new he['Types'][(_0x1bd1cb(0x438))](),'order':0x1,'groupId':_0x25d3e4[_0x1bd1cb(0x123)](),'type':_0x1bd1cb(0x691)},_0x127777=this[_0x1bd1cb(0x799)]['wuid'],_0x3c4bfc={'_id':(0x0,X['v4'])(),'owner':_0x127777,'name':_0x58fb1b,'whoCanEdit':[_0x127777],'whoCanUse':[_0x127777],'groups':[_0x54c3f5],'blocks':[_0xa5085e],..._0x58ebd9};try{let _0x81877b=await this[_0x1bd1cb(0x7be)]['flow'][_0x1bd1cb(0x3e9)](_0x3c4bfc);return await this[_0x1bd1cb(0x13b)](),_0x81877b;}catch(_0x503811){let _0x2d77bc=_0x1bd1cb(0x321),_0x4e230a=_0x503811 instanceof Error?_0x503811[_0x1bd1cb(0x499)]:typeof _0x503811==_0x1bd1cb(0x5a0)?JSON['stringify'](_0x503811):_0x503811,_0x19bc54=_0x2d77bc+':\x20'+_0x4e230a;throw this['logger']['error'](this[_0x1bd1cb(0x78b)]+'\x20('+this[_0x1bd1cb(0x799)][_0x1bd1cb(0x3cb)]+'):\x20'+_0x19bc54),new m(_0x19bc54);}}async['AddUserFlow'](_0x570854,_0x251052){const _0xe29f00=a0_0x3f352e;try{this[_0xe29f00(0x112)][_0xe29f00(0x72d)](this[_0xe29f00(0x78b)]+'\x20('+this['instance'][_0xe29f00(0x3cb)]+_0xe29f00(0x294));let _0x1219f8=await this[_0xe29f00(0x7be)][_0xe29f00(0x2b2)][_0xe29f00(0x312)]({'where':{'_id':_0x251052,'owner':_0x570854}});if(!_0x1219f8)throw new m('Nenhum\x20fluxo\x20correspondente\x20encontrado.');if(_0x1219f8['shareFlow']===!0x1&&!_0x1219f8[_0xe29f00(0x5de)])throw new m(_0xe29f00(0x723));let _0x7318e3=new Set(_0x1219f8[_0xe29f00(0x385)]??[]);_0x7318e3['add'](this['instance'][_0xe29f00(0x3cb)]);let _0x3824eb=await this[_0xe29f00(0x7be)][_0xe29f00(0x2b2)][_0xe29f00(0x372)](_0x251052,{..._0x1219f8,'whoCanUse':Array[_0xe29f00(0x3a3)](_0x7318e3)});return await this[_0xe29f00(0x13b)](),_0x3824eb;}catch(_0x37c71e){let _0x1cf4b1=_0xe29f00(0x182),_0x312a39=_0x37c71e instanceof Error?_0x37c71e[_0xe29f00(0x499)]:typeof _0x37c71e=='object'?JSON[_0xe29f00(0x1bb)](_0x37c71e):_0x37c71e,_0x55a5d1=_0x1cf4b1+':\x20'+_0x312a39;throw this[_0xe29f00(0x112)][_0xe29f00(0x4b3)](this[_0xe29f00(0x78b)]+'\x20('+this[_0xe29f00(0x799)]['wuid']+'):\x20'+_0x55a5d1),new m(_0x55a5d1);}}['getUniqueFlowName'](_0x14d492){const _0x2fa4e4=a0_0x3f352e;let _0x270fb4=_0x14d492,_0x58f6ef=0x1;for(;this['AutomateSystem'][_0x2fa4e4(0x334)][_0x2fa4e4(0x378)](_0x42beb5=>_0x42beb5[_0x2fa4e4(0x5f4)]===_0x270fb4);)_0x58f6ef++,_0x270fb4=_0x14d492+'\x20('+_0x58f6ef+')';return _0x270fb4;}async[a0_0x3f352e(0x21f)](_0x2da493){const _0x4b27ef=a0_0x3f352e;try{if(this[_0x4b27ef(0x112)]['verbose'](this[_0x4b27ef(0x78b)]+'\x20('+this[_0x4b27ef(0x799)][_0x4b27ef(0x3cb)]+_0x4b27ef(0x6ff)+_0x2da493['_id']+_0x4b27ef(0x308)+_0x2da493[_0x4b27ef(0xc7)]),!this[_0x4b27ef(0x2f7)][_0x4b27ef(0x334)][_0x4b27ef(0x71f)](_0xd3f2c8=>_0xd3f2c8[_0x4b27ef(0x68d)]===_0x2da493[_0x4b27ef(0x68d)]))throw this[_0x4b27ef(0x112)][_0x4b27ef(0x72d)](this['instanceName']+'\x20('+this[_0x4b27ef(0x799)][_0x4b27ef(0x3cb)]+'):\x20Fluxo\x20\x27'+_0x2da493[_0x4b27ef(0x68d)]+'\x27\x20não\x20encontrado'),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x1330e4=await this[_0x4b27ef(0x7be)][_0x4b27ef(0x2b2)]['findOne']({'where':{'_id':_0x2da493[_0x4b27ef(0x68d)]}});if(!_0x1330e4)throw new m(_0x4b27ef(0x35d));if(this[_0x4b27ef(0x799)]['wuid']===_0x1330e4[_0x4b27ef(0x19a)]){this[_0x4b27ef(0x112)][_0x4b27ef(0x72d)](this[_0x4b27ef(0x78b)]+'\x20('+this['instance'][_0x4b27ef(0x3cb)]+'):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27'+_0x2da493[_0x4b27ef(0x68d)]+'\x27\x20do\x20banco\x20de\x20dados...');let _0x3791c3=await this['repository']['flow']['deleteOne']({'where':{'_id':_0x2da493[_0x4b27ef(0x68d)]}});return await this[_0x4b27ef(0x13b)](),_0x3791c3;}return this['logger'][_0x4b27ef(0x72d)](this[_0x4b27ef(0x78b)]+'\x20('+this['instance'][_0x4b27ef(0x3cb)]+_0x4b27ef(0x14f)+this['instance'][_0x4b27ef(0x3cb)]+_0x4b27ef(0x7a3)+_0x2da493[_0x4b27ef(0x68d)]+_0x4b27ef(0x4b9)),_0x1330e4[_0x4b27ef(0x385)]=(_0x1330e4[_0x4b27ef(0x385)]??[])[_0x4b27ef(0x495)](_0x3a97ef=>_0x3a97ef!==this[_0x4b27ef(0x799)][_0x4b27ef(0x3cb)]),_0x1330e4[_0x4b27ef(0x553)]=(_0x1330e4[_0x4b27ef(0x553)]??[])[_0x4b27ef(0x495)](_0x4d6a55=>_0x4d6a55!==this['instance'][_0x4b27ef(0x3cb)]),_0x1330e4[_0x4b27ef(0x553)][_0x4b27ef(0x45c)]===0x0&&_0x1330e4[_0x4b27ef(0x385)][_0x4b27ef(0x45c)]>0x0&&(_0x1330e4['whoCanEdit'][_0x4b27ef(0x5ea)](_0x1330e4[_0x4b27ef(0x385)][0x0]),this['logger'][_0x4b27ef(0x72d)](this[_0x4b27ef(0x78b)]+'\x20('+this['instance'][_0x4b27ef(0x3cb)]+_0x4b27ef(0x367)+_0x1330e4[_0x4b27ef(0x385)][0x0]+_0x4b27ef(0x5e7)+_0x2da493[_0x4b27ef(0x68d)]+_0x4b27ef(0x4b9))),await this[_0x4b27ef(0x7be)][_0x4b27ef(0x2b2)][_0x4b27ef(0x372)](_0x1330e4[_0x4b27ef(0x68d)],_0x1330e4),await this[_0x4b27ef(0x13b)](),{'message':_0x4b27ef(0x480)+_0x2da493[_0x4b27ef(0x5f4)]+_0x4b27ef(0x460)};}catch(_0x28391b){return this[_0x4b27ef(0x112)][_0x4b27ef(0x4b3)](this['instanceName']+'\x20('+this['instance'][_0x4b27ef(0x3cb)]+'):\x20Erro\x20ao\x20deletar\x20fluxo\x20'+(_0x28391b instanceof Error?_0x28391b[_0x4b27ef(0x499)]:JSON[_0x4b27ef(0x1bb)](_0x28391b,null,0x2))),{'message':'Erro\x20ao\x20deletar\x20o\x20fluxo:\x20'+(_0x28391b instanceof Error?_0x28391b['message']:JSON['stringify'](_0x28391b,null,0x2))};}}async['getFlow'](_0x183eb1){const _0x2ba9a4=a0_0x3f352e;try{if(this[_0x2ba9a4(0x112)][_0x2ba9a4(0x567)](this[_0x2ba9a4(0x78b)]+'\x20('+this[_0x2ba9a4(0x799)][_0x2ba9a4(0x3cb)]+_0x2ba9a4(0x6c0)+_0x183eb1),!this['AutomateSystem']&&(await this[_0x2ba9a4(0x444)](),!this[_0x2ba9a4(0x2f7)]))return null;let _0x384685=await this[_0x2ba9a4(0x7be)][_0x2ba9a4(0x2b2)][_0x2ba9a4(0x312)]({'where':{'_id':_0x183eb1}});if(!_0x384685)throw new m('Fluxo\x20id\x20\x27'+_0x183eb1+_0x2ba9a4(0x203));if(!(_0x384685[_0x2ba9a4(0x5de)]||_0x384685[_0x2ba9a4(0x385)]?.[_0x2ba9a4(0x2bf)](this[_0x2ba9a4(0x799)][_0x2ba9a4(0x3cb)])))throw new m(_0x2ba9a4(0x77b)+name+'\x27');_0x384685['globalShow']&&!_0x384685[_0x2ba9a4(0x385)]?.[_0x2ba9a4(0x2bf)](this['instance']['wuid'])&&(_0x384685['whoCanUse']=[..._0x384685[_0x2ba9a4(0x385)]??[],this[_0x2ba9a4(0x799)][_0x2ba9a4(0x3cb)]],await this[_0x2ba9a4(0x7be)][_0x2ba9a4(0x2b2)]['updateOne'](_0x384685[_0x2ba9a4(0x68d)],_0x384685),this[_0x2ba9a4(0x13b)]());let _0x2f534d=this[_0x2ba9a4(0x2f7)]?.[_0x2ba9a4(0x6e8)][_0x2ba9a4(0xff)](_0x43b841=>_0x43b841[_0x2ba9a4(0x5f4)]),_0x55b887=[_0x2ba9a4(0x544),_0x2ba9a4(0x39c),_0x2ba9a4(0x555),_0x2ba9a4(0x744),_0x2ba9a4(0x62a),_0x2ba9a4(0x21c),'responsavelid',_0x2ba9a4(0x3e3),_0x2ba9a4(0x612),'telefone','atendimentoAberto'];_0x384685[_0x2ba9a4(0x25c)]=_0x384685['variables']['filter'](_0x16b9ef=>!(_0x16b9ef[_0x2ba9a4(0x6e2)]===_0x2ba9a4(0x704)||_0x16b9ef['leadInfo'])),_0x55b887[_0x2ba9a4(0x62c)](_0x12f98f=>{const _0x3def08=_0x2ba9a4;_0x384685[_0x3def08(0x25c)][_0x3def08(0x5ea)]({'folder':'leadInfo','name':_0x12f98f,'value':'','doc':'','leadInfo':!0x0});}),_0x2f534d[_0x2ba9a4(0x62c)](_0x1b72b8=>{const _0x149108=_0x2ba9a4;let _0x271e85=_0x384685[_0x149108(0x25c)][_0x149108(0x4b6)](_0x1e4f32=>_0x1e4f32[_0x149108(0x5f4)]===_0x1b72b8);_0x271e85===-0x1?_0x384685['variables'][_0x149108(0x5ea)]({'folder':_0x149108(0x704),'name':_0x1b72b8,'value':'','doc':'','leadInfo':!0x0}):(_0x384685[_0x149108(0x25c)][_0x271e85][_0x149108(0x6e2)]=_0x149108(0x704),_0x384685[_0x149108(0x25c)][_0x271e85][_0x149108(0x704)]=!0x0);}),_0x384685[_0x2ba9a4(0x357)]&&_0x384685['blocks'][_0x2ba9a4(0x45c)]>0x0&&_0x384685['blocks'][_0x2ba9a4(0x62c)](_0x540b99=>{const _0x418697=_0x2ba9a4;_0x540b99[_0x418697(0x2af)]&&_0x540b99['next_groupId']&&_0x540b99[_0x418697(0x2af)]===_0x540b99[_0x418697(0x769)]&&(_0x540b99[_0x418697(0x769)]=null);});let _0x385011=await this[_0x2ba9a4(0x7be)][_0x2ba9a4(0x2b2)][_0x2ba9a4(0x372)](_0x384685['_id'],_0x384685);if(!_0x385011)throw new Error(_0x2ba9a4(0xf9));return _0x385011;}catch(_0x52f095){let _0x3e07d1=_0x2ba9a4(0x419),_0x127da7=_0x52f095 instanceof Error?_0x52f095['message']:typeof _0x52f095==_0x2ba9a4(0x5a0)?JSON[_0x2ba9a4(0x1bb)](_0x52f095):_0x52f095,_0x242a2a=_0x3e07d1+':\x20'+_0x127da7;throw this[_0x2ba9a4(0x112)][_0x2ba9a4(0x4b3)](this[_0x2ba9a4(0x78b)]+'\x20('+this[_0x2ba9a4(0x799)][_0x2ba9a4(0x3cb)]+_0x2ba9a4(0x433)+_0x242a2a),new m(_0x242a2a);}}async['allFlows'](){const _0x13f2e4=a0_0x3f352e;try{this['logger'][_0x13f2e4(0x72d)](this[_0x13f2e4(0x78b)]+'\x20('+this[_0x13f2e4(0x799)][_0x13f2e4(0x3cb)]+_0x13f2e4(0x12f)),await this['synchronizeAndMapFlows']();let _0x46c7ff=await this[_0x13f2e4(0x7be)][_0x13f2e4(0x2b2)][_0x13f2e4(0x58d)]({'where':{'globalShow':!0x0}});return[...this[_0x13f2e4(0x2f7)]['flows'],..._0x46c7ff];}catch(_0x2b911e){return this[_0x13f2e4(0x112)][_0x13f2e4(0x4b3)](this[_0x13f2e4(0x78b)]+'\x20('+this[_0x13f2e4(0x799)][_0x13f2e4(0x3cb)]+_0x13f2e4(0x2d7)+(_0x2b911e instanceof Error?_0x2b911e[_0x13f2e4(0x499)]:JSON[_0x13f2e4(0x1bb)](_0x2b911e,null,0x2))),{'message':_0x13f2e4(0x76f)+(_0x2b911e instanceof Error?_0x2b911e[_0x13f2e4(0x499)]:String(_0x2b911e))};}}async[a0_0x3f352e(0x110)](_0x478df3,_0x5466da){const _0x119331=a0_0x3f352e;try{this[_0x119331(0x112)][_0x119331(0x72d)](this[_0x119331(0x78b)]+'\x20('+this[_0x119331(0x799)][_0x119331(0x3cb)]+_0x119331(0x585));let _0x312cc3=this[_0x119331(0x2f7)][_0x119331(0x334)]['find'](_0x385a9a=>_0x385a9a[_0x119331(0x68d)]===_0x478df3['_id']);if(!_0x312cc3)throw this[_0x119331(0x112)][_0x119331(0x72d)](this[_0x119331(0x78b)]+'\x20('+this[_0x119331(0x799)][_0x119331(0x3cb)]+'):\x20Fluxo\x20\x27'+_0x478df3[_0x119331(0x68d)]+'\x27\x20não\x20encontrado'),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0xf82ccd=await this[_0x119331(0x7be)]['flow'][_0x119331(0x312)]({'where':{'_id':_0x478df3[_0x119331(0x68d)]}});if(!_0xf82ccd||!_0xf82ccd[_0x119331(0x385)]?.[_0x119331(0x2bf)](this[_0x119331(0x799)][_0x119331(0x3cb)]))throw this[_0x119331(0x112)][_0x119331(0x4b3)](this['instanceName']+'\x20('+this[_0x119331(0x799)][_0x119331(0x3cb)]+'):\x20Flow\x20\x27'+_0x478df3[_0x119331(0x68d)]+_0x119331(0x6bf)),new m(_0x119331(0x62f)+_0x478df3[_0x119331(0x68d)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x1d3e12=this['AutomateSystem'][_0x119331(0x334)][_0x119331(0x4b6)](_0x505313=>_0x505313['_id']===_0x312cc3[_0x119331(0x68d)]);if(_0x1d3e12!==-0x1){let _0x173d5a=this[_0x119331(0x2f7)][_0x119331(0x334)][_0x1d3e12];if(_0x173d5a[_0x119331(0x5f4)]=_0x478df3[_0x119331(0x5f4)]??_0x173d5a[_0x119331(0x5f4)],_0x173d5a['default']=_0x478df3[_0x119331(0x164)]??_0x173d5a['default'],_0x173d5a[_0x119331(0x2f1)]=_0x478df3['testingWith']??_0x173d5a['testingWith'],_0x173d5a[_0x119331(0x726)]=_0x478df3[_0x119331(0xac)]??_0x173d5a['startCommand'],_0x173d5a['minutesToClose']=_0x478df3['minutesToClose']??_0x173d5a[_0x119331(0x734)],_0x173d5a[_0x119331(0x4e4)]=_0x478df3['readMessages']??_0x173d5a[_0x119331(0x4e4)],_0x478df3['default']&&this[_0x119331(0x2f7)][_0x119331(0x334)]['forEach']((_0x1edc5a,_0x42e529)=>{_0x42e529!==_0x1d3e12&&(_0x1edc5a['default']=!0x1);}),this[_0x119331(0x2f7)][_0x119331(0x334)][_0x1d3e12]=_0x173d5a,!await this['repository'][_0x119331(0x2d3)]['update']({'flows':this[_0x119331(0x2f7)][_0x119331(0x334)]},this[_0x119331(0x799)]['wuid']))throw new m(_0x119331(0x7e3));}let _0x361dbd=[_0x119331(0xc7),_0x119331(0x545),_0x119331(0x720),_0x119331(0x5a3)];for(let _0x27d983 of _0x361dbd)delete _0x478df3[_0x27d983];if(_0xf82ccd[_0x119331(0x553)]?.[_0x119331(0x2bf)](this[_0x119331(0x799)][_0x119331(0x3cb)])||(_0x478df3={'_id':_0x478df3[_0x119331(0x68d)]}),_0x5466da!==$i&&_0x478df3?.[_0x119331(0x5de)]&&!_0xf82ccd?.['globalShow'])throw new m(_0x119331(0x6e7));let _0xcbcd17=new Set(_0x478df3[_0x119331(0x553)]??_0xf82ccd[_0x119331(0x553)]);_0xcbcd17[_0x119331(0x41a)](_0xf82ccd['owner']);let _0x499572=new Set(_0x478df3[_0x119331(0x385)]??_0xf82ccd[_0x119331(0x385)]??[]);_0xcbcd17['forEach'](_0x3f8895=>_0x499572[_0x119331(0x41a)](_0x3f8895)),_0x499572['add'](_0xf82ccd[_0x119331(0x19a)]),this[_0x119331(0x112)]['verbose'](this[_0x119331(0x78b)]+'\x20('+this['instance'][_0x119331(0x3cb)]+'):\x20whoCanEdit\x20before\x20validation:\x20'+Array[_0x119331(0x3a3)](_0xcbcd17)),this[_0x119331(0x112)][_0x119331(0x72d)](this['instanceName']+'\x20('+this['instance'][_0x119331(0x3cb)]+_0x119331(0x158)+Array[_0x119331(0x3a3)](_0x499572));let _0x1c10a2=await this['getValidWhatsAppNumbers'](Array[_0x119331(0x3a3)](_0x499572)),_0x58b66e=Array[_0x119331(0x3a3)](_0xcbcd17)[_0x119331(0x495)](_0x5cf39a=>_0x1c10a2['includes'](_0x5cf39a)),_0xcc01e2=Array[_0x119331(0x3a3)](_0x499572)['filter'](_0x3463a4=>_0x1c10a2[_0x119331(0x2bf)](_0x3463a4));this['logger']['verbose'](this[_0x119331(0x78b)]+'\x20('+this['instance']['wuid']+_0x119331(0x471)+_0x58b66e),this[_0x119331(0x112)][_0x119331(0x72d)](this[_0x119331(0x78b)]+'\x20('+this[_0x119331(0x799)][_0x119331(0x3cb)]+_0x119331(0x56e)+_0xcc01e2);let _0x2ec538={..._0xf82ccd,..._0x478df3,'whoCanEdit':_0x58b66e,'whoCanUse':_0xcc01e2},_0x1e7f0d=await this['repository']['flow'][_0x119331(0x372)](_0xf82ccd[_0x119331(0x68d)],_0x2ec538);return await this[_0x119331(0x13b)](),_0x1e7f0d;}catch(_0x51886c){let _0x2757ee=_0x119331(0xb5),_0x2bce74=_0x51886c instanceof Error?_0x51886c[_0x119331(0x499)]:typeof _0x51886c==_0x119331(0x5a0)?JSON['stringify'](_0x51886c):_0x51886c,_0x1731c5=_0x2757ee+':\x20'+_0x2bce74;throw this[_0x119331(0x112)][_0x119331(0x4b3)](this[_0x119331(0x78b)]+'\x20('+this[_0x119331(0x799)][_0x119331(0x3cb)]+_0x119331(0x433)+_0x1731c5),new m(_0x1731c5);}}async[a0_0x3f352e(0x637)](_0x5d73ce){const _0x340ecc=a0_0x3f352e;let _0x59a4e9={'numbers':_0x5d73ce};return(await this['whatsappNumber'](_0x59a4e9))[_0x340ecc(0x495)](_0x3c5e69=>_0x3c5e69['exists'])[_0x340ecc(0xff)](_0x114086=>_0x114086[_0x340ecc(0x3ab)])[_0x340ecc(0xff)](_0x1c106b=>this[_0x340ecc(0x399)](_0x1c106b));}[a0_0x3f352e(0x399)](_0x179054){let _0x577ce1=_0x179054['match'](/\d+/);return _0x577ce1?_0x577ce1[0x0]:'';}async['editFlowBlock'](_0x41e062){const _0x13b516=a0_0x3f352e;try{if(this[_0x13b516(0x112)][_0x13b516(0x72d)](this[_0x13b516(0x78b)]+'\x20('+this[_0x13b516(0x799)][_0x13b516(0x3cb)]+_0x13b516(0x314)),!this[_0x13b516(0x2f7)][_0x13b516(0x334)]['find'](_0x34e396=>_0x34e396['_id']===_0x41e062['_id']))throw this[_0x13b516(0x112)][_0x13b516(0x72d)](this[_0x13b516(0x78b)]+'\x20('+this[_0x13b516(0x799)][_0x13b516(0x3cb)]+_0x13b516(0x461)+_0x41e062[_0x13b516(0x68d)]+_0x13b516(0x435)),new m(_0x13b516(0xca));let _0x5410a9=await this[_0x13b516(0x7be)][_0x13b516(0x2b2)][_0x13b516(0x312)]({'where':{'_id':_0x41e062[_0x13b516(0x68d)]}});if(!_0x5410a9||!_0x5410a9[_0x13b516(0x385)]?.[_0x13b516(0x2bf)](this[_0x13b516(0x799)][_0x13b516(0x3cb)]))throw this[_0x13b516(0x112)][_0x13b516(0x4b3)](this[_0x13b516(0x78b)]+'\x20('+this[_0x13b516(0x799)][_0x13b516(0x3cb)]+_0x13b516(0x38b)+_0x41e062[_0x13b516(0x68d)]+_0x13b516(0x6bf)),new m(_0x13b516(0x62f)+_0x41e062['_id']+_0x13b516(0x6bf));if(!_0x5410a9[_0x13b516(0x553)]?.[_0x13b516(0x2bf)](this['instance'][_0x13b516(0x3cb)]))throw new m(_0x13b516(0x55f));let {block:_0x5173c2}=_0x41e062;_0x5173c2?.[_0x13b516(0x4af)]?this[_0x13b516(0x240)](_0x5410a9,_0x41e062):_0x5173c2?.[_0x13b516(0x49b)]?this[_0x13b516(0x245)](_0x5410a9,_0x41e062):_0x5173c2[_0x13b516(0x68d)]?await this[_0x13b516(0x52b)](_0x5410a9,_0x41e062):this[_0x13b516(0x7c9)](_0x5410a9,_0x41e062);let _0x58186a=await this['repository'][_0x13b516(0x2b2)][_0x13b516(0x372)](_0x5410a9[_0x13b516(0x68d)],_0x5410a9);if(!_0x58186a)throw new Error(_0x13b516(0xf9));return _0x58186a;}catch(_0x2a14b6){this[_0x13b516(0x3fd)](_0x13b516(0x36d)+_0x2a14b6[_0x13b516(0x499)]);}}async['copyBlock'](_0x9475f,_0x32651e){const _0x657562=a0_0x3f352e;let _0x325355=_0x32651e[_0x657562(0x2bd)][_0x657562(0x68d)],_0xa5aeb6=_0x9475f[_0x657562(0x357)][_0x657562(0x71f)](_0x2a441e=>_0x2a441e[_0x657562(0x68d)][_0x657562(0x123)]()===_0x325355);if(!_0xa5aeb6){this[_0x657562(0x112)][_0x657562(0x4b3)](this[_0x657562(0x78b)]+'\x20('+this[_0x657562(0x799)][_0x657562(0x3cb)]+_0x657562(0x741)+_0x325355+_0x657562(0x7c2));return;}this[_0x657562(0x112)][_0x657562(0x72d)](this[_0x657562(0x78b)]+'\x20('+this[_0x657562(0x799)][_0x657562(0x3cb)]+_0x657562(0x66b)+JSON['stringify'](_0xa5aeb6));let _0x222fc8=JSON[_0x657562(0x4d4)](JSON[_0x657562(0x1bb)](_0xa5aeb6));_0x222fc8[_0x657562(0x68d)]=new he[(_0x657562(0x164))][(_0x657562(0x48f))][(_0x657562(0x438))](),this[_0x657562(0x112)][_0x657562(0x72d)](this[_0x657562(0x78b)]+'\x20('+this[_0x657562(0x799)][_0x657562(0x3cb)]+'):\x20Bloco\x20copiado:\x20'+JSON[_0x657562(0x1bb)](_0x222fc8)),_0x9475f[_0x657562(0x357)][_0x657562(0x5ea)](_0x222fc8),this[_0x657562(0x48d)](_0x9475f[_0x657562(0x357)],_0x222fc8['groupId']);}[a0_0x3f352e(0x3fd)](_0x2aa951){const _0x5357b0=a0_0x3f352e;throw this[_0x5357b0(0x112)][_0x5357b0(0x4b3)](this[_0x5357b0(0x78b)]+'\x20('+this[_0x5357b0(0x799)][_0x5357b0(0x3cb)]+'):\x20'+_0x2aa951),new m(_0x2aa951);}[a0_0x3f352e(0x245)](_0x1f87b5,_0x110682){const _0x15222c=a0_0x3f352e;let {block:_0x45a729}=_0x110682;if(_0x45a729[_0x15222c(0x6d7)]===_0x15222c(0x691)){this[_0x15222c(0x3fd)](_0x15222c(0x7d4));return;}if(!_0x45a729[_0x15222c(0x68d)]){this[_0x15222c(0x3fd)](_0x15222c(0x6d1));return;}let _0x393674=_0x1f87b5['blocks'][_0x15222c(0x71f)](_0x47877d=>_0x47877d[_0x15222c(0x68d)][_0x15222c(0x123)]()===_0x110682[_0x15222c(0x2bd)]['_id'][_0x15222c(0x123)]());if(!_0x393674){this[_0x15222c(0x3fd)](_0x15222c(0x75e)+_0x45a729[_0x15222c(0x68d)]+'\x20não\x20encontrado');return;}_0x1f87b5[_0x15222c(0x357)]=_0x1f87b5[_0x15222c(0x357)][_0x15222c(0x495)](_0x3cd3bd=>_0x3cd3bd[_0x15222c(0x68d)][_0x15222c(0x123)]()!==_0x110682[_0x15222c(0x2bd)][_0x15222c(0x68d)]['toString']()),_0x1f87b5[_0x15222c(0x52c)]=_0x1f87b5[_0x15222c(0x52c)]['filter'](_0x1c8e8e=>_0x1c8e8e['blockId']!==_0x45a729[_0x15222c(0x68d)][_0x15222c(0x123)]()),_0x1f87b5[_0x15222c(0x2e3)]=_0x1f87b5['varedits'][_0x15222c(0x495)](_0xd87aa4=>_0xd87aa4['blockId']!==_0x45a729[_0x15222c(0x68d)][_0x15222c(0x123)]()),_0x1f87b5[_0x15222c(0x225)]=_0x1f87b5[_0x15222c(0x225)]['filter'](_0x10ca0e=>_0x10ca0e['blockId']!==_0x45a729['_id'][_0x15222c(0x123)]()),this['reorderBlocks'](_0x1f87b5[_0x15222c(0x357)],_0x393674[_0x15222c(0x2af)]);}async['updateBlock'](_0x596291,_0x3ec866){const _0x2cbc30=a0_0x3f352e;let _0x30fabe=_0x596291[_0x2cbc30(0x357)][_0x2cbc30(0x4b6)](_0xc1ed88=>_0xc1ed88[_0x2cbc30(0x68d)]['toString']()===_0x3ec866['block'][_0x2cbc30(0x68d)][_0x2cbc30(0x123)]());if(this[_0x2cbc30(0x112)]['verbose'](this[_0x2cbc30(0x78b)]+'\x20('+this['instance'][_0x2cbc30(0x3cb)]+_0x2cbc30(0x588)+_0x30fabe),_0x30fabe===-0x1){this[_0x2cbc30(0x112)]['verbose'](_0x2cbc30(0x75e)+_0x3ec866[_0x2cbc30(0x2bd)][_0x2cbc30(0x68d)]+_0x2cbc30(0xf6));return;}if(_0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x6d7)]===_0x2cbc30(0x691)){let _0x4a8210=Object['keys'](_0x3ec866[_0x2cbc30(0x2bd)]);if(_0x4a8210[_0x2cbc30(0x45c)]>0x2||_0x4a8210[_0x2cbc30(0x45c)]===0x2&&!_0x4a8210[_0x2cbc30(0x2bf)](_0x2cbc30(0x769))){this[_0x2cbc30(0x3fd)](_0x2cbc30(0x30a));return;}}let _0x42b7b3=_0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x2af)];for(let _0x42f3cd in _0x3ec866[_0x2cbc30(0x2bd)])_0x3ec866['block'][_0x2cbc30(0x6e9)](_0x42f3cd)&&(_0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x42f3cd]=_0x3ec866[_0x2cbc30(0x2bd)][_0x42f3cd]);if(this[_0x2cbc30(0x112)][_0x2cbc30(0x72d)](this[_0x2cbc30(0x78b)]+'\x20('+this[_0x2cbc30(0x799)][_0x2cbc30(0x3cb)]+_0x2cbc30(0x35c)+JSON['stringify'](_0x596291[_0x2cbc30(0x357)][_0x30fabe])),_0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x1ed)]&&_0x2cbc30(0x693)in _0x596291['blocks'][_0x30fabe]['apirequest']){this[_0x2cbc30(0x112)]['verbose'](this[_0x2cbc30(0x78b)]+'\x20('+this[_0x2cbc30(0x799)]['wuid']+'):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString');let _0x8878bc=JSON[_0x2cbc30(0x1bb)](_0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x1ed)][_0x2cbc30(0x693)],null,0x1);_0x8878bc[_0x2cbc30(0x45c)]>0x2&&(_0x8878bc=_0x8878bc[_0x2cbc30(0x7a2)](0x1,_0x8878bc[_0x2cbc30(0x45c)]-0x1)['trim']()),_0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x1ed)][_0x2cbc30(0x3d8)]=_0x8878bc;}if(_0x596291[_0x2cbc30(0x357)][_0x30fabe]['apirequest']&&_0x2cbc30(0x6a4)in _0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x1ed)]&&!('bodyString'in _0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x1ed)])){this[_0x2cbc30(0x112)][_0x2cbc30(0x72d)](this['instanceName']+'\x20('+this[_0x2cbc30(0x799)][_0x2cbc30(0x3cb)]+_0x2cbc30(0x698)),_0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x1ed)][_0x2cbc30(0xe5)]=!0x1;let _0x1b1e00=JSON[_0x2cbc30(0x1bb)](_0x596291['blocks'][_0x30fabe][_0x2cbc30(0x1ed)][_0x2cbc30(0x6a4)],null,0x2);_0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x1ed)]['bodyString']=_0x1b1e00;}if(_0x596291['blocks'][_0x30fabe][_0x2cbc30(0x1ed)]&&_0x2cbc30(0x45f)in _0x596291['blocks'][_0x30fabe][_0x2cbc30(0x1ed)]){_0x596291['blocks'][_0x30fabe][_0x2cbc30(0x1ed)][_0x2cbc30(0xe5)]=!0x1;let _0x42512e=_0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x1ed)][_0x2cbc30(0x45f)],_0x53d830=this[_0x2cbc30(0x664)](_0x42512e);_0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x1ed)][_0x2cbc30(0x45f)]=_0x53d830['result'],_0x596291[_0x2cbc30(0x357)][_0x30fabe]['apirequest'][_0x2cbc30(0xe5)]=_0x53d830[_0x2cbc30(0x4b3)];}let _0x2e7d15=_0x596291[_0x2cbc30(0x357)][_0x30fabe][_0x2cbc30(0x2af)];_0x42b7b3!==_0x2e7d15?(this[_0x2cbc30(0x48d)](_0x596291[_0x2cbc30(0x357)],_0x42b7b3),this[_0x2cbc30(0x48d)](_0x596291[_0x2cbc30(0x357)],_0x2e7d15)):this['reorderBlocks'](_0x596291['blocks'],_0x42b7b3);}['beautifyWithPlaceholders'](_0x4339c6){const _0x40b5ca=a0_0x3f352e;let _0x13fc68='\u205f',_0x3fd300=!0x1,_0x390004='';for(let _0xb696f7=0x0;_0xb696f7<_0x4339c6['length'];_0xb696f7++){let _0x3a8023=_0x4339c6[_0xb696f7];_0x3a8023==='\x22'&&(_0xb696f7===0x0||_0x4339c6[_0xb696f7-0x1]!=='\x5c')&&(_0x3fd300=!_0x3fd300),!(!_0x3fd300&&(_0x3a8023==='\x0a'||_0x3a8023==='\x20'||_0x3a8023===_0x13fc68))&&(_0x390004+=_0x3a8023);}let _0x42db8b={},_0x50eb75=9876543210.1234,_0x12061b=_0x390004['replace'](/\{\{([^}]+)\}\}/g,_0x31e56a=>{let _0x2c96a5=_0x31e56a,_0x4b11cc=''+_0x50eb75;return _0x42db8b[_0x4b11cc]=_0x2c96a5,_0x50eb75+=0.0001,_0x4b11cc;}),_0x5cea0e='',_0x49afe6=!0x1;try{let _0x31af0e=JSON[_0x40b5ca(0x4d4)](_0x12061b);_0x5cea0e=JSON[_0x40b5ca(0x1bb)](_0x31af0e,null,0x2),_0x5cea0e=_0x5cea0e[_0x40b5ca(0x166)](/\n( +)/g,(_0x41e991,_0x43b824)=>{const _0x266a5b=_0x40b5ca;let _0xb95557=_0x43b824['length'];return'\x0a'+_0x13fc68[_0x266a5b(0x502)](_0xb95557*0x2);}),_0x5cea0e=_0x5cea0e[_0x40b5ca(0x166)](/(\d{10,}\.\d+)/g,_0x247896=>_0x42db8b[_0x247896]||_0x247896);}catch(_0x3ce74d){this[_0x40b5ca(0x112)][_0x40b5ca(0x4b3)](_0x40b5ca(0x283)+_0x3ce74d),_0x5cea0e=_0x4339c6,_0x49afe6=!0x0;}return{'result':_0x5cea0e,'error':_0x49afe6};}[a0_0x3f352e(0x7c9)](_0x344040,_0x5905c6){const _0x2cda35=a0_0x3f352e;if(_0x5905c6[_0x2cda35(0x2bd)][_0x2cda35(0x6d7)]==='start'){this['throwAndLogError'](_0x2cda35(0x745));return;}if(_0x5905c6[_0x2cda35(0x2bd)]['apirequest']&&'header'in _0x5905c6[_0x2cda35(0x2bd)][_0x2cda35(0x1ed)]){this[_0x2cda35(0x112)]['verbose'](this[_0x2cda35(0x78b)]+'\x20('+this[_0x2cda35(0x799)][_0x2cda35(0x3cb)]+'):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString');let _0x166d3e=JSON[_0x2cda35(0x1bb)](_0x5905c6[_0x2cda35(0x2bd)]['apirequest']['header'],null,0x1);_0x166d3e[_0x2cda35(0x45c)]>0x2&&(_0x166d3e=_0x166d3e['substring'](0x1,_0x166d3e['length']-0x1)[_0x2cda35(0x1e6)]()),_0x5905c6[_0x2cda35(0x2bd)][_0x2cda35(0x1ed)][_0x2cda35(0x3d8)]=_0x166d3e;}_0x5905c6['block'][_0x2cda35(0x1ed)]&&_0x2cda35(0x6a4)in _0x5905c6[_0x2cda35(0x2bd)][_0x2cda35(0x1ed)]&&(this[_0x2cda35(0x112)][_0x2cda35(0x72d)](this['instanceName']+'\x20('+this[_0x2cda35(0x799)][_0x2cda35(0x3cb)]+_0x2cda35(0x698)),_0x5905c6['block'][_0x2cda35(0x1ed)][_0x2cda35(0x45f)]=JSON[_0x2cda35(0x1bb)](_0x5905c6[_0x2cda35(0x2bd)]['apirequest'][_0x2cda35(0x6a4)],null,0x1)[_0x2cda35(0x1e6)]()),_0x344040[_0x2cda35(0x357)][_0x2cda35(0x5ea)](_0x5905c6[_0x2cda35(0x2bd)]),this['reorderBlocks'](_0x344040['blocks'],_0x5905c6['block'][_0x2cda35(0x2af)]);}['reorderBlocks'](_0x4ebdfb,_0x20a616){const _0x375220=a0_0x3f352e;let _0x423435=_0x4ebdfb[_0x375220(0x495)](_0x18caf6=>_0x18caf6[_0x375220(0x2af)]===_0x20a616);_0x423435[_0x375220(0x344)]((_0x1b57c6,_0x48162d)=>_0x1b57c6[_0x375220(0x6ab)]-_0x48162d[_0x375220(0x6ab)]),_0x423435[_0x375220(0x62c)]((_0x32a3f1,_0x236acb)=>_0x32a3f1[_0x375220(0x6ab)]=_0x236acb+0x1);}async[a0_0x3f352e(0x34f)](_0x3559b1){const _0xbed898=a0_0x3f352e;try{if(this[_0xbed898(0x112)]['verbose'](this[_0xbed898(0x78b)]+'\x20('+this[_0xbed898(0x799)]['wuid']+_0xbed898(0x1ac)),!_0x3559b1||!_0x3559b1['replyOption']){this[_0xbed898(0x3fd)](_0xbed898(0x45d));return;}if(!this[_0xbed898(0x2f7)][_0xbed898(0x334)][_0xbed898(0x71f)](_0x315e0b=>_0x315e0b['_id']===_0x3559b1[_0xbed898(0x68d)]))throw this[_0xbed898(0x112)][_0xbed898(0x72d)](this[_0xbed898(0x78b)]+'\x20('+this[_0xbed898(0x799)][_0xbed898(0x3cb)]+_0xbed898(0x461)+_0x3559b1[_0xbed898(0x68d)]+_0xbed898(0x435)),new m(_0xbed898(0xca));let _0x4a8d65=await this[_0xbed898(0x7be)][_0xbed898(0x2b2)]['findOne']({'where':{'_id':_0x3559b1[_0xbed898(0x68d)]}});if(!_0x4a8d65||!_0x4a8d65['whoCanUse']?.[_0xbed898(0x2bf)](this[_0xbed898(0x799)]['wuid']))throw this[_0xbed898(0x112)]['error'](this[_0xbed898(0x78b)]+'\x20('+this['instance'][_0xbed898(0x3cb)]+'):\x20Flow\x20\x27'+_0x3559b1[_0xbed898(0x68d)]+_0xbed898(0x6bf)),new m(_0xbed898(0x62f)+_0x3559b1['_id']+_0xbed898(0x6bf));if(!_0x4a8d65[_0xbed898(0x553)]?.['includes'](this[_0xbed898(0x799)][_0xbed898(0x3cb)]))throw new m(_0xbed898(0x55f));let {replyOption:_0x29b239}=_0x3559b1;_0x29b239?.[_0xbed898(0x49b)]?(this[_0xbed898(0x3fc)](_0x4a8d65,_0x3559b1),this[_0xbed898(0x2e2)](_0x4a8d65['replyOptions'],_0x3559b1[_0xbed898(0x1e4)][_0xbed898(0x4fc)])):_0x29b239[_0xbed898(0x68d)]?(await this[_0xbed898(0x5db)](_0x4a8d65,_0x3559b1),this[_0xbed898(0x2e2)](_0x4a8d65[_0xbed898(0x225)],_0x3559b1[_0xbed898(0x1e4)][_0xbed898(0x4fc)])):(this[_0xbed898(0x263)](_0x4a8d65,_0x3559b1),this[_0xbed898(0x2e2)](_0x4a8d65[_0xbed898(0x225)],_0x3559b1[_0xbed898(0x1e4)][_0xbed898(0x4fc)]));let _0x49cdde=await this['repository']['flow'][_0xbed898(0x372)](_0x4a8d65[_0xbed898(0x68d)],_0x4a8d65);if(!_0x49cdde)throw new Error(_0xbed898(0xf9));return _0x49cdde;}catch(_0x65cd1){this[_0xbed898(0x3fd)]('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0x65cd1);}}[a0_0x3f352e(0x2e2)](_0x4a917f,_0x1bd3d1){const _0xe76bc2=a0_0x3f352e;_0x4a917f['forEach'](_0x50183e=>{const _0x504410=a0_0x1206;_0x50183e['blockId']===_0x1bd3d1&&_0x50183e[_0x504410(0x6ab)]===void 0x0&&(_0x50183e[_0x504410(0x6ab)]=0x270f);});let _0xa7e77d=_0x4a917f['filter'](_0x2f6fb6=>_0x2f6fb6[_0xe76bc2(0x4fc)]===_0x1bd3d1);_0xa7e77d[_0xe76bc2(0x344)]((_0x5377c1,_0x3a46ac)=>_0x5377c1[_0xe76bc2(0x6ab)]-_0x3a46ac[_0xe76bc2(0x6ab)]),_0xa7e77d[_0xe76bc2(0x62c)]((_0x2cd8ce,_0x44cb0f)=>{_0x2cd8ce['order']=_0x44cb0f+0x1;}),_0x4a917f[_0xe76bc2(0x62c)](_0x3d2e60=>{const _0x15f89d=_0xe76bc2;if(_0x3d2e60[_0x15f89d(0x4fc)]===_0x1bd3d1){let _0x16dc00=_0xa7e77d[_0x15f89d(0x71f)](_0x4f713b=>_0x4f713b[_0x15f89d(0x68d)]&&_0x3d2e60[_0x15f89d(0x68d)]&&_0x4f713b[_0x15f89d(0x68d)][_0x15f89d(0x123)]()===_0x3d2e60[_0x15f89d(0x68d)]['toString']());_0x16dc00&&(_0x3d2e60['order']=_0x16dc00[_0x15f89d(0x6ab)]);}});}['deleteReplyOption'](_0x47eda9,_0x75d279){const _0x9818a8=a0_0x3f352e;let {replyOption:_0x1d7655}=_0x75d279;if(!_0x1d7655['_id']){this[_0x9818a8(0x3fd)](_0x9818a8(0x45b));return;}if(!_0x47eda9[_0x9818a8(0x225)]['find'](_0x5a2325=>_0x5a2325[_0x9818a8(0x68d)][_0x9818a8(0x123)]()===_0x75d279[_0x9818a8(0x1e4)][_0x9818a8(0x68d)][_0x9818a8(0x123)]())){this[_0x9818a8(0x3fd)](_0x9818a8(0x578)+_0x1d7655['_id']+'\x20não\x20encontrado');return;}_0x47eda9['replyOptions']=_0x47eda9['replyOptions'][_0x9818a8(0x495)](_0x7db65a=>_0x7db65a[_0x9818a8(0x68d)][_0x9818a8(0x123)]()!==_0x75d279[_0x9818a8(0x1e4)]['_id'][_0x9818a8(0x123)]());}async[a0_0x3f352e(0x5db)](_0x3b6d8c,_0x47302a){const _0x210714=a0_0x3f352e;let _0x38ec2d=_0x3b6d8c[_0x210714(0x225)]['findIndex'](_0x1bc446=>_0x1bc446[_0x210714(0x68d)][_0x210714(0x123)]()===_0x47302a['replyOption'][_0x210714(0x68d)][_0x210714(0x123)]());if(_0x38ec2d===-0x1){this[_0x210714(0x3fd)]('ReplyOption\x20com\x20ID\x20'+_0x47302a['replyOption'][_0x210714(0x68d)]+_0x210714(0xf6));return;}for(let _0x4006f8 in _0x47302a[_0x210714(0x1e4)])_0x47302a[_0x210714(0x1e4)][_0x210714(0x6e9)](_0x4006f8)&&(_0x3b6d8c[_0x210714(0x225)][_0x38ec2d][_0x4006f8]=_0x47302a[_0x210714(0x1e4)][_0x4006f8]);}[a0_0x3f352e(0x263)](_0x16f005,_0x54b8b8){const _0x35f334=a0_0x3f352e;_0x16f005[_0x35f334(0x225)]['push'](_0x54b8b8[_0x35f334(0x1e4)]);}async[a0_0x3f352e(0x5e0)](_0x3d37ad){const _0x318498=a0_0x3f352e;this[_0x318498(0x112)][_0x318498(0x72d)](this[_0x318498(0x78b)]+'\x20('+this['instance'][_0x318498(0x3cb)]+'):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20'+JSON[_0x318498(0x1bb)](_0x3d37ad,null,0x2));try{if(this[_0x318498(0x112)][_0x318498(0x72d)](this['instanceName']+'\x20('+this['instance'][_0x318498(0x3cb)]+_0x318498(0xd1)),!this[_0x318498(0x2f7)][_0x318498(0x334)]['find'](_0xc0f092=>_0xc0f092[_0x318498(0x68d)]===_0x3d37ad[_0x318498(0x68d)]))throw this[_0x318498(0x112)][_0x318498(0x72d)](this[_0x318498(0x78b)]+'\x20('+this[_0x318498(0x799)][_0x318498(0x3cb)]+'):\x20Fluxo\x20\x27'+_0x3d37ad[_0x318498(0x68d)]+_0x318498(0x435)),new m(_0x318498(0xca));let _0x3711e8=await this[_0x318498(0x7be)][_0x318498(0x2b2)][_0x318498(0x312)]({'where':{'_id':_0x3d37ad['_id']}});if(!_0x3711e8||!_0x3711e8[_0x318498(0x385)]?.[_0x318498(0x2bf)](this[_0x318498(0x799)]['wuid']))throw this[_0x318498(0x112)][_0x318498(0x4b3)](this['instanceName']+'\x20('+this[_0x318498(0x799)][_0x318498(0x3cb)]+'):\x20Flow\x20\x27'+_0x3d37ad[_0x318498(0x68d)]+_0x318498(0x6bf)),new m(_0x318498(0x62f)+_0x3d37ad[_0x318498(0x68d)]+_0x318498(0x6bf));if(!_0x3711e8[_0x318498(0x553)]?.[_0x318498(0x2bf)](this[_0x318498(0x799)]['wuid']))throw new m(_0x318498(0x55f));if(_0x3d37ad[_0x318498(0x370)]&&_0x3d37ad['group']?.['delete']===!0x0){if(this['logger'][_0x318498(0x72d)](this[_0x318498(0x78b)]+'\x20('+this[_0x318498(0x799)][_0x318498(0x3cb)]+_0x318498(0x644)),_0x3d37ad[_0x318498(0x370)][_0x318498(0x164)]===!0x0)return{'message':_0x318498(0x309)};if(_0x3711e8['blocks'][_0x318498(0x378)](_0x36d8f9=>_0x36d8f9[_0x318498(0x2af)][_0x318498(0x123)]()===_0x3d37ad[_0x318498(0x370)][_0x318498(0x68d)]))return this['logger'][_0x318498(0x72d)](this[_0x318498(0x78b)]+'\x20('+this[_0x318498(0x799)][_0x318498(0x3cb)]+_0x318498(0x7a1)),{'message':_0x318498(0x127)};_0x3711e8['groups']=_0x3711e8[_0x318498(0x172)][_0x318498(0x495)](_0x1400d0=>_0x1400d0[_0x318498(0x68d)][_0x318498(0x123)]()!==_0x3d37ad[_0x318498(0x370)]['_id']);}else{if(_0x3d37ad[_0x318498(0x370)]){if(_0x3d37ad[_0x318498(0x370)][_0x318498(0x164)]===!0x0)return{'message':_0x318498(0x1d0)};if(_0x3d37ad[_0x318498(0x370)]['_id']){let _0x2d8c5f=_0x3711e8[_0x318498(0x172)]['find'](_0x272014=>_0x272014[_0x318498(0x68d)][_0x318498(0x123)]()===_0x3d37ad[_0x318498(0x370)][_0x318498(0x68d)]);_0x2d8c5f&&(_0x3d37ad[_0x318498(0x370)]['x']<0x0&&(_0x3d37ad[_0x318498(0x370)]['x']=0x0),_0x3d37ad[_0x318498(0x370)]['y']<0x0&&(_0x3d37ad['group']['y']=0x0),Object[_0x318498(0x4ce)](_0x2d8c5f,_0x3d37ad['group']));}else _0x3711e8[_0x318498(0x172)]['push'](_0x3d37ad['group']);}}let _0x32a4a4=await this[_0x318498(0x7be)][_0x318498(0x2b2)][_0x318498(0x372)](_0x3711e8['_id'],_0x3711e8);if(!_0x32a4a4)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x32a4a4;}catch(_0x5a1a2e){let _0x1d9af3=_0x318498(0x2b6),_0xdb6f33=_0x5a1a2e instanceof Error?_0x5a1a2e[_0x318498(0x499)]:typeof _0x5a1a2e==_0x318498(0x5a0)?JSON[_0x318498(0x1bb)](_0x5a1a2e):_0x5a1a2e,_0x2412c0=_0x1d9af3+':\x20'+_0xdb6f33;throw this[_0x318498(0x112)][_0x318498(0x4b3)](this[_0x318498(0x78b)]+'\x20('+this[_0x318498(0x799)][_0x318498(0x3cb)]+_0x318498(0x433)+_0x2412c0),new m(_0x2412c0);}}async[a0_0x3f352e(0x683)](_0xe7743a){const _0x8bf8c0=a0_0x3f352e;try{if(this[_0x8bf8c0(0x112)]['verbose'](this[_0x8bf8c0(0x78b)]+'\x20('+this[_0x8bf8c0(0x799)][_0x8bf8c0(0x3cb)]+'):\x20Editando\x20condição\x20do\x20fluxo...'),!this[_0x8bf8c0(0x2f7)]['flows']['find'](_0x3e8d2f=>_0x3e8d2f[_0x8bf8c0(0x68d)]===_0xe7743a['_id']))throw this[_0x8bf8c0(0x112)][_0x8bf8c0(0x72d)](this[_0x8bf8c0(0x78b)]+'\x20('+this['instance']['wuid']+'):\x20Fluxo\x20\x27'+_0xe7743a['_id']+'\x27\x20não\x20encontrado'),new m(_0x8bf8c0(0xca));let _0x159638=await this['repository']['flow'][_0x8bf8c0(0x312)]({'where':{'_id':_0xe7743a[_0x8bf8c0(0x68d)]}});if(!_0x159638||!_0x159638[_0x8bf8c0(0x385)]?.[_0x8bf8c0(0x2bf)](this[_0x8bf8c0(0x799)][_0x8bf8c0(0x3cb)]))throw this[_0x8bf8c0(0x112)][_0x8bf8c0(0x4b3)](this[_0x8bf8c0(0x78b)]+'\x20('+this[_0x8bf8c0(0x799)][_0x8bf8c0(0x3cb)]+_0x8bf8c0(0x38b)+_0xe7743a[_0x8bf8c0(0x68d)]+_0x8bf8c0(0x6bf)),new m(_0x8bf8c0(0x62f)+_0xe7743a[_0x8bf8c0(0x68d)]+_0x8bf8c0(0x6bf));if(!_0x159638[_0x8bf8c0(0x553)]?.[_0x8bf8c0(0x2bf)](this[_0x8bf8c0(0x799)]['wuid']))throw new m(_0x8bf8c0(0x55f));let _0x277c21=!0x1;if(_0xe7743a[_0x8bf8c0(0x2e6)]?.['delete']===!0x0)_0x159638['conditions']=_0x159638[_0x8bf8c0(0x52c)]['filter'](_0x420486=>_0x420486&&_0xe7743a[_0x8bf8c0(0x2e6)]&&_0x420486[_0x8bf8c0(0x68d)]&&_0xe7743a[_0x8bf8c0(0x2e6)][_0x8bf8c0(0x68d)]&&_0x420486[_0x8bf8c0(0x68d)][_0x8bf8c0(0x123)]()!==_0xe7743a[_0x8bf8c0(0x2e6)][_0x8bf8c0(0x68d)]['toString']()),_0x277c21=!0x0;else{let _0x1d5e8d=_0x159638[_0x8bf8c0(0x52c)]['find'](_0xe8214d=>_0xe8214d&&_0xe7743a[_0x8bf8c0(0x2e6)]&&_0xe8214d[_0x8bf8c0(0x68d)]&&_0xe7743a[_0x8bf8c0(0x2e6)][_0x8bf8c0(0x68d)]&&_0xe8214d[_0x8bf8c0(0x68d)]['toString']()===_0xe7743a['condition']['_id']['toString']());_0x1d5e8d?(_0x277c21=_0x1d5e8d[_0x8bf8c0(0x6ab)]!==_0xe7743a[_0x8bf8c0(0x2e6)][_0x8bf8c0(0x6ab)],Object[_0x8bf8c0(0x4ce)](_0x1d5e8d,_0xe7743a[_0x8bf8c0(0x2e6)])):(_0x159638[_0x8bf8c0(0x52c)][_0x8bf8c0(0x5ea)](_0xe7743a['condition']),_0x277c21=!0x0);}if(_0x277c21){_0x159638[_0x8bf8c0(0x52c)][_0x8bf8c0(0x344)]((_0x430bc7,_0x3cc4a6)=>_0x430bc7[_0x8bf8c0(0x6ab)]>_0x3cc4a6['order']?0x1:_0x3cc4a6[_0x8bf8c0(0x6ab)]>_0x430bc7[_0x8bf8c0(0x6ab)]?-0x1:0x0);for(let _0x3a0f59=0x0;_0x3a0f59<_0x159638[_0x8bf8c0(0x52c)][_0x8bf8c0(0x45c)];_0x3a0f59++)_0x159638[_0x8bf8c0(0x52c)][_0x3a0f59][_0x8bf8c0(0x6ab)]=_0x3a0f59+0x1;_0x159638[_0x8bf8c0(0x52c)][_0x8bf8c0(0x45c)]>0x0&&(_0x159638[_0x8bf8c0(0x52c)][0x0][_0x8bf8c0(0x7ee)]=_0x8bf8c0(0x511));}let _0x56c05c=await this[_0x8bf8c0(0x7be)][_0x8bf8c0(0x2b2)][_0x8bf8c0(0x372)](_0x159638[_0x8bf8c0(0x68d)],_0x159638);if(!_0x56c05c)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x56c05c;}catch(_0x2aaa51){let _0x5dd640='Erro\x20ao\x20editar\x20condição\x20do\x20fluxo',_0x59e47a=_0x2aaa51 instanceof Error?_0x2aaa51[_0x8bf8c0(0x499)]:typeof _0x2aaa51==_0x8bf8c0(0x5a0)?JSON[_0x8bf8c0(0x1bb)](_0x2aaa51):_0x2aaa51,_0x12f75c=_0x5dd640+':\x20'+_0x59e47a;throw this[_0x8bf8c0(0x112)][_0x8bf8c0(0x4b3)](this[_0x8bf8c0(0x78b)]+'\x20('+this['instance'][_0x8bf8c0(0x3cb)]+_0x8bf8c0(0x433)+_0x12f75c),new m(_0x12f75c);}}async[a0_0x3f352e(0x673)](_0x35ad38){const _0x477b9e=a0_0x3f352e;try{if(this[_0x477b9e(0x112)]['verbose'](this[_0x477b9e(0x78b)]+'\x20('+this[_0x477b9e(0x799)][_0x477b9e(0x3cb)]+_0x477b9e(0x760)),!this[_0x477b9e(0x2f7)][_0x477b9e(0x334)][_0x477b9e(0x71f)](_0x46d6ff=>_0x46d6ff[_0x477b9e(0x68d)]===_0x35ad38[_0x477b9e(0x68d)]))throw this[_0x477b9e(0x112)][_0x477b9e(0x72d)](this[_0x477b9e(0x78b)]+'\x20('+this[_0x477b9e(0x799)][_0x477b9e(0x3cb)]+_0x477b9e(0x461)+_0x35ad38[_0x477b9e(0x68d)]+'\x27\x20não\x20encontrado'),new m(_0x477b9e(0xca));let _0x43b6c9=await this['repository'][_0x477b9e(0x2b2)][_0x477b9e(0x312)]({'where':{'_id':_0x35ad38[_0x477b9e(0x68d)]}});if(!_0x43b6c9||!_0x43b6c9[_0x477b9e(0x385)]?.[_0x477b9e(0x2bf)](this[_0x477b9e(0x799)]['wuid']))throw this[_0x477b9e(0x112)][_0x477b9e(0x4b3)](this[_0x477b9e(0x78b)]+'\x20('+this[_0x477b9e(0x799)][_0x477b9e(0x3cb)]+'):\x20Flow\x20\x27'+_0x35ad38[_0x477b9e(0x68d)]+_0x477b9e(0x6bf)),new m(_0x477b9e(0x62f)+_0x35ad38[_0x477b9e(0x68d)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x43b6c9[_0x477b9e(0x553)]?.[_0x477b9e(0x2bf)](this[_0x477b9e(0x799)]['wuid']))throw new m(_0x477b9e(0x55f));let _0x33024f=!0x1;if(_0x35ad38[_0x477b9e(0x47e)]?.[_0x477b9e(0x49b)]===!0x0)_0x43b6c9[_0x477b9e(0x2e3)]=_0x43b6c9['varedits']['filter'](_0x18f3af=>_0x18f3af&&_0x35ad38[_0x477b9e(0x47e)]&&_0x18f3af[_0x477b9e(0x68d)]&&_0x35ad38[_0x477b9e(0x47e)][_0x477b9e(0x68d)]&&_0x18f3af[_0x477b9e(0x68d)]['toString']()!==_0x35ad38['varedit'][_0x477b9e(0x68d)][_0x477b9e(0x123)]()),_0x33024f=!0x0;else{let _0x28c598=_0x43b6c9[_0x477b9e(0x2e3)][_0x477b9e(0x71f)](_0x566891=>_0x566891&&_0x35ad38['varedit']&&_0x566891['_id']&&_0x35ad38['varedit']['_id']&&_0x566891[_0x477b9e(0x68d)][_0x477b9e(0x123)]()===_0x35ad38[_0x477b9e(0x47e)]['_id']['toString']());_0x28c598?(_0x33024f=_0x28c598[_0x477b9e(0x6ab)]!==_0x35ad38[_0x477b9e(0x47e)][_0x477b9e(0x6ab)],Object[_0x477b9e(0x4ce)](_0x28c598,_0x35ad38[_0x477b9e(0x47e)])):(_0x43b6c9['varedits'][_0x477b9e(0x5ea)](_0x35ad38[_0x477b9e(0x47e)]),_0x33024f=!0x0);}if(_0x33024f){_0x43b6c9['varedits']['sort']((_0x71b435,_0x36ac1c)=>_0x71b435['order']>_0x36ac1c[_0x477b9e(0x6ab)]?0x1:_0x36ac1c[_0x477b9e(0x6ab)]>_0x71b435['order']?-0x1:0x0);for(let _0x4432d9=0x0;_0x4432d9<_0x43b6c9[_0x477b9e(0x2e3)][_0x477b9e(0x45c)];_0x4432d9++)_0x43b6c9[_0x477b9e(0x2e3)][_0x4432d9]['order']=_0x4432d9+0x1;}let _0x401d9a=await this[_0x477b9e(0x7be)]['flow']['updateOne'](_0x43b6c9[_0x477b9e(0x68d)],_0x43b6c9);if(!_0x401d9a)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x401d9a;}catch(_0x26c8e4){let _0x21c510=_0x477b9e(0x49a),_0x3db235=_0x26c8e4 instanceof Error?_0x26c8e4[_0x477b9e(0x499)]:typeof _0x26c8e4==_0x477b9e(0x5a0)?JSON[_0x477b9e(0x1bb)](_0x26c8e4):_0x26c8e4,_0x9359fb=_0x21c510+':\x20'+_0x3db235;throw this[_0x477b9e(0x112)][_0x477b9e(0x4b3)](this['instanceName']+'\x20('+this[_0x477b9e(0x799)][_0x477b9e(0x3cb)]+_0x477b9e(0x433)+_0x9359fb),new m(_0x9359fb);}}async['editFlowVariable'](_0x4b3250){const _0x238e4e=a0_0x3f352e;try{if(this[_0x238e4e(0x112)][_0x238e4e(0x72d)](this[_0x238e4e(0x78b)]+'\x20('+this[_0x238e4e(0x799)]['wuid']+_0x238e4e(0x2f2)),!this[_0x238e4e(0x2f7)][_0x238e4e(0x334)][_0x238e4e(0x71f)](_0x50c76a=>_0x50c76a[_0x238e4e(0x68d)]===_0x4b3250[_0x238e4e(0x68d)]))throw this['logger'][_0x238e4e(0x72d)](this['instanceName']+'\x20('+this['instance'][_0x238e4e(0x3cb)]+_0x238e4e(0x461)+_0x4b3250['_id']+_0x238e4e(0x435)),new m(_0x238e4e(0xca));let _0x139bb5=await this[_0x238e4e(0x7be)]['flow'][_0x238e4e(0x312)]({'where':{'_id':_0x4b3250[_0x238e4e(0x68d)]}});if(!_0x139bb5||!_0x139bb5[_0x238e4e(0x385)]?.[_0x238e4e(0x2bf)](this['instance'][_0x238e4e(0x3cb)]))throw this[_0x238e4e(0x112)]['error'](this[_0x238e4e(0x78b)]+'\x20('+this[_0x238e4e(0x799)][_0x238e4e(0x3cb)]+_0x238e4e(0x38b)+_0x4b3250[_0x238e4e(0x68d)]+_0x238e4e(0x6bf)),new m('Flow\x20\x27'+_0x4b3250[_0x238e4e(0x68d)]+_0x238e4e(0x6bf));if(!_0x139bb5[_0x238e4e(0x553)]?.[_0x238e4e(0x2bf)](this[_0x238e4e(0x799)][_0x238e4e(0x3cb)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');_0x4b3250['variable']['name']=_0x4b3250[_0x238e4e(0x14b)][_0x238e4e(0x5f4)][_0x238e4e(0x1e6)](),_0x4b3250['variable'][_0x238e4e(0x5f4)][_0x238e4e(0x77f)]('_')&&(_0x4b3250[_0x238e4e(0x14b)][_0x238e4e(0x5f4)]=_0x4b3250[_0x238e4e(0x14b)][_0x238e4e(0x5f4)][_0x238e4e(0x7a2)](0x1)),_0x4b3250[_0x238e4e(0x14b)]['name']=_0x4b3250[_0x238e4e(0x14b)][_0x238e4e(0x5f4)][_0x238e4e(0x1e6)]();let _0x1ed897=_0x139bb5['variables'][_0x238e4e(0x71f)](_0x441b6c=>_0x441b6c[_0x238e4e(0x5f4)]===_0x4b3250['variable'][_0x238e4e(0x5f4)]);if(_0x1ed897?.[_0x238e4e(0x704)]===!0x0)throw new Error('Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.');if(_0x4b3250[_0x238e4e(0x14b)]?.[_0x238e4e(0x49b)]===!0x0){if(!_0x1ed897)return{'message':_0x238e4e(0x5d1)};_0x139bb5[_0x238e4e(0x25c)]=_0x139bb5[_0x238e4e(0x25c)][_0x238e4e(0x495)](_0x2de86c=>_0x2de86c[_0x238e4e(0x5f4)]!==_0x4b3250['variable'][_0x238e4e(0x5f4)]);}else _0x1ed897?Object[_0x238e4e(0x4ce)](_0x1ed897,_0x4b3250['variable']):_0x139bb5[_0x238e4e(0x25c)][_0x238e4e(0x5ea)](_0x4b3250[_0x238e4e(0x14b)]);let _0x4fec4c=await this[_0x238e4e(0x7be)][_0x238e4e(0x2b2)][_0x238e4e(0x372)](_0x139bb5[_0x238e4e(0x68d)],_0x139bb5);if(!_0x4fec4c)throw new Error(_0x238e4e(0xf9));return _0x4fec4c;}catch(_0x8a71e){let _0x4b392f='Erro\x20ao\x20editar\x20variável\x20do\x20fluxo',_0x9bb24b=_0x8a71e instanceof Error?_0x8a71e['message']:typeof _0x8a71e==_0x238e4e(0x5a0)?JSON[_0x238e4e(0x1bb)](_0x8a71e):_0x8a71e,_0x1ee878=_0x4b392f+':\x20'+_0x9bb24b;throw this['logger'][_0x238e4e(0x4b3)](this[_0x238e4e(0x78b)]+'\x20('+this[_0x238e4e(0x799)][_0x238e4e(0x3cb)]+_0x238e4e(0x433)+_0x1ee878),new m(_0x1ee878);}}async['startFlow'](_0x13ffc6){const _0x562a0b=a0_0x3f352e;let _0x57506f=null;try{if(!this[_0x562a0b(0x2f7)]?.['flowConfig']['enabled'])throw new m('Fluxos\x20não\x20estão\x20ativados');this['logger']['verbose'](this[_0x562a0b(0x78b)]+'\x20('+this['instance'][_0x562a0b(0x3cb)]+_0x562a0b(0x23e));let _0x1ef22e=(await this[_0x562a0b(0x3d6)]({'numbers':[_0x13ffc6[_0x562a0b(0x183)]]}))[0x0];if(!_0x1ef22e[_0x562a0b(0x5af)]&&!(0x0,w[_0x562a0b(0x47d)])(_0x1ef22e[_0x562a0b(0x3ab)])&&!_0x1ef22e[_0x562a0b(0x3ab)]['includes'](_0x562a0b(0x1d9)))throw _0x57506f=JSON[_0x562a0b(0x1bb)](_0x1ef22e,null,0x2),new m(_0x1ef22e);let _0x4d5a7c;if(_0x13ffc6[_0x562a0b(0x5f4)][_0x562a0b(0x45c)]===0x24&&/^[0-9a-fA-F-]{36}$/['test'](_0x13ffc6['name'])?_0x4d5a7c=this[_0x562a0b(0x2f7)][_0x562a0b(0x334)][_0x562a0b(0x71f)](_0x513cbc=>_0x513cbc[_0x562a0b(0x68d)]===_0x13ffc6['name']):_0x4d5a7c=this[_0x562a0b(0x2f7)][_0x562a0b(0x334)][_0x562a0b(0x71f)](_0x5505c2=>_0x5505c2[_0x562a0b(0x5f4)]===_0x13ffc6[_0x562a0b(0x5f4)]),!_0x4d5a7c)throw this[_0x562a0b(0x112)][_0x562a0b(0x72d)](this[_0x562a0b(0x78b)]+'\x20('+this[_0x562a0b(0x799)][_0x562a0b(0x3cb)]+_0x562a0b(0x461)+_0x13ffc6[_0x562a0b(0x5f4)]+_0x562a0b(0x435)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x14e602=await this['repository'][_0x562a0b(0x2b2)][_0x562a0b(0x312)]({'where':{'_id':_0x4d5a7c[_0x562a0b(0x68d)]}});if(!_0x14e602||!_0x14e602[_0x562a0b(0x385)]?.[_0x562a0b(0x2bf)](this[_0x562a0b(0x799)]['wuid']))throw this[_0x562a0b(0x112)]['error'](this['instanceName']+'\x20('+this[_0x562a0b(0x799)][_0x562a0b(0x3cb)]+_0x562a0b(0x38b)+_0x4d5a7c['_id']+_0x562a0b(0x6bf)),_0x57506f=_0x562a0b(0x62f)+_0x4d5a7c['_id']+_0x562a0b(0x6bf),new m(_0x57506f);let _0xa787ff=await this[_0x562a0b(0x622)](_0x14e602,_0x1ef22e[_0x562a0b(0x3ab)],_0x13ffc6['changeVariables']);if(_0xa787ff){this[_0x562a0b(0x112)][_0x562a0b(0x72d)](this[_0x562a0b(0x78b)]+'\x20('+this['instance'][_0x562a0b(0x3cb)]+_0x562a0b(0xde));let _0x4fd4c4=await this[_0x562a0b(0x743)](_0xa787ff);return _0x4fd4c4&&await this[_0x562a0b(0x137)](_0xa787ff,_0x4fd4c4),{'message':_0x562a0b(0x49d)+_0x13ffc6[_0x562a0b(0x183)]};}}catch(_0x178778){if(this['logger'][_0x562a0b(0x4b3)](this[_0x562a0b(0x78b)]+'\x20('+this[_0x562a0b(0x799)]['wuid']+_0x562a0b(0x134)+(_0x178778 instanceof Error?_0x178778[_0x562a0b(0x499)]:JSON[_0x562a0b(0x1bb)](_0x178778,null,0x2))),_0x57506f=_0x178778 instanceof Error?_0x178778[_0x562a0b(0x499)]:JSON[_0x562a0b(0x1bb)](_0x178778,null,0x2),_0x57506f)throw new m(_0x562a0b(0x383)+_0x57506f);}}async[a0_0x3f352e(0x674)](_0x5ef879,_0xcfd89a,_0x42ba67){const _0xa671fc=a0_0x3f352e;let _0x505a0a=null;try{if(!this[_0xa671fc(0x2f7)]?.[_0xa671fc(0x22d)][_0xa671fc(0x167)])throw new m('Fluxos\x20não\x20estão\x20ativados');if(this[_0xa671fc(0x112)][_0xa671fc(0x72d)](this[_0xa671fc(0x78b)]+'\x20('+this[_0xa671fc(0x799)][_0xa671fc(0x3cb)]+_0xa671fc(0x23e)),_0xcfd89a){let _0x605da3=(await this['whatsappNumber']({'numbers':[_0xcfd89a]}))[0x0];if(!_0x605da3[_0xa671fc(0x5af)]&&!(0x0,w[_0xa671fc(0x47d)])(_0x605da3[_0xa671fc(0x3ab)])&&!_0x605da3[_0xa671fc(0x3ab)]['includes'](_0xa671fc(0x1d9)))throw _0x505a0a=JSON['stringify'](_0x605da3,null,0x2),new m(_0x605da3);_0xcfd89a=_0x605da3[_0xa671fc(0x3ab)];}else _0xcfd89a||(_0xcfd89a=(0x0,X['v4'])());let _0x1009a0=await this['repository'][_0xa671fc(0x2b2)][_0xa671fc(0x312)]({'where':{'_id':_0x5ef879}});if(!_0x1009a0||!_0x1009a0['whoCanUse']?.['includes'](this[_0xa671fc(0x799)][_0xa671fc(0x3cb)]))throw this[_0xa671fc(0x112)][_0xa671fc(0x4b3)](this[_0xa671fc(0x78b)]+'\x20('+this[_0xa671fc(0x799)][_0xa671fc(0x3cb)]+_0xa671fc(0x38b)+_0x5ef879+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x5ef879+_0xa671fc(0x6bf));let _0x4b8eac=await this['createConversationforStartFlow'](_0x1009a0,_0xcfd89a,null);if(_0x4b8eac){this[_0xa671fc(0x112)]['verbose'](this['instanceName']+'\x20('+this[_0xa671fc(0x799)]['wuid']+'):\x20Criou\x20conversa\x20no\x20startFlowWebhook');let _0x2f6cd0;if(_0x42ba67){let _0x2b8a98=_0x4b8eac[_0xa671fc(0x135)]['realVariables'],_0x148cbf=this[_0xa671fc(0x740)](_0x42ba67);Object[_0xa671fc(0x4ce)](_0x2b8a98,_0x148cbf),_0x4b8eac[_0xa671fc(0x135)][_0xa671fc(0x15e)]=_0x2b8a98,_0x2f6cd0={'error':!0x1,'apiResponse':_0x42ba67};}let _0x3adab4=await this[_0xa671fc(0x743)](_0x4b8eac);return _0x3adab4&&await this[_0xa671fc(0x137)](_0x4b8eac,_0x3adab4),{'message':_0xa671fc(0x539)};}}catch(_0x49c439){if(this[_0xa671fc(0x112)][_0xa671fc(0x4b3)](this[_0xa671fc(0x78b)]+'\x20('+this[_0xa671fc(0x799)][_0xa671fc(0x3cb)]+_0xa671fc(0x134)+(_0x49c439 instanceof Error?_0x49c439['message']:JSON[_0xa671fc(0x1bb)](_0x49c439,null,0x2))),_0x505a0a=_0x49c439 instanceof Error?_0x49c439[_0xa671fc(0x499)]:JSON['stringify'](_0x49c439,null,0x2),_0x505a0a)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x505a0a);}}async['closeExistingConversations'](_0x36cdfa){const _0x235d65=a0_0x3f352e;try{let _0x4263cc={'remoteJid':_0x36cdfa,'status':_0x235d65(0x6d3)},_0x24f74e={'status':'closed'},_0x4128d1=await this['repository']['flowConversation'][_0x235d65(0x4b0)](_0x4263cc,_0x24f74e,this['instance'][_0x235d65(0x3cb)]);return this[_0x235d65(0x112)][_0x235d65(0x72d)](this[_0x235d65(0x78b)]+'\x20('+this[_0x235d65(0x799)][_0x235d65(0x3cb)]+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.'),_0x4128d1;}catch(_0xe9cf20){throw this[_0x235d65(0x112)][_0x235d65(0x4b3)](this['instanceName']+'\x20('+this[_0x235d65(0x799)][_0x235d65(0x3cb)]+_0x235d65(0x55a)+_0xe9cf20['message']),_0xe9cf20;}}async['createConversationforStartFlow'](_0x3ff5e2,_0x11c737,_0x781c4f){const _0x31431a=a0_0x3f352e;this['logger'][_0x31431a(0x72d)](this[_0x31431a(0x78b)]+'\x20('+this['instance'][_0x31431a(0x3cb)]+_0x31431a(0x792)),await this[_0x31431a(0x11d)](_0x11c737);try{let _0x4f7efb=require(_0x31431a(0x354))[_0x31431a(0x438)],_0x2df780=Date[_0x31431a(0x196)](),_0x2adfea=_0x31431a(0x691),_0x18b3f6={},_0x123e80={},_0x1a6d59=this['AutomateSystem'][_0x31431a(0x334)][_0x31431a(0x71f)](_0x52e643=>_0x52e643[_0x31431a(0x68d)]===_0x3ff5e2[_0x31431a(0x68d)]?.[_0x31431a(0x123)]()),_0x1a8e1a=_0x1a6d59?.['minutesToClose']??_0x3ff5e2[_0x31431a(0x734)]??0x0,_0x5231c6=_0x1a6d59?.[_0x31431a(0x4e4)]??_0x3ff5e2[_0x31431a(0x4e4)]??!0x1,_0x2b1dd8={'flowId':_0x3ff5e2[_0x31431a(0x68d)],..._0x3ff5e2,'chatLog':null},_0x1733b0=await this[_0x31431a(0x457)](_0x2b1dd8[_0x31431a(0x25c)]),_0x3b96eb=await this[_0x31431a(0x74f)](_0x11c737),_0x412cef={..._0x1733b0,..._0x3b96eb,'_remoteJid':_0x11c737},_0x398365={'lastReceivedMessage':_0x18b3f6,'lastSendMessage':_0x123e80,'lastBlockId':_0x2adfea,'lastCondition':!0x0,'realVariables':_0x412cef};_0x2b1dd8[_0x31431a(0x135)]=_0x398365,_0x2b1dd8[_0x31431a(0x135)][_0x31431a(0x15e)]={..._0x412cef,..._0x781c4f},delete _0x2b1dd8[_0x31431a(0x68d)],_0x2b1dd8['_id']=new _0x4f7efb(),_0x2b1dd8['lastInteraction']=_0x2df780,_0x2b1dd8[_0x31431a(0x62a)]=_0x31431a(0x6d3),_0x2b1dd8['remoteJid']=_0x11c737,_0x2b1dd8[_0x31431a(0x734)]=_0x1a8e1a,_0x2b1dd8[_0x31431a(0x4e4)]=_0x5231c6,_0x2b1dd8['_id']=_0x3ff5e2['_id'];let _0x1a2813=await this[_0x31431a(0x7be)][_0x31431a(0x5b0)][_0x31431a(0x372)](_0x2b1dd8[_0x31431a(0x68d)],_0x2b1dd8,this[_0x31431a(0x799)][_0x31431a(0x3cb)]);return this[_0x31431a(0x112)]['verbose'](this[_0x31431a(0x78b)]+'\x20('+this[_0x31431a(0x799)][_0x31431a(0x3cb)]+_0x31431a(0x3f7)),_0x1a2813?_0x2b1dd8:null;}catch(_0x5e4ff9){let _0x65858d=_0x31431a(0x360),_0x74027d=_0x5e4ff9 instanceof Error?_0x5e4ff9[_0x31431a(0x499)]:typeof _0x5e4ff9=='object'?JSON[_0x31431a(0x1bb)](_0x5e4ff9):_0x5e4ff9,_0x16144b=_0x65858d+':\x20'+_0x74027d;throw this[_0x31431a(0x112)][_0x31431a(0x4b3)](this['instanceName']+'\x20('+this[_0x31431a(0x799)]['wuid']+'):\x20'+_0x16144b),new m(_0x16144b);}}async[a0_0x3f352e(0x7c5)](_0x508ccd){const _0x23ac0b=a0_0x3f352e;try{this[_0x23ac0b(0x112)][_0x23ac0b(0x72d)](this[_0x23ac0b(0x78b)]+'\x20('+this[_0x23ac0b(0x799)][_0x23ac0b(0x3cb)]+_0x23ac0b(0x3a8)),this['logger'][_0x23ac0b(0x72d)](this['instanceName']+'\x20('+this[_0x23ac0b(0x799)][_0x23ac0b(0x3cb)]+_0x23ac0b(0x63c)+_0x508ccd);let _0x3ae4de={'where':{'_id':_0x508ccd}};return await this[_0x23ac0b(0x7be)]['flowConversation'][_0x23ac0b(0x312)](_0x3ae4de,this[_0x23ac0b(0x799)][_0x23ac0b(0x3cb)]);}catch(_0x402843){let _0x5d47ec=_0x23ac0b(0x297),_0x59df75=_0x402843 instanceof Error?_0x402843[_0x23ac0b(0x499)]:typeof _0x402843==_0x23ac0b(0x5a0)?JSON['stringify'](_0x402843):_0x402843,_0x95ac50=_0x5d47ec+':\x20'+_0x59df75;throw this['logger']['error'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x23ac0b(0x433)+_0x95ac50),new m(_0x95ac50);}}async[a0_0x3f352e(0x2ce)](_0x7b8c79){const _0x21f98d=a0_0x3f352e;try{return this['logger'][_0x21f98d(0x72d)](this[_0x21f98d(0x78b)]+'\x20('+this[_0x21f98d(0x799)][_0x21f98d(0x3cb)]+_0x21f98d(0x20f)),await this['repository'][_0x21f98d(0x5b0)]['find'](_0x7b8c79,this[_0x21f98d(0x799)][_0x21f98d(0x3cb)]);}catch(_0x249bb5){let _0x346079=_0x21f98d(0x625),_0x226cb0=_0x249bb5 instanceof Error?_0x249bb5[_0x21f98d(0x499)]:typeof _0x249bb5==_0x21f98d(0x5a0)?JSON[_0x21f98d(0x1bb)](_0x249bb5):_0x249bb5,_0x186aa7=_0x346079+':\x20'+_0x226cb0;throw this[_0x21f98d(0x112)]['error'](this[_0x21f98d(0x78b)]+'\x20('+this[_0x21f98d(0x799)][_0x21f98d(0x3cb)]+'):\x20'+_0x186aa7),new m(_0x186aa7);}}async['deleteConversation'](_0xe5e067){const _0x11d093=a0_0x3f352e;try{return this[_0x11d093(0x112)]['verbose'](this[_0x11d093(0x78b)]+'\x20('+this[_0x11d093(0x799)][_0x11d093(0x3cb)]+_0x11d093(0x37d)),this[_0x11d093(0x112)][_0x11d093(0x72d)](this[_0x11d093(0x78b)]+'\x20('+this[_0x11d093(0x799)][_0x11d093(0x3cb)]+_0x11d093(0xad)+_0xe5e067),(await this[_0x11d093(0x7be)][_0x11d093(0x5b0)][_0x11d093(0xe9)]({'where':{'_id':_0xe5e067[_0x11d093(0x68d)]}},this[_0x11d093(0x799)]['wuid']))[_0x11d093(0x329)]===0x0?{'message':_0x11d093(0x689)}:{'message':_0x11d093(0x796)};}catch(_0x196587){let _0x30a609=_0x11d093(0x7ec),_0x5d2f5d=_0x196587 instanceof Error?_0x196587[_0x11d093(0x499)]:typeof _0x196587==_0x11d093(0x5a0)?JSON[_0x11d093(0x1bb)](_0x196587):_0x196587,_0x57463=_0x30a609+':\x20'+_0x5d2f5d;throw this[_0x11d093(0x112)][_0x11d093(0x4b3)](this[_0x11d093(0x78b)]+'\x20('+this[_0x11d093(0x799)][_0x11d093(0x3cb)]+'):\x20'+_0x57463),new m(_0x57463);}}async[a0_0x3f352e(0x55b)](_0x547c98){const _0x539243=a0_0x3f352e;try{let {_id:_0x25de92,chatLog:_0x471dee,status:_0x276cf0}=_0x547c98;if(!_0x25de92)return{'message':'O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.'};let _0x4a3335={};if(_0x276cf0!==void 0x0&&(_0x4a3335[_0x539243(0x62a)]=_0x276cf0),Object[_0x539243(0x75c)](_0x4a3335)[_0x539243(0x45c)]===0x0)return{'message':_0x539243(0x268)};let _0x468f61=await this['repository'][_0x539243(0x5b0)]['updateOne'](_0x25de92,_0x4a3335,this[_0x539243(0x799)]['wuid']);return _0x468f61||{'message':'Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.'};}catch(_0x21d24c){let _0x1ce4f1=_0x539243(0xb3),_0x140d00=_0x21d24c instanceof Error?_0x21d24c[_0x539243(0x499)]:typeof _0x21d24c=='object'?JSON['stringify'](_0x21d24c):_0x21d24c,_0x500bac=_0x1ce4f1+':\x20'+_0x140d00;throw this['logger'][_0x539243(0x4b3)](this[_0x539243(0x78b)]+'\x20('+this[_0x539243(0x799)][_0x539243(0x3cb)]+'):\x20'+_0x500bac),new m(_0x500bac);}}async['editChat'](_0x582f33){const _0x4ebcb5=a0_0x3f352e;try{_0x582f33[_0x4ebcb5(0x68d)]=this[_0x4ebcb5(0x36e)](_0x582f33[_0x4ebcb5(0x68d)]);let _0x189646=await this[_0x4ebcb5(0x7be)][_0x4ebcb5(0x629)]['findOne']({'where':{'_id':_0x582f33['_id']}},this[_0x4ebcb5(0x799)]['wuid']);if(!_0x189646)throw new m(_0x4ebcb5(0x54d));let {_id:_0x36ff24,leadInfo:_0x14ed08}=_0x582f33;if(!_0x36ff24)throw new Error(_0x4ebcb5(0x1e7));if(_0x582f33[_0x4ebcb5(0x49b)]===_0x4ebcb5(0x7c7))return await this['deleteChat'](_0x582f33[_0x4ebcb5(0x68d)]),await this['repository'][_0x4ebcb5(0x629)][_0x4ebcb5(0x49b)]({'where':{'_id':_0x582f33[_0x4ebcb5(0x68d)]}},this[_0x4ebcb5(0x799)]['wuid']),await this['repository'][_0x4ebcb5(0x499)][_0x4ebcb5(0x49b)]({'where':{'key':{'remoteJid':_0x582f33[_0x4ebcb5(0x68d)]}}},this[_0x4ebcb5(0x799)][_0x4ebcb5(0x3cb)]),_0x582f33=await this['repository'][_0x4ebcb5(0x629)][_0x4ebcb5(0x372)]({'where':{'_id':_0x582f33[_0x4ebcb5(0x68d)]}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x4ebcb5(0x3cb)]),J(this['instanceName'],'chats',{'chat':_0x582f33}),{'message':_0x4ebcb5(0x59c)};if(_0x582f33['delete']===_0x4ebcb5(0x1a8))return await this[_0x4ebcb5(0x7be)]['message']['delete']({'where':{'key':{'remoteJid':_0x582f33[_0x4ebcb5(0x68d)]}}},this['instance']['wuid']),_0x582f33=await this[_0x4ebcb5(0x7be)][_0x4ebcb5(0x629)]['updateOne']({'where':{'_id':_0x582f33[_0x4ebcb5(0x68d)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x4ebcb5(0x799)][_0x4ebcb5(0x3cb)]),J(this[_0x4ebcb5(0x78b)],_0x4ebcb5(0x725),{'chat':_0x582f33}),{'message':_0x4ebcb5(0x616)};let _0x81b3fa=(_0x264293,_0x77073c,_0x2b7960)=>{const _0x4f5fc9=_0x4ebcb5;_0x264293&&_0x2b7960[_0x4f5fc9(0x62c)](_0x4599de=>{const _0x1f16ca=_0x4f5fc9;_0x264293[_0x4599de]!==void 0x0&&(_0x77073c[_0x1f16ca(0x79f)+_0x4599de]=_0x264293[_0x4599de]);});},_0x36730e={};if('muteEndTime'in _0x582f33&&(this[_0x4ebcb5(0x112)]['verbose'](this[_0x4ebcb5(0x78b)]+'\x20('+this['instance'][_0x4ebcb5(0x3cb)]+'):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20'+_0x582f33['_id']),_0x582f33['muteEndTime']=_0x582f33[_0x4ebcb5(0x282)]===0x0?null:-0x1,await this['client'][_0x4ebcb5(0x165)]({'mute':_0x582f33[_0x4ebcb5(0x282)]},_0x582f33[_0x4ebcb5(0x68d)]),_0x36730e[_0x4ebcb5(0x282)]=Number(_0x582f33['muteEndTime'])),_0x14ed08&&(_0x81b3fa(_0x14ed08,_0x36730e,[_0x4ebcb5(0x544),_0x4ebcb5(0x39c),'email',_0x4ebcb5(0x744),'status','notas',_0x4ebcb5(0x3e3),_0x4ebcb5(0x16d),_0x4ebcb5(0x69d),'etiquetas',_0x4ebcb5(0x2f8)]),Array[_0x4ebcb5(0xae)](_0x14ed08[_0x4ebcb5(0x6e8)])&&(_0x36730e['leadInfo.customFields']=_0x14ed08[_0x4ebcb5(0x6e8)][_0x4ebcb5(0xff)](_0x23c006=>({'_id':_0x23c006[_0x4ebcb5(0x68d)],'value':_0x23c006[_0x4ebcb5(0x242)]}))),_0x582f33[_0x4ebcb5(0x704)]['etiquetas']!==void 0x0)){let _0x58500e=await this['repository'][_0x4ebcb5(0x716)]['find']({'where':{}},this[_0x4ebcb5(0x799)][_0x4ebcb5(0x3cb)]),_0xb21474=new Set(_0x582f33[_0x4ebcb5(0x704)][_0x4ebcb5(0x612)]||[]),_0x32c39c=new Set(_0x582f33[_0x4ebcb5(0x704)][_0x4ebcb5(0x612)]),_0x5e1f17=new Set(_0x58500e[_0x4ebcb5(0xff)](_0x5168ea=>_0x5168ea[_0x4ebcb5(0x68d)])),_0x744d2c=[..._0x32c39c][_0x4ebcb5(0x495)](_0x3b6e93=>!_0xb21474[_0x4ebcb5(0x4e1)](_0x3b6e93)&&_0x5e1f17[_0x4ebcb5(0x4e1)](_0x3b6e93)),_0x574ad5=[..._0xb21474][_0x4ebcb5(0x495)](_0x459d85=>!_0x32c39c[_0x4ebcb5(0x4e1)](_0x459d85));if(_0x36730e[_0x4ebcb5(0x654)]=[..._0xb21474],_0x189646&&!_0x189646[_0x4ebcb5(0x36b)]){for(let _0x2d3fb5 of _0x744d2c)await this[_0x4ebcb5(0x258)](_0x2d3fb5,_0x582f33[_0x4ebcb5(0x68d)]),_0xb21474['add'](_0x2d3fb5);for(let _0x39e90f of _0x574ad5)await this['RemoveChatLabel'](_0x39e90f,_0x582f33['_id']),_0xb21474[_0x4ebcb5(0x49b)](_0x39e90f);}}if(_0x582f33[_0x4ebcb5(0x7d2)]!==void 0x0&&(_0x36730e[_0x4ebcb5(0x7d2)]=Number(_0x582f33[_0x4ebcb5(0x7d2)])),Object[_0x4ebcb5(0x75c)](_0x36730e)['length']===0x0)throw new Error(_0x4ebcb5(0x268));let _0x2fd269=await this[_0x4ebcb5(0x7be)][_0x4ebcb5(0x629)][_0x4ebcb5(0x372)]({'where':{'_id':_0x582f33[_0x4ebcb5(0x68d)]}},_0x36730e,this[_0x4ebcb5(0x799)]['wuid']);return _0x2fd269&&J(this['instanceName'],_0x4ebcb5(0x725),{'chat':_0x2fd269}),_0x2fd269?(this[_0x4ebcb5(0x112)][_0x4ebcb5(0x72d)](this[_0x4ebcb5(0x78b)]+'\x20('+this[_0x4ebcb5(0x799)][_0x4ebcb5(0x3cb)]+_0x4ebcb5(0x433)+JSON[_0x4ebcb5(0x1bb)](_0x2fd269,null,0x2)),_0x2fd269):{'message':'Nenhum\x20chat\x20encontrado\x20para\x20editar.'};}catch(_0x453d2e){let _0x23b6fe=_0x4ebcb5(0x15c),_0x5ba70e=_0x453d2e instanceof Error?_0x453d2e['message']:typeof _0x453d2e==_0x4ebcb5(0x5a0)?JSON[_0x4ebcb5(0x1bb)](_0x453d2e):_0x453d2e,_0x143edb=_0x23b6fe+':\x20'+_0x5ba70e;throw this[_0x4ebcb5(0x112)][_0x4ebcb5(0x4b3)](this[_0x4ebcb5(0x78b)]+'\x20('+this[_0x4ebcb5(0x799)]['wuid']+_0x4ebcb5(0x433)+_0x143edb),new m(_0x143edb);}}async['AddChatLabel'](_0x1c6f70,_0x2318c0){const _0x2fc83b=a0_0x3f352e;try{await this[_0x2fc83b(0x3de)]['addChatLabel'](_0x2318c0,_0x1c6f70),this['logger']['info'](this[_0x2fc83b(0x78b)]+'\x20('+this[_0x2fc83b(0x799)][_0x2fc83b(0x3cb)]+_0x2fc83b(0x306)+_0x1c6f70+_0x2fc83b(0x626)+_0x2318c0+'\x20com\x20sucesso.');}catch(_0x3eb1d1){this['logger'][_0x2fc83b(0x4b3)](_0x2fc83b(0x4cc)+_0x1c6f70+_0x2fc83b(0x6d4)+_0x2318c0+':\x20'+_0x3eb1d1);}}async[a0_0x3f352e(0x667)](_0x3530ee,_0x5be55a){const _0x27f0e3=a0_0x3f352e;try{await this[_0x27f0e3(0x3de)][_0x27f0e3(0x4a4)](_0x5be55a,_0x3530ee),this[_0x27f0e3(0x112)][_0x27f0e3(0x567)](this['instanceName']+'\x20('+this[_0x27f0e3(0x799)][_0x27f0e3(0x3cb)]+_0x27f0e3(0x306)+_0x3530ee+'\x20removido\x20do\x20chat\x20'+_0x5be55a+_0x27f0e3(0x16a));}catch(_0x93640b){this[_0x27f0e3(0x112)]['error'](_0x27f0e3(0x6e1)+_0x3530ee+_0x27f0e3(0x1a5)+_0x5be55a+':\x20'+_0x93640b);}}async['updateAgent'](_0x3714e4){const _0x5895e9=a0_0x3f352e;try{let _0x44d166=await this[_0x5895e9(0x7be)]['automateSystem']['findOrCreate'](this[_0x5895e9(0x799)][_0x5895e9(0x3cb)]),_0x18ff76=_0x3714e4['_id']?_0x44d166[_0x5895e9(0x3eb)]['findIndex'](_0x229ce1=>_0x229ce1[_0x5895e9(0x68d)]===_0x3714e4[_0x5895e9(0x68d)]):-0x1;if(_0x3714e4[_0x5895e9(0x49b)]&&_0x18ff76>-0x1)_0x44d166[_0x5895e9(0x3eb)][_0x5895e9(0x6e3)](_0x18ff76,0x1);else{if(_0x18ff76>-0x1){let _0x2ea1fb=_0x44d166[_0x5895e9(0x3eb)][_0x18ff76];_0x3714e4[_0x5895e9(0x1f2)]&&(_0x2ea1fb['fone']=_0x3714e4['fone']),_0x3714e4['name']&&(_0x2ea1fb[_0x5895e9(0x5f4)]=_0x3714e4[_0x5895e9(0x5f4)]),_0x3714e4[_0x5895e9(0x555)]&&(_0x2ea1fb[_0x5895e9(0x555)]=_0x3714e4[_0x5895e9(0x555)]),_0x3714e4[_0x5895e9(0x5c0)]&&(_0x2ea1fb['role']=_0x3714e4['role']);}else _0x44d166['agents'][_0x5895e9(0x5ea)]({'_id':_0x3714e4['_id']||new he[(_0x5895e9(0x164))][(_0x5895e9(0x48f))][(_0x5895e9(0x438))]()['toString'](),'fone':_0x3714e4[_0x5895e9(0x1f2)],'name':_0x3714e4[_0x5895e9(0x5f4)],'email':_0x3714e4['email'],'role':_0x3714e4[_0x5895e9(0x5c0)]});}let _0x1aeaec={'agents':_0x44d166[_0x5895e9(0x3eb)]},_0x168e85=await this[_0x5895e9(0x7be)][_0x5895e9(0x2d3)]['update'](_0x1aeaec,this[_0x5895e9(0x799)][_0x5895e9(0x3cb)]);return this['AutomateSystem']=_0x168e85,this[_0x5895e9(0x112)][_0x5895e9(0x72d)](this[_0x5895e9(0x78b)]+'\x20('+this[_0x5895e9(0x799)]['wuid']+'):\x20alterando\x20this.AutomateSystem'),this[_0x5895e9(0x112)]['verbose'](this[_0x5895e9(0x78b)]+'\x20('+this[_0x5895e9(0x799)]['wuid']+_0x5895e9(0x433)+this[_0x5895e9(0x2f7)]),_0x168e85;}catch(_0x2184b2){let _0x2eb311=_0x5895e9(0x791),_0x2bf36b=_0x2184b2 instanceof Error?_0x2184b2[_0x5895e9(0x499)]:typeof _0x2184b2==_0x5895e9(0x5a0)?JSON[_0x5895e9(0x1bb)](_0x2184b2):_0x2184b2,_0xe4e77f=_0x2eb311+':\x20'+_0x2bf36b;throw this[_0x5895e9(0x112)][_0x5895e9(0x4b3)](this[_0x5895e9(0x78b)]+'\x20('+this[_0x5895e9(0x799)][_0x5895e9(0x3cb)]+_0x5895e9(0x433)+_0xe4e77f),new m(_0xe4e77f);}}async['updateCustomFields'](_0x5d93d3){const _0x590786=a0_0x3f352e;try{let _0x3ec505=await this[_0x590786(0x7be)][_0x590786(0x2d3)]['findOrCreate'](this['instance'][_0x590786(0x3cb)]),_0x59eaad=_0x5d93d3['_id']?_0x3ec505[_0x590786(0x6e8)][_0x590786(0x4b6)](_0xd54314=>_0xd54314['_id']===_0x5d93d3['_id']):-0x1,_0x5a0c01=!0x1,_0x36df55=_0x3ec505[_0x590786(0x6e8)]['some'](_0x4e1b66=>_0x4e1b66[_0x590786(0x6ab)]===_0x5d93d3['order']);if(_0x5d93d3['delete']&&_0x59eaad>-0x1)_0x3ec505[_0x590786(0x6e8)][_0x590786(0x6e3)](_0x59eaad,0x1),_0x5a0c01=!0x0;else{if(_0x59eaad>-0x1){if(_0x3ec505[_0x590786(0x6e8)][_0x590786(0x378)](_0x49d881=>_0x49d881['name']===_0x5d93d3[_0x590786(0x5f4)]&&_0x49d881[_0x590786(0x68d)]!==_0x5d93d3[_0x590786(0x68d)]))throw new Error(_0x590786(0x628));let _0x579d83=_0x3ec505[_0x590786(0x6e8)][_0x59eaad];_0x5d93d3[_0x590786(0x6ab)]&&(_0x36df55||!Number[_0x590786(0x702)](_0x5d93d3['order']))&&(_0x579d83[_0x590786(0x6ab)]=_0x5d93d3['order'],_0x5a0c01=!0x0),_0x5d93d3[_0x590786(0x5f4)]&&(_0x579d83[_0x590786(0x5f4)]=_0x5d93d3[_0x590786(0x5f4)]);}else{if(_0x3ec505[_0x590786(0x6e8)]['some'](_0x230b69=>_0x230b69[_0x590786(0x5f4)]===_0x5d93d3[_0x590786(0x5f4)]&&_0x230b69['_id']!==_0x5d93d3[_0x590786(0x68d)]))throw new Error(_0x590786(0x628));_0x3ec505[_0x590786(0x6e8)][_0x590786(0x5ea)]({'_id':_0x5d93d3['_id']||new he[(_0x590786(0x164))][(_0x590786(0x48f))][(_0x590786(0x438))]()[_0x590786(0x123)](),'order':_0x5d93d3[_0x590786(0x6ab)],'name':_0x5d93d3[_0x590786(0x5f4)]}),_0x5a0c01=!0x0;}}if(_0x5a0c01){_0x3ec505[_0x590786(0x6e8)][_0x590786(0x344)]((_0x1629ac,_0x129324)=>_0x1629ac[_0x590786(0x6ab)]>_0x129324['order']?0x1:_0x129324[_0x590786(0x6ab)]>_0x1629ac[_0x590786(0x6ab)]?-0x1:0x0);for(let _0x50335c=0x0;_0x50335c<_0x3ec505['customFields']['length'];_0x50335c++)_0x3ec505[_0x590786(0x6e8)][_0x50335c][_0x590786(0x6ab)]=_0x50335c+0x1;}let _0x180eb3=await this[_0x590786(0x7be)][_0x590786(0x2d3)][_0x590786(0x6c1)](_0x3ec505,this[_0x590786(0x799)][_0x590786(0x3cb)]);return this[_0x590786(0x2f7)]=_0x180eb3,this[_0x590786(0x112)]['verbose'](this[_0x590786(0x78b)]+'\x20('+this[_0x590786(0x799)][_0x590786(0x3cb)]+_0x590786(0xd9)),this[_0x590786(0x112)][_0x590786(0x72d)](this[_0x590786(0x78b)]+'\x20('+this[_0x590786(0x799)][_0x590786(0x3cb)]+_0x590786(0x433)+this[_0x590786(0x2f7)]),_0x180eb3;}catch(_0x14d6ae){let _0x26fdad=_0x590786(0x31c),_0x8436de=_0x14d6ae instanceof Error?_0x14d6ae['message']:typeof _0x14d6ae=='object'?JSON[_0x590786(0x1bb)](_0x14d6ae):_0x14d6ae,_0x1090d1=_0x26fdad+':\x20'+_0x8436de;throw this[_0x590786(0x112)][_0x590786(0x4b3)](this[_0x590786(0x78b)]+'\x20('+this[_0x590786(0x799)][_0x590786(0x3cb)]+_0x590786(0x433)+_0x1090d1),new m(_0x1090d1);}}async[a0_0x3f352e(0x202)](_0x4920c9){const _0x24303d=a0_0x3f352e;try{let _0x49bf97=await this[_0x24303d(0x7be)][_0x24303d(0x2d3)][_0x24303d(0x3b3)](this[_0x24303d(0x799)][_0x24303d(0x3cb)]),_0x1ae68b=_0x49bf97?.[_0x24303d(0x78c)]?.[_0x24303d(0x4b6)](_0x53f823=>_0x53f823['_id']===_0x4920c9?.[_0x24303d(0x68d)]);if(_0x4920c9?.[_0x24303d(0x49b)])_0x1ae68b>-0x1&&_0x49bf97?.[_0x24303d(0x78c)]?.['splice'](_0x1ae68b,0x1);else{if(_0x1ae68b>-0x1){let _0x1d3ca6=_0x49bf97['autoCompleteMessages'][_0x1ae68b];_0x1d3ca6[_0x24303d(0x6ab)]=_0x4920c9?.[_0x24303d(0x6ab)]||_0x1d3ca6['order'],_0x1d3ca6[_0x24303d(0x5ba)]=_0x4920c9?.[_0x24303d(0x5ba)]||_0x1d3ca6[_0x24303d(0x5ba)],_0x1d3ca6[_0x24303d(0x499)]=_0x4920c9?.[_0x24303d(0x499)]||_0x1d3ca6[_0x24303d(0x499)];}else{let _0x11156b={'_id':_0x4920c9?.[_0x24303d(0x68d)]||new he['default']['Types'][(_0x24303d(0x438))]()[_0x24303d(0x123)](),'order':_0x4920c9?.[_0x24303d(0x6ab)],'command':_0x4920c9?.[_0x24303d(0x5ba)],'message':_0x4920c9?.[_0x24303d(0x499)]};_0x49bf97?.[_0x24303d(0x78c)]?.[_0x24303d(0x5ea)](_0x11156b);}}_0x49bf97?.['autoCompleteMessages']?.[_0x24303d(0x344)]((_0x29f0f1,_0x22d3c7)=>_0x29f0f1['order']-_0x22d3c7['order']);let _0x4ccebc=await this[_0x24303d(0x7be)][_0x24303d(0x2d3)][_0x24303d(0x6c1)](_0x49bf97,this[_0x24303d(0x799)]['wuid']);return this[_0x24303d(0x2f7)]=_0x4ccebc,this[_0x24303d(0x112)][_0x24303d(0x72d)](this[_0x24303d(0x78b)]+'\x20('+this[_0x24303d(0x799)]['wuid']+_0x24303d(0xd9)),_0x4ccebc;}catch(_0x318deb){let _0x3fc33a=_0x24303d(0x50b),_0x52b031=_0x318deb instanceof Error?_0x318deb[_0x24303d(0x499)]:typeof _0x318deb==_0x24303d(0x5a0)?JSON[_0x24303d(0x1bb)](_0x318deb):_0x318deb,_0x1b0600=_0x3fc33a+':\x20'+_0x52b031;throw this[_0x24303d(0x112)][_0x24303d(0x4b3)](this[_0x24303d(0x78b)]+'\x20('+this['instance'][_0x24303d(0x3cb)]+_0x24303d(0x433)+_0x1b0600),new m(_0x1b0600);}}async[a0_0x3f352e(0x6de)](_0x125eba){const _0x41e4ed=a0_0x3f352e;try{let _0x6e414=await this[_0x41e4ed(0x7be)]['automateSystem'][_0x41e4ed(0x3b3)](this[_0x41e4ed(0x799)]['wuid']);if(!_0x6e414)throw new Error(_0x41e4ed(0x2e9));let _0x7f53bd={'_id':_0x6e414[_0x41e4ed(0x68d)],'flowConfig':{'enabled':_0x125eba[_0x41e4ed(0x167)]??_0x6e414[_0x41e4ed(0x22d)][_0x41e4ed(0x167)],'ignoreGroups':_0x125eba[_0x41e4ed(0x29d)]??_0x6e414[_0x41e4ed(0x22d)][_0x41e4ed(0x29d)],'stopConversation':_0x125eba[_0x41e4ed(0x409)][_0x41e4ed(0x1e6)]()??_0x6e414[_0x41e4ed(0x22d)]['stopConversation']['trim'](),'stopMinutes':_0x125eba[_0x41e4ed(0x6ae)]??_0x6e414['flowConfig'][_0x41e4ed(0x6ae)],'stopWhenYouSendMsg':_0x125eba[_0x41e4ed(0x4ff)]??_0x6e414[_0x41e4ed(0x22d)][_0x41e4ed(0x4ff)]}},_0x3cbae5=await this[_0x41e4ed(0x7be)]['automateSystem'][_0x41e4ed(0x6c1)](_0x7f53bd,this[_0x41e4ed(0x799)][_0x41e4ed(0x3cb)]);return this['AutomateSystem']=_0x3cbae5,this[_0x41e4ed(0x112)][_0x41e4ed(0x72d)](this[_0x41e4ed(0x78b)]+'\x20('+this['instance'][_0x41e4ed(0x3cb)]+'):\x20alterando\x20this.AutomateSystem'),this[_0x41e4ed(0x112)][_0x41e4ed(0x72d)](this[_0x41e4ed(0x78b)]+'\x20('+this['instance'][_0x41e4ed(0x3cb)]+'):\x20'+this['AutomateSystem']),setTimeout(()=>this[_0x41e4ed(0x4a9)](),0x7d0),_0x3cbae5;}catch(_0x1f05b0){let _0x18f554=_0x41e4ed(0x5b8),_0x18c5e7=_0x1f05b0 instanceof Error?_0x1f05b0[_0x41e4ed(0x499)]:typeof _0x1f05b0==_0x41e4ed(0x5a0)?JSON[_0x41e4ed(0x1bb)](_0x1f05b0):_0x1f05b0,_0x31e44a=_0x18f554+':\x20'+_0x18c5e7;throw this['logger'][_0x41e4ed(0x4b3)](this[_0x41e4ed(0x78b)]+'\x20('+this['instance'][_0x41e4ed(0x3cb)]+_0x41e4ed(0x433)+_0x31e44a),new m(_0x31e44a);}}async[a0_0x3f352e(0x444)](){const _0x4ccbd7=a0_0x3f352e;try{let _0x57faa1=await this[_0x4ccbd7(0x7be)][_0x4ccbd7(0x2d3)]['findOrCreate'](this[_0x4ccbd7(0x799)]['wuid']);return this[_0x4ccbd7(0x2f7)]=_0x57faa1,_0x57faa1;}catch(_0x33694e){let _0x37e49a=_0x4ccbd7(0x3f6),_0xac6f19=_0x33694e instanceof Error?_0x33694e[_0x4ccbd7(0x499)]:typeof _0x33694e==_0x4ccbd7(0x5a0)?JSON['stringify'](_0x33694e):_0x33694e,_0x5005a1=_0x37e49a+':\x20'+_0xac6f19;throw this[_0x4ccbd7(0x112)][_0x4ccbd7(0x4b3)](this['instanceName']+'\x20('+this[_0x4ccbd7(0x799)][_0x4ccbd7(0x3cb)]+'):\x20'+_0x5005a1),new m(_0x5005a1);}}async[a0_0x3f352e(0x174)](){const _0x227013=a0_0x3f352e;let _0xe695ec=(await import('p-queue'))[_0x227013(0x164)];this[_0x227013(0xba)]=new _0xe695ec({'concurrency':0x1});}async['setRestartTimeout'](){const _0x38128e=a0_0x3f352e;this[_0x38128e(0x799)][_0x38128e(0x2fa)][_0x38128e(0x373)]&&clearTimeout(this[_0x38128e(0x799)][_0x38128e(0x2fa)][_0x38128e(0x373)]),this[_0x38128e(0x799)][_0x38128e(0x2fa)]['timeout']=setTimeout(()=>{const _0x3be888=_0x38128e;this[_0x3be888(0x7ce)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x3f352e(0x7ce)](){const _0x20287e=a0_0x3f352e;let _0x4edc15=this[_0x20287e(0x799)][_0x20287e(0x2fa)][_0x20287e(0x5aa)];(_0x4edc15===0x0||_0x4edc15===null||Date[_0x20287e(0x196)]()-_0x4edc15>=0x1d4c0)&&(this[_0x20287e(0x112)][_0x20287e(0x72d)](this[_0x20287e(0x78b)]+'\x20('+this['instance'][_0x20287e(0x3cb)]+'):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.'),this[_0x20287e(0x799)][_0x20287e(0x2fa)]['processingGroup']=null,this[_0x20287e(0x799)][_0x20287e(0x2fa)][_0x20287e(0x5aa)]=0x0,this[_0x20287e(0x799)]['ScheduleMessage'][_0x20287e(0x42f)]=0x0,await this[_0x20287e(0x4a9)]());}async[a0_0x3f352e(0x4a9)](){const _0x1b6075=a0_0x3f352e;this['logger'][_0x1b6075(0x76b)](this['instanceName']+'\x20('+this[_0x1b6075(0x799)][_0x1b6075(0x3cb)]+_0x1b6075(0x19b)),await this[_0x1b6075(0x602)](),(await this[_0x1b6075(0x412)]())[_0x1b6075(0x45c)]>0x0&&this['queue'][_0x1b6075(0x41a)](()=>this[_0x1b6075(0x40a)]());let _0x34faa5={'where':{'status':_0x1b6075(0x365),'when':{'$gt':Date[_0x1b6075(0x196)]()}}},_0x1abb34=await this[_0x1b6075(0x7be)][_0x1b6075(0x1c0)][_0x1b6075(0x312)](_0x34faa5,this[_0x1b6075(0x799)]['wuid']);_0x1abb34&&_0x1abb34[_0x1b6075(0x276)]-Date[_0x1b6075(0x196)]()<=0x6ddd00?this[_0x1b6075(0x799)][_0x1b6075(0x2fa)][_0x1b6075(0x42f)]=_0x1abb34['when']-Date['now']():this[_0x1b6075(0x799)][_0x1b6075(0x2fa)][_0x1b6075(0x42f)]=(0x3c+Math['floor'](Math['random']()*0x3c))*0x3c*0x3e8,this[_0x1b6075(0x799)][_0x1b6075(0x2fa)][_0x1b6075(0x42f)]=Math[_0x1b6075(0x33c)](this['instance'][_0x1b6075(0x2fa)][_0x1b6075(0x42f)],0x1*0x2*0x3e8);let _0x77dc40=Math[_0x1b6075(0x194)](this[_0x1b6075(0x799)][_0x1b6075(0x2fa)][_0x1b6075(0x42f)]/0xea60);if(_0x1abb34){let _0x5a8455=new Date(_0x1abb34[_0x1b6075(0x276)])['toLocaleString']();this['logger'][_0x1b6075(0x76b)](this['instanceName']+'\x20('+this[_0x1b6075(0x799)][_0x1b6075(0x3cb)]+'):\x20Encontrado\x20próxima\x20mensagem\x20para\x20'+_0x5a8455+_0x1b6075(0x33e)+_0x77dc40+_0x1b6075(0xb1));}else this[_0x1b6075(0x112)]['warn'](this[_0x1b6075(0x78b)]+'\x20('+this[_0x1b6075(0x799)][_0x1b6075(0x3cb)]+_0x1b6075(0x59f)+_0x77dc40+_0x1b6075(0xb1));setTimeout(()=>{const _0x63c2f8=_0x1b6075;this[_0x63c2f8(0x4a9)]();},this[_0x1b6075(0x799)][_0x1b6075(0x2fa)][_0x1b6075(0x42f)]);}async[a0_0x3f352e(0x412)](){const _0x30166f=a0_0x3f352e;this[_0x30166f(0x112)][_0x30166f(0x76b)](this[_0x30166f(0x78b)]+'\x20('+this[_0x30166f(0x799)][_0x30166f(0x3cb)]+_0x30166f(0x19b));let _0x495c27=Date[_0x30166f(0x196)]()-0xc*0x3c*0x3c*0x3e8,_0x584391={'where':{'status':{'$in':[_0x30166f(0x365),_0x30166f(0x7ab)]},'$or':[{'when':{'$lte':Date[_0x30166f(0x196)](),'$gte':_0x495c27}},{'when':0x0}]}},_0x55469c=await this[_0x30166f(0x7be)][_0x30166f(0x1c0)][_0x30166f(0x71f)](_0x584391,this[_0x30166f(0x799)]['wuid']);return this[_0x30166f(0x112)][_0x30166f(0x76b)](this[_0x30166f(0x78b)]+'\x20('+this[_0x30166f(0x799)]['wuid']+'):\x20Mensagens\x20prontas\x20para\x20envio\x20encontradas:\x20'+_0x55469c[_0x30166f(0x45c)]),_0x55469c;}async[a0_0x3f352e(0x40a)](){const _0x154d2d=a0_0x3f352e;let _0x53beb0=Math[_0x154d2d(0x62b)](Math[_0x154d2d(0x52f)]()*0x1389)+0xbb8,_0x5dba24=()=>this['pendingMessages'][_0x154d2d(0x45c)]===0x0?null:this[_0x154d2d(0x259)][_0x154d2d(0x32f)]((_0xc57b4c,_0x4fb185)=>(_0xc57b4c[_0x154d2d(0x6ab)]??Number[_0x154d2d(0x788)])<(_0x4fb185['order']??Number[_0x154d2d(0x788)])?_0xc57b4c:_0x4fb185,this['pendingMessages'][0x0]),_0x233bec=await this[_0x154d2d(0x412)]();for(let _0xaba80b of _0x233bec){this[_0x154d2d(0x259)]=_0xaba80b['messages'][_0x154d2d(0x495)](_0x4a8007=>!_0x4a8007[_0x154d2d(0x3da)]);let _0x41e3d1=0x3*0x3e8,_0x41796e={'_id':_0xaba80b[_0x154d2d(0x68d)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x154d2d(0x196)]()-_0x41e3d1}}]},_0x66c392={'startSend':Date[_0x154d2d(0x196)](),'status':_0x154d2d(0x7ab)};if(!await this['repository'][_0x154d2d(0x1c0)][_0x154d2d(0x372)](_0x41796e,_0x66c392,this[_0x154d2d(0x799)][_0x154d2d(0x3cb)]))continue;if(!this[_0x154d2d(0x799)]['ScheduleMessage']['isConnected']){this[_0x154d2d(0x112)][_0x154d2d(0x76b)](this['instanceName']+'\x20('+this[_0x154d2d(0x799)][_0x154d2d(0x3cb)]+_0x154d2d(0x648));break;}for(;this['pendingMessages']['length']>0x0;){await this['setRestartTimeout']();let _0x2dfdb3=_0x5dba24();if(!_0x2dfdb3)break;let _0x266c16=_0xaba80b[_0x154d2d(0x1a8)][_0x154d2d(0x71f)](_0x17626a=>_0x17626a[_0x154d2d(0x68d)]===_0x2dfdb3[_0x154d2d(0x68d)]);if(!_0x266c16)break;if(this[_0x154d2d(0x799)][_0x154d2d(0x2fa)][_0x154d2d(0x5aa)]=Date[_0x154d2d(0x196)](),_0x266c16['triedToSend']){this[_0x154d2d(0x112)]['warn'](this[_0x154d2d(0x78b)]+'\x20('+this[_0x154d2d(0x799)][_0x154d2d(0x3cb)]+_0x154d2d(0x319)+_0x266c16[_0x154d2d(0x183)]+_0x154d2d(0x38d)),this[_0x154d2d(0x259)]=this[_0x154d2d(0x259)]['filter'](_0x518e60=>_0x518e60[_0x154d2d(0x68d)]!==_0x266c16['_id']);continue;}if(!this[_0x154d2d(0x799)][_0x154d2d(0x2fa)][_0x154d2d(0x73f)]){this[_0x154d2d(0x112)][_0x154d2d(0x76b)](this[_0x154d2d(0x78b)]+'\x20('+this['instance']['wuid']+_0x154d2d(0x688));break;}if(!this['instance'][_0x154d2d(0x2fa)][_0x154d2d(0x4e0)]){this[_0x154d2d(0x112)][_0x154d2d(0x76b)](this['instanceName']+'\x20('+this[_0x154d2d(0x799)][_0x154d2d(0x3cb)]+_0x154d2d(0x234)+_0xaba80b[_0x154d2d(0x68d)]+_0x154d2d(0x722));break;}let _0x410a80={'idControl':_0x266c16[_0x154d2d(0x68d)],'remoteJid':_0x266c16[_0x154d2d(0x183)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date['now']()},_0x5dffec=null;try{this['logger'][_0x154d2d(0x76b)](this[_0x154d2d(0x78b)]+'\x20('+this['instance']['wuid']+_0x154d2d(0x733)+_0x266c16[_0x154d2d(0x183)]);let _0x2f8c13=await this[_0x154d2d(0x340)](_0x266c16[_0x154d2d(0x183)],_0x266c16);_0x410a80[_0x154d2d(0x4b3)]=_0x2f8c13[_0x154d2d(0x4b3)],_0x410a80['id']=_0x2f8c13['error']?null:_0x2f8c13['id'],_0x410a80['error_log']=_0x2f8c13[_0x154d2d(0x4b3)]?_0x2f8c13['detail']?_0x2f8c13[_0x154d2d(0x765)][_0x154d2d(0x123)]():'':null;let _0x543547=_0xaba80b['messages'][_0x154d2d(0x4b6)](_0x262b00=>_0x262b00['_id']===_0x266c16[_0x154d2d(0x68d)]);_0x543547!==-0x1&&(_0xaba80b[_0x154d2d(0x1a8)][_0x543547][_0x154d2d(0x3da)]=!0x0);let _0x317a50={'$push':{'messagesSend':_0x410a80},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x3af538=[{'elem._id':_0x266c16['_id']}];if(this[_0x154d2d(0x112)][_0x154d2d(0x76b)](this['instanceName']+'\x20('+this[_0x154d2d(0x799)]['wuid']+_0x154d2d(0x4c3)+_0x266c16[_0x154d2d(0x68d)]),_0x5dffec=await this[_0x154d2d(0x7be)][_0x154d2d(0x1c0)][_0x154d2d(0x372)]({'_id':_0xaba80b[_0x154d2d(0x68d)]},_0x317a50,this[_0x154d2d(0x799)][_0x154d2d(0x3cb)],{'arrayFilters':_0x3af538}),_0x2f8c13[_0x154d2d(0x4b3)]){this[_0x154d2d(0x112)][_0x154d2d(0x4b3)](this[_0x154d2d(0x78b)]+'\x20('+this['instance'][_0x154d2d(0x3cb)]+_0x154d2d(0x6dd)+_0x2f8c13['detail']);continue;}let _0x2f8efc=this[_0x154d2d(0xf5)](_0xaba80b['delaySecMin'],_0xaba80b[_0x154d2d(0x1e9)]);await this[_0x154d2d(0x43e)](_0x2f8efc);}catch(_0x4e9fc4){this[_0x154d2d(0x112)][_0x154d2d(0x4b3)](this[_0x154d2d(0x78b)]+'\x20('+this[_0x154d2d(0x799)][_0x154d2d(0x3cb)]+_0x154d2d(0x27d)+_0x266c16['remoteJid']+':\x20'+(_0x4e9fc4 instanceof Error?_0x4e9fc4[_0x154d2d(0x499)]:JSON[_0x154d2d(0x1bb)](_0x4e9fc4,null,0x2))),_0x410a80['error']=!0x0,_0x410a80[_0x154d2d(0x74d)]=_0x4e9fc4[_0x154d2d(0x499)];let _0x66496f=_0xaba80b['messages'][_0x154d2d(0x4b6)](_0x170a4d=>_0x170a4d[_0x154d2d(0x68d)]===_0x266c16[_0x154d2d(0x68d)]);_0x66496f!==-0x1&&(_0xaba80b[_0x154d2d(0x1a8)][_0x66496f][_0x154d2d(0x3da)]=!0x0);let _0x4cf8f6={'$push':{'messagesSend':_0x410a80},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x36e374=[{'elem._id':_0x266c16[_0x154d2d(0x68d)]}];this[_0x154d2d(0x112)][_0x154d2d(0x76b)](this['instanceName']+'\x20('+this['instance'][_0x154d2d(0x3cb)]+'):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20'+_0x266c16[_0x154d2d(0x68d)]),_0x5dffec=await this[_0x154d2d(0x7be)][_0x154d2d(0x1c0)]['updateOne']({'_id':_0xaba80b[_0x154d2d(0x68d)]},_0x4cf8f6,this[_0x154d2d(0x799)][_0x154d2d(0x3cb)],{'arrayFilters':_0x36e374});}finally{if(_0x5dffec&&_0x5dffec[_0x154d2d(0x62a)]===_0x154d2d(0x6b9)){this[_0x154d2d(0x112)][_0x154d2d(0x76b)](this[_0x154d2d(0x78b)]+'\x20('+this['instance'][_0x154d2d(0x3cb)]+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0x266c16[_0x154d2d(0x68d)]+'\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.');break;}let _0x550850=_0x5dffec[_0x154d2d(0x1a8)]['find'](_0x1e0a3d=>_0x1e0a3d[_0x154d2d(0x68d)]===_0x266c16[_0x154d2d(0x68d)]);if(_0x550850&&!_0x550850[_0x154d2d(0x3da)]){let _0x2e0c54={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x966193=[{'elem._id':_0x266c16[_0x154d2d(0x68d)]}];await this[_0x154d2d(0x7be)][_0x154d2d(0x1c0)][_0x154d2d(0x372)]({'_id':_0x5dffec[_0x154d2d(0x68d)]},_0x2e0c54,this[_0x154d2d(0x799)]['wuid'],{'arrayFilters':_0x966193});}this[_0x154d2d(0x259)]=_0x5dffec[_0x154d2d(0x1a8)][_0x154d2d(0x495)](_0x8ce52a=>!_0x8ce52a[_0x154d2d(0x3da)]),this['instance'][_0x154d2d(0x2fa)]['processingGroup']=_0x5dffec;}}this['pendingMessages']=[];let _0x19971c=await this[_0x154d2d(0x7be)][_0x154d2d(0x1c0)]['findById'](_0xaba80b[_0x154d2d(0x68d)],this[_0x154d2d(0x799)][_0x154d2d(0x3cb)]);if(_0x19971c[_0x154d2d(0x1a8)][_0x154d2d(0x56c)](_0x32fcea=>_0x32fcea['triedToSend'])&&_0x19971c[_0x154d2d(0x62a)]!=='stopped'){let _0x9f9d2b={'$set':{'status':_0x154d2d(0x635)}};await this['repository'][_0x154d2d(0x1c0)][_0x154d2d(0x31d)](_0x19971c[_0x154d2d(0x68d)],_0x9f9d2b,this[_0x154d2d(0x799)][_0x154d2d(0x3cb)]);}await new Promise(_0x4e535f=>setTimeout(_0x4e535f,_0x53beb0)),global['gc']?global['gc']():console[_0x154d2d(0x76b)](_0x154d2d(0xf2));}}[a0_0x3f352e(0xf5)](_0x40d190,_0x5dfc8e){const _0x1378f1=a0_0x3f352e;return _0x40d190=Math[_0x1378f1(0x33c)](0.5,_0x40d190),_0x5dfc8e=Math[_0x1378f1(0x51f)](Math['max'](0x3,_0x5dfc8e),0x78),Math[_0x1378f1(0x62b)](Math[_0x1378f1(0x52f)]()*(_0x5dfc8e-_0x40d190+0x1)+_0x40d190)*0x3e8;}[a0_0x3f352e(0x43e)](_0x5e53cf){return new Promise(_0x485a1e=>setTimeout(_0x485a1e,_0x5e53cf));}async[a0_0x3f352e(0x74f)](_0x5ee78d){const _0x51592f=a0_0x3f352e;if(!this[_0x51592f(0x2f7)]&&(await this[_0x51592f(0x444)](),!this[_0x51592f(0x2f7)]))return null;_0x5ee78d=this['createJid'](_0x5ee78d);let _0x5b0ddc=await this['repository'][_0x51592f(0x629)][_0x51592f(0x312)]({'where':{'_id':_0x5ee78d}},this[_0x51592f(0x799)][_0x51592f(0x3cb)]),_0x5925f9={};if(_0x5b0ddc&&_0x5b0ddc['leadInfo']){let _0x5c7a1c=_0x5b0ddc['leadInfo'];typeof _0x5c7a1c[_0x51592f(0x544)]==_0x51592f(0x6e4)&&(_0x5925f9[_0x51592f(0x544)]=_0x5c7a1c[_0x51592f(0x544)]),typeof _0x5c7a1c[_0x51592f(0x39c)]==_0x51592f(0x6e4)&&(_0x5925f9[_0x51592f(0x39c)]=_0x5c7a1c[_0x51592f(0x39c)]),typeof _0x5c7a1c['email']=='string'&&(_0x5925f9[_0x51592f(0x555)]=_0x5c7a1c['email']),typeof _0x5c7a1c[_0x51592f(0x744)]==_0x51592f(0x6e4)&&(_0x5925f9[_0x51592f(0x744)]=_0x5c7a1c[_0x51592f(0x744)]),typeof _0x5c7a1c['status']==_0x51592f(0x6e4)&&(_0x5925f9['status']=_0x5c7a1c[_0x51592f(0x62a)]),typeof _0x5c7a1c['notas']==_0x51592f(0x6e4)&&(_0x5925f9[_0x51592f(0x21c)]=_0x5c7a1c[_0x51592f(0x21c)]),typeof _0x5c7a1c[_0x51592f(0x69d)]=='string'&&(_0x5925f9[_0x51592f(0x69d)]=_0x5c7a1c[_0x51592f(0x69d)]),Array['isArray'](_0x5c7a1c[_0x51592f(0x3e3)])&&(_0x5925f9[_0x51592f(0x3e3)]=_0x5c7a1c[_0x51592f(0x3e3)]['join'](',\x20')),Array[_0x51592f(0xae)](_0x5c7a1c[_0x51592f(0x612)])&&(_0x5925f9['etiquetas']=_0x5c7a1c[_0x51592f(0x612)][_0x51592f(0x348)](',\x20'));}return _0x5b0ddc&&_0x5b0ddc[_0x51592f(0x704)]&&_0x5b0ddc[_0x51592f(0x704)]['customFields']&&_0x5b0ddc[_0x51592f(0x704)][_0x51592f(0x6e8)][_0x51592f(0x62c)](_0x41bfec=>{const _0x4ca48e=_0x51592f;let _0x2fa296=this[_0x4ca48e(0x2f7)]?.[_0x4ca48e(0x6e8)][_0x4ca48e(0x71f)](_0x152d9c=>_0x152d9c[_0x4ca48e(0x68d)]===_0x41bfec[_0x4ca48e(0x68d)]);_0x2fa296&&(_0x5925f9[_0x2fa296[_0x4ca48e(0x5f4)]]=_0x41bfec[_0x4ca48e(0x242)]);}),_0x5925f9;}async[a0_0x3f352e(0x3c1)](_0x119c16,_0x5c9ed2){const _0x28ca71=a0_0x3f352e;try{let _0x134e58=await this[_0x28ca71(0x74f)](_0x5c9ed2);return this[_0x28ca71(0x543)](_0x119c16,_0x134e58);}catch(_0x530840){return this[_0x28ca71(0x112)][_0x28ca71(0x4b3)](_0x28ca71(0xce)+_0x5c9ed2+':\x20'+_0x530840),_0x119c16;}}async['transformScheduledMessagesByType'](){const _0xb5be0f=a0_0x3f352e;let _0x1b4737=async(_0x2aa7c5,_0x2915e3)=>{const _0x46ce4e=a0_0x1206;let _0x32a220=(await this[_0x46ce4e(0x7be)][_0x46ce4e(0x1c0)][_0x46ce4e(0x71f)]({'where':{'type':_0x2aa7c5}},this[_0x46ce4e(0x799)][_0x46ce4e(0x3cb)]))[_0x46ce4e(0xff)](async _0x2a437e=>{const _0x1e141d=_0x46ce4e;let _0x3b6a78=_0x2915e3(_0x2a437e),_0x51b657=_0xa0989d=>/^\d+$/['test'](_0xa0989d),_0x4c0f43=_0x2a437e[_0x1e141d(0x402)][_0x1e141d(0x495)](_0x1675e8=>_0x1675e8[_0x1e141d(0x3ff)]('@s.whatsapp.net')?_0x1675e8['length']>0x19:_0x1675e8[_0x1e141d(0x3ff)]('@g.us')?_0x1675e8['length']>0xf:_0x51b657(_0x1675e8)?_0x1675e8[_0x1e141d(0x45c)]>=0xb:!0x1)[_0x1e141d(0xff)](_0x3e0578=>({'_id':(0x0,X['v4'])(),'idSchedule':_0x2a437e[_0x1e141d(0x68d)],'type':_0x3b6a78,'remoteJid':_0x3e0578,'flow':_0x2a437e[_0x1e141d(0x35f)],'text':_0x2a437e[_0x1e141d(0x499)]?.['text'],'delay':_0x2a437e[_0x1e141d(0x499)]?.[_0x1e141d(0x6a3)],'urlOrBase64':_0x2a437e[_0x1e141d(0x499)]?.[_0x1e141d(0x4aa)],'linkPreview':_0x2a437e[_0x1e141d(0x499)]?.[_0x1e141d(0x47b)],'fileName':_0x2a437e['message']?.[_0x1e141d(0x241)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x1e141d(0x7be)][_0x1e141d(0x1c0)]['updateOneById'](_0x2a437e['_id'],{'$set':{'messages':_0x4c0f43},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this['instance'][_0x1e141d(0x3cb)]);}catch(_0x165841){console[_0x1e141d(0x4b3)]('Erro\x20ao\x20atualizar\x20agendamento\x20'+_0x2a437e[_0x1e141d(0x68d)]+':',_0x165841);}});await Promise['all'](_0x32a220);};await _0x1b4737(_0xb5be0f(0x21b),_0x47414d=>_0xb5be0f(0x21b)),await _0x1b4737(_0xb5be0f(0x207),_0x3446eb=>_0x3446eb[_0xb5be0f(0x499)]?.[_0xb5be0f(0x220)]||_0xb5be0f(0x207)),await _0x1b4737(_0xb5be0f(0x185),_0x323f24=>_0xb5be0f(0x185)),await _0x1b4737(_0xb5be0f(0x2b2),_0xfd6135=>_0xb5be0f(0x2b2)),await _0x1b4737('image',_0x1da80b=>'image'),await _0x1b4737('video',_0x119aaa=>_0xb5be0f(0x69a)),await _0x1b4737('document',_0x24aeec=>'document'),this[_0xb5be0f(0x112)]['warn'](this[_0xb5be0f(0x78b)]+'\x20('+this[_0xb5be0f(0x799)][_0xb5be0f(0x3cb)]+_0xb5be0f(0x68f));}async[a0_0x3f352e(0x36c)](_0x1b083a){const _0xb212a5=a0_0x3f352e;try{if(this[_0xb212a5(0x112)][_0xb212a5(0x76b)](this[_0xb212a5(0x78b)]+'\x20('+this[_0xb212a5(0x799)][_0xb212a5(0x3cb)]+'):\x20Editando/criando\x20grupo\x20de\x20mensagens...'),_0x1b083a[_0xb212a5(0x68d)]||(_0x1b083a[_0xb212a5(0x68d)]=(0x0,X['v4'])()),this[_0xb212a5(0x799)][_0xb212a5(0x2fa)][_0xb212a5(0x4e0)]?.[_0xb212a5(0x68d)]===_0x1b083a[_0xb212a5(0x68d)]?.[_0xb212a5(0x123)]()){if(_0x1b083a[_0xb212a5(0x62a)]==='stopped')this['instance']['ScheduleMessage'][_0xb212a5(0x4e0)]=null;else throw new Error(_0xb212a5(0x18c));}if(_0x1b083a[_0xb212a5(0x49b)]&&_0x1b083a[_0xb212a5(0x68d)]){let _0x66b17c=await this['repository'][_0xb212a5(0x1c0)][_0xb212a5(0xe9)](_0x1b083a[_0xb212a5(0x68d)],this[_0xb212a5(0x799)]['wuid']);return setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x66b17c;}let _0x48cce7=null;if(_0x1b083a[_0xb212a5(0x68d)]&&(_0x48cce7=await this['repository'][_0xb212a5(0x1c0)][_0xb212a5(0x69b)](_0x1b083a[_0xb212a5(0x68d)],this[_0xb212a5(0x799)]['wuid'])),_0x48cce7){let {_id:_0x53d3c0,owner:_0x2ebb90,messages:_0x3c4473,..._0x76abc6}=_0x1b083a;if(_0x3c4473){let _0x380489=_0x3c4473[_0xb212a5(0x495)](_0x380146=>!_0x380146['_id']),_0x216a69=_0x3c4473[_0xb212a5(0x495)](_0x5f3426=>_0x5f3426[_0xb212a5(0x68d)]&&!_0x5f3426[_0xb212a5(0x49b)]),_0x4ed116=_0x3c4473[_0xb212a5(0x495)](_0x4411f0=>_0x4411f0['_id']&&_0x4411f0[_0xb212a5(0x49b)]);if(_0x380489['length']>0x0&&await this[_0xb212a5(0x1e2)](_0x1b083a[_0xb212a5(0x68d)],_0x380489),_0x216a69['length']>0x0&&await this[_0xb212a5(0x114)]({'_id':_0x1b083a[_0xb212a5(0x68d)],'messages':_0x216a69}),_0x4ed116['length']>0x0){let _0xb9f01a=_0x4ed116[_0xb212a5(0xff)](_0x449c14=>({'updateOne':{'filter':{'_id':_0x1b083a[_0xb212a5(0x68d)]},'update':{'$pull':{'messages':{'_id':_0x449c14[_0xb212a5(0x68d)]}}}}}));await this[_0xb212a5(0x7be)]['scheduleMessage'][_0xb212a5(0x48e)](_0xb9f01a,this[_0xb212a5(0x799)][_0xb212a5(0x3cb)]);}}let _0x38a899={'$set':{..._0x76abc6,'status':_0x1b083a['status']||_0x48cce7[_0xb212a5(0x62a)]}},_0x30b4a8=await this[_0xb212a5(0x7be)][_0xb212a5(0x1c0)]['updateOneById'](_0x1b083a[_0xb212a5(0x68d)],_0x38a899,this[_0xb212a5(0x799)]['wuid']);return _0x30b4a8&&(this['reorderMessages'](_0x30b4a8['messages']),await this[_0xb212a5(0x7be)][_0xb212a5(0x1c0)]['updateOneById'](_0x30b4a8[_0xb212a5(0x68d)],{'$set':{'messages':_0x30b4a8['messages']}},this[_0xb212a5(0x799)][_0xb212a5(0x3cb)])),setTimeout(()=>this[_0xb212a5(0x4a9)](),0x7d0),await this[_0xb212a5(0x602)](),_0x30b4a8;}else{_0x1b083a[_0xb212a5(0x19a)]=this[_0xb212a5(0x799)][_0xb212a5(0x3cb)],_0x1b083a[_0xb212a5(0x1a8)]&&_0x1b083a[_0xb212a5(0x1a8)]['forEach'](_0x4f4323=>{const _0xf75bf4=_0xb212a5;_0x4f4323[_0xf75bf4(0x68d)]||(_0x4f4323['_id']=(0x0,X['v4'])()),_0x4f4323[_0xf75bf4(0x42c)]||(_0x4f4323['idSchedule']=_0x1b083a[_0xf75bf4(0x68d)]),delete _0x4f4323[_0xf75bf4(0x3da)];});let _0x416b84=await this['repository']['scheduleMessage'][_0xb212a5(0x3e9)](_0x1b083a,this[_0xb212a5(0x799)][_0xb212a5(0x3cb)]);return _0x416b84&&(this[_0xb212a5(0x6c5)](_0x416b84[_0xb212a5(0x1a8)]),await this[_0xb212a5(0x7be)]['scheduleMessage'][_0xb212a5(0x31d)](_0x416b84[_0xb212a5(0x68d)],{'$set':{'messages':_0x416b84[_0xb212a5(0x1a8)]}},this[_0xb212a5(0x799)]['wuid'])),setTimeout(()=>this[_0xb212a5(0x4a9)](),0x7d0),_0x416b84;}}catch(_0x3e6597){let _0x38eec8=_0xb212a5(0x295),_0x527175=_0x3e6597 instanceof Error?_0x3e6597[_0xb212a5(0x499)]:typeof _0x3e6597==_0xb212a5(0x5a0)?JSON['stringify'](_0x3e6597):_0x3e6597,_0x518d5e=_0x38eec8+':\x20'+_0x527175;throw this[_0xb212a5(0x112)][_0xb212a5(0x4b3)](this[_0xb212a5(0x78b)]+'\x20('+this[_0xb212a5(0x799)][_0xb212a5(0x3cb)]+_0xb212a5(0x433)+_0x518d5e),new m(_0x518d5e);}}async[a0_0x3f352e(0x1e2)](_0x224ed7,_0x40d2e5){const _0x13819f=a0_0x3f352e;try{this[_0x13819f(0x112)][_0x13819f(0x72d)](this['instanceName']+'\x20('+this['instance'][_0x13819f(0x3cb)]+_0x13819f(0x2cb)),_0x40d2e5[_0x13819f(0x62c)](_0x4321a=>{const _0x29fa6f=_0x13819f;_0x4321a[_0x29fa6f(0x68d)]||(_0x4321a[_0x29fa6f(0x68d)]=(0x0,X['v4'])()),_0x4321a[_0x29fa6f(0x42c)]||(_0x4321a[_0x29fa6f(0x42c)]=_0x224ed7),delete _0x4321a[_0x29fa6f(0x3da)];});let _0x16be1d={'$push':{'messages':{'$each':_0x40d2e5}}},_0x51ab1f=await this[_0x13819f(0x7be)]['scheduleMessage']['updateOneById'](_0x224ed7,_0x16be1d,this['instance']['wuid']);return _0x51ab1f&&(this[_0x13819f(0x6c5)](_0x51ab1f['messages']),await this[_0x13819f(0x7be)]['scheduleMessage'][_0x13819f(0x31d)](_0x51ab1f[_0x13819f(0x68d)],{'$set':{'messages':_0x51ab1f[_0x13819f(0x1a8)]}},this['instance']['wuid'])),_0x51ab1f;}catch(_0xab1d5f){let _0x37f40d=_0x13819f(0x148),_0x4c263d=_0xab1d5f instanceof Error?_0xab1d5f[_0x13819f(0x499)]:typeof _0xab1d5f==_0x13819f(0x5a0)?JSON['stringify'](_0xab1d5f):_0xab1d5f,_0x545f1d=_0x37f40d+':\x20'+_0x4c263d;throw this[_0x13819f(0x112)][_0x13819f(0x4b3)](this['instanceName']+'\x20('+this['instance'][_0x13819f(0x3cb)]+_0x13819f(0x433)+_0x545f1d),new m(_0x545f1d);}}async['editMessagesInGroup'](_0x5a4d38){const _0x18ace7=a0_0x3f352e;try{if(this[_0x18ace7(0x112)][_0x18ace7(0x72d)](this[_0x18ace7(0x78b)]+'\x20('+this[_0x18ace7(0x799)][_0x18ace7(0x3cb)]+_0x18ace7(0x1c9)),!_0x5a4d38[_0x18ace7(0x68d)]||!_0x5a4d38[_0x18ace7(0x1a8)])throw new Error(_0x18ace7(0x60c));let _0x3d36c8=_0x5a4d38[_0x18ace7(0x68d)],_0x122d6f=_0x5a4d38[_0x18ace7(0x1a8)],_0x5486d0=_0x122d6f['filter'](_0x88e3d4=>!_0x88e3d4[_0x18ace7(0x49b)])[_0x18ace7(0xff)](_0x2537f7=>{const _0x56c57f=_0x18ace7;let _0x35ba4e=_0x2537f7['_id'];if(!_0x35ba4e)throw new Error(_0x56c57f(0x293));return _0x2537f7[_0x56c57f(0x42c)]||(_0x2537f7[_0x56c57f(0x42c)]=_0x3d36c8),delete _0x2537f7[_0x56c57f(0x3da)],{'updateOne':{'filter':{'_id':_0x3d36c8,'messages._id':_0x35ba4e},'update':{'$set':{'messages.$[elem]':_0x2537f7}},'arrayFilters':[{'elem._id':_0x35ba4e}]}};}),_0x4cc9c7=_0x122d6f[_0x18ace7(0x495)](_0x3b13e4=>_0x3b13e4[_0x18ace7(0x49b)])[_0x18ace7(0xff)](_0x3f270e=>{const _0x3186eb=_0x18ace7;let _0x1965d6=_0x3f270e[_0x3186eb(0x68d)];if(!_0x1965d6)throw new Error(_0x3186eb(0x784));return{'updateOne':{'filter':{'_id':_0x3d36c8},'update':{'$pull':{'messages':{'_id':_0x1965d6}}}}};}),_0x25a866=[..._0x5486d0,..._0x4cc9c7],_0x3c15b4=await this[_0x18ace7(0x7be)][_0x18ace7(0x1c0)][_0x18ace7(0x48e)](_0x25a866,this[_0x18ace7(0x799)][_0x18ace7(0x3cb)]),_0xe47820=await this['repository'][_0x18ace7(0x1c0)][_0x18ace7(0x69b)](_0x3d36c8,this['instance']['wuid']);return _0xe47820&&(this[_0x18ace7(0x6c5)](_0xe47820[_0x18ace7(0x1a8)]),await this['repository'][_0x18ace7(0x1c0)][_0x18ace7(0x31d)](_0xe47820[_0x18ace7(0x68d)],{'$set':{'messages':_0xe47820['messages']}},this['instance']['wuid'])),_0xe47820;}catch(_0x28ebff){let _0x46e19c=_0x18ace7(0x638),_0x15a7a0=_0x28ebff instanceof Error?_0x28ebff[_0x18ace7(0x499)]:typeof _0x28ebff=='object'?JSON[_0x18ace7(0x1bb)](_0x28ebff):_0x28ebff,_0x7d3f1a=_0x46e19c+':\x20'+_0x15a7a0;throw this[_0x18ace7(0x112)][_0x18ace7(0x4b3)](this[_0x18ace7(0x78b)]+'\x20('+this[_0x18ace7(0x799)][_0x18ace7(0x3cb)]+'):\x20'+_0x7d3f1a),new m(_0x7d3f1a);}}async['deleteDoneMessages'](){const _0x4afaf5=a0_0x3f352e;try{let _0x236e94={'status':_0x4afaf5(0x635)},_0x19f966=await this[_0x4afaf5(0x7be)]['scheduleMessage']['deleteMany'](_0x236e94,this['instance'][_0x4afaf5(0x3cb)]);if(!_0x19f966['error'])this[_0x4afaf5(0x112)][_0x4afaf5(0x72d)](this[_0x4afaf5(0x78b)]+'\x20('+this[_0x4afaf5(0x799)][_0x4afaf5(0x3cb)]+_0x4afaf5(0x754));else throw new Error(_0x19f966[_0x4afaf5(0x4b3)][_0x4afaf5(0x499)]||_0x4afaf5(0x1ce));return this[_0x4afaf5(0x2c6)]();}catch(_0x261d99){let _0x3ad9bc=_0x4afaf5(0x624),_0x1be91f=_0x261d99 instanceof Error?_0x261d99[_0x4afaf5(0x499)]:typeof _0x261d99=='object'?JSON[_0x4afaf5(0x1bb)](_0x261d99):_0x261d99,_0xbc38cc=_0x3ad9bc+':\x20'+_0x1be91f;throw this['logger'][_0x4afaf5(0x4b3)](this[_0x4afaf5(0x78b)]+'\x20('+this[_0x4afaf5(0x799)][_0x4afaf5(0x3cb)]+_0x4afaf5(0x433)+_0xbc38cc),new m(_0xbc38cc);}}async[a0_0x3f352e(0x2c6)](){const _0x552d42=a0_0x3f352e;try{return await this[_0x552d42(0x7be)][_0x552d42(0x1c0)][_0x552d42(0x71f)]({'where':{}},this[_0x552d42(0x799)][_0x552d42(0x3cb)]);}catch(_0xdeeb0f){let _0x111774=_0x552d42(0x408),_0x4f589d=_0xdeeb0f instanceof Error?_0xdeeb0f['message']:typeof _0xdeeb0f==_0x552d42(0x5a0)?JSON['stringify'](_0xdeeb0f):_0xdeeb0f,_0x44fd70=_0x111774+':\x20'+_0x4f589d;throw this[_0x552d42(0x112)][_0x552d42(0x4b3)](this['instanceName']+'\x20('+this[_0x552d42(0x799)][_0x552d42(0x3cb)]+_0x552d42(0x433)+_0x44fd70),new m(_0x44fd70);}}['reorderMessages'](_0x5af807){const _0x1ba925=a0_0x3f352e;_0x5af807['sort']((_0x291342,_0x2b30ad)=>_0x291342[_0x1ba925(0x6ab)]-_0x2b30ad['order']),_0x5af807[_0x1ba925(0x62c)]((_0x476cd5,_0xa57e17)=>{const _0x5ea751=_0x1ba925;_0x476cd5[_0x5ea751(0x6ab)]=_0xa57e17+0x1;});}async['SendScheduleMessage'](_0x14ff73,_0x435761){const _0x4e30bd=a0_0x3f352e;try{if(!_0x435761)return this[_0x4e30bd(0x112)][_0x4e30bd(0x4b3)](this[_0x4e30bd(0x78b)]+'\x20('+this[_0x4e30bd(0x799)][_0x4e30bd(0x3cb)]+_0x4e30bd(0x571)),{'error':!0x0,'detail':_0x4e30bd(0x18a)};if(_0x435761[_0x4e30bd(0x6d7)]==='flow'&&!this[_0x4e30bd(0x2f7)]?.[_0x4e30bd(0x22d)]['enabled'])return this[_0x4e30bd(0x112)][_0x4e30bd(0x4b3)](this[_0x4e30bd(0x78b)]+'\x20('+this[_0x4e30bd(0x799)]['wuid']+_0x4e30bd(0x542)),{'error':!0x0,'detail':_0x4e30bd(0x4d8)};switch(_0x435761['type']){case _0x4e30bd(0x21b):return await this[_0x4e30bd(0x4d6)](_0x435761,_0x14ff73);case _0x4e30bd(0x69a):case _0x4e30bd(0x763):case _0x4e30bd(0x28d):return await this[_0x4e30bd(0x42a)](_0x435761,_0x14ff73);case _0x4e30bd(0x185):return await this[_0x4e30bd(0x53c)](_0x435761,_0x14ff73);case _0x4e30bd(0x2b2):let _0xff8521=new We();return _0xff8521[_0x4e30bd(0x5f4)]=_0x435761[_0x4e30bd(0x2b2)],_0xff8521[_0x4e30bd(0x183)]=_0x14ff73,await this[_0x4e30bd(0x32a)](_0xff8521);default:return this['logger'][_0x4e30bd(0x4b3)](this[_0x4e30bd(0x78b)]+'\x20('+this['instance'][_0x4e30bd(0x3cb)]+_0x4e30bd(0x56f)+_0x435761[_0x4e30bd(0x6d7)]),{'error':!0x0,'detail':_0x4e30bd(0x718)};}}catch(_0x58812c){return this[_0x4e30bd(0x112)][_0x4e30bd(0x4b3)](this[_0x4e30bd(0x78b)]+'\x20('+this['instance']['wuid']+_0x4e30bd(0x67f)+(_0x58812c instanceof Error?_0x58812c[_0x4e30bd(0x499)]:JSON[_0x4e30bd(0x1bb)](_0x58812c,null,0x2))),{'error':!0x0,'detail':_0x58812c[_0x4e30bd(0x499)]};}}async['scheduleSendText'](_0x4a33fb,_0x1c1b51){const _0x310fd7=a0_0x3f352e;if(this['logger'][_0x310fd7(0x72d)](this[_0x310fd7(0x78b)]+'\x20('+this[_0x310fd7(0x799)][_0x310fd7(0x3cb)]+_0x310fd7(0x775)+_0x1c1b51+'\x27'),!_0x4a33fb[_0x310fd7(0x21b)]||_0x4a33fb[_0x310fd7(0x21b)][_0x310fd7(0x45c)]===0x0)return{'error':!0x0,'detail':_0x310fd7(0x564)};let _0x2b1a6a=await this[_0x310fd7(0x3c1)](_0x4a33fb[_0x310fd7(0x21b)],_0x1c1b51),_0x2cba9c={'number':_0x1c1b51,'options':{'delay':_0x4a33fb[_0x310fd7(0x6a3)],'linkPreview':_0x4a33fb['linkPreview']},'textMessage':{'text':_0x2b1a6a}},_0x568978=null;try{let _0x4b8154=await this[_0x310fd7(0x197)](_0x2cba9c);if(_0x4b8154&&_0x4b8154[_0x310fd7(0x62a)])return{'error':!0x1,'id':_0x4b8154[_0x310fd7(0x2bb)]['id']};_0x568978=JSON[_0x310fd7(0x1bb)](_0x4b8154),this[_0x310fd7(0x112)][_0x310fd7(0x72d)](this['instanceName']+'\x20('+this[_0x310fd7(0x799)][_0x310fd7(0x3cb)]+'):\x20'+_0x568978);}catch(_0x3e0ac8){this[_0x310fd7(0x112)][_0x310fd7(0x4b3)](this[_0x310fd7(0x78b)]+'\x20('+this[_0x310fd7(0x799)][_0x310fd7(0x3cb)]+_0x310fd7(0x265)+(_0x3e0ac8 instanceof Error?_0x3e0ac8[_0x310fd7(0x499)]:JSON['stringify'](_0x3e0ac8,null,0x2))),_0x568978=_0x3e0ac8['message'];}if(_0x568978)return{'error':!0x0,'detail':(typeof _0x568978==_0x310fd7(0x5a0)?JSON[_0x310fd7(0x1bb)](_0x568978,null,0x2):_0x568978)[_0x310fd7(0x166)](/[\[\]{}\n]/g,'\x20')[_0x310fd7(0x166)](/  +/g,'\x20')};}async['scheduleSendMedia'](_0x106e21,_0x8d2651){const _0x3c535a=a0_0x3f352e;this[_0x3c535a(0x112)]['verbose'](this['instanceName']+'\x20('+this[_0x3c535a(0x799)][_0x3c535a(0x3cb)]+_0x3c535a(0x75d)+_0x8d2651+'\x27');let _0x41c4f7;_0x106e21[_0x3c535a(0x21b)]&&_0x106e21[_0x3c535a(0x21b)]['length']>0x0&&(_0x41c4f7=await this[_0x3c535a(0x3c1)](_0x106e21[_0x3c535a(0x21b)],_0x8d2651));let _0x204583={'number':_0x8d2651,'options':{'delay':_0x106e21[_0x3c535a(0x6a3)],'linkPreview':_0x106e21[_0x3c535a(0x47b)]},'mediaMessage':{'mediatype':_0x106e21[_0x3c535a(0x6d7)],'caption':_0x41c4f7,'media':_0x106e21['urlOrBase64']}},_0x43ea68=null;try{let _0x27e110=await this['mediaMessage'](_0x204583);if(_0x27e110&&_0x27e110[_0x3c535a(0x62a)])return{'error':!0x1,'id':_0x27e110[_0x3c535a(0x2bb)]['id']};_0x43ea68=JSON['stringify'](_0x27e110),this[_0x3c535a(0x112)]['verbose'](this[_0x3c535a(0x78b)]+'\x20('+this[_0x3c535a(0x799)][_0x3c535a(0x3cb)]+_0x3c535a(0x433)+_0x43ea68);}catch(_0x5c8035){this[_0x3c535a(0x112)][_0x3c535a(0x4b3)](this['instanceName']+'\x20('+this['instance'][_0x3c535a(0x3cb)]+_0x3c535a(0x311)+(_0x5c8035 instanceof Error?_0x5c8035[_0x3c535a(0x499)]:JSON[_0x3c535a(0x1bb)](_0x5c8035,null,0x2))),_0x43ea68=_0x5c8035[_0x3c535a(0x499)];}if(_0x43ea68)return{'error':!0x0,'detail':(typeof _0x43ea68==_0x3c535a(0x5a0)?JSON[_0x3c535a(0x1bb)](_0x43ea68,null,0x2):_0x43ea68)['replace'](/[\[\]{}\n]/g,'\x20')[_0x3c535a(0x166)](/  +/g,'\x20')};}async[a0_0x3f352e(0x53c)](_0x488720,_0x512516){const _0xbfe74c=a0_0x3f352e;this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0xbfe74c(0x3cb)]+'):\x20\x27Enviando\x20audio\x20para\x20\x27'+_0x512516+'\x27');let _0x38a409={'number':_0x512516,'options':{'delay':_0x488720[_0xbfe74c(0x6a3)]},'audioMessage':{'audio':_0x488720[_0xbfe74c(0x4aa)]}},_0x460b66=null;try{let _0x49b93d=await this[_0xbfe74c(0x491)](_0x38a409);if(_0x49b93d&&_0x49b93d[_0xbfe74c(0x62a)])return{'error':!0x1,'id':_0x49b93d['key']['id']};_0x460b66=JSON['stringify'](_0x49b93d),this['logger'][_0xbfe74c(0x72d)](this[_0xbfe74c(0x78b)]+'\x20('+this[_0xbfe74c(0x799)][_0xbfe74c(0x3cb)]+_0xbfe74c(0x433)+_0x460b66);}catch(_0x497a14){this[_0xbfe74c(0x112)][_0xbfe74c(0x4b3)](this[_0xbfe74c(0x78b)]+'\x20('+this['instance']['wuid']+_0xbfe74c(0x230)+(_0x497a14 instanceof Error?_0x497a14[_0xbfe74c(0x499)]:JSON['stringify'](_0x497a14,null,0x2))),_0x460b66=_0x497a14['message'];}if(_0x460b66)return{'error':!0x0,'detail':(typeof _0x460b66==_0xbfe74c(0x5a0)?JSON[_0xbfe74c(0x1bb)](_0x460b66,null,0x2):_0x460b66)[_0xbfe74c(0x166)](/[\[\]{}\n]/g,'\x20')[_0xbfe74c(0x166)](/  +/g,'\x20')};}async[a0_0x3f352e(0x3f1)](_0x365a12){const _0x234728=a0_0x3f352e;try{return await this[_0x234728(0x3de)][_0x234728(0x4cb)](_0x365a12[_0x234728(0x7df)],_0x365a12[_0x234728(0x131)]),{'update':_0x234728(0x362)};}catch(_0x4ee4b2){let _0x85f82a='Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc',_0x4a8b76=_0x4ee4b2 instanceof Error?_0x4ee4b2[_0x234728(0x499)]:typeof _0x4ee4b2==_0x234728(0x5a0)?JSON[_0x234728(0x1bb)](_0x4ee4b2):_0x4ee4b2,_0x5e4a02=_0x85f82a+':\x20'+_0x4a8b76;throw this[_0x234728(0x112)][_0x234728(0x4b3)](this[_0x234728(0x78b)]+'\x20('+this[_0x234728(0x799)][_0x234728(0x3cb)]+_0x234728(0x433)+_0x5e4a02),new x(_0x5e4a02);}}async['groupName'](_0x39334e){const _0x55b36d=a0_0x3f352e;try{return await this[_0x55b36d(0x3de)][_0x55b36d(0x686)](_0x39334e[_0x55b36d(0x7df)],_0x39334e['name']),{'update':'success'};}catch(_0x1de4b9){let _0x1e1855=_0x55b36d(0x47a),_0x2cb47d=_0x1de4b9 instanceof Error?_0x1de4b9['message']:typeof _0x1de4b9==_0x55b36d(0x5a0)?JSON[_0x55b36d(0x1bb)](_0x1de4b9):_0x1de4b9,_0x8992eb=_0x1e1855+':\x20'+_0x2cb47d;throw this[_0x55b36d(0x112)]['error'](this['instanceName']+'\x20('+this[_0x55b36d(0x799)]['wuid']+'):\x20'+_0x8992eb),new x(_0x8992eb);}}async['toggleEphemeral'](_0x2e70e2){const _0x15635e=a0_0x3f352e;try{let _0x59035e=await this[_0x15635e(0x3de)][_0x15635e(0x345)](_0x2e70e2['groupJid'],_0x2e70e2['expiration']);return{'success':!0x0};}catch(_0x2dea7e){let _0x358d63=_0x15635e(0x7d1),_0x30ae39=_0x2dea7e instanceof Error?_0x2dea7e['message']:typeof _0x2dea7e==_0x15635e(0x5a0)?JSON[_0x15635e(0x1bb)](_0x2dea7e):_0x2dea7e,_0x7f66d8=_0x358d63+':\x20'+_0x30ae39;throw this[_0x15635e(0x112)]['error'](this[_0x15635e(0x78b)]+'\x20('+this[_0x15635e(0x799)][_0x15635e(0x3cb)]+'):\x20'+_0x7f66d8),new x(_0x7f66d8);}}async[a0_0x3f352e(0x3aa)](_0x290034){const _0x46f019=a0_0x3f352e;try{return await this['client']['groupSettingUpdate'](_0x290034[_0x46f019(0x7df)],_0x290034[_0x46f019(0x78d)]),{'update':_0x46f019(0x362)};}catch(_0x3d83c8){let _0x129ab4=_0x46f019(0x6f0),_0x4c8c9d=_0x3d83c8 instanceof Error?_0x3d83c8['message']:typeof _0x3d83c8==_0x46f019(0x5a0)?JSON['stringify'](_0x3d83c8):_0x3d83c8,_0x29bf66=_0x129ab4+':\x20'+_0x4c8c9d;throw this[_0x46f019(0x112)][_0x46f019(0x4b3)](this[_0x46f019(0x78b)]+'\x20('+this[_0x46f019(0x799)][_0x46f019(0x3cb)]+_0x46f019(0x433)+_0x29bf66),new x(_0x29bf66);}}async[a0_0x3f352e(0x790)](_0x4750e7){const _0x1bf0c3=a0_0x3f352e;try{let _0x334306;if((0x0,k[_0x1bf0c3(0x663)])(_0x4750e7[_0x1bf0c3(0x763)])){let _0x2e01a2=new Date()[_0x1bf0c3(0x154)](),_0x22cede=_0x4750e7[_0x1bf0c3(0x763)]+_0x1bf0c3(0x328)+_0x2e01a2;_0x334306=(await Y[_0x1bf0c3(0x164)][_0x1bf0c3(0x427)](_0x22cede,{'responseType':_0x1bf0c3(0x359)}))[_0x1bf0c3(0x742)];}else{if((0x0,k['isBase64'])(_0x4750e7[_0x1bf0c3(0x763)]))_0x334306=Buffer[_0x1bf0c3(0x3a3)](_0x4750e7[_0x1bf0c3(0x763)],'base64');else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this[_0x1bf0c3(0x3de)][_0x1bf0c3(0x7b7)](_0x4750e7[_0x1bf0c3(0x7df)],_0x334306),{'update':'success'};}catch(_0x121d74){let _0x2637b2='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture',_0x5e176e=_0x121d74 instanceof Error?_0x121d74[_0x1bf0c3(0x499)]:typeof _0x121d74=='object'?JSON[_0x1bf0c3(0x1bb)](_0x121d74):_0x121d74,_0xb7cf81=_0x2637b2+':\x20'+_0x5e176e;throw this['logger'][_0x1bf0c3(0x4b3)](this[_0x1bf0c3(0x78b)]+'\x20('+this[_0x1bf0c3(0x799)][_0x1bf0c3(0x3cb)]+'):\x20'+_0xb7cf81),new x(_0xb7cf81);}}},Jt=class u{constructor(_0x108c6c,_0x3e2a12,_0xdb0a4f){const _0x1f82e4=a0_0x3f352e;this[_0x1f82e4(0x55d)]=_0x108c6c,this[_0x1f82e4(0x446)]=_0x3e2a12,this['repository']=_0xdb0a4f,this['db']={},this[_0x1f82e4(0x76c)]={},this[_0x1f82e4(0x112)]=new $(u[_0x1f82e4(0x5f4)]),this[_0x1f82e4(0x39e)]={},(this[_0x1f82e4(0xfe)](),this[_0x1f82e4(0x5d3)](),Object['assign'](this['db'],_0x3e2a12[_0x1f82e4(0x427)]('DATABASE')),Object['assign'](this[_0x1f82e4(0x76c)],_0x3e2a12['get'](_0x1f82e4(0x5fd))),this[_0x1f82e4(0x1cc)]=this['db'][_0x1f82e4(0x681)]?this[_0x1f82e4(0x7be)][_0x1f82e4(0x4f8)]?.['db'](this['db'][_0x1f82e4(0x68c)][_0x1f82e4(0x331)]+_0x1f82e4(0x2ab)):void 0x0,this['cache']=this[_0x1f82e4(0x76c)][_0x1f82e4(0x681)]?new de(this[_0x1f82e4(0x76c)]):void 0x0);}async[a0_0x3f352e(0x7c0)](_0x2af23e){const _0x21a37c=a0_0x3f352e;if(_0x2af23e&&!this[_0x21a37c(0x39e)][_0x2af23e])throw new j(_0x21a37c(0x2f6)+_0x2af23e+_0x21a37c(0x6f6));let _0x21f334=[];for await(let [_0x4cf4c6,_0x39a2bf]of Object['entries'](this[_0x21a37c(0x39e)]))if(_0x39a2bf&&_0x39a2bf[_0x21a37c(0x589)]['state']===_0x21a37c(0x6d3)){let _0xeffa52=await this['repository'][_0x21a37c(0x554)][_0x21a37c(0x71f)](_0x4cf4c6);_0x21f334[_0x21a37c(0x5ea)]({'instance':{'instanceName':_0x4cf4c6,'apikey':_0xeffa52[_0x21a37c(0x6dc)],'owner':_0x39a2bf[_0x21a37c(0x3cb)],'profileName':await _0x39a2bf[_0x21a37c(0x4c8)]()||_0x21a37c(0x6f1),'profilePictureUrl':_0x39a2bf[_0x21a37c(0x700)]}});}return _0x21f334[_0x21a37c(0x71f)](_0x2a1146=>_0x2a1146[_0x21a37c(0x799)][_0x21a37c(0x78b)]===_0x2af23e)??_0x21f334;}async['cleaningUp'](_0x181388){const _0x7b4f8a=a0_0x3f352e;if(this['db'][_0x7b4f8a(0x681)]&&(await this[_0x7b4f8a(0x7be)][_0x7b4f8a(0x4f8)]['connect'](),(await this[_0x7b4f8a(0x1cc)]['collections']())[_0x7b4f8a(0x45c)]>0x0&&await this[_0x7b4f8a(0x1cc)][_0x7b4f8a(0x64d)](_0x181388)),this[_0x7b4f8a(0x76c)]['ENABLED']){this[_0x7b4f8a(0xee)]['reference']=_0x181388,await this[_0x7b4f8a(0xee)][_0x7b4f8a(0x1cd)]();return;}}async['loadInstance'](){const _0x21aa86=a0_0x3f352e;await this[_0x21aa86(0x333)]();let _0x2d9b6d=async _0x4cebdb=>{const _0x42bd2c=_0x21aa86;let _0x501984=new $e(this[_0x42bd2c(0x446)],this['eventEmitter'],this[_0x42bd2c(0x7be)]);_0x501984[_0x42bd2c(0x78b)]=_0x4cebdb,await _0x501984['connectToWhatsapp'](),this[_0x42bd2c(0x39e)][_0x4cebdb]=_0x501984;};try{if(this[_0x21aa86(0x76c)][_0x21aa86(0x681)]){let _0x69456f=await this[_0x21aa86(0xee)][_0x21aa86(0x503)]();_0x69456f?.[_0x21aa86(0x45c)]>0x0&&_0x69456f[_0x21aa86(0x62c)](async _0x165f8f=>await _0x2d9b6d(_0x165f8f[_0x21aa86(0x384)](':')[0x1]));return;}if(this['db']['ENABLED']){await this['repository'][_0x21aa86(0x4f8)][_0x21aa86(0xc8)]();let _0x441017=await this[_0x21aa86(0x1cc)][_0x21aa86(0x375)]();_0x441017[_0x21aa86(0x45c)]>0x0&&_0x441017[_0x21aa86(0x62c)](async _0x405aa9=>await _0x2d9b6d(_0x405aa9[_0x21aa86(0x3c7)][_0x21aa86(0x166)](/^[\w-]+\./,'')));return;}}catch(_0x15b6bc){this[_0x21aa86(0x112)][_0x21aa86(0x4b3)](_0x15b6bc);}}async['cleanDisconnectedInstances'](){const _0x868e39=a0_0x3f352e;try{let _0x2cb01e=await this[_0x868e39(0x7be)][_0x868e39(0x554)][_0x868e39(0x4ee)]({'online':!0x1});for(let _0x38cd7e of _0x2cb01e){let _0x5a4a88=_0x38cd7e[_0x868e39(0x68d)];await ae[_0x868e39(0x107)](W,_0x5a4a88);}console[_0x868e39(0x133)](_0x868e39(0x42b)+_0x2cb01e[_0x868e39(0x45c)]);let _0x49e385={'online':!0x1},_0x2a0b88=await this[_0x868e39(0x7be)][_0x868e39(0x554)][_0x868e39(0x3f9)](_0x49e385);console['log'](_0x868e39(0x6b2)+_0x2a0b88['insertCount']);}catch(_0x4cf44d){console[_0x868e39(0x4b3)]('Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:',_0x4cf44d);}}async[a0_0x3f352e(0x333)](){const _0x5d8c7b=a0_0x3f352e;try{let _0x4c04a9={'online':!0x1},_0xb7c304={'online':!0x1,'lastDisconnect':Date[_0x5d8c7b(0x196)]()},_0x3500a1=await this[_0x5d8c7b(0x7be)]['auth'][_0x5d8c7b(0x126)](_0x4c04a9,_0xb7c304);await this[_0x5d8c7b(0x710)]();}catch(_0x368718){console[_0x5d8c7b(0x4b3)](_0x5d8c7b(0x6ef),_0x368718);}}['removeInstance'](){const _0x583d5d=a0_0x3f352e;this[_0x583d5d(0x55d)]['on'](_0x583d5d(0x729),async _0x3f4816=>{const _0x34c733=_0x583d5d;try{this[_0x34c733(0x39e)][_0x3f4816]=void 0x0;}catch{}try{this[_0x34c733(0x31b)](_0x3f4816);}finally{this[_0x34c733(0x112)]['warn'](_0x34c733(0x2f6)+_0x3f4816+_0x34c733(0x5e4));}});}[a0_0x3f352e(0x5d3)](){const _0x51472e=a0_0x3f352e;this[_0x51472e(0x55d)]['on'](_0x51472e(0x122),async _0x2ec3de=>{const _0x26c751=_0x51472e;try{this[_0x26c751(0x39e)][_0x2ec3de]=void 0x0;}catch{}try{this[_0x26c751(0x31b)](_0x2ec3de);}finally{this[_0x26c751(0x112)][_0x26c751(0x76b)](_0x26c751(0x2f6)+_0x2ec3de+_0x26c751(0x115));}});}},qt=class extends _{[a0_0x3f352e(0x181)](_0x35169b){return Zs(_0x35169b);}async[a0_0x3f352e(0x703)](_0x358323){const _0x330c0d=a0_0x3f352e;if(_0x358323[_0x330c0d(0x45c)]!==0x0)try{return{'insertCount':(await this[_0x330c0d(0x181)](_0x358323[0x0][_0x330c0d(0x19a)])['insertMany']([..._0x358323]))[_0x330c0d(0x45c)]};}catch(_0x30936c){return _0x30936c;}}async['find'](_0x1b9874,_0x4a891d){const _0x197b01=a0_0x3f352e;try{let _0x48e321=this[_0x197b01(0x181)](_0x4a891d),_0x20e209=I(_0x1b9874[_0x197b01(0x56d)]);return await _0x48e321[_0x197b01(0x71f)](_0x20e209)[_0x197b01(0x344)]({'lastmsg':-0x1})[_0x197b01(0x518)](_0x1b9874?.['limit']??0x0)[_0x197b01(0x684)]();}catch{return[];}}async['findGroupsEspecial'](_0x4c51d5,_0x20ae00){const _0x206e71=a0_0x3f352e;try{let _0x5568eb=this[_0x206e71(0x181)](_0x20ae00),_0x5ee376=I(_0x4c51d5[_0x206e71(0x56d)]);return _0x5ee376['groupdata.participants']={'$ne':[]},await _0x5568eb[_0x206e71(0x71f)](_0x5ee376)[_0x206e71(0x344)]({'lastmsg':-0x1})['limit'](_0x4c51d5?.['limit']??0x0)['lean']();}catch{return[];}}async[a0_0x3f352e(0x49b)](_0x4d7b79,_0x140d19){const _0x62b6d6=a0_0x3f352e;try{return{'deletedCount':(await this[_0x62b6d6(0x181)](_0x140d19)[_0x62b6d6(0x3f9)]({..._0x4d7b79[_0x62b6d6(0x56d)]}))[_0x62b6d6(0x329)]};}catch(_0x537078){return{'error':_0x537078?.[_0x62b6d6(0x123)]()};}}async[a0_0x3f352e(0x695)](_0x3488f2,_0x2db3e7){const _0x575785=a0_0x3f352e;try{return await this[_0x575785(0x181)](_0x2db3e7)[_0x575785(0x3f9)]({..._0x3488f2[_0x575785(0x56d)]}),[];}catch(_0x2c4b56){return{'error':_0x2c4b56?.['toString']()};}}async['findOne'](_0x45fbbe,_0x1ca796){const _0x37606d=a0_0x3f352e;try{let _0x4f6e96=this['getChatModelForOwner'](_0x1ca796),_0x1af747=I(_0x45fbbe[_0x37606d(0x56d)]);return await _0x4f6e96['findOne'](_0x1af747)[_0x37606d(0x684)]();}catch{return null;}}async[a0_0x3f352e(0x372)](_0x323d88,_0x466d62,_0x3e796a,_0x4510ec,_0xd68de9=a0_0x3f352e(0xd0)){const _0x1aa713=a0_0x3f352e;try{let _0x295de7={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x4510ec},_0xbc7b94=this[_0x1aa713(0x181)](_0x3e796a),_0x3400ac=I(_0x323d88[_0x1aa713(0x56d)]);Object['keys'](_0x466d62)['forEach'](_0x896918=>{_0x466d62[_0x896918]==null&&delete _0x466d62[_0x896918];});let _0x2b4f93={};return _0x2b4f93[_0xd68de9]=_0x466d62,await _0xbc7b94[_0x1aa713(0x76e)](_0x3400ac,_0x2b4f93,_0x295de7);}catch(_0x8e4fa7){return console[_0x1aa713(0x4b3)](_0x8e4fa7),null;}}async[a0_0x3f352e(0x4b0)](_0x362741){const _0x4416b7=a0_0x3f352e;try{let _0x2066c4=this[_0x4416b7(0x181)](_0x362741[0x0][_0x4416b7(0x175)][_0x4416b7(0x56d)]['owner']),_0x118c6e=_0x362741[_0x4416b7(0xff)](_0x3f14d6=>({'updateOne':{'filter':{..._0x3f14d6[_0x4416b7(0x175)][_0x4416b7(0x56d)]},'update':{'$set':_0x3f14d6[_0x4416b7(0x6c1)]},'upsert':!0x0}})),_0x42383d=await _0x2066c4[_0x4416b7(0x48e)](_0x118c6e);return _0x42383d['modifiedCount']+_0x42383d[_0x4416b7(0x61b)];}catch(_0x215c5d){return console[_0x4416b7(0x4b3)](_0x215c5d),0x0;}}async[a0_0x3f352e(0x526)](_0x111fbe){const _0x1001d3=a0_0x3f352e;try{let _0x39fdbe={'group_isCommunity':'','group_announce':'','group_size':''},_0x154ca5={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x3f5fcc={'$unset':_0x39fdbe};return(await this['getChatModelForOwner'](_0x111fbe)[_0x1001d3(0x4b0)](_0x154ca5,_0x3f5fcc))[_0x1001d3(0x1f4)];}catch(_0x1d46fa){return console[_0x1001d3(0x4b3)]('Error\x20removing\x20unused\x20chat\x20fields:',_0x1d46fa),0x0;}}async['updateMissingEtiquetas'](_0x559a20){const _0x44441d=a0_0x3f352e;try{let _0x508d1a=this[_0x44441d(0x181)](_0x559a20),_0x52ee45={'leadInfo.etiquetas':{'$exists':!0x1}},_0x354dbe={'$set':{'leadInfo.etiquetas':[]}};return(await _0x508d1a[_0x44441d(0x4b0)](_0x52ee45,_0x354dbe))[_0x44441d(0x1f4)];}catch(_0x513293){return console[_0x44441d(0x4b3)](_0x513293),0x0;}}async['updateMissingTags'](_0x1fbb32){const _0x3c8500=a0_0x3f352e;try{let _0x43a73f=this[_0x3c8500(0x181)](_0x1fbb32),_0x5adcfe={'leadInfo.tags':{'$exists':!0x1}},_0x390b5a={'$set':{'leadInfo.tags':[]}};return(await _0x43a73f[_0x3c8500(0x4b0)](_0x5adcfe,_0x390b5a))[_0x3c8500(0x1f4)];}catch(_0xa4e0b4){return console[_0x3c8500(0x4b3)](_0xa4e0b4),0x0;}}async[a0_0x3f352e(0x6ed)](_0x7cc6bf){const _0x4827c9=a0_0x3f352e;try{let _0x4d26c8=this[_0x4827c9(0x181)](_0x7cc6bf),_0x536cd2={'leadInfo.customFields':{'$exists':!0x1}},_0x200efd={'$set':{'leadInfo.customFields':[]}};return(await _0x4d26c8[_0x4827c9(0x4b0)](_0x536cd2,_0x200efd))[_0x4827c9(0x1f4)];}catch(_0x49562b){return console[_0x4827c9(0x4b3)](_0x49562b),0x0;}}async[a0_0x3f352e(0x190)](_0x52720f,_0x6f26f3){const _0x1da252=a0_0x3f352e;if(!Array[_0x1da252(0xae)](_0x52720f)||_0x52720f['length']===0x0)throw new Error(_0x1da252(0x62e));try{return(await this[_0x1da252(0x181)](_0x6f26f3)[_0x1da252(0x190)](_0x52720f))[_0x1da252(0x45c)];}catch(_0x20dd51){throw console[_0x1da252(0x4b3)](_0x1da252(0x4bd),_0x20dd51),_0x20dd51;}}async[a0_0x3f352e(0xfc)](_0x4d6618,_0x5547d7){const _0x5a10ee=a0_0x3f352e;try{await this[_0x5a10ee(0x181)](_0x5547d7)[_0x5a10ee(0xe9)]({'_id':_0x4d6618});}catch(_0x3f00e5){throw console[_0x5a10ee(0x4b3)](_0x5a10ee(0x3d0),_0x3f00e5),_0x3f00e5;}}},Vt=class extends _{constructor(_0x3315a8,_0x4d7d08,_0x3a496e){const _0x58c4b5=a0_0x3f352e;super(_0x4d7d08),this[_0x58c4b5(0x7ba)]=_0x3315a8,this['configService']=_0x4d7d08,this[_0x58c4b5(0x40b)]=_0x3a496e;}async[a0_0x3f352e(0x703)](_0x2399be){const _0x1fa610=a0_0x3f352e;if(_0x2399be[_0x1fa610(0x45c)]!==0x0)try{return{'insertCount':(await this[_0x1fa610(0x7ba)][_0x1fa610(0x190)]([..._0x2399be]))[_0x1fa610(0x45c)]};}catch(_0x55f12a){return _0x55f12a;}}async[a0_0x3f352e(0x6c1)](_0x431015,_0x15e14a){const _0xb8dd14=a0_0x3f352e;try{let _0x3dec6c=I(_0x431015[_0xb8dd14(0x56d)]);return{'updatedCount':(await this[_0xb8dd14(0x7ba)][_0xb8dd14(0x4b0)](_0x3dec6c,{'$set':_0x15e14a}))['modifiedCount']};}catch(_0x5cff05){return console[_0xb8dd14(0x4b3)]('Error\x20updating\x20cache\x20contact:',_0x5cff05),{'error':_0x5cff05['toString']()};}}async[a0_0x3f352e(0x7c1)](_0x144cdd){const _0x3a7bc1=a0_0x3f352e;try{let _0x1dc2e7={'_id':{'$in':_0x144cdd}};return await this[_0x3a7bc1(0x7ba)][_0x3a7bc1(0x71f)](_0x1dc2e7)[_0x3a7bc1(0x684)]();}catch(_0x1c9ca8){return console[_0x3a7bc1(0x4b3)](_0x3a7bc1(0x156),_0x1c9ca8),[];}}async['delete'](_0x4a4758){const _0x42f6a1=a0_0x3f352e;try{return{'deletedCount':(await this[_0x42f6a1(0x7ba)]['deleteMany']({..._0x4a4758[_0x42f6a1(0x56d)]}))[_0x42f6a1(0x329)]};}catch(_0x3f23f7){return{'error':_0x3f23f7?.[_0x42f6a1(0x123)]()};}}async[a0_0x3f352e(0x71f)](_0x4b1909){const _0x8c38db=a0_0x3f352e;try{let _0x6cd20e=I(_0x4b1909[_0x8c38db(0x56d)]);return await this[_0x8c38db(0x7ba)][_0x8c38db(0x71f)](_0x6cd20e)[_0x8c38db(0x518)](_0x4b1909?.[_0x8c38db(0x518)]??0x0)[_0x8c38db(0x684)]();}catch{return[];}}async['findOne'](_0x52ecdf){const _0x1d4dc0=a0_0x3f352e;try{let _0x3a10c3=I(_0x52ecdf[_0x1d4dc0(0x56d)]);return await this[_0x1d4dc0(0x7ba)]['findOne'](_0x3a10c3)[_0x1d4dc0(0x684)]();}catch{return null;}}},Gt=class extends _{['getLabelModelForOwner'](_0x7f0edd){return Ma(_0x7f0edd);}async[a0_0x3f352e(0x372)](_0x53f6cc,_0x51b507,_0x418109,_0x3f019c){const _0x3c6f51=a0_0x3f352e;try{let _0xe814ec={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x3f019c},_0xa18052=this[_0x3c6f51(0x7a0)](_0x418109),_0x5b6121=I(_0x53f6cc[_0x3c6f51(0x56d)]);return await _0xa18052[_0x3c6f51(0x76e)](_0x5b6121,{'$set':_0x51b507},_0xe814ec);}catch(_0x4eaec4){return console[_0x3c6f51(0x4b3)](_0x4eaec4),null;}}async[a0_0x3f352e(0x71f)](_0x34fc56,_0x1827c5){const _0x1c8ff3=a0_0x3f352e;try{let _0x432ce6=this[_0x1c8ff3(0x7a0)](_0x1827c5),_0xe23a62=I(_0x34fc56['where']);return await _0x432ce6['find'](_0xe23a62);}catch(_0x5499fd){console['error'](_0x5499fd);}}async[a0_0x3f352e(0x49b)](_0x253d1d,_0x16a1f8){const _0x538757=a0_0x3f352e;try{let _0x53b28f=this['getLabelModelForOwner'](_0x16a1f8),_0x26b737=I(_0x253d1d[_0x538757(0x56d)]);await _0x53b28f[_0x538757(0x3f9)](_0x26b737);}catch(_0x19c091){console['error'](_0x19c091);}}async['deleteAll'](_0x3a4007){const _0x3de05d=a0_0x3f352e;try{return await this['getLabelModelForOwner'](_0x3a4007)[_0x3de05d(0x48b)]['drop'](),{'success':!0x0};}catch(_0x3fd886){return console[_0x3de05d(0x4b3)](_0x3fd886),{'success':!0x1,'error':_0x3fd886};}}},Bt=class{constructor(_0x2e741d){const _0x523744=a0_0x3f352e;this[_0x523744(0x4ad)]=_0x2e741d;}async[a0_0x3f352e(0x4e2)]({instanceName:_0x22c187},_0x4f54b0){const _0x50b4c5=a0_0x3f352e;return await this['waMonitor'][_0x50b4c5(0x39e)][_0x22c187]['editChat'](_0x4f54b0);}async[a0_0x3f352e(0x3d6)]({instanceName:_0x1007f1},_0x56d329){const _0x230019=a0_0x3f352e;return await this[_0x230019(0x4ad)]['waInstances'][_0x1007f1]['whatsappNumber'](_0x56d329);}async[a0_0x3f352e(0x561)]({instanceName:_0x1a3f33},_0x124e11){const _0x4e45b9=a0_0x3f352e;return await this[_0x4e45b9(0x4ad)][_0x4e45b9(0x39e)][_0x1a3f33][_0x4e45b9(0x561)](_0x124e11);}async[a0_0x3f352e(0x53d)]({instanceName:_0x1e3935},_0x4288f3){const _0x392004=a0_0x3f352e;return await this[_0x392004(0x4ad)]['waInstances'][_0x1e3935]['markMessageAsRead'](_0x4288f3);}async[a0_0x3f352e(0x157)]({instanceName:_0x45f014},_0x496ddc){const _0x27979c=a0_0x3f352e;return await this[_0x27979c(0x4ad)][_0x27979c(0x39e)][_0x45f014][_0x27979c(0x157)](_0x496ddc);}async[a0_0x3f352e(0x3b8)]({instanceName:_0x5d8427},_0x32d500){const _0x43c486=a0_0x3f352e;return await this[_0x43c486(0x4ad)][_0x43c486(0x39e)][_0x5d8427][_0x43c486(0x3b8)](_0x32d500);}async['fetchProfilePicture']({instanceName:_0x4cb08f},_0x342ee1){const _0x4c583a=a0_0x3f352e;return await this[_0x4c583a(0x4ad)]['waInstances'][_0x4cb08f][_0x4c583a(0x1ee)](_0x342ee1[_0x4c583a(0x596)]);}async[a0_0x3f352e(0x17d)]({instanceName:_0x2cbcb1},_0x40be46){const _0x189550=a0_0x3f352e;return await this[_0x189550(0x4ad)][_0x189550(0x39e)][_0x2cbcb1]['fetchProfile'](_0x40be46['number']);}async[a0_0x3f352e(0x277)]({instanceName:_0x12497c},_0x2d3c28){const _0x19e82b=a0_0x3f352e;return await this[_0x19e82b(0x4ad)][_0x19e82b(0x39e)][_0x12497c][_0x19e82b(0x277)](_0x2d3c28);}async[a0_0x3f352e(0x38f)]({instanceName:_0x534e2b},_0x3e2bf6){const _0x4e1ca1=a0_0x3f352e;return await this['waMonitor'][_0x4e1ca1(0x39e)][_0x534e2b][_0x4e1ca1(0x38f)](_0x3e2bf6);}async[a0_0x3f352e(0x600)]({instanceName:_0x240b0d},_0x431a2b){const _0xc9bdb=a0_0x3f352e;return await this[_0xc9bdb(0x4ad)][_0xc9bdb(0x39e)][_0x240b0d][_0xc9bdb(0x600)](_0x431a2b);}async[a0_0x3f352e(0x3dd)]({instanceName:_0x390e99},_0x343d12){const _0x2d82a6=a0_0x3f352e;return await this['waMonitor'][_0x2d82a6(0x39e)][_0x390e99][_0x2d82a6(0x3dd)](_0x343d12);}async[a0_0x3f352e(0x1d2)]({instanceName:_0x4c1985}){const _0x265a0a=a0_0x3f352e;return await this['waMonitor'][_0x265a0a(0x39e)][_0x4c1985]['fetchLabels']();}async[a0_0x3f352e(0x505)]({instanceName:_0x2f23dd}){const _0x229f4c=a0_0x3f352e;return await this[_0x229f4c(0x4ad)][_0x229f4c(0x39e)][_0x2f23dd][_0x229f4c(0x505)]();}async[a0_0x3f352e(0x103)]({instanceName:_0x535cd3}){const _0x5c01ee=a0_0x3f352e;return await this[_0x5c01ee(0x4ad)][_0x5c01ee(0x39e)][_0x535cd3][_0x5c01ee(0x103)]();}async['updatePrivacySettings']({instanceName:_0x3ec445},_0x2da1c6){const _0x1dbeab=a0_0x3f352e;return await this[_0x1dbeab(0x4ad)][_0x1dbeab(0x39e)][_0x3ec445][_0x1dbeab(0x4df)](_0x2da1c6);}async[a0_0x3f352e(0x136)]({instanceName:_0x2968f4},_0x457caa){const _0x1017ae=a0_0x3f352e;return await this[_0x1017ae(0x4ad)][_0x1017ae(0x39e)][_0x2968f4][_0x1017ae(0x136)](_0x457caa[_0x1017ae(0x596)]);}async[a0_0x3f352e(0x32c)]({instanceName:_0x228d34},_0x5778e5){const _0x6af2a7=a0_0x3f352e;return await this[_0x6af2a7(0x4ad)][_0x6af2a7(0x39e)][_0x228d34][_0x6af2a7(0x32c)](_0x5778e5['name']);}async[a0_0x3f352e(0x4dc)]({instanceName:_0x544629},_0x2f7387){const _0x5dbb8b=a0_0x3f352e;return await this[_0x5dbb8b(0x4ad)][_0x5dbb8b(0x39e)][_0x544629][_0x5dbb8b(0x4dc)](_0x2f7387[_0x5dbb8b(0x62a)]);}async[a0_0x3f352e(0x7b7)]({instanceName:_0x328cc8},_0x5c17c9){const _0xb5d35d=a0_0x3f352e;return await this[_0xb5d35d(0x4ad)][_0xb5d35d(0x39e)][_0x328cc8][_0xb5d35d(0x7b7)](_0x5c17c9['picture']);}async[a0_0x3f352e(0x414)]({instanceName:_0x1f5ca8},_0x4bd7b9){const _0x472e9e=a0_0x3f352e;return await this[_0x472e9e(0x4ad)][_0x472e9e(0x39e)][_0x1f5ca8][_0x472e9e(0x414)]();}},Wt=require(a0_0x3f352e(0x7e7)),zt=class u{constructor(_0x7ed8db,_0x165b86,_0x50b766,_0x3912a7,_0x23f9a0){const _0x446bc7=a0_0x3f352e;this['waMonitor']=_0x7ed8db,this[_0x446bc7(0x446)]=_0x165b86,this[_0x446bc7(0x7be)]=_0x50b766,this[_0x446bc7(0x55d)]=_0x3912a7,this[_0x446bc7(0x1f0)]=_0x23f9a0,this[_0x446bc7(0x112)]=new $(u[_0x446bc7(0x5f4)]);}async['createInstance']({instanceName:_0x377f1a,apikey:_0x32eb85,number:_0x1713a5,proxy:_0x259386=!0x0}){const _0x1f3443=a0_0x3f352e;try{let _0x4f1dd2=new $e(this[_0x1f3443(0x446)],this[_0x1f3443(0x55d)],this[_0x1f3443(0x7be)]);_0x4f1dd2[_0x1f3443(0x78b)]=_0x377f1a,this[_0x1f3443(0x4ad)][_0x1f3443(0x39e)][_0x4f1dd2[_0x1f3443(0x78b)]]=_0x4f1dd2;let _0x3b8f81={};_0x32eb85?(await this[_0x1f3443(0x7be)][_0x1f3443(0x554)]['create']({'apikey':_0x32eb85},_0x377f1a),_0x3b8f81[_0x1f3443(0x6dc)]=_0x32eb85):_0x3b8f81=await this[_0x1f3443(0x1f0)][_0x1f3443(0x4f1)]({'instanceName':_0x4f1dd2[_0x1f3443(0x78b)]});let _0x321724;if(_0x1713a5){if(_0x321724=await this[_0x1f3443(0x2c1)](_0x1713a5),_0x321724[_0x1f3443(0x4b3)])throw new x(_0x321724[_0x1f3443(0x4b3)][_0x1f3443(0x123)]());_0x1713a5=_0x321724[_0x1f3443(0x596)];}let _0xbfaa06;return await _0x4f1dd2['connectToWhatsapp'](_0x1713a5),await(0x0,Wt[_0x1f3443(0x6a3)])(0xfa0),_0x1713a5&&await(0x0,Wt[_0x1f3443(0x6a3)])(0xbb8),_0xbfaa06=_0x4f1dd2[_0x1f3443(0x211)],{'instance':{'instanceName':_0x4f1dd2[_0x1f3443(0x78b)],'status':'created'},'hash':_0x3b8f81,'qrcode':_0xbfaa06};}catch(_0x5ce94c){throw this['logger'][_0x1f3443(0x4b3)](_0x5ce94c),_0x5ce94c;}}async[a0_0x3f352e(0x4fa)]({instanceName:_0x2e3c94,number:_0x2b5a04=null}){const _0x543a55=a0_0x3f352e;try{let _0x210eaf=this[_0x543a55(0x4ad)][_0x543a55(0x39e)][_0x2e3c94];switch(_0x210eaf?.[_0x543a55(0x589)]?.[_0x543a55(0x4a2)]){case _0x543a55(0x4b2):return await _0x210eaf[_0x543a55(0x6da)](_0x2b5a04),await(0x0,Wt[_0x543a55(0x6a3)])(0x7d0),_0x210eaf[_0x543a55(0x211)];case _0x543a55(0x6a5):return _0x210eaf[_0x543a55(0x211)];default:return await this[_0x543a55(0x356)]({'instanceName':_0x2e3c94});}}catch(_0x1413a1){this['logger'][_0x543a55(0x133)](_0x1413a1);}}async[a0_0x3f352e(0x356)]({instanceName:_0x2bc994}){const _0x757383=a0_0x3f352e;let _0x513569=this[_0x757383(0x4ad)][_0x757383(0x39e)][_0x2bc994][_0x757383(0x589)],_0x2bd24d=null;_0x513569[_0x757383(0x4a2)]===_0x757383(0x6d3)&&_0x2bc994&&(_0x2bd24d=await this[_0x757383(0x4ad)]['instanceInfo'](_0x2bc994));let _0x511333=null;return _0x513569[_0x757383(0x4a2)]==='connecting'&&_0x2bc994&&(_0x511333=this[_0x757383(0x4ad)][_0x757383(0x39e)][_0x2bc994]['qrCode']),{'instance':_0x2bc994,'connectionStatus':_0x513569,'instanceInfo':_0x2bd24d,'qrcode':_0x511333};}async['verifyWhatsAppNumber'](_0x1aefe7){const _0x47f7f3=a0_0x3f352e;_0x1aefe7=_0x1aefe7[_0x47f7f3(0x166)](/\D/g,'');let _0x136643=Object[_0x47f7f3(0x75c)](this[_0x47f7f3(0x4ad)][_0x47f7f3(0x39e)])[_0x47f7f3(0x495)](_0x99388f=>{const _0x40976a=_0x47f7f3;let _0x54dbf9=this[_0x40976a(0x4ad)][_0x40976a(0x39e)][_0x99388f];return _0x54dbf9&&_0x54dbf9[_0x40976a(0x589)]&&_0x54dbf9[_0x40976a(0x589)][_0x40976a(0x4a2)]==='open';});if(_0x136643[_0x47f7f3(0x45c)]===0x0)return{'number':this[_0x47f7f3(0x3c8)](_0x1aefe7)};let _0x3ef3e0=Math['floor'](Math[_0x47f7f3(0x52f)]()*_0x136643[_0x47f7f3(0x45c)]),_0x454385=_0x136643[_0x3ef3e0];try{let _0x5d272f=(await this[_0x47f7f3(0x4ad)][_0x47f7f3(0x39e)][_0x454385]['whatsappNumber']({'numbers':[_0x1aefe7]}))['shift']();return _0x5d272f['exists']?{'number':_0x5d272f[_0x47f7f3(0x3ab)][_0x47f7f3(0x166)](_0x47f7f3(0x246),'')}:{'number':_0x1aefe7,'error':_0x47f7f3(0x2d8)};}catch(_0x1c09a2){return this[_0x47f7f3(0x112)]['error'](_0x47f7f3(0x1e0)+_0x1c09a2),{'number':_0x1aefe7,'error':_0x47f7f3(0x1b0)};}}[a0_0x3f352e(0x3c8)](_0x230a35){const _0xcf9af9=a0_0x3f352e;let _0x158e5f=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0xcf9af9(0x7d5)](_0x230a35);if(_0x158e5f&&_0x158e5f[0x1]==='55'){let _0x36d02e=_0x158e5f[0x2],_0x3193b0=_0x158e5f[0x3],_0x3d9fcb=_0x158e5f[0x4];if(parseInt(_0x36d02e)>=0x1f&&_0x3193b0==='9')return _0x158e5f[0x1]+_0x36d02e+_0x3d9fcb;}return _0x230a35;}async[a0_0x3f352e(0x771)]({instanceName:_0x3738ba}){const _0x398ee0=a0_0x3f352e;try{return this[_0x398ee0(0x4ad)][_0x398ee0(0x39e)][_0x3738ba]?.[_0x398ee0(0x3de)]?.['ws']?.['close'](),{'status':_0x398ee0(0x66c),'error':!0x1,'response':{'message':_0x398ee0(0x6f2)}};}catch(_0x47dabd){this[_0x398ee0(0x112)][_0x398ee0(0x4b3)](_0x47dabd);}}async['fetchInstances']({instanceName:_0x1f075f}){const _0x14620d=a0_0x3f352e;return _0x1f075f?this['waMonitor'][_0x14620d(0x7c0)](_0x1f075f):this[_0x14620d(0x4ad)]['instanceInfo']();}async[a0_0x3f352e(0x1f5)]({instanceName:_0x254fb4}){const _0x29c123=a0_0x3f352e;try{return await this[_0x29c123(0x4ad)]['waInstances'][_0x254fb4]?.[_0x29c123(0x3de)]?.[_0x29c123(0x1f5)](_0x29c123(0x4d1)+_0x254fb4),{'error':!0x1,'message':'Instance\x20logged\x20out'};}catch(_0x3ce7c2){throw new x(_0x3ce7c2[_0x29c123(0x123)]());}}async[a0_0x3f352e(0x680)]({instanceName:_0x1f9ca4}){const _0x2e978c=a0_0x3f352e;if((await this['connectionState']({'instanceName':_0x1f9ca4}))[_0x2e978c(0x589)][_0x2e978c(0x4a2)]===_0x2e978c(0x6d3))throw new m([_0x2e978c(0x3ba),'The\x20instance\x20needs\x20to\x20be\x20disconnected']);try{return delete this['waMonitor'][_0x2e978c(0x39e)][_0x1f9ca4],{'error':!0x1,'message':_0x2e978c(0x54f)};}catch(_0x1afbbc){throw new m(_0x1afbbc[_0x2e978c(0x123)]());}}},ie=require(a0_0x3f352e(0x5a6)),Ht=class{constructor(_0x27984e){const _0x37d984=a0_0x3f352e;this[_0x37d984(0x4ad)]=_0x27984e;}async[a0_0x3f352e(0xdd)]({instanceName:_0x22efc4},_0x127787){const _0x687d4e=a0_0x3f352e;return await this['waMonitor'][_0x687d4e(0x39e)][_0x22efc4][_0x687d4e(0x197)](_0x127787);}async[a0_0x3f352e(0x29b)]({instanceName:_0x2f3dab},_0x345d3c){const _0x3b8af6=a0_0x3f352e;return await this[_0x3b8af6(0x4ad)][_0x3b8af6(0x39e)][_0x2f3dab]['menuMessage'](_0x345d3c);}async[a0_0x3f352e(0x63b)]({instanceName:_0x374448},_0x437d93){const _0x82ce92=a0_0x3f352e;if((0x0,ie[_0x82ce92(0x2d0)])(_0x437d93?.[_0x82ce92(0x582)]?.[_0x82ce92(0x207)])&&!_0x437d93?.[_0x82ce92(0x582)]?.[_0x82ce92(0x241)])throw new m(_0x82ce92(0x4cf));if((0x0,ie[_0x82ce92(0x663)])(_0x437d93?.[_0x82ce92(0x582)]?.[_0x82ce92(0x207)])||(0x0,ie[_0x82ce92(0x2d0)])(_0x437d93?.['mediaMessage']?.['media']))return await this[_0x82ce92(0x4ad)][_0x82ce92(0x39e)][_0x374448][_0x82ce92(0x582)](_0x437d93);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x3f352e(0x316)]({instanceName:_0x34fb5f},_0x3b974c){const _0x5014ad=a0_0x3f352e;if((0x0,ie[_0x5014ad(0x663)])(_0x3b974c[_0x5014ad(0x52a)][_0x5014ad(0x763)])||(0x0,ie['isBase64'])(_0x3b974c['stickerMessage'][_0x5014ad(0x763)]))return await this['waMonitor']['waInstances'][_0x34fb5f][_0x5014ad(0x2fd)](_0x3b974c);throw new m(_0x5014ad(0x205));}async[a0_0x3f352e(0x274)]({instanceName:_0x31dcf1},_0x378e13){const _0x2e3d5d=a0_0x3f352e;if((0x0,ie['isURL'])(_0x378e13[_0x2e3d5d(0x6bb)][_0x2e3d5d(0x185)])||(0x0,ie[_0x2e3d5d(0x2d0)])(_0x378e13[_0x2e3d5d(0x6bb)][_0x2e3d5d(0x185)]))return await this[_0x2e3d5d(0x4ad)][_0x2e3d5d(0x39e)][_0x31dcf1][_0x2e3d5d(0x491)](_0x378e13);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x3f352e(0x41d)]({instanceName:_0x37c2b5},_0x5a449c){const _0x27ffb9=a0_0x3f352e;if((0x0,ie[_0x27ffb9(0x2d0)])(_0x5a449c[_0x27ffb9(0x537)][_0x27ffb9(0x582)]?.[_0x27ffb9(0x207)])&&!_0x5a449c[_0x27ffb9(0x537)][_0x27ffb9(0x582)]?.[_0x27ffb9(0x241)])throw new m('For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.');return await this[_0x27ffb9(0x4ad)]['waInstances'][_0x37c2b5][_0x27ffb9(0x537)](_0x5a449c);}async[a0_0x3f352e(0x255)]({instanceName:_0x488ce9},_0x408c23){const _0x295c90=a0_0x3f352e;return await this[_0x295c90(0x4ad)][_0x295c90(0x39e)][_0x488ce9][_0x295c90(0x3a9)](_0x408c23);}async[a0_0x3f352e(0x34d)]({instanceName:_0x15b755},_0x3ea722){const _0x5b9aa2=a0_0x3f352e;return await this[_0x5b9aa2(0x4ad)][_0x5b9aa2(0x39e)][_0x15b755][_0x5b9aa2(0xe4)](_0x3ea722);}async[a0_0x3f352e(0x326)]({instanceName:_0x410810},_0x3b3684){const _0x227d1e=a0_0x3f352e;return await this[_0x227d1e(0x4ad)][_0x227d1e(0x39e)][_0x410810]['listMessage'](_0x3b3684);}async[a0_0x3f352e(0x3f0)]({instanceName:_0x58b985},_0x482981){const _0x1fe0e9=a0_0x3f352e;return await this['waMonitor'][_0x1fe0e9(0x39e)][_0x58b985][_0x1fe0e9(0x1fa)](_0x482981);}async['sendReaction']({instanceName:_0x5c02e0},_0x1459f1){const _0x342074=a0_0x3f352e;if(!_0x1459f1[_0x342074(0x757)][_0x342074(0x4e5)][_0x342074(0x235)](/[^\(\)\w\sà-ú"-\+]+/))throw new m('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this[_0x342074(0x4ad)][_0x342074(0x39e)][_0x5c02e0]['reactionMessage'](_0x1459f1);}async[a0_0x3f352e(0x26a)]({instanceName:_0x42bd80},_0x117c8e){const _0x48285d=a0_0x3f352e;return await this[_0x48285d(0x4ad)][_0x48285d(0x39e)][_0x42bd80][_0x48285d(0xe1)](_0x117c8e);}},xi=require(a0_0x3f352e(0x21e)),Ls=require(a0_0x3f352e(0x3bb)),Kt=class u{constructor(_0x4d3ce1,_0x339b6a,_0x4d4966){const _0x3bc351=a0_0x3f352e;this[_0x3bc351(0x446)]=_0x4d3ce1,this[_0x3bc351(0x4ad)]=_0x339b6a,this[_0x3bc351(0x7be)]=_0x4d4966,this[_0x3bc351(0x112)]=new $(u[_0x3bc351(0x5f4)]);}async['jwt'](_0x53b478){const _0x4a6b19=a0_0x3f352e;let _0x2c0692=this['configService']['get'](_0x4a6b19(0xdc))[_0x4a6b19(0x46c)],_0x25f4fe=(0x0,xi['sign'])({'instanceName':_0x53b478[_0x4a6b19(0x78b)],'apiName':it,'tokenId':(0x0,Ls['v4'])()},_0x2c0692['SECRET'],{'expiresIn':_0x2c0692[_0x4a6b19(0x4c7)],'encoding':_0x4a6b19(0x558),'subject':'g-t'}),_0x2d3ef5=await this[_0x4a6b19(0x7be)][_0x4a6b19(0x554)][_0x4a6b19(0x325)]({'jwt':_0x25f4fe},_0x53b478[_0x4a6b19(0x78b)]);if(_0x2d3ef5['error'])throw this[_0x4a6b19(0x112)][_0x4a6b19(0x4b3)]({'localError':u[_0x4a6b19(0x5f4)]+_0x4a6b19(0x7b3),'error':_0x2d3ef5[_0x4a6b19(0x4b3)]}),new m(_0x4a6b19(0x32e),_0x2d3ef5[_0x4a6b19(0x4b3)]?.['toString']());return{'jwt':_0x25f4fe};}async[a0_0x3f352e(0x6dc)](_0x2d09cb){const _0x5c1235=a0_0x3f352e;let _0xee9045=(0x0,Ls['v4'])()[_0x5c1235(0x6ac)](),_0x1bd674=await this[_0x5c1235(0x7be)][_0x5c1235(0x554)]['create']({'apikey':_0xee9045},_0x2d09cb[_0x5c1235(0x78b)]);if(_0x1bd674[_0x5c1235(0x4b3)])throw this[_0x5c1235(0x112)][_0x5c1235(0x4b3)]({'localError':u[_0x5c1235(0x5f4)]+_0x5c1235(0x7b3),'error':_0x1bd674[_0x5c1235(0x4b3)]}),new m(_0x5c1235(0x32e),_0x1bd674['error']?.[_0x5c1235(0x123)]());return{'apikey':_0xee9045};}async[a0_0x3f352e(0x4f1)](_0x34fe90){const _0x373e96=a0_0x3f352e;let _0x137b3a=this[_0x373e96(0x446)]['get'](_0x373e96(0xdc));return await this[_0x137b3a[_0x373e96(0x355)]](_0x34fe90);}},Qt=class{constructor(_0x399b1b){this['waMonitor']=_0x399b1b;}async['createGroup'](_0x35f856,_0x4b52b8){const _0x3f28a9=a0_0x3f352e;return await this[_0x3f28a9(0x4ad)]['waInstances'][_0x35f856[_0x3f28a9(0x78b)]][_0x3f28a9(0x5ec)](_0x4b52b8);}async[a0_0x3f352e(0x790)](_0x19b230,_0x5c974a){const _0x5a5911=a0_0x3f352e;return await this[_0x5a5911(0x4ad)][_0x5a5911(0x39e)][_0x19b230['instanceName']]['updateGroupPicture'](_0x5c974a);}async['groupDesc'](_0x37ba43,_0x1fc9ac){const _0x156204=a0_0x3f352e;return await this[_0x156204(0x4ad)][_0x156204(0x39e)][_0x37ba43[_0x156204(0x78b)]][_0x156204(0x3f1)](_0x1fc9ac);}async['groupName'](_0x1ffcd6,_0x46c845){const _0x50e973=a0_0x3f352e;return await this[_0x50e973(0x4ad)][_0x50e973(0x39e)][_0x1ffcd6[_0x50e973(0x78b)]][_0x50e973(0x557)](_0x46c845);}async[a0_0x3f352e(0x149)](_0xc43be6,_0x225c23){const _0x1740de=a0_0x3f352e;return await this['waMonitor']['waInstances'][_0xc43be6[_0x1740de(0x78b)]][_0x1740de(0x149)](_0x225c23);}async[a0_0x3f352e(0x3aa)](_0x56c942,_0x3f7a30){const _0x2c81f1=a0_0x3f352e;return await this[_0x2c81f1(0x4ad)][_0x2c81f1(0x39e)][_0x56c942[_0x2c81f1(0x78b)]][_0x2c81f1(0x3aa)](_0x3f7a30);}async['findGroupInfo'](_0x50fa5e,_0x462736){const _0x49dadc=a0_0x3f352e;return await this[_0x49dadc(0x4ad)][_0x49dadc(0x39e)][_0x50fa5e[_0x49dadc(0x78b)]][_0x49dadc(0x615)](_0x462736);}async['findGroups'](_0x5bcd37){const _0x434b43=a0_0x3f352e;return await this[_0x434b43(0x4ad)][_0x434b43(0x39e)][_0x5bcd37[_0x434b43(0x78b)]][_0x434b43(0x5df)]();}async[a0_0x3f352e(0x1b6)](_0x3a1b48,_0x32a5cc){const _0x1fc17a=a0_0x3f352e;return await this[_0x1fc17a(0x4ad)]['waInstances'][_0x3a1b48[_0x1fc17a(0x78b)]][_0x1fc17a(0x1b6)](_0x32a5cc);}async['joinGroup'](_0x2a085f,_0x37b6bb){const _0x5d4c7c=a0_0x3f352e;return await this[_0x5d4c7c(0x4ad)]['waInstances'][_0x2a085f[_0x5d4c7c(0x78b)]]['joinGroup'](_0x37b6bb);}async['groupGetInviteInfo'](_0x34f3f1,_0x50fc44){const _0x5dc9c0=a0_0x3f352e;return await this[_0x5dc9c0(0x4ad)][_0x5dc9c0(0x39e)][_0x34f3f1['instanceName']][_0x5dc9c0(0x483)](_0x50fc44);}async[a0_0x3f352e(0x57d)](_0x396e2b,_0x252f2e){const _0x5750d6=a0_0x3f352e;return await this[_0x5750d6(0x4ad)][_0x5750d6(0x39e)][_0x396e2b[_0x5750d6(0x78b)]]['revokeInviteCode'](_0x252f2e);}async[a0_0x3f352e(0x253)](_0x110a87,_0x40c852){const _0x1c9863=a0_0x3f352e;return await this[_0x1c9863(0x4ad)][_0x1c9863(0x39e)][_0x110a87['instanceName']]['findParticipants'](_0x40c852);}async['updateGParticipate'](_0x36cc27,_0x3a2d12){const _0x105c8b=a0_0x3f352e;return await this[_0x105c8b(0x4ad)][_0x105c8b(0x39e)][_0x36cc27[_0x105c8b(0x78b)]]['updateGParticipant'](_0x3a2d12);}async[a0_0x3f352e(0xe2)](_0x327df3,_0x19c6f4){const _0x231b51=a0_0x3f352e;return await this[_0x231b51(0x4ad)]['waInstances'][_0x327df3[_0x231b51(0x78b)]][_0x231b51(0xe2)](_0x19c6f4);}async['leaveGroup'](_0x1e88cf,_0x10a8a){const _0x11fcd5=a0_0x3f352e;return await this[_0x11fcd5(0x4ad)][_0x11fcd5(0x39e)][_0x1e88cf[_0x11fcd5(0x78b)]]['leaveGroup'](_0x10a8a);}},Yt=class{constructor(_0x59117a){const _0x360277=a0_0x3f352e;this[_0x360277(0x4ad)]=_0x59117a;}['create'](_0xc0c9d8,_0x1415e5){const _0x13023d=a0_0x3f352e;return this['waMonitor'][_0x13023d(0x39e)][_0xc0c9d8[_0x13023d(0x78b)]][_0x13023d(0x685)](_0x1415e5);}async[a0_0x3f352e(0x71f)](_0x310f48){const _0x319d7f=a0_0x3f352e;try{return await this[_0x319d7f(0x4ad)][_0x319d7f(0x39e)][_0x310f48['instanceName']][_0x319d7f(0x2b8)]();}catch{return{'enabled':null,'url':''};}}},Vp=new $('FlowController'),Xt=class{constructor(_0x27cee5){const _0x158a0c=a0_0x3f352e;this[_0x158a0c(0x4ad)]=_0x27cee5;}async['editScheduleMessage'](_0x1b905c,_0x48693b){const _0x3c6d9d=a0_0x3f352e;return await this[_0x3c6d9d(0x4ad)]['waInstances'][_0x1b905c[_0x3c6d9d(0x78b)]][_0x3c6d9d(0x36c)](_0x48693b);}async[a0_0x3f352e(0x2c6)](_0x381466){const _0x480a83=a0_0x3f352e;return await this[_0x480a83(0x4ad)][_0x480a83(0x39e)][_0x381466[_0x480a83(0x78b)]]['getScheduleMessage']();}async[a0_0x3f352e(0x484)](_0x297b3f){const _0x494833=a0_0x3f352e;return await this[_0x494833(0x4ad)]['waInstances'][_0x297b3f['instanceName']][_0x494833(0x484)]();}async[a0_0x3f352e(0x444)](_0x434d56){const _0x5006a3=a0_0x3f352e;return await this[_0x5006a3(0x4ad)][_0x5006a3(0x39e)][_0x434d56['instanceName']][_0x5006a3(0x444)]();}async['updateAgent'](_0x3e779d,_0x14462f){const _0x2c2f66=a0_0x3f352e;return await this[_0x2c2f66(0x4ad)][_0x2c2f66(0x39e)][_0x3e779d[_0x2c2f66(0x78b)]][_0x2c2f66(0x141)](_0x14462f);}async['updateCustomFields'](_0x4dc6a7,_0xc0d802){const _0x18f3fc=a0_0x3f352e;return await this[_0x18f3fc(0x4ad)][_0x18f3fc(0x39e)][_0x4dc6a7[_0x18f3fc(0x78b)]][_0x18f3fc(0x248)](_0xc0d802);}async['updateAutoCompleteMessages'](_0x24d4fe,_0x6ab563){const _0x1a1bd6=a0_0x3f352e;return await this[_0x1a1bd6(0x4ad)][_0x1a1bd6(0x39e)][_0x24d4fe[_0x1a1bd6(0x78b)]][_0x1a1bd6(0x202)](_0x6ab563);}async[a0_0x3f352e(0x6de)](_0x586f06,_0x1a6ee0){const _0x2d7e36=a0_0x3f352e;return await this[_0x2d7e36(0x4ad)][_0x2d7e36(0x39e)][_0x586f06[_0x2d7e36(0x78b)]]['updateFlowConfig'](_0x1a6ee0);}async[a0_0x3f352e(0x32a)](_0x636eff,_0x443b06){const _0x48df75=a0_0x3f352e;return await this[_0x48df75(0x4ad)]['waInstances'][_0x636eff['instanceName']][_0x48df75(0x32a)](_0x443b06);}async[a0_0x3f352e(0x674)](_0x5873ea,_0x34e123,_0x326d67,_0x449e5e){const _0x587484=a0_0x3f352e;return await this[_0x587484(0x4ad)][_0x587484(0x39e)][_0x5873ea]['startFlowWebhook'](_0x34e123,_0x326d67,_0x449e5e);}async[a0_0x3f352e(0x7c5)](_0x34e3b1,_0x949480){const _0x6ae048=a0_0x3f352e;return await this['waMonitor'][_0x6ae048(0x39e)][_0x34e3b1[_0x6ae048(0x78b)]][_0x6ae048(0x7c5)](_0x949480);}async[a0_0x3f352e(0x2ce)](_0xff2edc,_0x211203){const _0x89d789=a0_0x3f352e;return await this[_0x89d789(0x4ad)][_0x89d789(0x39e)][_0xff2edc['instanceName']][_0x89d789(0x2ce)](_0x211203);}async['editConversation'](_0x9fcbce,_0x263361){const _0x4529b9=a0_0x3f352e;return await this[_0x4529b9(0x4ad)]['waInstances'][_0x9fcbce[_0x4529b9(0x78b)]][_0x4529b9(0x55b)](_0x263361);}async['deleteConversation'](_0x7c592f,_0xbfc68d){const _0x430891=a0_0x3f352e;return await this[_0x430891(0x4ad)][_0x430891(0x39e)][_0x7c592f[_0x430891(0x78b)]]['deleteConversation'](_0xbfc68d);}async[a0_0x3f352e(0x73e)](_0x101e25,_0x158a60){const _0x18b331=a0_0x3f352e;return await this[_0x18b331(0x4ad)][_0x18b331(0x39e)][_0x101e25[_0x18b331(0x78b)]][_0x18b331(0x73e)](_0x158a60[_0x18b331(0x68d)]);}async['createFlow'](_0x26a45f,_0x4f79df,_0x5b4014){const _0x4b9ace=a0_0x3f352e;return await this['waMonitor'][_0x4b9ace(0x39e)][_0x26a45f[_0x4b9ace(0x78b)]][_0x4b9ace(0x6cd)](_0x4f79df,_0x5b4014);}async[a0_0x3f352e(0x110)](_0x1062b9,_0x29345f,_0x4eb966){const _0x190d09=a0_0x3f352e;return await this[_0x190d09(0x4ad)]['waInstances'][_0x1062b9[_0x190d09(0x78b)]][_0x190d09(0x110)](_0x29345f,_0x4eb966);}async[a0_0x3f352e(0x5d2)](_0x3f32af,_0x4935dc){const _0x1f6b06=a0_0x3f352e;return await this[_0x1f6b06(0x4ad)][_0x1f6b06(0x39e)][_0x3f32af[_0x1f6b06(0x78b)]]['editFlowBlock'](_0x4935dc);}async[a0_0x3f352e(0x34f)](_0x11f8ee,_0x5c085e){const _0x4bb253=a0_0x3f352e;return await this[_0x4bb253(0x4ad)][_0x4bb253(0x39e)][_0x11f8ee[_0x4bb253(0x78b)]][_0x4bb253(0x34f)](_0x5c085e);}async['editFlowGroup'](_0x2d7b88,_0x65f63e){const _0x1c072f=a0_0x3f352e;return await this[_0x1c072f(0x4ad)][_0x1c072f(0x39e)][_0x2d7b88[_0x1c072f(0x78b)]][_0x1c072f(0x5e0)](_0x65f63e);}async[a0_0x3f352e(0x683)](_0x243cac,_0xb4c795){const _0x1a15c6=a0_0x3f352e;return await this['waMonitor'][_0x1a15c6(0x39e)][_0x243cac[_0x1a15c6(0x78b)]][_0x1a15c6(0x683)](_0xb4c795);}async[a0_0x3f352e(0x673)](_0xe19323,_0x489e66){const _0x4d5482=a0_0x3f352e;return await this[_0x4d5482(0x4ad)]['waInstances'][_0xe19323[_0x4d5482(0x78b)]][_0x4d5482(0x673)](_0x489e66);}async['editFlowVariable'](_0x3cbe56,_0x4b814e){const _0x89d764=a0_0x3f352e;return await this[_0x89d764(0x4ad)]['waInstances'][_0x3cbe56[_0x89d764(0x78b)]][_0x89d764(0x2b1)](_0x4b814e);}async[a0_0x3f352e(0x21f)](_0x481273,_0x17885e){const _0x38cffe=a0_0x3f352e;return await this[_0x38cffe(0x4ad)]['waInstances'][_0x481273[_0x38cffe(0x78b)]][_0x38cffe(0x21f)](_0x17885e);}async[a0_0x3f352e(0x1b3)](_0x4d87cf){const _0x1d77fc=a0_0x3f352e;return await this[_0x1d77fc(0x4ad)][_0x1d77fc(0x39e)][_0x4d87cf[_0x1d77fc(0x78b)]][_0x1d77fc(0x1b3)]();}},Zt=class{constructor(_0x5a2afb){const _0x34b3dc=a0_0x3f352e;this[_0x34b3dc(0x5dd)]=_0x5a2afb;}async[a0_0x3f352e(0xd7)](_0x2576a3,_0x2fc536){const _0x23f47e=a0_0x3f352e;return this[_0x23f47e(0x5dd)]['create'](_0x2576a3,_0x2fc536);}async['findWebhook'](_0x5538b1){const _0x2522fb=a0_0x3f352e;return this[_0x2522fb(0x5dd)][_0x2522fb(0x71f)](_0x5538b1);}},es=class extends _{constructor(_0x1516c0,_0x179417){const _0x473aad=a0_0x3f352e;super(_0x179417),this[_0x473aad(0x1a6)]=_0x1516c0,this[_0x473aad(0x446)]=_0x179417;}async[a0_0x3f352e(0x325)](_0x1f1e7c,_0x3662bd){const _0x64d273=a0_0x3f352e;try{return this[_0x64d273(0x13f)][_0x64d273(0x681)]?{'insertCount':(await this[_0x64d273(0x1a6)][_0x64d273(0x517)]({'_id':_0x3662bd},{..._0x1f1e7c},{'upsert':!0x0}))[_0x64d273(0x1f4)]}:{'insertCount':0x1};}catch(_0x159553){return _0x159553;}}async['delete'](_0x298e60){const _0x111dc7=a0_0x3f352e;try{if(this[_0x111dc7(0x13f)][_0x111dc7(0x681)]){await this[_0x111dc7(0x1a6)]['deleteOne']({'_id':_0x298e60});return;}}catch(_0x155ed9){return{'error':_0x155ed9};}}async[a0_0x3f352e(0x71f)](_0x429540){const _0x268582=a0_0x3f352e;try{if(this[_0x268582(0x13f)][_0x268582(0x681)])return await this[_0x268582(0x1a6)][_0x268582(0x312)]({'_id':_0x429540});}catch{return{};}}},ts=class extends _{constructor(_0x1a9e03,_0x1ad138){const _0x3430af=a0_0x3f352e;super(_0x1ad138),this[_0x3430af(0x660)]=_0x1a9e03,this['configService']=_0x1ad138,this[_0x3430af(0x554)]=_0x1ad138[_0x3430af(0x427)](_0x3430af(0xdc));}async[a0_0x3f352e(0x325)](_0x188b0c,_0x18d4ee){const _0x5f8028=a0_0x3f352e;try{if(this[_0x5f8028(0x13f)]['ENABLED'])return{'insertCount':(await this['authModel'][_0x5f8028(0x372)]({'_id':_0x18d4ee},{'$set':{..._0x188b0c}},{'upsert':!0x0}))[_0x5f8028(0x1f4)]};}catch(_0x56497f){return{'error':_0x56497f};}}async['updateAll'](_0x139b30,_0x4d2311){const _0x36a9d9=a0_0x3f352e;try{if(this[_0x36a9d9(0x13f)]['ENABLED'])return{'insertCount':(await this[_0x36a9d9(0x660)]['updateMany'](_0x139b30,{'$set':_0x4d2311},{'upsert':!0x1}))[_0x36a9d9(0x1f4)]};throw new Error(_0x36a9d9(0x22e));}catch(_0x43b176){return{'error':_0x43b176};}}async[a0_0x3f352e(0x3f9)](_0x2becaa){const _0x3c3b0f=a0_0x3f352e;try{if(this[_0x3c3b0f(0x13f)]['ENABLED'])return{'insertCount':(await this[_0x3c3b0f(0x660)][_0x3c3b0f(0x3f9)](_0x2becaa))[_0x3c3b0f(0x329)]};throw new Error(_0x3c3b0f(0x341));}catch(_0x4c6367){return{'error':_0x4c6367};}}async[a0_0x3f352e(0x49b)](_0x1f796e){const _0xd6256c=a0_0x3f352e;try{if(this[_0xd6256c(0x13f)][_0xd6256c(0x681)]){await this[_0xd6256c(0x660)][_0xd6256c(0xe9)]({'_id':_0x1f796e});return;}}catch(_0x39dc57){return{'error':_0x39dc57};}}async[a0_0x3f352e(0x71f)](_0x4e27ac){const _0x35f9a6=a0_0x3f352e;try{if(this[_0x35f9a6(0x13f)]['ENABLED'])return await this[_0x35f9a6(0x660)][_0x35f9a6(0x312)]({'_id':_0x4e27ac});}catch{return{};}}async['findAll'](){const _0x412205=a0_0x3f352e;try{if(this[_0x412205(0x13f)][_0x412205(0x681)])return await this['authModel']['find']();}catch{return[];}}async[a0_0x3f352e(0x4ee)](_0x345c5c){const _0x5cf616=a0_0x3f352e;try{if(this[_0x5cf616(0x13f)][_0x5cf616(0x681)])return await this[_0x5cf616(0x660)][_0x5cf616(0x71f)](_0x345c5c);}catch{return[];}}},ss=class extends _{async[a0_0x3f352e(0xe9)](_0x1a5aea){const _0x451aa8=a0_0x3f352e;try{let _0x6eda0a=I(_0x1a5aea[_0x451aa8(0x56d)]);return{'deletedCount':(await Me[_0x451aa8(0xe9)](_0x6eda0a))[_0x451aa8(0x329)]};}catch(_0xbd536e){return{'error':_0xbd536e?.[_0x451aa8(0x123)]()};}}async[a0_0x3f352e(0x372)](_0x3f9db0,_0x2a81fa){const _0x108658=a0_0x3f352e;try{let _0x2a9930=await Me[_0x108658(0x69b)](_0x3f9db0);return _0x2a9930?(Object[_0x108658(0x4ce)](_0x2a9930,_0x2a81fa),await _0x2a9930[_0x108658(0x5b5)]()):(console[_0x108658(0x4b3)](_0x108658(0x15f),_0x3f9db0),null);}catch(_0x55e8eb){return console[_0x108658(0x4b3)](_0x108658(0x4fe),_0x55e8eb),null;}}async[a0_0x3f352e(0x3e9)](_0x1e705e){const _0x1d8817=a0_0x3f352e;try{return await new Me(_0x1e705e)[_0x1d8817(0x5b5)]();}catch(_0x25cff8){return console['error']('Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:',_0x25cff8),null;}}async[a0_0x3f352e(0x58d)](_0xc2b98){const _0x2215e4=a0_0x3f352e;try{let _0x596970=_0xc2b98[_0x2215e4(0x56d)]??{};return await Me['find'](_0x596970)[_0x2215e4(0x518)](_0xc2b98[_0x2215e4(0x518)]??0x0)[_0x2215e4(0x684)]();}catch(_0xb44910){return console[_0x2215e4(0x4b3)](_0x2215e4(0x63d),_0xb44910),[];}}async[a0_0x3f352e(0x312)](_0x4af7e0){const _0x24efa5=a0_0x3f352e;try{let _0x5b3ddb=I(_0x4af7e0[_0x24efa5(0x56d)]);return await Me[_0x24efa5(0x312)](_0x5b3ddb)[_0x24efa5(0x684)]();}catch{return null;}}},as=class extends _{[a0_0x3f352e(0x3c3)](_0x263046){return ya(_0x263046);}async['insert'](_0x23131e){const _0x24440f=a0_0x3f352e;if(_0x23131e[_0x24440f(0x45c)]!==0x0)try{return{'insertCount':(await this[_0x24440f(0x3c3)](_0x23131e[0x0]['owner'])[_0x24440f(0x190)]([..._0x23131e]))[_0x24440f(0x45c)]};}catch(_0x20cfc6){return _0x20cfc6;}}async['delete'](_0x2d7228,_0x1afc2f){const _0x12a36a=a0_0x3f352e;try{let _0x4dd679=this[_0x12a36a(0x3c3)](_0x1afc2f),_0x1916bc=I(_0x2d7228['where']);return{'deletedCount':(await _0x4dd679[_0x12a36a(0x3f9)](_0x1916bc))[_0x12a36a(0x329)]};}catch(_0x3a3857){return{'error':_0x3a3857?.['toString']()};}}async[a0_0x3f352e(0xe9)](_0x58217e,_0x2e5e4e){const _0x204287=a0_0x3f352e;try{let _0x25fe0a=this[_0x204287(0x3c3)](_0x2e5e4e),_0x565f20=I(_0x58217e[_0x204287(0x56d)]);return{'deletedCount':(await _0x25fe0a[_0x204287(0xe9)](_0x565f20))[_0x204287(0x329)]};}catch(_0x496d23){return{'error':_0x496d23?.[_0x204287(0x123)]()};}}async['update'](_0x42ad39,_0x4c47fa){const _0x4a06c9=a0_0x3f352e;try{if(_0x42ad39[_0x4a06c9(0x45c)]===0x0)return;let _0x2e0aef=this['getConversationModelForOwner'](_0x4c47fa),_0x586802=_0x42ad39[_0x4a06c9(0xff)](_0x662691=>({'updateOne':{'filter':{'name':_0x662691[_0x4a06c9(0x5f4)],'owner':_0x4c47fa},'update':{..._0x662691}}})),{modifiedCount:_0x26e3c0}=await _0x2e0aef[_0x4a06c9(0x48e)](_0x586802);return{'insertCount':_0x26e3c0};}catch{return;}}async[a0_0x3f352e(0x4b0)](_0x19831e,_0x239b6f,_0x46678b){const _0x44b3a8=a0_0x3f352e;try{return{'modifiedCount':(await this[_0x44b3a8(0x3c3)](_0x46678b)['updateMany'](_0x19831e,{'$set':_0x239b6f})['exec']())[_0x44b3a8(0x1f4)]};}catch(_0x15f61f){return console[_0x44b3a8(0x4b3)](_0x44b3a8(0x606),_0x15f61f),{'error':_0x15f61f};}}async['updateOne'](_0x47f66a,_0x1f41d1,_0x40e61e){const _0x44f195=a0_0x3f352e;try{return await this['getConversationModelForOwner'](_0x40e61e)[_0x44f195(0x76e)]({'_id':_0x47f66a},{'$set':_0x1f41d1},{'new':!0x0,'upsert':!0x0})[_0x44f195(0x684)]();}catch(_0x29b941){return console[_0x44f195(0x4b3)](_0x29b941),null;}}async[a0_0x3f352e(0x71f)](_0x359b82,_0x51fef4){const _0x248d4d=a0_0x3f352e;try{return await this[_0x248d4d(0x3c3)](_0x51fef4)[_0x248d4d(0x71f)](_0x359b82)[_0x248d4d(0x344)]({'lastInteraction':-0x1})[_0x248d4d(0x684)]();}catch{return[];}}async[a0_0x3f352e(0x312)](_0x238ef7,_0x24a343){const _0x179120=a0_0x3f352e;try{return await this[_0x179120(0x3c3)](_0x24a343)['findOne']({..._0x238ef7[_0x179120(0x56d)]})[_0x179120(0x684)]();}catch{return null;}}async[a0_0x3f352e(0x695)](_0x57162e){const _0x2d8790=a0_0x3f352e;try{return await this['getConversationModelForOwner'](_0x57162e)[_0x2d8790(0x48b)][_0x2d8790(0x4f0)](),{'success':!0x0};}catch(_0x32e387){return console[_0x2d8790(0x4b3)](_0x32e387),{'success':!0x1,'error':_0x32e387};}}},is=class extends _{[a0_0x3f352e(0x3ca)](_0x3bbc5a){return ba(_0x3bbc5a);}async['bulkWrite'](_0x56e8e4,_0x3cac45){const _0x311663=a0_0x3f352e;try{return await this['getScheduleMessageModelForOwner'](_0x3cac45)[_0x311663(0x48e)](_0x56e8e4);}catch(_0x307399){return console['error'](_0x311663(0x285),_0x307399),null;}}async[a0_0x3f352e(0x3e9)](_0x2b245d,_0x3603eb){const _0x3ee954=a0_0x3f352e;try{let _0x5e9081=this[_0x3ee954(0x3ca)](_0x3603eb);return await new _0x5e9081(_0x2b245d)['save']();}catch(_0x58f076){return console[_0x3ee954(0x4b3)]('Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:',_0x58f076),null;}}async[a0_0x3f352e(0xe9)](_0x5ef458,_0x57bb8a){const _0x1ff8c6=a0_0x3f352e;try{return await this[_0x1ff8c6(0x3ca)](_0x57bb8a)[_0x1ff8c6(0x4f2)](_0x5ef458),{};}catch(_0x2e29d1){return{'error':_0x2e29d1?.['toString']()};}}async['updateOne'](_0x5c7cf4,_0x354ae8,_0x1bd900,_0x32d0b3={}){const _0xaf221d=a0_0x3f352e;try{return await this[_0xaf221d(0x3ca)](_0x1bd900)['findOneAndUpdate'](_0x5c7cf4,_0x354ae8,{..._0x32d0b3,'new':!0x0})['lean']();}catch(_0x579a52){return console[_0xaf221d(0x4b3)](_0xaf221d(0x5a5),_0x579a52),null;}}async[a0_0x3f352e(0x31d)](_0xa2e533,_0x3543e0,_0x2fe301){const _0x6b220c=a0_0x3f352e;try{return await this[_0x6b220c(0x3ca)](_0x2fe301)[_0x6b220c(0x140)](_0xa2e533,_0x3543e0,{'new':!0x0})[_0x6b220c(0x684)]();}catch(_0x5ae5de){return console[_0x6b220c(0x4b3)](_0x6b220c(0x5a5),_0x5ae5de),null;}}async[a0_0x3f352e(0x71f)](_0x26fdd8,_0x53d2de){const _0x1b27a8=a0_0x3f352e;try{return await this[_0x1b27a8(0x3ca)](_0x53d2de)[_0x1b27a8(0x71f)](_0x26fdd8['where'])[_0x1b27a8(0x518)](_0x26fdd8?.[_0x1b27a8(0x518)]??0x0)[_0x1b27a8(0x344)]({'when':0x1})[_0x1b27a8(0x684)]();}catch{return[];}}async[a0_0x3f352e(0x312)](_0x376622,_0x360637){const _0x379707=a0_0x3f352e;try{return await this[_0x379707(0x3ca)](_0x360637)['findOne'](_0x376622[_0x379707(0x56d)])[_0x379707(0x344)]({'when':0x1})[_0x379707(0x684)]();}catch{return null;}}async[a0_0x3f352e(0x69b)](_0x41f2b2,_0x573411){const _0x5a4862=a0_0x3f352e;try{return await this[_0x5a4862(0x3ca)](_0x573411)['findById'](_0x41f2b2)['lean']();}catch{return null;}}async[a0_0x3f352e(0x3f9)](_0xf9a136,_0x136395){const _0x1c3f04=a0_0x3f352e;try{return{'deletedCount':(await this[_0x1c3f04(0x3ca)](_0x136395)[_0x1c3f04(0x3f9)](_0xf9a136))[_0x1c3f04(0x329)]};}catch(_0x553e89){return console[_0x1c3f04(0x4b3)](_0x1c3f04(0x7aa),_0x553e89),{'error':_0x553e89};}}async[a0_0x3f352e(0x695)](_0x15d82b){const _0x6509a3=a0_0x3f352e;try{return await this[_0x6509a3(0x3ca)](_0x15d82b)['collection'][_0x6509a3(0x4f0)](),{'success':!0x0};}catch(_0x4885ce){return console[_0x6509a3(0x4b3)](_0x4885ce),{'success':!0x1,'error':_0x4885ce};}}},os=class extends _{async[a0_0x3f352e(0x6c1)](_0x433127,_0x1440d3){const _0x45b3f1=a0_0x3f352e;try{if(this['dbSettings'][_0x45b3f1(0x681)])return await Ie['findOneAndUpdate']({'_id':_0x1440d3},{'$set':_0x433127},{'new':!0x0});}catch(_0x5585eb){throw console['error']('Erro\x20ao\x20atualizar\x20AutomateSystem:',_0x5585eb),_0x5585eb;}}async[a0_0x3f352e(0x3b3)](_0x22544e){const _0x4f4e2c=a0_0x3f352e;try{let _0x481a6c=await Ie['findById'](_0x22544e);return _0x481a6c?_0x481a6c[_0x4f4e2c(0x78c)]||(_0x481a6c[_0x4f4e2c(0x78c)]=[],await _0x481a6c['save']()):(_0x481a6c=new Ie({'_id':_0x22544e,'autoCompleteMessages':[]}),await _0x481a6c['save']()),_0x481a6c;}catch(_0x2062cf){return _0x2062cf[_0x4f4e2c(0x3ec)]===0x2af8&&_0x2062cf[_0x4f4e2c(0x6f3)]&&_0x2062cf[_0x4f4e2c(0x6f3)][_0x4f4e2c(0x5f5)]?(console['error'](_0x4f4e2c(0x5e3)),await Ie[_0x4f4e2c(0x48b)][_0x4f4e2c(0x17f)](_0x4f4e2c(0x31e)),null):(console[_0x4f4e2c(0x4b3)](_0x4f4e2c(0x4ef),_0x2062cf),null);}}},Fo=new $(a0_0x3f352e(0x288)),Uo=new Ke(S),jo=new qt(S),Jo=new rt(S),qo=new Vt(aa,S),Vo=new es(da,S),Go=new ts(ca,S),Bo=new ve(Be,S),Wo=new ss(S),zo=new Gt(S),Ho=new as(S),Ko=new is(S),Qo=new os(S),me=new ze(Uo,jo,Jo,qo,Vo,Go,Bo,Wo,Ho,zo,Ko,Qo,R?.[a0_0x3f352e(0x4b1)]()),G=new Jt(hs,S,me),Yo=new Kt(S,G,me),Xo=new Yt(G),$s=new Zt(Xo),O=new Xt(G),ue=new zt(G,S,me,hs,Yo),B=new Ht(G),P=new Bt(G),q=new Qt(G);function a0_0x1206(_0x4b48a9,_0xe10849){const _0x26ed10=a0_0x26ed();return a0_0x1206=function(_0x1206f8,_0x198b2f){_0x1206f8=_0x1206f8-0xa1;let _0x4003be=_0x26ed10[_0x1206f8];return _0x4003be;},a0_0x1206(_0x4b48a9,_0xe10849);}Fo[a0_0x3f352e(0x567)](a0_0x3f352e(0x160));var rg=require('express-async-errors'),Fs=require('fs'),Di=A(require('https')),Pi=A(require(a0_0x3f352e(0x17b))),Ue=class u{static #e;static set[a0_0x3f352e(0x358)](_0x5329dd){this.#e=_0x5329dd;}static get[a0_0x3f352e(0x535)](){const _0x4198e8=a0_0x3f352e;let {FULLCHAIN:_0xf1be18,PRIVKEY:_0xc3e90a}=S[_0x4198e8(0x427)](_0x4198e8(0x549));return Di[_0x4198e8(0x778)]({'cert':(0x0,Fs[_0x4198e8(0x3a4)])(_0xf1be18),'key':(0x0,Fs['readFileSync'])(_0xc3e90a)},u.#e);}static get[a0_0x3f352e(0x17b)](){const _0x41f28a=a0_0x3f352e;return Pi[_0x41f28a(0x778)](u.#e);}},je=A(require('fs')),Ji=A(require(a0_0x3f352e(0x737))),Je=A(require(a0_0x3f352e(0x27f))),ns=A(require(a0_0x3f352e(0x17a))),rs=require('child_process');function Zo(){const _0x5227dc=a0_0x3f352e;G[_0x5227dc(0x556)]();let _0x56c89d=ns['default'][_0x5227dc(0x348)](__dirname,_0x5227dc(0x45a));ji(_0x56c89d);}var ji=_0x5b0f78=>{const _0x2b2da8=a0_0x3f352e;let _0x445500=je[_0x2b2da8(0x164)][_0x2b2da8(0x7a4)](_0x5b0f78),_0x4365da=0xc*0x3c*0x3c*0x3e8,_0x5ab61e=0x2*0x3c*0x3c*0x3e8,_0x2a86a8=new Date()['getTime']();_0x445500[_0x2b2da8(0x62c)](_0x52e69f=>{const _0x3be8ad=_0x2b2da8;let _0x1a8743=ns['default']['join'](_0x5b0f78,_0x52e69f),_0x53bb21=je[_0x3be8ad(0x164)][_0x3be8ad(0x5fc)](_0x1a8743)[_0x3be8ad(0x2e7)][_0x3be8ad(0x154)]();_0x2a86a8-_0x53bb21>_0x4365da&&(je[_0x3be8ad(0x164)][_0x3be8ad(0x478)](_0x1a8743),console['log']('Deleted\x20'+_0x52e69f));}),setTimeout(()=>ji(_0x5b0f78),_0x5ab61e);};function er(){const _0x2e7524=a0_0x3f352e;let _0x2eec91=new $(_0x2e7524(0x597)),_0x437be4=(0x0,we[_0x2e7524(0x164)])();_0x437be4['use']((0x0,Ui[_0x2e7524(0x164)])({'origin'(_0xc063e0,_0x541b70){const _0x143e0a=_0x2e7524;let {ORIGIN:_0x29789f}=S['get'](_0x143e0a(0x36a));return _0xc063e0||(_0xc063e0='*'),_0x29789f[_0x143e0a(0x368)]('*')!==-0x1||_0x29789f['indexOf'](_0xc063e0)!==-0x1?_0x541b70(null,!0x0):_0x541b70(new Error(_0x143e0a(0xa3)));},'methods':[...S[_0x2e7524(0x427)](_0x2e7524(0x36a))[_0x2e7524(0x1c6)]],'credentials':S[_0x2e7524(0x427)]('CORS')[_0x2e7524(0x10c)]}),(0x0,we['urlencoded'])({'extended':!0x0,'limit':'50mb'}),(0x0,we[_0x2e7524(0x17c)])({'limit':_0x2e7524(0x4ca)})),_0x437be4[_0x2e7524(0x509)]((_0x501f25,_0x49cbeb,_0x3977aa)=>{const _0x512435=_0x2e7524;_0x501f25[_0x512435(0x17a)][_0x512435(0x77f)]('/events')?_0x3977aa():(0x0,Fi[_0x512435(0x164)])()(_0x501f25,_0x49cbeb,_0x3977aa);}),_0x437be4[_0x2e7524(0x782)](_0x2e7524(0x400),_0x2e7524(0x64b)),_0x437be4[_0x2e7524(0x782)](_0x2e7524(0x4ea),(0x0,js[_0x2e7524(0x348)])(ne,_0x2e7524(0x4ea))),_0x437be4[_0x2e7524(0x509)](we[_0x2e7524(0x164)]['static']((0x0,js[_0x2e7524(0x348)])(ne,_0x2e7524(0x7b0)))),_0x437be4['use']((_0x1960f6,_0x141a58,_0x44e5e4)=>{const _0x50104c=_0x2e7524;let _0x5bc22a=_0x141a58['send'];_0x141a58[_0x50104c(0x5f8)]=function(_0xe4173f){const _0x2932b9=_0x50104c;if(_0x1960f6[_0x2932b9(0x175)][_0x2932b9(0x5fa)]===_0x2932b9(0xf3)||_0x1960f6[_0x2932b9(0x450)][_0x2932b9(0x7e9)]===_0x2932b9(0xf3)){let _0x2e7362=JSON['parse'](_0xe4173f);_0xe4173f=JSON[_0x2932b9(0x1bb)](_0x9014c3(_0x2e7362));}return _0x5bc22a[_0x2932b9(0x53a)](_0x141a58,[_0xe4173f]);},_0x44e5e4();}),_0x437be4[_0x2e7524(0x509)]('/',ke),_0x437be4[_0x2e7524(0x509)]((_0x398136,_0x1c46c0,_0x202a47,_0x3b9177)=>{const _0x3fcd2c=_0x2e7524;if(_0x398136)return _0x202a47[_0x3fcd2c(0x62a)](_0x398136['status']||0x1f4)['json'](_0x398136);},(_0x30e0bd,_0x27c9c6,_0x43d427)=>{const _0x3681c1=_0x2e7524;let {method:_0x12e782,url:_0x2111cd}=_0x30e0bd;_0x27c9c6[_0x3681c1(0x62a)](0x194)['json']({'status':0x194,'message':_0x3681c1(0x4be)+_0x12e782[_0x3681c1(0x6ac)]()+'\x20'+_0x2111cd,'error':_0x3681c1(0x243)}),_0x43d427();});let _0x9014c3=(_0x4d5c78,_0x2155af='_p_')=>{const _0x1effdf=_0x2e7524;let _0x36aeb8=(_0x3fe141,_0x52dd4f=null,_0x1e85a5=!0x1)=>{const _0x47cfb7=a0_0x1206;let _0x2a6316={};return Object[_0x47cfb7(0x75c)](_0x3fe141)[_0x47cfb7(0x62c)](_0xfa6752=>{const _0x346772=_0x47cfb7;let _0x2b2564=_0x3fe141[_0xfa6752],_0x1fb3bf=''+_0x2155af+_0xfa6752;_0x52dd4f&&!_0x1e85a5&&(_0x1fb3bf=_0x52dd4f+'.'+_0xfa6752),!_0x2b2564&&_0x2b2564!==0x0&&_0x2b2564!==!0x1||typeof _0x2b2564>'u'?_0x2a6316[_0x1fb3bf]=null:typeof _0x2b2564!=_0x346772(0x5a0)&&!Array['isArray'](_0x2b2564)?_0x2a6316[_0x1fb3bf]=_0x2b2564:typeof _0x2b2564=='object'&&!Array[_0x346772(0xae)](_0x2b2564)?_0x2a6316=Object[_0x346772(0x4ce)](_0x2a6316,_0x36aeb8(_0x2b2564,_0x1fb3bf)):Array[_0x346772(0xae)](_0x2b2564)&&(typeof _0x2b2564[0x0]=='object'?(_0x2a6316[_0x1fb3bf]=[],_0x2b2564[_0x346772(0x62c)](_0x22ae08=>{_0x2a6316[_0x1fb3bf]['push'](_0x36aeb8(_0x22ae08,_0x1fb3bf,!0x0));})):_0x2a6316[_0x1fb3bf]=_0x2b2564);}),_0x2a6316;};return Array[_0x1effdf(0xae)](_0x4d5c78)?_0x4d5c78[_0x1effdf(0xff)](_0x3b87bb=>_0x36aeb8(_0x3b87bb)):typeof _0x4d5c78==_0x1effdf(0x5a0)&&_0x4d5c78!==null?_0x36aeb8(_0x4d5c78):{};},_0x26af18=S[_0x2e7524(0x427)](_0x2e7524(0x597));Ue['app']=_0x437be4;let _0x244c0a=Ue[_0x26af18[_0x2e7524(0x355)]],_0x1b033e=_0x2e7524(0x173);_0x244c0a[_0x2e7524(0x758)](_0x26af18['PORT'],()=>{const _0x1e8537=_0x2e7524;_0x2eec91[_0x1e8537(0x133)](_0x1b033e),_0x2eec91[_0x1e8537(0x133)](_0x26af18['TYPE'][_0x1e8537(0x6ac)]()+'\x20-\x20ON:\x20'+_0x26af18[_0x1e8537(0x44a)]);}),Zo(),Ys();}var tr=a0_0x3f352e(0x67e),sr=ns[a0_0x3f352e(0x164)][a0_0x3f352e(0x348)](__dirname,'./.git/config'),Re=null;function ar(){return new Promise((_0x5aa4ff,_0x191b6f)=>{const _0x598b0e=a0_0x1206;je['default']['readFile'](sr,_0x598b0e(0x12d),(_0x144358,_0x453b93)=>{const _0x5b158a=_0x598b0e;if(_0x144358){Re=_0x144358,_0x5aa4ff();return;}Ji[_0x5b158a(0x164)][_0x5b158a(0x4d4)](_0x453b93)['remote\x20\x22origin\x22'][_0x5b158a(0x163)]===tr?(Re=null,_0x5aa4ff()):(Re=new Error('uazapi\x20não\x20está\x20instalado\x20pelo\x20git'),_0x5aa4ff());});});}async function ir(){const _0x14fba0=a0_0x3f352e;try{await ar(),await Js();}catch(_0x4ec3e1){console[_0x14fba0(0x4b3)]('Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20'+_0x4ec3e1),process[_0x14fba0(0x1ec)](0x1);}}ir();async function qi(){const _0x4fe4ba=a0_0x3f352e;let _0x59599d;try{_0x59599d=(await Je[_0x4fe4ba(0x164)]['get'](_0x4fe4ba(0x5ed)))[_0x4fe4ba(0x742)]['ip'];}catch(_0xfb65d6){console[_0x4fe4ba(0x4b3)](_0xfb65d6);try{_0x59599d=(await Je[_0x4fe4ba(0x164)][_0x4fe4ba(0x427)](_0x4fe4ba(0xcc)))[_0x4fe4ba(0x742)]['ip'];}catch(_0x10fcb9){console[_0x4fe4ba(0x4b3)](_0x10fcb9);try{_0x59599d=(await Je[_0x4fe4ba(0x164)][_0x4fe4ba(0x427)](_0x4fe4ba(0x47f)))['data'][_0x4fe4ba(0x235)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x378bf0){return console[_0x4fe4ba(0x4b3)](_0x378bf0),!0x1;}}}return _0x59599d;}var ki=0x0;async function or(){const _0x3cfffd=a0_0x3f352e;let _0x398a55=await new de(S[_0x3cfffd(0x427)](_0x3cfffd(0x5fd)))[_0x3cfffd(0x503)]();return console['log'](_0x3cfffd(0x6d6),_0x398a55['length']),_0x398a55['length'];}function rr(_0xaaef10){const _0x4db46b=a0_0x3f352e;let _0xb1f91f=_0xaaef10[_0x4db46b(0x427)](_0x4db46b(0x597))[_0x4db46b(0x298)],_0x53378b=_0xaaef10[_0x4db46b(0x427)](_0x4db46b(0x549));console[_0x4db46b(0x133)](_0x4db46b(0x12a),_0xb1f91f),console[_0x4db46b(0x133)](_0x4db46b(0x6d8),_0x53378b);let _0x21b055='',_0x58ce59=_0xb1f91f||'';if(_0xb1f91f){let _0x5c6107=_0xb1f91f[_0x4db46b(0x235)](/\/\/(.*?)\./);console[_0x4db46b(0x133)](_0x4db46b(0x672),_0x5c6107),_0x5c6107&&_0x5c6107[0x1]&&(_0x21b055=_0x5c6107[0x1],console[_0x4db46b(0x133)](_0x4db46b(0x5f9),_0x21b055));}if(!_0x21b055&&_0x53378b&&_0x53378b[_0x4db46b(0xbb)]){let _0xdcfc62=_0x53378b[_0x4db46b(0xbb)]['split']('/');console[_0x4db46b(0x133)]('Partes\x20do\x20caminho\x20FULLCHAIN:',_0xdcfc62);let _0x428134=_0xdcfc62[_0xdcfc62['length']-0x2];if(console[_0x4db46b(0x133)](_0x4db46b(0x1b7),_0x428134),_0x428134){let _0x572952=_0x428134[_0x4db46b(0x384)]('.');console[_0x4db46b(0x133)](_0x4db46b(0x351),_0x572952),_0x572952[_0x4db46b(0x45c)]>0x2&&(_0x21b055=_0x572952[0x0],console[_0x4db46b(0x133)](_0x4db46b(0x4d2),_0x21b055),_0x58ce59=''+_0x428134);}}return{'subdomain':_0x21b055||_0x4db46b(0x129),'fullURL':_0x58ce59||_0x4db46b(0xdf)};}var {subdomain:W,fullURL:qs}=rr(S);console['log']('Subdomínio\x20final:',W),console[a0_0x3f352e(0x133)](a0_0x3f352e(0xfa),qs);async function nr(){const _0x743800=a0_0x3f352e;let _0xc6ab1a=S['get'](_0x743800(0x5fd)),_0x3d9986=S[_0x743800(0x427)]('AUTHENTICATION')['API_KEY'][_0x743800(0x785)],_0x23fa94=S[_0x743800(0x427)](_0x743800(0x549)),_0xb15d62=await qi(),_0x29b03e=S[_0x743800(0x427)](_0x743800(0x597))['PORT'],_0x403d59=qs;try{let _0x41d65f={'ip':_0xb15d62||null,'redis_enable':_0xc6ab1a?.[_0x743800(0x681)]||null,'apikey':_0x3d9986||null,'ssl':_0x23fa94?.['PRIVKEY']||null,'lastupdate':Vi||null,'port':_0x29b03e||null,'gitInstallError':Re?.[_0x743800(0x499)]||null,'url':_0x403d59||null,'subdomain':W};if(console[_0x743800(0x133)](_0x743800(0x6a7),_0x41d65f['ip']),_0xc6ab1a&&_0xc6ab1a[_0x743800(0x681)]){let _0x113b38=await or();_0x41d65f[_0x743800(0x793)]=_0x113b38||null;}for(let _0x1c46a8 in _0x41d65f)_0x41d65f[_0x743800(0x6e9)](_0x1c46a8)&&_0x1c46a8!=='ip'&&(_0x41d65f[_0x1c46a8]=JSON[_0x743800(0x1bb)](_0x41d65f[_0x1c46a8]));return(await Je[_0x743800(0x164)]['post']('https://uazapi.bubbleapps.io/api/1.1/wf/verificar/',_0x41d65f))['data'];}catch(_0x496e61){return console[_0x743800(0x4b3)](_0x496e61),!0x1;}}var Us=!0x1,Vi=0x267,cr=0x3,Li=0x1b7740;async function Js(){const _0x51dff9=a0_0x3f352e;let _0x55c4ea='fora\x20do\x20git';Re===null&&(_0x55c4ea=await qi());let _0xc91a72=await nr();if(_0xc91a72){if(_0xc91a72[_0x51dff9(0x7b2)][_0x51dff9(0x6c8)]===!0x0){Re===null&&_0xc91a72['response'][_0x51dff9(0x727)]-Vi>0x0&&await lr(),Us||(Us=!0x0,er());let _0xae1b2b=0x24*0x3c*0x3c,_0x39dbeb=_0xc91a72[_0x51dff9(0x7b2)][_0x51dff9(0x61a)]>_0xae1b2b?_0xae1b2b:_0xc91a72[_0x51dff9(0x7b2)][_0x51dff9(0x61a)],_0x4597af=Number(_0x39dbeb);if(isNaN(_0x4597af)){console[_0x51dff9(0x4b3)](_0x51dff9(0x64a));return;}let _0xf87d8d=Math['floor'](_0x4597af/0xe10),_0x40dd7b=Math[_0x51dff9(0x62b)](_0x4597af%0xe10/0x3c),_0x425735=new Date(Date[_0x51dff9(0x196)]()+_0x4597af*0x3e8);setTimeout(Js,_0x4597af*0x3e8);let _0x4c078c=_0x4e4eb1=>_0x4e4eb1[_0x51dff9(0x123)]()['padStart'](0x2,'0'),_0x42c7c6='Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20'+_0x4c078c(_0xf87d8d)+_0x51dff9(0x3d9)+_0x4c078c(_0x40dd7b)+_0x51dff9(0x1fb)+_0x4c078c(_0x425735[_0x51dff9(0xa4)]())+':'+_0x4c078c(_0x425735[_0x51dff9(0x286)]())+'.';console['log'](_0x42c7c6);}else return console[_0x51dff9(0x133)](_0x51dff9(0x3a1)),Us&&(console[_0x51dff9(0x133)](_0x51dff9(0x2de)),process['exit']()),'LICENSE_INVALID';}else{if(ki++,ki<cr)console['log'](_0x51dff9(0x1ad)+Li/0xea60+_0x51dff9(0x79e)),setTimeout(Js,Li);else return console['error'](_0x51dff9(0x49c)),_0x51dff9(0x2db);}}async function lr(){const _0x553e3c=a0_0x3f352e;console[_0x553e3c(0x133)](_0x553e3c(0x65e)),console[_0x553e3c(0x133)](_0x553e3c(0x79b)),(0x0,rs[_0x553e3c(0x124)])(_0x553e3c(0x54a),{'shell':!0x0})['on']('close',_0x3fc886=>{const _0x2a6c2e=_0x553e3c;_0x3fc886!==0x0?console[_0x2a6c2e(0x4b3)]('Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.'):(console[_0x2a6c2e(0x133)](_0x2a6c2e(0x1c5)),console['log'](_0x2a6c2e(0x1ea)),(0x0,rs[_0x2a6c2e(0x124)])('rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys',{'shell':!0x0})['on'](_0x2a6c2e(0x4b2),_0x485668=>{const _0x119431=_0x2a6c2e;if(_0x485668!==0x0)console[_0x119431(0x4b3)]('Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.');else{console[_0x119431(0x133)](_0x119431(0x146));let _0x588051=(0x0,rs[_0x119431(0x124)])(_0x119431(0x730),{'shell':!0x0});_0x588051[_0x119431(0x72f)]['on'](_0x119431(0x742),_0x445019=>{const _0x3f3492=_0x119431;console[_0x3f3492(0x133)]('Atualização:\x20'+_0x445019);}),_0x588051[_0x119431(0x6df)]['on'](_0x119431(0x742),_0xf92960=>{const _0x582c99=_0x119431;console[_0x582c99(0x4b3)](_0x582c99(0x71b)+_0xf92960);}),_0x588051['on'](_0x119431(0x1ec),_0x3e6d4f=>{const _0x5db911=_0x119431;_0x3e6d4f!==0x0?console[_0x5db911(0x4b3)]('Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20'+_0x3e6d4f):console[_0x5db911(0x133)](_0x5db911(0x3a2)),console[_0x5db911(0x133)](_0x5db911(0x262)),setTimeout(()=>process[_0x5db911(0x1ec)](),0x2710);});}}));});}0x0&&(module[a0_0x3f352e(0x679)]={'fullURL':fullURL,'subdomain':subdomain});