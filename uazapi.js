const a0_0x34b2dc=a0_0x15dd;(function(_0x3a5114,_0x4a5e8a){const _0x39d20b=a0_0x15dd,_0x15df1b=_0x3a5114();while(!![]){try{const _0x4476b9=-parseInt(_0x39d20b(0x573))/0x1+parseInt(_0x39d20b(0x55c))/0x2*(parseInt(_0x39d20b(0x4c2))/0x3)+-parseInt(_0x39d20b(0x65f))/0x4+parseInt(_0x39d20b(0x220))/0x5+-parseInt(_0x39d20b(0x25a))/0x6+-parseInt(_0x39d20b(0x886))/0x7+-parseInt(_0x39d20b(0x669))/0x8*(-parseInt(_0x39d20b(0x7b8))/0x9);if(_0x4476b9===_0x4a5e8a)break;else _0x15df1b['push'](_0x15df1b['shift']());}catch(_0x5a5d31){_0x15df1b['push'](_0x15df1b['shift']());}}}(a0_0x5236,0x1e0e8));var Hi=Object[a0_0x34b2dc(0x663)],Be=Object[a0_0x34b2dc(0x5dc)],Ki=Object['getOwnPropertyDescriptor'],Qi=Object['getOwnPropertyNames'],Yi=Object['getPrototypeOf'],Xi=Object[a0_0x34b2dc(0x52b)][a0_0x34b2dc(0x59e)],Zi=(_0x4e2de9,_0x249570)=>{for(var _0x5c0c60 in _0x249570)Be(_0x4e2de9,_0x5c0c60,{'get':_0x249570[_0x5c0c60],'enumerable':!0x0});},zs=(_0x3df8f8,_0x1813ba,_0x38a261,_0x29e050)=>{const _0x4bc55f=a0_0x34b2dc;if(_0x1813ba&&typeof _0x1813ba==_0x4bc55f(0x89b)||typeof _0x1813ba==_0x4bc55f(0x36a)){for(let _0xb8f001 of Qi(_0x1813ba))!Xi[_0x4bc55f(0x70b)](_0x3df8f8,_0xb8f001)&&_0xb8f001!==_0x38a261&&Be(_0x3df8f8,_0xb8f001,{'get':()=>_0x1813ba[_0xb8f001],'enumerable':!(_0x29e050=Ki(_0x1813ba,_0xb8f001))||_0x29e050[_0x4bc55f(0x66c)]});}return _0x3df8f8;},I=(_0x57d1e1,_0x56ca02,_0xdf3c10)=>(_0xdf3c10=_0x57d1e1!=null?Hi(Yi(_0x57d1e1)):{},zs(_0x56ca02||!_0x57d1e1||!_0x57d1e1[a0_0x34b2dc(0x6d4)]?Be(_0xdf3c10,a0_0x34b2dc(0x62c),{'value':_0x57d1e1,'enumerable':!0x0}):_0xdf3c10,_0x57d1e1)),eo=_0x107561=>zs(Be({},'__esModule',{'value':!0x0}),_0x107561),gr={};Zi(gr,{'fullURL':()=>Bs,'subdomain':()=>K}),module[a0_0x34b2dc(0x346)]=eo(gr);var qi=I(require(a0_0x34b2dc(0x7ab))),Ks=require('fs'),Qs=require(a0_0x34b2dc(0x8f9)),Ys=require(a0_0x34b2dc(0x6b9)),We=require(a0_0x34b2dc(0x6b9)),ue=process['cwd'](),Me=(0x0,We[a0_0x34b2dc(0x3c9)])(ue,a0_0x34b2dc(0x273)),Hs=(0x0,We[a0_0x34b2dc(0x3c9)])(ue,'src'),sn=(0x0,We['join'])(ue,'store',a0_0x34b2dc(0x210)),hs=class{constructor(){const _0x2ea7f3=a0_0x34b2dc;this[_0x2ea7f3(0x291)]();}[a0_0x34b2dc(0x30a)](_0x33cf3e){const _0x1556ec=a0_0x34b2dc;return this[_0x1556ec(0x3da)][_0x33cf3e];}[a0_0x34b2dc(0x291)](){const _0x229e52=a0_0x34b2dc;this[_0x229e52(0x3da)]=process['env']?.[_0x229e52(0x4cd)]!=='true'?this[_0x229e52(0x740)]():this['envProcess'](),process['env']?.['DOCKER_ENV']===_0x229e52(0x7a2)&&(this[_0x229e52(0x3da)][_0x229e52(0x773)][_0x229e52(0x279)]=_0x229e52(0x373),this[_0x229e52(0x3da)][_0x229e52(0x773)][_0x229e52(0x824)]=Number[_0x229e52(0x5ec)](process[_0x229e52(0x3da)]?.[_0x229e52(0x5be)]??_0x229e52(0x393)));}[a0_0x34b2dc(0x740)](){const _0x4eea2f=a0_0x34b2dc;return(0x0,Qs['load'])((0x0,Ks['readFileSync'])((0x0,Ys[_0x4eea2f(0x3c9)])(Hs,_0x4eea2f(0x51b)),{'encoding':'utf-8'}));}[a0_0x34b2dc(0x8b6)](){const _0x43b7b3=a0_0x34b2dc;return{'SERVER':{'TYPE':process[_0x43b7b3(0x3da)]['SERVER_TYPE'],'PORT':Number['parseInt'](process['env'][_0x43b7b3(0x5be)]),'URL':process['env']['SERVER_URL']},'CORS':{'ORIGIN':process[_0x43b7b3(0x3da)][_0x43b7b3(0x6c3)][_0x43b7b3(0x292)](','),'METHODS':process['env'][_0x43b7b3(0x231)][_0x43b7b3(0x292)](','),'CREDENTIALS':process[_0x43b7b3(0x3da)]?.[_0x43b7b3(0x930)]===_0x43b7b3(0x7a2)},'SSL_CONF':{'PRIVKEY':process['env']?.[_0x43b7b3(0x7aa)],'FULLCHAIN':process[_0x43b7b3(0x3da)]?.[_0x43b7b3(0x6f4)]},'STORE':{'CLEANING_INTERVAL':Number[_0x43b7b3(0x30e)](process[_0x43b7b3(0x3da)]?.[_0x43b7b3(0x34c)])?Number[_0x43b7b3(0x5ec)](process[_0x43b7b3(0x3da)]['STORE_CLEANING_TERMINAL']):void 0x0,'MESSAGES':process[_0x43b7b3(0x3da)]?.[_0x43b7b3(0x558)]==='true','CONTACTS':process[_0x43b7b3(0x3da)]?.[_0x43b7b3(0x893)]===_0x43b7b3(0x7a2),'CHATS':process[_0x43b7b3(0x3da)]?.[_0x43b7b3(0x725)]===_0x43b7b3(0x7a2)},'DATABASE':{'CONNECTION':{'HOST':process['env']?.[_0x43b7b3(0x8df)],'PORT':Number[_0x43b7b3(0x5ec)](process['env']?.[_0x43b7b3(0x8df)]),'USER':process['env'][_0x43b7b3(0x92c)],'PASSWORD':process[_0x43b7b3(0x3da)][_0x43b7b3(0x4b2)],'URI':process[_0x43b7b3(0x3da)][_0x43b7b3(0x5bb)],'DB_PREFIX_NAME':process[_0x43b7b3(0x3da)][_0x43b7b3(0x4af)]},'ENABLED':process[_0x43b7b3(0x3da)]?.[_0x43b7b3(0x3b9)]==='true'},'REDIS':{'ENABLED':process[_0x43b7b3(0x3da)]?.[_0x43b7b3(0x294)]===_0x43b7b3(0x7a2),'URI':process['env'][_0x43b7b3(0x332)]||_0x43b7b3(0x81f),'PREFIX_KEY':process[_0x43b7b3(0x3da)][_0x43b7b3(0x821)]||'uazapi'},'LOG':{'LEVEL':process['env']?.['LOG_LEVEL'][_0x43b7b3(0x292)](','),'COLOR':process[_0x43b7b3(0x3da)]?.[_0x43b7b3(0x653)]===_0x43b7b3(0x7a2)},'PROXY':process[_0x43b7b3(0x3da)]?.[_0x43b7b3(0x475)]===_0x43b7b3(0x7a2),'AUTHENTICATION':{'TYPE':process['env'][_0x43b7b3(0x6a8)],'API_KEY':{'KEY':process[_0x43b7b3(0x3da)][_0x43b7b3(0x482)]},'JWT':{'EXPIRIN_IN':Number['isInteger'](process[_0x43b7b3(0x3da)]?.[_0x43b7b3(0x307)])?Number['parseInt'](process[_0x43b7b3(0x3da)][_0x43b7b3(0x307)]):0xe10,'SECRET':process['env'][_0x43b7b3(0x622)]}}};}},b=new hs(),Vi=I(require(a0_0x34b2dc(0x39e))),be=I(require(a0_0x34b2dc(0x6d0))),Vs=require(a0_0x34b2dc(0x6b9)),gs=I(require(a0_0x34b2dc(0x24e))),ms=(_0x4b9fd5=>(_0x4b9fd5['LOG']=a0_0x34b2dc(0x224),_0x4b9fd5[a0_0x34b2dc(0x5ba)]=a0_0x34b2dc(0x86e),_0x4b9fd5['WARN']=a0_0x34b2dc(0x828),_0x4b9fd5[a0_0x34b2dc(0x7de)]='\x1b[31m',_0x4b9fd5['DEBUG']=a0_0x34b2dc(0x8b1),_0x4b9fd5[a0_0x34b2dc(0x903)]='\x1b[37m',_0x4b9fd5['DARK']=a0_0x34b2dc(0x856),_0x4b9fd5))(ms||{}),Xs=(_0x3d0fbd=>(_0x3d0fbd[a0_0x34b2dc(0x652)]=a0_0x34b2dc(0x3e6),_0x3d0fbd[a0_0x34b2dc(0x300)]=a0_0x34b2dc(0x6ae),_0x3d0fbd['INFO']='\x1b[34m%s\x1b[0m',_0x3d0fbd[a0_0x34b2dc(0x487)]=a0_0x34b2dc(0x589),_0x3d0fbd[a0_0x34b2dc(0x7de)]=a0_0x34b2dc(0x7b1),_0x3d0fbd['DEBUG']=a0_0x34b2dc(0x746),_0x3d0fbd[a0_0x34b2dc(0x903)]='\x1b[37m%s\x1b[0m',_0x3d0fbd))(Xs||{}),Zs=(_0xaea7e6=>(_0xaea7e6['LOG']='LOG',_0xaea7e6[a0_0x34b2dc(0x487)]=a0_0x34b2dc(0x487),_0xaea7e6[a0_0x34b2dc(0x5ba)]=a0_0x34b2dc(0x5ba),_0xaea7e6[a0_0x34b2dc(0x300)]=a0_0x34b2dc(0x300),_0xaea7e6['ERROR']='ERROR',_0xaea7e6[a0_0x34b2dc(0x5a3)]=a0_0x34b2dc(0x5a3),_0xaea7e6[a0_0x34b2dc(0x903)]='VERBOSE',_0xaea7e6))(Zs||{}),ea=(_0x5f4e6c=>(_0x5f4e6c[a0_0x34b2dc(0x652)]='\x1b[42m',_0x5f4e6c['INFO']=a0_0x34b2dc(0x4dc),_0x5f4e6c[a0_0x34b2dc(0x487)]=a0_0x34b2dc(0x71a),_0x5f4e6c[a0_0x34b2dc(0x300)]=a0_0x34b2dc(0x39f),_0x5f4e6c[a0_0x34b2dc(0x7de)]=a0_0x34b2dc(0x5ab),_0x5f4e6c[a0_0x34b2dc(0x5a3)]='\x1b[46m',_0x5f4e6c[a0_0x34b2dc(0x903)]=a0_0x34b2dc(0x37b),_0x5f4e6c))(ea||{}),$=class{constructor(_0x1745ef=a0_0x34b2dc(0x302)){const _0x44b0f0=a0_0x34b2dc;this[_0x44b0f0(0x4d9)]=_0x1745ef,this['configService']=b;}[a0_0x34b2dc(0x400)](_0x56270a){const _0x3462ed=a0_0x34b2dc;this[_0x3462ed(0x4d9)]=_0x56270a;}['console'](_0x1f0809,_0x5d8d30){const _0x5296ae=a0_0x34b2dc;let _0x25ca35=[];this[_0x5296ae(0x269)]['get'](_0x5296ae(0x652))['LEVEL'][_0x5296ae(0x3f2)](_0x4d3e77=>_0x25ca35['push'](Zs[_0x4d3e77]));let _0x4f6290=typeof _0x1f0809;_0x25ca35['includes'](_0x5d8d30)&&(b[_0x5296ae(0x30a)](_0x5296ae(0x652))['COLOR']?(console[_0x5296ae(0x476)](_0x5296ae(0x74c)+Xs[_0x5d8d30],_0x5296ae(0x6df),(0x0,gs[_0x5296ae(0x62c)])()[_0x5296ae(0x3e2)](_0x5296ae(0x42c)),'\x1b[0m',ms[_0x5d8d30]+ea[_0x5d8d30]+_0x5296ae(0x74c),_0x5d8d30+_0x5296ae(0x369),_0x5296ae(0x262),this[_0x5296ae(0x4d9)]+_0x5296ae(0x7cb),ms[_0x5d8d30],_0x4f6290!==_0x5296ae(0x89b)?_0x1f0809:'','\x1b[0m'),_0x4f6290==='object'&&console[_0x5296ae(0x476)](_0x1f0809,'\x0a')):console[_0x5296ae(0x476)]((0x0,gs[_0x5296ae(0x62c)])()[_0x5296ae(0x3e2)]('HH:mm:ss'),_0x5d8d30+'\x20',''+this[_0x5296ae(0x4d9)],_0x1f0809));}[a0_0x34b2dc(0x476)](_0x487575){const _0x25f950=a0_0x34b2dc;this[_0x25f950(0x4e8)](_0x487575,_0x25f950(0x652));}['info'](_0xc9d57a){const _0x4f2ebf=a0_0x34b2dc;this[_0x4f2ebf(0x4e8)](_0xc9d57a,_0x4f2ebf(0x5ba));}[a0_0x34b2dc(0x41f)](_0x3fb41d){const _0x3b3765=a0_0x34b2dc;this[_0x3b3765(0x4e8)](_0x3fb41d,_0x3b3765(0x487));}[a0_0x34b2dc(0x651)](_0x128053){const _0x108f9c=a0_0x34b2dc;this['console'](_0x128053,_0x108f9c(0x7de));}[a0_0x34b2dc(0x798)](_0x38d4aa){const _0x56844e=a0_0x34b2dc;this[_0x56844e(0x4e8)](_0x38d4aa,_0x56844e(0x903));}['debug'](_0x3f23b5){const _0x4f14bd=a0_0x34b2dc;this['console'](_0x3f23b5,_0x4f14bd(0x5a3));}[a0_0x34b2dc(0x62d)](_0x29ef76){const _0x158e6e=a0_0x34b2dc;this[_0x158e6e(0x4e8)](_0x29ef76,_0x158e6e(0x300));}};function ta(){const _0x1f4dd6=a0_0x34b2dc;process['on'](_0x1f4dd6(0x24c),(_0x3ba463,_0xa2b01)=>{const _0x300495=_0x1f4dd6;new $('uncaughtException')[_0x300495(0x651)]({'origin':_0xa2b01,'stderr':process[_0x300495(0x32f)]['fd'],'error':_0x3ba463});}),process['on'](_0x1f4dd6(0x91a),(_0x335846,_0x414679)=>{const _0x5e4b69=_0x1f4dd6;new $(_0x5e4b69(0x91a))[_0x5e4b69(0x651)]({'origin':_0x414679,'stderr':process['stderr']['fd'],'error':_0x335846});});}var sa=I(require(a0_0x34b2dc(0x8f1))),fs=new sa[(a0_0x34b2dc(0x62c))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Ce=require(a0_0x34b2dc(0x491)),Ie=I(require('mongoose')),ze=new $(a0_0x34b2dc(0x45b)),U=b[a0_0x34b2dc(0x30a)](a0_0x34b2dc(0x25e)),R=U['ENABLED']?U[a0_0x34b2dc(0x259)][a0_0x34b2dc(0x69e)]?Ie[a0_0x34b2dc(0x62c)][a0_0x34b2dc(0x7d4)](U[a0_0x34b2dc(0x259)][a0_0x34b2dc(0x69e)],{'dbName':U[a0_0x34b2dc(0x259)][a0_0x34b2dc(0x788)]+a0_0x34b2dc(0x8bd)}):Ie[a0_0x34b2dc(0x62c)][a0_0x34b2dc(0x7d4)](a0_0x34b2dc(0x74a)+U[a0_0x34b2dc(0x259)][a0_0x34b2dc(0x5fe)]+':'+U['CONNECTION']['PORT']+a0_0x34b2dc(0x2ab),{'user':U['CONNECTION'][a0_0x34b2dc(0x90f)],'pass':U['CONNECTION'][a0_0x34b2dc(0x702)],'dbName':U[a0_0x34b2dc(0x259)]['DB_PREFIX_NAME']+a0_0x34b2dc(0x8bd)}):null;U[a0_0x34b2dc(0x33c)]&&ze[a0_0x34b2dc(0x5df)](a0_0x34b2dc(0x83d)+R['$dbName']);var de=U['ENABLED']?U[a0_0x34b2dc(0x259)][a0_0x34b2dc(0x69e)]?Ie[a0_0x34b2dc(0x62c)][a0_0x34b2dc(0x7d4)](U[a0_0x34b2dc(0x259)]['URI'],{'dbName':a0_0x34b2dc(0x7f7)}):Ie['default'][a0_0x34b2dc(0x7d4)]('mongodb://'+U[a0_0x34b2dc(0x259)][a0_0x34b2dc(0x5fe)]+':'+U[a0_0x34b2dc(0x259)][a0_0x34b2dc(0x824)]+a0_0x34b2dc(0x2ab),{'user':U['CONNECTION'][a0_0x34b2dc(0x90f)],'pass':U[a0_0x34b2dc(0x259)][a0_0x34b2dc(0x702)],'dbName':a0_0x34b2dc(0x606)}):null;de&&ze[a0_0x34b2dc(0x5df)]('ON\x20-\x20dbName:\x20'+de['$dbName']),process['on'](a0_0x34b2dc(0x32b),()=>{const _0x29d648=a0_0x34b2dc;R&&R[_0x29d648(0x6dd)](()=>{const _0x402c34=_0x29d648;ze[_0x402c34(0x5df)](_0x402c34(0x61d));}),de&&de[_0x29d648(0x6dd)](()=>{const _0xf36f80=_0x29d648;ze[_0xf36f80(0x5df)](_0xf36f80(0x683));});});var to=new Ce[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),so=new Ce[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),ao=new Ce[(a0_0x34b2dc(0x267))]({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),io=new Ce[(a0_0x34b2dc(0x267))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[to],'default':[]}},{'_id':!0x1}),oo=new Ce['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':io,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':so},'groupdata':{'type':ao,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),aa=_0x39136c=>{const _0x2cf796=a0_0x34b2dc;let _0x379fa4='z_'+_0x39136c+_0x2cf796(0x918);return R?.[_0x2cf796(0x8de)](_0x2cf796(0x5f3),oo,_0x379fa4);},ia=require(a0_0x34b2dc(0x491)),ro=new ia[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),oa=_0x5030f7=>{const _0x578d5f=a0_0x34b2dc;let _0xbadf41='z_'+_0x5030f7+_0x578d5f(0x7e3);return R?.[_0x578d5f(0x8de)](_0x578d5f(0x55a),ro,_0xbadf41);},ra=require(a0_0x34b2dc(0x491)),ws=class{},no=new ra[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),na=de?.[a0_0x34b2dc(0x8de)](ws[a0_0x34b2dc(0x673)],no,a0_0x34b2dc(0x5b0)),ca=require('mongoose'),ys=class{},co=new ca[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),He=de?.[a0_0x34b2dc(0x8de)](ys[a0_0x34b2dc(0x673)],co,'instances'),la=require(a0_0x34b2dc(0x491)),lo=new la[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),ua=_0x5e85ca=>{const _0x420d7c=a0_0x34b2dc;let _0x48d989='z_'+_0x5e85ca+_0x420d7c(0x31c);return R?.[_0x420d7c(0x8de)]('MessageModel',lo,_0x48d989);},da=require(a0_0x34b2dc(0x491)),bs=class{},uo=new da[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),pa=R?.[a0_0x34b2dc(0x8de)](bs[a0_0x34b2dc(0x673)],uo,a0_0x34b2dc(0x49a)),ha=require(a0_0x34b2dc(0x491)),Ss=class{},ga=new ha[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});ga[a0_0x34b2dc(0x809)](a0_0x34b2dc(0x27b),function(_0x5ce753){const _0x4dee0c=a0_0x34b2dc;delete this[_0x4dee0c(0x52a)],delete this[_0x4dee0c(0x877)],delete this[_0x4dee0c(0x73e)],delete this['flowStopConversation'],delete this[_0x4dee0c(0x8cd)],_0x5ce753();});var ma=R?.[a0_0x34b2dc(0x8de)](Ss[a0_0x34b2dc(0x673)],ga,'webhook'),P=require('mongoose'),Ms=require(a0_0x34b2dc(0x28b)),Ke=class{},wa=new P[(a0_0x34b2dc(0x267))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Cs=new P['Schema']({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),po=new P[(a0_0x34b2dc(0x267))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x34b2dc(0x23a)},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x34b2dc(0x58a)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x34b2dc(0x34d)},'pollErrorMessage':{'type':String,'default':a0_0x34b2dc(0x91c)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),ya=new P['Schema']({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),ho=new P[(a0_0x34b2dc(0x267))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),go=new P[(a0_0x34b2dc(0x267))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Ns=new P[(a0_0x34b2dc(0x267))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),mo=new P[(a0_0x34b2dc(0x267))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),ba=new P['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':po},'apirequest':ho,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':mo,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),Sa=new P['Schema']({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),Es=class{},Ma=new P[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[Ns],'blocks':[ba],'groups':[wa],'conditions':[ya],'varedits':[Sa],'replyOptions':{'type':[Cs],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x1ae184=a0_0x34b2dc;return _0x1ae184(0x661)+Math[_0x1ae184(0x2e7)]()[_0x1ae184(0x1fe)](0x24)[_0x1ae184(0x4be)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':a0_0x34b2dc(0x90d)},'startID':{'type':String,'default':()=>(0x0,Ms['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ms['v4'])()},'shareOwners':{'type':[String],'default':[]}});Ma[a0_0x34b2dc(0x809)](a0_0x34b2dc(0x753),function(_0xaf5e94){const _0x297bea=a0_0x34b2dc;let _0x497fb4=this[_0x297bea(0x604)]();if(_0x497fb4&&typeof _0x497fb4=='object'&&_0x297bea(0x434)in _0x497fb4){let _0x48fd40=_0x497fb4[_0x297bea(0x434)];if(_0x48fd40){let _0x2e8e4b=new Set(),_0x4ef032=new Set(_0x48fd40['variables']?.['map'](_0x4a973b=>_0x4a973b[_0x297bea(0x673)])),_0x59bb32=JSON[_0x297bea(0x43f)](_0x48fd40),_0x906a91=/{{(?!_)([^}]*)}}/g,_0x41deba;for(;(_0x41deba=_0x906a91[_0x297bea(0x454)](_0x59bb32))!==null;)_0x4ef032[_0x297bea(0x333)](_0x41deba[0x1])||_0x2e8e4b[_0x297bea(0x420)](_0x41deba[0x1]);_0x2e8e4b['size']>0x0?(console[_0x297bea(0x41f)](_0x297bea(0x456),Array[_0x297bea(0x77b)](_0x2e8e4b)),_0x48fd40[_0x297bea(0x557)]=Array[_0x297bea(0x77b)](_0x2e8e4b)):_0x48fd40[_0x297bea(0x557)]=[],this[_0x297bea(0x50d)]({'$set':_0x48fd40});}}_0xaf5e94();});var Ee=R?.[a0_0x34b2dc(0x8de)](Es['name'],Ma,a0_0x34b2dc(0x7d7)),fo=new P['Schema']({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[Ns],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[go]},{'_id':!0x1}),wo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[Ns],'blocks':[ba],'groups':[wa],'conditions':[ya],'varedits':[Sa],'replyOptions':{'type':[Cs],'default':[]},'chatLog':fo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x34b2dc(0x5a2)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':'Esse\x20fluxo\x20expirou'},'waitingMenu_replyOptions':{'type':[Cs],'default':[]}}),Ca=_0x2a5eb0=>{const _0x217660=a0_0x34b2dc;let _0x2a9f15='z_'+_0x2a5eb0+_0x217660(0x436);return R?.[_0x217660(0x8de)](_0x217660(0x2af),wo,_0x2a9f15);},yo=new P['Schema']({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),fa=new P[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),bo=new P[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[fa],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x34b2dc(0x7c8)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[yo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':fa,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ea=_0x4d2f21=>{const _0x55c38c=a0_0x34b2dc;let _0x1bd88a='z_'+_0x4d2f21+_0x55c38c(0x3ca);return R?.[_0x55c38c(0x8de)](_0x55c38c(0x40b),bo,_0x1bd88a);},vs=class{},So=new P['Schema']({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),Mo=new P[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Co=new P['Schema']({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Eo=new P[(a0_0x34b2dc(0x267))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':'!stop'},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),vo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),No=new P[(a0_0x34b2dc(0x267))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[vo]},'customFields':{'type':[Co]},'flowConfig':{'type':Eo,'default':{}},'flows':{'type':[Mo],'default':[]},'autoCompleteMessages':{'type':[So],'default':[]}}),Te=R?.[a0_0x34b2dc(0x8de)](vs[a0_0x34b2dc(0x673)],No,a0_0x34b2dc(0x3f7)),va=require(a0_0x34b2dc(0x491)),$o=new va[(a0_0x34b2dc(0x267))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),Na=_0x4f939f=>{const _0x5cdb2b=a0_0x34b2dc;let _0x4d82ae='z_'+_0x4f939f+_0x5cdb2b(0x4bf);return R?.[_0x5cdb2b(0x8de)]('LabelModel',$o,_0x4d82ae);},_=class{constructor(_0x6ccdc6){const _0xbeb360=a0_0x34b2dc;this['dbSettings']=_0x6ccdc6['get'](_0xbeb360(0x25e));}};function A(_0x484aa6){const _0x21ac9d=a0_0x34b2dc;let _0x100264={};for(let [_0x4af46c,_0x45e200]of Object[_0x21ac9d(0x631)](_0x484aa6))if(typeof _0x45e200==_0x21ac9d(0x89b)&&!Array[_0x21ac9d(0x6fa)](_0x45e200)){for(let [_0x13b00d,_0x45fd0e]of Object[_0x21ac9d(0x631)](_0x45e200))_0x100264[_0x4af46c+'.'+_0x13b00d]=_0x45fd0e;}else _0x100264[_0x4af46c]=_0x45e200;return _0x100264;}var Qe=class{constructor(_0x3c5e00,_0x304d4f,_0x5bd414,_0xbdb61f,_0x37a67a,_0x5ef777,_0x3c4c78,_0x5eb96c,_0x1328c6,_0x41def3,_0x1ca20e,_0x15397b,_0x239c98){const _0x5e1d70=a0_0x34b2dc;this[_0x5e1d70(0x5ce)]=_0x3c5e00,this[_0x5e1d70(0x89d)]=_0x304d4f,this[_0x5e1d70(0x5ad)]=_0x5bd414,this[_0x5e1d70(0x6e1)]=_0xbdb61f,this['webhook']=_0x37a67a,this['auth']=_0x5ef777,this[_0x5e1d70(0x770)]=_0x3c4c78,this[_0x5e1d70(0x35b)]=_0x5eb96c,this['flowConversation']=_0x1328c6,this['label']=_0x41def3,this[_0x5e1d70(0x6b3)]=_0x1ca20e,this[_0x5e1d70(0x484)]=_0x15397b,this[_0x5e1d70(0x51a)]=_0x239c98;}get[a0_0x34b2dc(0x582)](){const _0x1482c9=a0_0x34b2dc;return this[_0x1482c9(0x51a)];}},Ye=class{},Xe=class extends _{['getMessageModelForOwner'](_0x3fbd71){return ua(_0x3fbd71);}async['insert'](_0x9f4643,_0x31755a){const _0x48a3c9=a0_0x34b2dc;if(_0x9f4643[_0x48a3c9(0x3a3)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this['getMessageModelForOwner'](_0x31755a)['insertMany']([..._0x9f4643]))[_0x48a3c9(0x3a3)]};}catch(_0x387d70){return _0x387d70;}}async[a0_0x34b2dc(0x253)](_0x20a67b,_0x248578){const _0xff04aa=a0_0x34b2dc;try{let _0x4668b6=this['getMessageModelForOwner'](_0x248578),_0x3d0e40=A(_0x20a67b[_0xff04aa(0x349)]);return await _0x4668b6[_0xff04aa(0x253)](_0x3d0e40)[_0xff04aa(0x289)]({'messageTimestamp':-0x1})[_0xff04aa(0x216)](_0x20a67b?.[_0xff04aa(0x216)]??0x0)['lean']();}catch{return[];}}async[a0_0x34b2dc(0x366)](_0x48312e,_0x2a9ace){const _0x2c78ef=a0_0x34b2dc;try{let _0x34692b=this[_0x2c78ef(0x21d)](_0x2a9ace),_0x2c9b26=A(_0x48312e[_0x2c78ef(0x349)]);await _0x34692b[_0x2c78ef(0x914)](_0x2c9b26);}catch(_0x17a128){console[_0x2c78ef(0x651)](_0x17a128);}}async['update'](_0x580602,_0x461a7b,_0x2a7bcb){const _0x284842=a0_0x34b2dc;try{let _0x3c82ab=this['getMessageModelForOwner'](_0x2a7bcb),_0x1dfccd=A(_0x580602[_0x284842(0x349)]);return await _0x3c82ab[_0x284842(0x753)](_0x1dfccd,{'$set':_0x461a7b},{'new':!0x0});}catch(_0x35e4f1){throw console[_0x284842(0x651)](_0x35e4f1),_0x35e4f1;}}async[a0_0x34b2dc(0x726)](_0x1e34ff,_0x5c8f46){const _0x2e36cc=a0_0x34b2dc;if(_0x1e34ff['length']===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this['getMessageModelForOwner'](_0x5c8f46)[_0x2e36cc(0x726)]([..._0x1e34ff]))[_0x2e36cc(0x3a3)]};}catch(_0x32a040){return console[_0x2e36cc(0x476)]('ERROR:\x20',_0x32a040),_0x32a040;}}async[a0_0x34b2dc(0x515)](_0x2b5618){const _0xc62f9f=a0_0x34b2dc;try{return await this[_0xc62f9f(0x21d)](_0x2b5618)['collection']['drop'](),{'success':!0x0};}catch(_0x53eeff){return console[_0xc62f9f(0x651)](_0x53eeff),{'success':!0x1,'error':_0x53eeff};}}},Ps=I(require(a0_0x34b2dc(0x41a))),w=I(require(a0_0x34b2dc(0x7a9))),Fe=require('fs'),j=I(require('path')),te=I(require('axios')),_i=require(a0_0x34b2dc(0x28b)),xi=I(require(a0_0x34b2dc(0x755))),Di=I(require(a0_0x34b2dc(0x63c))),$a=[a0_0x34b2dc(0x1ff),a0_0x34b2dc(0x2a4),a0_0x34b2dc(0x82a),'videoMessage',a0_0x34b2dc(0x551)],Ra=[a0_0x34b2dc(0x707),a0_0x34b2dc(0x41c),a0_0x34b2dc(0x50c),'viewOnceMessageV2'],ks=require('os'),qt=I(require(a0_0x34b2dc(0x69a))),Ue=require(a0_0x34b2dc(0x320)),Pi=require(a0_0x34b2dc(0x75e)),fe=I(require(a0_0x34b2dc(0x491))),L=require(a0_0x34b2dc(0x7a7)),pe=class{constructor(_0x49a234,_0x41fe17,_0x44d40f){const _0x1f35a1=a0_0x34b2dc;this[_0x1f35a1(0x5f0)]=_0x49a234,this[_0x1f35a1(0x22e)]=_0x41fe17,this[_0x1f35a1(0x673)]=_0x44d40f;}},Ze=class{},et=class{},Oe=class{},tt=class{},st=class{},ve=class{},at=class{},it=class{},ot=class{},rt=class{},kt=I(require(a0_0x34b2dc(0x6d0))),Aa=require('fs'),Ia=require(a0_0x34b2dc(0x6b9));async function _e(_0x4c949f){const _0x8e512d=a0_0x34b2dc;let _0x37be03=z[_0x8e512d(0x67c)][_0x4c949f];if(U[_0x8e512d(0x33c)]){let _0x1b6e1b=R['getClient']()['db'](U[_0x8e512d(0x259)]['DB_PREFIX_NAME']+_0x8e512d(0x621))[_0x8e512d(0x6bc)](_0x4c949f);return _0x37be03||(await _0x1b6e1b['find']({})[_0x8e512d(0x44b)]())[_0x8e512d(0x3a3)]>0x0;}return _0x37be03||(0x0,Aa[_0x8e512d(0x68c)])((0x0,Ia[_0x8e512d(0x3c9)])(Me,_0x4c949f));}async function Ta(_0x128c42,_0x12588d,_0x1c9027){const _0x316a9e=a0_0x34b2dc;if(_0x128c42[_0x316a9e(0x768)][_0x316a9e(0x4c4)](_0x316a9e(0x833))||_0x128c42[_0x316a9e(0x768)][_0x316a9e(0x4c4)](_0x316a9e(0x4c7))||_0x128c42['originalUrl'][_0x316a9e(0x4c4)](_0x316a9e(0x33f))||_0x128c42['originalUrl'][_0x316a9e(0x4c4)](_0x316a9e(0x301))||_0x128c42['originalUrl'][_0x316a9e(0x4c4)](_0x316a9e(0x237))||_0x128c42[_0x316a9e(0x768)][_0x316a9e(0x4c4)](_0x316a9e(0x63d))||_0x128c42[_0x316a9e(0x768)]['includes'](_0x316a9e(0x71d)))return _0x1c9027();let _0x33ce45=_0x128c42['params'];if(!_0x33ce45?.[_0x316a9e(0x402)])throw new m(_0x316a9e(0x73a));if(!await _e(_0x33ce45[_0x316a9e(0x402)]))throw new J(_0x316a9e(0x344)+_0x33ce45[_0x316a9e(0x402)]+_0x316a9e(0x3a4));_0x1c9027();}async function Oa(_0x1494fe,_0x105d72,_0x5efb96){const _0x3f649d=a0_0x34b2dc;if(_0x1494fe[_0x3f649d(0x768)][_0x3f649d(0x4c4)]('/instance/create')){let _0x5684d3=_0x1494fe[_0x3f649d(0x36e)];if(await _e(_0x5684d3['instanceName']))throw new se('This\x20name\x20'+_0x5684d3[_0x3f649d(0x402)]+_0x3f649d(0x6af));z[_0x3f649d(0x67c)][_0x5684d3['instanceName']]&&delete z[_0x3f649d(0x67c)][_0x5684d3[_0x3f649d(0x402)]];}_0x5efb96();}var _a=require('class-validator'),xa=I(require(a0_0x34b2dc(0x88e))),nt=a0_0x34b2dc(0x7dc),Ao=new $(a0_0x34b2dc(0x4ce));async function Io(_0x4940dd,_0x5c40f8,_0x36acd7){const _0xa071ea=a0_0x34b2dc;let _0x42c15f=_0x4940dd[_0xa071ea(0x30a)](_0xa071ea(0x1e7));if(_0x42c15f&&b[_0xa071ea(0x30a)](_0xa071ea(0x4d0))[_0xa071ea(0x432)]['KEY']!==_0x42c15f)throw new ce();if(b[_0xa071ea(0x30a)](_0xa071ea(0x4d0))[_0xa071ea(0x432)][_0xa071ea(0x22f)]===_0x42c15f)return _0x36acd7();if((_0x4940dd['originalUrl'][_0xa071ea(0x4c4)](_0xa071ea(0x833))||_0x4940dd['originalUrl'][_0xa071ea(0x4c4)](_0xa071ea(0x4c7)))&&!_0x42c15f)throw new se(_0xa071ea(0x825),_0xa071ea(0x44a));let _0x488e70=b[_0xa071ea(0x30a)](_0xa071ea(0x4d0))['JWT'];try{let [_0x3cf4de,_0x57a21d]=_0x4940dd[_0xa071ea(0x30a)](_0xa071ea(0x7ef))[_0xa071ea(0x292)]('\x20');if(_0x3cf4de[_0xa071ea(0x4a4)]()!=='bearer')throw new ce();if(!(0x0,_a[_0xa071ea(0x82f)])(_0x57a21d))throw new ce();let _0x172b4b=_0x4940dd[_0xa071ea(0x38d)],_0x1208e4=xa[_0xa071ea(0x62c)][_0xa071ea(0x5e6)](_0x57a21d,_0x488e70[_0xa071ea(0x777)],{'ignoreExpiration':_0x488e70[_0xa071ea(0x504)]===0x0});if(_0x172b4b[_0xa071ea(0x402)]!==_0x1208e4[_0xa071ea(0x402)]||nt!==_0x1208e4[_0xa071ea(0x306)])throw new ce();return _0x36acd7();}catch(_0x962a4f){throw Ao[_0xa071ea(0x651)](_0x962a4f),new ce();}}async function To(_0x28406d,_0x2593bd,_0x525312){const _0x7f9686=a0_0x34b2dc;let _0x6febb=b['get'](_0x7f9686(0x4d0))['API_KEY'],_0x1d60b2=_0x28406d[_0x7f9686(0x30a)]('apikey');if(_0x6febb[_0x7f9686(0x22f)]===_0x1d60b2)return _0x525312();if(_0x28406d['originalUrl']['includes'](_0x7f9686(0x833))){let _0x3e34ac=Pa,_0x557959=_0x28406d['body'][_0x7f9686(0x402)];if(_0x3e34ac&&_0x557959['toLowerCase']()[_0x7f9686(0x442)](_0x3e34ac[_0x7f9686(0x4a4)]()))return _0x525312();if(!_0x1d60b2)throw new se(_0x7f9686(0x825),_0x7f9686(0x44a));}if(_0x28406d[_0x7f9686(0x768)][_0x7f9686(0x4c4)](_0x7f9686(0x4c7))&&!_0x1d60b2)throw new se('Missing\x20global\x20api\x20key',_0x7f9686(0x44a));if(_0x28406d['originalUrl'][_0x7f9686(0x4c4)](_0x7f9686(0x33f))&&!_0x1d60b2)throw new se(_0x7f9686(0x825),_0x7f9686(0x44a));if(_0x28406d[_0x7f9686(0x768)][_0x7f9686(0x4c4)](_0x7f9686(0x301))&&!_0x1d60b2)throw new se(_0x7f9686(0x825),_0x7f9686(0x44a));try{let _0x52d918=_0x28406d[_0x7f9686(0x38d)],_0x5daa29=await we['auth'][_0x7f9686(0x253)](_0x52d918[_0x7f9686(0x402)]);if(_0x5daa29&&_0x5daa29[_0x7f9686(0x1e7)]===_0x1d60b2)return _0x525312();}catch{}throw new ce();}function a0_0x5236(){const _0x1b740f=['):\x20customFieldVariables','\x20não\x20encontrado','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','upsertedCount','del','sendMessageWithTyping','blocks','true','lowerCase','\x22\x20cannot\x20be\x20empty','.png','groupdata','class-validator','https://api.openai.com/v1/audio/speech','@whiskeysockets/baileys','SSL_CONF_PRIVKEY','compression','Erro\x20ao\x20editar\x20o\x20chat','atendimentoAberto','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','groupRevokeInvite','delaySecMax','\x1b[31m%s\x1b[0m','maxActives','bulkWrite','backgroundColor','):\x20Chat\x20','EMAIL:','this.reconnectAttempts:\x20','153909PqloAZ','No\x20suitable\x20network\x20interface\x20found','Erro\x20ao\x20deletar\x20mensagens:','waMonitor','equal','author','\x22\x20-\x20REMOVED','/media/','statusJidList','none','dropIndex','varedits','Não\x20respondeu\x20com\x20a\x20enquete.','Fluxo\x20id\x20\x27','sendMenu','reference','scheduled','saveVariable','view\x20engine','\x1b[0m','onWhatsApp','):\x20sender\x20=\x20number:\x20','):\x20Buscando\x20todos\x20os\x20fluxos...','listResponseMessage','Erro\x20ao\x20atualizar\x20conversa:\x20','Internal\x20Server\x20Error',',\x20saindo.','flush','createConnection','processUUID','request\x20received\x20in\x20updateAgent','allFlows','updateGParticipant','#ff9484','DisconnectReason','Subdomínio\x20não\x20encontrado','uazapi','verifiedName','ERROR','https://ifconfig.me/ip','labelId','.svg','request\x20received\x20in\x20updateAutoCompleteMessages','_Contacts','cacheInstanceRepository','errorLog','Data\x20inválida\x20fornecida','spawn','retrySendMessage','Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','leadInfo.','PREFIX_KEY','emit','fetchBusinessProfile','authorization','updateGParticipate','optionDescription','upsertChats','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','pop','MESSAGES_SET','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','cachedData-whatsapp','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','success','processUazapi','\x22,\x20valor\x20a\x20substituir:\x20\x22','request\x20received\x20in\x20editFlow','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','variable','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','AutomateFunctions','Valor\x20da\x20URL\x20recuperada:','json','groups_ignore','Fluxo\x20\x27','email','messageStubParameters','wuid','pre','mediaMessage','variables','buttons','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','scheduleSendMedia','#9568cf','.docx','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','options','statusCode','Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','pollCreationMessageV2','flushHeaders','temp-','creds','process','NextBlock','finish','put','deleteMessageForEveryone','undefined','redis://127.0.0.1:6379','removeIPv6ById','REDIS_PREFIX_KEY','/wa-groups','catch','PORT','Missing\x20global\x20api\x20key','):\x20\x27Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x27,\x20','setNewValue','\x1b[33m','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','audioMessage','InstancesAlterarTodas','):Converted\x20image\x20deleted','):\x20error:\x20','chatLog','isJWT','fetchProfilePictureUrl','@s.whatsapp.net','API\x20Key\x20inválida.','/instance/create','online','processvaredits','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','flattenObject','findManyByIds','\x20minutos.\x20Será\x20às\x20','AppStateSyncKeyData','METHODS','ON\x20-\x20dbName:\x20','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','markMessageAsRead','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','getChatModelForOwner','repeat','paused','splice','isAdmin','ScheduleMessage','Parando\x20aplicação,\x20atualização\x20recebida','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.','Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.','toNumber','indexOf','readMessages','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','ListType','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','CONTACTS_UPSERT','width','reduce','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','imgUrl','request\x20received\x20in\x20deleteConversation','\x1b[30m','lastRealGroupsFetch','.extension','setHeader','AddUserFlow','findAndReplace','isConnected','Imagem\x20não\x20encontrada','redirect','key','):\x20whoCanEdit\x20before\x20validation:\x20','/wa-qrcode','detail','cacheInstanceModel','groupValidate','mongodb','unlinkSync','config','IP\x20confirmed:\x20','locked','cwd','error_log','findAndUpdateCacheContact','findGroupsEspecial','\x1b[34m','crypto','):Audio\x20converted\x20and\x20stored\x20in\x20cache','variablesToObject','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','rowId','):\x20Conversa\x20está\x20expirada\x20-\x20voto','):\x20\x27Enviando\x20audio\x20para\x20\x27','textMessage','flowIgnoreGroups','Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global','URL','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','Falha\x20ao\x20processar\x20fetchBusinessProfile','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','stateConnection','):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','now','order','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','customFields','):\x20conversation.status:\x20','sending','1094170KXjwqm','request\x20received\x20in\x20updateCustomFields','Número\x20não\x20possui\x20WhatsApp.','}}\x20->\x20\x22','Stack\x20trace:','chats','greater','responsavelid','jsonwebtoken','findParticipants','createNewConversation','updateFlowConfig','views','STORE_CONTACTS','CONNECTION_UPDATE','CHATS_DELETE','beautifyWithPlaceholders','):\x20[messages.upsert]\x20group\x20ignored','transformScheduledMessagesByType','lastSend','rm\x20-rf\x20','object','deleteBlock','chat','getValidWhatsAppNumbers','Falha\x20ao\x20processar\x20a\x20solicitação','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','sendText','):Type\x20defined\x20as\x20audio','desativadoFluxoAte','created','):Audio\x20processed','):\x20isVote:\x20','getMinutes','headerString','env.KEY\x20!==\x20key','groups.upsert','item','mimetype','):\x20atualização\x20chat:\x20','Tentando\x20reconectar...','SUCCESS','processawaitSeconds','\x1b[36m','uazapiSendLocation','):\x20Conversa\x20está\x20expirada','throwAndLogError','drop','envProcess','):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20','audio/ogg;\x20codecs=opus','pollOnReplyDelete','#b4ebff','locationMessage','groupParticipantsUpdate','-whatsapp-api','ip6eui','sharePass','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','GET','storePath','menuType','scheduleNextCheck','createWebhook','pollErrorMessage','deleteFlow','networkInterface','Connection','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','uazapiSendText','sleep','flowStopMinutes','allContacts','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20não\x20estão\x20ativados.','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','):\x20whoCanEdit\x20after\x20validation:\x20','Read\x20messages','\x20segundos','*Pergunta*:\x20\x0a','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','conversationTimestamp','fone','fetchLabels','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','labels.edit','menuIgnoreNonVotes','waitingMenu_id','.ogv','model','DATABASE_CONNECTION_HOST','webp','Subdomínio\x20final:','Retornando\x20grupos\x20SEM\x20cache','validate','):\x20Enviando\x20texto','findGroup','cachedContact','):\x20Editando\x20replyOption...','shareOwners','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','isBusiness','Conexão\x20estabelecida','isListOfNumbers','editedMessage','sectionsToString','oldToken','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','eventemitter2','formatBRNumber','sendWhatsAppAudio','licenca','\x20Tentativa\x20de\x20reconexão\x20','muteEndTime','Button\x20IDs\x20cannot\x20be\x20repeated.','):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20','js-yaml','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','Erro\x20ao\x20importar\x20chats','label','Falha\x20ao\x20criar\x20IPv6.','):Image\x20created','stopped','Error\x20fetching\x20group','fetchPrivacySettings','VERBOSE','waitingMenu_replyOptions','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','\x20tentativas.','deleteOne','Flow\x20iniciado\x20com\x20','blockId','set','removed','IPv6\x20addresses\x20detected:\x20','false','sendMessage','USER','The\x20instance\x20needs\x20to\x20be\x20disconnected','stdout','messageTimestamp','redisEnv','deleteMany','presenceSubscribe','createGroup','):\x20this.client.authState.creds?.myAppStateKeyId:\x20','_Chats','isBase64','unhandledRejection','connectionState','Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','findAndReplaceRegex','replyOptions','sendContact','sign','uazapiSendAudio','Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...','generate','contactsArrayMessage','Erro\x20ao\x20arquivar\x20chat','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','CORS','ChatRouter','#000000','#ffc5c7','DATABASE_CONNECTION_USER','routerPath','_activedCount','editFlowVaredit','CORS_CREDENTIALS','url','creds.json','groupSettingUpdate','/wa-contacts','updateBlock','valid','isValidAndUniqueIPv6','addBlock','flowName','):\x20Flow\x20\x27','readMessage','qrCode','apikey','groupSetting','.error','Limpando\x20logs\x20do\x20PM2...','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','joinGroupValidate','composing','toFile','contacts.update','user','createAndSave','setting','\x20atualizado\x20com\x20sucesso.\x20Ação:\x20','):\x20Current\x20Time:\x20','findLabels','PENDING','updateMany','groupRequestParticipantsUpdate','title','):\x20Criando\x20fluxo...','editflowgroup','stanzaId','Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20','toString','imageMessage','sendAudio','video-cover.png','getTime','organization','subjectTime','instanceInfo','GROUP_PARTICIPANTS_UPDATE','toLocaleString','vir','pictureUrl','getScheduleMessage','createSectionsFromValues','IPv6\x20Prefix\x20detected:\x20','pairingCode','Nenhum\x20fluxo\x20correspondente\x20encontrado.','execSync','auth','ip\x20-6\x20addr\x20show\x20dev\x20','conversation','every','removeInstance','\x0aitem','limit','\x27\x20removido\x20do\x20AutomateSystem.','):\x20Não\x20achou\x20nenhum\x20flow','goToFlow','subjectOwner','Instance\x20\x22','chatId','getMessageModelForOwner','):\x20Bloco\x20copiado:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc','637125OgdxBu','less','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','groupId','\x1b[32m','.wav','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','isCommunityAnnounce','0123456789ABCDEF','archiveChat','request\x20received\x20in\x20allFlows','ids','listType','toUpperCase','exists','KEY','response','CORS_METHODS','parse','dbInstance','):\x20Comando\x20desconhecido:\x20','ephemeralDuration','getDelay','/instance/connect','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','nome','list','Esse\x20fluxo\x20não\x20permite\x20importação.','Error\x20adding\x20IPv6\x20address:\x20','buttonText',',\x20global:\x20','Message\x20absent\x20from\x20node','removeData','editflowvaredit','express-async-errors','revokeInviteCode','findConversation','synchronizeAndMapFlows','apirequest','\x20}\x0a','type','errors','/wa-message-update','requestPairingCode','uncaughtException','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','dayjs','unreadcount','#d3a91f','then','Subscribed\x20Events:','find','promisify','logout','subject','SINGLE_SELECT','pollCreationMessageKey','CONNECTION','443460Vumnil','groupHandler','/wa-presence','updatePresence','DATABASE','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','):\x20Editando\x20grupo\x20do\x20fluxo...','repository','\x1b[33m\x1b[1m','removeIPv6','lastBlockId','Instance\x20Key\x20from\x20DB:','instancias:\x20','Schema','Group\x20not\x20found','configService','ip\x20-6\x20addr\x20add\x20','Network\x20Interface\x20detected:\x20','replaceVariablesInReplyOptions','push','editScheduleMessage','address','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo','updateMissingCustomFields','match_last_seen','instances','groupRequestParticipantsList','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','):\x20leadInfoVariables','newStoppedUntil','delayChatLabel_MAX_RETRIES','TYPE','findMessages','save','replacer','CONECTADO\x20À\x20UAZAPI','mentions','connectionUpdate','editFlow','Cache-Control','getScheduleMessageModelForOwner','/automate','):\x20alterando\x20this.AutomateSystem','leadInfo.atendimentoAberto','node-cache','connectToWhatsapp','Error\x20in\x20chatModify\x20for\x20number\x20','sort','groupAcceptInvite','uuid','start','imagechat','restrict','#ffae04','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','loadEnv','split','connectedName','REDIS_ENABLED','Detalhes\x20do\x20erro:','chats.upsert','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','decryptPollVote','bodyStringErrorParse','Background\x20color\x20is\x20required','groupGetInviteInfo','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','configureIPv6','charAt','jsonschema','\x0a{\x20instance:\x20','replace','QRCODE_UPDATED','importChatsBatch','documentMessage','):\x20Error\x20processing\x20conditions:\x20','\x27\x20não\x20encontrado','descId','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','birthtime','):\x20[messages.update]\x20group\x20ignored','?authSource=admin&readPreference=primary&directConnection=true','lastReceivedMessage','):\x20transformedCustomFieldVariables','array','ConversationModel','XX:XX:XX:XX:XX:XX','jwt',',\x20canSendMessage:\x20','https://api.openai.com/v1/images/generations','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','_p_','PRESENCE_UPDATE','pendingMessages','):\x20Erro\x20durante\x20a\x20atualização:\x20','groupUpdateDescription','binary','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','processingGroup','IPv6\x20address\x20configured:\x20','):\x20Grupo\x20','updateLastSeenPrivacy','File\x20written\x20to\x20path:\x20','ini','flowConversation','assign','):\x20não\x20encontrou','editOperator','_id','Unauthorized','CHATS_SET','uazapiSendContact','Error\x20fetching\x20and\x20updating\x20profile:\x20','inviteCode','result','SEND_MESSAGE','dbConnection','SendScheduleMessage','.xls','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant','pollCreationMessageV3','reorderBlocks','Falha\x20ao\x20recriar\x20IPv6.','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','getConversation','uazapiDeleteMessage','Erro\x20ao\x20buscar\x20o\x20fluxo','contactHandle','END:VCARD','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','admin','fetchConversation','digest','):\x20Mensagens\x20prontas\x20para\x20envio\x20encontradas:\x20','deleteMessage','deleteDoneMessages','unreadCount','Button\x20texts\x20cannot\x20be\x20repeated','):\x20expirationTime:\x20','startCommand','random','STORE','reviver','endSession','presence.update','fetchContacts','):\x20Editando\x20variável\x20do\x20fluxo...',',\x20received\x20','scheduleSendAudio','):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20','waitingMenu_text','Erro\x20ao\x20remover\x20label\x20','getLastMessage','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','https://uazapi-plugin.bubbleapps.io/','getHours','extractPhoneNumber','lastSendMessage','reconnectTimestamps','updateMissingEtiquetas','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','write','toBrazilianNumberFormat','contains','reconnectAttempts','DARK','/config','Logger','Not\x20is\x20business\x20profile','writeData','findWebhook','apiName','AUTHENTICATION_JWT_EXPIRIN_IN',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','release','get','approve','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$',',\x20qrcodeCount:\x20','isInteger','processScheduleFlow','headers','encoding','CONTACTS_SET','request\x20body:\x20','contact_blacklist','color','.webp','app-state-sync-key','application/json','everyOne','WA\x20MODULE','updateProfileStatus','_Messages','notContains','Invalid\x20format','messages.upsert','child_process','protocolMessage','delayChatLabel_RETRY_DELAY_MS','Instance\x20deleted','profile','unlocked','pt-BR','matchRegex','):\x20\x27Enviando\x20texto\x20para\x20\x27','.mp4','Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage','beforeExit','findGroups','modifiedCount','messageType','stderr','/create','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','REDIS_URI','has','filter','etiquetas','exit','):Trying\x20to\x20get\x20business\x20profile','groupInviteCode','\x22\x20not\x20found','getConversationModelForOwner','ephemeralExpiration','ENABLED','OrAnd','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','/exit','Mac\x20OS','):Processing\x20audio','https',',\x20isAdmin:\x20','The\x20','CHATS_UPDATE','exports','notEmpty','Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:','where','quotedMessage','READ','STORE_CLEANING_TERMINAL','Esse\x20fluxo\x20expirou','/:instanceName','sendPoll','formatVCard','createConversationforgoToFlow','pollUpdateMessage','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','contextInfo','replyOption','when','triedToSend','#fed428','getflow','updateGroupParticipantsWebhook','flow','deletedCount','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','participant','@redis/client','redis','processblock','font','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar','Fluxos\x20não\x20estão\x20ativados','delete','utf-8','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:','\x20\x1b[0m','function','off','/wa-chats','Configuração\x20SSL\x20recuperada:','body','mkdirSync','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','http','substring','buttonMessage','getBusinessProfile','MESSAGES_UPDATE','Error\x20removing\x20IPv6\x20address:\x20','privacySettings','\x20do\x20chat\x20','\x1b[47m','keys','\x20segundos\x20antes\x20de\x20reconectar...','/group','idSchedule','awaitingApproval','\x20adicionado\x20ao\x20chat\x20','done','audioWhatsapp','integer','Last\x20message\x20not\x20found\x20for\x20number:\x20','https://uazapi-plugin.bubbleapps.io/?url=','Error\x20parsing\x20JSON:','getClient','audio','connecting','groups','connectionStatus','params','updateAgent','Nenhum\x20chat\x20fornecido\x20para\x20inserção.','status.instance','connectToWhatsappController','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','8080','fetchChats','dropCollection','audio/ogg','cleanDisconnectedInstances','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','removeUnusedChatFields','CHATS_UPSERT','autoCompleteMessages','caption','cors','\x1b[40m','Erro\x20ao\x20atualizar\x20o\x20flow.','Erro\x20ao\x20deletar\x20chat:','ex:\x20\x22groupJid=120362@g.us\x22','length','\x20instance\x20does\x20not\x20exist','changeVariables','namespace','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','):\x20Label\x20','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','globalShow','padStart','sendSticker','messages.update','deleteChat','notEqual','\x20inseridos\x20no\x20banco\x20de\x20dados...','):\x20ev.flush\x20realizado','addMessagesToGroup','reject','messageId','role','message_normalized','trim','DATABASE_ENABLED','addChatLabel','last','):including\x20timestamp\x20in\x20url:\x20','editflowcondition','ip:\x20','sendPresenceUpdate','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','updateReplyOption','readreceipts','onTime','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','#83e421','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','replaceVariablesChat','join','_ScheduleMessages','logger','API\x20Key\x20from\x20Request:','Erro\x20ao\x20buscar\x20metadados\x20do\x20grupo\x20para\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup','Erro\x20ao\x20alterar\x20privacidade',',\x20Minutes\x20to\x20Close:\x20','sendList','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','):\x20Usando\x20extensão\x20padrão:\x20','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','):\x20Conversa\x20inserida\x20com\x20sucesso.','presence','findAll','env','cleaningUp','updateParticipant','messageContextInfo','qrcode.updated','connection.update','ipv6Prefix','blockLogs','format','\x20removido\x20do\x20chat\x20','Primeiro\x20Valor:\x20','\x20chats\x20de\x20','\x1b[32m%s\x1b[0m','):\x20encontrado\x20próxima\x20mensagem\x20para\x20','Generated\x20IPv6:\x20','FlowController','getMessage','createConversationforStartFlow','):\x20Going\x20to\x20','/64\x20dev\x20','\x20com\x20sucesso.','.ogg','):\x20Bloco\x20original\x20para\x20cópia:\x20','no-cache','forEach','CREDENTIALS','groupToggleEphemeral','findById','CONTACTS_UPDATE','AutomateSystem','Erro\x20ao\x20atualizar\x20o\x20fluxo:','https://','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20','getAutomateSystem','processConditions','groupMemberAddMode','messageSecret','condition','setContext','apply','instanceName','editMessagesInGroup','.xlsx','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','chats.delete','convertaudioMP3','timeInMinutes','Subdomínio\x20extraído\x20da\x20URL:','labels.association','ScheduleMessageModel','findGroupInfo','updateGroupPicture','boolean','instanceCount','Rótulo\x20deletado:\x27,\x20','Valor\x20inicial:\x20\x22','updateStopChat','fetchInstances','pushName','Types','):\x20teve\x20mudanças\x20chat.muteEndTime:\x20','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','Instance\x20restarted','request\x20received\x20in\x20getFlow','@ffmpeg-installer/ffmpeg','minutesToClose','documentWithCaptionMessage','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','warn','add','formatStatusMessage','moreLogs','height','rows','Deletion\x20failed','Erro\x20ao\x20atualizar\x20cacheInstance:','Validate','Enter\x20a\x20value\x20in\x20milliseconds','updateAutoCompleteMessages','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','DD/MM\x20HH:mm:ss','displayName','):\x20Alterando\x20fluxo...','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','):Image\x20converted\x20to\x20WebP','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','API_KEY','saveMediaToFile','$set','deleted','_FlowHistorico','updateAll','fileUrl','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture','_fromMe',',\x20pairCode:\x20','floor','prepareWAMessageMedia','dbSettings','stringify','findOne','\x5c$&','startsWith','convertedOptions','menuMessage','resetReconnectionVariables','Mensagens\x20deletadas\x20com\x20sucesso.','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','initAuthCreds','The\x20global\x20api\x20key\x20must\x20be\x20set','toArray','Connection\x20closed\x20for\x20instance:\x20','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','updateProfilePicture','):\x20Enviando\x20localização','Erro\x20ao\x20editar\x20a\x20conversa','request\x20received\x20in\x20deleteFlow','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','The\x20property\x20cannot\x20be\x20empty','exec','remove.instance','Variáveis\x20não\x20encontradas:','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','startID','Erro\x20ao\x20atualizar\x20AutomateSystem:','client','Db\x20Connection','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','group-participants.update','arrayUnique','https://api.elevenlabs.io/v1/text-to-speech/','webhookModel','.webm','truncatedto','):\x20Editando\x20mensagens\x20no\x20grupo...','fromMe','copy','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','Type\x20is\x20required','whoCanEdit','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','isRunning','Error\x20while\x20deleting\x20message\x20for\x20everyone','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','readMessageBot','*\x0a\x0a','scheduleSendText','out','}}\x20->\x20valor\x20não\x20encontrado','updateCustomFields','apiResponse','restart','PROXY','log','\x20quoted:\x20','fullName','):\x20Entrou\x20na\x20função\x20processawaitSeconds','value','oldValue','createOrUpdate','string','getTicketSystem','remote\x20\x22origin\x22','Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.','segundos','AUTHENTICATION_API_KEY','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','automateSystem','#9ab6c1','unavailable','WARN','):Notifying\x20clients\x20for\x20chat:\x20','findMany','[AUTH]\x20Database\x20is\x20not\x20enabled','ms\x20(tentativa\x20','restartInstance','Erro\x20ao\x20buscar\x20conversas','cache','getLabelModelForOwner','):\x20Deletando\x20mensagem','mongoose','webhook','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','archive','shift','menuExpiredMessage','remoteJids','scheduleFlow','\x20não\x20encontrado\x20para\x20atualização.','authentication','):\x20Buscando\x20conversas...','webhookMap','fetchProfilePicture','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','\x20minutos...','applyvaredit','Erro\x20de\x20atualização:\x20','readFileSync','):\x20newFirstValue\x20após\x20replaceVariables:','toLowerCase','Telefone:\x20','test','replaceVariablesLogs','):\x20Entrou\x20na\x20função\x20goToFlow','evaluateCondition','ff:fe','/chat','.url','updateChatWithMessage','):Delete\x20chat','DATABASE_CONNECTION_DB_PREFIX_NAME','memberAddMode','processPollUpdateMessage','DATABASE_CONNECTION_PASSWORD','ignoreGroups','Flow\x20\x27','convertaudio','Error\x20updating\x20cache\x20contact:','):\x20','WebhookGlobal','flows','):\x20conversation.waitingMenu_name','/*.json','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','):\x20Iniciando\x20bot...','slice','_Labels','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','yes','62589uXFABW','g.us','includes','groupName','timeout','/instance/fetchInstances','media',',\x20valor\x20a\x20encontrar:\x20\x22','\x20depois\x20','leadInfo.desativadoFluxoAte','SERVER_OFFLINE','DOCKER_ENV','GUARD','connectionClosed','AUTHENTICATION','BRL','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','MESSAGES_UPSERT','groupMetadata','connect','cpf','updateMessage','context','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','realVariables','\x1b[44m','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','--------------------------------------','conditions','delayChatLabel','.fileUrl','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','gifPlayback','deleteInstance','Network\x20interfaces\x20detected:\x20','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','instance.','console','GROUPS_UPSERT','randomMac','):\x20Envio\x20interrompido\x20devido\x20a\x20UUID\x20de\x20processo\x20não\x20corresponder.','editFlowGroup','delayMessage','request\x20received\x20in\x20createFlow','):\x20this.processingGroup._id:\x20','local_map','updateGroupsAddPrivacy','post','):\x20Procurando\x20conversa','.\x20Pulando.','.ppt','createServer','editflowreply','end','capitalizedWords','CLEANING_INTERVAL','):\x20enviado\x20para\x20[','):\x20Ignoring\x20group\x20messages.','notify','/events/:instance','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','groupJoinApprovalMode','round','method','Erro\x20ao\x20normalizar\x20a\x20mensagem:','EXPIRIN_IN','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','DELETED','use','Resultado\x20da\x20correspondência\x20de\x20URL:','dataValidate','Erro\x20ao\x20buscar\x20a\x20conversa','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp','viewOnceMessage','setUpdate','command','Partes\x20do\x20domínio:','\x27...','all_member_add','updateConversation',',\x20Resultado:\x20','findRealGroups','deleteAll','writeFileSync','sections','getUniqueFlowName','updateProfileName','dbClient','../env.yml','#64c4ff','removeProfilePicture','number','profilePictureUrl','):\x20newSecondValue\x20após\x20replaceVariables:','editChat','canSendMessage','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','isURL','output','\x20horas\x20e\x20','content-type','longitude','flowActive','prototype','sendMedia','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','send','match','editConversation','leadInfo.etiquetas','_sender','buttonId','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','convert','myAppStateKeyId','contentText','nomecompleto','image','stack','cacheContactModel','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','Log\x20out\x20instance:\x20','sendLocation','AddChatLabel','createIPv6','.mp3','URL:','Erro\x20ao\x20deletar\x20a\x20conversa','header','https://github.com/uazapi/uazapi.git','Erro\x20ao\x20executar\x20bulkWrite:','editflowvariable','):\x20Rótulo\x20atualizado:\x20','and','Nenhum\x20chat\x20encontrado\x20para\x20editar.','updatePrivacySettings','getMIMEType','./.git/config','Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups','processclearVariables','saveConversationToDatabase','stickerMessage','groupLeave','getDevice','groupJid','video','processApiRequest','variablesNotFound','STORE_MESSAGE','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','ContactModel','static','14pCRlVq','router','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','lastInteraction','readFile','Pausado\x20por\x20','Database\x20update\x20result:','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27','Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20',',\x20Comparador:\x20','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','ip\x20-6\x20addr\x20del\x20','group','stopMinutesMaxActives','folder','owner','createHash','Erro\x20ao\x20editar\x20agentes','lean','participants','no.connection','replaceVariables','214561FjxuYa','\x20and\x20data:','Erro\x20ao\x20tentar\x20updateCustomFields','testIPv6','ListMessage','superadmin','allflows',']\x20(','):Business\x20profile\x20fetched','remove','request_method','editFlowBlock','all','https://v6.ident.me','upperCase','dbServer','processgoToFlow','findOrCreate','selectableCount','\x22\x20-\x20NOT\x20CONNECTION','bodyString','Chat\x20com\x20ID\x20','\x1b[33m%s\x1b[0m','Selecione','updateMissingTags','):\x20Removendo\x20\x27','hGet','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','RemoveChatLabel','Falha\x20ao\x20processar\x20a\x20solicitação\x20findRealGroups','messages','Variável\x20não\x20encontrada!','Novo\x20IP\x20criado:\x20','verifyWhatsAppNumber','writeFile','joinGroup','leaveGroup','messages.set','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.',',\x20Expiration\x20Time:\x20','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','@g.us','groupFetchAllParticipating','hasOwnProperty','hDel','StatusJidList\x20is\x20required','):\x20Enviando\x20enquete','open','DEBUG','TEL','.gif','chat\x20não\x20encontrado','sha256','STATUS_INSTANCE','Router','):\x20debug\x20alterando\x20this.AutomateSystem','\x1b[41m','vcard','contact','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','\x20minutos','ContactsAndGroups','endsWith','createInstance','ORG:','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','fora\x20do\x20git','closeExistingConversations','):\x20Query\x20params:',',\x20Novo\x20tamanho:\x20','INFO','DATABASE_CONNECTION_URI','app','max','SERVER_PORT','phoneNumber','application/octet-stream','DELIVERY_ACK','evaluateConditionTest','bateu\x20events','Erro\x20ao\x20copiar\x20o\x20documento','makeCacheableSignalKeyStore','):\x20Ler\x20mensagem','ip\x20-br\x20link\x20show','padEnd','):Temp\x20image\x20deleted','Erro\x20ao\x20atualizar\x20agendamento\x20','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','https://jsonip.com','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','message','):\x20delete\x20=\x20true','archived','checkAndRestartProcess','replaceVariablesInObject','messageHandle','):\x20conversation.lastInteraction:\x20','lastUpdate','request\x20received\x20in\x20getAutomateSystem','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','enviado\x20para','#dfaef0','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','.jwt','defineProperty','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting','info','Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral','https://chat.whatsapp.com/','addReplyOption',',\x20resultado:\x20','whoCanUse','announcement','verify','Cannot\x20','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','normalizeMessageContent','awaitSeconds','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact','parseInt','activatedCount','userDevicesCache','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','jid','editFlowReply','):\x20Adicionando\x20\x27','ChatModel','):Sending\x20audio\x20whatsapp','Error\x20writing\x20file:\x20','reorderReplyOptions','Not\x20Found','RECONNECT_TIME_FRAME','):\x20Fluxo\x20\x27','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','Forbidden','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','ButtonsMessage','HOST','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','BufferJSON','\x20-i\x20','fetchProfile','empty','getUpdate','request_time','cachedContacts-whatsapp','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','generateRandomIPv6','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','contacts.upsert','username',',\x20Segundo\x20Valor:\x20','values','):\x20Enviando\x20áudio','hex','_error','mediaSticker','):\x20Fluxos\x20não\x20estão\x20ativados','saveTextReply','utf8','agents','base64','reactionMessage','Comando\x20desconhecido','/startFlow/:instance/:startID','.jpg','):\x20Criou\x20conversa\x20no\x20startFlow','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','Database\x20connection\x20closed.','Error\x20updating\x20message\x20status:','reorderMessages','Not\x20allowed\x20by\x20CORS','-instances','AUTHENTICATION_JWT_SECRET','groupBetterSetting','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:','setWebhook','Bad\x20Request','FULLCHAIN','senderKeyDistributionMessage','Fluxo\x20não\x20encontrado\x20na\x20memória.','request\x20received\x20in\x20updateFlowConfig','):\x20Enviando\x20contato','default','dark','replaceOne','getContentType','admin_add','entries','reaction','min','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','HeaderType','getFlow','events','50mb','ObjectId','Font\x20is\x20required','getVariablesChat','qrcode-terminal','/instance/connectionState','demote','Erro\x20ao\x20inserir\x20chats:','replaceValue','Instance\x20ID:','\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','Parando\x20aplicação...','findFlow','state','linkPreview','fetchMessages','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','http://checkip.dyndns.org','/wa-message','https://api64.ipify.org?format=json','fetchStatus','axios','.mimetype','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','importChats','error','LOG','LOG_COLOR','fromObject','):\x20Buscando\x20flow,\x20id:\x20','chats.update','pollCreationMessage','getContactModelForOwner','Message','lastCondition','):\x20teve\x20mudanças\x20chat.archived:\x20','updateProfilePicturePrivacy','trimmed','normalizeMessage','121968ewVUbf','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','!cmd_','extractMessageContent','create','):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20','):Image\x20path:\x20','mentioned','Falhou\x20ao\x20encontrar\x20chat\x20','remoteJid','152wKqUAD','Database\x20is\x20not\x20enabled','block','enumerable','/wa-connection-update','GROUPS_UPDATE','basename','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','setRestartTimeout','name','):\x20Entrou\x20na\x20função\x20stop','):\x20Criando\x20nova\x20conversa[createNewConversation]','Erro\x20ao\x20tentar\x20autoCompleteMessages','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','):\x20Falha\x20ao\x20deletar\x20mensagem.','testingWith','next_groupId','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','waInstances','sendReaction','creation','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','listMessage','):\x20whoCanUse\x20before\x20validation:\x20','expiration','CacheContacts\x20database\x20connection\x20closed.','shareFlow','fileName','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','sendDataWebhook','closed','preview','Erro\x20ao\x20iniciar\x20fluxo:\x20','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','existsSync','createFlow','keyPattern','Module\x20-\x20ON','toDataURL','description','clearVariables','startFlow','Filtered\x20network\x20interfaces:\x20','findIndex','expression','\x20-y','editFlowVariable','tags','pino','secondValue','editflow','URL\x20não\x20disponível','URI','startFlowWebhook','firstValue','):\x20nextBlock.uazapi.name','isLong','data','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','\x22reaction\x22\x20must\x20be\x20an\x20emoji','downloadMediaMessage','announce','AUTHENTICATION_TYPE','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','defineAuthState','buffer','processConditionsTest','enabled','\x1b[30m%s\x1b[0m','\x20is\x20already\x20in\x20use.','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20','updateGroupWebhook','Erro\x20ao\x20editar\x20o\x20bloco:\x20','scheduleMessage','document','instanceKeys','text','.\x20Aguardando\x20','E-mail:\x20','path','keep-alive','requestFile','collection','isJidGroup','pollMessageOnDelete','sem\x20texto\x20na\x20mensagem','insert','authModel','Authentication\x20error','CORS_ORIGIN','authState','SSL_CONF','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','profilePicture','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','label_jid','website','):\x20Parar\x20função\x20pois\x20não\x20está\x20conectado','latitude','deleteImportedChat','updateOne','deviceSentMessage','express','toBRL','updateOnlinePrivacy','proto','__esModule','updateMediaMessage','Instância:\x20','request\x20received\x20in\x20editConversation','pollMessage','stopIfLastReturnedError','):\x20Mensagem\x20já\x20enviada\x20para\x20','delay','):\x20Editando\x20edição\x20do\x20fluxo...','close','loadWebhook','\x1b[1m\x1b[37m','option','cacheContact','):\x20\x27Enviando\x20mídia\x20para\x20\x27','eventEmitter','groupadd','whatsappNumbers','messaging-history.set','DaysToDelete','):\x20Error\x20processing\x20the\x20block:\x20','notMatchRegex','createJid','newValue','toggleEphemeral','generateHash','Sistema\x20atualizado\x20com\x20sucesso!','hbs','):\x20Editando\x20condição\x20do\x20fluxo...','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','Erro\x20ao\x20buscar\x20fluxos:','Safari','SSL_CONF_FULLCHAIN','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','connectedClient','Erro\x20inesperado\x20em\x20processvaredits:\x20','getGroupMetadataCache','groupUpdateSubject','isArray','isCommunity','groups.update','statusMessage','groupDesc','action','sendStatus','mediaKey','PASSWORD','@broadcast','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','):Image\x20is\x20base64','chatModify','ephemeralMessage','refused','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','IPv6\x20recriado\x20após\x20falhas\x20de\x20reconexão.','call','whatsappNumber','mediatype','pow','):Delete\x20chat\x20in\x20client\x20for\x20number:\x20','localWebhook','delAll','recebido\x20de','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','lastFetchAwaitingApproval','notas','downloads','stopConversation','isValidIPv6Config','leadInfo','\x1b[43m','inner','status','/instance/delete','pm2\x20flush','/webhook','updateReadReceiptsPrivacy','msgRetryCounterCache','\x0aFN:','contactMessage','findByIdAndDelete','STORE_CHATS','insertMany','detectIPv6PrefixAndInterface','chatHandle','Error\x20in\x20scheduleNextCheck:\x20','#9ba6ff','Partes\x20do\x20caminho\x20FULLCHAIN:','):\x20Conversa\x20atualizada\x20em\x20memória','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','request\x20received\x20in\x20editFlowgroup','stopMinutes','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus','\x20inseridas\x20no\x20banco\x20de\x20dados...','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','):\x20Query\x20params:\x20','hSet','quoted','updateChatGroupData','deleteConversation','):\x20Bloco\x20com\x20ID\x20','Valor\x20de\x20find\x20ou\x20replace\x20ausente','instanceName\x20not\x20provided.','https://api.ipify.org?format=json','/media','request\x20received\x20in\x20editFlowvariable','flowPrefixCommand','stopWhenYouSendMsg','envYaml','noConnection','[all]','iniciando\x20fluxo\x20router','not_announcement','joinApprovalMode','\x1b[36m%s\x1b[0m','):\x20Atualizando\x20status\x20da\x20mensagem\x20','Type\x20not\x20found','editFlowCondition','mongodb://','some','\x1b[1m','lastMessage','content','loadInstance','Instance\x20Name:','contacts','profileName','findOneAndUpdate','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','qrcode','):\x20Deletando\x20conversa...','FlowRouter','PLAYED','flowConfig','authService','uazapiSendMenu','recording','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','node-mime-types','Instâncias\x20removidas:\x20','Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...','):\x20Limpando\x20delayMessage','count','Erro\x20ao\x20buscar\x20Schedule\x20Messages','\x5cd+','Bloco\x20com\x20ID\x20','):\x20Editando\x20bloco...','):Image\x20is\x20url','originalUrl','Last\x20message\x20not\x20found','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','updateOneById','copyBlock','Request\x20Body:','eventHandler','instance','getBase64FromMediaMessage','Usando\x20IP\x20existente:\x20','SERVER','Fluxo\x20agendado\x20pelo\x20fluxo\x20','startCommandWord','ReplyOption\x20com\x20ID\x20','SECRET','prepareMediaMessage','status@broadcast','\x20:\x20','from','vote','sendButtons','findGroupInfos','varedit','TEXT','REDIS','choices','query','imported','Instância\x20não\x20encontrada.','generateWAMessageFromContent','poll','DB_PREFIX_NAME','#01d0e2','?timestamp=','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','arraybuffer','abs','footerText','update','map','data:\x20','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','Flow\x20iniciado','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','global','.type','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','verbose','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','telefone'];a0_0x5236=function(){return _0x1b740f;};return a0_0x5236();}var Da={'jwt':Io,'apikey':To},mi=require('express'),E=require(a0_0x34b2dc(0x28b)),C=(..._0x26006d)=>{const _0x3298fe=a0_0x34b2dc;let _0xce5323={};return _0x26006d[_0x3298fe(0x3f2)](_0x20c326=>_0xce5323[_0x20c326]={'minLength':0x1,'description':'The\x20\x22'+_0x20c326+_0x3298fe(0x7a4)}),{'if':{'propertyNames':{'enum':[..._0x26006d]}},'then':{'properties':_0xce5323}};},v={'$id':(0x0,E['v4'])(),'type':'object','properties':{'instanceName':{'type':a0_0x34b2dc(0x47d)}},...C(a0_0x34b2dc(0x402))},mc={'$id':(0x0,E['v4'])(),'type':'object','properties':{'oldToken':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x8ef)],...C(a0_0x34b2dc(0x8ef))},fc={'properties':{'key':{'type':a0_0x34b2dc(0x89b),'properties':{'id':{'type':a0_0x34b2dc(0x47d)},'remoteJid':{'type':a0_0x34b2dc(0x47d)},'fromMe':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]}},'required':['id',a0_0x34b2dc(0x668),'fromMe'],...C('id',a0_0x34b2dc(0x668))},'message':{'type':a0_0x34b2dc(0x89b)}}},ae={'properties':{'delay':{'type':a0_0x34b2dc(0x384),'description':a0_0x34b2dc(0x428)},'presence':{'type':a0_0x34b2dc(0x47d),'enum':[a0_0x34b2dc(0x486),'available',a0_0x34b2dc(0x1ed),a0_0x34b2dc(0x75c),a0_0x34b2dc(0x843)]}}},Z={'type':'string','description':'Invalid\x20format'},ka={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'number':{...Z},'options':{...ae},'textMessage':{'type':'object','properties':{'text':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x6b6)],...C(a0_0x34b2dc(0x6b6))}},'required':[a0_0x34b2dc(0x876),a0_0x34b2dc(0x51e)]},La={'type':a0_0x34b2dc(0x47d),'pattern':a0_0x34b2dc(0x30c),'description':a0_0x34b2dc(0x31e)},wc={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...La},'options':{...ae},'textMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'text':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x6b6)],...C(a0_0x34b2dc(0x6b6))}},'required':[a0_0x34b2dc(0x876),a0_0x34b2dc(0x51e)]},yc={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'number':{...La},'options':{...ae},'mediaMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'mediatype':{'type':a0_0x34b2dc(0x47d),'enum':[a0_0x34b2dc(0x539),a0_0x34b2dc(0x6b4),a0_0x34b2dc(0x555),'audio']},'media':{'type':a0_0x34b2dc(0x47d)},'fileName':{'type':a0_0x34b2dc(0x47d)},'caption':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x70d),a0_0x34b2dc(0x4c8)],...C('fileName',a0_0x34b2dc(0x39d),a0_0x34b2dc(0x4c8))}},'required':[a0_0x34b2dc(0x80a),a0_0x34b2dc(0x51e)]},Fa={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'number':{...Z},'options':{...ae},'stickerMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'image':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x539)],...C('image')}},'required':[a0_0x34b2dc(0x551),a0_0x34b2dc(0x51e)]},Ua={'$id':(0x0,E['v4'])(),'type':'object','properties':{'statusMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'type':{'type':a0_0x34b2dc(0x47d),'enum':[a0_0x34b2dc(0x6b6),a0_0x34b2dc(0x539),a0_0x34b2dc(0x389),a0_0x34b2dc(0x555)]},'content':{'type':'string'},'caption':{'type':'string'},'backgroundColor':{'type':a0_0x34b2dc(0x47d)},'font':{'type':a0_0x34b2dc(0x384),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x34b2dc(0x2ae),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x34b2dc(0x47d),'pattern':'^\x5cd+','description':a0_0x34b2dc(0x2bc)}},'allContacts':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['type',a0_0x34b2dc(0x74e)],...C('type',a0_0x34b2dc(0x74e))}},'required':[a0_0x34b2dc(0x6fd)]},ja={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'number':{...Z},'options':{...ae},'mediaMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'mediatype':{'type':a0_0x34b2dc(0x47d),'enum':[a0_0x34b2dc(0x539),a0_0x34b2dc(0x6b4),a0_0x34b2dc(0x555),a0_0x34b2dc(0x389)]},'media':{'type':a0_0x34b2dc(0x47d)},'fileName':{'type':a0_0x34b2dc(0x47d)},'caption':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x70d),a0_0x34b2dc(0x4c8)],...C(a0_0x34b2dc(0x685),'caption','media')}},'required':[a0_0x34b2dc(0x80a),'number']},Ja={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'number':{...Z},'options':{...ae},'audioMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'audio':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x389)],...C(a0_0x34b2dc(0x389))}},'required':[a0_0x34b2dc(0x82a),'number']},qa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'pollMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'name':{'type':a0_0x34b2dc(0x47d)},'selectableCount':{'type':a0_0x34b2dc(0x51e)},'values':{'type':a0_0x34b2dc(0x2ae),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x34b2dc(0x673),a0_0x34b2dc(0x585),a0_0x34b2dc(0x60d)],...C(a0_0x34b2dc(0x673),a0_0x34b2dc(0x585),'values')}},'required':[a0_0x34b2dc(0x51e),a0_0x34b2dc(0x6d8)]},Va={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'menuMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'text':{'type':'string'},'choices':{'type':a0_0x34b2dc(0x2ae),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x34b2dc(0x6b6),a0_0x34b2dc(0x782)],...C(a0_0x34b2dc(0x6b6),a0_0x34b2dc(0x782))}},'required':['number','menuMessage']},Ga={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'number':{...Z},'options':{...ae},'buttonMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'title':{'type':a0_0x34b2dc(0x47d)},'description':{'type':a0_0x34b2dc(0x47d)},'footerText':{'type':a0_0x34b2dc(0x47d)},'buttons':{'type':a0_0x34b2dc(0x2ae),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x34b2dc(0x89b),'properties':{'buttonText':{'type':a0_0x34b2dc(0x47d)},'buttonId':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x23d),a0_0x34b2dc(0x533)],...C('buttonText',a0_0x34b2dc(0x533))}},'mediaMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'media':{'type':a0_0x34b2dc(0x47d)},'fileName':{'type':a0_0x34b2dc(0x47d)},'mediatype':{'type':a0_0x34b2dc(0x47d),'enum':[a0_0x34b2dc(0x539),a0_0x34b2dc(0x6b4),a0_0x34b2dc(0x555)]}},'required':['media',a0_0x34b2dc(0x70d)],...C(a0_0x34b2dc(0x4c8),a0_0x34b2dc(0x685))}},'required':['title',a0_0x34b2dc(0x80c)],...C(a0_0x34b2dc(0x1f9),'description')}},'required':[a0_0x34b2dc(0x51e),a0_0x34b2dc(0x375)]},Ba={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'locationMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'latitude':{'type':'number'},'longitude':{'type':'number'},'name':{'type':a0_0x34b2dc(0x47d)},'address':{'type':'string'}},'required':[a0_0x34b2dc(0x6cc),a0_0x34b2dc(0x529)],...C(a0_0x34b2dc(0x673),'addresss')}},'required':[a0_0x34b2dc(0x51e),a0_0x34b2dc(0x8bb)]},Wa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'listMessage':{'type':'object','properties':{'title':{'type':a0_0x34b2dc(0x47d)},'description':{'type':a0_0x34b2dc(0x47d)},'footerText':{'type':a0_0x34b2dc(0x47d)},'buttonText':{'type':a0_0x34b2dc(0x47d)},'sections':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x34b2dc(0x89b),'properties':{'title':{'type':a0_0x34b2dc(0x47d)},'rows':{'type':a0_0x34b2dc(0x2ae),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x34b2dc(0x89b),'properties':{'title':{'type':a0_0x34b2dc(0x47d)},'description':{'type':a0_0x34b2dc(0x47d)},'rowId':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x1f9),a0_0x34b2dc(0x873)],...C(a0_0x34b2dc(0x1f9),a0_0x34b2dc(0x873))}}},'required':[a0_0x34b2dc(0x1f9),a0_0x34b2dc(0x424)],...C(a0_0x34b2dc(0x1f9))}}},'required':['title',a0_0x34b2dc(0x691),a0_0x34b2dc(0x23d),a0_0x34b2dc(0x517)],...C(a0_0x34b2dc(0x1f9),a0_0x34b2dc(0x691),a0_0x34b2dc(0x23d),a0_0x34b2dc(0x78e))}},'required':[a0_0x34b2dc(0x51e),a0_0x34b2dc(0x680)]},za={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'contactMessage':{'type':a0_0x34b2dc(0x2ae),'items':{'type':a0_0x34b2dc(0x89b),'properties':{'fullName':{'type':a0_0x34b2dc(0x47d)},'phoneNumber':{'type':'string','minLength':0xa}},'required':[a0_0x34b2dc(0x478),a0_0x34b2dc(0x5bf)],...C('fullName')},'minItems':0x1,'uniqueItems':!0x0}},'required':['number','contactMessage']},Ha={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'reactionMessage':{'type':'object','properties':{'key':{'type':a0_0x34b2dc(0x89b),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x34b2dc(0x47d)},'fromMe':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]}},'required':['id',a0_0x34b2dc(0x668),a0_0x34b2dc(0x464)],...C('id',a0_0x34b2dc(0x668))},'reaction':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x85f),'reaction'],...C(a0_0x34b2dc(0x632))}},'required':[a0_0x34b2dc(0x617)]},Ka={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'numbers':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x34b2dc(0x47d),'pattern':'^\x5cd+','description':a0_0x34b2dc(0x5ae)}}}},Qa={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'readMessages':{'type':a0_0x34b2dc(0x2ae),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x34b2dc(0x47d)},'fromMe':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'remoteJid':{'type':'string'}},'required':['id',a0_0x34b2dc(0x464),a0_0x34b2dc(0x668)],...C('id',a0_0x34b2dc(0x668))}}},'required':[a0_0x34b2dc(0x84c)]},Ya={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'privacySettings':{'type':'object','properties':{'readreceipts':{'type':'string','enum':['all','none']},'profile':{'type':a0_0x34b2dc(0x47d),'enum':[a0_0x34b2dc(0x57f),'contacts','contact_blacklist',a0_0x34b2dc(0x7c1)]},'status':{'type':a0_0x34b2dc(0x47d),'enum':[a0_0x34b2dc(0x57f),'contacts','contact_blacklist',a0_0x34b2dc(0x7c1)]},'online':{'type':a0_0x34b2dc(0x47d),'enum':[a0_0x34b2dc(0x57f),a0_0x34b2dc(0x272)]},'last':{'type':'string','enum':['all','contacts','contact_blacklist','none']},'groupadd':{'type':a0_0x34b2dc(0x47d),'enum':[a0_0x34b2dc(0x57f),a0_0x34b2dc(0x751),a0_0x34b2dc(0x314),'none']}},'required':[a0_0x34b2dc(0x3c2),'profile',a0_0x34b2dc(0x71c),'online',a0_0x34b2dc(0x3bb),a0_0x34b2dc(0x6e4)],...C(a0_0x34b2dc(0x3c2),a0_0x34b2dc(0x324),a0_0x34b2dc(0x71c),'online',a0_0x34b2dc(0x3bb),a0_0x34b2dc(0x6e4))}},'required':[a0_0x34b2dc(0x379)]},Xa={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'lastMessage':{'type':a0_0x34b2dc(0x89b),'properties':{'key':{'type':a0_0x34b2dc(0x89b),'properties':{'id':{'type':a0_0x34b2dc(0x47d)},'remoteJid':{'type':a0_0x34b2dc(0x47d)},'fromMe':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]}},'required':['id',a0_0x34b2dc(0x464),a0_0x34b2dc(0x668)],...C('id',a0_0x34b2dc(0x668))},'messageTimestamp':{'type':'integer','minLength':0x1}},'required':['key'],...C('messageTimestamp')},'archive':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]}},'required':[a0_0x34b2dc(0x74d),a0_0x34b2dc(0x494)]},Za={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'id':{'type':'string'},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x34b2dc(0x47d)},'participant':{'type':'string'}},'required':['id',a0_0x34b2dc(0x464),a0_0x34b2dc(0x668)],...C('id',a0_0x34b2dc(0x668),'participant')},ei={'$id':(0x0,E['v4'])(),'type':'object','properties':{'where':{'type':a0_0x34b2dc(0x89b),'properties':{'_id':{'type':a0_0x34b2dc(0x47d),'minLength':0x1},'pushName':{'type':a0_0x34b2dc(0x47d),'minLength':0x1},'id':{'type':a0_0x34b2dc(0x47d),'minLength':0x1}},...C('_id','id',a0_0x34b2dc(0x414))}}},ti={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'name':{'type':a0_0x34b2dc(0x47d)}},...C(a0_0x34b2dc(0x673))},si={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'status':{'type':a0_0x34b2dc(0x47d)}},...C(a0_0x34b2dc(0x71c))},xe={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'number':{'type':a0_0x34b2dc(0x47d)},'picture':{'type':'string'}}},ai={'type':a0_0x34b2dc(0x89b),'properties':{'wuid':{'type':a0_0x34b2dc(0x47d)},'name':{'type':'string'},'picture':{'type':a0_0x34b2dc(0x47d)},'status':{'type':a0_0x34b2dc(0x47d)},'isBusiness':{'type':a0_0x34b2dc(0x40e)}}},ii={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'where':{'type':a0_0x34b2dc(0x89b),'properties':{'_id':{'type':a0_0x34b2dc(0x47d),'minLength':0x1},'key':{'type':a0_0x34b2dc(0x89b),'if':{'propertyNames':{'enum':[a0_0x34b2dc(0x464),a0_0x34b2dc(0x668),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x34b2dc(0x47d),'minLength':0x1,'description':a0_0x34b2dc(0x453)},'id':{'type':a0_0x34b2dc(0x47d),'minLength':0x1,'description':a0_0x34b2dc(0x453)},'fromMe':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x34b2dc(0x89b)}},...C(a0_0x34b2dc(0x2c7))},'limit':{'type':a0_0x34b2dc(0x384)}}},bc={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'where':{'type':a0_0x34b2dc(0x89b),'properties':{'_id':{'type':a0_0x34b2dc(0x47d)},'remoteJid':{'type':a0_0x34b2dc(0x47d)},'id':{'type':'string'},'fromMe':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x34b2dc(0x47d)},'status':{'type':a0_0x34b2dc(0x47d),'enum':[a0_0x34b2dc(0x7de),a0_0x34b2dc(0x1f6),'SERVER_ACK',a0_0x34b2dc(0x5c1),'READ','PLAYED']}},...C(a0_0x34b2dc(0x2c7),'remoteJid','id','status')},'limit':{'type':'integer'}}},oi={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'number':{...Z},'presence':{'type':a0_0x34b2dc(0x47d),'enum':['unavailable','available',a0_0x34b2dc(0x1ed),a0_0x34b2dc(0x75c),a0_0x34b2dc(0x843)]}},'required':['presence',a0_0x34b2dc(0x51e)]},ri={'$id':(0x0,E['v4'])(),'type':'object','properties':{'subject':{'type':a0_0x34b2dc(0x47d)},'description':{'type':'string'},'profilePicture':{'type':a0_0x34b2dc(0x47d)},'participants':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x34b2dc(0x47d),'minLength':0xa,'pattern':a0_0x34b2dc(0x764),'description':'\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}},'required':['subject',a0_0x34b2dc(0x570)],...C(a0_0x34b2dc(0x256),'description',a0_0x34b2dc(0x6c7))},De={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'groupJid':{'type':'string','pattern':'^\x5cd+([-]\x5cd+)*@g.us$'}},'required':[a0_0x34b2dc(0x554)],...C('groupJid')},ni={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x34b2dc(0x47d)},'action':{'type':'string','enum':[a0_0x34b2dc(0x420),a0_0x34b2dc(0x57c),'promote',a0_0x34b2dc(0x63e),a0_0x34b2dc(0x3b4),'approve']},'participants':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x34b2dc(0x47d),'minLength':0xa,'pattern':'\x5cd+','description':a0_0x34b2dc(0x83e)}}},'required':['groupJid',a0_0x34b2dc(0x6ff),a0_0x34b2dc(0x570)],...C('groupJid',a0_0x34b2dc(0x6ff))},ci={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'groupJid':{'type':a0_0x34b2dc(0x47d)},'expiration':{'type':a0_0x34b2dc(0x51e),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x34b2dc(0x554),a0_0x34b2dc(0x682)],...C(a0_0x34b2dc(0x554),a0_0x34b2dc(0x682))},li={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x34b2dc(0x47d)},'image':{'type':'string'}},'required':['groupJid',a0_0x34b2dc(0x539)],...C(a0_0x34b2dc(0x554),'image')},ui={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'groupJid':{'type':'string'},'description':{'type':'string'}},'required':[a0_0x34b2dc(0x554),a0_0x34b2dc(0x691)],...C(a0_0x34b2dc(0x554),'description')},di={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x34b2dc(0x47d)},'name':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x554),a0_0x34b2dc(0x673)],...C(a0_0x34b2dc(0x554),a0_0x34b2dc(0x673))},pi={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'groupJid':{'type':'string'},'setting':{'type':a0_0x34b2dc(0x47d),'enum':[a0_0x34b2dc(0x5e5),a0_0x34b2dc(0x744),a0_0x34b2dc(0x325),a0_0x34b2dc(0x869)]}},'required':[a0_0x34b2dc(0x554),'setting'],...C(a0_0x34b2dc(0x554),a0_0x34b2dc(0x1f2))},hi={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x34b2dc(0x47d)},'restrict':{'type':'boolean'},'announce':{'type':a0_0x34b2dc(0x40e)},'memberAddMode':{'type':'boolean'},'joinApprovalMode':{'type':'boolean'},'expiration':{'type':a0_0x34b2dc(0x384),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x34b2dc(0x47d)},'description':{'type':a0_0x34b2dc(0x47d)},'image':{'type':'string'}}},$s={'$id':(0x0,E['v4'])(),'type':'object','properties':{'inviteCode':{'type':a0_0x34b2dc(0x47d)}},'required':[a0_0x34b2dc(0x2cc)],...C(a0_0x34b2dc(0x2cc))},gi={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'url':{'type':a0_0x34b2dc(0x47d)},'enabled':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]}},'required':[a0_0x34b2dc(0x931),a0_0x34b2dc(0x6ad)]},Sc={'$id':(0x0,E['v4'])(),'type':a0_0x34b2dc(0x89b),'properties':{'local_map':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':'boolean','enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x34b2dc(0x40e),'enum':[!0x0,!0x1]}},'required':['local_map',a0_0x34b2dc(0x5a8),'QRCODE_UPDATED',a0_0x34b2dc(0x7f5),a0_0x34b2dc(0x377),a0_0x34b2dc(0x4d4),a0_0x34b2dc(0x2ce),a0_0x34b2dc(0x312),a0_0x34b2dc(0x850),a0_0x34b2dc(0x3f6),'PRESENCE_UPDATE',a0_0x34b2dc(0x2c9),a0_0x34b2dc(0x39b),a0_0x34b2dc(0x345),a0_0x34b2dc(0x895),a0_0x34b2dc(0x894),a0_0x34b2dc(0x4e9),a0_0x34b2dc(0x66e),'GROUP_PARTICIPANTS_UPDATE'],...C(a0_0x34b2dc(0x4f0),a0_0x34b2dc(0x5a8),a0_0x34b2dc(0x2a2),'MESSAGES_SET',a0_0x34b2dc(0x377),a0_0x34b2dc(0x4d4),a0_0x34b2dc(0x2ce),'CONTACTS_SET',a0_0x34b2dc(0x850),a0_0x34b2dc(0x3f6),'PRESENCE_UPDATE',a0_0x34b2dc(0x2c9),'CHATS_UPSERT',a0_0x34b2dc(0x345),'CHATS_DELETE',a0_0x34b2dc(0x894),a0_0x34b2dc(0x4e9),a0_0x34b2dc(0x66e),a0_0x34b2dc(0x206))},ct=class{},lt=class extends _{[a0_0x34b2dc(0x658)](_0x47e0c6){return oa(_0x47e0c6);}async[a0_0x34b2dc(0x6c0)](_0x497e86){const _0x585f53=a0_0x34b2dc;if(_0x497e86['length']!==0x0)try{return{'insertCount':(await this[_0x585f53(0x658)](_0x497e86[0x0][_0x585f53(0x56c)])[_0x585f53(0x726)]([..._0x497e86]))['length']};}catch(_0x1f111d){return _0x1f111d;}}async[a0_0x34b2dc(0x366)](_0x32a4c8,_0x2c49e9){const _0x3f1a52=a0_0x34b2dc;try{return{'deletedCount':(await this[_0x3f1a52(0x658)](_0x2c49e9)['deleteMany']({..._0x32a4c8[_0x3f1a52(0x349)]}))[_0x3f1a52(0x35c)]};}catch(_0x2d5c65){return{'error':_0x2d5c65?.[_0x3f1a52(0x1fe)]()};}}async['update'](_0xb2d938,_0x17fc31){const _0xd72228=a0_0x34b2dc;try{if(_0xb2d938[_0xd72228(0x3a3)]===0x0)return;let _0x6146a6=this[_0xd72228(0x658)](_0x17fc31),_0x452c7c=_0xb2d938['map'](_0x182cd0=>({'updateOne':{'filter':{'_id':_0x182cd0[_0xd72228(0x2c7)],'owner':_0x17fc31},'update':{..._0x182cd0}}})),{modifiedCount:_0x27fe70}=await _0x6146a6['bulkWrite'](_0x452c7c);return{'insertCount':_0x27fe70};}catch{return;}}async['find'](_0x2fdcba,_0x524f41){const _0x4dd961=a0_0x34b2dc;try{let _0x1508cb=this[_0x4dd961(0x658)](_0x524f41),_0x271a21=A(_0x2fdcba[_0x4dd961(0x349)]);return await _0x1508cb[_0x4dd961(0x253)](_0x271a21)[_0x4dd961(0x216)](_0x2fdcba?.['limit']??0x0)['lean']();}catch{return[];}}async[a0_0x34b2dc(0x440)](_0x562362,_0x1c8249){const _0x81443e=a0_0x34b2dc;try{let _0x412b2f=this[_0x81443e(0x658)](_0x1c8249),_0xd4c387=A(_0x562362['where']);return await _0x412b2f[_0x81443e(0x440)](_0xd4c387)['lean']();}catch{return null;}}async[a0_0x34b2dc(0x515)](_0x497f20){const _0x5287d8=a0_0x34b2dc;try{return await this['getContactModelForOwner'](_0x497f20)['collection'][_0x5287d8(0x8b5)](),{'success':!0x0};}catch(_0x3f5747){return console['error'](_0x3f5747),{'success':!0x1,'error':_0x3f5747};}}},ut=require(a0_0x34b2dc(0x29f)),Ic=require(a0_0x34b2dc(0x242)),Rs=new $(a0_0x34b2dc(0x427)),G=class{[a0_0x34b2dc(0x92d)](_0xc15b6a,_0x26a74b=!0x0){const _0x4d7566=a0_0x34b2dc;let _0xca8207='/'+_0xc15b6a;return _0x26a74b&&(_0xca8207+=_0x4d7566(0x34e)),_0xca8207;}async[a0_0x34b2dc(0x509)](_0x1a5c9c){const _0x4d4e84=a0_0x34b2dc;let {request:_0x292048,schema:_0x39bf8c,ClassRef:_0x54af01,execute:_0x5b5197}=_0x1a5c9c,_0xcb2813=new _0x54af01(),_0x441c59=_0x292048['body'],_0x4bd8bd=_0x292048['params'];_0x292048?.['query']&&Object[_0x4d4e84(0x37c)](_0x292048[_0x4d4e84(0x783)])['length']>0x0&&Object[_0x4d4e84(0x2c4)](_0x4bd8bd,_0x292048[_0x4d4e84(0x783)]),_0x292048[_0x4d4e84(0x768)][_0x4d4e84(0x4c4)](_0x4d4e84(0x833))&&Object[_0x4d4e84(0x2c4)](_0x4bd8bd,_0x441c59),Object[_0x4d4e84(0x2c4)](_0xcb2813,_0x441c59);let _0x3dfef1=_0x39bf8c?(0x0,ut[_0x4d4e84(0x8e3)])(_0xcb2813,_0x39bf8c):{'valid':!0x0,'errors':[]};if(!_0x3dfef1['valid']){let _0x28b955=_0x3dfef1[_0x4d4e84(0x249)][_0x4d4e84(0x790)](({property:_0xb07322,stack:_0x288be0,schema:_0xf9c0ba})=>{const _0x772087=_0x4d4e84;let _0x186c44;return _0xf9c0ba['description']?_0x186c44=_0xf9c0ba[_0x772087(0x691)]:_0x186c44=_0x288be0[_0x772087(0x2a1)]('instance.',''),{'property':_0xb07322[_0x772087(0x2a1)](_0x772087(0x4e7),''),'message':_0x186c44};});throw Rs['error']([..._0x28b955]),new m(..._0x28b955);}return await _0x5b5197(_0x4bd8bd,_0xcb2813);}async[a0_0x34b2dc(0x864)](_0x17db90){const _0x54df71=a0_0x34b2dc;let {request:_0x27c0ed,ClassRef:_0x188b60,schema:_0x1d1a41,execute:_0x1504e5}=_0x17db90,_0x1cd806=_0x27c0ed[_0x54df71(0x783)];if(!_0x1cd806?.[_0x54df71(0x554)])throw new m('The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query',_0x54df71(0x3a2));let _0x2bd0b6=_0x27c0ed[_0x54df71(0x38d)],_0x3706df=_0x27c0ed['body'],_0x59c8c4=new _0x188b60();Object[_0x54df71(0x2c4)](_0x3706df,_0x1cd806),Object['assign'](_0x59c8c4,_0x3706df);let _0x46f28c=(0x0,ut[_0x54df71(0x8e3)])(_0x59c8c4,_0x1d1a41);if(!_0x46f28c[_0x54df71(0x936)]){let _0x24780d=_0x46f28c[_0x54df71(0x249)]['map'](({property:_0x2aa89d,stack:_0x4e4225,schema:_0x53a159})=>{const _0x25e1ee=_0x54df71;let _0x15dca6;return _0x53a159[_0x25e1ee(0x691)]?_0x15dca6=_0x53a159[_0x25e1ee(0x691)]:_0x15dca6=_0x4e4225['replace'](_0x25e1ee(0x4e7),''),{'property':_0x2aa89d['replace']('instance.',''),'message':_0x15dca6};});throw Rs['error']([..._0x24780d]),new m(..._0x24780d);}return await _0x1504e5(_0x2bd0b6,_0x59c8c4);}async[a0_0x34b2dc(0x1ec)](_0x4c1760){const _0x28fe50=a0_0x34b2dc;let {request:_0x1f632b,ClassRef:_0x28fac9,schema:_0x40ef11,execute:_0x4c4176}=_0x4c1760,_0x341fda=_0x1f632b[_0x28fe50(0x36e)];if(!_0x341fda?.[_0x28fe50(0x2cc)])throw new m(_0x28fe50(0x4e2),'ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22');let _0x3dcbdd=_0x1f632b[_0x28fe50(0x38d)],_0xae5073=_0x1f632b[_0x28fe50(0x36e)],_0x55fe88=new _0x28fac9();Object['assign'](_0xae5073,_0x341fda),Object[_0x28fe50(0x2c4)](_0x55fe88,_0xae5073);let _0x484e24=(0x0,ut[_0x28fe50(0x8e3)])(_0x55fe88,_0x40ef11);if(!_0x484e24[_0x28fe50(0x936)]){let _0x1c5e58=_0x484e24['errors'][_0x28fe50(0x790)](({property:_0x40cc2e,stack:_0x28e899,schema:_0x45c434})=>{const _0x1572d1=_0x28fe50;let _0x445a00;return _0x45c434[_0x1572d1(0x691)]?_0x445a00=_0x45c434[_0x1572d1(0x691)]:_0x445a00=_0x28e899[_0x1572d1(0x2a1)](_0x1572d1(0x4e7),''),{'property':_0x40cc2e[_0x1572d1(0x2a1)]('instance.',''),'message':_0x445a00};});throw Rs['error']([..._0x1c5e58]),new m(..._0x1c5e58);}return await _0x4c4176(_0x3dcbdd,_0x55fe88);}},M=class{},Gc=new $(a0_0x34b2dc(0x929)),dt=class extends G{constructor(..._0x1c674d){const _0x26b603=a0_0x34b2dc;super(),this['router']=(0x0,mi['Router'])(),this[_0x26b603(0x55d)]['post'](this['routerPath'](_0x26b603(0x25d)),..._0x1c674d,async(_0x267b4f,_0x1fc58c)=>{const _0x5d2949=_0x26b603;let _0x452523=await this['dataValidate']({'request':_0x267b4f,'schema':oi,'ClassRef':Ze,'execute':(_0x5a8bc7,_0x5ee85b)=>k[_0x5d2949(0x25d)](_0x5a8bc7,_0x5ee85b)});return _0x1fc58c[_0x5d2949(0x71c)](0xc9)[_0x5d2949(0x803)](_0x452523);})[_0x26b603(0x4f2)](this[_0x26b603(0x92d)](_0x26b603(0x6e5)),..._0x1c674d,async(_0x144aac,_0x4efe12)=>{const _0x434f1c=_0x26b603;let _0x44c573=await this[_0x434f1c(0x509)]({'request':_0x144aac,'schema':Ka,'ClassRef':et,'execute':(_0x3b9d39,_0x5ec5f0)=>k['whatsappNumber'](_0x3b9d39,_0x5ec5f0)});return _0x4efe12[_0x434f1c(0x71c)](0xc9)[_0x434f1c(0x803)](_0x44c573);})[_0x26b603(0x4f2)](this[_0x26b603(0x92d)](_0x26b603(0x521)),..._0x1c674d,async(_0x31767c,_0x53341a)=>{const _0x245bce=_0x26b603;let _0x45260a=await this[_0x245bce(0x509)]({'request':_0x31767c,'schema':v,'ClassRef':M,'execute':(_0x2ac0ce,_0x3ec9f7)=>k[_0x245bce(0x521)](_0x2ac0ce,_0x3ec9f7)});return _0x53341a['status'](0xc9)['json'](_0x45260a);})[_0x26b603(0x81c)](this['routerPath']('markMessageAsRead'),..._0x1c674d,async(_0x4a72a5,_0x4ee42a)=>{const _0x21012c=_0x26b603;let _0x3b060d=await this[_0x21012c(0x509)]({'request':_0x4a72a5,'schema':Qa,'ClassRef':at,'execute':(_0x561734,_0x2e35de)=>k[_0x21012c(0x93b)](_0x561734,_0x2e35de)});return _0x4ee42a[_0x21012c(0x71c)](0xc9)['json'](_0x3b060d);})[_0x26b603(0x81c)](this['routerPath'](_0x26b603(0x229)),..._0x1c674d,async(_0x233466,_0x2c1f28)=>{const _0x4bfe66=_0x26b603;let _0x1fab8a=await this['dataValidate']({'request':_0x233466,'schema':Xa,'ClassRef':it,'execute':(_0x3b28e3,_0x3c557d)=>k[_0x4bfe66(0x229)](_0x3b28e3,_0x3c557d)});return _0x2c1f28['status'](0xc9)['json'](_0x1fab8a);})[_0x26b603(0x366)](this[_0x26b603(0x92d)](_0x26b603(0x81d)),..._0x1c674d,async(_0x3ee10e,_0x4be8e2)=>{const _0x4a4181=_0x26b603;let _0x22ed93=await this[_0x4a4181(0x509)]({'request':_0x3ee10e,'schema':Za,'ClassRef':rt,'execute':(_0xead1e6,_0x28bb23)=>k['deleteMessage'](_0xead1e6,_0x28bb23)});return _0x4be8e2['status'](0xc9)[_0x4a4181(0x803)](_0x22ed93);})[_0x26b603(0x4f2)](this['routerPath'](_0x26b603(0x830)),..._0x1c674d,async(_0x4ff490,_0x53c340)=>{const _0x3c1c35=_0x26b603;let _0x381564=await this[_0x3c1c35(0x509)]({'request':_0x4ff490,'schema':xe,'ClassRef':Oe,'execute':(_0x48b8a2,_0x5676b2)=>k[_0x3c1c35(0x49d)](_0x48b8a2,_0x5676b2)});return _0x53c340[_0x3c1c35(0x71c)](0xc8)[_0x3c1c35(0x803)](_0x381564);})[_0x26b603(0x4f2)](this[_0x26b603(0x92d)](_0x26b603(0x602)),..._0x1c674d,async(_0x320572,_0xcb5708)=>{const _0x503be3=_0x26b603;let _0x37db8a=await this[_0x503be3(0x509)]({'request':_0x320572,'schema':ai,'ClassRef':Oe,'execute':(_0x413390,_0x55f883)=>k[_0x503be3(0x602)](_0x413390,_0x55f883)});return _0xcb5708[_0x503be3(0x71c)](0xc8)[_0x503be3(0x803)](_0x37db8a);})[_0x26b603(0x4f2)](this[_0x26b603(0x92d)]('findContacts'),..._0x1c674d,async(_0x7e9d46,_0x4a83c8)=>{let _0x3f085d=await this['dataValidate']({'request':_0x7e9d46,'schema':ei,'ClassRef':ct,'execute':(_0xf3689f,_0x181b26)=>k['fetchContacts'](_0xf3689f,_0x181b26)});return _0x4a83c8['status'](0xc8)['json'](_0x3f085d);})['post'](this['routerPath']('getBase64FromMediaMessage'),..._0x1c674d,async(_0x3ead21,_0x30f35f)=>{const _0x28ebab=_0x26b603;let _0x2ad1bd=await this[_0x28ebab(0x509)]({'request':_0x3ead21,'schema':null,'ClassRef':Object,'execute':(_0x1073a6,_0x1c9dde)=>k[_0x28ebab(0x771)](_0x1073a6,_0x1c9dde)});return _0x30f35f[_0x28ebab(0x71c)](0xc9)[_0x28ebab(0x803)](_0x2ad1bd);})[_0x26b603(0x4f2)](this[_0x26b603(0x92d)](_0x26b603(0x27a)),..._0x1c674d,async(_0x3d7007,_0x578705)=>{const _0x395375=_0x26b603;let _0x286a09=await this[_0x395375(0x509)]({'request':_0x3d7007,'schema':ii,'ClassRef':Ye,'execute':(_0xb78ea8,_0x4a7d9a)=>k[_0x395375(0x647)](_0xb78ea8,_0x4a7d9a)});return _0x578705[_0x395375(0x71c)](0xc8)[_0x395375(0x803)](_0x286a09);})[_0x26b603(0x30a)](this[_0x26b603(0x92d)]('findChats'),..._0x1c674d,async(_0xe2e111,_0x566275)=>{const _0x17682b=_0x26b603;let _0x39e364=await this[_0x17682b(0x509)]({'request':_0xe2e111,'schema':null,'ClassRef':M,'execute':_0xf637b8=>k[_0x17682b(0x394)](_0xf637b8)});return _0x566275[_0x17682b(0x71c)](0xc8)[_0x17682b(0x803)](_0x39e364);})[_0x26b603(0x30a)](this[_0x26b603(0x92d)](_0x26b603(0x1f5)),..._0x1c674d,async(_0x144729,_0x599a5d)=>{const _0x8c771=_0x26b603;let _0x2d05e5=await this[_0x8c771(0x509)]({'request':_0x144729,'schema':null,'ClassRef':M,'execute':_0x38dd4e=>k[_0x8c771(0x8d8)](_0x38dd4e)});return _0x599a5d[_0x8c771(0x71c)](0xc8)[_0x8c771(0x803)](_0x2d05e5);})[_0x26b603(0x81c)](this['routerPath'](_0x26b603(0x650)),..._0x1c674d,async(_0x431722,_0x263856)=>{const _0x50c21a=_0x26b603;let _0x34c314=await this['dataValidate']({'request':_0x431722,'schema':null,'ClassRef':Array,'execute':(_0x36305f,_0x192a84)=>k[_0x50c21a(0x650)](_0x36305f,_0x192a84)});return _0x263856[_0x50c21a(0x71c)](0xc8)['json'](_0x34c314);})['get'](this['routerPath'](_0x26b603(0x902)),..._0x1c674d,async(_0x197988,_0x1194b4)=>{const _0x221da5=_0x26b603;let _0x465fbd=await this['dataValidate']({'request':_0x197988,'schema':null,'ClassRef':M,'execute':_0x5a2ada=>k[_0x221da5(0x902)](_0x5a2ada)});return _0x1194b4[_0x221da5(0x71c)](0xc8)[_0x221da5(0x803)](_0x465fbd);})['put'](this[_0x26b603(0x92d)](_0x26b603(0x54b)),..._0x1c674d,async(_0x5a6128,_0x3aad2e)=>{const _0x4dedb4=_0x26b603;let _0x4d5662=await this['dataValidate']({'request':_0x5a6128,'schema':Ya,'ClassRef':ot,'execute':(_0x2ce943,_0x931ef3)=>k[_0x4dedb4(0x54b)](_0x2ce943,_0x931ef3)});return _0x3aad2e['status'](0xc9)[_0x4dedb4(0x803)](_0x4d5662);})[_0x26b603(0x4f2)](this['routerPath']('fetchBusinessProfile'),..._0x1c674d,async(_0x1ec71a,_0x1e5429)=>{const _0x3d7d3b=_0x26b603;let _0x2c3844=await this[_0x3d7d3b(0x509)]({'request':_0x1ec71a,'schema':xe,'ClassRef':ve,'execute':(_0x5099f2,_0x50ae50)=>k['fetchBusinessProfile'](_0x5099f2,_0x50ae50)});return _0x1e5429[_0x3d7d3b(0x71c)](0xc8)[_0x3d7d3b(0x803)](_0x2c3844);})[_0x26b603(0x4f2)](this[_0x26b603(0x92d)](_0x26b603(0x519)),..._0x1c674d,async(_0x3177de,_0x1824f7)=>{const _0x574087=_0x26b603;let _0x1ff013=await this['dataValidate']({'request':_0x3177de,'schema':ti,'ClassRef':tt,'execute':(_0x2bb6f9,_0x1df1ad)=>k[_0x574087(0x519)](_0x2bb6f9,_0x1df1ad)});return _0x1824f7[_0x574087(0x71c)](0xc8)['json'](_0x1ff013);})[_0x26b603(0x4f2)](this[_0x26b603(0x92d)](_0x26b603(0x31b)),..._0x1c674d,async(_0x167f7f,_0x897ef1)=>{const _0x167049=_0x26b603;let _0x347672=await this[_0x167049(0x509)]({'request':_0x167f7f,'schema':si,'ClassRef':st,'execute':(_0x323185,_0x44a39e)=>k[_0x167049(0x31b)](_0x323185,_0x44a39e)});return _0x897ef1[_0x167049(0x71c)](0xc8)[_0x167049(0x803)](_0x347672);})[_0x26b603(0x81c)](this[_0x26b603(0x92d)](_0x26b603(0x44e)),..._0x1c674d,async(_0x43a28b,_0x163211)=>{const _0x9d5a46=_0x26b603;let _0x5e962a=await this[_0x9d5a46(0x509)]({'request':_0x43a28b,'schema':xe,'ClassRef':ve,'execute':(_0x39b12c,_0x4a6a71)=>k['updateProfilePicture'](_0x39b12c,_0x4a6a71)});return _0x163211[_0x9d5a46(0x71c)](0xc8)[_0x9d5a46(0x803)](_0x5e962a);})[_0x26b603(0x366)](this[_0x26b603(0x92d)](_0x26b603(0x51d)),..._0x1c674d,async(_0x75aa16,_0xe0b4fc)=>{const _0x491487=_0x26b603;let _0x48f867=await this['dataValidate']({'request':_0x75aa16,'schema':xe,'ClassRef':ve,'execute':(_0x1a3db5,_0x24f6ee)=>k[_0x491487(0x51d)](_0x1a3db5,_0x24f6ee)});return _0xe0b4fc[_0x491487(0x71c)](0xc8)[_0x491487(0x803)](_0x48f867);});}},fi=require(a0_0x34b2dc(0x6d0)),pt=class{},ht=class{},gt=class{},mt=class{},ft=class{},wt=class{},ie=class{},Pe=class{},yt=class extends ie{},bt=class extends ie{},St=class extends G{constructor(..._0x7ce092){const _0x128ca9=a0_0x34b2dc;super(),this[_0x128ca9(0x55d)]=(0x0,fi[_0x128ca9(0x5a9)])(),this[_0x128ca9(0x55d)][_0x128ca9(0x4f2)](this[_0x128ca9(0x92d)]('create'),..._0x7ce092,async(_0x28452b,_0x1d5d73)=>{const _0x4958d9=_0x128ca9;let _0xd6ac65=await this[_0x4958d9(0x509)]({'request':_0x28452b,'schema':ri,'ClassRef':pt,'execute':(_0x262fbc,_0x336333)=>V['createGroup'](_0x262fbc,_0x336333)});_0x1d5d73[_0x4958d9(0x71c)](0xc9)[_0x4958d9(0x803)](_0xd6ac65);})['put'](this['routerPath'](_0x128ca9(0x40d)),..._0x7ce092,async(_0x35ec9c,_0x5026eb)=>{const _0x435c60=_0x128ca9;let _0xd6e22e=await this['groupValidate']({'request':_0x35ec9c,'schema':li,'ClassRef':ht,'execute':(_0x3af183,_0x2cd611)=>V[_0x435c60(0x40d)](_0x3af183,_0x2cd611)});_0x5026eb[_0x435c60(0x71c)](0xc9)[_0x435c60(0x803)](_0xd6e22e);})[_0x128ca9(0x81c)](this[_0x128ca9(0x92d)]('groupDesc'),..._0x7ce092,async(_0x28fccc,_0x5e9117)=>{const _0x147c35=_0x128ca9;let _0x285545=await this[_0x147c35(0x864)]({'request':_0x28fccc,'schema':ui,'ClassRef':gt,'execute':(_0xc1c845,_0x54c210)=>V[_0x147c35(0x6fe)](_0xc1c845,_0x54c210)});_0x5e9117[_0x147c35(0x71c)](0xc9)[_0x147c35(0x803)](_0x285545);})[_0x128ca9(0x81c)](this[_0x128ca9(0x92d)](_0x128ca9(0x4c5)),..._0x7ce092,async(_0x43c2ef,_0x401fb7)=>{const _0x17d791=_0x128ca9;let _0x30e374=await this[_0x17d791(0x864)]({'request':_0x43c2ef,'schema':di,'ClassRef':mt,'execute':(_0x27fa36,_0x2cbcf0)=>V[_0x17d791(0x4c5)](_0x27fa36,_0x2cbcf0)});_0x401fb7[_0x17d791(0x71c)](0xc9)[_0x17d791(0x803)](_0x30e374);})[_0x128ca9(0x81c)](this[_0x128ca9(0x92d)](_0x128ca9(0x623)),..._0x7ce092,async(_0x34907c,_0xa65321)=>{const _0x2a538f=_0x128ca9;let _0x5902c2=await this['groupValidate']({'request':_0x34907c,'schema':hi,'ClassRef':wt,'execute':(_0x40a6e6,_0x547acd)=>V[_0x2a538f(0x623)](_0x40a6e6,_0x547acd)});_0xa65321['status'](0xc9)[_0x2a538f(0x803)](_0x5902c2);})[_0x128ca9(0x81c)](this[_0x128ca9(0x92d)](_0x128ca9(0x1e8)),..._0x7ce092,async(_0x139f27,_0x19e05a)=>{const _0x326406=_0x128ca9;let _0x2f0dfd=await this[_0x326406(0x864)]({'request':_0x139f27,'schema':pi,'ClassRef':ft,'execute':(_0x536f70,_0x1cc4f8)=>V['groupSetting'](_0x536f70,_0x1cc4f8)});_0x19e05a[_0x326406(0x71c)](0xc9)['json'](_0x2f0dfd);})[_0x128ca9(0x81c)](this[_0x128ca9(0x92d)]('toggleEphemeral'),..._0x7ce092,async(_0x5c6ee7,_0x10bb5f)=>{const _0x3cdcb8=_0x128ca9;let _0x44c0b6=await this[_0x3cdcb8(0x864)]({'request':_0x5c6ee7,'schema':ci,'ClassRef':bt,'execute':(_0x524d4c,_0xca03e1)=>V[_0x3cdcb8(0x6ec)](_0x524d4c,_0xca03e1)});_0x10bb5f['status'](0xc9)[_0x3cdcb8(0x803)](_0x44c0b6);})[_0x128ca9(0x30a)](this[_0x128ca9(0x92d)](_0x128ca9(0x77e)),..._0x7ce092,async(_0x59bf81,_0x18e59a)=>{const _0x59a16c=_0x128ca9;let _0x18ed3d=await this[_0x59a16c(0x864)]({'request':_0x59bf81,'schema':De,'ClassRef':ie,'execute':(_0x53856b,_0x35aabe)=>V[_0x59a16c(0x40c)](_0x53856b,_0x35aabe)});_0x18e59a[_0x59a16c(0x71c)](0xc8)[_0x59a16c(0x803)](_0x18ed3d);})[_0x128ca9(0x30a)](this[_0x128ca9(0x92d)]('findGroups'),..._0x7ce092,async(_0x33bd7a,_0x1c3468)=>{const _0x1246c4=_0x128ca9;let _0x311a28=await this['dataValidate']({'request':_0x33bd7a,'schema':v,'ClassRef':M,'execute':_0x110dc6=>V['findGroups'](_0x110dc6)});_0x1c3468[_0x1246c4(0x71c)](0xc8)[_0x1246c4(0x803)](_0x311a28);})[_0x128ca9(0x30a)](this[_0x128ca9(0x92d)](_0x128ca9(0x570)),..._0x7ce092,async(_0x1e22f7,_0x2b8f82)=>{const _0x1fffda=_0x128ca9;let _0x1fbbc2=await this[_0x1fffda(0x864)]({'request':_0x1e22f7,'schema':De,'ClassRef':ie,'execute':(_0x5d54d,_0x655e6f)=>V[_0x1fffda(0x88f)](_0x5d54d,_0x655e6f)});_0x2b8f82['status'](0xc8)[_0x1fffda(0x803)](_0x1fbbc2);})[_0x128ca9(0x30a)](this[_0x128ca9(0x92d)]('inviteCode'),..._0x7ce092,async(_0x339799,_0x47b37d)=>{const _0x53450f=_0x128ca9;let _0x18e494=await this[_0x53450f(0x864)]({'request':_0x339799,'schema':De,'ClassRef':ie,'execute':(_0x4f0329,_0x13df8a)=>V[_0x53450f(0x2cc)](_0x4f0329,_0x13df8a)});_0x47b37d[_0x53450f(0x71c)](0xc8)['json'](_0x18e494);})[_0x128ca9(0x4f2)](this[_0x128ca9(0x92d)]('inviteCodeDetails'),..._0x7ce092,async(_0xd31150,_0x43b3f7)=>{const _0x368bb2=_0x128ca9;let _0x258750=await this[_0x368bb2(0x1ec)]({'request':_0xd31150,'schema':$s,'ClassRef':Pe,'execute':(_0x140b54,_0x1382df)=>V[_0x368bb2(0x29b)](_0x140b54,_0x1382df)});_0x43b3f7[_0x368bb2(0x71c)](0xc9)['json'](_0x258750);})['put'](this['routerPath'](_0x128ca9(0x596)),..._0x7ce092,async(_0x3f5a23,_0x3c663e)=>{const _0x32b72e=_0x128ca9;let _0x471cbd=await this[_0x32b72e(0x1ec)]({'request':_0x3f5a23,'schema':$s,'ClassRef':Pe,'execute':(_0x5119c4,_0x102061)=>V['joinGroup'](_0x5119c4,_0x102061)});_0x3c663e[_0x32b72e(0x71c)](0xc9)[_0x32b72e(0x803)](_0x471cbd);})[_0x128ca9(0x81c)](this[_0x128ca9(0x92d)](_0x128ca9(0x243)),..._0x7ce092,async(_0x247a15,_0x193bb8)=>{const _0x50b08c=_0x128ca9;let _0x57d020=await this[_0x50b08c(0x864)]({'request':_0x247a15,'schema':De,'ClassRef':ie,'execute':(_0x131d66,_0x23c96e)=>V[_0x50b08c(0x243)](_0x131d66,_0x23c96e)});_0x193bb8['status'](0xc9)[_0x50b08c(0x803)](_0x57d020);})[_0x128ca9(0x81c)](this[_0x128ca9(0x92d)](_0x128ca9(0x3dc)),..._0x7ce092,async(_0x40a35a,_0x4a6f15)=>{const _0x3d41de=_0x128ca9;let _0xe617fd=await this['groupValidate']({'request':_0x40a35a,'schema':ni,'ClassRef':yt,'execute':(_0x3aaa45,_0x133918)=>V[_0x3d41de(0x7f0)](_0x3aaa45,_0x133918)});_0x4a6f15['status'](0xc9)[_0x3d41de(0x803)](_0xe617fd);})[_0x128ca9(0x366)](this[_0x128ca9(0x92d)]('leaveGroup'),..._0x7ce092,async(_0x101c49,_0x2e1b23)=>{const _0x25e00f=_0x128ca9;let _0x173f46=await this[_0x25e00f(0x864)]({'request':_0x101c49,'schema':{},'ClassRef':ie,'execute':(_0x2aaa6e,_0x1c0db9)=>V[_0x25e00f(0x597)](_0x2aaa6e,_0x1c0db9)});_0x2e1b23[_0x25e00f(0x71c)](0xc8)['json'](_0x173f46);});}},wi=require('express'),Mt=class extends G{constructor(_0x3eb3c6,..._0x5c3a34){const _0x3ee787=a0_0x34b2dc;super(),this['configService']=_0x3eb3c6,this['router']=(0x0,wi[_0x3ee787(0x5a9)])();let _0x34cc03=_0x3eb3c6[_0x3ee787(0x30a)](_0x3ee787(0x4d0));this[_0x3ee787(0x55d)]['post'](_0x3ee787(0x330),..._0x5c3a34,async(_0x35d79f,_0x116d28)=>{const _0x1783af=_0x3ee787;let {instanceName:_0x3b32c1,apikey:_0x3bae10,number:_0x502a92}=_0x35d79f[_0x1783af(0x36e)],_0x4cd5c6=await he[_0x1783af(0x5b2)]({'instanceName':_0x3b32c1,'apikey':_0x3bae10,'number':_0x502a92});return _0x116d28[_0x1783af(0x71c)](0xc9)[_0x1783af(0x803)](_0x4cd5c6);})['put'](this[_0x3ee787(0x92d)](_0x3ee787(0x474)),..._0x5c3a34,async(_0x1b1bdb,_0x4fc02c)=>{const _0xd5e102=_0x3ee787;let _0x5be39f=await this[_0xd5e102(0x509)]({'request':_0x1b1bdb,'schema':v,'ClassRef':M,'execute':_0x10b58c=>he[_0xd5e102(0x48c)](_0x10b58c)});return _0x4fc02c[_0xd5e102(0x71c)](0xc8)[_0xd5e102(0x803)](_0x5be39f);})['get'](this[_0x3ee787(0x92d)](_0x3ee787(0x4d6)),..._0x5c3a34,async(_0x3ab7db,_0x365a46)=>{const _0x179b3f=_0x3ee787;let _0x47b98e=await this['dataValidate']({'request':_0x3ab7db,'schema':v,'ClassRef':M,'execute':_0x1834fc=>he['connectToWhatsappController'](_0x1834fc)});return _0x365a46[_0x179b3f(0x71c)](0xc8)[_0x179b3f(0x803)](_0x47b98e);})['get'](this['routerPath'](_0x3ee787(0x91b)),..._0x5c3a34,async(_0x129988,_0x2d4c56)=>{const _0x305481=_0x3ee787;let _0x39524c=await this[_0x305481(0x509)]({'request':_0x129988,'schema':v,'ClassRef':M,'execute':_0x367771=>he[_0x305481(0x91b)](_0x367771)});return _0x2d4c56[_0x305481(0x71c)](0xc8)['json'](_0x39524c);})['get'](this[_0x3ee787(0x92d)](_0x3ee787(0x413),!0x1),..._0x5c3a34,async(_0xa8e85e,_0x5daa3d)=>{const _0x4e68eb=_0x3ee787;let _0x4c1c75=await this['dataValidate']({'request':_0xa8e85e,'schema':null,'ClassRef':M,'execute':_0x17ba48=>he[_0x4e68eb(0x413)](_0x17ba48)});return _0x5daa3d[_0x4e68eb(0x71c)](0xc8)[_0x4e68eb(0x803)](_0x4c1c75);})[_0x3ee787(0x366)](this[_0x3ee787(0x92d)](_0x3ee787(0x255)),..._0x5c3a34,async(_0x1f1519,_0x2cd411)=>{const _0x25bcf1=_0x3ee787;let _0x346674=await this[_0x25bcf1(0x509)]({'request':_0x1f1519,'schema':v,'ClassRef':M,'execute':_0x192288=>he[_0x25bcf1(0x255)](_0x192288)});return _0x2cd411['status'](0xc8)[_0x25bcf1(0x803)](_0x346674);})[_0x3ee787(0x366)](this[_0x3ee787(0x92d)](_0x3ee787(0x366)),..._0x5c3a34,async(_0xd25afa,_0x205848)=>{const _0x5061d2=_0x3ee787;let _0x415f6f=await this['dataValidate']({'request':_0xd25afa,'schema':v,'ClassRef':M,'execute':_0x506d46=>he[_0x5061d2(0x4e4)](_0x506d46)});return _0x205848['status'](0xc8)[_0x5061d2(0x803)](_0x415f6f);});}},yi=require(a0_0x34b2dc(0x6d0)),As=class{},Y=class extends As{},Ct=class extends Y{},Et=class extends Y{},vt=class extends Y{},Nt=class extends Y{},ke=class extends Y{},$t=class extends Y{},Rt=class extends Y{},At=class extends Y{},It=class extends Y{},Tt=class extends Y{},Ot=class{},_t=class extends G{constructor(..._0x4cf564){const _0x54184a=a0_0x34b2dc;super(),this[_0x54184a(0x55d)]=(0x0,yi[_0x54184a(0x5a9)])(),this['router'][_0x54184a(0x4f2)](this[_0x54184a(0x92d)](_0x54184a(0x8a1)),..._0x4cf564,async(_0x2f4c8d,_0xe4fd5b)=>{const _0x1923f0=_0x54184a;let _0x30093c=await this['dataValidate']({'request':_0x2f4c8d,'schema':ka,'ClassRef':Ct,'execute':(_0x2d30ca,_0x3e19da)=>H[_0x1923f0(0x8a1)](_0x2d30ca,_0x3e19da)});return _0xe4fd5b[_0x1923f0(0x71c)](0xc9)[_0x1923f0(0x803)](_0x30093c);})['post'](this[_0x54184a(0x92d)](_0x54184a(0x52c)),..._0x4cf564,async(_0x14d9c6,_0x2aeb9f)=>{const _0x8c80ac=_0x54184a;let _0x3eb83f=await this[_0x8c80ac(0x509)]({'request':_0x14d9c6,'schema':ja,'ClassRef':ke,'execute':(_0x3405d8,_0x2c59f3)=>H[_0x8c80ac(0x52c)](_0x3405d8,_0x2c59f3)});return _0x2aeb9f['status'](0xc9)['json'](_0x3eb83f);})[_0x54184a(0x4f2)](this[_0x54184a(0x92d)](_0x54184a(0x7c6)),..._0x4cf564,async(_0x5448d8,_0x25cc26)=>{const _0x43eada=_0x54184a;let _0x1dbc73=await this[_0x43eada(0x509)]({'request':_0x5448d8,'schema':Va,'ClassRef':Nt,'execute':(_0x55f8b6,_0x1b17de)=>H['sendMenu'](_0x55f8b6,_0x1b17de)});return _0x25cc26[_0x43eada(0x71c)](0xc9)['json'](_0x1dbc73);})[_0x54184a(0x4f2)](this['routerPath'](_0x54184a(0x8f3)),..._0x4cf564,async(_0x46f061,_0x595231)=>{const _0x42f3ab=_0x54184a;let _0x2a42ae=await this[_0x42f3ab(0x509)]({'request':_0x46f061,'schema':Ja,'ClassRef':ke,'execute':(_0x564ee8,_0xa6c62e)=>H[_0x42f3ab(0x8f3)](_0x564ee8,_0xa6c62e)});return _0x595231[_0x42f3ab(0x71c)](0xc9)[_0x42f3ab(0x803)](_0x2a42ae);})[_0x54184a(0x4f2)](this[_0x54184a(0x92d)](_0x54184a(0x77d)),..._0x4cf564,async(_0x1181b0,_0x1502c0)=>{const _0x4ffd3a=_0x54184a;let _0x3639dd=await this[_0x4ffd3a(0x509)]({'request':_0x1181b0,'schema':Ga,'ClassRef':Rt,'execute':(_0x46e726,_0x29e01b)=>H['sendButtons'](_0x46e726,_0x29e01b)});return _0x1502c0['status'](0xc9)[_0x4ffd3a(0x803)](_0x3639dd);})[_0x54184a(0x4f2)](this['routerPath'](_0x54184a(0x53e)),..._0x4cf564,async(_0x5e8308,_0x5a5246)=>{const _0x33a720=_0x54184a;let _0x1c4c88=await this[_0x33a720(0x509)]({'request':_0x5e8308,'schema':Ba,'ClassRef':At,'execute':(_0x4ebef,_0x4f827e)=>H[_0x33a720(0x53e)](_0x4ebef,_0x4f827e)});return _0x5a5246[_0x33a720(0x71c)](0xc9)['json'](_0x1c4c88);})['post'](this[_0x54184a(0x92d)](_0x54184a(0x3d1)),..._0x4cf564,async(_0x1edfd8,_0x51e7d6)=>{const _0x2b1cfe=_0x54184a;let _0x2fe30b=await this[_0x2b1cfe(0x509)]({'request':_0x1edfd8,'schema':Wa,'ClassRef':It,'execute':(_0x5e020a,_0x574ca7)=>H[_0x2b1cfe(0x3d1)](_0x5e020a,_0x574ca7)});return _0x51e7d6[_0x2b1cfe(0x71c)](0xc9)[_0x2b1cfe(0x803)](_0x2fe30b);})[_0x54184a(0x4f2)](this[_0x54184a(0x92d)](_0x54184a(0x91f)),..._0x4cf564,async(_0x31ef23,_0xe9d4f4)=>{const _0x553b2f=_0x54184a;let _0xc4e72d=await this['dataValidate']({'request':_0x31ef23,'schema':za,'ClassRef':Tt,'execute':(_0x16120e,_0x52f9ba)=>H[_0x553b2f(0x91f)](_0x16120e,_0x52f9ba)});return _0xe9d4f4[_0x553b2f(0x71c)](0xc9)['json'](_0xc4e72d);})[_0x54184a(0x4f2)](this[_0x54184a(0x92d)](_0x54184a(0x67d)),..._0x4cf564,async(_0x32964a,_0xc5d054)=>{const _0x201992=_0x54184a;let _0x4b7a3e=await this['dataValidate']({'request':_0x32964a,'schema':Ha,'ClassRef':Ot,'execute':(_0x302128,_0x1e33f4)=>H[_0x201992(0x67d)](_0x302128,_0x1e33f4)});return _0xc5d054[_0x201992(0x71c)](0xc9)['json'](_0x4b7a3e);})[_0x54184a(0x4f2)](this[_0x54184a(0x92d)](_0x54184a(0x34f)),..._0x4cf564,async(_0x3e1d65,_0x661b53)=>{const _0x472d88=_0x54184a;let _0x5055d4=await this[_0x472d88(0x509)]({'request':_0x3e1d65,'schema':qa,'ClassRef':vt,'execute':(_0x47f939,_0x1b3e86)=>H[_0x472d88(0x34f)](_0x47f939,_0x1b3e86)});return _0x661b53['status'](0xc9)['json'](_0x5055d4);})[_0x54184a(0x4f2)](this['routerPath'](_0x54184a(0x700)),..._0x4cf564,async(_0x214249,_0x43ef6c)=>{const _0x368a4c=_0x54184a;let _0x3398e5=await this['dataValidate']({'request':_0x214249,'schema':Ua,'ClassRef':Et,'execute':(_0x48b9ba,_0x37b1e0)=>H[_0x368a4c(0x700)](_0x48b9ba,_0x37b1e0)});return _0x43ef6c['status'](0xc9)[_0x368a4c(0x803)](_0x3398e5);})[_0x54184a(0x4f2)](this[_0x54184a(0x92d)](_0x54184a(0x3ad)),..._0x4cf564,async(_0x528506,_0x215718)=>{const _0x8e3265=_0x54184a;let _0x2a2de4=await this[_0x8e3265(0x509)]({'request':_0x528506,'schema':Fa,'ClassRef':$t,'execute':(_0x40ea44,_0x30cb43)=>H['sendSticker'](_0x40ea44,_0x30cb43)});return _0x215718[_0x8e3265(0x71c)](0xc9)['json'](_0x2a2de4);});}},bi=require(a0_0x34b2dc(0x6d0)),xt=class{},Dt=class extends G{constructor(..._0x593832){const _0x442cf4=a0_0x34b2dc;super(),this[_0x442cf4(0x55d)]=(0x0,bi[_0x442cf4(0x5a9)])(),this['router'][_0x442cf4(0x4f2)](this[_0x442cf4(0x92d)](_0x442cf4(0x90a)),..._0x593832,async(_0x3fc899,_0xad4312)=>{const _0x28a899=_0x442cf4;let _0x54ad2b=await this[_0x28a899(0x509)]({'request':_0x3fc899,'schema':gi,'ClassRef':xt,'execute':(_0x27f26e,_0x4ecc66)=>Is[_0x28a899(0x8c5)](_0x27f26e,_0x4ecc66)});_0xad4312[_0x28a899(0x71c)](0xc9)['json'](_0x54ad2b);})['get'](this['routerPath'](_0x442cf4(0x253)),..._0x593832,async(_0x2ddb4e,_0x403602)=>{const _0x47d029=_0x442cf4;let _0x353f0c=await this[_0x47d029(0x509)]({'request':_0x2ddb4e,'schema':v,'ClassRef':M,'execute':_0x1d018=>Is['findWebhook'](_0x1d018)});_0x403602[_0x47d029(0x71c)](0xc8)[_0x47d029(0x803)](_0x353f0c);});}},Si=require(a0_0x34b2dc(0x6d0)),y=new $(a0_0x34b2dc(0x757)),Pt=class extends G{constructor(..._0x20bfbb){const _0x2d0f5f=a0_0x34b2dc;super(),this['router']=(0x0,Si['Router'])(),this[_0x2d0f5f(0x55d)][_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x6b3)),..._0x20bfbb,async(_0x2bb8e0,_0xf8540f)=>{const _0x20b071=_0x2d0f5f;let _0x128c72=_0x2bb8e0['body'];y['verbose']('request\x20received\x20in\x20scheduleMessage'),y['verbose'](_0x20b071(0x313)),y[_0x20b071(0x798)](_0x2bb8e0[_0x20b071(0x36e)]);let _0x3e6682=await this['dataValidate']({'request':_0x2bb8e0,'schema':v,'ClassRef':M,'execute':_0x598c04=>T[_0x20b071(0x26e)](_0x598c04,_0x128c72)});_0xf8540f['status'](0xc8)[_0x20b071(0x803)](_0x3e6682);})[_0x2d0f5f(0x30a)](this['routerPath']('scheduleMessage'),..._0x20bfbb,async(_0x3a2d19,_0x3b5c87)=>{const _0x9fbb7d=_0x2d0f5f;let _0x4bb4ec=await this[_0x9fbb7d(0x509)]({'request':_0x3a2d19,'schema':v,'ClassRef':M,'execute':_0x4a9a9a=>T[_0x9fbb7d(0x20a)](_0x4a9a9a)});_0x3b5c87[_0x9fbb7d(0x71c)](0xc8)[_0x9fbb7d(0x803)](_0x4bb4ec);})['delete'](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x2e2)),..._0x20bfbb,async(_0x490e35,_0x3f3568)=>{const _0x3e4b8f=_0x2d0f5f;y[_0x3e4b8f(0x798)]('request\x20received\x20in\x20deleteDoneMessages');let _0x9c5db4=await this[_0x3e4b8f(0x509)]({'request':_0x490e35,'schema':v,'ClassRef':M,'execute':_0x154441=>T['deleteDoneMessages'](_0x154441)});_0x3f3568[_0x3e4b8f(0x71c)](0xc8)[_0x3e4b8f(0x803)](_0x9c5db4);})[_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x693)),..._0x20bfbb,async(_0x446a55,_0x825249)=>{const _0x10bccf=_0x2d0f5f;let _0x401130=_0x446a55['body'];y['verbose']('request\x20received\x20in\x20starFlow'),y[_0x10bccf(0x798)]('request\x20body:\x20'),y[_0x10bccf(0x798)](_0x446a55['body']);let _0x1e75fe=await this[_0x10bccf(0x509)]({'request':_0x446a55,'schema':v,'ClassRef':M,'execute':_0x1a6ca6=>T[_0x10bccf(0x693)](_0x1a6ca6,_0x401130)});_0x825249[_0x10bccf(0x71c)](0xc8)['json'](_0x1e75fe);})['get'](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x3fb)),..._0x20bfbb,async(_0x33ef06,_0x59ef9b)=>{const _0x1f7aa2=_0x2d0f5f;y[_0x1f7aa2(0x798)](_0x1f7aa2(0x5d6));let _0x595e6b=await this['dataValidate']({'request':_0x33ef06,'schema':v,'ClassRef':M,'execute':_0x340efa=>T[_0x1f7aa2(0x3fb)](_0x340efa)});_0x59ef9b[_0x1f7aa2(0x71c)](0xc8)[_0x1f7aa2(0x803)](_0x595e6b);})[_0x2d0f5f(0x30a)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x47e)),..._0x20bfbb,async(_0x1c84d9,_0x459261)=>{const _0x4caeb6=_0x2d0f5f;y[_0x4caeb6(0x798)](_0x4caeb6(0x840));let _0xfd769d=await this['dataValidate']({'request':_0x1c84d9,'schema':v,'ClassRef':M,'execute':_0x5646b=>T[_0x4caeb6(0x3fb)](_0x5646b)});_0x459261[_0x4caeb6(0x71c)](0xc8)[_0x4caeb6(0x803)](_0xfd769d);})[_0x2d0f5f(0x4f2)](this['routerPath']('updateAgent'),..._0x20bfbb,async(_0x703005,_0xf5dd53)=>{const _0x3985cd=_0x2d0f5f;let _0x42966b=_0x703005[_0x3985cd(0x36e)];y[_0x3985cd(0x798)](_0x3985cd(0x7d6)),y['verbose'](_0x3985cd(0x313)),y[_0x3985cd(0x798)](_0x703005[_0x3985cd(0x36e)]);let _0x5818ae=await this[_0x3985cd(0x509)]({'request':_0x703005,'schema':v,'ClassRef':M,'execute':_0x326a88=>T[_0x3985cd(0x38e)](_0x326a88,_0x42966b)});_0xf5dd53['status'](0xc8)[_0x3985cd(0x803)](_0x5818ae);})[_0x2d0f5f(0x4f2)](this['routerPath'](_0x2d0f5f(0x472)),..._0x20bfbb,async(_0x488910,_0x5f5448)=>{const _0x14f6a5=_0x2d0f5f;let _0x35e3d5=_0x488910['body'];y[_0x14f6a5(0x798)](_0x14f6a5(0x887)),y['verbose'](_0x14f6a5(0x313)),y['verbose'](_0x488910[_0x14f6a5(0x36e)]);let _0x5a0d9f=await this['dataValidate']({'request':_0x488910,'schema':v,'ClassRef':M,'execute':_0x5080d5=>T[_0x14f6a5(0x472)](_0x5080d5,_0x35e3d5)});_0x5f5448[_0x14f6a5(0x71c)](0xc8)[_0x14f6a5(0x803)](_0x5a0d9f);})[_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x429)),..._0x20bfbb,async(_0x3ad635,_0x34a596)=>{const _0x3c1092=_0x2d0f5f;let _0x493f0b=_0x3ad635['body'];y[_0x3c1092(0x798)](_0x3c1092(0x7e2)),y[_0x3c1092(0x798)](_0x3c1092(0x313)),y[_0x3c1092(0x798)](_0x3ad635[_0x3c1092(0x36e)]);let _0x23e840=await this[_0x3c1092(0x509)]({'request':_0x3ad635,'schema':v,'ClassRef':M,'execute':_0x4d618b=>T[_0x3c1092(0x429)](_0x4d618b,_0x493f0b)});_0x34a596[_0x3c1092(0x71c)](0xc8)[_0x3c1092(0x803)](_0x23e840);})[_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x891)),..._0x20bfbb,async(_0x132c2c,_0x4650c3)=>{const _0x21dc0a=_0x2d0f5f;let _0x281632=_0x132c2c[_0x21dc0a(0x36e)];y[_0x21dc0a(0x798)](_0x21dc0a(0x62a)),y[_0x21dc0a(0x798)](_0x21dc0a(0x313)),y[_0x21dc0a(0x798)](_0x132c2c[_0x21dc0a(0x36e)]);let _0x7674e=await this[_0x21dc0a(0x509)]({'request':_0x132c2c,'schema':v,'ClassRef':M,'execute':_0x69061b=>T['updateFlowConfig'](_0x69061b,_0x281632)});_0x4650c3[_0x21dc0a(0x71c)](0xc8)[_0x21dc0a(0x803)](_0x7674e);})[_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)]('getConversation'),..._0x20bfbb,async(_0x41f2f8,_0x51b64a)=>{const _0x2d785d=_0x2d0f5f;let _0x4bc837=_0x41f2f8[_0x2d785d(0x36e)];y[_0x2d785d(0x798)]('request\x20received\x20in\x20getConversation'),y[_0x2d785d(0x798)]('request\x20body:\x20'),y['verbose'](_0x41f2f8[_0x2d785d(0x36e)]);let _0x1cb297=await this[_0x2d785d(0x509)]({'request':_0x41f2f8,'schema':v,'ClassRef':M,'execute':_0x137aee=>T[_0x2d785d(0x2d7)](_0x137aee,_0x4bc837)});_0x51b64a[_0x2d785d(0x71c)](0xc8)[_0x2d785d(0x803)](_0x1cb297);})['post'](this['routerPath'](_0x2d0f5f(0x2de)),..._0x20bfbb,async(_0x3f4d4b,_0x4f1858)=>{const _0x1c0b2f=_0x2d0f5f;let _0x472624=_0x3f4d4b[_0x1c0b2f(0x36e)];y[_0x1c0b2f(0x798)]('request\x20received\x20in\x20fetchConversation'),y[_0x1c0b2f(0x798)](_0x1c0b2f(0x313)),y[_0x1c0b2f(0x798)](_0x3f4d4b[_0x1c0b2f(0x36e)]);let _0x1b8f2e=await this['dataValidate']({'request':_0x3f4d4b,'schema':v,'ClassRef':M,'execute':_0x278f58=>T[_0x1c0b2f(0x2de)](_0x278f58,_0x472624)});_0x4f1858[_0x1c0b2f(0x71c)](0xc8)[_0x1c0b2f(0x803)](_0x1b8f2e);})[_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x530)),..._0x20bfbb,async(_0x4503cc,_0x48fed8)=>{const _0x5726df=_0x2d0f5f;let _0x3e61bd=_0x4503cc[_0x5726df(0x36e)];y[_0x5726df(0x798)](_0x5726df(0x6d7)),y['verbose']('request\x20body:\x20'),y[_0x5726df(0x798)](_0x4503cc['body']);let _0x3afd66=await this[_0x5726df(0x509)]({'request':_0x4503cc,'schema':v,'ClassRef':M,'execute':_0x152e64=>T[_0x5726df(0x530)](_0x152e64,_0x3e61bd)});_0x48fed8[_0x5726df(0x71c)](0xc8)[_0x5726df(0x803)](_0x3afd66);})['delete'](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x737)),..._0x20bfbb,async(_0x2fdaf0,_0x5c4b8e)=>{const _0x32b4cf=_0x2d0f5f;let _0x524cf9=_0x2fdaf0[_0x32b4cf(0x36e)];y[_0x32b4cf(0x798)](_0x32b4cf(0x855)),y[_0x32b4cf(0x798)](_0x32b4cf(0x313)),y[_0x32b4cf(0x798)](_0x2fdaf0[_0x32b4cf(0x36e)]);let _0x28b0b0=await this[_0x32b4cf(0x509)]({'request':_0x2fdaf0,'schema':v,'ClassRef':M,'execute':_0xa001f1=>T['deleteConversation'](_0xa001f1,_0x524cf9)});_0x5c4b8e[_0x32b4cf(0x71c)](0xc8)[_0x32b4cf(0x803)](_0x28b0b0);})[_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)]('createflow'),..._0x20bfbb,async(_0x54afb7,_0x40d375)=>{const _0x5d5d59=_0x2d0f5f;let _0xe6743b=_0x54afb7[_0x5d5d59(0x36e)],_0x19ba92=_0x54afb7[_0x5d5d59(0x310)][_0x5d5d59(0x1e7)];y[_0x5d5d59(0x798)](_0x5d5d59(0x4ee)),y[_0x5d5d59(0x798)](_0x5d5d59(0x313)),y['verbose'](_0x54afb7[_0x5d5d59(0x36e)]);let _0xa715cf=await this['dataValidate']({'request':_0x54afb7,'schema':v,'ClassRef':M,'execute':_0x7dfc60=>T[_0x5d5d59(0x68d)](_0x7dfc60,_0xe6743b,_0x19ba92)});_0x40d375[_0x5d5d59(0x71c)](0xc8)['json'](_0xa715cf);})['post'](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x69c)),..._0x20bfbb,async(_0x47e718,_0xacb91f)=>{const _0x2ad0f7=_0x2d0f5f;let _0x318743=_0x47e718[_0x2ad0f7(0x36e)],_0x1744aa=_0x47e718[_0x2ad0f7(0x310)][_0x2ad0f7(0x1e7)];y[_0x2ad0f7(0x798)](_0x2ad0f7(0x7fd)),y['verbose'](_0x2ad0f7(0x313)),y[_0x2ad0f7(0x798)](_0x47e718[_0x2ad0f7(0x36e)]),delete _0x318743['blocks'],delete _0x318743[_0x2ad0f7(0x80b)],delete _0x318743[_0x2ad0f7(0x38b)],delete _0x318743[_0x2ad0f7(0x4df)];let _0x10b74b=await this['dataValidate']({'request':_0x47e718,'schema':v,'ClassRef':M,'execute':_0x3e07de=>T[_0x2ad0f7(0x280)](_0x3e07de,_0x318743,_0x1744aa)});_0xacb91f['status'](0xc8)['json'](_0x10b74b);})[_0x2d0f5f(0x4f2)](this['routerPath']('editflowblock'),..._0x20bfbb,async(_0x3b16ff,_0x105ee1)=>{const _0x39056f=_0x2d0f5f;let _0x4da4bd=_0x3b16ff[_0x39056f(0x36e)];y[_0x39056f(0x798)]('request\x20received\x20in\x20editFlow'),y[_0x39056f(0x798)](_0x39056f(0x313)),y['verbose'](_0x3b16ff[_0x39056f(0x36e)]);let _0x4c2a25=await this[_0x39056f(0x509)]({'request':_0x3b16ff,'schema':v,'ClassRef':M,'execute':_0x224b92=>T[_0x39056f(0x57e)](_0x224b92,_0x4da4bd)});_0x105ee1[_0x39056f(0x71c)](0xc8)['json'](_0x4c2a25);})[_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x4f7)),..._0x20bfbb,async(_0x18f065,_0x1dde6c)=>{const _0x14230d=_0x2d0f5f;let _0x3967d9=_0x18f065['body'];y['verbose'](_0x14230d(0x7fd)),y['verbose']('request\x20body:\x20'),y[_0x14230d(0x798)](_0x18f065[_0x14230d(0x36e)]);let _0x10afaf=await this[_0x14230d(0x509)]({'request':_0x18f065,'schema':v,'ClassRef':M,'execute':_0x10cc03=>T[_0x14230d(0x5f1)](_0x10cc03,_0x3967d9)});_0x1dde6c[_0x14230d(0x71c)](0xc8)['json'](_0x10afaf);})[_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x241)),..._0x20bfbb,async(_0x5959db,_0xb01def)=>{const _0x34f5a0=_0x2d0f5f;let _0x5e4ccd=_0x5959db[_0x34f5a0(0x36e)];y[_0x34f5a0(0x798)](_0x34f5a0(0x7fd)),y[_0x34f5a0(0x798)](_0x34f5a0(0x313)),y[_0x34f5a0(0x798)](_0x5959db['body']);let _0x37fa11=await this[_0x34f5a0(0x509)]({'request':_0x5959db,'schema':v,'ClassRef':M,'execute':_0x18a1bc=>T[_0x34f5a0(0x92f)](_0x18a1bc,_0x5e4ccd)});_0xb01def[_0x34f5a0(0x71c)](0xc8)[_0x34f5a0(0x803)](_0x37fa11);})[_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x1fb)),..._0x20bfbb,async(_0x5cbca0,_0x26c00a)=>{const _0x3a6a8e=_0x2d0f5f;let _0x49bf33=_0x5cbca0[_0x3a6a8e(0x36e)];y[_0x3a6a8e(0x798)](_0x3a6a8e(0x72e)),y[_0x3a6a8e(0x798)](_0x3a6a8e(0x313)),y['verbose'](_0x5cbca0[_0x3a6a8e(0x36e)]);let _0x5f2d91=await this[_0x3a6a8e(0x509)]({'request':_0x5cbca0,'schema':v,'ClassRef':M,'execute':_0x47abd5=>T[_0x3a6a8e(0x4ec)](_0x47abd5,_0x49bf33)});_0x26c00a[_0x3a6a8e(0x71c)](0xc8)[_0x3a6a8e(0x803)](_0x5f2d91);})[_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x3bd)),..._0x20bfbb,async(_0x21bf74,_0x25c0cd)=>{const _0x8b290c=_0x2d0f5f;let _0x42c28f=_0x21bf74[_0x8b290c(0x36e)];y['verbose']('request\x20received\x20in\x20editFlowcondition'),y[_0x8b290c(0x798)](_0x8b290c(0x313)),y['verbose'](_0x21bf74[_0x8b290c(0x36e)]);let _0x4d3ebc=await this[_0x8b290c(0x509)]({'request':_0x21bf74,'schema':v,'ClassRef':M,'execute':_0x1d2d59=>T['editFlowCondition'](_0x1d2d59,_0x42c28f)});_0x25c0cd[_0x8b290c(0x71c)](0xc8)[_0x8b290c(0x803)](_0x4d3ebc);})[_0x2d0f5f(0x4f2)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x547)),..._0x20bfbb,async(_0x5dde7a,_0x25dc19)=>{const _0x3e9615=_0x2d0f5f;let _0x310b17=_0x5dde7a[_0x3e9615(0x36e)];y[_0x3e9615(0x798)](_0x3e9615(0x73d)),y[_0x3e9615(0x798)](_0x3e9615(0x313)),y[_0x3e9615(0x798)](_0x5dde7a[_0x3e9615(0x36e)]);let _0x5e7dba=await this[_0x3e9615(0x509)]({'request':_0x5dde7a,'schema':v,'ClassRef':M,'execute':_0x59f82f=>T[_0x3e9615(0x698)](_0x59f82f,_0x310b17)});_0x25dc19[_0x3e9615(0x71c)](0xc8)[_0x3e9615(0x803)](_0x5e7dba);})[_0x2d0f5f(0x4f2)](this['routerPath'](_0x2d0f5f(0x359)),..._0x20bfbb,async(_0x40ce75,_0x1704d7)=>{const _0x15673c=_0x2d0f5f;let _0x54b122=_0x40ce75[_0x15673c(0x36e)];y[_0x15673c(0x798)](_0x15673c(0x419)),y[_0x15673c(0x798)](_0x15673c(0x313)),y[_0x15673c(0x798)](_0x40ce75[_0x15673c(0x36e)]);let _0x2bbc87=await this[_0x15673c(0x509)]({'request':_0x40ce75,'schema':v,'ClassRef':M,'execute':_0x5edcbd=>T[_0x15673c(0x636)](_0x5edcbd,_0x54b122)});_0x1704d7[_0x15673c(0x71c)](0xc8)[_0x15673c(0x803)](_0x2bbc87);})[_0x2d0f5f(0x366)](this[_0x2d0f5f(0x92d)]('deleteflow'),..._0x20bfbb,async(_0x2895d8,_0x1b7d7e)=>{const _0x5f31ad=_0x2d0f5f;let _0xc48881=_0x2895d8[_0x5f31ad(0x36e)];y[_0x5f31ad(0x798)](_0x5f31ad(0x451)),y[_0x5f31ad(0x798)]('request\x20body:\x20'),y[_0x5f31ad(0x798)](_0x2895d8[_0x5f31ad(0x36e)]);let _0x4507ac=await this[_0x5f31ad(0x509)]({'request':_0x2895d8,'schema':v,'ClassRef':M,'execute':_0x4ac2b1=>T[_0x5f31ad(0x8c7)](_0x4ac2b1,_0xc48881)});_0x1b7d7e[_0x5f31ad(0x71c)](0xc8)[_0x5f31ad(0x803)](_0x4507ac);})[_0x2d0f5f(0x30a)](this[_0x2d0f5f(0x92d)](_0x2d0f5f(0x579)),..._0x20bfbb,async(_0x586264,_0x4d058c)=>{const _0x4df653=_0x2d0f5f;y[_0x4df653(0x798)](_0x4df653(0x22a));let _0x5adbb9=await this['dataValidate']({'request':_0x586264,'schema':v,'ClassRef':M,'execute':_0xf55345=>T[_0x4df653(0x7d7)](_0xf55345)});_0x4d058c['status'](0xc8)['json'](_0x5adbb9);});}},vi=I(require(a0_0x34b2dc(0x6b9))),oe={};function Mi(_0x49fbeb,_0x3805a8,_0x41edc6,_0x2ed993){oe[_0x49fbeb]||(oe[_0x49fbeb]={}),oe[_0x49fbeb][_0x3805a8]={'id':_0x3805a8,'response':_0x41edc6,'events':_0x2ed993};}function Ci(_0x3090d2,_0x10cc72){!oe[_0x3090d2]||!oe[_0x3090d2][_0x10cc72]||delete oe[_0x3090d2][_0x10cc72];}function q(_0x52552a,_0x2adeb8,_0x4f2d8e){const _0x1ade32=a0_0x34b2dc;if(!oe[_0x52552a])return;let _0x34a7eb=_0x1ade32(0x791)+JSON[_0x1ade32(0x43f)](_0x4f2d8e)+'\x0a\x0a';Object[_0x1ade32(0x60d)](oe[_0x52552a])[_0x1ade32(0x3f2)](_0x2daa63=>{const _0x57e80c=_0x1ade32;_0x2daa63[_0x57e80c(0x637)]['includes'](_0x2adeb8)&&_0x2daa63[_0x57e80c(0x230)][_0x57e80c(0x2fc)](_0x34a7eb);});}function Ei(){const _0x61377c=a0_0x34b2dc;let _0x4829e6={};for(let _0x2b0282 in oe)_0x4829e6[_0x2b0282]=Object[_0x61377c(0x60d)](oe[_0x2b0282])[_0x61377c(0x790)](_0x766e9d=>({'id':_0x766e9d['id'],'events':_0x766e9d[_0x61377c(0x637)]}));return _0x4829e6;}var Ni=require(a0_0x34b2dc(0x28b)),Os=require(a0_0x34b2dc(0x491)),Ts=class{},Oo=new Os['Schema']({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),_o=new Os['Schema']({'_id':{'type':String,'default':a0_0x34b2dc(0x867)},'WebhookGlobal':{'type':Oo},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Ne=R?.[a0_0x34b2dc(0x8de)](Ts['name'],_o,'All_Instances_Config'),xo=vi['default'][a0_0x34b2dc(0x3c9)](__dirname,a0_0x34b2dc(0x716)),Le=(0x0,kt[a0_0x34b2dc(0x5a9)])(),Do=b[a0_0x34b2dc(0x30a)](a0_0x34b2dc(0x4d0))[a0_0x34b2dc(0x279)],le=[Ta,Oa,Da[Do]];Le[a0_0x34b2dc(0x507)](a0_0x34b2dc(0x73c),kt[a0_0x34b2dc(0x62c)][a0_0x34b2dc(0x55b)](xo))['get'](a0_0x34b2dc(0x4fe),async(_0x29d06e,_0xfddacf)=>{const _0x3f27ae=a0_0x34b2dc;console[_0x3f27ae(0x476)](_0x3f27ae(0x5c3));let _0x4ece81=_0x29d06e[_0x3f27ae(0x38d)][_0x3f27ae(0x770)],_0x327bd5=(_0x29d06e[_0x3f27ae(0x783)][_0x3f27ae(0x637)]||'')[_0x3f27ae(0x292)](','),_0x507860=(0x0,Ni['v4'])();console[_0x3f27ae(0x476)](_0x3f27ae(0x641),_0x4ece81),console[_0x3f27ae(0x476)](_0x3f27ae(0x252),_0x327bd5);let _0x363af7=b['get'](_0x3f27ae(0x4d0))[_0x3f27ae(0x432)],_0x1f604b=_0x29d06e[_0x3f27ae(0x783)][_0x3f27ae(0x1e7)];if(console[_0x3f27ae(0x476)](_0x3f27ae(0x3cc),_0x1f604b),_0x363af7[_0x3f27ae(0x22f)]!==_0x1f604b){console[_0x3f27ae(0x476)](_0x3f27ae(0x8a9));try{let _0x460b4d=await we['auth'][_0x3f27ae(0x253)](_0x4ece81);if(console[_0x3f27ae(0x476)](_0x3f27ae(0x265),_0x460b4d),!_0x460b4d||_0x460b4d[_0x3f27ae(0x1e7)]!==_0x1f604b)return console[_0x3f27ae(0x476)](_0x3f27ae(0x3d4)),_0xfddacf[_0x3f27ae(0x71c)](0x191)[_0x3f27ae(0x52e)](_0x3f27ae(0x832));}catch(_0x2c34a1){return console['error'](_0x3f27ae(0x6c6),_0x2c34a1),_0xfddacf['status'](0x191)['send']('API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.');}}if(!await _e(_0x4ece81))return _0xfddacf[_0x3f27ae(0x71c)](0x194)[_0x3f27ae(0x52e)]('Instância\x20não\x20encontrada.');_0xfddacf[_0x3f27ae(0x859)]('Content-Type','text/event-stream'),_0xfddacf[_0x3f27ae(0x859)](_0x3f27ae(0x281),_0x3f27ae(0x3f1)),_0xfddacf[_0x3f27ae(0x859)](_0x3f27ae(0x8c9),_0x3f27ae(0x6ba)),_0xfddacf[_0x3f27ae(0x816)]();let _0xdadb14=_0x3f27ae(0x791)+JSON[_0x3f27ae(0x43f)]({'info':_0x3f27ae(0x8eb)})+'\x0a\x0a';_0xfddacf[_0x3f27ae(0x2fc)](_0xdadb14),Mi(_0x4ece81,_0x507860,_0xfddacf,_0x327bd5),_0x29d06e['on'](_0x3f27ae(0x6dd),()=>{const _0x2fcc95=_0x3f27ae;console[_0x2fcc95(0x476)](_0x2fcc95(0x44c)+_0x4ece81),Ci(_0x4ece81,_0x507860);});}),Le['post'](a0_0x34b2dc(0x619),async(_0x2f0a27,_0x12982b)=>{const _0x8a7a5e=a0_0x34b2dc;console[_0x8a7a5e(0x476)](_0x8a7a5e(0x743));let _0x1bf40f=_0x2f0a27[_0x8a7a5e(0x38d)][_0x8a7a5e(0x770)],_0x43d7d1=_0x2f0a27[_0x8a7a5e(0x38d)][_0x8a7a5e(0x458)],_0xc3e5b5=_0x2f0a27[_0x8a7a5e(0x783)][_0x8a7a5e(0x668)]||'',_0x13d858=_0x2f0a27[_0x8a7a5e(0x36e)];console[_0x8a7a5e(0x476)](_0x8a7a5e(0x750),_0x1bf40f),console[_0x8a7a5e(0x476)]('StartID:',_0x43d7d1),console[_0x8a7a5e(0x476)]('RemoteJid:',_0xc3e5b5),console[_0x8a7a5e(0x476)](_0x8a7a5e(0x76e),_0x13d858);try{if(!await _e(_0x1bf40f))return _0x12982b[_0x8a7a5e(0x71c)](0x194)[_0x8a7a5e(0x52e)](_0x8a7a5e(0x785));let _0x283f25=await T[_0x8a7a5e(0x69f)](_0x1bf40f,_0x43d7d1,_0xc3e5b5,_0x13d858);_0x12982b[_0x8a7a5e(0x52e)](_0x283f25);}catch(_0x70d611){console[_0x8a7a5e(0x651)](_0x70d611),_0x12982b[_0x8a7a5e(0x71c)](0x1f4)[_0x8a7a5e(0x52e)]('Erro\x20ao\x20iniciar\x20o\x20fluxo.');}}),Le['get']('/clients-info',(_0x447723,_0x3670a0)=>{const _0x5eaef0=a0_0x34b2dc;let _0x49a996=Ei();_0x3670a0[_0x5eaef0(0x803)](_0x49a996);})[a0_0x34b2dc(0x30a)]('/',(_0x1e9a7a,_0x16626b)=>{const _0x196651=a0_0x34b2dc;let _0x5b490d=b[_0x196651(0x30a)](_0x196651(0x773))[_0x196651(0x879)];if(_0x5b490d){let _0x5637d5=encodeURIComponent(''+_0x5b490d);_0x16626b[_0x196651(0x85e)]('https://uazapi-plugin.bubbleapps.io/?url='+_0x5637d5);return;}let _0x5715ea=b[_0x196651(0x30a)](_0x196651(0x6c5)),_0x48906c=_0x5715ea&&_0x5715ea[_0x196651(0x627)][_0x196651(0x292)]('/')[0x4];if(_0x48906c){let _0x29a355=encodeURIComponent('https://'+_0x48906c);_0x16626b[_0x196651(0x85e)](_0x196651(0x386)+_0x29a355);}else _0x16626b[_0x196651(0x85e)](_0x196651(0x2f5));})['put'](a0_0x34b2dc(0x33f),...le,async(_0x57768f,_0x546b8d)=>{const _0x31ae6d=a0_0x34b2dc;try{console[_0x31ae6d(0x476)](_0x31ae6d(0x7f8)),_0x546b8d['status'](0xc8)[_0x31ae6d(0x803)]({'message':_0x31ae6d(0x559)}),_0x546b8d['on'](_0x31ae6d(0x81b),()=>process[_0x31ae6d(0x336)](0x0));}catch(_0x4172bc){console[_0x31ae6d(0x651)](_0x31ae6d(0x853),_0x4172bc),_0x546b8d[_0x31ae6d(0x71c)](0x1f4)[_0x31ae6d(0x803)]({'message':'Erro\x20ao\x20encerrar\x20a\x20API'});}})[a0_0x34b2dc(0x81c)]('/config',...le,async(_0x2bc16f,_0x1722e1)=>{const _0x4bde33=a0_0x34b2dc;try{let _0x3c24b7=_0x2bc16f[_0x4bde33(0x36e)];await Ne['updateOne']({},{'$set':_0x3c24b7},{'upsert':!0x0});let _0x523f25=await Ne[_0x4bde33(0x440)]();_0x1722e1[_0x4bde33(0x803)](_0x523f25);}catch(_0x59576c){_0x1722e1[_0x4bde33(0x71c)](0x190)[_0x4bde33(0x52e)](_0x59576c['message']);}})['get'](a0_0x34b2dc(0x301),...le,async(_0x3d16c7,_0x2b5cf0)=>{const _0x419bcb=a0_0x34b2dc;try{let _0x264cd8=await Ne[_0x419bcb(0x440)]();if(!_0x264cd8)return _0x2b5cf0['json']({});_0x2b5cf0[_0x419bcb(0x803)](_0x264cd8);}catch(_0x5261a3){_0x2b5cf0['status'](0x1f4)[_0x419bcb(0x52e)](_0x5261a3[_0x419bcb(0x5ce)]);}})['use']('/instance',new Mt(b,...le)[a0_0x34b2dc(0x55d)])[a0_0x34b2dc(0x507)]('/message',new _t(...le)[a0_0x34b2dc(0x55d)])[a0_0x34b2dc(0x507)](a0_0x34b2dc(0x4ab),new dt(...le)[a0_0x34b2dc(0x55d)])['use'](a0_0x34b2dc(0x37e),new St(...le)['router'])[a0_0x34b2dc(0x507)](a0_0x34b2dc(0x71f),new Dt(...le)[a0_0x34b2dc(0x55d)])['use'](a0_0x34b2dc(0x283),new Pt(...le)[a0_0x34b2dc(0x55d)]);var m=class{constructor(..._0x4a0f27){const _0x5acd30=a0_0x34b2dc;throw{'status':0x190,'error':_0x5acd30(0x626),'message':_0x4a0f27[_0x5acd30(0x3a3)]>0x0?_0x4a0f27:void 0x0};}},ce=class{constructor(..._0x274985){const _0x2988d6=a0_0x34b2dc;throw{'status':0x191,'error':_0x2988d6(0x2c8),'message':_0x274985[_0x2988d6(0x3a3)]>0x0?_0x274985:void 0x0};}},se=class{constructor(..._0xcdcf5){const _0x11dafb=a0_0x34b2dc;throw{'status':0x193,'error':_0x11dafb(0x5fb),'message':_0xcdcf5[_0x11dafb(0x3a3)]>0x0?_0xcdcf5:void 0x0};}},J=class{constructor(..._0x588fed){const _0x14c3ea=a0_0x34b2dc;throw{'status':0x194,'error':_0x14c3ea(0x5f7),'message':_0x588fed['length']>0x0?_0x588fed:void 0x0};}},x=class{constructor(..._0x240edd){const _0x584663=a0_0x34b2dc;throw{'status':0x1f4,'error':_0x584663(0x7d1),'message':_0x240edd[_0x584663(0x3a3)]>0x0?_0x240edd:void 0x0};}},ye=require(a0_0x34b2dc(0x7a9));async function _s(_0x54fdc1){const _0x52c501=a0_0x34b2dc;let _0xc190af=new $(_s[_0x52c501(0x673)]),_0x3d4872=R[_0x52c501(0x388)](),_0x6df135=_0x3d4872['db'](b['get']('DATABASE')[_0x52c501(0x259)][_0x52c501(0x788)]+_0x52c501(0x621))['collection'](_0x54fdc1),_0xccf92c=async(_0x2b4fe4,_0x56b598)=>{const _0x1cdec1=_0x52c501;try{return await _0x3d4872[_0x1cdec1(0x4d6)](),await _0x6df135[_0x1cdec1(0x62e)]({'_id':_0x56b598},JSON[_0x1cdec1(0x232)](JSON[_0x1cdec1(0x43f)](_0x2b4fe4,ye[_0x1cdec1(0x600)][_0x1cdec1(0x27c)])),{'upsert':!0x0});}catch{}},_0x5e21d6=async _0x45fe71=>{const _0x492698=_0x52c501;try{await _0x3d4872[_0x492698(0x4d6)]();let _0x4abd88=await _0x6df135[_0x492698(0x440)]({'_id':_0x45fe71}),_0x4ce905=JSON['stringify'](_0x4abd88);return JSON[_0x492698(0x232)](_0x4ce905,ye[_0x492698(0x600)][_0x492698(0x2e9)]);}catch{}},_0xabbcc3=async _0x5ead78=>{const _0xd3fc17=_0x52c501;try{return await _0x3d4872['connect'](),await _0x6df135[_0xd3fc17(0x907)]({'_id':_0x5ead78});}catch{}},_0x54fb76=await _0x5e21d6('creds')||(0x0,ye[_0x52c501(0x449)])();return{'state':{'creds':_0x54fb76,'keys':{'get':async(_0x252e32,_0x5bbc46)=>{const _0x552fcd=_0x52c501;let _0x88dd16={};return await Promise[_0x552fcd(0x57f)](_0x5bbc46[_0x552fcd(0x790)](async _0x874266=>{const _0x24516b=_0x552fcd;let _0x44f26c=await _0x5e21d6(_0x252e32+'-'+_0x874266);_0x252e32===_0x24516b(0x317)&&_0x44f26c&&(_0x44f26c=ye[_0x24516b(0x6d3)][_0x24516b(0x659)]['AppStateSyncKeyData'][_0x24516b(0x654)](_0x44f26c)),_0x88dd16[_0x874266]=_0x44f26c;})),_0x88dd16;},'set':async _0x58d0dc=>{const _0x6c3d07=_0x52c501;let _0x257e62=[];for(let _0x2a05a0 in _0x58d0dc)for(let _0x336db8 in _0x58d0dc[_0x2a05a0]){let _0x420d46=_0x58d0dc[_0x2a05a0][_0x336db8],_0x11d5ff=_0x2a05a0+'-'+_0x336db8;_0x257e62[_0x6c3d07(0x26d)](_0x420d46?_0xccf92c(_0x420d46,_0x11d5ff):_0xabbcc3(_0x11d5ff));}await Promise['all'](_0x257e62);}}},'saveCreds':async()=>_0xccf92c(_0x54fb76,'creds')};}var Ls=I(require('long')),Fs=I(require(a0_0x34b2dc(0x286))),Ut=require(a0_0x34b2dc(0x7a9)),$i=require(a0_0x34b2dc(0x35f)),Ft=require(a0_0x34b2dc(0x7a9)),Lt;function Po(_0x37a4fd){const _0x303594=a0_0x34b2dc;return Lt||(Lt=(0x0,$i['createClient'])({'url':_0x37a4fd[_0x303594(0x69e)]}),Lt[_0x303594(0x4d6)]()),Lt;}var ge=class u{constructor(_0x20da0f,_0x55ade6){const _0x3a3707=a0_0x34b2dc;this[_0x3a3707(0x913)]=_0x20da0f,this['instanceName']=_0x55ade6,this['logger']=new $(u[_0x3a3707(0x673)]),this['client']=Po(_0x20da0f);}set[a0_0x34b2dc(0x7c7)](_0x40f23a){const _0x345d28=a0_0x34b2dc;this[_0x345d28(0x402)]=_0x40f23a;}async[a0_0x34b2dc(0x6b5)](){const _0x221741=a0_0x34b2dc;try{return await this[_0x221741(0x45a)]['sendCommand'](['keys',this[_0x221741(0x913)][_0x221741(0x7ec)]+':*']);}catch(_0x1345ec){this[_0x221741(0x3cb)][_0x221741(0x651)](_0x1345ec);}}async[a0_0x34b2dc(0x304)](_0x1f6b47,_0x3b011b){const _0x30c79d=a0_0x34b2dc;try{let _0x4f7c89=JSON[_0x30c79d(0x43f)](_0x3b011b,Ft[_0x30c79d(0x600)][_0x30c79d(0x27c)]);return await this[_0x30c79d(0x45a)][_0x30c79d(0x734)](this[_0x30c79d(0x913)][_0x30c79d(0x7ec)]+':'+this[_0x30c79d(0x402)],_0x1f6b47,_0x4f7c89);}catch(_0x3cbae2){this[_0x30c79d(0x3cb)]['error'](_0x3cbae2);}}async['getAllData'](){const _0x1bd798=a0_0x34b2dc;try{let _0x376e85=await this[_0x1bd798(0x45a)]['hGetAll'](this['redisEnv'][_0x1bd798(0x7ec)]+':'+this['instanceName']);if(_0x376e85){for(let _0x4fe257 in _0x376e85)Object[_0x1bd798(0x52b)][_0x1bd798(0x59e)]['call'](_0x376e85,_0x4fe257)&&(_0x376e85[_0x4fe257]=JSON[_0x1bd798(0x232)](_0x376e85[_0x4fe257],Ft['BufferJSON'][_0x1bd798(0x2e9)]));return _0x376e85;}}catch(_0x50d751){this[_0x1bd798(0x3cb)][_0x1bd798(0x651)](_0x50d751);}}async['readData'](_0x23188b){const _0x380324=a0_0x34b2dc;try{let _0x27da80=await this[_0x380324(0x45a)][_0x380324(0x58d)](this[_0x380324(0x913)][_0x380324(0x7ec)]+':'+this['instanceName'],_0x23188b);if(_0x27da80)return JSON[_0x380324(0x232)](_0x27da80,Ft[_0x380324(0x600)][_0x380324(0x2e9)]);}catch(_0x1b17a7){this[_0x380324(0x3cb)][_0x380324(0x651)](_0x1b17a7);}}async[a0_0x34b2dc(0x240)](_0x48a29d){const _0x5881fd=a0_0x34b2dc;try{return await this['client'][_0x5881fd(0x59f)](this['redisEnv']['PREFIX_KEY']+':'+this[_0x5881fd(0x402)],_0x48a29d);}catch(_0x3ff726){this['logger'][_0x5881fd(0x651)](_0x3ff726);}}async[a0_0x34b2dc(0x711)](_0x17297b){const _0x47f4bf=a0_0x34b2dc;try{return await this[_0x47f4bf(0x45a)][_0x47f4bf(0x79f)](_0x17297b||this['redisEnv']['PREFIX_KEY']+':'+this['instanceName']);}catch(_0x9bdd4f){this[_0x47f4bf(0x3cb)][_0x47f4bf(0x651)](_0x9bdd4f);}}};async function xs(_0x550b6c,_0x3f6281){const _0x20e777=a0_0x34b2dc;let _0x2f2c31=new $(xs[_0x20e777(0x673)]),_0x33020f=new ge(_0x550b6c,_0x3f6281),_0x4e3414=async(_0x3632f5,_0x35e6dd)=>{const _0xa162be=_0x20e777;try{return await _0x33020f['writeData'](_0x35e6dd,_0x3632f5);}catch(_0x2d045c){return _0x2f2c31[_0xa162be(0x651)]({'localError':'writeData','error':_0x2d045c});}},_0x568146=async _0x3b2510=>{const _0x114d77=_0x20e777;try{return await _0x33020f['readData'](_0x3b2510);}catch(_0x49d6fb){_0x2f2c31[_0x114d77(0x651)]({'readData':'writeData','error':_0x49d6fb});return;}},_0x7eca19=async _0x3fdd61=>{const _0x40bd37=_0x20e777;try{return await _0x33020f[_0x40bd37(0x240)](_0x3fdd61);}catch(_0x3f0241){_0x2f2c31[_0x40bd37(0x651)]({'readData':_0x40bd37(0x240),'error':_0x3f0241});}},_0x3b5c94=await _0x568146(_0x20e777(0x818))||(0x0,Ut['initAuthCreds'])();return{'state':{'creds':_0x3b5c94,'keys':{'get':async(_0x17d829,_0x399be7)=>{const _0x4a42e1=_0x20e777;let _0x32df28={};return await Promise['all'](_0x399be7[_0x4a42e1(0x790)](async _0x5bc938=>{const _0x2abae9=_0x4a42e1;let _0x4ea5eb=await _0x568146(_0x17d829+'-'+_0x5bc938);_0x17d829===_0x2abae9(0x317)&&_0x4ea5eb&&(_0x4ea5eb=Ut['proto']['Message'][_0x2abae9(0x83b)][_0x2abae9(0x654)](_0x4ea5eb)),_0x32df28[_0x5bc938]=_0x4ea5eb;})),_0x32df28;},'set':async _0x55fe44=>{let _0x4c96f6=[];for(let _0x34600c in _0x55fe44)for(let _0x2df3d9 in _0x55fe44[_0x34600c]){let _0x3a6c3f=_0x55fe44[_0x34600c][_0x2df3d9],_0xa10fcd=_0x34600c+'-'+_0x2df3d9;_0x4c96f6['push'](_0x3a6c3f?await _0x4e3414(_0x3a6c3f,_0xa10fcd):await _0x7eca19(_0xa10fcd));}await Promise['all'](_0x4c96f6);}}},'saveCreds':async()=>await _0x4e3414(_0x3b5c94,_0x20e777(0x818))};}var F=I(require('fs')),X=require(a0_0x34b2dc(0x28b)),Vt=I(require('sharp')),Gt=require(a0_0x34b2dc(0x86f)),Ri=require(a0_0x34b2dc(0x320)),Ai=require('util'),Ii=I(require('axios')),$e=class extends _{constructor(_0x410342,_0x263a43,_0x1f7937){const _0x202213=a0_0x34b2dc;super(_0x263a43),this['cacheInstanceModel']=_0x410342,this[_0x202213(0x269)]=_0x263a43,this[_0x202213(0x2cf)]=_0x1f7937;}async['createOrUpdate'](_0x4f04bf,_0x4799b0){const _0x19256d=a0_0x34b2dc;try{if(this[_0x19256d(0x43e)][_0x19256d(0x33c)]){console[_0x19256d(0x476)](_0x19256d(0x331)+_0x4799b0+_0x19256d(0x574),_0x4f04bf);let _0x42467d=await this[_0x19256d(0x863)][_0x19256d(0x753)]({'_id':_0x4799b0},{'$set':_0x4f04bf},{'new':!0x0,'upsert':!0x0});return console[_0x19256d(0x476)](_0x19256d(0x562),_0x42467d),_0x42467d;}}catch(_0x3504fc){throw console[_0x19256d(0x651)](_0x19256d(0x426),_0x3504fc),_0x3504fc;}return null;}async[a0_0x34b2dc(0x907)](_0x1e05e8){const _0x58cee3=a0_0x34b2dc;try{let _0x119cfc=A(_0x1e05e8[_0x58cee3(0x349)]);return{'deletedCount':(await this[_0x58cee3(0x863)][_0x58cee3(0x907)](_0x119cfc))[_0x58cee3(0x35c)]};}catch(_0x18967f){return{'error':_0x18967f?.['toString']()};}}async[a0_0x34b2dc(0x440)](_0x56c003){const _0x325115=a0_0x34b2dc;try{let _0x4f74f8=A(_0x56c003[_0x325115(0x349)]);return await this[_0x325115(0x863)]['findOne'](_0x4f74f8)[_0x325115(0x56f)]();}catch{return null;}}},jt=(0x0,Ai[a0_0x34b2dc(0x254)])(Ri[a0_0x34b2dc(0x454)]),ko=b[a0_0x34b2dc(0x30a)]('PROXY'),Ds=class{constructor(){const _0x320e6c=a0_0x34b2dc;this['cacheInstanceRepository']=new $e(He,b),(!this[_0x320e6c(0x3e0)]||!this['networkInterface'])&&ko&&this['detectIPv6PrefixAndInterface']()[_0x320e6c(0x251)](()=>{const _0x337ed3=_0x320e6c;console[_0x337ed3(0x476)](_0x337ed3(0x20c)+this[_0x337ed3(0x3e0)]),console[_0x337ed3(0x476)](_0x337ed3(0x26b)+this['networkInterface']);})[_0x320e6c(0x823)](_0x227403=>{const _0x395091=_0x320e6c;console[_0x395091(0x651)](_0x395091(0x8ca)+_0x227403[_0x395091(0x5ce)]);});}async[a0_0x34b2dc(0x727)](){const _0x343604=a0_0x34b2dc;try{let {stdout:_0x50c651}=await jt(_0x343604(0x5c7));console[_0x343604(0x476)](_0x343604(0x4e5)+_0x50c651);let _0xa7a436=_0x50c651[_0x343604(0x292)]('\x0a')[_0x343604(0x790)](_0x555cb2=>_0x555cb2[_0x343604(0x292)]('\x20')[0x0])[_0x343604(0x334)](_0x4acd94=>!_0x4acd94['includes']('lo')&&!_0x4acd94[_0x343604(0x4c4)]('docker')&&!_0x4acd94['includes'](_0x343604(0x208))&&!_0x4acd94['includes']('wl')&&!_0x4acd94['includes']('@'));if(console[_0x343604(0x476)](_0x343604(0x694)+_0xa7a436),_0xa7a436[_0x343604(0x3a3)]===0x0)throw new Error(_0x343604(0x7b9));this[_0x343604(0x8c8)]=_0xa7a436[0x0];let {stdout:_0x488e49}=await jt(_0x343604(0x211)+this['networkInterface']);console['log'](_0x343604(0x90c)+_0x488e49);let _0x387e1f=_0x488e49[_0x343604(0x292)]('\x0a')[_0x343604(0x253)](_0x2acede=>_0x2acede[_0x343604(0x4c4)]('inet6')&&_0x2acede[_0x343604(0x4c4)](_0x343604(0x795)));if(!_0x387e1f)throw new Error(_0x343604(0x431));let _0x468b3f=_0x387e1f[_0x343604(0x52f)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x468b3f)throw new Error(_0x343604(0x3c5));let [_0x4f6b38,_0x5b740d,_0x1c7cd7]=_0x468b3f,_0x3523d7=Math['floor'](Number(_0x1c7cd7)/0x10),_0x559250=Number(_0x1c7cd7)%0x10,_0x5f4ee3=_0x5b740d[_0x343604(0x292)](':')['slice'](0x0,_0x3523d7)[_0x343604(0x3c9)](':');if(_0x559250>0x0){let _0x296a3c=_0x5b740d['split'](':')[_0x3523d7],_0x1a5d17=0xffff<<0x10-_0x559250&0xffff,_0x484b01=(parseInt(_0x296a3c,0x10)&_0x1a5d17)[_0x343604(0x1fe)](0x10)[_0x343604(0x3ac)](0x4,'0');_0x5f4ee3+=':'+_0x484b01;}this[_0x343604(0x3e0)]=_0x5f4ee3+':';}catch(_0x479d5d){console[_0x343604(0x651)]('Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:',_0x479d5d);}}async[a0_0x34b2dc(0x29d)](_0x1c8045){const _0x21f70e=a0_0x34b2dc;let _0x40d713=_0x21f70e(0x26a)+_0x1c8045+_0x21f70e(0x3ed)+this[_0x21f70e(0x8c8)];try{await jt(_0x40d713),console[_0x21f70e(0x476)](_0x21f70e(0x2be)+_0x1c8045);}catch(_0x53cc08){console[_0x21f70e(0x651)](_0x21f70e(0x23c)+_0x53cc08);}}async[a0_0x34b2dc(0x263)](_0x388973){const _0x43e77c=a0_0x34b2dc;let _0x21d234=_0x43e77c(0x568)+_0x388973+_0x43e77c(0x3ed)+this[_0x43e77c(0x8c8)];try{await jt(_0x21d234),console[_0x43e77c(0x476)]('IPv6\x20address\x20removed:\x20'+_0x388973);}catch(_0x4c952e){console[_0x43e77c(0x651)](_0x43e77c(0x378)+_0x4c952e);}}[a0_0x34b2dc(0x4ea)](){const _0x14863f=a0_0x34b2dc;return _0x14863f(0x2b0)[_0x14863f(0x2a1)](/X/g,()=>_0x14863f(0x228)[_0x14863f(0x29e)](Math[_0x14863f(0x43c)](Math[_0x14863f(0x2e7)]()*0x10)));}['ip6eui'](_0x293c78,_0x382cc3){const _0x4c2a1f=a0_0x34b2dc;let _0x318da3=_0x382cc3['split'](':');return _0x318da3[0x0]=(parseInt(_0x318da3[0x0],0x10)^0x2)[_0x4c2a1f(0x1fe)](0x10)[_0x4c2a1f(0x3ac)](0x2,'0'),''+_0x293c78+_0x318da3[0x0]+_0x318da3[0x1]+':'+_0x318da3[0x2]+_0x4c2a1f(0x4aa)+_0x318da3[0x3]+':'+_0x318da3[0x4]+_0x318da3[0x5];}[a0_0x34b2dc(0x608)](){const _0x170670=a0_0x34b2dc;let _0x4c3032=this[_0x170670(0x3e0)];_0x4c3032[_0x170670(0x5b1)](':')||(_0x4c3032+=':');let _0x2ee520=this[_0x170670(0x4ea)]();return this[_0x170670(0x8be)](_0x4c3032,_0x2ee520);}['isValidIPv6Config'](_0x53c5b8){const _0x26c229=a0_0x34b2dc;return new RegExp('^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$')[_0x26c229(0x4a6)](_0x53c5b8);}async[a0_0x34b2dc(0x576)](_0x290ea4){const _0x648ca0=a0_0x34b2dc;let _0x4a2344=[{'url':'https://ipv6.jsonip.com','parse':_0x108502=>_0x108502['ip']},{'url':_0x648ca0(0x64b),'parse':_0x41e7e2=>_0x41e7e2['ip']},{'url':_0x648ca0(0x7df),'parse':_0x29970d=>_0x29970d[_0x648ca0(0x3b8)]()},{'url':_0x648ca0(0x580),'parse':_0x532109=>_0x532109['trim']()}],_0x2a40a9=_0x4a2344[Math[_0x648ca0(0x43c)](Math['random']()*_0x4a2344[_0x648ca0(0x3a3)])];try{let _0x347a31=await Ii['default'][_0x648ca0(0x30a)](_0x2a40a9[_0x648ca0(0x931)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x290ea4}}),_0x1d0f95=_0x2a40a9['parse'](_0x347a31[_0x648ca0(0x6a3)]);return _0x1d0f95[_0x648ca0(0x4a4)]()===_0x290ea4[_0x648ca0(0x4a4)]()?(console['log'](_0x648ca0(0x868)+_0x290ea4),!0x0):(console[_0x648ca0(0x651)]('IP\x20mismatch:\x20configured\x20'+_0x290ea4+_0x648ca0(0x2ee)+_0x1d0f95),!0x1);}catch(_0x57e1d7){return console[_0x648ca0(0x651)]('Error\x20testing\x20IP\x20with\x20'+_0x2a40a9[_0x648ca0(0x931)]+':\x20'+_0x57e1d7[_0x648ca0(0x5ce)]),!0x1;}}async[a0_0x34b2dc(0x540)](_0x4ee45e,_0x1d014b){const _0x215f16=a0_0x34b2dc;if(!this[_0x215f16(0x3e0)]||!this[_0x215f16(0x8c8)])return console[_0x215f16(0x651)](_0x215f16(0x882)),null;let _0x5f36b0;do _0x5f36b0=this[_0x215f16(0x608)](),console[_0x215f16(0x476)](_0x215f16(0x3e8)+_0x5f36b0);while(!await this['isValidAndUniqueIPv6'](_0x5f36b0));await this[_0x215f16(0x29d)](_0x5f36b0),console[_0x215f16(0x476)]('Configured\x20IPv6:\x20'+_0x5f36b0);let _0x3dece0={'_id':_0x4ee45e+'-'+_0x1d014b,'ip':_0x5f36b0},_0x586107=await this[_0x215f16(0x7e4)][_0x215f16(0x47c)](_0x3dece0,_0x3dece0[_0x215f16(0x2c7)]);return console['log']('Cache\x20instance\x20update\x20result:\x20'+_0x586107),_0x5f36b0;}async[a0_0x34b2dc(0x937)](_0x1ce79c){const _0x4931d8=a0_0x34b2dc;return this[_0x4931d8(0x718)](_0x1ce79c)?!await this[_0x4931d8(0x7e4)][_0x4931d8(0x440)]({'where':{'ip':_0x1ce79c}}):!0x1;}async['removeIPv6ById'](_0x2e39ee,_0x5df7f6){const _0x34b85e=a0_0x34b2dc;let _0x463ab0=_0x2e39ee+'-'+_0x5df7f6,_0x5ebe53=await this[_0x34b85e(0x7e4)]['findOne']({'where':{'_id':_0x463ab0}});_0x5ebe53&&_0x5ebe53['ip']&&(await this[_0x34b85e(0x263)](_0x5ebe53['ip']),await this['cacheInstanceRepository'][_0x34b85e(0x907)]({'where':{'_id':_0x463ab0}}));}},Lo=new Ds(),re=Lo,Us='Safari',ki,me=null,Pa=null,Fo=0x3,Uo=null,Ti=b['get']('AUTHENTICATION')[a0_0x34b2dc(0x432)][a0_0x34b2dc(0x22f)],Oi=b[a0_0x34b2dc(0x30a)]('PROXY');function a0_0x15dd(_0x152730,_0x2fc534){const _0x523609=a0_0x5236();return a0_0x15dd=function(_0x15dd2c,_0x303ffb){_0x15dd2c=_0x15dd2c-0x1e7;let _0x5451dc=_0x523609[_0x15dd2c];return _0x5451dc;},a0_0x15dd(_0x152730,_0x2fc534);}async function jo(){const _0x1c9dcb=a0_0x34b2dc;let _0x3d0d01=await Ne[_0x1c9dcb(0x440)]();me=_0x3d0d01?.[_0x1c9dcb(0x4b8)]??null,Uo=_0x3d0d01?.[_0x1c9dcb(0x6e7)]??null,Us=_0x3d0d01?.[_0x1c9dcb(0x6f6)]??_0x1c9dcb(0x6f3),ki=_0x3d0d01?.[_0x1c9dcb(0x293)]??K??'uazapi';}async function Jo(){await jo();}Jo();var Jt={},Re=class u{constructor(_0xd02cb5,_0x3b4050,_0xc62128){const _0x55b90f=a0_0x34b2dc;this['configService']=_0xd02cb5,this[_0x55b90f(0x6e3)]=_0x3b4050,this['repository']=_0xc62128,this['AutomateSystem']=null,this[_0x55b90f(0x3cb)]=new $(u[_0x55b90f(0x673)]),this[_0x55b90f(0x770)]={},this[_0x55b90f(0x710)]={},this['stateConnection']={'state':'close'},this['storePath']=(0x0,j[_0x55b90f(0x3c9)])(ue,_0x55b90f(0x716)),this[_0x55b90f(0x721)]=new Fs[(_0x55b90f(0x62c))](),this[_0x55b90f(0x5ee)]=new Fs[(_0x55b90f(0x62c))](),this[_0x55b90f(0x2ea)]=!0x1,this[_0x55b90f(0x49c)]={'status.instance':_0x55b90f(0x66d),'connection.update':'/wa-connection-update','qrcode.updated':_0x55b90f(0x861),'messages.upsert':_0x55b90f(0x64a),'send.message':_0x55b90f(0x64a),'messages.update':_0x55b90f(0x24a),'group.upsert':'/wa-groups','group.update':_0x55b90f(0x822),'group-participants.update':_0x55b90f(0x822),'messages.set':'/wa-all-message','contacts.set':_0x55b90f(0x934),'contacts.upsert':_0x55b90f(0x934),'contacts.update':_0x55b90f(0x934),'presence.update':_0x55b90f(0x25c),'chats.set':_0x55b90f(0x36c),'chats.update':'/wa-chats','chats.upsert':_0x55b90f(0x36c),'chats.delete':_0x55b90f(0x36c)},this[_0x55b90f(0x2ff)]=0x0,this[_0x55b90f(0x2f9)]=[],this[_0x55b90f(0x5f8)]=0xea60,this[_0x55b90f(0x46a)]=!0x1,this[_0x55b90f(0x728)]={'chats.upsert':async(_0x4687a3,_0xd5db51)=>{const _0x5c5e26=_0x55b90f;let _0x5af98f=[];for await(let _0x950bf8 of _0x4687a3)_0x5af98f[_0x5c5e26(0x26d)]({'_id':_0x950bf8['id'],'owner':this[_0x5c5e26(0x770)]['wuid'],'group':_0x950bf8['id'][_0x5c5e26(0x5b1)]('@g.us'),'name':_0x950bf8[_0x5c5e26(0x673)]||_0x950bf8['displayName']||null,'contactname':null,'lastmsg':_0x950bf8[_0x5c5e26(0x8d6)]&&_0x950bf8['conversationTimestamp'][_0x5c5e26(0x1fe)]()[_0x5c5e26(0x3a3)]<0xd?_0x950bf8[_0x5c5e26(0x8d6)]*0x3e8:_0x950bf8['conversationTimestamp']||null,'archived':_0x950bf8[_0x5c5e26(0x5d0)]||!0x1,'unreadcount':_0x950bf8[_0x5c5e26(0x2e3)]||0x0,'ephemeralExpiration':_0x950bf8['ephemeralExpiration']||0x0});this[_0x5c5e26(0x687)](_0x5c5e26(0x296),_0x5af98f);},'chats.update':async(_0x3bc0e9,_0x452db4)=>{const _0x2f9f7f=_0x55b90f;for(let _0x351313 of _0x3bc0e9){let _0x2b759e={'_id':_0x351313['id'],'owner':this[_0x2f9f7f(0x770)][_0x2f9f7f(0x808)],'archived':_0x351313[_0x2f9f7f(0x5d0)],'muteEndTime':_0x351313[_0x2f9f7f(0x8f6)],'ephemeralExpiration':_0x351313[_0x2f9f7f(0x33b)]},_0x24ec72=!0x1,_0x413433={};_0x2b759e['archived']!=null&&(this[_0x2f9f7f(0x3cb)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x2f9f7f(0x808)]+_0x2f9f7f(0x65b)+_0x351313['id']+_0x2f9f7f(0x77a)+_0x351313[_0x2f9f7f(0x5d0)]),_0x24ec72=!0x0,_0x413433['archived']=_0x351313[_0x2f9f7f(0x5d0)]),'muteEndTime'in _0x351313&&(this[_0x2f9f7f(0x3cb)][_0x2f9f7f(0x798)](this['instanceName']+'\x20('+this[_0x2f9f7f(0x770)][_0x2f9f7f(0x808)]+_0x2f9f7f(0x416)+_0x351313['id']+_0x2f9f7f(0x77a)+(_0x351313[_0x2f9f7f(0x8f6)]??'0')),_0x24ec72=!0x0,_0x413433[_0x2f9f7f(0x8f6)]=_0x351313[_0x2f9f7f(0x8f6)]??0x0),_0x2f9f7f(0x33b)in _0x351313&&(this[_0x2f9f7f(0x3cb)][_0x2f9f7f(0x798)](this[_0x2f9f7f(0x402)]+'\x20('+this[_0x2f9f7f(0x770)][_0x2f9f7f(0x808)]+_0x2f9f7f(0x8b7)+_0x351313['id']+'\x20:\x20'+(_0x351313['ephemeralExpiration']!==void 0x0?_0x351313[_0x2f9f7f(0x33b)]:_0x2f9f7f(0x81e))),_0x413433[_0x2f9f7f(0x33b)]=_0x351313['ephemeralExpiration']===null?0x0:_0x351313[_0x2f9f7f(0x33b)],_0x24ec72=!0x0);let _0x56ff1b;_0x24ec72&&(_0x56ff1b=await this[_0x2f9f7f(0x261)][_0x2f9f7f(0x89d)][_0x2f9f7f(0x6ce)]({'where':{'_id':_0x351313['id']}},_0x413433,this[_0x2f9f7f(0x770)][_0x2f9f7f(0x808)])),_0x56ff1b&&q(this[_0x2f9f7f(0x402)],_0x2f9f7f(0x88b),{'chat':_0x56ff1b});}},'chats.delete':async _0x4b49b5=>{const _0x9875f=_0x55b90f;for(let _0xeb70b8 of _0x4b49b5)if(_0xeb70b8[_0x9875f(0x5b1)](_0x9875f(0x59c))){await this['repository']['chat'][_0x9875f(0x366)]({'where':{'_id':_0xeb70b8}},this[_0x9875f(0x770)][_0x9875f(0x808)]);let _0x43c100={'where':{'key':{'remoteJid':_0xeb70b8}}};await this['repository'][_0x9875f(0x5ce)][_0x9875f(0x366)](_0x43c100,this[_0x9875f(0x770)][_0x9875f(0x808)]);}else{await this[_0x9875f(0x261)]['chat'][_0x9875f(0x6ce)]({'where':{'_id':_0xeb70b8}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x9875f(0x770)][_0x9875f(0x808)]);let _0x319011={'where':{'key':{'remoteJid':_0xeb70b8}}};await this[_0x9875f(0x261)][_0x9875f(0x5ce)][_0x9875f(0x366)](_0x319011,this[_0x9875f(0x770)][_0x9875f(0x808)]);}this[_0x9875f(0x687)](_0x9875f(0x406),[..._0x4b49b5]);}},this['contactHandle']={'contacts.upsert':async(_0x405939,_0x71af5f)=>{const _0x2f8683=_0x55b90f;let _0x5f17f0=await this['repository'][_0x2f8683(0x5ad)][_0x2f8683(0x253)]({'where':{}},this[_0x2f8683(0x770)][_0x2f8683(0x808)]),_0x12e575=[];for await(let _0x574451 of _0x405939)_0x5f17f0[_0x2f8683(0x253)](_0xb98039=>_0xb98039['_id']===_0x574451['id'])||_0x12e575[_0x2f8683(0x26d)]({'_id':_0x574451['id'],'pushName':_0x574451?.[_0x2f8683(0x673)]||_0x574451?.[_0x2f8683(0x7dd)],'owner':this[_0x2f8683(0x770)][_0x2f8683(0x808)]});this[_0x2f8683(0x687)](_0x2f8683(0x60a),_0x12e575),await this[_0x2f8683(0x261)]['contact']['insert'](_0x12e575);},'contacts.update':async(_0x55d78e,_0x488a30)=>{const _0x54a68a=_0x55b90f;let _0x18290d=[];for await(let _0x46e084 of _0x55d78e)_0x18290d[_0x54a68a(0x26d)]({'_id':_0x46e084['id'],'pushName':_0x46e084?.[_0x54a68a(0x673)]??_0x46e084?.[_0x54a68a(0x7dd)],'owner':this[_0x54a68a(0x770)][_0x54a68a(0x808)]});this[_0x54a68a(0x687)](_0x54a68a(0x1ef),_0x18290d);}},this[_0x55b90f(0x5d3)]={'messaging-history.set':async({messages:_0x2a9cca,chats:_0x44e578,isLatest:_0x276268},_0x584734)=>{const _0x3c4590=_0x55b90f;if(_0x276268){let _0x133653=await Promise[_0x3c4590(0x57f)](_0x44e578[_0x3c4590(0x790)](async _0x580bcc=>({'_id':_0x580bcc['id'],'owner':this['instance'][_0x3c4590(0x808)],'group':_0x580bcc['id'][_0x3c4590(0x5b1)](_0x3c4590(0x59c)),'name':_0x580bcc[_0x3c4590(0x673)]||_0x580bcc[_0x3c4590(0x42d)]||_0x580bcc[_0x3c4590(0x60b)]||null,'contactname':null,'lastmsg':_0x580bcc[_0x3c4590(0x8d6)]&&_0x580bcc[_0x3c4590(0x8d6)][_0x3c4590(0x1fe)]()[_0x3c4590(0x3a3)]<0xd?_0x580bcc['conversationTimestamp']*0x3e8:_0x580bcc['conversationTimestamp']||null,'archived':_0x580bcc[_0x3c4590(0x5d0)]||!0x1,'unreadcount':_0x580bcc[_0x3c4590(0x2e3)]||0x0,'ephemeralExpiration':_0x580bcc[_0x3c4590(0x33b)]||0x0,'muteEndTime':_0x580bcc[_0x3c4590(0x8f6)]||0x0})));this[_0x3c4590(0x687)]('chats.set',_0x133653),await this[_0x3c4590(0x7f2)](_0x133653,_0x584734);}let _0xabb5a6=[],_0x3bdf7d=Date[_0x3c4590(0x880)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x364713]of Object[_0x3c4590(0x631)](_0x2a9cca)){if(_0x364713['message']?.['protocolMessage']||_0x364713[_0x3c4590(0x5ce)]?.[_0x3c4590(0x628)]||!_0x364713['message']||_0x364713['key'][_0x3c4590(0x668)]===_0x3c4590(0x779)||(Ls['default']['isLong'](_0x364713?.[_0x3c4590(0x912)])&&(_0x364713[_0x3c4590(0x912)]=_0x364713[_0x3c4590(0x912)]?.[_0x3c4590(0x84a)]()),_0x364713[_0x3c4590(0x912)]&&_0x364713[_0x3c4590(0x912)][_0x3c4590(0x1fe)]()[_0x3c4590(0x3a3)]<0xd&&(_0x364713[_0x3c4590(0x912)]=_0x364713[_0x3c4590(0x912)]*0x3e8),_0x364713['messageTimestamp']<_0x3bdf7d))continue;let _0x3e819c=(0x0,w[_0x3c4590(0x5e9)])(_0x364713[_0x3c4590(0x5ce)]),_0x2d1391=(0x0,w['getContentType'])(_0x3e819c),{message_normalized:_0x41b74d}=this[_0x3c4590(0x65e)](_0x3e819c,_0x2d1391,null);Object['keys'](_0x41b74d)[_0x3c4590(0x3a3)]>0x0&&_0xabb5a6[_0x3c4590(0x26d)]({'_id':_0x364713[_0x3c4590(0x85f)]['id'],'key':_0x364713[_0x3c4590(0x85f)],'pushName':_0x364713[_0x3c4590(0x414)],'participant':_0x364713[_0x3c4590(0x35e)],'message':_0x3e819c,'messageType':_0x2d1391,'message_normalized':{'key':_0x364713[_0x3c4590(0x85f)],'pushName':_0x364713[_0x3c4590(0x414)],'messageTimestamp':_0x364713[_0x3c4590(0x912)],..._0x41b74d},'messageTimestamp':_0x364713['messageTimestamp'],'owner':this[_0x3c4590(0x770)][_0x3c4590(0x808)]});}_0x584734['ENABLED']&&_0xabb5a6['length']>0x0&&(this['logger']['verbose'](this[_0x3c4590(0x402)]+'\x20('+this[_0x3c4590(0x770)][_0x3c4590(0x808)]+_0x3c4590(0x4b7)+_0xabb5a6[_0x3c4590(0x3a3)]+'\x20mensagens\x20de\x20'+this[_0x3c4590(0x770)][_0x3c4590(0x808)]+_0x3c4590(0x731)),await this['repository']['message'][_0x3c4590(0x6c0)]([..._0xabb5a6],this[_0x3c4590(0x770)][_0x3c4590(0x808)])),this[_0x3c4590(0x687)](_0x3c4590(0x598),[..._0xabb5a6]),_0x2a9cca=void 0x0;},'messages.upsert':async({messages:_0x1f13af,type:_0x4f07b9},_0x5badc1)=>{const _0x3c18e1=_0x55b90f;for(let _0x5af3d8 of _0x1f13af){if(this[_0x3c18e1(0x710)]?.['groups_ignore']&&_0x5af3d8[_0x3c18e1(0x85f)][_0x3c18e1(0x668)][_0x3c18e1(0x4c4)](_0x3c18e1(0x59c))){this[_0x3c18e1(0x3cb)][_0x3c18e1(0x798)](this[_0x3c18e1(0x402)]+'\x20('+this[_0x3c18e1(0x770)][_0x3c18e1(0x808)]+_0x3c18e1(0x897));return;}if(_0x4f07b9!==_0x3c18e1(0x4fd)||!_0x5af3d8?.[_0x3c18e1(0x5ce)]||_0x5af3d8['message']?.[_0x3c18e1(0x321)]||_0x5af3d8[_0x3c18e1(0x5ce)][_0x3c18e1(0x628)]||_0x5af3d8['key'][_0x3c18e1(0x668)]==='status@broadcast')return;let _0x3e6117=null,_0x3aa087=null;if(_0x5af3d8[_0x3c18e1(0x807)]&&_0x5af3d8[_0x3c18e1(0x807)][0x0]===_0x3c18e1(0x23f)){console[_0x3c18e1(0x651)](_0x3c18e1(0x927)),Jt[_0x5af3d8['key']['id']]=_0x5af3d8,this[_0x3c18e1(0x7e8)](_0x5af3d8,0x0);return;}Jt[_0x5af3d8[_0x3c18e1(0x85f)]['id']]&&(console[_0x3c18e1(0x651)]('[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache'),delete Jt[_0x5af3d8[_0x3c18e1(0x85f)]['id']]);try{_0x3e6117=await this[_0x3c18e1(0x4b1)](_0x5af3d8),_0x3aa087=_0x3e6117?_0x3e6117[_0x3c18e1(0x3c9)](','):null;}catch(_0x1c7de5){this['logger'][_0x3c18e1(0x798)](this[_0x3c18e1(0x402)]+'\x20('+this[_0x3c18e1(0x770)]['wuid']+'):\x20'+(_0x1c7de5 instanceof Error?_0x1c7de5[_0x3c18e1(0x5ce)]:JSON[_0x3c18e1(0x43f)](_0x1c7de5,null,0x2))),_0x3aa087='error\x20get\x20vote';}this[_0x3c18e1(0x45a)][_0x3c18e1(0x3bf)]('unavailable'),Ls[_0x3c18e1(0x62c)][_0x3c18e1(0x6a2)](_0x5af3d8[_0x3c18e1(0x912)])&&(_0x5af3d8[_0x3c18e1(0x912)]=_0x5af3d8['messageTimestamp']?.[_0x3c18e1(0x84a)]()),_0x5af3d8[_0x3c18e1(0x912)]&&_0x5af3d8[_0x3c18e1(0x912)][_0x3c18e1(0x1fe)]()[_0x3c18e1(0x3a3)]<0xd&&(_0x5af3d8[_0x3c18e1(0x912)]=_0x5af3d8[_0x3c18e1(0x912)]*0x3e8);let _0x27ea40=_0x5af3d8[_0x3c18e1(0x5ce)],_0x203244=(0x0,w['normalizeMessageContent'])(_0x27ea40),_0x239592=(0x0,w[_0x3c18e1(0x62f)])(_0x203244),{messageContent:_0x258451,message_normalized:_0x534dbe}=this[_0x3c18e1(0x65e)](_0x203244,_0x239592,_0x3aa087);_0x239592===_0x3c18e1(0x321)&&_0x258451?.['editedMessage']&&(_0x239592=_0x3c18e1(0x8ed));let _0x3ced34,_0x5b867e=_0x5af3d8[_0x3c18e1(0x85f)]['remoteJid'][_0x3c18e1(0x5b1)](_0x3c18e1(0x59c));if(_0x5af3d8[_0x3c18e1(0x85f)][_0x3c18e1(0x464)])_0x3ced34=this['instance'][_0x3c18e1(0x51f)];else{let _0xb9c7c4=_0x5b867e?_0x5af3d8[_0x3c18e1(0x85f)][_0x3c18e1(0x35e)]:_0x5af3d8['key'][_0x3c18e1(0x668)];_0x3ced34=(await this[_0x3c18e1(0x86c)](_0xb9c7c4,_0x5af3d8[_0x3c18e1(0x414)],!0x1))[_0x3c18e1(0x8e6)][_0x3c18e1(0x209)];}let _0x5899b0={'_id':_0x5af3d8['key']['id'],'key':_0x5af3d8['key'],'isGroup':_0x5b867e,'profilePictureUrl':_0x3ced34,'pushName':_0x5af3d8[_0x3c18e1(0x414)],'message':_0x203244,'messageType':_0x239592,'message_normalized':{'key':_0x5af3d8[_0x3c18e1(0x85f)],'pushName':_0x5af3d8[_0x3c18e1(0x414)],'messageTimestamp':_0x5af3d8[_0x3c18e1(0x912)],'source':(0x0,w['getDevice'])(_0x5af3d8['key']['id']),..._0x534dbe},'messageTimestamp':_0x5af3d8[_0x3c18e1(0x912)],'owner':this['instance']['wuid'],'source':(0x0,w[_0x3c18e1(0x553)])(_0x5af3d8[_0x3c18e1(0x85f)]['id']),'expiration':_0x258451?.['contextInfo']?.[_0x3c18e1(0x682)]||0x0};_0x258451||(this['logger'][_0x3c18e1(0x651)]('Mensagem\x20não\x20suportada'),this[_0x3c18e1(0x3cb)][_0x3c18e1(0x651)](_0x5899b0)),this[_0x3c18e1(0x3cb)][_0x3c18e1(0x476)](this[_0x3c18e1(0x402)]+'\x20('+this[_0x3c18e1(0x770)][_0x3c18e1(0x808)]+'):\x20'+(_0x5899b0[_0x3c18e1(0x85f)]?.[_0x3c18e1(0x464)]?_0x3c18e1(0x5d8):_0x3c18e1(0x712))+'\x20['+_0x5899b0['key']?.[_0x3c18e1(0x668)]['replace'](_0x3c18e1(0x831),'')+_0x3c18e1(0x57a)+_0x5899b0[_0x3c18e1(0x32e)]+')'),_0x5899b0['message_normalized']?.[_0x3c18e1(0x6b6)]&&this[_0x3c18e1(0x3cb)][_0x3c18e1(0x476)](_0x5af3d8[_0x3c18e1(0x85f)]['id']+':\x20'+_0x5899b0[_0x3c18e1(0x3b7)]?.[_0x3c18e1(0x6b6)]),await this[_0x3c18e1(0x261)][_0x3c18e1(0x5ce)][_0x3c18e1(0x6c0)]([_0x5899b0],this[_0x3c18e1(0x770)][_0x3c18e1(0x808)]),this[_0x3c18e1(0x687)](_0x3c18e1(0x31f),_0x5899b0),q(this['instanceName'],_0x3c18e1(0x591),{'message':_0x5899b0}),_0x5af3d8[_0x3c18e1(0x85f)][_0x3c18e1(0x668)]!==_0x3c18e1(0x779)&&await this[_0x3c18e1(0x4ad)](_0x5badc1,_0x5899b0,_0x3c18e1(0x4d4));}},'messages.update':async(_0x149674,_0x31d1ac)=>{const _0x3fa4cc=_0x55b90f;let _0x136a95={0x0:'ERROR',0x1:_0x3fa4cc(0x1f6),0x2:'SERVER_ACK',0x3:_0x3fa4cc(0x5c1),0x4:_0x3fa4cc(0x34b),0x5:_0x3fa4cc(0x758)};for await(let {key:_0xb54201,update:_0x4d6213}of _0x149674){if(this['localWebhook']?.[_0x3fa4cc(0x804)]&&_0xb54201[_0x3fa4cc(0x668)]['includes'](_0x3fa4cc(0x59c))){this[_0x3fa4cc(0x3cb)][_0x3fa4cc(0x798)](this[_0x3fa4cc(0x402)]+'\x20('+this[_0x3fa4cc(0x770)][_0x3fa4cc(0x808)]+_0x3fa4cc(0x2aa));return;}if(_0xb54201[_0x3fa4cc(0x668)]!=='status@broadcast'){let _0x27e383=Date[_0x3fa4cc(0x880)](),_0x258dff;_0x4d6213[_0x3fa4cc(0x5ce)]===null&&_0x4d6213[_0x3fa4cc(0x71c)]===void 0x0?_0x258dff=_0x3fa4cc(0x506):_0x258dff=_0x136a95[_0x4d6213[_0x3fa4cc(0x71c)]];let _0x2d8cf5=_0xb54201[_0x3fa4cc(0x668)][_0x3fa4cc(0x2a1)](/:\d{1,2}@/g,'@'),_0x5a4e74={..._0xb54201,'remoteJid':_0x2d8cf5,'status':_0x258dff,'datetime':_0x27e383,'owner':this[_0x3fa4cc(0x770)][_0x3fa4cc(0x808)]};this[_0x3fa4cc(0x687)](_0x3fa4cc(0x3ae),_0x5a4e74),await this[_0x3fa4cc(0x4d8)](_0xb54201,_0x5a4e74);}}},'labels.association':async({type:_0x27802d,association:_0x3d0826})=>{const _0x3394e0=_0x55b90f;if(_0x3d0826[_0x3394e0(0x248)]===_0x3394e0(0x6c9)){let _0x412753,_0x42b3b4=0x0;for(;!_0x412753&&_0x42b3b4<this['delayChatLabel_MAX_RETRIES'];)_0x412753=await this['repository'][_0x3394e0(0x89d)][_0x3394e0(0x440)]({'where':{'_id':_0x3d0826['chatId']}},this[_0x3394e0(0x770)][_0x3394e0(0x808)]),_0x412753||(_0x42b3b4++,this[_0x3394e0(0x3cb)][_0x3394e0(0x5df)](this['instanceName']+'\x20('+this[_0x3394e0(0x770)][_0x3394e0(0x808)]+_0x3394e0(0x7b5)+_0x3d0826['chatId']+_0x3394e0(0x642)+this[_0x3394e0(0x322)]+_0x3394e0(0x48b)+_0x42b3b4+'/'+this[_0x3394e0(0x278)]+')'),await this['delayChatLabel'](this['delayChatLabel_RETRY_DELAY_MS']));if(!_0x412753){this['logger'][_0x3394e0(0x651)](_0x3394e0(0x667)+_0x3d0826['chatId']+_0x3394e0(0x4ca)+this[_0x3394e0(0x278)]+_0x3394e0(0x906));return;}switch(_0x27802d){case _0x3394e0(0x420):console[_0x3394e0(0x476)](_0x3d0826),await this[_0x3394e0(0x261)][_0x3394e0(0x89d)][_0x3394e0(0x6ce)]({'where':{'_id':_0x3d0826[_0x3394e0(0x21c)]}},{'leadInfo.etiquetas':_0x3d0826[_0x3394e0(0x7e0)]},this[_0x3394e0(0x770)]['wuid'],void 0x0,'$addToSet');break;case'remove':console['log'](_0x3d0826),await this['repository'][_0x3394e0(0x89d)][_0x3394e0(0x6ce)]({'where':{'_id':_0x3d0826['chatId']}},{'leadInfo.etiquetas':_0x3d0826[_0x3394e0(0x7e0)]},this['instance'][_0x3394e0(0x808)],void 0x0,'$pull');break;default:this[_0x3394e0(0x3cb)][_0x3394e0(0x651)]('unknown\x20operation\x20type\x20['+_0x27802d+']');}}},'labels.edit':async _0x4e6505=>{const _0x337f68=_0x55b90f;if(!_0x4e6505||!_0x4e6505['id']){this[_0x337f68(0x3cb)]['error']('Rótulo\x20inválido\x20ou\x20sem\x20ID.');return;}if(!_0x4e6505[_0x337f68(0x435)]){let _0x2907c4=[_0x337f68(0x7d9),_0x337f68(0x51c),_0x337f68(0x358),_0x337f68(0x5d9),_0x337f68(0x485),'#56ccb4','#fe9dfe',_0x337f68(0x250),'#6f7bcf','#d8e651',_0x337f68(0x789),_0x337f68(0x92b),'#92ceac','#f64847','#00a1f2',_0x337f68(0x3c6),_0x337f68(0x28f),_0x337f68(0x8ba),_0x337f68(0x72a),_0x337f68(0x80f)],_0x4ab321;typeof _0x4e6505[_0x337f68(0x315)]==_0x337f68(0x51e)&&_0x4e6505['color']>=0x0&&_0x4e6505[_0x337f68(0x315)]<_0x2907c4[_0x337f68(0x3a3)]?_0x4ab321=_0x2907c4[_0x4e6505[_0x337f68(0x315)]]:(this['logger'][_0x337f68(0x651)]('Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20'+_0x4e6505[_0x337f68(0x315)]),_0x4ab321=_0x337f68(0x92a));let _0x19245d={'_id':_0x4e6505['id'],'colorHex':_0x4ab321,'color':_0x4e6505?.[_0x337f68(0x315)],'name':_0x4e6505?.[_0x337f68(0x673)],'owner':this[_0x337f68(0x770)][_0x337f68(0x808)]};await this['repository'][_0x337f68(0x8fd)][_0x337f68(0x6ce)]({'where':{'_id':_0x4e6505['id']}},_0x19245d,this[_0x337f68(0x770)][_0x337f68(0x808)]),this[_0x337f68(0x3cb)]['info'](this[_0x337f68(0x402)]+'\x20('+this[_0x337f68(0x770)]['wuid']+_0x337f68(0x548)+_0x4e6505);}_0x4e6505[_0x337f68(0x435)]&&(await this[_0x337f68(0x261)]['label'][_0x337f68(0x366)]({'where':{'_id':_0x4e6505['id']}},this[_0x337f68(0x770)][_0x337f68(0x808)]),this[_0x337f68(0x3cb)][_0x337f68(0x5df)](_0x337f68(0x410)+_0x4e6505['id']));}},this[_0x55b90f(0x25b)]={'groups.upsert':async _0x30bc06=>{const _0x1f13c3=_0x55b90f;this['localWebhook']?.['groups_ignore']||this[_0x1f13c3(0x687)](_0x1f13c3(0x8aa),_0x30bc06);for(let _0x5a340b of _0x30bc06)await this[_0x1f13c3(0x6b1)](_0x5a340b);},'groups.update':async _0x5a261c=>{const _0xe030f8=_0x55b90f;this[_0xe030f8(0x710)]?.['groups_ignore']||this[_0xe030f8(0x687)](_0xe030f8(0x6fc),_0x5a261c);for(let _0x58f2a4 of _0x5a261c)await this[_0xe030f8(0x6b1)](_0x58f2a4);},'group-participants.update':async _0x5714a9=>{const _0x4c0641=_0x55b90f;this[_0x4c0641(0x710)]?.[_0x4c0641(0x804)]||this[_0x4c0641(0x687)](_0x4c0641(0x45d),_0x5714a9),await this[_0x4c0641(0x35a)](_0x5714a9);}},this[_0x55b90f(0x278)]=0x5,this[_0x55b90f(0x322)]=0x1388,this['lastRealGroupsFetch']=0x0,this[_0x55b90f(0x4b1)]=async _0x4c8961=>{const _0x29026f=_0x55b90f;if(_0x4c8961[_0x29026f(0x5ce)]?.[_0x29026f(0x352)]){let _0x4d516e=await this['getMessage'](_0x4c8961['message'][_0x29026f(0x352)][_0x29026f(0x258)],!0x0);if(_0x4d516e){let _0x187747=_0x4d516e[_0x29026f(0x85f)][_0x29026f(0x464)]?this[_0x29026f(0x770)][_0x29026f(0x808)]+'@s.whatsapp.net':_0x4d516e['key']['participant']||_0x4d516e[_0x29026f(0x85f)][_0x29026f(0x668)],_0x57b07d=_0x4d516e[_0x29026f(0x85f)]['id'],_0x2531eb=_0x4d516e[_0x29026f(0x5ce)],_0x20fef6=Buffer['from'](_0x2531eb[_0x29026f(0x3dd)][_0x29026f(0x3fe)][_0x29026f(0x1fe)](_0x29026f(0x60f)),_0x29026f(0x60f)),_0x17323d=(0x0,w[_0x29026f(0x298)])(_0x4c8961[_0x29026f(0x5ce)][_0x29026f(0x352)]['vote'],{'pollCreatorJid':_0x187747,'pollMsgId':_0x57b07d,'pollEncKey':_0x20fef6,'voterJid':_0x4c8961[_0x29026f(0x85f)][_0x29026f(0x464)]?this[_0x29026f(0x770)][_0x29026f(0x808)]+_0x29026f(0x831):_0x4c8961['key'][_0x29026f(0x668)][_0x29026f(0x5b1)](_0x29026f(0x4c3))?_0x4c8961['key']['participant']:_0x4c8961[_0x29026f(0x85f)][_0x29026f(0x668)]}),_0x1089ff=[],_0x5da3cc=_0x17323d['selectedOptions'][_0x29026f(0x790)](_0x1c4fb6=>Buffer['from'](_0x1c4fb6)['toString']('hex'));for(let {optionName:_0x47a2ec}of _0x2531eb[_0x29026f(0x657)]?.[_0x29026f(0x812)]||_0x2531eb[_0x29026f(0x2d3)]?.[_0x29026f(0x812)]||_0x2531eb['pollCreationMessageV2']?.[_0x29026f(0x812)])_0x5da3cc[_0x29026f(0x84b)]((0x0,w[_0x29026f(0x5a7)])(Buffer[_0x29026f(0x77b)](_0x47a2ec))[_0x29026f(0x1fe)](_0x29026f(0x60f)))>-0x1&&_0x1089ff[_0x29026f(0x26d)](_0x47a2ec);return _0x1089ff;}}return null;},this[_0x55b90f(0x65e)]=(_0x524c51,_0x5637bd,_0x5447e2)=>{const _0x150c10=_0x55b90f;try{let _0x5c7fcb=_0x524c51?(0x0,w[_0x150c10(0x662)])(_0x524c51)[_0x5637bd]:void 0x0,_0x3d964f={},_0x1402c4=null,_0x192a20=null,_0x56c564=null;_0x5637bd===_0x150c10(0x321)&&_0x5c7fcb?.[_0x150c10(0x8ed)]&&(_0x5637bd=(0x0,w['getContentType'])(_0x5c7fcb['editedMessage']),_0x1402c4=_0x524c51[_0x150c10(0x321)][_0x150c10(0x85f)]['id'],_0x5c7fcb=_0x524c51[_0x150c10(0x321)]['editedMessage'][_0x5637bd]),_0x524c51[_0x5637bd]?.[_0x150c10(0x354)]?.[_0x150c10(0x1fc)]&&_0x524c51[_0x5637bd]?.[_0x150c10(0x354)]?.[_0x150c10(0x34a)]&&(_0x192a20=_0x524c51[_0x5637bd][_0x150c10(0x354)][_0x150c10(0x1fc)]),_0x524c51['reactionMessage']&&(_0x56c564=_0x524c51[_0x150c10(0x617)][_0x150c10(0x85f)]['id']);let _0x399e6b;if(_0x5c7fcb&&typeof _0x5c7fcb==_0x150c10(0x89b)&&'pollCreationMessageKey'in _0x5c7fcb&&({pollCreationMessageKey:_0x399e6b}=_0x5c7fcb),_0x5637bd===_0x150c10(0x657)||_0x5637bd==='pollCreationMessageV2'||_0x5637bd==='pollCreationMessageV3'){let _0x20a6a2=_0x5c7fcb[_0x150c10(0x812)][_0x150c10(0x790)](_0x5b3595=>_0x5b3595['optionName'])[_0x150c10(0x3c9)]('|');_0x3d964f[_0x150c10(0x443)]=_0x20a6a2;}let _0x3df3b1='';if(_0x5c7fcb&&(_0x3df3b1+=_0x5c7fcb['name']?_0x5c7fcb[_0x150c10(0x673)]:'',_0x3df3b1+=_0x5c7fcb[_0x150c10(0x39d)]?'\x20'+_0x5c7fcb[_0x150c10(0x39d)]:'',_0x3df3b1+=_0x5c7fcb[_0x150c10(0x212)]?'\x20'+_0x5c7fcb[_0x150c10(0x212)]:'',_0x3df3b1+=_0x5c7fcb[_0x150c10(0x42d)]?'\x20'+_0x5c7fcb[_0x150c10(0x42d)]:''),_0x5637bd===_0x150c10(0x680)){_0x3df3b1=(_0x5c7fcb['title']||'')+'\x0a'+(_0x5c7fcb[_0x150c10(0x691)]||'')+'\x0a'+(_0x5c7fcb[_0x150c10(0x78e)]||'');let _0x50b6c1=this[_0x150c10(0x8ee)](_0x5c7fcb[_0x150c10(0x517)]);_0x3d964f[_0x150c10(0x443)]=_0x50b6c1;}if(_0x5637bd==='listResponseMessage'&&(_0x5447e2=_0x5c7fcb['title']),_0x5c7fcb&&_0x5c7fcb[_0x150c10(0x5ac)]){let _0x1e0d15=this['formatVCard'](JSON[_0x150c10(0x43f)](_0x5c7fcb[_0x150c10(0x5ac)],null,0x2));_0x3df3b1=_0x3df3b1+'\x0a'+_0x1e0d15;}if(_0x5c7fcb){let {sections:_0x18b527,listType:_0x5d4efe,displayName:_0x50ad44,vcard:_0x4a4c59,contactVcard:_0xefad4e,name:_0x145132,caption:_0x3b5bc9,conversation:_0x433f08,pollCreationMessageKey:_0xc6b401,footerText:_0x149f47,contentText:_0x127237,pageCount:_0x2e4979,headerType:_0x6a4d25,isAvatar:_0x32dc7c,isAnimated:_0x23d01a,fallbackLc:_0x3493e7,fallbackLg:_0x376084,namespace:_0x585a23,elementName:_0x720f58,localizableParams:_0x4e6614,viewOnce:_0x42835f,height:_0x4ec0a8,width:_0x3d8678,key:_0x5db3ed,firstScanLength:_0x54a910,firstScanSidecar:_0x465f02,gifPlayback:_0x3fc16c,gifAttribution:_0x94f261,midQualityFileSha256:_0x5d1c1c,scansSidecar:_0x57d399,streamingSidecar:_0x175e7f,thumbnailHeight:_0x4d9602,thumbnailWidth:_0x1a2a9c,thumbnailEncSha256:_0x396108,thumbnailDirectPath:_0x9f872a,canonicalUrl:_0x3f2f08,matchedText:_0x256f46,previewType:_0x4994ab,thumbnailSha256:_0x579dbc,deviceListMetadataVersion:_0x57b74c,inviteLinkGroupTypeV2:_0x4014dc,interactiveAnnotations:_0x20b362,scanLengths:_0x2871ed,jpegThumbnail:_0x40a240,url:_0x3b22fe,mediaKeyTimestamp:_0x2a5c26,waveform:_0x3f65ab,stickerSentTs:_0x3b7ef0,firstFrameLength:_0x6062b2,fileEncSha256:_0x15faff,contextInfo:_0x3d3a26,firstFrameSidecar:_0x3980d6,directPath:_0x291878,fileSha256:_0x1d5411,mediaKey:_0x1c5851,senderTimestampMs:_0x1a3e58,..._0x11d5c7}=_0x5c7fcb;(_0x5637bd===_0x150c10(0x680)||_0x5637bd===_0x150c10(0x7cf))&&(delete _0x11d5c7[_0x150c10(0x1f9)],delete _0x11d5c7[_0x150c10(0x691)]),typeof _0x5c7fcb=='string'?_0x3d964f={'text':_0x5c7fcb,'type':_0x5637bd||_0x150c10(0x212),..._0x1402c4&&{'edited':_0x1402c4},..._0x192a20&&{'quoted':_0x192a20},..._0x56c564&&{'reaction':_0x56c564}}:_0x3d964f={'text':_0x3df3b1,..._0x11d5c7,..._0x5637bd==='pollUpdateMessage'?{'poll_id':_0x5c7fcb['pollCreationMessageKey']['id'],'quoted':_0x5c7fcb['pollCreationMessageKey']['id'],'vote':_0x5447e2}:{},..._0x5637bd===_0x150c10(0x7cf)?{'vote':_0x5447e2}:{},'type':_0x5637bd,..._0x1402c4&&{'edited':_0x1402c4},..._0x192a20&&{'quoted':_0x192a20},..._0x56c564&&{'reaction':_0x56c564},...(_0x5637bd===_0x150c10(0x657)||_0x5637bd===_0x150c10(0x815)||_0x5637bd===_0x150c10(0x2d3)||_0x5637bd===_0x150c10(0x680))&&{'convertedOptions':_0x3d964f[_0x150c10(0x443)]}};}return{'messageType':_0x5637bd,'messageContent':_0x5c7fcb,'message_normalized':_0x3d964f};}catch(_0x23ff8c){return this['logger'][_0x150c10(0x651)](_0x150c10(0x503)+_0x23ff8c),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this['processUUID']=null,this[_0x55b90f(0x2b7)]=[],(this['cleanStore'](),this[_0x55b90f(0x770)][_0x55b90f(0x755)]={'count':0x0},this[_0x55b90f(0x770)]['ScheduleMessage']={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}set[a0_0x34b2dc(0x402)](_0x2cf9e2){const _0x5b152b=a0_0x34b2dc;if(!_0x2cf9e2){this[_0x5b152b(0x770)][_0x5b152b(0x673)]=(0x0,_i['v4'])();return;}this[_0x5b152b(0x770)][_0x5b152b(0x673)]=_0x2cf9e2,this[_0x5b152b(0x687)](_0x5b152b(0x390),{'instance':this[_0x5b152b(0x770)][_0x5b152b(0x673)],'status':_0x5b152b(0x8a4)});}get[a0_0x34b2dc(0x402)](){const _0x3c7a1a=a0_0x34b2dc;return this[_0x3c7a1a(0x770)][_0x3c7a1a(0x673)];}get[a0_0x34b2dc(0x808)](){const _0x523f9f=a0_0x34b2dc;return this[_0x523f9f(0x770)]['wuid'];}async['getProfileName'](){const _0x503ea6=a0_0x34b2dc;let _0x595c3b=this[_0x503ea6(0x45a)][_0x503ea6(0x1f0)]?.[_0x503ea6(0x673)]??this['client'][_0x503ea6(0x1f0)]?.[_0x503ea6(0x7dd)];if(!_0x595c3b){if(this['configService'][_0x503ea6(0x30a)](_0x503ea6(0x25e))['ENABLED']){let _0x2f063a=await R[_0x503ea6(0x388)]()['db'](this['configService'][_0x503ea6(0x30a)]('DATABASE')[_0x503ea6(0x259)]['DB_PREFIX_NAME']+_0x503ea6(0x621))['collection'](this[_0x503ea6(0x402)])[_0x503ea6(0x440)]({'_id':_0x503ea6(0x818)});if(_0x2f063a){let _0x3a134f=JSON['parse'](JSON[_0x503ea6(0x43f)](_0x2f063a),w['BufferJSON']['reviver']);_0x595c3b=_0x3a134f['me']?.[_0x503ea6(0x673)]||_0x3a134f['me']?.[_0x503ea6(0x7dd)];}}else{if((0x0,Fe[_0x503ea6(0x68c)])((0x0,j['join'])(Me,this[_0x503ea6(0x402)],_0x503ea6(0x932)))){let _0x393e8c=JSON[_0x503ea6(0x232)]((0x0,Fe[_0x503ea6(0x4a2)])((0x0,j[_0x503ea6(0x3c9)])(Me,this[_0x503ea6(0x402)],_0x503ea6(0x932)),{'encoding':_0x503ea6(0x367)}));_0x595c3b=_0x393e8c['me']?.[_0x503ea6(0x673)]||_0x393e8c['me']?.[_0x503ea6(0x7dd)];}}}return _0x595c3b;}get['profilePictureUrl'](){const _0x1e0240=a0_0x34b2dc;return this[_0x1e0240(0x770)][_0x1e0240(0x51f)];}get['qrCode'](){const _0x28d21c=a0_0x34b2dc;return this[_0x28d21c(0x770)][_0x28d21c(0x755)]?.[_0x28d21c(0x20d)]?{'pairingCode':this[_0x28d21c(0x770)][_0x28d21c(0x755)]?.[_0x28d21c(0x20d)]}:{'code':this['instance']['qrcode']?.['code'],'base64':this[_0x28d21c(0x770)][_0x28d21c(0x755)]?.[_0x28d21c(0x616)]};}async[a0_0x34b2dc(0x6de)](){const _0x1b242a=a0_0x34b2dc;let _0x5e1f1a=await this[_0x1b242a(0x261)][_0x1b242a(0x492)][_0x1b242a(0x253)](this[_0x1b242a(0x402)]);this[_0x1b242a(0x710)][_0x1b242a(0x931)]=_0x5e1f1a?.[_0x1b242a(0x931)],this[_0x1b242a(0x710)]['enabled']=_0x5e1f1a?.['enabled'],this[_0x1b242a(0x710)][_0x1b242a(0x4f0)]=_0x5e1f1a?.[_0x1b242a(0x4f0)],this[_0x1b242a(0x710)][_0x1b242a(0x5a8)]=_0x5e1f1a?.[_0x1b242a(0x5a8)],this[_0x1b242a(0x710)]['QRCODE_UPDATED']=_0x5e1f1a?.[_0x1b242a(0x2a2)],this[_0x1b242a(0x710)][_0x1b242a(0x2ce)]=_0x5e1f1a?.[_0x1b242a(0x2ce)],this[_0x1b242a(0x710)][_0x1b242a(0x4d4)]=_0x5e1f1a?.[_0x1b242a(0x4d4)],this['localWebhook']['MESSAGES_UPDATE']=_0x5e1f1a?.[_0x1b242a(0x377)],this['localWebhook'][_0x1b242a(0x4e9)]=_0x5e1f1a?.['GROUPS_UPSERT'],this[_0x1b242a(0x710)][_0x1b242a(0x66e)]=_0x5e1f1a?.[_0x1b242a(0x66e)],this[_0x1b242a(0x710)]['GROUP_PARTICIPANTS_UPDATE']=_0x5e1f1a?.['GROUP_PARTICIPANTS_UPDATE'],this[_0x1b242a(0x710)][_0x1b242a(0x2c9)]=_0x5e1f1a?.[_0x1b242a(0x2c9)],this[_0x1b242a(0x710)][_0x1b242a(0x39b)]=_0x5e1f1a?.[_0x1b242a(0x39b)],this[_0x1b242a(0x710)][_0x1b242a(0x345)]=_0x5e1f1a?.[_0x1b242a(0x345)],this['localWebhook'][_0x1b242a(0x895)]=_0x5e1f1a?.['CHATS_DELETE'],this[_0x1b242a(0x710)][_0x1b242a(0x312)]=_0x5e1f1a?.[_0x1b242a(0x312)],this[_0x1b242a(0x710)][_0x1b242a(0x850)]=_0x5e1f1a?.[_0x1b242a(0x850)],this[_0x1b242a(0x710)][_0x1b242a(0x3f6)]=_0x5e1f1a?.[_0x1b242a(0x3f6)],this[_0x1b242a(0x710)][_0x1b242a(0x2b6)]=_0x5e1f1a?.[_0x1b242a(0x2b6)],this[_0x1b242a(0x710)][_0x1b242a(0x7f5)]=_0x5e1f1a?.['MESSAGES_SET'],this[_0x1b242a(0x710)][_0x1b242a(0x894)]=_0x5e1f1a?.[_0x1b242a(0x894)],this['localWebhook'][_0x1b242a(0x804)]=_0x5e1f1a?.['groups_ignore'];}async[a0_0x34b2dc(0x625)](_0x1c6335){const _0x306014=a0_0x34b2dc;let _0xc75663=[_0x306014(0x2c7),'url','enabled',_0x306014(0x4f0),_0x306014(0x5a8),_0x306014(0x2a2),'MESSAGES_UPDATE',_0x306014(0x4d4),_0x306014(0x2ce),'GROUPS_UPSERT','GROUPS_UPDATE',_0x306014(0x206),'CHATS_SET',_0x306014(0x39b),'CHATS_UPDATE',_0x306014(0x895),_0x306014(0x312),_0x306014(0x850),_0x306014(0x3f6),_0x306014(0x2b6),_0x306014(0x7f5),_0x306014(0x894),_0x306014(0x804)],_0x4bd27a={};return _0xc75663['forEach'](_0x58ecd4=>{_0x1c6335[_0x58ecd4]!==void 0x0&&(_0x4bd27a[_0x58ecd4]=_0x1c6335[_0x58ecd4]);}),_0x4bd27a[_0x306014(0x931)]&&(_0x4bd27a[_0x306014(0x931)]=_0x4bd27a[_0x306014(0x931)][_0x306014(0x3b8)]()),await this[_0x306014(0x261)]['webhook'][_0x306014(0x663)](_0x4bd27a,this[_0x306014(0x402)]),Object[_0x306014(0x2c4)](this[_0x306014(0x710)],_0x4bd27a),await this[_0x306014(0x261)]['webhook'][_0x306014(0x253)](this['instanceName']);}async[a0_0x34b2dc(0x305)](){const _0x309024=a0_0x34b2dc;return await this[_0x309024(0x261)][_0x309024(0x492)][_0x309024(0x253)](this['instanceName']);}async[a0_0x34b2dc(0x687)](_0x12144e,_0x595100){const _0x202c09=a0_0x34b2dc;let _0x5cf02f=_0x12144e[_0x202c09(0x2a1)](/[\.-]/gm,'_')['toUpperCase'](),_0x3c4077=this[_0x202c09(0x710)][_0x202c09(0x6ad)]&&(0x0,L[_0x202c09(0x525)])(this[_0x202c09(0x710)]['url'])?this[_0x202c09(0x710)]['url']+(this['localWebhook'][_0x202c09(0x4f0)]?this[_0x202c09(0x49c)][_0x12144e]:''):null,_0x1b9810=this[_0x202c09(0x710)][_0x5cf02f],_0xdad061=me&&me['enabled']&&(0x0,L[_0x202c09(0x525)])(me[_0x202c09(0x931)])?me['url']+(me[_0x202c09(0x4f0)]?this[_0x202c09(0x49c)][_0x12144e]:''):null,_0x52f4c1=me?me[_0x5cf02f]:null;if(_0x1b9810&&_0x3c4077)try{await te['default'][_0x202c09(0x663)]({'baseURL':_0x3c4077})[_0x202c09(0x4f2)]('',{'event':_0x12144e,'instance':this[_0x202c09(0x770)][_0x202c09(0x673)],'apikey':this['instance']['apikey'],'data':_0x595100}),this[_0x202c09(0x3cb)]['log'](this['instanceName']+'\x20('+this[_0x202c09(0x770)][_0x202c09(0x808)]+_0x202c09(0x7ea)+_0x12144e+':\x20'+_0x3c4077);}catch{this[_0x202c09(0x3cb)][_0x202c09(0x651)](this[_0x202c09(0x402)]+'\x20('+this['instance'][_0x202c09(0x808)]+_0x202c09(0x713)+_0x12144e+':\x20'+_0x3c4077);}if(_0x52f4c1&&_0xdad061)try{await te[_0x202c09(0x62c)][_0x202c09(0x663)]({'baseURL':_0xdad061})[_0x202c09(0x4f2)]('',{'event':_0x12144e,'instance':this[_0x202c09(0x770)][_0x202c09(0x673)],'apikey':this[_0x202c09(0x770)][_0x202c09(0x1e7)],'data':_0x595100}),this[_0x202c09(0x3cb)]['log'](this['instanceName']+'\x20('+this[_0x202c09(0x770)]['wuid']+_0x202c09(0x49e)+_0x12144e+':\x20'+_0xdad061);}catch{this[_0x202c09(0x3cb)][_0x202c09(0x651)](this['instanceName']+'\x20('+this[_0x202c09(0x770)][_0x202c09(0x808)]+_0x202c09(0x8f0)+_0x12144e+':\x20'+_0xdad061);}}async[a0_0x34b2dc(0x27f)]({qr:_0x442082,connection:_0x3923da,lastDisconnect:_0x10b708}){const _0x3510f7=a0_0x34b2dc;if(_0x442082){if(this[_0x3510f7(0x770)][_0x3510f7(0x755)][_0x3510f7(0x762)]===Fo)return this[_0x3510f7(0x687)](_0x3510f7(0x3de),{'message':_0x3510f7(0x35d),'statusCode':w['DisconnectReason']['badSession']}),this[_0x3510f7(0x87d)]={'state':_0x3510f7(0x708),'statusReason':w[_0x3510f7(0x7da)][_0x3510f7(0x4cf)]},this[_0x3510f7(0x687)](_0x3510f7(0x3df),{'instance':this[_0x3510f7(0x770)][_0x3510f7(0x673)],...this[_0x3510f7(0x87d)]}),this[_0x3510f7(0x687)](_0x3510f7(0x390),{'instance':this[_0x3510f7(0x770)][_0x3510f7(0x673)],'status':_0x3510f7(0x90b)}),this[_0x3510f7(0x261)]['auth'][_0x3510f7(0x366)](this['instance'][_0x3510f7(0x673)]),this[_0x3510f7(0x2ea)]=!0x0,re[_0x3510f7(0x820)](K,this[_0x3510f7(0x770)][_0x3510f7(0x673)]),this[_0x3510f7(0x6e3)][_0x3510f7(0x7ed)](_0x3510f7(0x571),this[_0x3510f7(0x770)][_0x3510f7(0x673)]);this['instance']['qrcode'][_0x3510f7(0x762)]++;let _0x320971={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':'#ffffff','dark':_0x3510f7(0x92a)}};xi[_0x3510f7(0x62c)][_0x3510f7(0x690)](_0x442082,_0x320971,(_0x4d86a7,_0x52098e)=>{const _0x30cf1a=_0x3510f7;if(_0x4d86a7){this[_0x30cf1a(0x3cb)][_0x30cf1a(0x651)](this[_0x30cf1a(0x402)]+'\x20('+this[_0x30cf1a(0x770)][_0x30cf1a(0x808)]+_0x30cf1a(0x68b)+(_0x4d86a7 instanceof Error?_0x4d86a7[_0x30cf1a(0x5ce)]:JSON[_0x30cf1a(0x43f)](_0x4d86a7,null,0x2)));return;}this['instance'][_0x30cf1a(0x755)][_0x30cf1a(0x616)]=_0x52098e,this['instance'][_0x30cf1a(0x755)]['code']=_0x442082,!this[_0x30cf1a(0x5bf)]&&this[_0x30cf1a(0x687)](_0x30cf1a(0x3de),{'qrcode':{'instance':this[_0x30cf1a(0x770)][_0x30cf1a(0x673)],'pairingCode':this['instance'][_0x30cf1a(0x755)][_0x30cf1a(0x20d)],'code':_0x442082,'base64':_0x52098e}});}),this[_0x3510f7(0x5bf)]?this[_0x3510f7(0x770)][_0x3510f7(0x755)]['pairingCode']||(await(0x0,w['delay'])(0x7d0),this['instance'][_0x3510f7(0x755)][_0x3510f7(0x20d)]=await this[_0x3510f7(0x45a)][_0x3510f7(0x24b)](this[_0x3510f7(0x5bf)])):this[_0x3510f7(0x770)]['qrcode'][_0x3510f7(0x20d)]=null,Di[_0x3510f7(0x62c)][_0x3510f7(0x923)](_0x442082,{'small':!0x0},_0x5e599a=>this[_0x3510f7(0x3cb)][_0x3510f7(0x476)](_0x3510f7(0x2a0)+this[_0x3510f7(0x770)][_0x3510f7(0x673)]+_0x3510f7(0x30d)+this['instance'][_0x3510f7(0x755)][_0x3510f7(0x762)]+_0x3510f7(0x43b)+this[_0x3510f7(0x770)][_0x3510f7(0x755)]['pairingCode']+_0x3510f7(0x247)+_0x5e599a));}if(_0x3923da&&(this[_0x3510f7(0x87d)]={'state':_0x3923da,'statusReason':_0x10b708?.['error']?.[_0x3510f7(0x526)]?.['statusCode']??0xc8},this['sendDataWebhook'](_0x3510f7(0x3df),{'instance':this[_0x3510f7(0x770)][_0x3510f7(0x673)],...this[_0x3510f7(0x87d)]})),_0x3923da===_0x3510f7(0x6dd)){if(this[_0x3510f7(0x2ff)]++,this['reconnectTimestamps']['push'](Date[_0x3510f7(0x880)]()),this[_0x3510f7(0x2f9)]=this[_0x3510f7(0x2f9)][_0x3510f7(0x334)](_0x58459d=>Date[_0x3510f7(0x880)]()-_0x58459d<this['RECONNECT_TIME_FRAME']),_0x10b708[_0x3510f7(0x651)]?.['output']?.[_0x3510f7(0x813)]!==w[_0x3510f7(0x7da)]['loggedOut']){let _0x40f80b=this['reconnectAttempts']<=0x1?0x0:Math[_0x3510f7(0x633)](Math[_0x3510f7(0x70e)](0x2,this[_0x3510f7(0x2ff)]-0x1)*0x3e8,0x493e0);console[_0x3510f7(0x476)](this[_0x3510f7(0x402)]+_0x3510f7(0x8f5)+this[_0x3510f7(0x2ff)]+_0x3510f7(0x6b7)+_0x40f80b/0x3e8+_0x3510f7(0x37d)),await new Promise(_0x26f4f3=>setTimeout(_0x26f4f3,_0x40f80b)),console[_0x3510f7(0x476)](_0x3510f7(0x8ae)),await this[_0x3510f7(0x287)]();}else{this[_0x3510f7(0x687)](_0x3510f7(0x390),{'instance':this[_0x3510f7(0x770)][_0x3510f7(0x673)],'status':_0x3510f7(0x90b)}),this[_0x3510f7(0x770)]['ScheduleMessage'][_0x3510f7(0x85c)]=!0x1,this[_0x3510f7(0x261)][_0x3510f7(0x492)][_0x3510f7(0x366)](this['instanceName']),this[_0x3510f7(0x261)][_0x3510f7(0x210)][_0x3510f7(0x663)]({'owner':'','online':!0x1,'lastDisconnect':Date['now']()},this[_0x3510f7(0x770)][_0x3510f7(0x673)]),re[_0x3510f7(0x820)](K,this['instance'][_0x3510f7(0x673)]);try{this[_0x3510f7(0x3cb)][_0x3510f7(0x798)](this[_0x3510f7(0x402)]+'\x20('+this[_0x3510f7(0x770)]['wuid']+_0x3510f7(0x392));let _0xbb53b1=await this[_0x3510f7(0x261)][_0x3510f7(0x5ce)][_0x3510f7(0x515)](this[_0x3510f7(0x770)][_0x3510f7(0x808)]);_0xbb53b1['success']?this['logger'][_0x3510f7(0x798)](this[_0x3510f7(0x402)]+'\x20('+this[_0x3510f7(0x770)][_0x3510f7(0x808)]+_0x3510f7(0x1eb)):this[_0x3510f7(0x3cb)][_0x3510f7(0x651)](_0x3510f7(0x565)+_0xbb53b1['error']);}catch(_0x2bf4cf){this[_0x3510f7(0x3cb)]['error']('Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20'+_0x2bf4cf[_0x3510f7(0x5ce)]);}this[_0x3510f7(0x770)][_0x3510f7(0x846)]['delayMessage']!==null&&(this[_0x3510f7(0x3cb)][_0x3510f7(0x798)](this[_0x3510f7(0x402)]+'\x20('+this[_0x3510f7(0x770)][_0x3510f7(0x808)]+_0x3510f7(0x761)),clearInterval(this[_0x3510f7(0x770)][_0x3510f7(0x846)][_0x3510f7(0x4ed)]),this[_0x3510f7(0x770)][_0x3510f7(0x846)][_0x3510f7(0x4ed)]=null),this['logger'][_0x3510f7(0x798)](this[_0x3510f7(0x402)]+'\x20('+this[_0x3510f7(0x770)][_0x3510f7(0x808)]+'):\x20Limpando\x20AutomateSystem'),this['AutomateSystem']=null,this[_0x3510f7(0x6e3)]['emit'](_0x3510f7(0x455),this[_0x3510f7(0x770)][_0x3510f7(0x673)],'inner'),this[_0x3510f7(0x45a)]?.['ws']?.[_0x3510f7(0x6dd)](),this[_0x3510f7(0x45a)][_0x3510f7(0x4f8)](new Error('Close\x20connection'));}}if(_0x3923da===_0x3510f7(0x5a2)){this['logger'][_0x3510f7(0x41f)](this['instanceName']+'\x20('+this[_0x3510f7(0x770)]['wuid']+_0x3510f7(0x917)+this[_0x3510f7(0x45a)][_0x3510f7(0x6c4)][_0x3510f7(0x818)]?.[_0x3510f7(0x536)]),this['client'][_0x3510f7(0x6c4)][_0x3510f7(0x818)]?.[_0x3510f7(0x536)]||(this[_0x3510f7(0x3cb)][_0x3510f7(0x41f)](this[_0x3510f7(0x402)]+'\x20('+this['instance'][_0x3510f7(0x808)]+_0x3510f7(0x3b2)),this['client']['ev'][_0x3510f7(0x7d3)]()),this[_0x3510f7(0x445)],this[_0x3510f7(0x770)][_0x3510f7(0x808)]=this[_0x3510f7(0x45a)][_0x3510f7(0x1f0)]['id'][_0x3510f7(0x2a1)](/:\d+/,'')[_0x3510f7(0x2a1)](_0x3510f7(0x831),''),this[_0x3510f7(0x770)][_0x3510f7(0x51f)]=(await this[_0x3510f7(0x6c7)](this[_0x3510f7(0x770)]['wuid']+'@s.whatsapp.net'))[_0x3510f7(0x51f)],this[_0x3510f7(0x261)][_0x3510f7(0x210)][_0x3510f7(0x663)]({'online':!0x0,'owner':this[_0x3510f7(0x770)][_0x3510f7(0x808)],'lastDisconnect':null},this[_0x3510f7(0x770)][_0x3510f7(0x673)]);let _0xdb9255='Número:\x20'+this[_0x3510f7(0x770)][_0x3510f7(0x808)],_0x5f3c2c=0x28,_0x5e0e94=Math[_0x3510f7(0x43c)]((_0x5f3c2c-_0xdb9255[_0x3510f7(0x3a3)])/0x2),_0x574d35='\x20'[_0x3510f7(0x842)](_0x5e0e94),_0x595678=_0x3510f7(0x27d),_0x36745f=_0x3510f7(0x6d6)+this[_0x3510f7(0x770)][_0x3510f7(0x673)],_0x294e70=(''+_0x574d35+_0xdb9255+_0x574d35)['padEnd'](_0x5f3c2c,'\x20'),_0x34c0ff=(''+_0x574d35+_0x595678+_0x574d35)['padEnd'](_0x5f3c2c,'\x20'),_0x4dd62f=(''+_0x574d35+_0x36745f+_0x574d35)[_0x3510f7(0x5c8)](_0x5f3c2c,'\x20'),_0xf66efb=Math['max'](_0x294e70[_0x3510f7(0x3a3)],_0x34c0ff[_0x3510f7(0x3a3)],_0x4dd62f[_0x3510f7(0x3a3)]),_0x2e148f=_0x294e70[_0x3510f7(0x5c8)](_0xf66efb,'\x20'),_0x25a411=_0x34c0ff[_0x3510f7(0x5c8)](_0xf66efb,'\x20'),_0x3d6394=_0x4dd62f[_0x3510f7(0x5c8)](_0xf66efb,'\x20');this['logger'][_0x3510f7(0x5df)]((_0x3510f7(0x55e)+'─'[_0x3510f7(0x842)](_0xf66efb)+'┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0x25a411+_0x3510f7(0x363)+_0x3d6394+_0x3510f7(0x363)+_0x2e148f+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└'+'─'['repeat'](_0xf66efb)+'┘')[_0x3510f7(0x2a1)](/^ +/gm,'\x20\x20')),this['AutomateFunctions'](),this['instance']['ScheduleMessage'][_0x3510f7(0x85c)]=!0x0;}}[a0_0x34b2dc(0x445)](){const _0x287537=a0_0x34b2dc;this['reconnectAttempts']=0x0,this[_0x287537(0x2f9)]=[];}async[a0_0x34b2dc(0x3ea)](_0x1b6922,_0x2ab106=!0x1){const _0x251203=a0_0x34b2dc;try{let _0x1ec23b=await this['repository']['message'][_0x251203(0x253)]({'where':{'_id':_0x1b6922['id']}},this[_0x251203(0x770)]['wuid']);return _0x2ab106?_0x1ec23b[0x0]:_0x1ec23b[0x0][_0x251203(0x5ce)];}catch{return{'conversation':''};}}['cleanStore'](){const _0x49010c=a0_0x34b2dc;let _0x5eee9d=this[_0x49010c(0x269)][_0x49010c(0x30a)](_0x49010c(0x2e8)),_0x2ea5b0=this[_0x49010c(0x269)]['get'](_0x49010c(0x25e));_0x5eee9d?.[_0x49010c(0x4fa)]&&!_0x2ea5b0[_0x49010c(0x33c)]&&setInterval(()=>{const _0x3b626d=_0x49010c;try{for(let [_0x1c498e,_0x312042]of Object['entries'](_0x5eee9d))_0x312042===!0x0&&(0x0,Ue[_0x3b626d(0x20f)])(_0x3b626d(0x89a)+(0x0,j[_0x3b626d(0x3c9)])(this[_0x3b626d(0x8c2)],_0x1c498e[_0x3b626d(0x4a4)](),this[_0x3b626d(0x770)][_0x3b626d(0x808)])+_0x3b626d(0x4bb));}catch{}},(_0x5eee9d?.['CLEANING_INTERVAL']??0xe10)*0x3e8);}async['defineAuthState'](){const _0x339340=a0_0x34b2dc;let _0x333294=this['configService']['get']('DATABASE'),_0x319cc8=this[_0x339340(0x269)]['get'](_0x339340(0x781));return _0x319cc8?.[_0x339340(0x33c)]?await xs(_0x319cc8,this[_0x339340(0x770)][_0x339340(0x673)]):_0x333294[_0x339340(0x33c)]?await _s(this[_0x339340(0x770)][_0x339340(0x673)]):await(0x0,w['useMultiFileAuthState'])((0x0,j[_0x339340(0x3c9)])(Me,this['instance'][_0x339340(0x673)]));}async[a0_0x34b2dc(0x801)](){const _0x504f49=a0_0x34b2dc;let _0x513612=()=>Math[_0x504f49(0x43c)](Math[_0x504f49(0x2e7)]()*0x4e21)+0x7d0,_0x38fc4b=async()=>{const _0x244451=_0x504f49;if(!this[_0x244451(0x770)][_0x244451(0x846)]['isConnected']){this['logger'][_0x244451(0x798)](this['instanceName']+'\x20('+this['instance']['wuid']+'):Desconectado,\x20parando\x20execução.'),this[_0x244451(0x46a)]=!0x1;return;}if(this[_0x244451(0x770)][_0x244451(0x808)]&&this[_0x244451(0x3f7)]&&this['instance'][_0x244451(0x846)]['delayMessage']!==null&&this['instance'][_0x244451(0x846)]['delayMessage']!==void 0x0){let _0x53d14a=Math[_0x244451(0x501)](this[_0x244451(0x770)][_0x244451(0x846)][_0x244451(0x4ed)]/0xea60);this[_0x244451(0x3cb)][_0x244451(0x798)](this[_0x244451(0x402)]+'\x20('+this[_0x244451(0x770)]['wuid']+'):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20'+_0x53d14a+'\x20minutos\x20verificará\x20novas\x20mensagens'),this[_0x244451(0x46a)]=!0x1;return;}else this[_0x244451(0x770)][_0x244451(0x808)]&&(this['logger'][_0x244451(0x798)](this[_0x244451(0x402)]+'\x20('+this['instance']['wuid']+_0x244451(0x84f)),this[_0x244451(0x3f7)]||(await this[_0x244451(0x3fb)](),this[_0x244451(0x514)](),this[_0x244451(0x245)]()),(this[_0x244451(0x770)][_0x244451(0x846)][_0x244451(0x4ed)]===null||this[_0x244451(0x770)]['ScheduleMessage'][_0x244451(0x4ed)]===void 0x0)&&await this[_0x244451(0x8c4)]());if(this['isRunning']){let _0x23d48e=_0x513612();this[_0x244451(0x3cb)][_0x244451(0x798)](this['instanceName']+_0x244451(0x308)+_0x23d48e/0x3e8+_0x244451(0x8d3)),setTimeout(_0x38fc4b,_0x23d48e);}};if(this[_0x504f49(0x46a)])return;this[_0x504f49(0x46a)]=!0x0;let _0xa70d51=_0x513612();setTimeout(_0x38fc4b,_0xa70d51);}async[a0_0x34b2dc(0x245)](){const _0x204d7c=a0_0x34b2dc;let _0x188980=this[_0x204d7c(0x770)][_0x204d7c(0x808)];try{let _0x2dddea=await this[_0x204d7c(0x261)][_0x204d7c(0x35b)][_0x204d7c(0x3d9)]({'where':{'$or':[{'owner':_0x188980},{'whoCanUse':{'$in':[_0x188980]}},{'shareOwners':{'$in':[_0x188980]}}]}}),_0x4112f6=new Map(this[_0x204d7c(0x3f7)][_0x204d7c(0x4b9)]['map'](_0x19ea4b=>[_0x19ea4b[_0x204d7c(0x2c7)],_0x19ea4b])),_0x2450f9=_0x2dddea[_0x204d7c(0x790)](_0x4d7b0c=>{const _0x540e9a=_0x204d7c;let _0x1c86cf=_0x4112f6[_0x540e9a(0x30a)](_0x4d7b0c['_id']?.[_0x540e9a(0x1fe)]());return{'_id':_0x4d7b0c['_id']?.[_0x540e9a(0x1fe)](),'name':_0x1c86cf?.[_0x540e9a(0x673)]??_0x4d7b0c[_0x540e9a(0x673)],'default':_0x1c86cf?.['default']??_0x4d7b0c[_0x540e9a(0x62c)]??!0x1,'startCommand':_0x1c86cf?.['startCommand']??_0x4d7b0c[_0x540e9a(0x775)],'minutesToClose':_0x1c86cf?.[_0x540e9a(0x41b)]??_0x4d7b0c[_0x540e9a(0x41b)]??0xa,'readMessages':_0x1c86cf?.[_0x540e9a(0x84c)]??_0x4d7b0c[_0x540e9a(0x84c)]??!0x1,'testingWith':_0x1c86cf?.[_0x540e9a(0x679)]??_0x4d7b0c[_0x540e9a(0x679)],'canEdit':_0x4d7b0c[_0x540e9a(0x56c)]===_0x188980||(_0x4d7b0c[_0x540e9a(0x468)]??[])[_0x540e9a(0x4c4)](_0x188980),'usersCount':(_0x4d7b0c[_0x540e9a(0x8e8)]??[])[_0x540e9a(0x3a3)]??0x0};}),_0x52557b=!0x1;_0x2450f9['forEach'](_0x7aad93=>{const _0x1e481e=_0x204d7c;_0x7aad93['default']&&(_0x52557b?_0x7aad93[_0x1e481e(0x62c)]=!0x1:_0x52557b=!0x0);}),this[_0x204d7c(0x3f7)][_0x204d7c(0x4b9)]=_0x2450f9;let _0xebfd81={'flows':_0x2450f9};return await this[_0x204d7c(0x261)][_0x204d7c(0x484)][_0x204d7c(0x78f)](_0xebfd81,_0x188980),this['logger']['verbose'](this[_0x204d7c(0x402)]+'\x20('+_0x188980+_0x204d7c(0x2d6)),_0x2450f9[_0x204d7c(0x3a3)];}catch(_0x44119f){return this[_0x204d7c(0x3cb)][_0x204d7c(0x651)](this[_0x204d7c(0x402)]+'\x20('+_0x188980+_0x204d7c(0x3a9)+(_0x44119f instanceof Error?_0x44119f[_0x204d7c(0x5ce)]:JSON[_0x204d7c(0x43f)](_0x44119f,null,0x2))),{'message':'Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20'+(_0x44119f instanceof Error?_0x44119f[_0x204d7c(0x5ce)]:JSON[_0x204d7c(0x43f)](_0x44119f,null,0x2))};}}async['connectToWhatsapp'](_0x402f38){const _0x5b3d92=a0_0x34b2dc;try{let _0x4cc1f1=await this[_0x5b3d92(0x261)]['instance']['findOne']({'where':{'_id':K+'-'+this[_0x5b3d92(0x402)]}}),_0x5c4c2a,_0x35ab17=!re['ipv6Prefix']||!re[_0x5b3d92(0x8c8)];console[_0x5b3d92(0x476)](_0x5b3d92(0x4de)),console[_0x5b3d92(0x476)]('proxy:\x20',Oi),console[_0x5b3d92(0x476)](_0x5b3d92(0x7b7),this[_0x5b3d92(0x2ff)]),console[_0x5b3d92(0x476)](_0x5b3d92(0x4de)),Oi&&!_0x35ab17&&(this[_0x5b3d92(0x2ff)]<0x4||!this['reconnectAttempts']?_0x4cc1f1&&_0x4cc1f1['ip']?(_0x5c4c2a=_0x4cc1f1['ip'],console[_0x5b3d92(0x476)](_0x5b3d92(0x772)+_0x5c4c2a)):(_0x5c4c2a=await re[_0x5b3d92(0x540)](K,this['instance'][_0x5b3d92(0x673)]),_0x5c4c2a?(console[_0x5b3d92(0x476)](_0x5b3d92(0x593)+_0x5c4c2a),await(0x0,w[_0x5b3d92(0x6db)])(0x7d0)):console[_0x5b3d92(0x651)](_0x5b3d92(0x8fe))):this[_0x5b3d92(0x2ff)]<0x6&&(await re[_0x5b3d92(0x820)](K,this['instance'][_0x5b3d92(0x673)]),console[_0x5b3d92(0x476)](_0x5b3d92(0x70a)),_0x5c4c2a=await re[_0x5b3d92(0x540)](K,this[_0x5b3d92(0x770)][_0x5b3d92(0x673)]),_0x5c4c2a?(console['log'](_0x5b3d92(0x593)+_0x5c4c2a),await(0x0,w[_0x5b3d92(0x6db)])(0x7d0)):console[_0x5b3d92(0x651)](_0x5b3d92(0x2d5)))),this[_0x5b3d92(0x6de)](),this[_0x5b3d92(0x770)][_0x5b3d92(0x1e7)]=(await this[_0x5b3d92(0x261)][_0x5b3d92(0x210)]['find'](this[_0x5b3d92(0x770)][_0x5b3d92(0x673)]))[_0x5b3d92(0x1e7)],this[_0x5b3d92(0x770)]['authState']=await this[_0x5b3d92(0x6aa)]();let {version:_0x891884}=await(0x0,w['fetchLatestBaileysVersion'])(),_0x3a96c1=[ki,Us,(0x0,ks[_0x5b3d92(0x309)])()],_0x13a2fa={'localAddress':_0x5c4c2a,'auth':{'creds':this[_0x5b3d92(0x770)][_0x5b3d92(0x6c4)][_0x5b3d92(0x645)][_0x5b3d92(0x818)],'keys':(0x0,w[_0x5b3d92(0x5c5)])(this[_0x5b3d92(0x770)][_0x5b3d92(0x6c4)][_0x5b3d92(0x645)][_0x5b3d92(0x37c)],(0x0,qt['default'])({'level':_0x5b3d92(0x651)}))},'logger':(0x0,qt[_0x5b3d92(0x62c)])({'level':'error'}),'printQRInTerminal':!0x1,'browser':_0x402f38?[_0x5b3d92(0x340),Us,(0x0,ks[_0x5b3d92(0x309)])()]:_0x3a96c1,'version':_0x891884,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x2dc3f8=>{const _0x191c26=_0x5b3d92;let _0x223b94=this[_0x191c26(0x710)]?.['groups_ignore']&&(0x0,w['isJidGroup'])(_0x2dc3f8);return(0x0,w['isJidBroadcast'])(_0x2dc3f8)||_0x223b94;},'msgRetryCounterCache':this[_0x5b3d92(0x721)],'getMessage':async _0x223bff=>await this[_0x5b3d92(0x3ea)](_0x223bff),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x5b3d92(0x5ee)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x192b79){const _0x4acb69=_0x5b3d92;return _0x192b79[_0x4acb69(0x6cf)]?.['message']?.['listMessage']?.[_0x4acb69(0x22c)]===w['proto'][_0x4acb69(0x659)][_0x4acb69(0x577)][_0x4acb69(0x84e)]['PRODUCT_LIST']&&(_0x192b79=JSON[_0x4acb69(0x232)](JSON[_0x4acb69(0x43f)](_0x192b79)),_0x192b79[_0x4acb69(0x6cf)][_0x4acb69(0x5ce)][_0x4acb69(0x680)][_0x4acb69(0x22c)]=w[_0x4acb69(0x6d3)][_0x4acb69(0x659)][_0x4acb69(0x577)][_0x4acb69(0x84e)][_0x4acb69(0x257)]),_0x192b79[_0x4acb69(0x680)]?.[_0x4acb69(0x22c)]==w['proto'][_0x4acb69(0x659)][_0x4acb69(0x577)][_0x4acb69(0x84e)]['PRODUCT_LIST']&&(_0x192b79=JSON[_0x4acb69(0x232)](JSON['stringify'](_0x192b79)),_0x192b79[_0x4acb69(0x680)][_0x4acb69(0x22c)]=w[_0x4acb69(0x6d3)][_0x4acb69(0x659)][_0x4acb69(0x577)][_0x4acb69(0x84e)][_0x4acb69(0x257)]),_0x192b79;}};return this[_0x5b3d92(0x2ea)]=!0x1,this[_0x5b3d92(0x45a)]=(0x0,w[_0x5b3d92(0x62c)])(_0x13a2fa),this[_0x5b3d92(0x76f)](),this[_0x5b3d92(0x5bf)]=_0x402f38,this['client'];}catch(_0xe6b94d){let _0x402d4a=_0x5b3d92(0x50b),_0x5828e1=_0xe6b94d instanceof Error?_0xe6b94d[_0x5b3d92(0x5ce)]:typeof _0xe6b94d=='object'?JSON[_0x5b3d92(0x43f)](_0xe6b94d):_0xe6b94d,_0x58b48a=_0x402d4a+':\x20'+_0x5828e1;throw this['logger'][_0x5b3d92(0x651)](this['instanceName']+'\x20('+this[_0x5b3d92(0x770)]['wuid']+'):\x20'+_0x58b48a),console[_0x5b3d92(0x651)](_0x5b3d92(0x295),_0xe6b94d),_0xe6b94d instanceof Error&&console[_0x5b3d92(0x651)](_0x5b3d92(0x88a),_0xe6b94d[_0x5b3d92(0x53a)]),new x(_0x58b48a);}}[a0_0x34b2dc(0x76f)](){const _0x317284=a0_0x34b2dc;this[_0x317284(0x45a)]['ev'][_0x317284(0x819)](_0x10fd4d=>{const _0x1e6e78=_0x317284;if(!this[_0x1e6e78(0x2ea)]){let _0x45862b=this[_0x1e6e78(0x269)]['get']('DATABASE');if(_0x10fd4d[_0x1e6e78(0x8da)]){let _0xfe7752=_0x10fd4d[_0x1e6e78(0x8da)];this['messageHandle'][_0x1e6e78(0x8da)](_0xfe7752);}if(_0x10fd4d['labels.association']){let _0x3cc87f=_0x10fd4d[_0x1e6e78(0x40a)];this['messageHandle'][_0x1e6e78(0x40a)](_0x3cc87f);}if(_0x10fd4d[_0x1e6e78(0x3df)]&&this['connectionUpdate'](_0x10fd4d[_0x1e6e78(0x3df)]),_0x10fd4d['creds.update']&&this[_0x1e6e78(0x770)][_0x1e6e78(0x6c4)]['saveCreds'](),_0x10fd4d['messaging-history.set']){let _0x262aff=_0x10fd4d['messaging-history.set'];this[_0x1e6e78(0x5d3)][_0x1e6e78(0x6e6)](_0x262aff,_0x45862b);}if(_0x10fd4d[_0x1e6e78(0x31f)]){let _0x2d7655=_0x10fd4d['messages.upsert'];this['messageHandle'][_0x1e6e78(0x31f)](_0x2d7655,_0x45862b);}if(_0x10fd4d['messages.update']){let _0x4f3ebe=_0x10fd4d['messages.update'];this[_0x1e6e78(0x5d3)][_0x1e6e78(0x3ae)](_0x4f3ebe,_0x45862b);}if(_0x10fd4d[_0x1e6e78(0x2eb)]){let _0x106bad=_0x10fd4d['presence.update'];if(this['localWebhook']?.['groups_ignore']&&_0x106bad['id']['includes'](_0x1e6e78(0x59c)))return;this[_0x1e6e78(0x687)](_0x1e6e78(0x2eb),_0x106bad);}if(_0x10fd4d['groups.upsert']){let _0x288bbf=_0x10fd4d[_0x1e6e78(0x8aa)];this['groupHandler'][_0x1e6e78(0x8aa)](_0x288bbf);}if(_0x10fd4d[_0x1e6e78(0x6fc)]){let _0x64e2a4=_0x10fd4d[_0x1e6e78(0x6fc)];this[_0x1e6e78(0x25b)][_0x1e6e78(0x6fc)](_0x64e2a4);}if(_0x10fd4d[_0x1e6e78(0x45d)]){let _0x12d7d5=_0x10fd4d[_0x1e6e78(0x45d)];this[_0x1e6e78(0x25b)][_0x1e6e78(0x45d)](_0x12d7d5);}if(_0x10fd4d[_0x1e6e78(0x296)]){let _0x85fbf3=_0x10fd4d[_0x1e6e78(0x296)];this[_0x1e6e78(0x728)][_0x1e6e78(0x296)](_0x85fbf3,_0x45862b);}if(_0x10fd4d[_0x1e6e78(0x656)]){let _0x3bda33=_0x10fd4d[_0x1e6e78(0x656)];this[_0x1e6e78(0x728)]['chats.update'](_0x3bda33,_0x45862b);}if(_0x10fd4d[_0x1e6e78(0x406)]){let _0x4fee1f=_0x10fd4d[_0x1e6e78(0x406)];this[_0x1e6e78(0x728)]['chats.delete'](_0x4fee1f);}if(_0x10fd4d['contacts.upsert']){let _0x14eb6d=_0x10fd4d[_0x1e6e78(0x60a)];this[_0x1e6e78(0x2da)]['contacts.upsert'](_0x14eb6d,_0x45862b);}if(_0x10fd4d[_0x1e6e78(0x1ef)]){let _0x3c322b=_0x10fd4d[_0x1e6e78(0x1ef)];this[_0x1e6e78(0x2da)][_0x1e6e78(0x1ef)](_0x3c322b,_0x45862b);}}});}async[a0_0x34b2dc(0x7e8)](_0x49e857,_0x507e84){const _0x5b38cf=a0_0x34b2dc;if(_0x507e84>=0xa){console[_0x5b38cf(0x651)](this['instanceName']+'\x20('+this[_0x5b38cf(0x770)]['wuid']+_0x5b38cf(0x364)),delete Jt[_0x49e857[_0x5b38cf(0x85f)]['id']];return;}try{console['error'](this[_0x5b38cf(0x402)]+'\x20('+this[_0x5b38cf(0x770)][_0x5b38cf(0x808)]+_0x5b38cf(0x8f8)+(_0x507e84+0x1)),await this[_0x5b38cf(0x45a)]['sendMessageAck'](JSON['parse'](_0x49e857['messageStubParameters'][0x1],w[_0x5b38cf(0x600)][_0x5b38cf(0x2e9)])),console[_0x5b38cf(0x651)](_0x5b38cf(0x80d));}catch(_0x196849){console[_0x5b38cf(0x651)](this[_0x5b38cf(0x402)]+'\x20('+this[_0x5b38cf(0x770)]['wuid']+'):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20'+_0x196849),setTimeout(()=>this[_0x5b38cf(0x7e8)](_0x49e857,_0x507e84+0x1),Math[_0x5b38cf(0x70e)](0x2,_0x507e84)*0x3e8);}}[a0_0x34b2dc(0x4e0)](_0x58d5a8){return new Promise(_0x582db4=>setTimeout(_0x582db4,_0x58d5a8));}[a0_0x34b2dc(0x8f2)](_0x2af680){const _0x5a9384=a0_0x34b2dc;_0x2af680=_0x2af680[_0x5a9384(0x2a1)](/\D/g,'');let _0x1a3b74=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)['exec'](_0x2af680);if(_0x1a3b74&&_0x1a3b74[0x1]==='55'){let _0x464e0b=_0x1a3b74[0x2],_0xd7a8c8=_0x1a3b74[0x3],_0x405bd9=_0x1a3b74[0x4];if(parseInt(_0x464e0b)>=0x1f&&_0xd7a8c8==='9')return _0x1a3b74[0x1]+_0x464e0b+_0x405bd9;}return _0x2af680;}['createJid'](_0x48bb48){const _0x241c35=a0_0x34b2dc;return _0x48bb48[_0x241c35(0x4c4)]('@g.us')||_0x48bb48[_0x241c35(0x4c4)]('@s.whatsapp.net')||_0x48bb48[_0x241c35(0x4c4)](_0x241c35(0x703))?_0x48bb48:(_0x48bb48=_0x48bb48?.[_0x241c35(0x2a1)](/\s/g,'')['replace'](/\+/g,'')[_0x241c35(0x2a1)](/\(/g,'')[_0x241c35(0x2a1)](/\)/g,'')[_0x241c35(0x292)](/\:/)[0x0][_0x241c35(0x292)]('@')[0x0],_0x48bb48[_0x241c35(0x3a3)]>=0x12?(_0x48bb48=_0x48bb48[_0x241c35(0x2a1)](/[^\d-]/g,''),_0x48bb48+_0x241c35(0x59c)):(_0x48bb48=_0x48bb48[_0x241c35(0x2a1)](/\D/g,''),_0x48bb48+_0x241c35(0x831)));}async['updatePresence'](_0x2a7024){const _0x2a2b13=a0_0x34b2dc;let _0x5b2c83=(await this['whatsappNumber']({'numbers':[_0x2a7024[_0x2a2b13(0x51e)]]}))[0x0];if(!_0x5b2c83['exists']&&!(0x0,w[_0x2a2b13(0x6bd)])(_0x5b2c83[_0x2a2b13(0x5f0)])&&!_0x5b2c83['jid'][_0x2a2b13(0x4c4)](_0x2a2b13(0x703)))throw new m(_0x5b2c83);let _0x3cbc4f=_0x5b2c83['jid'];try{return await this[_0x2a2b13(0x45a)][_0x2a2b13(0x915)](_0x3cbc4f),await this[_0x2a2b13(0x45a)][_0x2a2b13(0x3bf)](_0x2a7024['presence'],_0x3cbc4f),{'status':0xc8,'presence':_0x2a7024[_0x2a2b13(0x3d8)]};}catch(_0x3588e2){let _0x2b536e='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence',_0x48a0ee=_0x3588e2 instanceof Error?_0x3588e2[_0x2a2b13(0x5ce)]:typeof _0x3588e2=='object'?JSON[_0x2a2b13(0x43f)](_0x3588e2):_0x3588e2,_0x4b1503=_0x2b536e+':\x20'+_0x48a0ee;throw this[_0x2a2b13(0x3cb)][_0x2a2b13(0x651)](this[_0x2a2b13(0x402)]+'\x20('+this['instance'][_0x2a2b13(0x808)]+_0x2a2b13(0x4b7)+_0x4b1503),new m(_0x4b1503);}}async[a0_0x34b2dc(0x86c)](_0x176669,_0x6fbb12,_0x25af20,_0x344cab=!0x0){const _0xe1ea68=a0_0x34b2dc;let _0x5cfb76=await this[_0xe1ea68(0x261)][_0xe1ea68(0x6e1)]['findOne']({'where':{'_id':_0x176669}});if(!_0x5cfb76&&!_0x344cab)return;let _0x40c3fd={'lastUpdate':Date[_0xe1ea68(0x880)]()};if(_0x25af20||!_0x5cfb76?.[_0xe1ea68(0x5d5)]||Date['now']()-_0x5cfb76[_0xe1ea68(0x5d5)]>0x18*0x3c*0x3c*0x3e8)try{let _0x5e3aad=(await this[_0xe1ea68(0x6c7)](_0x176669))[_0xe1ea68(0x51f)];_0x40c3fd[_0xe1ea68(0x209)]=_0x5e3aad;}catch(_0x5e1b13){let _0x2f976a=_0xe1ea68(0x5eb),_0x7619b6=_0x5e1b13 instanceof Error?_0x5e1b13['message']:typeof _0x5e1b13==_0xe1ea68(0x89b)?JSON[_0xe1ea68(0x43f)](_0x5e1b13):_0x5e1b13,_0xfc9ca6=_0x2f976a+':\x20'+_0x7619b6;throw this[_0xe1ea68(0x3cb)][_0xe1ea68(0x651)](this['instanceName']+'\x20('+this[_0xe1ea68(0x770)][_0xe1ea68(0x808)]+_0xe1ea68(0x4b7)+_0xfc9ca6),new m(_0xfc9ca6);}return _0x6fbb12&&_0x5cfb76?.[_0xe1ea68(0x673)]!==_0x6fbb12&&(_0x40c3fd[_0xe1ea68(0x673)]=_0x6fbb12),Object[_0xe1ea68(0x37c)](_0x40c3fd)[_0xe1ea68(0x3a3)]>0x1&&(_0x5cfb76?await this[_0xe1ea68(0x261)]['cacheContact'][_0xe1ea68(0x78f)]({'where':{'_id':_0x176669}},_0x40c3fd):await this[_0xe1ea68(0x261)][_0xe1ea68(0x6e1)][_0xe1ea68(0x6c0)]([{'_id':_0x176669,..._0x40c3fd}]),_0x5cfb76={..._0x5cfb76,..._0x40c3fd}),{'cachedContact':_0x5cfb76};}async[a0_0x34b2dc(0x6c7)](_0x4847e9){const _0x5c076c=a0_0x34b2dc;let _0x27a3b4=this[_0x5c076c(0x6ea)](_0x4847e9);try{return{'wuid':_0x27a3b4,'profilePictureUrl':await this[_0x5c076c(0x45a)][_0x5c076c(0x51f)](_0x27a3b4,_0x5c076c(0x539))};}catch{return{'wuid':_0x27a3b4,'profilePictureUrl':null};}}async[a0_0x34b2dc(0x7a0)](_0x4b9fde,_0x5467c2,_0x30524f){const _0x4428ea=a0_0x34b2dc;let _0x496908;try{let _0x742235=(await this[_0x4428ea(0x70c)]({'numbers':[_0x4b9fde]}))?.['shift']();if(!_0x742235['exists']&&!(0x0,w[_0x4428ea(0x6bd)])(_0x742235['jid'])&&!_0x742235[_0x4428ea(0x5f0)]['includes'](_0x4428ea(0x703)))throw new m(_0x742235);_0x496908=_0x742235[_0x4428ea(0x5f0)];}catch(_0x5ee7d8){_0x496908=_0x4b9fde,this['logger']['warn'](this[_0x4428ea(0x402)]+'\x20('+this[_0x4428ea(0x770)][_0x4428ea(0x808)]+_0x4428ea(0x82d)+_0x5ee7d8[_0x4428ea(0x5ce)]),this[_0x4428ea(0x3cb)][_0x4428ea(0x41f)](this['instanceName']+'\x20('+this[_0x4428ea(0x770)][_0x4428ea(0x808)]+_0x4428ea(0x7cd)+_0x496908);}try{if(_0x496908||(_0x496908=_0x4b9fde,this['logger']['warn'](this[_0x4428ea(0x402)]+'\x20('+this[_0x4428ea(0x770)][_0x4428ea(0x808)]+_0x4428ea(0x609)+_0x496908)),_0x30524f||(_0x30524f={}),_0x30524f?.[_0x4428ea(0x6db)]){await this[_0x4428ea(0x45a)]['presenceSubscribe'](_0x496908),await this[_0x4428ea(0x45a)][_0x4428ea(0x3bf)](_0x30524f?.['presence']??_0x4428ea(0x1ed),_0x496908);let _0x470bc2=Math['min'](_0x30524f[_0x4428ea(0x6db)],0x2710);await(0x0,w['delay'])(_0x470bc2),await this[_0x4428ea(0x45a)][_0x4428ea(0x3bf)]('paused',_0x496908);}let _0x2f3068=_0x30524f?.[_0x4428ea(0x646)]!=!0x1?void 0x0:!0x1,_0xdcb8d2;if(_0x30524f?.[_0x4428ea(0x735)]){let _0x2d1ade=_0x30524f?.[_0x4428ea(0x735)],_0x5adb02=_0x2d1ade?.['message']?_0x2d1ade:await this[_0x4428ea(0x3ea)](_0x2d1ade[_0x4428ea(0x85f)],!0x0);_0x5adb02&&(_0xdcb8d2=_0x5adb02);}let _0x348f31,_0x56b773=null;if((0x0,w['isJidGroup'])(_0x496908))try{if(_0x56b773=await this['getGroupMetadataCache'](_0x496908),!_0x56b773)throw new J(_0x4428ea(0x268));_0x30524f?.['mentions']&&(_0x30524f[_0x4428ea(0x27e)]?.[_0x4428ea(0x319)]?_0x348f31=_0x56b773['participants'][_0x4428ea(0x790)](_0x375f84=>_0x375f84['id']):_0x30524f['mentions']?.['mentioned']?.[_0x4428ea(0x3a3)]&&(_0x348f31=_0x30524f[_0x4428ea(0x27e)][_0x4428ea(0x666)]['map'](_0x5b2c54=>{const _0x2a269c=_0x4428ea;let _0x526914=this[_0x2a269c(0x6ea)](_0x5b2c54);return(0x0,w['isJidGroup'])(_0x526914)?null:_0x526914;})));}catch{throw new J('Group\x20not\x20found');}let _0x18e908=await this['repository'][_0x4428ea(0x89d)]['findOne']({'where':{'_id':_0x496908}},this['instance']['wuid']),_0x244216=await((async()=>{const _0xbfc496=_0x4428ea;let _0x463934={'quoted':_0xdcb8d2,'ephemeralExpiration':_0x18e908?.['ephemeralExpiration']??0x0,'useCachedGroupMetadata':!0x0};if(!_0x5467c2[_0xbfc496(0x389)]&&!_0x5467c2[_0xbfc496(0x787)]&&!_0x5467c2['sticker']&&!_0x5467c2[_0xbfc496(0x212)]&&_0x496908!=='status@broadcast'&&_0x5467c2[_0xbfc496(0x617)])return await this[_0xbfc496(0x45a)]['sendMessage'](_0x496908,{'react':{'text':_0x5467c2[_0xbfc496(0x617)]['text'],'key':_0x5467c2[_0xbfc496(0x617)][_0xbfc496(0x85f)]}},_0x463934);if(_0x5467c2[_0xbfc496(0x212)]){let _0x395127=_0x5467c2[_0xbfc496(0x212)];return _0x30524f?.[_0xbfc496(0x3a5)]&&(_0x395127=await this[_0xbfc496(0x3c8)](_0x395127,_0x496908)),await this[_0xbfc496(0x45a)][_0xbfc496(0x90e)](_0x496908,{'text':_0x395127,'mentions':_0x348f31,'linkPreview':_0x2f3068},_0x463934);}return!_0x5467c2[_0xbfc496(0x389)]&&!_0x5467c2['poll']&&_0x496908!=_0xbfc496(0x779)?await this['client'][_0xbfc496(0x90e)](_0x496908,{'forward':{'key':{'remoteJid':this[_0xbfc496(0x770)]['wuid'],'fromMe':!0x0},'message':_0x5467c2},'mentions':_0x348f31},_0x463934):_0x496908===_0xbfc496(0x779)?await this[_0xbfc496(0x45a)][_0xbfc496(0x90e)](_0x496908,_0x5467c2[_0xbfc496(0x71c)][_0xbfc496(0x74e)],{'backgroundColor':_0x5467c2[_0xbfc496(0x71c)][_0xbfc496(0x6e0)][_0xbfc496(0x7b4)],'font':_0x5467c2['status']['option'][_0xbfc496(0x362)],'statusJidList':_0x5467c2[_0xbfc496(0x71c)]['option']['statusJidList']}):await this[_0xbfc496(0x45a)]['sendMessage'](_0x496908,_0x5467c2,_0x463934);})()),_0x573f15=(0x0,w[_0x4428ea(0x5e9)])(_0x244216[_0x4428ea(0x5ce)]),_0x2c7d0b=(0x0,w[_0x4428ea(0x62f)])(_0x573f15),{message_normalized:_0x2ad7ab}=this[_0x4428ea(0x65e)](_0x573f15,_0x2c7d0b,null),_0x402b2e={'_id':_0x244216['key']['id'],'key':_0x244216[_0x4428ea(0x85f)],'pushName':_0x244216[_0x4428ea(0x414)],'isGroup':_0x244216[_0x4428ea(0x85f)][_0x4428ea(0x668)][_0x4428ea(0x5b1)](_0x4428ea(0x59c)),'profilePictureUrl':this['instance'][_0x4428ea(0x51f)],'message':_0x573f15,'messageType':_0x2c7d0b,'message_normalized':{'key':_0x244216[_0x4428ea(0x85f)],'pushName':_0x244216[_0x4428ea(0x414)],'messageTimestamp':_0x244216[_0x4428ea(0x912)]&&_0x244216[_0x4428ea(0x912)][_0x4428ea(0x1fe)]()[_0x4428ea(0x3a3)]<0xd?_0x244216[_0x4428ea(0x912)]*0x3e8:_0x244216[_0x4428ea(0x912)]||null,'source':(0x0,w[_0x4428ea(0x553)])(_0x244216[_0x4428ea(0x85f)]['id']),..._0x2ad7ab},'messageTimestamp':_0x244216['messageTimestamp']&&_0x244216[_0x4428ea(0x912)][_0x4428ea(0x1fe)]()[_0x4428ea(0x3a3)]<0xd?_0x244216[_0x4428ea(0x912)]*0x3e8:_0x244216['messageTimestamp']||null,'owner':this[_0x4428ea(0x770)][_0x4428ea(0x808)],'source':(0x0,w[_0x4428ea(0x553)])(_0x244216[_0x4428ea(0x85f)]['id'])};return this[_0x4428ea(0x3cb)]['warn'](this[_0x4428ea(0x402)]+'\x20('+this[_0x4428ea(0x770)][_0x4428ea(0x808)]+_0x4428ea(0x4fb)+_0x402b2e[_0x4428ea(0x85f)]?.[_0x4428ea(0x668)][_0x4428ea(0x2a1)]('@s.whatsapp.net','')+']\x20('+_0x402b2e[_0x4428ea(0x32e)]+')'),_0x402b2e['message_normalized']?.['text']&&this['logger'][_0x4428ea(0x41f)](_0x402b2e[_0x4428ea(0x3b7)]?.[_0x4428ea(0x6b6)]),this[_0x4428ea(0x687)]('send.message',_0x402b2e),q(this['instanceName'],'messages',{'message':_0x402b2e}),this[_0x4428ea(0x4ad)](this[_0x4428ea(0x269)][_0x4428ea(0x30a)](_0x4428ea(0x25e)),_0x402b2e,'SEND_MESSAGE',_0x18e908),await this[_0x4428ea(0x261)][_0x4428ea(0x5ce)][_0x4428ea(0x6c0)]([_0x402b2e],this['instance'][_0x4428ea(0x808)]),_0x244216;}catch(_0x44a4b6){let _0x2c2ee1=_0x4428ea(0x1fd)+_0x496908,_0x9bbb82=_0x44a4b6 instanceof Error?_0x44a4b6[_0x4428ea(0x5ce)]:typeof _0x44a4b6==_0x4428ea(0x89b)?JSON['stringify'](_0x44a4b6):_0x44a4b6,_0x4ab633=_0x2c2ee1+':\x20'+_0x9bbb82;throw this[_0x4428ea(0x3cb)]['error'](this['instanceName']+'\x20('+this[_0x4428ea(0x770)][_0x4428ea(0x808)]+_0x4428ea(0x4b7)+_0x4ab633),new m(_0x4ab633);}}async[a0_0x34b2dc(0x6f8)](_0x2b977e){const _0x442b62=a0_0x34b2dc;try{let _0x23ffa9=await this[_0x442b62(0x261)]['chat'][_0x442b62(0x440)]({'where':{'_id':_0x2b977e}},this[_0x442b62(0x770)][_0x442b62(0x808)]);return _0x23ffa9?_0x23ffa9[_0x442b62(0x7a6)]:null;}catch(_0x36719d){return this[_0x442b62(0x3cb)][_0x442b62(0x651)](_0x442b62(0x3cd)+_0x2b977e+':\x20'+_0x36719d['message']),null;}}get[a0_0x34b2dc(0x38c)](){const _0x196216=a0_0x34b2dc;return this[_0x196216(0x87d)];}async[a0_0x34b2dc(0x876)](_0x451b02){const _0x5c5385=a0_0x34b2dc;return await this[_0x5c5385(0x7a0)](_0x451b02[_0x5c5385(0x51e)],{'conversation':_0x451b02[_0x5c5385(0x876)][_0x5c5385(0x6b6)]},_0x451b02?.[_0x5c5385(0x812)]);}async[a0_0x34b2dc(0x421)](_0x2da2cd){const _0x2213df=a0_0x34b2dc;if(!_0x2da2cd[_0x2213df(0x248)])throw new m(_0x2213df(0x467));if(!_0x2da2cd['content'])throw new m('Content\x20is\x20required');if(_0x2da2cd[_0x2213df(0x8ce)]){let _0x23e9d5=await this['repository'][_0x2213df(0x5ad)][_0x2213df(0x253)]({'where':{}},this[_0x2213df(0x770)][_0x2213df(0x808)]);if(!_0x23e9d5[_0x2213df(0x3a3)])throw new m('Contacts\x20not\x20found');_0x2da2cd[_0x2213df(0x7c0)]=_0x23e9d5['filter'](_0x151f4e=>_0x151f4e[_0x2213df(0x414)])[_0x2213df(0x790)](_0x1b73b5=>_0x1b73b5[_0x2213df(0x2c7)]);}if(!_0x2da2cd[_0x2213df(0x7c0)]?.[_0x2213df(0x3a3)]&&!_0x2da2cd['allContacts'])throw new m(_0x2213df(0x5a0));if(_0x2da2cd[_0x2213df(0x248)]===_0x2213df(0x6b6)){if(!_0x2da2cd[_0x2213df(0x7b4)])throw new m(_0x2213df(0x29a));if(!_0x2da2cd['font'])throw new m(_0x2213df(0x63a));return{'content':{'text':_0x2da2cd[_0x2213df(0x74e)]},'option':{'backgroundColor':_0x2da2cd[_0x2213df(0x7b4)],'font':_0x2da2cd[_0x2213df(0x362)],'statusJidList':_0x2da2cd['statusJidList']}};}if(_0x2da2cd[_0x2213df(0x248)]===_0x2213df(0x539))return{'content':{'image':{'url':_0x2da2cd[_0x2213df(0x74e)]},'caption':_0x2da2cd[_0x2213df(0x39d)]},'option':{'statusJidList':_0x2da2cd[_0x2213df(0x7c0)]}};if(_0x2da2cd[_0x2213df(0x248)]===_0x2213df(0x555))return{'content':{'video':{'url':_0x2da2cd['content']},'caption':_0x2da2cd['caption']},'option':{'statusJidList':_0x2da2cd[_0x2213df(0x7c0)]}};if(_0x2da2cd['type']===_0x2213df(0x389)){this[_0x2213df(0x3cb)][_0x2213df(0x798)](this[_0x2213df(0x402)]+'\x20('+this[_0x2213df(0x770)][_0x2213df(0x808)]+_0x2213df(0x8a2)),this['logger'][_0x2213df(0x798)](this[_0x2213df(0x402)]+'\x20('+this[_0x2213df(0x770)]['wuid']+_0x2213df(0x341));let _0x5bf467=await this[_0x2213df(0x4b5)](_0x2da2cd[_0x2213df(0x74e)]);if(typeof _0x5bf467=='string'){this['logger'][_0x2213df(0x798)](this['instanceName']+'\x20('+this['instance'][_0x2213df(0x808)]+_0x2213df(0x8a5));let _0x5b5d5f=F['readFileSync'](_0x5bf467)[_0x2213df(0x1fe)](_0x2213df(0x616));return{'content':{'audio':Buffer[_0x2213df(0x77b)](_0x5b5d5f,'base64'),'ptt':!0x0,'mimetype':_0x2213df(0x396)},'option':{'statusJidList':_0x2da2cd['statusJidList']}};}else throw new x(_0x5bf467);}throw new m(_0x2213df(0x748));}async[a0_0x34b2dc(0x6fd)](_0x18370d){const _0x316186=a0_0x34b2dc;return await this['sendMessageWithTyping'](_0x316186(0x779),{'status':await this[_0x316186(0x421)](_0x18370d['statusMessage'])});}async[a0_0x34b2dc(0x778)](_0x4c905d){const _0x36d7a5=a0_0x34b2dc;try{let _0x2b580c=await(0x0,w[_0x36d7a5(0x43d)])({[_0x4c905d[_0x36d7a5(0x70d)]]:(0x0,L[_0x36d7a5(0x525)])(_0x4c905d['media'])?{'url':_0x4c905d[_0x36d7a5(0x4c8)]}:Buffer[_0x36d7a5(0x77b)](_0x4c905d[_0x36d7a5(0x4c8)],_0x36d7a5(0x616))},{'upload':this[_0x36d7a5(0x45a)]['waUploadToServer']}),_0x320686=_0x4c905d[_0x36d7a5(0x70d)]+_0x36d7a5(0x659);if(_0x4c905d['mediatype']===_0x36d7a5(0x6b4)&&!_0x4c905d['fileName']){let _0x4a44df=new RegExp(/.*\/(.+?)\./)[_0x36d7a5(0x454)](_0x4c905d['media']);_0x4c905d['fileName']=_0x4a44df?_0x4a44df[0x1]:null;}let _0x22ef13;return(0x0,L['isURL'])(_0x4c905d[_0x36d7a5(0x4c8)])?_0x22ef13=(await te['default'][_0x36d7a5(0x30a)](_0x4c905d[_0x36d7a5(0x4c8)],{'responseType':_0x36d7a5(0x78c)}))[_0x36d7a5(0x310)][_0x36d7a5(0x528)]:_0x22ef13=(0x0,Pi[_0x36d7a5(0x54c)])(_0x4c905d[_0x36d7a5(0x685)]),_0x2b580c[_0x320686][_0x36d7a5(0x39d)]=_0x4c905d?.[_0x36d7a5(0x39d)],_0x2b580c[_0x320686][_0x36d7a5(0x8ac)]=_0x22ef13,_0x2b580c[_0x320686][_0x36d7a5(0x685)]=_0x4c905d[_0x36d7a5(0x685)],_0x4c905d[_0x36d7a5(0x70d)]===_0x36d7a5(0x555)&&(_0x2b580c[_0x320686]['jpegThumbnail']=Uint8Array[_0x36d7a5(0x77b)]((0x0,Fe[_0x36d7a5(0x4a2)])((0x0,j['join'])(process[_0x36d7a5(0x86a)](),_0x36d7a5(0x201)))),_0x2b580c[_0x320686][_0x36d7a5(0x4e3)]=!0x1),(0x0,w[_0x36d7a5(0x786)])('',{[_0x320686]:{..._0x2b580c[_0x320686]}},{'userJid':this[_0x36d7a5(0x770)][_0x36d7a5(0x808)]});}catch(_0x9b9e92){let _0x5a7839='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage',_0x1da7c3=_0x9b9e92 instanceof Error?_0x9b9e92[_0x36d7a5(0x5ce)]:typeof _0x9b9e92==_0x36d7a5(0x89b)?JSON[_0x36d7a5(0x43f)](_0x9b9e92):_0x9b9e92,_0x2c728a=_0x5a7839+':\x20'+_0x1da7c3;throw this[_0x36d7a5(0x3cb)][_0x36d7a5(0x651)](this['instanceName']+'\x20('+this[_0x36d7a5(0x770)][_0x36d7a5(0x808)]+'):\x20'+_0x2c728a),new x(_0x2c728a);}}async['mediaMessage'](_0x3416c0){const _0x20af77=a0_0x34b2dc;let _0x5e3b71=await this[_0x20af77(0x778)](_0x3416c0[_0x20af77(0x80a)]);return await this[_0x20af77(0x7a0)](_0x3416c0[_0x20af77(0x51e)],{..._0x5e3b71[_0x20af77(0x5ce)]},_0x3416c0?.[_0x20af77(0x812)]);}async['convertToWebP'](_0x48f40d,_0xe8189e){const _0x51cb82=a0_0x34b2dc;try{this[_0x51cb82(0x3cb)][_0x51cb82(0x798)](this[_0x51cb82(0x402)]+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+_0x51cb82(0x448));let _0x21eff7,_0x4c6252=_0xe8189e+'-'+new Date()['getTime']();this[_0x51cb82(0x3cb)][_0x51cb82(0x798)](this[_0x51cb82(0x402)]+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+'):Hash\x20to\x20image\x20name:\x20'+_0x4c6252);let _0x5e26aa=''+(0x0,j[_0x51cb82(0x3c9)])(this['storePath'],_0x4c6252+'.webp');if(this[_0x51cb82(0x3cb)][_0x51cb82(0x798)](this['instanceName']+'\x20('+this['instance'][_0x51cb82(0x808)]+'):Output\x20path:\x20'+_0x5e26aa),(0x0,L['isBase64'])(_0x48f40d)){this[_0x51cb82(0x3cb)][_0x51cb82(0x798)](this['instanceName']+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+_0x51cb82(0x705));let _0x217f35=_0x48f40d[_0x51cb82(0x2a1)](/^data:image\/(jpeg|png|gif);base64,/,''),_0xf166d8=Buffer[_0x51cb82(0x77b)](_0x217f35,_0x51cb82(0x616));_0x21eff7=''+(0x0,j[_0x51cb82(0x3c9)])(this[_0x51cb82(0x8c2)],'temp-'+_0x4c6252+_0x51cb82(0x7a5)),this[_0x51cb82(0x3cb)][_0x51cb82(0x798)](this[_0x51cb82(0x402)]+'\x20('+this[_0x51cb82(0x770)]['wuid']+_0x51cb82(0x665)+_0x21eff7),await(0x0,Vt['default'])(_0xf166d8)[_0x51cb82(0x1ee)](_0x21eff7),this[_0x51cb82(0x3cb)][_0x51cb82(0x798)](this[_0x51cb82(0x402)]+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+_0x51cb82(0x8ff));}else{this[_0x51cb82(0x3cb)][_0x51cb82(0x798)](this['instanceName']+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+_0x51cb82(0x767));let _0xf853a6=new Date()[_0x51cb82(0x202)](),_0xb9c642=_0x48f40d+_0x51cb82(0x78a)+_0xf853a6;this['logger'][_0x51cb82(0x798)](this['instanceName']+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+_0x51cb82(0x3bc)+_0xb9c642);let _0x372ca5=await te[_0x51cb82(0x62c)][_0x51cb82(0x30a)](_0xb9c642,{'responseType':_0x51cb82(0x78c)});this['logger'][_0x51cb82(0x798)](this[_0x51cb82(0x402)]+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+'):Getting\x20image\x20from\x20url');let _0x4be52a=Buffer[_0x51cb82(0x77b)](_0x372ca5[_0x51cb82(0x6a3)],_0x51cb82(0x2ba));_0x21eff7=''+(0x0,j['join'])(this['storePath'],_0x51cb82(0x817)+_0x4c6252+'.png'),this[_0x51cb82(0x3cb)][_0x51cb82(0x798)](this[_0x51cb82(0x402)]+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+_0x51cb82(0x665)+_0x21eff7),await(0x0,Vt[_0x51cb82(0x62c)])(_0x4be52a)[_0x51cb82(0x1ee)](_0x21eff7),this[_0x51cb82(0x3cb)]['verbose'](this[_0x51cb82(0x402)]+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+_0x51cb82(0x8ff));}return await(0x0,Vt[_0x51cb82(0x62c)])(_0x21eff7)[_0x51cb82(0x8e0)]()[_0x51cb82(0x1ee)](_0x5e26aa),this['logger'][_0x51cb82(0x798)](this[_0x51cb82(0x402)]+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+_0x51cb82(0x430)),F['unlinkSync'](_0x21eff7),this[_0x51cb82(0x3cb)][_0x51cb82(0x798)](this[_0x51cb82(0x402)]+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+_0x51cb82(0x5c9)),_0x5e26aa;}catch(_0x520df4){let _0x4b89f5=_0x51cb82(0x660),_0x53dc6c=_0x520df4 instanceof Error?_0x520df4[_0x51cb82(0x5ce)]:typeof _0x520df4=='object'?JSON[_0x51cb82(0x43f)](_0x520df4):_0x520df4,_0x568a6b=_0x4b89f5+':\x20'+_0x53dc6c;this[_0x51cb82(0x3cb)]['error'](this['instanceName']+'\x20('+this[_0x51cb82(0x770)][_0x51cb82(0x808)]+'):\x20'+_0x568a6b);}}async[a0_0x34b2dc(0x611)](_0x1ad584){const _0x75fd61=a0_0x34b2dc;let _0x378a27=await this['convertToWebP'](_0x1ad584[_0x75fd61(0x551)][_0x75fd61(0x539)],_0x1ad584[_0x75fd61(0x51e)]),_0x3e8550=await this[_0x75fd61(0x7a0)](_0x1ad584['number'],{'sticker':{'url':_0x378a27}},_0x1ad584?.[_0x75fd61(0x812)]);return F[_0x75fd61(0x866)](_0x378a27),this[_0x75fd61(0x3cb)][_0x75fd61(0x798)](this[_0x75fd61(0x402)]+'\x20('+this[_0x75fd61(0x770)][_0x75fd61(0x808)]+_0x75fd61(0x82c)),_0x3e8550;}async['audioWhatsapp'](_0x1f3dbc){const _0x43e295=a0_0x34b2dc;if(this[_0x43e295(0x3cb)][_0x43e295(0x798)](this['instanceName']+'\x20('+this[_0x43e295(0x770)][_0x43e295(0x808)]+_0x43e295(0x5f4)),!_0x1f3dbc[_0x43e295(0x812)]?.['encoding']&&_0x1f3dbc['options']?.[_0x43e295(0x311)]!==!0x1&&(_0x1f3dbc['options'][_0x43e295(0x311)]=!0x0),_0x1f3dbc[_0x43e295(0x812)]?.[_0x43e295(0x311)]){let _0x43f4ff=await this[_0x43e295(0x4b5)](_0x1f3dbc[_0x43e295(0x82a)][_0x43e295(0x389)]);if(typeof _0x43f4ff==_0x43e295(0x47d)){let _0x5d102a=F['readFileSync'](_0x43f4ff)[_0x43e295(0x1fe)]('base64');return this[_0x43e295(0x7a0)](_0x1f3dbc[_0x43e295(0x51e)],{'audio':Buffer[_0x43e295(0x77b)](_0x5d102a,'base64'),'ptt':!0x0,'mimetype':_0x43e295(0x8b8)},{'presence':_0x43e295(0x75c),'delay':_0x1f3dbc?.['options']?.[_0x43e295(0x6db)]});}else throw new x(_0x43f4ff);}return await this[_0x43e295(0x7a0)](_0x1f3dbc['number'],{'audio':(0x0,L[_0x43e295(0x525)])(_0x1f3dbc[_0x43e295(0x82a)]['audio'])?{'url':_0x1f3dbc[_0x43e295(0x82a)][_0x43e295(0x389)]}:Buffer[_0x43e295(0x77b)](_0x1f3dbc[_0x43e295(0x82a)]['audio'],_0x43e295(0x616)),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':_0x43e295(0x75c),'delay':_0x1f3dbc?.['options']?.['delay']});}async[a0_0x34b2dc(0x4b5)](_0x4bfa35){const _0x206882=a0_0x34b2dc;this[_0x206882(0x3cb)][_0x206882(0x798)](this['instanceName']+'\x20('+this[_0x206882(0x770)][_0x206882(0x808)]+_0x206882(0x341));let _0x41627e=(0x0,L['isURL'])(_0x4bfa35)?(0x0,Gt[_0x206882(0x56d)])(_0x206882(0x5a7))['update'](_0x4bfa35)['digest']('hex'):(0x0,Gt[_0x206882(0x56d)])(_0x206882(0x5a7))['update'](_0x4bfa35)[_0x206882(0x2df)](_0x206882(0x60f)),_0x4ea632=''+(0x0,j['join'])(this[_0x206882(0x8c2)],_0x41627e+_0x206882(0x3ef));if(F['existsSync'](_0x4ea632))return this[_0x206882(0x3cb)][_0x206882(0x798)](this[_0x206882(0x402)]+'\x20('+this[_0x206882(0x770)][_0x206882(0x808)]+_0x206882(0x567)),_0x4ea632;let _0x28ec93=''+(0x0,j[_0x206882(0x3c9)])(this[_0x206882(0x8c2)],'temp-'+(0x0,X['v4'])()+_0x206882(0x541));if((0x0,L[_0x206882(0x525)])(_0x4bfa35)){let _0x426671=new Date()['getTime'](),_0x25b9c8=_0x4bfa35+_0x206882(0x78a)+_0x426671,_0x2290c1=await te[_0x206882(0x62c)][_0x206882(0x30a)](_0x25b9c8,{'responseType':_0x206882(0x78c)});F[_0x206882(0x516)](_0x28ec93,_0x2290c1[_0x206882(0x6a3)]);}else{let _0xa8d408=Buffer[_0x206882(0x77b)](_0x4bfa35,_0x206882(0x616));F[_0x206882(0x516)](_0x28ec93,_0xa8d408);}return new Promise((_0x53952f,_0x145379)=>{const _0x164160=_0x206882;(0x0,Ue['exec'])(Ps[_0x164160(0x62c)][_0x164160(0x6b9)]+'\x20-i\x20'+_0x28ec93+_0x164160(0x75d)+_0x4ea632+_0x164160(0x697),_0x7ea01e=>{const _0x4ceaf5=_0x164160;if(F[_0x4ceaf5(0x866)](_0x28ec93),_0x7ea01e){this[_0x4ceaf5(0x3cb)]['verbose'](this[_0x4ceaf5(0x402)]+'\x20('+this['instance'][_0x4ceaf5(0x808)]+'):Error\x20in\x20converting\x20audio'),_0x145379(_0x7ea01e);return;}this['logger'][_0x4ceaf5(0x798)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4ceaf5(0x870)),_0x53952f(_0x4ea632);});});}async[a0_0x34b2dc(0x407)](_0x5e49f7){const _0x29de4a=a0_0x34b2dc;this['logger'][_0x29de4a(0x798)](this['instanceName']+'\x20('+this[_0x29de4a(0x770)]['wuid']+_0x29de4a(0x341));let _0x1e8f10=(0x0,Gt[_0x29de4a(0x56d)])(_0x29de4a(0x5a7))[_0x29de4a(0x78f)](_0x5e49f7)[_0x29de4a(0x2df)](_0x29de4a(0x60f)),_0x14cc04=''+(0x0,j['join'])(this[_0x29de4a(0x8c2)],_0x1e8f10+_0x29de4a(0x541));if(F[_0x29de4a(0x68c)](_0x14cc04))return this['logger'][_0x29de4a(0x798)](this[_0x29de4a(0x402)]+'\x20('+this[_0x29de4a(0x770)][_0x29de4a(0x808)]+_0x29de4a(0x567)),j[_0x29de4a(0x62c)][_0x29de4a(0x66f)](_0x14cc04);let _0x33a1f2=''+(0x0,j[_0x29de4a(0x3c9)])(this[_0x29de4a(0x8c2)],_0x29de4a(0x817)+_0x1e8f10+_0x29de4a(0x3ef));if((0x0,L[_0x29de4a(0x525)])(_0x5e49f7)){let _0x3c0a7e=new Date()[_0x29de4a(0x202)](),_0x5c62eb=_0x5e49f7+'?timestamp='+_0x3c0a7e,_0x1501cf=await te[_0x29de4a(0x62c)]['get'](_0x5c62eb,{'responseType':_0x29de4a(0x78c)});F[_0x29de4a(0x516)](_0x33a1f2,_0x1501cf[_0x29de4a(0x6a3)]);}else{let _0x25af2b=Buffer[_0x29de4a(0x77b)](_0x5e49f7,'base64');F[_0x29de4a(0x516)](_0x33a1f2,_0x25af2b);}return new Promise((_0x15a796,_0x2391e0)=>{const _0x321c12=_0x29de4a;(0x0,Ue['exec'])(Ps['default'][_0x321c12(0x6b9)]+_0x321c12(0x601)+_0x33a1f2+_0x321c12(0x84d)+_0x14cc04+_0x321c12(0x697),_0xd4db2=>{const _0xefe34b=_0x321c12;if(F[_0xefe34b(0x866)](_0x33a1f2),_0xd4db2){this[_0xefe34b(0x3cb)][_0xefe34b(0x798)](this[_0xefe34b(0x402)]+'\x20('+this[_0xefe34b(0x770)][_0xefe34b(0x808)]+'):Error\x20in\x20converting\x20audio'),_0x2391e0(_0xd4db2);return;}this[_0xefe34b(0x3cb)][_0xefe34b(0x798)](this[_0xefe34b(0x402)]+'\x20('+this[_0xefe34b(0x770)]['wuid']+_0xefe34b(0x870)),_0x15a796(j[_0xefe34b(0x62c)][_0xefe34b(0x66f)](_0x14cc04));});});}async[a0_0x34b2dc(0x375)](_0x1dc335){const _0x366ea2=a0_0x34b2dc;let _0x2b1aa7={},_0x4c377b=_0x366ea2(0x780);if(_0x1dc335[_0x366ea2(0x375)]?.[_0x366ea2(0x80a)]){_0x4c377b=_0x1dc335[_0x366ea2(0x375)][_0x366ea2(0x80a)]?.[_0x366ea2(0x70d)][_0x366ea2(0x22d)]()??_0x366ea2(0x780),_0x2b1aa7['mediaKey']=_0x4c377b[_0x366ea2(0x4a4)]()+_0x366ea2(0x659);let _0x478010=await this[_0x366ea2(0x778)](_0x1dc335['buttonMessage']['mediaMessage']);_0x2b1aa7[_0x366ea2(0x5ce)]=_0x478010['message'][_0x2b1aa7[_0x366ea2(0x701)]],_0x2b1aa7[_0x366ea2(0x537)]='*'+_0x1dc335[_0x366ea2(0x375)]['title']+_0x366ea2(0x46e)+_0x1dc335[_0x366ea2(0x375)][_0x366ea2(0x691)];}let _0xa61f9c={'text':_0x1dc335[_0x366ea2(0x375)][_0x366ea2(0x80c)][_0x366ea2(0x790)](_0x2c4f74=>_0x2c4f74['buttonText']),'ids':_0x1dc335[_0x366ea2(0x375)][_0x366ea2(0x80c)][_0x366ea2(0x790)](_0x5d7f64=>_0x5d7f64[_0x366ea2(0x533)])};if(!(0x0,L[_0x366ea2(0x45e)])(_0xa61f9c[_0x366ea2(0x6b6)])||!(0x0,L[_0x366ea2(0x45e)])(_0xa61f9c[_0x366ea2(0x22b)]))throw new m(_0x366ea2(0x2e4),_0x366ea2(0x8f7));return await this['sendMessageWithTyping'](_0x1dc335[_0x366ea2(0x51e)],{'buttonsMessage':{'text':_0x2b1aa7?.[_0x366ea2(0x701)]?void 0x0:_0x1dc335[_0x366ea2(0x375)][_0x366ea2(0x1f9)],'contentText':_0x2b1aa7?.[_0x366ea2(0x537)]??_0x1dc335[_0x366ea2(0x375)][_0x366ea2(0x691)],'footerText':_0x1dc335[_0x366ea2(0x375)]?.[_0x366ea2(0x78e)],'buttons':_0x1dc335[_0x366ea2(0x375)][_0x366ea2(0x80c)]['map'](_0x2164b9=>({'buttonText':{'displayText':_0x2164b9[_0x366ea2(0x23d)]},'buttonId':_0x2164b9[_0x366ea2(0x533)],'type':0x1})),'headerType':w['proto'][_0x366ea2(0x659)][_0x366ea2(0x5fd)][_0x366ea2(0x635)][_0x4c377b],[_0x2b1aa7?.[_0x366ea2(0x701)]]:_0x2b1aa7?.[_0x366ea2(0x5ce)]}},_0x1dc335?.[_0x366ea2(0x812)]);}async[a0_0x34b2dc(0x8bb)](_0x167a48){const _0x5861c3=a0_0x34b2dc;return await this['sendMessageWithTyping'](_0x167a48[_0x5861c3(0x51e)],{'locationMessage':{'degreesLatitude':_0x167a48['locationMessage'][_0x5861c3(0x6cc)],'degreesLongitude':_0x167a48[_0x5861c3(0x8bb)][_0x5861c3(0x529)],'name':_0x167a48[_0x5861c3(0x8bb)]?.[_0x5861c3(0x673)],'address':_0x167a48[_0x5861c3(0x8bb)]?.[_0x5861c3(0x26f)]}},_0x167a48?.[_0x5861c3(0x812)]);}async[a0_0x34b2dc(0x723)](_0x4183eb){const _0xe19f60=a0_0x34b2dc;let _0x39fc29={},_0x5450bc=async _0x2a5880=>{const _0x4cf755=a0_0x15dd;let _0x2ff014=_0x4cf755(0x2a8)+_0x2a5880['fullName']+_0x4cf755(0x722)+_0x2a5880[_0x4cf755(0x478)]+'\x0a';_0x2a5880[_0x4cf755(0x203)]&&(_0x2ff014+=_0x4cf755(0x5b3)+_0x2a5880[_0x4cf755(0x203)]+';\x0a'),_0x2a5880['email']&&(_0x2ff014+=_0x4cf755(0x7b6)+_0x2a5880[_0x4cf755(0x806)]+'\x0a'),_0x2a5880[_0x4cf755(0x931)]&&(_0x2ff014+=_0x4cf755(0x542)+_0x2a5880['url']+'\x0a');let _0x57e14a='',_0x2d972f=0x1;if(_0x2a5880[_0x4cf755(0x5bf)]){let _0x202b52=_0x2a5880['phoneNumber'][_0x4cf755(0x292)]('|');for(let _0xbe6107 of _0x202b52){let _0x42cb1c=await this[_0x4cf755(0x70c)]({'numbers':[_0xbe6107]}),_0x2c4dba=(_0x42cb1c[_0x4cf755(0x3a3)]>0x0?_0x42cb1c[0x0]['jid']:this[_0x4cf755(0x6ea)](_0xbe6107))[_0x4cf755(0x2a1)](_0x4cf755(0x831),'');_0x57e14a+=_0x4cf755(0x8ab)+_0x2d972f+'.TEL;waid='+_0x2c4dba+':'+_0xbe6107+_0x4cf755(0x215)+_0x2d972f+'.X-ABLabel:Celular\x0a',_0x2d972f++;}}return _0x2ff014+=_0x57e14a+_0x4cf755(0x2db),_0x2ff014;};return _0x4183eb[_0xe19f60(0x723)][_0xe19f60(0x3a3)]===0x1?_0x39fc29[_0xe19f60(0x723)]={'displayName':_0x4183eb[_0xe19f60(0x723)][0x0][_0xe19f60(0x478)],'vcard':await _0x5450bc(_0x4183eb[_0xe19f60(0x723)][0x0])}:_0x39fc29[_0xe19f60(0x924)]={'displayName':_0x4183eb[_0xe19f60(0x723)][_0xe19f60(0x3a3)]+'\x20contacts','contacts':await Promise[_0xe19f60(0x57f)](_0x4183eb['contactMessage'][_0xe19f60(0x790)](async _0x578432=>({'displayName':_0x578432[_0xe19f60(0x478)],'vcard':await _0x5450bc(_0x578432)})))},await this[_0xe19f60(0x7a0)](_0x4183eb[_0xe19f60(0x51e)],{..._0x39fc29},_0x4183eb?.[_0xe19f60(0x812)]);}async[a0_0x34b2dc(0x617)](_0x816d5c){const _0x105957=a0_0x34b2dc;return await this[_0x105957(0x7a0)](_0x816d5c[_0x105957(0x617)][_0x105957(0x85f)][_0x105957(0x668)],{'reactionMessage':{'key':_0x816d5c[_0x105957(0x617)][_0x105957(0x85f)],'text':_0x816d5c[_0x105957(0x617)][_0x105957(0x632)]}});}async[a0_0x34b2dc(0x70c)](_0x23619e){const _0x49bf6e=a0_0x34b2dc;let _0x2e458d=[];for await(let _0x3d74d8 of _0x23619e['numbers']){let _0x471cc3=this[_0x49bf6e(0x6ea)](_0x3d74d8),_0x20741e=!0x1;try{if((0x0,w[_0x49bf6e(0x6bd)])(_0x471cc3)){let _0x24b87b=(await this['repository']['chat']['findOne']({'where':{'_id':_0x471cc3}},this['instance'][_0x49bf6e(0x808)]))[_0x49bf6e(0x7a6)];_0x24b87b?(_0x20741e=!0x0,_0x2e458d[_0x49bf6e(0x26d)](new pe(_0x24b87b['id'],_0x20741e,_0x24b87b?.[_0x49bf6e(0x256)]))):(_0x24b87b=await this[_0x49bf6e(0x8e5)]({'groupJid':_0x471cc3},'inner'),_0x2e458d[_0x49bf6e(0x26d)](new pe(_0x24b87b['id'],!!_0x24b87b?.['id'],_0x24b87b?.['subject'])));}else{if(_0x471cc3[_0x49bf6e(0x4c4)](_0x49bf6e(0x703)))_0x2e458d['push'](new pe(_0x471cc3,!0x0));else{let _0x5c6228=(await this[_0x49bf6e(0x45a)][_0x49bf6e(0x7cc)](_0x471cc3))[0x0];_0x2e458d[_0x49bf6e(0x26d)](new pe(_0x5c6228[_0x49bf6e(0x5f0)],_0x5c6228[_0x49bf6e(0x22e)]));}}}catch{(0x0,w[_0x49bf6e(0x6bd)])(_0x471cc3)||await this[_0x49bf6e(0x6cd)](_0x471cc3),_0x2e458d[_0x49bf6e(0x26d)](new pe(_0x3d74d8,!0x1));}}return _0x2e458d;}async[a0_0x34b2dc(0x6cd)](_0x2a440e){const _0x2365c1=a0_0x34b2dc;try{await this[_0x2365c1(0x261)]['chat'][_0x2365c1(0x440)]({'where':{'_id':_0x2a440e,'imported':!0x0}},this[_0x2365c1(0x770)][_0x2365c1(0x808)])&&(await this[_0x2365c1(0x261)][_0x2365c1(0x89d)][_0x2365c1(0x3af)](_0x2a440e,this['instance'][_0x2365c1(0x808)]),this[_0x2365c1(0x3cb)][_0x2365c1(0x5df)](_0x2365c1(0x588)+_0x2a440e+_0x2365c1(0x61c)));}catch(_0x221f17){let _0x7e2fef='Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat',_0x2a6160=_0x221f17 instanceof Error?_0x221f17[_0x2365c1(0x5ce)]:typeof _0x221f17==_0x2365c1(0x89b)?JSON['stringify'](_0x221f17):_0x221f17,_0xf5399b=_0x7e2fef+':\x20'+_0x2a6160;this[_0x2365c1(0x3cb)][_0x2365c1(0x651)](this[_0x2365c1(0x402)]+'\x20('+this[_0x2365c1(0x770)][_0x2365c1(0x808)]+_0x2365c1(0x4b7)+_0xf5399b);}}async[a0_0x34b2dc(0x83f)](_0x3fb6bc){const _0x508579=a0_0x34b2dc;try{let _0x12f36d=_0x3fb6bc[_0x508579(0x84c)][_0x508579(0x334)](_0x22328f=>(0x0,w[_0x508579(0x6bd)])(_0x22328f[_0x508579(0x668)])||(0x0,w['isJidUser'])(_0x22328f[_0x508579(0x668)]))[_0x508579(0x790)](_0x5393c5=>({'remoteJid':_0x5393c5[_0x508579(0x668)],'fromMe':_0x5393c5[_0x508579(0x464)],'id':_0x5393c5['id']}));await this[_0x508579(0x45a)]['readMessages'](_0x12f36d);let _0x3778f2=_0x12f36d[_0x508579(0x790)](_0x12069a=>this[_0x508579(0x4d8)](_0x12069a,{'status':_0x508579(0x34b),'owner':this['instance'][_0x508579(0x808)]})),_0x4e38d8=_0x12f36d[_0x508579(0x790)](_0x3a4799=>this[_0x508579(0x261)]['chat'][_0x508579(0x6ce)]({'where':{'_id':_0x3a4799[_0x508579(0x668)]}},{'unreadcount':0x0},this[_0x508579(0x770)][_0x508579(0x808)])),[_0x88fc88,_0x165225]=await Promise[_0x508579(0x57f)]([Promise[_0x508579(0x57f)](_0x3778f2),Promise[_0x508579(0x57f)](_0x4e38d8)]);return _0x165225['filter'](_0x5f5389=>_0x5f5389!==null)[_0x508579(0x3f2)](_0x2acda9=>{const _0x1c0dea=_0x508579;q(this['instanceName'],_0x1c0dea(0x88b),{'chat':_0x2acda9});}),{'message':_0x508579(0x8d2),'read':_0x508579(0x7fa)};}catch(_0x4c5385){let _0x4155e5=_0x508579(0x8d5),_0x1cefea=_0x4c5385 instanceof Error?_0x4c5385['message']:typeof _0x4c5385==_0x508579(0x89b)?JSON[_0x508579(0x43f)](_0x4c5385):_0x4c5385,_0x17c83c=_0x4155e5+':\x20'+_0x1cefea;throw this['logger']['error'](this[_0x508579(0x402)]+'\x20('+this[_0x508579(0x770)][_0x508579(0x808)]+_0x508579(0x4b7)+_0x17c83c),new x(_0x17c83c);}}async[a0_0x34b2dc(0x2f3)](_0x43d894){const _0x346e7c=a0_0x34b2dc;let _0x3d1e69={'where':{'key':{'remoteJid':_0x43d894}},'limit':0x1},_0x3993d2=await this[_0x346e7c(0x647)](_0x3d1e69);return _0x3993d2||(this[_0x346e7c(0x3cb)][_0x346e7c(0x651)](_0x346e7c(0x385)+_0x43d894),null);}async[a0_0x34b2dc(0x229)](_0x48aaab){const _0x350e48=a0_0x34b2dc;this[_0x350e48(0x3cb)][_0x350e48(0x798)](this['instanceName']+'\x20('+this[_0x350e48(0x770)]['wuid']+'):Archiving\x20chat');try{let _0x2edbe4=_0x48aaab['lastMessage'],_0x36f6e8=_0x48aaab[_0x350e48(0x89d)];if(!_0x2edbe4&&_0x36f6e8?_0x2edbe4=await this[_0x350e48(0x2f3)](_0x36f6e8):(_0x2edbe4=_0x48aaab[_0x350e48(0x74d)],_0x2edbe4['messageTimestamp']=_0x2edbe4?.[_0x350e48(0x912)]??Date[_0x350e48(0x880)](),_0x36f6e8=_0x2edbe4?.[_0x350e48(0x85f)]?.['remoteJid']),!_0x2edbe4||Object[_0x350e48(0x37c)](_0x2edbe4)[_0x350e48(0x3a3)]===0x0)throw new J(_0x350e48(0x769));this[_0x350e48(0x3cb)][_0x350e48(0x798)](this[_0x350e48(0x402)]+'\x20('+this[_0x350e48(0x770)][_0x350e48(0x808)]+_0x350e48(0x829)+_0x36f6e8);try{await this[_0x350e48(0x45a)][_0x350e48(0x706)]({'archive':_0x48aaab[_0x350e48(0x494)],'lastMessages':[_0x2edbe4]},this['createJid'](_0x36f6e8));}catch(_0x142d88){let _0xcb25b4='Error\x20in\x20chatModify\x20for\x20number\x20'+_0x36f6e8,_0x294169=_0x142d88 instanceof Error?_0x142d88['message']:typeof _0x142d88==_0x350e48(0x89b)?JSON[_0x350e48(0x43f)](_0x142d88):_0x142d88,_0x540460=_0xcb25b4+':\x20'+_0x294169;this[_0x350e48(0x3cb)][_0x350e48(0x651)](this[_0x350e48(0x402)]+'\x20('+this[_0x350e48(0x770)]['wuid']+_0x350e48(0x4b7)+_0x540460);}this[_0x350e48(0x3cb)][_0x350e48(0x798)](this[_0x350e48(0x402)]+'\x20('+this[_0x350e48(0x770)][_0x350e48(0x808)]+_0x350e48(0x353)+_0x36f6e8);let _0x39689b=await this['repository'][_0x350e48(0x89d)][_0x350e48(0x6ce)]({'where':{'_id':_0x2edbe4?.[_0x350e48(0x85f)]?.[_0x350e48(0x668)]}},{'archived':_0x48aaab['archive']},this[_0x350e48(0x770)]['wuid']);return _0x39689b?(this[_0x350e48(0x3cb)][_0x350e48(0x798)](this[_0x350e48(0x402)]+'\x20('+this[_0x350e48(0x770)][_0x350e48(0x808)]+_0x350e48(0x488)+JSON[_0x350e48(0x43f)](_0x39689b)),q(this['instanceName'],_0x350e48(0x88b),{'chat':_0x39689b})):this['logger'][_0x350e48(0x651)](this[_0x350e48(0x402)]+'\x20('+this[_0x350e48(0x770)]['wuid']+_0x350e48(0x5cd)+_0x36f6e8),{'chatId':_0x36f6e8,'archived':_0x48aaab[_0x350e48(0x494)]};}catch(_0x1b4497){let _0x33cb0e=_0x350e48(0x925),_0x200cf0=_0x1b4497 instanceof Error?_0x1b4497[_0x350e48(0x5ce)]:typeof _0x1b4497==_0x350e48(0x89b)?JSON['stringify'](_0x1b4497):_0x1b4497,_0x2fb67b=_0x33cb0e+':\x20'+_0x200cf0;throw this[_0x350e48(0x3cb)][_0x350e48(0x651)](this['instanceName']+'\x20('+this[_0x350e48(0x770)][_0x350e48(0x808)]+_0x350e48(0x4b7)+_0x2fb67b),new x(_0x2fb67b);}}async['deleteChat'](_0x3cee8f){const _0x22ed30=a0_0x34b2dc;this['logger']['verbose'](this[_0x22ed30(0x402)]+'\x20('+this[_0x22ed30(0x770)][_0x22ed30(0x808)]+_0x22ed30(0x4ae));try{let _0x30938e=await this['getLastMessage'](_0x3cee8f);if(!_0x30938e||Object['keys'](_0x30938e)[_0x22ed30(0x3a3)]===0x0)throw new J(_0x22ed30(0x769));let _0x13c004=_0x30938e[0x0];this[_0x22ed30(0x3cb)][_0x22ed30(0x798)](this[_0x22ed30(0x402)]+'\x20('+this[_0x22ed30(0x770)][_0x22ed30(0x808)]+_0x22ed30(0x70f)+_0x3cee8f);try{await this[_0x22ed30(0x45a)][_0x22ed30(0x706)]({'delete':!0x0,'lastMessages':[{'key':_0x13c004[_0x22ed30(0x85f)],'messageTimestamp':_0x13c004['messageTimestamp']}]},this['createJid'](_0x3cee8f));}catch(_0x5a0e36){this['logger'][_0x22ed30(0x651)](_0x22ed30(0x288)+_0x3cee8f+':\x20'+_0x5a0e36['toString']());}this[_0x22ed30(0x3cb)][_0x22ed30(0x798)](this[_0x22ed30(0x402)]+'\x20('+this['instance']['wuid']+_0x22ed30(0x353)+_0x3cee8f);return;}catch(_0x3bf823){throw this[_0x22ed30(0x3cb)][_0x22ed30(0x651)](this[_0x22ed30(0x402)]+'\x20('+this['instance'][_0x22ed30(0x808)]+_0x22ed30(0x648)+_0x3bf823[_0x22ed30(0x1fe)]()),new x({'archived':!0x1,'message':['An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.',_0x3bf823['toString']()]});}}async[a0_0x34b2dc(0x2e1)](_0x34ab8f){const _0xf77a89=a0_0x34b2dc;try{let _0x4ad9f9=await this['client'][_0xf77a89(0x90e)](_0x34ab8f[_0xf77a89(0x668)],{'delete':_0x34ab8f});try{let _0xe1a6b7=await this['updateMessage'](_0x34ab8f,{'status':_0xf77a89(0x506),'owner':this[_0xf77a89(0x770)][_0xf77a89(0x808)]});this['logger']['verbose'](this[_0xf77a89(0x402)]+'\x20('+this[_0xf77a89(0x770)][_0xf77a89(0x808)]+'):\x20updateResult:'+_0xe1a6b7);}catch(_0x390990){this[_0xf77a89(0x3cb)][_0xf77a89(0x651)](_0xf77a89(0x61e)+_0x390990);}return _0x4ad9f9;}catch(_0xf6d3b9){throw new x(_0xf77a89(0x46b),_0xf6d3b9?.[_0xf77a89(0x1fe)]());}}async[a0_0x34b2dc(0x771)](_0x202298){const _0x4d323f=a0_0x34b2dc;try{let _0x1cca0d=_0x202298?.[_0x4d323f(0x5ce)]?_0x202298:await this['getMessage'](_0x202298[_0x4d323f(0x85f)],!0x0);for(let _0x13acf1 of Ra)_0x1cca0d[_0x4d323f(0x5ce)][_0x13acf1]&&(_0x1cca0d['message']=_0x1cca0d[_0x4d323f(0x5ce)][_0x13acf1][_0x4d323f(0x5ce)]);let _0x14834b,_0x30d724;for(let _0x4aa7b2 of $a)if(_0x14834b=_0x1cca0d[_0x4d323f(0x5ce)][_0x4aa7b2],_0x14834b){_0x30d724=_0x4aa7b2;break;}if(!_0x14834b)throw _0x4d323f(0x7ae);typeof _0x14834b['mediaKey']==_0x4d323f(0x89b)&&(_0x1cca0d[_0x4d323f(0x5ce)]=JSON[_0x4d323f(0x232)](JSON['stringify'](_0x1cca0d[_0x4d323f(0x5ce)])));let _0x1bf82e=await(0x0,w[_0x4d323f(0x6a6)])({'key':_0x1cca0d?.[_0x4d323f(0x85f)],'message':_0x1cca0d?.['message']},_0x4d323f(0x6ab),{},{'logger':(0x0,qt['default'])({'level':'silent'}),'reuploadRequest':this[_0x4d323f(0x45a)][_0x4d323f(0x6d5)]});if(!(_0x1bf82e instanceof Buffer))throw new Error(_0x4d323f(0x599));let _0x1195f6=this[_0x4d323f(0x269)][_0x4d323f(0x30a)](_0x4d323f(0x25e)),_0x946533,_0xc5f153;if(_0x14834b['fileName'])_0x946533=_0x14834b[_0x4d323f(0x685)];else{let _0x1e76f9=_0x14834b[_0x4d323f(0x8ac)]?.[_0x4d323f(0x52f)](/\/(\w+)/),_0x350910=_0x1e76f9?_0x1e76f9[0x1]:null;if(!_0x350910)throw new Error(_0x4d323f(0x634));_0x946533=(0x0,X['v4'])()+'.'+_0x350910;}_0x30d724==='audioMessage'?_0xc5f153='/media/'+await this['convertaudioMP3'](_0x1bf82e[_0x4d323f(0x1fe)](_0x4d323f(0x616))):(await this[_0x4d323f(0x433)](_0x1bf82e,_0x946533),_0xc5f153=_0x4d323f(0x7bf)+_0x946533);let _0x3208c4=this[_0x4d323f(0x269)][_0x4d323f(0x30a)](_0x4d323f(0x773))['URL'];if(!_0x3208c4){let _0x1c7611=this[_0x4d323f(0x269)][_0x4d323f(0x30a)](_0x4d323f(0x6c5));_0x3208c4=_0x4d323f(0x3f9)+(_0x1c7611&&_0x1c7611[_0x4d323f(0x627)][_0x4d323f(0x292)]('/')[0x4]);}_0xc5f153=''+_0x3208c4+_0xc5f153;let _0x1d7ba2=0xc*0x3c*0x3c*0x3e8,_0x16f632={'where':{'_id':_0x1cca0d[_0x4d323f(0x85f)]['id']}},_0x396555={'message_normalized.fileUrl':_0xc5f153,'message_normalized.expires_fileUrl':Date[_0x4d323f(0x880)]()+_0x1d7ba2};try{let _0x1bbd70=await this[_0x4d323f(0x261)][_0x4d323f(0x5ce)]['update'](_0x16f632,_0x396555,this[_0x4d323f(0x770)][_0x4d323f(0x808)]);_0x1bbd70&&q(this[_0x4d323f(0x402)],_0x4d323f(0x591),{'message':_0x1bbd70});}catch(_0x20bd74){let _0x541426=_0x4d323f(0x32a),_0x268456=_0x20bd74 instanceof Error?_0x20bd74[_0x4d323f(0x5ce)]:typeof _0x20bd74==_0x4d323f(0x89b)?JSON[_0x4d323f(0x43f)](_0x20bd74):_0x20bd74,_0x4dddf0=_0x541426+':\x20'+_0x268456;this[_0x4d323f(0x3cb)][_0x4d323f(0x651)](this['instanceName']+'\x20('+this['instance'][_0x4d323f(0x808)]+_0x4d323f(0x4b7)+_0x4dddf0);}return{'mediaType':_0x30d724,'fileName':_0x14834b[_0x4d323f(0x685)],'caption':_0x14834b['caption'],'size':{'fileLength':_0x14834b['fileLength'],'height':_0x14834b[_0x4d323f(0x423)],'width':_0x14834b[_0x4d323f(0x851)]},'mimetype':_0x14834b[_0x4d323f(0x8ac)],'base64':_0x1bf82e[_0x4d323f(0x1fe)](_0x4d323f(0x616)),'fileUrl':_0xc5f153,'expires_fileUrl':Date['now']()+_0x1d7ba2};}catch(_0x198fac){let _0x14523a=_0x4d323f(0x89f),_0x3b70a8=_0x198fac instanceof Error?_0x198fac[_0x4d323f(0x5ce)]:typeof _0x198fac==_0x4d323f(0x89b)?JSON[_0x4d323f(0x43f)](_0x198fac):_0x198fac,_0x5bbd45=_0x14523a+':\x20'+_0x3b70a8;throw this[_0x4d323f(0x3cb)][_0x4d323f(0x651)](this[_0x4d323f(0x402)]+'\x20('+this[_0x4d323f(0x770)][_0x4d323f(0x808)]+_0x4d323f(0x4b7)+_0x5bbd45),new m(_0x5bbd45);}}async[a0_0x34b2dc(0x433)](_0x5b98fc,_0x256c23){const _0x19a931=a0_0x34b2dc;let _0x15ce14=j[_0x19a931(0x62c)]['join'](__dirname,_0x19a931(0x716));F[_0x19a931(0x68c)](_0x15ce14)||F[_0x19a931(0x36f)](_0x15ce14,{'recursive':!0x0});let _0x12974d=j[_0x19a931(0x62c)][_0x19a931(0x3c9)](_0x15ce14,_0x256c23);return new Promise((_0x5bf23f,_0x595a1d)=>{const _0x39e9ff=_0x19a931;F[_0x39e9ff(0x595)](_0x12974d,_0x5b98fc,_0x1cccd4=>{const _0x1ba298=_0x39e9ff;_0x1cccd4?(this[_0x1ba298(0x3cb)]['error'](_0x1ba298(0x5f5)+(_0x1cccd4 instanceof Error?_0x1cccd4[_0x1ba298(0x5ce)]:JSON[_0x1ba298(0x43f)](_0x1cccd4,null,0x2))),_0x595a1d(_0x1cccd4)):(this['logger'][_0x1ba298(0x476)](_0x1ba298(0x2c1)+_0x12974d),_0x5bf23f(_0x12974d));});});}async[a0_0x34b2dc(0x2ec)](_0x4f1ef0){const _0x2a29d3=a0_0x34b2dc;return await this[_0x2a29d3(0x261)]['contact'][_0x2a29d3(0x253)](_0x4f1ef0,this[_0x2a29d3(0x770)][_0x2a29d3(0x808)]);}async[a0_0x34b2dc(0x8d8)](){const _0x3d596d=a0_0x34b2dc;return await this[_0x3d596d(0x261)]['label'][_0x3d596d(0x253)]({'where':{}},this[_0x3d596d(0x770)][_0x3d596d(0x808)]);}async['fetchMessages'](_0x54f0e2){const _0x5f4362=a0_0x34b2dc;return await this['repository']['message'][_0x5f4362(0x253)](_0x54f0e2,this[_0x5f4362(0x770)][_0x5f4362(0x808)]);}async['fetchChats'](){const _0x10a47f=a0_0x34b2dc;return this[_0x10a47f(0x261)]['chat'][_0x10a47f(0x39a)](this[_0x10a47f(0x770)]['wuid']),this[_0x10a47f(0x261)]['chat'][_0x10a47f(0x2fa)](this[_0x10a47f(0x770)][_0x10a47f(0x808)]),this['repository']['chat']['updateMissingTags'](this[_0x10a47f(0x770)]['wuid']),this[_0x10a47f(0x261)][_0x10a47f(0x89d)]['updateMissingCustomFields'](this['instance'][_0x10a47f(0x808)]),await this[_0x10a47f(0x261)][_0x10a47f(0x89d)][_0x10a47f(0x253)]({'where':{}},this[_0x10a47f(0x770)][_0x10a47f(0x808)]);}async['importChatsAntigo'](_0x19c3dc){const _0x4187f5=a0_0x34b2dc;try{if(!Array[_0x4187f5(0x6fa)](_0x19c3dc)||_0x19c3dc['length']===0x0)throw new Error('Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.');let _0x2be2dd=[],_0x588a73=[];for(let _0x109ba5 of _0x19c3dc){if(_0x109ba5[_0x4187f5(0x2c7)])_0x109ba5[_0x4187f5(0x2c7)]=this[_0x4187f5(0x6ea)](_0x109ba5['_id']);else continue;await this[_0x4187f5(0x261)][_0x4187f5(0x89d)][_0x4187f5(0x440)]({'where':{'_id':_0x109ba5[_0x4187f5(0x2c7)]}},this[_0x4187f5(0x770)][_0x4187f5(0x808)])?_0x588a73['push']({'_id':_0x109ba5['_id'],'leadInfo':_0x109ba5[_0x4187f5(0x719)],'owner':this[_0x4187f5(0x770)]['wuid']}):_0x2be2dd[_0x4187f5(0x26d)]({'_id':_0x109ba5[_0x4187f5(0x2c7)],'owner':this[_0x4187f5(0x770)][_0x4187f5(0x808)],'leadInfo':_0x109ba5[_0x4187f5(0x719)],'imported':!0x0});}return _0x588a73[_0x4187f5(0x3a3)]>0x0&&await this[_0x4187f5(0x261)]['chat'][_0x4187f5(0x1f7)](_0x588a73['map'](_0x383fbc=>({'query':{'where':{'_id':_0x383fbc[_0x4187f5(0x2c7)],'owner':this[_0x4187f5(0x770)][_0x4187f5(0x808)]}},'update':_0x383fbc}))),_0x2be2dd[_0x4187f5(0x3a3)]>0x0&&await this[_0x4187f5(0x261)][_0x4187f5(0x89d)][_0x4187f5(0x726)](_0x2be2dd,this[_0x4187f5(0x770)][_0x4187f5(0x808)]),{'updated':_0x588a73[_0x4187f5(0x3a3)],'inserted':_0x2be2dd[_0x4187f5(0x3a3)]};}catch(_0x362b78){let _0x4917cc=_0x4187f5(0x8fc),_0x2c0454=_0x362b78 instanceof Error?_0x362b78[_0x4187f5(0x5ce)]:typeof _0x362b78==_0x4187f5(0x89b)?JSON[_0x4187f5(0x43f)](_0x362b78):_0x362b78,_0x1fbd75=_0x4917cc+':\x20'+_0x2c0454;throw this[_0x4187f5(0x3cb)][_0x4187f5(0x651)](this['instanceName']+'\x20('+this[_0x4187f5(0x770)][_0x4187f5(0x808)]+'):\x20'+_0x1fbd75),new m(_0x1fbd75);}}async[a0_0x34b2dc(0x650)](_0x185d6c){const _0x99b589=a0_0x34b2dc;try{if(!Array[_0x99b589(0x6fa)](_0x185d6c)||_0x185d6c['length']===0x0)throw new Error(_0x99b589(0x297));let _0x2f908d=0x64,_0xab35a=0x0;for(let _0x111239=0x0;_0x111239<_0x185d6c[_0x99b589(0x3a3)];_0x111239+=_0x2f908d){let _0x3ff61c=_0x185d6c[_0x99b589(0x4be)](_0x111239,_0x111239+_0x2f908d),{updated:_0x35780e}=await this[_0x99b589(0x2a3)](_0x3ff61c);_0xab35a+=_0x35780e;}return{'updated':_0xab35a};}catch(_0x386c9e){let _0x243383=_0x99b589(0x8fc),_0x333b0b=_0x386c9e instanceof Error?_0x386c9e['message']:typeof _0x386c9e=='object'?JSON[_0x99b589(0x43f)](_0x386c9e):_0x386c9e,_0x2afa69=_0x243383+':\x20'+_0x333b0b;throw this[_0x99b589(0x3cb)]['error'](this['instanceName']+'\x20('+this[_0x99b589(0x770)][_0x99b589(0x808)]+_0x99b589(0x4b7)+_0x2afa69),new m(_0x2afa69);}}async['importChatsBatch'](_0x41efa8){const _0x127f29=a0_0x34b2dc;try{let _0x112d3d=await this[_0x127f29(0x261)][_0x127f29(0x8fd)][_0x127f29(0x253)]({'where':{}},this[_0x127f29(0x770)]['wuid']),_0x1e5298=new Set(_0x112d3d['map'](_0x1f9286=>_0x1f9286['_id'])),_0xc3b93d=[],_0xa347e4=[];for(let _0x31ecc5 of _0x41efa8){if(!_0x31ecc5[_0x127f29(0x2c7)])continue;_0x31ecc5['_id']=this['createJid'](_0x31ecc5[_0x127f29(0x2c7)]);let _0x30c35e=await this[_0x127f29(0x261)][_0x127f29(0x89d)]['findOne']({'where':{'_id':_0x31ecc5[_0x127f29(0x2c7)]}},this[_0x127f29(0x770)][_0x127f29(0x808)]),_0x446480={};if(Object[_0x127f29(0x631)](_0x31ecc5[_0x127f29(0x719)])[_0x127f29(0x3f2)](([_0x3c4b6d,_0x3efebb])=>{const _0x23a7aa=_0x127f29;_0x446480[_0x23a7aa(0x7eb)+_0x3c4b6d]=_0x3efebb;}),_0x30c35e&&!_0x30c35e[_0x127f29(0x784)]){let _0x1c6662=(_0x31ecc5[_0x127f29(0x719)][_0x127f29(0x335)]||[])['filter'](_0x5182eb=>_0x1e5298[_0x127f29(0x333)](_0x5182eb)),_0x32ef1e=new Set(_0x30c35e[_0x127f29(0x719)]['etiquetas']||[]),_0x541942=_0x1c6662[_0x127f29(0x334)](_0x416bde=>!_0x32ef1e[_0x127f29(0x333)](_0x416bde)),_0xd8aee8=[..._0x32ef1e][_0x127f29(0x334)](_0x23dda9=>!_0x1c6662[_0x127f29(0x4c4)](_0x23dda9));_0xa347e4[_0x127f29(0x26d)](..._0x541942[_0x127f29(0x790)](_0xeb87dc=>this[_0x127f29(0x53f)](_0xeb87dc,_0x31ecc5[_0x127f29(0x2c7)]))),_0xa347e4[_0x127f29(0x26d)](..._0xd8aee8['map'](_0x27dcd6=>this[_0x127f29(0x58f)](_0x27dcd6,_0x31ecc5['_id']))),_0x31ecc5['leadInfo'][_0x127f29(0x335)]=_0x1c6662,_0xc3b93d[_0x127f29(0x26d)]({'query':{'where':{'_id':_0x31ecc5[_0x127f29(0x2c7)],'owner':this[_0x127f29(0x770)][_0x127f29(0x808)]}},'update':_0x446480});}else _0x446480[_0x127f29(0x784)]=!0x0,_0xc3b93d[_0x127f29(0x26d)]({'query':{'where':{'_id':_0x31ecc5[_0x127f29(0x2c7)],'owner':this['instance'][_0x127f29(0x808)]}},'update':_0x446480});}let _0x3ad166=await this['repository'][_0x127f29(0x89d)][_0x127f29(0x1f7)](_0xc3b93d);return await Promise[_0x127f29(0x57f)](_0xa347e4),{'updated':_0x3ad166};}catch(_0x5d4460){let _0x21c17c=_0x127f29(0x8fc),_0xb29181=_0x5d4460 instanceof Error?_0x5d4460[_0x127f29(0x5ce)]:typeof _0x5d4460==_0x127f29(0x89b)?JSON[_0x127f29(0x43f)](_0x5d4460):_0x5d4460,_0x3db6f9=_0x21c17c+':\x20'+_0xb29181;throw this['logger'][_0x127f29(0x651)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x127f29(0x4b7)+_0x3db6f9),new m(_0x3db6f9);}}async['fetchPrivacySettings'](){const _0x122395=a0_0x34b2dc;return await this[_0x122395(0x45a)][_0x122395(0x902)]();}async[a0_0x34b2dc(0x54b)](_0x6bfd40){const _0x13f424=a0_0x34b2dc;try{return await this['client'][_0x13f424(0x720)](_0x6bfd40[_0x13f424(0x379)][_0x13f424(0x3c2)]),await this['client'][_0x13f424(0x65c)](_0x6bfd40[_0x13f424(0x379)][_0x13f424(0x324)]),await this[_0x13f424(0x45a)]['updateStatusPrivacy'](_0x6bfd40[_0x13f424(0x379)][_0x13f424(0x71c)]),await this[_0x13f424(0x45a)][_0x13f424(0x6d2)](_0x6bfd40[_0x13f424(0x379)][_0x13f424(0x834)]),await this[_0x13f424(0x45a)][_0x13f424(0x2c0)](_0x6bfd40[_0x13f424(0x379)][_0x13f424(0x3bb)]),await this['client'][_0x13f424(0x4f1)](_0x6bfd40[_0x13f424(0x379)]['groupadd']),this['client']?.['ws']?.['close'](),{'update':'success','data':{'readreceipts':_0x6bfd40[_0x13f424(0x379)]['readreceipts'],'profile':_0x6bfd40[_0x13f424(0x379)][_0x13f424(0x324)],'status':_0x6bfd40[_0x13f424(0x379)][_0x13f424(0x71c)],'online':_0x6bfd40[_0x13f424(0x379)][_0x13f424(0x834)],'last':_0x6bfd40['privacySettings'][_0x13f424(0x3bb)],'groupadd':_0x6bfd40[_0x13f424(0x379)][_0x13f424(0x6e4)]}};}catch(_0x90e2b7){let _0x3fa4ad=_0x13f424(0x3cf),_0x5140c7=_0x90e2b7 instanceof Error?_0x90e2b7[_0x13f424(0x5ce)]:typeof _0x90e2b7==_0x13f424(0x89b)?JSON['stringify'](_0x90e2b7):_0x90e2b7,_0x6dd881=_0x3fa4ad+':\x20'+_0x5140c7;throw this[_0x13f424(0x3cb)][_0x13f424(0x651)](this[_0x13f424(0x402)]+'\x20('+this[_0x13f424(0x770)][_0x13f424(0x808)]+_0x13f424(0x4b7)+_0x6dd881),new m(_0x6dd881);}}async[a0_0x34b2dc(0x602)](_0xe4e838){const _0x594d68=a0_0x34b2dc;let _0x498737=(_0xe4e838?this['createJid'](_0xe4e838):this[_0x594d68(0x45a)]?.['user']?.['id'])[_0x594d68(0x2a1)](/:\d{1,2}@/g,'@');this[_0x594d68(0x3cb)][_0x594d68(0x798)](this[_0x594d68(0x402)]+'\x20('+this['instance']['wuid']+_0x594d68(0x8d0)+_0x498737);let _0x29beb9=await this[_0x594d68(0x261)][_0x594d68(0x5ad)][_0x594d68(0x440)]({'where':{'_id':_0x498737}},this[_0x594d68(0x770)][_0x594d68(0x808)]),_0x22c2ad=_0x29beb9?_0x29beb9[_0x594d68(0x414)]:null;try{let _0x2c7b7c=(await this[_0x594d68(0x70c)]({'numbers':[_0x498737]}))?.[_0x594d68(0x495)](),_0x9461b6=(await this[_0x594d68(0x86c)](_0x498737,null,!0x1))[_0x594d68(0x8e6)]['pictureUrl'],_0x15af66=await this['getStatus'](_0x2c7b7c?.[_0x594d68(0x5f0)]),_0xfc680=await this[_0x594d68(0x7ee)](_0x2c7b7c?.[_0x594d68(0x5f0)]),_0x588328=(await this[_0x594d68(0x86c)](_0x498737,null,!0x1))[_0x594d68(0x8e6)][_0x594d68(0x673)],_0x4cb70b=await this[_0x594d68(0x261)][_0x594d68(0x89d)]['findOne']({'where':{'_id':_0x498737}},this[_0x594d68(0x770)][_0x594d68(0x808)]),_0xb0535a={'imagechat':_0x9461b6,'contactname':_0x22c2ad||null,'pushName':_0x588328,'status':_0x15af66?.['status'],'isBusiness':_0xfc680['isBusiness'],'email':_0xfc680?.[_0x594d68(0x806)],'description':_0xfc680?.[_0x594d68(0x691)],'website':_0xfc680?.[_0x594d68(0x6ca)]?.[_0x594d68(0x495)](),'lastcache':Date[_0x594d68(0x880)](),'imported':!_0x4cb70b},_0x322bcb=await this[_0x594d68(0x261)][_0x594d68(0x89d)][_0x594d68(0x6ce)]({'where':{'_id':_0x498737}},_0xb0535a,this[_0x594d68(0x770)][_0x594d68(0x808)]),_0x1a4015={'owner':this[_0x594d68(0x770)][_0x594d68(0x808)],'_id':_0x498737,'profilePictureUrl':_0x9461b6,'status':_0x15af66?.[_0x594d68(0x71c)]};return this[_0x594d68(0x261)][_0x594d68(0x5ad)][_0x594d68(0x78f)]([_0x1a4015],this['instance'][_0x594d68(0x808)]),_0x322bcb&&q(this[_0x594d68(0x402)],_0x594d68(0x88b),{'chat':_0x322bcb}),{'wuid':_0x2c7b7c?.[_0x594d68(0x5f0)]||_0x498737,'name':_0x2c7b7c?.['name'],'pushName':_0x588328,'numberExists':_0x2c7b7c?.['exists'],'picture':_0x9461b6,'status':_0x15af66?.['status'],'isBusiness':_0xfc680[_0x594d68(0x8ea)],'email':_0xfc680?.['email'],'description':_0xfc680?.[_0x594d68(0x691)],'website':_0xfc680?.[_0x594d68(0x6ca)]?.[_0x594d68(0x495)]()};}catch(_0x44570b){return this[_0x594d68(0x3cb)][_0x594d68(0x651)](_0x594d68(0x2cb)+(_0x44570b instanceof Error?_0x44570b[_0x594d68(0x5ce)]:JSON[_0x594d68(0x43f)](_0x44570b,null,0x2))),{};}}async[a0_0x34b2dc(0x7ee)](_0x3cc423){const _0xbd5e44=a0_0x34b2dc;this['logger'][_0xbd5e44(0x798)](this[_0xbd5e44(0x402)]+'\x20('+this['instance'][_0xbd5e44(0x808)]+'):Fetching\x20business\x20profile');try{let _0x491075=_0x3cc423?this[_0xbd5e44(0x6ea)](_0x3cc423):this[_0xbd5e44(0x770)][_0xbd5e44(0x808)],_0x2bd0e1=await this[_0xbd5e44(0x45a)][_0xbd5e44(0x376)](_0x491075);return this['logger'][_0xbd5e44(0x798)](this[_0xbd5e44(0x402)]+'\x20('+this['instance'][_0xbd5e44(0x808)]+_0xbd5e44(0x337)),_0x2bd0e1?(this['logger'][_0xbd5e44(0x798)](this[_0xbd5e44(0x402)]+'\x20('+this[_0xbd5e44(0x770)]['wuid']+_0xbd5e44(0x57b)),{'isBusiness':!0x0,..._0x2bd0e1}):{'isBusiness':!0x1,'message':_0xbd5e44(0x303),...(await this[_0xbd5e44(0x70c)]({'numbers':[_0x491075]}))?.[_0xbd5e44(0x495)]()};}catch(_0x5a7d12){let _0x1f426c=_0xbd5e44(0x87b),_0x34f601=_0x5a7d12 instanceof Error?_0x5a7d12[_0xbd5e44(0x5ce)]:typeof _0x5a7d12==_0xbd5e44(0x89b)?JSON['stringify'](_0x5a7d12):_0x5a7d12,_0x12f2a1=_0x1f426c+':\x20'+_0x34f601;throw this[_0xbd5e44(0x3cb)][_0xbd5e44(0x651)](this[_0xbd5e44(0x402)]+'\x20('+this['instance'][_0xbd5e44(0x808)]+_0xbd5e44(0x4b7)+_0x12f2a1),new x(_0x12f2a1);}}async['getStatus'](_0xa552ea){const _0x3d6832=a0_0x34b2dc;let _0x4d401f=this['createJid'](_0xa552ea);try{return{'wuid':_0x4d401f,'status':(await this['client'][_0x3d6832(0x64c)](_0x4d401f))?.['status']};}catch{return{'wuid':_0x4d401f,'status':null};}}async[a0_0x34b2dc(0x519)](_0x9bf85c){const _0x58790f=a0_0x34b2dc;try{return await this[_0x58790f(0x45a)][_0x58790f(0x519)](_0x9bf85c),{'update':'success'};}catch(_0x4b9ddb){let _0x476aca='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName',_0x4a23a3=_0x4b9ddb instanceof Error?_0x4b9ddb[_0x58790f(0x5ce)]:typeof _0x4b9ddb==_0x58790f(0x89b)?JSON[_0x58790f(0x43f)](_0x4b9ddb):_0x4b9ddb,_0x14ddd0=_0x476aca+':\x20'+_0x4a23a3;throw this[_0x58790f(0x3cb)][_0x58790f(0x651)](this[_0x58790f(0x402)]+'\x20('+this[_0x58790f(0x770)][_0x58790f(0x808)]+_0x58790f(0x4b7)+_0x14ddd0),new x(_0x14ddd0);}}async[a0_0x34b2dc(0x31b)](_0x4c7faa){const _0x3b74b5=a0_0x34b2dc;try{return await this['client'][_0x3b74b5(0x31b)](_0x4c7faa),{'update':'success'};}catch(_0x4581ca){let _0x1f9acb=_0x3b74b5(0x730),_0x11d1f1=_0x4581ca instanceof Error?_0x4581ca[_0x3b74b5(0x5ce)]:typeof _0x4581ca=='object'?JSON[_0x3b74b5(0x43f)](_0x4581ca):_0x4581ca,_0x248139=_0x1f9acb+':\x20'+_0x11d1f1;throw this['logger'][_0x3b74b5(0x651)](this['instanceName']+'\x20('+this[_0x3b74b5(0x770)][_0x3b74b5(0x808)]+_0x3b74b5(0x4b7)+_0x248139),new x(_0x248139);}}async[a0_0x34b2dc(0x44e)](_0x4e084c){const _0x43151f=a0_0x34b2dc;try{let _0x540100;if((0x0,L[_0x43151f(0x525)])(_0x4e084c)){let _0x5b1d32=new Date()[_0x43151f(0x202)](),_0x42b86c=_0x4e084c+_0x43151f(0x78a)+_0x5b1d32;_0x540100=(await te['default'][_0x43151f(0x30a)](_0x42b86c,{'responseType':_0x43151f(0x78c)}))['data'];}else{if((0x0,L[_0x43151f(0x919)])(_0x4e084c))_0x540100=Buffer[_0x43151f(0x77b)](_0x4e084c,_0x43151f(0x616));else throw new m(_0x43151f(0x4c0));}return await this['client']['updateProfilePicture'](this[_0x43151f(0x770)][_0x43151f(0x808)],_0x540100),{'update':_0x43151f(0x7fa)};}catch(_0x6649b3){let _0x4cb59e='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture',_0x13e1e2=_0x6649b3 instanceof Error?_0x6649b3['message']:typeof _0x6649b3==_0x43151f(0x89b)?JSON['stringify'](_0x6649b3):_0x6649b3,_0x58024e=_0x4cb59e+':\x20'+_0x13e1e2;throw this[_0x43151f(0x3cb)][_0x43151f(0x651)](this[_0x43151f(0x402)]+'\x20('+this[_0x43151f(0x770)][_0x43151f(0x808)]+_0x43151f(0x4b7)+_0x58024e),new x(_0x58024e);}}async[a0_0x34b2dc(0x51d)](){const _0x275f2a=a0_0x34b2dc;try{return await this['client'][_0x275f2a(0x51d)](this[_0x275f2a(0x770)][_0x275f2a(0x808)]),{'update':_0x275f2a(0x7fa)};}catch(_0x2cbfdb){let _0x3874a8=_0x275f2a(0x3d3),_0x31188d=_0x2cbfdb instanceof Error?_0x2cbfdb[_0x275f2a(0x5ce)]:typeof _0x2cbfdb=='object'?JSON[_0x275f2a(0x43f)](_0x2cbfdb):_0x2cbfdb,_0x182848=_0x3874a8+':\x20'+_0x31188d;throw this[_0x275f2a(0x3cb)][_0x275f2a(0x651)](this[_0x275f2a(0x402)]+'\x20('+this[_0x275f2a(0x770)]['wuid']+_0x275f2a(0x4b7)+_0x182848),new x(_0x182848);}}async[a0_0x34b2dc(0x916)](_0x4d1a49){const _0x1400f2=a0_0x34b2dc;try{let _0x2624ec=(await this[_0x1400f2(0x70c)]({'numbers':_0x4d1a49['participants']}))[_0x1400f2(0x334)](_0x1d2bd3=>_0x1d2bd3[_0x1400f2(0x22e)])[_0x1400f2(0x790)](_0x56206a=>_0x56206a[_0x1400f2(0x5f0)]),{id:_0x14983c}=await this[_0x1400f2(0x45a)]['groupCreate'](_0x4d1a49['subject'],_0x2624ec);_0x4d1a49?.[_0x1400f2(0x691)]&&await this['client'][_0x1400f2(0x2b9)](_0x14983c,_0x4d1a49[_0x1400f2(0x691)]);let _0x3a76aa=await this['client'][_0x1400f2(0x4d5)](_0x14983c);return _0x3a76aa[_0x1400f2(0x380)]=[],{'metadata':_0x3a76aa};}catch(_0x310881){let _0x39d73a=_0x1400f2(0x42a),_0x4adb05=_0x310881 instanceof Error?_0x310881['message']:typeof _0x310881==_0x1400f2(0x89b)?JSON[_0x1400f2(0x43f)](_0x310881):_0x310881,_0xc4bb94=_0x39d73a+':\x20'+_0x4adb05;throw this['logger'][_0x1400f2(0x651)](this[_0x1400f2(0x402)]+'\x20('+this[_0x1400f2(0x770)]['wuid']+_0x1400f2(0x4b7)+_0xc4bb94),new x(_0xc4bb94);}}async[a0_0x34b2dc(0x623)](_0xa7c0b0){const _0x25dd62=a0_0x34b2dc;try{if(_0xa7c0b0['restrict']===!0x0&&await this[_0x25dd62(0x45a)]['groupSettingUpdate'](_0xa7c0b0[_0x25dd62(0x554)],_0x25dd62(0x869)),_0xa7c0b0[_0x25dd62(0x28e)]===!0x1&&await this[_0x25dd62(0x45a)][_0x25dd62(0x933)](_0xa7c0b0[_0x25dd62(0x554)],_0x25dd62(0x325)),_0xa7c0b0[_0x25dd62(0x6a7)]===!0x0&&await this[_0x25dd62(0x45a)][_0x25dd62(0x933)](_0xa7c0b0[_0x25dd62(0x554)],_0x25dd62(0x5e5)),_0xa7c0b0[_0x25dd62(0x6a7)]===!0x1&&await this[_0x25dd62(0x45a)][_0x25dd62(0x933)](_0xa7c0b0[_0x25dd62(0x554)],_0x25dd62(0x744)),_0xa7c0b0[_0x25dd62(0x4b0)]===!0x0&&await this['client'][_0x25dd62(0x3fd)](_0xa7c0b0[_0x25dd62(0x554)],_0x25dd62(0x511)),_0xa7c0b0['memberAddMode']===!0x1&&await this[_0x25dd62(0x45a)]['groupMemberAddMode'](_0xa7c0b0[_0x25dd62(0x554)],_0x25dd62(0x630)),_0xa7c0b0[_0x25dd62(0x745)]===!0x0&&await this['client'][_0x25dd62(0x500)](_0xa7c0b0[_0x25dd62(0x554)],'on'),_0xa7c0b0['joinApprovalMode']===!0x1&&await this[_0x25dd62(0x45a)][_0x25dd62(0x500)](_0xa7c0b0[_0x25dd62(0x554)],_0x25dd62(0x36b)),typeof _0xa7c0b0[_0x25dd62(0x682)]<'u'&&_0xa7c0b0[_0x25dd62(0x682)]!==null&&await this[_0x25dd62(0x45a)][_0x25dd62(0x3f4)](_0xa7c0b0[_0x25dd62(0x554)],_0xa7c0b0[_0x25dd62(0x682)]),_0xa7c0b0[_0x25dd62(0x673)]&&await this[_0x25dd62(0x45a)][_0x25dd62(0x6f9)](_0xa7c0b0[_0x25dd62(0x554)],_0xa7c0b0[_0x25dd62(0x673)]),_0xa7c0b0[_0x25dd62(0x691)]&&await this[_0x25dd62(0x45a)][_0x25dd62(0x2b9)](_0xa7c0b0[_0x25dd62(0x554)],_0xa7c0b0['description']),_0xa7c0b0['image']){let _0x41a271;if((0x0,L['isURL'])(_0xa7c0b0[_0x25dd62(0x539)])){let _0xbc76c2=new Date()['getTime'](),_0x1eab05=_0xa7c0b0[_0x25dd62(0x539)]+_0x25dd62(0x78a)+_0xbc76c2;_0x41a271=(await te[_0x25dd62(0x62c)][_0x25dd62(0x30a)](_0x1eab05,{'responseType':_0x25dd62(0x78c)}))[_0x25dd62(0x6a3)];}else{if((0x0,L[_0x25dd62(0x919)])(_0xa7c0b0[_0x25dd62(0x539)]))_0x41a271=Buffer[_0x25dd62(0x77b)](_0xa7c0b0[_0x25dd62(0x539)],_0x25dd62(0x616));else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}await this['client'][_0x25dd62(0x44e)](_0xa7c0b0[_0x25dd62(0x554)],_0x41a271);}return await this['findGroup']({'groupJid':_0xa7c0b0[_0x25dd62(0x554)]});}catch(_0x37afcd){let _0x312647=_0x25dd62(0x5de),_0x4f5d6f=_0x37afcd instanceof Error?_0x37afcd[_0x25dd62(0x5ce)]:typeof _0x37afcd==_0x25dd62(0x89b)?JSON[_0x25dd62(0x43f)](_0x37afcd):_0x37afcd,_0x4259f4=_0x312647+':\x20'+_0x4f5d6f;throw this[_0x25dd62(0x3cb)][_0x25dd62(0x651)](this[_0x25dd62(0x402)]+'\x20('+this[_0x25dd62(0x770)][_0x25dd62(0x808)]+'):\x20'+_0x4259f4),new x(_0x4259f4);}}async[a0_0x34b2dc(0x7d8)](_0x3ba03c){const _0x2ec796=a0_0x34b2dc;try{if(_0x3ba03c['action']===_0x2ec796(0x30b)||_0x3ba03c[_0x2ec796(0x6ff)]==='reject'){let _0x20fdf8=_0x3ba03c[_0x2ec796(0x570)][_0x2ec796(0x790)](_0x1f28fb=>this[_0x2ec796(0x6ea)](_0x1f28fb));await this[_0x2ec796(0x45a)][_0x2ec796(0x1f8)](_0x3ba03c['groupJid'],_0x20fdf8,_0x3ba03c['action']);}else{if(_0x3ba03c[_0x2ec796(0x6ff)]===_0x2ec796(0x420)){let _0x4422df=(await this[_0x2ec796(0x70c)]({'numbers':_0x3ba03c[_0x2ec796(0x570)]}))[_0x2ec796(0x334)](_0x8c7ee8=>_0x8c7ee8[_0x2ec796(0x22e)])[_0x2ec796(0x790)](_0x2eaf26=>this[_0x2ec796(0x6ea)](_0x2eaf26[_0x2ec796(0x5f0)]));if(_0x4422df[_0x2ec796(0x3a3)]===0x0)throw new m('Nenhum\x20participante\x20válido\x20encontrado.');await this[_0x2ec796(0x45a)][_0x2ec796(0x8bc)](_0x3ba03c[_0x2ec796(0x554)],_0x4422df,_0x2ec796(0x420));}else{let _0x33a547=_0x3ba03c[_0x2ec796(0x570)]['map'](_0x3dd035=>this[_0x2ec796(0x6ea)](_0x3dd035));await this['client'][_0x2ec796(0x8bc)](_0x3ba03c[_0x2ec796(0x554)],_0x33a547,_0x3ba03c[_0x2ec796(0x6ff)]);}}return await this[_0x2ec796(0x8e5)]({'groupJid':_0x3ba03c['groupJid']});}catch(_0xb0ccef){let _0x45545e=_0x2ec796(0x2d2),_0x470bac=_0xb0ccef instanceof Error?_0xb0ccef[_0x2ec796(0x5ce)]:typeof _0xb0ccef=='object'?JSON[_0x2ec796(0x43f)](_0xb0ccef):_0xb0ccef,_0x3ee25e=_0x45545e+':\x20'+_0x470bac;throw this[_0x2ec796(0x3cb)][_0x2ec796(0x651)](this[_0x2ec796(0x402)]+'\x20('+this[_0x2ec796(0x770)][_0x2ec796(0x808)]+'):\x20'+_0x3ee25e),new m(_0x3ee25e);}}async[a0_0x34b2dc(0x29b)](_0x2cf5d5){const _0x3e6c33=a0_0x34b2dc;try{return await this['client']['groupGetInviteInfo'](_0x2cf5d5[_0x3e6c33(0x2cc)]);}catch(_0xebed1d){let _0x447ef7='Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo',_0x14c6b2=_0xebed1d instanceof Error?_0xebed1d['message']:typeof _0xebed1d==_0x3e6c33(0x89b)?JSON[_0x3e6c33(0x43f)](_0xebed1d):_0xebed1d,_0x455d32=_0x447ef7+':\x20'+_0x14c6b2;throw this['logger'][_0x3e6c33(0x651)](this[_0x3e6c33(0x402)]+'\x20('+this['instance'][_0x3e6c33(0x808)]+_0x3e6c33(0x4b7)+_0x455d32),new m(_0x455d32);}}async['findGroup'](_0x26f4c0,_0x286894=a0_0x34b2dc(0x470)){const _0x33b79f=a0_0x34b2dc;try{let _0x200e7a=await this['repository']['chat']['findOne']({'where':{'_id':_0x26f4c0[_0x33b79f(0x554)]}},this[_0x33b79f(0x770)][_0x33b79f(0x808)]),_0x3a4778=_0x200e7a?_0x200e7a['groupdata']:null,_0x4cc77d=0x18*0x3c*0x3c*0x3e8;if(!_0x3a4778||_0x3a4778[_0x33b79f(0x5d5)]&&Date[_0x33b79f(0x880)]()-_0x3a4778[_0x33b79f(0x5d5)]>_0x4cc77d){let _0x3e4832=await this[_0x33b79f(0x45a)][_0x33b79f(0x4d5)](_0x26f4c0[_0x33b79f(0x554)]);if(_0x3e4832[_0x33b79f(0x204)]=_0x3e4832?.[_0x33b79f(0x204)]&&_0x3e4832[_0x33b79f(0x204)][_0x33b79f(0x1fe)]()['length']<0xd?_0x3e4832?.[_0x33b79f(0x204)]*0x3e8:_0x3e4832?.[_0x33b79f(0x204)]||null,_0x3e4832['creation']=_0x3e4832?.[_0x33b79f(0x67e)]&&_0x3e4832[_0x33b79f(0x67e)][_0x33b79f(0x1fe)]()[_0x33b79f(0x3a3)]<0xd?_0x3e4832?.[_0x33b79f(0x67e)]*0x3e8:_0x3e4832?.['creation']||null,_0x3a4778={..._0x3e4832,'lastUpdate':Date['now']()},!_0x3e4832)return;}let _0x32e0ec=_0x3a4778['participants'][_0x33b79f(0x74b)](_0x3e3155=>_0x3e3155['id']===this[_0x33b79f(0x770)][_0x33b79f(0x808)]+_0x33b79f(0x831)&&_0x3e3155[_0x33b79f(0x2dd)]!=null);!_0x3a4778[_0x33b79f(0x2cc)]&&_0x32e0ec&&(_0x3a4778[_0x33b79f(0x2cc)]=(await this[_0x33b79f(0x2cc)](_0x26f4c0,!0x1))['inviteUrl']);let _0x567068=(!_0x3a4778[_0x33b79f(0x6a7)]||_0x32e0ec)&&(!_0x3a4778['isCommunity']||_0x3a4778[_0x33b79f(0x6fb)]&&_0x3a4778['isCommunityAnnounce']&&_0x32e0ec);_0x3a4778[_0x33b79f(0x845)]=_0x32e0ec,_0x3a4778[_0x33b79f(0x522)]=_0x567068;let _0x22e880=[];if(_0x32e0ec&&_0x3a4778[_0x33b79f(0x745)])try{_0x22e880=await this[_0x33b79f(0x45a)][_0x33b79f(0x274)](_0x26f4c0[_0x33b79f(0x554)]),_0x3a4778[_0x33b79f(0x714)]=Date[_0x33b79f(0x880)]();}catch(_0x1a3386){this[_0x33b79f(0x3cb)]['verbose'](this['instanceName']+'\x20('+this[_0x33b79f(0x770)]['wuid']+_0x33b79f(0x87a)+_0x26f4c0[_0x33b79f(0x554)]+':\x20'+(_0x1a3386 instanceof Error?_0x1a3386['message']:JSON[_0x33b79f(0x43f)](_0x1a3386,null,0x2)));}try{_0x3a4778[_0x33b79f(0x539)]=(await this[_0x33b79f(0x86c)](_0x26f4c0[_0x33b79f(0x554)],null,!0x0))['cachedContact'][_0x33b79f(0x209)];}catch(_0x561dc0){this[_0x33b79f(0x3cb)][_0x33b79f(0x798)](this[_0x33b79f(0x402)]+'\x20('+this[_0x33b79f(0x770)][_0x33b79f(0x808)]+_0x33b79f(0x5fa)+_0x26f4c0['groupJid']+':\x20'+(_0x561dc0 instanceof Error?_0x561dc0[_0x33b79f(0x5ce)]:JSON['stringify'](_0x561dc0,null,0x2)));}let _0x12532f=_0x3a4778[_0x33b79f(0x570)][_0x33b79f(0x790)](_0xb8d7e8=>_0xb8d7e8['id']),_0x359a5d=_0x22e880['map'](_0x351bb0=>_0x351bb0[_0x33b79f(0x5f0)]),_0x2f199c=await this['repository'][_0x33b79f(0x6e1)][_0x33b79f(0x839)]([..._0x12532f,..._0x359a5d]);_0x3a4778[_0x33b79f(0x570)]=_0x3a4778[_0x33b79f(0x570)][_0x33b79f(0x790)](_0x31248b=>{const _0x2a990a=_0x33b79f;let _0x508071=_0x2f199c[_0x2a990a(0x253)](_0x453f1d=>_0x453f1d[_0x2a990a(0x2c7)]===_0x31248b['id']);return{'id':_0x31248b['id'],'isAdmin':['admin',_0x2a990a(0x578)][_0x2a990a(0x4c4)](_0x31248b[_0x2a990a(0x2dd)]),'admin':_0x31248b[_0x2a990a(0x2dd)],'pushName':_0x508071?.[_0x2a990a(0x673)],'profilePictureUrl':_0x508071?.[_0x2a990a(0x209)]};}),_0x3a4778[_0x33b79f(0x380)]=_0x22e880['map'](_0x490854=>{const _0xafaabb=_0x33b79f;let _0x43f6f4=_0x2f199c[_0xafaabb(0x253)](_0x29baf6=>_0x29baf6[_0xafaabb(0x2c7)]===_0x490854[_0xafaabb(0x5f0)]);return{'id':_0x490854[_0xafaabb(0x5f0)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x43f6f4?.[_0xafaabb(0x673)],'profilePictureUrl':_0x43f6f4?.['pictureUrl'],'request_method':_0x490854[_0xafaabb(0x57d)],'request_time':_0x490854[_0xafaabb(0x605)]};});let _0x3a5031=await this[_0x33b79f(0x261)][_0x33b79f(0x89d)]['updateOne']({'where':{'_id':_0x26f4c0['groupJid']}},{'imagechat':_0x3a4778[_0x33b79f(0x539)],'name':_0x3a4778[_0x33b79f(0x256)],'lastcache':Date[_0x33b79f(0x880)](),'groupdata':_0x3a4778},this[_0x33b79f(0x770)][_0x33b79f(0x808)]);return q(this[_0x33b79f(0x402)],_0x33b79f(0x88b),{'chat':_0x3a5031}),{'metadata':_0x3a4778};}catch(_0x49f065){if(_0x286894===_0x33b79f(0x71b))return;throw new J(_0x33b79f(0x901),_0x49f065['message']['toString']());}}async[a0_0x34b2dc(0x32c)](){const _0x53fce6=a0_0x34b2dc;try{this[_0x53fce6(0x3cb)][_0x53fce6(0x5df)]('Retornando\x20grupos\x20COM\x20cache');let _0xa12727=Date[_0x53fce6(0x880)](),_0x42686d=0x3*0x3c*0x3c*0x3e8;return _0xa12727-this[_0x53fce6(0x857)]>_0x42686d&&(this['findRealGroups'](),this[_0x53fce6(0x857)]=_0xa12727),(await this[_0x53fce6(0x261)][_0x53fce6(0x89d)][_0x53fce6(0x86d)]({'where':{'group':!0x0}},this[_0x53fce6(0x770)][_0x53fce6(0x808)]))['map'](_0x2f9302=>({..._0x2f9302['groupdata'],'groupJid':_0x2f9302?.[_0x53fce6(0x2c7)],'participants':_0x2f9302?.[_0x53fce6(0x7a6)]?.[_0x53fce6(0x570)]||[],'awaitingApproval':_0x2f9302?.[_0x53fce6(0x7a6)]?.[_0x53fce6(0x380)]||[],'image':_0x2f9302?.[_0x53fce6(0x28d)]}));}catch(_0x3ef807){let _0x2ad599=_0x53fce6(0x54e),_0x41a8d8=_0x3ef807 instanceof Error?_0x3ef807[_0x53fce6(0x5ce)]:typeof _0x3ef807=='object'?JSON['stringify'](_0x3ef807):_0x3ef807,_0xe67be5=_0x2ad599+':\x20'+_0x41a8d8;throw this[_0x53fce6(0x3cb)][_0x53fce6(0x651)](this[_0x53fce6(0x402)]+'\x20('+this[_0x53fce6(0x770)][_0x53fce6(0x808)]+'):\x20'+_0xe67be5),new J(_0xe67be5);}}async[a0_0x34b2dc(0x514)](){const _0x21a7a0=a0_0x34b2dc;try{this[_0x21a7a0(0x3cb)][_0x21a7a0(0x5df)](_0x21a7a0(0x8e2));let _0x2bb522=[],_0x31b53e=await this[_0x21a7a0(0x45a)][_0x21a7a0(0x59d)](),_0x471ffb=Object['values'](_0x31b53e),_0x57720b=_0x471ffb[_0x21a7a0(0x334)](_0x3c397d=>(0x0,w[_0x21a7a0(0x6bd)])(_0x3c397d?.['id']))[_0x21a7a0(0x790)](async _0x42ebc6=>{const _0x4dc360=_0x21a7a0;try{return await this[_0x4dc360(0x45a)]['profilePictureUrl'](_0x42ebc6['id'],_0x4dc360(0x689));}catch(_0x5eb974){return this[_0x4dc360(0x3cb)]['verbose'](this[_0x4dc360(0x402)]+'\x20('+this[_0x4dc360(0x770)][_0x4dc360(0x808)]+'):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20'+_0x42ebc6['id']+':\x20'+(_0x5eb974 instanceof Error?_0x5eb974['message']:JSON[_0x4dc360(0x43f)](_0x5eb974,null,0x2))),null;}}),_0x457f7b=await Promise['all'](_0x57720b);for(let _0x295f30=0x0;_0x295f30<_0x471ffb[_0x21a7a0(0x3a3)];_0x295f30++){let _0x2fe8da=_0x471ffb[_0x295f30];(0x0,w['isJidGroup'])(_0x2fe8da?.['id'])&&(_0x2bb522[_0x21a7a0(0x26d)]({'groupJid':_0x2fe8da?.['id'],'subject':_0x2fe8da?.['subject'],'subjectOwner':_0x2fe8da?.[_0x21a7a0(0x21a)]?.[_0x21a7a0(0x292)]('@')[0x0],'subjectTime':_0x2fe8da?.['subjectTime'],'creation':_0x2fe8da?.[_0x21a7a0(0x67e)],'size':_0x2fe8da?.[_0x21a7a0(0x570)]?.[_0x21a7a0(0x3a3)],'owner':_0x2fe8da?.[_0x21a7a0(0x56c)]?.[_0x21a7a0(0x292)]('@')[0x0],'desc':_0x2fe8da?.['desc'],'restrict':_0x2fe8da?.[_0x21a7a0(0x28e)],'announce':_0x2fe8da?.[_0x21a7a0(0x6a7)],'image':_0x457f7b[_0x295f30],'isCommunity':_0x2fe8da?.['isCommunity'],'joinApprovalMode':_0x2fe8da?.[_0x21a7a0(0x745)],'memberCanAddParticipant':_0x2fe8da?.[_0x21a7a0(0x4b0)],'participants':_0x2fe8da?.[_0x21a7a0(0x570)],'descOwner':_0x2fe8da?.['descOwner'],'descId':_0x2fe8da?.[_0x21a7a0(0x2a7)],'memberAddMode':_0x2fe8da?.[_0x21a7a0(0x4b0)],'isCommunityAnnounce':_0x2fe8da?.[_0x21a7a0(0x227)],'ephemeralDuration':_0x2fe8da?.[_0x21a7a0(0x235)]||0x0,'author':_0x2fe8da?.[_0x21a7a0(0x7bd)]}),this[_0x21a7a0(0x736)](_0x471ffb[_0x295f30]));}return _0x2bb522;}catch(_0x1752bf){let _0x70fcc3=_0x21a7a0(0x590),_0x121625=_0x1752bf instanceof Error?_0x1752bf['message']:typeof _0x1752bf==_0x21a7a0(0x89b)?JSON[_0x21a7a0(0x43f)](_0x1752bf):_0x1752bf,_0x4768f4=_0x70fcc3+':\x20'+_0x121625;throw this[_0x21a7a0(0x3cb)]['error'](this[_0x21a7a0(0x402)]+'\x20('+this['instance'][_0x21a7a0(0x808)]+'):\x20'+_0x4768f4),new J(_0x4768f4);}}async['updateChatGroupData'](_0x22f8fb){const _0x57c6c6=a0_0x34b2dc;let _0x2fda68=await this[_0x57c6c6(0x261)]['chat'][_0x57c6c6(0x440)]({'where':{'_id':_0x22f8fb['id']}},this[_0x57c6c6(0x770)]['wuid']);_0x22f8fb['subjectTime']=_0x22f8fb?.['subjectTime']&&_0x22f8fb['subjectTime'][_0x57c6c6(0x1fe)]()['length']<0xd?_0x22f8fb?.['subjectTime']*0x3e8:_0x22f8fb?.[_0x57c6c6(0x204)]||null,_0x22f8fb['creation']=_0x22f8fb?.[_0x57c6c6(0x67e)]&&_0x22f8fb['creation'][_0x57c6c6(0x1fe)]()['length']<0xd?_0x22f8fb?.[_0x57c6c6(0x67e)]*0x3e8:_0x22f8fb?.['creation']||null;let _0x515961=_0x2fda68?.['groupdata']?.[_0x57c6c6(0x380)]||[],_0x1a7a5f=_0x2fda68?.[_0x57c6c6(0x7a6)]?.[_0x57c6c6(0x714)],_0x34ec72=_0x22f8fb[_0x57c6c6(0x570)][_0x57c6c6(0x790)](_0x1ac785=>{const _0x2cb79f=_0x57c6c6;let _0x2a5486=_0x2fda68?.[_0x2cb79f(0x7a6)]?.['participants']['find'](_0x464bc1=>_0x464bc1['id']===_0x1ac785['id']);return{..._0x1ac785,'isAdmin':[_0x2cb79f(0x2dd),'superadmin'][_0x2cb79f(0x4c4)](_0x1ac785[_0x2cb79f(0x2dd)]),'admin':_0x1ac785['admin'],'name':_0x2a5486?.[_0x2cb79f(0x673)]||_0x1ac785[_0x2cb79f(0x673)],'imgUrl':_0x2a5486?.[_0x2cb79f(0x854)]||_0x1ac785[_0x2cb79f(0x854)]};}),_0x27e2db=_0x34ec72[_0x57c6c6(0x74b)](_0x3af158=>_0x3af158['id']===this['instance'][_0x57c6c6(0x808)]+'@s.whatsapp.net'&&_0x3af158[_0x57c6c6(0x845)]),_0x3bcd6e=(!_0x22f8fb[_0x57c6c6(0x6a7)]||_0x27e2db)&&(!_0x22f8fb[_0x57c6c6(0x6fb)]||_0x22f8fb[_0x57c6c6(0x6fb)]&&_0x22f8fb['isCommunityAnnounce']&&_0x27e2db),_0x408479={..._0x22f8fb,'participants':_0x34ec72,'awaitingApproval':_0x515961,'lastFetchAwaitingApproval':_0x1a7a5f,'isAdmin':_0x27e2db,'canSendMessage':_0x3bcd6e,'lastUpdate':Date[_0x57c6c6(0x880)]()};await this[_0x57c6c6(0x261)][_0x57c6c6(0x89d)][_0x57c6c6(0x6ce)]({'where':{'_id':_0x22f8fb['id']}},{'name':_0x22f8fb[_0x57c6c6(0x256)],'group':!0x0,'groupdata':_0x408479,'lastcache':Date[_0x57c6c6(0x880)]()},this[_0x57c6c6(0x770)][_0x57c6c6(0x808)]),q(this[_0x57c6c6(0x402)],_0x57c6c6(0x88b),{'chat':_0x22f8fb});}async['updateGroupWebhook'](_0x4f5bf1){const _0x48ef6c=a0_0x34b2dc;let _0x57df19=await this[_0x48ef6c(0x261)][_0x48ef6c(0x89d)][_0x48ef6c(0x440)]({'where':{'_id':_0x4f5bf1['id']}},this[_0x48ef6c(0x770)][_0x48ef6c(0x808)]);_0x4f5bf1[_0x48ef6c(0x204)]=_0x4f5bf1?.[_0x48ef6c(0x204)]&&_0x4f5bf1[_0x48ef6c(0x204)][_0x48ef6c(0x1fe)]()[_0x48ef6c(0x3a3)]<0xd?_0x4f5bf1?.[_0x48ef6c(0x204)]*0x3e8:_0x4f5bf1?.[_0x48ef6c(0x204)]||null,_0x4f5bf1[_0x48ef6c(0x67e)]=_0x4f5bf1?.[_0x48ef6c(0x67e)]&&_0x4f5bf1[_0x48ef6c(0x67e)][_0x48ef6c(0x1fe)]()[_0x48ef6c(0x3a3)]<0xd?_0x4f5bf1?.['creation']*0x3e8:_0x4f5bf1?.[_0x48ef6c(0x67e)]||null,_0x4f5bf1['inviteCode']&&(_0x4f5bf1['inviteCode']=_0x48ef6c(0x5e1)+_0x4f5bf1[_0x48ef6c(0x2cc)]);let _0x1adfc1=_0x57df19?.[_0x48ef6c(0x7a6)]?{..._0x57df19[_0x48ef6c(0x7a6)]}:{};Object[_0x48ef6c(0x37c)](_0x4f5bf1)[_0x48ef6c(0x3f2)](_0xb8cd55=>{_0xb8cd55!=='id'&&(_0x1adfc1[_0xb8cd55]=_0x4f5bf1[_0xb8cd55]);});let _0x1f6383=_0x1adfc1[_0x48ef6c(0x570)]?.['some'](_0x3855e1=>_0x3855e1['id']===this['instance'][_0x48ef6c(0x808)]+_0x48ef6c(0x831)&&_0x3855e1[_0x48ef6c(0x845)])||!0x1;_0x1adfc1[_0x48ef6c(0x845)]=_0x1f6383;let _0xab25c0=(!_0x1adfc1[_0x48ef6c(0x6a7)]||_0x1f6383)&&(!_0x1adfc1[_0x48ef6c(0x6fb)]||_0x1adfc1[_0x48ef6c(0x6fb)]&&_0x1adfc1['isCommunityAnnounce']&&_0x1f6383);_0x1adfc1['canSendMessage']=_0xab25c0;let _0x11cf4a={'group':!0x0,'groupdata':_0x1adfc1};_0x4f5bf1['subject']&&(_0x11cf4a[_0x48ef6c(0x673)]=_0x4f5bf1['subject']),await this[_0x48ef6c(0x261)][_0x48ef6c(0x89d)][_0x48ef6c(0x6ce)]({'where':{'_id':_0x4f5bf1['id']}},_0x11cf4a,this[_0x48ef6c(0x770)][_0x48ef6c(0x808)],{'upsert':!0x0}),q(this[_0x48ef6c(0x402)],'chats',{'chat':_0x11cf4a});}async['updateGroupParticipantsWebhook'](_0x57b6b9){const _0x4e624e=a0_0x34b2dc;let _0x57e5c5=await this[_0x4e624e(0x261)][_0x4e624e(0x89d)]['findOne']({'where':{'_id':_0x57b6b9['id']}},this[_0x4e624e(0x770)]['wuid']);if(!_0x57e5c5||!_0x57e5c5[_0x4e624e(0x7a6)]){this['logger'][_0x4e624e(0x5df)](this[_0x4e624e(0x402)]+'\x20('+this[_0x4e624e(0x770)][_0x4e624e(0x808)]+_0x4e624e(0x826)+_0x57b6b9['id']);return;}let _0x573f06=await this[_0x4e624e(0x261)][_0x4e624e(0x6e1)][_0x4e624e(0x839)](_0x57b6b9[_0x4e624e(0x570)]),_0x484a8f=[..._0x57e5c5[_0x4e624e(0x7a6)]?.[_0x4e624e(0x570)]];switch(_0x57b6b9[_0x4e624e(0x6ff)]){case'add':let _0x1b8f86=_0x573f06['map'](_0x57f112=>({'id':_0x57f112[_0x4e624e(0x2c7)],'isAdmin':!0x1,'name':_0x57f112['name'],'imgUrl':_0x57f112[_0x4e624e(0x209)]}));_0x484a8f=[..._0x484a8f,..._0x1b8f86];break;case'remove':_0x484a8f=_0x484a8f['filter'](_0x12dc4b=>!_0x57b6b9[_0x4e624e(0x570)]['includes'](_0x12dc4b['id']));break;case'promote':case _0x4e624e(0x63e):_0x484a8f=_0x484a8f[_0x4e624e(0x790)](_0x38a803=>_0x57b6b9[_0x4e624e(0x570)][_0x4e624e(0x4c4)](_0x38a803['id'])?{..._0x38a803,'isAdmin':_0x57b6b9[_0x4e624e(0x6ff)]==='promote'}:_0x38a803);break;}let _0x4f0c2e=_0x484a8f[_0x4e624e(0x3a3)],_0x6f9863=_0x484a8f[_0x4e624e(0x74b)](_0x45863b=>_0x45863b['id']===this[_0x4e624e(0x770)]['wuid']+_0x4e624e(0x831)),_0x296bf4=_0x6f9863&&_0x484a8f[_0x4e624e(0x74b)](_0x36ebbd=>_0x36ebbd['id']===this[_0x4e624e(0x770)][_0x4e624e(0x808)]+_0x4e624e(0x831)&&_0x36ebbd['isAdmin']),_0x53771d=_0x6f9863&&(!_0x57e5c5[_0x4e624e(0x7a6)][_0x4e624e(0x6a7)]||_0x296bf4)&&(!_0x57e5c5[_0x4e624e(0x7a6)]['isCommunity']||_0x57e5c5[_0x4e624e(0x7a6)][_0x4e624e(0x6fb)]&&_0x296bf4);await this['repository']['chat'][_0x4e624e(0x6ce)]({'where':{'_id':_0x57b6b9['id']}},{'groupdata':{..._0x57e5c5['groupdata'],'participants':_0x484a8f,'size':_0x4f0c2e,'isAdmin':_0x296bf4,'canSendMessage':_0x53771d}},this[_0x4e624e(0x770)]['wuid']),this[_0x4e624e(0x3cb)][_0x4e624e(0x5df)](this[_0x4e624e(0x402)]+'\x20('+this[_0x4e624e(0x770)][_0x4e624e(0x808)]+_0x4e624e(0x2bf)+_0x57b6b9['id']+_0x4e624e(0x1f3)+_0x57b6b9['action']+_0x4e624e(0x5b9)+_0x4f0c2e+_0x4e624e(0x343)+_0x296bf4+_0x4e624e(0x2b2)+_0x53771d);}async[a0_0x34b2dc(0x2cc)](_0x4bdc2e,_0x3c5bf7=!0x0){const _0x469dac=a0_0x34b2dc;try{let _0x2e8f5f=await this[_0x469dac(0x45a)][_0x469dac(0x338)](_0x4bdc2e[_0x469dac(0x554)]),_0x5b9abf={'groupdata.inviteCode':'https://chat.whatsapp.com/'+_0x2e8f5f};if(_0x3c5bf7){let _0x1c5546=await this[_0x469dac(0x261)][_0x469dac(0x89d)]['updateOne']({'where':{'_id':_0x4bdc2e['groupJid']}},_0x5b9abf,this[_0x469dac(0x770)][_0x469dac(0x808)]);}return{'inviteUrl':_0x469dac(0x5e1)+_0x2e8f5f,'inviteCode':_0x2e8f5f};}catch(_0x40d330){let _0x18e776=_0x469dac(0x41e),_0xe95b67=_0x40d330 instanceof Error?_0x40d330['message']:typeof _0x40d330=='object'?JSON[_0x469dac(0x43f)](_0x40d330):_0x40d330,_0x558fc1=_0x18e776+':\x20'+_0xe95b67;throw this[_0x469dac(0x3cb)][_0x469dac(0x651)](this[_0x469dac(0x402)]+'\x20('+this[_0x469dac(0x770)][_0x469dac(0x808)]+_0x469dac(0x4b7)+_0x558fc1),new J(_0x558fc1);}}async[a0_0x34b2dc(0x243)](_0x8f6dc5){const _0x40aaa8=a0_0x34b2dc;try{let _0x2a351c=await this[_0x40aaa8(0x45a)][_0x40aaa8(0x7af)](_0x8f6dc5['groupJid']);return{'revoked':!0x0,'inviteUrl':_0x40aaa8(0x5e1)+_0x2a351c,'inviteCode':_0x2a351c};}catch(_0x5cff84){let _0x134d67=_0x40aaa8(0x3c0),_0x48bbb0=_0x5cff84 instanceof Error?_0x5cff84['message']:typeof _0x5cff84==_0x40aaa8(0x89b)?JSON[_0x40aaa8(0x43f)](_0x5cff84):_0x5cff84,_0x4c45e=_0x134d67+':\x20'+_0x48bbb0;throw this[_0x40aaa8(0x3cb)]['error'](this[_0x40aaa8(0x402)]+'\x20('+this['instance']['wuid']+_0x40aaa8(0x4b7)+_0x4c45e),new J(_0x4c45e);}}async['joinGroup'](_0x3d851d){const _0x44dd18=a0_0x34b2dc;try{if((0x0,L[_0x44dd18(0x525)])(_0x3d851d['inviteCode']))var _0x313bb8=_0x3d851d['inviteCode'][_0x44dd18(0x292)]('/')[0x3];else var _0x313bb8=_0x3d851d[_0x44dd18(0x2cc)];let _0x59423d=await this[_0x44dd18(0x45a)][_0x44dd18(0x28a)](_0x313bb8);return this['logger']['verbose'](this[_0x44dd18(0x402)]+'\x20('+this[_0x44dd18(0x770)]['wuid']+_0x44dd18(0x4b7)+_0x59423d),{'join':!0x0,'inviteCode':_0x313bb8,'groupJid':_0x59423d};}catch(_0x267156){let _0x58f907=_0x44dd18(0x814),_0x313f27=_0x267156 instanceof Error?_0x267156[_0x44dd18(0x5ce)]:typeof _0x267156==_0x44dd18(0x89b)?JSON['stringify'](_0x267156):_0x267156,_0x237e02=_0x58f907+':\x20'+_0x313f27;throw this[_0x44dd18(0x3cb)][_0x44dd18(0x651)](this[_0x44dd18(0x402)]+'\x20('+this[_0x44dd18(0x770)][_0x44dd18(0x808)]+_0x44dd18(0x4b7)+_0x237e02),new J(_0x237e02);}}async[a0_0x34b2dc(0x88f)](_0x503520){const _0x23531d=a0_0x34b2dc;try{return{'participants':(await this[_0x23531d(0x261)][_0x23531d(0x89d)][_0x23531d(0x440)]({'where':{'_id':_0x503520['groupJid']}},this[_0x23531d(0x770)]['wuid']))['groupdata'][_0x23531d(0x570)]};}catch(_0x320cc4){let _0x10c0fa='Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants',_0x466679=_0x320cc4 instanceof Error?_0x320cc4[_0x23531d(0x5ce)]:typeof _0x320cc4==_0x23531d(0x89b)?JSON['stringify'](_0x320cc4):_0x320cc4,_0x45dc33=_0x10c0fa+':\x20'+_0x466679;throw this[_0x23531d(0x3cb)]['error'](this[_0x23531d(0x402)]+'\x20('+this['instance'][_0x23531d(0x808)]+'):\x20'+_0x45dc33),new J(_0x45dc33);}}async['leaveGroup'](_0x58b666){const _0x39c5f0=a0_0x34b2dc;try{return await this[_0x39c5f0(0x45a)][_0x39c5f0(0x552)](_0x58b666[_0x39c5f0(0x554)]),{'groupJid':_0x58b666[_0x39c5f0(0x554)],'leave':!0x0};}catch(_0x383764){let _0x48dc7a=_0x39c5f0(0x3ce),_0x1ad346=_0x383764 instanceof Error?_0x383764[_0x39c5f0(0x5ce)]:typeof _0x383764=='object'?JSON[_0x39c5f0(0x43f)](_0x383764):_0x383764,_0x3c4e9b=_0x48dc7a+':\x20'+_0x1ad346;throw this['logger']['error'](this[_0x39c5f0(0x402)]+'\x20('+this[_0x39c5f0(0x770)][_0x39c5f0(0x808)]+_0x39c5f0(0x4b7)+_0x3c4e9b),new m(_0x3c4e9b);}}async['pollMessage'](_0x23780a){const _0x1c8788=a0_0x34b2dc;return await this[_0x1c8788(0x7a0)](_0x23780a['number'],{'poll':{'name':_0x23780a[_0x1c8788(0x6d8)]?.[_0x1c8788(0x673)],'selectableCount':_0x23780a[_0x1c8788(0x6d8)]['selectableCount'],'values':_0x23780a[_0x1c8788(0x6d8)]['values']}},_0x23780a?.[_0x1c8788(0x812)]);}async[a0_0x34b2dc(0x680)](_0x56a979){const _0x27a38e=a0_0x34b2dc;return await this[_0x27a38e(0x7a0)](_0x56a979[_0x27a38e(0x51e)],{'listMessage':{'title':_0x56a979['listMessage'][_0x27a38e(0x1f9)],'description':_0x56a979[_0x27a38e(0x680)][_0x27a38e(0x691)],'buttonText':_0x56a979[_0x27a38e(0x680)]?.[_0x27a38e(0x23d)],'footerText':_0x56a979[_0x27a38e(0x680)]?.[_0x27a38e(0x78e)],'sections':_0x56a979[_0x27a38e(0x680)][_0x27a38e(0x517)],'listType':0x2}},_0x56a979?.[_0x27a38e(0x812)]);}async[a0_0x34b2dc(0x444)](_0x350104){const _0x27c267=a0_0x34b2dc;let _0x199937;if(_0x350104[_0x27c267(0x444)][_0x27c267(0x248)]==='list'){let _0x48fe3b=_0x350104['menuMessage'][_0x27c267(0x6b6)]['indexOf']('\x0a'),_0x3875f0='',_0x50116f='';_0x48fe3b!==-0x1?(_0x3875f0=_0x350104[_0x27c267(0x444)][_0x27c267(0x6b6)][_0x27c267(0x374)](0x0,_0x48fe3b)[_0x27c267(0x3b8)](),_0x50116f=_0x350104['menuMessage']['text'][_0x27c267(0x374)](_0x48fe3b+0x1)):_0x50116f=_0x350104['menuMessage'][_0x27c267(0x6b6)];let _0x317b97=_0x350104[_0x27c267(0x444)][_0x27c267(0x782)][_0x27c267(0x334)](_0x424e45=>_0x424e45['trim']()!==''),_0x1783b1=this['createSectionsFromValues'](_0x317b97);_0x199937={'listMessage':{'title':_0x3875f0,'description':_0x50116f,'buttonText':_0x350104['menuMessage'][_0x27c267(0x23d)]||'Selecione','footerText':_0x350104[_0x27c267(0x444)]['footerText'],'sections':_0x1783b1,'listType':0x2}};}else{if(_0x350104[_0x27c267(0x444)]['type']===_0x27c267(0x787)){let _0x256420=_0x350104['menuMessage']['choices']['filter'](_0x21bc16=>!(_0x21bc16[_0x27c267(0x442)]('[')&&_0x21bc16[_0x27c267(0x5b1)](']'))&&_0x21bc16[_0x27c267(0x3b8)]()!=='')[_0x27c267(0x790)](_0x2e8212=>_0x2e8212[_0x27c267(0x292)]('\x0a')[0x0]);_0x199937={'poll':{'name':_0x350104[_0x27c267(0x444)][_0x27c267(0x6b6)],'selectableCount':_0x350104['menuMessage'][_0x27c267(0x585)]||0x1,'values':_0x256420}};}}return await this[_0x27c267(0x7a0)](_0x350104['number'],_0x199937,_0x350104?.[_0x27c267(0x812)]);}[a0_0x34b2dc(0x20b)](_0x35fad4){const _0x2d5918=a0_0x34b2dc;let _0x4c118a=[],_0x24e8cc={'rows':[]};return _0x35fad4[_0x2d5918(0x3f2)](_0xf715f1=>{const _0x589c6d=_0x2d5918;if(_0xf715f1[_0x589c6d(0x442)]('[')&&_0xf715f1[_0x589c6d(0x5b1)](']'))_0x24e8cc[_0x589c6d(0x424)][_0x589c6d(0x3a3)]>0x0&&_0x4c118a[_0x589c6d(0x26d)](_0x24e8cc),_0x24e8cc={'title':_0xf715f1[_0x589c6d(0x4be)](0x1,-0x1),'rows':[]};else{let _0x27c1df=_0xf715f1[_0x589c6d(0x292)]('\x0a')[_0x589c6d(0x790)](_0x545a40=>_0x545a40['trim']()),_0xafb760=_0x27c1df[0x0],_0x3a4c0c=_0x27c1df[0x1]||null,_0x57f972=_0x27c1df[0x2]||_0xafb760;_0x24e8cc[_0x589c6d(0x424)][_0x589c6d(0x26d)]({'title':_0xafb760,'description':_0x3a4c0c,'rowId':_0x57f972});}}),_0x24e8cc['rows'][_0x2d5918(0x3a3)]>0x0&&_0x4c118a['push'](_0x24e8cc),_0x4c118a;}async[a0_0x34b2dc(0x4d8)](_0x55c642,_0x126f28){const _0x21dea9=a0_0x34b2dc;if(await this[_0x21dea9(0x3ea)](_0x55c642,!0x0)){let _0x1372b7={'where':{'_id':_0x55c642['id']}},_0x2827c7={'status':[_0x126f28[_0x21dea9(0x71c)]][0x0]};try{let _0x2eaa30=await this[_0x21dea9(0x261)]['message'][_0x21dea9(0x78f)](_0x1372b7,_0x2827c7,this[_0x21dea9(0x770)]['wuid']);_0x2eaa30&&q(this[_0x21dea9(0x402)],_0x21dea9(0x591),{'message':_0x2eaa30});}catch{}}}['sectionsToString'](_0x5dfd11){const _0x354d89=a0_0x34b2dc;let _0x4ff2f5=[];return _0x5dfd11['forEach'](_0xde6b68=>{const _0x3c8637=a0_0x15dd;_0xde6b68[_0x3c8637(0x1f9)]&&_0x4ff2f5['push']('['+_0xde6b68['title']+']'),_0xde6b68[_0x3c8637(0x424)]['forEach'](_0x32155b=>{const _0xf1fd15=_0x3c8637;_0x4ff2f5[_0xf1fd15(0x26d)](_0x32155b[_0xf1fd15(0x1f9)]);});}),_0x4ff2f5[_0x354d89(0x3c9)]('|');}[a0_0x34b2dc(0x350)](_0x3547fe){const _0x4f5d03=a0_0x34b2dc;let _0x3b0c70=_0x3547fe['replace'](/\\n/g,'\x0a')[_0x4f5d03(0x292)]('\x0a')[_0x4f5d03(0x334)](_0xc8025a=>_0xc8025a['includes'](_0x4f5d03(0x5a4))||_0xc8025a[_0x4f5d03(0x4c4)]('EMAIL')),_0x31c58b='';return _0x3b0c70[_0x4f5d03(0x3f2)](_0x200cb5=>{const _0x342a7f=_0x4f5d03;let _0x1d3f3a=/TEL(?:.*):(.+)/,_0x1e23cd=/EMAIL(?:.*):(.+)/,_0x1f2bb7=_0x200cb5[_0x342a7f(0x52f)](_0x1d3f3a),_0x6a02c9=_0x200cb5[_0x342a7f(0x52f)](_0x1e23cd);if(_0x1f2bb7){let _0x4e8f63=_0x1f2bb7[0x1]['replace'](/-| |\+|\(|\)/g,'')['trim']();_0x31c58b+=_0x342a7f(0x4a5)+_0x4e8f63+'\x0a';}else{if(_0x6a02c9){let _0x5f3191=_0x6a02c9[0x1][_0x342a7f(0x3b8)]();_0x31c58b+=_0x342a7f(0x6b8)+_0x5f3191+'\x0a';}}}),_0x31c58b[_0x4f5d03(0x3b8)]();}async['updateChatWithMessage'](_0x20171f,_0xf63895,_0x34605e,_0x5d8f7e=null){const _0x2a8a09=a0_0x34b2dc;if(_0x20171f[_0x2a8a09(0x33c)])try{let _0x35dac7=_0xf63895[_0x2a8a09(0x85f)][_0x2a8a09(0x668)][_0x2a8a09(0x2a1)](/:\d{1,2}@/g,'@'),_0xb5f68b=_0xf63895[_0x2a8a09(0x85f)][_0x2a8a09(0x464)],_0x96f7d1=_0x35dac7[_0x2a8a09(0x5b1)]('@g.us'),_0x41c043=_0xf63895['participant']?.[_0x2a8a09(0x2a1)](/:\d{1,2}@/g,'@')||'',_0x20b659=_0xf63895[_0x2a8a09(0x3b7)]?.['text']||_0xf63895[_0x2a8a09(0x3b7)]?.[_0x2a8a09(0x39d)]||_0xf63895[_0x2a8a09(0x3b7)]?.[_0x2a8a09(0x77c)]||_0xf63895[_0x2a8a09(0x3b7)]?.['name']||'',_0x4695f8={'_id':_0xf63895[_0x2a8a09(0x2c7)],'remoteJid':_0xb5f68b?this[_0x2a8a09(0x770)]['wuid']:_0x96f7d1?_0x41c043:_0x35dac7,'pushName':_0xb5f68b?this[_0x2a8a09(0x770)][_0x2a8a09(0x752)]||'Eu':_0xf63895['pushName'],'text':_0x20b659,'type':_0xf63895[_0x2a8a09(0x32e)],'when':_0xf63895['messageTimestamp']||Date[_0x2a8a09(0x880)]()};_0x5d8f7e||(_0x5d8f7e=await this[_0x2a8a09(0x261)][_0x2a8a09(0x89d)][_0x2a8a09(0x440)]({'where':{'_id':_0x35dac7}},this['instance'][_0x2a8a09(0x808)]));let _0x5afb2a=_0x5d8f7e?_0xb5f68b?_0x5d8f7e[_0x2a8a09(0x24f)]:(_0x5d8f7e['unreadcount']||0x0)+0x1:_0xb5f68b?0x0:0x1,_0x3aca3d={'lastmsg':_0xf63895[_0x2a8a09(0x912)]||Date['now'](),'ephemeralExpiration':_0xf63895['expiration'],'lastMessage':_0x4695f8,'unreadcount':_0x5afb2a,..._0xb5f68b||_0x96f7d1?{}:{'name':_0xf63895[_0x2a8a09(0x414)]},..._0x96f7d1?{'group':_0x96f7d1}:{},...!_0xb5f68b&&!_0x96f7d1&&_0xf63895[_0x2a8a09(0x51f)]?{'imagechat':_0xf63895[_0x2a8a09(0x51f)]}:{}};if(!_0x96f7d1&&(!_0x5d8f7e?.[_0x2a8a09(0x719)]||!_0x5d8f7e[_0x2a8a09(0x719)][_0x2a8a09(0x239)])&&_0xf63895[_0x2a8a09(0x414)]&&!_0xb5f68b&&(_0x3aca3d={..._0x3aca3d,'leadInfo.nome':_0xf63895['pushName']}),_0x5d8f7e?.[_0x2a8a09(0x719)][_0x2a8a09(0x335)]||(_0x3aca3d={..._0x3aca3d,'leadInfo.etiquetas':[]}),_0x5d8f7e?.[_0x2a8a09(0x719)][_0x2a8a09(0x883)]||(_0x3aca3d={..._0x3aca3d,'leadInfo.customFields':[]}),_0x5d8f7e?.['leadInfo'][_0x2a8a09(0x699)]||(_0x3aca3d={..._0x3aca3d,'leadInfo.tags':[]}),_0x5d8f7e&&_0x5d8f7e?.[_0x2a8a09(0x784)]){let _0x3c5d90=await this[_0x2a8a09(0x261)]['label']['find']({'where':{}},this[_0x2a8a09(0x770)][_0x2a8a09(0x808)]),_0x1b5e94=new Set(_0x3c5d90[_0x2a8a09(0x790)](_0x4f3c81=>_0x4f3c81[_0x2a8a09(0x2c7)])),_0x231d43=(_0x5d8f7e[_0x2a8a09(0x719)]?.['etiquetas']||[])[_0x2a8a09(0x334)](_0x2ed76c=>_0x1b5e94[_0x2a8a09(0x333)](_0x2ed76c));_0x3aca3d={..._0x3aca3d,'imported':!0x1,'leadInfo.etiquetas':_0x231d43};for(let _0x1109ae of _0x231d43)await this['AddChatLabel'](_0x1109ae,_0x35dac7);}if(!this[_0x2a8a09(0x3f7)]['flows']['find'](_0x26dc33=>_0x26dc33[_0x2a8a09(0x2e6)]&&_0x20b659[_0x2a8a09(0x4c4)](_0x26dc33[_0x2a8a09(0x2e6)]))&&_0x34605e===_0x2a8a09(0x4d4)&&_0xb5f68b&&this[_0x2a8a09(0x3f7)]?.[_0x2a8a09(0x759)][_0x2a8a09(0x6ad)]&&_0x20b659[_0x2a8a09(0x3b8)]()!==this[_0x2a8a09(0x3f7)]?.[_0x2a8a09(0x759)][_0x2a8a09(0x717)][_0x2a8a09(0x3b8)]()){let _0x14972a=(this['AutomateSystem']?.[_0x2a8a09(0x759)][_0x2a8a09(0x73f)]||0x0)*0xea60,_0x1de89d=Date[_0x2a8a09(0x880)]()+_0x14972a;_0x5d8f7e?.[_0x2a8a09(0x719)]?.[_0x2a8a09(0x8a3)]===0x0||(_0x3aca3d={..._0x3aca3d,'leadInfo.desativadoFluxoAte':_0x1de89d},this['logger'][_0x2a8a09(0x798)](this[_0x2a8a09(0x402)]+'\x20('+this[_0x2a8a09(0x770)][_0x2a8a09(0x808)]+_0x2a8a09(0x6b0)+_0x1de89d+'.'));}if(_0x20b659['trim']()===this[_0x2a8a09(0x3f7)]?.[_0x2a8a09(0x759)][_0x2a8a09(0x717)][_0x2a8a09(0x3b8)]()){this[_0x2a8a09(0x3cb)]['verbose'](this[_0x2a8a09(0x402)]+'\x20('+this['instance']['wuid']+_0x2a8a09(0x2f0)+_0x20b659);let _0x1d2bf6=Date[_0x2a8a09(0x880)]();this[_0x2a8a09(0x3f7)]?.[_0x2a8a09(0x759)][_0x2a8a09(0x72f)]===0x0?_0x3aca3d={..._0x3aca3d,'leadInfo.desativadoFluxoAte':_0x1d2bf6+0x7591f6200}:_0x3aca3d={..._0x3aca3d,'leadInfo.desativadoFluxoAte':_0x1d2bf6+this[_0x2a8a09(0x3f7)]?.[_0x2a8a09(0x759)][_0x2a8a09(0x72f)]*0x3c*0x3e8};}if(_0x5d8f7e=await this['repository']['chat'][_0x2a8a09(0x6ce)]({'where':{'_id':_0x35dac7}},_0x3aca3d,this[_0x2a8a09(0x770)]['wuid'],{'new':!0x0,'upsert':!0x0}),_0x5d8f7e)q(this[_0x2a8a09(0x402)],_0x2a8a09(0x88b),{'chat':_0x5d8f7e});else{this['logger'][_0x2a8a09(0x651)](this[_0x2a8a09(0x402)]+'\x20('+this[_0x2a8a09(0x770)][_0x2a8a09(0x808)]+'):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat');return;}if(_0xb5f68b)return this['logger'][_0x2a8a09(0x798)](this[_0x2a8a09(0x402)]+'\x20('+this['instance'][_0x2a8a09(0x808)]+'):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...'),null;if(!this[_0x2a8a09(0x3f7)]?.[_0x2a8a09(0x759)][_0x2a8a09(0x6ad)])return this[_0x2a8a09(0x3cb)][_0x2a8a09(0x798)](this[_0x2a8a09(0x402)]+'\x20('+this[_0x2a8a09(0x770)][_0x2a8a09(0x808)]+'):\x20Flow\x20desativado'),null;if(_0x5d8f7e['_id']['includes']('@g.us')&&this[_0x2a8a09(0x3f7)]?.['flowConfig'][_0x2a8a09(0x4b3)]===!0x0)return this[_0x2a8a09(0x3cb)][_0x2a8a09(0x798)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x2a8a09(0x4fc)),null;if(_0x5d8f7e['leadInfo']){if(_0x5d8f7e[_0x2a8a09(0x719)][_0x2a8a09(0x8a3)]===0x0||_0x5d8f7e['leadInfo'][_0x2a8a09(0x7ad)])return this[_0x2a8a09(0x3cb)][_0x2a8a09(0x798)](this[_0x2a8a09(0x402)]+'\x20('+this['instance'][_0x2a8a09(0x808)]+_0x2a8a09(0x7f9)+_0x35dac7+_0x2a8a09(0x7d2)),null;if(_0x5d8f7e['leadInfo'][_0x2a8a09(0x8a3)]>Date['now']()&&!_0xf63895[_0x2a8a09(0x3b7)]?.[_0x2a8a09(0x77c)])return this[_0x2a8a09(0x3cb)][_0x2a8a09(0x798)](this['instanceName']+'\x20('+this[_0x2a8a09(0x770)]['wuid']+_0x2a8a09(0x5e8)+new Date(_0x5d8f7e[_0x2a8a09(0x719)][_0x2a8a09(0x8a3)])['toLocaleString']()+_0x2a8a09(0x7d2)),null;}this['logger'][_0x2a8a09(0x798)](this['instanceName']+'\x20('+this[_0x2a8a09(0x770)][_0x2a8a09(0x808)]+'):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações'),this['StartBot'](_0xf63895,_0x34605e);}catch(_0x178c43){let _0x1c9752='Erro\x20na\x20função\x20updateChatWithMessage:\x20',_0x319330=_0x178c43 instanceof Error?_0x178c43[_0x2a8a09(0x5ce)]:typeof _0x178c43=='object'?JSON[_0x2a8a09(0x43f)](_0x178c43):_0x178c43,_0x462822=_0x1c9752+':\x20'+_0x319330;return this[_0x2a8a09(0x3cb)]['error'](this[_0x2a8a09(0x402)]+'\x20('+this[_0x2a8a09(0x770)][_0x2a8a09(0x808)]+_0x2a8a09(0x4b7)+_0x462822),null;}}async['upsertChats'](_0x28a41c,_0x441539){const _0x3b98bc=a0_0x34b2dc;if(_0x441539[_0x3b98bc(0x33c)]){let _0x160df1=_0x28a41c[_0x3b98bc(0x790)](async _0x3ed9c9=>{const _0x48939d=_0x3b98bc;try{let _0x5cfc9d={'_id':_0x3ed9c9[_0x48939d(0x2c7)],'owner':_0x3ed9c9[_0x48939d(0x56c)],'lastcache':0x0};if(Object[_0x48939d(0x37c)](_0x3ed9c9)[_0x48939d(0x3f2)](_0x25799a=>{_0x3ed9c9[_0x25799a]!==null&&(_0x5cfc9d[_0x25799a]=_0x3ed9c9[_0x25799a]);}),_0x5cfc9d['imagechat']===null&&(_0x5cfc9d[_0x48939d(0x28d)]=_0x48939d(0x85d)),Object[_0x48939d(0x37c)](_0x5cfc9d)[_0x48939d(0x3a3)]>0x0)return await this[_0x48939d(0x261)][_0x48939d(0x89d)]['updateOne']({'where':{'_id':_0x3ed9c9[_0x48939d(0x2c7)]}},_0x5cfc9d,this[_0x48939d(0x770)][_0x48939d(0x808)]);}catch(_0x12a506){let _0x3508fd=_0x48939d(0x607)+_0x3ed9c9[_0x48939d(0x2c7)],_0x1ab75d=_0x12a506 instanceof Error?_0x12a506['message']:typeof _0x12a506=='object'?JSON[_0x48939d(0x43f)](_0x12a506):_0x12a506,_0x496732=_0x3508fd+':\x20'+_0x1ab75d;return this['logger'][_0x48939d(0x651)](this[_0x48939d(0x402)]+'\x20('+this[_0x48939d(0x770)][_0x48939d(0x808)]+'):\x20'+_0x496732),null;}}),_0x1216e3=(await Promise[_0x3b98bc(0x57f)](_0x160df1))['filter'](_0x54d344=>_0x54d344!==null)[_0x3b98bc(0x3a3)];this['logger'][_0x3b98bc(0x798)](this[_0x3b98bc(0x402)]+'\x20('+this['instance'][_0x3b98bc(0x808)]+_0x3b98bc(0x4b7)+_0x1216e3+_0x3b98bc(0x3e5)+this['instance'][_0x3b98bc(0x808)]+_0x3b98bc(0x3b1));}}async[a0_0x34b2dc(0x46d)](_0x4ae66d){const _0x57bbaa=a0_0x34b2dc;this['logger'][_0x57bbaa(0x798)](this['instanceName']+'\x20('+this['instance'][_0x57bbaa(0x808)]+_0x57bbaa(0x5c6));let _0x39fd23={'readMessages':[{'remoteJid':_0x4ae66d[_0x57bbaa(0x82e)][_0x57bbaa(0x2ac)][_0x57bbaa(0x85f)][_0x57bbaa(0x668)],'fromMe':_0x4ae66d['chatLog'][_0x57bbaa(0x2ac)][_0x57bbaa(0x85f)]['fromMe'],'id':_0x4ae66d[_0x57bbaa(0x82e)][_0x57bbaa(0x2ac)]['key']['id']}]};await this[_0x57bbaa(0x83f)](_0x39fd23);}async['StartBot'](_0x4c9277,_0x53c713){const _0x59cdf5=a0_0x34b2dc;try{let {key:_0x4ad192,message_normalized:_0x56d63a}=_0x4c9277,_0x234332=_0x56d63a,_0x455528=_0x56d63a[_0x59cdf5(0x6b6)]||_0x56d63a[_0x59cdf5(0x39d)]||_0x56d63a[_0x59cdf5(0x77c)]||_0x56d63a['name']||'',_0x5e56e5=_0x4ad192[_0x59cdf5(0x668)],_0x18cd93=null,_0x55d83e=this['AutomateSystem'][_0x59cdf5(0x4b9)][_0x59cdf5(0x253)](_0x2a4d6d=>_0x2a4d6d['startCommand']&&_0x455528['includes'](_0x2a4d6d[_0x59cdf5(0x2e6)]));if(_0x55d83e&&_0x53c713===_0x59cdf5(0x4d4)){let _0x4f6f8e=await this['repository']['flow'][_0x59cdf5(0x440)]({'where':{'_id':_0x55d83e['_id']}});if(this[_0x59cdf5(0x3cb)][_0x59cdf5(0x798)](this[_0x59cdf5(0x402)]+'\x20('+this['instance'][_0x59cdf5(0x808)]+_0x59cdf5(0x25f)),_0x4f6f8e&&_0x4f6f8e[_0x59cdf5(0x5e4)]?.[_0x59cdf5(0x4c4)](this['instance'][_0x59cdf5(0x808)]))_0x18cd93=await this[_0x59cdf5(0x890)](_0x4f6f8e,_0x4ad192,_0x234332);else return this['logger']['verbose'](this[_0x59cdf5(0x402)]+'\x20('+this[_0x59cdf5(0x770)][_0x59cdf5(0x808)]+_0x59cdf5(0x270)),null;}else this[_0x59cdf5(0x3cb)][_0x59cdf5(0x798)](this[_0x59cdf5(0x402)]+'\x20('+this[_0x59cdf5(0x770)]['wuid']+_0x59cdf5(0x72d));if(_0x18cd93=await this[_0x59cdf5(0x244)](_0x5e56e5,_0x234332),_0x18cd93){this[_0x59cdf5(0x3cb)][_0x59cdf5(0x798)](this['instanceName']+'\x20('+this[_0x59cdf5(0x770)][_0x59cdf5(0x808)]+_0x59cdf5(0x87c)),!_0x4ad192[_0x59cdf5(0x464)]&&_0x18cd93['readMessages']&&this[_0x59cdf5(0x46d)](_0x18cd93);let _0x3db609=await this[_0x59cdf5(0x81a)](_0x18cd93);_0x3db609&&await this[_0x59cdf5(0x361)](_0x18cd93,_0x3db609);}}catch(_0x3a3f82){this[_0x59cdf5(0x3cb)]['error'](this[_0x59cdf5(0x402)]+'\x20('+this[_0x59cdf5(0x770)][_0x59cdf5(0x808)]+_0x59cdf5(0x799)+(_0x3a3f82 instanceof Error?_0x3a3f82['message']:JSON[_0x59cdf5(0x43f)](_0x3a3f82,null,0x2)));}}[a0_0x34b2dc(0x838)](_0x4b7307,_0x3b6b3c='',_0x3aaa7a={}){const _0x1b7697=a0_0x34b2dc;return typeof _0x4b7307!=_0x1b7697(0x89b)||_0x4b7307===null?(_0x3b6b3c&&(_0x3aaa7a[_0x3b6b3c]=_0x4b7307),_0x3aaa7a):(Object['entries'](_0x4b7307)[_0x1b7697(0x3f2)](([_0x388cbb,_0x282ea4])=>{const _0xa9c3b1=_0x1b7697;let _0x5bb619=_0x3b6b3c?_0x3b6b3c+'.'+_0x388cbb:'_'+_0x388cbb;Array['isArray'](_0x282ea4)?_0x282ea4['forEach']((_0x523c33,_0x4f5cb8)=>{const _0x2c4838=a0_0x15dd;this[_0x2c4838(0x838)](_0x523c33,_0x5bb619+'['+_0x4f5cb8+']',_0x3aaa7a);}):typeof _0x282ea4==_0xa9c3b1(0x89b)&&_0x282ea4!==null?this[_0xa9c3b1(0x838)](_0x282ea4,_0x5bb619,_0x3aaa7a):_0x3aaa7a[_0x5bb619]=String(_0x282ea4);}),_0x3aaa7a);}[a0_0x34b2dc(0x871)](_0x2a55e8){const _0x583feb=a0_0x34b2dc;let _0x207435={};for(let _0x186909 of _0x2a55e8)typeof _0x186909[_0x583feb(0x673)]==_0x583feb(0x47d)&&typeof _0x186909[_0x583feb(0x47a)]==_0x583feb(0x47d)&&(_0x207435[_0x186909[_0x583feb(0x673)]]=_0x186909[_0x583feb(0x47a)]);return _0x207435;}async[a0_0x34b2dc(0x81a)](_0x52ca7f){const _0x331c3a=a0_0x34b2dc;if(!this[_0x331c3a(0x3f7)]?.[_0x331c3a(0x759)][_0x331c3a(0x6ad)]||_0x52ca7f[_0x331c3a(0x71c)]!==_0x331c3a(0x5a2)&&_0x52ca7f['waitingMenu_id']==='')return null;let _0x14dcb9=_0x52ca7f['chatLog'][_0x331c3a(0x264)]||_0x331c3a(0x28c);typeof _0x52ca7f[_0x331c3a(0x82e)][_0x331c3a(0x65a)]>'u'&&(_0x52ca7f[_0x331c3a(0x82e)][_0x331c3a(0x65a)]=!0x0);let _0x431587=_0x52ca7f[_0x331c3a(0x82e)][_0x331c3a(0x65a)];this['logger'][_0x331c3a(0x798)](this[_0x331c3a(0x402)]+'\x20('+this[_0x331c3a(0x770)][_0x331c3a(0x808)]+'):\x20lastBlockId:\x20'+_0x14dcb9+',\x20lastCondition:\x20'+_0x431587);let _0x28b793=_0x14dcb9==='start'?_0x52ca7f[_0x331c3a(0x7a1)][_0x331c3a(0x253)](_0x23df6c=>_0x23df6c[_0x331c3a(0x248)]==='start'):_0x52ca7f[_0x331c3a(0x7a1)][_0x331c3a(0x253)](_0x5c9810=>_0x5c9810[_0x331c3a(0x2c7)]['toString']()===_0x14dcb9[_0x331c3a(0x1fe)]());if(!_0x28b793)return this['logger'][_0x331c3a(0x651)](this[_0x331c3a(0x402)]+'\x20('+this[_0x331c3a(0x770)][_0x331c3a(0x808)]+'):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20'+_0x14dcb9),null;let _0xf450d1={'_pushName':_0x52ca7f?.['chatLog']?.[_0x331c3a(0x2ac)]?.[_0x331c3a(0x414)]||'','_sender':this[_0x331c3a(0x770)][_0x331c3a(0x808)]||'',..._0x52ca7f['chatLog'][_0x331c3a(0x4db)]},_0x7193=null;if(_0x52ca7f['waitingMenu_id']){let _0x385573=_0x52ca7f[_0x331c3a(0x82e)]['lastReceivedMessage']['vote'],_0x3050a2=_0x52ca7f[_0x331c3a(0x904)][_0x331c3a(0x253)](_0xec54ad=>_0xec54ad['option']===_0x385573);if(_0x3050a2){let _0x198a8d=_0x3050a2[_0x331c3a(0x67a)];if(_0x7193=_0x52ca7f[_0x331c3a(0x7a1)][_0x331c3a(0x253)](_0xa70942=>_0xa70942[_0x331c3a(0x223)]===_0x198a8d&&_0xa70942[_0x331c3a(0x881)]===0x1),_0x28b793[_0x331c3a(0x7dc)][_0x331c3a(0x8b9)]){let _0x24bf72={'id':_0x52ca7f['waitingMenu_id'],'remoteJid':_0x52ca7f[_0x331c3a(0x668)],'fromMe':!0x0};await this['deleteMessage'](_0x24bf72);}if(_0x28b793['uazapi'][_0x331c3a(0x8b9)]&&_0x28b793[_0x331c3a(0x7dc)][_0x331c3a(0x6be)]&&_0x28b793[_0x331c3a(0x7dc)]['menuType']===_0x331c3a(0x787)){let _0x4b8829={'number':_0x52ca7f[_0x331c3a(0x668)],'options':{'delay':0x0},'textMessage':{'text':_0x331c3a(0x8d4)+_0x52ca7f[_0x331c3a(0x2f1)]+'\x0a*Você\x20respondeu*:\x0a'+_0x385573}};await this[_0x331c3a(0x876)](_0x4b8829);}_0x52ca7f[_0x331c3a(0x71c)]=_0x331c3a(0x5a2),_0x52ca7f[_0x331c3a(0x8dc)]='',_0x52ca7f[_0x331c3a(0x2f1)]='',_0x52ca7f[_0x331c3a(0x904)]=[];}else{this[_0x331c3a(0x3cb)][_0x331c3a(0x798)](this['instanceName']+'\x20('+this['instance'][_0x331c3a(0x808)]+_0x331c3a(0x6a4));let _0x13984a={'activatedCount':_0x52ca7f[_0x331c3a(0x82e)][_0x331c3a(0x3e1)][_0x331c3a(0x334)](_0x27670c=>String(_0x27670c['blockId'])===String(_0x14dcb9))[_0x331c3a(0x3a3)],'moreLogs':[_0x331c3a(0x7c4)]};if(_0x28b793['uazapi'][_0x331c3a(0x8c6)]){let _0x450662={'number':_0x52ca7f[_0x331c3a(0x668)],'options':{'delay':0x0},'textMessage':{'text':_0x28b793[_0x331c3a(0x7dc)][_0x331c3a(0x8c6)]}};await this[_0x331c3a(0x876)](_0x450662);}if(_0x28b793[_0x331c3a(0x7b2)]!==void 0x0&&_0x13984a[_0x331c3a(0x5ed)]>=_0x28b793[_0x331c3a(0x7b2)]){let _0x4c3e99=Date['now'](),_0x2d8213=_0x28b793[_0x331c3a(0x56a)]??0xa;isNaN(_0x2d8213)&&(_0x2d8213=0xa);let _0x490247=_0x4c3e99+_0x2d8213*0x3c*0x3e8;_0x13984a[_0x331c3a(0x277)]=_0x490247,_0x13984a['moreLogs']['push'](_0x331c3a(0x3d2)),this['updateStopChat'](_0x52ca7f,_0x490247),_0x52ca7f[_0x331c3a(0x8dc)]='',_0x52ca7f[_0x331c3a(0x2f1)]='',_0x52ca7f[_0x331c3a(0x904)]=[];}return this[_0x331c3a(0x512)](_0x52ca7f,_0x28b793,_0x13984a,!0x0),null;}}if(_0x431587&&_0x28b793[_0x331c3a(0x67a)]&&!_0x52ca7f['waitingMenu_id']){let _0x5c11f6=_0x52ca7f[_0x331c3a(0x7a1)][_0x331c3a(0x334)](_0xea4ca4=>_0xea4ca4['groupId'][_0x331c3a(0x1fe)]()===_0x28b793[_0x331c3a(0x67a)][_0x331c3a(0x1fe)]())[_0x331c3a(0x289)]((_0x121120,_0xfd670c)=>_0x121120[_0x331c3a(0x881)]-_0xfd670c[_0x331c3a(0x881)]);_0x5c11f6['length']>0x0&&(_0x7193=_0x5c11f6[0x0]);}if(!_0x7193){let _0x4fc612=_0x28b793[_0x331c3a(0x223)],_0x35ef8f=_0x52ca7f[_0x331c3a(0x7a1)]['filter'](_0x45c7f3=>_0x45c7f3[_0x331c3a(0x223)]===_0x4fc612&&_0x45c7f3[_0x331c3a(0x881)]>_0x28b793['order'])[_0x331c3a(0x289)]((_0x12bced,_0x199fa7)=>_0x12bced[_0x331c3a(0x881)]-_0x199fa7[_0x331c3a(0x881)]);_0x35ef8f[_0x331c3a(0x3a3)]>0x0&&(_0x7193=_0x35ef8f[0x0]);}if(!_0x7193)return _0x52ca7f[_0x331c3a(0x71c)]=_0x331c3a(0x688),null;_0x52ca7f[_0x331c3a(0x82e)][_0x331c3a(0x4db)]=_0xf450d1;let _0x47257c=JSON['parse'](JSON[_0x331c3a(0x43f)](_0x7193));return this[_0x331c3a(0x5d2)](_0x47257c,_0x52ca7f[_0x331c3a(0x82e)][_0x331c3a(0x4db)]),_0x52ca7f[_0x331c3a(0x82e)][_0x331c3a(0x264)]=_0x47257c[_0x331c3a(0x2c7)],_0x52ca7f[_0x331c3a(0x82e)][_0x331c3a(0x65a)]=!0x0,_0x47257c;}[a0_0x34b2dc(0x572)](_0x242ccc,_0x337be0){const _0x354ef0=a0_0x34b2dc;return _0x242ccc[_0x354ef0(0x2a1)](/\{\{([^}]+)\}\}/g,(_0x1b7907,_0x32f97a)=>_0x337be0[_0x32f97a]||'');}['replaceVariablesInObject'](_0x5425e1,_0x278555){const _0x10bd99=a0_0x34b2dc;for(let _0x25ce98 in _0x5425e1)typeof _0x5425e1[_0x25ce98]==_0x10bd99(0x47d)?_0x5425e1[_0x25ce98]=this[_0x10bd99(0x572)](_0x5425e1[_0x25ce98],_0x278555):typeof _0x5425e1[_0x25ce98]==_0x10bd99(0x89b)&&this['replaceVariablesInObject'](_0x5425e1[_0x25ce98],_0x278555);}async['goNextblock'](_0x224844,_0x4d88d5){const _0x2ea305=a0_0x34b2dc;let _0x5e8e01=_0x4d88d5[_0x2ea305(0x2c7)];if(_0x224844[_0x2ea305(0x82e)]&&_0x224844[_0x2ea305(0x82e)][_0x2ea305(0x3e1)]){let _0x4eb970=_0x224844['chatLog'][_0x2ea305(0x3e1)][_0x2ea305(0x334)](_0x4be76d=>String(_0x4be76d['blockId'])===String(_0x5e8e01))[_0x2ea305(0x7f4)]();if(_0x4eb970&&_0x4eb970['error']&&_0x4d88d5[_0x2ea305(0x6d9)])return _0x224844['status']='closed',await this[_0x2ea305(0x550)](_0x224844),null;}if(_0x4d88d5[_0x2ea305(0x248)]===_0x2ea305(0x7dc)&&_0x4d88d5[_0x2ea305(0x7dc)][_0x2ea305(0x50e)]===_0x2ea305(0x34f)&&_0x224844['waitingMenu_id'])return _0x224844[_0x2ea305(0x82e)][_0x2ea305(0x264)]=_0x5e8e01,await this[_0x2ea305(0x550)](_0x224844),null;let _0x36dbc8=await this[_0x2ea305(0x81a)](_0x224844);if(_0x224844[_0x2ea305(0x82e)]&&_0x224844['chatLog'][_0x2ea305(0x3e1)]){let _0x260d0a=_0x224844[_0x2ea305(0x82e)][_0x2ea305(0x3e1)][_0x2ea305(0x334)](_0x2b6c31=>String(_0x2b6c31[_0x2ea305(0x909)])===String(_0x5e8e01))[_0x2ea305(0x3a3)];if(_0x4d88d5['maxActives']!==void 0x0&&_0x260d0a>=_0x4d88d5[_0x2ea305(0x7b2)]){let _0x537224=Date[_0x2ea305(0x880)](),_0x6264dd=_0x4d88d5[_0x2ea305(0x56a)]??0xa;isNaN(_0x6264dd)&&(_0x6264dd=0xa);let _0x4ed70a=_0x537224+_0x6264dd*0x3c*0x3e8,_0x466c2c={'newStoppedUntil':_0x4ed70a};return this[_0x2ea305(0x412)](_0x224844,_0x4ed70a),this['updateConversation'](_0x224844,_0x4d88d5,_0x466c2c,!0x0),null;}}_0x36dbc8&&_0x36dbc8[_0x2ea305(0x248)]!==_0x2ea305(0x27b)&&await this[_0x2ea305(0x361)](_0x224844,_0x36dbc8),_0x36dbc8||await this[_0x2ea305(0x550)](_0x224844),_0x36dbc8&&_0x36dbc8['type']==='save'&&(_0x224844[_0x2ea305(0x82e)][_0x2ea305(0x264)]=_0x5e8e01,await this[_0x2ea305(0x550)](_0x224844));}async[a0_0x34b2dc(0x361)](_0x40b5f4,_0x51b1cd){const _0x30919d=a0_0x34b2dc;try{let _0x55795f=_0x51b1cd[_0x30919d(0x248)];this[_0x30919d(0x3cb)][_0x30919d(0x798)](this[_0x30919d(0x402)]+'\x20('+this['instance'][_0x30919d(0x808)]+_0x30919d(0x3ec)+_0x55795f);let _0x1e5ceb={'uazapi':()=>this[_0x30919d(0x7fb)](_0x40b5f4,_0x51b1cd),'save':()=>this[_0x30919d(0x613)](_0x40b5f4,_0x51b1cd),'stop':()=>this[_0x30919d(0x717)](_0x40b5f4,_0x51b1cd),'condition':()=>this['processConditions'](_0x40b5f4,_0x51b1cd),'varedit':()=>this[_0x30919d(0x835)](_0x40b5f4,_0x51b1cd),'apirequest':()=>this[_0x30919d(0x556)](_0x40b5f4,_0x51b1cd),'goToFlow':()=>this[_0x30919d(0x583)](_0x40b5f4,_0x51b1cd),'scheduleFlow':()=>this[_0x30919d(0x30f)](_0x40b5f4,_0x51b1cd),'awaitSeconds':()=>this[_0x30919d(0x8b0)](_0x40b5f4,_0x51b1cd),'clearVariables':()=>this[_0x30919d(0x54f)](_0x40b5f4,_0x51b1cd)}[_0x55795f];_0x1e5ceb&&await _0x1e5ceb();}catch(_0x5a6eb2){this[_0x30919d(0x3cb)]['error'](this[_0x30919d(0x402)]+'\x20('+this[_0x30919d(0x770)][_0x30919d(0x808)]+_0x30919d(0x6e8)+(_0x5a6eb2 instanceof Error?_0x5a6eb2['message']:JSON[_0x30919d(0x43f)](_0x5a6eb2,null,0x2)));}}async[a0_0x34b2dc(0x8b0)](_0x28cf19,_0x35bd9b){const _0x2dda04=a0_0x34b2dc;if(this[_0x2dda04(0x3cb)][_0x2dda04(0x798)](this[_0x2dda04(0x402)]+'\x20('+this['instance'][_0x2dda04(0x808)]+_0x2dda04(0x479)),!_0x28cf19||!_0x35bd9b)return this[_0x2dda04(0x3cb)][_0x2dda04(0x651)](this[_0x2dda04(0x402)]+'\x20('+this[_0x2dda04(0x770)][_0x2dda04(0x808)]+_0x2dda04(0x534)),null;let _0x22791e=+_0x35bd9b[_0x2dda04(0x5ea)];isNaN(_0x22791e)&&(_0x22791e=0x0),_0x22791e=Math[_0x2dda04(0x633)](_0x22791e,0x3c),await(0x0,w[_0x2dda04(0x6db)])(_0x22791e*0x3e8);let _0x2417a8={'moreLogs':[_0x2dda04(0x561)+_0x22791e+_0x2dda04(0x8d3)]};return await this[_0x2dda04(0x512)](_0x28cf19,_0x35bd9b,_0x2417a8),_0x22791e;}async[a0_0x34b2dc(0x54f)](_0x36ce0c,_0x5b3ffd){const _0xb8b894=a0_0x34b2dc;if(this['logger']['verbose'](this[_0xb8b894(0x402)]+'\x20('+this[_0xb8b894(0x770)][_0xb8b894(0x808)]+'):\x20Entrou\x20na\x20função\x20clearVariables'),!_0x36ce0c||!_0x5b3ffd)return this[_0xb8b894(0x3cb)]['error'](this['instanceName']+'\x20('+this['instance'][_0xb8b894(0x808)]+_0xb8b894(0x534)),null;let _0x44f9b4=[];if(_0x5b3ffd[_0xb8b894(0x692)][_0xb8b894(0x3b8)]()===_0xb8b894(0x742)){let _0x57e9be=[_0xb8b894(0x532),'_pushName',_0xb8b894(0x610),_0xb8b894(0x92e),'_remoteJid',_0xb8b894(0x2c7),_0xb8b894(0x43a)];_0x44f9b4=Object[_0xb8b894(0x37c)](_0x36ce0c[_0xb8b894(0x82e)][_0xb8b894(0x4db)])[_0xb8b894(0x334)](_0x41b4c3=>_0x41b4c3[_0xb8b894(0x442)]('_')&&!_0x57e9be[_0xb8b894(0x4c4)](_0x41b4c3));}else _0x44f9b4=_0x5b3ffd[_0xb8b894(0x692)]['split']('|')[_0xb8b894(0x790)](_0x2c2627=>(_0x2c2627=_0x2c2627['replace'](/[{}]/g,'')[_0xb8b894(0x3b8)](),_0x2c2627[_0xb8b894(0x442)]('_')?_0x2c2627:'_'+_0x2c2627));let _0x6c761f=[];_0x44f9b4['forEach'](_0x6a11df=>{const _0x86058d=_0xb8b894;_0x6a11df in _0x36ce0c['chatLog'][_0x86058d(0x4db)]&&(delete _0x36ce0c[_0x86058d(0x82e)]['realVariables'][_0x6a11df],_0x6c761f['push'](_0x6a11df));}),_0x6c761f['length']>0x0?this[_0xb8b894(0x3cb)]['verbose'](this[_0xb8b894(0x402)]+'\x20('+this[_0xb8b894(0x770)][_0xb8b894(0x808)]+'):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20'+_0x6c761f['join'](',\x20')):this[_0xb8b894(0x3cb)]['verbose'](this[_0xb8b894(0x402)]+'\x20('+this[_0xb8b894(0x770)][_0xb8b894(0x808)]+'):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção');let _0x286a59={'moreLogs':['Removidas\x20as\x20variáveis:\x20'+_0x6c761f[_0xb8b894(0x3c9)](',\x20')]};return await this[_0xb8b894(0x512)](_0x36ce0c,_0x5b3ffd,_0x286a59),null;}async[a0_0x34b2dc(0x30f)](_0x52f131,_0xe1a06d){const _0x46445d=a0_0x34b2dc;if(this['logger'][_0x46445d(0x798)](this[_0x46445d(0x402)]+'\x20('+this[_0x46445d(0x770)][_0x46445d(0x808)]+'):\x20Entrou\x20na\x20função\x20scheduleFlow'),!_0x52f131||!_0xe1a06d)return this['logger'][_0x46445d(0x651)](this['instanceName']+'\x20('+this[_0x46445d(0x770)][_0x46445d(0x808)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x4ffd4e=_0x52f131[_0x46445d(0x668)];_0xe1a06d[_0x46445d(0x498)][_0x46445d(0x668)]&&_0xe1a06d['scheduleFlow'][_0x46445d(0x668)][_0x46445d(0x3b8)]()!==''&&(_0x4ffd4e=_0xe1a06d[_0x46445d(0x7dc)][_0x46445d(0x668)][_0x46445d(0x3b8)]());let _0x2acbb4=_0xe1a06d[_0x46445d(0x498)][_0x46445d(0x408)]*0xea60,_0x1317e5=Date[_0x46445d(0x880)]()+_0x2acbb4,_0x949191={'status':'scheduled','info':_0x46445d(0x774)+_0x52f131[_0x46445d(0x673)],'remoteJids':[_0x4ffd4e],'when':_0x1317e5,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x46445d(0x35b),'flowName':_0xe1a06d[_0x46445d(0x498)][_0x46445d(0x939)]};this[_0x46445d(0x26e)](_0x949191);let _0x43ff76=await this['NextBlock'](_0x52f131);_0x43ff76&&await this['processblock'](_0x52f131,_0x43ff76);}async['processgoToFlow'](_0x1ef80a,_0x42617f){const _0x59fa40=a0_0x34b2dc;if(this[_0x59fa40(0x3cb)]['verbose'](this[_0x59fa40(0x402)]+'\x20('+this[_0x59fa40(0x770)][_0x59fa40(0x808)]+_0x59fa40(0x4a8)),!_0x1ef80a||!_0x42617f)return this['logger'][_0x59fa40(0x651)](this[_0x59fa40(0x402)]+'\x20('+this[_0x59fa40(0x770)][_0x59fa40(0x808)]+_0x59fa40(0x534)),null;await this[_0x59fa40(0x512)](_0x1ef80a,_0x42617f,{},!0x0,!0x0);let _0x56b168=_0x42617f[_0x59fa40(0x219)];_0x1ef80a=await this[_0x59fa40(0x351)](_0x56b168,_0x1ef80a[_0x59fa40(0x668)],_0x1ef80a[_0x59fa40(0x82e)][_0x59fa40(0x4db)]);let _0x334b2d=await this[_0x59fa40(0x81a)](_0x1ef80a);_0x334b2d&&await this[_0x59fa40(0x361)](_0x1ef80a,_0x334b2d);}async[a0_0x34b2dc(0x351)](_0xfb5e1e,_0x41d62b,_0x37555e){const _0x1550ed=a0_0x34b2dc;this[_0x1550ed(0x3cb)]['verbose'](this['instanceName']+'\x20('+this[_0x1550ed(0x770)][_0x1550ed(0x808)]+_0x1550ed(0x671));try{let _0x52facf=this['AutomateSystem'][_0x1550ed(0x4b9)][_0x1550ed(0x253)](_0x44b660=>_0x44b660[_0x1550ed(0x2c7)]===_0xfb5e1e);_0x52facf||this[_0x1550ed(0x3cb)][_0x1550ed(0x651)](this[_0x1550ed(0x402)]+'\x20('+this[_0x1550ed(0x770)][_0x1550ed(0x808)]+_0x1550ed(0x93a)+_0xfb5e1e+'\x27\x20não\x20encontrado\x20na\x20memória');let _0x57c399=await this[_0x1550ed(0x261)][_0x1550ed(0x35b)][_0x1550ed(0x440)]({'where':{'_id':_0x52facf[_0x1550ed(0x2c7)]}});if(!_0x57c399||!_0x57c399[_0x1550ed(0x5e4)]?.[_0x1550ed(0x4c4)](this[_0x1550ed(0x770)]['wuid']))throw this[_0x1550ed(0x3cb)][_0x1550ed(0x651)](this['instanceName']+'\x20('+this[_0x1550ed(0x770)][_0x1550ed(0x808)]+_0x1550ed(0x93a)+_0xfb5e1e+_0x1550ed(0x457)),new m(_0x1550ed(0x4b4)+_0xfb5e1e+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x231028=require(_0x1550ed(0x865))['ObjectId'],_0x53fb8f=Date[_0x1550ed(0x880)](),_0x5b11b3=_0x1550ed(0x28c),_0x30d007={},_0x2c839c={},_0x4b60ab=this[_0x1550ed(0x3f7)]['flows'][_0x1550ed(0x253)](_0x3b7847=>_0x3b7847[_0x1550ed(0x2c7)]===_0x57c399[_0x1550ed(0x2c7)]?.['toString']()),_0x5affc4=_0x4b60ab?.[_0x1550ed(0x41b)]??_0x57c399[_0x1550ed(0x41b)]??0x0,_0x164a9e=_0x4b60ab?.[_0x1550ed(0x84c)]??_0x57c399[_0x1550ed(0x84c)]??!0x1,_0x146fa8={'flowId':_0x52facf[_0x1550ed(0x2c7)],'readMessages':_0x52facf['readMessages'],..._0x57c399,'chatLog':null},_0x15fafa={'lastReceivedMessage':_0x30d007,'lastSendMessage':_0x2c839c,'lastBlockId':_0x5b11b3,'lastCondition':!0x0,'realVariables':_0x37555e};_0x146fa8[_0x1550ed(0x82e)]=_0x15fafa,_0x146fa8['chatLog'][_0x1550ed(0x4db)]={..._0x37555e},delete _0x146fa8[_0x1550ed(0x2c7)],_0x146fa8[_0x1550ed(0x2c7)]=new _0x231028(),_0x146fa8[_0x1550ed(0x55f)]=_0x53fb8f,_0x146fa8[_0x1550ed(0x71c)]=_0x1550ed(0x5a2),_0x146fa8['remoteJid']=_0x41d62b,_0x146fa8[_0x1550ed(0x41b)]=_0x5affc4,_0x146fa8[_0x1550ed(0x84c)]=_0x164a9e;let _0x334f90=await this[_0x1550ed(0x261)]['flowConversation'][_0x1550ed(0x6ce)](_0x146fa8[_0x1550ed(0x2c7)],_0x146fa8,this[_0x1550ed(0x770)]['wuid']);return this[_0x1550ed(0x3cb)][_0x1550ed(0x798)](this[_0x1550ed(0x402)]+'\x20('+this[_0x1550ed(0x770)][_0x1550ed(0x808)]+_0x1550ed(0x3d7)),_0x334f90?_0x146fa8:null;}catch(_0x1db4bc){let _0x1f680e=_0x1550ed(0x5c4),_0x4a083a=_0x1db4bc instanceof Error?_0x1db4bc[_0x1550ed(0x5ce)]:typeof _0x1db4bc==_0x1550ed(0x89b)?JSON[_0x1550ed(0x43f)](_0x1db4bc):_0x1db4bc,_0x5a8746=_0x1f680e+':\x20'+_0x4a083a;throw this[_0x1550ed(0x3cb)][_0x1550ed(0x651)](this[_0x1550ed(0x402)]+'\x20('+this['instance']['wuid']+_0x1550ed(0x4b7)+_0x5a8746),new m(_0x5a8746);}}async['processApiRequest'](_0x491c91,_0x10f553){const _0x211416=a0_0x34b2dc;let _0xfb90e,_0x423f53;try{let _0x4dfb1c=_0x10f553[_0x211416(0x246)];if(!_0x4dfb1c||!_0x4dfb1c[_0x211416(0x931)]||!_0x4dfb1c[_0x211416(0x502)])throw new Error('Falta\x20informação\x20para\x20a\x20chamada\x20API');let _0x5b78d1;([_0x211416(0x7a8),_0x211416(0x2b3),_0x211416(0x45f)][_0x211416(0x74b)](_0x2c56b8=>_0x4dfb1c[_0x211416(0x931)][_0x211416(0x4c4)](_0x2c56b8))||_0x4dfb1c[_0x211416(0x6bb)])&&(_0x5b78d1='arraybuffer');let _0x24fc7e='\u205f',_0x1ebf38;try{_0x1ebf38=JSON[_0x211416(0x232)](_0x4dfb1c[_0x211416(0x587)][_0x211416(0x2a1)](new RegExp(_0x24fc7e,'g'),''));}catch(_0x3bfd4b){throw _0x3bfd4b;}let _0x3937fe={'method':_0x4dfb1c[_0x211416(0x502)],'url':_0x4dfb1c[_0x211416(0x931)],'headers':_0x4dfb1c[_0x211416(0x544)]||{},..._0x4dfb1c[_0x211416(0x502)][_0x211416(0x22d)]()!==_0x211416(0x8c1)&&_0x4dfb1c[_0x211416(0x587)]?{'data':JSON[_0x211416(0x232)](_0x4dfb1c[_0x211416(0x587)][_0x211416(0x2a1)](new RegExp(_0x24fc7e,'g'),''))}:{},..._0x5b78d1&&{'responseType':_0x5b78d1}},_0x1b21b1=await(0x0,te['default'])(_0x3937fe),_0x393f57=_0x1b21b1[_0x211416(0x310)]['content-type'];if(_0x393f57&&_0x393f57['includes'](_0x211416(0x318))||typeof _0x1b21b1[_0x211416(0x6a3)]==_0x211416(0x47d)){if(typeof _0x1b21b1[_0x211416(0x6a3)]=='string'){let _0x3d02f2=_0x1b21b1['data'][_0x211416(0x2a1)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x211416(0x3b8)]();try{_0xfb90e=JSON[_0x211416(0x232)](_0x3d02f2);}catch(_0x2a1cd1){this[_0x211416(0x3cb)][_0x211416(0x651)]('Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20'+_0x2a1cd1[_0x211416(0x5ce)]),_0xfb90e={'_apiResponse':_0x1b21b1[_0x211416(0x6a3)]};}}else _0xfb90e=_0x1b21b1['data'];let _0x58a132=_0x491c91[_0x211416(0x82e)]['realVariables'],_0xdbfc0a=this[_0x211416(0x838)](_0xfb90e);return Object['assign'](_0x58a132,_0xdbfc0a),_0x491c91[_0x211416(0x82e)][_0x211416(0x4db)]=_0x58a132,_0x423f53={'error':!0x1,'apiResponse':_0xfb90e},this['updateConversation'](_0x491c91,_0x10f553,_0x423f53),_0xfb90e;}if(_0x393f57&&(_0x393f57[_0x211416(0x4c4)](_0x211416(0x5c0))||_0x393f57[_0x211416(0x4c4)]('image')||_0x393f57[_0x211416(0x4c4)]('audio')||_0x393f57[_0x211416(0x4c4)](_0x211416(0x555)))){this['logger'][_0x211416(0x798)](this['instanceName']+'\x20('+this[_0x211416(0x770)][_0x211416(0x808)]+'):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20'+_0x393f57);let _0x590816=(0x0,X['v4'])(),_0x3e8da9='',_0x556526={'image/jpeg':_0x211416(0x61a),'image/png':_0x211416(0x7a5),'image/gif':_0x211416(0x5a5),'image/webp':_0x211416(0x316),'image/svg+xml':_0x211416(0x7e1),'audio/mpeg':'.mp3','audio/ogg':_0x211416(0x3ef),'audio/wav':_0x211416(0x225),'video/mp4':_0x211416(0x329),'video/webm':_0x211416(0x461),'video/ogg':_0x211416(0x8dd),'text/plain':'.txt','application/pdf':'.pdf','application/msword':'.doc','application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x211416(0x810),'application/vnd.ms-excel':_0x211416(0x2d1),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x211416(0x404),'application/vnd.ms-powerpoint':_0x211416(0x4f5),'application/vnd.openxmlformats-officedocument.presentationml.presentation':'.pptx'};_0x556526[_0x393f57]?(_0x3e8da9=_0x556526[_0x393f57],this[_0x211416(0x3cb)]['verbose'](this[_0x211416(0x402)]+'\x20('+this[_0x211416(0x770)][_0x211416(0x808)]+'):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20'+_0x3e8da9)):(_0x3e8da9=_0x211416(0x1e9),this[_0x211416(0x3cb)][_0x211416(0x798)](this[_0x211416(0x402)]+'\x20('+this[_0x211416(0x770)][_0x211416(0x808)]+_0x211416(0x3d5)+_0x3e8da9)),_0x590816+=_0x3e8da9,this[_0x211416(0x3cb)]['verbose'](this[_0x211416(0x402)]+'\x20('+this[_0x211416(0x770)]['wuid']+_0x211416(0x872)+_0x590816);let _0x3e4983=this['configService'][_0x211416(0x30a)](_0x211416(0x773))[_0x211416(0x879)];if(!_0x3e4983){let _0x474fc5=this[_0x211416(0x269)]['get'](_0x211416(0x6c5));_0x3e4983=_0x211416(0x3f9)+(_0x474fc5&&_0x474fc5['FULLCHAIN'][_0x211416(0x292)]('/')[0x4]);}let _0x158c79=Buffer[_0x211416(0x77b)](_0x1b21b1[_0x211416(0x6a3)]);await this[_0x211416(0x433)](_0x158c79,_0x590816);let _0x205eb7='/media/'+_0x590816;_0x205eb7=''+_0x3e4983+_0x205eb7,_0xfb90e={'fileUrl':_0x205eb7},_0x491c91[_0x211416(0x82e)][_0x211416(0x4db)]['fileUrl']=_0x205eb7;let _0x3b6974=_0x491c91[_0x211416(0x82e)]['realVariables'],_0x2e5776=this[_0x211416(0x838)](_0xfb90e);return Object[_0x211416(0x2c4)](_0x3b6974,_0x2e5776),_0x491c91[_0x211416(0x82e)][_0x211416(0x4db)]=_0x3b6974,_0x423f53={'error':!0x1,'apiResponse':{'fileUrl':_0x205eb7}},this['updateConversation'](_0x491c91,_0x10f553,_0x423f53),_0xfb90e;}}catch(_0x2a9f91){this['logger'][_0x211416(0x651)]('Erro\x20ao\x20processar\x20a\x20chamada\x20API:'+_0x2a9f91['message']),_0x2a9f91[_0x211416(0x230)]&&(_0xfb90e=_0x2a9f91[_0x211416(0x230)][_0x211416(0x6a3)]);let _0x5981cb=_0x491c91['chatLog'][_0x211416(0x4db)],_0x2da29b=this['flattenObject'](_0xfb90e);return Object[_0x211416(0x2c4)](_0x5981cb,_0x2da29b),_0x491c91['chatLog']['realVariables']=_0x5981cb,_0x423f53={'error':!0x0,'errorLog':_0x2a9f91[_0x211416(0x1fe)](),'apiResponse':_0xfb90e},this[_0x211416(0x512)](_0x491c91,_0x10f553,_0x423f53),{'success':!0x1};}}[a0_0x34b2dc(0x4a0)](_0x5ccb12,_0xbe206b){const _0x4c1f58=a0_0x34b2dc;let _0x5a5ba8=_0x35a295=>{const _0x8b6a11=a0_0x15dd;let _0x5a3fc7=_0x35a295[_0x8b6a11(0x2a1)](/[^0-9.,-]/g,'')[_0x8b6a11(0x2a1)](',','.'),_0x175462=parseFloat(_0x5a3fc7);return isNaN(_0x175462)?null:_0x175462;},_0x2dbed7=_0xbe206b[_0x4c1f58(0x6a0)],_0x1d037f=_0xbe206b[_0x4c1f58(0x69b)];typeof _0x2dbed7==_0x4c1f58(0x47d)&&(_0x2dbed7=this[_0x4c1f58(0x572)](_0x2dbed7,_0x5ccb12[_0x4c1f58(0x82e)][_0x4c1f58(0x4db)])??''),typeof _0x1d037f=='string'&&(_0x1d037f=this[_0x4c1f58(0x572)](_0x1d037f,_0x5ccb12[_0x4c1f58(0x82e)][_0x4c1f58(0x4db)])??'');let _0x457cad=null;if(!_0xbe206b[_0x4c1f58(0x2c6)])return null;switch(this['logger'][_0x4c1f58(0x798)](this[_0x4c1f58(0x402)]+'\x20('+this[_0x4c1f58(0x770)][_0x4c1f58(0x808)]+_0x4c1f58(0x4a3)+_0x2dbed7),this[_0x4c1f58(0x3cb)][_0x4c1f58(0x798)](this[_0x4c1f58(0x402)]+'\x20('+this[_0x4c1f58(0x770)][_0x4c1f58(0x808)]+_0x4c1f58(0x520)+_0x1d037f),_0xbe206b[_0x4c1f58(0x2c6)]){case'+':case'-':case'*':case'/':let _0x3e76eb=_0x5a5ba8(_0x2dbed7||'0'),_0x5d26bd=_0x5a5ba8(_0x1d037f||'0');if(_0x3e76eb===null)return null;switch(_0xbe206b[_0x4c1f58(0x2c6)]){case'+':_0x457cad=_0x3e76eb+(_0x5d26bd??0x0);break;case'-':_0x457cad=_0x3e76eb-(_0x5d26bd??0x0);break;case'*':_0x457cad=_0x3e76eb*(_0x5d26bd??0x1);break;case'/':_0x5d26bd!==0x0&&(_0x457cad=_0x3e76eb/(_0x5d26bd??0x1));break;}break;case'findAndReplace':case _0x4c1f58(0x91d):let _0x438ef3=_0x1d037f,_0x2152c2=_0xbe206b['replaceValue'];if(typeof _0x2152c2==_0x4c1f58(0x47d)&&(_0x2152c2=this['replaceVariables'](_0x2152c2,_0x5ccb12[_0x4c1f58(0x82e)][_0x4c1f58(0x4db)])??''),_0x438ef3&&_0x2152c2!==void 0x0){let _0x5254a5=_0xbe206b[_0x4c1f58(0x2c6)]==='findAndReplace'?new RegExp(_0x438ef3[_0x4c1f58(0x2a1)](/[-\/\\^$*+?.()|[\]{}]/g,_0x4c1f58(0x441)),'g'):new RegExp(_0x438ef3,'g');_0x457cad=_0x2dbed7[_0x4c1f58(0x2a1)](_0x5254a5,_0x2152c2);}else console[_0x4c1f58(0x41f)](_0x4c1f58(0x739));break;case _0x4c1f58(0x827):_0x457cad=_0x1d037f;break;case'extractRegex':let _0x5a6205=_0x2dbed7[_0x4c1f58(0x52f)](new RegExp(_0x1d037f||''));_0x457cad=_0x5a6205?_0x5a6205[0x0]:'';break;case _0x4c1f58(0x462):_0x457cad=_0x2dbed7['slice'](0x0,parseInt(_0x1d037f||'0'));break;case'truncatedtoEnd':let _0x25daa2=parseInt(_0x1d037f||'0');_0x457cad=_0x2dbed7['slice'](_0x2dbed7['length']-_0x25daa2);break;case _0x4c1f58(0x2fd):let _0x227fe9=_0x5a5ba8(_0x2dbed7),_0x371fff=parseInt(_0x1d037f||'0');_0x371fff=Math[_0x4c1f58(0x78d)](_0x371fff),_0x227fe9!==null?_0x457cad=_0x227fe9[_0x4c1f58(0x207)](_0x4c1f58(0x326),{'minimumFractionDigits':_0x371fff,'maximumFractionDigits':_0x371fff}):(console[_0x4c1f58(0x41f)](_0x4c1f58(0x704)+_0x2dbed7),_0x457cad=null);break;case _0x4c1f58(0x6d1):let _0x38b8a6=_0x5a5ba8(_0x2dbed7);_0x38b8a6!==null?_0x457cad=_0x38b8a6[_0x4c1f58(0x207)](_0x4c1f58(0x326),{'style':'currency','currency':_0x4c1f58(0x4d1)}):(console[_0x4c1f58(0x41f)]('Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20'+_0x2dbed7),_0x457cad=null);break;case _0x4c1f58(0x581):_0x457cad=_0x2dbed7[_0x4c1f58(0x22d)]();break;case _0x4c1f58(0x7a3):_0x457cad=_0x2dbed7['toLowerCase']();break;case _0x4c1f58(0x4f9):_0x457cad=_0x2dbed7[_0x4c1f58(0x292)]('\x20')['map'](_0xb77e22=>_0xb77e22['charAt'](0x0)[_0x4c1f58(0x22d)]()+_0xb77e22[_0x4c1f58(0x4be)](0x1)[_0x4c1f58(0x4a4)]())[_0x4c1f58(0x3c9)]('\x20');break;case'trimmed':_0x457cad=_0x2dbed7[_0x4c1f58(0x3b8)]();break;default:_0x457cad=_0x2dbed7;}return _0x457cad!==null?_0x457cad[_0x4c1f58(0x1fe)]():null;}async['processvaredits'](_0x436088,_0x3c5881){const _0x32cb17=a0_0x34b2dc;try{let _0x2df3d3=_0x436088['varedits']?.['filter'](_0x11bcf8=>_0x11bcf8[_0x32cb17(0x909)]===_0x3c5881[_0x32cb17(0x2c7)]?.[_0x32cb17(0x1fe)]())||[],_0x1746ef=_0x3c5881[_0x32cb17(0x7c9)],_0x4593ad=null,_0x511195=[],_0x1d9f7b=_0x436088[_0x32cb17(0x82e)]['realVariables'][_0x1746ef];_0x511195[_0x32cb17(0x26d)](_0x32cb17(0x411)+_0x1d9f7b+'\x22');for(let _0x1a51f1 of _0x2df3d3){_0x1a51f1['firstValue']=_0x1d9f7b,_0x4593ad=_0x1a51f1[_0x32cb17(0x6a0)];let _0x3b6fae;try{_0x3b6fae=this[_0x32cb17(0x4a0)](_0x436088,_0x1a51f1);}catch(_0x37840e){this['logger'][_0x32cb17(0x651)]('Erro\x20ao\x20aplicar\x20varedit:\x20'+_0x37840e['message']);continue;}if(_0x3b6fae!==null){let _0x1ca048='Operador:\x20\x22'+_0x1a51f1[_0x32cb17(0x2c6)]+'\x22',_0xd1c288=['toBRL',_0x32cb17(0x581),_0x32cb17(0x7a3),_0x32cb17(0x4f9),_0x32cb17(0x65d)];_0x1a51f1[_0x32cb17(0x2c6)]===_0x32cb17(0x85b)||_0x1a51f1[_0x32cb17(0x2c6)]==='findAndReplaceRegex'?_0x1ca048+=_0x32cb17(0x4c9)+_0x1a51f1[_0x32cb17(0x69b)]+_0x32cb17(0x7fc)+_0x1a51f1[_0x32cb17(0x640)]+'\x22':!_0xd1c288[_0x32cb17(0x4c4)](_0x1a51f1[_0x32cb17(0x2c6)])&&_0x1a51f1[_0x32cb17(0x69b)]!==null&&_0x1a51f1[_0x32cb17(0x69b)]!==void 0x0&&(_0x1ca048+=',\x20valor\x20passado:\x20\x22'+_0x1a51f1['secondValue']+'\x22'),_0x1ca048+=_0x32cb17(0x5e3)+_0x3b6fae+'.',_0x511195[_0x32cb17(0x26d)](_0x1ca048);}_0x3b6fae!==null&&(_0x1d9f7b=_0x3b6fae);}if(_0x436088[_0x32cb17(0x82e)][_0x32cb17(0x4db)]&&_0x3c5881['saveVariable']){_0x436088[_0x32cb17(0x82e)]['realVariables'][_0x3c5881[_0x32cb17(0x7c9)]]=_0x1d9f7b;let _0x6b27fd={'variable':_0x3c5881['saveVariable'],'oldValue':_0x4593ad,'newValue':_0x1d9f7b,'moreLogs':_0x511195};try{this[_0x32cb17(0x512)](_0x436088,_0x3c5881,_0x6b27fd);}catch(_0x20a77d){this[_0x32cb17(0x3cb)][_0x32cb17(0x651)](_0x32cb17(0x7d0)+_0x20a77d[_0x32cb17(0x5ce)]);}}return _0x1746ef;}catch(_0x46e7de){return this[_0x32cb17(0x3cb)]['error'](_0x32cb17(0x6f7)+_0x46e7de['message']),null;}}async[a0_0x34b2dc(0x3fc)](_0xe774aa,_0x4e2296){const _0x1d29f7=a0_0x34b2dc;try{let _0x449cd0=[],_0x85d5e6=_0xe774aa[_0x1d29f7(0x4df)][_0x1d29f7(0x334)](_0x4faf66=>_0x4faf66['blockId']===_0x4e2296[_0x1d29f7(0x2c7)][_0x1d29f7(0x1fe)]()),_0x30efe9=null,_0xf6cbe7=!0x1;for(let _0x2fb265 of _0x85d5e6){let _0x549a33=this[_0x1d29f7(0x4a9)](_0xe774aa,_0x2fb265);_0x449cd0[_0x1d29f7(0x26d)](_0x1d29f7(0x3e4)+_0x2fb265[_0x1d29f7(0x6a0)]+_0x1d29f7(0x566)+_0x2fb265[_0x1d29f7(0x696)]+_0x1d29f7(0x60c)+_0x2fb265[_0x1d29f7(0x69b)]+_0x1d29f7(0x513)+_0x549a33),_0x30efe9===null?_0x30efe9=_0x549a33:_0x2fb265[_0x1d29f7(0x33d)]===_0x1d29f7(0x549)?(_0x30efe9=_0x30efe9&&_0x549a33,_0x549a33||(_0xf6cbe7=!0x0)):_0x2fb265[_0x1d29f7(0x33d)]==='or'&&(_0xf6cbe7||(_0x30efe9=_0x30efe9||_0x549a33));}_0x30efe9===null&&(_0x30efe9=!0x0);let _0x123267={'moreLogs':_0x449cd0};_0xe774aa[_0x1d29f7(0x82e)][_0x1d29f7(0x65a)]=_0x30efe9,await this[_0x1d29f7(0x512)](_0xe774aa,_0x4e2296,_0x123267);}catch(_0x48b4dd){this['logger'][_0x1d29f7(0x651)](this[_0x1d29f7(0x402)]+'\x20('+this[_0x1d29f7(0x770)][_0x1d29f7(0x808)]+_0x1d29f7(0x2a5)+(_0x48b4dd instanceof Error?_0x48b4dd[_0x1d29f7(0x5ce)]:JSON[_0x1d29f7(0x43f)](_0x48b4dd,null,0x2)));}}['evaluateCondition'](_0x2d82aa,_0x34abfe){const _0x1fbb57=a0_0x34b2dc;let _0x51508d=_0x34abfe[_0x1fbb57(0x6a0)],_0xa1312c=_0x34abfe[_0x1fbb57(0x69b)];typeof _0x51508d==_0x1fbb57(0x47d)&&(_0x51508d=this[_0x1fbb57(0x572)](_0x51508d,_0x2d82aa[_0x1fbb57(0x82e)][_0x1fbb57(0x4db)])??''),typeof _0xa1312c==_0x1fbb57(0x47d)&&(_0xa1312c=this['replaceVariables'](_0xa1312c,_0x2d82aa[_0x1fbb57(0x82e)][_0x1fbb57(0x4db)])??'');try{switch(_0x34abfe[_0x1fbb57(0x696)]){case _0x1fbb57(0x7bc):return _0x51508d===_0xa1312c;case _0x1fbb57(0x3b0):return _0x51508d!==_0xa1312c;case'contains':return this[_0x1fbb57(0x2fe)](_0x51508d,_0xa1312c);case _0x1fbb57(0x31d):return!this[_0x1fbb57(0x2fe)](_0x51508d,_0xa1312c);case'greater':return parseFloat(_0x51508d)>parseFloat(_0xa1312c);case'less':return parseFloat(_0x51508d)<parseFloat(_0xa1312c);case _0x1fbb57(0x347):return _0x51508d!=='';case _0x1fbb57(0x603):return _0x51508d==='';case'matchRegex':return new RegExp(_0xa1312c)[_0x1fbb57(0x4a6)](_0x51508d);case'notMatchRegex':return!new RegExp(_0xa1312c)[_0x1fbb57(0x4a6)](_0x51508d);default:return!0x1;}}catch(_0x5dbc02){return this['logger']['error'](_0x1fbb57(0x5d7)+_0x5dbc02),!0x1;}}[a0_0x34b2dc(0x2fe)](_0x3d108c,_0x13ddb9){const _0x2a6838=a0_0x34b2dc;if(_0x3d108c===_0x13ddb9&&/^\d+$/[_0x2a6838(0x4a6)](_0x3d108c))return!0x0;if(this[_0x2a6838(0x8ec)](_0x3d108c)&&/^\d+$/[_0x2a6838(0x4a6)](_0x13ddb9)){let _0x559eb9=_0x3d108c['split'](',')[_0x2a6838(0x790)](_0x424fc7=>parseInt(_0x424fc7[_0x2a6838(0x3b8)]())),_0x12c887=parseInt(_0x13ddb9);return _0x559eb9[_0x2a6838(0x4c4)](_0x12c887);}return _0x3d108c['includes'](_0x13ddb9);}[a0_0x34b2dc(0x8ec)](_0x3d3d58){const _0x3ba26d=a0_0x34b2dc;return/^\d+(,\d+)*$/[_0x3ba26d(0x4a6)](_0x3d3d58);}[a0_0x34b2dc(0x6ac)](_0x2e9e7c){const _0x5b76b9=a0_0x34b2dc;let _0xc68da0=!0x0,_0x49821f=null;for(let _0x56de5c of _0x2e9e7c){let _0x8e184c=this[_0x5b76b9(0x5c2)](_0x56de5c);if(_0x49821f==='or'&&_0x8e184c){_0xc68da0=!0x0;break;}if(_0x49821f===_0x5b76b9(0x549)&&!_0x8e184c){_0xc68da0=!0x1;break;}_0x49821f=_0x56de5c[_0x5b76b9(0x33d)];}return _0xc68da0;}['evaluateConditionTest'](_0x21d5ab){const _0x5df6df=a0_0x34b2dc;let _0x31a5bc=_0x21d5ab[_0x5df6df(0x6a0)],_0x42ca10=_0x21d5ab['secondValue'];try{switch(_0x21d5ab[_0x5df6df(0x696)]){case _0x5df6df(0x7bc):return String(_0x31a5bc)===String(_0x42ca10);case _0x5df6df(0x3b0):return String(_0x31a5bc)!==String(_0x42ca10);case _0x5df6df(0x2fe):return String(_0x31a5bc)[_0x5df6df(0x4c4)](String(_0x42ca10));case _0x5df6df(0x31d):return!String(_0x31a5bc)[_0x5df6df(0x4c4)](String(_0x42ca10));case _0x5df6df(0x88c):return parseFloat(String(_0x31a5bc))>parseFloat(String(_0x42ca10));case _0x5df6df(0x221):return parseFloat(String(_0x31a5bc))<parseFloat(String(_0x42ca10));case _0x5df6df(0x347):return String(_0x31a5bc)!=='';case _0x5df6df(0x603):return String(_0x31a5bc)==='';case _0x5df6df(0x327):return new RegExp(String(_0x42ca10))[_0x5df6df(0x4a6)](String(_0x31a5bc));case _0x5df6df(0x6e9):return!new RegExp(String(_0x42ca10))[_0x5df6df(0x4a6)](String(_0x31a5bc));default:return!0x1;}}catch(_0x573ba8){return this[_0x5df6df(0x3cb)]['error']('Erro\x20ao\x20avaliar\x20a\x20condição:\x20'+_0x573ba8),!0x1;}}async[a0_0x34b2dc(0x613)](_0x286553,_0x55ffb5){const _0x1d7efa=a0_0x34b2dc;if(this['logger'][_0x1d7efa(0x798)](this[_0x1d7efa(0x402)]+'\x20('+this[_0x1d7efa(0x770)][_0x1d7efa(0x808)]+'):\x20Entrou\x20na\x20função\x20saveReply'),!_0x286553||!_0x55ffb5)return this[_0x1d7efa(0x3cb)][_0x1d7efa(0x651)](this[_0x1d7efa(0x402)]+'\x20('+this[_0x1d7efa(0x770)][_0x1d7efa(0x808)]+_0x1d7efa(0x534)),null;let _0x38ddb2=_0x286553[_0x1d7efa(0x82e)][_0x1d7efa(0x2ac)][_0x1d7efa(0x85f)]['id'];this[_0x1d7efa(0x3cb)][_0x1d7efa(0x798)](this[_0x1d7efa(0x402)]+'\x20('+this['instance'][_0x1d7efa(0x808)]+'):\x20mediaMessageInfoId\x20:\x20'+_0x38ddb2);let _0x47459b={'key':{'id':_0x38ddb2}},_0x1ddedd=_0x55ffb5['saveVariable'];_0x286553[_0x1d7efa(0x82e)][_0x1d7efa(0x4db)]['_'+_0x1ddedd+_0x1d7efa(0x4e1)]=null,_0x286553[_0x1d7efa(0x82e)]['realVariables']['_'+_0x1ddedd+_0x1d7efa(0x64e)]=null,_0x286553[_0x1d7efa(0x82e)]['realVariables']['_'+_0x1ddedd+_0x1d7efa(0x858)]=null,_0x286553['chatLog'][_0x1d7efa(0x4db)]['_'+_0x1ddedd+_0x1d7efa(0x796)]=_0x286553[_0x1d7efa(0x82e)][_0x1d7efa(0x2ac)][_0x1d7efa(0x248)];try{let _0x1e8a1e=await this[_0x1d7efa(0x771)](_0x47459b);this[_0x1d7efa(0x3cb)][_0x1d7efa(0x798)](this[_0x1d7efa(0x402)]+'\x20('+this[_0x1d7efa(0x770)][_0x1d7efa(0x808)]+_0x1d7efa(0x754)),_0x286553[_0x1d7efa(0x82e)][_0x1d7efa(0x4db)]['_'+_0x1ddedd+_0x1d7efa(0x4ac)]=_0x1e8a1e[_0x1d7efa(0x438)],_0x286553[_0x1d7efa(0x82e)]['realVariables']['_'+_0x1ddedd+'.mimetype']=_0x1e8a1e[_0x1d7efa(0x8ac)];let _0x7d2ddf=_0x1e8a1e[_0x1d7efa(0x8ac)][_0x1d7efa(0x52f)](/\/(\w+)$/),_0x222b0c=_0x7d2ddf?_0x7d2ddf[0x1]:null;_0x286553[_0x1d7efa(0x82e)][_0x1d7efa(0x4db)]['_'+_0x1ddedd+_0x1d7efa(0x858)]=_0x222b0c,this['logger']['verbose'](this[_0x1d7efa(0x402)]+'\x20('+this[_0x1d7efa(0x770)][_0x1d7efa(0x808)]+_0x1d7efa(0x564)+_0x1ddedd+'\x27.');}catch(_0x59c0be){this[_0x1d7efa(0x3cb)][_0x1d7efa(0x651)](this[_0x1d7efa(0x402)]+'\x20('+this[_0x1d7efa(0x770)][_0x1d7efa(0x808)]+'):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20'+_0x59c0be[_0x1d7efa(0x5ce)]);}let _0xdbf572=_0x286553['chatLog'][_0x1d7efa(0x2ac)][_0x1d7efa(0x6b6)]||_0x286553[_0x1d7efa(0x82e)][_0x1d7efa(0x2ac)][_0x1d7efa(0x39d)]||_0x286553['chatLog'][_0x1d7efa(0x2ac)][_0x1d7efa(0x77c)];try{_0x286553[_0x1d7efa(0x82e)][_0x1d7efa(0x4db)]||(_0x286553[_0x1d7efa(0x82e)]['realVariables']={});let _0x10669f=_0x286553[_0x1d7efa(0x82e)]['realVariables'][_0x1ddedd];_0x286553[_0x1d7efa(0x82e)]['realVariables'][_0x1ddedd]=_0xdbf572;let _0x34f1f0={'variable':_0x1ddedd,'oldValue':_0x10669f,'newValue':_0xdbf572};this[_0x1d7efa(0x512)](_0x286553,_0x55ffb5,_0x34f1f0),this[_0x1d7efa(0x3cb)][_0x1d7efa(0x798)](this[_0x1d7efa(0x402)]+'\x20('+this['instance'][_0x1d7efa(0x808)]+_0x1d7efa(0x72c));}catch(_0x1b5989){let _0x1f083d={'error':!0x0,'errorLog':_0x1b5989['toString']()};return this['updateConversation'](_0x286553,_0x55ffb5,_0x1f083d),this[_0x1d7efa(0x3cb)][_0x1d7efa(0x651)](this[_0x1d7efa(0x402)]+'\x20('+this[_0x1d7efa(0x770)][_0x1d7efa(0x808)]+_0x1d7efa(0x2b8)+(_0x1b5989 instanceof Error?_0x1b5989[_0x1d7efa(0x5ce)]:JSON[_0x1d7efa(0x43f)](_0x1b5989,null,0x2))),null;}}async[a0_0x34b2dc(0x717)](_0x6852e7,_0x4ff776){const _0x48cebe=a0_0x34b2dc;if(this[_0x48cebe(0x3cb)][_0x48cebe(0x798)](this[_0x48cebe(0x402)]+'\x20('+this[_0x48cebe(0x770)][_0x48cebe(0x808)]+_0x48cebe(0x674)),!_0x6852e7||!_0x4ff776)return this[_0x48cebe(0x3cb)][_0x48cebe(0x651)](this[_0x48cebe(0x402)]+'\x20('+this[_0x48cebe(0x770)][_0x48cebe(0x808)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x5d71ec=Date[_0x48cebe(0x880)](),_0x54a53a=parseInt(_0x4ff776[_0x48cebe(0x72f)],0xa);if(isNaN(_0x54a53a))return this[_0x48cebe(0x3cb)][_0x48cebe(0x651)](this[_0x48cebe(0x402)]+'\x20('+this[_0x48cebe(0x770)][_0x48cebe(0x808)]+_0x48cebe(0x59b)),null;let _0x3b2326={'newStoppedUntil':_0x5d71ec+_0x54a53a*0x3c*0x3e8};return await this[_0x48cebe(0x512)](_0x6852e7,_0x4ff776,_0x3b2326,!0x0),null;}async[a0_0x34b2dc(0x7fb)](_0xe3b335,_0x12f53f){const _0x500ea8=a0_0x34b2dc;try{switch(_0x12f53f[_0x500ea8(0x7dc)][_0x500ea8(0x50e)]){case _0x500ea8(0x8a1):await this['uazapiSendText'](_0xe3b335,_0x12f53f);break;case _0x500ea8(0x52c):await this['uazapiSendMedia'](_0xe3b335,_0x12f53f);break;case'sendLocation':await this[_0x500ea8(0x8b2)](_0xe3b335,_0x12f53f);break;case _0x500ea8(0x200):await this[_0x500ea8(0x921)](_0xe3b335,_0x12f53f);break;case'sendContact':await this['uazapiSendContact'](_0xe3b335,_0x12f53f);break;case _0x500ea8(0x34f):await this[_0x500ea8(0x75b)](_0xe3b335,_0x12f53f);break;case _0x500ea8(0x7c6):await this[_0x500ea8(0x75b)](_0xe3b335,_0x12f53f);break;case _0x500ea8(0x2e1):await this[_0x500ea8(0x2d8)](_0xe3b335,_0x12f53f);break;default:this['logger'][_0x500ea8(0x651)](this[_0x500ea8(0x402)]+'\x20('+this[_0x500ea8(0x770)][_0x500ea8(0x808)]+_0x500ea8(0x234)+_0x12f53f[_0x500ea8(0x7dc)][_0x500ea8(0x50e)]);}}catch(_0x1381da){this[_0x500ea8(0x3cb)][_0x500ea8(0x651)](this[_0x500ea8(0x402)]+'\x20('+this[_0x500ea8(0x770)]['wuid']+_0x500ea8(0x670)+(_0x1381da instanceof Error?_0x1381da[_0x500ea8(0x5ce)]:JSON[_0x500ea8(0x43f)](_0x1381da,null,0x2)));}}async['updateConversation'](_0x2a5c4f,_0x5cc745,_0x3df469,_0x6a3d1=!0x1,_0x28e07b=!0x1){const _0x4f3d5e=a0_0x34b2dc;_0x2a5c4f[_0x4f3d5e(0x82e)]['blockLogs']||(_0x2a5c4f['chatLog']['blockLogs']=[]);let _0xd674d0=(_0x2a5c4f[_0x4f3d5e(0x82e)][_0x4f3d5e(0x3e1)]?.[_0x4f3d5e(0x3a3)]??0x0)+0x1,_0x3bfb94=_0x2a5c4f['chatLog']['blockLogs'][_0x4f3d5e(0x334)](_0x134a73=>String(_0x134a73[_0x4f3d5e(0x909)])===String(_0x5cc745[_0x4f3d5e(0x2c7)]))['length']+0x1,_0xb93fe9=_0x3df469?.[_0x4f3d5e(0x3c3)]??Date[_0x4f3d5e(0x880)](),_0x259869=_0x3df469?.[_0x4f3d5e(0x651)]?_0x3df469[_0x4f3d5e(0x7e5)]??_0x3df469[_0x4f3d5e(0x651)]['toString']():void 0x0,_0x45bc9b={'onTime':_0xb93fe9,'blockId':_0x5cc745[_0x4f3d5e(0x2c7)],'order':_0xd674d0,'activatedCount':_0x3bfb94,'error':_0x3df469?.['error']??!0x1,'messageId':_0x3df469?.[_0x4f3d5e(0x3b5)],'apiResponse':_0x3df469?.[_0x4f3d5e(0x473)],'apiResponseString':_0x3df469?.[_0x4f3d5e(0x473)]?JSON[_0x4f3d5e(0x43f)](_0x3df469?.[_0x4f3d5e(0x473)]):void 0x0,'variable':_0x3df469?.[_0x4f3d5e(0x7ff)],'oldValue':_0x3df469?.[_0x4f3d5e(0x47b)],'newValue':_0x3df469?.[_0x4f3d5e(0x6eb)],'newStoppedUntil':_0x3df469?.['newStoppedUntil'],'moreLogs':_0x3df469?.[_0x4f3d5e(0x422)],'errorLog':_0x259869};if(_0x3df469['moreLogs']&&_0x3df469[_0x4f3d5e(0x422)][_0x4f3d5e(0x3a3)]>0x0){let _0x4dd9ca=_0x3df469['moreLogs'][_0x4f3d5e(0x790)](_0x13fc3c=>this[_0x4f3d5e(0x4a7)](_0x13fc3c,_0x2a5c4f['chatLog'][_0x4f3d5e(0x4db)]));_0x45bc9b[_0x4f3d5e(0x422)]=_0x4dd9ca;}if(_0x2a5c4f[_0x4f3d5e(0x82e)][_0x4f3d5e(0x4db)]||(_0x2a5c4f[_0x4f3d5e(0x82e)]['realVariables']={}),_0x2a5c4f[_0x4f3d5e(0x82e)][_0x4f3d5e(0x4db)]['_activatedCount']=String(_0x3bfb94),_0x2a5c4f['chatLog']['realVariables'][_0x4f3d5e(0x610)]=String(_0x3df469[_0x4f3d5e(0x651)]??!0x1),_0x2a5c4f[_0x4f3d5e(0x82e)][_0x4f3d5e(0x3e1)][_0x4f3d5e(0x26d)](_0x45bc9b),_0x2a5c4f[_0x4f3d5e(0x82e)]['realVariables'][_0x4f3d5e(0x79a)]&&_0x2a5c4f[_0x4f3d5e(0x82e)][_0x4f3d5e(0x4db)]['telefone']!==_0x2a5c4f[_0x4f3d5e(0x668)]){let _0x26d68c=(await this[_0x4f3d5e(0x70c)]({'numbers':[_0x2a5c4f['chatLog'][_0x4f3d5e(0x4db)]['telefone']]}))[0x0][_0x4f3d5e(0x5f0)];_0x2a5c4f['chatLog'][_0x4f3d5e(0x4db)][_0x4f3d5e(0x79a)]=_0x26d68c,_0x2a5c4f['remoteJid']=_0x26d68c;try{let _0x15c012={'_id':{'$ne':_0x2a5c4f[_0x4f3d5e(0x2c7)]},'remoteJid':_0x26d68c,'status':_0x4f3d5e(0x5a2)},_0x430eb5={'status':_0x4f3d5e(0x688)};await this[_0x4f3d5e(0x261)]['flowConversation']['updateMany'](_0x15c012,_0x430eb5,this['instance'][_0x4f3d5e(0x808)]),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x4f3d5e(0x770)][_0x4f3d5e(0x808)]+_0x4f3d5e(0x4dd));}catch(_0x29c582){this[_0x4f3d5e(0x3cb)]['error'](this[_0x4f3d5e(0x402)]+'\x20('+this['instance']['wuid']+_0x4f3d5e(0x398)+_0x29c582['message']);}try{let _0x46c554=_0x2a5c4f[_0x4f3d5e(0x82e)][_0x4f3d5e(0x4db)],_0x12b8b2=await this['getVariablesChat'](_0x26d68c),_0x4af4d1={..._0x46c554,..._0x12b8b2,'_remoteJid':_0x26d68c};_0x2a5c4f[_0x4f3d5e(0x82e)][_0x4f3d5e(0x4db)]=_0x4af4d1;}catch(_0x2487ad){this['logger'][_0x4f3d5e(0x651)](this[_0x4f3d5e(0x402)]+'\x20('+this[_0x4f3d5e(0x770)]['wuid']+_0x4f3d5e(0x6f1)+_0x2487ad['message']);}}_0x2a5c4f[_0x4f3d5e(0x82e)]['lastBlockId']=_0x5cc745[_0x4f3d5e(0x2c7)][_0x4f3d5e(0x1fe)](),_0x2a5c4f[_0x4f3d5e(0x82e)][_0x4f3d5e(0x2f8)]&&(_0x2a5c4f['chatLog'][_0x4f3d5e(0x2f8)]=_0x2a5c4f[_0x4f3d5e(0x82e)]['lastSendMessage']),_0x2a5c4f[_0x4f3d5e(0x82e)]['lastReceivedMessage']&&(_0x2a5c4f[_0x4f3d5e(0x82e)]['lastReceivedMessage']=_0x2a5c4f[_0x4f3d5e(0x82e)][_0x4f3d5e(0x2ac)]),_0x2a5c4f[_0x4f3d5e(0x82e)][_0x4f3d5e(0x65a)]&&(_0x2a5c4f[_0x4f3d5e(0x82e)]['lastCondition']=_0x2a5c4f[_0x4f3d5e(0x82e)][_0x4f3d5e(0x65a)]),_0x28e07b&&(_0x2a5c4f[_0x4f3d5e(0x71c)]=_0x4f3d5e(0x688)),_0x6a3d1?this[_0x4f3d5e(0x550)](_0x2a5c4f):this['goNextblock'](_0x2a5c4f,_0x5cc745);}[a0_0x34b2dc(0x4a7)](_0x8ed843,_0x4edb6f){const _0xfdc652=a0_0x34b2dc;return _0x8ed843[_0xfdc652(0x2a1)](/\{\{([^}]+)\}\}/g,(_0x5a831d,_0xcbba08)=>_0x4edb6f[_0xcbba08]?'{{'+_0xcbba08+_0xfdc652(0x889)+_0x4edb6f[_0xcbba08]+'\x22':'{{'+_0xcbba08+_0xfdc652(0x471));}async[a0_0x34b2dc(0x550)](_0x19bfeb){const _0xc709a1=a0_0x34b2dc;try{let _0x2b33c4=Object[_0xc709a1(0x631)](_0x19bfeb['chatLog'][_0xc709a1(0x4db)])[_0xc709a1(0x790)](([_0x54a458,_0x45791e])=>({'name':_0x54a458,'value':_0x45791e})),_0x11a07a={'status':_0x19bfeb[_0xc709a1(0x71c)],'remoteJid':_0x19bfeb[_0xc709a1(0x668)],'blocks':_0x19bfeb['blocks'],'waitingMenu_id':_0x19bfeb[_0xc709a1(0x8dc)],'waitingMenu_text':_0x19bfeb[_0xc709a1(0x2f1)],'waitingMenu_replyOptions':_0x19bfeb[_0xc709a1(0x904)],'chatLog':{'lastBlockId':_0x19bfeb['chatLog'][_0xc709a1(0x264)],'lastSendMessage':_0x19bfeb['chatLog']['lastSendMessage'],'lastReceivedMessage':_0x19bfeb[_0xc709a1(0x82e)][_0xc709a1(0x2ac)],'lastCondition':_0x19bfeb[_0xc709a1(0x82e)][_0xc709a1(0x65a)],'chatVariables':_0x2b33c4,'realVariables':_0x19bfeb[_0xc709a1(0x82e)]['realVariables'],'blockLogs':_0x19bfeb['chatLog'][_0xc709a1(0x3e1)]}},_0x45b8ce=await this[_0xc709a1(0x261)][_0xc709a1(0x2c3)][_0xc709a1(0x6ce)](_0x19bfeb[_0xc709a1(0x2c7)],_0x11a07a,this['instance'][_0xc709a1(0x808)]);if(_0x45b8ce){this[_0xc709a1(0x3cb)][_0xc709a1(0x798)](this['instanceName']+'\x20('+this['instance'][_0xc709a1(0x808)]+_0xc709a1(0x686)+_0x45b8ce[_0xc709a1(0x2c7)]);try{let _0x3bac6d=[_0xc709a1(0x239),_0xc709a1(0x538),_0xc709a1(0x806),_0xc709a1(0x4d7),'status',_0xc709a1(0x715),'responsavelid',_0xc709a1(0x699),'etiquetas',_0xc709a1(0x7ad)];if(!this[_0xc709a1(0x3f7)]&&(await this[_0xc709a1(0x3fb)](),!this[_0xc709a1(0x3f7)]))throw new Error('AutomateSystem\x20não\x20foi\x20inicializado');let _0x2fc18d=this['AutomateSystem']?.[_0xc709a1(0x883)]['map'](_0x2c12d3=>_0x2c12d3['name']),_0x47bee5={};Object[_0xc709a1(0x631)](_0x19bfeb[_0xc709a1(0x82e)][_0xc709a1(0x4db)])[_0xc709a1(0x3f2)](([_0x1d7ffe,_0x11bdbf])=>{const _0x65c83d=_0xc709a1;_0x3bac6d[_0x65c83d(0x4c4)](_0x1d7ffe)&&(_0x1d7ffe===_0x65c83d(0x699)&&typeof _0x11bdbf=='string'?_0x47bee5[_0x1d7ffe]=_0x11bdbf[_0x65c83d(0x292)](',')[_0x65c83d(0x790)](_0x1b71a2=>_0x1b71a2[_0x65c83d(0x3b8)]())[_0x65c83d(0x334)](_0x2db319=>_0x2db319!==''):_0x1d7ffe==='etiquetas'&&typeof _0x11bdbf==_0x65c83d(0x47d)?_0x47bee5[_0x1d7ffe]=_0x11bdbf[_0x65c83d(0x292)](',')[_0x65c83d(0x790)](_0x38d8aa=>_0x38d8aa['trim']())[_0x65c83d(0x334)](_0x5e10d1=>_0x5e10d1!==''):_0x47bee5[_0x1d7ffe]=_0x11bdbf);});let _0x44ea11=_0x19bfeb[_0xc709a1(0x82e)][_0xc709a1(0x3e1)][_0x19bfeb[_0xc709a1(0x82e)][_0xc709a1(0x3e1)][_0xc709a1(0x3a3)]-0x1];if(_0x44ea11){let _0x28e99c=_0x44ea11[_0xc709a1(0x277)];_0x28e99c!==void 0x0&&(_0x47bee5['desativadoFluxoAte']=_0x28e99c[_0xc709a1(0x1fe)]());}let _0x467835=_0x2b33c4[_0xc709a1(0x334)](_0x821c84=>_0x2fc18d['includes'](_0x821c84[_0xc709a1(0x673)]));this[_0xc709a1(0x3cb)][_0xc709a1(0x798)](this[_0xc709a1(0x402)]+'\x20('+this[_0xc709a1(0x770)][_0xc709a1(0x808)]+_0xc709a1(0x276)),this[_0xc709a1(0x3cb)][_0xc709a1(0x798)](_0x47bee5),this[_0xc709a1(0x3cb)][_0xc709a1(0x798)](this[_0xc709a1(0x402)]+'\x20('+this[_0xc709a1(0x770)]['wuid']+_0xc709a1(0x79b)),this['logger']['verbose'](_0x467835);let _0xbe417c=_0x467835[_0xc709a1(0x790)](_0x40c018=>{const _0x1da9f6=_0xc709a1;let _0x49cd70=this['AutomateSystem']?.['customFields'][_0x1da9f6(0x253)](_0x233abf=>_0x233abf[_0x1da9f6(0x673)]===_0x40c018[_0x1da9f6(0x673)]);if(!_0x49cd70)throw new Error('Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20'+_0x40c018[_0x1da9f6(0x673)]);return{'_id':_0x49cd70['_id'],'value':_0x40c018['value']};});this[_0xc709a1(0x3cb)][_0xc709a1(0x798)](this['instanceName']+'\x20('+this[_0xc709a1(0x770)][_0xc709a1(0x808)]+_0xc709a1(0x2ad)),this['logger'][_0xc709a1(0x798)](_0xbe417c),await this['saveChatVariables'](_0x19bfeb[_0xc709a1(0x668)],_0x47bee5,_0xbe417c);}catch(_0x104353){this[_0xc709a1(0x3cb)][_0xc709a1(0x651)](this[_0xc709a1(0x402)]+'\x20('+this[_0xc709a1(0x770)][_0xc709a1(0x808)]+_0xc709a1(0x8fb)+(_0x104353 instanceof Error?_0x104353[_0xc709a1(0x5ce)]:JSON['stringify'](_0x104353,null,0x2)));}}else this[_0xc709a1(0x3cb)][_0xc709a1(0x651)](this[_0xc709a1(0x402)]+'\x20('+this[_0xc709a1(0x770)][_0xc709a1(0x808)]+'):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida');}catch(_0x3bcc8a){this['logger'][_0xc709a1(0x651)](this[_0xc709a1(0x402)]+'\x20('+this['instance'][_0xc709a1(0x808)]+_0xc709a1(0x29c)+(_0x3bcc8a instanceof Error?_0x3bcc8a[_0xc709a1(0x5ce)]:JSON[_0xc709a1(0x43f)](_0x3bcc8a,null,0x2)));}}async['saveChatVariables'](_0x16ab89,_0x380cab,_0x5db076){const _0x45f00c=a0_0x34b2dc;try{let _0x3f4dc1={'leadInfo.leadnome':_0x380cab[_0x45f00c(0x239)],'leadInfo.nomecompleto':_0x380cab['nomecompleto'],'leadInfo.email':_0x380cab['email'],'leadInfo.cpf':_0x380cab[_0x45f00c(0x4d7)],'leadInfo.status':_0x380cab[_0x45f00c(0x71c)],'leadInfo.notas':_0x380cab['notas'],'leadInfo.responsavelid':_0x380cab[_0x45f00c(0x88d)],'leadInfo.tags':_0x380cab[_0x45f00c(0x699)],'leadInfo.etiquetas':_0x380cab[_0x45f00c(0x335)],'leadInfo.customFields':_0x5db076,'leadInfo.atendimentoAberto':_0x380cab[_0x45f00c(0x7ad)]},_0xcedb71=await this[_0x45f00c(0x261)]['chat']['findOne']({'where':{'_id':_0x16ab89}},this['instance'][_0x45f00c(0x808)]);if(!_0xcedb71)return _0x45f00c(0x5a6);let _0x4db029=new Set(_0xcedb71['leadInfo'][_0x45f00c(0x335)]||[]),_0x367914=new Set(_0x380cab['etiquetas']||[]),_0x9ef0f1=await this[_0x45f00c(0x261)][_0x45f00c(0x8fd)]['find']({'where':{}},this[_0x45f00c(0x770)][_0x45f00c(0x808)]),_0x13d400=new Set(_0x9ef0f1[_0x45f00c(0x790)](_0x3909e2=>_0x3909e2[_0x45f00c(0x2c7)])),_0x10ba25=[..._0x367914][_0x45f00c(0x334)](_0x26c131=>!_0x4db029['has'](_0x26c131)&&_0x13d400[_0x45f00c(0x333)](_0x26c131)),_0x48ae87=[..._0x4db029][_0x45f00c(0x334)](_0x4d1635=>!_0x367914[_0x45f00c(0x333)](_0x4d1635));for(let _0x37d404 of _0x10ba25)await this[_0x45f00c(0x53f)](_0x37d404,_0xcedb71['_id']),_0x4db029[_0x45f00c(0x420)](_0x37d404);for(let _0x4d8df6 of _0x48ae87)await this[_0x45f00c(0x58f)](_0x4d8df6,_0xcedb71[_0x45f00c(0x2c7)]),_0x4db029[_0x45f00c(0x366)](_0x4d8df6);if('desativadoFluxoAte'in _0x380cab){let _0x3efb00=_0x380cab[_0x45f00c(0x8a3)];_0x3f4dc1[_0x45f00c(0x4cb)]=_0x3efb00?Number(_0x3efb00):null;}if(_0x45f00c(0x7ad)in _0x380cab){let _0x3d1175=_0x380cab[_0x45f00c(0x7ad)][_0x45f00c(0x4a4)]();_0x3f4dc1[_0x45f00c(0x285)]=_0x3d1175==='true'||_0x3d1175==='1'||_0x3d1175===_0x45f00c(0x4c1)||_0x3d1175==='sim';}let _0x1b6b83=await this[_0x45f00c(0x261)][_0x45f00c(0x89d)][_0x45f00c(0x6ce)]({'where':{'_id':_0x16ab89}},_0x3f4dc1,this[_0x45f00c(0x770)][_0x45f00c(0x808)]);_0x1b6b83?(this[_0x45f00c(0x3cb)][_0x45f00c(0x798)](this[_0x45f00c(0x402)]+'\x20('+this[_0x45f00c(0x770)]['wuid']+'):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20'+_0x1b6b83[_0x45f00c(0x2c7)]),q(this['instanceName'],_0x45f00c(0x88b),{'chat':_0x1b6b83})):this[_0x45f00c(0x3cb)]['error'](this['instanceName']+'\x20('+this['instance'][_0x45f00c(0x808)]+_0x45f00c(0x79d));}catch(_0x27f047){this[_0x45f00c(0x3cb)][_0x45f00c(0x651)](this[_0x45f00c(0x402)]+'\x20('+this[_0x45f00c(0x770)][_0x45f00c(0x808)]+_0x45f00c(0x5cb)+(_0x27f047 instanceof Error?_0x27f047['message']:JSON[_0x45f00c(0x43f)](_0x27f047,null,0x2)));}}async[a0_0x34b2dc(0x412)](_0x27d184,_0x3b3025){const _0x2bd188=a0_0x34b2dc;this[_0x2bd188(0x3cb)][_0x2bd188(0x798)](this[_0x2bd188(0x402)]+'\x20('+this[_0x2bd188(0x770)]['wuid']+_0x2bd188(0x8ad)+_0x3b3025);try{let _0x3f646f=await this[_0x2bd188(0x261)][_0x2bd188(0x89d)]['updateOne']({'where':{'_id':_0x27d184[_0x2bd188(0x668)]}},{'leadInfo.desativadoFluxoAte':_0x3b3025},this['instance'][_0x2bd188(0x808)]);this[_0x2bd188(0x3cb)][_0x2bd188(0x798)](this[_0x2bd188(0x402)]+'\x20('+this[_0x2bd188(0x770)][_0x2bd188(0x808)]+_0x2bd188(0x469)+_0x27d184[_0x2bd188(0x2c7)]),this[_0x2bd188(0x3cb)][_0x2bd188(0x798)](this[_0x2bd188(0x402)]+'\x20('+this[_0x2bd188(0x770)][_0x2bd188(0x808)]+_0x2bd188(0x8ad)+JSON[_0x2bd188(0x43f)](_0x3f646f,null,0x2)),_0x3f646f&&q(this['instanceName'],_0x2bd188(0x88b),{'chat':_0x3f646f});}catch(_0x362154){this['logger'][_0x2bd188(0x651)](this[_0x2bd188(0x402)]+'\x20('+this[_0x2bd188(0x770)][_0x2bd188(0x808)]+_0x2bd188(0x46c)+(_0x362154 instanceof Error?_0x362154[_0x2bd188(0x5ce)]:JSON[_0x2bd188(0x43f)](_0x362154,null,0x2)));}}async[a0_0x34b2dc(0x644)](_0x2535ec){const _0x856779=a0_0x34b2dc;try{this[_0x856779(0x3cb)][_0x856779(0x798)](this[_0x856779(0x402)]+'\x20('+this['instance']['wuid']+'):\x20Buscando\x20flow...');let _0x404fde=_0x2535ec[_0x856779(0x2a1)](/\D/g,''),_0x4ee750=this[_0x856779(0x3f7)][_0x856779(0x4b9)][_0x856779(0x253)](_0x1043ee=>_0x1043ee[_0x856779(0x679)]===_0x404fde);if(_0x4ee750||(this[_0x856779(0x3cb)][_0x856779(0x798)](this[_0x856779(0x402)]+'\x20('+this[_0x856779(0x770)][_0x856779(0x808)]+'):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...'),_0x4ee750=this[_0x856779(0x3f7)][_0x856779(0x4b9)][_0x856779(0x253)](_0x24c4eb=>_0x24c4eb['default']===!0x0)),!_0x4ee750)return this[_0x856779(0x3cb)][_0x856779(0x798)](this[_0x856779(0x402)]+'\x20('+this[_0x856779(0x770)][_0x856779(0x808)]+_0x856779(0x218)),null;let _0x235333=await this[_0x856779(0x261)]['flow']['findOne']({'where':{'_id':_0x4ee750['_id']}});if(!_0x235333||!_0x235333[_0x856779(0x5e4)]?.[_0x856779(0x4c4)](this[_0x856779(0x770)][_0x856779(0x808)]))throw this['logger'][_0x856779(0x651)](this[_0x856779(0x402)]+'\x20('+this[_0x856779(0x770)][_0x856779(0x808)]+'):\x20Flow\x20\x27'+_0x235333[_0x856779(0x2c7)]+_0x856779(0x457)),new m(_0x856779(0x4b4)+_0x235333[_0x856779(0x2c7)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');return _0x235333;}catch(_0x25fd1e){return this['logger']['error'](this['instanceName']+'\x20('+this[_0x856779(0x770)][_0x856779(0x808)]+_0x856779(0x5fc)+(_0x25fd1e instanceof Error?_0x25fd1e[_0x856779(0x5ce)]:JSON[_0x856779(0x43f)](_0x25fd1e,null,0x2))),null;}}async[a0_0x34b2dc(0x244)](_0x23efbd,_0x4a9640){const _0x2717fa=a0_0x34b2dc;try{let _0x32ab22=!!_0x4a9640[_0x2717fa(0x77c)],_0x568d20=_0x4a9640[_0x2717fa(0x735)],_0x2ec659=null;if(this[_0x2717fa(0x3cb)]['verbose'](this[_0x2717fa(0x402)]+'\x20('+this['instance'][_0x2717fa(0x808)]+_0x2717fa(0x8a6)+_0x32ab22+_0x2717fa(0x477)+_0x568d20),_0x32ab22){this[_0x2717fa(0x3cb)][_0x2717fa(0x798)](this[_0x2717fa(0x402)]+'\x20('+this[_0x2717fa(0x770)][_0x2717fa(0x808)]+_0x2717fa(0x76a));let _0x5f5b62={'where':{'remoteJid':_0x23efbd,'waitingMenu_id':_0x568d20}};if(_0x2ec659=await this[_0x2717fa(0x261)][_0x2717fa(0x2c3)][_0x2717fa(0x440)](_0x5f5b62,this['instance']['wuid']),!_0x2ec659)return this['logger'][_0x2717fa(0x798)](this[_0x2717fa(0x402)]+'\x20('+this[_0x2717fa(0x770)][_0x2717fa(0x808)]+_0x2717fa(0x2c5)),null;let _0x30fa11=Date[_0x2717fa(0x880)](),_0x20f9f9=_0x2ec659?.[_0x2717fa(0x41b)]||0x0,_0x54b5bc=_0x30fa11-_0x20f9f9*0x3c*0x3e8;if(_0x2ec659[_0x2717fa(0x55f)]<_0x54b5bc){this[_0x2717fa(0x3cb)][_0x2717fa(0x798)](this[_0x2717fa(0x402)]+'\x20('+this['instance'][_0x2717fa(0x808)]+_0x2717fa(0x874));let _0x25842b={'number':_0x2ec659[_0x2717fa(0x668)],'options':{'delay':0x0},'textMessage':{'text':_0x2ec659['waitingMenu_ExpiredMessage']}};await this[_0x2717fa(0x876)](_0x25842b);let _0x46bbc6={'status':'closed','waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x2717fa(0x261)][_0x2717fa(0x2c3)][_0x2717fa(0x6ce)](_0x2ec659[_0x2717fa(0x2c7)],_0x46bbc6,this[_0x2717fa(0x770)]['wuid']),null;}return _0x2ec659[_0x2717fa(0x55f)]=Date[_0x2717fa(0x880)](),_0x2ec659['chatLog'][_0x2717fa(0x2ac)]=_0x4a9640,_0x2ec659;}else{this[_0x2717fa(0x3cb)][_0x2717fa(0x798)](this[_0x2717fa(0x402)]+'\x20('+this[_0x2717fa(0x770)][_0x2717fa(0x808)]+_0x2717fa(0x4b7)+this[_0x2717fa(0x770)][_0x2717fa(0x808)]+'\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário'),this[_0x2717fa(0x3cb)][_0x2717fa(0x798)](this['instanceName']+'\x20('+this[_0x2717fa(0x770)]['wuid']+_0x2717fa(0x4f3));let _0x2e1e99={'where':{'remoteJid':_0x23efbd,'status':'open'}};if(_0x2ec659=await this[_0x2717fa(0x261)]['flowConversation'][_0x2717fa(0x440)](_0x2e1e99,this[_0x2717fa(0x770)]['wuid']),!_0x2ec659){let _0x526a04=await this['findFlow'](_0x23efbd);if(_0x526a04&&(_0x2ec659=await this[_0x2717fa(0x890)](_0x526a04,_0x4a9640['key'],_0x4a9640)),!_0x2ec659)return null;}let _0x37f96d=Date[_0x2717fa(0x880)](),_0x2c8431=_0x2ec659?.['minutesToClose']||0x0,_0x245fec=_0x37f96d-_0x2c8431*0x3c*0x3e8;if(this[_0x2717fa(0x3cb)]['verbose'](this[_0x2717fa(0x402)]+'\x20('+this[_0x2717fa(0x770)]['wuid']+_0x2717fa(0x1f4)+_0x37f96d+_0x2717fa(0x3d0)+_0x2c8431+_0x2717fa(0x59a)+_0x245fec),this['logger'][_0x2717fa(0x798)](this[_0x2717fa(0x402)]+'\x20('+this[_0x2717fa(0x770)][_0x2717fa(0x808)]+_0x2717fa(0x447)),this[_0x2717fa(0x3cb)][_0x2717fa(0x798)](this[_0x2717fa(0x402)]+'\x20('+this[_0x2717fa(0x770)][_0x2717fa(0x808)]+_0x2717fa(0x5d4)+_0x2ec659['lastInteraction']),this['logger'][_0x2717fa(0x798)](this['instanceName']+'\x20('+this[_0x2717fa(0x770)][_0x2717fa(0x808)]+_0x2717fa(0x2e5)+_0x245fec),_0x2ec659['lastInteraction']<_0x245fec){this[_0x2717fa(0x3cb)][_0x2717fa(0x798)](this[_0x2717fa(0x402)]+'\x20('+this[_0x2717fa(0x770)]['wuid']+_0x2717fa(0x8b3));let _0x2277cf=await this[_0x2717fa(0x644)](_0x23efbd);if(_0x2277cf===null)return null;_0x2ec659&&await this[_0x2717fa(0x261)]['flowConversation'][_0x2717fa(0x6ce)](_0x2ec659['_id'],{'status':_0x2717fa(0x688)},this['instance'][_0x2717fa(0x808)]),_0x2ec659=await this[_0x2717fa(0x890)](_0x2277cf,_0x4a9640[_0x2717fa(0x85f)],_0x4a9640);}return _0x2ec659[_0x2717fa(0x55f)]=_0x37f96d,_0x2ec659['chatLog']['lastReceivedMessage']=_0x4a9640,_0x2ec659;}}catch(_0x103022){return this[_0x2717fa(0x3cb)]['error'](this[_0x2717fa(0x402)]+'\x20('+this[_0x2717fa(0x770)][_0x2717fa(0x808)]+_0x2717fa(0x275)+(_0x103022 instanceof Error?_0x103022[_0x2717fa(0x5ce)]:JSON[_0x2717fa(0x43f)](_0x103022,null,0x2))),null;}}async['createNewConversation'](_0x50632c,_0x342ad0,_0x2be017){const _0x182ef7=a0_0x34b2dc;this[_0x182ef7(0x3cb)][_0x182ef7(0x798)](this[_0x182ef7(0x402)]+'\x20('+this[_0x182ef7(0x770)][_0x182ef7(0x808)]+_0x182ef7(0x675));try{let _0x196ba9=require('mongodb')['ObjectId'],_0x13ba53=Date[_0x182ef7(0x880)](),_0x188522='start',_0x19b125=_0x342ad0['fromMe']?null:_0x2be017,_0x1c9e66=_0x342ad0[_0x182ef7(0x464)]?_0x2be017:null,_0x4a35a4=_0x342ad0['remoteJid'],_0x4c57bd=this[_0x182ef7(0x3f7)][_0x182ef7(0x4b9)]['find'](_0xfccc0d=>_0xfccc0d[_0x182ef7(0x2c7)]===_0x50632c[_0x182ef7(0x2c7)]?.[_0x182ef7(0x1fe)]()),_0x491d34=_0x4c57bd?.[_0x182ef7(0x41b)]??_0x50632c[_0x182ef7(0x41b)]??0x0,_0x451382=_0x4c57bd?.['readMessages']??_0x50632c[_0x182ef7(0x84c)]??!0x1;await this['closeExistingConversations'](_0x4a35a4);let _0x1dd9ab={'flowId':_0x50632c[_0x182ef7(0x2c7)],..._0x50632c,'chatLog':null},_0x13f136=await this['variablesToObject'](_0x1dd9ab[_0x182ef7(0x80b)]),_0x43e858=await this[_0x182ef7(0x63b)](_0x4a35a4),_0x44581d={..._0x13f136,..._0x43e858,'_remoteJid':_0x4a35a4},_0x1059a0={'lastReceivedMessage':_0x19b125,'lastSendMessage':_0x1c9e66,'lastBlockId':_0x188522,'lastCondition':!0x0,'realVariables':_0x44581d};_0x1dd9ab['chatLog']=_0x1059a0,delete _0x1dd9ab[_0x182ef7(0x2c7)],_0x1dd9ab[_0x182ef7(0x2c7)]=new _0x196ba9(),_0x1dd9ab[_0x182ef7(0x55f)]=_0x13ba53,_0x1dd9ab[_0x182ef7(0x71c)]=_0x182ef7(0x5a2),_0x1dd9ab[_0x182ef7(0x668)]=_0x4a35a4,_0x1dd9ab[_0x182ef7(0x41b)]=_0x491d34,_0x1dd9ab['readMessages']=_0x451382;let _0x3a5c40=await this[_0x182ef7(0x261)][_0x182ef7(0x2c3)][_0x182ef7(0x6ce)](_0x1dd9ab['_id'],_0x1dd9ab,this[_0x182ef7(0x770)][_0x182ef7(0x808)]);return this[_0x182ef7(0x3cb)][_0x182ef7(0x798)](this[_0x182ef7(0x402)]+'\x20('+this['instance'][_0x182ef7(0x808)]+_0x182ef7(0x3d7)),_0x3a5c40?_0x1dd9ab:null;}catch(_0x4dee0){return this[_0x182ef7(0x3cb)][_0x182ef7(0x651)](this['instanceName']+'\x20('+this['instance'][_0x182ef7(0x808)]+_0x182ef7(0x6f5)+(_0x4dee0 instanceof Error?_0x4dee0[_0x182ef7(0x5ce)]:JSON[_0x182ef7(0x43f)](_0x4dee0,null,0x2))),_0x4dee0;}}async[a0_0x34b2dc(0x8cb)](_0x2b0b86,_0x501c51){const _0x3d2833=a0_0x34b2dc;let _0x3d3384=_0x2b0b86[_0x3d2833(0x668)];_0x501c51['uazapi'][_0x3d2833(0x668)]&&_0x501c51[_0x3d2833(0x7dc)][_0x3d2833(0x668)][_0x3d2833(0x3b8)]()!==''&&(_0x3d3384=_0x501c51['uazapi'][_0x3d2833(0x668)]['trim']()),this[_0x3d2833(0x3cb)][_0x3d2833(0x798)](this[_0x3d2833(0x402)]+'\x20('+this[_0x3d2833(0x770)][_0x3d2833(0x808)]+_0x3d2833(0x8e4));let _0x348fa2={'number':_0x3d3384,'options':{'delay':_0x501c51[_0x3d2833(0x7dc)]['delay'],'linkPreview':_0x501c51[_0x3d2833(0x7dc)][_0x3d2833(0x646)]},'textMessage':{'text':_0x501c51[_0x3d2833(0x7dc)]['text']}};try{let _0x5bab91=await this[_0x3d2833(0x876)](_0x348fa2);if(_0x5bab91){let _0x5e00ef={'_id':_0x5bab91[_0x3d2833(0x85f)]['id'],'_fromMe':_0x5bab91['key'][_0x3d2833(0x464)],'_remoteJid':_0x5bab91[_0x3d2833(0x85f)][_0x3d2833(0x668)]},_0x1756f5=(0x0,w[_0x3d2833(0x5e9)])(_0x5bab91[_0x3d2833(0x5ce)]),_0x4c53b2=(0x0,w[_0x3d2833(0x62f)])(_0x1756f5);_0x2b0b86['chatLog'][_0x3d2833(0x264)]=_0x501c51[_0x3d2833(0x2c7)][_0x3d2833(0x1fe)]();let {message_normalized:_0x502e92}=this[_0x3d2833(0x65e)](_0x1756f5,_0x4c53b2,null);_0x2b0b86[_0x3d2833(0x82e)][_0x3d2833(0x2f8)]=await _0x502e92;let _0x835d56={'messageId':_0x5bab91['key']['id']},_0x1c3a2f=_0x2b0b86[_0x3d2833(0x82e)][_0x3d2833(0x4db)];Object[_0x3d2833(0x2c4)](_0x1c3a2f,_0x5e00ef),_0x2b0b86['chatLog']['realVariables']=_0x1c3a2f,this[_0x3d2833(0x512)](_0x2b0b86,_0x501c51,_0x835d56);}else{let _0x3e766a={'error':!0x0};this[_0x3d2833(0x512)](_0x2b0b86,_0x501c51,_0x3e766a),this[_0x3d2833(0x3cb)]['error'](this[_0x3d2833(0x402)]+'\x20('+this[_0x3d2833(0x770)][_0x3d2833(0x808)]+_0x3d2833(0x5da));}}catch(_0x454440){let _0x435234={'error':!0x0,'errorLog':_0x454440[_0x3d2833(0x1fe)]()};this[_0x3d2833(0x512)](_0x2b0b86,_0x501c51,_0x435234),this[_0x3d2833(0x3cb)][_0x3d2833(0x651)](this[_0x3d2833(0x402)]+'\x20('+this[_0x3d2833(0x770)][_0x3d2833(0x808)]+_0x3d2833(0x67b)+(_0x454440 instanceof Error?_0x454440[_0x3d2833(0x5ce)]:JSON['stringify'](_0x454440,null,0x2)));}}async['uazapiSendMedia'](_0x525acc,_0x5bb53a){const _0x2dd0b2=a0_0x34b2dc;let _0x5b664f=_0x525acc['remoteJid'];_0x5bb53a['uazapi'][_0x2dd0b2(0x668)]&&_0x5bb53a[_0x2dd0b2(0x7dc)][_0x2dd0b2(0x668)][_0x2dd0b2(0x3b8)]()!==''&&(_0x5b664f=_0x5bb53a[_0x2dd0b2(0x7dc)][_0x2dd0b2(0x668)][_0x2dd0b2(0x3b8)]()),this['logger'][_0x2dd0b2(0x798)](this[_0x2dd0b2(0x402)]+'\x20('+this[_0x2dd0b2(0x770)]['wuid']+'):\x20Enviando\x20mídia');let _0x206d49={'number':_0x5b664f,'options':{'delay':_0x5bb53a[_0x2dd0b2(0x7dc)][_0x2dd0b2(0x6db)],'linkPreview':_0x5bb53a['uazapi'][_0x2dd0b2(0x646)]},'mediaMessage':{'mediatype':_0x5bb53a[_0x2dd0b2(0x7dc)][_0x2dd0b2(0x70d)],'caption':_0x5bb53a['uazapi'][_0x2dd0b2(0x39d)],'media':_0x5bb53a[_0x2dd0b2(0x7dc)][_0x2dd0b2(0x4c8)],'fileName':_0x5bb53a[_0x2dd0b2(0x7dc)][_0x2dd0b2(0x685)]}};try{let _0x113477=await this['mediaMessage'](_0x206d49);if(_0x113477){let _0x8c2295={'_id':_0x113477[_0x2dd0b2(0x85f)]['id'],'_fromMe':_0x113477['key'][_0x2dd0b2(0x464)],'_remoteJid':_0x113477[_0x2dd0b2(0x85f)]['remoteJid']},_0x20b702=(0x0,w['normalizeMessageContent'])(_0x113477[_0x2dd0b2(0x5ce)]),_0x2e30cf=(0x0,w[_0x2dd0b2(0x62f)])(_0x20b702);_0x525acc[_0x2dd0b2(0x82e)][_0x2dd0b2(0x264)]=_0x5bb53a[_0x2dd0b2(0x2c7)]['toString']();let {message_normalized:_0x2683d4}=this[_0x2dd0b2(0x65e)](_0x20b702,_0x2e30cf,null);_0x525acc['chatLog']['lastSendMessage']=await _0x2683d4;let _0x1158d5={'messageId':_0x113477['key']['id']},_0x125c72=_0x525acc['chatLog'][_0x2dd0b2(0x4db)];Object[_0x2dd0b2(0x2c4)](_0x125c72,_0x8c2295),_0x525acc[_0x2dd0b2(0x82e)][_0x2dd0b2(0x4db)]=_0x125c72,this[_0x2dd0b2(0x512)](_0x525acc,_0x5bb53a,_0x1158d5);}else{let _0x455e4a={'error':!0x0};this['updateConversation'](_0x525acc,_0x5bb53a,_0x455e4a),this[_0x2dd0b2(0x3cb)][_0x2dd0b2(0x651)](this[_0x2dd0b2(0x402)]+'\x20('+this[_0x2dd0b2(0x770)][_0x2dd0b2(0x808)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.');}}catch(_0x574487){let _0x391907={'error':!0x0,'errorLog':_0x574487[_0x2dd0b2(0x1fe)]()};this[_0x2dd0b2(0x512)](_0x525acc,_0x5bb53a,_0x391907),this[_0x2dd0b2(0x3cb)][_0x2dd0b2(0x651)](this[_0x2dd0b2(0x402)]+'\x20('+this['instance'][_0x2dd0b2(0x808)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20'+(_0x574487 instanceof Error?_0x574487[_0x2dd0b2(0x5ce)]:JSON[_0x2dd0b2(0x43f)](_0x574487,null,0x2)));}}async['uazapiSendLocation'](_0x589ad4,_0x41f274){const _0x183eb2=a0_0x34b2dc;let _0x35ead5=_0x589ad4[_0x183eb2(0x668)];_0x41f274[_0x183eb2(0x7dc)]['remoteJid']&&_0x41f274['uazapi']['remoteJid'][_0x183eb2(0x3b8)]()!==''&&(_0x35ead5=_0x41f274[_0x183eb2(0x7dc)][_0x183eb2(0x668)][_0x183eb2(0x3b8)]()),this[_0x183eb2(0x3cb)][_0x183eb2(0x798)](this[_0x183eb2(0x402)]+'\x20('+this[_0x183eb2(0x770)][_0x183eb2(0x808)]+_0x183eb2(0x44f));let _0x1fcd72={'number':_0x35ead5,'options':{'delay':_0x41f274[_0x183eb2(0x7dc)][_0x183eb2(0x6db)]},'locationMessage':{'name':_0x41f274[_0x183eb2(0x7dc)][_0x183eb2(0x673)],'address':_0x41f274[_0x183eb2(0x7dc)]['address'],'latitude':_0x41f274[_0x183eb2(0x7dc)][_0x183eb2(0x6cc)],'longitude':_0x41f274[_0x183eb2(0x7dc)]['longitude']}};try{let _0x8000eb=await this[_0x183eb2(0x8bb)](_0x1fcd72);if(_0x8000eb){let _0x29a257={'_id':_0x8000eb['key']['id'],'_fromMe':_0x8000eb[_0x183eb2(0x85f)][_0x183eb2(0x464)],'_remoteJid':_0x8000eb[_0x183eb2(0x85f)][_0x183eb2(0x668)]},_0x44665a=(0x0,w[_0x183eb2(0x5e9)])(_0x8000eb[_0x183eb2(0x5ce)]),_0x9d41f8=(0x0,w[_0x183eb2(0x62f)])(_0x44665a);_0x589ad4[_0x183eb2(0x82e)][_0x183eb2(0x264)]=_0x41f274['_id']['toString']();let {message_normalized:_0x36ffda}=this[_0x183eb2(0x65e)](_0x44665a,_0x9d41f8,null);_0x589ad4[_0x183eb2(0x82e)]['lastSendMessage']=await _0x36ffda;let _0x344fab={'messageId':_0x8000eb[_0x183eb2(0x85f)]['id']},_0x2ce510=_0x589ad4[_0x183eb2(0x82e)][_0x183eb2(0x4db)];Object[_0x183eb2(0x2c4)](_0x2ce510,_0x29a257),_0x589ad4[_0x183eb2(0x82e)][_0x183eb2(0x4db)]=_0x2ce510,this[_0x183eb2(0x512)](_0x589ad4,_0x41f274,_0x344fab);}else{let _0x40c03b={'error':!0x0};this[_0x183eb2(0x512)](_0x589ad4,_0x41f274,_0x40c03b),this['logger'][_0x183eb2(0x651)](this['instanceName']+'\x20('+this[_0x183eb2(0x770)][_0x183eb2(0x808)]+_0x183eb2(0x6c8));}}catch(_0x3f846f){let _0x33dde9={'error':!0x0,'errorLog':_0x3f846f['toString']()};this['updateConversation'](_0x589ad4,_0x41f274,_0x33dde9),this[_0x183eb2(0x3cb)]['error'](this[_0x183eb2(0x402)]+'\x20('+this[_0x183eb2(0x770)][_0x183eb2(0x808)]+_0x183eb2(0x505)+(_0x3f846f instanceof Error?_0x3f846f[_0x183eb2(0x5ce)]:JSON[_0x183eb2(0x43f)](_0x3f846f,null,0x2)));}}async['uazapiSendAudio'](_0x4cdfcb,_0x219aba){const _0x52d394=a0_0x34b2dc;let _0x4434d2=_0x4cdfcb[_0x52d394(0x668)];_0x219aba['uazapi']['remoteJid']&&_0x219aba[_0x52d394(0x7dc)]['remoteJid']['trim']()!==''&&(_0x4434d2=_0x219aba[_0x52d394(0x7dc)][_0x52d394(0x668)]['trim']()),this[_0x52d394(0x3cb)][_0x52d394(0x798)](this[_0x52d394(0x402)]+'\x20('+this[_0x52d394(0x770)][_0x52d394(0x808)]+_0x52d394(0x60e));let _0x4adb51={'number':_0x4434d2,'options':{'delay':_0x219aba['uazapi'][_0x52d394(0x6db)]},'audioMessage':{'audio':_0x219aba['uazapi']['audio']}};try{let _0x1ecfb1=await this['audioWhatsapp'](_0x4adb51);if(_0x1ecfb1){let _0x44c600={'_id':_0x1ecfb1['key']['id'],'_fromMe':_0x1ecfb1[_0x52d394(0x85f)][_0x52d394(0x464)],'_remoteJid':_0x1ecfb1['key'][_0x52d394(0x668)]},_0x1dc3a2=(0x0,w[_0x52d394(0x5e9)])(_0x1ecfb1['message']),_0x2c8136=(0x0,w[_0x52d394(0x62f)])(_0x1dc3a2);_0x4cdfcb[_0x52d394(0x82e)][_0x52d394(0x264)]=_0x219aba[_0x52d394(0x2c7)][_0x52d394(0x1fe)]();let {message_normalized:_0x163ac1}=this[_0x52d394(0x65e)](_0x1dc3a2,_0x2c8136,null);_0x4cdfcb[_0x52d394(0x82e)]['lastSendMessage']=await _0x163ac1;let _0x14c03b={'messageId':_0x1ecfb1['key']['id']},_0x3d7444=_0x4cdfcb[_0x52d394(0x82e)]['realVariables'];Object[_0x52d394(0x2c4)](_0x3d7444,_0x44c600),_0x4cdfcb[_0x52d394(0x82e)][_0x52d394(0x4db)]=_0x3d7444,this['updateConversation'](_0x4cdfcb,_0x219aba,_0x14c03b);}else{let _0x27b60a={'error':!0x0};this[_0x52d394(0x512)](_0x4cdfcb,_0x219aba,_0x27b60a),this['logger']['error'](this[_0x52d394(0x402)]+'\x20('+this['instance'][_0x52d394(0x808)]+_0x52d394(0x493));}}catch(_0x1e158a){let _0x5b6548={'error':!0x0,'errorLog':_0x1e158a['toString']()};this[_0x52d394(0x512)](_0x4cdfcb,_0x219aba,_0x5b6548),this[_0x52d394(0x3cb)][_0x52d394(0x651)](this[_0x52d394(0x402)]+'\x20('+this[_0x52d394(0x770)][_0x52d394(0x808)]+_0x52d394(0x3fa)+(_0x1e158a instanceof Error?_0x1e158a[_0x52d394(0x5ce)]:JSON['stringify'](_0x1e158a,null,0x2)));}}async[a0_0x34b2dc(0x2ca)](_0x1a7b16,_0x5231a3){const _0x23ccac=a0_0x34b2dc;let _0x4dd419=_0x1a7b16[_0x23ccac(0x668)];_0x5231a3[_0x23ccac(0x7dc)]['remoteJid']&&_0x5231a3[_0x23ccac(0x7dc)][_0x23ccac(0x668)][_0x23ccac(0x3b8)]()!==''&&(_0x4dd419=_0x5231a3[_0x23ccac(0x7dc)][_0x23ccac(0x668)][_0x23ccac(0x3b8)]()),this[_0x23ccac(0x3cb)]['verbose'](this[_0x23ccac(0x402)]+'\x20('+this[_0x23ccac(0x770)][_0x23ccac(0x808)]+_0x23ccac(0x62b));let _0x45080f={'number':_0x4dd419,'options':{'delay':_0x5231a3[_0x23ccac(0x7dc)][_0x23ccac(0x6db)]},'contactMessage':[{'fullName':_0x5231a3['uazapi'][_0x23ccac(0x478)],'phoneNumber':_0x5231a3['uazapi']['phoneNumber']}]};try{let _0x389d52=await this[_0x23ccac(0x723)](_0x45080f);if(_0x389d52){let _0x2b0bf9={'_id':_0x389d52[_0x23ccac(0x85f)]['id'],'_fromMe':_0x389d52[_0x23ccac(0x85f)][_0x23ccac(0x464)],'_remoteJid':_0x389d52[_0x23ccac(0x85f)][_0x23ccac(0x668)]},_0x1d91b7=(0x0,w[_0x23ccac(0x5e9)])(_0x389d52[_0x23ccac(0x5ce)]),_0x1561b0=(0x0,w[_0x23ccac(0x62f)])(_0x1d91b7);_0x1a7b16[_0x23ccac(0x82e)][_0x23ccac(0x264)]=_0x5231a3[_0x23ccac(0x2c7)][_0x23ccac(0x1fe)]();let {message_normalized:_0x39db51}=this['normalizeMessage'](_0x1d91b7,_0x1561b0,null);_0x1a7b16[_0x23ccac(0x82e)]['lastSendMessage']=await _0x39db51;let _0x52aee2={'messageId':_0x389d52['key']['id']},_0x1508f7=_0x1a7b16[_0x23ccac(0x82e)]['realVariables'];Object[_0x23ccac(0x2c4)](_0x1508f7,_0x2b0bf9),_0x1a7b16[_0x23ccac(0x82e)][_0x23ccac(0x4db)]=_0x1508f7,this[_0x23ccac(0x512)](_0x1a7b16,_0x5231a3,_0x52aee2);}else{let _0x4b8992={'error':!0x0};this[_0x23ccac(0x512)](_0x1a7b16,_0x5231a3,_0x4b8992),this[_0x23ccac(0x3cb)][_0x23ccac(0x651)](this['instanceName']+'\x20('+this[_0x23ccac(0x770)][_0x23ccac(0x808)]+_0x23ccac(0x4ff));}}catch(_0x45991f){let _0xcb098c={'error':!0x0,'errorLog':_0x45991f[_0x23ccac(0x1fe)]()};this['updateConversation'](_0x1a7b16,_0x5231a3,_0xcb098c),this[_0x23ccac(0x3cb)][_0x23ccac(0x651)](this['instanceName']+'\x20('+this[_0x23ccac(0x770)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20'+(_0x45991f instanceof Error?_0x45991f[_0x23ccac(0x5ce)]:JSON[_0x23ccac(0x43f)](_0x45991f,null,0x2)));}}[a0_0x34b2dc(0x26c)](_0x302e25,_0x56150e){const _0x1857fc=a0_0x34b2dc;for(let _0x52b9e9 of _0x302e25)_0x52b9e9[_0x1857fc(0x6e0)]&&(_0x52b9e9[_0x1857fc(0x6e0)]=this[_0x1857fc(0x572)](_0x52b9e9['option'],_0x56150e)),_0x52b9e9[_0x1857fc(0x7f1)]&&(_0x52b9e9[_0x1857fc(0x7f1)]=this[_0x1857fc(0x572)](_0x52b9e9['optionDescription'],_0x56150e));}async[a0_0x34b2dc(0x75b)](_0x108704,_0x3e5ab5){const _0x3a838c=a0_0x34b2dc;let _0x4fc3ac=_0x108704['remoteJid'];_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x668)]&&_0x3e5ab5[_0x3a838c(0x7dc)]['remoteJid'][_0x3a838c(0x3b8)]()!==''&&(_0x4fc3ac=_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x668)][_0x3a838c(0x3b8)]()),this[_0x3a838c(0x3cb)]['verbose'](this[_0x3a838c(0x402)]+'\x20('+this[_0x3a838c(0x770)][_0x3a838c(0x808)]+_0x3a838c(0x5a1));let _0x9d1318=_0x108704[_0x3a838c(0x91e)][_0x3a838c(0x334)](_0x1a318f=>_0x1a318f[_0x3a838c(0x909)]===_0x3e5ab5[_0x3a838c(0x2c7)])[_0x3a838c(0x289)]((_0x142740,_0x1f94b5)=>_0x142740[_0x3a838c(0x881)]-_0x1f94b5[_0x3a838c(0x881)]);this['replaceVariablesInReplyOptions'](_0x9d1318,_0x108704[_0x3a838c(0x82e)][_0x3a838c(0x4db)]);let _0x1d5c76=_0x9d1318[_0x3a838c(0x790)](_0xbb76d1=>_0xbb76d1['option']),_0x51b2b0={'number':_0x4fc3ac,'menuMessage':{'type':_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x8c3)]||_0x3a838c(0x787),'text':_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x6b6)]||_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x673)],'footerText':_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x78e)],'buttonText':_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x23d)],'selectableCount':0x1,'choices':_0x1d5c76},'options':{'delay':_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x6db)]}};try{let _0x28d4f3=await this['menuMessage'](_0x51b2b0);if(_0x28d4f3){let _0x1c5cf8={'_id':_0x28d4f3['key']['id'],'_fromMe':_0x28d4f3[_0x3a838c(0x85f)][_0x3a838c(0x464)],'_remoteJid':_0x28d4f3[_0x3a838c(0x85f)][_0x3a838c(0x668)]};_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x8db)]===!0x0&&(_0x108704[_0x3a838c(0x71c)]='waitingForReplyMenu',this[_0x3a838c(0x3cb)]['verbose'](this[_0x3a838c(0x402)]+'\x20('+this[_0x3a838c(0x770)][_0x3a838c(0x808)]+_0x3a838c(0x884)+_0x108704[_0x3a838c(0x71c)])),this[_0x3a838c(0x3cb)][_0x3a838c(0x798)](this[_0x3a838c(0x402)]+'\x20('+this['instance'][_0x3a838c(0x808)]+_0x3a838c(0x6a1)+(_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x673)]||_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x6b6)])),_0x108704[_0x3a838c(0x8dc)]=_0x28d4f3[_0x3a838c(0x85f)]['id'],_0x108704['waitingMenu_text']=_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x673)]||_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x6b6)],_0x108704[_0x3a838c(0x904)]=_0x9d1318,_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x496)]&&(_0x108704['waitingMenu_ExpiredMessage']=_0x3e5ab5[_0x3a838c(0x7dc)][_0x3a838c(0x496)]),this[_0x3a838c(0x3cb)][_0x3a838c(0x798)](this[_0x3a838c(0x402)]+'\x20('+this['instance']['wuid']+_0x3a838c(0x4ba)+_0x108704['waitingMenu_text']);let _0xb4b2e9=(0x0,w[_0x3a838c(0x5e9)])(_0x28d4f3['message']),_0x413ed7=(0x0,w[_0x3a838c(0x62f)])(_0xb4b2e9);_0x108704['chatLog'][_0x3a838c(0x264)]=_0x3e5ab5['_id'][_0x3a838c(0x1fe)]();let {message_normalized:_0xee3dea}=this['normalizeMessage'](_0xb4b2e9,_0x413ed7,null);_0x108704[_0x3a838c(0x82e)][_0x3a838c(0x2f8)]=await _0xee3dea;let _0x52e24d={'messageId':_0x28d4f3['key']['id']},_0x6979c2=_0x108704['chatLog'][_0x3a838c(0x4db)];Object[_0x3a838c(0x2c4)](_0x6979c2,_0x1c5cf8),_0x108704['chatLog'][_0x3a838c(0x4db)]=_0x6979c2,this[_0x3a838c(0x512)](_0x108704,_0x3e5ab5,_0x52e24d);}else{let _0xc10e0d={'error':!0x0};this[_0x3a838c(0x512)](_0x108704,_0x3e5ab5,_0xc10e0d),this['logger'][_0x3a838c(0x651)](this['instanceName']+'\x20('+this[_0x3a838c(0x770)][_0x3a838c(0x808)]+_0x3a838c(0x4d2));}}catch(_0xc65e26){let _0x59ecf4={'error':!0x0,'errorLog':_0xc65e26 instanceof Error?_0xc65e26[_0x3a838c(0x5ce)]:JSON[_0x3a838c(0x43f)](_0xc65e26,null,0x2)};this['updateConversation'](_0x108704,_0x3e5ab5,_0x59ecf4),this[_0x3a838c(0x3cb)][_0x3a838c(0x651)](this[_0x3a838c(0x402)]+'\x20('+this[_0x3a838c(0x770)][_0x3a838c(0x808)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20'+(_0xc65e26 instanceof Error?_0xc65e26[_0x3a838c(0x5ce)]:JSON[_0x3a838c(0x43f)](_0xc65e26,null,0x2)));}}async[a0_0x34b2dc(0x2d8)](_0x1569ee,_0x484543){const _0x400517=a0_0x34b2dc;this[_0x400517(0x3cb)]['verbose'](this[_0x400517(0x402)]+'\x20('+this[_0x400517(0x770)][_0x400517(0x808)]+_0x400517(0x490));let _0x55ed9a=_0x1569ee['chatLog'][_0x400517(0x3e1)][_0x400517(0x253)](_0x28d090=>_0x28d090[_0x400517(0x909)][_0x400517(0x1fe)]()===_0x484543[_0x400517(0x7dc)][_0x400517(0x909)][_0x400517(0x1fe)]()),_0x30ee25={'id':_0x55ed9a[_0x400517(0x3b5)],'remoteJid':_0x55ed9a[_0x400517(0x668)],'fromMe':_0x55ed9a[_0x400517(0x464)]};try{let _0x2a74fa=await this[_0x400517(0x2e1)](_0x30ee25);if(_0x2a74fa){let _0x58b412=(0x0,w[_0x400517(0x5e9)])(_0x2a74fa['message']),_0x326223=(0x0,w[_0x400517(0x62f)])(_0x58b412);_0x1569ee[_0x400517(0x82e)][_0x400517(0x264)]=_0x484543[_0x400517(0x2c7)][_0x400517(0x1fe)]();let {message_normalized:_0x5be3c8}=this[_0x400517(0x65e)](_0x58b412,_0x326223,null);_0x1569ee[_0x400517(0x82e)]['lastSendMessage']=await _0x5be3c8;let _0x2938cf={};this['updateConversation'](_0x1569ee,_0x484543,_0x2938cf);}else{let _0x38a96f={'error':!0x0};this[_0x400517(0x512)](_0x1569ee,_0x484543,_0x38a96f),this[_0x400517(0x3cb)][_0x400517(0x651)](this[_0x400517(0x402)]+'\x20('+this[_0x400517(0x770)][_0x400517(0x808)]+_0x400517(0x678));}}catch(_0x37fe80){let _0x3bf831={'error':!0x0,'errorLog':_0x37fe80 instanceof Error?_0x37fe80['message']:JSON[_0x400517(0x43f)](_0x37fe80,null,0x2)};this[_0x400517(0x512)](_0x1569ee,_0x484543,_0x3bf831),this[_0x400517(0x3cb)][_0x400517(0x651)](this['instanceName']+'\x20('+this[_0x400517(0x770)][_0x400517(0x808)]+_0x400517(0x290)+(_0x37fe80 instanceof Error?_0x37fe80[_0x400517(0x5ce)]:JSON[_0x400517(0x43f)](_0x37fe80,null,0x2)));}}async[a0_0x34b2dc(0x68d)](_0xc3d03a,_0x4a3b2d){const _0xcb5aec=a0_0x34b2dc;if(_0xc3d03a[_0xcb5aec(0x673)]||(_0xc3d03a['name']=(0x0,X['v4'])()),_0x4a3b2d!==Ti&&_0xc3d03a?.['globalShow'])throw new m(_0xcb5aec(0x878));if(_0xcb5aec(0x2c7)in _0xc3d03a&&_0xcb5aec(0x56c)in _0xc3d03a)return this[_0xcb5aec(0x85a)](_0xc3d03a[_0xcb5aec(0x56c)],_0xc3d03a[_0xcb5aec(0x2c7)]);this[_0xcb5aec(0x3cb)][_0xcb5aec(0x798)](this[_0xcb5aec(0x402)]+'\x20('+this[_0xcb5aec(0x770)][_0xcb5aec(0x808)]+_0xcb5aec(0x1fa));let _0x294233=this[_0xcb5aec(0x518)](_0xc3d03a['name']),_0x272281=new fe[(_0xcb5aec(0x415))][(_0xcb5aec(0x639))](),_0x3e7f8c={'_id':_0x272281,'default':!0x0,'title':'Início','x':0x0,'y':0x0},_0x554134={'_id':new fe[(_0xcb5aec(0x415))][(_0xcb5aec(0x639))](),'order':0x1,'groupId':_0x272281['toString'](),'type':_0xcb5aec(0x28c)},_0x3ac10a=this[_0xcb5aec(0x770)][_0xcb5aec(0x808)],_0xa012de={'_id':(0x0,X['v4'])(),'owner':_0x3ac10a,'name':_0x294233,'whoCanEdit':[_0x3ac10a],'whoCanUse':[_0x3ac10a],'groups':[_0x3e7f8c],'blocks':[_0x554134],..._0xc3d03a};try{let _0x124ad7=await this[_0xcb5aec(0x261)]['flow'][_0xcb5aec(0x1f1)](_0xa012de);return await this[_0xcb5aec(0x245)](),_0x124ad7;}catch(_0x413982){let _0x4c21de='Erro\x20ao\x20criar\x20fluxo',_0x159ddc=_0x413982 instanceof Error?_0x413982[_0xcb5aec(0x5ce)]:typeof _0x413982=='object'?JSON[_0xcb5aec(0x43f)](_0x413982):_0x413982,_0x5b5d03=_0x4c21de+':\x20'+_0x159ddc;throw this[_0xcb5aec(0x3cb)][_0xcb5aec(0x651)](this[_0xcb5aec(0x402)]+'\x20('+this[_0xcb5aec(0x770)][_0xcb5aec(0x808)]+_0xcb5aec(0x4b7)+_0x5b5d03),new m(_0x5b5d03);}}async[a0_0x34b2dc(0x85a)](_0x14263d,_0x57699f){const _0x5f5e0a=a0_0x34b2dc;try{this[_0x5f5e0a(0x3cb)][_0x5f5e0a(0x798)](this[_0x5f5e0a(0x402)]+'\x20('+this['instance']['wuid']+'):\x20Criando\x20fluxo\x20compartilhado...');let _0x301160=await this[_0x5f5e0a(0x261)][_0x5f5e0a(0x35b)][_0x5f5e0a(0x440)]({'where':{'_id':_0x57699f,'owner':_0x14263d}});if(!_0x301160)throw new m(_0x5f5e0a(0x20e));if(_0x301160[_0x5f5e0a(0x684)]===!0x1&&!_0x301160[_0x5f5e0a(0x3ab)])throw new m(_0x5f5e0a(0x23b));let _0x8718c3=new Set(_0x301160['whoCanUse']??[]);_0x8718c3[_0x5f5e0a(0x420)](this['instance'][_0x5f5e0a(0x808)]);let _0x2a711b=await this['repository'][_0x5f5e0a(0x35b)]['updateOne'](_0x57699f,{..._0x301160,'whoCanUse':Array[_0x5f5e0a(0x77b)](_0x8718c3)});return await this[_0x5f5e0a(0x245)](),_0x2a711b;}catch(_0x5895c9){let _0x3f4127=_0x5f5e0a(0x2bb),_0x57713d=_0x5895c9 instanceof Error?_0x5895c9[_0x5f5e0a(0x5ce)]:typeof _0x5895c9==_0x5f5e0a(0x89b)?JSON['stringify'](_0x5895c9):_0x5895c9,_0x447534=_0x3f4127+':\x20'+_0x57713d;throw this[_0x5f5e0a(0x3cb)][_0x5f5e0a(0x651)](this[_0x5f5e0a(0x402)]+'\x20('+this[_0x5f5e0a(0x770)][_0x5f5e0a(0x808)]+_0x5f5e0a(0x4b7)+_0x447534),new m(_0x447534);}}['getUniqueFlowName'](_0x2bd6b9){const _0x65045e=a0_0x34b2dc;let _0x3aa495=_0x2bd6b9,_0x29c598=0x1;for(;this['AutomateSystem'][_0x65045e(0x4b9)]['some'](_0xcd5a41=>_0xcd5a41[_0x65045e(0x673)]===_0x3aa495);)_0x29c598++,_0x3aa495=_0x2bd6b9+'\x20('+_0x29c598+')';return _0x3aa495;}async[a0_0x34b2dc(0x8c7)](_0x547a5b){const _0xc9621b=a0_0x34b2dc;try{if(this['logger'][_0xc9621b(0x798)](this[_0xc9621b(0x402)]+'\x20('+this[_0xc9621b(0x770)][_0xc9621b(0x808)]+'):\x20\x27Deletando\x20fluxo,\x20id:\x20'+_0x547a5b[_0xc9621b(0x2c7)]+_0xc9621b(0x23e)+_0x547a5b[_0xc9621b(0x795)]),!this[_0xc9621b(0x3f7)]['flows']['find'](_0x24ac90=>_0x24ac90['_id']===_0x547a5b[_0xc9621b(0x2c7)]))throw this[_0xc9621b(0x3cb)][_0xc9621b(0x798)](this['instanceName']+'\x20('+this[_0xc9621b(0x770)][_0xc9621b(0x808)]+_0xc9621b(0x5f9)+_0x547a5b['_id']+'\x27\x20não\x20encontrado'),new m(_0xc9621b(0x629));let _0x31efcf=await this[_0xc9621b(0x261)][_0xc9621b(0x35b)][_0xc9621b(0x440)]({'where':{'_id':_0x547a5b['_id']}});if(!_0x31efcf)throw new m(_0xc9621b(0x563));if(this[_0xc9621b(0x770)]['wuid']===_0x31efcf[_0xc9621b(0x56c)]){this[_0xc9621b(0x3cb)][_0xc9621b(0x798)](this[_0xc9621b(0x402)]+'\x20('+this[_0xc9621b(0x770)][_0xc9621b(0x808)]+'):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27'+_0x547a5b[_0xc9621b(0x2c7)]+'\x27\x20do\x20banco\x20de\x20dados...');let _0x55b22a=await this[_0xc9621b(0x261)][_0xc9621b(0x35b)]['deleteOne']({'where':{'_id':_0x547a5b['_id']}});return await this[_0xc9621b(0x245)](),_0x55b22a;}return this[_0xc9621b(0x3cb)][_0xc9621b(0x798)](this['instanceName']+'\x20('+this[_0xc9621b(0x770)][_0xc9621b(0x808)]+_0xc9621b(0x58c)+this[_0xc9621b(0x770)][_0xc9621b(0x808)]+_0xc9621b(0x8c0)+_0x547a5b[_0xc9621b(0x2c7)]+_0xc9621b(0x510)),_0x31efcf['whoCanUse']=(_0x31efcf[_0xc9621b(0x5e4)]??[])[_0xc9621b(0x334)](_0x308fee=>_0x308fee!==this[_0xc9621b(0x770)]['wuid']),_0x31efcf[_0xc9621b(0x468)]=(_0x31efcf[_0xc9621b(0x468)]??[])['filter'](_0x98db5=>_0x98db5!==this['instance'][_0xc9621b(0x808)]),_0x31efcf[_0xc9621b(0x468)][_0xc9621b(0x3a3)]===0x0&&_0x31efcf[_0xc9621b(0x5e4)]['length']>0x0&&(_0x31efcf[_0xc9621b(0x468)]['push'](_0x31efcf['whoCanUse'][0x0]),this[_0xc9621b(0x3cb)]['verbose'](this['instanceName']+'\x20('+this[_0xc9621b(0x770)][_0xc9621b(0x808)]+_0xc9621b(0x5f2)+_0x31efcf[_0xc9621b(0x5e4)][0x0]+_0xc9621b(0x452)+_0x547a5b[_0xc9621b(0x2c7)]+_0xc9621b(0x510))),await this['repository']['flow']['updateOne'](_0x31efcf[_0xc9621b(0x2c7)],_0x31efcf),await this[_0xc9621b(0x245)](),{'message':_0xc9621b(0x805)+_0x547a5b[_0xc9621b(0x673)]+_0xc9621b(0x217)};}catch(_0x3ca3ce){return this[_0xc9621b(0x3cb)]['error'](this[_0xc9621b(0x402)]+'\x20('+this[_0xc9621b(0x770)][_0xc9621b(0x808)]+_0xc9621b(0x64f)+(_0x3ca3ce instanceof Error?_0x3ca3ce['message']:JSON[_0xc9621b(0x43f)](_0x3ca3ce,null,0x2))),{'message':'Erro\x20ao\x20deletar\x20o\x20fluxo:\x20'+(_0x3ca3ce instanceof Error?_0x3ca3ce['message']:JSON[_0xc9621b(0x43f)](_0x3ca3ce,null,0x2))};}}async['getFlow'](_0x59fe08){const _0x3f5c6c=a0_0x34b2dc;try{if(this['logger'][_0x3f5c6c(0x5df)](this[_0x3f5c6c(0x402)]+'\x20('+this[_0x3f5c6c(0x770)][_0x3f5c6c(0x808)]+_0x3f5c6c(0x655)+_0x59fe08),!this[_0x3f5c6c(0x3f7)]&&(await this[_0x3f5c6c(0x3fb)](),!this[_0x3f5c6c(0x3f7)]))return null;let _0x5941ea=await this[_0x3f5c6c(0x261)][_0x3f5c6c(0x35b)]['findOne']({'where':{'_id':_0x59fe08}});if(!_0x5941ea)throw new m(_0x3f5c6c(0x7c5)+_0x59fe08+_0x3f5c6c(0x33e));if(!(_0x5941ea['globalShow']||_0x5941ea['whoCanUse']?.['includes'](this['instance'][_0x3f5c6c(0x808)])))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27'+name+'\x27');_0x5941ea[_0x3f5c6c(0x3ab)]&&!_0x5941ea['whoCanUse']?.[_0x3f5c6c(0x4c4)](this[_0x3f5c6c(0x770)][_0x3f5c6c(0x808)])&&(_0x5941ea['whoCanUse']=[..._0x5941ea[_0x3f5c6c(0x5e4)]??[],this[_0x3f5c6c(0x770)][_0x3f5c6c(0x808)]],await this['repository'][_0x3f5c6c(0x35b)][_0x3f5c6c(0x6ce)](_0x5941ea[_0x3f5c6c(0x2c7)],_0x5941ea),this['synchronizeAndMapFlows']());let _0x3cabdf=this[_0x3f5c6c(0x3f7)]?.[_0x3f5c6c(0x883)][_0x3f5c6c(0x790)](_0x47fc8b=>_0x47fc8b[_0x3f5c6c(0x673)]),_0x56a1bd=['nome',_0x3f5c6c(0x538),_0x3f5c6c(0x806),'cpf',_0x3f5c6c(0x71c),'notas',_0x3f5c6c(0x88d),_0x3f5c6c(0x699),_0x3f5c6c(0x335),_0x3f5c6c(0x79a),_0x3f5c6c(0x7ad)];_0x5941ea[_0x3f5c6c(0x80b)]=_0x5941ea['variables'][_0x3f5c6c(0x334)](_0x2f7fb0=>!(_0x2f7fb0[_0x3f5c6c(0x56b)]===_0x3f5c6c(0x719)||_0x2f7fb0[_0x3f5c6c(0x719)])),_0x56a1bd[_0x3f5c6c(0x3f2)](_0x51156b=>{const _0x1f8333=_0x3f5c6c;_0x5941ea[_0x1f8333(0x80b)][_0x1f8333(0x26d)]({'folder':'leadInfo','name':_0x51156b,'value':'','doc':'','leadInfo':!0x0});}),_0x3cabdf[_0x3f5c6c(0x3f2)](_0x466488=>{const _0x2e21ad=_0x3f5c6c;let _0x1a8aba=_0x5941ea[_0x2e21ad(0x80b)][_0x2e21ad(0x695)](_0x376e16=>_0x376e16[_0x2e21ad(0x673)]===_0x466488);_0x1a8aba===-0x1?_0x5941ea['variables'][_0x2e21ad(0x26d)]({'folder':_0x2e21ad(0x719),'name':_0x466488,'value':'','doc':'','leadInfo':!0x0}):(_0x5941ea['variables'][_0x1a8aba]['folder']=_0x2e21ad(0x719),_0x5941ea[_0x2e21ad(0x80b)][_0x1a8aba][_0x2e21ad(0x719)]=!0x0);}),_0x5941ea[_0x3f5c6c(0x7a1)]&&_0x5941ea[_0x3f5c6c(0x7a1)][_0x3f5c6c(0x3a3)]>0x0&&_0x5941ea[_0x3f5c6c(0x7a1)][_0x3f5c6c(0x3f2)](_0x2cc9af=>{const _0x5ca43d=_0x3f5c6c;_0x2cc9af[_0x5ca43d(0x223)]&&_0x2cc9af[_0x5ca43d(0x67a)]&&_0x2cc9af[_0x5ca43d(0x223)]===_0x2cc9af[_0x5ca43d(0x67a)]&&(_0x2cc9af[_0x5ca43d(0x67a)]=null);});let _0x51febc=await this[_0x3f5c6c(0x261)][_0x3f5c6c(0x35b)][_0x3f5c6c(0x6ce)](_0x5941ea['_id'],_0x5941ea);if(!_0x51febc)throw new Error(_0x3f5c6c(0x3a0));return _0x51febc;}catch(_0x32f2f2){let _0xd83936=_0x3f5c6c(0x2d9),_0x58e0d1=_0x32f2f2 instanceof Error?_0x32f2f2[_0x3f5c6c(0x5ce)]:typeof _0x32f2f2==_0x3f5c6c(0x89b)?JSON['stringify'](_0x32f2f2):_0x32f2f2,_0x5a1499=_0xd83936+':\x20'+_0x58e0d1;throw this[_0x3f5c6c(0x3cb)][_0x3f5c6c(0x651)](this['instanceName']+'\x20('+this[_0x3f5c6c(0x770)][_0x3f5c6c(0x808)]+_0x3f5c6c(0x4b7)+_0x5a1499),new m(_0x5a1499);}}async['allFlows'](){const _0x2957a8=a0_0x34b2dc;try{this[_0x2957a8(0x3cb)][_0x2957a8(0x798)](this[_0x2957a8(0x402)]+'\x20('+this[_0x2957a8(0x770)][_0x2957a8(0x808)]+_0x2957a8(0x7ce)),await this[_0x2957a8(0x245)]();let _0x3074ae=await this['repository']['flow'][_0x2957a8(0x3d9)]({'where':{'globalShow':!0x0}});return[...this[_0x2957a8(0x3f7)][_0x2957a8(0x4b9)],..._0x3074ae];}catch(_0x4fa8c3){return this[_0x2957a8(0x3cb)][_0x2957a8(0x651)](this['instanceName']+'\x20('+this['instance'][_0x2957a8(0x808)]+_0x2957a8(0x7f6)+(_0x4fa8c3 instanceof Error?_0x4fa8c3[_0x2957a8(0x5ce)]:JSON[_0x2957a8(0x43f)](_0x4fa8c3,null,0x2))),{'message':_0x2957a8(0x41d)+(_0x4fa8c3 instanceof Error?_0x4fa8c3[_0x2957a8(0x5ce)]:String(_0x4fa8c3))};}}async[a0_0x34b2dc(0x280)](_0x2986c3,_0x30e29b){const _0x5ee250=a0_0x34b2dc;try{this[_0x5ee250(0x3cb)][_0x5ee250(0x798)](this[_0x5ee250(0x402)]+'\x20('+this[_0x5ee250(0x770)][_0x5ee250(0x808)]+_0x5ee250(0x42e));let _0x388bca=this[_0x5ee250(0x3f7)]['flows']['find'](_0x260a53=>_0x260a53[_0x5ee250(0x2c7)]===_0x2986c3[_0x5ee250(0x2c7)]);if(!_0x388bca)throw this[_0x5ee250(0x3cb)][_0x5ee250(0x798)](this[_0x5ee250(0x402)]+'\x20('+this['instance'][_0x5ee250(0x808)]+_0x5ee250(0x5f9)+_0x2986c3['_id']+'\x27\x20não\x20encontrado'),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x234381=await this[_0x5ee250(0x261)]['flow'][_0x5ee250(0x440)]({'where':{'_id':_0x2986c3[_0x5ee250(0x2c7)]}});if(!_0x234381||!_0x234381['whoCanUse']?.[_0x5ee250(0x4c4)](this['instance'][_0x5ee250(0x808)]))throw this[_0x5ee250(0x3cb)][_0x5ee250(0x651)](this['instanceName']+'\x20('+this['instance'][_0x5ee250(0x808)]+'):\x20Flow\x20\x27'+_0x2986c3['_id']+_0x5ee250(0x457)),new m(_0x5ee250(0x4b4)+_0x2986c3[_0x5ee250(0x2c7)]+_0x5ee250(0x457));let _0x324a40=this[_0x5ee250(0x3f7)][_0x5ee250(0x4b9)]['findIndex'](_0x32bef2=>_0x32bef2[_0x5ee250(0x2c7)]===_0x388bca[_0x5ee250(0x2c7)]);if(_0x324a40!==-0x1){let _0x4e14e6=this['AutomateSystem'][_0x5ee250(0x4b9)][_0x324a40];if(_0x4e14e6['name']=_0x2986c3[_0x5ee250(0x673)]??_0x4e14e6['name'],_0x4e14e6[_0x5ee250(0x62c)]=_0x2986c3[_0x5ee250(0x62c)]??_0x4e14e6[_0x5ee250(0x62c)],_0x4e14e6['testingWith']=_0x2986c3[_0x5ee250(0x679)]??_0x4e14e6['testingWith'],_0x4e14e6[_0x5ee250(0x2e6)]=_0x2986c3[_0x5ee250(0x775)]??_0x4e14e6[_0x5ee250(0x2e6)],_0x4e14e6[_0x5ee250(0x41b)]=_0x2986c3[_0x5ee250(0x41b)]??_0x4e14e6['minutesToClose'],_0x4e14e6['readMessages']=_0x2986c3[_0x5ee250(0x84c)]??_0x4e14e6[_0x5ee250(0x84c)],_0x2986c3[_0x5ee250(0x62c)]&&this[_0x5ee250(0x3f7)][_0x5ee250(0x4b9)][_0x5ee250(0x3f2)]((_0x146362,_0x582e23)=>{_0x582e23!==_0x324a40&&(_0x146362['default']=!0x1);}),this[_0x5ee250(0x3f7)][_0x5ee250(0x4b9)][_0x324a40]=_0x4e14e6,!await this[_0x5ee250(0x261)][_0x5ee250(0x484)][_0x5ee250(0x78f)]({'flows':this[_0x5ee250(0x3f7)]['flows']},this[_0x5ee250(0x770)][_0x5ee250(0x808)]))throw new m(_0x5ee250(0x2fb));}let _0x3f7dc6=[_0x5ee250(0x795),'startID',_0x5ee250(0x8bf),_0x5ee250(0x8e8)];for(let _0x57919d of _0x3f7dc6)delete _0x2986c3[_0x57919d];if(_0x234381[_0x5ee250(0x468)]?.[_0x5ee250(0x4c4)](this[_0x5ee250(0x770)]['wuid'])||(_0x2986c3={'_id':_0x2986c3[_0x5ee250(0x2c7)]}),_0x30e29b!==Ti&&_0x2986c3?.['globalShow']&&!_0x234381?.['globalShow'])throw new m(_0x5ee250(0x7e9));let _0x2d0bc9=new Set(_0x2986c3['whoCanEdit']??_0x234381['whoCanEdit']);_0x2d0bc9['add'](_0x234381[_0x5ee250(0x56c)]);let _0x4e8109=new Set(_0x2986c3[_0x5ee250(0x5e4)]??_0x234381[_0x5ee250(0x5e4)]??[]);_0x2d0bc9[_0x5ee250(0x3f2)](_0x2deb52=>_0x4e8109[_0x5ee250(0x420)](_0x2deb52)),_0x4e8109[_0x5ee250(0x420)](_0x234381[_0x5ee250(0x56c)]),this[_0x5ee250(0x3cb)][_0x5ee250(0x798)](this[_0x5ee250(0x402)]+'\x20('+this[_0x5ee250(0x770)]['wuid']+_0x5ee250(0x860)+Array[_0x5ee250(0x77b)](_0x2d0bc9)),this[_0x5ee250(0x3cb)][_0x5ee250(0x798)](this[_0x5ee250(0x402)]+'\x20('+this[_0x5ee250(0x770)][_0x5ee250(0x808)]+_0x5ee250(0x681)+Array[_0x5ee250(0x77b)](_0x4e8109));let _0x12cc3f=await this[_0x5ee250(0x89e)](Array[_0x5ee250(0x77b)](_0x4e8109)),_0x53ac46=Array[_0x5ee250(0x77b)](_0x2d0bc9)['filter'](_0x5782f2=>_0x12cc3f['includes'](_0x5782f2)),_0xb0c302=Array[_0x5ee250(0x77b)](_0x4e8109)['filter'](_0x1b8ad4=>_0x12cc3f[_0x5ee250(0x4c4)](_0x1b8ad4));this[_0x5ee250(0x3cb)]['verbose'](this[_0x5ee250(0x402)]+'\x20('+this[_0x5ee250(0x770)][_0x5ee250(0x808)]+_0x5ee250(0x8d1)+_0x53ac46),this['logger']['verbose'](this[_0x5ee250(0x402)]+'\x20('+this['instance'][_0x5ee250(0x808)]+'):\x20whoCanUse\x20after\x20validation:\x20'+_0xb0c302);let _0x161929={..._0x234381,..._0x2986c3,'whoCanEdit':_0x53ac46,'whoCanUse':_0xb0c302},_0x5a1e95=await this[_0x5ee250(0x261)]['flow'][_0x5ee250(0x6ce)](_0x234381[_0x5ee250(0x2c7)],_0x161929);return await this[_0x5ee250(0x245)](),_0x5a1e95;}catch(_0x198ff6){let _0x2dbabc='Erro\x20ao\x20alterar\x20fluxo',_0x4b8e5d=_0x198ff6 instanceof Error?_0x198ff6['message']:typeof _0x198ff6==_0x5ee250(0x89b)?JSON[_0x5ee250(0x43f)](_0x198ff6):_0x198ff6,_0x37be91=_0x2dbabc+':\x20'+_0x4b8e5d;throw this['logger'][_0x5ee250(0x651)](this[_0x5ee250(0x402)]+'\x20('+this[_0x5ee250(0x770)][_0x5ee250(0x808)]+_0x5ee250(0x4b7)+_0x37be91),new m(_0x37be91);}}async[a0_0x34b2dc(0x89e)](_0x5a6d3a){const _0x2d6ed1=a0_0x34b2dc;let _0xf20bb2={'numbers':_0x5a6d3a};return(await this[_0x2d6ed1(0x70c)](_0xf20bb2))[_0x2d6ed1(0x334)](_0x3d178d=>_0x3d178d['exists'])[_0x2d6ed1(0x790)](_0x409990=>_0x409990['jid'])['map'](_0x2aba02=>this[_0x2d6ed1(0x2f7)](_0x2aba02));}[a0_0x34b2dc(0x2f7)](_0x1ea026){const _0x29a2a9=a0_0x34b2dc;let _0x5849f4=_0x1ea026[_0x29a2a9(0x52f)](/\d+/);return _0x5849f4?_0x5849f4[0x0]:'';}async[a0_0x34b2dc(0x57e)](_0x8a2558){const _0x534c45=a0_0x34b2dc;try{if(this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x534c45(0x770)][_0x534c45(0x808)]+_0x534c45(0x766)),!this[_0x534c45(0x3f7)][_0x534c45(0x4b9)][_0x534c45(0x253)](_0x3af2b3=>_0x3af2b3['_id']===_0x8a2558[_0x534c45(0x2c7)]))throw this[_0x534c45(0x3cb)]['verbose'](this[_0x534c45(0x402)]+'\x20('+this[_0x534c45(0x770)][_0x534c45(0x808)]+'):\x20Fluxo\x20\x27'+_0x8a2558[_0x534c45(0x2c7)]+_0x534c45(0x2a6)),new m(_0x534c45(0x629));let _0xcbb921=await this[_0x534c45(0x261)][_0x534c45(0x35b)][_0x534c45(0x440)]({'where':{'_id':_0x8a2558[_0x534c45(0x2c7)]}});if(!_0xcbb921||!_0xcbb921['whoCanUse']?.[_0x534c45(0x4c4)](this[_0x534c45(0x770)][_0x534c45(0x808)]))throw this[_0x534c45(0x3cb)][_0x534c45(0x651)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x534c45(0x93a)+_0x8a2558[_0x534c45(0x2c7)]+_0x534c45(0x457)),new m(_0x534c45(0x4b4)+_0x8a2558[_0x534c45(0x2c7)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0xcbb921[_0x534c45(0x468)]?.[_0x534c45(0x4c4)](this[_0x534c45(0x770)]['wuid']))throw new m(_0x534c45(0x87f));let {block:_0x479a57}=_0x8a2558;_0x479a57?.[_0x534c45(0x465)]?this[_0x534c45(0x76d)](_0xcbb921,_0x8a2558):_0x479a57?.[_0x534c45(0x366)]?this['deleteBlock'](_0xcbb921,_0x8a2558):_0x479a57[_0x534c45(0x2c7)]?await this[_0x534c45(0x935)](_0xcbb921,_0x8a2558):this[_0x534c45(0x938)](_0xcbb921,_0x8a2558);let _0x23eeea=await this['repository']['flow'][_0x534c45(0x6ce)](_0xcbb921[_0x534c45(0x2c7)],_0xcbb921);if(!_0x23eeea)throw new Error(_0x534c45(0x3a0));return _0x23eeea;}catch(_0x40b8cf){this[_0x534c45(0x8b4)](_0x534c45(0x6b2)+_0x40b8cf['message']);}}async['copyBlock'](_0x596e52,_0x3bb61d){const _0x489cf2=a0_0x34b2dc;let _0x1bf3a1=_0x3bb61d[_0x489cf2(0x66b)][_0x489cf2(0x2c7)],_0x38bb13=_0x596e52[_0x489cf2(0x7a1)][_0x489cf2(0x253)](_0x47a5ac=>_0x47a5ac[_0x489cf2(0x2c7)][_0x489cf2(0x1fe)]()===_0x1bf3a1);if(!_0x38bb13){this[_0x489cf2(0x3cb)][_0x489cf2(0x651)](this[_0x489cf2(0x402)]+'\x20('+this[_0x489cf2(0x770)]['wuid']+_0x489cf2(0x738)+_0x1bf3a1+'\x20não\x20encontrado\x20para\x20cópia');return;}this[_0x489cf2(0x3cb)][_0x489cf2(0x798)](this[_0x489cf2(0x402)]+'\x20('+this['instance'][_0x489cf2(0x808)]+_0x489cf2(0x3f0)+JSON[_0x489cf2(0x43f)](_0x38bb13));let _0x4e2a56=JSON[_0x489cf2(0x232)](JSON[_0x489cf2(0x43f)](_0x38bb13));_0x4e2a56[_0x489cf2(0x2c7)]=new fe['default']['Types'][(_0x489cf2(0x639))](),this[_0x489cf2(0x3cb)][_0x489cf2(0x798)](this[_0x489cf2(0x402)]+'\x20('+this[_0x489cf2(0x770)]['wuid']+_0x489cf2(0x21e)+JSON['stringify'](_0x4e2a56)),_0x596e52[_0x489cf2(0x7a1)][_0x489cf2(0x26d)](_0x4e2a56),this[_0x489cf2(0x2d4)](_0x596e52[_0x489cf2(0x7a1)],_0x4e2a56['groupId']);}[a0_0x34b2dc(0x8b4)](_0x52b279){const _0x182099=a0_0x34b2dc;throw this[_0x182099(0x3cb)][_0x182099(0x651)](this[_0x182099(0x402)]+'\x20('+this[_0x182099(0x770)][_0x182099(0x808)]+_0x182099(0x4b7)+_0x52b279),new m(_0x52b279);}[a0_0x34b2dc(0x89c)](_0x360f97,_0x30b7eb){const _0x45bf8d=a0_0x34b2dc;let {block:_0x2cc42e}=_0x30b7eb;if(_0x2cc42e[_0x45bf8d(0x248)]===_0x45bf8d(0x28c)){this[_0x45bf8d(0x8b4)](_0x45bf8d(0x226));return;}if(!_0x2cc42e[_0x45bf8d(0x2c7)]){this[_0x45bf8d(0x8b4)](_0x45bf8d(0x78b));return;}let _0x518f7d=_0x360f97[_0x45bf8d(0x7a1)][_0x45bf8d(0x253)](_0x30a6a2=>_0x30a6a2[_0x45bf8d(0x2c7)][_0x45bf8d(0x1fe)]()===_0x30b7eb['block']['_id']['toString']());if(!_0x518f7d){this[_0x45bf8d(0x8b4)](_0x45bf8d(0x765)+_0x2cc42e['_id']+'\x20não\x20encontrado');return;}_0x360f97[_0x45bf8d(0x7a1)]=_0x360f97[_0x45bf8d(0x7a1)][_0x45bf8d(0x334)](_0x37a523=>_0x37a523[_0x45bf8d(0x2c7)][_0x45bf8d(0x1fe)]()!==_0x30b7eb[_0x45bf8d(0x66b)]['_id'][_0x45bf8d(0x1fe)]()),_0x360f97['conditions']=_0x360f97[_0x45bf8d(0x4df)][_0x45bf8d(0x334)](_0x579c64=>_0x579c64[_0x45bf8d(0x909)]!==_0x2cc42e['_id'][_0x45bf8d(0x1fe)]()),_0x360f97['varedits']=_0x360f97[_0x45bf8d(0x7c3)][_0x45bf8d(0x334)](_0x282ac5=>_0x282ac5[_0x45bf8d(0x909)]!==_0x2cc42e[_0x45bf8d(0x2c7)][_0x45bf8d(0x1fe)]()),_0x360f97['replyOptions']=_0x360f97['replyOptions'][_0x45bf8d(0x334)](_0x353101=>_0x353101['blockId']!==_0x2cc42e[_0x45bf8d(0x2c7)][_0x45bf8d(0x1fe)]()),this[_0x45bf8d(0x2d4)](_0x360f97[_0x45bf8d(0x7a1)],_0x518f7d[_0x45bf8d(0x223)]);}async[a0_0x34b2dc(0x935)](_0xdc8595,_0x20148c){const _0x1a5994=a0_0x34b2dc;let _0x2c54d6=_0xdc8595[_0x1a5994(0x7a1)][_0x1a5994(0x695)](_0x1cb5be=>_0x1cb5be[_0x1a5994(0x2c7)][_0x1a5994(0x1fe)]()===_0x20148c[_0x1a5994(0x66b)]['_id'][_0x1a5994(0x1fe)]());if(this[_0x1a5994(0x3cb)][_0x1a5994(0x798)](this[_0x1a5994(0x402)]+'\x20('+this[_0x1a5994(0x770)][_0x1a5994(0x808)]+_0x1a5994(0x371)+_0x2c54d6),_0x2c54d6===-0x1){this['logger'][_0x1a5994(0x798)](_0x1a5994(0x765)+_0x20148c[_0x1a5994(0x66b)][_0x1a5994(0x2c7)]+_0x1a5994(0x499));return;}if(_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x248)]==='start'){let _0x1330ae=Object[_0x1a5994(0x37c)](_0x20148c[_0x1a5994(0x66b)]);if(_0x1330ae[_0x1a5994(0x3a3)]>0x2||_0x1330ae[_0x1a5994(0x3a3)]===0x2&&!_0x1330ae[_0x1a5994(0x4c4)](_0x1a5994(0x67a))){this['throwAndLogError'](_0x1a5994(0x7fe));return;}}let _0x54ec96=_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x223)];for(let _0x3d7208 in _0x20148c[_0x1a5994(0x66b)])_0x20148c['block'][_0x1a5994(0x59e)](_0x3d7208)&&(_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x3d7208]=_0x20148c[_0x1a5994(0x66b)][_0x3d7208]);if(this['logger'][_0x1a5994(0x798)](this[_0x1a5994(0x402)]+'\x20('+this['instance'][_0x1a5994(0x808)]+'):\x20Bloco\x20a\x20ser\x20atualizado:\x20'+JSON[_0x1a5994(0x43f)](_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6])),_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x246)]&&_0x1a5994(0x544)in _0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x246)]){this[_0x1a5994(0x3cb)][_0x1a5994(0x798)](this[_0x1a5994(0x402)]+'\x20('+this[_0x1a5994(0x770)][_0x1a5994(0x808)]+_0x1a5994(0x677));let _0x40c1a5=JSON[_0x1a5994(0x43f)](_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6]['apirequest'][_0x1a5994(0x544)],null,0x1);_0x40c1a5['length']>0x2&&(_0x40c1a5=_0x40c1a5['substring'](0x1,_0x40c1a5[_0x1a5994(0x3a3)]-0x1)[_0x1a5994(0x3b8)]()),_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x246)][_0x1a5994(0x8a8)]=_0x40c1a5;}if(_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x246)]&&_0x1a5994(0x36e)in _0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x246)]&&!(_0x1a5994(0x587)in _0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x246)])){this[_0x1a5994(0x3cb)][_0x1a5994(0x798)](this[_0x1a5994(0x402)]+'\x20('+this[_0x1a5994(0x770)][_0x1a5994(0x808)]+_0x1a5994(0x905)),_0xdc8595['blocks'][_0x2c54d6][_0x1a5994(0x246)][_0x1a5994(0x299)]=!0x1;let _0x1744f6=JSON[_0x1a5994(0x43f)](_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x246)][_0x1a5994(0x36e)],null,0x2);_0xdc8595['blocks'][_0x2c54d6]['apirequest'][_0x1a5994(0x587)]=_0x1744f6;}if(_0xdc8595['blocks'][_0x2c54d6][_0x1a5994(0x246)]&&_0x1a5994(0x587)in _0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x246)]){_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x246)]['bodyStringErrorParse']=!0x1;let _0x545051=_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6]['apirequest'][_0x1a5994(0x587)],_0x371031=this[_0x1a5994(0x896)](_0x545051);_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x246)]['bodyString']=_0x371031[_0x1a5994(0x2cd)],_0xdc8595['blocks'][_0x2c54d6][_0x1a5994(0x246)][_0x1a5994(0x299)]=_0x371031[_0x1a5994(0x651)];}let _0x60911=_0xdc8595[_0x1a5994(0x7a1)][_0x2c54d6][_0x1a5994(0x223)];_0x54ec96!==_0x60911?(this[_0x1a5994(0x2d4)](_0xdc8595['blocks'],_0x54ec96),this[_0x1a5994(0x2d4)](_0xdc8595['blocks'],_0x60911)):this[_0x1a5994(0x2d4)](_0xdc8595['blocks'],_0x54ec96);}[a0_0x34b2dc(0x896)](_0x37f547){const _0x85c996=a0_0x34b2dc;let _0x4e7038='\u205f',_0x18d4fe=!0x1,_0x5a92a1='';for(let _0x58f9d5=0x0;_0x58f9d5<_0x37f547['length'];_0x58f9d5++){let _0x8858d=_0x37f547[_0x58f9d5];_0x8858d==='\x22'&&(_0x58f9d5===0x0||_0x37f547[_0x58f9d5-0x1]!=='\x5c')&&(_0x18d4fe=!_0x18d4fe),!(!_0x18d4fe&&(_0x8858d==='\x0a'||_0x8858d==='\x20'||_0x8858d===_0x4e7038))&&(_0x5a92a1+=_0x8858d);}let _0x494735={},_0x11bea2=9876543210.1234,_0x27ba44=_0x5a92a1[_0x85c996(0x2a1)](/\{\{([^}]+)\}\}/g,_0x2ad9e6=>{let _0x7bb176=_0x2ad9e6,_0x819520=''+_0x11bea2;return _0x494735[_0x819520]=_0x7bb176,_0x11bea2+=0.0001,_0x819520;}),_0x17a840='',_0x470f96=!0x1;try{let _0x47ee22=JSON['parse'](_0x27ba44);_0x17a840=JSON[_0x85c996(0x43f)](_0x47ee22,null,0x2),_0x17a840=_0x17a840[_0x85c996(0x2a1)](/\n( +)/g,(_0x3be2e2,_0x54cf39)=>{const _0x19073f=_0x85c996;let _0x15d8c3=_0x54cf39['length'];return'\x0a'+_0x4e7038[_0x19073f(0x842)](_0x15d8c3*0x2);}),_0x17a840=_0x17a840[_0x85c996(0x2a1)](/(\d{10,}\.\d+)/g,_0x5f3b3c=>_0x494735[_0x5f3b3c]||_0x5f3b3c);}catch(_0x9854e1){this[_0x85c996(0x3cb)][_0x85c996(0x651)](_0x85c996(0x387)+_0x9854e1),_0x17a840=_0x37f547,_0x470f96=!0x0;}return{'result':_0x17a840,'error':_0x470f96};}[a0_0x34b2dc(0x938)](_0x3e204c,_0x369d27){const _0x352a2e=a0_0x34b2dc;if(_0x369d27[_0x352a2e(0x66b)][_0x352a2e(0x248)]===_0x352a2e(0x28c)){this[_0x352a2e(0x8b4)](_0x352a2e(0x5dd));return;}if(_0x369d27[_0x352a2e(0x66b)][_0x352a2e(0x246)]&&_0x352a2e(0x544)in _0x369d27['block'][_0x352a2e(0x246)]){this[_0x352a2e(0x3cb)][_0x352a2e(0x798)](this[_0x352a2e(0x402)]+'\x20('+this[_0x352a2e(0x770)][_0x352a2e(0x808)]+_0x352a2e(0x677));let _0x5d9a19=JSON[_0x352a2e(0x43f)](_0x369d27[_0x352a2e(0x66b)][_0x352a2e(0x246)][_0x352a2e(0x544)],null,0x1);_0x5d9a19[_0x352a2e(0x3a3)]>0x2&&(_0x5d9a19=_0x5d9a19[_0x352a2e(0x374)](0x1,_0x5d9a19['length']-0x1)[_0x352a2e(0x3b8)]()),_0x369d27[_0x352a2e(0x66b)][_0x352a2e(0x246)][_0x352a2e(0x8a8)]=_0x5d9a19;}_0x369d27[_0x352a2e(0x66b)][_0x352a2e(0x246)]&&'body'in _0x369d27[_0x352a2e(0x66b)][_0x352a2e(0x246)]&&(this[_0x352a2e(0x3cb)][_0x352a2e(0x798)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x369d27[_0x352a2e(0x66b)][_0x352a2e(0x246)][_0x352a2e(0x587)]=JSON[_0x352a2e(0x43f)](_0x369d27['block'][_0x352a2e(0x246)][_0x352a2e(0x36e)],null,0x1)[_0x352a2e(0x3b8)]()),_0x3e204c['blocks']['push'](_0x369d27[_0x352a2e(0x66b)]),this[_0x352a2e(0x2d4)](_0x3e204c[_0x352a2e(0x7a1)],_0x369d27['block'][_0x352a2e(0x223)]);}['reorderBlocks'](_0x4ae264,_0x176ec3){const _0x18f872=a0_0x34b2dc;let _0x2a3fbe=_0x4ae264[_0x18f872(0x334)](_0x500bfa=>_0x500bfa[_0x18f872(0x223)]===_0x176ec3);_0x2a3fbe[_0x18f872(0x289)]((_0x4322e6,_0x469a5c)=>_0x4322e6[_0x18f872(0x881)]-_0x469a5c[_0x18f872(0x881)]),_0x2a3fbe['forEach']((_0x467709,_0x5bfde7)=>_0x467709['order']=_0x5bfde7+0x1);}async[a0_0x34b2dc(0x5f1)](_0x502a7c){const _0x47c517=a0_0x34b2dc;try{if(this[_0x47c517(0x3cb)]['verbose'](this[_0x47c517(0x402)]+'\x20('+this[_0x47c517(0x770)][_0x47c517(0x808)]+_0x47c517(0x8e7)),!_0x502a7c||!_0x502a7c[_0x47c517(0x355)]){this[_0x47c517(0x8b4)](_0x47c517(0x7e6));return;}if(!this[_0x47c517(0x3f7)]['flows'][_0x47c517(0x253)](_0x45e231=>_0x45e231[_0x47c517(0x2c7)]===_0x502a7c[_0x47c517(0x2c7)]))throw this[_0x47c517(0x3cb)][_0x47c517(0x798)](this[_0x47c517(0x402)]+'\x20('+this[_0x47c517(0x770)][_0x47c517(0x808)]+_0x47c517(0x5f9)+_0x502a7c['_id']+_0x47c517(0x2a6)),new m(_0x47c517(0x629));let _0x228d1a=await this[_0x47c517(0x261)][_0x47c517(0x35b)][_0x47c517(0x440)]({'where':{'_id':_0x502a7c[_0x47c517(0x2c7)]}});if(!_0x228d1a||!_0x228d1a[_0x47c517(0x5e4)]?.[_0x47c517(0x4c4)](this[_0x47c517(0x770)][_0x47c517(0x808)]))throw this[_0x47c517(0x3cb)][_0x47c517(0x651)](this[_0x47c517(0x402)]+'\x20('+this[_0x47c517(0x770)][_0x47c517(0x808)]+_0x47c517(0x93a)+_0x502a7c['_id']+_0x47c517(0x457)),new m('Flow\x20\x27'+_0x502a7c['_id']+_0x47c517(0x457));if(!_0x228d1a[_0x47c517(0x468)]?.['includes'](this[_0x47c517(0x770)][_0x47c517(0x808)]))throw new m(_0x47c517(0x87f));let {replyOption:_0x27fc65}=_0x502a7c;_0x27fc65?.[_0x47c517(0x366)]?(this['deleteReplyOption'](_0x228d1a,_0x502a7c),this[_0x47c517(0x5f6)](_0x228d1a[_0x47c517(0x91e)],_0x502a7c[_0x47c517(0x355)]['blockId'])):_0x27fc65[_0x47c517(0x2c7)]?(await this[_0x47c517(0x3c1)](_0x228d1a,_0x502a7c),this[_0x47c517(0x5f6)](_0x228d1a[_0x47c517(0x91e)],_0x502a7c[_0x47c517(0x355)][_0x47c517(0x909)])):(this[_0x47c517(0x5e2)](_0x228d1a,_0x502a7c),this[_0x47c517(0x5f6)](_0x228d1a[_0x47c517(0x91e)],_0x502a7c[_0x47c517(0x355)][_0x47c517(0x909)]));let _0x47aaf0=await this[_0x47c517(0x261)]['flow'][_0x47c517(0x6ce)](_0x228d1a[_0x47c517(0x2c7)],_0x228d1a);if(!_0x47aaf0)throw new Error(_0x47c517(0x3a0));return _0x47aaf0;}catch(_0x40bb44){this[_0x47c517(0x8b4)]('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0x40bb44);}}[a0_0x34b2dc(0x5f6)](_0x187bb0,_0x520be2){const _0x33e6a3=a0_0x34b2dc;_0x187bb0[_0x33e6a3(0x3f2)](_0x368537=>{const _0x4a086a=_0x33e6a3;_0x368537['blockId']===_0x520be2&&_0x368537[_0x4a086a(0x881)]===void 0x0&&(_0x368537[_0x4a086a(0x881)]=0x270f);});let _0x2b3cdf=_0x187bb0['filter'](_0xd2d09c=>_0xd2d09c[_0x33e6a3(0x909)]===_0x520be2);_0x2b3cdf[_0x33e6a3(0x289)]((_0x423a9b,_0x23a362)=>_0x423a9b['order']-_0x23a362[_0x33e6a3(0x881)]),_0x2b3cdf[_0x33e6a3(0x3f2)]((_0x5887d0,_0x26b474)=>{const _0x52253c=_0x33e6a3;_0x5887d0[_0x52253c(0x881)]=_0x26b474+0x1;}),_0x187bb0[_0x33e6a3(0x3f2)](_0x4b7043=>{const _0x3ba822=_0x33e6a3;if(_0x4b7043[_0x3ba822(0x909)]===_0x520be2){let _0x49b167=_0x2b3cdf[_0x3ba822(0x253)](_0x1b83b3=>_0x1b83b3['_id']&&_0x4b7043['_id']&&_0x1b83b3['_id'][_0x3ba822(0x1fe)]()===_0x4b7043['_id'][_0x3ba822(0x1fe)]());_0x49b167&&(_0x4b7043[_0x3ba822(0x881)]=_0x49b167['order']);}});}['deleteReplyOption'](_0x439c2c,_0x6960fe){const _0x178304=a0_0x34b2dc;let {replyOption:_0x21b2dd}=_0x6960fe;if(!_0x21b2dd[_0x178304(0x2c7)]){this[_0x178304(0x8b4)]('replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption');return;}if(!_0x439c2c[_0x178304(0x91e)][_0x178304(0x253)](_0x1a52a7=>_0x1a52a7[_0x178304(0x2c7)][_0x178304(0x1fe)]()===_0x6960fe[_0x178304(0x355)][_0x178304(0x2c7)][_0x178304(0x1fe)]())){this[_0x178304(0x8b4)]('ReplyOption\x20com\x20ID\x20'+_0x21b2dd['_id']+_0x178304(0x79c));return;}_0x439c2c['replyOptions']=_0x439c2c[_0x178304(0x91e)][_0x178304(0x334)](_0x42a7ec=>_0x42a7ec[_0x178304(0x2c7)][_0x178304(0x1fe)]()!==_0x6960fe[_0x178304(0x355)][_0x178304(0x2c7)][_0x178304(0x1fe)]());}async['updateReplyOption'](_0x33869e,_0x114352){const _0x2480fb=a0_0x34b2dc;let _0x2bb78d=_0x33869e[_0x2480fb(0x91e)][_0x2480fb(0x695)](_0xb4e6ad=>_0xb4e6ad[_0x2480fb(0x2c7)][_0x2480fb(0x1fe)]()===_0x114352['replyOption']['_id'][_0x2480fb(0x1fe)]());if(_0x2bb78d===-0x1){this[_0x2480fb(0x8b4)](_0x2480fb(0x776)+_0x114352[_0x2480fb(0x355)][_0x2480fb(0x2c7)]+_0x2480fb(0x499));return;}for(let _0x11cafd in _0x114352[_0x2480fb(0x355)])_0x114352[_0x2480fb(0x355)][_0x2480fb(0x59e)](_0x11cafd)&&(_0x33869e[_0x2480fb(0x91e)][_0x2bb78d][_0x11cafd]=_0x114352['replyOption'][_0x11cafd]);}[a0_0x34b2dc(0x5e2)](_0x1a81cb,_0x24d7b2){const _0x481d5b=a0_0x34b2dc;_0x1a81cb[_0x481d5b(0x91e)][_0x481d5b(0x26d)](_0x24d7b2['replyOption']);}async[a0_0x34b2dc(0x4ec)](_0x24fbe5){const _0x34284d=a0_0x34b2dc;this[_0x34284d(0x3cb)][_0x34284d(0x798)](this[_0x34284d(0x402)]+'\x20('+this[_0x34284d(0x770)]['wuid']+'):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20'+JSON[_0x34284d(0x43f)](_0x24fbe5,null,0x2));try{if(this['logger'][_0x34284d(0x798)](this[_0x34284d(0x402)]+'\x20('+this[_0x34284d(0x770)][_0x34284d(0x808)]+_0x34284d(0x260)),!this[_0x34284d(0x3f7)][_0x34284d(0x4b9)]['find'](_0x5698cc=>_0x5698cc['_id']===_0x24fbe5['_id']))throw this['logger'][_0x34284d(0x798)](this[_0x34284d(0x402)]+'\x20('+this[_0x34284d(0x770)][_0x34284d(0x808)]+_0x34284d(0x5f9)+_0x24fbe5[_0x34284d(0x2c7)]+_0x34284d(0x2a6)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x139596=await this['repository'][_0x34284d(0x35b)][_0x34284d(0x440)]({'where':{'_id':_0x24fbe5[_0x34284d(0x2c7)]}});if(!_0x139596||!_0x139596[_0x34284d(0x5e4)]?.[_0x34284d(0x4c4)](this['instance'][_0x34284d(0x808)]))throw this[_0x34284d(0x3cb)][_0x34284d(0x651)](this[_0x34284d(0x402)]+'\x20('+this[_0x34284d(0x770)][_0x34284d(0x808)]+_0x34284d(0x93a)+_0x24fbe5['_id']+_0x34284d(0x457)),new m('Flow\x20\x27'+_0x24fbe5[_0x34284d(0x2c7)]+_0x34284d(0x457));if(!_0x139596['whoCanEdit']?.[_0x34284d(0x4c4)](this[_0x34284d(0x770)][_0x34284d(0x808)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');if(_0x24fbe5[_0x34284d(0x569)]&&_0x24fbe5[_0x34284d(0x569)]?.[_0x34284d(0x366)]===!0x0){if(this[_0x34284d(0x3cb)][_0x34284d(0x798)](this['instanceName']+'\x20('+this[_0x34284d(0x770)][_0x34284d(0x808)]+_0x34284d(0x5cf)),_0x24fbe5['group'][_0x34284d(0x62c)]===!0x0)return{'message':_0x34284d(0x3a7)};if(_0x139596[_0x34284d(0x7a1)][_0x34284d(0x74b)](_0xc845b3=>_0xc845b3[_0x34284d(0x223)][_0x34284d(0x1fe)]()===_0x24fbe5[_0x34284d(0x569)][_0x34284d(0x2c7)]))return this['logger'][_0x34284d(0x798)](this[_0x34284d(0x402)]+'\x20('+this['instance']['wuid']+'):\x20tem\x20blocks'),{'message':_0x34284d(0x5ff)};_0x139596[_0x34284d(0x38b)]=_0x139596[_0x34284d(0x38b)]['filter'](_0x11e9ee=>_0x11e9ee['_id'][_0x34284d(0x1fe)]()!==_0x24fbe5[_0x34284d(0x569)][_0x34284d(0x2c7)]);}else{if(_0x24fbe5[_0x34284d(0x569)]){if(_0x24fbe5[_0x34284d(0x569)][_0x34284d(0x62c)]===!0x0)return{'message':'Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão'};if(_0x24fbe5[_0x34284d(0x569)][_0x34284d(0x2c7)]){let _0x5435f5=_0x139596[_0x34284d(0x38b)][_0x34284d(0x253)](_0x2152e7=>_0x2152e7[_0x34284d(0x2c7)][_0x34284d(0x1fe)]()===_0x24fbe5['group']['_id']);_0x5435f5&&(_0x24fbe5[_0x34284d(0x569)]['x']<0x0&&(_0x24fbe5['group']['x']=0x0),_0x24fbe5[_0x34284d(0x569)]['y']<0x0&&(_0x24fbe5[_0x34284d(0x569)]['y']=0x0),Object[_0x34284d(0x2c4)](_0x5435f5,_0x24fbe5[_0x34284d(0x569)]));}else _0x139596[_0x34284d(0x38b)][_0x34284d(0x26d)](_0x24fbe5[_0x34284d(0x569)]);}}let _0x185e8c=await this[_0x34284d(0x261)][_0x34284d(0x35b)][_0x34284d(0x6ce)](_0x139596[_0x34284d(0x2c7)],_0x139596);if(!_0x185e8c)throw new Error(_0x34284d(0x3a0));return _0x185e8c;}catch(_0x311252){let _0x134d80='Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo',_0x16f226=_0x311252 instanceof Error?_0x311252[_0x34284d(0x5ce)]:typeof _0x311252==_0x34284d(0x89b)?JSON[_0x34284d(0x43f)](_0x311252):_0x311252,_0x47bb97=_0x134d80+':\x20'+_0x16f226;throw this['logger'][_0x34284d(0x651)](this[_0x34284d(0x402)]+'\x20('+this[_0x34284d(0x770)][_0x34284d(0x808)]+'):\x20'+_0x47bb97),new m(_0x47bb97);}}async['editFlowCondition'](_0x31ab7){const _0x170fbb=a0_0x34b2dc;try{if(this['logger']['verbose'](this[_0x170fbb(0x402)]+'\x20('+this[_0x170fbb(0x770)]['wuid']+_0x170fbb(0x6f0)),!this[_0x170fbb(0x3f7)][_0x170fbb(0x4b9)][_0x170fbb(0x253)](_0x41d569=>_0x41d569['_id']===_0x31ab7['_id']))throw this[_0x170fbb(0x3cb)][_0x170fbb(0x798)](this['instanceName']+'\x20('+this[_0x170fbb(0x770)][_0x170fbb(0x808)]+_0x170fbb(0x5f9)+_0x31ab7[_0x170fbb(0x2c7)]+'\x27\x20não\x20encontrado'),new m(_0x170fbb(0x629));let _0x35c2a8=await this['repository'][_0x170fbb(0x35b)]['findOne']({'where':{'_id':_0x31ab7[_0x170fbb(0x2c7)]}});if(!_0x35c2a8||!_0x35c2a8[_0x170fbb(0x5e4)]?.['includes'](this[_0x170fbb(0x770)]['wuid']))throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x170fbb(0x770)][_0x170fbb(0x808)]+_0x170fbb(0x93a)+_0x31ab7[_0x170fbb(0x2c7)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x170fbb(0x4b4)+_0x31ab7[_0x170fbb(0x2c7)]+_0x170fbb(0x457));if(!_0x35c2a8[_0x170fbb(0x468)]?.[_0x170fbb(0x4c4)](this[_0x170fbb(0x770)][_0x170fbb(0x808)]))throw new m(_0x170fbb(0x87f));let _0x439161=!0x1;if(_0x31ab7['condition']?.[_0x170fbb(0x366)]===!0x0)_0x35c2a8[_0x170fbb(0x4df)]=_0x35c2a8[_0x170fbb(0x4df)][_0x170fbb(0x334)](_0xe36a36=>_0xe36a36&&_0x31ab7[_0x170fbb(0x3ff)]&&_0xe36a36['_id']&&_0x31ab7[_0x170fbb(0x3ff)][_0x170fbb(0x2c7)]&&_0xe36a36[_0x170fbb(0x2c7)][_0x170fbb(0x1fe)]()!==_0x31ab7[_0x170fbb(0x3ff)][_0x170fbb(0x2c7)][_0x170fbb(0x1fe)]()),_0x439161=!0x0;else{let _0x51e2b8=_0x35c2a8[_0x170fbb(0x4df)][_0x170fbb(0x253)](_0x7edacb=>_0x7edacb&&_0x31ab7[_0x170fbb(0x3ff)]&&_0x7edacb['_id']&&_0x31ab7[_0x170fbb(0x3ff)][_0x170fbb(0x2c7)]&&_0x7edacb[_0x170fbb(0x2c7)][_0x170fbb(0x1fe)]()===_0x31ab7[_0x170fbb(0x3ff)][_0x170fbb(0x2c7)][_0x170fbb(0x1fe)]());_0x51e2b8?(_0x439161=_0x51e2b8[_0x170fbb(0x881)]!==_0x31ab7['condition'][_0x170fbb(0x881)],Object[_0x170fbb(0x2c4)](_0x51e2b8,_0x31ab7[_0x170fbb(0x3ff)])):(_0x35c2a8[_0x170fbb(0x4df)][_0x170fbb(0x26d)](_0x31ab7[_0x170fbb(0x3ff)]),_0x439161=!0x0);}if(_0x439161){_0x35c2a8[_0x170fbb(0x4df)]['sort']((_0x2720ec,_0x380b47)=>_0x2720ec[_0x170fbb(0x881)]>_0x380b47['order']?0x1:_0x380b47['order']>_0x2720ec['order']?-0x1:0x0);for(let _0x54f0f1=0x0;_0x54f0f1<_0x35c2a8['conditions'][_0x170fbb(0x3a3)];_0x54f0f1++)_0x35c2a8[_0x170fbb(0x4df)][_0x54f0f1][_0x170fbb(0x881)]=_0x54f0f1+0x1;_0x35c2a8['conditions'][_0x170fbb(0x3a3)]>0x0&&(_0x35c2a8[_0x170fbb(0x4df)][0x0][_0x170fbb(0x33d)]=_0x170fbb(0x549));}let _0x5a354a=await this[_0x170fbb(0x261)][_0x170fbb(0x35b)][_0x170fbb(0x6ce)](_0x35c2a8[_0x170fbb(0x2c7)],_0x35c2a8);if(!_0x5a354a)throw new Error(_0x170fbb(0x3a0));return _0x5a354a;}catch(_0x1fdf61){let _0x1f0347=_0x170fbb(0x926),_0x1647b7=_0x1fdf61 instanceof Error?_0x1fdf61[_0x170fbb(0x5ce)]:typeof _0x1fdf61=='object'?JSON[_0x170fbb(0x43f)](_0x1fdf61):_0x1fdf61,_0x514991=_0x1f0347+':\x20'+_0x1647b7;throw this['logger'][_0x170fbb(0x651)](this[_0x170fbb(0x402)]+'\x20('+this[_0x170fbb(0x770)][_0x170fbb(0x808)]+_0x170fbb(0x4b7)+_0x514991),new m(_0x514991);}}async['editFlowVaredit'](_0x4f74b4){const _0x34c342=a0_0x34b2dc;try{if(this['logger'][_0x34c342(0x798)](this[_0x34c342(0x402)]+'\x20('+this[_0x34c342(0x770)]['wuid']+_0x34c342(0x6dc)),!this['AutomateSystem']['flows'][_0x34c342(0x253)](_0x14a44a=>_0x14a44a[_0x34c342(0x2c7)]===_0x4f74b4[_0x34c342(0x2c7)]))throw this['logger'][_0x34c342(0x798)](this[_0x34c342(0x402)]+'\x20('+this['instance'][_0x34c342(0x808)]+_0x34c342(0x5f9)+_0x4f74b4[_0x34c342(0x2c7)]+'\x27\x20não\x20encontrado'),new m(_0x34c342(0x629));let _0x59666d=await this[_0x34c342(0x261)]['flow']['findOne']({'where':{'_id':_0x4f74b4[_0x34c342(0x2c7)]}});if(!_0x59666d||!_0x59666d[_0x34c342(0x5e4)]?.[_0x34c342(0x4c4)](this[_0x34c342(0x770)][_0x34c342(0x808)]))throw this[_0x34c342(0x3cb)][_0x34c342(0x651)](this['instanceName']+'\x20('+this[_0x34c342(0x770)][_0x34c342(0x808)]+'):\x20Flow\x20\x27'+_0x4f74b4[_0x34c342(0x2c7)]+_0x34c342(0x457)),new m(_0x34c342(0x4b4)+_0x4f74b4[_0x34c342(0x2c7)]+_0x34c342(0x457));if(!_0x59666d[_0x34c342(0x468)]?.[_0x34c342(0x4c4)](this[_0x34c342(0x770)][_0x34c342(0x808)]))throw new m(_0x34c342(0x87f));let _0x497c9d=!0x1;if(_0x4f74b4['varedit']?.[_0x34c342(0x366)]===!0x0)_0x59666d[_0x34c342(0x7c3)]=_0x59666d[_0x34c342(0x7c3)]['filter'](_0x1ae492=>_0x1ae492&&_0x4f74b4[_0x34c342(0x77f)]&&_0x1ae492[_0x34c342(0x2c7)]&&_0x4f74b4['varedit']['_id']&&_0x1ae492[_0x34c342(0x2c7)]['toString']()!==_0x4f74b4[_0x34c342(0x77f)][_0x34c342(0x2c7)][_0x34c342(0x1fe)]()),_0x497c9d=!0x0;else{let _0x106d87=_0x59666d[_0x34c342(0x7c3)][_0x34c342(0x253)](_0x1d5a54=>_0x1d5a54&&_0x4f74b4['varedit']&&_0x1d5a54[_0x34c342(0x2c7)]&&_0x4f74b4[_0x34c342(0x77f)]['_id']&&_0x1d5a54['_id']['toString']()===_0x4f74b4[_0x34c342(0x77f)][_0x34c342(0x2c7)][_0x34c342(0x1fe)]());_0x106d87?(_0x497c9d=_0x106d87['order']!==_0x4f74b4[_0x34c342(0x77f)][_0x34c342(0x881)],Object[_0x34c342(0x2c4)](_0x106d87,_0x4f74b4['varedit'])):(_0x59666d[_0x34c342(0x7c3)][_0x34c342(0x26d)](_0x4f74b4[_0x34c342(0x77f)]),_0x497c9d=!0x0);}if(_0x497c9d){_0x59666d[_0x34c342(0x7c3)]['sort']((_0x4429bb,_0x508a28)=>_0x4429bb[_0x34c342(0x881)]>_0x508a28[_0x34c342(0x881)]?0x1:_0x508a28[_0x34c342(0x881)]>_0x4429bb[_0x34c342(0x881)]?-0x1:0x0);for(let _0x4e0459=0x0;_0x4e0459<_0x59666d[_0x34c342(0x7c3)][_0x34c342(0x3a3)];_0x4e0459++)_0x59666d[_0x34c342(0x7c3)][_0x4e0459][_0x34c342(0x881)]=_0x4e0459+0x1;}let _0x58ba1a=await this['repository'][_0x34c342(0x35b)][_0x34c342(0x6ce)](_0x59666d[_0x34c342(0x2c7)],_0x59666d);if(!_0x58ba1a)throw new Error(_0x34c342(0x3a0));return _0x58ba1a;}catch(_0x2df08d){let _0x227135=_0x34c342(0x926),_0x583f3a=_0x2df08d instanceof Error?_0x2df08d[_0x34c342(0x5ce)]:typeof _0x2df08d==_0x34c342(0x89b)?JSON[_0x34c342(0x43f)](_0x2df08d):_0x2df08d,_0x11028f=_0x227135+':\x20'+_0x583f3a;throw this[_0x34c342(0x3cb)][_0x34c342(0x651)](this['instanceName']+'\x20('+this['instance'][_0x34c342(0x808)]+_0x34c342(0x4b7)+_0x11028f),new m(_0x11028f);}}async[a0_0x34b2dc(0x698)](_0x5a953d){const _0xb4e8f0=a0_0x34b2dc;try{if(this[_0xb4e8f0(0x3cb)][_0xb4e8f0(0x798)](this[_0xb4e8f0(0x402)]+'\x20('+this[_0xb4e8f0(0x770)]['wuid']+_0xb4e8f0(0x2ed)),!this[_0xb4e8f0(0x3f7)]['flows'][_0xb4e8f0(0x253)](_0x226b41=>_0x226b41[_0xb4e8f0(0x2c7)]===_0x5a953d[_0xb4e8f0(0x2c7)]))throw this['logger'][_0xb4e8f0(0x798)](this[_0xb4e8f0(0x402)]+'\x20('+this['instance']['wuid']+_0xb4e8f0(0x5f9)+_0x5a953d[_0xb4e8f0(0x2c7)]+_0xb4e8f0(0x2a6)),new m(_0xb4e8f0(0x629));let _0x2ef78f=await this['repository'][_0xb4e8f0(0x35b)]['findOne']({'where':{'_id':_0x5a953d[_0xb4e8f0(0x2c7)]}});if(!_0x2ef78f||!_0x2ef78f[_0xb4e8f0(0x5e4)]?.[_0xb4e8f0(0x4c4)](this[_0xb4e8f0(0x770)][_0xb4e8f0(0x808)]))throw this['logger']['error'](this['instanceName']+'\x20('+this[_0xb4e8f0(0x770)][_0xb4e8f0(0x808)]+_0xb4e8f0(0x93a)+_0x5a953d['_id']+_0xb4e8f0(0x457)),new m(_0xb4e8f0(0x4b4)+_0x5a953d[_0xb4e8f0(0x2c7)]+_0xb4e8f0(0x457));if(!_0x2ef78f[_0xb4e8f0(0x468)]?.[_0xb4e8f0(0x4c4)](this['instance']['wuid']))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');_0x5a953d[_0xb4e8f0(0x7ff)]['name']=_0x5a953d[_0xb4e8f0(0x7ff)][_0xb4e8f0(0x673)][_0xb4e8f0(0x3b8)](),_0x5a953d[_0xb4e8f0(0x7ff)]['name'][_0xb4e8f0(0x442)]('_')&&(_0x5a953d[_0xb4e8f0(0x7ff)][_0xb4e8f0(0x673)]=_0x5a953d[_0xb4e8f0(0x7ff)]['name'][_0xb4e8f0(0x374)](0x1)),_0x5a953d[_0xb4e8f0(0x7ff)][_0xb4e8f0(0x673)]=_0x5a953d[_0xb4e8f0(0x7ff)]['name'][_0xb4e8f0(0x3b8)]();let _0x3d4c0e=_0x2ef78f[_0xb4e8f0(0x80b)][_0xb4e8f0(0x253)](_0x14ece1=>_0x14ece1['name']===_0x5a953d[_0xb4e8f0(0x7ff)][_0xb4e8f0(0x673)]);if(_0x3d4c0e?.[_0xb4e8f0(0x719)]===!0x0)throw new Error(_0xb4e8f0(0x732));if(_0x5a953d['variable']?.[_0xb4e8f0(0x366)]===!0x0){if(!_0x3d4c0e)return{'message':_0xb4e8f0(0x592)};_0x2ef78f[_0xb4e8f0(0x80b)]=_0x2ef78f[_0xb4e8f0(0x80b)][_0xb4e8f0(0x334)](_0x1fd2fb=>_0x1fd2fb[_0xb4e8f0(0x673)]!==_0x5a953d[_0xb4e8f0(0x7ff)][_0xb4e8f0(0x673)]);}else _0x3d4c0e?Object['assign'](_0x3d4c0e,_0x5a953d[_0xb4e8f0(0x7ff)]):_0x2ef78f['variables'][_0xb4e8f0(0x26d)](_0x5a953d[_0xb4e8f0(0x7ff)]);let _0x51001e=await this[_0xb4e8f0(0x261)][_0xb4e8f0(0x35b)][_0xb4e8f0(0x6ce)](_0x2ef78f[_0xb4e8f0(0x2c7)],_0x2ef78f);if(!_0x51001e)throw new Error(_0xb4e8f0(0x3a0));return _0x51001e;}catch(_0x1a60d1){let _0x45fb98=_0xb4e8f0(0x370),_0x47976c=_0x1a60d1 instanceof Error?_0x1a60d1[_0xb4e8f0(0x5ce)]:typeof _0x1a60d1==_0xb4e8f0(0x89b)?JSON[_0xb4e8f0(0x43f)](_0x1a60d1):_0x1a60d1,_0x209c6d=_0x45fb98+':\x20'+_0x47976c;throw this[_0xb4e8f0(0x3cb)]['error'](this[_0xb4e8f0(0x402)]+'\x20('+this[_0xb4e8f0(0x770)][_0xb4e8f0(0x808)]+_0xb4e8f0(0x4b7)+_0x209c6d),new m(_0x209c6d);}}async['startFlow'](_0x32243f){const _0x5f31e4=a0_0x34b2dc;let _0x4a3adb=null;try{if(!this[_0x5f31e4(0x3f7)]?.[_0x5f31e4(0x759)][_0x5f31e4(0x6ad)])throw new m('Fluxos\x20não\x20estão\x20ativados');this[_0x5f31e4(0x3cb)][_0x5f31e4(0x798)](this['instanceName']+'\x20('+this[_0x5f31e4(0x770)][_0x5f31e4(0x808)]+_0x5f31e4(0x4bd));let _0x4a3dac=(await this['whatsappNumber']({'numbers':[_0x32243f[_0x5f31e4(0x668)]]}))[0x0];if(!_0x4a3dac['exists']&&!(0x0,w[_0x5f31e4(0x6bd)])(_0x4a3dac[_0x5f31e4(0x5f0)])&&!_0x4a3dac['jid'][_0x5f31e4(0x4c4)]('@broadcast'))throw _0x4a3adb=JSON[_0x5f31e4(0x43f)](_0x4a3dac,null,0x2),new m(_0x4a3dac);let _0x2f59c4;if(_0x32243f[_0x5f31e4(0x673)][_0x5f31e4(0x3a3)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x5f31e4(0x4a6)](_0x32243f[_0x5f31e4(0x673)])?_0x2f59c4=this[_0x5f31e4(0x3f7)][_0x5f31e4(0x4b9)]['find'](_0x1811e5=>_0x1811e5[_0x5f31e4(0x2c7)]===_0x32243f[_0x5f31e4(0x673)]):_0x2f59c4=this[_0x5f31e4(0x3f7)][_0x5f31e4(0x4b9)]['find'](_0x1916cb=>_0x1916cb[_0x5f31e4(0x673)]===_0x32243f[_0x5f31e4(0x673)]),!_0x2f59c4)throw this[_0x5f31e4(0x3cb)][_0x5f31e4(0x798)](this[_0x5f31e4(0x402)]+'\x20('+this[_0x5f31e4(0x770)][_0x5f31e4(0x808)]+_0x5f31e4(0x5f9)+_0x32243f['name']+_0x5f31e4(0x2a6)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x12ba2d=await this['repository'][_0x5f31e4(0x35b)]['findOne']({'where':{'_id':_0x2f59c4[_0x5f31e4(0x2c7)]}});if(!_0x12ba2d||!_0x12ba2d[_0x5f31e4(0x5e4)]?.[_0x5f31e4(0x4c4)](this[_0x5f31e4(0x770)][_0x5f31e4(0x808)]))throw this['logger']['error'](this[_0x5f31e4(0x402)]+'\x20('+this['instance'][_0x5f31e4(0x808)]+_0x5f31e4(0x93a)+_0x2f59c4['_id']+_0x5f31e4(0x457)),_0x4a3adb=_0x5f31e4(0x4b4)+_0x2f59c4[_0x5f31e4(0x2c7)]+_0x5f31e4(0x457),new m(_0x4a3adb);let _0x4201b0=await this[_0x5f31e4(0x3eb)](_0x12ba2d,_0x4a3dac['jid'],_0x32243f['changeVariables']);if(_0x4201b0){this[_0x5f31e4(0x3cb)][_0x5f31e4(0x798)](this[_0x5f31e4(0x402)]+'\x20('+this[_0x5f31e4(0x770)][_0x5f31e4(0x808)]+_0x5f31e4(0x61b));let _0x38acda=await this[_0x5f31e4(0x81a)](_0x4201b0);return _0x38acda&&await this[_0x5f31e4(0x361)](_0x4201b0,_0x38acda),{'message':_0x5f31e4(0x908)+_0x32243f['remoteJid']};}}catch(_0x3b17a7){if(this['logger'][_0x5f31e4(0x651)](this[_0x5f31e4(0x402)]+'\x20('+this[_0x5f31e4(0x770)][_0x5f31e4(0x808)]+'):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20'+(_0x3b17a7 instanceof Error?_0x3b17a7[_0x5f31e4(0x5ce)]:JSON[_0x5f31e4(0x43f)](_0x3b17a7,null,0x2))),_0x4a3adb=_0x3b17a7 instanceof Error?_0x3b17a7[_0x5f31e4(0x5ce)]:JSON[_0x5f31e4(0x43f)](_0x3b17a7,null,0x2),_0x4a3adb)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x4a3adb);}}async['startFlowWebhook'](_0x511f37,_0x3f638c,_0x1f9ddb){const _0x2bbbdc=a0_0x34b2dc;let _0x388478=null;try{if(!this[_0x2bbbdc(0x3f7)]?.['flowConfig']['enabled'])throw new m(_0x2bbbdc(0x365));if(this[_0x2bbbdc(0x3cb)][_0x2bbbdc(0x798)](this['instanceName']+'\x20('+this[_0x2bbbdc(0x770)][_0x2bbbdc(0x808)]+_0x2bbbdc(0x4bd)),_0x3f638c){let _0x25aa21=(await this[_0x2bbbdc(0x70c)]({'numbers':[_0x3f638c]}))[0x0];if(!_0x25aa21[_0x2bbbdc(0x22e)]&&!(0x0,w[_0x2bbbdc(0x6bd)])(_0x25aa21[_0x2bbbdc(0x5f0)])&&!_0x25aa21[_0x2bbbdc(0x5f0)]['includes'](_0x2bbbdc(0x703)))throw _0x388478=JSON[_0x2bbbdc(0x43f)](_0x25aa21,null,0x2),new m(_0x25aa21);_0x3f638c=_0x25aa21[_0x2bbbdc(0x5f0)];}else _0x3f638c||(_0x3f638c=(0x0,X['v4'])());let _0x15d6d9=await this[_0x2bbbdc(0x261)][_0x2bbbdc(0x35b)][_0x2bbbdc(0x440)]({'where':{'_id':_0x511f37}});if(!_0x15d6d9||!_0x15d6d9[_0x2bbbdc(0x5e4)]?.[_0x2bbbdc(0x4c4)](this[_0x2bbbdc(0x770)]['wuid']))throw this[_0x2bbbdc(0x3cb)]['error'](this[_0x2bbbdc(0x402)]+'\x20('+this[_0x2bbbdc(0x770)][_0x2bbbdc(0x808)]+_0x2bbbdc(0x93a)+_0x511f37+_0x2bbbdc(0x457)),new m(_0x2bbbdc(0x4b4)+_0x511f37+_0x2bbbdc(0x457));let _0x5c7a44=await this[_0x2bbbdc(0x3eb)](_0x15d6d9,_0x3f638c,null);if(_0x5c7a44){this[_0x2bbbdc(0x3cb)][_0x2bbbdc(0x798)](this[_0x2bbbdc(0x402)]+'\x20('+this['instance'][_0x2bbbdc(0x808)]+'):\x20Criou\x20conversa\x20no\x20startFlowWebhook');let _0x5aef31;if(_0x1f9ddb){let _0x4a9af9=_0x5c7a44[_0x2bbbdc(0x82e)][_0x2bbbdc(0x4db)],_0x314d40=this[_0x2bbbdc(0x838)](_0x1f9ddb);Object[_0x2bbbdc(0x2c4)](_0x4a9af9,_0x314d40),_0x5c7a44[_0x2bbbdc(0x82e)][_0x2bbbdc(0x4db)]=_0x4a9af9,_0x5aef31={'error':!0x1,'apiResponse':_0x1f9ddb};}let _0x25a977=await this[_0x2bbbdc(0x81a)](_0x5c7a44);return _0x25a977&&await this['processblock'](_0x5c7a44,_0x25a977),{'message':_0x2bbbdc(0x793)};}}catch(_0x433ac5){if(this[_0x2bbbdc(0x3cb)][_0x2bbbdc(0x651)](this[_0x2bbbdc(0x402)]+'\x20('+this[_0x2bbbdc(0x770)][_0x2bbbdc(0x808)]+_0x2bbbdc(0x3aa)+(_0x433ac5 instanceof Error?_0x433ac5[_0x2bbbdc(0x5ce)]:JSON[_0x2bbbdc(0x43f)](_0x433ac5,null,0x2))),_0x388478=_0x433ac5 instanceof Error?_0x433ac5[_0x2bbbdc(0x5ce)]:JSON[_0x2bbbdc(0x43f)](_0x433ac5,null,0x2),_0x388478)throw new m(_0x2bbbdc(0x68a)+_0x388478);}}async[a0_0x34b2dc(0x5b7)](_0x1ba1c3){const _0x281764=a0_0x34b2dc;try{let _0x11f749={'remoteJid':_0x1ba1c3,'status':_0x281764(0x5a2)},_0x549d7e={'status':_0x281764(0x688)},_0x7f1bcb=await this[_0x281764(0x261)][_0x281764(0x2c3)][_0x281764(0x1f7)](_0x11f749,_0x549d7e,this[_0x281764(0x770)][_0x281764(0x808)]);return this[_0x281764(0x3cb)][_0x281764(0x798)](this[_0x281764(0x402)]+'\x20('+this['instance']['wuid']+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.'),_0x7f1bcb;}catch(_0x2e96d3){throw this[_0x281764(0x3cb)]['error'](this['instanceName']+'\x20('+this['instance'][_0x281764(0x808)]+_0x281764(0x398)+_0x2e96d3[_0x281764(0x5ce)]),_0x2e96d3;}}async[a0_0x34b2dc(0x3eb)](_0x340f25,_0x31368d,_0x1da1f3){const _0xb6a842=a0_0x34b2dc;this[_0xb6a842(0x3cb)]['verbose'](this[_0xb6a842(0x402)]+'\x20('+this[_0xb6a842(0x770)]['wuid']+'):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]'),await this[_0xb6a842(0x5b7)](_0x31368d);try{let _0x10bf80=require(_0xb6a842(0x865))[_0xb6a842(0x639)],_0x47bacb=Date['now'](),_0x411857=_0xb6a842(0x28c),_0x438ff7={},_0xd0f4ee={},_0x334a1b=this[_0xb6a842(0x3f7)][_0xb6a842(0x4b9)]['find'](_0x1f37c4=>_0x1f37c4[_0xb6a842(0x2c7)]===_0x340f25['_id']?.['toString']()),_0x426c64=_0x334a1b?.[_0xb6a842(0x41b)]??_0x340f25['minutesToClose']??0x0,_0x4cc896=_0x334a1b?.['readMessages']??_0x340f25[_0xb6a842(0x84c)]??!0x1,_0x188360={'flowId':_0x340f25[_0xb6a842(0x2c7)],..._0x340f25,'chatLog':null},_0x1bf8f5=await this[_0xb6a842(0x871)](_0x188360[_0xb6a842(0x80b)]),_0x314540=await this[_0xb6a842(0x63b)](_0x31368d),_0xda6834={..._0x1bf8f5,..._0x314540,'_remoteJid':_0x31368d},_0x369344={'lastReceivedMessage':_0x438ff7,'lastSendMessage':_0xd0f4ee,'lastBlockId':_0x411857,'lastCondition':!0x0,'realVariables':_0xda6834};_0x188360[_0xb6a842(0x82e)]=_0x369344,_0x188360[_0xb6a842(0x82e)][_0xb6a842(0x4db)]={..._0xda6834,..._0x1da1f3},delete _0x188360[_0xb6a842(0x2c7)],_0x188360[_0xb6a842(0x2c7)]=new _0x10bf80(),_0x188360[_0xb6a842(0x55f)]=_0x47bacb,_0x188360[_0xb6a842(0x71c)]=_0xb6a842(0x5a2),_0x188360[_0xb6a842(0x668)]=_0x31368d,_0x188360[_0xb6a842(0x41b)]=_0x426c64,_0x188360[_0xb6a842(0x84c)]=_0x4cc896,_0x188360[_0xb6a842(0x2c7)]=_0x340f25[_0xb6a842(0x2c7)];let _0x2e2635=await this[_0xb6a842(0x261)][_0xb6a842(0x2c3)][_0xb6a842(0x6ce)](_0x188360[_0xb6a842(0x2c7)],_0x188360,this[_0xb6a842(0x770)][_0xb6a842(0x808)]);return this[_0xb6a842(0x3cb)][_0xb6a842(0x798)](this[_0xb6a842(0x402)]+'\x20('+this[_0xb6a842(0x770)][_0xb6a842(0x808)]+_0xb6a842(0x3d7)),_0x2e2635?_0x188360:null;}catch(_0x375d61){let _0x29aa81=_0xb6a842(0x5c4),_0x37f950=_0x375d61 instanceof Error?_0x375d61[_0xb6a842(0x5ce)]:typeof _0x375d61=='object'?JSON[_0xb6a842(0x43f)](_0x375d61):_0x375d61,_0x598337=_0x29aa81+':\x20'+_0x37f950;throw this[_0xb6a842(0x3cb)]['error'](this['instanceName']+'\x20('+this[_0xb6a842(0x770)][_0xb6a842(0x808)]+_0xb6a842(0x4b7)+_0x598337),new m(_0x598337);}}async['getConversation'](_0x20be48){const _0x1b8868=a0_0x34b2dc;try{this[_0x1b8868(0x3cb)][_0x1b8868(0x798)](this[_0x1b8868(0x402)]+'\x20('+this[_0x1b8868(0x770)][_0x1b8868(0x808)]+'):\x20Buscando\x20conversa...'),this[_0x1b8868(0x3cb)][_0x1b8868(0x798)](this[_0x1b8868(0x402)]+'\x20('+this[_0x1b8868(0x770)][_0x1b8868(0x808)]+_0x1b8868(0x733)+_0x20be48);let _0x4a0fe5={'where':{'_id':_0x20be48}};return await this[_0x1b8868(0x261)]['flowConversation'][_0x1b8868(0x440)](_0x4a0fe5,this['instance'][_0x1b8868(0x808)]);}catch(_0x4c16d9){let _0x4a9da5=_0x1b8868(0x50a),_0x324bec=_0x4c16d9 instanceof Error?_0x4c16d9[_0x1b8868(0x5ce)]:typeof _0x4c16d9=='object'?JSON[_0x1b8868(0x43f)](_0x4c16d9):_0x4c16d9,_0x5c0ac9=_0x4a9da5+':\x20'+_0x324bec;throw this[_0x1b8868(0x3cb)][_0x1b8868(0x651)](this['instanceName']+'\x20('+this[_0x1b8868(0x770)][_0x1b8868(0x808)]+'):\x20'+_0x5c0ac9),new m(_0x5c0ac9);}}async['fetchConversation'](_0x9df606){const _0x40e463=a0_0x34b2dc;try{return this[_0x40e463(0x3cb)]['verbose'](this['instanceName']+'\x20('+this[_0x40e463(0x770)][_0x40e463(0x808)]+_0x40e463(0x49b)),await this['repository'][_0x40e463(0x2c3)]['find'](_0x9df606,this[_0x40e463(0x770)][_0x40e463(0x808)]);}catch(_0x46066a){let _0x184baf=_0x40e463(0x48d),_0x47e93e=_0x46066a instanceof Error?_0x46066a[_0x40e463(0x5ce)]:typeof _0x46066a==_0x40e463(0x89b)?JSON[_0x40e463(0x43f)](_0x46066a):_0x46066a,_0x5f0c9d=_0x184baf+':\x20'+_0x47e93e;throw this[_0x40e463(0x3cb)][_0x40e463(0x651)](this[_0x40e463(0x402)]+'\x20('+this[_0x40e463(0x770)][_0x40e463(0x808)]+_0x40e463(0x4b7)+_0x5f0c9d),new m(_0x5f0c9d);}}async[a0_0x34b2dc(0x737)](_0x1a9446){const _0x73bef6=a0_0x34b2dc;try{return this[_0x73bef6(0x3cb)]['verbose'](this[_0x73bef6(0x402)]+'\x20('+this[_0x73bef6(0x770)][_0x73bef6(0x808)]+_0x73bef6(0x756)),this[_0x73bef6(0x3cb)][_0x73bef6(0x798)](this[_0x73bef6(0x402)]+'\x20('+this[_0x73bef6(0x770)][_0x73bef6(0x808)]+_0x73bef6(0x5b8)+_0x1a9446),(await this['repository'][_0x73bef6(0x2c3)][_0x73bef6(0x907)]({'where':{'_id':_0x1a9446[_0x73bef6(0x2c7)]}},this[_0x73bef6(0x770)][_0x73bef6(0x808)]))[_0x73bef6(0x35c)]===0x0?{'message':'Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.'}:{'message':'Conversa\x20deletada\x20com\x20sucesso.'};}catch(_0x55f9e8){let _0x12db62=_0x73bef6(0x543),_0x45a6a0=_0x55f9e8 instanceof Error?_0x55f9e8[_0x73bef6(0x5ce)]:typeof _0x55f9e8==_0x73bef6(0x89b)?JSON['stringify'](_0x55f9e8):_0x55f9e8,_0x5809cb=_0x12db62+':\x20'+_0x45a6a0;throw this[_0x73bef6(0x3cb)][_0x73bef6(0x651)](this[_0x73bef6(0x402)]+'\x20('+this['instance'][_0x73bef6(0x808)]+_0x73bef6(0x4b7)+_0x5809cb),new m(_0x5809cb);}}async[a0_0x34b2dc(0x530)](_0x5bc04e){const _0x504d17=a0_0x34b2dc;try{let {_id:_0x498537,chatLog:_0xd700b2,status:_0x16e312}=_0x5bc04e;if(!_0x498537)return{'message':'O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.'};let _0x3901b6={};if(_0x16e312!==void 0x0&&(_0x3901b6[_0x504d17(0x71c)]=_0x16e312),Object[_0x504d17(0x37c)](_0x3901b6)['length']===0x0)return{'message':_0x504d17(0x222)};let _0x4d5c39=await this[_0x504d17(0x261)]['flowConversation']['updateOne'](_0x498537,_0x3901b6,this[_0x504d17(0x770)][_0x504d17(0x808)]);return _0x4d5c39||{'message':_0x504d17(0x797)};}catch(_0x4fce2e){let _0x333ac9=_0x504d17(0x450),_0x5b8888=_0x4fce2e instanceof Error?_0x4fce2e['message']:typeof _0x4fce2e==_0x504d17(0x89b)?JSON[_0x504d17(0x43f)](_0x4fce2e):_0x4fce2e,_0x3e8886=_0x333ac9+':\x20'+_0x5b8888;throw this[_0x504d17(0x3cb)][_0x504d17(0x651)](this[_0x504d17(0x402)]+'\x20('+this[_0x504d17(0x770)][_0x504d17(0x808)]+_0x504d17(0x4b7)+_0x3e8886),new m(_0x3e8886);}}async['editChat'](_0xd4c1e4){const _0x23dd30=a0_0x34b2dc;try{_0xd4c1e4['_id']=this[_0x23dd30(0x6ea)](_0xd4c1e4['_id']);let _0x141245=await this[_0x23dd30(0x261)]['chat'][_0x23dd30(0x440)]({'where':{'_id':_0xd4c1e4[_0x23dd30(0x2c7)]}},this[_0x23dd30(0x770)]['wuid']);if(!_0x141245)throw new m('Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo');let {_id:_0xc03918,leadInfo:_0x2b9fab}=_0xd4c1e4;if(!_0xc03918)throw new Error('O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.');if(_0xd4c1e4['delete']===_0x23dd30(0x57f))return await this[_0x23dd30(0x3af)](_0xd4c1e4[_0x23dd30(0x2c7)]),await this[_0x23dd30(0x261)][_0x23dd30(0x89d)][_0x23dd30(0x366)]({'where':{'_id':_0xd4c1e4[_0x23dd30(0x2c7)]}},this['instance'][_0x23dd30(0x808)]),await this[_0x23dd30(0x261)][_0x23dd30(0x5ce)]['delete']({'where':{'key':{'remoteJid':_0xd4c1e4[_0x23dd30(0x2c7)]}}},this[_0x23dd30(0x770)][_0x23dd30(0x808)]),_0xd4c1e4=await this['repository'][_0x23dd30(0x89d)][_0x23dd30(0x6ce)]({'where':{'_id':_0xd4c1e4[_0x23dd30(0x2c7)]}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x23dd30(0x808)]),q(this[_0x23dd30(0x402)],_0x23dd30(0x88b),{'chat':_0xd4c1e4}),{'message':_0x23dd30(0x3d6)};if(_0xd4c1e4[_0x23dd30(0x366)]===_0x23dd30(0x591))return await this[_0x23dd30(0x261)][_0x23dd30(0x5ce)][_0x23dd30(0x366)]({'where':{'key':{'remoteJid':_0xd4c1e4[_0x23dd30(0x2c7)]}}},this['instance'][_0x23dd30(0x808)]),_0xd4c1e4=await this[_0x23dd30(0x261)]['chat'][_0x23dd30(0x6ce)]({'where':{'_id':_0xd4c1e4[_0x23dd30(0x2c7)]}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x23dd30(0x808)]),q(this[_0x23dd30(0x402)],'chats',{'chat':_0xd4c1e4}),{'message':_0x23dd30(0x446)};let _0x146ba1=(_0x41942d,_0x3a156c,_0x3009ac)=>{const _0x247903=_0x23dd30;_0x41942d&&_0x3009ac[_0x247903(0x3f2)](_0x2d00a7=>{const _0x40089a=_0x247903;_0x41942d[_0x2d00a7]!==void 0x0&&(_0x3a156c[_0x40089a(0x7eb)+_0x2d00a7]=_0x41942d[_0x2d00a7]);});},_0x41d828={};if(_0x23dd30(0x8f6)in _0xd4c1e4&&(this[_0x23dd30(0x3cb)]['verbose'](this[_0x23dd30(0x402)]+'\x20('+this['instance'][_0x23dd30(0x808)]+_0x23dd30(0x664)+_0xd4c1e4[_0x23dd30(0x2c7)]),_0xd4c1e4[_0x23dd30(0x8f6)]=_0xd4c1e4[_0x23dd30(0x8f6)]===0x0?null:-0x1,await this['client']['chatModify']({'mute':_0xd4c1e4[_0x23dd30(0x8f6)]},_0xd4c1e4[_0x23dd30(0x2c7)]),_0x41d828[_0x23dd30(0x8f6)]=Number(_0xd4c1e4[_0x23dd30(0x8f6)])),_0x2b9fab&&(_0x146ba1(_0x2b9fab,_0x41d828,[_0x23dd30(0x239),_0x23dd30(0x538),'email','cpf',_0x23dd30(0x71c),'notas',_0x23dd30(0x699),_0x23dd30(0x7ad),_0x23dd30(0x88d),'etiquetas',_0x23dd30(0x8a3)]),Array[_0x23dd30(0x6fa)](_0x2b9fab[_0x23dd30(0x883)])&&(_0x41d828['leadInfo.customFields']=_0x2b9fab[_0x23dd30(0x883)][_0x23dd30(0x790)](_0x2ae1cc=>({'_id':_0x2ae1cc[_0x23dd30(0x2c7)],'value':_0x2ae1cc[_0x23dd30(0x47a)]}))),_0xd4c1e4[_0x23dd30(0x719)]['etiquetas']!==void 0x0)){let _0x4158e7=await this[_0x23dd30(0x261)][_0x23dd30(0x8fd)][_0x23dd30(0x253)]({'where':{}},this[_0x23dd30(0x770)][_0x23dd30(0x808)]),_0x326ea4=new Set(_0xd4c1e4[_0x23dd30(0x719)]['etiquetas']||[]),_0x4f7708=new Set(_0xd4c1e4['leadInfo'][_0x23dd30(0x335)]),_0x3ef7be=new Set(_0x4158e7[_0x23dd30(0x790)](_0x252816=>_0x252816['_id'])),_0x4c0a25=[..._0x4f7708]['filter'](_0xb50ef7=>!_0x326ea4[_0x23dd30(0x333)](_0xb50ef7)&&_0x3ef7be[_0x23dd30(0x333)](_0xb50ef7)),_0x5efaa2=[..._0x326ea4]['filter'](_0x599be2=>!_0x4f7708[_0x23dd30(0x333)](_0x599be2));if(_0x41d828[_0x23dd30(0x531)]=[..._0x326ea4],_0x141245&&!_0x141245[_0x23dd30(0x784)]){for(let _0x374835 of _0x4c0a25)await this[_0x23dd30(0x53f)](_0x374835,_0xd4c1e4['_id']),_0x326ea4['add'](_0x374835);for(let _0x58ae31 of _0x5efaa2)await this['RemoveChatLabel'](_0x58ae31,_0xd4c1e4['_id']),_0x326ea4[_0x23dd30(0x366)](_0x58ae31);}}if(_0xd4c1e4['unreadcount']!==void 0x0&&(_0x41d828[_0x23dd30(0x24f)]=Number(_0xd4c1e4[_0x23dd30(0x24f)])),Object['keys'](_0x41d828)['length']===0x0)throw new Error(_0x23dd30(0x222));let _0x57a2c0=await this[_0x23dd30(0x261)]['chat'][_0x23dd30(0x6ce)]({'where':{'_id':_0xd4c1e4['_id']}},_0x41d828,this[_0x23dd30(0x770)][_0x23dd30(0x808)]);return _0x57a2c0&&q(this[_0x23dd30(0x402)],_0x23dd30(0x88b),{'chat':_0x57a2c0}),_0x57a2c0?(this[_0x23dd30(0x3cb)]['verbose'](this[_0x23dd30(0x402)]+'\x20('+this[_0x23dd30(0x770)][_0x23dd30(0x808)]+_0x23dd30(0x4b7)+JSON[_0x23dd30(0x43f)](_0x57a2c0,null,0x2)),_0x57a2c0):{'message':_0x23dd30(0x54a)};}catch(_0x5053f8){let _0x2bc26=_0x23dd30(0x7ac),_0xeb0e54=_0x5053f8 instanceof Error?_0x5053f8[_0x23dd30(0x5ce)]:typeof _0x5053f8==_0x23dd30(0x89b)?JSON['stringify'](_0x5053f8):_0x5053f8,_0x23fe93=_0x2bc26+':\x20'+_0xeb0e54;throw this[_0x23dd30(0x3cb)][_0x23dd30(0x651)](this[_0x23dd30(0x402)]+'\x20('+this[_0x23dd30(0x770)][_0x23dd30(0x808)]+_0x23dd30(0x4b7)+_0x23fe93),new m(_0x23fe93);}}async[a0_0x34b2dc(0x53f)](_0x2d80a0,_0x468c12){const _0x319bb8=a0_0x34b2dc;try{await this['client'][_0x319bb8(0x3ba)](_0x468c12,_0x2d80a0),this['logger']['info'](this['instanceName']+'\x20('+this['instance'][_0x319bb8(0x808)]+_0x319bb8(0x3a8)+_0x2d80a0+_0x319bb8(0x381)+_0x468c12+'\x20com\x20sucesso.');}catch(_0x5e755c){this[_0x319bb8(0x3cb)]['error']('Erro\x20ao\x20adicionar\x20label\x20'+_0x2d80a0+'\x20ao\x20chat\x20'+_0x468c12+':\x20'+_0x5e755c);}}async[a0_0x34b2dc(0x58f)](_0x30a00f,_0x59ab53){const _0x7de174=a0_0x34b2dc;try{await this[_0x7de174(0x45a)]['removeChatLabel'](_0x59ab53,_0x30a00f),this[_0x7de174(0x3cb)][_0x7de174(0x5df)](this['instanceName']+'\x20('+this['instance'][_0x7de174(0x808)]+_0x7de174(0x3a8)+_0x30a00f+_0x7de174(0x3e3)+_0x59ab53+_0x7de174(0x3ee));}catch(_0x1d24d9){this[_0x7de174(0x3cb)]['error'](_0x7de174(0x2f2)+_0x30a00f+_0x7de174(0x37a)+_0x59ab53+':\x20'+_0x1d24d9);}}async['updateAgent'](_0x56d833){const _0x2b8330=a0_0x34b2dc;try{let _0x583eeb=await this[_0x2b8330(0x261)][_0x2b8330(0x484)][_0x2b8330(0x584)](this['instance'][_0x2b8330(0x808)]),_0x19c536=_0x56d833[_0x2b8330(0x2c7)]?_0x583eeb[_0x2b8330(0x615)][_0x2b8330(0x695)](_0xd9e1b9=>_0xd9e1b9[_0x2b8330(0x2c7)]===_0x56d833[_0x2b8330(0x2c7)]):-0x1;if(_0x56d833[_0x2b8330(0x366)]&&_0x19c536>-0x1)_0x583eeb['agents'][_0x2b8330(0x844)](_0x19c536,0x1);else{if(_0x19c536>-0x1){let _0x20ff4e=_0x583eeb[_0x2b8330(0x615)][_0x19c536];_0x56d833[_0x2b8330(0x8d7)]&&(_0x20ff4e[_0x2b8330(0x8d7)]=_0x56d833[_0x2b8330(0x8d7)]),_0x56d833['name']&&(_0x20ff4e[_0x2b8330(0x673)]=_0x56d833['name']),_0x56d833[_0x2b8330(0x806)]&&(_0x20ff4e[_0x2b8330(0x806)]=_0x56d833['email']),_0x56d833[_0x2b8330(0x3b6)]&&(_0x20ff4e['role']=_0x56d833[_0x2b8330(0x3b6)]);}else _0x583eeb['agents'][_0x2b8330(0x26d)]({'_id':_0x56d833[_0x2b8330(0x2c7)]||new fe[(_0x2b8330(0x62c))][(_0x2b8330(0x415))][(_0x2b8330(0x639))]()['toString'](),'fone':_0x56d833[_0x2b8330(0x8d7)],'name':_0x56d833['name'],'email':_0x56d833[_0x2b8330(0x806)],'role':_0x56d833['role']});}let _0x4ed1a1={'agents':_0x583eeb['agents']},_0x58fcc0=await this[_0x2b8330(0x261)]['automateSystem']['update'](_0x4ed1a1,this[_0x2b8330(0x770)]['wuid']);return this[_0x2b8330(0x3f7)]=_0x58fcc0,this[_0x2b8330(0x3cb)]['verbose'](this[_0x2b8330(0x402)]+'\x20('+this[_0x2b8330(0x770)][_0x2b8330(0x808)]+'):\x20alterando\x20this.AutomateSystem'),this['logger'][_0x2b8330(0x798)](this[_0x2b8330(0x402)]+'\x20('+this[_0x2b8330(0x770)]['wuid']+_0x2b8330(0x4b7)+this[_0x2b8330(0x3f7)]),_0x58fcc0;}catch(_0x5abb70){let _0x5c9666=_0x2b8330(0x56e),_0x5047d4=_0x5abb70 instanceof Error?_0x5abb70[_0x2b8330(0x5ce)]:typeof _0x5abb70=='object'?JSON[_0x2b8330(0x43f)](_0x5abb70):_0x5abb70,_0x8ce616=_0x5c9666+':\x20'+_0x5047d4;throw this[_0x2b8330(0x3cb)]['error'](this['instanceName']+'\x20('+this[_0x2b8330(0x770)][_0x2b8330(0x808)]+'):\x20'+_0x8ce616),new m(_0x8ce616);}}async[a0_0x34b2dc(0x472)](_0x1838d0){const _0x2f1d09=a0_0x34b2dc;try{let _0x4d11fb=await this[_0x2f1d09(0x261)][_0x2f1d09(0x484)][_0x2f1d09(0x584)](this['instance']['wuid']),_0x320e9b=_0x1838d0[_0x2f1d09(0x2c7)]?_0x4d11fb['customFields'][_0x2f1d09(0x695)](_0x516623=>_0x516623[_0x2f1d09(0x2c7)]===_0x1838d0[_0x2f1d09(0x2c7)]):-0x1,_0x90f53a=!0x1,_0x4ffa7a=_0x4d11fb['customFields']['some'](_0x32e56b=>_0x32e56b[_0x2f1d09(0x881)]===_0x1838d0['order']);if(_0x1838d0[_0x2f1d09(0x366)]&&_0x320e9b>-0x1)_0x4d11fb[_0x2f1d09(0x883)][_0x2f1d09(0x844)](_0x320e9b,0x1),_0x90f53a=!0x0;else{if(_0x320e9b>-0x1){if(_0x4d11fb[_0x2f1d09(0x883)][_0x2f1d09(0x74b)](_0x42a1a9=>_0x42a1a9[_0x2f1d09(0x673)]===_0x1838d0[_0x2f1d09(0x673)]&&_0x42a1a9['_id']!==_0x1838d0['_id']))throw new Error(_0x2f1d09(0x53c));let _0x4c844f=_0x4d11fb['customFields'][_0x320e9b];_0x1838d0[_0x2f1d09(0x881)]&&(_0x4ffa7a||!Number[_0x2f1d09(0x30e)](_0x1838d0['order']))&&(_0x4c844f['order']=_0x1838d0['order'],_0x90f53a=!0x0),_0x1838d0['name']&&(_0x4c844f[_0x2f1d09(0x673)]=_0x1838d0[_0x2f1d09(0x673)]);}else{if(_0x4d11fb['customFields'][_0x2f1d09(0x74b)](_0x412a23=>_0x412a23[_0x2f1d09(0x673)]===_0x1838d0[_0x2f1d09(0x673)]&&_0x412a23[_0x2f1d09(0x2c7)]!==_0x1838d0['_id']))throw new Error(_0x2f1d09(0x53c));_0x4d11fb[_0x2f1d09(0x883)][_0x2f1d09(0x26d)]({'_id':_0x1838d0['_id']||new fe[(_0x2f1d09(0x62c))][(_0x2f1d09(0x415))][(_0x2f1d09(0x639))]()[_0x2f1d09(0x1fe)](),'order':_0x1838d0[_0x2f1d09(0x881)],'name':_0x1838d0[_0x2f1d09(0x673)]}),_0x90f53a=!0x0;}}if(_0x90f53a){_0x4d11fb['customFields'][_0x2f1d09(0x289)]((_0x4705c5,_0x1f1055)=>_0x4705c5[_0x2f1d09(0x881)]>_0x1f1055['order']?0x1:_0x1f1055[_0x2f1d09(0x881)]>_0x4705c5[_0x2f1d09(0x881)]?-0x1:0x0);for(let _0x5a3fa9=0x0;_0x5a3fa9<_0x4d11fb[_0x2f1d09(0x883)]['length'];_0x5a3fa9++)_0x4d11fb['customFields'][_0x5a3fa9][_0x2f1d09(0x881)]=_0x5a3fa9+0x1;}let _0x3f979c=await this['repository']['automateSystem']['update'](_0x4d11fb,this[_0x2f1d09(0x770)][_0x2f1d09(0x808)]);return this[_0x2f1d09(0x3f7)]=_0x3f979c,this[_0x2f1d09(0x3cb)][_0x2f1d09(0x798)](this[_0x2f1d09(0x402)]+'\x20('+this[_0x2f1d09(0x770)]['wuid']+'):\x20debug\x20alterando\x20this.AutomateSystem'),this[_0x2f1d09(0x3cb)]['verbose'](this[_0x2f1d09(0x402)]+'\x20('+this['instance'][_0x2f1d09(0x808)]+_0x2f1d09(0x4b7)+this[_0x2f1d09(0x3f7)]),_0x3f979c;}catch(_0xfae51d){let _0x7ddfaf=_0x2f1d09(0x575),_0x1bd4f8=_0xfae51d instanceof Error?_0xfae51d[_0x2f1d09(0x5ce)]:typeof _0xfae51d=='object'?JSON[_0x2f1d09(0x43f)](_0xfae51d):_0xfae51d,_0x18d075=_0x7ddfaf+':\x20'+_0x1bd4f8;throw this['logger']['error'](this[_0x2f1d09(0x402)]+'\x20('+this[_0x2f1d09(0x770)][_0x2f1d09(0x808)]+'):\x20'+_0x18d075),new m(_0x18d075);}}async[a0_0x34b2dc(0x429)](_0x139770){const _0x412dbf=a0_0x34b2dc;try{let _0x3ce575=await this[_0x412dbf(0x261)][_0x412dbf(0x484)][_0x412dbf(0x584)](this[_0x412dbf(0x770)][_0x412dbf(0x808)]),_0x5aa78e=_0x3ce575?.[_0x412dbf(0x39c)]?.['findIndex'](_0x4112ba=>_0x4112ba[_0x412dbf(0x2c7)]===_0x139770?.[_0x412dbf(0x2c7)]);if(_0x139770?.[_0x412dbf(0x366)])_0x5aa78e>-0x1&&_0x3ce575?.[_0x412dbf(0x39c)]?.['splice'](_0x5aa78e,0x1);else{if(_0x5aa78e>-0x1){let _0x2996de=_0x3ce575['autoCompleteMessages'][_0x5aa78e];_0x2996de[_0x412dbf(0x881)]=_0x139770?.[_0x412dbf(0x881)]||_0x2996de[_0x412dbf(0x881)],_0x2996de['command']=_0x139770?.[_0x412dbf(0x50e)]||_0x2996de[_0x412dbf(0x50e)],_0x2996de[_0x412dbf(0x5ce)]=_0x139770?.[_0x412dbf(0x5ce)]||_0x2996de['message'];}else{let _0x50c246={'_id':_0x139770?.[_0x412dbf(0x2c7)]||new fe['default']['Types'][(_0x412dbf(0x639))]()[_0x412dbf(0x1fe)](),'order':_0x139770?.[_0x412dbf(0x881)],'command':_0x139770?.[_0x412dbf(0x50e)],'message':_0x139770?.[_0x412dbf(0x5ce)]};_0x3ce575?.[_0x412dbf(0x39c)]?.[_0x412dbf(0x26d)](_0x50c246);}}_0x3ce575?.[_0x412dbf(0x39c)]?.['sort']((_0x26d9bf,_0x5c64fa)=>_0x26d9bf['order']-_0x5c64fa[_0x412dbf(0x881)]);let _0x45c52e=await this[_0x412dbf(0x261)][_0x412dbf(0x484)][_0x412dbf(0x78f)](_0x3ce575,this[_0x412dbf(0x770)][_0x412dbf(0x808)]);return this[_0x412dbf(0x3f7)]=_0x45c52e,this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x412dbf(0x770)]['wuid']+_0x412dbf(0x5aa)),_0x45c52e;}catch(_0x376bd0){let _0x2458b9=_0x412dbf(0x676),_0x20bb87=_0x376bd0 instanceof Error?_0x376bd0[_0x412dbf(0x5ce)]:typeof _0x376bd0==_0x412dbf(0x89b)?JSON[_0x412dbf(0x43f)](_0x376bd0):_0x376bd0,_0x3cde32=_0x2458b9+':\x20'+_0x20bb87;throw this[_0x412dbf(0x3cb)][_0x412dbf(0x651)](this[_0x412dbf(0x402)]+'\x20('+this[_0x412dbf(0x770)][_0x412dbf(0x808)]+'):\x20'+_0x3cde32),new m(_0x3cde32);}}async['updateFlowConfig'](_0x5829e1){const _0x1e551b=a0_0x34b2dc;try{let _0x51c5c9=await this[_0x1e551b(0x261)]['automateSystem']['findOrCreate'](this[_0x1e551b(0x770)][_0x1e551b(0x808)]);if(!_0x51c5c9)throw new Error(_0x1e551b(0x480));let _0x135ae5={'_id':_0x51c5c9[_0x1e551b(0x2c7)],'flowConfig':{'enabled':_0x5829e1[_0x1e551b(0x6ad)]??_0x51c5c9[_0x1e551b(0x759)][_0x1e551b(0x6ad)],'ignoreGroups':_0x5829e1[_0x1e551b(0x4b3)]??_0x51c5c9[_0x1e551b(0x759)][_0x1e551b(0x4b3)],'stopConversation':_0x5829e1['stopConversation'][_0x1e551b(0x3b8)]()??_0x51c5c9[_0x1e551b(0x759)][_0x1e551b(0x717)][_0x1e551b(0x3b8)](),'stopMinutes':_0x5829e1[_0x1e551b(0x72f)]??_0x51c5c9[_0x1e551b(0x759)][_0x1e551b(0x72f)],'stopWhenYouSendMsg':_0x5829e1[_0x1e551b(0x73f)]??_0x51c5c9[_0x1e551b(0x759)]['stopWhenYouSendMsg']}},_0x2789cc=await this['repository'][_0x1e551b(0x484)][_0x1e551b(0x78f)](_0x135ae5,this['instance'][_0x1e551b(0x808)]);return this['AutomateSystem']=_0x2789cc,this[_0x1e551b(0x3cb)][_0x1e551b(0x798)](this['instanceName']+'\x20('+this['instance'][_0x1e551b(0x808)]+_0x1e551b(0x284)),this['logger']['verbose'](this[_0x1e551b(0x402)]+'\x20('+this[_0x1e551b(0x770)][_0x1e551b(0x808)]+_0x1e551b(0x4b7)+this[_0x1e551b(0x3f7)]),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x2789cc;}catch(_0x2f2e43){let _0x28c2b1='Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos',_0x38bdaa=_0x2f2e43 instanceof Error?_0x2f2e43['message']:typeof _0x2f2e43=='object'?JSON['stringify'](_0x2f2e43):_0x2f2e43,_0x352ecf=_0x28c2b1+':\x20'+_0x38bdaa;throw this[_0x1e551b(0x3cb)]['error'](this[_0x1e551b(0x402)]+'\x20('+this['instance'][_0x1e551b(0x808)]+_0x1e551b(0x4b7)+_0x352ecf),new m(_0x352ecf);}}async[a0_0x34b2dc(0x3fb)](){const _0x21d557=a0_0x34b2dc;try{let _0x3ddc7a=await this[_0x21d557(0x261)][_0x21d557(0x484)][_0x21d557(0x584)](this[_0x21d557(0x770)][_0x21d557(0x808)]);return this[_0x21d557(0x3f7)]=_0x3ddc7a,_0x3ddc7a;}catch(_0x380590){let _0x4a45e6=_0x21d557(0x6a9),_0x43b9fb=_0x380590 instanceof Error?_0x380590[_0x21d557(0x5ce)]:typeof _0x380590=='object'?JSON[_0x21d557(0x43f)](_0x380590):_0x380590,_0x330551=_0x4a45e6+':\x20'+_0x43b9fb;throw this[_0x21d557(0x3cb)][_0x21d557(0x651)](this['instanceName']+'\x20('+this[_0x21d557(0x770)][_0x21d557(0x808)]+_0x21d557(0x4b7)+_0x330551),new m(_0x330551);}}async[a0_0x34b2dc(0x672)](){const _0x2f221e=a0_0x34b2dc;this[_0x2f221e(0x770)]['ScheduleMessage'][_0x2f221e(0x4c6)]&&clearTimeout(this[_0x2f221e(0x770)][_0x2f221e(0x846)]['timeout']),this['instance'][_0x2f221e(0x846)][_0x2f221e(0x4c6)]=setTimeout(()=>{const _0xc31b7f=_0x2f221e;this[_0xc31b7f(0x5d1)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async['checkAndRestartProcess'](){const _0xa3a90d=a0_0x34b2dc;Date[_0xa3a90d(0x880)]()-this[_0xa3a90d(0x770)][_0xa3a90d(0x846)][_0xa3a90d(0x899)]>=0x1d4c0&&(this[_0xa3a90d(0x3cb)]['verbose'](this[_0xa3a90d(0x402)]+'\x20('+this[_0xa3a90d(0x770)][_0xa3a90d(0x808)]+_0xa3a90d(0x4e6)),this['instance']['ScheduleMessage'][_0xa3a90d(0x2bd)]=null,this[_0xa3a90d(0x770)][_0xa3a90d(0x846)][_0xa3a90d(0x899)]=0x0,this['instance'][_0xa3a90d(0x846)]['delayMessage']=0x0,this[_0xa3a90d(0x7d5)]=null,await this[_0xa3a90d(0x8c4)]());}async[a0_0x34b2dc(0x8c4)](){const _0x1b6548=a0_0x34b2dc;let _0x406975=!0x1;this['pendingMessages']=[],this[_0x1b6548(0x7d5)]=(0x0,X['v4'])(),await this[_0x1b6548(0x898)]();let _0x45a0f4=()=>{const _0x4379cf=_0x1b6548;this[_0x4379cf(0x3cb)][_0x4379cf(0x41f)](this[_0x4379cf(0x402)]+'\x20('+this[_0x4379cf(0x770)]['wuid']+_0x4379cf(0x4ef)+this[_0x4379cf(0x770)]['ScheduleMessage'][_0x4379cf(0x2bd)]?.['_id']+'\x20saindo\x20da\x20função');},_0x1e9ff7=async()=>{const _0x21274f=_0x1b6548;this[_0x21274f(0x3cb)][_0x21274f(0x41f)](this[_0x21274f(0x402)]+'\x20('+this['instance'][_0x21274f(0x808)]+'):\x20Procurando\x20mensagens\x20para\x20envio');let _0x4abdf4=new Date(Date['now']()-0xc*0x3c*0x3c*0x3e8),_0x2bf6ef={'where':{'status':{'$in':[_0x21274f(0x7c8),'sending']},'$or':[{'when':{'$lte':new Date(),'$gte':_0x4abdf4}},{'when':0x0}]}},_0x5bffb3=await this[_0x21274f(0x261)][_0x21274f(0x6b3)]['find'](_0x2bf6ef,this['instance'][_0x21274f(0x808)]);return this[_0x21274f(0x3cb)][_0x21274f(0x41f)](this[_0x21274f(0x402)]+'\x20('+this[_0x21274f(0x770)][_0x21274f(0x808)]+_0x21274f(0x2e0)+_0x5bffb3['length']),_0x5bffb3;},_0x29ea3d=()=>this[_0x1b6548(0x2b7)]['length']===0x0?null:this[_0x1b6548(0x2b7)][_0x1b6548(0x852)]((_0x4f0689,_0x5c0a25)=>(_0x4f0689['order']??Number['MAX_SAFE_INTEGER'])<(_0x5c0a25[_0x1b6548(0x881)]??Number['MAX_SAFE_INTEGER'])?_0x4f0689:_0x5c0a25,this[_0x1b6548(0x2b7)][0x0]),_0x1517d1=async _0x56be02=>{const _0x33cf31=_0x1b6548;let _0x138fa8=Math['floor'](Math[_0x33cf31(0x2e7)]()*0x1389)+0xbb8;for(let _0x5f3380 of _0x56be02){let _0x7268ac={'_id':_0x5f3380[_0x33cf31(0x2c7)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date['now']()-0x2710}}]},_0x16ffdb={'startSend':Date['now'](),'processUUID':this['processUUID'],'status':_0x33cf31(0x885)};if(!await this[_0x33cf31(0x261)][_0x33cf31(0x6b3)][_0x33cf31(0x6ce)](_0x7268ac,_0x16ffdb,this['instance']['wuid']))return;if(!this[_0x33cf31(0x770)]['ScheduleMessage']['isConnected']){this[_0x33cf31(0x3cb)]['warn'](this[_0x33cf31(0x402)]+'\x20('+this[_0x33cf31(0x770)]['wuid']+_0x33cf31(0x4bc));break;}for(this[_0x33cf31(0x2b7)]=_0x5f3380[_0x33cf31(0x591)][_0x33cf31(0x334)](_0x3edac3=>!_0x3edac3[_0x33cf31(0x357)]);this['pendingMessages'][_0x33cf31(0x3a3)]>0x0||!_0x406975;){await this[_0x33cf31(0x672)]();let _0x205d28=_0x29ea3d();if(!_0x205d28){_0x406975=!0x0;break;}let _0x258379=_0x5f3380[_0x33cf31(0x591)][_0x33cf31(0x253)](_0x717d14=>_0x717d14[_0x33cf31(0x2c7)]===_0x205d28[_0x33cf31(0x2c7)]);if(!_0x258379){_0x406975=!0x0;break;}if(this[_0x33cf31(0x770)][_0x33cf31(0x846)][_0x33cf31(0x899)]=Date[_0x33cf31(0x880)](),_0x258379['triedToSend']){this['logger'][_0x33cf31(0x41f)](this['instanceName']+'\x20('+this['instance'][_0x33cf31(0x808)]+_0x33cf31(0x6da)+_0x258379['remoteJid']+_0x33cf31(0x4f4)),this['pendingMessages']=this[_0x33cf31(0x2b7)][_0x33cf31(0x334)](_0x5967fe=>_0x5967fe[_0x33cf31(0x2c7)]!==_0x258379['_id']);continue;}if(!this[_0x33cf31(0x770)][_0x33cf31(0x846)]['isConnected']){this[_0x33cf31(0x3cb)]['warn'](this[_0x33cf31(0x402)]+'\x20('+this[_0x33cf31(0x770)][_0x33cf31(0x808)]+_0x33cf31(0x483));break;}if(!this['instance'][_0x33cf31(0x846)][_0x33cf31(0x2bd)]){this[_0x33cf31(0x3cb)][_0x33cf31(0x41f)](this[_0x33cf31(0x402)]+'\x20('+this[_0x33cf31(0x770)][_0x33cf31(0x808)]+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0x5f3380[_0x33cf31(0x2c7)]+'\x20foi\x20interrompido\x20pelo\x20usuário.');break;}if(_0x258379[_0x33cf31(0x248)]===_0x33cf31(0x35b)&&!this[_0x33cf31(0x3f7)]?.[_0x33cf31(0x759)][_0x33cf31(0x6ad)]){this[_0x33cf31(0x3cb)][_0x33cf31(0x651)](this[_0x33cf31(0x402)]+'\x20('+this['instance'][_0x33cf31(0x808)]+_0x33cf31(0x8cf));break;}let _0x563897={'idControl':_0x258379['_id'],'remoteJid':_0x258379[_0x33cf31(0x668)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date['now']()},_0x199131=null;try{this[_0x33cf31(0x3cb)][_0x33cf31(0x41f)](this[_0x33cf31(0x402)]+'\x20('+this['instance'][_0x33cf31(0x808)]+'):\x20Enviando\x20mensagem\x20para\x20'+_0x258379[_0x33cf31(0x668)]);let _0x228f4f=await this[_0x33cf31(0x2d0)](_0x258379['remoteJid'],_0x258379);_0x563897[_0x33cf31(0x651)]=_0x228f4f[_0x33cf31(0x651)],_0x563897['id']=_0x228f4f[_0x33cf31(0x651)]?null:_0x228f4f['id'],_0x563897[_0x33cf31(0x86b)]=_0x228f4f[_0x33cf31(0x651)]?_0x228f4f[_0x33cf31(0x862)]?_0x228f4f[_0x33cf31(0x862)][_0x33cf31(0x1fe)]():'':null;let _0x3f24e8=_0x5f3380[_0x33cf31(0x591)][_0x33cf31(0x695)](_0xd452=>_0xd452[_0x33cf31(0x2c7)]===_0x258379[_0x33cf31(0x2c7)]);_0x3f24e8!==-0x1&&(_0x5f3380[_0x33cf31(0x591)][_0x3f24e8]['triedToSend']=!0x0);let _0x48eb34={'$push':{'messagesSend':_0x563897},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x99b3ff=[{'elem._id':_0x258379[_0x33cf31(0x2c7)]}];if(this[_0x33cf31(0x3cb)][_0x33cf31(0x41f)](this['instanceName']+'\x20('+this[_0x33cf31(0x770)][_0x33cf31(0x808)]+_0x33cf31(0x747)+_0x258379[_0x33cf31(0x2c7)]),_0x199131=await this[_0x33cf31(0x261)]['scheduleMessage'][_0x33cf31(0x6ce)]({'_id':_0x5f3380['_id']},_0x48eb34,this['instance'][_0x33cf31(0x808)],{'arrayFilters':_0x99b3ff}),_0x228f4f['error']){this[_0x33cf31(0x3cb)]['error'](this['instanceName']+'\x20('+this[_0x33cf31(0x770)][_0x33cf31(0x808)]+_0x33cf31(0x372)+_0x228f4f[_0x33cf31(0x862)]);continue;}let _0x372fc1=this[_0x33cf31(0x236)](_0x5f3380['delaySecMin'],_0x5f3380[_0x33cf31(0x7b0)]);await this[_0x33cf31(0x8cc)](_0x372fc1);}catch(_0x20a07a){this[_0x33cf31(0x3cb)][_0x33cf31(0x651)](this[_0x33cf31(0x402)]+'\x20('+this[_0x33cf31(0x770)][_0x33cf31(0x808)]+_0x33cf31(0x52d)+_0x258379[_0x33cf31(0x668)]+':\x20'+(_0x20a07a instanceof Error?_0x20a07a[_0x33cf31(0x5ce)]:JSON[_0x33cf31(0x43f)](_0x20a07a,null,0x2))),_0x563897['error']=!0x0,_0x563897['error_log']=_0x20a07a[_0x33cf31(0x5ce)];let _0x365290=_0x5f3380['messages'][_0x33cf31(0x695)](_0x3935cc=>_0x3935cc[_0x33cf31(0x2c7)]===_0x258379[_0x33cf31(0x2c7)]);_0x365290!==-0x1&&(_0x5f3380[_0x33cf31(0x591)][_0x365290][_0x33cf31(0x357)]=!0x0);let _0x5e8e8b={'$push':{'messagesSend':_0x563897},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x1ac722=[{'elem._id':_0x258379[_0x33cf31(0x2c7)]}];this['logger'][_0x33cf31(0x41f)](this[_0x33cf31(0x402)]+'\x20('+this[_0x33cf31(0x770)][_0x33cf31(0x808)]+_0x33cf31(0x709)+_0x258379[_0x33cf31(0x2c7)]),_0x199131=await this['repository'][_0x33cf31(0x6b3)][_0x33cf31(0x6ce)]({'_id':_0x5f3380[_0x33cf31(0x2c7)]},_0x5e8e8b,this['instance'][_0x33cf31(0x808)],{'arrayFilters':_0x1ac722});}finally{if(_0x199131&&_0x199131[_0x33cf31(0x71c)]==='stopped'){this[_0x33cf31(0x3cb)][_0x33cf31(0x41f)](this[_0x33cf31(0x402)]+'\x20('+this[_0x33cf31(0x770)][_0x33cf31(0x808)]+_0x33cf31(0x524)+_0x258379['_id']+_0x33cf31(0x5b5));break;}let _0xcc21c0=_0x199131[_0x33cf31(0x591)][_0x33cf31(0x253)](_0x22e53b=>_0x22e53b[_0x33cf31(0x2c7)]===_0x258379[_0x33cf31(0x2c7)]);if(_0xcc21c0&&!_0xcc21c0[_0x33cf31(0x357)]){let _0x32a03a={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x5edbc6=[{'elem._id':_0x258379['_id']}];await this[_0x33cf31(0x261)]['scheduleMessage'][_0x33cf31(0x6ce)]({'_id':_0x199131['_id']},_0x32a03a,this[_0x33cf31(0x770)][_0x33cf31(0x808)],{'arrayFilters':_0x5edbc6});}if(this[_0x33cf31(0x2b7)]=_0x199131[_0x33cf31(0x591)][_0x33cf31(0x334)](_0x24987b=>!_0x24987b[_0x33cf31(0x357)]),_0x406975=this[_0x33cf31(0x2b7)]['length']===0x0,_0x199131[_0x33cf31(0x7d5)]!==this[_0x33cf31(0x7d5)]){this[_0x33cf31(0x3cb)][_0x33cf31(0x41f)](this[_0x33cf31(0x402)]+'\x20('+this[_0x33cf31(0x770)][_0x33cf31(0x808)]+_0x33cf31(0x4eb));return;}this[_0x33cf31(0x770)]['ScheduleMessage'][_0x33cf31(0x2bd)]=_0x199131;}}this['pendingMessages']=[];let _0x4fd348=await this[_0x33cf31(0x261)][_0x33cf31(0x6b3)][_0x33cf31(0x3f5)](_0x5f3380[_0x33cf31(0x2c7)],this['instance'][_0x33cf31(0x808)]);if(_0x406975=_0x4fd348['messages'][_0x33cf31(0x213)](_0x180407=>_0x180407[_0x33cf31(0x357)]),_0x406975&&_0x4fd348[_0x33cf31(0x71c)]!=='stopped'){let _0x3c2def={'$set':{'status':_0x33cf31(0x382)}};await this['repository'][_0x33cf31(0x6b3)][_0x33cf31(0x76c)](_0x4fd348['_id'],_0x3c2def,this[_0x33cf31(0x770)][_0x33cf31(0x808)]);}await new Promise(_0x36bb8b=>setTimeout(_0x36bb8b,_0x138fa8)),global['gc']?global['gc']():console[_0x33cf31(0x41f)]('Garbage\x20collection\x20não\x20está\x20disponível.');}this[_0x33cf31(0x7d5)]=null;},_0x56dd95=async()=>{const _0x1a6ae9=_0x1b6548;let _0x2d0628=new Date(Date[_0x1a6ae9(0x880)]()-0x2932e00),_0x3c54d0={'where':{'status':'scheduled','$or':[{'when':{'$lte':new Date(),'$gte':_0x2d0628}},{'when':0x0}]}},_0x3a04b2=await this[_0x1a6ae9(0x261)]['scheduleMessage'][_0x1a6ae9(0x440)](_0x3c54d0,this[_0x1a6ae9(0x770)]['wuid']);_0x3a04b2&&_0x3a04b2[_0x1a6ae9(0x356)]-Date['now']()<=0x6ddd00?this['instance']['ScheduleMessage'][_0x1a6ae9(0x4ed)]=_0x3a04b2['when']-Date['now']():this[_0x1a6ae9(0x770)][_0x1a6ae9(0x846)][_0x1a6ae9(0x4ed)]=(0x3c+Math[_0x1a6ae9(0x43c)](Math['random']()*0x3c))*0x3c*0x3e8,this[_0x1a6ae9(0x770)]['ScheduleMessage'][_0x1a6ae9(0x4ed)]=Math[_0x1a6ae9(0x5bd)](this[_0x1a6ae9(0x770)][_0x1a6ae9(0x846)][_0x1a6ae9(0x4ed)],0x1*0x2*0x3e8);let _0x449e95=Math[_0x1a6ae9(0x501)](this[_0x1a6ae9(0x770)][_0x1a6ae9(0x846)]['delayMessage']/0xea60);if(_0x3a04b2){let _0x2e2371=new Date(_0x3a04b2['when'])[_0x1a6ae9(0x207)]();this['logger'][_0x1a6ae9(0x41f)](this[_0x1a6ae9(0x402)]+'\x20('+this['instance'][_0x1a6ae9(0x808)]+_0x1a6ae9(0x3e7)+_0x2e2371+',\x20fará\x20nova\x20verificação\x20em\x20'+_0x449e95+'\x20minutos');}else this[_0x1a6ae9(0x3cb)][_0x1a6ae9(0x41f)](this[_0x1a6ae9(0x402)]+'\x20('+this['instance'][_0x1a6ae9(0x808)]+_0x1a6ae9(0x42b)+_0x449e95+_0x1a6ae9(0x5af));setTimeout(()=>this['scheduleNextCheck'](),this[_0x1a6ae9(0x770)][_0x1a6ae9(0x846)][_0x1a6ae9(0x4ed)]);};if(this[_0x1b6548(0x770)][_0x1b6548(0x846)]['processingGroup']){await this[_0x1b6548(0x672)](),_0x45a0f4();return;}if(!this[_0x1b6548(0x770)][_0x1b6548(0x846)][_0x1b6548(0x85c)]){this[_0x1b6548(0x3cb)][_0x1b6548(0x41f)](this['instanceName']+'\x20('+this[_0x1b6548(0x770)][_0x1b6548(0x808)]+_0x1b6548(0x6cb)),this[_0x1b6548(0x770)]['ScheduleMessage'][_0x1b6548(0x2bd)]=null,this[_0x1b6548(0x770)][_0x1b6548(0x846)][_0x1b6548(0x899)]=0x0,this[_0x1b6548(0x770)][_0x1b6548(0x846)][_0x1b6548(0x4ed)]=0x0;return;}try{let _0x1861e1=await _0x1e9ff7();_0x1861e1[_0x1b6548(0x3a3)]===0x0?this[_0x1b6548(0x3cb)][_0x1b6548(0x41f)](this['instanceName']+'\x20('+this['instance'][_0x1b6548(0x808)]+_0x1b6548(0x811)):(this[_0x1b6548(0x770)][_0x1b6548(0x846)][_0x1b6548(0x2bd)]=_0x1861e1[0x0],await _0x1517d1(_0x1861e1)),await _0x56dd95(),this[_0x1b6548(0x770)][_0x1b6548(0x846)]['processingGroup']=null;}catch(_0x1c3a1f){this[_0x1b6548(0x3cb)][_0x1b6548(0x651)](_0x1b6548(0x729)+(_0x1c3a1f instanceof Error?_0x1c3a1f[_0x1b6548(0x5ce)]:JSON[_0x1b6548(0x43f)](_0x1c3a1f,null,0x2)));}}[a0_0x34b2dc(0x236)](_0x4df6e7,_0x564c72){const _0x46aee6=a0_0x34b2dc;return _0x4df6e7=Math['max'](0.5,_0x4df6e7),_0x564c72=Math[_0x46aee6(0x633)](Math[_0x46aee6(0x5bd)](0x3,_0x564c72),0x78),Math[_0x46aee6(0x43c)](Math[_0x46aee6(0x2e7)]()*(_0x564c72-_0x4df6e7+0x1)+_0x4df6e7)*0x3e8;}[a0_0x34b2dc(0x8cc)](_0x1b8745){return new Promise(_0x5d1c26=>setTimeout(_0x5d1c26,_0x1b8745));}async[a0_0x34b2dc(0x63b)](_0x496dea){const _0x21c39f=a0_0x34b2dc;if(!this[_0x21c39f(0x3f7)]&&(await this['getAutomateSystem'](),!this[_0x21c39f(0x3f7)]))return null;_0x496dea=this['createJid'](_0x496dea);let _0x547a2f=await this[_0x21c39f(0x261)]['chat'][_0x21c39f(0x440)]({'where':{'_id':_0x496dea}},this[_0x21c39f(0x770)][_0x21c39f(0x808)]),_0x3341c1={};if(_0x547a2f&&_0x547a2f[_0x21c39f(0x719)]){let _0x55af19=_0x547a2f['leadInfo'];typeof _0x55af19[_0x21c39f(0x239)]==_0x21c39f(0x47d)&&(_0x3341c1[_0x21c39f(0x239)]=_0x55af19[_0x21c39f(0x239)]),typeof _0x55af19[_0x21c39f(0x538)]==_0x21c39f(0x47d)&&(_0x3341c1[_0x21c39f(0x538)]=_0x55af19[_0x21c39f(0x538)]),typeof _0x55af19[_0x21c39f(0x806)]==_0x21c39f(0x47d)&&(_0x3341c1[_0x21c39f(0x806)]=_0x55af19['email']),typeof _0x55af19[_0x21c39f(0x4d7)]==_0x21c39f(0x47d)&&(_0x3341c1['cpf']=_0x55af19[_0x21c39f(0x4d7)]),typeof _0x55af19[_0x21c39f(0x71c)]==_0x21c39f(0x47d)&&(_0x3341c1[_0x21c39f(0x71c)]=_0x55af19[_0x21c39f(0x71c)]),typeof _0x55af19[_0x21c39f(0x715)]==_0x21c39f(0x47d)&&(_0x3341c1['notas']=_0x55af19[_0x21c39f(0x715)]),typeof _0x55af19[_0x21c39f(0x88d)]==_0x21c39f(0x47d)&&(_0x3341c1[_0x21c39f(0x88d)]=_0x55af19['responsavelid']),Array[_0x21c39f(0x6fa)](_0x55af19[_0x21c39f(0x699)])&&(_0x3341c1[_0x21c39f(0x699)]=_0x55af19[_0x21c39f(0x699)][_0x21c39f(0x3c9)](',\x20')),Array['isArray'](_0x55af19['etiquetas'])&&(_0x3341c1[_0x21c39f(0x335)]=_0x55af19[_0x21c39f(0x335)][_0x21c39f(0x3c9)](',\x20'));}return _0x547a2f&&_0x547a2f[_0x21c39f(0x719)]&&_0x547a2f[_0x21c39f(0x719)][_0x21c39f(0x883)]&&_0x547a2f[_0x21c39f(0x719)][_0x21c39f(0x883)][_0x21c39f(0x3f2)](_0x1c45ad=>{const _0x29c7da=_0x21c39f;let _0x3bd760=this['AutomateSystem']?.['customFields']['find'](_0x56ad42=>_0x56ad42[_0x29c7da(0x2c7)]===_0x1c45ad[_0x29c7da(0x2c7)]);_0x3bd760&&(_0x3341c1[_0x3bd760[_0x29c7da(0x673)]]=_0x1c45ad[_0x29c7da(0x47a)]);}),_0x3341c1;}async[a0_0x34b2dc(0x3c8)](_0x44eda1,_0x125b5d){const _0x5cb6d3=a0_0x34b2dc;try{let _0x4066c4=await this[_0x5cb6d3(0x63b)](_0x125b5d);return this['replaceVariables'](_0x44eda1,_0x4066c4);}catch(_0x81a71d){return this['logger']['error']('Erro\x20ao\x20substituir\x20variáveis\x20para\x20'+_0x125b5d+':\x20'+_0x81a71d),_0x44eda1;}}async[a0_0x34b2dc(0x898)](){const _0x13aa51=a0_0x34b2dc;let _0x2b23e6=async(_0x10fa15,_0x4ba8f9)=>{const _0x695015=a0_0x15dd;let _0x20eb45=(await this[_0x695015(0x261)][_0x695015(0x6b3)]['find']({'where':{'type':_0x10fa15}},this[_0x695015(0x770)]['wuid']))[_0x695015(0x790)](async _0x3e56c7=>{const _0x4ff7ec=_0x695015;let _0x24ea72=_0x4ba8f9(_0x3e56c7),_0x2c2df8=_0x383059=>/^\d+$/[_0x4ff7ec(0x4a6)](_0x383059),_0x47c654=_0x3e56c7[_0x4ff7ec(0x497)][_0x4ff7ec(0x334)](_0x24876c=>_0x24876c[_0x4ff7ec(0x5b1)](_0x4ff7ec(0x831))?_0x24876c['length']>0x19:_0x24876c[_0x4ff7ec(0x5b1)](_0x4ff7ec(0x59c))?_0x24876c[_0x4ff7ec(0x3a3)]>0xf:_0x2c2df8(_0x24876c)?_0x24876c[_0x4ff7ec(0x3a3)]>=0xb:!0x1)['map'](_0xf0a30=>({'_id':(0x0,X['v4'])(),'idSchedule':_0x3e56c7[_0x4ff7ec(0x2c7)],'type':_0x24ea72,'remoteJid':_0xf0a30,'flow':_0x3e56c7[_0x4ff7ec(0x939)],'text':_0x3e56c7['message']?.[_0x4ff7ec(0x6b6)],'delay':_0x3e56c7[_0x4ff7ec(0x5ce)]?.['delay'],'urlOrBase64':_0x3e56c7[_0x4ff7ec(0x5ce)]?.['urlOrBase64'],'linkPreview':_0x3e56c7[_0x4ff7ec(0x5ce)]?.[_0x4ff7ec(0x646)],'fileName':_0x3e56c7[_0x4ff7ec(0x5ce)]?.[_0x4ff7ec(0x685)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x4ff7ec(0x261)][_0x4ff7ec(0x6b3)][_0x4ff7ec(0x76c)](_0x3e56c7[_0x4ff7ec(0x2c7)],{'$set':{'messages':_0x47c654},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x4ff7ec(0x770)][_0x4ff7ec(0x808)]);}catch(_0x2402f9){console[_0x4ff7ec(0x651)](_0x4ff7ec(0x5ca)+_0x3e56c7[_0x4ff7ec(0x2c7)]+':',_0x2402f9);}});await Promise['all'](_0x20eb45);};await _0x2b23e6(_0x13aa51(0x6b6),_0x1f980c=>_0x13aa51(0x6b6)),await _0x2b23e6(_0x13aa51(0x4c8),_0x1850b3=>_0x1850b3['message']?.['mediatype']||'media'),await _0x2b23e6(_0x13aa51(0x389),_0x5e5d39=>_0x13aa51(0x389)),await _0x2b23e6(_0x13aa51(0x35b),_0x59413f=>_0x13aa51(0x35b)),await _0x2b23e6(_0x13aa51(0x539),_0x22cbd6=>_0x13aa51(0x539)),await _0x2b23e6(_0x13aa51(0x555),_0x50222f=>_0x13aa51(0x555)),await _0x2b23e6('document',_0x1618af=>_0x13aa51(0x6b4)),this[_0x13aa51(0x3cb)][_0x13aa51(0x41f)](this[_0x13aa51(0x402)]+'\x20('+this[_0x13aa51(0x770)][_0x13aa51(0x808)]+_0x13aa51(0x87e));}async[a0_0x34b2dc(0x26e)](_0x45cd43){const _0x5cec95=a0_0x34b2dc;try{if(this[_0x5cec95(0x3cb)]['warn'](this[_0x5cec95(0x402)]+'\x20('+this[_0x5cec95(0x770)][_0x5cec95(0x808)]+_0x5cec95(0x238)),_0x45cd43[_0x5cec95(0x2c7)]||(_0x45cd43[_0x5cec95(0x2c7)]=(0x0,X['v4'])()),this[_0x5cec95(0x770)][_0x5cec95(0x846)]['processingGroup']?.[_0x5cec95(0x2c7)]===_0x45cd43[_0x5cec95(0x2c7)]?.[_0x5cec95(0x1fe)]()&&_0x45cd43['status']!==_0x5cec95(0x900))throw new Error(_0x5cec95(0x849));if(_0x45cd43['delete']&&_0x45cd43[_0x5cec95(0x2c7)]){let _0x2e99e4=await this['repository'][_0x5cec95(0x6b3)][_0x5cec95(0x907)](_0x45cd43[_0x5cec95(0x2c7)],this[_0x5cec95(0x770)][_0x5cec95(0x808)]);return setTimeout(()=>this[_0x5cec95(0x8c4)](),0x7d0),_0x2e99e4;}let _0x42e0ed=null;if(_0x45cd43[_0x5cec95(0x2c7)]&&(_0x42e0ed=await this[_0x5cec95(0x261)]['scheduleMessage'][_0x5cec95(0x3f5)](_0x45cd43[_0x5cec95(0x2c7)],this[_0x5cec95(0x770)][_0x5cec95(0x808)])),_0x42e0ed){let {_id:_0x364748,owner:_0x561a9d,messages:_0x3cc8ef,..._0x382b46}=_0x45cd43;if(_0x3cc8ef){let _0x414c7c=_0x3cc8ef[_0x5cec95(0x334)](_0x517117=>!_0x517117[_0x5cec95(0x2c7)]),_0x56d114=_0x3cc8ef[_0x5cec95(0x334)](_0x14511f=>_0x14511f[_0x5cec95(0x2c7)]&&!_0x14511f[_0x5cec95(0x366)]),_0x4ee54a=_0x3cc8ef[_0x5cec95(0x334)](_0x61617e=>_0x61617e['_id']&&_0x61617e[_0x5cec95(0x366)]);if(_0x414c7c['length']>0x0&&await this['addMessagesToGroup'](_0x45cd43[_0x5cec95(0x2c7)],_0x414c7c),_0x56d114[_0x5cec95(0x3a3)]>0x0&&await this['editMessagesInGroup']({'_id':_0x45cd43['_id'],'messages':_0x56d114}),_0x4ee54a[_0x5cec95(0x3a3)]>0x0){let _0x31920d=_0x4ee54a[_0x5cec95(0x790)](_0x4d7fa5=>({'updateOne':{'filter':{'_id':_0x45cd43[_0x5cec95(0x2c7)]},'update':{'$pull':{'messages':{'_id':_0x4d7fa5[_0x5cec95(0x2c7)]}}}}}));await this[_0x5cec95(0x261)][_0x5cec95(0x6b3)]['bulkWrite'](_0x31920d,this[_0x5cec95(0x770)][_0x5cec95(0x808)]);}}let _0x483fe6={'$set':{..._0x382b46,'status':_0x45cd43[_0x5cec95(0x71c)]||_0x42e0ed[_0x5cec95(0x71c)]}},_0x5865ef=await this[_0x5cec95(0x261)][_0x5cec95(0x6b3)]['updateOneById'](_0x45cd43[_0x5cec95(0x2c7)],_0x483fe6,this[_0x5cec95(0x770)]['wuid']);return _0x5865ef&&(this[_0x5cec95(0x61f)](_0x5865ef[_0x5cec95(0x591)]),await this[_0x5cec95(0x261)][_0x5cec95(0x6b3)][_0x5cec95(0x76c)](_0x5865ef[_0x5cec95(0x2c7)],{'$set':{'messages':_0x5865ef[_0x5cec95(0x591)]}},this['instance'][_0x5cec95(0x808)])),setTimeout(()=>this[_0x5cec95(0x8c4)](),0x7d0),await this[_0x5cec95(0x898)](),_0x5865ef;}else{_0x45cd43[_0x5cec95(0x56c)]=this['instance'][_0x5cec95(0x808)],_0x45cd43['messages']&&_0x45cd43[_0x5cec95(0x591)][_0x5cec95(0x3f2)](_0x3cf664=>{const _0x13af4b=_0x5cec95;_0x3cf664['_id']||(_0x3cf664[_0x13af4b(0x2c7)]=(0x0,X['v4'])()),_0x3cf664[_0x13af4b(0x37f)]||(_0x3cf664[_0x13af4b(0x37f)]=_0x45cd43[_0x13af4b(0x2c7)]),delete _0x3cf664[_0x13af4b(0x357)];});let _0x1e157d=await this['repository'][_0x5cec95(0x6b3)][_0x5cec95(0x1f1)](_0x45cd43,this[_0x5cec95(0x770)][_0x5cec95(0x808)]);return _0x1e157d&&(this['reorderMessages'](_0x1e157d[_0x5cec95(0x591)]),await this['repository'][_0x5cec95(0x6b3)][_0x5cec95(0x76c)](_0x1e157d['_id'],{'$set':{'messages':_0x1e157d['messages']}},this['instance'][_0x5cec95(0x808)])),setTimeout(()=>this[_0x5cec95(0x8c4)](),0x7d0),_0x1e157d;}}catch(_0xe4e6f0){let _0x57b2a4=_0x5cec95(0x3c4),_0x4a01b3=_0xe4e6f0 instanceof Error?_0xe4e6f0[_0x5cec95(0x5ce)]:typeof _0xe4e6f0=='object'?JSON[_0x5cec95(0x43f)](_0xe4e6f0):_0xe4e6f0,_0x1c7d04=_0x57b2a4+':\x20'+_0x4a01b3;throw this[_0x5cec95(0x3cb)][_0x5cec95(0x651)](this[_0x5cec95(0x402)]+'\x20('+this[_0x5cec95(0x770)][_0x5cec95(0x808)]+_0x5cec95(0x4b7)+_0x1c7d04),new m(_0x1c7d04);}}async[a0_0x34b2dc(0x3b3)](_0x2929f9,_0x2bc4cd){const _0x2f0952=a0_0x34b2dc;try{this[_0x2f0952(0x3cb)][_0x2f0952(0x798)](this['instanceName']+'\x20('+this['instance'][_0x2f0952(0x808)]+_0x2f0952(0x3c7)),_0x2bc4cd[_0x2f0952(0x3f2)](_0x1a5ae1=>{const _0x4e60de=_0x2f0952;_0x1a5ae1[_0x4e60de(0x2c7)]||(_0x1a5ae1[_0x4e60de(0x2c7)]=(0x0,X['v4'])()),_0x1a5ae1[_0x4e60de(0x37f)]||(_0x1a5ae1['idSchedule']=_0x2929f9),delete _0x1a5ae1[_0x4e60de(0x357)];});let _0x4662d6={'$push':{'messages':{'$each':_0x2bc4cd}}},_0x28ca6e=await this[_0x2f0952(0x261)][_0x2f0952(0x6b3)][_0x2f0952(0x76c)](_0x2929f9,_0x4662d6,this[_0x2f0952(0x770)]['wuid']);return _0x28ca6e&&(this[_0x2f0952(0x61f)](_0x28ca6e[_0x2f0952(0x591)]),await this[_0x2f0952(0x261)][_0x2f0952(0x6b3)][_0x2f0952(0x76c)](_0x28ca6e[_0x2f0952(0x2c7)],{'$set':{'messages':_0x28ca6e[_0x2f0952(0x591)]}},this['instance'][_0x2f0952(0x808)])),_0x28ca6e;}catch(_0x5bdc16){let _0x7070c6=_0x2f0952(0x2b4),_0x28bab4=_0x5bdc16 instanceof Error?_0x5bdc16[_0x2f0952(0x5ce)]:typeof _0x5bdc16=='object'?JSON[_0x2f0952(0x43f)](_0x5bdc16):_0x5bdc16,_0x10c770=_0x7070c6+':\x20'+_0x28bab4;throw this['logger']['error'](this[_0x2f0952(0x402)]+'\x20('+this[_0x2f0952(0x770)][_0x2f0952(0x808)]+_0x2f0952(0x4b7)+_0x10c770),new m(_0x10c770);}}async[a0_0x34b2dc(0x403)](_0x4a76d0){const _0x161a67=a0_0x34b2dc;try{if(this[_0x161a67(0x3cb)][_0x161a67(0x798)](this['instanceName']+'\x20('+this[_0x161a67(0x770)]['wuid']+_0x161a67(0x463)),!_0x4a76d0[_0x161a67(0x2c7)]||!_0x4a76d0[_0x161a67(0x591)])throw new Error(_0x161a67(0x794));let _0x1aad2d=_0x4a76d0[_0x161a67(0x2c7)],_0x41056c=_0x4a76d0[_0x161a67(0x591)],_0x203783=_0x41056c[_0x161a67(0x334)](_0x28db30=>!_0x28db30[_0x161a67(0x366)])['map'](_0x341e1d=>{const _0x499323=_0x161a67;let _0x422ab9=_0x341e1d[_0x499323(0x2c7)];if(!_0x422ab9)throw new Error(_0x499323(0x848));return _0x341e1d[_0x499323(0x37f)]||(_0x341e1d['idSchedule']=_0x1aad2d),delete _0x341e1d[_0x499323(0x357)],{'updateOne':{'filter':{'_id':_0x1aad2d,'messages._id':_0x422ab9},'update':{'$set':{'messages.$[elem]':_0x341e1d}},'arrayFilters':[{'elem._id':_0x422ab9}]}};}),_0x16c76c=_0x41056c[_0x161a67(0x334)](_0x13e331=>_0x13e331[_0x161a67(0x366)])[_0x161a67(0x790)](_0x8f61f9=>{const _0x2ed1b7=_0x161a67;let _0x3cc096=_0x8f61f9[_0x2ed1b7(0x2c7)];if(!_0x3cc096)throw new Error('Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.');return{'updateOne':{'filter':{'_id':_0x1aad2d},'update':{'$pull':{'messages':{'_id':_0x3cc096}}}}};}),_0x569878=[..._0x203783,..._0x16c76c],_0x486f39=await this[_0x161a67(0x261)]['scheduleMessage'][_0x161a67(0x7b3)](_0x569878,this['instance'][_0x161a67(0x808)]),_0xd38665=await this['repository'][_0x161a67(0x6b3)][_0x161a67(0x3f5)](_0x1aad2d,this[_0x161a67(0x770)][_0x161a67(0x808)]);return _0xd38665&&(this['reorderMessages'](_0xd38665[_0x161a67(0x591)]),await this['repository'][_0x161a67(0x6b3)][_0x161a67(0x76c)](_0xd38665[_0x161a67(0x2c7)],{'$set':{'messages':_0xd38665['messages']}},this[_0x161a67(0x770)]['wuid'])),_0xd38665;}catch(_0x36c2b1){let _0x28ffcd=_0x161a67(0x417),_0x4f321f=_0x36c2b1 instanceof Error?_0x36c2b1[_0x161a67(0x5ce)]:typeof _0x36c2b1==_0x161a67(0x89b)?JSON[_0x161a67(0x43f)](_0x36c2b1):_0x36c2b1,_0x4f911f=_0x28ffcd+':\x20'+_0x4f321f;throw this[_0x161a67(0x3cb)]['error'](this[_0x161a67(0x402)]+'\x20('+this['instance']['wuid']+'):\x20'+_0x4f911f),new m(_0x4f911f);}}async['deleteDoneMessages'](){const _0x67d6d1=a0_0x34b2dc;try{let _0x3e9df4={'status':_0x67d6d1(0x382)},_0x3d6717=await this['repository'][_0x67d6d1(0x6b3)]['deleteMany'](_0x3e9df4,this[_0x67d6d1(0x770)][_0x67d6d1(0x808)]);if(!_0x3d6717[_0x67d6d1(0x651)])this[_0x67d6d1(0x3cb)][_0x67d6d1(0x798)](this[_0x67d6d1(0x402)]+'\x20('+this[_0x67d6d1(0x770)]['wuid']+'):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.');else throw new Error(_0x3d6717[_0x67d6d1(0x651)][_0x67d6d1(0x5ce)]||_0x67d6d1(0x2dc));return this[_0x67d6d1(0x20a)]();}catch(_0x2ff420){let _0x457fdd='Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped',_0x2ae0ac=_0x2ff420 instanceof Error?_0x2ff420['message']:typeof _0x2ff420==_0x67d6d1(0x89b)?JSON[_0x67d6d1(0x43f)](_0x2ff420):_0x2ff420,_0x45a584=_0x457fdd+':\x20'+_0x2ae0ac;throw this['logger'][_0x67d6d1(0x651)](this[_0x67d6d1(0x402)]+'\x20('+this[_0x67d6d1(0x770)][_0x67d6d1(0x808)]+_0x67d6d1(0x4b7)+_0x45a584),new m(_0x45a584);}}async[a0_0x34b2dc(0x20a)](){const _0x239ee9=a0_0x34b2dc;try{return await this[_0x239ee9(0x261)][_0x239ee9(0x6b3)]['find']({'where':{}},this['instance'][_0x239ee9(0x808)]);}catch(_0x12acf8){let _0x1ebb22=_0x239ee9(0x763),_0x570d82=_0x12acf8 instanceof Error?_0x12acf8[_0x239ee9(0x5ce)]:typeof _0x12acf8==_0x239ee9(0x89b)?JSON[_0x239ee9(0x43f)](_0x12acf8):_0x12acf8,_0x461726=_0x1ebb22+':\x20'+_0x570d82;throw this[_0x239ee9(0x3cb)][_0x239ee9(0x651)](this[_0x239ee9(0x402)]+'\x20('+this[_0x239ee9(0x770)]['wuid']+_0x239ee9(0x4b7)+_0x461726),new m(_0x461726);}}[a0_0x34b2dc(0x61f)](_0x13be2d){const _0x10c42d=a0_0x34b2dc;_0x13be2d[_0x10c42d(0x289)]((_0xe9d03e,_0x4cfeb0)=>_0xe9d03e[_0x10c42d(0x881)]-_0x4cfeb0[_0x10c42d(0x881)]),_0x13be2d[_0x10c42d(0x3f2)]((_0x34c09f,_0x437a2e)=>{const _0x5099a8=_0x10c42d;_0x34c09f[_0x5099a8(0x881)]=_0x437a2e+0x1;});}async[a0_0x34b2dc(0x2d0)](_0x2a3628,_0x508a6f){const _0xc9cf=a0_0x34b2dc;try{if(!_0x508a6f)return this[_0xc9cf(0x3cb)][_0xc9cf(0x651)](this['instanceName']+'\x20('+this[_0xc9cf(0x770)][_0xc9cf(0x808)]+_0xc9cf(0x67f)),{'error':!0x0,'detail':_0xc9cf(0x44d)};if(_0x508a6f[_0xc9cf(0x248)]===_0xc9cf(0x35b)&&!this[_0xc9cf(0x3f7)]?.[_0xc9cf(0x759)][_0xc9cf(0x6ad)])return this[_0xc9cf(0x3cb)][_0xc9cf(0x651)](this['instanceName']+'\x20('+this[_0xc9cf(0x770)][_0xc9cf(0x808)]+_0xc9cf(0x612)),{'error':!0x0,'detail':_0xc9cf(0x365)};switch(_0x508a6f[_0xc9cf(0x248)]){case _0xc9cf(0x6b6):return await this['scheduleSendText'](_0x508a6f,_0x2a3628);case _0xc9cf(0x555):case _0xc9cf(0x539):case _0xc9cf(0x6b4):return await this[_0xc9cf(0x80e)](_0x508a6f,_0x2a3628);case _0xc9cf(0x389):return await this[_0xc9cf(0x2ef)](_0x508a6f,_0x2a3628);case _0xc9cf(0x35b):let _0x55724a=new Ke();return _0x55724a[_0xc9cf(0x673)]=_0x508a6f[_0xc9cf(0x35b)],_0x55724a['remoteJid']=_0x2a3628,await this['startFlow'](_0x55724a);default:return this[_0xc9cf(0x3cb)][_0xc9cf(0x651)](this[_0xc9cf(0x402)]+'\x20('+this[_0xc9cf(0x770)][_0xc9cf(0x808)]+_0xc9cf(0x234)+_0x508a6f[_0xc9cf(0x248)]),{'error':!0x0,'detail':_0xc9cf(0x618)};}}catch(_0x4c9d82){return this[_0xc9cf(0x3cb)]['error'](this[_0xc9cf(0x402)]+'\x20('+this['instance'][_0xc9cf(0x808)]+'):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20'+(_0x4c9d82 instanceof Error?_0x4c9d82[_0xc9cf(0x5ce)]:JSON['stringify'](_0x4c9d82,null,0x2))),{'error':!0x0,'detail':_0x4c9d82['message']};}}async[a0_0x34b2dc(0x46f)](_0x16b330,_0x2e4f91){const _0xaa0407=a0_0x34b2dc;if(this['logger'][_0xaa0407(0x798)](this[_0xaa0407(0x402)]+'\x20('+this[_0xaa0407(0x770)]['wuid']+_0xaa0407(0x328)+_0x2e4f91+'\x27'),!_0x16b330[_0xaa0407(0x6b6)]||_0x16b330['text'][_0xaa0407(0x3a3)]===0x0)return{'error':!0x0,'detail':_0xaa0407(0x6bf)};let _0x42978f=await this[_0xaa0407(0x3c8)](_0x16b330['text'],_0x2e4f91),_0x15ab40={'number':_0x2e4f91,'options':{'delay':_0x16b330['delay'],'linkPreview':_0x16b330[_0xaa0407(0x646)]},'textMessage':{'text':_0x42978f}},_0x5ae6ab=null;try{let _0x4ddb79=await this[_0xaa0407(0x876)](_0x15ab40);if(_0x4ddb79&&_0x4ddb79['status'])return{'error':!0x1,'id':_0x4ddb79[_0xaa0407(0x85f)]['id']};_0x5ae6ab=JSON[_0xaa0407(0x43f)](_0x4ddb79),this[_0xaa0407(0x3cb)][_0xaa0407(0x798)](this[_0xaa0407(0x402)]+'\x20('+this['instance'][_0xaa0407(0x808)]+'):\x20'+_0x5ae6ab);}catch(_0x475d5c){this[_0xaa0407(0x3cb)][_0xaa0407(0x651)](this['instanceName']+'\x20('+this[_0xaa0407(0x770)][_0xaa0407(0x808)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20'+(_0x475d5c instanceof Error?_0x475d5c[_0xaa0407(0x5ce)]:JSON['stringify'](_0x475d5c,null,0x2))),_0x5ae6ab=_0x475d5c['message'];}if(_0x5ae6ab)return{'error':!0x0,'detail':(typeof _0x5ae6ab==_0xaa0407(0x89b)?JSON['stringify'](_0x5ae6ab,null,0x2):_0x5ae6ab)['replace'](/[\[\]{}\n]/g,'\x20')['replace'](/  +/g,'\x20')};}async[a0_0x34b2dc(0x80e)](_0x209733,_0x2bc21c){const _0x8acf32=a0_0x34b2dc;this[_0x8acf32(0x3cb)]['verbose'](this['instanceName']+'\x20('+this[_0x8acf32(0x770)][_0x8acf32(0x808)]+_0x8acf32(0x6e2)+_0x2bc21c+'\x27');let _0x41d07e;_0x209733[_0x8acf32(0x6b6)]&&_0x209733[_0x8acf32(0x6b6)][_0x8acf32(0x3a3)]>0x0&&(_0x41d07e=await this['replaceVariablesChat'](_0x209733['text'],_0x2bc21c));let _0x80be7d={'number':_0x2bc21c,'options':{'delay':_0x209733['delay'],'linkPreview':_0x209733[_0x8acf32(0x646)]},'mediaMessage':{'mediatype':_0x209733[_0x8acf32(0x248)],'caption':_0x41d07e,'media':_0x209733['urlOrBase64']}},_0x49e923=null;try{let _0xbbf122=await this[_0x8acf32(0x80a)](_0x80be7d);if(_0xbbf122&&_0xbbf122[_0x8acf32(0x71c)])return{'error':!0x1,'id':_0xbbf122['key']['id']};_0x49e923=JSON[_0x8acf32(0x43f)](_0xbbf122),this['logger'][_0x8acf32(0x798)](this[_0x8acf32(0x402)]+'\x20('+this[_0x8acf32(0x770)][_0x8acf32(0x808)]+_0x8acf32(0x4b7)+_0x49e923);}catch(_0x5caee1){this[_0x8acf32(0x3cb)][_0x8acf32(0x651)](this[_0x8acf32(0x402)]+'\x20('+this[_0x8acf32(0x770)][_0x8acf32(0x808)]+_0x8acf32(0x42f)+(_0x5caee1 instanceof Error?_0x5caee1['message']:JSON[_0x8acf32(0x43f)](_0x5caee1,null,0x2))),_0x49e923=_0x5caee1['message'];}if(_0x49e923)return{'error':!0x0,'detail':(typeof _0x49e923=='object'?JSON[_0x8acf32(0x43f)](_0x49e923,null,0x2):_0x49e923)[_0x8acf32(0x2a1)](/[\[\]{}\n]/g,'\x20')[_0x8acf32(0x2a1)](/  +/g,'\x20')};}async[a0_0x34b2dc(0x2ef)](_0x2f6bb2,_0x3075f0){const _0x1ecf4f=a0_0x34b2dc;this['logger'][_0x1ecf4f(0x798)](this['instanceName']+'\x20('+this[_0x1ecf4f(0x770)][_0x1ecf4f(0x808)]+_0x1ecf4f(0x875)+_0x3075f0+'\x27');let _0x7d0f2b={'number':_0x3075f0,'options':{'delay':_0x2f6bb2[_0x1ecf4f(0x6db)]},'audioMessage':{'audio':_0x2f6bb2['urlOrBase64']}},_0x1d4be9=null;try{let _0x701767=await this[_0x1ecf4f(0x383)](_0x7d0f2b);if(_0x701767&&_0x701767[_0x1ecf4f(0x71c)])return{'error':!0x1,'id':_0x701767[_0x1ecf4f(0x85f)]['id']};_0x1d4be9=JSON[_0x1ecf4f(0x43f)](_0x701767),this[_0x1ecf4f(0x3cb)][_0x1ecf4f(0x798)](this[_0x1ecf4f(0x402)]+'\x20('+this[_0x1ecf4f(0x770)]['wuid']+_0x1ecf4f(0x4b7)+_0x1d4be9);}catch(_0x33a1b6){this['logger'][_0x1ecf4f(0x651)](this[_0x1ecf4f(0x402)]+'\x20('+this[_0x1ecf4f(0x770)][_0x1ecf4f(0x808)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20'+(_0x33a1b6 instanceof Error?_0x33a1b6[_0x1ecf4f(0x5ce)]:JSON[_0x1ecf4f(0x43f)](_0x33a1b6,null,0x2))),_0x1d4be9=_0x33a1b6[_0x1ecf4f(0x5ce)];}if(_0x1d4be9)return{'error':!0x0,'detail':(typeof _0x1d4be9==_0x1ecf4f(0x89b)?JSON[_0x1ecf4f(0x43f)](_0x1d4be9,null,0x2):_0x1d4be9)[_0x1ecf4f(0x2a1)](/[\[\]{}\n]/g,'\x20')[_0x1ecf4f(0x2a1)](/  +/g,'\x20')};}async[a0_0x34b2dc(0x6fe)](_0x1efb1e){const _0x420493=a0_0x34b2dc;try{return await this[_0x420493(0x45a)][_0x420493(0x2b9)](_0x1efb1e[_0x420493(0x554)],_0x1efb1e['description']),{'update':'success'};}catch(_0x59ac7c){let _0x85fc15=_0x420493(0x21f),_0x1f3427=_0x59ac7c instanceof Error?_0x59ac7c['message']:typeof _0x59ac7c=='object'?JSON[_0x420493(0x43f)](_0x59ac7c):_0x59ac7c,_0x2d1053=_0x85fc15+':\x20'+_0x1f3427;throw this['logger']['error'](this[_0x420493(0x402)]+'\x20('+this['instance'][_0x420493(0x808)]+_0x420493(0x4b7)+_0x2d1053),new x(_0x2d1053);}}async[a0_0x34b2dc(0x4c5)](_0x4ec4ca){const _0xf932ca=a0_0x34b2dc;try{return await this[_0xf932ca(0x45a)][_0xf932ca(0x6f9)](_0x4ec4ca[_0xf932ca(0x554)],_0x4ec4ca[_0xf932ca(0x673)]),{'update':_0xf932ca(0x7fa)};}catch(_0xb5c661){let _0x224a80='Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName',_0x430f72=_0xb5c661 instanceof Error?_0xb5c661['message']:typeof _0xb5c661==_0xf932ca(0x89b)?JSON[_0xf932ca(0x43f)](_0xb5c661):_0xb5c661,_0x477ed8=_0x224a80+':\x20'+_0x430f72;throw this[_0xf932ca(0x3cb)][_0xf932ca(0x651)](this[_0xf932ca(0x402)]+'\x20('+this[_0xf932ca(0x770)][_0xf932ca(0x808)]+_0xf932ca(0x4b7)+_0x477ed8),new x(_0x477ed8);}}async['toggleEphemeral'](_0xcff344){const _0x4474e2=a0_0x34b2dc;try{let _0x3c70ca=await this[_0x4474e2(0x45a)][_0x4474e2(0x3f4)](_0xcff344['groupJid'],_0xcff344[_0x4474e2(0x682)]);return{'success':!0x0};}catch(_0x247acd){let _0x5b0165=_0x4474e2(0x5e0),_0x139700=_0x247acd instanceof Error?_0x247acd['message']:typeof _0x247acd==_0x4474e2(0x89b)?JSON[_0x4474e2(0x43f)](_0x247acd):_0x247acd,_0x78d32a=_0x5b0165+':\x20'+_0x139700;throw this[_0x4474e2(0x3cb)][_0x4474e2(0x651)](this[_0x4474e2(0x402)]+'\x20('+this[_0x4474e2(0x770)][_0x4474e2(0x808)]+_0x4474e2(0x4b7)+_0x78d32a),new x(_0x78d32a);}}async[a0_0x34b2dc(0x1e8)](_0x574f6c){const _0x2d534f=a0_0x34b2dc;try{return await this[_0x2d534f(0x45a)][_0x2d534f(0x933)](_0x574f6c[_0x2d534f(0x554)],_0x574f6c[_0x2d534f(0x1f2)]),{'update':'success'};}catch(_0x3827e0){let _0x1acfbb=_0x2d534f(0x836),_0x288a75=_0x3827e0 instanceof Error?_0x3827e0['message']:typeof _0x3827e0=='object'?JSON['stringify'](_0x3827e0):_0x3827e0,_0x26c95b=_0x1acfbb+':\x20'+_0x288a75;throw this[_0x2d534f(0x3cb)][_0x2d534f(0x651)](this[_0x2d534f(0x402)]+'\x20('+this['instance'][_0x2d534f(0x808)]+_0x2d534f(0x4b7)+_0x26c95b),new x(_0x26c95b);}}async[a0_0x34b2dc(0x40d)](_0x4a69fb){const _0x267ee0=a0_0x34b2dc;try{let _0x45c11f;if((0x0,L[_0x267ee0(0x525)])(_0x4a69fb[_0x267ee0(0x539)])){let _0xed5073=new Date()[_0x267ee0(0x202)](),_0xc81db0=_0x4a69fb[_0x267ee0(0x539)]+'?timestamp='+_0xed5073;_0x45c11f=(await te['default']['get'](_0xc81db0,{'responseType':_0x267ee0(0x78c)}))['data'];}else{if((0x0,L[_0x267ee0(0x919)])(_0x4a69fb[_0x267ee0(0x539)]))_0x45c11f=Buffer[_0x267ee0(0x77b)](_0x4a69fb[_0x267ee0(0x539)],'base64');else throw new m(_0x267ee0(0x4c0));}return await this[_0x267ee0(0x45a)][_0x267ee0(0x44e)](_0x4a69fb['groupJid'],_0x45c11f),{'update':_0x267ee0(0x7fa)};}catch(_0x429a2e){let _0xaed76e=_0x267ee0(0x439),_0x42a70a=_0x429a2e instanceof Error?_0x429a2e['message']:typeof _0x429a2e==_0x267ee0(0x89b)?JSON[_0x267ee0(0x43f)](_0x429a2e):_0x429a2e,_0x32421f=_0xaed76e+':\x20'+_0x42a70a;throw this['logger'][_0x267ee0(0x651)](this['instanceName']+'\x20('+this[_0x267ee0(0x770)][_0x267ee0(0x808)]+_0x267ee0(0x4b7)+_0x32421f),new x(_0x32421f);}}},Bt=class u{constructor(_0x13e4ae,_0x2af5d0,_0x2c8298){const _0x2122d1=a0_0x34b2dc;this[_0x2122d1(0x6e3)]=_0x13e4ae,this[_0x2122d1(0x269)]=_0x2af5d0,this[_0x2122d1(0x261)]=_0x2c8298,this['db']={},this[_0x2122d1(0x360)]={},this[_0x2122d1(0x3cb)]=new $(u[_0x2122d1(0x673)]),this['waInstances']={},(this[_0x2122d1(0x214)](),this[_0x2122d1(0x741)](),Object[_0x2122d1(0x2c4)](this['db'],_0x2af5d0[_0x2122d1(0x30a)](_0x2122d1(0x25e))),Object['assign'](this[_0x2122d1(0x360)],_0x2af5d0[_0x2122d1(0x30a)](_0x2122d1(0x781))),this[_0x2122d1(0x233)]=this['db'][_0x2122d1(0x33c)]?this['repository'][_0x2122d1(0x582)]?.['db'](this['db'][_0x2122d1(0x259)][_0x2122d1(0x788)]+_0x2122d1(0x621)):void 0x0,this['cache']=this[_0x2122d1(0x360)]['ENABLED']?new ge(this[_0x2122d1(0x360)]):void 0x0);}async[a0_0x34b2dc(0x205)](_0x22b3f5){const _0xe1fe79=a0_0x34b2dc;if(_0x22b3f5&&!this[_0xe1fe79(0x67c)][_0x22b3f5])throw new J(_0xe1fe79(0x21b)+_0x22b3f5+_0xe1fe79(0x339));let _0x58ab88=[];for await(let [_0x47293c,_0x17b21f]of Object[_0xe1fe79(0x631)](this['waInstances']))if(_0x17b21f&&_0x17b21f['connectionStatus'][_0xe1fe79(0x645)]===_0xe1fe79(0x5a2)){let _0x1a6c13=await this[_0xe1fe79(0x261)]['auth'][_0xe1fe79(0x253)](_0x47293c);_0x58ab88[_0xe1fe79(0x26d)]({'instance':{'instanceName':_0x47293c,'apikey':_0x1a6c13[_0xe1fe79(0x1e7)],'owner':_0x17b21f[_0xe1fe79(0x808)],'profileName':await _0x17b21f['getProfileName']()||'not\x20loaded','profilePictureUrl':_0x17b21f[_0xe1fe79(0x51f)]}});}return _0x58ab88[_0xe1fe79(0x253)](_0x4df9ff=>_0x4df9ff[_0xe1fe79(0x770)][_0xe1fe79(0x402)]===_0x22b3f5)??_0x58ab88;}async[a0_0x34b2dc(0x3db)](_0x16e211){const _0x23b3df=a0_0x34b2dc;if(this['db'][_0x23b3df(0x33c)]&&(await this[_0x23b3df(0x261)][_0x23b3df(0x582)][_0x23b3df(0x4d6)](),(await this[_0x23b3df(0x233)]['collections']())[_0x23b3df(0x3a3)]>0x0&&await this[_0x23b3df(0x233)][_0x23b3df(0x395)](_0x16e211)),this[_0x23b3df(0x360)]['ENABLED']){this[_0x23b3df(0x48e)][_0x23b3df(0x7c7)]=_0x16e211,await this[_0x23b3df(0x48e)][_0x23b3df(0x711)]();return;}}async['loadInstance'](){const _0x1372f6=a0_0x34b2dc;await this[_0x1372f6(0x82b)]();let _0x3ae2fa=async _0x5ed286=>{const _0x313f85=_0x1372f6;let _0x342d0c=new Re(this[_0x313f85(0x269)],this[_0x313f85(0x6e3)],this[_0x313f85(0x261)]);_0x342d0c[_0x313f85(0x402)]=_0x5ed286,await _0x342d0c[_0x313f85(0x287)](),this[_0x313f85(0x67c)][_0x5ed286]=_0x342d0c;};try{if(this['redis'][_0x1372f6(0x33c)]){let _0x29cfc4=await this['cache'][_0x1372f6(0x6b5)]();_0x29cfc4?.[_0x1372f6(0x3a3)]>0x0&&_0x29cfc4[_0x1372f6(0x3f2)](async _0x20fd77=>await _0x3ae2fa(_0x20fd77[_0x1372f6(0x292)](':')[0x1]));return;}if(this['db'][_0x1372f6(0x33c)]){await this[_0x1372f6(0x261)][_0x1372f6(0x582)]['connect']();let _0xa8424d=await this[_0x1372f6(0x233)]['collections']();_0xa8424d[_0x1372f6(0x3a3)]>0x0&&_0xa8424d[_0x1372f6(0x3f2)](async _0x172379=>await _0x3ae2fa(_0x172379[_0x1372f6(0x3a6)][_0x1372f6(0x2a1)](/^[\w-]+\./,'')));return;}}catch(_0x5ce654){this[_0x1372f6(0x3cb)]['error'](_0x5ce654);}}async[a0_0x34b2dc(0x397)](){const _0x199cf9=a0_0x34b2dc;try{let _0x4ec3ec=await this['repository'][_0x199cf9(0x210)][_0x199cf9(0x489)]({'online':!0x1});for(let _0x1ad5eb of _0x4ec3ec){let _0x589e2e=_0x1ad5eb[_0x199cf9(0x2c7)];await re['removeIPv6ById'](K,_0x589e2e);}console[_0x199cf9(0x476)](_0x199cf9(0x8a0)+_0x4ec3ec[_0x199cf9(0x3a3)]);let _0x427fa9={'online':!0x1},_0x48bbce=await this[_0x199cf9(0x261)][_0x199cf9(0x210)][_0x199cf9(0x914)](_0x427fa9);console[_0x199cf9(0x476)](_0x199cf9(0x75f)+_0x48bbce['insertCount']);}catch(_0x5e2fff){console['error'](_0x199cf9(0x348),_0x5e2fff);}}async['InstancesAlterarTodas'](){const _0x3ad410=a0_0x34b2dc;try{let _0x5110e6={'online':!0x1},_0x561879={'online':!0x1,'lastDisconnect':Date[_0x3ad410(0x880)]()},_0x385ba7=await this[_0x3ad410(0x261)][_0x3ad410(0x210)]['updateAll'](_0x5110e6,_0x561879);await this[_0x3ad410(0x397)]();}catch(_0x1be0e5){console['error'](_0x3ad410(0x523),_0x1be0e5);}}['removeInstance'](){const _0x17139c=a0_0x34b2dc;this['eventEmitter']['on'](_0x17139c(0x455),async _0x39db23=>{const _0x2778bb=_0x17139c;try{this[_0x2778bb(0x67c)][_0x39db23]=void 0x0;}catch{}try{this[_0x2778bb(0x3db)](_0x39db23);}finally{this[_0x2778bb(0x3cb)]['warn'](_0x2778bb(0x21b)+_0x39db23+_0x2778bb(0x7be));}});}[a0_0x34b2dc(0x741)](){const _0x4d1d71=a0_0x34b2dc;this[_0x4d1d71(0x6e3)]['on']('no.connection',async _0x1073f8=>{const _0x311f10=_0x4d1d71;try{this[_0x311f10(0x67c)][_0x1073f8]=void 0x0;}catch{}try{this[_0x311f10(0x3db)](_0x1073f8);}finally{this[_0x311f10(0x3cb)][_0x311f10(0x41f)]('Instance\x20\x22'+_0x1073f8+_0x311f10(0x586));}});}},Wt=class extends _{[a0_0x34b2dc(0x841)](_0x5da97c){return aa(_0x5da97c);}async[a0_0x34b2dc(0x6c0)](_0x44293a){const _0x2c9cd7=a0_0x34b2dc;if(_0x44293a[_0x2c9cd7(0x3a3)]!==0x0)try{return{'insertCount':(await this[_0x2c9cd7(0x841)](_0x44293a[0x0][_0x2c9cd7(0x56c)])[_0x2c9cd7(0x726)]([..._0x44293a]))[_0x2c9cd7(0x3a3)]};}catch(_0x10c1cc){return _0x10c1cc;}}async[a0_0x34b2dc(0x253)](_0x56853b,_0x2394e1){const _0x2e2598=a0_0x34b2dc;try{let _0x3ab38d=this[_0x2e2598(0x841)](_0x2394e1),_0x473a56=A(_0x56853b[_0x2e2598(0x349)]);return await _0x3ab38d[_0x2e2598(0x253)](_0x473a56)['sort']({'lastmsg':-0x1})[_0x2e2598(0x216)](_0x56853b?.[_0x2e2598(0x216)]??0x0)[_0x2e2598(0x56f)]();}catch{return[];}}async[a0_0x34b2dc(0x86d)](_0x3d0c32,_0x590a10){const _0x4f5d80=a0_0x34b2dc;try{let _0x5bf291=this[_0x4f5d80(0x841)](_0x590a10),_0x36196b=A(_0x3d0c32[_0x4f5d80(0x349)]);return _0x36196b['groupdata.participants']={'$ne':[]},await _0x5bf291[_0x4f5d80(0x253)](_0x36196b)[_0x4f5d80(0x289)]({'lastmsg':-0x1})['limit'](_0x3d0c32?.['limit']??0x0)[_0x4f5d80(0x56f)]();}catch{return[];}}async[a0_0x34b2dc(0x366)](_0x2815c0,_0x6b409a){const _0x5c41d7=a0_0x34b2dc;try{return{'deletedCount':(await this[_0x5c41d7(0x841)](_0x6b409a)['deleteMany']({..._0x2815c0['where']}))['deletedCount']};}catch(_0x1f2fa2){return{'error':_0x1f2fa2?.[_0x5c41d7(0x1fe)]()};}}async[a0_0x34b2dc(0x515)](_0x7dde0a,_0x5a879e){const _0x29279e=a0_0x34b2dc;try{return await this[_0x29279e(0x841)](_0x5a879e)['deleteMany']({..._0x7dde0a['where']}),[];}catch(_0x59e158){return{'error':_0x59e158?.[_0x29279e(0x1fe)]()};}}async[a0_0x34b2dc(0x440)](_0x59b212,_0x16fac8){const _0x10e247=a0_0x34b2dc;try{let _0x4d38e2=this[_0x10e247(0x841)](_0x16fac8),_0x1f0cbd=A(_0x59b212[_0x10e247(0x349)]);return await _0x4d38e2[_0x10e247(0x440)](_0x1f0cbd)[_0x10e247(0x56f)]();}catch{return null;}}async[a0_0x34b2dc(0x6ce)](_0x14477e,_0x5f2049,_0x36f9be,_0x1e9e22,_0x77a695=a0_0x34b2dc(0x434)){const _0x1f76fa=a0_0x34b2dc;try{let _0x55c269={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x1e9e22},_0x46f67c=this[_0x1f76fa(0x841)](_0x36f9be),_0x3de3ab=A(_0x14477e[_0x1f76fa(0x349)]);Object[_0x1f76fa(0x37c)](_0x5f2049)[_0x1f76fa(0x3f2)](_0x1d44d3=>{_0x5f2049[_0x1d44d3]==null&&delete _0x5f2049[_0x1d44d3];});let _0x1d8c83={};return _0x1d8c83[_0x77a695]=_0x5f2049,await _0x46f67c[_0x1f76fa(0x753)](_0x3de3ab,_0x1d8c83,_0x55c269);}catch(_0x14f475){return console['error'](_0x14f475),null;}}async['updateMany'](_0x5e73ad){const _0x3e63a2=a0_0x34b2dc;try{let _0x130e0a=this[_0x3e63a2(0x841)](_0x5e73ad[0x0][_0x3e63a2(0x783)][_0x3e63a2(0x349)][_0x3e63a2(0x56c)]),_0x5cb8ea=_0x5e73ad[_0x3e63a2(0x790)](_0x125764=>({'updateOne':{'filter':{..._0x125764[_0x3e63a2(0x783)][_0x3e63a2(0x349)]},'update':{'$set':_0x125764[_0x3e63a2(0x78f)]},'upsert':!0x0}})),_0x2c6249=await _0x130e0a[_0x3e63a2(0x7b3)](_0x5cb8ea);return _0x2c6249['modifiedCount']+_0x2c6249[_0x3e63a2(0x79e)];}catch(_0x5aeef1){return console[_0x3e63a2(0x651)](_0x5aeef1),0x0;}}async[a0_0x34b2dc(0x39a)](_0x294a62){const _0x27dc39=a0_0x34b2dc;try{let _0x2c9902={'group_isCommunity':'','group_announce':'','group_size':''},_0x2b10cd={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x2a8a82={'$unset':_0x2c9902};return(await this[_0x27dc39(0x841)](_0x294a62)[_0x27dc39(0x1f7)](_0x2b10cd,_0x2a8a82))[_0x27dc39(0x32d)];}catch(_0x4e30f5){return console['error']('Error\x20removing\x20unused\x20chat\x20fields:',_0x4e30f5),0x0;}}async['updateMissingEtiquetas'](_0x2ab23e){const _0x45ede6=a0_0x34b2dc;try{let _0x43d949=this[_0x45ede6(0x841)](_0x2ab23e),_0x2e2cf9={'leadInfo.etiquetas':{'$exists':!0x1}},_0x1451e8={'$set':{'leadInfo.etiquetas':[]}};return(await _0x43d949[_0x45ede6(0x1f7)](_0x2e2cf9,_0x1451e8))[_0x45ede6(0x32d)];}catch(_0x2054f2){return console[_0x45ede6(0x651)](_0x2054f2),0x0;}}async[a0_0x34b2dc(0x58b)](_0x45e2e0){const _0x3c0837=a0_0x34b2dc;try{let _0x5b2193=this['getChatModelForOwner'](_0x45e2e0),_0x35c69={'leadInfo.tags':{'$exists':!0x1}},_0x142c62={'$set':{'leadInfo.tags':[]}};return(await _0x5b2193[_0x3c0837(0x1f7)](_0x35c69,_0x142c62))['modifiedCount'];}catch(_0x129325){return console[_0x3c0837(0x651)](_0x129325),0x0;}}async[a0_0x34b2dc(0x271)](_0x33f8a4){const _0x3eeafd=a0_0x34b2dc;try{let _0xa9e540=this['getChatModelForOwner'](_0x33f8a4),_0x256183={'leadInfo.customFields':{'$exists':!0x1}},_0x1d62b8={'$set':{'leadInfo.customFields':[]}};return(await _0xa9e540[_0x3eeafd(0x1f7)](_0x256183,_0x1d62b8))[_0x3eeafd(0x32d)];}catch(_0xa1b9f5){return console[_0x3eeafd(0x651)](_0xa1b9f5),0x0;}}async[a0_0x34b2dc(0x726)](_0x569bd5,_0x3e11af){const _0xd2ff7b=a0_0x34b2dc;if(!Array[_0xd2ff7b(0x6fa)](_0x569bd5)||_0x569bd5[_0xd2ff7b(0x3a3)]===0x0)throw new Error(_0xd2ff7b(0x38f));try{return(await this[_0xd2ff7b(0x841)](_0x3e11af)[_0xd2ff7b(0x726)](_0x569bd5))[_0xd2ff7b(0x3a3)];}catch(_0x523517){throw console[_0xd2ff7b(0x651)](_0xd2ff7b(0x63f),_0x523517),_0x523517;}}async['deleteChat'](_0x23694a,_0x15b653){const _0x495642=a0_0x34b2dc;try{await this[_0x495642(0x841)](_0x15b653)[_0x495642(0x907)]({'_id':_0x23694a});}catch(_0x419996){throw console[_0x495642(0x651)](_0x495642(0x3a1),_0x419996),_0x419996;}}},zt=class extends _{constructor(_0x44bbdc,_0x3a8332,_0x3b49eb){const _0x43a833=a0_0x34b2dc;super(_0x3a8332),this['cacheContactModel']=_0x44bbdc,this[_0x43a833(0x269)]=_0x3a8332,this[_0x43a833(0x2cf)]=_0x3b49eb;}async[a0_0x34b2dc(0x6c0)](_0x5ea635){const _0x1528a4=a0_0x34b2dc;if(_0x5ea635['length']!==0x0)try{return{'insertCount':(await this[_0x1528a4(0x53b)]['insertMany']([..._0x5ea635]))[_0x1528a4(0x3a3)]};}catch(_0x6350af){return _0x6350af;}}async['update'](_0xe647b,_0x20e39c){const _0x4c9c8d=a0_0x34b2dc;try{let _0x1c8973=A(_0xe647b[_0x4c9c8d(0x349)]);return{'updatedCount':(await this['cacheContactModel'][_0x4c9c8d(0x1f7)](_0x1c8973,{'$set':_0x20e39c}))[_0x4c9c8d(0x32d)]};}catch(_0x2d6079){return console['error'](_0x4c9c8d(0x4b6),_0x2d6079),{'error':_0x2d6079['toString']()};}}async[a0_0x34b2dc(0x839)](_0x22d3db){const _0x122371=a0_0x34b2dc;try{let _0x24c46d={'_id':{'$in':_0x22d3db}};return await this['cacheContactModel'][_0x122371(0x253)](_0x24c46d)['lean']();}catch(_0x3617f7){return console[_0x122371(0x651)]('Error\x20finding\x20many\x20contacts:',_0x3617f7),[];}}async[a0_0x34b2dc(0x366)](_0x143d14){const _0x35c5f0=a0_0x34b2dc;try{return{'deletedCount':(await this['cacheContactModel'][_0x35c5f0(0x914)]({..._0x143d14['where']}))[_0x35c5f0(0x35c)]};}catch(_0xe7ddb4){return{'error':_0xe7ddb4?.['toString']()};}}async[a0_0x34b2dc(0x253)](_0x23eab0){const _0x393ec1=a0_0x34b2dc;try{let _0x6d6c53=A(_0x23eab0[_0x393ec1(0x349)]);return await this['cacheContactModel'][_0x393ec1(0x253)](_0x6d6c53)[_0x393ec1(0x216)](_0x23eab0?.[_0x393ec1(0x216)]??0x0)[_0x393ec1(0x56f)]();}catch{return[];}}async[a0_0x34b2dc(0x440)](_0x4146c1){const _0xacda5=a0_0x34b2dc;try{let _0x4b4584=A(_0x4146c1[_0xacda5(0x349)]);return await this[_0xacda5(0x53b)][_0xacda5(0x440)](_0x4b4584)[_0xacda5(0x56f)]();}catch{return null;}}},Ht=class extends _{['getLabelModelForOwner'](_0x58cf86){return Na(_0x58cf86);}async['updateOne'](_0x4dee28,_0x18aef8,_0x15c000,_0x2f5023){const _0x327897=a0_0x34b2dc;try{let _0x1b5cef={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x2f5023},_0x2cfb5e=this[_0x327897(0x48f)](_0x15c000),_0x9712de=A(_0x4dee28[_0x327897(0x349)]);return await _0x2cfb5e[_0x327897(0x753)](_0x9712de,{'$set':_0x18aef8},_0x1b5cef);}catch(_0x3f966f){return console[_0x327897(0x651)](_0x3f966f),null;}}async[a0_0x34b2dc(0x253)](_0x1c33ce,_0x287524){const _0x53c67f=a0_0x34b2dc;try{let _0x4b2002=this[_0x53c67f(0x48f)](_0x287524),_0x294c40=A(_0x1c33ce[_0x53c67f(0x349)]);return await _0x4b2002[_0x53c67f(0x253)](_0x294c40);}catch(_0x4a9eda){console[_0x53c67f(0x651)](_0x4a9eda);}}async['delete'](_0x40f2f9,_0x2ad728){const _0x48f22d=a0_0x34b2dc;try{let _0x54fd89=this[_0x48f22d(0x48f)](_0x2ad728),_0x323e27=A(_0x40f2f9[_0x48f22d(0x349)]);await _0x54fd89[_0x48f22d(0x914)](_0x323e27);}catch(_0xd16d1c){console['error'](_0xd16d1c);}}async[a0_0x34b2dc(0x515)](_0x45a244){const _0x128cd6=a0_0x34b2dc;try{return await this[_0x128cd6(0x48f)](_0x45a244)['collection'][_0x128cd6(0x8b5)](),{'success':!0x0};}catch(_0x42b643){return console[_0x128cd6(0x651)](_0x42b643),{'success':!0x1,'error':_0x42b643};}}},Kt=class{constructor(_0x55b0e7){const _0xff0d20=a0_0x34b2dc;this[_0xff0d20(0x7bb)]=_0x55b0e7;}async[a0_0x34b2dc(0x521)]({instanceName:_0x1373f2},_0x2348a6){const _0x62a661=a0_0x34b2dc;return await this['waMonitor'][_0x62a661(0x67c)][_0x1373f2]['editChat'](_0x2348a6);}async[a0_0x34b2dc(0x70c)]({instanceName:_0x38286},_0x19b97e){const _0x25ad4e=a0_0x34b2dc;return await this['waMonitor'][_0x25ad4e(0x67c)][_0x38286]['whatsappNumber'](_0x19b97e);}async[a0_0x34b2dc(0x650)]({instanceName:_0x196765},_0xdfc04e){const _0x54469b=a0_0x34b2dc;return await this[_0x54469b(0x7bb)][_0x54469b(0x67c)][_0x196765]['importChats'](_0xdfc04e);}async[a0_0x34b2dc(0x93b)]({instanceName:_0x3a7aa1},_0x508b4f){const _0x50308f=a0_0x34b2dc;return await this[_0x50308f(0x7bb)]['waInstances'][_0x3a7aa1][_0x50308f(0x83f)](_0x508b4f);}async[a0_0x34b2dc(0x229)]({instanceName:_0x8fdd41},_0x1b86ef){return await this['waMonitor']['waInstances'][_0x8fdd41]['archiveChat'](_0x1b86ef);}async[a0_0x34b2dc(0x2e1)]({instanceName:_0x423151},_0x5141ab){const _0x507d58=a0_0x34b2dc;return await this[_0x507d58(0x7bb)][_0x507d58(0x67c)][_0x423151][_0x507d58(0x2e1)](_0x5141ab);}async[a0_0x34b2dc(0x49d)]({instanceName:_0x1655f0},_0x3f6384){const _0x3b17da=a0_0x34b2dc;return await this[_0x3b17da(0x7bb)][_0x3b17da(0x67c)][_0x1655f0][_0x3b17da(0x6c7)](_0x3f6384[_0x3b17da(0x51e)]);}async[a0_0x34b2dc(0x602)]({instanceName:_0x1ccd2f},_0x4c96f7){const _0x489ae4=a0_0x34b2dc;return await this[_0x489ae4(0x7bb)][_0x489ae4(0x67c)][_0x1ccd2f]['fetchProfile'](_0x4c96f7[_0x489ae4(0x51e)]);}async[a0_0x34b2dc(0x25d)]({instanceName:_0x5c20d6},_0x4d5b29){const _0x4151b4=a0_0x34b2dc;return await this[_0x4151b4(0x7bb)]['waInstances'][_0x5c20d6][_0x4151b4(0x25d)](_0x4d5b29);}async[a0_0x34b2dc(0x2ec)]({instanceName:_0x11c417},_0x46ad1c){const _0x1b6866=a0_0x34b2dc;return await this[_0x1b6866(0x7bb)][_0x1b6866(0x67c)][_0x11c417][_0x1b6866(0x2ec)](_0x46ad1c);}async[a0_0x34b2dc(0x771)]({instanceName:_0x56e1a7},_0x4c3f6b){const _0x3a0763=a0_0x34b2dc;return await this[_0x3a0763(0x7bb)][_0x3a0763(0x67c)][_0x56e1a7][_0x3a0763(0x771)](_0x4c3f6b);}async[a0_0x34b2dc(0x647)]({instanceName:_0x11194c},_0x1a45fa){const _0x3cfc1f=a0_0x34b2dc;return await this[_0x3cfc1f(0x7bb)]['waInstances'][_0x11194c][_0x3cfc1f(0x647)](_0x1a45fa);}async[a0_0x34b2dc(0x8d8)]({instanceName:_0x54a9ff}){const _0x56ecd6=a0_0x34b2dc;return await this['waMonitor'][_0x56ecd6(0x67c)][_0x54a9ff]['fetchLabels']();}async[a0_0x34b2dc(0x394)]({instanceName:_0x118108}){const _0x1af055=a0_0x34b2dc;return await this['waMonitor'][_0x1af055(0x67c)][_0x118108][_0x1af055(0x394)]();}async[a0_0x34b2dc(0x902)]({instanceName:_0x4cd8af}){const _0x23812c=a0_0x34b2dc;return await this[_0x23812c(0x7bb)]['waInstances'][_0x4cd8af][_0x23812c(0x902)]();}async[a0_0x34b2dc(0x54b)]({instanceName:_0xd8b91a},_0x1476ad){const _0x5ad46f=a0_0x34b2dc;return await this[_0x5ad46f(0x7bb)][_0x5ad46f(0x67c)][_0xd8b91a][_0x5ad46f(0x54b)](_0x1476ad);}async['fetchBusinessProfile']({instanceName:_0x2697cd},_0x28a847){const _0x3dd8c1=a0_0x34b2dc;return await this[_0x3dd8c1(0x7bb)][_0x3dd8c1(0x67c)][_0x2697cd]['fetchBusinessProfile'](_0x28a847[_0x3dd8c1(0x51e)]);}async[a0_0x34b2dc(0x519)]({instanceName:_0x291d04},_0x549b07){const _0x40e034=a0_0x34b2dc;return await this['waMonitor'][_0x40e034(0x67c)][_0x291d04]['updateProfileName'](_0x549b07['name']);}async['updateProfileStatus']({instanceName:_0x2186be},_0x3c4e46){const _0x2d3af4=a0_0x34b2dc;return await this['waMonitor'][_0x2d3af4(0x67c)][_0x2186be][_0x2d3af4(0x31b)](_0x3c4e46['status']);}async['updateProfilePicture']({instanceName:_0x4a6156},_0xda3186){const _0x38bf3e=a0_0x34b2dc;return await this[_0x38bf3e(0x7bb)][_0x38bf3e(0x67c)][_0x4a6156][_0x38bf3e(0x44e)](_0xda3186['picture']);}async['removeProfilePicture']({instanceName:_0x511538},_0x19f515){const _0x2c411c=a0_0x34b2dc;return await this['waMonitor'][_0x2c411c(0x67c)][_0x511538][_0x2c411c(0x51d)]();}},Qt=require(a0_0x34b2dc(0x7a9)),Yt=class u{constructor(_0x400552,_0x40c8b2,_0x353d5c,_0x33906a,_0x230dfd){const _0x13699a=a0_0x34b2dc;this['waMonitor']=_0x400552,this[_0x13699a(0x269)]=_0x40c8b2,this['repository']=_0x353d5c,this['eventEmitter']=_0x33906a,this[_0x13699a(0x75a)]=_0x230dfd,this['logger']=new $(u['name']);}async[a0_0x34b2dc(0x5b2)]({instanceName:_0x109f33,apikey:_0x2c5298,number:_0x2bb1d2,proxy:_0x4c0474=!0x0}){const _0x4bdeb4=a0_0x34b2dc;try{let _0x5e4198=new Re(this[_0x4bdeb4(0x269)],this['eventEmitter'],this[_0x4bdeb4(0x261)]);_0x5e4198[_0x4bdeb4(0x402)]=_0x109f33,this[_0x4bdeb4(0x7bb)]['waInstances'][_0x5e4198[_0x4bdeb4(0x402)]]=_0x5e4198;let _0x1d68b7={};_0x2c5298?(await this[_0x4bdeb4(0x261)][_0x4bdeb4(0x210)][_0x4bdeb4(0x663)]({'apikey':_0x2c5298},_0x109f33),_0x1d68b7[_0x4bdeb4(0x1e7)]=_0x2c5298):_0x1d68b7=await this[_0x4bdeb4(0x75a)][_0x4bdeb4(0x6ed)]({'instanceName':_0x5e4198[_0x4bdeb4(0x402)]});let _0x1d1774;if(_0x2bb1d2){if(_0x1d1774=await this['verifyWhatsAppNumber'](_0x2bb1d2),_0x1d1774[_0x4bdeb4(0x651)])throw new x(_0x1d1774[_0x4bdeb4(0x651)][_0x4bdeb4(0x1fe)]());_0x2bb1d2=_0x1d1774[_0x4bdeb4(0x51e)];}let _0x537a8a;return await _0x5e4198['connectToWhatsapp'](_0x2bb1d2),await(0x0,Qt[_0x4bdeb4(0x6db)])(0xfa0),_0x2bb1d2&&await(0x0,Qt[_0x4bdeb4(0x6db)])(0xbb8),_0x537a8a=_0x5e4198[_0x4bdeb4(0x93c)],{'instance':{'instanceName':_0x5e4198['instanceName'],'status':_0x4bdeb4(0x8a4)},'hash':_0x1d68b7,'qrcode':_0x537a8a};}catch(_0x43eb23){throw this[_0x4bdeb4(0x3cb)]['error'](_0x43eb23),_0x43eb23;}}async[a0_0x34b2dc(0x391)]({instanceName:_0x1e04de,number:_0x465412=null}){const _0x53428e=a0_0x34b2dc;try{let _0x4e5ee3=this['waMonitor'][_0x53428e(0x67c)][_0x1e04de];switch(_0x4e5ee3?.[_0x53428e(0x38c)]?.[_0x53428e(0x645)]){case'close':return await _0x4e5ee3['connectToWhatsapp'](_0x465412),await(0x0,Qt[_0x53428e(0x6db)])(0x7d0),_0x4e5ee3[_0x53428e(0x93c)];case _0x53428e(0x38a):return _0x4e5ee3[_0x53428e(0x93c)];default:return await this[_0x53428e(0x91b)]({'instanceName':_0x1e04de});}}catch(_0x51a6e5){this[_0x53428e(0x3cb)][_0x53428e(0x476)](_0x51a6e5);}}async[a0_0x34b2dc(0x91b)]({instanceName:_0x4ee62d}){const _0x262fee=a0_0x34b2dc;let _0x326fa=this[_0x262fee(0x7bb)][_0x262fee(0x67c)][_0x4ee62d]['connectionStatus'],_0x1647c8=null;_0x326fa[_0x262fee(0x645)]===_0x262fee(0x5a2)&&_0x4ee62d&&(_0x1647c8=await this[_0x262fee(0x7bb)][_0x262fee(0x205)](_0x4ee62d));let _0x3f2fef=null;return _0x326fa[_0x262fee(0x645)]===_0x262fee(0x38a)&&_0x4ee62d&&(_0x3f2fef=this['waMonitor'][_0x262fee(0x67c)][_0x4ee62d]['qrCode']),{'instance':_0x4ee62d,'connectionStatus':_0x326fa,'instanceInfo':_0x1647c8,'qrcode':_0x3f2fef};}async[a0_0x34b2dc(0x594)](_0x29508a){const _0x3012b4=a0_0x34b2dc;_0x29508a=_0x29508a[_0x3012b4(0x2a1)](/\D/g,'');let _0x3b500b=Object[_0x3012b4(0x37c)](this[_0x3012b4(0x7bb)][_0x3012b4(0x67c)])[_0x3012b4(0x334)](_0xc11d90=>{const _0x24be52=_0x3012b4;let _0x26affe=this[_0x24be52(0x7bb)]['waInstances'][_0xc11d90];return _0x26affe&&_0x26affe[_0x24be52(0x38c)]&&_0x26affe['connectionStatus']['state']==='open';});if(_0x3b500b[_0x3012b4(0x3a3)]===0x0)return{'number':this[_0x3012b4(0x8f2)](_0x29508a)};let _0xb9ad2e=Math['floor'](Math[_0x3012b4(0x2e7)]()*_0x3b500b[_0x3012b4(0x3a3)]),_0x2100c6=_0x3b500b[_0xb9ad2e];try{let _0x237356=(await this[_0x3012b4(0x7bb)][_0x3012b4(0x67c)][_0x2100c6][_0x3012b4(0x70c)]({'numbers':[_0x29508a]}))[_0x3012b4(0x495)]();return _0x237356[_0x3012b4(0x22e)]?{'number':_0x237356['jid']['replace'](_0x3012b4(0x831),'')}:{'number':_0x29508a,'error':_0x3012b4(0x888)};}catch(_0x1e92e6){return this[_0x3012b4(0x3cb)][_0x3012b4(0x651)](_0x3012b4(0x368)+_0x1e92e6),{'number':_0x29508a,'error':'Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.'};}}['formatBRNumber'](_0x892e27){const _0x2f3240=a0_0x34b2dc;let _0x19bacb=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x2f3240(0x454)](_0x892e27);if(_0x19bacb&&_0x19bacb[0x1]==='55'){let _0x5061f0=_0x19bacb[0x2],_0x1f7cde=_0x19bacb[0x3],_0x23a817=_0x19bacb[0x4];if(parseInt(_0x5061f0)>=0x1f&&_0x1f7cde==='9')return _0x19bacb[0x1]+_0x5061f0+_0x23a817;}return _0x892e27;}async['restartInstance']({instanceName:_0x479cc4}){const _0x495d85=a0_0x34b2dc;try{return this[_0x495d85(0x7bb)][_0x495d85(0x67c)][_0x479cc4]?.[_0x495d85(0x45a)]?.['ws']?.['close'](),{'status':_0x495d85(0x8af),'error':!0x1,'response':{'message':_0x495d85(0x418)}};}catch(_0x4c7bbf){this[_0x495d85(0x3cb)]['error'](_0x4c7bbf);}}async[a0_0x34b2dc(0x413)]({instanceName:_0x27d101}){const _0x432b62=a0_0x34b2dc;return _0x27d101?this['waMonitor'][_0x432b62(0x205)](_0x27d101):this[_0x432b62(0x7bb)][_0x432b62(0x205)]();}async[a0_0x34b2dc(0x255)]({instanceName:_0x575a84}){const _0x1a051c=a0_0x34b2dc;try{return await this[_0x1a051c(0x7bb)][_0x1a051c(0x67c)][_0x575a84]?.[_0x1a051c(0x45a)]?.['logout'](_0x1a051c(0x53d)+_0x575a84),{'error':!0x1,'message':'Instance\x20logged\x20out'};}catch(_0x19a517){throw new x(_0x19a517['toString']());}}async[a0_0x34b2dc(0x4e4)]({instanceName:_0x39bb0e}){const _0x24288a=a0_0x34b2dc;if((await this[_0x24288a(0x91b)]({'instanceName':_0x39bb0e}))[_0x24288a(0x38c)][_0x24288a(0x645)]==='open')throw new m([_0x24288a(0x425),_0x24288a(0x910)]);try{return delete this[_0x24288a(0x7bb)]['waInstances'][_0x39bb0e],{'error':!0x1,'message':_0x24288a(0x323)};}catch(_0x3913f8){throw new m(_0x3913f8[_0x24288a(0x1fe)]());}}},ne=require(a0_0x34b2dc(0x7a7)),Xt=class{constructor(_0x1a9f6b){this['waMonitor']=_0x1a9f6b;}async['sendText']({instanceName:_0x279bde},_0x227bfa){const _0x2e7d22=a0_0x34b2dc;return await this[_0x2e7d22(0x7bb)][_0x2e7d22(0x67c)][_0x279bde][_0x2e7d22(0x876)](_0x227bfa);}async[a0_0x34b2dc(0x7c6)]({instanceName:_0x497e65},_0x2ebaa0){const _0x4a39eb=a0_0x34b2dc;return await this['waMonitor'][_0x4a39eb(0x67c)][_0x497e65][_0x4a39eb(0x444)](_0x2ebaa0);}async[a0_0x34b2dc(0x52c)]({instanceName:_0xb78b1},_0x232c2a){const _0x2127f8=a0_0x34b2dc;if((0x0,ne[_0x2127f8(0x919)])(_0x232c2a?.[_0x2127f8(0x80a)]?.[_0x2127f8(0x4c8)])&&!_0x232c2a?.['mediaMessage']?.[_0x2127f8(0x685)])throw new m(_0x2127f8(0x76b));if((0x0,ne[_0x2127f8(0x525)])(_0x232c2a?.[_0x2127f8(0x80a)]?.[_0x2127f8(0x4c8)])||(0x0,ne[_0x2127f8(0x919)])(_0x232c2a?.[_0x2127f8(0x80a)]?.[_0x2127f8(0x4c8)]))return await this[_0x2127f8(0x7bb)][_0x2127f8(0x67c)][_0xb78b1]['mediaMessage'](_0x232c2a);throw new m(_0x2127f8(0x399));}async['sendSticker']({instanceName:_0x5f4d9d},_0x3fc2d7){const _0x18f9ac=a0_0x34b2dc;if((0x0,ne[_0x18f9ac(0x525)])(_0x3fc2d7[_0x18f9ac(0x551)][_0x18f9ac(0x539)])||(0x0,ne['isBase64'])(_0x3fc2d7[_0x18f9ac(0x551)][_0x18f9ac(0x539)]))return await this[_0x18f9ac(0x7bb)]['waInstances'][_0x5f4d9d]['mediaSticker'](_0x3fc2d7);throw new m(_0x18f9ac(0x399));}async[a0_0x34b2dc(0x8f3)]({instanceName:_0x502c51},_0x3f3de5){const _0x5b2428=a0_0x34b2dc;if((0x0,ne['isURL'])(_0x3f3de5[_0x5b2428(0x82a)][_0x5b2428(0x389)])||(0x0,ne[_0x5b2428(0x919)])(_0x3f3de5[_0x5b2428(0x82a)][_0x5b2428(0x389)]))return await this[_0x5b2428(0x7bb)][_0x5b2428(0x67c)][_0x502c51][_0x5b2428(0x383)](_0x3f3de5);throw new m(_0x5b2428(0x399));}async[a0_0x34b2dc(0x77d)]({instanceName:_0x18993c},_0x4497b7){const _0x3c0eaf=a0_0x34b2dc;if((0x0,ne[_0x3c0eaf(0x919)])(_0x4497b7['buttonMessage'][_0x3c0eaf(0x80a)]?.['media'])&&!_0x4497b7[_0x3c0eaf(0x375)]['mediaMessage']?.['fileName'])throw new m('For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.');return await this[_0x3c0eaf(0x7bb)][_0x3c0eaf(0x67c)][_0x18993c]['buttonMessage'](_0x4497b7);}async[a0_0x34b2dc(0x53e)]({instanceName:_0x3698cd},_0x26aabd){const _0x23b1d8=a0_0x34b2dc;return await this[_0x23b1d8(0x7bb)][_0x23b1d8(0x67c)][_0x3698cd][_0x23b1d8(0x8bb)](_0x26aabd);}async[a0_0x34b2dc(0x34f)]({instanceName:_0x1c493e},_0x5ae300){const _0x2b16fb=a0_0x34b2dc;return await this[_0x2b16fb(0x7bb)][_0x2b16fb(0x67c)][_0x1c493e]['pollMessage'](_0x5ae300);}async['sendList']({instanceName:_0x5043e1},_0x47239a){const _0x42a688=a0_0x34b2dc;return await this[_0x42a688(0x7bb)][_0x42a688(0x67c)][_0x5043e1][_0x42a688(0x680)](_0x47239a);}async['sendContact']({instanceName:_0x289cc1},_0x5af9d8){const _0x46e582=a0_0x34b2dc;return await this[_0x46e582(0x7bb)][_0x46e582(0x67c)][_0x289cc1]['contactMessage'](_0x5af9d8);}async[a0_0x34b2dc(0x67d)]({instanceName:_0x2901f},_0x3b4d31){const _0x192a69=a0_0x34b2dc;if(!_0x3b4d31['reactionMessage'][_0x192a69(0x632)][_0x192a69(0x52f)](/[^\(\)\w\sà-ú"-\+]+/))throw new m(_0x192a69(0x6a5));return await this[_0x192a69(0x7bb)][_0x192a69(0x67c)][_0x2901f][_0x192a69(0x617)](_0x3b4d31);}async[a0_0x34b2dc(0x700)]({instanceName:_0x390738},_0x5a4ff9){const _0x46200b=a0_0x34b2dc;return await this[_0x46200b(0x7bb)]['waInstances'][_0x390738][_0x46200b(0x6fd)](_0x5a4ff9);}},Li=require(a0_0x34b2dc(0x88e)),js=require(a0_0x34b2dc(0x28b)),Zt=class u{constructor(_0x11aec1,_0x18270a,_0x1ac12d){const _0x3732a2=a0_0x34b2dc;this[_0x3732a2(0x269)]=_0x11aec1,this[_0x3732a2(0x7bb)]=_0x18270a,this['repository']=_0x1ac12d,this[_0x3732a2(0x3cb)]=new $(u[_0x3732a2(0x673)]);}async[a0_0x34b2dc(0x2b1)](_0x320fa9){const _0x2362a2=a0_0x34b2dc;let _0x286bd4=this['configService'][_0x2362a2(0x30a)](_0x2362a2(0x4d0))['JWT'],_0x2cf212=(0x0,Li[_0x2362a2(0x920)])({'instanceName':_0x320fa9[_0x2362a2(0x402)],'apiName':nt,'tokenId':(0x0,js['v4'])()},_0x286bd4[_0x2362a2(0x777)],{'expiresIn':_0x286bd4[_0x2362a2(0x504)],'encoding':_0x2362a2(0x614),'subject':'g-t'}),_0x14a120=await this[_0x2362a2(0x261)]['auth'][_0x2362a2(0x663)]({'jwt':_0x2cf212},_0x320fa9[_0x2362a2(0x402)]);if(_0x14a120['error'])throw this[_0x2362a2(0x3cb)][_0x2362a2(0x651)]({'localError':u[_0x2362a2(0x673)]+_0x2362a2(0x5db),'error':_0x14a120[_0x2362a2(0x651)]}),new m(_0x2362a2(0x6c2),_0x14a120[_0x2362a2(0x651)]?.[_0x2362a2(0x1fe)]());return{'jwt':_0x2cf212};}async[a0_0x34b2dc(0x1e7)](_0x476290){const _0x54306c=a0_0x34b2dc;let _0x190583=(0x0,js['v4'])()['toUpperCase'](),_0x10cda4=await this[_0x54306c(0x261)]['auth']['create']({'apikey':_0x190583},_0x476290[_0x54306c(0x402)]);if(_0x10cda4[_0x54306c(0x651)])throw this[_0x54306c(0x3cb)][_0x54306c(0x651)]({'localError':u['name']+_0x54306c(0x5db),'error':_0x10cda4[_0x54306c(0x651)]}),new m(_0x54306c(0x6c2),_0x10cda4[_0x54306c(0x651)]?.['toString']());return{'apikey':_0x190583};}async[a0_0x34b2dc(0x6ed)](_0x11d40d){const _0x5cc5db=a0_0x34b2dc;let _0x1175cd=this[_0x5cc5db(0x269)][_0x5cc5db(0x30a)]('AUTHENTICATION');return await this[_0x1175cd['TYPE']](_0x11d40d);}},es=class{constructor(_0x32845a){const _0x10ca79=a0_0x34b2dc;this[_0x10ca79(0x7bb)]=_0x32845a;}async[a0_0x34b2dc(0x916)](_0x388b82,_0x5cfd58){const _0x174ccc=a0_0x34b2dc;return await this[_0x174ccc(0x7bb)][_0x174ccc(0x67c)][_0x388b82['instanceName']][_0x174ccc(0x916)](_0x5cfd58);}async[a0_0x34b2dc(0x40d)](_0x14ca63,_0x5e5965){const _0xa147cd=a0_0x34b2dc;return await this['waMonitor'][_0xa147cd(0x67c)][_0x14ca63[_0xa147cd(0x402)]][_0xa147cd(0x40d)](_0x5e5965);}async['groupDesc'](_0x5acced,_0x519ecf){const _0x48785a=a0_0x34b2dc;return await this['waMonitor'][_0x48785a(0x67c)][_0x5acced['instanceName']][_0x48785a(0x6fe)](_0x519ecf);}async['groupName'](_0x147a09,_0x3ecab8){const _0x5614c1=a0_0x34b2dc;return await this[_0x5614c1(0x7bb)][_0x5614c1(0x67c)][_0x147a09[_0x5614c1(0x402)]][_0x5614c1(0x4c5)](_0x3ecab8);}async['groupBetterSetting'](_0x573f0d,_0x38becf){const _0x5243c5=a0_0x34b2dc;return await this['waMonitor'][_0x5243c5(0x67c)][_0x573f0d[_0x5243c5(0x402)]][_0x5243c5(0x623)](_0x38becf);}async['groupSetting'](_0x1d9b28,_0x255ca0){const _0x133e5c=a0_0x34b2dc;return await this[_0x133e5c(0x7bb)][_0x133e5c(0x67c)][_0x1d9b28[_0x133e5c(0x402)]][_0x133e5c(0x1e8)](_0x255ca0);}async[a0_0x34b2dc(0x40c)](_0x37fbf0,_0x3de698){const _0x51bd8c=a0_0x34b2dc;return await this['waMonitor'][_0x51bd8c(0x67c)][_0x37fbf0[_0x51bd8c(0x402)]][_0x51bd8c(0x8e5)](_0x3de698);}async['findGroups'](_0x149ed0){const _0x125f78=a0_0x34b2dc;return await this['waMonitor'][_0x125f78(0x67c)][_0x149ed0[_0x125f78(0x402)]][_0x125f78(0x32c)]();}async[a0_0x34b2dc(0x2cc)](_0x1b1ecb,_0x4f9120){const _0x54fe6b=a0_0x34b2dc;return await this[_0x54fe6b(0x7bb)][_0x54fe6b(0x67c)][_0x1b1ecb['instanceName']][_0x54fe6b(0x2cc)](_0x4f9120);}async[a0_0x34b2dc(0x596)](_0x21c7ed,_0x52bf7d){const _0xb333e5=a0_0x34b2dc;return await this[_0xb333e5(0x7bb)][_0xb333e5(0x67c)][_0x21c7ed[_0xb333e5(0x402)]][_0xb333e5(0x596)](_0x52bf7d);}async[a0_0x34b2dc(0x29b)](_0x26cc88,_0xc0b74f){const _0x3a9b11=a0_0x34b2dc;return await this[_0x3a9b11(0x7bb)]['waInstances'][_0x26cc88[_0x3a9b11(0x402)]][_0x3a9b11(0x29b)](_0xc0b74f);}async[a0_0x34b2dc(0x243)](_0x5f4447,_0x4e4683){const _0x2cd2b6=a0_0x34b2dc;return await this[_0x2cd2b6(0x7bb)]['waInstances'][_0x5f4447['instanceName']]['revokeInviteCode'](_0x4e4683);}async[a0_0x34b2dc(0x88f)](_0xf07ca4,_0x2fb066){const _0x2294f5=a0_0x34b2dc;return await this[_0x2294f5(0x7bb)][_0x2294f5(0x67c)][_0xf07ca4[_0x2294f5(0x402)]][_0x2294f5(0x88f)](_0x2fb066);}async[a0_0x34b2dc(0x7f0)](_0x257268,_0x2ac851){const _0x54f9d9=a0_0x34b2dc;return await this['waMonitor']['waInstances'][_0x257268[_0x54f9d9(0x402)]]['updateGParticipant'](_0x2ac851);}async['toggleEphemeral'](_0x54473f,_0x12a777){const _0x54c410=a0_0x34b2dc;return await this[_0x54c410(0x7bb)]['waInstances'][_0x54473f[_0x54c410(0x402)]][_0x54c410(0x6ec)](_0x12a777);}async[a0_0x34b2dc(0x597)](_0x5c60c1,_0x2012e3){const _0x3ca964=a0_0x34b2dc;return await this[_0x3ca964(0x7bb)][_0x3ca964(0x67c)][_0x5c60c1[_0x3ca964(0x402)]]['leaveGroup'](_0x2012e3);}},ts=class{constructor(_0x2dd4bf){const _0x905981=a0_0x34b2dc;this[_0x905981(0x7bb)]=_0x2dd4bf;}[a0_0x34b2dc(0x663)](_0xa5b1a2,_0x5ca27c){const _0x46b843=a0_0x34b2dc;return this[_0x46b843(0x7bb)][_0x46b843(0x67c)][_0xa5b1a2[_0x46b843(0x402)]][_0x46b843(0x625)](_0x5ca27c);}async[a0_0x34b2dc(0x253)](_0x5b628f){const _0x3dfa06=a0_0x34b2dc;try{return await this[_0x3dfa06(0x7bb)][_0x3dfa06(0x67c)][_0x5b628f[_0x3dfa06(0x402)]][_0x3dfa06(0x305)]();}catch{return{'enabled':null,'url':''};}}},Gp=new $(a0_0x34b2dc(0x3e9)),ss=class{constructor(_0x5e8ca){const _0x3887c4=a0_0x34b2dc;this[_0x3887c4(0x7bb)]=_0x5e8ca;}async[a0_0x34b2dc(0x26e)](_0xb01640,_0xc6986b){const _0x3f2660=a0_0x34b2dc;return await this[_0x3f2660(0x7bb)][_0x3f2660(0x67c)][_0xb01640[_0x3f2660(0x402)]][_0x3f2660(0x26e)](_0xc6986b);}async[a0_0x34b2dc(0x20a)](_0x1e957f){const _0x4a2d7e=a0_0x34b2dc;return await this[_0x4a2d7e(0x7bb)][_0x4a2d7e(0x67c)][_0x1e957f[_0x4a2d7e(0x402)]][_0x4a2d7e(0x20a)]();}async[a0_0x34b2dc(0x2e2)](_0x54a8f6){const _0x5d8395=a0_0x34b2dc;return await this[_0x5d8395(0x7bb)][_0x5d8395(0x67c)][_0x54a8f6['instanceName']]['deleteDoneMessages']();}async[a0_0x34b2dc(0x3fb)](_0x211ae1){const _0x59bce1=a0_0x34b2dc;return await this[_0x59bce1(0x7bb)][_0x59bce1(0x67c)][_0x211ae1[_0x59bce1(0x402)]]['getAutomateSystem']();}async['updateAgent'](_0x573155,_0x23e49e){const _0x19cbe2=a0_0x34b2dc;return await this[_0x19cbe2(0x7bb)][_0x19cbe2(0x67c)][_0x573155[_0x19cbe2(0x402)]][_0x19cbe2(0x38e)](_0x23e49e);}async[a0_0x34b2dc(0x472)](_0x5f20df,_0x16a645){const _0x1306c1=a0_0x34b2dc;return await this[_0x1306c1(0x7bb)][_0x1306c1(0x67c)][_0x5f20df[_0x1306c1(0x402)]]['updateCustomFields'](_0x16a645);}async[a0_0x34b2dc(0x429)](_0x24059a,_0xb334bd){const _0x3ab28e=a0_0x34b2dc;return await this[_0x3ab28e(0x7bb)][_0x3ab28e(0x67c)][_0x24059a[_0x3ab28e(0x402)]][_0x3ab28e(0x429)](_0xb334bd);}async[a0_0x34b2dc(0x891)](_0x4d839b,_0x13d66d){const _0x17c226=a0_0x34b2dc;return await this[_0x17c226(0x7bb)][_0x17c226(0x67c)][_0x4d839b[_0x17c226(0x402)]][_0x17c226(0x891)](_0x13d66d);}async[a0_0x34b2dc(0x693)](_0x5deb86,_0x2b81b5){const _0x12efe2=a0_0x34b2dc;return await this[_0x12efe2(0x7bb)]['waInstances'][_0x5deb86['instanceName']]['startFlow'](_0x2b81b5);}async[a0_0x34b2dc(0x69f)](_0x267aff,_0x167f89,_0x3550ad,_0x1b00d1){const _0x21b18d=a0_0x34b2dc;return await this[_0x21b18d(0x7bb)][_0x21b18d(0x67c)][_0x267aff][_0x21b18d(0x69f)](_0x167f89,_0x3550ad,_0x1b00d1);}async['getConversation'](_0x229c30,_0x4c4f7c){const _0x41b94d=a0_0x34b2dc;return await this[_0x41b94d(0x7bb)][_0x41b94d(0x67c)][_0x229c30[_0x41b94d(0x402)]][_0x41b94d(0x2d7)](_0x4c4f7c);}async['fetchConversation'](_0xd0a9e0,_0xaa261f){const _0x12598f=a0_0x34b2dc;return await this[_0x12598f(0x7bb)][_0x12598f(0x67c)][_0xd0a9e0[_0x12598f(0x402)]][_0x12598f(0x2de)](_0xaa261f);}async[a0_0x34b2dc(0x530)](_0x4ac1c1,_0x20c5b0){const _0x218f33=a0_0x34b2dc;return await this['waMonitor']['waInstances'][_0x4ac1c1[_0x218f33(0x402)]][_0x218f33(0x530)](_0x20c5b0);}async['deleteConversation'](_0x411462,_0x40e510){const _0x4ec7ae=a0_0x34b2dc;return await this[_0x4ec7ae(0x7bb)]['waInstances'][_0x411462[_0x4ec7ae(0x402)]]['deleteConversation'](_0x40e510);}async['getFlow'](_0x7e1c57,_0x2406f2){const _0x3ca6d8=a0_0x34b2dc;return await this[_0x3ca6d8(0x7bb)][_0x3ca6d8(0x67c)][_0x7e1c57[_0x3ca6d8(0x402)]][_0x3ca6d8(0x636)](_0x2406f2['_id']);}async[a0_0x34b2dc(0x68d)](_0x3fca35,_0x3cce39,_0x2e4fb8){const _0xd32254=a0_0x34b2dc;return await this['waMonitor'][_0xd32254(0x67c)][_0x3fca35[_0xd32254(0x402)]]['createFlow'](_0x3cce39,_0x2e4fb8);}async[a0_0x34b2dc(0x280)](_0x28ed98,_0x1a8569,_0x315634){const _0x2aad6b=a0_0x34b2dc;return await this[_0x2aad6b(0x7bb)][_0x2aad6b(0x67c)][_0x28ed98[_0x2aad6b(0x402)]][_0x2aad6b(0x280)](_0x1a8569,_0x315634);}async[a0_0x34b2dc(0x57e)](_0x1a2c62,_0x53a26c){const _0x327673=a0_0x34b2dc;return await this[_0x327673(0x7bb)][_0x327673(0x67c)][_0x1a2c62[_0x327673(0x402)]][_0x327673(0x57e)](_0x53a26c);}async['editFlowReply'](_0x84bc82,_0x3b7187){const _0x1f615f=a0_0x34b2dc;return await this['waMonitor']['waInstances'][_0x84bc82[_0x1f615f(0x402)]][_0x1f615f(0x5f1)](_0x3b7187);}async[a0_0x34b2dc(0x4ec)](_0x3a3ca2,_0x542e7e){const _0xa3b108=a0_0x34b2dc;return await this[_0xa3b108(0x7bb)][_0xa3b108(0x67c)][_0x3a3ca2[_0xa3b108(0x402)]]['editFlowGroup'](_0x542e7e);}async[a0_0x34b2dc(0x749)](_0x42a0cd,_0x47686a){const _0x16cc5e=a0_0x34b2dc;return await this['waMonitor'][_0x16cc5e(0x67c)][_0x42a0cd[_0x16cc5e(0x402)]]['editFlowCondition'](_0x47686a);}async[a0_0x34b2dc(0x92f)](_0x4517bd,_0x15f8b3){const _0x1938c5=a0_0x34b2dc;return await this[_0x1938c5(0x7bb)][_0x1938c5(0x67c)][_0x4517bd[_0x1938c5(0x402)]]['editFlowVaredit'](_0x15f8b3);}async[a0_0x34b2dc(0x698)](_0xfd1abb,_0x5345a0){const _0x70cb62=a0_0x34b2dc;return await this[_0x70cb62(0x7bb)][_0x70cb62(0x67c)][_0xfd1abb[_0x70cb62(0x402)]][_0x70cb62(0x698)](_0x5345a0);}async[a0_0x34b2dc(0x8c7)](_0x4586af,_0x5e4f8d){const _0x4982dc=a0_0x34b2dc;return await this[_0x4982dc(0x7bb)]['waInstances'][_0x4586af['instanceName']][_0x4982dc(0x8c7)](_0x5e4f8d);}async[a0_0x34b2dc(0x7d7)](_0x1c668d){const _0x2e7f6b=a0_0x34b2dc;return await this[_0x2e7f6b(0x7bb)][_0x2e7f6b(0x67c)][_0x1c668d[_0x2e7f6b(0x402)]][_0x2e7f6b(0x7d7)]();}},as=class{constructor(_0x3176cb){this['webhookService']=_0x3176cb;}async[a0_0x34b2dc(0x8c5)](_0x59710f,_0x1188ed){const _0x2f0059=a0_0x34b2dc;return this['webhookService'][_0x2f0059(0x663)](_0x59710f,_0x1188ed);}async[a0_0x34b2dc(0x305)](_0x4bee8c){const _0x17ff85=a0_0x34b2dc;return this['webhookService'][_0x17ff85(0x253)](_0x4bee8c);}},is=class extends _{constructor(_0xf5916d,_0x273fbd){const _0x14dca5=a0_0x34b2dc;super(_0x273fbd),this[_0x14dca5(0x460)]=_0xf5916d,this[_0x14dca5(0x269)]=_0x273fbd;}async[a0_0x34b2dc(0x663)](_0x2329be,_0x56fcf7){const _0x2f0da2=a0_0x34b2dc;try{return this[_0x2f0da2(0x43e)]['ENABLED']?{'insertCount':(await this[_0x2f0da2(0x460)]['replaceOne']({'_id':_0x56fcf7},{..._0x2329be},{'upsert':!0x0}))[_0x2f0da2(0x32d)]}:{'insertCount':0x1};}catch(_0xf4906c){return _0xf4906c;}}async[a0_0x34b2dc(0x366)](_0x51ca06){const _0x313aaa=a0_0x34b2dc;try{if(this[_0x313aaa(0x43e)][_0x313aaa(0x33c)]){await this['webhookModel'][_0x313aaa(0x907)]({'_id':_0x51ca06});return;}}catch(_0x334f08){return{'error':_0x334f08};}}async[a0_0x34b2dc(0x253)](_0x72077a){const _0x824f2=a0_0x34b2dc;try{if(this[_0x824f2(0x43e)][_0x824f2(0x33c)])return await this[_0x824f2(0x460)][_0x824f2(0x440)]({'_id':_0x72077a});}catch{return{};}}},os=class extends _{constructor(_0x4efdb0,_0x3f3c71){const _0xf5e520=a0_0x34b2dc;super(_0x3f3c71),this['authModel']=_0x4efdb0,this[_0xf5e520(0x269)]=_0x3f3c71,this[_0xf5e520(0x210)]=_0x3f3c71[_0xf5e520(0x30a)]('AUTHENTICATION');}async['create'](_0x1203c8,_0x433df1){const _0x42209e=a0_0x34b2dc;try{if(this['dbSettings'][_0x42209e(0x33c)])return{'insertCount':(await this['authModel']['updateOne']({'_id':_0x433df1},{'$set':{..._0x1203c8}},{'upsert':!0x0}))[_0x42209e(0x32d)]};}catch(_0x296c0a){return{'error':_0x296c0a};}}async[a0_0x34b2dc(0x437)](_0x2b18ee,_0x3b5cfb){const _0xd3eab6=a0_0x34b2dc;try{if(this['dbSettings'][_0xd3eab6(0x33c)])return{'insertCount':(await this['authModel'][_0xd3eab6(0x1f7)](_0x2b18ee,{'$set':_0x3b5cfb},{'upsert':!0x1}))['modifiedCount']};throw new Error(_0xd3eab6(0x66a));}catch(_0x4455d8){return{'error':_0x4455d8};}}async[a0_0x34b2dc(0x914)](_0x3b7eeb){const _0x3ec133=a0_0x34b2dc;try{if(this[_0x3ec133(0x43e)][_0x3ec133(0x33c)])return{'insertCount':(await this['authModel']['deleteMany'](_0x3b7eeb))[_0x3ec133(0x35c)]};throw new Error(_0x3ec133(0x48a));}catch(_0x29f316){return{'error':_0x29f316};}}async[a0_0x34b2dc(0x366)](_0x3447bb){const _0x2a3a0e=a0_0x34b2dc;try{if(this[_0x2a3a0e(0x43e)][_0x2a3a0e(0x33c)]){await this['authModel'][_0x2a3a0e(0x907)]({'_id':_0x3447bb});return;}}catch(_0xd789d3){return{'error':_0xd789d3};}}async['find'](_0x4df0a6){const _0x975a10=a0_0x34b2dc;try{if(this['dbSettings'][_0x975a10(0x33c)])return await this['authModel'][_0x975a10(0x440)]({'_id':_0x4df0a6});}catch{return{};}}async[a0_0x34b2dc(0x3d9)](){const _0x45fff7=a0_0x34b2dc;try{if(this[_0x45fff7(0x43e)][_0x45fff7(0x33c)])return await this['authModel'][_0x45fff7(0x253)]();}catch{return[];}}async[a0_0x34b2dc(0x489)](_0x2fb931){const _0x3a4e63=a0_0x34b2dc;try{if(this[_0x3a4e63(0x43e)][_0x3a4e63(0x33c)])return await this[_0x3a4e63(0x6c1)][_0x3a4e63(0x253)](_0x2fb931);}catch{return[];}}},rs=class extends _{async['deleteOne'](_0x3e4232){const _0x4e553c=a0_0x34b2dc;try{let _0x2496d8=A(_0x3e4232[_0x4e553c(0x349)]);return{'deletedCount':(await Ee[_0x4e553c(0x907)](_0x2496d8))[_0x4e553c(0x35c)]};}catch(_0x30e0ea){return{'error':_0x30e0ea?.[_0x4e553c(0x1fe)]()};}}async[a0_0x34b2dc(0x6ce)](_0x300638,_0x1e23c6){const _0x5ed493=a0_0x34b2dc;try{let _0x14761a=await Ee[_0x5ed493(0x3f5)](_0x300638);return _0x14761a?(Object[_0x5ed493(0x2c4)](_0x14761a,_0x1e23c6),await _0x14761a['save']()):(console[_0x5ed493(0x651)](_0x5ed493(0x624),_0x300638),null);}catch(_0x1b1cf8){return console['error'](_0x5ed493(0x3f8),_0x1b1cf8),null;}}async['createAndSave'](_0x4a98e5){const _0x3afa02=a0_0x34b2dc;try{return await new Ee(_0x4a98e5)[_0x3afa02(0x27b)]();}catch(_0x11770b){return console[_0x3afa02(0x651)]('Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:',_0x11770b),null;}}async[a0_0x34b2dc(0x3d9)](_0x33181f){const _0x5e1154=a0_0x34b2dc;try{let _0x24a805=_0x33181f[_0x5e1154(0x349)]??{};return await Ee[_0x5e1154(0x253)](_0x24a805)[_0x5e1154(0x216)](_0x33181f['limit']??0x0)[_0x5e1154(0x56f)]();}catch(_0x361f80){return console[_0x5e1154(0x651)](_0x5e1154(0x6f2),_0x361f80),[];}}async['findOne'](_0x59e415){const _0x4359d1=a0_0x34b2dc;try{let _0x316451=A(_0x59e415[_0x4359d1(0x349)]);return await Ee[_0x4359d1(0x440)](_0x316451)[_0x4359d1(0x56f)]();}catch{return null;}}},ns=class extends _{[a0_0x34b2dc(0x33a)](_0x4aefe1){return Ca(_0x4aefe1);}async[a0_0x34b2dc(0x6c0)](_0x5006bc){const _0x2342a8=a0_0x34b2dc;if(_0x5006bc[_0x2342a8(0x3a3)]!==0x0)try{return{'insertCount':(await this[_0x2342a8(0x33a)](_0x5006bc[0x0][_0x2342a8(0x56c)])['insertMany']([..._0x5006bc]))[_0x2342a8(0x3a3)]};}catch(_0x1ef2f8){return _0x1ef2f8;}}async[a0_0x34b2dc(0x366)](_0x477ce6,_0x502bf4){const _0x2c543c=a0_0x34b2dc;try{let _0x33a58b=this[_0x2c543c(0x33a)](_0x502bf4),_0x7c5df0=A(_0x477ce6[_0x2c543c(0x349)]);return{'deletedCount':(await _0x33a58b[_0x2c543c(0x914)](_0x7c5df0))[_0x2c543c(0x35c)]};}catch(_0x57910a){return{'error':_0x57910a?.[_0x2c543c(0x1fe)]()};}}async[a0_0x34b2dc(0x907)](_0x1dc223,_0x1c29c2){const _0x838c1d=a0_0x34b2dc;try{let _0x2486c1=this[_0x838c1d(0x33a)](_0x1c29c2),_0xdb8d86=A(_0x1dc223[_0x838c1d(0x349)]);return{'deletedCount':(await _0x2486c1[_0x838c1d(0x907)](_0xdb8d86))['deletedCount']};}catch(_0x311f67){return{'error':_0x311f67?.[_0x838c1d(0x1fe)]()};}}async[a0_0x34b2dc(0x78f)](_0x3c2eea,_0x503230){const _0x13d3a2=a0_0x34b2dc;try{if(_0x3c2eea['length']===0x0)return;let _0x27eb41=this[_0x13d3a2(0x33a)](_0x503230),_0x1ee985=_0x3c2eea[_0x13d3a2(0x790)](_0x3cf393=>({'updateOne':{'filter':{'name':_0x3cf393[_0x13d3a2(0x673)],'owner':_0x503230},'update':{..._0x3cf393}}})),{modifiedCount:_0x5cddbc}=await _0x27eb41[_0x13d3a2(0x7b3)](_0x1ee985);return{'insertCount':_0x5cddbc};}catch{return;}}async[a0_0x34b2dc(0x1f7)](_0x469146,_0x582c01,_0x530eb2){const _0x3372ca=a0_0x34b2dc;try{return{'modifiedCount':(await this['getConversationModelForOwner'](_0x530eb2)[_0x3372ca(0x1f7)](_0x469146,{'$set':_0x582c01})[_0x3372ca(0x454)]())['modifiedCount']};}catch(_0x326ddd){return console[_0x3372ca(0x651)]('Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:',_0x326ddd),{'error':_0x326ddd};}}async['updateOne'](_0x5f0cf3,_0x410ed5,_0x2eeeb7){const _0x529b46=a0_0x34b2dc;try{return await this[_0x529b46(0x33a)](_0x2eeeb7)[_0x529b46(0x753)]({'_id':_0x5f0cf3},{'$set':_0x410ed5},{'new':!0x0,'upsert':!0x0})[_0x529b46(0x56f)]();}catch(_0x2fc7ff){return console[_0x529b46(0x651)](_0x2fc7ff),null;}}async['find'](_0x4c2a6f,_0x44e191){const _0x604215=a0_0x34b2dc;try{return await this['getConversationModelForOwner'](_0x44e191)[_0x604215(0x253)](_0x4c2a6f)[_0x604215(0x289)]({'lastInteraction':-0x1})['lean']();}catch{return[];}}async[a0_0x34b2dc(0x440)](_0x57f9bb,_0x2f7bb8){const _0x53d23a=a0_0x34b2dc;try{return await this[_0x53d23a(0x33a)](_0x2f7bb8)[_0x53d23a(0x440)]({..._0x57f9bb[_0x53d23a(0x349)]})['lean']();}catch{return null;}}async[a0_0x34b2dc(0x515)](_0x57adf8){const _0x392630=a0_0x34b2dc;try{return await this[_0x392630(0x33a)](_0x57adf8)[_0x392630(0x6bc)][_0x392630(0x8b5)](),{'success':!0x0};}catch(_0x21a773){return console['error'](_0x21a773),{'success':!0x1,'error':_0x21a773};}}},cs=class extends _{[a0_0x34b2dc(0x282)](_0x444052){return Ea(_0x444052);}async[a0_0x34b2dc(0x7b3)](_0x103798,_0x47324d){const _0x304b5a=a0_0x34b2dc;try{return await this['getScheduleMessageModelForOwner'](_0x47324d)[_0x304b5a(0x7b3)](_0x103798);}catch(_0x2aef08){return console[_0x304b5a(0x651)](_0x304b5a(0x546),_0x2aef08),null;}}async[a0_0x34b2dc(0x1f1)](_0x32203c,_0x5cc915){const _0x42905b=a0_0x34b2dc;try{let _0x264c08=this[_0x42905b(0x282)](_0x5cc915);return await new _0x264c08(_0x32203c)['save']();}catch(_0x49534d){return console[_0x42905b(0x651)](_0x42905b(0x8d9),_0x49534d),null;}}async[a0_0x34b2dc(0x907)](_0x519462,_0x3717a1){const _0x3c6fb2=a0_0x34b2dc;try{return await this[_0x3c6fb2(0x282)](_0x3717a1)[_0x3c6fb2(0x724)](_0x519462),{};}catch(_0xa6605c){return{'error':_0xa6605c?.[_0x3c6fb2(0x1fe)]()};}}async['updateOne'](_0x5cf715,_0xba991a,_0x1bc87d,_0x16fc5c={}){const _0x3ede7b=a0_0x34b2dc;try{return await this[_0x3ede7b(0x282)](_0x1bc87d)[_0x3ede7b(0x753)](_0x5cf715,_0xba991a,{..._0x16fc5c,'new':!0x0})['lean']();}catch(_0x7cee70){return console[_0x3ede7b(0x651)](_0x3ede7b(0x4d3),_0x7cee70),null;}}async[a0_0x34b2dc(0x76c)](_0x56d68d,_0x15ea76,_0x40824f){const _0x848fd=a0_0x34b2dc;try{return await this[_0x848fd(0x282)](_0x40824f)['findByIdAndUpdate'](_0x56d68d,_0x15ea76,{'new':!0x0})[_0x848fd(0x56f)]();}catch(_0x1e7c8a){return console[_0x848fd(0x651)](_0x848fd(0x4d3),_0x1e7c8a),null;}}async[a0_0x34b2dc(0x253)](_0x2a700e,_0x4d068d){const _0x397daa=a0_0x34b2dc;try{return await this[_0x397daa(0x282)](_0x4d068d)[_0x397daa(0x253)](_0x2a700e[_0x397daa(0x349)])[_0x397daa(0x216)](_0x2a700e?.[_0x397daa(0x216)]??0x0)['sort']({'when':0x1})['lean']();}catch{return[];}}async[a0_0x34b2dc(0x440)](_0x496387,_0x521888){const _0x35fe34=a0_0x34b2dc;try{return await this[_0x35fe34(0x282)](_0x521888)[_0x35fe34(0x440)](_0x496387[_0x35fe34(0x349)])['sort']({'when':0x1})[_0x35fe34(0x56f)]();}catch{return null;}}async[a0_0x34b2dc(0x3f5)](_0x5e6ded,_0xce1e3f){const _0x50471b=a0_0x34b2dc;try{return await this['getScheduleMessageModelForOwner'](_0xce1e3f)[_0x50471b(0x3f5)](_0x5e6ded)[_0x50471b(0x56f)]();}catch{return null;}}async[a0_0x34b2dc(0x914)](_0x4dfb29,_0xaaaf57){const _0x25834e=a0_0x34b2dc;try{return{'deletedCount':(await this[_0x25834e(0x282)](_0xaaaf57)[_0x25834e(0x914)](_0x4dfb29))[_0x25834e(0x35c)]};}catch(_0x21f2ff){return console[_0x25834e(0x651)](_0x25834e(0x7ba),_0x21f2ff),{'error':_0x21f2ff};}}async['deleteAll'](_0x16bc1a){const _0x5d8f84=a0_0x34b2dc;try{return await this[_0x5d8f84(0x282)](_0x16bc1a)[_0x5d8f84(0x6bc)][_0x5d8f84(0x8b5)](),{'success':!0x0};}catch(_0x28ab6e){return console[_0x5d8f84(0x651)](_0x28ab6e),{'success':!0x1,'error':_0x28ab6e};}}},ls=class extends _{async['update'](_0x1153b7,_0x2a7506){const _0x340530=a0_0x34b2dc;try{if(this[_0x340530(0x43e)]['ENABLED'])return await Te['findOneAndUpdate']({'_id':_0x2a7506},{'$set':_0x1153b7},{'new':!0x0});}catch(_0x14f1b4){throw console[_0x340530(0x651)](_0x340530(0x459),_0x14f1b4),_0x14f1b4;}}async['findOrCreate'](_0xb96466){const _0xaf4cd8=a0_0x34b2dc;try{let _0x389227=await Te['findById'](_0xb96466);return _0x389227?_0x389227[_0xaf4cd8(0x39c)]||(_0x389227[_0xaf4cd8(0x39c)]=[],await _0x389227[_0xaf4cd8(0x27b)]()):(_0x389227=new Te({'_id':_0xb96466,'autoCompleteMessages':[]}),await _0x389227[_0xaf4cd8(0x27b)]()),_0x389227;}catch(_0x26499e){return _0x26499e['code']===0x2af8&&_0x26499e[_0xaf4cd8(0x68e)]&&_0x26499e[_0xaf4cd8(0x68e)]['autoCompleteMessages.command']?(console['error'](_0xaf4cd8(0x760)),await Te[_0xaf4cd8(0x6bc)][_0xaf4cd8(0x7c2)]('autoCompleteMessages.command_1'),null):(console[_0xaf4cd8(0x651)](_0xaf4cd8(0x5ef),_0x26499e),null);}}},qo=new $(a0_0x34b2dc(0x31a)),Vo=new Xe(b),Go=new Wt(b),Bo=new lt(b),Wo=new zt(na,b),zo=new is(ma,b),Ho=new os(pa,b),Ko=new $e(He,b),Qo=new rs(b),Yo=new Ht(b),Xo=new ns(b),Zo=new cs(b),er=new ls(b),we=new Qe(Vo,Go,Bo,Wo,zo,Ho,Ko,Qo,Xo,Yo,Zo,er,R?.['getClient']()),z=new Bt(fs,b,we),tr=new Zt(b,z,we),sr=new ts(z),Is=new as(sr),T=new ss(z),he=new Yt(z,b,we,fs,tr),H=new Xt(z),k=new Kt(z),V=new es(z);qo[a0_0x34b2dc(0x5df)](a0_0x34b2dc(0x68f));var ng=require('express-async-errors'),Js=require('fs'),Fi=I(require('https')),Ui=I(require(a0_0x34b2dc(0x373))),je=class u{static #e;static set[a0_0x34b2dc(0x5bc)](_0x2eb7b8){this.#e=_0x2eb7b8;}static get[a0_0x34b2dc(0x342)](){const _0x392cfb=a0_0x34b2dc;let {FULLCHAIN:_0x58d21c,PRIVKEY:_0x22213e}=b[_0x392cfb(0x30a)]('SSL_CONF');return Fi[_0x392cfb(0x4f6)]({'cert':(0x0,Js['readFileSync'])(_0x58d21c),'key':(0x0,Js[_0x392cfb(0x4a2)])(_0x22213e)},u.#e);}static get[a0_0x34b2dc(0x373)](){const _0x5c545f=a0_0x34b2dc;return Ui[_0x5c545f(0x4f6)](u.#e);}},Je=I(require('fs')),Bi=I(require(a0_0x34b2dc(0x2c2))),qe=I(require(a0_0x34b2dc(0x64d))),ds=I(require(a0_0x34b2dc(0x6b9))),us=require('child_process');function ar(){const _0x26e25c=a0_0x34b2dc;z[_0x26e25c(0x74f)]();let _0x411425=ds['default'][_0x26e25c(0x3c9)](__dirname,'downloads');Gi(_0x411425);}var Gi=_0x4ddc17=>{const _0x2c9b35=a0_0x34b2dc;let _0xdee247=Je['default']['readdirSync'](_0x4ddc17),_0x98b125=0xc*0x3c*0x3c*0x3e8,_0x3f1daa=0x2*0x3c*0x3c*0x3e8,_0x1e6174=new Date()['getTime']();_0xdee247[_0x2c9b35(0x3f2)](_0x5401f4=>{const _0x78a61a=_0x2c9b35;let _0x1af962=ds[_0x78a61a(0x62c)][_0x78a61a(0x3c9)](_0x4ddc17,_0x5401f4),_0x5b4ddc=Je[_0x78a61a(0x62c)]['statSync'](_0x1af962)[_0x78a61a(0x2a9)]['getTime']();_0x1e6174-_0x5b4ddc>_0x98b125&&(Je[_0x78a61a(0x62c)]['unlinkSync'](_0x1af962),console[_0x78a61a(0x476)]('Deleted\x20'+_0x5401f4));}),setTimeout(()=>Gi(_0x4ddc17),_0x3f1daa);};function ir(){const _0x2fae56=a0_0x34b2dc;let _0x5976a9=new $(_0x2fae56(0x773)),_0x34f6b2=(0x0,be[_0x2fae56(0x62c)])();_0x34f6b2[_0x2fae56(0x507)]((0x0,Vi['default'])({'origin'(_0xc6ae41,_0x39c0d4){const _0x26e579=_0x2fae56;let {ORIGIN:_0x32571c}=b['get'](_0x26e579(0x928));return _0xc6ae41||(_0xc6ae41='*'),_0x32571c['indexOf']('*')!==-0x1||_0x32571c[_0x26e579(0x84b)](_0xc6ae41)!==-0x1?_0x39c0d4(null,!0x0):_0x39c0d4(new Error(_0x26e579(0x620)));},'methods':[...b[_0x2fae56(0x30a)](_0x2fae56(0x928))[_0x2fae56(0x83c)]],'credentials':b['get'](_0x2fae56(0x928))[_0x2fae56(0x3f3)]}),(0x0,be['urlencoded'])({'extended':!0x0,'limit':_0x2fae56(0x638)}),(0x0,be[_0x2fae56(0x803)])({'limit':'50mb'})),_0x34f6b2['use']((_0xdfb10b,_0x1511ad,_0x1eabe5)=>{const _0x2aa964=_0x2fae56;_0xdfb10b[_0x2aa964(0x6b9)][_0x2aa964(0x442)]('/events')?_0x1eabe5():(0x0,qi['default'])()(_0xdfb10b,_0x1511ad,_0x1eabe5);}),_0x34f6b2[_0x2fae56(0x90a)](_0x2fae56(0x7ca),_0x2fae56(0x6ef)),_0x34f6b2[_0x2fae56(0x90a)](_0x2fae56(0x892),(0x0,Vs[_0x2fae56(0x3c9)])(ue,_0x2fae56(0x892))),_0x34f6b2[_0x2fae56(0x507)](be[_0x2fae56(0x62c)]['static']((0x0,Vs[_0x2fae56(0x3c9)])(ue,'public'))),_0x34f6b2[_0x2fae56(0x507)]((_0x1d49c6,_0x5ada65,_0x5b8780)=>{const _0x21f966=_0x2fae56;let _0x3ca25f=_0x5ada65[_0x21f966(0x52e)];_0x5ada65[_0x21f966(0x52e)]=function(_0x4cf8fd){const _0x17eea7=_0x21f966;if(_0x1d49c6[_0x17eea7(0x783)][_0x17eea7(0x535)]===_0x17eea7(0x7a2)||_0x1d49c6[_0x17eea7(0x310)][_0x17eea7(0x7dc)]===_0x17eea7(0x7a2)){let _0x1b9704=JSON['parse'](_0x4cf8fd);_0x4cf8fd=JSON[_0x17eea7(0x43f)](_0x4ea571(_0x1b9704));}return _0x3ca25f[_0x17eea7(0x401)](_0x5ada65,[_0x4cf8fd]);},_0x5b8780();}),_0x34f6b2[_0x2fae56(0x507)]('/',Le),_0x34f6b2[_0x2fae56(0x507)]((_0x265050,_0x1fc430,_0xe2bfd2,_0x589a70)=>{if(_0x265050)return _0xe2bfd2['status'](_0x265050['status']||0x1f4)['json'](_0x265050);},(_0x4f8d0e,_0xc1abf1,_0x59f6a2)=>{const _0x527e86=_0x2fae56;let {method:_0x4ecd5e,url:_0x3954fa}=_0x4f8d0e;_0xc1abf1[_0x527e86(0x71c)](0x194)[_0x527e86(0x803)]({'status':0x194,'message':_0x527e86(0x5e7)+_0x4ecd5e[_0x527e86(0x22d)]()+'\x20'+_0x3954fa,'error':_0x527e86(0x5f7)}),_0x59f6a2();});let _0x4ea571=(_0x253033,_0x1e09c2=_0x2fae56(0x2b5))=>{const _0x17069a=_0x2fae56;let _0x41e996=(_0x19a3d1,_0x2062f5=null,_0x462a57=!0x1)=>{const _0x175230=a0_0x15dd;let _0x3cd298={};return Object[_0x175230(0x37c)](_0x19a3d1)['forEach'](_0x1dcd31=>{const _0x10f434=_0x175230;let _0x1ebfad=_0x19a3d1[_0x1dcd31],_0x17274c=''+_0x1e09c2+_0x1dcd31;_0x2062f5&&!_0x462a57&&(_0x17274c=_0x2062f5+'.'+_0x1dcd31),!_0x1ebfad&&_0x1ebfad!==0x0&&_0x1ebfad!==!0x1||typeof _0x1ebfad>'u'?_0x3cd298[_0x17274c]=null:typeof _0x1ebfad!=_0x10f434(0x89b)&&!Array['isArray'](_0x1ebfad)?_0x3cd298[_0x17274c]=_0x1ebfad:typeof _0x1ebfad==_0x10f434(0x89b)&&!Array[_0x10f434(0x6fa)](_0x1ebfad)?_0x3cd298=Object[_0x10f434(0x2c4)](_0x3cd298,_0x41e996(_0x1ebfad,_0x17274c)):Array['isArray'](_0x1ebfad)&&(typeof _0x1ebfad[0x0]==_0x10f434(0x89b)?(_0x3cd298[_0x17274c]=[],_0x1ebfad[_0x10f434(0x3f2)](_0x17dd46=>{const _0x5922aa=_0x10f434;_0x3cd298[_0x17274c][_0x5922aa(0x26d)](_0x41e996(_0x17dd46,_0x17274c,!0x0));})):_0x3cd298[_0x17274c]=_0x1ebfad);}),_0x3cd298;};return Array['isArray'](_0x253033)?_0x253033['map'](_0x29c4b8=>_0x41e996(_0x29c4b8)):typeof _0x253033==_0x17069a(0x89b)&&_0x253033!==null?_0x41e996(_0x253033):{};},_0x5aa6e9=b[_0x2fae56(0x30a)](_0x2fae56(0x773));je[_0x2fae56(0x5bc)]=_0x34f6b2;let _0x432d81=je[_0x5aa6e9[_0x2fae56(0x279)]],_0x173470=_0x2fae56(0x8e9);_0x432d81['listen'](_0x5aa6e9[_0x2fae56(0x824)],()=>{const _0x4d080b=_0x2fae56;_0x5976a9[_0x4d080b(0x476)](_0x173470),_0x5976a9[_0x4d080b(0x476)](_0x5aa6e9[_0x4d080b(0x279)]['toUpperCase']()+'\x20-\x20ON:\x20'+_0x5aa6e9[_0x4d080b(0x824)]);}),ar(),ta();}var or=a0_0x34b2dc(0x545),rr=ds[a0_0x34b2dc(0x62c)][a0_0x34b2dc(0x3c9)](__dirname,a0_0x34b2dc(0x54d)),Ae=null;function nr(){return new Promise((_0x23e181,_0x167399)=>{const _0x26d4ca=a0_0x15dd;Je[_0x26d4ca(0x62c)][_0x26d4ca(0x560)](rr,_0x26d4ca(0x367),(_0x5c1233,_0x357f2f)=>{const _0x58d14a=_0x26d4ca;if(_0x5c1233){Ae=_0x5c1233,_0x23e181();return;}Bi[_0x58d14a(0x62c)][_0x58d14a(0x232)](_0x357f2f)[_0x58d14a(0x47f)][_0x58d14a(0x931)]===or?(Ae=null,_0x23e181()):(Ae=new Error(_0x58d14a(0x837)),_0x23e181());});});}async function cr(){const _0xffe377=a0_0x34b2dc;try{await nr(),await Gs();}catch(_0x4dc467){console[_0xffe377(0x651)](_0xffe377(0x45c)+_0x4dc467),process[_0xffe377(0x336)](0x1);}}cr();async function Wi(){const _0x31d4f4=a0_0x34b2dc;let _0x55b904;try{_0x55b904=(await qe['default'][_0x31d4f4(0x30a)](_0x31d4f4(0x5cc)))[_0x31d4f4(0x6a3)]['ip'];}catch(_0x3321c0){console[_0x31d4f4(0x651)](_0x3321c0);try{_0x55b904=(await qe[_0x31d4f4(0x62c)]['get'](_0x31d4f4(0x73b)))[_0x31d4f4(0x6a3)]['ip'];}catch(_0x1d0744){console[_0x31d4f4(0x651)](_0x1d0744);try{_0x55b904=(await qe[_0x31d4f4(0x62c)][_0x31d4f4(0x30a)](_0x31d4f4(0x649)))[_0x31d4f4(0x6a3)][_0x31d4f4(0x52f)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x2eb93a){return console['error'](_0x2eb93a),!0x1;}}}return _0x55b904;}var ji=0x0;async function lr(){const _0x837c83=a0_0x34b2dc;let _0x3523ba=await new ge(b['get'](_0x837c83(0x781)))[_0x837c83(0x6b5)]();return console[_0x837c83(0x476)](_0x837c83(0x266),_0x3523ba[_0x837c83(0x3a3)]),_0x3523ba[_0x837c83(0x3a3)];}function ur(_0x57918f){const _0x62dcf1=a0_0x34b2dc;let _0x29fc0b=_0x57918f[_0x62dcf1(0x30a)](_0x62dcf1(0x773))[_0x62dcf1(0x879)],_0x4ae377=_0x57918f[_0x62dcf1(0x30a)](_0x62dcf1(0x6c5));console[_0x62dcf1(0x476)](_0x62dcf1(0x802),_0x29fc0b),console[_0x62dcf1(0x476)](_0x62dcf1(0x36d),_0x4ae377);let _0x3837c4='',_0x2bc9e6=_0x29fc0b||'';if(_0x29fc0b){let _0x54d2ed=_0x29fc0b['match'](/\/\/(.*?)\./);console[_0x62dcf1(0x476)](_0x62dcf1(0x508),_0x54d2ed),_0x54d2ed&&_0x54d2ed[0x1]&&(_0x3837c4=_0x54d2ed[0x1],console[_0x62dcf1(0x476)](_0x62dcf1(0x409),_0x3837c4));}if(!_0x3837c4&&_0x4ae377&&_0x4ae377['FULLCHAIN']){let _0x5af8cd=_0x4ae377[_0x62dcf1(0x627)][_0x62dcf1(0x292)]('/');console[_0x62dcf1(0x476)](_0x62dcf1(0x72b),_0x5af8cd);let _0x21a812=_0x5af8cd[_0x5af8cd[_0x62dcf1(0x3a3)]-0x2];if(console[_0x62dcf1(0x476)](_0x62dcf1(0x7f3),_0x21a812),_0x21a812){let _0x2431c4=_0x21a812['split']('.');console[_0x62dcf1(0x476)](_0x62dcf1(0x50f),_0x2431c4),_0x2431c4[_0x62dcf1(0x3a3)]>0x2&&(_0x3837c4=_0x2431c4[0x0],console[_0x62dcf1(0x476)]('Subdomínio\x20extraído\x20do\x20caminho\x20SSL:',_0x3837c4),_0x2bc9e6=''+_0x21a812);}}return{'subdomain':_0x3837c4||_0x62dcf1(0x7db),'fullURL':_0x2bc9e6||_0x62dcf1(0x69d)};}var {subdomain:K,fullURL:Bs}=ur(b);console['log'](a0_0x34b2dc(0x8e1),K),console[a0_0x34b2dc(0x476)]('URL\x20completa:',Bs);async function dr(){const _0x1369a2=a0_0x34b2dc;let _0x5e16db=b[_0x1369a2(0x30a)](_0x1369a2(0x781)),_0x2f0050=b[_0x1369a2(0x30a)]('AUTHENTICATION')[_0x1369a2(0x432)][_0x1369a2(0x22f)],_0x1cceb7=b[_0x1369a2(0x30a)](_0x1369a2(0x6c5)),_0x186212=await Wi(),_0x4caad3=b['get'](_0x1369a2(0x773))[_0x1369a2(0x824)],_0x53a1a6=Bs;try{let _0x9c37bc={'ip':_0x186212||null,'redis_enable':_0x5e16db?.[_0x1369a2(0x33c)]||null,'apikey':_0x2f0050||null,'ssl':_0x1cceb7?.['PRIVKEY']||null,'lastupdate':zi||null,'port':_0x4caad3||null,'gitInstallError':Ae?.[_0x1369a2(0x5ce)]||null,'url':_0x53a1a6||null,'subdomain':K};if(console[_0x1369a2(0x476)](_0x1369a2(0x3be),_0x9c37bc['ip']),_0x5e16db&&_0x5e16db[_0x1369a2(0x33c)]){let _0x51c299=await lr();_0x9c37bc[_0x1369a2(0x40f)]=_0x51c299||null;}for(let _0x4a0f83 in _0x9c37bc)_0x9c37bc[_0x1369a2(0x59e)](_0x4a0f83)&&_0x4a0f83!=='ip'&&(_0x9c37bc[_0x4a0f83]=JSON[_0x1369a2(0x43f)](_0x9c37bc[_0x4a0f83]));return(await qe[_0x1369a2(0x62c)][_0x1369a2(0x4f2)]('https://uazapi.bubbleapps.io/api/1.1/wf/verificar/',_0x9c37bc))[_0x1369a2(0x6a3)];}catch(_0x4110ca){return console[_0x1369a2(0x651)](_0x4110ca),!0x1;}}var qs=!0x1,zi=0x25d,pr=0x3,Ji=0x1b7740;async function Gs(){const _0x41b5ea=a0_0x34b2dc;let _0x26e098=_0x41b5ea(0x5b6);Ae===null&&(_0x26e098=await Wi());let _0x2ae55d=await dr();if(_0x2ae55d){if(_0x2ae55d['response'][_0x41b5ea(0x8f4)]===!0x0){Ae===null&&_0x2ae55d[_0x41b5ea(0x230)]['last_update']-zi>0x0&&await hr(),qs||(qs=!0x0,ir());let _0x29e043=0x24*0x3c*0x3c,_0x31fb04=_0x2ae55d['response']['segundos']>_0x29e043?_0x29e043:_0x2ae55d[_0x41b5ea(0x230)][_0x41b5ea(0x481)],_0x3dfc23=Number(_0x31fb04);if(isNaN(_0x3dfc23)){console['error']('interval\x20não\x20é\x20um\x20número');return;}let _0x4616ff=Math[_0x41b5ea(0x43c)](_0x3dfc23/0xe10),_0x3761f9=Math[_0x41b5ea(0x43c)](_0x3dfc23%0xe10/0x3c),_0x6506e2=new Date(Date[_0x41b5ea(0x880)]()+_0x3dfc23*0x3e8);setTimeout(Gs,_0x3dfc23*0x3e8);let _0x1e9997=_0x3f0d4c=>_0x3f0d4c['toString']()[_0x41b5ea(0x3ac)](0x2,'0'),_0x517eb7=_0x41b5ea(0x466)+_0x1e9997(_0x4616ff)+_0x41b5ea(0x527)+_0x1e9997(_0x3761f9)+_0x41b5ea(0x83a)+_0x1e9997(_0x6506e2[_0x41b5ea(0x2f6)]())+':'+_0x1e9997(_0x6506e2[_0x41b5ea(0x8a7)]())+'.';console[_0x41b5ea(0x476)](_0x517eb7);}else return console[_0x41b5ea(0x476)](_0x41b5ea(0x800)),qs&&(console['log'](_0x41b5ea(0x58e)),process[_0x41b5ea(0x336)]()),'LICENSE_INVALID';}else{if(ji++,ji<pr)console['log']('Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20'+Ji/0xea60+_0x41b5ea(0x49f)),setTimeout(Gs,Ji);else return console['error'](_0x41b5ea(0x2f4)),_0x41b5ea(0x4cc);}}async function hr(){const _0x42f344=a0_0x34b2dc;console[_0x42f344(0x476)](_0x42f344(0x847)),console[_0x42f344(0x476)](_0x42f344(0x1ea)),(0x0,us[_0x42f344(0x7e7)])(_0x42f344(0x71e),{'shell':!0x0})['on'](_0x42f344(0x6dd),_0x10c36d=>{const _0x1c5d07=_0x42f344;_0x10c36d!==0x0?console['error']('Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.'):(console[_0x1c5d07(0x476)](_0x1c5d07(0x4da)),console[_0x1c5d07(0x476)](_0x1c5d07(0x922)),(0x0,us[_0x1c5d07(0x7e7)])(_0x1c5d07(0x792),{'shell':!0x0})['on'](_0x1c5d07(0x6dd),_0x2d90da=>{const _0x2feda0=_0x1c5d07;if(_0x2d90da!==0x0)console[_0x2feda0(0x651)](_0x2feda0(0x5b4));else{console[_0x2feda0(0x476)](_0x2feda0(0x8fa));let _0x540f40=(0x0,us[_0x2feda0(0x7e7)])(_0x2feda0(0x405),{'shell':!0x0});_0x540f40[_0x2feda0(0x911)]['on']('data',_0x15d562=>{const _0x5995ab=_0x2feda0;console[_0x5995ab(0x476)]('Atualização:\x20'+_0x15d562);}),_0x540f40[_0x2feda0(0x32f)]['on'](_0x2feda0(0x6a3),_0x5ee986=>{const _0x3a639d=_0x2feda0;console[_0x3a639d(0x651)](_0x3a639d(0x4a1)+_0x5ee986);}),_0x540f40['on']('exit',_0x110ab0=>{const _0xb05abc=_0x2feda0;_0x110ab0!==0x0?console[_0xb05abc(0x651)](_0xb05abc(0x24d)+_0x110ab0):console[_0xb05abc(0x476)](_0xb05abc(0x6ee)),console[_0xb05abc(0x476)](_0xb05abc(0x643)),setTimeout(()=>process[_0xb05abc(0x336)](),0x2710);});}}));});}0x0&&(module['exports']={'fullURL':fullURL,'subdomain':subdomain});