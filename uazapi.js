const a0_0x4851ee=a0_0x15b7;(function(_0x375e1d,_0x76cf7f){const _0x1d65db=a0_0x15b7,_0x5de1ac=_0x375e1d();while(!![]){try{const _0x29d946=parseInt(_0x1d65db(0x5b5))/0x1*(parseInt(_0x1d65db(0x581))/0x2)+parseInt(_0x1d65db(0x320))/0x3*(parseInt(_0x1d65db(0x39b))/0x4)+-parseInt(_0x1d65db(0x19d))/0x5+-parseInt(_0x1d65db(0x2a7))/0x6*(-parseInt(_0x1d65db(0x24d))/0x7)+parseInt(_0x1d65db(0x60f))/0x8*(-parseInt(_0x1d65db(0x2d6))/0x9)+parseInt(_0x1d65db(0x5b4))/0xa*(parseInt(_0x1d65db(0x407))/0xb)+parseInt(_0x1d65db(0x3d4))/0xc*(-parseInt(_0x1d65db(0x254))/0xd);if(_0x29d946===_0x76cf7f)break;else _0x5de1ac['push'](_0x5de1ac['shift']());}catch(_0x57662f){_0x5de1ac['push'](_0x5de1ac['shift']());}}}(a0_0x1c05,0xf3247));var Uo=Object[a0_0x4851ee(0x1a8)],Bs=Object['defineProperty'],Vo=Object[a0_0x4851ee(0x155)],jo=Object['getOwnPropertyNames'],Bo=Object[a0_0x4851ee(0x56f)],Fo=Object[a0_0x4851ee(0x152)][a0_0x4851ee(0x598)],Jo=(_0x1cdcbb,_0x361041,_0x5b8874,_0x39d931)=>{const _0x1cc05d=a0_0x4851ee;if(_0x361041&&typeof _0x361041==_0x1cc05d(0x658)||typeof _0x361041==_0x1cc05d(0x495)){for(let _0x1c29d5 of jo(_0x361041))!Fo[_0x1cc05d(0x314)](_0x1cdcbb,_0x1c29d5)&&_0x1c29d5!==_0x5b8874&&Bs(_0x1cdcbb,_0x1c29d5,{'get':()=>_0x361041[_0x1c29d5],'enumerable':!(_0x39d931=Vo(_0x361041,_0x1c29d5))||_0x39d931[_0x1cc05d(0x295)]});}return _0x1cdcbb;},T=(_0x56accc,_0x6e77e9,_0x32963e)=>(_0x32963e=_0x56accc!=null?Uo(Bo(_0x56accc)):{},Jo(_0x6e77e9||!_0x56accc||!_0x56accc[a0_0x4851ee(0x2f1)]?Bs(_0x32963e,'default',{'value':_0x56accc,'enumerable':!0x0}):_0x32963e,_0x56accc)),Do=T(require(a0_0x4851ee(0x2e6))),Js=require('fs'),Gs=require('js-yaml'),qs=require(a0_0x4851ee(0x539)),Ue=require(a0_0x4851ee(0x539)),Y=process['cwd'](),j=(0x0,Ue['join'])(Y,a0_0x4851ee(0x40f)),Fs=(0x0,Ue['join'])(Y,a0_0x4851ee(0x160)),es=(0x0,Ue[a0_0x4851ee(0x273)])(Y,a0_0x4851ee(0x573),'auth'),Ws=require(a0_0x4851ee(0x3f6)),ts=class{constructor(){const _0x4b6220=a0_0x4851ee;this[_0x4b6220(0x292)]();}[a0_0x4851ee(0x5b8)](_0x3467fa){const _0x439079=a0_0x4851ee;return this[_0x439079(0x30e)][_0x3467fa];}[a0_0x4851ee(0x292)](){const _0x420be0=a0_0x4851ee;this[_0x420be0(0x30e)]=process[_0x420be0(0x30e)]?.[_0x420be0(0x1c7)]!==_0x420be0(0xf8)?this[_0x420be0(0x424)]():this[_0x420be0(0x278)](),this['env'][_0x420be0(0x2ae)]=process[_0x420be0(0x30e)]?.[_0x420be0(0x4ab)]===_0x420be0(0x450),process[_0x420be0(0x30e)]?.[_0x420be0(0x1c7)]===_0x420be0(0xf8)&&(this['env'][_0x420be0(0x4d1)][_0x420be0(0x357)]=_0x420be0(0x216),this[_0x420be0(0x30e)][_0x420be0(0x4d1)]['PORT']=Number[_0x420be0(0x27a)](process['env']?.[_0x420be0(0x130)]??_0x420be0(0x2bd)));}[a0_0x4851ee(0x424)](){const _0x4eb4d9=a0_0x4851ee;return(0x0,Gs[_0x4eb4d9(0x215)])((0x0,Js[_0x4eb4d9(0xdd)])((0x0,qs[_0x4eb4d9(0x273)])(Fs,_0x4eb4d9(0x5b0)),{'encoding':'utf-8'}));}[a0_0x4851ee(0x278)](){const _0x540625=a0_0x4851ee;return{'SERVER':{'TYPE':process[_0x540625(0x30e)][_0x540625(0x422)],'PORT':Number[_0x540625(0x27a)](process[_0x540625(0x30e)]['SERVER_PORT'])},'CORS':{'ORIGIN':process[_0x540625(0x30e)][_0x540625(0x2eb)][_0x540625(0x4dd)](','),'METHODS':process[_0x540625(0x30e)][_0x540625(0x411)][_0x540625(0x4dd)](','),'CREDENTIALS':process[_0x540625(0x30e)]?.[_0x540625(0x54a)]===_0x540625(0xf8)},'SSL_CONF':{'PRIVKEY':process['env']?.[_0x540625(0x169)],'FULLCHAIN':process[_0x540625(0x30e)]?.['SSL_CONF_FULLCHAIN']},'STORE':{'CLEANING_INTERVAL':Number[_0x540625(0x652)](process[_0x540625(0x30e)]?.['STORE_CLEANING_TERMINAL'])?Number[_0x540625(0x27a)](process[_0x540625(0x30e)][_0x540625(0x3da)]):void 0x0,'MESSAGES':process[_0x540625(0x30e)]?.[_0x540625(0x627)]===_0x540625(0xf8),'CONTACTS':process['env']?.[_0x540625(0x3ea)]===_0x540625(0xf8),'CHATS':process['env']?.[_0x540625(0x1b4)]===_0x540625(0xf8)},'DATABASE':{'CONNECTION':{'HOST':process['env']?.[_0x540625(0x235)],'PORT':Number[_0x540625(0x27a)](process[_0x540625(0x30e)]?.[_0x540625(0x235)]),'USER':process[_0x540625(0x30e)][_0x540625(0x185)],'PASSWORD':process[_0x540625(0x30e)]['DATABASE_CONNECTION_PASSWORD'],'URI':process[_0x540625(0x30e)][_0x540625(0x378)],'DB_PREFIX_NAME':process[_0x540625(0x30e)][_0x540625(0x13d)]},'ENABLED':process[_0x540625(0x30e)]?.[_0x540625(0x2c5)]===_0x540625(0xf8)},'REDIS':{'ENABLED':process['env']?.[_0x540625(0x1f3)]===_0x540625(0xf8),'URI':process[_0x540625(0x30e)]['REDIS_URI'],'PREFIX_KEY':process[_0x540625(0x30e)]['REDIS_PREFIX_KEY']},'LOG':{'LEVEL':process[_0x540625(0x30e)]?.['LOG_LEVEL'][_0x540625(0x4dd)](','),'COLOR':process[_0x540625(0x30e)]?.[_0x540625(0x433)]===_0x540625(0xf8)},'DEL_INSTANCE':(0x0,Ws['isBooleanString'])(process[_0x540625(0x30e)]?.[_0x540625(0x14a)])?process[_0x540625(0x30e)]['DEL_INSTANCE']===_0x540625(0xf8):Number[_0x540625(0x27a)](process[_0x540625(0x30e)][_0x540625(0x14a)])||!0x1,'WEBHOOK':{'WEBHOOK_MAP':process[_0x540625(0x30e)]['WEBHOOK_MAP']?process['env'][_0x540625(0x461)]===_0x540625(0xf8):!0x1,'GLOBAL':{'URL':process['env']?.[_0x540625(0x3d2)],'ENABLED':process[_0x540625(0x30e)]?.[_0x540625(0x51b)]===_0x540625(0xf8)},'EVENTS':{'STATUS_INSTANCE':process['env']?.['WEBHOOK_EVENTS_STATUS_INSTANCE']===_0x540625(0xf8),'QRCODE_UPDATED':process['env']?.[_0x540625(0x506)]===_0x540625(0xf8),'MESSAGES_SET':process[_0x540625(0x30e)]?.[_0x540625(0x24c)]===_0x540625(0xf8),'MESSAGES_UPSERT':process[_0x540625(0x30e)]?.[_0x540625(0x562)]===_0x540625(0xf8),'MESSAGES_UPDATE':process[_0x540625(0x30e)]?.[_0x540625(0x9f)]==='true','SEND_MESSAGE':process[_0x540625(0x30e)]?.['WEBHOOK_EVENTS_SEND_MESSAGE']===_0x540625(0xf8),'CONTACTS_SET':process[_0x540625(0x30e)]?.[_0x540625(0x608)]==='true','CONTACTS_UPDATE':process['env']?.[_0x540625(0xa3)]==='true','CONTACTS_UPSERT':process[_0x540625(0x30e)]?.[_0x540625(0x3ab)]==='true','PRESENCE_UPDATE':process['env']?.['WEBHOOK_EVENTS_PRESENCE_UPDATE']===_0x540625(0xf8),'CHATS_SET':process[_0x540625(0x30e)]?.[_0x540625(0x5b3)]===_0x540625(0xf8),'CHATS_UPDATE':process[_0x540625(0x30e)]?.['WEBHOOK_EVENTS_CHATS_UPDATE']==='true','CHATS_UPSERT':process[_0x540625(0x30e)]?.[_0x540625(0x59e)]===_0x540625(0xf8),'CHATS_DELETE':process[_0x540625(0x30e)]?.[_0x540625(0x4ad)]===_0x540625(0xf8),'CONNECTION_UPDATE':process[_0x540625(0x30e)]?.[_0x540625(0x324)]===_0x540625(0xf8),'GROUPS_UPSERT':process['env']?.[_0x540625(0x54e)]===_0x540625(0xf8),'GROUP_UPDATE':process['env']?.['WEBHOOK_EVENTS_GROUPS_UPDATE']===_0x540625(0xf8),'GROUP_PARTICIPANTS_UPDATE':process[_0x540625(0x30e)]?.['WEBHOOK_EVENTS_GROUP_PARTICIPANTS_UPDATE']===_0x540625(0xf8),'NEW_JWT_TOKEN':process[_0x540625(0x30e)]?.['WEBHOOK_EVENTS_NEW_JWT_TOKEN']===_0x540625(0xf8)}},'CONFIG_SESSION_PHONE':{'CLIENT':process[_0x540625(0x30e)]?.[_0x540625(0xe5)]||_0x540625(0x58b),'NAME':process[_0x540625(0x30e)]?.['CONFIG_SESSION_PHONE_NAME']||_0x540625(0x258)},'QRCODE':{'LIMIT':Number[_0x540625(0x27a)](process['env'][_0x540625(0x5d2)])||0x5},'TRIAL_AD':process[_0x540625(0x30e)]?.[_0x540625(0x1bd)],'TRIAL_INSTANCE_NAME':process[_0x540625(0x30e)]?.[_0x540625(0x3d0)],'AUTOUPDATE':process[_0x540625(0x30e)]?.[_0x540625(0x21c)]===_0x540625(0xf8),'PHONE':process[_0x540625(0x30e)]?.['PHONE'],'AUTHENTICATION':{'TYPE':process[_0x540625(0x30e)][_0x540625(0x2f9)],'API_KEY':{'KEY':process[_0x540625(0x30e)][_0x540625(0xb6)]},'JWT':{'EXPIRIN_IN':Number['isInteger'](process['env']?.[_0x540625(0x437)])?Number[_0x540625(0x27a)](process[_0x540625(0x30e)][_0x540625(0x437)]):0xe10,'SECRET':process['env'][_0x540625(0x27f)]}}};}},y=new ts(),Po=T(require(a0_0x4851ee(0x14c))),me=T(require('express')),ks=require('path'),ss=T(require(a0_0x4851ee(0x5d9))),as=(_0x12a5e7=>(_0x12a5e7['LOG']=a0_0x4851ee(0x9c),_0x12a5e7[a0_0x4851ee(0x1dd)]=a0_0x4851ee(0x5f1),_0x12a5e7[a0_0x4851ee(0x462)]=a0_0x4851ee(0xca),_0x12a5e7[a0_0x4851ee(0x617)]='\x1b[31m',_0x12a5e7[a0_0x4851ee(0x5a7)]=a0_0x4851ee(0x239),_0x12a5e7[a0_0x4851ee(0x505)]=a0_0x4851ee(0x2dd),_0x12a5e7[a0_0x4851ee(0x4ef)]='\x1b[30m',_0x12a5e7))(as||{}),Hs=(_0x155e3a=>(_0x155e3a[a0_0x4851ee(0x11d)]=a0_0x4851ee(0x25e),_0x155e3a[a0_0x4851ee(0x4ef)]=a0_0x4851ee(0x44f),_0x155e3a[a0_0x4851ee(0x1dd)]=a0_0x4851ee(0x2b3),_0x155e3a['WARN']=a0_0x4851ee(0x5b6),_0x155e3a['ERROR']='\x1b[31m%s\x1b[0m',_0x155e3a['DEBUG']='\x1b[36m%s\x1b[0m',_0x155e3a[a0_0x4851ee(0x505)]=a0_0x4851ee(0x426),_0x155e3a))(Hs||{}),Ks=(_0x11ca8e=>(_0x11ca8e[a0_0x4851ee(0x11d)]=a0_0x4851ee(0x11d),_0x11ca8e[a0_0x4851ee(0x462)]='WARN',_0x11ca8e[a0_0x4851ee(0x1dd)]=a0_0x4851ee(0x1dd),_0x11ca8e[a0_0x4851ee(0x4ef)]='DARK',_0x11ca8e['ERROR']=a0_0x4851ee(0x617),_0x11ca8e[a0_0x4851ee(0x5a7)]=a0_0x4851ee(0x5a7),_0x11ca8e[a0_0x4851ee(0x505)]=a0_0x4851ee(0x505),_0x11ca8e))(Ks||{}),zs=(_0x59d828=>(_0x59d828[a0_0x4851ee(0x11d)]='\x1b[42m',_0x59d828[a0_0x4851ee(0x1dd)]=a0_0x4851ee(0x2b1),_0x59d828[a0_0x4851ee(0x462)]='\x1b[43m',_0x59d828[a0_0x4851ee(0x4ef)]=a0_0x4851ee(0x377),_0x59d828['ERROR']=a0_0x4851ee(0x47a),_0x59d828['DEBUG']=a0_0x4851ee(0x143),_0x59d828['VERBOSE']='\x1b[47m',_0x59d828))(zs||{}),C=class{constructor(_0x144e2c='Logger'){const _0x25057f=a0_0x4851ee;this['context']=_0x144e2c,this[_0x25057f(0x417)]=y;}[a0_0x4851ee(0x4f1)](_0x2a6c89){const _0x2bc5c2=a0_0x4851ee;this[_0x2bc5c2(0x493)]=_0x2a6c89;}[a0_0x4851ee(0x162)](_0x29089d,_0x3c89a7){const _0x4d5f72=a0_0x4851ee;let _0xd40bdf=[];this['configService'][_0x4d5f72(0x5b8)]('LOG')[_0x4d5f72(0x443)]['forEach'](_0x4dd2e3=>_0xd40bdf[_0x4d5f72(0x53b)](Ks[_0x4dd2e3]));let _0x2239d7=typeof _0x29089d;_0xd40bdf[_0x4d5f72(0x5a9)](_0x3c89a7)&&(y['get'](_0x4d5f72(0x11d))[_0x4d5f72(0x3f2)]?(console[_0x4d5f72(0x2c6)](_0x4d5f72(0x260)+Hs[_0x3c89a7],_0x4d5f72(0x39f),(0x0,ss[_0x4d5f72(0x481)])()[_0x4d5f72(0x524)]('DD/MM\x20HH:mm:ss'),_0x4d5f72(0x286),as[_0x3c89a7]+zs[_0x3c89a7]+_0x4d5f72(0x260),_0x3c89a7+_0x4d5f72(0x3d8),_0x4d5f72(0x458),this[_0x4d5f72(0x493)]+'\x1b[0m',as[_0x3c89a7],_0x2239d7!==_0x4d5f72(0x658)?_0x29089d:'',_0x4d5f72(0x286)),_0x2239d7===_0x4d5f72(0x658)&&console['log'](_0x29089d,'\x0a')):console['log']((0x0,ss[_0x4d5f72(0x481)])()[_0x4d5f72(0x524)](_0x4d5f72(0x23d)),_0x3c89a7+'\x20',''+this[_0x4d5f72(0x493)],_0x29089d));}[a0_0x4851ee(0x2c6)](_0x2b33f5){const _0x5b94df=a0_0x4851ee;this['console'](_0x2b33f5,_0x5b94df(0x11d));}[a0_0x4851ee(0x1e4)](_0x505d96){const _0x105858=a0_0x4851ee;this['console'](_0x505d96,_0x105858(0x1dd));}[a0_0x4851ee(0x171)](_0x1170ee){const _0x19b571=a0_0x4851ee;this[_0x19b571(0x162)](_0x1170ee,_0x19b571(0x462));}[a0_0x4851ee(0x44b)](_0x4c29ca){const _0x354167=a0_0x4851ee;this[_0x354167(0x162)](_0x4c29ca,_0x354167(0x617));}[a0_0x4851ee(0x1bc)](_0x379745){const _0x483640=a0_0x4851ee;this[_0x483640(0x162)](_0x379745,'VERBOSE');}[a0_0x4851ee(0x54c)](_0x551be0){const _0x2f2080=a0_0x4851ee;this['console'](_0x551be0,_0x2f2080(0x5a7));}[a0_0x4851ee(0x4c4)](_0x5ee137){const _0x20edd0=a0_0x4851ee;this[_0x20edd0(0x162)](_0x5ee137,_0x20edd0(0x4ef));}};function Qs(){const _0x977957=a0_0x4851ee;process['on'](_0x977957(0x52a),(_0x16be10,_0x595e2d)=>{const _0x47fa26=_0x977957;new C(_0x47fa26(0x52a))[_0x47fa26(0x44b)]({'origin':_0x595e2d,'stderr':process[_0x47fa26(0x498)]['fd'],'error':_0x16be10});}),process['on'](_0x977957(0x5a2),(_0x2f54f0,_0x582a0a)=>{const _0x4869dc=_0x977957;new C(_0x4869dc(0x5a2))[_0x4869dc(0x44b)]({'origin':_0x582a0a,'stderr':process[_0x4869dc(0x498)]['fd'],'error':_0x2f54f0});});}var Ys=T(require(a0_0x4851ee(0x406))),os=new Ys[(a0_0x4851ee(0x481))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),le=require('path'),he=require('fs'),is=require(a0_0x4851ee(0x539)),B=class{constructor(_0x2b61e9){const _0x3537cf=a0_0x4851ee;this[_0x3537cf(0x489)]=(0x0,is['join'])(Y,_0x3537cf(0x573)),this[_0x3537cf(0x3b4)]=_0x26c3e5=>{const _0xf387ee=_0x3537cf;(0x0,he[_0xf387ee(0x66f)])(_0x26c3e5['path'])||(0x0,he[_0xf387ee(0x49e)])(_0x26c3e5['path'],{'recursive':!0x0});try{return(0x0,he[_0xf387ee(0x482)])((0x0,is[_0xf387ee(0x273)])(_0x26c3e5[_0xf387ee(0x539)],_0x26c3e5[_0xf387ee(0x2ac)]+_0xf387ee(0x5d3)),JSON[_0xf387ee(0x63a)]({..._0x26c3e5[_0xf387ee(0x468)]}),{'encoding':_0xf387ee(0x5a8)}),{'message':_0xf387ee(0x500)};}finally{_0x26c3e5[_0xf387ee(0x468)]=void 0x0;}},this[_0x3537cf(0x477)]=_0x2b61e9[_0x3537cf(0x5b8)](_0x3537cf(0x4c2));}[a0_0x4851ee(0x3b8)](_0x23e9c3,_0x3d332a=!0x1){throw new Error('Method\x20not\x20implemented.');}[a0_0x4851ee(0x487)](_0x244e16){throw new Error('Method\x20not\x20implemented.');}[a0_0x4851ee(0x522)](_0x270377,_0x2ef09a){const _0x2632ed=a0_0x4851ee;throw new Error(_0x2632ed(0x51c));}},oe=require('fs'),Ve=class{},je=class extends B{constructor(_0x23cd33,_0x1e187d){const _0x345994=a0_0x4851ee;super(_0x1e187d),this['messageModel']=_0x23cd33,this[_0x345994(0x417)]=_0x1e187d;}async[a0_0x4851ee(0x3b8)](_0x139f69,_0x5ae3e8=!0x1){const _0x17f504=a0_0x4851ee;if(_0x139f69[_0x17f504(0x291)]!==0x0)try{return this[_0x17f504(0x477)][_0x17f504(0x1a4)]&&_0x5ae3e8?{'insertCount':(await this[_0x17f504(0x5cc)][_0x17f504(0x2ab)]([..._0x139f69]))[_0x17f504(0x291)]}:_0x5ae3e8?(_0x139f69[_0x17f504(0x386)](_0x4b7324=>this[_0x17f504(0x3b4)]({'path':(0x0,le['join'])(this[_0x17f504(0x489)],_0x17f504(0x4fa),_0x4b7324['owner']),'fileName':_0x4b7324['key']['id'],'data':_0x4b7324})),{'insertCount':_0x139f69[_0x17f504(0x291)]}):{'insertCount':0x0};}catch(_0x52663a){return console[_0x17f504(0x2c6)](_0x17f504(0x52c),_0x52663a),_0x52663a;}finally{_0x139f69=void 0x0;}}async['find'](_0x531c6b){const _0x39d805=a0_0x4851ee;try{if(this[_0x39d805(0x477)][_0x39d805(0x1a4)]){if(_0x531c6b?.[_0x39d805(0x5bb)]?.['key']){for(let [_0x2b90a7,_0x20f331]of Object[_0x39d805(0x1e9)](_0x531c6b['where'][_0x39d805(0x67c)]))_0x531c6b['where'][_0x39d805(0x332)+_0x2b90a7]=_0x20f331;delete _0x531c6b?.[_0x39d805(0x5bb)]?.['key'];}return await this[_0x39d805(0x5cc)]['find']({..._0x531c6b[_0x39d805(0x5bb)]})[_0x39d805(0x1dc)]({'messageTimestamp':-0x1})[_0x39d805(0x412)](_0x531c6b?.['limit']??0x0);}let _0x4e0072=[];if(_0x531c6b?.[_0x39d805(0x5bb)]?.[_0x39d805(0x67c)]?.['id'])_0x4e0072[_0x39d805(0x53b)](JSON[_0x39d805(0x5f3)]((0x0,oe[_0x39d805(0xdd)])((0x0,le['join'])(this[_0x39d805(0x489)],_0x39d805(0x4fa),_0x531c6b[_0x39d805(0x5bb)][_0x39d805(0x101)],_0x531c6b['where'][_0x39d805(0x67c)]['id']+'.json'),{'encoding':_0x39d805(0x5a8)})));else{let _0x2446f9=(0x0,oe['opendirSync'])((0x0,le[_0x39d805(0x273)])(this[_0x39d805(0x489)],_0x39d805(0x4fa),_0x531c6b[_0x39d805(0x5bb)][_0x39d805(0x101)]),{'encoding':_0x39d805(0x5a8)});for await(let _0x5356e4 of _0x2446f9)_0x5356e4[_0x39d805(0x1c5)]()&&_0x4e0072[_0x39d805(0x53b)](JSON[_0x39d805(0x5f3)]((0x0,oe[_0x39d805(0xdd)])((0x0,le['join'])(this[_0x39d805(0x489)],_0x39d805(0x4fa),_0x531c6b['where'][_0x39d805(0x101)],_0x5356e4[_0x39d805(0x44c)]),{'encoding':_0x39d805(0x5a8)})));}return _0x4e0072[_0x39d805(0x1dc)]((_0x3fe320,_0x59465d)=>_0x59465d[_0x39d805(0x14e)]-_0x3fe320['messageTimestamp'])[_0x39d805(0xba)](0x0,_0x531c6b?.[_0x39d805(0x412)]??_0x4e0072[_0x39d805(0x291)]);}catch{return[];}}async[a0_0x4851ee(0x522)](_0x491f08){const _0x429671=a0_0x4851ee;try{if(this[_0x429671(0x477)][_0x429671(0x1a4)])await this['messageModel'][_0x429671(0xd9)]({..._0x491f08[_0x429671(0x5bb)]});else{let {owner:_0x4b3ce0}=_0x491f08[_0x429671(0x5bb)];(0x0,oe['readdirSync'])((0x0,le[_0x429671(0x273)])(this[_0x429671(0x489)],_0x429671(0x4fa),_0x4b3ce0))['forEach'](_0x36b57c=>{const _0x2ead09=_0x429671;let _0x1921d2=(0x0,le[_0x2ead09(0x273)])(this[_0x2ead09(0x489)],_0x2ead09(0x4fa),_0x4b3ce0,_0x36b57c);(0x0,oe[_0x2ead09(0x329)])(_0x1921d2);});}}catch(_0x336075){console['error'](_0x336075);}}async[a0_0x4851ee(0x3be)](_0x3b453d,_0x593f05){const _0xcb0a16=a0_0x4851ee;try{let _0xe7476f=null;if(this['dbSettings'][_0xcb0a16(0x1a4)])return _0xe7476f=await this[_0xcb0a16(0x5cc)][_0xcb0a16(0x5d7)]({..._0x3b453d[_0xcb0a16(0x5bb)]},{'$set':_0x593f05},{'new':!0x0}),_0xe7476f;}catch(_0x7d6d3){throw console[_0xcb0a16(0x44b)](_0x7d6d3),_0x7d6d3;}}async[a0_0x4851ee(0x2ab)](_0x4e168f,_0x6dc62d=!0x1){const _0x123882=a0_0x4851ee;if(_0x4e168f[_0x123882(0x291)]!==0x0)try{return this['dbSettings'][_0x123882(0x1a4)]&&_0x6dc62d?{'insertCount':(await this[_0x123882(0x5cc)]['insertMany']([..._0x4e168f]))[_0x123882(0x291)]}:_0x6dc62d?(_0x4e168f[_0x123882(0x386)](_0x1a4950=>this[_0x123882(0x3b4)]({'path':(0x0,le[_0x123882(0x273)])(this[_0x123882(0x489)],_0x123882(0x4fa),_0x1a4950[_0x123882(0x101)]),'fileName':_0x1a4950[_0x123882(0x67c)]['id'],'data':_0x1a4950})),{'insertCount':_0x4e168f[_0x123882(0x291)]}):{'insertCount':0x0};}catch(_0x1dec10){return console[_0x123882(0x2c6)](_0x123882(0x52c),_0x1dec10),_0x1dec10;}finally{_0x4e168f=void 0x0;}}},se=require('fs'),uo=T(require(a0_0x4851ee(0x597))),w=T(require(a0_0x4851ee(0x56e))),_e=require('fs'),$=T(require(a0_0x4851ee(0x539))),ue=T(require(a0_0x4851ee(0x9a))),po=require(a0_0x4851ee(0x483)),go=T(require('qrcode')),mo=T(require(a0_0x4851ee(0x163))),Xs=['imageMessage',a0_0x4851ee(0x2fd),a0_0x4851ee(0x32c),a0_0x4851ee(0x672),a0_0x4851ee(0x25a)],Zs=[a0_0x4851ee(0xd8),'documentWithCaptionMessage',a0_0x4851ee(0x16b),'viewOnceMessageV2'],ho=require('os'),kt=T(require(a0_0x4851ee(0x4d8))),Vt=require(a0_0x4851ee(0xa6)),Ns=require(a0_0x4851ee(0x251)),Be=require(a0_0x4851ee(0x5ad)),rs=T(require(a0_0x4851ee(0x5ad))),ea=new C(a0_0x4851ee(0x397)),q=y['get'](a0_0x4851ee(0x4c2)),M=q[a0_0x4851ee(0x1a4)]?q[a0_0x4851ee(0x3f3)][a0_0x4851ee(0x224)]?rs['default'][a0_0x4851ee(0x189)](q[a0_0x4851ee(0x3f3)][a0_0x4851ee(0x224)],{'dbName':q['CONNECTION']['DB_PREFIX_NAME']+a0_0x4851ee(0x669)}):rs[a0_0x4851ee(0x481)]['createConnection'](a0_0x4851ee(0x3d3)+q[a0_0x4851ee(0x3f3)][a0_0x4851ee(0x33f)]+':'+q['CONNECTION'][a0_0x4851ee(0x53c)]+a0_0x4851ee(0x3b9),{'user':q[a0_0x4851ee(0x3f3)][a0_0x4851ee(0x52f)],'pass':q[a0_0x4851ee(0x3f3)][a0_0x4851ee(0x593)],'dbName':q[a0_0x4851ee(0x3f3)]['DB_PREFIX_NAME']+a0_0x4851ee(0x669)}):null;q[a0_0x4851ee(0x1a4)]&&ea[a0_0x4851ee(0x1e4)]('ON\x20-\x20dbName:\x20'+M[a0_0x4851ee(0x4ac)]);async function Go(){const _0x238725=a0_0x4851ee;await I['updateMany']({'leadInfo.tags':{'$exists':!0x1}},{'$set':{'leadInfo.tags':[]}}),await I[_0x238725(0x1b0)]({'leadInfo.customFields':{'$exists':!0x1}},{'$set':{'leadInfo.customFields':[]}}),await I['updateMany']({},{'$unset':{'lastUpdate':0x1,'lastMsgUpdate':0x1}});}function a0_0x1c05(){const _0x3d636c=['Falha\x20ao\x20deletar\x20contatos:','Error\x20change\x20group\x20description','string','CHATS_DELETE','findFlow','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','dbClient','CREDENTIALS','variable','nextBlock:','6mPXrnR','replace','localWebhook','pre','android','description','.jwt','public','charAt','updateReadReceiptsPrivacy','uazapi','updateCustomFields','profilePicture','getTime','updateStopChat','mediaMessage','isJidGroup','Hash\x20to\x20image\x20name:\x20','PASSWORD','*\x0a\x0a','findByIdAndDelete','optionDescription','@ffmpeg-installer/ffmpeg','hasOwnProperty','normalizeMessage','Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','):\x20Criada\x20conversa\x20nova\x20(gotoflow)','groupSetting','Erro\x20ao\x20buscar\x20conversa:\x20','WEBHOOK_EVENTS_CHATS_UPSERT','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','unhandledRejection','instance','):\x20Campos\x20a\x20serem\x20atualizados:','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','stack','DEBUG','utf-8','includes','groupDesc','Missing\x20global\x20api\x20key','Fluxos\x20não\x20estão\x20ativados','mongoose','query','deleteConversation','../env.yml','\x20segundos','):\x20Erro\x20ao\x20criar\x20fluxo\x20','WEBHOOK_EVENTS_CHATS_SET','6676360tBfHNf','435212hVMvIJ','\x1b[33m%s\x1b[0m','^\x5cd+[\x5c.@\x5cw-]+','get','trim','getProfileName','where','messageHandle','updateGParticipate','message','saveConversationToDatabase','waMonit','WA\x20MODULE','fetchLatestBaileysVersion','pollCreationMessage','pollCreationMessageV3','generateHash','Authentication\x20error','item','padStart','API_KEY','PENDING','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','messageModel','editFlowBlock','.TEL;waid=','updateParticipant','stopMinutesMaxActives','deleteInstance','QRCODE_LIMIT','.json','):\x20Error\x20processing\x20the\x20block:\x20','floor','allFlows','findOneAndUpdate','updateGroupsAddPrivacy','dayjs','Getting\x20profile\x20info','findWebhook','errorLog','numbers','removed','Instance\x20\x22','audio/mp4','connected','Temp\x20audio\x20path:\x20','/instance/create','readdirSync','address','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','CHATS_SET','logger','@g.us','catch','profile','Content-Type','The\x20','buttonText','pollMessage','Original\x20filename:','\x1b[34m','getConversation','parse','findById','saveMediaToFile','website','Parando\x20aplicação,\x20atualização\x20recebida','findAndReplaceRegex','sudo\x20apt\x20install\x20-y\x20ffmpeg','toUpperCase','AutomateSystem\x20não\x20foi\x20inicializado','false','success','wuid','updateLastSeenPrivacy','flowIgnoreGroups','close','updateFlowConfig','):\x20lastBlockId:\x20','Temp\x20audio\x20created','Background\x20color\x20is\x20required','deleteFlow','empty','WEBHOOK_EVENTS_CONTACTS_SET','restrict','MAX_RECONNECT_ATTEMPTS','jwt','endsWith','contains','Output\x20audio\x20path:\x20','488mnfqNG','):\x20atualização\x20chat:\x20','http://checkip.dyndns.org','role','toArray','processPollUpdateMessage','newStoppedUntil','static','ERROR','currency','DisconnectReason','jsonwebtoken','write','apiName','NAME','sendDataWebhook','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','type','):\x20Mensagens\x20com\x20status\x20\x22done\x22\x20deletadas\x20com\x20sucesso.','findGroup','CORS','QRCODE_UPDATED','Não\x20foi\x20possível\x20obter\x20o\x20endereço\x20IP,\x20interrompendo\x20a\x20aplicação.','variables','STORE_MESSAGE','deleteMessage','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','URL','getLastMessage','request\x20body:\x20','Erro\x20ao\x20tentar\x20updateCustomFields:\x20','editFlowReply','SendScheduleMessage','):\x20Flow\x20desativado','media','Falha\x20ao\x20deletar\x20mensagens\x20antigas:','setWebhook','request\x20received\x20in\x20updateCustomFields','isURL','editOperator','jpegThumbnail','command','editFlowCondition','stringify','Font\x20is\x20required','fetchProfilePicture','groupToggleEphemeral','connectionClosed','):\x20Entrou\x20na\x20função\x20saveReply','/automate','state','repository','decryptPollVote','creds.update','group','sendMessage','setHeader','instanceName\x20not\x20provided.','presenceSubscribe','chatLog','getFlow','router','waitingPoll_replyOptions','nomecompleto','sha256','stdout','height','isInteger','Contacts\x20not\x20found','\x20}\x0a','params','exists','app-state-sync-key','object','E-mail:\x20','\x20mensagens\x20de\x20','action','generateWAMessageFromContent','reviver','groups','formatVCard','dropCollection','redisCache','/wa-contacts','imageMessage','end','REDIS','Início','createFlow','redis-server','-whatsapp-api','goNextblock','connectionStatus','\x20não\x20encontrado','Converted\x20audio\x20deleted','endSession','existsSync','originalUrl','del','videoMessage','removeProfilePicture','minutesToClose','Unauthorized','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','sendLocation','paused','Error\x20updating\x20profile\x20name','waitingPoll_name','\x20não\x20encontrado\x20para\x20atualização.','key','response','request\x20received\x20in\x20editFlow','qrCode','axios','uazapiSendPoll','\x1b[32m','CHATS_UPSERT','varedits','WEBHOOK_EVENTS_MESSAGES_UPDATE','prefixCommand','lean','https://github.com/uazapi/uazapi.git','WEBHOOK_EVENTS_CONTACTS_UPDATE','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','setting','child_process','flowPrefixCommand','editflowreply','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','toggleEphemeral','https://api.ipify.org?format=json','fetchStatusMessage','notContains','stateConnection','Erro\x20ao\x20editar\x20agentes:\x20','):\x20Ler\x20mensagem','addresss','random','badSession','replacer','subjectOwner','AUTHENTICATION_API_KEY','validate','addBlock','unavailable','splice','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','addReplyOption','body','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','waInstances','updateProfileStatus','composing','updateChatWithMessage','getScheduleMessage','blocks','Error\x20fetching\x20and\x20updating\x20profile:\x20','font','contact_blacklist','footerText','\x22\x20not\x20found','\x1b[33m','writeData','reaction','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','GUARD','message-up','substring','The\x20instance\x20is\x20already\x20connected','messages.update','loadInstance','archived','Flow\x20already\x20exists','json','fetchPrivacySettings','ephemeralMessage','deleteMany','Audio\x20is\x20base64','jsonschema','\x22,\x20valor\x20a\x20substituir:\x20\x22','readFileSync','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','Router','):\x20newFirstValue\x20após\x20replaceVariables:','match','editScheduleMessage','sharp',',\x20Minutes\x20to\x20Close:\x20','CONFIG_SESSION_PHONE_CLIENT','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','Erro\x20ao\x20iniciar\x20fluxo:\x20','):\x20Entrou\x20na\x20função\x20goToFlow','Imagem\x20não\x20encontrada','Error\x20deleting\x20instance\x20from\x20memory.','customFields','statusMessage','isJidUser','\x20foram\x20adicionados\x20\x22contactname\x22\x20','pt-BR','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','):\x20Erro\x20ao\x20buscar\x20Schedule\x20Messages:','getVariablesChat','uazapiDeleteMessage','nome','):\x20Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20','fetchBusinessProfile','segundos','true','then','connectionUpdate','imagechat','folder','Output\x20path:\x20','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','image','modifiedCount','owner','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','conversation','):\x20Editando\x20condição\x20do\x20fluxo...','BufferJSON','documentWithCaptionMessage','instanceInfo','markMessageAsRead','Instance\x20ID:','Read\x20messages','):\x20Going\x20to\x20','Validate','^\x5cd+','Button\x20IDs\x20cannot\x20be\x20repeated.','Error\x20writing\x20file:\x20','):\x20Editando\x20grupo\x20do\x20fluxo...','quotedMessage','CLEANING_INTERVAL','variablesNotFound','isJWT','Not\x20Found','local_map','):\x20isVote','scheduleSendAudio','delInstanceTime','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','utf8','contactMessage','LOG','}}\x20->\x20\x22','getMinutes',',\x20Resultado:\x20','getDelay','blockId','Image\x20is\x20url','):\x20não\x20encontrou','profilePictureUrl','stopMinutes','\x20-\x20ON:\x20','upsertChats','TEXT','Trying\x20to\x20get\x20business\x20profile','findParticipants','isRunning','processUazapi','--version','revokeInviteCode','SERVER_PORT','inviteCode','status@broadcast','Invalid\x20format','):\x20Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20','fromObject','):\x20Procurando\x20mensagens\x20para\x20envio','fetchMessages','updateConversation','dataValidate','updatePresence','use','\x20inseridas\x20no\x20banco\x20de\x20dados...','DATABASE_CONNECTION_DB_PREFIX_NAME','viewOnceMessageV2','from','CONFIG_SESSION_PHONE','SEND_MESSAGE','):\x20Deletados\x20','\x1b[46m','messagesSend','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','leadInfo.','deleteOne','deleteBlock','):\x20Editando\x20replyOption...','DEL_INSTANCE','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','cors','/instance/fetchInstances','messageTimestamp','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','):\x20this.processingScheduleMessageId:\x20','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','prototype','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','assign','getOwnPropertyDescriptor','sending','scheduleNextCheck','formatBRNumber','backgroundColor','readMessageBot','selectableCount','\x20chats\x20de\x20','DB_PREFIX_NAME','instance.','hostname','src','messageId','console','qrcode-terminal','contactHandle','findAndReplace','max','findGroups','Message','SSL_CONF_PRIVKEY','leaveGroup','viewOnceMessage','Atualização:\x20','participants','Variável\x20não\x20encontrada!','_p_','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','warn','flowStopConversation','firstValue','):\x20Tentando\x20deletar\x20todas\x20mensagens\x20updates...','GROUPS_UPSERT','):\x20Procurando\x20conversa','cleanStore','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','datetime','remoteJids','processConditionsTest','authentication','blockLogs','isBase64','groupRevokeInvite','Types','uazapiSendContact','error_log','Unknown\x20message\x20type\x20encountered','KEY','DATABASE_CONNECTION_USER','Image\x20is\x20base64','.mp3','Fetching\x20business\x20profile','createConnection','):\x20alterando\x20this.AutomateSystem','editFlowVaredit','BRL','groupHandler','Instance\x20restarted','indexOf','execSync','stoppedUntil','/:instanceName','Data\x20inválida\x20fornecida','groupInviteCode','NextBlock','updateProfilePicture','?timestamp=','post','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','Não\x20é\x20possível\x20excluir\x20uma\x20mensagem\x20que\x20está\x20atualmente\x20em\x20processamento.\x20Pause\x20primeiro\x20e\x20espere\x20em\x20torno\x20de\x2020\x20segundos\x20para\x20deletar','):\x20Conversa\x20atualizada\x20em\x20memória','title','1853225bQEqJr','not\x20loaded','STATUS_INSTANCE','The\x20property\x20cannot\x20be\x20empty','PREFIX_KEY','#ffffff','.refreshToken','ENABLED','number','filter','This\x20name\x20','create','Valor\x20de\x20find\x20ou\x20replace\x20ausente','\x0a{\x20instance:\x20','/create','/wa-message','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','authModel','stanzaId','updateMany','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','Conexão\x20estabelecida','Converted\x20image\x20deleted','STORE_CHATS','spawn','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','deleteReplyOption','code','some','):\x20Flow\x20não\x20encontrado','):\x20Limpando\x20delayMessage','verbose','TRIAL_AD','\x22\x20-\x20NOT\x20CONNECTION','Erro:','connectToWhatsapp','):\x20Erro\x20ao\x20deletar\x20mensagens\x20com\x20status\x20\x22done\x22:','sem\x20texto\x20na\x20mensagem','cwd','CHATS_UPDATE','isFile','-version','DOCKER_ENV','authState','joinGroup','/instance','):\x20expirationTime:\x20',',\x20Expiration\x20Time:\x20',',\x20Segundo\x20Valor:\x20','sendPoll','errno','Instância\x20não\x20encontrada.','delInstanceFiles','sendWhatsAppAudio','contactModel','/wa-connection-update','):\x20Erro\x20ao\x20editar\x20a\x20conversa:\x20','convert','):\x20Erro\x20ao\x20deletar\x20a\x20conversa\x20','AutomateFunctions','Erro\x20ao\x20editar\x20a\x20conversa:\x20','loggedOut','content','sort','INFO','g-t','):\x20Limpando\x20AutomateSystem','getflow','hSet','jid','scheduleMessage','info','delayMessage','longitude','chats.update','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','entries','/wa-presence','sendSticker','bodyString','Bloco\x20com\x20ID\x20','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','Log\x20out\x20instance:\x20','rowId','latitude','Instance\x20logged\x20out','REDIS_ENABLED','render','_activatedCount','):\x20Erro\x20ao\x20buscar\x20conversas\x20','request\x20received\x20in\x20editFlowcondition','\x0a*Você\x20respondeu*:\x0a','):\x20Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20schedule\x20message:\x20','deleteDoneMessages','No\x20participants','Image\x20created','\x20install\x20error:\x20','rm\x20-rf\x20','tokenId',',\x20lastCondition:\x20','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','chat','waUploadToServer','fetchChats','lastSend','Erro\x20ao\x20editar\x20o\x20bloco:\x20','interval\x20não\x20é\x20um\x20número','vcard','applyvaredit','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20áudio:','demote','contactsArrayMessage','responsavelid','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','Temp\x20audio\x20deleted','Erro\x20ao\x20criar\x20o\x20fluxo:\x20','next_groupId','flowname:\x20','statusCode','restartInstance','load','http','replaceVariables','Initial\x20__dirname:','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','/refreshToken','webhookModel','AUTOUPDATE','padEnd','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','request\x20received\x20in\x20editFlowvariable','reconnectTimestamps','updateOnlinePrivacy','metadata','express','URI','data:\x20','mediaSticker','notify','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','atendimentoAberto','):\x20Buscando\x20conversas...','subject','pollErrorMessage','lowerCase','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','integer','groupJid','opendirSync','stopped','processgoToFlow','encoding','DATABASE_CONNECTION_HOST','throwAndLogError',',\x20saindo.','startFlow','\x1b[36m','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','NEW_JWT_TOKEN','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','HH:mm:ss','The\x20instance\x20needs\x20to\x20be\x20disconnected','unreadcount','birthtime','getBusinessProfile','GROUPS_UPDATE','Archiving\x20chat','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','less','Já\x20existe\x20fluxo\x20com\x20esse\x20nome','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','evaluateConditionTest','all','/exit','ini','WEBHOOK_EVENTS_MESSAGES_SET','61208DQfOAP','Not\x20is\x20business\x20profile','fetchInstances','/wa-message-update','node-mime-types','READ','checkAndUpdateChats','26242177JJhLYP','text/event-stream','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','Temp\x20image\x20deleted','chrome','):\x20','stickerMessage','):\x20encontrado\x20próxima\x20mensagem\x20para\x20','Falha\x20ao\x20deletar\x20mensagens:','enabled','\x1b[32m%s\x1b[0m','):\x20tem\x20blocks','\x1b[1m','apply','readreceipts','equal','@broadcast','findGroupInfo','pollUpdateMessage','fromMe','replaceOne','groupMetadata','created','sections','toFile','ip:\x20','headerString','goToFlow','https://','readMessage','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20','join','announce','mentions','presence','flowStopMinutes','envProcess','remove.instance','parseInt','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP:','contentText','API\x20Key\x20inválida.','eventEmitter','AUTHENTICATION_JWT_SECRET','output','CONTACTS_UPDATE','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','sendButtons','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','EXPIRIN_IN','\x1b[0m','isArray','emit','flushHeaders','FULLCHAIN','client','findMessages','.mp4','video-cover.png','msgRetryCounterCache','):\x20Enviando\x20localização','length','loadEnv','allflows','Error\x20updating\x20profile\x20status','enumerable','maxActives','refreshToken','Schema','flowConfig','reorderBlocks','capitalizedWords',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','):\x20Não\x20achou\x20nenhum\x20flow','Not\x20allowed\x20by\x20CORS','updateAgent','sudo\x20apt\x20install\x20-y\x20redis-server','makeCacheableSignalKeyStore','hbs','whatsappNumber','contactname','):\x20Erro\x20ao\x20iniciar\x20fluxo\x20','chats','1266vRZAKu','locationMessage','newName','):\x20Iniciando\x20bot...','insertMany','fileName','):\x20Editando\x20bloco...','PRODUCTION','):\x20Erro\x20ao\x20buscar\x20a\x20conversa\x20','messages.upsert','\x1b[44m','replaceVariablesInObject','\x1b[34m%s\x1b[0m','DELIVERY_ACK','keys','oldToken','app','RECONNECT_TIME_FRAME','saveChatVariables','}}\x20->\x20valor\x20não\x20encontrado','vote','createWebhook','8080','uazapiSendText','uazapiSendLocation','conversationTimestamp','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','convertedOptions','exit','Tanto\x20id\x20quanto\x20owner\x20são\x20necessários\x20para\x20criar\x20ou\x20editar\x20um\x20chat.','DATABASE_ENABLED','log','lastBlockId','replaceVariablesLogs','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','ex:\x20\x22groupJid=120362@g.us\x22','collections','Sending\x20audio\x20whatsapp','options','ignoreGroups','joinGroupValidate','connection.update','sendCommand','fullName','/media/','191655yPyPTG','processConditions','Sistema\x20atualizado\x20com\x20sucesso!','saveVariable','messageUpModel','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','\x1b[37m','none','trimmed','subjectTime','groupParticipantsUpdate','bearer','authService','):\x20updateResult:','logout','compression','toBrazilianNumberFormat','getAutomateSystem','out','notas','CORS_ORIGIN','Error\x20in\x20markMessageAsRead:',',\x20resultado:\x20','):\x20Tentando\x20deletar\x20todas\x20os\x20contatos...','findByIdAndUpdate','Forbidden','__esModule','createInstance','Valor\x20inicial:\x20\x22','truncatedtoEnd','textMessage','Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','Type\x20is\x20required','mediatype','AUTHENTICATION_TYPE','lastMessage','groups.update',',\x20qrcodeCount:\x20','documentMessage','isLong','):\x20Edit\x20schedule\x20message...','CONTACTS_SET','group-participants.update','Parando\x20aplicação...','createClient','request\x20received\x20in\x20allFlows','Erro\x20ao\x20deletar\x20a\x20conversa:\x20','STORE','routerPath','Group\x20not\x20found','reference','sendStatus','Erro\x20ao\x20aplicar\x20varedit:\x20','url','size','env','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','cleaningUp','base64','!cmd_','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','call','rmSync','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','available','Deletion\x20failed','editChat','updateMessage','method','updateProfilePicturePrivacy','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','presence.update','@s.whatsapp.net','198288FXvuGl','notEmpty','buttonsMessage','privacySettings','WEBHOOK_EVENTS_CONNECTION_UPDATE','createServer','No\x20invite\x20code','delAll','qrcode.updated','unlinkSync','secondValue','status.instance','audioMessage','request\x20received\x20in\x20editFlowgroup','request\x20received\x20in\x20createFlow','arraybuffer','Error\x20fetching\x20group','valid','key.','dbInstance','views','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','defineAuthState','replaceValue','getStatus','HeaderType','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','protocolMessage','AppStateSyncKeyData','NO_IP','saveAPI','HOST','Telefone:\x20','writeFile','apikey','groupUpdateDescription','poll_id','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','replyOptions','isConnected','activatedCount','editFlowGroup','temp-','Unable\x20to\x20leave\x20the\x20group','pop','AutomateSystem','Close\x20connection','findIndex','findStatusMessage','PHONE','saveTextReply','header','MESSAGES_UPDATE','syscall','TYPE','groupFetchAllParticipating','https://jsonip.com','Converting\x20image\x20to\x20WebP\x20to\x20sticker','errors','video','\x22\x20cannot\x20be\x20empty','contacts.update','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','sleep','removeData','request\x20received\x20in\x20fetchConversation','apiResponse','processingScheduleMessageId','matchRegex','getBase64FromMediaMessage','editFlowVariable','upperCase','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','changeVariables','\x20contacts','\x20messages.','Conversa\x20deletada\x20com\x20sucesso.','):\x20debug\x20alterando\x20this.AutomateSystem','Connection\x20closed\x20for\x20instance:\x20','FlowController','webhookMap','verify','createConversationforStartFlow','ButtonsMessage','leadInfo.desativadoFluxoAte','.sendDataWebhook-local','\x1b[40m','DATABASE_CONNECTION_URI','getAllData','picture','Type\x20defined\x20as\x20audio','pollMessageOnDelete','exec','sendList','no.connection','Error\x20updating\x20message\x20status:','arrayUnique','participant','onTime','including\x20timestamp\x20in\x20url:\x20','removeInstance','forEach','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','mediaKey','prepareMediaMessage','fetchConversation','ObjectId','readMessages','archive','groupadd','EMAIL','generate','PLAYED','Error\x20updating\x20participants','messageContextInfo','getMIMEType','flattenObject','SUCCESS','Db\x20Connection','CLIENT','lastSendMessage','keep-alive','12PBXQBZ','creds','Media\x20folder\x20does\x20not\x20exist,\x20creating\x20folder...','Erro\x20ao\x20alterar\x20o\x20fluxo:\x20','\x1b[1m\x1b[37m','buttons','urlencoded','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','hex','send.message','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','fetchProfile','/events','updateOne','displayName','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','WEBHOOK_EVENTS_CONTACTS_UPSERT','array','caption','waitingPoll_id','downloadMediaMessage','StartBot','\x5cd+','lastInteraction','toBRL','writeStore','order','toDataURL','/wa-groups','insert','?authSource=admin&readPreference=primary&directConnection=true','convertaudio','delaySecMax','SSL_CONF','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','update','_id','Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','https://chat.whatsapp.com/','Profile\x20not\x20found','formatStatusMessage','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','moreLogs','Error\x20change\x20group\x20setting','redirect','urlOrBase64','slice','):\x20teve\x20mudanças\x20chat.displayName:\x20','Enter\x20a\x20value\x20in\x20milliseconds','Cannot\x20','!stop','findOne','eventHandler','TRIAL_INSTANCE_NAME','Message\x20not\x20found','WEBHOOK_GLOBAL_URL','mongodb://','12TtjNal','messages.set','):\x20Enviando\x20texto','):\x20Conversa\x20inserida\x20com\x20sucesso.','\x20\x1b[0m','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','STORE_CLEANING_TERMINAL','ffmpeg','Mensagem\x20não\x20suportada','getClient','.ogg','processblock','50mb','error\x20get\x20vote','test','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','deletedCount','Invalid\x20\x22oldToken\x22','condition','):\x20Enviando\x20mídia','conditions','PRESENCE_UPDATE','STORE_CONTACTS','realVariables','option','findChats','dbServer','):\x20Erro\x20durante\x20a\x20atualização:\x20','flowConversation','Error\x20updating\x20setting','COLOR','CONNECTION','connecting','web','class-validator','/wa-chats','expiration','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','updatePrivacySettings','):\x20Editando\x20variável\x20do\x20fluxo...','quoted','pollCreationMessageV2','):\x20Alterando\x20fluxo...','model','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','MESSAGES_SET','\x20inseridos\x20no\x20banco\x20de\x20dados...','user','.\x20Pulando.','toLocaleString','eventemitter2','22uTFIOK','editConversation','toString','verifiedName','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','buttonId','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','chatModel','instances','GLOBAL','CORS_METHODS','limit','uazapiSendMedia','FlowRouter','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','ReplyOption\x20com\x20ID\x20','configService','statSync','replyOption','@redis/client','lastReceivedMessage','fone','Hash\x20to\x20audio\x20name:\x20','flow','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','CONNECTION_UPDATE','chats.delete','SERVER_TYPE','flowActive','envYaml','Image\x20path:\x20','\x1b[37m%s\x1b[0m','sendMessageWithTyping','getRandomText','replaceVariablesInReplyOptions','*Pergunta*:\x20\x0a','groups_ignore','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','notEqual','PRIVKEY','mentioned','cpf','contacts.upsert','LOG_COLOR','):\x20Current\x20Time:\x20','groupId','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','AUTHENTICATION_JWT_EXPIRIN_IN','request\x20received\x20in\x20starFlow','rows','send','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','GROUP_PARTICIPANTS_UPDATE','chatHandle','scheduleSendText','editflow','buttonMessage','):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20e\x20não\x20é\x20a\x20stopConversation.\x20Saindo\x20da\x20função.','pushName','LEVEL','webhookService','put','):\x20Visualizando\x20AutomateSystem','processApiRequest','EVENTS','value','bateu\x20events','error','name','editflowcondition','scheduled','\x1b[30m%s\x1b[0m','PROD','OrAnd','repeat','Button\x20texts\x20cannot\x20be\x20repeated','headers','SECRET','prepareWAMessageMedia','proto','\x1b[33m\x1b[1m','connectionState','AUTHENTICATION','groupName','EMAIL:','userDevicesCache','closed','desativadoFluxoAte','group\x20ignored','WEBHOOK_MAP','WARN','.josn','apirequest','open','listMessage','audio','data','#000000','desc','start','createJid','online','isDirectory','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','\x0aitem','readData','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','Content\x20is\x20required','groupLeave','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','whatsappNumbers','dbSettings','connect','):\x20Buscando\x20conversa...','\x1b[41m','\x20messages.update.','Comando\x20desconhecido','CONTACTS_UPSERT','):\x20Conversas\x20encontradas:','last','closeExistingConversations','default','writeFileSync','uuid','):\x20teve\x20mudanças\x20chat.archived:\x20','StatusJidList\x20is\x20required','createNewConversation','find','):\x20delete\x20=\x20true','storePath','varedit','editFlow','Operador:\x20\x22','stopConversation','Número:\x20','loadWebhook','getHours','webhook','\x20is\x20already\x20in\x20use.','context','Nenhum\x20chat\x20encontrado\x20para\x20editar.','function','-instances','Business\x20profile\x20fetched','stderr','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','updateProfileName','delay','reconnectAttempts','mkdirSync','URL:','Getting\x20audio\x20from\x20url','phoneNumber','tags','redis','messageSecret','initAuthCreds','values','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','replaceVariablesChat','audioWhatsapp','API\x20Key\x20from\x20Request:','NODE_ENV','$dbName','WEBHOOK_EVENTS_CHATS_DELETE','DELETED','poll','release','view\x20engine','isBusiness','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','email','/webhook','getDevice','bulkWrite','now','events','.webp','collection','createConversationforgoToFlow','findContacts','ios','\x20horas\x20e\x20','uazapiSendAudio','instanceKeys','DATABASE','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','dark','refused','count','lastmsg','_doc','Flow\x20não\x20encontrado','sendText','redisEnv','updateBlock','\x20contatos\x20inseridos','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','Erro\x20ao\x20encerrar\x20a\x20API','toNumber','SERVER','promote','restart','organization','downloads','contacts','createGroup','pino','getMessage','delaySecMin','):\x20Mensagem\x20já\x20enviada\x20para\x20','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-f\x20ipod\x20','split','/clients-info','block','Read\x20messages\x20fail','variablesToObject','remoteJidsRemaining','):\x20Deletando\x20fluxo...','evaluateCondition','startsWith','WEBHOOK','lastCondition','Audio\x20processed','\x20minutos\x20verificará\x20novas\x20mensagens','Media\x20folder\x20path:','updateGroupPicture','pollOnReplyDelete','scheduleSendMedia','Error\x20update\x20group\x20picture','DARK','chats.upsert','setContext','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','sendPresenceUpdate','Including\x20timestamp\x20in\x20url:\x20','fileLength','):\x20Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','noConnection','):\x20Buscando\x20flow...','\x20install\x20output:\x20','messages','):\x20Comando\x20desconhecido:\x20','env.KEY\x20!==\x20key','expression','round','done','create\x20-\x20success','messageUpdate','save','):\x20Criou\x20conversa\x20no\x20startFlow:','Primeiro\x20Valor:\x20','VERBOSE','WEBHOOK_EVENTS_QRCODE_UPDATED','messaging-history.set','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20','qrcode','createflow','not_announcement','Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','LICENSE_INVALID','and','express-async-errors','groups.upsert','finish','set','Próxima\x20verificação\x20em\x20','document','fetchProfile2','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','status','inner','.png','map','WEBHOOK_GLOBAL_ENABLED','Method\x20not\x20implemented.','when','):\x20Criando\x20nova\x20conversa','editedMessage','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','leadInfo','delete','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo\x20','format','\x20-y','sendMedia','The\x20global\x20api\x20key\x20must\x20be\x20set','groupValidate','waMonitor','uncaughtException','contextInfo','ERROR:\x20','text','reactionMessage','USER','Subscribed\x20Events:','statusJidList','Erro\x20ao\x20editar\x20o\x20chat:\x20','oldValue','toLowerCase','sendReaction','):\x20Ignoring\x20group\x20messages.','Processing\x20audio','Erro\x20ao\x20atualizar\x20conversa:\x20','path','remoteJid','push','PORT','mimetype','performBulkUpdate','JWT','senderKeyDistributionMessage','mongodb','Error\x20in\x20scheduleNextCheck:\x20','\x20minutos','updateGParticipant','Instância:\x20','Converting\x20audio\x20to\x20mp4','long','Audio\x20is\x20url','agents','CORS_CREDENTIALS','boolean','debug','\x20-i\x20','WEBHOOK_EVENTS_GROUPS_UPSERT','greater','recording','notMatchRegex','Erro\x20na\x20migração:','https','archiveChat','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','MESSAGES_UPSERT','ids','):\x20Falha\x20ao\x20deletar\x20mensagem.','audio/ogg;\x20codecs=opus','fetchContacts','add','):\x20Entrou\x20na\x20função\x20stop','chatModify','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','resetReconnectionVariables','$set','creds.json','WEBHOOK_EVENTS_MESSAGES_UPSERT','.X-ABLabel:Celular\x0a','leadInfo.customFields','Bad\x20Request','Desconectado,\x20parando\x20execução.','instanceName','auth','convertToWebP','):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20usuário\x20e\x20contém\x20palavras\x20para\x20pausar\x20o\x20fluxo','END:VCARD','Getting\x20profile\x20with\x20jid:\x20','/wa-qrcode','@whiskeysockets/baileys','getPrototypeOf','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:','/media','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','store','.sendDataWebhook-global','shift','contact'];a0_0x1c05=function(){return _0x3d636c;};return a0_0x1c05();}M?.['on'](a0_0x4851ee(0x5e1),()=>{const _0x36211e=a0_0x4851ee;I&&Go()[_0x36211e(0x5ea)](_0x2ae64d=>ea[_0x36211e(0x44b)](_0x36211e(0x552)+_0x2ae64d));});var ns=class{},qo=new Be[(a0_0x4851ee(0x298))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),Wo=new Be[(a0_0x4851ee(0x298))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[qo],'default':[]},'statusLead':{'type':String},'note':{'type':String},'disableFlowsUntil':{'type':Number},'serviceOpen':{'type':Boolean},'assignedTo':{'type':String}},{'_id':!0x1}),Ho=new Be[(a0_0x4851ee(0x298))]({'_id':{'type':String,'_id':!0x0},'id':{'type':String,'required':!0x0,'minlength':0x1},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':Wo,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'group_size':{'type':Number},'group_announce':{'type':Boolean},'lastUpdate':{'type':Number},'lastMsgUpdate':{'type':Number}}),I=M?.['model'](ns[a0_0x4851ee(0x44c)],Ho,a0_0x4851ee(0x2a6)),ta=require(a0_0x4851ee(0x5ad)),cs=class{},Ko=new ta[(a0_0x4851ee(0x298))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'id':{'type':String,'required':!0x0,'minlength':0x1},'profilePictureUrl':{'type':String,'minlength':0x1},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String}}),Fe=M?.[a0_0x4851ee(0x3ff)](cs[a0_0x4851ee(0x44c)],Ko,'contacts'),O=require(a0_0x4851ee(0x5ad)),sa=new O[(a0_0x4851ee(0x298))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),ls=new O[(a0_0x4851ee(0x298))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),zo=new O[(a0_0x4851ee(0x298))]({'command':{'type':String},'text':{'type':String},'delay':{'type':Number},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'pollErrorMessage':{'type':String,'default':'Por\x20favor,\x20responda\x20à\x20última\x20enquete\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.'},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),aa=new O['Schema']({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),oa=new O['Schema']({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String}},{'_id':!0x1}),Qo=new O[(a0_0x4851ee(0x298))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),ia=new O[(a0_0x4851ee(0x298))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':zo},'apirequest':oa,'stopMinutes':{'type':String},'goToFlow':{'type':String},'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa}}),hs=new O[(a0_0x4851ee(0x298))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),ra=new O[(a0_0x4851ee(0x298))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),us=class{},na=new O['Schema']({'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'readMessages':{'type':Boolean,'default':!0x1},'testingWith':{'type':String},'startCommandWord':{'type':String,'default':function(){const _0x4650ef=a0_0x4851ee;return _0x4650ef(0x312)+Math[_0x4650ef(0xb2)]()[_0x4650ef(0x409)](0x24)[_0x4650ef(0x3c9)](0x2,0x7);},'required':!0x1,'minlength':0x5},'variables':[hs],'variablesNotFound':{'type':[String]},'blocks':[ia],'groups':[sa],'conditions':[aa],'varedits':[ra],'replyOptions':{'type':[ls],'default':[]}});na['pre'](a0_0x4851ee(0x502),function(_0x5c8785){const _0x34bcac=a0_0x4851ee;let _0xd0c536=new Set(),_0x2274f4=new Set(this[_0x34bcac(0x626)]?.[_0x34bcac(0x51a)](_0x5f1e82=>_0x5f1e82[_0x34bcac(0x44c)])),_0x5971ff=JSON[_0x34bcac(0x63a)](this),_0x334427=/{{(?!_)([^}]*)}}/g,_0x2cd756;for(;(_0x2cd756=_0x334427['exec'](_0x5971ff))!==null;)_0x2274f4['has'](_0x2cd756[0x1])||_0xd0c536[_0x34bcac(0x55b)](_0x2cd756[0x1]);_0xd0c536[_0x34bcac(0x30d)]>0x0?(console[_0x34bcac(0x171)]('Variáveis\x20não\x20encontradas:',Array[_0x34bcac(0x13f)](_0xd0c536)),this[_0x34bcac(0x113)]=Array[_0x34bcac(0x13f)](_0xd0c536)):this[_0x34bcac(0x113)]=[],_0x5c8785();});var D=M?.[a0_0x4851ee(0x3ff)](us[a0_0x4851ee(0x44c)],na,a0_0x4851ee(0x41e)),Yo=new O[(a0_0x4851ee(0x298))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[hs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[Qo]},{'_id':!0x1}),ds=class{},Xo=new O[(a0_0x4851ee(0x298))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[hs],'blocks':[ia],'groups':[sa],'conditions':[aa],'varedits':[ra],'replyOptions':{'type':[ls],'default':[]},'chatLog':Yo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x4851ee(0x465)},'waitingPoll_id':{'type':String},'waitingPoll_name':{'type':String},'waitingPoll_replyOptions':{'type':[ls],'default':[]}}),F=M?.[a0_0x4851ee(0x3ff)](ds[a0_0x4851ee(0x44c)],Xo,a0_0x4851ee(0x3f0)),ps=class{},Zo=new O['Schema']({'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'mediatype':{'type':String},'fileName':{'type':String}},{'_id':!0x1}),ei=new O[(a0_0x4851ee(0x298))]({'owner':{'type':String},'status':{'type':String,'default':a0_0x4851ee(0x44e)},'info':{'type':String},'type':{'type':String},'flowName':{'type':String},'message':{'type':Zo,'default':{}},'remoteJids':{'type':[String],'default':[]},'when':{'type':Number},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'messagesSend':{'type':[Object],'default':[]},'remoteJidsRemaining':{'type':[String],'default':[]},'startSend':{'type':Number}}),U=M?.[a0_0x4851ee(0x3ff)](ps[a0_0x4851ee(0x44c)],ei,'scheduleMessages'),gs=class{},ti=new O[(a0_0x4851ee(0x298))]({'name':{'type':String},'requests':[oa],'owner':{'type':String}}),en=M?.[a0_0x4851ee(0x3ff)](gs[a0_0x4851ee(0x44c)],ti,a0_0x4851ee(0x33e)),ms=class{},si=new O[(a0_0x4851ee(0x298))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),ai=new O[(a0_0x4851ee(0x298))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'},'stopConversation':{'type':String,'default':a0_0x4851ee(0x3cd)},'stopMinutes':{'type':Number,'default':0x14}},{'_id':!0x1}),oi=new O['Schema']({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),ii=new O[(a0_0x4851ee(0x298))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[oi]},'customFields':{'type':[si]},'flowConfig':{'type':ai,'default':{}}}),ie=M?.[a0_0x4851ee(0x3ff)](ms['name'],ii,a0_0x4851ee(0x34e)),be=T(require('mongoose')),k=require(a0_0x4851ee(0x3f6)),fe=class{constructor(_0x579996,_0x32163c,_0x5a79f3){const _0x14b4a0=a0_0x4851ee;this['jid']=_0x579996,this['exists']=_0x32163c,this[_0x14b4a0(0x44c)]=_0x5a79f3;}},Je=class{},Ge=class{},Ce=class{},qe=class{},We=class{},we=class{},He=class{},Ke=class{},ze=class{},Qe=class{},Pt=T(require(a0_0x4851ee(0x223))),ca=require('fs'),la=require(a0_0x4851ee(0x539));async function Ye(_0x2b501b){const _0x12c191=a0_0x4851ee;let _0x5f08b3=J[_0x12c191(0xbf)][_0x2b501b];if(q[_0x12c191(0x1a4)]){let _0x396a7d=M[_0x12c191(0x3dd)]()['db'](q[_0x12c191(0x3f3)][_0x12c191(0x15d)]+_0x12c191(0x496))[_0x12c191(0x4bb)](_0x2b501b);return _0x5f08b3||(await _0x396a7d[_0x12c191(0x487)]({})[_0x12c191(0x613)]())[_0x12c191(0x291)]>0x0;}return _0x5f08b3||(0x0,ca[_0x12c191(0x66f)])((0x0,la[_0x12c191(0x273)])(j,_0x2b501b));}async function fs(_0x1cb535,_0x179af7,_0x225414){const _0xab7d2a=a0_0x4851ee;if(_0x1cb535[_0xab7d2a(0x670)][_0xab7d2a(0x5a9)](_0xab7d2a(0x5e3))||_0x1cb535[_0xab7d2a(0x670)][_0xab7d2a(0x5a9)](_0xab7d2a(0x14d))||_0x1cb535['originalUrl']['includes'](_0xab7d2a(0x24a)))return _0x225414();let _0x1ed7a6=_0x1cb535[_0xab7d2a(0x655)];if(!_0x1ed7a6?.[_0xab7d2a(0x567)])throw new g(_0xab7d2a(0x648));if(!await Ye(_0x1ed7a6[_0xab7d2a(0x567)]))throw new x(_0xab7d2a(0x5ed)+_0x1ed7a6['instanceName']+'\x20instance\x20does\x20not\x20exist');_0x225414();}async function ua(_0x3c7231,_0x56fe8a,_0x4019b2){const _0x3541f5=a0_0x4851ee;if(_0x3c7231['originalUrl'][_0x3541f5(0x5a9)](_0x3541f5(0x5e3))){let _0x50eb04=_0x3c7231[_0x3541f5(0xbd)];if(await Ye(_0x50eb04[_0x3541f5(0x567)]))throw new re(_0x3541f5(0x1a7)+_0x50eb04[_0x3541f5(0x567)]+_0x3541f5(0x492));J[_0x3541f5(0xbf)][_0x50eb04[_0x3541f5(0x567)]]&&delete J['waInstances'][_0x50eb04[_0x3541f5(0x567)]];}_0x4019b2();}var da=require(a0_0x4851ee(0x3f6)),pa=T(require(a0_0x4851ee(0x61a))),Xe=a0_0x4851ee(0x58b),ni=new C(a0_0x4851ee(0xce));async function ci(_0x4e0aed,_0x196104,_0xf45bbf){const _0x39b373=a0_0x4851ee;let _0x418cb0=_0x4e0aed['get']('apikey');if(_0x418cb0&&y[_0x39b373(0x5b8)]('AUTHENTICATION')['API_KEY'][_0x39b373(0x184)]!==_0x418cb0)throw new ne();if(y[_0x39b373(0x5b8)]('AUTHENTICATION')['API_KEY'][_0x39b373(0x184)]===_0x418cb0)return _0xf45bbf();if((_0x4e0aed[_0x39b373(0x670)]['includes'](_0x39b373(0x5e3))||_0x4e0aed['originalUrl'][_0x39b373(0x5a9)]('/instance/fetchInstances'))&&!_0x418cb0)throw new re('Missing\x20global\x20api\x20key','The\x20global\x20api\x20key\x20must\x20be\x20set');let _0x5b84d1=y[_0x39b373(0x5b8)](_0x39b373(0x45a))[_0x39b373(0x53f)];try{let [_0x49b1cd,_0xcba846]=_0x4e0aed[_0x39b373(0x5b8)]('authorization')[_0x39b373(0x4dd)]('\x20');if(_0x49b1cd[_0x39b373(0x534)]()!==_0x39b373(0x2e2))throw new ne();if(!(0x0,da[_0x39b373(0x114)])(_0xcba846))throw new ne();let _0x13d8e1=_0x4e0aed['params'],_0x1a1431=pa[_0x39b373(0x481)]['verify'](_0xcba846,_0x5b84d1['SECRET'],{'ignoreExpiration':_0x5b84d1['EXPIRIN_IN']===0x0});if(_0x13d8e1['instanceName']!==_0x1a1431[_0x39b373(0x567)]||Xe!==_0x1a1431[_0x39b373(0x61c)])throw new ne();return _0xf45bbf();}catch(_0x3d5436){throw ni[_0x39b373(0x44b)](_0x3d5436),new ne();}}async function li(_0x14b5e9,_0x59fd4b,_0x111605){const _0x2fe453=a0_0x4851ee;let _0x3af9a7=y['get']('AUTHENTICATION')['API_KEY'],_0x2bb491=_0x14b5e9[_0x2fe453(0x5b8)]('apikey');if(_0x3af9a7[_0x2fe453(0x184)]===_0x2bb491)return _0x111605();if(_0x14b5e9[_0x2fe453(0x670)][_0x2fe453(0x5a9)](_0x2fe453(0x5e3))){let _0x275824=y['get'](_0x2fe453(0x3d0)),_0x1489ee=_0x14b5e9[_0x2fe453(0xbd)]['instanceName'];if(_0x275824&&_0x1489ee[_0x2fe453(0x534)]()[_0x2fe453(0x4e5)](_0x275824['toLowerCase']()))return _0x111605();if(!_0x2bb491)throw new re(_0x2fe453(0x5ab),_0x2fe453(0x527));}if(_0x14b5e9[_0x2fe453(0x670)][_0x2fe453(0x5a9)](_0x2fe453(0x14d))&&!_0x2bb491)throw new re(_0x2fe453(0x5ab),_0x2fe453(0x527));if(_0x14b5e9[_0x2fe453(0x670)][_0x2fe453(0x5a9)](_0x2fe453(0x24a))&&!_0x2bb491)throw new re(_0x2fe453(0x5ab),_0x2fe453(0x527));try{let _0x1ca0cc=_0x14b5e9[_0x2fe453(0x655)];if((await de[_0x2fe453(0x568)]['find'](_0x1ca0cc[_0x2fe453(0x567)]))[_0x2fe453(0x342)]===_0x2bb491)return _0x111605();}catch{}throw new ne();}var ga={'jwt':ci,'apikey':li},Ka=require('express'),E=require(a0_0x4851ee(0x483)),S=(..._0x2c1e7b)=>{const _0x361209=a0_0x4851ee;let _0x84061f={};return _0x2c1e7b['forEach'](_0x51cd0e=>_0x84061f[_0x51cd0e]={'minLength':0x1,'description':'The\x20\x22'+_0x51cd0e+_0x361209(0x35d)}),{'if':{'propertyNames':{'enum':[..._0x2c1e7b]}},'then':{'properties':_0x84061f}};},v={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'instanceName':{'type':a0_0x4851ee(0x579)}},...S(a0_0x4851ee(0x567))},ma={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'oldToken':{'type':a0_0x4851ee(0x579)}},'required':[a0_0x4851ee(0x2b6)],...S(a0_0x4851ee(0x2b6))},wn={'properties':{'key':{'type':'object','properties':{'id':{'type':a0_0x4851ee(0x579)},'remoteJid':{'type':a0_0x4851ee(0x579)},'fromMe':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]}},'required':['id',a0_0x4851ee(0x53a),a0_0x4851ee(0x267)],...S('id',a0_0x4851ee(0x53a))},'message':{'type':'object'}}},X={'properties':{'delay':{'type':'integer','description':a0_0x4851ee(0x3cb)},'presence':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0xb9),a0_0x4851ee(0x317),a0_0x4851ee(0xc1),a0_0x4851ee(0x550),a0_0x4851ee(0x678)]}}},Z={'type':a0_0x4851ee(0x579),'pattern':a0_0x4851ee(0x5b7),'description':a0_0x4851ee(0x133)},ha={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...X},'textMessage':{'type':a0_0x4851ee(0x658),'properties':{'text':{'type':a0_0x4851ee(0x579)}},'required':[a0_0x4851ee(0x52d)],...S(a0_0x4851ee(0x52d))}},'required':['textMessage',a0_0x4851ee(0x1a5)]},fa={'type':'string','pattern':a0_0x4851ee(0x228),'description':'Invalid\x20format'},yn={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'number':{...fa},'options':{...X},'textMessage':{'type':a0_0x4851ee(0x658),'properties':{'text':{'type':a0_0x4851ee(0x579)}},'required':[a0_0x4851ee(0x52d)],...S(a0_0x4851ee(0x52d))}},'required':['textMessage',a0_0x4851ee(0x1a5)]},bn={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'number':{...fa},'options':{...X},'mediaMessage':{'type':a0_0x4851ee(0x658),'properties':{'mediatype':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0xff),a0_0x4851ee(0x514),'video','audio']},'media':{'type':a0_0x4851ee(0x579)},'fileName':{'type':a0_0x4851ee(0x579)},'caption':{'type':a0_0x4851ee(0x579)}},'required':[a0_0x4851ee(0x2f8),'media'],...S(a0_0x4851ee(0x2ac),'caption',a0_0x4851ee(0x631))}},'required':[a0_0x4851ee(0x590),a0_0x4851ee(0x1a5)]},wa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...X},'stickerMessage':{'type':'object','properties':{'image':{'type':a0_0x4851ee(0x579)}},'required':[a0_0x4851ee(0xff)],...S(a0_0x4851ee(0xff))}},'required':['stickerMessage','number']},ya={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'statusMessage':{'type':'object','properties':{'type':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0x52d),a0_0x4851ee(0xff),a0_0x4851ee(0x467),a0_0x4851ee(0x35c)]},'content':{'type':'string'},'caption':{'type':a0_0x4851ee(0x579)},'backgroundColor':{'type':a0_0x4851ee(0x579)},'font':{'type':a0_0x4851ee(0x22f),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x4851ee(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':a0_0x4851ee(0x10d),'description':a0_0x4851ee(0x520)}},'allContacts':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]}},'required':[a0_0x4851ee(0x620),a0_0x4851ee(0x1db)],...S('type',a0_0x4851ee(0x1db))}},'required':[a0_0x4851ee(0xec)]},ba={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'number':{...Z},'options':{...X},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0xff),a0_0x4851ee(0x514),a0_0x4851ee(0x35c),a0_0x4851ee(0x467)]},'media':{'type':'string'},'fileName':{'type':'string'},'caption':{'type':a0_0x4851ee(0x579)}},'required':[a0_0x4851ee(0x2f8),'media'],...S(a0_0x4851ee(0x2ac),'caption','media')}},'required':['mediaMessage',a0_0x4851ee(0x1a5)]},Sa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...X},'audioMessage':{'type':a0_0x4851ee(0x658),'properties':{'audio':{'type':a0_0x4851ee(0x579)}},'required':[a0_0x4851ee(0x467)],...S(a0_0x4851ee(0x467))}},'required':[a0_0x4851ee(0x32c),'number']},Ea={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'pollMessage':{'type':a0_0x4851ee(0x658),'properties':{'name':{'type':a0_0x4851ee(0x579)},'selectableCount':{'type':a0_0x4851ee(0x1a5)},'values':{'type':a0_0x4851ee(0x3ac),'minItems':0x2,'uniqueItems':!0x0}},'required':['name',a0_0x4851ee(0x15b),a0_0x4851ee(0x4a6)],...S(a0_0x4851ee(0x44c),a0_0x4851ee(0x15b),a0_0x4851ee(0x4a6))}},'required':[a0_0x4851ee(0x1a5),a0_0x4851ee(0x5ef)]},va={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...X},'buttonMessage':{'type':a0_0x4851ee(0x658),'properties':{'title':{'type':'string'},'description':{'type':a0_0x4851ee(0x579)},'footerText':{'type':a0_0x4851ee(0x579)},'buttons':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4851ee(0x658),'properties':{'buttonText':{'type':'string'},'buttonId':{'type':a0_0x4851ee(0x579)}},'required':[a0_0x4851ee(0x5ee),a0_0x4851ee(0x40c)],...S(a0_0x4851ee(0x5ee),a0_0x4851ee(0x40c))}},'mediaMessage':{'type':a0_0x4851ee(0x658),'properties':{'media':{'type':a0_0x4851ee(0x579)},'fileName':{'type':a0_0x4851ee(0x579)},'mediatype':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0xff),a0_0x4851ee(0x514),a0_0x4851ee(0x35c)]}},'required':[a0_0x4851ee(0x631),a0_0x4851ee(0x2f8)],...S(a0_0x4851ee(0x631),a0_0x4851ee(0x2ac))}},'required':[a0_0x4851ee(0x19c),a0_0x4851ee(0x3a0)],...S(a0_0x4851ee(0x19c),a0_0x4851ee(0x586))}},'required':[a0_0x4851ee(0x1a5),a0_0x4851ee(0x440)]},Na={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'number':{...Z},'options':{...X},'locationMessage':{'type':a0_0x4851ee(0x658),'properties':{'latitude':{'type':a0_0x4851ee(0x1a5)},'longitude':{'type':a0_0x4851ee(0x1a5)},'name':{'type':a0_0x4851ee(0x579)},'address':{'type':a0_0x4851ee(0x579)}},'required':['latitude',a0_0x4851ee(0x1e6)],...S(a0_0x4851ee(0x44c),a0_0x4851ee(0xb1))}},'required':[a0_0x4851ee(0x1a5),a0_0x4851ee(0x2a8)]},Ca={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'number':{...Z},'options':{...X},'listMessage':{'type':'object','properties':{'title':{'type':a0_0x4851ee(0x579)},'description':{'type':'string'},'footerText':{'type':a0_0x4851ee(0x579)},'buttonText':{'type':'string'},'sections':{'type':a0_0x4851ee(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':a0_0x4851ee(0x579)},'rows':{'type':a0_0x4851ee(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4851ee(0x658),'properties':{'title':{'type':a0_0x4851ee(0x579)},'description':{'type':a0_0x4851ee(0x579)},'rowId':{'type':'string'}},'required':[a0_0x4851ee(0x19c),'description',a0_0x4851ee(0x1f0)],...S(a0_0x4851ee(0x19c),a0_0x4851ee(0x586),a0_0x4851ee(0x1f0))}}},'required':[a0_0x4851ee(0x19c),a0_0x4851ee(0x439)],...S(a0_0x4851ee(0x19c))}}},'required':[a0_0x4851ee(0x19c),a0_0x4851ee(0x586),'buttonText',a0_0x4851ee(0x26b)],...S('title',a0_0x4851ee(0x586),a0_0x4851ee(0x5ee),'footerText')}},'required':[a0_0x4851ee(0x1a5),a0_0x4851ee(0x466)]},Ta={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'number':{...Z},'options':{...X},'contactMessage':{'type':'array','items':{'type':a0_0x4851ee(0x658),'properties':{'fullName':{'type':a0_0x4851ee(0x579)},'phoneNumber':{'type':a0_0x4851ee(0x579),'minLength':0xa}},'required':['fullName',a0_0x4851ee(0x4a1)],...S(a0_0x4851ee(0x2d4))},'minItems':0x1,'uniqueItems':!0x0}},'required':['number','contactMessage']},Ma={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'reactionMessage':{'type':a0_0x4851ee(0x658),'properties':{'key':{'type':a0_0x4851ee(0x658),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x4851ee(0x579)},'fromMe':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]}},'required':['id',a0_0x4851ee(0x53a),a0_0x4851ee(0x267)],...S('id',a0_0x4851ee(0x53a))},'reaction':{'type':a0_0x4851ee(0x579)}},'required':['key',a0_0x4851ee(0xcc)],...S('reaction')}},'required':['reactionMessage']},Ra={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'numbers':{'type':a0_0x4851ee(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':a0_0x4851ee(0x10d),'description':'\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}}},Aa={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'readMessages':{'type':a0_0x4851ee(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x4851ee(0x579)},'fromMe':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x4851ee(0x579)}},'required':['id','fromMe',a0_0x4851ee(0x53a)],...S('id',a0_0x4851ee(0x53a))}}},'required':[a0_0x4851ee(0x38c)]},Ia={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'privacySettings':{'type':'object','properties':{'readreceipts':{'type':a0_0x4851ee(0x579),'enum':['all',a0_0x4851ee(0x2de)]},'profile':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0x249),'contacts',a0_0x4851ee(0xc7),a0_0x4851ee(0x2de)]},'status':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0x249),a0_0x4851ee(0x4d6),a0_0x4851ee(0xc7),a0_0x4851ee(0x2de)]},'online':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0x249),'match_last_seen']},'last':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0x249),a0_0x4851ee(0x4d6),a0_0x4851ee(0xc7),'none']},'groupadd':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0x249),a0_0x4851ee(0x4d6),'contact_blacklist',a0_0x4851ee(0x2de)]}},'required':[a0_0x4851ee(0x262),a0_0x4851ee(0x5eb),a0_0x4851ee(0x517),a0_0x4851ee(0x46d),a0_0x4851ee(0x47f),a0_0x4851ee(0x38e)],...S(a0_0x4851ee(0x262),a0_0x4851ee(0x5eb),a0_0x4851ee(0x517),'online',a0_0x4851ee(0x47f),a0_0x4851ee(0x38e))}},'required':[a0_0x4851ee(0x323)]},Da={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'lastMessage':{'type':'object','properties':{'key':{'type':'object','properties':{'id':{'type':a0_0x4851ee(0x579)},'remoteJid':{'type':a0_0x4851ee(0x579)},'fromMe':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]}},'required':['id','fromMe',a0_0x4851ee(0x53a)],...S('id',a0_0x4851ee(0x53a))},'messageTimestamp':{'type':'integer','minLength':0x1}},'required':[a0_0x4851ee(0x67c)],...S('messageTimestamp')},'archive':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]}},'required':[a0_0x4851ee(0x2fa),'archive']},Pa={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'id':{'type':'string'},'fromMe':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x4851ee(0x579)},'participant':{'type':a0_0x4851ee(0x579)}},'required':['id','fromMe',a0_0x4851ee(0x53a)],...S('id','remoteJid',a0_0x4851ee(0x382))},Oa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'where':{'type':a0_0x4851ee(0x658),'properties':{'_id':{'type':a0_0x4851ee(0x579),'minLength':0x1},'pushName':{'type':a0_0x4851ee(0x579),'minLength':0x1},'id':{'type':a0_0x4851ee(0x579),'minLength':0x1}},...S(a0_0x4851ee(0x3bf),'id',a0_0x4851ee(0x442))}}},_a={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'name':{'type':a0_0x4851ee(0x579)}},...S(a0_0x4851ee(0x44c))},xa={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'status':{'type':a0_0x4851ee(0x579)}},...S(a0_0x4851ee(0x517))},Te={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'number':{'type':a0_0x4851ee(0x579)},'picture':{'type':a0_0x4851ee(0x579)}}},$a={'type':a0_0x4851ee(0x658),'properties':{'wuid':{'type':a0_0x4851ee(0x579)},'name':{'type':'string'},'picture':{'type':'string'},'status':{'type':a0_0x4851ee(0x579)},'isBusiness':{'type':a0_0x4851ee(0x54b)}}},ka={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x4851ee(0x579),'minLength':0x1},'key':{'type':a0_0x4851ee(0x658),'if':{'propertyNames':{'enum':['fromMe',a0_0x4851ee(0x53a),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x4851ee(0x579),'minLength':0x1,'description':a0_0x4851ee(0x1a0)},'id':{'type':a0_0x4851ee(0x579),'minLength':0x1,'description':'The\x20property\x20cannot\x20be\x20empty'},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x4851ee(0x658)}},...S(a0_0x4851ee(0x3bf))},'limit':{'type':a0_0x4851ee(0x22f)}}},La={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'where':{'type':a0_0x4851ee(0x658),'properties':{'_id':{'type':a0_0x4851ee(0x579)},'remoteJid':{'type':'string'},'id':{'type':a0_0x4851ee(0x579)},'fromMe':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x4851ee(0x579)},'status':{'type':a0_0x4851ee(0x579),'enum':['ERROR','PENDING','SERVER_ACK',a0_0x4851ee(0x2b4),a0_0x4851ee(0x252),a0_0x4851ee(0x391)]}},...S('_id','remoteJid','id',a0_0x4851ee(0x517))},'limit':{'type':a0_0x4851ee(0x22f)}}},Ua={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'number':{...Z},'presence':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0xb9),'available','composing',a0_0x4851ee(0x550),'paused']}},'required':[a0_0x4851ee(0x276),a0_0x4851ee(0x1a5)]},Va={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'subject':{'type':a0_0x4851ee(0x579)},'description':{'type':'string'},'profilePicture':{'type':a0_0x4851ee(0x579)},'participants':{'type':a0_0x4851ee(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4851ee(0x579),'minLength':0xa,'pattern':'\x5cd+','description':'\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}},'required':[a0_0x4851ee(0x22b),a0_0x4851ee(0x16d)],...S(a0_0x4851ee(0x22b),a0_0x4851ee(0x586),'profilePicture')},Me={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'groupJid':{'type':a0_0x4851ee(0x579),'pattern':'^\x5cd+([-]\x5cd+)*@g.us$'}},'required':['groupJid'],...S(a0_0x4851ee(0x230))},ja={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'groupJid':{'type':a0_0x4851ee(0x579)},'action':{'type':a0_0x4851ee(0x579),'enum':[a0_0x4851ee(0x55b),'remove',a0_0x4851ee(0x4d2),a0_0x4851ee(0x20b)]},'participants':{'type':a0_0x4851ee(0x3ac),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4851ee(0x579),'minLength':0xa,'pattern':a0_0x4851ee(0x3b1),'description':a0_0x4851ee(0x4a7)}}},'required':[a0_0x4851ee(0x230),a0_0x4851ee(0x65b),a0_0x4851ee(0x16d)],...S(a0_0x4851ee(0x230),a0_0x4851ee(0x65b))},Ba={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x4851ee(0x579)},'expiration':{'type':a0_0x4851ee(0x1a5),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x4851ee(0x230),a0_0x4851ee(0x3f8)],...S(a0_0x4851ee(0x230),a0_0x4851ee(0x3f8))},Fa={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'groupJid':{'type':'string'},'image':{'type':a0_0x4851ee(0x579)}},'required':['groupJid',a0_0x4851ee(0xff)],...S(a0_0x4851ee(0x230),a0_0x4851ee(0xff))},Ja={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'groupJid':{'type':a0_0x4851ee(0x579)},'description':{'type':a0_0x4851ee(0x579)}},'required':['groupJid',a0_0x4851ee(0x586)],...S('groupJid',a0_0x4851ee(0x586))},Ga={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'groupJid':{'type':'string'},'name':{'type':a0_0x4851ee(0x579)}},'required':[a0_0x4851ee(0x230),a0_0x4851ee(0x44c)],...S(a0_0x4851ee(0x230),'name')},qa={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'groupJid':{'type':a0_0x4851ee(0x579)},'setting':{'type':a0_0x4851ee(0x579),'enum':['announcement',a0_0x4851ee(0x50b),'unlocked','locked']}},'required':['groupJid',a0_0x4851ee(0xa5)],...S(a0_0x4851ee(0x230),'setting')},Wa={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'inviteCode':{'type':a0_0x4851ee(0x579)}},'required':[a0_0x4851ee(0x131)],...S(a0_0x4851ee(0x131))},Ha={'$id':(0x0,E['v4'])(),'type':'object','properties':{'url':{'type':a0_0x4851ee(0x579)},'enabled':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x4851ee(0x30c),'enabled']},Sn={'$id':(0x0,E['v4'])(),'type':a0_0x4851ee(0x658),'properties':{'local_map':{'type':'boolean','enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':'boolean','enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x4851ee(0x54b),'enum':[!0x0,!0x1]}},'required':[a0_0x4851ee(0x116),'STATUS_INSTANCE',a0_0x4851ee(0x624),a0_0x4851ee(0x401),a0_0x4851ee(0x355),'MESSAGES_UPSERT',a0_0x4851ee(0x141),a0_0x4851ee(0x300),a0_0x4851ee(0x47d),a0_0x4851ee(0x281),a0_0x4851ee(0x3e9),a0_0x4851ee(0x5e7),a0_0x4851ee(0x9d),'CHATS_UPDATE',a0_0x4851ee(0x57a),a0_0x4851ee(0x420),a0_0x4851ee(0x175),'GROUPS_UPDATE','GROUP_PARTICIPANTS_UPDATE'],...S(a0_0x4851ee(0x116),'STATUS_INSTANCE',a0_0x4851ee(0x624),a0_0x4851ee(0x401),a0_0x4851ee(0x355),a0_0x4851ee(0x556),a0_0x4851ee(0x141),a0_0x4851ee(0x300),a0_0x4851ee(0x47d),a0_0x4851ee(0x281),a0_0x4851ee(0x3e9),a0_0x4851ee(0x5e7),a0_0x4851ee(0x9d),a0_0x4851ee(0x1c4),'CHATS_DELETE',a0_0x4851ee(0x420),a0_0x4851ee(0x175),a0_0x4851ee(0x242),a0_0x4851ee(0x43c))},Ae=require('fs'),Re=require(a0_0x4851ee(0x539)),Ze=class{},et=class extends B{constructor(_0x74612e,_0x2cd457){super(_0x2cd457),this['contactModel']=_0x74612e,this['configService']=_0x2cd457;}async['insert'](_0x385efb,_0x3ad35e=!0x1){const _0x174b27=a0_0x4851ee;if(_0x385efb[_0x174b27(0x291)]!==0x0)try{return this[_0x174b27(0x477)][_0x174b27(0x1a4)]&&_0x3ad35e?{'insertCount':(await this[_0x174b27(0x1d3)][_0x174b27(0x2ab)]([..._0x385efb]))[_0x174b27(0x291)]}:(_0x385efb[_0x174b27(0x386)](_0x5099ad=>{const _0x189d22=_0x174b27;this[_0x189d22(0x3b4)]({'path':(0x0,Re[_0x189d22(0x273)])(this[_0x189d22(0x489)],'contacts',_0x5099ad['owner']),'fileName':_0x5099ad['id'],'data':_0x5099ad});}),{'insertCount':_0x385efb[_0x174b27(0x291)]});}catch(_0x256aa7){return _0x256aa7;}finally{_0x385efb=void 0x0;}}async[a0_0x4851ee(0x522)](_0x113147){const _0x421b66=a0_0x4851ee;try{return this[_0x421b66(0x477)][_0x421b66(0x1a4)]?await this[_0x421b66(0x1d3)]['deleteMany']({..._0x113147[_0x421b66(0x5bb)]}):{'deleted':{'contact':_0x113147['where']['id']}};}catch(_0x43cbb2){return{'error':_0x43cbb2?.[_0x421b66(0x409)]()};}}async[a0_0x4851ee(0x3be)](_0xb6a179,_0x581800,_0x5098cd=!0x1){const _0x458e1d=a0_0x4851ee;try{if(_0xb6a179[_0x458e1d(0x291)]===0x0)return;if(this[_0x458e1d(0x477)][_0x458e1d(0x1a4)]&&_0x5098cd){let _0x1719ce=_0xb6a179[_0x458e1d(0x51a)](_0x197515=>({'updateOne':{'filter':{'id':_0x197515['id'],'owner':_0x581800},'update':{..._0x197515},'upsert':!0x0}})),{nModified:_0x1ea05e}=await this[_0x458e1d(0x1d3)][_0x458e1d(0x4b7)](_0x1719ce);return{'insertCount':_0x1ea05e};}}catch{return;}}async[a0_0x4851ee(0x487)](_0x9e67b8){const _0x1163de=a0_0x4851ee;try{if(this['dbSettings'][_0x1163de(0x1a4)])return await this[_0x1163de(0x1d3)][_0x1163de(0x487)]({..._0x9e67b8[_0x1163de(0x5bb)]});let _0x35d0ee=[];if(_0x9e67b8?.[_0x1163de(0x5bb)]?.['id'])_0x35d0ee[_0x1163de(0x53b)](JSON[_0x1163de(0x5f3)]((0x0,Ae['readFileSync'])((0x0,Re[_0x1163de(0x273)])(this[_0x1163de(0x489)],_0x1163de(0x4d6),_0x9e67b8[_0x1163de(0x5bb)]['owner'],_0x9e67b8[_0x1163de(0x5bb)]['id']+_0x1163de(0x5d3)),{'encoding':_0x1163de(0x5a8)})));else{let _0x23fa79=(0x0,Ae[_0x1163de(0x231)])((0x0,Re[_0x1163de(0x273)])(this['storePath'],_0x1163de(0x4d6),_0x9e67b8[_0x1163de(0x5bb)][_0x1163de(0x101)]),{'encoding':_0x1163de(0x5a8)});for await(let _0xfb9fed of _0x23fa79)_0xfb9fed[_0x1163de(0x1c5)]()&&_0x35d0ee[_0x1163de(0x53b)](JSON[_0x1163de(0x5f3)]((0x0,Ae['readFileSync'])((0x0,Re[_0x1163de(0x273)])(this['storePath'],_0x1163de(0x4d6),_0x9e67b8['where'][_0x1163de(0x101)],_0xfb9fed['name']),{'encoding':'utf-8'})));}return _0x35d0ee;}catch{return[];}}},tt=require(a0_0x4851ee(0xdb)),Mn=require('express-async-errors'),ws=new C(a0_0x4851ee(0x10c)),L=class{constructor(){}[a0_0x4851ee(0x307)](_0x3dfab1,_0x8520c=!0x0){const _0x34d873=a0_0x4851ee;let _0x2e97a8='/'+_0x3dfab1;return _0x8520c&&(_0x2e97a8+=_0x34d873(0x192)),_0x2e97a8;}async[a0_0x4851ee(0x139)](_0x5920d1){const _0x132718=a0_0x4851ee;let {request:_0x4ae6d4,schema:_0x1705ee,ClassRef:_0xf35ecc,execute:_0x3a98b0}=_0x5920d1,_0x23b924=new _0xf35ecc(),_0x65ed08=_0x4ae6d4[_0x132718(0xbd)],_0x2b6b97=_0x4ae6d4[_0x132718(0x655)];_0x4ae6d4?.[_0x132718(0x5ae)]&&Object[_0x132718(0x2b5)](_0x4ae6d4[_0x132718(0x5ae)])[_0x132718(0x291)]>0x0&&Object[_0x132718(0x154)](_0x2b6b97,_0x4ae6d4[_0x132718(0x5ae)]),_0x4ae6d4['originalUrl'][_0x132718(0x5a9)](_0x132718(0x5e3))&&Object[_0x132718(0x154)](_0x2b6b97,_0x65ed08),Object[_0x132718(0x154)](_0x23b924,_0x65ed08);let _0x31b0b4=_0x1705ee?(0x0,tt[_0x132718(0xb7)])(_0x23b924,_0x1705ee):{'valid':!0x0,'errors':[]};if(!_0x31b0b4[_0x132718(0x331)]){let _0xe4f233=_0x31b0b4['errors'][_0x132718(0x51a)](({property:_0x14acaf,stack:_0x5561bd,schema:_0x193980})=>{const _0x5cf95a=_0x132718;let _0x4bdda3;return _0x193980['description']?_0x4bdda3=_0x193980[_0x5cf95a(0x586)]:_0x4bdda3=_0x5561bd[_0x5cf95a(0x582)](_0x5cf95a(0x15e),''),{'property':_0x14acaf[_0x5cf95a(0x582)](_0x5cf95a(0x15e),''),'message':_0x4bdda3};});throw ws[_0x132718(0x44b)]([..._0xe4f233]),new g(..._0xe4f233);}return await _0x3a98b0(_0x2b6b97,_0x23b924);}async[a0_0x4851ee(0x528)](_0x4cbfc9){const _0x5060aa=a0_0x4851ee;let {request:_0x591841,ClassRef:_0x5d0fa2,schema:_0x4ad6ce,execute:_0x52382a}=_0x4cbfc9,_0x4435a8=_0x591841[_0x5060aa(0x5ae)];if(!_0x4435a8?.[_0x5060aa(0x230)])throw new g(_0x5060aa(0x1ee),_0x5060aa(0x2cc));let _0x492fc4=_0x591841['params'],_0x9ea0e0=_0x591841[_0x5060aa(0xbd)],_0x10c373=new _0x5d0fa2();Object[_0x5060aa(0x154)](_0x9ea0e0,_0x4435a8),Object[_0x5060aa(0x154)](_0x10c373,_0x9ea0e0);let _0x5e1878=(0x0,tt[_0x5060aa(0xb7)])(_0x10c373,_0x4ad6ce);if(!_0x5e1878[_0x5060aa(0x331)]){let _0xf3d617=_0x5e1878[_0x5060aa(0x35b)][_0x5060aa(0x51a)](({property:_0x31b8b7,stack:_0x7f6eaf,schema:_0x332799})=>{const _0x1296d9=_0x5060aa;let _0x3408b7;return _0x332799[_0x1296d9(0x586)]?_0x3408b7=_0x332799[_0x1296d9(0x586)]:_0x3408b7=_0x7f6eaf[_0x1296d9(0x582)](_0x1296d9(0x15e),''),{'property':_0x31b8b7['replace'](_0x1296d9(0x15e),''),'message':_0x3408b7};});throw ws[_0x5060aa(0x44b)]([..._0xf3d617]),new g(..._0xf3d617);}return await _0x52382a(_0x492fc4,_0x10c373);}async[a0_0x4851ee(0x2d1)](_0x30cd75){const _0x833d76=a0_0x4851ee;let {request:_0xf147a5,ClassRef:_0x52cf7f,schema:_0x4ba926,execute:_0x48ae6f}=_0x30cd75,_0x2fec7b=_0xf147a5[_0x833d76(0xbd)];if(!_0x2fec7b?.[_0x833d76(0x131)])throw new g(_0x833d76(0x1e8),_0x833d76(0x2c9));let _0x30a0e6=_0xf147a5['params'],_0x578e0e=_0xf147a5['body'],_0x200be9=new _0x52cf7f();Object['assign'](_0x578e0e,_0x2fec7b),Object[_0x833d76(0x154)](_0x200be9,_0x578e0e);let _0x21d9c9=(0x0,tt[_0x833d76(0xb7)])(_0x200be9,_0x4ba926);if(!_0x21d9c9[_0x833d76(0x331)]){let _0x570682=_0x21d9c9[_0x833d76(0x35b)][_0x833d76(0x51a)](({property:_0x24207d,stack:_0x1a6eaa,schema:_0x8a28e7})=>{const _0x1a3155=_0x833d76;let _0x139e12;return _0x8a28e7[_0x1a3155(0x586)]?_0x139e12=_0x8a28e7[_0x1a3155(0x586)]:_0x139e12=_0x1a6eaa[_0x1a3155(0x582)](_0x1a3155(0x15e),''),{'property':_0x24207d[_0x1a3155(0x582)](_0x1a3155(0x15e),''),'message':_0x139e12};});throw ws[_0x833d76(0x44b)]([..._0x570682]),new g(..._0x570682);}return await _0x48ae6f(_0x30a0e6,_0x200be9);}},Ie=require(a0_0x4851ee(0x539)),De=require('fs'),st=class{},at=class extends B{constructor(_0x399a9b,_0x1563a4){const _0x3a2dc9=a0_0x4851ee;super(_0x1563a4),this[_0x3a2dc9(0x2da)]=_0x399a9b,this['configService']=_0x1563a4;}async[a0_0x4851ee(0x3b8)](_0x27021c,_0x3b1062){const _0x1cb5b8=a0_0x4851ee;if(_0x27021c[_0x1cb5b8(0x291)]!==0x0)try{if(this[_0x1cb5b8(0x477)][_0x1cb5b8(0x1a4)]&&_0x3b1062)return{'insertCount':(await this[_0x1cb5b8(0x2da)][_0x1cb5b8(0x2ab)]([..._0x27021c]))['length']};_0x27021c['forEach'](_0x55a790=>{const _0x2e635f=_0x1cb5b8;this[_0x2e635f(0x3b4)]({'path':(0x0,Ie[_0x2e635f(0x273)])(this[_0x2e635f(0x489)],_0x2e635f(0xcf),_0x55a790[_0x2e635f(0x101)]),'fileName':_0x55a790['id'],'data':_0x55a790});});}catch(_0x2f7134){return _0x2f7134;}}async[a0_0x4851ee(0x487)](_0x480ed7){const _0x9469ab=a0_0x4851ee;try{if(this[_0x9469ab(0x477)][_0x9469ab(0x1a4)])return await this[_0x9469ab(0x2da)][_0x9469ab(0x487)]({..._0x480ed7[_0x9469ab(0x5bb)]})['sort']({'datetime':-0x1})[_0x9469ab(0x412)](_0x480ed7?.[_0x9469ab(0x412)]??0x0);let _0x43e309=[];if(_0x480ed7?.[_0x9469ab(0x5bb)]?.['id'])_0x43e309[_0x9469ab(0x53b)](JSON[_0x9469ab(0x5f3)]((0x0,De[_0x9469ab(0xdd)])((0x0,Ie[_0x9469ab(0x273)])(this[_0x9469ab(0x489)],_0x9469ab(0xcf),_0x480ed7[_0x9469ab(0x5bb)][_0x9469ab(0x101)],_0x480ed7[_0x9469ab(0x5bb)]['id']+_0x9469ab(0x5d3)),{'encoding':_0x9469ab(0x5a8)})));else{let _0x3056e5=(0x0,De[_0x9469ab(0x231)])((0x0,Ie['join'])(this[_0x9469ab(0x489)],_0x9469ab(0xcf),_0x480ed7[_0x9469ab(0x5bb)][_0x9469ab(0x101)]),{'encoding':_0x9469ab(0x5a8)});for await(let _0x24d7d2 of _0x3056e5)_0x24d7d2[_0x9469ab(0x1c5)]()&&_0x43e309['push'](JSON[_0x9469ab(0x5f3)]((0x0,De[_0x9469ab(0xdd)])((0x0,Ie[_0x9469ab(0x273)])(this[_0x9469ab(0x489)],'message-up',_0x480ed7[_0x9469ab(0x5bb)]['owner'],_0x24d7d2['name']),{'encoding':_0x9469ab(0x5a8)})));}return _0x43e309['sort']((_0x84b9b2,_0x341aa3)=>_0x341aa3[_0x9469ab(0x179)]-_0x84b9b2[_0x9469ab(0x179)])['splice'](0x0,_0x480ed7?.[_0x9469ab(0x412)]??_0x43e309[_0x9469ab(0x291)]);}catch{return[];}}async[a0_0x4851ee(0x522)](_0x58a915){const _0x129880=a0_0x4851ee;try{if(this[_0x129880(0x477)]['ENABLED'])return await this[_0x129880(0x2da)][_0x129880(0xd9)]({..._0x58a915[_0x129880(0x5bb)]});}catch(_0x5627ab){return console['error'](_0x129880(0x25c),_0x5627ab),_0x5627ab;}}},b=class{},ot=class extends L{constructor(..._0x2230df){const _0x55a0f4=a0_0x4851ee;super(),this['router']=(0x0,Ka['Router'])(),this[_0x55a0f4(0x64c)][_0x55a0f4(0x198)](this[_0x55a0f4(0x307)](_0x55a0f4(0x13a)),..._0x2230df,async(_0x1f7353,_0x55cd2e)=>{const _0x17b74e=_0x55a0f4;let _0x28e2a2=await this[_0x17b74e(0x139)]({'request':_0x1f7353,'schema':Ua,'ClassRef':Je,'execute':(_0x38e94d,_0x14f4b5)=>P['updatePresence'](_0x38e94d,_0x14f4b5)});return _0x55cd2e[_0x17b74e(0x517)](0xc9)['json'](_0x28e2a2);})[_0x55a0f4(0x198)](this['routerPath'](_0x55a0f4(0x476)),..._0x2230df,async(_0x3f3180,_0x39614b)=>{const _0x422eb2=_0x55a0f4;let _0x231d1d=await this[_0x422eb2(0x139)]({'request':_0x3f3180,'schema':Ra,'ClassRef':Ge,'execute':(_0x1791c1,_0x5ab8f7)=>P[_0x422eb2(0x2a3)](_0x1791c1,_0x5ab8f7)});return _0x39614b[_0x422eb2(0x517)](0xc9)['json'](_0x231d1d);})[_0x55a0f4(0x198)](this[_0x55a0f4(0x307)]('editChat'),..._0x2230df,async(_0x4457be,_0x88b0bf)=>{const _0x5a3a1b=_0x55a0f4;let _0x3e3359=await this['dataValidate']({'request':_0x4457be,'schema':v,'ClassRef':b,'execute':(_0x1705eb,_0x2d30fc)=>P[_0x5a3a1b(0x319)](_0x1705eb,_0x2d30fc)});return _0x88b0bf[_0x5a3a1b(0x517)](0xc9)['json'](_0x3e3359);})[_0x55a0f4(0x445)](this[_0x55a0f4(0x307)](_0x55a0f4(0x108)),..._0x2230df,async(_0x1feac1,_0x2fe066)=>{const _0x5c3171=_0x55a0f4;let _0x105e76=await this['dataValidate']({'request':_0x1feac1,'schema':Aa,'ClassRef':He,'execute':(_0x2fb41e,_0x413d17)=>P[_0x5c3171(0x271)](_0x2fb41e,_0x413d17)});return _0x2fe066[_0x5c3171(0x517)](0xc9)[_0x5c3171(0xd6)](_0x105e76);})['put'](this[_0x55a0f4(0x307)](_0x55a0f4(0x554)),..._0x2230df,async(_0x39fdc1,_0x98844a)=>{const _0x59b03c=_0x55a0f4;let _0x40702c=await this[_0x59b03c(0x139)]({'request':_0x39fdc1,'schema':Da,'ClassRef':Ke,'execute':(_0x20b8a7,_0x32d2ed)=>P[_0x59b03c(0x554)](_0x20b8a7,_0x32d2ed)});return _0x98844a[_0x59b03c(0x517)](0xc9)[_0x59b03c(0xd6)](_0x40702c);})[_0x55a0f4(0x522)](this[_0x55a0f4(0x307)]('deleteMessageForEveryone'),..._0x2230df,async(_0x32d739,_0x53349e)=>{const _0x33d174=_0x55a0f4;let _0x11a647=await this[_0x33d174(0x139)]({'request':_0x32d739,'schema':Pa,'ClassRef':Qe,'execute':(_0x5c6919,_0x370bc5)=>P[_0x33d174(0x628)](_0x5c6919,_0x370bc5)});return _0x53349e[_0x33d174(0x517)](0xc9)[_0x33d174(0xd6)](_0x11a647);})[_0x55a0f4(0x198)](this[_0x55a0f4(0x307)]('fetchProfilePictureUrl'),..._0x2230df,async(_0x1d0d6a,_0x2a3eb1)=>{const _0x5c9124=_0x55a0f4;let _0x3fa72f=await this[_0x5c9124(0x139)]({'request':_0x1d0d6a,'schema':Te,'ClassRef':Ce,'execute':(_0x14836e,_0x9b1481)=>P[_0x5c9124(0x63c)](_0x14836e,_0x9b1481)});return _0x2a3eb1[_0x5c9124(0x517)](0xc8)[_0x5c9124(0xd6)](_0x3fa72f);})[_0x55a0f4(0x198)](this['routerPath'](_0x55a0f4(0x3a6)),..._0x2230df,async(_0x4ad1a7,_0x171e58)=>{const _0xfe0fda=_0x55a0f4;let _0x19c8a5=await this['dataValidate']({'request':_0x4ad1a7,'schema':$a,'ClassRef':Ce,'execute':(_0x1aa824,_0x13eaad)=>P[_0xfe0fda(0x3a6)](_0x1aa824,_0x13eaad)});return _0x171e58['status'](0xc8)['json'](_0x19c8a5);})[_0x55a0f4(0x198)](this[_0x55a0f4(0x307)](_0x55a0f4(0x4bd)),..._0x2230df,async(_0x13968f,_0x43d10e)=>{const _0x533b09=_0x55a0f4;let _0x19ed4d=await this[_0x533b09(0x139)]({'request':_0x13968f,'schema':Oa,'ClassRef':Ze,'execute':(_0xf5c2f6,_0x3440a3)=>P['fetchContacts'](_0xf5c2f6,_0x3440a3)});return _0x43d10e[_0x533b09(0x517)](0xc8)['json'](_0x19ed4d);})['post'](this[_0x55a0f4(0x307)]('getBase64FromMediaMessage'),..._0x2230df,async(_0xed9919,_0x1ecbec)=>{const _0x4ad453=_0x55a0f4;let _0x17af20=await this[_0x4ad453(0x139)]({'request':_0xed9919,'schema':null,'ClassRef':Object,'execute':(_0x5ee101,_0x4c83e6)=>P['getBase64FromMediaMessage'](_0x5ee101,_0x4c83e6)});return _0x1ecbec[_0x4ad453(0x517)](0xc9)[_0x4ad453(0xd6)](_0x17af20);})[_0x55a0f4(0x198)](this['routerPath'](_0x55a0f4(0x28c)),..._0x2230df,async(_0x432292,_0x342aef)=>{const _0x4640ec=_0x55a0f4;let _0x4a1695=await this[_0x4640ec(0x139)]({'request':_0x432292,'schema':ka,'ClassRef':Ve,'execute':(_0x104e4a,_0x56d119)=>P['fetchMessages'](_0x104e4a,_0x56d119)});return _0x342aef[_0x4640ec(0x517)](0xc8)['json'](_0x4a1695);})['post'](this[_0x55a0f4(0x307)](_0x55a0f4(0x351)),..._0x2230df,async(_0x38ec77,_0x2181a4)=>{const _0x3be366=_0x55a0f4;let _0xde7649=await this[_0x3be366(0x139)]({'request':_0x38ec77,'schema':La,'ClassRef':st,'execute':(_0x596247,_0x94aab3)=>P[_0x3be366(0xac)](_0x596247,_0x94aab3)});return _0x2181a4[_0x3be366(0x517)](0xc8)[_0x3be366(0xd6)](_0xde7649);})[_0x55a0f4(0x5b8)](this[_0x55a0f4(0x307)](_0x55a0f4(0x3ed)),..._0x2230df,async(_0x11463b,_0x55c5cb)=>{const _0x2da2b4=_0x55a0f4;let _0x36146b=await this['dataValidate']({'request':_0x11463b,'schema':null,'ClassRef':b,'execute':_0x2e3394=>P['fetchChats'](_0x2e3394)});return _0x55c5cb[_0x2da2b4(0x517)](0xc8)['json'](_0x36146b);})[_0x55a0f4(0x5b8)](this[_0x55a0f4(0x307)](_0x55a0f4(0xd7)),..._0x2230df,async(_0x218c80,_0x4961b0)=>{const _0x546be4=_0x55a0f4;let _0x5e8f27=await this[_0x546be4(0x139)]({'request':_0x218c80,'schema':null,'ClassRef':b,'execute':_0x52f652=>P[_0x546be4(0xd7)](_0x52f652)});return _0x4961b0[_0x546be4(0x517)](0xc8)[_0x546be4(0xd6)](_0x5e8f27);})[_0x55a0f4(0x445)](this[_0x55a0f4(0x307)](_0x55a0f4(0x3fa)),..._0x2230df,async(_0x3e8a12,_0x190c2f)=>{const _0xc6825c=_0x55a0f4;let _0x188dd1=await this[_0xc6825c(0x139)]({'request':_0x3e8a12,'schema':Ia,'ClassRef':ze,'execute':(_0x3bc7e9,_0xebbe54)=>P[_0xc6825c(0x3fa)](_0x3bc7e9,_0xebbe54)});return _0x190c2f[_0xc6825c(0x517)](0xc9)['json'](_0x188dd1);})[_0x55a0f4(0x198)](this[_0x55a0f4(0x307)](_0x55a0f4(0xf6)),..._0x2230df,async(_0x265abd,_0x13e308)=>{const _0x2ddb81=_0x55a0f4;let _0x44ea7f=await this[_0x2ddb81(0x139)]({'request':_0x265abd,'schema':Te,'ClassRef':we,'execute':(_0x8fcba6,_0x4f6243)=>P['fetchBusinessProfile'](_0x8fcba6,_0x4f6243)});return _0x13e308[_0x2ddb81(0x517)](0xc8)[_0x2ddb81(0xd6)](_0x44ea7f);})[_0x55a0f4(0x198)](this[_0x55a0f4(0x307)](_0x55a0f4(0x49b)),..._0x2230df,async(_0x22e3e8,_0x3f1aa2)=>{const _0x34f130=_0x55a0f4;let _0x442c6c=await this[_0x34f130(0x139)]({'request':_0x22e3e8,'schema':_a,'ClassRef':qe,'execute':(_0x4c5398,_0x25dcd8)=>P['updateProfileName'](_0x4c5398,_0x25dcd8)});return _0x3f1aa2[_0x34f130(0x517)](0xc8)[_0x34f130(0xd6)](_0x442c6c);})[_0x55a0f4(0x198)](this['routerPath']('updateProfileStatus'),..._0x2230df,async(_0xf7d01d,_0x4917fc)=>{const _0x4d078e=_0x55a0f4;let _0x4eabb6=await this['dataValidate']({'request':_0xf7d01d,'schema':xa,'ClassRef':We,'execute':(_0x1b9aeb,_0x2f0b00)=>P[_0x4d078e(0xc0)](_0x1b9aeb,_0x2f0b00)});return _0x4917fc['status'](0xc8)[_0x4d078e(0xd6)](_0x4eabb6);})['put'](this[_0x55a0f4(0x307)](_0x55a0f4(0x196)),..._0x2230df,async(_0x188564,_0x13c0f5)=>{const _0x137e5f=_0x55a0f4;let _0x42b505=await this[_0x137e5f(0x139)]({'request':_0x188564,'schema':Te,'ClassRef':we,'execute':(_0x28c96f,_0x6e3fa9)=>P[_0x137e5f(0x196)](_0x28c96f,_0x6e3fa9)});return _0x13c0f5[_0x137e5f(0x517)](0xc8)['json'](_0x42b505);})[_0x55a0f4(0x522)](this[_0x55a0f4(0x307)](_0x55a0f4(0x673)),..._0x2230df,async(_0xa99f6d,_0x1f5f0c)=>{const _0x3f6d49=_0x55a0f4;let _0x4012d7=await this[_0x3f6d49(0x139)]({'request':_0xa99f6d,'schema':Te,'ClassRef':we,'execute':(_0x53eb39,_0x199e03)=>P[_0x3f6d49(0x673)](_0x53eb39,_0x199e03)});return _0x1f5f0c[_0x3f6d49(0x517)](0xc8)[_0x3f6d49(0xd6)](_0x4012d7);});}},za=require(a0_0x4851ee(0x223)),it=class{},rt=class{},nt=class{},ct=class{},lt=class{},ee=class{},ut=class{},dt=class extends ee{},pt=class extends ee{},gt=class extends L{constructor(..._0x18ebd8){const _0x5b9e37=a0_0x4851ee;super(),this[_0x5b9e37(0x64c)]=(0x0,za[_0x5b9e37(0xdf)])(),this[_0x5b9e37(0x64c)][_0x5b9e37(0x198)](this['routerPath']('create'),..._0x18ebd8,async(_0x4ac085,_0x36df8c)=>{const _0x5bae4e=_0x5b9e37;let _0x1534f4=await this[_0x5bae4e(0x139)]({'request':_0x4ac085,'schema':Va,'ClassRef':it,'execute':(_0x2ba86e,_0x1f8b50)=>V[_0x5bae4e(0x4d7)](_0x2ba86e,_0x1f8b50)});_0x36df8c[_0x5bae4e(0x517)](0xc9)['json'](_0x1534f4);})['put'](this[_0x5b9e37(0x307)](_0x5b9e37(0x4eb)),..._0x18ebd8,async(_0x1f1b81,_0x10b5f0)=>{const _0x4c9b57=_0x5b9e37;let _0x168440=await this[_0x4c9b57(0x528)]({'request':_0x1f1b81,'schema':Fa,'ClassRef':rt,'execute':(_0x48f051,_0x3a6a2e)=>V['updateGroupPicture'](_0x48f051,_0x3a6a2e)});_0x10b5f0[_0x4c9b57(0x517)](0xc9)['json'](_0x168440);})[_0x5b9e37(0x445)](this['routerPath'](_0x5b9e37(0x5aa)),..._0x18ebd8,async(_0x19ce35,_0x4c498d)=>{const _0x68a4ea=_0x5b9e37;let _0x1a2f8d=await this[_0x68a4ea(0x528)]({'request':_0x19ce35,'schema':Ja,'ClassRef':nt,'execute':(_0x547c38,_0x250df8)=>V['groupDesc'](_0x547c38,_0x250df8)});_0x4c498d['status'](0xc9)[_0x68a4ea(0xd6)](_0x1a2f8d);})[_0x5b9e37(0x445)](this['routerPath'](_0x5b9e37(0x45b)),..._0x18ebd8,async(_0x4e8b9f,_0x5b7f1d)=>{const _0x299169=_0x5b9e37;let _0x279520=await this[_0x299169(0x528)]({'request':_0x4e8b9f,'schema':Ga,'ClassRef':ct,'execute':(_0x5a5c0f,_0x23d7f5)=>V[_0x299169(0x45b)](_0x5a5c0f,_0x23d7f5)});_0x5b7f1d[_0x299169(0x517)](0xc9)['json'](_0x279520);})[_0x5b9e37(0x445)](this['routerPath'](_0x5b9e37(0x59c)),..._0x18ebd8,async(_0x15b5b3,_0x49ab98)=>{const _0xe8c245=_0x5b9e37;let _0xfc47b4=await this[_0xe8c245(0x528)]({'request':_0x15b5b3,'schema':qa,'ClassRef':lt,'execute':(_0x42e8ea,_0x47ca7d)=>V[_0xe8c245(0x59c)](_0x42e8ea,_0x47ca7d)});_0x49ab98[_0xe8c245(0x517)](0xc9)[_0xe8c245(0xd6)](_0xfc47b4);})[_0x5b9e37(0x445)](this[_0x5b9e37(0x307)]('toggleEphemeral'),..._0x18ebd8,async(_0x5446f8,_0x31dc8a)=>{const _0xe40d06=_0x5b9e37;let _0x4679e2=await this[_0xe40d06(0x528)]({'request':_0x5446f8,'schema':Ba,'ClassRef':pt,'execute':(_0x42d82f,_0x41cfef)=>V[_0xe40d06(0xaa)](_0x42d82f,_0x41cfef)});_0x31dc8a['status'](0xc9)[_0xe40d06(0xd6)](_0x4679e2);})['get'](this[_0x5b9e37(0x307)]('findGroupInfos'),..._0x18ebd8,async(_0x38cf67,_0x264e10)=>{const _0x5ae18d=_0x5b9e37;let _0x3ff995=await this[_0x5ae18d(0x528)]({'request':_0x38cf67,'schema':Me,'ClassRef':ee,'execute':(_0x450f26,_0x17d0ff)=>V[_0x5ae18d(0x265)](_0x450f26,_0x17d0ff)});_0x264e10[_0x5ae18d(0x517)](0xc8)[_0x5ae18d(0xd6)](_0x3ff995);})[_0x5b9e37(0x5b8)](this[_0x5b9e37(0x307)](_0x5b9e37(0x167)),..._0x18ebd8,async(_0x2f027b,_0x5e8c37)=>{const _0x41d2b8=_0x5b9e37;let _0x547c72=await this[_0x41d2b8(0x139)]({'request':_0x2f027b,'schema':v,'ClassRef':b,'execute':_0x47350b=>V[_0x41d2b8(0x167)](_0x47350b)});_0x5e8c37[_0x41d2b8(0x517)](0xc8)[_0x41d2b8(0xd6)](_0x547c72);})[_0x5b9e37(0x5b8)](this[_0x5b9e37(0x307)](_0x5b9e37(0x16d)),..._0x18ebd8,async(_0xcf3680,_0xd7d62a)=>{const _0x596c8f=_0x5b9e37;let _0x2138ac=await this[_0x596c8f(0x528)]({'request':_0xcf3680,'schema':Me,'ClassRef':ee,'execute':(_0x583d8f,_0x29090a)=>V[_0x596c8f(0x12b)](_0x583d8f,_0x29090a)});_0xd7d62a[_0x596c8f(0x517)](0xc8)[_0x596c8f(0xd6)](_0x2138ac);})['get'](this[_0x5b9e37(0x307)](_0x5b9e37(0x131)),..._0x18ebd8,async(_0x173852,_0x4ee78f)=>{const _0x104b97=_0x5b9e37;let _0x366b87=await this[_0x104b97(0x528)]({'request':_0x173852,'schema':Me,'ClassRef':ee,'execute':(_0x38fc96,_0x2bd9d0)=>V['inviteCode'](_0x38fc96,_0x2bd9d0)});_0x4ee78f[_0x104b97(0x517)](0xc8)[_0x104b97(0xd6)](_0x366b87);})[_0x5b9e37(0x445)](this['routerPath']('joinGroup'),..._0x18ebd8,async(_0x5dc7c7,_0x207317)=>{const _0x419635=_0x5b9e37;let _0x4be83e=await this[_0x419635(0x2d1)]({'request':_0x5dc7c7,'schema':Wa,'ClassRef':ut,'execute':(_0x597893,_0x280531)=>V['joinGroup'](_0x597893,_0x280531)});_0x207317[_0x419635(0x517)](0xc9)[_0x419635(0xd6)](_0x4be83e);})[_0x5b9e37(0x445)](this[_0x5b9e37(0x307)]('revokeInviteCode'),..._0x18ebd8,async(_0x3a9199,_0x5206c4)=>{const _0x382573=_0x5b9e37;let _0x4e86cf=await this['groupValidate']({'request':_0x3a9199,'schema':Me,'ClassRef':ee,'execute':(_0x513625,_0x4092b1)=>V[_0x382573(0x12f)](_0x513625,_0x4092b1)});_0x5206c4[_0x382573(0x517)](0xc9)[_0x382573(0xd6)](_0x4e86cf);})['put'](this[_0x5b9e37(0x307)](_0x5b9e37(0x5cf)),..._0x18ebd8,async(_0x2e6718,_0x15e94a)=>{const _0x1fd67e=_0x5b9e37;let _0x36db68=await this['groupValidate']({'request':_0x2e6718,'schema':ja,'ClassRef':dt,'execute':(_0xc1185e,_0x59081c)=>V[_0x1fd67e(0x5bd)](_0xc1185e,_0x59081c)});_0x15e94a[_0x1fd67e(0x517)](0xc9)[_0x1fd67e(0xd6)](_0x36db68);})['delete'](this[_0x5b9e37(0x307)]('leaveGroup'),..._0x18ebd8,async(_0x2da4b4,_0x23d700)=>{const _0x26ba42=_0x5b9e37;let _0x32b4c3=await this[_0x26ba42(0x528)]({'request':_0x2da4b4,'schema':{},'ClassRef':ee,'execute':(_0x581fdf,_0x14c99b)=>V[_0x26ba42(0x16a)](_0x581fdf,_0x14c99b)});_0x23d700[_0x26ba42(0x517)](0xc8)[_0x26ba42(0xd6)](_0x32b4c3);});}},Xa=require(a0_0x4851ee(0x223)),Pe=require('jsonwebtoken'),ys=require(a0_0x4851ee(0x483)),Qa=require(a0_0x4851ee(0x3f6)),Ya=T(require('axios')),mt=class{},ht=class c{constructor(_0x49bce0,_0x32ce4e,_0x2bcbe0){const _0x287f0c=a0_0x4851ee;this['configService']=_0x49bce0,this['waMonitor']=_0x32ce4e,this[_0x287f0c(0x642)]=_0x2bcbe0,this[_0x287f0c(0x5e8)]=new C(c[_0x287f0c(0x44c)]);}async[a0_0x4851ee(0x60b)](_0x4df646){const _0x3a396a=a0_0x4851ee;let _0x6ea616=this[_0x3a396a(0x417)][_0x3a396a(0x5b8)](_0x3a396a(0x45a))[_0x3a396a(0x53f)],_0x26ff23=(0x0,Pe['sign'])({'instanceName':_0x4df646[_0x3a396a(0x567)],'apiName':Xe,'tokenId':(0x0,ys['v4'])()},_0x6ea616[_0x3a396a(0x455)],{'expiresIn':_0x6ea616[_0x3a396a(0x285)],'encoding':_0x3a396a(0x11b),'subject':_0x3a396a(0x1de)}),_0x50c64f=await this[_0x3a396a(0x642)][_0x3a396a(0x568)][_0x3a396a(0x1a8)]({'jwt':_0x26ff23},_0x4df646[_0x3a396a(0x567)]);if(_0x50c64f[_0x3a396a(0x44b)])throw this[_0x3a396a(0x5e8)][_0x3a396a(0x44b)]({'localError':c[_0x3a396a(0x44c)]+_0x3a396a(0x587),'error':_0x50c64f[_0x3a396a(0x44b)]}),new g('Authentication\x20error',_0x50c64f['error']?.[_0x3a396a(0x409)]());return{'jwt':_0x26ff23};}async['apikey'](_0x2c94cb){const _0x292121=a0_0x4851ee;let _0xf9bd76=(0x0,ys['v4'])()[_0x292121(0x5fa)](),_0xeb0d58=await this['repository'][_0x292121(0x568)]['create']({'apikey':_0xf9bd76},_0x2c94cb[_0x292121(0x567)]);if(_0xeb0d58['error'])throw this[_0x292121(0x5e8)][_0x292121(0x44b)]({'localError':c['name']+'.jwt','error':_0xeb0d58[_0x292121(0x44b)]}),new g(_0x292121(0x5c6),_0xeb0d58[_0x292121(0x44b)]?.[_0x292121(0x409)]());return{'apikey':_0xf9bd76};}async[a0_0x4851ee(0x5c5)](_0x2d12dc){const _0x568440=a0_0x4851ee;let _0x31611c=this[_0x568440(0x417)][_0x568440(0x5b8)](_0x568440(0x45a));return await this[_0x31611c['TYPE']](_0x2d12dc);}async[a0_0x4851ee(0x297)]({oldToken:_0x58a2b4}){const _0x2517cf=a0_0x4851ee;if(!(0x0,Qa['isJWT'])(_0x58a2b4))throw new g(_0x2517cf(0x3e5));try{let _0x1e24ad=this[_0x2517cf(0x417)]['get'](_0x2517cf(0x45a))[_0x2517cf(0x53f)],_0xbb826f=(0x0,Pe[_0x2517cf(0x372)])(_0x58a2b4,_0x1e24ad[_0x2517cf(0x455)],{'ignoreExpiration':!0x0}),_0x51b47e=await this['repository']['auth'][_0x2517cf(0x487)](_0xbb826f[_0x2517cf(0x567)]),_0x369034=(0x0,Pe[_0x2517cf(0x372)])(_0x51b47e['jwt'],_0x1e24ad['SECRET'],{'ignoreExpiration':!0x0});if(_0xbb826f[_0x2517cf(0x1ff)]!==_0x369034[_0x2517cf(0x1ff)])throw new g(_0x2517cf(0x3e5));let _0x22940c={'jwt':(await this[_0x2517cf(0x60b)]({'instanceName':_0xbb826f[_0x2517cf(0x567)]}))['jwt'],'instanceName':_0xbb826f[_0x2517cf(0x567)]};try{let _0x2888f9=await this[_0x2517cf(0x642)][_0x2517cf(0x491)][_0x2517cf(0x487)](_0xbb826f[_0x2517cf(0x567)]);_0x2888f9?.[_0x2517cf(0x25d)]&&this[_0x2517cf(0x417)]['get'](_0x2517cf(0x4e6))[_0x2517cf(0x448)][_0x2517cf(0x23b)]&&await Ya['default'][_0x2517cf(0x1a8)]({'baseURL':_0x2888f9[_0x2517cf(0x30c)]})['post']('',{'event':'new.jwt','instance':_0xbb826f[_0x2517cf(0x567)],'data':_0x22940c},{'params':{'owner':this[_0x2517cf(0x529)]['waInstances'][_0xbb826f[_0x2517cf(0x567)]][_0x2517cf(0x5fe)]}});}catch(_0x441698){this[_0x2517cf(0x5e8)][_0x2517cf(0x44b)](_0x441698);}return _0x22940c;}catch(_0x5d03cc){throw this[_0x2517cf(0x5e8)]['error']({'localError':c[_0x2517cf(0x44c)]+_0x2517cf(0x1a3),'error':_0x5d03cc}),new g(_0x2517cf(0x3e5));}}},ft=class extends L{constructor(_0x212920,..._0x4e298e){const _0x3bb731=a0_0x4851ee;super(),this['configService']=_0x212920,this['router']=(0x0,Xa[_0x3bb731(0xdf)])();let _0x4ca1ea=_0x212920[_0x3bb731(0x5b8)](_0x3bb731(0x45a));this[_0x3bb731(0x64c)][_0x3bb731(0x198)](_0x3bb731(0x1ab),..._0x4e298e,async(_0xf3f6e8,_0x4b2e7b)=>{const _0x325a58=_0x3bb731;let {instanceName:_0x22e728,apikey:_0x83be25}=_0xf3f6e8[_0x325a58(0xbd)],_0x4c0377=await ce['createInstance']({'instanceName':_0x22e728,'apikey':_0x83be25});return _0x4b2e7b['status'](0xc9)[_0x325a58(0xd6)](_0x4c0377);})[_0x3bb731(0x445)](this[_0x3bb731(0x307)](_0x3bb731(0x4d3)),..._0x4e298e,async(_0x298297,_0x4a2b8b)=>{const _0x49569d=_0x3bb731;let _0x2a3e96=await this[_0x49569d(0x139)]({'request':_0x298297,'schema':v,'ClassRef':b,'execute':_0x3f9b0c=>ce[_0x49569d(0x214)](_0x3f9b0c)});return _0x4a2b8b[_0x49569d(0x517)](0xc8)['json'](_0x2a3e96);})['get'](this['routerPath']('connect'),..._0x4e298e,async(_0x44b4eb,_0x3c5fca)=>{const _0x14a136=_0x3bb731;let _0x11ef60=await this['dataValidate']({'request':_0x44b4eb,'schema':v,'ClassRef':b,'execute':_0x1bdcad=>ce[_0x14a136(0x1c0)](_0x1bdcad)});return _0x3c5fca['status'](0xc8)['json'](_0x11ef60);})[_0x3bb731(0x5b8)](this[_0x3bb731(0x307)](_0x3bb731(0x459)),..._0x4e298e,async(_0x5e7a94,_0x1ca3c4)=>{const _0x4d1342=_0x3bb731;let _0x72d9b5=await this[_0x4d1342(0x139)]({'request':_0x5e7a94,'schema':v,'ClassRef':b,'execute':_0x55112c=>ce[_0x4d1342(0x459)](_0x55112c)});return _0x1ca3c4[_0x4d1342(0x517)](0xc8)[_0x4d1342(0xd6)](_0x72d9b5);})['get'](this[_0x3bb731(0x307)](_0x3bb731(0x24f),!0x1),..._0x4e298e,async(_0x20387e,_0x520b8c)=>{const _0xdc95c6=_0x3bb731;let _0x5af22b=await this[_0xdc95c6(0x139)]({'request':_0x20387e,'schema':null,'ClassRef':b,'execute':_0x45d1ef=>ce[_0xdc95c6(0x24f)](_0x45d1ef)});return _0x520b8c['status'](0xc8)[_0xdc95c6(0xd6)](_0x5af22b);})[_0x3bb731(0x522)](this[_0x3bb731(0x307)](_0x3bb731(0x2e5)),..._0x4e298e,async(_0x42fa95,_0x2f68bd)=>{const _0x1c0eb4=_0x3bb731;let _0x2fafa8=await this[_0x1c0eb4(0x139)]({'request':_0x42fa95,'schema':v,'ClassRef':b,'execute':_0x144651=>ce['logout'](_0x144651)});return _0x2f68bd['status'](0xc8)['json'](_0x2fafa8);})[_0x3bb731(0x522)](this[_0x3bb731(0x307)](_0x3bb731(0x522)),..._0x4e298e,async(_0x565bdd,_0x21ec55)=>{const _0x3b69ea=_0x3bb731;let _0x82df6=await this['dataValidate']({'request':_0x565bdd,'schema':v,'ClassRef':b,'execute':_0x27a06d=>ce[_0x3b69ea(0x5d1)](_0x27a06d)});return _0x21ec55[_0x3b69ea(0x517)](0xc8)['json'](_0x82df6);}),_0x4ca1ea[_0x3bb731(0x357)]===_0x3bb731(0x60b)&&this[_0x3bb731(0x64c)][_0x3bb731(0x445)](_0x3bb731(0x21a),async(_0x4f2688,_0x47cb46)=>{const _0x2c4864=_0x3bb731;let _0x398870=await this['dataValidate']({'request':_0x4f2688,'schema':ma,'ClassRef':mt,'execute':(_0x4f2566,_0x3bf61a)=>ce[_0x2c4864(0x297)](_0x4f2566,_0x3bf61a)});return _0x47cb46[_0x2c4864(0x517)](0xc9)[_0x2c4864(0xd6)](_0x398870);});}},Za=require(a0_0x4851ee(0x223)),bs=class{},z=class extends bs{},wt=class extends z{},yt=class extends z{},bt=class extends z{},Oe=class extends z{},St=class extends z{},Et=class extends z{},vt=class extends z{},Nt=class extends z{},Ct=class extends z{},Tt=class{},Mt=class extends L{constructor(..._0x16e793){const _0x417d26=a0_0x4851ee;super(),this[_0x417d26(0x64c)]=(0x0,Za[_0x417d26(0xdf)])(),this['router'][_0x417d26(0x198)](this[_0x417d26(0x307)](_0x417d26(0x4ca)),..._0x16e793,async(_0x52f59b,_0x4e967a)=>{const _0x7dd0b4=_0x417d26;let _0x5536d4=await this['dataValidate']({'request':_0x52f59b,'schema':ha,'ClassRef':wt,'execute':(_0x16f762,_0x2db345)=>K[_0x7dd0b4(0x4ca)](_0x16f762,_0x2db345)});return _0x4e967a[_0x7dd0b4(0x517)](0xc9)['json'](_0x5536d4);})[_0x417d26(0x198)](this[_0x417d26(0x307)](_0x417d26(0x526)),..._0x16e793,async(_0x47ff34,_0x5cf991)=>{const _0x455dcd=_0x417d26;let _0x33dc09=await this[_0x455dcd(0x139)]({'request':_0x47ff34,'schema':ba,'ClassRef':Oe,'execute':(_0x4ba7ae,_0x40844)=>K[_0x455dcd(0x526)](_0x4ba7ae,_0x40844)});return _0x5cf991['status'](0xc9)[_0x455dcd(0xd6)](_0x33dc09);})[_0x417d26(0x198)](this[_0x417d26(0x307)](_0x417d26(0x1d2)),..._0x16e793,async(_0x30482a,_0x36f103)=>{const _0x2d13f1=_0x417d26;let _0x47362e=await this[_0x2d13f1(0x139)]({'request':_0x30482a,'schema':Sa,'ClassRef':Oe,'execute':(_0x5b308c,_0x105cc0)=>K[_0x2d13f1(0x1d2)](_0x5b308c,_0x105cc0)});return _0x36f103[_0x2d13f1(0x517)](0xc9)['json'](_0x47362e);})[_0x417d26(0x198)](this[_0x417d26(0x307)](_0x417d26(0x283)),..._0x16e793,async(_0x2b09a8,_0x3861ab)=>{const _0xb65845=_0x417d26;let _0x2f9561=await this['dataValidate']({'request':_0x2b09a8,'schema':va,'ClassRef':Et,'execute':(_0x1d5e6a,_0x5ee552)=>K[_0xb65845(0x283)](_0x1d5e6a,_0x5ee552)});return _0x3861ab['status'](0xc9)['json'](_0x2f9561);})[_0x417d26(0x198)](this[_0x417d26(0x307)]('sendLocation'),..._0x16e793,async(_0x3aac65,_0x296d4e)=>{const _0x716237=_0x417d26;let _0x10930f=await this[_0x716237(0x139)]({'request':_0x3aac65,'schema':Na,'ClassRef':vt,'execute':(_0x152da3,_0x29b6e9)=>K[_0x716237(0x677)](_0x152da3,_0x29b6e9)});return _0x296d4e[_0x716237(0x517)](0xc9)[_0x716237(0xd6)](_0x10930f);})[_0x417d26(0x198)](this[_0x417d26(0x307)](_0x417d26(0x37e)),..._0x16e793,async(_0x5d6949,_0x4070bb)=>{const _0xf937a=_0x417d26;let _0x483e77=await this[_0xf937a(0x139)]({'request':_0x5d6949,'schema':Ca,'ClassRef':Nt,'execute':(_0x419ac3,_0x57596d)=>K[_0xf937a(0x37e)](_0x419ac3,_0x57596d)});return _0x4070bb[_0xf937a(0x517)](0xc9)[_0xf937a(0xd6)](_0x483e77);})[_0x417d26(0x198)](this[_0x417d26(0x307)]('sendContact'),..._0x16e793,async(_0x2b2449,_0x46190)=>{const _0x38ff7d=_0x417d26;let _0x1855f8=await this[_0x38ff7d(0x139)]({'request':_0x2b2449,'schema':Ta,'ClassRef':Ct,'execute':(_0x1f5187,_0x28ee44)=>K['sendContact'](_0x1f5187,_0x28ee44)});return _0x46190[_0x38ff7d(0x517)](0xc9)[_0x38ff7d(0xd6)](_0x1855f8);})[_0x417d26(0x198)](this['routerPath']('sendReaction'),..._0x16e793,async(_0x34bbff,_0xf0ccd4)=>{const _0x10d9e6=_0x417d26;let _0x3345ef=await this['dataValidate']({'request':_0x34bbff,'schema':Ma,'ClassRef':Tt,'execute':(_0x37799d,_0x19424a)=>K[_0x10d9e6(0x535)](_0x37799d,_0x19424a)});return _0xf0ccd4[_0x10d9e6(0x517)](0xc9)['json'](_0x3345ef);})['post'](this['routerPath']('sendPoll'),..._0x16e793,async(_0x2b9b23,_0x2a3ffb)=>{const _0x1ead68=_0x417d26;let _0x3a3789=await this[_0x1ead68(0x139)]({'request':_0x2b9b23,'schema':Ea,'ClassRef':bt,'execute':(_0x2a4dd1,_0x3fc404)=>K['sendPoll'](_0x2a4dd1,_0x3fc404)});return _0x2a3ffb[_0x1ead68(0x517)](0xc9)[_0x1ead68(0xd6)](_0x3a3789);})[_0x417d26(0x198)](this[_0x417d26(0x307)](_0x417d26(0x30a)),..._0x16e793,async(_0x8d4281,_0x2858e4)=>{const _0x451d4d=_0x417d26;let _0x1a27fd=await this[_0x451d4d(0x139)]({'request':_0x8d4281,'schema':ya,'ClassRef':yt,'execute':(_0x11862c,_0x16f5c8)=>K[_0x451d4d(0x30a)](_0x11862c,_0x16f5c8)});return _0x2858e4[_0x451d4d(0x517)](0xc9)['json'](_0x1a27fd);})[_0x417d26(0x198)](this[_0x417d26(0x307)](_0x417d26(0x1eb)),..._0x16e793,async(_0x13b660,_0x125395)=>{const _0x3632f2=_0x417d26;let _0x114659=await this['dataValidate']({'request':_0x13b660,'schema':wa,'ClassRef':St,'execute':(_0x4ecedf,_0x3f63ad)=>K[_0x3632f2(0x1eb)](_0x4ecedf,_0x3f63ad)});return _0x125395[_0x3632f2(0x517)](0xc9)[_0x3632f2(0xd6)](_0x114659);});}},eo=require(a0_0x4851ee(0x223)),Rt=class extends L{constructor(..._0x3bdf86){const _0x18dfa7=a0_0x4851ee;super(),this[_0x18dfa7(0x64c)]=(0x0,eo[_0x18dfa7(0xdf)])(),this[_0x18dfa7(0x64c)]['get'](this[_0x18dfa7(0x307)](_0x18dfa7(0x509)),..._0x3bdf86,(_0x90237c,_0x4f9849)=>to['qrcode'](_0x90237c,_0x4f9849));}},so=require(a0_0x4851ee(0x223)),At=class{},It=class extends L{constructor(..._0x1273b2){const _0x268cb9=a0_0x4851ee;super(),this[_0x268cb9(0x64c)]=(0x0,so[_0x268cb9(0xdf)])(),this[_0x268cb9(0x64c)][_0x268cb9(0x198)](this['routerPath'](_0x268cb9(0x512)),..._0x1273b2,async(_0x4935df,_0x1c7e6f)=>{const _0xe3b6b2=_0x268cb9;let _0x34552b=await this['dataValidate']({'request':_0x4935df,'schema':Ha,'ClassRef':At,'execute':(_0x49b39f,_0x522c64)=>Ss[_0xe3b6b2(0x2bc)](_0x49b39f,_0x522c64)});_0x1c7e6f[_0xe3b6b2(0x517)](0xc9)[_0xe3b6b2(0xd6)](_0x34552b);})['get'](this[_0x268cb9(0x307)](_0x268cb9(0x487)),..._0x1273b2,async(_0x595686,_0x55cbb9)=>{const _0xea9d8e=_0x268cb9;let _0x3ab33a=await this[_0xea9d8e(0x139)]({'request':_0x595686,'schema':v,'ClassRef':b,'execute':_0x5ef5e8=>Ss[_0xea9d8e(0x5db)](_0x5ef5e8)});_0x55cbb9['status'](0xc8)[_0xea9d8e(0xd6)](_0x3ab33a);});}},ao=require('express'),f=new C(a0_0x4851ee(0x414)),Dt=class extends L{constructor(..._0x376886){const _0x370586=a0_0x4851ee;super(),this[_0x370586(0x64c)]=(0x0,ao[_0x370586(0xdf)])(),this['router'][_0x370586(0x198)](this['routerPath']('scheduleMessage'),..._0x376886,async(_0x5b982e,_0xf41470)=>{const _0x1c1046=_0x370586;let _0x7509cb=_0x5b982e[_0x1c1046(0xbd)];f[_0x1c1046(0x1bc)]('request\x20received\x20in\x20scheduleMessage'),f[_0x1c1046(0x1bc)](_0x1c1046(0x62c)),f[_0x1c1046(0x1bc)](_0x5b982e['body']);let _0x2bef11=await this[_0x1c1046(0x139)]({'request':_0x5b982e,'schema':v,'ClassRef':b,'execute':_0x3699fa=>R[_0x1c1046(0xe2)](_0x3699fa,_0x7509cb)});_0xf41470[_0x1c1046(0x517)](0xc8)['json'](_0x2bef11);})[_0x370586(0x5b8)](this['routerPath'](_0x370586(0x1e3)),..._0x376886,async(_0x43c710,_0x5ea109)=>{const _0x54919f=_0x370586;let _0x1bc54a=await this[_0x54919f(0x139)]({'request':_0x43c710,'schema':v,'ClassRef':b,'execute':_0x25996b=>R['getScheduleMessage'](_0x25996b)});_0x5ea109[_0x54919f(0x517)](0xc8)[_0x54919f(0xd6)](_0x1bc54a);})[_0x370586(0x522)](this['routerPath'](_0x370586(0x1fa)),..._0x376886,async(_0x17e21e,_0x458470)=>{const _0x5e236b=_0x370586;f[_0x5e236b(0x1bc)]('request\x20received\x20in\x20deleteDoneMessages');let _0x542a0b=await this['dataValidate']({'request':_0x17e21e,'schema':v,'ClassRef':b,'execute':_0x53be66=>R[_0x5e236b(0x1fa)](_0x53be66)});_0x458470['status'](0xc8)[_0x5e236b(0xd6)](_0x542a0b);})['post'](this[_0x370586(0x307)](_0x370586(0x238)),..._0x376886,async(_0x85b52a,_0x33064d)=>{const _0x569004=_0x370586;let _0x29bce7=_0x85b52a[_0x569004(0xbd)];f[_0x569004(0x1bc)](_0x569004(0x438)),f[_0x569004(0x1bc)](_0x569004(0x62c)),f[_0x569004(0x1bc)](_0x85b52a[_0x569004(0xbd)]);let _0x7c01bc=await this[_0x569004(0x139)]({'request':_0x85b52a,'schema':v,'ClassRef':b,'execute':_0x39587b=>R[_0x569004(0x238)](_0x39587b,_0x29bce7)});_0x33064d[_0x569004(0x517)](0xc8)[_0x569004(0xd6)](_0x7c01bc);})['get'](this[_0x370586(0x307)](_0x370586(0x2e8)),..._0x376886,async(_0x143ee0,_0x426cbd)=>{const _0x5f0a03=_0x370586;f[_0x5f0a03(0x1bc)]('request\x20received\x20in\x20getAutomateSystem');let _0x4e1018=await this[_0x5f0a03(0x139)]({'request':_0x143ee0,'schema':v,'ClassRef':b,'execute':_0x50bc12=>R[_0x5f0a03(0x2e8)](_0x50bc12)});_0x426cbd[_0x5f0a03(0x517)](0xc8)[_0x5f0a03(0xd6)](_0x4e1018);})[_0x370586(0x5b8)](this[_0x370586(0x307)]('getTicketSystem'),..._0x376886,async(_0x4f6358,_0x5ccb1a)=>{const _0x16ef0f=_0x370586;f[_0x16ef0f(0x1bc)](_0x16ef0f(0x3a5));let _0x454a20=await this[_0x16ef0f(0x139)]({'request':_0x4f6358,'schema':v,'ClassRef':b,'execute':_0x32c9b3=>R[_0x16ef0f(0x2e8)](_0x32c9b3)});_0x5ccb1a[_0x16ef0f(0x517)](0xc8)['json'](_0x454a20);})['post'](this[_0x370586(0x307)](_0x370586(0x29f)),..._0x376886,async(_0x49032b,_0x3d6956)=>{const _0xbf6642=_0x370586;let _0x20644b=_0x49032b[_0xbf6642(0xbd)];f[_0xbf6642(0x1bc)]('request\x20received\x20in\x20updateAgent'),f[_0xbf6642(0x1bc)](_0xbf6642(0x62c)),f['verbose'](_0x49032b[_0xbf6642(0xbd)]);let _0x25d688=await this[_0xbf6642(0x139)]({'request':_0x49032b,'schema':v,'ClassRef':b,'execute':_0x5deb6c=>R['updateAgent'](_0x5deb6c,_0x20644b)});_0x3d6956[_0xbf6642(0x517)](0xc8)[_0xbf6642(0xd6)](_0x25d688);})[_0x370586(0x198)](this['routerPath'](_0x370586(0x58c)),..._0x376886,async(_0x54d637,_0x5e342f)=>{const _0x330311=_0x370586;let _0x12c28b=_0x54d637[_0x330311(0xbd)];f[_0x330311(0x1bc)](_0x330311(0x634)),f['verbose'](_0x330311(0x62c)),f[_0x330311(0x1bc)](_0x54d637[_0x330311(0xbd)]);let _0x42dbc0=await this[_0x330311(0x139)]({'request':_0x54d637,'schema':v,'ClassRef':b,'execute':_0x182557=>R[_0x330311(0x58c)](_0x182557,_0x12c28b)});_0x5e342f['status'](0xc8)['json'](_0x42dbc0);})['post'](this[_0x370586(0x307)]('updateFlowConfig'),..._0x376886,async(_0x159a69,_0x268380)=>{const _0x97bbd5=_0x370586;let _0x2a6221=_0x159a69[_0x97bbd5(0xbd)];f[_0x97bbd5(0x1bc)]('request\x20received\x20in\x20updateFlowConfig'),f[_0x97bbd5(0x1bc)](_0x97bbd5(0x62c)),f[_0x97bbd5(0x1bc)](_0x159a69[_0x97bbd5(0xbd)]);let _0x815a2b=await this[_0x97bbd5(0x139)]({'request':_0x159a69,'schema':v,'ClassRef':b,'execute':_0x16d6cc=>R[_0x97bbd5(0x602)](_0x16d6cc,_0x2a6221)});_0x268380[_0x97bbd5(0x517)](0xc8)[_0x97bbd5(0xd6)](_0x815a2b);})[_0x370586(0x198)](this[_0x370586(0x307)]('getConversation'),..._0x376886,async(_0x58c72a,_0x25a160)=>{const _0x3f8849=_0x370586;let _0x534dfc=_0x58c72a['body'];f[_0x3f8849(0x1bc)]('request\x20received\x20in\x20getConversation'),f[_0x3f8849(0x1bc)]('request\x20body:\x20'),f[_0x3f8849(0x1bc)](_0x58c72a[_0x3f8849(0xbd)]);let _0x4dd596=await this[_0x3f8849(0x139)]({'request':_0x58c72a,'schema':v,'ClassRef':b,'execute':_0x4afb50=>R[_0x3f8849(0x5f2)](_0x4afb50,_0x534dfc)});_0x25a160['status'](0xc8)[_0x3f8849(0xd6)](_0x4dd596);})[_0x370586(0x198)](this['routerPath'](_0x370586(0x38a)),..._0x376886,async(_0x148c2d,_0x5fac23)=>{const _0x21e026=_0x370586;let _0x316911=_0x148c2d[_0x21e026(0xbd)];f[_0x21e026(0x1bc)](_0x21e026(0x362)),f[_0x21e026(0x1bc)]('request\x20body:\x20'),f[_0x21e026(0x1bc)](_0x148c2d[_0x21e026(0xbd)]);let _0x539ac3=await this[_0x21e026(0x139)]({'request':_0x148c2d,'schema':v,'ClassRef':b,'execute':_0x5a3332=>R['fetchConversation'](_0x5a3332,_0x316911)});_0x5fac23['status'](0xc8)[_0x21e026(0xd6)](_0x539ac3);})[_0x370586(0x198)](this[_0x370586(0x307)]('editConversation'),..._0x376886,async(_0x13a8a8,_0x46e098)=>{const _0x3c73df=_0x370586;let _0x2b1276=_0x13a8a8[_0x3c73df(0xbd)];f['verbose']('request\x20received\x20in\x20editConversation'),f[_0x3c73df(0x1bc)](_0x3c73df(0x62c)),f[_0x3c73df(0x1bc)](_0x13a8a8[_0x3c73df(0xbd)]);let _0x43ef27=await this['dataValidate']({'request':_0x13a8a8,'schema':v,'ClassRef':b,'execute':_0xe004de=>R[_0x3c73df(0x408)](_0xe004de,_0x2b1276)});_0x46e098[_0x3c73df(0x517)](0xc8)[_0x3c73df(0xd6)](_0x43ef27);})[_0x370586(0x522)](this[_0x370586(0x307)](_0x370586(0x5af)),..._0x376886,async(_0x25549e,_0x8cbe2)=>{const _0x30c368=_0x370586;let _0x5d59e0=_0x25549e['body'];f['verbose']('request\x20received\x20in\x20deleteConversation'),f[_0x30c368(0x1bc)](_0x30c368(0x62c)),f[_0x30c368(0x1bc)](_0x25549e[_0x30c368(0xbd)]);let _0x1d9c74=await this[_0x30c368(0x139)]({'request':_0x25549e,'schema':v,'ClassRef':b,'execute':_0x4f036c=>R[_0x30c368(0x5af)](_0x4f036c,_0x5d59e0)});_0x8cbe2['status'](0xc8)[_0x30c368(0xd6)](_0x1d9c74);})[_0x370586(0x198)](this[_0x370586(0x307)](_0x370586(0x50a)),..._0x376886,async(_0x518a53,_0x19eaea)=>{const _0x5ce650=_0x370586;let _0x1171c6=_0x518a53[_0x5ce650(0xbd)];f[_0x5ce650(0x1bc)](_0x5ce650(0x32e)),f[_0x5ce650(0x1bc)]('request\x20body:\x20'),f[_0x5ce650(0x1bc)](_0x518a53[_0x5ce650(0xbd)]);let _0x108af4=await this[_0x5ce650(0x139)]({'request':_0x518a53,'schema':v,'ClassRef':b,'execute':_0x588af2=>R[_0x5ce650(0x667)](_0x588af2,_0x1171c6)});_0x19eaea[_0x5ce650(0x517)](0xc8)['json'](_0x108af4);})[_0x370586(0x198)](this['routerPath'](_0x370586(0x43f)),..._0x376886,async(_0x2c27bc,_0x498662)=>{const _0x5a8e0c=_0x370586;let _0x57264b=_0x2c27bc[_0x5a8e0c(0xbd)];f[_0x5a8e0c(0x1bc)](_0x5a8e0c(0x98)),f[_0x5a8e0c(0x1bc)](_0x5a8e0c(0x62c)),f[_0x5a8e0c(0x1bc)](_0x2c27bc[_0x5a8e0c(0xbd)]),delete _0x57264b[_0x5a8e0c(0xc4)],delete _0x57264b[_0x5a8e0c(0x626)],delete _0x57264b[_0x5a8e0c(0x65e)],delete _0x57264b[_0x5a8e0c(0x3e8)];let _0x179964=await this[_0x5a8e0c(0x139)]({'request':_0x2c27bc,'schema':v,'ClassRef':b,'execute':_0x5178df=>R[_0x5a8e0c(0x48b)](_0x5178df,_0x57264b)});_0x498662[_0x5a8e0c(0x517)](0xc8)[_0x5a8e0c(0xd6)](_0x179964);})[_0x370586(0x198)](this['routerPath']('editflowblock'),..._0x376886,async(_0x10cf8d,_0x37d3d7)=>{const _0x13ba6a=_0x370586;let _0xa16bfe=_0x10cf8d[_0x13ba6a(0xbd)];f['verbose'](_0x13ba6a(0x98)),f[_0x13ba6a(0x1bc)]('request\x20body:\x20'),f[_0x13ba6a(0x1bc)](_0x10cf8d[_0x13ba6a(0xbd)]);let _0x560480=await this[_0x13ba6a(0x139)]({'request':_0x10cf8d,'schema':v,'ClassRef':b,'execute':_0x517c1a=>R['editFlowBlock'](_0x517c1a,_0xa16bfe)});_0x37d3d7[_0x13ba6a(0x517)](0xc8)['json'](_0x560480);})[_0x370586(0x198)](this[_0x370586(0x307)](_0x370586(0xa8)),..._0x376886,async(_0x3e20cf,_0x351621)=>{const _0x9882e7=_0x370586;let _0x597344=_0x3e20cf[_0x9882e7(0xbd)];f['verbose'](_0x9882e7(0x98)),f[_0x9882e7(0x1bc)](_0x9882e7(0x62c)),f[_0x9882e7(0x1bc)](_0x3e20cf[_0x9882e7(0xbd)]);let _0x3d5328=await this[_0x9882e7(0x139)]({'request':_0x3e20cf,'schema':v,'ClassRef':b,'execute':_0x43b170=>R[_0x9882e7(0x62e)](_0x43b170,_0x597344)});_0x351621['status'](0xc8)['json'](_0x3d5328);})[_0x370586(0x198)](this[_0x370586(0x307)]('editflowvaredit'),..._0x376886,async(_0x35c503,_0x2c4f46)=>{const _0x2feb27=_0x370586;let _0x401bc8=_0x35c503[_0x2feb27(0xbd)];f[_0x2feb27(0x1bc)](_0x2feb27(0x98)),f[_0x2feb27(0x1bc)](_0x2feb27(0x62c)),f[_0x2feb27(0x1bc)](_0x35c503['body']);let _0x3c670e=await this['dataValidate']({'request':_0x35c503,'schema':v,'ClassRef':b,'execute':_0x18504d=>R[_0x2feb27(0x18b)](_0x18504d,_0x401bc8)});_0x2c4f46[_0x2feb27(0x517)](0xc8)['json'](_0x3c670e);})[_0x370586(0x198)](this[_0x370586(0x307)]('editflowgroup'),..._0x376886,async(_0x1aa0e2,_0x26e587)=>{const _0x215122=_0x370586;let _0x466183=_0x1aa0e2['body'];f[_0x215122(0x1bc)](_0x215122(0x32d)),f[_0x215122(0x1bc)](_0x215122(0x62c)),f[_0x215122(0x1bc)](_0x1aa0e2['body']);let _0xc22292=await this['dataValidate']({'request':_0x1aa0e2,'schema':v,'ClassRef':b,'execute':_0x4382ef=>R[_0x215122(0x34a)](_0x4382ef,_0x466183)});_0x26e587['status'](0xc8)['json'](_0xc22292);})[_0x370586(0x198)](this[_0x370586(0x307)](_0x370586(0x44d)),..._0x376886,async(_0xbb360b,_0x2b74e9)=>{const _0x13746c=_0x370586;let _0xd72402=_0xbb360b[_0x13746c(0xbd)];f[_0x13746c(0x1bc)](_0x13746c(0x1f7)),f[_0x13746c(0x1bc)]('request\x20body:\x20'),f['verbose'](_0xbb360b[_0x13746c(0xbd)]);let _0xa75d46=await this['dataValidate']({'request':_0xbb360b,'schema':v,'ClassRef':b,'execute':_0x545992=>R[_0x13746c(0x639)](_0x545992,_0xd72402)});_0x2b74e9[_0x13746c(0x517)](0xc8)[_0x13746c(0xd6)](_0xa75d46);})[_0x370586(0x198)](this['routerPath']('editflowvariable'),..._0x376886,async(_0x36813b,_0x779a41)=>{const _0x4f0f9a=_0x370586;let _0x4e35de=_0x36813b[_0x4f0f9a(0xbd)];f['verbose'](_0x4f0f9a(0x21f)),f[_0x4f0f9a(0x1bc)](_0x4f0f9a(0x62c)),f[_0x4f0f9a(0x1bc)](_0x36813b[_0x4f0f9a(0xbd)]);let _0x4ffac5=await this[_0x4f0f9a(0x139)]({'request':_0x36813b,'schema':v,'ClassRef':b,'execute':_0x246a82=>R[_0x4f0f9a(0x367)](_0x246a82,_0x4e35de)});_0x779a41[_0x4f0f9a(0x517)](0xc8)['json'](_0x4ffac5);})[_0x370586(0x198)](this[_0x370586(0x307)](_0x370586(0x1e0)),..._0x376886,async(_0x59abf7,_0x575d32)=>{const _0x4eed8f=_0x370586;let _0x3762f8=_0x59abf7[_0x4eed8f(0xbd)];f['verbose']('request\x20received\x20in\x20getFlow'),f[_0x4eed8f(0x1bc)](_0x4eed8f(0x62c)),f[_0x4eed8f(0x1bc)](_0x59abf7[_0x4eed8f(0xbd)]);let _0x2eee4b=await this['dataValidate']({'request':_0x59abf7,'schema':v,'ClassRef':b,'execute':_0x27a12d=>R[_0x4eed8f(0x64b)](_0x27a12d,_0x3762f8)});_0x575d32[_0x4eed8f(0x517)](0xc8)[_0x4eed8f(0xd6)](_0x2eee4b);})['delete'](this['routerPath']('deleteflow'),..._0x376886,async(_0x5546b2,_0x200279)=>{const _0x25dfc0=_0x370586;let _0xd3d8bd=_0x5546b2[_0x25dfc0(0xbd)];f[_0x25dfc0(0x1bc)]('request\x20received\x20in\x20createFlow'),f[_0x25dfc0(0x1bc)](_0x25dfc0(0x62c)),f[_0x25dfc0(0x1bc)](_0x5546b2[_0x25dfc0(0xbd)]);let _0x57d88f=await this[_0x25dfc0(0x139)]({'request':_0x5546b2,'schema':v,'ClassRef':b,'execute':_0x22b397=>R[_0x25dfc0(0x606)](_0x22b397,_0xd3d8bd)});_0x200279['status'](0xc8)[_0x25dfc0(0xd6)](_0x57d88f);})[_0x370586(0x5b8)](this['routerPath'](_0x370586(0x293)),..._0x376886,async(_0x57cb97,_0x1aba34)=>{const _0x2bf692=_0x370586;f[_0x2bf692(0x1bc)](_0x2bf692(0x304));let _0xe56fef=await this[_0x2bf692(0x139)]({'request':_0x57cb97,'schema':v,'ClassRef':b,'execute':_0x483d74=>R[_0x2bf692(0x5d6)](_0x483d74)});_0x1aba34[_0x2bf692(0x517)](0xc8)['json'](_0xe56fef);});}},no=T(require('path')),te={};function oo(_0x5b5be9,_0x15f679,_0x1ae568,_0x262412){te[_0x5b5be9]||(te[_0x5b5be9]={}),te[_0x5b5be9][_0x15f679]={'id':_0x15f679,'response':_0x1ae568,'events':_0x262412};}function io(_0x4d832b,_0x2a58c1){!te[_0x4d832b]||!te[_0x4d832b][_0x2a58c1]||delete te[_0x4d832b][_0x2a58c1];}function G(_0x4aa77f,_0x2d3fcc,_0x30df7c){const _0x2aeaa7=a0_0x4851ee;if(!te[_0x4aa77f])return;let _0x5d9673=_0x2aeaa7(0x225)+JSON['stringify'](_0x30df7c)+'\x0a\x0a';Object[_0x2aeaa7(0x4a6)](te[_0x4aa77f])[_0x2aeaa7(0x386)](_0x560a8d=>{const _0x64d12c=_0x2aeaa7;_0x560a8d[_0x64d12c(0x4b9)][_0x64d12c(0x5a9)](_0x2d3fcc)&&_0x560a8d['response'][_0x64d12c(0x61b)](_0x5d9673);});}function ro(){const _0x1dfc47=a0_0x4851ee;let _0x5b569c={};for(let _0x121474 in te)_0x5b569c[_0x121474]=Object[_0x1dfc47(0x4a6)](te[_0x121474])['map'](_0x6c4a1c=>({'id':_0x6c4a1c['id'],'events':_0x6c4a1c[_0x1dfc47(0x4b9)]}));return _0x5b569c;}var co=require('uuid'),ui=no[a0_0x4851ee(0x481)][a0_0x4851ee(0x273)](__dirname,a0_0x4851ee(0x4d5)),Ot=(0x0,Pt[a0_0x4851ee(0xdf)])(),di=y['get'](a0_0x4851ee(0x45a))['TYPE'],pe=[fs,ua,ga[di]];Ot[a0_0x4851ee(0x13b)](a0_0x4851ee(0x571),Pt[a0_0x4851ee(0x481)][a0_0x4851ee(0x616)](ui))[a0_0x4851ee(0x5b8)]('/events/:instance',async(_0x33fff0,_0xfab44d)=>{const _0xe15865=a0_0x4851ee;console[_0xe15865(0x2c6)](_0xe15865(0x44a));let _0x56599b=_0x33fff0[_0xe15865(0x655)][_0xe15865(0x5a3)],_0x49ac4e=(_0x33fff0[_0xe15865(0x5ae)][_0xe15865(0x4b9)]||'')[_0xe15865(0x4dd)](','),_0x1555c0=(0x0,co['v4'])();console[_0xe15865(0x2c6)](_0xe15865(0x109),_0x56599b),console[_0xe15865(0x2c6)](_0xe15865(0x530),_0x49ac4e);let _0x3d1b18=y[_0xe15865(0x5b8)](_0xe15865(0x45a))[_0xe15865(0x5c9)],_0x12d423=_0x33fff0[_0xe15865(0x5ae)][_0xe15865(0x342)];if(console['log'](_0xe15865(0x4aa),_0x12d423),_0x3d1b18[_0xe15865(0x184)]!==_0x12d423){console[_0xe15865(0x2c6)](_0xe15865(0x4fc));try{let _0xe53586=await de[_0xe15865(0x568)][_0xe15865(0x487)](_0x56599b);if(console[_0xe15865(0x2c6)]('Instance\x20Key\x20from\x20DB:',_0xe53586),!_0xe53586||_0xe53586[_0xe15865(0x342)]!==_0x12d423)return console['log'](_0xe15865(0x436)),_0xfab44d[_0xe15865(0x517)](0x191)[_0xe15865(0x43a)](_0xe15865(0x27d));}catch(_0x31805c){return console[_0xe15865(0x44b)](_0xe15865(0xe6),_0x31805c),_0xfab44d[_0xe15865(0x517)](0x191)[_0xe15865(0x43a)](_0xe15865(0x3a2));}}if(!await Ye(_0x56599b))return _0xfab44d[_0xe15865(0x517)](0x194)[_0xe15865(0x43a)](_0xe15865(0x1d0));_0xfab44d[_0xe15865(0x647)](_0xe15865(0x5ec),_0xe15865(0x255)),_0xfab44d[_0xe15865(0x647)]('Cache-Control','no-cache'),_0xfab44d[_0xe15865(0x647)]('Connection',_0xe15865(0x39a)),_0xfab44d[_0xe15865(0x289)]();let _0x12f4e6=_0xe15865(0x225)+JSON[_0xe15865(0x63a)]({'info':_0xe15865(0x1b2)})+'\x0a\x0a';_0xfab44d['write'](_0x12f4e6),oo(_0x56599b,_0x1555c0,_0xfab44d,_0x49ac4e),_0x33fff0['on'](_0xe15865(0x601),()=>{const _0x2277b4=_0xe15865;console[_0x2277b4(0x2c6)](_0x2277b4(0x36f)+_0x56599b),io(_0x56599b,_0x1555c0);});}),Ot[a0_0x4851ee(0x5b8)](a0_0x4851ee(0x4de),(_0x334da6,_0x2c2e4d)=>{const _0x75878f=a0_0x4851ee;let _0x2b6bdf=ro();_0x2c2e4d[_0x75878f(0xd6)](_0x2b6bdf);})[a0_0x4851ee(0x5b8)]('/',(_0x38392b,_0x26e74b)=>{const _0x4a24b1=a0_0x4851ee;let _0x183ca7=y[_0x4a24b1(0x5b8)]('SSL_CONF'),_0x349521=_0x183ca7&&_0x183ca7[_0x4a24b1(0x28a)][_0x4a24b1(0x4dd)]('/')[0x4];if(_0x349521){let _0x109f11=encodeURIComponent(_0x4a24b1(0x270)+_0x349521);_0x26e74b[_0x4a24b1(0x3c7)]('https://uazapi-plugin.bubbleapps.io/?url='+_0x109f11);}else _0x26e74b[_0x4a24b1(0x3c7)]('https://uazapi-plugin.bubbleapps.io/');})[a0_0x4851ee(0x445)](a0_0x4851ee(0x24a),...pe,async(_0x51c508,_0x3059c4)=>{const _0x48f762=a0_0x4851ee;try{console[_0x48f762(0x2c6)](_0x48f762(0x23a)),_0x3059c4['status'](0xc8)[_0x48f762(0xd6)]({'message':'API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos'}),_0x3059c4['on'](_0x48f762(0x511),()=>process[_0x48f762(0x2c3)](0x0));}catch(_0x1ea3c4){console[_0x48f762(0x44b)]('Erro\x20ao\x20tentar\x20encerrar\x20a\x20API',_0x1ea3c4),_0x3059c4['status'](0x1f4)[_0x48f762(0xd6)]({'message':_0x48f762(0x4cf)});}})[a0_0x4851ee(0x13b)](a0_0x4851ee(0x1ca),new ft(y,...pe)[a0_0x4851ee(0x64c)],new Rt(fs)[a0_0x4851ee(0x64c)])[a0_0x4851ee(0x13b)]('/message',new Mt(...pe)[a0_0x4851ee(0x64c)])['use']('/chat',new ot(...pe)[a0_0x4851ee(0x64c)])[a0_0x4851ee(0x13b)]('/group',new gt(...pe)[a0_0x4851ee(0x64c)])[a0_0x4851ee(0x13b)](a0_0x4851ee(0x4b5),new It(...pe)['router'])[a0_0x4851ee(0x13b)](a0_0x4851ee(0x640),new Dt(...pe)[a0_0x4851ee(0x64c)]);var g=class{constructor(..._0x3828b6){const _0x567a9a=a0_0x4851ee;throw{'status':0x190,'error':_0x567a9a(0x565),'message':_0x3828b6[_0x567a9a(0x291)]>0x0?_0x3828b6:void 0x0};}},ne=class{constructor(..._0x4f4a8a){const _0x14de7b=a0_0x4851ee;throw{'status':0x191,'error':_0x14de7b(0x675),'message':_0x4f4a8a[_0x14de7b(0x291)]>0x0?_0x4f4a8a:void 0x0};}},re=class{constructor(..._0x30b1d6){const _0x42011c=a0_0x4851ee;throw{'status':0x193,'error':_0x42011c(0x2f0),'message':_0x30b1d6[_0x42011c(0x291)]>0x0?_0x30b1d6:void 0x0};}},x=class{constructor(..._0x1d6603){const _0xf1145b=a0_0x4851ee;throw{'status':0x194,'error':_0xf1145b(0x115),'message':_0x1d6603[_0xf1145b(0x291)]>0x0?_0x1d6603:void 0x0};}},A=class{constructor(..._0x163869){throw{'status':0x1f4,'error':'Internal\x20Server\x20Error','message':_0x163869['length']>0x0?_0x163869:void 0x0};}},ge=require(a0_0x4851ee(0x56e));async function Es(_0x45daac){const _0x4fe26b=a0_0x4851ee;let _0x245b40=new C(Es[_0x4fe26b(0x44c)]),_0x12dfca=M[_0x4fe26b(0x3dd)](),_0x4eac3e=_0x12dfca['db'](y[_0x4fe26b(0x5b8)](_0x4fe26b(0x4c2))[_0x4fe26b(0x3f3)][_0x4fe26b(0x15d)]+'-instances')[_0x4fe26b(0x4bb)](_0x45daac),_0x38180a=async(_0x53d4d9,_0x3870c2)=>{const _0x68f128=_0x4fe26b;try{return await _0x12dfca['connect'](),await _0x4eac3e[_0x68f128(0x268)]({'_id':_0x3870c2},JSON[_0x68f128(0x5f3)](JSON[_0x68f128(0x63a)](_0x53d4d9,ge[_0x68f128(0x105)]['replacer'])),{'upsert':!0x0});}catch{}},_0x4bd931=async _0x1bf3da=>{const _0x48f4c6=_0x4fe26b;try{await _0x12dfca[_0x48f4c6(0x478)]();let _0x35b2fa=await _0x4eac3e[_0x48f4c6(0x3ce)]({'_id':_0x1bf3da}),_0x4a9127=JSON[_0x48f4c6(0x63a)](_0x35b2fa);return JSON[_0x48f4c6(0x5f3)](_0x4a9127,ge[_0x48f4c6(0x105)][_0x48f4c6(0x65d)]);}catch{}},_0xefb0f2=async _0x2f1a34=>{const _0x34dd55=_0x4fe26b;try{return await _0x12dfca[_0x34dd55(0x478)](),await _0x4eac3e['deleteOne']({'_id':_0x2f1a34});}catch{}},_0x16649c=await _0x4bd931(_0x4fe26b(0x39c))||(0x0,ge[_0x4fe26b(0x4a5)])();return{'state':{'creds':_0x16649c,'keys':{'get':async(_0x33e93c,_0x2c0a48)=>{const _0x5daabc=_0x4fe26b;let _0x16b9b4={};return await Promise[_0x5daabc(0x249)](_0x2c0a48[_0x5daabc(0x51a)](async _0x5ec80d=>{const _0x205efa=_0x5daabc;let _0x18e9aa=await _0x4bd931(_0x33e93c+'-'+_0x5ec80d);_0x33e93c===_0x205efa(0x657)&&_0x18e9aa&&(_0x18e9aa=ge[_0x205efa(0x457)]['Message'][_0x205efa(0x33c)][_0x205efa(0x135)](_0x18e9aa)),_0x16b9b4[_0x5ec80d]=_0x18e9aa;})),_0x16b9b4;},'set':async _0x461e43=>{const _0x4dbcc7=_0x4fe26b;let _0x4553c7=[];for(let _0x42bf3c in _0x461e43)for(let _0x5c5239 in _0x461e43[_0x42bf3c]){let _0xce54ec=_0x461e43[_0x42bf3c][_0x5c5239],_0x40d08c=_0x42bf3c+'-'+_0x5c5239;_0x4553c7[_0x4dbcc7(0x53b)](_0xce54ec?_0x38180a(_0xce54ec,_0x40d08c):_0xefb0f2(_0x40d08c));}await Promise[_0x4dbcc7(0x249)](_0x4553c7);}}},'saveCreds':async()=>_0x38180a(_0x16649c,'creds')};}var Cs=T(require(a0_0x4851ee(0x547))),Ts=T(require('node-cache')),$t=require(a0_0x4851ee(0x56e)),lo=require(a0_0x4851ee(0x41a)),xt=require(a0_0x4851ee(0x56e)),_t;function pi(_0x2a8a9e){const _0x536a91=a0_0x4851ee;return _t||(_t=(0x0,lo[_0x536a91(0x303)])({'url':_0x2a8a9e['URI']}),_t[_0x536a91(0x478)]()),_t;}var ye=class c{constructor(_0x238c1b,_0x15a03e){const _0x3d38c2=a0_0x4851ee;this['redisEnv']=_0x238c1b,this[_0x3d38c2(0x567)]=_0x15a03e,this[_0x3d38c2(0x5e8)]=new C(c['name']),this[_0x3d38c2(0x28b)]=pi(_0x238c1b);}set[a0_0x4851ee(0x309)](_0x4df7cd){const _0x35f61e=a0_0x4851ee;this[_0x35f61e(0x567)]=_0x4df7cd;}async[a0_0x4851ee(0x4c1)](){const _0x5141df=a0_0x4851ee;try{return await this['client'][_0x5141df(0x2d3)]([_0x5141df(0x2b5),this[_0x5141df(0x4cb)]['PREFIX_KEY']+':*']);}catch(_0x50dd92){this[_0x5141df(0x5e8)]['error'](_0x50dd92);}}async[a0_0x4851ee(0xcb)](_0x9197ff,_0x23720d){const _0x25690e=a0_0x4851ee;try{let _0x4eeb60=JSON[_0x25690e(0x63a)](_0x23720d,xt[_0x25690e(0x105)][_0x25690e(0xb4)]);return await this[_0x25690e(0x28b)][_0x25690e(0x1e1)](this[_0x25690e(0x4cb)]['PREFIX_KEY']+':'+this['instanceName'],_0x9197ff,_0x4eeb60);}catch(_0x20ba67){this[_0x25690e(0x5e8)][_0x25690e(0x44b)](_0x20ba67);}}async[a0_0x4851ee(0x379)](){const _0x45f893=a0_0x4851ee;try{let _0x34dbe4=await this[_0x45f893(0x28b)]['hGetAll'](this[_0x45f893(0x4cb)][_0x45f893(0x1a1)]+':'+this['instanceName']);if(_0x34dbe4){for(let _0x246180 in _0x34dbe4)Object[_0x45f893(0x152)]['hasOwnProperty']['call'](_0x34dbe4,_0x246180)&&(_0x34dbe4[_0x246180]=JSON[_0x45f893(0x5f3)](_0x34dbe4[_0x246180],xt[_0x45f893(0x105)][_0x45f893(0x65d)]));return _0x34dbe4;}}catch(_0x343759){this[_0x45f893(0x5e8)][_0x45f893(0x44b)](_0x343759);}}async[a0_0x4851ee(0x471)](_0x580150){const _0x5c477a=a0_0x4851ee;try{let _0x88aa2c=await this[_0x5c477a(0x28b)]['hGet'](this[_0x5c477a(0x4cb)][_0x5c477a(0x1a1)]+':'+this[_0x5c477a(0x567)],_0x580150);if(_0x88aa2c)return JSON['parse'](_0x88aa2c,xt[_0x5c477a(0x105)][_0x5c477a(0x65d)]);}catch(_0x475765){this[_0x5c477a(0x5e8)][_0x5c477a(0x44b)](_0x475765);}}async[a0_0x4851ee(0x361)](_0x59c870){const _0xe45e8a=a0_0x4851ee;try{return await this[_0xe45e8a(0x28b)]['hDel'](this['redisEnv']['PREFIX_KEY']+':'+this[_0xe45e8a(0x567)],_0x59c870);}catch(_0x14127c){this[_0xe45e8a(0x5e8)][_0xe45e8a(0x44b)](_0x14127c);}}async[a0_0x4851ee(0x327)](_0x81b389){const _0x36addc=a0_0x4851ee;try{return await this[_0x36addc(0x28b)][_0x36addc(0x671)](_0x81b389||this[_0x36addc(0x4cb)]['PREFIX_KEY']+':'+this[_0x36addc(0x567)]);}catch(_0x3bc513){this[_0x36addc(0x5e8)][_0x36addc(0x44b)](_0x3bc513);}}};async function vs(_0x539789,_0x28853a){const _0x779a4a=a0_0x4851ee;let _0x2c9867=new C(vs[_0x779a4a(0x44c)]),_0x22f9ba=new ye(_0x539789,_0x28853a),_0x1f2b93=async(_0x3b6fd2,_0x60e3db)=>{const _0x353b1d=_0x779a4a;try{return await _0x22f9ba[_0x353b1d(0xcb)](_0x60e3db,_0x3b6fd2);}catch(_0x25fd5e){return _0x2c9867[_0x353b1d(0x44b)]({'localError':'writeData','error':_0x25fd5e});}},_0x191320=async _0x5cfadd=>{const _0x34583a=_0x779a4a;try{return await _0x22f9ba['readData'](_0x5cfadd);}catch(_0x196ca4){_0x2c9867['error']({'readData':_0x34583a(0xcb),'error':_0x196ca4});return;}},_0x26289a=async _0x3bf487=>{const _0x367b7e=_0x779a4a;try{return await _0x22f9ba['removeData'](_0x3bf487);}catch(_0x3725a1){_0x2c9867['error']({'readData':_0x367b7e(0x361),'error':_0x3725a1});}},_0x31eca8=await _0x191320('creds')||(0x0,$t['initAuthCreds'])();return{'state':{'creds':_0x31eca8,'keys':{'get':async(_0x2e17e1,_0x6865b7)=>{const _0x2c8476=_0x779a4a;let _0x141782={};return await Promise[_0x2c8476(0x249)](_0x6865b7['map'](async _0x2aac89=>{const _0x4e423d=_0x2c8476;let _0x202cfd=await _0x191320(_0x2e17e1+'-'+_0x2aac89);_0x2e17e1==='app-state-sync-key'&&_0x202cfd&&(_0x202cfd=$t['proto'][_0x4e423d(0x168)][_0x4e423d(0x33c)][_0x4e423d(0x135)](_0x202cfd)),_0x141782[_0x2aac89]=_0x202cfd;})),_0x141782;},'set':async _0x4af99a=>{const _0x160abe=_0x779a4a;let _0x3e4f60=[];for(let _0x121915 in _0x4af99a)for(let _0x70e184 in _0x4af99a[_0x121915]){let _0x147646=_0x4af99a[_0x121915][_0x70e184],_0x5cc88f=_0x121915+'-'+_0x70e184;_0x3e4f60[_0x160abe(0x53b)](_0x147646?await _0x1f2b93(_0x147646,_0x5cc88f):await _0x26289a(_0x5cc88f));}await Promise['all'](_0x3e4f60);}}},'saveCreds':async()=>await _0x1f2b93(_0x31eca8,'creds')};}var _=T(require('fs')),Lt=require('uuid'),Ut=T(require(a0_0x4851ee(0xe3)));function W(_0x325bb8){const _0x38a8f0=a0_0x4851ee;if(_0x325bb8[_0x38a8f0(0x16b)]||_0x325bb8[_0x38a8f0(0x13e)]){let _0xa8aaf8=_0x325bb8['viewOnceMessage']?_0x325bb8['viewOnceMessage'][_0x38a8f0(0x5be)]:_0x325bb8[_0x38a8f0(0x13e)][_0x38a8f0(0x5be)];return(0x0,w['getContentType'])(_0xa8aaf8);}return _0x325bb8[_0x38a8f0(0x5c4)]?_0x38a8f0(0x5c4):_0x325bb8[_0x38a8f0(0x3fd)]?_0x38a8f0(0x3fd):(0x0,w['getContentType'])(_0x325bb8);}function a0_0x15b7(_0x4cc93b,_0x2e0962){const _0x1c05ae=a0_0x1c05();return a0_0x15b7=function(_0x15b763,_0x4ee1d5){_0x15b763=_0x15b763-0x97;let _0x4a2563=_0x1c05ae[_0x15b763];return _0x4a2563;},a0_0x15b7(_0x4cc93b,_0x2e0962);}var Se=class c{constructor(_0x4ac67c,_0x26663c,_0x54efd1){const _0x94955=a0_0x4851ee;this[_0x94955(0x417)]=_0x4ac67c,this[_0x94955(0x27e)]=_0x26663c,this[_0x94955(0x642)]=_0x54efd1,this[_0x94955(0x34e)]=null,this[_0x94955(0x5e8)]=new C(c['name']),this[_0x94955(0x5a3)]={},this[_0x94955(0x583)]={},this[_0x94955(0xae)]={'state':'close'},this['storePath']=(0x0,$[_0x94955(0x273)])(Y,_0x94955(0x4d5)),this[_0x94955(0x28f)]=new Ts[(_0x94955(0x481))](),this[_0x94955(0x45d)]=new Ts[(_0x94955(0x481))](),this[_0x94955(0x66e)]=!0x1,this[_0x94955(0x371)]={'status.instance':'/wa-connection-update','qrcode.updated':_0x94955(0x56d),'messages.upsert':_0x94955(0x1ac),'messages.update':_0x94955(0x250),'send.message':_0x94955(0x1ac),'group.upsert':_0x94955(0x3b7),'group.update':'/wa-groups','group-participants.update':_0x94955(0x3b7),'connection.update':_0x94955(0x1d4),'messages.set':_0x94955(0x1ac),'contacts.set':_0x94955(0x662),'contacts.upsert':_0x94955(0x662),'contacts.update':_0x94955(0x662),'presence.update':_0x94955(0x1ea),'chats.set':_0x94955(0x3f7),'chats.update':_0x94955(0x3f7),'chats.upsert':_0x94955(0x3f7),'chats.delete':_0x94955(0x3f7)},this[_0x94955(0x49d)]=0x0,this[_0x94955(0x220)]=[],this[_0x94955(0x60a)]=0xf,this['RECONNECT_TIME_FRAME']=0x7530,this[_0x94955(0x12c)]=!0x1,this[_0x94955(0x43d)]={'chats.upsert':async(_0x20572d,_0xfe08ad)=>{const _0x582856=_0x94955;let _0x3e789c=await this[_0x582856(0x642)]['chat'][_0x582856(0x487)]({'where':{'owner':this['instance']['wuid']}}),_0x3587d1=[];for await(let _0x575494 of _0x20572d)_0x3e789c[_0x582856(0x487)](_0x27a3bc=>_0x27a3bc['id']===_0x575494['id'])||_0x3587d1[_0x582856(0x53b)]({'id':_0x575494['id'],'owner':this['instance'][_0x582856(0x5fe)],'group':_0x575494['id']['endsWith'](_0x582856(0x5e9)),'name':_0x575494['name']||_0x575494[_0x582856(0x3a9)]||null,'contactname':null,'lastmsg':_0x575494['conversationTimestamp']&&_0x575494[_0x582856(0x2c0)]['toString']()[_0x582856(0x291)]<0xd?_0x575494['conversationTimestamp']*0x3e8:_0x575494[_0x582856(0x2c0)]||null,'archived':_0x575494['archived']||!0x1,'unreadcount':_0x575494['unreadCount']||0x0});await this['sendDataWebhook']('chats.upsert',_0x3587d1);},'chats.update':async(_0x411e53,_0x8343ad)=>{const _0xdcc7c7=_0x94955;for(let _0x35b95a of _0x411e53){let _0x5ba6eb={'id':_0x35b95a['id'],'owner':this[_0xdcc7c7(0x5a3)]['wuid'],'group':_0x35b95a['id']['endsWith'](_0xdcc7c7(0x5e9)),'name':_0x35b95a[_0xdcc7c7(0x44c)]||_0x35b95a[_0xdcc7c7(0x3a9)],'archived':_0x35b95a[_0xdcc7c7(0xd4)]},_0x4dcedb=!0x1,_0x1652f2={'id':_0x35b95a['id'],'owner':this[_0xdcc7c7(0x5a3)][_0xdcc7c7(0x5fe)]},_0x57c2a5={};_0x5ba6eb[_0xdcc7c7(0xd4)]!=null&&(this['logger'][_0xdcc7c7(0x1bc)](this[_0xdcc7c7(0x567)]+'\x20('+this['instance'][_0xdcc7c7(0x5fe)]+_0xdcc7c7(0x484)+_0x35b95a[_0xdcc7c7(0xd4)]),_0x4dcedb=!0x0,_0x57c2a5[_0xdcc7c7(0xd4)]=_0x35b95a[_0xdcc7c7(0xd4)]),_0x35b95a[_0xdcc7c7(0x44c)]!=null&&(this['logger'][_0xdcc7c7(0x1bc)](this[_0xdcc7c7(0x567)]+'\x20('+this[_0xdcc7c7(0x5a3)][_0xdcc7c7(0x5fe)]+'):\x20teve\x20mudanças\x20chat.name:\x20'+_0x35b95a[_0xdcc7c7(0x44c)]),_0x4dcedb=!0x0,_0x57c2a5[_0xdcc7c7(0x44c)]=_0x35b95a[_0xdcc7c7(0x44c)]),_0x35b95a[_0xdcc7c7(0x3a9)]!=null&&(this[_0xdcc7c7(0x5e8)]['verbose'](this[_0xdcc7c7(0x567)]+'\x20('+this[_0xdcc7c7(0x5a3)][_0xdcc7c7(0x5fe)]+_0xdcc7c7(0x3ca)+_0x35b95a[_0xdcc7c7(0x3a9)]),_0x4dcedb=!0x0,_0x57c2a5[_0xdcc7c7(0x44c)]=_0x35b95a[_0xdcc7c7(0x3a9)]);let _0x1968e1;_0x4dcedb&&_0x8343ad[_0xdcc7c7(0x1a4)]&&(_0x1968e1=await I[_0xdcc7c7(0x5d7)](_0x1652f2,{'$set':_0x57c2a5},{'new':!0x0})),_0x1968e1&&G(this['instanceName'],_0xdcc7c7(0x2a6),{'chat':_0x1968e1});}},'chats.delete':async _0x4f3e62=>{const _0x3150fb=_0x94955;await this['sendDataWebhook'](_0x3150fb(0x421),[..._0x4f3e62]);}},this[_0x94955(0x164)]={'contacts.upsert':async(_0x3a70bd,_0x4d6856)=>{const _0x33548c=_0x94955;let _0x4b3922=_0x3a70bd[_0x33548c(0x51a)](_0x4b2d73=>({'id':_0x4b2d73['id'],'pushName':_0x4b2d73?.['name']||_0x4b2d73?.[_0x33548c(0x40a)],'owner':this[_0x33548c(0x5a3)][_0x33548c(0x5fe)]}));await this[_0x33548c(0x642)][_0x33548c(0x576)][_0x33548c(0x3b8)](_0x4b3922,_0x4d6856[_0x33548c(0x1a4)]),this[_0x33548c(0x5e8)][_0x33548c(0x1bc)](this[_0x33548c(0x567)]+'\x20('+this['instance']['wuid']+'):\x20'+_0x4b3922[_0x33548c(0x291)]+_0x33548c(0x4cd)),await this[_0x33548c(0x61e)](_0x33548c(0x432),_0x3a70bd),await this[_0x33548c(0x253)]();},'contacts.update':async(_0x38b9e8,_0x3376c2)=>{const _0x196202=_0x94955;let _0x1815e8=[];for await(let _0x845810 of _0x38b9e8)_0x1815e8[_0x196202(0x53b)]({'id':_0x845810['id'],'pushName':_0x845810?.[_0x196202(0x44c)]??_0x845810?.['verifiedName'],'profilePictureUrl':(await this[_0x196202(0x58d)](_0x845810['id']))[_0x196202(0x125)],'owner':this[_0x196202(0x5a3)][_0x196202(0x5fe)]});await this['sendDataWebhook']('contacts.update',_0x1815e8);}},this[_0x94955(0x5bc)]={'messaging-history.set':async({messages:_0x39c30a,chats:_0xb1dcce,isLatest:_0x55ce1e},_0x247f62)=>{const _0x147a5a=_0x94955;if(_0x55ce1e){let _0x1abcf2=await Promise[_0x147a5a(0x249)](_0xb1dcce[_0x147a5a(0x51a)](async _0x35b718=>({'id':_0x35b718['id'],'owner':this[_0x147a5a(0x5a3)][_0x147a5a(0x5fe)],'group':_0x35b718['id'][_0x147a5a(0x60c)](_0x147a5a(0x5e9)),'name':_0x35b718[_0x147a5a(0x44c)]||_0x35b718[_0x147a5a(0x3a9)]||null,'contactname':null,'imagechat':(await this['profilePicture'](_0x35b718['id']))[_0x147a5a(0x125)],'lastmsg':_0x35b718[_0x147a5a(0x2c0)]&&_0x35b718[_0x147a5a(0x2c0)][_0x147a5a(0x409)]()[_0x147a5a(0x291)]<0xd?_0x35b718[_0x147a5a(0x2c0)]*0x3e8:_0x35b718['conversationTimestamp']||null,'archived':_0x35b718['archived']||!0x1,'unreadcount':_0x35b718['unreadCount']||0x0})));await this['sendDataWebhook']('chats.set',_0x1abcf2),await this[_0x147a5a(0x128)](_0x1abcf2,_0x247f62),await this[_0x147a5a(0x253)]();}let _0x435df0=[],_0x107260=Date[_0x147a5a(0x4b8)]()-0x7*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x2557a4]of Object['entries'](_0x39c30a)){if(_0x2557a4[_0x147a5a(0x5be)]?.['protocolMessage']||_0x2557a4[_0x147a5a(0x5be)]?.[_0x147a5a(0x540)]||!_0x2557a4[_0x147a5a(0x5be)]||_0x2557a4[_0x147a5a(0x67c)][_0x147a5a(0x53a)]===_0x147a5a(0x132)||(Cs[_0x147a5a(0x481)][_0x147a5a(0x2fe)](_0x2557a4?.[_0x147a5a(0x14e)])&&(_0x2557a4[_0x147a5a(0x14e)]=_0x2557a4[_0x147a5a(0x14e)]?.[_0x147a5a(0x4d0)]()),_0x2557a4[_0x147a5a(0x14e)]&&_0x2557a4[_0x147a5a(0x14e)]['toString']()['length']<0xd&&(_0x2557a4['messageTimestamp']=_0x2557a4[_0x147a5a(0x14e)]*0x3e8),_0x2557a4['messageTimestamp']<_0x107260))continue;let {message_normalized:_0x4a6c20}=this['normalizeMessage'](_0x2557a4[_0x147a5a(0x5be)],W(_0x2557a4['message']),null);_0x435df0[_0x147a5a(0x53b)]({'key':_0x2557a4['key'],'pushName':_0x2557a4['pushName'],'participant':_0x2557a4[_0x147a5a(0x382)],'message':{..._0x2557a4[_0x147a5a(0x5be)]},'messageType':W(_0x2557a4[_0x147a5a(0x5be)]),'message_normalized':{'key':_0x2557a4[_0x147a5a(0x67c)],'pushName':_0x2557a4[_0x147a5a(0x442)],'messageTimestamp':_0x2557a4[_0x147a5a(0x14e)],..._0x4a6c20},'messageTimestamp':_0x2557a4[_0x147a5a(0x14e)],'owner':this[_0x147a5a(0x5a3)][_0x147a5a(0x5fe)]});}_0x247f62[_0x147a5a(0x1a4)]&&_0x435df0[_0x147a5a(0x291)]>0x0&&(this[_0x147a5a(0x5e8)][_0x147a5a(0x1bc)](this[_0x147a5a(0x567)]+'\x20('+this[_0x147a5a(0x5a3)]['wuid']+'):\x20'+_0x435df0['length']+_0x147a5a(0x65a)+this[_0x147a5a(0x5a3)][_0x147a5a(0x5fe)]+_0x147a5a(0x13c)),await this[_0x147a5a(0x642)]['message'][_0x147a5a(0x3b8)]([..._0x435df0],_0x247f62[_0x147a5a(0x1a4)])),this[_0x147a5a(0x61e)](_0x147a5a(0x3d5),[..._0x435df0]),_0x39c30a=void 0x0;},'messages.upsert':async({messages:_0x1bee0b,type:_0x2034eb},_0x4a0924)=>{const _0x4ce0ab=_0x94955;let _0x3a780a=_0x1bee0b[0x0];if(_0x2034eb!==_0x4ce0ab(0x227)||!_0x3a780a?.[_0x4ce0ab(0x5be)]||_0x3a780a[_0x4ce0ab(0x5be)]?.[_0x4ce0ab(0x33b)]||_0x3a780a[_0x4ce0ab(0x5be)][_0x4ce0ab(0x540)]||_0x3a780a['key'][_0x4ce0ab(0x53a)]===_0x4ce0ab(0x132))return;let _0x3c269b=null,_0x322c29=null;try{_0x3c269b=await this['processPollUpdateMessage'](_0x3a780a),_0x322c29=_0x3c269b?_0x3c269b[_0x4ce0ab(0x273)](','):null;}catch(_0x4f0871){this['logger'][_0x4ce0ab(0x1bc)](this[_0x4ce0ab(0x567)]+'\x20('+this[_0x4ce0ab(0x5a3)][_0x4ce0ab(0x5fe)]+_0x4ce0ab(0x259)+_0x4f0871[_0x4ce0ab(0x5be)]),_0x322c29=_0x4ce0ab(0x3e1);}if(this['client'][_0x4ce0ab(0x4f3)](_0x4ce0ab(0xb9)),Cs[_0x4ce0ab(0x481)]['isLong'](_0x3a780a[_0x4ce0ab(0x14e)])&&(_0x3a780a[_0x4ce0ab(0x14e)]=_0x3a780a[_0x4ce0ab(0x14e)]?.[_0x4ce0ab(0x4d0)]()),this[_0x4ce0ab(0x583)]?.[_0x4ce0ab(0x42b)]&&_0x3a780a['key'][_0x4ce0ab(0x53a)][_0x4ce0ab(0x5a9)](_0x4ce0ab(0x5e9))){this[_0x4ce0ab(0x5e8)][_0x4ce0ab(0x1bc)](_0x4ce0ab(0x460));return;}_0x3a780a[_0x4ce0ab(0x14e)]&&_0x3a780a[_0x4ce0ab(0x14e)][_0x4ce0ab(0x409)]()[_0x4ce0ab(0x291)]<0xd&&(_0x3a780a['messageTimestamp']=_0x3a780a[_0x4ce0ab(0x14e)]*0x3e8);let _0x2cb2ef=_0x3a780a[_0x4ce0ab(0x5be)],{messageContent:_0xff7583,message_normalized:_0x287873}=this[_0x4ce0ab(0x599)](_0x2cb2ef,W(_0x3a780a[_0x4ce0ab(0x5be)]),_0x322c29);_0xff7583||console[_0x4ce0ab(0x44b)](_0x4ce0ab(0x3dc));let _0x4eb118={'key':_0x3a780a[_0x4ce0ab(0x67c)],'pushName':_0x3a780a[_0x4ce0ab(0x442)],'message':{..._0x3a780a['message']},'messageType':W(_0x3a780a[_0x4ce0ab(0x5be)]),'message_normalized':{'key':_0x3a780a[_0x4ce0ab(0x67c)],'pushName':_0x3a780a[_0x4ce0ab(0x442)],'messageTimestamp':_0x3a780a['messageTimestamp'],'source':(0x0,w[_0x4ce0ab(0x4b6)])(_0x3a780a[_0x4ce0ab(0x67c)]['id']),..._0x287873},'messageTimestamp':_0x3a780a[_0x4ce0ab(0x14e)],'owner':this[_0x4ce0ab(0x5a3)]['wuid']};this[_0x4ce0ab(0x5e8)][_0x4ce0ab(0x2c6)](_0x4eb118),await this['repository'][_0x4ce0ab(0x5be)][_0x4ce0ab(0x3b8)]([_0x4eb118],_0x4a0924[_0x4ce0ab(0x1a4)]),await this[_0x4ce0ab(0x61e)]('messages.upsert',_0x4eb118),G(this[_0x4ce0ab(0x567)],_0x4ce0ab(0x4fa),{'message':_0x4eb118}),_0x3a780a[_0x4ce0ab(0x67c)]['remoteJid']!==_0x4ce0ab(0x132)&&await this[_0x4ce0ab(0xc2)](_0x4a0924,_0x4eb118,'MESSAGES_UPSERT');},'messages.update':async(_0x178a2e,_0x434515)=>{const _0x3b0ad1=_0x94955;let _0xe478b1={0x0:'ERROR',0x1:_0x3b0ad1(0x5ca),0x2:'SERVER_ACK',0x3:_0x3b0ad1(0x2b4),0x4:_0x3b0ad1(0x252),0x5:_0x3b0ad1(0x391)};for await(let {key:_0x52ccc1,update:_0x11df99}of _0x178a2e){if(this[_0x3b0ad1(0x583)]?.[_0x3b0ad1(0x42b)]&&_0x52ccc1[_0x3b0ad1(0x53a)][_0x3b0ad1(0x5a9)]('@g.us')){this[_0x3b0ad1(0x5e8)][_0x3b0ad1(0x1bc)](_0x3b0ad1(0x460));return;}if(_0x52ccc1[_0x3b0ad1(0x53a)]!==_0x3b0ad1(0x132)){let _0xd5afef=Date[_0x3b0ad1(0x4b8)](),_0x4b8f13;_0x11df99[_0x3b0ad1(0x5be)]===null&&_0x11df99[_0x3b0ad1(0x517)]===void 0x0?_0x4b8f13=_0x3b0ad1(0x4ae):_0x4b8f13=_0xe478b1[_0x11df99[_0x3b0ad1(0x517)]];let _0x10841e=_0x52ccc1['remoteJid'][_0x3b0ad1(0x582)](/:\d{1,2}@/g,'@'),_0x28f266={..._0x52ccc1,'remoteJid':_0x10841e,'status':_0x4b8f13,'datetime':_0xd5afef,'owner':this[_0x3b0ad1(0x5a3)]['wuid']};await this[_0x3b0ad1(0x61e)](_0x3b0ad1(0xd2),_0x28f266),await this[_0x3b0ad1(0x642)][_0x3b0ad1(0x501)][_0x3b0ad1(0x3b8)]([_0x28f266],_0x434515[_0x3b0ad1(0x1a4)]),await this[_0x3b0ad1(0x31a)](_0x52ccc1,_0x10841e,_0x28f266);}}}},this[_0x94955(0x18d)]={'groups.upsert':_0xeb7974=>{const _0x200826=_0x94955;this[_0x200826(0x61e)](_0x200826(0x510),_0xeb7974);},'groups.update':_0x12ddd3=>{const _0x36b7e7=_0x94955;this[_0x36b7e7(0x61e)](_0x36b7e7(0x2fb),_0x12ddd3);},'group-participants.update':_0x162202=>{const _0x6408f9=_0x94955;this[_0x6408f9(0x61e)](_0x6408f9(0x301),_0x162202);}},this[_0x94955(0x614)]=async _0x5dcf6a=>{const _0x5b6109=_0x94955;if(_0x5dcf6a['message']?.[_0x5b6109(0x266)]){let _0x84da16=await this[_0x5b6109(0x4d9)](_0x5dcf6a['message'][_0x5b6109(0x266)]['pollCreationMessageKey'],!0x0);if(_0x84da16){let _0x1d6549=_0x84da16[_0x5b6109(0x67c)][_0x5b6109(0x267)]?this[_0x5b6109(0x5a3)][_0x5b6109(0x5fe)]+_0x5b6109(0x31f):_0x84da16[_0x5b6109(0x67c)][_0x5b6109(0x382)]||_0x84da16[_0x5b6109(0x67c)][_0x5b6109(0x53a)],_0x3dd76e=_0x84da16['key']['id'],_0x2d3fad=_0x84da16[_0x5b6109(0x5be)],_0x541479=Buffer[_0x5b6109(0x13f)](_0x2d3fad[_0x5b6109(0x393)][_0x5b6109(0x4a4)][_0x5b6109(0x409)](_0x5b6109(0x3a3)),_0x5b6109(0x3a3)),_0x4273ea=(0x0,w[_0x5b6109(0x643)])(_0x5dcf6a['message'][_0x5b6109(0x266)][_0x5b6109(0x2bb)],{'pollCreatorJid':_0x1d6549,'pollMsgId':_0x3dd76e,'pollEncKey':_0x541479,'voterJid':_0x5dcf6a['key'][_0x5b6109(0x267)]?this[_0x5b6109(0x5a3)][_0x5b6109(0x5fe)]+_0x5b6109(0x31f):_0x5dcf6a[_0x5b6109(0x67c)][_0x5b6109(0x53a)]['endsWith']('g.us')?_0x5dcf6a[_0x5b6109(0x67c)][_0x5b6109(0x382)]:_0x5dcf6a[_0x5b6109(0x67c)]['remoteJid']}),_0x3da7cf=[],_0x319774=_0x4273ea['selectedOptions'][_0x5b6109(0x51a)](_0x495bdf=>Buffer[_0x5b6109(0x13f)](_0x495bdf)[_0x5b6109(0x409)](_0x5b6109(0x3a3)));for(let {optionName:_0x1852e2}of _0x2d3fad['pollCreationMessage']?.['options']||_0x2d3fad['pollCreationMessageV3']?.[_0x5b6109(0x2cf)]||_0x2d3fad['pollCreationMessageV2']?.[_0x5b6109(0x2cf)])_0x319774[_0x5b6109(0x18f)]((0x0,w[_0x5b6109(0x64f)])(Buffer[_0x5b6109(0x13f)](_0x1852e2))[_0x5b6109(0x409)](_0x5b6109(0x3a3)))>-0x1&&_0x3da7cf[_0x5b6109(0x53b)](_0x1852e2);return _0x3da7cf;}}return null;},this[_0x94955(0x599)]=(_0x3e7435,_0x3600c8,_0x396b6f)=>{const _0x2be5b8=_0x94955;let _0x20c4d5=_0x3600c8?_0x3e7435[_0x3600c8]:void 0x0,_0x23c5f1={},_0xd27866=null,_0x1e42bc=null,_0xe3fe33=null;if(_0x3e7435[_0x2be5b8(0x13e)]?_0x20c4d5=_0x3e7435[_0x2be5b8(0x13e)][_0x2be5b8(0x5be)][_0x3600c8]:_0x3e7435[_0x2be5b8(0x16b)]?_0x20c4d5=_0x3e7435[_0x2be5b8(0x16b)][_0x2be5b8(0x5be)][_0x3600c8]:_0x3e7435[_0x2be5b8(0xd8)]?_0x20c4d5=_0x3e7435[_0x2be5b8(0xd8)][_0x2be5b8(0x5be)][_0x3600c8]:_0x3e7435['editedMessage']?.[_0x2be5b8(0x5be)]?.[_0x2be5b8(0x33b)]?.[_0x2be5b8(0x51f)]?(_0xd27866=_0x3e7435[_0x2be5b8(0x51f)][_0x2be5b8(0x5be)][_0x2be5b8(0x33b)]['key']['id'],_0x3e7435[_0x2be5b8(0x51f)][_0x2be5b8(0x5be)][_0x2be5b8(0x33b)][_0x2be5b8(0x51f)][_0x2be5b8(0x103)]?_0x20c4d5=_0x3e7435[_0x2be5b8(0x51f)]['message'][_0x2be5b8(0x33b)][_0x2be5b8(0x51f)][_0x2be5b8(0x103)]:_0x3e7435[_0x2be5b8(0x51f)][_0x2be5b8(0x5be)][_0x2be5b8(0x33b)][_0x2be5b8(0x51f)][_0x2be5b8(0x663)]?_0x20c4d5=_0x3e7435[_0x2be5b8(0x51f)][_0x2be5b8(0x5be)][_0x2be5b8(0x33b)][_0x2be5b8(0x51f)]['imageMessage'][_0x2be5b8(0x3ad)]:_0x3e7435[_0x2be5b8(0x51f)][_0x2be5b8(0x5be)][_0x2be5b8(0x33b)][_0x2be5b8(0x51f)][_0x2be5b8(0x672)]?_0x20c4d5=_0x3e7435[_0x2be5b8(0x51f)][_0x2be5b8(0x5be)]['protocolMessage'][_0x2be5b8(0x51f)][_0x2be5b8(0x672)][_0x2be5b8(0x3ad)]:_0x3e7435['editedMessage'][_0x2be5b8(0x5be)][_0x2be5b8(0x33b)][_0x2be5b8(0x51f)][_0x2be5b8(0x106)]?_0x20c4d5=_0x3e7435[_0x2be5b8(0x51f)][_0x2be5b8(0x5be)][_0x2be5b8(0x33b)][_0x2be5b8(0x51f)]['documentWithCaptionMessage']['message']['documentMessage']['caption']:_0x20c4d5=_0x3e7435[_0x2be5b8(0x51f)][_0x2be5b8(0x5be)][_0x2be5b8(0x33b)][_0x2be5b8(0x51f)]):_0x20c4d5=_0x3e7435[_0x3600c8],!_0x3600c8||!_0x20c4d5){console['error'](_0x2be5b8(0x183),_0x3e7435);return;}_0x3e7435[_0x3600c8]?.[_0x2be5b8(0x52b)]?.[_0x2be5b8(0x1af)]&&_0x3e7435[_0x3600c8]?.['contextInfo']?.[_0x2be5b8(0x111)]&&(_0x1e42bc=_0x3e7435[_0x3600c8][_0x2be5b8(0x52b)][_0x2be5b8(0x1af)]),_0x3e7435[_0x2be5b8(0x52e)]&&(_0xe3fe33=_0x3e7435[_0x2be5b8(0x52e)][_0x2be5b8(0x67c)]['id']);let _0x26acdf;if(_0x20c4d5&&typeof _0x20c4d5==_0x2be5b8(0x658)&&'pollCreationMessageKey'in _0x20c4d5&&({pollCreationMessageKey:_0x26acdf}=_0x20c4d5),_0x3600c8===_0x2be5b8(0x106)){let _0x9f595=_0x20c4d5?.[_0x2be5b8(0x5be)]?.[_0x2be5b8(0x2fd)];_0x9f595&&(_0x20c4d5=_0x9f595);}if(_0x3600c8===_0x2be5b8(0x5c3)||_0x3600c8===_0x2be5b8(0x3fd)||_0x3600c8===_0x2be5b8(0x5c4)){let _0x538355=_0x20c4d5[_0x2be5b8(0x2cf)][_0x2be5b8(0x51a)](_0x268caa=>_0x268caa['optionName'])[_0x2be5b8(0x273)]('|');_0x23c5f1[_0x2be5b8(0x2c2)]=_0x538355;}let _0x36aa62=_0x20c4d5[_0x2be5b8(0x44c)]||_0x20c4d5[_0x2be5b8(0x3ad)]||_0x20c4d5[_0x2be5b8(0x103)]||_0x20c4d5['displayName'];if(_0x20c4d5[_0x2be5b8(0x208)]){let _0x265f08=this[_0x2be5b8(0x65f)](JSON[_0x2be5b8(0x63a)](_0x20c4d5['vcard'],null,0x2));_0x36aa62=_0x36aa62+'\x0a'+_0x265f08;}if(_0x20c4d5){let {displayName:_0x370aff,vcard:_0x316c21,contactVcard:_0x3c6031,name:_0x2fb4e0,caption:_0x2fd9cb,conversation:_0x2526fe,pollCreationMessageKey:_0x3bf2e2,footerText:_0x24ee24,contentText:_0x436e40,pageCount:_0x43c900,headerType:_0x5bef7e,isAvatar:_0x163f0b,isAnimated:_0x45dbf7,fallbackLc:_0x15926a,fallbackLg:_0x4da680,namespace:_0x203517,elementName:_0x10669f,localizableParams:_0x6ab147,viewOnce:_0x3a45a1,height:_0x52f71d,width:_0x3851db,key:_0x759080,firstScanLength:_0x1f0f11,firstScanSidecar:_0x9ccc74,gifPlayback:_0x160b98,gifAttribution:_0x24aa29,midQualityFileSha256:_0x35ae8a,scansSidecar:_0x5d5b86,streamingSidecar:_0xa1dc3,thumbnailHeight:_0x3ef7ca,thumbnailWidth:_0x23bc28,thumbnailEncSha256:_0x317798,thumbnailDirectPath:_0x4a6f9b,canonicalUrl:_0x321363,matchedText:_0x5426a2,previewType:_0x50bad4,thumbnailSha256:_0x33a74a,deviceListMetadataVersion:_0x78ea68,inviteLinkGroupTypeV2:_0x4d9dfe,interactiveAnnotations:_0x1a6404,scanLengths:_0x3ba871,jpegThumbnail:_0x43fb22,url:_0x39aea5,mediaKeyTimestamp:_0x51bfba,waveform:_0x31e277,stickerSentTs:_0xbb15ee,firstFrameLength:_0x58c16b,fileEncSha256:_0x3b69b5,contextInfo:_0x442f7e,firstFrameSidecar:_0x14180a,directPath:_0x35dd78,fileSha256:_0xdd6806,mediaKey:_0x3f273e,senderTimestampMs:_0x335432,..._0x2e557e}=_0x20c4d5;typeof _0x20c4d5==_0x2be5b8(0x579)?_0x23c5f1={'text':_0x20c4d5,'type':_0x3600c8||_0x2be5b8(0x103),..._0xd27866&&{'edited':_0xd27866},..._0x1e42bc&&{'quoted':_0x1e42bc},..._0xe3fe33&&{'reaction':_0xe3fe33}}:_0x23c5f1={'text':_0x36aa62,..._0x2e557e,..._0x3600c8===_0x2be5b8(0x266)?{'poll_id':_0x20c4d5['pollCreationMessageKey']['id'],'vote':_0x396b6f}:{},'type':_0x3600c8,..._0xd27866&&{'edited':_0xd27866},..._0x1e42bc&&{'quoted':_0x1e42bc},..._0xe3fe33&&{'reaction':_0xe3fe33},...(_0x3600c8===_0x2be5b8(0x5c3)||_0x3600c8===_0x2be5b8(0x3fd)||_0x3600c8===_0x2be5b8(0x5c4))&&{'convertedOptions':_0x23c5f1['convertedOptions']}};}return{'messageType':_0x3600c8,'messageContent':_0x20c4d5,'message_normalized':_0x23c5f1};},this[_0x94955(0x364)]=null,this[_0x94955(0x205)]=0x0,(this[_0x94955(0x177)](),this[_0x94955(0x5a3)][_0x94955(0x509)]={'count':0x0});}set[a0_0x4851ee(0x567)](_0x4d6655){const _0x42a124=a0_0x4851ee;if(!_0x4d6655){this[_0x42a124(0x5a3)][_0x42a124(0x44c)]=(0x0,po['v4'])();return;}this['instance'][_0x42a124(0x44c)]=_0x4d6655,this[_0x42a124(0x61e)]('status.instance',{'instance':this[_0x42a124(0x5a3)][_0x42a124(0x44c)],'status':_0x42a124(0x26a)});}get[a0_0x4851ee(0x567)](){const _0x1344ae=a0_0x4851ee;return this[_0x1344ae(0x5a3)]['name'];}get[a0_0x4851ee(0x5fe)](){return this['instance']['wuid'];}async[a0_0x4851ee(0x5ba)](){const _0x89a9ba=a0_0x4851ee;let _0x35fa58=this[_0x89a9ba(0x28b)][_0x89a9ba(0x403)]?.['name']??this[_0x89a9ba(0x28b)][_0x89a9ba(0x403)]?.[_0x89a9ba(0x40a)];if(!_0x35fa58){if(this[_0x89a9ba(0x417)]['get'](_0x89a9ba(0x4c2))['ENABLED']){let _0x1393aa=await M[_0x89a9ba(0x3dd)]()['db'](this[_0x89a9ba(0x417)][_0x89a9ba(0x5b8)](_0x89a9ba(0x4c2))['CONNECTION'][_0x89a9ba(0x15d)]+_0x89a9ba(0x496))[_0x89a9ba(0x4bb)](this[_0x89a9ba(0x567)])[_0x89a9ba(0x3ce)]({'_id':_0x89a9ba(0x39c)});if(_0x1393aa){let _0x1ffdd6=JSON[_0x89a9ba(0x5f3)](JSON[_0x89a9ba(0x63a)](_0x1393aa),w['BufferJSON'][_0x89a9ba(0x65d)]);_0x35fa58=_0x1ffdd6['me']?.[_0x89a9ba(0x44c)]||_0x1ffdd6['me']?.[_0x89a9ba(0x40a)];}}else{if((0x0,_e[_0x89a9ba(0x66f)])((0x0,$[_0x89a9ba(0x273)])(j,this[_0x89a9ba(0x567)],_0x89a9ba(0x561)))){let _0x2e551a=JSON[_0x89a9ba(0x5f3)]((0x0,_e[_0x89a9ba(0xdd)])((0x0,$['join'])(j,this[_0x89a9ba(0x567)],_0x89a9ba(0x561)),{'encoding':_0x89a9ba(0x5a8)}));_0x35fa58=_0x2e551a['me']?.[_0x89a9ba(0x44c)]||_0x2e551a['me']?.[_0x89a9ba(0x40a)];}}}return _0x35fa58;}get[a0_0x4851ee(0x125)](){const _0x334b3a=a0_0x4851ee;return this[_0x334b3a(0x5a3)]['profilePictureUrl'];}get['qrCode'](){const _0x51a901=a0_0x4851ee;return{'code':this[_0x51a901(0x5a3)][_0x51a901(0x509)]?.[_0x51a901(0x1b8)],'base64':this[_0x51a901(0x5a3)][_0x51a901(0x509)]?.['base64']};}async[a0_0x4851ee(0x48f)](){const _0x42310a=a0_0x4851ee;let _0x296aa3=await this[_0x42310a(0x642)]['webhook'][_0x42310a(0x487)](this[_0x42310a(0x567)]);this[_0x42310a(0x583)][_0x42310a(0x30c)]=_0x296aa3?.[_0x42310a(0x30c)],this[_0x42310a(0x583)]['enabled']=_0x296aa3?.[_0x42310a(0x25d)],this[_0x42310a(0x583)][_0x42310a(0x116)]=_0x296aa3?.[_0x42310a(0x116)],this[_0x42310a(0x583)][_0x42310a(0x19f)]=_0x296aa3?.[_0x42310a(0x19f)],this['localWebhook'][_0x42310a(0x624)]=_0x296aa3?.['QRCODE_UPDATED'],this[_0x42310a(0x583)]['SEND_MESSAGE']=_0x296aa3?.[_0x42310a(0x141)],this['localWebhook'][_0x42310a(0x556)]=_0x296aa3?.[_0x42310a(0x556)],this[_0x42310a(0x583)]['MESSAGES_UPDATE']=_0x296aa3?.[_0x42310a(0x355)],this['localWebhook'][_0x42310a(0x175)]=_0x296aa3?.[_0x42310a(0x175)],this['localWebhook'][_0x42310a(0x242)]=_0x296aa3?.[_0x42310a(0x242)],this['localWebhook'][_0x42310a(0x43c)]=_0x296aa3?.[_0x42310a(0x43c)],this[_0x42310a(0x583)][_0x42310a(0x5e7)]=_0x296aa3?.[_0x42310a(0x5e7)],this[_0x42310a(0x583)][_0x42310a(0x9d)]=_0x296aa3?.['CHATS_UPSERT'],this[_0x42310a(0x583)][_0x42310a(0x1c4)]=_0x296aa3?.[_0x42310a(0x1c4)],this[_0x42310a(0x583)]['CHATS_DELETE']=_0x296aa3?.['CHATS_DELETE'],this[_0x42310a(0x583)][_0x42310a(0x300)]=_0x296aa3?.['CONTACTS_SET'],this[_0x42310a(0x583)]['CONTACTS_UPSERT']=_0x296aa3?.[_0x42310a(0x47d)],this[_0x42310a(0x583)][_0x42310a(0x281)]=_0x296aa3?.[_0x42310a(0x281)],this[_0x42310a(0x583)][_0x42310a(0x3e9)]=_0x296aa3?.[_0x42310a(0x3e9)],this[_0x42310a(0x583)][_0x42310a(0x401)]=_0x296aa3?.[_0x42310a(0x401)],this[_0x42310a(0x583)][_0x42310a(0x420)]=_0x296aa3?.[_0x42310a(0x420)],this[_0x42310a(0x583)]['groups_ignore']=_0x296aa3?.[_0x42310a(0x42b)];}async[a0_0x4851ee(0x633)](_0x4d91cf){const _0x228587=a0_0x4851ee;let _0x300911=[_0x228587(0x3bf),_0x228587(0x30c),_0x228587(0x25d),'local_map',_0x228587(0x19f),'QRCODE_UPDATED','MESSAGES_UPDATE',_0x228587(0x556),_0x228587(0x141),'GROUPS_UPSERT','GROUPS_UPDATE',_0x228587(0x43c),'CHATS_SET',_0x228587(0x9d),_0x228587(0x1c4),'CHATS_DELETE',_0x228587(0x300),_0x228587(0x47d),_0x228587(0x281),_0x228587(0x3e9),_0x228587(0x401),_0x228587(0x420),_0x228587(0x42b)],_0x5ab688={};return _0x300911[_0x228587(0x386)](_0x2d5b33=>{_0x4d91cf[_0x2d5b33]!==void 0x0&&(_0x5ab688[_0x2d5b33]=_0x4d91cf[_0x2d5b33]);}),await this[_0x228587(0x642)][_0x228587(0x491)][_0x228587(0x1a8)](_0x5ab688,this[_0x228587(0x567)]),Object[_0x228587(0x154)](this[_0x228587(0x583)],_0x5ab688),await this[_0x228587(0x642)][_0x228587(0x491)][_0x228587(0x487)](this[_0x228587(0x567)]);}async['findWebhook'](){const _0xded088=a0_0x4851ee;return await this[_0xded088(0x642)][_0xded088(0x491)][_0xded088(0x487)](this[_0xded088(0x567)]);}async[a0_0x4851ee(0x61e)](_0x5acb8d,_0x246b82){const _0x343033=a0_0x4851ee;let _0x185759=this[_0x343033(0x417)]['get'](_0x343033(0x4e6)),_0x4cd611=_0x5acb8d['replace'](/[\.-]/gm,'_')['toUpperCase'](),_0x286138=this[_0x343033(0x583)][_0x343033(0x25d)]&&(0x0,k[_0x343033(0x635)])(this[_0x343033(0x583)]['url'])?this[_0x343033(0x583)][_0x343033(0x30c)]+(this['localWebhook'][_0x343033(0x116)]?this['webhookMap'][_0x5acb8d]:''):null,_0x4f1269=_0x185759?.[_0x343033(0x410)],_0x973590=_0x4f1269&&_0x4f1269?.['ENABLED']&&(0x0,k[_0x343033(0x635)])(_0x4f1269[_0x343033(0x62a)])?_0x4f1269[_0x343033(0x62a)]+(_0x185759[_0x343033(0x461)]?this[_0x343033(0x371)][_0x5acb8d]:''):null,_0x27232b=this['localWebhook'][_0x4cd611],_0x46e53a=_0x185759?.['EVENTS']?.[_0x4cd611];if(_0x27232b&&_0x286138)try{await ue[_0x343033(0x481)][_0x343033(0x1a8)]({'baseURL':_0x286138})['post']('',{'event':_0x5acb8d,'instance':this['instance'][_0x343033(0x44c)],'data':_0x246b82}),this[_0x343033(0x5e8)][_0x343033(0x2c6)](_0x343033(0x3c0)+_0x5acb8d+':\x20'+_0x286138);}catch(_0x5db342){this[_0x343033(0x5e8)][_0x343033(0x44b)](this['instanceName']+'\x20('+this[_0x343033(0x5a3)][_0x343033(0x5fe)]+'):\x20'+{'local':c[_0x343033(0x44c)]+_0x343033(0x376),'message':_0x5db342?.[_0x343033(0x5be)],'hostName':_0x5db342?.[_0x343033(0x15f)],'syscall':_0x5db342?.[_0x343033(0x356)],'code':_0x5db342?.[_0x343033(0x1b8)],'error':_0x5db342?.[_0x343033(0x1cf)],'stack':_0x5db342?.[_0x343033(0x5a6)],'name':_0x5db342?.['name']});}if(_0x46e53a&&_0x973590)try{await ue['default'][_0x343033(0x1a8)]({'baseURL':_0x973590})[_0x343033(0x198)]('',{'event':_0x5acb8d,'instance':this[_0x343033(0x5a3)][_0x343033(0x44c)],'data':_0x246b82}),this['logger'][_0x343033(0x2c6)](_0x343033(0x59a)+_0x5acb8d+':\x20'+_0x973590);}catch(_0x56ae91){this[_0x343033(0x5e8)][_0x343033(0x44b)](this[_0x343033(0x567)]+'\x20('+this[_0x343033(0x5a3)][_0x343033(0x5fe)]+_0x343033(0x259)+{'local':c['name']+_0x343033(0x574),'message':_0x56ae91?.[_0x343033(0x5be)],'hostName':_0x56ae91?.['hostname'],'syscall':_0x56ae91?.[_0x343033(0x356)],'code':_0x56ae91?.[_0x343033(0x1b8)],'error':_0x56ae91?.[_0x343033(0x1cf)],'stack':_0x56ae91?.[_0x343033(0x5a6)],'name':_0x56ae91?.['name']});}}async[a0_0x4851ee(0xfa)]({qr:_0x104191,connection:_0x5e6f8f,lastDisconnect:_0x3eef73}){const _0x5a2bce=a0_0x4851ee;if(_0x104191){if(this['instance']['qrcode']['count']===this['configService'][_0x5a2bce(0x5b8)]('QRCODE')['LIMIT'])return this[_0x5a2bce(0x61e)]('qrcode.updated',{'message':_0x5a2bce(0x145),'statusCode':w[_0x5a2bce(0x619)][_0x5a2bce(0xb3)]}),this[_0x5a2bce(0x61e)](_0x5a2bce(0x2d2),{'instance':this[_0x5a2bce(0x5a3)][_0x5a2bce(0x44c)],'state':_0x5a2bce(0x4c5),'statusReason':w[_0x5a2bce(0x619)][_0x5a2bce(0x63e)]}),this[_0x5a2bce(0x61e)]('status.instance',{'instance':this['instance'][_0x5a2bce(0x44c)],'status':_0x5a2bce(0x5de)}),this[_0x5a2bce(0x66e)]=!0x0,this['eventEmitter']['emit'](_0x5a2bce(0x37f),this['instance'][_0x5a2bce(0x44c)]);this[_0x5a2bce(0x5a3)][_0x5a2bce(0x509)][_0x5a2bce(0x4c6)]++;let _0x50fddf={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x5a2bce(0x1a2),'dark':_0x5a2bce(0x469)}};go[_0x5a2bce(0x481)][_0x5a2bce(0x3b6)](_0x104191,_0x50fddf,(_0x22564d,_0x5e1518)=>{const _0x27e5ed=_0x5a2bce;if(_0x22564d){this[_0x27e5ed(0x5e8)][_0x27e5ed(0x44b)](this[_0x27e5ed(0x567)]+'\x20('+this['instance'][_0x27e5ed(0x5fe)]+_0x27e5ed(0x219)+_0x22564d['toString']());return;}this['instance']['qrcode'][_0x27e5ed(0x311)]=_0x5e1518,this[_0x27e5ed(0x5a3)][_0x27e5ed(0x509)][_0x27e5ed(0x1b8)]=_0x104191,this[_0x27e5ed(0x61e)](_0x27e5ed(0x328),{'qrcode':{'instance':this[_0x27e5ed(0x5a3)][_0x27e5ed(0x44c)],'code':_0x104191,'base64':_0x5e1518}});}),mo[_0x5a2bce(0x481)][_0x5a2bce(0x390)](_0x104191,{'small':!0x0},_0x4e394a=>this[_0x5a2bce(0x5e8)][_0x5a2bce(0x2c6)](_0x5a2bce(0x1aa)+this[_0x5a2bce(0x5a3)]['name']+_0x5a2bce(0x2fc)+this[_0x5a2bce(0x5a3)]['qrcode'][_0x5a2bce(0x4c6)]+_0x5a2bce(0x654)+_0x4e394a));}if(_0x5e6f8f&&(this['stateConnection']={'state':_0x5e6f8f,'statusReason':_0x3eef73?.[_0x5a2bce(0x44b)]?.[_0x5a2bce(0x280)]?.[_0x5a2bce(0x213)]??0xc8},this['sendDataWebhook']('connection.update',{'instance':this[_0x5a2bce(0x5a3)][_0x5a2bce(0x44c)],...this[_0x5a2bce(0xae)]})),_0x5e6f8f===_0x5a2bce(0x601)){if(this['reconnectAttempts']++,this['reconnectTimestamps']['push'](Date[_0x5a2bce(0x4b8)]()),this['reconnectTimestamps']=this[_0x5a2bce(0x220)][_0x5a2bce(0x1a6)](_0x1e25d6=>Date[_0x5a2bce(0x4b8)]()-_0x1e25d6<this[_0x5a2bce(0x2b8)]),_0x3eef73[_0x5a2bce(0x44b)]?.[_0x5a2bce(0x280)]?.[_0x5a2bce(0x213)]!==w[_0x5a2bce(0x619)][_0x5a2bce(0x1da)]&&this['reconnectTimestamps']['length']<=this[_0x5a2bce(0x60a)])await this[_0x5a2bce(0x1c0)]();else{this[_0x5a2bce(0x61e)](_0x5a2bce(0x32b),{'instance':this['instance'][_0x5a2bce(0x44c)],'status':_0x5a2bce(0x5de)}),this[_0x5a2bce(0x348)]=!0x1;try{this[_0x5a2bce(0x5e8)][_0x5a2bce(0x1bc)](this[_0x5a2bce(0x567)]+'\x20('+this[_0x5a2bce(0x5a3)][_0x5a2bce(0x5fe)]+_0x5a2bce(0x174));let _0x29629f={'where':{'owner':this[_0x5a2bce(0x5a3)][_0x5a2bce(0x5fe)]}},_0x1d82f1=(await this[_0x5a2bce(0x642)][_0x5a2bce(0x501)][_0x5a2bce(0x487)](_0x29629f))[_0x5a2bce(0x291)];await this['repository']['messageUpdate']['delete'](_0x29629f),this['logger'][_0x5a2bce(0x1bc)](this[_0x5a2bce(0x567)]+'\x20('+this['instance']['wuid']+_0x5a2bce(0x142)+_0x1d82f1+_0x5a2bce(0x47b));}catch(_0x112c66){console['error']('Falha\x20ao\x20deletar\x20mensagens\x20updates:',_0x112c66);}try{this[_0x5a2bce(0x5e8)]['verbose'](this['instanceName']+'\x20('+this[_0x5a2bce(0x5a3)][_0x5a2bce(0x5fe)]+_0x5a2bce(0x472));let _0x906bf6={'where':{'owner':this[_0x5a2bce(0x5a3)][_0x5a2bce(0x5fe)]}},_0x29a19a=(await this['repository'][_0x5a2bce(0x5be)]['find'](_0x906bf6))[_0x5a2bce(0x291)];await this[_0x5a2bce(0x642)][_0x5a2bce(0x5be)][_0x5a2bce(0x522)](_0x906bf6),this['logger'][_0x5a2bce(0x1bc)](this['instanceName']+'\x20('+this['instance'][_0x5a2bce(0x5fe)]+'):\x20Deletados\x20'+_0x29a19a+_0x5a2bce(0x36c));}catch(_0x1db012){console['error'](_0x5a2bce(0x632),_0x1db012);}try{this[_0x5a2bce(0x5e8)][_0x5a2bce(0x1bc)](this[_0x5a2bce(0x567)]+'\x20('+this[_0x5a2bce(0x5a3)][_0x5a2bce(0x5fe)]+_0x5a2bce(0x2ee));let _0x529ee9={'where':{'owner':this[_0x5a2bce(0x5a3)][_0x5a2bce(0x5fe)]}},_0x4c691a=(await this[_0x5a2bce(0x642)][_0x5a2bce(0x576)][_0x5a2bce(0x487)](_0x529ee9))['length'];await this[_0x5a2bce(0x642)][_0x5a2bce(0x576)][_0x5a2bce(0x522)](_0x529ee9),this['logger'][_0x5a2bce(0x1bc)](this[_0x5a2bce(0x567)]+'\x20('+this[_0x5a2bce(0x5a3)][_0x5a2bce(0x5fe)]+_0x5a2bce(0x142)+_0x4c691a+'\x20contatos.');}catch(_0x8b57c9){console[_0x5a2bce(0x44b)](_0x5a2bce(0x577),_0x8b57c9);}this[_0x5a2bce(0x1e5)]!==null&&(this[_0x5a2bce(0x5e8)][_0x5a2bce(0x1bc)](this[_0x5a2bce(0x567)]+'\x20('+this[_0x5a2bce(0x5a3)][_0x5a2bce(0x5fe)]+_0x5a2bce(0x1bb)),clearInterval(this[_0x5a2bce(0x1e5)]),this[_0x5a2bce(0x1e5)]=null),this[_0x5a2bce(0x5e8)]['verbose'](this[_0x5a2bce(0x567)]+'\x20('+this[_0x5a2bce(0x5a3)][_0x5a2bce(0x5fe)]+_0x5a2bce(0x1df)),this[_0x5a2bce(0x34e)]=null,this[_0x5a2bce(0x27e)][_0x5a2bce(0x288)](_0x5a2bce(0x279),this[_0x5a2bce(0x5a3)]['name'],_0x5a2bce(0x518)),this['client']?.['ws']?.[_0x5a2bce(0x601)](),this[_0x5a2bce(0x28b)][_0x5a2bce(0x664)](new Error(_0x5a2bce(0x34f)));}}if(_0x5e6f8f===_0x5a2bce(0x465)){this[_0x5a2bce(0x55f)],this[_0x5a2bce(0x5a3)]['wuid']=this['client'][_0x5a2bce(0x403)]['id'][_0x5a2bce(0x582)](/:\d+/,'')['replace'](_0x5a2bce(0x31f),''),this[_0x5a2bce(0x5a3)]['profilePictureUrl']=(await this[_0x5a2bce(0x58d)](this['instance'][_0x5a2bce(0x5fe)]+_0x5a2bce(0x31f)))[_0x5a2bce(0x125)];let _0x340754=_0x5a2bce(0x48e)+this[_0x5a2bce(0x5a3)][_0x5a2bce(0x5fe)],_0x49a991=0x28,_0x181bbb=Math['floor']((_0x49a991-_0x340754[_0x5a2bce(0x291)])/0x2),_0x11cf70='\x20'['repeat'](_0x181bbb),_0x2683ba='CONECTADO\x20À\x20UAZAPI',_0x4ae799=_0x5a2bce(0x545)+this['instance'][_0x5a2bce(0x44c)],_0x46b8c8=(''+_0x11cf70+_0x340754+_0x11cf70)[_0x5a2bce(0x21d)](_0x49a991,'\x20'),_0x1154dd=(''+_0x11cf70+_0x2683ba+_0x11cf70)[_0x5a2bce(0x21d)](_0x49a991,'\x20'),_0x545e41=(''+_0x11cf70+_0x4ae799+_0x11cf70)['padEnd'](_0x49a991,'\x20'),_0x2cd5f6=Math['max'](_0x46b8c8['length'],_0x1154dd[_0x5a2bce(0x291)],_0x545e41[_0x5a2bce(0x291)]),_0x2f6706=_0x46b8c8['padEnd'](_0x2cd5f6,'\x20'),_0x238b81=_0x1154dd[_0x5a2bce(0x21d)](_0x2cd5f6,'\x20'),_0x232913=_0x545e41[_0x5a2bce(0x21d)](_0x2cd5f6,'\x20');this[_0x5a2bce(0x5e8)][_0x5a2bce(0x1e4)](('\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌'+'─'[_0x5a2bce(0x452)](_0x2cd5f6)+_0x5a2bce(0x35f)+_0x238b81+_0x5a2bce(0x30f)+_0x232913+_0x5a2bce(0x30f)+_0x2f6706+_0x5a2bce(0xa4)+'─'[_0x5a2bce(0x452)](_0x2cd5f6)+'┘')[_0x5a2bce(0x582)](/^ +/gm,'\x20\x20')),this[_0x5a2bce(0x1d8)](),this['isConnected']=!0x0;}}[a0_0x4851ee(0x55f)](){const _0x1561cb=a0_0x4851ee;this[_0x1561cb(0x49d)]=0x0,this[_0x1561cb(0x220)]=[];}async[a0_0x4851ee(0x4d9)](_0x9b825a,_0x33c3f7=!0x1){const _0x4319ce=a0_0x4851ee;try{let _0x285418=await this['repository'][_0x4319ce(0x5be)][_0x4319ce(0x487)]({'where':{'owner':this[_0x4319ce(0x5a3)]['wuid'],'key':{'id':_0x9b825a['id']}}});return _0x33c3f7?_0x285418[0x0]:_0x285418[0x0][_0x4319ce(0x5be)];}catch{return{'conversation':''};}}[a0_0x4851ee(0x177)](){const _0x5b13dc=a0_0x4851ee;let _0x25c936=this[_0x5b13dc(0x417)][_0x5b13dc(0x5b8)](_0x5b13dc(0x306)),_0x3dcfff=this[_0x5b13dc(0x417)]['get'](_0x5b13dc(0x4c2));_0x25c936?.[_0x5b13dc(0x112)]&&!_0x3dcfff[_0x5b13dc(0x1a4)]&&setInterval(()=>{const _0xbc6407=_0x5b13dc;try{for(let [_0x28c56a,_0x2d336b]of Object[_0xbc6407(0x1e9)](_0x25c936))_0x2d336b===!0x0&&(0x0,Vt[_0xbc6407(0x190)])(_0xbc6407(0x1fe)+(0x0,$[_0xbc6407(0x273)])(this['storePath'],_0x28c56a[_0xbc6407(0x534)](),this[_0xbc6407(0x5a3)]['wuid'])+'/*.json');}catch{}},(_0x25c936?.[_0x5b13dc(0x112)]??0xe10)*0x3e8);}async['defineAuthState'](){const _0x255465=a0_0x4851ee;let _0x280f4a=this[_0x255465(0x417)][_0x255465(0x5b8)](_0x255465(0x4c2)),_0x11cfbd=this['configService'][_0x255465(0x5b8)](_0x255465(0x665));return _0x11cfbd?.['ENABLED']?await vs(_0x11cfbd,this['instance']['name']):_0x280f4a[_0x255465(0x1a4)]?await Es(this['instance']['name']):await(0x0,w['useMultiFileAuthState'])((0x0,$['join'])(j,this['instance'][_0x255465(0x44c)]));}async[a0_0x4851ee(0x1d8)](){const _0x2d08be=a0_0x4851ee;let _0x2b9383=()=>Math['floor'](Math['random']()*0x2711)+0x7d0,_0xb7c807=async()=>{const _0x57296a=a0_0x15b7;if(!this[_0x57296a(0x348)]){this[_0x57296a(0x5e8)]['verbose'](_0x57296a(0x566)),this[_0x57296a(0x12c)]=!0x1;return;}if(this[_0x57296a(0x5a3)][_0x57296a(0x5fe)]&&this[_0x57296a(0x34e)]&&this['delayMessage']!==null&&this['delayMessage']!==void 0x0){let _0x5a9325=Math[_0x57296a(0x4fe)](this['delayMessage']/0xea60);this[_0x57296a(0x5e8)][_0x57296a(0x1bc)](this['instanceName']+'\x20('+this[_0x57296a(0x5a3)][_0x57296a(0x5fe)]+'):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20'+_0x5a9325+_0x57296a(0x4e9)),this[_0x57296a(0x12c)]=!0x1;return;}else this['instance'][_0x57296a(0x5fe)]&&(this[_0x57296a(0x5e8)][_0x57296a(0x1bc)](this[_0x57296a(0x567)]+'\x20('+this[_0x57296a(0x5a3)]['wuid']+'):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...'),this[_0x57296a(0x34e)]||await this[_0x57296a(0x2e8)](),(this[_0x57296a(0x1e5)]===null||this[_0x57296a(0x1e5)]===void 0x0)&&await this['scheduleNextCheck']());if(this['isRunning']){let _0x11642f=_0x2b9383();this[_0x57296a(0x5e8)]['verbose'](this['instanceName']+_0x57296a(0x29c)+_0x11642f/0x3e8+_0x57296a(0x5b1)),setTimeout(_0xb7c807,_0x11642f);}};if(this[_0x2d08be(0x12c)])return;this[_0x2d08be(0x12c)]=!0x0;let _0x2290ee=_0x2b9383();setTimeout(_0xb7c807,_0x2290ee);}async['connectToWhatsapp'](){const _0x4fa7b6=a0_0x4851ee;try{this[_0x4fa7b6(0x48f)](),this[_0x4fa7b6(0x5a3)][_0x4fa7b6(0x1c8)]=await this[_0x4fa7b6(0x336)]();let {version:_0x2fa35d}=await(0x0,w[_0x4fa7b6(0x5c2)])(),_0x2fdfc0=this['configService']['get'](_0x4fa7b6(0x140)),_0x3937bd=[_0x2fdfc0[_0x4fa7b6(0x398)],_0x2fdfc0[_0x4fa7b6(0x61d)],(0x0,ho[_0x4fa7b6(0x4b0)])()],_0x432345={'auth':{'creds':this[_0x4fa7b6(0x5a3)][_0x4fa7b6(0x1c8)]['state']['creds'],'keys':(0x0,w[_0x4fa7b6(0x2a1)])(this['instance'][_0x4fa7b6(0x1c8)][_0x4fa7b6(0x641)][_0x4fa7b6(0x2b5)],(0x0,kt[_0x4fa7b6(0x481)])({'level':_0x4fa7b6(0x44b)}))},'logger':(0x0,kt[_0x4fa7b6(0x481)])({'level':_0x4fa7b6(0x44b)}),'printQRInTerminal':!0x1,'browser':_0x3937bd,'version':_0x2fa35d,'connectTimeoutMs':0xea60,'qrTimeout':0x9c40,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'msgRetryCounterCache':this['msgRetryCounterCache'],'getMessage':async _0x57b50f=>await this[_0x4fa7b6(0x4d9)](_0x57b50f),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x0,'userDevicesCache':this[_0x4fa7b6(0x45d)],'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa},'patchMessageBeforeSending':_0x31e28e=>(!!(_0x31e28e[_0x4fa7b6(0x322)]||_0x31e28e['listMessage'])&&(_0x31e28e={'viewOnceMessageV2':{'message':{'messageContextInfo':{'deviceListMetadataVersion':0x2,'deviceListMetadata':{}},..._0x31e28e}}}),_0x31e28e)};return this[_0x4fa7b6(0x66e)]=!0x1,this[_0x4fa7b6(0x28b)]=(0x0,w[_0x4fa7b6(0x481)])(_0x432345),this[_0x4fa7b6(0x3cf)](),this[_0x4fa7b6(0x28b)];}catch(_0x512c60){throw this[_0x4fa7b6(0x5e8)][_0x4fa7b6(0x44b)](this[_0x4fa7b6(0x567)]+'\x20('+this[_0x4fa7b6(0x5a3)][_0x4fa7b6(0x5fe)]+_0x4fa7b6(0x259)+_0x512c60),new A(_0x512c60?.[_0x4fa7b6(0x409)]());}}[a0_0x4851ee(0x3cf)](){const _0x213fb1=a0_0x4851ee;this[_0x213fb1(0x28b)]['ev']['process'](_0x5937a4=>{const _0x5ea71c=_0x213fb1;if(!this[_0x5ea71c(0x66e)]){let _0x39b62b=this[_0x5ea71c(0x417)][_0x5ea71c(0x5b8)]('DATABASE');if(_0x5937a4[_0x5ea71c(0x2d2)]&&this[_0x5ea71c(0xfa)](_0x5937a4[_0x5ea71c(0x2d2)]),_0x5937a4[_0x5ea71c(0x644)]&&this[_0x5ea71c(0x5a3)]['authState']['saveCreds'](),_0x5937a4[_0x5ea71c(0x507)]){let _0x1196e7=_0x5937a4['messaging-history.set'];this[_0x5ea71c(0x5bc)][_0x5ea71c(0x507)](_0x1196e7,_0x39b62b);}if(_0x5937a4[_0x5ea71c(0x2b0)]){let _0x1cf36d=_0x5937a4[_0x5ea71c(0x2b0)];this[_0x5ea71c(0x5bc)][_0x5ea71c(0x2b0)](_0x1cf36d,_0x39b62b);}if(_0x5937a4[_0x5ea71c(0xd2)]){let _0x138b48=_0x5937a4['messages.update'];this['messageHandle'][_0x5ea71c(0xd2)](_0x138b48,_0x39b62b);}if(_0x5937a4[_0x5ea71c(0x31e)]){let _0x465498=_0x5937a4['presence.update'];if(this[_0x5ea71c(0x583)]?.[_0x5ea71c(0x42b)]&&_0x465498['id'][_0x5ea71c(0x5a9)](_0x5ea71c(0x5e9)))return;this[_0x5ea71c(0x61e)]('presence.update',_0x465498);}if(!this[_0x5ea71c(0x583)]?.[_0x5ea71c(0x42b)]){if(_0x5937a4[_0x5ea71c(0x510)]){let _0x9f35e1=_0x5937a4[_0x5ea71c(0x510)];this[_0x5ea71c(0x18d)]['groups.upsert'](_0x9f35e1);}if(_0x5937a4[_0x5ea71c(0x2fb)]){let _0x5dc46f=_0x5937a4[_0x5ea71c(0x2fb)];this[_0x5ea71c(0x18d)]['groups.update'](_0x5dc46f);}if(_0x5937a4['group-participants.update']){let _0x356c8b=_0x5937a4[_0x5ea71c(0x301)];this[_0x5ea71c(0x18d)]['group-participants.update'](_0x356c8b);}}if(_0x5937a4[_0x5ea71c(0x4f0)]){let _0x579193=_0x5937a4[_0x5ea71c(0x4f0)];this['chatHandle'][_0x5ea71c(0x4f0)](_0x579193,_0x39b62b);}if(_0x5937a4[_0x5ea71c(0x1e7)]){let _0x122614=_0x5937a4[_0x5ea71c(0x1e7)];this[_0x5ea71c(0x43d)][_0x5ea71c(0x1e7)](_0x122614,_0x39b62b);}if(_0x5937a4['chats.delete']){let _0x3917dc=_0x5937a4['chats.delete'];this[_0x5ea71c(0x43d)]['chats.delete'](_0x3917dc);}if(_0x5937a4['contacts.upsert']){let _0x3abb9b=_0x5937a4[_0x5ea71c(0x432)];this[_0x5ea71c(0x164)][_0x5ea71c(0x432)](_0x3abb9b,_0x39b62b);}if(_0x5937a4[_0x5ea71c(0x35e)]){let _0x1bb7a8=_0x5937a4[_0x5ea71c(0x35e)];this[_0x5ea71c(0x164)][_0x5ea71c(0x35e)](_0x1bb7a8,_0x39b62b);}}});}[a0_0x4851ee(0x158)](_0x3dc729){let _0x1b617a=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)['exec'](_0x3dc729);if(_0x1b617a&&_0x1b617a[0x1]==='55'){let _0x8c20e8=_0x1b617a[0x2],_0x3b6f8e=_0x1b617a[0x3],_0x14f31b=_0x1b617a[0x4];if(_0x8c20e8>='31'&&_0x3b6f8e==='9')return _0x1b617a[0x1]+_0x8c20e8+_0x14f31b;}return _0x3dc729;}[a0_0x4851ee(0x46c)](_0x3913fd){const _0x2a70c7=a0_0x4851ee;return _0x3913fd['includes'](_0x2a70c7(0x5e9))||_0x3913fd[_0x2a70c7(0x5a9)](_0x2a70c7(0x31f))||_0x3913fd[_0x2a70c7(0x5a9)]('@broadcast')?_0x3913fd:(_0x3913fd=_0x3913fd?.[_0x2a70c7(0x582)](/\s/g,'')[_0x2a70c7(0x582)](/\+/g,'')[_0x2a70c7(0x582)](/\(/g,'')['replace'](/\)/g,'')[_0x2a70c7(0x4dd)](/\:/)[0x0][_0x2a70c7(0x4dd)]('@')[0x0],_0x3913fd['length']>=0x12?(_0x3913fd=_0x3913fd[_0x2a70c7(0x582)](/[^\d-]/g,''),_0x3913fd+_0x2a70c7(0x5e9)):(_0x3913fd=_0x3913fd['replace'](/\D/g,''),this[_0x2a70c7(0x158)](_0x3913fd)+_0x2a70c7(0x31f)));}async[a0_0x4851ee(0x13a)](_0x5ee26a){const _0x45b4e6=a0_0x4851ee;let _0x488673=this[_0x45b4e6(0x46c)](_0x5ee26a[_0x45b4e6(0x1a5)]),_0x2f5a70=(await this[_0x45b4e6(0x2a3)]({'numbers':[_0x488673]}))[0x0];if(!_0x2f5a70['exists']&&!(0x0,w[_0x45b4e6(0x591)])(_0x2f5a70[_0x45b4e6(0x1e2)]))throw new g(_0x2f5a70);let _0x5b9d7a=(0x0,w['isJidGroup'])(_0x488673)?_0x488673:_0x2f5a70[_0x45b4e6(0x1e2)];if((0x0,w[_0x45b4e6(0x591)])(_0x5b9d7a))try{await this[_0x45b4e6(0x28b)]['groupMetadata'](_0x5b9d7a);}catch{throw new x('Group\x20not\x20found');}try{return await this[_0x45b4e6(0x28b)][_0x45b4e6(0x649)](_0x5b9d7a),await this['client']['sendPresenceUpdate'](_0x5ee26a[_0x45b4e6(0x276)],_0x488673),{'status':0xc8,'presence':_0x5ee26a[_0x45b4e6(0x276)]};}catch(_0x475afc){throw new g(_0x475afc[_0x45b4e6(0x409)]());}}async[a0_0x4851ee(0x58d)](_0x437483){const _0x279325=a0_0x4851ee;let _0x3fe715=this['createJid'](_0x437483);try{return{'wuid':_0x3fe715,'profilePictureUrl':await this[_0x279325(0x28b)][_0x279325(0x125)](_0x3fe715,'image')};}catch{return{'wuid':_0x3fe715,'profilePictureUrl':null};}}async[a0_0x4851ee(0x427)](_0x58ea87,_0xd1db19,_0x30ea90){const _0x46aabf=a0_0x4851ee;let _0x2be724=(await this['whatsappNumber']({'numbers':[_0x58ea87]}))[0x0];if(!_0x2be724[_0x46aabf(0x656)]&&!(0x0,w[_0x46aabf(0x591)])(_0x2be724['jid'])&&!_0x2be724['jid'][_0x46aabf(0x5a9)](_0x46aabf(0x264)))throw new g(_0x2be724);let _0x282927=_0x2be724[_0x46aabf(0x1e2)];try{_0x30ea90?.['delay']&&(await this[_0x46aabf(0x28b)][_0x46aabf(0x649)](_0x282927),await this[_0x46aabf(0x28b)][_0x46aabf(0x4f3)](_0x30ea90?.['presence']??_0x46aabf(0xc1),_0x282927),await(0x0,w[_0x46aabf(0x49c)])(_0x30ea90[_0x46aabf(0x49c)]),await this[_0x46aabf(0x28b)][_0x46aabf(0x4f3)](_0x46aabf(0x678),_0x282927));let _0x461f88=_0x30ea90?.['linkPreview']!=!0x1?void 0x0:!0x1,_0x33b5b1;if(_0x30ea90?.[_0x46aabf(0x3fc)]){let _0x296c5e=_0x30ea90?.[_0x46aabf(0x3fc)],_0x34194f=_0x296c5e?.['message']?_0x296c5e:await this[_0x46aabf(0x4d9)](_0x296c5e[_0x46aabf(0x67c)],!0x0);if(!_0x34194f)throw _0x46aabf(0x3d1);_0x33b5b1=_0x34194f;}let _0x43d05b;if((0x0,w[_0x46aabf(0x591)])(_0x282927))try{let _0x539eb6=await this[_0x46aabf(0x28b)]['groupMetadata'](_0x282927);if(!_0x539eb6)throw new x('Group\x20not\x20found');_0x30ea90?.[_0x46aabf(0x275)]&&(_0x30ea90[_0x46aabf(0x275)]?.['everyOne']?_0x43d05b=_0x539eb6[_0x46aabf(0x16d)][_0x46aabf(0x51a)](_0x29b89e=>_0x29b89e['id']):_0x30ea90['mentions']?.['mentioned']?.[_0x46aabf(0x291)]&&(_0x43d05b=_0x30ea90[_0x46aabf(0x275)][_0x46aabf(0x430)][_0x46aabf(0x51a)](_0xc395c6=>{const _0x293fc4=_0x46aabf;let _0xd8206b=this['createJid'](_0xc395c6);return(0x0,w[_0x293fc4(0x591)])(_0xd8206b)?null:_0xd8206b;})));}catch{throw new x(_0x46aabf(0x308));}let _0x7b2795=await((async()=>{const _0xf279bf=_0x46aabf;let _0x322375={'quoted':_0x33b5b1};if(!_0xd1db19[_0xf279bf(0x467)]&&!_0xd1db19[_0xf279bf(0x4af)]&&!_0xd1db19['sticker']&&!_0xd1db19[_0xf279bf(0x103)]&&_0x282927!==_0xf279bf(0x132)&&!_0xd1db19[_0xf279bf(0x467)])return await this['client']['sendMessage'](_0x282927,{'forward':{'key':{'remoteJid':this[_0xf279bf(0x5a3)]['wuid'],'fromMe':!0x0},'message':_0xd1db19},'mentions':_0x43d05b},_0x322375);if(_0xd1db19['conversation']){let _0xb1fa73=_0xd1db19['conversation'];return _0x30ea90?.[_0xf279bf(0x36a)]&&(_0xb1fa73=await this['replaceVariablesChat'](_0xb1fa73,_0x282927)),await this[_0xf279bf(0x28b)]['sendMessage'](_0x282927,{'text':_0xb1fa73,'mentions':_0x43d05b,'linkPreview':_0x461f88},_0x322375);}return _0x282927==='status@broadcast'?await this[_0xf279bf(0x28b)][_0xf279bf(0x646)](_0x282927,_0xd1db19[_0xf279bf(0x517)][_0xf279bf(0x1db)],{'backgroundColor':_0xd1db19['status'][_0xf279bf(0x3ec)][_0xf279bf(0x159)],'font':_0xd1db19['status'][_0xf279bf(0x3ec)][_0xf279bf(0xc6)],'statusJidList':_0xd1db19[_0xf279bf(0x517)]['option'][_0xf279bf(0x531)]}):await this[_0xf279bf(0x28b)][_0xf279bf(0x646)](_0x282927,_0xd1db19,_0x322375);})()),{message_normalized:_0x3a5195}=this[_0x46aabf(0x599)](_0x7b2795['message'],W(_0x7b2795[_0x46aabf(0x5be)]),null),_0x5f47c6={'key':_0x7b2795['key'],'pushName':_0x7b2795[_0x46aabf(0x442)],'message':{..._0x7b2795['message']},'messageType':W(_0x7b2795[_0x46aabf(0x5be)]),'message_normalized':{'key':_0x7b2795[_0x46aabf(0x67c)],'pushName':_0x7b2795['pushName'],'messageTimestamp':_0x7b2795['messageTimestamp']&&_0x7b2795[_0x46aabf(0x14e)][_0x46aabf(0x409)]()[_0x46aabf(0x291)]<0xd?_0x7b2795[_0x46aabf(0x14e)]*0x3e8:_0x7b2795['messageTimestamp']||null,'source':(0x0,w[_0x46aabf(0x4b6)])(_0x7b2795[_0x46aabf(0x67c)]['id']),..._0x3a5195},'messageTimestamp':_0x7b2795[_0x46aabf(0x14e)]&&_0x7b2795['messageTimestamp'][_0x46aabf(0x409)]()[_0x46aabf(0x291)]<0xd?_0x7b2795[_0x46aabf(0x14e)]*0x3e8:_0x7b2795[_0x46aabf(0x14e)]||null,'owner':this['instance'][_0x46aabf(0x5fe)],'source':(0x0,w[_0x46aabf(0x4b6)])(_0x7b2795[_0x46aabf(0x67c)]['id'])};return this[_0x46aabf(0x5e8)]['log'](_0x5f47c6),await this['sendDataWebhook'](_0x46aabf(0x3a4),_0x5f47c6),G(this[_0x46aabf(0x567)],_0x46aabf(0x4fa),{'message':_0x5f47c6}),this[_0x46aabf(0xc2)](this[_0x46aabf(0x417)]['get'](_0x46aabf(0x4c2)),_0x5f47c6,'SEND_MESSAGE'),await this[_0x46aabf(0x642)][_0x46aabf(0x5be)][_0x46aabf(0x3b8)]([_0x5f47c6],this['configService'][_0x46aabf(0x5b8)](_0x46aabf(0x4c2))[_0x46aabf(0x1a4)]),_0x7b2795;}catch(_0x1e2c9c){throw this['logger'][_0x46aabf(0x44b)](this['instanceName']+'\x20('+this[_0x46aabf(0x5a3)]['wuid']+'):\x20'+_0x1e2c9c[_0x46aabf(0x409)]()),new g(_0x1e2c9c[_0x46aabf(0x409)]());}}get[a0_0x4851ee(0x66b)](){const _0x25114b=a0_0x4851ee;return this[_0x25114b(0xae)];}async[a0_0x4851ee(0x2f5)](_0x513088){const _0x553e72=a0_0x4851ee;let _0x5d6421=this[_0x553e72(0x417)]['get'](_0x553e72(0x1bd)),_0xad839d=this[_0x553e72(0x417)][_0x553e72(0x5b8)](_0x553e72(0x3d0));return _0xad839d&&this[_0x553e72(0x567)]['toLowerCase']()[_0x553e72(0x5a9)](_0xad839d['toLowerCase']())&&(_0x513088[_0x553e72(0x2f5)]['text']+='\x0a\x0a'+_0x5d6421),await this['sendMessageWithTyping'](_0x513088[_0x553e72(0x1a5)],{'conversation':_0x513088[_0x553e72(0x2f5)][_0x553e72(0x52d)]},_0x513088?.['options']);}async[a0_0x4851ee(0x3c3)](_0x524638){const _0x1517f8=a0_0x4851ee;if(!_0x524638[_0x1517f8(0x620)])throw new g(_0x1517f8(0x2f7));if(!_0x524638[_0x1517f8(0x1db)])throw new g(_0x1517f8(0x473));if(_0x524638['allContacts']){let _0x2201b7=await this[_0x1517f8(0x642)]['contact']['find']({'where':{'owner':this[_0x1517f8(0x5a3)][_0x1517f8(0x5fe)]}});if(!_0x2201b7[_0x1517f8(0x291)])throw new g(_0x1517f8(0x653));_0x524638[_0x1517f8(0x531)]=_0x2201b7[_0x1517f8(0x1a6)](_0x44f0b8=>_0x44f0b8['pushName'])[_0x1517f8(0x51a)](_0xbfc3e0=>_0xbfc3e0['id']);}if(!_0x524638[_0x1517f8(0x531)]?.['length']&&!_0x524638['allContacts'])throw new g(_0x1517f8(0x485));if(_0x524638[_0x1517f8(0x620)]==='text'){if(!_0x524638['backgroundColor'])throw new g(_0x1517f8(0x605));if(!_0x524638[_0x1517f8(0xc6)])throw new g(_0x1517f8(0x63b));return{'content':{'text':_0x524638[_0x1517f8(0x1db)]},'option':{'backgroundColor':_0x524638['backgroundColor'],'font':_0x524638[_0x1517f8(0xc6)],'statusJidList':_0x524638[_0x1517f8(0x531)]}};}if(_0x524638['type']==='image')return{'content':{'image':{'url':_0x524638[_0x1517f8(0x1db)]},'caption':_0x524638[_0x1517f8(0x3ad)]},'option':{'statusJidList':_0x524638[_0x1517f8(0x531)]}};if(_0x524638[_0x1517f8(0x620)]===_0x1517f8(0x35c))return{'content':{'video':{'url':_0x524638['content']},'caption':_0x524638[_0x1517f8(0x3ad)]},'option':{'statusJidList':_0x524638['statusJidList']}};if(_0x524638[_0x1517f8(0x620)]===_0x1517f8(0x467)){this[_0x1517f8(0x5e8)][_0x1517f8(0x1bc)](_0x1517f8(0x37b)),this[_0x1517f8(0x5e8)][_0x1517f8(0x1bc)](_0x1517f8(0x537));let _0x5002ff=await this['convertaudio'](_0x524638['content']);if(typeof _0x5002ff=='string'){this[_0x1517f8(0x5e8)][_0x1517f8(0x1bc)](_0x1517f8(0x4e8));let _0x44861d=_['readFileSync'](_0x5002ff)[_0x1517f8(0x409)](_0x1517f8(0x311)),_0x289f82={'content':{'audio':Buffer[_0x1517f8(0x13f)](_0x44861d,'base64'),'ptt':!0x0,'mimetype':'audio/mp4'},'option':{'statusJidList':_0x524638[_0x1517f8(0x531)]}};return _[_0x1517f8(0x329)](_0x5002ff),_0x289f82;}else throw new A(_0x5002ff);}throw new g('Type\x20not\x20found');}async[a0_0x4851ee(0xec)](_0x1db3f8){const _0x1e47da=a0_0x4851ee;return await this[_0x1e47da(0x427)](_0x1e47da(0x132),{'status':await this[_0x1e47da(0x3c3)](_0x1db3f8[_0x1e47da(0xec)])});}async[a0_0x4851ee(0x389)](_0x26e3eb){const _0x437a0a=a0_0x4851ee;try{let _0x3acb97=await(0x0,w[_0x437a0a(0x456)])({[_0x26e3eb[_0x437a0a(0x2f8)]]:(0x0,k[_0x437a0a(0x635)])(_0x26e3eb[_0x437a0a(0x631)])?{'url':_0x26e3eb[_0x437a0a(0x631)]}:Buffer['from'](_0x26e3eb['media'],'base64')},{'upload':this[_0x437a0a(0x28b)][_0x437a0a(0x203)]}),_0x11a2c1=_0x26e3eb[_0x437a0a(0x2f8)]+_0x437a0a(0x168);if(_0x26e3eb[_0x437a0a(0x2f8)]===_0x437a0a(0x514)&&!_0x26e3eb[_0x437a0a(0x2ac)]){let _0x5603be=new RegExp(/.*\/(.+?)\./)['exec'](_0x26e3eb[_0x437a0a(0x631)]);_0x26e3eb['fileName']=_0x5603be[0x1];}let _0xbdb714;(0x0,k[_0x437a0a(0x635)])(_0x26e3eb['media'])?_0xbdb714=(0x0,Ns[_0x437a0a(0x394)])(_0x26e3eb['media']):_0xbdb714=(0x0,Ns['getMIMEType'])(_0x26e3eb[_0x437a0a(0x2ac)]);let _0x212e8b=this[_0x437a0a(0x417)][_0x437a0a(0x5b8)]('TRIAL_AD'),_0x4212ff=this['configService']['get'](_0x437a0a(0x3d0));return _0x4212ff&&this[_0x437a0a(0x567)]['toLowerCase']()[_0x437a0a(0x5a9)](_0x4212ff['toLowerCase']())&&(_0x26e3eb['caption']+='\x0a\x0a'+_0x212e8b),_0x3acb97[_0x11a2c1][_0x437a0a(0x3ad)]=_0x26e3eb?.[_0x437a0a(0x3ad)],_0x3acb97[_0x11a2c1]['mimetype']=_0xbdb714,_0x3acb97[_0x11a2c1][_0x437a0a(0x2ac)]=_0x26e3eb[_0x437a0a(0x2ac)],_0x26e3eb[_0x437a0a(0x2f8)]===_0x437a0a(0x35c)&&(_0x3acb97[_0x11a2c1][_0x437a0a(0x637)]=Uint8Array[_0x437a0a(0x13f)]((0x0,_e[_0x437a0a(0xdd)])((0x0,$['join'])(process[_0x437a0a(0x1c3)](),_0x437a0a(0x28e)))),_0x3acb97[_0x11a2c1]['gifPlayback']=!0x1),(0x0,w[_0x437a0a(0x65c)])('',{[_0x11a2c1]:{..._0x3acb97[_0x11a2c1]}},{'userJid':this[_0x437a0a(0x5a3)][_0x437a0a(0x5fe)]});}catch(_0x484a28){throw this[_0x437a0a(0x5e8)]['error'](this[_0x437a0a(0x567)]+'\x20('+this['instance'][_0x437a0a(0x5fe)]+'):\x20'+_0x484a28),new A(_0x484a28?.[_0x437a0a(0x409)]()||_0x484a28);}}async['mediaMessage'](_0x1cc812){const _0x57ac95=a0_0x4851ee;let _0x3b7195=await this['prepareMediaMessage'](_0x1cc812[_0x57ac95(0x590)]);return await this[_0x57ac95(0x427)](_0x1cc812[_0x57ac95(0x1a5)],{..._0x3b7195[_0x57ac95(0x5be)]},_0x1cc812?.['options']);}async[a0_0x4851ee(0x569)](_0x112c6f,_0x27f76e){const _0x567d9a=a0_0x4851ee;try{this[_0x567d9a(0x5e8)]['verbose'](_0x567d9a(0x35a));let _0x1e08f2,_0x38c242=_0x27f76e+'-'+new Date()[_0x567d9a(0x58e)]();this[_0x567d9a(0x5e8)][_0x567d9a(0x1bc)](_0x567d9a(0x592)+_0x38c242);let _0x397a5b=''+(0x0,$[_0x567d9a(0x273)])(this['storePath'],_0x38c242+_0x567d9a(0x4ba));if(this[_0x567d9a(0x5e8)][_0x567d9a(0x1bc)](_0x567d9a(0xfd)+_0x397a5b),(0x0,k['isBase64'])(_0x112c6f)){this[_0x567d9a(0x5e8)][_0x567d9a(0x1bc)](_0x567d9a(0x186));let _0x2d4317=_0x112c6f[_0x567d9a(0x582)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x20357c=Buffer['from'](_0x2d4317,_0x567d9a(0x311));_0x1e08f2=''+(0x0,$[_0x567d9a(0x273)])(this['storePath'],_0x567d9a(0x34b)+_0x38c242+_0x567d9a(0x519)),this[_0x567d9a(0x5e8)]['verbose'](_0x567d9a(0x425)+_0x1e08f2),await(0x0,Ut[_0x567d9a(0x481)])(_0x20357c)[_0x567d9a(0x26c)](_0x1e08f2),this[_0x567d9a(0x5e8)][_0x567d9a(0x1bc)]('Image\x20created');}else{this[_0x567d9a(0x5e8)][_0x567d9a(0x1bc)](_0x567d9a(0x123));let _0x3c701f=new Date()[_0x567d9a(0x58e)](),_0x23fae3=_0x112c6f+'?timestamp='+_0x3c701f;this[_0x567d9a(0x5e8)][_0x567d9a(0x1bc)](_0x567d9a(0x384)+_0x23fae3);let _0x1b1f10=await ue[_0x567d9a(0x481)]['get'](_0x23fae3,{'responseType':'arraybuffer'});this[_0x567d9a(0x5e8)][_0x567d9a(0x1bc)]('Getting\x20image\x20from\x20url');let _0x394b59=Buffer[_0x567d9a(0x13f)](_0x1b1f10[_0x567d9a(0x468)],'binary');_0x1e08f2=''+(0x0,$[_0x567d9a(0x273)])(this['storePath'],_0x567d9a(0x34b)+_0x38c242+_0x567d9a(0x519)),this[_0x567d9a(0x5e8)][_0x567d9a(0x1bc)]('Image\x20path:\x20'+_0x1e08f2),await(0x0,Ut[_0x567d9a(0x481)])(_0x394b59)[_0x567d9a(0x26c)](_0x1e08f2),this[_0x567d9a(0x5e8)][_0x567d9a(0x1bc)](_0x567d9a(0x1fc));}return await(0x0,Ut['default'])(_0x1e08f2)['webp']()[_0x567d9a(0x26c)](_0x397a5b),this['logger'][_0x567d9a(0x1bc)]('Image\x20converted\x20to\x20WebP'),_[_0x567d9a(0x329)](_0x1e08f2),this[_0x567d9a(0x5e8)][_0x567d9a(0x1bc)](_0x567d9a(0x257)),_0x397a5b;}catch(_0x51fa3c){console[_0x567d9a(0x44b)](_0x567d9a(0x27b),_0x51fa3c);}}async[a0_0x4851ee(0x226)](_0x18e4cf){const _0x3dea6c=a0_0x4851ee;let _0x5a3cc8=await this['convertToWebP'](_0x18e4cf['stickerMessage'][_0x3dea6c(0xff)],_0x18e4cf[_0x3dea6c(0x1a5)]),_0x2f0a80=await this[_0x3dea6c(0x427)](_0x18e4cf[_0x3dea6c(0x1a5)],{'sticker':{'url':_0x5a3cc8}},_0x18e4cf?.['options']);return _[_0x3dea6c(0x329)](_0x5a3cc8),this['logger'][_0x3dea6c(0x1bc)](_0x3dea6c(0x1b3)),_0x2f0a80;}async[a0_0x4851ee(0x4a9)](_0x1d1ccb){const _0x1f3338=a0_0x4851ee;if(this['logger']['verbose'](_0x1f3338(0x2ce)),!_0x1d1ccb[_0x1f3338(0x2cf)]?.[_0x1f3338(0x234)]&&_0x1d1ccb['options']?.[_0x1f3338(0x234)]!==!0x1&&(_0x1d1ccb['options']['encoding']=!0x0),_0x1d1ccb[_0x1f3338(0x2cf)]?.[_0x1f3338(0x234)]){let _0x505b97=await this['convertaudio'](_0x1d1ccb['audioMessage']['audio']);if(typeof _0x505b97==_0x1f3338(0x579)){let _0x38641e=_[_0x1f3338(0xdd)](_0x505b97)[_0x1f3338(0x409)](_0x1f3338(0x311)),_0x479f73=this[_0x1f3338(0x427)](_0x1d1ccb[_0x1f3338(0x1a5)],{'audio':Buffer[_0x1f3338(0x13f)](_0x38641e,'base64'),'ptt':!0x0,'mimetype':_0x1f3338(0x5e0)},{'presence':_0x1f3338(0x550),'delay':_0x1d1ccb?.[_0x1f3338(0x2cf)]?.[_0x1f3338(0x49c)]});return _[_0x1f3338(0x329)](_0x505b97),this[_0x1f3338(0x5e8)][_0x1f3338(0x1bc)](_0x1f3338(0x66d)),_0x479f73;}else throw new A(_0x505b97);}return await this[_0x1f3338(0x427)](_0x1d1ccb['number'],{'audio':(0x0,k['isURL'])(_0x1d1ccb[_0x1f3338(0x32c)][_0x1f3338(0x467)])?{'url':_0x1d1ccb['audioMessage'][_0x1f3338(0x467)]}:Buffer[_0x1f3338(0x13f)](_0x1d1ccb[_0x1f3338(0x32c)][_0x1f3338(0x467)],'base64'),'ptt':!0x0,'mimetype':_0x1f3338(0x559)},{'presence':_0x1f3338(0x550),'delay':_0x1d1ccb?.[_0x1f3338(0x2cf)]?.[_0x1f3338(0x49c)]});}async['convertaudio'](_0x328b74){const _0x2627ec=a0_0x4851ee;this[_0x2627ec(0x5e8)][_0x2627ec(0x1bc)](_0x2627ec(0x537));let _0x43d8f5,_0x41a742,_0x479d79=(0x0,Lt['v4'])();if(this[_0x2627ec(0x5e8)][_0x2627ec(0x1bc)](_0x2627ec(0x41d)+_0x479d79),(0x0,k[_0x2627ec(0x635)])(_0x328b74)){this[_0x2627ec(0x5e8)][_0x2627ec(0x1bc)](_0x2627ec(0x548)),_0x41a742=''+(0x0,$['join'])(this[_0x2627ec(0x489)],_0x479d79+_0x2627ec(0x28d)),_0x43d8f5=''+(0x0,$[_0x2627ec(0x273)])(this[_0x2627ec(0x489)],'temp-'+_0x479d79+_0x2627ec(0x187)),this[_0x2627ec(0x5e8)][_0x2627ec(0x1bc)]('Output\x20audio\x20path:\x20'+_0x41a742),this[_0x2627ec(0x5e8)][_0x2627ec(0x1bc)](_0x2627ec(0x5e2)+_0x43d8f5);let _0x13e2dc=new Date()[_0x2627ec(0x58e)](),_0xc7aefc=_0x328b74+_0x2627ec(0x197)+_0x13e2dc;this['logger'][_0x2627ec(0x1bc)](_0x2627ec(0x4f4)+_0xc7aefc);let _0x5a7173=await ue[_0x2627ec(0x481)][_0x2627ec(0x5b8)](_0xc7aefc,{'responseType':_0x2627ec(0x32f)});this['logger'][_0x2627ec(0x1bc)](_0x2627ec(0x4a0)),_['writeFileSync'](_0x43d8f5,_0x5a7173[_0x2627ec(0x468)]);}else{this[_0x2627ec(0x5e8)][_0x2627ec(0x1bc)](_0x2627ec(0xda)),_0x41a742=''+(0x0,$[_0x2627ec(0x273)])(this[_0x2627ec(0x489)],_0x479d79+_0x2627ec(0x28d)),_0x43d8f5=''+(0x0,$['join'])(this[_0x2627ec(0x489)],_0x2627ec(0x34b)+_0x479d79+_0x2627ec(0x187)),this['logger'][_0x2627ec(0x1bc)](_0x2627ec(0x60e)+_0x41a742),this['logger'][_0x2627ec(0x1bc)](_0x2627ec(0x5e2)+_0x43d8f5);let _0x27ec57=Buffer[_0x2627ec(0x13f)](_0x328b74,_0x2627ec(0x311));_[_0x2627ec(0x482)](_0x43d8f5,_0x27ec57),this['logger'][_0x2627ec(0x1bc)](_0x2627ec(0x604));}return this['logger'][_0x2627ec(0x1bc)](_0x2627ec(0x546)),new Promise((_0x111cb8,_0x54b567)=>{const _0x575e2f=_0x2627ec;(0x0,Vt[_0x575e2f(0x37d)])(uo['default'][_0x575e2f(0x539)]+_0x575e2f(0x54d)+_0x43d8f5+_0x575e2f(0x4dc)+_0x41a742+_0x575e2f(0x525),_0x100159=>{const _0x16b654=_0x575e2f;_[_0x16b654(0x329)](_0x43d8f5),this['logger']['verbose'](_0x16b654(0x20f)),_0x100159&&_0x54b567(_0x100159),this[_0x16b654(0x5e8)]['verbose']('Audio\x20converted\x20to\x20mp4'),_0x111cb8(_0x41a742);});});}async[a0_0x4851ee(0x440)](_0x50c37c){const _0x4794a0=a0_0x4851ee;let _0x401e36={},_0x487df8=_0x4794a0(0x129);if(_0x50c37c[_0x4794a0(0x440)]?.[_0x4794a0(0x590)]){_0x487df8=_0x50c37c['buttonMessage']['mediaMessage']?.[_0x4794a0(0x2f8)][_0x4794a0(0x5fa)]()??_0x4794a0(0x129),_0x401e36['mediaKey']=_0x487df8[_0x4794a0(0x534)]()+'Message';let _0x2b3e54=await this[_0x4794a0(0x389)](_0x50c37c[_0x4794a0(0x440)][_0x4794a0(0x590)]);_0x401e36['message']=_0x2b3e54['message'][_0x401e36[_0x4794a0(0x388)]],_0x401e36[_0x4794a0(0x27c)]='*'+_0x50c37c[_0x4794a0(0x440)][_0x4794a0(0x19c)]+_0x4794a0(0x594)+_0x50c37c[_0x4794a0(0x440)][_0x4794a0(0x586)];}let _0x34d3b9={'text':_0x50c37c[_0x4794a0(0x440)]['buttons'][_0x4794a0(0x51a)](_0x42a2ed=>_0x42a2ed[_0x4794a0(0x5ee)]),'ids':_0x50c37c[_0x4794a0(0x440)]['buttons'][_0x4794a0(0x51a)](_0x4e5a0f=>_0x4e5a0f['buttonId'])};if(!(0x0,k[_0x4794a0(0x381)])(_0x34d3b9[_0x4794a0(0x52d)])||!(0x0,k[_0x4794a0(0x381)])(_0x34d3b9[_0x4794a0(0x557)]))throw new g(_0x4794a0(0x453),_0x4794a0(0x10e));return await this['sendMessageWithTyping'](_0x50c37c['number'],{'buttonsMessage':{'text':_0x401e36?.[_0x4794a0(0x388)]?void 0x0:_0x50c37c['buttonMessage'][_0x4794a0(0x19c)],'contentText':_0x401e36?.['contentText']??_0x50c37c[_0x4794a0(0x440)][_0x4794a0(0x586)],'footerText':_0x50c37c[_0x4794a0(0x440)]?.[_0x4794a0(0xc8)],'buttons':_0x50c37c['buttonMessage'][_0x4794a0(0x3a0)]['map'](_0x517608=>({'buttonText':{'displayText':_0x517608[_0x4794a0(0x5ee)]},'buttonId':_0x517608['buttonId'],'type':0x1})),'headerType':w[_0x4794a0(0x457)][_0x4794a0(0x168)][_0x4794a0(0x374)][_0x4794a0(0x339)][_0x487df8],[_0x401e36?.[_0x4794a0(0x388)]]:_0x401e36?.['message']}},_0x50c37c?.['options']);}async[a0_0x4851ee(0x2a8)](_0x4f9ee6){const _0x1d3919=a0_0x4851ee;return await this[_0x1d3919(0x427)](_0x4f9ee6['number'],{'locationMessage':{'degreesLatitude':_0x4f9ee6['locationMessage'][_0x1d3919(0x1f1)],'degreesLongitude':_0x4f9ee6['locationMessage'][_0x1d3919(0x1e6)],'name':_0x4f9ee6[_0x1d3919(0x2a8)]?.[_0x1d3919(0x44c)],'address':_0x4f9ee6[_0x1d3919(0x2a8)]?.[_0x1d3919(0x5e5)]}},_0x4f9ee6?.[_0x1d3919(0x2cf)]);}async[a0_0x4851ee(0x466)](_0x244846){const _0x4a3f3b=a0_0x4851ee;return await this[_0x4a3f3b(0x427)](_0x244846[_0x4a3f3b(0x1a5)],{'listMessage':{'title':_0x244846['listMessage'][_0x4a3f3b(0x19c)],'description':_0x244846[_0x4a3f3b(0x466)][_0x4a3f3b(0x586)],'buttonText':_0x244846['listMessage']?.['buttonText'],'footerText':_0x244846[_0x4a3f3b(0x466)]?.[_0x4a3f3b(0xc8)],'sections':_0x244846['listMessage'][_0x4a3f3b(0x26b)],'listType':0x1}},_0x244846?.['options']);}async[a0_0x4851ee(0x11c)](_0x496a1b){const _0x1f72c3=a0_0x4851ee;let _0x133120={},_0x27bcbf=_0x2ae5cf=>{const _0x16ad7e=a0_0x15b7;let _0x454972='BEGIN:VCARD\x0aVERSION:3.0\x0aN:'+_0x2ae5cf['fullName']+'\x0aFN:'+_0x2ae5cf['fullName']+'\x0a';_0x2ae5cf['organization']&&(_0x454972+='ORG:'+_0x2ae5cf[_0x16ad7e(0x4d4)]+';\x0a'),_0x2ae5cf[_0x16ad7e(0x4b4)]&&(_0x454972+=_0x16ad7e(0x45c)+_0x2ae5cf[_0x16ad7e(0x4b4)]+'\x0a'),_0x2ae5cf[_0x16ad7e(0x30c)]&&(_0x454972+=_0x16ad7e(0x49f)+_0x2ae5cf[_0x16ad7e(0x30c)]+'\x0a');let _0x12e62f='';return _0x2ae5cf[_0x16ad7e(0x4a1)]&&_0x2ae5cf[_0x16ad7e(0x4a1)][_0x16ad7e(0x4dd)]('|')[_0x16ad7e(0x386)]((_0x382465,_0x343ef9)=>{const _0xd87532=_0x16ad7e;let _0x2bf2e6=this[_0xd87532(0x46c)](_0x382465)['replace'](_0xd87532(0x31f),'');_0x12e62f+=_0xd87532(0x5c7)+(_0x343ef9+0x1)+_0xd87532(0x5ce)+_0x2bf2e6+':'+_0x382465+_0xd87532(0x470)+(_0x343ef9+0x1)+_0xd87532(0x563);}),_0x454972+=_0x12e62f+_0x16ad7e(0x56b),_0x454972;};return _0x496a1b[_0x1f72c3(0x11c)][_0x1f72c3(0x291)]===0x1?_0x133120[_0x1f72c3(0x11c)]={'displayName':_0x496a1b[_0x1f72c3(0x11c)][0x0][_0x1f72c3(0x2d4)],'vcard':_0x27bcbf(_0x496a1b[_0x1f72c3(0x11c)][0x0])}:_0x133120[_0x1f72c3(0x20c)]={'displayName':_0x496a1b[_0x1f72c3(0x11c)][_0x1f72c3(0x291)]+_0x1f72c3(0x36b),'contacts':_0x496a1b[_0x1f72c3(0x11c)][_0x1f72c3(0x51a)](_0x148d8b=>({'displayName':_0x148d8b[_0x1f72c3(0x2d4)],'vcard':_0x27bcbf(_0x148d8b)}))},await this[_0x1f72c3(0x427)](_0x496a1b[_0x1f72c3(0x1a5)],{..._0x133120},_0x496a1b?.['options']);}async[a0_0x4851ee(0x52e)](_0x297c05){const _0x5c0cb7=a0_0x4851ee;return await this[_0x5c0cb7(0x427)](_0x297c05[_0x5c0cb7(0x52e)][_0x5c0cb7(0x67c)]['remoteJid'],{'reactionMessage':{'key':_0x297c05[_0x5c0cb7(0x52e)]['key'],'text':_0x297c05[_0x5c0cb7(0x52e)][_0x5c0cb7(0xcc)]}});}async[a0_0x4851ee(0x2a3)](_0x10211f){const _0x1d1d8f=a0_0x4851ee;let _0x23ebba=[];for await(let _0x2dff03 of _0x10211f[_0x1d1d8f(0x5dd)]){let _0x3af087=this[_0x1d1d8f(0x46c)](_0x2dff03);if((0x0,w[_0x1d1d8f(0x591)])(_0x3af087)){let _0xc5317d=await this['findGroup']({'groupJid':_0x3af087},_0x1d1d8f(0x518));_0x23ebba['push'](new fe(_0xc5317d[_0x1d1d8f(0x222)]['id'],!!_0xc5317d?.['metadata']['id'],_0xc5317d?.['metadata']['subject']));}else try{let _0x1f745a=(await this[_0x1d1d8f(0x28b)]['onWhatsApp'](_0x3af087))[0x0];_0x23ebba[_0x1d1d8f(0x53b)](new fe(_0x1f745a[_0x1d1d8f(0x1e2)],_0x1f745a[_0x1d1d8f(0x656)]));}catch{_0x23ebba[_0x1d1d8f(0x53b)](new fe(_0x2dff03,!0x1));}}return _0x23ebba;}async[a0_0x4851ee(0x108)](_0x89a8b5){const _0x40f143=a0_0x4851ee;try{let _0x3fdbda=_0x89a8b5[_0x40f143(0x38c)][_0x40f143(0x1a6)](_0x39c921=>(0x0,w[_0x40f143(0x591)])(_0x39c921['remoteJid'])||(0x0,w[_0x40f143(0xed)])(_0x39c921['remoteJid']))[_0x40f143(0x51a)](_0x33a9cf=>({'remoteJid':_0x33a9cf[_0x40f143(0x53a)],'fromMe':_0x33a9cf[_0x40f143(0x267)],'id':_0x33a9cf['id']}));await this[_0x40f143(0x28b)][_0x40f143(0x38c)](_0x3fdbda);let _0x7afbc8=_0x3fdbda[_0x40f143(0x51a)](_0x3e3cec=>this[_0x40f143(0x31a)](_0x3e3cec,_0x3e3cec[_0x40f143(0x53a)],{'status':_0x40f143(0x252),'owner':this[_0x40f143(0x5a3)]['wuid']})),_0x1f27e2=_0x3fdbda[_0x40f143(0x51a)](_0x4eb20=>I[_0x40f143(0x5d7)]({'id':_0x4eb20[_0x40f143(0x53a)],'owner':this['instance'][_0x40f143(0x5fe)]},{'$set':{'unreadcount':0x0}},{'new':!0x0})),[_0x171fe6,_0x45c3df]=await Promise['all']([Promise[_0x40f143(0x249)](_0x7afbc8),Promise[_0x40f143(0x249)](_0x1f27e2)]);return _0x45c3df[_0x40f143(0x1a6)](_0x319f8c=>_0x319f8c!==null)['forEach'](_0x35f4b1=>{const _0x28f129=_0x40f143;G(this[_0x28f129(0x567)],'chats',{'chat':_0x35f4b1});}),{'message':_0x40f143(0x10a),'read':_0x40f143(0x5fd)};}catch(_0x2e5a80){throw console[_0x40f143(0x44b)](_0x40f143(0x2ec),_0x2e5a80),new A(_0x40f143(0x4e0),_0x2e5a80[_0x40f143(0x409)]());}}async['getLastMessage'](_0x1f4b20){const _0x1b6ce4=a0_0x4851ee;let _0x3644e4=await this[_0x1b6ce4(0x137)]({'where':{'key':{'remoteJid':_0x1f4b20},'owner':this['instance']['name']}}),_0x2c8133=_0x3644e4[_0x1b6ce4(0x34d)]();for(let _0x55be8f of _0x3644e4)_0x55be8f[_0x1b6ce4(0x14e)]>=_0x2c8133[_0x1b6ce4(0x14e)]&&(_0x2c8133=_0x55be8f);return _0x2c8133;}async['archiveChat'](_0x5371ed){const _0x3b6ba2=a0_0x4851ee;this[_0x3b6ba2(0x5e8)][_0x3b6ba2(0x1bc)](_0x3b6ba2(0x243));try{let _0x30446a=_0x5371ed['lastMessage'],_0x471c7a=_0x5371ed[_0x3b6ba2(0x202)];if(!_0x30446a&&_0x471c7a?_0x30446a=await this[_0x3b6ba2(0x62b)](_0x471c7a):(_0x30446a=_0x5371ed[_0x3b6ba2(0x2fa)],_0x30446a[_0x3b6ba2(0x14e)]=_0x30446a?.[_0x3b6ba2(0x14e)]??Date[_0x3b6ba2(0x4b8)](),_0x471c7a=_0x30446a?.[_0x3b6ba2(0x67c)]?.[_0x3b6ba2(0x53a)]),!_0x30446a||Object[_0x3b6ba2(0x2b5)](_0x30446a)[_0x3b6ba2(0x291)]===0x0)throw new x('Last\x20message\x20not\x20found');await this[_0x3b6ba2(0x28b)][_0x3b6ba2(0x55d)]({'archive':_0x5371ed['archive'],'lastMessages':[_0x30446a]},this[_0x3b6ba2(0x46c)](_0x471c7a));let _0x1032d8=await I[_0x3b6ba2(0x5d7)]({'id':_0x30446a?.[_0x3b6ba2(0x67c)]?.[_0x3b6ba2(0x53a)],'owner':this[_0x3b6ba2(0x5a3)][_0x3b6ba2(0x5fe)]},{'$set':{'archived':_0x5371ed[_0x3b6ba2(0x38d)]}},{'new':!0x0});return _0x1032d8&&G(this[_0x3b6ba2(0x567)],_0x3b6ba2(0x2a6),{'chat':_0x1032d8}),{'chatId':_0x471c7a,'archived':_0x5371ed[_0x3b6ba2(0x38d)]};}catch(_0x10c213){throw new A({'archived':!0x1,'message':[_0x3b6ba2(0xfe),_0x10c213[_0x3b6ba2(0x409)]()]});}}async['deleteMessage'](_0x210a3b){const _0x5d9148=a0_0x4851ee;try{let _0x5db8a9=await this[_0x5d9148(0x28b)][_0x5d9148(0x646)](_0x210a3b[_0x5d9148(0x53a)],{'delete':_0x210a3b});try{let _0xfe75dc=await this[_0x5d9148(0x31a)](_0x210a3b,_0x210a3b[_0x5d9148(0x53a)],{'status':_0x5d9148(0x4ae),'owner':this[_0x5d9148(0x5a3)][_0x5d9148(0x5fe)]});this['logger'][_0x5d9148(0x1bc)](this[_0x5d9148(0x567)]+'\x20('+this[_0x5d9148(0x5a3)][_0x5d9148(0x5fe)]+_0x5d9148(0x2e4)+_0xfe75dc);}catch(_0x2b29d2){console['error'](_0x5d9148(0x380),_0x2b29d2);}return _0x5db8a9;}catch(_0x2dae24){throw new A('Error\x20while\x20deleting\x20message\x20for\x20everyone',_0x2dae24?.[_0x5d9148(0x409)]());}}async[a0_0x4851ee(0x366)](_0x45dcac){const _0x228a86=a0_0x4851ee;try{let _0x33eb42=_0x45dcac?.[_0x228a86(0x5be)]?_0x45dcac:await this[_0x228a86(0x4d9)](_0x45dcac[_0x228a86(0x67c)],!0x0);for(let _0x5d81e5 of Zs)_0x33eb42['message'][_0x5d81e5]&&(_0x33eb42[_0x228a86(0x5be)]=_0x33eb42[_0x228a86(0x5be)][_0x5d81e5][_0x228a86(0x5be)]);let _0x4d54d3,_0x24c780;for(let _0x135624 of Xs)if(_0x4d54d3=_0x33eb42[_0x228a86(0x5be)][_0x135624],_0x4d54d3){_0x24c780=_0x135624;break;}if(!_0x4d54d3)throw _0x228a86(0x151);typeof _0x4d54d3[_0x228a86(0x388)]=='object'&&(_0x33eb42[_0x228a86(0x5be)]=JSON['parse'](JSON[_0x228a86(0x63a)](_0x33eb42['message'])));let _0x5a287b=await(0x0,w[_0x228a86(0x3af)])({'key':_0x33eb42?.['key'],'message':_0x33eb42?.[_0x228a86(0x5be)]},'buffer',{},{'logger':(0x0,kt[_0x228a86(0x481)])({'level':'error'}),'reuploadRequest':this['client']['updateMediaMessage']});if(!(_0x5a287b instanceof Buffer))throw new Error(_0x228a86(0x4c3));let _0x2486eb=this[_0x228a86(0x417)][_0x228a86(0x5b8)]('DATABASE'),_0x1ae9bf,_0x3f057c;if(_0x4d54d3[_0x228a86(0x2ac)])_0x1ae9bf=_0x4d54d3[_0x228a86(0x2ac)];else{let _0x4acace=_0x4d54d3[_0x228a86(0x53d)]?.[_0x228a86(0xe1)](/\/(\w+)/),_0x1eec7a=_0x4acace?_0x4acace[0x1]:null;if(!_0x1eec7a)throw new Error(_0x228a86(0x387));_0x1ae9bf=(0x0,Lt['v4'])()+'.'+_0x1eec7a;}_0x24c780===_0x228a86(0x32c)&&_0x4d54d3[_0x228a86(0x53d)]==='audio/ogg'?(_0x1ae9bf=(0x0,Lt['v4'])()+_0x228a86(0x3de),_0x3f057c=_0x228a86(0x2d5)+await this[_0x228a86(0x3ba)](_0x5a287b[_0x228a86(0x409)]('base64'))):(await this[_0x228a86(0x5f5)](_0x5a287b,_0x1ae9bf),_0x3f057c=_0x228a86(0x2d5)+_0x1ae9bf);let _0x29b72f=this[_0x228a86(0x417)]['get'](_0x228a86(0x3bc)),_0x43d4cd=this[_0x228a86(0x417)][_0x228a86(0x5b8)](_0x228a86(0x4d1))[_0x228a86(0x53c)],_0x40e32b=_0x29b72f&&_0x29b72f[_0x228a86(0x28a)][_0x228a86(0x4dd)]('/')[0x4];_0x43d4cd===0x1bb&&(_0x3f057c=''+(_0x228a86(0x270)+_0x40e32b)+_0x3f057c);let _0x292e56=0xc*0x3c*0x3c*0x3e8;if(_0x2486eb['ENABLED']){let _0x254e5e={'where':{'key':{'id':_0x33eb42[_0x228a86(0x67c)]['id'],'remoteJid':_0x33eb42['key'][_0x228a86(0x53a)],'fromMe':_0x33eb42[_0x228a86(0x67c)][_0x228a86(0x267)]},'owner':this['instance'][_0x228a86(0x5fe)]}};_0x33eb42['key'][_0x228a86(0x53a)][_0x228a86(0x60c)](_0x228a86(0x5e9))&&(_0x254e5e[_0x228a86(0x5bb)][_0x228a86(0x67c)]['participant']=_0x33eb42[_0x228a86(0x67c)][_0x228a86(0x382)]);let _0x90982e={'message_normalized.fileUrl':_0x3f057c,'message_normalized.expires_fileUrl':Date['now']()+_0x292e56};try{let _0x51a304=await this[_0x228a86(0x642)]['message'][_0x228a86(0x3be)](_0x254e5e,_0x90982e);_0x51a304&&G(this[_0x228a86(0x567)],_0x228a86(0x4fa),{'message':_0x51a304});}catch{}}return{'mediaType':_0x24c780,'fileName':_0x4d54d3[_0x228a86(0x2ac)],'caption':_0x4d54d3[_0x228a86(0x3ad)],'size':{'fileLength':_0x4d54d3[_0x228a86(0x4f5)],'height':_0x4d54d3[_0x228a86(0x651)],'width':_0x4d54d3['width']},'mimetype':_0x4d54d3[_0x228a86(0x53d)],'base64':_0x5a287b[_0x228a86(0x409)]('base64'),'fileUrl':_0x3f057c,'expires_fileUrl':Date[_0x228a86(0x4b8)]()+_0x292e56};}catch(_0x1783f3){throw this[_0x228a86(0x5e8)][_0x228a86(0x44b)](this[_0x228a86(0x567)]+'\x20('+this[_0x228a86(0x5a3)][_0x228a86(0x5fe)]+_0x228a86(0x259)+_0x1783f3),new g(_0x1783f3[_0x228a86(0x409)]());}}async[a0_0x4851ee(0x5f5)](_0x558fc5,_0x1f8067){const _0x358db=a0_0x4851ee;console[_0x358db(0x2c6)](_0x358db(0x218),__dirname),console[_0x358db(0x2c6)](_0x358db(0x5f0),_0x1f8067);let _0x1780f=$[_0x358db(0x481)][_0x358db(0x273)](__dirname,'downloads');console[_0x358db(0x2c6)](_0x358db(0x4ea),_0x1780f),_[_0x358db(0x66f)](_0x1780f)||(this[_0x358db(0x5e8)][_0x358db(0x2c6)](_0x358db(0x39d)),_['mkdirSync'](_0x1780f,{'recursive':!0x0}));let _0xd411ac=$[_0x358db(0x481)]['join'](_0x1780f,_0x1f8067);return console[_0x358db(0x2c6)]('Full\x20file\x20path:',_0xd411ac),new Promise((_0x1f72e8,_0x2387ef)=>{const _0x1c67ab=_0x358db;_[_0x1c67ab(0x341)](_0xd411ac,_0x558fc5,_0x254e3c=>{const _0x2e0809=_0x1c67ab;_0x254e3c?(this[_0x2e0809(0x5e8)][_0x2e0809(0x44b)](_0x2e0809(0x10f)+_0x254e3c[_0x2e0809(0x5be)]),_0x2387ef(_0x254e3c)):(this[_0x2e0809(0x5e8)]['log']('File\x20written\x20to\x20path:\x20'+_0xd411ac),_0x1f72e8(_0xd411ac));});});}async['fetchContacts'](_0x5e53cc){const _0x1616f7=a0_0x4851ee;return _0x5e53cc?.[_0x1616f7(0x5bb)]?_0x5e53cc['where'][_0x1616f7(0x101)]=this[_0x1616f7(0x5a3)]['wuid']:_0x5e53cc={'where':{'owner':this[_0x1616f7(0x5a3)][_0x1616f7(0x5fe)]}},await this['repository'][_0x1616f7(0x576)]['find'](_0x5e53cc);}async[a0_0x4851ee(0x137)](_0x1999fa){const _0x250728=a0_0x4851ee;return _0x1999fa?.[_0x250728(0x5bb)]?_0x1999fa[_0x250728(0x5bb)]['owner']=this[_0x250728(0x5a3)][_0x250728(0x5fe)]:_0x1999fa={'where':{'owner':this[_0x250728(0x5a3)][_0x250728(0x5fe)]},'limit':_0x1999fa?.[_0x250728(0x412)]},await this[_0x250728(0x642)]['message'][_0x250728(0x487)](_0x1999fa);}async[a0_0x4851ee(0xac)](_0x2d8173){const _0x1c6da3=a0_0x4851ee;return _0x2d8173?.[_0x1c6da3(0x5bb)]?_0x2d8173['where'][_0x1c6da3(0x101)]=this[_0x1c6da3(0x5a3)][_0x1c6da3(0x5fe)]:_0x2d8173={'where':{'owner':this['instance'][_0x1c6da3(0x5fe)]},'limit':_0x2d8173?.[_0x1c6da3(0x412)]},await this['repository'][_0x1c6da3(0x501)][_0x1c6da3(0x487)](_0x2d8173);}async[a0_0x4851ee(0x204)](){const _0x3f9b6f=a0_0x4851ee;return await this[_0x3f9b6f(0x642)][_0x3f9b6f(0x202)][_0x3f9b6f(0x487)]({'where':{'owner':this[_0x3f9b6f(0x5a3)][_0x3f9b6f(0x5fe)]}});}async[a0_0x4851ee(0xd7)](){const _0x3ed81c=a0_0x4851ee;return await this[_0x3ed81c(0x28b)][_0x3ed81c(0xd7)]();}async['updatePrivacySettings'](_0x6103da){const _0x54b71b=a0_0x4851ee;try{return await this[_0x54b71b(0x28b)][_0x54b71b(0x58a)](_0x6103da['privacySettings']['readreceipts']),await this['client'][_0x54b71b(0x31c)](_0x6103da[_0x54b71b(0x323)][_0x54b71b(0x5eb)]),await this['client']['updateStatusPrivacy'](_0x6103da[_0x54b71b(0x323)]['status']),await this[_0x54b71b(0x28b)][_0x54b71b(0x221)](_0x6103da[_0x54b71b(0x323)][_0x54b71b(0x46d)]),await this['client'][_0x54b71b(0x5ff)](_0x6103da[_0x54b71b(0x323)][_0x54b71b(0x47f)]),await this[_0x54b71b(0x28b)][_0x54b71b(0x5d8)](_0x6103da[_0x54b71b(0x323)][_0x54b71b(0x38e)]),this[_0x54b71b(0x28b)]?.['ws']?.[_0x54b71b(0x601)](),{'update':_0x54b71b(0x5fd),'data':{'readreceipts':_0x6103da[_0x54b71b(0x323)][_0x54b71b(0x262)],'profile':_0x6103da['privacySettings'][_0x54b71b(0x5eb)],'status':_0x6103da['privacySettings'][_0x54b71b(0x517)],'online':_0x6103da['privacySettings'][_0x54b71b(0x46d)],'last':_0x6103da[_0x54b71b(0x323)][_0x54b71b(0x47f)],'groupadd':_0x6103da[_0x54b71b(0x323)][_0x54b71b(0x38e)]}};}catch(_0x16d7c0){throw new A('Error\x20updating\x20privacy\x20settings',_0x16d7c0[_0x54b71b(0x409)]());}}async[a0_0x4851ee(0x515)](_0x23c1dc){const _0x5b518e=a0_0x4851ee;let _0x302e07=_0x23c1dc?this[_0x5b518e(0x46c)](_0x23c1dc):this['client']?.['user']?.['id'];this[_0x5b518e(0x5e8)]['verbose'](_0x5b518e(0x56c)+_0x302e07);try{if(this[_0x5b518e(0x5e8)][_0x5b518e(0x1bc)](_0x5b518e(0x5da)),_0x23c1dc){let _0x2b4493=(await this[_0x5b518e(0x2a3)]({'numbers':[_0x302e07]}))?.[_0x5b518e(0x575)](),_0x4a1dab=await this[_0x5b518e(0x58d)](_0x2b4493?.[_0x5b518e(0x1e2)]),_0x5b8da9=await this[_0x5b518e(0x338)](_0x2b4493?.[_0x5b518e(0x1e2)]),_0x3c6c53=await this[_0x5b518e(0xf6)](_0x2b4493?.[_0x5b518e(0x1e2)]);return{'wuid':_0x2b4493?.[_0x5b518e(0x1e2)]||_0x302e07,'name':_0x2b4493?.[_0x5b518e(0x44c)],'numberExists':_0x2b4493?.[_0x5b518e(0x656)],'picture':_0x4a1dab?.[_0x5b518e(0x125)],'status':_0x5b8da9?.[_0x5b518e(0x517)],'isBusiness':_0x3c6c53[_0x5b518e(0x4b2)],'email':_0x3c6c53?.[_0x5b518e(0x4b4)],'description':_0x3c6c53?.[_0x5b518e(0x586)],'website':_0x3c6c53?.['website']?.['shift']()};}}catch{return this[_0x5b518e(0x5e8)]['verbose'](_0x5b518e(0x3c2)),{'wuid':_0x302e07,'name':null,'picture':null,'status':null,'os':null,'isBusiness':!0x1};}}async[a0_0x4851ee(0x3a6)](_0xb28494){const _0x430360=a0_0x4851ee;let _0x400f43=_0xb28494?this[_0x430360(0x46c)](_0xb28494):this['client']?.[_0x430360(0x403)]?.['id'];this[_0x430360(0x5e8)][_0x430360(0x1bc)](_0x430360(0x50c)+_0x400f43);let _0x3e3e94=await Fe[_0x430360(0x3ce)]({'id':_0x400f43}),_0x12d13a=_0x3e3e94?_0x3e3e94[_0x430360(0x442)]:null;try{let _0x37b32f=(await this[_0x430360(0x2a3)]({'numbers':[_0x400f43]}))?.['shift'](),_0x1c936d=await this[_0x430360(0x58d)](_0x37b32f?.[_0x430360(0x1e2)]),_0x413543=await this['getStatus'](_0x37b32f?.[_0x430360(0x1e2)]),_0x33b36c=await this['fetchBusinessProfile'](_0x37b32f?.['jid']),_0x494f38={'imagechat':_0x1c936d?.[_0x430360(0x125)],'contactname':_0x12d13a||null,'status':_0x413543?.[_0x430360(0x517)],'isBusiness':_0x33b36c[_0x430360(0x4b2)],'email':_0x33b36c?.[_0x430360(0x4b4)],'description':_0x33b36c?.[_0x430360(0x586)],'website':_0x33b36c?.[_0x430360(0x5f6)]?.[_0x430360(0x575)](),'lastcache':Date['now']()},_0x302228=await I[_0x430360(0x5d7)]({'id':_0x400f43,'owner':this['instance'][_0x430360(0x5fe)]},{'$set':_0x494f38,'$setOnInsert':{'name':_0x37b32f?.[_0x430360(0x44c)]||null}},{'upsert':!0x0,'new':!0x0});return _0x302228&&G(this[_0x430360(0x567)],_0x430360(0x2a6),{'chat':_0x302228}),{'wuid':_0x37b32f?.['jid']||_0x400f43,'name':_0x37b32f?.[_0x430360(0x44c)],'numberExists':_0x37b32f?.['exists'],'picture':_0x1c936d?.[_0x430360(0x125)],'status':_0x413543?.[_0x430360(0x517)],'isBusiness':_0x33b36c['isBusiness'],'email':_0x33b36c?.[_0x430360(0x4b4)],'description':_0x33b36c?.[_0x430360(0x586)],'website':_0x33b36c?.[_0x430360(0x5f6)]?.[_0x430360(0x575)]()};}catch(_0x1d90cf){return this[_0x430360(0x5e8)][_0x430360(0x44b)](_0x430360(0xc5)+_0x1d90cf),{};}}async[a0_0x4851ee(0xf6)](_0x1c8595){const _0x4d4050=a0_0x4851ee;this[_0x4d4050(0x5e8)][_0x4d4050(0x1bc)](_0x4d4050(0x188));try{let _0x31aef0=_0x1c8595?this['createJid'](_0x1c8595):this[_0x4d4050(0x5a3)][_0x4d4050(0x5fe)],_0x366e90=await this['client'][_0x4d4050(0x241)](_0x31aef0);return this['logger'][_0x4d4050(0x1bc)](_0x4d4050(0x12a)),_0x366e90?(this[_0x4d4050(0x5e8)][_0x4d4050(0x1bc)](_0x4d4050(0x497)),{'isBusiness':!0x0,..._0x366e90}):{'isBusiness':!0x1,'message':_0x4d4050(0x24e),...(await this[_0x4d4050(0x2a3)]({'numbers':[_0x31aef0]}))?.['shift']()};}catch(_0x54a542){throw new A(_0x4d4050(0x679),_0x54a542[_0x4d4050(0x409)]());}}async[a0_0x4851ee(0x338)](_0x1bb4d2){const _0x37b08a=a0_0x4851ee;let _0x476819=this[_0x37b08a(0x46c)](_0x1bb4d2);try{return{'wuid':_0x476819,'status':(await this[_0x37b08a(0x28b)]['fetchStatus'](_0x476819))?.[_0x37b08a(0x517)]};}catch{return{'wuid':_0x476819,'status':null};}}async[a0_0x4851ee(0x49b)](_0x137d72){const _0x4a54c4=a0_0x4851ee;try{return await this['client'][_0x4a54c4(0x49b)](_0x137d72),{'update':_0x4a54c4(0x5fd)};}catch(_0x3d1faa){throw new A(_0x4a54c4(0x679),_0x3d1faa[_0x4a54c4(0x409)]());}}async[a0_0x4851ee(0xc0)](_0x5967dc){const _0x141f9e=a0_0x4851ee;try{return await this[_0x141f9e(0x28b)][_0x141f9e(0xc0)](_0x5967dc),{'update':_0x141f9e(0x5fd)};}catch(_0x2fd49f){throw new A(_0x141f9e(0x294),_0x2fd49f[_0x141f9e(0x409)]());}}async['updateProfilePicture'](_0x509d7c){const _0x2a2c43=a0_0x4851ee;try{let _0x4dade3;if((0x0,k[_0x2a2c43(0x635)])(_0x509d7c)){let _0x5b6e64=new Date()[_0x2a2c43(0x58e)](),_0x47e662=_0x509d7c+'?timestamp='+_0x5b6e64;_0x4dade3=(await ue['default'][_0x2a2c43(0x5b8)](_0x47e662,{'responseType':_0x2a2c43(0x32f)}))['data'];}else{if((0x0,k[_0x2a2c43(0x17e)])(_0x509d7c))_0x4dade3=Buffer[_0x2a2c43(0x13f)](_0x509d7c,_0x2a2c43(0x311));else throw new g('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this[_0x2a2c43(0x28b)][_0x2a2c43(0x196)](this[_0x2a2c43(0x5a3)]['wuid'],_0x4dade3),{'update':_0x2a2c43(0x5fd)};}catch(_0x570cd1){throw new A('Error\x20updating\x20profile\x20picture',_0x570cd1[_0x2a2c43(0x409)]());}}async[a0_0x4851ee(0x673)](){const _0x4c416d=a0_0x4851ee;try{return await this[_0x4c416d(0x28b)][_0x4c416d(0x673)](this[_0x4c416d(0x5a3)][_0x4c416d(0x5fe)]),{'update':_0x4c416d(0x5fd)};}catch(_0x3c0de1){throw new A('Error\x20removing\x20profile\x20picture',_0x3c0de1['toString']());}}async[a0_0x4851ee(0x4d7)](_0x6e665b){const _0x3de65b=a0_0x4851ee;try{let _0x3b5834=_0x6e665b[_0x3de65b(0x16d)]['map'](_0x1765ea=>this[_0x3de65b(0x46c)](_0x1765ea)),{id:_0x583dca}=await this[_0x3de65b(0x28b)]['groupCreate'](_0x6e665b['subject'],_0x3b5834);return _0x6e665b?.[_0x3de65b(0x586)]&&await this[_0x3de65b(0x28b)][_0x3de65b(0x343)](_0x583dca,_0x6e665b[_0x3de65b(0x586)]),{'metadata':await this[_0x3de65b(0x28b)][_0x3de65b(0x269)](_0x583dca)};}catch(_0x1e5e73){throw this[_0x3de65b(0x5e8)][_0x3de65b(0x44b)](this[_0x3de65b(0x567)]+'\x20('+this[_0x3de65b(0x5a3)]['wuid']+'):\x20'+_0x1e5e73),new A('Error\x20creating\x20group',_0x1e5e73[_0x3de65b(0x409)]());}}async[a0_0x4851ee(0x4eb)](_0xc56616){const _0x3c4aff=a0_0x4851ee;try{let _0x5345fc;if((0x0,k[_0x3c4aff(0x635)])(_0xc56616[_0x3c4aff(0xff)])){let _0x20d129=new Date()[_0x3c4aff(0x58e)](),_0xca6e59=_0xc56616[_0x3c4aff(0xff)]+_0x3c4aff(0x197)+_0x20d129;_0x5345fc=(await ue[_0x3c4aff(0x481)]['get'](_0xca6e59,{'responseType':'arraybuffer'}))['data'];}else{if((0x0,k[_0x3c4aff(0x17e)])(_0xc56616['image']))_0x5345fc=Buffer[_0x3c4aff(0x13f)](_0xc56616[_0x3c4aff(0xff)],'base64');else throw new g('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this[_0x3c4aff(0x28b)][_0x3c4aff(0x196)](_0xc56616[_0x3c4aff(0x230)],_0x5345fc),{'update':_0x3c4aff(0x5fd)};}catch(_0x5329fe){throw new A(_0x3c4aff(0x4ee),_0x5329fe[_0x3c4aff(0x409)]());}}async[a0_0x4851ee(0x622)](_0x16c799,_0x5aa7bb=a0_0x4851ee(0x2e9)){const _0x597d4e=a0_0x4851ee;try{let _0x1791c4=await this[_0x597d4e(0x28b)][_0x597d4e(0x269)](_0x16c799['groupJid']),_0x142d74=null;try{_0x142d74=await this['client'][_0x597d4e(0x125)](_0x16c799[_0x597d4e(0x230)],_0x597d4e(0xff));}catch(_0x192d53){this['logger']['verbose'](this[_0x597d4e(0x567)]+'\x20('+this[_0x597d4e(0x5a3)][_0x597d4e(0x5fe)]+_0x597d4e(0x335)+_0x16c799['groupJid']+':\x20'+_0x192d53[_0x597d4e(0x409)]());}let _0xf1ff7=await I[_0x597d4e(0x5d7)]({'id':_0x16c799[_0x597d4e(0x230)],'owner':this[_0x597d4e(0x5a3)][_0x597d4e(0x5fe)]},{'$set':{'imagechat':_0x142d74,'name':_0x1791c4['subject'],'group_size':_0x1791c4[_0x597d4e(0x30d)],'group_announce':_0x1791c4['announce'],'lastcache':Date[_0x597d4e(0x4b8)]()}},{'new':!0x0,'upsert':!0x0});return _0xf1ff7&&G(this[_0x597d4e(0x567)],_0x597d4e(0x2a6),{'chat':_0xf1ff7}),{'metadata':_0x1791c4,'image':_0x142d74};}catch(_0x1dd723){if(_0x5aa7bb===_0x597d4e(0x518))return;throw new x(_0x597d4e(0x330),_0x1dd723[_0x597d4e(0x409)]());}}async[a0_0x4851ee(0x5aa)](_0x94a399){const _0x1880fd=a0_0x4851ee;try{return await this['client'][_0x1880fd(0x343)](_0x94a399[_0x1880fd(0x230)],_0x94a399[_0x1880fd(0x586)]),{'update':_0x1880fd(0x5fd)};}catch(_0x44f39e){throw new A(_0x1880fd(0x578),_0x44f39e[_0x1880fd(0x409)]());}}async['groupName'](_0x58f521){const _0x31b18a=a0_0x4851ee;try{return await this[_0x31b18a(0x28b)]['groupUpdateSubject'](_0x58f521[_0x31b18a(0x230)],_0x58f521[_0x31b18a(0x44c)]),{'update':'success'};}catch(_0x3a9039){throw new A('Error\x20change\x20group\x20name',_0x3a9039[_0x31b18a(0x409)]());}}async[a0_0x4851ee(0x59c)](_0x5b6230){const _0x80b2e5=a0_0x4851ee;try{return await this[_0x80b2e5(0x28b)]['groupSettingUpdate'](_0x5b6230['groupJid'],_0x5b6230[_0x80b2e5(0xa5)]),{'update':'success'};}catch(_0xfd886d){throw new A(_0x80b2e5(0x3c6),_0xfd886d[_0x80b2e5(0x409)]());}}async[a0_0x4851ee(0x167)](){const _0x346735=a0_0x4851ee;try{let _0x38b27f=[],_0x5f5c23=await this[_0x346735(0x28b)][_0x346735(0x358)](),_0x112b7f=Object[_0x346735(0x4a6)](_0x5f5c23),_0xbca0d0=_0x112b7f[_0x346735(0x1a6)](_0x1e6f2a=>(0x0,w[_0x346735(0x591)])(_0x1e6f2a?.['id']))['map'](async _0x2f1edc=>{const _0xab7ce3=_0x346735;try{return await this['client'][_0xab7ce3(0x125)](_0x2f1edc['id'],_0xab7ce3(0xff));}catch(_0x13a47c){return this['logger']['verbose'](this[_0xab7ce3(0x567)]+'\x20('+this[_0xab7ce3(0x5a3)][_0xab7ce3(0x5fe)]+'):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20'+_0x2f1edc['id']+':\x20'+_0x13a47c[_0xab7ce3(0x409)]()),null;}}),_0x4de7de=await Promise[_0x346735(0x249)](_0xbca0d0);for(let _0x375fb5=0x0;_0x375fb5<_0x112b7f['length'];_0x375fb5++){let _0x926b63=_0x112b7f[_0x375fb5];(0x0,w[_0x346735(0x591)])(_0x926b63?.['id'])&&_0x38b27f['push']({'groupJid':_0x926b63?.['id'],'subject':_0x926b63?.[_0x346735(0x22b)],'subjectOwner':_0x926b63?.[_0x346735(0xb5)]?.[_0x346735(0x4dd)]('@')[0x0],'subjectTime':_0x926b63?.[_0x346735(0x2e0)],'size':_0x926b63?.[_0x346735(0x16d)]?.[_0x346735(0x291)],'owner':_0x926b63?.[_0x346735(0x101)]?.[_0x346735(0x4dd)]('@')[0x0],'creation':_0x926b63?.['creation'],'desc':_0x926b63?.[_0x346735(0x46a)],'restrict':_0x926b63?.[_0x346735(0x609)],'announce':_0x926b63?.[_0x346735(0x274)],'image':_0x4de7de[_0x375fb5]});}return _0x38b27f;}catch(_0x540fe3){throw new x(_0x346735(0x330),_0x540fe3[_0x346735(0x409)]());}}async[a0_0x4851ee(0x131)](_0x4ab74c){const _0x1c3c7b=a0_0x4851ee;try{let _0x5972cb=await this[_0x1c3c7b(0x28b)][_0x1c3c7b(0x194)](_0x4ab74c[_0x1c3c7b(0x230)]);return{'inviteUrl':_0x1c3c7b(0x3c1)+_0x5972cb,'inviteCode':_0x5972cb};}catch(_0x70813){throw new x(_0x1c3c7b(0x326),_0x70813[_0x1c3c7b(0x409)]());}}async[a0_0x4851ee(0x12f)](_0x32138d){const _0x2c5411=a0_0x4851ee;try{let _0x36c2d0=await this['client'][_0x2c5411(0x17f)](_0x32138d[_0x2c5411(0x230)]);return{'revoked':!0x0,'inviteUrl':_0x2c5411(0x3c1)+_0x36c2d0,'inviteCode':_0x36c2d0};}catch(_0x247526){throw new x('Revoke\x20error',_0x247526[_0x2c5411(0x409)]());}}async[a0_0x4851ee(0x1c9)](_0x13fbb1){const _0x2941eb=a0_0x4851ee;try{if((0x0,k[_0x2941eb(0x635)])(_0x13fbb1[_0x2941eb(0x131)]))var _0x4e5169=_0x13fbb1[_0x2941eb(0x131)][_0x2941eb(0x4dd)]('/')[0x3];else var _0x4e5169=_0x13fbb1[_0x2941eb(0x131)];let _0x2ec770=await this[_0x2941eb(0x28b)]['groupAcceptInvite'](_0x4e5169);return this[_0x2941eb(0x5e8)][_0x2941eb(0x1bc)](this[_0x2941eb(0x567)]+'\x20('+this[_0x2941eb(0x5a3)][_0x2941eb(0x5fe)]+_0x2941eb(0x259)+_0x2ec770),{'join':!0x0,'inviteCode':_0x4e5169,'groupJid':_0x2ec770};}catch(_0x1baf1d){throw new x('No\x20join\x20group\x20invite\x20code\x20or\x20url',_0x1baf1d[_0x2941eb(0x409)]());}}async[a0_0x4851ee(0x12b)](_0x2f8a8b){const _0x42adc1=a0_0x4851ee;try{return{'participants':(await this[_0x42adc1(0x28b)]['groupMetadata'](_0x2f8a8b[_0x42adc1(0x230)]))[_0x42adc1(0x16d)]};}catch(_0x54447e){throw new x(_0x42adc1(0x1fb),_0x54447e[_0x42adc1(0x409)]());}}async[a0_0x4851ee(0x544)](_0x4fccbf){const _0x5047b3=a0_0x4851ee;try{let _0x482402=_0x4fccbf[_0x5047b3(0x16d)][_0x5047b3(0x51a)](_0x44b69e=>this[_0x5047b3(0x46c)](_0x44b69e));return{'updateParticipants':await this[_0x5047b3(0x28b)][_0x5047b3(0x2e1)](_0x4fccbf[_0x5047b3(0x230)],_0x482402,_0x4fccbf[_0x5047b3(0x65b)])};}catch(_0xcfd931){throw new g(_0x5047b3(0x392),_0xcfd931['toString']());}}async[a0_0x4851ee(0xaa)](_0x57a715){const _0x2514b2=a0_0x4851ee;try{let _0x45510e=await this[_0x2514b2(0x28b)][_0x2514b2(0x63d)](_0x57a715[_0x2514b2(0x230)],_0x57a715[_0x2514b2(0x3f8)]);return{'success':!0x0};}catch(_0x1a0f39){throw new g(_0x2514b2(0x3f1),_0x1a0f39[_0x2514b2(0x409)]());}}async[a0_0x4851ee(0x16a)](_0x16533a){const _0x4e4069=a0_0x4851ee;try{return await this[_0x4e4069(0x28b)][_0x4e4069(0x474)](_0x16533a['groupJid']),{'groupJid':_0x16533a[_0x4e4069(0x230)],'leave':!0x0};}catch(_0xad05e6){throw new g(_0x4e4069(0x34c),_0xad05e6[_0x4e4069(0x409)]());}}async[a0_0x4851ee(0x5ef)](_0x4a1ee2){const _0x48bdf8=a0_0x4851ee;return await this['sendMessageWithTyping'](_0x4a1ee2['number'],{'poll':{'name':_0x4a1ee2[_0x48bdf8(0x5ef)]?.[_0x48bdf8(0x44c)],'selectableCount':_0x4a1ee2['pollMessage'][_0x48bdf8(0x15b)],'values':_0x4a1ee2['pollMessage'][_0x48bdf8(0x4a6)]}},_0x4a1ee2?.[_0x48bdf8(0x2cf)]);}async[a0_0x4851ee(0x31a)](_0x2e4770,_0x17760b,_0x2b78d5){const _0x337bbf=a0_0x4851ee;if(await this[_0x337bbf(0x4d9)](_0x2e4770,!0x0)){let _0x23f4ea={'where':{'key':{'id':_0x2e4770['id'],'remoteJid':_0x17760b,'fromMe':_0x2e4770[_0x337bbf(0x267)]},'owner':this[_0x337bbf(0x5a3)][_0x337bbf(0x5fe)]}},_0x3344cc={'status':[_0x2b78d5['status']][0x0]};try{let _0x46370e=await this[_0x337bbf(0x642)][_0x337bbf(0x5be)][_0x337bbf(0x3be)](_0x23f4ea,_0x3344cc);_0x46370e&&G(this[_0x337bbf(0x567)],'messages',{'message':_0x46370e});}catch{}}}[a0_0x4851ee(0x65f)](_0xb86502){const _0x1670a5=a0_0x4851ee;let _0x5cd041=_0xb86502['replace'](/\\n/g,'\x0a')[_0x1670a5(0x4dd)]('\x0a')[_0x1670a5(0x1a6)](_0x5da819=>_0x5da819[_0x1670a5(0x5a9)]('TEL')||_0x5da819[_0x1670a5(0x5a9)](_0x1670a5(0x38f))),_0x1f29d6='';return _0x5cd041[_0x1670a5(0x386)](_0x18a2d1=>{const _0x3ff953=_0x1670a5;let _0x7c92dc=/TEL(?:.*):(.+)/,_0x1f88ea=/EMAIL(?:.*):(.+)/,_0x52cb17=_0x18a2d1[_0x3ff953(0xe1)](_0x7c92dc),_0x3c0931=_0x18a2d1['match'](_0x1f88ea);if(_0x52cb17){let _0x14b9e9=_0x52cb17[0x1]['replace'](/-| |\+|\(|\)/g,'')['trim']();_0x1f29d6+=_0x3ff953(0x340)+_0x14b9e9+'\x0a';}else{if(_0x3c0931){let _0x5d2b7a=_0x3c0931[0x1][_0x3ff953(0x5b9)]();_0x1f29d6+=_0x3ff953(0x659)+_0x5d2b7a+'\x0a';}}}),_0x1f29d6['trim']();}async[a0_0x4851ee(0xc2)](_0x10ff1a,_0x534b4f,_0x4fea19){const _0x4d539b=a0_0x4851ee;let _0x56a442=_0x534b4f[_0x4d539b(0x67c)][_0x4d539b(0x53a)],_0x52d6b6=_0x534b4f[_0x4d539b(0x67c)][_0x4d539b(0x267)],_0x40a370=_0x56a442[_0x4d539b(0x60c)](_0x4d539b(0x5e9));if(!_0x10ff1a['ENABLED'])return;let _0x12ff63={'$set':{..._0x52d6b6?{'unreadcount':0x0,'lastmsg':_0x534b4f['messageTimestamp']||Date[_0x4d539b(0x4b8)]()}:{'lastmsg':_0x534b4f[_0x4d539b(0x14e)]||Date['now']()},..._0x52d6b6||_0x40a370?{}:{'name':_0x534b4f[_0x4d539b(0x442)]}},'$setOnInsert':{'group':_0x40a370,'leadInfo.tags':[],'leadInfo.customFields':[],...!_0x52d6b6&&!_0x40a370?{'leadInfo.nome':_0x534b4f[_0x4d539b(0x442)]}:{}},..._0x52d6b6?{}:{'$inc':{'unreadcount':0x1}}},_0x5bd4f9={'new':!0x0,'upsert':!0x0,'setDefaultsOnInsert':!0x0},_0x7f613f=await I[_0x4d539b(0x5d7)]({'id':_0x56a442,'owner':this[_0x4d539b(0x5a3)][_0x4d539b(0x5fe)]},_0x12ff63,_0x5bd4f9);if(_0x7f613f?(!_0x40a370&&(!_0x7f613f[_0x4d539b(0x521)]||!_0x7f613f[_0x4d539b(0x521)][_0x4d539b(0xf4)])&&_0x534b4f[_0x4d539b(0x442)]&&!_0x52d6b6&&(_0x12ff63={'$set':{'leadInfo.nome':_0x534b4f[_0x4d539b(0x442)]}},_0x7f613f=await I['findOneAndUpdate']({'id':_0x56a442,'owner':this['instance'][_0x4d539b(0x5fe)]},_0x12ff63,_0x5bd4f9)),G(this[_0x4d539b(0x567)],'chats',{'chat':_0x7f613f})):this[_0x4d539b(0x5e8)][_0x4d539b(0x44b)](this[_0x4d539b(0x567)]+'\x20('+this[_0x4d539b(0x5a3)][_0x4d539b(0x5fe)]+_0x4d539b(0x313)),!this[_0x4d539b(0x34e)]?.['flowConfig']['enabled'])return this[_0x4d539b(0x5e8)][_0x4d539b(0x1bc)](this['instanceName']+'\x20('+this['instance'][_0x4d539b(0x5fe)]+_0x4d539b(0x630)),null;if(_0x7f613f['id'][_0x4d539b(0x5a9)](_0x4d539b(0x5e9))&&this[_0x4d539b(0x34e)]?.[_0x4d539b(0x299)][_0x4d539b(0x2d0)]===!0x0)return this[_0x4d539b(0x5e8)][_0x4d539b(0x1bc)](this['instanceName']+'\x20('+this[_0x4d539b(0x5a3)][_0x4d539b(0x5fe)]+_0x4d539b(0x536)),null;if(_0x7f613f['leadInfo']){if(_0x7f613f[_0x4d539b(0x521)][_0x4d539b(0x45f)]===0x0||_0x7f613f[_0x4d539b(0x521)][_0x4d539b(0x229)])return this[_0x4d539b(0x5e8)]['verbose'](this[_0x4d539b(0x567)]+'\x20('+this[_0x4d539b(0x5a3)][_0x4d539b(0x5fe)]+'):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20'+_0x56a442+_0x4d539b(0x237)),null;if(_0x7f613f['leadInfo']['desativadoFluxoAte']>Date[_0x4d539b(0x4b8)]())return this[_0x4d539b(0x5e8)][_0x4d539b(0x1bc)](this[_0x4d539b(0x567)]+'\x20('+this[_0x4d539b(0x5a3)][_0x4d539b(0x5fe)]+'):\x20Está\x20configurado\x20para\x20parar\x20até\x20'+new Date(_0x7f613f[_0x4d539b(0x521)][_0x4d539b(0x45f)])['toLocaleString']()+_0x4d539b(0x237)),null;}this[_0x4d539b(0x5e8)][_0x4d539b(0x1bc)](this[_0x4d539b(0x567)]+'\x20('+this['instance'][_0x4d539b(0x5fe)]+_0x4d539b(0x1b6)),this[_0x4d539b(0x3b0)](_0x4fea19,_0x534b4f,this[_0x4d539b(0x5a3)][_0x4d539b(0x5fe)]);}async['checkAndUpdateChats'](){const _0x43c5b8=a0_0x4851ee;let _0x95d76f=await this['repository']['contact'][_0x43c5b8(0x487)]({'where':{'owner':this[_0x43c5b8(0x5a3)][_0x43c5b8(0x5fe)]}}),_0x457052=0x0,_0x1f6eab=[];for(let _0x5c91f4 of _0x95d76f)_0x1f6eab[_0x43c5b8(0x53b)]({'updateOne':{'filter':{'id':_0x5c91f4['id'],'owner':this[_0x43c5b8(0x5a3)][_0x43c5b8(0x5fe)]},'update':{'$set':{'contactname':_0x5c91f4['pushName']}}}}),_0x1f6eab[_0x43c5b8(0x291)]===0x1f4&&(_0x457052+=await this[_0x43c5b8(0x53e)](_0x1f6eab),_0x1f6eab=[]);_0x1f6eab[_0x43c5b8(0x291)]>0x0&&(_0x457052+=await this['performBulkUpdate'](_0x1f6eab)),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x43c5b8(0x5a3)][_0x43c5b8(0x5fe)]+'):\x20'+_0x457052+_0x43c5b8(0x15c)+this[_0x43c5b8(0x5a3)][_0x43c5b8(0x5fe)]+_0x43c5b8(0xee));}async[a0_0x4851ee(0x53e)](_0x33d7ce){const _0x394fe7=a0_0x4851ee;return(await I[_0x394fe7(0x4b7)](_0x33d7ce))['modifiedCount'];}async['upsertChats'](_0x2756b6,_0x32cebb){const _0x1e259f=a0_0x4851ee;if(_0x32cebb[_0x1e259f(0x1a4)]){let _0x3d5d7a=_0x2756b6[_0x1e259f(0x51a)](async _0x18b176=>{const _0x3b767d=_0x1e259f;try{let _0x2052c0={'$set':{'id':_0x18b176['id'],'owner':_0x18b176[_0x3b767d(0x101)],'lastcache':0x0}};if(_0x18b176[_0x3b767d(0x645)]!==null&&(_0x2052c0[_0x3b767d(0x560)][_0x3b767d(0x645)]=_0x18b176['group']),_0x18b176[_0x3b767d(0x44c)]!==null&&(_0x2052c0[_0x3b767d(0x560)][_0x3b767d(0x44c)]=_0x18b176[_0x3b767d(0x44c)]),_0x18b176['contactname']!==null&&(_0x2052c0[_0x3b767d(0x560)][_0x3b767d(0x2a4)]=_0x18b176[_0x3b767d(0x2a4)]),_0x18b176[_0x3b767d(0xfb)]!==null&&(_0x2052c0['$set'][_0x3b767d(0xfb)]=_0x18b176[_0x3b767d(0xfb)]),_0x18b176[_0x3b767d(0xfb)]===null&&(_0x2052c0[_0x3b767d(0x560)][_0x3b767d(0xfb)]=_0x3b767d(0xe9)),_0x18b176[_0x3b767d(0x4c7)]!==null&&(_0x2052c0['$set'][_0x3b767d(0x4c7)]=_0x18b176[_0x3b767d(0x4c7)]),_0x18b176[_0x3b767d(0xd4)]!==null&&(_0x2052c0[_0x3b767d(0x560)]['archived']=_0x18b176[_0x3b767d(0xd4)]),_0x18b176[_0x3b767d(0x23f)]!==null&&(_0x2052c0[_0x3b767d(0x560)]['unreadcount']=_0x18b176[_0x3b767d(0x23f)]),Object[_0x3b767d(0x2b5)](_0x2052c0['$set'])[_0x3b767d(0x291)]>0x0)return await I[_0x3b767d(0x5d7)]({'id':_0x18b176['id'],'owner':_0x18b176[_0x3b767d(0x101)]},_0x2052c0,{'new':!0x0,'upsert':!0x0});}catch(_0x4c9c56){return console[_0x3b767d(0x44b)](_0x3b767d(0x11a)+_0x18b176['id']+':',_0x4c9c56),null;}}),_0x4181c4=(await Promise[_0x1e259f(0x249)](_0x3d5d7a))[_0x1e259f(0x1a6)](_0x11268e=>_0x11268e!==null)['length'];this[_0x1e259f(0x5e8)]['verbose'](this[_0x1e259f(0x567)]+'\x20('+this[_0x1e259f(0x5a3)]['wuid']+_0x1e259f(0x259)+_0x4181c4+'\x20chats\x20de\x20'+this[_0x1e259f(0x5a3)][_0x1e259f(0x5fe)]+_0x1e259f(0x402));}}async[a0_0x4851ee(0x15a)](_0x3c8a30){const _0x198e7e=a0_0x4851ee;this[_0x198e7e(0x5e8)][_0x198e7e(0x1bc)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x198e7e(0xb0));let _0xed06e9={'readMessages':[{'remoteJid':_0x3c8a30[_0x198e7e(0x64a)]['lastReceivedMessage'][_0x198e7e(0x67c)][_0x198e7e(0x53a)],'fromMe':_0x3c8a30['chatLog'][_0x198e7e(0x41b)]['key']['fromMe'],'id':_0x3c8a30['chatLog']['lastReceivedMessage'][_0x198e7e(0x67c)]['id']}]};await this[_0x198e7e(0x108)](_0xed06e9);}async[a0_0x4851ee(0x3b0)](_0x471476,_0x3a38db,_0x4bb967){const _0x101813=a0_0x4851ee;try{let {key:_0x5ab48f,message_normalized:_0x41f230}=_0x3a38db,_0x5b4149=_0x41f230,_0x211001=_0x41f230[_0x101813(0x52d)]||_0x41f230['caption']||_0x41f230[_0x101813(0x2bb)]||_0x41f230['name'],_0x5e09bc=_0x5ab48f[_0x101813(0x53a)],_0x412978;if(_0x5b4149['key']['fromMe']&&_0x211001[_0x101813(0x5b9)]()!==this[_0x101813(0x34e)]?.[_0x101813(0x299)][_0x101813(0x48d)][_0x101813(0x5b9)]())return this[_0x101813(0x5e8)]['verbose'](this[_0x101813(0x567)]+'\x20('+this[_0x101813(0x5a3)][_0x101813(0x5fe)]+_0x101813(0x441)),null;if(_0x5b4149[_0x101813(0x67c)][_0x101813(0x267)]&&_0x211001[_0x101813(0x5b9)]()===this[_0x101813(0x34e)]?.[_0x101813(0x299)][_0x101813(0x48d)]['trim']()){this[_0x101813(0x5e8)][_0x101813(0x1bc)](this[_0x101813(0x567)]+'\x20('+this['instance'][_0x101813(0x5fe)]+_0x101813(0x56a));let _0x72fa2d=await F[_0x101813(0x487)]({'owner':_0x4bb967,'remoteJid':_0x5e09bc,'status':_0x101813(0x465)});this[_0x101813(0x5e8)][_0x101813(0x1bc)](this[_0x101813(0x567)]+'\x20('+this[_0x101813(0x5a3)]['wuid']+_0x101813(0x47e)+_0x72fa2d);let _0x49de2e=Date[_0x101813(0x4b8)](),_0xd4dd1c;return this[_0x101813(0x34e)]?.[_0x101813(0x299)][_0x101813(0x126)]===0x0?_0xd4dd1c={'stoppedUntil':_0x49de2e+0x7591f6200}:_0xd4dd1c={'stoppedUntil':_0x49de2e+this[_0x101813(0x34e)]?.[_0x101813(0x299)]['stopMinutes']*0x3c*0x3e8},this['logger']['verbose'](this[_0x101813(0x567)]+'\x20('+this['instance'][_0x101813(0x5fe)]+_0x101813(0x5a4)+_0xd4dd1c),this[_0x101813(0x58f)](_0x412978,_0xd4dd1c[_0x101813(0x191)]),null;}if(_0x211001&&_0x211001[_0x101813(0x4e5)](this[_0x101813(0x34e)]?.[_0x101813(0x299)][_0x101813(0xa0)])&&_0x211001['length']>0x4){let _0xcbb36e=await D[_0x101813(0x3ce)]({'owner':_0x4bb967,'startCommandWord':_0x211001});if(this[_0x101813(0x5e8)][_0x101813(0x1bc)](this['instanceName']+'\x20('+this['instance'][_0x101813(0x5fe)]+_0x101813(0x499)),_0xcbb36e)_0x412978=await this[_0x101813(0x486)](_0xcbb36e,_0x5b4149[_0x101813(0x67c)],_0x5b4149);else return this[_0x101813(0x5e8)]['verbose'](this[_0x101813(0x567)]+'\x20('+this[_0x101813(0x5a3)]['wuid']+_0x101813(0xbe)),null;}else _0x412978=await this['findConversation'](_0x4bb967,_0x5e09bc,_0x5b4149);if(_0x412978){this['logger']['verbose'](this[_0x101813(0x567)]+'\x20('+this[_0x101813(0x5a3)][_0x101813(0x5fe)]+_0x101813(0xa9)),!_0x5ab48f['fromMe']&&_0x412978[_0x101813(0x38c)]&&this[_0x101813(0x15a)](_0x412978);let _0x16bc5f=await this[_0x101813(0x195)](_0x412978);_0x16bc5f&&await this[_0x101813(0x3df)](_0x412978,_0x16bc5f,_0x412978[_0x101813(0x53a)]);}}catch(_0x3bb54d){this[_0x101813(0x5e8)][_0x101813(0x44b)](this[_0x101813(0x567)]+'\x20('+this[_0x101813(0x5a3)]['wuid']+_0x101813(0x244)+_0x3bb54d);}}[a0_0x4851ee(0x395)](_0x3b5422,_0xb0fb7e='',_0x54fee8={},_0x13eec4=!0x0){const _0x26b6dc=a0_0x4851ee;for(let _0x52f061 in _0x3b5422){let _0x1636a2=_0x13eec4?'_'+_0x52f061:''+_0xb0fb7e+_0x52f061;typeof _0x3b5422[_0x52f061]==_0x26b6dc(0x658)&&_0x3b5422[_0x52f061]!==null?this[_0x26b6dc(0x395)](_0x3b5422[_0x52f061],_0x1636a2+'.',_0x54fee8,!0x1):_0x54fee8[_0x1636a2]=String(_0x3b5422[_0x52f061]);}return _0x54fee8;}[a0_0x4851ee(0x4e1)](_0x50b6a7){const _0x553a27=a0_0x4851ee;let _0x33513d={};for(let _0xe493bc of _0x50b6a7)typeof _0xe493bc[_0x553a27(0x44c)]==_0x553a27(0x579)&&typeof _0xe493bc[_0x553a27(0x449)]=='string'&&(_0x33513d[_0xe493bc['name']]=_0xe493bc[_0x553a27(0x449)]);return _0x33513d;}async[a0_0x4851ee(0x195)](_0x5a6216){const _0x4387bf=a0_0x4851ee;if(!this['AutomateSystem']?.[_0x4387bf(0x299)][_0x4387bf(0x25d)]||_0x5a6216[_0x4387bf(0x517)]!==_0x4387bf(0x465)&&_0x5a6216['waitingPoll_id']==='')return null;let _0x51e4f7=_0x5a6216[_0x4387bf(0x64a)]['lastBlockId']||_0x4387bf(0x46b);typeof _0x5a6216[_0x4387bf(0x64a)]['lastCondition']>'u'&&(_0x5a6216[_0x4387bf(0x64a)][_0x4387bf(0x4e7)]=!0x0);let _0x4aa3c6=_0x5a6216[_0x4387bf(0x64a)]['lastCondition'];this[_0x4387bf(0x5e8)]['verbose'](this[_0x4387bf(0x567)]+'\x20('+this[_0x4387bf(0x5a3)]['wuid']+_0x4387bf(0x603)+_0x51e4f7+_0x4387bf(0x200)+_0x4aa3c6);let _0x2b05ef=_0x51e4f7===_0x4387bf(0x46b)?_0x5a6216[_0x4387bf(0xc4)][_0x4387bf(0x487)](_0x2600e8=>_0x2600e8[_0x4387bf(0x620)]===_0x4387bf(0x46b)):_0x5a6216['blocks'][_0x4387bf(0x487)](_0x12a265=>_0x12a265[_0x4387bf(0x3bf)][_0x4387bf(0x409)]()===_0x51e4f7['toString']());if(!_0x2b05ef)return this['logger'][_0x4387bf(0x44b)](this[_0x4387bf(0x567)]+'\x20('+this[_0x4387bf(0x5a3)][_0x4387bf(0x5fe)]+_0x4387bf(0x57c)+_0x51e4f7),null;let _0x2bd021={'_pushName':_0x5a6216['chatLog']['lastReceivedMessage'][_0x4387bf(0x442)],..._0x5a6216[_0x4387bf(0x64a)][_0x4387bf(0x3eb)]},_0x19bdb0=null;if(_0x5a6216[_0x4387bf(0x3ae)]){let _0x23f72b=_0x5a6216['chatLog'][_0x4387bf(0x41b)]['vote'],_0x246963=_0x5a6216[_0x4387bf(0x64d)]['find'](_0x3f0a40=>_0x3f0a40[_0x4387bf(0x3ec)]===_0x23f72b);if(_0x246963){let _0x125e9b=_0x246963['next_groupId'];if(_0x19bdb0=_0x5a6216[_0x4387bf(0xc4)][_0x4387bf(0x487)](_0xd5606d=>_0xd5606d[_0x4387bf(0x435)]===_0x125e9b&&_0xd5606d[_0x4387bf(0x3b5)]===0x1),_0x2b05ef[_0x4387bf(0x58b)][_0x4387bf(0x4ec)]){let _0x46d9f2={'id':_0x5a6216[_0x4387bf(0x3ae)],'remoteJid':_0x5a6216[_0x4387bf(0x53a)],'fromMe':!0x0};await this['deleteMessage'](_0x46d9f2);}if(_0x2b05ef['uazapi'][_0x4387bf(0x4ec)]&&_0x2b05ef[_0x4387bf(0x58b)][_0x4387bf(0x37c)]){let _0x4dc603={'number':_0x5a6216[_0x4387bf(0x53a)],'options':{'delay':0x0},'textMessage':{'text':_0x4387bf(0x42a)+_0x5a6216[_0x4387bf(0x67a)]+_0x4387bf(0x1f8)+_0x23f72b}};await this[_0x4387bf(0x2f5)](_0x4dc603);}_0x5a6216[_0x4387bf(0x517)]=_0x4387bf(0x465),_0x5a6216['waitingPoll_id']='',_0x5a6216[_0x4387bf(0x67a)]='',_0x5a6216[_0x4387bf(0x64d)]=[];}else{this[_0x4387bf(0x5e8)][_0x4387bf(0x1bc)](this[_0x4387bf(0x567)]+'\x20('+this['instance'][_0x4387bf(0x5fe)]+_0x4387bf(0x49a));let _0x594a4a={'activatedCount':_0x5a6216[_0x4387bf(0x64a)][_0x4387bf(0x17d)][_0x4387bf(0x1a6)](_0x6ecbc0=>String(_0x6ecbc0[_0x4387bf(0x122)])===String(_0x51e4f7))[_0x4387bf(0x291)],'moreLogs':['Não\x20respondeu\x20com\x20a\x20enquete.']};if(_0x2b05ef[_0x4387bf(0x58b)]['pollErrorMessage']){let _0x5ddbb4={'number':_0x5a6216[_0x4387bf(0x53a)],'options':{'delay':0x0},'textMessage':{'text':_0x2b05ef[_0x4387bf(0x58b)][_0x4387bf(0x22c)]}};await this[_0x4387bf(0x2f5)](_0x5ddbb4);}if(_0x2b05ef[_0x4387bf(0x296)]!==void 0x0&&_0x594a4a[_0x4387bf(0x349)]>=_0x2b05ef[_0x4387bf(0x296)]){let _0x40624d=Date[_0x4387bf(0x4b8)](),_0x17c590=_0x2b05ef[_0x4387bf(0x5d0)]??0xa;isNaN(_0x17c590)&&(_0x17c590=0xa);let _0x537e2d=_0x40624d+_0x17c590*0x3c*0x3e8;_0x594a4a[_0x4387bf(0x615)]=_0x537e2d,_0x594a4a['moreLogs'][_0x4387bf(0x53b)](_0x4387bf(0x14f)),this[_0x4387bf(0x58f)](_0x5a6216,_0x537e2d),_0x5a6216['waitingPoll_id']='',_0x5a6216[_0x4387bf(0x67a)]='',_0x5a6216[_0x4387bf(0x64d)]=[];}return this['updateConversation'](_0x5a6216,_0x2b05ef,_0x594a4a,!0x0),null;}}if(_0x4aa3c6&&_0x2b05ef[_0x4387bf(0x211)]&&!_0x5a6216['waitingPoll_id']){let _0x26e42b=_0x5a6216[_0x4387bf(0xc4)]['filter'](_0x3c57bb=>_0x3c57bb[_0x4387bf(0x435)][_0x4387bf(0x409)]()===_0x2b05ef['next_groupId']['toString']())['sort']((_0x426fb7,_0x3ec01a)=>_0x426fb7[_0x4387bf(0x3b5)]-_0x3ec01a['order']);_0x26e42b['length']>0x0&&(_0x19bdb0=_0x26e42b[0x0]);}if(!_0x19bdb0){let _0x1f0e3f=_0x2b05ef[_0x4387bf(0x435)],_0x27c2bc=_0x5a6216[_0x4387bf(0xc4)][_0x4387bf(0x1a6)](_0x7b374b=>_0x7b374b['groupId']===_0x1f0e3f&&_0x7b374b['order']>_0x2b05ef[_0x4387bf(0x3b5)])[_0x4387bf(0x1dc)]((_0x17a851,_0x5a9ab2)=>_0x17a851['order']-_0x5a9ab2[_0x4387bf(0x3b5)]);_0x27c2bc[_0x4387bf(0x291)]>0x0&&(_0x19bdb0=_0x27c2bc[0x0]);}if(!_0x19bdb0)return _0x5a6216[_0x4387bf(0x517)]=_0x4387bf(0x45e),null;_0x5a6216['chatLog']['realVariables']=_0x2bd021;let _0x503aea=JSON[_0x4387bf(0x5f3)](JSON[_0x4387bf(0x63a)](_0x19bdb0));return this[_0x4387bf(0x2b2)](_0x503aea,_0x5a6216['chatLog'][_0x4387bf(0x3eb)]),_0x5a6216[_0x4387bf(0x64a)]['lastBlockId']=_0x503aea['_id'],_0x5a6216[_0x4387bf(0x64a)][_0x4387bf(0x4e7)]=!0x0,_0x503aea;}[a0_0x4851ee(0x217)](_0x38ff8f,_0x3261dc){const _0x181844=a0_0x4851ee;return _0x38ff8f[_0x181844(0x582)](/\{\{([^}]+)\}\}/g,(_0x289b2d,_0x13445f)=>_0x3261dc[_0x13445f]||'');}[a0_0x4851ee(0x2b2)](_0x24af24,_0x23a5bb){const _0x306c64=a0_0x4851ee;for(let _0x713060 in _0x24af24)typeof _0x24af24[_0x713060]=='string'?_0x24af24[_0x713060]=this['replaceVariables'](_0x24af24[_0x713060],_0x23a5bb):typeof _0x24af24[_0x713060]==_0x306c64(0x658)&&this['replaceVariablesInObject'](_0x24af24[_0x713060],_0x23a5bb);}async[a0_0x4851ee(0x66a)](_0x5524c2,_0x5a8b47){const _0x5a5a70=a0_0x4851ee;let _0x2ea353=_0x5a8b47[_0x5a5a70(0x3bf)];if(_0x5524c2['chatLog']&&_0x5524c2[_0x5a5a70(0x64a)][_0x5a5a70(0x17d)]){let _0xd3d132=_0x5524c2[_0x5a5a70(0x64a)][_0x5a5a70(0x17d)]['filter'](_0x21be9e=>String(_0x21be9e[_0x5a5a70(0x122)])===String(_0x2ea353))[_0x5a5a70(0x34d)]();if(_0xd3d132&&_0xd3d132[_0x5a5a70(0x44b)]&&_0x5a8b47['stopIfLastReturnedError'])return _0x5524c2[_0x5a5a70(0x517)]='closed',await this[_0x5a5a70(0x5bf)](_0x5524c2),null;}if(_0x5a8b47[_0x5a5a70(0x620)]===_0x5a5a70(0x58b)&&_0x5a8b47[_0x5a5a70(0x58b)][_0x5a5a70(0x638)]===_0x5a5a70(0x1ce)&&_0x5524c2[_0x5a5a70(0x3ae)])return _0x5524c2[_0x5a5a70(0x64a)][_0x5a5a70(0x2c7)]=_0x2ea353,await this[_0x5a5a70(0x5bf)](_0x5524c2),null;let _0x460e54=await this['NextBlock'](_0x5524c2);if(_0x5524c2[_0x5a5a70(0x64a)]&&_0x5524c2[_0x5a5a70(0x64a)][_0x5a5a70(0x17d)]){let _0x59d6f6=_0x5524c2[_0x5a5a70(0x64a)]['blockLogs']['filter'](_0x1ed4a2=>String(_0x1ed4a2[_0x5a5a70(0x122)])===String(_0x2ea353))['length'];if(_0x5a8b47[_0x5a5a70(0x296)]!==void 0x0&&_0x59d6f6>=_0x5a8b47[_0x5a5a70(0x296)]){let _0x4c5da1=Date[_0x5a5a70(0x4b8)](),_0xc86990=_0x5a8b47[_0x5a5a70(0x5d0)]??0xa;isNaN(_0xc86990)&&(_0xc86990=0xa);let _0x1ebda6=_0x4c5da1+_0xc86990*0x3c*0x3e8,_0x324a73={'newStoppedUntil':_0x1ebda6};return this[_0x5a5a70(0x58f)](_0x5524c2,_0x1ebda6),this[_0x5a5a70(0x138)](_0x5524c2,_0x5a8b47,_0x324a73,!0x0),null;}}_0x460e54&&_0x460e54[_0x5a5a70(0x620)]!==_0x5a5a70(0x502)&&await this[_0x5a5a70(0x3df)](_0x5524c2,_0x460e54,_0x5524c2[_0x5a5a70(0x53a)]),_0x460e54||await this['saveConversationToDatabase'](_0x5524c2),_0x460e54&&_0x460e54[_0x5a5a70(0x620)]===_0x5a5a70(0x502)&&(_0x5524c2[_0x5a5a70(0x64a)][_0x5a5a70(0x2c7)]=_0x2ea353,await this[_0x5a5a70(0x5bf)](_0x5524c2));}async[a0_0x4851ee(0x3df)](_0x36da41,_0x1bcf8a,_0x400a73){const _0xbada7e=a0_0x4851ee;try{let _0x4018d3=_0x1bcf8a['type'];this[_0xbada7e(0x5e8)][_0xbada7e(0x1bc)](this[_0xbada7e(0x567)]+'\x20('+this[_0xbada7e(0x5a3)]['wuid']+_0xbada7e(0x10b)+_0x4018d3);let _0x23670b={'uazapi':()=>this[_0xbada7e(0x12d)](_0x36da41,_0x1bcf8a,_0x400a73),'save':()=>this[_0xbada7e(0x353)](_0x36da41,_0x1bcf8a),'stop':()=>this[_0xbada7e(0x48d)](_0x36da41,_0x1bcf8a),'condition':()=>this[_0xbada7e(0x2d7)](_0x36da41,_0x1bcf8a),'varedit':()=>this['processvaredits'](_0x36da41,_0x1bcf8a),'apirequest':()=>this['processApiRequest'](_0x36da41,_0x1bcf8a),'goToFlow':()=>this[_0xbada7e(0x233)](_0x36da41,_0x1bcf8a)}[_0x4018d3];_0x23670b&&await _0x23670b();}catch(_0x36c51e){this[_0xbada7e(0x5e8)][_0xbada7e(0x44b)](this[_0xbada7e(0x567)]+'\x20('+this[_0xbada7e(0x5a3)][_0xbada7e(0x5fe)]+_0xbada7e(0x5d4)+_0x36c51e);}}async[a0_0x4851ee(0x233)](_0x1f0ea8,_0x1a2e76){const _0x461d73=a0_0x4851ee;if(this[_0x461d73(0x5e8)][_0x461d73(0x1bc)](this[_0x461d73(0x567)]+'\x20('+this[_0x461d73(0x5a3)]['wuid']+_0x461d73(0xe8)),!_0x1f0ea8||!_0x1a2e76)return this[_0x461d73(0x5e8)][_0x461d73(0x44b)](this[_0x461d73(0x567)]+'\x20('+this[_0x461d73(0x5a3)][_0x461d73(0x5fe)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;await this[_0x461d73(0x138)](_0x1f0ea8,_0x1a2e76,{},!0x0,!0x0),console['log'](_0x461d73(0x580)),console[_0x461d73(0x2c6)](_0x1a2e76);let _0x5c28f0=_0x1a2e76[_0x461d73(0x26f)];console[_0x461d73(0x2c6)](_0x461d73(0x212),_0x5c28f0),_0x1f0ea8=await this['createConversationforgoToFlow'](_0x5c28f0,_0x1f0ea8[_0x461d73(0x53a)],_0x1f0ea8['chatLog'][_0x461d73(0x3eb)]),this[_0x461d73(0x5e8)][_0x461d73(0x1bc)](this[_0x461d73(0x567)]+'\x20('+this[_0x461d73(0x5a3)][_0x461d73(0x5fe)]+_0x461d73(0x59b));let _0x66f0f1=await this[_0x461d73(0x195)](_0x1f0ea8);_0x66f0f1&&await this[_0x461d73(0x3df)](_0x1f0ea8,_0x66f0f1,_0x1f0ea8[_0x461d73(0x53a)]);}async[a0_0x4851ee(0x4bc)](_0x12e203,_0x533d95,_0x2d8b86){const _0x399000=a0_0x4851ee;this[_0x399000(0x5e8)]['verbose'](this[_0x399000(0x567)]+'\x20('+this[_0x399000(0x5a3)][_0x399000(0x5fe)]+_0x399000(0x51e));try{if(_0x12e203=await D['findOne']({'owner':this[_0x399000(0x5a3)][_0x399000(0x5fe)],'name':_0x12e203}),!_0x12e203)return this['logger']['error'](this[_0x399000(0x567)]+'\x20('+this[_0x399000(0x5a3)][_0x399000(0x5fe)]+_0x399000(0x1ba)),null;let _0x394595=require(_0x399000(0x541))[_0x399000(0x38b)],_0x49f108=Date[_0x399000(0x4b8)](),_0x3ae81d=_0x399000(0x46b),_0x29d120={},_0x17eedb={},_0x50d023={..._0x12e203['_doc'],'chatLog':null},_0x217068={'lastReceivedMessage':_0x29d120,'lastSendMessage':_0x17eedb,'lastBlockId':_0x3ae81d,'lastCondition':!0x0,'realVariables':_0x2d8b86};_0x50d023[_0x399000(0x64a)]=_0x217068,_0x50d023[_0x399000(0x64a)]['realVariables']={..._0x2d8b86},delete _0x50d023[_0x399000(0x3bf)],_0x50d023[_0x399000(0x3bf)]=new _0x394595(),_0x50d023[_0x399000(0x3b2)]=_0x49f108,_0x50d023[_0x399000(0x517)]=_0x399000(0x465),_0x50d023[_0x399000(0x53a)]=_0x533d95;let _0x57cd33=await F['create'](_0x50d023);return this[_0x399000(0x5e8)][_0x399000(0x1bc)](this[_0x399000(0x567)]+'\x20('+this[_0x399000(0x5a3)]['wuid']+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x57cd33?_0x50d023:null;}catch(_0x29f959){throw this[_0x399000(0x5e8)][_0x399000(0x44b)](this['instanceName']+'\x20('+this[_0x399000(0x5a3)][_0x399000(0x5fe)]+_0x399000(0x247)+_0x29f959),new g(_0x29f959[_0x399000(0x5be)]);}}async[a0_0x4851ee(0x447)](_0x9ba1e2,_0x5d8b7c){const _0x51d3de=a0_0x4851ee;let _0xa9b68,_0x1ef557;try{let _0x4a2a6c=_0x5d8b7c[_0x51d3de(0x464)];if(!_0x4a2a6c||!_0x4a2a6c['url']||!_0x4a2a6c[_0x51d3de(0x31b)])throw new Error('Falta\x20informação\x20para\x20a\x20chamada\x20API');let _0x4eba5b={'method':_0x4a2a6c[_0x51d3de(0x31b)],'url':_0x4a2a6c[_0x51d3de(0x30c)],'headers':_0x4a2a6c[_0x51d3de(0x354)]||{},'data':_0x4a2a6c['body']||{}};_0xa9b68=(await(0x0,ue[_0x51d3de(0x481)])(_0x4eba5b))[_0x51d3de(0x468)];let _0x215175=_0x9ba1e2['chatLog'][_0x51d3de(0x3eb)],_0xe5a049=this[_0x51d3de(0x395)](_0xa9b68);return Object[_0x51d3de(0x154)](_0x215175,_0xe5a049),_0x9ba1e2[_0x51d3de(0x64a)][_0x51d3de(0x3eb)]=_0x215175,_0x1ef557={'error':!0x1,'apiResponse':_0xa9b68},this[_0x51d3de(0x138)](_0x9ba1e2,_0x5d8b7c,_0x1ef557),_0xa9b68;}catch(_0x537a29){console[_0x51d3de(0x44b)](_0x51d3de(0x346),_0x537a29),_0x537a29[_0x51d3de(0x97)]&&(_0xa9b68=_0x537a29[_0x51d3de(0x97)]['data']);let _0x55aa54=_0x9ba1e2['chatLog']['realVariables'],_0x4e6d52=this[_0x51d3de(0x395)](_0xa9b68);return Object[_0x51d3de(0x154)](_0x55aa54,_0x4e6d52),_0x9ba1e2[_0x51d3de(0x64a)][_0x51d3de(0x3eb)]=_0x55aa54,_0x1ef557={'error':!0x0,'errorLog':_0x537a29[_0x51d3de(0x409)](),'apiResponse':_0xa9b68},this[_0x51d3de(0x138)](_0x9ba1e2,_0x5d8b7c,_0x1ef557),{'success':!0x1};}}['applyvaredit'](_0x555316,_0x27e054){const _0x314958=a0_0x4851ee;let _0x5cfd1c=_0x51dbd1=>{const _0x1b4a2c=a0_0x15b7;let _0x34de7b=_0x51dbd1[_0x1b4a2c(0x582)](/[^0-9.,-]/g,'')[_0x1b4a2c(0x582)](',','.'),_0x322f26=parseFloat(_0x34de7b);return isNaN(_0x322f26)?null:_0x322f26;},_0x3e9af4=_0x27e054[_0x314958(0x173)],_0x2fdd8d=_0x27e054['secondValue'];typeof _0x3e9af4=='string'&&(_0x3e9af4=this[_0x314958(0x217)](_0x3e9af4,_0x555316[_0x314958(0x64a)][_0x314958(0x3eb)])??''),typeof _0x2fdd8d=='string'&&(_0x2fdd8d=this[_0x314958(0x217)](_0x2fdd8d,_0x555316[_0x314958(0x64a)][_0x314958(0x3eb)])??'');let _0x568aa9=null;if(!_0x3e9af4||!_0x27e054[_0x314958(0x636)])return null;switch(this[_0x314958(0x5e8)][_0x314958(0x1bc)](this['instanceName']+'\x20('+this[_0x314958(0x5a3)][_0x314958(0x5fe)]+_0x314958(0xe0)+_0x3e9af4),this['logger'][_0x314958(0x1bc)](this[_0x314958(0x567)]+'\x20('+this[_0x314958(0x5a3)][_0x314958(0x5fe)]+'):\x20newSecondValue\x20após\x20replaceVariables:'+_0x2fdd8d),_0x27e054['editOperator']){case'+':case'-':case'*':case'/':let _0x16365f=_0x5cfd1c(_0x3e9af4),_0x54f992=_0x5cfd1c(_0x2fdd8d||'0');if(_0x16365f===null)return null;switch(_0x27e054['editOperator']){case'+':_0x568aa9=_0x16365f+(_0x54f992??0x0);break;case'-':_0x568aa9=_0x16365f-(_0x54f992??0x0);break;case'*':_0x568aa9=_0x16365f*(_0x54f992??0x1);break;case'/':_0x54f992!==0x0&&(_0x568aa9=_0x16365f/(_0x54f992??0x1));break;}break;case _0x314958(0x165):case'findAndReplaceRegex':let _0xf2e385=_0x2fdd8d,_0xfc4850=_0x27e054['replaceValue'];if(typeof _0xfc4850==_0x314958(0x579)&&(_0xfc4850=this['replaceVariables'](_0xfc4850,_0x555316[_0x314958(0x64a)][_0x314958(0x3eb)])??''),_0xf2e385&&_0xfc4850!==void 0x0){let _0x4f30e8=_0x27e054[_0x314958(0x636)]===_0x314958(0x165)?new RegExp(_0xf2e385[_0x314958(0x582)](/[-\/\\^$*+?.()|[\]{}]/g,'\x5c$&'),'g'):new RegExp(_0xf2e385,'g');_0x568aa9=_0x3e9af4[_0x314958(0x582)](_0x4f30e8,_0xfc4850);}else console[_0x314958(0x171)](_0x314958(0x1a9));break;case'setNewValue':_0x568aa9=_0x2fdd8d;break;case'extractRegex':let _0x1bce73=_0x3e9af4['match'](new RegExp(_0x2fdd8d||''));_0x568aa9=_0x1bce73?_0x1bce73[0x0]:'';break;case'truncatedto':_0x568aa9=_0x3e9af4[_0x314958(0x3c9)](0x0,parseInt(_0x2fdd8d||'0'));break;case _0x314958(0x2f4):let _0x18ebc3=parseInt(_0x2fdd8d||'0');_0x568aa9=_0x3e9af4[_0x314958(0x3c9)](_0x3e9af4[_0x314958(0x291)]-_0x18ebc3);break;case _0x314958(0x2e7):let _0x1e344b=_0x5cfd1c(_0x3e9af4),_0xe4b5e9=parseInt(_0x2fdd8d||'0');_0xe4b5e9=Math['abs'](_0xe4b5e9),_0x1e344b!==null?_0x568aa9=_0x1e344b[_0x314958(0x405)]('pt-BR',{'minimumFractionDigits':_0xe4b5e9,'maximumFractionDigits':_0xe4b5e9}):(console[_0x314958(0x171)]('Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20'+_0x3e9af4),_0x568aa9=null);break;case'toBRL':let _0x25a358=_0x5cfd1c(_0x3e9af4);_0x25a358!==null?_0x568aa9=_0x25a358['toLocaleString'](_0x314958(0xef),{'style':_0x314958(0x618),'currency':_0x314958(0x18c)}):(console[_0x314958(0x171)](_0x314958(0x3f9)+_0x3e9af4),_0x568aa9=null);break;case _0x314958(0x368):_0x568aa9=_0x3e9af4[_0x314958(0x5fa)]();break;case _0x314958(0x22d):_0x568aa9=_0x3e9af4['toLowerCase']();break;case _0x314958(0x29b):_0x568aa9=_0x3e9af4[_0x314958(0x4dd)]('\x20')[_0x314958(0x51a)](_0x10d39d=>_0x10d39d[_0x314958(0x589)](0x0)['toUpperCase']()+_0x10d39d['slice'](0x1)['toLowerCase']())[_0x314958(0x273)]('\x20');break;case'trimmed':_0x568aa9=_0x3e9af4[_0x314958(0x5b9)]();break;default:_0x568aa9=_0x3e9af4;}return _0x568aa9!==null?_0x568aa9[_0x314958(0x409)]():null;}async['processvaredits'](_0x4fa3cd,_0x511eda){const _0x6f0c60=a0_0x4851ee;try{let _0xbebbfa=_0x4fa3cd['varedits']?.[_0x6f0c60(0x1a6)](_0x1dbd8c=>_0x1dbd8c[_0x6f0c60(0x122)]===_0x511eda[_0x6f0c60(0x3bf)]?.['toString']())||[],_0xdacfe9=_0x511eda[_0x6f0c60(0x2d9)],_0x20237a=null,_0x4e2d40=[],_0x5ac221=_0x4fa3cd[_0x6f0c60(0x64a)][_0x6f0c60(0x3eb)][_0xdacfe9];_0x4e2d40['push'](_0x6f0c60(0x2f3)+_0x5ac221+'\x22');for(let _0x105393 of _0xbebbfa){_0x105393[_0x6f0c60(0x173)]=_0x5ac221,_0x20237a=_0x105393[_0x6f0c60(0x173)];let _0x455dde;try{_0x455dde=this[_0x6f0c60(0x209)](_0x4fa3cd,_0x105393);}catch(_0x424e38){console['error'](_0x6f0c60(0x30b)+_0x424e38[_0x6f0c60(0x5be)]);continue;}if(_0x455dde!==null){let _0x3bbb52=_0x6f0c60(0x48c)+_0x105393[_0x6f0c60(0x636)]+'\x22',_0x125e39=[_0x6f0c60(0x3b3),'upperCase',_0x6f0c60(0x22d),_0x6f0c60(0x29b),_0x6f0c60(0x2df)];_0x105393[_0x6f0c60(0x636)]===_0x6f0c60(0x165)||_0x105393[_0x6f0c60(0x636)]===_0x6f0c60(0x5f8)?_0x3bbb52+=',\x20valor\x20a\x20encontrar:\x20\x22'+_0x105393[_0x6f0c60(0x32a)]+_0x6f0c60(0xdc)+_0x105393[_0x6f0c60(0x337)]+'\x22':!_0x125e39['includes'](_0x105393['editOperator'])&&_0x105393[_0x6f0c60(0x32a)]!==null&&_0x105393[_0x6f0c60(0x32a)]!==void 0x0&&(_0x3bbb52+=',\x20valor\x20passado:\x20\x22'+_0x105393[_0x6f0c60(0x32a)]+'\x22'),_0x3bbb52+=_0x6f0c60(0x2ed)+_0x455dde+'.',_0x4e2d40['push'](_0x3bbb52);}_0x455dde!==null&&(_0x5ac221=_0x455dde);}if(_0x4fa3cd[_0x6f0c60(0x64a)]['realVariables']&&_0x511eda[_0x6f0c60(0x2d9)]){_0x4fa3cd['chatLog'][_0x6f0c60(0x3eb)][_0x511eda['saveVariable']]=_0x5ac221;let _0x10419a={'variable':_0x511eda[_0x6f0c60(0x2d9)],'oldValue':_0x20237a,'newValue':_0x5ac221,'moreLogs':_0x4e2d40};try{this[_0x6f0c60(0x138)](_0x4fa3cd,_0x511eda,_0x10419a);}catch(_0x3b0bc3){console['error'](_0x6f0c60(0x538)+_0x3b0bc3[_0x6f0c60(0x5be)]);}}return _0xdacfe9;}catch(_0x167814){return console['error']('Erro\x20inesperado\x20em\x20processvaredits:\x20'+_0x167814[_0x6f0c60(0x5be)]),null;}}async[a0_0x4851ee(0x2d7)](_0x1152e3,_0x1b6d48){const _0x2d0819=a0_0x4851ee;try{let _0x4835eb=[],_0x3b3f1f=_0x1152e3[_0x2d0819(0x3e8)]['filter'](_0x5548e5=>_0x5548e5[_0x2d0819(0x122)]===_0x1b6d48[_0x2d0819(0x3bf)][_0x2d0819(0x409)]()),_0x1ea9f2=null,_0x4cf794=!0x1;for(let _0x563f03 of _0x3b3f1f){let _0x47442e=this[_0x2d0819(0x4e4)](_0x1152e3,_0x563f03);_0x4835eb[_0x2d0819(0x53b)](_0x2d0819(0x504)+_0x563f03[_0x2d0819(0x173)]+',\x20Comparador:\x20'+_0x563f03[_0x2d0819(0x4fd)]+_0x2d0819(0x1cd)+_0x563f03[_0x2d0819(0x32a)]+_0x2d0819(0x120)+_0x47442e),_0x1ea9f2===null?_0x1ea9f2=_0x47442e:_0x563f03[_0x2d0819(0x451)]==='and'?(_0x1ea9f2=_0x1ea9f2&&_0x47442e,_0x47442e||(_0x4cf794=!0x0)):_0x563f03['OrAnd']==='or'&&(_0x4cf794||(_0x1ea9f2=_0x1ea9f2||_0x47442e));}_0x1ea9f2===null&&(_0x1ea9f2=!0x0);let _0x43d4be={'moreLogs':_0x4835eb};_0x1ea9f2?(_0x1152e3[_0x2d0819(0x64a)][_0x2d0819(0x4e7)]=!0x0,this['updateConversation'](_0x1152e3,_0x1b6d48,_0x43d4be)):(_0x1152e3[_0x2d0819(0x64a)][_0x2d0819(0x4e7)]=!0x1,this[_0x2d0819(0x138)](_0x1152e3,_0x1b6d48,_0x43d4be));}catch(_0x3b7193){this[_0x2d0819(0x5e8)][_0x2d0819(0x44b)](this[_0x2d0819(0x567)]+'\x20('+this['instance'][_0x2d0819(0x5fe)]+'):\x20Error\x20processing\x20conditions:\x20'+_0x3b7193);}}[a0_0x4851ee(0x4e4)](_0x3178a3,_0x2e94c4){const _0x552464=a0_0x4851ee;let _0x2bba50=_0x2e94c4['firstValue'],_0x61788f=_0x2e94c4[_0x552464(0x32a)];typeof _0x2bba50==_0x552464(0x579)&&(_0x2bba50=this['replaceVariables'](_0x2bba50,_0x3178a3['chatLog']['realVariables'])??''),typeof _0x61788f==_0x552464(0x579)&&(_0x61788f=this['replaceVariables'](_0x61788f,_0x3178a3[_0x552464(0x64a)]['realVariables'])??'');try{switch(_0x2e94c4[_0x552464(0x4fd)]){case'equal':return _0x2bba50===_0x61788f;case _0x552464(0x42e):return _0x2bba50!==_0x61788f;case _0x552464(0x60d):return _0x2bba50['includes'](_0x61788f);case _0x552464(0xad):return!_0x2bba50[_0x552464(0x5a9)](_0x61788f);case _0x552464(0x54f):return parseFloat(_0x2bba50)>parseFloat(_0x61788f);case _0x552464(0x245):return parseFloat(_0x2bba50)<parseFloat(_0x61788f);case _0x552464(0x321):return _0x2bba50!=='';case _0x552464(0x607):return _0x2bba50==='';case _0x552464(0x365):return new RegExp(_0x61788f)[_0x552464(0x3e2)](_0x2bba50);case _0x552464(0x551):return!new RegExp(_0x61788f)[_0x552464(0x3e2)](_0x2bba50);default:return!0x1;}}catch(_0x3ef7f9){return console['error'](_0x552464(0x42c)+_0x3ef7f9),!0x1;}}[a0_0x4851ee(0x17b)](_0x34e62f){const _0x10501a=a0_0x4851ee;let _0x18b4a1=!0x0,_0x3a9d55=null;for(let _0x3739cf of _0x34e62f){let _0x41d7eb=this[_0x10501a(0x248)](_0x3739cf);if(_0x3a9d55==='or'&&_0x41d7eb){_0x18b4a1=!0x0;break;}if(_0x3a9d55===_0x10501a(0x50e)&&!_0x41d7eb){_0x18b4a1=!0x1;break;}_0x3a9d55=_0x3739cf[_0x10501a(0x451)];}return _0x18b4a1;}['evaluateConditionTest'](_0x439996){const _0x2d9ce9=a0_0x4851ee;let _0x32b928=_0x439996[_0x2d9ce9(0x173)],_0x1a3fc6=_0x439996[_0x2d9ce9(0x32a)];try{switch(_0x439996[_0x2d9ce9(0x4fd)]){case _0x2d9ce9(0x263):return String(_0x32b928)===String(_0x1a3fc6);case _0x2d9ce9(0x42e):return String(_0x32b928)!==String(_0x1a3fc6);case _0x2d9ce9(0x60d):return String(_0x32b928)[_0x2d9ce9(0x5a9)](String(_0x1a3fc6));case'notContains':return!String(_0x32b928)[_0x2d9ce9(0x5a9)](String(_0x1a3fc6));case _0x2d9ce9(0x54f):return parseFloat(String(_0x32b928))>parseFloat(String(_0x1a3fc6));case _0x2d9ce9(0x245):return parseFloat(String(_0x32b928))<parseFloat(String(_0x1a3fc6));case _0x2d9ce9(0x321):return String(_0x32b928)!=='';case _0x2d9ce9(0x607):return String(_0x32b928)==='';case _0x2d9ce9(0x365):return new RegExp(String(_0x1a3fc6))['test'](String(_0x32b928));case _0x2d9ce9(0x551):return!new RegExp(String(_0x1a3fc6))[_0x2d9ce9(0x3e2)](String(_0x32b928));default:return!0x1;}}catch(_0x201d36){return console[_0x2d9ce9(0x44b)]('Erro\x20ao\x20avaliar\x20a\x20condição:\x20'+_0x201d36),!0x1;}}async[a0_0x4851ee(0x353)](_0x4275f7,_0x1e572b){const _0x11b713=a0_0x4851ee;if(this[_0x11b713(0x5e8)][_0x11b713(0x1bc)](this[_0x11b713(0x567)]+'\x20('+this[_0x11b713(0x5a3)][_0x11b713(0x5fe)]+_0x11b713(0x63f)),!_0x4275f7||!_0x1e572b)return this[_0x11b713(0x5e8)][_0x11b713(0x44b)](this[_0x11b713(0x567)]+'\x20('+this[_0x11b713(0x5a3)][_0x11b713(0x5fe)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x3ebc86=_0x1e572b[_0x11b713(0x2d9)],_0x77bdaa=_0x4275f7['chatLog'][_0x11b713(0x41b)]['text']||_0x4275f7[_0x11b713(0x64a)][_0x11b713(0x41b)]['caption']||_0x4275f7[_0x11b713(0x64a)][_0x11b713(0x41b)]['vote'];try{_0x4275f7[_0x11b713(0x64a)][_0x11b713(0x3eb)]||(_0x4275f7[_0x11b713(0x64a)]['realVariables']={});let _0x4cc7a4=_0x4275f7['chatLog'][_0x11b713(0x3eb)][_0x3ebc86];_0x4275f7[_0x11b713(0x64a)][_0x11b713(0x3eb)][_0x3ebc86]=_0x77bdaa;let _0x576a69={'variable':_0x3ebc86,'oldValue':_0x4cc7a4,'newValue':_0x77bdaa};this[_0x11b713(0x138)](_0x4275f7,_0x1e572b,_0x576a69),this[_0x11b713(0x5e8)][_0x11b713(0x1bc)](this[_0x11b713(0x567)]+'\x20('+this[_0x11b713(0x5a3)][_0x11b713(0x5fe)]+_0x11b713(0x19b));}catch(_0x3c8a73){let _0x2c6a5d={'error':!0x0,'errorLog':_0x3c8a73['toString']()};return this[_0x11b713(0x138)](_0x4275f7,_0x1e572b,_0x2c6a5d),this[_0x11b713(0x5e8)][_0x11b713(0x44b)](this[_0x11b713(0x567)]+'\x20('+this[_0x11b713(0x5a3)][_0x11b713(0x5fe)]+_0x11b713(0x3ef)+_0x3c8a73[_0x11b713(0x5be)]),null;}}async[a0_0x4851ee(0x48d)](_0x32a97c,_0x432e79){const _0x51ef48=a0_0x4851ee;if(this[_0x51ef48(0x5e8)][_0x51ef48(0x1bc)](this[_0x51ef48(0x567)]+'\x20('+this[_0x51ef48(0x5a3)][_0x51ef48(0x5fe)]+_0x51ef48(0x55c)),!_0x32a97c||!_0x432e79)return this[_0x51ef48(0x5e8)]['error'](this['instanceName']+'\x20('+this['instance'][_0x51ef48(0x5fe)]+_0x51ef48(0x2ca)),null;let _0x396b12=Date[_0x51ef48(0x4b8)](),_0x225748=parseInt(_0x432e79[_0x51ef48(0x126)],0xa);if(isNaN(_0x225748))return this[_0x51ef48(0x5e8)][_0x51ef48(0x44b)](this[_0x51ef48(0x567)]+'\x20('+this[_0x51ef48(0x5a3)][_0x51ef48(0x5fe)]+_0x51ef48(0x42d)),null;let _0x616124={'newStoppedUntil':_0x396b12+_0x225748*0x3c*0x3e8};return await this[_0x51ef48(0x138)](_0x32a97c,_0x432e79,_0x616124,!0x0),null;}async[a0_0x4851ee(0x12d)](_0x5fa250,_0x1d21ba,_0x2186fb){const _0x2a5858=a0_0x4851ee;try{switch(_0x1d21ba[_0x2a5858(0x58b)][_0x2a5858(0x638)]){case _0x2a5858(0x4ca):await this[_0x2a5858(0x2be)](_0x5fa250,_0x1d21ba,_0x2186fb);break;case _0x2a5858(0x526):await this['uazapiSendMedia'](_0x5fa250,_0x1d21ba,_0x2186fb);break;case _0x2a5858(0x677):await this[_0x2a5858(0x2bf)](_0x5fa250,_0x1d21ba,_0x2186fb);break;case'sendAudio':await this[_0x2a5858(0x4c0)](_0x5fa250,_0x1d21ba,_0x2186fb);break;case'sendContact':await this['uazapiSendContact'](_0x5fa250,_0x1d21ba,_0x2186fb);break;case _0x2a5858(0x1ce):await this[_0x2a5858(0x9b)](_0x5fa250,_0x1d21ba,_0x2186fb);break;case _0x2a5858(0x628):await this[_0x2a5858(0xf3)](_0x5fa250,_0x1d21ba,_0x2186fb);break;default:this[_0x2a5858(0x5e8)][_0x2a5858(0x44b)](this['instanceName']+'\x20('+this[_0x2a5858(0x5a3)]['wuid']+_0x2a5858(0x4fb)+_0x1d21ba['uazapi'][_0x2a5858(0x638)]);}}catch(_0x27dc13){this['logger'][_0x2a5858(0x44b)](this[_0x2a5858(0x567)]+'\x20('+this[_0x2a5858(0x5a3)][_0x2a5858(0x5fe)]+_0x2a5858(0x46f)+_0x27dc13);}}async[a0_0x4851ee(0x138)](_0x7b93a0,_0x83957,_0x51a320,_0x52b94a=!0x1,_0x4f72df=!0x1){const _0x3c4eb1=a0_0x4851ee;_0x7b93a0['chatLog'][_0x3c4eb1(0x17d)]||(_0x7b93a0[_0x3c4eb1(0x64a)][_0x3c4eb1(0x17d)]=[]);let _0x2becc3=(_0x7b93a0[_0x3c4eb1(0x64a)][_0x3c4eb1(0x17d)]?.['length']??0x0)+0x1,_0x29177d=_0x7b93a0['chatLog'][_0x3c4eb1(0x17d)][_0x3c4eb1(0x1a6)](_0x179574=>String(_0x179574['blockId'])===String(_0x83957[_0x3c4eb1(0x3bf)]))[_0x3c4eb1(0x291)]+0x1,_0x27abca=_0x51a320?.[_0x3c4eb1(0x383)]??Date[_0x3c4eb1(0x4b8)](),_0x54133f=_0x51a320?.[_0x3c4eb1(0x44b)]?_0x51a320[_0x3c4eb1(0x5dc)]??_0x51a320[_0x3c4eb1(0x44b)]['toString']():void 0x0,_0x1798ee={'onTime':_0x27abca,'blockId':_0x83957[_0x3c4eb1(0x3bf)],'order':_0x2becc3,'activatedCount':_0x29177d,'error':_0x51a320?.['error']??!0x1,'messageId':_0x51a320?.[_0x3c4eb1(0x161)],'apiResponse':_0x51a320?.[_0x3c4eb1(0x363)],'apiResponseString':_0x51a320?.['apiResponse']?JSON[_0x3c4eb1(0x63a)](_0x51a320?.[_0x3c4eb1(0x363)]):void 0x0,'variable':_0x51a320?.[_0x3c4eb1(0x57f)],'oldValue':_0x51a320?.[_0x3c4eb1(0x533)],'newValue':_0x51a320?.['newValue'],'newStoppedUntil':_0x51a320?.[_0x3c4eb1(0x615)],'moreLogs':_0x51a320?.['moreLogs'],'errorLog':_0x54133f};if(_0x51a320['moreLogs']&&_0x51a320[_0x3c4eb1(0x3c5)][_0x3c4eb1(0x291)]>0x0){let _0x15c9af=_0x51a320[_0x3c4eb1(0x3c5)][_0x3c4eb1(0x51a)](_0x4e266b=>this[_0x3c4eb1(0x2c8)](_0x4e266b,_0x7b93a0['chatLog'][_0x3c4eb1(0x3eb)]));_0x1798ee['moreLogs']=_0x15c9af;}_0x7b93a0['chatLog'][_0x3c4eb1(0x3eb)]||(_0x7b93a0[_0x3c4eb1(0x64a)][_0x3c4eb1(0x3eb)]={}),_0x7b93a0['chatLog'][_0x3c4eb1(0x3eb)][_0x3c4eb1(0x1f5)]=String(_0x29177d),_0x7b93a0[_0x3c4eb1(0x64a)][_0x3c4eb1(0x3eb)]['_error']=String(_0x51a320['error']??!0x1),_0x7b93a0[_0x3c4eb1(0x64a)][_0x3c4eb1(0x17d)]['push'](_0x1798ee),_0x7b93a0[_0x3c4eb1(0x64a)]['lastBlockId']=_0x83957[_0x3c4eb1(0x3bf)]['toString'](),_0x7b93a0[_0x3c4eb1(0x64a)]['lastSendMessage']&&(_0x7b93a0[_0x3c4eb1(0x64a)][_0x3c4eb1(0x399)]=_0x7b93a0[_0x3c4eb1(0x64a)][_0x3c4eb1(0x399)]),_0x7b93a0[_0x3c4eb1(0x64a)][_0x3c4eb1(0x41b)]&&(_0x7b93a0[_0x3c4eb1(0x64a)][_0x3c4eb1(0x41b)]=_0x7b93a0[_0x3c4eb1(0x64a)]['lastReceivedMessage']),_0x7b93a0['chatLog'][_0x3c4eb1(0x4e7)]&&(_0x7b93a0[_0x3c4eb1(0x64a)][_0x3c4eb1(0x4e7)]=_0x7b93a0[_0x3c4eb1(0x64a)][_0x3c4eb1(0x4e7)]),_0x4f72df&&(_0x7b93a0['status']=_0x3c4eb1(0x45e)),_0x52b94a?this[_0x3c4eb1(0x5bf)](_0x7b93a0):this['goNextblock'](_0x7b93a0,_0x83957);}[a0_0x4851ee(0x2c8)](_0x41b645,_0x5593fe){const _0x1f96ca=a0_0x4851ee;return _0x41b645[_0x1f96ca(0x582)](/\{\{([^}]+)\}\}/g,(_0x4f70eb,_0x315ae6)=>_0x5593fe[_0x315ae6]?'{{'+_0x315ae6+_0x1f96ca(0x11e)+_0x5593fe[_0x315ae6]+'\x22':'{{'+_0x315ae6+_0x1f96ca(0x2ba));}async[a0_0x4851ee(0x5bf)](_0x3a8692){const _0x2eca91=a0_0x4851ee;try{let _0x564cc7=Object['entries'](_0x3a8692['chatLog']['realVariables'])[_0x2eca91(0x51a)](([_0x520027,_0x1960f8])=>({'name':_0x520027,'value':_0x1960f8})),_0x1f808e=await F[_0x2eca91(0x5d7)]({'_id':_0x3a8692['_id']},{'$set':{'chatLog.lastBlockId':_0x3a8692['chatLog'][_0x2eca91(0x2c7)],'blocks':_0x3a8692[_0x2eca91(0xc4)],'chatLog.lastSendMessage':_0x3a8692[_0x2eca91(0x64a)][_0x2eca91(0x399)],'chatLog.lastReceivedMessage':_0x3a8692['chatLog'][_0x2eca91(0x41b)],'chatLog.lastCondition':_0x3a8692[_0x2eca91(0x64a)][_0x2eca91(0x4e7)],'chatLog.chatVariables':_0x564cc7,'chatLog.realVariables':_0x3a8692['chatLog'][_0x2eca91(0x3eb)],'status':_0x3a8692['status'],'chatLog.blockLogs':_0x3a8692[_0x2eca91(0x64a)][_0x2eca91(0x17d)],'waitingPoll_id':_0x3a8692[_0x2eca91(0x3ae)],'waitingPoll_name':_0x3a8692[_0x2eca91(0x67a)],'waitingPoll_replyOptions':_0x3a8692[_0x2eca91(0x64d)]}},{'new':!0x0});if(_0x1f808e){this[_0x2eca91(0x5e8)][_0x2eca91(0x1bc)](this[_0x2eca91(0x567)]+'\x20('+this[_0x2eca91(0x5a3)][_0x2eca91(0x5fe)]+'):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20'+_0x1f808e['_id']);try{let _0x5d05d6=['nome',_0x2eca91(0x64e),'email',_0x2eca91(0x431),_0x2eca91(0x517),_0x2eca91(0x2ea),_0x2eca91(0x20d),'tags'];if(!this[_0x2eca91(0x34e)]&&(await this[_0x2eca91(0x2e8)](),!this[_0x2eca91(0x34e)]))throw new Error(_0x2eca91(0x5fb));let _0x5b35a6=this['AutomateSystem']?.[_0x2eca91(0xeb)]['map'](_0x409404=>_0x409404[_0x2eca91(0x44c)]),_0x1e43e1={};Object['entries'](_0x3a8692['chatLog'][_0x2eca91(0x3eb)])[_0x2eca91(0x386)](([_0x34dba8,_0x309824])=>{const _0x2f3ac1=_0x2eca91;_0x5d05d6[_0x2f3ac1(0x5a9)](_0x34dba8)&&(_0x34dba8===_0x2f3ac1(0x4a2)&&typeof _0x309824==_0x2f3ac1(0x579)?_0x1e43e1[_0x34dba8]=_0x309824[_0x2f3ac1(0x4dd)](',')['map'](_0x294b34=>_0x294b34[_0x2f3ac1(0x5b9)]())[_0x2f3ac1(0x1a6)](_0x1203c6=>_0x1203c6!==''):_0x1e43e1[_0x34dba8]=_0x309824);});let _0x49e4d5=_0x3a8692[_0x2eca91(0x64a)][_0x2eca91(0x17d)][_0x3a8692[_0x2eca91(0x64a)][_0x2eca91(0x17d)]['length']-0x1];if(_0x49e4d5){let _0x240803=_0x49e4d5[_0x2eca91(0x615)];_0x240803!==void 0x0&&(_0x1e43e1[_0x2eca91(0x45f)]=_0x240803[_0x2eca91(0x409)]());}let _0x5dd821=_0x564cc7[_0x2eca91(0x1a6)](_0x1f04d5=>_0x5b35a6[_0x2eca91(0x5a9)](_0x1f04d5['name']));this[_0x2eca91(0x5e8)][_0x2eca91(0x1bc)](this['instanceName']+'\x20('+this[_0x2eca91(0x5a3)][_0x2eca91(0x5fe)]+'):\x20leadInfoVariables'),this['logger'][_0x2eca91(0x1bc)](_0x1e43e1),this[_0x2eca91(0x5e8)][_0x2eca91(0x1bc)](this['instanceName']+'\x20('+this[_0x2eca91(0x5a3)][_0x2eca91(0x5fe)]+'):\x20customFieldVariables'),this[_0x2eca91(0x5e8)]['verbose'](_0x5dd821);let _0x332d1d=_0x5dd821[_0x2eca91(0x51a)](_0x505d29=>{const _0x4e39ea=_0x2eca91;let _0x1b660b=this[_0x4e39ea(0x34e)]?.[_0x4e39ea(0xeb)][_0x4e39ea(0x487)](_0x5952f5=>_0x5952f5[_0x4e39ea(0x44c)]===_0x505d29['name']);if(!_0x1b660b)throw new Error(_0x4e39ea(0x555)+_0x505d29['name']);return{'_id':_0x1b660b[_0x4e39ea(0x3bf)],'value':_0x505d29[_0x4e39ea(0x449)]};});this[_0x2eca91(0x5e8)][_0x2eca91(0x1bc)](this[_0x2eca91(0x567)]+'\x20('+this[_0x2eca91(0x5a3)][_0x2eca91(0x5fe)]+'):\x20transformedCustomFieldVariables'),this[_0x2eca91(0x5e8)][_0x2eca91(0x1bc)](_0x332d1d),await this[_0x2eca91(0x2b9)](_0x3a8692[_0x2eca91(0x53a)],_0x1e43e1,_0x332d1d);}catch(_0x5b8938){this[_0x2eca91(0x5e8)]['error'](this[_0x2eca91(0x567)]+'\x20('+this['instance']['wuid']+_0x2eca91(0x201)+JSON['stringify'](_0x5b8938));}}else this[_0x2eca91(0x5e8)][_0x2eca91(0x44b)](this[_0x2eca91(0x567)]+'\x20('+this[_0x2eca91(0x5a3)][_0x2eca91(0x5fe)]+_0x2eca91(0x2dc));}catch(_0x298152){this['logger'][_0x2eca91(0x44b)](this['instanceName']+'\x20('+this[_0x2eca91(0x5a3)][_0x2eca91(0x5fe)]+_0x2eca91(0x5a5)+JSON[_0x2eca91(0x63a)](_0x298152));}}async['saveChatVariables'](_0x14c082,_0x1cb18b,_0x1d1a44){const _0x173c85=a0_0x4851ee;try{let _0x9887c={'leadInfo.leadnome':_0x1cb18b['nome'],'leadInfo.nomecompleto':_0x1cb18b[_0x173c85(0x64e)],'leadInfo.email':_0x1cb18b['email'],'leadInfo.cpf':_0x1cb18b[_0x173c85(0x431)],'leadInfo.status':_0x1cb18b[_0x173c85(0x517)],'leadInfo.notas':_0x1cb18b[_0x173c85(0x2ea)],'leadInfo.responsavelid':_0x1cb18b[_0x173c85(0x20d)],'leadInfo.tags':_0x1cb18b[_0x173c85(0x4a2)],'leadInfo.customFields':_0x1d1a44};if(_0x173c85(0x45f)in _0x1cb18b){let _0x4eff16=_0x1cb18b['desativadoFluxoAte'];_0x9887c[_0x173c85(0x375)]=_0x4eff16?Number(_0x4eff16):null;}let _0x4163bf=await I[_0x173c85(0x5d7)]({'id':_0x14c082,'owner':this[_0x173c85(0x5a3)][_0x173c85(0x5fe)]},{'$set':_0x9887c},{'new':!0x0,'upsert':!0x0});_0x4163bf?(this['logger'][_0x173c85(0x1bc)](this[_0x173c85(0x567)]+'\x20('+this[_0x173c85(0x5a3)][_0x173c85(0x5fe)]+_0x173c85(0x5cb)+_0x4163bf[_0x173c85(0x3bf)]),G(this[_0x173c85(0x567)],_0x173c85(0x2a6),{'chat':_0x4163bf})):this['logger'][_0x173c85(0x44b)](this[_0x173c85(0x567)]+'\x20('+this[_0x173c85(0x5a3)][_0x173c85(0x5fe)]+'):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD');}catch(_0xeb0a26){this[_0x173c85(0x5e8)]['error'](this[_0x173c85(0x567)]+'\x20('+this[_0x173c85(0x5a3)][_0x173c85(0x5fe)]+_0x173c85(0xde)+_0xeb0a26);}}async[a0_0x4851ee(0x58f)](_0x5c02b3,_0x2073aa){const _0x24dcc5=a0_0x4851ee;this['logger'][_0x24dcc5(0x1bc)](this[_0x24dcc5(0x567)]+'\x20('+this[_0x24dcc5(0x5a3)]['wuid']+'):\x20atualização\x20chat:\x20'+_0x2073aa);try{let _0x58f264=await I[_0x24dcc5(0x5d7)]({'id':_0x5c02b3[_0x24dcc5(0x53a)],'owner':_0x5c02b3[_0x24dcc5(0x101)]},{'$set':{'leadInfo.desativadoFluxoAte':_0x2073aa}},{'new':!0x0});this['logger'][_0x24dcc5(0x1bc)](this[_0x24dcc5(0x567)]+'\x20('+this[_0x24dcc5(0x5a3)][_0x24dcc5(0x5fe)]+_0x24dcc5(0x316)+_0x5c02b3[_0x24dcc5(0x3bf)]),this[_0x24dcc5(0x5e8)][_0x24dcc5(0x1bc)](this[_0x24dcc5(0x567)]+'\x20('+this['instance'][_0x24dcc5(0x5fe)]+_0x24dcc5(0x610)+JSON[_0x24dcc5(0x63a)](_0x58f264,null,0x2)),_0x58f264&&G(this[_0x24dcc5(0x567)],'chats',{'chat':_0x58f264});}catch(_0x1f5316){this[_0x24dcc5(0x5e8)][_0x24dcc5(0x44b)](this[_0x24dcc5(0x567)]+'\x20('+this[_0x24dcc5(0x5a3)][_0x24dcc5(0x5fe)]+_0x24dcc5(0xf0)+JSON[_0x24dcc5(0x63a)](_0x1f5316));}}async[a0_0x4851ee(0x57b)](_0x9e449,_0x5092eb){const _0x10455a=a0_0x4851ee;try{this[_0x10455a(0x5e8)][_0x10455a(0x1bc)](this[_0x10455a(0x567)]+'\x20('+this[_0x10455a(0x5a3)][_0x10455a(0x5fe)]+_0x10455a(0x4f8));let _0x3ff6bc=_0x5092eb[_0x10455a(0x582)](/\D/g,''),_0x532d02=await D[_0x10455a(0x3ce)]({'owner':_0x9e449,'testingWith':_0x3ff6bc});return _0x532d02||(this['logger'][_0x10455a(0x1bc)](this[_0x10455a(0x567)]+'\x20('+this[_0x10455a(0x5a3)][_0x10455a(0x5fe)]+_0x10455a(0x629)),_0x532d02=await D[_0x10455a(0x3ce)]({'owner':_0x9e449,'default':!0x0})),_0x532d02||(this['logger'][_0x10455a(0x1bc)](this[_0x10455a(0x567)]+'\x20('+this[_0x10455a(0x5a3)][_0x10455a(0x5fe)]+_0x10455a(0x29d)),null);}catch(_0x24a577){return this[_0x10455a(0x5e8)][_0x10455a(0x44b)](this[_0x10455a(0x567)]+'\x20('+this['instance'][_0x10455a(0x5fe)]+_0x10455a(0x22e)+_0x24a577),null;}}async['findConversation'](_0x52f5e3,_0x409c5e,_0x131f20){const _0x2c7869=a0_0x4851ee;try{let _0x5c60ef=!!_0x131f20['vote'],_0x1fb973=_0x131f20[_0x2c7869(0x344)],_0x35ab69=null;if(this[_0x2c7869(0x5e8)]['verbose'](this[_0x2c7869(0x567)]+'\x20('+this[_0x2c7869(0x5a3)][_0x2c7869(0x5fe)]+_0x2c7869(0x117)+_0x5c60ef+_0x2c7869(0x344)+_0x1fb973),_0x5c60ef)return this[_0x2c7869(0x5e8)]['verbose'](this[_0x2c7869(0x567)]+'\x20('+this[_0x2c7869(0x5a3)][_0x2c7869(0x5fe)]+_0x2c7869(0x23c)),_0x35ab69=await F[_0x2c7869(0x3ce)]({'owner':_0x52f5e3,'remoteJid':_0x409c5e,'waitingPoll_id':_0x1fb973}),_0x35ab69?(_0x35ab69[_0x2c7869(0x3b2)]=Date[_0x2c7869(0x4b8)](),_0x35ab69['chatLog']['lastReceivedMessage']=_0x131f20,_0x35ab69):(this[_0x2c7869(0x5e8)]['verbose'](this[_0x2c7869(0x567)]+'\x20('+this['instance'][_0x2c7869(0x5fe)]+_0x2c7869(0x124)),null);{if(this[_0x2c7869(0x5e8)][_0x2c7869(0x1bc)](this[_0x2c7869(0x567)]+'\x20('+this[_0x2c7869(0x5a3)][_0x2c7869(0x5fe)]+'):\x20'+this['instance'][_0x2c7869(0x5fe)]+'não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário'),this[_0x2c7869(0x5e8)][_0x2c7869(0x1bc)](this[_0x2c7869(0x567)]+'\x20('+this[_0x2c7869(0x5a3)][_0x2c7869(0x5fe)]+_0x2c7869(0x176)),_0x35ab69=await F[_0x2c7869(0x3ce)]({'owner':_0x52f5e3,'remoteJid':_0x409c5e,'status':_0x2c7869(0x465)}),!_0x35ab69){let _0x4e8bbb=await this[_0x2c7869(0x57b)](_0x52f5e3,_0x409c5e);if(_0x4e8bbb&&(_0x35ab69=await this[_0x2c7869(0x486)](_0x4e8bbb,_0x131f20[_0x2c7869(0x67c)],_0x131f20)),!_0x35ab69)return null;}let _0x47d24c=Date[_0x2c7869(0x4b8)](),_0x2cf92f=_0x35ab69?.[_0x2c7869(0x674)]||0x0,_0x5a0e15=_0x47d24c-_0x2cf92f*0x3c*0x3e8;if(this[_0x2c7869(0x5e8)][_0x2c7869(0x1bc)](this[_0x2c7869(0x567)]+'\x20('+this[_0x2c7869(0x5a3)][_0x2c7869(0x5fe)]+_0x2c7869(0x434)+_0x47d24c+_0x2c7869(0xe4)+_0x2cf92f+_0x2c7869(0x1cc)+_0x5a0e15),this[_0x2c7869(0x5e8)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x2c7869(0x5fe)]+_0x2c7869(0x55e)),this[_0x2c7869(0x5e8)]['verbose'](this[_0x2c7869(0x567)]+'\x20('+this[_0x2c7869(0x5a3)]['wuid']+'):\x20conversation.lastInteraction:\x20'+_0x35ab69['lastInteraction']),this['logger'][_0x2c7869(0x1bc)](this[_0x2c7869(0x567)]+'\x20('+this['instance'][_0x2c7869(0x5fe)]+_0x2c7869(0x1cb)+_0x5a0e15),_0x35ab69[_0x2c7869(0x3b2)]<_0x5a0e15){this[_0x2c7869(0x5e8)]['verbose'](this[_0x2c7869(0x567)]+'\x20('+this['instance'][_0x2c7869(0x5fe)]+'):\x20Conversa\x20está\x20expirada');let _0x28cff5=await this[_0x2c7869(0x57b)](_0x52f5e3,_0x409c5e);if(_0x28cff5===null)return null;_0x35ab69&&await F[_0x2c7869(0x3a8)]({'_id':_0x35ab69['_id']},{'status':_0x2c7869(0x45e)}),_0x35ab69=await this['createNewConversation'](_0x28cff5,_0x131f20['key'],_0x131f20);}return _0x35ab69[_0x2c7869(0x3b2)]=_0x47d24c,_0x35ab69['chatLog'][_0x2c7869(0x41b)]=_0x131f20,_0x35ab69;}}catch(_0x581183){return this['logger'][_0x2c7869(0x44b)](this['instanceName']+'\x20('+this[_0x2c7869(0x5a3)][_0x2c7869(0x5fe)]+_0x2c7869(0x20e)+_0x581183),null;}}async['createNewConversation'](_0x4bbc09,_0x220511,_0x4c0380){const _0x4d9c85=a0_0x4851ee;this[_0x4d9c85(0x5e8)]['verbose'](this[_0x4d9c85(0x567)]+'\x20('+this[_0x4d9c85(0x5a3)][_0x4d9c85(0x5fe)]+'):\x20Criando\x20nova\x20conversa');try{let _0x70c38=require(_0x4d9c85(0x541))['ObjectId'],_0x36c64a=Date[_0x4d9c85(0x4b8)](),_0x1b1c14='start',_0x167cf0=_0x220511[_0x4d9c85(0x267)]?null:_0x4c0380,_0x18d926=_0x220511[_0x4d9c85(0x267)]?_0x4c0380:null,_0x3260f0=_0x220511[_0x4d9c85(0x53a)];await this[_0x4d9c85(0x480)](_0x3260f0);let _0x2e2f44={..._0x4bbc09[_0x4d9c85(0x4c8)],'chatLog':null},_0x5bd7c4=await this[_0x4d9c85(0x4e1)](_0x2e2f44[_0x4d9c85(0x626)]),_0x1c49a3=await this[_0x4d9c85(0xf2)](_0x3260f0),_0x2ce908={..._0x5bd7c4,..._0x1c49a3,'_remoteJid':_0x3260f0},_0x512a5f={'lastReceivedMessage':_0x167cf0,'lastSendMessage':_0x18d926,'lastBlockId':_0x1b1c14,'lastCondition':!0x0,'realVariables':_0x2ce908};_0x2e2f44[_0x4d9c85(0x64a)]=_0x512a5f,delete _0x2e2f44[_0x4d9c85(0x3bf)],_0x2e2f44['_id']=new _0x70c38(),_0x2e2f44[_0x4d9c85(0x3b2)]=_0x36c64a,_0x2e2f44[_0x4d9c85(0x517)]='open',_0x2e2f44[_0x4d9c85(0x53a)]=_0x3260f0;let _0x16bda7=await F[_0x4d9c85(0x1a8)](_0x2e2f44);return this[_0x4d9c85(0x5e8)]['verbose'](this[_0x4d9c85(0x567)]+'\x20('+this[_0x4d9c85(0x5a3)]['wuid']+_0x4d9c85(0x3d7)),_0x16bda7?_0x2e2f44:null;}catch(_0xaea484){return this[_0x4d9c85(0x5e8)]['error'](this['instanceName']+'\x20('+this[_0x4d9c85(0x5a3)][_0x4d9c85(0x5fe)]+_0x4d9c85(0x247)+_0xaea484),_0xaea484;}}async[a0_0x4851ee(0x2be)](_0x1a9c14,_0x1c1ed7,_0x56f152){const _0x36d0b4=a0_0x4851ee;this['logger'][_0x36d0b4(0x1bc)](this[_0x36d0b4(0x567)]+'\x20('+this[_0x36d0b4(0x5a3)][_0x36d0b4(0x5fe)]+_0x36d0b4(0x3d6));let _0x2f4fcc={'number':_0x56f152,'options':{'delay':_0x1c1ed7[_0x36d0b4(0x58b)][_0x36d0b4(0x49c)]},'textMessage':{'text':_0x1c1ed7[_0x36d0b4(0x58b)][_0x36d0b4(0x52d)]}};try{let _0x3efbc5=await this[_0x36d0b4(0x2f5)](_0x2f4fcc);if(_0x3efbc5){let _0x34e671={'_id':_0x3efbc5[_0x36d0b4(0x67c)]['id'],'_fromMe':_0x3efbc5[_0x36d0b4(0x67c)][_0x36d0b4(0x267)],'_remoteJid':_0x3efbc5[_0x36d0b4(0x67c)][_0x36d0b4(0x53a)]};_0x1a9c14[_0x36d0b4(0x64a)][_0x36d0b4(0x2c7)]=_0x1c1ed7[_0x36d0b4(0x3bf)]['toString']();let {message_normalized:_0x22fb94}=this[_0x36d0b4(0x599)](_0x3efbc5[_0x36d0b4(0x5be)],W(_0x3efbc5[_0x36d0b4(0x5be)]),null);_0x1a9c14[_0x36d0b4(0x64a)]['lastSendMessage']=await _0x22fb94;let _0x2b9d83={'messageId':_0x3efbc5[_0x36d0b4(0x67c)]['id']},_0x3b186f=_0x1a9c14[_0x36d0b4(0x64a)][_0x36d0b4(0x3eb)];Object[_0x36d0b4(0x154)](_0x3b186f,_0x34e671),_0x1a9c14['chatLog'][_0x36d0b4(0x3eb)]=_0x3b186f,this[_0x36d0b4(0x138)](_0x1a9c14,_0x1c1ed7,_0x2b9d83);}else{let _0x55b0bf={'error':!0x0};this[_0x36d0b4(0x138)](_0x1a9c14,_0x1c1ed7,_0x55b0bf),this['logger']['error'](this[_0x36d0b4(0x567)]+'\x20('+this[_0x36d0b4(0x5a3)][_0x36d0b4(0x5fe)]+_0x36d0b4(0x59f));}}catch(_0x2e45d3){let _0x51d2ed={'error':!0x0,'errorLog':_0x2e45d3[_0x36d0b4(0x409)]()};this[_0x36d0b4(0x138)](_0x1a9c14,_0x1c1ed7,_0x51d2ed),this['logger'][_0x36d0b4(0x44b)](this[_0x36d0b4(0x567)]+'\x20('+this['instance'][_0x36d0b4(0x5fe)]+_0x36d0b4(0x102)+_0x2e45d3[_0x36d0b4(0x409)]());}}async[a0_0x4851ee(0x413)](_0x1835cf,_0x14f2e1,_0x44f5c4){const _0x114599=a0_0x4851ee;this[_0x114599(0x5e8)][_0x114599(0x1bc)](this[_0x114599(0x567)]+'\x20('+this['instance']['wuid']+_0x114599(0x3e7));let _0x96ec9b={'number':_0x44f5c4,'options':{'delay':_0x14f2e1[_0x114599(0x58b)][_0x114599(0x49c)]},'mediaMessage':{'mediatype':_0x14f2e1[_0x114599(0x58b)][_0x114599(0x2f8)],'caption':_0x14f2e1[_0x114599(0x58b)]['caption'],'media':_0x14f2e1['uazapi'][_0x114599(0x631)]}};try{let _0x2b34ee=await this[_0x114599(0x590)](_0x96ec9b);if(_0x2b34ee){let _0xc7524b={'_id':_0x2b34ee['key']['id'],'_fromMe':_0x2b34ee[_0x114599(0x67c)]['fromMe'],'_remoteJid':_0x2b34ee['key'][_0x114599(0x53a)]};_0x1835cf['chatLog'][_0x114599(0x2c7)]=_0x14f2e1[_0x114599(0x3bf)][_0x114599(0x409)]();let {message_normalized:_0x28b52a}=this['normalizeMessage'](_0x2b34ee[_0x114599(0x5be)],W(_0x2b34ee[_0x114599(0x5be)]),null);_0x1835cf[_0x114599(0x64a)][_0x114599(0x399)]=await _0x28b52a;let _0x22e2ab={'messageId':_0x2b34ee[_0x114599(0x67c)]['id']},_0x2a1d94=_0x1835cf[_0x114599(0x64a)]['realVariables'];Object[_0x114599(0x154)](_0x2a1d94,_0xc7524b),_0x1835cf['chatLog']['realVariables']=_0x2a1d94,this[_0x114599(0x138)](_0x1835cf,_0x14f2e1,_0x22e2ab);}else{let _0x1e1668={'error':!0x0};this['updateConversation'](_0x1835cf,_0x14f2e1,_0x1e1668),this[_0x114599(0x5e8)][_0x114599(0x44b)](this[_0x114599(0x567)]+'\x20('+this['instance']['wuid']+_0x114599(0x170));}}catch(_0x332918){let _0x4facbb={'error':!0x0,'errorLog':_0x332918[_0x114599(0x409)]()};this[_0x114599(0x138)](_0x1835cf,_0x14f2e1,_0x4facbb),this[_0x114599(0x5e8)][_0x114599(0x44b)](this[_0x114599(0x567)]+'\x20('+this[_0x114599(0x5a3)][_0x114599(0x5fe)]+_0x114599(0xbb)+_0x332918['toString']());}}async[a0_0x4851ee(0x2bf)](_0x8f16ed,_0x308da9,_0x5e65cc){const _0x27089e=a0_0x4851ee;this[_0x27089e(0x5e8)][_0x27089e(0x1bc)](this['instanceName']+'\x20('+this[_0x27089e(0x5a3)][_0x27089e(0x5fe)]+_0x27089e(0x290));let _0x2d36d6={'number':_0x5e65cc,'options':{'delay':_0x308da9[_0x27089e(0x58b)]['delay']},'locationMessage':{'name':_0x308da9[_0x27089e(0x58b)][_0x27089e(0x44c)],'address':_0x308da9[_0x27089e(0x58b)]['address'],'latitude':_0x308da9[_0x27089e(0x58b)][_0x27089e(0x1f1)],'longitude':_0x308da9[_0x27089e(0x58b)]['longitude']}};try{let _0x10b6ee=await this[_0x27089e(0x2a8)](_0x2d36d6);if(_0x10b6ee){let _0x31d538={'_id':_0x10b6ee[_0x27089e(0x67c)]['id'],'_fromMe':_0x10b6ee[_0x27089e(0x67c)][_0x27089e(0x267)],'_remoteJid':_0x10b6ee['key']['remoteJid']};_0x8f16ed[_0x27089e(0x64a)]['lastBlockId']=_0x308da9['_id'][_0x27089e(0x409)]();let {message_normalized:_0x5c64f9}=this[_0x27089e(0x599)](_0x10b6ee['message'],W(_0x10b6ee['message']),null);_0x8f16ed[_0x27089e(0x64a)][_0x27089e(0x399)]=await _0x5c64f9;let _0x1a50cd={'messageId':_0x10b6ee[_0x27089e(0x67c)]['id']},_0x33d9af=_0x8f16ed[_0x27089e(0x64a)]['realVariables'];Object['assign'](_0x33d9af,_0x31d538),_0x8f16ed[_0x27089e(0x64a)][_0x27089e(0x3eb)]=_0x33d9af,this[_0x27089e(0x138)](_0x8f16ed,_0x308da9,_0x1a50cd);}else{let _0x3c6e97={'error':!0x0};this[_0x27089e(0x138)](_0x8f16ed,_0x308da9,_0x3c6e97),this[_0x27089e(0x5e8)][_0x27089e(0x44b)](this['instanceName']+'\x20('+this['instance'][_0x27089e(0x5fe)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.');}}catch(_0x44175a){let _0x3afbc7={'error':!0x0,'errorLog':_0x44175a[_0x27089e(0x409)]()};this[_0x27089e(0x138)](_0x8f16ed,_0x308da9,_0x3afbc7),this['logger'][_0x27089e(0x44b)](this[_0x27089e(0x567)]+'\x20('+this[_0x27089e(0x5a3)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20'+_0x44175a[_0x27089e(0x409)]());}}async['uazapiSendAudio'](_0x54a16a,_0xb237f6,_0x141aa9){const _0x39d206=a0_0x4851ee;this[_0x39d206(0x5e8)][_0x39d206(0x1bc)](this['instanceName']+'\x20('+this['instance'][_0x39d206(0x5fe)]+'):\x20Enviando\x20áudio');let _0x252eab={'number':_0x141aa9,'options':{'delay':_0xb237f6[_0x39d206(0x58b)][_0x39d206(0x49c)]},'audioMessage':{'audio':_0xb237f6[_0x39d206(0x58b)]['audio']}};try{let _0x11fbcc=await this[_0x39d206(0x4a9)](_0x252eab);if(_0x11fbcc){let _0x52bb27={'_id':_0x11fbcc[_0x39d206(0x67c)]['id'],'_fromMe':_0x11fbcc[_0x39d206(0x67c)]['fromMe'],'_remoteJid':_0x11fbcc[_0x39d206(0x67c)]['remoteJid']};_0x54a16a['chatLog'][_0x39d206(0x2c7)]=_0xb237f6['_id']['toString']();let {message_normalized:_0x4323e4}=this[_0x39d206(0x599)](_0x11fbcc[_0x39d206(0x5be)],W(_0x11fbcc[_0x39d206(0x5be)]),null);_0x54a16a[_0x39d206(0x64a)][_0x39d206(0x399)]=await _0x4323e4;let _0x412580={'messageId':_0x11fbcc[_0x39d206(0x67c)]['id']},_0x3e551d=_0x54a16a[_0x39d206(0x64a)][_0x39d206(0x3eb)];Object[_0x39d206(0x154)](_0x3e551d,_0x52bb27),_0x54a16a['chatLog'][_0x39d206(0x3eb)]=_0x3e551d,this[_0x39d206(0x138)](_0x54a16a,_0xb237f6,_0x412580);}else{let _0x5327e4={'error':!0x0};this['updateConversation'](_0x54a16a,_0xb237f6,_0x5327e4),this['logger']['error'](this[_0x39d206(0x567)]+'\x20('+this['instance'][_0x39d206(0x5fe)]+_0x39d206(0x400));}}catch(_0x5a85b2){let _0x2dc480={'error':!0x0,'errorLog':_0x5a85b2['toString']()};this[_0x39d206(0x138)](_0x54a16a,_0xb237f6,_0x2dc480),this[_0x39d206(0x5e8)][_0x39d206(0x44b)](this[_0x39d206(0x567)]+'\x20('+this[_0x39d206(0x5a3)][_0x39d206(0x5fe)]+_0x39d206(0x508)+_0x5a85b2[_0x39d206(0x409)]());}}async[a0_0x4851ee(0x181)](_0x47b6ac,_0x47816b,_0x99e169){const _0x580cc3=a0_0x4851ee;this[_0x580cc3(0x5e8)][_0x580cc3(0x1bc)](this[_0x580cc3(0x567)]+'\x20('+this['instance'][_0x580cc3(0x5fe)]+'):\x20Enviando\x20contato');let _0x2b67ca={'number':_0x99e169,'options':{'delay':_0x47816b['uazapi']['delay']},'contactMessage':[{'fullName':_0x47816b[_0x580cc3(0x58b)][_0x580cc3(0x2d4)],'phoneNumber':_0x47816b[_0x580cc3(0x58b)][_0x580cc3(0x4a1)]}]};try{let _0xcc1d5b=await this['contactMessage'](_0x2b67ca);if(_0xcc1d5b){let _0x38652d={'_id':_0xcc1d5b[_0x580cc3(0x67c)]['id'],'_fromMe':_0xcc1d5b[_0x580cc3(0x67c)]['fromMe'],'_remoteJid':_0xcc1d5b['key'][_0x580cc3(0x53a)]};_0x47b6ac[_0x580cc3(0x64a)]['lastBlockId']=_0x47816b[_0x580cc3(0x3bf)][_0x580cc3(0x409)]();let {message_normalized:_0x12cc4b}=this['normalizeMessage'](_0xcc1d5b[_0x580cc3(0x5be)],W(_0xcc1d5b[_0x580cc3(0x5be)]),null);_0x47b6ac[_0x580cc3(0x64a)][_0x580cc3(0x399)]=await _0x12cc4b;let _0x493a3a={'messageId':_0xcc1d5b[_0x580cc3(0x67c)]['id']},_0x391942=_0x47b6ac[_0x580cc3(0x64a)][_0x580cc3(0x3eb)];Object['assign'](_0x391942,_0x38652d),_0x47b6ac[_0x580cc3(0x64a)][_0x580cc3(0x3eb)]=_0x391942,this[_0x580cc3(0x138)](_0x47b6ac,_0x47816b,_0x493a3a);}else{let _0x499eb1={'error':!0x0};this[_0x580cc3(0x138)](_0x47b6ac,_0x47816b,_0x499eb1),this[_0x580cc3(0x5e8)][_0x580cc3(0x44b)](this[_0x580cc3(0x567)]+'\x20('+this[_0x580cc3(0x5a3)][_0x580cc3(0x5fe)]+_0x580cc3(0x4b3));}}catch(_0x503977){let _0x52db27={'error':!0x0,'errorLog':_0x503977[_0x580cc3(0x409)]()};this['updateConversation'](_0x47b6ac,_0x47816b,_0x52db27),this['logger'][_0x580cc3(0x44b)](this[_0x580cc3(0x567)]+'\x20('+this['instance'][_0x580cc3(0x5fe)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20'+_0x503977[_0x580cc3(0x409)]());}}[a0_0x4851ee(0x429)](_0x44d212,_0x3af049){const _0x4b44f6=a0_0x4851ee;for(let _0x27b273 of _0x44d212)_0x27b273[_0x4b44f6(0x3ec)]&&(_0x27b273[_0x4b44f6(0x3ec)]=this[_0x4b44f6(0x217)](_0x27b273['option'],_0x3af049)),_0x27b273[_0x4b44f6(0x596)]&&(_0x27b273['optionDescription']=this[_0x4b44f6(0x217)](_0x27b273['optionDescription'],_0x3af049));}async['uazapiSendPoll'](_0x3cd6c8,_0x9ae20d,_0x5d2e39){const _0x598d60=a0_0x4851ee;this['logger']['verbose'](this[_0x598d60(0x567)]+'\x20('+this[_0x598d60(0x5a3)][_0x598d60(0x5fe)]+'):\x20Enviando\x20enquete');let _0xd677bd=_0x3cd6c8['replyOptions']['filter'](_0x52131d=>_0x52131d[_0x598d60(0x122)]===_0x9ae20d['_id']);this[_0x598d60(0x429)](_0xd677bd,_0x3cd6c8[_0x598d60(0x64a)][_0x598d60(0x3eb)]);let _0x1b0f02=_0xd677bd[_0x598d60(0x51a)](_0x447571=>_0x447571['option']),_0x36f8e5={'number':_0x5d2e39,'options':{'delay':_0x9ae20d[_0x598d60(0x58b)][_0x598d60(0x49c)]},'pollMessage':{'name':_0x9ae20d[_0x598d60(0x58b)][_0x598d60(0x44c)],'selectableCount':0x1,'values':_0x1b0f02}};try{let _0x5e9fb0=await this[_0x598d60(0x5ef)](_0x36f8e5);if(_0x5e9fb0){let _0x15a526={'_id':_0x5e9fb0[_0x598d60(0x67c)]['id'],'_fromMe':_0x5e9fb0[_0x598d60(0x67c)]['fromMe'],'_remoteJid':_0x5e9fb0[_0x598d60(0x67c)][_0x598d60(0x53a)]};this[_0x598d60(0x5e8)][_0x598d60(0x1bc)](this[_0x598d60(0x567)]+'\x20('+this[_0x598d60(0x5a3)][_0x598d60(0x5fe)]+'):\x20nextBlock.uazapi.name'+_0x9ae20d[_0x598d60(0x58b)]['name']),_0x3cd6c8[_0x598d60(0x3ae)]=_0x5e9fb0[_0x598d60(0x67c)]['id'],_0x3cd6c8[_0x598d60(0x67a)]=_0x9ae20d[_0x598d60(0x58b)][_0x598d60(0x44c)],_0x3cd6c8['waitingPoll_replyOptions']=_0xd677bd,this[_0x598d60(0x5e8)][_0x598d60(0x1bc)](this[_0x598d60(0x567)]+'\x20('+this['instance'][_0x598d60(0x5fe)]+'):\x20conversation.waitingPollname'+_0x3cd6c8[_0x598d60(0x67a)]),_0x3cd6c8[_0x598d60(0x64a)][_0x598d60(0x2c7)]=_0x9ae20d[_0x598d60(0x3bf)]['toString']();let {message_normalized:_0x13eab6}=this[_0x598d60(0x599)](_0x5e9fb0[_0x598d60(0x5be)],W(_0x5e9fb0[_0x598d60(0x5be)]),null);_0x3cd6c8[_0x598d60(0x64a)]['lastSendMessage']=await _0x13eab6;let _0x7f487e={'messageId':_0x5e9fb0[_0x598d60(0x67c)]['id']},_0x33e634=_0x3cd6c8[_0x598d60(0x64a)][_0x598d60(0x3eb)];Object[_0x598d60(0x154)](_0x33e634,_0x15a526),_0x3cd6c8['chatLog'][_0x598d60(0x3eb)]=_0x33e634,this[_0x598d60(0x138)](_0x3cd6c8,_0x9ae20d,_0x7f487e);}else{let _0x362168={'error':!0x0};this[_0x598d60(0x138)](_0x3cd6c8,_0x9ae20d,_0x362168),this[_0x598d60(0x5e8)][_0x598d60(0x44b)](this['instanceName']+'\x20('+this[_0x598d60(0x5a3)][_0x598d60(0x5fe)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.');}}catch(_0x2ce10f){let _0x4416ee={'error':!0x0,'errorLog':_0x2ce10f[_0x598d60(0x409)]()};this['updateConversation'](_0x3cd6c8,_0x9ae20d,_0x4416ee),this[_0x598d60(0x5e8)][_0x598d60(0x44b)](this[_0x598d60(0x567)]+'\x20('+this[_0x598d60(0x5a3)][_0x598d60(0x5fe)]+_0x598d60(0x4ce)+_0x2ce10f[_0x598d60(0x409)]());}}async[a0_0x4851ee(0xf3)](_0x390d24,_0x4d6603,_0x32259d){const _0x4daec4=a0_0x4851ee;this[_0x4daec4(0x5e8)][_0x4daec4(0x1bc)](this[_0x4daec4(0x567)]+'\x20('+this[_0x4daec4(0x5a3)]['wuid']+'):\x20Deletando\x20mensagem');let _0x6b41b9=_0x390d24[_0x4daec4(0x64a)]['blockLogs']['find'](_0x31ca8b=>_0x31ca8b[_0x4daec4(0x122)][_0x4daec4(0x409)]()===_0x4d6603[_0x4daec4(0x58b)][_0x4daec4(0x122)][_0x4daec4(0x409)]()),_0x1e8654={'id':_0x6b41b9['messageId'],'remoteJid':_0x6b41b9[_0x4daec4(0x53a)],'fromMe':_0x6b41b9[_0x4daec4(0x267)]};try{let _0x1cbe39=await this[_0x4daec4(0x628)](_0x1e8654);if(_0x1cbe39){_0x390d24[_0x4daec4(0x64a)][_0x4daec4(0x2c7)]=_0x4d6603[_0x4daec4(0x3bf)][_0x4daec4(0x409)]();let {message_normalized:_0x132520}=this['normalizeMessage'](_0x1cbe39[_0x4daec4(0x5be)],W(_0x1cbe39[_0x4daec4(0x5be)]),null);_0x390d24[_0x4daec4(0x64a)]['lastSendMessage']=await _0x132520;let _0x2e0dd7={};this[_0x4daec4(0x138)](_0x390d24,_0x4d6603,_0x2e0dd7);}else{let _0x1e84af={'error':!0x0};this[_0x4daec4(0x138)](_0x390d24,_0x4d6603,_0x1e84af),this['logger'][_0x4daec4(0x44b)](this[_0x4daec4(0x567)]+'\x20('+this[_0x4daec4(0x5a3)][_0x4daec4(0x5fe)]+_0x4daec4(0x558));}}catch(_0x26d846){let _0x108e0f={'error':!0x0,'errorLog':_0x26d846[_0x4daec4(0x409)]()};this['updateConversation'](_0x390d24,_0x4d6603,_0x108e0f),this['logger'][_0x4daec4(0x44b)](this[_0x4daec4(0x567)]+'\x20('+this[_0x4daec4(0x5a3)]['wuid']+_0x4daec4(0x3aa)+_0x26d846[_0x4daec4(0x409)]());}}async[a0_0x4851ee(0x667)](_0x412c1f){const _0x276e32=a0_0x4851ee;try{if(this[_0x276e32(0x5e8)][_0x276e32(0x1bc)](this[_0x276e32(0x567)]+'\x20('+this[_0x276e32(0x5a3)][_0x276e32(0x5fe)]+'):\x20Criando\x20fluxo...'),await D[_0x276e32(0x3ce)]({'owner':this[_0x276e32(0x5a3)][_0x276e32(0x5fe)],'name':_0x412c1f[_0x276e32(0x44c)]}))return{'message':_0x276e32(0xd5)};_0x412c1f[_0x276e32(0x481)]===!0x0&&await D[_0x276e32(0x1b0)]({'owner':this['instance'][_0x276e32(0x5fe)]},{'default':!0x1});let _0x5c316b=new be['Types'][(_0x276e32(0x38b))](),_0x54a95c={'_id':_0x5c316b,'default':!0x0,'title':_0x276e32(0x666),'x':0x0,'y':0x0},_0x4188b8={'_id':new be[(_0x276e32(0x180))][(_0x276e32(0x38b))](),'order':0x1,'groupId':_0x5c316b['toString'](),'type':_0x276e32(0x46b)};return await D[_0x276e32(0x1a8)]({'owner':this['instance'][_0x276e32(0x5fe)],'name':_0x412c1f['name'],'groups':[_0x54a95c],'blocks':[_0x4188b8],..._0x412c1f});}catch(_0x52a97a){throw this[_0x276e32(0x5e8)][_0x276e32(0x44b)](this[_0x276e32(0x567)]+'\x20('+this[_0x276e32(0x5a3)][_0x276e32(0x5fe)]+_0x276e32(0x5b2)+_0x52a97a),new g(_0x276e32(0x210)+_0x52a97a);}}async['deleteFlow'](_0x726be5){const _0x408b42=a0_0x4851ee;try{return this['logger'][_0x408b42(0x1bc)](this[_0x408b42(0x567)]+'\x20('+this[_0x408b42(0x5a3)][_0x408b42(0x5fe)]+_0x408b42(0x4e3)),await D[_0x408b42(0x147)]({'owner':this[_0x408b42(0x5a3)][_0x408b42(0x5fe)],'name':_0x726be5});}catch(_0xe977a3){return this['logger'][_0x408b42(0x44b)](this[_0x408b42(0x567)]+'\x20('+this['instance'][_0x408b42(0x5fe)]+_0x408b42(0x153)+_0xe977a3),{'message':'Erro\x20ao\x20deletar\x20o\x20fluxo:\x20'+_0xe977a3};}}async[a0_0x4851ee(0x64b)](_0x3201fd){const _0xea8c8a=a0_0x4851ee;try{this['logger'][_0xea8c8a(0x1bc)](this[_0xea8c8a(0x567)]+'\x20('+this['instance'][_0xea8c8a(0x5fe)]+_0xea8c8a(0x4f8));let _0x16e438=await D['findOne']({'owner':this[_0xea8c8a(0x5a3)][_0xea8c8a(0x5fe)],'name':_0x3201fd});if(!_0x16e438)throw new Error(_0xea8c8a(0x4c9));if(!this[_0xea8c8a(0x34e)]&&(await this[_0xea8c8a(0x2e8)](),!this[_0xea8c8a(0x34e)]))return null;let _0x309766=this[_0xea8c8a(0x34e)]?.['customFields'][_0xea8c8a(0x51a)](_0xa2d858=>_0xa2d858['name']),_0x4b5eee=[_0xea8c8a(0xf4),_0xea8c8a(0x64e),_0xea8c8a(0x4b4),_0xea8c8a(0x431),'status','notas',_0xea8c8a(0x20d),_0xea8c8a(0x4a2)];return _0x16e438[_0xea8c8a(0x626)]=_0x16e438[_0xea8c8a(0x626)][_0xea8c8a(0x1a6)](_0x1cb595=>!(_0x1cb595['folder']===_0xea8c8a(0x521)||_0x1cb595['leadInfo'])),_0x4b5eee['forEach'](_0x277ee7=>{const _0x5712a8=_0xea8c8a;_0x16e438[_0x5712a8(0x626)][_0x5712a8(0x53b)]({'folder':_0x5712a8(0x521),'name':_0x277ee7,'value':'','doc':'','leadInfo':!0x0});}),_0x309766[_0xea8c8a(0x386)](_0x70f3f=>{const _0x4122a8=_0xea8c8a;let _0x432109=_0x16e438[_0x4122a8(0x626)][_0x4122a8(0x350)](_0xb161de=>_0xb161de[_0x4122a8(0x44c)]===_0x70f3f);_0x432109===-0x1?_0x16e438[_0x4122a8(0x626)]['push']({'folder':_0x4122a8(0x521),'name':_0x70f3f,'value':'','doc':'','leadInfo':!0x0}):(_0x16e438['variables'][_0x432109][_0x4122a8(0xfc)]=_0x4122a8(0x521),_0x16e438['variables'][_0x432109][_0x4122a8(0x521)]=!0x0);}),await _0x16e438[_0xea8c8a(0x502)](),_0x16e438;}catch(_0x5883e5){throw this['logger'][_0xea8c8a(0x44b)](this[_0xea8c8a(0x567)]+'\x20('+this[_0xea8c8a(0x5a3)][_0xea8c8a(0x5fe)]+_0xea8c8a(0x523)+_0x5883e5),new g(_0xea8c8a(0x2f6)+_0x5883e5);}}async[a0_0x4851ee(0x5d6)](){const _0x2aec70=a0_0x4851ee;try{return this[_0x2aec70(0x5e8)]['verbose'](this[_0x2aec70(0x567)]+'\x20('+this[_0x2aec70(0x5a3)][_0x2aec70(0x5fe)]+'):\x20Buscando\x20todos\x20os\x20fluxos...'),await D['find']({'owner':this[_0x2aec70(0x5a3)][_0x2aec70(0x5fe)]});}catch(_0x2ef213){return this[_0x2aec70(0x5e8)][_0x2aec70(0x44b)](this[_0x2aec70(0x567)]+'\x20('+this[_0x2aec70(0x5a3)][_0x2aec70(0x5fe)]+_0x2aec70(0x43b)+_0x2ef213),{'message':_0x2aec70(0x178)+_0x2ef213};}}async[a0_0x4851ee(0x48b)](_0x31a36d){const _0x383a20=a0_0x4851ee;try{this[_0x383a20(0x5e8)][_0x383a20(0x1bc)](this[_0x383a20(0x567)]+'\x20('+this[_0x383a20(0x5a3)][_0x383a20(0x5fe)]+_0x383a20(0x3fe));let _0x14033f=await D[_0x383a20(0x3ce)]({'owner':this['instance'][_0x383a20(0x5fe)],'name':_0x31a36d[_0x383a20(0x44c)]});if(!_0x14033f)return{'message':'Fluxo\x20não\x20encontrado'};if(_0x31a36d[_0x383a20(0x481)]===!0x0&&await D[_0x383a20(0x1b0)]({'owner':this[_0x383a20(0x5a3)][_0x383a20(0x5fe)]},{'default':!0x1}),_0x31a36d[_0x383a20(0x2a9)]){if(await D[_0x383a20(0x3ce)]({'owner':this[_0x383a20(0x5a3)]['wuid'],'name':_0x31a36d[_0x383a20(0x2a9)]}))return{'message':_0x383a20(0x246)};_0x31a36d['name']=_0x31a36d[_0x383a20(0x2a9)],delete _0x31a36d[_0x383a20(0x2a9)];}return await D['findByIdAndUpdate'](_0x14033f['_id'],{'$set':_0x31a36d},{'new':!0x0});}catch(_0x4e273f){throw this[_0x383a20(0x5e8)][_0x383a20(0x44b)](this[_0x383a20(0x567)]+'\x20('+this[_0x383a20(0x5a3)][_0x383a20(0x5fe)]+'):\x20Erro\x20ao\x20alterar\x20fluxo:\x20'+_0x4e273f),new g(_0x383a20(0x39e)+_0x4e273f);}}async[a0_0x4851ee(0x5cd)](_0x4c22a0){const _0x287643=a0_0x4851ee;try{this[_0x287643(0x5e8)][_0x287643(0x1bc)](this[_0x287643(0x567)]+'\x20('+this['instance'][_0x287643(0x5fe)]+_0x287643(0x2ad));let _0x1995e8={'owner':this['instance'][_0x287643(0x5fe)],'name':_0x4c22a0[_0x287643(0x44c)]},_0x483e12=await D[_0x287643(0x3ce)](_0x1995e8);_0x483e12||this[_0x287643(0x236)]('Flow\x20não\x20encontrado');let {block:_0x348ab9}=_0x4c22a0;return _0x348ab9?.['delete']?this[_0x287643(0x148)](_0x483e12,_0x4c22a0):_0x348ab9[_0x287643(0x3bf)]?await this[_0x287643(0x4cc)](_0x483e12,_0x4c22a0):this['addBlock'](_0x483e12,_0x4c22a0),await _0x483e12['save'](),_0x483e12;}catch(_0x381942){this['throwAndLogError'](_0x287643(0x206)+_0x381942);}}[a0_0x4851ee(0x236)](_0x353ee9){const _0xb89d16=a0_0x4851ee;throw this[_0xb89d16(0x5e8)]['error'](this['instanceName']+'\x20('+this[_0xb89d16(0x5a3)][_0xb89d16(0x5fe)]+_0xb89d16(0x259)+_0x353ee9),new g(_0x353ee9);}[a0_0x4851ee(0x148)](_0x241b93,_0x2ebba){const _0x4752bc=a0_0x4851ee;let {block:_0x2277ab}=_0x2ebba;if(_0x2277ab[_0x4752bc(0x620)]===_0x4752bc(0x46b)){this[_0x4752bc(0x236)](_0x4752bc(0x415));return;}if(!_0x2277ab['_id']){this[_0x4752bc(0x236)]('blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco');return;}let _0x43622f=_0x241b93[_0x4752bc(0xc4)][_0x4752bc(0x487)](_0x46541c=>_0x46541c[_0x4752bc(0x3bf)]['toString']()===_0x2ebba[_0x4752bc(0x4df)][_0x4752bc(0x3bf)][_0x4752bc(0x409)]());if(!_0x43622f){this['throwAndLogError'](_0x4752bc(0x1ed)+_0x2277ab['_id']+_0x4752bc(0x66c));return;}_0x241b93[_0x4752bc(0xc4)]=_0x241b93['blocks'][_0x4752bc(0x1a6)](_0x19079e=>_0x19079e[_0x4752bc(0x3bf)][_0x4752bc(0x409)]()!==_0x2ebba[_0x4752bc(0x4df)]['_id'][_0x4752bc(0x409)]()),_0x241b93[_0x4752bc(0x3e8)]=_0x241b93[_0x4752bc(0x3e8)][_0x4752bc(0x1a6)](_0x5bc243=>_0x5bc243['blockId']!==_0x2277ab[_0x4752bc(0x3bf)]['toString']()),_0x241b93[_0x4752bc(0x9e)]=_0x241b93[_0x4752bc(0x9e)][_0x4752bc(0x1a6)](_0x307315=>_0x307315[_0x4752bc(0x122)]!==_0x2277ab[_0x4752bc(0x3bf)][_0x4752bc(0x409)]()),_0x241b93[_0x4752bc(0x347)]=_0x241b93[_0x4752bc(0x347)][_0x4752bc(0x1a6)](_0x44c188=>_0x44c188[_0x4752bc(0x122)]!==_0x2277ab[_0x4752bc(0x3bf)][_0x4752bc(0x409)]()),this[_0x4752bc(0x29a)](_0x241b93[_0x4752bc(0xc4)],_0x43622f[_0x4752bc(0x435)]);}async[a0_0x4851ee(0x4cc)](_0x13f460,_0x647bf){const _0x303eb4=a0_0x4851ee;let _0x4191d6=_0x13f460['blocks']['findIndex'](_0x1a8b8d=>_0x1a8b8d[_0x303eb4(0x3bf)][_0x303eb4(0x409)]()===_0x647bf[_0x303eb4(0x4df)][_0x303eb4(0x3bf)][_0x303eb4(0x409)]());if(this[_0x303eb4(0x5e8)][_0x303eb4(0x1bc)](this[_0x303eb4(0x567)]+'\x20('+this['instance'][_0x303eb4(0x5fe)]+_0x303eb4(0x199)+_0x4191d6),_0x4191d6===-0x1){this[_0x303eb4(0x5e8)][_0x303eb4(0x1bc)](_0x303eb4(0x1ed)+_0x647bf[_0x303eb4(0x4df)][_0x303eb4(0x3bf)]+_0x303eb4(0x67b));return;}if(_0x13f460[_0x303eb4(0xc4)][_0x4191d6][_0x303eb4(0x620)]===_0x303eb4(0x46b)){let _0x35bfc2=Object[_0x303eb4(0x2b5)](_0x647bf[_0x303eb4(0x4df)]);if(_0x35bfc2[_0x303eb4(0x291)]>0x2||_0x35bfc2['length']===0x2&&!_0x35bfc2[_0x303eb4(0x5a9)](_0x303eb4(0x211))){this[_0x303eb4(0x236)](_0x303eb4(0x21e));return;}}let _0x36682a=_0x13f460[_0x303eb4(0xc4)][_0x4191d6][_0x303eb4(0x435)];for(let _0x2e223a in _0x647bf[_0x303eb4(0x4df)])_0x647bf['block'][_0x303eb4(0x598)](_0x2e223a)&&(_0x13f460[_0x303eb4(0xc4)][_0x4191d6][_0x2e223a]=_0x647bf[_0x303eb4(0x4df)][_0x2e223a]);if(this[_0x303eb4(0x5e8)][_0x303eb4(0x1bc)](this[_0x303eb4(0x567)]+'\x20('+this['instance'][_0x303eb4(0x5fe)]+'):\x20Bloco\x20a\x20ser\x20atualizado:\x20'+JSON[_0x303eb4(0x63a)](_0x13f460[_0x303eb4(0xc4)][_0x4191d6])),_0x13f460[_0x303eb4(0xc4)][_0x4191d6][_0x303eb4(0x464)]&&'header'in _0x13f460['blocks'][_0x4191d6][_0x303eb4(0x464)]){this[_0x303eb4(0x5e8)][_0x303eb4(0x1bc)](this['instanceName']+'\x20('+this[_0x303eb4(0x5a3)][_0x303eb4(0x5fe)]+'):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString');let _0x547e6e=JSON[_0x303eb4(0x63a)](_0x13f460[_0x303eb4(0xc4)][_0x4191d6]['apirequest'][_0x303eb4(0x354)],null,0x1);_0x547e6e[_0x303eb4(0x291)]>0x2&&(_0x547e6e=_0x547e6e['substring'](0x1,_0x547e6e['length']-0x1)[_0x303eb4(0x5b9)]()),_0x13f460[_0x303eb4(0xc4)][_0x4191d6][_0x303eb4(0x464)][_0x303eb4(0x26e)]=_0x547e6e;}if(_0x13f460['blocks'][_0x4191d6][_0x303eb4(0x464)]&&_0x303eb4(0xbd)in _0x13f460[_0x303eb4(0xc4)][_0x4191d6][_0x303eb4(0x464)]){this[_0x303eb4(0x5e8)][_0x303eb4(0x1bc)](this[_0x303eb4(0x567)]+'\x20('+this['instance'][_0x303eb4(0x5fe)]+_0x303eb4(0x516));let _0x2de81e=JSON[_0x303eb4(0x63a)](_0x13f460[_0x303eb4(0xc4)][_0x4191d6]['apirequest'][_0x303eb4(0xbd)],null,0x1);_0x2de81e['length']>0x2&&(_0x2de81e=_0x2de81e[_0x303eb4(0xd0)](0x1,_0x2de81e[_0x303eb4(0x291)]-0x1)['trim']()),_0x13f460['blocks'][_0x4191d6][_0x303eb4(0x464)][_0x303eb4(0x1ec)]=_0x2de81e;}let _0x2ae01c=_0x13f460[_0x303eb4(0xc4)][_0x4191d6][_0x303eb4(0x435)];_0x36682a!==_0x2ae01c?(this[_0x303eb4(0x29a)](_0x13f460[_0x303eb4(0xc4)],_0x36682a),this['reorderBlocks'](_0x13f460['blocks'],_0x2ae01c)):this[_0x303eb4(0x29a)](_0x13f460[_0x303eb4(0xc4)],_0x36682a);}[a0_0x4851ee(0xb8)](_0x49f124,_0x5cee91){const _0x20c8ab=a0_0x4851ee;if(_0x5cee91[_0x20c8ab(0x4df)][_0x20c8ab(0x620)]===_0x20c8ab(0x46b)){this[_0x20c8ab(0x236)](_0x20c8ab(0x2db));return;}if(_0x5cee91[_0x20c8ab(0x4df)]['apirequest']&&'header'in _0x5cee91[_0x20c8ab(0x4df)]['apirequest']){this[_0x20c8ab(0x5e8)][_0x20c8ab(0x1bc)](this['instanceName']+'\x20('+this['instance'][_0x20c8ab(0x5fe)]+_0x20c8ab(0x3d9));let _0x3bc882=JSON[_0x20c8ab(0x63a)](_0x5cee91[_0x20c8ab(0x4df)][_0x20c8ab(0x464)][_0x20c8ab(0x354)],null,0x1);_0x3bc882[_0x20c8ab(0x291)]>0x2&&(_0x3bc882=_0x3bc882[_0x20c8ab(0xd0)](0x1,_0x3bc882[_0x20c8ab(0x291)]-0x1)[_0x20c8ab(0x5b9)]()),_0x5cee91[_0x20c8ab(0x4df)][_0x20c8ab(0x464)][_0x20c8ab(0x26e)]=_0x3bc882;}_0x5cee91[_0x20c8ab(0x4df)]['apirequest']&&_0x20c8ab(0xbd)in _0x5cee91[_0x20c8ab(0x4df)][_0x20c8ab(0x464)]&&(this[_0x20c8ab(0x5e8)]['verbose'](this[_0x20c8ab(0x567)]+'\x20('+this[_0x20c8ab(0x5a3)]['wuid']+_0x20c8ab(0x516)),_0x5cee91[_0x20c8ab(0x4df)][_0x20c8ab(0x464)][_0x20c8ab(0x1ec)]=JSON[_0x20c8ab(0x63a)](_0x5cee91[_0x20c8ab(0x4df)]['apirequest'][_0x20c8ab(0xbd)],null,0x1)[_0x20c8ab(0x5b9)]()),_0x49f124[_0x20c8ab(0xc4)]['push'](_0x5cee91['block']),this[_0x20c8ab(0x29a)](_0x49f124[_0x20c8ab(0xc4)],_0x5cee91[_0x20c8ab(0x4df)][_0x20c8ab(0x435)]);}[a0_0x4851ee(0x29a)](_0x16cee4,_0x34d80e){const _0x1fcf79=a0_0x4851ee;let _0xd7b556=_0x16cee4[_0x1fcf79(0x1a6)](_0x2aa018=>_0x2aa018[_0x1fcf79(0x435)]===_0x34d80e);_0xd7b556[_0x1fcf79(0x1dc)]((_0x56c490,_0x4ed155)=>_0x56c490[_0x1fcf79(0x3b5)]-_0x4ed155[_0x1fcf79(0x3b5)]),_0xd7b556[_0x1fcf79(0x386)]((_0x3681d2,_0x581883)=>_0x3681d2[_0x1fcf79(0x3b5)]=_0x581883+0x1);}async[a0_0x4851ee(0x62e)](_0x41159d){const _0x17ac18=a0_0x4851ee;try{if(this['logger'][_0x17ac18(0x1bc)](this[_0x17ac18(0x567)]+'\x20('+this['instance']['wuid']+_0x17ac18(0x149)),!_0x41159d||!_0x41159d['replyOption']){this[_0x17ac18(0x236)](_0x17ac18(0x193));return;}let _0x5d54f6={'owner':this['instance'][_0x17ac18(0x5fe)],'name':_0x41159d['name']},_0x34dcd1=await D[_0x17ac18(0x3ce)](_0x5d54f6);_0x34dcd1||this[_0x17ac18(0x236)](_0x17ac18(0x4c9));let {replyOption:_0x22ee13}=_0x41159d;return _0x22ee13?.['delete']?this[_0x17ac18(0x1b7)](_0x34dcd1,_0x41159d):_0x22ee13[_0x17ac18(0x3bf)]?await this['updateReplyOption'](_0x34dcd1,_0x41159d):this[_0x17ac18(0xbc)](_0x34dcd1,_0x41159d),await _0x34dcd1[_0x17ac18(0x502)](),_0x34dcd1;}catch(_0x579a19){this[_0x17ac18(0x236)](_0x17ac18(0xcd)+_0x579a19);}}[a0_0x4851ee(0x1b7)](_0x2de8d5,_0x3d5f54){const _0x370f2e=a0_0x4851ee;let {replyOption:_0x508e78}=_0x3d5f54;if(!_0x508e78[_0x370f2e(0x3bf)]){this[_0x370f2e(0x236)](_0x370f2e(0x33a));return;}if(!_0x2de8d5['replyOptions'][_0x370f2e(0x487)](_0x21fdd1=>_0x21fdd1[_0x370f2e(0x3bf)][_0x370f2e(0x409)]()===_0x3d5f54[_0x370f2e(0x419)]['_id'][_0x370f2e(0x409)]())){this['throwAndLogError'](_0x370f2e(0x416)+_0x508e78['_id']+_0x370f2e(0x66c));return;}_0x2de8d5[_0x370f2e(0x347)]=_0x2de8d5[_0x370f2e(0x347)][_0x370f2e(0x1a6)](_0x5c54d4=>_0x5c54d4[_0x370f2e(0x3bf)][_0x370f2e(0x409)]()!==_0x3d5f54[_0x370f2e(0x419)][_0x370f2e(0x3bf)][_0x370f2e(0x409)]());}async['updateReplyOption'](_0x3515e5,_0x283249){const _0x1169b6=a0_0x4851ee;let _0x26c9bf=_0x3515e5[_0x1169b6(0x347)][_0x1169b6(0x350)](_0x59c745=>_0x59c745['_id'][_0x1169b6(0x409)]()===_0x283249[_0x1169b6(0x419)][_0x1169b6(0x3bf)][_0x1169b6(0x409)]());if(_0x26c9bf===-0x1){this[_0x1169b6(0x236)](_0x1169b6(0x416)+_0x283249[_0x1169b6(0x419)]['_id']+'\x20não\x20encontrado\x20para\x20atualização.');return;}for(let _0x2f947f in _0x283249[_0x1169b6(0x419)])_0x283249[_0x1169b6(0x419)]['hasOwnProperty'](_0x2f947f)&&(_0x3515e5[_0x1169b6(0x347)][_0x26c9bf][_0x2f947f]=_0x283249[_0x1169b6(0x419)][_0x2f947f]);}['addReplyOption'](_0x288c24,_0x3c0048){const _0x4a9b19=a0_0x4851ee;_0x288c24[_0x4a9b19(0x347)][_0x4a9b19(0x53b)](_0x3c0048[_0x4a9b19(0x419)]);}async[a0_0x4851ee(0x34a)](_0x395d67){const _0x3134f6=a0_0x4851ee;this['logger']['verbose'](this[_0x3134f6(0x567)]+'\x20('+this[_0x3134f6(0x5a3)][_0x3134f6(0x5fe)]+'):\x20Dados\x20recebidos\x20no\x20editFlowGroup:'+_0x395d67);try{this[_0x3134f6(0x5e8)][_0x3134f6(0x1bc)](this[_0x3134f6(0x567)]+'\x20('+this[_0x3134f6(0x5a3)]['wuid']+_0x3134f6(0x110));let _0x2aaf08={'owner':this['instance'][_0x3134f6(0x5fe)],'name':_0x395d67[_0x3134f6(0x44c)]},_0x50083a=await D['findOne'](_0x2aaf08);if(!_0x50083a)throw new Error(_0x3134f6(0x4c9));if(_0x395d67[_0x3134f6(0x645)]&&_0x395d67[_0x3134f6(0x645)]?.['delete']===!0x0){if(this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x3134f6(0x5a3)][_0x3134f6(0x5fe)]+_0x3134f6(0x488)),_0x395d67['group'][_0x3134f6(0x481)]===!0x0)return{'message':_0x3134f6(0x41f)};if(_0x50083a[_0x3134f6(0xc4)][_0x3134f6(0x1b9)](_0x4e5df7=>_0x4e5df7[_0x3134f6(0x435)][_0x3134f6(0x409)]()===_0x395d67['group'][_0x3134f6(0x3bf)]))return this[_0x3134f6(0x5e8)][_0x3134f6(0x1bc)](this[_0x3134f6(0x567)]+'\x20('+this[_0x3134f6(0x5a3)][_0x3134f6(0x5fe)]+_0x3134f6(0x25f)),{'message':_0x3134f6(0x4f2)};_0x50083a['groups']=_0x50083a[_0x3134f6(0x65e)][_0x3134f6(0x1a6)](_0x38020a=>_0x38020a[_0x3134f6(0x3bf)][_0x3134f6(0x409)]()!==_0x395d67[_0x3134f6(0x645)]['_id']);}else{if(_0x395d67[_0x3134f6(0x645)]){if(_0x395d67['group'][_0x3134f6(0x481)]===!0x0)return{'message':_0x3134f6(0x40d)};if(_0x395d67[_0x3134f6(0x645)]['_id']){let _0x4183df=_0x50083a[_0x3134f6(0x65e)][_0x3134f6(0x487)](_0x3a7607=>_0x3a7607[_0x3134f6(0x3bf)][_0x3134f6(0x409)]()===_0x395d67['group'][_0x3134f6(0x3bf)]);_0x4183df&&(_0x395d67[_0x3134f6(0x645)]['x']<0x0&&(_0x395d67[_0x3134f6(0x645)]['x']=0x0),_0x395d67['group']['y']<0x0&&(_0x395d67[_0x3134f6(0x645)]['y']=0x0),Object['assign'](_0x4183df,_0x395d67[_0x3134f6(0x645)]));}else _0x50083a[_0x3134f6(0x65e)][_0x3134f6(0x53b)](_0x395d67[_0x3134f6(0x645)]);}}return await _0x50083a[_0x3134f6(0x502)](),_0x50083a;}catch(_0x471f36){throw this[_0x3134f6(0x5e8)][_0x3134f6(0x44b)](this[_0x3134f6(0x567)]+'\x20('+this['instance'][_0x3134f6(0x5fe)]+'):\x20Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20'+_0x471f36),new g('Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20'+_0x471f36);}}async[a0_0x4851ee(0x639)](_0x51bba6){const _0x27fffc=a0_0x4851ee;try{this[_0x27fffc(0x5e8)][_0x27fffc(0x1bc)](this[_0x27fffc(0x567)]+'\x20('+this[_0x27fffc(0x5a3)][_0x27fffc(0x5fe)]+_0x27fffc(0x104));let _0x5015b0={'owner':this['instance'][_0x27fffc(0x5fe)],'name':_0x51bba6['name']},_0x5e92da=await D['findOne'](_0x5015b0);if(!_0x5e92da)throw new Error(_0x27fffc(0x4c9));let _0x48b1e8=!0x1;if(_0x51bba6[_0x27fffc(0x3e6)]?.['delete']===!0x0)_0x5e92da[_0x27fffc(0x3e8)]=_0x5e92da[_0x27fffc(0x3e8)]['filter'](_0x50c6d=>_0x50c6d&&_0x51bba6[_0x27fffc(0x3e6)]&&_0x50c6d[_0x27fffc(0x3bf)]&&_0x51bba6[_0x27fffc(0x3e6)][_0x27fffc(0x3bf)]&&_0x50c6d['_id'][_0x27fffc(0x409)]()!==_0x51bba6[_0x27fffc(0x3e6)][_0x27fffc(0x3bf)][_0x27fffc(0x409)]()),_0x48b1e8=!0x0;else{let _0x5947ca=_0x5e92da[_0x27fffc(0x3e8)][_0x27fffc(0x487)](_0x205b3b=>_0x205b3b&&_0x51bba6[_0x27fffc(0x3e6)]&&_0x205b3b[_0x27fffc(0x3bf)]&&_0x51bba6[_0x27fffc(0x3e6)]['_id']&&_0x205b3b[_0x27fffc(0x3bf)][_0x27fffc(0x409)]()===_0x51bba6['condition']['_id']['toString']());_0x5947ca?(_0x48b1e8=_0x5947ca[_0x27fffc(0x3b5)]!==_0x51bba6[_0x27fffc(0x3e6)][_0x27fffc(0x3b5)],Object[_0x27fffc(0x154)](_0x5947ca,_0x51bba6[_0x27fffc(0x3e6)])):(_0x5e92da[_0x27fffc(0x3e8)]['push'](_0x51bba6[_0x27fffc(0x3e6)]),_0x48b1e8=!0x0);}if(_0x48b1e8){_0x5e92da['conditions'][_0x27fffc(0x1dc)]((_0x228206,_0x169f2a)=>_0x228206[_0x27fffc(0x3b5)]>_0x169f2a[_0x27fffc(0x3b5)]?0x1:_0x169f2a[_0x27fffc(0x3b5)]>_0x228206[_0x27fffc(0x3b5)]?-0x1:0x0);for(let _0x5eda87=0x0;_0x5eda87<_0x5e92da['conditions'][_0x27fffc(0x291)];_0x5eda87++)_0x5e92da['conditions'][_0x5eda87][_0x27fffc(0x3b5)]=_0x5eda87+0x1;_0x5e92da[_0x27fffc(0x3e8)][_0x27fffc(0x291)]>0x0&&(_0x5e92da[_0x27fffc(0x3e8)][0x0][_0x27fffc(0x451)]='and');}return await _0x5e92da[_0x27fffc(0x502)](),_0x5e92da;}catch(_0x54d025){throw this[_0x27fffc(0x5e8)][_0x27fffc(0x44b)](this[_0x27fffc(0x567)]+'\x20('+this[_0x27fffc(0x5a3)][_0x27fffc(0x5fe)]+_0x27fffc(0x4f6)+_0x54d025),new Error(_0x27fffc(0x345)+_0x54d025);}}async['editFlowVaredit'](_0x1d823d){const _0x3cadc7=a0_0x4851ee;try{this['logger']['verbose'](this[_0x3cadc7(0x567)]+'\x20('+this[_0x3cadc7(0x5a3)]['wuid']+'):\x20Editando\x20edição\x20do\x20fluxo...');let _0x400ee9={'owner':this[_0x3cadc7(0x5a3)][_0x3cadc7(0x5fe)],'name':_0x1d823d[_0x3cadc7(0x44c)]},_0x11277b=await D[_0x3cadc7(0x3ce)](_0x400ee9);if(!_0x11277b)throw new Error(_0x3cadc7(0x4c9));let _0x59f229=!0x1;if(_0x1d823d['varedit']?.[_0x3cadc7(0x522)]===!0x0)_0x11277b[_0x3cadc7(0x9e)]=_0x11277b[_0x3cadc7(0x9e)][_0x3cadc7(0x1a6)](_0x363611=>_0x363611&&_0x1d823d[_0x3cadc7(0x48a)]&&_0x363611[_0x3cadc7(0x3bf)]&&_0x1d823d[_0x3cadc7(0x48a)][_0x3cadc7(0x3bf)]&&_0x363611[_0x3cadc7(0x3bf)][_0x3cadc7(0x409)]()!==_0x1d823d[_0x3cadc7(0x48a)][_0x3cadc7(0x3bf)][_0x3cadc7(0x409)]()),_0x59f229=!0x0;else{let _0x1874a7=_0x11277b['varedits'][_0x3cadc7(0x487)](_0x45495e=>_0x45495e&&_0x1d823d[_0x3cadc7(0x48a)]&&_0x45495e[_0x3cadc7(0x3bf)]&&_0x1d823d[_0x3cadc7(0x48a)][_0x3cadc7(0x3bf)]&&_0x45495e['_id'][_0x3cadc7(0x409)]()===_0x1d823d[_0x3cadc7(0x48a)][_0x3cadc7(0x3bf)][_0x3cadc7(0x409)]());_0x1874a7?(_0x59f229=_0x1874a7['order']!==_0x1d823d[_0x3cadc7(0x48a)][_0x3cadc7(0x3b5)],Object[_0x3cadc7(0x154)](_0x1874a7,_0x1d823d['varedit'])):(_0x11277b['varedits'][_0x3cadc7(0x53b)](_0x1d823d[_0x3cadc7(0x48a)]),_0x59f229=!0x0);}if(_0x59f229){_0x11277b['varedits'][_0x3cadc7(0x1dc)]((_0x7871cc,_0x3eeda4)=>_0x7871cc[_0x3cadc7(0x3b5)]>_0x3eeda4[_0x3cadc7(0x3b5)]?0x1:_0x3eeda4[_0x3cadc7(0x3b5)]>_0x7871cc[_0x3cadc7(0x3b5)]?-0x1:0x0);for(let _0x2da276=0x0;_0x2da276<_0x11277b['varedits'][_0x3cadc7(0x291)];_0x2da276++)_0x11277b[_0x3cadc7(0x9e)][_0x2da276][_0x3cadc7(0x3b5)]=_0x2da276+0x1;}return await _0x11277b[_0x3cadc7(0x502)](),_0x11277b;}catch(_0x30c78f){throw this['logger'][_0x3cadc7(0x44b)](this[_0x3cadc7(0x567)]+'\x20('+this[_0x3cadc7(0x5a3)][_0x3cadc7(0x5fe)]+_0x3cadc7(0x4f6)+_0x30c78f),new g(_0x3cadc7(0x345)+_0x30c78f);}}async[a0_0x4851ee(0x367)](_0x526a65){const _0x4e028d=a0_0x4851ee;try{this[_0x4e028d(0x5e8)][_0x4e028d(0x1bc)](this[_0x4e028d(0x567)]+'\x20('+this[_0x4e028d(0x5a3)][_0x4e028d(0x5fe)]+_0x4e028d(0x3fb));let _0x3d979d={'owner':this[_0x4e028d(0x5a3)]['wuid'],'name':_0x526a65[_0x4e028d(0x44c)]},_0x5b72d2=await D[_0x4e028d(0x3ce)](_0x3d979d);if(!_0x5b72d2)throw new Error('Flow\x20não\x20encontrado');_0x526a65[_0x4e028d(0x57f)][_0x4e028d(0x44c)]=_0x526a65[_0x4e028d(0x57f)][_0x4e028d(0x44c)][_0x4e028d(0x5b9)](),_0x526a65[_0x4e028d(0x57f)][_0x4e028d(0x44c)][_0x4e028d(0x4e5)]('_')&&(_0x526a65['variable'][_0x4e028d(0x44c)]=_0x526a65[_0x4e028d(0x57f)][_0x4e028d(0x44c)]['substring'](0x1)),_0x526a65[_0x4e028d(0x57f)][_0x4e028d(0x44c)]=_0x526a65[_0x4e028d(0x57f)][_0x4e028d(0x44c)][_0x4e028d(0x5b9)]();let _0x40f77a=_0x5b72d2[_0x4e028d(0x626)][_0x4e028d(0x487)](_0x29f9f9=>_0x29f9f9[_0x4e028d(0x44c)]===_0x526a65[_0x4e028d(0x57f)][_0x4e028d(0x44c)]);if(_0x40f77a?.[_0x4e028d(0x521)]===!0x0)throw new Error('Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.');if(_0x526a65[_0x4e028d(0x57f)]?.[_0x4e028d(0x522)]===!0x0){if(!_0x40f77a)return{'message':_0x4e028d(0x16e)};_0x5b72d2[_0x4e028d(0x626)]=_0x5b72d2['variables'][_0x4e028d(0x1a6)](_0x17ab5b=>_0x17ab5b[_0x4e028d(0x44c)]!==_0x526a65[_0x4e028d(0x57f)][_0x4e028d(0x44c)]);}else _0x40f77a?Object[_0x4e028d(0x154)](_0x40f77a,_0x526a65[_0x4e028d(0x57f)]):_0x5b72d2[_0x4e028d(0x626)][_0x4e028d(0x53b)](_0x526a65[_0x4e028d(0x57f)]);return await _0x5b72d2[_0x4e028d(0x502)](),_0x5b72d2;}catch(_0x50882e){throw this[_0x4e028d(0x5e8)]['error'](this[_0x4e028d(0x567)]+'\x20('+this[_0x4e028d(0x5a3)][_0x4e028d(0x5fe)]+_0x4e028d(0xf5)+_0x50882e),new g('Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20'+_0x50882e);}}async[a0_0x4851ee(0x238)](_0x4fb54a){const _0x52ee94=a0_0x4851ee;try{if(!this['AutomateSystem']?.[_0x52ee94(0x299)][_0x52ee94(0x25d)])throw new g(_0x52ee94(0x5ac));this[_0x52ee94(0x5e8)][_0x52ee94(0x1bc)](this[_0x52ee94(0x567)]+'\x20('+this['instance'][_0x52ee94(0x5fe)]+_0x52ee94(0x2aa));let _0x2581ef=(await this[_0x52ee94(0x2a3)]({'numbers':[_0x4fb54a['remoteJid']]}))[0x0];if(!_0x2581ef[_0x52ee94(0x656)]&&!(0x0,w[_0x52ee94(0x591)])(_0x2581ef['jid'])&&!_0x2581ef['jid'][_0x52ee94(0x5a9)]('@broadcast'))throw new g(_0x2581ef);let _0x5022ee=await D[_0x52ee94(0x3ce)]({'owner':this[_0x52ee94(0x5a3)]['wuid'],'name':_0x4fb54a['name']});if(!_0x5022ee)return this[_0x52ee94(0x5e8)][_0x52ee94(0x44b)](this[_0x52ee94(0x567)]+'\x20('+this[_0x52ee94(0x5a3)][_0x52ee94(0x5fe)]+'):\x20Flow\x20não\x20encontrado'),{'message':_0x52ee94(0x4c9)};let _0x14e8dc=await this[_0x52ee94(0x373)](_0x5022ee,_0x2581ef[_0x52ee94(0x1e2)],_0x4fb54a[_0x52ee94(0x36a)]);if(_0x14e8dc){this[_0x52ee94(0x5e8)][_0x52ee94(0x1bc)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x52ee94(0x503));let _0x80146d=await this[_0x52ee94(0x195)](_0x14e8dc);return _0x80146d&&await this[_0x52ee94(0x3df)](_0x14e8dc,_0x80146d,_0x14e8dc['remoteJid']),{'message':'Flow\x20iniciado\x20com\x20'+_0x4fb54a['remoteJid']};}}catch(_0x35060b){if(this[_0x52ee94(0x5e8)][_0x52ee94(0x44b)](this[_0x52ee94(0x567)]+'\x20('+this[_0x52ee94(0x5a3)][_0x52ee94(0x5fe)]+_0x52ee94(0x2a5)+_0x35060b),_0x35060b&&_0x35060b[_0x52ee94(0x5be)]&&Array[_0x52ee94(0x287)](_0x35060b[_0x52ee94(0x5be)])&&_0x35060b['message'][0x0]){let {jid:_0x2c485b,exists:_0x69184f}=_0x35060b[_0x52ee94(0x5be)][0x0];}throw new g(_0x52ee94(0xe7)+_0x35060b['message']);}}async[a0_0x4851ee(0x480)](_0x5807fd){const _0x44fa16=a0_0x4851ee;let _0x5a90b1=await F[_0x44fa16(0x1b0)]({'owner':this[_0x44fa16(0x5a3)][_0x44fa16(0x5fe)],'remoteJid':_0x5807fd,'status':_0x44fa16(0x465)},{'$set':{'status':_0x44fa16(0x45e)}});return this[_0x44fa16(0x5e8)][_0x44fa16(0x1bc)](this[_0x44fa16(0x567)]+'\x20('+this[_0x44fa16(0x5a3)]['wuid']+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.'),_0x5a90b1;}async[a0_0x4851ee(0x373)](_0x62692e,_0x382bce,_0x598872){const _0x3a1494=a0_0x4851ee;this['logger'][_0x3a1494(0x1bc)](this[_0x3a1494(0x567)]+'\x20('+this[_0x3a1494(0x5a3)][_0x3a1494(0x5fe)]+'):\x20Criando\x20nova\x20conversa'),await this[_0x3a1494(0x480)](_0x382bce);try{let _0x36edc6=require(_0x3a1494(0x541))[_0x3a1494(0x38b)],_0x22c6dc=Date[_0x3a1494(0x4b8)](),_0x41015e='start',_0x5d9c6e={},_0x1dc413={},_0x43cce7={..._0x62692e[_0x3a1494(0x4c8)],'chatLog':null},_0x46a4f8=await this['variablesToObject'](_0x43cce7['variables']),_0x4c978c=await this[_0x3a1494(0xf2)](_0x382bce),_0x389634={..._0x46a4f8,..._0x4c978c,'_remoteJid':_0x382bce},_0x3d9ef0={'lastReceivedMessage':_0x5d9c6e,'lastSendMessage':_0x1dc413,'lastBlockId':_0x41015e,'lastCondition':!0x0,'realVariables':_0x389634};_0x43cce7[_0x3a1494(0x64a)]=_0x3d9ef0,_0x43cce7[_0x3a1494(0x64a)][_0x3a1494(0x3eb)]={..._0x389634,..._0x598872},delete _0x43cce7[_0x3a1494(0x3bf)],_0x43cce7[_0x3a1494(0x3bf)]=new _0x36edc6(),_0x43cce7[_0x3a1494(0x3b2)]=_0x22c6dc,_0x43cce7[_0x3a1494(0x517)]=_0x3a1494(0x465),_0x43cce7[_0x3a1494(0x53a)]=_0x382bce;let _0x2e842a=await F[_0x3a1494(0x1a8)](_0x43cce7);return this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x3a1494(0x5a3)]['wuid']+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x2e842a?_0x43cce7:null;}catch(_0x11baa8){throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x3a1494(0x5a3)][_0x3a1494(0x5fe)]+_0x3a1494(0x247)+_0x11baa8),new g(_0x11baa8['message']);}}async[a0_0x4851ee(0x5f2)](_0x17d26a){const _0x1112d3=a0_0x4851ee;try{return this['logger'][_0x1112d3(0x1bc)](this[_0x1112d3(0x567)]+'\x20('+this[_0x1112d3(0x5a3)][_0x1112d3(0x5fe)]+_0x1112d3(0x479)),this[_0x1112d3(0x5e8)]['verbose'](this['instanceName']+'\x20('+this[_0x1112d3(0x5a3)][_0x1112d3(0x5fe)]+'):\x20Query\x20params:'+{'owner':this[_0x1112d3(0x5a3)][_0x1112d3(0x5fe)],'_id':_0x17d26a}),await F['findOne']({'owner':this['instance'][_0x1112d3(0x5fe)],'_id':_0x17d26a});}catch(_0x474f95){throw this[_0x1112d3(0x5e8)][_0x1112d3(0x44b)](this[_0x1112d3(0x567)]+'\x20('+this[_0x1112d3(0x5a3)][_0x1112d3(0x5fe)]+_0x1112d3(0x2af)+_0x474f95),new g(_0x1112d3(0x59d)+_0x474f95[_0x1112d3(0x5be)]);}}async[a0_0x4851ee(0x38a)](_0x188a64,_0x277d7f=0x64){const _0x5318b2=a0_0x4851ee;try{this[_0x5318b2(0x5e8)][_0x5318b2(0x1bc)](this[_0x5318b2(0x567)]+'\x20('+this[_0x5318b2(0x5a3)][_0x5318b2(0x5fe)]+_0x5318b2(0x22a));let _0x28a9d6={..._0x188a64,'owner':this[_0x5318b2(0x5a3)][_0x5318b2(0x5fe)]};return this[_0x5318b2(0x5e8)]['verbose'](_0x28a9d6),await F[_0x5318b2(0x487)](_0x28a9d6)[_0x5318b2(0x412)](_0x277d7f)[_0x5318b2(0x1dc)]({'lastInteraction':-0x1});}catch(_0x172f28){throw this[_0x5318b2(0x5e8)][_0x5318b2(0x44b)](this[_0x5318b2(0x567)]+'\x20('+this[_0x5318b2(0x5a3)][_0x5318b2(0x5fe)]+_0x5318b2(0x1f6)+_0x172f28),new g('Erro\x20ao\x20buscar\x20conversas:\x20'+_0x172f28[_0x5318b2(0x5be)]);}}async[a0_0x4851ee(0x5af)](_0x137695){const _0x848c69=a0_0x4851ee;try{return this[_0x848c69(0x5e8)][_0x848c69(0x1bc)](this['instanceName']+'\x20('+this[_0x848c69(0x5a3)][_0x848c69(0x5fe)]+'):\x20Deletando\x20conversa...'),this['logger'][_0x848c69(0x1bc)](this[_0x848c69(0x567)]+'\x20('+this[_0x848c69(0x5a3)]['wuid']+'):\x20Query\x20params:'+{'owner':this[_0x848c69(0x5a3)][_0x848c69(0x5fe)],'_id':_0x137695}),(await F['deleteOne']({'owner':this[_0x848c69(0x5a3)][_0x848c69(0x5fe)],'_id':_0x137695}))[_0x848c69(0x3e4)]===0x0?{'message':_0x848c69(0x40b)}:{'message':_0x848c69(0x36d)};}catch(_0x45a4c6){throw this[_0x848c69(0x5e8)][_0x848c69(0x44b)](this[_0x848c69(0x567)]+'\x20('+this[_0x848c69(0x5a3)][_0x848c69(0x5fe)]+_0x848c69(0x1d7)+_0x45a4c6),new g(_0x848c69(0x305)+_0x45a4c6[_0x848c69(0x5be)]);}}async[a0_0x4851ee(0x408)](_0x2c9a3a){const _0x19d0d8=a0_0x4851ee;try{let {_id:_0x46a5f8,chatLog:_0x448181,status:_0x2e33cc}=_0x2c9a3a;if(!_0x46a5f8)return{'message':_0x19d0d8(0x475)};let _0x1939c5={};if(_0x2e33cc!==void 0x0&&(_0x1939c5[_0x19d0d8(0x517)]=_0x2e33cc),Object['keys'](_0x1939c5)[_0x19d0d8(0x291)]===0x0)return{'message':_0x19d0d8(0x1b1)};let _0xbe2f81=this[_0x19d0d8(0x5a3)][_0x19d0d8(0x5fe)],_0x15a7ee=await F[_0x19d0d8(0x5d7)]({'_id':_0x46a5f8,'owner':_0xbe2f81},{'$set':_0x1939c5},{'new':!0x0});return _0x15a7ee||{'message':_0x19d0d8(0x369)};}catch(_0xf1750f){throw this[_0x19d0d8(0x5e8)][_0x19d0d8(0x44b)](this[_0x19d0d8(0x567)]+'\x20('+this[_0x19d0d8(0x5a3)][_0x19d0d8(0x5fe)]+_0x19d0d8(0x1d5)+_0xf1750f),new g(_0x19d0d8(0x1d9)+_0xf1750f['message']);}}async[a0_0x4851ee(0x319)](_0x30ef5e){const _0x4df101=a0_0x4851ee;try{_0x30ef5e['id']=this[_0x4df101(0x46c)](_0x30ef5e['id']);let {id:_0x1d1ea4,leadInfo:_0x25e51b}=_0x30ef5e;if(!_0x1d1ea4)throw new Error(_0x4df101(0x5a0));let _0x526a64=(_0x120ccb,_0x418a4a,_0x3aa9fd)=>{const _0xae76a=_0x4df101;_0x3aa9fd[_0xae76a(0x386)](_0x1b6c58=>{const _0x357656=_0xae76a;_0x120ccb[_0x1b6c58]!==void 0x0&&(_0x418a4a[_0x357656(0x146)+_0x1b6c58]=_0x120ccb[_0x1b6c58]);});},_0x12be1d={};if(_0x526a64(_0x25e51b,_0x12be1d,['nome',_0x4df101(0x64e),_0x4df101(0x4b4),'cpf',_0x4df101(0x517),_0x4df101(0x2ea),_0x4df101(0x4a2),_0x4df101(0x229),_0x4df101(0x20d)]),Array[_0x4df101(0x287)](_0x25e51b[_0x4df101(0xeb)])&&(_0x12be1d[_0x4df101(0x564)]=_0x25e51b[_0x4df101(0xeb)][_0x4df101(0x51a)](_0x2d608f=>({'_id':_0x2d608f[_0x4df101(0x3bf)],'value':_0x2d608f[_0x4df101(0x449)]}))),_0x30ef5e[_0x4df101(0x521)]['desativadoFluxoAte']!==void 0x0&&(_0x12be1d[_0x4df101(0x375)]=Number(_0x30ef5e[_0x4df101(0x521)][_0x4df101(0x45f)])),_0x30ef5e['unreadcount']!==void 0x0&&(_0x12be1d[_0x4df101(0x23f)]=Number(_0x30ef5e[_0x4df101(0x23f)])),Object[_0x4df101(0x2b5)](_0x12be1d)[_0x4df101(0x291)]===0x0)throw new Error(_0x4df101(0x1b1));let _0x21548d=this['instance'][_0x4df101(0x5fe)];if(!_0x21548d)throw new Error(_0x4df101(0x2c4));if(!await I[_0x4df101(0x3ce)]({'id':_0x30ef5e['id'],'owner':_0x21548d})){let _0x5e327d=(await this['whatsappNumber']({'numbers':[_0x30ef5e['id']]}))[0x0];if(!_0x5e327d[_0x4df101(0x656)]&&!(0x0,w['isJidGroup'])(_0x5e327d['jid'])&&!_0x5e327d['jid']['includes'](_0x4df101(0x264)))throw new g(_0x5e327d);_0x30ef5e['id']=_0x5e327d[_0x4df101(0x1e2)];}let _0x147d09=await I['findOneAndUpdate']({'id':_0x30ef5e['id'],'owner':_0x21548d},{'$set':_0x12be1d},{'new':!0x0,'upsert':!0x0});return _0x147d09&&G(this['instanceName'],'chats',{'chat':_0x147d09}),_0x147d09?(this[_0x4df101(0x5e8)][_0x4df101(0x1bc)](this[_0x4df101(0x567)]+'\x20('+this[_0x4df101(0x5a3)][_0x4df101(0x5fe)]+_0x4df101(0x259)+_0x147d09),_0x147d09):{'message':_0x4df101(0x494)};}catch(_0x4bd24d){throw this[_0x4df101(0x5e8)][_0x4df101(0x44b)](this[_0x4df101(0x567)]+'\x20('+this['instance'][_0x4df101(0x5fe)]+'):\x20Erro\x20ao\x20editar\x20o\x20chat:\x20'+_0x4bd24d),new g(_0x4df101(0x532)+_0x4bd24d[_0x4df101(0x5be)]);}}async[a0_0x4851ee(0x29f)](_0x47d052){const _0x24650a=a0_0x4851ee;let _0x4e4d70=this['instance']['wuid'];try{let _0x39b438=await ie[_0x24650a(0x5f4)](_0x4e4d70);_0x39b438||(_0x39b438=new ie({'_id':_0x4e4d70}),await _0x39b438[_0x24650a(0x502)]());let _0x4a701a=_0x47d052[_0x24650a(0x3bf)]?_0x39b438[_0x24650a(0x549)][_0x24650a(0x350)](_0xcc89b8=>_0xcc89b8[_0x24650a(0x3bf)]===_0x47d052[_0x24650a(0x3bf)]):-0x1;if(_0x47d052[_0x24650a(0x522)]&&_0x4a701a>-0x1)_0x39b438['agents'][_0x24650a(0xba)](_0x4a701a,0x1);else{if(_0x4a701a>-0x1){let _0x4c2e2c=_0x39b438[_0x24650a(0x549)][_0x4a701a];_0x47d052[_0x24650a(0x41c)]&&(_0x4c2e2c[_0x24650a(0x41c)]=_0x47d052[_0x24650a(0x41c)]),_0x47d052['name']&&(_0x4c2e2c[_0x24650a(0x44c)]=_0x47d052[_0x24650a(0x44c)]),_0x47d052[_0x24650a(0x4b4)]&&(_0x4c2e2c['email']=_0x47d052[_0x24650a(0x4b4)]),_0x47d052[_0x24650a(0x612)]&&(_0x4c2e2c[_0x24650a(0x612)]=_0x47d052[_0x24650a(0x612)]);}else _0x39b438[_0x24650a(0x549)][_0x24650a(0x53b)]({'_id':_0x47d052[_0x24650a(0x3bf)]||new be[(_0x24650a(0x481))]['Types'][(_0x24650a(0x38b))]()['toString'](),'fone':_0x47d052[_0x24650a(0x41c)],'name':_0x47d052['name'],'email':_0x47d052[_0x24650a(0x4b4)],'role':_0x47d052[_0x24650a(0x612)]});}let _0x48a91d=await _0x39b438[_0x24650a(0x502)]();return this[_0x24650a(0x34e)]=_0x48a91d,this[_0x24650a(0x5e8)][_0x24650a(0x1bc)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20alterando\x20this.AutomateSystem'),this['logger'][_0x24650a(0x1bc)](this[_0x24650a(0x567)]+'\x20('+this[_0x24650a(0x5a3)][_0x24650a(0x5fe)]+'):\x20'+this['AutomateSystem']),_0x48a91d;}catch(_0x459a9f){throw this[_0x24650a(0x5e8)]['error'](this[_0x24650a(0x567)]+'\x20('+this[_0x24650a(0x5a3)]['wuid']+'):\x20Erro\x20ao\x20editar\x20agentes:\x20'+_0x459a9f),new g(_0x24650a(0xaf)+_0x459a9f[_0x24650a(0x5be)]);}}async[a0_0x4851ee(0x58c)](_0x1c572d){const _0x8a070e=a0_0x4851ee;let _0x28f7f3=this[_0x8a070e(0x5a3)][_0x8a070e(0x5fe)];try{let _0x531ffc=await ie['findById'](_0x28f7f3);_0x531ffc||(_0x531ffc=new ie({'_id':_0x28f7f3}),await _0x531ffc['save']());let _0x500f32=_0x1c572d['_id']?_0x531ffc[_0x8a070e(0xeb)][_0x8a070e(0x350)](_0x2e03bd=>_0x2e03bd['_id']===_0x1c572d[_0x8a070e(0x3bf)]):-0x1,_0x5fda3e=!0x1,_0x5f54b6=_0x531ffc[_0x8a070e(0xeb)][_0x8a070e(0x1b9)](_0x5b277e=>_0x5b277e['order']===_0x1c572d[_0x8a070e(0x3b5)]);if(_0x1c572d[_0x8a070e(0x522)]&&_0x500f32>-0x1)_0x531ffc[_0x8a070e(0xeb)][_0x8a070e(0xba)](_0x500f32,0x1),_0x5fda3e=!0x0;else{if(_0x500f32>-0x1){if(_0x531ffc[_0x8a070e(0xeb)][_0x8a070e(0x1b9)](_0x1b3f74=>_0x1b3f74[_0x8a070e(0x44c)]===_0x1c572d[_0x8a070e(0x44c)]&&_0x1b3f74[_0x8a070e(0x3bf)]!==_0x1c572d[_0x8a070e(0x3bf)]))throw new Error(_0x8a070e(0x3bd));let _0x41bd59=_0x531ffc['customFields'][_0x500f32];_0x1c572d['order']&&(_0x5f54b6||!Number[_0x8a070e(0x652)](_0x1c572d[_0x8a070e(0x3b5)]))&&(_0x41bd59[_0x8a070e(0x3b5)]=_0x1c572d[_0x8a070e(0x3b5)],_0x5fda3e=!0x0),_0x1c572d['name']&&(_0x41bd59[_0x8a070e(0x44c)]=_0x1c572d[_0x8a070e(0x44c)]);}else{if(_0x531ffc[_0x8a070e(0xeb)][_0x8a070e(0x1b9)](_0x39ba3c=>_0x39ba3c[_0x8a070e(0x44c)]===_0x1c572d[_0x8a070e(0x44c)]&&_0x39ba3c[_0x8a070e(0x3bf)]!==_0x1c572d[_0x8a070e(0x3bf)]))throw new Error(_0x8a070e(0x3bd));_0x531ffc[_0x8a070e(0xeb)][_0x8a070e(0x53b)]({'_id':_0x1c572d['_id']||new be[(_0x8a070e(0x481))][(_0x8a070e(0x180))][(_0x8a070e(0x38b))]()[_0x8a070e(0x409)](),'order':_0x1c572d[_0x8a070e(0x3b5)],'name':_0x1c572d[_0x8a070e(0x44c)]}),_0x5fda3e=!0x0;}}if(_0x5fda3e){_0x531ffc['customFields']['sort']((_0x12633,_0x494c45)=>_0x12633[_0x8a070e(0x3b5)]>_0x494c45[_0x8a070e(0x3b5)]?0x1:_0x494c45[_0x8a070e(0x3b5)]>_0x12633['order']?-0x1:0x0);for(let _0x2a5cf7=0x0;_0x2a5cf7<_0x531ffc[_0x8a070e(0xeb)][_0x8a070e(0x291)];_0x2a5cf7++)_0x531ffc['customFields'][_0x2a5cf7][_0x8a070e(0x3b5)]=_0x2a5cf7+0x1;}let _0x51e491=await _0x531ffc[_0x8a070e(0x502)]();return this[_0x8a070e(0x34e)]=_0x51e491,this['logger']['verbose'](this[_0x8a070e(0x567)]+'\x20('+this[_0x8a070e(0x5a3)][_0x8a070e(0x5fe)]+_0x8a070e(0x36e)),this[_0x8a070e(0x5e8)][_0x8a070e(0x1bc)](this['instanceName']+'\x20('+this[_0x8a070e(0x5a3)][_0x8a070e(0x5fe)]+'):\x20'+this[_0x8a070e(0x34e)]),_0x51e491;}catch(_0xedbcb1){throw this[_0x8a070e(0x5e8)][_0x8a070e(0x44b)](this[_0x8a070e(0x567)]+'\x20('+this[_0x8a070e(0x5a3)][_0x8a070e(0x5fe)]+'):\x20Erro\x20ao\x20tentar\x20updateCustomFields:\x20'+_0xedbcb1),new g(_0x8a070e(0x62d)+_0xedbcb1['message']);}}async['updateFlowConfig'](_0x3b8cb2){const _0x378afc=a0_0x4851ee;let _0x5b4b70=this[_0x378afc(0x5a3)][_0x378afc(0x5fe)];try{let _0x4e993d=await ie['findById'](_0x5b4b70);_0x4e993d||(_0x4e993d=new ie({'_id':_0x5b4b70}),await _0x4e993d[_0x378afc(0x502)]()),_0x4e993d[_0x378afc(0x299)][_0x378afc(0x25d)]=_0x3b8cb2?.['enabled']!==void 0x0?_0x3b8cb2?.[_0x378afc(0x25d)]:_0x4e993d[_0x378afc(0x299)]['enabled'],_0x4e993d['flowConfig']['ignoreGroups']=_0x3b8cb2?.['ignoreGroups']!==void 0x0?_0x3b8cb2?.[_0x378afc(0x2d0)]:_0x4e993d[_0x378afc(0x299)][_0x378afc(0x2d0)],_0x4e993d[_0x378afc(0x299)][_0x378afc(0xa0)]=_0x3b8cb2?.[_0x378afc(0xa0)]??_0x4e993d['flowConfig'][_0x378afc(0xa0)],_0x4e993d[_0x378afc(0x299)][_0x378afc(0x48d)]=_0x3b8cb2?.['stopConversation']??_0x4e993d[_0x378afc(0x299)]['stopConversation'],_0x4e993d[_0x378afc(0x299)][_0x378afc(0x126)]=_0x3b8cb2?.[_0x378afc(0x126)]??_0x4e993d['flowConfig'][_0x378afc(0x126)];let _0x3b6c89=await _0x4e993d[_0x378afc(0x502)]();return this[_0x378afc(0x34e)]=_0x3b6c89,this['logger']['verbose'](this[_0x378afc(0x567)]+'\x20('+this[_0x378afc(0x5a3)]['wuid']+_0x378afc(0x18a)),this[_0x378afc(0x5e8)][_0x378afc(0x1bc)](this['instanceName']+'\x20('+this['instance'][_0x378afc(0x5fe)]+_0x378afc(0x259)+this[_0x378afc(0x34e)]),_0x3b6c89;}catch(_0x29144a){throw this[_0x378afc(0x5e8)][_0x378afc(0x44b)](this['instanceName']+'\x20('+this[_0x378afc(0x5a3)][_0x378afc(0x5fe)]+'):\x20Erro\x20ao\x20editar\x20agentes:\x20'+_0x29144a),new g('Erro\x20ao\x20editar\x20agentes:\x20'+_0x29144a[_0x378afc(0x5be)]);}}async['getAutomateSystem'](){const _0x118f48=a0_0x4851ee;let _0x2e2030=this[_0x118f48(0x5a3)][_0x118f48(0x5fe)];try{let _0x8a9afa=await ie[_0x118f48(0x5f4)](_0x2e2030);return _0x8a9afa||(_0x8a9afa=new ie({'_id':_0x2e2030})),_0x8a9afa[_0x118f48(0x299)]=_0x8a9afa[_0x118f48(0x299)]||{},_0x8a9afa[_0x118f48(0x299)][_0x118f48(0x25d)]===void 0x0&&(_0x8a9afa[_0x118f48(0x299)]['enabled']=!0x1),_0x8a9afa['flowConfig'][_0x118f48(0x2d0)]===void 0x0&&(_0x8a9afa[_0x118f48(0x299)][_0x118f48(0x2d0)]=!0x0),_0x8a9afa['flowConfig'][_0x118f48(0xa0)]===void 0x0&&(_0x8a9afa[_0x118f48(0x299)][_0x118f48(0xa0)]='!'),_0x8a9afa['flowConfig'][_0x118f48(0x48d)]===void 0x0&&(_0x8a9afa[_0x118f48(0x299)][_0x118f48(0x48d)]='!stop'),_0x8a9afa[_0x118f48(0x299)]['stopMinutes']===void 0x0&&(_0x8a9afa['flowConfig'][_0x118f48(0x126)]=0x14),await _0x8a9afa[_0x118f48(0x502)](),this['AutomateSystem']=_0x8a9afa,this[_0x118f48(0x5e8)]['verbose'](this[_0x118f48(0x567)]+'\x20('+this[_0x118f48(0x5a3)][_0x118f48(0x5fe)]+_0x118f48(0x446)),this[_0x118f48(0x5e8)]['verbose'](this[_0x118f48(0x34e)]),_0x8a9afa;}catch(_0x3ad968){throw this[_0x118f48(0x5e8)][_0x118f48(0x44b)](this['instanceName']+'\x20('+this[_0x118f48(0x5a3)][_0x118f48(0x5fe)]+_0x118f48(0x134)+_0x3ad968[_0x118f48(0x5be)]),new g(_0x118f48(0x272)+_0x3ad968[_0x118f48(0x5be)]);}}async[a0_0x4851ee(0x157)](){const _0x31fa3f=a0_0x4851ee;let _0x571edb=()=>{const _0x4348db=a0_0x15b7;this['logger'][_0x4348db(0x1bc)](this[_0x4348db(0x567)]+'\x20('+this[_0x4348db(0x5a3)][_0x4348db(0x5fe)]+_0x4348db(0x150)+this[_0x4348db(0x364)]+'\x20saindo\x20da\x20função');},_0x56735e=async()=>{const _0x426b96=a0_0x15b7;this[_0x426b96(0x5e8)]['verbose'](this[_0x426b96(0x567)]+'\x20('+this['instance'][_0x426b96(0x5fe)]+_0x426b96(0x136));let _0x3d8ff2=Date[_0x426b96(0x4b8)]()-0xc*0x3c*0x3c*0x3e8;return await U[_0x426b96(0x487)]({'owner':this['instance'][_0x426b96(0x5fe)],'status':{'$in':[_0x426b96(0x44e),_0x426b96(0x156)]},'$or':[{'when':{'$lte':Date[_0x426b96(0x4b8)](),'$gte':_0x3d8ff2}},{'when':0x0}]});},_0x1c7b68=async _0x383bb7=>{const _0x4ede1a=a0_0x15b7;for(let _0x4cc84d of _0x383bb7){if(!await U[_0x4ede1a(0x5d7)]({'_id':_0x4cc84d[_0x4ede1a(0x3bf)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x4ede1a(0x4b8)]()-0x1770}}]},{'$set':{'startSend':Date[_0x4ede1a(0x4b8)]()}}))return;if(!this[_0x4ede1a(0x348)]){this[_0x4ede1a(0x5e8)][_0x4ede1a(0x1bc)](this[_0x4ede1a(0x567)]+'\x20('+this[_0x4ede1a(0x5a3)][_0x4ede1a(0x5fe)]+_0x4ede1a(0x2cb));break;}(!_0x4cc84d[_0x4ede1a(0x4e2)]||_0x4cc84d[_0x4ede1a(0x4e2)][_0x4ede1a(0x291)]===0x0)&&(_0x4cc84d=await U[_0x4ede1a(0x2ef)](_0x4cc84d[_0x4ede1a(0x3bf)],{'$set':{'status':_0x4ede1a(0x156),'remoteJidsRemaining':[..._0x4cc84d[_0x4ede1a(0x17a)]]}},{'new':!0x0}));for(let _0x2af207 of _0x4cc84d[_0x4ede1a(0x4e2)]){if(this[_0x4ede1a(0x205)]=Date[_0x4ede1a(0x4b8)](),_0x4cc84d[_0x4ede1a(0x144)][_0x4ede1a(0x1b9)](_0xee1fc6=>_0xee1fc6[_0x4ede1a(0x53a)]===_0x2af207)){this[_0x4ede1a(0x5e8)][_0x4ede1a(0x1bc)](this[_0x4ede1a(0x567)]+'\x20('+this['instance'][_0x4ede1a(0x5fe)]+_0x4ede1a(0x4db)+_0x2af207+_0x4ede1a(0x404));continue;}try{let _0x1fc2eb=await this[_0x4ede1a(0x62f)](_0x2af207,_0x4cc84d),_0x29d22f={'remoteJid':_0x2af207,'error':_0x1fc2eb[_0x4ede1a(0x44b)],'id':_0x1fc2eb['id']||null,'error_log':_0x1fc2eb[_0x4ede1a(0x182)]||null,'log_timestamp':Date['now']()};if((await U['findByIdAndUpdate'](_0x4cc84d[_0x4ede1a(0x3bf)],{'$push':{'messagesSend':_0x29d22f},'$pull':{'remoteJidsRemaining':_0x2af207}},{'new':!0x0}))[_0x4ede1a(0x517)]===_0x4ede1a(0x232)){this[_0x4ede1a(0x5e8)][_0x4ede1a(0x1bc)](this['instanceName']+'\x20('+this[_0x4ede1a(0x5a3)][_0x4ede1a(0x5fe)]+_0x4ede1a(0x284)+_0x4cc84d[_0x4ede1a(0x3bf)]+_0x4ede1a(0x572));break;}if(!this[_0x4ede1a(0x348)]){this[_0x4ede1a(0x5e8)][_0x4ede1a(0x1bc)](this[_0x4ede1a(0x567)]+'\x20('+this[_0x4ede1a(0x5a3)][_0x4ede1a(0x5fe)]+'):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.');break;}if(!this[_0x4ede1a(0x364)]){this['logger'][_0x4ede1a(0x1bc)](this[_0x4ede1a(0x567)]+'\x20('+this[_0x4ede1a(0x5a3)][_0x4ede1a(0x5fe)]+_0x4ede1a(0x284)+_0x4cc84d[_0x4ede1a(0x3bf)]+'\x20foi\x20interrompido\x20pelo\x20usuário.');break;}let _0xe608c4=this[_0x4ede1a(0x121)](_0x4cc84d[_0x4ede1a(0x4da)],_0x4cc84d[_0x4ede1a(0x3bb)]);await this[_0x4ede1a(0x360)](_0xe608c4);}catch(_0x47b1be){this['logger'][_0x4ede1a(0x44b)](this[_0x4ede1a(0x567)]+'\x20('+this[_0x4ede1a(0x5a3)][_0x4ede1a(0x5fe)]+_0x4ede1a(0x282)+_0x2af207+':\x20'+_0x47b1be[_0x4ede1a(0x5be)]);let _0xbfb6ed={'remoteJid':_0x2af207,'status':'error','timestamp':Date[_0x4ede1a(0x4b8)](),'error':_0x47b1be[_0x4ede1a(0x5be)]};await U[_0x4ede1a(0x2ef)](_0x4cc84d['_id'],{'$push':{'messagesSend':_0xbfb6ed},'$pull':{'remoteJidsRemaining':_0x2af207}},{'new':!0x0});}}let _0x2a9917=await U[_0x4ede1a(0x5f4)](_0x4cc84d[_0x4ede1a(0x3bf)]);_0x2a9917[_0x4ede1a(0x4e2)][_0x4ede1a(0x291)]===0x0&&_0x2a9917[_0x4ede1a(0x517)]!==_0x4ede1a(0x232)&&await U[_0x4ede1a(0x2ef)](_0x4cc84d[_0x4ede1a(0x3bf)],{'$set':{'status':'done'}},{'new':!0x0}),await new Promise(_0x47ccf5=>setTimeout(_0x47ccf5,0x1388));}},_0xa8e35b=async()=>{const _0x47961f=a0_0x15b7;let _0x3dd0b2=await U[_0x47961f(0x3ce)]({'owner':this['instance']['wuid'],'status':_0x47961f(0x44e),'when':{'$gt':Date['now']()}})[_0x47961f(0x1dc)]({'when':0x1});_0x3dd0b2&&_0x3dd0b2[_0x47961f(0x51d)]-Date[_0x47961f(0x4b8)]()<=0x5265c00?this[_0x47961f(0x1e5)]=_0x3dd0b2[_0x47961f(0x51d)]-Date['now']():this[_0x47961f(0x1e5)]=(0x3c+Math[_0x47961f(0x5d5)](Math['random']()*0x3c))*0x3c*0x3e8,this[_0x47961f(0x1e5)]=Math[_0x47961f(0x166)](this[_0x47961f(0x1e5)],0x7d0);let _0x403b98=Math[_0x47961f(0x4fe)](this['delayMessage']/0xea60);if(_0x3dd0b2){let _0x356899=new Date(_0x3dd0b2[_0x47961f(0x51d)])[_0x47961f(0x405)]();this['logger']['verbose'](this[_0x47961f(0x567)]+'\x20('+this[_0x47961f(0x5a3)][_0x47961f(0x5fe)]+_0x47961f(0x25b)+_0x356899+',\x20fará\x20nova\x20verificação\x20em\x20'+_0x403b98+'\x20minutos');}else this[_0x47961f(0x5e8)][_0x47961f(0x1bc)](this[_0x47961f(0x567)]+'\x20('+this[_0x47961f(0x5a3)]['wuid']+_0x47961f(0x3e3)+_0x403b98+_0x47961f(0x543));setTimeout(()=>this[_0x47961f(0x157)](),this[_0x47961f(0x1e5)]);};if(this[_0x31fa3f(0x364)]&&Date['now']()-this['lastSend']<0x1d4c0){_0x571edb();return;}try{let _0x4ac9ae=await _0x56735e();_0x4ac9ae[_0x31fa3f(0x291)]===0x0?this[_0x31fa3f(0x5e8)][_0x31fa3f(0x1bc)](this['instanceName']+'\x20('+this['instance'][_0x31fa3f(0x5fe)]+'):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.'):(this[_0x31fa3f(0x364)]=_0x4ac9ae[0x0][_0x31fa3f(0x3bf)],await _0x1c7b68(_0x4ac9ae)),await _0xa8e35b(),this['processingScheduleMessageId']=null;}catch(_0x22b39f){this['logger'][_0x31fa3f(0x44b)](_0x31fa3f(0x542)+_0x22b39f['message']);}}[a0_0x4851ee(0x121)](_0x38e9ed,_0x3fe924){const _0x31b892=a0_0x4851ee;return _0x38e9ed=Math[_0x31b892(0x166)](0.5,_0x38e9ed),_0x3fe924=Math[_0x31b892(0x166)](0x3,_0x3fe924),Math['floor'](Math[_0x31b892(0xb2)]()*(_0x3fe924-_0x38e9ed+0x1)+_0x38e9ed)*0x3e8;}[a0_0x4851ee(0x360)](_0x1d6296){return new Promise(_0x28d8d8=>setTimeout(_0x28d8d8,_0x1d6296));}async[a0_0x4851ee(0xf2)](_0x32e4fb){const _0x4b13c1=a0_0x4851ee;if(!this[_0x4b13c1(0x34e)]&&(await this[_0x4b13c1(0x2e8)](),!this['AutomateSystem']))return null;_0x32e4fb=this['createJid'](_0x32e4fb);let _0x4e93e4=await I[_0x4b13c1(0x3ce)]({'id':_0x32e4fb,'owner':this['instance']['wuid']}),_0x4975a7={};if(_0x4e93e4&&_0x4e93e4[_0x4b13c1(0x521)]){let _0x4de96e=_0x4e93e4['leadInfo'];typeof _0x4de96e['nome']==_0x4b13c1(0x579)&&(_0x4975a7[_0x4b13c1(0xf4)]=_0x4de96e[_0x4b13c1(0xf4)]),typeof _0x4de96e[_0x4b13c1(0x64e)]==_0x4b13c1(0x579)&&(_0x4975a7[_0x4b13c1(0x64e)]=_0x4de96e['nomecompleto']),typeof _0x4de96e['email']==_0x4b13c1(0x579)&&(_0x4975a7[_0x4b13c1(0x4b4)]=_0x4de96e[_0x4b13c1(0x4b4)]),typeof _0x4de96e[_0x4b13c1(0x431)]==_0x4b13c1(0x579)&&(_0x4975a7[_0x4b13c1(0x431)]=_0x4de96e[_0x4b13c1(0x431)]),typeof _0x4de96e[_0x4b13c1(0x517)]==_0x4b13c1(0x579)&&(_0x4975a7[_0x4b13c1(0x517)]=_0x4de96e[_0x4b13c1(0x517)]),typeof _0x4de96e[_0x4b13c1(0x2ea)]=='string'&&(_0x4975a7[_0x4b13c1(0x2ea)]=_0x4de96e[_0x4b13c1(0x2ea)]),typeof _0x4de96e[_0x4b13c1(0x20d)]==_0x4b13c1(0x579)&&(_0x4975a7['responsavelid']=_0x4de96e[_0x4b13c1(0x20d)]),Array[_0x4b13c1(0x287)](_0x4de96e[_0x4b13c1(0x4a2)])&&(_0x4975a7[_0x4b13c1(0x4a2)]=_0x4de96e[_0x4b13c1(0x4a2)][_0x4b13c1(0x273)](',\x20'));}return _0x4e93e4&&_0x4e93e4['leadInfo']&&_0x4e93e4[_0x4b13c1(0x521)][_0x4b13c1(0xeb)]&&_0x4e93e4['leadInfo']['customFields']['forEach'](_0x295902=>{const _0x5ed2ef=_0x4b13c1;let _0x20f5b9=this[_0x5ed2ef(0x34e)]?.[_0x5ed2ef(0xeb)][_0x5ed2ef(0x487)](_0xfea06d=>_0xfea06d[_0x5ed2ef(0x3bf)]===_0x295902['_id']);_0x20f5b9&&(_0x4975a7[_0x20f5b9['name']]=_0x295902[_0x5ed2ef(0x449)]);}),_0x4975a7;}async[a0_0x4851ee(0x4a8)](_0x1c6229,_0x1047e6){const _0xbb9b37=a0_0x4851ee;let _0x22e02c=await this[_0xbb9b37(0xf2)](_0x1047e6);return this[_0xbb9b37(0x217)](_0x1c6229,_0x22e02c);}async[a0_0x4851ee(0xe2)](_0x281243){const _0xa41c39=a0_0x4851ee;try{if(this['logger'][_0xa41c39(0x1bc)](this[_0xa41c39(0x567)]+'\x20('+this[_0xa41c39(0x5a3)][_0xa41c39(0x5fe)]+_0xa41c39(0x2ff)),_0x281243[_0xa41c39(0x522)]&&_0x281243[_0xa41c39(0x3bf)]){if(this['processingScheduleMessageId']===_0x281243['_id'][_0xa41c39(0x409)]())throw new Error(_0xa41c39(0x19a));let _0x4a471a=await U[_0xa41c39(0x595)](_0x281243[_0xa41c39(0x3bf)]);return setTimeout(()=>this[_0xa41c39(0x157)](),0x7d0),_0x4a471a;}let _0x19bd57;if(_0x281243[_0xa41c39(0x3bf)]&&(_0x19bd57=await U['findOne']({'owner':this[_0xa41c39(0x5a3)][_0xa41c39(0x5fe)],'_id':_0x281243[_0xa41c39(0x3bf)]})),_0x19bd57){let _0x508ddf=_0x281243;this[_0xa41c39(0x364)]===_0x19bd57[_0xa41c39(0x3bf)]['toString']()&&(_0x508ddf={'status':_0x281243[_0xa41c39(0x517)],'_id':_0x281243['_id']});let _0x1e8ff8=await U[_0xa41c39(0x2ef)](_0x19bd57['_id'],{'$set':_0x508ddf},{'new':!0x0});return setTimeout(()=>this[_0xa41c39(0x157)](),0x7d0),_0x1e8ff8;}else{_0x281243[_0xa41c39(0x101)]=this[_0xa41c39(0x5a3)][_0xa41c39(0x5fe)];let _0xaa6b3a=await new U(_0x281243)[_0xa41c39(0x502)]();return setTimeout(()=>this[_0xa41c39(0x157)](),0x7d0),_0xaa6b3a;}}catch(_0x24f057){throw this[_0xa41c39(0x5e8)][_0xa41c39(0x44b)](this[_0xa41c39(0x567)]+'\x20('+this[_0xa41c39(0x5a3)][_0xa41c39(0x5fe)]+_0xa41c39(0x1f9)+_0x24f057),new g('Erro:'+_0x24f057[_0xa41c39(0x5be)]);}}async['getScheduleMessage'](){const _0x265ac5=a0_0x4851ee;try{return await U[_0x265ac5(0x487)]({'owner':this['instance']['wuid']})[_0x265ac5(0x1dc)]({'when':0x1});}catch(_0x52bbee){throw this[_0x265ac5(0x5e8)][_0x265ac5(0x44b)](this[_0x265ac5(0x567)]+'\x20('+this[_0x265ac5(0x5a3)][_0x265ac5(0x5fe)]+_0x265ac5(0xf1)+_0x52bbee),new g(_0x265ac5(0x1bf)+_0x52bbee[_0x265ac5(0x5be)]);}}async[a0_0x4851ee(0x1fa)](){const _0x4cf11d=a0_0x4851ee;try{return await U['deleteMany']({'owner':this[_0x4cf11d(0x5a3)][_0x4cf11d(0x5fe)],'status':_0x4cf11d(0x4ff)}),this['logger'][_0x4cf11d(0x1bc)](this[_0x4cf11d(0x567)]+'\x20('+this[_0x4cf11d(0x5a3)]['wuid']+_0x4cf11d(0x621)),this['getScheduleMessage']();}catch(_0x1dc878){throw this[_0x4cf11d(0x5e8)][_0x4cf11d(0x44b)](this[_0x4cf11d(0x567)]+'\x20('+this[_0x4cf11d(0x5a3)][_0x4cf11d(0x5fe)]+_0x4cf11d(0x1c1)+_0x1dc878),new g('Erro:'+_0x1dc878['message']);}}async[a0_0x4851ee(0x62f)](_0x2426a5,_0x2fd97e){const _0x4d5faf=a0_0x4851ee;try{switch(_0x2fd97e[_0x4d5faf(0x620)]){case'text':return await this[_0x4d5faf(0x43e)](_0x2fd97e,_0x2426a5);case'media':return await this[_0x4d5faf(0x4ed)](_0x2fd97e,_0x2426a5);case _0x4d5faf(0x467):return await this[_0x4d5faf(0x118)](_0x2fd97e,_0x2426a5);default:return this[_0x4d5faf(0x5e8)]['error'](this[_0x4d5faf(0x567)]+'\x20('+this['instance']['wuid']+'):\x20Comando\x20desconhecido:\x20'+_0x2fd97e[_0x4d5faf(0x620)]),{'status':'error','detail':_0x4d5faf(0x47c)};}}catch(_0x5ccf78){return this[_0x4d5faf(0x5e8)]['error'](this['instanceName']+'\x20('+this[_0x4d5faf(0x5a3)][_0x4d5faf(0x5fe)]+'):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20'+_0x5ccf78),{'status':'error','detail':_0x5ccf78[_0x4d5faf(0x5be)]};}}[a0_0x4851ee(0x428)](_0x40ca61){const _0xd3747e=a0_0x4851ee;let _0x5ad3b3=_0x40ca61[_0xd3747e(0x4dd)]('|'),_0x21fa1a=Math[_0xd3747e(0x5d5)](Math[_0xd3747e(0xb2)]()*_0x5ad3b3['length']);return _0x5ad3b3[_0x21fa1a][_0xd3747e(0x5b9)]();}async[a0_0x4851ee(0x43e)](_0x50f567,_0x52c46f){const _0x2ba704=a0_0x4851ee;if(this['logger'][_0x2ba704(0x1bc)](this[_0x2ba704(0x567)]+'\x20('+this[_0x2ba704(0x5a3)]['wuid']+_0x2ba704(0x3d6)),!_0x50f567[_0x2ba704(0x5be)][_0x2ba704(0x52d)]||_0x50f567[_0x2ba704(0x5be)][_0x2ba704(0x52d)]['length']===0x0)return{'error':!0x0,'error_log':_0x2ba704(0x1c2)};let _0x47aff0=this[_0x2ba704(0x428)](_0x50f567[_0x2ba704(0x5be)][_0x2ba704(0x52d)]),_0x3de419=await this[_0x2ba704(0x4a8)](_0x47aff0,_0x52c46f),_0x54f589={'number':_0x52c46f,'options':{'delay':_0x50f567['message'][_0x2ba704(0x49c)]},'textMessage':{'text':_0x3de419}},_0x1792b1=null;try{let _0x3726f2=await this[_0x2ba704(0x2f5)](_0x54f589);if(_0x3726f2&&_0x3726f2[_0x2ba704(0x517)])return{'error':!0x1,'id':_0x3726f2[_0x2ba704(0x67c)]['id']};_0x1792b1=JSON['stringify'](_0x3726f2),this['logger']['verbose'](this[_0x2ba704(0x567)]+'\x20('+this[_0x2ba704(0x5a3)][_0x2ba704(0x5fe)]+'):\x20'+_0x1792b1);}catch(_0x5a7766){this[_0x2ba704(0x5e8)][_0x2ba704(0x44b)](this[_0x2ba704(0x567)]+'\x20('+this[_0x2ba704(0x5a3)][_0x2ba704(0x5fe)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:'+_0x5a7766),_0x1792b1=_0x5a7766[_0x2ba704(0x5be)];}if(_0x1792b1)return{'error':!0x0,'error_log':(typeof _0x1792b1==_0x2ba704(0x658)?JSON[_0x2ba704(0x63a)](_0x1792b1,null,0x2):_0x1792b1)[_0x2ba704(0x582)](/[\[\]{}\n]/g,'\x20')[_0x2ba704(0x582)](/  +/g,'\x20')};}async['scheduleSendMedia'](_0x408aee,_0x2c32f6){const _0x28c8ca=a0_0x4851ee;this[_0x28c8ca(0x5e8)][_0x28c8ca(0x1bc)](this[_0x28c8ca(0x567)]+'\x20('+this[_0x28c8ca(0x5a3)][_0x28c8ca(0x5fe)]+'):\x20Enviando\x20mídia');let _0x257ac0;if(_0x408aee[_0x28c8ca(0x5be)][_0x28c8ca(0x52d)]&&_0x408aee['message'][_0x28c8ca(0x52d)]['length']>0x0){let _0x58df3a=this['getRandomText'](_0x408aee[_0x28c8ca(0x5be)][_0x28c8ca(0x52d)]);_0x257ac0=await this['replaceVariablesChat'](_0x58df3a,_0x2c32f6);}let _0x376f53={'number':_0x2c32f6,'options':{'delay':_0x408aee[_0x28c8ca(0x5be)][_0x28c8ca(0x49c)]},'mediaMessage':{'mediatype':_0x408aee['message']['mediatype'],'caption':_0x257ac0,'media':_0x408aee[_0x28c8ca(0x5be)][_0x28c8ca(0x3c8)]}},_0x3e3805=null;try{let _0x452303=await this[_0x28c8ca(0x590)](_0x376f53);if(_0x452303&&_0x452303['status'])return{'error':!0x1,'id':_0x452303[_0x28c8ca(0x67c)]['id']};_0x3e3805=JSON[_0x28c8ca(0x63a)](_0x452303),this['logger'][_0x28c8ca(0x1bc)](this['instanceName']+'\x20('+this[_0x28c8ca(0x5a3)][_0x28c8ca(0x5fe)]+_0x28c8ca(0x259)+_0x3e3805);}catch(_0x5bb645){this[_0x28c8ca(0x5e8)][_0x28c8ca(0x44b)](this[_0x28c8ca(0x567)]+'\x20('+this['instance'][_0x28c8ca(0x5fe)]+_0x28c8ca(0x570)+_0x5bb645[_0x28c8ca(0x5be)]),_0x3e3805=_0x5bb645[_0x28c8ca(0x5be)];}if(_0x3e3805)return{'error':!0x0,'error_log':(typeof _0x3e3805=='object'?JSON[_0x28c8ca(0x63a)](_0x3e3805,null,0x2):_0x3e3805)['replace'](/[\[\]{}\n]/g,'\x20')[_0x28c8ca(0x582)](/  +/g,'\x20')};}async[a0_0x4851ee(0x118)](_0x13e876,_0x3613ad){const _0x17f402=a0_0x4851ee;this[_0x17f402(0x5e8)][_0x17f402(0x1bc)](this[_0x17f402(0x567)]+'\x20('+this[_0x17f402(0x5a3)][_0x17f402(0x5fe)]+'):\x20Enviando\x20áudio');let _0x39b864={'number':_0x3613ad,'options':{'delay':_0x13e876['message'][_0x17f402(0x49c)]},'audioMessage':{'audio':_0x13e876[_0x17f402(0x5be)][_0x17f402(0x3c8)]}},_0x22ed97=null;try{let _0x4716bd=await this[_0x17f402(0x4a9)](_0x39b864);if(_0x4716bd&&_0x4716bd[_0x17f402(0x517)])return{'error':!0x1,'id':_0x4716bd['key']['id']};_0x22ed97=JSON['stringify'](_0x4716bd),this[_0x17f402(0x5e8)][_0x17f402(0x1bc)](this[_0x17f402(0x567)]+'\x20('+this[_0x17f402(0x5a3)][_0x17f402(0x5fe)]+'):\x20'+_0x22ed97);}catch(_0x5affb9){this['logger'][_0x17f402(0x44b)](this[_0x17f402(0x567)]+'\x20('+this[_0x17f402(0x5a3)][_0x17f402(0x5fe)]+_0x17f402(0x20a)+_0x5affb9),_0x22ed97=_0x5affb9[_0x17f402(0x5be)];}if(_0x22ed97)return{'error':!0x0,'error_log':(typeof _0x22ed97==_0x17f402(0x658)?JSON[_0x17f402(0x63a)](_0x22ed97,null,0x2):_0x22ed97)['replace'](/[\[\]{}\n]/g,'\x20')[_0x17f402(0x582)](/  +/g,'\x20')};}},Ee=require(a0_0x4851ee(0x539)),jt=class c{constructor(_0x131045,_0x1d4e2d,_0xf7ee3c){const _0x21141d=a0_0x4851ee;this[_0x21141d(0x27e)]=_0x131045,this[_0x21141d(0x417)]=_0x1d4e2d,this[_0x21141d(0x642)]=_0xf7ee3c,this['db']={},this[_0x21141d(0x4a3)]={},this[_0x21141d(0x5e8)]=new C(c['name']),this[_0x21141d(0xbf)]={},(this[_0x21141d(0x385)](),this[_0x21141d(0x4f7)](),this[_0x21141d(0x1d1)](),Object[_0x21141d(0x154)](this['db'],_0x1d4e2d[_0x21141d(0x5b8)]('DATABASE')),Object['assign'](this[_0x21141d(0x4a3)],_0x1d4e2d[_0x21141d(0x5b8)](_0x21141d(0x665))),this[_0x21141d(0x333)]=this['db']['ENABLED']?this[_0x21141d(0x642)][_0x21141d(0x3ee)]?.['db'](this['db'][_0x21141d(0x3f3)][_0x21141d(0x15d)]+_0x21141d(0x496)):void 0x0,this['redisCache']=this[_0x21141d(0x4a3)][_0x21141d(0x1a4)]?new ye(this[_0x21141d(0x4a3)]):void 0x0);}[a0_0x4851ee(0x119)](_0x235684){const _0x2cfea3=a0_0x4851ee;let _0x3df7e9=this['configService']['get'](_0x2cfea3(0x14a));typeof _0x3df7e9==_0x2cfea3(0x1a5)&&_0x3df7e9>0x0&&setTimeout(()=>{const _0x22a53a=_0x2cfea3;this[_0x22a53a(0xbf)][_0x235684]?.['connectionStatus']?.[_0x22a53a(0x641)]!==_0x22a53a(0x465)&&delete this[_0x22a53a(0xbf)][_0x235684];},0x3e8*0x3c*_0x3df7e9);}async[a0_0x4851ee(0x107)](_0x31a644){const _0xf0961f=a0_0x4851ee;if(_0x31a644&&!this[_0xf0961f(0xbf)][_0x31a644])throw new x(_0xf0961f(0x5df)+_0x31a644+_0xf0961f(0xc9));let _0x514cc2=[];for await(let [_0x26fe1e,_0x544e2b]of Object[_0xf0961f(0x1e9)](this[_0xf0961f(0xbf)]))if(_0x544e2b&&_0x544e2b[_0xf0961f(0x66b)][_0xf0961f(0x641)]===_0xf0961f(0x465)){let _0x4544ca=await this['repository'][_0xf0961f(0x568)][_0xf0961f(0x487)](_0x26fe1e);_0x514cc2['push']({'instance':{'instanceName':_0x26fe1e,'apikey':_0x4544ca['apikey'],'owner':_0x544e2b['wuid'],'profileName':await _0x544e2b[_0xf0961f(0x5ba)]()||_0xf0961f(0x19e),'profilePictureUrl':_0x544e2b[_0xf0961f(0x125)]}});}return _0x514cc2[_0xf0961f(0x487)](_0x630128=>_0x630128[_0xf0961f(0x5a3)][_0xf0961f(0x567)]===_0x31a644)??_0x514cc2;}[a0_0x4851ee(0x1d1)](){setInterval(async()=>{const _0xe5cf35=a0_0x15b7;if(this['db'][_0xe5cf35(0x1a4)])(await this[_0xe5cf35(0x333)]['collections']())['forEach'](async _0x2ccd17=>{const _0x4b3224=_0xe5cf35;let _0x395d38=_0x2ccd17['namespace']['replace'](/^[\w-]+./,'');await this[_0x4b3224(0x333)][_0x4b3224(0x4bb)](_0x395d38)[_0x4b3224(0xd9)]({'$or':[{'_id':{'$regex':/^app.state.*/}},{'_id':{'$regex':/^session-.*/}}]});});else{let _0x2af6fd=(0x0,se[_0xe5cf35(0x231)])(j,{'encoding':_0xe5cf35(0x5a8)});for await(let _0x28c7f0 of _0x2af6fd)_0x28c7f0[_0xe5cf35(0x46e)]()&&(0x0,se[_0xe5cf35(0x5e4)])((0x0,Ee['join'])(j,_0x28c7f0[_0xe5cf35(0x44c)]),{'encoding':'utf-8'})[_0xe5cf35(0x386)](async _0x1b83b2=>{const _0x36c0fa=_0xe5cf35;(_0x1b83b2[_0x36c0fa(0xe1)](/^app.state.*/)||_0x1b83b2['match'](/^session-.*/))&&(0x0,se['rmSync'])((0x0,Ee[_0x36c0fa(0x273)])(j,_0x28c7f0[_0x36c0fa(0x44c)],_0x1b83b2),{'recursive':!0x0,'force':!0x0});});}},0xe10*0x3e8*0x2);}async[a0_0x4851ee(0x310)](_0x32402b){const _0x5622d1=a0_0x4851ee;this['db'][_0x5622d1(0x1a4)]&&(await this['repository'][_0x5622d1(0x3ee)][_0x5622d1(0x478)](),(await this[_0x5622d1(0x333)][_0x5622d1(0x2cd)]())['length']>0x0&&await this[_0x5622d1(0x333)][_0x5622d1(0x660)](_0x32402b)),this[_0x5622d1(0x4a3)][_0x5622d1(0x1a4)]&&(this[_0x5622d1(0x661)][_0x5622d1(0x309)]=_0x32402b,await this[_0x5622d1(0x661)]['delAll']()),!this['db']['ENABLED']&&!this[_0x5622d1(0x4a3)]['ENABLED']&&(0x0,se[_0x5622d1(0x315)])((0x0,Ee['join'])(j,_0x32402b),{'recursive':!0x0,'force':!0x0});}async['loadInstance'](){const _0x53f78a=a0_0x4851ee;let _0x491311=async _0x223df2=>{const _0x1a624c=a0_0x15b7;let _0x4623f0=new Se(this[_0x1a624c(0x417)],this['eventEmitter'],this[_0x1a624c(0x642)]);_0x4623f0['instanceName']=_0x223df2,await _0x4623f0[_0x1a624c(0x1c0)](),this['waInstances'][_0x223df2]=_0x4623f0;};try{if(this[_0x53f78a(0x4a3)][_0x53f78a(0x1a4)]){let _0x26fb9f=await this[_0x53f78a(0x661)][_0x53f78a(0x4c1)]();_0x26fb9f?.[_0x53f78a(0x291)]>0x0&&_0x26fb9f[_0x53f78a(0x386)](async _0x5c0f2b=>await _0x491311(_0x5c0f2b[_0x53f78a(0x4dd)](':')[0x1]));}if(this['db']['ENABLED']){await this[_0x53f78a(0x642)][_0x53f78a(0x3ee)][_0x53f78a(0x478)]();let _0x37bf74=await this[_0x53f78a(0x333)][_0x53f78a(0x2cd)]();_0x37bf74[_0x53f78a(0x291)]>0x0&&_0x37bf74[_0x53f78a(0x386)](async _0x3611c3=>await _0x491311(_0x3611c3['namespace'][_0x53f78a(0x582)](/^[\w-]+\./,'')));return;}let _0x227844=(0x0,se[_0x53f78a(0x231)])(j,{'encoding':_0x53f78a(0x5a8)});for await(let _0x24c7ea of _0x227844)if(_0x24c7ea[_0x53f78a(0x46e)]()){if((0x0,se[_0x53f78a(0x5e4)])((0x0,Ee[_0x53f78a(0x273)])(j,_0x24c7ea[_0x53f78a(0x44c)]),{'encoding':_0x53f78a(0x5a8)})['length']===0x0){(0x0,se[_0x53f78a(0x315)])((0x0,Ee[_0x53f78a(0x273)])(j,_0x24c7ea[_0x53f78a(0x44c)]),{'recursive':!0x0,'force':!0x0});break;}await _0x491311(_0x24c7ea[_0x53f78a(0x44c)]);}}catch(_0x38e7f6){this[_0x53f78a(0x5e8)][_0x53f78a(0x44b)](_0x38e7f6);}}['removeInstance'](){const _0x5353ec=a0_0x4851ee;this['eventEmitter']['on'](_0x5353ec(0x279),async _0x2f63c0=>{const _0x2c5467=_0x5353ec;try{this['waInstances'][_0x2f63c0]=void 0x0;}catch{}try{this[_0x2c5467(0x310)](_0x2f63c0);}finally{this[_0x2c5467(0x5e8)][_0x2c5467(0x171)](_0x2c5467(0x5df)+_0x2f63c0+'\x22\x20-\x20REMOVED');}});}[a0_0x4851ee(0x4f7)](){const _0x5ac7fa=a0_0x4851ee;this[_0x5ac7fa(0x27e)]['on'](_0x5ac7fa(0x37f),async _0x21f84c=>{const _0xa981cb=_0x5ac7fa;try{this[_0xa981cb(0xbf)][_0x21f84c]=void 0x0,this[_0xa981cb(0x310)](_0x21f84c);}catch(_0x49bced){this[_0xa981cb(0x5e8)]['error']({'localError':_0xa981cb(0x4f7),'warn':_0xa981cb(0xea),'error':_0x49bced});}finally{this[_0xa981cb(0x5e8)][_0xa981cb(0x171)]('Instance\x20\x22'+_0x21f84c+_0xa981cb(0x1be));}});}},xe=require(a0_0x4851ee(0x539)),ve=require('fs'),Bt=class extends B{constructor(_0x1b79ba,_0x56cf82){const _0x3dfa83=a0_0x4851ee;super(_0x56cf82),this[_0x3dfa83(0x40e)]=_0x1b79ba,this['configService']=_0x56cf82;}async[a0_0x4851ee(0x3b8)](_0x1ba78a,_0x3ef091=!0x1){const _0x4aae8e=a0_0x4851ee;if(_0x1ba78a[_0x4aae8e(0x291)]!==0x0)try{return this[_0x4aae8e(0x477)]['ENABLED']&&_0x3ef091?{'insertCount':(await this['chatModel'][_0x4aae8e(0x2ab)]([..._0x1ba78a]))[_0x4aae8e(0x291)]}:(_0x1ba78a['forEach'](_0x5d06ad=>{const _0x4ef90e=_0x4aae8e;this[_0x4ef90e(0x3b4)]({'path':(0x0,xe[_0x4ef90e(0x273)])(this['storePath'],_0x4ef90e(0x2a6),_0x5d06ad[_0x4ef90e(0x101)]),'fileName':_0x5d06ad['id'],'data':_0x5d06ad});}),{'insertCount':_0x1ba78a[_0x4aae8e(0x291)]});}catch(_0x628709){return _0x628709;}finally{_0x1ba78a=void 0x0;}}async['find'](_0x5d85c3){const _0x22ec23=a0_0x4851ee;try{if(this['dbSettings'][_0x22ec23(0x1a4)])return await this['chatModel'][_0x22ec23(0x487)]({'owner':_0x5d85c3[_0x22ec23(0x5bb)]['owner']})[_0x22ec23(0x1dc)]({'lastmsg':-0x1})[_0x22ec23(0x412)](_0x5d85c3?.[_0x22ec23(0x412)]??0x0)[_0x22ec23(0xa1)]();let _0x378e48=[],_0xb3d249=(0x0,ve[_0x22ec23(0x231)])((0x0,xe['join'])(this['storePath'],_0x22ec23(0x2a6),_0x5d85c3[_0x22ec23(0x5bb)][_0x22ec23(0x101)]));for await(let _0x2c4ca8 of _0xb3d249)_0x2c4ca8[_0x22ec23(0x1c5)]()&&_0x378e48[_0x22ec23(0x53b)](JSON[_0x22ec23(0x5f3)]((0x0,ve[_0x22ec23(0xdd)])((0x0,xe[_0x22ec23(0x273)])(this[_0x22ec23(0x489)],_0x22ec23(0x2a6),_0x5d85c3[_0x22ec23(0x5bb)]['owner'],_0x2c4ca8[_0x22ec23(0x44c)]),{'encoding':'utf-8'})));return _0x378e48;}catch{return[];}}async['delete'](_0x4ff4bc){const _0x3db3c6=a0_0x4851ee;try{return this[_0x3db3c6(0x477)]['ENABLED']?await this[_0x3db3c6(0x40e)][_0x3db3c6(0xd9)]({..._0x4ff4bc['where']}):((0x0,ve[_0x3db3c6(0x315)])((0x0,xe['join'])(this[_0x3db3c6(0x489)],'chats',_0x4ff4bc[_0x3db3c6(0x5bb)][_0x3db3c6(0x101)],_0x4ff4bc[_0x3db3c6(0x5bb)]['id']+_0x3db3c6(0x463)),{'force':!0x0,'recursive':!0x0}),{'deleted':{'chatId':_0x4ff4bc[_0x3db3c6(0x5bb)]['id']}});}catch(_0x572b39){return{'error':_0x572b39?.[_0x3db3c6(0x409)]()};}}async[a0_0x4851ee(0x3ce)](_0x50a3fb){const _0x4ff4f8=a0_0x4851ee;try{if(this['dbSettings'][_0x4ff4f8(0x1a4)])return await this[_0x4ff4f8(0x40e)][_0x4ff4f8(0x3ce)]({'owner':_0x50a3fb[_0x4ff4f8(0x5bb)][_0x4ff4f8(0x101)]})['lean']();}catch{return null;}}async[a0_0x4851ee(0x3be)](_0x4ca72b,_0x13feaa){const _0x387a2c=a0_0x4851ee;try{this[_0x387a2c(0x477)][_0x387a2c(0x1a4)]&&await this['chatModel'][_0x387a2c(0x3a8)]({..._0x4ca72b['where']},{'$set':_0x13feaa});}catch(_0x214f7e){console[_0x387a2c(0x44b)](_0x214f7e);}}async[a0_0x4851ee(0x1b0)](_0x163b38,_0x225260){const _0xf62f86=a0_0x4851ee;try{if(this['dbSettings'][_0xf62f86(0x1a4)]){let _0x30d7e4=_0x163b38[_0xf62f86(0x51a)]((_0x104a9d,_0x42c539)=>({'updateOne':{'filter':{..._0x104a9d[_0xf62f86(0x5bb)]},'update':{'$set':_0x225260[_0x42c539]}}}));await this[_0xf62f86(0x40e)]['bulkWrite'](_0x30d7e4);}}catch(_0x5685c8){console[_0xf62f86(0x44b)](_0x5685c8);}}},Ft=class{constructor(_0x3ca053){const _0xf3a38c=a0_0x4851ee;this[_0xf3a38c(0x529)]=_0x3ca053;}async[a0_0x4851ee(0x319)]({instanceName:_0x51e912},_0x5bfae1){const _0xb4bc36=a0_0x4851ee;return await this[_0xb4bc36(0x529)][_0xb4bc36(0xbf)][_0x51e912][_0xb4bc36(0x319)](_0x5bfae1);}async[a0_0x4851ee(0x2a3)]({instanceName:_0x10e311},_0x4131ac){const _0x19e73c=a0_0x4851ee;return await this[_0x19e73c(0x529)][_0x19e73c(0xbf)][_0x10e311][_0x19e73c(0x2a3)](_0x4131ac);}async[a0_0x4851ee(0x271)]({instanceName:_0x4a1085},_0x1baf40){const _0xfc5255=a0_0x4851ee;return await this[_0xfc5255(0x529)][_0xfc5255(0xbf)][_0x4a1085][_0xfc5255(0x108)](_0x1baf40);}async[a0_0x4851ee(0x554)]({instanceName:_0x275fe2},_0x2fa964){const _0x46e311=a0_0x4851ee;return await this[_0x46e311(0x529)][_0x46e311(0xbf)][_0x275fe2][_0x46e311(0x554)](_0x2fa964);}async[a0_0x4851ee(0x628)]({instanceName:_0x57c96e},_0x3127ce){const _0x301fe0=a0_0x4851ee;return await this[_0x301fe0(0x529)][_0x301fe0(0xbf)][_0x57c96e][_0x301fe0(0x628)](_0x3127ce);}async[a0_0x4851ee(0x63c)]({instanceName:_0x2720d1},_0x1c3a8d){const _0x2ba5ab=a0_0x4851ee;return await this[_0x2ba5ab(0x529)][_0x2ba5ab(0xbf)][_0x2720d1]['profilePicture'](_0x1c3a8d[_0x2ba5ab(0x1a5)]);}async[a0_0x4851ee(0x3a6)]({instanceName:_0x327c92},_0x5196bf){const _0x815e75=a0_0x4851ee;return await this[_0x815e75(0x529)][_0x815e75(0xbf)][_0x327c92][_0x815e75(0x3a6)](_0x5196bf['number']);}async[a0_0x4851ee(0x13a)]({instanceName:_0x1615f6},_0x2a932b){const _0x57404c=a0_0x4851ee;return await this[_0x57404c(0x529)][_0x57404c(0xbf)][_0x1615f6][_0x57404c(0x13a)](_0x2a932b);}async[a0_0x4851ee(0x55a)]({instanceName:_0x5f0a97},_0x5d9fb3){const _0x474652=a0_0x4851ee;return await this[_0x474652(0x529)][_0x474652(0xbf)][_0x5f0a97][_0x474652(0x55a)](_0x5d9fb3);}async[a0_0x4851ee(0x366)]({instanceName:_0x1b479a},_0x1eaac1){const _0x5e700a=a0_0x4851ee;return await this[_0x5e700a(0x529)][_0x5e700a(0xbf)][_0x1b479a][_0x5e700a(0x366)](_0x1eaac1);}async[a0_0x4851ee(0x137)]({instanceName:_0x429ea6},_0x369197){const _0x1e5a53=a0_0x4851ee;return await this[_0x1e5a53(0x529)][_0x1e5a53(0xbf)][_0x429ea6][_0x1e5a53(0x137)](_0x369197);}async['fetchStatusMessage']({instanceName:_0x6274e0},_0x2ffbe6){const _0x3ef5f4=a0_0x4851ee;return await this['waMonitor']['waInstances'][_0x6274e0][_0x3ef5f4(0xac)](_0x2ffbe6);}async[a0_0x4851ee(0x204)]({instanceName:_0x7af960}){const _0x105239=a0_0x4851ee;return await this[_0x105239(0x529)][_0x105239(0xbf)][_0x7af960]['fetchChats']();}async[a0_0x4851ee(0xd7)]({instanceName:_0x223d41}){const _0x47f9a9=a0_0x4851ee;return await this[_0x47f9a9(0x529)]['waInstances'][_0x223d41][_0x47f9a9(0xd7)]();}async[a0_0x4851ee(0x3fa)]({instanceName:_0x45db3f},_0x53b855){const _0x508d1d=a0_0x4851ee;return await this[_0x508d1d(0x529)]['waInstances'][_0x45db3f][_0x508d1d(0x3fa)](_0x53b855);}async['fetchBusinessProfile']({instanceName:_0x6f6905},_0x5c3b0e){const _0x267121=a0_0x4851ee;return await this[_0x267121(0x529)][_0x267121(0xbf)][_0x6f6905]['fetchBusinessProfile'](_0x5c3b0e[_0x267121(0x1a5)]);}async[a0_0x4851ee(0x49b)]({instanceName:_0xbac777},_0x21da63){const _0x3cbade=a0_0x4851ee;return await this['waMonitor'][_0x3cbade(0xbf)][_0xbac777][_0x3cbade(0x49b)](_0x21da63[_0x3cbade(0x44c)]);}async['updateProfileStatus']({instanceName:_0x4c63bd},_0x319c78){const _0x59b59f=a0_0x4851ee;return await this[_0x59b59f(0x529)]['waInstances'][_0x4c63bd][_0x59b59f(0xc0)](_0x319c78[_0x59b59f(0x517)]);}async[a0_0x4851ee(0x196)]({instanceName:_0x4f54cf},_0x2e79ef){const _0x1cd821=a0_0x4851ee;return await this[_0x1cd821(0x529)][_0x1cd821(0xbf)][_0x4f54cf][_0x1cd821(0x196)](_0x2e79ef[_0x1cd821(0x37a)]);}async['removeProfilePicture']({instanceName:_0x1db076},_0x592ffb){const _0x59e249=a0_0x4851ee;return await this[_0x59e249(0x529)]['waInstances'][_0x1db076]['removeProfilePicture']();}},Ms=require(a0_0x4851ee(0x56e)),Jt=class c{constructor(_0x45dce6,_0x26ecbc,_0x5d57e5,_0x5e89dd,_0x2607c6){const _0x4bb9b8=a0_0x4851ee;this['waMonitor']=_0x45dce6,this['configService']=_0x26ecbc,this['repository']=_0x5d57e5,this[_0x4bb9b8(0x27e)]=_0x5e89dd,this['authService']=_0x2607c6,this[_0x4bb9b8(0x5e8)]=new C(c[_0x4bb9b8(0x44c)]);}async[a0_0x4851ee(0x2f2)]({instanceName:_0x45aff8,apikey:_0x3aa143}){const _0x5cf952=a0_0x4851ee;let _0x1264ce=new Se(this[_0x5cf952(0x417)],this[_0x5cf952(0x27e)],this[_0x5cf952(0x642)]);_0x1264ce[_0x5cf952(0x567)]=_0x45aff8,this['waMonitor'][_0x5cf952(0xbf)][_0x1264ce[_0x5cf952(0x567)]]=_0x1264ce,this[_0x5cf952(0x529)][_0x5cf952(0x119)](_0x1264ce['instanceName']);let _0x35bf2d={};_0x3aa143?(await this[_0x5cf952(0x642)][_0x5cf952(0x568)][_0x5cf952(0x1a8)]({'apikey':_0x3aa143},_0x45aff8),_0x35bf2d[_0x5cf952(0x342)]=_0x3aa143):_0x35bf2d=await this[_0x5cf952(0x2e3)][_0x5cf952(0x5c5)]({'instanceName':_0x1264ce[_0x5cf952(0x567)]});let _0x7f2476;return await _0x1264ce[_0x5cf952(0x1c0)](),await(0x0,Ms[_0x5cf952(0x49c)])(0x7d0),_0x7f2476=_0x1264ce[_0x5cf952(0x99)],{'instance':{'instanceName':_0x1264ce[_0x5cf952(0x567)],'status':_0x5cf952(0x26a)},'hash':_0x35bf2d,'qrcode':_0x7f2476};}async[a0_0x4851ee(0x1c0)]({instanceName:_0x44cd25}){const _0x434ad2=a0_0x4851ee;try{let _0x38cb63=this[_0x434ad2(0x529)][_0x434ad2(0xbf)][_0x44cd25];switch(_0x38cb63[_0x434ad2(0x66b)]?.[_0x434ad2(0x641)]){case'close':return await _0x38cb63[_0x434ad2(0x1c0)](),await(0x0,Ms[_0x434ad2(0x49c)])(0x7d0),_0x38cb63['qrCode'];case'connecting':return _0x38cb63[_0x434ad2(0x99)];default:return await this[_0x434ad2(0x459)]({'instanceName':_0x44cd25});}}catch(_0xc6aca9){this['logger'][_0x434ad2(0x2c6)](_0xc6aca9);}}async[a0_0x4851ee(0x459)]({instanceName:_0x1585b7}){const _0x513ed3=a0_0x4851ee;let _0x13b5c6=this[_0x513ed3(0x529)][_0x513ed3(0xbf)][_0x1585b7]['connectionStatus'],_0x3b24f8=null;_0x13b5c6[_0x513ed3(0x641)]===_0x513ed3(0x465)&&_0x1585b7&&(_0x3b24f8=await this[_0x513ed3(0x529)][_0x513ed3(0x107)](_0x1585b7));let _0x3e3dae=null;return _0x13b5c6[_0x513ed3(0x641)]===_0x513ed3(0x3f4)&&_0x1585b7&&(_0x3e3dae=this[_0x513ed3(0x529)][_0x513ed3(0xbf)][_0x1585b7][_0x513ed3(0x99)]),{'instance':_0x1585b7,'connectionStatus':_0x13b5c6,'instanceInfo':_0x3b24f8,'qrcode':_0x3e3dae};}async[a0_0x4851ee(0x214)]({instanceName:_0x2a860c}){const _0x1f2287=a0_0x4851ee;try{return this[_0x1f2287(0x529)][_0x1f2287(0xbf)][_0x2a860c]?.[_0x1f2287(0x28b)]?.['ws']?.[_0x1f2287(0x601)](),{'status':_0x1f2287(0x396),'error':!0x1,'response':{'message':_0x1f2287(0x18e)}};}catch(_0x574ed7){this['logger'][_0x1f2287(0x44b)](_0x574ed7);}}async['fetchInstances']({instanceName:_0x31fec8}){const _0x3ffa1c=a0_0x4851ee;return _0x31fec8?this[_0x3ffa1c(0x529)]['instanceInfo'](_0x31fec8):this[_0x3ffa1c(0x529)]['instanceInfo']();}async[a0_0x4851ee(0x2e5)]({instanceName:_0x5e610f}){const _0x1de8f4=a0_0x4851ee;try{return await this[_0x1de8f4(0x529)][_0x1de8f4(0xbf)][_0x5e610f]?.[_0x1de8f4(0x28b)]?.[_0x1de8f4(0x2e5)](_0x1de8f4(0x1ef)+_0x5e610f),{'error':!0x1,'message':_0x1de8f4(0x1f2)};}catch(_0x580417){throw new A(_0x580417[_0x1de8f4(0x409)]());}}async['deleteInstance']({instanceName:_0x1a6edf}){const _0x45d125=a0_0x4851ee;if((await this[_0x45d125(0x459)]({'instanceName':_0x1a6edf}))[_0x45d125(0x66b)][_0x45d125(0x641)]===_0x45d125(0x465))throw new g([_0x45d125(0x318),_0x45d125(0x23e)]);try{return delete this[_0x45d125(0x529)][_0x45d125(0xbf)][_0x1a6edf],{'error':!0x1,'message':'Instance\x20deleted'};}catch(_0x14c1c2){throw new g(_0x14c1c2[_0x45d125(0x409)]());}}async['refreshToken'](_0x32d19e,_0x42e373){const _0x229711=a0_0x4851ee;return await this[_0x229711(0x2e3)][_0x229711(0x297)](_0x42e373);}},ae=require('class-validator'),Gt=class{constructor(_0x4b152e){const _0x2f3299=a0_0x4851ee;this[_0x2f3299(0x529)]=_0x4b152e;}async[a0_0x4851ee(0x4ca)]({instanceName:_0x52590c},_0x5db4b5){const _0x4dd1a9=a0_0x4851ee;return await this[_0x4dd1a9(0x529)][_0x4dd1a9(0xbf)][_0x52590c]['textMessage'](_0x5db4b5);}async[a0_0x4851ee(0x526)]({instanceName:_0x7137ac},_0x76c92d){const _0x2cc1b9=a0_0x4851ee;if((0x0,ae[_0x2cc1b9(0x17e)])(_0x76c92d?.[_0x2cc1b9(0x590)]?.[_0x2cc1b9(0x631)])&&!_0x76c92d?.[_0x2cc1b9(0x590)]?.['fileName'])throw new g(_0x2cc1b9(0x676));if((0x0,ae['isURL'])(_0x76c92d?.[_0x2cc1b9(0x590)]?.[_0x2cc1b9(0x631)])||(0x0,ae[_0x2cc1b9(0x17e)])(_0x76c92d?.[_0x2cc1b9(0x590)]?.[_0x2cc1b9(0x631)]))return await this[_0x2cc1b9(0x529)]['waInstances'][_0x7137ac][_0x2cc1b9(0x590)](_0x76c92d);throw new g('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x4851ee(0x1eb)]({instanceName:_0xa67002},_0xd08065){const _0x4fe4b5=a0_0x4851ee;if((0x0,ae[_0x4fe4b5(0x635)])(_0xd08065[_0x4fe4b5(0x25a)][_0x4fe4b5(0xff)])||(0x0,ae[_0x4fe4b5(0x17e)])(_0xd08065[_0x4fe4b5(0x25a)]['image']))return await this[_0x4fe4b5(0x529)][_0x4fe4b5(0xbf)][_0xa67002][_0x4fe4b5(0x226)](_0xd08065);throw new g('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x4851ee(0x1d2)]({instanceName:_0x2be5dd},_0x3d337c){const _0x14168d=a0_0x4851ee;if((0x0,ae[_0x14168d(0x635)])(_0x3d337c[_0x14168d(0x32c)][_0x14168d(0x467)])||(0x0,ae[_0x14168d(0x17e)])(_0x3d337c['audioMessage'][_0x14168d(0x467)]))return await this['waMonitor'][_0x14168d(0xbf)][_0x2be5dd][_0x14168d(0x4a9)](_0x3d337c);throw new g('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async['sendButtons']({instanceName:_0x2d359d},_0x8cfabe){const _0xa2acb4=a0_0x4851ee;if((0x0,ae[_0xa2acb4(0x17e)])(_0x8cfabe[_0xa2acb4(0x440)]['mediaMessage']?.[_0xa2acb4(0x631)])&&!_0x8cfabe[_0xa2acb4(0x440)][_0xa2acb4(0x590)]?.[_0xa2acb4(0x2ac)])throw new g(_0xa2acb4(0x676));return await this[_0xa2acb4(0x529)][_0xa2acb4(0xbf)][_0x2d359d][_0xa2acb4(0x440)](_0x8cfabe);}async['sendLocation']({instanceName:_0x283b92},_0x139cfd){const _0x27766c=a0_0x4851ee;return await this[_0x27766c(0x529)]['waInstances'][_0x283b92][_0x27766c(0x2a8)](_0x139cfd);}async['sendPoll']({instanceName:_0x53c681},_0xd22f31){const _0x191b0a=a0_0x4851ee;return await this['waMonitor'][_0x191b0a(0xbf)][_0x53c681][_0x191b0a(0x5ef)](_0xd22f31);}async[a0_0x4851ee(0x37e)]({instanceName:_0x57bd88},_0x354df0){const _0x136bac=a0_0x4851ee;return await this[_0x136bac(0x529)][_0x136bac(0xbf)][_0x57bd88][_0x136bac(0x466)](_0x354df0);}async['sendContact']({instanceName:_0x2ac556},_0x259407){const _0x1dc8fc=a0_0x4851ee;return await this[_0x1dc8fc(0x529)][_0x1dc8fc(0xbf)][_0x2ac556][_0x1dc8fc(0x11c)](_0x259407);}async['sendReaction']({instanceName:_0x431a62},_0x1e8616){const _0x835ef2=a0_0x4851ee;if(!_0x1e8616['reactionMessage'][_0x835ef2(0xcc)][_0x835ef2(0xe1)](/[^\(\)\w\sà-ú"-\+]+/))throw new g('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this[_0x835ef2(0x529)][_0x835ef2(0xbf)][_0x431a62]['reactionMessage'](_0x1e8616);}async[a0_0x4851ee(0x30a)]({instanceName:_0x175715},_0x4dc1cb){const _0x350fe2=a0_0x4851ee;return await this[_0x350fe2(0x529)]['waInstances'][_0x175715][_0x350fe2(0xec)](_0x4dc1cb);}},qt=class{constructor(_0x549050){const _0x4d8957=a0_0x4851ee;this[_0x4d8957(0x529)]=_0x549050;}async['createGroup'](_0xf0b16e,_0x3059f0){const _0x2b8fd2=a0_0x4851ee;return await this[_0x2b8fd2(0x529)][_0x2b8fd2(0xbf)][_0xf0b16e[_0x2b8fd2(0x567)]][_0x2b8fd2(0x4d7)](_0x3059f0);}async[a0_0x4851ee(0x4eb)](_0x1d87e0,_0x4e56a9){const _0x474149=a0_0x4851ee;return await this[_0x474149(0x529)]['waInstances'][_0x1d87e0[_0x474149(0x567)]]['updateGroupPicture'](_0x4e56a9);}async[a0_0x4851ee(0x5aa)](_0x4b90c0,_0x4555e8){const _0x1cb3fb=a0_0x4851ee;return await this[_0x1cb3fb(0x529)][_0x1cb3fb(0xbf)][_0x4b90c0['instanceName']][_0x1cb3fb(0x5aa)](_0x4555e8);}async[a0_0x4851ee(0x45b)](_0x1ec7cd,_0x14008c){const _0x3e7429=a0_0x4851ee;return await this[_0x3e7429(0x529)][_0x3e7429(0xbf)][_0x1ec7cd['instanceName']][_0x3e7429(0x45b)](_0x14008c);}async[a0_0x4851ee(0x59c)](_0x12c2f1,_0x4270d2){const _0x20988d=a0_0x4851ee;return await this['waMonitor'][_0x20988d(0xbf)][_0x12c2f1[_0x20988d(0x567)]]['groupSetting'](_0x4270d2);}async[a0_0x4851ee(0x265)](_0x12e7ec,_0x3c54f8){const _0x29136a=a0_0x4851ee;return await this[_0x29136a(0x529)][_0x29136a(0xbf)][_0x12e7ec[_0x29136a(0x567)]][_0x29136a(0x622)](_0x3c54f8);}async[a0_0x4851ee(0x167)](_0x1fc4cc){const _0x10fc8a=a0_0x4851ee;return await this[_0x10fc8a(0x529)][_0x10fc8a(0xbf)][_0x1fc4cc[_0x10fc8a(0x567)]]['findGroups']();}async[a0_0x4851ee(0x131)](_0x59c589,_0x3c2905){const _0x1def65=a0_0x4851ee;return await this['waMonitor']['waInstances'][_0x59c589[_0x1def65(0x567)]]['inviteCode'](_0x3c2905);}async[a0_0x4851ee(0x1c9)](_0x22592f,_0x2cde6d){const _0x5d7dc2=a0_0x4851ee;return await this['waMonitor'][_0x5d7dc2(0xbf)][_0x22592f[_0x5d7dc2(0x567)]]['joinGroup'](_0x2cde6d);}async[a0_0x4851ee(0x12f)](_0x3bdb69,_0x2c3ad8){const _0x194261=a0_0x4851ee;return await this[_0x194261(0x529)][_0x194261(0xbf)][_0x3bdb69[_0x194261(0x567)]][_0x194261(0x12f)](_0x2c3ad8);}async['findParticipants'](_0x1c136e,_0x521f4f){const _0x496e3c=a0_0x4851ee;return await this['waMonitor'][_0x496e3c(0xbf)][_0x1c136e['instanceName']][_0x496e3c(0x12b)](_0x521f4f);}async['updateGParticipate'](_0x3b5991,_0x1923aa){const _0x29c411=a0_0x4851ee;return await this[_0x29c411(0x529)][_0x29c411(0xbf)][_0x3b5991[_0x29c411(0x567)]]['updateGParticipant'](_0x1923aa);}async[a0_0x4851ee(0xaa)](_0x269d2d,_0x2bdcc1){const _0x41329f=a0_0x4851ee;return await this[_0x41329f(0x529)][_0x41329f(0xbf)][_0x269d2d[_0x41329f(0x567)]]['toggleEphemeral'](_0x2bdcc1);}async[a0_0x4851ee(0x16a)](_0x5822e4,_0x5b7a34){const _0x5ee8da=a0_0x4851ee;return await this[_0x5ee8da(0x529)]['waInstances'][_0x5822e4[_0x5ee8da(0x567)]]['leaveGroup'](_0x5b7a34);}},Wt=class{constructor(_0x42e2b9,_0x4bcf75){const _0x20cdfa=a0_0x4851ee;this['waMonit']=_0x42e2b9,this[_0x20cdfa(0x417)]=_0x4bcf75;}async[a0_0x4851ee(0x509)](_0x3d6d15,_0x4da2ec){const _0x1255f5=a0_0x4851ee;try{let _0x33f447=_0x3d6d15['params'];if(this[_0x1255f5(0x5c0)][_0x1255f5(0xbf)][_0x33f447[_0x1255f5(0x567)]][_0x1255f5(0x66b)][_0x1255f5(0x641)]==='open')throw new g(_0x1255f5(0xd1));let _0x4fd81d=this['configService'][_0x1255f5(0x5b8)](_0x1255f5(0x45a))[_0x1255f5(0x357)];return _0x4da2ec[_0x1255f5(0x517)](0xc8)[_0x1255f5(0x1f4)](_0x1255f5(0x509),{'type':_0x4fd81d,..._0x33f447});}catch(_0x1f8000){console[_0x1255f5(0x2c6)]('ERROR:\x20',_0x1f8000);}}},Ht=class{constructor(_0x54a1d7){const _0x2ee156=a0_0x4851ee;this[_0x2ee156(0x529)]=_0x54a1d7;}[a0_0x4851ee(0x1a8)](_0x1707ae,_0x154aa5){const _0x396390=a0_0x4851ee;return this[_0x396390(0x529)][_0x396390(0xbf)][_0x1707ae[_0x396390(0x567)]][_0x396390(0x633)](_0x154aa5);}async[a0_0x4851ee(0x487)](_0x5e3634){const _0x315555=a0_0x4851ee;try{return await this[_0x315555(0x529)]['waInstances'][_0x5e3634[_0x315555(0x567)]][_0x315555(0x5db)]();}catch{return{'enabled':null,'url':''};}}},ld=new C(a0_0x4851ee(0x370)),Kt=class{constructor(_0x123db6){this['waMonitor']=_0x123db6;}async[a0_0x4851ee(0xe2)](_0x16f13c,_0x506132){const _0x43abaa=a0_0x4851ee;return await this[_0x43abaa(0x529)][_0x43abaa(0xbf)][_0x16f13c['instanceName']][_0x43abaa(0xe2)](_0x506132);}async[a0_0x4851ee(0xc3)](_0x3da3f0){const _0x32749a=a0_0x4851ee;return await this['waMonitor'][_0x32749a(0xbf)][_0x3da3f0[_0x32749a(0x567)]]['getScheduleMessage']();}async[a0_0x4851ee(0x1fa)](_0x1419b2){const _0x2912a0=a0_0x4851ee;return await this[_0x2912a0(0x529)][_0x2912a0(0xbf)][_0x1419b2[_0x2912a0(0x567)]][_0x2912a0(0x1fa)]();}async[a0_0x4851ee(0x2e8)](_0x4d7202){const _0x576a55=a0_0x4851ee;return await this['waMonitor'][_0x576a55(0xbf)][_0x4d7202[_0x576a55(0x567)]][_0x576a55(0x2e8)]();}async[a0_0x4851ee(0x29f)](_0x40c140,_0x342749){const _0x443ff0=a0_0x4851ee;return await this[_0x443ff0(0x529)][_0x443ff0(0xbf)][_0x40c140[_0x443ff0(0x567)]]['updateAgent'](_0x342749);}async['updateCustomFields'](_0x26b5dd,_0x371063){const _0x29f5d5=a0_0x4851ee;return await this[_0x29f5d5(0x529)]['waInstances'][_0x26b5dd['instanceName']][_0x29f5d5(0x58c)](_0x371063);}async['updateFlowConfig'](_0x1246a0,_0x3c9f71){const _0x38d894=a0_0x4851ee;return await this['waMonitor']['waInstances'][_0x1246a0[_0x38d894(0x567)]][_0x38d894(0x602)](_0x3c9f71);}async[a0_0x4851ee(0x238)](_0x4c4356,_0x20634f){const _0x4e8e97=a0_0x4851ee;return await this[_0x4e8e97(0x529)][_0x4e8e97(0xbf)][_0x4c4356[_0x4e8e97(0x567)]]['startFlow'](_0x20634f);}async[a0_0x4851ee(0x5f2)](_0x4c7c5f,_0x4f3bcf){const _0x763975=a0_0x4851ee;return await this['waMonitor'][_0x763975(0xbf)][_0x4c7c5f[_0x763975(0x567)]]['getConversation'](_0x4f3bcf);}async[a0_0x4851ee(0x38a)](_0x1e93e9,_0x4177a0){const _0x41790d=a0_0x4851ee;return await this[_0x41790d(0x529)][_0x41790d(0xbf)][_0x1e93e9['instanceName']][_0x41790d(0x38a)](_0x4177a0);}async['editConversation'](_0x6a153d,_0x1fca8a){const _0x3bacd3=a0_0x4851ee;return await this[_0x3bacd3(0x529)]['waInstances'][_0x6a153d[_0x3bacd3(0x567)]][_0x3bacd3(0x408)](_0x1fca8a);}async[a0_0x4851ee(0x5af)](_0x289a73,_0x5de92d){const _0x1f341e=a0_0x4851ee;return await this[_0x1f341e(0x529)][_0x1f341e(0xbf)][_0x289a73[_0x1f341e(0x567)]][_0x1f341e(0x5af)](_0x5de92d);}async[a0_0x4851ee(0x64b)](_0x31a0a2,_0x2dea22){const _0x4687d0=a0_0x4851ee;return await this[_0x4687d0(0x529)][_0x4687d0(0xbf)][_0x31a0a2[_0x4687d0(0x567)]][_0x4687d0(0x64b)](_0x2dea22[_0x4687d0(0x44c)]);}async[a0_0x4851ee(0x667)](_0x6593c5,_0x47f4e9){const _0x471968=a0_0x4851ee;return await this[_0x471968(0x529)][_0x471968(0xbf)][_0x6593c5['instanceName']][_0x471968(0x667)](_0x47f4e9);}async[a0_0x4851ee(0x48b)](_0x1da55c,_0x209c42){const _0x24dcaa=a0_0x4851ee;return await this['waMonitor']['waInstances'][_0x1da55c[_0x24dcaa(0x567)]][_0x24dcaa(0x48b)](_0x209c42);}async[a0_0x4851ee(0x5cd)](_0x543211,_0x12f1ad){const _0xfc3cc9=a0_0x4851ee;return await this[_0xfc3cc9(0x529)][_0xfc3cc9(0xbf)][_0x543211['instanceName']][_0xfc3cc9(0x5cd)](_0x12f1ad);}async[a0_0x4851ee(0x62e)](_0x373ad2,_0x4d77b5){const _0x49b733=a0_0x4851ee;return await this[_0x49b733(0x529)][_0x49b733(0xbf)][_0x373ad2[_0x49b733(0x567)]]['editFlowReply'](_0x4d77b5);}async[a0_0x4851ee(0x34a)](_0x2613ae,_0x48d4da){const _0x1566eb=a0_0x4851ee;return await this[_0x1566eb(0x529)]['waInstances'][_0x2613ae[_0x1566eb(0x567)]][_0x1566eb(0x34a)](_0x48d4da);}async[a0_0x4851ee(0x639)](_0x54fdf7,_0x2c060b){const _0x1dcf68=a0_0x4851ee;return await this[_0x1dcf68(0x529)][_0x1dcf68(0xbf)][_0x54fdf7['instanceName']][_0x1dcf68(0x639)](_0x2c060b);}async[a0_0x4851ee(0x18b)](_0x481669,_0x38661f){const _0x686b6c=a0_0x4851ee;return await this[_0x686b6c(0x529)][_0x686b6c(0xbf)][_0x481669[_0x686b6c(0x567)]][_0x686b6c(0x18b)](_0x38661f);}async[a0_0x4851ee(0x367)](_0x33b130,_0x13e365){const _0x359f88=a0_0x4851ee;return await this[_0x359f88(0x529)][_0x359f88(0xbf)][_0x33b130[_0x359f88(0x567)]][_0x359f88(0x367)](_0x13e365);}async[a0_0x4851ee(0x606)](_0x492443,_0x34f458){const _0x352127=a0_0x4851ee;return await this['waMonitor'][_0x352127(0xbf)][_0x492443[_0x352127(0x567)]][_0x352127(0x606)](_0x34f458[_0x352127(0x44c)]);}async['allFlows'](_0x282800){const _0x96d1a0=a0_0x4851ee;return await this[_0x96d1a0(0x529)][_0x96d1a0(0xbf)][_0x282800[_0x96d1a0(0x567)]][_0x96d1a0(0x5d6)]();}},zt=class{constructor(_0x509086){this['webhookService']=_0x509086;}async['createWebhook'](_0x54ec02,_0x143bb9){const _0x484539=a0_0x4851ee;return this[_0x484539(0x444)][_0x484539(0x1a8)](_0x54ec02,_0x143bb9);}async['findWebhook'](_0xeb7822){const _0x567626=a0_0x4851ee;return this[_0x567626(0x444)][_0x567626(0x487)](_0xeb7822);}},Qt=class{constructor(_0x4ae82e,_0x3f4283,_0x5a7223,_0x307777,_0x4b8e0e,_0x30ca15,_0xa993fa){const _0x26fb44=a0_0x4851ee;this['message']=_0x4ae82e,this[_0x26fb44(0x202)]=_0x3f4283,this[_0x26fb44(0x576)]=_0x5a7223,this['messageUpdate']=_0x307777,this[_0x26fb44(0x491)]=_0x4b8e0e,this[_0x26fb44(0x568)]=_0x30ca15,this['dbClient']=_0xa993fa;}get[a0_0x4851ee(0x3ee)](){const _0x5494f7=a0_0x4851ee;return this[_0x5494f7(0x57d)];}},Is=require(a0_0x4851ee(0x5ad)),Rs=class{},gi=new Is[(a0_0x4851ee(0x298))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String,'minlength':0x3,'enum':[a0_0x4851ee(0x585),a0_0x4851ee(0x3f5),a0_0x4851ee(0x4be)]},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String}}),fo=M?.['model'](Rs[a0_0x4851ee(0x44c)],gi,a0_0x4851ee(0x4fa)),As=class{},mi=new Is[(a0_0x4851ee(0x298))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String,'required':!0x0,'min':0x1},'id':{'type':String,'required':!0x0,'min':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'min':0x1},'datetime':{'type':Number,'required':!0x0,'min':0x1},'status':{'type':String,'required':!0x0},'owner':{'type':String,'required':!0x0,'min':0x1}}),wo=M?.[a0_0x4851ee(0x3ff)](As[a0_0x4851ee(0x44c)],mi,a0_0x4851ee(0x501)),yo=require(a0_0x4851ee(0x5ad)),Ds=class{},hi=new yo['Schema']({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1}}),bo=M?.[a0_0x4851ee(0x3ff)](Ds[a0_0x4851ee(0x44c)],hi,a0_0x4851ee(0x17c)),So=require('mongoose'),Ps=class{},Eo=new So[(a0_0x4851ee(0x298))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});Eo[a0_0x4851ee(0x584)](a0_0x4851ee(0x502),function(_0x4fb44c){const _0x43ffea=a0_0x4851ee;delete this[_0x43ffea(0x423)],delete this[_0x43ffea(0x600)],delete this[_0x43ffea(0xa7)],delete this[_0x43ffea(0x172)],delete this[_0x43ffea(0x277)],_0x4fb44c();});var vo=M?.['model'](Ps[a0_0x4851ee(0x44c)],Eo,a0_0x4851ee(0x491)),Os=require(a0_0x4851ee(0x539)),No=require('fs'),Yt=class extends B{constructor(_0x1f8902,_0x5cb580){const _0x2b09c5=a0_0x4851ee;super(_0x5cb580),this[_0x2b09c5(0x21b)]=_0x1f8902,this[_0x2b09c5(0x417)]=_0x5cb580;}async[a0_0x4851ee(0x1a8)](_0x3f6ae9,_0x2d3ff8){const _0x34d003=a0_0x4851ee;try{return this['dbSettings']['ENABLED']?{'insertCount':(await this['webhookModel']['replaceOne']({'_id':_0x2d3ff8},{..._0x3f6ae9},{'upsert':!0x0}))[_0x34d003(0x100)]}:(this[_0x34d003(0x3b4)]({'path':(0x0,Os[_0x34d003(0x273)])(this[_0x34d003(0x489)],_0x34d003(0x491)),'fileName':_0x2d3ff8,'data':_0x3f6ae9}),{'insertCount':0x1});}catch(_0x65e01f){return _0x65e01f;}}async[a0_0x4851ee(0x487)](_0x196c59){const _0x37a5c3=a0_0x4851ee;try{return this[_0x37a5c3(0x477)]['ENABLED']?await this[_0x37a5c3(0x21b)]['findOne']({'_id':_0x196c59}):JSON[_0x37a5c3(0x5f3)]((0x0,No[_0x37a5c3(0xdd)])((0x0,Os[_0x37a5c3(0x273)])(this[_0x37a5c3(0x489)],_0x37a5c3(0x491),_0x196c59+_0x37a5c3(0x5d3)),{'encoding':'utf-8'}));}catch{return{};}}},_s=require('path'),Co=require('fs'),Xt=class extends B{constructor(_0x2d096d,_0x50ad26){const _0x1a3988=a0_0x4851ee;super(_0x50ad26),this[_0x1a3988(0x1ae)]=_0x2d096d,this[_0x1a3988(0x417)]=_0x50ad26,this[_0x1a3988(0x568)]=_0x50ad26[_0x1a3988(0x5b8)](_0x1a3988(0x45a));}async[a0_0x4851ee(0x1a8)](_0x2f7130,_0x3ef592){const _0x4002c5=a0_0x4851ee;try{return this[_0x4002c5(0x477)][_0x4002c5(0x1a4)]?{'insertCount':(await this[_0x4002c5(0x1ae)][_0x4002c5(0x268)]({'_id':_0x3ef592},{..._0x2f7130},{'upsert':!0x0}))['modifiedCount']}:(this[_0x4002c5(0x3b4)]({'path':(0x0,_s['join'])(es,this['auth'][_0x4002c5(0x357)]),'fileName':_0x3ef592,'data':_0x2f7130}),{'insertCount':0x1});}catch(_0x3bb16e){return{'error':_0x3bb16e};}}async[a0_0x4851ee(0x487)](_0x148761){const _0x261a8e=a0_0x4851ee;try{return this[_0x261a8e(0x477)][_0x261a8e(0x1a4)]?await this['authModel']['findOne']({'_id':_0x148761}):JSON[_0x261a8e(0x5f3)]((0x0,Co[_0x261a8e(0xdd)])((0x0,_s[_0x261a8e(0x273)])(es,this[_0x261a8e(0x568)][_0x261a8e(0x357)],_0x148761+_0x261a8e(0x5d3)),{'encoding':_0x261a8e(0x5a8)}));}catch{return{};}}},fi=new C(a0_0x4851ee(0x5c1)),wi=new je(fo,y),yi=new Bt(I,y),bi=new et(Fe,y),Si=new at(wo,y),Ei=new Yt(vo,y),vi=new Xt(bo,y),de=new Qt(wi,yi,bi,Si,Ei,vi,M?.[a0_0x4851ee(0x3dd)]()),J=new jt(os,y,de),Ni=new ht(y,J,de),Ci=new Ht(J),Ss=new zt(Ci),R=new Kt(J),ce=new Jt(J,y,de,os,Ni),to=new Wt(J,y),K=new Gt(J),P=new Ft(J),V=new qt(J);fi[a0_0x4851ee(0x1e4)]('Module\x20-\x20ON');var Sp=require(a0_0x4851ee(0x50f)),xs=require('fs'),To=T(require(a0_0x4851ee(0x553))),Mo=T(require(a0_0x4851ee(0x216))),$e=class c{static #e;static set['app'](_0x116aae){this.#e=_0x116aae;}static get[a0_0x4851ee(0x553)](){const _0x3fe2c9=a0_0x4851ee;let {FULLCHAIN:_0x440cc8,PRIVKEY:_0x4c3c5f}=y[_0x3fe2c9(0x5b8)]('SSL_CONF');return To[_0x3fe2c9(0x325)]({'cert':(0x0,xs['readFileSync'])(_0x440cc8),'key':(0x0,xs[_0x3fe2c9(0xdd)])(_0x4c3c5f)},c.#e);}static get[a0_0x4851ee(0x216)](){const _0x2eaff3=a0_0x4851ee;return Mo[_0x2eaff3(0x325)](c.#e);}},ke=T(require('fs')),_o=T(require(a0_0x4851ee(0x24b))),Le=T(require(a0_0x4851ee(0x9a))),Zt=T(require(a0_0x4851ee(0x539))),xo=require('child_process'),Vs=require('child_process');function Ti(){const _0x36deed=a0_0x4851ee;J[_0x36deed(0xd3)]();let _0x5f59e8=Zt[_0x36deed(0x481)][_0x36deed(0x273)](__dirname,_0x36deed(0x4d5));Oo(_0x5f59e8);}var Oo=_0x2f00e0=>{const _0x130449=a0_0x4851ee;let _0x3d59a9=ke[_0x130449(0x481)][_0x130449(0x5e4)](_0x2f00e0),_0x3c2ea6=0xc*0x3c*0x3c*0x3e8,_0x55ff20=0x2*0x3c*0x3c*0x3e8,_0x572579=new Date()[_0x130449(0x58e)]();_0x3d59a9[_0x130449(0x386)](_0x5ae855=>{const _0xe2791e=_0x130449;let _0x57de4a=Zt[_0xe2791e(0x481)][_0xe2791e(0x273)](_0x2f00e0,_0x5ae855),_0x3d68b8=ke[_0xe2791e(0x481)][_0xe2791e(0x418)](_0x57de4a)[_0xe2791e(0x240)]['getTime']();_0x572579-_0x3d68b8>_0x3c2ea6&&(ke[_0xe2791e(0x481)][_0xe2791e(0x329)](_0x57de4a),console[_0xe2791e(0x2c6)]('Deleted\x20'+_0x5ae855));}),setTimeout(()=>Oo(_0x2f00e0),_0x55ff20);};function Mi(){const _0x1f46b7=a0_0x4851ee;let _0x330bc3=new C(_0x1f46b7(0x4d1)),_0x4cf744=(0x0,me[_0x1f46b7(0x481)])();_0x4cf744[_0x1f46b7(0x13b)]((0x0,Po[_0x1f46b7(0x481)])({'origin'(_0x44056f,_0x4b88e1){const _0x213850=_0x1f46b7;let {ORIGIN:_0x328edc}=y[_0x213850(0x5b8)]('CORS');return _0x44056f||(_0x44056f='*'),_0x328edc[_0x213850(0x18f)]('*')!==-0x1||_0x328edc[_0x213850(0x18f)](_0x44056f)!==-0x1?_0x4b88e1(null,!0x0):_0x4b88e1(new Error(_0x213850(0x29e)));},'methods':[...y[_0x1f46b7(0x5b8)](_0x1f46b7(0x623))['METHODS']],'credentials':y['get'](_0x1f46b7(0x623))[_0x1f46b7(0x57e)]}),(0x0,me[_0x1f46b7(0x3a1)])({'extended':!0x0,'limit':_0x1f46b7(0x3e0)}),(0x0,me[_0x1f46b7(0xd6)])({'limit':_0x1f46b7(0x3e0)})),_0x4cf744['use']((_0x518913,_0x4b9d3e,_0x1f7eb0)=>{const _0x3a8ef9=_0x1f46b7;_0x518913[_0x3a8ef9(0x539)][_0x3a8ef9(0x4e5)](_0x3a8ef9(0x3a7))?_0x1f7eb0():(0x0,Do[_0x3a8ef9(0x481)])()(_0x518913,_0x4b9d3e,_0x1f7eb0);}),_0x4cf744['set'](_0x1f46b7(0x4b1),_0x1f46b7(0x2a2)),_0x4cf744[_0x1f46b7(0x512)](_0x1f46b7(0x334),(0x0,ks[_0x1f46b7(0x273)])(Y,'views')),_0x4cf744['use'](me[_0x1f46b7(0x481)][_0x1f46b7(0x616)]((0x0,ks['join'])(Y,_0x1f46b7(0x588)))),_0x4cf744[_0x1f46b7(0x13b)]((_0x316121,_0x399407,_0x277daf)=>{const _0x45ab81=_0x1f46b7;let _0xde0157=_0x399407['send'];_0x399407[_0x45ab81(0x43a)]=function(_0x5790e4){const _0x3cd87f=_0x45ab81;if(_0x316121[_0x3cd87f(0x5ae)][_0x3cd87f(0x1d6)]===_0x3cd87f(0xf8)||_0x316121[_0x3cd87f(0x454)][_0x3cd87f(0x58b)]===_0x3cd87f(0xf8)){let _0x4ea506=JSON[_0x3cd87f(0x5f3)](_0x5790e4);_0x5790e4=JSON['stringify'](_0x60f44c(_0x4ea506));}return _0xde0157[_0x3cd87f(0x261)](_0x399407,[_0x5790e4]);},_0x277daf();}),_0x4cf744[_0x1f46b7(0x13b)]('/',Ot),_0x4cf744['use']((_0x49f26e,_0x49d2c9,_0x1811a1,_0x4cf092)=>{const _0x229395=_0x1f46b7;if(_0x49f26e)return _0x1811a1['status'](_0x49f26e[_0x229395(0x517)]||0x1f4)[_0x229395(0xd6)](_0x49f26e);},(_0x5bd8b4,_0x47b26b,_0x12b81b)=>{const _0x3a3150=_0x1f46b7;let {method:_0x1be8d9,url:_0x4e6f46}=_0x5bd8b4;_0x47b26b[_0x3a3150(0x517)](0x194)[_0x3a3150(0xd6)]({'status':0x194,'message':_0x3a3150(0x3cc)+_0x1be8d9[_0x3a3150(0x5fa)]()+'\x20'+_0x4e6f46,'error':_0x3a3150(0x115)}),_0x12b81b();});let _0x60f44c=(_0xae939a,_0x5aa6a2=_0x1f46b7(0x16f))=>{const _0x2185f6=_0x1f46b7;let _0x32b75a=(_0x4d8aa4,_0x31dec0=null,_0x3b8982=!0x1)=>{const _0x168baf=a0_0x15b7;let _0xeccd61={};return Object[_0x168baf(0x2b5)](_0x4d8aa4)[_0x168baf(0x386)](_0x20ed62=>{const _0x45e88f=_0x168baf;let _0x59efa9=_0x4d8aa4[_0x20ed62],_0x1eb0c4=''+_0x5aa6a2+_0x20ed62;_0x31dec0&&!_0x3b8982&&(_0x1eb0c4=_0x31dec0+'.'+_0x20ed62),!_0x59efa9&&_0x59efa9!==0x0&&_0x59efa9!==!0x1||typeof _0x59efa9>'u'?_0xeccd61[_0x1eb0c4]=null:typeof _0x59efa9!=_0x45e88f(0x658)&&!Array['isArray'](_0x59efa9)?_0xeccd61[_0x1eb0c4]=_0x59efa9:typeof _0x59efa9==_0x45e88f(0x658)&&!Array[_0x45e88f(0x287)](_0x59efa9)?_0xeccd61=Object[_0x45e88f(0x154)](_0xeccd61,_0x32b75a(_0x59efa9,_0x1eb0c4)):Array[_0x45e88f(0x287)](_0x59efa9)&&(typeof _0x59efa9[0x0]=='object'?(_0xeccd61[_0x1eb0c4]=[],_0x59efa9[_0x45e88f(0x386)](_0x2b1a11=>{const _0x23684e=_0x45e88f;_0xeccd61[_0x1eb0c4][_0x23684e(0x53b)](_0x32b75a(_0x2b1a11,_0x1eb0c4,!0x0));})):_0xeccd61[_0x1eb0c4]=_0x59efa9);}),_0xeccd61;};return Array['isArray'](_0xae939a)?_0xae939a[_0x2185f6(0x51a)](_0xf0057c=>_0x32b75a(_0xf0057c)):typeof _0xae939a==_0x2185f6(0x658)&&_0xae939a!==null?_0x32b75a(_0xae939a):{};},_0x28bcc6=y[_0x1f46b7(0x5b8)](_0x1f46b7(0x4d1));$e[_0x1f46b7(0x2b7)]=_0x4cf744;let _0x370db2=$e[_0x28bcc6[_0x1f46b7(0x357)]],_0x100c55=_0x1f46b7(0x31d);_0x370db2['listen'](_0x28bcc6[_0x1f46b7(0x53c)],()=>{const _0x2a6cab=_0x1f46b7;_0x330bc3[_0x2a6cab(0x2c6)](_0x100c55),_0x330bc3[_0x2a6cab(0x2c6)](_0x28bcc6[_0x2a6cab(0x357)]['toUpperCase']()+_0x2a6cab(0x127)+_0x28bcc6[_0x2a6cab(0x53c)]);}),Ti(),Qs();}function Ls(_0x126499,_0x2d8c8a){return new Promise(_0x41d172=>{const _0x589d23=a0_0x15b7;(0x0,xo[_0x589d23(0x37d)])(_0x126499+'\x20'+_0x2d8c8a,_0x521383=>{_0x41d172(!_0x521383);});});}function Ro(_0x5c1acc,_0x1fddd3,_0x36cef0){return new Promise(_0x34f4c5=>{const _0x375901=a0_0x15b7;Ls(_0x5c1acc,_0x36cef0)[_0x375901(0xf9)](_0x30d59c=>{const _0x155097=_0x375901;if(_0x30d59c)_0x34f4c5(!0x0);else{let [_0x3d9736,..._0x301225]=_0x1fddd3['split']('\x20'),_0x226aeb=(0x0,Vs[_0x155097(0x1b5)])(_0x3d9736,_0x301225,{'shell':!0x0});_0x226aeb[_0x155097(0x650)]['on']('data',_0x12fd2c=>{const _0x317c78=_0x155097;console[_0x317c78(0x2c6)](_0x5c1acc+_0x317c78(0x4f9)+_0x12fd2c);}),_0x226aeb[_0x155097(0x498)]['on'](_0x155097(0x468),_0x591d5c=>{const _0x5d0a5f=_0x155097;console['error'](_0x5c1acc+_0x5d0a5f(0x1fd)+_0x591d5c);}),_0x226aeb['on'](_0x155097(0x2c3),_0x3405f4=>{_0x3405f4!==0x0?(console['error']('Erro\x20ao\x20instalar\x20'+_0x5c1acc+'.\x20Código\x20de\x20saída\x20'+_0x3405f4),_0x34f4c5(!0x1)):_0x34f4c5(!0x0);});}});});}var Ri=a0_0x4851ee(0xa2),Ai=Zt[a0_0x4851ee(0x481)][a0_0x4851ee(0x273)](__dirname,'./.git/config'),Ne=null;function Ii(){return new Promise((_0x1c82be,_0x1e9037)=>{const _0x5b97ed=a0_0x15b7;ke[_0x5b97ed(0x481)]['readFile'](Ai,_0x5b97ed(0x5a8),(_0x4d4688,_0x1a321c)=>{const _0x536236=_0x5b97ed;if(_0x4d4688){Ne=_0x4d4688,_0x1c82be();return;}_o['default']['parse'](_0x1a321c)['remote\x20\x22origin\x22']['url']===Ri?(Ne=null,_0x1c82be()):(Ne=new Error(_0x536236(0x5e6)),_0x1c82be());});});}async function Di(){const _0x2ccfa7=a0_0x4851ee;try{await Ii(),await Us();}catch(_0x19c801){console[_0x2ccfa7(0x44b)]('Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20'+_0x19c801),process[_0x2ccfa7(0x2c3)](0x1);}}Di();async function $o(){const _0x2d57c2=a0_0x4851ee;let _0x3de41b;try{_0x3de41b=(await Le[_0x2d57c2(0x481)][_0x2d57c2(0x5b8)](_0x2d57c2(0x359)))[_0x2d57c2(0x468)]['ip'];}catch(_0x6fe230){console['error'](_0x6fe230);try{_0x3de41b=(await Le['default']['get'](_0x2d57c2(0xab)))['data']['ip'];}catch(_0x211541){console['error'](_0x211541);try{_0x3de41b=(await Le[_0x2d57c2(0x481)]['get'](_0x2d57c2(0x611)))[_0x2d57c2(0x468)][_0x2d57c2(0xe1)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x18e32c){return console['error'](_0x18e32c),!0x1;}}}return _0x3de41b;}async function Pi(){const _0x5ca6bf=a0_0x4851ee;Ne||(await Ro(_0x5ca6bf(0x668),_0x5ca6bf(0x2a0),_0x5ca6bf(0x12e)),await Ro(_0x5ca6bf(0x3db),_0x5ca6bf(0x5f9),_0x5ca6bf(0x1c6)));}var Ao=0x0;async function Oi(){const _0x2d124a=a0_0x4851ee;Pi();let _0x20ce54=await Ls(_0x2d124a(0x668),_0x2d124a(0x12e)),_0x5e048a=await Ls(_0x2d124a(0x3db),'-version'),_0x26934c=y[_0x2d124a(0x5b8)]('REDIS'),_0x28089a=y[_0x2d124a(0x5b8)](_0x2d124a(0x21c)),_0x2fac6b=y[_0x2d124a(0x5b8)](_0x2d124a(0x45a))['API_KEY'][_0x2d124a(0x184)],_0x4bbddb=y['get'](_0x2d124a(0x3bc)),_0x26f9cd=await $o(),_0x386693=y[_0x2d124a(0x5b8)](_0x2d124a(0x4d1))['PORT'],_0x323801=y[_0x2d124a(0x5b8)](_0x2d124a(0x352));try{let _0x2ac33e={'ip':_0x26f9cd||null,'redis_instalado':_0x20ce54||null,'ffmpeg_instalado':_0x5e048a||null,'redis_enable':_0x26934c?.[_0x2d124a(0x1a4)]||null,'autoupdate':_0x28089a||null,'apikey':_0x2fac6b||null,'ssl':_0x4bbddb?.[_0x2d124a(0x42f)]||null,'lastupdate':ko||null,'port':_0x386693||null,'phone':_0x323801||null,'gitInstallError':Ne?.[_0x2d124a(0x5be)]||null};console[_0x2d124a(0x2c6)](_0x2d124a(0x26d),_0x2ac33e['ip']);for(let _0x2b91a7 in _0x2ac33e)_0x2ac33e[_0x2d124a(0x598)](_0x2b91a7)&&_0x2b91a7!=='ip'&&(_0x2ac33e[_0x2b91a7]=JSON[_0x2d124a(0x63a)](_0x2ac33e[_0x2b91a7]));return(await Le[_0x2d124a(0x481)]['post'](_0x2d124a(0x5a1),_0x2ac33e))[_0x2d124a(0x468)];}catch(_0x32e57b){return console[_0x2d124a(0x44b)](_0x32e57b),!0x1;}finally{}}var $s=!0x1,ko=0x20d,_i=0x3,Io=0x1b7740;async function Us(){const _0x1b10aa=a0_0x4851ee;if(!await $o())return console[_0x1b10aa(0x44b)](_0x1b10aa(0x625)),_0x1b10aa(0x33d);let _0x23ac06=await Oi();if(_0x23ac06){if(_0x23ac06['response']['licenca']===!0x0){let _0x36bffb=y['get']('AUTOUPDATE');Ne===null&&_0x36bffb!==_0x1b10aa(0x5fc)&&_0x23ac06[_0x1b10aa(0x97)]['last_update']-ko>0x0&&await xi(),$s||($s=!0x0,Mi());}else return console[_0x1b10aa(0x2c6)](_0x1b10aa(0x3c4)),$s&&(console['log'](_0x1b10aa(0x256)),process[_0x1b10aa(0x2c3)]()),_0x1b10aa(0x50d);let _0x56c02b=0x24*0x3c*0x3c,_0x3f1dd8=_0x23ac06[_0x1b10aa(0x97)]['segundos']>_0x56c02b?_0x56c02b:_0x23ac06[_0x1b10aa(0x97)][_0x1b10aa(0xf7)],_0x50b3da=Number(_0x3f1dd8);if(isNaN(_0x50b3da)){console['error'](_0x1b10aa(0x207));return;}let _0x2ce321=Math[_0x1b10aa(0x5d5)](_0x50b3da/0xe10),_0x4a6935=Math[_0x1b10aa(0x5d5)](_0x50b3da%0xe10/0x3c),_0x37e5bb=new Date(Date[_0x1b10aa(0x4b8)]()+_0x50b3da*0x3e8);setTimeout(Us,_0x50b3da*0x3e8);let _0x57166a=_0x1e3b80=>_0x1e3b80[_0x1b10aa(0x409)]()[_0x1b10aa(0x5c8)](0x2,'0'),_0x12d203=_0x1b10aa(0x513)+_0x57166a(_0x2ce321)+_0x1b10aa(0x4bf)+_0x57166a(_0x4a6935)+'\x20minutos.\x20Será\x20às\x20'+_0x57166a(_0x37e5bb[_0x1b10aa(0x490)]())+':'+_0x57166a(_0x37e5bb[_0x1b10aa(0x11f)]());console[_0x1b10aa(0x2c6)](_0x12d203);}else{if(Ao++,Ao<_i)console['log'](_0x1b10aa(0x14b)+Io/0xea60+'\x20minutos...'),setTimeout(Us,Io);else return console['error'](_0x1b10aa(0x2c1)),'SERVER_OFFLINE';}}async function xi(){const _0x3833b7=a0_0x4851ee;console[_0x3833b7(0x2c6)](_0x3833b7(0x5f7));let _0x497fc4=(0x0,Vs[_0x3833b7(0x1b5)])(_0x3833b7(0x61f),{'shell':!0x0});_0x497fc4[_0x3833b7(0x650)]['on'](_0x3833b7(0x468),_0x39ebcd=>{const _0x544d19=_0x3833b7;console[_0x544d19(0x2c6)](_0x544d19(0x16c)+_0x39ebcd);}),_0x497fc4[_0x3833b7(0x498)]['on'](_0x3833b7(0x468),_0x21ecf3=>{const _0x7b3734=_0x3833b7;console[_0x7b3734(0x44b)]('Erro\x20de\x20atualização:\x20'+_0x21ecf3);}),_0x497fc4['on'](_0x3833b7(0x2c3),_0x84a1c6=>{const _0x453514=_0x3833b7;_0x84a1c6!==0x0?console['error'](_0x453514(0x1ad)+_0x84a1c6):console['log'](_0x453514(0x2d8)),console[_0x453514(0x2c6)](_0x453514(0x302)),setTimeout(()=>process[_0x453514(0x2c3)](),0x2710);});}