const a0_0x108f24=a0_0x57b5;(function(_0x372a6e,_0x500a7f){const _0x443926=a0_0x57b5,_0x1a839e=_0x372a6e();while(!![]){try{const _0x1fe8e7=-parseInt(_0x443926(0x2ac))/0x1+-parseInt(_0x443926(0x723))/0x2*(parseInt(_0x443926(0x7cd))/0x3)+-parseInt(_0x443926(0x495))/0x4+parseInt(_0x443926(0x251))/0x5+-parseInt(_0x443926(0x484))/0x6*(parseInt(_0x443926(0x302))/0x7)+parseInt(_0x443926(0x3ff))/0x8*(-parseInt(_0x443926(0x5f4))/0x9)+parseInt(_0x443926(0x556))/0xa;if(_0x1fe8e7===_0x500a7f)break;else _0x1a839e['push'](_0x1a839e['shift']());}catch(_0x3e5ee0){_0x1a839e['push'](_0x1a839e['shift']());}}}(a0_0x1b73,0xd64a9));var Ir=Object[a0_0x108f24(0x265)],Ae=Object['defineProperty'],Dr=Object[a0_0x108f24(0x326)],xr=Object[a0_0x108f24(0x346)],_r=Object[a0_0x108f24(0x7e4)],Pr=Object[a0_0x108f24(0x5e7)]['hasOwnProperty'],$r=(_0x3dd0c1,_0x4e18a7)=>{for(var _0x58a5a0 in _0x4e18a7)Ae(_0x3dd0c1,_0x58a5a0,{'get':_0x4e18a7[_0x58a5a0],'enumerable':!0x0});},Os=(_0x591809,_0x5c98c1,_0x3e5cb8,_0x40356b)=>{const _0x4310d2=a0_0x108f24;if(_0x5c98c1&&typeof _0x5c98c1==_0x4310d2(0x252)||typeof _0x5c98c1==_0x4310d2(0x410)){for(let _0x399d02 of xr(_0x5c98c1))!Pr['call'](_0x591809,_0x399d02)&&_0x399d02!==_0x3e5cb8&&Ae(_0x591809,_0x399d02,{'get':()=>_0x5c98c1[_0x399d02],'enumerable':!(_0x40356b=Dr(_0x5c98c1,_0x399d02))||_0x40356b[_0x4310d2(0x3fc)]});}return _0x591809;},R=(_0x240e1a,_0x575ff4,_0x17f31a)=>(_0x17f31a=_0x240e1a!=null?Ir(_r(_0x240e1a)):{},Os(_0x575ff4||!_0x240e1a||!_0x240e1a[a0_0x108f24(0x58d)]?Ae(_0x17f31a,a0_0x108f24(0x543),{'value':_0x240e1a,'enumerable':!0x0}):_0x17f31a,_0x240e1a)),kr=_0x1fb1d0=>Os(Ae({},a0_0x108f24(0x58d),{'value':!0x0}),_0x1fb1d0),Go={};$r(Go,{'subdomain':()=>Es}),module[a0_0x108f24(0x283)]=kr(Go);var vr=R(require(a0_0x108f24(0x68c))),Ds=require('fs'),xs=require('js-yaml'),_s=require('path'),Oe=require(a0_0x108f24(0x3a6)),se=process[a0_0x108f24(0x5fc)](),de=(0x0,Oe[a0_0x108f24(0x631)])(se,'instances'),Is=(0x0,Oe['join'])(se,'src'),ji=(0x0,Oe[a0_0x108f24(0x631)])(se,a0_0x108f24(0x4ec),a0_0x108f24(0x681)),Ht=class{constructor(){const _0x18d927=a0_0x108f24;this[_0x18d927(0x3d6)]();}[a0_0x108f24(0x602)](_0x2de776){const _0xbd7955=a0_0x108f24;return this[_0xbd7955(0x41a)][_0x2de776];}[a0_0x108f24(0x3d6)](){const _0x9ee644=a0_0x108f24;this['env']=process[_0x9ee644(0x41a)]?.[_0x9ee644(0x36b)]!==_0x9ee644(0x2b2)?this['envYaml']():this[_0x9ee644(0x7e1)](),process[_0x9ee644(0x41a)]?.['DOCKER_ENV']===_0x9ee644(0x2b2)&&(this[_0x9ee644(0x41a)][_0x9ee644(0x6ed)][_0x9ee644(0x1f3)]=_0x9ee644(0x435),this[_0x9ee644(0x41a)]['SERVER'][_0x9ee644(0x3e8)]=Number[_0x9ee644(0x540)](process[_0x9ee644(0x41a)]?.['SERVER_PORT']??'8080'));}[a0_0x108f24(0x269)](){const _0x3d17a0=a0_0x108f24;return(0x0,xs[_0x3d17a0(0x43c)])((0x0,Ds[_0x3d17a0(0x3cc)])((0x0,_s[_0x3d17a0(0x631)])(Is,'../env.yml'),{'encoding':_0x3d17a0(0x229)}));}[a0_0x108f24(0x7e1)](){const _0x3f5c62=a0_0x108f24;return{'SERVER':{'TYPE':process[_0x3f5c62(0x41a)]['SERVER_TYPE'],'PORT':Number['parseInt'](process[_0x3f5c62(0x41a)][_0x3f5c62(0x1ee)]),'URL':process['env'][_0x3f5c62(0x79c)]},'CORS':{'ORIGIN':process[_0x3f5c62(0x41a)][_0x3f5c62(0x40a)]['split'](','),'METHODS':process['env'][_0x3f5c62(0x1e5)][_0x3f5c62(0x5ac)](','),'CREDENTIALS':process[_0x3f5c62(0x41a)]?.[_0x3f5c62(0x2ca)]==='true'},'SSL_CONF':{'PRIVKEY':process[_0x3f5c62(0x41a)]?.[_0x3f5c62(0x45c)],'FULLCHAIN':process['env']?.[_0x3f5c62(0x54f)]},'STORE':{'CLEANING_INTERVAL':Number[_0x3f5c62(0x7ac)](process[_0x3f5c62(0x41a)]?.[_0x3f5c62(0x4a5)])?Number['parseInt'](process[_0x3f5c62(0x41a)]['STORE_CLEANING_TERMINAL']):void 0x0,'MESSAGES':process[_0x3f5c62(0x41a)]?.['STORE_MESSAGE']===_0x3f5c62(0x2b2),'CONTACTS':process['env']?.[_0x3f5c62(0x758)]===_0x3f5c62(0x2b2),'CHATS':process[_0x3f5c62(0x41a)]?.['STORE_CHATS']===_0x3f5c62(0x2b2)},'DATABASE':{'CONNECTION':{'HOST':process[_0x3f5c62(0x41a)]?.[_0x3f5c62(0x6ff)],'PORT':Number['parseInt'](process[_0x3f5c62(0x41a)]?.['DATABASE_CONNECTION_HOST']),'USER':process[_0x3f5c62(0x41a)][_0x3f5c62(0x52a)],'PASSWORD':process[_0x3f5c62(0x41a)]['DATABASE_CONNECTION_PASSWORD'],'URI':process['env'][_0x3f5c62(0x56d)],'DB_PREFIX_NAME':process[_0x3f5c62(0x41a)][_0x3f5c62(0x427)]},'ENABLED':process[_0x3f5c62(0x41a)]?.[_0x3f5c62(0x24e)]===_0x3f5c62(0x2b2)},'REDIS':{'ENABLED':process['env']?.['REDIS_ENABLED']===_0x3f5c62(0x2b2),'URI':process['env'][_0x3f5c62(0x4e1)]||'redis://127.0.0.1:6379','PREFIX_KEY':process['env'][_0x3f5c62(0x1c9)]||_0x3f5c62(0x3a9)},'LOG':{'LEVEL':process['env']?.[_0x3f5c62(0x77f)][_0x3f5c62(0x5ac)](','),'COLOR':process[_0x3f5c62(0x41a)]?.[_0x3f5c62(0x693)]===_0x3f5c62(0x2b2)},'AUTHENTICATION':{'TYPE':process[_0x3f5c62(0x41a)][_0x3f5c62(0x232)],'API_KEY':{'KEY':process['env'][_0x3f5c62(0x1eb)]},'JWT':{'EXPIRIN_IN':Number[_0x3f5c62(0x7ac)](process[_0x3f5c62(0x41a)]?.[_0x3f5c62(0x64d)])?Number[_0x3f5c62(0x540)](process[_0x3f5c62(0x41a)]['AUTHENTICATION_JWT_EXPIRIN_IN']):0xe10,'SECRET':process[_0x3f5c62(0x41a)][_0x3f5c62(0x388)]}}};}},b=new Ht(),Nr=R(require(a0_0x108f24(0x792))),ue=R(require(a0_0x108f24(0x368))),Rs=require(a0_0x108f24(0x3a6)),Kt=R(require(a0_0x108f24(0x2e4))),Qt=(_0x54de06=>(_0x54de06[a0_0x108f24(0x449)]=a0_0x108f24(0x4e8),_0x54de06['INFO']=a0_0x108f24(0x674),_0x54de06['WARN']=a0_0x108f24(0x77a),_0x54de06[a0_0x108f24(0x482)]=a0_0x108f24(0x7ff),_0x54de06[a0_0x108f24(0x456)]='\x1b[36m',_0x54de06['VERBOSE']=a0_0x108f24(0x23a),_0x54de06['DARK']=a0_0x108f24(0x646),_0x54de06))(Qt||{}),Ps=(_0x58ad85=>(_0x58ad85[a0_0x108f24(0x449)]='\x1b[32m%s\x1b[0m',_0x58ad85[a0_0x108f24(0x4e0)]='\x1b[30m%s\x1b[0m',_0x58ad85[a0_0x108f24(0x42f)]=a0_0x108f24(0x237),_0x58ad85[a0_0x108f24(0x4ad)]=a0_0x108f24(0x768),_0x58ad85['ERROR']=a0_0x108f24(0x2c5),_0x58ad85[a0_0x108f24(0x456)]=a0_0x108f24(0x76b),_0x58ad85['VERBOSE']=a0_0x108f24(0x212),_0x58ad85))(Ps||{}),$s=(_0x112d23=>(_0x112d23[a0_0x108f24(0x449)]=a0_0x108f24(0x449),_0x112d23[a0_0x108f24(0x4ad)]=a0_0x108f24(0x4ad),_0x112d23['INFO']=a0_0x108f24(0x42f),_0x112d23[a0_0x108f24(0x4e0)]=a0_0x108f24(0x4e0),_0x112d23[a0_0x108f24(0x482)]=a0_0x108f24(0x482),_0x112d23[a0_0x108f24(0x456)]=a0_0x108f24(0x456),_0x112d23[a0_0x108f24(0x4ce)]=a0_0x108f24(0x4ce),_0x112d23))($s||{}),ks=(_0x15d63e=>(_0x15d63e[a0_0x108f24(0x449)]=a0_0x108f24(0x6cb),_0x15d63e[a0_0x108f24(0x42f)]=a0_0x108f24(0x31b),_0x15d63e[a0_0x108f24(0x4ad)]=a0_0x108f24(0x1da),_0x15d63e[a0_0x108f24(0x4e0)]='\x1b[40m',_0x15d63e[a0_0x108f24(0x482)]=a0_0x108f24(0x7c6),_0x15d63e[a0_0x108f24(0x456)]='\x1b[46m',_0x15d63e[a0_0x108f24(0x4ce)]=a0_0x108f24(0x316),_0x15d63e))(ks||{}),v=class{constructor(_0x3d1cbe=a0_0x108f24(0x4fb)){const _0x57c9f2=a0_0x108f24;this[_0x57c9f2(0x623)]=_0x3d1cbe,this[_0x57c9f2(0x62b)]=b;}[a0_0x108f24(0x784)](_0x3d6699){const _0x1009d9=a0_0x108f24;this[_0x1009d9(0x623)]=_0x3d6699;}['console'](_0x3ce4b0,_0x2d4402){const _0x57caf4=a0_0x108f24;let _0x3c2160=[];this['configService'][_0x57caf4(0x602)](_0x57caf4(0x449))['LEVEL'][_0x57caf4(0x2ab)](_0x5d410e=>_0x3c2160[_0x57caf4(0x1d0)]($s[_0x5d410e]));let _0xb8f3fb=typeof _0x3ce4b0;_0x3c2160[_0x57caf4(0x3cd)](_0x2d4402)&&(b[_0x57caf4(0x602)](_0x57caf4(0x449))[_0x57caf4(0x6c6)]?(console[_0x57caf4(0x472)]('\x1b[1m'+Ps[_0x2d4402],'\x1b[1m\x1b[37m',(0x0,Kt[_0x57caf4(0x543)])()['format'](_0x57caf4(0x630)),_0x57caf4(0x3c9),Qt[_0x2d4402]+ks[_0x2d4402]+'\x1b[1m',_0x2d4402+_0x57caf4(0x1c3),_0x57caf4(0x6d5),this[_0x57caf4(0x623)]+_0x57caf4(0x3c9),Qt[_0x2d4402],_0xb8f3fb!=='object'?_0x3ce4b0:'',_0x57caf4(0x3c9)),_0xb8f3fb===_0x57caf4(0x252)&&console[_0x57caf4(0x472)](_0x3ce4b0,'\x0a')):console[_0x57caf4(0x472)]((0x0,Kt[_0x57caf4(0x543)])()['format'](_0x57caf4(0x68d)),_0x2d4402+'\x20',''+this[_0x57caf4(0x623)],_0x3ce4b0));}[a0_0x108f24(0x472)](_0x4d8a8b){const _0x456ef1=a0_0x108f24;this[_0x456ef1(0x7c8)](_0x4d8a8b,_0x456ef1(0x449));}['info'](_0x450a4d){const _0x23a74a=a0_0x108f24;this[_0x23a74a(0x7c8)](_0x450a4d,'INFO');}[a0_0x108f24(0x2fb)](_0xb3ba51){const _0x117ee6=a0_0x108f24;this[_0x117ee6(0x7c8)](_0xb3ba51,'WARN');}[a0_0x108f24(0x2d9)](_0x463685){const _0xa50df5=a0_0x108f24;this[_0xa50df5(0x7c8)](_0x463685,_0xa50df5(0x482));}[a0_0x108f24(0x5f3)](_0xbd32f7){const _0x290a41=a0_0x108f24;this[_0x290a41(0x7c8)](_0xbd32f7,_0x290a41(0x4ce));}[a0_0x108f24(0x4eb)](_0x213261){const _0x26db02=a0_0x108f24;this['console'](_0x213261,_0x26db02(0x456));}[a0_0x108f24(0x1bf)](_0x59d0f3){this['console'](_0x59d0f3,'DARK');}};function Ls(){const _0x1f9afe=a0_0x108f24;process['on'](_0x1f9afe(0x643),(_0x3d714c,_0x27d533)=>{const _0x5ce723=_0x1f9afe;new v(_0x5ce723(0x643))[_0x5ce723(0x2d9)]({'origin':_0x27d533,'stderr':process[_0x5ce723(0x4f4)]['fd'],'error':_0x3d714c});}),process['on']('unhandledRejection',(_0x306227,_0x1fcc6c)=>{const _0x11d669=_0x1f9afe;new v(_0x11d669(0x7da))[_0x11d669(0x2d9)]({'origin':_0x1fcc6c,'stderr':process[_0x11d669(0x4f4)]['fd'],'error':_0x306227});});}var Fs=R(require('eventemitter2')),Yt=new Fs[(a0_0x108f24(0x543))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Ie=require(a0_0x108f24(0x546)),Xt=R(require(a0_0x108f24(0x546))),Lr=new v('Db\x20Connection'),q=b['get'](a0_0x108f24(0x398)),N=q['ENABLED']?q[a0_0x108f24(0x46e)]['URI']?Xt[a0_0x108f24(0x543)][a0_0x108f24(0x325)](q['CONNECTION'][a0_0x108f24(0x4f6)],{'dbName':q[a0_0x108f24(0x46e)][a0_0x108f24(0x55a)]+'-whatsapp-api'}):Xt['default'][a0_0x108f24(0x325)](a0_0x108f24(0x590)+q[a0_0x108f24(0x46e)][a0_0x108f24(0x2bc)]+':'+q[a0_0x108f24(0x46e)][a0_0x108f24(0x3e8)]+a0_0x108f24(0x5d1),{'user':q[a0_0x108f24(0x46e)][a0_0x108f24(0x430)],'pass':q[a0_0x108f24(0x46e)][a0_0x108f24(0x462)],'dbName':q[a0_0x108f24(0x46e)][a0_0x108f24(0x55a)]+'-whatsapp-api'}):null;q['ENABLED']&&Lr[a0_0x108f24(0x7a9)]('ON\x20-\x20dbName:\x20'+N[a0_0x108f24(0x68b)]);var Fr=new Ie[(a0_0x108f24(0x343))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String},'chatId':{'type':String}}),Ur=new Ie[(a0_0x108f24(0x343))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[Fr],'default':[]},'statusLead':{'type':String},'note':{'type':String},'disableFlowsUntil':{'type':Number},'serviceOpen':{'type':Boolean},'assignedTo':{'type':String}},{'_id':!0x1}),Jr=new Ie['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':Ur,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'group_size':{'type':Number},'group_announce':{'type':Boolean},'imported':{'type':Boolean},'labels':{'type':[String]}}),Us=_0x446b94=>{const _0x6c8774=a0_0x108f24;let _0x4ecea2='z_'+_0x446b94+_0x6c8774(0x412);return N?.[_0x6c8774(0x2e5)](_0x6c8774(0x42e),Jr,_0x4ecea2);},Js=require(a0_0x108f24(0x546)),jr=new Js[(a0_0x108f24(0x343))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String,'minlength':0x1},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),js=_0x432143=>{const _0x430d30=a0_0x108f24;let _0x367d4e='z_'+_0x432143+_0x430d30(0x550);return N?.[_0x430d30(0x2e5)](_0x430d30(0x4d1),jr,_0x367d4e);},qs=require(a0_0x108f24(0x546)),qr=new qs[(a0_0x108f24(0x343))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String,'minlength':0x3,'enum':[a0_0x108f24(0x38b),'web','ios']},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String}}),Vs=_0x5b8ce7=>{const _0x35805a=a0_0x108f24;let _0x460343='z_'+_0x5b8ce7+_0x35805a(0x683);return N?.[_0x35805a(0x2e5)](_0x35805a(0x7f1),qr,_0x460343);},Bs=require(a0_0x108f24(0x546)),Zt=class{},Vr=new Bs[(a0_0x108f24(0x343))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'proxy':{'type':String}}),Gs=N?.[a0_0x108f24(0x2e5)](Zt[a0_0x108f24(0x2ec)],Vr,a0_0x108f24(0x49d)),Ws=require(a0_0x108f24(0x546)),es=class{},zs=new Ws['Schema']({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});zs[a0_0x108f24(0x78c)](a0_0x108f24(0x608),function(_0x5a1daa){const _0x33a807=a0_0x108f24;delete this[_0x33a807(0x665)],delete this[_0x33a807(0x419)],delete this[_0x33a807(0x27f)],delete this[_0x33a807(0x7b3)],delete this['flowStopMinutes'],_0x5a1daa();});var Hs=N?.['model'](es[a0_0x108f24(0x2ec)],zs,a0_0x108f24(0x2f1)),x=require('mongoose'),De=class{},Ks=new x[(a0_0x108f24(0x343))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),ts=new x[(a0_0x108f24(0x343))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),Br=new x[(a0_0x108f24(0x343))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':'list'},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x108f24(0x1d3)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':'Esse\x20fluxo\x20expirou'},'pollErrorMessage':{'type':String,'default':'Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.'},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),Qs=new x['Schema']({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),Gr=new x[(a0_0x108f24(0x343))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String}},{'_id':!0x1}),Wr=new x[(a0_0x108f24(0x343))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Ys=new x[(a0_0x108f24(0x343))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':Br},'apirequest':Gr,'stopMinutes':{'type':String},'goToFlow':{'type':String},'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa}}),is=new x[(a0_0x108f24(0x343))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),Xs=new x[(a0_0x108f24(0x343))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),ss=class{},ns=new x[(a0_0x108f24(0x343))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'readMessages':{'type':Boolean,'default':!0x1},'testingWith':{'type':String},'startCommandWord':{'type':String,'default':function(){const _0x438ae1=a0_0x108f24;return'!cmd_'+Math[_0x438ae1(0x243)]()['toString'](0x24)['slice'](0x2,0x7);},'required':!0x1,'minlength':0x5},'variables':[is],'variablesNotFound':{'type':[String]},'blocks':[Ys],'groups':[Ks],'conditions':[Qs],'varedits':[Xs],'replyOptions':{'type':[ts],'default':[]}});ns[a0_0x108f24(0x78c)](a0_0x108f24(0x608),function(_0x4c0718){const _0x16757e=a0_0x108f24;let _0x347f36=new Set(),_0x45f4af=new Set(this[_0x16757e(0x21d)]?.[_0x16757e(0x49e)](_0x1c1a33=>_0x1c1a33[_0x16757e(0x2ec)])),_0x113eff=JSON[_0x16757e(0x35b)](this),_0x3f4b9f=/{{(?!_)([^}]*)}}/g,_0x289900;for(;(_0x289900=_0x3f4b9f['exec'](_0x113eff))!==null;)_0x45f4af[_0x16757e(0x7a7)](_0x289900[0x1])||_0x347f36[_0x16757e(0x7f9)](_0x289900[0x1]);_0x347f36[_0x16757e(0x5e8)]>0x0?(console[_0x16757e(0x2fb)](_0x16757e(0x314),Array[_0x16757e(0x446)](_0x347f36)),this[_0x16757e(0x447)]=Array[_0x16757e(0x446)](_0x347f36)):this['variablesNotFound']=[],_0x4c0718();});var Zs=_0x516d64=>{const _0x58966a=a0_0x108f24;let _0xb87ca6='z_'+_0x516d64+_0x58966a(0x7f3);return N?.['model']('FlowModel',ns,_0xb87ca6);},ea=N?.[a0_0x108f24(0x2e5)](ss[a0_0x108f24(0x2ec)],ns,a0_0x108f24(0x48d)),zr=new x[(a0_0x108f24(0x343))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[is],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[Wr]},{'_id':!0x1}),as=class{},ta=new x[(a0_0x108f24(0x343))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[is],'blocks':[Ys],'groups':[Ks],'conditions':[Qs],'varedits':[Xs],'replyOptions':{'type':[ts],'default':[]},'chatLog':zr,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x108f24(0x691)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x108f24(0x80a)},'waitingMenu_replyOptions':{'type':[ts],'default':[]}}),sa=_0x3a11c3=>{const _0x47b648=a0_0x108f24;let _0x3138f7='z_'+_0x3a11c3+'_FlowHistorico';return N?.[_0x47b648(0x2e5)](_0x47b648(0x320),ta,_0x3138f7);},aa=N?.[a0_0x108f24(0x2e5)](as['name'],ta,a0_0x108f24(0x49c)),rs=class{},Hr=new x[(a0_0x108f24(0x343))]({'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),Kr=new x[(a0_0x108f24(0x343))]({'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'mediatype':{'type':String},'fileName':{'type':String}},{'_id':!0x1}),ra=new x[(a0_0x108f24(0x343))]({'owner':{'type':String},'status':{'type':String,'default':a0_0x108f24(0x65c)},'info':{'type':String},'type':{'type':String},'flowName':{'type':String},'message':{'type':Kr,'default':{}},'remoteJids':{'type':[String],'default':[]},'when':{'type':Number},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'messagesSend':{'type':[Hr],'default':[]},'remoteJidsRemaining':{'type':[String],'default':[]},'startSend':{'type':Number}}),oa=_0x135ab5=>{const _0x270a55=a0_0x108f24;let _0x1f0da0='z_'+_0x135ab5+_0x270a55(0x71f);return N?.[_0x270a55(0x2e5)](_0x270a55(0x6f3),ra,_0x1f0da0);},ia=N?.['model'](rs[a0_0x108f24(0x2ec)],ra,a0_0x108f24(0x2e1)),os=class{},Qr=new x['Schema']({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Yr=new x[(a0_0x108f24(0x343))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'},'stopConversation':{'type':String,'default':a0_0x108f24(0x6c4)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa}},{'_id':!0x1}),Xr=new x[(a0_0x108f24(0x343))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),Zr=new x[(a0_0x108f24(0x343))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[Xr]},'customFields':{'type':[Qr]},'flowConfig':{'type':Yr,'default':{}}}),xe=N?.[a0_0x108f24(0x2e5)](os[a0_0x108f24(0x2ec)],Zr,'AutomateSystem'),na=require(a0_0x108f24(0x546)),eo=new na[(a0_0x108f24(0x343))]({'_id':{'type':String},'name':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),ca=_0x1e49a6=>{const _0xec2339=a0_0x108f24;let _0x5936fc='z_'+_0x1e49a6+'_Labels';return N?.[_0xec2339(0x2e5)](_0xec2339(0x647),eo,_0x5936fc);},I=class{constructor(_0x460683){const _0x390d47=a0_0x108f24;this[_0x390d47(0x37e)]=_0x460683[_0x390d47(0x602)](_0x390d47(0x398));}};function T(_0x12dad4){const _0x44d1a7=a0_0x108f24;let _0x241cb0={};for(let [_0x55fffb,_0x44cbfa]of Object[_0x44d1a7(0x218)](_0x12dad4))if(typeof _0x44cbfa==_0x44d1a7(0x252)&&!Array[_0x44d1a7(0x47c)](_0x44cbfa)){for(let [_0xc472cd,_0x13dd47]of Object[_0x44d1a7(0x218)](_0x44cbfa))_0x241cb0[_0x55fffb+'.'+_0xc472cd]=_0x13dd47;}else _0x241cb0[_0x55fffb]=_0x44cbfa;return _0x241cb0;}var _e=class{constructor(_0x3db0cf,_0xfc2dae,_0x25457f,_0x377359,_0x3bb615,_0x3ed24b,_0x1384c5,_0xc23780,_0x161a94,_0x29c93a,_0x54208f){const _0x23accc=a0_0x108f24;this[_0x23accc(0x58c)]=_0x3db0cf,this['chat']=_0xfc2dae,this[_0x23accc(0x46c)]=_0x25457f,this[_0x23accc(0x2f1)]=_0x377359,this[_0x23accc(0x681)]=_0x3bb615,this[_0x23accc(0x48d)]=_0x3ed24b,this[_0x23accc(0x49c)]=_0x1384c5,this['label']=_0xc23780,this['scheduleMessage']=_0x161a94,this['automateSystem']=_0x29c93a,this[_0x23accc(0x7bd)]=_0x54208f;}get[a0_0x108f24(0x1bd)](){const _0xdcc437=a0_0x108f24;return this[_0xdcc437(0x7bd)];}},Pe=class{},$e=class extends I{[a0_0x108f24(0x1c8)](_0xe84988){return Vs(_0xe84988);}async[a0_0x108f24(0x1d5)](_0x3c9249,_0x460fb9){const _0x8b6e41=a0_0x108f24;if(_0x3c9249[_0x8b6e41(0x231)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x8b6e41(0x1c8)](_0x460fb9)[_0x8b6e41(0x42c)]([..._0x3c9249]))[_0x8b6e41(0x231)]};}catch(_0xf0e38d){return console['log'](_0x8b6e41(0x29b),_0xf0e38d),_0xf0e38d;}}async[a0_0x108f24(0x731)](_0x596de0,_0x45c418){const _0x36f9da=a0_0x108f24;try{let _0x1e5678=this[_0x36f9da(0x1c8)](_0x45c418),_0x441618=T(_0x596de0[_0x36f9da(0x32e)]);return await _0x1e5678[_0x36f9da(0x731)](_0x441618)[_0x36f9da(0x223)]({'messageTimestamp':-0x1})[_0x36f9da(0x239)](_0x596de0?.[_0x36f9da(0x239)]??0x0)['lean']();}catch{return[];}}async[a0_0x108f24(0x714)](_0x470966,_0x47be5c){const _0x3f1772=a0_0x108f24;try{let _0x4c965c=this[_0x3f1772(0x1c8)](_0x47be5c),_0xcb3d45=T(_0x470966['where']);await _0x4c965c[_0x3f1772(0x34a)](_0xcb3d45);}catch(_0x5cbdf5){console[_0x3f1772(0x2d9)](_0x5cbdf5);}}async[a0_0x108f24(0x635)](_0x51279d,_0x28a9c3,_0xad5a0c){const _0x469817=a0_0x108f24;try{let _0x38a115=this[_0x469817(0x1c8)](_0xad5a0c),_0x5a4c79=T(_0x51279d[_0x469817(0x32e)]);return await _0x38a115['findOneAndUpdate'](_0x5a4c79,{'$set':_0x28a9c3},{'new':!0x0});}catch(_0x421776){throw console['error'](_0x421776),_0x421776;}}async[a0_0x108f24(0x42c)](_0x1dcdb8,_0x42fc18){const _0x356a41=a0_0x108f24;if(_0x1dcdb8[_0x356a41(0x231)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x356a41(0x1c8)](_0x42fc18)[_0x356a41(0x42c)]([..._0x1dcdb8]))[_0x356a41(0x231)]};}catch(_0x3dc692){return console['log'](_0x356a41(0x29b),_0x3dc692),_0x3dc692;}}async[a0_0x108f24(0x358)](_0x59ae55){const _0x517cf0=a0_0x108f24;try{return await this[_0x517cf0(0x1c8)](_0x59ae55)[_0x517cf0(0x3d2)]['drop'](),{'success':!0x0};}catch(_0x5ad491){return console[_0x517cf0(0x2d9)](_0x5ad491),{'success':!0x1,'error':_0x5ad491};}}},pr=R(require('@ffmpeg-installer/ffmpeg')),w=R(require(a0_0x108f24(0x7fe))),Ee=require('fs'),P=R(require(a0_0x108f24(0x3a6))),te=R(require(a0_0x108f24(0x35d))),gr=require(a0_0x108f24(0x3eb)),hr=R(require(a0_0x108f24(0x652))),mr=R(require(a0_0x108f24(0x6be))),la=[a0_0x108f24(0x1c2),a0_0x108f24(0x31c),a0_0x108f24(0x5a3),a0_0x108f24(0x347),a0_0x108f24(0x593)],ua=[a0_0x108f24(0x244),a0_0x108f24(0x6e3),a0_0x108f24(0x2ce),a0_0x108f24(0x1e4)],ys=require('os'),Rt=R(require(a0_0x108f24(0x54c))),Ot=require(a0_0x108f24(0x770)),Tt=require('node-mime-types'),ie=R(require(a0_0x108f24(0x546))),$=require(a0_0x108f24(0x7be)),pe=class{constructor(_0x9dd4d3,_0x35487f,_0x1fc539){const _0x260500=a0_0x108f24;this[_0x260500(0x7c1)]=_0x9dd4d3,this[_0x260500(0x1e7)]=_0x35487f,this['name']=_0x1fc539;}},ke=class{},Le=class{},ye=class{},Fe=class{},Ue=class{},ge=class{},Je=class{},je=class{},qe=class{},Ve=class{},Et=R(require('express')),da=require('fs'),pa=require(a0_0x108f24(0x3a6));async function Be(_0x44fffb){const _0x331626=a0_0x108f24;let _0x53c6c0=V[_0x331626(0x369)][_0x44fffb];if(q[_0x331626(0x22c)]){let _0xfb6a5a=N[_0x331626(0x5b9)]()['db'](q[_0x331626(0x46e)][_0x331626(0x55a)]+'-instances')[_0x331626(0x3d2)](_0x44fffb);return _0x53c6c0||(await _0xfb6a5a[_0x331626(0x731)]({})['toArray']())['length']>0x0;}return _0x53c6c0||(0x0,da[_0x331626(0x470)])((0x0,pa[_0x331626(0x631)])(de,_0x44fffb));}async function ga(_0x14866e,_0xe9b856,_0x4a3097){const _0x435d94=a0_0x108f24;if(_0x14866e[_0x435d94(0x3d1)][_0x435d94(0x3cd)](_0x435d94(0x771))||_0x14866e[_0x435d94(0x3d1)][_0x435d94(0x3cd)](_0x435d94(0x7eb))||_0x14866e[_0x435d94(0x3d1)]['includes'](_0x435d94(0x4c7))||_0x14866e['originalUrl']['includes'](_0x435d94(0x3b9))||_0x14866e[_0x435d94(0x3d1)]['includes'](_0x435d94(0x5d3))||_0x14866e['originalUrl'][_0x435d94(0x3cd)](_0x435d94(0x5b7))||_0x14866e[_0x435d94(0x3d1)]['includes'](_0x435d94(0x53a)))return _0x4a3097();let _0x253612=_0x14866e[_0x435d94(0x452)];if(!_0x253612?.[_0x435d94(0x476)])throw new h(_0x435d94(0x4de));if(!await Be(_0x253612[_0x435d94(0x476)]))throw new L(_0x435d94(0x4fa)+_0x253612[_0x435d94(0x476)]+'\x20instance\x20does\x20not\x20exist');_0x4a3097();}async function ha(_0x58814f,_0x2bd30c,_0x2a8870){const _0x1ee1c6=a0_0x108f24;if(_0x58814f['originalUrl'][_0x1ee1c6(0x3cd)]('/instance/create')){let _0x1fab88=_0x58814f[_0x1ee1c6(0x2c1)];if(await Be(_0x1fab88['instanceName']))throw new H('This\x20name\x20'+_0x1fab88[_0x1ee1c6(0x476)]+_0x1ee1c6(0x7f5));V['waInstances'][_0x1fab88[_0x1ee1c6(0x476)]]&&delete V['waInstances'][_0x1fab88[_0x1ee1c6(0x476)]];}_0x2a8870();}var ma=require(a0_0x108f24(0x7be)),fa=R(require(a0_0x108f24(0x79a))),Ge=a0_0x108f24(0x3a9),so=new v(a0_0x108f24(0x505));async function ao(_0x3dee96,_0x182454,_0x2efb72){const _0x55c791=a0_0x108f24;let _0x5e1766=_0x3dee96[_0x55c791(0x602)](_0x55c791(0x4b1));if(_0x5e1766&&b['get'](_0x55c791(0x52d))[_0x55c791(0x568)][_0x55c791(0x708)]!==_0x5e1766)throw new Z();if(b[_0x55c791(0x602)](_0x55c791(0x52d))['API_KEY'][_0x55c791(0x708)]===_0x5e1766)return _0x2efb72();if((_0x3dee96['originalUrl'][_0x55c791(0x3cd)](_0x55c791(0x771))||_0x3dee96['originalUrl']['includes'](_0x55c791(0x7eb)))&&!_0x5e1766)throw new H(_0x55c791(0x411),_0x55c791(0x1e8));let _0xa170dc=b[_0x55c791(0x602)](_0x55c791(0x52d))['JWT'];try{let [_0xf36afb,_0x10d649]=_0x3dee96[_0x55c791(0x602)]('authorization')[_0x55c791(0x5ac)]('\x20');if(_0xf36afb[_0x55c791(0x2f2)]()!==_0x55c791(0x32d))throw new Z();if(!(0x0,ma['isJWT'])(_0x10d649))throw new Z();let _0x3a05b9=_0x3dee96[_0x55c791(0x452)],_0x242e2c=fa['default'][_0x55c791(0x762)](_0x10d649,_0xa170dc[_0x55c791(0x67f)],{'ignoreExpiration':_0xa170dc[_0x55c791(0x7d4)]===0x0});if(_0x3a05b9['instanceName']!==_0x242e2c['instanceName']||Ge!==_0x242e2c['apiName'])throw new Z();return _0x2efb72();}catch(_0x220cf0){throw so[_0x55c791(0x2d9)](_0x220cf0),new Z();}}async function ro(_0x46e57f,_0xe5d479,_0x393722){const _0xdb4635=a0_0x108f24;let _0x330595=b[_0xdb4635(0x602)]('AUTHENTICATION')[_0xdb4635(0x568)],_0x70fa37=_0x46e57f[_0xdb4635(0x602)](_0xdb4635(0x4b1));if(_0x330595[_0xdb4635(0x708)]===_0x70fa37)return _0x393722();if(_0x46e57f[_0xdb4635(0x3d1)]['includes'](_0xdb4635(0x771))){let _0x578e84=We,_0x42eab5=_0x46e57f['body'][_0xdb4635(0x476)];if(_0x578e84&&_0x42eab5[_0xdb4635(0x2f2)]()[_0xdb4635(0x418)](_0x578e84[_0xdb4635(0x2f2)]()))return _0x393722();if(!_0x70fa37)throw new H(_0xdb4635(0x411),_0xdb4635(0x1e8));}if(_0x46e57f[_0xdb4635(0x3d1)][_0xdb4635(0x3cd)](_0xdb4635(0x7eb))&&!_0x70fa37)throw new H(_0xdb4635(0x411),_0xdb4635(0x1e8));if(_0x46e57f['originalUrl'][_0xdb4635(0x3cd)](_0xdb4635(0x4c7))&&!_0x70fa37)throw new H(_0xdb4635(0x411),'The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x46e57f[_0xdb4635(0x3d1)]['includes'](_0xdb4635(0x3b9))&&!_0x70fa37)throw new H('Missing\x20global\x20api\x20key',_0xdb4635(0x1e8));try{let _0x4cb7eb=_0x46e57f[_0xdb4635(0x452)];if((await ne[_0xdb4635(0x681)][_0xdb4635(0x731)](_0x4cb7eb[_0xdb4635(0x476)]))['apikey']===_0x70fa37)return _0x393722();}catch{}throw new Z();}var ya={'jwt':ao,'apikey':ro},Ya=require(a0_0x108f24(0x368)),C=require(a0_0x108f24(0x3eb)),E=(..._0x14eba6)=>{const _0x2f346d=a0_0x108f24;let _0x34b95c={};return _0x14eba6[_0x2f346d(0x2ab)](_0x4adf1d=>_0x34b95c[_0x4adf1d]={'minLength':0x1,'description':_0x2f346d(0x78e)+_0x4adf1d+'\x22\x20cannot\x20be\x20empty'}),{'if':{'propertyNames':{'enum':[..._0x14eba6]}},'then':{'properties':_0x34b95c}};},M={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'instanceName':{'type':'string'}},...E(a0_0x108f24(0x476))},Hn={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'oldToken':{'type':a0_0x108f24(0x473)}},'required':[a0_0x108f24(0x596)],...E('oldToken')},Kn={'properties':{'key':{'type':'object','properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x108f24(0x473)},'fromMe':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]}},'required':['id',a0_0x108f24(0x47b),a0_0x108f24(0x310)],...E('id','remoteJid')},'message':{'type':a0_0x108f24(0x252)}}},K={'properties':{'delay':{'type':'integer','description':a0_0x108f24(0x735)},'presence':{'type':a0_0x108f24(0x473),'enum':[a0_0x108f24(0x6e1),a0_0x108f24(0x5f2),a0_0x108f24(0x7aa),'recording',a0_0x108f24(0x345)]}}},W={'type':a0_0x108f24(0x473),'pattern':'^\x5cd+[\x5c.@\x5cw-]+','description':'Invalid\x20format'},wa={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'number':{...W},'options':{...K},'textMessage':{'type':a0_0x108f24(0x252),'properties':{'text':{'type':a0_0x108f24(0x473)}},'required':['text'],...E('text')}},'required':[a0_0x108f24(0x350),a0_0x108f24(0x53e)]},ba={'type':a0_0x108f24(0x473),'pattern':a0_0x108f24(0x63a),'description':a0_0x108f24(0x7b9)},Qn={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'number':{...ba},'options':{...K},'textMessage':{'type':a0_0x108f24(0x252),'properties':{'text':{'type':'string'}},'required':[a0_0x108f24(0x341)],...E(a0_0x108f24(0x341))}},'required':['textMessage',a0_0x108f24(0x53e)]},Yn={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'number':{...ba},'options':{...K},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x108f24(0x473),'enum':[a0_0x108f24(0x66a),a0_0x108f24(0x764),a0_0x108f24(0x4c4),a0_0x108f24(0x2a9)]},'media':{'type':a0_0x108f24(0x473)},'fileName':{'type':a0_0x108f24(0x473)},'caption':{'type':a0_0x108f24(0x473)}},'required':[a0_0x108f24(0x5c4),'media'],...E('fileName',a0_0x108f24(0x50b),a0_0x108f24(0x531))}},'required':[a0_0x108f24(0x28a),a0_0x108f24(0x53e)]},Sa={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'number':{...W},'options':{...K},'stickerMessage':{'type':a0_0x108f24(0x252),'properties':{'image':{'type':a0_0x108f24(0x473)}},'required':[a0_0x108f24(0x66a)],...E(a0_0x108f24(0x66a))}},'required':['stickerMessage',a0_0x108f24(0x53e)]},Ea={'$id':(0x0,C['v4'])(),'type':'object','properties':{'statusMessage':{'type':a0_0x108f24(0x252),'properties':{'type':{'type':a0_0x108f24(0x473),'enum':[a0_0x108f24(0x341),a0_0x108f24(0x66a),a0_0x108f24(0x2a9),a0_0x108f24(0x4c4)]},'content':{'type':a0_0x108f24(0x473)},'caption':{'type':a0_0x108f24(0x473)},'backgroundColor':{'type':a0_0x108f24(0x473)},'font':{'type':'integer','minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x108f24(0x377),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x108f24(0x473),'pattern':a0_0x108f24(0x537),'description':a0_0x108f24(0x4a6)}},'allContacts':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x108f24(0x4bb),a0_0x108f24(0x436)],...E(a0_0x108f24(0x4bb),a0_0x108f24(0x436))}},'required':['statusMessage']},Ca={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'number':{...W},'options':{...K},'mediaMessage':{'type':a0_0x108f24(0x252),'properties':{'mediatype':{'type':a0_0x108f24(0x473),'enum':[a0_0x108f24(0x66a),a0_0x108f24(0x764),'video',a0_0x108f24(0x2a9)]},'media':{'type':'string'},'fileName':{'type':a0_0x108f24(0x473)},'caption':{'type':a0_0x108f24(0x473)}},'required':[a0_0x108f24(0x5c4),'media'],...E(a0_0x108f24(0x6ee),a0_0x108f24(0x50b),a0_0x108f24(0x531))}},'required':[a0_0x108f24(0x28a),a0_0x108f24(0x53e)]},Ma={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'number':{...W},'options':{...K},'audioMessage':{'type':a0_0x108f24(0x252),'properties':{'audio':{'type':a0_0x108f24(0x473)}},'required':[a0_0x108f24(0x2a9)],...E(a0_0x108f24(0x2a9))}},'required':[a0_0x108f24(0x5a3),a0_0x108f24(0x53e)]},va={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...W},'pollMessage':{'type':a0_0x108f24(0x252),'properties':{'name':{'type':a0_0x108f24(0x473)},'selectableCount':{'type':a0_0x108f24(0x53e)},'values':{'type':a0_0x108f24(0x377),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x108f24(0x2ec),a0_0x108f24(0x238),'values'],...E(a0_0x108f24(0x2ec),a0_0x108f24(0x238),a0_0x108f24(0x1be))}},'required':['number',a0_0x108f24(0x49b)]},Na={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...W},'menuMessage':{'type':a0_0x108f24(0x252),'properties':{'text':{'type':'string'},'choices':{'type':a0_0x108f24(0x377),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x108f24(0x341),'choices'],...E(a0_0x108f24(0x341),a0_0x108f24(0x5f7))}},'required':[a0_0x108f24(0x53e),a0_0x108f24(0x763)]},Ra={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'number':{...W},'options':{...K},'buttonMessage':{'type':a0_0x108f24(0x252),'properties':{'title':{'type':a0_0x108f24(0x473)},'description':{'type':a0_0x108f24(0x473)},'footerText':{'type':a0_0x108f24(0x473)},'buttons':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x108f24(0x252),'properties':{'buttonText':{'type':a0_0x108f24(0x473)},'buttonId':{'type':'string'}},'required':['buttonText',a0_0x108f24(0x233)],...E('buttonText',a0_0x108f24(0x233))}},'mediaMessage':{'type':a0_0x108f24(0x252),'properties':{'media':{'type':'string'},'fileName':{'type':a0_0x108f24(0x473)},'mediatype':{'type':a0_0x108f24(0x473),'enum':[a0_0x108f24(0x66a),'document','video']}},'required':['media',a0_0x108f24(0x5c4)],...E('media',a0_0x108f24(0x6ee))}},'required':[a0_0x108f24(0x408),a0_0x108f24(0x6bc)],...E(a0_0x108f24(0x408),'description')}},'required':[a0_0x108f24(0x53e),a0_0x108f24(0x74f)]},Ta={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'number':{...W},'options':{...K},'locationMessage':{'type':a0_0x108f24(0x252),'properties':{'latitude':{'type':a0_0x108f24(0x53e)},'longitude':{'type':a0_0x108f24(0x53e)},'name':{'type':a0_0x108f24(0x473)},'address':{'type':a0_0x108f24(0x473)}},'required':['latitude','longitude'],...E('name','addresss')}},'required':[a0_0x108f24(0x53e),'locationMessage']},Aa={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'number':{...W},'options':{...K},'listMessage':{'type':a0_0x108f24(0x252),'properties':{'title':{'type':'string'},'description':{'type':a0_0x108f24(0x473)},'footerText':{'type':a0_0x108f24(0x473)},'buttonText':{'type':a0_0x108f24(0x473)},'sections':{'type':a0_0x108f24(0x377),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':a0_0x108f24(0x473)},'rows':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':a0_0x108f24(0x473)},'description':{'type':a0_0x108f24(0x473)},'rowId':{'type':a0_0x108f24(0x473)}},'required':[a0_0x108f24(0x408),a0_0x108f24(0x4bc)],...E(a0_0x108f24(0x408),'rowId')}}},'required':[a0_0x108f24(0x408),a0_0x108f24(0x5f6)],...E('title')}}},'required':[a0_0x108f24(0x408),a0_0x108f24(0x5a8),a0_0x108f24(0x247),a0_0x108f24(0x716)],...E(a0_0x108f24(0x408),a0_0x108f24(0x5a8),a0_0x108f24(0x247),'footerText')}},'required':[a0_0x108f24(0x53e),a0_0x108f24(0x7cf)]},Oa={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'number':{...W},'options':{...K},'contactMessage':{'type':a0_0x108f24(0x377),'items':{'type':a0_0x108f24(0x252),'properties':{'fullName':{'type':a0_0x108f24(0x473)},'phoneNumber':{'type':'string','minLength':0xa}},'required':[a0_0x108f24(0x729),'phoneNumber'],...E('fullName')},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x108f24(0x53e),a0_0x108f24(0x699)]},Ia={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'reactionMessage':{'type':a0_0x108f24(0x252),'properties':{'key':{'type':a0_0x108f24(0x252),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x108f24(0x473)},'fromMe':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]}},'required':['id',a0_0x108f24(0x47b),a0_0x108f24(0x310)],...E('id',a0_0x108f24(0x47b))},'reaction':{'type':a0_0x108f24(0x473)}},'required':[a0_0x108f24(0x662),'reaction'],...E(a0_0x108f24(0x1f5))}},'required':['reactionMessage']},Da={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'numbers':{'type':a0_0x108f24(0x377),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':a0_0x108f24(0x537),'description':'\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}}},xa={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'readMessages':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x108f24(0x473)},'fromMe':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x108f24(0x473)}},'required':['id','fromMe','remoteJid'],...E('id',a0_0x108f24(0x47b))}}},'required':[a0_0x108f24(0x688)]},_a={'$id':(0x0,C['v4'])(),'type':'object','properties':{'privacySettings':{'type':'object','properties':{'readreceipts':{'type':'string','enum':[a0_0x108f24(0x406),'none']},'profile':{'type':a0_0x108f24(0x473),'enum':['all',a0_0x108f24(0x74c),a0_0x108f24(0x697),a0_0x108f24(0x3e1)]},'status':{'type':a0_0x108f24(0x473),'enum':[a0_0x108f24(0x406),a0_0x108f24(0x74c),a0_0x108f24(0x697),a0_0x108f24(0x3e1)]},'online':{'type':a0_0x108f24(0x473),'enum':[a0_0x108f24(0x406),a0_0x108f24(0x7e7)]},'last':{'type':'string','enum':[a0_0x108f24(0x406),a0_0x108f24(0x74c),'contact_blacklist',a0_0x108f24(0x3e1)]},'groupadd':{'type':a0_0x108f24(0x473),'enum':[a0_0x108f24(0x406),a0_0x108f24(0x74c),a0_0x108f24(0x697),a0_0x108f24(0x3e1)]}},'required':[a0_0x108f24(0x6f1),a0_0x108f24(0x5d9),'status',a0_0x108f24(0x224),'last',a0_0x108f24(0x1cf)],...E(a0_0x108f24(0x6f1),a0_0x108f24(0x5d9),'status','online',a0_0x108f24(0x522),a0_0x108f24(0x1cf))}},'required':[a0_0x108f24(0x255)]},Pa={'$id':(0x0,C['v4'])(),'type':'object','properties':{'lastMessage':{'type':a0_0x108f24(0x252),'properties':{'key':{'type':a0_0x108f24(0x252),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x108f24(0x473)},'fromMe':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]}},'required':['id','fromMe',a0_0x108f24(0x47b)],...E('id',a0_0x108f24(0x47b))},'messageTimestamp':{'type':a0_0x108f24(0x387),'minLength':0x1}},'required':['key'],...E('messageTimestamp')},'archive':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['lastMessage',a0_0x108f24(0x664)]},$a={'$id':(0x0,C['v4'])(),'type':'object','properties':{'id':{'type':a0_0x108f24(0x473)},'fromMe':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'remoteJid':{'type':'string'},'participant':{'type':a0_0x108f24(0x473)}},'required':['id','fromMe','remoteJid'],...E('id','remoteJid',a0_0x108f24(0x783))},ka={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x108f24(0x473),'minLength':0x1},'pushName':{'type':a0_0x108f24(0x473),'minLength':0x1},'id':{'type':'string','minLength':0x1}},...E(a0_0x108f24(0x5ee),'id','pushName')}}},La={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'name':{'type':a0_0x108f24(0x473)}},...E(a0_0x108f24(0x2ec))},Fa={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'status':{'type':a0_0x108f24(0x473)}},...E(a0_0x108f24(0x60e))},we={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{'type':a0_0x108f24(0x473)},'picture':{'type':'string'}}},Ua={'type':'object','properties':{'wuid':{'type':'string'},'name':{'type':a0_0x108f24(0x473)},'picture':{'type':a0_0x108f24(0x473)},'status':{'type':a0_0x108f24(0x473)},'isBusiness':{'type':'boolean'}}},Ja={'$id':(0x0,C['v4'])(),'type':'object','properties':{'where':{'type':a0_0x108f24(0x252),'properties':{'_id':{'type':a0_0x108f24(0x473),'minLength':0x1},'key':{'type':'object','if':{'propertyNames':{'enum':['fromMe',a0_0x108f24(0x47b),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x108f24(0x473),'minLength':0x1,'description':a0_0x108f24(0x55b)},'id':{'type':a0_0x108f24(0x473),'minLength':0x1,'description':a0_0x108f24(0x55b)},'fromMe':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x108f24(0x252)}},...E(a0_0x108f24(0x5ee))},'limit':{'type':a0_0x108f24(0x387)}}},Xn={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x108f24(0x473)},'remoteJid':{'type':a0_0x108f24(0x473)},'id':{'type':'string'},'fromMe':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x108f24(0x473)},'status':{'type':a0_0x108f24(0x473),'enum':['ERROR',a0_0x108f24(0x677),a0_0x108f24(0x7e5),a0_0x108f24(0x2d1),a0_0x108f24(0x494),a0_0x108f24(0x690)]}},...E('_id',a0_0x108f24(0x47b),'id','status')},'limit':{'type':'integer'}}},ja={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'number':{...W},'presence':{'type':a0_0x108f24(0x473),'enum':[a0_0x108f24(0x6e1),a0_0x108f24(0x5f2),a0_0x108f24(0x7aa),a0_0x108f24(0x613),a0_0x108f24(0x345)]}},'required':[a0_0x108f24(0x3fe),a0_0x108f24(0x53e)]},qa={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'subject':{'type':a0_0x108f24(0x473)},'description':{'type':a0_0x108f24(0x473)},'profilePicture':{'type':a0_0x108f24(0x473)},'participants':{'type':a0_0x108f24(0x377),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':a0_0x108f24(0x440),'description':a0_0x108f24(0x57a)}}},'required':[a0_0x108f24(0x47a),a0_0x108f24(0x4f7)],...E('subject',a0_0x108f24(0x5a8),a0_0x108f24(0x336))},be={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'groupJid':{'type':a0_0x108f24(0x473),'pattern':a0_0x108f24(0x376)}},'required':['groupJid'],...E(a0_0x108f24(0x491))},Va={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x108f24(0x473)},'action':{'type':'string','enum':[a0_0x108f24(0x7f9),'remove','promote',a0_0x108f24(0x434)]},'participants':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x108f24(0x473),'minLength':0xa,'pattern':a0_0x108f24(0x440),'description':'\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}},'required':['groupJid','action',a0_0x108f24(0x4f7)],...E(a0_0x108f24(0x491),a0_0x108f24(0x789))},Ba={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'groupJid':{'type':'string'},'expiration':{'type':a0_0x108f24(0x53e),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x108f24(0x491),'expiration'],...E(a0_0x108f24(0x491),'expiration')},Ga={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'groupJid':{'type':a0_0x108f24(0x473)},'image':{'type':a0_0x108f24(0x473)}},'required':[a0_0x108f24(0x491),a0_0x108f24(0x66a)],...E(a0_0x108f24(0x491),a0_0x108f24(0x66a))},Wa={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'groupJid':{'type':a0_0x108f24(0x473)},'description':{'type':a0_0x108f24(0x473)}},'required':[a0_0x108f24(0x491),a0_0x108f24(0x5a8)],...E(a0_0x108f24(0x491),'description')},za={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x108f24(0x473)},'name':{'type':a0_0x108f24(0x473)}},'required':['groupJid',a0_0x108f24(0x2ec)],...E('groupJid',a0_0x108f24(0x2ec))},Ha={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'setting':{'type':a0_0x108f24(0x473),'enum':[a0_0x108f24(0x273),'not_announcement',a0_0x108f24(0x61f),a0_0x108f24(0x61b)]}},'required':[a0_0x108f24(0x491),a0_0x108f24(0x52b)],...E(a0_0x108f24(0x491),a0_0x108f24(0x52b))},Ka={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'inviteCode':{'type':a0_0x108f24(0x473)}},'required':[a0_0x108f24(0x7c4)],...E('inviteCode')},Qa={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'url':{'type':a0_0x108f24(0x473)},'enabled':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]}},'required':[a0_0x108f24(0x62a),'enabled']},Zn={'$id':(0x0,C['v4'])(),'type':a0_0x108f24(0x252),'properties':{'local_map':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':'boolean','enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x108f24(0x46b),'enum':[!0x0,!0x1]}},'required':['local_map',a0_0x108f24(0x4aa),a0_0x108f24(0x50c),a0_0x108f24(0x2db),'MESSAGES_UPDATE',a0_0x108f24(0x634),'SEND_MESSAGE',a0_0x108f24(0x3aa),a0_0x108f24(0x299),a0_0x108f24(0x56b),a0_0x108f24(0x21b),'CHATS_SET',a0_0x108f24(0x621),a0_0x108f24(0x5a0),a0_0x108f24(0x2fc),a0_0x108f24(0x4a3),'GROUPS_UPSERT',a0_0x108f24(0x42a),a0_0x108f24(0x45a)],...E(a0_0x108f24(0x1fa),a0_0x108f24(0x4aa),a0_0x108f24(0x50c),a0_0x108f24(0x2db),'MESSAGES_UPDATE','MESSAGES_UPSERT',a0_0x108f24(0x311),a0_0x108f24(0x3aa),a0_0x108f24(0x299),a0_0x108f24(0x56b),a0_0x108f24(0x21b),a0_0x108f24(0x39e),a0_0x108f24(0x621),'CHATS_UPDATE',a0_0x108f24(0x2fc),a0_0x108f24(0x4a3),'GROUPS_UPSERT',a0_0x108f24(0x42a),a0_0x108f24(0x45a))},ze=class{},He=class extends I{[a0_0x108f24(0x7a8)](_0x6ada40){return js(_0x6ada40);}async[a0_0x108f24(0x1d5)](_0xa85f78){const _0x4cbdc3=a0_0x108f24;if(_0xa85f78[_0x4cbdc3(0x231)]!==0x0)try{return{'insertCount':(await this[_0x4cbdc3(0x7a8)](_0xa85f78[0x0][_0x4cbdc3(0x6e8)])['insertMany']([..._0xa85f78]))[_0x4cbdc3(0x231)]};}catch(_0x530310){return _0x530310;}}async[a0_0x108f24(0x714)](_0x52bc4f,_0x5dba75){const _0x4e689c=a0_0x108f24;try{return{'deletedCount':(await this[_0x4e689c(0x7a8)](_0x5dba75)[_0x4e689c(0x34a)]({..._0x52bc4f[_0x4e689c(0x32e)]}))[_0x4e689c(0x799)]};}catch(_0x4ae850){return{'error':_0x4ae850?.[_0x4e689c(0x28f)]()};}}async['update'](_0x52f319,_0x26b849){const _0x4b7363=a0_0x108f24;try{if(_0x52f319[_0x4b7363(0x231)]===0x0)return;let _0xad653f=this['getContactModelForOwner'](_0x26b849),_0x178796=_0x52f319[_0x4b7363(0x49e)](_0x1e9f9d=>({'updateOne':{'filter':{'_id':_0x1e9f9d['_id'],'owner':_0x26b849},'update':{..._0x1e9f9d}}})),{modifiedCount:_0xd914cd}=await _0xad653f[_0x4b7363(0x742)](_0x178796);return{'insertCount':_0xd914cd};}catch{return;}}async['find'](_0x4a7a30,_0x1e1dc7){const _0x4adc1f=a0_0x108f24;try{let _0x3c4a8a=this[_0x4adc1f(0x7a8)](_0x1e1dc7),_0x458449=T(_0x4a7a30[_0x4adc1f(0x32e)]);return await _0x3c4a8a[_0x4adc1f(0x731)](_0x458449)[_0x4adc1f(0x239)](_0x4a7a30?.[_0x4adc1f(0x239)]??0x0)[_0x4adc1f(0x4dd)]();}catch{return[];}}async['findOne'](_0x43f074,_0x134f1a){const _0x4f1a6c=a0_0x108f24;try{let _0x3406f3=this[_0x4f1a6c(0x7a8)](_0x134f1a),_0x57cebc=T(_0x43f074[_0x4f1a6c(0x32e)]);return await _0x3406f3[_0x4f1a6c(0x624)](_0x57cebc)[_0x4f1a6c(0x4dd)]();}catch{return null;}}async[a0_0x108f24(0x358)](_0x48cb40){const _0x25be9f=a0_0x108f24;try{return await this['getContactModelForOwner'](_0x48cb40)[_0x25be9f(0x3d2)][_0x25be9f(0x5e9)](),{'success':!0x0};}catch(_0x396dc){return console['error'](_0x396dc),{'success':!0x1,'error':_0x396dc};}}},Ke=require(a0_0x108f24(0x7c3)),cc=require(a0_0x108f24(0x32a)),cs=new v('Validate'),J=class{[a0_0x108f24(0x40f)](_0x2a1685,_0x40c35a=!0x0){const _0x301bc6=a0_0x108f24;let _0x2ca6b2='/'+_0x2a1685;return _0x40c35a&&(_0x2ca6b2+=_0x301bc6(0x5d7)),_0x2ca6b2;}async['dataValidate'](_0x423407){const _0x537079=a0_0x108f24;let {request:_0x487aea,schema:_0x536f35,ClassRef:_0x9bf303,execute:_0x79561c}=_0x423407,_0x3471ef=new _0x9bf303(),_0x3efdbc=_0x487aea[_0x537079(0x2c1)],_0x2b1664=_0x487aea['params'];_0x487aea?.[_0x537079(0x63f)]&&Object[_0x537079(0x686)](_0x487aea[_0x537079(0x63f)])[_0x537079(0x231)]>0x0&&Object[_0x537079(0x592)](_0x2b1664,_0x487aea[_0x537079(0x63f)]),_0x487aea['originalUrl'][_0x537079(0x3cd)](_0x537079(0x771))&&Object['assign'](_0x2b1664,_0x3efdbc),Object[_0x537079(0x592)](_0x3471ef,_0x3efdbc);let _0x10388b=_0x536f35?(0x0,Ke['validate'])(_0x3471ef,_0x536f35):{'valid':!0x0,'errors':[]};if(!_0x10388b[_0x537079(0x3ec)]){let _0x26a1e4=_0x10388b[_0x537079(0x421)][_0x537079(0x49e)](({property:_0x3f8a5a,stack:_0xbd6198,schema:_0x1f3a99})=>{const _0x43e61e=_0x537079;let _0x1e3b9b;return _0x1f3a99[_0x43e61e(0x5a8)]?_0x1e3b9b=_0x1f3a99['description']:_0x1e3b9b=_0xbd6198[_0x43e61e(0x6e4)](_0x43e61e(0x256),''),{'property':_0x3f8a5a[_0x43e61e(0x6e4)]('instance.',''),'message':_0x1e3b9b};});throw cs[_0x537079(0x2d9)]([..._0x26a1e4]),new h(..._0x26a1e4);}return await _0x79561c(_0x2b1664,_0x3471ef);}async[a0_0x108f24(0x6d2)](_0x55da02){const _0x1a2ca7=a0_0x108f24;let {request:_0x625648,ClassRef:_0x52dd4c,schema:_0x21c993,execute:_0x3be34a}=_0x55da02,_0x1fc8a8=_0x625648[_0x1a2ca7(0x63f)];if(!_0x1fc8a8?.[_0x1a2ca7(0x491)])throw new h('The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query',_0x1a2ca7(0x75c));let _0x43b280=_0x625648[_0x1a2ca7(0x452)],_0x3f2e5f=_0x625648['body'],_0x590d2e=new _0x52dd4c();Object[_0x1a2ca7(0x592)](_0x3f2e5f,_0x1fc8a8),Object[_0x1a2ca7(0x592)](_0x590d2e,_0x3f2e5f);let _0x1c14e8=(0x0,Ke[_0x1a2ca7(0x733)])(_0x590d2e,_0x21c993);if(!_0x1c14e8[_0x1a2ca7(0x3ec)]){let _0x1d298f=_0x1c14e8['errors'][_0x1a2ca7(0x49e)](({property:_0x1e8ee1,stack:_0x56543e,schema:_0x37c57a})=>{const _0xc0727c=_0x1a2ca7;let _0x38fe09;return _0x37c57a[_0xc0727c(0x5a8)]?_0x38fe09=_0x37c57a[_0xc0727c(0x5a8)]:_0x38fe09=_0x56543e[_0xc0727c(0x6e4)]('instance.',''),{'property':_0x1e8ee1['replace'](_0xc0727c(0x256),''),'message':_0x38fe09};});throw cs[_0x1a2ca7(0x2d9)]([..._0x1d298f]),new h(..._0x1d298f);}return await _0x3be34a(_0x43b280,_0x590d2e);}async['joinGroupValidate'](_0x195057){const _0x328f85=a0_0x108f24;let {request:_0x2b52be,ClassRef:_0x4a5e6b,schema:_0x20e2b6,execute:_0xc2249e}=_0x195057,_0x3c70cc=_0x2b52be['body'];if(!_0x3c70cc?.[_0x328f85(0x7c4)])throw new h(_0x328f85(0x381),_0x328f85(0x45b));let _0x1c9bdc=_0x2b52be['params'],_0x4fe5e0=_0x2b52be[_0x328f85(0x2c1)],_0x272850=new _0x4a5e6b();Object[_0x328f85(0x592)](_0x4fe5e0,_0x3c70cc),Object[_0x328f85(0x592)](_0x272850,_0x4fe5e0);let _0x2a0a83=(0x0,Ke['validate'])(_0x272850,_0x20e2b6);if(!_0x2a0a83[_0x328f85(0x3ec)]){let _0x103966=_0x2a0a83[_0x328f85(0x421)][_0x328f85(0x49e)](({property:_0x3ac3df,stack:_0x1623e0,schema:_0xd4cff6})=>{const _0xbd1e93=_0x328f85;let _0x16160a;return _0xd4cff6[_0xbd1e93(0x5a8)]?_0x16160a=_0xd4cff6['description']:_0x16160a=_0x1623e0[_0xbd1e93(0x6e4)](_0xbd1e93(0x256),''),{'property':_0x3ac3df[_0xbd1e93(0x6e4)](_0xbd1e93(0x256),''),'message':_0x16160a};});throw cs[_0x328f85(0x2d9)]([..._0x103966]),new h(..._0x103966);}return await _0xc2249e(_0x1c9bdc,_0x272850);}},S=class{},Mc=new v(a0_0x108f24(0x426)),Qe=class extends J{constructor(..._0x2654d9){const _0x1c981f=a0_0x108f24;super(),this[_0x1c981f(0x23f)]=(0x0,Ya[_0x1c981f(0x69f)])(),this[_0x1c981f(0x23f)]['post'](this[_0x1c981f(0x40f)](_0x1c981f(0x5cc)),..._0x2654d9,async(_0x42892f,_0x4b39f4)=>{const _0x4adc04=_0x1c981f;let _0x844396=await this['dataValidate']({'request':_0x42892f,'schema':ja,'ClassRef':ke,'execute':(_0x3cf541,_0x29cbb8)=>D[_0x4adc04(0x5cc)](_0x3cf541,_0x29cbb8)});return _0x4b39f4[_0x4adc04(0x60e)](0xc9)[_0x4adc04(0x318)](_0x844396);})['post'](this['routerPath'](_0x1c981f(0x429)),..._0x2654d9,async(_0x71a3a9,_0x15d9ae)=>{const _0x37a077=_0x1c981f;let _0x48acc4=await this['dataValidate']({'request':_0x71a3a9,'schema':Da,'ClassRef':Le,'execute':(_0x13eb93,_0x1cb16e)=>D[_0x37a077(0x3ed)](_0x13eb93,_0x1cb16e)});return _0x15d9ae[_0x37a077(0x60e)](0xc9)[_0x37a077(0x318)](_0x48acc4);})[_0x1c981f(0x38e)](this[_0x1c981f(0x40f)]('editChat'),..._0x2654d9,async(_0x1a9987,_0x5e8df0)=>{const _0x5b91b7=_0x1c981f;let _0x2c1f7c=await this[_0x5b91b7(0x5d5)]({'request':_0x1a9987,'schema':M,'ClassRef':S,'execute':(_0x1a8c00,_0x421d16)=>D[_0x5b91b7(0x7d3)](_0x1a8c00,_0x421d16)});return _0x5e8df0['status'](0xc9)[_0x5b91b7(0x318)](_0x2c1f7c);})[_0x1c981f(0x22a)](this[_0x1c981f(0x40f)](_0x1c981f(0x66d)),..._0x2654d9,async(_0x4b523f,_0x1b0fe8)=>{const _0x14b68d=_0x1c981f;let _0x1514a2=await this[_0x14b68d(0x5d5)]({'request':_0x4b523f,'schema':xa,'ClassRef':Je,'execute':(_0x187859,_0x1df68a)=>D[_0x14b68d(0x7fc)](_0x187859,_0x1df68a)});return _0x1b0fe8[_0x14b68d(0x60e)](0xc9)[_0x14b68d(0x318)](_0x1514a2);})[_0x1c981f(0x22a)](this['routerPath']('archiveChat'),..._0x2654d9,async(_0xf30b8d,_0x56f969)=>{const _0x257e32=_0x1c981f;let _0x407d8c=await this['dataValidate']({'request':_0xf30b8d,'schema':Pa,'ClassRef':je,'execute':(_0xd343c,_0x1de07c)=>D[_0x257e32(0x734)](_0xd343c,_0x1de07c)});return _0x56f969[_0x257e32(0x60e)](0xc9)[_0x257e32(0x318)](_0x407d8c);})[_0x1c981f(0x714)](this[_0x1c981f(0x40f)](_0x1c981f(0x33b)),..._0x2654d9,async(_0x974845,_0x7262cd)=>{const _0x52e7e2=_0x1c981f;let _0x1fa8fc=await this['dataValidate']({'request':_0x974845,'schema':$a,'ClassRef':Ve,'execute':(_0x3a951c,_0x1133e1)=>D['deleteMessage'](_0x3a951c,_0x1133e1)});return _0x7262cd[_0x52e7e2(0x60e)](0xc9)[_0x52e7e2(0x318)](_0x1fa8fc);})[_0x1c981f(0x38e)](this['routerPath'](_0x1c981f(0x335)),..._0x2654d9,async(_0x463855,_0x22c873)=>{const _0x49840a=_0x1c981f;let _0x3b83ae=await this[_0x49840a(0x5d5)]({'request':_0x463855,'schema':we,'ClassRef':ye,'execute':(_0x334fe8,_0x30f3d5)=>D[_0x49840a(0x372)](_0x334fe8,_0x30f3d5)});return _0x22c873['status'](0xc8)[_0x49840a(0x318)](_0x3b83ae);})['post'](this[_0x1c981f(0x40f)](_0x1c981f(0x670)),..._0x2654d9,async(_0x3a6da2,_0xbe5356)=>{const _0x2181fe=_0x1c981f;let _0x3fbf90=await this['dataValidate']({'request':_0x3a6da2,'schema':Ua,'ClassRef':ye,'execute':(_0x30a783,_0x4e3be7)=>D[_0x2181fe(0x670)](_0x30a783,_0x4e3be7)});return _0xbe5356[_0x2181fe(0x60e)](0xc8)[_0x2181fe(0x318)](_0x3fbf90);})[_0x1c981f(0x38e)](this[_0x1c981f(0x40f)]('findContacts'),..._0x2654d9,async(_0x4ef716,_0x41ce71)=>{const _0x1cc854=_0x1c981f;let _0x2205f4=await this[_0x1cc854(0x5d5)]({'request':_0x4ef716,'schema':ka,'ClassRef':ze,'execute':(_0x2dde16,_0x15d844)=>D['fetchContacts'](_0x2dde16,_0x15d844)});return _0x41ce71[_0x1cc854(0x60e)](0xc8)[_0x1cc854(0x318)](_0x2205f4);})[_0x1c981f(0x38e)](this['routerPath'](_0x1c981f(0x6da)),..._0x2654d9,async(_0x1b0265,_0xc18b99)=>{const _0x19102a=_0x1c981f;let _0x41cf80=await this[_0x19102a(0x5d5)]({'request':_0x1b0265,'schema':null,'ClassRef':Object,'execute':(_0x533953,_0x7d409a)=>D[_0x19102a(0x6da)](_0x533953,_0x7d409a)});return _0xc18b99[_0x19102a(0x60e)](0xc9)[_0x19102a(0x318)](_0x41cf80);})[_0x1c981f(0x38e)](this[_0x1c981f(0x40f)]('findMessages'),..._0x2654d9,async(_0x2f4909,_0x259a97)=>{const _0x39f296=_0x1c981f;let _0x784609=await this[_0x39f296(0x5d5)]({'request':_0x2f4909,'schema':Ja,'ClassRef':Pe,'execute':(_0x5c5737,_0x58e993)=>D[_0x39f296(0x732)](_0x5c5737,_0x58e993)});return _0x259a97[_0x39f296(0x60e)](0xc8)[_0x39f296(0x318)](_0x784609);})[_0x1c981f(0x602)](this[_0x1c981f(0x40f)](_0x1c981f(0x676)),..._0x2654d9,async(_0x498716,_0x2f8357)=>{const _0x130d8b=_0x1c981f;let _0x3bd17a=await this['dataValidate']({'request':_0x498716,'schema':null,'ClassRef':S,'execute':_0x181ef0=>D[_0x130d8b(0x57e)](_0x181ef0)});return _0x2f8357[_0x130d8b(0x60e)](0xc8)[_0x130d8b(0x318)](_0x3bd17a);})[_0x1c981f(0x602)](this[_0x1c981f(0x40f)](_0x1c981f(0x42b)),..._0x2654d9,async(_0x2e379c,_0x26a0a0)=>{const _0x2a8506=_0x1c981f;let _0x16716a=await this['dataValidate']({'request':_0x2e379c,'schema':null,'ClassRef':S,'execute':_0x521b16=>D['fetchLabels'](_0x521b16)});return _0x26a0a0[_0x2a8506(0x60e)](0xc8)[_0x2a8506(0x318)](_0x16716a);})['put'](this[_0x1c981f(0x40f)](_0x1c981f(0x245)),..._0x2654d9,async(_0x4e2f00,_0x3d9aea)=>{const _0x376f0a=_0x1c981f;let _0x567a1d=await this[_0x376f0a(0x5d5)]({'request':_0x4e2f00,'schema':null,'ClassRef':Array,'execute':(_0x471390,_0x272da2)=>D[_0x376f0a(0x245)](_0x471390,_0x272da2)});return _0x3d9aea[_0x376f0a(0x60e)](0xc8)[_0x376f0a(0x318)](_0x567a1d);})[_0x1c981f(0x602)](this[_0x1c981f(0x40f)]('fetchPrivacySettings'),..._0x2654d9,async(_0x10732d,_0xd121ac)=>{const _0x2a944f=_0x1c981f;let _0x57f420=await this[_0x2a944f(0x5d5)]({'request':_0x10732d,'schema':null,'ClassRef':S,'execute':_0xbeba87=>D['fetchPrivacySettings'](_0xbeba87)});return _0xd121ac[_0x2a944f(0x60e)](0xc8)[_0x2a944f(0x318)](_0x57f420);})[_0x1c981f(0x22a)](this['routerPath'](_0x1c981f(0x2f7)),..._0x2654d9,async(_0x471a5d,_0xb568cf)=>{const _0xcc635c=_0x1c981f;let _0x5b5734=await this['dataValidate']({'request':_0x471a5d,'schema':_a,'ClassRef':qe,'execute':(_0x404332,_0x3a08c6)=>D[_0xcc635c(0x2f7)](_0x404332,_0x3a08c6)});return _0xb568cf[_0xcc635c(0x60e)](0xc9)[_0xcc635c(0x318)](_0x5b5734);})['post'](this[_0x1c981f(0x40f)](_0x1c981f(0x34e)),..._0x2654d9,async(_0x170140,_0x486f85)=>{const _0x2ecf49=_0x1c981f;let _0x2e22df=await this['dataValidate']({'request':_0x170140,'schema':we,'ClassRef':ge,'execute':(_0x12956a,_0x4c8df5)=>D[_0x2ecf49(0x34e)](_0x12956a,_0x4c8df5)});return _0x486f85[_0x2ecf49(0x60e)](0xc8)['json'](_0x2e22df);})[_0x1c981f(0x38e)](this[_0x1c981f(0x40f)](_0x1c981f(0x4ea)),..._0x2654d9,async(_0x33e57a,_0x21bfec)=>{const _0x2a6ac0=_0x1c981f;let _0x1fa034=await this[_0x2a6ac0(0x5d5)]({'request':_0x33e57a,'schema':La,'ClassRef':Fe,'execute':(_0x42b12d,_0xea5c26)=>D[_0x2a6ac0(0x4ea)](_0x42b12d,_0xea5c26)});return _0x21bfec[_0x2a6ac0(0x60e)](0xc8)[_0x2a6ac0(0x318)](_0x1fa034);})[_0x1c981f(0x38e)](this[_0x1c981f(0x40f)](_0x1c981f(0x261)),..._0x2654d9,async(_0x381669,_0x2ca3cd)=>{const _0x37f4ca=_0x1c981f;let _0x56c8d4=await this[_0x37f4ca(0x5d5)]({'request':_0x381669,'schema':Fa,'ClassRef':Ue,'execute':(_0x3a2d53,_0x384c2b)=>D[_0x37f4ca(0x261)](_0x3a2d53,_0x384c2b)});return _0x2ca3cd[_0x37f4ca(0x60e)](0xc8)['json'](_0x56c8d4);})['put'](this[_0x1c981f(0x40f)](_0x1c981f(0x772)),..._0x2654d9,async(_0x5af77a,_0x3c0cbf)=>{const _0x1ef64d=_0x1c981f;let _0xa78506=await this[_0x1ef64d(0x5d5)]({'request':_0x5af77a,'schema':we,'ClassRef':ge,'execute':(_0x18dbf9,_0x5406b4)=>D[_0x1ef64d(0x772)](_0x18dbf9,_0x5406b4)});return _0x3c0cbf[_0x1ef64d(0x60e)](0xc8)[_0x1ef64d(0x318)](_0xa78506);})['delete'](this['routerPath'](_0x1c981f(0x6b6)),..._0x2654d9,async(_0x511806,_0x561bcb)=>{const _0x117474=_0x1c981f;let _0xecbe11=await this[_0x117474(0x5d5)]({'request':_0x511806,'schema':we,'ClassRef':ge,'execute':(_0x5f2d68,_0x3dc808)=>D[_0x117474(0x6b6)](_0x5f2d68,_0x3dc808)});return _0x561bcb['status'](0xc8)[_0x117474(0x318)](_0xecbe11);});}},Xa=require(a0_0x108f24(0x368)),Ye=class{},Xe=class{},Ze=class{},et=class{},tt=class{},Q=class{},st=class{},at=class extends Q{},rt=class extends Q{},ot=class extends J{constructor(..._0x567cd3){const _0x399711=a0_0x108f24;super(),this[_0x399711(0x23f)]=(0x0,Xa[_0x399711(0x69f)])(),this[_0x399711(0x23f)][_0x399711(0x38e)](this[_0x399711(0x40f)](_0x399711(0x265)),..._0x567cd3,async(_0x2eee01,_0x79d9c)=>{const _0x5d0b26=_0x399711;let _0x485f55=await this[_0x5d0b26(0x5d5)]({'request':_0x2eee01,'schema':qa,'ClassRef':Ye,'execute':(_0x2e671e,_0x59812e)=>U[_0x5d0b26(0x69b)](_0x2e671e,_0x59812e)});_0x79d9c[_0x5d0b26(0x60e)](0xc9)[_0x5d0b26(0x318)](_0x485f55);})[_0x399711(0x22a)](this[_0x399711(0x40f)](_0x399711(0x567)),..._0x567cd3,async(_0xcf9ce8,_0x33d7bc)=>{const _0x33fa40=_0x399711;let _0x321848=await this['groupValidate']({'request':_0xcf9ce8,'schema':Ga,'ClassRef':Xe,'execute':(_0x3ec3e8,_0x19439b)=>U['updateGroupPicture'](_0x3ec3e8,_0x19439b)});_0x33d7bc[_0x33fa40(0x60e)](0xc9)[_0x33fa40(0x318)](_0x321848);})['put'](this[_0x399711(0x40f)]('groupDesc'),..._0x567cd3,async(_0x4b906d,_0x25888f)=>{const _0x454cca=_0x399711;let _0x48f71d=await this['groupValidate']({'request':_0x4b906d,'schema':Wa,'ClassRef':Ze,'execute':(_0x1eabbf,_0x3386c7)=>U[_0x454cca(0x6b1)](_0x1eabbf,_0x3386c7)});_0x25888f['status'](0xc9)[_0x454cca(0x318)](_0x48f71d);})['put'](this[_0x399711(0x40f)]('groupName'),..._0x567cd3,async(_0x5eed1d,_0x1b8a3e)=>{const _0x1715a9=_0x399711;let _0x3d1a2c=await this[_0x1715a9(0x6d2)]({'request':_0x5eed1d,'schema':za,'ClassRef':et,'execute':(_0x4103e4,_0x3724df)=>U[_0x1715a9(0x62c)](_0x4103e4,_0x3724df)});_0x1b8a3e[_0x1715a9(0x60e)](0xc9)[_0x1715a9(0x318)](_0x3d1a2c);})['put'](this[_0x399711(0x40f)](_0x399711(0x4f1)),..._0x567cd3,async(_0xe9b865,_0x347257)=>{const _0x261d61=_0x399711;let _0x12ae19=await this[_0x261d61(0x6d2)]({'request':_0xe9b865,'schema':Ha,'ClassRef':tt,'execute':(_0x38e5db,_0x5de7d6)=>U[_0x261d61(0x4f1)](_0x38e5db,_0x5de7d6)});_0x347257[_0x261d61(0x60e)](0xc9)['json'](_0x12ae19);})[_0x399711(0x22a)](this['routerPath'](_0x399711(0x1ea)),..._0x567cd3,async(_0x46b08f,_0x10205d)=>{const _0x223ce7=_0x399711;let _0x499794=await this['groupValidate']({'request':_0x46b08f,'schema':Ba,'ClassRef':rt,'execute':(_0x3ef936,_0x55f829)=>U['toggleEphemeral'](_0x3ef936,_0x55f829)});_0x10205d[_0x223ce7(0x60e)](0xc9)[_0x223ce7(0x318)](_0x499794);})['get'](this[_0x399711(0x40f)]('findGroupInfos'),..._0x567cd3,async(_0xeddb63,_0x24a45b)=>{const _0x4aa46b=_0x399711;let _0x437333=await this[_0x4aa46b(0x6d2)]({'request':_0xeddb63,'schema':be,'ClassRef':Q,'execute':(_0x3d05a5,_0x20bec4)=>U[_0x4aa46b(0x64c)](_0x3d05a5,_0x20bec4)});_0x24a45b['status'](0xc8)[_0x4aa46b(0x318)](_0x437333);})[_0x399711(0x602)](this[_0x399711(0x40f)]('findGroups'),..._0x567cd3,async(_0x5ad12a,_0x598265)=>{const _0x3b37f1=_0x399711;let _0x3ca73b=await this[_0x3b37f1(0x5d5)]({'request':_0x5ad12a,'schema':M,'ClassRef':S,'execute':_0x142620=>U[_0x3b37f1(0x30d)](_0x142620)});_0x598265[_0x3b37f1(0x60e)](0xc8)[_0x3b37f1(0x318)](_0x3ca73b);})[_0x399711(0x602)](this['routerPath']('participants'),..._0x567cd3,async(_0x136da8,_0x46ceab)=>{const _0x5d69f7=_0x399711;let _0x3515bc=await this[_0x5d69f7(0x6d2)]({'request':_0x136da8,'schema':be,'ClassRef':Q,'execute':(_0x165769,_0x5661b7)=>U[_0x5d69f7(0x362)](_0x165769,_0x5661b7)});_0x46ceab[_0x5d69f7(0x60e)](0xc8)['json'](_0x3515bc);})[_0x399711(0x602)](this[_0x399711(0x40f)]('inviteCode'),..._0x567cd3,async(_0x54666f,_0x775b31)=>{const _0x54c6b9=_0x399711;let _0x2574fe=await this['groupValidate']({'request':_0x54666f,'schema':be,'ClassRef':Q,'execute':(_0xe3d1d1,_0x367089)=>U[_0x54c6b9(0x7c4)](_0xe3d1d1,_0x367089)});_0x775b31[_0x54c6b9(0x60e)](0xc8)[_0x54c6b9(0x318)](_0x2574fe);})[_0x399711(0x22a)](this[_0x399711(0x40f)](_0x399711(0x75a)),..._0x567cd3,async(_0x34a3c3,_0x534435)=>{const _0x4e3c1b=_0x399711;let _0x252547=await this['joinGroupValidate']({'request':_0x34a3c3,'schema':Ka,'ClassRef':st,'execute':(_0x2172ff,_0x36d970)=>U[_0x4e3c1b(0x75a)](_0x2172ff,_0x36d970)});_0x534435[_0x4e3c1b(0x60e)](0xc9)[_0x4e3c1b(0x318)](_0x252547);})[_0x399711(0x22a)](this[_0x399711(0x40f)](_0x399711(0x5b5)),..._0x567cd3,async(_0x1b766b,_0x12be9d)=>{const _0x34763c=_0x399711;let _0x73f105=await this[_0x34763c(0x6d2)]({'request':_0x1b766b,'schema':be,'ClassRef':Q,'execute':(_0x18c67a,_0x4e4026)=>U['revokeInviteCode'](_0x18c67a,_0x4e4026)});_0x12be9d[_0x34763c(0x60e)](0xc9)['json'](_0x73f105);})['put'](this[_0x399711(0x40f)](_0x399711(0x70b)),..._0x567cd3,async(_0x5abb95,_0x2a6c5d)=>{const _0x222e6b=_0x399711;let _0x17e42e=await this[_0x222e6b(0x6d2)]({'request':_0x5abb95,'schema':Va,'ClassRef':at,'execute':(_0xa86414,_0x49c756)=>U[_0x222e6b(0x7d6)](_0xa86414,_0x49c756)});_0x2a6c5d['status'](0xc9)[_0x222e6b(0x318)](_0x17e42e);})[_0x399711(0x714)](this[_0x399711(0x40f)]('leaveGroup'),..._0x567cd3,async(_0x2d630d,_0x208217)=>{const _0x42d68d=_0x399711;let _0x1bc2f0=await this[_0x42d68d(0x6d2)]({'request':_0x2d630d,'schema':{},'ClassRef':Q,'execute':(_0x3d70e5,_0x1549af)=>U[_0x42d68d(0x6fd)](_0x3d70e5,_0x1549af)});_0x208217[_0x42d68d(0x60e)](0xc8)[_0x42d68d(0x318)](_0x1bc2f0);});}},Za=require('express'),it=class extends J{constructor(_0x350a24,..._0x18204d){const _0x35e8dc=a0_0x108f24;super(),this['configService']=_0x350a24,this['router']=(0x0,Za[_0x35e8dc(0x69f)])();let _0x40de1e=_0x350a24[_0x35e8dc(0x602)](_0x35e8dc(0x52d));this['router'][_0x35e8dc(0x38e)](_0x35e8dc(0x5ce),..._0x18204d,async(_0x2f1286,_0xb8df30)=>{const _0x17e7b1=_0x35e8dc;let {instanceName:_0xde8de3,apikey:_0x3e883c,number:_0xc9d48d}=_0x2f1286[_0x17e7b1(0x2c1)],_0x32696c=await ae[_0x17e7b1(0x44a)]({'instanceName':_0xde8de3,'apikey':_0x3e883c,'number':_0xc9d48d});return _0xb8df30[_0x17e7b1(0x60e)](0xc9)[_0x17e7b1(0x318)](_0x32696c);})[_0x35e8dc(0x22a)](this[_0x35e8dc(0x40f)](_0x35e8dc(0x7f4)),..._0x18204d,async(_0x52a862,_0x28c4a6)=>{const _0x4f5dac=_0x35e8dc;let _0x43db9a=await this['dataValidate']({'request':_0x52a862,'schema':M,'ClassRef':S,'execute':_0x2eb78e=>ae[_0x4f5dac(0x6c1)](_0x2eb78e)});return _0x28c4a6[_0x4f5dac(0x60e)](0xc8)[_0x4f5dac(0x318)](_0x43db9a);})[_0x35e8dc(0x38e)](this[_0x35e8dc(0x40f)]('connect'),..._0x18204d,async(_0x4a96d4,_0x328d1b)=>{const _0x58e606=_0x35e8dc;let _0x4e8819=await this[_0x58e606(0x5d5)]({'request':_0x4a96d4,'schema':M,'ClassRef':S,'execute':_0x127965=>ae[_0x58e606(0x7f6)](_0x127965)});return _0x328d1b['status'](0xc8)['json'](_0x4e8819);})[_0x35e8dc(0x602)](this[_0x35e8dc(0x40f)](_0x35e8dc(0x464)),..._0x18204d,async(_0x396b82,_0x58e454)=>{const _0x572584=_0x35e8dc;let _0x574428=await this[_0x572584(0x5d5)]({'request':_0x396b82,'schema':M,'ClassRef':S,'execute':_0x41b8bf=>ae[_0x572584(0x464)](_0x41b8bf)});return _0x58e454['status'](0xc8)[_0x572584(0x318)](_0x574428);})[_0x35e8dc(0x602)](this[_0x35e8dc(0x40f)]('fetchInstances',!0x1),..._0x18204d,async(_0x29b1d1,_0x2025e4)=>{const _0x3521f5=_0x35e8dc;let _0x13b866=await this[_0x3521f5(0x5d5)]({'request':_0x29b1d1,'schema':null,'ClassRef':S,'execute':_0x3e4b62=>ae['fetchInstances'](_0x3e4b62)});return _0x2025e4[_0x3521f5(0x60e)](0xc8)[_0x3521f5(0x318)](_0x13b866);})[_0x35e8dc(0x714)](this[_0x35e8dc(0x40f)](_0x35e8dc(0x7a5)),..._0x18204d,async(_0x21b244,_0x1e80dd)=>{const _0x3b0106=_0x35e8dc;let _0x39b18c=await this['dataValidate']({'request':_0x21b244,'schema':M,'ClassRef':S,'execute':_0x23e185=>ae[_0x3b0106(0x7a5)](_0x23e185)});return _0x1e80dd[_0x3b0106(0x60e)](0xc8)[_0x3b0106(0x318)](_0x39b18c);})[_0x35e8dc(0x714)](this['routerPath'](_0x35e8dc(0x714)),..._0x18204d,async(_0x440145,_0x2c7d9f)=>{const _0x2530ac=_0x35e8dc;let _0x28c2fb=await this[_0x2530ac(0x5d5)]({'request':_0x440145,'schema':M,'ClassRef':S,'execute':_0x424943=>ae[_0x2530ac(0x216)](_0x424943)});return _0x2c7d9f['status'](0xc8)[_0x2530ac(0x318)](_0x28c2fb);});}},er=require(a0_0x108f24(0x368)),ls=class{},G=class extends ls{},nt=class extends G{},ct=class extends G{},lt=class extends G{},ut=class extends G{},Se=class extends G{},dt=class extends G{},pt=class extends G{},gt=class extends G{},ht=class extends G{},mt=class extends G{},ft=class{},yt=class extends J{constructor(..._0x315cfd){const _0x4b1b5d=a0_0x108f24;super(),this[_0x4b1b5d(0x23f)]=(0x0,er[_0x4b1b5d(0x69f)])(),this[_0x4b1b5d(0x23f)][_0x4b1b5d(0x38e)](this['routerPath'](_0x4b1b5d(0x270)),..._0x315cfd,async(_0x42242a,_0x3e20f8)=>{const _0x26740a=_0x4b1b5d;let _0x354466=await this[_0x26740a(0x5d5)]({'request':_0x42242a,'schema':wa,'ClassRef':nt,'execute':(_0x43df81,_0xc9163e)=>B[_0x26740a(0x270)](_0x43df81,_0xc9163e)});return _0x3e20f8[_0x26740a(0x60e)](0xc9)[_0x26740a(0x318)](_0x354466);})[_0x4b1b5d(0x38e)](this['routerPath'](_0x4b1b5d(0x536)),..._0x315cfd,async(_0x597338,_0x34d7d0)=>{const _0xd190dc=_0x4b1b5d;let _0x1ba7e3=await this[_0xd190dc(0x5d5)]({'request':_0x597338,'schema':Ca,'ClassRef':Se,'execute':(_0x9be826,_0xeaac56)=>B[_0xd190dc(0x536)](_0x9be826,_0xeaac56)});return _0x34d7d0['status'](0xc9)[_0xd190dc(0x318)](_0x1ba7e3);})[_0x4b1b5d(0x38e)](this['routerPath'](_0x4b1b5d(0x52c)),..._0x315cfd,async(_0x5ca95,_0x26ebc0)=>{const _0x3b3549=_0x4b1b5d;let _0x2e0390=await this[_0x3b3549(0x5d5)]({'request':_0x5ca95,'schema':Na,'ClassRef':ut,'execute':(_0x1c2ec0,_0x27472e)=>B[_0x3b3549(0x52c)](_0x1c2ec0,_0x27472e)});return _0x26ebc0['status'](0xc9)['json'](_0x2e0390);})[_0x4b1b5d(0x38e)](this[_0x4b1b5d(0x40f)](_0x4b1b5d(0x433)),..._0x315cfd,async(_0x232c3b,_0x3b26b1)=>{const _0x48c6e2=_0x4b1b5d;let _0x2ec9cf=await this['dataValidate']({'request':_0x232c3b,'schema':Ma,'ClassRef':Se,'execute':(_0x1c8924,_0x5ba152)=>B[_0x48c6e2(0x433)](_0x1c8924,_0x5ba152)});return _0x3b26b1[_0x48c6e2(0x60e)](0xc9)[_0x48c6e2(0x318)](_0x2ec9cf);})[_0x4b1b5d(0x38e)](this[_0x4b1b5d(0x40f)](_0x4b1b5d(0x57c)),..._0x315cfd,async(_0x9e3bc6,_0x164515)=>{const _0x44fee6=_0x4b1b5d;let _0xc1cf79=await this[_0x44fee6(0x5d5)]({'request':_0x9e3bc6,'schema':Ra,'ClassRef':pt,'execute':(_0x2936e1,_0x5de310)=>B[_0x44fee6(0x57c)](_0x2936e1,_0x5de310)});return _0x164515['status'](0xc9)[_0x44fee6(0x318)](_0xc1cf79);})['post'](this[_0x4b1b5d(0x40f)](_0x4b1b5d(0x5c1)),..._0x315cfd,async(_0x1076cf,_0x59a9a7)=>{const _0x20e94f=_0x4b1b5d;let _0x4765e6=await this['dataValidate']({'request':_0x1076cf,'schema':Ta,'ClassRef':gt,'execute':(_0x33ba5f,_0x527cf0)=>B[_0x20e94f(0x5c1)](_0x33ba5f,_0x527cf0)});return _0x59a9a7[_0x20e94f(0x60e)](0xc9)['json'](_0x4765e6);})[_0x4b1b5d(0x38e)](this[_0x4b1b5d(0x40f)](_0x4b1b5d(0x7b8)),..._0x315cfd,async(_0x2fbc49,_0xdd371a)=>{const _0x57e439=_0x4b1b5d;let _0x2fc497=await this[_0x57e439(0x5d5)]({'request':_0x2fbc49,'schema':Aa,'ClassRef':ht,'execute':(_0x1db011,_0x336f12)=>B['sendList'](_0x1db011,_0x336f12)});return _0xdd371a['status'](0xc9)[_0x57e439(0x318)](_0x2fc497);})[_0x4b1b5d(0x38e)](this[_0x4b1b5d(0x40f)](_0x4b1b5d(0x671)),..._0x315cfd,async(_0x43bd3b,_0x17f62a)=>{const _0x3a62cd=_0x4b1b5d;let _0x47a1bd=await this[_0x3a62cd(0x5d5)]({'request':_0x43bd3b,'schema':Oa,'ClassRef':mt,'execute':(_0xddbb88,_0x9f3818)=>B['sendContact'](_0xddbb88,_0x9f3818)});return _0x17f62a['status'](0xc9)[_0x3a62cd(0x318)](_0x47a1bd);})['post'](this[_0x4b1b5d(0x40f)]('sendReaction'),..._0x315cfd,async(_0x1d7d64,_0x4c3f45)=>{const _0x3bd933=_0x4b1b5d;let _0x49da8=await this[_0x3bd933(0x5d5)]({'request':_0x1d7d64,'schema':Ia,'ClassRef':ft,'execute':(_0x9020dc,_0x1bfe7f)=>B['sendReaction'](_0x9020dc,_0x1bfe7f)});return _0x4c3f45[_0x3bd933(0x60e)](0xc9)[_0x3bd933(0x318)](_0x49da8);})['post'](this[_0x4b1b5d(0x40f)](_0x4b1b5d(0x48b)),..._0x315cfd,async(_0x495d49,_0x49954a)=>{const _0x1fd7d6=_0x4b1b5d;let _0x246f72=await this[_0x1fd7d6(0x5d5)]({'request':_0x495d49,'schema':va,'ClassRef':lt,'execute':(_0x229a27,_0x10e1a3)=>B[_0x1fd7d6(0x48b)](_0x229a27,_0x10e1a3)});return _0x49954a['status'](0xc9)[_0x1fd7d6(0x318)](_0x246f72);})[_0x4b1b5d(0x38e)](this[_0x4b1b5d(0x40f)](_0x4b1b5d(0x41e)),..._0x315cfd,async(_0x56550d,_0x381368)=>{const _0x3a9281=_0x4b1b5d;let _0x48bd9f=await this[_0x3a9281(0x5d5)]({'request':_0x56550d,'schema':Ea,'ClassRef':ct,'execute':(_0x2afae9,_0x221c39)=>B['sendStatus'](_0x2afae9,_0x221c39)});return _0x381368[_0x3a9281(0x60e)](0xc9)[_0x3a9281(0x318)](_0x48bd9f);})[_0x4b1b5d(0x38e)](this[_0x4b1b5d(0x40f)](_0x4b1b5d(0x4d6)),..._0x315cfd,async(_0x3682fa,_0x475aed)=>{const _0x43b4b1=_0x4b1b5d;let _0x624b4=await this[_0x43b4b1(0x5d5)]({'request':_0x3682fa,'schema':Sa,'ClassRef':dt,'execute':(_0x38e373,_0x3c33c1)=>B[_0x43b4b1(0x4d6)](_0x38e373,_0x3c33c1)});return _0x475aed[_0x43b4b1(0x60e)](0xc9)['json'](_0x624b4);});}},tr=require(a0_0x108f24(0x368)),wt=class{},bt=class extends J{constructor(..._0x53a7ea){const _0x576c26=a0_0x108f24;super(),this[_0x576c26(0x23f)]=(0x0,tr[_0x576c26(0x69f)])(),this['router']['post'](this[_0x576c26(0x40f)](_0x576c26(0x3e2)),..._0x53a7ea,async(_0x1aed79,_0x4b68ee)=>{const _0x2e5eb9=_0x576c26;let _0x4e2c49=await this[_0x2e5eb9(0x5d5)]({'request':_0x1aed79,'schema':Qa,'ClassRef':wt,'execute':(_0x34131f,_0x3a268f)=>us[_0x2e5eb9(0x51c)](_0x34131f,_0x3a268f)});_0x4b68ee[_0x2e5eb9(0x60e)](0xc9)['json'](_0x4e2c49);})[_0x576c26(0x602)](this[_0x576c26(0x40f)](_0x576c26(0x731)),..._0x53a7ea,async(_0x38eb25,_0x23c3d6)=>{const _0xa88d73=_0x576c26;let _0x434ec3=await this[_0xa88d73(0x5d5)]({'request':_0x38eb25,'schema':M,'ClassRef':S,'execute':_0x5d846f=>us['findWebhook'](_0x5d846f)});_0x23c3d6['status'](0xc8)[_0xa88d73(0x318)](_0x434ec3);});}},sr=require('express'),f=new v(a0_0x108f24(0x31e)),St=class extends J{constructor(..._0x54714d){const _0x3d1b4b=a0_0x108f24;super(),this['router']=(0x0,sr[_0x3d1b4b(0x69f)])(),this[_0x3d1b4b(0x23f)][_0x3d1b4b(0x38e)](this[_0x3d1b4b(0x40f)]('scheduleMessage'),..._0x54714d,async(_0x2dbdb8,_0x2ac8f0)=>{const _0x1442d6=_0x3d1b4b;let _0x6c30ac=_0x2dbdb8[_0x1442d6(0x2c1)];f[_0x1442d6(0x5f3)](_0x1442d6(0x1fe)),f[_0x1442d6(0x5f3)](_0x1442d6(0x800)),f['verbose'](_0x2dbdb8['body']);let _0x1764ba=await this[_0x1442d6(0x5d5)]({'request':_0x2dbdb8,'schema':M,'ClassRef':S,'execute':_0x52a4ce=>A['editScheduleMessage'](_0x52a4ce,_0x6c30ac)});_0x2ac8f0['status'](0xc8)['json'](_0x1764ba);})[_0x3d1b4b(0x602)](this['routerPath']('scheduleMessage'),..._0x54714d,async(_0x1abf97,_0x418888)=>{const _0x308186=_0x3d1b4b;let _0x2be783=await this['dataValidate']({'request':_0x1abf97,'schema':M,'ClassRef':S,'execute':_0x5b4498=>A[_0x308186(0x74b)](_0x5b4498)});_0x418888[_0x308186(0x60e)](0xc8)['json'](_0x2be783);})[_0x3d1b4b(0x714)](this[_0x3d1b4b(0x40f)]('deleteDoneMessages'),..._0x54714d,async(_0x1b5a4b,_0x4d4da8)=>{const _0x4a083d=_0x3d1b4b;f[_0x4a083d(0x5f3)]('request\x20received\x20in\x20deleteDoneMessages');let _0x437b06=await this[_0x4a083d(0x5d5)]({'request':_0x1b5a4b,'schema':M,'ClassRef':S,'execute':_0x58330c=>A[_0x4a083d(0x242)](_0x58330c)});_0x4d4da8['status'](0xc8)['json'](_0x437b06);})[_0x3d1b4b(0x38e)](this[_0x3d1b4b(0x40f)]('startFlow'),..._0x54714d,async(_0x31e674,_0x3587a0)=>{const _0x5380b5=_0x3d1b4b;let _0x5b683b=_0x31e674[_0x5380b5(0x2c1)];f[_0x5380b5(0x5f3)](_0x5380b5(0x6e9)),f[_0x5380b5(0x5f3)](_0x5380b5(0x800)),f['verbose'](_0x31e674[_0x5380b5(0x2c1)]);let _0x6532cf=await this['dataValidate']({'request':_0x31e674,'schema':M,'ClassRef':S,'execute':_0x55e082=>A[_0x5380b5(0x62d)](_0x55e082,_0x5b683b)});_0x3587a0[_0x5380b5(0x60e)](0xc8)[_0x5380b5(0x318)](_0x6532cf);})[_0x3d1b4b(0x602)](this['routerPath']('getAutomateSystem'),..._0x54714d,async(_0xe13574,_0x4ec8c4)=>{const _0x1aafb9=_0x3d1b4b;f[_0x1aafb9(0x5f3)]('request\x20received\x20in\x20getAutomateSystem');let _0x39f133=await this[_0x1aafb9(0x5d5)]({'request':_0xe13574,'schema':M,'ClassRef':S,'execute':_0x2d91cf=>A[_0x1aafb9(0x553)](_0x2d91cf)});_0x4ec8c4[_0x1aafb9(0x60e)](0xc8)['json'](_0x39f133);})[_0x3d1b4b(0x602)](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x551)),..._0x54714d,async(_0x30930d,_0xb9047a)=>{const _0xfea28b=_0x3d1b4b;f[_0xfea28b(0x5f3)](_0xfea28b(0x6ae));let _0x32dc8a=await this[_0xfea28b(0x5d5)]({'request':_0x30930d,'schema':M,'ClassRef':S,'execute':_0x3bc35e=>A['getAutomateSystem'](_0x3bc35e)});_0xb9047a[_0xfea28b(0x60e)](0xc8)['json'](_0x32dc8a);})['post'](this[_0x3d1b4b(0x40f)]('updateAgent'),..._0x54714d,async(_0x338299,_0x2cb795)=>{const _0x2f4b30=_0x3d1b4b;let _0x20927f=_0x338299[_0x2f4b30(0x2c1)];f['verbose'](_0x2f4b30(0x74e)),f[_0x2f4b30(0x5f3)]('request\x20body:\x20'),f['verbose'](_0x338299['body']);let _0x44b636=await this[_0x2f4b30(0x5d5)]({'request':_0x338299,'schema':M,'ClassRef':S,'execute':_0x2a97bb=>A[_0x2f4b30(0x5f8)](_0x2a97bb,_0x20927f)});_0x2cb795[_0x2f4b30(0x60e)](0xc8)[_0x2f4b30(0x318)](_0x44b636);})[_0x3d1b4b(0x38e)](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x342)),..._0x54714d,async(_0x4967f0,_0x749daf)=>{const _0x53c1cf=_0x3d1b4b;let _0x4f2200=_0x4967f0[_0x53c1cf(0x2c1)];f[_0x53c1cf(0x5f3)](_0x53c1cf(0x294)),f[_0x53c1cf(0x5f3)](_0x53c1cf(0x800)),f[_0x53c1cf(0x5f3)](_0x4967f0[_0x53c1cf(0x2c1)]);let _0x260492=await this[_0x53c1cf(0x5d5)]({'request':_0x4967f0,'schema':M,'ClassRef':S,'execute':_0x105b7d=>A[_0x53c1cf(0x342)](_0x105b7d,_0x4f2200)});_0x749daf[_0x53c1cf(0x60e)](0xc8)[_0x53c1cf(0x318)](_0x260492);})[_0x3d1b4b(0x38e)](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x680)),..._0x54714d,async(_0x4ab11b,_0x41e122)=>{const _0x1dae6b=_0x3d1b4b;let _0x1cc857=_0x4ab11b[_0x1dae6b(0x2c1)];f[_0x1dae6b(0x5f3)](_0x1dae6b(0x515)),f['verbose'](_0x1dae6b(0x800)),f[_0x1dae6b(0x5f3)](_0x4ab11b[_0x1dae6b(0x2c1)]);let _0x4c8ef5=await this[_0x1dae6b(0x5d5)]({'request':_0x4ab11b,'schema':M,'ClassRef':S,'execute':_0x254d5f=>A['updateFlowConfig'](_0x254d5f,_0x1cc857)});_0x41e122[_0x1dae6b(0x60e)](0xc8)[_0x1dae6b(0x318)](_0x4c8ef5);})[_0x3d1b4b(0x38e)](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x32c)),..._0x54714d,async(_0x77ff9c,_0xf3d875)=>{const _0xa958a2=_0x3d1b4b;let _0x34f644=_0x77ff9c['body'];f[_0xa958a2(0x5f3)](_0xa958a2(0x604)),f[_0xa958a2(0x5f3)](_0xa958a2(0x800)),f[_0xa958a2(0x5f3)](_0x77ff9c[_0xa958a2(0x2c1)]);let _0x1fef9e=await this[_0xa958a2(0x5d5)]({'request':_0x77ff9c,'schema':M,'ClassRef':S,'execute':_0x27fb74=>A[_0xa958a2(0x32c)](_0x27fb74,_0x34f644)});_0xf3d875[_0xa958a2(0x60e)](0xc8)[_0xa958a2(0x318)](_0x1fef9e);})[_0x3d1b4b(0x38e)](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x6d4)),..._0x54714d,async(_0x2cd998,_0x1d1682)=>{const _0xc4251d=_0x3d1b4b;let _0x1989e7=_0x2cd998[_0xc4251d(0x2c1)];f[_0xc4251d(0x5f3)](_0xc4251d(0x64f)),f['verbose'](_0xc4251d(0x800)),f['verbose'](_0x2cd998[_0xc4251d(0x2c1)]);let _0x1e6654=await this['dataValidate']({'request':_0x2cd998,'schema':M,'ClassRef':S,'execute':_0x192380=>A[_0xc4251d(0x6d4)](_0x192380,_0x1989e7)});_0x1d1682[_0xc4251d(0x60e)](0xc8)[_0xc4251d(0x318)](_0x1e6654);})[_0x3d1b4b(0x38e)](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x5a7)),..._0x54714d,async(_0x238306,_0x1bce38)=>{const _0x1cc425=_0x3d1b4b;let _0x5c9269=_0x238306[_0x1cc425(0x2c1)];f[_0x1cc425(0x5f3)]('request\x20received\x20in\x20editConversation'),f[_0x1cc425(0x5f3)]('request\x20body:\x20'),f[_0x1cc425(0x5f3)](_0x238306['body']);let _0x249aab=await this[_0x1cc425(0x5d5)]({'request':_0x238306,'schema':M,'ClassRef':S,'execute':_0x1a4be9=>A[_0x1cc425(0x5a7)](_0x1a4be9,_0x5c9269)});_0x1bce38[_0x1cc425(0x60e)](0xc8)[_0x1cc425(0x318)](_0x249aab);})['delete'](this['routerPath'](_0x3d1b4b(0x718)),..._0x54714d,async(_0x1f8009,_0x2e82bf)=>{const _0x265971=_0x3d1b4b;let _0x2be62a=_0x1f8009[_0x265971(0x2c1)];f[_0x265971(0x5f3)]('request\x20received\x20in\x20deleteConversation'),f[_0x265971(0x5f3)](_0x265971(0x800)),f[_0x265971(0x5f3)](_0x1f8009[_0x265971(0x2c1)]);let _0x54e42c=await this[_0x265971(0x5d5)]({'request':_0x1f8009,'schema':M,'ClassRef':S,'execute':_0x838f8e=>A['deleteConversation'](_0x838f8e,_0x2be62a)});_0x2e82bf['status'](0xc8)[_0x265971(0x318)](_0x54e42c);})[_0x3d1b4b(0x38e)](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x43e)),..._0x54714d,async(_0x5e35b6,_0x9200b6)=>{const _0x2f051b=_0x3d1b4b;let _0x34508f=_0x5e35b6[_0x2f051b(0x2c1)];f[_0x2f051b(0x5f3)]('request\x20received\x20in\x20createFlow'),f[_0x2f051b(0x5f3)]('request\x20body:\x20'),f[_0x2f051b(0x5f3)](_0x5e35b6[_0x2f051b(0x2c1)]);let _0x357f4f=await this[_0x2f051b(0x5d5)]({'request':_0x5e35b6,'schema':M,'ClassRef':S,'execute':_0x447c7c=>A[_0x2f051b(0x44f)](_0x447c7c,_0x34508f)});_0x9200b6['status'](0xc8)[_0x2f051b(0x318)](_0x357f4f);})[_0x3d1b4b(0x38e)](this[_0x3d1b4b(0x40f)]('editflow'),..._0x54714d,async(_0x50647b,_0x36950b)=>{const _0x5312e0=_0x3d1b4b;let _0x7c70ae=_0x50647b[_0x5312e0(0x2c1)];f[_0x5312e0(0x5f3)](_0x5312e0(0x5df)),f[_0x5312e0(0x5f3)](_0x5312e0(0x800)),f[_0x5312e0(0x5f3)](_0x50647b[_0x5312e0(0x2c1)]),delete _0x7c70ae[_0x5312e0(0x72c)],delete _0x7c70ae['variables'],delete _0x7c70ae[_0x5312e0(0x69d)],delete _0x7c70ae[_0x5312e0(0x648)];let _0x52081b=await this['dataValidate']({'request':_0x50647b,'schema':M,'ClassRef':S,'execute':_0x5eb5de=>A[_0x5312e0(0x509)](_0x5eb5de,_0x7c70ae)});_0x36950b[_0x5312e0(0x60e)](0xc8)[_0x5312e0(0x318)](_0x52081b);})['post'](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x4c8)),..._0x54714d,async(_0x5afa9b,_0x18e71b)=>{const _0xbaa8c4=_0x3d1b4b;let _0x38d0bf=_0x5afa9b[_0xbaa8c4(0x2c1)];f[_0xbaa8c4(0x5f3)](_0xbaa8c4(0x5df)),f[_0xbaa8c4(0x5f3)](_0xbaa8c4(0x800)),f[_0xbaa8c4(0x5f3)](_0x5afa9b['body']);let _0xe303f6=await this[_0xbaa8c4(0x5d5)]({'request':_0x5afa9b,'schema':M,'ClassRef':S,'execute':_0x39e151=>A[_0xbaa8c4(0x2d5)](_0x39e151,_0x38d0bf)});_0x18e71b[_0xbaa8c4(0x60e)](0xc8)[_0xbaa8c4(0x318)](_0xe303f6);})['post'](this['routerPath'](_0x3d1b4b(0x59d)),..._0x54714d,async(_0x579deb,_0x12dd6b)=>{const _0x4d8350=_0x3d1b4b;let _0x25899d=_0x579deb[_0x4d8350(0x2c1)];f[_0x4d8350(0x5f3)](_0x4d8350(0x5df)),f[_0x4d8350(0x5f3)](_0x4d8350(0x800)),f[_0x4d8350(0x5f3)](_0x579deb[_0x4d8350(0x2c1)]);let _0x4dde4a=await this['dataValidate']({'request':_0x579deb,'schema':M,'ClassRef':S,'execute':_0x547409=>A['editFlowReply'](_0x547409,_0x25899d)});_0x12dd6b[_0x4d8350(0x60e)](0xc8)[_0x4d8350(0x318)](_0x4dde4a);})[_0x3d1b4b(0x38e)](this['routerPath'](_0x3d1b4b(0x6a3)),..._0x54714d,async(_0x37295c,_0x419714)=>{const _0x19e464=_0x3d1b4b;let _0x10fbf9=_0x37295c[_0x19e464(0x2c1)];f[_0x19e464(0x5f3)](_0x19e464(0x5df)),f[_0x19e464(0x5f3)](_0x19e464(0x800)),f[_0x19e464(0x5f3)](_0x37295c[_0x19e464(0x2c1)]);let _0x3639b6=await this['dataValidate']({'request':_0x37295c,'schema':M,'ClassRef':S,'execute':_0x1edba7=>A[_0x19e464(0x52f)](_0x1edba7,_0x10fbf9)});_0x419714[_0x19e464(0x60e)](0xc8)[_0x19e464(0x318)](_0x3639b6);})[_0x3d1b4b(0x38e)](this['routerPath'](_0x3d1b4b(0x721)),..._0x54714d,async(_0x57af69,_0x4ddf54)=>{const _0x2b30af=_0x3d1b4b;let _0x5aee86=_0x57af69['body'];f[_0x2b30af(0x5f3)](_0x2b30af(0x527)),f['verbose'](_0x2b30af(0x800)),f[_0x2b30af(0x5f3)](_0x57af69[_0x2b30af(0x2c1)]);let _0x56bc65=await this[_0x2b30af(0x5d5)]({'request':_0x57af69,'schema':M,'ClassRef':S,'execute':_0x291ac0=>A[_0x2b30af(0x2c3)](_0x291ac0,_0x5aee86)});_0x4ddf54[_0x2b30af(0x60e)](0xc8)[_0x2b30af(0x318)](_0x56bc65);})['post'](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x2a4)),..._0x54714d,async(_0x2fdc99,_0x55a098)=>{const _0x38f50a=_0x3d1b4b;let _0x2ceb24=_0x2fdc99[_0x38f50a(0x2c1)];f[_0x38f50a(0x5f3)](_0x38f50a(0x3ca)),f[_0x38f50a(0x5f3)]('request\x20body:\x20'),f['verbose'](_0x2fdc99[_0x38f50a(0x2c1)]);let _0x110b3f=await this[_0x38f50a(0x5d5)]({'request':_0x2fdc99,'schema':M,'ClassRef':S,'execute':_0x5b99ec=>A[_0x38f50a(0x607)](_0x5b99ec,_0x2ceb24)});_0x55a098[_0x38f50a(0x60e)](0xc8)[_0x38f50a(0x318)](_0x110b3f);})[_0x3d1b4b(0x38e)](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x2cc)),..._0x54714d,async(_0x1c41a8,_0x411a4c)=>{const _0x480253=_0x3d1b4b;let _0x4d9583=_0x1c41a8[_0x480253(0x2c1)];f[_0x480253(0x5f3)]('request\x20received\x20in\x20editFlowvariable'),f['verbose']('request\x20body:\x20'),f[_0x480253(0x5f3)](_0x1c41a8[_0x480253(0x2c1)]);let _0x3aab85=await this[_0x480253(0x5d5)]({'request':_0x1c41a8,'schema':M,'ClassRef':S,'execute':_0x1e5ba8=>A[_0x480253(0x506)](_0x1e5ba8,_0x4d9583)});_0x411a4c[_0x480253(0x60e)](0xc8)['json'](_0x3aab85);})[_0x3d1b4b(0x38e)](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x463)),..._0x54714d,async(_0x523c20,_0x5a73eb)=>{const _0x41683f=_0x3d1b4b;let _0x5eb09f=_0x523c20[_0x41683f(0x2c1)];f[_0x41683f(0x5f3)](_0x41683f(0x6fa)),f[_0x41683f(0x5f3)](_0x41683f(0x800)),f['verbose'](_0x523c20['body']);let _0x1bd9ed=await this['dataValidate']({'request':_0x523c20,'schema':M,'ClassRef':S,'execute':_0x2a5ff1=>A[_0x41683f(0x618)](_0x2a5ff1,_0x5eb09f)});_0x5a73eb['status'](0xc8)[_0x41683f(0x318)](_0x1bd9ed);})[_0x3d1b4b(0x714)](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x46a)),..._0x54714d,async(_0x3ca4e8,_0x216c7e)=>{const _0x488fbc=_0x3d1b4b;let _0x523917=_0x3ca4e8['body'];f[_0x488fbc(0x5f3)]('request\x20received\x20in\x20deleteFlow'),f[_0x488fbc(0x5f3)](_0x488fbc(0x800)),f['verbose'](_0x3ca4e8[_0x488fbc(0x2c1)]);let _0x3fdd77=await this[_0x488fbc(0x5d5)]({'request':_0x3ca4e8,'schema':M,'ClassRef':S,'execute':_0x11e231=>A[_0x488fbc(0x207)](_0x11e231,_0x523917)});_0x216c7e[_0x488fbc(0x60e)](0xc8)[_0x488fbc(0x318)](_0x3fdd77);})[_0x3d1b4b(0x602)](this[_0x3d1b4b(0x40f)](_0x3d1b4b(0x3a2)),..._0x54714d,async(_0x419e73,_0x27876b)=>{const _0x415d16=_0x3d1b4b;f[_0x415d16(0x5f3)](_0x415d16(0x701));let _0x4cd9df=await this[_0x415d16(0x5d5)]({'request':_0x419e73,'schema':M,'ClassRef':S,'execute':_0x4abf50=>A[_0x415d16(0x2dd)](_0x4abf50)});_0x27876b[_0x415d16(0x60e)](0xc8)['json'](_0x4cd9df);});}},ir=R(require(a0_0x108f24(0x3a6))),Y={};function ar(_0x12e131,_0x2d29ee,_0x2023b6,_0xa6f2be){Y[_0x12e131]||(Y[_0x12e131]={}),Y[_0x12e131][_0x2d29ee]={'id':_0x2d29ee,'response':_0x2023b6,'events':_0xa6f2be};}function rr(_0xcfdfac,_0x3c3df7){!Y[_0xcfdfac]||!Y[_0xcfdfac][_0x3c3df7]||delete Y[_0xcfdfac][_0x3c3df7];}function j(_0x278cb5,_0x41095e,_0x44266f){const _0x4fb9af=a0_0x108f24;if(!Y[_0x278cb5])return;let _0x5f2a4b='data:\x20'+JSON['stringify'](_0x44266f)+'\x0a\x0a';Object[_0x4fb9af(0x1be)](Y[_0x278cb5])[_0x4fb9af(0x2ab)](_0x4ec3a5=>{const _0x33e5d0=_0x4fb9af;_0x4ec3a5[_0x33e5d0(0x319)][_0x33e5d0(0x3cd)](_0x41095e)&&_0x4ec3a5['response'][_0x33e5d0(0x603)](_0x5f2a4b);});}function or(){const _0x18e01a=a0_0x108f24;let _0x28ea2b={};for(let _0x20c6e6 in Y)_0x28ea2b[_0x20c6e6]=Object[_0x18e01a(0x1be)](Y[_0x20c6e6])['map'](_0x1879d1=>({'id':_0x1879d1['id'],'events':_0x1879d1[_0x18e01a(0x319)]}));return _0x28ea2b;}var nr=require(a0_0x108f24(0x3eb)),ps=require(a0_0x108f24(0x546)),ds=class{},oo=new ps[(a0_0x108f24(0x343))]({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),io=new ps[(a0_0x108f24(0x343))]({'_id':{'type':String,'default':a0_0x108f24(0x672)},'WebhookGlobal':{'type':oo},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),he=N?.[a0_0x108f24(0x2e5)](ds[a0_0x108f24(0x2ec)],io,a0_0x108f24(0x5ec)),no=ir[a0_0x108f24(0x543)][a0_0x108f24(0x631)](__dirname,a0_0x108f24(0x66f)),Ct=(0x0,Et[a0_0x108f24(0x69f)])(),co=b['get'](a0_0x108f24(0x52d))[a0_0x108f24(0x1f3)],ee=[ga,ha,ya[co]];Ct[a0_0x108f24(0x803)](a0_0x108f24(0x5e5),Et[a0_0x108f24(0x543)][a0_0x108f24(0x213)](no))['get'](a0_0x108f24(0x6f8),async(_0x509822,_0x5750e3)=>{const _0x5989aa=a0_0x108f24;console[_0x5989aa(0x472)](_0x5989aa(0x1e3));let _0x2aea05=_0x509822['params'][_0x5989aa(0x21a)],_0x13bb42=(_0x509822[_0x5989aa(0x63f)][_0x5989aa(0x319)]||'')[_0x5989aa(0x5ac)](','),_0x513b1e=(0x0,nr['v4'])();console[_0x5989aa(0x472)](_0x5989aa(0x7e6),_0x2aea05),console['log'](_0x5989aa(0x3f9),_0x13bb42);let _0x4ac0a3=b['get'](_0x5989aa(0x52d))[_0x5989aa(0x568)],_0x2e8eb8=_0x509822[_0x5989aa(0x63f)]['apikey'];if(console[_0x5989aa(0x472)]('API\x20Key\x20from\x20Request:',_0x2e8eb8),_0x4ac0a3['KEY']!==_0x2e8eb8){console['log'](_0x5989aa(0x7f8));try{let _0x196eb2=await ne[_0x5989aa(0x681)]['find'](_0x2aea05);if(console['log'](_0x5989aa(0x4bf),_0x196eb2),!_0x196eb2||_0x196eb2[_0x5989aa(0x4b1)]!==_0x2e8eb8)return console['log'](_0x5989aa(0x60f)),_0x5750e3['status'](0x191)[_0x5989aa(0x564)](_0x5989aa(0x25f));}catch(_0x1cced6){return console[_0x5989aa(0x2d9)](_0x5989aa(0x23c),_0x1cced6),_0x5750e3[_0x5989aa(0x60e)](0x191)['send'](_0x5989aa(0x656));}}if(!await Be(_0x2aea05))return _0x5750e3[_0x5989aa(0x60e)](0x194)[_0x5989aa(0x564)]('Instância\x20não\x20encontrada.');_0x5750e3[_0x5989aa(0x288)]('Content-Type',_0x5989aa(0x782)),_0x5750e3[_0x5989aa(0x288)](_0x5989aa(0x4cd),_0x5989aa(0x795)),_0x5750e3[_0x5989aa(0x288)](_0x5989aa(0x209),_0x5989aa(0x451)),_0x5750e3[_0x5989aa(0x40e)]();let _0x2a3195=_0x5989aa(0x657)+JSON[_0x5989aa(0x35b)]({'info':'Conexão\x20estabelecida'})+'\x0a\x0a';_0x5750e3['write'](_0x2a3195),ar(_0x2aea05,_0x513b1e,_0x5750e3,_0x13bb42),_0x509822['on'](_0x5989aa(0x4b6),()=>{const _0x3a0620=_0x5989aa;console['log'](_0x3a0620(0x2f8)+_0x2aea05),rr(_0x2aea05,_0x513b1e);});}),Ct[a0_0x108f24(0x602)](a0_0x108f24(0x7a6),(_0x823e86,_0x318dff)=>{const _0x1a3f7b=a0_0x108f24;let _0x2c41a5=or();_0x318dff[_0x1a3f7b(0x318)](_0x2c41a5);})[a0_0x108f24(0x602)]('/',(_0x251ec9,_0xcb6d45)=>{const _0x42ad1f=a0_0x108f24;let _0x3e903f=b[_0x42ad1f(0x602)](_0x42ad1f(0x4d2)),_0x418a8b=_0x3e903f&&_0x3e903f[_0x42ad1f(0x78d)]['split']('/')[0x4];if(_0x418a8b){let _0x1d83a0=encodeURIComponent(_0x42ad1f(0x5db)+_0x418a8b);_0xcb6d45[_0x42ad1f(0x791)](_0x42ad1f(0x5c9)+_0x1d83a0);}else _0xcb6d45[_0x42ad1f(0x791)]('https://uazapi-plugin.bubbleapps.io/');})[a0_0x108f24(0x22a)](a0_0x108f24(0x4c7),...ee,async(_0x25095f,_0x1b29d6)=>{const _0x33467a=a0_0x108f24;try{console[_0x33467a(0x472)](_0x33467a(0x48f)),_0x1b29d6[_0x33467a(0x60e)](0xc8)[_0x33467a(0x318)]({'message':'API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos'}),_0x1b29d6['on']('finish',()=>process[_0x33467a(0x365)](0x0));}catch(_0x484873){console['error'](_0x33467a(0x477),_0x484873),_0x1b29d6['status'](0x1f4)[_0x33467a(0x318)]({'message':_0x33467a(0x41c)});}})[a0_0x108f24(0x22a)]('/config',...ee,async(_0x28275a,_0x1cab18)=>{const _0x22b441=a0_0x108f24;try{let _0x401052=_0x28275a['body'];await he[_0x22b441(0x4c9)]({},{'$set':_0x401052},{'upsert':!0x0});let _0x5e445f=await he[_0x22b441(0x624)]();_0x1cab18[_0x22b441(0x318)](_0x5e445f);}catch(_0xe4558){_0x1cab18[_0x22b441(0x60e)](0x190)[_0x22b441(0x564)](_0xe4558[_0x22b441(0x58c)]);}})['get'](a0_0x108f24(0x3b9),...ee,async(_0x12fc36,_0x40ab50)=>{const _0x4c26d7=a0_0x108f24;try{let _0x71b865=await he[_0x4c26d7(0x624)]();if(!_0x71b865)return _0x40ab50[_0x4c26d7(0x318)]({});_0x40ab50[_0x4c26d7(0x318)](_0x71b865);}catch(_0x1b636f){_0x40ab50[_0x4c26d7(0x60e)](0x1f4)[_0x4c26d7(0x564)](_0x1b636f[_0x4c26d7(0x58c)]);}})[a0_0x108f24(0x803)](a0_0x108f24(0x6a8),new it(b,...ee)[a0_0x108f24(0x23f)])[a0_0x108f24(0x803)](a0_0x108f24(0x7b7),new yt(...ee)[a0_0x108f24(0x23f)])[a0_0x108f24(0x803)](a0_0x108f24(0x2d2),new Qe(...ee)[a0_0x108f24(0x23f)])[a0_0x108f24(0x803)]('/group',new ot(...ee)[a0_0x108f24(0x23f)])[a0_0x108f24(0x803)](a0_0x108f24(0x3db),new bt(...ee)[a0_0x108f24(0x23f)])[a0_0x108f24(0x803)](a0_0x108f24(0x59e),new St(...ee)['router']);var h=class{constructor(..._0x2fb5a7){const _0x33a956=a0_0x108f24;throw{'status':0x190,'error':_0x33a956(0x5c3),'message':_0x2fb5a7[_0x33a956(0x231)]>0x0?_0x2fb5a7:void 0x0};}},Z=class{constructor(..._0x47a2e3){const _0x25c753=a0_0x108f24;throw{'status':0x191,'error':_0x25c753(0x373),'message':_0x47a2e3[_0x25c753(0x231)]>0x0?_0x47a2e3:void 0x0};}},H=class{constructor(..._0x502567){const _0x557455=a0_0x108f24;throw{'status':0x193,'error':_0x557455(0x558),'message':_0x502567[_0x557455(0x231)]>0x0?_0x502567:void 0x0};}},L=class{constructor(..._0x332a2c){throw{'status':0x194,'error':'Not\x20Found','message':_0x332a2c['length']>0x0?_0x332a2c:void 0x0};}},O=class{constructor(..._0x5db657){const _0x5f2f89=a0_0x108f24;throw{'status':0x1f4,'error':_0x5f2f89(0x2f0),'message':_0x5db657[_0x5f2f89(0x231)]>0x0?_0x5db657:void 0x0};}},ce=require(a0_0x108f24(0x7fe));async function gs(_0x4cf2ed){const _0x325284=a0_0x108f24;let _0x1a4a2d=new v(gs[_0x325284(0x2ec)]),_0x8d8f9c=N[_0x325284(0x5b9)](),_0x2d10fd=_0x8d8f9c['db'](b[_0x325284(0x602)](_0x325284(0x398))['CONNECTION']['DB_PREFIX_NAME']+'-instances')[_0x325284(0x3d2)](_0x4cf2ed),_0x9103be=async(_0x239156,_0x1001ac)=>{const _0x2cc705=_0x325284;try{return await _0x8d8f9c[_0x2cc705(0x766)](),await _0x2d10fd[_0x2cc705(0x761)]({'_id':_0x1001ac},JSON['parse'](JSON[_0x2cc705(0x35b)](_0x239156,ce[_0x2cc705(0x65e)][_0x2cc705(0x397)])),{'upsert':!0x0});}catch{}},_0x3aad6e=async _0x119c61=>{const _0x379878=_0x325284;try{await _0x8d8f9c[_0x379878(0x766)]();let _0x57fe0a=await _0x2d10fd[_0x379878(0x624)]({'_id':_0x119c61}),_0x48742b=JSON[_0x379878(0x35b)](_0x57fe0a);return JSON[_0x379878(0x6aa)](_0x48742b,ce[_0x379878(0x65e)][_0x379878(0x7bc)]);}catch{}},_0x2afbca=async _0x582b59=>{const _0x52f6db=_0x325284;try{return await _0x8d8f9c[_0x52f6db(0x766)](),await _0x2d10fd[_0x52f6db(0x7dd)]({'_id':_0x582b59});}catch{}},_0x5dd483=await _0x3aad6e(_0x325284(0x749))||(0x0,ce[_0x325284(0x1f7)])();return{'state':{'creds':_0x5dd483,'keys':{'get':async(_0x374967,_0x4f98ca)=>{const _0x5e4ec8=_0x325284;let _0x5bf7c9={};return await Promise['all'](_0x4f98ca[_0x5e4ec8(0x49e)](async _0x3b0db9=>{const _0x5d8e30=_0x5e4ec8;let _0x5e5535=await _0x3aad6e(_0x374967+'-'+_0x3b0db9);_0x374967===_0x5d8e30(0x33d)&&_0x5e5535&&(_0x5e5535=ce[_0x5d8e30(0x727)][_0x5d8e30(0x321)][_0x5d8e30(0x7e8)]['fromObject'](_0x5e5535)),_0x5bf7c9[_0x3b0db9]=_0x5e5535;})),_0x5bf7c9;},'set':async _0x42a25d=>{const _0x14b48c=_0x325284;let _0x2919f3=[];for(let _0x3afe91 in _0x42a25d)for(let _0x43ea30 in _0x42a25d[_0x3afe91]){let _0x510b88=_0x42a25d[_0x3afe91][_0x43ea30],_0x2fc90d=_0x3afe91+'-'+_0x43ea30;_0x2919f3[_0x14b48c(0x1d0)](_0x510b88?_0x9103be(_0x510b88,_0x2fc90d):_0x2afbca(_0x2fc90d));}await Promise[_0x14b48c(0x406)](_0x2919f3);}}},'saveCreds':async()=>_0x9103be(_0x5dd483,'creds')};}var ws=R(require(a0_0x108f24(0x5e3))),bs=R(require(a0_0x108f24(0x39b))),Nt=require(a0_0x108f24(0x7fe)),cr=require(a0_0x108f24(0x2c2)),vt=require(a0_0x108f24(0x7fe)),Mt;function a0_0x1b73(){const _0x20d8f3=['image','):\x20delete\x20=\x20true','instanceCount','markMessageAsRead','Error\x20status:','downloads','fetchProfile','sendContact','config','https://api.ipify.org?format=json','\x1b[34m','getLastMessage','findChats','PENDING','modifiedCount','chatHandle','authService','):\x20Não\x20achou\x20nenhum\x20flow',',\x20lastCondition:\x20','saveChatVariables','optionDescription','SECRET','updateFlowConfig','auth','):\x20Deletando\x20mensagem','_Messages','/media/','updateGroupsAddPrivacy','keys','pushName','readMessages','waitingForReplyMenu','findAll','$dbName','compression','HH:mm:ss','Error\x20fetching\x20group','processUazapi','PLAYED','open','segundos','LOG_COLOR','Error\x20headers:','downloadMediaMessage','chatLog','contact_blacklist','getContentType','contactMessage','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','createGroup','detail','groups','errorLog','Router','AddChatLabel','sendCommand','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','editflowvaredit','deleteMessage','TEL','groups_ignore','groupUpdateDescription','/instance','requestPairingCode','parse','):\x20Procurando\x20conversa','connectionUpdate','ipify.org','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','varedits','pt-BR','groupDesc','fetchLabels','toBRL','Erro\x20ao\x20atualizar\x20o\x20fluxo:','.sendDataWebhook-global','removeProfilePicture','substring','getDelay','):\x20newSecondValue\x20após\x20replaceVariables:','Not\x20allowed\x20by\x20CORS','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','buttons','NO_IP','qrcode-terminal','quoted','\x20minutos...','restartInstance','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','item','!stop','group','COLOR','No\x20join\x20group\x20invite\x20code\x20or\x20url','updateMediaMessage','Error\x20updating\x20profile\x20name','Erro\x20ao\x20remover\x20instâncias\x20antigas:','\x1b[42m','blockLogs','poll','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','noConnection','):\x20Conversa\x20está\x20expirada','webhookModel','groupValidate','uazapiSendText','fetchConversation','\x1b[33m\x1b[1m','InstancesAlterarTodas','silent','chats.delete','replaceVariablesInObject','getBase64FromMediaMessage','emit','ip:\x20','onWhatsApp','closeExistingConversations','Configuração\x20de\x20proxy\x20inválida\x20gerada.','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','unavailable','empty','documentWithCaptionMessage','replace','):\x20Iniciando\x20bot...','Image\x20is\x20base64','contextInfo','owner','request\x20received\x20in\x20starFlow','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','stanzaId','Full\x20file\x20path:','SERVER','fileName','):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20usuário\x20e\x20contém\x20palavras\x20para\x20pausar\x20o\x20fluxo','mimetype','readreceipts','$unset','ScheduleMessageModel','):\x20Erro\x20durante\x20a\x20atualização:\x20','listen','\x20saindo\x20da\x20função','addBlock','/events/:instance','fetchInstances','request\x20received\x20in\x20getFlow','copyDataToNewModel','):\x20expirationTime:\x20','leaveGroup','\x20minutos.\x20Será\x20às\x20','DATABASE_CONNECTION_HOST','processingScheduleMessageId','request\x20received\x20in\x20allFlows','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','):\x20Ignoring\x20group\x20messages.','PRODUCT_LIST','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','waitingMenu_ExpiredMessage','):\x20Erro\x20ao\x20editar\x20agentes:\x20','KEY','connectedName','Comando\x20desconhecido','updateParticipant','formatVCard','\x20inseridos\x20no\x20banco\x20de\x20dados...','groupHandler','):\x20Bloco\x20copiado:\x20','dbInstance','logger','messages.update','SINGLE_SELECT','delete','pollUpdateMessage','sections','entrou\x20na\x20função\x20importChats2','deleteConversation','):\x20','removeInstance','*\x0a\x0a','contacts.update','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','Data\x20inválida\x20fornecida','_ScheduleMessages','created','editflowgroup','):\x20Erro\x20ao\x20tentar\x20updateCustomFields:\x20','10BbOjnK','audio/mp4','scheduleSendMedia','repository','proto','updateConversation','fullName','Database\x20is\x20not\x20enabled','bodyString','blocks','fromObject','Type\x20defined\x20as\x20audio','contentText','processPollUpdateMessage','find','fetchMessages','validate','archiveChat','Enter\x20a\x20value\x20in\x20milliseconds','):\x20Erro\x20ao\x20editar\x20a\x20conversa:\x20','Log\x20out\x20instance:\x20','count','Temp\x20audio\x20path:\x20','error\x20get\x20vote','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','TEXT','):\x20Falha\x20ao\x20deletar\x20mensagem.','Error\x20updating\x20privacy\x20settings','Background\x20color\x20is\x20required','statusCode','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','bulkWrite','condition','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','):\x20tem\x20blocks','https://github.com/uazapi/uazapi.git','webp','Image\x20created','creds','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','getScheduleMessage','contacts','ids','request\x20received\x20in\x20updateAgent','buttonMessage','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','findByIdAndUpdate','storePath','errno','longitude','updateLastSeenPrivacy','):\x20Conversa\x20atualizada\x20em\x20memória','#ffffff','STORE_CONTACTS','Fluxos\x20não\x20estão\x20ativados','joinGroup',',\x20Minutes\x20to\x20Close:\x20','ex:\x20\x22groupJid=120362@g.us\x22','groups.upsert','createConversationforgoToFlow','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','getConversationModelForOwner','replaceOne','verify','menuMessage','document','backgroundColor','connect','email','\x1b[33m%s\x1b[0m','):\x20teve\x20mudanças\x20chat.displayName:\x20','ObjectId','\x1b[36m%s\x1b[0m','ProxyAgent','responsavelid','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','defineAuthState','child_process','/instance/create','updateProfilePicture','RECONNECT_TIME_FRAME','reorderBlocks','tags','flowConfig','LICENSE_INVALID','badSession','normalizeMessage','\x1b[33m','Failed\x20to\x20get\x20IP\x20from\x20','getStatus','/wa-message-update','pollOnReplyDelete','LOG_LEVEL','\x20foi\x20interrompido\x20pelo\x20usuário.','contactHandle','text/event-stream','participant','setContext','message_normalized','delaySecMin','block','lastSend','action','code','vote','pre','FULLCHAIN','The\x20\x22','getMinutes','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','redirect','cors','variablesToObject','send.message','no-cache','env.yml','options',',\x20pairCode:\x20','deletedCount','jsonwebtoken','Erro\x20ao\x20executar\x20o\x20Certbot.\x20Código\x20de\x20saída:\x20','SERVER_URL','method','):\x20Dados\x20migrados\x20com\x20sucesso','):\x20conversation.lastInteraction:\x20','locationMessage','variable','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','updateMany','isBusiness','logout','/clients-info','has','getContactModelForOwner','info','composing','role','isInteger','protocolMessage','sharp','sendAudio','ReplyOption\x20com\x20ID\x20','):\x20Erro\x20ao\x20alterar\x20fluxo:\x20','no.connection','flowStopConversation','\x20mensagens\x20de\x20','interval\x20não\x20é\x20um\x20número','.webp','/message','sendList','Invalid\x20format','eventEmitter','):\x20Parar\x20função\x20pois\x20não\x20está\x20conectado','reviver','dbClient','class-validator','\x20não\x20encontrado\x20para\x20atualização.','Error\x20removing\x20profile\x20picture','jid','ListMessage','jsonschema','inviteCode','Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos:\x20','\x1b[41m','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','console','realVariables','goNextblock','ensureChatIdsExist','messageId','1051581pGzwkG','webhookService','listMessage','Erro\x20ao\x20copiar\x20dados:','editFlowReply','reorderReplyOptions','editChat','EXPIRIN_IN','desativadoFluxoAte','updateGParticipate','Erro\x20ao\x20editar\x20a\x20conversa:\x20','resetReconnectionVariables','profilePictureUrl','unhandledRejection','secondValue','enabled','deleteOne','creds.json','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','):\x20Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20schedule\x20message:\x20','envProcess','now','AutomateSystem\x20não\x20foi\x20inicializado','getPrototypeOf','SERVER_ACK','Instance\x20ID:','match_last_seen','AppStateSyncKeyData','stopWhenYouSendMsg','replaceValue','/instance/fetchInstances','readMessageBot','lastReceivedMessage','connecting','Mensagem\x20não\x20suportada','toUpperCase','MessageModel','updateGParticipant','_Flows','restart','\x20is\x20already\x20in\x20use.','connectToWhatsappController','status.instance','env.KEY\x20!==\x20key','add','username','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','readMessage','Close\x20connection','@whiskeysockets/baileys','\x1b[31m','request\x20body:\x20','<subdomain>','proxy-agent','use','):\x20Entrou\x20na\x20função\x20goToFlow','labels.edit','Unknown\x20message\x20type\x20or\x20empty\x20message','Rótulo\x20atualizado:','viewOnceMessageV2Extension','Erro\x20ao\x20editar\x20o\x20bloco:\x20','Esse\x20fluxo\x20expirou','):\x20Fluxos\x20não\x20estão\x20ativados','Fluxo\x20não\x20encontrado','):\x20Erro\x20ao\x20buscar\x20conversas\x20','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','No\x20response\x20received:','dbServer','values','dark','Erro\x20ao\x20aplicar\x20varedit:\x20','audioWhatsapp','imageMessage','\x20\x1b[0m','}}\x20->\x20valor\x20não\x20encontrado','connectionClosed','charAt','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat:','getMessageModelForOwner','REDIS_PREFIX_KEY','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','Revoke\x20error','Erro\x20ao\x20editar\x20agentes:\x20','saveMediaToFile','Getting\x20profile\x20info','groupadd','push','user','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','Selecione','evaluateCondition','insert','updateStatusPrivacy','lastDisconnect','waMonitor','instancias:\x20','\x1b[43m','https://jsonip.com','Getting\x20audio\x20from\x20url','createServer','moreLogs','augusto.fcs@gmail.com','Type\x20is\x20required','chat','No\x20participants','bateu\x20events','viewOnceMessageV2','CORS_METHODS','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','exists','The\x20global\x20api\x20key\x20must\x20be\x20set','.TEL;waid=','toggleEphemeral','AUTHENTICATION_API_KEY','Erro:','listType','SERVER_PORT','createJid','statSync','File\x20written\x20to\x20path:\x20','):\x20conversation.status:\x20','TYPE','upperCase','reaction','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','initAuthCreds','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','hSet','local_map','wuid','Error\x20change\x20group\x20name','incrementIsValidAttempts','request\x20received\x20in\x20scheduleMessage','isConnected','updateReplyOption','Formato\x20inválido\x20de\x20proxy','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','StatusJidList\x20is\x20required','\x22\x20not\x20found','groupFetchAllParticipating','):\x20Enviando\x20mídia','deleteFlow','getHours','Connection','listResponseMessage','Button\x20IDs\x20cannot\x20be\x20repeated.','):\x20isVote:\x20','lastSendMessage','Error\x20updating\x20profile\x20status','activatedCount','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','\x1b[37m%s\x1b[0m','static','Deletion\x20failed','apirequest','deleteInstance','lastBlockId','entries','findFlow','instance','PRESENCE_UPDATE','):\x20Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','variables','birthtime','/wa-connection-update','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','findAndReplaceRegex','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','sort','online','trimmed','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','WebhookGlobal','findOneAndUpdate','utf-8','put','lastInteraction','ENABLED','Erro\x20ao\x20inserir\x20chats:','processConditionsTest','processvaredits','customFields','length','AUTHENTICATION_TYPE','buttonId','----------------------------','Rótulo\x20inválido\x20ou\x20sem\x20ID.','encoding','\x1b[34m%s\x1b[0m','selectableCount','limit','\x1b[37m','utf8','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','presenceSubscribe','router','\x20minutos','remoteJids','deleteDoneMessages','random','ephemeralMessage','importChats','Imagem\x20não\x20encontrada','buttonText','saveVariable','protocol','jsonip.com','labels.association','notMatchRegex','testProxy\x20response\x20from\x20','DATABASE_ENABLED',',\x20Segundo\x20Valor:\x20','uazapiDeleteMessage','1370550YQYwiH','object','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','match','privacySettings','instance.','Instâncias\x20atualizadas\x20como\x20desconectadas:\x20','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','messages','CLEANING_INTERVAL','convert','slice','updateMessage','findGroup','API\x20Key\x20inválida.','checkAndRestartProcess','updateProfileStatus','/wa-chats','varedit','Not\x20Found','create','reconnectTimestamps','color','\x20minutos\x20verificará\x20novas\x20mensagens','envYaml','scheduleMessage','groupRevokeInvite','http://checkip.dyndns.org','isJidUser','copy','groupCreate','sendText','\x0aitem','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','announcement','):\x20Procurando\x20mensagens\x20para\x20envio','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','toFile','Including\x20timestamp\x20in\x20url:\x20','automateSystem','less','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','sending','evaluateConditionTest','onTime','\x20segundos','flowPrefixCommand','shift','Processing\x20audio','createAndSave','exports','DELETED','sendMessage','release','Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:','setHeader','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','mediaMessage','capitalizedWords','ini','subjectTime','Atualização:\x20','toString','ReplyOptions\x20finais\x20após\x20reordenação:','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','convertedOptions','agents','request\x20received\x20in\x20updateCustomFields','Erro\x20ao\x20editar\x20o\x20chat:\x20','Primeiro\x20Valor:\x20','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','writeData','CONTACTS_UPSERT','matchRegex','ERROR:\x20','arraybuffer','\x20}\x0a','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20',',\x20resultado:\x20','licenca','groups.update','qrcode.updated','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','editflowcondition','Telefone:\x20','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','round','Module\x20-\x20ON','audio','linkPreview','forEach','53048TxpJjq','editOperator','groupToggleEphemeral','\x20quoted:\x20','labelId','editScheduleMessage','true','toLocaleString','website','stack','?timestamp=','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20não\x20estão\x20ativados.','Parando\x20aplicação...','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','notContains','announce','HOST','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','CREDENTIALS','Arquivo\x20env.yml\x20atualizado\x20com\x20sucesso.','/*.json','body','@redis/client','editFlowGroup','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','\x1b[31m%s\x1b[0m','AllProxy','status@broadcast','@g.us','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','CORS_CREDENTIALS','):\x20Criou\x20conversa\x20no\x20startFlow:','editflowvariable','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','viewOnceMessage','replyOption','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','DELIVERY_ACK','/chat','certbot','phoneNumber','editFlowBlock','Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.','instanceInfo','exec','error','address','MESSAGES_SET','prepareWAMessageMedia','allFlows','changeVariables','equal','findAndReplace','scheduleMessages','):\x20transformedCustomFieldVariables','groupMetadata','dayjs','model','Cannot\x20','editedMessage','):\x20Ler\x20mensagem','\x22,\x20valor\x20a\x20substituir:\x20\x22','expression','conversation','name','MAX_RECONNECT_ATTEMPTS','metadata','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20','Internal\x20Server\x20Error','webhook','toLowerCase','jwt','):\x20Query\x20params:\x20','dyndns.org','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','updatePrivacySettings','Connection\x20closed\x20for\x20instance:\x20','height','connectionStatus','warn','CHATS_DELETE','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','Parando\x20aplicação,\x20atualização\x20recebida','getVariablesChat','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','623MUYtUs','deleteBlock','max','statusJidList','Error\x20writing\x20file:\x20','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','Error\x20message:','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','://','chatModify','):\x20Editando\x20replyOption...','findGroups','ButtonsMessage','):\x20Buscando\x20flow...','fromMe','SEND_MESSAGE','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','stdout','Variáveis\x20não\x20encontradas:','localWebhook','\x1b[47m','Erro\x20ao\x20normalizar\x20a\x20mensagem:','json','events','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','\x1b[44m','documentMessage','instanceKeys','FlowRouter','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','ConversationModel','Message','applyvaredit','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','fetchLatestBaileysVersion','createConnection','getOwnPropertyDescriptor','nome','reconnectAttempts','delAll','express-async-errors','messages.set','getConversation','bearer','where','authState','Initial\x20__dirname:','throwAndLogError','RemoveChatLabel','header','isJidGroup','fetchProfilePictureUrl','profilePicture','):\x20updateResult:','readFile','getMessage','Falta\x20informação\x20para\x20a\x20chamada\x20API','deleteMessageForEveryone','@s.whatsapp.net','app-state-sync-key','remove','Media\x20folder\x20path:','writeFileSync','text','updateCustomFields','Schema','):\x20Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos:\x20','paused','getOwnPropertyNames','videoMessage','REDIS','EMAIL','deleteMany','CONECTADO\x20À\x20UAZAPI','pollCreationMessageV2','groupUpdateSubject','fetchBusinessProfile','SendScheduleMessage','textMessage','processConditions','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','URL','$addToSet','content-type','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','Flow\x20iniciado\x20com\x20','deleteAll','CORS','.mp4','stringify','delayMessage','axios','latitude','addChatLabel','restrict','sleep','findParticipants','uazapiSendAudio','Output\x20path:\x20','exit','#000000','GROUPS_UPSERT','express','waInstances','apply','DOCKER_ENV','Audio\x20is\x20base64','@broadcast','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','Número:\x20','----------------------REMOVE----------------------------','g-t','fetchProfilePicture','Unauthorized','):\x20Editando\x20bloco...','Reinicialização\x20iniciada:\x20','^\x5cd+([-]\x5cd+)*@g.us$','array','temp-','):\x20Erro\x20ao\x20buscar\x20a\x20conversa\x20','vcard','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','checkAndUpdateChatStatus','/wa-message','dbSettings','trim','chats.upsert','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','MESSAGES_UPDATE','createProxyConfig','application/octet-stream','fetchPrivacySettings','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-f\x20ipod\x20','integer','AUTHENTICATION_JWT_SECRET','copyBlock','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20','android','Unable\x20to\x20leave\x20the\x20group','):\x20lastBlockId:\x20','post','optionName','):\x20Erro\x20ao\x20editar\x20o\x20chat:\x20','floor','repeat','pop','footerText','next_groupId','Converting\x20image\x20to\x20WebP\x20to\x20sticker','replacer','DATABASE','):\x20Bloco\x20original\x20para\x20cópia:\x20','):\x20Erro\x20ao\x20criar\x20fluxo\x20','node-cache','contactsArrayMessage','notify','CHATS_SET','\x0a*Você\x20respondeu*:\x0a','Valor\x20inicial:\x20\x22','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20','allflows','refused','isRunning','Erro\x20ao\x20adicionar\x20label\x20','path','chats.update','):\x20Erro\x20ao\x20buscar\x20Schedule\x20Messages:','uazapi','CONTACTS_SET','URL:','goToFlow','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','formatStatusMessage','getChatModelForOwner','password','):\x20Comando\x20desconhecido:\x20','\x20removido\x20do\x20chat\x20','cpf','preview','everyOne','Types','data','Instâncias\x20removidas\x20por\x20estarem\x20desconectadas\x20há\x20mais\x20de\x2010\x20dias:\x20','/config','Content\x20is\x20required','uazapiSendContact','Error\x20updating\x20profile\x20picture','Error\x20change\x20group\x20description','):\x20Editando\x20condição\x20do\x20fluxo...','):\x20Limpando\x20AutomateSystem','SUCCESS','Conversa\x20deletada\x20com\x20sucesso.','pollCreationMessageKey','):\x20encontrado\x20próxima\x20mensagem\x20para\x20','leadInfo.customFields','width','Temp\x20image\x20deleted','\x20horas\x20e\x20','getLabelModelForOwner','\x1b[0m','request\x20received\x20in\x20editFlowcondition','indexOf','readFileSync','includes','remoteJidsRemaining','Label\x20','client','originalUrl','collection','abs','createSectionsFromValues','fileUrl','loadEnv','DisconnectReason','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','BRL','getMIMEType','/webhook',',\x20qrcodeCount:\x20','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','):\x20Deletando\x20fluxo...','waitingMenu_text','Erro\x20ao\x20atualizar\x20o\x20flow.','none','set','getScheduleMessageModelForOwner','test','AutomateSystem','nomecompleto','):\x20Campos\x20a\x20serem\x20atualizados:','PORT','some','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','uuid','valid','whatsappNumber','saveTextReply','*Pergunta*:\x20\x0a','Rótulo\x20deletado:','createConversationforStartFlow','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','.X-ABLabel:Celular\x0a','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','verifiedName','displayName','headers','Subscribed\x20Events:','):\x20Erro\x20ao\x20deletar\x20mensagens\x20com\x20status\x20\x22done\x22:','useMultiFileAuthState','enumerable','Error\x20updating\x20message\x20status:','presence','1244600hXSBJw','Erro\x20ao\x20atualizar\x20o\x20arquivo\x20env.yml:','\x20contacts','Erro\x20inesperado\x20em\x20processvaredits:\x20','group-participants.update','padEnd','Trying\x20to\x20get\x20business\x20profile','all','lastCondition','title','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','CORS_ORIGIN','--standalone','.jwt','mongodb','flushHeaders','routerPath','function','Missing\x20global\x20api\x20key','_Chats','authModel','toBrazilianNumberFormat','Error\x20updating\x20setting','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP:','startsWith','flowIgnoreGroups','env','mediaKey','Erro\x20ao\x20encerrar\x20a\x20API','content-disposition','sendStatus','\x20não\x20encontrado\x20para\x20cópia','pollCreationMessageV3','errors','.mp3','statusMessage','urlOrBase64','\x20chats\x20de\x20','ChatRouter','DATABASE_CONNECTION_DB_PREFIX_NAME','removeChatLabel','whatsappNumbers','GROUPS_UPDATE','findLabels','insertMany','setWebhook','ChatModel','INFO','USER','stopIfLastReturnedError','):\x20Criando\x20fluxo...','sendWhatsAppAudio','demote','http','content','Erro\x20desconhecido\x20ao\x20deletar\x20mensagens','):\x20Limpando\x20delayMessage','messageSecret','getRandomText','stopConversation','load','findOrCreate','createflow','readData','\x5cd+','Falha\x20ao\x20deletar\x20mensagens\x20antigas:','endSession','views','isURL','imagechat','from','variablesNotFound','notEqual','LOG','createInstance','):\x20alterando\x20this.AutomateSystem','insertCount','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','mediaSticker','createFlow',',\x20Expiration\x20Time:\x20','keep-alive','params','lastMessage','):\x20não\x20encontrou','Button\x20texts\x20cannot\x20be\x20repeated','DEBUG','hGetAll','groupAcceptInvite','):\x20Criada\x20conversa\x20nova\x20(gotoflow)','GROUP_PARTICIPANTS_UPDATE','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','SSL_CONF_PRIVKEY','\x20ao\x20chat\x20','):\x20Going\x20to\x20','scheduleSendAudio','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20','makeCacheableSignalKeyStore','PASSWORD','getflow','connectionState','getProfileName','Erro\x20ao\x20remover\x20label\x20','generateHash','minutesToClose','sendReaction','deleteflow','boolean','contact','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','CONNECTION','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','existsSync','connectToWhatsapp','log','string','blockId','):\x20leadInfoVariables','instanceName','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','font','):\x20Buscando\x20conversas...','subject','remoteJid','isArray','Erro\x20ao\x20deletar\x20mensagens:','JWT','findById','updateStopChat','Instance\x20\x22','ERROR','messageTimestamp','14934JMMBjS','greater','selectedOptions','Converted\x20audio\x20deleted','prefixCommand','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','.ogg','sendPoll','waitingMenu_id','flow','audio/aac','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','):\x20Enviando\x20áudio','groupJid','\x20não\x20encontrado','Flow\x20não\x20encontrado','READ','3621608KNKsrm','\x5c$&','cleanStore','Erro\x20ao\x20deletar\x20a\x20conversa:\x20','The\x20instance\x20needs\x20to\x20be\x20disconnected','msgRetryCounterCache','pollMessage','flowConversation','authentication','map','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','getFlowModelForOwner','Getting\x20profile\x20with\x20jid:\x20','messages.upsert','CONNECTION_UPDATE','end','STORE_CLEANING_TERMINAL','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','flowname:\x20','Erro\x20ao\x20atualizar\x20AutomateSystem:','reactionMessage','STATUS_INSTANCE','updateOneById','userDevicesCache','WARN','ignoreGroups','loggedOut','Error\x20updating\x20participants','apikey','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','Erro\x20de\x20reinicialização:\x20','expiration','removed','close','OrAnd','unlinkSync','uazapiSendMenu','convertaudio','type','rowId','remove.instance','Erro\x20ao\x20criar\x20o\x20fluxo:\x20','Instance\x20Key\x20from\x20DB:','Erro\x20de\x20atualização:\x20','):\x20Dados\x20recebidos\x20no\x20editFlowGroup:','E-mail:\x20','Chrome','video','PREFIX_KEY','replaceVariablesChat','/exit','editflowblock','updateOne','):\x20debug\x20alterando\x20this.AutomateSystem','removeData','chats','Cache-Control','VERBOSE','):\x20Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20','leadInfo.desativadoFluxoAte','ContactModel','SSL_CONF','labels','.chatId','endsWith','sendSticker','redis','\x0aFN:','fileLength','when','splice','writeFile','lean','instanceName\x20not\x20provided.','groupInviteCode','DARK','REDIS_URI','scheduleNextCheck','END:VCARD','createNewConversation','setRestartTimer','rm\x20-rf\x20','processblock','\x1b[32m','):\x20Query\x20params:','updateProfileName','debug','store','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','testProxy','mentions','Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','groupSetting','notas','\x20-y','stderr','Temp\x20audio\x20created','URI','participants','Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','arrayUnique','The\x20','Logger','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','findConversation','findIndex','request','):\x20Flow\x20desativado','conversationTimestamp','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','eventHandler','public','GUARD','editFlowVariable','leadInfo.customFields.','reference','editFlow','groupSettingUpdate','caption','QRCODE_UPDATED','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','Instância:\x20','Erro\x20ao\x20importar\x20chats:','group\x20ignored','value','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','start','Temp\x20audio\x20deleted','request\x20received\x20in\x20updateFlowConfig','\x20adicionado\x20ao\x20chat\x20','filter','subdomain','menuExpiredMessage','lowerCase','cache','createWebhook','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','/wa-contacts','hostname','):\x20nextBlock.uazapi.name',',\x20fará\x20nova\x20verificação\x20em\x20','last','Reordenando\x20replyOptions\x20para\x20o\x20blockId:','pairingCode','DaysToDelete','success','request\x20received\x20in\x20editFlowgroup','Nenhum\x20chat\x20fornecido\x20para\x20inserção.','NextBlock','DATABASE_CONNECTION_USER','setting','sendMenu','AUTHENTICATION','PRIVKEY','editFlowVaredit','Não\x20respondeu\x20com\x20a\x20enquete.','media','deleteReplyOption','Error\x20data:','and','maxActives','sendMedia','^\x5cd+','stopMinutes','flattenObject','/instance/delete','uazapiSendLocation','state','webhookMap','number','sha256','parseInt','contactname','saveConversationToDatabase','default','/wa-groups','Hash\x20to\x20audio\x20name:\x20','mongoose','updateBlock','output','video-cover.png','base64','presence.update','pino','):\x20this.processingScheduleMessageId:\x20','groupLeave','SSL_CONF_FULLCHAIN','_Contacts','getTicketSystem','hasOwnProperty','getAutomateSystem','Variável\x20não\x20encontrada!','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','41585330XgCNne','truncatedtoEnd','Forbidden','ListType','DB_PREFIX_NAME','The\x20property\x20cannot\x20be\x20empty','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','toDataURL','pollCreationMessage','/events','closed','Error\x20creating\x20group','replaceVariablesLogs','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','send','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','groupId','updateGroupPicture','API_KEY','toNumber','stopped','CONTACTS_UPDATE','including\x20timestamp\x20in\x20url:\x20','DATABASE_CONNECTION_URI','oldValue','syscall','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','sendPresenceUpdate','Valor\x20de\x20find\x20ou\x20replace\x20ausente','loadWebhook','fetchContacts','mentioned','numbers',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','https','Hash\x20to\x20image\x20name:\x20','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','deleteChat','sendButtons','replaceVariables','fetchChats','audio/ogg','atendimentoAberto','chats.set','SERVER_OFFLINE','menuIgnoreNonVotes','order','option','Instance\x20deleted','):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20e\x20não\x20é\x20a\x20stopConversation.\x20Saindo\x20da\x20função.','.png','lastmsg','updateChatWithMessage','):\x20Erro\x20ao\x20deletar\x20a\x20conversa\x20','message','__esModule','creation','redisEnv','mongodb://','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','assign','stickerMessage','):\x20Enviando\x20enquete','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','oldToken','waitingMenu_replyOptions','chatId','messageHandle','upsertChats','stateConnection','response','editflowreply','/automate','fone','CHATS_UPDATE','):\x20Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20','command','audioMessage','/wa-qrcode','label_jid','menuType','editConversation','description','connection.update','prepareMediaMessage','fetchStatus','split','organization','Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','pollErrorMessage','Bloco\x20com\x20ID\x20','----------------------ADD----------------------------','hex','inner','apiResponse','revokeInviteCode','gifPlayback','/instance/connectionState','.sendDataWebhook-local','getClient','port','Certbot\x20executado\x20com\x20sucesso.','updateAll','findWebhook','getDevice','\x20using\x20the\x20proxy:','Group\x20not\x20found','sendLocation','messagesSend','Bad\x20Request','mediatype','processgoToFlow','50mb','):\x20Enviando\x20contato','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','https://uazapi-plugin.bubbleapps.io/?url=','certonly','notEmpty','updatePresence','.\x20Pulando.','/create','}}\x20->\x20\x22','ORG:','?authSource=admin&readPreference=primary&directConnection=true','):\x20Enviando\x20texto','/instance/connect','padStart','dataValidate','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','/:instanceName','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','profile','Reiniciando\x20sistema\x20após\x20instalado\x20certificado...','https://','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','leadInfo','Erro\x20ao\x20atualizar\x20múltiplos\x20fluxos:','request\x20received\x20in\x20editFlow','Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','sendDataWebhook','firstValue','long','Authentication\x20error','/media','error_log','prototype','size','drop','picture','):\x20Conversas\x20encontradas:','All_Instances_Config','headerString','_id','Last\x20message\x20not\x20found','):\x20teve\x20mudanças\x20chat.name:\x20','):\x20Conversa\x20inserida\x20com\x20sucesso.','available','verbose','36knHfsz','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','rows','choices','updateAgent','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','processApiRequest','mkdirSync','cwd','$pull','process','requested\x20testProxy','\x22reaction\x22\x20must\x20be\x20an\x20emoji','updateOnlinePrivacy','get','write','request\x20received\x20in\x20getConversation','Erro\x20ao\x20executar\x20comando\x20de\x20reinicialização:\x20','jpegThumbnail','editFlowCondition','save','tryProxy','):\x20Error\x20processing\x20the\x20block:\x20','timerId','Message\x20not\x20found','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','status','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','unreadcount','allContacts','loadInstance','recording','folder','sectionsToString','newStoppedUntil','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','getFlow','host','-instances','locked','):\x20Criando\x20nova\x20conversa[createNewConversation]','unreadCount','replyOptions','unlocked','senderKeyDistributionMessage','CHATS_UPSERT','$set','context','findOne','https://chat.whatsapp.com/','archived','formatBRNumber','Erro\x20ao\x20incrementar\x20isValidAttempts:','Instance\x20restarted','url','configService','groupName','startFlow','sendMessageWithTyping','Error\x20in\x20markMessageAsRead:','DD/MM\x20HH:mm:ss','join','flowName','contains','MESSAGES_UPSERT','update','messaging-history.set','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','Audio\x20processed','isLong','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','collections','_error','):\x20atualização\x20chat:\x20','Media\x20folder\x20does\x20not\x20exist,\x20creating\x20folder...','query','isBase64','METHODS','contacts.upsert','uncaughtException','getTime','ephemeralExpiration','\x1b[30m','LabelModel','conditions','hGet','Type\x20not\x20found','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','findGroupInfo','AUTHENTICATION_JWT_EXPIRIN_IN','delay','request\x20received\x20in\x20fetchConversation','removeOlderDisconnectedInstances','label','qrcode',',\x20valor\x20a\x20encontrar:\x20\x22','\x20-\x20ON:\x20','):\x20Mensagens\x20com\x20status\x20\x22done\x22\x20deletadas\x20com\x20sucesso.','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','data:\x20','app','Audio\x20is\x20url','\x22\x20-\x20REMOVED','Not\x20is\x20business\x20profile','scheduled','qrCode','BufferJSON','Nenhum\x20chat\x20encontrado\x20para\x20editar.','StartBot','binary','key','hbs','archive','flowActive','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:',',\x20saindo.','Error\x20change\x20group\x20setting','Fetching\x20business\x20profile'];a0_0x1b73=function(){return _0x20d8f3;};return a0_0x1b73();}function lo(_0x4d0754){const _0x1ba1e2=a0_0x108f24;return Mt||(Mt=(0x0,cr['createClient'])({'url':_0x4d0754[_0x1ba1e2(0x4f6)]}),Mt[_0x1ba1e2(0x766)]()),Mt;}var re=class c{constructor(_0x5630fa,_0x338b91){const _0x281c74=a0_0x108f24;this[_0x281c74(0x58f)]=_0x5630fa,this[_0x281c74(0x476)]=_0x338b91,this[_0x281c74(0x711)]=new v(c[_0x281c74(0x2ec)]),this[_0x281c74(0x3d0)]=lo(_0x5630fa);}set[a0_0x108f24(0x508)](_0x34cb53){this['instanceName']=_0x34cb53;}async['instanceKeys'](){const _0x33c578=a0_0x108f24;try{return await this[_0x33c578(0x3d0)][_0x33c578(0x6a1)]([_0x33c578(0x686),this['redisEnv'][_0x33c578(0x4c5)]+':*']);}catch(_0x388a24){this[_0x33c578(0x711)]['error'](_0x388a24);}}async[a0_0x108f24(0x298)](_0x28c15e,_0x496686){const _0x494c2b=a0_0x108f24;try{let _0x3a29fe=JSON[_0x494c2b(0x35b)](_0x496686,vt[_0x494c2b(0x65e)]['replacer']);return await this[_0x494c2b(0x3d0)][_0x494c2b(0x1f9)](this[_0x494c2b(0x58f)][_0x494c2b(0x4c5)]+':'+this['instanceName'],_0x28c15e,_0x3a29fe);}catch(_0x15f34c){this['logger']['error'](_0x15f34c);}}async['getAllData'](){const _0x38a767=a0_0x108f24;try{let _0x1527a2=await this['client'][_0x38a767(0x457)](this['redisEnv'][_0x38a767(0x4c5)]+':'+this['instanceName']);if(_0x1527a2){for(let _0x378b8c in _0x1527a2)Object[_0x38a767(0x5e7)]['hasOwnProperty']['call'](_0x1527a2,_0x378b8c)&&(_0x1527a2[_0x378b8c]=JSON[_0x38a767(0x6aa)](_0x1527a2[_0x378b8c],vt['BufferJSON'][_0x38a767(0x7bc)]));return _0x1527a2;}}catch(_0x58f707){this[_0x38a767(0x711)][_0x38a767(0x2d9)](_0x58f707);}}async[a0_0x108f24(0x43f)](_0x5b5465){const _0x1580cc=a0_0x108f24;try{let _0x24976e=await this[_0x1580cc(0x3d0)][_0x1580cc(0x649)](this[_0x1580cc(0x58f)][_0x1580cc(0x4c5)]+':'+this[_0x1580cc(0x476)],_0x5b5465);if(_0x24976e)return JSON[_0x1580cc(0x6aa)](_0x24976e,vt[_0x1580cc(0x65e)]['reviver']);}catch(_0x3d51ba){this[_0x1580cc(0x711)][_0x1580cc(0x2d9)](_0x3d51ba);}}async[a0_0x108f24(0x4cb)](_0x194d6b){const _0x143ceb=a0_0x108f24;try{return await this[_0x143ceb(0x3d0)]['hDel'](this['redisEnv']['PREFIX_KEY']+':'+this[_0x143ceb(0x476)],_0x194d6b);}catch(_0x25d679){this[_0x143ceb(0x711)]['error'](_0x25d679);}}async[a0_0x108f24(0x329)](_0x48edb7){const _0xaaf31b=a0_0x108f24;try{return await this[_0xaaf31b(0x3d0)]['del'](_0x48edb7||this[_0xaaf31b(0x58f)][_0xaaf31b(0x4c5)]+':'+this['instanceName']);}catch(_0x3b89ae){this['logger'][_0xaaf31b(0x2d9)](_0x3b89ae);}}};async function hs(_0x45cf84,_0x5646e3){const _0x184c0c=a0_0x108f24;let _0x3b1887=new v(hs[_0x184c0c(0x2ec)]),_0x1fb4ee=new re(_0x45cf84,_0x5646e3),_0x536373=async(_0x1106d1,_0xca3033)=>{const _0x3b68ec=_0x184c0c;try{return await _0x1fb4ee[_0x3b68ec(0x298)](_0xca3033,_0x1106d1);}catch(_0x2272a3){return _0x3b1887[_0x3b68ec(0x2d9)]({'localError':_0x3b68ec(0x298),'error':_0x2272a3});}},_0x483d8c=async _0x454ae6=>{const _0x43c74e=_0x184c0c;try{return await _0x1fb4ee[_0x43c74e(0x43f)](_0x454ae6);}catch(_0x2d3462){_0x3b1887[_0x43c74e(0x2d9)]({'readData':'writeData','error':_0x2d3462});return;}},_0x18b13a=async _0x214759=>{const _0x188dfc=_0x184c0c;try{return await _0x1fb4ee['removeData'](_0x214759);}catch(_0x5320a6){_0x3b1887[_0x188dfc(0x2d9)]({'readData':_0x188dfc(0x4cb),'error':_0x5320a6});}},_0x383302=await _0x483d8c('creds')||(0x0,Nt[_0x184c0c(0x1f7)])();return{'state':{'creds':_0x383302,'keys':{'get':async(_0x391219,_0x40ce5c)=>{const _0x4ce1bb=_0x184c0c;let _0x137405={};return await Promise[_0x4ce1bb(0x406)](_0x40ce5c[_0x4ce1bb(0x49e)](async _0x491f31=>{const _0x4ca2c8=_0x4ce1bb;let _0x12f66f=await _0x483d8c(_0x391219+'-'+_0x491f31);_0x391219===_0x4ca2c8(0x33d)&&_0x12f66f&&(_0x12f66f=Nt[_0x4ca2c8(0x727)][_0x4ca2c8(0x321)][_0x4ca2c8(0x7e8)][_0x4ca2c8(0x72d)](_0x12f66f)),_0x137405[_0x491f31]=_0x12f66f;})),_0x137405;},'set':async _0xbad296=>{const _0x4c7002=_0x184c0c;let _0x247701=[];for(let _0xbad669 in _0xbad296)for(let _0x2e8027 in _0xbad296[_0xbad669]){let _0x4216a5=_0xbad296[_0xbad669][_0x2e8027],_0x2af650=_0xbad669+'-'+_0x2e8027;_0x247701[_0x4c7002(0x1d0)](_0x4216a5?await _0x536373(_0x4216a5,_0x2af650):await _0x18b13a(_0x2af650));}await Promise[_0x4c7002(0x406)](_0x247701);}}},'saveCreds':async()=>await _0x536373(_0x383302,'creds')};}var k=R(require('fs')),me=require(a0_0x108f24(0x3eb)),At=R(require(a0_0x108f24(0x7ae))),fr=require(a0_0x108f24(0x802)),uo='\x0a38.154.227.167:5868:bkcihaei:jxnd6wd97u0s\x0a185.199.229.156:7492:bkcihaei:jxnd6wd97u0s\x0a185.199.228.220:7300:bkcihaei:jxnd6wd97u0s\x0a185.199.231.45:8382:bkcihaei:jxnd6wd97u0s\x0a188.74.210.207:6286:bkcihaei:jxnd6wd97u0s\x0a188.74.183.10:8279:bkcihaei:jxnd6wd97u0s\x0a188.74.210.21:6100:bkcihaei:jxnd6wd97u0s\x0a45.155.68.129:8133:bkcihaei:jxnd6wd97u0s\x0a154.95.36.199:6893:bkcihaei:jxnd6wd97u0s\x0a45.94.47.66:8110:bkcihaei:jxnd6wd97u0s\x0a'['trim'](),ms=uo['split']('\x0a')[a0_0x108f24(0x49e)](_0x1f3e85=>{const _0x1c2f3e=a0_0x108f24;let _0x46f74b=_0x1f3e85[_0x1c2f3e(0x5ac)](':');return{'host':_0x46f74b[0x0],'port':_0x46f74b[0x1],'username':_0x46f74b[0x2],'password':_0x46f74b[0x3],'protocol':_0x1c2f3e(0x435)};});function lr(){const _0x99ae57=a0_0x108f24;if(ms[_0x99ae57(0x231)]===0x0)return null;let _0x2c3a60=Math[_0x99ae57(0x391)](Math[_0x99ae57(0x243)]()*ms[_0x99ae57(0x231)]);return ms[_0x2c3a60];}function fs(_0x3ef18b){const _0x30a7f1=a0_0x108f24;return _0x3ef18b&&_0x3ef18b[_0x30a7f1(0x619)]&&_0x3ef18b[_0x30a7f1(0x5ba)]&&_0x3ef18b[_0x30a7f1(0x7fa)]&&_0x3ef18b['password'];}var yr=a0_0x108f24(0x4c3),Ss,oe=null,ur=null,We=null,po=0x3,go=null,wr=!0x1;async function ho(){const _0x1a3918=a0_0x108f24;let _0x33215e=await he[_0x1a3918(0x624)]();oe=_0x33215e?.[_0x1a3918(0x227)]??null,go=_0x33215e?.[_0x1a3918(0x525)]??null,yr=_0x33215e?.['connectedClient']??_0x1a3918(0x4c3),Ss=_0x33215e?.[_0x1a3918(0x709)]??Es??_0x1a3918(0x3a9),wr=_0x33215e?.[_0x1a3918(0x2c6)]??!0x1,console[_0x1a3918(0x472)]('CONFIGURAÇÃO\x20GERAL:'),console[_0x1a3918(0x472)](_0x33215e);}async function mo(){await ho();}mo();function _(_0x2e4b1f){const _0x50257c=a0_0x108f24;if(_0x2e4b1f[_0x50257c(0x2ce)]||_0x2e4b1f[_0x50257c(0x1e4)]){let _0x5dee05=_0x2e4b1f[_0x50257c(0x2ce)]?_0x2e4b1f[_0x50257c(0x2ce)][_0x50257c(0x58c)]:_0x2e4b1f[_0x50257c(0x1e4)]['message'];return(0x0,w[_0x50257c(0x698)])(_0x5dee05);}return _0x2e4b1f[_0x50257c(0x420)]?_0x50257c(0x420):_0x2e4b1f[_0x50257c(0x34c)]?'pollCreationMessageV2':_0x2e4b1f[_0x50257c(0x808)]?_0x50257c(0x808):(0x0,w[_0x50257c(0x698)])(_0x2e4b1f);}var dr={},fe=class c{constructor(_0x1df77c,_0x128b7e,_0x540fc9){const _0x5c5328=a0_0x108f24;this[_0x5c5328(0x62b)]=_0x1df77c,this[_0x5c5328(0x7ba)]=_0x128b7e,this['repository']=_0x540fc9,this['AutomateSystem']=null,this['logger']=new v(c[_0x5c5328(0x2ec)]),this[_0x5c5328(0x21a)]={},this[_0x5c5328(0x315)]={},this[_0x5c5328(0x59b)]={'state':_0x5c5328(0x4b6)},this[_0x5c5328(0x752)]=(0x0,P['join'])(se,'downloads'),this[_0x5c5328(0x49a)]=new bs[(_0x5c5328(0x543))](),this[_0x5c5328(0x4ac)]=new bs['default'](),this[_0x5c5328(0x442)]=!0x1,this[_0x5c5328(0x53d)]={'status.instance':_0x5c5328(0x21f),'qrcode.updated':_0x5c5328(0x5a4),'messages.upsert':_0x5c5328(0x37d),'messages.update':_0x5c5328(0x77d),'send.message':_0x5c5328(0x37d),'group.upsert':'/wa-groups','group.update':_0x5c5328(0x544),'group-participants.update':_0x5c5328(0x544),'connection.update':_0x5c5328(0x21f),'messages.set':_0x5c5328(0x37d),'contacts.set':_0x5c5328(0x51e),'contacts.upsert':_0x5c5328(0x51e),'contacts.update':_0x5c5328(0x51e),'presence.update':'/wa-presence','chats.set':_0x5c5328(0x262),'chats.update':_0x5c5328(0x262),'chats.upsert':_0x5c5328(0x262),'chats.delete':_0x5c5328(0x262)},this[_0x5c5328(0x328)]=0x0,this[_0x5c5328(0x266)]=[],this[_0x5c5328(0x2ed)]=0xf,this[_0x5c5328(0x773)]=0x7530,this[_0x5c5328(0x3a4)]=!0x1,this[_0x5c5328(0x679)]={'chats.upsert':async(_0x3553a9,_0x12099d)=>{const _0x3945ac=_0x5c5328;let _0x41c138=[];for await(let _0x45148b of _0x3553a9)_0x41c138[_0x3945ac(0x1d0)]({'_id':_0x45148b['id'],'owner':this[_0x3945ac(0x21a)][_0x3945ac(0x1fb)],'group':_0x45148b['id']['endsWith'](_0x3945ac(0x2c8)),'name':_0x45148b[_0x3945ac(0x2ec)]||_0x45148b[_0x3945ac(0x3f7)]||null,'contactname':null,'lastmsg':_0x45148b[_0x3945ac(0x501)]&&_0x45148b[_0x3945ac(0x501)][_0x3945ac(0x28f)]()['length']<0xd?_0x45148b[_0x3945ac(0x501)]*0x3e8:_0x45148b['conversationTimestamp']||null,'archived':_0x45148b[_0x3945ac(0x626)]||!0x1,'unreadcount':_0x45148b['unreadCount']||0x0});this['sendDataWebhook']('chats.upsert',_0x41c138);},'chats.update':async(_0x4e2410,_0x390829)=>{const _0x39f80e=_0x5c5328;for(let _0xc96dc2 of _0x4e2410){let _0x2ea9f6={'_id':_0xc96dc2['id'],'owner':this[_0x39f80e(0x21a)]['wuid'],'group':_0xc96dc2['id'][_0x39f80e(0x4d5)](_0x39f80e(0x2c8)),'name':_0xc96dc2[_0x39f80e(0x2ec)]||_0xc96dc2[_0x39f80e(0x3f7)],'archived':_0xc96dc2[_0x39f80e(0x626)],'ephemeralExpiration':_0xc96dc2[_0x39f80e(0x645)]},_0xbc3fac=!0x1,_0x245704={};_0x2ea9f6['archived']!=null&&(this[_0x39f80e(0x711)][_0x39f80e(0x5f3)](this['instanceName']+'\x20('+this[_0x39f80e(0x21a)]['wuid']+'):\x20teve\x20mudanças\x20chat.archived:\x20'+_0xc96dc2[_0x39f80e(0x626)]),_0xbc3fac=!0x0,_0x245704['archived']=_0xc96dc2[_0x39f80e(0x626)]),_0xc96dc2['name']!=null&&(this[_0x39f80e(0x711)]['verbose'](this[_0x39f80e(0x476)]+'\x20('+this['instance']['wuid']+_0x39f80e(0x5f0)+_0xc96dc2[_0x39f80e(0x2ec)]),_0xbc3fac=!0x0,_0x245704['name']=_0xc96dc2[_0x39f80e(0x2ec)]),_0xc96dc2[_0x39f80e(0x3f7)]!=null&&(this['logger'][_0x39f80e(0x5f3)](this['instanceName']+'\x20('+this[_0x39f80e(0x21a)]['wuid']+'):\x20teve\x20mudanças\x20chat.displayName:\x20'+_0xc96dc2[_0x39f80e(0x3f7)]),_0xbc3fac=!0x0,_0x245704[_0x39f80e(0x2ec)]=_0xc96dc2['displayName']),_0xc96dc2[_0x39f80e(0x645)]!=null&&(this[_0x39f80e(0x711)][_0x39f80e(0x5f3)](this[_0x39f80e(0x476)]+'\x20('+this['instance'][_0x39f80e(0x1fb)]+_0x39f80e(0x769)+_0xc96dc2[_0x39f80e(0x645)]),_0xbc3fac=!0x0,_0x245704[_0x39f80e(0x645)]=_0xc96dc2[_0x39f80e(0x645)]);let _0x542e5a;_0xbc3fac&&(_0x542e5a=await this[_0x39f80e(0x726)]['chat'][_0x39f80e(0x4c9)]({'where':{'_id':_0xc96dc2['id']}},_0x245704,this[_0x39f80e(0x21a)][_0x39f80e(0x1fb)])),_0x542e5a&&j(this[_0x39f80e(0x476)],_0x39f80e(0x4cc),{'chat':_0x542e5a});}},'chats.delete':async _0x12fc9e=>{const _0x13b77a=_0x5c5328;this[_0x13b77a(0x5e1)](_0x13b77a(0x6d8),[..._0x12fc9e]);}},this[_0x5c5328(0x781)]={'contacts.upsert':async(_0xdb4b01,_0x2e8399)=>{const _0x5a3f69=_0x5c5328;let _0x62a370=await this[_0x5a3f69(0x726)]['contact'][_0x5a3f69(0x731)]({'where':{}},this[_0x5a3f69(0x21a)][_0x5a3f69(0x1fb)]),_0x29cb31=[];for await(let _0x235bfb of _0xdb4b01)_0x62a370[_0x5a3f69(0x731)](_0x4758f3=>_0x4758f3[_0x5a3f69(0x5ee)]===_0x235bfb['id'])||_0x29cb31[_0x5a3f69(0x1d0)]({'_id':_0x235bfb['id'],'pushName':_0x235bfb?.[_0x5a3f69(0x2ec)]||_0x235bfb?.[_0x5a3f69(0x3f6)],'owner':this[_0x5a3f69(0x21a)]['wuid']});this[_0x5a3f69(0x5e1)](_0x5a3f69(0x642),_0x29cb31),await this[_0x5a3f69(0x726)][_0x5a3f69(0x46c)]['insert'](_0x29cb31);},'contacts.update':async(_0x559055,_0x2036ec)=>{const _0x18c3cf=_0x5c5328;let _0x3a5584=[];for await(let _0xcc3148 of _0x559055)_0x3a5584[_0x18c3cf(0x1d0)]({'_id':_0xcc3148['id'],'pushName':_0xcc3148?.[_0x18c3cf(0x2ec)]??_0xcc3148?.[_0x18c3cf(0x3f6)],'owner':this['instance'][_0x18c3cf(0x1fb)]});this[_0x18c3cf(0x5e1)]('contacts.update',_0x3a5584);}},this[_0x5c5328(0x599)]={'messaging-history.set':async({messages:_0x77ad27,chats:_0x2c9ae4,isLatest:_0x3a492d},_0x1cf7f1)=>{const _0x46d68f=_0x5c5328;if(_0x3a492d){let _0x50a3d8=await Promise[_0x46d68f(0x406)](_0x2c9ae4[_0x46d68f(0x49e)](async _0x2c9dfc=>({'_id':_0x2c9dfc['id'],'owner':this['instance']['wuid'],'group':_0x2c9dfc['id'][_0x46d68f(0x4d5)]('@g.us'),'name':_0x2c9dfc[_0x46d68f(0x2ec)]||_0x2c9dfc['displayName']||null,'contactname':null,'lastmsg':_0x2c9dfc[_0x46d68f(0x501)]&&_0x2c9dfc[_0x46d68f(0x501)]['toString']()[_0x46d68f(0x231)]<0xd?_0x2c9dfc[_0x46d68f(0x501)]*0x3e8:_0x2c9dfc[_0x46d68f(0x501)]||null,'archived':_0x2c9dfc[_0x46d68f(0x626)]||!0x1,'unreadcount':_0x2c9dfc[_0x46d68f(0x61d)]||0x0})));this['sendDataWebhook'](_0x46d68f(0x581),_0x50a3d8),await this[_0x46d68f(0x59a)](_0x50a3d8,_0x1cf7f1);}let _0x1f2769=[],_0x213440=Date[_0x46d68f(0x7e2)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x145fb3]of Object[_0x46d68f(0x218)](_0x77ad27)){if(_0x145fb3['message']?.[_0x46d68f(0x7ad)]||_0x145fb3['message']?.[_0x46d68f(0x620)]||!_0x145fb3[_0x46d68f(0x58c)]||_0x145fb3[_0x46d68f(0x662)][_0x46d68f(0x47b)]==='status@broadcast'||(ws[_0x46d68f(0x543)][_0x46d68f(0x639)](_0x145fb3?.[_0x46d68f(0x483)])&&(_0x145fb3['messageTimestamp']=_0x145fb3[_0x46d68f(0x483)]?.[_0x46d68f(0x569)]()),_0x145fb3['messageTimestamp']&&_0x145fb3['messageTimestamp'][_0x46d68f(0x28f)]()['length']<0xd&&(_0x145fb3[_0x46d68f(0x483)]=_0x145fb3[_0x46d68f(0x483)]*0x3e8),_0x145fb3[_0x46d68f(0x483)]<_0x213440))continue;let {message_normalized:_0x2b19a9}=this[_0x46d68f(0x779)](_0x145fb3[_0x46d68f(0x58c)],_(_0x145fb3[_0x46d68f(0x58c)]),null);Object[_0x46d68f(0x686)](_0x2b19a9)[_0x46d68f(0x231)]>0x0&&_0x1f2769[_0x46d68f(0x1d0)]({'_id':_0x145fb3[_0x46d68f(0x662)]['id'],'key':_0x145fb3[_0x46d68f(0x662)],'pushName':_0x145fb3[_0x46d68f(0x687)],'participant':_0x145fb3[_0x46d68f(0x783)],'message':{..._0x145fb3[_0x46d68f(0x58c)]},'messageType':_(_0x145fb3[_0x46d68f(0x58c)]),'message_normalized':{'key':_0x145fb3[_0x46d68f(0x662)],'pushName':_0x145fb3[_0x46d68f(0x687)],'messageTimestamp':_0x145fb3[_0x46d68f(0x483)],..._0x2b19a9},'messageTimestamp':_0x145fb3['messageTimestamp'],'owner':this[_0x46d68f(0x21a)]['wuid']});}_0x1cf7f1[_0x46d68f(0x22c)]&&_0x1f2769['length']>0x0&&(this[_0x46d68f(0x711)]['verbose'](this[_0x46d68f(0x476)]+'\x20('+this['instance'][_0x46d68f(0x1fb)]+_0x46d68f(0x719)+_0x1f2769[_0x46d68f(0x231)]+_0x46d68f(0x7b4)+this['instance'][_0x46d68f(0x1fb)]+'\x20inseridas\x20no\x20banco\x20de\x20dados...'),await this[_0x46d68f(0x726)]['message'][_0x46d68f(0x1d5)]([..._0x1f2769],this[_0x46d68f(0x21a)][_0x46d68f(0x1fb)])),this['sendDataWebhook'](_0x46d68f(0x32b),[..._0x1f2769]),_0x77ad27=void 0x0;},'messages.upsert':async({messages:_0x543560,type:_0x31f592},_0x22da11)=>{const _0x1c62c1=_0x5c5328;let _0x1ff156=_0x543560[0x0];if(_0x31f592!==_0x1c62c1(0x39d)||!_0x1ff156?.[_0x1c62c1(0x58c)]||_0x1ff156[_0x1c62c1(0x58c)]?.[_0x1c62c1(0x7ad)]||_0x1ff156[_0x1c62c1(0x58c)][_0x1c62c1(0x620)]||_0x1ff156['key'][_0x1c62c1(0x47b)]===_0x1c62c1(0x2c7))return;let _0x36c57e=null,_0x370ca3=null;try{_0x36c57e=await this['processPollUpdateMessage'](_0x1ff156),_0x370ca3=_0x36c57e?_0x36c57e[_0x1c62c1(0x631)](','):null;}catch(_0x4c45be){this[_0x1c62c1(0x711)][_0x1c62c1(0x5f3)](this[_0x1c62c1(0x476)]+'\x20('+this[_0x1c62c1(0x21a)]['wuid']+'):\x20'+(_0x4c45be instanceof Error?_0x4c45be['message']:JSON[_0x1c62c1(0x35b)](_0x4c45be,null,0x2))),_0x370ca3=_0x1c62c1(0x73a);}if(this['client']['sendPresenceUpdate'](_0x1c62c1(0x6e1)),ws['default'][_0x1c62c1(0x639)](_0x1ff156[_0x1c62c1(0x483)])&&(_0x1ff156[_0x1c62c1(0x483)]=_0x1ff156[_0x1c62c1(0x483)]?.['toNumber']()),this[_0x1c62c1(0x315)]?.[_0x1c62c1(0x6a6)]&&_0x1ff156[_0x1c62c1(0x662)][_0x1c62c1(0x47b)]['includes']('@g.us')){this[_0x1c62c1(0x711)][_0x1c62c1(0x5f3)]('group\x20ignored');return;}_0x1ff156[_0x1c62c1(0x483)]&&_0x1ff156[_0x1c62c1(0x483)]['toString']()[_0x1c62c1(0x231)]<0xd&&(_0x1ff156[_0x1c62c1(0x483)]=_0x1ff156['messageTimestamp']*0x3e8);let _0x2588f9=_0x1ff156[_0x1c62c1(0x58c)],{messageContent:_0x5ab28b,message_normalized:_0x596353}=this[_0x1c62c1(0x779)](_0x2588f9,_(_0x1ff156[_0x1c62c1(0x58c)]),_0x370ca3);_0x5ab28b||console[_0x1c62c1(0x2d9)](_0x1c62c1(0x7ef));let _0x11bdae={'_id':_0x1ff156[_0x1c62c1(0x662)]['id'],'key':_0x1ff156[_0x1c62c1(0x662)],'pushName':_0x1ff156[_0x1c62c1(0x687)],'message':{..._0x1ff156[_0x1c62c1(0x58c)]},'messageType':_(_0x1ff156['message']),'message_normalized':{'key':_0x1ff156[_0x1c62c1(0x662)],'pushName':_0x1ff156[_0x1c62c1(0x687)],'messageTimestamp':_0x1ff156[_0x1c62c1(0x483)],'source':(0x0,w[_0x1c62c1(0x5be)])(_0x1ff156[_0x1c62c1(0x662)]['id']),..._0x596353},'messageTimestamp':_0x1ff156['messageTimestamp'],'owner':this[_0x1c62c1(0x21a)][_0x1c62c1(0x1fb)]};this[_0x1c62c1(0x711)][_0x1c62c1(0x472)](_0x11bdae),await this[_0x1c62c1(0x726)]['message']['insert']([_0x11bdae],this[_0x1c62c1(0x21a)][_0x1c62c1(0x1fb)]),this['sendDataWebhook'](_0x1c62c1(0x4a2),_0x11bdae),j(this[_0x1c62c1(0x476)],_0x1c62c1(0x259),{'message':_0x11bdae}),_0x1ff156[_0x1c62c1(0x662)][_0x1c62c1(0x47b)]!==_0x1c62c1(0x2c7)&&await this[_0x1c62c1(0x58a)](_0x22da11,_0x11bdae,'MESSAGES_UPSERT');},'messages.update':async(_0x169323,_0x1a02f5)=>{const _0xd82de7=_0x5c5328;let _0x4129fc={0x0:_0xd82de7(0x482),0x1:_0xd82de7(0x677),0x2:_0xd82de7(0x7e5),0x3:_0xd82de7(0x2d1),0x4:_0xd82de7(0x494),0x5:_0xd82de7(0x690)};for await(let {key:_0x1e0746,update:_0x77fbe6}of _0x169323){if(this['localWebhook']?.[_0xd82de7(0x6a6)]&&_0x1e0746[_0xd82de7(0x47b)][_0xd82de7(0x3cd)](_0xd82de7(0x2c8))){this[_0xd82de7(0x711)][_0xd82de7(0x5f3)](_0xd82de7(0x510));return;}if(_0x1e0746['remoteJid']!==_0xd82de7(0x2c7)){let _0x50a74c=Date[_0xd82de7(0x7e2)](),_0x310629;_0x77fbe6[_0xd82de7(0x58c)]===null&&_0x77fbe6['status']===void 0x0?_0x310629=_0xd82de7(0x284):_0x310629=_0x4129fc[_0x77fbe6[_0xd82de7(0x60e)]];let _0x4c7111=_0x1e0746[_0xd82de7(0x47b)][_0xd82de7(0x6e4)](/:\d{1,2}@/g,'@'),_0x52d563={..._0x1e0746,'remoteJid':_0x4c7111,'status':_0x310629,'datetime':_0x50a74c,'owner':this[_0xd82de7(0x21a)][_0xd82de7(0x1fb)]};this[_0xd82de7(0x5e1)](_0xd82de7(0x712),_0x52d563),await this[_0xd82de7(0x25d)](_0x1e0746,_0x52d563);}}},'labels.association':async({type:_0x35d4d0,association:_0xbb3e45})=>{const _0x526234=_0x5c5328;if(_0xbb3e45[_0x526234(0x4bb)]===_0x526234(0x5a5))switch(_0x35d4d0){case _0x526234(0x7f9):console['log'](_0x526234(0x5b1)),console[_0x526234(0x472)](_0xbb3e45),await this[_0x526234(0x726)][_0x526234(0x1e1)]['updateOne']({'where':{'_id':_0xbb3e45[_0x526234(0x598)]}},{'labels':_0xbb3e45[_0x526234(0x2b0)]},this[_0x526234(0x21a)][_0x526234(0x1fb)],void 0x0,_0x526234(0x354));break;case _0x526234(0x33e):console['log'](_0x526234(0x370)),console[_0x526234(0x472)](_0xbb3e45),await this[_0x526234(0x726)][_0x526234(0x1e1)]['updateOne']({'where':{'_id':_0xbb3e45[_0x526234(0x598)]}},{'labels':_0xbb3e45[_0x526234(0x2b0)]},this[_0x526234(0x21a)][_0x526234(0x1fb)],void 0x0,_0x526234(0x5fd));break;default:console[_0x526234(0x2d9)]('unknown\x20operation\x20type\x20['+_0x35d4d0+']');}},'labels.edit':async _0x1572a5=>{const _0x27f161=_0x5c5328;if(!_0x1572a5||!_0x1572a5['id']){console[_0x27f161(0x2d9)](_0x27f161(0x235));return;}let _0x178d0b={'_id':_0x1572a5['id'],'color':_0x1572a5?.[_0x27f161(0x267)],'name':_0x1572a5?.['name'],'owner':this['instance']['wuid']};await this[_0x27f161(0x726)][_0x27f161(0x651)]['updateOne']({'where':{'_id':_0x1572a5['id']}},_0x178d0b,this[_0x27f161(0x21a)][_0x27f161(0x1fb)]),console['log'](_0x27f161(0x807),_0x1572a5),_0x1572a5['deleted']&&(await this['repository'][_0x27f161(0x651)]['delete']({'where':{'_id':_0x1572a5['id']}},this['instance']['wuid']),console[_0x27f161(0x472)](_0x27f161(0x3f0),_0x1572a5['id']));}},this[_0x5c5328(0x70e)]={'groups.upsert':_0x30f8b2=>{const _0x5892d4=_0x5c5328;this[_0x5892d4(0x5e1)](_0x5892d4(0x75d),_0x30f8b2);},'groups.update':_0x4e3642=>{const _0x3788a8=_0x5c5328;this[_0x3788a8(0x5e1)]('groups.update',_0x4e3642);},'group-participants.update':_0x30368c=>{const _0x1908f1=_0x5c5328;this[_0x1908f1(0x5e1)](_0x1908f1(0x403),_0x30368c);}},this[_0x5c5328(0x730)]=async _0x472f69=>{const _0x543d52=_0x5c5328;if(_0x472f69[_0x543d52(0x58c)]?.[_0x543d52(0x715)]){let _0x2054ea=await this[_0x543d52(0x339)](_0x472f69[_0x543d52(0x58c)][_0x543d52(0x715)][_0x543d52(0x3c2)],!0x0);if(_0x2054ea){let _0x892568=_0x2054ea['key']['fromMe']?this['instance']['wuid']+'@s.whatsapp.net':_0x2054ea[_0x543d52(0x662)]['participant']||_0x2054ea['key'][_0x543d52(0x47b)],_0x55c186=_0x2054ea['key']['id'],_0x4c7ed8=_0x2054ea['message'],_0x4cdee5=Buffer[_0x543d52(0x446)](_0x4c7ed8['messageContextInfo'][_0x543d52(0x439)][_0x543d52(0x28f)](_0x543d52(0x5b2)),'hex'),_0x5161f6=(0x0,w['decryptPollVote'])(_0x472f69[_0x543d52(0x58c)][_0x543d52(0x715)][_0x543d52(0x78b)],{'pollCreatorJid':_0x892568,'pollMsgId':_0x55c186,'pollEncKey':_0x4cdee5,'voterJid':_0x472f69[_0x543d52(0x662)][_0x543d52(0x310)]?this[_0x543d52(0x21a)][_0x543d52(0x1fb)]+'@s.whatsapp.net':_0x472f69[_0x543d52(0x662)][_0x543d52(0x47b)][_0x543d52(0x4d5)]('g.us')?_0x472f69[_0x543d52(0x662)][_0x543d52(0x783)]:_0x472f69[_0x543d52(0x662)]['remoteJid']}),_0x4e596d=[],_0x3d45d1=_0x5161f6[_0x543d52(0x486)][_0x543d52(0x49e)](_0x36e485=>Buffer[_0x543d52(0x446)](_0x36e485)[_0x543d52(0x28f)](_0x543d52(0x5b2)));for(let {optionName:_0x44d38b}of _0x4c7ed8[_0x543d52(0x55e)]?.[_0x543d52(0x797)]||_0x4c7ed8[_0x543d52(0x420)]?.[_0x543d52(0x797)]||_0x4c7ed8[_0x543d52(0x34c)]?.[_0x543d52(0x797)])_0x3d45d1[_0x543d52(0x3cb)]((0x0,w[_0x543d52(0x53f)])(Buffer[_0x543d52(0x446)](_0x44d38b))['toString'](_0x543d52(0x5b2)))>-0x1&&_0x4e596d[_0x543d52(0x1d0)](_0x44d38b);return _0x4e596d;}}return null;},this[_0x5c5328(0x779)]=(_0x2dfea5,_0x346e37,_0x522dd7)=>{const _0x50537c=_0x5c5328;try{let _0x2f57b4=_0x346e37?_0x2dfea5[_0x346e37]:void 0x0,_0x48cc4f={},_0x982b4d=null,_0x2e2038=null,_0x5dc8a5=null;if(_0x2dfea5[_0x50537c(0x1e4)]?(_0x346e37=_(_0x2dfea5[_0x50537c(0x1e4)][_0x50537c(0x58c)]),_0x2f57b4=_0x2dfea5[_0x50537c(0x1e4)]['message'][_0x346e37]):_0x2dfea5[_0x50537c(0x808)]?(_0x346e37=_(_0x2dfea5[_0x50537c(0x808)][_0x50537c(0x58c)]),_0x2f57b4=_0x2dfea5['viewOnceMessageV2Extension'][_0x50537c(0x58c)][_0x346e37]):_0x2dfea5[_0x50537c(0x2ce)]?(_0x346e37=_(_0x2dfea5['viewOnceMessage'][_0x50537c(0x58c)]),_0x2f57b4=_0x2dfea5[_0x50537c(0x2ce)][_0x50537c(0x58c)][_0x346e37]):_0x2dfea5['ephemeralMessage']?(_0x346e37=_(_0x2dfea5[_0x50537c(0x58c)][_0x50537c(0x244)]['message']),_0x2f57b4=_0x2dfea5[_0x50537c(0x58c)][_0x50537c(0x244)]['message'][_0x346e37]):_0x2dfea5[_0x50537c(0x2e7)]?.[_0x50537c(0x58c)]?.[_0x50537c(0x7ad)]?.[_0x50537c(0x2e7)]?(_0x346e37=_(_0x2dfea5[_0x50537c(0x2e7)][_0x50537c(0x58c)][_0x50537c(0x7ad)][_0x50537c(0x2e7)]),_0x982b4d=_0x2dfea5[_0x50537c(0x2e7)]['message'][_0x50537c(0x7ad)][_0x50537c(0x662)]['id'],_0x2f57b4=_0x2dfea5['editedMessage'][_0x50537c(0x58c)][_0x50537c(0x7ad)][_0x50537c(0x2e7)][_0x346e37]):_0x2f57b4=_0x2dfea5[_0x346e37],!_0x346e37||!_0x2f57b4)return console[_0x50537c(0x2d9)](_0x50537c(0x806),_0x2dfea5),{'messageType':_0x346e37,'messageContent':_0x2f57b4,'message_normalized':{}};_0x2dfea5[_0x346e37]?.['contextInfo']?.[_0x50537c(0x6eb)]&&_0x2dfea5[_0x346e37]?.[_0x50537c(0x6e7)]?.['quotedMessage']&&(_0x2e2038=_0x2dfea5[_0x346e37]['contextInfo'][_0x50537c(0x6eb)]),_0x2dfea5[_0x50537c(0x4a9)]&&(_0x5dc8a5=_0x2dfea5[_0x50537c(0x4a9)][_0x50537c(0x662)]['id']);let _0x26e4b7;if(_0x2f57b4&&typeof _0x2f57b4==_0x50537c(0x252)&&_0x50537c(0x3c2)in _0x2f57b4&&({pollCreationMessageKey:_0x26e4b7}=_0x2f57b4),_0x346e37==='documentWithCaptionMessage'){let _0x195800=_0x2f57b4?.[_0x50537c(0x58c)]?.[_0x50537c(0x31c)];_0x195800&&(_0x2f57b4=_0x195800);}if(_0x346e37===_0x50537c(0x55e)||_0x346e37==='pollCreationMessageV2'||_0x346e37===_0x50537c(0x420)){let _0x24b50c=_0x2f57b4[_0x50537c(0x797)]['map'](_0x141d4b=>_0x141d4b[_0x50537c(0x38f)])[_0x50537c(0x631)]('|');_0x48cc4f[_0x50537c(0x292)]=_0x24b50c;}let _0x34437e=_0x2f57b4[_0x50537c(0x2ec)]||_0x2f57b4[_0x50537c(0x50b)]||_0x2f57b4[_0x50537c(0x2eb)]||_0x2f57b4[_0x50537c(0x3f7)];if(_0x346e37==='listMessage'){_0x34437e=(_0x2f57b4['title']||'')+'\x0a'+(_0x2f57b4[_0x50537c(0x5a8)]||'')+'\x0a'+(_0x2f57b4[_0x50537c(0x394)]||'');let _0x48cb75=this[_0x50537c(0x615)](_0x2f57b4['sections']);_0x48cc4f['convertedOptions']=_0x48cb75;}if(_0x346e37===_0x50537c(0x20a)&&(_0x522dd7=_0x2f57b4[_0x50537c(0x408)]),_0x2f57b4[_0x50537c(0x37a)]){let _0x1f0ec9=this['formatVCard'](JSON[_0x50537c(0x35b)](_0x2f57b4[_0x50537c(0x37a)],null,0x2));_0x34437e=_0x34437e+'\x0a'+_0x1f0ec9;}if(_0x2f57b4){let {sections:_0x9305d4,listType:_0xe77dc6,displayName:_0x398ad6,vcard:_0x24f2a6,contactVcard:_0x33df65,name:_0x3b9b5d,caption:_0x1cd0a5,conversation:_0x175e1b,pollCreationMessageKey:_0x15b7f4,footerText:_0x15627e,contentText:_0x2bb3e8,pageCount:_0x4a3471,headerType:_0x37af67,isAvatar:_0x510c31,isAnimated:_0x523094,fallbackLc:_0x4c7b36,fallbackLg:_0x496e55,namespace:_0x1bf224,elementName:_0x4294e6,localizableParams:_0xa7a14a,viewOnce:_0xbb2337,height:_0x5ae113,width:_0x575a80,key:_0x3a223f,firstScanLength:_0x2799dd,firstScanSidecar:_0x2f05f8,gifPlayback:_0x5b2598,gifAttribution:_0x3db5b5,midQualityFileSha256:_0x156002,scansSidecar:_0x46e017,streamingSidecar:_0x23d1c6,thumbnailHeight:_0x5e6c27,thumbnailWidth:_0x431921,thumbnailEncSha256:_0x9464d2,thumbnailDirectPath:_0x1a5c93,canonicalUrl:_0x33d631,matchedText:_0x36f957,previewType:_0x5ce45b,thumbnailSha256:_0x3fb66d,deviceListMetadataVersion:_0x392db3,inviteLinkGroupTypeV2:_0x212ddd,interactiveAnnotations:_0xf5b121,scanLengths:_0x4dba8c,jpegThumbnail:_0x46f87e,url:_0x126bbb,mediaKeyTimestamp:_0x4fb877,waveform:_0x535349,stickerSentTs:_0x1fa93e,firstFrameLength:_0x3f55b6,fileEncSha256:_0x27c6ea,contextInfo:_0x4e815b,firstFrameSidecar:_0x117001,directPath:_0x55f538,fileSha256:_0x163ce1,mediaKey:_0x1550ad,senderTimestampMs:_0x248509,..._0x1743a1}=_0x2f57b4;(_0x346e37===_0x50537c(0x7cf)||_0x346e37==='listResponseMessage')&&(delete _0x1743a1['title'],delete _0x1743a1[_0x50537c(0x5a8)]),typeof _0x2f57b4==_0x50537c(0x473)?_0x48cc4f={'text':_0x2f57b4,'type':_0x346e37||_0x50537c(0x2eb),..._0x982b4d&&{'edited':_0x982b4d},..._0x2e2038&&{'quoted':_0x2e2038},..._0x5dc8a5&&{'reaction':_0x5dc8a5}}:_0x48cc4f={'text':_0x34437e,..._0x1743a1,..._0x346e37==='pollUpdateMessage'?{'poll_id':_0x2f57b4[_0x50537c(0x3c2)]['id'],'quoted':_0x2f57b4[_0x50537c(0x3c2)]['id'],'vote':_0x522dd7}:{},..._0x346e37==='listResponseMessage'?{'vote':_0x522dd7}:{},'type':_0x346e37,..._0x982b4d&&{'edited':_0x982b4d},..._0x2e2038&&{'quoted':_0x2e2038},..._0x5dc8a5&&{'reaction':_0x5dc8a5},...(_0x346e37===_0x50537c(0x55e)||_0x346e37==='pollCreationMessageV2'||_0x346e37===_0x50537c(0x420)||_0x346e37===_0x50537c(0x7cf))&&{'convertedOptions':_0x48cc4f[_0x50537c(0x292)]}};}return{'messageType':_0x346e37,'messageContent':_0x2f57b4,'message_normalized':_0x48cc4f};}catch(_0x50d59b){console['error'](_0x50537c(0x317),_0x50d59b);}},this[_0x5c5328(0x700)]=null,this['lastSend']=0x0,this[_0x5c5328(0x60b)]=null,(this[_0x5c5328(0x497)](),this[_0x5c5328(0x21a)][_0x5c5328(0x652)]={'count':0x0});}set[a0_0x108f24(0x476)](_0x49441a){const _0x5ede2e=a0_0x108f24;if(!_0x49441a){this[_0x5ede2e(0x21a)][_0x5ede2e(0x2ec)]=(0x0,gr['v4'])();return;}this['instance'][_0x5ede2e(0x2ec)]=_0x49441a,this[_0x5ede2e(0x5e1)]('status.instance',{'instance':this[_0x5ede2e(0x21a)]['name'],'status':_0x5ede2e(0x720)});}get[a0_0x108f24(0x476)](){const _0x5affb2=a0_0x108f24;return this[_0x5affb2(0x21a)][_0x5affb2(0x2ec)];}get['wuid'](){const _0x333146=a0_0x108f24;return this[_0x333146(0x21a)][_0x333146(0x1fb)];}async[a0_0x108f24(0x465)](){const _0x3915b2=a0_0x108f24;let _0x5bda15=this[_0x3915b2(0x3d0)][_0x3915b2(0x1d1)]?.[_0x3915b2(0x2ec)]??this['client'][_0x3915b2(0x1d1)]?.[_0x3915b2(0x3f6)];if(!_0x5bda15){if(this[_0x3915b2(0x62b)][_0x3915b2(0x602)](_0x3915b2(0x398))[_0x3915b2(0x22c)]){let _0x3728da=await N[_0x3915b2(0x5b9)]()['db'](this['configService'][_0x3915b2(0x602)](_0x3915b2(0x398))[_0x3915b2(0x46e)][_0x3915b2(0x55a)]+_0x3915b2(0x61a))['collection'](this[_0x3915b2(0x476)])[_0x3915b2(0x624)]({'_id':_0x3915b2(0x749)});if(_0x3728da){let _0x18eab1=JSON[_0x3915b2(0x6aa)](JSON[_0x3915b2(0x35b)](_0x3728da),w[_0x3915b2(0x65e)][_0x3915b2(0x7bc)]);_0x5bda15=_0x18eab1['me']?.[_0x3915b2(0x2ec)]||_0x18eab1['me']?.[_0x3915b2(0x3f6)];}}else{if((0x0,Ee[_0x3915b2(0x470)])((0x0,P[_0x3915b2(0x631)])(de,this[_0x3915b2(0x476)],_0x3915b2(0x7de)))){let _0xe8c2a7=JSON[_0x3915b2(0x6aa)]((0x0,Ee['readFileSync'])((0x0,P[_0x3915b2(0x631)])(de,this['instanceName'],'creds.json'),{'encoding':_0x3915b2(0x229)}));_0x5bda15=_0xe8c2a7['me']?.[_0x3915b2(0x2ec)]||_0xe8c2a7['me']?.[_0x3915b2(0x3f6)];}}}return _0x5bda15;}get[a0_0x108f24(0x7d9)](){const _0x4f1f01=a0_0x108f24;return this[_0x4f1f01(0x21a)][_0x4f1f01(0x7d9)];}get[a0_0x108f24(0x65d)](){const _0x38895b=a0_0x108f24;return{'pairingCode':this[_0x38895b(0x21a)][_0x38895b(0x652)]?.[_0x38895b(0x524)],'code':this[_0x38895b(0x21a)][_0x38895b(0x652)]?.['code'],'base64':this[_0x38895b(0x21a)][_0x38895b(0x652)]?.[_0x38895b(0x54a)]};}async[a0_0x108f24(0x573)](){const _0x496343=a0_0x108f24;let _0x38c08b=await this[_0x496343(0x726)][_0x496343(0x2f1)]['find'](this['instanceName']);this['localWebhook'][_0x496343(0x62a)]=_0x38c08b?.[_0x496343(0x62a)],this[_0x496343(0x315)][_0x496343(0x7dc)]=_0x38c08b?.[_0x496343(0x7dc)],this[_0x496343(0x315)]['local_map']=_0x38c08b?.[_0x496343(0x1fa)],this[_0x496343(0x315)][_0x496343(0x4aa)]=_0x38c08b?.[_0x496343(0x4aa)],this[_0x496343(0x315)]['QRCODE_UPDATED']=_0x38c08b?.[_0x496343(0x50c)],this[_0x496343(0x315)][_0x496343(0x311)]=_0x38c08b?.[_0x496343(0x311)],this[_0x496343(0x315)][_0x496343(0x634)]=_0x38c08b?.['MESSAGES_UPSERT'],this[_0x496343(0x315)]['MESSAGES_UPDATE']=_0x38c08b?.[_0x496343(0x382)],this[_0x496343(0x315)][_0x496343(0x367)]=_0x38c08b?.[_0x496343(0x367)],this[_0x496343(0x315)]['GROUPS_UPDATE']=_0x38c08b?.['GROUPS_UPDATE'],this[_0x496343(0x315)][_0x496343(0x45a)]=_0x38c08b?.[_0x496343(0x45a)],this[_0x496343(0x315)][_0x496343(0x39e)]=_0x38c08b?.['CHATS_SET'],this['localWebhook'][_0x496343(0x621)]=_0x38c08b?.[_0x496343(0x621)],this[_0x496343(0x315)][_0x496343(0x5a0)]=_0x38c08b?.[_0x496343(0x5a0)],this[_0x496343(0x315)][_0x496343(0x2fc)]=_0x38c08b?.[_0x496343(0x2fc)],this[_0x496343(0x315)][_0x496343(0x3aa)]=_0x38c08b?.[_0x496343(0x3aa)],this['localWebhook'][_0x496343(0x299)]=_0x38c08b?.['CONTACTS_UPSERT'],this[_0x496343(0x315)]['CONTACTS_UPDATE']=_0x38c08b?.[_0x496343(0x56b)],this[_0x496343(0x315)]['PRESENCE_UPDATE']=_0x38c08b?.[_0x496343(0x21b)],this['localWebhook']['MESSAGES_SET']=_0x38c08b?.[_0x496343(0x2db)],this['localWebhook']['CONNECTION_UPDATE']=_0x38c08b?.['CONNECTION_UPDATE'],this[_0x496343(0x315)][_0x496343(0x6a6)]=_0x38c08b?.[_0x496343(0x6a6)];}async['setWebhook'](_0x1435d1){const _0x34d0d3=a0_0x108f24;let _0x499b08=[_0x34d0d3(0x5ee),_0x34d0d3(0x62a),'enabled',_0x34d0d3(0x1fa),_0x34d0d3(0x4aa),_0x34d0d3(0x50c),_0x34d0d3(0x382),_0x34d0d3(0x634),_0x34d0d3(0x311),'GROUPS_UPSERT',_0x34d0d3(0x42a),_0x34d0d3(0x45a),_0x34d0d3(0x39e),'CHATS_UPSERT','CHATS_UPDATE',_0x34d0d3(0x2fc),'CONTACTS_SET',_0x34d0d3(0x299),_0x34d0d3(0x56b),_0x34d0d3(0x21b),_0x34d0d3(0x2db),_0x34d0d3(0x4a3),_0x34d0d3(0x6a6)],_0x25c259={};return _0x499b08[_0x34d0d3(0x2ab)](_0x9c89ec=>{_0x1435d1[_0x9c89ec]!==void 0x0&&(_0x25c259[_0x9c89ec]=_0x1435d1[_0x9c89ec]);}),await this[_0x34d0d3(0x726)][_0x34d0d3(0x2f1)][_0x34d0d3(0x265)](_0x25c259,this[_0x34d0d3(0x476)]),Object['assign'](this['localWebhook'],_0x25c259),await this[_0x34d0d3(0x726)][_0x34d0d3(0x2f1)][_0x34d0d3(0x731)](this['instanceName']);}async[a0_0x108f24(0x5bd)](){const _0x49ae30=a0_0x108f24;return await this['repository']['webhook']['find'](this[_0x49ae30(0x476)]);}async[a0_0x108f24(0x5e1)](_0x85c814,_0xf89b6a){const _0x242c51=a0_0x108f24;let _0x446ce0=_0x85c814[_0x242c51(0x6e4)](/[\.-]/gm,'_')['toUpperCase'](),_0x36aa18=this[_0x242c51(0x315)]['enabled']&&(0x0,$[_0x242c51(0x444)])(this[_0x242c51(0x315)][_0x242c51(0x62a)])?this[_0x242c51(0x315)][_0x242c51(0x62a)]+(this[_0x242c51(0x315)]['local_map']?this[_0x242c51(0x53d)][_0x85c814]:''):null,_0x5e58d5=this[_0x242c51(0x315)][_0x446ce0],_0x1e8e76=oe&&oe[_0x242c51(0x7dc)]&&(0x0,$[_0x242c51(0x444)])(oe[_0x242c51(0x62a)])?oe['url']+(oe[_0x242c51(0x1fa)]?this[_0x242c51(0x53d)][_0x85c814]:''):null,_0x31d5a1=oe?oe[_0x446ce0]:null;if(_0x5e58d5&&_0x36aa18)try{await te[_0x242c51(0x543)][_0x242c51(0x265)]({'baseURL':_0x36aa18})[_0x242c51(0x38e)]('',{'event':_0x85c814,'instance':this[_0x242c51(0x21a)][_0x242c51(0x2ec)],'data':_0xf89b6a}),this[_0x242c51(0x711)]['log'](_0x242c51(0x5ae)+_0x85c814+':\x20'+_0x36aa18);}catch(_0x378469){this[_0x242c51(0x711)]['error'](this[_0x242c51(0x476)]+'\x20('+this[_0x242c51(0x21a)][_0x242c51(0x1fb)]+_0x242c51(0x719)+{'local':c[_0x242c51(0x2ec)]+_0x242c51(0x5b8),'message':_0x378469?.[_0x242c51(0x58c)],'hostName':_0x378469?.[_0x242c51(0x51f)],'syscall':_0x378469?.[_0x242c51(0x56f)],'code':_0x378469?.[_0x242c51(0x78a)],'error':_0x378469?.[_0x242c51(0x753)],'stack':_0x378469?.[_0x242c51(0x2b5)],'name':_0x378469?.['name']});}if(_0x31d5a1&&_0x1e8e76)try{await te['default']['create']({'baseURL':_0x1e8e76})[_0x242c51(0x38e)]('',{'event':_0x85c814,'instance':this[_0x242c51(0x21a)]['name'],'data':_0xf89b6a}),this[_0x242c51(0x711)][_0x242c51(0x472)](_0x242c51(0x4f8)+_0x85c814+':\x20'+_0x1e8e76);}catch(_0xce7149){this[_0x242c51(0x711)][_0x242c51(0x2d9)](this[_0x242c51(0x476)]+'\x20('+this[_0x242c51(0x21a)][_0x242c51(0x1fb)]+'):\x20'+{'local':c['name']+_0x242c51(0x6b5),'message':_0xce7149?.['message'],'hostName':_0xce7149?.[_0x242c51(0x51f)],'syscall':_0xce7149?.[_0x242c51(0x56f)],'code':_0xce7149?.[_0x242c51(0x78a)],'error':_0xce7149?.[_0x242c51(0x753)],'stack':_0xce7149?.[_0x242c51(0x2b5)],'name':_0xce7149?.[_0x242c51(0x2ec)]});}}async[a0_0x108f24(0x6ac)]({qr:_0x163e8b,connection:_0x388b4a,lastDisconnect:_0x527f5b}){const _0x2cfbfb=a0_0x108f24;if(_0x163e8b){if(this['instance'][_0x2cfbfb(0x652)][_0x2cfbfb(0x738)]===po)return this[_0x2cfbfb(0x5e1)](_0x2cfbfb(0x2a2),{'message':_0x2cfbfb(0x289),'statusCode':w[_0x2cfbfb(0x3d7)][_0x2cfbfb(0x778)]}),this[_0x2cfbfb(0x59b)]={'state':_0x2cfbfb(0x3a3),'statusReason':w['DisconnectReason'][_0x2cfbfb(0x1c5)]},this[_0x2cfbfb(0x5e1)](_0x2cfbfb(0x5a9),{'instance':this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x2ec)],...this['stateConnection']}),this[_0x2cfbfb(0x5e1)]('status.instance',{'instance':this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x2ec)],'status':'removed'}),this[_0x2cfbfb(0x726)][_0x2cfbfb(0x681)][_0x2cfbfb(0x265)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x2cfbfb(0x7e2)]()},this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x2ec)]),this['endSession']=!0x0,this[_0x2cfbfb(0x7ba)][_0x2cfbfb(0x6db)]('no.connection',this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x2ec)]);this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x652)][_0x2cfbfb(0x738)]++;let _0x3656a3={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x2cfbfb(0x757),'dark':_0x2cfbfb(0x366)}};hr[_0x2cfbfb(0x543)][_0x2cfbfb(0x55d)](_0x163e8b,_0x3656a3,(_0x12e5d6,_0x1bb575)=>{const _0x56cdb8=_0x2cfbfb;if(_0x12e5d6){this[_0x56cdb8(0x711)][_0x56cdb8(0x2d9)](this[_0x56cdb8(0x476)]+'\x20('+this[_0x56cdb8(0x21a)]['wuid']+_0x56cdb8(0x666)+(_0x12e5d6 instanceof Error?_0x12e5d6['message']:JSON['stringify'](_0x12e5d6,null,0x2)));return;}this[_0x56cdb8(0x21a)][_0x56cdb8(0x652)][_0x56cdb8(0x54a)]=_0x1bb575,this['instance']['qrcode'][_0x56cdb8(0x78a)]=_0x163e8b,this[_0x56cdb8(0x5e1)]('qrcode.updated',{'qrcode':{'instance':this[_0x56cdb8(0x21a)][_0x56cdb8(0x2ec)],'pairingCode':this['instance']['qrcode'][_0x56cdb8(0x524)],'code':_0x163e8b,'base64':_0x1bb575}});}),this[_0x2cfbfb(0x2d4)]?this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x652)][_0x2cfbfb(0x524)]=await this['client'][_0x2cfbfb(0x6a9)](this[_0x2cfbfb(0x2d4)]):this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x652)]['pairingCode']=null,mr[_0x2cfbfb(0x543)]['generate'](_0x163e8b,{'small':!0x0},_0x92ebf8=>this[_0x2cfbfb(0x711)]['log']('\x0a{\x20instance:\x20'+this[_0x2cfbfb(0x21a)]['name']+_0x2cfbfb(0x3dc)+this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x652)][_0x2cfbfb(0x738)]+_0x2cfbfb(0x798)+this['instance'][_0x2cfbfb(0x652)][_0x2cfbfb(0x524)]+_0x2cfbfb(0x29d)+_0x92ebf8));}if(_0x388b4a&&(this['stateConnection']={'state':_0x388b4a,'statusReason':_0x527f5b?.['error']?.[_0x2cfbfb(0x548)]?.[_0x2cfbfb(0x740)]??0xc8},this['sendDataWebhook'](_0x2cfbfb(0x5a9),{'instance':this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x2ec)],...this[_0x2cfbfb(0x59b)]})),_0x388b4a===_0x2cfbfb(0x4b6)){if(this[_0x2cfbfb(0x328)]++,this[_0x2cfbfb(0x266)][_0x2cfbfb(0x1d0)](Date[_0x2cfbfb(0x7e2)]()),this[_0x2cfbfb(0x266)]=this[_0x2cfbfb(0x266)]['filter'](_0x3cdb56=>Date[_0x2cfbfb(0x7e2)]()-_0x3cdb56<this[_0x2cfbfb(0x773)]),_0x527f5b[_0x2cfbfb(0x2d9)]?.['output']?.[_0x2cfbfb(0x740)]!==w[_0x2cfbfb(0x3d7)][_0x2cfbfb(0x4af)]&&this[_0x2cfbfb(0x266)][_0x2cfbfb(0x231)]<=this[_0x2cfbfb(0x2ed)])await this[_0x2cfbfb(0x471)]();else{this[_0x2cfbfb(0x5e1)](_0x2cfbfb(0x7f7),{'instance':this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x2ec)],'status':_0x2cfbfb(0x4b5)}),this['isConnected']=!0x1,this[_0x2cfbfb(0x726)]['webhook'][_0x2cfbfb(0x714)](this[_0x2cfbfb(0x476)]),this[_0x2cfbfb(0x726)]['auth']['create']({'owner':'','online':!0x1,'lastDisconnect':Date[_0x2cfbfb(0x7e2)]()},this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x2ec)]);try{this[_0x2cfbfb(0x711)][_0x2cfbfb(0x5f3)](this[_0x2cfbfb(0x476)]+'\x20('+this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x1fb)]+'):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...');let _0x32ecc0=await this['repository'][_0x2cfbfb(0x58c)][_0x2cfbfb(0x358)](this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x1fb)]);_0x32ecc0['success']?this[_0x2cfbfb(0x711)]['verbose'](this[_0x2cfbfb(0x476)]+'\x20('+this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x1fb)]+'):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.'):console[_0x2cfbfb(0x2d9)](_0x2cfbfb(0x287),_0x32ecc0['error']);}catch(_0x21a805){console['error'](_0x2cfbfb(0x441),_0x21a805);}this[_0x2cfbfb(0x35c)]!==null&&(this[_0x2cfbfb(0x711)][_0x2cfbfb(0x5f3)](this[_0x2cfbfb(0x476)]+'\x20('+this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x1fb)]+_0x2cfbfb(0x438)),clearInterval(this[_0x2cfbfb(0x35c)]),this[_0x2cfbfb(0x35c)]=null),this[_0x2cfbfb(0x711)]['verbose'](this[_0x2cfbfb(0x476)]+'\x20('+this['instance'][_0x2cfbfb(0x1fb)]+_0x2cfbfb(0x3bf)),this[_0x2cfbfb(0x3e5)]=null,this[_0x2cfbfb(0x7ba)][_0x2cfbfb(0x6db)](_0x2cfbfb(0x4bd),this['instance'][_0x2cfbfb(0x2ec)],_0x2cfbfb(0x5b3)),this[_0x2cfbfb(0x3d0)]?.['ws']?.[_0x2cfbfb(0x4b6)](),this[_0x2cfbfb(0x3d0)][_0x2cfbfb(0x4a4)](new Error(_0x2cfbfb(0x7fd)));}}if(_0x388b4a===_0x2cfbfb(0x691)){this[_0x2cfbfb(0x7d8)],this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x1fb)]=this[_0x2cfbfb(0x3d0)][_0x2cfbfb(0x1d1)]['id'][_0x2cfbfb(0x6e4)](/:\d+/,'')[_0x2cfbfb(0x6e4)](_0x2cfbfb(0x33c),''),this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x7d9)]=(await this[_0x2cfbfb(0x336)](this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x1fb)]+_0x2cfbfb(0x33c)))['profilePictureUrl'],this['repository'][_0x2cfbfb(0x681)]['create']({'online':!0x0,'owner':this[_0x2cfbfb(0x21a)]['wuid'],'lastDisconnect':null},this['instance']['name']);let _0x3ddb07=_0x2cfbfb(0x36f)+this['instance'][_0x2cfbfb(0x1fb)],_0x49038c=0x28,_0x406e89=Math[_0x2cfbfb(0x391)]((_0x49038c-_0x3ddb07['length'])/0x2),_0x5d40d7='\x20'[_0x2cfbfb(0x392)](_0x406e89),_0x251da3=_0x2cfbfb(0x34b),_0x41629d=_0x2cfbfb(0x50e)+this[_0x2cfbfb(0x21a)][_0x2cfbfb(0x2ec)],_0x4bcdd5=(''+_0x5d40d7+_0x3ddb07+_0x5d40d7)[_0x2cfbfb(0x404)](_0x49038c,'\x20'),_0x12abce=(''+_0x5d40d7+_0x251da3+_0x5d40d7)[_0x2cfbfb(0x404)](_0x49038c,'\x20'),_0x2a681d=(''+_0x5d40d7+_0x41629d+_0x5d40d7)[_0x2cfbfb(0x404)](_0x49038c,'\x20'),_0x2e02f7=Math[_0x2cfbfb(0x304)](_0x4bcdd5['length'],_0x12abce[_0x2cfbfb(0x231)],_0x2a681d[_0x2cfbfb(0x231)]),_0x5875eb=_0x4bcdd5[_0x2cfbfb(0x404)](_0x2e02f7,'\x20'),_0x31fdb0=_0x12abce[_0x2cfbfb(0x404)](_0x2e02f7,'\x20'),_0x199501=_0x2a681d[_0x2cfbfb(0x404)](_0x2e02f7,'\x20');this[_0x2cfbfb(0x711)][_0x2cfbfb(0x7a9)](('\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌'+'─'[_0x2cfbfb(0x392)](_0x2e02f7)+_0x2cfbfb(0x2d0)+_0x31fdb0+_0x2cfbfb(0x563)+_0x199501+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0x5875eb+_0x2cfbfb(0x2fe)+'─'[_0x2cfbfb(0x392)](_0x2e02f7)+'┘')[_0x2cfbfb(0x6e4)](/^ +/gm,'\x20\x20')),this['AutomateFunctions'](),this[_0x2cfbfb(0x1ff)]=!0x0;}}['resetReconnectionVariables'](){this['reconnectAttempts']=0x0,this['reconnectTimestamps']=[];}async['getMessage'](_0x2684cd,_0x4f0c40=!0x1){const _0x32b7d8=a0_0x108f24;try{let _0x1ceae2=await this[_0x32b7d8(0x726)][_0x32b7d8(0x58c)][_0x32b7d8(0x731)]({'where':{'_id':_0x2684cd['id']}},this[_0x32b7d8(0x21a)][_0x32b7d8(0x1fb)]);return _0x4f0c40?_0x1ceae2[0x0]:_0x1ceae2[0x0][_0x32b7d8(0x58c)];}catch{return{'conversation':''};}}['cleanStore'](){const _0x1858bd=a0_0x108f24;let _0x1b5a8c=this['configService'][_0x1858bd(0x602)]('STORE'),_0x5a4b57=this['configService'][_0x1858bd(0x602)](_0x1858bd(0x398));_0x1b5a8c?.[_0x1858bd(0x25a)]&&!_0x5a4b57['ENABLED']&&setInterval(()=>{const _0x11a3b9=_0x1858bd;try{for(let [_0xea3d70,_0x232d9f]of Object['entries'](_0x1b5a8c))_0x232d9f===!0x0&&(0x0,Ot['execSync'])(_0x11a3b9(0x4e6)+(0x0,P[_0x11a3b9(0x631)])(this[_0x11a3b9(0x752)],_0xea3d70[_0x11a3b9(0x2f2)](),this['instance']['wuid'])+_0x11a3b9(0x2c0));}catch{}},(_0x1b5a8c?.[_0x1858bd(0x25a)]??0xe10)*0x3e8);}async[a0_0x108f24(0x76f)](){const _0x5f1237=a0_0x108f24;let _0x5aadd5=this[_0x5f1237(0x62b)]['get'](_0x5f1237(0x398)),_0x3818f6=this[_0x5f1237(0x62b)][_0x5f1237(0x602)](_0x5f1237(0x348));return _0x3818f6?.['ENABLED']?await hs(_0x3818f6,this['instance']['name']):_0x5aadd5[_0x5f1237(0x22c)]?await gs(this[_0x5f1237(0x21a)]['name']):await(0x0,w[_0x5f1237(0x3fb)])((0x0,P['join'])(de,this[_0x5f1237(0x21a)][_0x5f1237(0x2ec)]));}async['AutomateFunctions'](){const _0x2c5310=a0_0x108f24;let _0x46d936=()=>Math['floor'](Math[_0x2c5310(0x243)]()*0x2711)+0x7d0,_0x2c22b2=async()=>{const _0x5cbfbb=_0x2c5310;if(!this['isConnected']){this['logger']['verbose']('Desconectado,\x20parando\x20execução.'),this['isRunning']=!0x1;return;}if(this[_0x5cbfbb(0x21a)]['wuid']&&this[_0x5cbfbb(0x3e5)]&&this[_0x5cbfbb(0x35c)]!==null&&this[_0x5cbfbb(0x35c)]!==void 0x0){let _0x41b7e0=Math[_0x5cbfbb(0x2a7)](this[_0x5cbfbb(0x35c)]/0xea60);this[_0x5cbfbb(0x711)][_0x5cbfbb(0x5f3)](this['instanceName']+'\x20('+this[_0x5cbfbb(0x21a)][_0x5cbfbb(0x1fb)]+_0x5cbfbb(0x460)+_0x41b7e0+_0x5cbfbb(0x268)),this[_0x5cbfbb(0x3a4)]=!0x1;return;}else this[_0x5cbfbb(0x21a)][_0x5cbfbb(0x1fb)]&&(this[_0x5cbfbb(0x711)][_0x5cbfbb(0x5f3)](this[_0x5cbfbb(0x476)]+'\x20('+this[_0x5cbfbb(0x21a)][_0x5cbfbb(0x1fb)]+_0x5cbfbb(0x3f5)),await this[_0x5cbfbb(0x726)][_0x5cbfbb(0x49c)][_0x5cbfbb(0x6fb)](this[_0x5cbfbb(0x21a)][_0x5cbfbb(0x1fb)]),await this[_0x5cbfbb(0x726)][_0x5cbfbb(0x48d)][_0x5cbfbb(0x6fb)](this[_0x5cbfbb(0x21a)][_0x5cbfbb(0x1fb)]),await this[_0x5cbfbb(0x726)][_0x5cbfbb(0x26a)][_0x5cbfbb(0x6fb)](this[_0x5cbfbb(0x21a)][_0x5cbfbb(0x1fb)]),this[_0x5cbfbb(0x711)][_0x5cbfbb(0x5f3)](this[_0x5cbfbb(0x476)]+'\x20('+this[_0x5cbfbb(0x21a)]['wuid']+_0x5cbfbb(0x79e)),this[_0x5cbfbb(0x3e5)]||await this[_0x5cbfbb(0x553)](),(this[_0x5cbfbb(0x35c)]===null||this[_0x5cbfbb(0x35c)]===void 0x0)&&await this[_0x5cbfbb(0x4e2)]());if(this['isRunning']){let _0x5be27c=_0x46d936();this[_0x5cbfbb(0x711)][_0x5cbfbb(0x5f3)](this[_0x5cbfbb(0x476)]+_0x5cbfbb(0x577)+_0x5be27c/0x3e8+_0x5cbfbb(0x27e)),setTimeout(_0x2c22b2,_0x5be27c);}};if(this['isRunning'])return;this['isRunning']=!0x0;let _0x1efad5=_0x46d936();setTimeout(_0x2c22b2,_0x1efad5);}async[a0_0x108f24(0x4ee)](_0xb96310,_0x4c8ba1,_0x4240cb,_0x508ac8,_0x49e531){const _0x3c5e47=a0_0x108f24;this[_0x3c5e47(0x711)]['verbose'](_0x3c5e47(0x5ff));try{let _0x6ea9c5={'host':_0xb96310,'port':parseInt(_0x4c8ba1),'protocol':_0x4240cb};_0x508ac8&&_0x49e531&&(_0x6ea9c5={..._0x6ea9c5,'auth':{'username':_0x508ac8,'password':_0x49e531}});let _0xa633a6=['https://jsonip.com',_0x3c5e47(0x673),_0x3c5e47(0x26c)];for(let _0x447786 of _0xa633a6)try{let _0x4ff81f=await te[_0x3c5e47(0x543)][_0x3c5e47(0x602)](_0x447786,{'proxy':_0x6ea9c5}),_0x5bbaaa;return _0x447786[_0x3c5e47(0x3cd)](_0x3c5e47(0x24a))||_0x447786['includes'](_0x3c5e47(0x6ad))?_0x5bbaaa=_0x4ff81f[_0x3c5e47(0x3b7)]['ip']:_0x447786[_0x3c5e47(0x3cd)](_0x3c5e47(0x2f5))&&(_0x5bbaaa=_0x4ff81f[_0x3c5e47(0x3b7)]['match'](/\d+\.\d+\.\d+\.\d+/)[0x0]),this[_0x3c5e47(0x711)][_0x3c5e47(0x5f3)](_0x3c5e47(0x24d)+_0x447786+':\x20'+_0x5bbaaa),!0x0;}catch(_0x23eb6d){this[_0x3c5e47(0x711)][_0x3c5e47(0x2d9)](_0x3c5e47(0x77b)+_0x447786+_0x3c5e47(0x5bf)+_0x23eb6d);}return!0x1;}catch(_0x48dc9e){return this[_0x3c5e47(0x711)][_0x3c5e47(0x2d9)]('testProxy\x20error:\x20'+_0x48dc9e),_0x48dc9e[_0x3c5e47(0x59c)]?(this['logger']['error'](_0x3c5e47(0x533)+_0x48dc9e[_0x3c5e47(0x59c)][_0x3c5e47(0x3b7)]),this[_0x3c5e47(0x711)]['error'](_0x3c5e47(0x66e)+_0x48dc9e[_0x3c5e47(0x59c)][_0x3c5e47(0x60e)]),this[_0x3c5e47(0x711)][_0x3c5e47(0x2d9)](_0x3c5e47(0x694)+_0x48dc9e[_0x3c5e47(0x59c)][_0x3c5e47(0x3f8)])):_0x48dc9e[_0x3c5e47(0x4ff)]?this['logger'][_0x3c5e47(0x2d9)](_0x3c5e47(0x80f)+_0x48dc9e[_0x3c5e47(0x4ff)]):this[_0x3c5e47(0x711)][_0x3c5e47(0x2d9)](_0x3c5e47(0x308)+_0x48dc9e[_0x3c5e47(0x58c)]),!0x1;}}async[a0_0x108f24(0x609)](_0x5d2ad1){const _0x30c83e=a0_0x108f24;if(console[_0x30c83e(0x472)]('tryProxy'),await this['testProxy'](_0x5d2ad1[_0x30c83e(0x619)],_0x5d2ad1[_0x30c83e(0x5ba)],_0x5d2ad1[_0x30c83e(0x249)],_0x5d2ad1[_0x30c83e(0x7fa)],_0x5d2ad1[_0x30c83e(0x3b0)])){console[_0x30c83e(0x472)]('working');let _0x5173dd=_0x5d2ad1[_0x30c83e(0x249)]+_0x30c83e(0x30a)+_0x5d2ad1[_0x30c83e(0x619)]+':'+_0x5d2ad1[_0x30c83e(0x5ba)];return _0x5d2ad1['username']&&_0x5d2ad1[_0x30c83e(0x3b0)]&&(_0x5173dd=_0x5d2ad1[_0x30c83e(0x7fa)]+':'+_0x5d2ad1[_0x30c83e(0x3b0)]+'@'+_0x5173dd),this[_0x30c83e(0x726)][_0x30c83e(0x681)][_0x30c83e(0x265)]({'proxy':_0x5173dd},this['instance']['name']),{'agent':new fr[(_0x30c83e(0x76c))](_0x5173dd)};}return null;}[a0_0x108f24(0x383)](_0x2d7af2){const _0x594599=a0_0x108f24;let _0x2f2447=_0x2d7af2[_0x594599(0x5ac)](':');if(_0x2f2447[_0x594599(0x231)]!==0x4)throw new Error(_0x594599(0x201));return{'host':_0x2f2447[0x0],'port':_0x2f2447[0x1],'username':_0x2f2447[0x2],'password':_0x2f2447[0x3],'protocol':_0x594599(0x435)};}async[a0_0x108f24(0x471)](_0x504cd7,_0x24d7cb=!0x0){const _0x37cd6b=a0_0x108f24;try{let _0x37c121={},_0x7d65b7=0x0;if(wr&&_0x24d7cb){let _0x4746a4;try{let _0xf5f8b2=(await this[_0x37cd6b(0x726)][_0x37cd6b(0x681)][_0x37cd6b(0x731)](this[_0x37cd6b(0x476)]))['proxy'];for(_0xf5f8b2&&(_0x4746a4=this[_0x37cd6b(0x383)](_0xf5f8b2)),_0xf5f8b2&&fs(_0x4746a4)&&(_0x37c121=await this['tryProxy'](_0x4746a4),_0x37c121&&_0x7d65b7++);!_0x37c121&&_0x7d65b7<0x3;){let _0x56422f=lr();if(_0x56422f){if(_0x4746a4=this['createProxyConfig'](_0x56422f[_0x37cd6b(0x619)]+':'+_0x56422f['port']+':'+_0x56422f[_0x37cd6b(0x7fa)]+':'+_0x56422f[_0x37cd6b(0x3b0)]),fs(_0x4746a4)){if(_0x37c121=await this[_0x37cd6b(0x609)](_0x4746a4),_0x37c121)break;}else this[_0x37cd6b(0x711)][_0x37cd6b(0x2d9)](_0x37cd6b(0x6df));}_0x7d65b7++;}}catch(_0x5aa547){this[_0x37cd6b(0x711)][_0x37cd6b(0x2d9)]('Erro\x20ao\x20configurar\x20proxy:\x20'+_0x5aa547),_0x37c121={};}!_0x37c121&&_0x7d65b7>=0x3&&(this['logger'][_0x37cd6b(0x2fb)]('Nenhum\x20proxy\x20funcional\x20encontrado\x20após\x203\x20tentativas.\x20Prosseguindo\x20sem\x20proxy.'),_0x37c121={});}this[_0x37cd6b(0x573)](),this[_0x37cd6b(0x21a)][_0x37cd6b(0x32f)]=await this['defineAuthState']();let {version:_0x46f4a6}=await(0x0,w[_0x37cd6b(0x324)])(),_0x83ebe7=[Ss,yr,(0x0,ys[_0x37cd6b(0x286)])()];console[_0x37cd6b(0x472)]('options'),console[_0x37cd6b(0x472)](_0x37c121);let _0x2ef9ee={..._0x37c121,'auth':{'creds':this[_0x37cd6b(0x21a)][_0x37cd6b(0x32f)][_0x37cd6b(0x53c)][_0x37cd6b(0x749)],'keys':(0x0,w[_0x37cd6b(0x461)])(this['instance'][_0x37cd6b(0x32f)][_0x37cd6b(0x53c)][_0x37cd6b(0x686)],(0x0,Rt[_0x37cd6b(0x543)])({'level':'error'}))},'logger':(0x0,Rt[_0x37cd6b(0x543)])({'level':_0x37cd6b(0x2d9)}),'printQRInTerminal':!0x1,'browser':_0x504cd7?['Safari\x20(Mac\x20OS)',Ss,(0x0,ys[_0x37cd6b(0x286)])()]:_0x83ebe7,'version':_0x46f4a6,'retryRequestDelayMs':0xfa,'connectTimeoutMs':0xea60,'qrTimeout':0x9c40,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'msgRetryCounterCache':this[_0x37cd6b(0x49a)],'getMessage':async _0x3ccadf=>await this[_0x37cd6b(0x339)](_0x3ccadf),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x37cd6b(0x4ac)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending':_0x4baaa3=>(_0x4baaa3[_0x37cd6b(0x7cf)]?.[_0x37cd6b(0x1ed)]==w[_0x37cd6b(0x727)][_0x37cd6b(0x321)][_0x37cd6b(0x7c2)][_0x37cd6b(0x559)][_0x37cd6b(0x704)]&&(_0x4baaa3=JSON[_0x37cd6b(0x6aa)](JSON[_0x37cd6b(0x35b)](_0x4baaa3)),_0x4baaa3[_0x37cd6b(0x7cf)]['listType']=w[_0x37cd6b(0x727)]['Message'][_0x37cd6b(0x7c2)][_0x37cd6b(0x559)][_0x37cd6b(0x713)]),_0x4baaa3)};return this['endSession']=!0x1,this['client']=(0x0,w[_0x37cd6b(0x543)])(_0x2ef9ee),this['eventHandler'](),this[_0x37cd6b(0x2d4)]=_0x504cd7,this[_0x37cd6b(0x3d0)];}catch(_0x136a98){throw this[_0x37cd6b(0x711)][_0x37cd6b(0x2d9)](this[_0x37cd6b(0x476)]+'\x20('+this[_0x37cd6b(0x21a)]['wuid']+_0x37cd6b(0x719)+(_0x136a98 instanceof Error?_0x136a98[_0x37cd6b(0x58c)]:JSON['stringify'](_0x136a98,null,0x2))),new O(_0x136a98?.[_0x37cd6b(0x28f)]());}}[a0_0x108f24(0x503)](){const _0x421f4a=a0_0x108f24;this['client']['ev'][_0x421f4a(0x5fe)](_0x2781f9=>{const _0x3fe048=_0x421f4a;if(!this[_0x3fe048(0x442)]){let _0x5dc54e=this[_0x3fe048(0x62b)]['get'](_0x3fe048(0x398));if(_0x2781f9['labels.edit']){let _0xb97520=_0x2781f9[_0x3fe048(0x805)];this[_0x3fe048(0x599)][_0x3fe048(0x805)](_0xb97520);}if(_0x2781f9['labels.association']){let _0x12ce9d=_0x2781f9[_0x3fe048(0x24b)];this[_0x3fe048(0x599)][_0x3fe048(0x24b)](_0x12ce9d);}if(_0x2781f9[_0x3fe048(0x5a9)]&&this['connectionUpdate'](_0x2781f9[_0x3fe048(0x5a9)]),_0x2781f9['creds.update']&&this[_0x3fe048(0x21a)]['authState']['saveCreds'](),_0x2781f9[_0x3fe048(0x636)]){let _0x1654fb=_0x2781f9[_0x3fe048(0x636)];this[_0x3fe048(0x599)][_0x3fe048(0x636)](_0x1654fb,_0x5dc54e);}if(_0x2781f9[_0x3fe048(0x4a2)]){let _0x446f14=_0x2781f9[_0x3fe048(0x4a2)];this[_0x3fe048(0x599)][_0x3fe048(0x4a2)](_0x446f14,_0x5dc54e);}if(_0x2781f9[_0x3fe048(0x712)]){let _0x386d64=_0x2781f9[_0x3fe048(0x712)];_0x386d64['forEach'](_0x3af2a8=>{const _0x21e804=_0x3fe048;if(dr[_0x3af2a8[_0x21e804(0x662)]['id']]){this[_0x21e804(0x3d0)]['ev'][_0x21e804(0x6db)](_0x21e804(0x4a2),{'messages':[_0x3af2a8],'type':_0x21e804(0x39d)}),delete dr[_0x3af2a8[_0x21e804(0x662)]['id']];return;}}),this['messageHandle'][_0x3fe048(0x712)](_0x386d64,_0x5dc54e);}if(_0x2781f9['presence.update']){let _0x172070=_0x2781f9[_0x3fe048(0x54b)];if(this[_0x3fe048(0x315)]?.[_0x3fe048(0x6a6)]&&_0x172070['id'][_0x3fe048(0x3cd)]('@g.us'))return;this[_0x3fe048(0x5e1)](_0x3fe048(0x54b),_0x172070);}if(!this[_0x3fe048(0x315)]?.[_0x3fe048(0x6a6)]){if(_0x2781f9['groups.upsert']){let _0x57b13e=_0x2781f9[_0x3fe048(0x75d)];this[_0x3fe048(0x70e)][_0x3fe048(0x75d)](_0x57b13e);}if(_0x2781f9[_0x3fe048(0x2a1)]){let _0x4d4de9=_0x2781f9[_0x3fe048(0x2a1)];this[_0x3fe048(0x70e)][_0x3fe048(0x2a1)](_0x4d4de9);}if(_0x2781f9[_0x3fe048(0x403)]){let _0x3defa9=_0x2781f9[_0x3fe048(0x403)];this['groupHandler'][_0x3fe048(0x403)](_0x3defa9);}}if(_0x2781f9[_0x3fe048(0x380)]){let _0x1b4a05=_0x2781f9[_0x3fe048(0x380)];this[_0x3fe048(0x679)]['chats.upsert'](_0x1b4a05,_0x5dc54e);}if(_0x2781f9[_0x3fe048(0x3a7)]){let _0x425eba=_0x2781f9[_0x3fe048(0x3a7)];this[_0x3fe048(0x679)]['chats.update'](_0x425eba,_0x5dc54e);}if(_0x2781f9[_0x3fe048(0x6d8)]){let _0x4f49b3=_0x2781f9['chats.delete'];this[_0x3fe048(0x679)][_0x3fe048(0x6d8)](_0x4f49b3);}if(_0x2781f9[_0x3fe048(0x642)]){let _0x1fa432=_0x2781f9[_0x3fe048(0x642)];this[_0x3fe048(0x781)]['contacts.upsert'](_0x1fa432,_0x5dc54e);}if(_0x2781f9[_0x3fe048(0x71c)]){let _0x1af794=_0x2781f9[_0x3fe048(0x71c)];this['contactHandle'][_0x3fe048(0x71c)](_0x1af794,_0x5dc54e);}}});}[a0_0x108f24(0x627)](_0x134ce9){const _0x270c63=a0_0x108f24;let _0x1cd766=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x270c63(0x2d8)](_0x134ce9);if(_0x1cd766&&_0x1cd766[0x1]==='55'){let _0x1b7ae5=_0x1cd766[0x2],_0x181bbe=_0x1cd766[0x3],_0x3816db=_0x1cd766[0x4];if(_0x1b7ae5>='31'&&_0x181bbe==='9')return _0x1cd766[0x1]+_0x1b7ae5+_0x3816db;}return _0x134ce9;}['createJid'](_0x163688){const _0x4570bc=a0_0x108f24;return _0x163688[_0x4570bc(0x3cd)]('@g.us')||_0x163688[_0x4570bc(0x3cd)](_0x4570bc(0x33c))||_0x163688[_0x4570bc(0x3cd)]('@broadcast')?_0x163688:(_0x163688=_0x163688?.[_0x4570bc(0x6e4)](/\s/g,'')[_0x4570bc(0x6e4)](/\+/g,'')[_0x4570bc(0x6e4)](/\(/g,'')[_0x4570bc(0x6e4)](/\)/g,'')[_0x4570bc(0x5ac)](/\:/)[0x0][_0x4570bc(0x5ac)]('@')[0x0],_0x163688[_0x4570bc(0x231)]>=0x12?(_0x163688=_0x163688[_0x4570bc(0x6e4)](/[^\d-]/g,''),_0x163688+_0x4570bc(0x2c8)):(_0x163688=_0x163688[_0x4570bc(0x6e4)](/\D/g,''),this[_0x4570bc(0x627)](_0x163688)+_0x4570bc(0x33c)));}async[a0_0x108f24(0x5cc)](_0x572704){const _0x294dda=a0_0x108f24;let _0x18aeae=this['createJid'](_0x572704['number']),_0x3f6221=(await this[_0x294dda(0x3ed)]({'numbers':[_0x18aeae]}))[0x0];if(!_0x3f6221[_0x294dda(0x1e7)]&&!(0x0,w['isJidGroup'])(_0x3f6221[_0x294dda(0x7c1)]))throw new h(_0x3f6221);let _0x2a80fc=(0x0,w[_0x294dda(0x334)])(_0x18aeae)?_0x18aeae:_0x3f6221[_0x294dda(0x7c1)];if((0x0,w[_0x294dda(0x334)])(_0x2a80fc))try{await this[_0x294dda(0x3d0)]['groupMetadata'](_0x2a80fc);}catch{throw new L('Group\x20not\x20found');}try{return await this[_0x294dda(0x3d0)][_0x294dda(0x23e)](_0x2a80fc),await this['client'][_0x294dda(0x571)](_0x572704[_0x294dda(0x3fe)],_0x18aeae),{'status':0xc8,'presence':_0x572704[_0x294dda(0x3fe)]};}catch(_0x15d596){throw new h(_0x15d596[_0x294dda(0x28f)]());}}async[a0_0x108f24(0x336)](_0x29dd40){const _0x311c4e=a0_0x108f24;let _0x2699e0=this[_0x311c4e(0x1ef)](_0x29dd40);try{return{'wuid':_0x2699e0,'profilePictureUrl':await this[_0x311c4e(0x3d0)][_0x311c4e(0x7d9)](_0x2699e0,_0x311c4e(0x66a))};}catch{return{'wuid':_0x2699e0,'profilePictureUrl':null};}}async['sendMessageWithTyping'](_0xe65771,_0x3edca1,_0xfacde1){const _0x2e6bd7=a0_0x108f24;_0xfacde1||(_0xfacde1={});let _0x5183d3=(await this[_0x2e6bd7(0x3ed)]({'numbers':[_0xe65771]}))[0x0];if(!_0x5183d3['exists']&&!(0x0,w[_0x2e6bd7(0x334)])(_0x5183d3[_0x2e6bd7(0x7c1)])&&!_0x5183d3[_0x2e6bd7(0x7c1)][_0x2e6bd7(0x3cd)]('@broadcast'))throw new h(_0x5183d3);let _0x5bb82d=_0x5183d3[_0x2e6bd7(0x7c1)];try{_0xfacde1?.[_0x2e6bd7(0x64e)]&&(await this['client']['presenceSubscribe'](_0x5bb82d),await this[_0x2e6bd7(0x3d0)][_0x2e6bd7(0x571)](_0xfacde1?.['presence']??'composing',_0x5bb82d),await(0x0,w[_0x2e6bd7(0x64e)])(_0xfacde1[_0x2e6bd7(0x64e)]),await this[_0x2e6bd7(0x3d0)][_0x2e6bd7(0x571)]('paused',_0x5bb82d));let _0x9fe174=_0xfacde1?.[_0x2e6bd7(0x2aa)]!=!0x1?void 0x0:!0x1,_0x34e75d;if(_0xfacde1?.[_0x2e6bd7(0x6bf)]){let _0x2f7633=_0xfacde1?.[_0x2e6bd7(0x6bf)],_0x8edd68=_0x2f7633?.['message']?_0x2f7633:await this[_0x2e6bd7(0x339)](_0x2f7633[_0x2e6bd7(0x662)],!0x0);if(!_0x8edd68)throw _0x2e6bd7(0x60c);_0x34e75d=_0x8edd68;}let _0x44c317;if((0x0,w[_0x2e6bd7(0x334)])(_0x5bb82d))try{let _0x5ca1d1=await this['client'][_0x2e6bd7(0x2e3)](_0x5bb82d);if(!_0x5ca1d1)throw new L(_0x2e6bd7(0x5c0));_0xfacde1?.[_0x2e6bd7(0x4ef)]&&(_0xfacde1[_0x2e6bd7(0x4ef)]?.[_0x2e6bd7(0x3b5)]?_0x44c317=_0x5ca1d1[_0x2e6bd7(0x4f7)][_0x2e6bd7(0x49e)](_0x37db1a=>_0x37db1a['id']):_0xfacde1['mentions']?.['mentioned']?.['length']&&(_0x44c317=_0xfacde1[_0x2e6bd7(0x4ef)][_0x2e6bd7(0x575)][_0x2e6bd7(0x49e)](_0x30ae6b=>{const _0x3283fc=_0x2e6bd7;let _0x459889=this[_0x3283fc(0x1ef)](_0x30ae6b);return(0x0,w[_0x3283fc(0x334)])(_0x459889)?null:_0x459889;})));}catch{throw new L(_0x2e6bd7(0x5c0));}let _0x3aaf3c=await((async()=>{const _0x1d3179=_0x2e6bd7;let _0x42e525={'quoted':_0x34e75d};if(!_0x3edca1[_0x1d3179(0x2a9)]&&!_0x3edca1[_0x1d3179(0x6cd)]&&!_0x3edca1['sticker']&&!_0x3edca1[_0x1d3179(0x2eb)]&&_0x5bb82d!=='status@broadcast'&&!_0x3edca1[_0x1d3179(0x2a9)])return await this['client']['sendMessage'](_0x5bb82d,{'forward':{'key':{'remoteJid':this[_0x1d3179(0x21a)][_0x1d3179(0x1fb)],'fromMe':!0x0},'message':_0x3edca1},'mentions':_0x44c317},_0x42e525);if(_0x3edca1[_0x1d3179(0x2eb)]){let _0x34bb82=_0x3edca1[_0x1d3179(0x2eb)];return _0xfacde1?.[_0x1d3179(0x2de)]&&(_0x34bb82=await this[_0x1d3179(0x4c6)](_0x34bb82,_0x5bb82d)),await this[_0x1d3179(0x3d0)][_0x1d3179(0x285)](_0x5bb82d,{'text':_0x34bb82,'mentions':_0x44c317,'linkPreview':_0x9fe174},{..._0x42e525,'ephemeralExpiration':w['WA_DEFAULT_EPHEMERAL']});}return _0x5bb82d===_0x1d3179(0x2c7)?await this[_0x1d3179(0x3d0)]['sendMessage'](_0x5bb82d,_0x3edca1[_0x1d3179(0x60e)][_0x1d3179(0x436)],{'backgroundColor':_0x3edca1[_0x1d3179(0x60e)][_0x1d3179(0x585)][_0x1d3179(0x765)],'font':_0x3edca1[_0x1d3179(0x60e)][_0x1d3179(0x585)]['font'],'statusJidList':_0x3edca1[_0x1d3179(0x60e)][_0x1d3179(0x585)][_0x1d3179(0x305)]}):await this[_0x1d3179(0x3d0)]['sendMessage'](_0x5bb82d,_0x3edca1,_0x42e525);})()),{message_normalized:_0x19cf33}=this[_0x2e6bd7(0x779)](_0x3aaf3c[_0x2e6bd7(0x58c)],_(_0x3aaf3c[_0x2e6bd7(0x58c)]),null),_0x43e098={'_id':_0x3aaf3c['key']['id'],'key':_0x3aaf3c[_0x2e6bd7(0x662)],'pushName':_0x3aaf3c[_0x2e6bd7(0x687)],'message':{..._0x3aaf3c['message']},'messageType':_(_0x3aaf3c[_0x2e6bd7(0x58c)]),'message_normalized':{'key':_0x3aaf3c[_0x2e6bd7(0x662)],'pushName':_0x3aaf3c[_0x2e6bd7(0x687)],'messageTimestamp':_0x3aaf3c[_0x2e6bd7(0x483)]&&_0x3aaf3c['messageTimestamp'][_0x2e6bd7(0x28f)]()[_0x2e6bd7(0x231)]<0xd?_0x3aaf3c['messageTimestamp']*0x3e8:_0x3aaf3c[_0x2e6bd7(0x483)]||null,'source':(0x0,w['getDevice'])(_0x3aaf3c[_0x2e6bd7(0x662)]['id']),..._0x19cf33},'messageTimestamp':_0x3aaf3c[_0x2e6bd7(0x483)]&&_0x3aaf3c[_0x2e6bd7(0x483)][_0x2e6bd7(0x28f)]()[_0x2e6bd7(0x231)]<0xd?_0x3aaf3c[_0x2e6bd7(0x483)]*0x3e8:_0x3aaf3c[_0x2e6bd7(0x483)]||null,'owner':this[_0x2e6bd7(0x21a)]['wuid'],'source':(0x0,w[_0x2e6bd7(0x5be)])(_0x3aaf3c[_0x2e6bd7(0x662)]['id'])};return this[_0x2e6bd7(0x711)][_0x2e6bd7(0x472)](_0x43e098),this[_0x2e6bd7(0x5e1)](_0x2e6bd7(0x794),_0x43e098),j(this[_0x2e6bd7(0x476)],_0x2e6bd7(0x259),{'message':_0x43e098}),this[_0x2e6bd7(0x58a)](this[_0x2e6bd7(0x62b)][_0x2e6bd7(0x602)](_0x2e6bd7(0x398)),_0x43e098,'SEND_MESSAGE'),await this[_0x2e6bd7(0x726)][_0x2e6bd7(0x58c)][_0x2e6bd7(0x1d5)]([_0x43e098],this['instance'][_0x2e6bd7(0x1fb)]),_0x3aaf3c;}catch(_0x349c2a){throw this[_0x2e6bd7(0x711)][_0x2e6bd7(0x2d9)](this[_0x2e6bd7(0x476)]+'\x20('+this[_0x2e6bd7(0x21a)][_0x2e6bd7(0x1fb)]+_0x2e6bd7(0x719)+_0x349c2a['toString']()),new h(_0x349c2a[_0x2e6bd7(0x28f)]());}}get['connectionStatus'](){const _0x2a0a12=a0_0x108f24;return this[_0x2a0a12(0x59b)];}async[a0_0x108f24(0x350)](_0x52da89){const _0x465a7e=a0_0x108f24;let _0xe5f41a=ur,_0x29d5c9=We;return _0x29d5c9&&this[_0x465a7e(0x476)][_0x465a7e(0x2f2)]()[_0x465a7e(0x3cd)](_0x29d5c9[_0x465a7e(0x2f2)]())&&(_0x52da89[_0x465a7e(0x350)]['text']+='\x0a\x0a'+_0xe5f41a),await this[_0x465a7e(0x62e)](_0x52da89[_0x465a7e(0x53e)],{'conversation':_0x52da89[_0x465a7e(0x350)]['text']},_0x52da89?.['options']);}async[a0_0x108f24(0x3ae)](_0x2ab915){const _0xce40fb=a0_0x108f24;if(!_0x2ab915[_0xce40fb(0x4bb)])throw new h(_0xce40fb(0x1e0));if(!_0x2ab915[_0xce40fb(0x436)])throw new h(_0xce40fb(0x3ba));if(_0x2ab915['allContacts']){let _0x51c95f=await this['repository'][_0xce40fb(0x46c)]['find']({'where':{}},this[_0xce40fb(0x21a)][_0xce40fb(0x1fb)]);if(!_0x51c95f[_0xce40fb(0x231)])throw new h('Contacts\x20not\x20found');_0x2ab915['statusJidList']=_0x51c95f['filter'](_0x4afd87=>_0x4afd87['pushName'])[_0xce40fb(0x49e)](_0x206aae=>_0x206aae[_0xce40fb(0x5ee)]);}if(!_0x2ab915['statusJidList']?.[_0xce40fb(0x231)]&&!_0x2ab915[_0xce40fb(0x611)])throw new h(_0xce40fb(0x203));if(_0x2ab915[_0xce40fb(0x4bb)]===_0xce40fb(0x341)){if(!_0x2ab915[_0xce40fb(0x765)])throw new h(_0xce40fb(0x73f));if(!_0x2ab915[_0xce40fb(0x478)])throw new h('Font\x20is\x20required');return{'content':{'text':_0x2ab915[_0xce40fb(0x436)]},'option':{'backgroundColor':_0x2ab915[_0xce40fb(0x765)],'font':_0x2ab915['font'],'statusJidList':_0x2ab915[_0xce40fb(0x305)]}};}if(_0x2ab915['type']===_0xce40fb(0x66a))return{'content':{'image':{'url':_0x2ab915[_0xce40fb(0x436)]},'caption':_0x2ab915['caption']},'option':{'statusJidList':_0x2ab915['statusJidList']}};if(_0x2ab915[_0xce40fb(0x4bb)]===_0xce40fb(0x4c4))return{'content':{'video':{'url':_0x2ab915[_0xce40fb(0x436)]},'caption':_0x2ab915[_0xce40fb(0x50b)]},'option':{'statusJidList':_0x2ab915[_0xce40fb(0x305)]}};if(_0x2ab915[_0xce40fb(0x4bb)]===_0xce40fb(0x2a9)){this['logger'][_0xce40fb(0x5f3)](_0xce40fb(0x72e)),this['logger'][_0xce40fb(0x5f3)](_0xce40fb(0x281));let _0x1ab447=await this[_0xce40fb(0x4ba)](_0x2ab915[_0xce40fb(0x436)]);if(typeof _0x1ab447==_0xce40fb(0x473)){this[_0xce40fb(0x711)][_0xce40fb(0x5f3)](_0xce40fb(0x638));let _0x327252=k[_0xce40fb(0x3cc)](_0x1ab447)[_0xce40fb(0x28f)]('base64'),_0x4813cd={'content':{'audio':Buffer[_0xce40fb(0x446)](_0x327252,_0xce40fb(0x54a)),'ptt':!0x0,'mimetype':_0xce40fb(0x724)},'option':{'statusJidList':_0x2ab915['statusJidList']}};return k['unlinkSync'](_0x1ab447),_0x4813cd;}else throw new O(_0x1ab447);}throw new h(_0xce40fb(0x64a));}async[a0_0x108f24(0x423)](_0x43b929){const _0x26c1a1=a0_0x108f24;return await this[_0x26c1a1(0x62e)]('status@broadcast',{'status':await this['formatStatusMessage'](_0x43b929['statusMessage'])});}async['prepareMediaMessage'](_0x85108f){const _0x2f6dde=a0_0x108f24;try{let _0xe97150=await(0x0,w[_0x2f6dde(0x2dc)])({[_0x85108f[_0x2f6dde(0x5c4)]]:(0x0,$[_0x2f6dde(0x444)])(_0x85108f[_0x2f6dde(0x531)])?{'url':_0x85108f['media']}:Buffer[_0x2f6dde(0x446)](_0x85108f['media'],_0x2f6dde(0x54a))},{'upload':this[_0x2f6dde(0x3d0)]['waUploadToServer']}),_0xbde30b=_0x85108f[_0x2f6dde(0x5c4)]+_0x2f6dde(0x321);if(_0x85108f[_0x2f6dde(0x5c4)]===_0x2f6dde(0x764)&&!_0x85108f[_0x2f6dde(0x6ee)]){let _0xb0fc14=new RegExp(/.*\/(.+?)\./)[_0x2f6dde(0x2d8)](_0x85108f['media']);_0x85108f[_0x2f6dde(0x6ee)]=_0xb0fc14?_0xb0fc14[0x1]:null;}let _0x4897cc=(0x0,$[_0x2f6dde(0x444)])(_0x85108f['media'])?_0x85108f[_0x2f6dde(0x531)][_0x2f6dde(0x5ac)]('?')[0x0]:_0x85108f['media'];this[_0x2f6dde(0x711)][_0x2f6dde(0x5f3)]('URL\x20limpa:\x20'+_0x4897cc);let _0x1b697e;(0x0,$[_0x2f6dde(0x444)])(_0x85108f[_0x2f6dde(0x531)])?_0x1b697e=(0x0,Tt[_0x2f6dde(0x3da)])(_0x4897cc):_0x85108f[_0x2f6dde(0x6ee)]&&_0x85108f[_0x2f6dde(0x6ee)][_0x2f6dde(0x3cd)]('.')?_0x1b697e=(0x0,Tt['getMIMEType'])(_0x85108f[_0x2f6dde(0x6ee)]):_0x1b697e=(0x0,Tt[_0x2f6dde(0x3da)])(_0x85108f[_0x2f6dde(0x531)]);let _0x57f195=ur,_0x2867e7=We;return _0x2867e7&&this['instanceName'][_0x2f6dde(0x2f2)]()[_0x2f6dde(0x3cd)](_0x2867e7['toLowerCase']())&&(_0x85108f['caption']+='\x0a\x0a'+_0x57f195),_0xe97150[_0xbde30b]['caption']=_0x85108f?.[_0x2f6dde(0x50b)],_0xe97150[_0xbde30b][_0x2f6dde(0x6f0)]=_0x1b697e,_0xe97150[_0xbde30b][_0x2f6dde(0x6ee)]=_0x85108f[_0x2f6dde(0x6ee)],_0x85108f[_0x2f6dde(0x5c4)]===_0x2f6dde(0x4c4)&&(_0xe97150[_0xbde30b][_0x2f6dde(0x606)]=Uint8Array['from']((0x0,Ee[_0x2f6dde(0x3cc)])((0x0,P[_0x2f6dde(0x631)])(process[_0x2f6dde(0x5fc)](),_0x2f6dde(0x549)))),_0xe97150[_0xbde30b][_0x2f6dde(0x5b6)]=!0x1),(0x0,w['generateWAMessageFromContent'])('',{[_0xbde30b]:{..._0xe97150[_0xbde30b]}},{'userJid':this[_0x2f6dde(0x21a)][_0x2f6dde(0x1fb)]});}catch(_0x101426){throw this[_0x2f6dde(0x711)][_0x2f6dde(0x2d9)](this[_0x2f6dde(0x476)]+'\x20('+this[_0x2f6dde(0x21a)][_0x2f6dde(0x1fb)]+_0x2f6dde(0x719)+(_0x101426 instanceof Error?_0x101426['message']:JSON['stringify'](_0x101426,null,0x2))),new O(_0x101426?.[_0x2f6dde(0x28f)]()||_0x101426);}}async['mediaMessage'](_0x4b4b09){const _0x21794a=a0_0x108f24;let _0x517f9d=await this[_0x21794a(0x5aa)](_0x4b4b09[_0x21794a(0x28a)]);return await this[_0x21794a(0x62e)](_0x4b4b09['number'],{..._0x517f9d[_0x21794a(0x58c)]},_0x4b4b09?.[_0x21794a(0x797)]);}async['convertToWebP'](_0x3be755,_0x276da3){const _0x2928e4=a0_0x108f24;try{this[_0x2928e4(0x711)][_0x2928e4(0x5f3)](_0x2928e4(0x396));let _0x24a055,_0x2cff18=_0x276da3+'-'+new Date()[_0x2928e4(0x644)]();this['logger'][_0x2928e4(0x5f3)](_0x2928e4(0x579)+_0x2cff18);let _0xc80306=''+(0x0,P[_0x2928e4(0x631)])(this[_0x2928e4(0x752)],_0x2cff18+_0x2928e4(0x7b6));if(this[_0x2928e4(0x711)][_0x2928e4(0x5f3)](_0x2928e4(0x364)+_0xc80306),(0x0,$['isBase64'])(_0x3be755)){this[_0x2928e4(0x711)][_0x2928e4(0x5f3)](_0x2928e4(0x6e6));let _0x238463=_0x3be755[_0x2928e4(0x6e4)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x30df9f=Buffer[_0x2928e4(0x446)](_0x238463,'base64');_0x24a055=''+(0x0,P['join'])(this['storePath'],_0x2928e4(0x378)+_0x2cff18+'.png'),this['logger']['verbose']('Image\x20path:\x20'+_0x24a055),await(0x0,At[_0x2928e4(0x543)])(_0x30df9f)['toFile'](_0x24a055),this[_0x2928e4(0x711)][_0x2928e4(0x5f3)](_0x2928e4(0x748));}else{this[_0x2928e4(0x711)][_0x2928e4(0x5f3)]('Image\x20is\x20url');let _0x5074ad=new Date()[_0x2928e4(0x644)](),_0x4233a2=_0x3be755+_0x2928e4(0x2b6)+_0x5074ad;this[_0x2928e4(0x711)][_0x2928e4(0x5f3)](_0x2928e4(0x56c)+_0x4233a2);let _0x42deef=await te[_0x2928e4(0x543)][_0x2928e4(0x602)](_0x4233a2,{'responseType':'arraybuffer'});this[_0x2928e4(0x711)][_0x2928e4(0x5f3)]('Getting\x20image\x20from\x20url');let _0x2fd308=Buffer[_0x2928e4(0x446)](_0x42deef[_0x2928e4(0x3b7)],_0x2928e4(0x661));_0x24a055=''+(0x0,P['join'])(this['storePath'],_0x2928e4(0x378)+_0x2cff18+_0x2928e4(0x588)),this[_0x2928e4(0x711)][_0x2928e4(0x5f3)]('Image\x20path:\x20'+_0x24a055),await(0x0,At[_0x2928e4(0x543)])(_0x2fd308)[_0x2928e4(0x276)](_0x24a055),this[_0x2928e4(0x711)][_0x2928e4(0x5f3)](_0x2928e4(0x748));}return await(0x0,At[_0x2928e4(0x543)])(_0x24a055)[_0x2928e4(0x747)]()[_0x2928e4(0x276)](_0xc80306),this['logger'][_0x2928e4(0x5f3)]('Image\x20converted\x20to\x20WebP'),k[_0x2928e4(0x4b8)](_0x24a055),this[_0x2928e4(0x711)][_0x2928e4(0x5f3)](_0x2928e4(0x3c6)),_0xc80306;}catch(_0x17562c){console[_0x2928e4(0x2d9)](_0x2928e4(0x417),_0x17562c instanceof Error?_0x17562c['message']:JSON[_0x2928e4(0x35b)](_0x17562c,null,0x2));}}async[a0_0x108f24(0x44e)](_0x19999d){const _0x3b87c5=a0_0x108f24;let _0x5444c4=await this['convertToWebP'](_0x19999d[_0x3b87c5(0x593)][_0x3b87c5(0x66a)],_0x19999d[_0x3b87c5(0x53e)]),_0x5c7331=await this[_0x3b87c5(0x62e)](_0x19999d[_0x3b87c5(0x53e)],{'sticker':{'url':_0x5444c4}},_0x19999d?.['options']);return k[_0x3b87c5(0x4b8)](_0x5444c4),this[_0x3b87c5(0x711)][_0x3b87c5(0x5f3)]('Converted\x20image\x20deleted'),_0x5c7331;}async['audioWhatsapp'](_0x109cde){const _0x574df7=a0_0x108f24;if(this[_0x574df7(0x711)][_0x574df7(0x5f3)]('Sending\x20audio\x20whatsapp'),!_0x109cde['options']?.['encoding']&&_0x109cde[_0x574df7(0x797)]?.[_0x574df7(0x236)]!==!0x1&&(_0x109cde[_0x574df7(0x797)]['encoding']=!0x0),_0x109cde[_0x574df7(0x797)]?.['encoding']){let _0x2a6821=await this[_0x574df7(0x4ba)](_0x109cde[_0x574df7(0x5a3)][_0x574df7(0x2a9)]);if(typeof _0x2a6821==_0x574df7(0x473)){let _0x596f0c=k[_0x574df7(0x3cc)](_0x2a6821)[_0x574df7(0x28f)](_0x574df7(0x54a)),_0xb2dfe5=this[_0x574df7(0x62e)](_0x109cde['number'],{'audio':Buffer['from'](_0x596f0c,_0x574df7(0x54a)),'ptt':!0x0,'mimetype':_0x574df7(0x724)},{'presence':'recording','delay':_0x109cde?.[_0x574df7(0x797)]?.['delay']});return k[_0x574df7(0x4b8)](_0x2a6821),this[_0x574df7(0x711)][_0x574df7(0x5f3)](_0x574df7(0x487)),_0xb2dfe5;}else throw new O(_0x2a6821);}return await this[_0x574df7(0x62e)](_0x109cde[_0x574df7(0x53e)],{'audio':(0x0,$[_0x574df7(0x444)])(_0x109cde[_0x574df7(0x5a3)]['audio'])?{'url':_0x109cde['audioMessage'][_0x574df7(0x2a9)]}:Buffer[_0x574df7(0x446)](_0x109cde[_0x574df7(0x5a3)]['audio'],_0x574df7(0x54a)),'ptt':!0x0,'mimetype':_0x574df7(0x48e)},{'presence':_0x574df7(0x613),'delay':_0x109cde?.[_0x574df7(0x797)]?.['delay']});}async['convertaudio'](_0x13a30e){const _0x1e04dc=a0_0x108f24;this['logger'][_0x1e04dc(0x5f3)]('Processing\x20audio');let _0x1b208e,_0x43baf0,_0x3534a8=(0x0,me['v4'])();if(this['logger'][_0x1e04dc(0x5f3)](_0x1e04dc(0x545)+_0x3534a8),(0x0,$[_0x1e04dc(0x444)])(_0x13a30e)){this['logger'][_0x1e04dc(0x5f3)](_0x1e04dc(0x659)),_0x43baf0=''+(0x0,P[_0x1e04dc(0x631)])(this[_0x1e04dc(0x752)],_0x3534a8+_0x1e04dc(0x35a)),_0x1b208e=''+(0x0,P[_0x1e04dc(0x631)])(this['storePath'],_0x1e04dc(0x378)+_0x3534a8+_0x1e04dc(0x422)),this['logger'][_0x1e04dc(0x5f3)]('Output\x20audio\x20path:\x20'+_0x43baf0),this[_0x1e04dc(0x711)][_0x1e04dc(0x5f3)](_0x1e04dc(0x739)+_0x1b208e);let _0x22b6c0=new Date()[_0x1e04dc(0x644)](),_0x5d7f9f=_0x13a30e+_0x1e04dc(0x2b6)+_0x22b6c0;this['logger'][_0x1e04dc(0x5f3)](_0x1e04dc(0x277)+_0x5d7f9f);let _0xca94b3=await te['default'][_0x1e04dc(0x602)](_0x5d7f9f,{'responseType':_0x1e04dc(0x29c)});this[_0x1e04dc(0x711)][_0x1e04dc(0x5f3)](_0x1e04dc(0x1dc)),k[_0x1e04dc(0x340)](_0x1b208e,_0xca94b3[_0x1e04dc(0x3b7)]);}else{this[_0x1e04dc(0x711)][_0x1e04dc(0x5f3)](_0x1e04dc(0x36c)),_0x43baf0=''+(0x0,P[_0x1e04dc(0x631)])(this[_0x1e04dc(0x752)],_0x3534a8+_0x1e04dc(0x35a)),_0x1b208e=''+(0x0,P['join'])(this['storePath'],_0x1e04dc(0x378)+_0x3534a8+'.mp3'),this['logger']['verbose']('Output\x20audio\x20path:\x20'+_0x43baf0),this[_0x1e04dc(0x711)][_0x1e04dc(0x5f3)](_0x1e04dc(0x739)+_0x1b208e);let _0x3133f3=Buffer['from'](_0x13a30e,'base64');k[_0x1e04dc(0x340)](_0x1b208e,_0x3133f3),this[_0x1e04dc(0x711)][_0x1e04dc(0x5f3)](_0x1e04dc(0x4f5));}return this['logger']['verbose']('Converting\x20audio\x20to\x20mp4'),new Promise((_0x4e4449,_0x47031f)=>{const _0x4bb720=_0x1e04dc;(0x0,Ot[_0x4bb720(0x2d8)])(pr[_0x4bb720(0x543)]['path']+'\x20-i\x20'+_0x1b208e+_0x4bb720(0x386)+_0x43baf0+_0x4bb720(0x4f3),_0x8bcffc=>{const _0x4d1be1=_0x4bb720;k['unlinkSync'](_0x1b208e),this['logger']['verbose'](_0x4d1be1(0x514)),_0x8bcffc&&_0x47031f(_0x8bcffc),this[_0x4d1be1(0x711)][_0x4d1be1(0x5f3)]('Audio\x20converted\x20to\x20mp4'),_0x4e4449(_0x43baf0);});});}async[a0_0x108f24(0x74f)](_0x4f469d){const _0x591224=a0_0x108f24;let _0x4602b2={},_0x551a5e=_0x591224(0x73c);if(_0x4f469d[_0x591224(0x74f)]?.['mediaMessage']){_0x551a5e=_0x4f469d[_0x591224(0x74f)][_0x591224(0x28a)]?.['mediatype'][_0x591224(0x7f0)]()??_0x591224(0x73c),_0x4602b2[_0x591224(0x41b)]=_0x551a5e['toLowerCase']()+_0x591224(0x321);let _0x4c50c0=await this[_0x591224(0x5aa)](_0x4f469d[_0x591224(0x74f)]['mediaMessage']);_0x4602b2['message']=_0x4c50c0['message'][_0x4602b2['mediaKey']],_0x4602b2[_0x591224(0x72f)]='*'+_0x4f469d[_0x591224(0x74f)][_0x591224(0x408)]+_0x591224(0x71b)+_0x4f469d[_0x591224(0x74f)][_0x591224(0x5a8)];}let _0x40ee18={'text':_0x4f469d['buttonMessage'][_0x591224(0x6bc)][_0x591224(0x49e)](_0x497d2d=>_0x497d2d[_0x591224(0x247)]),'ids':_0x4f469d[_0x591224(0x74f)][_0x591224(0x6bc)][_0x591224(0x49e)](_0x36175e=>_0x36175e[_0x591224(0x233)])};if(!(0x0,$[_0x591224(0x4f9)])(_0x40ee18['text'])||!(0x0,$[_0x591224(0x4f9)])(_0x40ee18[_0x591224(0x74d)]))throw new h(_0x591224(0x455),_0x591224(0x20b));return await this[_0x591224(0x62e)](_0x4f469d[_0x591224(0x53e)],{'buttonsMessage':{'text':_0x4602b2?.[_0x591224(0x41b)]?void 0x0:_0x4f469d[_0x591224(0x74f)]['title'],'contentText':_0x4602b2?.[_0x591224(0x72f)]??_0x4f469d[_0x591224(0x74f)]['description'],'footerText':_0x4f469d[_0x591224(0x74f)]?.['footerText'],'buttons':_0x4f469d[_0x591224(0x74f)][_0x591224(0x6bc)]['map'](_0x18a1e1=>({'buttonText':{'displayText':_0x18a1e1[_0x591224(0x247)]},'buttonId':_0x18a1e1[_0x591224(0x233)],'type':0x1})),'headerType':w[_0x591224(0x727)][_0x591224(0x321)][_0x591224(0x30e)]['HeaderType'][_0x551a5e],[_0x4602b2?.['mediaKey']]:_0x4602b2?.[_0x591224(0x58c)]}},_0x4f469d?.[_0x591224(0x797)]);}async['locationMessage'](_0x59dc33){const _0x58c3a4=a0_0x108f24;return await this['sendMessageWithTyping'](_0x59dc33[_0x58c3a4(0x53e)],{'locationMessage':{'degreesLatitude':_0x59dc33[_0x58c3a4(0x7a0)][_0x58c3a4(0x35e)],'degreesLongitude':_0x59dc33[_0x58c3a4(0x7a0)][_0x58c3a4(0x754)],'name':_0x59dc33[_0x58c3a4(0x7a0)]?.[_0x58c3a4(0x2ec)],'address':_0x59dc33['locationMessage']?.['address']}},_0x59dc33?.[_0x58c3a4(0x797)]);}async[a0_0x108f24(0x699)](_0x424ba6){const _0x52d71a=a0_0x108f24;let _0x1381c0={},_0x40d80d=_0x2c8650=>{const _0x2c1d22=a0_0x57b5;let _0x139175=_0x2c1d22(0x1d2)+_0x2c8650[_0x2c1d22(0x729)]+_0x2c1d22(0x4d8)+_0x2c8650['fullName']+'\x0a';_0x2c8650['organization']&&(_0x139175+=_0x2c1d22(0x5d0)+_0x2c8650[_0x2c1d22(0x5ad)]+';\x0a'),_0x2c8650[_0x2c1d22(0x767)]&&(_0x139175+='EMAIL:'+_0x2c8650[_0x2c1d22(0x767)]+'\x0a'),_0x2c8650[_0x2c1d22(0x62a)]&&(_0x139175+=_0x2c1d22(0x3ab)+_0x2c8650[_0x2c1d22(0x62a)]+'\x0a');let _0x234dec='';return _0x2c8650['phoneNumber']&&_0x2c8650[_0x2c1d22(0x2d4)][_0x2c1d22(0x5ac)]('|')[_0x2c1d22(0x2ab)]((_0x4e9f82,_0x3eb034)=>{const _0x493114=_0x2c1d22;let _0xc43879=this[_0x493114(0x1ef)](_0x4e9f82)['replace']('@s.whatsapp.net','');_0x234dec+=_0x493114(0x6c3)+(_0x3eb034+0x1)+_0x493114(0x1e9)+_0xc43879+':'+_0x4e9f82+_0x493114(0x271)+(_0x3eb034+0x1)+_0x493114(0x3f4);}),_0x139175+=_0x234dec+_0x2c1d22(0x4e3),_0x139175;};return _0x424ba6[_0x52d71a(0x699)][_0x52d71a(0x231)]===0x1?_0x1381c0['contactMessage']={'displayName':_0x424ba6[_0x52d71a(0x699)][0x0][_0x52d71a(0x729)],'vcard':_0x40d80d(_0x424ba6['contactMessage'][0x0])}:_0x1381c0[_0x52d71a(0x39c)]={'displayName':_0x424ba6[_0x52d71a(0x699)]['length']+_0x52d71a(0x401),'contacts':_0x424ba6[_0x52d71a(0x699)][_0x52d71a(0x49e)](_0x320069=>({'displayName':_0x320069[_0x52d71a(0x729)],'vcard':_0x40d80d(_0x320069)}))},await this['sendMessageWithTyping'](_0x424ba6[_0x52d71a(0x53e)],{..._0x1381c0},_0x424ba6?.[_0x52d71a(0x797)]);}async[a0_0x108f24(0x4a9)](_0x31cfd6){const _0x473f21=a0_0x108f24;return await this[_0x473f21(0x62e)](_0x31cfd6[_0x473f21(0x4a9)][_0x473f21(0x662)]['remoteJid'],{'reactionMessage':{'key':_0x31cfd6['reactionMessage']['key'],'text':_0x31cfd6[_0x473f21(0x4a9)][_0x473f21(0x1f5)]}});}async[a0_0x108f24(0x3ed)](_0x20d28d){const _0x4f1c22=a0_0x108f24;let _0x45bc7a=[];for await(let _0x55a544 of _0x20d28d[_0x4f1c22(0x576)]){let _0x32e3d8=this[_0x4f1c22(0x1ef)](_0x55a544),_0x1b1d23=!0x1;try{if((0x0,w[_0x4f1c22(0x334)])(_0x32e3d8)){let _0xd57388=await this[_0x4f1c22(0x25e)]({'groupJid':_0x32e3d8},_0x4f1c22(0x5b3));_0x45bc7a['push'](new pe(_0xd57388['metadata']['id'],!!_0xd57388?.['metadata']['id'],_0xd57388?.[_0x4f1c22(0x2ee)][_0x4f1c22(0x47a)])),_0x1b1d23=!!_0xd57388?.[_0x4f1c22(0x2ee)]['id'];}else{let _0x33f308=(await this[_0x4f1c22(0x3d0)][_0x4f1c22(0x6dd)](_0x32e3d8))[0x0];_0x45bc7a[_0x4f1c22(0x1d0)](new pe(_0x33f308['jid'],_0x33f308[_0x4f1c22(0x1e7)])),_0x1b1d23=_0x33f308[_0x4f1c22(0x1e7)];}}catch{_0x45bc7a[_0x4f1c22(0x1d0)](new pe(_0x55a544,!0x1));}finally{await this[_0x4f1c22(0x37c)](_0x32e3d8,_0x1b1d23);}}return _0x45bc7a;}async['checkAndUpdateChatStatus'](_0x2e9a28,_0x328da0){const _0x491115=a0_0x108f24;try{await this[_0x491115(0x726)][_0x491115(0x1e1)]['findOne']({'where':{'_id':_0x2e9a28,'imported':!0x0}},this[_0x491115(0x21a)][_0x491115(0x1fb)])&&(_0x328da0?await this[_0x491115(0x726)]['chat'][_0x491115(0x4c9)]({'where':{'_id':_0x2e9a28}},{'imported':!0x1},this[_0x491115(0x21a)][_0x491115(0x1fb)],void 0x0,_0x491115(0x6f2)):(await this['repository'][_0x491115(0x1e1)][_0x491115(0x57b)](_0x2e9a28,this[_0x491115(0x21a)][_0x491115(0x1fb)]),console[_0x491115(0x472)]('Chat\x20com\x20ID\x20'+_0x2e9a28+_0x491115(0x3dd))));}catch(_0x2cc7c7){console['error'](_0x491115(0x1c7),_0x2cc7c7);}}async['markMessageAsRead'](_0x343dae){const _0xd47bee=a0_0x108f24;try{let _0x73f99c=_0x343dae[_0xd47bee(0x688)][_0xd47bee(0x517)](_0x13183b=>(0x0,w[_0xd47bee(0x334)])(_0x13183b['remoteJid'])||(0x0,w[_0xd47bee(0x26d)])(_0x13183b['remoteJid']))[_0xd47bee(0x49e)](_0x3c5ea0=>({'remoteJid':_0x3c5ea0['remoteJid'],'fromMe':_0x3c5ea0['fromMe'],'id':_0x3c5ea0['id']}));await this[_0xd47bee(0x3d0)][_0xd47bee(0x688)](_0x73f99c);let _0x2c3019=_0x73f99c[_0xd47bee(0x49e)](_0x2318d4=>this[_0xd47bee(0x25d)](_0x2318d4,{'status':_0xd47bee(0x494),'owner':this[_0xd47bee(0x21a)][_0xd47bee(0x1fb)]})),_0x31457a=_0x73f99c[_0xd47bee(0x49e)](_0x222915=>this['repository'][_0xd47bee(0x1e1)][_0xd47bee(0x4c9)]({'where':{'_id':_0x222915[_0xd47bee(0x47b)]}},{'unreadcount':0x0},this[_0xd47bee(0x21a)][_0xd47bee(0x1fb)])),[_0xc1c7bc,_0x30fc98]=await Promise[_0xd47bee(0x406)]([Promise[_0xd47bee(0x406)](_0x2c3019),Promise[_0xd47bee(0x406)](_0x31457a)]);return _0x30fc98[_0xd47bee(0x517)](_0x5998bc=>_0x5998bc!==null)[_0xd47bee(0x2ab)](_0x4e743d=>{const _0xc8b2ef=_0xd47bee;j(this[_0xc8b2ef(0x476)],_0xc8b2ef(0x4cc),{'chat':_0x4e743d});}),{'message':'Read\x20messages','read':'success'};}catch(_0x1e3e0a){throw console[_0xd47bee(0x2d9)](_0xd47bee(0x62f),_0x1e3e0a),new O('Read\x20messages\x20fail',_0x1e3e0a['toString']());}}async[a0_0x108f24(0x675)](_0x36b806){const _0x2c8ba7=a0_0x108f24;let _0x1daa24=await this[_0x2c8ba7(0x732)]({'where':{'key':{'remoteJid':_0x36b806}}}),_0x29bb06=_0x1daa24['pop']();for(let _0x457154 of _0x1daa24)_0x457154['messageTimestamp']>=_0x29bb06[_0x2c8ba7(0x483)]&&(_0x29bb06=_0x457154);return _0x29bb06;}async['archiveChat'](_0x22f145){const _0x479c7a=a0_0x108f24;this['logger'][_0x479c7a(0x5f3)]('Archiving\x20chat');try{let _0x4be705=_0x22f145[_0x479c7a(0x453)],_0x329e65=_0x22f145['chat'];if(!_0x4be705&&_0x329e65?_0x4be705=await this[_0x479c7a(0x675)](_0x329e65):(_0x4be705=_0x22f145[_0x479c7a(0x453)],_0x4be705['messageTimestamp']=_0x4be705?.[_0x479c7a(0x483)]??Date['now'](),_0x329e65=_0x4be705?.[_0x479c7a(0x662)]?.[_0x479c7a(0x47b)]),!_0x4be705||Object['keys'](_0x4be705)[_0x479c7a(0x231)]===0x0)throw new L(_0x479c7a(0x5ef));await this[_0x479c7a(0x3d0)][_0x479c7a(0x30b)]({'archive':_0x22f145[_0x479c7a(0x664)],'lastMessages':[_0x4be705]},this[_0x479c7a(0x1ef)](_0x329e65));let _0x4a2f86=await this[_0x479c7a(0x726)]['chat'][_0x479c7a(0x4c9)]({'where':{'_id':_0x4be705?.['key']?.['remoteJid']}},{'archived':_0x22f145[_0x479c7a(0x664)]},this[_0x479c7a(0x21a)][_0x479c7a(0x1fb)]);return _0x4a2f86&&j(this[_0x479c7a(0x476)],_0x479c7a(0x4cc),{'chat':_0x4a2f86}),{'chatId':_0x329e65,'archived':_0x22f145[_0x479c7a(0x664)]};}catch(_0x39b3bf){throw new O({'archived':!0x1,'message':[_0x479c7a(0x5d8),_0x39b3bf['toString']()]});}}async[a0_0x108f24(0x6a4)](_0x3b865c){const _0x121b74=a0_0x108f24;try{let _0x7d1f88=await this['client'][_0x121b74(0x285)](_0x3b865c[_0x121b74(0x47b)],{'delete':_0x3b865c});try{let _0x53bbd6=await this[_0x121b74(0x25d)](_0x3b865c,{'status':_0x121b74(0x284),'owner':this[_0x121b74(0x21a)][_0x121b74(0x1fb)]});this[_0x121b74(0x711)]['verbose'](this[_0x121b74(0x476)]+'\x20('+this[_0x121b74(0x21a)][_0x121b74(0x1fb)]+_0x121b74(0x337)+_0x53bbd6);}catch(_0x17e819){console[_0x121b74(0x2d9)](_0x121b74(0x3fd),_0x17e819);}return _0x7d1f88;}catch(_0xb1dc87){throw new O('Error\x20while\x20deleting\x20message\x20for\x20everyone',_0xb1dc87?.[_0x121b74(0x28f)]());}}async['getBase64FromMediaMessage'](_0x391cc2){const _0x170b0d=a0_0x108f24;try{let _0x3f6aa2=_0x391cc2?.[_0x170b0d(0x58c)]?_0x391cc2:await this['getMessage'](_0x391cc2[_0x170b0d(0x662)],!0x0);for(let _0x417e39 of ua)_0x3f6aa2[_0x170b0d(0x58c)][_0x417e39]&&(_0x3f6aa2['message']=_0x3f6aa2[_0x170b0d(0x58c)][_0x417e39][_0x170b0d(0x58c)]);let _0x19c18d,_0x4d2ee4;for(let _0xaf71fa of la)if(_0x19c18d=_0x3f6aa2['message'][_0xaf71fa],_0x19c18d){_0x4d2ee4=_0xaf71fa;break;}if(!_0x19c18d)throw'The\x20message\x20is\x20not\x20of\x20the\x20media\x20type';typeof _0x19c18d[_0x170b0d(0x41b)]==_0x170b0d(0x252)&&(_0x3f6aa2['message']=JSON['parse'](JSON[_0x170b0d(0x35b)](_0x3f6aa2[_0x170b0d(0x58c)])));let _0x32d377=await(0x0,w[_0x170b0d(0x695)])({'key':_0x3f6aa2?.[_0x170b0d(0x662)],'message':_0x3f6aa2?.[_0x170b0d(0x58c)]},'buffer',{},{'logger':(0x0,Rt[_0x170b0d(0x543)])({'level':_0x170b0d(0x6d7)}),'reuploadRequest':this[_0x170b0d(0x3d0)][_0x170b0d(0x6c8)]});if(!(_0x32d377 instanceof Buffer))throw new Error(_0x170b0d(0x6ea));let _0x2aa0a3=this['configService'][_0x170b0d(0x602)](_0x170b0d(0x398)),_0xb62803,_0x50ca9f;if(_0x19c18d[_0x170b0d(0x6ee)])_0xb62803=_0x19c18d[_0x170b0d(0x6ee)];else{let _0x1482d6=_0x19c18d[_0x170b0d(0x6f0)]?.[_0x170b0d(0x254)](/\/(\w+)/),_0x3c77eb=_0x1482d6?_0x1482d6[0x1]:null;if(!_0x3c77eb)throw new Error(_0x170b0d(0x253));_0xb62803=(0x0,me['v4'])()+'.'+_0x3c77eb;}_0x4d2ee4===_0x170b0d(0x5a3)&&_0x19c18d[_0x170b0d(0x6f0)]===_0x170b0d(0x57f)?(_0xb62803=(0x0,me['v4'])()+_0x170b0d(0x48a),_0x50ca9f=_0x170b0d(0x684)+await this[_0x170b0d(0x4ba)](_0x32d377['toString']('base64'))):(await this['saveMediaToFile'](_0x32d377,_0xb62803),_0x50ca9f=_0x170b0d(0x684)+_0xb62803);let _0x132963=this[_0x170b0d(0x62b)][_0x170b0d(0x602)]('SERVER')['URL'];if(!_0x132963){let _0x198b2a=this[_0x170b0d(0x62b)][_0x170b0d(0x602)](_0x170b0d(0x4d2));_0x132963=_0x170b0d(0x5db)+(_0x198b2a&&_0x198b2a[_0x170b0d(0x78d)][_0x170b0d(0x5ac)]('/')[0x4]);}_0x50ca9f=''+_0x132963+_0x50ca9f;let _0x26f68=0xc*0x3c*0x3c*0x3e8,_0x340088={'where':{'_id':_0x3f6aa2[_0x170b0d(0x662)]['id']}},_0x4a9d6c={'message_normalized.fileUrl':_0x50ca9f,'message_normalized.expires_fileUrl':Date[_0x170b0d(0x7e2)]()+_0x26f68};try{let _0x1756d0=await this[_0x170b0d(0x726)][_0x170b0d(0x58c)][_0x170b0d(0x635)](_0x340088,_0x4a9d6c,this[_0x170b0d(0x21a)][_0x170b0d(0x1fb)]);_0x1756d0&&j(this[_0x170b0d(0x476)],'messages',{'message':_0x1756d0});}catch(_0x3936a5){this[_0x170b0d(0x711)][_0x170b0d(0x2d9)](this['instanceName']+'\x20('+this[_0x170b0d(0x21a)]['wuid']+_0x170b0d(0x719)+(_0x3936a5 instanceof Error?_0x3936a5[_0x170b0d(0x58c)]:JSON['stringify'](_0x3936a5,null,0x2)));}return{'mediaType':_0x4d2ee4,'fileName':_0x19c18d[_0x170b0d(0x6ee)],'caption':_0x19c18d[_0x170b0d(0x50b)],'size':{'fileLength':_0x19c18d[_0x170b0d(0x4d9)],'height':_0x19c18d[_0x170b0d(0x2f9)],'width':_0x19c18d[_0x170b0d(0x3c5)]},'mimetype':_0x19c18d[_0x170b0d(0x6f0)],'base64':_0x32d377['toString']('base64'),'fileUrl':_0x50ca9f,'expires_fileUrl':Date[_0x170b0d(0x7e2)]()+_0x26f68};}catch(_0x37cf60){throw this[_0x170b0d(0x711)]['error'](this[_0x170b0d(0x476)]+'\x20('+this['instance']['wuid']+_0x170b0d(0x719)+(_0x37cf60 instanceof Error?_0x37cf60[_0x170b0d(0x58c)]:JSON[_0x170b0d(0x35b)](_0x37cf60,null,0x2))),new h(_0x37cf60[_0x170b0d(0x28f)]());}}async[a0_0x108f24(0x1cd)](_0x36b715,_0x528ce4){const _0x59641a=a0_0x108f24;console[_0x59641a(0x472)](_0x59641a(0x330),__dirname),console['log']('Original\x20filename:',_0x528ce4);let _0x4f6bac=P[_0x59641a(0x543)]['join'](__dirname,_0x59641a(0x66f));console['log'](_0x59641a(0x33f),_0x4f6bac),k[_0x59641a(0x470)](_0x4f6bac)||(this['logger'][_0x59641a(0x472)](_0x59641a(0x63e)),k[_0x59641a(0x5fb)](_0x4f6bac,{'recursive':!0x0}));let _0x2454eb=P['default'][_0x59641a(0x631)](_0x4f6bac,_0x528ce4);return console[_0x59641a(0x472)](_0x59641a(0x6ec),_0x2454eb),new Promise((_0x432eb2,_0x5f77b3)=>{const _0x2edbf0=_0x59641a;k[_0x2edbf0(0x4dc)](_0x2454eb,_0x36b715,_0x245be0=>{const _0x1689fe=_0x2edbf0;_0x245be0?(this[_0x1689fe(0x711)][_0x1689fe(0x2d9)](_0x1689fe(0x306)+(_0x245be0 instanceof Error?_0x245be0['message']:JSON['stringify'](_0x245be0,null,0x2))),_0x5f77b3(_0x245be0)):(this[_0x1689fe(0x711)]['log'](_0x1689fe(0x1f1)+_0x2454eb),_0x432eb2(_0x2454eb));});});}async[a0_0x108f24(0x574)](_0x315722){const _0x24e1e7=a0_0x108f24;return await this[_0x24e1e7(0x726)]['contact'][_0x24e1e7(0x731)](_0x315722,this[_0x24e1e7(0x21a)][_0x24e1e7(0x1fb)]);}async[a0_0x108f24(0x6b2)](){const _0x4fbf5d=a0_0x108f24;return await this[_0x4fbf5d(0x726)][_0x4fbf5d(0x651)][_0x4fbf5d(0x731)]({'where':{}},this[_0x4fbf5d(0x21a)][_0x4fbf5d(0x1fb)]);}async['fetchMessages'](_0x53f83d){const _0x43bf49=a0_0x108f24;return await this[_0x43bf49(0x726)][_0x43bf49(0x58c)][_0x43bf49(0x731)](_0x53f83d,this[_0x43bf49(0x21a)][_0x43bf49(0x1fb)]);}async[a0_0x108f24(0x57e)](){const _0x1abae5=a0_0x108f24;let _0x454df3=[{'query':{'where':{'owner':this[_0x1abae5(0x21a)][_0x1abae5(0x1fb)],'leadInfo.tags':{'$exists':!0x1}}},'update':{'leadInfo':{'tags':[]}}},{'query':{'where':{'owner':this[_0x1abae5(0x21a)][_0x1abae5(0x1fb)],'leadInfo.customFields':{'$exists':!0x1}}},'update':{'leadInfo':{'customFields':[]}}}];return await this['repository'][_0x1abae5(0x1e1)][_0x1abae5(0x7a3)](_0x454df3),this[_0x1abae5(0x7cb)](),await this[_0x1abae5(0x726)][_0x1abae5(0x1e1)][_0x1abae5(0x731)]({'where':{}},this[_0x1abae5(0x21a)][_0x1abae5(0x1fb)]);}async['ensureChatIdsExist'](){const _0x280067=a0_0x108f24;let _0x1af6a3=await this[_0x280067(0x726)][_0x280067(0x1e1)][_0x280067(0x731)]({'where':{}},this['instance'][_0x280067(0x1fb)]);for(let _0x5d035e of _0x1af6a3)for(let _0x486ff3=0x0;_0x486ff3<_0x5d035e[_0x280067(0x5dd)]['customFields']['length'];_0x486ff3++)if(!_0x5d035e[_0x280067(0x5dd)][_0x280067(0x230)][_0x486ff3]['chatId']){let _0x14c22b={'where':{'_id':_0x5d035e['_id']}},_0x31db2e={[_0x280067(0x507)+_0x486ff3+_0x280067(0x4d4)]:_0x5d035e[_0x280067(0x5ee)]};await this[_0x280067(0x726)]['chat'][_0x280067(0x4c9)](_0x14c22b,_0x31db2e,this[_0x280067(0x21a)]['wuid']);}}async[a0_0x108f24(0x245)](_0x125d56){const _0x334b21=a0_0x108f24;console[_0x334b21(0x472)](_0x334b21(0x717)),console['log'](_0x334b21(0x234)),console[_0x334b21(0x472)](_0x125d56),console[_0x334b21(0x472)](_0x334b21(0x234));try{if(!Array['isArray'](_0x125d56)||_0x125d56[_0x334b21(0x231)]===0x0)throw new Error(_0x334b21(0x27a));let _0x247151=[],_0x2cd09a=[];for(let _0xf2b391 of _0x125d56){if(_0xf2b391[_0x334b21(0x5ee)])_0xf2b391[_0x334b21(0x5ee)]=this['createJid'](_0xf2b391[_0x334b21(0x5ee)]);else continue;await this[_0x334b21(0x726)][_0x334b21(0x1e1)][_0x334b21(0x624)]({'where':{'_id':_0xf2b391[_0x334b21(0x5ee)]}},this[_0x334b21(0x21a)]['wuid'])?_0x2cd09a[_0x334b21(0x1d0)]({'_id':_0xf2b391[_0x334b21(0x5ee)],'leadInfo':_0xf2b391[_0x334b21(0x5dd)],'owner':this[_0x334b21(0x21a)]['wuid']}):_0x247151[_0x334b21(0x1d0)]({'_id':_0xf2b391['_id'],'owner':this[_0x334b21(0x21a)][_0x334b21(0x1fb)],'leadInfo':_0xf2b391[_0x334b21(0x5dd)]});}return _0x2cd09a['length']>0x0&&await this[_0x334b21(0x726)][_0x334b21(0x1e1)]['updateMany'](_0x2cd09a[_0x334b21(0x49e)](_0x16cad3=>({'query':{'where':{'_id':_0x16cad3[_0x334b21(0x5ee)],'owner':this['instance'][_0x334b21(0x1fb)]}},'update':_0x16cad3}))),_0x247151[_0x334b21(0x231)]>0x0&&await this[_0x334b21(0x726)][_0x334b21(0x1e1)][_0x334b21(0x42c)](_0x247151,this[_0x334b21(0x21a)][_0x334b21(0x1fb)]),{'updated':_0x2cd09a['length'],'inserted':_0x247151[_0x334b21(0x231)]};}catch(_0x36d266){throw console[_0x334b21(0x2d9)](_0x334b21(0x50f),_0x36d266),_0x36d266;}}async['fetchPrivacySettings'](){const _0x4935f7=a0_0x108f24;return await this[_0x4935f7(0x3d0)][_0x4935f7(0x385)]();}async['updatePrivacySettings'](_0x38fa8a){const _0x559fd2=a0_0x108f24;try{return await this[_0x559fd2(0x3d0)]['updateReadReceiptsPrivacy'](_0x38fa8a[_0x559fd2(0x255)][_0x559fd2(0x6f1)]),await this[_0x559fd2(0x3d0)]['updateProfilePicturePrivacy'](_0x38fa8a[_0x559fd2(0x255)][_0x559fd2(0x5d9)]),await this['client'][_0x559fd2(0x1d6)](_0x38fa8a[_0x559fd2(0x255)][_0x559fd2(0x60e)]),await this['client'][_0x559fd2(0x601)](_0x38fa8a['privacySettings']['online']),await this[_0x559fd2(0x3d0)][_0x559fd2(0x755)](_0x38fa8a[_0x559fd2(0x255)][_0x559fd2(0x522)]),await this['client'][_0x559fd2(0x685)](_0x38fa8a[_0x559fd2(0x255)][_0x559fd2(0x1cf)]),this[_0x559fd2(0x3d0)]?.['ws']?.[_0x559fd2(0x4b6)](),{'update':_0x559fd2(0x526),'data':{'readreceipts':_0x38fa8a[_0x559fd2(0x255)]['readreceipts'],'profile':_0x38fa8a['privacySettings'][_0x559fd2(0x5d9)],'status':_0x38fa8a[_0x559fd2(0x255)]['status'],'online':_0x38fa8a[_0x559fd2(0x255)][_0x559fd2(0x224)],'last':_0x38fa8a[_0x559fd2(0x255)][_0x559fd2(0x522)],'groupadd':_0x38fa8a[_0x559fd2(0x255)]['groupadd']}};}catch(_0x317754){throw new O(_0x559fd2(0x73e),_0x317754[_0x559fd2(0x28f)]());}}async['fetchProfile2'](_0x2abb16){const _0x4b1b28=a0_0x108f24;let _0x52523e=_0x2abb16?this['createJid'](_0x2abb16):this[_0x4b1b28(0x3d0)]?.['user']?.['id'];this[_0x4b1b28(0x711)]['verbose'](_0x4b1b28(0x4a1)+_0x52523e);try{if(this[_0x4b1b28(0x711)][_0x4b1b28(0x5f3)](_0x4b1b28(0x1ce)),_0x2abb16){let _0x39f51d=(await this[_0x4b1b28(0x3ed)]({'numbers':[_0x52523e]}))?.['shift'](),_0x3cb5ac=await this[_0x4b1b28(0x336)](_0x39f51d?.['jid']),_0x5dd088=await this[_0x4b1b28(0x77c)](_0x39f51d?.[_0x4b1b28(0x7c1)]),_0x3407b1=await this[_0x4b1b28(0x34e)](_0x39f51d?.[_0x4b1b28(0x7c1)]);return{'wuid':_0x39f51d?.[_0x4b1b28(0x7c1)]||_0x52523e,'name':_0x39f51d?.[_0x4b1b28(0x2ec)],'numberExists':_0x39f51d?.[_0x4b1b28(0x1e7)],'picture':_0x3cb5ac?.[_0x4b1b28(0x7d9)],'status':_0x5dd088?.[_0x4b1b28(0x60e)],'isBusiness':_0x3407b1[_0x4b1b28(0x7a4)],'email':_0x3407b1?.[_0x4b1b28(0x767)],'description':_0x3407b1?.[_0x4b1b28(0x5a8)],'website':_0x3407b1?.[_0x4b1b28(0x2b4)]?.[_0x4b1b28(0x280)]()};}}catch{return this[_0x4b1b28(0x711)]['verbose']('Profile\x20not\x20found'),{'wuid':_0x52523e,'name':null,'picture':null,'status':null,'os':null,'isBusiness':!0x1};}}async[a0_0x108f24(0x670)](_0x47f4e7){const _0x54ddcf=a0_0x108f24;let _0xa2b5b5=(_0x47f4e7?this[_0x54ddcf(0x1ef)](_0x47f4e7):this[_0x54ddcf(0x3d0)]?.['user']?.['id'])[_0x54ddcf(0x6e4)](/:\d{1,2}@/g,'@');this[_0x54ddcf(0x711)][_0x54ddcf(0x5f3)](_0x54ddcf(0x4f0)+_0xa2b5b5);let _0x5bd6b4=await this['repository'][_0x54ddcf(0x46c)][_0x54ddcf(0x624)]({'where':{'_id':_0xa2b5b5}},this[_0x54ddcf(0x21a)]['wuid']),_0x26e3df=_0x5bd6b4?_0x5bd6b4[_0x54ddcf(0x687)]:null;try{let _0x3381e3=(await this[_0x54ddcf(0x3ed)]({'numbers':[_0xa2b5b5]}))?.[_0x54ddcf(0x280)](),_0x4bdc58=await this[_0x54ddcf(0x336)](_0x3381e3?.[_0x54ddcf(0x7c1)]),_0xb7acf5=await this[_0x54ddcf(0x77c)](_0x3381e3?.[_0x54ddcf(0x7c1)]),_0x4b0c3d=await this[_0x54ddcf(0x34e)](_0x3381e3?.[_0x54ddcf(0x7c1)]),_0x1b2315={'imagechat':_0x4bdc58?.['profilePictureUrl'],'contactname':_0x26e3df||null,'status':_0xb7acf5?.[_0x54ddcf(0x60e)],'isBusiness':_0x4b0c3d['isBusiness'],'email':_0x4b0c3d?.[_0x54ddcf(0x767)],'description':_0x4b0c3d?.['description'],'website':_0x4b0c3d?.[_0x54ddcf(0x2b4)]?.['shift'](),'lastcache':Date[_0x54ddcf(0x7e2)]()},_0x46bc74=await this[_0x54ddcf(0x726)][_0x54ddcf(0x1e1)]['updateOne']({'where':{'_id':_0xa2b5b5}},_0x1b2315,this[_0x54ddcf(0x21a)]['wuid']),_0x5e4492={'owner':this['instance'][_0x54ddcf(0x1fb)],'_id':_0xa2b5b5,'profilePictureUrl':_0x4bdc58?.[_0x54ddcf(0x7d9)],'status':_0xb7acf5?.[_0x54ddcf(0x60e)]};return this['repository'][_0x54ddcf(0x46c)][_0x54ddcf(0x635)]([_0x5e4492],this[_0x54ddcf(0x21a)][_0x54ddcf(0x1fb)]),_0x46bc74&&j(this['instanceName'],'chats',{'chat':_0x46bc74}),{'wuid':_0x3381e3?.[_0x54ddcf(0x7c1)]||_0xa2b5b5,'name':_0x3381e3?.['name'],'numberExists':_0x3381e3?.[_0x54ddcf(0x1e7)],'picture':_0x4bdc58?.[_0x54ddcf(0x7d9)],'status':_0xb7acf5?.[_0x54ddcf(0x60e)],'isBusiness':_0x4b0c3d[_0x54ddcf(0x7a4)],'email':_0x4b0c3d?.['email'],'description':_0x4b0c3d?.['description'],'website':_0x4b0c3d?.[_0x54ddcf(0x2b4)]?.['shift']()};}catch(_0xa3e474){return this[_0x54ddcf(0x711)]['error']('Error\x20fetching\x20and\x20updating\x20profile:\x20'+(_0xa3e474 instanceof Error?_0xa3e474[_0x54ddcf(0x58c)]:JSON[_0x54ddcf(0x35b)](_0xa3e474,null,0x2))),{};}}async[a0_0x108f24(0x34e)](_0x4911ee){const _0x433b0d=a0_0x108f24;this[_0x433b0d(0x711)][_0x433b0d(0x5f3)](_0x433b0d(0x669));try{let _0xc5b53f=_0x4911ee?this[_0x433b0d(0x1ef)](_0x4911ee):this[_0x433b0d(0x21a)][_0x433b0d(0x1fb)],_0x5a71d4=await this[_0x433b0d(0x3d0)]['getBusinessProfile'](_0xc5b53f);return this[_0x433b0d(0x711)][_0x433b0d(0x5f3)](_0x433b0d(0x405)),_0x5a71d4?(this[_0x433b0d(0x711)]['verbose']('Business\x20profile\x20fetched'),{'isBusiness':!0x0,..._0x5a71d4}):{'isBusiness':!0x1,'message':_0x433b0d(0x65b),...(await this['whatsappNumber']({'numbers':[_0xc5b53f]}))?.[_0x433b0d(0x280)]()};}catch(_0x1a7583){throw new O(_0x433b0d(0x6c9),_0x1a7583[_0x433b0d(0x28f)]());}}async[a0_0x108f24(0x77c)](_0x545854){const _0xa1f3fe=a0_0x108f24;let _0x3aadd7=this[_0xa1f3fe(0x1ef)](_0x545854);try{return{'wuid':_0x3aadd7,'status':(await this[_0xa1f3fe(0x3d0)][_0xa1f3fe(0x5ab)](_0x3aadd7))?.['status']};}catch{return{'wuid':_0x3aadd7,'status':null};}}async[a0_0x108f24(0x4ea)](_0x4c53b7){const _0x54e943=a0_0x108f24;try{return await this[_0x54e943(0x3d0)][_0x54e943(0x4ea)](_0x4c53b7),{'update':'success'};}catch(_0x1b3cf1){throw new O(_0x54e943(0x6c9),_0x1b3cf1['toString']());}}async[a0_0x108f24(0x261)](_0x1bec9f){const _0x30971d=a0_0x108f24;try{return await this['client']['updateProfileStatus'](_0x1bec9f),{'update':_0x30971d(0x526)};}catch(_0x338003){throw new O(_0x30971d(0x20e),_0x338003['toString']());}}async[a0_0x108f24(0x772)](_0x299c69){const _0x38ae2c=a0_0x108f24;try{let _0x302b15;if((0x0,$[_0x38ae2c(0x444)])(_0x299c69)){let _0x2b3710=new Date()[_0x38ae2c(0x644)](),_0x24774f=_0x299c69+_0x38ae2c(0x2b6)+_0x2b3710;_0x302b15=(await te[_0x38ae2c(0x543)][_0x38ae2c(0x602)](_0x24774f,{'responseType':_0x38ae2c(0x29c)}))[_0x38ae2c(0x3b7)];}else{if((0x0,$['isBase64'])(_0x299c69))_0x302b15=Buffer[_0x38ae2c(0x446)](_0x299c69,'base64');else throw new h(_0x38ae2c(0x50d));}return await this[_0x38ae2c(0x3d0)][_0x38ae2c(0x772)](this[_0x38ae2c(0x21a)]['wuid'],_0x302b15),{'update':'success'};}catch(_0x3300eb){throw new O(_0x38ae2c(0x3bc),_0x3300eb[_0x38ae2c(0x28f)]());}}async['removeProfilePicture'](){const _0x2203dd=a0_0x108f24;try{return await this['client']['removeProfilePicture'](this[_0x2203dd(0x21a)]['wuid']),{'update':'success'};}catch(_0x103c70){throw new O(_0x2203dd(0x7c0),_0x103c70[_0x2203dd(0x28f)]());}}async[a0_0x108f24(0x69b)](_0x7689a6){const _0x9a6299=a0_0x108f24;try{let _0x5b98a9=_0x7689a6[_0x9a6299(0x4f7)][_0x9a6299(0x49e)](_0x4c8610=>this[_0x9a6299(0x1ef)](_0x4c8610)),{id:_0x5005c9}=await this[_0x9a6299(0x3d0)][_0x9a6299(0x26f)](_0x7689a6[_0x9a6299(0x47a)],_0x5b98a9);return _0x7689a6?.[_0x9a6299(0x5a8)]&&await this[_0x9a6299(0x3d0)][_0x9a6299(0x6a7)](_0x5005c9,_0x7689a6[_0x9a6299(0x5a8)]),{'metadata':await this[_0x9a6299(0x3d0)][_0x9a6299(0x2e3)](_0x5005c9)};}catch(_0x3b6f48){throw this['logger'][_0x9a6299(0x2d9)](this[_0x9a6299(0x476)]+'\x20('+this[_0x9a6299(0x21a)]['wuid']+_0x9a6299(0x719)+(_0x3b6f48 instanceof Error?_0x3b6f48[_0x9a6299(0x58c)]:JSON[_0x9a6299(0x35b)](_0x3b6f48,null,0x2))),new O(_0x9a6299(0x561),_0x3b6f48[_0x9a6299(0x28f)]());}}async[a0_0x108f24(0x567)](_0x39fb59){const _0x2ac9f4=a0_0x108f24;try{let _0x29d830;if((0x0,$[_0x2ac9f4(0x444)])(_0x39fb59['image'])){let _0x104416=new Date()[_0x2ac9f4(0x644)](),_0x41ab0b=_0x39fb59[_0x2ac9f4(0x66a)]+'?timestamp='+_0x104416;_0x29d830=(await te[_0x2ac9f4(0x543)][_0x2ac9f4(0x602)](_0x41ab0b,{'responseType':_0x2ac9f4(0x29c)}))['data'];}else{if((0x0,$['isBase64'])(_0x39fb59[_0x2ac9f4(0x66a)]))_0x29d830=Buffer['from'](_0x39fb59[_0x2ac9f4(0x66a)],_0x2ac9f4(0x54a));else throw new h(_0x2ac9f4(0x50d));}return await this[_0x2ac9f4(0x3d0)][_0x2ac9f4(0x772)](_0x39fb59[_0x2ac9f4(0x491)],_0x29d830),{'update':_0x2ac9f4(0x526)};}catch(_0x4d831a){throw new O('Error\x20update\x20group\x20picture',_0x4d831a[_0x2ac9f4(0x28f)]());}}async[a0_0x108f24(0x25e)](_0x5683b7,_0x5f1a2d='out'){const _0x34ba13=a0_0x108f24;try{let _0x472aa3=await this['client'][_0x34ba13(0x2e3)](_0x5683b7[_0x34ba13(0x491)]),_0x58a7d0=null;try{_0x58a7d0=(await this[_0x34ba13(0x336)](_0x5683b7[_0x34ba13(0x491)]))[_0x34ba13(0x7d9)];}catch(_0x5df94d){this['logger'][_0x34ba13(0x5f3)](this[_0x34ba13(0x476)]+'\x20('+this['instance']['wuid']+_0x34ba13(0x220)+_0x5683b7[_0x34ba13(0x491)]+':\x20'+(_0x5df94d instanceof Error?_0x5df94d[_0x34ba13(0x58c)]:JSON['stringify'](_0x5df94d,null,0x2)));}let _0x3acdc2=await this['repository']['chat'][_0x34ba13(0x4c9)]({'where':{'_id':_0x5683b7[_0x34ba13(0x491)]}},{'imagechat':_0x58a7d0,'name':_0x472aa3['subject'],'group_size':_0x472aa3[_0x34ba13(0x5e8)],'group_announce':_0x472aa3[_0x34ba13(0x2bb)],'lastcache':Date[_0x34ba13(0x7e2)]()},this[_0x34ba13(0x21a)][_0x34ba13(0x1fb)]);return _0x3acdc2&&j(this['instanceName'],'chats',{'chat':_0x3acdc2}),{'metadata':_0x472aa3,'image':_0x58a7d0};}catch(_0x5095){if(_0x5f1a2d===_0x34ba13(0x5b3))return;throw new L('Error\x20fetching\x20group',_0x5095['toString']());}}async['groupDesc'](_0x182e96){const _0x583c54=a0_0x108f24;try{return await this['client'][_0x583c54(0x6a7)](_0x182e96[_0x583c54(0x491)],_0x182e96[_0x583c54(0x5a8)]),{'update':'success'};}catch(_0x2ec88b){throw new O(_0x583c54(0x3bd),_0x2ec88b[_0x583c54(0x28f)]());}}async[a0_0x108f24(0x62c)](_0x359721){const _0x5105a9=a0_0x108f24;try{return await this[_0x5105a9(0x3d0)][_0x5105a9(0x34d)](_0x359721[_0x5105a9(0x491)],_0x359721[_0x5105a9(0x2ec)]),{'update':_0x5105a9(0x526)};}catch(_0x257dcf){throw new O(_0x5105a9(0x1fc),_0x257dcf[_0x5105a9(0x28f)]());}}async[a0_0x108f24(0x4f1)](_0x48180f){const _0x91ced6=a0_0x108f24;try{return await this['client'][_0x91ced6(0x50a)](_0x48180f[_0x91ced6(0x491)],_0x48180f[_0x91ced6(0x52b)]),{'update':_0x91ced6(0x526)};}catch(_0x3ca122){throw new O(_0x91ced6(0x668),_0x3ca122[_0x91ced6(0x28f)]());}}async[a0_0x108f24(0x30d)](){const _0x1c84b5=a0_0x108f24;try{let _0xeb9a34=[],_0x607b63=await this[_0x1c84b5(0x3d0)][_0x1c84b5(0x205)](),_0x146d25=Object[_0x1c84b5(0x1be)](_0x607b63),_0x4ae34d=_0x146d25['filter'](_0x18c3fe=>(0x0,w[_0x1c84b5(0x334)])(_0x18c3fe?.['id']))[_0x1c84b5(0x49e)](async _0x3effd7=>{const _0x5e23f2=_0x1c84b5;try{return await this[_0x5e23f2(0x3d0)][_0x5e23f2(0x7d9)](_0x3effd7['id'],_0x5e23f2(0x3b4));}catch(_0x4da578){return this[_0x5e23f2(0x711)][_0x5e23f2(0x5f3)](this[_0x5e23f2(0x476)]+'\x20('+this['instance']['wuid']+_0x5e23f2(0x220)+_0x3effd7['id']+':\x20'+(_0x4da578 instanceof Error?_0x4da578[_0x5e23f2(0x58c)]:JSON['stringify'](_0x4da578,null,0x2))),null;}}),_0x2fc739=await Promise['all'](_0x4ae34d);for(let _0x1f3abc=0x0;_0x1f3abc<_0x146d25[_0x1c84b5(0x231)];_0x1f3abc++){let _0x2081e1=_0x146d25[_0x1f3abc];(0x0,w[_0x1c84b5(0x334)])(_0x2081e1?.['id'])&&_0xeb9a34[_0x1c84b5(0x1d0)]({'groupJid':_0x2081e1?.['id'],'subject':_0x2081e1?.[_0x1c84b5(0x47a)],'subjectOwner':_0x2081e1?.['subjectOwner']?.['split']('@')[0x0],'subjectTime':_0x2081e1?.[_0x1c84b5(0x28d)],'size':_0x2081e1?.['participants']?.['length'],'owner':_0x2081e1?.[_0x1c84b5(0x6e8)]?.[_0x1c84b5(0x5ac)]('@')[0x0],'creation':_0x2081e1?.[_0x1c84b5(0x58e)],'desc':_0x2081e1?.['desc'],'restrict':_0x2081e1?.[_0x1c84b5(0x360)],'announce':_0x2081e1?.[_0x1c84b5(0x2bb)],'image':_0x2fc739[_0x1f3abc]});}return _0xeb9a34;}catch(_0x1f15d2){throw new L(_0x1c84b5(0x68e),_0x1f15d2[_0x1c84b5(0x28f)]());}}async[a0_0x108f24(0x7c4)](_0x49d7d7){const _0x2887d8=a0_0x108f24;try{let _0x1183c8=await this[_0x2887d8(0x3d0)][_0x2887d8(0x4df)](_0x49d7d7[_0x2887d8(0x491)]);return{'inviteUrl':'https://chat.whatsapp.com/'+_0x1183c8,'inviteCode':_0x1183c8};}catch(_0x3ec007){throw new L('No\x20invite\x20code',_0x3ec007['toString']());}}async['revokeInviteCode'](_0x440b98){const _0x39ccae=a0_0x108f24;try{let _0x1d2875=await this['client'][_0x39ccae(0x26b)](_0x440b98['groupJid']);return{'revoked':!0x0,'inviteUrl':_0x39ccae(0x625)+_0x1d2875,'inviteCode':_0x1d2875};}catch(_0x1d8ec6){throw new L(_0x39ccae(0x1cb),_0x1d8ec6[_0x39ccae(0x28f)]());}}async[a0_0x108f24(0x75a)](_0x1e6725){const _0x3d3251=a0_0x108f24;try{if((0x0,$[_0x3d3251(0x444)])(_0x1e6725[_0x3d3251(0x7c4)]))var _0x9191bf=_0x1e6725[_0x3d3251(0x7c4)]['split']('/')[0x3];else var _0x9191bf=_0x1e6725[_0x3d3251(0x7c4)];let _0x36cf67=await this[_0x3d3251(0x3d0)][_0x3d3251(0x458)](_0x9191bf);return this[_0x3d3251(0x711)][_0x3d3251(0x5f3)](this[_0x3d3251(0x476)]+'\x20('+this[_0x3d3251(0x21a)][_0x3d3251(0x1fb)]+_0x3d3251(0x719)+_0x36cf67),{'join':!0x0,'inviteCode':_0x9191bf,'groupJid':_0x36cf67};}catch(_0x52ffa0){throw new L(_0x3d3251(0x6c7),_0x52ffa0[_0x3d3251(0x28f)]());}}async['findParticipants'](_0xf83211){const _0x31515a=a0_0x108f24;try{return{'participants':(await this['client'][_0x31515a(0x2e3)](_0xf83211['groupJid']))[_0x31515a(0x4f7)]};}catch(_0x1c7eb4){throw new L(_0x31515a(0x1e2),_0x1c7eb4['toString']());}}async[a0_0x108f24(0x7f2)](_0x24e30c){const _0x247392=a0_0x108f24;try{let _0xfe94b=_0x24e30c[_0x247392(0x4f7)][_0x247392(0x49e)](_0x30666c=>this[_0x247392(0x1ef)](_0x30666c));return{'updateParticipants':await this[_0x247392(0x3d0)]['groupParticipantsUpdate'](_0x24e30c[_0x247392(0x491)],_0xfe94b,_0x24e30c['action'])};}catch(_0x22115a){throw new h(_0x247392(0x4b0),_0x22115a[_0x247392(0x28f)]());}}async[a0_0x108f24(0x1ea)](_0x3bbe9a){const _0x562988=a0_0x108f24;try{let _0x121314=await this['client'][_0x562988(0x2ae)](_0x3bbe9a[_0x562988(0x491)],_0x3bbe9a[_0x562988(0x4b4)]);return{'success':!0x0};}catch(_0x4dc4bd){throw new h(_0x562988(0x415),_0x4dc4bd[_0x562988(0x28f)]());}}async['leaveGroup'](_0x1c3c9c){const _0x308c81=a0_0x108f24;try{return await this['client'][_0x308c81(0x54e)](_0x1c3c9c['groupJid']),{'groupJid':_0x1c3c9c[_0x308c81(0x491)],'leave':!0x0};}catch(_0x1cc039){throw new h(_0x308c81(0x38c),_0x1cc039['toString']());}}async[a0_0x108f24(0x49b)](_0x56dcd6){const _0x1c32e8=a0_0x108f24;return await this[_0x1c32e8(0x62e)](_0x56dcd6[_0x1c32e8(0x53e)],{'poll':{'name':_0x56dcd6['pollMessage']?.[_0x1c32e8(0x2ec)],'selectableCount':_0x56dcd6[_0x1c32e8(0x49b)]['selectableCount'],'values':_0x56dcd6[_0x1c32e8(0x49b)][_0x1c32e8(0x1be)]}},_0x56dcd6?.[_0x1c32e8(0x797)]);}async['listMessage'](_0x2f0ff1){const _0xe33f6f=a0_0x108f24;return await this[_0xe33f6f(0x62e)](_0x2f0ff1[_0xe33f6f(0x53e)],{'listMessage':{'title':_0x2f0ff1['listMessage'][_0xe33f6f(0x408)],'description':_0x2f0ff1['listMessage'][_0xe33f6f(0x5a8)],'buttonText':_0x2f0ff1['listMessage']?.[_0xe33f6f(0x247)],'footerText':_0x2f0ff1[_0xe33f6f(0x7cf)]?.[_0xe33f6f(0x394)],'sections':_0x2f0ff1[_0xe33f6f(0x7cf)]['sections'],'listType':0x2}},_0x2f0ff1?.[_0xe33f6f(0x797)]);}async['menuMessage'](_0x5f1c78){const _0x1b9922=a0_0x108f24;let _0xee8b81;if(_0x5f1c78[_0x1b9922(0x763)]['type']==='list'){let _0xc0f7ed=_0x5f1c78[_0x1b9922(0x763)]['text'][_0x1b9922(0x3cb)]('\x0a'),_0x102d05='',_0x279122='';_0xc0f7ed!==-0x1?(_0x102d05=_0x5f1c78[_0x1b9922(0x763)]['text']['substring'](0x0,_0xc0f7ed)[_0x1b9922(0x37f)](),_0x279122=_0x5f1c78['menuMessage'][_0x1b9922(0x341)][_0x1b9922(0x6b7)](_0xc0f7ed+0x1)):_0x279122=_0x5f1c78[_0x1b9922(0x763)]['text'];let _0x42c45f=this[_0x1b9922(0x3d4)](_0x5f1c78['menuMessage']['choices']);_0xee8b81={'listMessage':{'title':_0x102d05,'description':_0x279122,'buttonText':_0x5f1c78[_0x1b9922(0x763)]['buttonText']||'Selecione','footerText':_0x5f1c78[_0x1b9922(0x763)][_0x1b9922(0x394)],'sections':_0x42c45f,'listType':0x2}};}else{if(_0x5f1c78['menuMessage'][_0x1b9922(0x4bb)]==='poll'){let _0x562b93=_0x5f1c78[_0x1b9922(0x763)][_0x1b9922(0x5f7)][_0x1b9922(0x517)](_0x58560d=>!(_0x58560d[_0x1b9922(0x418)]('[')&&_0x58560d[_0x1b9922(0x4d5)](']')))['map'](_0x79afd5=>_0x79afd5[_0x1b9922(0x5ac)]('\x0a')[0x0]);_0xee8b81={'poll':{'name':_0x5f1c78[_0x1b9922(0x763)][_0x1b9922(0x341)],'selectableCount':_0x5f1c78['menuMessage'][_0x1b9922(0x238)]||0x1,'values':_0x562b93}};}}return await this[_0x1b9922(0x62e)](_0x5f1c78[_0x1b9922(0x53e)],_0xee8b81,_0x5f1c78?.[_0x1b9922(0x797)]);}[a0_0x108f24(0x3d4)](_0x234ad7){const _0x8d2c5=a0_0x108f24;let _0x4ee7d3=[],_0x176f59={'rows':[]};return _0x234ad7[_0x8d2c5(0x2ab)](_0x19a4cd=>{const _0x570026=_0x8d2c5;if(_0x19a4cd['startsWith']('[')&&_0x19a4cd['endsWith'](']'))_0x176f59[_0x570026(0x5f6)][_0x570026(0x231)]>0x0&&_0x4ee7d3[_0x570026(0x1d0)](_0x176f59),_0x176f59={'title':_0x19a4cd[_0x570026(0x25c)](0x1,-0x1),'rows':[]};else{let _0x3d183c=_0x19a4cd[_0x570026(0x5ac)]('\x0a')[_0x570026(0x49e)](_0xc5029d=>_0xc5029d['trim']()),_0x43e5c3=_0x3d183c[0x0],_0x2aa4bc=_0x3d183c[0x1]||null,_0x21db6c=_0x3d183c[0x2]||_0x43e5c3;_0x176f59[_0x570026(0x5f6)][_0x570026(0x1d0)]({'title':_0x43e5c3,'description':_0x2aa4bc,'rowId':_0x21db6c});}}),_0x176f59[_0x8d2c5(0x5f6)][_0x8d2c5(0x231)]>0x0&&_0x4ee7d3[_0x8d2c5(0x1d0)](_0x176f59),_0x4ee7d3;}async[a0_0x108f24(0x25d)](_0x1029be,_0x3d9b87){const _0x5237d9=a0_0x108f24;if(await this[_0x5237d9(0x339)](_0x1029be,!0x0)){let _0x24ec6d={'where':{'_id':_0x1029be['id']}},_0x2d4efc={'status':[_0x3d9b87[_0x5237d9(0x60e)]][0x0]};try{let _0xb4b28f=await this[_0x5237d9(0x726)][_0x5237d9(0x58c)][_0x5237d9(0x635)](_0x24ec6d,_0x2d4efc,this['instance'][_0x5237d9(0x1fb)]);_0xb4b28f&&j(this[_0x5237d9(0x476)],_0x5237d9(0x259),{'message':_0xb4b28f});}catch{}}}['sectionsToString'](_0x11b27e){const _0x864938=a0_0x108f24;let _0x5da6bc=[];return _0x11b27e[_0x864938(0x2ab)](_0x18cfe3=>{const _0x43a344=_0x864938;_0x18cfe3[_0x43a344(0x408)]&&_0x5da6bc[_0x43a344(0x1d0)]('['+_0x18cfe3['title']+']'),_0x18cfe3[_0x43a344(0x5f6)][_0x43a344(0x2ab)](_0x52aec7=>{const _0x30171a=_0x43a344;let _0x4a19b5=_0x52aec7['title'];_0x52aec7['description']&&(_0x4a19b5+='\x0a'+_0x52aec7[_0x30171a(0x5a8)]),_0x4a19b5+='\x0a'+_0x52aec7[_0x30171a(0x4bc)],_0x5da6bc['push'](_0x4a19b5);});}),_0x5da6bc['join']('|');}[a0_0x108f24(0x70c)](_0x517a4e){const _0x4a4db2=a0_0x108f24;let _0x29baff=_0x517a4e['replace'](/\\n/g,'\x0a')[_0x4a4db2(0x5ac)]('\x0a')[_0x4a4db2(0x517)](_0x44bd70=>_0x44bd70[_0x4a4db2(0x3cd)](_0x4a4db2(0x6a5))||_0x44bd70[_0x4a4db2(0x3cd)](_0x4a4db2(0x349))),_0x41e614='';return _0x29baff['forEach'](_0x328358=>{const _0x233fe2=_0x4a4db2;let _0x24576=/TEL(?:.*):(.+)/,_0x33387d=/EMAIL(?:.*):(.+)/,_0x3a38e1=_0x328358[_0x233fe2(0x254)](_0x24576),_0x1bac49=_0x328358['match'](_0x33387d);if(_0x3a38e1){let _0x236e6e=_0x3a38e1[0x1][_0x233fe2(0x6e4)](/-| |\+|\(|\)/g,'')[_0x233fe2(0x37f)]();_0x41e614+=_0x233fe2(0x2a5)+_0x236e6e+'\x0a';}else{if(_0x1bac49){let _0x42223e=_0x1bac49[0x1]['trim']();_0x41e614+=_0x233fe2(0x4c2)+_0x42223e+'\x0a';}}}),_0x41e614[_0x4a4db2(0x37f)]();}async['updateChatWithMessage'](_0x33a748,_0x137a5f,_0x3a79a8){const _0x30465f=a0_0x108f24;if(!_0x33a748['ENABLED'])return;let _0x26918a=_0x137a5f['key'][_0x30465f(0x47b)][_0x30465f(0x6e4)](/:\d{1,2}@/g,'@'),_0x4d69b2=_0x137a5f[_0x30465f(0x662)][_0x30465f(0x310)],_0x2f0c37=_0x26918a[_0x30465f(0x4d5)](_0x30465f(0x2c8)),_0x113233=_0x137a5f[_0x30465f(0x785)]?.[_0x30465f(0x341)]||_0x137a5f[_0x30465f(0x785)]?.[_0x30465f(0x50b)]||_0x137a5f[_0x30465f(0x785)]?.['vote']||_0x137a5f[_0x30465f(0x785)]?.[_0x30465f(0x2ec)],_0x22b3b8={'lastmsg':_0x137a5f[_0x30465f(0x483)]||Date['now'](),'unreadcount':_0x4d69b2?0x0:0x1,..._0x4d69b2||_0x2f0c37?{}:{'name':_0x137a5f['pushName']},..._0x2f0c37?{'group':_0x2f0c37}:{}};if(_0x3a79a8==='MESSAGES_UPSERT'&&_0x4d69b2&&this[_0x30465f(0x3e5)]?.['flowConfig'][_0x30465f(0x7dc)]&&!_0x113233[_0x30465f(0x418)](this[_0x30465f(0x3e5)]?.[_0x30465f(0x776)][_0x30465f(0x488)])){let _0x2cdf6f=(this[_0x30465f(0x3e5)]?.[_0x30465f(0x776)][_0x30465f(0x7e9)]||0x5)*0xea60,_0x3e0dd9=Date[_0x30465f(0x7e2)]()+_0x2cdf6f;_0x22b3b8[_0x30465f(0x4d0)]=_0x3e0dd9,this['logger'][_0x30465f(0x5f3)](this[_0x30465f(0x476)]+'\x20('+this['instance'][_0x30465f(0x1fb)]+_0x30465f(0x3a1)+_0x3e0dd9+'.');}let _0x40a9bc=await this[_0x30465f(0x726)][_0x30465f(0x1e1)][_0x30465f(0x4c9)]({'where':{'_id':_0x26918a}},_0x22b3b8,this['instance'][_0x30465f(0x1fb)],{'new':!0x0,'upsert':!0x0});if(!_0x2f0c37&&(!_0x40a9bc?.[_0x30465f(0x5dd)]||!_0x40a9bc[_0x30465f(0x5dd)][_0x30465f(0x327)])&&_0x137a5f[_0x30465f(0x687)]&&!_0x4d69b2&&await this[_0x30465f(0x726)][_0x30465f(0x1e1)]['updateOne']({'where':{'_id':_0x26918a}},{'leadInfo':{'nome':_0x137a5f['pushName']}},this[_0x30465f(0x21a)]['wuid'],{'new':!0x0,'upsert':!0x1}),_0x40a9bc)j(this[_0x30465f(0x476)],'chats',{'chat':_0x40a9bc});else{this[_0x30465f(0x711)]['error'](this[_0x30465f(0x476)]+'\x20('+this[_0x30465f(0x21a)][_0x30465f(0x1fb)]+_0x30465f(0x312));return;}if(!this[_0x30465f(0x3e5)]?.[_0x30465f(0x776)]['enabled'])return this[_0x30465f(0x711)][_0x30465f(0x5f3)](this[_0x30465f(0x476)]+'\x20('+this['instance']['wuid']+_0x30465f(0x500)),null;if(_0x40a9bc[_0x30465f(0x5ee)][_0x30465f(0x3cd)](_0x30465f(0x2c8))&&this['AutomateSystem']?.['flowConfig']['ignoreGroups']===!0x0)return this['logger'][_0x30465f(0x5f3)](this[_0x30465f(0x476)]+'\x20('+this[_0x30465f(0x21a)][_0x30465f(0x1fb)]+_0x30465f(0x703)),null;if(_0x40a9bc[_0x30465f(0x5dd)]){if(_0x40a9bc[_0x30465f(0x5dd)][_0x30465f(0x7d5)]===0x0||_0x40a9bc[_0x30465f(0x5dd)][_0x30465f(0x580)])return this[_0x30465f(0x711)][_0x30465f(0x5f3)](this[_0x30465f(0x476)]+'\x20('+this[_0x30465f(0x21a)][_0x30465f(0x1fb)]+_0x30465f(0x55c)+_0x26918a+',\x20saindo.'),null;if(_0x40a9bc['leadInfo'][_0x30465f(0x7d5)]>Date[_0x30465f(0x7e2)]()&&!_0x137a5f[_0x30465f(0x785)]?.[_0x30465f(0x78b)])return this['logger'][_0x30465f(0x5f3)](this['instanceName']+'\x20('+this[_0x30465f(0x21a)][_0x30465f(0x1fb)]+_0x30465f(0x36e)+new Date(_0x40a9bc[_0x30465f(0x5dd)]['desativadoFluxoAte'])[_0x30465f(0x2b3)]()+_0x30465f(0x667)),null;}this[_0x30465f(0x711)][_0x30465f(0x5f3)](this['instanceName']+'\x20('+this[_0x30465f(0x21a)]['wuid']+_0x30465f(0x64b)),this[_0x30465f(0x660)](_0x3a79a8,_0x137a5f);}async[a0_0x108f24(0x59a)](_0x25a6b3,_0x4bde14){const _0x5af612=a0_0x108f24;if(_0x4bde14['ENABLED']){let _0x527880=_0x25a6b3['map'](async _0x6f756b=>{const _0x5a27e1=a0_0x57b5;try{let _0x26a007={'_id':_0x6f756b[_0x5a27e1(0x5ee)],'owner':_0x6f756b[_0x5a27e1(0x6e8)],'lastcache':0x0};if(_0x6f756b[_0x5a27e1(0x6c5)]!==null&&(_0x26a007[_0x5a27e1(0x6c5)]=_0x6f756b['group']),_0x6f756b[_0x5a27e1(0x2ec)]!==null&&(_0x26a007[_0x5a27e1(0x2ec)]=_0x6f756b[_0x5a27e1(0x2ec)]),_0x6f756b['contactname']!==null&&(_0x26a007[_0x5a27e1(0x541)]=_0x6f756b[_0x5a27e1(0x541)]),_0x6f756b[_0x5a27e1(0x445)]!==null&&(_0x26a007[_0x5a27e1(0x445)]=_0x6f756b[_0x5a27e1(0x445)]),_0x6f756b[_0x5a27e1(0x445)]===null&&(_0x26a007[_0x5a27e1(0x445)]=_0x5a27e1(0x246)),_0x6f756b[_0x5a27e1(0x589)]!==null&&(_0x26a007[_0x5a27e1(0x589)]=_0x6f756b['lastmsg']),_0x6f756b[_0x5a27e1(0x626)]!==null&&(_0x26a007[_0x5a27e1(0x626)]=_0x6f756b[_0x5a27e1(0x626)]),_0x6f756b[_0x5a27e1(0x610)]!==null&&(_0x26a007[_0x5a27e1(0x610)]=_0x6f756b[_0x5a27e1(0x610)]),Object[_0x5a27e1(0x686)](_0x26a007)['length']>0x0)return await this[_0x5a27e1(0x726)][_0x5a27e1(0x1e1)][_0x5a27e1(0x4c9)]({'where':{'_id':_0x6f756b[_0x5a27e1(0x5ee)]}},_0x26a007,this[_0x5a27e1(0x21a)]['wuid']);}catch(_0x117e71){return console[_0x5a27e1(0x2d9)](_0x5a27e1(0x210)+_0x6f756b[_0x5a27e1(0x5ee)]+':',_0x117e71),null;}}),_0x2d4f98=(await Promise['all'](_0x527880))[_0x5af612(0x517)](_0x4a361c=>_0x4a361c!==null)[_0x5af612(0x231)];this['logger'][_0x5af612(0x5f3)](this[_0x5af612(0x476)]+'\x20('+this[_0x5af612(0x21a)][_0x5af612(0x1fb)]+_0x5af612(0x719)+_0x2d4f98+_0x5af612(0x425)+this[_0x5af612(0x21a)][_0x5af612(0x1fb)]+_0x5af612(0x70d));}}async[a0_0x108f24(0x7ec)](_0x2d237a){const _0x41b38d=a0_0x108f24;this[_0x41b38d(0x711)][_0x41b38d(0x5f3)](this[_0x41b38d(0x476)]+'\x20('+this['instance'][_0x41b38d(0x1fb)]+_0x41b38d(0x2e8));let _0x380053={'readMessages':[{'remoteJid':_0x2d237a[_0x41b38d(0x696)][_0x41b38d(0x7ed)][_0x41b38d(0x662)][_0x41b38d(0x47b)],'fromMe':_0x2d237a[_0x41b38d(0x696)]['lastReceivedMessage'][_0x41b38d(0x662)][_0x41b38d(0x310)],'id':_0x2d237a['chatLog']['lastReceivedMessage'][_0x41b38d(0x662)]['id']}]};await this[_0x41b38d(0x66d)](_0x380053);}async[a0_0x108f24(0x660)](_0x1b0276,_0x2051bf){const _0x4ec8ef=a0_0x108f24;try{let {key:_0x263376,message_normalized:_0x5e9126}=_0x2051bf,_0x50e165=_0x5e9126,_0x1c7222=_0x5e9126[_0x4ec8ef(0x341)]||_0x5e9126[_0x4ec8ef(0x50b)]||_0x5e9126[_0x4ec8ef(0x78b)]||_0x5e9126['name'],_0x515e7b=_0x263376[_0x4ec8ef(0x47b)],_0x147905;if(_0x50e165[_0x4ec8ef(0x662)][_0x4ec8ef(0x310)]&&_0x1c7222[_0x4ec8ef(0x37f)]()!==this[_0x4ec8ef(0x3e5)]?.[_0x4ec8ef(0x776)]['stopConversation']['trim']())return this['logger'][_0x4ec8ef(0x5f3)](this[_0x4ec8ef(0x476)]+'\x20('+this['instance'][_0x4ec8ef(0x1fb)]+_0x4ec8ef(0x587)),null;if(_0x50e165[_0x4ec8ef(0x662)][_0x4ec8ef(0x310)]&&_0x1c7222[_0x4ec8ef(0x37f)]()===this[_0x4ec8ef(0x3e5)]?.[_0x4ec8ef(0x776)][_0x4ec8ef(0x43b)][_0x4ec8ef(0x37f)]()){this[_0x4ec8ef(0x711)][_0x4ec8ef(0x5f3)](this[_0x4ec8ef(0x476)]+'\x20('+this['instance']['wuid']+_0x4ec8ef(0x6ef));let _0x786c10=await this['repository'][_0x4ec8ef(0x49c)][_0x4ec8ef(0x731)]({'where':{'remoteJid':_0x515e7b,'status':_0x4ec8ef(0x691)}},this[_0x4ec8ef(0x21a)]['wuid']);this[_0x4ec8ef(0x711)]['verbose'](this['instanceName']+'\x20('+this[_0x4ec8ef(0x21a)][_0x4ec8ef(0x1fb)]+_0x4ec8ef(0x5eb)+_0x786c10);let _0x5b54e1=Date[_0x4ec8ef(0x7e2)](),_0x32be41;return this['AutomateSystem']?.[_0x4ec8ef(0x776)]['stopMinutes']===0x0?_0x32be41={'stoppedUntil':_0x5b54e1+0x7591f6200}:_0x32be41={'stoppedUntil':_0x5b54e1+this['AutomateSystem']?.['flowConfig'][_0x4ec8ef(0x538)]*0x3c*0x3e8},this[_0x4ec8ef(0x711)][_0x4ec8ef(0x5f3)](this[_0x4ec8ef(0x476)]+'\x20('+this[_0x4ec8ef(0x21a)][_0x4ec8ef(0x1fb)]+_0x4ec8ef(0x3e7)+_0x32be41),this['updateStopChat'](_0x147905,_0x32be41['stoppedUntil']),null;}if(_0x1c7222&&_0x1c7222[_0x4ec8ef(0x418)](this[_0x4ec8ef(0x3e5)]?.[_0x4ec8ef(0x776)][_0x4ec8ef(0x488)])&&_0x1c7222[_0x4ec8ef(0x231)]>0x4){let _0x25b3fb=await this['repository'][_0x4ec8ef(0x48d)]['findOne']({'where':{'startCommandWord':_0x1c7222}},this[_0x4ec8ef(0x21a)]['wuid']);if(this[_0x4ec8ef(0x711)]['verbose'](this[_0x4ec8ef(0x476)]+'\x20('+this[_0x4ec8ef(0x21a)][_0x4ec8ef(0x1fb)]+'):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.'),_0x25b3fb)_0x147905=await this[_0x4ec8ef(0x4e4)](_0x25b3fb,_0x50e165[_0x4ec8ef(0x662)],_0x50e165);else return this[_0x4ec8ef(0x711)][_0x4ec8ef(0x5f3)](this[_0x4ec8ef(0x476)]+'\x20('+this[_0x4ec8ef(0x21a)][_0x4ec8ef(0x1fb)]+_0x4ec8ef(0x1f8)),null;}else _0x147905=await this[_0x4ec8ef(0x4fd)](_0x515e7b,_0x50e165);if(_0x147905){this[_0x4ec8ef(0x711)][_0x4ec8ef(0x5f3)](this[_0x4ec8ef(0x476)]+'\x20('+this[_0x4ec8ef(0x21a)][_0x4ec8ef(0x1fb)]+_0x4ec8ef(0x2b9)),!_0x263376['fromMe']&&_0x147905[_0x4ec8ef(0x688)]&&this['readMessageBot'](_0x147905);let _0x3facb0=await this[_0x4ec8ef(0x529)](_0x147905);_0x3facb0&&await this[_0x4ec8ef(0x4e7)](_0x147905,_0x3facb0);}}catch(_0x54b9a9){this[_0x4ec8ef(0x711)][_0x4ec8ef(0x2d9)](this[_0x4ec8ef(0x476)]+'\x20('+this[_0x4ec8ef(0x21a)][_0x4ec8ef(0x1fb)]+_0x4ec8ef(0x512)+(_0x54b9a9 instanceof Error?_0x54b9a9['message']:JSON[_0x4ec8ef(0x35b)](_0x54b9a9,null,0x2)));}}[a0_0x108f24(0x539)](_0x5526aa,_0xeb67da='',_0x3e940c={},_0x282347=!0x0){const _0x4a3302=a0_0x108f24;for(let _0x2e5d55 in _0x5526aa){let _0x1743f5=_0x282347?'_'+_0x2e5d55:''+_0xeb67da+_0x2e5d55;typeof _0x5526aa[_0x2e5d55]=='object'&&_0x5526aa[_0x2e5d55]!==null?this[_0x4a3302(0x539)](_0x5526aa[_0x2e5d55],_0x1743f5+'.',_0x3e940c,!0x1):_0x3e940c[_0x1743f5]=String(_0x5526aa[_0x2e5d55]);}return _0x3e940c;}[a0_0x108f24(0x793)](_0x1af613){const _0x5ceb15=a0_0x108f24;let _0x5cb1f5={};for(let _0x3e754d of _0x1af613)typeof _0x3e754d[_0x5ceb15(0x2ec)]=='string'&&typeof _0x3e754d[_0x5ceb15(0x511)]==_0x5ceb15(0x473)&&(_0x5cb1f5[_0x3e754d[_0x5ceb15(0x2ec)]]=_0x3e754d['value']);return _0x5cb1f5;}async[a0_0x108f24(0x529)](_0x25a14d){const _0x3ce469=a0_0x108f24;if(!this[_0x3ce469(0x3e5)]?.['flowConfig'][_0x3ce469(0x7dc)]||_0x25a14d['status']!==_0x3ce469(0x691)&&_0x25a14d[_0x3ce469(0x48c)]==='')return null;let _0x32faa6=_0x25a14d['chatLog'][_0x3ce469(0x217)]||_0x3ce469(0x513);typeof _0x25a14d[_0x3ce469(0x696)][_0x3ce469(0x407)]>'u'&&(_0x25a14d[_0x3ce469(0x696)]['lastCondition']=!0x0);let _0x10d425=_0x25a14d[_0x3ce469(0x696)]['lastCondition'];this[_0x3ce469(0x711)][_0x3ce469(0x5f3)](this[_0x3ce469(0x476)]+'\x20('+this[_0x3ce469(0x21a)][_0x3ce469(0x1fb)]+_0x3ce469(0x38d)+_0x32faa6+_0x3ce469(0x67c)+_0x10d425);let _0x4b516e=_0x32faa6===_0x3ce469(0x513)?_0x25a14d[_0x3ce469(0x72c)]['find'](_0x3568ce=>_0x3568ce[_0x3ce469(0x4bb)]===_0x3ce469(0x513)):_0x25a14d[_0x3ce469(0x72c)][_0x3ce469(0x731)](_0x3a4feb=>_0x3a4feb[_0x3ce469(0x5ee)][_0x3ce469(0x28f)]()===_0x32faa6[_0x3ce469(0x28f)]());if(!_0x4b516e)return this[_0x3ce469(0x711)]['error'](this[_0x3ce469(0x476)]+'\x20('+this[_0x3ce469(0x21a)][_0x3ce469(0x1fb)]+_0x3ce469(0x309)+_0x32faa6),null;let _0x589ca1={'_pushName':_0x25a14d[_0x3ce469(0x696)][_0x3ce469(0x7ed)][_0x3ce469(0x687)],..._0x25a14d[_0x3ce469(0x696)][_0x3ce469(0x7c9)]},_0x57db9d=null;if(_0x25a14d['waitingMenu_id']){let _0x3fc3ab=_0x25a14d[_0x3ce469(0x696)][_0x3ce469(0x7ed)][_0x3ce469(0x78b)],_0x93eb5b=_0x25a14d[_0x3ce469(0x597)][_0x3ce469(0x731)](_0x118e70=>_0x118e70['option']===_0x3fc3ab);if(_0x93eb5b){let _0x1c4984=_0x93eb5b[_0x3ce469(0x395)];if(_0x57db9d=_0x25a14d[_0x3ce469(0x72c)]['find'](_0x47d509=>_0x47d509[_0x3ce469(0x566)]===_0x1c4984&&_0x47d509[_0x3ce469(0x584)]===0x1),_0x4b516e[_0x3ce469(0x3a9)][_0x3ce469(0x77e)]){let _0x468bc8={'id':_0x25a14d['waitingMenu_id'],'remoteJid':_0x25a14d['remoteJid'],'fromMe':!0x0};await this[_0x3ce469(0x6a4)](_0x468bc8);}if(_0x4b516e['uazapi'][_0x3ce469(0x77e)]&&_0x4b516e['uazapi']['pollMessageOnDelete']&&_0x4b516e[_0x3ce469(0x3a9)][_0x3ce469(0x5a6)]===_0x3ce469(0x6cd)){let _0x458a69={'number':_0x25a14d[_0x3ce469(0x47b)],'options':{'delay':0x0},'textMessage':{'text':_0x3ce469(0x3ef)+_0x25a14d[_0x3ce469(0x3df)]+_0x3ce469(0x39f)+_0x3fc3ab}};await this['textMessage'](_0x458a69);}_0x25a14d[_0x3ce469(0x60e)]=_0x3ce469(0x691),_0x25a14d[_0x3ce469(0x48c)]='',_0x25a14d[_0x3ce469(0x3df)]='',_0x25a14d[_0x3ce469(0x597)]=[];}else{this[_0x3ce469(0x711)]['verbose'](this[_0x3ce469(0x476)]+'\x20('+this[_0x3ce469(0x21a)]['wuid']+_0x3ce469(0x352));let _0x4a1cef={'activatedCount':_0x25a14d[_0x3ce469(0x696)]['blockLogs'][_0x3ce469(0x517)](_0x2ea08b=>String(_0x2ea08b[_0x3ce469(0x474)])===String(_0x32faa6))[_0x3ce469(0x231)],'moreLogs':[_0x3ce469(0x530)]};if(_0x4b516e[_0x3ce469(0x3a9)][_0x3ce469(0x5af)]){let _0x52c9aa={'number':_0x25a14d['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x4b516e[_0x3ce469(0x3a9)]['pollErrorMessage']}};await this[_0x3ce469(0x350)](_0x52c9aa);}if(_0x4b516e['maxActives']!==void 0x0&&_0x4a1cef[_0x3ce469(0x20f)]>=_0x4b516e[_0x3ce469(0x535)]){let _0x438c54=Date['now'](),_0x2fa624=_0x4b516e['stopMinutesMaxActives']??0xa;isNaN(_0x2fa624)&&(_0x2fa624=0xa);let _0x16eafe=_0x438c54+_0x2fa624*0x3c*0x3e8;_0x4a1cef[_0x3ce469(0x616)]=_0x16eafe,_0x4a1cef[_0x3ce469(0x1de)][_0x3ce469(0x1d0)](_0x3ce469(0x750)),this['updateStopChat'](_0x25a14d,_0x16eafe),_0x25a14d[_0x3ce469(0x48c)]='',_0x25a14d[_0x3ce469(0x3df)]='',_0x25a14d[_0x3ce469(0x597)]=[];}return this[_0x3ce469(0x728)](_0x25a14d,_0x4b516e,_0x4a1cef,!0x0),null;}}if(_0x10d425&&_0x4b516e[_0x3ce469(0x395)]&&!_0x25a14d[_0x3ce469(0x48c)]){let _0x34eaab=_0x25a14d[_0x3ce469(0x72c)][_0x3ce469(0x517)](_0x1a0de8=>_0x1a0de8['groupId'][_0x3ce469(0x28f)]()===_0x4b516e[_0x3ce469(0x395)][_0x3ce469(0x28f)]())[_0x3ce469(0x223)]((_0x302f94,_0x372531)=>_0x302f94[_0x3ce469(0x584)]-_0x372531[_0x3ce469(0x584)]);_0x34eaab[_0x3ce469(0x231)]>0x0&&(_0x57db9d=_0x34eaab[0x0]);}if(!_0x57db9d){let _0x3f7018=_0x4b516e['groupId'],_0x2f175b=_0x25a14d[_0x3ce469(0x72c)][_0x3ce469(0x517)](_0x3b5a48=>_0x3b5a48[_0x3ce469(0x566)]===_0x3f7018&&_0x3b5a48[_0x3ce469(0x584)]>_0x4b516e[_0x3ce469(0x584)])[_0x3ce469(0x223)]((_0x178396,_0x14996b)=>_0x178396[_0x3ce469(0x584)]-_0x14996b[_0x3ce469(0x584)]);_0x2f175b[_0x3ce469(0x231)]>0x0&&(_0x57db9d=_0x2f175b[0x0]);}if(!_0x57db9d)return _0x25a14d[_0x3ce469(0x60e)]='closed',null;_0x25a14d[_0x3ce469(0x696)][_0x3ce469(0x7c9)]=_0x589ca1;let _0x33844d=JSON[_0x3ce469(0x6aa)](JSON['stringify'](_0x57db9d));return this[_0x3ce469(0x6d9)](_0x33844d,_0x25a14d[_0x3ce469(0x696)][_0x3ce469(0x7c9)]),_0x25a14d[_0x3ce469(0x696)]['lastBlockId']=_0x33844d[_0x3ce469(0x5ee)],_0x25a14d[_0x3ce469(0x696)][_0x3ce469(0x407)]=!0x0,_0x33844d;}[a0_0x108f24(0x57d)](_0x3cf509,_0x17e350){const _0x2ac464=a0_0x108f24;return _0x3cf509[_0x2ac464(0x6e4)](/\{\{([^}]+)\}\}/g,(_0x1b0b96,_0x561323)=>_0x17e350[_0x561323]||'');}[a0_0x108f24(0x6d9)](_0x21252a,_0x24f192){const _0x475eb2=a0_0x108f24;for(let _0x471b48 in _0x21252a)typeof _0x21252a[_0x471b48]==_0x475eb2(0x473)?_0x21252a[_0x471b48]=this[_0x475eb2(0x57d)](_0x21252a[_0x471b48],_0x24f192):typeof _0x21252a[_0x471b48]==_0x475eb2(0x252)&&this['replaceVariablesInObject'](_0x21252a[_0x471b48],_0x24f192);}async[a0_0x108f24(0x7ca)](_0x5ef100,_0x5adfea){const _0x2d9aa9=a0_0x108f24;let _0x579f8c=_0x5adfea['_id'];if(_0x5ef100[_0x2d9aa9(0x696)]&&_0x5ef100[_0x2d9aa9(0x696)][_0x2d9aa9(0x6cc)]){let _0x90126e=_0x5ef100[_0x2d9aa9(0x696)][_0x2d9aa9(0x6cc)]['filter'](_0x4daacb=>String(_0x4daacb[_0x2d9aa9(0x474)])===String(_0x579f8c))[_0x2d9aa9(0x393)]();if(_0x90126e&&_0x90126e['error']&&_0x5adfea[_0x2d9aa9(0x431)])return _0x5ef100[_0x2d9aa9(0x60e)]='closed',await this[_0x2d9aa9(0x542)](_0x5ef100),null;}if(_0x5adfea[_0x2d9aa9(0x4bb)]===_0x2d9aa9(0x3a9)&&_0x5adfea[_0x2d9aa9(0x3a9)][_0x2d9aa9(0x5a2)]==='sendPoll'&&_0x5ef100['waitingMenu_id'])return _0x5ef100[_0x2d9aa9(0x696)][_0x2d9aa9(0x217)]=_0x579f8c,await this[_0x2d9aa9(0x542)](_0x5ef100),null;let _0x2dd049=await this['NextBlock'](_0x5ef100);if(_0x5ef100['chatLog']&&_0x5ef100['chatLog']['blockLogs']){let _0x9980ba=_0x5ef100[_0x2d9aa9(0x696)][_0x2d9aa9(0x6cc)][_0x2d9aa9(0x517)](_0x1d5bbb=>String(_0x1d5bbb[_0x2d9aa9(0x474)])===String(_0x579f8c))['length'];if(_0x5adfea[_0x2d9aa9(0x535)]!==void 0x0&&_0x9980ba>=_0x5adfea['maxActives']){let _0x5d7f5f=Date[_0x2d9aa9(0x7e2)](),_0x53e7b7=_0x5adfea['stopMinutesMaxActives']??0xa;isNaN(_0x53e7b7)&&(_0x53e7b7=0xa);let _0x1b0c39=_0x5d7f5f+_0x53e7b7*0x3c*0x3e8,_0xae4849={'newStoppedUntil':_0x1b0c39};return this['updateStopChat'](_0x5ef100,_0x1b0c39),this[_0x2d9aa9(0x728)](_0x5ef100,_0x5adfea,_0xae4849,!0x0),null;}}_0x2dd049&&_0x2dd049[_0x2d9aa9(0x4bb)]!==_0x2d9aa9(0x608)&&await this[_0x2d9aa9(0x4e7)](_0x5ef100,_0x2dd049),_0x2dd049||await this['saveConversationToDatabase'](_0x5ef100),_0x2dd049&&_0x2dd049['type']===_0x2d9aa9(0x608)&&(_0x5ef100[_0x2d9aa9(0x696)][_0x2d9aa9(0x217)]=_0x579f8c,await this[_0x2d9aa9(0x542)](_0x5ef100));}async['processblock'](_0x2a489c,_0x8c9273){const _0x486573=a0_0x108f24;try{let _0x2fd2e8=_0x8c9273[_0x486573(0x4bb)];this[_0x486573(0x711)][_0x486573(0x5f3)](this[_0x486573(0x476)]+'\x20('+this[_0x486573(0x21a)]['wuid']+_0x486573(0x45e)+_0x2fd2e8);let _0x380882={'uazapi':()=>this['processUazapi'](_0x2a489c,_0x8c9273),'save':()=>this[_0x486573(0x3ee)](_0x2a489c,_0x8c9273),'stop':()=>this['stopConversation'](_0x2a489c,_0x8c9273),'condition':()=>this[_0x486573(0x351)](_0x2a489c,_0x8c9273),'varedit':()=>this['processvaredits'](_0x2a489c,_0x8c9273),'apirequest':()=>this[_0x486573(0x5fa)](_0x2a489c,_0x8c9273),'goToFlow':()=>this[_0x486573(0x5c5)](_0x2a489c,_0x8c9273)}[_0x2fd2e8];_0x380882&&await _0x380882();}catch(_0x1b7b1b){this[_0x486573(0x711)][_0x486573(0x2d9)](this['instanceName']+'\x20('+this[_0x486573(0x21a)][_0x486573(0x1fb)]+_0x486573(0x60a)+(_0x1b7b1b instanceof Error?_0x1b7b1b[_0x486573(0x58c)]:JSON[_0x486573(0x35b)](_0x1b7b1b,null,0x2)));}}async[a0_0x108f24(0x5c5)](_0x55aeca,_0x4607f8){const _0x1e1a84=a0_0x108f24;if(this['logger'][_0x1e1a84(0x5f3)](this[_0x1e1a84(0x476)]+'\x20('+this[_0x1e1a84(0x21a)][_0x1e1a84(0x1fb)]+_0x1e1a84(0x804)),!_0x55aeca||!_0x4607f8)return this[_0x1e1a84(0x711)]['error'](this[_0x1e1a84(0x476)]+'\x20('+this[_0x1e1a84(0x21a)][_0x1e1a84(0x1fb)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;await this[_0x1e1a84(0x728)](_0x55aeca,_0x4607f8,{},!0x0,!0x0),console['log']('nextBlock:'),console[_0x1e1a84(0x472)](_0x4607f8);let _0x4ee3e5=_0x4607f8[_0x1e1a84(0x3ac)];console['log'](_0x1e1a84(0x4a7),_0x4ee3e5),_0x55aeca=await this[_0x1e1a84(0x75e)](_0x4ee3e5,_0x55aeca[_0x1e1a84(0x47b)],_0x55aeca['chatLog']['realVariables']),this[_0x1e1a84(0x711)][_0x1e1a84(0x5f3)](this[_0x1e1a84(0x476)]+'\x20('+this[_0x1e1a84(0x21a)]['wuid']+_0x1e1a84(0x459));let _0xe2a1d5=await this[_0x1e1a84(0x529)](_0x55aeca);_0xe2a1d5&&await this[_0x1e1a84(0x4e7)](_0x55aeca,_0xe2a1d5);}async[a0_0x108f24(0x75e)](_0x547546,_0x4e8b56,_0xf4b358){const _0xb0dd09=a0_0x108f24;this[_0xb0dd09(0x711)][_0xb0dd09(0x5f3)](this['instanceName']+'\x20('+this[_0xb0dd09(0x21a)][_0xb0dd09(0x1fb)]+_0xb0dd09(0x74a));try{if(_0x547546=await this[_0xb0dd09(0x726)][_0xb0dd09(0x48d)][_0xb0dd09(0x624)]({'where':{'name':_0x547546}},this['instance'][_0xb0dd09(0x1fb)]),!_0x547546)return this['logger'][_0xb0dd09(0x2d9)](this[_0xb0dd09(0x476)]+'\x20('+this[_0xb0dd09(0x21a)][_0xb0dd09(0x1fb)]+'):\x20Flow\x20não\x20encontrado'),null;let _0x377cb6=require(_0xb0dd09(0x40d))[_0xb0dd09(0x76a)],_0x322712=Date[_0xb0dd09(0x7e2)](),_0x3167ea=_0xb0dd09(0x513),_0x31b757={},_0x34d4dd={},_0x1f289e={..._0x547546,'chatLog':null},_0xcbb31f={'lastReceivedMessage':_0x31b757,'lastSendMessage':_0x34d4dd,'lastBlockId':_0x3167ea,'lastCondition':!0x0,'realVariables':_0xf4b358};_0x1f289e[_0xb0dd09(0x696)]=_0xcbb31f,_0x1f289e[_0xb0dd09(0x696)][_0xb0dd09(0x7c9)]={..._0xf4b358},delete _0x1f289e[_0xb0dd09(0x5ee)],_0x1f289e[_0xb0dd09(0x5ee)]=new _0x377cb6(),_0x1f289e[_0xb0dd09(0x22b)]=_0x322712,_0x1f289e[_0xb0dd09(0x60e)]=_0xb0dd09(0x691),_0x1f289e[_0xb0dd09(0x47b)]=_0x4e8b56;let _0x1bca20=await this['repository'][_0xb0dd09(0x49c)][_0xb0dd09(0x4c9)](_0x1f289e['_id'],_0x1f289e,this['instance'][_0xb0dd09(0x1fb)]);return this['logger'][_0xb0dd09(0x5f3)](this[_0xb0dd09(0x476)]+'\x20('+this[_0xb0dd09(0x21a)][_0xb0dd09(0x1fb)]+_0xb0dd09(0x5f1)),_0x1bca20?_0x1f289e:null;}catch(_0x555ea6){throw this['logger'][_0xb0dd09(0x2d9)](this[_0xb0dd09(0x476)]+'\x20('+this['instance'][_0xb0dd09(0x1fb)]+_0xb0dd09(0x46f)+(_0x555ea6 instanceof Error?_0x555ea6[_0xb0dd09(0x58c)]:JSON[_0xb0dd09(0x35b)](_0x555ea6,null,0x2))),new h(_0x555ea6['message']);}}async[a0_0x108f24(0x5fa)](_0x82975c,_0x9928ef){const _0x3169e4=a0_0x108f24;let _0x4ebe3f,_0x46b8f4;try{let _0x325fce=_0x9928ef['apirequest'];if(!_0x325fce||!_0x325fce[_0x3169e4(0x62a)]||!_0x325fce[_0x3169e4(0x79d)])throw new Error(_0x3169e4(0x33a));let _0x46a3dc={'method':_0x325fce[_0x3169e4(0x79d)],'url':_0x325fce[_0x3169e4(0x62a)],'headers':_0x325fce['header']||{},'data':_0x325fce[_0x3169e4(0x2c1)]||{}},_0x2930aa=await(0x0,te[_0x3169e4(0x543)])(_0x46a3dc),_0x599378=_0x2930aa[_0x3169e4(0x3f8)][_0x3169e4(0x355)];if(_0x599378&&_0x599378[_0x3169e4(0x3cd)]('application/json')){_0x4ebe3f=_0x2930aa[_0x3169e4(0x3b7)];let _0x4a54fa=_0x82975c[_0x3169e4(0x696)]['realVariables'],_0x4e00e7=this[_0x3169e4(0x539)](_0x4ebe3f);return Object[_0x3169e4(0x592)](_0x4a54fa,_0x4e00e7),_0x82975c[_0x3169e4(0x696)][_0x3169e4(0x7c9)]=_0x4a54fa,_0x46b8f4={'error':!0x1,'apiResponse':_0x4ebe3f},this[_0x3169e4(0x728)](_0x82975c,_0x9928ef,_0x46b8f4),_0x4ebe3f;}else{if(_0x599378&&(_0x599378['includes'](_0x3169e4(0x384))||_0x599378[_0x3169e4(0x3cd)](_0x3169e4(0x66a))||_0x599378[_0x3169e4(0x3cd)]('audio')||_0x599378[_0x3169e4(0x3cd)](_0x3169e4(0x4c4)))){let _0x2235e1=''+(0x0,me['v4'])(),_0x16323d=_0x2930aa['headers'][_0x3169e4(0x41d)];if(_0x16323d){let _0x324a0d=_0x16323d[_0x3169e4(0x254)](/filename="?(.+)"?/);if(_0x324a0d&&_0x324a0d[0x1]){let _0x13220f=_0x324a0d[0x1],_0x5c1704=P[_0x3169e4(0x543)]['extname'](_0x13220f);_0x2235e1=''+(0x0,me['v4'])()+_0x5c1704;}}let _0x389e2d=this[_0x3169e4(0x62b)][_0x3169e4(0x602)](_0x3169e4(0x6ed))['URL'];if(!_0x389e2d){let _0xbfa82a=this[_0x3169e4(0x62b)]['get'](_0x3169e4(0x4d2));_0x389e2d=_0x3169e4(0x5db)+(_0xbfa82a&&_0xbfa82a[_0x3169e4(0x78d)][_0x3169e4(0x5ac)]('/')[0x4]);}let _0xe5a982=Buffer['from'](_0x2930aa[_0x3169e4(0x3b7)]);await this['saveMediaToFile'](_0xe5a982,_0x2235e1);let _0x2eb9f2='/media/'+_0x2235e1;return _0x2eb9f2=''+_0x389e2d+_0x2eb9f2,_0x4ebe3f={'fileUrl':_0x2eb9f2},_0x82975c[_0x3169e4(0x696)][_0x3169e4(0x7c9)][_0x3169e4(0x3d5)]=_0x2eb9f2,_0x46b8f4={'error':!0x1,'apiResponse':{'fileUrl':_0x2eb9f2}},this['updateConversation'](_0x82975c,_0x9928ef,_0x46b8f4),_0x4ebe3f;}}}catch(_0x2f4e3c){console[_0x3169e4(0x2d9)]('Erro\x20ao\x20processar\x20a\x20chamada\x20API:',_0x2f4e3c),_0x2f4e3c[_0x3169e4(0x59c)]&&(_0x4ebe3f=_0x2f4e3c[_0x3169e4(0x59c)]['data']);let _0x9dfa9d=_0x82975c[_0x3169e4(0x696)][_0x3169e4(0x7c9)],_0x3e9712=this[_0x3169e4(0x539)](_0x4ebe3f);return Object[_0x3169e4(0x592)](_0x9dfa9d,_0x3e9712),_0x82975c['chatLog'][_0x3169e4(0x7c9)]=_0x9dfa9d,_0x46b8f4={'error':!0x0,'errorLog':_0x2f4e3c[_0x3169e4(0x28f)](),'apiResponse':_0x4ebe3f},this[_0x3169e4(0x728)](_0x82975c,_0x9928ef,_0x46b8f4),{'success':!0x1};}}[a0_0x108f24(0x322)](_0x94928e,_0x3cee54){const _0x2e4ce2=a0_0x108f24;let _0x2ea1b1=_0x38b78f=>{const _0x31c892=a0_0x57b5;let _0x130721=_0x38b78f['replace'](/[^0-9.,-]/g,'')[_0x31c892(0x6e4)](',','.'),_0x321b85=parseFloat(_0x130721);return isNaN(_0x321b85)?null:_0x321b85;},_0x4d6da0=_0x3cee54['firstValue'],_0x5b2ff2=_0x3cee54[_0x2e4ce2(0x7db)];typeof _0x4d6da0==_0x2e4ce2(0x473)&&(_0x4d6da0=this['replaceVariables'](_0x4d6da0,_0x94928e[_0x2e4ce2(0x696)][_0x2e4ce2(0x7c9)])??''),typeof _0x5b2ff2==_0x2e4ce2(0x473)&&(_0x5b2ff2=this[_0x2e4ce2(0x57d)](_0x5b2ff2,_0x94928e['chatLog']['realVariables'])??'');let _0x40816a=null;if(!_0x3cee54[_0x2e4ce2(0x2ad)])return null;switch(this[_0x2e4ce2(0x711)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x2e4ce2(0x1fb)]+'):\x20newFirstValue\x20após\x20replaceVariables:'+_0x4d6da0),this[_0x2e4ce2(0x711)][_0x2e4ce2(0x5f3)](this[_0x2e4ce2(0x476)]+'\x20('+this[_0x2e4ce2(0x21a)][_0x2e4ce2(0x1fb)]+_0x2e4ce2(0x6b9)+_0x5b2ff2),_0x3cee54['editOperator']){case'+':case'-':case'*':case'/':let _0x406c37=_0x2ea1b1(_0x4d6da0||'0'),_0x3494d8=_0x2ea1b1(_0x5b2ff2||'0');if(_0x406c37===null)return null;switch(_0x3cee54[_0x2e4ce2(0x2ad)]){case'+':_0x40816a=_0x406c37+(_0x3494d8??0x0);break;case'-':_0x40816a=_0x406c37-(_0x3494d8??0x0);break;case'*':_0x40816a=_0x406c37*(_0x3494d8??0x1);break;case'/':_0x3494d8!==0x0&&(_0x40816a=_0x406c37/(_0x3494d8??0x1));break;}break;case'findAndReplace':case _0x2e4ce2(0x221):let _0x226061=_0x5b2ff2,_0x422bfb=_0x3cee54['replaceValue'];if(typeof _0x422bfb==_0x2e4ce2(0x473)&&(_0x422bfb=this[_0x2e4ce2(0x57d)](_0x422bfb,_0x94928e[_0x2e4ce2(0x696)][_0x2e4ce2(0x7c9)])??''),_0x226061&&_0x422bfb!==void 0x0){let _0x3d5abe=_0x3cee54[_0x2e4ce2(0x2ad)]===_0x2e4ce2(0x2e0)?new RegExp(_0x226061[_0x2e4ce2(0x6e4)](/[-\/\\^$*+?.()|[\]{}]/g,_0x2e4ce2(0x496)),'g'):new RegExp(_0x226061,'g');_0x40816a=_0x4d6da0[_0x2e4ce2(0x6e4)](_0x3d5abe,_0x422bfb);}else console[_0x2e4ce2(0x2fb)](_0x2e4ce2(0x572));break;case'setNewValue':_0x40816a=_0x5b2ff2;break;case'extractRegex':let _0x23fbfc=_0x4d6da0[_0x2e4ce2(0x254)](new RegExp(_0x5b2ff2||''));_0x40816a=_0x23fbfc?_0x23fbfc[0x0]:'';break;case'truncatedto':_0x40816a=_0x4d6da0[_0x2e4ce2(0x25c)](0x0,parseInt(_0x5b2ff2||'0'));break;case _0x2e4ce2(0x557):let _0x23d09c=parseInt(_0x5b2ff2||'0');_0x40816a=_0x4d6da0['slice'](_0x4d6da0['length']-_0x23d09c);break;case _0x2e4ce2(0x414):let _0x250ba8=_0x2ea1b1(_0x4d6da0),_0x53e65e=parseInt(_0x5b2ff2||'0');_0x53e65e=Math[_0x2e4ce2(0x3d3)](_0x53e65e),_0x250ba8!==null?_0x40816a=_0x250ba8['toLocaleString'](_0x2e4ce2(0x6b0),{'minimumFractionDigits':_0x53e65e,'maximumFractionDigits':_0x53e65e}):(console['warn'](_0x2e4ce2(0x5f5)+_0x4d6da0),_0x40816a=null);break;case _0x2e4ce2(0x6b3):let _0x14b61e=_0x2ea1b1(_0x4d6da0);_0x14b61e!==null?_0x40816a=_0x14b61e['toLocaleString'](_0x2e4ce2(0x6b0),{'style':'currency','currency':_0x2e4ce2(0x3d9)}):(console[_0x2e4ce2(0x2fb)](_0x2e4ce2(0x258)+_0x4d6da0),_0x40816a=null);break;case _0x2e4ce2(0x1f4):_0x40816a=_0x4d6da0['toUpperCase']();break;case _0x2e4ce2(0x51a):_0x40816a=_0x4d6da0[_0x2e4ce2(0x2f2)]();break;case _0x2e4ce2(0x28b):_0x40816a=_0x4d6da0[_0x2e4ce2(0x5ac)]('\x20')[_0x2e4ce2(0x49e)](_0x388dce=>_0x388dce[_0x2e4ce2(0x1c6)](0x0)[_0x2e4ce2(0x7f0)]()+_0x388dce[_0x2e4ce2(0x25c)](0x1)['toLowerCase']())[_0x2e4ce2(0x631)]('\x20');break;case'trimmed':_0x40816a=_0x4d6da0['trim']();break;default:_0x40816a=_0x4d6da0;}return _0x40816a!==null?_0x40816a[_0x2e4ce2(0x28f)]():null;}async[a0_0x108f24(0x22f)](_0x28bcce,_0x2bdac5){const _0x4b6e49=a0_0x108f24;try{let _0x59a73e=_0x28bcce[_0x4b6e49(0x6af)]?.['filter'](_0x4224e8=>_0x4224e8[_0x4b6e49(0x474)]===_0x2bdac5[_0x4b6e49(0x5ee)]?.[_0x4b6e49(0x28f)]())||[],_0x22c83c=_0x2bdac5[_0x4b6e49(0x248)],_0x1b4c6a=null,_0x3a2edc=[],_0x3bfdcc=_0x28bcce[_0x4b6e49(0x696)][_0x4b6e49(0x7c9)][_0x22c83c];_0x3a2edc[_0x4b6e49(0x1d0)](_0x4b6e49(0x3a0)+_0x3bfdcc+'\x22');for(let _0xec1794 of _0x59a73e){_0xec1794[_0x4b6e49(0x5e2)]=_0x3bfdcc,_0x1b4c6a=_0xec1794['firstValue'];let _0xbf19dd;try{_0xbf19dd=this[_0x4b6e49(0x322)](_0x28bcce,_0xec1794);}catch(_0x5167c6){console[_0x4b6e49(0x2d9)](_0x4b6e49(0x1c0)+_0x5167c6[_0x4b6e49(0x58c)]);continue;}if(_0xbf19dd!==null){let _0x1497b8='Operador:\x20\x22'+_0xec1794[_0x4b6e49(0x2ad)]+'\x22',_0x112815=[_0x4b6e49(0x6b3),_0x4b6e49(0x1f4),'lowerCase',_0x4b6e49(0x28b),_0x4b6e49(0x225)];_0xec1794[_0x4b6e49(0x2ad)]===_0x4b6e49(0x2e0)||_0xec1794['editOperator']==='findAndReplaceRegex'?_0x1497b8+=_0x4b6e49(0x653)+_0xec1794['secondValue']+_0x4b6e49(0x2e9)+_0xec1794[_0x4b6e49(0x7ea)]+'\x22':!_0x112815['includes'](_0xec1794[_0x4b6e49(0x2ad)])&&_0xec1794['secondValue']!==null&&_0xec1794[_0x4b6e49(0x7db)]!==void 0x0&&(_0x1497b8+=',\x20valor\x20passado:\x20\x22'+_0xec1794[_0x4b6e49(0x7db)]+'\x22'),_0x1497b8+=_0x4b6e49(0x29f)+_0xbf19dd+'.',_0x3a2edc[_0x4b6e49(0x1d0)](_0x1497b8);}_0xbf19dd!==null&&(_0x3bfdcc=_0xbf19dd);}if(_0x28bcce[_0x4b6e49(0x696)][_0x4b6e49(0x7c9)]&&_0x2bdac5['saveVariable']){_0x28bcce[_0x4b6e49(0x696)][_0x4b6e49(0x7c9)][_0x2bdac5['saveVariable']]=_0x3bfdcc;let _0x374821={'variable':_0x2bdac5[_0x4b6e49(0x248)],'oldValue':_0x1b4c6a,'newValue':_0x3bfdcc,'moreLogs':_0x3a2edc};try{this[_0x4b6e49(0x728)](_0x28bcce,_0x2bdac5,_0x374821);}catch(_0x3403a2){console[_0x4b6e49(0x2d9)]('Erro\x20ao\x20atualizar\x20conversa:\x20'+_0x3403a2[_0x4b6e49(0x58c)]);}}return _0x22c83c;}catch(_0x5aafab){return console[_0x4b6e49(0x2d9)](_0x4b6e49(0x402)+_0x5aafab[_0x4b6e49(0x58c)]),null;}}async['processConditions'](_0xa83e0d,_0x525cd4){const _0x37b41d=a0_0x108f24;try{let _0xf55fb2=[],_0x356637=_0xa83e0d['conditions'][_0x37b41d(0x517)](_0x2486d0=>_0x2486d0[_0x37b41d(0x474)]===_0x525cd4['_id'][_0x37b41d(0x28f)]()),_0x3c3ef7=null,_0x490068=!0x1;for(let _0x1fa8d6 of _0x356637){let _0x562959=this[_0x37b41d(0x1d4)](_0xa83e0d,_0x1fa8d6);_0xf55fb2['push'](_0x37b41d(0x296)+_0x1fa8d6[_0x37b41d(0x5e2)]+',\x20Comparador:\x20'+_0x1fa8d6[_0x37b41d(0x2ea)]+_0x37b41d(0x24f)+_0x1fa8d6[_0x37b41d(0x7db)]+',\x20Resultado:\x20'+_0x562959),_0x3c3ef7===null?_0x3c3ef7=_0x562959:_0x1fa8d6['OrAnd']===_0x37b41d(0x534)?(_0x3c3ef7=_0x3c3ef7&&_0x562959,_0x562959||(_0x490068=!0x0)):_0x1fa8d6[_0x37b41d(0x4b7)]==='or'&&(_0x490068||(_0x3c3ef7=_0x3c3ef7||_0x562959));}_0x3c3ef7===null&&(_0x3c3ef7=!0x0);let _0x14ff1d={'moreLogs':_0xf55fb2};_0xa83e0d[_0x37b41d(0x696)][_0x37b41d(0x407)]=_0x3c3ef7,await this['updateConversation'](_0xa83e0d,_0x525cd4,_0x14ff1d);}catch(_0x233cce){this[_0x37b41d(0x711)][_0x37b41d(0x2d9)](this['instanceName']+'\x20('+this[_0x37b41d(0x21a)][_0x37b41d(0x1fb)]+'):\x20Error\x20processing\x20conditions:\x20'+(_0x233cce instanceof Error?_0x233cce['message']:JSON[_0x37b41d(0x35b)](_0x233cce,null,0x2)));}}[a0_0x108f24(0x1d4)](_0x48f69e,_0x1922d6){const _0x325d80=a0_0x108f24;let _0x20eae8=_0x1922d6[_0x325d80(0x5e2)],_0x23d2ba=_0x1922d6['secondValue'];typeof _0x20eae8==_0x325d80(0x473)&&(_0x20eae8=this[_0x325d80(0x57d)](_0x20eae8,_0x48f69e[_0x325d80(0x696)][_0x325d80(0x7c9)])??''),typeof _0x23d2ba==_0x325d80(0x473)&&(_0x23d2ba=this[_0x325d80(0x57d)](_0x23d2ba,_0x48f69e[_0x325d80(0x696)][_0x325d80(0x7c9)])??'');try{switch(_0x1922d6[_0x325d80(0x2ea)]){case _0x325d80(0x2df):return _0x20eae8===_0x23d2ba;case _0x325d80(0x448):return _0x20eae8!==_0x23d2ba;case'contains':return _0x20eae8['includes'](_0x23d2ba);case _0x325d80(0x2ba):return!_0x20eae8[_0x325d80(0x3cd)](_0x23d2ba);case _0x325d80(0x485):return parseFloat(_0x20eae8)>parseFloat(_0x23d2ba);case _0x325d80(0x279):return parseFloat(_0x20eae8)<parseFloat(_0x23d2ba);case _0x325d80(0x5cb):return _0x20eae8!=='';case _0x325d80(0x6e2):return _0x20eae8==='';case _0x325d80(0x29a):return new RegExp(_0x23d2ba)[_0x325d80(0x3e4)](_0x20eae8);case _0x325d80(0x24c):return!new RegExp(_0x23d2ba)[_0x325d80(0x3e4)](_0x20eae8);default:return!0x1;}}catch(_0x58a644){return console['error'](_0x325d80(0x76e)+_0x58a644),!0x1;}}[a0_0x108f24(0x22e)](_0x51db2d){const _0x6df897=a0_0x108f24;let _0x272c2b=!0x0,_0x4ed540=null;for(let _0x51c102 of _0x51db2d){let _0x364d0a=this[_0x6df897(0x27c)](_0x51c102);if(_0x4ed540==='or'&&_0x364d0a){_0x272c2b=!0x0;break;}if(_0x4ed540===_0x6df897(0x534)&&!_0x364d0a){_0x272c2b=!0x1;break;}_0x4ed540=_0x51c102[_0x6df897(0x4b7)];}return _0x272c2b;}[a0_0x108f24(0x27c)](_0x7ff9a2){const _0x173a71=a0_0x108f24;let _0x2fc11f=_0x7ff9a2['firstValue'],_0x26d5e0=_0x7ff9a2[_0x173a71(0x7db)];try{switch(_0x7ff9a2[_0x173a71(0x2ea)]){case'equal':return String(_0x2fc11f)===String(_0x26d5e0);case _0x173a71(0x448):return String(_0x2fc11f)!==String(_0x26d5e0);case _0x173a71(0x633):return String(_0x2fc11f)['includes'](String(_0x26d5e0));case _0x173a71(0x2ba):return!String(_0x2fc11f)[_0x173a71(0x3cd)](String(_0x26d5e0));case _0x173a71(0x485):return parseFloat(String(_0x2fc11f))>parseFloat(String(_0x26d5e0));case'less':return parseFloat(String(_0x2fc11f))<parseFloat(String(_0x26d5e0));case _0x173a71(0x5cb):return String(_0x2fc11f)!=='';case _0x173a71(0x6e2):return String(_0x2fc11f)==='';case'matchRegex':return new RegExp(String(_0x26d5e0))['test'](String(_0x2fc11f));case _0x173a71(0x24c):return!new RegExp(String(_0x26d5e0))[_0x173a71(0x3e4)](String(_0x2fc11f));default:return!0x1;}}catch(_0x2652c0){return console[_0x173a71(0x2d9)](_0x173a71(0x76e)+_0x2652c0),!0x1;}}async[a0_0x108f24(0x3ee)](_0x453a3e,_0x508ae9){const _0x42952a=a0_0x108f24;if(this['logger'][_0x42952a(0x5f3)](this[_0x42952a(0x476)]+'\x20('+this['instance'][_0x42952a(0x1fb)]+'):\x20Entrou\x20na\x20função\x20saveReply'),!_0x453a3e||!_0x508ae9)return this[_0x42952a(0x711)][_0x42952a(0x2d9)](this[_0x42952a(0x476)]+'\x20('+this[_0x42952a(0x21a)][_0x42952a(0x1fb)]+_0x42952a(0x297)),null;let _0x189d55=_0x508ae9['saveVariable'],_0x27287b=_0x453a3e['chatLog'][_0x42952a(0x7ed)][_0x42952a(0x341)]||_0x453a3e[_0x42952a(0x696)][_0x42952a(0x7ed)][_0x42952a(0x50b)]||_0x453a3e[_0x42952a(0x696)][_0x42952a(0x7ed)][_0x42952a(0x78b)];try{_0x453a3e[_0x42952a(0x696)]['realVariables']||(_0x453a3e['chatLog'][_0x42952a(0x7c9)]={});let _0x242ac1=_0x453a3e[_0x42952a(0x696)][_0x42952a(0x7c9)][_0x189d55];_0x453a3e['chatLog'][_0x42952a(0x7c9)][_0x189d55]=_0x27287b;let _0x3464c7={'variable':_0x189d55,'oldValue':_0x242ac1,'newValue':_0x27287b};this[_0x42952a(0x728)](_0x453a3e,_0x508ae9,_0x3464c7),this[_0x42952a(0x711)][_0x42952a(0x5f3)](this[_0x42952a(0x476)]+'\x20('+this[_0x42952a(0x21a)][_0x42952a(0x1fb)]+_0x42952a(0x756));}catch(_0x37de6b){let _0x363092={'error':!0x0,'errorLog':_0x37de6b['toString']()};return this['updateConversation'](_0x453a3e,_0x508ae9,_0x363092),this[_0x42952a(0x711)][_0x42952a(0x2d9)](this['instanceName']+'\x20('+this['instance'][_0x42952a(0x1fb)]+_0x42952a(0x6f4)+(_0x37de6b instanceof Error?_0x37de6b[_0x42952a(0x58c)]:JSON['stringify'](_0x37de6b,null,0x2))),null;}}async['stopConversation'](_0x252480,_0x2a0136){const _0x5c08bc=a0_0x108f24;if(this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x5c08bc(0x21a)][_0x5c08bc(0x1fb)]+'):\x20Entrou\x20na\x20função\x20stop'),!_0x252480||!_0x2a0136)return this[_0x5c08bc(0x711)][_0x5c08bc(0x2d9)](this[_0x5c08bc(0x476)]+'\x20('+this[_0x5c08bc(0x21a)][_0x5c08bc(0x1fb)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x2d4125=Date[_0x5c08bc(0x7e2)](),_0x558de5=parseInt(_0x2a0136[_0x5c08bc(0x538)],0xa);if(isNaN(_0x558de5))return this['logger'][_0x5c08bc(0x2d9)](this['instanceName']+'\x20('+this[_0x5c08bc(0x21a)][_0x5c08bc(0x1fb)]+_0x5c08bc(0x291)),null;let _0x565a35={'newStoppedUntil':_0x2d4125+_0x558de5*0x3c*0x3e8};return await this[_0x5c08bc(0x728)](_0x252480,_0x2a0136,_0x565a35,!0x0),null;}async[a0_0x108f24(0x68f)](_0x21ab0d,_0x22b91b){const _0x363ca0=a0_0x108f24;try{switch(_0x22b91b[_0x363ca0(0x3a9)]['command']){case _0x363ca0(0x270):await this[_0x363ca0(0x6d3)](_0x21ab0d,_0x22b91b);break;case _0x363ca0(0x536):await this['uazapiSendMedia'](_0x21ab0d,_0x22b91b);break;case'sendLocation':await this['uazapiSendLocation'](_0x21ab0d,_0x22b91b);break;case _0x363ca0(0x7af):await this[_0x363ca0(0x363)](_0x21ab0d,_0x22b91b);break;case _0x363ca0(0x671):await this[_0x363ca0(0x3bb)](_0x21ab0d,_0x22b91b);break;case _0x363ca0(0x48b):await this[_0x363ca0(0x4b9)](_0x21ab0d,_0x22b91b);break;case _0x363ca0(0x52c):await this[_0x363ca0(0x4b9)](_0x21ab0d,_0x22b91b);break;case _0x363ca0(0x6a4):await this[_0x363ca0(0x250)](_0x21ab0d,_0x22b91b);break;default:this[_0x363ca0(0x711)]['error'](this[_0x363ca0(0x476)]+'\x20('+this[_0x363ca0(0x21a)]['wuid']+_0x363ca0(0x3b1)+_0x22b91b[_0x363ca0(0x3a9)][_0x363ca0(0x5a2)]);}}catch(_0x5747fe){this[_0x363ca0(0x711)][_0x363ca0(0x2d9)](this['instanceName']+'\x20('+this['instance'][_0x363ca0(0x1fb)]+_0x363ca0(0x80e)+(_0x5747fe instanceof Error?_0x5747fe[_0x363ca0(0x58c)]:JSON[_0x363ca0(0x35b)](_0x5747fe,null,0x2)));}}async['updateConversation'](_0x3cb9d9,_0x4d8522,_0x58b7ef,_0x256703=!0x1,_0x3a756b=!0x1){const _0x3c0c17=a0_0x108f24;_0x3cb9d9[_0x3c0c17(0x696)]['blockLogs']||(_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x6cc)]=[]);let _0x469c17=(_0x3cb9d9[_0x3c0c17(0x696)]['blockLogs']?.['length']??0x0)+0x1,_0x3e80e0=_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x6cc)][_0x3c0c17(0x517)](_0x25f211=>String(_0x25f211[_0x3c0c17(0x474)])===String(_0x4d8522[_0x3c0c17(0x5ee)]))['length']+0x1,_0x4f6794=_0x58b7ef?.[_0x3c0c17(0x27d)]??Date[_0x3c0c17(0x7e2)](),_0x333740=_0x58b7ef?.[_0x3c0c17(0x2d9)]?_0x58b7ef[_0x3c0c17(0x69e)]??_0x58b7ef['error'][_0x3c0c17(0x28f)]():void 0x0,_0x3bfaac={'onTime':_0x4f6794,'blockId':_0x4d8522[_0x3c0c17(0x5ee)],'order':_0x469c17,'activatedCount':_0x3e80e0,'error':_0x58b7ef?.[_0x3c0c17(0x2d9)]??!0x1,'messageId':_0x58b7ef?.['messageId'],'apiResponse':_0x58b7ef?.[_0x3c0c17(0x5b4)],'apiResponseString':_0x58b7ef?.['apiResponse']?JSON[_0x3c0c17(0x35b)](_0x58b7ef?.[_0x3c0c17(0x5b4)]):void 0x0,'variable':_0x58b7ef?.[_0x3c0c17(0x7a1)],'oldValue':_0x58b7ef?.[_0x3c0c17(0x56e)],'newValue':_0x58b7ef?.['newValue'],'newStoppedUntil':_0x58b7ef?.[_0x3c0c17(0x616)],'moreLogs':_0x58b7ef?.[_0x3c0c17(0x1de)],'errorLog':_0x333740};if(_0x58b7ef[_0x3c0c17(0x1de)]&&_0x58b7ef[_0x3c0c17(0x1de)][_0x3c0c17(0x231)]>0x0){let _0x11adb7=_0x58b7ef[_0x3c0c17(0x1de)][_0x3c0c17(0x49e)](_0x26bee1=>this[_0x3c0c17(0x562)](_0x26bee1,_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x7c9)]));_0x3bfaac['moreLogs']=_0x11adb7;}_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x7c9)]||(_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x7c9)]={}),_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x7c9)]['_activatedCount']=String(_0x3e80e0),_0x3cb9d9[_0x3c0c17(0x696)]['realVariables'][_0x3c0c17(0x63c)]=String(_0x58b7ef['error']??!0x1),_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x6cc)][_0x3c0c17(0x1d0)](_0x3bfaac),_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x217)]=_0x4d8522[_0x3c0c17(0x5ee)]['toString'](),_0x3cb9d9[_0x3c0c17(0x696)]['lastSendMessage']&&(_0x3cb9d9[_0x3c0c17(0x696)]['lastSendMessage']=_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x20d)]),_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x7ed)]&&(_0x3cb9d9['chatLog'][_0x3c0c17(0x7ed)]=_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x7ed)]),_0x3cb9d9[_0x3c0c17(0x696)][_0x3c0c17(0x407)]&&(_0x3cb9d9[_0x3c0c17(0x696)]['lastCondition']=_0x3cb9d9['chatLog']['lastCondition']),_0x3a756b&&(_0x3cb9d9['status']='closed'),_0x256703?this[_0x3c0c17(0x542)](_0x3cb9d9):this[_0x3c0c17(0x7ca)](_0x3cb9d9,_0x4d8522);}[a0_0x108f24(0x562)](_0x33d652,_0x517e8e){const _0x5a58b1=a0_0x108f24;return _0x33d652[_0x5a58b1(0x6e4)](/\{\{([^}]+)\}\}/g,(_0x4022c0,_0x13d0ae)=>_0x517e8e[_0x13d0ae]?'{{'+_0x13d0ae+_0x5a58b1(0x5cf)+_0x517e8e[_0x13d0ae]+'\x22':'{{'+_0x13d0ae+_0x5a58b1(0x1c4));}async['saveConversationToDatabase'](_0x297e64){const _0x48e953=a0_0x108f24;try{let _0x535850=Object['entries'](_0x297e64[_0x48e953(0x696)][_0x48e953(0x7c9)])[_0x48e953(0x49e)](([_0x439b27,_0x685939])=>({'name':_0x439b27,'value':_0x685939})),_0x4b57b8={'status':_0x297e64[_0x48e953(0x60e)],'blocks':_0x297e64[_0x48e953(0x72c)],'waitingMenu_id':_0x297e64[_0x48e953(0x48c)],'waitingMenu_text':_0x297e64[_0x48e953(0x3df)],'waitingMenu_replyOptions':_0x297e64['waitingMenu_replyOptions'],'chatLog':{'lastBlockId':_0x297e64[_0x48e953(0x696)][_0x48e953(0x217)],'lastSendMessage':_0x297e64[_0x48e953(0x696)]['lastSendMessage'],'lastReceivedMessage':_0x297e64[_0x48e953(0x696)]['lastReceivedMessage'],'lastCondition':_0x297e64[_0x48e953(0x696)]['lastCondition'],'chatVariables':_0x535850,'realVariables':_0x297e64[_0x48e953(0x696)][_0x48e953(0x7c9)],'blockLogs':_0x297e64[_0x48e953(0x696)][_0x48e953(0x6cc)]}},_0x3a1083=await this[_0x48e953(0x726)][_0x48e953(0x49c)]['updateOne'](_0x297e64['_id'],_0x4b57b8,this[_0x48e953(0x21a)][_0x48e953(0x1fb)]);if(_0x3a1083){this[_0x48e953(0x711)][_0x48e953(0x5f3)](this[_0x48e953(0x476)]+'\x20('+this[_0x48e953(0x21a)][_0x48e953(0x1fb)]+_0x48e953(0x595)+_0x3a1083[_0x48e953(0x5ee)]);try{let _0x5cce26=[_0x48e953(0x327),_0x48e953(0x3e6),_0x48e953(0x767),_0x48e953(0x3b3),_0x48e953(0x60e),_0x48e953(0x4f2),_0x48e953(0x76d),_0x48e953(0x775)];if(!this['AutomateSystem']&&(await this[_0x48e953(0x553)](),!this[_0x48e953(0x3e5)]))throw new Error(_0x48e953(0x7e3));let _0x4fea56=this[_0x48e953(0x3e5)]?.[_0x48e953(0x230)][_0x48e953(0x49e)](_0x68c69d=>_0x68c69d[_0x48e953(0x2ec)]),_0x385d25={};Object[_0x48e953(0x218)](_0x297e64['chatLog'][_0x48e953(0x7c9)])[_0x48e953(0x2ab)](([_0x29500b,_0x529189])=>{const _0x52087e=_0x48e953;_0x5cce26[_0x52087e(0x3cd)](_0x29500b)&&(_0x29500b===_0x52087e(0x775)&&typeof _0x529189=='string'?_0x385d25[_0x29500b]=_0x529189[_0x52087e(0x5ac)](',')[_0x52087e(0x49e)](_0x22ed3b=>_0x22ed3b[_0x52087e(0x37f)]())[_0x52087e(0x517)](_0x18e14e=>_0x18e14e!==''):_0x385d25[_0x29500b]=_0x529189);});let _0x28d9b4=_0x297e64[_0x48e953(0x696)][_0x48e953(0x6cc)][_0x297e64[_0x48e953(0x696)][_0x48e953(0x6cc)][_0x48e953(0x231)]-0x1];if(_0x28d9b4){let _0xef7b47=_0x28d9b4[_0x48e953(0x616)];_0xef7b47!==void 0x0&&(_0x385d25[_0x48e953(0x7d5)]=_0xef7b47['toString']());}let _0x1fdd0f=_0x535850[_0x48e953(0x517)](_0x580583=>_0x4fea56['includes'](_0x580583[_0x48e953(0x2ec)]));this[_0x48e953(0x711)]['verbose'](this[_0x48e953(0x476)]+'\x20('+this[_0x48e953(0x21a)]['wuid']+_0x48e953(0x475)),this[_0x48e953(0x711)][_0x48e953(0x5f3)](_0x385d25),this[_0x48e953(0x711)][_0x48e953(0x5f3)](this['instanceName']+'\x20('+this[_0x48e953(0x21a)][_0x48e953(0x1fb)]+'):\x20customFieldVariables'),this['logger']['verbose'](_0x1fdd0f);let _0x20ee6e=_0x1fdd0f[_0x48e953(0x49e)](_0x397bd0=>{const _0x5462ba=_0x48e953;let _0x3d92cc=this['AutomateSystem']?.[_0x5462ba(0x230)][_0x5462ba(0x731)](_0x4b4a02=>_0x4b4a02[_0x5462ba(0x2ec)]===_0x397bd0[_0x5462ba(0x2ec)]);if(!_0x3d92cc)throw new Error('Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20'+_0x397bd0[_0x5462ba(0x2ec)]);return{'_id':_0x3d92cc[_0x5462ba(0x5ee)],'value':_0x397bd0['value']};});this[_0x48e953(0x711)]['verbose'](this[_0x48e953(0x476)]+'\x20('+this[_0x48e953(0x21a)]['wuid']+_0x48e953(0x2e2)),this['logger'][_0x48e953(0x5f3)](_0x20ee6e),await this[_0x48e953(0x67d)](_0x297e64[_0x48e953(0x47b)],_0x385d25,_0x20ee6e);}catch(_0x13bdbc){this[_0x48e953(0x711)][_0x48e953(0x2d9)](this[_0x48e953(0x476)]+'\x20('+this[_0x48e953(0x21a)]['wuid']+_0x48e953(0x60d)+(_0x13bdbc instanceof Error?_0x13bdbc[_0x48e953(0x58c)]:JSON[_0x48e953(0x35b)](_0x13bdbc,null,0x2)));}}else this[_0x48e953(0x711)][_0x48e953(0x2d9)](this[_0x48e953(0x476)]+'\x20('+this[_0x48e953(0x21a)][_0x48e953(0x1fb)]+_0x48e953(0x555));}catch(_0x2a9f9f){this[_0x48e953(0x711)][_0x48e953(0x2d9)](this[_0x48e953(0x476)]+'\x20('+this[_0x48e953(0x21a)][_0x48e953(0x1fb)]+_0x48e953(0x3ea)+(_0x2a9f9f instanceof Error?_0x2a9f9f[_0x48e953(0x58c)]:JSON[_0x48e953(0x35b)](_0x2a9f9f,null,0x2)));}}async['saveChatVariables'](_0x20ddd4,_0x1418d3,_0x5329f2){const _0x4dbedc=a0_0x108f24;try{let _0x4197a2={'leadInfo.leadnome':_0x1418d3[_0x4dbedc(0x327)],'leadInfo.nomecompleto':_0x1418d3[_0x4dbedc(0x3e6)],'leadInfo.email':_0x1418d3[_0x4dbedc(0x767)],'leadInfo.cpf':_0x1418d3[_0x4dbedc(0x3b3)],'leadInfo.status':_0x1418d3['status'],'leadInfo.notas':_0x1418d3[_0x4dbedc(0x4f2)],'leadInfo.responsavelid':_0x1418d3[_0x4dbedc(0x76d)],'leadInfo.tags':_0x1418d3[_0x4dbedc(0x775)],'leadInfo.customFields':_0x5329f2};if(_0x4dbedc(0x7d5)in _0x1418d3){let _0x164024=_0x1418d3['desativadoFluxoAte'];_0x4197a2['leadInfo.desativadoFluxoAte']=_0x164024?Number(_0x164024):null;}let _0x521249=await this[_0x4dbedc(0x726)][_0x4dbedc(0x1e1)][_0x4dbedc(0x4c9)]({'where':{'_id':_0x20ddd4}},_0x4197a2,this['instance'][_0x4dbedc(0x1fb)]);_0x521249?(this['logger'][_0x4dbedc(0x5f3)](this[_0x4dbedc(0x476)]+'\x20('+this[_0x4dbedc(0x21a)][_0x4dbedc(0x1fb)]+_0x4dbedc(0x73b)+_0x521249[_0x4dbedc(0x5ee)]),j(this[_0x4dbedc(0x476)],_0x4dbedc(0x4cc),{'chat':_0x521249})):this[_0x4dbedc(0x711)]['error'](this['instanceName']+'\x20('+this[_0x4dbedc(0x21a)][_0x4dbedc(0x1fb)]+_0x4dbedc(0x7fb));}catch(_0x24f2f4){this[_0x4dbedc(0x711)][_0x4dbedc(0x2d9)](this['instanceName']+'\x20('+this[_0x4dbedc(0x21a)][_0x4dbedc(0x1fb)]+_0x4dbedc(0x75f)+(_0x24f2f4 instanceof Error?_0x24f2f4[_0x4dbedc(0x58c)]:JSON['stringify'](_0x24f2f4,null,0x2)));}}async[a0_0x108f24(0x480)](_0x15f2a6,_0x4c5aec){const _0x421d01=a0_0x108f24;this[_0x421d01(0x711)][_0x421d01(0x5f3)](this['instanceName']+'\x20('+this[_0x421d01(0x21a)][_0x421d01(0x1fb)]+_0x421d01(0x63d)+_0x4c5aec);try{let _0x50735d=await this[_0x421d01(0x726)][_0x421d01(0x1e1)][_0x421d01(0x4c9)]({'where':{'_id':_0x15f2a6[_0x421d01(0x47b)]}},{'leadInfo.desativadoFluxoAte':_0x4c5aec},this[_0x421d01(0x21a)][_0x421d01(0x1fb)]);this[_0x421d01(0x711)][_0x421d01(0x5f3)](this[_0x421d01(0x476)]+'\x20('+this[_0x421d01(0x21a)][_0x421d01(0x1fb)]+_0x421d01(0x226)+_0x15f2a6[_0x421d01(0x5ee)]),this[_0x421d01(0x711)][_0x421d01(0x5f3)](this[_0x421d01(0x476)]+'\x20('+this[_0x421d01(0x21a)]['wuid']+'):\x20atualização\x20chat:\x20'+JSON['stringify'](_0x50735d,null,0x2)),_0x50735d&&j(this[_0x421d01(0x476)],_0x421d01(0x4cc),{'chat':_0x50735d});}catch(_0x2b8e80){this['logger'][_0x421d01(0x2d9)](this[_0x421d01(0x476)]+'\x20('+this['instance'][_0x421d01(0x1fb)]+_0x421d01(0x4ed)+(_0x2b8e80 instanceof Error?_0x2b8e80[_0x421d01(0x58c)]:JSON[_0x421d01(0x35b)](_0x2b8e80,null,0x2)));}}async[a0_0x108f24(0x219)](_0x59ae7a){const _0x4c962b=a0_0x108f24;try{this['logger'][_0x4c962b(0x5f3)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4c962b(0x30f));let _0x3de5b3=_0x59ae7a[_0x4c962b(0x6e4)](/\D/g,''),_0x2bbcfd=await this[_0x4c962b(0x726)][_0x4c962b(0x48d)]['findOne']({'where':{'testingWith':_0x3de5b3}},this['instance'][_0x4c962b(0x1fb)]);return _0x2bbcfd||(this['logger'][_0x4c962b(0x5f3)](this[_0x4c962b(0x476)]+'\x20('+this[_0x4c962b(0x21a)][_0x4c962b(0x1fb)]+_0x4c962b(0x2f6)),_0x2bbcfd=await this['repository'][_0x4c962b(0x48d)][_0x4c962b(0x624)]({'where':{'default':!0x0}},this['instance']['wuid'])),_0x2bbcfd||(this[_0x4c962b(0x711)][_0x4c962b(0x5f3)](this[_0x4c962b(0x476)]+'\x20('+this[_0x4c962b(0x21a)]['wuid']+_0x4c962b(0x67b)),null);}catch(_0x2df14c){return this[_0x4c962b(0x711)][_0x4c962b(0x2d9)](this['instanceName']+'\x20('+this[_0x4c962b(0x21a)][_0x4c962b(0x1fb)]+_0x4c962b(0x307)+(_0x2df14c instanceof Error?_0x2df14c[_0x4c962b(0x58c)]:JSON['stringify'](_0x2df14c,null,0x2))),null;}}async[a0_0x108f24(0x4fd)](_0x3b1f3e,_0x1883b6){const _0x275cb1=a0_0x108f24;try{let _0x3dc622=!!_0x1883b6[_0x275cb1(0x78b)],_0x27cb63=_0x1883b6[_0x275cb1(0x6bf)],_0x17e94c=null;if(this[_0x275cb1(0x711)][_0x275cb1(0x5f3)](this[_0x275cb1(0x476)]+'\x20('+this[_0x275cb1(0x21a)][_0x275cb1(0x1fb)]+_0x275cb1(0x20c)+_0x3dc622+_0x275cb1(0x2af)+_0x27cb63),_0x3dc622){this[_0x275cb1(0x711)][_0x275cb1(0x5f3)](this['instanceName']+'\x20('+this['instance'][_0x275cb1(0x1fb)]+'):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto');let _0x39ee45={'where':{'remoteJid':_0x3b1f3e,'waitingMenu_id':_0x27cb63}};if(_0x17e94c=await this[_0x275cb1(0x726)][_0x275cb1(0x49c)][_0x275cb1(0x624)](_0x39ee45,this[_0x275cb1(0x21a)]['wuid']),!_0x17e94c)return this[_0x275cb1(0x711)][_0x275cb1(0x5f3)](this[_0x275cb1(0x476)]+'\x20('+this[_0x275cb1(0x21a)][_0x275cb1(0x1fb)]+_0x275cb1(0x454)),null;let _0x562bf1=Date[_0x275cb1(0x7e2)](),_0x41d802=_0x17e94c?.[_0x275cb1(0x468)]||0x0,_0x9807e=_0x562bf1-_0x41d802*0x3c*0x3e8;if(_0x17e94c[_0x275cb1(0x22b)]<_0x9807e){this[_0x275cb1(0x711)][_0x275cb1(0x5f3)](this[_0x275cb1(0x476)]+'\x20('+this[_0x275cb1(0x21a)][_0x275cb1(0x1fb)]+'):\x20Conversa\x20está\x20expirada\x20-\x20voto');let _0x255f57={'number':_0x17e94c[_0x275cb1(0x47b)],'options':{'delay':0x0},'textMessage':{'text':_0x17e94c[_0x275cb1(0x706)]}};await this[_0x275cb1(0x350)](_0x255f57);let _0xa93047={'status':_0x275cb1(0x560),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x275cb1(0x726)][_0x275cb1(0x49c)][_0x275cb1(0x4c9)](_0x17e94c['_id'],_0xa93047,this[_0x275cb1(0x21a)][_0x275cb1(0x1fb)]),null;}return _0x17e94c[_0x275cb1(0x22b)]=Date[_0x275cb1(0x7e2)](),_0x17e94c[_0x275cb1(0x696)][_0x275cb1(0x7ed)]=_0x1883b6,_0x17e94c;}else{this[_0x275cb1(0x711)][_0x275cb1(0x5f3)](this[_0x275cb1(0x476)]+'\x20('+this[_0x275cb1(0x21a)]['wuid']+_0x275cb1(0x719)+this[_0x275cb1(0x21a)]['wuid']+'\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário'),this['logger'][_0x275cb1(0x5f3)](this[_0x275cb1(0x476)]+'\x20('+this[_0x275cb1(0x21a)][_0x275cb1(0x1fb)]+_0x275cb1(0x6ab));let _0x345e21={'where':{'remoteJid':_0x3b1f3e,'status':_0x275cb1(0x691)}};if(_0x17e94c=await this[_0x275cb1(0x726)][_0x275cb1(0x49c)][_0x275cb1(0x624)](_0x345e21,this[_0x275cb1(0x21a)]['wuid']),!_0x17e94c){let _0x4280e0=await this['findFlow'](_0x3b1f3e);if(_0x4280e0&&(_0x17e94c=await this[_0x275cb1(0x4e4)](_0x4280e0,_0x1883b6[_0x275cb1(0x662)],_0x1883b6)),!_0x17e94c)return null;}let _0x5483e2=Date[_0x275cb1(0x7e2)](),_0x38e0cd=_0x17e94c?.['minutesToClose']||0x0,_0x40b66c=_0x5483e2-_0x38e0cd*0x3c*0x3e8;if(this[_0x275cb1(0x711)]['verbose'](this[_0x275cb1(0x476)]+'\x20('+this['instance'][_0x275cb1(0x1fb)]+'):\x20Current\x20Time:\x20'+_0x5483e2+_0x275cb1(0x75b)+_0x38e0cd+_0x275cb1(0x450)+_0x40b66c),this[_0x275cb1(0x711)]['verbose'](this[_0x275cb1(0x476)]+'\x20('+this[_0x275cb1(0x21a)][_0x275cb1(0x1fb)]+'):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot'),this[_0x275cb1(0x711)]['verbose'](this[_0x275cb1(0x476)]+'\x20('+this[_0x275cb1(0x21a)]['wuid']+_0x275cb1(0x79f)+_0x17e94c['lastInteraction']),this[_0x275cb1(0x711)][_0x275cb1(0x5f3)](this[_0x275cb1(0x476)]+'\x20('+this[_0x275cb1(0x21a)][_0x275cb1(0x1fb)]+_0x275cb1(0x6fc)+_0x40b66c),_0x17e94c[_0x275cb1(0x22b)]<_0x40b66c){this[_0x275cb1(0x711)][_0x275cb1(0x5f3)](this[_0x275cb1(0x476)]+'\x20('+this[_0x275cb1(0x21a)][_0x275cb1(0x1fb)]+_0x275cb1(0x6d0));let _0x4ac7fa=await this['findFlow'](_0x3b1f3e);if(_0x4ac7fa===null)return null;_0x17e94c&&await this[_0x275cb1(0x726)][_0x275cb1(0x49c)][_0x275cb1(0x4c9)](_0x17e94c[_0x275cb1(0x5ee)],{'status':'closed'},this[_0x275cb1(0x21a)][_0x275cb1(0x1fb)]),_0x17e94c=await this[_0x275cb1(0x4e4)](_0x4ac7fa,_0x1883b6['key'],_0x1883b6);}return _0x17e94c[_0x275cb1(0x22b)]=_0x5483e2,_0x17e94c[_0x275cb1(0x696)][_0x275cb1(0x7ed)]=_0x1883b6,_0x17e94c;}}catch(_0xf95f02){return this[_0x275cb1(0x711)][_0x275cb1(0x2d9)](this[_0x275cb1(0x476)]+'\x20('+this['instance'][_0x275cb1(0x1fb)]+_0x275cb1(0x637)+(_0xf95f02 instanceof Error?_0xf95f02['message']:JSON[_0x275cb1(0x35b)](_0xf95f02,null,0x2))),null;}}async['createNewConversation'](_0x4d7c37,_0xd15a6a,_0x3a60ed){const _0x261621=a0_0x108f24;this['logger'][_0x261621(0x5f3)](this[_0x261621(0x476)]+'\x20('+this[_0x261621(0x21a)]['wuid']+_0x261621(0x61c));try{let _0x3c6cfc=require(_0x261621(0x40d))['ObjectId'],_0x25ad98=Date[_0x261621(0x7e2)](),_0x55f64e='start',_0x2d0051=_0xd15a6a['fromMe']?null:_0x3a60ed,_0x30bcf7=_0xd15a6a[_0x261621(0x310)]?_0x3a60ed:null,_0x1be901=_0xd15a6a[_0x261621(0x47b)];await this[_0x261621(0x6de)](_0x1be901);let _0xc7af65={..._0x4d7c37,'chatLog':null},_0x131697=await this['variablesToObject'](_0xc7af65[_0x261621(0x21d)]),_0x4649ca=await this[_0x261621(0x300)](_0x1be901),_0x39dca1={..._0x131697,..._0x4649ca,'_remoteJid':_0x1be901},_0x36939d={'lastReceivedMessage':_0x2d0051,'lastSendMessage':_0x30bcf7,'lastBlockId':_0x55f64e,'lastCondition':!0x0,'realVariables':_0x39dca1};_0xc7af65[_0x261621(0x696)]=_0x36939d,delete _0xc7af65[_0x261621(0x5ee)],_0xc7af65[_0x261621(0x5ee)]=new _0x3c6cfc(),_0xc7af65['lastInteraction']=_0x25ad98,_0xc7af65['status']=_0x261621(0x691),_0xc7af65['remoteJid']=_0x1be901;let _0x65f341=await this[_0x261621(0x726)][_0x261621(0x49c)]['updateOne'](_0xc7af65['_id'],_0xc7af65,this[_0x261621(0x21a)][_0x261621(0x1fb)]);return this[_0x261621(0x711)]['verbose'](this['instanceName']+'\x20('+this[_0x261621(0x21a)]['wuid']+_0x261621(0x5f1)),_0x65f341?_0xc7af65:null;}catch(_0x3e7446){return this[_0x261621(0x711)][_0x261621(0x2d9)](this[_0x261621(0x476)]+'\x20('+this[_0x261621(0x21a)][_0x261621(0x1fb)]+'):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20'+(_0x3e7446 instanceof Error?_0x3e7446[_0x261621(0x58c)]:JSON[_0x261621(0x35b)](_0x3e7446,null,0x2))),_0x3e7446;}}async[a0_0x108f24(0x6d3)](_0x13002f,_0x8d2918){const _0x4c8726=a0_0x108f24;let _0xcd9102=_0x13002f[_0x4c8726(0x47b)];_0x8d2918['uazapi']['remoteJid']&&_0x8d2918['uazapi']['remoteJid'][_0x4c8726(0x37f)]()!==''&&(_0xcd9102=_0x8d2918[_0x4c8726(0x3a9)]['remoteJid'][_0x4c8726(0x37f)]()),this[_0x4c8726(0x711)][_0x4c8726(0x5f3)](this[_0x4c8726(0x476)]+'\x20('+this[_0x4c8726(0x21a)][_0x4c8726(0x1fb)]+_0x4c8726(0x5d2));let _0x30aaf2={'number':_0xcd9102,'options':{'delay':_0x8d2918['uazapi'][_0x4c8726(0x64e)]},'textMessage':{'text':_0x8d2918[_0x4c8726(0x3a9)]['text']}};try{let _0x3fd84b=await this[_0x4c8726(0x350)](_0x30aaf2);if(_0x3fd84b){let _0x3127ef={'_id':_0x3fd84b[_0x4c8726(0x662)]['id'],'_fromMe':_0x3fd84b['key']['fromMe'],'_remoteJid':_0x3fd84b[_0x4c8726(0x662)][_0x4c8726(0x47b)]};_0x13002f['chatLog'][_0x4c8726(0x217)]=_0x8d2918[_0x4c8726(0x5ee)][_0x4c8726(0x28f)]();let {message_normalized:_0x443b8a}=this[_0x4c8726(0x779)](_0x3fd84b['message'],_(_0x3fd84b[_0x4c8726(0x58c)]),null);_0x13002f[_0x4c8726(0x696)][_0x4c8726(0x20d)]=await _0x443b8a;let _0x19796e={'messageId':_0x3fd84b[_0x4c8726(0x662)]['id']},_0x40ccf8=_0x13002f[_0x4c8726(0x696)][_0x4c8726(0x7c9)];Object[_0x4c8726(0x592)](_0x40ccf8,_0x3127ef),_0x13002f[_0x4c8726(0x696)][_0x4c8726(0x7c9)]=_0x40ccf8,this[_0x4c8726(0x728)](_0x13002f,_0x8d2918,_0x19796e);}else{let _0x34490b={'error':!0x0};this[_0x4c8726(0x728)](_0x13002f,_0x8d2918,_0x34490b),this[_0x4c8726(0x711)]['error'](this[_0x4c8726(0x476)]+'\x20('+this['instance'][_0x4c8726(0x1fb)]+_0x4c8726(0x51d));}}catch(_0x2ed479){let _0x4e68eb={'error':!0x0,'errorLog':_0x2ed479[_0x4c8726(0x28f)]()};this[_0x4c8726(0x728)](_0x13002f,_0x8d2918,_0x4e68eb),this['logger']['error'](this['instanceName']+'\x20('+this['instance'][_0x4c8726(0x1fb)]+_0x4c8726(0x6a2)+(_0x2ed479 instanceof Error?_0x2ed479[_0x4c8726(0x58c)]:JSON[_0x4c8726(0x35b)](_0x2ed479,null,0x2)));}}async['uazapiSendMedia'](_0x4fdf7d,_0x12187e){const _0x5dc678=a0_0x108f24;let _0x46a154=_0x4fdf7d[_0x5dc678(0x47b)];_0x12187e[_0x5dc678(0x3a9)][_0x5dc678(0x47b)]&&_0x12187e['uazapi'][_0x5dc678(0x47b)]['trim']()!==''&&(_0x46a154=_0x12187e[_0x5dc678(0x3a9)][_0x5dc678(0x47b)][_0x5dc678(0x37f)]()),this[_0x5dc678(0x711)][_0x5dc678(0x5f3)](this[_0x5dc678(0x476)]+'\x20('+this['instance'][_0x5dc678(0x1fb)]+_0x5dc678(0x206));let _0xe432c7={'number':_0x46a154,'options':{'delay':_0x12187e[_0x5dc678(0x3a9)][_0x5dc678(0x64e)]},'mediaMessage':{'mediatype':_0x12187e['uazapi'][_0x5dc678(0x5c4)],'caption':_0x12187e[_0x5dc678(0x3a9)]['caption'],'media':_0x12187e[_0x5dc678(0x3a9)][_0x5dc678(0x531)],'fileName':_0x12187e[_0x5dc678(0x3a9)][_0x5dc678(0x6ee)]}};try{let _0x158938=await this[_0x5dc678(0x28a)](_0xe432c7);if(_0x158938){let _0x6b825f={'_id':_0x158938[_0x5dc678(0x662)]['id'],'_fromMe':_0x158938['key']['fromMe'],'_remoteJid':_0x158938[_0x5dc678(0x662)]['remoteJid']};_0x4fdf7d[_0x5dc678(0x696)][_0x5dc678(0x217)]=_0x12187e[_0x5dc678(0x5ee)][_0x5dc678(0x28f)]();let {message_normalized:_0xfcfd12}=this[_0x5dc678(0x779)](_0x158938['message'],_(_0x158938[_0x5dc678(0x58c)]),null);_0x4fdf7d[_0x5dc678(0x696)][_0x5dc678(0x20d)]=await _0xfcfd12;let _0x37fea0={'messageId':_0x158938[_0x5dc678(0x662)]['id']},_0x240d0=_0x4fdf7d['chatLog']['realVariables'];Object['assign'](_0x240d0,_0x6b825f),_0x4fdf7d[_0x5dc678(0x696)][_0x5dc678(0x7c9)]=_0x240d0,this[_0x5dc678(0x728)](_0x4fdf7d,_0x12187e,_0x37fea0);}else{let _0x1912d1={'error':!0x0};this[_0x5dc678(0x728)](_0x4fdf7d,_0x12187e,_0x1912d1),this['logger'][_0x5dc678(0x2d9)](this[_0x5dc678(0x476)]+'\x20('+this[_0x5dc678(0x21a)][_0x5dc678(0x1fb)]+_0x5dc678(0x4b2));}}catch(_0x3b8479){let _0x635f06={'error':!0x0,'errorLog':_0x3b8479[_0x5dc678(0x28f)]()};this[_0x5dc678(0x728)](_0x4fdf7d,_0x12187e,_0x635f06),this['logger']['error'](this[_0x5dc678(0x476)]+'\x20('+this[_0x5dc678(0x21a)][_0x5dc678(0x1fb)]+_0x5dc678(0x29e)+(_0x3b8479 instanceof Error?_0x3b8479[_0x5dc678(0x58c)]:JSON[_0x5dc678(0x35b)](_0x3b8479,null,0x2)));}}async[a0_0x108f24(0x53b)](_0x19bb89,_0x2591cb){const _0x2fb5cd=a0_0x108f24;let _0x44850e=_0x19bb89[_0x2fb5cd(0x47b)];_0x2591cb[_0x2fb5cd(0x3a9)][_0x2fb5cd(0x47b)]&&_0x2591cb['uazapi']['remoteJid'][_0x2fb5cd(0x37f)]()!==''&&(_0x44850e=_0x2591cb[_0x2fb5cd(0x3a9)][_0x2fb5cd(0x47b)][_0x2fb5cd(0x37f)]()),this[_0x2fb5cd(0x711)]['verbose'](this[_0x2fb5cd(0x476)]+'\x20('+this['instance'][_0x2fb5cd(0x1fb)]+'):\x20Enviando\x20localização');let _0x2b44f5={'number':_0x44850e,'options':{'delay':_0x2591cb[_0x2fb5cd(0x3a9)][_0x2fb5cd(0x64e)]},'locationMessage':{'name':_0x2591cb[_0x2fb5cd(0x3a9)][_0x2fb5cd(0x2ec)],'address':_0x2591cb[_0x2fb5cd(0x3a9)][_0x2fb5cd(0x2da)],'latitude':_0x2591cb['uazapi'][_0x2fb5cd(0x35e)],'longitude':_0x2591cb[_0x2fb5cd(0x3a9)][_0x2fb5cd(0x754)]}};try{let _0xf07ef6=await this['locationMessage'](_0x2b44f5);if(_0xf07ef6){let _0x200a51={'_id':_0xf07ef6['key']['id'],'_fromMe':_0xf07ef6['key'][_0x2fb5cd(0x310)],'_remoteJid':_0xf07ef6[_0x2fb5cd(0x662)]['remoteJid']};_0x19bb89[_0x2fb5cd(0x696)][_0x2fb5cd(0x217)]=_0x2591cb[_0x2fb5cd(0x5ee)][_0x2fb5cd(0x28f)]();let {message_normalized:_0x47a2df}=this['normalizeMessage'](_0xf07ef6[_0x2fb5cd(0x58c)],_(_0xf07ef6[_0x2fb5cd(0x58c)]),null);_0x19bb89[_0x2fb5cd(0x696)][_0x2fb5cd(0x20d)]=await _0x47a2df;let _0x10707a={'messageId':_0xf07ef6[_0x2fb5cd(0x662)]['id']},_0x234603=_0x19bb89[_0x2fb5cd(0x696)][_0x2fb5cd(0x7c9)];Object[_0x2fb5cd(0x592)](_0x234603,_0x200a51),_0x19bb89[_0x2fb5cd(0x696)][_0x2fb5cd(0x7c9)]=_0x234603,this[_0x2fb5cd(0x728)](_0x19bb89,_0x2591cb,_0x10707a);}else{let _0x3968ad={'error':!0x0};this[_0x2fb5cd(0x728)](_0x19bb89,_0x2591cb,_0x3968ad),this[_0x2fb5cd(0x711)]['error'](this[_0x2fb5cd(0x476)]+'\x20('+this[_0x2fb5cd(0x21a)][_0x2fb5cd(0x1fb)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.');}}catch(_0x46d7b4){let _0x2a2f41={'error':!0x0,'errorLog':_0x46d7b4[_0x2fb5cd(0x28f)]()};this[_0x2fb5cd(0x728)](_0x19bb89,_0x2591cb,_0x2a2f41),this[_0x2fb5cd(0x711)][_0x2fb5cd(0x2d9)](this[_0x2fb5cd(0x476)]+'\x20('+this[_0x2fb5cd(0x21a)][_0x2fb5cd(0x1fb)]+_0x2fb5cd(0x1f6)+(_0x46d7b4 instanceof Error?_0x46d7b4[_0x2fb5cd(0x58c)]:JSON[_0x2fb5cd(0x35b)](_0x46d7b4,null,0x2)));}}async['uazapiSendAudio'](_0x29e96e,_0x257974){const _0x1591ee=a0_0x108f24;let _0x182c0f=_0x29e96e[_0x1591ee(0x47b)];_0x257974[_0x1591ee(0x3a9)]['remoteJid']&&_0x257974[_0x1591ee(0x3a9)][_0x1591ee(0x47b)]['trim']()!==''&&(_0x182c0f=_0x257974[_0x1591ee(0x3a9)]['remoteJid'][_0x1591ee(0x37f)]()),this[_0x1591ee(0x711)]['verbose'](this[_0x1591ee(0x476)]+'\x20('+this[_0x1591ee(0x21a)][_0x1591ee(0x1fb)]+'):\x20Enviando\x20áudio');let _0x36b43c={'number':_0x182c0f,'options':{'delay':_0x257974[_0x1591ee(0x3a9)][_0x1591ee(0x64e)]},'audioMessage':{'audio':_0x257974[_0x1591ee(0x3a9)][_0x1591ee(0x2a9)]}};try{let _0x181688=await this['audioWhatsapp'](_0x36b43c);if(_0x181688){let _0xe37a36={'_id':_0x181688['key']['id'],'_fromMe':_0x181688[_0x1591ee(0x662)][_0x1591ee(0x310)],'_remoteJid':_0x181688['key']['remoteJid']};_0x29e96e[_0x1591ee(0x696)]['lastBlockId']=_0x257974[_0x1591ee(0x5ee)]['toString']();let {message_normalized:_0x582953}=this['normalizeMessage'](_0x181688[_0x1591ee(0x58c)],_(_0x181688['message']),null);_0x29e96e[_0x1591ee(0x696)][_0x1591ee(0x20d)]=await _0x582953;let _0x455e37={'messageId':_0x181688['key']['id']},_0x219f18=_0x29e96e[_0x1591ee(0x696)][_0x1591ee(0x7c9)];Object[_0x1591ee(0x592)](_0x219f18,_0xe37a36),_0x29e96e['chatLog'][_0x1591ee(0x7c9)]=_0x219f18,this[_0x1591ee(0x728)](_0x29e96e,_0x257974,_0x455e37);}else{let _0x24cca2={'error':!0x0};this['updateConversation'](_0x29e96e,_0x257974,_0x24cca2),this[_0x1591ee(0x711)][_0x1591ee(0x2d9)](this[_0x1591ee(0x476)]+'\x20('+this[_0x1591ee(0x21a)][_0x1591ee(0x1fb)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.');}}catch(_0x312665){let _0x2179ba={'error':!0x0,'errorLog':_0x312665[_0x1591ee(0x28f)]()};this[_0x1591ee(0x728)](_0x29e96e,_0x257974,_0x2179ba),this[_0x1591ee(0x711)][_0x1591ee(0x2d9)](this[_0x1591ee(0x476)]+'\x20('+this['instance'][_0x1591ee(0x1fb)]+_0x1591ee(0x2ef)+(_0x312665 instanceof Error?_0x312665[_0x1591ee(0x58c)]:JSON['stringify'](_0x312665,null,0x2)));}}async[a0_0x108f24(0x3bb)](_0x42402e,_0x8112bb){const _0x159bfa=a0_0x108f24;let _0x1bf90b=_0x42402e[_0x159bfa(0x47b)];_0x8112bb[_0x159bfa(0x3a9)][_0x159bfa(0x47b)]&&_0x8112bb[_0x159bfa(0x3a9)]['remoteJid']['trim']()!==''&&(_0x1bf90b=_0x8112bb[_0x159bfa(0x3a9)][_0x159bfa(0x47b)][_0x159bfa(0x37f)]()),this['logger'][_0x159bfa(0x5f3)](this['instanceName']+'\x20('+this[_0x159bfa(0x21a)][_0x159bfa(0x1fb)]+_0x159bfa(0x5c7));let _0x3db5b6={'number':_0x1bf90b,'options':{'delay':_0x8112bb[_0x159bfa(0x3a9)][_0x159bfa(0x64e)]},'contactMessage':[{'fullName':_0x8112bb[_0x159bfa(0x3a9)][_0x159bfa(0x729)],'phoneNumber':_0x8112bb[_0x159bfa(0x3a9)][_0x159bfa(0x2d4)]}]};try{let _0x279238=await this[_0x159bfa(0x699)](_0x3db5b6);if(_0x279238){let _0x1caef7={'_id':_0x279238['key']['id'],'_fromMe':_0x279238['key'][_0x159bfa(0x310)],'_remoteJid':_0x279238[_0x159bfa(0x662)][_0x159bfa(0x47b)]};_0x42402e['chatLog'][_0x159bfa(0x217)]=_0x8112bb[_0x159bfa(0x5ee)][_0x159bfa(0x28f)]();let {message_normalized:_0x33f9d6}=this['normalizeMessage'](_0x279238[_0x159bfa(0x58c)],_(_0x279238['message']),null);_0x42402e[_0x159bfa(0x696)]['lastSendMessage']=await _0x33f9d6;let _0x52ab14={'messageId':_0x279238[_0x159bfa(0x662)]['id']},_0x163ebf=_0x42402e[_0x159bfa(0x696)][_0x159bfa(0x7c9)];Object['assign'](_0x163ebf,_0x1caef7),_0x42402e[_0x159bfa(0x696)]['realVariables']=_0x163ebf,this['updateConversation'](_0x42402e,_0x8112bb,_0x52ab14);}else{let _0x1ed4d0={'error':!0x0};this[_0x159bfa(0x728)](_0x42402e,_0x8112bb,_0x1ed4d0),this[_0x159bfa(0x711)][_0x159bfa(0x2d9)](this[_0x159bfa(0x476)]+'\x20('+this[_0x159bfa(0x21a)]['wuid']+_0x159bfa(0x44d));}}catch(_0x306103){let _0x3e34ef={'error':!0x0,'errorLog':_0x306103['toString']()};this[_0x159bfa(0x728)](_0x42402e,_0x8112bb,_0x3e34ef),this[_0x159bfa(0x711)][_0x159bfa(0x2d9)](this[_0x159bfa(0x476)]+'\x20('+this['instance']['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20'+(_0x306103 instanceof Error?_0x306103[_0x159bfa(0x58c)]:JSON['stringify'](_0x306103,null,0x2)));}}['replaceVariablesInReplyOptions'](_0x1f170c,_0x43881b){const _0x229250=a0_0x108f24;for(let _0x218e6b of _0x1f170c)_0x218e6b[_0x229250(0x585)]&&(_0x218e6b['option']=this[_0x229250(0x57d)](_0x218e6b['option'],_0x43881b)),_0x218e6b[_0x229250(0x67e)]&&(_0x218e6b[_0x229250(0x67e)]=this[_0x229250(0x57d)](_0x218e6b[_0x229250(0x67e)],_0x43881b));}async[a0_0x108f24(0x4b9)](_0x1dce41,_0x4a66ad){const _0x2187dc=a0_0x108f24;let _0x455c5d=_0x1dce41[_0x2187dc(0x47b)];_0x4a66ad['uazapi'][_0x2187dc(0x47b)]&&_0x4a66ad[_0x2187dc(0x3a9)]['remoteJid']['trim']()!==''&&(_0x455c5d=_0x4a66ad[_0x2187dc(0x3a9)][_0x2187dc(0x47b)][_0x2187dc(0x37f)]()),this[_0x2187dc(0x711)][_0x2187dc(0x5f3)](this[_0x2187dc(0x476)]+'\x20('+this[_0x2187dc(0x21a)]['wuid']+_0x2187dc(0x594));let _0x14314e=_0x1dce41[_0x2187dc(0x61e)]['filter'](_0x32e133=>_0x32e133[_0x2187dc(0x474)]===_0x4a66ad['_id'])[_0x2187dc(0x223)]((_0x157d62,_0x89a795)=>_0x157d62[_0x2187dc(0x584)]-_0x89a795['order']);this['replaceVariablesInReplyOptions'](_0x14314e,_0x1dce41[_0x2187dc(0x696)][_0x2187dc(0x7c9)]);let _0x7937df=_0x14314e[_0x2187dc(0x49e)](_0x173878=>_0x173878['option']),_0x57079e={'number':_0x455c5d,'menuMessage':{'type':_0x4a66ad[_0x2187dc(0x3a9)]['menuType']||_0x2187dc(0x6cd),'text':_0x4a66ad['uazapi'][_0x2187dc(0x341)]||_0x4a66ad['uazapi'][_0x2187dc(0x2ec)],'footerText':_0x4a66ad[_0x2187dc(0x3a9)][_0x2187dc(0x394)],'buttonText':_0x4a66ad['uazapi'][_0x2187dc(0x247)],'selectableCount':0x1,'choices':_0x7937df},'options':{'delay':_0x4a66ad[_0x2187dc(0x3a9)]['delay']}};try{let _0x468bcf=await this[_0x2187dc(0x763)](_0x57079e);if(_0x468bcf){let _0x4570c0={'_id':_0x468bcf[_0x2187dc(0x662)]['id'],'_fromMe':_0x468bcf['key'][_0x2187dc(0x310)],'_remoteJid':_0x468bcf[_0x2187dc(0x662)][_0x2187dc(0x47b)]};_0x4a66ad[_0x2187dc(0x3a9)][_0x2187dc(0x583)]===!0x0&&(_0x1dce41[_0x2187dc(0x60e)]=_0x2187dc(0x689),this[_0x2187dc(0x711)][_0x2187dc(0x5f3)](this[_0x2187dc(0x476)]+'\x20('+this[_0x2187dc(0x21a)][_0x2187dc(0x1fb)]+_0x2187dc(0x1f2)+_0x1dce41[_0x2187dc(0x60e)])),this[_0x2187dc(0x711)][_0x2187dc(0x5f3)](this[_0x2187dc(0x476)]+'\x20('+this[_0x2187dc(0x21a)]['wuid']+_0x2187dc(0x520)+(_0x4a66ad['uazapi'][_0x2187dc(0x2ec)]||_0x4a66ad[_0x2187dc(0x3a9)][_0x2187dc(0x341)])),_0x1dce41[_0x2187dc(0x48c)]=_0x468bcf[_0x2187dc(0x662)]['id'],_0x1dce41[_0x2187dc(0x3df)]=_0x4a66ad[_0x2187dc(0x3a9)][_0x2187dc(0x2ec)]||_0x4a66ad[_0x2187dc(0x3a9)][_0x2187dc(0x341)],_0x1dce41[_0x2187dc(0x597)]=_0x14314e,_0x4a66ad[_0x2187dc(0x3a9)]['menuExpiredMessage']&&(_0x1dce41[_0x2187dc(0x706)]=_0x4a66ad[_0x2187dc(0x3a9)][_0x2187dc(0x519)]),this['logger'][_0x2187dc(0x5f3)](this[_0x2187dc(0x476)]+'\x20('+this[_0x2187dc(0x21a)][_0x2187dc(0x1fb)]+'):\x20conversation.waitingMenu_name'+_0x1dce41[_0x2187dc(0x3df)]),_0x1dce41[_0x2187dc(0x696)][_0x2187dc(0x217)]=_0x4a66ad[_0x2187dc(0x5ee)][_0x2187dc(0x28f)]();let {message_normalized:_0x457b4b}=this[_0x2187dc(0x779)](_0x468bcf[_0x2187dc(0x58c)],_(_0x468bcf[_0x2187dc(0x58c)]),null);_0x1dce41['chatLog']['lastSendMessage']=await _0x457b4b;let _0x4141bf={'messageId':_0x468bcf['key']['id']},_0xa654c9=_0x1dce41[_0x2187dc(0x696)][_0x2187dc(0x7c9)];Object[_0x2187dc(0x592)](_0xa654c9,_0x4570c0),_0x1dce41[_0x2187dc(0x696)]['realVariables']=_0xa654c9,this[_0x2187dc(0x728)](_0x1dce41,_0x4a66ad,_0x4141bf);}else{let _0x1ac4e4={'error':!0x0};this['updateConversation'](_0x1dce41,_0x4a66ad,_0x1ac4e4),this['logger'][_0x2187dc(0x2d9)](this[_0x2187dc(0x476)]+'\x20('+this[_0x2187dc(0x21a)][_0x2187dc(0x1fb)]+_0x2187dc(0x323));}}catch(_0x5a92bb){let _0x41c23d={'error':!0x0,'errorLog':_0x5a92bb instanceof Error?_0x5a92bb[_0x2187dc(0x58c)]:JSON[_0x2187dc(0x35b)](_0x5a92bb,null,0x2)};this[_0x2187dc(0x728)](_0x1dce41,_0x4a66ad,_0x41c23d),this[_0x2187dc(0x711)]['error'](this['instanceName']+'\x20('+this[_0x2187dc(0x21a)][_0x2187dc(0x1fb)]+_0x2187dc(0x790)+(_0x5a92bb instanceof Error?_0x5a92bb[_0x2187dc(0x58c)]:JSON['stringify'](_0x5a92bb,null,0x2)));}}async[a0_0x108f24(0x250)](_0x41f9ca,_0x88e324){const _0x4f45d7=a0_0x108f24;this[_0x4f45d7(0x711)][_0x4f45d7(0x5f3)](this[_0x4f45d7(0x476)]+'\x20('+this[_0x4f45d7(0x21a)]['wuid']+_0x4f45d7(0x682));let _0x5e74e2=_0x41f9ca[_0x4f45d7(0x696)][_0x4f45d7(0x6cc)][_0x4f45d7(0x731)](_0x4dec5a=>_0x4dec5a[_0x4f45d7(0x474)][_0x4f45d7(0x28f)]()===_0x88e324['uazapi']['blockId'][_0x4f45d7(0x28f)]()),_0x3c457d={'id':_0x5e74e2[_0x4f45d7(0x7cc)],'remoteJid':_0x5e74e2[_0x4f45d7(0x47b)],'fromMe':_0x5e74e2[_0x4f45d7(0x310)]};try{let _0x5b2081=await this[_0x4f45d7(0x6a4)](_0x3c457d);if(_0x5b2081){_0x41f9ca[_0x4f45d7(0x696)]['lastBlockId']=_0x88e324[_0x4f45d7(0x5ee)][_0x4f45d7(0x28f)]();let {message_normalized:_0x110126}=this['normalizeMessage'](_0x5b2081[_0x4f45d7(0x58c)],_(_0x5b2081[_0x4f45d7(0x58c)]),null);_0x41f9ca[_0x4f45d7(0x696)][_0x4f45d7(0x20d)]=await _0x110126;let _0x3c8dd1={};this[_0x4f45d7(0x728)](_0x41f9ca,_0x88e324,_0x3c8dd1);}else{let _0x299bb5={'error':!0x0};this[_0x4f45d7(0x728)](_0x41f9ca,_0x88e324,_0x299bb5),this[_0x4f45d7(0x711)][_0x4f45d7(0x2d9)](this[_0x4f45d7(0x476)]+'\x20('+this['instance'][_0x4f45d7(0x1fb)]+_0x4f45d7(0x73d));}}catch(_0x1ec10d){let _0x63f176={'error':!0x0,'errorLog':_0x1ec10d instanceof Error?_0x1ec10d[_0x4f45d7(0x58c)]:JSON['stringify'](_0x1ec10d,null,0x2)};this['updateConversation'](_0x41f9ca,_0x88e324,_0x63f176),this[_0x4f45d7(0x711)][_0x4f45d7(0x2d9)](this[_0x4f45d7(0x476)]+'\x20('+this[_0x4f45d7(0x21a)]['wuid']+_0x4f45d7(0x2cd)+(_0x1ec10d instanceof Error?_0x1ec10d[_0x4f45d7(0x58c)]:JSON[_0x4f45d7(0x35b)](_0x1ec10d,null,0x2)));}}async['createFlow'](_0x568ab2){const _0xe6f573=a0_0x108f24;try{if(this[_0xe6f573(0x711)][_0xe6f573(0x5f3)](this[_0xe6f573(0x476)]+'\x20('+this[_0xe6f573(0x21a)][_0xe6f573(0x1fb)]+_0xe6f573(0x432)),await this[_0xe6f573(0x726)][_0xe6f573(0x48d)][_0xe6f573(0x624)]({'where':{'name':_0x568ab2[_0xe6f573(0x2ec)]}},this[_0xe6f573(0x21a)]['wuid']))return{'message':'Flow\x20already\x20exists'};_0x568ab2[_0xe6f573(0x543)]===!0x0&&await this[_0xe6f573(0x726)][_0xe6f573(0x48d)][_0xe6f573(0x7a3)]({},{'default':!0x1},this['instance'][_0xe6f573(0x1fb)]);let _0x166836=new ie['Types'][(_0xe6f573(0x76a))](),_0x4346d3={'_id':_0x166836,'default':!0x0,'title':'Início','x':0x0,'y':0x0},_0x5418af={'_id':new ie[(_0xe6f573(0x3b6))][(_0xe6f573(0x76a))](),'order':0x1,'groupId':_0x166836[_0xe6f573(0x28f)](),'type':_0xe6f573(0x513)},_0xe0f688={'_id':new ie[(_0xe6f573(0x3b6))][(_0xe6f573(0x76a))](),'owner':this['instance'][_0xe6f573(0x1fb)],'name':_0x568ab2[_0xe6f573(0x2ec)],'groups':[_0x4346d3],'blocks':[_0x5418af],..._0x568ab2};return _0xe0f688=await this['repository'][_0xe6f573(0x48d)][_0xe6f573(0x282)](_0xe0f688,this['instance'][_0xe6f573(0x1fb)]),_0xe0f688;}catch(_0x2f2892){throw this[_0xe6f573(0x711)]['error'](this[_0xe6f573(0x476)]+'\x20('+this[_0xe6f573(0x21a)][_0xe6f573(0x1fb)]+_0xe6f573(0x39a)+(_0x2f2892 instanceof Error?_0x2f2892[_0xe6f573(0x58c)]:JSON[_0xe6f573(0x35b)](_0x2f2892,null,0x2))),new h(_0xe6f573(0x4be)+_0x2f2892);}}async[a0_0x108f24(0x207)](_0x51d0c3){const _0x2ffda7=a0_0x108f24;try{return this[_0x2ffda7(0x711)]['verbose'](this[_0x2ffda7(0x476)]+'\x20('+this[_0x2ffda7(0x21a)][_0x2ffda7(0x1fb)]+_0x2ffda7(0x3de)),await this[_0x2ffda7(0x726)][_0x2ffda7(0x48d)]['deleteOne']({'where':{'name':_0x51d0c3}},this[_0x2ffda7(0x21a)][_0x2ffda7(0x1fb)]);}catch(_0x23182c){return this['logger'][_0x2ffda7(0x2d9)](this[_0x2ffda7(0x476)]+'\x20('+this[_0x2ffda7(0x21a)][_0x2ffda7(0x1fb)]+_0x2ffda7(0x5d6)+(_0x23182c instanceof Error?_0x23182c['message']:JSON[_0x2ffda7(0x35b)](_0x23182c,null,0x2))),{'message':'Erro\x20ao\x20deletar\x20o\x20fluxo:\x20'+_0x23182c};}}async[a0_0x108f24(0x618)](_0x44f578){const _0x272b76=a0_0x108f24;try{this[_0x272b76(0x711)]['verbose'](this[_0x272b76(0x476)]+'\x20('+this[_0x272b76(0x21a)][_0x272b76(0x1fb)]+_0x272b76(0x30f));let _0x7802fc=await this[_0x272b76(0x726)]['flow'][_0x272b76(0x624)]({'where':{'name':_0x44f578}},this[_0x272b76(0x21a)]['wuid']);if(!_0x7802fc)throw new Error(_0x272b76(0x493));if(!this['AutomateSystem']&&(await this[_0x272b76(0x553)](),!this[_0x272b76(0x3e5)]))return null;let _0x4d1be5=this['AutomateSystem']?.[_0x272b76(0x230)]['map'](_0x31b8ad=>_0x31b8ad['name']),_0x432348=[_0x272b76(0x327),_0x272b76(0x3e6),_0x272b76(0x767),_0x272b76(0x3b3),_0x272b76(0x60e),'notas',_0x272b76(0x76d),_0x272b76(0x775)];_0x7802fc[_0x272b76(0x21d)]=_0x7802fc[_0x272b76(0x21d)][_0x272b76(0x517)](_0x19a9e2=>!(_0x19a9e2[_0x272b76(0x614)]==='leadInfo'||_0x19a9e2[_0x272b76(0x5dd)])),_0x432348[_0x272b76(0x2ab)](_0x4db549=>{const _0x5e99ae=_0x272b76;_0x7802fc[_0x5e99ae(0x21d)]['push']({'folder':_0x5e99ae(0x5dd),'name':_0x4db549,'value':'','doc':'','leadInfo':!0x0});}),_0x4d1be5['forEach'](_0x83271=>{const _0x19f06b=_0x272b76;let _0x2fa130=_0x7802fc[_0x19f06b(0x21d)][_0x19f06b(0x4fe)](_0x585491=>_0x585491[_0x19f06b(0x2ec)]===_0x83271);_0x2fa130===-0x1?_0x7802fc[_0x19f06b(0x21d)][_0x19f06b(0x1d0)]({'folder':_0x19f06b(0x5dd),'name':_0x83271,'value':'','doc':'','leadInfo':!0x0}):(_0x7802fc['variables'][_0x2fa130][_0x19f06b(0x614)]=_0x19f06b(0x5dd),_0x7802fc[_0x19f06b(0x21d)][_0x2fa130][_0x19f06b(0x5dd)]=!0x0);}),_0x7802fc[_0x272b76(0x72c)]&&_0x7802fc[_0x272b76(0x72c)][_0x272b76(0x231)]>0x0&&_0x7802fc[_0x272b76(0x72c)][_0x272b76(0x2ab)](_0x556752=>{const _0x3b910d=_0x272b76;_0x556752[_0x3b910d(0x566)]&&_0x556752[_0x3b910d(0x395)]&&_0x556752[_0x3b910d(0x566)]===_0x556752[_0x3b910d(0x395)]&&(_0x556752['next_groupId']=null);});let _0x27d976=await this['repository'][_0x272b76(0x48d)][_0x272b76(0x4c9)](_0x7802fc[_0x272b76(0x5ee)],_0x7802fc,this[_0x272b76(0x21a)]['wuid']);if(!_0x27d976)throw new Error(_0x272b76(0x3e0));return _0x27d976;}catch(_0x42206b){throw this[_0x272b76(0x711)][_0x272b76(0x2d9)](this[_0x272b76(0x476)]+'\x20('+this[_0x272b76(0x21a)][_0x272b76(0x1fb)]+'):\x20Erro\x20ao\x20buscar\x20o\x20fluxo\x20'+(_0x42206b instanceof Error?_0x42206b[_0x272b76(0x58c)]:JSON[_0x272b76(0x35b)](_0x42206b,null,0x2))),new h(_0x272b76(0x5e0)+_0x42206b);}}async[a0_0x108f24(0x2dd)](){const _0x47d114=a0_0x108f24;try{return this[_0x47d114(0x711)][_0x47d114(0x5f3)](this[_0x47d114(0x476)]+'\x20('+this[_0x47d114(0x21a)][_0x47d114(0x1fb)]+'):\x20Buscando\x20todos\x20os\x20fluxos...'),await this[_0x47d114(0x726)][_0x47d114(0x48d)]['findAll']({'where':{}},this['instance'][_0x47d114(0x1fb)]);}catch(_0x336415){return this[_0x47d114(0x711)][_0x47d114(0x2d9)](this['instanceName']+'\x20('+this[_0x47d114(0x21a)][_0x47d114(0x1fb)]+_0x47d114(0x409)+(_0x336415 instanceof Error?_0x336415[_0x47d114(0x58c)]:JSON[_0x47d114(0x35b)](_0x336415,null,0x2))),{'message':_0x47d114(0x2a6)+_0x336415};}}async['editFlow'](_0x3c24f9){const _0x383cba=a0_0x108f24;try{this[_0x383cba(0x711)][_0x383cba(0x5f3)](this[_0x383cba(0x476)]+'\x20('+this['instance']['wuid']+'):\x20Alterando\x20fluxo...');let _0x3d0e9b=await this[_0x383cba(0x726)]['flow'][_0x383cba(0x624)]({'where':{'name':_0x3c24f9['name']}},this[_0x383cba(0x21a)]['wuid']);return _0x3d0e9b?(_0x3c24f9[_0x383cba(0x543)]===!0x0&&await this[_0x383cba(0x726)][_0x383cba(0x48d)]['updateMany']({},{'default':!0x1},this[_0x383cba(0x21a)][_0x383cba(0x1fb)]),await this[_0x383cba(0x726)][_0x383cba(0x48d)][_0x383cba(0x4c9)](_0x3d0e9b[_0x383cba(0x5ee)],_0x3c24f9,this[_0x383cba(0x21a)][_0x383cba(0x1fb)])):{'message':_0x383cba(0x80c)};}catch(_0x15c0f3){throw this[_0x383cba(0x711)][_0x383cba(0x2d9)](this[_0x383cba(0x476)]+'\x20('+this[_0x383cba(0x21a)][_0x383cba(0x1fb)]+_0x383cba(0x7b1)+(_0x15c0f3 instanceof Error?_0x15c0f3[_0x383cba(0x58c)]:JSON[_0x383cba(0x35b)](_0x15c0f3,null,0x2))),new h('Erro\x20ao\x20alterar\x20o\x20fluxo:\x20'+(_0x15c0f3 instanceof Error?_0x15c0f3['message']:JSON['stringify'](_0x15c0f3,null,0x2)));}}async[a0_0x108f24(0x2d5)](_0x2868a9){const _0x4a66d3=a0_0x108f24;try{this[_0x4a66d3(0x711)]['verbose'](this['instanceName']+'\x20('+this[_0x4a66d3(0x21a)][_0x4a66d3(0x1fb)]+_0x4a66d3(0x374));let _0x5b60a8=await this[_0x4a66d3(0x726)][_0x4a66d3(0x48d)][_0x4a66d3(0x624)]({'where':{'name':_0x2868a9['name']}},this[_0x4a66d3(0x21a)][_0x4a66d3(0x1fb)]);_0x5b60a8||this['throwAndLogError'](_0x4a66d3(0x493));let {block:_0x565566}=_0x2868a9;_0x565566?.[_0x4a66d3(0x26e)]?this['copyBlock'](_0x5b60a8,_0x2868a9):_0x565566?.[_0x4a66d3(0x714)]?this[_0x4a66d3(0x303)](_0x5b60a8,_0x2868a9):_0x565566[_0x4a66d3(0x5ee)]?await this[_0x4a66d3(0x547)](_0x5b60a8,_0x2868a9):this[_0x4a66d3(0x6f7)](_0x5b60a8,_0x2868a9);let _0x12fb64=await this[_0x4a66d3(0x726)]['flow']['updateOne'](_0x5b60a8[_0x4a66d3(0x5ee)],_0x5b60a8,this[_0x4a66d3(0x21a)][_0x4a66d3(0x1fb)]);if(!_0x12fb64)throw new Error(_0x4a66d3(0x3e0));return _0x12fb64;}catch(_0x1db46c){this[_0x4a66d3(0x331)](_0x4a66d3(0x809)+_0x1db46c);}}async[a0_0x108f24(0x389)](_0x576400,_0xd96279){const _0x46bf75=a0_0x108f24;let _0x3e23d8=_0xd96279[_0x46bf75(0x787)][_0x46bf75(0x5ee)],_0x5a0c8f=_0x576400['blocks'][_0x46bf75(0x731)](_0x15a44a=>_0x15a44a['_id'][_0x46bf75(0x28f)]()===_0x3e23d8);if(!_0x5a0c8f){this[_0x46bf75(0x711)][_0x46bf75(0x2d9)](this[_0x46bf75(0x476)]+'\x20('+this[_0x46bf75(0x21a)][_0x46bf75(0x1fb)]+'):\x20Bloco\x20com\x20ID\x20'+_0x3e23d8+_0x46bf75(0x41f));return;}this[_0x46bf75(0x711)]['verbose'](this['instanceName']+'\x20('+this[_0x46bf75(0x21a)][_0x46bf75(0x1fb)]+_0x46bf75(0x399)+JSON[_0x46bf75(0x35b)](_0x5a0c8f));let _0x10a15a=JSON[_0x46bf75(0x6aa)](JSON['stringify'](_0x5a0c8f));_0x10a15a[_0x46bf75(0x5ee)]=new ie[(_0x46bf75(0x543))][(_0x46bf75(0x3b6))][(_0x46bf75(0x76a))](),this[_0x46bf75(0x711)][_0x46bf75(0x5f3)](this[_0x46bf75(0x476)]+'\x20('+this[_0x46bf75(0x21a)][_0x46bf75(0x1fb)]+_0x46bf75(0x70f)+JSON['stringify'](_0x10a15a)),_0x576400['blocks'][_0x46bf75(0x1d0)](_0x10a15a),this[_0x46bf75(0x774)](_0x576400[_0x46bf75(0x72c)],_0x10a15a[_0x46bf75(0x566)]);}['throwAndLogError'](_0x1fb187){const _0x298663=a0_0x108f24;throw this[_0x298663(0x711)][_0x298663(0x2d9)](this['instanceName']+'\x20('+this['instance'][_0x298663(0x1fb)]+'):\x20'+_0x1fb187),new h(_0x1fb187);}[a0_0x108f24(0x303)](_0x46ce7e,_0x28348b){const _0x20b19d=a0_0x108f24;let {block:_0x44b6b8}=_0x28348b;if(_0x44b6b8[_0x20b19d(0x4bb)]===_0x20b19d(0x513)){this[_0x20b19d(0x331)](_0x20b19d(0x272));return;}if(!_0x44b6b8['_id']){this['throwAndLogError'](_0x20b19d(0x3f3));return;}let _0x237c43=_0x46ce7e[_0x20b19d(0x72c)]['find'](_0x4d12fd=>_0x4d12fd['_id'][_0x20b19d(0x28f)]()===_0x28348b[_0x20b19d(0x787)][_0x20b19d(0x5ee)][_0x20b19d(0x28f)]());if(!_0x237c43){this[_0x20b19d(0x331)](_0x20b19d(0x5b0)+_0x44b6b8[_0x20b19d(0x5ee)]+_0x20b19d(0x492));return;}_0x46ce7e[_0x20b19d(0x72c)]=_0x46ce7e['blocks'][_0x20b19d(0x517)](_0x4486cf=>_0x4486cf[_0x20b19d(0x5ee)][_0x20b19d(0x28f)]()!==_0x28348b['block']['_id'][_0x20b19d(0x28f)]()),_0x46ce7e[_0x20b19d(0x648)]=_0x46ce7e[_0x20b19d(0x648)][_0x20b19d(0x517)](_0x3868cc=>_0x3868cc[_0x20b19d(0x474)]!==_0x44b6b8[_0x20b19d(0x5ee)]['toString']()),_0x46ce7e[_0x20b19d(0x6af)]=_0x46ce7e[_0x20b19d(0x6af)][_0x20b19d(0x517)](_0x56c0dd=>_0x56c0dd[_0x20b19d(0x474)]!==_0x44b6b8[_0x20b19d(0x5ee)][_0x20b19d(0x28f)]()),_0x46ce7e[_0x20b19d(0x61e)]=_0x46ce7e[_0x20b19d(0x61e)][_0x20b19d(0x517)](_0x1e3466=>_0x1e3466[_0x20b19d(0x474)]!==_0x44b6b8[_0x20b19d(0x5ee)][_0x20b19d(0x28f)]()),this[_0x20b19d(0x774)](_0x46ce7e['blocks'],_0x237c43['groupId']);}async[a0_0x108f24(0x547)](_0x99df59,_0xe2a332){const _0x3bf6ed=a0_0x108f24;let _0xf64d89=_0x99df59[_0x3bf6ed(0x72c)]['findIndex'](_0x8386a4=>_0x8386a4[_0x3bf6ed(0x5ee)][_0x3bf6ed(0x28f)]()===_0xe2a332[_0x3bf6ed(0x787)]['_id'][_0x3bf6ed(0x28f)]());if(this[_0x3bf6ed(0x711)][_0x3bf6ed(0x5f3)](this[_0x3bf6ed(0x476)]+'\x20('+this['instance'][_0x3bf6ed(0x1fb)]+_0x3bf6ed(0x31a)+_0xf64d89),_0xf64d89===-0x1){this[_0x3bf6ed(0x711)][_0x3bf6ed(0x5f3)](_0x3bf6ed(0x5b0)+_0xe2a332[_0x3bf6ed(0x787)]['_id']+_0x3bf6ed(0x7bf));return;}if(_0x99df59[_0x3bf6ed(0x72c)][_0xf64d89][_0x3bf6ed(0x4bb)]===_0x3bf6ed(0x513)){let _0x56074d=Object[_0x3bf6ed(0x686)](_0xe2a332[_0x3bf6ed(0x787)]);if(_0x56074d[_0x3bf6ed(0x231)]>0x2||_0x56074d[_0x3bf6ed(0x231)]===0x2&&!_0x56074d[_0x3bf6ed(0x3cd)]('next_groupId')){this[_0x3bf6ed(0x331)](_0x3bf6ed(0x356));return;}}let _0x1adea9=_0x99df59[_0x3bf6ed(0x72c)][_0xf64d89][_0x3bf6ed(0x566)];for(let _0x548baa in _0xe2a332[_0x3bf6ed(0x787)])_0xe2a332[_0x3bf6ed(0x787)]['hasOwnProperty'](_0x548baa)&&(_0x99df59[_0x3bf6ed(0x72c)][_0xf64d89][_0x548baa]=_0xe2a332[_0x3bf6ed(0x787)][_0x548baa]);if(this[_0x3bf6ed(0x711)]['verbose'](this['instanceName']+'\x20('+this[_0x3bf6ed(0x21a)][_0x3bf6ed(0x1fb)]+_0x3bf6ed(0x202)+JSON[_0x3bf6ed(0x35b)](_0x99df59[_0x3bf6ed(0x72c)][_0xf64d89])),_0x99df59[_0x3bf6ed(0x72c)][_0xf64d89][_0x3bf6ed(0x215)]&&_0x3bf6ed(0x333)in _0x99df59[_0x3bf6ed(0x72c)][_0xf64d89][_0x3bf6ed(0x215)]){this[_0x3bf6ed(0x711)][_0x3bf6ed(0x5f3)](this['instanceName']+'\x20('+this[_0x3bf6ed(0x21a)][_0x3bf6ed(0x1fb)]+_0x3bf6ed(0x6c2));let _0xcf1917=JSON[_0x3bf6ed(0x35b)](_0x99df59[_0x3bf6ed(0x72c)][_0xf64d89]['apirequest']['header'],null,0x1);_0xcf1917[_0x3bf6ed(0x231)]>0x2&&(_0xcf1917=_0xcf1917[_0x3bf6ed(0x6b7)](0x1,_0xcf1917[_0x3bf6ed(0x231)]-0x1)[_0x3bf6ed(0x37f)]()),_0x99df59[_0x3bf6ed(0x72c)][_0xf64d89][_0x3bf6ed(0x215)][_0x3bf6ed(0x5ed)]=_0xcf1917;}if(_0x99df59[_0x3bf6ed(0x72c)][_0xf64d89][_0x3bf6ed(0x215)]&&_0x3bf6ed(0x2c1)in _0x99df59['blocks'][_0xf64d89][_0x3bf6ed(0x215)]){this[_0x3bf6ed(0x711)][_0x3bf6ed(0x5f3)](this[_0x3bf6ed(0x476)]+'\x20('+this[_0x3bf6ed(0x21a)][_0x3bf6ed(0x1fb)]+_0x3bf6ed(0x744));let _0x58366c=JSON['stringify'](_0x99df59[_0x3bf6ed(0x72c)][_0xf64d89][_0x3bf6ed(0x215)][_0x3bf6ed(0x2c1)],null,0x1);_0x58366c[_0x3bf6ed(0x231)]>0x2&&(_0x58366c=_0x58366c[_0x3bf6ed(0x6b7)](0x1,_0x58366c['length']-0x1)[_0x3bf6ed(0x37f)]()),_0x99df59['blocks'][_0xf64d89][_0x3bf6ed(0x215)][_0x3bf6ed(0x72b)]=_0x58366c;}let _0x585814=_0x99df59[_0x3bf6ed(0x72c)][_0xf64d89][_0x3bf6ed(0x566)];_0x1adea9!==_0x585814?(this[_0x3bf6ed(0x774)](_0x99df59['blocks'],_0x1adea9),this[_0x3bf6ed(0x774)](_0x99df59[_0x3bf6ed(0x72c)],_0x585814)):this['reorderBlocks'](_0x99df59[_0x3bf6ed(0x72c)],_0x1adea9);}[a0_0x108f24(0x6f7)](_0x16a483,_0x390f9d){const _0x1d189b=a0_0x108f24;if(_0x390f9d[_0x1d189b(0x787)][_0x1d189b(0x4bb)]===_0x1d189b(0x513)){this[_0x1d189b(0x331)](_0x1d189b(0x46d));return;}if(_0x390f9d[_0x1d189b(0x787)][_0x1d189b(0x215)]&&_0x1d189b(0x333)in _0x390f9d[_0x1d189b(0x787)][_0x1d189b(0x215)]){this['logger'][_0x1d189b(0x5f3)](this[_0x1d189b(0x476)]+'\x20('+this[_0x1d189b(0x21a)][_0x1d189b(0x1fb)]+_0x1d189b(0x6c2));let _0x1e1f71=JSON['stringify'](_0x390f9d[_0x1d189b(0x787)]['apirequest']['header'],null,0x1);_0x1e1f71[_0x1d189b(0x231)]>0x2&&(_0x1e1f71=_0x1e1f71[_0x1d189b(0x6b7)](0x1,_0x1e1f71[_0x1d189b(0x231)]-0x1)[_0x1d189b(0x37f)]()),_0x390f9d[_0x1d189b(0x787)]['apirequest']['headerString']=_0x1e1f71;}_0x390f9d[_0x1d189b(0x787)][_0x1d189b(0x215)]&&'body'in _0x390f9d[_0x1d189b(0x787)][_0x1d189b(0x215)]&&(this[_0x1d189b(0x711)][_0x1d189b(0x5f3)](this[_0x1d189b(0x476)]+'\x20('+this['instance'][_0x1d189b(0x1fb)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x390f9d['block'][_0x1d189b(0x215)][_0x1d189b(0x72b)]=JSON['stringify'](_0x390f9d['block'][_0x1d189b(0x215)][_0x1d189b(0x2c1)],null,0x1)[_0x1d189b(0x37f)]()),_0x16a483[_0x1d189b(0x72c)]['push'](_0x390f9d[_0x1d189b(0x787)]),this['reorderBlocks'](_0x16a483[_0x1d189b(0x72c)],_0x390f9d['block'][_0x1d189b(0x566)]);}[a0_0x108f24(0x774)](_0x5b849c,_0x4853a8){const _0x12f8b2=a0_0x108f24;let _0x5c7831=_0x5b849c['filter'](_0x489d70=>_0x489d70[_0x12f8b2(0x566)]===_0x4853a8);_0x5c7831[_0x12f8b2(0x223)]((_0x5c33bf,_0x559ddf)=>_0x5c33bf[_0x12f8b2(0x584)]-_0x559ddf[_0x12f8b2(0x584)]),_0x5c7831[_0x12f8b2(0x2ab)]((_0x9936a2,_0x170efb)=>_0x9936a2[_0x12f8b2(0x584)]=_0x170efb+0x1);}async[a0_0x108f24(0x7d1)](_0xb807b8){const _0x3fd29f=a0_0x108f24;try{if(this[_0x3fd29f(0x711)][_0x3fd29f(0x5f3)](this[_0x3fd29f(0x476)]+'\x20('+this[_0x3fd29f(0x21a)]['wuid']+_0x3fd29f(0x30c)),!_0xb807b8||!_0xb807b8['replyOption']){this[_0x3fd29f(0x331)](_0x3fd29f(0x71e));return;}let _0x4b2d39=await this[_0x3fd29f(0x726)][_0x3fd29f(0x48d)]['findOne']({'where':{'name':_0xb807b8[_0x3fd29f(0x2ec)]}},this[_0x3fd29f(0x21a)][_0x3fd29f(0x1fb)]);_0x4b2d39||this['throwAndLogError'](_0x3fd29f(0x493));let {replyOption:_0x25ddf7}=_0xb807b8;_0x25ddf7?.[_0x3fd29f(0x714)]?(this[_0x3fd29f(0x532)](_0x4b2d39,_0xb807b8),this['reorderReplyOptions'](_0x4b2d39[_0x3fd29f(0x61e)],_0xb807b8[_0x3fd29f(0x2cf)][_0x3fd29f(0x474)])):_0x25ddf7[_0x3fd29f(0x5ee)]?(await this[_0x3fd29f(0x200)](_0x4b2d39,_0xb807b8),this[_0x3fd29f(0x7d2)](_0x4b2d39[_0x3fd29f(0x61e)],_0xb807b8['replyOption'][_0x3fd29f(0x474)])):(this['addReplyOption'](_0x4b2d39,_0xb807b8),this[_0x3fd29f(0x7d2)](_0x4b2d39['replyOptions'],_0xb807b8[_0x3fd29f(0x2cf)][_0x3fd29f(0x474)]));let _0x18755e=await this[_0x3fd29f(0x726)][_0x3fd29f(0x48d)][_0x3fd29f(0x4c9)](_0x4b2d39[_0x3fd29f(0x5ee)],_0x4b2d39,this[_0x3fd29f(0x21a)][_0x3fd29f(0x1fb)]);if(!_0x18755e)throw new Error(_0x3fd29f(0x3e0));return _0x18755e;}catch(_0x27e0cb){this[_0x3fd29f(0x331)]('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0x27e0cb);}}[a0_0x108f24(0x7d2)](_0x4f8819,_0x2a35a4){const _0x25d0ba=a0_0x108f24;console[_0x25d0ba(0x472)](_0x25d0ba(0x523),_0x2a35a4),_0x4f8819[_0x25d0ba(0x2ab)](_0x3fa2ac=>{const _0x25fa1d=_0x25d0ba;_0x3fa2ac['blockId']===_0x2a35a4&&_0x3fa2ac[_0x25fa1d(0x584)]===void 0x0&&(_0x3fa2ac[_0x25fa1d(0x584)]=0x270f);});let _0x3c02b2=_0x4f8819[_0x25d0ba(0x517)](_0x4de3cd=>_0x4de3cd[_0x25d0ba(0x474)]===_0x2a35a4);_0x3c02b2[_0x25d0ba(0x223)]((_0x46f5db,_0x5ae05c)=>_0x46f5db[_0x25d0ba(0x584)]-_0x5ae05c[_0x25d0ba(0x584)]),_0x3c02b2[_0x25d0ba(0x2ab)]((_0x5c5e39,_0x450e1a)=>{const _0x530e68=_0x25d0ba;_0x5c5e39[_0x530e68(0x584)]=_0x450e1a+0x1;}),_0x4f8819[_0x25d0ba(0x2ab)](_0x383b4f=>{const _0x35a66e=_0x25d0ba;if(_0x383b4f[_0x35a66e(0x474)]===_0x2a35a4){let _0x2f2386=_0x3c02b2['find'](_0x5d9610=>_0x5d9610[_0x35a66e(0x5ee)][_0x35a66e(0x28f)]()===_0x383b4f['_id']['toString']());_0x2f2386&&(_0x383b4f['order']=_0x2f2386[_0x35a66e(0x584)]);}}),console[_0x25d0ba(0x472)](_0x25d0ba(0x290),_0x4f8819);}[a0_0x108f24(0x532)](_0x3f7263,_0x3b749d){const _0x524df0=a0_0x108f24;let {replyOption:_0xd6d406}=_0x3b749d;if(!_0xd6d406[_0x524df0(0x5ee)]){this[_0x524df0(0x331)]('replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption');return;}if(!_0x3f7263[_0x524df0(0x61e)][_0x524df0(0x731)](_0x275c58=>_0x275c58['_id'][_0x524df0(0x28f)]()===_0x3b749d['replyOption'][_0x524df0(0x5ee)]['toString']())){this[_0x524df0(0x331)]('ReplyOption\x20com\x20ID\x20'+_0xd6d406['_id']+'\x20não\x20encontrado');return;}_0x3f7263[_0x524df0(0x61e)]=_0x3f7263[_0x524df0(0x61e)][_0x524df0(0x517)](_0x456bbd=>_0x456bbd[_0x524df0(0x5ee)][_0x524df0(0x28f)]()!==_0x3b749d[_0x524df0(0x2cf)][_0x524df0(0x5ee)][_0x524df0(0x28f)]());}async[a0_0x108f24(0x200)](_0x253ba4,_0x5b0f63){const _0x3304e0=a0_0x108f24;let _0x332626=_0x253ba4['replyOptions'][_0x3304e0(0x4fe)](_0x1c0cef=>_0x1c0cef[_0x3304e0(0x5ee)][_0x3304e0(0x28f)]()===_0x5b0f63[_0x3304e0(0x2cf)][_0x3304e0(0x5ee)][_0x3304e0(0x28f)]());if(_0x332626===-0x1){this[_0x3304e0(0x331)](_0x3304e0(0x7b0)+_0x5b0f63[_0x3304e0(0x2cf)][_0x3304e0(0x5ee)]+_0x3304e0(0x7bf));return;}for(let _0x241548 in _0x5b0f63[_0x3304e0(0x2cf)])_0x5b0f63[_0x3304e0(0x2cf)][_0x3304e0(0x552)](_0x241548)&&(_0x253ba4[_0x3304e0(0x61e)][_0x332626][_0x241548]=_0x5b0f63[_0x3304e0(0x2cf)][_0x241548]);}['addReplyOption'](_0x3ea70a,_0x678ff5){const _0x95480=a0_0x108f24;_0x3ea70a[_0x95480(0x61e)][_0x95480(0x1d0)](_0x678ff5[_0x95480(0x2cf)]);}async['editFlowGroup'](_0x66cdb8){const _0xd92088=a0_0x108f24;this['logger'][_0xd92088(0x5f3)](this[_0xd92088(0x476)]+'\x20('+this[_0xd92088(0x21a)][_0xd92088(0x1fb)]+_0xd92088(0x4c1)+_0x66cdb8);try{this[_0xd92088(0x711)][_0xd92088(0x5f3)](this['instanceName']+'\x20('+this[_0xd92088(0x21a)]['wuid']+'):\x20Editando\x20grupo\x20do\x20fluxo...');let _0xe21fde=await this['repository'][_0xd92088(0x48d)]['findOne']({'where':{'name':_0x66cdb8[_0xd92088(0x2ec)]}},this[_0xd92088(0x21a)][_0xd92088(0x1fb)]);if(!_0xe21fde)throw new Error('Flow\x20não\x20encontrado');if(_0x66cdb8[_0xd92088(0x6c5)]&&_0x66cdb8[_0xd92088(0x6c5)]?.[_0xd92088(0x714)]===!0x0){if(this[_0xd92088(0x711)][_0xd92088(0x5f3)](this['instanceName']+'\x20('+this[_0xd92088(0x21a)][_0xd92088(0x1fb)]+_0xd92088(0x66b)),_0x66cdb8[_0xd92088(0x6c5)][_0xd92088(0x543)]===!0x0)return{'message':'Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão'};if(_0xe21fde['blocks']['some'](_0x16f026=>_0x16f026['groupId']['toString']()===_0x66cdb8['group']['_id']))return this[_0xd92088(0x711)][_0xd92088(0x5f3)](this[_0xd92088(0x476)]+'\x20('+this[_0xd92088(0x21a)][_0xd92088(0x1fb)]+_0xd92088(0x745)),{'message':_0xd92088(0x222)};_0xe21fde[_0xd92088(0x69d)]=_0xe21fde[_0xd92088(0x69d)][_0xd92088(0x517)](_0x11f361=>_0x11f361[_0xd92088(0x5ee)][_0xd92088(0x28f)]()!==_0x66cdb8[_0xd92088(0x6c5)][_0xd92088(0x5ee)]);}else{if(_0x66cdb8['group']){if(_0x66cdb8[_0xd92088(0x6c5)]['default']===!0x0)return{'message':'Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão'};if(_0x66cdb8[_0xd92088(0x6c5)][_0xd92088(0x5ee)]){let _0x47253e=_0xe21fde['groups']['find'](_0x5e9da3=>_0x5e9da3['_id']['toString']()===_0x66cdb8[_0xd92088(0x6c5)]['_id']);_0x47253e&&(_0x66cdb8[_0xd92088(0x6c5)]['x']<0x0&&(_0x66cdb8['group']['x']=0x0),_0x66cdb8[_0xd92088(0x6c5)]['y']<0x0&&(_0x66cdb8[_0xd92088(0x6c5)]['y']=0x0),Object[_0xd92088(0x592)](_0x47253e,_0x66cdb8[_0xd92088(0x6c5)]));}else _0xe21fde[_0xd92088(0x69d)]['push'](_0x66cdb8['group']);}}let _0x26ca03=await this[_0xd92088(0x726)]['flow'][_0xd92088(0x4c9)](_0xe21fde[_0xd92088(0x5ee)],_0xe21fde,this[_0xd92088(0x21a)]['wuid']);if(!_0x26ca03)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x26ca03;}catch(_0x28dacb){throw this['logger']['error'](this[_0xd92088(0x476)]+'\x20('+this['instance'][_0xd92088(0x1fb)]+_0xd92088(0x4cf)+(_0x28dacb instanceof Error?_0x28dacb[_0xd92088(0x58c)]:JSON['stringify'](_0x28dacb,null,0x2))),new h(_0xd92088(0x38a)+(_0x28dacb instanceof Error?_0x28dacb['message']:JSON[_0xd92088(0x35b)](_0x28dacb,null,0x2)));}}async[a0_0x108f24(0x607)](_0x4d2571){const _0x1ca207=a0_0x108f24;try{this[_0x1ca207(0x711)][_0x1ca207(0x5f3)](this['instanceName']+'\x20('+this[_0x1ca207(0x21a)]['wuid']+_0x1ca207(0x3be));let _0x339af4=await this[_0x1ca207(0x726)][_0x1ca207(0x48d)][_0x1ca207(0x624)]({'where':{'name':_0x4d2571[_0x1ca207(0x2ec)]}},this[_0x1ca207(0x21a)]['wuid']);if(!_0x339af4)throw new Error('Flow\x20não\x20encontrado');let _0x9b2692=!0x1;if(_0x4d2571['condition']?.[_0x1ca207(0x714)]===!0x0)_0x339af4[_0x1ca207(0x648)]=_0x339af4[_0x1ca207(0x648)][_0x1ca207(0x517)](_0x43806a=>_0x43806a&&_0x4d2571[_0x1ca207(0x743)]&&_0x43806a['_id']&&_0x4d2571['condition']['_id']&&_0x43806a[_0x1ca207(0x5ee)]['toString']()!==_0x4d2571['condition']['_id'][_0x1ca207(0x28f)]()),_0x9b2692=!0x0;else{let _0x1cf7a3=_0x339af4[_0x1ca207(0x648)][_0x1ca207(0x731)](_0x307356=>_0x307356&&_0x4d2571[_0x1ca207(0x743)]&&_0x307356[_0x1ca207(0x5ee)]&&_0x4d2571[_0x1ca207(0x743)]['_id']&&_0x307356[_0x1ca207(0x5ee)][_0x1ca207(0x28f)]()===_0x4d2571[_0x1ca207(0x743)][_0x1ca207(0x5ee)][_0x1ca207(0x28f)]());_0x1cf7a3?(_0x9b2692=_0x1cf7a3[_0x1ca207(0x584)]!==_0x4d2571[_0x1ca207(0x743)][_0x1ca207(0x584)],Object[_0x1ca207(0x592)](_0x1cf7a3,_0x4d2571[_0x1ca207(0x743)])):(_0x339af4['conditions'][_0x1ca207(0x1d0)](_0x4d2571[_0x1ca207(0x743)]),_0x9b2692=!0x0);}if(_0x9b2692){_0x339af4[_0x1ca207(0x648)]['sort']((_0xc791bd,_0x86f95d)=>_0xc791bd[_0x1ca207(0x584)]>_0x86f95d['order']?0x1:_0x86f95d[_0x1ca207(0x584)]>_0xc791bd['order']?-0x1:0x0);for(let _0x2fcae5=0x0;_0x2fcae5<_0x339af4['conditions']['length'];_0x2fcae5++)_0x339af4[_0x1ca207(0x648)][_0x2fcae5][_0x1ca207(0x584)]=_0x2fcae5+0x1;_0x339af4['conditions'][_0x1ca207(0x231)]>0x0&&(_0x339af4['conditions'][0x0]['OrAnd']=_0x1ca207(0x534));}let _0x2c500f=await this[_0x1ca207(0x726)][_0x1ca207(0x48d)][_0x1ca207(0x4c9)](_0x339af4[_0x1ca207(0x5ee)],_0x339af4,this[_0x1ca207(0x21a)][_0x1ca207(0x1fb)]);if(!_0x2c500f)throw new Error(_0x1ca207(0x3e0));return _0x2c500f;}catch(_0x77ce5){throw this[_0x1ca207(0x711)][_0x1ca207(0x2d9)](this['instanceName']+'\x20('+this[_0x1ca207(0x21a)][_0x1ca207(0x1fb)]+_0x1ca207(0x21c)+(_0x77ce5 instanceof Error?_0x77ce5[_0x1ca207(0x58c)]:JSON[_0x1ca207(0x35b)](_0x77ce5,null,0x2))),new Error(_0x1ca207(0x2c4)+(_0x77ce5 instanceof Error?_0x77ce5[_0x1ca207(0x58c)]:JSON['stringify'](_0x77ce5,null,0x2)));}}async[a0_0x108f24(0x52f)](_0x410a9b){const _0x4545b5=a0_0x108f24;try{this[_0x4545b5(0x711)][_0x4545b5(0x5f3)](this[_0x4545b5(0x476)]+'\x20('+this['instance'][_0x4545b5(0x1fb)]+'):\x20Editando\x20edição\x20do\x20fluxo...');let _0x5d540e=await this[_0x4545b5(0x726)][_0x4545b5(0x48d)][_0x4545b5(0x624)]({'where':{'name':_0x410a9b['name']}},this[_0x4545b5(0x21a)][_0x4545b5(0x1fb)]);if(!_0x5d540e)throw new Error(_0x4545b5(0x493));let _0x5e3989=!0x1;if(_0x410a9b[_0x4545b5(0x263)]?.[_0x4545b5(0x714)]===!0x0)_0x5d540e[_0x4545b5(0x6af)]=_0x5d540e[_0x4545b5(0x6af)][_0x4545b5(0x517)](_0x1fd0fa=>_0x1fd0fa&&_0x410a9b[_0x4545b5(0x263)]&&_0x1fd0fa[_0x4545b5(0x5ee)]&&_0x410a9b[_0x4545b5(0x263)]['_id']&&_0x1fd0fa['_id'][_0x4545b5(0x28f)]()!==_0x410a9b['varedit'][_0x4545b5(0x5ee)][_0x4545b5(0x28f)]()),_0x5e3989=!0x0;else{let _0x17302c=_0x5d540e[_0x4545b5(0x6af)][_0x4545b5(0x731)](_0x17a7cb=>_0x17a7cb&&_0x410a9b[_0x4545b5(0x263)]&&_0x17a7cb['_id']&&_0x410a9b[_0x4545b5(0x263)]['_id']&&_0x17a7cb['_id'][_0x4545b5(0x28f)]()===_0x410a9b[_0x4545b5(0x263)]['_id']['toString']());_0x17302c?(_0x5e3989=_0x17302c[_0x4545b5(0x584)]!==_0x410a9b[_0x4545b5(0x263)][_0x4545b5(0x584)],Object[_0x4545b5(0x592)](_0x17302c,_0x410a9b[_0x4545b5(0x263)])):(_0x5d540e[_0x4545b5(0x6af)][_0x4545b5(0x1d0)](_0x410a9b['varedit']),_0x5e3989=!0x0);}if(_0x5e3989){_0x5d540e[_0x4545b5(0x6af)][_0x4545b5(0x223)]((_0x49c3f5,_0x2545d3)=>_0x49c3f5[_0x4545b5(0x584)]>_0x2545d3[_0x4545b5(0x584)]?0x1:_0x2545d3[_0x4545b5(0x584)]>_0x49c3f5[_0x4545b5(0x584)]?-0x1:0x0);for(let _0x1c3bb6=0x0;_0x1c3bb6<_0x5d540e[_0x4545b5(0x6af)][_0x4545b5(0x231)];_0x1c3bb6++)_0x5d540e[_0x4545b5(0x6af)][_0x1c3bb6][_0x4545b5(0x584)]=_0x1c3bb6+0x1;}let _0x20da5b=await this[_0x4545b5(0x726)][_0x4545b5(0x48d)][_0x4545b5(0x4c9)](_0x5d540e[_0x4545b5(0x5ee)],_0x5d540e,this[_0x4545b5(0x21a)][_0x4545b5(0x1fb)]);if(!_0x20da5b)throw new Error(_0x4545b5(0x3e0));return _0x20da5b;}catch(_0x2f56a1){throw this[_0x4545b5(0x711)][_0x4545b5(0x2d9)](this[_0x4545b5(0x476)]+'\x20('+this[_0x4545b5(0x21a)][_0x4545b5(0x1fb)]+_0x4545b5(0x21c)+(_0x2f56a1 instanceof Error?_0x2f56a1[_0x4545b5(0x58c)]:JSON[_0x4545b5(0x35b)](_0x2f56a1,null,0x2))),new h(_0x4545b5(0x2c4)+(_0x2f56a1 instanceof Error?_0x2f56a1[_0x4545b5(0x58c)]:JSON[_0x4545b5(0x35b)](_0x2f56a1,null,0x2)));}}async['editFlowVariable'](_0x314d95){const _0x40109c=a0_0x108f24;try{this[_0x40109c(0x711)][_0x40109c(0x5f3)](this[_0x40109c(0x476)]+'\x20('+this[_0x40109c(0x21a)][_0x40109c(0x1fb)]+'):\x20Editando\x20variável\x20do\x20fluxo...');let _0xef6e90=await this[_0x40109c(0x726)]['flow'][_0x40109c(0x624)]({'where':{'name':_0x314d95[_0x40109c(0x2ec)]}},this[_0x40109c(0x21a)]['wuid']);if(!_0xef6e90)throw new Error(_0x40109c(0x493));_0x314d95['variable'][_0x40109c(0x2ec)]=_0x314d95[_0x40109c(0x7a1)][_0x40109c(0x2ec)][_0x40109c(0x37f)](),_0x314d95[_0x40109c(0x7a1)]['name'][_0x40109c(0x418)]('_')&&(_0x314d95[_0x40109c(0x7a1)][_0x40109c(0x2ec)]=_0x314d95[_0x40109c(0x7a1)][_0x40109c(0x2ec)][_0x40109c(0x6b7)](0x1)),_0x314d95[_0x40109c(0x7a1)][_0x40109c(0x2ec)]=_0x314d95[_0x40109c(0x7a1)][_0x40109c(0x2ec)][_0x40109c(0x37f)]();let _0x65305=_0xef6e90[_0x40109c(0x21d)]['find'](_0x4e2e53=>_0x4e2e53[_0x40109c(0x2ec)]===_0x314d95[_0x40109c(0x7a1)][_0x40109c(0x2ec)]);if(_0x65305?.[_0x40109c(0x5dd)]===!0x0)throw new Error(_0x40109c(0x4fc));if(_0x314d95['variable']?.[_0x40109c(0x714)]===!0x0){if(!_0x65305)return{'message':_0x40109c(0x554)};_0xef6e90[_0x40109c(0x21d)]=_0xef6e90[_0x40109c(0x21d)][_0x40109c(0x517)](_0x586555=>_0x586555['name']!==_0x314d95[_0x40109c(0x7a1)][_0x40109c(0x2ec)]);}else _0x65305?Object[_0x40109c(0x592)](_0x65305,_0x314d95[_0x40109c(0x7a1)]):_0xef6e90[_0x40109c(0x21d)]['push'](_0x314d95['variable']);let _0x4c3240=await this[_0x40109c(0x726)][_0x40109c(0x48d)][_0x40109c(0x4c9)](_0xef6e90[_0x40109c(0x5ee)],_0xef6e90,this[_0x40109c(0x21a)][_0x40109c(0x1fb)]);if(!_0x4c3240)throw new Error(_0x40109c(0x3e0));return _0x4c3240;}catch(_0x2325c2){throw this[_0x40109c(0x711)][_0x40109c(0x2d9)](this[_0x40109c(0x476)]+'\x20('+this[_0x40109c(0x21a)][_0x40109c(0x1fb)]+_0x40109c(0x5a1)+(_0x2325c2 instanceof Error?_0x2325c2[_0x40109c(0x58c)]:JSON[_0x40109c(0x35b)](_0x2325c2,null,0x2))),new h('Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20'+(_0x2325c2 instanceof Error?_0x2325c2[_0x40109c(0x58c)]:JSON[_0x40109c(0x35b)](_0x2325c2,null,0x2)));}}async['startFlow'](_0x10c1ac){const _0xd86bda=a0_0x108f24;let _0x1dcdf2=null;try{if(!this[_0xd86bda(0x3e5)]?.[_0xd86bda(0x776)][_0xd86bda(0x7dc)])throw new h(_0xd86bda(0x759));this[_0xd86bda(0x711)][_0xd86bda(0x5f3)](this[_0xd86bda(0x476)]+'\x20('+this[_0xd86bda(0x21a)][_0xd86bda(0x1fb)]+_0xd86bda(0x6e5));let _0x2e8a0a=(await this['whatsappNumber']({'numbers':[_0x10c1ac['remoteJid']]}))[0x0];if(!_0x2e8a0a[_0xd86bda(0x1e7)]&&!(0x0,w[_0xd86bda(0x334)])(_0x2e8a0a[_0xd86bda(0x7c1)])&&!_0x2e8a0a[_0xd86bda(0x7c1)]['includes'](_0xd86bda(0x36d)))throw _0x1dcdf2=JSON[_0xd86bda(0x35b)](_0x2e8a0a,null,0x2),new h(_0x2e8a0a);let _0x11b6d4=await this[_0xd86bda(0x726)][_0xd86bda(0x48d)][_0xd86bda(0x624)]({'where':{'name':_0x10c1ac[_0xd86bda(0x2ec)]}},this[_0xd86bda(0x21a)][_0xd86bda(0x1fb)]);if(!_0x11b6d4)return this[_0xd86bda(0x711)][_0xd86bda(0x2d9)](this[_0xd86bda(0x476)]+'\x20('+this[_0xd86bda(0x21a)][_0xd86bda(0x1fb)]+'):\x20Flow\x20não\x20encontrado'),{'message':_0xd86bda(0x493)};let _0xed075c=await this[_0xd86bda(0x3f1)](_0x11b6d4,_0x2e8a0a[_0xd86bda(0x7c1)],_0x10c1ac[_0xd86bda(0x2de)]);if(_0xed075c){this[_0xd86bda(0x711)][_0xd86bda(0x5f3)](this[_0xd86bda(0x476)]+'\x20('+this[_0xd86bda(0x21a)][_0xd86bda(0x1fb)]+_0xd86bda(0x2cb));let _0x5c0a4f=await this[_0xd86bda(0x529)](_0xed075c);return _0x5c0a4f&&await this[_0xd86bda(0x4e7)](_0xed075c,_0x5c0a4f),{'message':_0xd86bda(0x357)+_0x10c1ac[_0xd86bda(0x47b)]};}}catch(_0x276a03){if(this[_0xd86bda(0x711)][_0xd86bda(0x2d9)](this['instanceName']+'\x20('+this['instance'][_0xd86bda(0x1fb)]+_0xd86bda(0x6ce)+(_0x276a03 instanceof Error?_0x276a03[_0xd86bda(0x58c)]:JSON[_0xd86bda(0x35b)](_0x276a03,null,0x2))),_0x1dcdf2=_0x276a03 instanceof Error?_0x276a03['message']:JSON['stringify'](_0x276a03,null,0x2),_0x1dcdf2)throw new h('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x1dcdf2);}}async[a0_0x108f24(0x6de)](_0x20695b){const _0x5eeecb=a0_0x108f24;try{let _0x4000d1={'remoteJid':_0x20695b,'status':_0x5eeecb(0x691)},_0x44b03d={'status':'closed'},_0x11822c=await this['repository'][_0x5eeecb(0x49c)]['updateMany'](_0x4000d1,_0x44b03d,this[_0x5eeecb(0x21a)]['wuid']);return this[_0x5eeecb(0x711)]['verbose'](this[_0x5eeecb(0x476)]+'\x20('+this[_0x5eeecb(0x21a)]['wuid']+_0x5eeecb(0x591)),_0x11822c;}catch(_0x5778ee){throw this[_0x5eeecb(0x711)][_0x5eeecb(0x2d9)](this[_0x5eeecb(0x476)]+'\x20('+this[_0x5eeecb(0x21a)][_0x5eeecb(0x1fb)]+_0x5eeecb(0x6bb)+_0x5778ee[_0x5eeecb(0x58c)]),_0x5778ee;}}async[a0_0x108f24(0x3f1)](_0x19a631,_0x478b10,_0x45a48d){const _0x3e840c=a0_0x108f24;this[_0x3e840c(0x711)][_0x3e840c(0x5f3)](this[_0x3e840c(0x476)]+'\x20('+this[_0x3e840c(0x21a)][_0x3e840c(0x1fb)]+_0x3e840c(0x5f9)),await this[_0x3e840c(0x6de)](_0x478b10);try{let _0x2037f0=require('mongodb')[_0x3e840c(0x76a)],_0x328fc4=Date[_0x3e840c(0x7e2)](),_0x4859cd=_0x3e840c(0x513),_0x4c52e8={},_0x51ca2b={},_0x580c53={..._0x19a631,'chatLog':null},_0x289bb8=await this[_0x3e840c(0x793)](_0x580c53[_0x3e840c(0x21d)]),_0x3cf327=await this[_0x3e840c(0x300)](_0x478b10),_0x1c2daa={..._0x289bb8,..._0x3cf327,'_remoteJid':_0x478b10},_0x186293={'lastReceivedMessage':_0x4c52e8,'lastSendMessage':_0x51ca2b,'lastBlockId':_0x4859cd,'lastCondition':!0x0,'realVariables':_0x1c2daa};_0x580c53[_0x3e840c(0x696)]=_0x186293,_0x580c53[_0x3e840c(0x696)][_0x3e840c(0x7c9)]={..._0x1c2daa,..._0x45a48d},delete _0x580c53[_0x3e840c(0x5ee)],_0x580c53[_0x3e840c(0x5ee)]=new _0x2037f0(),_0x580c53[_0x3e840c(0x22b)]=_0x328fc4,_0x580c53[_0x3e840c(0x60e)]=_0x3e840c(0x691),_0x580c53[_0x3e840c(0x47b)]=_0x478b10;let _0x2b8120=await this[_0x3e840c(0x726)][_0x3e840c(0x49c)]['updateOne'](_0x580c53['_id'],_0x580c53,this['instance'][_0x3e840c(0x1fb)]);return this['logger']['verbose'](this[_0x3e840c(0x476)]+'\x20('+this['instance']['wuid']+_0x3e840c(0x5f1)),_0x2b8120?_0x580c53:null;}catch(_0x1004fe){throw this[_0x3e840c(0x711)][_0x3e840c(0x2d9)](this['instanceName']+'\x20('+this['instance'][_0x3e840c(0x1fb)]+_0x3e840c(0x46f)+(_0x1004fe instanceof Error?_0x1004fe[_0x3e840c(0x58c)]:JSON[_0x3e840c(0x35b)](_0x1004fe,null,0x2))),new h(_0x1004fe['message']);}}async['getConversation'](_0xcfbddd){const _0x30556b=a0_0x108f24;try{this[_0x30556b(0x711)][_0x30556b(0x5f3)](this[_0x30556b(0x476)]+'\x20('+this[_0x30556b(0x21a)][_0x30556b(0x1fb)]+'):\x20Buscando\x20conversa...'),this[_0x30556b(0x711)][_0x30556b(0x5f3)](this[_0x30556b(0x476)]+'\x20('+this[_0x30556b(0x21a)][_0x30556b(0x1fb)]+_0x30556b(0x2f4)+_0xcfbddd);let _0x4b78e7={'where':{'_id':_0xcfbddd}};return await this['repository'][_0x30556b(0x49c)][_0x30556b(0x624)](_0x4b78e7,this['instance'][_0x30556b(0x1fb)]);}catch(_0x193e24){throw this[_0x30556b(0x711)][_0x30556b(0x2d9)](this[_0x30556b(0x476)]+'\x20('+this[_0x30556b(0x21a)]['wuid']+_0x30556b(0x379)+(_0x193e24 instanceof Error?_0x193e24['message']:JSON[_0x30556b(0x35b)](_0x193e24,null,0x2))),new h('Erro\x20ao\x20buscar\x20conversa:\x20'+_0x193e24[_0x30556b(0x58c)]);}}async[a0_0x108f24(0x6d4)](_0x182b73,_0x29f23b=0x64){const _0x4a7065=a0_0x108f24;try{return this[_0x4a7065(0x711)][_0x4a7065(0x5f3)](this[_0x4a7065(0x476)]+'\x20('+this['instance'][_0x4a7065(0x1fb)]+_0x4a7065(0x479)),await this['repository'][_0x4a7065(0x49c)][_0x4a7065(0x731)](_0x182b73,this[_0x4a7065(0x21a)][_0x4a7065(0x1fb)]);}catch(_0x476a11){throw this[_0x4a7065(0x711)][_0x4a7065(0x2d9)](this[_0x4a7065(0x476)]+'\x20('+this[_0x4a7065(0x21a)][_0x4a7065(0x1fb)]+_0x4a7065(0x80d)+(_0x476a11 instanceof Error?_0x476a11[_0x4a7065(0x58c)]:JSON['stringify'](_0x476a11,null,0x2))),new h('Erro\x20ao\x20buscar\x20conversas:\x20'+_0x476a11['message']);}}async[a0_0x108f24(0x718)](_0x5984c8){const _0x184e2f=a0_0x108f24;try{return this[_0x184e2f(0x711)]['verbose'](this[_0x184e2f(0x476)]+'\x20('+this[_0x184e2f(0x21a)][_0x184e2f(0x1fb)]+'):\x20Deletando\x20conversa...'),this[_0x184e2f(0x711)]['verbose'](this[_0x184e2f(0x476)]+'\x20('+this['instance'][_0x184e2f(0x1fb)]+_0x184e2f(0x4e9)+_0x5984c8),(await this[_0x184e2f(0x726)][_0x184e2f(0x49c)][_0x184e2f(0x7dd)]({'where':{'_id':_0x5984c8}},this[_0x184e2f(0x21a)]['wuid']))['deletedCount']===0x0?{'message':_0x184e2f(0x3f2)}:{'message':_0x184e2f(0x3c1)};}catch(_0x4d64ec){throw this[_0x184e2f(0x711)]['error'](this[_0x184e2f(0x476)]+'\x20('+this['instance'][_0x184e2f(0x1fb)]+_0x184e2f(0x58b)+(_0x4d64ec instanceof Error?_0x4d64ec[_0x184e2f(0x58c)]:JSON[_0x184e2f(0x35b)](_0x4d64ec,null,0x2))),new h(_0x184e2f(0x498)+_0x4d64ec[_0x184e2f(0x58c)]);}}async[a0_0x108f24(0x5a7)](_0x4091c5){const _0x44abaa=a0_0x108f24;try{let {_id:_0x351608,chatLog:_0x453156,status:_0x44d472}=_0x4091c5;if(!_0x351608)return{'message':_0x44abaa(0x69a)};let _0x5b17fd={};if(_0x44d472!==void 0x0&&(_0x5b17fd[_0x44abaa(0x60e)]=_0x44d472),Object[_0x44abaa(0x686)](_0x5b17fd)[_0x44abaa(0x231)]===0x0)return{'message':_0x44abaa(0x2c9)};let _0x11448f=await this['repository'][_0x44abaa(0x49c)][_0x44abaa(0x4c9)](_0x351608,_0x5b17fd,this['instance'][_0x44abaa(0x1fb)]);return _0x11448f||{'message':_0x44abaa(0x3ad)};}catch(_0x5d69ad){throw this['logger'][_0x44abaa(0x2d9)](this[_0x44abaa(0x476)]+'\x20('+this['instance']['wuid']+_0x44abaa(0x736)+(_0x5d69ad instanceof Error?_0x5d69ad[_0x44abaa(0x58c)]:JSON[_0x44abaa(0x35b)](_0x5d69ad,null,0x2))),new h(_0x44abaa(0x7d7)+_0x5d69ad[_0x44abaa(0x58c)]);}}async['editChat'](_0x2c69f5){const _0x24d51c=a0_0x108f24;try{_0x2c69f5[_0x24d51c(0x5ee)]=this['createJid'](_0x2c69f5[_0x24d51c(0x5ee)]);let {_id:_0x1d2059,leadInfo:_0x38fa3e}=_0x2c69f5;if(!_0x1d2059)throw new Error(_0x24d51c(0x5dc));let _0x2de722=(_0x2a959d,_0x113ba3,_0x18d834)=>{const _0x31583c=_0x24d51c;_0x18d834[_0x31583c(0x2ab)](_0x5620ab=>{_0x2a959d[_0x5620ab]!==void 0x0&&(_0x113ba3['leadInfo.'+_0x5620ab]=_0x2a959d[_0x5620ab]);});},_0x172caf={};if(_0x2de722(_0x38fa3e,_0x172caf,[_0x24d51c(0x327),_0x24d51c(0x3e6),_0x24d51c(0x767),_0x24d51c(0x3b3),'status',_0x24d51c(0x4f2),_0x24d51c(0x775),_0x24d51c(0x580),_0x24d51c(0x76d)]),Array['isArray'](_0x38fa3e[_0x24d51c(0x230)])&&(_0x172caf[_0x24d51c(0x3c4)]=_0x38fa3e['customFields']['map'](_0x347020=>({'_id':_0x347020[_0x24d51c(0x5ee)],'value':_0x347020[_0x24d51c(0x511)]}))),_0x2c69f5[_0x24d51c(0x5dd)][_0x24d51c(0x7d5)]!==void 0x0&&(_0x172caf[_0x24d51c(0x4d0)]=Number(_0x2c69f5[_0x24d51c(0x5dd)][_0x24d51c(0x7d5)])),_0x2c69f5[_0x24d51c(0x610)]!==void 0x0&&(_0x172caf['unreadcount']=Number(_0x2c69f5[_0x24d51c(0x610)])),Object['keys'](_0x172caf)[_0x24d51c(0x231)]===0x0)throw new Error(_0x24d51c(0x2c9));let _0x23ecf8=await this[_0x24d51c(0x726)][_0x24d51c(0x1e1)][_0x24d51c(0x624)]({'where':{'_id':_0x2c69f5['_id']}},this['instance'][_0x24d51c(0x1fb)]);if(!_0x23ecf8){let _0x4b335d=(await this['whatsappNumber']({'numbers':[_0x2c69f5[_0x24d51c(0x5ee)]]}))[0x0];if(!_0x4b335d[_0x24d51c(0x1e7)]&&!(0x0,w[_0x24d51c(0x334)])(_0x4b335d['jid'])&&!_0x4b335d[_0x24d51c(0x7c1)][_0x24d51c(0x3cd)](_0x24d51c(0x36d)))throw new h(_0x4b335d);_0x2c69f5[_0x24d51c(0x5ee)]=_0x4b335d[_0x24d51c(0x7c1)];}if(_0x2c69f5['labels']!==void 0x0){let _0x56be7c=await this[_0x24d51c(0x726)][_0x24d51c(0x651)][_0x24d51c(0x731)]({'where':{}},this[_0x24d51c(0x21a)][_0x24d51c(0x1fb)]),_0x550818=new Set(_0x23ecf8[_0x24d51c(0x4d3)]||[]),_0x130284=new Set(_0x2c69f5['labels']),_0x4f0a61=new Set(_0x56be7c['map'](_0x33d871=>_0x33d871['_id'])),_0x32da4d=[..._0x130284][_0x24d51c(0x517)](_0x183ae1=>!_0x550818['has'](_0x183ae1)&&_0x4f0a61[_0x24d51c(0x7a7)](_0x183ae1)),_0x51361d=[..._0x550818][_0x24d51c(0x517)](_0x1d6bda=>!_0x130284[_0x24d51c(0x7a7)](_0x1d6bda));for(let _0xa84c30 of _0x32da4d)await this[_0x24d51c(0x6a0)](_0xa84c30,_0x2c69f5['_id']),_0x550818[_0x24d51c(0x7f9)](_0xa84c30);for(let _0x4c0e0e of _0x51361d)await this[_0x24d51c(0x332)](_0x4c0e0e,_0x2c69f5[_0x24d51c(0x5ee)]),_0x550818[_0x24d51c(0x714)](_0x4c0e0e);_0x172caf[_0x24d51c(0x4d3)]=[..._0x550818];}let _0x572e8e=await this[_0x24d51c(0x726)][_0x24d51c(0x1e1)]['updateOne']({'where':{'_id':_0x2c69f5[_0x24d51c(0x5ee)]}},_0x172caf,this[_0x24d51c(0x21a)][_0x24d51c(0x1fb)]);return _0x572e8e&&j(this[_0x24d51c(0x476)],'chats',{'chat':_0x572e8e}),_0x572e8e?(this[_0x24d51c(0x711)][_0x24d51c(0x5f3)](this[_0x24d51c(0x476)]+'\x20('+this[_0x24d51c(0x21a)][_0x24d51c(0x1fb)]+_0x24d51c(0x719)+JSON['stringify'](_0x572e8e,null,0x2)),_0x572e8e):{'message':_0x24d51c(0x65f)};}catch(_0x14142a){throw this['logger'][_0x24d51c(0x2d9)](this[_0x24d51c(0x476)]+'\x20('+this['instance'][_0x24d51c(0x1fb)]+_0x24d51c(0x390)+(_0x14142a instanceof Error?_0x14142a['message']:JSON[_0x24d51c(0x35b)](_0x14142a,null,0x2))),new h(_0x24d51c(0x295)+_0x14142a[_0x24d51c(0x58c)]);}}async[a0_0x108f24(0x6a0)](_0x377bf2,_0x5b9f98){const _0x500a90=a0_0x108f24;try{await this[_0x500a90(0x3d0)][_0x500a90(0x35f)](_0x5b9f98,_0x377bf2),console[_0x500a90(0x472)](_0x500a90(0x3cf)+_0x377bf2+_0x500a90(0x516)+_0x5b9f98+'\x20com\x20sucesso.');}catch(_0x1b9c45){console[_0x500a90(0x2d9)](_0x500a90(0x3a5)+_0x377bf2+_0x500a90(0x45d)+_0x5b9f98+':',_0x1b9c45);}}async['RemoveChatLabel'](_0x265b05,_0x281b6c){const _0x37c6e5=a0_0x108f24;try{await this['client'][_0x37c6e5(0x428)](_0x281b6c,_0x265b05),console[_0x37c6e5(0x472)](_0x37c6e5(0x3cf)+_0x265b05+_0x37c6e5(0x3b2)+_0x281b6c+'\x20com\x20sucesso.');}catch(_0x57c9e5){console[_0x37c6e5(0x2d9)](_0x37c6e5(0x466)+_0x265b05+'\x20do\x20chat\x20'+_0x281b6c+':',_0x57c9e5);}}async[a0_0x108f24(0x5f8)](_0x4a85cd){const _0x24cf0f=a0_0x108f24;try{let _0x4b3524=await this[_0x24cf0f(0x726)][_0x24cf0f(0x278)]['findOrCreate'](this[_0x24cf0f(0x21a)]['wuid']),_0x1f20e8=_0x4a85cd['_id']?_0x4b3524['agents'][_0x24cf0f(0x4fe)](_0x45654b=>_0x45654b[_0x24cf0f(0x5ee)]===_0x4a85cd['_id']):-0x1;if(_0x4a85cd[_0x24cf0f(0x714)]&&_0x1f20e8>-0x1)_0x4b3524[_0x24cf0f(0x293)][_0x24cf0f(0x4db)](_0x1f20e8,0x1);else{if(_0x1f20e8>-0x1){let _0x56d708=_0x4b3524[_0x24cf0f(0x293)][_0x1f20e8];_0x4a85cd[_0x24cf0f(0x59f)]&&(_0x56d708[_0x24cf0f(0x59f)]=_0x4a85cd[_0x24cf0f(0x59f)]),_0x4a85cd[_0x24cf0f(0x2ec)]&&(_0x56d708['name']=_0x4a85cd[_0x24cf0f(0x2ec)]),_0x4a85cd[_0x24cf0f(0x767)]&&(_0x56d708[_0x24cf0f(0x767)]=_0x4a85cd['email']),_0x4a85cd[_0x24cf0f(0x7ab)]&&(_0x56d708[_0x24cf0f(0x7ab)]=_0x4a85cd['role']);}else _0x4b3524[_0x24cf0f(0x293)][_0x24cf0f(0x1d0)]({'_id':_0x4a85cd[_0x24cf0f(0x5ee)]||new ie['default']['Types'][(_0x24cf0f(0x76a))]()[_0x24cf0f(0x28f)](),'fone':_0x4a85cd['fone'],'name':_0x4a85cd[_0x24cf0f(0x2ec)],'email':_0x4a85cd['email'],'role':_0x4a85cd[_0x24cf0f(0x7ab)]});}let _0x37c83a={'agents':_0x4b3524[_0x24cf0f(0x293)]},_0x446bb7=await this[_0x24cf0f(0x726)][_0x24cf0f(0x278)][_0x24cf0f(0x635)](_0x37c83a,this[_0x24cf0f(0x21a)][_0x24cf0f(0x1fb)]);return this[_0x24cf0f(0x3e5)]=_0x446bb7,this[_0x24cf0f(0x711)][_0x24cf0f(0x5f3)](this[_0x24cf0f(0x476)]+'\x20('+this['instance']['wuid']+_0x24cf0f(0x44b)),this[_0x24cf0f(0x711)][_0x24cf0f(0x5f3)](this[_0x24cf0f(0x476)]+'\x20('+this[_0x24cf0f(0x21a)]['wuid']+_0x24cf0f(0x719)+this['AutomateSystem']),_0x446bb7;}catch(_0x780589){throw this[_0x24cf0f(0x711)][_0x24cf0f(0x2d9)](this['instanceName']+'\x20('+this['instance'][_0x24cf0f(0x1fb)]+_0x24cf0f(0x707)+(_0x780589 instanceof Error?_0x780589[_0x24cf0f(0x58c)]:JSON[_0x24cf0f(0x35b)](_0x780589,null,0x2))),new h(_0x24cf0f(0x1cc)+_0x780589[_0x24cf0f(0x58c)]);}}async[a0_0x108f24(0x342)](_0x216d4d){const _0x40802a=a0_0x108f24;try{let _0x5529db=await this['repository'][_0x40802a(0x278)][_0x40802a(0x43d)](this['instance'][_0x40802a(0x1fb)]),_0x5a4b17=_0x216d4d['_id']?_0x5529db[_0x40802a(0x230)][_0x40802a(0x4fe)](_0x303cd0=>_0x303cd0['_id']===_0x216d4d['_id']):-0x1,_0x161c01=!0x1,_0x57e37f=_0x5529db[_0x40802a(0x230)][_0x40802a(0x3e9)](_0xe99d99=>_0xe99d99[_0x40802a(0x584)]===_0x216d4d[_0x40802a(0x584)]);if(_0x216d4d['delete']&&_0x5a4b17>-0x1)_0x5529db[_0x40802a(0x230)][_0x40802a(0x4db)](_0x5a4b17,0x1),_0x161c01=!0x0;else{if(_0x5a4b17>-0x1){if(_0x5529db[_0x40802a(0x230)][_0x40802a(0x3e9)](_0x54cc46=>_0x54cc46[_0x40802a(0x2ec)]===_0x216d4d[_0x40802a(0x2ec)]&&_0x54cc46[_0x40802a(0x5ee)]!==_0x216d4d[_0x40802a(0x5ee)]))throw new Error(_0x40802a(0x275));let _0x3e0ef8=_0x5529db[_0x40802a(0x230)][_0x5a4b17];_0x216d4d['order']&&(_0x57e37f||!Number[_0x40802a(0x7ac)](_0x216d4d[_0x40802a(0x584)]))&&(_0x3e0ef8[_0x40802a(0x584)]=_0x216d4d[_0x40802a(0x584)],_0x161c01=!0x0),_0x216d4d['name']&&(_0x3e0ef8[_0x40802a(0x2ec)]=_0x216d4d[_0x40802a(0x2ec)]);}else{if(_0x5529db[_0x40802a(0x230)][_0x40802a(0x3e9)](_0x412fe0=>_0x412fe0['name']===_0x216d4d[_0x40802a(0x2ec)]&&_0x412fe0[_0x40802a(0x5ee)]!==_0x216d4d[_0x40802a(0x5ee)]))throw new Error(_0x40802a(0x275));_0x5529db[_0x40802a(0x230)][_0x40802a(0x1d0)]({'_id':_0x216d4d[_0x40802a(0x5ee)]||new ie[(_0x40802a(0x543))][(_0x40802a(0x3b6))][(_0x40802a(0x76a))]()['toString'](),'order':_0x216d4d['order'],'name':_0x216d4d[_0x40802a(0x2ec)]}),_0x161c01=!0x0;}}if(_0x161c01){_0x5529db[_0x40802a(0x230)]['sort']((_0x2b763a,_0x1019fc)=>_0x2b763a[_0x40802a(0x584)]>_0x1019fc[_0x40802a(0x584)]?0x1:_0x1019fc[_0x40802a(0x584)]>_0x2b763a[_0x40802a(0x584)]?-0x1:0x0);for(let _0x3ab3ec=0x0;_0x3ab3ec<_0x5529db[_0x40802a(0x230)][_0x40802a(0x231)];_0x3ab3ec++)_0x5529db[_0x40802a(0x230)][_0x3ab3ec][_0x40802a(0x584)]=_0x3ab3ec+0x1;}let _0x213495=await this['repository']['automateSystem'][_0x40802a(0x635)](_0x5529db,this[_0x40802a(0x21a)][_0x40802a(0x1fb)]);return this['AutomateSystem']=_0x213495,this[_0x40802a(0x711)][_0x40802a(0x5f3)](this['instanceName']+'\x20('+this[_0x40802a(0x21a)][_0x40802a(0x1fb)]+_0x40802a(0x4ca)),this[_0x40802a(0x711)][_0x40802a(0x5f3)](this[_0x40802a(0x476)]+'\x20('+this[_0x40802a(0x21a)][_0x40802a(0x1fb)]+'):\x20'+this[_0x40802a(0x3e5)]),_0x213495;}catch(_0x34c5a2){throw this[_0x40802a(0x711)][_0x40802a(0x2d9)](this[_0x40802a(0x476)]+'\x20('+this[_0x40802a(0x21a)][_0x40802a(0x1fb)]+_0x40802a(0x722)+(_0x34c5a2 instanceof Error?_0x34c5a2[_0x40802a(0x58c)]:JSON[_0x40802a(0x35b)](_0x34c5a2,null,0x2))),new h('Erro\x20ao\x20tentar\x20updateCustomFields:\x20'+_0x34c5a2[_0x40802a(0x58c)]);}}async[a0_0x108f24(0x680)](_0x573914){const _0x6efaf5=a0_0x108f24;try{let _0x338911=await this[_0x6efaf5(0x726)][_0x6efaf5(0x278)][_0x6efaf5(0x43d)](this[_0x6efaf5(0x21a)][_0x6efaf5(0x1fb)]);if(!_0x338911)throw new Error(_0x6efaf5(0x2d6));let _0x527a5b={'_id':_0x338911[_0x6efaf5(0x5ee)],'flowConfig':{'enabled':_0x573914[_0x6efaf5(0x7dc)]??_0x338911[_0x6efaf5(0x776)][_0x6efaf5(0x7dc)],'ignoreGroups':_0x573914[_0x6efaf5(0x4ae)]??_0x338911[_0x6efaf5(0x776)][_0x6efaf5(0x4ae)],'prefixCommand':_0x573914[_0x6efaf5(0x488)]??_0x338911[_0x6efaf5(0x776)][_0x6efaf5(0x488)],'stopConversation':_0x573914[_0x6efaf5(0x43b)]??_0x338911['flowConfig'][_0x6efaf5(0x43b)],'stopMinutes':_0x573914['stopMinutes']??_0x338911[_0x6efaf5(0x776)]['stopMinutes'],'stopWhenYouSendMsg':_0x573914[_0x6efaf5(0x7e9)]??_0x338911[_0x6efaf5(0x776)][_0x6efaf5(0x7e9)]}},_0x1f68a8=await this[_0x6efaf5(0x726)][_0x6efaf5(0x278)][_0x6efaf5(0x635)](_0x527a5b,this[_0x6efaf5(0x21a)][_0x6efaf5(0x1fb)]);return this[_0x6efaf5(0x3e5)]=_0x1f68a8,this[_0x6efaf5(0x711)][_0x6efaf5(0x5f3)](this[_0x6efaf5(0x476)]+'\x20('+this['instance'][_0x6efaf5(0x1fb)]+'):\x20alterando\x20this.AutomateSystem'),this[_0x6efaf5(0x711)][_0x6efaf5(0x5f3)](this[_0x6efaf5(0x476)]+'\x20('+this['instance'][_0x6efaf5(0x1fb)]+'):\x20'+this[_0x6efaf5(0x3e5)]),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x1f68a8;}catch(_0x1e7550){throw this['logger'][_0x6efaf5(0x2d9)](this[_0x6efaf5(0x476)]+'\x20('+this[_0x6efaf5(0x21a)][_0x6efaf5(0x1fb)]+_0x6efaf5(0x344)+(_0x1e7550 instanceof Error?_0x1e7550[_0x6efaf5(0x58c)]:JSON[_0x6efaf5(0x35b)](_0x1e7550,null,0x2))),new h(_0x6efaf5(0x7c5)+_0x1e7550[_0x6efaf5(0x58c)]);}}async['getAutomateSystem'](){const _0x455d01=a0_0x108f24;try{let _0xa251cb=await this[_0x455d01(0x726)]['automateSystem'][_0x455d01(0x43d)](this[_0x455d01(0x21a)]['wuid']);return this[_0x455d01(0x3e5)]=_0xa251cb,this[_0x455d01(0x711)][_0x455d01(0x5f3)](this[_0x455d01(0x476)]+'\x20('+this[_0x455d01(0x21a)]['wuid']+'):\x20Visualizando\x20AutomateSystem'),this['logger'][_0x455d01(0x5f3)](this['AutomateSystem']),_0xa251cb;}catch(_0x204960){throw this[_0x455d01(0x711)]['error'](this[_0x455d01(0x476)]+'\x20('+this[_0x455d01(0x21a)][_0x455d01(0x1fb)]+'):\x20Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20'+(_0x204960 instanceof Error?_0x204960['message']:JSON['stringify'](_0x204960,null,0x2))),new h('Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20'+_0x204960[_0x455d01(0x58c)]);}}async[a0_0x108f24(0x4e5)](){const _0x4a3620=a0_0x108f24;this[_0x4a3620(0x60b)]&&clearTimeout(this[_0x4a3620(0x60b)]),this[_0x4a3620(0x60b)]=setTimeout(()=>{const _0x5f2b14=_0x4a3620;this[_0x5f2b14(0x260)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async['checkAndRestartProcess'](){const _0x2bde77=a0_0x108f24;Date[_0x2bde77(0x7e2)]()-this[_0x2bde77(0x788)]>=0x1d4c0&&(this[_0x2bde77(0x711)][_0x2bde77(0x5f3)](this[_0x2bde77(0x476)]+'\x20('+this['instance'][_0x2bde77(0x1fb)]+_0x2bde77(0x7a2)),this[_0x2bde77(0x700)]=null,this[_0x2bde77(0x788)]=0x0,this['delayMessage']=0x0,await this[_0x2bde77(0x4e2)]());}async[a0_0x108f24(0x4e2)](){const _0x3f8636=a0_0x108f24;let _0x37f668=()=>{const _0x5c6cf8=a0_0x57b5;this[_0x5c6cf8(0x711)][_0x5c6cf8(0x5f3)](this[_0x5c6cf8(0x476)]+'\x20('+this[_0x5c6cf8(0x21a)][_0x5c6cf8(0x1fb)]+_0x5c6cf8(0x54d)+this['processingScheduleMessageId']+_0x5c6cf8(0x6f6));},_0x2eb53a=async()=>{const _0x5c37cd=a0_0x57b5;this[_0x5c37cd(0x711)]['verbose'](this['instanceName']+'\x20('+this[_0x5c37cd(0x21a)][_0x5c37cd(0x1fb)]+_0x5c37cd(0x274));let _0x152742=Date[_0x5c37cd(0x7e2)]()-0xc*0x3c*0x3c*0x3e8,_0x485378={'where':{'status':{'$in':[_0x5c37cd(0x65c),'sending']},'$or':[{'when':{'$lte':Date['now'](),'$gte':_0x152742}},{'when':0x0}]}};return await this[_0x5c37cd(0x726)][_0x5c37cd(0x26a)][_0x5c37cd(0x731)](_0x485378,this[_0x5c37cd(0x21a)]['wuid']);},_0x3eab06=async _0x46bc5d=>{const _0x43c891=a0_0x57b5;for(let _0x54ca09 of _0x46bc5d){if(!await this[_0x43c891(0x726)][_0x43c891(0x26a)][_0x43c891(0x4c9)]({'_id':_0x54ca09['_id'],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x43c891(0x7e2)]()-0x1770}}]},{'$set':{'startSend':Date[_0x43c891(0x7e2)]()}},this[_0x43c891(0x21a)]['wuid']))return;if(!this['isConnected']){this[_0x43c891(0x711)][_0x43c891(0x5f3)](this[_0x43c891(0x476)]+'\x20('+this['instance'][_0x43c891(0x1fb)]+_0x43c891(0x71d));break;}if(_0x54ca09['type']===_0x43c891(0x48d)&&!this[_0x43c891(0x3e5)]?.[_0x43c891(0x776)]['enabled']){this[_0x43c891(0x711)][_0x43c891(0x2d9)](this[_0x43c891(0x476)]+'\x20('+this[_0x43c891(0x21a)][_0x43c891(0x1fb)]+_0x43c891(0x2b7));continue;}(!_0x54ca09[_0x43c891(0x3ce)]||_0x54ca09[_0x43c891(0x3ce)][_0x43c891(0x231)]===0x0)&&(_0x54ca09=await this['repository']['scheduleMessage'][_0x43c891(0x4ab)](_0x54ca09[_0x43c891(0x5ee)],{'status':_0x43c891(0x27b),'remoteJidsRemaining':[..._0x54ca09[_0x43c891(0x241)]]},this[_0x43c891(0x21a)][_0x43c891(0x1fb)]));for(let _0x61ea21 of _0x54ca09[_0x43c891(0x3ce)]){if(await this['setRestartTimer'](),this[_0x43c891(0x788)]=Date[_0x43c891(0x7e2)](),_0x54ca09[_0x43c891(0x5c2)][_0x43c891(0x3e9)](_0x5666a0=>_0x5666a0[_0x43c891(0x47b)]===_0x61ea21)){this[_0x43c891(0x711)][_0x43c891(0x5f3)](this['instanceName']+'\x20('+this[_0x43c891(0x21a)]['wuid']+'):\x20Mensagem\x20já\x20enviada\x20para\x20'+_0x61ea21+_0x43c891(0x5cd));continue;}if(!this[_0x43c891(0x1ff)]){this[_0x43c891(0x711)]['verbose'](this[_0x43c891(0x476)]+'\x20('+this[_0x43c891(0x21a)][_0x43c891(0x1fb)]+_0x43c891(0x1e6));break;}if(!this['processingScheduleMessageId']){this[_0x43c891(0x711)][_0x43c891(0x5f3)](this[_0x43c891(0x476)]+'\x20('+this['instance'][_0x43c891(0x1fb)]+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0x54ca09['_id']+_0x43c891(0x780));break;}if(_0x54ca09['type']===_0x43c891(0x48d)&&!this[_0x43c891(0x3e5)]?.[_0x43c891(0x776)][_0x43c891(0x7dc)]){this[_0x43c891(0x711)][_0x43c891(0x2d9)](this['instanceName']+'\x20('+this[_0x43c891(0x21a)]['wuid']+_0x43c891(0x2b7));break;}let _0x30ee8a={'remoteJid':_0x61ea21,'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date['now']()},_0x51bc3e=null;try{let _0xe6d758=await this['SendScheduleMessage'](_0x61ea21,_0x54ca09);_0x30ee8a[_0x43c891(0x2d9)]=_0xe6d758['error'],_0x30ee8a['id']=_0xe6d758[_0x43c891(0x2d9)]?null:_0xe6d758['id'],_0x30ee8a[_0x43c891(0x5e6)]=_0xe6d758[_0x43c891(0x2d9)]?_0xe6d758[_0x43c891(0x69c)]?_0xe6d758[_0x43c891(0x69c)][_0x43c891(0x28f)]():'':null;let _0x5cb975={'$push':{'messagesSend':_0x30ee8a},'$pull':{'remoteJidsRemaining':_0x61ea21}},_0x1e90a4=_0x54ca09['_id'];if(_0x51bc3e=await this[_0x43c891(0x726)][_0x43c891(0x26a)][_0x43c891(0x4ab)](_0x1e90a4,_0x5cb975,this[_0x43c891(0x21a)]['wuid']),_0xe6d758[_0x43c891(0x2d9)])continue;let _0x3d173b=this[_0x43c891(0x6b8)](_0x54ca09[_0x43c891(0x786)],_0x54ca09['delaySecMax']);await this[_0x43c891(0x361)](_0x3d173b);}catch(_0x1f49e6){this[_0x43c891(0x711)][_0x43c891(0x2d9)](this[_0x43c891(0x476)]+'\x20('+this[_0x43c891(0x21a)][_0x43c891(0x1fb)]+'):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20'+_0x61ea21+':\x20'+(_0x1f49e6 instanceof Error?_0x1f49e6[_0x43c891(0x58c)]:JSON['stringify'](_0x1f49e6,null,0x2))),_0x30ee8a[_0x43c891(0x2d9)]=!0x0,_0x30ee8a[_0x43c891(0x5e6)]=_0x1f49e6[_0x43c891(0x58c)];let _0x1a59cf={'$push':{'messagesSend':_0x30ee8a},'$pull':{'remoteJidsRemaining':_0x61ea21}},_0x15c1b0=_0x54ca09['_id'];_0x51bc3e=await this['repository'][_0x43c891(0x26a)][_0x43c891(0x4ab)](_0x15c1b0,_0x1a59cf,this[_0x43c891(0x21a)][_0x43c891(0x1fb)]);}finally{if(_0x51bc3e&&_0x51bc3e[_0x43c891(0x60e)]===_0x43c891(0x56a)){this[_0x43c891(0x711)][_0x43c891(0x5f3)](this[_0x43c891(0x476)]+'\x20('+this['instance'][_0x43c891(0x1fb)]+_0x43c891(0x489)+_0x54ca09[_0x43c891(0x5ee)]+_0x43c891(0x502));break;}}}let _0x7041f5=await this['repository'][_0x43c891(0x26a)]['findById'](_0x54ca09['_id'],this['instance'][_0x43c891(0x1fb)]);if(_0x7041f5['remoteJidsRemaining'][_0x43c891(0x231)]===0x0&&_0x7041f5[_0x43c891(0x60e)]!=='stopped'){let _0x507e38={'status':'done'},_0x44cffb=_0x7041f5[_0x43c891(0x5ee)];await this[_0x43c891(0x726)][_0x43c891(0x26a)]['updateOneById'](_0x44cffb,_0x507e38,this[_0x43c891(0x21a)]['wuid']);}await new Promise(_0x577af3=>setTimeout(_0x577af3,0x1388));}},_0x3cc761=async()=>{const _0x2a8668=a0_0x57b5;let _0x41708e={'where':{'status':'scheduled','when':{'$gt':Date[_0x2a8668(0x7e2)]()}}},_0x227c0f=await this[_0x2a8668(0x726)]['scheduleMessage'][_0x2a8668(0x624)](_0x41708e,this[_0x2a8668(0x21a)][_0x2a8668(0x1fb)]);_0x227c0f&&_0x227c0f['when']-Date[_0x2a8668(0x7e2)]()<=0x5265c00?this[_0x2a8668(0x35c)]=_0x227c0f[_0x2a8668(0x4da)]-Date[_0x2a8668(0x7e2)]():this[_0x2a8668(0x35c)]=(0x3c+Math[_0x2a8668(0x391)](Math[_0x2a8668(0x243)]()*0x3c))*0x3c*0x3e8,this[_0x2a8668(0x35c)]=Math[_0x2a8668(0x304)](this[_0x2a8668(0x35c)],0x7d0);let _0x54226f=Math[_0x2a8668(0x2a7)](this[_0x2a8668(0x35c)]/0xea60);if(_0x227c0f){let _0x3c3b88=new Date(_0x227c0f[_0x2a8668(0x4da)])[_0x2a8668(0x2b3)]();this[_0x2a8668(0x711)][_0x2a8668(0x5f3)](this[_0x2a8668(0x476)]+'\x20('+this[_0x2a8668(0x21a)][_0x2a8668(0x1fb)]+_0x2a8668(0x3c3)+_0x3c3b88+_0x2a8668(0x521)+_0x54226f+_0x2a8668(0x240));}else this[_0x2a8668(0x711)]['verbose'](this[_0x2a8668(0x476)]+'\x20('+this[_0x2a8668(0x21a)][_0x2a8668(0x1fb)]+_0x2a8668(0x301)+_0x54226f+_0x2a8668(0x240));setTimeout(()=>this['scheduleNextCheck'](),this['delayMessage']);};if(this[_0x3f8636(0x700)]){await this['setRestartTimer'](),_0x37f668();return;}if(!this[_0x3f8636(0x1ff)]){this[_0x3f8636(0x711)]['verbose'](this[_0x3f8636(0x476)]+'\x20('+this[_0x3f8636(0x21a)][_0x3f8636(0x1fb)]+_0x3f8636(0x7bb)),this[_0x3f8636(0x700)]=null,this['lastSend']=0x0,this[_0x3f8636(0x35c)]=0x0;return;}try{let _0x579912=await _0x2eb53a();_0x579912[_0x3f8636(0x231)]===0x0?this['logger'][_0x3f8636(0x5f3)](this['instanceName']+'\x20('+this[_0x3f8636(0x21a)]['wuid']+_0x3f8636(0x570)):(this['processingScheduleMessageId']=_0x579912[0x0][_0x3f8636(0x5ee)],await _0x3eab06(_0x579912)),await _0x3cc761(),this[_0x3f8636(0x700)]=null;}catch(_0x3e876c){this[_0x3f8636(0x711)][_0x3f8636(0x2d9)]('Error\x20in\x20scheduleNextCheck:\x20'+(_0x3e876c instanceof Error?_0x3e876c['message']:JSON['stringify'](_0x3e876c,null,0x2)));}}[a0_0x108f24(0x6b8)](_0x1d1c47,_0x3a1cda){const _0x3ded75=a0_0x108f24;return _0x1d1c47=Math[_0x3ded75(0x304)](0.5,_0x1d1c47),_0x3a1cda=Math['min'](Math[_0x3ded75(0x304)](0x3,_0x3a1cda),0x78),Math[_0x3ded75(0x391)](Math[_0x3ded75(0x243)]()*(_0x3a1cda-_0x1d1c47+0x1)+_0x1d1c47)*0x3e8;}[a0_0x108f24(0x361)](_0x3e9f1a){return new Promise(_0x225094=>setTimeout(_0x225094,_0x3e9f1a));}async[a0_0x108f24(0x300)](_0x1ab741){const _0x444a86=a0_0x108f24;if(!this[_0x444a86(0x3e5)]&&(await this[_0x444a86(0x553)](),!this[_0x444a86(0x3e5)]))return null;_0x1ab741=this[_0x444a86(0x1ef)](_0x1ab741);let _0x58ea6f=await this[_0x444a86(0x726)][_0x444a86(0x1e1)]['findOne']({'where':{'_id':_0x1ab741}},this[_0x444a86(0x21a)][_0x444a86(0x1fb)]),_0x3c70db={};if(_0x58ea6f&&_0x58ea6f[_0x444a86(0x5dd)]){let _0x33e210=_0x58ea6f[_0x444a86(0x5dd)];typeof _0x33e210[_0x444a86(0x327)]=='string'&&(_0x3c70db[_0x444a86(0x327)]=_0x33e210[_0x444a86(0x327)]),typeof _0x33e210['nomecompleto']==_0x444a86(0x473)&&(_0x3c70db['nomecompleto']=_0x33e210[_0x444a86(0x3e6)]),typeof _0x33e210[_0x444a86(0x767)]==_0x444a86(0x473)&&(_0x3c70db[_0x444a86(0x767)]=_0x33e210[_0x444a86(0x767)]),typeof _0x33e210[_0x444a86(0x3b3)]==_0x444a86(0x473)&&(_0x3c70db[_0x444a86(0x3b3)]=_0x33e210[_0x444a86(0x3b3)]),typeof _0x33e210[_0x444a86(0x60e)]==_0x444a86(0x473)&&(_0x3c70db[_0x444a86(0x60e)]=_0x33e210[_0x444a86(0x60e)]),typeof _0x33e210[_0x444a86(0x4f2)]==_0x444a86(0x473)&&(_0x3c70db[_0x444a86(0x4f2)]=_0x33e210[_0x444a86(0x4f2)]),typeof _0x33e210[_0x444a86(0x76d)]==_0x444a86(0x473)&&(_0x3c70db['responsavelid']=_0x33e210['responsavelid']),Array[_0x444a86(0x47c)](_0x33e210[_0x444a86(0x775)])&&(_0x3c70db[_0x444a86(0x775)]=_0x33e210[_0x444a86(0x775)][_0x444a86(0x631)](',\x20'));}return _0x58ea6f&&_0x58ea6f['leadInfo']&&_0x58ea6f[_0x444a86(0x5dd)]['customFields']&&_0x58ea6f[_0x444a86(0x5dd)][_0x444a86(0x230)][_0x444a86(0x2ab)](_0x2d6a74=>{const _0x92666b=_0x444a86;let _0x79d79e=this[_0x92666b(0x3e5)]?.[_0x92666b(0x230)][_0x92666b(0x731)](_0x3bb5f5=>_0x3bb5f5[_0x92666b(0x5ee)]===_0x2d6a74['_id']);_0x79d79e&&(_0x3c70db[_0x79d79e[_0x92666b(0x2ec)]]=_0x2d6a74['value']);}),_0x3c70db;}async[a0_0x108f24(0x4c6)](_0x197df4,_0xa3e56a){const _0x2b04ef=a0_0x108f24;let _0x1f48e7=await this[_0x2b04ef(0x300)](_0xa3e56a);return this[_0x2b04ef(0x57d)](_0x197df4,_0x1f48e7);}async[a0_0x108f24(0x2b1)](_0x5517bc){const _0x2ad2ab=a0_0x108f24;try{if(this[_0x2ad2ab(0x711)]['verbose'](this[_0x2ad2ab(0x476)]+'\x20('+this[_0x2ad2ab(0x21a)][_0x2ad2ab(0x1fb)]+'):\x20Edit\x20schedule\x20message...'),_0x5517bc[_0x2ad2ab(0x714)]&&_0x5517bc[_0x2ad2ab(0x5ee)]){if(this[_0x2ad2ab(0x700)]===_0x5517bc['_id'][_0x2ad2ab(0x28f)]())throw new Error('Não\x20é\x20possível\x20excluir\x20uma\x20mensagem\x20que\x20está\x20em\x20processamento.\x20Pause\x20primeiro\x20e\x20espere\x20em\x20torno\x20de\x2020\x20segundos\x20para\x20deletar');let _0xc3e642=await this[_0x2ad2ab(0x726)][_0x2ad2ab(0x26a)][_0x2ad2ab(0x7dd)](_0x5517bc[_0x2ad2ab(0x5ee)],this[_0x2ad2ab(0x21a)][_0x2ad2ab(0x1fb)]);return setTimeout(()=>this[_0x2ad2ab(0x4e2)](),0x7d0),_0xc3e642;}let _0x379954;if(_0x5517bc[_0x2ad2ab(0x5ee)]&&(_0x379954=await this[_0x2ad2ab(0x726)][_0x2ad2ab(0x26a)][_0x2ad2ab(0x47f)](_0x5517bc[_0x2ad2ab(0x5ee)],this[_0x2ad2ab(0x21a)]['wuid'])),_0x379954){let _0x5b9a7e=_0x5517bc;this['processingScheduleMessageId']===_0x379954[_0x2ad2ab(0x5ee)]['toString']()&&(_0x5b9a7e={'status':_0x5517bc[_0x2ad2ab(0x60e)],'_id':_0x5517bc[_0x2ad2ab(0x5ee)]});let _0x5cf4be=await this['repository'][_0x2ad2ab(0x26a)][_0x2ad2ab(0x4ab)](_0x5b9a7e[_0x2ad2ab(0x5ee)],_0x5b9a7e,this['instance']['wuid']);return setTimeout(()=>this[_0x2ad2ab(0x4e2)](),0x7d0),_0x5cf4be;}else{_0x5517bc[_0x2ad2ab(0x6e8)]=this[_0x2ad2ab(0x21a)][_0x2ad2ab(0x1fb)];let _0x21fe9f=await this[_0x2ad2ab(0x726)][_0x2ad2ab(0x26a)][_0x2ad2ab(0x282)](_0x5517bc,this[_0x2ad2ab(0x21a)]['wuid']);return setTimeout(()=>this[_0x2ad2ab(0x4e2)](),0x7d0),_0x21fe9f;}}catch(_0x3f76e3){throw this[_0x2ad2ab(0x711)][_0x2ad2ab(0x2d9)](this[_0x2ad2ab(0x476)]+'\x20('+this['instance']['wuid']+_0x2ad2ab(0x7e0)+(_0x3f76e3 instanceof Error?_0x3f76e3[_0x2ad2ab(0x58c)]:JSON[_0x2ad2ab(0x35b)](_0x3f76e3,null,0x2))),new h('Erro:'+_0x3f76e3[_0x2ad2ab(0x58c)]);}}async['getScheduleMessage'](){const _0x39ea68=a0_0x108f24;try{return await this['repository'][_0x39ea68(0x26a)][_0x39ea68(0x731)]({'where':{}},this[_0x39ea68(0x21a)][_0x39ea68(0x1fb)]);}catch(_0x29673a){throw this['logger'][_0x39ea68(0x2d9)](this['instanceName']+'\x20('+this[_0x39ea68(0x21a)]['wuid']+_0x39ea68(0x3a8)+(_0x29673a instanceof Error?_0x29673a[_0x39ea68(0x58c)]:JSON[_0x39ea68(0x35b)](_0x29673a,null,0x2))),new h('Erro:'+_0x29673a[_0x39ea68(0x58c)]);}}async[a0_0x108f24(0x242)](){const _0x516277=a0_0x108f24;try{let _0x23406a={'status':'done'},_0x5ab0ad=await this[_0x516277(0x726)][_0x516277(0x26a)][_0x516277(0x34a)](_0x23406a,this[_0x516277(0x21a)][_0x516277(0x1fb)]);if(!_0x5ab0ad[_0x516277(0x2d9)])this[_0x516277(0x711)][_0x516277(0x5f3)](this['instanceName']+'\x20('+this[_0x516277(0x21a)][_0x516277(0x1fb)]+_0x516277(0x655));else throw new Error(_0x5ab0ad[_0x516277(0x2d9)][_0x516277(0x58c)]||_0x516277(0x437));return this[_0x516277(0x74b)]();}catch(_0x31ef2e){throw this[_0x516277(0x711)][_0x516277(0x2d9)](this[_0x516277(0x476)]+'\x20('+this['instance']['wuid']+_0x516277(0x3fa)+(_0x31ef2e instanceof Error?_0x31ef2e[_0x516277(0x58c)]:JSON[_0x516277(0x35b)](_0x31ef2e,null,0x2))),new h(_0x516277(0x1ec)+_0x31ef2e[_0x516277(0x58c)]);}}async[a0_0x108f24(0x34f)](_0x319583,_0x34f569){const _0x4e02b0=a0_0x108f24;try{if(_0x34f569[_0x4e02b0(0x4bb)]===_0x4e02b0(0x48d)&&!this['AutomateSystem']?.[_0x4e02b0(0x776)][_0x4e02b0(0x7dc)])return this[_0x4e02b0(0x711)][_0x4e02b0(0x2d9)](this[_0x4e02b0(0x476)]+'\x20('+this[_0x4e02b0(0x21a)][_0x4e02b0(0x1fb)]+_0x4e02b0(0x80b)),{'error':!0x0,'detail':_0x4e02b0(0x759)};switch(_0x34f569['type']){case _0x4e02b0(0x341):return await this['scheduleSendText'](_0x34f569,_0x319583);case'media':return await this[_0x4e02b0(0x725)](_0x34f569,_0x319583);case _0x4e02b0(0x2a9):return await this[_0x4e02b0(0x45f)](_0x34f569,_0x319583);case _0x4e02b0(0x48d):let _0x20e43b=new De();return _0x20e43b[_0x4e02b0(0x2ec)]=_0x34f569[_0x4e02b0(0x632)],_0x20e43b[_0x4e02b0(0x47b)]=_0x319583,await this[_0x4e02b0(0x62d)](_0x20e43b);break;default:return this[_0x4e02b0(0x711)][_0x4e02b0(0x2d9)](this['instanceName']+'\x20('+this[_0x4e02b0(0x21a)][_0x4e02b0(0x1fb)]+_0x4e02b0(0x3b1)+_0x34f569['type']),{'error':!0x0,'detail':_0x4e02b0(0x70a)};}}catch(_0x4c4be9){return this['logger'][_0x4e02b0(0x2d9)](this[_0x4e02b0(0x476)]+'\x20('+this[_0x4e02b0(0x21a)][_0x4e02b0(0x1fb)]+_0x4e02b0(0x705)+(_0x4c4be9 instanceof Error?_0x4c4be9[_0x4e02b0(0x58c)]:JSON['stringify'](_0x4c4be9,null,0x2))),{'error':!0x0,'detail':_0x4c4be9[_0x4e02b0(0x58c)]};}}['getRandomText'](_0x1466d1){const _0x1a882f=a0_0x108f24;let _0x16813b=_0x1466d1['split']('|'),_0xf2710c=Math[_0x1a882f(0x391)](Math[_0x1a882f(0x243)]()*_0x16813b[_0x1a882f(0x231)]);return _0x16813b[_0xf2710c][_0x1a882f(0x37f)]();}async['scheduleSendText'](_0x51e2c3,_0x5c2bf7){const _0x1ccaed=a0_0x108f24;if(this[_0x1ccaed(0x711)][_0x1ccaed(0x5f3)](this[_0x1ccaed(0x476)]+'\x20('+this[_0x1ccaed(0x21a)]['wuid']+_0x1ccaed(0x5d2)),!_0x51e2c3[_0x1ccaed(0x58c)]['text']||_0x51e2c3[_0x1ccaed(0x58c)][_0x1ccaed(0x341)][_0x1ccaed(0x231)]===0x0)return{'error':!0x0,'detail':'sem\x20texto\x20na\x20mensagem'};let _0x34a54b=this[_0x1ccaed(0x43a)](_0x51e2c3[_0x1ccaed(0x58c)]['text']),_0x36ea5e=await this[_0x1ccaed(0x4c6)](_0x34a54b,_0x5c2bf7),_0x4f4bf5={'number':_0x5c2bf7,'options':{'delay':_0x51e2c3['message'][_0x1ccaed(0x64e)]},'textMessage':{'text':_0x36ea5e}},_0x176d6c=null;try{let _0x3064b7=await this['textMessage'](_0x4f4bf5);if(_0x3064b7&&_0x3064b7['status'])return{'error':!0x1,'id':_0x3064b7[_0x1ccaed(0x662)]['id']};_0x176d6c=JSON[_0x1ccaed(0x35b)](_0x3064b7),this[_0x1ccaed(0x711)][_0x1ccaed(0x5f3)](this[_0x1ccaed(0x476)]+'\x20('+this[_0x1ccaed(0x21a)][_0x1ccaed(0x1fb)]+_0x1ccaed(0x719)+_0x176d6c);}catch(_0x1a8cab){this[_0x1ccaed(0x711)]['error'](this['instanceName']+'\x20('+this[_0x1ccaed(0x21a)][_0x1ccaed(0x1fb)]+_0x1ccaed(0x211)+(_0x1a8cab instanceof Error?_0x1a8cab[_0x1ccaed(0x58c)]:JSON['stringify'](_0x1a8cab,null,0x2))),_0x176d6c=_0x1a8cab[_0x1ccaed(0x58c)];}if(_0x176d6c)return{'error':!0x0,'detail':(typeof _0x176d6c==_0x1ccaed(0x252)?JSON['stringify'](_0x176d6c,null,0x2):_0x176d6c)[_0x1ccaed(0x6e4)](/[\[\]{}\n]/g,'\x20')[_0x1ccaed(0x6e4)](/  +/g,'\x20')};}async[a0_0x108f24(0x725)](_0x2db9f3,_0x280777){const _0x1da5b1=a0_0x108f24;this[_0x1da5b1(0x711)][_0x1da5b1(0x5f3)](this[_0x1da5b1(0x476)]+'\x20('+this['instance']['wuid']+_0x1da5b1(0x206));let _0x837f45;if(_0x2db9f3[_0x1da5b1(0x58c)][_0x1da5b1(0x341)]&&_0x2db9f3[_0x1da5b1(0x58c)][_0x1da5b1(0x341)][_0x1da5b1(0x231)]>0x0){let _0x5dfbe1=this[_0x1da5b1(0x43a)](_0x2db9f3[_0x1da5b1(0x58c)]['text']);_0x837f45=await this[_0x1da5b1(0x4c6)](_0x5dfbe1,_0x280777);}let _0x125909={'number':_0x280777,'options':{'delay':_0x2db9f3['message'][_0x1da5b1(0x64e)]},'mediaMessage':{'mediatype':_0x2db9f3[_0x1da5b1(0x58c)][_0x1da5b1(0x5c4)],'caption':_0x837f45,'media':_0x2db9f3['message'][_0x1da5b1(0x424)]}},_0x207b99=null;try{let _0x165d6b=await this[_0x1da5b1(0x28a)](_0x125909);if(_0x165d6b&&_0x165d6b[_0x1da5b1(0x60e)])return{'error':!0x1,'id':_0x165d6b[_0x1da5b1(0x662)]['id']};_0x207b99=JSON[_0x1da5b1(0x35b)](_0x165d6b),this[_0x1da5b1(0x711)]['verbose'](this[_0x1da5b1(0x476)]+'\x20('+this[_0x1da5b1(0x21a)][_0x1da5b1(0x1fb)]+_0x1da5b1(0x719)+_0x207b99);}catch(_0x2ccd76){this['logger'][_0x1da5b1(0x2d9)](this[_0x1da5b1(0x476)]+'\x20('+this[_0x1da5b1(0x21a)][_0x1da5b1(0x1fb)]+_0x1da5b1(0x49f)+(_0x2ccd76 instanceof Error?_0x2ccd76[_0x1da5b1(0x58c)]:JSON[_0x1da5b1(0x35b)](_0x2ccd76,null,0x2))),_0x207b99=_0x2ccd76['message'];}if(_0x207b99)return{'error':!0x0,'detail':(typeof _0x207b99==_0x1da5b1(0x252)?JSON[_0x1da5b1(0x35b)](_0x207b99,null,0x2):_0x207b99)[_0x1da5b1(0x6e4)](/[\[\]{}\n]/g,'\x20')[_0x1da5b1(0x6e4)](/  +/g,'\x20')};}async[a0_0x108f24(0x45f)](_0x26ddd0,_0x45e58f){const _0x5a4668=a0_0x108f24;this[_0x5a4668(0x711)][_0x5a4668(0x5f3)](this[_0x5a4668(0x476)]+'\x20('+this[_0x5a4668(0x21a)][_0x5a4668(0x1fb)]+_0x5a4668(0x490));let _0x35fb2e={'number':_0x45e58f,'options':{'delay':_0x26ddd0[_0x5a4668(0x58c)][_0x5a4668(0x64e)]},'audioMessage':{'audio':_0x26ddd0[_0x5a4668(0x58c)][_0x5a4668(0x424)]}},_0x259fea=null;try{let _0x23741b=await this['audioWhatsapp'](_0x35fb2e);if(_0x23741b&&_0x23741b['status'])return{'error':!0x1,'id':_0x23741b[_0x5a4668(0x662)]['id']};_0x259fea=JSON[_0x5a4668(0x35b)](_0x23741b),this[_0x5a4668(0x711)][_0x5a4668(0x5f3)](this[_0x5a4668(0x476)]+'\x20('+this[_0x5a4668(0x21a)][_0x5a4668(0x1fb)]+_0x5a4668(0x719)+_0x259fea);}catch(_0x17e2ba){this[_0x5a4668(0x711)]['error'](this[_0x5a4668(0x476)]+'\x20('+this[_0x5a4668(0x21a)][_0x5a4668(0x1fb)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20'+(_0x17e2ba instanceof Error?_0x17e2ba[_0x5a4668(0x58c)]:JSON[_0x5a4668(0x35b)](_0x17e2ba,null,0x2))),_0x259fea=_0x17e2ba[_0x5a4668(0x58c)];}if(_0x259fea)return{'error':!0x0,'detail':(typeof _0x259fea==_0x5a4668(0x252)?JSON[_0x5a4668(0x35b)](_0x259fea,null,0x2):_0x259fea)[_0x5a4668(0x6e4)](/[\[\]{}\n]/g,'\x20')[_0x5a4668(0x6e4)](/  +/g,'\x20')};}},It=class c{constructor(_0x1e0a1f,_0x62aadb,_0x390ec8){const _0xd47754=a0_0x108f24;this['eventEmitter']=_0x1e0a1f,this['configService']=_0x62aadb,this[_0xd47754(0x726)]=_0x390ec8,this['db']={},this[_0xd47754(0x4d7)]={},this[_0xd47754(0x711)]=new v(c[_0xd47754(0x2ec)]),this[_0xd47754(0x369)]={},(this['removeInstance'](),this['noConnection'](),Object[_0xd47754(0x592)](this['db'],_0x62aadb['get'](_0xd47754(0x398))),Object['assign'](this[_0xd47754(0x4d7)],_0x62aadb['get']('REDIS')),this[_0xd47754(0x710)]=this['db'][_0xd47754(0x22c)]?this[_0xd47754(0x726)][_0xd47754(0x1bd)]?.['db'](this['db'][_0xd47754(0x46e)][_0xd47754(0x55a)]+_0xd47754(0x61a)):void 0x0,this[_0xd47754(0x51b)]=this[_0xd47754(0x4d7)][_0xd47754(0x22c)]?new re(this[_0xd47754(0x4d7)]):void 0x0);}async[a0_0x108f24(0x2d7)](_0x494956){const _0x1d611f=a0_0x108f24;if(_0x494956&&!this[_0x1d611f(0x369)][_0x494956])throw new L(_0x1d611f(0x481)+_0x494956+_0x1d611f(0x204));let _0x5d5b49=[];for await(let [_0x54093d,_0xa0b75d]of Object['entries'](this[_0x1d611f(0x369)]))if(_0xa0b75d&&_0xa0b75d[_0x1d611f(0x2fa)][_0x1d611f(0x53c)]===_0x1d611f(0x691)){let _0x48cbc6=await this[_0x1d611f(0x726)][_0x1d611f(0x681)]['find'](_0x54093d);_0x5d5b49[_0x1d611f(0x1d0)]({'instance':{'instanceName':_0x54093d,'apikey':_0x48cbc6['apikey'],'owner':_0xa0b75d[_0x1d611f(0x1fb)],'profileName':await _0xa0b75d[_0x1d611f(0x465)]()||'not\x20loaded','profilePictureUrl':_0xa0b75d['profilePictureUrl']}});}return _0x5d5b49[_0x1d611f(0x731)](_0xe6d3d9=>_0xe6d3d9['instance'][_0x1d611f(0x476)]===_0x494956)??_0x5d5b49;}async['cleaningUp'](_0x17b9f1){const _0x3db397=a0_0x108f24;if(this['db'][_0x3db397(0x22c)]&&(await this['repository']['dbServer'][_0x3db397(0x766)](),(await this['dbInstance'][_0x3db397(0x63b)]())[_0x3db397(0x231)]>0x0&&await this['dbInstance']['dropCollection'](_0x17b9f1)),this[_0x3db397(0x4d7)][_0x3db397(0x22c)]){this[_0x3db397(0x51b)][_0x3db397(0x508)]=_0x17b9f1,await this[_0x3db397(0x51b)]['delAll']();return;}}async[a0_0x108f24(0x612)](){const _0xf7c793=a0_0x108f24;await this['InstancesAlterarTodas']();let _0x111b92=async _0x155baf=>{const _0x3d6a72=a0_0x57b5;let _0x595348=new fe(this['configService'],this[_0x3d6a72(0x7ba)],this['repository']);_0x595348[_0x3d6a72(0x476)]=_0x155baf,await _0x595348[_0x3d6a72(0x471)](),this['waInstances'][_0x155baf]=_0x595348;};try{if(this[_0xf7c793(0x4d7)][_0xf7c793(0x22c)]){let _0x2c2e2e=await this['cache'][_0xf7c793(0x31d)]();_0x2c2e2e?.[_0xf7c793(0x231)]>0x0&&_0x2c2e2e['forEach'](async _0x4b766e=>await _0x111b92(_0x4b766e[_0xf7c793(0x5ac)](':')[0x1]));return;}if(this['db'][_0xf7c793(0x22c)]){await this[_0xf7c793(0x726)]['dbServer']['connect']();let _0x30aaab=await this[_0xf7c793(0x710)]['collections']();_0x30aaab[_0xf7c793(0x231)]>0x0&&_0x30aaab[_0xf7c793(0x2ab)](async _0xb264a6=>await _0x111b92(_0xb264a6['namespace'][_0xf7c793(0x6e4)](/^[\w-]+\./,'')));return;}}catch(_0x1dae96){this[_0xf7c793(0x711)][_0xf7c793(0x2d9)](_0x1dae96);}}async['InstancesAsDisconnectedX'](){const _0x183fc=a0_0x108f24;let _0x419270=await this[_0x183fc(0x726)][_0x183fc(0x681)][_0x183fc(0x68a)](),_0x2c7a35=_0x419270[_0x183fc(0x517)](_0x58738d=>!this[_0x183fc(0x369)][_0x58738d[_0x183fc(0x5ee)]]&&(_0x58738d['online']||typeof _0x58738d[_0x183fc(0x224)]>'u'));_0x2c7a35[_0x183fc(0x231)]>0x0&&await Promise[_0x183fc(0x406)](_0x2c7a35[_0x183fc(0x49e)](async _0x1ba8c5=>{const _0x2f1c04=_0x183fc;let _0xa1db7c={'online':!0x1,'lastDisconnect':Date['now']()};await this[_0x2f1c04(0x726)][_0x2f1c04(0x681)][_0x2f1c04(0x265)](_0xa1db7c,_0x1ba8c5['_id']);}));let _0x5572b6=Date[_0x183fc(0x7e2)]()-0xa*0x18*0x3c*0x3c*0x3e8,_0x52dc69=_0x419270[_0x183fc(0x517)](_0x174112=>!this[_0x183fc(0x369)][_0x174112[_0x183fc(0x5ee)]]&&typeof _0x174112[_0x183fc(0x1d7)]<'u'&&_0x174112['lastDisconnect']<_0x5572b6);_0x52dc69[_0x183fc(0x231)]>0x0&&await Promise[_0x183fc(0x406)](_0x52dc69[_0x183fc(0x49e)](async _0x2590a2=>{}));}async[a0_0x108f24(0x6d6)](){const _0x559d84=a0_0x108f24;try{let _0x2fd513={'$or':[{'online':{'$exists':!0x1}},{'lastDisconnect':{'$exists':!0x1}}]},_0x2dfa6d={'online':!0x1,'lastDisconnect':Date[_0x559d84(0x7e2)]()},_0x546aad=await this[_0x559d84(0x726)][_0x559d84(0x681)][_0x559d84(0x5bc)](_0x2fd513,_0x2dfa6d);console['log'](_0x559d84(0x257)+_0x546aad[_0x559d84(0x44c)]),await this['removeOlderDisconnectedInstances']();}catch(_0x4eb14a){console[_0x559d84(0x2d9)](_0x559d84(0x7c7),_0x4eb14a);}}async[a0_0x108f24(0x650)](){const _0x149b8a=a0_0x108f24;try{let _0x31829b={'online':!0x1,'lastDisconnect':{'$lt':0x337f9800}},_0x2d2150=await this[_0x149b8a(0x726)]['auth'][_0x149b8a(0x34a)](_0x31829b);console[_0x149b8a(0x472)](_0x149b8a(0x3b8)+_0x2d2150[_0x149b8a(0x44c)]);}catch(_0x23379e){console[_0x149b8a(0x2d9)](_0x149b8a(0x6ca),_0x23379e);}}[a0_0x108f24(0x71a)](){const _0x15eb46=a0_0x108f24;this[_0x15eb46(0x7ba)]['on'](_0x15eb46(0x4bd),async _0x24c5bd=>{const _0x5dcf63=_0x15eb46;try{this['waInstances'][_0x24c5bd]=void 0x0;}catch{}try{this['cleaningUp'](_0x24c5bd);}finally{this['logger'][_0x5dcf63(0x2fb)](_0x5dcf63(0x481)+_0x24c5bd+_0x5dcf63(0x65a));}});}[a0_0x108f24(0x6cf)](){const _0x1e7a30=a0_0x108f24;this['eventEmitter']['on'](_0x1e7a30(0x7b2),async _0x22b62b=>{const _0x2f7ac6=_0x1e7a30;try{this[_0x2f7ac6(0x369)][_0x22b62b]=void 0x0;}catch{}try{this['cleaningUp'](_0x22b62b);}finally{this['logger'][_0x2f7ac6(0x2fb)]('Instance\x20\x22'+_0x22b62b+'\x22\x20-\x20NOT\x20CONNECTION');}});}},Dt=class extends I{['getChatModelForOwner'](_0x24bdc8){return Us(_0x24bdc8);}async['insert'](_0x2f5d6c){const _0x2b9d56=a0_0x108f24;if(_0x2f5d6c['length']!==0x0)try{return{'insertCount':(await this[_0x2b9d56(0x3af)](_0x2f5d6c[0x0][_0x2b9d56(0x6e8)])[_0x2b9d56(0x42c)]([..._0x2f5d6c]))[_0x2b9d56(0x231)]};}catch(_0x430c37){return _0x430c37;}}async['find'](_0x4a9899,_0x403dea){const _0x1b01e1=a0_0x108f24;try{let _0x49ee68=this[_0x1b01e1(0x3af)](_0x403dea),_0x2083ab=T(_0x4a9899['where']);return await _0x49ee68[_0x1b01e1(0x731)](_0x2083ab)[_0x1b01e1(0x223)]({'lastmsg':-0x1})['limit'](_0x4a9899?.[_0x1b01e1(0x239)]??0x0)[_0x1b01e1(0x4dd)]();}catch{return[];}}async[a0_0x108f24(0x358)](_0x2eb2dd,_0x28540f){const _0x32a7b2=a0_0x108f24;try{return await this[_0x32a7b2(0x3af)](_0x28540f)[_0x32a7b2(0x34a)]({..._0x2eb2dd[_0x32a7b2(0x32e)]}),[];}catch(_0x58d99f){return{'error':_0x58d99f?.[_0x32a7b2(0x28f)]()};}}async[a0_0x108f24(0x624)](_0x33d640,_0xde3fd1){const _0x1837ae=a0_0x108f24;try{let _0x2d718f=this[_0x1837ae(0x3af)](_0xde3fd1),_0x12e252=T(_0x33d640[_0x1837ae(0x32e)]);return await _0x2d718f['findOne'](_0x12e252)['lean']();}catch{return null;}}async[a0_0x108f24(0x4c9)](_0x55ff1b,_0x4ba543,_0x2205aa,_0x16c67a,_0x32db6e=a0_0x108f24(0x622)){const _0x3f2ac5=a0_0x108f24;try{let _0x4d3d8d={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x16c67a},_0x58d305=this[_0x3f2ac5(0x3af)](_0x2205aa),_0x24ccbf=T(_0x55ff1b[_0x3f2ac5(0x32e)]),_0x23cebc={};return _0x23cebc[_0x32db6e]=_0x4ba543,await _0x58d305['findOneAndUpdate'](_0x24ccbf,_0x23cebc,_0x4d3d8d);}catch(_0x7b971d){return console[_0x3f2ac5(0x2d9)](_0x7b971d),null;}}async['updateMany'](_0x1d3b56){const _0x3c43c1=a0_0x108f24;try{let _0x4ca8b2=this['getChatModelForOwner'](_0x1d3b56[0x0]['query']['where'][_0x3c43c1(0x6e8)]),_0x6e84f4=_0x1d3b56[_0x3c43c1(0x49e)](_0x5e17d0=>({'updateOne':{'filter':{..._0x5e17d0[_0x3c43c1(0x63f)][_0x3c43c1(0x32e)]},'update':{'$set':_0x5e17d0[_0x3c43c1(0x635)]}}}));return(await _0x4ca8b2[_0x3c43c1(0x742)](_0x6e84f4))['modifiedCount'];}catch(_0x4a7ee7){return console[_0x3c43c1(0x2d9)](_0x4a7ee7),0x0;}}async['insertMany'](_0x27fc5b,_0x4928e8){const _0x17da95=a0_0x108f24;if(!Array[_0x17da95(0x47c)](_0x27fc5b)||_0x27fc5b[_0x17da95(0x231)]===0x0)throw new Error(_0x17da95(0x528));try{return(await this[_0x17da95(0x3af)](_0x4928e8)[_0x17da95(0x42c)](_0x27fc5b))[_0x17da95(0x231)];}catch(_0x245555){throw console[_0x17da95(0x2d9)](_0x17da95(0x22d),_0x245555),_0x245555;}}async[a0_0x108f24(0x1fd)](_0x23e1db,_0x492163){const _0x4fb88b=a0_0x108f24;try{await this[_0x4fb88b(0x3af)](_0x492163)[_0x4fb88b(0x4c9)]({'_id':_0x23e1db},{'$inc':{'isValidAttempts':0x1}});}catch(_0x4e26c8){throw console[_0x4fb88b(0x2d9)](_0x4fb88b(0x628),_0x4e26c8),_0x4e26c8;}}async[a0_0x108f24(0x57b)](_0x567610,_0x3b91ae){const _0x2d82cf=a0_0x108f24;try{await this[_0x2d82cf(0x3af)](_0x3b91ae)['deleteOne']({'_id':_0x567610});}catch(_0x4f5fba){throw console[_0x2d82cf(0x2d9)]('Erro\x20ao\x20deletar\x20chat:',_0x4f5fba),_0x4f5fba;}}},xt=class extends I{[a0_0x108f24(0x3c8)](_0x5346a7){return ca(_0x5346a7);}async[a0_0x108f24(0x4c9)](_0x57394f,_0x3e6665,_0x3945aa,_0x4489ff){const _0x4ab9b7=a0_0x108f24;try{let _0x50d310={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x4489ff},_0x1e31d6=this[_0x4ab9b7(0x3c8)](_0x3945aa),_0x5d50d4=T(_0x57394f[_0x4ab9b7(0x32e)]);return await _0x1e31d6[_0x4ab9b7(0x228)](_0x5d50d4,{'$set':_0x3e6665},_0x50d310);}catch(_0x339393){return console[_0x4ab9b7(0x2d9)](_0x339393),null;}}async['find'](_0xf4a3b7,_0x330cc8){const _0x323a44=a0_0x108f24;try{let _0x593f88=this[_0x323a44(0x3c8)](_0x330cc8),_0x2bb959=T(_0xf4a3b7[_0x323a44(0x32e)]);return await _0x593f88[_0x323a44(0x731)](_0x2bb959);}catch(_0x358568){console[_0x323a44(0x2d9)](_0x358568);}}async[a0_0x108f24(0x714)](_0x91fa1e,_0x46c19d){const _0x58dbdb=a0_0x108f24;try{let _0x576706=this[_0x58dbdb(0x3c8)](_0x46c19d),_0x4ba7d8=T(_0x91fa1e[_0x58dbdb(0x32e)]);await _0x576706['deleteMany'](_0x4ba7d8);}catch(_0xe03c86){console['error'](_0xe03c86);}}async[a0_0x108f24(0x358)](_0x34ba74){const _0x5d3429=a0_0x108f24;try{return await this[_0x5d3429(0x3c8)](_0x34ba74)[_0x5d3429(0x3d2)][_0x5d3429(0x5e9)](),{'success':!0x0};}catch(_0x2e8252){return console['error'](_0x2e8252),{'success':!0x1,'error':_0x2e8252};}}},_t=class{constructor(_0x1f6530){const _0x249aaa=a0_0x108f24;this[_0x249aaa(0x1d8)]=_0x1f6530;}async[a0_0x108f24(0x7d3)]({instanceName:_0x2199f6},_0x38306b){const _0x225818=a0_0x108f24;return await this[_0x225818(0x1d8)]['waInstances'][_0x2199f6][_0x225818(0x7d3)](_0x38306b);}async['whatsappNumber']({instanceName:_0x366a2a},_0x427712){const _0x4bc7a2=a0_0x108f24;return await this[_0x4bc7a2(0x1d8)][_0x4bc7a2(0x369)][_0x366a2a][_0x4bc7a2(0x3ed)](_0x427712);}async[a0_0x108f24(0x245)]({instanceName:_0x5e93b9},_0x466e1c){const _0x6abbe6=a0_0x108f24;return await this[_0x6abbe6(0x1d8)]['waInstances'][_0x5e93b9]['importChats'](_0x466e1c);}async[a0_0x108f24(0x7fc)]({instanceName:_0x590e6b},_0xbeae76){const _0x22266f=a0_0x108f24;return await this[_0x22266f(0x1d8)]['waInstances'][_0x590e6b][_0x22266f(0x66d)](_0xbeae76);}async[a0_0x108f24(0x734)]({instanceName:_0x1ed178},_0x1618f0){const _0xda074=a0_0x108f24;return await this[_0xda074(0x1d8)]['waInstances'][_0x1ed178][_0xda074(0x734)](_0x1618f0);}async[a0_0x108f24(0x6a4)]({instanceName:_0x152643},_0xd1cca8){const _0x1697e0=a0_0x108f24;return await this['waMonitor'][_0x1697e0(0x369)][_0x152643]['deleteMessage'](_0xd1cca8);}async[a0_0x108f24(0x372)]({instanceName:_0x2488f5},_0x55ab9b){const _0x3d3188=a0_0x108f24;return await this[_0x3d3188(0x1d8)][_0x3d3188(0x369)][_0x2488f5][_0x3d3188(0x336)](_0x55ab9b[_0x3d3188(0x53e)]);}async[a0_0x108f24(0x670)]({instanceName:_0x55be2f},_0x569289){const _0x661a92=a0_0x108f24;return await this['waMonitor']['waInstances'][_0x55be2f]['fetchProfile'](_0x569289[_0x661a92(0x53e)]);}async['updatePresence']({instanceName:_0xae5fbc},_0x96da41){const _0x1b55b5=a0_0x108f24;return await this[_0x1b55b5(0x1d8)][_0x1b55b5(0x369)][_0xae5fbc][_0x1b55b5(0x5cc)](_0x96da41);}async[a0_0x108f24(0x574)]({instanceName:_0x1747fb},_0x263d48){const _0x2908e6=a0_0x108f24;return await this[_0x2908e6(0x1d8)][_0x2908e6(0x369)][_0x1747fb][_0x2908e6(0x574)](_0x263d48);}async[a0_0x108f24(0x6da)]({instanceName:_0x5ddb8c},_0x3027f0){const _0x29bb10=a0_0x108f24;return await this['waMonitor'][_0x29bb10(0x369)][_0x5ddb8c]['getBase64FromMediaMessage'](_0x3027f0);}async[a0_0x108f24(0x732)]({instanceName:_0x51ddc7},_0x1b7890){const _0x23c25c=a0_0x108f24;return await this[_0x23c25c(0x1d8)][_0x23c25c(0x369)][_0x51ddc7][_0x23c25c(0x732)](_0x1b7890);}async[a0_0x108f24(0x6b2)]({instanceName:_0x23cb65}){const _0x1e38cd=a0_0x108f24;return await this[_0x1e38cd(0x1d8)][_0x1e38cd(0x369)][_0x23cb65][_0x1e38cd(0x6b2)]();}async[a0_0x108f24(0x57e)]({instanceName:_0x1dcba8}){const _0x2c8bf4=a0_0x108f24;return await this['waMonitor'][_0x2c8bf4(0x369)][_0x1dcba8][_0x2c8bf4(0x57e)]();}async[a0_0x108f24(0x385)]({instanceName:_0x479348}){const _0x51020e=a0_0x108f24;return await this[_0x51020e(0x1d8)]['waInstances'][_0x479348][_0x51020e(0x385)]();}async['updatePrivacySettings']({instanceName:_0x516222},_0x1abdc7){const _0x7c9985=a0_0x108f24;return await this[_0x7c9985(0x1d8)][_0x7c9985(0x369)][_0x516222][_0x7c9985(0x2f7)](_0x1abdc7);}async[a0_0x108f24(0x34e)]({instanceName:_0x5d5129},_0x41c7b8){const _0x1c4f68=a0_0x108f24;return await this['waMonitor'][_0x1c4f68(0x369)][_0x5d5129]['fetchBusinessProfile'](_0x41c7b8[_0x1c4f68(0x53e)]);}async[a0_0x108f24(0x4ea)]({instanceName:_0x42ae30},_0x3ceea9){const _0x477c19=a0_0x108f24;return await this[_0x477c19(0x1d8)]['waInstances'][_0x42ae30][_0x477c19(0x4ea)](_0x3ceea9[_0x477c19(0x2ec)]);}async[a0_0x108f24(0x261)]({instanceName:_0x40f9f0},_0x322e09){const _0x307191=a0_0x108f24;return await this[_0x307191(0x1d8)][_0x307191(0x369)][_0x40f9f0][_0x307191(0x261)](_0x322e09['status']);}async['updateProfilePicture']({instanceName:_0x5c241a},_0x1beb11){const _0x3fdee3=a0_0x108f24;return await this['waMonitor'][_0x3fdee3(0x369)][_0x5c241a]['updateProfilePicture'](_0x1beb11[_0x3fdee3(0x5ea)]);}async[a0_0x108f24(0x6b6)]({instanceName:_0x172453},_0x55861f){const _0x2ee9fb=a0_0x108f24;return await this[_0x2ee9fb(0x1d8)]['waInstances'][_0x172453]['removeProfilePicture']();}},Cs=require(a0_0x108f24(0x7fe)),Pt=class c{constructor(_0x2b9634,_0x24b468,_0x26a55b,_0x553973,_0x122c5c){const _0x56ccda=a0_0x108f24;this['waMonitor']=_0x2b9634,this[_0x56ccda(0x62b)]=_0x24b468,this[_0x56ccda(0x726)]=_0x26a55b,this[_0x56ccda(0x7ba)]=_0x553973,this[_0x56ccda(0x67a)]=_0x122c5c,this['logger']=new v(c[_0x56ccda(0x2ec)]);}async[a0_0x108f24(0x44a)]({instanceName:_0x1a3f42,apikey:_0x1dff08,number:_0x1ca674,proxy:_0x97fa6b=!0x0}){const _0x4103ab=a0_0x108f24;try{let _0x10f4d5=new fe(this[_0x4103ab(0x62b)],this[_0x4103ab(0x7ba)],this[_0x4103ab(0x726)]);_0x10f4d5[_0x4103ab(0x476)]=_0x1a3f42,this[_0x4103ab(0x1d8)][_0x4103ab(0x369)][_0x10f4d5['instanceName']]=_0x10f4d5;let _0x3a8c00={};_0x1dff08?(await this['repository'][_0x4103ab(0x681)]['create']({'apikey':_0x1dff08},_0x1a3f42),_0x3a8c00[_0x4103ab(0x4b1)]=_0x1dff08):_0x3a8c00=await this['authService']['generateHash']({'instanceName':_0x10f4d5['instanceName']});let _0x450066;return await _0x10f4d5[_0x4103ab(0x471)](_0x1ca674,_0x97fa6b),await(0x0,Cs['delay'])(0x7d0),_0x450066=_0x10f4d5['qrCode'],{'instance':{'instanceName':_0x10f4d5[_0x4103ab(0x476)],'status':_0x4103ab(0x720)},'hash':_0x3a8c00,'qrcode':_0x450066};}catch(_0x145042){this[_0x4103ab(0x711)][_0x4103ab(0x2d9)](_0x145042);}}async['connectToWhatsappController']({instanceName:_0x154eab,number:_0x318f0b=null,proxy:_0x536263=!0x0}){const _0xc46c48=a0_0x108f24;try{let _0x276626=this[_0xc46c48(0x1d8)][_0xc46c48(0x369)][_0x154eab];switch(_0x276626?.[_0xc46c48(0x2fa)]?.[_0xc46c48(0x53c)]){case _0xc46c48(0x4b6):return await _0x276626[_0xc46c48(0x471)](_0x318f0b,_0x536263),await(0x0,Cs[_0xc46c48(0x64e)])(0x7d0),_0x276626[_0xc46c48(0x65d)];case _0xc46c48(0x7ee):return _0x276626[_0xc46c48(0x65d)];default:return await this[_0xc46c48(0x464)]({'instanceName':_0x154eab});}}catch(_0x172f95){this['logger']['log'](_0x172f95);}}async[a0_0x108f24(0x464)]({instanceName:_0x179d3a}){const _0x329451=a0_0x108f24;let _0x11dd3c=this['waMonitor'][_0x329451(0x369)][_0x179d3a][_0x329451(0x2fa)],_0x23c323=null;_0x11dd3c['state']===_0x329451(0x691)&&_0x179d3a&&(_0x23c323=await this[_0x329451(0x1d8)][_0x329451(0x2d7)](_0x179d3a));let _0x53f91e=null;return _0x11dd3c[_0x329451(0x53c)]===_0x329451(0x7ee)&&_0x179d3a&&(_0x53f91e=this[_0x329451(0x1d8)]['waInstances'][_0x179d3a][_0x329451(0x65d)]),{'instance':_0x179d3a,'connectionStatus':_0x11dd3c,'instanceInfo':_0x23c323,'qrcode':_0x53f91e};}async[a0_0x108f24(0x6c1)]({instanceName:_0x54a4ce}){const _0x8c0e62=a0_0x108f24;try{return this[_0x8c0e62(0x1d8)][_0x8c0e62(0x369)][_0x54a4ce]?.[_0x8c0e62(0x3d0)]?.['ws']?.[_0x8c0e62(0x4b6)](),{'status':_0x8c0e62(0x3c0),'error':!0x1,'response':{'message':_0x8c0e62(0x629)}};}catch(_0x4b25bf){this[_0x8c0e62(0x711)][_0x8c0e62(0x2d9)](_0x4b25bf);}}async[a0_0x108f24(0x6f9)]({instanceName:_0x5644df}){const _0x1211c8=a0_0x108f24;return _0x5644df?this[_0x1211c8(0x1d8)][_0x1211c8(0x2d7)](_0x5644df):this[_0x1211c8(0x1d8)][_0x1211c8(0x2d7)]();}async['logout']({instanceName:_0x527b54}){const _0x2cfdd6=a0_0x108f24;try{return await this['waMonitor'][_0x2cfdd6(0x369)][_0x527b54]?.['client']?.['logout'](_0x2cfdd6(0x737)+_0x527b54),{'error':!0x1,'message':'Instance\x20logged\x20out'};}catch(_0x1ada75){throw new O(_0x1ada75[_0x2cfdd6(0x28f)]());}}async[a0_0x108f24(0x216)]({instanceName:_0x4c7fd3}){const _0x4f52a7=a0_0x108f24;if((await this[_0x4f52a7(0x464)]({'instanceName':_0x4c7fd3}))[_0x4f52a7(0x2fa)][_0x4f52a7(0x53c)]===_0x4f52a7(0x691))throw new h([_0x4f52a7(0x214),_0x4f52a7(0x499)]);try{return delete this[_0x4f52a7(0x1d8)]['waInstances'][_0x4c7fd3],{'error':!0x1,'message':_0x4f52a7(0x586)};}catch(_0x59e1d1){throw new h(_0x59e1d1[_0x4f52a7(0x28f)]());}}},X=require('class-validator'),$t=class{constructor(_0x2df74f){const _0xf4d34e=a0_0x108f24;this[_0xf4d34e(0x1d8)]=_0x2df74f;}async[a0_0x108f24(0x270)]({instanceName:_0x5d53dd},_0x41eba3){const _0x321133=a0_0x108f24;return await this[_0x321133(0x1d8)]['waInstances'][_0x5d53dd][_0x321133(0x350)](_0x41eba3);}async['sendMenu']({instanceName:_0x4f975f},_0x218860){const _0x4ecd29=a0_0x108f24;return await this['waMonitor'][_0x4ecd29(0x369)][_0x4f975f]['menuMessage'](_0x218860);}async['sendMedia']({instanceName:_0x812780},_0x5266ef){const _0x52d18a=a0_0x108f24;if((0x0,X['isBase64'])(_0x5266ef?.['mediaMessage']?.[_0x52d18a(0x531)])&&!_0x5266ef?.[_0x52d18a(0x28a)]?.[_0x52d18a(0x6ee)])throw new h(_0x52d18a(0x5c8));if((0x0,X[_0x52d18a(0x444)])(_0x5266ef?.[_0x52d18a(0x28a)]?.[_0x52d18a(0x531)])||(0x0,X[_0x52d18a(0x640)])(_0x5266ef?.[_0x52d18a(0x28a)]?.['media']))return await this[_0x52d18a(0x1d8)]['waInstances'][_0x812780][_0x52d18a(0x28a)](_0x5266ef);throw new h(_0x52d18a(0x565));}async['sendSticker']({instanceName:_0x580553},_0x55a53b){const _0x2b4542=a0_0x108f24;if((0x0,X[_0x2b4542(0x444)])(_0x55a53b[_0x2b4542(0x593)][_0x2b4542(0x66a)])||(0x0,X[_0x2b4542(0x640)])(_0x55a53b[_0x2b4542(0x593)][_0x2b4542(0x66a)]))return await this[_0x2b4542(0x1d8)]['waInstances'][_0x580553]['mediaSticker'](_0x55a53b);throw new h(_0x2b4542(0x565));}async[a0_0x108f24(0x433)]({instanceName:_0x9a61da},_0x190e77){const _0xec8d86=a0_0x108f24;if((0x0,X['isURL'])(_0x190e77[_0xec8d86(0x5a3)][_0xec8d86(0x2a9)])||(0x0,X[_0xec8d86(0x640)])(_0x190e77[_0xec8d86(0x5a3)][_0xec8d86(0x2a9)]))return await this[_0xec8d86(0x1d8)][_0xec8d86(0x369)][_0x9a61da][_0xec8d86(0x1c1)](_0x190e77);throw new h(_0xec8d86(0x565));}async['sendButtons']({instanceName:_0x38d004},_0x30394d){const _0xee1142=a0_0x108f24;if((0x0,X[_0xee1142(0x640)])(_0x30394d[_0xee1142(0x74f)][_0xee1142(0x28a)]?.[_0xee1142(0x531)])&&!_0x30394d[_0xee1142(0x74f)][_0xee1142(0x28a)]?.[_0xee1142(0x6ee)])throw new h(_0xee1142(0x5c8));return await this[_0xee1142(0x1d8)][_0xee1142(0x369)][_0x38d004][_0xee1142(0x74f)](_0x30394d);}async[a0_0x108f24(0x5c1)]({instanceName:_0x56ce0c},_0xda8b){const _0x4728be=a0_0x108f24;return await this[_0x4728be(0x1d8)]['waInstances'][_0x56ce0c][_0x4728be(0x7a0)](_0xda8b);}async[a0_0x108f24(0x48b)]({instanceName:_0x1d97f8},_0x2fc5fe){const _0x3ce0ed=a0_0x108f24;return await this[_0x3ce0ed(0x1d8)][_0x3ce0ed(0x369)][_0x1d97f8][_0x3ce0ed(0x49b)](_0x2fc5fe);}async['sendList']({instanceName:_0x5f35bb},_0x1ef1d8){const _0xf077cc=a0_0x108f24;return await this[_0xf077cc(0x1d8)][_0xf077cc(0x369)][_0x5f35bb]['listMessage'](_0x1ef1d8);}async[a0_0x108f24(0x671)]({instanceName:_0x267bdb},_0x3a814f){const _0x557d57=a0_0x108f24;return await this[_0x557d57(0x1d8)][_0x557d57(0x369)][_0x267bdb][_0x557d57(0x699)](_0x3a814f);}async[a0_0x108f24(0x469)]({instanceName:_0x4a4667},_0x29c1ec){const _0x10e7b1=a0_0x108f24;if(!_0x29c1ec[_0x10e7b1(0x4a9)][_0x10e7b1(0x1f5)][_0x10e7b1(0x254)](/[^\(\)\w\sà-ú"-\+]+/))throw new h(_0x10e7b1(0x600));return await this['waMonitor'][_0x10e7b1(0x369)][_0x4a4667]['reactionMessage'](_0x29c1ec);}async['sendStatus']({instanceName:_0x37fee5},_0x2b660b){const _0x4008bc=a0_0x108f24;return await this[_0x4008bc(0x1d8)][_0x4008bc(0x369)][_0x37fee5][_0x4008bc(0x423)](_0x2b660b);}},br=require(a0_0x108f24(0x79a)),Ms=require('uuid'),kt=class c{constructor(_0x2cc913,_0x586f2c,_0x2d2956){const _0xca0012=a0_0x108f24;this['configService']=_0x2cc913,this['waMonitor']=_0x586f2c,this[_0xca0012(0x726)]=_0x2d2956,this[_0xca0012(0x711)]=new v(c[_0xca0012(0x2ec)]);}async[a0_0x108f24(0x2f3)](_0x13f18f){const _0x5909b6=a0_0x108f24;let _0x4b63f7=this[_0x5909b6(0x62b)][_0x5909b6(0x602)](_0x5909b6(0x52d))[_0x5909b6(0x47e)],_0x25e61c=(0x0,br['sign'])({'instanceName':_0x13f18f['instanceName'],'apiName':Ge,'tokenId':(0x0,Ms['v4'])()},_0x4b63f7['SECRET'],{'expiresIn':_0x4b63f7[_0x5909b6(0x7d4)],'encoding':_0x5909b6(0x23b),'subject':_0x5909b6(0x371)}),_0x380db3=await this[_0x5909b6(0x726)][_0x5909b6(0x681)]['create']({'jwt':_0x25e61c},_0x13f18f[_0x5909b6(0x476)]);if(_0x380db3[_0x5909b6(0x2d9)])throw this['logger'][_0x5909b6(0x2d9)]({'localError':c['name']+'.jwt','error':_0x380db3[_0x5909b6(0x2d9)]}),new h(_0x5909b6(0x5e4),_0x380db3[_0x5909b6(0x2d9)]?.[_0x5909b6(0x28f)]());return{'jwt':_0x25e61c};}async[a0_0x108f24(0x4b1)](_0xee47ef){const _0x2f8f42=a0_0x108f24;let _0x5f7a94=(0x0,Ms['v4'])()[_0x2f8f42(0x7f0)](),_0x5a9148=await this[_0x2f8f42(0x726)]['auth'][_0x2f8f42(0x265)]({'apikey':_0x5f7a94},_0xee47ef[_0x2f8f42(0x476)]);if(_0x5a9148[_0x2f8f42(0x2d9)])throw this[_0x2f8f42(0x711)]['error']({'localError':c[_0x2f8f42(0x2ec)]+_0x2f8f42(0x40c),'error':_0x5a9148[_0x2f8f42(0x2d9)]}),new h(_0x2f8f42(0x5e4),_0x5a9148[_0x2f8f42(0x2d9)]?.[_0x2f8f42(0x28f)]());return{'apikey':_0x5f7a94};}async[a0_0x108f24(0x467)](_0xf28c1d){const _0x2bbdbe=a0_0x108f24;let _0x5e7608=this['configService'][_0x2bbdbe(0x602)](_0x2bbdbe(0x52d));return await this[_0x5e7608[_0x2bbdbe(0x1f3)]](_0xf28c1d);}},Lt=class{constructor(_0x515dd2){const _0x425c16=a0_0x108f24;this[_0x425c16(0x1d8)]=_0x515dd2;}async['createGroup'](_0x3b056e,_0x384524){const _0x8df01d=a0_0x108f24;return await this['waMonitor']['waInstances'][_0x3b056e[_0x8df01d(0x476)]]['createGroup'](_0x384524);}async['updateGroupPicture'](_0x1e13c0,_0x2d4f1b){const _0x5e4e76=a0_0x108f24;return await this[_0x5e4e76(0x1d8)][_0x5e4e76(0x369)][_0x1e13c0['instanceName']]['updateGroupPicture'](_0x2d4f1b);}async['groupDesc'](_0x1fc292,_0x263dd5){const _0x4a5a41=a0_0x108f24;return await this[_0x4a5a41(0x1d8)][_0x4a5a41(0x369)][_0x1fc292[_0x4a5a41(0x476)]][_0x4a5a41(0x6b1)](_0x263dd5);}async[a0_0x108f24(0x62c)](_0x1b2b92,_0x5c979a){const _0xd074d6=a0_0x108f24;return await this[_0xd074d6(0x1d8)][_0xd074d6(0x369)][_0x1b2b92[_0xd074d6(0x476)]][_0xd074d6(0x62c)](_0x5c979a);}async['groupSetting'](_0x4e707c,_0x2015b6){const _0x180aa2=a0_0x108f24;return await this[_0x180aa2(0x1d8)]['waInstances'][_0x4e707c[_0x180aa2(0x476)]][_0x180aa2(0x4f1)](_0x2015b6);}async[a0_0x108f24(0x64c)](_0x58c167,_0x574760){const _0x3024c1=a0_0x108f24;return await this[_0x3024c1(0x1d8)][_0x3024c1(0x369)][_0x58c167[_0x3024c1(0x476)]][_0x3024c1(0x25e)](_0x574760);}async[a0_0x108f24(0x30d)](_0x2aecc1){const _0x2a79e8=a0_0x108f24;return await this['waMonitor']['waInstances'][_0x2aecc1[_0x2a79e8(0x476)]][_0x2a79e8(0x30d)]();}async[a0_0x108f24(0x7c4)](_0x57de6f,_0x209a20){const _0x5abe0c=a0_0x108f24;return await this['waMonitor']['waInstances'][_0x57de6f[_0x5abe0c(0x476)]][_0x5abe0c(0x7c4)](_0x209a20);}async[a0_0x108f24(0x75a)](_0x2de329,_0x183de2){const _0x35d83b=a0_0x108f24;return await this[_0x35d83b(0x1d8)][_0x35d83b(0x369)][_0x2de329[_0x35d83b(0x476)]][_0x35d83b(0x75a)](_0x183de2);}async['revokeInviteCode'](_0x59c65a,_0x580bd7){const _0x2b0794=a0_0x108f24;return await this['waMonitor'][_0x2b0794(0x369)][_0x59c65a[_0x2b0794(0x476)]][_0x2b0794(0x5b5)](_0x580bd7);}async[a0_0x108f24(0x362)](_0x1f0c44,_0x33ec9f){const _0x378acd=a0_0x108f24;return await this[_0x378acd(0x1d8)][_0x378acd(0x369)][_0x1f0c44[_0x378acd(0x476)]][_0x378acd(0x362)](_0x33ec9f);}async[a0_0x108f24(0x7d6)](_0x5f4d92,_0x455b94){const _0xdf9db6=a0_0x108f24;return await this['waMonitor'][_0xdf9db6(0x369)][_0x5f4d92[_0xdf9db6(0x476)]][_0xdf9db6(0x7f2)](_0x455b94);}async[a0_0x108f24(0x1ea)](_0x44e1cf,_0x55faf8){const _0xfbd4af=a0_0x108f24;return await this[_0xfbd4af(0x1d8)][_0xfbd4af(0x369)][_0x44e1cf[_0xfbd4af(0x476)]][_0xfbd4af(0x1ea)](_0x55faf8);}async[a0_0x108f24(0x6fd)](_0x41b322,_0x67bb54){const _0x3e9494=a0_0x108f24;return await this['waMonitor'][_0x3e9494(0x369)][_0x41b322[_0x3e9494(0x476)]]['leaveGroup'](_0x67bb54);}},Ft=class{constructor(_0x452257){this['waMonitor']=_0x452257;}[a0_0x108f24(0x265)](_0xbf2d59,_0x5b3adb){const _0x1e767a=a0_0x108f24;return this[_0x1e767a(0x1d8)][_0x1e767a(0x369)][_0xbf2d59[_0x1e767a(0x476)]][_0x1e767a(0x42d)](_0x5b3adb);}async[a0_0x108f24(0x731)](_0x27263b){const _0x594246=a0_0x108f24;try{return await this[_0x594246(0x1d8)][_0x594246(0x369)][_0x27263b['instanceName']][_0x594246(0x5bd)]();}catch{return{'enabled':null,'url':''};}}},Qd=new v('FlowController'),Ut=class{constructor(_0x6b43ad){const _0xffaba1=a0_0x108f24;this[_0xffaba1(0x1d8)]=_0x6b43ad;}async['editScheduleMessage'](_0x6d4b87,_0x57f142){const _0x38ebc5=a0_0x108f24;return await this[_0x38ebc5(0x1d8)][_0x38ebc5(0x369)][_0x6d4b87[_0x38ebc5(0x476)]][_0x38ebc5(0x2b1)](_0x57f142);}async[a0_0x108f24(0x74b)](_0x154e5e){const _0x12ba5a=a0_0x108f24;return await this['waMonitor']['waInstances'][_0x154e5e['instanceName']][_0x12ba5a(0x74b)]();}async[a0_0x108f24(0x242)](_0x51297a){const _0x268c63=a0_0x108f24;return await this[_0x268c63(0x1d8)]['waInstances'][_0x51297a[_0x268c63(0x476)]][_0x268c63(0x242)]();}async[a0_0x108f24(0x553)](_0x427cd0){const _0x2263f7=a0_0x108f24;return await this[_0x2263f7(0x1d8)][_0x2263f7(0x369)][_0x427cd0['instanceName']][_0x2263f7(0x553)]();}async['updateAgent'](_0x3cf54a,_0x5aefa6){const _0x5b2dab=a0_0x108f24;return await this[_0x5b2dab(0x1d8)][_0x5b2dab(0x369)][_0x3cf54a[_0x5b2dab(0x476)]][_0x5b2dab(0x5f8)](_0x5aefa6);}async[a0_0x108f24(0x342)](_0x8ed1d4,_0x166981){const _0x47d85c=a0_0x108f24;return await this[_0x47d85c(0x1d8)][_0x47d85c(0x369)][_0x8ed1d4[_0x47d85c(0x476)]]['updateCustomFields'](_0x166981);}async[a0_0x108f24(0x680)](_0x1b9527,_0x50aed2){const _0x3047c1=a0_0x108f24;return await this[_0x3047c1(0x1d8)][_0x3047c1(0x369)][_0x1b9527['instanceName']][_0x3047c1(0x680)](_0x50aed2);}async[a0_0x108f24(0x62d)](_0x26b4f1,_0xe51529){const _0x18c89b=a0_0x108f24;return await this[_0x18c89b(0x1d8)][_0x18c89b(0x369)][_0x26b4f1[_0x18c89b(0x476)]][_0x18c89b(0x62d)](_0xe51529);}async['getConversation'](_0x1aa247,_0x56fa50){const _0x100c0d=a0_0x108f24;return await this['waMonitor'][_0x100c0d(0x369)][_0x1aa247[_0x100c0d(0x476)]]['getConversation'](_0x56fa50);}async[a0_0x108f24(0x6d4)](_0x3497d5,_0x1492e1){const _0x51fdcd=a0_0x108f24;return await this[_0x51fdcd(0x1d8)][_0x51fdcd(0x369)][_0x3497d5[_0x51fdcd(0x476)]][_0x51fdcd(0x6d4)](_0x1492e1);}async['editConversation'](_0x305c90,_0x17fd85){const _0x351a23=a0_0x108f24;return await this[_0x351a23(0x1d8)][_0x351a23(0x369)][_0x305c90['instanceName']][_0x351a23(0x5a7)](_0x17fd85);}async[a0_0x108f24(0x718)](_0x3b3657,_0x599bcd){const _0x478c4f=a0_0x108f24;return await this[_0x478c4f(0x1d8)][_0x478c4f(0x369)][_0x3b3657['instanceName']]['deleteConversation'](_0x599bcd);}async[a0_0x108f24(0x618)](_0x5bbe8a,_0x395094){const _0x25a94c=a0_0x108f24;return await this[_0x25a94c(0x1d8)][_0x25a94c(0x369)][_0x5bbe8a[_0x25a94c(0x476)]][_0x25a94c(0x618)](_0x395094[_0x25a94c(0x2ec)]);}async['createFlow'](_0x2e2350,_0x576e87){const _0x26f37a=a0_0x108f24;return await this[_0x26f37a(0x1d8)][_0x26f37a(0x369)][_0x2e2350[_0x26f37a(0x476)]][_0x26f37a(0x44f)](_0x576e87);}async[a0_0x108f24(0x509)](_0x21dc0c,_0x78d0d7){const _0x2ccd41=a0_0x108f24;return await this[_0x2ccd41(0x1d8)][_0x2ccd41(0x369)][_0x21dc0c[_0x2ccd41(0x476)]][_0x2ccd41(0x509)](_0x78d0d7);}async['editFlowBlock'](_0x54e696,_0x4b38cd){const _0x340979=a0_0x108f24;return await this[_0x340979(0x1d8)][_0x340979(0x369)][_0x54e696[_0x340979(0x476)]]['editFlowBlock'](_0x4b38cd);}async[a0_0x108f24(0x7d1)](_0x4ca56e,_0x59fe72){const _0x424d02=a0_0x108f24;return await this[_0x424d02(0x1d8)][_0x424d02(0x369)][_0x4ca56e[_0x424d02(0x476)]][_0x424d02(0x7d1)](_0x59fe72);}async['editFlowGroup'](_0x1f4f52,_0x5ad147){const _0x5bac0d=a0_0x108f24;return await this['waMonitor'][_0x5bac0d(0x369)][_0x1f4f52['instanceName']][_0x5bac0d(0x2c3)](_0x5ad147);}async[a0_0x108f24(0x607)](_0x377a07,_0x49be09){const _0x3f8e14=a0_0x108f24;return await this['waMonitor'][_0x3f8e14(0x369)][_0x377a07[_0x3f8e14(0x476)]]['editFlowCondition'](_0x49be09);}async[a0_0x108f24(0x52f)](_0x131b3f,_0x201db4){const _0x353584=a0_0x108f24;return await this[_0x353584(0x1d8)][_0x353584(0x369)][_0x131b3f['instanceName']][_0x353584(0x52f)](_0x201db4);}async['editFlowVariable'](_0x2f2c58,_0x419744){const _0x59242e=a0_0x108f24;return await this['waMonitor'][_0x59242e(0x369)][_0x2f2c58['instanceName']]['editFlowVariable'](_0x419744);}async[a0_0x108f24(0x207)](_0x2b6c6e,_0x42986e){const _0x5f332a=a0_0x108f24;return await this['waMonitor'][_0x5f332a(0x369)][_0x2b6c6e[_0x5f332a(0x476)]][_0x5f332a(0x207)](_0x42986e[_0x5f332a(0x2ec)]);}async[a0_0x108f24(0x2dd)](_0x27e8b9){const _0x279813=a0_0x108f24;return await this[_0x279813(0x1d8)][_0x279813(0x369)][_0x27e8b9[_0x279813(0x476)]]['allFlows']();}},Jt=class{constructor(_0x583fbf){this['webhookService']=_0x583fbf;}async[a0_0x108f24(0x51c)](_0x2fab93,_0x1fd284){const _0x269fd2=a0_0x108f24;return this[_0x269fd2(0x7ce)]['create'](_0x2fab93,_0x1fd284);}async['findWebhook'](_0x49a171){const _0x4dd85e=a0_0x108f24;return this[_0x4dd85e(0x7ce)][_0x4dd85e(0x731)](_0x49a171);}},jt=class extends I{constructor(_0x50f85a,_0x3d6130){const _0x15e6be=a0_0x108f24;super(_0x3d6130),this[_0x15e6be(0x6d1)]=_0x50f85a,this[_0x15e6be(0x62b)]=_0x3d6130;}async[a0_0x108f24(0x265)](_0x57f6bf,_0x2bd19c){const _0x23b2ca=a0_0x108f24;try{return this['dbSettings'][_0x23b2ca(0x22c)]?{'insertCount':(await this[_0x23b2ca(0x6d1)][_0x23b2ca(0x761)]({'_id':_0x2bd19c},{..._0x57f6bf},{'upsert':!0x0}))[_0x23b2ca(0x678)]}:{'insertCount':0x1};}catch(_0x5c996c){return _0x5c996c;}}async[a0_0x108f24(0x714)](_0x5a10c9){const _0x5b91da=a0_0x108f24;try{if(this[_0x5b91da(0x37e)][_0x5b91da(0x22c)]){await this['webhookModel'][_0x5b91da(0x7dd)]({'_id':_0x5a10c9});return;}}catch(_0x469cc4){return{'error':_0x469cc4};}}async[a0_0x108f24(0x731)](_0x2649bc){const _0x5a84e2=a0_0x108f24;try{if(this[_0x5a84e2(0x37e)][_0x5a84e2(0x22c)])return await this['webhookModel']['findOne']({'_id':_0x2649bc});}catch{return{};}}},qt=class extends I{constructor(_0x28f1ca,_0x368c32){const _0x3cb2fb=a0_0x108f24;super(_0x368c32),this[_0x3cb2fb(0x413)]=_0x28f1ca,this['configService']=_0x368c32,this['auth']=_0x368c32[_0x3cb2fb(0x602)](_0x3cb2fb(0x52d));}async[a0_0x108f24(0x265)](_0xa27d33,_0x34e6e2){const _0x44f659=a0_0x108f24;try{if(this['dbSettings'][_0x44f659(0x22c)])return{'insertCount':(await this['authModel'][_0x44f659(0x4c9)]({'_id':_0x34e6e2},{'$set':{..._0xa27d33}},{'upsert':!0x0}))['modifiedCount']};}catch(_0x46f537){return{'error':_0x46f537};}}async[a0_0x108f24(0x5bc)](_0x19c335,_0x55cb23){const _0x3f4cef=a0_0x108f24;try{if(this[_0x3f4cef(0x37e)][_0x3f4cef(0x22c)])return{'insertCount':(await this['authModel'][_0x3f4cef(0x7a3)](_0x19c335,{'$set':_0x55cb23},{'upsert':!0x1}))['modifiedCount']};throw new Error('Database\x20is\x20not\x20enabled');}catch(_0x2a7cad){return{'error':_0x2a7cad};}}async['deleteMany'](_0x42380a){const _0x1dbae4=a0_0x108f24;try{if(this['dbSettings']['ENABLED'])return{'insertCount':(await this[_0x1dbae4(0x413)]['deleteMany'](_0x42380a))[_0x1dbae4(0x799)]};throw new Error(_0x1dbae4(0x72a));}catch(_0x27439a){return{'error':_0x27439a};}}async['delete'](_0x50927c){const _0x4f11e4=a0_0x108f24;try{if(this[_0x4f11e4(0x37e)][_0x4f11e4(0x22c)]){await this[_0x4f11e4(0x413)][_0x4f11e4(0x7dd)]({'_id':_0x50927c});return;}}catch(_0x4a0b6d){return{'error':_0x4a0b6d};}}async[a0_0x108f24(0x731)](_0x55ee8c){const _0x6bb4c3=a0_0x108f24;try{if(this[_0x6bb4c3(0x37e)]['ENABLED'])return await this[_0x6bb4c3(0x413)][_0x6bb4c3(0x624)]({'_id':_0x55ee8c});}catch{return{};}}async[a0_0x108f24(0x68a)](){const _0x3bc9d4=a0_0x108f24;try{if(this[_0x3bc9d4(0x37e)][_0x3bc9d4(0x22c)])return await this[_0x3bc9d4(0x413)][_0x3bc9d4(0x731)]();}catch{return[];}}},Vt=class extends I{[a0_0x108f24(0x4a0)](_0x246ec9){return Zs(_0x246ec9);}async[a0_0x108f24(0x6fb)](_0x3eff13){const _0x10b841=a0_0x108f24;try{let _0x1f48bd=ea,_0x22ee73=this[_0x10b841(0x4a0)](_0x3eff13),_0x586b54=await _0x1f48bd[_0x10b841(0x731)]({'owner':_0x3eff13})[_0x10b841(0x4dd)](),_0x2bddad=[],_0x3667b5=[];for(let _0x2df2cb of _0x586b54)await _0x22ee73[_0x10b841(0x47f)](_0x2df2cb[_0x10b841(0x5ee)])[_0x10b841(0x4dd)]()||(_0x2bddad[_0x10b841(0x1d0)](_0x2df2cb),_0x3667b5[_0x10b841(0x1d0)](_0x2df2cb['_id']));return _0x2bddad[_0x10b841(0x231)]>0x0&&await _0x22ee73[_0x10b841(0x42c)](_0x2bddad,{'ordered':!0x1}),{'success':!0x0};}catch(_0x5e2607){return console[_0x10b841(0x2d9)](_0x10b841(0x7d0),_0x5e2607),{'success':!0x1,'error':_0x5e2607};}}async[a0_0x108f24(0x714)](_0x22dea6,_0x2d7cce){const _0x2ce6b2=a0_0x108f24;try{let _0x51ed60=this[_0x2ce6b2(0x4a0)](_0x2d7cce),_0x5bf242=T(_0x22dea6['where']);return{'deletedCount':(await _0x51ed60[_0x2ce6b2(0x34a)](_0x5bf242))[_0x2ce6b2(0x799)]};}catch(_0x478527){return{'error':_0x478527?.[_0x2ce6b2(0x28f)]()};}}async[a0_0x108f24(0x7dd)](_0x115b12,_0x530759){const _0x36a022=a0_0x108f24;try{let _0x26ba5d=this[_0x36a022(0x4a0)](_0x530759),_0x82fe86=T(_0x115b12[_0x36a022(0x32e)]);return{'deletedCount':(await _0x26ba5d[_0x36a022(0x7dd)](_0x82fe86))[_0x36a022(0x799)]};}catch(_0x44aa57){return{'error':_0x44aa57?.[_0x36a022(0x28f)]()};}}async[a0_0x108f24(0x4c9)](_0x2d0e4a,_0x45ac0a,_0xb31b70){const _0x529379=a0_0x108f24;try{return await this[_0x529379(0x4a0)](_0xb31b70)['findByIdAndUpdate'](_0x2d0e4a,_0x45ac0a,{'new':!0x0});}catch(_0x30548b){return console[_0x529379(0x2d9)](_0x529379(0x6b4),_0x30548b),null;}}async[a0_0x108f24(0x282)](_0x1f50c8,_0x2af3cc){const _0x2a662e=a0_0x108f24;try{let _0x551ec6=this[_0x2a662e(0x4a0)](_0x2af3cc);return await new _0x551ec6(_0x1f50c8)[_0x2a662e(0x608)]();}catch(_0x3e0c11){return console[_0x2a662e(0x2d9)](_0x2a662e(0x1ca),_0x3e0c11),null;}}async[a0_0x108f24(0x7a3)](_0x5f1b69,_0x2e26fd,_0x122566){const _0x4855db=a0_0x108f24;try{return{'modifiedCount':(await this[_0x4855db(0x4a0)](_0x122566)[_0x4855db(0x7a3)](_0x5f1b69,{'$set':_0x2e26fd}))['modifiedCount']};}catch(_0x4548da){return console[_0x4855db(0x2d9)](_0x4855db(0x5de),_0x4548da),{'error':_0x4548da};}}async['findAll'](_0x3fa472,_0xbee316){const _0x354809=a0_0x108f24;try{let _0x4e6127=this[_0x354809(0x4a0)](_0xbee316),_0x3248a8=T(_0x3fa472[_0x354809(0x32e)]);return await _0x4e6127[_0x354809(0x731)](_0x3248a8)['limit'](_0x3fa472?.['limit']??0x0)[_0x354809(0x4dd)]();}catch{return[];}}async[a0_0x108f24(0x624)](_0x17c4f8,_0x59d270){const _0x16a645=a0_0x108f24;try{let _0xcb8ff7=this[_0x16a645(0x4a0)](_0x59d270),_0x2b02b6=T(_0x17c4f8[_0x16a645(0x32e)]);return await _0xcb8ff7[_0x16a645(0x624)](_0x2b02b6)['lean']();}catch{return null;}}async[a0_0x108f24(0x358)](_0x3ea66f){const _0x23e3e3=a0_0x108f24;try{return await this[_0x23e3e3(0x4a0)](_0x3ea66f)[_0x23e3e3(0x3d2)]['drop'](),{'success':!0x0};}catch(_0x3380d7){return console[_0x23e3e3(0x2d9)](_0x3380d7),{'success':!0x1,'error':_0x3380d7};}}},Bt=class extends I{['getConversationModelForOwner'](_0x4a3975){return sa(_0x4a3975);}async[a0_0x108f24(0x6fb)](_0x3f3bd1){const _0x35a996=a0_0x108f24;try{let _0x3c0f2d=aa,_0x4fee61=this[_0x35a996(0x760)](_0x3f3bd1),_0x25b139=await _0x3c0f2d['find']({'owner':_0x3f3bd1})[_0x35a996(0x4dd)](),_0x118945=[],_0x30d5f0=[];for(let _0x3df37b of _0x25b139)await _0x4fee61[_0x35a996(0x47f)](_0x3df37b[_0x35a996(0x5ee)])[_0x35a996(0x4dd)]()||(_0x118945['push'](_0x3df37b),_0x30d5f0['push'](_0x3df37b[_0x35a996(0x5ee)]));return _0x118945['length']>0x0&&await _0x4fee61[_0x35a996(0x42c)](_0x118945,{'ordered':!0x1}),{'success':!0x0};}catch(_0x43c11c){return console[_0x35a996(0x2d9)](_0x35a996(0x7d0),_0x43c11c),{'success':!0x1,'error':_0x43c11c};}}async['insert'](_0x38a9ec){const _0x201699=a0_0x108f24;if(_0x38a9ec[_0x201699(0x231)]!==0x0)try{return{'insertCount':(await this[_0x201699(0x760)](_0x38a9ec[0x0][_0x201699(0x6e8)])[_0x201699(0x42c)]([..._0x38a9ec]))['length']};}catch(_0x352c8e){return _0x352c8e;}}async[a0_0x108f24(0x714)](_0x3e56ec,_0x238810){const _0x478923=a0_0x108f24;try{let _0x3d3478=this['getConversationModelForOwner'](_0x238810),_0x57c6f3=T(_0x3e56ec[_0x478923(0x32e)]);return{'deletedCount':(await _0x3d3478[_0x478923(0x34a)](_0x57c6f3))[_0x478923(0x799)]};}catch(_0xb01302){return{'error':_0xb01302?.[_0x478923(0x28f)]()};}}async[a0_0x108f24(0x7dd)](_0x387888,_0x4a7565){const _0x3f8968=a0_0x108f24;try{let _0x36c567=this[_0x3f8968(0x760)](_0x4a7565),_0x39a1c2=T(_0x387888[_0x3f8968(0x32e)]);return{'deletedCount':(await _0x36c567['deleteOne'](_0x39a1c2))[_0x3f8968(0x799)]};}catch(_0x452153){return{'error':_0x452153?.[_0x3f8968(0x28f)]()};}}async[a0_0x108f24(0x635)](_0xdb404b,_0x3bd9d5){const _0x474641=a0_0x108f24;try{if(_0xdb404b[_0x474641(0x231)]===0x0)return;let _0x689079=this['getConversationModelForOwner'](_0x3bd9d5),_0x49ad1e=_0xdb404b[_0x474641(0x49e)](_0x240817=>({'updateOne':{'filter':{'name':_0x240817['name'],'owner':_0x3bd9d5},'update':{..._0x240817}}})),{modifiedCount:_0x3e170b}=await _0x689079['bulkWrite'](_0x49ad1e);return{'insertCount':_0x3e170b};}catch{return;}}async[a0_0x108f24(0x7a3)](_0x4c8b4b,_0x6d7085,_0x24005e){const _0x50a79f=a0_0x108f24;try{return{'modifiedCount':(await this[_0x50a79f(0x760)](_0x24005e)['updateMany'](_0x4c8b4b,{'$set':_0x6d7085}))[_0x50a79f(0x678)]};}catch(_0x5de415){return console[_0x50a79f(0x2d9)](_0x50a79f(0x23d),_0x5de415),{'error':_0x5de415};}}async[a0_0x108f24(0x4c9)](_0x4ffcea,_0x2d8bc4,_0x2a60a0){const _0x477b31=a0_0x108f24;try{return await this[_0x477b31(0x760)](_0x2a60a0)[_0x477b31(0x228)]({'_id':_0x4ffcea},{'$set':_0x2d8bc4},{'new':!0x0,'upsert':!0x0})[_0x477b31(0x4dd)]();}catch(_0x1f9964){return console[_0x477b31(0x2d9)](_0x1f9964),null;}}async[a0_0x108f24(0x731)](_0x3478ae,_0x19438d){const _0x190aeb=a0_0x108f24;try{let _0x598ce6=this[_0x190aeb(0x760)](_0x19438d),_0x588577=T(_0x3478ae[_0x190aeb(0x32e)]);return await _0x598ce6[_0x190aeb(0x731)](_0x588577)[_0x190aeb(0x239)](_0x3478ae?.['limit']??0x0)[_0x190aeb(0x223)]({'lastInteraction':-0x1})[_0x190aeb(0x4dd)]();}catch{return[];}}async[a0_0x108f24(0x624)](_0x31ede4,_0x5a9500){const _0x31a449=a0_0x108f24;try{return await this[_0x31a449(0x760)](_0x5a9500)[_0x31a449(0x624)]({..._0x31ede4[_0x31a449(0x32e)]})[_0x31a449(0x4dd)]();}catch{return null;}}async['deleteAll'](_0x16c3e7){const _0x3a8dd7=a0_0x108f24;try{return await this[_0x3a8dd7(0x760)](_0x16c3e7)[_0x3a8dd7(0x3d2)][_0x3a8dd7(0x5e9)](),{'success':!0x0};}catch(_0x29078b){return console['error'](_0x29078b),{'success':!0x1,'error':_0x29078b};}}},Gt=class extends I{['getScheduleMessageModelForOwner'](_0x6a720e){return oa(_0x6a720e);}async[a0_0x108f24(0x6fb)](_0x4a3bc7){const _0x1483b2=a0_0x108f24;try{let _0x935c1f=ia,_0x2be564=this['getScheduleMessageModelForOwner'](_0x4a3bc7),_0x1b8af6=await _0x935c1f[_0x1483b2(0x731)]({'owner':_0x4a3bc7})['lean'](),_0x44b346=[],_0x160202=[];for(let _0xc4d958 of _0x1b8af6)await _0x2be564[_0x1483b2(0x47f)](_0xc4d958[_0x1483b2(0x5ee)])[_0x1483b2(0x4dd)]()||(_0x44b346[_0x1483b2(0x1d0)](_0xc4d958),_0x160202[_0x1483b2(0x1d0)](_0xc4d958[_0x1483b2(0x5ee)]));return _0x44b346[_0x1483b2(0x231)]>0x0&&await _0x2be564[_0x1483b2(0x42c)](_0x44b346,{'ordered':!0x1}),{'success':!0x0};}catch(_0x5e4401){return console['error'](_0x1483b2(0x7d0),_0x5e4401),{'success':!0x1,'error':_0x5e4401};}}async['createAndSave'](_0x105d8e,_0x495b82){const _0x488954=a0_0x108f24;try{let _0x214240=this[_0x488954(0x3e3)](_0x495b82);return await new _0x214240(_0x105d8e)[_0x488954(0x608)]();}catch(_0x35ad1d){return console[_0x488954(0x2d9)](_0x488954(0x1ca),_0x35ad1d),null;}}async[a0_0x108f24(0x7dd)](_0x501e9b,_0xb94da0){try{return await this['getScheduleMessageModelForOwner'](_0xb94da0)['findByIdAndDelete'](_0x501e9b),{};}catch(_0x3a9a73){return{'error':_0x3a9a73?.['toString']()};}}async[a0_0x108f24(0x4c9)](_0x26cbe5,_0x4e2781,_0x10c6d2){const _0x3490ea=a0_0x108f24;try{return await this[_0x3490ea(0x3e3)](_0x10c6d2)['findOneAndUpdate'](_0x26cbe5,{'$set':_0x4e2781})[_0x3490ea(0x4dd)]();}catch(_0x588480){return console[_0x3490ea(0x2d9)]('Erro\x20ao\x20atualizar\x20uma\x20mensagem:',_0x588480),null;}}async[a0_0x108f24(0x4ab)](_0x11ff19,_0x38404f,_0x315c83){const _0x50fb65=a0_0x108f24;try{return await this[_0x50fb65(0x3e3)](_0x315c83)[_0x50fb65(0x751)](_0x11ff19,{'$set':_0x38404f})[_0x50fb65(0x4dd)]();}catch(_0x1646fb){return console[_0x50fb65(0x2d9)](_0x50fb65(0x617),_0x1646fb),null;}}async['find'](_0x26a253,_0x5121f7){const _0x29e81a=a0_0x108f24;try{let _0x529a5a=this[_0x29e81a(0x3e3)](_0x5121f7),_0x35f299=T(_0x26a253['where']);return await _0x529a5a[_0x29e81a(0x731)](_0x35f299)[_0x29e81a(0x239)](_0x26a253?.[_0x29e81a(0x239)]??0x0)[_0x29e81a(0x223)]({'when':0x1})[_0x29e81a(0x4dd)]();}catch{return[];}}async[a0_0x108f24(0x624)](_0x5248ae,_0x105a22){const _0x4a441b=a0_0x108f24;try{let _0x1e8ad5=this[_0x4a441b(0x3e3)](_0x105a22),_0x4935cd=T(_0x5248ae[_0x4a441b(0x32e)]);return await _0x1e8ad5['findOne'](_0x4935cd)['sort']({'when':0x1})[_0x4a441b(0x4dd)]();}catch{return null;}}async[a0_0x108f24(0x47f)](_0x5916ee,_0x2e5c18){const _0x14fe6f=a0_0x108f24;try{return await this[_0x14fe6f(0x3e3)](_0x2e5c18)['findById'](_0x5916ee)[_0x14fe6f(0x4dd)]();}catch{return null;}}async[a0_0x108f24(0x34a)](_0x3f2fd,_0x1287dd){const _0x5740f4=a0_0x108f24;try{return{'deletedCount':(await this['getScheduleMessageModelForOwner'](_0x1287dd)[_0x5740f4(0x34a)](_0x3f2fd))[_0x5740f4(0x799)]};}catch(_0xaced36){return console[_0x5740f4(0x2d9)](_0x5740f4(0x47d),_0xaced36),{'error':_0xaced36};}}async[a0_0x108f24(0x358)](_0xc44d5d){const _0x1c2766=a0_0x108f24;try{return await this[_0x1c2766(0x3e3)](_0xc44d5d)[_0x1c2766(0x3d2)][_0x1c2766(0x5e9)](),{'success':!0x0};}catch(_0x1ce9ca){return console[_0x1c2766(0x2d9)](_0x1ce9ca),{'success':!0x1,'error':_0x1ce9ca};}}},Wt=class extends I{async[a0_0x108f24(0x635)](_0x42cccc,_0xa7de44){const _0xb65496=a0_0x108f24;try{if(this[_0xb65496(0x37e)][_0xb65496(0x22c)]){let _0xd2a0d3=await xe[_0xb65496(0x228)]({'_id':_0xa7de44},{'$set':_0x42cccc},{'new':!0x0});return console[_0xb65496(0x472)]('Resultado\x20da\x20atualização:',_0xd2a0d3),_0xd2a0d3;}}catch(_0x3d749b){throw console[_0xb65496(0x2d9)](_0xb65496(0x4a8),_0x3d749b),_0x3d749b;}}async[a0_0x108f24(0x43d)](_0x35ac43){const _0x4feaae=a0_0x108f24;try{let _0xd26dec=await xe[_0x4feaae(0x47f)](_0x35ac43);return _0xd26dec||(_0xd26dec=new xe({'_id':_0x35ac43}),await _0xd26dec[_0x4feaae(0x608)]()),_0xd26dec;}catch(_0x490fd3){return console[_0x4feaae(0x2d9)](_0x4feaae(0x6e0),_0x490fd3),null;}}},fo=new v('WA\x20MODULE'),yo=new $e(b),wo=new Dt(b),bo=new He(b),So=new jt(Hs,b),Eo=new qt(Gs,b),Co=new Vt(b),Mo=new xt(b),vo=new Bt(b),No=new Gt(b),Ro=new Wt(b),ne=new _e(yo,wo,bo,So,Eo,Co,vo,Mo,No,Ro,N?.[a0_0x108f24(0x5b9)]()),V=new It(Yt,b,ne),To=new kt(b,V,ne),Ao=new Ft(V),us=new Jt(Ao),A=new Ut(V),ae=new Pt(V,b,ne,Yt,To),B=new $t(V),D=new _t(V),U=new Lt(V);fo[a0_0x108f24(0x7a9)](a0_0x108f24(0x2a8));function a0_0x57b5(_0x3bc6dc,_0x1d3bbe){const _0x1b73e3=a0_0x1b73();return a0_0x57b5=function(_0x57b525,_0x1bd4d8){_0x57b525=_0x57b525-0x1bd;let _0x236920=_0x1b73e3[_0x57b525];return _0x236920;},a0_0x57b5(_0x3bc6dc,_0x1d3bbe);}var gg=require(a0_0x108f24(0x32a)),vs=require('fs'),Sr=R(require('https')),Er=R(require(a0_0x108f24(0x435))),Ce=class c{static #e;static set['app'](_0x475497){this.#e=_0x475497;}static get[a0_0x108f24(0x578)](){const _0x276aab=a0_0x108f24;let {FULLCHAIN:_0x547c6d,PRIVKEY:_0x32e254}=b[_0x276aab(0x602)]('SSL_CONF');return Sr[_0x276aab(0x1dd)]({'cert':(0x0,vs['readFileSync'])(_0x547c6d),'key':(0x0,vs[_0x276aab(0x3cc)])(_0x32e254)},c.#e);}static get['http'](){const _0x19ddf5=a0_0x108f24;return Er[_0x19ddf5(0x1dd)](c.#e);}},le=R(require('fs')),Tr=R(require(a0_0x108f24(0x28c))),Me=R(require(a0_0x108f24(0x35d))),Ne=R(require(a0_0x108f24(0x3a6))),Re=require(a0_0x108f24(0x770));function Oo(){const _0x33aab8=a0_0x108f24;V[_0x33aab8(0x612)]();let _0x538ad1=Ne[_0x33aab8(0x543)]['join'](__dirname,_0x33aab8(0x66f));Rr(_0x538ad1);}var Rr=_0x161d55=>{const _0x2809fc=a0_0x108f24;let _0x363992=le[_0x2809fc(0x543)]['readdirSync'](_0x161d55),_0x6c47ba=0xc*0x3c*0x3c*0x3e8,_0x3a6ec8=0x2*0x3c*0x3c*0x3e8,_0x5255ce=new Date()['getTime']();_0x363992[_0x2809fc(0x2ab)](_0x59d8e2=>{const _0xb74ea1=_0x2809fc;let _0x399bbf=Ne['default'][_0xb74ea1(0x631)](_0x161d55,_0x59d8e2),_0x291483=le['default'][_0xb74ea1(0x1f0)](_0x399bbf)[_0xb74ea1(0x21e)][_0xb74ea1(0x644)]();_0x5255ce-_0x291483>_0x6c47ba&&(le[_0xb74ea1(0x543)][_0xb74ea1(0x4b8)](_0x399bbf),console[_0xb74ea1(0x472)]('Deleted\x20'+_0x59d8e2));}),setTimeout(()=>Rr(_0x161d55),_0x3a6ec8);};function Io(){const _0x4ad5e1=a0_0x108f24;let _0x12223c=new v('SERVER'),_0x109d85=(0x0,ue[_0x4ad5e1(0x543)])();_0x109d85[_0x4ad5e1(0x803)]((0x0,Nr['default'])({'origin'(_0x208f08,_0x4a2aa8){const _0x1af712=_0x4ad5e1;let {ORIGIN:_0x584b84}=b[_0x1af712(0x602)](_0x1af712(0x359));return _0x208f08||(_0x208f08='*'),_0x584b84[_0x1af712(0x3cb)]('*')!==-0x1||_0x584b84[_0x1af712(0x3cb)](_0x208f08)!==-0x1?_0x4a2aa8(null,!0x0):_0x4a2aa8(new Error(_0x1af712(0x6ba)));},'methods':[...b[_0x4ad5e1(0x602)](_0x4ad5e1(0x359))[_0x4ad5e1(0x641)]],'credentials':b[_0x4ad5e1(0x602)]('CORS')[_0x4ad5e1(0x2be)]}),(0x0,ue['urlencoded'])({'extended':!0x0,'limit':_0x4ad5e1(0x5c6)}),(0x0,ue[_0x4ad5e1(0x318)])({'limit':_0x4ad5e1(0x5c6)})),_0x109d85['use']((_0x241671,_0x409154,_0x10df28)=>{const _0xe25126=_0x4ad5e1;_0x241671[_0xe25126(0x3a6)][_0xe25126(0x418)](_0xe25126(0x55f))?_0x10df28():(0x0,vr[_0xe25126(0x543)])()(_0x241671,_0x409154,_0x10df28);}),_0x109d85[_0x4ad5e1(0x3e2)]('view\x20engine',_0x4ad5e1(0x663)),_0x109d85[_0x4ad5e1(0x3e2)](_0x4ad5e1(0x443),(0x0,Rs[_0x4ad5e1(0x631)])(se,_0x4ad5e1(0x443))),_0x109d85[_0x4ad5e1(0x803)](ue[_0x4ad5e1(0x543)][_0x4ad5e1(0x213)]((0x0,Rs[_0x4ad5e1(0x631)])(se,_0x4ad5e1(0x504)))),_0x109d85[_0x4ad5e1(0x803)]((_0x3d22d3,_0x32af17,_0x100399)=>{const _0x346f00=_0x4ad5e1;let _0x46c139=_0x32af17[_0x346f00(0x564)];_0x32af17[_0x346f00(0x564)]=function(_0x3e1126){const _0x108278=_0x346f00;if(_0x3d22d3[_0x108278(0x63f)][_0x108278(0x25b)]===_0x108278(0x2b2)||_0x3d22d3[_0x108278(0x3f8)][_0x108278(0x3a9)]===_0x108278(0x2b2)){let _0xca9ca8=JSON[_0x108278(0x6aa)](_0x3e1126);_0x3e1126=JSON[_0x108278(0x35b)](_0x3daa56(_0xca9ca8));}return _0x46c139[_0x108278(0x36a)](_0x32af17,[_0x3e1126]);},_0x100399();}),_0x109d85['use']('/',Ct),_0x109d85[_0x4ad5e1(0x803)]((_0x333666,_0x25ffc4,_0x8849ac,_0x545973)=>{const _0x43b1b8=_0x4ad5e1;if(_0x333666)return _0x8849ac[_0x43b1b8(0x60e)](_0x333666[_0x43b1b8(0x60e)]||0x1f4)[_0x43b1b8(0x318)](_0x333666);},(_0x5c6ac0,_0x352d34,_0x3efbb7)=>{const _0x58ffc5=_0x4ad5e1;let {method:_0x2183a1,url:_0x54ab26}=_0x5c6ac0;_0x352d34[_0x58ffc5(0x60e)](0x194)[_0x58ffc5(0x318)]({'status':0x194,'message':_0x58ffc5(0x2e6)+_0x2183a1[_0x58ffc5(0x7f0)]()+'\x20'+_0x54ab26,'error':_0x58ffc5(0x264)}),_0x3efbb7();});let _0x3daa56=(_0x8645ef,_0x4bda02='_p_')=>{const _0x38c490=_0x4ad5e1;let _0x335330=(_0x3cfa3f,_0x59a2a6=null,_0x3d2b50=!0x1)=>{let _0x5f5375={};return Object['keys'](_0x3cfa3f)['forEach'](_0x3f4533=>{const _0x1cba9a=a0_0x57b5;let _0x420535=_0x3cfa3f[_0x3f4533],_0xee08a9=''+_0x4bda02+_0x3f4533;_0x59a2a6&&!_0x3d2b50&&(_0xee08a9=_0x59a2a6+'.'+_0x3f4533),!_0x420535&&_0x420535!==0x0&&_0x420535!==!0x1||typeof _0x420535>'u'?_0x5f5375[_0xee08a9]=null:typeof _0x420535!=_0x1cba9a(0x252)&&!Array[_0x1cba9a(0x47c)](_0x420535)?_0x5f5375[_0xee08a9]=_0x420535:typeof _0x420535==_0x1cba9a(0x252)&&!Array[_0x1cba9a(0x47c)](_0x420535)?_0x5f5375=Object[_0x1cba9a(0x592)](_0x5f5375,_0x335330(_0x420535,_0xee08a9)):Array['isArray'](_0x420535)&&(typeof _0x420535[0x0]==_0x1cba9a(0x252)?(_0x5f5375[_0xee08a9]=[],_0x420535[_0x1cba9a(0x2ab)](_0x5956d5=>{const _0x2e4fff=_0x1cba9a;_0x5f5375[_0xee08a9][_0x2e4fff(0x1d0)](_0x335330(_0x5956d5,_0xee08a9,!0x0));})):_0x5f5375[_0xee08a9]=_0x420535);}),_0x5f5375;};return Array['isArray'](_0x8645ef)?_0x8645ef[_0x38c490(0x49e)](_0x1d06d4=>_0x335330(_0x1d06d4)):typeof _0x8645ef==_0x38c490(0x252)&&_0x8645ef!==null?_0x335330(_0x8645ef):{};},_0x561c96=b[_0x4ad5e1(0x602)](_0x4ad5e1(0x6ed));Ce[_0x4ad5e1(0x658)]=_0x109d85;let _0x355bbc=Ce[_0x561c96[_0x4ad5e1(0x1f3)]],_0x6197bd=_0x4ad5e1(0x31f);_0x355bbc[_0x4ad5e1(0x6f5)](_0x561c96[_0x4ad5e1(0x3e8)],()=>{const _0xaedf77=_0x4ad5e1;_0x12223c['log'](_0x6197bd),_0x12223c[_0xaedf77(0x472)](_0x561c96[_0xaedf77(0x1f3)][_0xaedf77(0x7f0)]()+_0xaedf77(0x654)+_0x561c96[_0xaedf77(0x3e8)]);}),Oo(),Ls();}var Do=a0_0x108f24(0x746),xo=Ne[a0_0x108f24(0x543)][a0_0x108f24(0x631)](__dirname,'./.git/config'),ve=null;function _o(){return new Promise((_0x109a4a,_0xc9bfbd)=>{const _0x4e6d96=a0_0x57b5;le[_0x4e6d96(0x543)][_0x4e6d96(0x338)](xo,'utf-8',(_0x295c41,_0x5dd920)=>{const _0x549752=_0x4e6d96;if(_0x295c41){ve=_0x295c41,_0x109a4a();return;}Tr[_0x549752(0x543)][_0x549752(0x6aa)](_0x5dd920)['remote\x20\x22origin\x22'][_0x549752(0x62a)]===Do?(ve=null,_0x109a4a()):(ve=new Error(_0x549752(0x3d8)),_0x109a4a());});});}async function Po(){const _0x46d176=a0_0x108f24;try{await _o(),await Ts();}catch(_0x55d35b){console[_0x46d176(0x2d9)](_0x46d176(0x2bd)+_0x55d35b),process[_0x46d176(0x365)](0x1);}}Po();async function Ar(){const _0x27592a=a0_0x108f24;let _0x5716d8;try{_0x5716d8=(await Me[_0x27592a(0x543)]['get'](_0x27592a(0x1db)))['data']['ip'];}catch(_0x133c25){console[_0x27592a(0x2d9)](_0x133c25);try{_0x5716d8=(await Me[_0x27592a(0x543)][_0x27592a(0x602)]('https://api.ipify.org?format=json'))[_0x27592a(0x3b7)]['ip'];}catch(_0x5b5906){console[_0x27592a(0x2d9)](_0x5b5906);try{_0x5716d8=(await Me[_0x27592a(0x543)][_0x27592a(0x602)](_0x27592a(0x26c)))[_0x27592a(0x3b7)][_0x27592a(0x254)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x3449c1){return console['error'](_0x3449c1),!0x1;}}}return _0x5716d8;}var Cr=0x0;async function $o(){const _0x585fdb=a0_0x108f24;let _0x2cd5fb=await new re(b[_0x585fdb(0x602)](_0x585fdb(0x348)))[_0x585fdb(0x31d)]();return console['log'](_0x585fdb(0x1d9),_0x2cd5fb[_0x585fdb(0x231)]),_0x2cd5fb[_0x585fdb(0x231)];}function ko(_0x26a992){const _0x162eda=a0_0x108f24;let _0x4cd83d=_0x26a992[_0x162eda(0x602)](_0x162eda(0x6ed))[_0x162eda(0x353)],_0x3030cc=_0x26a992[_0x162eda(0x602)](_0x162eda(0x4d2)),_0x3da0d9;if(_0x4cd83d){let _0x4d6fbd=_0x4cd83d[_0x162eda(0x254)](/\/\/(.*?)\./);_0x4d6fbd&&_0x4d6fbd[0x1]&&(_0x3da0d9=_0x4d6fbd[0x1]);}if(!_0x3da0d9&&_0x3030cc&&_0x3030cc[_0x162eda(0x78d)]){let _0x824415=_0x3030cc[_0x162eda(0x78d)][_0x162eda(0x5ac)]('/'),_0x2578b1=_0x824415[_0x824415[_0x162eda(0x231)]-0x2];if(_0x2578b1){let _0x4e5f49=_0x2578b1[_0x162eda(0x5ac)]('.');_0x4e5f49['length']>0x2&&(_0x3da0d9=_0x4e5f49[0x0]);}}return _0x3da0d9;}var Es=ko(b);async function Lo(){const _0x5159fa=a0_0x108f24;let _0x51f9dc=b[_0x5159fa(0x602)]('REDIS'),_0x221e4f=b[_0x5159fa(0x602)](_0x5159fa(0x52d))['API_KEY'][_0x5159fa(0x708)],_0x5094a3=b[_0x5159fa(0x602)](_0x5159fa(0x4d2)),_0x369d7d=await Ar(),_0x44eb96=b['get'](_0x5159fa(0x6ed))[_0x5159fa(0x3e8)],_0x896ff6=b[_0x5159fa(0x602)]('SERVER')['URL'];try{let _0x599d12={'ip':_0x369d7d||null,'redis_enable':_0x51f9dc?.[_0x5159fa(0x22c)]||null,'apikey':_0x221e4f||null,'ssl':_0x5094a3?.[_0x5159fa(0x52e)]||null,'lastupdate':Or||null,'port':_0x44eb96||null,'gitInstallError':ve?.[_0x5159fa(0x58c)]||null,'url':_0x896ff6||null};if(console[_0x5159fa(0x472)](_0x5159fa(0x6dc),_0x599d12['ip']),_0x51f9dc&&_0x51f9dc[_0x5159fa(0x22c)]){let _0x3c9d7a=await $o();_0x599d12[_0x5159fa(0x66c)]=_0x3c9d7a||null;}for(let _0x41a465 in _0x599d12)_0x599d12[_0x5159fa(0x552)](_0x41a465)&&_0x41a465!=='ip'&&(_0x599d12[_0x41a465]=JSON[_0x5159fa(0x35b)](_0x599d12[_0x41a465]));return(await Me[_0x5159fa(0x543)]['post'](_0x5159fa(0x37b),_0x599d12))[_0x5159fa(0x3b7)];}catch(_0x2d9d80){return console[_0x5159fa(0x2d9)](_0x2d9d80),!0x1;}}var Ns=!0x1,Or=0x21c,Fo=0x3,Mr=0x1b7740;async function Ts(){const _0x167e88=a0_0x108f24;if(!await Ar())return console[_0x167e88(0x2d9)]('Não\x20foi\x20possível\x20obter\x20o\x20endereço\x20IP,\x20interrompendo\x20a\x20aplicação.'),_0x167e88(0x6bd);let _0x378894=await Lo();if(_0x378894){if(_0x378894[_0x167e88(0x59c)][_0x167e88(0x2a0)]===!0x0){b['get'](_0x167e88(0x4d2))['PRIVKEY']['includes'](_0x167e88(0x801))&&_0x378894[_0x167e88(0x59c)][_0x167e88(0x518)]&&(await jo(_0x378894['response']['subdomain'],Jo),await qo(_0x167e88(0x1df),_0x378894['response']['subdomain']),console[_0x167e88(0x472)](_0x167e88(0x5da)),setTimeout(()=>Bo(),0x2710)),ve===null&&_0x378894['response']['last_update']-Or>0x0&&await Uo(),Ns||(Ns=!0x0,Io());let _0x5edf21=0x24*0x3c*0x3c,_0x166eba=_0x378894[_0x167e88(0x59c)][_0x167e88(0x692)]>_0x5edf21?_0x5edf21:_0x378894[_0x167e88(0x59c)][_0x167e88(0x692)],_0x31eea3=Number(_0x166eba);if(isNaN(_0x31eea3)){console[_0x167e88(0x2d9)](_0x167e88(0x7b5));return;}let _0x2902f0=Math[_0x167e88(0x391)](_0x31eea3/0xe10),_0x49f3f0=Math[_0x167e88(0x391)](_0x31eea3%0xe10/0x3c),_0x3a50bc=new Date(Date[_0x167e88(0x7e2)]()+_0x31eea3*0x3e8);setTimeout(Ts,_0x31eea3*0x3e8);let _0x38b2e8=_0x858153=>_0x858153[_0x167e88(0x28f)]()[_0x167e88(0x5d4)](0x2,'0'),_0x34d020=_0x167e88(0x2fd)+_0x38b2e8(_0x2902f0)+_0x167e88(0x3c7)+_0x38b2e8(_0x49f3f0)+_0x167e88(0x6fe)+_0x38b2e8(_0x3a50bc[_0x167e88(0x208)]())+':'+_0x38b2e8(_0x3a50bc[_0x167e88(0x78f)]())+'.';console[_0x167e88(0x472)](_0x34d020);}else return console[_0x167e88(0x472)](_0x167e88(0x702)),Ns&&(console[_0x167e88(0x472)]('A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.'),process[_0x167e88(0x365)]()),_0x167e88(0x777);}else{if(Cr++,Cr<Fo)console[_0x167e88(0x472)]('Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20'+Mr/0xea60+_0x167e88(0x6c0)),setTimeout(Ts,Mr);else return console['error'](_0x167e88(0x7df)),_0x167e88(0x582);}}async function Uo(){const _0x4b4eb0=a0_0x108f24;console[_0x4b4eb0(0x472)](_0x4b4eb0(0x2ff));let _0x2a9d84=(0x0,Re['spawn'])(_0x4b4eb0(0x741),{'shell':!0x0});_0x2a9d84[_0x4b4eb0(0x313)]['on']('data',_0x3b34ab=>{const _0x50de42=_0x4b4eb0;console[_0x50de42(0x472)](_0x50de42(0x28e)+_0x3b34ab);}),_0x2a9d84[_0x4b4eb0(0x4f4)]['on'](_0x4b4eb0(0x3b7),_0x19df01=>{const _0x227eac=_0x4b4eb0;console[_0x227eac(0x2d9)](_0x227eac(0x4c0)+_0x19df01);}),_0x2a9d84['on'](_0x4b4eb0(0x365),_0x5bb6fc=>{const _0x272bf6=_0x4b4eb0;_0x5bb6fc!==0x0?console[_0x272bf6(0x2d9)](_0x272bf6(0x2a3)+_0x5bb6fc):console[_0x272bf6(0x472)]('Sistema\x20atualizado\x20com\x20sucesso!'),console[_0x272bf6(0x472)](_0x272bf6(0x2b8)),setTimeout(()=>process[_0x272bf6(0x365)](),0x2710);});}var Jo=Ne[a0_0x108f24(0x543)][a0_0x108f24(0x631)](__dirname,a0_0x108f24(0x796));async function jo(_0x2a7d06,_0x2f57fb){const _0x50d525=a0_0x108f24;let _0x798587=Vo();_0x2a7d06=_0x2a7d06[_0x50d525(0x6e4)]('.uazapi.dev','');try{let _0x48b7e0=le[_0x50d525(0x543)][_0x50d525(0x3cc)](_0x2f57fb,_0x50d525(0x23b));_0x48b7e0=_0x48b7e0[_0x50d525(0x6e4)](/<apikey>/,_0x798587),_0x48b7e0=_0x48b7e0[_0x50d525(0x6e4)](/<subdomain>/g,_0x2a7d06),le[_0x50d525(0x543)][_0x50d525(0x340)](_0x2f57fb,_0x48b7e0,_0x50d525(0x23b)),console['log'](_0x50d525(0x2bf));}catch(_0x2b3b7a){console['error'](_0x50d525(0x400),_0x2b3b7a);}}function qo(_0x3aa1a1,_0x1c7df5){return new Promise((_0x403dbb,_0x533fc6)=>{const _0x5328a4=a0_0x57b5;let _0x1a523a=(0x0,Re['spawn'])(_0x5328a4(0x2d3),[_0x5328a4(0x5ca),_0x5328a4(0x40b),'-m',_0x3aa1a1,'--agree-tos','-d',_0x1c7df5]);_0x1a523a[_0x5328a4(0x313)]['on'](_0x5328a4(0x3b7),_0x2bc5ed=>{const _0x54af02=_0x5328a4;console[_0x54af02(0x472)]('Certbot:\x20'+_0x2bc5ed[_0x54af02(0x28f)]());}),_0x1a523a[_0x5328a4(0x4f4)]['on'](_0x5328a4(0x3b7),_0x26ace1=>{const _0x465fd1=_0x5328a4;console[_0x465fd1(0x2d9)]('Erro\x20do\x20Certbot:\x20'+_0x26ace1[_0x465fd1(0x28f)]());}),_0x1a523a['on']('close',_0x1d964e=>{const _0x3094cd=_0x5328a4;_0x1d964e!==0x0?(console[_0x3094cd(0x2d9)](_0x3094cd(0x79b)+_0x1d964e),_0x533fc6(_0x3094cd(0x79b)+_0x1d964e)):(console[_0x3094cd(0x472)](_0x3094cd(0x5bb)),_0x403dbb());});});}function Vo(_0xe3989f=0x32){const _0x15213c=a0_0x108f24;let _0x1b41df=_0x15213c(0x416),_0x2c8281='';for(let _0x1d0c53=0x0;_0x1d0c53<_0xe3989f;_0x1d0c53++)_0x2c8281+=_0x1b41df[_0x15213c(0x1c6)](Math[_0x15213c(0x391)](Math[_0x15213c(0x243)]()*_0x1b41df['length']));return _0x2c8281;}function Bo(){const _0x29ec39=a0_0x108f24;(0x0,Re[_0x29ec39(0x2d8)])('shutdown\x20-r\x20now',(_0x498b39,_0x20d911,_0x5488b4)=>{const _0x1e20a3=_0x29ec39;if(_0x498b39){console[_0x1e20a3(0x2d9)](_0x1e20a3(0x605)+_0x498b39);return;}if(_0x5488b4){console[_0x1e20a3(0x2d9)](_0x1e20a3(0x4b3)+_0x5488b4);return;}console[_0x1e20a3(0x472)](_0x1e20a3(0x375)+_0x20d911);});}0x0&&(module[a0_0x108f24(0x283)]={'subdomain':subdomain});