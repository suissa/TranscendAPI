const a0_0x4a837a=a0_0x22fc;(function(_0x54c6c5,_0xd49b3a){const _0x162a7c=a0_0x22fc,_0x2db08b=_0x54c6c5();while(!![]){try{const _0x312666=-parseInt(_0x162a7c(0x3c6))/0x1+-parseInt(_0x162a7c(0x4fa))/0x2+parseInt(_0x162a7c(0x231))/0x3*(-parseInt(_0x162a7c(0x174))/0x4)+parseInt(_0x162a7c(0x4bd))/0x5+parseInt(_0x162a7c(0x30d))/0x6*(parseInt(_0x162a7c(0x26f))/0x7)+-parseInt(_0x162a7c(0x56e))/0x8+parseInt(_0x162a7c(0x298))/0x9*(parseInt(_0x162a7c(0x5c9))/0xa);if(_0x312666===_0xd49b3a)break;else _0x2db08b['push'](_0x2db08b['shift']());}catch(_0x1c97c4){_0x2db08b['push'](_0x2db08b['shift']());}}}(a0_0xce41,0x79d94));function a0_0xce41(){const _0x51939b=['update','decryptPollVote','):\x20leadInfoVariables','replyOptions','selectedOptions','No\x20invite\x20code','ex:\x20\x22groupJid=120362@g.us\x22','URL\x20limpa:\x20','.mp4','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','REDIS_ENABLED','last','reactionMessage','updateMessage','markMessageAsRead','updatePresence','routerPath','authService','key.','#000000','store','parseInt','messages.set','namespace','ContactModel','header','saveMediaToFile','\x20inseridos\x20no\x20banco\x20de\x20dados...','stdout','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','BRL','\x1b[40m','fetchChats','):\x20Entrou\x20na\x20função\x20saveReply','storePath','envProcess','contact','varedits','request\x20received\x20in\x20editFlow','connection.update','verify','Instance\x20Key\x20from\x20DB:','Telefone:\x20','footerText','WEBHOOK','http://checkip.dyndns.org','organization','exit','CHATS_SET','fetchProfile2','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','warn','start','findByIdAndUpdate','STORE_CHATS','router','request\x20received\x20in\x20starFlow','):\x20Alterando\x20fluxo...','sendList','isBusiness','deleteMany','data','RECONNECT_TIME_FRAME','/media',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','option','TRIAL_AD','editflowgroup','model','removeData','jwt','_error','groupSetting','1768928LbkpYR','qrCode','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','updatePrivacySettings','\x20-i\x20','dbClient','condition','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','notas','createServer','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:','sha256','!stop','/automate','WEBHOOK_EVENTS_CONTACTS_UPDATE','updateBlock','group','delete','messages','saveTextReply','eventHandler','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','setNewValue','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','Font\x20is\x20required','groupMetadata','success','formatBRNumber','length','true','Hash\x20to\x20image\x20name:\x20','remove.instance','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','editFlowCondition','uazapiSendAudio','Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','READ','Read\x20messages','promote','findOne','archive','Error\x20deleting\x20instance\x20from\x20memory.','Getting\x20image\x20from\x20url','@s.whatsapp.net','updateCustomFields','image','request\x20received\x20in\x20deleteConversation','fetchInstances','Media\x20folder\x20path:','fromObject','context','conversation','groupInviteCode','create\x20-\x20success','convert','saveChatVariables','remoteJidsRemaining','No\x20participants','logger','TEXT','scheduleSendAudio','):\x20Conversa\x20inserida\x20com\x20sucesso.','saveVariable','description','scheduleSendText','):\x20encontrado\x20próxima\x20mensagem\x20para\x20','statusCode','buttonText','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','info','Type\x20not\x20found','inviteCode','getAllData','editFlowVaredit','pollMessage','listen','lastCondition','):\x20Going\x20to\x20','existsSync','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','_doc','repository','hDel','vote','unhandledRejection','Bloco\x20com\x20ID\x20','axios','):\x20Enviando\x20enquete','getBase64FromMediaMessage','.X-ABLabel:Celular\x0a','62840YJbrWT',',\x20valor\x20a\x20encontrar:\x20\x22','isConnected','DATABASE_CONNECTION_USER','/create','font','HH:mm:ss','findByIdAndDelete','scheduleSendMedia','):\x20Editando\x20variável\x20do\x20fluxo...','array','views','DisconnectReason','creds.json','apikey','Hash\x20to\x20audio\x20name:\x20','spawn','stopMinutesMaxActives','remoteJids','including\x20timestamp\x20in\x20url:\x20','user','MESSAGES_UPSERT','#ffffff','random','authentication','locationMessage','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','flowIgnoreGroups','validate','static','encoding','max','):\x20Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20','sendLocation','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','groupJid','Unable\x20to\x20leave\x20the\x20group','Subscribed\x20Events:','uazapiSendText','):\x20expirationTime:\x20','lastInteraction','verifiedName','Reiniciando\x20sistema\x20após\x20instalado\x20certificado...','WEBHOOK_EVENTS_STATUS_INSTANCE','GROUPS_UPDATE','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','waitingPoll_name','/group','Arquivo\x20env.yml\x20atualizado\x20com\x20sucesso.','getContactModelForOwner','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','demote','\x1b[30m%s\x1b[0m','writeData','pino','WEBHOOK_EVENTS_QRCODE_UPDATED','replaceVariables','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','editFlowReply','process','):\x20Limpando\x20AutomateSystem','lastSend','video-cover.png','replaceOne','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','error','SERVER_OFFLINE','\x1b[36m%s\x1b[0m','loadEnv','segundos','removeProfilePicture','findGroup','messaging-history.set','command','editflow','variablesNotFound','readdirSync','QRCODE','src','\x20horas\x20e\x20','API\x20Key\x20from\x20Request:','profile','where','WEBHOOK_EVENTS_MESSAGES_UPSERT','EVENTS','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','editedMessage','generate','dark','findIndex','updateMediaMessage','folder','stack','Comando\x20desconhecido','webhookService','web','Message\x20not\x20found',',\x20fará\x20nova\x20verificação\x20em\x20','lastSendMessage',',\x20Resultado:\x20','number','replaceVariablesLogs','readreceipts','contacts.update','qrcode.updated','contact_blacklist','instance','request\x20received\x20in\x20allFlows','):\x20teve\x20mudanças\x20chat.displayName:\x20','):\x20Flow\x20não\x20encontrado','profilePictureUrl','stickerMessage','variablesToObject','waMonitor','qrcode-terminal','--agree-tos','SERVER_TYPE','refused','node-mime-types','connectToWhatsapp','Schema','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','toBrazilianNumberFormat','/events/:instance','nomecompleto','agents','\x20minutos...','responsavelid','hex','SERVER_ACK','not_announcement','Flow\x20already\x20exists','Erro\x20do\x20Certbot:\x20','state','ephemeralMessage','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP:','SERVER_PORT','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','\x1b[1m\x1b[37m','privacySettings','push','WEBHOOK_GLOBAL_ENABLED','local_map','createGroup','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','desc','\x20não\x20encontrado','\x22,\x20valor\x20a\x20substituir:\x20\x22','collection','WEBHOOK_EVENTS_NEW_JWT_TOKEN','verbose','processgoToFlow','$dbName','request\x20received\x20in\x20getFlow','):\x20Erro\x20ao\x20buscar\x20a\x20conversa\x20','\x1b[37m','editOperator','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','archived','Erro\x20ao\x20iniciar\x20fluxo:\x20','editChat','format','from','matchRegex','Atualização:\x20','findChats','Erro\x20ao\x20buscar\x20conversas:\x20','):\x20Editando\x20replyOption...','deleteFlow','env.KEY\x20!==\x20key','updateProfileName','hostname','.TEL;waid=','hbs','viewOnceMessage','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20','):\x20Conversas\x20encontradas:','getOwnPropertyNames','waitingPoll_id','padEnd','sendText','updateMany','removed','Erro\x20ao\x20buscar\x20conversa:\x20','opendirSync','Converted\x20image\x20deleted','findFlow','deleteInstance','createConversationforgoToFlow','editFlowVariable','pre','endsWith','/*.json','has','Conexão\x20estabelecida','console','BufferJSON','HeaderType','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','closeExistingConversations','\x1b[34m%s\x1b[0m','isDirectory','redisEnv','DB_PREFIX_NAME','CONFIG_SESSION_PHONE','SERVER','Error\x20updating\x20profile\x20picture','parse','Error\x20updating\x20participants','address','toBRL','desativadoFluxoAte','Audio\x20processed','express','sendWhatsAppAudio','Close\x20connection','/:instanceName','fileName','sendStatus','presence','webhook','SendScheduleMessage','media','add','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','Converted\x20audio\x20deleted','Fluxos\x20não\x20estão\x20ativados','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','remote\x20\x22origin\x22','scheduled','TYPE','EMAIL:','/instance/create','WEBHOOK_EVENTS_MESSAGES_UPDATE','E-mail:\x20','pollCreationMessageKey','sort','deleteConversation','DARK','CONNECTION_UPDATE','chat','fetchConversation','flowStopConversation','\x1b[33m%s\x1b[0m','onTime','optionName','stringify','):\x20alterando\x20this.AutomateSystem','request\x20received\x20in\x20editConversation','@ffmpeg-installer/ffmpeg','ObjectId','sendAudio','):\x20Erro\x20ao\x20alterar\x20fluxo:\x20','formatVCard','updateStopChat','DEBUG','dbServer','getFlow','Error\x20fetching\x20and\x20updating\x20profile:\x20','goNextblock','Audio\x20converted\x20to\x20mp4','):\x20Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20','replacer','contentText','Not\x20Found','groupFetchAllParticipating','\x20chats\x20de\x20','CONNECTION','.ogg','variable','chats.set','):\x20Parar\x20função\x20pois\x20não\x20está\x20conectado','downloadMediaMessage','request\x20received\x20in\x20editFlowvariable','editflowvariable','CORS','empty','listMessage','hGetAll','participants','indexOf','The\x20instance\x20needs\x20to\x20be\x20disconnected','.json','temp-','dataValidate','open','not\x20loaded','findById','):\x20Editando\x20condição\x20do\x20fluxo...','Types','group-participants.update','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','\x20minutos.\x20Será\x20às\x20','INFO','Message','findAndReplaceRegex','StatusJidList\x20is\x20required','Converting\x20image\x20to\x20WebP\x20to\x20sticker','AutomateSystem','addBlock','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','flowStopMinutes','processConditions','\x22\x20cannot\x20be\x20empty','Router','eventEmitter','audio/mp4','Cache-Control','messagesSend','):\x20Error\x20processing\x20the\x20block:\x20','drop','syscall','*\x0a\x0a','Error\x20update\x20group\x20picture','generateHash','WEBHOOK_EVENTS_CHATS_UPDATE','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','code','activatedCount','stanzaId','Instance\x20\x22','whatsappNumber','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','WEBHOOK_EVENTS_CONNECTION_UPDATE','Internal\x20Server\x20Error','groupHandler','):\x20isVote','view\x20engine','formatStatusMessage','greater','nome','messageHandle','flowConversation','compression','):\x20Editando\x20bloco...','title','restartInstance','none','binary','auth','documentWithCaptionMessage','Deleted\x20','ENABLED','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','Initial\x20__dirname:','apiResponse','https://github.com/uazapi/uazapi.git','lastBlockId','contactHandle','fetchPrivacySettings','groups_ignore','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','getflow','arraybuffer','replyOption','ids','\x5c$&','sendSticker','phoneNumber','blockId','inner','chats','substring','groupSettingUpdate','messageTimestamp','getDevice','getChatModelForOwner','CHATS_UPSERT','FlowRouter','convertToWebP','bearer','locked','shutdown\x20-r\x20now','contactMessage','getAutomateSystem','path','msgRetryCounterCache','editFlowBlock','lean','):\x20Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20schedule\x20message:\x20','cpf','creds','processblock','DATABASE_CONNECTION_DB_PREFIX_NAME','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo\x20','108EiLRXU','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','CORS_ORIGIN','createWebhook','<subdomain>','params','put','):\x20Fluxos\x20não\x20estão\x20ativados','AutomateFunctions','):\x20Deletando\x20fluxo...','get','getScheduleMessage','/clients-info','toggleEphemeral','selectableCount','group\x20ignored','extractRegex','Content\x20is\x20required','fileLength','):\x20Bloco\x20copiado:\x20','The\x20instance\x20is\x20already\x20connected','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','imagechat','.\x20Pulando.','prepareWAMessageMedia','audioMessage','\x0a{\x20instance:\x20','findConversation','/exit','connectionUpdate','viewOnceMessageV2Extension','wuid','waUploadToServer','subjectTime','chatHandle','https://chat.whatsapp.com/','cleanStore','modifiedCount','mediaSticker','toUpperCase','longitude','fetchContacts','method','.mp3','function','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','Invalid\x20\x22oldToken\x22','deletedCount','birthtime','getHours','groupCreate','key','includes','):\x20Iniciando\x20bot...','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message',',\x20qrcodeCount:\x20','Instance\x20deleted','capitalizedWords','deleteReplyOption','audioWhatsapp','collections','readMessageBot','call','The\x20','):\x20atualização\x20chat:\x20','\x20minutos','Erro\x20ao\x20editar\x20a\x20conversa:\x20','\x20inseridas\x20no\x20banco\x20de\x20dados...','Erro\x20ao\x20executar\x20comando\x20de\x20reinicialização:\x20','paused','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20não\x20estão\x20ativados.','throwAndLogError','FULLCHAIN','truncatedto','http','pop','startFlow','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','prefixCommand','logout','createConnection','configService','Logger','WEBHOOK_MAP','apiName','\x20contacts','created','delaySecMax','/wa-qrcode','augusto.fcs@gmail.com','\x1b[37m%s\x1b[0m','NEW_JWT_TOKEN','GROUPS_UPSERT','\x1b[32m','SSL_CONF_PRIVKEY','OrAnd','):\x20Buscando\x20todos\x20os\x20fluxos...','sendDataWebhook','request\x20received\x20in\x20editFlowcondition','WARN','Temp\x20image\x20deleted','updateAgent','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','getMessageModelForOwner','https://uazapi-plugin.bubbleapps.io/?url=','\x20-y','connecting','when','CREDENTIALS','LEVEL','Error\x20fetching\x20group','delInstanceFiles','normalizeMessage','updateGroupsAddPrivacy','groups','bulkWrite','/wa-connection-update','envYaml','cwd','fetchProfilePictureUrl','request\x20received\x20in\x20updateCustomFields','writeFile','Last\x20message\x20not\x20found','):\x20updateResult:','Temp\x20audio\x20created','delay','):\x20Ignoring\x20group\x20messages.','shift','proto','AutomateSystem\x20não\x20foi\x20inicializado','PORT','StartBot','):\x20Query\x20params:','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','sendCommand','uuid','fetchProfilePicture','headers','Original\x20filename:','getStatus','Parando\x20aplicação...','statusMessage','STORE_CLEANING_TERMINAL','timerId','createClient','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20','unreadcount','MESSAGES_UPDATE','CONECTADO\x20À\x20UAZAPI','Type\x20is\x20required','STORE','document','LOG_LEVEL','all','Já\x20existe\x20fluxo\x20com\x20esse\x20nome','certbot','\x1b[46m','picture','maxActives','Flow\x20iniciado\x20com\x20','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','DATABASE_CONNECTION_URI','Getting\x20profile\x20with\x20jid:\x20','errors','isJWT','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','presence.update','closed','redis','buffer','saveConversationToDatabase','Parando\x20aplicação,\x20atualização\x20recebida','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','Flow\x20não\x20encontrado','WEBHOOK_EVENTS_CHATS_SET','options','\x20não\x20encontrado\x20para\x20atualização.',',\x20Comparador:\x20','map','readFile','removeInstance','editFlowGroup','headerString','create','waMonit','):\x20Enviando\x20mídia','leaveGroup','notContains','87051ypkpyu','Unknown\x20message\x20type\x20or\x20empty\x20message','subjectOwner','leadInfo','toLocaleString','REDIS_PREFIX_KEY','lowerCase','):\x20Mensagens\x20com\x20status\x20\x22done\x22\x20deletadas\x20com\x20sucesso.','Module\x20-\x20ON','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','lastReceivedMessage','editflowvaredit','sending','replaceVariablesChat','sleep','):\x20Enviando\x20áudio','done','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','processingScheduleMessageId','Business\x20profile\x20fetched','badSession','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','Error\x20updating\x20profile\x20status','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','copyBlock','caption','recording','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','split','readData','contains','):\x20Dados\x20recebidos\x20no\x20editFlowGroup:','allFlows','updateProfilePicture','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','Type\x20defined\x20as\x20audio','endSession','hGet','next_groupId','enabled','keep-alive','SECRET','del','toDataURL','uazapiSendMedia','arrayUnique','\x20foi\x20interrompido\x20pelo\x20usuário.','getProfileName','stopMinutes','pt-BR','chatLog','/refreshToken','Revoke\x20error','isBase64','):\x20Erro\x20ao\x20buscar\x20Schedule\x20Messages:','trim','makeCacheableSignalKeyStore','):\x20Comando\x20desconhecido:\x20','connectionStatus','QRCODE_UPDATED','leadInfo.desativadoFluxoAte','50mb','959MXEEWR','groupLeave','client','audio','repeat','leadInfo.','\x1b[31m%s\x1b[0m','\x1b[1m','charAt','Valor\x20inicial:\x20\x22','chats.upsert','buttons','TRIAL_INSTANCE_NAME','stopIfLastReturnedError','Error\x20while\x20deleting\x20message\x20for\x20everyone','flattenObject','The\x20property\x20cannot\x20be\x20empty','PRIVKEY','isJidGroup','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','getConversation','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','readFileSync','conversationTimestamp','some','setting','CONTACTS_UPDATE','getLastMessage','The\x20global\x20api\x20key\x20must\x20be\x20set','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','connectionState','URI','editConversation','Instance\x20ID:','uazapi','readMessages','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','type','width','AUTHENTICATION_JWT_SECRET','2259VgxnWi','WEBHOOK_EVENTS_SEND_MESSAGE','NODE_ENV','conditions','Instância\x20não\x20encontrada.','Error\x20updating\x20privacy\x20settings','webp','writeStore','getDelay','.sendDataWebhook-local','now','AUTHENTICATION_JWT_EXPIRIN_IN','customFields','@broadcast','composing','):\x20newFirstValue\x20após\x20replaceVariables:','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','saveCreds','AUTHENTICATION','videoMessage','utf-8','):\x20Erro\x20ao\x20deletar\x20mensagens\x20com\x20status\x20\x22done\x22:','delayMessage','certonly','values','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','evaluateConditionTest','detail','mentioned','\x20\x1b[0m','DATABASE','Enter\x20a\x20value\x20in\x20milliseconds','.png','rowId','replaceVariablesInObject','execSync','createFlow','):\x20Conversa\x20está\x20expirada','Error\x20updating\x20message\x20status:','ERROR','findContacts','g.us',',\x20saindo.','unreadCount','qrcode','.webp','generateWAMessageFromContent','../env.yml','json','forEach','changeVariables','\x20}\x0a','Image\x20created',',\x20lastCondition:\x20','video','Fetching\x20business\x20profile','):\x20customFieldVariables','redisCache','):\x20Erro\x20ao\x20editar\x20a\x20conversa:\x20','Erro\x20ao\x20deletar\x20a\x20conversa:\x20','flow','notEmpty','restrict','getVariablesChat','joinGroup','request\x20received\x20in\x20updateAgent','Missing\x20global\x20api\x20key','):\x20Não\x20achou\x20nenhum\x20flow','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','URL:','ERROR:\x20','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','Trying\x20to\x20get\x20business\x20profile','reviver','unavailable','messageSecret','integer','notEqual','refreshToken','status','prepareMediaMessage','Connection','email','pushName','viewOnceMessageV2','Audio\x20is\x20url','editflowblock','events','Image\x20path:\x20','sections','write','mentions','COLOR','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','\x1b[36m','findGroupInfo','-whatsapp-api','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','instanceName','isArray','online','mimetype','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','tokenId','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','waInstances','request\x20received\x20in\x20getAutomateSystem','/webhook','createJid','child_process','buttonsMessage','createInstance','Group\x20not\x20found','noConnection','):\x20Conversa\x20atualizada\x20em\x20memória','reaction','35346RxooqT','findGroups','test','message','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','setWebhook','Error\x20change\x20group\x20name','-instances','redirect','processApiRequest','instanceCount','LIMIT','fromMe','Temp\x20audio\x20path:\x20','checkAndRestartProcess','deleteMessage','flowname:\x20','groups.update','join','processConditionsTest','reconnectAttempts','exists','Sending\x20audio\x20whatsapp','latitude','mongodb','app','body','findMessages',',\x20Segundo\x20Valor:\x20','block','object','sendContact','round','close','stderr','documentMessage','hasOwnProperty','CLEANING_INTERVAL','getTicketSystem','assign','sendMedia','unlinkSync','toFile','Forbidden','/media/','data:\x20','connect','find','Validate','realVariables','g-t','):\x20Erro\x20ao\x20deletar\x20a\x20conversa\x20','\x0a*Você\x20respondeu*:\x0a','authModel','Não\x20é\x20possível\x20excluir\x20uma\x20mensagem\x20que\x20está\x20atualmente\x20em\x20processamento.\x20Pause\x20primeiro\x20e\x20espere\x20em\x20torno\x20de\x2020\x20segundos\x20para\x20deletar','app-state-sync-key','\x1b[42m','android','convertedOptions','stateConnection','defineAuthState','connectionClosed','getMIMEType','):\x20Error\x20processing\x20conditions:\x20','fetchMessages','Error\x20updating\x20profile\x20name','pollCreationMessageV3','response','url','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','flowPrefixCommand','Reinicialização\x20iniciada:\x20','Log\x20out\x20instance:\x20','sem\x20texto\x20na\x20mensagem','resetReconnectionVariables','blocks','groupRevokeInvite','equal','updateFlowConfig','pollCreationMessage','isBooleanString','varedit','rows','/message','mediatype','Instance\x20restarted','startsWith','NextBlock','env','eventemitter2','messageId','poll','MAX_RECONNECT_ATTEMPTS','ButtonsMessage','):\x20Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','Erro\x20ao\x20executar\x20o\x20Certbot.\x20Código\x20de\x20saída:\x20','stopped','processPollUpdateMessage','):\x20delete\x20=\x20true','filter','urlOrBase64','name','protocolMessage','bateu\x20events','pollErrorMessage','deleteAll','expression','Error\x20in\x20markMessageAsRead:','/events','announce','instance.','toNumber','render','match','webhookMap','floor','fetchBusinessProfile','DD/MM\x20HH:mm:ss','\x1b[41m','\x20não\x20encontrado\x20para\x20cópia','delInstanceTime','initAuthCreds','/wa-chats','):\x20Criada\x20conversa\x20nova\x20(gotoflow)','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','Erro:','newStoppedUntil','SSL_CONF','request\x20received\x20in\x20editFlowgroup','uazapiSendPoll','presenceSubscribe','express-async-errors','editScheduleMessage','.jwt','Certbot:\x20','editflowcondition','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','keys','remoteJid','lastMessage','base64','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','mongoose','Getting\x20audio\x20from\x20url','updateParticipant','USER','/chat','STATUS_INSTANCE','save','):\x20Editando\x20grupo\x20do\x20fluxo...','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','Method\x20not\x20implemented.','File\x20written\x20to\x20path:\x20','rm\x20-rf\x20','Cannot\x20','isInteger','):\x20Erro\x20ao\x20buscar\x20conversas\x20','contactname','replaceValue','GLOBAL','variables','request\x20body:\x20','cors','vcard','findGroupInfos','urlencoded','sendMessage','CONTACTS_SET','groups.upsert','trimmed','Variável\x20não\x20encontrada!','WEBHOOK_EVENTS_CHATS_DELETE','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','^\x5cd+([-]\x5cd+)*@g.us$','ON\x20-\x20dbName:\x20','oldToken','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','whatsappNumbers','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','./.git/config','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','lastmsg','reference','Nenhum\x20chat\x20encontrado\x20para\x20editar.','status@broadcast','848484tqxgXS','scheduleNextCheck','Erro\x20ao\x20editar\x20o\x20bloco:\x20','getBusinessProfile','editflowreply','value','DOCKER_ENV','ReplyOption\x20com\x20ID\x20','authState','defineProperty','):\x20Buscando\x20conversa...','MessageModel','interval\x20não\x20é\x20um\x20número','sendPresenceUpdate','PENDING','):\x20debug\x20alterando\x20this.AutomateSystem','):\x20Visualizando\x20AutomateSystem','remove','stoppedUntil','updateGParticipate','localWebhook','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','loggedOut','Por\x20favor,\x20responda\x20à\x20última\x20enquete\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','^\x5cd+','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','instancias:\x20','originalUrl','JWT','backgroundColor','participant','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20','addresss','getOwnPropertyDescriptor','utf8','enumerable','displayName','announcement','getClient','updateOne','_Messages','findAndReplace','ignoreGroups','poll_id','size','optionDescription','apirequest','Primeiro\x20Valor:\x20','):\x20Mensagem\x20já\x20enviada\x20para\x20','_id','scheduleMessage','NAME','firstValue','Erro\x20ao\x20atualizar\x20o\x20arquivo\x20env.yml:','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','upperCase','quoted','request\x20received\x20in\x20scheduleMessage','):\x20Buscando\x20flow...','updateConversation','Including\x20timestamp\x20in\x20url:\x20','CONTACTS_UPSERT','owner','AppStateSyncKeyData','mkdirSync','/wa-contacts','AUTHENTICATION_API_KEY','no.connection','fone','sendButtons','writeFileSync','STORE_CONTACTS','ORG:','profilePicture','webhookModel','and','emit','Image\x20converted\x20to\x20WebP','groupValidate','Output\x20audio\x20path:\x20','REDIS','LOG','subject','sendPoll','pollOnReplyDelete','dbSettings','Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','load','):\x20Falha\x20ao\x20deletar\x20mensagem.','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','mediaKey','https','Instance\x20logged\x20out','groupUpdateSubject','CORS_METHODS','\x22\x20-\x20NOT\x20CONNECTION','insert','Archiving\x20chat','sendReaction','GROUP_PARTICIPANTS_UPDATE','toLowerCase','groupadd','Erro\x20ao\x20criar\x20o\x20fluxo:\x20','toString','\x1b[32m%s\x1b[0m','moreLogs','\x0aitem','Temp\x20audio\x20deleted','reorderBlocks','jpegThumbnail','rmSync','\x20saindo\x20da\x20função','groupToggleEphemeral','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','contacts','CHATS_DELETE','long','Certbot\x20executado\x20com\x20sucesso.','exec','set','updateChatWithMessage','deleteBlock','não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','linkPreview','updateProfileStatus','class-validator','jsonwebtoken','SEND_MESSAGE','.uazapi.dev','CONFIG_SESSION_PHONE_NAME','item','isRunning','chats.update','insertMany','This\x20name\x20','Erro\x20de\x20reinicialização:\x20','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','entries','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','Read\x20messages\x20fail','useMultiFileAuthState','dropCollection','splice','count',',\x20Minutes\x20to\x20Close:\x20','website','loadWebhook','Error\x20creating\x20group','createConversationforStartFlow','js-yaml','metadata','PROD','dbInstance','Error\x20change\x20group\x20description','):\x20transformedCustomFieldVariables','\x1b[43m','slice','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','Contacts\x20not\x20found','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','findOneAndUpdate','WEBHOOK_EVENTS_CONTACTS_UPSERT','?timestamp=','):\x20Procurando\x20mensagens\x20para\x20envio','loadInstance','userDevicesCache','):\x20teve\x20mudanças\x20chat.archived:\x20','^\x5cd+[\x5c.@\x5cw-]+','8080','string','Error\x20in\x20scheduleNextCheck:\x20','getMessage','text','messageContextInfo','LOG_COLOR','cleaningUp','groupUpdateDescription','buttonId','@whiskeysockets/baileys','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','mongodb://','available','WEBHOOK_EVENTS_CONTACTS_SET','):\x20newSecondValue\x20após\x20replaceVariables:','reconnectTimestamps','Conversa\x20deletada\x20com\x20sucesso.','toArray','preview','The\x20\x22','DELIVERY_ACK','allflows','joinGroupValidate','):\x20Criando\x20nova\x20conversa','):\x20Erro\x20ao\x20editar\x20agentes:\x20','DELETED','content','secondValue','getContentType','DATABASE_CONNECTION_HOST','sendMessageWithTyping','blockLogs','!cmd_','fetchStatus','isURL','delaySecMin','updateReplyOption','mediaMessage','getTime','contextInfo','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','send','URL','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','newName','downloads','tags','Error\x20updating\x20setting','Variáveis\x20não\x20encontradas:','Bad\x20Request','notify','textMessage','groupDesc','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','ChatModel','everyOne','height','instanceKeys','buttonMessage','fetchProfile','@g.us','CONFIG_SESSION_PHONE_CLIENT','Falha\x20ao\x20deletar\x20mensagens\x20antigas:','quotedMessage','fullName','readMessage','currency','):\x20','deleteflow','):\x20Deletando\x20mensagem','):\x20Procurando\x20conversa','DATABASE_ENABLED','EMAIL','setHeader','archiveChat','groupName','_Chats','messages.upsert','3581960oftUsq','getRandomText','replaceVariablesInReplyOptions','pollUpdateMessage','deleteDoneMessages','ios','use','instanceInfo','flowConfig','/wa-groups','contacts.upsert','status.instance','deleteOne','AUTHENTICATION_TYPE','\x1b[0m','pollMessageOnDelete','editFlow','Sistema\x20atualizado\x20com\x20sucesso!','sticker','minutesToClose','KEY','query','PREFIX_KEY','audio/ogg;\x20codecs=opus','default','setRestartTimer','debug','statusJidList','uncaughtException','pollCreationMessageV2','fetchLatestBaileysVersion','findWebhook','):\x20Enviando\x20texto','applyvaredit','SUCCESS','https://uazapi-plugin.bubbleapps.io/','API_KEY','/instance/fetchInstances','chats.delete','):\x20Entrou\x20na\x20função\x20stop','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','DEL_INSTANCE','contactsArrayMessage','/wa-message','notMatchRegex','):\x20conversation.lastInteraction:\x20','log','):\x20não\x20encontrou','?authSource=admin&readPreference=primary&directConnection=true','MESSAGES_SET','QRCODE_LIMIT','Getting\x20profile\x20info','):\x20Ler\x20mensagem','\x5cd+','SSL_CONF_FULLCHAIN','revokeInviteCode','Falta\x20informação\x20para\x20a\x20chamada\x20API','limit','waitingPoll_replyOptions','Error\x20removing\x20profile\x20picture','createNewConversation','1497184QbJVmm','_Contacts','WEBHOOK_EVENTS_GROUPS_UPSERT','\x20minutos\x20verificará\x20novas\x20mensagens','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','PRESENCE_UPDATE','addReplyOption','valid','post','_p_','request\x20received\x20in\x20updateFlowConfig','flushHeaders','processUazapi','Audio\x20is\x20base64','atendimentoAberto','findParticipants','\x20segundos','groupId','stopConversation','Erro\x20ao\x20atualizar\x20conversa:\x20','boolean','order','nextBlock:','jid','subdomain','Não\x20foi\x20possível\x20obter\x20o\x20endereço\x20IP,\x20interrompendo\x20a\x20aplicação.','):\x20Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20','isLong','https://api.ipify.org?format=json','Início','METHODS','role','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','newValue','CHATS_UPDATE','REDIS_URI','processvaredits','VERBOSE','Número:\x20','messages.update','replace','less','action'];a0_0xce41=function(){return _0x51939b;};return a0_0xce41();}var wo=Object['create'],Ns=Object[a0_0x4a837a(0x3cf)],yo=Object[a0_0x4a837a(0x3e7)],bo=Object[a0_0x4a837a(0xa2)],So=Object['getPrototypeOf'],Eo=Object['prototype'][a0_0x4a837a(0x331)],vo=(_0x1834cd,_0x9cfc4d,_0x22fc04,_0x4f0445)=>{const _0x43cfd8=a0_0x4a837a;if(_0x9cfc4d&&typeof _0x9cfc4d==_0x43cfd8(0x32b)||typeof _0x9cfc4d==_0x43cfd8(0x1a1)){for(let _0x56b330 of bo(_0x9cfc4d))!Eo[_0x43cfd8(0x1b3)](_0x1834cd,_0x56b330)&&_0x56b330!==_0x22fc04&&Ns(_0x1834cd,_0x56b330,{'get':()=>_0x9cfc4d[_0x56b330],'enumerable':!(_0x4f0445=yo(_0x9cfc4d,_0x56b330))||_0x4f0445[_0x43cfd8(0x3e9)]});}return _0x1834cd;},T=(_0x3e5959,_0x36c5dc,_0x990d3)=>(_0x990d3=_0x3e5959!=null?wo(So(_0x3e5959)):{},vo(_0x36c5dc||!_0x3e5959||!_0x3e5959['__esModule']?Ns(_0x990d3,a0_0x4a837a(0x4d5),{'value':_0x3e5959,'enumerable':!0x0}):_0x990d3,_0x3e5959)),lo=T(require(a0_0x4a837a(0x140))),Ts=require('fs'),Rs=require(a0_0x4a837a(0x45b)),Ms=require(a0_0x4a837a(0x16a)),De=require(a0_0x4a837a(0x16a)),Q=process[a0_0x4a837a(0x1eb)](),V=(0x0,De[a0_0x4a837a(0x31f)])(Q,'instances'),Cs=(0x0,De[a0_0x4a837a(0x31f)])(Q,a0_0x4a837a(0x618)),Gt=(0x0,De[a0_0x4a837a(0x31f)])(Q,a0_0x4a837a(0x539),a0_0x4a837a(0x146)),As=require('class-validator'),Wt=class{constructor(){const _0x271cfc=a0_0x4a837a;this[_0x271cfc(0x60e)]();}[a0_0x4a837a(0x17e)](_0x1b2a13){const _0x31bd24=a0_0x4a837a;return this[_0x31bd24(0x365)][_0x1b2a13];}['loadEnv'](){const _0x3198f4=a0_0x4a837a;this[_0x3198f4(0x365)]=process[_0x3198f4(0x365)]?.['DOCKER_ENV']!==_0x3198f4(0x58c)?this[_0x3198f4(0x1ea)]():this[_0x3198f4(0x548)](),this[_0x3198f4(0x365)]['PRODUCTION']=process[_0x3198f4(0x365)]?.[_0x3198f4(0x29a)]===_0x3198f4(0x45d),process[_0x3198f4(0x365)]?.[_0x3198f4(0x3cc)]===_0x3198f4(0x58c)&&(this[_0x3198f4(0x365)][_0x3198f4(0xbe)][_0x3198f4(0xd8)]='http',this['env'][_0x3198f4(0xbe)]['PORT']=Number[_0x3198f4(0x53a)](process['env']?.[_0x3198f4(0x652)]??_0x3198f4(0x46e)));}[a0_0x4a837a(0x1ea)](){const _0x23dac2=a0_0x4a837a;return(0x0,Rs[_0x23dac2(0x41d)])((0x0,Ts['readFileSync'])((0x0,Ms[_0x23dac2(0x31f)])(Cs,_0x23dac2(0x2c7)),{'encoding':_0x23dac2(0x2ac)}));}['envProcess'](){const _0x4aa4fa=a0_0x4a837a;return{'SERVER':{'TYPE':process[_0x4aa4fa(0x365)][_0x4aa4fa(0x63e)],'PORT':Number[_0x4aa4fa(0x53a)](process[_0x4aa4fa(0x365)][_0x4aa4fa(0x652)])},'CORS':{'ORIGIN':process[_0x4aa4fa(0x365)][_0x4aa4fa(0x176)][_0x4aa4fa(0x24d)](','),'METHODS':process[_0x4aa4fa(0x365)][_0x4aa4fa(0x424)][_0x4aa4fa(0x24d)](','),'CREDENTIALS':process[_0x4aa4fa(0x365)]?.['CORS_CREDENTIALS']==='true'},'SSL_CONF':{'PRIVKEY':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x1d3)],'FULLCHAIN':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x4f3)]},'STORE':{'CLEANING_INTERVAL':Number[_0x4aa4fa(0x3a8)](process[_0x4aa4fa(0x365)]?.['STORE_CLEANING_TERMINAL'])?Number[_0x4aa4fa(0x53a)](process[_0x4aa4fa(0x365)][_0x4aa4fa(0x203)]):void 0x0,'MESSAGES':process[_0x4aa4fa(0x365)]?.['STORE_MESSAGE']===_0x4aa4fa(0x58c),'CONTACTS':process['env']?.[_0x4aa4fa(0x40d)]===_0x4aa4fa(0x58c),'CHATS':process['env']?.[_0x4aa4fa(0x55b)]===_0x4aa4fa(0x58c)},'DATABASE':{'CONNECTION':{'HOST':process['env']?.[_0x4aa4fa(0x48c)],'PORT':Number['parseInt'](process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x48c)]),'USER':process[_0x4aa4fa(0x365)][_0x4aa4fa(0x5cc)],'PASSWORD':process[_0x4aa4fa(0x365)]['DATABASE_CONNECTION_PASSWORD'],'URI':process[_0x4aa4fa(0x365)][_0x4aa4fa(0x216)],'DB_PREFIX_NAME':process[_0x4aa4fa(0x365)][_0x4aa4fa(0x172)]},'ENABLED':process['env']?.[_0x4aa4fa(0x4b6)]===_0x4aa4fa(0x58c)},'REDIS':{'ENABLED':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x52f)]===_0x4aa4fa(0x58c),'URI':process[_0x4aa4fa(0x365)][_0x4aa4fa(0x51d)],'PREFIX_KEY':process[_0x4aa4fa(0x365)][_0x4aa4fa(0x236)]},'LOG':{'LEVEL':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x20d)][_0x4aa4fa(0x24d)](','),'COLOR':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x474)]===_0x4aa4fa(0x58c)},'DEL_INSTANCE':(0x0,As[_0x4aa4fa(0x35d)])(process['env']?.[_0x4aa4fa(0x4e6)])?process[_0x4aa4fa(0x365)][_0x4aa4fa(0x4e6)]===_0x4aa4fa(0x58c):Number[_0x4aa4fa(0x53a)](process[_0x4aa4fa(0x365)][_0x4aa4fa(0x4e6)])||!0x1,'WEBHOOK':{'WEBHOOK_MAP':process[_0x4aa4fa(0x365)][_0x4aa4fa(0x1c8)]?process[_0x4aa4fa(0x365)][_0x4aa4fa(0x1c8)]===_0x4aa4fa(0x58c):!0x1,'GLOBAL':{'URL':process[_0x4aa4fa(0x365)]?.['WEBHOOK_GLOBAL_URL'],'ENABLED':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x657)]===_0x4aa4fa(0x58c)},'EVENTS':{'STATUS_INSTANCE':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x5f5)]===_0x4aa4fa(0x58c),'QRCODE_UPDATED':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x601)]===_0x4aa4fa(0x58c),'MESSAGES_SET':process[_0x4aa4fa(0x365)]?.['WEBHOOK_EVENTS_MESSAGES_SET']===_0x4aa4fa(0x58c),'MESSAGES_UPSERT':process['env']?.[_0x4aa4fa(0x61d)]===_0x4aa4fa(0x58c),'MESSAGES_UPDATE':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0xdb)]===_0x4aa4fa(0x58c),'SEND_MESSAGE':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x299)]===_0x4aa4fa(0x58c),'CONTACTS_SET':process['env']?.[_0x4aa4fa(0x47c)]==='true','CONTACTS_UPDATE':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x57d)]===_0x4aa4fa(0x58c),'CONTACTS_UPSERT':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x467)]===_0x4aa4fa(0x58c),'PRESENCE_UPDATE':process[_0x4aa4fa(0x365)]?.['WEBHOOK_EVENTS_PRESENCE_UPDATE']===_0x4aa4fa(0x58c),'CHATS_SET':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x223)]===_0x4aa4fa(0x58c),'CHATS_UPDATE':process['env']?.[_0x4aa4fa(0x12d)]===_0x4aa4fa(0x58c),'CHATS_UPSERT':process[_0x4aa4fa(0x365)]?.['WEBHOOK_EVENTS_CHATS_UPSERT']==='true','CHATS_DELETE':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x3b8)]===_0x4aa4fa(0x58c),'CONNECTION_UPDATE':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x136)]===_0x4aa4fa(0x58c),'GROUPS_UPSERT':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x4fc)]===_0x4aa4fa(0x58c),'GROUP_UPDATE':process[_0x4aa4fa(0x365)]?.['WEBHOOK_EVENTS_GROUPS_UPDATE']==='true','GROUP_PARTICIPANTS_UPDATE':process['env']?.['WEBHOOK_EVENTS_GROUP_PARTICIPANTS_UPDATE']===_0x4aa4fa(0x58c),'NEW_JWT_TOKEN':process['env']?.[_0x4aa4fa(0x65f)]===_0x4aa4fa(0x58c)}},'CONFIG_SESSION_PHONE':{'CLIENT':process['env']?.[_0x4aa4fa(0x4ac)]||_0x4aa4fa(0x292),'NAME':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x447)]||'chrome'},'QRCODE':{'LIMIT':Number[_0x4aa4fa(0x53a)](process[_0x4aa4fa(0x365)][_0x4aa4fa(0x4ef)])||0x5},'TRIAL_AD':process[_0x4aa4fa(0x365)]?.[_0x4aa4fa(0x567)],'TRIAL_INSTANCE_NAME':process['env']?.[_0x4aa4fa(0x27b)],'AUTHENTICATION':{'TYPE':process['env'][_0x4aa4fa(0x4ca)],'API_KEY':{'KEY':process['env'][_0x4aa4fa(0x408)]},'JWT':{'EXPIRIN_IN':Number[_0x4aa4fa(0x3a8)](process['env']?.[_0x4aa4fa(0x2a3)])?Number['parseInt'](process[_0x4aa4fa(0x365)]['AUTHENTICATION_JWT_EXPIRIN_IN']):0xe10,'SECRET':process[_0x4aa4fa(0x365)][_0x4aa4fa(0x297)]}}};}},S=new Wt(),uo=T(require(a0_0x4a837a(0x3af))),me=T(require('express')),Ss=require(a0_0x4a837a(0x16a)),Ht=T(require('dayjs')),Kt=(_0xdcb18c=>(_0xdcb18c[a0_0x4a837a(0x417)]=a0_0x4a837a(0x1d2),_0xdcb18c[a0_0x4a837a(0x117)]='\x1b[34m',_0xdcb18c[a0_0x4a837a(0x1d8)]='\x1b[33m',_0xdcb18c['ERROR']='\x1b[31m',_0xdcb18c[a0_0x4a837a(0xf1)]=a0_0x4a837a(0x2f7),_0xdcb18c['VERBOSE']=a0_0x4a837a(0x665),_0xdcb18c[a0_0x4a837a(0xe0)]='\x1b[30m',_0xdcb18c))(Kt||{}),Is=(_0x3490e2=>(_0x3490e2['LOG']=a0_0x4a837a(0x42e),_0x3490e2[a0_0x4a837a(0xe0)]=a0_0x4a837a(0x5fe),_0x3490e2[a0_0x4a837a(0x117)]=a0_0x4a837a(0xb9),_0x3490e2[a0_0x4a837a(0x1d8)]=a0_0x4a837a(0xe5),_0x3490e2[a0_0x4a837a(0x2bf)]=a0_0x4a837a(0x275),_0x3490e2[a0_0x4a837a(0xf1)]=a0_0x4a837a(0x60d),_0x3490e2[a0_0x4a837a(0x51f)]=a0_0x4a837a(0x1cf),_0x3490e2))(Is||{}),Os=(_0x7c0e64=>(_0x7c0e64[a0_0x4a837a(0x417)]=a0_0x4a837a(0x417),_0x7c0e64[a0_0x4a837a(0x1d8)]='WARN',_0x7c0e64[a0_0x4a837a(0x117)]=a0_0x4a837a(0x117),_0x7c0e64[a0_0x4a837a(0xe0)]=a0_0x4a837a(0xe0),_0x7c0e64['ERROR']=a0_0x4a837a(0x2bf),_0x7c0e64['DEBUG']=a0_0x4a837a(0xf1),_0x7c0e64[a0_0x4a837a(0x51f)]=a0_0x4a837a(0x51f),_0x7c0e64))(Os||{}),Ds=(_0x22400b=>(_0x22400b[a0_0x4a837a(0x417)]=a0_0x4a837a(0x345),_0x22400b[a0_0x4a837a(0x117)]='\x1b[44m',_0x22400b['WARN']=a0_0x4a837a(0x461),_0x22400b[a0_0x4a837a(0xe0)]=a0_0x4a837a(0x544),_0x22400b[a0_0x4a837a(0x2bf)]=a0_0x4a837a(0x383),_0x22400b[a0_0x4a837a(0xf1)]=a0_0x4a837a(0x211),_0x22400b[a0_0x4a837a(0x51f)]='\x1b[47m',_0x22400b))(Ds||{}),C=class{constructor(_0x42b276=a0_0x4a837a(0x1c7)){const _0x4e0b68=a0_0x4a837a;this[_0x4e0b68(0x5a1)]=_0x42b276,this['configService']=S;}['setContext'](_0xd5ba11){const _0x51d830=a0_0x4a837a;this[_0x51d830(0x5a1)]=_0xd5ba11;}['console'](_0x18e351,_0xa1b9e5){const _0x3eef07=a0_0x4a837a;let _0x3ee9db=[];this[_0x3eef07(0x1c6)][_0x3eef07(0x17e)](_0x3eef07(0x417))[_0x3eef07(0x1e2)][_0x3eef07(0x2c9)](_0x18fa36=>_0x3ee9db['push'](Os[_0x18fa36]));let _0x5ebe5b=typeof _0x18e351;_0x3ee9db[_0x3eef07(0x1a9)](_0xa1b9e5)&&(S[_0x3eef07(0x17e)](_0x3eef07(0x417))[_0x3eef07(0x2f4)]?(console[_0x3eef07(0x4eb)](_0x3eef07(0x276)+Is[_0xa1b9e5],_0x3eef07(0x654),(0x0,Ht['default'])()[_0x3eef07(0x66b)](_0x3eef07(0x382)),_0x3eef07(0x4cb),Kt[_0xa1b9e5]+Ds[_0xa1b9e5]+_0x3eef07(0x276),_0xa1b9e5+_0x3eef07(0x2b5),'\x1b[33m\x1b[1m',this['context']+'\x1b[0m',Kt[_0xa1b9e5],_0x5ebe5b!=='object'?_0x18e351:'',_0x3eef07(0x4cb)),_0x5ebe5b===_0x3eef07(0x32b)&&console[_0x3eef07(0x4eb)](_0x18e351,'\x0a')):console[_0x3eef07(0x4eb)]((0x0,Ht['default'])()[_0x3eef07(0x66b)](_0x3eef07(0x5cf)),_0xa1b9e5+'\x20',''+this[_0x3eef07(0x5a1)],_0x18e351));}[a0_0x4a837a(0x4eb)](_0x5b4d89){const _0x50218b=a0_0x4a837a;this[_0x50218b(0xb4)](_0x5b4d89,'LOG');}[a0_0x4a837a(0x5b4)](_0x467cbd){const _0x1a25d1=a0_0x4a837a;this[_0x1a25d1(0xb4)](_0x467cbd,_0x1a25d1(0x117));}[a0_0x4a837a(0x558)](_0x3179fd){const _0x225874=a0_0x4a837a;this[_0x225874(0xb4)](_0x3179fd,_0x225874(0x1d8));}[a0_0x4a837a(0x60b)](_0x539773){const _0x4282e3=a0_0x4a837a;this[_0x4282e3(0xb4)](_0x539773,'ERROR');}[a0_0x4a837a(0x660)](_0x132f05){const _0x2589a5=a0_0x4a837a;this[_0x2589a5(0xb4)](_0x132f05,_0x2589a5(0x51f));}[a0_0x4a837a(0x4d7)](_0x32f774){const _0x60029e=a0_0x4a837a;this['console'](_0x32f774,_0x60029e(0xf1));}[a0_0x4a837a(0x622)](_0x554844){const _0x31460d=a0_0x4a837a;this['console'](_0x554844,_0x31460d(0xe0));}};function _s(){const _0x207e53=a0_0x4a837a;process['on'](_0x207e53(0x4d9),(_0x3026b9,_0x2c4e48)=>{const _0x4d5a0c=_0x207e53;new C(_0x4d5a0c(0x4d9))[_0x4d5a0c(0x60b)]({'origin':_0x2c4e48,'stderr':process[_0x4d5a0c(0x32f)]['fd'],'error':_0x3026b9});}),process['on'](_0x207e53(0x5c3),(_0x43fb43,_0x13d2df)=>{const _0x5f235b=_0x207e53;new C(_0x5f235b(0x5c3))[_0x5f235b(0x60b)]({'origin':_0x13d2df,'stderr':process[_0x5f235b(0x32f)]['fd'],'error':_0x43fb43});});}var Ps=T(require(a0_0x4a837a(0x366))),zt=new Ps[(a0_0x4a837a(0x4d5))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),_e=require(a0_0x4a837a(0x39b)),Qt=T(require(a0_0x4a837a(0x39b))),No=new C('Db\x20Connection'),q=S[a0_0x4a837a(0x17e)](a0_0x4a837a(0x2b6)),M=q[a0_0x4a837a(0x149)]?q[a0_0x4a837a(0xfd)]['URI']?Qt['default'][a0_0x4a837a(0x1c5)](q[a0_0x4a837a(0xfd)][a0_0x4a837a(0x28f)],{'dbName':q[a0_0x4a837a(0xfd)][a0_0x4a837a(0xbc)]+a0_0x4a837a(0x2f9)}):Qt[a0_0x4a837a(0x4d5)][a0_0x4a837a(0x1c5)](a0_0x4a837a(0x47a)+q[a0_0x4a837a(0xfd)]['HOST']+':'+q['CONNECTION']['PORT']+a0_0x4a837a(0x4ed),{'user':q['CONNECTION'][a0_0x4a837a(0x39e)],'pass':q[a0_0x4a837a(0xfd)]['PASSWORD'],'dbName':q[a0_0x4a837a(0xfd)][a0_0x4a837a(0xbc)]+a0_0x4a837a(0x2f9)}):null;q[a0_0x4a837a(0x149)]&&No[a0_0x4a837a(0x5b4)](a0_0x4a837a(0x3bb)+M[a0_0x4a837a(0x662)]);var Co=new _e[(a0_0x4a837a(0x642))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),To=new _e[(a0_0x4a837a(0x642))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[Co],'default':[]},'statusLead':{'type':String},'note':{'type':String},'disableFlowsUntil':{'type':Number},'serviceOpen':{'type':Boolean},'assignedTo':{'type':String}},{'_id':!0x1}),Ro=new _e[(a0_0x4a837a(0x642))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':To,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'group_size':{'type':Number},'group_announce':{'type':Boolean}}),xs=_0x405e22=>{const _0x53eaa7=a0_0x4a837a;let _0xf96eaa='z_'+_0x405e22+_0x53eaa7(0x4bb);return M?.[_0x53eaa7(0x569)](_0x53eaa7(0x4a5),Ro,_0xf96eaa);},$s=require(a0_0x4a837a(0x39b)),Mo=new $s[(a0_0x4a837a(0x642))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String,'minlength':0x1},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ks=_0x2a42a1=>{const _0x20cc8f=a0_0x4a837a;let _0x1d524d='z_'+_0x2a42a1+_0x20cc8f(0x4fb);return M?.[_0x20cc8f(0x569)](_0x20cc8f(0x53d),Mo,_0x1d524d);},Ls=require(a0_0x4a837a(0x39b)),Ao=new Ls[(a0_0x4a837a(0x642))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String,'minlength':0x3,'enum':[a0_0x4a837a(0x346),a0_0x4a837a(0x629),a0_0x4a837a(0x4c2)]},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String}}),Us=_0xd837a4=>{const _0xc29a77=a0_0x4a837a;let _0x31987b='z_'+_0xd837a4+_0xc29a77(0x3ee);return M?.['model'](_0xc29a77(0x3d1),Ao,_0x31987b);},Vs=require(a0_0x4a837a(0x39b)),Yt=class{},Io=new Vs[(a0_0x4a837a(0x642))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1}}),Js=M?.[a0_0x4a837a(0x569)](Yt[a0_0x4a837a(0x372)],Io,a0_0x4a837a(0x5e1)),js=require('mongoose'),Xt=class{},Fs=new js['Schema']({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});Fs[a0_0x4a837a(0xaf)](a0_0x4a837a(0x3a1),function(_0x301ca2){const _0x326e99=a0_0x4a837a;delete this['flowActive'],delete this[_0x326e99(0x5e5)],delete this[_0x326e99(0x353)],delete this[_0x326e99(0xe4)],delete this[_0x326e99(0x11f)],_0x301ca2();});var Bs=M?.[a0_0x4a837a(0x569)](Xt[a0_0x4a837a(0x372)],Fs,a0_0x4a837a(0xcd)),O=require(a0_0x4a837a(0x39b)),Pe=class{},qs=new O[(a0_0x4a837a(0x642))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Zt=new O[(a0_0x4a837a(0x642))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),Oo=new O['Schema']({'command':{'type':String},'text':{'type':String},'delay':{'type':Number},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'pollErrorMessage':{'type':String,'default':a0_0x4a837a(0x3dd)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),Gs=new O[(a0_0x4a837a(0x642))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),Do=new O[(a0_0x4a837a(0x642))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String}},{'_id':!0x1}),_o=new O[(a0_0x4a837a(0x642))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Ws=new O['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':Oo},'apirequest':Do,'stopMinutes':{'type':String},'goToFlow':{'type':String},'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa}}),os=new O['Schema']({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),Hs=new O[(a0_0x4a837a(0x642))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),es=class{},Ks=new O[(a0_0x4a837a(0x642))]({'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'readMessages':{'type':Boolean,'default':!0x1},'testingWith':{'type':String},'startCommandWord':{'type':String,'default':function(){const _0x4afe05=a0_0x4a837a;return _0x4afe05(0x48f)+Math[_0x4afe05(0x5e0)]()['toString'](0x24)[_0x4afe05(0x462)](0x2,0x7);},'required':!0x1,'minlength':0x5},'variables':[os],'variablesNotFound':{'type':[String]},'blocks':[Ws],'groups':[qs],'conditions':[Gs],'varedits':[Hs],'replyOptions':{'type':[Zt],'default':[]}});Ks['pre'](a0_0x4a837a(0x3a1),function(_0x5ee8b0){const _0x1d8d33=a0_0x4a837a;let _0x25a42d=new Set(),_0x4caec3=new Set(this[_0x1d8d33(0x3ad)]?.[_0x1d8d33(0x227)](_0x6f294=>_0x6f294[_0x1d8d33(0x372)])),_0x3502b1=JSON[_0x1d8d33(0xe8)](this),_0x3ba2ff=/{{(?!_)([^}]*)}}/g,_0x40b4bd;for(;(_0x40b4bd=_0x3ba2ff[_0x1d8d33(0x43c)](_0x3502b1))!==null;)_0x4caec3[_0x1d8d33(0xb2)](_0x40b4bd[0x1])||_0x25a42d[_0x1d8d33(0xd0)](_0x40b4bd[0x1]);_0x25a42d[_0x1d8d33(0x3f2)]>0x0?(console['warn'](_0x1d8d33(0x49f),Array[_0x1d8d33(0x66c)](_0x25a42d)),this[_0x1d8d33(0x615)]=Array['from'](_0x25a42d)):this[_0x1d8d33(0x615)]=[],_0x5ee8b0();});var I=M?.[a0_0x4a837a(0x569)](es['name'],Ks,a0_0x4a837a(0x2d4)),Po=new O[(a0_0x4a837a(0x642))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[os],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[_o]},{'_id':!0x1}),ts=class{},xo=new O[(a0_0x4a837a(0x642))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[os],'blocks':[Ws],'groups':[qs],'conditions':[Gs],'varedits':[Hs],'replyOptions':{'type':[Zt],'default':[]},'chatLog':Po,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x4a837a(0x10f)},'waitingPoll_id':{'type':String},'waitingPoll_name':{'type':String},'waitingPoll_replyOptions':{'type':[Zt],'default':[]}}),J=M?.[a0_0x4a837a(0x569)](ts[a0_0x4a837a(0x372)],xo,a0_0x4a837a(0x13f)),ss=class{},$o=new O[(a0_0x4a837a(0x642))]({'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),ko=new O['Schema']({'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'mediatype':{'type':String},'fileName':{'type':String}},{'_id':!0x1}),Lo=new O[(a0_0x4a837a(0x642))]({'owner':{'type':String},'status':{'type':String,'default':a0_0x4a837a(0xd7)},'info':{'type':String},'type':{'type':String},'flowName':{'type':String},'message':{'type':ko,'default':{}},'remoteJids':{'type':[String],'default':[]},'when':{'type':Number},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'messagesSend':{'type':[$o],'default':[]},'remoteJidsRemaining':{'type':[String],'default':[]},'startSend':{'type':Number}}),L=M?.[a0_0x4a837a(0x569)](ss[a0_0x4a837a(0x372)],Lo,'scheduleMessages'),as=class{},Uo=new O[(a0_0x4a837a(0x642))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Vo=new O[(a0_0x4a837a(0x642))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'},'stopConversation':{'type':String,'default':a0_0x4a837a(0x57b)},'stopMinutes':{'type':Number,'default':0x14}},{'_id':!0x1}),Jo=new O[(a0_0x4a837a(0x642))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),jo=new O[(a0_0x4a837a(0x642))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[Jo]},'customFields':{'type':[Uo]},'flowConfig':{'type':Vo,'default':{}}}),ae=M?.[a0_0x4a837a(0x569)](as[a0_0x4a837a(0x372)],jo,a0_0x4a837a(0x11c)),he=require('fs'),is=require(a0_0x4a837a(0x16a)),W=class{constructor(_0x426632){const _0x497289=a0_0x4a837a;this[_0x497289(0x547)]=(0x0,is['join'])(Q,_0x497289(0x539)),this['writeStore']=_0xffb6b1=>{const _0x30c41c=_0x497289;(0x0,he['existsSync'])(_0xffb6b1['path'])||(0x0,he['mkdirSync'])(_0xffb6b1[_0x30c41c(0x16a)],{'recursive':!0x0});try{return(0x0,he[_0x30c41c(0x40c)])((0x0,is[_0x30c41c(0x31f)])(_0xffb6b1[_0x30c41c(0x16a)],_0xffb6b1[_0x30c41c(0xca)]+'.json'),JSON['stringify']({..._0xffb6b1[_0x30c41c(0x562)]}),{'encoding':_0x30c41c(0x2ac)}),{'message':_0x30c41c(0x5a4)};}finally{_0xffb6b1[_0x30c41c(0x562)]=void 0x0;}},this['dbSettings']=_0x426632[_0x497289(0x17e)](_0x497289(0x2b6));}['insert'](_0xf1ef4,_0xdba9cb=!0x1){const _0x244634=a0_0x4a837a;throw new Error(_0x244634(0x3a4));}['find'](_0x584568){const _0x26a7d4=a0_0x4a837a;throw new Error(_0x26a7d4(0x3a4));}[a0_0x4a837a(0x580)](_0x40caec,_0x341085){const _0x413c9e=a0_0x4a837a;throw new Error(_0x413c9e(0x3a4));}},xe=class{},$e=class extends W{constructor(_0x276b36){const _0x1ef059=a0_0x4a837a;super(_0x276b36),this[_0x1ef059(0x1c6)]=_0x276b36;}['getMessageModelForOwner'](_0x2ea8f9){return Us(_0x2ea8f9);}async[a0_0x4a837a(0x426)](_0x3c39cf){const _0x555e02=a0_0x4a837a;if(_0x3c39cf[_0x555e02(0x58b)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x555e02(0x1dc)](_0x3c39cf[0x0][_0x555e02(0x404)])[_0x555e02(0x44b)]([..._0x3c39cf]))[_0x555e02(0x58b)]};}catch(_0x23cc09){return console[_0x555e02(0x4eb)](_0x555e02(0x2de),_0x23cc09),_0x23cc09;}}async['find'](_0x20ff71){const _0x30c606=a0_0x4a837a;try{let _0x1a1eaa=this['getMessageModelForOwner'](_0x20ff71[_0x30c606(0x61c)][_0x30c606(0x404)]);if(_0x20ff71?.[_0x30c606(0x61c)]?.[_0x30c606(0x1a8)]){for(let [_0x58feeb,_0x586f66]of Object[_0x30c606(0x44f)](_0x20ff71[_0x30c606(0x61c)]['key']))_0x20ff71[_0x30c606(0x61c)][_0x30c606(0x537)+_0x58feeb]=_0x586f66;delete _0x20ff71?.[_0x30c606(0x61c)]?.['key'];}return await _0x1a1eaa['find']({..._0x20ff71['where']})[_0x30c606(0xde)]({'messageTimestamp':-0x1})['limit'](_0x20ff71?.[_0x30c606(0x4f6)]??0x0)[_0x30c606(0x16d)]();}catch{return[];}}async[a0_0x4a837a(0x580)](_0x2205c4){const _0x2f30e2=a0_0x4a837a;try{await this[_0x2f30e2(0x1dc)](_0x2205c4[_0x2f30e2(0x61c)]['owner'])[_0x2f30e2(0x561)]({..._0x2205c4[_0x2f30e2(0x61c)]});}catch(_0x1c4dfa){console[_0x2f30e2(0x60b)](_0x1c4dfa);}}async[a0_0x4a837a(0x525)](_0x13c105,_0xef9f5d){const _0x4336c1=a0_0x4a837a;try{return await this[_0x4336c1(0x1dc)](_0x13c105[_0x4336c1(0x61c)]['owner'])[_0x4336c1(0x466)]({..._0x13c105['where']},{'$set':_0xef9f5d},{'new':!0x0});}catch(_0x525f2c){throw console[_0x4336c1(0x60b)](_0x525f2c),_0x525f2c;}}async[a0_0x4a837a(0x44b)](_0x4e6e98){const _0x277dbc=a0_0x4a837a;if(_0x4e6e98[_0x277dbc(0x58b)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x277dbc(0x1dc)](_0x4e6e98[0x0][_0x277dbc(0x404)])[_0x277dbc(0x44b)]([..._0x4e6e98]))[_0x277dbc(0x58b)]};}catch(_0x2e5864){return console['log'](_0x277dbc(0x2de),_0x2e5864),_0x2e5864;}}async[a0_0x4a837a(0x376)](_0x3c5632){const _0x5174d2=a0_0x4a837a;try{return await this[_0x5174d2(0x1dc)](_0x3c5632)[_0x5174d2(0x65e)][_0x5174d2(0x128)](),{'success':!0x0};}catch(_0x5b0911){return console[_0x5174d2(0x60b)](_0x5b0911),{'success':!0x1,'error':_0x5b0911};}}},te=require('fs'),Xa=T(require(a0_0x4a837a(0xeb))),w=T(require(a0_0x4a837a(0x478))),Te=require('fs'),$=T(require('path')),ce=T(require(a0_0x4a837a(0x5c5))),Za=require(a0_0x4a837a(0x1fc)),eo=T(require(a0_0x4a837a(0x2c4))),to=T(require(a0_0x4a837a(0x63c))),zs=['imageMessage',a0_0x4a837a(0x330),a0_0x4a837a(0x18e),a0_0x4a837a(0x2ab),a0_0x4a837a(0x639)],Qs=[a0_0x4a837a(0x650),'documentWithCaptionMessage',a0_0x4a837a(0x678),'viewOnceMessageV2'],so=require('os'),Mt=T(require(a0_0x4a837a(0x600))),Dt=require(a0_0x4a837a(0x306)),At=require(a0_0x4a837a(0x640)),pe=T(require(a0_0x4a837a(0x39b))),_=require(a0_0x4a837a(0x443)),fe=class{constructor(_0x26fc69,_0x4a73cd,_0x2f3973){const _0x41339c=a0_0x4a837a;this[_0x41339c(0x511)]=_0x26fc69,this['exists']=_0x4a73cd,this[_0x41339c(0x372)]=_0x2f3973;}},ke=class{},Le=class{},Se=class{},Ue=class{},Ve=class{},we=class{},Je=class{},je=class{},Fe=class{},Be=class{},vt=T(require(a0_0x4a837a(0xc6))),Ys=require('fs'),Xs=require(a0_0x4a837a(0x16a));async function qe(_0x1c1675){const _0x36ea29=a0_0x4a837a;let _0x12ab8b=j['waInstances'][_0x1c1675];if(q[_0x36ea29(0x149)]){let _0x1ea3ce=M[_0x36ea29(0x3ec)]()['db'](q[_0x36ea29(0xfd)]['DB_PREFIX_NAME']+_0x36ea29(0x314))[_0x36ea29(0x65e)](_0x1c1675);return _0x12ab8b||(await _0x1ea3ce[_0x36ea29(0x33c)]({})[_0x36ea29(0x480)]())[_0x36ea29(0x58b)]>0x0;}return _0x12ab8b||(0x0,Ys['existsSync'])((0x0,Xs[_0x36ea29(0x31f)])(V,_0x1c1675));}async function rs(_0x1fbafe,_0x1cd5e3,_0xc287b0){const _0x46ca48=a0_0x4a837a;if(_0x1fbafe[_0x46ca48(0x3e1)][_0x46ca48(0x1a9)]('/instance/create')||_0x1fbafe['originalUrl'][_0x46ca48(0x1a9)](_0x46ca48(0x4e2))||_0x1fbafe[_0x46ca48(0x3e1)]['includes']('/exit'))return _0xc287b0();let _0x53a818=_0x1fbafe['params'];if(!_0x53a818?.['instanceName'])throw new g('instanceName\x20not\x20provided.');if(!await qe(_0x53a818['instanceName']))throw new x(_0x46ca48(0x1b4)+_0x53a818[_0x46ca48(0x2fb)]+'\x20instance\x20does\x20not\x20exist');_0xc287b0();}async function Zs(_0x137cf0,_0x16735c,_0x496b96){const _0x45acc7=a0_0x4a837a;if(_0x137cf0['originalUrl']['includes']('/instance/create')){let _0xf0ac4a=_0x137cf0[_0x45acc7(0x327)];if(await qe(_0xf0ac4a[_0x45acc7(0x2fb)]))throw new oe(_0x45acc7(0x44c)+_0xf0ac4a[_0x45acc7(0x2fb)]+'\x20is\x20already\x20in\x20use.');j[_0x45acc7(0x302)][_0xf0ac4a[_0x45acc7(0x2fb)]]&&delete j['waInstances'][_0xf0ac4a[_0x45acc7(0x2fb)]];}_0x496b96();}var ea=require(a0_0x4a837a(0x443)),ta=T(require(a0_0x4a837a(0x444))),Ge=a0_0x4a837a(0x292),Bo=new C('GUARD');async function qo(_0x269386,_0x511665,_0xc8d5c7){const _0x2e5cdb=a0_0x4a837a;let _0x46730b=_0x269386[_0x2e5cdb(0x17e)](_0x2e5cdb(0x5d7));if(_0x46730b&&S[_0x2e5cdb(0x17e)](_0x2e5cdb(0x2aa))[_0x2e5cdb(0x4e1)][_0x2e5cdb(0x4d1)]!==_0x46730b)throw new ie();if(S[_0x2e5cdb(0x17e)](_0x2e5cdb(0x2aa))['API_KEY'][_0x2e5cdb(0x4d1)]===_0x46730b)return _0xc8d5c7();if((_0x269386[_0x2e5cdb(0x3e1)]['includes']('/instance/create')||_0x269386[_0x2e5cdb(0x3e1)][_0x2e5cdb(0x1a9)](_0x2e5cdb(0x4e2)))&&!_0x46730b)throw new oe(_0x2e5cdb(0x2da),_0x2e5cdb(0x28c));let _0x33087d=S['get'](_0x2e5cdb(0x2aa))['JWT'];try{let [_0x7a1174,_0x2e2f20]=_0x269386[_0x2e5cdb(0x17e)]('authorization')['split']('\x20');if(_0x7a1174[_0x2e5cdb(0x42a)]()!==_0x2e5cdb(0x165))throw new ie();if(!(0x0,ea[_0x2e5cdb(0x219)])(_0x2e2f20))throw new ie();let _0x8ef92=_0x269386[_0x2e5cdb(0x179)],_0x592e92=ta[_0x2e5cdb(0x4d5)][_0x2e5cdb(0x54d)](_0x2e2f20,_0x33087d['SECRET'],{'ignoreExpiration':_0x33087d['EXPIRIN_IN']===0x0});if(_0x8ef92[_0x2e5cdb(0x2fb)]!==_0x592e92[_0x2e5cdb(0x2fb)]||Ge!==_0x592e92[_0x2e5cdb(0x1c9)])throw new ie();return _0xc8d5c7();}catch(_0x71f1a1){throw Bo[_0x2e5cdb(0x60b)](_0x71f1a1),new ie();}}async function Go(_0x551019,_0x228f3d,_0x1dad11){const _0x5f4752=a0_0x4a837a;let _0x4b4c81=S[_0x5f4752(0x17e)](_0x5f4752(0x2aa))[_0x5f4752(0x4e1)],_0x92a6e9=_0x551019[_0x5f4752(0x17e)](_0x5f4752(0x5d7));if(_0x4b4c81[_0x5f4752(0x4d1)]===_0x92a6e9)return _0x1dad11();if(_0x551019[_0x5f4752(0x3e1)][_0x5f4752(0x1a9)](_0x5f4752(0xda))){let _0x5cc060=S['get']('TRIAL_INSTANCE_NAME'),_0x4453f0=_0x551019[_0x5f4752(0x327)][_0x5f4752(0x2fb)];if(_0x5cc060&&_0x4453f0[_0x5f4752(0x42a)]()[_0x5f4752(0x363)](_0x5cc060[_0x5f4752(0x42a)]()))return _0x1dad11();if(!_0x92a6e9)throw new oe('Missing\x20global\x20api\x20key',_0x5f4752(0x28c));}if(_0x551019[_0x5f4752(0x3e1)][_0x5f4752(0x1a9)](_0x5f4752(0x4e2))&&!_0x92a6e9)throw new oe('Missing\x20global\x20api\x20key','The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x551019['originalUrl'][_0x5f4752(0x1a9)](_0x5f4752(0x191))&&!_0x92a6e9)throw new oe(_0x5f4752(0x2da),'The\x20global\x20api\x20key\x20must\x20be\x20set');try{let _0x57ecd0=_0x551019[_0x5f4752(0x179)];if((await le[_0x5f4752(0x146)][_0x5f4752(0x33c)](_0x57ecd0['instanceName']))['apikey']===_0x92a6e9)return _0x1dad11();}catch{}throw new ie();}var sa={'jwt':qo,'apikey':Go},ka=require(a0_0x4a837a(0xc6)),v=require(a0_0x4a837a(0x1fc)),E=(..._0x315962)=>{const _0x317848=a0_0x4a837a;let _0x4807ec={};return _0x315962[_0x317848(0x2c9)](_0x32f69d=>_0x4807ec[_0x32f69d]={'minLength':0x1,'description':_0x317848(0x482)+_0x32f69d+_0x317848(0x121)}),{'if':{'propertyNames':{'enum':[..._0x315962]}},'then':{'properties':_0x4807ec}};},N={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'instanceName':{'type':'string'}},...E('instanceName')},aa={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'oldToken':{'type':'string'}},'required':[a0_0x4a837a(0x3bc)],...E('oldToken')},gn={'properties':{'key':{'type':a0_0x4a837a(0x32b),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x4a837a(0x46f)},'fromMe':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]}},'required':['id',a0_0x4a837a(0x397),'fromMe'],...E('id',a0_0x4a837a(0x397))},'message':{'type':a0_0x4a837a(0x32b)}}},Y={'properties':{'delay':{'type':a0_0x4a837a(0x2e4),'description':a0_0x4a837a(0x2b7)},'presence':{'type':'string','enum':[a0_0x4a837a(0x2e2),a0_0x4a837a(0x47b),a0_0x4a837a(0x2a6),a0_0x4a837a(0x24b),a0_0x4a837a(0x1ba)]}}},X={'type':a0_0x4a837a(0x46f),'pattern':a0_0x4a837a(0x46d),'description':'Invalid\x20format'},oa={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'number':{...X},'options':{...Y},'textMessage':{'type':a0_0x4a837a(0x32b),'properties':{'text':{'type':a0_0x4a837a(0x46f)}},'required':[a0_0x4a837a(0x472)],...E(a0_0x4a837a(0x472))}},'required':[a0_0x4a837a(0x4a2),a0_0x4a837a(0x62e)]},ia={'type':a0_0x4a837a(0x46f),'pattern':a0_0x4a837a(0x215),'description':'Invalid\x20format'},mn={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'number':{...ia},'options':{...Y},'textMessage':{'type':a0_0x4a837a(0x32b),'properties':{'text':{'type':a0_0x4a837a(0x46f)}},'required':[a0_0x4a837a(0x472)],...E(a0_0x4a837a(0x472))}},'required':[a0_0x4a837a(0x4a2),'number']},hn={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'number':{...ia},'options':{...Y},'mediaMessage':{'type':a0_0x4a837a(0x32b),'properties':{'mediatype':{'type':a0_0x4a837a(0x46f),'enum':[a0_0x4a837a(0x59c),a0_0x4a837a(0x20c),a0_0x4a837a(0x2ce),a0_0x4a837a(0x272)]},'media':{'type':a0_0x4a837a(0x46f)},'fileName':{'type':a0_0x4a837a(0x46f)},'caption':{'type':a0_0x4a837a(0x46f)}},'required':[a0_0x4a837a(0x361),'media'],...E(a0_0x4a837a(0xca),a0_0x4a837a(0x24a),a0_0x4a837a(0xcf))}},'required':['mediaMessage',a0_0x4a837a(0x62e)]},ra={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'number':{...X},'options':{...Y},'stickerMessage':{'type':a0_0x4a837a(0x32b),'properties':{'image':{'type':a0_0x4a837a(0x46f)}},'required':[a0_0x4a837a(0x59c)],...E(a0_0x4a837a(0x59c))}},'required':['stickerMessage','number']},na={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'statusMessage':{'type':a0_0x4a837a(0x32b),'properties':{'type':{'type':a0_0x4a837a(0x46f),'enum':[a0_0x4a837a(0x472),'image','audio','video']},'content':{'type':'string'},'caption':{'type':a0_0x4a837a(0x46f)},'backgroundColor':{'type':a0_0x4a837a(0x46f)},'font':{'type':a0_0x4a837a(0x2e4),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x4a837a(0x5d3),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':'^\x5cd+','description':a0_0x4a837a(0x3db)}},'allContacts':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]}},'required':[a0_0x4a837a(0x295),'content'],...E(a0_0x4a837a(0x295),'content')}},'required':['statusMessage']},ca={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...X},'options':{...Y},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x4a837a(0x46f),'enum':[a0_0x4a837a(0x59c),'document',a0_0x4a837a(0x2ce),'audio']},'media':{'type':a0_0x4a837a(0x46f)},'fileName':{'type':a0_0x4a837a(0x46f)},'caption':{'type':a0_0x4a837a(0x46f)}},'required':[a0_0x4a837a(0x361),a0_0x4a837a(0xcf)],...E(a0_0x4a837a(0xca),'caption','media')}},'required':[a0_0x4a837a(0x494),a0_0x4a837a(0x62e)]},la={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...X},'options':{...Y},'audioMessage':{'type':'object','properties':{'audio':{'type':a0_0x4a837a(0x46f)}},'required':[a0_0x4a837a(0x272)],...E('audio')}},'required':[a0_0x4a837a(0x18e),a0_0x4a837a(0x62e)]},ua={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...X},'pollMessage':{'type':a0_0x4a837a(0x32b),'properties':{'name':{'type':'string'},'selectableCount':{'type':a0_0x4a837a(0x62e)},'values':{'type':'array','minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x4a837a(0x372),a0_0x4a837a(0x182),a0_0x4a837a(0x2b0)],...E(a0_0x4a837a(0x372),'selectableCount',a0_0x4a837a(0x2b0))}},'required':[a0_0x4a837a(0x62e),a0_0x4a837a(0x5b9)]},da={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...X},'options':{...Y},'buttonMessage':{'type':a0_0x4a837a(0x32b),'properties':{'title':{'type':a0_0x4a837a(0x46f)},'description':{'type':'string'},'footerText':{'type':a0_0x4a837a(0x46f)},'buttons':{'type':a0_0x4a837a(0x5d3),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'buttonText':{'type':a0_0x4a837a(0x46f)},'buttonId':{'type':a0_0x4a837a(0x46f)}},'required':[a0_0x4a837a(0x5b2),a0_0x4a837a(0x477)],...E(a0_0x4a837a(0x5b2),a0_0x4a837a(0x477))}},'mediaMessage':{'type':a0_0x4a837a(0x32b),'properties':{'media':{'type':a0_0x4a837a(0x46f)},'fileName':{'type':a0_0x4a837a(0x46f)},'mediatype':{'type':a0_0x4a837a(0x46f),'enum':['image',a0_0x4a837a(0x20c),'video']}},'required':[a0_0x4a837a(0xcf),a0_0x4a837a(0x361)],...E('media',a0_0x4a837a(0xca))}},'required':[a0_0x4a837a(0x142),a0_0x4a837a(0x27a)],...E(a0_0x4a837a(0x142),'description')}},'required':[a0_0x4a837a(0x62e),'buttonMessage']},pa={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'number':{...X},'options':{...Y},'locationMessage':{'type':a0_0x4a837a(0x32b),'properties':{'latitude':{'type':a0_0x4a837a(0x62e)},'longitude':{'type':'number'},'name':{'type':a0_0x4a837a(0x46f)},'address':{'type':'string'}},'required':[a0_0x4a837a(0x324),a0_0x4a837a(0x19d)],...E(a0_0x4a837a(0x372),a0_0x4a837a(0x3e6))}},'required':['number','locationMessage']},ga={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'number':{...X},'options':{...Y},'listMessage':{'type':a0_0x4a837a(0x32b),'properties':{'title':{'type':a0_0x4a837a(0x46f)},'description':{'type':a0_0x4a837a(0x46f)},'footerText':{'type':a0_0x4a837a(0x46f)},'buttonText':{'type':'string'},'sections':{'type':a0_0x4a837a(0x5d3),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4a837a(0x32b),'properties':{'title':{'type':a0_0x4a837a(0x46f)},'rows':{'type':a0_0x4a837a(0x5d3),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4a837a(0x32b),'properties':{'title':{'type':a0_0x4a837a(0x46f)},'description':{'type':a0_0x4a837a(0x46f)},'rowId':{'type':a0_0x4a837a(0x46f)}},'required':['title',a0_0x4a837a(0x5ae),a0_0x4a837a(0x2b9)],...E(a0_0x4a837a(0x142),'description',a0_0x4a837a(0x2b9))}}},'required':[a0_0x4a837a(0x142),a0_0x4a837a(0x35f)],...E(a0_0x4a837a(0x142))}}},'required':[a0_0x4a837a(0x142),a0_0x4a837a(0x5ae),a0_0x4a837a(0x5b2),a0_0x4a837a(0x2f1)],...E('title',a0_0x4a837a(0x5ae),a0_0x4a837a(0x5b2),'footerText')}},'required':[a0_0x4a837a(0x62e),a0_0x4a837a(0x107)]},ma={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'number':{...X},'options':{...Y},'contactMessage':{'type':a0_0x4a837a(0x5d3),'items':{'type':a0_0x4a837a(0x32b),'properties':{'fullName':{'type':a0_0x4a837a(0x46f)},'phoneNumber':{'type':'string','minLength':0xa}},'required':[a0_0x4a837a(0x4af),a0_0x4a837a(0x159)],...E(a0_0x4a837a(0x4af))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x4a837a(0x62e),a0_0x4a837a(0x168)]},ha={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'reactionMessage':{'type':a0_0x4a837a(0x32b),'properties':{'key':{'type':a0_0x4a837a(0x32b),'properties':{'id':{'type':a0_0x4a837a(0x46f)},'remoteJid':{'type':a0_0x4a837a(0x46f)},'fromMe':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]}},'required':['id',a0_0x4a837a(0x397),a0_0x4a837a(0x319)],...E('id',a0_0x4a837a(0x397))},'reaction':{'type':'string'}},'required':[a0_0x4a837a(0x1a8),a0_0x4a837a(0x30c)],...E(a0_0x4a837a(0x30c))}},'required':[a0_0x4a837a(0x531)]},fa={'$id':(0x0,v['v4'])(),'type':'object','properties':{'numbers':{'type':a0_0x4a837a(0x5d3),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4a837a(0x46f),'pattern':a0_0x4a837a(0x3de),'description':a0_0x4a837a(0x2fa)}}}},wa={'$id':(0x0,v['v4'])(),'type':'object','properties':{'readMessages':{'type':a0_0x4a837a(0x5d3),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':'string'},'fromMe':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x4a837a(0x46f)}},'required':['id',a0_0x4a837a(0x319),a0_0x4a837a(0x397)],...E('id',a0_0x4a837a(0x397))}}},'required':[a0_0x4a837a(0x293)]},ya={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'privacySettings':{'type':'object','properties':{'readreceipts':{'type':a0_0x4a837a(0x46f),'enum':[a0_0x4a837a(0x20e),'none']},'profile':{'type':a0_0x4a837a(0x46f),'enum':[a0_0x4a837a(0x20e),'contacts','contact_blacklist',a0_0x4a837a(0x144)]},'status':{'type':a0_0x4a837a(0x46f),'enum':[a0_0x4a837a(0x20e),a0_0x4a837a(0x438),'contact_blacklist','none']},'online':{'type':a0_0x4a837a(0x46f),'enum':['all','match_last_seen']},'last':{'type':'string','enum':[a0_0x4a837a(0x20e),a0_0x4a837a(0x438),a0_0x4a837a(0x633),a0_0x4a837a(0x144)]},'groupadd':{'type':'string','enum':['all',a0_0x4a837a(0x438),a0_0x4a837a(0x633),a0_0x4a837a(0x144)]}},'required':[a0_0x4a837a(0x630),'profile',a0_0x4a837a(0x2e7),a0_0x4a837a(0x2fd),a0_0x4a837a(0x530),a0_0x4a837a(0x42b)],...E('readreceipts','profile',a0_0x4a837a(0x2e7),'online',a0_0x4a837a(0x530),a0_0x4a837a(0x42b))}},'required':[a0_0x4a837a(0x655)]},ba={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'lastMessage':{'type':a0_0x4a837a(0x32b),'properties':{'key':{'type':a0_0x4a837a(0x32b),'properties':{'id':{'type':a0_0x4a837a(0x46f)},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]}},'required':['id',a0_0x4a837a(0x319),'remoteJid'],...E('id',a0_0x4a837a(0x397))},'messageTimestamp':{'type':'integer','minLength':0x1}},'required':['key'],...E(a0_0x4a837a(0x15f))},'archive':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]}},'required':[a0_0x4a837a(0x398),a0_0x4a837a(0x597)]},Sa={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'id':{'type':'string'},'fromMe':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x4a837a(0x46f)},'participant':{'type':a0_0x4a837a(0x46f)}},'required':['id','fromMe',a0_0x4a837a(0x397)],...E('id',a0_0x4a837a(0x397),a0_0x4a837a(0x3e4))},Ea={'$id':(0x0,v['v4'])(),'type':'object','properties':{'where':{'type':a0_0x4a837a(0x32b),'properties':{'_id':{'type':'string','minLength':0x1},'pushName':{'type':'string','minLength':0x1},'id':{'type':a0_0x4a837a(0x46f),'minLength':0x1}},...E(a0_0x4a837a(0x3f7),'id',a0_0x4a837a(0x2eb))}}},va={'$id':(0x0,v['v4'])(),'type':'object','properties':{'name':{'type':a0_0x4a837a(0x46f)}},...E(a0_0x4a837a(0x372))},Na={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'status':{'type':a0_0x4a837a(0x46f)}},...E(a0_0x4a837a(0x2e7))},Ee={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{'type':'string'},'picture':{'type':a0_0x4a837a(0x46f)}}},Ca={'type':a0_0x4a837a(0x32b),'properties':{'wuid':{'type':a0_0x4a837a(0x46f)},'name':{'type':a0_0x4a837a(0x46f)},'picture':{'type':a0_0x4a837a(0x46f)},'status':{'type':a0_0x4a837a(0x46f)},'isBusiness':{'type':a0_0x4a837a(0x50e)}}},Ta={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'where':{'type':a0_0x4a837a(0x32b),'properties':{'_id':{'type':a0_0x4a837a(0x46f),'minLength':0x1},'key':{'type':a0_0x4a837a(0x32b),'if':{'propertyNames':{'enum':['fromMe',a0_0x4a837a(0x397),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x4a837a(0x46f),'minLength':0x1,'description':a0_0x4a837a(0x27f)},'id':{'type':'string','minLength':0x1,'description':a0_0x4a837a(0x27f)},'fromMe':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x4a837a(0x32b)}},...E(a0_0x4a837a(0x3f7))},'limit':{'type':a0_0x4a837a(0x2e4)}}},fn={'$id':(0x0,v['v4'])(),'type':'object','properties':{'where':{'type':a0_0x4a837a(0x32b),'properties':{'_id':{'type':a0_0x4a837a(0x46f)},'remoteJid':{'type':a0_0x4a837a(0x46f)},'id':{'type':a0_0x4a837a(0x46f)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'participant':{'type':'string'},'status':{'type':'string','enum':[a0_0x4a837a(0x2bf),'PENDING',a0_0x4a837a(0x64b),'DELIVERY_ACK',a0_0x4a837a(0x593),'PLAYED']}},...E(a0_0x4a837a(0x3f7),a0_0x4a837a(0x397),'id',a0_0x4a837a(0x2e7))},'limit':{'type':a0_0x4a837a(0x2e4)}}},Ra={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...X},'presence':{'type':a0_0x4a837a(0x46f),'enum':[a0_0x4a837a(0x2e2),'available',a0_0x4a837a(0x2a6),a0_0x4a837a(0x24b),a0_0x4a837a(0x1ba)]}},'required':[a0_0x4a837a(0xcc),a0_0x4a837a(0x62e)]},Ma={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'subject':{'type':a0_0x4a837a(0x46f)},'description':{'type':a0_0x4a837a(0x46f)},'profilePicture':{'type':a0_0x4a837a(0x46f)},'participants':{'type':a0_0x4a837a(0x5d3),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4a837a(0x46f),'minLength':0xa,'pattern':a0_0x4a837a(0x4f2),'description':a0_0x4a837a(0x285)}}},'required':[a0_0x4a837a(0x418),a0_0x4a837a(0x109)],...E(a0_0x4a837a(0x418),a0_0x4a837a(0x5ae),a0_0x4a837a(0x40f))},ve={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'groupJid':{'type':a0_0x4a837a(0x46f),'pattern':a0_0x4a837a(0x3ba)}},'required':[a0_0x4a837a(0x5ed)],...E(a0_0x4a837a(0x5ed))},Aa={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'groupJid':{'type':a0_0x4a837a(0x46f)},'action':{'type':'string','enum':[a0_0x4a837a(0xd0),a0_0x4a837a(0x3d7),a0_0x4a837a(0x595),a0_0x4a837a(0x5fd)]},'participants':{'type':a0_0x4a837a(0x5d3),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x4a837a(0x46f),'minLength':0xa,'pattern':a0_0x4a837a(0x4f2),'description':'\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}},'required':[a0_0x4a837a(0x5ed),a0_0x4a837a(0x524),a0_0x4a837a(0x109)],...E(a0_0x4a837a(0x5ed),a0_0x4a837a(0x524))},Ia={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'groupJid':{'type':'string'},'expiration':{'type':'number','enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x4a837a(0x5ed),'expiration'],...E(a0_0x4a837a(0x5ed),'expiration')},Oa={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'groupJid':{'type':'string'},'image':{'type':a0_0x4a837a(0x46f)}},'required':[a0_0x4a837a(0x5ed),'image'],...E(a0_0x4a837a(0x5ed),'image')},Da={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'groupJid':{'type':a0_0x4a837a(0x46f)},'description':{'type':a0_0x4a837a(0x46f)}},'required':[a0_0x4a837a(0x5ed),'description'],...E('groupJid',a0_0x4a837a(0x5ae))},_a={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'name':{'type':a0_0x4a837a(0x46f)}},'required':[a0_0x4a837a(0x5ed),a0_0x4a837a(0x372)],...E(a0_0x4a837a(0x5ed),'name')},Pa={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'groupJid':{'type':a0_0x4a837a(0x46f)},'setting':{'type':a0_0x4a837a(0x46f),'enum':[a0_0x4a837a(0x3eb),a0_0x4a837a(0x64c),'unlocked',a0_0x4a837a(0x166)]}},'required':['groupJid',a0_0x4a837a(0x289)],...E(a0_0x4a837a(0x5ed),a0_0x4a837a(0x289))},xa={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'inviteCode':{'type':a0_0x4a837a(0x46f)}},'required':[a0_0x4a837a(0x5b6)],...E(a0_0x4a837a(0x5b6))},$a={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'url':{'type':a0_0x4a837a(0x46f)},'enabled':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]}},'required':[a0_0x4a837a(0x351),a0_0x4a837a(0x258)]},wn={'$id':(0x0,v['v4'])(),'type':a0_0x4a837a(0x32b),'properties':{'local_map':{'type':'boolean','enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x4a837a(0x50e),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x4a837a(0x658),a0_0x4a837a(0x3a0),a0_0x4a837a(0x26c),'MESSAGES_SET','MESSAGES_UPDATE',a0_0x4a837a(0x5de),a0_0x4a837a(0x445),'CONTACTS_SET',a0_0x4a837a(0x403),a0_0x4a837a(0x28a),'PRESENCE_UPDATE',a0_0x4a837a(0x555),'CHATS_UPSERT',a0_0x4a837a(0x51c),a0_0x4a837a(0x439),'CONNECTION_UPDATE',a0_0x4a837a(0x1d1),a0_0x4a837a(0x5f6),a0_0x4a837a(0x429)],...E(a0_0x4a837a(0x658),a0_0x4a837a(0x3a0),a0_0x4a837a(0x26c),a0_0x4a837a(0x4ee),a0_0x4a837a(0x208),a0_0x4a837a(0x5de),'SEND_MESSAGE',a0_0x4a837a(0x3b4),a0_0x4a837a(0x403),a0_0x4a837a(0x28a),'PRESENCE_UPDATE',a0_0x4a837a(0x555),a0_0x4a837a(0x162),a0_0x4a837a(0x51c),a0_0x4a837a(0x439),'CONNECTION_UPDATE',a0_0x4a837a(0x1d1),'GROUPS_UPDATE',a0_0x4a837a(0x429))},We=class{},He=class extends W{constructor(_0x4378b3){const _0x2d3ab6=a0_0x4a837a;super(_0x4378b3),this[_0x2d3ab6(0x1c6)]=_0x4378b3;}[a0_0x4a837a(0x5fb)](_0x248d86){return ks(_0x248d86);}async[a0_0x4a837a(0x426)](_0x2777d4){const _0x2edcf7=a0_0x4a837a;if(_0x2777d4[_0x2edcf7(0x58b)]!==0x0)try{return{'insertCount':(await this[_0x2edcf7(0x5fb)](_0x2777d4[0x0][_0x2edcf7(0x404)])[_0x2edcf7(0x44b)]([..._0x2777d4]))[_0x2edcf7(0x58b)]};}catch(_0x358f75){return _0x358f75;}}async[a0_0x4a837a(0x580)](_0x195894){const _0x3fb65f=a0_0x4a837a;try{return{'deletedCount':(await this['getContactModelForOwner'](_0x195894[_0x3fb65f(0x61c)][_0x3fb65f(0x404)])[_0x3fb65f(0x561)]({..._0x195894[_0x3fb65f(0x61c)]}))[_0x3fb65f(0x1a4)]};}catch(_0x1bedc1){return{'error':_0x1bedc1?.[_0x3fb65f(0x42d)]()};}}async[a0_0x4a837a(0x525)](_0x354aee,_0x3faf8a){const _0x2637cf=a0_0x4a837a;try{if(_0x354aee[_0x2637cf(0x58b)]===0x0)return;let _0x4b1829=this[_0x2637cf(0x5fb)](_0x3faf8a),_0x583f41=_0x354aee[_0x2637cf(0x227)](_0x15630c=>({'updateOne':{'filter':{'_id':_0x15630c['_id'],'owner':_0x3faf8a},'update':{..._0x15630c}}})),{modifiedCount:_0x53842a}=await _0x4b1829[_0x2637cf(0x1e8)](_0x583f41);return{'insertCount':_0x53842a};}catch{return;}}async[a0_0x4a837a(0x33c)](_0x597b1b){const _0x1b943f=a0_0x4a837a;try{return await this[_0x1b943f(0x5fb)](_0x597b1b['where'][_0x1b943f(0x404)])['find']({..._0x597b1b[_0x1b943f(0x61c)]})['limit'](_0x597b1b?.[_0x1b943f(0x4f6)]??0x0)[_0x1b943f(0x16d)]();}catch{return[];}}async[a0_0x4a837a(0x596)](_0x3e3d4c){const _0x1d9220=a0_0x4a837a;try{return await this[_0x1d9220(0x5fb)](_0x3e3d4c[_0x1d9220(0x61c)][_0x1d9220(0x404)])[_0x1d9220(0x596)]({..._0x3e3d4c[_0x1d9220(0x61c)]})[_0x1d9220(0x16d)]();}catch{return null;}}async[a0_0x4a837a(0x376)](_0x4e7e30){const _0x295b64=a0_0x4a837a;try{return await this[_0x295b64(0x5fb)](_0x4e7e30)[_0x295b64(0x65e)]['drop'](),{'success':!0x0};}catch(_0x3f214a){return console[_0x295b64(0x60b)](_0x3f214a),{'success':!0x1,'error':_0x3f214a};}}},Ke=require('jsonschema'),Tn=require('express-async-errors'),ns=new C(a0_0x4a837a(0x33d)),k=class{constructor(){}['routerPath'](_0xd0aa46,_0x1dc67b=!0x0){const _0x4fdc3f=a0_0x4a837a;let _0xeeb541='/'+_0xd0aa46;return _0x1dc67b&&(_0xeeb541+=_0x4fdc3f(0xc9)),_0xeeb541;}async[a0_0x4a837a(0x10e)](_0x74f9f8){const _0x1f6ed6=a0_0x4a837a;let {request:_0x4425ac,schema:_0x4061e7,ClassRef:_0x144ff5,execute:_0x2aae71}=_0x74f9f8,_0x13380d=new _0x144ff5(),_0x577de9=_0x4425ac[_0x1f6ed6(0x327)],_0x220b58=_0x4425ac[_0x1f6ed6(0x179)];_0x4425ac?.[_0x1f6ed6(0x4d2)]&&Object['keys'](_0x4425ac['query'])[_0x1f6ed6(0x58b)]>0x0&&Object[_0x1f6ed6(0x334)](_0x220b58,_0x4425ac[_0x1f6ed6(0x4d2)]),_0x4425ac['originalUrl']['includes'](_0x1f6ed6(0xda))&&Object['assign'](_0x220b58,_0x577de9),Object['assign'](_0x13380d,_0x577de9);let _0x182bf8=_0x4061e7?(0x0,Ke[_0x1f6ed6(0x5e6)])(_0x13380d,_0x4061e7):{'valid':!0x0,'errors':[]};if(!_0x182bf8[_0x1f6ed6(0x501)]){let _0x190719=_0x182bf8['errors'][_0x1f6ed6(0x227)](({property:_0xcef3,stack:_0x4e4466,schema:_0x2de369})=>{const _0x5a7040=_0x1f6ed6;let _0x1bf24a;return _0x2de369[_0x5a7040(0x5ae)]?_0x1bf24a=_0x2de369[_0x5a7040(0x5ae)]:_0x1bf24a=_0x4e4466[_0x5a7040(0x522)](_0x5a7040(0x37b),''),{'property':_0xcef3[_0x5a7040(0x522)](_0x5a7040(0x37b),''),'message':_0x1bf24a};});throw ns[_0x1f6ed6(0x60b)]([..._0x190719]),new g(..._0x190719);}return await _0x2aae71(_0x220b58,_0x13380d);}async[a0_0x4a837a(0x414)](_0x2f754f){const _0xa91521=a0_0x4a837a;let {request:_0x41b4e1,ClassRef:_0x51eeaa,schema:_0x24bf5a,execute:_0x3e70a5}=_0x2f754f,_0x3c9df9=_0x41b4e1[_0xa91521(0x4d2)];if(!_0x3c9df9?.[_0xa91521(0x5ed)])throw new g(_0xa91521(0x3b9),_0xa91521(0x52b));let _0x4375c3=_0x41b4e1[_0xa91521(0x179)],_0x49f992=_0x41b4e1[_0xa91521(0x327)],_0x802c71=new _0x51eeaa();Object[_0xa91521(0x334)](_0x49f992,_0x3c9df9),Object[_0xa91521(0x334)](_0x802c71,_0x49f992);let _0x4d5d5d=(0x0,Ke[_0xa91521(0x5e6)])(_0x802c71,_0x24bf5a);if(!_0x4d5d5d[_0xa91521(0x501)]){let _0x379823=_0x4d5d5d[_0xa91521(0x218)][_0xa91521(0x227)](({property:_0x4a0cd2,stack:_0x284a23,schema:_0x32785d})=>{const _0x31ca31=_0xa91521;let _0x54cc5b;return _0x32785d['description']?_0x54cc5b=_0x32785d[_0x31ca31(0x5ae)]:_0x54cc5b=_0x284a23[_0x31ca31(0x522)](_0x31ca31(0x37b),''),{'property':_0x4a0cd2['replace'](_0x31ca31(0x37b),''),'message':_0x54cc5b};});throw ns[_0xa91521(0x60b)]([..._0x379823]),new g(..._0x379823);}return await _0x3e70a5(_0x4375c3,_0x802c71);}async[a0_0x4a837a(0x485)](_0x456e2b){const _0x3e03ce=a0_0x4a837a;let {request:_0x327bd6,ClassRef:_0x34aa60,schema:_0x33e450,execute:_0x1c221e}=_0x456e2b,_0x1ede4e=_0x327bd6[_0x3e03ce(0x327)];if(!_0x1ede4e?.[_0x3e03ce(0x5b6)])throw new g(_0x3e03ce(0x578),_0x3e03ce(0xb7));let _0x548acf=_0x327bd6[_0x3e03ce(0x179)],_0x2da045=_0x327bd6[_0x3e03ce(0x327)],_0x2ea687=new _0x34aa60();Object['assign'](_0x2da045,_0x1ede4e),Object[_0x3e03ce(0x334)](_0x2ea687,_0x2da045);let _0x1b994d=(0x0,Ke[_0x3e03ce(0x5e6)])(_0x2ea687,_0x33e450);if(!_0x1b994d[_0x3e03ce(0x501)]){let _0xdcd204=_0x1b994d[_0x3e03ce(0x218)][_0x3e03ce(0x227)](({property:_0xd93891,stack:_0x45a2db,schema:_0x5d27e5})=>{const _0x268f7f=_0x3e03ce;let _0x5229e8;return _0x5d27e5['description']?_0x5229e8=_0x5d27e5['description']:_0x5229e8=_0x45a2db[_0x268f7f(0x522)](_0x268f7f(0x37b),''),{'property':_0xd93891[_0x268f7f(0x522)](_0x268f7f(0x37b),''),'message':_0x5229e8};});throw ns['error']([..._0xdcd204]),new g(..._0xdcd204);}return await _0x1c221e(_0x548acf,_0x2ea687);}},b=class{},ze=class extends k{constructor(..._0x3d4105){const _0x3aa0da=a0_0x4a837a;super(),this[_0x3aa0da(0x55c)]=(0x0,ka[_0x3aa0da(0x122)])(),this[_0x3aa0da(0x55c)][_0x3aa0da(0x502)](this[_0x3aa0da(0x535)](_0x3aa0da(0x534)),..._0x3d4105,async(_0x45f1d3,_0x1571bd)=>{const _0x56fe19=_0x3aa0da;let _0x17f5e4=await this[_0x56fe19(0x10e)]({'request':_0x45f1d3,'schema':Ra,'ClassRef':ke,'execute':(_0x442f63,_0x103afa)=>D[_0x56fe19(0x534)](_0x442f63,_0x103afa)});return _0x1571bd['status'](0xc9)['json'](_0x17f5e4);})[_0x3aa0da(0x502)](this[_0x3aa0da(0x535)](_0x3aa0da(0x3be)),..._0x3d4105,async(_0x23989b,_0x452797)=>{const _0x2e65ac=_0x3aa0da;let _0x576e6a=await this[_0x2e65ac(0x10e)]({'request':_0x23989b,'schema':fa,'ClassRef':Le,'execute':(_0x3c3f3f,_0x22e51c)=>D[_0x2e65ac(0x134)](_0x3c3f3f,_0x22e51c)});return _0x452797['status'](0xc9)['json'](_0x576e6a);})[_0x3aa0da(0x502)](this[_0x3aa0da(0x535)](_0x3aa0da(0x66a)),..._0x3d4105,async(_0x401c6e,_0x3b7e39)=>{const _0x42858d=_0x3aa0da;let _0x1daffa=await this[_0x42858d(0x10e)]({'request':_0x401c6e,'schema':N,'ClassRef':b,'execute':(_0x24198c,_0x250510)=>D['editChat'](_0x24198c,_0x250510)});return _0x3b7e39['status'](0xc9)[_0x42858d(0x2c8)](_0x1daffa);})['put'](this[_0x3aa0da(0x535)](_0x3aa0da(0x533)),..._0x3d4105,async(_0x46f3f9,_0x5f3744)=>{const _0x54b2cf=_0x3aa0da;let _0x57d4a1=await this[_0x54b2cf(0x10e)]({'request':_0x46f3f9,'schema':wa,'ClassRef':Je,'execute':(_0x375a96,_0x48628e)=>D['readMessage'](_0x375a96,_0x48628e)});return _0x5f3744[_0x54b2cf(0x2e7)](0xc9)[_0x54b2cf(0x2c8)](_0x57d4a1);})[_0x3aa0da(0x17a)](this['routerPath'](_0x3aa0da(0x4b9)),..._0x3d4105,async(_0x5317fe,_0x351d0d)=>{const _0xb06b4=_0x3aa0da;let _0x133ecb=await this[_0xb06b4(0x10e)]({'request':_0x5317fe,'schema':ba,'ClassRef':je,'execute':(_0x1fab6e,_0x501788)=>D['archiveChat'](_0x1fab6e,_0x501788)});return _0x351d0d[_0xb06b4(0x2e7)](0xc9)['json'](_0x133ecb);})[_0x3aa0da(0x580)](this['routerPath']('deleteMessageForEveryone'),..._0x3d4105,async(_0x12c08e,_0x14895f)=>{const _0x29bdd1=_0x3aa0da;let _0x1f970d=await this[_0x29bdd1(0x10e)]({'request':_0x12c08e,'schema':Sa,'ClassRef':Be,'execute':(_0x53563c,_0x7b34fd)=>D[_0x29bdd1(0x31c)](_0x53563c,_0x7b34fd)});return _0x14895f[_0x29bdd1(0x2e7)](0xc9)[_0x29bdd1(0x2c8)](_0x1f970d);})[_0x3aa0da(0x502)](this[_0x3aa0da(0x535)](_0x3aa0da(0x1ec)),..._0x3d4105,async(_0x2b4335,_0xdb76f2)=>{const _0xfe07c5=_0x3aa0da;let _0x2d0dd8=await this[_0xfe07c5(0x10e)]({'request':_0x2b4335,'schema':Ee,'ClassRef':Se,'execute':(_0xcbfa7a,_0x58bddc)=>D[_0xfe07c5(0x1fd)](_0xcbfa7a,_0x58bddc)});return _0xdb76f2[_0xfe07c5(0x2e7)](0xc8)[_0xfe07c5(0x2c8)](_0x2d0dd8);})['post'](this[_0x3aa0da(0x535)]('fetchProfile'),..._0x3d4105,async(_0x420b31,_0x29dc71)=>{const _0x440b05=_0x3aa0da;let _0x214884=await this['dataValidate']({'request':_0x420b31,'schema':Ca,'ClassRef':Se,'execute':(_0x158a2c,_0x40510f)=>D[_0x440b05(0x4aa)](_0x158a2c,_0x40510f)});return _0x29dc71[_0x440b05(0x2e7)](0xc8)[_0x440b05(0x2c8)](_0x214884);})[_0x3aa0da(0x502)](this[_0x3aa0da(0x535)](_0x3aa0da(0x2c0)),..._0x3d4105,async(_0x479d44,_0x1f71ee)=>{const _0x2aee84=_0x3aa0da;let _0x144fee=await this[_0x2aee84(0x10e)]({'request':_0x479d44,'schema':Ea,'ClassRef':We,'execute':(_0x1a5ab1,_0x16efb3)=>D[_0x2aee84(0x19e)](_0x1a5ab1,_0x16efb3)});return _0x1f71ee['status'](0xc8)['json'](_0x144fee);})[_0x3aa0da(0x502)](this[_0x3aa0da(0x535)]('getBase64FromMediaMessage'),..._0x3d4105,async(_0x1ffc4c,_0x3d1d4a)=>{const _0x458ab2=_0x3aa0da;let _0x429dae=await this['dataValidate']({'request':_0x1ffc4c,'schema':null,'ClassRef':Object,'execute':(_0x241d44,_0x4a7bba)=>D[_0x458ab2(0x5c7)](_0x241d44,_0x4a7bba)});return _0x3d1d4a['status'](0xc9)[_0x458ab2(0x2c8)](_0x429dae);})['post'](this[_0x3aa0da(0x535)](_0x3aa0da(0x328)),..._0x3d4105,async(_0x3c2c9c,_0x1e8e8b)=>{const _0x2896cb=_0x3aa0da;let _0x2d3e0e=await this[_0x2896cb(0x10e)]({'request':_0x3c2c9c,'schema':Ta,'ClassRef':xe,'execute':(_0x5156c6,_0xbef4ab)=>D[_0x2896cb(0x34d)](_0x5156c6,_0xbef4ab)});return _0x1e8e8b[_0x2896cb(0x2e7)](0xc8)[_0x2896cb(0x2c8)](_0x2d3e0e);})[_0x3aa0da(0x17e)](this[_0x3aa0da(0x535)](_0x3aa0da(0x66f)),..._0x3d4105,async(_0x32558,_0x47fedd)=>{const _0x5b3ac6=_0x3aa0da;let _0x5b14bd=await this[_0x5b3ac6(0x10e)]({'request':_0x32558,'schema':null,'ClassRef':b,'execute':_0x48b8aa=>D['fetchChats'](_0x48b8aa)});return _0x47fedd[_0x5b3ac6(0x2e7)](0xc8)[_0x5b3ac6(0x2c8)](_0x5b14bd);})[_0x3aa0da(0x17e)](this[_0x3aa0da(0x535)](_0x3aa0da(0x150)),..._0x3d4105,async(_0x586f50,_0x378e2c)=>{const _0x495156=_0x3aa0da;let _0x57b136=await this['dataValidate']({'request':_0x586f50,'schema':null,'ClassRef':b,'execute':_0x31f35d=>D[_0x495156(0x150)](_0x31f35d)});return _0x378e2c[_0x495156(0x2e7)](0xc8)['json'](_0x57b136);})[_0x3aa0da(0x17a)](this['routerPath']('updatePrivacySettings'),..._0x3d4105,async(_0x465252,_0x114cfd)=>{const _0x176f21=_0x3aa0da;let _0x1a0ef1=await this['dataValidate']({'request':_0x465252,'schema':ya,'ClassRef':Fe,'execute':(_0x18a642,_0x3c5633)=>D[_0x176f21(0x571)](_0x18a642,_0x3c5633)});return _0x114cfd['status'](0xc9)[_0x176f21(0x2c8)](_0x1a0ef1);})[_0x3aa0da(0x502)](this[_0x3aa0da(0x535)](_0x3aa0da(0x381)),..._0x3d4105,async(_0x2142a5,_0x4c01e2)=>{const _0x11a954=_0x3aa0da;let _0x11794c=await this[_0x11a954(0x10e)]({'request':_0x2142a5,'schema':Ee,'ClassRef':we,'execute':(_0x4465d9,_0x295c3d)=>D['fetchBusinessProfile'](_0x4465d9,_0x295c3d)});return _0x4c01e2[_0x11a954(0x2e7)](0xc8)[_0x11a954(0x2c8)](_0x11794c);})[_0x3aa0da(0x502)](this[_0x3aa0da(0x535)](_0x3aa0da(0x674)),..._0x3d4105,async(_0x20a06a,_0x903cf8)=>{const _0x17e406=_0x3aa0da;let _0x57a7b3=await this['dataValidate']({'request':_0x20a06a,'schema':va,'ClassRef':Ue,'execute':(_0x155d86,_0x16e0b5)=>D['updateProfileName'](_0x155d86,_0x16e0b5)});return _0x903cf8['status'](0xc8)[_0x17e406(0x2c8)](_0x57a7b3);})[_0x3aa0da(0x502)](this[_0x3aa0da(0x535)]('updateProfileStatus'),..._0x3d4105,async(_0x3bede4,_0x30830e)=>{const _0x4ffd46=_0x3aa0da;let _0x56ebda=await this['dataValidate']({'request':_0x3bede4,'schema':Na,'ClassRef':Ve,'execute':(_0x3e5d91,_0x10af78)=>D[_0x4ffd46(0x442)](_0x3e5d91,_0x10af78)});return _0x30830e['status'](0xc8)[_0x4ffd46(0x2c8)](_0x56ebda);})[_0x3aa0da(0x17a)](this[_0x3aa0da(0x535)]('updateProfilePicture'),..._0x3d4105,async(_0x416fed,_0x286ea6)=>{const _0x2c4707=_0x3aa0da;let _0x3f89ef=await this[_0x2c4707(0x10e)]({'request':_0x416fed,'schema':Ee,'ClassRef':we,'execute':(_0x56888a,_0x3bc496)=>D[_0x2c4707(0x252)](_0x56888a,_0x3bc496)});return _0x286ea6['status'](0xc8)[_0x2c4707(0x2c8)](_0x3f89ef);})['delete'](this[_0x3aa0da(0x535)](_0x3aa0da(0x610)),..._0x3d4105,async(_0x58d31c,_0x49ecd1)=>{const _0x19b994=_0x3aa0da;let _0x21569b=await this[_0x19b994(0x10e)]({'request':_0x58d31c,'schema':Ee,'ClassRef':we,'execute':(_0x59cc88,_0x4d07f9)=>D[_0x19b994(0x610)](_0x59cc88,_0x4d07f9)});return _0x49ecd1['status'](0xc8)[_0x19b994(0x2c8)](_0x21569b);});}},La=require('express'),Qe=class{},Ye=class{},Xe=class{},Ze=class{},et=class{},Z=class{},tt=class{},st=class extends Z{},at=class extends Z{},ot=class extends k{constructor(..._0x5f44b7){const _0x1d79fa=a0_0x4a837a;super(),this[_0x1d79fa(0x55c)]=(0x0,La[_0x1d79fa(0x122)])(),this[_0x1d79fa(0x55c)]['post'](this[_0x1d79fa(0x535)]('create'),..._0x5f44b7,async(_0x37ceef,_0x2b3390)=>{const _0x168d05=_0x1d79fa;let _0x2b6ab9=await this[_0x168d05(0x10e)]({'request':_0x37ceef,'schema':Ma,'ClassRef':Qe,'execute':(_0x16ae7b,_0x5e910e)=>U['createGroup'](_0x16ae7b,_0x5e910e)});_0x2b3390['status'](0xc9)[_0x168d05(0x2c8)](_0x2b6ab9);})['put'](this['routerPath']('updateGroupPicture'),..._0x5f44b7,async(_0x15cbcf,_0x3c0306)=>{const _0x106676=_0x1d79fa;let _0x72a5c=await this[_0x106676(0x414)]({'request':_0x15cbcf,'schema':Oa,'ClassRef':Ye,'execute':(_0xf24c36,_0x8466d)=>U['updateGroupPicture'](_0xf24c36,_0x8466d)});_0x3c0306[_0x106676(0x2e7)](0xc9)[_0x106676(0x2c8)](_0x72a5c);})['put'](this['routerPath'](_0x1d79fa(0x4a3)),..._0x5f44b7,async(_0x437fc7,_0x4aa534)=>{const _0x24c8ce=_0x1d79fa;let _0x8da959=await this['groupValidate']({'request':_0x437fc7,'schema':Da,'ClassRef':Xe,'execute':(_0x47a39c,_0x2d18cf)=>U[_0x24c8ce(0x4a3)](_0x47a39c,_0x2d18cf)});_0x4aa534[_0x24c8ce(0x2e7)](0xc9)[_0x24c8ce(0x2c8)](_0x8da959);})[_0x1d79fa(0x17a)](this[_0x1d79fa(0x535)](_0x1d79fa(0x4ba)),..._0x5f44b7,async(_0x283c02,_0x210634)=>{const _0x143fed=_0x1d79fa;let _0x5706c7=await this[_0x143fed(0x414)]({'request':_0x283c02,'schema':_a,'ClassRef':Ze,'execute':(_0x13c663,_0x43cbec)=>U[_0x143fed(0x4ba)](_0x13c663,_0x43cbec)});_0x210634[_0x143fed(0x2e7)](0xc9)['json'](_0x5706c7);})[_0x1d79fa(0x17a)](this[_0x1d79fa(0x535)](_0x1d79fa(0x56d)),..._0x5f44b7,async(_0x446476,_0x3b3d1d)=>{const _0x27bc5c=_0x1d79fa;let _0x134880=await this[_0x27bc5c(0x414)]({'request':_0x446476,'schema':Pa,'ClassRef':et,'execute':(_0x3669ca,_0x1ba295)=>U[_0x27bc5c(0x56d)](_0x3669ca,_0x1ba295)});_0x3b3d1d[_0x27bc5c(0x2e7)](0xc9)['json'](_0x134880);})['put'](this[_0x1d79fa(0x535)](_0x1d79fa(0x181)),..._0x5f44b7,async(_0x3afc88,_0x4038a6)=>{const _0x2efe2a=_0x1d79fa;let _0x1a915c=await this[_0x2efe2a(0x414)]({'request':_0x3afc88,'schema':Ia,'ClassRef':at,'execute':(_0x2a8fc8,_0xb98e0c)=>U[_0x2efe2a(0x181)](_0x2a8fc8,_0xb98e0c)});_0x4038a6['status'](0xc9)[_0x2efe2a(0x2c8)](_0x1a915c);})[_0x1d79fa(0x17e)](this['routerPath'](_0x1d79fa(0x3b1)),..._0x5f44b7,async(_0x33239e,_0x49c65c)=>{const _0x42d9ce=_0x1d79fa;let _0x3fab20=await this['groupValidate']({'request':_0x33239e,'schema':ve,'ClassRef':Z,'execute':(_0x4d7ed2,_0x43ff3e)=>U[_0x42d9ce(0x2f8)](_0x4d7ed2,_0x43ff3e)});_0x49c65c[_0x42d9ce(0x2e7)](0xc8)[_0x42d9ce(0x2c8)](_0x3fab20);})[_0x1d79fa(0x17e)](this[_0x1d79fa(0x535)]('findGroups'),..._0x5f44b7,async(_0x5f1a89,_0x2d3b91)=>{const _0x12e97d=_0x1d79fa;let _0x4e20bf=await this['dataValidate']({'request':_0x5f1a89,'schema':N,'ClassRef':b,'execute':_0x5af6ab=>U[_0x12e97d(0x30e)](_0x5af6ab)});_0x2d3b91['status'](0xc8)[_0x12e97d(0x2c8)](_0x4e20bf);})[_0x1d79fa(0x17e)](this[_0x1d79fa(0x535)](_0x1d79fa(0x109)),..._0x5f44b7,async(_0xc7b6c7,_0x299624)=>{const _0xabe084=_0x1d79fa;let _0x5abf38=await this[_0xabe084(0x414)]({'request':_0xc7b6c7,'schema':ve,'ClassRef':Z,'execute':(_0x43c4d1,_0x236edd)=>U[_0xabe084(0x509)](_0x43c4d1,_0x236edd)});_0x299624[_0xabe084(0x2e7)](0xc8)[_0xabe084(0x2c8)](_0x5abf38);})[_0x1d79fa(0x17e)](this[_0x1d79fa(0x535)](_0x1d79fa(0x5b6)),..._0x5f44b7,async(_0x34ff93,_0x5372c1)=>{const _0x42a236=_0x1d79fa;let _0x39d512=await this[_0x42a236(0x414)]({'request':_0x34ff93,'schema':ve,'ClassRef':Z,'execute':(_0x19c975,_0x4c482e)=>U[_0x42a236(0x5b6)](_0x19c975,_0x4c482e)});_0x5372c1[_0x42a236(0x2e7)](0xc8)[_0x42a236(0x2c8)](_0x39d512);})[_0x1d79fa(0x17a)](this[_0x1d79fa(0x535)](_0x1d79fa(0x2d8)),..._0x5f44b7,async(_0x415ca9,_0xd84342)=>{const _0x3b1ddd=_0x1d79fa;let _0x1b41a7=await this[_0x3b1ddd(0x485)]({'request':_0x415ca9,'schema':xa,'ClassRef':tt,'execute':(_0x2f8cb7,_0x4b7755)=>U['joinGroup'](_0x2f8cb7,_0x4b7755)});_0xd84342[_0x3b1ddd(0x2e7)](0xc9)[_0x3b1ddd(0x2c8)](_0x1b41a7);})[_0x1d79fa(0x17a)](this[_0x1d79fa(0x535)](_0x1d79fa(0x4f4)),..._0x5f44b7,async(_0x3484e8,_0x41bb59)=>{const _0x24ce93=_0x1d79fa;let _0x5e412d=await this[_0x24ce93(0x414)]({'request':_0x3484e8,'schema':ve,'ClassRef':Z,'execute':(_0x226e40,_0x5996fc)=>U[_0x24ce93(0x4f4)](_0x226e40,_0x5996fc)});_0x41bb59[_0x24ce93(0x2e7)](0xc9)['json'](_0x5e412d);})[_0x1d79fa(0x17a)](this['routerPath'](_0x1d79fa(0x39d)),..._0x5f44b7,async(_0x4d2710,_0xb9b2f7)=>{const _0x1a6878=_0x1d79fa;let _0x2c132e=await this[_0x1a6878(0x414)]({'request':_0x4d2710,'schema':Aa,'ClassRef':st,'execute':(_0x4aac69,_0x572432)=>U[_0x1a6878(0x3d9)](_0x4aac69,_0x572432)});_0xb9b2f7[_0x1a6878(0x2e7)](0xc9)[_0x1a6878(0x2c8)](_0x2c132e);})[_0x1d79fa(0x580)](this[_0x1d79fa(0x535)](_0x1d79fa(0x22f)),..._0x5f44b7,async(_0x338aa4,_0x10a5f0)=>{const _0x2c088f=_0x1d79fa;let _0xef7d87=await this[_0x2c088f(0x414)]({'request':_0x338aa4,'schema':{},'ClassRef':Z,'execute':(_0x1b4716,_0x43b93d)=>U[_0x2c088f(0x22f)](_0x1b4716,_0x43b93d)});_0x10a5f0['status'](0xc8)[_0x2c088f(0x2c8)](_0xef7d87);});}},Ja=require(a0_0x4a837a(0xc6)),Ne=require(a0_0x4a837a(0x444)),cs=require(a0_0x4a837a(0x1fc)),Ua=require(a0_0x4a837a(0x443)),Va=T(require(a0_0x4a837a(0x5c5))),it=class{},rt=class c{constructor(_0x2815c8,_0x4eb447,_0x311771){const _0x18e008=a0_0x4a837a;this[_0x18e008(0x1c6)]=_0x2815c8,this['waMonitor']=_0x4eb447,this[_0x18e008(0x5c0)]=_0x311771,this[_0x18e008(0x5a9)]=new C(c['name']);}async[a0_0x4a837a(0x56b)](_0x1f44ea){const _0x43ee6d=a0_0x4a837a;let _0x241edd=this[_0x43ee6d(0x1c6)][_0x43ee6d(0x17e)](_0x43ee6d(0x2aa))[_0x43ee6d(0x3e2)],_0x400626=(0x0,Ne['sign'])({'instanceName':_0x1f44ea[_0x43ee6d(0x2fb)],'apiName':Ge,'tokenId':(0x0,cs['v4'])()},_0x241edd['SECRET'],{'expiresIn':_0x241edd['EXPIRIN_IN'],'encoding':_0x43ee6d(0x3e8),'subject':_0x43ee6d(0x33f)}),_0x16eb55=await this[_0x43ee6d(0x5c0)][_0x43ee6d(0x146)][_0x43ee6d(0x22c)]({'jwt':_0x400626},_0x1f44ea[_0x43ee6d(0x2fb)]);if(_0x16eb55[_0x43ee6d(0x60b)])throw this['logger'][_0x43ee6d(0x60b)]({'localError':c['name']+_0x43ee6d(0x392),'error':_0x16eb55[_0x43ee6d(0x60b)]}),new g('Authentication\x20error',_0x16eb55['error']?.[_0x43ee6d(0x42d)]());return{'jwt':_0x400626};}async[a0_0x4a837a(0x5d7)](_0x499a12){const _0x1b3540=a0_0x4a837a;let _0x36ed19=(0x0,cs['v4'])()['toUpperCase'](),_0x121950=await this[_0x1b3540(0x5c0)][_0x1b3540(0x146)][_0x1b3540(0x22c)]({'apikey':_0x36ed19},_0x499a12[_0x1b3540(0x2fb)]);if(_0x121950['error'])throw this['logger'][_0x1b3540(0x60b)]({'localError':c['name']+_0x1b3540(0x392),'error':_0x121950[_0x1b3540(0x60b)]}),new g('Authentication\x20error',_0x121950[_0x1b3540(0x60b)]?.[_0x1b3540(0x42d)]());return{'apikey':_0x36ed19};}async[a0_0x4a837a(0x12c)](_0x490533){const _0x26045b=a0_0x4a837a;let _0x1138bf=this['configService']['get'](_0x26045b(0x2aa));return await this[_0x1138bf['TYPE']](_0x490533);}async['refreshToken']({oldToken:_0x399a0f}){const _0x337229=a0_0x4a837a;if(!(0x0,Ua[_0x337229(0x219)])(_0x399a0f))throw new g(_0x337229(0x1a3));try{let _0x2cdfd9=this[_0x337229(0x1c6)][_0x337229(0x17e)](_0x337229(0x2aa))[_0x337229(0x3e2)],_0xf5d133=(0x0,Ne[_0x337229(0x54d)])(_0x399a0f,_0x2cdfd9[_0x337229(0x25a)],{'ignoreExpiration':!0x0}),_0x51342d=await this['repository']['auth'][_0x337229(0x33c)](_0xf5d133['instanceName']),_0x2fe2d6=(0x0,Ne[_0x337229(0x54d)])(_0x51342d[_0x337229(0x56b)],_0x2cdfd9['SECRET'],{'ignoreExpiration':!0x0});if(_0xf5d133[_0x337229(0x300)]!==_0x2fe2d6[_0x337229(0x300)])throw new g(_0x337229(0x1a3));let _0x3ca55a={'jwt':(await this[_0x337229(0x56b)]({'instanceName':_0xf5d133[_0x337229(0x2fb)]}))[_0x337229(0x56b)],'instanceName':_0xf5d133['instanceName']};try{let _0x2a25e9=await this[_0x337229(0x5c0)][_0x337229(0xcd)]['find'](_0xf5d133[_0x337229(0x2fb)]);_0x2a25e9?.[_0x337229(0x258)]&&this[_0x337229(0x1c6)][_0x337229(0x17e)](_0x337229(0x551))['EVENTS'][_0x337229(0x1d0)]&&await Va[_0x337229(0x4d5)][_0x337229(0x22c)]({'baseURL':_0x2a25e9['url']})[_0x337229(0x502)]('',{'event':'new.jwt','instance':_0xf5d133[_0x337229(0x2fb)],'data':_0x3ca55a},{'params':{'owner':this[_0x337229(0x63b)][_0x337229(0x302)][_0xf5d133[_0x337229(0x2fb)]]['wuid']}});}catch(_0x73cc59){this[_0x337229(0x5a9)][_0x337229(0x60b)](_0x73cc59);}return _0x3ca55a;}catch(_0x3f978b){throw this[_0x337229(0x5a9)][_0x337229(0x60b)]({'localError':c[_0x337229(0x372)]+'.refreshToken','error':_0x3f978b}),new g(_0x337229(0x1a3));}}},nt=class extends k{constructor(_0x57660d,..._0x509a37){const _0x5d4529=a0_0x4a837a;super(),this[_0x5d4529(0x1c6)]=_0x57660d,this['router']=(0x0,Ja['Router'])();let _0x24952f=_0x57660d['get'](_0x5d4529(0x2aa));this[_0x5d4529(0x55c)][_0x5d4529(0x502)](_0x5d4529(0x5cd),..._0x509a37,async(_0xbe6d75,_0x14c2df)=>{const _0x4b2b1e=_0x5d4529;let {instanceName:_0x277f61,apikey:_0x4084b0}=_0xbe6d75[_0x4b2b1e(0x327)],_0x187b33=await re[_0x4b2b1e(0x308)]({'instanceName':_0x277f61,'apikey':_0x4084b0});return _0x14c2df[_0x4b2b1e(0x2e7)](0xc9)[_0x4b2b1e(0x2c8)](_0x187b33);})[_0x5d4529(0x17a)](this[_0x5d4529(0x535)]('restart'),..._0x509a37,async(_0x5dfc5c,_0x173e0b)=>{const _0x476b6f=_0x5d4529;let _0x592fe8=await this[_0x476b6f(0x10e)]({'request':_0x5dfc5c,'schema':N,'ClassRef':b,'execute':_0x5e814c=>re[_0x476b6f(0x143)](_0x5e814c)});return _0x173e0b[_0x476b6f(0x2e7)](0xc8)[_0x476b6f(0x2c8)](_0x592fe8);})[_0x5d4529(0x17e)](this[_0x5d4529(0x535)](_0x5d4529(0x33b)),..._0x509a37,async(_0x5635f3,_0x45c6d1)=>{const _0x343198=_0x5d4529;let _0x50dc6d=await this[_0x343198(0x10e)]({'request':_0x5635f3,'schema':N,'ClassRef':b,'execute':_0xee550f=>re[_0x343198(0x641)](_0xee550f)});return _0x45c6d1['status'](0xc8)['json'](_0x50dc6d);})[_0x5d4529(0x17e)](this[_0x5d4529(0x535)](_0x5d4529(0x28e)),..._0x509a37,async(_0x38c251,_0x400651)=>{const _0x38ebfd=_0x5d4529;let _0x34837a=await this[_0x38ebfd(0x10e)]({'request':_0x38c251,'schema':N,'ClassRef':b,'execute':_0x2969f9=>re['connectionState'](_0x2969f9)});return _0x400651['status'](0xc8)[_0x38ebfd(0x2c8)](_0x34837a);})[_0x5d4529(0x17e)](this[_0x5d4529(0x535)](_0x5d4529(0x59e),!0x1),..._0x509a37,async(_0x4a153a,_0x562670)=>{const _0x139161=_0x5d4529;let _0xac7bcf=await this[_0x139161(0x10e)]({'request':_0x4a153a,'schema':null,'ClassRef':b,'execute':_0x5e869b=>re[_0x139161(0x59e)](_0x5e869b)});return _0x562670[_0x139161(0x2e7)](0xc8)[_0x139161(0x2c8)](_0xac7bcf);})[_0x5d4529(0x580)](this[_0x5d4529(0x535)](_0x5d4529(0x1c4)),..._0x509a37,async(_0x1d62b1,_0x53a652)=>{const _0x159da1=_0x5d4529;let _0x1eeadb=await this[_0x159da1(0x10e)]({'request':_0x1d62b1,'schema':N,'ClassRef':b,'execute':_0xa4db9d=>re[_0x159da1(0x1c4)](_0xa4db9d)});return _0x53a652[_0x159da1(0x2e7)](0xc8)[_0x159da1(0x2c8)](_0x1eeadb);})[_0x5d4529(0x580)](this[_0x5d4529(0x535)](_0x5d4529(0x580)),..._0x509a37,async(_0x4765e8,_0x5926ad)=>{const _0x4adda6=_0x5d4529;let _0x54363a=await this[_0x4adda6(0x10e)]({'request':_0x4765e8,'schema':N,'ClassRef':b,'execute':_0x47c66b=>re[_0x4adda6(0xac)](_0x47c66b)});return _0x5926ad[_0x4adda6(0x2e7)](0xc8)[_0x4adda6(0x2c8)](_0x54363a);}),_0x24952f['TYPE']===_0x5d4529(0x56b)&&this['router'][_0x5d4529(0x17a)](_0x5d4529(0x264),async(_0xf1f1f1,_0x570e1f)=>{const _0x18d0ca=_0x5d4529;let _0x4fdbec=await this['dataValidate']({'request':_0xf1f1f1,'schema':aa,'ClassRef':it,'execute':(_0x339b66,_0x221b0e)=>re[_0x18d0ca(0x2e6)](_0x339b66,_0x221b0e)});return _0x570e1f[_0x18d0ca(0x2e7)](0xc9)[_0x18d0ca(0x2c8)](_0x4fdbec);});}},ja=require(a0_0x4a837a(0xc6)),ls=class{},z=class extends ls{},ct=class extends z{},lt=class extends z{},ut=class extends z{},Ce=class extends z{},dt=class extends z{},pt=class extends z{},gt=class extends z{},mt=class extends z{},ht=class extends z{},ft=class{},wt=class extends k{constructor(..._0xee976){const _0x3c088e=a0_0x4a837a;super(),this[_0x3c088e(0x55c)]=(0x0,ja[_0x3c088e(0x122)])(),this[_0x3c088e(0x55c)][_0x3c088e(0x502)](this[_0x3c088e(0x535)]('sendText'),..._0xee976,async(_0xf6d390,_0x4bdec0)=>{const _0x1ab64b=_0x3c088e;let _0x2072cc=await this[_0x1ab64b(0x10e)]({'request':_0xf6d390,'schema':oa,'ClassRef':ct,'execute':(_0x458f95,_0x4a1861)=>K['sendText'](_0x458f95,_0x4a1861)});return _0x4bdec0[_0x1ab64b(0x2e7)](0xc9)['json'](_0x2072cc);})[_0x3c088e(0x502)](this['routerPath']('sendMedia'),..._0xee976,async(_0x406384,_0x35ac51)=>{const _0x55a51e=_0x3c088e;let _0x42b03e=await this[_0x55a51e(0x10e)]({'request':_0x406384,'schema':ca,'ClassRef':Ce,'execute':(_0xfcffc6,_0x307baa)=>K[_0x55a51e(0x335)](_0xfcffc6,_0x307baa)});return _0x35ac51[_0x55a51e(0x2e7)](0xc9)[_0x55a51e(0x2c8)](_0x42b03e);})[_0x3c088e(0x502)](this[_0x3c088e(0x535)](_0x3c088e(0xc7)),..._0xee976,async(_0x3f7a3e,_0x5e092a)=>{const _0x5c1264=_0x3c088e;let _0x1b9c47=await this['dataValidate']({'request':_0x3f7a3e,'schema':la,'ClassRef':Ce,'execute':(_0x4bb3a7,_0x26da98)=>K[_0x5c1264(0xc7)](_0x4bb3a7,_0x26da98)});return _0x5e092a['status'](0xc9)[_0x5c1264(0x2c8)](_0x1b9c47);})['post'](this[_0x3c088e(0x535)](_0x3c088e(0x40b)),..._0xee976,async(_0x1839ed,_0xb508c3)=>{const _0x185e03=_0x3c088e;let _0x5acb36=await this['dataValidate']({'request':_0x1839ed,'schema':da,'ClassRef':pt,'execute':(_0x331fbc,_0x3beb7b)=>K[_0x185e03(0x40b)](_0x331fbc,_0x3beb7b)});return _0xb508c3[_0x185e03(0x2e7)](0xc9)[_0x185e03(0x2c8)](_0x5acb36);})[_0x3c088e(0x502)](this[_0x3c088e(0x535)](_0x3c088e(0x5eb)),..._0xee976,async(_0x9622d2,_0x460494)=>{const _0x4ae89f=_0x3c088e;let _0x293fef=await this[_0x4ae89f(0x10e)]({'request':_0x9622d2,'schema':pa,'ClassRef':gt,'execute':(_0x3cc94e,_0x62cccf)=>K[_0x4ae89f(0x5eb)](_0x3cc94e,_0x62cccf)});return _0x460494[_0x4ae89f(0x2e7)](0xc9)[_0x4ae89f(0x2c8)](_0x293fef);})['post'](this['routerPath'](_0x3c088e(0x55f)),..._0xee976,async(_0x52edb5,_0x24c3e9)=>{const _0x4df438=_0x3c088e;let _0xa5cb41=await this[_0x4df438(0x10e)]({'request':_0x52edb5,'schema':ga,'ClassRef':mt,'execute':(_0x121bb2,_0x285ac6)=>K['sendList'](_0x121bb2,_0x285ac6)});return _0x24c3e9[_0x4df438(0x2e7)](0xc9)[_0x4df438(0x2c8)](_0xa5cb41);})[_0x3c088e(0x502)](this['routerPath'](_0x3c088e(0x32c)),..._0xee976,async(_0x1f42d6,_0x286fc9)=>{const _0x4951ef=_0x3c088e;let _0x5bce49=await this[_0x4951ef(0x10e)]({'request':_0x1f42d6,'schema':ma,'ClassRef':ht,'execute':(_0x53471f,_0x21e4d4)=>K['sendContact'](_0x53471f,_0x21e4d4)});return _0x286fc9['status'](0xc9)[_0x4951ef(0x2c8)](_0x5bce49);})[_0x3c088e(0x502)](this[_0x3c088e(0x535)](_0x3c088e(0x428)),..._0xee976,async(_0x694cb9,_0x2b730d)=>{const _0x2fbe4b=_0x3c088e;let _0x110011=await this[_0x2fbe4b(0x10e)]({'request':_0x694cb9,'schema':ha,'ClassRef':ft,'execute':(_0x4523bd,_0x499f7a)=>K[_0x2fbe4b(0x428)](_0x4523bd,_0x499f7a)});return _0x2b730d['status'](0xc9)[_0x2fbe4b(0x2c8)](_0x110011);})[_0x3c088e(0x502)](this[_0x3c088e(0x535)]('sendPoll'),..._0xee976,async(_0x3d9a08,_0x31ac49)=>{const _0x508d5e=_0x3c088e;let _0x39c36c=await this['dataValidate']({'request':_0x3d9a08,'schema':ua,'ClassRef':ut,'execute':(_0x28b767,_0x51ac4f)=>K[_0x508d5e(0x419)](_0x28b767,_0x51ac4f)});return _0x31ac49[_0x508d5e(0x2e7)](0xc9)[_0x508d5e(0x2c8)](_0x39c36c);})['post'](this[_0x3c088e(0x535)]('sendStatus'),..._0xee976,async(_0x47b1fb,_0x255c57)=>{const _0x286680=_0x3c088e;let _0x53b7c3=await this[_0x286680(0x10e)]({'request':_0x47b1fb,'schema':na,'ClassRef':lt,'execute':(_0x2762eb,_0x22bf86)=>K[_0x286680(0xcb)](_0x2762eb,_0x22bf86)});return _0x255c57['status'](0xc9)[_0x286680(0x2c8)](_0x53b7c3);})[_0x3c088e(0x502)](this[_0x3c088e(0x535)](_0x3c088e(0x158)),..._0xee976,async(_0x3ee61f,_0x8bb1cd)=>{const _0x39a61e=_0x3c088e;let _0xd536b4=await this['dataValidate']({'request':_0x3ee61f,'schema':ra,'ClassRef':dt,'execute':(_0x17da15,_0x44e3b0)=>K['sendSticker'](_0x17da15,_0x44e3b0)});return _0x8bb1cd['status'](0xc9)[_0x39a61e(0x2c8)](_0xd536b4);});}},Fa=require(a0_0x4a837a(0xc6)),yt=class extends k{constructor(..._0x117a13){const _0x394e49=a0_0x4a837a;super(),this[_0x394e49(0x55c)]=(0x0,Fa[_0x394e49(0x122)])(),this['router'][_0x394e49(0x17e)](this[_0x394e49(0x535)]('qrcode'),..._0x117a13,(_0x389676,_0x134117)=>Ba[_0x394e49(0x2c4)](_0x389676,_0x134117));}},qa=require(a0_0x4a837a(0xc6)),bt=class{},St=class extends k{constructor(..._0x48d447){const _0x138df7=a0_0x4a837a;super(),this[_0x138df7(0x55c)]=(0x0,qa[_0x138df7(0x122)])(),this[_0x138df7(0x55c)][_0x138df7(0x502)](this[_0x138df7(0x535)]('set'),..._0x48d447,async(_0x325580,_0x59975c)=>{const _0x176531=_0x138df7;let _0x5aad3d=await this[_0x176531(0x10e)]({'request':_0x325580,'schema':$a,'ClassRef':bt,'execute':(_0x541510,_0x14d5f7)=>us['createWebhook'](_0x541510,_0x14d5f7)});_0x59975c['status'](0xc9)['json'](_0x5aad3d);})['get'](this[_0x138df7(0x535)](_0x138df7(0x33c)),..._0x48d447,async(_0x2ce11d,_0x5edb64)=>{const _0xeac00e=_0x138df7;let _0x54f191=await this[_0xeac00e(0x10e)]({'request':_0x2ce11d,'schema':N,'ClassRef':b,'execute':_0x18d885=>us[_0xeac00e(0x4dc)](_0x18d885)});_0x5edb64[_0xeac00e(0x2e7)](0xc8)[_0xeac00e(0x2c8)](_0x54f191);});}},Ga=require(a0_0x4a837a(0xc6)),h=new C(a0_0x4a837a(0x163)),Et=class extends k{constructor(..._0x5b13c0){const _0x35848f=a0_0x4a837a;super(),this['router']=(0x0,Ga[_0x35848f(0x122)])(),this['router']['post'](this[_0x35848f(0x535)](_0x35848f(0x3f8)),..._0x5b13c0,async(_0xc0ff6a,_0x56476a)=>{const _0x9c6475=_0x35848f;let _0x525493=_0xc0ff6a[_0x9c6475(0x327)];h[_0x9c6475(0x660)](_0x9c6475(0x3ff)),h[_0x9c6475(0x660)]('request\x20body:\x20'),h['verbose'](_0xc0ff6a[_0x9c6475(0x327)]);let _0x3cf6e8=await this[_0x9c6475(0x10e)]({'request':_0xc0ff6a,'schema':N,'ClassRef':b,'execute':_0x54dc5d=>R[_0x9c6475(0x391)](_0x54dc5d,_0x525493)});_0x56476a[_0x9c6475(0x2e7)](0xc8)[_0x9c6475(0x2c8)](_0x3cf6e8);})[_0x35848f(0x17e)](this[_0x35848f(0x535)](_0x35848f(0x3f8)),..._0x5b13c0,async(_0x2a58c7,_0x2ad927)=>{const _0xf73838=_0x35848f;let _0x2b29d8=await this['dataValidate']({'request':_0x2a58c7,'schema':N,'ClassRef':b,'execute':_0x36fa6d=>R[_0xf73838(0x17f)](_0x36fa6d)});_0x2ad927[_0xf73838(0x2e7)](0xc8)[_0xf73838(0x2c8)](_0x2b29d8);})[_0x35848f(0x580)](this[_0x35848f(0x535)](_0x35848f(0x4c1)),..._0x5b13c0,async(_0x3f2b66,_0x53082d)=>{const _0x2bce98=_0x35848f;h[_0x2bce98(0x660)]('request\x20received\x20in\x20deleteDoneMessages');let _0x3cd309=await this[_0x2bce98(0x10e)]({'request':_0x3f2b66,'schema':N,'ClassRef':b,'execute':_0x52cb7a=>R[_0x2bce98(0x4c1)](_0x52cb7a)});_0x53082d[_0x2bce98(0x2e7)](0xc8)[_0x2bce98(0x2c8)](_0x3cd309);})[_0x35848f(0x502)](this[_0x35848f(0x535)](_0x35848f(0x1c1)),..._0x5b13c0,async(_0x3e041c,_0x3029fe)=>{const _0x374af1=_0x35848f;let _0x125ba1=_0x3e041c[_0x374af1(0x327)];h[_0x374af1(0x660)](_0x374af1(0x55d)),h[_0x374af1(0x660)](_0x374af1(0x3ae)),h[_0x374af1(0x660)](_0x3e041c[_0x374af1(0x327)]);let _0x28d7d7=await this[_0x374af1(0x10e)]({'request':_0x3e041c,'schema':N,'ClassRef':b,'execute':_0x3c3351=>R[_0x374af1(0x1c1)](_0x3c3351,_0x125ba1)});_0x3029fe['status'](0xc8)[_0x374af1(0x2c8)](_0x28d7d7);})[_0x35848f(0x17e)](this['routerPath']('getAutomateSystem'),..._0x5b13c0,async(_0x1886c3,_0x24c836)=>{const _0x474aab=_0x35848f;h['verbose'](_0x474aab(0x303));let _0xfcdb21=await this['dataValidate']({'request':_0x1886c3,'schema':N,'ClassRef':b,'execute':_0x2f73e3=>R['getAutomateSystem'](_0x2f73e3)});_0x24c836['status'](0xc8)[_0x474aab(0x2c8)](_0xfcdb21);})[_0x35848f(0x17e)](this[_0x35848f(0x535)](_0x35848f(0x333)),..._0x5b13c0,async(_0x1fa8f0,_0x5b7701)=>{const _0xa3c28c=_0x35848f;h[_0xa3c28c(0x660)](_0xa3c28c(0x5be));let _0x31cdd1=await this['dataValidate']({'request':_0x1fa8f0,'schema':N,'ClassRef':b,'execute':_0x3ce847=>R[_0xa3c28c(0x169)](_0x3ce847)});_0x5b7701[_0xa3c28c(0x2e7)](0xc8)[_0xa3c28c(0x2c8)](_0x31cdd1);})[_0x35848f(0x502)](this[_0x35848f(0x535)](_0x35848f(0x1da)),..._0x5b13c0,async(_0x204628,_0x2440c1)=>{const _0x1cf6e4=_0x35848f;let _0x59de18=_0x204628['body'];h[_0x1cf6e4(0x660)](_0x1cf6e4(0x2d9)),h[_0x1cf6e4(0x660)](_0x1cf6e4(0x3ae)),h[_0x1cf6e4(0x660)](_0x204628[_0x1cf6e4(0x327)]);let _0xdea55f=await this['dataValidate']({'request':_0x204628,'schema':N,'ClassRef':b,'execute':_0x4af38c=>R[_0x1cf6e4(0x1da)](_0x4af38c,_0x59de18)});_0x2440c1['status'](0xc8)[_0x1cf6e4(0x2c8)](_0xdea55f);})[_0x35848f(0x502)](this[_0x35848f(0x535)](_0x35848f(0x59b)),..._0x5b13c0,async(_0x14056b,_0x5099df)=>{const _0x5372cf=_0x35848f;let _0x506ff5=_0x14056b[_0x5372cf(0x327)];h['verbose'](_0x5372cf(0x1ed)),h[_0x5372cf(0x660)](_0x5372cf(0x3ae)),h[_0x5372cf(0x660)](_0x14056b[_0x5372cf(0x327)]);let _0x42ac27=await this[_0x5372cf(0x10e)]({'request':_0x14056b,'schema':N,'ClassRef':b,'execute':_0x3973c1=>R['updateCustomFields'](_0x3973c1,_0x506ff5)});_0x5099df[_0x5372cf(0x2e7)](0xc8)[_0x5372cf(0x2c8)](_0x42ac27);})[_0x35848f(0x502)](this['routerPath'](_0x35848f(0x35b)),..._0x5b13c0,async(_0x4528cb,_0x53dae9)=>{const _0x32cf10=_0x35848f;let _0x48d102=_0x4528cb[_0x32cf10(0x327)];h[_0x32cf10(0x660)](_0x32cf10(0x504)),h['verbose']('request\x20body:\x20'),h[_0x32cf10(0x660)](_0x4528cb[_0x32cf10(0x327)]);let _0x38a1ed=await this[_0x32cf10(0x10e)]({'request':_0x4528cb,'schema':N,'ClassRef':b,'execute':_0x4ca750=>R[_0x32cf10(0x35b)](_0x4ca750,_0x48d102)});_0x53dae9['status'](0xc8)['json'](_0x38a1ed);})['post'](this[_0x35848f(0x535)](_0x35848f(0x283)),..._0x5b13c0,async(_0x4c528f,_0x3a100d)=>{const _0x3ed6d2=_0x35848f;let _0x3a6328=_0x4c528f['body'];h[_0x3ed6d2(0x660)]('request\x20received\x20in\x20getConversation'),h[_0x3ed6d2(0x660)](_0x3ed6d2(0x3ae)),h['verbose'](_0x4c528f['body']);let _0x4b89db=await this['dataValidate']({'request':_0x4c528f,'schema':N,'ClassRef':b,'execute':_0x44c934=>R[_0x3ed6d2(0x283)](_0x44c934,_0x3a6328)});_0x3a100d[_0x3ed6d2(0x2e7)](0xc8)['json'](_0x4b89db);})[_0x35848f(0x502)](this[_0x35848f(0x535)]('fetchConversation'),..._0x5b13c0,async(_0x55a54d,_0x1b6930)=>{const _0x2cd774=_0x35848f;let _0x314fa6=_0x55a54d[_0x2cd774(0x327)];h['verbose']('request\x20received\x20in\x20fetchConversation'),h[_0x2cd774(0x660)](_0x2cd774(0x3ae)),h['verbose'](_0x55a54d[_0x2cd774(0x327)]);let _0x1ef7d4=await this[_0x2cd774(0x10e)]({'request':_0x55a54d,'schema':N,'ClassRef':b,'execute':_0x723eb0=>R[_0x2cd774(0xe3)](_0x723eb0,_0x314fa6)});_0x1b6930[_0x2cd774(0x2e7)](0xc8)[_0x2cd774(0x2c8)](_0x1ef7d4);})[_0x35848f(0x502)](this[_0x35848f(0x535)]('editConversation'),..._0x5b13c0,async(_0x4b8d8b,_0xa7b097)=>{const _0x51e25c=_0x35848f;let _0x4a1927=_0x4b8d8b[_0x51e25c(0x327)];h['verbose'](_0x51e25c(0xea)),h[_0x51e25c(0x660)](_0x51e25c(0x3ae)),h[_0x51e25c(0x660)](_0x4b8d8b['body']);let _0x5e2e3f=await this['dataValidate']({'request':_0x4b8d8b,'schema':N,'ClassRef':b,'execute':_0x6b8bc7=>R[_0x51e25c(0x290)](_0x6b8bc7,_0x4a1927)});_0xa7b097[_0x51e25c(0x2e7)](0xc8)[_0x51e25c(0x2c8)](_0x5e2e3f);})[_0x35848f(0x580)](this[_0x35848f(0x535)](_0x35848f(0xdf)),..._0x5b13c0,async(_0x5e7945,_0x22c000)=>{const _0x36462f=_0x35848f;let _0x320ee3=_0x5e7945[_0x36462f(0x327)];h[_0x36462f(0x660)](_0x36462f(0x59d)),h['verbose'](_0x36462f(0x3ae)),h[_0x36462f(0x660)](_0x5e7945[_0x36462f(0x327)]);let _0x45d3d9=await this[_0x36462f(0x10e)]({'request':_0x5e7945,'schema':N,'ClassRef':b,'execute':_0x19674a=>R['deleteConversation'](_0x19674a,_0x320ee3)});_0x22c000[_0x36462f(0x2e7)](0xc8)[_0x36462f(0x2c8)](_0x45d3d9);})[_0x35848f(0x502)](this[_0x35848f(0x535)]('createflow'),..._0x5b13c0,async(_0x48dabc,_0xdd1d9b)=>{const _0x326407=_0x35848f;let _0x1484a4=_0x48dabc[_0x326407(0x327)];h[_0x326407(0x660)]('request\x20received\x20in\x20createFlow'),h[_0x326407(0x660)](_0x326407(0x3ae)),h[_0x326407(0x660)](_0x48dabc[_0x326407(0x327)]);let _0xfd703a=await this[_0x326407(0x10e)]({'request':_0x48dabc,'schema':N,'ClassRef':b,'execute':_0x4f0b92=>R[_0x326407(0x2bc)](_0x4f0b92,_0x1484a4)});_0xdd1d9b[_0x326407(0x2e7)](0xc8)['json'](_0xfd703a);})['post'](this[_0x35848f(0x535)](_0x35848f(0x614)),..._0x5b13c0,async(_0x2f806f,_0x1e8ac3)=>{const _0x5356a3=_0x35848f;let _0x48aa68=_0x2f806f[_0x5356a3(0x327)];h['verbose'](_0x5356a3(0x54b)),h[_0x5356a3(0x660)](_0x5356a3(0x3ae)),h[_0x5356a3(0x660)](_0x2f806f[_0x5356a3(0x327)]),delete _0x48aa68[_0x5356a3(0x358)],delete _0x48aa68[_0x5356a3(0x3ad)],delete _0x48aa68['groups'],delete _0x48aa68[_0x5356a3(0x29b)];let _0x3ced02=await this[_0x5356a3(0x10e)]({'request':_0x2f806f,'schema':N,'ClassRef':b,'execute':_0x13aa5f=>R[_0x5356a3(0x4cd)](_0x13aa5f,_0x48aa68)});_0x1e8ac3[_0x5356a3(0x2e7)](0xc8)[_0x5356a3(0x2c8)](_0x3ced02);})[_0x35848f(0x502)](this[_0x35848f(0x535)](_0x35848f(0x2ee)),..._0x5b13c0,async(_0x5ad640,_0x51e323)=>{const _0x957e41=_0x35848f;let _0x419982=_0x5ad640[_0x957e41(0x327)];h[_0x957e41(0x660)](_0x957e41(0x54b)),h[_0x957e41(0x660)]('request\x20body:\x20'),h[_0x957e41(0x660)](_0x5ad640[_0x957e41(0x327)]);let _0xa3045e=await this[_0x957e41(0x10e)]({'request':_0x5ad640,'schema':N,'ClassRef':b,'execute':_0x5dba9e=>R['editFlowBlock'](_0x5dba9e,_0x419982)});_0x51e323[_0x957e41(0x2e7)](0xc8)[_0x957e41(0x2c8)](_0xa3045e);})[_0x35848f(0x502)](this[_0x35848f(0x535)](_0x35848f(0x3ca)),..._0x5b13c0,async(_0x4936d4,_0xbe78c)=>{const _0x17d98f=_0x35848f;let _0x436309=_0x4936d4[_0x17d98f(0x327)];h[_0x17d98f(0x660)]('request\x20received\x20in\x20editFlow'),h[_0x17d98f(0x660)](_0x17d98f(0x3ae)),h[_0x17d98f(0x660)](_0x4936d4[_0x17d98f(0x327)]);let _0x5702ef=await this[_0x17d98f(0x10e)]({'request':_0x4936d4,'schema':N,'ClassRef':b,'execute':_0x115c26=>R[_0x17d98f(0x604)](_0x115c26,_0x436309)});_0xbe78c[_0x17d98f(0x2e7)](0xc8)['json'](_0x5702ef);})[_0x35848f(0x502)](this['routerPath'](_0x35848f(0x23c)),..._0x5b13c0,async(_0xd83c8,_0x319e85)=>{const _0x2a81c6=_0x35848f;let _0x50f821=_0xd83c8[_0x2a81c6(0x327)];h[_0x2a81c6(0x660)](_0x2a81c6(0x54b)),h['verbose']('request\x20body:\x20'),h[_0x2a81c6(0x660)](_0xd83c8[_0x2a81c6(0x327)]);let _0x149b8d=await this[_0x2a81c6(0x10e)]({'request':_0xd83c8,'schema':N,'ClassRef':b,'execute':_0x355ab4=>R[_0x2a81c6(0x5b8)](_0x355ab4,_0x50f821)});_0x319e85[_0x2a81c6(0x2e7)](0xc8)[_0x2a81c6(0x2c8)](_0x149b8d);})[_0x35848f(0x502)](this['routerPath'](_0x35848f(0x568)),..._0x5b13c0,async(_0x53a186,_0x418588)=>{const _0xfe8ef3=_0x35848f;let _0x360e1d=_0x53a186[_0xfe8ef3(0x327)];h[_0xfe8ef3(0x660)](_0xfe8ef3(0x38d)),h[_0xfe8ef3(0x660)](_0xfe8ef3(0x3ae)),h['verbose'](_0x53a186[_0xfe8ef3(0x327)]);let _0x4aa560=await this[_0xfe8ef3(0x10e)]({'request':_0x53a186,'schema':N,'ClassRef':b,'execute':_0x159901=>R[_0xfe8ef3(0x22a)](_0x159901,_0x360e1d)});_0x418588['status'](0xc8)['json'](_0x4aa560);})[_0x35848f(0x502)](this[_0x35848f(0x535)](_0x35848f(0x394)),..._0x5b13c0,async(_0x29a910,_0x43060e)=>{const _0x475701=_0x35848f;let _0x30612e=_0x29a910[_0x475701(0x327)];h[_0x475701(0x660)](_0x475701(0x1d7)),h[_0x475701(0x660)](_0x475701(0x3ae)),h['verbose'](_0x29a910[_0x475701(0x327)]);let _0x45baf6=await this[_0x475701(0x10e)]({'request':_0x29a910,'schema':N,'ClassRef':b,'execute':_0x2c8f01=>R[_0x475701(0x590)](_0x2c8f01,_0x30612e)});_0x43060e[_0x475701(0x2e7)](0xc8)[_0x475701(0x2c8)](_0x45baf6);})[_0x35848f(0x502)](this['routerPath'](_0x35848f(0x104)),..._0x5b13c0,async(_0x116534,_0x277b1b)=>{const _0x21895e=_0x35848f;let _0x46f272=_0x116534[_0x21895e(0x327)];h[_0x21895e(0x660)](_0x21895e(0x103)),h[_0x21895e(0x660)]('request\x20body:\x20'),h[_0x21895e(0x660)](_0x116534[_0x21895e(0x327)]);let _0x47e270=await this[_0x21895e(0x10e)]({'request':_0x116534,'schema':N,'ClassRef':b,'execute':_0x5b5183=>R[_0x21895e(0xae)](_0x5b5183,_0x46f272)});_0x277b1b['status'](0xc8)[_0x21895e(0x2c8)](_0x47e270);})['post'](this[_0x35848f(0x535)](_0x35848f(0x153)),..._0x5b13c0,async(_0x872443,_0x122c5a)=>{const _0x1af1f1=_0x35848f;let _0x39868f=_0x872443[_0x1af1f1(0x327)];h['verbose'](_0x1af1f1(0x663)),h[_0x1af1f1(0x660)](_0x1af1f1(0x3ae)),h[_0x1af1f1(0x660)](_0x872443[_0x1af1f1(0x327)]);let _0xd4e63c=await this[_0x1af1f1(0x10e)]({'request':_0x872443,'schema':N,'ClassRef':b,'execute':_0x443b72=>R['getFlow'](_0x443b72,_0x39868f)});_0x122c5a['status'](0xc8)[_0x1af1f1(0x2c8)](_0xd4e63c);})[_0x35848f(0x580)](this['routerPath'](_0x35848f(0x4b3)),..._0x5b13c0,async(_0x2fda94,_0x157e1d)=>{const _0x26a774=_0x35848f;let _0x47a3fa=_0x2fda94['body'];h[_0x26a774(0x660)]('request\x20received\x20in\x20createFlow'),h['verbose'](_0x26a774(0x3ae)),h[_0x26a774(0x660)](_0x2fda94[_0x26a774(0x327)]);let _0x57d249=await this['dataValidate']({'request':_0x2fda94,'schema':N,'ClassRef':b,'execute':_0x3de73e=>R[_0x26a774(0x672)](_0x3de73e,_0x47a3fa)});_0x157e1d['status'](0xc8)[_0x26a774(0x2c8)](_0x57d249);})['get'](this[_0x35848f(0x535)](_0x35848f(0x484)),..._0x5b13c0,async(_0x4f0bfd,_0x97aff8)=>{const _0x238937=_0x35848f;h[_0x238937(0x660)](_0x238937(0x635));let _0x163b2f=await this[_0x238937(0x10e)]({'request':_0x4f0bfd,'schema':N,'ClassRef':b,'execute':_0x3fe854=>R[_0x238937(0x251)](_0x3fe854)});_0x97aff8[_0x238937(0x2e7)](0xc8)[_0x238937(0x2c8)](_0x163b2f);});}},za=T(require(a0_0x4a837a(0x16a))),ee={};function Wa(_0x311959,_0x52f627,_0x34d0a1,_0x3213c2){ee[_0x311959]||(ee[_0x311959]={}),ee[_0x311959][_0x52f627]={'id':_0x52f627,'response':_0x34d0a1,'events':_0x3213c2};}function Ha(_0x3e9e2a,_0x2cb7d2){!ee[_0x3e9e2a]||!ee[_0x3e9e2a][_0x2cb7d2]||delete ee[_0x3e9e2a][_0x2cb7d2];}function F(_0x271529,_0x24898b,_0x10a1df){const _0x55650c=a0_0x4a837a;if(!ee[_0x271529])return;let _0x226c88=_0x55650c(0x33a)+JSON[_0x55650c(0xe8)](_0x10a1df)+'\x0a\x0a';Object[_0x55650c(0x2b0)](ee[_0x271529])[_0x55650c(0x2c9)](_0x3aa93f=>{const _0x502650=_0x55650c;_0x3aa93f[_0x502650(0x2ef)][_0x502650(0x1a9)](_0x24898b)&&_0x3aa93f['response'][_0x502650(0x2f2)](_0x226c88);});}function Ka(){const _0x17ee8a=a0_0x4a837a;let _0x567ebc={};for(let _0x335ff2 in ee)_0x567ebc[_0x335ff2]=Object[_0x17ee8a(0x2b0)](ee[_0x335ff2])[_0x17ee8a(0x227)](_0x127c41=>({'id':_0x127c41['id'],'events':_0x127c41[_0x17ee8a(0x2ef)]}));return _0x567ebc;}function a0_0x22fc(_0x503b2e,_0x82b780){const _0xce41d=a0_0xce41();return a0_0x22fc=function(_0x22fcca,_0x2f29f7){_0x22fcca=_0x22fcca-0xa0;let _0x543392=_0xce41d[_0x22fcca];return _0x543392;},a0_0x22fc(_0x503b2e,_0x82b780);}var Qa=require(a0_0x4a837a(0x1fc)),Wo=za[a0_0x4a837a(0x4d5)]['join'](__dirname,a0_0x4a837a(0x49c)),Nt=(0x0,vt[a0_0x4a837a(0x122)])(),Ho=S['get'](a0_0x4a837a(0x2aa))[a0_0x4a837a(0xd8)],ue=[rs,Zs,sa[Ho]];Nt[a0_0x4a837a(0x4c3)](a0_0x4a837a(0x564),vt[a0_0x4a837a(0x4d5)][a0_0x4a837a(0x5e7)](Wo))[a0_0x4a837a(0x17e)](a0_0x4a837a(0x645),async(_0x246ac0,_0xc82c5d)=>{const _0x3ded1c=a0_0x4a837a;console[_0x3ded1c(0x4eb)](_0x3ded1c(0x374));let _0x3de77a=_0x246ac0[_0x3ded1c(0x179)][_0x3ded1c(0x634)],_0x4d937b=(_0x246ac0[_0x3ded1c(0x4d2)]['events']||'')[_0x3ded1c(0x24d)](','),_0x49639a=(0x0,Qa['v4'])();console[_0x3ded1c(0x4eb)](_0x3ded1c(0x291),_0x3de77a),console[_0x3ded1c(0x4eb)](_0x3ded1c(0x5ef),_0x4d937b);let _0x56936f=S['get'](_0x3ded1c(0x2aa))[_0x3ded1c(0x4e1)],_0x19b233=_0x246ac0[_0x3ded1c(0x4d2)][_0x3ded1c(0x5d7)];if(console[_0x3ded1c(0x4eb)](_0x3ded1c(0x61a),_0x19b233),_0x56936f[_0x3ded1c(0x4d1)]!==_0x19b233){console[_0x3ded1c(0x4eb)](_0x3ded1c(0x673));try{let _0x218895=await le[_0x3ded1c(0x146)][_0x3ded1c(0x33c)](_0x3de77a);if(console[_0x3ded1c(0x4eb)](_0x3ded1c(0x54e),_0x218895),!_0x218895||_0x218895[_0x3ded1c(0x5d7)]!==_0x19b233)return console['log'](_0x3ded1c(0x51a)),_0xc82c5d[_0x3ded1c(0x2e7)](0x191)['send']('API\x20Key\x20inválida.');}catch(_0x641a9c){return console[_0x3ded1c(0x60b)](_0x3ded1c(0x5f7),_0x641a9c),_0xc82c5d[_0x3ded1c(0x2e7)](0x191)['send']('API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.');}}if(!await qe(_0x3de77a))return _0xc82c5d[_0x3ded1c(0x2e7)](0x194)['send'](_0x3ded1c(0x29c));_0xc82c5d['setHeader']('Content-Type','text/event-stream'),_0xc82c5d[_0x3ded1c(0x4b8)](_0x3ded1c(0x125),'no-cache'),_0xc82c5d[_0x3ded1c(0x4b8)](_0x3ded1c(0x2e9),_0x3ded1c(0x259)),_0xc82c5d[_0x3ded1c(0x505)]();let _0x2368d1=_0x3ded1c(0x33a)+JSON[_0x3ded1c(0xe8)]({'info':_0x3ded1c(0xb3)})+'\x0a\x0a';_0xc82c5d[_0x3ded1c(0x2f2)](_0x2368d1),Wa(_0x3de77a,_0x49639a,_0xc82c5d,_0x4d937b),_0x246ac0['on'](_0x3ded1c(0x32e),()=>{const _0x1c5305=_0x3ded1c;console[_0x1c5305(0x4eb)]('Connection\x20closed\x20for\x20instance:\x20'+_0x3de77a),Ha(_0x3de77a,_0x49639a);});}),Nt['get'](a0_0x4a837a(0x180),(_0x5a9777,_0x3ebfaa)=>{const _0x45555a=a0_0x4a837a;let _0x5f2f21=Ka();_0x3ebfaa[_0x45555a(0x2c8)](_0x5f2f21);})['get']('/',(_0x333581,_0x2d7075)=>{const _0x3deed4=a0_0x4a837a;let _0x144c6e=S['get'](_0x3deed4(0x38c)),_0x477103=_0x144c6e&&_0x144c6e['FULLCHAIN'][_0x3deed4(0x24d)]('/')[0x4];if(_0x477103){let _0x4efe12=encodeURIComponent('https://'+_0x477103);_0x2d7075[_0x3deed4(0x315)](_0x3deed4(0x1dd)+_0x4efe12);}else _0x2d7075[_0x3deed4(0x315)](_0x3deed4(0x4e0));})['put'](a0_0x4a837a(0x191),...ue,async(_0x4ec7a0,_0x17d7c5)=>{const _0x3c22c7=a0_0x4a837a;try{console[_0x3c22c7(0x4eb)](_0x3c22c7(0x60a)),_0x17d7c5[_0x3c22c7(0x2e7)](0xc8)[_0x3c22c7(0x2c8)]({'message':'API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos'}),_0x17d7c5['on']('finish',()=>process[_0x3c22c7(0x554)](0x0));}catch(_0x16e079){console['error'](_0x3c22c7(0x643),_0x16e079),_0x17d7c5[_0x3c22c7(0x2e7)](0x1f4)[_0x3c22c7(0x2c8)]({'message':'Erro\x20ao\x20encerrar\x20a\x20API'});}})[a0_0x4a837a(0x4c3)]('/instance',new nt(S,...ue)['router'],new yt(rs)['router'])[a0_0x4a837a(0x4c3)](a0_0x4a837a(0x360),new wt(...ue)[a0_0x4a837a(0x55c)])[a0_0x4a837a(0x4c3)](a0_0x4a837a(0x39f),new ze(...ue)['router'])['use'](a0_0x4a837a(0x5f9),new ot(...ue)['router'])[a0_0x4a837a(0x4c3)](a0_0x4a837a(0x304),new St(...ue)[a0_0x4a837a(0x55c)])[a0_0x4a837a(0x4c3)](a0_0x4a837a(0x57c),new Et(...ue)[a0_0x4a837a(0x55c)]);var g=class{constructor(..._0x333a2b){const _0x5dc878=a0_0x4a837a;throw{'status':0x190,'error':_0x5dc878(0x4a0),'message':_0x333a2b['length']>0x0?_0x333a2b:void 0x0};}},ie=class{constructor(..._0x1d22e2){const _0x19e9fd=a0_0x4a837a;throw{'status':0x191,'error':'Unauthorized','message':_0x1d22e2[_0x19e9fd(0x58b)]>0x0?_0x1d22e2:void 0x0};}},oe=class{constructor(..._0x4bd99b){const _0x459fa9=a0_0x4a837a;throw{'status':0x193,'error':_0x459fa9(0x338),'message':_0x4bd99b[_0x459fa9(0x58b)]>0x0?_0x4bd99b:void 0x0};}},x=class{constructor(..._0x278100){const _0x1c9015=a0_0x4a837a;throw{'status':0x194,'error':_0x1c9015(0xfa),'message':_0x278100[_0x1c9015(0x58b)]>0x0?_0x278100:void 0x0};}},A=class{constructor(..._0x128725){const _0x1e9627=a0_0x4a837a;throw{'status':0x1f4,'error':_0x1e9627(0x137),'message':_0x128725[_0x1e9627(0x58b)]>0x0?_0x128725:void 0x0};}},de=require(a0_0x4a837a(0x478));async function ds(_0x3f7f1c){const _0x43233f=a0_0x4a837a;let _0x51d4d7=new C(ds[_0x43233f(0x372)]),_0x2faa35=M[_0x43233f(0x3ec)](),_0x305195=_0x2faa35['db'](S['get'](_0x43233f(0x2b6))['CONNECTION'][_0x43233f(0xbc)]+_0x43233f(0x314))['collection'](_0x3f7f1c),_0xcaedf3=async(_0x189c0d,_0x45f7f8)=>{const _0xfc04e2=_0x43233f;try{return await _0x2faa35[_0xfc04e2(0x33b)](),await _0x305195[_0xfc04e2(0x609)]({'_id':_0x45f7f8},JSON[_0xfc04e2(0xc0)](JSON['stringify'](_0x189c0d,de['BufferJSON'][_0xfc04e2(0xf8)])),{'upsert':!0x0});}catch{}},_0x5e41d8=async _0x3cae3e=>{const _0x3d3422=_0x43233f;try{await _0x2faa35[_0x3d3422(0x33b)]();let _0x21b1ff=await _0x305195[_0x3d3422(0x596)]({'_id':_0x3cae3e}),_0x582587=JSON[_0x3d3422(0xe8)](_0x21b1ff);return JSON[_0x3d3422(0xc0)](_0x582587,de[_0x3d3422(0xb5)][_0x3d3422(0x2e1)]);}catch{}},_0x128120=async _0x109e61=>{const _0x2f2532=_0x43233f;try{return await _0x2faa35[_0x2f2532(0x33b)](),await _0x305195[_0x2f2532(0x4c9)]({'_id':_0x109e61});}catch{}},_0x300f17=await _0x5e41d8(_0x43233f(0x170))||(0x0,de[_0x43233f(0x386)])();return{'state':{'creds':_0x300f17,'keys':{'get':async(_0x1b6fdb,_0x287619)=>{const _0x274e4b=_0x43233f;let _0x351855={};return await Promise[_0x274e4b(0x20e)](_0x287619['map'](async _0x247be0=>{const _0x4b774d=_0x274e4b;let _0x478a9b=await _0x5e41d8(_0x1b6fdb+'-'+_0x247be0);_0x1b6fdb===_0x4b774d(0x344)&&_0x478a9b&&(_0x478a9b=de['proto']['Message'][_0x4b774d(0x405)][_0x4b774d(0x5a0)](_0x478a9b)),_0x351855[_0x247be0]=_0x478a9b;})),_0x351855;},'set':async _0x6c7a65=>{const _0x58405c=_0x43233f;let _0x21b991=[];for(let _0x3978de in _0x6c7a65)for(let _0x3c1a7c in _0x6c7a65[_0x3978de]){let _0x3dd924=_0x6c7a65[_0x3978de][_0x3c1a7c],_0x5d12f6=_0x3978de+'-'+_0x3c1a7c;_0x21b991[_0x58405c(0x656)](_0x3dd924?_0xcaedf3(_0x3dd924,_0x5d12f6):_0x128120(_0x5d12f6));}await Promise[_0x58405c(0x20e)](_0x21b991);}}},'saveCreds':async()=>_0xcaedf3(_0x300f17,'creds')};}var gs=T(require(a0_0x4a837a(0x43a))),ms=T(require('node-cache')),Rt=require(a0_0x4a837a(0x478)),Ya=require('@redis/client'),Tt=require(a0_0x4a837a(0x478)),Ct;function Ko(_0x4aaa26){const _0x32ac76=a0_0x4a837a;return Ct||(Ct=(0x0,Ya[_0x32ac76(0x205)])({'url':_0x4aaa26[_0x32ac76(0x28f)]}),Ct[_0x32ac76(0x33b)]()),Ct;}var ne=class c{constructor(_0x5c2e0d,_0x524180){this['redisEnv']=_0x5c2e0d,this['instanceName']=_0x524180,this['logger']=new C(c['name']),this['client']=Ko(_0x5c2e0d);}set[a0_0x4a837a(0x3c3)](_0x5469cf){const _0x2ebf31=a0_0x4a837a;this[_0x2ebf31(0x2fb)]=_0x5469cf;}async['instanceKeys'](){const _0x3eb41a=a0_0x4a837a;try{return await this[_0x3eb41a(0x271)][_0x3eb41a(0x1fb)]([_0x3eb41a(0x396),this[_0x3eb41a(0xbb)]['PREFIX_KEY']+':*']);}catch(_0x55c0f7){this[_0x3eb41a(0x5a9)][_0x3eb41a(0x60b)](_0x55c0f7);}}async['writeData'](_0x5e0d44,_0x1e53b8){const _0xc7979c=a0_0x4a837a;try{let _0x27fbeb=JSON[_0xc7979c(0xe8)](_0x1e53b8,Tt[_0xc7979c(0xb5)][_0xc7979c(0xf8)]);return await this[_0xc7979c(0x271)]['hSet'](this['redisEnv']['PREFIX_KEY']+':'+this[_0xc7979c(0x2fb)],_0x5e0d44,_0x27fbeb);}catch(_0x3852e8){this[_0xc7979c(0x5a9)]['error'](_0x3852e8);}}async[a0_0x4a837a(0x5b7)](){const _0x51fc87=a0_0x4a837a;try{let _0x286e08=await this[_0x51fc87(0x271)][_0x51fc87(0x108)](this[_0x51fc87(0xbb)][_0x51fc87(0x4d3)]+':'+this[_0x51fc87(0x2fb)]);if(_0x286e08){for(let _0x250948 in _0x286e08)Object['prototype'][_0x51fc87(0x331)][_0x51fc87(0x1b3)](_0x286e08,_0x250948)&&(_0x286e08[_0x250948]=JSON['parse'](_0x286e08[_0x250948],Tt[_0x51fc87(0xb5)][_0x51fc87(0x2e1)]));return _0x286e08;}}catch(_0x17f661){this['logger']['error'](_0x17f661);}}async['readData'](_0x13b9d1){const _0x793fb8=a0_0x4a837a;try{let _0x358871=await this[_0x793fb8(0x271)][_0x793fb8(0x256)](this['redisEnv']['PREFIX_KEY']+':'+this[_0x793fb8(0x2fb)],_0x13b9d1);if(_0x358871)return JSON[_0x793fb8(0xc0)](_0x358871,Tt['BufferJSON'][_0x793fb8(0x2e1)]);}catch(_0x29ab95){this['logger'][_0x793fb8(0x60b)](_0x29ab95);}}async['removeData'](_0x2e53ce){const _0x3f3e90=a0_0x4a837a;try{return await this[_0x3f3e90(0x271)][_0x3f3e90(0x5c1)](this[_0x3f3e90(0xbb)]['PREFIX_KEY']+':'+this[_0x3f3e90(0x2fb)],_0x2e53ce);}catch(_0xb1c96b){this[_0x3f3e90(0x5a9)][_0x3f3e90(0x60b)](_0xb1c96b);}}async['delAll'](_0x475dbb){const _0x2f3997=a0_0x4a837a;try{return await this['client'][_0x2f3997(0x25b)](_0x475dbb||this['redisEnv'][_0x2f3997(0x4d3)]+':'+this[_0x2f3997(0x2fb)]);}catch(_0x4ade07){this[_0x2f3997(0x5a9)][_0x2f3997(0x60b)](_0x4ade07);}}};async function ps(_0x2909eb,_0x16d452){const _0x3bca81=a0_0x4a837a;let _0x3e587a=new C(ps[_0x3bca81(0x372)]),_0x252b58=new ne(_0x2909eb,_0x16d452),_0x369729=async(_0x5c42aa,_0xf5633f)=>{const _0x42118a=_0x3bca81;try{return await _0x252b58['writeData'](_0xf5633f,_0x5c42aa);}catch(_0x551ff9){return _0x3e587a[_0x42118a(0x60b)]({'localError':'writeData','error':_0x551ff9});}},_0x209418=async _0x5c35e7=>{const _0x343694=_0x3bca81;try{return await _0x252b58[_0x343694(0x24e)](_0x5c35e7);}catch(_0x87611d){_0x3e587a[_0x343694(0x60b)]({'readData':_0x343694(0x5ff),'error':_0x87611d});return;}},_0x51524d=async _0x1f5a13=>{const _0x276c5e=_0x3bca81;try{return await _0x252b58[_0x276c5e(0x56a)](_0x1f5a13);}catch(_0x52a0a8){_0x3e587a[_0x276c5e(0x60b)]({'readData':'removeData','error':_0x52a0a8});}},_0x252b2d=await _0x209418(_0x3bca81(0x170))||(0x0,Rt[_0x3bca81(0x386)])();return{'state':{'creds':_0x252b2d,'keys':{'get':async(_0xc535a1,_0x2c80f8)=>{const _0xa4f92e=_0x3bca81;let _0x9c03f0={};return await Promise[_0xa4f92e(0x20e)](_0x2c80f8[_0xa4f92e(0x227)](async _0x2d42f8=>{const _0x55e89d=_0xa4f92e;let _0x280578=await _0x209418(_0xc535a1+'-'+_0x2d42f8);_0xc535a1===_0x55e89d(0x344)&&_0x280578&&(_0x280578=Rt[_0x55e89d(0x1f5)][_0x55e89d(0x118)][_0x55e89d(0x405)][_0x55e89d(0x5a0)](_0x280578)),_0x9c03f0[_0x2d42f8]=_0x280578;})),_0x9c03f0;},'set':async _0x4a5bdd=>{const _0xba8da7=_0x3bca81;let _0x145754=[];for(let _0x49720a in _0x4a5bdd)for(let _0x2f87d2 in _0x4a5bdd[_0x49720a]){let _0xa55c8a=_0x4a5bdd[_0x49720a][_0x2f87d2],_0x13aa18=_0x49720a+'-'+_0x2f87d2;_0x145754[_0xba8da7(0x656)](_0xa55c8a?await _0x369729(_0xa55c8a,_0x13aa18):await _0x51524d(_0x13aa18));}await Promise[_0xba8da7(0x20e)](_0x145754);}}},'saveCreds':async()=>await _0x369729(_0x252b2d,_0x3bca81(0x170))};}var P=T(require('fs')),It=require('uuid'),Ot=T(require('sharp'));function G(_0x553206){const _0x31d550=a0_0x4a837a;if(_0x553206['viewOnceMessage']||_0x553206[_0x31d550(0x2ec)]){let _0x58ddfd=_0x553206[_0x31d550(0x678)]?_0x553206[_0x31d550(0x678)][_0x31d550(0x310)]:_0x553206[_0x31d550(0x2ec)][_0x31d550(0x310)];return(0x0,w[_0x31d550(0x48b)])(_0x58ddfd);}return _0x553206[_0x31d550(0x34f)]?_0x31d550(0x34f):_0x553206[_0x31d550(0x4da)]?_0x31d550(0x4da):_0x553206['viewOnceMessageV2Extension']?_0x31d550(0x193):(0x0,w['getContentType'])(_0x553206);}var ye=class c{constructor(_0x5435c3,_0x23f858,_0x3b42bf){const _0x543855=a0_0x4a837a;this[_0x543855(0x1c6)]=_0x5435c3,this['eventEmitter']=_0x23f858,this['repository']=_0x3b42bf,this['AutomateSystem']=null,this[_0x543855(0x5a9)]=new C(c['name']),this[_0x543855(0x634)]={},this[_0x543855(0x3da)]={},this[_0x543855(0x348)]={'state':_0x543855(0x32e)},this[_0x543855(0x547)]=(0x0,$[_0x543855(0x31f)])(Q,_0x543855(0x49c)),this['msgRetryCounterCache']=new ms[(_0x543855(0x4d5))](),this[_0x543855(0x46b)]=new ms[(_0x543855(0x4d5))](),this[_0x543855(0x255)]=!0x1,this[_0x543855(0x37f)]={'status.instance':_0x543855(0x1e9),'qrcode.updated':_0x543855(0x1cd),'messages.upsert':_0x543855(0x4e8),'messages.update':'/wa-message-update','send.message':'/wa-message','group.upsert':_0x543855(0x4c6),'group.update':_0x543855(0x4c6),'group-participants.update':_0x543855(0x4c6),'connection.update':_0x543855(0x1e9),'messages.set':'/wa-message','contacts.set':_0x543855(0x407),'contacts.upsert':_0x543855(0x407),'contacts.update':_0x543855(0x407),'presence.update':'/wa-presence','chats.set':_0x543855(0x387),'chats.update':_0x543855(0x387),'chats.upsert':_0x543855(0x387),'chats.delete':_0x543855(0x387)},this[_0x543855(0x321)]=0x0,this[_0x543855(0x47e)]=[],this[_0x543855(0x369)]=0xf,this[_0x543855(0x563)]=0x7530,this[_0x543855(0x449)]=!0x1,this['chatHandle']={'chats.upsert':async(_0x89d450,_0x646046)=>{const _0x213b1a=_0x543855;let _0x4abd51=[];for await(let _0x49373a of _0x89d450)_0x4abd51['push']({'_id':_0x49373a['id'],'owner':this['instance'][_0x213b1a(0x194)],'group':_0x49373a['id'][_0x213b1a(0xb0)](_0x213b1a(0x4ab)),'name':_0x49373a['name']||_0x49373a[_0x213b1a(0x3ea)]||null,'contactname':null,'lastmsg':_0x49373a['conversationTimestamp']&&_0x49373a[_0x213b1a(0x287)][_0x213b1a(0x42d)]()[_0x213b1a(0x58b)]<0xd?_0x49373a['conversationTimestamp']*0x3e8:_0x49373a[_0x213b1a(0x287)]||null,'archived':_0x49373a[_0x213b1a(0x668)]||!0x1,'unreadcount':_0x49373a[_0x213b1a(0x2c3)]||0x0});this[_0x213b1a(0x1d6)]('chats.upsert',_0x4abd51);},'chats.update':async(_0x58d631,_0x48e5e3)=>{const _0x3995d0=_0x543855;for(let _0x2dc07b of _0x58d631){let _0x552091={'_id':_0x2dc07b['id'],'owner':this[_0x3995d0(0x634)][_0x3995d0(0x194)],'group':_0x2dc07b['id'][_0x3995d0(0xb0)]('@g.us'),'name':_0x2dc07b[_0x3995d0(0x372)]||_0x2dc07b[_0x3995d0(0x3ea)],'archived':_0x2dc07b['archived']},_0x2e1090=!0x1,_0x477736={};_0x552091[_0x3995d0(0x668)]!=null&&(this[_0x3995d0(0x5a9)]['verbose'](this[_0x3995d0(0x2fb)]+'\x20('+this[_0x3995d0(0x634)][_0x3995d0(0x194)]+_0x3995d0(0x46c)+_0x2dc07b[_0x3995d0(0x668)]),_0x2e1090=!0x0,_0x477736['archived']=_0x2dc07b[_0x3995d0(0x668)]),_0x2dc07b['name']!=null&&(this[_0x3995d0(0x5a9)][_0x3995d0(0x660)](this[_0x3995d0(0x2fb)]+'\x20('+this[_0x3995d0(0x634)][_0x3995d0(0x194)]+'):\x20teve\x20mudanças\x20chat.name:\x20'+_0x2dc07b['name']),_0x2e1090=!0x0,_0x477736['name']=_0x2dc07b[_0x3995d0(0x372)]),_0x2dc07b[_0x3995d0(0x3ea)]!=null&&(this[_0x3995d0(0x5a9)][_0x3995d0(0x660)](this[_0x3995d0(0x2fb)]+'\x20('+this['instance'][_0x3995d0(0x194)]+_0x3995d0(0x636)+_0x2dc07b[_0x3995d0(0x3ea)]),_0x2e1090=!0x0,_0x477736[_0x3995d0(0x372)]=_0x2dc07b['displayName']);let _0x44886d;_0x2e1090&&(_0x44886d=await this['repository'][_0x3995d0(0xe2)][_0x3995d0(0x3ed)]({'where':{'_id':_0x2dc07b['id'],'owner':this[_0x3995d0(0x634)][_0x3995d0(0x194)]}},_0x477736)),_0x44886d&&F(this[_0x3995d0(0x2fb)],_0x3995d0(0x15c),{'chat':_0x44886d});}},'chats.delete':async _0x44072a=>{const _0x3e5076=_0x543855;this[_0x3e5076(0x1d6)](_0x3e5076(0x4e3),[..._0x44072a]);}},this[_0x543855(0x14f)]={'contacts.upsert':async(_0x5a7a03,_0x36042d)=>{const _0x1594f9=_0x543855;let _0x50ccee=await this['repository'][_0x1594f9(0x549)][_0x1594f9(0x33c)]({'where':{'owner':this[_0x1594f9(0x634)][_0x1594f9(0x194)]}}),_0x11d3c1=[];for await(let _0x50bb9c of _0x5a7a03)_0x50ccee[_0x1594f9(0x33c)](_0x156a63=>_0x156a63[_0x1594f9(0x3f7)]===_0x50bb9c['id'])||_0x11d3c1[_0x1594f9(0x656)]({'_id':_0x50bb9c['id'],'pushName':_0x50bb9c?.['name']||_0x50bb9c?.[_0x1594f9(0x5f3)],'owner':this[_0x1594f9(0x634)]['wuid']});this['sendDataWebhook'](_0x1594f9(0x4c7),_0x11d3c1),await this[_0x1594f9(0x5c0)]['contact'][_0x1594f9(0x426)](_0x11d3c1);},'contacts.update':async(_0x3c9a39,_0x121fe8)=>{const _0x4b1e37=_0x543855;let _0x4d203b=[];for await(let _0x6a8fb of _0x3c9a39)_0x4d203b[_0x4b1e37(0x656)]({'_id':_0x6a8fb['id'],'pushName':_0x6a8fb?.['name']??_0x6a8fb?.['verifiedName'],'owner':this[_0x4b1e37(0x634)][_0x4b1e37(0x194)]});this['sendDataWebhook'](_0x4b1e37(0x631),_0x4d203b);}},this[_0x543855(0x13e)]={'messaging-history.set':async({messages:_0x2e6fe9,chats:_0x2c9746,isLatest:_0x55f1f5},_0x19d02a)=>{const _0x5f3871=_0x543855;if(_0x55f1f5){let _0x45a48e=await Promise[_0x5f3871(0x20e)](_0x2c9746[_0x5f3871(0x227)](async _0x223d32=>({'_id':_0x223d32['id'],'owner':this['instance']['wuid'],'group':_0x223d32['id'][_0x5f3871(0xb0)](_0x5f3871(0x4ab)),'name':_0x223d32['name']||_0x223d32['displayName']||null,'contactname':null,'lastmsg':_0x223d32[_0x5f3871(0x287)]&&_0x223d32['conversationTimestamp'][_0x5f3871(0x42d)]()[_0x5f3871(0x58b)]<0xd?_0x223d32[_0x5f3871(0x287)]*0x3e8:_0x223d32[_0x5f3871(0x287)]||null,'archived':_0x223d32['archived']||!0x1,'unreadcount':_0x223d32[_0x5f3871(0x2c3)]||0x0})));this[_0x5f3871(0x1d6)](_0x5f3871(0x100),_0x45a48e),await this['upsertChats'](_0x45a48e,_0x19d02a);}let _0x1f6305=[],_0x228988=Date['now']()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x3e4ea3]of Object['entries'](_0x2e6fe9)){if(_0x3e4ea3[_0x5f3871(0x310)]?.[_0x5f3871(0x373)]||_0x3e4ea3[_0x5f3871(0x310)]?.['senderKeyDistributionMessage']||!_0x3e4ea3[_0x5f3871(0x310)]||_0x3e4ea3['key'][_0x5f3871(0x397)]==='status@broadcast'||(gs['default'][_0x5f3871(0x515)](_0x3e4ea3?.[_0x5f3871(0x15f)])&&(_0x3e4ea3[_0x5f3871(0x15f)]=_0x3e4ea3['messageTimestamp']?.[_0x5f3871(0x37c)]()),_0x3e4ea3[_0x5f3871(0x15f)]&&_0x3e4ea3[_0x5f3871(0x15f)][_0x5f3871(0x42d)]()[_0x5f3871(0x58b)]<0xd&&(_0x3e4ea3[_0x5f3871(0x15f)]=_0x3e4ea3[_0x5f3871(0x15f)]*0x3e8),_0x3e4ea3[_0x5f3871(0x15f)]<_0x228988))continue;let {message_normalized:_0x6a0331}=this[_0x5f3871(0x1e5)](_0x3e4ea3['message'],G(_0x3e4ea3[_0x5f3871(0x310)]),null);Object[_0x5f3871(0x396)](_0x6a0331)[_0x5f3871(0x58b)]>0x0&&_0x1f6305[_0x5f3871(0x656)]({'_id':_0x3e4ea3[_0x5f3871(0x1a8)]['id'],'key':_0x3e4ea3[_0x5f3871(0x1a8)],'pushName':_0x3e4ea3[_0x5f3871(0x2eb)],'participant':_0x3e4ea3[_0x5f3871(0x3e4)],'message':{..._0x3e4ea3[_0x5f3871(0x310)]},'messageType':G(_0x3e4ea3['message']),'message_normalized':{'key':_0x3e4ea3[_0x5f3871(0x1a8)],'pushName':_0x3e4ea3[_0x5f3871(0x2eb)],'messageTimestamp':_0x3e4ea3[_0x5f3871(0x15f)],..._0x6a0331},'messageTimestamp':_0x3e4ea3[_0x5f3871(0x15f)],'owner':this[_0x5f3871(0x634)]['wuid']});}_0x19d02a['ENABLED']&&_0x1f6305['length']>0x0&&(this[_0x5f3871(0x5a9)][_0x5f3871(0x660)](this['instanceName']+'\x20('+this[_0x5f3871(0x634)][_0x5f3871(0x194)]+'):\x20'+_0x1f6305[_0x5f3871(0x58b)]+'\x20mensagens\x20de\x20'+this[_0x5f3871(0x634)][_0x5f3871(0x194)]+_0x5f3871(0x1b8)),await this[_0x5f3871(0x5c0)][_0x5f3871(0x310)][_0x5f3871(0x426)]([..._0x1f6305])),this[_0x5f3871(0x1d6)](_0x5f3871(0x53b),[..._0x1f6305]),_0x2e6fe9=void 0x0;},'messages.upsert':async({messages:_0x3db8a7,type:_0x5abe39},_0x4cab94)=>{const _0x534b42=_0x543855;let _0x265629=_0x3db8a7[0x0];if(_0x5abe39!==_0x534b42(0x4a1)||!_0x265629?.[_0x534b42(0x310)]||_0x265629[_0x534b42(0x310)]?.[_0x534b42(0x373)]||_0x265629[_0x534b42(0x310)]['senderKeyDistributionMessage']||_0x265629['key'][_0x534b42(0x397)]==='status@broadcast')return;let _0x125d54=null,_0x1031ed=null;try{_0x125d54=await this[_0x534b42(0x36e)](_0x265629),_0x1031ed=_0x125d54?_0x125d54[_0x534b42(0x31f)](','):null;}catch(_0x24d941){this[_0x534b42(0x5a9)][_0x534b42(0x660)](this['instanceName']+'\x20('+this[_0x534b42(0x634)][_0x534b42(0x194)]+_0x534b42(0x4b2)+JSON[_0x534b42(0xe8)](_0x24d941,null,0x2)),_0x1031ed='error\x20get\x20vote';}if(this[_0x534b42(0x271)]['sendPresenceUpdate'](_0x534b42(0x2e2)),gs[_0x534b42(0x4d5)][_0x534b42(0x515)](_0x265629['messageTimestamp'])&&(_0x265629[_0x534b42(0x15f)]=_0x265629[_0x534b42(0x15f)]?.['toNumber']()),this[_0x534b42(0x3da)]?.['groups_ignore']&&_0x265629[_0x534b42(0x1a8)][_0x534b42(0x397)][_0x534b42(0x1a9)](_0x534b42(0x4ab))){this[_0x534b42(0x5a9)][_0x534b42(0x660)]('group\x20ignored');return;}_0x265629[_0x534b42(0x15f)]&&_0x265629['messageTimestamp'][_0x534b42(0x42d)]()[_0x534b42(0x58b)]<0xd&&(_0x265629[_0x534b42(0x15f)]=_0x265629[_0x534b42(0x15f)]*0x3e8);let _0x581c5f=_0x265629[_0x534b42(0x310)],{messageContent:_0x46555f,message_normalized:_0x1520f2}=this['normalizeMessage'](_0x581c5f,G(_0x265629['message']),_0x1031ed);_0x46555f||console[_0x534b42(0x60b)]('Mensagem\x20não\x20suportada');let _0x166972={'_id':_0x265629[_0x534b42(0x1a8)]['id'],'key':_0x265629[_0x534b42(0x1a8)],'pushName':_0x265629[_0x534b42(0x2eb)],'message':{..._0x265629[_0x534b42(0x310)]},'messageType':G(_0x265629[_0x534b42(0x310)]),'message_normalized':{'key':_0x265629[_0x534b42(0x1a8)],'pushName':_0x265629['pushName'],'messageTimestamp':_0x265629[_0x534b42(0x15f)],'source':(0x0,w[_0x534b42(0x160)])(_0x265629[_0x534b42(0x1a8)]['id']),..._0x1520f2},'messageTimestamp':_0x265629[_0x534b42(0x15f)],'owner':this['instance'][_0x534b42(0x194)]};this['logger'][_0x534b42(0x4eb)](_0x166972),await this[_0x534b42(0x5c0)][_0x534b42(0x310)][_0x534b42(0x426)]([_0x166972]),this[_0x534b42(0x1d6)]('messages.upsert',_0x166972),F(this[_0x534b42(0x2fb)],_0x534b42(0x581),{'message':_0x166972}),_0x265629[_0x534b42(0x1a8)][_0x534b42(0x397)]!==_0x534b42(0x3c5)&&await this[_0x534b42(0x43e)](_0x4cab94,_0x166972,_0x534b42(0x5de));},'messages.update':async(_0x37256c,_0x495aa6)=>{const _0x53acae=_0x543855;let _0x32b798={0x0:_0x53acae(0x2bf),0x1:_0x53acae(0x3d4),0x2:_0x53acae(0x64b),0x3:_0x53acae(0x483),0x4:_0x53acae(0x593),0x5:'PLAYED'};for await(let {key:_0x3cf8b8,update:_0x45633d}of _0x37256c){if(this['localWebhook']?.['groups_ignore']&&_0x3cf8b8['remoteJid'][_0x53acae(0x1a9)](_0x53acae(0x4ab))){this[_0x53acae(0x5a9)]['verbose'](_0x53acae(0x183));return;}if(_0x3cf8b8[_0x53acae(0x397)]!==_0x53acae(0x3c5)){let _0x486c25=Date[_0x53acae(0x2a2)](),_0x1290f8;_0x45633d[_0x53acae(0x310)]===null&&_0x45633d[_0x53acae(0x2e7)]===void 0x0?_0x1290f8=_0x53acae(0x488):_0x1290f8=_0x32b798[_0x45633d['status']];let _0x184d94=_0x3cf8b8[_0x53acae(0x397)][_0x53acae(0x522)](/:\d{1,2}@/g,'@'),_0x3472de={..._0x3cf8b8,'remoteJid':_0x184d94,'status':_0x1290f8,'datetime':_0x486c25,'owner':this['instance']['wuid']};this[_0x53acae(0x1d6)]('messages.update',_0x3472de),await this[_0x53acae(0x532)](_0x3cf8b8,_0x184d94,_0x3472de);}}}},this[_0x543855(0x138)]={'groups.upsert':_0x6e738e=>{const _0x1eddf9=_0x543855;this['sendDataWebhook'](_0x1eddf9(0x3b5),_0x6e738e);},'groups.update':_0x3e0b08=>{const _0x59c1ac=_0x543855;this[_0x59c1ac(0x1d6)](_0x59c1ac(0x31e),_0x3e0b08);},'group-participants.update':_0x1c2691=>{const _0x5a4b16=_0x543855;this[_0x5a4b16(0x1d6)](_0x5a4b16(0x114),_0x1c2691);}},this[_0x543855(0x36e)]=async _0x55bbf4=>{const _0x453931=_0x543855;if(_0x55bbf4[_0x453931(0x310)]?.['pollUpdateMessage']){let _0x27f91e=await this[_0x453931(0x471)](_0x55bbf4[_0x453931(0x310)][_0x453931(0x4c0)]['pollCreationMessageKey'],!0x0);if(_0x27f91e){let _0x21ec52=_0x27f91e[_0x453931(0x1a8)]['fromMe']?this[_0x453931(0x634)][_0x453931(0x194)]+_0x453931(0x59a):_0x27f91e[_0x453931(0x1a8)][_0x453931(0x3e4)]||_0x27f91e[_0x453931(0x1a8)][_0x453931(0x397)],_0x2369e7=_0x27f91e['key']['id'],_0x8f955d=_0x27f91e['message'],_0x219ecd=Buffer[_0x453931(0x66c)](_0x8f955d[_0x453931(0x473)][_0x453931(0x2e3)][_0x453931(0x42d)](_0x453931(0x64a)),'hex'),_0x38fea6=(0x0,w[_0x453931(0x526)])(_0x55bbf4[_0x453931(0x310)][_0x453931(0x4c0)][_0x453931(0x5c2)],{'pollCreatorJid':_0x21ec52,'pollMsgId':_0x2369e7,'pollEncKey':_0x219ecd,'voterJid':_0x55bbf4[_0x453931(0x1a8)][_0x453931(0x319)]?this[_0x453931(0x634)][_0x453931(0x194)]+'@s.whatsapp.net':_0x55bbf4['key'][_0x453931(0x397)]['endsWith'](_0x453931(0x2c1))?_0x55bbf4[_0x453931(0x1a8)][_0x453931(0x3e4)]:_0x55bbf4[_0x453931(0x1a8)][_0x453931(0x397)]}),_0x1cb886=[],_0x3dfca5=_0x38fea6[_0x453931(0x529)][_0x453931(0x227)](_0x5b6058=>Buffer[_0x453931(0x66c)](_0x5b6058)[_0x453931(0x42d)](_0x453931(0x64a)));for(let {optionName:_0x29e381}of _0x8f955d[_0x453931(0x35c)]?.[_0x453931(0x224)]||_0x8f955d['pollCreationMessageV3']?.[_0x453931(0x224)]||_0x8f955d['pollCreationMessageV2']?.[_0x453931(0x224)])_0x3dfca5[_0x453931(0x10a)]((0x0,w[_0x453931(0x57a)])(Buffer[_0x453931(0x66c)](_0x29e381))[_0x453931(0x42d)](_0x453931(0x64a)))>-0x1&&_0x1cb886[_0x453931(0x656)](_0x29e381);return _0x1cb886;}}return null;},this['normalizeMessage']=(_0x5d8880,_0x506ae7,_0x301a45)=>{const _0x264e2b=_0x543855;let _0xd9a5c3=_0x506ae7?_0x5d8880[_0x506ae7]:void 0x0,_0x2a8d82={},_0x2cf76a=null,_0x47c7df=null,_0x38ea27=null;if(_0x5d8880[_0x264e2b(0x620)]?.['message']?.[_0x264e2b(0x373)]?.[_0x264e2b(0x620)])_0x506ae7=(0x0,w['getContentType'])(_0x5d8880[_0x264e2b(0x620)]['message'][_0x264e2b(0x373)][_0x264e2b(0x620)]),_0x2cf76a=_0x5d8880['editedMessage'][_0x264e2b(0x310)][_0x264e2b(0x373)]['key']['id'],_0xd9a5c3=_0x5d8880[_0x264e2b(0x620)]['message'][_0x264e2b(0x373)]['editedMessage'][_0x506ae7];else switch(_0x506ae7){case'ephemeralMessage':_0x506ae7=(0x0,w[_0x264e2b(0x48b)])(_0x5d8880[_0x264e2b(0x310)][_0x264e2b(0x650)][_0x264e2b(0x310)]),_0xd9a5c3=_0x5d8880[_0x264e2b(0x310)]['ephemeralMessage'][_0x264e2b(0x310)][_0x506ae7];break;case'viewOnceMessageV2':_0x506ae7=(0x0,w['getContentType'])(_0x5d8880[_0x264e2b(0x2ec)][_0x264e2b(0x310)]),_0xd9a5c3=_0x5d8880[_0x264e2b(0x2ec)]['message'][_0x506ae7];break;case _0x264e2b(0x678):_0x506ae7=(0x0,w[_0x264e2b(0x48b)])(_0x5d8880[_0x264e2b(0x678)][_0x264e2b(0x310)]),_0xd9a5c3=_0x5d8880[_0x264e2b(0x678)]['message'][_0x506ae7];break;case'viewOnceMessageV2Extension':_0x506ae7=(0x0,w[_0x264e2b(0x48b)])(_0x5d8880[_0x264e2b(0x678)][_0x264e2b(0x310)]),_0xd9a5c3=_0x5d8880[_0x264e2b(0x678)]['message'][_0x506ae7];break;default:_0xd9a5c3=_0x5d8880[_0x264e2b(0x310)][_0x506ae7];break;}if(!_0x506ae7||!_0xd9a5c3)return console[_0x264e2b(0x60b)](_0x264e2b(0x232),_0x5d8880),{'messageType':_0x506ae7,'messageContent':_0xd9a5c3,'message_normalized':{}};_0x5d8880[_0x506ae7]?.[_0x264e2b(0x496)]?.[_0x264e2b(0x132)]&&_0x5d8880[_0x506ae7]?.['contextInfo']?.[_0x264e2b(0x4ae)]&&(_0x47c7df=_0x5d8880[_0x506ae7][_0x264e2b(0x496)][_0x264e2b(0x132)]),_0x5d8880['reactionMessage']&&(_0x38ea27=_0x5d8880[_0x264e2b(0x531)][_0x264e2b(0x1a8)]['id']);let _0x5cd4dc;if(_0xd9a5c3&&typeof _0xd9a5c3==_0x264e2b(0x32b)&&_0x264e2b(0xdd)in _0xd9a5c3&&({pollCreationMessageKey:_0x5cd4dc}=_0xd9a5c3),_0x506ae7===_0x264e2b(0x147)){let _0x77e9ab=_0xd9a5c3?.['message']?.[_0x264e2b(0x330)];_0x77e9ab&&(_0xd9a5c3=_0x77e9ab);}if(_0x506ae7==='pollCreationMessage'||_0x506ae7===_0x264e2b(0x4da)||_0x506ae7==='pollCreationMessageV3'){let _0x187191=_0xd9a5c3[_0x264e2b(0x224)][_0x264e2b(0x227)](_0x3ffa8c=>_0x3ffa8c[_0x264e2b(0xe7)])[_0x264e2b(0x31f)]('|');_0x2a8d82[_0x264e2b(0x347)]=_0x187191;}let _0x5d33f9=_0xd9a5c3[_0x264e2b(0x372)]||_0xd9a5c3[_0x264e2b(0x24a)]||_0xd9a5c3[_0x264e2b(0x5a2)]||_0xd9a5c3[_0x264e2b(0x3ea)];if(_0xd9a5c3[_0x264e2b(0x3b0)]){let _0x4e188e=this[_0x264e2b(0xef)](JSON[_0x264e2b(0xe8)](_0xd9a5c3[_0x264e2b(0x3b0)],null,0x2));_0x5d33f9=_0x5d33f9+'\x0a'+_0x4e188e;}if(_0xd9a5c3){let {displayName:_0x465d0c,vcard:_0x1c2087,contactVcard:_0x3aec47,name:_0x5ddfe4,caption:_0x2d3e90,conversation:_0x24b9ba,pollCreationMessageKey:_0x5aa327,footerText:_0x709dd9,contentText:_0x329bae,pageCount:_0x30ced1,headerType:_0x29fe79,isAvatar:_0x455af6,isAnimated:_0x20088d,fallbackLc:_0x1e5100,fallbackLg:_0x5bf7a1,namespace:_0x20fd52,elementName:_0x40cf02,localizableParams:_0x4e0d5e,viewOnce:_0x38f699,height:_0x200322,width:_0x19248d,key:_0x300fe1,firstScanLength:_0x12256a,firstScanSidecar:_0x360116,gifPlayback:_0x1de40c,gifAttribution:_0x3e569c,midQualityFileSha256:_0x18cae6,scansSidecar:_0x4f5346,streamingSidecar:_0x4e6d86,thumbnailHeight:_0x15b8bb,thumbnailWidth:_0x5de523,thumbnailEncSha256:_0x56b321,thumbnailDirectPath:_0x15d563,canonicalUrl:_0xc08474,matchedText:_0x3cadc9,previewType:_0x36edf8,thumbnailSha256:_0x1b2283,deviceListMetadataVersion:_0x17f952,inviteLinkGroupTypeV2:_0x28d7c4,interactiveAnnotations:_0x59f2ff,scanLengths:_0x4feb0d,jpegThumbnail:_0x43986b,url:_0x241855,mediaKeyTimestamp:_0x2880de,waveform:_0x2020ee,stickerSentTs:_0x10ae4d,firstFrameLength:_0x2e8e85,fileEncSha256:_0x20f09d,contextInfo:_0x466542,firstFrameSidecar:_0x19d2cb,directPath:_0xaf6b97,fileSha256:_0x4f6a8a,mediaKey:_0x5b4062,senderTimestampMs:_0x5d4451,..._0x4f5b03}=_0xd9a5c3;typeof _0xd9a5c3==_0x264e2b(0x46f)?_0x2a8d82={'text':_0xd9a5c3,'type':_0x506ae7||_0x264e2b(0x5a2),..._0x2cf76a&&{'edited':_0x2cf76a},..._0x47c7df&&{'quoted':_0x47c7df},..._0x38ea27&&{'reaction':_0x38ea27}}:_0x2a8d82={'text':_0x5d33f9,..._0x4f5b03,..._0x506ae7==='pollUpdateMessage'?{'poll_id':_0xd9a5c3[_0x264e2b(0xdd)]['id'],'vote':_0x301a45}:{},'type':_0x506ae7,..._0x2cf76a&&{'edited':_0x2cf76a},..._0x47c7df&&{'quoted':_0x47c7df},..._0x38ea27&&{'reaction':_0x38ea27},...(_0x506ae7==='pollCreationMessage'||_0x506ae7===_0x264e2b(0x4da)||_0x506ae7===_0x264e2b(0x34f))&&{'convertedOptions':_0x2a8d82[_0x264e2b(0x347)]}};}return{'messageType':_0x506ae7,'messageContent':_0xd9a5c3,'message_normalized':_0x2a8d82};},this[_0x543855(0x243)]=null,this[_0x543855(0x607)]=0x0,this['timerId']=null,(this[_0x543855(0x199)](),this[_0x543855(0x634)]['qrcode']={'count':0x0});}set[a0_0x4a837a(0x2fb)](_0x1a7772){const _0x4c924f=a0_0x4a837a;if(!_0x1a7772){this['instance'][_0x4c924f(0x372)]=(0x0,Za['v4'])();return;}this[_0x4c924f(0x634)][_0x4c924f(0x372)]=_0x1a7772,this['sendDataWebhook']('status.instance',{'instance':this['instance'][_0x4c924f(0x372)],'status':_0x4c924f(0x1cb)});}get[a0_0x4a837a(0x2fb)](){const _0xbfb133=a0_0x4a837a;return this[_0xbfb133(0x634)][_0xbfb133(0x372)];}get[a0_0x4a837a(0x194)](){const _0x5d3f0f=a0_0x4a837a;return this[_0x5d3f0f(0x634)][_0x5d3f0f(0x194)];}async[a0_0x4a837a(0x260)](){const _0x3dbb49=a0_0x4a837a;let _0x7f51db=this[_0x3dbb49(0x271)][_0x3dbb49(0x5dd)]?.[_0x3dbb49(0x372)]??this[_0x3dbb49(0x271)]['user']?.[_0x3dbb49(0x5f3)];if(!_0x7f51db){if(this[_0x3dbb49(0x1c6)][_0x3dbb49(0x17e)](_0x3dbb49(0x2b6))[_0x3dbb49(0x149)]){let _0x5162f6=await M['getClient']()['db'](this[_0x3dbb49(0x1c6)][_0x3dbb49(0x17e)]('DATABASE')[_0x3dbb49(0xfd)][_0x3dbb49(0xbc)]+'-instances')['collection'](this[_0x3dbb49(0x2fb)])['findOne']({'_id':_0x3dbb49(0x170)});if(_0x5162f6){let _0x21be4a=JSON[_0x3dbb49(0xc0)](JSON[_0x3dbb49(0xe8)](_0x5162f6),w[_0x3dbb49(0xb5)][_0x3dbb49(0x2e1)]);_0x7f51db=_0x21be4a['me']?.[_0x3dbb49(0x372)]||_0x21be4a['me']?.[_0x3dbb49(0x5f3)];}}else{if((0x0,Te['existsSync'])((0x0,$[_0x3dbb49(0x31f)])(V,this[_0x3dbb49(0x2fb)],_0x3dbb49(0x5d6)))){let _0x384caa=JSON[_0x3dbb49(0xc0)]((0x0,Te['readFileSync'])((0x0,$[_0x3dbb49(0x31f)])(V,this[_0x3dbb49(0x2fb)],_0x3dbb49(0x5d6)),{'encoding':_0x3dbb49(0x2ac)}));_0x7f51db=_0x384caa['me']?.['name']||_0x384caa['me']?.['verifiedName'];}}}return _0x7f51db;}get[a0_0x4a837a(0x638)](){const _0x58b029=a0_0x4a837a;return this[_0x58b029(0x634)][_0x58b029(0x638)];}get[a0_0x4a837a(0x56f)](){const _0x36e2a8=a0_0x4a837a;return{'code':this[_0x36e2a8(0x634)][_0x36e2a8(0x2c4)]?.[_0x36e2a8(0x130)],'base64':this['instance'][_0x36e2a8(0x2c4)]?.[_0x36e2a8(0x399)]};}async['loadWebhook'](){const _0x3b1139=a0_0x4a837a;let _0x5192b4=await this[_0x3b1139(0x5c0)][_0x3b1139(0xcd)][_0x3b1139(0x33c)](this[_0x3b1139(0x2fb)]);this[_0x3b1139(0x3da)]['url']=_0x5192b4?.['url'],this[_0x3b1139(0x3da)][_0x3b1139(0x258)]=_0x5192b4?.[_0x3b1139(0x258)],this['localWebhook'][_0x3b1139(0x658)]=_0x5192b4?.[_0x3b1139(0x658)],this['localWebhook']['STATUS_INSTANCE']=_0x5192b4?.[_0x3b1139(0x3a0)],this[_0x3b1139(0x3da)][_0x3b1139(0x26c)]=_0x5192b4?.[_0x3b1139(0x26c)],this['localWebhook'][_0x3b1139(0x445)]=_0x5192b4?.[_0x3b1139(0x445)],this[_0x3b1139(0x3da)]['MESSAGES_UPSERT']=_0x5192b4?.[_0x3b1139(0x5de)],this[_0x3b1139(0x3da)][_0x3b1139(0x208)]=_0x5192b4?.[_0x3b1139(0x208)],this[_0x3b1139(0x3da)][_0x3b1139(0x1d1)]=_0x5192b4?.[_0x3b1139(0x1d1)],this['localWebhook'][_0x3b1139(0x5f6)]=_0x5192b4?.[_0x3b1139(0x5f6)],this['localWebhook'][_0x3b1139(0x429)]=_0x5192b4?.['GROUP_PARTICIPANTS_UPDATE'],this[_0x3b1139(0x3da)][_0x3b1139(0x555)]=_0x5192b4?.[_0x3b1139(0x555)],this[_0x3b1139(0x3da)][_0x3b1139(0x162)]=_0x5192b4?.[_0x3b1139(0x162)],this['localWebhook'][_0x3b1139(0x51c)]=_0x5192b4?.['CHATS_UPDATE'],this[_0x3b1139(0x3da)]['CHATS_DELETE']=_0x5192b4?.['CHATS_DELETE'],this['localWebhook'][_0x3b1139(0x3b4)]=_0x5192b4?.[_0x3b1139(0x3b4)],this['localWebhook']['CONTACTS_UPSERT']=_0x5192b4?.[_0x3b1139(0x403)],this[_0x3b1139(0x3da)][_0x3b1139(0x28a)]=_0x5192b4?.[_0x3b1139(0x28a)],this[_0x3b1139(0x3da)][_0x3b1139(0x4ff)]=_0x5192b4?.[_0x3b1139(0x4ff)],this[_0x3b1139(0x3da)][_0x3b1139(0x4ee)]=_0x5192b4?.[_0x3b1139(0x4ee)],this[_0x3b1139(0x3da)][_0x3b1139(0xe1)]=_0x5192b4?.['CONNECTION_UPDATE'],this['localWebhook'][_0x3b1139(0x151)]=_0x5192b4?.['groups_ignore'];}async['setWebhook'](_0x3aa989){const _0x950fcb=a0_0x4a837a;let _0x2727c0=[_0x950fcb(0x3f7),_0x950fcb(0x351),_0x950fcb(0x258),_0x950fcb(0x658),'STATUS_INSTANCE',_0x950fcb(0x26c),_0x950fcb(0x208),'MESSAGES_UPSERT',_0x950fcb(0x445),'GROUPS_UPSERT','GROUPS_UPDATE',_0x950fcb(0x429),_0x950fcb(0x555),_0x950fcb(0x162),_0x950fcb(0x51c),_0x950fcb(0x439),_0x950fcb(0x3b4),_0x950fcb(0x403),_0x950fcb(0x28a),_0x950fcb(0x4ff),_0x950fcb(0x4ee),_0x950fcb(0xe1),'groups_ignore'],_0x29e385={};return _0x2727c0[_0x950fcb(0x2c9)](_0x19b76b=>{_0x3aa989[_0x19b76b]!==void 0x0&&(_0x29e385[_0x19b76b]=_0x3aa989[_0x19b76b]);}),await this[_0x950fcb(0x5c0)][_0x950fcb(0xcd)][_0x950fcb(0x22c)](_0x29e385,this[_0x950fcb(0x2fb)]),Object['assign'](this[_0x950fcb(0x3da)],_0x29e385),await this[_0x950fcb(0x5c0)][_0x950fcb(0xcd)][_0x950fcb(0x33c)](this[_0x950fcb(0x2fb)]);}async[a0_0x4a837a(0x4dc)](){const _0x37114f=a0_0x4a837a;return await this[_0x37114f(0x5c0)][_0x37114f(0xcd)]['find'](this['instanceName']);}async[a0_0x4a837a(0x1d6)](_0xc842d5,_0x5c4128){const _0x1cbb86=a0_0x4a837a;let _0x530ba1=this[_0x1cbb86(0x1c6)][_0x1cbb86(0x17e)](_0x1cbb86(0x551)),_0x2a76c8=_0xc842d5['replace'](/[\.-]/gm,'_')[_0x1cbb86(0x19c)](),_0x367980=this[_0x1cbb86(0x3da)]['enabled']&&(0x0,_[_0x1cbb86(0x491)])(this[_0x1cbb86(0x3da)][_0x1cbb86(0x351)])?this['localWebhook'][_0x1cbb86(0x351)]+(this[_0x1cbb86(0x3da)]['local_map']?this['webhookMap'][_0xc842d5]:''):null,_0x522de5=_0x530ba1?.[_0x1cbb86(0x3ac)],_0x575308=_0x522de5&&_0x522de5?.[_0x1cbb86(0x149)]&&(0x0,_['isURL'])(_0x522de5[_0x1cbb86(0x499)])?_0x522de5['URL']+(_0x530ba1[_0x1cbb86(0x1c8)]?this[_0x1cbb86(0x37f)][_0xc842d5]:''):null,_0xc998e7=this[_0x1cbb86(0x3da)][_0x2a76c8],_0x3a89b3=_0x530ba1?.[_0x1cbb86(0x61e)]?.[_0x2a76c8];if(_0xc998e7&&_0x367980)try{await ce[_0x1cbb86(0x4d5)][_0x1cbb86(0x22c)]({'baseURL':_0x367980})[_0x1cbb86(0x502)]('',{'event':_0xc842d5,'instance':this[_0x1cbb86(0x634)][_0x1cbb86(0x372)],'data':_0x5c4128}),this['logger'][_0x1cbb86(0x4eb)](_0x1cbb86(0x592)+_0xc842d5+':\x20'+_0x367980);}catch(_0x3910a5){this[_0x1cbb86(0x5a9)]['error'](this[_0x1cbb86(0x2fb)]+'\x20('+this['instance'][_0x1cbb86(0x194)]+_0x1cbb86(0x4b2)+{'local':c[_0x1cbb86(0x372)]+_0x1cbb86(0x2a1),'message':_0x3910a5?.[_0x1cbb86(0x310)],'hostName':_0x3910a5?.[_0x1cbb86(0x675)],'syscall':_0x3910a5?.[_0x1cbb86(0x129)],'code':_0x3910a5?.[_0x1cbb86(0x130)],'error':_0x3910a5?.['errno'],'stack':_0x3910a5?.[_0x1cbb86(0x626)],'name':_0x3910a5?.[_0x1cbb86(0x372)]});}if(_0x3a89b3&&_0x575308)try{await ce[_0x1cbb86(0x4d5)]['create']({'baseURL':_0x575308})['post']('',{'event':_0xc842d5,'instance':this['instance'][_0x1cbb86(0x372)],'data':_0x5c4128}),this[_0x1cbb86(0x5a9)][_0x1cbb86(0x4eb)](_0x1cbb86(0x41c)+_0xc842d5+':\x20'+_0x575308);}catch(_0x242f24){this['logger']['error'](this[_0x1cbb86(0x2fb)]+'\x20('+this[_0x1cbb86(0x634)][_0x1cbb86(0x194)]+_0x1cbb86(0x4b2)+{'local':c[_0x1cbb86(0x372)]+'.sendDataWebhook-global','message':_0x242f24?.['message'],'hostName':_0x242f24?.[_0x1cbb86(0x675)],'syscall':_0x242f24?.[_0x1cbb86(0x129)],'code':_0x242f24?.[_0x1cbb86(0x130)],'error':_0x242f24?.['errno'],'stack':_0x242f24?.[_0x1cbb86(0x626)],'name':_0x242f24?.[_0x1cbb86(0x372)]});}}async[a0_0x4a837a(0x192)]({qr:_0x4225ac,connection:_0x561156,lastDisconnect:_0x1a0508}){const _0x1cd431=a0_0x4a837a;if(_0x4225ac){if(this[_0x1cd431(0x634)]['qrcode'][_0x1cd431(0x455)]===this[_0x1cd431(0x1c6)][_0x1cd431(0x17e)](_0x1cd431(0x617))[_0x1cd431(0x318)])return this[_0x1cd431(0x1d6)](_0x1cd431(0x632),{'message':_0x1cd431(0x248),'statusCode':w['DisconnectReason'][_0x1cd431(0x245)]}),this[_0x1cd431(0x1d6)](_0x1cd431(0x54c),{'instance':this[_0x1cd431(0x634)][_0x1cd431(0x372)],'state':_0x1cd431(0x63f),'statusReason':w['DisconnectReason'][_0x1cd431(0x34a)]}),this[_0x1cd431(0x1d6)]('status.instance',{'instance':this[_0x1cd431(0x634)][_0x1cd431(0x372)],'status':_0x1cd431(0xa7)}),this['endSession']=!0x0,this[_0x1cd431(0x123)][_0x1cd431(0x412)](_0x1cd431(0x409),this[_0x1cd431(0x634)][_0x1cd431(0x372)]);this[_0x1cd431(0x634)][_0x1cd431(0x2c4)][_0x1cd431(0x455)]++;let _0x3faba4={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x1cd431(0x5df),'dark':_0x1cd431(0x538)}};eo['default'][_0x1cd431(0x25c)](_0x4225ac,_0x3faba4,(_0x5aa31e,_0x2e0837)=>{const _0x213790=_0x1cd431;if(_0x5aa31e){this[_0x213790(0x5a9)][_0x213790(0x60b)](this[_0x213790(0x2fb)]+'\x20('+this[_0x213790(0x634)][_0x213790(0x194)]+_0x213790(0x49a)+JSON['stringify'](_0x5aa31e,null,0x2));return;}this['instance'][_0x213790(0x2c4)][_0x213790(0x399)]=_0x2e0837,this['instance'][_0x213790(0x2c4)][_0x213790(0x130)]=_0x4225ac,this[_0x213790(0x1d6)]('qrcode.updated',{'qrcode':{'instance':this[_0x213790(0x634)][_0x213790(0x372)],'code':_0x4225ac,'base64':_0x2e0837}});}),to[_0x1cd431(0x4d5)][_0x1cd431(0x621)](_0x4225ac,{'small':!0x0},_0x13816f=>this[_0x1cd431(0x5a9)][_0x1cd431(0x4eb)](_0x1cd431(0x18f)+this[_0x1cd431(0x634)][_0x1cd431(0x372)]+_0x1cd431(0x1ac)+this['instance'][_0x1cd431(0x2c4)][_0x1cd431(0x455)]+_0x1cd431(0x2cb)+_0x13816f));}if(_0x561156&&(this['stateConnection']={'state':_0x561156,'statusReason':_0x1a0508?.['error']?.['output']?.[_0x1cd431(0x5b1)]??0xc8},this[_0x1cd431(0x1d6)](_0x1cd431(0x54c),{'instance':this['instance'][_0x1cd431(0x372)],...this['stateConnection']})),_0x561156===_0x1cd431(0x32e)){if(this[_0x1cd431(0x321)]++,this[_0x1cd431(0x47e)][_0x1cd431(0x656)](Date[_0x1cd431(0x2a2)]()),this[_0x1cd431(0x47e)]=this['reconnectTimestamps'][_0x1cd431(0x370)](_0xb40cea=>Date[_0x1cd431(0x2a2)]()-_0xb40cea<this[_0x1cd431(0x563)]),_0x1a0508['error']?.['output']?.[_0x1cd431(0x5b1)]!==w[_0x1cd431(0x5d5)][_0x1cd431(0x3dc)]&&this[_0x1cd431(0x47e)]['length']<=this[_0x1cd431(0x369)])await this[_0x1cd431(0x641)]();else{this[_0x1cd431(0x1d6)](_0x1cd431(0x4c8),{'instance':this[_0x1cd431(0x634)][_0x1cd431(0x372)],'status':_0x1cd431(0xa7)}),this[_0x1cd431(0x5cb)]=!0x1;try{this['logger']['verbose'](this[_0x1cd431(0x2fb)]+'\x20('+this[_0x1cd431(0x634)][_0x1cd431(0x194)]+_0x1cd431(0x189));let _0x4ab05a=await this['repository'][_0x1cd431(0x310)][_0x1cd431(0x376)](this[_0x1cd431(0x634)][_0x1cd431(0x194)]);_0x4ab05a[_0x1cd431(0x589)]?this[_0x1cd431(0x5a9)][_0x1cd431(0x660)](this[_0x1cd431(0x2fb)]+'\x20('+this['instance'][_0x1cd431(0x194)]+_0x1cd431(0x115)):console[_0x1cd431(0x60b)](_0x1cd431(0x579),_0x4ab05a[_0x1cd431(0x60b)]);}catch(_0x1faf2d){console[_0x1cd431(0x60b)](_0x1cd431(0x4ad),_0x1faf2d);}this[_0x1cd431(0x2ae)]!==null&&(this[_0x1cd431(0x5a9)][_0x1cd431(0x660)](this[_0x1cd431(0x2fb)]+'\x20('+this[_0x1cd431(0x634)][_0x1cd431(0x194)]+'):\x20Limpando\x20delayMessage'),clearInterval(this[_0x1cd431(0x2ae)]),this['delayMessage']=null),this[_0x1cd431(0x5a9)]['verbose'](this['instanceName']+'\x20('+this[_0x1cd431(0x634)]['wuid']+_0x1cd431(0x606)),this[_0x1cd431(0x11c)]=null,this['eventEmitter'][_0x1cd431(0x412)](_0x1cd431(0x58e),this[_0x1cd431(0x634)]['name'],'inner'),this[_0x1cd431(0x271)]?.['ws']?.[_0x1cd431(0x32e)](),this[_0x1cd431(0x271)]['end'](new Error(_0x1cd431(0xc8)));}}if(_0x561156===_0x1cd431(0x10f)){this[_0x1cd431(0x357)],this[_0x1cd431(0x634)][_0x1cd431(0x194)]=this[_0x1cd431(0x271)]['user']['id'][_0x1cd431(0x522)](/:\d+/,'')[_0x1cd431(0x522)]('@s.whatsapp.net',''),this[_0x1cd431(0x634)][_0x1cd431(0x638)]=(await this['profilePicture'](this[_0x1cd431(0x634)][_0x1cd431(0x194)]+_0x1cd431(0x59a)))['profilePictureUrl'];let _0x13c0f5=_0x1cd431(0x520)+this[_0x1cd431(0x634)]['wuid'],_0x5a791e=0x28,_0x38ea66=Math[_0x1cd431(0x380)]((_0x5a791e-_0x13c0f5[_0x1cd431(0x58b)])/0x2),_0x25ee94='\x20'['repeat'](_0x38ea66),_0x53a92b=_0x1cd431(0x209),_0x2b1340='Instância:\x20'+this['instance'][_0x1cd431(0x372)],_0x5f09af=(''+_0x25ee94+_0x13c0f5+_0x25ee94)[_0x1cd431(0xa4)](_0x5a791e,'\x20'),_0x503d2d=(''+_0x25ee94+_0x53a92b+_0x25ee94)[_0x1cd431(0xa4)](_0x5a791e,'\x20'),_0x1f0bc0=(''+_0x25ee94+_0x2b1340+_0x25ee94)[_0x1cd431(0xa4)](_0x5a791e,'\x20'),_0x33d0ab=Math[_0x1cd431(0x5e9)](_0x5f09af[_0x1cd431(0x58b)],_0x503d2d[_0x1cd431(0x58b)],_0x1f0bc0[_0x1cd431(0x58b)]),_0x4aa360=_0x5f09af['padEnd'](_0x33d0ab,'\x20'),_0x57b451=_0x503d2d[_0x1cd431(0xa4)](_0x33d0ab,'\x20'),_0xc2a8f4=_0x1f0bc0[_0x1cd431(0xa4)](_0x33d0ab,'\x20');this['logger']['info']((_0x1cd431(0x24c)+'─'[_0x1cd431(0x273)](_0x33d0ab)+'┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0x57b451+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0xc2a8f4+_0x1cd431(0x65a)+_0x4aa360+_0x1cd431(0x301)+'─'[_0x1cd431(0x273)](_0x33d0ab)+'┘')[_0x1cd431(0x522)](/^ +/gm,'\x20\x20')),this[_0x1cd431(0x17c)](),this['isConnected']=!0x0;}}[a0_0x4a837a(0x357)](){const _0x18fcbd=a0_0x4a837a;this[_0x18fcbd(0x321)]=0x0,this[_0x18fcbd(0x47e)]=[];}async['getMessage'](_0x7221a2,_0x3d44d9=!0x1){const _0x5dc017=a0_0x4a837a;try{let _0x3f8609=await this[_0x5dc017(0x5c0)][_0x5dc017(0x310)]['find']({'where':{'owner':this[_0x5dc017(0x634)][_0x5dc017(0x194)],'_id':_0x7221a2['id']}});return _0x3d44d9?_0x3f8609[0x0]:_0x3f8609[0x0][_0x5dc017(0x310)];}catch{return{'conversation':''};}}[a0_0x4a837a(0x199)](){const _0xcaa105=a0_0x4a837a;let _0x537e29=this['configService'][_0xcaa105(0x17e)](_0xcaa105(0x20b)),_0x5e4b38=this['configService'][_0xcaa105(0x17e)]('DATABASE');_0x537e29?.[_0xcaa105(0x332)]&&!_0x5e4b38[_0xcaa105(0x149)]&&setInterval(()=>{const _0x3be916=_0xcaa105;try{for(let [_0x5e2a57,_0x43ed12]of Object['entries'](_0x537e29))_0x43ed12===!0x0&&(0x0,Dt[_0x3be916(0x2bb)])(_0x3be916(0x3a6)+(0x0,$['join'])(this[_0x3be916(0x547)],_0x5e2a57[_0x3be916(0x42a)](),this['instance'][_0x3be916(0x194)])+_0x3be916(0xb1));}catch{}},(_0x537e29?.[_0xcaa105(0x332)]??0xe10)*0x3e8);}async[a0_0x4a837a(0x349)](){const _0x7957da=a0_0x4a837a;let _0x28f01d=this['configService'][_0x7957da(0x17e)]('DATABASE'),_0x4f9e06=this[_0x7957da(0x1c6)][_0x7957da(0x17e)](_0x7957da(0x416));return _0x4f9e06?.[_0x7957da(0x149)]?await ps(_0x4f9e06,this[_0x7957da(0x634)][_0x7957da(0x372)]):_0x28f01d['ENABLED']?await ds(this[_0x7957da(0x634)][_0x7957da(0x372)]):await(0x0,w[_0x7957da(0x452)])((0x0,$['join'])(V,this[_0x7957da(0x634)][_0x7957da(0x372)]));}async[a0_0x4a837a(0x17c)](){const _0x25b6e6=a0_0x4a837a;let _0x34a78c=()=>Math[_0x25b6e6(0x380)](Math['random']()*0x2711)+0x7d0,_0x9c2460=async()=>{const _0x5c41fd=_0x25b6e6;if(!this['isConnected']){this[_0x5c41fd(0x5a9)][_0x5c41fd(0x660)]('Desconectado,\x20parando\x20execução.'),this[_0x5c41fd(0x449)]=!0x1;return;}if(this[_0x5c41fd(0x634)][_0x5c41fd(0x194)]&&this['AutomateSystem']&&this[_0x5c41fd(0x2ae)]!==null&&this[_0x5c41fd(0x2ae)]!==void 0x0){let _0x2061e9=Math[_0x5c41fd(0x32d)](this[_0x5c41fd(0x2ae)]/0xea60);this[_0x5c41fd(0x5a9)][_0x5c41fd(0x660)](this['instanceName']+'\x20('+this[_0x5c41fd(0x634)][_0x5c41fd(0x194)]+_0x5c41fd(0xa0)+_0x2061e9+_0x5c41fd(0x4fd)),this[_0x5c41fd(0x449)]=!0x1;return;}else this[_0x5c41fd(0x634)][_0x5c41fd(0x194)]&&(this['logger'][_0x5c41fd(0x660)](this['instanceName']+'\x20('+this[_0x5c41fd(0x634)][_0x5c41fd(0x194)]+_0x5c41fd(0x542)),this[_0x5c41fd(0x11c)]||await this[_0x5c41fd(0x169)](),(this[_0x5c41fd(0x2ae)]===null||this[_0x5c41fd(0x2ae)]===void 0x0)&&await this[_0x5c41fd(0x3c7)]());if(this['isRunning']){let _0x257aea=_0x34a78c();this['logger'][_0x5c41fd(0x660)](this[_0x5c41fd(0x2fb)]+_0x5c41fd(0x565)+_0x257aea/0x3e8+_0x5c41fd(0x50a)),setTimeout(_0x9c2460,_0x257aea);}};if(this[_0x25b6e6(0x449)])return;this['isRunning']=!0x0;let _0x26bd27=_0x34a78c();setTimeout(_0x9c2460,_0x26bd27);}async['connectToWhatsapp'](){const _0x39e120=a0_0x4a837a;try{this[_0x39e120(0x458)](),this[_0x39e120(0x634)][_0x39e120(0x3ce)]=await this[_0x39e120(0x349)]();let {version:_0x242bc0}=await(0x0,w[_0x39e120(0x4db)])(),_0x223d7a=this['configService']['get'](_0x39e120(0xbd)),_0x47f637=[_0x223d7a['CLIENT'],_0x223d7a[_0x39e120(0x3f9)],(0x0,so['release'])()],_0x4cb167={'auth':{'creds':this[_0x39e120(0x634)][_0x39e120(0x3ce)][_0x39e120(0x64f)]['creds'],'keys':(0x0,w[_0x39e120(0x269)])(this['instance'][_0x39e120(0x3ce)]['state'][_0x39e120(0x396)],(0x0,Mt[_0x39e120(0x4d5)])({'level':_0x39e120(0x60b)}))},'logger':(0x0,Mt[_0x39e120(0x4d5)])({'level':'error'}),'printQRInTerminal':!0x1,'browser':_0x47f637,'version':_0x242bc0,'connectTimeoutMs':0xea60,'qrTimeout':0x9c40,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'msgRetryCounterCache':this[_0x39e120(0x16b)],'getMessage':async _0x182a9a=>await this[_0x39e120(0x471)](_0x182a9a),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x39e120(0x46b)],'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa},'patchMessageBeforeSending':_0x3df2bd=>(!!(_0x3df2bd[_0x39e120(0x307)]||_0x3df2bd[_0x39e120(0x107)])&&(_0x3df2bd={'viewOnceMessageV2':{'message':{'messageContextInfo':{'deviceListMetadataVersion':0x2,'deviceListMetadata':{}},..._0x3df2bd}}}),_0x3df2bd)};return this['endSession']=!0x1,this[_0x39e120(0x271)]=(0x0,w['default'])(_0x4cb167),this[_0x39e120(0x583)](),this[_0x39e120(0x271)];}catch(_0x563d6a){throw this[_0x39e120(0x5a9)]['error'](this['instanceName']+'\x20('+this['instance'][_0x39e120(0x194)]+_0x39e120(0x4b2)+JSON[_0x39e120(0xe8)](_0x563d6a,null,0x2)),new A(_0x563d6a?.[_0x39e120(0x42d)]());}}[a0_0x4a837a(0x583)](){const _0x17fc7b=a0_0x4a837a;this[_0x17fc7b(0x271)]['ev'][_0x17fc7b(0x605)](_0x358768=>{const _0x33350a=_0x17fc7b;if(!this[_0x33350a(0x255)]){let _0x2929e4=this[_0x33350a(0x1c6)][_0x33350a(0x17e)](_0x33350a(0x2b6));if(_0x358768[_0x33350a(0x54c)]&&this['connectionUpdate'](_0x358768[_0x33350a(0x54c)]),_0x358768['creds.update']&&this[_0x33350a(0x634)]['authState'][_0x33350a(0x2a9)](),_0x358768[_0x33350a(0x612)]){let _0x39eb7a=_0x358768[_0x33350a(0x612)];this['messageHandle']['messaging-history.set'](_0x39eb7a,_0x2929e4);}if(_0x358768['messages.upsert']){let _0x2b827d=_0x358768[_0x33350a(0x4bc)];this[_0x33350a(0x13e)][_0x33350a(0x4bc)](_0x2b827d,_0x2929e4);}if(_0x358768[_0x33350a(0x521)]){let _0x38ec92=_0x358768[_0x33350a(0x521)];this[_0x33350a(0x13e)][_0x33350a(0x521)](_0x38ec92,_0x2929e4);}if(_0x358768[_0x33350a(0x21b)]){let _0x39ad19=_0x358768[_0x33350a(0x21b)];if(this['localWebhook']?.['groups_ignore']&&_0x39ad19['id'][_0x33350a(0x1a9)]('@g.us'))return;this[_0x33350a(0x1d6)](_0x33350a(0x21b),_0x39ad19);}if(!this[_0x33350a(0x3da)]?.[_0x33350a(0x151)]){if(_0x358768['groups.upsert']){let _0x35ff4d=_0x358768[_0x33350a(0x3b5)];this[_0x33350a(0x138)][_0x33350a(0x3b5)](_0x35ff4d);}if(_0x358768[_0x33350a(0x31e)]){let _0x95fe5b=_0x358768[_0x33350a(0x31e)];this[_0x33350a(0x138)][_0x33350a(0x31e)](_0x95fe5b);}if(_0x358768[_0x33350a(0x114)]){let _0xd00b9f=_0x358768[_0x33350a(0x114)];this[_0x33350a(0x138)][_0x33350a(0x114)](_0xd00b9f);}}if(_0x358768[_0x33350a(0x279)]){let _0x2000fe=_0x358768[_0x33350a(0x279)];this[_0x33350a(0x197)][_0x33350a(0x279)](_0x2000fe,_0x2929e4);}if(_0x358768[_0x33350a(0x44a)]){let _0x2149ab=_0x358768[_0x33350a(0x44a)];this[_0x33350a(0x197)]['chats.update'](_0x2149ab,_0x2929e4);}if(_0x358768[_0x33350a(0x4e3)]){let _0x4d3821=_0x358768[_0x33350a(0x4e3)];this[_0x33350a(0x197)][_0x33350a(0x4e3)](_0x4d3821);}if(_0x358768[_0x33350a(0x4c7)]){let _0x504a55=_0x358768['contacts.upsert'];this['contactHandle'][_0x33350a(0x4c7)](_0x504a55,_0x2929e4);}if(_0x358768['contacts.update']){let _0x59db81=_0x358768[_0x33350a(0x631)];this[_0x33350a(0x14f)][_0x33350a(0x631)](_0x59db81,_0x2929e4);}}});}[a0_0x4a837a(0x58a)](_0x36dbcd){const _0x217bda=a0_0x4a837a;let _0xa67c66=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x217bda(0x43c)](_0x36dbcd);if(_0xa67c66&&_0xa67c66[0x1]==='55'){let _0x6f67b0=_0xa67c66[0x2],_0x4324bb=_0xa67c66[0x3],_0x420172=_0xa67c66[0x4];if(_0x6f67b0>='31'&&_0x4324bb==='9')return _0xa67c66[0x1]+_0x6f67b0+_0x420172;}return _0x36dbcd;}['createJid'](_0x47b84e){const _0x11b4d7=a0_0x4a837a;return _0x47b84e[_0x11b4d7(0x1a9)]('@g.us')||_0x47b84e[_0x11b4d7(0x1a9)](_0x11b4d7(0x59a))||_0x47b84e[_0x11b4d7(0x1a9)](_0x11b4d7(0x2a5))?_0x47b84e:(_0x47b84e=_0x47b84e?.[_0x11b4d7(0x522)](/\s/g,'')[_0x11b4d7(0x522)](/\+/g,'')[_0x11b4d7(0x522)](/\(/g,'')['replace'](/\)/g,'')[_0x11b4d7(0x24d)](/\:/)[0x0][_0x11b4d7(0x24d)]('@')[0x0],_0x47b84e[_0x11b4d7(0x58b)]>=0x12?(_0x47b84e=_0x47b84e[_0x11b4d7(0x522)](/[^\d-]/g,''),_0x47b84e+'@g.us'):(_0x47b84e=_0x47b84e['replace'](/\D/g,''),this['formatBRNumber'](_0x47b84e)+_0x11b4d7(0x59a)));}async[a0_0x4a837a(0x534)](_0x9ffd49){const _0xa9c0ca=a0_0x4a837a;let _0x2f0ad2=this['createJid'](_0x9ffd49['number']),_0x52b144=(await this[_0xa9c0ca(0x134)]({'numbers':[_0x2f0ad2]}))[0x0];if(!_0x52b144[_0xa9c0ca(0x322)]&&!(0x0,w[_0xa9c0ca(0x281)])(_0x52b144[_0xa9c0ca(0x511)]))throw new g(_0x52b144);let _0x6957c1=(0x0,w[_0xa9c0ca(0x281)])(_0x2f0ad2)?_0x2f0ad2:_0x52b144[_0xa9c0ca(0x511)];if((0x0,w[_0xa9c0ca(0x281)])(_0x6957c1))try{await this[_0xa9c0ca(0x271)][_0xa9c0ca(0x588)](_0x6957c1);}catch{throw new x(_0xa9c0ca(0x309));}try{return await this[_0xa9c0ca(0x271)]['presenceSubscribe'](_0x6957c1),await this['client']['sendPresenceUpdate'](_0x9ffd49[_0xa9c0ca(0xcc)],_0x2f0ad2),{'status':0xc8,'presence':_0x9ffd49[_0xa9c0ca(0xcc)]};}catch(_0x51e1de){throw new g(_0x51e1de[_0xa9c0ca(0x42d)]());}}async[a0_0x4a837a(0x40f)](_0x12857b){const _0x43bda2=a0_0x4a837a;let _0x28b782=this[_0x43bda2(0x305)](_0x12857b);try{return{'wuid':_0x28b782,'profilePictureUrl':await this[_0x43bda2(0x271)][_0x43bda2(0x638)](_0x28b782,_0x43bda2(0x59c))};}catch{return{'wuid':_0x28b782,'profilePictureUrl':null};}}async[a0_0x4a837a(0x48d)](_0x449772,_0xcc030d,_0x5e4d91){const _0xddb596=a0_0x4a837a;let _0x3a9740=(await this[_0xddb596(0x134)]({'numbers':[_0x449772]}))[0x0];if(!_0x3a9740[_0xddb596(0x322)]&&!(0x0,w[_0xddb596(0x281)])(_0x3a9740[_0xddb596(0x511)])&&!_0x3a9740[_0xddb596(0x511)]['includes'](_0xddb596(0x2a5)))throw new g(_0x3a9740);let _0x3f86e1=_0x3a9740[_0xddb596(0x511)];try{_0x5e4d91?.[_0xddb596(0x1f2)]&&(await this[_0xddb596(0x271)][_0xddb596(0x38f)](_0x3f86e1),await this[_0xddb596(0x271)][_0xddb596(0x3d3)](_0x5e4d91?.[_0xddb596(0xcc)]??'composing',_0x3f86e1),await(0x0,w[_0xddb596(0x1f2)])(_0x5e4d91[_0xddb596(0x1f2)]),await this[_0xddb596(0x271)][_0xddb596(0x3d3)](_0xddb596(0x1ba),_0x3f86e1));let _0x1fb35a=_0x5e4d91?.[_0xddb596(0x441)]!=!0x1?void 0x0:!0x1,_0x405ae3;if(_0x5e4d91?.[_0xddb596(0x3fe)]){let _0x2369e2=_0x5e4d91?.[_0xddb596(0x3fe)],_0x40b7d3=_0x2369e2?.[_0xddb596(0x310)]?_0x2369e2:await this[_0xddb596(0x471)](_0x2369e2[_0xddb596(0x1a8)],!0x0);if(!_0x40b7d3)throw _0xddb596(0x62a);_0x405ae3=_0x40b7d3;}let _0x268153;if((0x0,w[_0xddb596(0x281)])(_0x3f86e1))try{let _0x170d9e=await this[_0xddb596(0x271)][_0xddb596(0x588)](_0x3f86e1);if(!_0x170d9e)throw new x('Group\x20not\x20found');_0x5e4d91?.[_0xddb596(0x2f3)]&&(_0x5e4d91[_0xddb596(0x2f3)]?.[_0xddb596(0x4a6)]?_0x268153=_0x170d9e[_0xddb596(0x109)][_0xddb596(0x227)](_0x3ebd50=>_0x3ebd50['id']):_0x5e4d91[_0xddb596(0x2f3)]?.[_0xddb596(0x2b4)]?.['length']&&(_0x268153=_0x5e4d91[_0xddb596(0x2f3)][_0xddb596(0x2b4)]['map'](_0x1d11d9=>{const _0x206652=_0xddb596;let _0x50f017=this[_0x206652(0x305)](_0x1d11d9);return(0x0,w[_0x206652(0x281)])(_0x50f017)?null:_0x50f017;})));}catch{throw new x(_0xddb596(0x309));}let _0x3748b8=await((async()=>{const _0x30807a=_0xddb596;let _0x4d3ffc={'quoted':_0x405ae3};if(!_0xcc030d['audio']&&!_0xcc030d[_0x30807a(0x368)]&&!_0xcc030d[_0x30807a(0x4cf)]&&!_0xcc030d['conversation']&&_0x3f86e1!==_0x30807a(0x3c5)&&!_0xcc030d[_0x30807a(0x272)])return await this['client'][_0x30807a(0x3b3)](_0x3f86e1,{'forward':{'key':{'remoteJid':this['instance'][_0x30807a(0x194)],'fromMe':!0x0},'message':_0xcc030d},'mentions':_0x268153},_0x4d3ffc);if(_0xcc030d[_0x30807a(0x5a2)]){let _0x512207=_0xcc030d[_0x30807a(0x5a2)];return _0x5e4d91?.[_0x30807a(0x2ca)]&&(_0x512207=await this[_0x30807a(0x23e)](_0x512207,_0x3f86e1)),await this['client']['sendMessage'](_0x3f86e1,{'text':_0x512207,'mentions':_0x268153,'linkPreview':_0x1fb35a},_0x4d3ffc);}return _0x3f86e1===_0x30807a(0x3c5)?await this[_0x30807a(0x271)][_0x30807a(0x3b3)](_0x3f86e1,_0xcc030d['status'][_0x30807a(0x489)],{'backgroundColor':_0xcc030d[_0x30807a(0x2e7)]['option'][_0x30807a(0x3e3)],'font':_0xcc030d[_0x30807a(0x2e7)][_0x30807a(0x566)][_0x30807a(0x5ce)],'statusJidList':_0xcc030d[_0x30807a(0x2e7)][_0x30807a(0x566)][_0x30807a(0x4d8)]}):await this['client']['sendMessage'](_0x3f86e1,_0xcc030d,_0x4d3ffc);})()),{message_normalized:_0x2959cb}=this[_0xddb596(0x1e5)](_0x3748b8[_0xddb596(0x310)],G(_0x3748b8[_0xddb596(0x310)]),null),_0x5ce7af={'_id':_0x3748b8[_0xddb596(0x1a8)]['id'],'key':_0x3748b8[_0xddb596(0x1a8)],'pushName':_0x3748b8[_0xddb596(0x2eb)],'message':{..._0x3748b8[_0xddb596(0x310)]},'messageType':G(_0x3748b8[_0xddb596(0x310)]),'message_normalized':{'key':_0x3748b8[_0xddb596(0x1a8)],'pushName':_0x3748b8[_0xddb596(0x2eb)],'messageTimestamp':_0x3748b8[_0xddb596(0x15f)]&&_0x3748b8[_0xddb596(0x15f)][_0xddb596(0x42d)]()['length']<0xd?_0x3748b8[_0xddb596(0x15f)]*0x3e8:_0x3748b8['messageTimestamp']||null,'source':(0x0,w[_0xddb596(0x160)])(_0x3748b8[_0xddb596(0x1a8)]['id']),..._0x2959cb},'messageTimestamp':_0x3748b8[_0xddb596(0x15f)]&&_0x3748b8[_0xddb596(0x15f)]['toString']()['length']<0xd?_0x3748b8[_0xddb596(0x15f)]*0x3e8:_0x3748b8[_0xddb596(0x15f)]||null,'owner':this[_0xddb596(0x634)][_0xddb596(0x194)],'source':(0x0,w[_0xddb596(0x160)])(_0x3748b8[_0xddb596(0x1a8)]['id'])};return this[_0xddb596(0x5a9)][_0xddb596(0x4eb)](_0x5ce7af),this[_0xddb596(0x1d6)]('send.message',_0x5ce7af),F(this[_0xddb596(0x2fb)],_0xddb596(0x581),{'message':_0x5ce7af}),this[_0xddb596(0x43e)](this[_0xddb596(0x1c6)]['get'](_0xddb596(0x2b6)),_0x5ce7af,_0xddb596(0x445)),await this[_0xddb596(0x5c0)][_0xddb596(0x310)][_0xddb596(0x426)]([_0x5ce7af]),_0x3748b8;}catch(_0x2eaf17){throw this[_0xddb596(0x5a9)][_0xddb596(0x60b)](this[_0xddb596(0x2fb)]+'\x20('+this[_0xddb596(0x634)][_0xddb596(0x194)]+_0xddb596(0x4b2)+_0x2eaf17[_0xddb596(0x42d)]()),new g(_0x2eaf17[_0xddb596(0x42d)]());}}get[a0_0x4a837a(0x26b)](){const _0x5f52ee=a0_0x4a837a;return this[_0x5f52ee(0x348)];}async[a0_0x4a837a(0x4a2)](_0x5032f5){const _0x567cfa=a0_0x4a837a;let _0x268911=this[_0x567cfa(0x1c6)][_0x567cfa(0x17e)](_0x567cfa(0x567)),_0x5329f0=this[_0x567cfa(0x1c6)]['get']('TRIAL_INSTANCE_NAME');return _0x5329f0&&this['instanceName'][_0x567cfa(0x42a)]()[_0x567cfa(0x1a9)](_0x5329f0[_0x567cfa(0x42a)]())&&(_0x5032f5[_0x567cfa(0x4a2)][_0x567cfa(0x472)]+='\x0a\x0a'+_0x268911),await this[_0x567cfa(0x48d)](_0x5032f5['number'],{'conversation':_0x5032f5[_0x567cfa(0x4a2)][_0x567cfa(0x472)]},_0x5032f5?.[_0x567cfa(0x224)]);}async[a0_0x4a837a(0x13b)](_0x490b68){const _0x35a643=a0_0x4a837a;if(!_0x490b68[_0x35a643(0x295)])throw new g(_0x35a643(0x20a));if(!_0x490b68[_0x35a643(0x489)])throw new g(_0x35a643(0x185));if(_0x490b68['allContacts']){let _0x1b9b66=await this[_0x35a643(0x5c0)][_0x35a643(0x549)]['find']({'where':{'owner':this[_0x35a643(0x634)][_0x35a643(0x194)]}});if(!_0x1b9b66[_0x35a643(0x58b)])throw new g(_0x35a643(0x464));_0x490b68[_0x35a643(0x4d8)]=_0x1b9b66[_0x35a643(0x370)](_0x31db14=>_0x31db14['pushName'])['map'](_0x2f330c=>_0x2f330c[_0x35a643(0x3f7)]);}if(!_0x490b68['statusJidList']?.['length']&&!_0x490b68['allContacts'])throw new g(_0x35a643(0x11a));if(_0x490b68[_0x35a643(0x295)]===_0x35a643(0x472)){if(!_0x490b68[_0x35a643(0x3e3)])throw new g('Background\x20color\x20is\x20required');if(!_0x490b68[_0x35a643(0x5ce)])throw new g(_0x35a643(0x587));return{'content':{'text':_0x490b68[_0x35a643(0x489)]},'option':{'backgroundColor':_0x490b68[_0x35a643(0x3e3)],'font':_0x490b68[_0x35a643(0x5ce)],'statusJidList':_0x490b68[_0x35a643(0x4d8)]}};}if(_0x490b68['type']===_0x35a643(0x59c))return{'content':{'image':{'url':_0x490b68['content']},'caption':_0x490b68[_0x35a643(0x24a)]},'option':{'statusJidList':_0x490b68['statusJidList']}};if(_0x490b68[_0x35a643(0x295)]==='video')return{'content':{'video':{'url':_0x490b68[_0x35a643(0x489)]},'caption':_0x490b68[_0x35a643(0x24a)]},'option':{'statusJidList':_0x490b68['statusJidList']}};if(_0x490b68['type']===_0x35a643(0x272)){this['logger'][_0x35a643(0x660)](_0x35a643(0x254)),this['logger'][_0x35a643(0x660)]('Processing\x20audio');let _0x334d4b=await this['convertaudio'](_0x490b68[_0x35a643(0x489)]);if(typeof _0x334d4b==_0x35a643(0x46f)){this[_0x35a643(0x5a9)][_0x35a643(0x660)](_0x35a643(0xc5));let _0x49ad61=P['readFileSync'](_0x334d4b)[_0x35a643(0x42d)](_0x35a643(0x399)),_0xee12e8={'content':{'audio':Buffer[_0x35a643(0x66c)](_0x49ad61,_0x35a643(0x399)),'ptt':!0x0,'mimetype':_0x35a643(0x124)},'option':{'statusJidList':_0x490b68[_0x35a643(0x4d8)]}};return P['unlinkSync'](_0x334d4b),_0xee12e8;}else throw new A(_0x334d4b);}throw new g(_0x35a643(0x5b5));}async[a0_0x4a837a(0x202)](_0x2d8e2d){const _0x49d6e0=a0_0x4a837a;return await this[_0x49d6e0(0x48d)](_0x49d6e0(0x3c5),{'status':await this['formatStatusMessage'](_0x2d8e2d['statusMessage'])});}async[a0_0x4a837a(0x2e8)](_0x5e127e){const _0x349019=a0_0x4a837a;try{let _0x4e0410=await(0x0,w[_0x349019(0x18d)])({[_0x5e127e[_0x349019(0x361)]]:(0x0,_[_0x349019(0x491)])(_0x5e127e[_0x349019(0xcf)])?{'url':_0x5e127e[_0x349019(0xcf)]}:Buffer[_0x349019(0x66c)](_0x5e127e[_0x349019(0xcf)],_0x349019(0x399))},{'upload':this[_0x349019(0x271)][_0x349019(0x195)]}),_0x7c04d5=_0x5e127e[_0x349019(0x361)]+_0x349019(0x118);if(_0x5e127e['mediatype']===_0x349019(0x20c)&&!_0x5e127e[_0x349019(0xca)]){let _0x2484e1=new RegExp(/.*\/(.+?)\./)[_0x349019(0x43c)](_0x5e127e[_0x349019(0xcf)]);_0x5e127e['fileName']=_0x2484e1?_0x2484e1[0x1]:null;}let _0x443222;if((0x0,_[_0x349019(0x491)])(_0x5e127e[_0x349019(0xcf)])){let _0x268538=(0x0,_[_0x349019(0x491)])(_0x5e127e[_0x349019(0xcf)])?_0x5e127e[_0x349019(0xcf)]['split']('?')[0x0]:_0x5e127e[_0x349019(0xcf)];this[_0x349019(0x5a9)][_0x349019(0x660)](_0x349019(0x52c)+_0x268538),_0x443222=(0x0,At[_0x349019(0x34b)])(_0x268538);}else _0x5e127e[_0x349019(0xca)]&&_0x5e127e[_0x349019(0xca)][_0x349019(0x1a9)]('.')?_0x443222=(0x0,At[_0x349019(0x34b)])(_0x5e127e[_0x349019(0xca)]):_0x443222=(0x0,At[_0x349019(0x34b)])(_0x5e127e['media']);let _0x2f5fd6=this[_0x349019(0x1c6)][_0x349019(0x17e)]('TRIAL_AD'),_0x2c739a=this[_0x349019(0x1c6)]['get'](_0x349019(0x27b));return _0x2c739a&&this[_0x349019(0x2fb)][_0x349019(0x42a)]()[_0x349019(0x1a9)](_0x2c739a[_0x349019(0x42a)]())&&(_0x5e127e[_0x349019(0x24a)]+='\x0a\x0a'+_0x2f5fd6),_0x4e0410[_0x7c04d5][_0x349019(0x24a)]=_0x5e127e?.[_0x349019(0x24a)],_0x4e0410[_0x7c04d5][_0x349019(0x2fe)]=_0x443222,_0x4e0410[_0x7c04d5][_0x349019(0xca)]=_0x5e127e[_0x349019(0xca)],_0x5e127e['mediatype']===_0x349019(0x2ce)&&(_0x4e0410[_0x7c04d5][_0x349019(0x433)]=Uint8Array[_0x349019(0x66c)]((0x0,Te[_0x349019(0x286)])((0x0,$[_0x349019(0x31f)])(process[_0x349019(0x1eb)](),_0x349019(0x608)))),_0x4e0410[_0x7c04d5]['gifPlayback']=!0x1),(0x0,w[_0x349019(0x2c6)])('',{[_0x7c04d5]:{..._0x4e0410[_0x7c04d5]}},{'userJid':this['instance'][_0x349019(0x194)]});}catch(_0x418c19){throw this[_0x349019(0x5a9)]['error'](this[_0x349019(0x2fb)]+'\x20('+this[_0x349019(0x634)][_0x349019(0x194)]+'):\x20'+JSON[_0x349019(0xe8)](_0x418c19,null,0x2)),new A(_0x418c19?.[_0x349019(0x42d)]()||_0x418c19);}}async[a0_0x4a837a(0x494)](_0x77b3ae){const _0x217fbc=a0_0x4a837a;let _0x34656=await this[_0x217fbc(0x2e8)](_0x77b3ae[_0x217fbc(0x494)]);return await this[_0x217fbc(0x48d)](_0x77b3ae[_0x217fbc(0x62e)],{..._0x34656[_0x217fbc(0x310)]},_0x77b3ae?.[_0x217fbc(0x224)]);}async[a0_0x4a837a(0x164)](_0xfbdd72,_0x447c3d){const _0x173088=a0_0x4a837a;try{this[_0x173088(0x5a9)][_0x173088(0x660)](_0x173088(0x11b));let _0x1bfb6b,_0xe98e66=_0x447c3d+'-'+new Date()[_0x173088(0x495)]();this[_0x173088(0x5a9)][_0x173088(0x660)](_0x173088(0x58d)+_0xe98e66);let _0x232639=''+(0x0,$['join'])(this['storePath'],_0xe98e66+_0x173088(0x2c5));if(this[_0x173088(0x5a9)][_0x173088(0x660)]('Output\x20path:\x20'+_0x232639),(0x0,_[_0x173088(0x266)])(_0xfbdd72)){this[_0x173088(0x5a9)][_0x173088(0x660)]('Image\x20is\x20base64');let _0x16f426=_0xfbdd72[_0x173088(0x522)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x510900=Buffer[_0x173088(0x66c)](_0x16f426,_0x173088(0x399));_0x1bfb6b=''+(0x0,$[_0x173088(0x31f)])(this['storePath'],_0x173088(0x10d)+_0xe98e66+_0x173088(0x2b8)),this[_0x173088(0x5a9)][_0x173088(0x660)](_0x173088(0x2f0)+_0x1bfb6b),await(0x0,Ot[_0x173088(0x4d5)])(_0x510900)[_0x173088(0x337)](_0x1bfb6b),this[_0x173088(0x5a9)]['verbose'](_0x173088(0x2cc));}else{this['logger'][_0x173088(0x660)]('Image\x20is\x20url');let _0x3d34da=new Date()[_0x173088(0x495)](),_0x298f0d=_0xfbdd72+'?timestamp='+_0x3d34da;this[_0x173088(0x5a9)][_0x173088(0x660)](_0x173088(0x5dc)+_0x298f0d);let _0x3eb994=await ce['default'][_0x173088(0x17e)](_0x298f0d,{'responseType':_0x173088(0x154)});this[_0x173088(0x5a9)][_0x173088(0x660)](_0x173088(0x599));let _0x306208=Buffer[_0x173088(0x66c)](_0x3eb994['data'],_0x173088(0x145));_0x1bfb6b=''+(0x0,$['join'])(this[_0x173088(0x547)],_0x173088(0x10d)+_0xe98e66+'.png'),this[_0x173088(0x5a9)]['verbose'](_0x173088(0x2f0)+_0x1bfb6b),await(0x0,Ot[_0x173088(0x4d5)])(_0x306208)[_0x173088(0x337)](_0x1bfb6b),this['logger'][_0x173088(0x660)](_0x173088(0x2cc));}return await(0x0,Ot[_0x173088(0x4d5)])(_0x1bfb6b)[_0x173088(0x29e)]()[_0x173088(0x337)](_0x232639),this[_0x173088(0x5a9)][_0x173088(0x660)](_0x173088(0x413)),P[_0x173088(0x336)](_0x1bfb6b),this[_0x173088(0x5a9)][_0x173088(0x660)](_0x173088(0x1d9)),_0x232639;}catch(_0x59b1dd){console[_0x173088(0x60b)](_0x173088(0x651),JSON['stringify'](_0x59b1dd,null,0x2));}}async[a0_0x4a837a(0x19b)](_0x1c2f14){const _0x3b56b9=a0_0x4a837a;let _0x3d397f=await this[_0x3b56b9(0x164)](_0x1c2f14[_0x3b56b9(0x639)][_0x3b56b9(0x59c)],_0x1c2f14[_0x3b56b9(0x62e)]),_0x4d72a7=await this[_0x3b56b9(0x48d)](_0x1c2f14[_0x3b56b9(0x62e)],{'sticker':{'url':_0x3d397f}},_0x1c2f14?.['options']);return P[_0x3b56b9(0x336)](_0x3d397f),this[_0x3b56b9(0x5a9)]['verbose'](_0x3b56b9(0xaa)),_0x4d72a7;}async['audioWhatsapp'](_0x1fd8f9){const _0x50ba2c=a0_0x4a837a;if(this['logger']['verbose'](_0x50ba2c(0x323)),!_0x1fd8f9[_0x50ba2c(0x224)]?.[_0x50ba2c(0x5e8)]&&_0x1fd8f9['options']?.[_0x50ba2c(0x5e8)]!==!0x1&&(_0x1fd8f9[_0x50ba2c(0x224)][_0x50ba2c(0x5e8)]=!0x0),_0x1fd8f9[_0x50ba2c(0x224)]?.[_0x50ba2c(0x5e8)]){let _0x271a1f=await this['convertaudio'](_0x1fd8f9['audioMessage']['audio']);if(typeof _0x271a1f=='string'){let _0x24bf9a=P[_0x50ba2c(0x286)](_0x271a1f)['toString'](_0x50ba2c(0x399)),_0x5b7196=this[_0x50ba2c(0x48d)](_0x1fd8f9[_0x50ba2c(0x62e)],{'audio':Buffer[_0x50ba2c(0x66c)](_0x24bf9a,_0x50ba2c(0x399)),'ptt':!0x0,'mimetype':'audio/mp4'},{'presence':_0x50ba2c(0x24b),'delay':_0x1fd8f9?.['options']?.[_0x50ba2c(0x1f2)]});return P[_0x50ba2c(0x336)](_0x271a1f),this[_0x50ba2c(0x5a9)]['verbose'](_0x50ba2c(0xd2)),_0x5b7196;}else throw new A(_0x271a1f);}return await this['sendMessageWithTyping'](_0x1fd8f9[_0x50ba2c(0x62e)],{'audio':(0x0,_[_0x50ba2c(0x491)])(_0x1fd8f9[_0x50ba2c(0x18e)][_0x50ba2c(0x272)])?{'url':_0x1fd8f9[_0x50ba2c(0x18e)][_0x50ba2c(0x272)]}:Buffer[_0x50ba2c(0x66c)](_0x1fd8f9['audioMessage']['audio'],_0x50ba2c(0x399)),'ptt':!0x0,'mimetype':_0x50ba2c(0x4d4)},{'presence':_0x50ba2c(0x24b),'delay':_0x1fd8f9?.[_0x50ba2c(0x224)]?.[_0x50ba2c(0x1f2)]});}async['convertaudio'](_0x34ec83){const _0xb4fe2d=a0_0x4a837a;this[_0xb4fe2d(0x5a9)]['verbose']('Processing\x20audio');let _0x12e968,_0x2c610a,_0x5cb179=(0x0,It['v4'])();if(this['logger'][_0xb4fe2d(0x660)](_0xb4fe2d(0x5d8)+_0x5cb179),(0x0,_[_0xb4fe2d(0x491)])(_0x34ec83)){this[_0xb4fe2d(0x5a9)][_0xb4fe2d(0x660)](_0xb4fe2d(0x2ed)),_0x2c610a=''+(0x0,$[_0xb4fe2d(0x31f)])(this[_0xb4fe2d(0x547)],_0x5cb179+_0xb4fe2d(0x52d)),_0x12e968=''+(0x0,$[_0xb4fe2d(0x31f)])(this['storePath'],_0xb4fe2d(0x10d)+_0x5cb179+_0xb4fe2d(0x1a0)),this[_0xb4fe2d(0x5a9)]['verbose'](_0xb4fe2d(0x415)+_0x2c610a),this[_0xb4fe2d(0x5a9)]['verbose'](_0xb4fe2d(0x31a)+_0x12e968);let _0x640487=new Date()[_0xb4fe2d(0x495)](),_0x471047=_0x34ec83+_0xb4fe2d(0x468)+_0x640487;this[_0xb4fe2d(0x5a9)][_0xb4fe2d(0x660)](_0xb4fe2d(0x402)+_0x471047);let _0x37e7b0=await ce[_0xb4fe2d(0x4d5)][_0xb4fe2d(0x17e)](_0x471047,{'responseType':'arraybuffer'});this[_0xb4fe2d(0x5a9)][_0xb4fe2d(0x660)](_0xb4fe2d(0x39c)),P['writeFileSync'](_0x12e968,_0x37e7b0['data']);}else{this['logger']['verbose'](_0xb4fe2d(0x507)),_0x2c610a=''+(0x0,$[_0xb4fe2d(0x31f)])(this[_0xb4fe2d(0x547)],_0x5cb179+_0xb4fe2d(0x52d)),_0x12e968=''+(0x0,$['join'])(this[_0xb4fe2d(0x547)],_0xb4fe2d(0x10d)+_0x5cb179+_0xb4fe2d(0x1a0)),this[_0xb4fe2d(0x5a9)][_0xb4fe2d(0x660)](_0xb4fe2d(0x415)+_0x2c610a),this[_0xb4fe2d(0x5a9)]['verbose'](_0xb4fe2d(0x31a)+_0x12e968);let _0x23329c=Buffer['from'](_0x34ec83,'base64');P['writeFileSync'](_0x12e968,_0x23329c),this[_0xb4fe2d(0x5a9)][_0xb4fe2d(0x660)](_0xb4fe2d(0x1f1));}return this[_0xb4fe2d(0x5a9)][_0xb4fe2d(0x660)]('Converting\x20audio\x20to\x20mp4'),new Promise((_0x324cb0,_0x22b3bc)=>{const _0x2bf7db=_0xb4fe2d;(0x0,Dt['exec'])(Xa[_0x2bf7db(0x4d5)][_0x2bf7db(0x16a)]+_0x2bf7db(0x572)+_0x12e968+'\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-f\x20ipod\x20'+_0x2c610a+_0x2bf7db(0x1de),_0x1b90bf=>{const _0x32088e=_0x2bf7db;P[_0x32088e(0x336)](_0x12e968),this[_0x32088e(0x5a9)]['verbose'](_0x32088e(0x431)),_0x1b90bf&&_0x22b3bc(_0x1b90bf),this[_0x32088e(0x5a9)]['verbose'](_0x32088e(0xf6)),_0x324cb0(_0x2c610a);});});}async[a0_0x4a837a(0x4a9)](_0x2fdc10){const _0x9720c5=a0_0x4a837a;let _0x200d77={},_0x14859a=_0x9720c5(0x5aa);if(_0x2fdc10['buttonMessage']?.[_0x9720c5(0x494)]){_0x14859a=_0x2fdc10[_0x9720c5(0x4a9)]['mediaMessage']?.[_0x9720c5(0x361)]['toUpperCase']()??_0x9720c5(0x5aa),_0x200d77[_0x9720c5(0x420)]=_0x14859a[_0x9720c5(0x42a)]()+_0x9720c5(0x118);let _0x52efdf=await this[_0x9720c5(0x2e8)](_0x2fdc10['buttonMessage'][_0x9720c5(0x494)]);_0x200d77[_0x9720c5(0x310)]=_0x52efdf[_0x9720c5(0x310)][_0x200d77[_0x9720c5(0x420)]],_0x200d77[_0x9720c5(0xf9)]='*'+_0x2fdc10['buttonMessage'][_0x9720c5(0x142)]+_0x9720c5(0x12a)+_0x2fdc10[_0x9720c5(0x4a9)]['description'];}let _0xd8950e={'text':_0x2fdc10[_0x9720c5(0x4a9)][_0x9720c5(0x27a)][_0x9720c5(0x227)](_0x10d2ae=>_0x10d2ae[_0x9720c5(0x5b2)]),'ids':_0x2fdc10[_0x9720c5(0x4a9)][_0x9720c5(0x27a)][_0x9720c5(0x227)](_0x93c257=>_0x93c257[_0x9720c5(0x477)])};if(!(0x0,_[_0x9720c5(0x25e)])(_0xd8950e[_0x9720c5(0x472)])||!(0x0,_['arrayUnique'])(_0xd8950e[_0x9720c5(0x156)]))throw new g('Button\x20texts\x20cannot\x20be\x20repeated','Button\x20IDs\x20cannot\x20be\x20repeated.');return await this[_0x9720c5(0x48d)](_0x2fdc10[_0x9720c5(0x62e)],{'buttonsMessage':{'text':_0x200d77?.['mediaKey']?void 0x0:_0x2fdc10[_0x9720c5(0x4a9)][_0x9720c5(0x142)],'contentText':_0x200d77?.[_0x9720c5(0xf9)]??_0x2fdc10[_0x9720c5(0x4a9)]['description'],'footerText':_0x2fdc10[_0x9720c5(0x4a9)]?.[_0x9720c5(0x550)],'buttons':_0x2fdc10['buttonMessage'][_0x9720c5(0x27a)][_0x9720c5(0x227)](_0x1ea090=>({'buttonText':{'displayText':_0x1ea090[_0x9720c5(0x5b2)]},'buttonId':_0x1ea090[_0x9720c5(0x477)],'type':0x1})),'headerType':w['proto']['Message'][_0x9720c5(0x36a)][_0x9720c5(0xb6)][_0x14859a],[_0x200d77?.['mediaKey']]:_0x200d77?.['message']}},_0x2fdc10?.[_0x9720c5(0x224)]);}async[a0_0x4a837a(0x5e2)](_0x19ca47){const _0x3c1856=a0_0x4a837a;return await this[_0x3c1856(0x48d)](_0x19ca47['number'],{'locationMessage':{'degreesLatitude':_0x19ca47[_0x3c1856(0x5e2)][_0x3c1856(0x324)],'degreesLongitude':_0x19ca47[_0x3c1856(0x5e2)]['longitude'],'name':_0x19ca47[_0x3c1856(0x5e2)]?.[_0x3c1856(0x372)],'address':_0x19ca47[_0x3c1856(0x5e2)]?.[_0x3c1856(0xc2)]}},_0x19ca47?.['options']);}async['listMessage'](_0x1ce76c){const _0x1489bb=a0_0x4a837a;return await this[_0x1489bb(0x48d)](_0x1ce76c[_0x1489bb(0x62e)],{'listMessage':{'title':_0x1ce76c[_0x1489bb(0x107)][_0x1489bb(0x142)],'description':_0x1ce76c['listMessage'][_0x1489bb(0x5ae)],'buttonText':_0x1ce76c[_0x1489bb(0x107)]?.[_0x1489bb(0x5b2)],'footerText':_0x1ce76c[_0x1489bb(0x107)]?.[_0x1489bb(0x550)],'sections':_0x1ce76c[_0x1489bb(0x107)][_0x1489bb(0x2f1)],'listType':0x1}},_0x1ce76c?.[_0x1489bb(0x224)]);}async[a0_0x4a837a(0x168)](_0x30a3be){const _0x25cbf6=a0_0x4a837a;let _0x161bfa={},_0x1d7a65=_0x2abd7c=>{const _0xd8ede6=a0_0x22fc;let _0x46f6aa='BEGIN:VCARD\x0aVERSION:3.0\x0aN:'+_0x2abd7c[_0xd8ede6(0x4af)]+'\x0aFN:'+_0x2abd7c['fullName']+'\x0a';_0x2abd7c[_0xd8ede6(0x553)]&&(_0x46f6aa+=_0xd8ede6(0x40e)+_0x2abd7c[_0xd8ede6(0x553)]+';\x0a'),_0x2abd7c[_0xd8ede6(0x2ea)]&&(_0x46f6aa+=_0xd8ede6(0xd9)+_0x2abd7c[_0xd8ede6(0x2ea)]+'\x0a'),_0x2abd7c[_0xd8ede6(0x351)]&&(_0x46f6aa+=_0xd8ede6(0x2dd)+_0x2abd7c[_0xd8ede6(0x351)]+'\x0a');let _0x50876d='';return _0x2abd7c[_0xd8ede6(0x159)]&&_0x2abd7c[_0xd8ede6(0x159)][_0xd8ede6(0x24d)]('|')[_0xd8ede6(0x2c9)]((_0x38be75,_0x18c81f)=>{const _0x52850e=_0xd8ede6;let _0x2f50d5=this[_0x52850e(0x305)](_0x38be75)[_0x52850e(0x522)](_0x52850e(0x59a),'');_0x50876d+=_0x52850e(0x448)+(_0x18c81f+0x1)+_0x52850e(0x676)+_0x2f50d5+':'+_0x38be75+_0x52850e(0x430)+(_0x18c81f+0x1)+_0x52850e(0x5c8);}),_0x46f6aa+=_0x50876d+'END:VCARD',_0x46f6aa;};return _0x30a3be[_0x25cbf6(0x168)]['length']===0x1?_0x161bfa['contactMessage']={'displayName':_0x30a3be[_0x25cbf6(0x168)][0x0]['fullName'],'vcard':_0x1d7a65(_0x30a3be[_0x25cbf6(0x168)][0x0])}:_0x161bfa[_0x25cbf6(0x4e7)]={'displayName':_0x30a3be[_0x25cbf6(0x168)][_0x25cbf6(0x58b)]+_0x25cbf6(0x1ca),'contacts':_0x30a3be['contactMessage'][_0x25cbf6(0x227)](_0x22297a=>({'displayName':_0x22297a[_0x25cbf6(0x4af)],'vcard':_0x1d7a65(_0x22297a)}))},await this['sendMessageWithTyping'](_0x30a3be['number'],{..._0x161bfa},_0x30a3be?.['options']);}async[a0_0x4a837a(0x531)](_0x544770){const _0x574c8b=a0_0x4a837a;return await this[_0x574c8b(0x48d)](_0x544770[_0x574c8b(0x531)][_0x574c8b(0x1a8)][_0x574c8b(0x397)],{'reactionMessage':{'key':_0x544770[_0x574c8b(0x531)][_0x574c8b(0x1a8)],'text':_0x544770[_0x574c8b(0x531)][_0x574c8b(0x30c)]}});}async[a0_0x4a837a(0x134)](_0x413998){const _0x334593=a0_0x4a837a;let _0x4a297f=[];for await(let _0x5ca982 of _0x413998['numbers']){let _0x528ad3=this[_0x334593(0x305)](_0x5ca982);if((0x0,w[_0x334593(0x281)])(_0x528ad3)){let _0x2aa223=await this[_0x334593(0x611)]({'groupJid':_0x528ad3},_0x334593(0x15b));_0x4a297f[_0x334593(0x656)](new fe(_0x2aa223['metadata']['id'],!!_0x2aa223?.[_0x334593(0x45c)]['id'],_0x2aa223?.['metadata'][_0x334593(0x418)]));}else try{let _0xe24b5b=(await this[_0x334593(0x271)]['onWhatsApp'](_0x528ad3))[0x0];_0x4a297f[_0x334593(0x656)](new fe(_0xe24b5b[_0x334593(0x511)],_0xe24b5b[_0x334593(0x322)]));}catch{_0x4a297f[_0x334593(0x656)](new fe(_0x5ca982,!0x1));}}return _0x4a297f;}async[a0_0x4a837a(0x533)](_0x37c04b){const _0x55de1b=a0_0x4a837a;try{let _0x2d48d1=_0x37c04b['readMessages'][_0x55de1b(0x370)](_0x186707=>(0x0,w['isJidGroup'])(_0x186707[_0x55de1b(0x397)])||(0x0,w['isJidUser'])(_0x186707[_0x55de1b(0x397)]))[_0x55de1b(0x227)](_0x267e2c=>({'remoteJid':_0x267e2c[_0x55de1b(0x397)],'fromMe':_0x267e2c[_0x55de1b(0x319)],'id':_0x267e2c['id']}));await this['client']['readMessages'](_0x2d48d1);let _0x452eb4=_0x2d48d1[_0x55de1b(0x227)](_0x456881=>this[_0x55de1b(0x532)](_0x456881,_0x456881[_0x55de1b(0x397)],{'status':_0x55de1b(0x593),'owner':this[_0x55de1b(0x634)]['wuid']})),_0x4a5019=_0x2d48d1['map'](_0x379e27=>this[_0x55de1b(0x5c0)][_0x55de1b(0xe2)][_0x55de1b(0x3ed)]({'where':{'_id':_0x379e27['remoteJid'],'owner':this[_0x55de1b(0x634)][_0x55de1b(0x194)]}},{'unreadcount':0x0})),[_0x2972ef,_0x18b0ac]=await Promise[_0x55de1b(0x20e)]([Promise[_0x55de1b(0x20e)](_0x452eb4),Promise[_0x55de1b(0x20e)](_0x4a5019)]);return _0x18b0ac[_0x55de1b(0x370)](_0xf21fd3=>_0xf21fd3!==null)[_0x55de1b(0x2c9)](_0x4ea31f=>{const _0x14286b=_0x55de1b;F(this[_0x14286b(0x2fb)],_0x14286b(0x15c),{'chat':_0x4ea31f});}),{'message':_0x55de1b(0x594),'read':_0x55de1b(0x589)};}catch(_0xe1056){throw console[_0x55de1b(0x60b)](_0x55de1b(0x378),_0xe1056),new A(_0x55de1b(0x451),_0xe1056[_0x55de1b(0x42d)]());}}async['getLastMessage'](_0x4a99c7){const _0x5ce0e3=a0_0x4a837a;let _0x11246a=await this[_0x5ce0e3(0x34d)]({'where':{'key':{'remoteJid':_0x4a99c7},'owner':this[_0x5ce0e3(0x634)][_0x5ce0e3(0x372)]}}),_0x51e415=_0x11246a[_0x5ce0e3(0x1c0)]();for(let _0x4cf136 of _0x11246a)_0x4cf136[_0x5ce0e3(0x15f)]>=_0x51e415[_0x5ce0e3(0x15f)]&&(_0x51e415=_0x4cf136);return _0x51e415;}async[a0_0x4a837a(0x4b9)](_0x1480c0){const _0x3a0ffb=a0_0x4a837a;this['logger'][_0x3a0ffb(0x660)](_0x3a0ffb(0x427));try{let _0x878202=_0x1480c0[_0x3a0ffb(0x398)],_0x5786c3=_0x1480c0[_0x3a0ffb(0xe2)];if(!_0x878202&&_0x5786c3?_0x878202=await this[_0x3a0ffb(0x28b)](_0x5786c3):(_0x878202=_0x1480c0[_0x3a0ffb(0x398)],_0x878202[_0x3a0ffb(0x15f)]=_0x878202?.[_0x3a0ffb(0x15f)]??Date['now'](),_0x5786c3=_0x878202?.[_0x3a0ffb(0x1a8)]?.[_0x3a0ffb(0x397)]),!_0x878202||Object[_0x3a0ffb(0x396)](_0x878202)[_0x3a0ffb(0x58b)]===0x0)throw new x(_0x3a0ffb(0x1ef));await this[_0x3a0ffb(0x271)]['chatModify']({'archive':_0x1480c0[_0x3a0ffb(0x597)],'lastMessages':[_0x878202]},this[_0x3a0ffb(0x305)](_0x5786c3));let _0x5d54b3=await this['repository'][_0x3a0ffb(0xe2)][_0x3a0ffb(0x3ed)]({'where':{'_id':_0x878202?.[_0x3a0ffb(0x1a8)]?.[_0x3a0ffb(0x397)],'owner':this['instance']['wuid']}},{'archived':_0x1480c0[_0x3a0ffb(0x597)]});return _0x5d54b3&&F(this[_0x3a0ffb(0x2fb)],_0x3a0ffb(0x15c),{'chat':_0x5d54b3}),{'chatId':_0x5786c3,'archived':_0x1480c0[_0x3a0ffb(0x597)]};}catch(_0x3b18ba){throw new A({'archived':!0x1,'message':[_0x3a0ffb(0x44e),_0x3b18ba['toString']()]});}}async[a0_0x4a837a(0x31c)](_0x2fe716){const _0x533da1=a0_0x4a837a;try{let _0x4aca62=await this[_0x533da1(0x271)][_0x533da1(0x3b3)](_0x2fe716[_0x533da1(0x397)],{'delete':_0x2fe716});try{let _0x4a9821=await this['updateMessage'](_0x2fe716,_0x2fe716[_0x533da1(0x397)],{'status':_0x533da1(0x488),'owner':this[_0x533da1(0x634)][_0x533da1(0x194)]});this[_0x533da1(0x5a9)][_0x533da1(0x660)](this['instanceName']+'\x20('+this[_0x533da1(0x634)][_0x533da1(0x194)]+_0x533da1(0x1f0)+_0x4a9821);}catch(_0x2e0e48){console[_0x533da1(0x60b)](_0x533da1(0x2be),_0x2e0e48);}return _0x4aca62;}catch(_0x3df129){throw new A(_0x533da1(0x27d),_0x3df129?.[_0x533da1(0x42d)]());}}async['getBase64FromMediaMessage'](_0x49db82){const _0x583e1d=a0_0x4a837a;try{let _0x25aa1b=_0x49db82?.[_0x583e1d(0x310)]?_0x49db82:await this[_0x583e1d(0x471)](_0x49db82[_0x583e1d(0x1a8)],!0x0);for(let _0x55d267 of Qs)_0x25aa1b[_0x583e1d(0x310)][_0x55d267]&&(_0x25aa1b[_0x583e1d(0x310)]=_0x25aa1b[_0x583e1d(0x310)][_0x55d267][_0x583e1d(0x310)]);let _0x213892,_0x430f99;for(let _0x3015f8 of zs)if(_0x213892=_0x25aa1b[_0x583e1d(0x310)][_0x3015f8],_0x213892){_0x430f99=_0x3015f8;break;}if(!_0x213892)throw _0x583e1d(0x242);typeof _0x213892[_0x583e1d(0x420)]=='object'&&(_0x25aa1b[_0x583e1d(0x310)]=JSON[_0x583e1d(0xc0)](JSON[_0x583e1d(0xe8)](_0x25aa1b[_0x583e1d(0x310)])));let _0x58f9d5=await(0x0,w[_0x583e1d(0x102)])({'key':_0x25aa1b?.[_0x583e1d(0x1a8)],'message':_0x25aa1b?.['message']},_0x583e1d(0x21e),{},{'logger':(0x0,Mt['default'])({'level':_0x583e1d(0x60b)}),'reuploadRequest':this[_0x583e1d(0x271)][_0x583e1d(0x624)]});if(!(_0x58f9d5 instanceof Buffer))throw new Error('Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.');let _0x2e84be=this[_0x583e1d(0x1c6)][_0x583e1d(0x17e)](_0x583e1d(0x2b6)),_0xcb6fe5,_0xeeeb4a;if(_0x213892[_0x583e1d(0xca)])_0xcb6fe5=_0x213892[_0x583e1d(0xca)];else{let _0x23480e=_0x213892[_0x583e1d(0x2fe)]?.[_0x583e1d(0x37e)](/\/(\w+)/),_0x306c64=_0x23480e?_0x23480e[0x1]:null;if(!_0x306c64)throw new Error(_0x583e1d(0x1ab));_0xcb6fe5=(0x0,It['v4'])()+'.'+_0x306c64;}_0x430f99===_0x583e1d(0x18e)&&_0x213892[_0x583e1d(0x2fe)]==='audio/ogg'?(_0xcb6fe5=(0x0,It['v4'])()+_0x583e1d(0xfe),_0xeeeb4a=_0x583e1d(0x339)+await this['convertaudio'](_0x58f9d5[_0x583e1d(0x42d)](_0x583e1d(0x399)))):(await this[_0x583e1d(0x53f)](_0x58f9d5,_0xcb6fe5),_0xeeeb4a='/media/'+_0xcb6fe5);let _0x7c9172=this['configService'][_0x583e1d(0x17e)](_0x583e1d(0x38c)),_0xd2b316=this[_0x583e1d(0x1c6)]['get'](_0x583e1d(0xbe))[_0x583e1d(0x1f7)],_0x5bfe42=_0x7c9172&&_0x7c9172[_0x583e1d(0x1bd)][_0x583e1d(0x24d)]('/')[0x4];_0xd2b316===0x1bb&&(_0xeeeb4a=''+('https://'+_0x5bfe42)+_0xeeeb4a);let _0xc9977f=0xc*0x3c*0x3c*0x3e8,_0x16e74d={'where':{'_id':_0x25aa1b['key']['id'],'owner':this[_0x583e1d(0x634)][_0x583e1d(0x194)]}};_0x25aa1b[_0x583e1d(0x1a8)][_0x583e1d(0x397)]['endsWith'](_0x583e1d(0x4ab))&&(_0x16e74d['where'][_0x583e1d(0x1a8)][_0x583e1d(0x3e4)]=_0x25aa1b['key'][_0x583e1d(0x3e4)]);let _0x3c5194={'message_normalized.fileUrl':_0xeeeb4a,'message_normalized.expires_fileUrl':Date[_0x583e1d(0x2a2)]()+_0xc9977f};try{let _0x472b85=await this['repository'][_0x583e1d(0x310)][_0x583e1d(0x525)](_0x16e74d,_0x3c5194);_0x472b85&&F(this['instanceName'],_0x583e1d(0x581),{'message':_0x472b85});}catch{}return{'mediaType':_0x430f99,'fileName':_0x213892[_0x583e1d(0xca)],'caption':_0x213892['caption'],'size':{'fileLength':_0x213892[_0x583e1d(0x186)],'height':_0x213892[_0x583e1d(0x4a7)],'width':_0x213892[_0x583e1d(0x296)]},'mimetype':_0x213892[_0x583e1d(0x2fe)],'base64':_0x58f9d5[_0x583e1d(0x42d)]('base64'),'fileUrl':_0xeeeb4a,'expires_fileUrl':Date[_0x583e1d(0x2a2)]()+_0xc9977f};}catch(_0x2ed423){throw this[_0x583e1d(0x5a9)][_0x583e1d(0x60b)](this[_0x583e1d(0x2fb)]+'\x20('+this[_0x583e1d(0x634)]['wuid']+_0x583e1d(0x4b2)+JSON[_0x583e1d(0xe8)](_0x2ed423,null,0x2)),new g(_0x2ed423[_0x583e1d(0x42d)]());}}async['saveMediaToFile'](_0x21c314,_0x1f8dde){const _0x21da60=a0_0x4a837a;console[_0x21da60(0x4eb)](_0x21da60(0x14b),__dirname),console[_0x21da60(0x4eb)](_0x21da60(0x1ff),_0x1f8dde);let _0x9fbff8=$['default'][_0x21da60(0x31f)](__dirname,_0x21da60(0x49c));console['log'](_0x21da60(0x59f),_0x9fbff8),P[_0x21da60(0x5bd)](_0x9fbff8)||(this['logger'][_0x21da60(0x4eb)]('Media\x20folder\x20does\x20not\x20exist,\x20creating\x20folder...'),P[_0x21da60(0x406)](_0x9fbff8,{'recursive':!0x0}));let _0x12bcf3=$[_0x21da60(0x4d5)]['join'](_0x9fbff8,_0x1f8dde);return console['log']('Full\x20file\x20path:',_0x12bcf3),new Promise((_0x49e5be,_0x1faec7)=>{const _0x216b22=_0x21da60;P[_0x216b22(0x1ee)](_0x12bcf3,_0x21c314,_0x23116c=>{const _0x573ac4=_0x216b22;_0x23116c?(this[_0x573ac4(0x5a9)][_0x573ac4(0x60b)]('Error\x20writing\x20file:\x20'+JSON[_0x573ac4(0xe8)](_0x23116c,null,0x2)),_0x1faec7(_0x23116c)):(this[_0x573ac4(0x5a9)][_0x573ac4(0x4eb)](_0x573ac4(0x3a5)+_0x12bcf3),_0x49e5be(_0x12bcf3));});});}async['fetchContacts'](_0x49add3){const _0x25f4c2=a0_0x4a837a;return _0x49add3?.[_0x25f4c2(0x61c)]?_0x49add3[_0x25f4c2(0x61c)]['owner']=this['instance'][_0x25f4c2(0x194)]:_0x49add3={'where':{'owner':this[_0x25f4c2(0x634)][_0x25f4c2(0x194)]}},await this['repository'][_0x25f4c2(0x549)][_0x25f4c2(0x33c)](_0x49add3);}async[a0_0x4a837a(0x34d)](_0x4b6839){const _0x33a1b4=a0_0x4a837a;return _0x4b6839?.[_0x33a1b4(0x61c)]?_0x4b6839[_0x33a1b4(0x61c)]['owner']=this['instance'][_0x33a1b4(0x194)]:_0x4b6839={'where':{'owner':this['instance'][_0x33a1b4(0x194)]},'limit':_0x4b6839?.[_0x33a1b4(0x4f6)]},await this[_0x33a1b4(0x5c0)]['message'][_0x33a1b4(0x33c)](_0x4b6839);}async[a0_0x4a837a(0x545)](){const _0x17f47c=a0_0x4a837a;let _0x8314ad=[{'query':{'where':{'owner':this[_0x17f47c(0x634)]['wuid'],'leadInfo.tags':{'$exists':!0x1}}},'update':{'leadInfo':{'tags':[]}}},{'query':{'where':{'owner':this[_0x17f47c(0x634)][_0x17f47c(0x194)],'leadInfo.customFields':{'$exists':!0x1}}},'update':{'leadInfo':{'customFields':[]}}}];return await this[_0x17f47c(0x5c0)][_0x17f47c(0xe2)][_0x17f47c(0xa6)](_0x8314ad),await this[_0x17f47c(0x5c0)][_0x17f47c(0xe2)][_0x17f47c(0x33c)]({'where':{'owner':this[_0x17f47c(0x634)]['wuid']}});}async[a0_0x4a837a(0x150)](){const _0x3aced7=a0_0x4a837a;return await this[_0x3aced7(0x271)]['fetchPrivacySettings']();}async['updatePrivacySettings'](_0x4f91c0){const _0xc5ed0a=a0_0x4a837a;try{return await this['client']['updateReadReceiptsPrivacy'](_0x4f91c0[_0xc5ed0a(0x655)][_0xc5ed0a(0x630)]),await this[_0xc5ed0a(0x271)]['updateProfilePicturePrivacy'](_0x4f91c0[_0xc5ed0a(0x655)][_0xc5ed0a(0x61b)]),await this['client']['updateStatusPrivacy'](_0x4f91c0[_0xc5ed0a(0x655)][_0xc5ed0a(0x2e7)]),await this[_0xc5ed0a(0x271)]['updateOnlinePrivacy'](_0x4f91c0[_0xc5ed0a(0x655)]['online']),await this[_0xc5ed0a(0x271)]['updateLastSeenPrivacy'](_0x4f91c0['privacySettings'][_0xc5ed0a(0x530)]),await this[_0xc5ed0a(0x271)][_0xc5ed0a(0x1e6)](_0x4f91c0['privacySettings'][_0xc5ed0a(0x42b)]),this[_0xc5ed0a(0x271)]?.['ws']?.['close'](),{'update':'success','data':{'readreceipts':_0x4f91c0['privacySettings'][_0xc5ed0a(0x630)],'profile':_0x4f91c0['privacySettings'][_0xc5ed0a(0x61b)],'status':_0x4f91c0[_0xc5ed0a(0x655)][_0xc5ed0a(0x2e7)],'online':_0x4f91c0['privacySettings']['online'],'last':_0x4f91c0[_0xc5ed0a(0x655)]['last'],'groupadd':_0x4f91c0[_0xc5ed0a(0x655)]['groupadd']}};}catch(_0x12ee4a){throw new A(_0xc5ed0a(0x29d),_0x12ee4a['toString']());}}async[a0_0x4a837a(0x556)](_0xe0366a){const _0x45cb65=a0_0x4a837a;let _0x2cc6bb=_0xe0366a?this['createJid'](_0xe0366a):this['client']?.['user']?.['id'];this[_0x45cb65(0x5a9)]['verbose'](_0x45cb65(0x217)+_0x2cc6bb);try{if(this[_0x45cb65(0x5a9)][_0x45cb65(0x660)](_0x45cb65(0x4f0)),_0xe0366a){let _0x22eddd=(await this[_0x45cb65(0x134)]({'numbers':[_0x2cc6bb]}))?.[_0x45cb65(0x1f4)](),_0x4dd4c7=await this[_0x45cb65(0x40f)](_0x22eddd?.[_0x45cb65(0x511)]),_0x4e8efc=await this[_0x45cb65(0x200)](_0x22eddd?.[_0x45cb65(0x511)]),_0x1c82af=await this[_0x45cb65(0x381)](_0x22eddd?.[_0x45cb65(0x511)]);return{'wuid':_0x22eddd?.[_0x45cb65(0x511)]||_0x2cc6bb,'name':_0x22eddd?.[_0x45cb65(0x372)],'numberExists':_0x22eddd?.[_0x45cb65(0x322)],'picture':_0x4dd4c7?.[_0x45cb65(0x638)],'status':_0x4e8efc?.[_0x45cb65(0x2e7)],'isBusiness':_0x1c82af['isBusiness'],'email':_0x1c82af?.['email'],'description':_0x1c82af?.[_0x45cb65(0x5ae)],'website':_0x1c82af?.[_0x45cb65(0x457)]?.[_0x45cb65(0x1f4)]()};}}catch{return this[_0x45cb65(0x5a9)][_0x45cb65(0x660)]('Profile\x20not\x20found'),{'wuid':_0x2cc6bb,'name':null,'picture':null,'status':null,'os':null,'isBusiness':!0x1};}}async[a0_0x4a837a(0x4aa)](_0x2eeded){const _0xc75f3=a0_0x4a837a;let _0x46efe0=(_0x2eeded?this['createJid'](_0x2eeded):this[_0xc75f3(0x271)]?.[_0xc75f3(0x5dd)]?.['id'])[_0xc75f3(0x522)](/:\d{1,2}@/g,'@');this[_0xc75f3(0x5a9)][_0xc75f3(0x660)]('Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20'+_0x46efe0);let _0x34335d=await this[_0xc75f3(0x5c0)][_0xc75f3(0x549)][_0xc75f3(0x596)]({'where':{'_id':_0x46efe0,'owner':this[_0xc75f3(0x634)]['wuid']}}),_0x237851=_0x34335d?_0x34335d[_0xc75f3(0x2eb)]:null;try{let _0x270ef3=(await this[_0xc75f3(0x134)]({'numbers':[_0x46efe0]}))?.[_0xc75f3(0x1f4)](),_0x3682c9=await this[_0xc75f3(0x40f)](_0x270ef3?.['jid']),_0x415f8e=await this['getStatus'](_0x270ef3?.['jid']),_0x2e6c8a=await this[_0xc75f3(0x381)](_0x270ef3?.[_0xc75f3(0x511)]),_0x1eda7f={'imagechat':_0x3682c9?.['profilePictureUrl'],'contactname':_0x237851||null,'status':_0x415f8e?.[_0xc75f3(0x2e7)],'isBusiness':_0x2e6c8a[_0xc75f3(0x560)],'email':_0x2e6c8a?.[_0xc75f3(0x2ea)],'description':_0x2e6c8a?.[_0xc75f3(0x5ae)],'website':_0x2e6c8a?.['website']?.[_0xc75f3(0x1f4)](),'lastcache':Date[_0xc75f3(0x2a2)]()},_0x559079=await this[_0xc75f3(0x5c0)][_0xc75f3(0xe2)][_0xc75f3(0x3ed)]({'where':{'_id':_0x46efe0,'owner':this['instance']['wuid']}},_0x1eda7f),_0x1a38a2={'owner':this['instance'][_0xc75f3(0x194)],'_id':_0x46efe0,'profilePictureUrl':_0x3682c9?.[_0xc75f3(0x638)],'status':_0x415f8e?.[_0xc75f3(0x2e7)]};return this[_0xc75f3(0x5c0)]['contact'][_0xc75f3(0x525)]([_0x1a38a2],this[_0xc75f3(0x634)][_0xc75f3(0x194)]),_0x559079&&F(this[_0xc75f3(0x2fb)],'chats',{'chat':_0x559079}),{'wuid':_0x270ef3?.['jid']||_0x46efe0,'name':_0x270ef3?.[_0xc75f3(0x372)],'numberExists':_0x270ef3?.[_0xc75f3(0x322)],'picture':_0x3682c9?.[_0xc75f3(0x638)],'status':_0x415f8e?.[_0xc75f3(0x2e7)],'isBusiness':_0x2e6c8a[_0xc75f3(0x560)],'email':_0x2e6c8a?.[_0xc75f3(0x2ea)],'description':_0x2e6c8a?.[_0xc75f3(0x5ae)],'website':_0x2e6c8a?.[_0xc75f3(0x457)]?.[_0xc75f3(0x1f4)]()};}catch(_0x444bde){return this[_0xc75f3(0x5a9)]['error'](_0xc75f3(0xf4)+JSON[_0xc75f3(0xe8)](_0x444bde,null,0x2)),{};}}async['fetchBusinessProfile'](_0x4376cd){const _0x4ee63b=a0_0x4a837a;this[_0x4ee63b(0x5a9)]['verbose'](_0x4ee63b(0x2cf));try{let _0x3b7220=_0x4376cd?this[_0x4ee63b(0x305)](_0x4376cd):this[_0x4ee63b(0x634)][_0x4ee63b(0x194)],_0x5bd707=await this['client'][_0x4ee63b(0x3c9)](_0x3b7220);return this[_0x4ee63b(0x5a9)][_0x4ee63b(0x660)](_0x4ee63b(0x2e0)),_0x5bd707?(this['logger']['verbose'](_0x4ee63b(0x244)),{'isBusiness':!0x0,..._0x5bd707}):{'isBusiness':!0x1,'message':'Not\x20is\x20business\x20profile',...(await this[_0x4ee63b(0x134)]({'numbers':[_0x3b7220]}))?.[_0x4ee63b(0x1f4)]()};}catch(_0x1ed056){throw new A(_0x4ee63b(0x34e),_0x1ed056['toString']());}}async['getStatus'](_0x4c51c1){const _0x49b448=a0_0x4a837a;let _0x1fda76=this['createJid'](_0x4c51c1);try{return{'wuid':_0x1fda76,'status':(await this[_0x49b448(0x271)][_0x49b448(0x490)](_0x1fda76))?.[_0x49b448(0x2e7)]};}catch{return{'wuid':_0x1fda76,'status':null};}}async[a0_0x4a837a(0x674)](_0x52a6ef){const _0x2ea31f=a0_0x4a837a;try{return await this['client'][_0x2ea31f(0x674)](_0x52a6ef),{'update':'success'};}catch(_0xb9d100){throw new A('Error\x20updating\x20profile\x20name',_0xb9d100[_0x2ea31f(0x42d)]());}}async[a0_0x4a837a(0x442)](_0x48482e){const _0x370820=a0_0x4a837a;try{return await this[_0x370820(0x271)][_0x370820(0x442)](_0x48482e),{'update':_0x370820(0x589)};}catch(_0x1a04ce){throw new A(_0x370820(0x247),_0x1a04ce[_0x370820(0x42d)]());}}async[a0_0x4a837a(0x252)](_0xc358bd){const _0x2be8fa=a0_0x4a837a;try{let _0xe9aca6;if((0x0,_[_0x2be8fa(0x491)])(_0xc358bd)){let _0x1fd92b=new Date()['getTime'](),_0x2fbadc=_0xc358bd+_0x2be8fa(0x468)+_0x1fd92b;_0xe9aca6=(await ce[_0x2be8fa(0x4d5)][_0x2be8fa(0x17e)](_0x2fbadc,{'responseType':_0x2be8fa(0x154)}))[_0x2be8fa(0x562)];}else{if((0x0,_[_0x2be8fa(0x266)])(_0xc358bd))_0xe9aca6=Buffer[_0x2be8fa(0x66c)](_0xc358bd,_0x2be8fa(0x399));else throw new g('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this[_0x2be8fa(0x271)][_0x2be8fa(0x252)](this[_0x2be8fa(0x634)][_0x2be8fa(0x194)],_0xe9aca6),{'update':_0x2be8fa(0x589)};}catch(_0x5a1b1f){throw new A(_0x2be8fa(0xbf),_0x5a1b1f['toString']());}}async[a0_0x4a837a(0x610)](){const _0x1d39ec=a0_0x4a837a;try{return await this['client'][_0x1d39ec(0x610)](this[_0x1d39ec(0x634)]['wuid']),{'update':_0x1d39ec(0x589)};}catch(_0x3ebbe7){throw new A(_0x1d39ec(0x4f8),_0x3ebbe7[_0x1d39ec(0x42d)]());}}async[a0_0x4a837a(0x659)](_0x3e989b){const _0x582d76=a0_0x4a837a;try{let _0x5ee708=_0x3e989b[_0x582d76(0x109)]['map'](_0x3c0c6b=>this['createJid'](_0x3c0c6b)),{id:_0x365cb0}=await this['client'][_0x582d76(0x1a7)](_0x3e989b[_0x582d76(0x418)],_0x5ee708);return _0x3e989b?.['description']&&await this[_0x582d76(0x271)]['groupUpdateDescription'](_0x365cb0,_0x3e989b['description']),{'metadata':await this['client'][_0x582d76(0x588)](_0x365cb0)};}catch(_0x2ebb75){throw this[_0x582d76(0x5a9)][_0x582d76(0x60b)](this[_0x582d76(0x2fb)]+'\x20('+this[_0x582d76(0x634)][_0x582d76(0x194)]+_0x582d76(0x4b2)+JSON[_0x582d76(0xe8)](_0x2ebb75,null,0x2)),new A(_0x582d76(0x459),_0x2ebb75[_0x582d76(0x42d)]());}}async['updateGroupPicture'](_0x2e1ed0){const _0x2a6db4=a0_0x4a837a;try{let _0x1586aa;if((0x0,_['isURL'])(_0x2e1ed0[_0x2a6db4(0x59c)])){let _0x33df44=new Date()[_0x2a6db4(0x495)](),_0x49ba6d=_0x2e1ed0['image']+_0x2a6db4(0x468)+_0x33df44;_0x1586aa=(await ce['default'][_0x2a6db4(0x17e)](_0x49ba6d,{'responseType':'arraybuffer'}))[_0x2a6db4(0x562)];}else{if((0x0,_[_0x2a6db4(0x266)])(_0x2e1ed0['image']))_0x1586aa=Buffer[_0x2a6db4(0x66c)](_0x2e1ed0['image'],_0x2a6db4(0x399));else throw new g('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this['client'][_0x2a6db4(0x252)](_0x2e1ed0[_0x2a6db4(0x5ed)],_0x1586aa),{'update':_0x2a6db4(0x589)};}catch(_0x521eff){throw new A(_0x2a6db4(0x12b),_0x521eff['toString']());}}async['findGroup'](_0x288432,_0xf46f25='out'){const _0xc362d5=a0_0x4a837a;try{let _0x867e48=await this['client']['groupMetadata'](_0x288432[_0xc362d5(0x5ed)]),_0x5cb8ff=null;try{_0x5cb8ff=(await this['profilePicture'](_0x288432[_0xc362d5(0x5ed)]))[_0xc362d5(0x638)];}catch(_0x45c608){this[_0xc362d5(0x5a9)][_0xc362d5(0x660)](this[_0xc362d5(0x2fb)]+'\x20('+this[_0xc362d5(0x634)]['wuid']+_0xc362d5(0x584)+_0x288432[_0xc362d5(0x5ed)]+':\x20'+JSON[_0xc362d5(0xe8)](_0x45c608,null,0x2));}let _0x98c70e=await this[_0xc362d5(0x5c0)]['chat'][_0xc362d5(0x3ed)]({'where':{'_id':_0x288432['groupJid'],'owner':this[_0xc362d5(0x634)][_0xc362d5(0x194)]}},{'imagechat':_0x5cb8ff,'name':_0x867e48[_0xc362d5(0x418)],'group_size':_0x867e48[_0xc362d5(0x3f2)],'group_announce':_0x867e48[_0xc362d5(0x37a)],'lastcache':Date[_0xc362d5(0x2a2)]()});return _0x98c70e&&F(this[_0xc362d5(0x2fb)],_0xc362d5(0x15c),{'chat':_0x98c70e}),{'metadata':_0x867e48,'image':_0x5cb8ff};}catch(_0x456769){if(_0xf46f25===_0xc362d5(0x15b))return;throw new x(_0xc362d5(0x1e3),_0x456769[_0xc362d5(0x42d)]());}}async[a0_0x4a837a(0x4a3)](_0x119649){const _0x4350f0=a0_0x4a837a;try{return await this[_0x4350f0(0x271)][_0x4350f0(0x476)](_0x119649[_0x4350f0(0x5ed)],_0x119649[_0x4350f0(0x5ae)]),{'update':_0x4350f0(0x589)};}catch(_0x168238){throw new A(_0x4350f0(0x45f),_0x168238[_0x4350f0(0x42d)]());}}async[a0_0x4a837a(0x4ba)](_0xe74e94){const _0x116aa5=a0_0x4a837a;try{return await this[_0x116aa5(0x271)][_0x116aa5(0x423)](_0xe74e94['groupJid'],_0xe74e94[_0x116aa5(0x372)]),{'update':_0x116aa5(0x589)};}catch(_0x1dacd1){throw new A(_0x116aa5(0x313),_0x1dacd1[_0x116aa5(0x42d)]());}}async['groupSetting'](_0x3c536f){const _0x121079=a0_0x4a837a;try{return await this[_0x121079(0x271)][_0x121079(0x15e)](_0x3c536f['groupJid'],_0x3c536f[_0x121079(0x289)]),{'update':_0x121079(0x589)};}catch(_0x32f862){throw new A('Error\x20change\x20group\x20setting',_0x32f862[_0x121079(0x42d)]());}}async['findGroups'](){const _0xf9780f=a0_0x4a837a;try{let _0x3907eb=[],_0x25cd6d=await this['client'][_0xf9780f(0xfb)](),_0x2ab9a5=Object[_0xf9780f(0x2b0)](_0x25cd6d),_0x5bc81a=_0x2ab9a5['filter'](_0x5bc50b=>(0x0,w[_0xf9780f(0x281)])(_0x5bc50b?.['id']))[_0xf9780f(0x227)](async _0x110d73=>{const _0x10e1ef=_0xf9780f;try{return await this[_0x10e1ef(0x271)]['profilePictureUrl'](_0x110d73['id'],_0x10e1ef(0x481));}catch(_0x2c1013){return this[_0x10e1ef(0x5a9)][_0x10e1ef(0x660)](this['instanceName']+'\x20('+this[_0x10e1ef(0x634)][_0x10e1ef(0x194)]+_0x10e1ef(0x584)+_0x110d73['id']+':\x20'+JSON[_0x10e1ef(0xe8)](_0x2c1013,null,0x2)),null;}}),_0x65a602=await Promise[_0xf9780f(0x20e)](_0x5bc81a);for(let _0x50bb76=0x0;_0x50bb76<_0x2ab9a5[_0xf9780f(0x58b)];_0x50bb76++){let _0x1bc9d7=_0x2ab9a5[_0x50bb76];(0x0,w[_0xf9780f(0x281)])(_0x1bc9d7?.['id'])&&_0x3907eb[_0xf9780f(0x656)]({'groupJid':_0x1bc9d7?.['id'],'subject':_0x1bc9d7?.[_0xf9780f(0x418)],'subjectOwner':_0x1bc9d7?.[_0xf9780f(0x233)]?.['split']('@')[0x0],'subjectTime':_0x1bc9d7?.[_0xf9780f(0x196)],'size':_0x1bc9d7?.[_0xf9780f(0x109)]?.[_0xf9780f(0x58b)],'owner':_0x1bc9d7?.[_0xf9780f(0x404)]?.[_0xf9780f(0x24d)]('@')[0x0],'creation':_0x1bc9d7?.['creation'],'desc':_0x1bc9d7?.[_0xf9780f(0x65b)],'restrict':_0x1bc9d7?.[_0xf9780f(0x2d6)],'announce':_0x1bc9d7?.[_0xf9780f(0x37a)],'image':_0x65a602[_0x50bb76]});}return _0x3907eb;}catch(_0x31bd42){throw new x(_0xf9780f(0x1e3),_0x31bd42['toString']());}}async[a0_0x4a837a(0x5b6)](_0x492fa3){const _0x2ef737=a0_0x4a837a;try{let _0xde956c=await this[_0x2ef737(0x271)][_0x2ef737(0x5a3)](_0x492fa3[_0x2ef737(0x5ed)]);return{'inviteUrl':_0x2ef737(0x198)+_0xde956c,'inviteCode':_0xde956c};}catch(_0x5556e6){throw new x(_0x2ef737(0x52a),_0x5556e6[_0x2ef737(0x42d)]());}}async['revokeInviteCode'](_0xd5ca0b){const _0xef8dc8=a0_0x4a837a;try{let _0xf2d728=await this['client'][_0xef8dc8(0x359)](_0xd5ca0b['groupJid']);return{'revoked':!0x0,'inviteUrl':_0xef8dc8(0x198)+_0xf2d728,'inviteCode':_0xf2d728};}catch(_0x8f8b4c){throw new x(_0xef8dc8(0x265),_0x8f8b4c[_0xef8dc8(0x42d)]());}}async[a0_0x4a837a(0x2d8)](_0x50d0cd){const _0x175acd=a0_0x4a837a;try{if((0x0,_[_0x175acd(0x491)])(_0x50d0cd[_0x175acd(0x5b6)]))var _0x176284=_0x50d0cd[_0x175acd(0x5b6)][_0x175acd(0x24d)]('/')[0x3];else var _0x176284=_0x50d0cd[_0x175acd(0x5b6)];let _0xf0c36e=await this['client']['groupAcceptInvite'](_0x176284);return this['logger']['verbose'](this[_0x175acd(0x2fb)]+'\x20('+this[_0x175acd(0x634)]['wuid']+_0x175acd(0x4b2)+_0xf0c36e),{'join':!0x0,'inviteCode':_0x176284,'groupJid':_0xf0c36e};}catch(_0x47ba8b){throw new x('No\x20join\x20group\x20invite\x20code\x20or\x20url',_0x47ba8b[_0x175acd(0x42d)]());}}async[a0_0x4a837a(0x509)](_0x391c7a){const _0x578841=a0_0x4a837a;try{return{'participants':(await this['client']['groupMetadata'](_0x391c7a[_0x578841(0x5ed)]))[_0x578841(0x109)]};}catch(_0x4e009c){throw new x(_0x578841(0x5a8),_0x4e009c[_0x578841(0x42d)]());}}async['updateGParticipant'](_0x37b124){const _0x599477=a0_0x4a837a;try{let _0x44d91d=_0x37b124[_0x599477(0x109)]['map'](_0x28cacf=>this[_0x599477(0x305)](_0x28cacf));return{'updateParticipants':await this['client']['groupParticipantsUpdate'](_0x37b124['groupJid'],_0x44d91d,_0x37b124[_0x599477(0x524)])};}catch(_0x17b9f4){throw new g(_0x599477(0xc1),_0x17b9f4[_0x599477(0x42d)]());}}async[a0_0x4a837a(0x181)](_0x4ad21b){const _0x29ab67=a0_0x4a837a;try{let _0x51ca83=await this[_0x29ab67(0x271)][_0x29ab67(0x436)](_0x4ad21b[_0x29ab67(0x5ed)],_0x4ad21b['expiration']);return{'success':!0x0};}catch(_0x547eab){throw new g(_0x29ab67(0x49e),_0x547eab[_0x29ab67(0x42d)]());}}async[a0_0x4a837a(0x22f)](_0x1a00cc){const _0x391152=a0_0x4a837a;try{return await this['client'][_0x391152(0x270)](_0x1a00cc[_0x391152(0x5ed)]),{'groupJid':_0x1a00cc[_0x391152(0x5ed)],'leave':!0x0};}catch(_0x5518e2){throw new g(_0x391152(0x5ee),_0x5518e2[_0x391152(0x42d)]());}}async[a0_0x4a837a(0x5b9)](_0x70b229){const _0x1acbe3=a0_0x4a837a;return await this[_0x1acbe3(0x48d)](_0x70b229['number'],{'poll':{'name':_0x70b229[_0x1acbe3(0x5b9)]?.[_0x1acbe3(0x372)],'selectableCount':_0x70b229['pollMessage'][_0x1acbe3(0x182)],'values':_0x70b229['pollMessage'][_0x1acbe3(0x2b0)]}},_0x70b229?.[_0x1acbe3(0x224)]);}async[a0_0x4a837a(0x532)](_0x3f09b0,_0x2f42f8,_0x1ae0d6){const _0xee7bf1=a0_0x4a837a;if(await this[_0xee7bf1(0x471)](_0x3f09b0,!0x0)){let _0x4e9456={'where':{'_id':_0x3f09b0['id'],'owner':this[_0xee7bf1(0x634)][_0xee7bf1(0x194)]}},_0x49cc16={'status':[_0x1ae0d6[_0xee7bf1(0x2e7)]][0x0]};try{let _0x48bab2=await this[_0xee7bf1(0x5c0)][_0xee7bf1(0x310)][_0xee7bf1(0x525)](_0x4e9456,_0x49cc16);_0x48bab2&&F(this['instanceName'],_0xee7bf1(0x581),{'message':_0x48bab2});}catch{}}}[a0_0x4a837a(0xef)](_0x52ba9d){const _0x44aacb=a0_0x4a837a;let _0x41be41=_0x52ba9d[_0x44aacb(0x522)](/\\n/g,'\x0a')[_0x44aacb(0x24d)]('\x0a')[_0x44aacb(0x370)](_0x1b0bd4=>_0x1b0bd4[_0x44aacb(0x1a9)]('TEL')||_0x1b0bd4[_0x44aacb(0x1a9)](_0x44aacb(0x4b7))),_0x351c2d='';return _0x41be41[_0x44aacb(0x2c9)](_0x279395=>{const _0x43083a=_0x44aacb;let _0x5e5708=/TEL(?:.*):(.+)/,_0x54a508=/EMAIL(?:.*):(.+)/,_0x4f36ea=_0x279395[_0x43083a(0x37e)](_0x5e5708),_0x19784f=_0x279395['match'](_0x54a508);if(_0x4f36ea){let _0x336ea4=_0x4f36ea[0x1][_0x43083a(0x522)](/-| |\+|\(|\)/g,'')[_0x43083a(0x268)]();_0x351c2d+=_0x43083a(0x54f)+_0x336ea4+'\x0a';}else{if(_0x19784f){let _0x4b228=_0x19784f[0x1][_0x43083a(0x268)]();_0x351c2d+=_0x43083a(0xdc)+_0x4b228+'\x0a';}}}),_0x351c2d[_0x44aacb(0x268)]();}async['updateChatWithMessage'](_0x2bf3dd,_0x131ac1,_0x22a986){const _0x55dbd2=a0_0x4a837a;let _0x5a5f1b=_0x131ac1['key'][_0x55dbd2(0x397)]['replace'](/:\d{1,2}@/g,'@'),_0x127a07=_0x131ac1['key'][_0x55dbd2(0x319)],_0x15d0c7=_0x5a5f1b[_0x55dbd2(0xb0)](_0x55dbd2(0x4ab));if(!_0x2bf3dd['ENABLED'])return;let _0x9b566b={'lastmsg':_0x131ac1['messageTimestamp']||Date['now'](),'unreadcount':_0x127a07?0x0:0x1,..._0x127a07||_0x15d0c7?{}:{'name':_0x131ac1[_0x55dbd2(0x2eb)]},..._0x15d0c7?{'group':_0x15d0c7}:{}},_0x49a08b=await this[_0x55dbd2(0x5c0)][_0x55dbd2(0xe2)][_0x55dbd2(0x3ed)]({'where':{'_id':_0x5a5f1b,'owner':this['instance']['wuid']}},_0x9b566b,{'new':!0x0,'upsert':!0x0});if(!_0x15d0c7&&(!_0x49a08b?.[_0x55dbd2(0x234)]||!_0x49a08b['leadInfo'][_0x55dbd2(0x13d)])&&_0x131ac1[_0x55dbd2(0x2eb)]&&!_0x127a07&&await this[_0x55dbd2(0x5c0)][_0x55dbd2(0xe2)][_0x55dbd2(0x3ed)]({'where':{'_id':_0x5a5f1b,'owner':this[_0x55dbd2(0x634)][_0x55dbd2(0x194)]}},{'leadInfo.nome':_0x131ac1['pushName']},{'new':!0x0,'upsert':!0x1}),_0x49a08b)F(this[_0x55dbd2(0x2fb)],_0x55dbd2(0x15c),{'chat':_0x49a08b});else{this[_0x55dbd2(0x5a9)]['error'](this['instanceName']+'\x20('+this[_0x55dbd2(0x634)]['wuid']+_0x55dbd2(0x135));return;}if(!this[_0x55dbd2(0x11c)]?.['flowConfig'][_0x55dbd2(0x258)])return this[_0x55dbd2(0x5a9)][_0x55dbd2(0x660)](this[_0x55dbd2(0x2fb)]+'\x20('+this['instance']['wuid']+'):\x20Flow\x20desativado'),null;if(_0x49a08b[_0x55dbd2(0x3f7)][_0x55dbd2(0x1a9)](_0x55dbd2(0x4ab))&&this[_0x55dbd2(0x11c)]?.[_0x55dbd2(0x4c5)][_0x55dbd2(0x3f0)]===!0x0)return this[_0x55dbd2(0x5a9)]['verbose'](this[_0x55dbd2(0x2fb)]+'\x20('+this['instance'][_0x55dbd2(0x194)]+_0x55dbd2(0x1f3)),null;if(_0x49a08b['leadInfo']){if(_0x49a08b[_0x55dbd2(0x234)][_0x55dbd2(0xc4)]===0x0||_0x49a08b[_0x55dbd2(0x234)]['atendimentoAberto'])return this[_0x55dbd2(0x5a9)][_0x55dbd2(0x660)](this[_0x55dbd2(0x2fb)]+'\x20('+this[_0x55dbd2(0x634)][_0x55dbd2(0x194)]+_0x55dbd2(0x4a4)+_0x5a5f1b+_0x55dbd2(0x2c2)),null;if(_0x49a08b['leadInfo']['desativadoFluxoAte']>Date[_0x55dbd2(0x2a2)]())return this[_0x55dbd2(0x5a9)][_0x55dbd2(0x660)](this[_0x55dbd2(0x2fb)]+'\x20('+this['instance'][_0x55dbd2(0x194)]+'):\x20Está\x20configurado\x20para\x20parar\x20até\x20'+new Date(_0x49a08b[_0x55dbd2(0x234)][_0x55dbd2(0xc4)])[_0x55dbd2(0x235)]()+_0x55dbd2(0x2c2)),null;}this[_0x55dbd2(0x5a9)][_0x55dbd2(0x660)](this['instanceName']+'\x20('+this[_0x55dbd2(0x634)][_0x55dbd2(0x194)]+'):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações'),this[_0x55dbd2(0x1f8)](_0x22a986,_0x131ac1,this['instance'][_0x55dbd2(0x194)]);}async['upsertChats'](_0x31ca93,_0x2ddcb3){const _0x56a2af=a0_0x4a837a;if(_0x2ddcb3['ENABLED']){let _0x578dcf=_0x31ca93[_0x56a2af(0x227)](async _0x2201b2=>{const _0x353c3a=_0x56a2af;try{let _0xefaece={'_id':_0x2201b2[_0x353c3a(0x3f7)],'owner':_0x2201b2['owner'],'lastcache':0x0};if(_0x2201b2['group']!==null&&(_0xefaece[_0x353c3a(0x57f)]=_0x2201b2['group']),_0x2201b2[_0x353c3a(0x372)]!==null&&(_0xefaece['name']=_0x2201b2['name']),_0x2201b2['contactname']!==null&&(_0xefaece[_0x353c3a(0x3aa)]=_0x2201b2[_0x353c3a(0x3aa)]),_0x2201b2[_0x353c3a(0x18b)]!==null&&(_0xefaece[_0x353c3a(0x18b)]=_0x2201b2['imagechat']),_0x2201b2[_0x353c3a(0x18b)]===null&&(_0xefaece[_0x353c3a(0x18b)]='Imagem\x20não\x20encontrada'),_0x2201b2['lastmsg']!==null&&(_0xefaece[_0x353c3a(0x3c2)]=_0x2201b2['lastmsg']),_0x2201b2[_0x353c3a(0x668)]!==null&&(_0xefaece[_0x353c3a(0x668)]=_0x2201b2['archived']),_0x2201b2[_0x353c3a(0x207)]!==null&&(_0xefaece[_0x353c3a(0x207)]=_0x2201b2['unreadcount']),Object[_0x353c3a(0x396)](_0xefaece)['length']>0x0)return await this[_0x353c3a(0x5c0)][_0x353c3a(0xe2)][_0x353c3a(0x3ed)]({'where':{'_id':_0x2201b2[_0x353c3a(0x3f7)],'owner':_0x2201b2[_0x353c3a(0x404)]}},_0xefaece);}catch(_0x64e20f){return console[_0x353c3a(0x60b)]('Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20'+_0x2201b2[_0x353c3a(0x3f7)]+':',_0x64e20f),null;}}),_0x1cd376=(await Promise[_0x56a2af(0x20e)](_0x578dcf))[_0x56a2af(0x370)](_0x435020=>_0x435020!==null)['length'];this['logger']['verbose'](this[_0x56a2af(0x2fb)]+'\x20('+this['instance']['wuid']+_0x56a2af(0x4b2)+_0x1cd376+_0x56a2af(0xfc)+this[_0x56a2af(0x634)][_0x56a2af(0x194)]+_0x56a2af(0x540));}}async['readMessageBot'](_0x56cf63){const _0x55cf98=a0_0x4a837a;this['logger'][_0x55cf98(0x660)](this[_0x55cf98(0x2fb)]+'\x20('+this[_0x55cf98(0x634)]['wuid']+_0x55cf98(0x4f1));let _0x5f3620={'readMessages':[{'remoteJid':_0x56cf63[_0x55cf98(0x263)][_0x55cf98(0x23b)][_0x55cf98(0x1a8)][_0x55cf98(0x397)],'fromMe':_0x56cf63[_0x55cf98(0x263)][_0x55cf98(0x23b)][_0x55cf98(0x1a8)][_0x55cf98(0x319)],'id':_0x56cf63[_0x55cf98(0x263)][_0x55cf98(0x23b)]['key']['id']}]};await this[_0x55cf98(0x533)](_0x5f3620);}async[a0_0x4a837a(0x1f8)](_0x1bf27b,_0x2c5bba,_0x2dae25){const _0x5eb198=a0_0x4a837a;try{let {key:_0x340156,message_normalized:_0xe47ce0}=_0x2c5bba,_0x1ec9ef=_0xe47ce0,_0x5d530d=_0xe47ce0[_0x5eb198(0x472)]||_0xe47ce0[_0x5eb198(0x24a)]||_0xe47ce0[_0x5eb198(0x5c2)]||_0xe47ce0['name'],_0x1be6d6=_0x340156[_0x5eb198(0x397)],_0x426dd8;if(_0x1ec9ef[_0x5eb198(0x1a8)]['fromMe']&&_0x5d530d[_0x5eb198(0x268)]()!==this[_0x5eb198(0x11c)]?.['flowConfig'][_0x5eb198(0x50c)][_0x5eb198(0x268)]())return this['logger'][_0x5eb198(0x660)](this['instanceName']+'\x20('+this[_0x5eb198(0x634)][_0x5eb198(0x194)]+'):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20e\x20não\x20é\x20a\x20stopConversation.\x20Saindo\x20da\x20função.'),null;if(_0x1ec9ef['key'][_0x5eb198(0x319)]&&_0x5d530d[_0x5eb198(0x268)]()===this[_0x5eb198(0x11c)]?.[_0x5eb198(0x4c5)][_0x5eb198(0x50c)][_0x5eb198(0x268)]()){this[_0x5eb198(0x5a9)][_0x5eb198(0x660)](this['instanceName']+'\x20('+this[_0x5eb198(0x634)][_0x5eb198(0x194)]+'):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20usuário\x20e\x20contém\x20palavras\x20para\x20pausar\x20o\x20fluxo');let _0x2c0fe2=await J[_0x5eb198(0x33c)]({'owner':_0x2dae25,'remoteJid':_0x1be6d6,'status':_0x5eb198(0x10f)});this[_0x5eb198(0x5a9)][_0x5eb198(0x660)](this[_0x5eb198(0x2fb)]+'\x20('+this[_0x5eb198(0x634)][_0x5eb198(0x194)]+_0x5eb198(0xa1)+_0x2c0fe2);let _0x1754dc=Date['now'](),_0x2bd7df;return this['AutomateSystem']?.[_0x5eb198(0x4c5)]['stopMinutes']===0x0?_0x2bd7df={'stoppedUntil':_0x1754dc+0x7591f6200}:_0x2bd7df={'stoppedUntil':_0x1754dc+this[_0x5eb198(0x11c)]?.[_0x5eb198(0x4c5)]['stopMinutes']*0x3c*0x3e8},this[_0x5eb198(0x5a9)][_0x5eb198(0x660)](this[_0x5eb198(0x2fb)]+'\x20('+this[_0x5eb198(0x634)][_0x5eb198(0x194)]+'):\x20Campos\x20a\x20serem\x20atualizados:'+_0x2bd7df),this['updateStopChat'](_0x426dd8,_0x2bd7df[_0x5eb198(0x3d8)]),null;}if(_0x5d530d&&_0x5d530d[_0x5eb198(0x363)](this['AutomateSystem']?.['flowConfig']['prefixCommand'])&&_0x5d530d[_0x5eb198(0x58b)]>0x4){let _0xefaf0b=await I[_0x5eb198(0x596)]({'owner':_0x2dae25,'startCommandWord':_0x5d530d});if(this[_0x5eb198(0x5a9)][_0x5eb198(0x660)](this[_0x5eb198(0x2fb)]+'\x20('+this[_0x5eb198(0x634)]['wuid']+'):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.'),_0xefaf0b)_0x426dd8=await this[_0x5eb198(0x4f9)](_0xefaf0b,_0x1ec9ef[_0x5eb198(0x1a8)],_0x1ec9ef);else return this[_0x5eb198(0x5a9)][_0x5eb198(0x660)](this[_0x5eb198(0x2fb)]+'\x20('+this[_0x5eb198(0x634)]['wuid']+_0x5eb198(0x39a)),null;}else _0x426dd8=await this['findConversation'](_0x2dae25,_0x1be6d6,_0x1ec9ef);if(_0x426dd8){this['logger'][_0x5eb198(0x660)](this['instanceName']+'\x20('+this[_0x5eb198(0x634)][_0x5eb198(0x194)]+_0x5eb198(0x497)),!_0x340156[_0x5eb198(0x319)]&&_0x426dd8[_0x5eb198(0x293)]&&this[_0x5eb198(0x1b2)](_0x426dd8);let _0x134d23=await this[_0x5eb198(0x364)](_0x426dd8);_0x134d23&&await this['processblock'](_0x426dd8,_0x134d23,_0x426dd8['remoteJid']);}}catch(_0x89b8be){this[_0x5eb198(0x5a9)][_0x5eb198(0x60b)](this['instanceName']+'\x20('+this[_0x5eb198(0x634)][_0x5eb198(0x194)]+_0x5eb198(0x12f)+JSON[_0x5eb198(0xe8)](_0x89b8be,null,0x2));}}[a0_0x4a837a(0x27e)](_0x289046,_0x518d31='',_0x23a061={},_0x4c5487=!0x0){const _0xc1a6df=a0_0x4a837a;for(let _0x591c49 in _0x289046){let _0x5b29db=_0x4c5487?'_'+_0x591c49:''+_0x518d31+_0x591c49;typeof _0x289046[_0x591c49]==_0xc1a6df(0x32b)&&_0x289046[_0x591c49]!==null?this[_0xc1a6df(0x27e)](_0x289046[_0x591c49],_0x5b29db+'.',_0x23a061,!0x1):_0x23a061[_0x5b29db]=String(_0x289046[_0x591c49]);}return _0x23a061;}[a0_0x4a837a(0x63a)](_0x2d9f48){const _0xc14818=a0_0x4a837a;let _0x7a6e16={};for(let _0x2fe6ce of _0x2d9f48)typeof _0x2fe6ce[_0xc14818(0x372)]==_0xc14818(0x46f)&&typeof _0x2fe6ce[_0xc14818(0x3cb)]==_0xc14818(0x46f)&&(_0x7a6e16[_0x2fe6ce[_0xc14818(0x372)]]=_0x2fe6ce[_0xc14818(0x3cb)]);return _0x7a6e16;}async['NextBlock'](_0x51a538){const _0x29cf42=a0_0x4a837a;if(!this[_0x29cf42(0x11c)]?.['flowConfig'][_0x29cf42(0x258)]||_0x51a538[_0x29cf42(0x2e7)]!==_0x29cf42(0x10f)&&_0x51a538[_0x29cf42(0xa3)]==='')return null;let _0x12f2ae=_0x51a538[_0x29cf42(0x263)][_0x29cf42(0x14e)]||_0x29cf42(0x559);typeof _0x51a538[_0x29cf42(0x263)][_0x29cf42(0x5bb)]>'u'&&(_0x51a538['chatLog']['lastCondition']=!0x0);let _0x4c8250=_0x51a538[_0x29cf42(0x263)][_0x29cf42(0x5bb)];this[_0x29cf42(0x5a9)]['verbose'](this[_0x29cf42(0x2fb)]+'\x20('+this[_0x29cf42(0x634)][_0x29cf42(0x194)]+'):\x20lastBlockId:\x20'+_0x12f2ae+_0x29cf42(0x2cd)+_0x4c8250);let _0x5e9999=_0x12f2ae===_0x29cf42(0x559)?_0x51a538['blocks'][_0x29cf42(0x33c)](_0x22a883=>_0x22a883[_0x29cf42(0x295)]===_0x29cf42(0x559)):_0x51a538[_0x29cf42(0x358)][_0x29cf42(0x33c)](_0xc66f55=>_0xc66f55['_id'][_0x29cf42(0x42d)]()===_0x12f2ae[_0x29cf42(0x42d)]());if(!_0x5e9999)return this[_0x29cf42(0x5a9)][_0x29cf42(0x60b)](this['instanceName']+'\x20('+this['instance'][_0x29cf42(0x194)]+'):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20'+_0x12f2ae),null;let _0x12ff77={'_pushName':_0x51a538['chatLog'][_0x29cf42(0x23b)][_0x29cf42(0x2eb)],..._0x51a538[_0x29cf42(0x263)][_0x29cf42(0x33e)]},_0x58a405=null;if(_0x51a538[_0x29cf42(0xa3)]){let _0x1b79d0=_0x51a538['chatLog'][_0x29cf42(0x23b)][_0x29cf42(0x5c2)],_0xa88217=_0x51a538[_0x29cf42(0x4f7)][_0x29cf42(0x33c)](_0x5a9874=>_0x5a9874[_0x29cf42(0x566)]===_0x1b79d0);if(_0xa88217){let _0x33811a=_0xa88217[_0x29cf42(0x257)];if(_0x58a405=_0x51a538[_0x29cf42(0x358)][_0x29cf42(0x33c)](_0x5b87db=>_0x5b87db[_0x29cf42(0x50b)]===_0x33811a&&_0x5b87db['order']===0x1),_0x5e9999[_0x29cf42(0x292)][_0x29cf42(0x41a)]){let _0x3a08a6={'id':_0x51a538['waitingPoll_id'],'remoteJid':_0x51a538[_0x29cf42(0x397)],'fromMe':!0x0};await this[_0x29cf42(0x31c)](_0x3a08a6);}if(_0x5e9999[_0x29cf42(0x292)][_0x29cf42(0x41a)]&&_0x5e9999[_0x29cf42(0x292)][_0x29cf42(0x4cc)]){let _0x4946cc={'number':_0x51a538[_0x29cf42(0x397)],'options':{'delay':0x0},'textMessage':{'text':'*Pergunta*:\x20\x0a'+_0x51a538[_0x29cf42(0x5f8)]+_0x29cf42(0x341)+_0x1b79d0}};await this['textMessage'](_0x4946cc);}_0x51a538[_0x29cf42(0x2e7)]=_0x29cf42(0x10f),_0x51a538['waitingPoll_id']='',_0x51a538[_0x29cf42(0x5f8)]='',_0x51a538['waitingPoll_replyOptions']=[];}else{this[_0x29cf42(0x5a9)][_0x29cf42(0x660)](this[_0x29cf42(0x2fb)]+'\x20('+this[_0x29cf42(0x634)]['wuid']+'):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um');let _0x5f405d={'activatedCount':_0x51a538['chatLog'][_0x29cf42(0x48e)][_0x29cf42(0x370)](_0x1660aa=>String(_0x1660aa['blockId'])===String(_0x12f2ae))[_0x29cf42(0x58b)],'moreLogs':['Não\x20respondeu\x20com\x20a\x20enquete.']};if(_0x5e9999[_0x29cf42(0x292)][_0x29cf42(0x375)]){let _0x5aac4d={'number':_0x51a538[_0x29cf42(0x397)],'options':{'delay':0x0},'textMessage':{'text':_0x5e9999['uazapi'][_0x29cf42(0x375)]}};await this['textMessage'](_0x5aac4d);}if(_0x5e9999['maxActives']!==void 0x0&&_0x5f405d[_0x29cf42(0x131)]>=_0x5e9999[_0x29cf42(0x213)]){let _0x5bab4b=Date[_0x29cf42(0x2a2)](),_0x3ecb46=_0x5e9999['stopMinutesMaxActives']??0xa;isNaN(_0x3ecb46)&&(_0x3ecb46=0xa);let _0x44e071=_0x5bab4b+_0x3ecb46*0x3c*0x3e8;_0x5f405d[_0x29cf42(0x38b)]=_0x44e071,_0x5f405d[_0x29cf42(0x42f)][_0x29cf42(0x656)](_0x29cf42(0x437)),this[_0x29cf42(0xf0)](_0x51a538,_0x44e071),_0x51a538[_0x29cf42(0xa3)]='',_0x51a538[_0x29cf42(0x5f8)]='',_0x51a538[_0x29cf42(0x4f7)]=[];}return this[_0x29cf42(0x401)](_0x51a538,_0x5e9999,_0x5f405d,!0x0),null;}}if(_0x4c8250&&_0x5e9999['next_groupId']&&!_0x51a538['waitingPoll_id']){let _0x32fdcd=_0x51a538['blocks'][_0x29cf42(0x370)](_0x1728e6=>_0x1728e6[_0x29cf42(0x50b)][_0x29cf42(0x42d)]()===_0x5e9999[_0x29cf42(0x257)][_0x29cf42(0x42d)]())['sort']((_0x4ccb05,_0x203670)=>_0x4ccb05['order']-_0x203670['order']);_0x32fdcd[_0x29cf42(0x58b)]>0x0&&(_0x58a405=_0x32fdcd[0x0]);}if(!_0x58a405){let _0x47780d=_0x5e9999['groupId'],_0xda11ea=_0x51a538[_0x29cf42(0x358)][_0x29cf42(0x370)](_0x3c01be=>_0x3c01be[_0x29cf42(0x50b)]===_0x47780d&&_0x3c01be[_0x29cf42(0x50f)]>_0x5e9999['order'])['sort']((_0x4fcbe9,_0x2168b0)=>_0x4fcbe9['order']-_0x2168b0[_0x29cf42(0x50f)]);_0xda11ea['length']>0x0&&(_0x58a405=_0xda11ea[0x0]);}if(!_0x58a405)return _0x51a538[_0x29cf42(0x2e7)]=_0x29cf42(0x21c),null;_0x51a538['chatLog'][_0x29cf42(0x33e)]=_0x12ff77;let _0x79c306=JSON[_0x29cf42(0xc0)](JSON['stringify'](_0x58a405));return this[_0x29cf42(0x2ba)](_0x79c306,_0x51a538[_0x29cf42(0x263)]['realVariables']),_0x51a538[_0x29cf42(0x263)][_0x29cf42(0x14e)]=_0x79c306['_id'],_0x51a538[_0x29cf42(0x263)][_0x29cf42(0x5bb)]=!0x0,_0x79c306;}[a0_0x4a837a(0x602)](_0x5b09fa,_0x527af6){const _0x39fcb7=a0_0x4a837a;return _0x5b09fa[_0x39fcb7(0x522)](/\{\{([^}]+)\}\}/g,(_0x3280d5,_0xb60e34)=>_0x527af6[_0xb60e34]||'');}[a0_0x4a837a(0x2ba)](_0x17aacb,_0xf2a09c){const _0x4a292f=a0_0x4a837a;for(let _0x10e3ab in _0x17aacb)typeof _0x17aacb[_0x10e3ab]=='string'?_0x17aacb[_0x10e3ab]=this[_0x4a292f(0x602)](_0x17aacb[_0x10e3ab],_0xf2a09c):typeof _0x17aacb[_0x10e3ab]==_0x4a292f(0x32b)&&this['replaceVariablesInObject'](_0x17aacb[_0x10e3ab],_0xf2a09c);}async[a0_0x4a837a(0xf5)](_0x4747d6,_0x25c551){const _0x52fc0d=a0_0x4a837a;let _0x1ca6f6=_0x25c551['_id'];if(_0x4747d6[_0x52fc0d(0x263)]&&_0x4747d6[_0x52fc0d(0x263)][_0x52fc0d(0x48e)]){let _0x423e2a=_0x4747d6[_0x52fc0d(0x263)][_0x52fc0d(0x48e)][_0x52fc0d(0x370)](_0x1d66b5=>String(_0x1d66b5[_0x52fc0d(0x15a)])===String(_0x1ca6f6))['pop']();if(_0x423e2a&&_0x423e2a[_0x52fc0d(0x60b)]&&_0x25c551[_0x52fc0d(0x27c)])return _0x4747d6[_0x52fc0d(0x2e7)]=_0x52fc0d(0x21c),await this['saveConversationToDatabase'](_0x4747d6),null;}if(_0x25c551[_0x52fc0d(0x295)]==='uazapi'&&_0x25c551[_0x52fc0d(0x292)]['command']===_0x52fc0d(0x419)&&_0x4747d6[_0x52fc0d(0xa3)])return _0x4747d6['chatLog'][_0x52fc0d(0x14e)]=_0x1ca6f6,await this[_0x52fc0d(0x21f)](_0x4747d6),null;let _0x90fa2=await this['NextBlock'](_0x4747d6);if(_0x4747d6[_0x52fc0d(0x263)]&&_0x4747d6[_0x52fc0d(0x263)][_0x52fc0d(0x48e)]){let _0x1751ba=_0x4747d6[_0x52fc0d(0x263)][_0x52fc0d(0x48e)]['filter'](_0x4fd871=>String(_0x4fd871[_0x52fc0d(0x15a)])===String(_0x1ca6f6))[_0x52fc0d(0x58b)];if(_0x25c551['maxActives']!==void 0x0&&_0x1751ba>=_0x25c551[_0x52fc0d(0x213)]){let _0x562d62=Date[_0x52fc0d(0x2a2)](),_0x59f93d=_0x25c551[_0x52fc0d(0x5da)]??0xa;isNaN(_0x59f93d)&&(_0x59f93d=0xa);let _0x21843a=_0x562d62+_0x59f93d*0x3c*0x3e8,_0x2f216e={'newStoppedUntil':_0x21843a};return this[_0x52fc0d(0xf0)](_0x4747d6,_0x21843a),this[_0x52fc0d(0x401)](_0x4747d6,_0x25c551,_0x2f216e,!0x0),null;}}_0x90fa2&&_0x90fa2[_0x52fc0d(0x295)]!==_0x52fc0d(0x3a1)&&await this[_0x52fc0d(0x171)](_0x4747d6,_0x90fa2,_0x4747d6[_0x52fc0d(0x397)]),_0x90fa2||await this[_0x52fc0d(0x21f)](_0x4747d6),_0x90fa2&&_0x90fa2['type']==='save'&&(_0x4747d6[_0x52fc0d(0x263)][_0x52fc0d(0x14e)]=_0x1ca6f6,await this[_0x52fc0d(0x21f)](_0x4747d6));}async[a0_0x4a837a(0x171)](_0x4f9d49,_0x27467d,_0x36b03a){const _0x19798b=a0_0x4a837a;try{let _0xeb74fa=_0x27467d[_0x19798b(0x295)];this[_0x19798b(0x5a9)][_0x19798b(0x660)](this[_0x19798b(0x2fb)]+'\x20('+this[_0x19798b(0x634)][_0x19798b(0x194)]+_0x19798b(0x5bc)+_0xeb74fa);let _0x3628f0={'uazapi':()=>this[_0x19798b(0x506)](_0x4f9d49,_0x27467d,_0x36b03a),'save':()=>this['saveTextReply'](_0x4f9d49,_0x27467d),'stop':()=>this[_0x19798b(0x50c)](_0x4f9d49,_0x27467d),'condition':()=>this[_0x19798b(0x120)](_0x4f9d49,_0x27467d),'varedit':()=>this[_0x19798b(0x51e)](_0x4f9d49,_0x27467d),'apirequest':()=>this['processApiRequest'](_0x4f9d49,_0x27467d),'goToFlow':()=>this[_0x19798b(0x661)](_0x4f9d49,_0x27467d)}[_0xeb74fa];_0x3628f0&&await _0x3628f0();}catch(_0x209541){this[_0x19798b(0x5a9)][_0x19798b(0x60b)](this[_0x19798b(0x2fb)]+'\x20('+this[_0x19798b(0x634)][_0x19798b(0x194)]+_0x19798b(0x127)+JSON['stringify'](_0x209541,null,0x2));}}async[a0_0x4a837a(0x661)](_0x5e9e91,_0x1a52ca){const _0x56696b=a0_0x4a837a;if(this[_0x56696b(0x5a9)][_0x56696b(0x660)](this[_0x56696b(0x2fb)]+'\x20('+this[_0x56696b(0x634)]['wuid']+'):\x20Entrou\x20na\x20função\x20goToFlow'),!_0x5e9e91||!_0x1a52ca)return this['logger'][_0x56696b(0x60b)](this[_0x56696b(0x2fb)]+'\x20('+this[_0x56696b(0x634)][_0x56696b(0x194)]+_0x56696b(0x311)),null;await this[_0x56696b(0x401)](_0x5e9e91,_0x1a52ca,{},!0x0,!0x0),console[_0x56696b(0x4eb)](_0x56696b(0x510)),console[_0x56696b(0x4eb)](_0x1a52ca);let _0x567ed0=_0x1a52ca['goToFlow'];console[_0x56696b(0x4eb)](_0x56696b(0x31d),_0x567ed0),_0x5e9e91=await this[_0x56696b(0xad)](_0x567ed0,_0x5e9e91[_0x56696b(0x397)],_0x5e9e91['chatLog'][_0x56696b(0x33e)]),this['logger'][_0x56696b(0x660)](this[_0x56696b(0x2fb)]+'\x20('+this[_0x56696b(0x634)]['wuid']+_0x56696b(0x388));let _0xa52085=await this[_0x56696b(0x364)](_0x5e9e91);_0xa52085&&await this['processblock'](_0x5e9e91,_0xa52085,_0x5e9e91[_0x56696b(0x397)]);}async[a0_0x4a837a(0xad)](_0x3ccb29,_0x28b46c,_0x3ab641){const _0x59bac2=a0_0x4a837a;this['logger'][_0x59bac2(0x660)](this[_0x59bac2(0x2fb)]+'\x20('+this[_0x59bac2(0x634)][_0x59bac2(0x194)]+_0x59bac2(0x486));try{if(_0x3ccb29=await I[_0x59bac2(0x596)]({'owner':this['instance'][_0x59bac2(0x194)],'name':_0x3ccb29}),!_0x3ccb29)return this[_0x59bac2(0x5a9)]['error'](this[_0x59bac2(0x2fb)]+'\x20('+this[_0x59bac2(0x634)]['wuid']+'):\x20Flow\x20não\x20encontrado'),null;let _0x13038e=require(_0x59bac2(0x325))['ObjectId'],_0x2b2468=Date['now'](),_0x3733b2=_0x59bac2(0x559),_0x3a9631={},_0x5528d8={},_0x3c755a={..._0x3ccb29['_doc'],'chatLog':null},_0xd915eb={'lastReceivedMessage':_0x3a9631,'lastSendMessage':_0x5528d8,'lastBlockId':_0x3733b2,'lastCondition':!0x0,'realVariables':_0x3ab641};_0x3c755a[_0x59bac2(0x263)]=_0xd915eb,_0x3c755a[_0x59bac2(0x263)][_0x59bac2(0x33e)]={..._0x3ab641},delete _0x3c755a[_0x59bac2(0x3f7)],_0x3c755a[_0x59bac2(0x3f7)]=new _0x13038e(),_0x3c755a[_0x59bac2(0x5f2)]=_0x2b2468,_0x3c755a['status']=_0x59bac2(0x10f),_0x3c755a[_0x59bac2(0x397)]=_0x28b46c;let _0x262946=await J['create'](_0x3c755a);return this[_0x59bac2(0x5a9)]['verbose'](this[_0x59bac2(0x2fb)]+'\x20('+this[_0x59bac2(0x634)][_0x59bac2(0x194)]+_0x59bac2(0x5ac)),_0x262946?_0x3c755a:null;}catch(_0x55b8d0){throw this['logger'][_0x59bac2(0x60b)](this[_0x59bac2(0x2fb)]+'\x20('+this[_0x59bac2(0x634)][_0x59bac2(0x194)]+_0x59bac2(0x3df)+JSON[_0x59bac2(0xe8)](_0x55b8d0,null,0x2)),new g(_0x55b8d0[_0x59bac2(0x310)]);}}async[a0_0x4a837a(0x316)](_0x286429,_0x41db70){const _0x331694=a0_0x4a837a;let _0x5ee091,_0x441721;try{let _0x1f7981=_0x41db70[_0x331694(0x3f4)];if(!_0x1f7981||!_0x1f7981[_0x331694(0x351)]||!_0x1f7981[_0x331694(0x19f)])throw new Error(_0x331694(0x4f5));let _0x400da6={'method':_0x1f7981[_0x331694(0x19f)],'url':_0x1f7981[_0x331694(0x351)],'headers':_0x1f7981[_0x331694(0x53e)]||{},'data':_0x1f7981[_0x331694(0x327)]||{}};_0x5ee091=(await(0x0,ce[_0x331694(0x4d5)])(_0x400da6))[_0x331694(0x562)];let _0x331f98=_0x286429['chatLog'][_0x331694(0x33e)],_0x5cc47f=this[_0x331694(0x27e)](_0x5ee091);return Object[_0x331694(0x334)](_0x331f98,_0x5cc47f),_0x286429['chatLog'][_0x331694(0x33e)]=_0x331f98,_0x441721={'error':!0x1,'apiResponse':_0x5ee091},this[_0x331694(0x401)](_0x286429,_0x41db70,_0x441721),_0x5ee091;}catch(_0x53026d){console[_0x331694(0x60b)](_0x331694(0x557),_0x53026d),_0x53026d[_0x331694(0x350)]&&(_0x5ee091=_0x53026d[_0x331694(0x350)][_0x331694(0x562)]);let _0x145d5b=_0x286429[_0x331694(0x263)]['realVariables'],_0x2bcd02=this[_0x331694(0x27e)](_0x5ee091);return Object['assign'](_0x145d5b,_0x2bcd02),_0x286429[_0x331694(0x263)][_0x331694(0x33e)]=_0x145d5b,_0x441721={'error':!0x0,'errorLog':_0x53026d[_0x331694(0x42d)](),'apiResponse':_0x5ee091},this[_0x331694(0x401)](_0x286429,_0x41db70,_0x441721),{'success':!0x1};}}[a0_0x4a837a(0x4de)](_0x439c2c,_0x3f018d){const _0x5d9e51=a0_0x4a837a;let _0x34c80e=_0xa41299=>{const _0x183dfb=a0_0x22fc;let _0x2a7045=_0xa41299[_0x183dfb(0x522)](/[^0-9.,-]/g,'')[_0x183dfb(0x522)](',','.'),_0x3ee863=parseFloat(_0x2a7045);return isNaN(_0x3ee863)?null:_0x3ee863;},_0x3f5a9d=_0x3f018d[_0x5d9e51(0x3fa)],_0x2fdcbc=_0x3f018d['secondValue'];typeof _0x3f5a9d==_0x5d9e51(0x46f)&&(_0x3f5a9d=this[_0x5d9e51(0x602)](_0x3f5a9d,_0x439c2c[_0x5d9e51(0x263)][_0x5d9e51(0x33e)])??''),typeof _0x2fdcbc==_0x5d9e51(0x46f)&&(_0x2fdcbc=this[_0x5d9e51(0x602)](_0x2fdcbc,_0x439c2c[_0x5d9e51(0x263)][_0x5d9e51(0x33e)])??'');let _0x127e2a=null;if(!_0x3f018d[_0x5d9e51(0x666)])return null;switch(this['logger'][_0x5d9e51(0x660)](this[_0x5d9e51(0x2fb)]+'\x20('+this[_0x5d9e51(0x634)][_0x5d9e51(0x194)]+_0x5d9e51(0x2a7)+_0x3f5a9d),this[_0x5d9e51(0x5a9)][_0x5d9e51(0x660)](this['instanceName']+'\x20('+this[_0x5d9e51(0x634)]['wuid']+_0x5d9e51(0x47d)+_0x2fdcbc),_0x3f018d[_0x5d9e51(0x666)]){case'+':case'-':case'*':case'/':let _0x35b14b=_0x34c80e(_0x3f5a9d),_0x373bbb=_0x34c80e(_0x2fdcbc||'0');if(_0x35b14b===null)return null;switch(_0x3f018d[_0x5d9e51(0x666)]){case'+':_0x127e2a=_0x35b14b+(_0x373bbb??0x0);break;case'-':_0x127e2a=_0x35b14b-(_0x373bbb??0x0);break;case'*':_0x127e2a=_0x35b14b*(_0x373bbb??0x1);break;case'/':_0x373bbb!==0x0&&(_0x127e2a=_0x35b14b/(_0x373bbb??0x1));break;}break;case _0x5d9e51(0x3ef):case'findAndReplaceRegex':let _0x81365e=_0x2fdcbc,_0x5c32f4=_0x3f018d[_0x5d9e51(0x3ab)];if(typeof _0x5c32f4==_0x5d9e51(0x46f)&&(_0x5c32f4=this['replaceVariables'](_0x5c32f4,_0x439c2c[_0x5d9e51(0x263)][_0x5d9e51(0x33e)])??''),_0x81365e&&_0x5c32f4!==void 0x0){let _0x3762c2=_0x3f018d[_0x5d9e51(0x666)]===_0x5d9e51(0x3ef)?new RegExp(_0x81365e[_0x5d9e51(0x522)](/[-\/\\^$*+?.()|[\]{}]/g,_0x5d9e51(0x157)),'g'):new RegExp(_0x81365e,'g');_0x127e2a=_0x3f5a9d['replace'](_0x3762c2,_0x5c32f4);}else console[_0x5d9e51(0x558)]('Valor\x20de\x20find\x20ou\x20replace\x20ausente');break;case _0x5d9e51(0x585):_0x127e2a=_0x2fdcbc;break;case _0x5d9e51(0x184):let _0x5d180a=_0x3f5a9d['match'](new RegExp(_0x2fdcbc||''));_0x127e2a=_0x5d180a?_0x5d180a[0x0]:'';break;case _0x5d9e51(0x1be):_0x127e2a=_0x3f5a9d[_0x5d9e51(0x462)](0x0,parseInt(_0x2fdcbc||'0'));break;case'truncatedtoEnd':let _0x21f68f=parseInt(_0x2fdcbc||'0');_0x127e2a=_0x3f5a9d[_0x5d9e51(0x462)](_0x3f5a9d[_0x5d9e51(0x58b)]-_0x21f68f);break;case _0x5d9e51(0x644):let _0x3d7027=_0x34c80e(_0x3f5a9d),_0x17e14e=parseInt(_0x2fdcbc||'0');_0x17e14e=Math['abs'](_0x17e14e),_0x3d7027!==null?_0x127e2a=_0x3d7027[_0x5d9e51(0x235)](_0x5d9e51(0x262),{'minimumFractionDigits':_0x17e14e,'maximumFractionDigits':_0x17e14e}):(console['warn']('Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20'+_0x3f5a9d),_0x127e2a=null);break;case _0x5d9e51(0xc3):let _0x2dc5d3=_0x34c80e(_0x3f5a9d);_0x2dc5d3!==null?_0x127e2a=_0x2dc5d3[_0x5d9e51(0x235)](_0x5d9e51(0x262),{'style':_0x5d9e51(0x4b1),'currency':_0x5d9e51(0x543)}):(console[_0x5d9e51(0x558)](_0x5d9e51(0xd1)+_0x3f5a9d),_0x127e2a=null);break;case _0x5d9e51(0x3fd):_0x127e2a=_0x3f5a9d[_0x5d9e51(0x19c)]();break;case _0x5d9e51(0x237):_0x127e2a=_0x3f5a9d[_0x5d9e51(0x42a)]();break;case _0x5d9e51(0x1ae):_0x127e2a=_0x3f5a9d[_0x5d9e51(0x24d)]('\x20')['map'](_0x548892=>_0x548892[_0x5d9e51(0x277)](0x0)['toUpperCase']()+_0x548892[_0x5d9e51(0x462)](0x1)[_0x5d9e51(0x42a)]())[_0x5d9e51(0x31f)]('\x20');break;case _0x5d9e51(0x3b6):_0x127e2a=_0x3f5a9d['trim']();break;default:_0x127e2a=_0x3f5a9d;}return _0x127e2a!==null?_0x127e2a[_0x5d9e51(0x42d)]():null;}async['processvaredits'](_0x17d195,_0x507bdb){const _0x1d90dd=a0_0x4a837a;try{let _0xd87b5e=_0x17d195[_0x1d90dd(0x54a)]?.[_0x1d90dd(0x370)](_0x1949e1=>_0x1949e1[_0x1d90dd(0x15a)]===_0x507bdb[_0x1d90dd(0x3f7)]?.[_0x1d90dd(0x42d)]())||[],_0x3e82a3=_0x507bdb[_0x1d90dd(0x5ad)],_0x27377d=null,_0x4f1d23=[],_0x137b7f=_0x17d195[_0x1d90dd(0x263)][_0x1d90dd(0x33e)][_0x3e82a3];_0x4f1d23[_0x1d90dd(0x656)](_0x1d90dd(0x278)+_0x137b7f+'\x22');for(let _0x2b5d07 of _0xd87b5e){_0x2b5d07[_0x1d90dd(0x3fa)]=_0x137b7f,_0x27377d=_0x2b5d07['firstValue'];let _0x4913c6;try{_0x4913c6=this[_0x1d90dd(0x4de)](_0x17d195,_0x2b5d07);}catch(_0x4b99e5){console['error']('Erro\x20ao\x20aplicar\x20varedit:\x20'+_0x4b99e5[_0x1d90dd(0x310)]);continue;}if(_0x4913c6!==null){let _0xc45b86='Operador:\x20\x22'+_0x2b5d07[_0x1d90dd(0x666)]+'\x22',_0x1763e5=['toBRL',_0x1d90dd(0x3fd),_0x1d90dd(0x237),_0x1d90dd(0x1ae),'trimmed'];_0x2b5d07[_0x1d90dd(0x666)]===_0x1d90dd(0x3ef)||_0x2b5d07[_0x1d90dd(0x666)]===_0x1d90dd(0x119)?_0xc45b86+=_0x1d90dd(0x5ca)+_0x2b5d07[_0x1d90dd(0x48a)]+_0x1d90dd(0x65d)+_0x2b5d07[_0x1d90dd(0x3ab)]+'\x22':!_0x1763e5[_0x1d90dd(0x1a9)](_0x2b5d07[_0x1d90dd(0x666)])&&_0x2b5d07[_0x1d90dd(0x48a)]!==null&&_0x2b5d07[_0x1d90dd(0x48a)]!==void 0x0&&(_0xc45b86+=',\x20valor\x20passado:\x20\x22'+_0x2b5d07['secondValue']+'\x22'),_0xc45b86+=',\x20resultado:\x20'+_0x4913c6+'.',_0x4f1d23[_0x1d90dd(0x656)](_0xc45b86);}_0x4913c6!==null&&(_0x137b7f=_0x4913c6);}if(_0x17d195[_0x1d90dd(0x263)][_0x1d90dd(0x33e)]&&_0x507bdb['saveVariable']){_0x17d195[_0x1d90dd(0x263)][_0x1d90dd(0x33e)][_0x507bdb[_0x1d90dd(0x5ad)]]=_0x137b7f;let _0x30849f={'variable':_0x507bdb[_0x1d90dd(0x5ad)],'oldValue':_0x27377d,'newValue':_0x137b7f,'moreLogs':_0x4f1d23};try{this[_0x1d90dd(0x401)](_0x17d195,_0x507bdb,_0x30849f);}catch(_0x4212cd){console[_0x1d90dd(0x60b)](_0x1d90dd(0x50d)+_0x4212cd[_0x1d90dd(0x310)]);}}return _0x3e82a3;}catch(_0x479f51){return console[_0x1d90dd(0x60b)]('Erro\x20inesperado\x20em\x20processvaredits:\x20'+_0x479f51[_0x1d90dd(0x310)]),null;}}async['processConditions'](_0x3fb8d6,_0x240b44){const _0x37daf0=a0_0x4a837a;try{let _0x3ac666=[],_0x209875=_0x3fb8d6[_0x37daf0(0x29b)][_0x37daf0(0x370)](_0x328949=>_0x328949['blockId']===_0x240b44['_id']['toString']()),_0x259bda=null,_0x45ade8=!0x1;for(let _0xf4e2c8 of _0x209875){let _0x442a36=this['evaluateCondition'](_0x3fb8d6,_0xf4e2c8);_0x3ac666[_0x37daf0(0x656)](_0x37daf0(0x3f5)+_0xf4e2c8[_0x37daf0(0x3fa)]+_0x37daf0(0x226)+_0xf4e2c8[_0x37daf0(0x377)]+_0x37daf0(0x329)+_0xf4e2c8[_0x37daf0(0x48a)]+_0x37daf0(0x62d)+_0x442a36),_0x259bda===null?_0x259bda=_0x442a36:_0xf4e2c8[_0x37daf0(0x1d4)]===_0x37daf0(0x411)?(_0x259bda=_0x259bda&&_0x442a36,_0x442a36||(_0x45ade8=!0x0)):_0xf4e2c8[_0x37daf0(0x1d4)]==='or'&&(_0x45ade8||(_0x259bda=_0x259bda||_0x442a36));}_0x259bda===null&&(_0x259bda=!0x0);let _0x5c2715={'moreLogs':_0x3ac666};_0x3fb8d6[_0x37daf0(0x263)][_0x37daf0(0x5bb)]=_0x259bda,await this['updateConversation'](_0x3fb8d6,_0x240b44,_0x5c2715);}catch(_0x5c535d){this[_0x37daf0(0x5a9)][_0x37daf0(0x60b)](this['instanceName']+'\x20('+this['instance'][_0x37daf0(0x194)]+_0x37daf0(0x34c)+JSON[_0x37daf0(0xe8)](_0x5c535d,null,0x2));}}['evaluateCondition'](_0x231a6b,_0x2e33c7){const _0x4e0afa=a0_0x4a837a;let _0x468769=_0x2e33c7[_0x4e0afa(0x3fa)],_0x1ac383=_0x2e33c7[_0x4e0afa(0x48a)];typeof _0x468769==_0x4e0afa(0x46f)&&(_0x468769=this[_0x4e0afa(0x602)](_0x468769,_0x231a6b['chatLog'][_0x4e0afa(0x33e)])??''),typeof _0x1ac383==_0x4e0afa(0x46f)&&(_0x1ac383=this[_0x4e0afa(0x602)](_0x1ac383,_0x231a6b[_0x4e0afa(0x263)][_0x4e0afa(0x33e)])??'');try{switch(_0x2e33c7['expression']){case _0x4e0afa(0x35a):return _0x468769===_0x1ac383;case _0x4e0afa(0x2e5):return _0x468769!==_0x1ac383;case _0x4e0afa(0x24f):return _0x468769[_0x4e0afa(0x1a9)](_0x1ac383);case'notContains':return!_0x468769[_0x4e0afa(0x1a9)](_0x1ac383);case _0x4e0afa(0x13c):return parseFloat(_0x468769)>parseFloat(_0x1ac383);case _0x4e0afa(0x523):return parseFloat(_0x468769)<parseFloat(_0x1ac383);case'notEmpty':return _0x468769!=='';case _0x4e0afa(0x106):return _0x468769==='';case _0x4e0afa(0x66d):return new RegExp(_0x1ac383)[_0x4e0afa(0x30f)](_0x468769);case _0x4e0afa(0x4e9):return!new RegExp(_0x1ac383)[_0x4e0afa(0x30f)](_0x468769);default:return!0x1;}}catch(_0x1b3b10){return console[_0x4e0afa(0x60b)](_0x4e0afa(0x1a2)+_0x1b3b10),!0x1;}}[a0_0x4a837a(0x320)](_0x16ebdf){const _0x414374=a0_0x4a837a;let _0x4712c5=!0x0,_0x11cac2=null;for(let _0xa7dd5e of _0x16ebdf){let _0x340524=this['evaluateConditionTest'](_0xa7dd5e);if(_0x11cac2==='or'&&_0x340524){_0x4712c5=!0x0;break;}if(_0x11cac2==='and'&&!_0x340524){_0x4712c5=!0x1;break;}_0x11cac2=_0xa7dd5e[_0x414374(0x1d4)];}return _0x4712c5;}[a0_0x4a837a(0x2b2)](_0xffb481){const _0x4ede82=a0_0x4a837a;let _0x2a20b9=_0xffb481['firstValue'],_0x39fb11=_0xffb481[_0x4ede82(0x48a)];try{switch(_0xffb481['expression']){case _0x4ede82(0x35a):return String(_0x2a20b9)===String(_0x39fb11);case _0x4ede82(0x2e5):return String(_0x2a20b9)!==String(_0x39fb11);case _0x4ede82(0x24f):return String(_0x2a20b9)[_0x4ede82(0x1a9)](String(_0x39fb11));case _0x4ede82(0x230):return!String(_0x2a20b9)[_0x4ede82(0x1a9)](String(_0x39fb11));case _0x4ede82(0x13c):return parseFloat(String(_0x2a20b9))>parseFloat(String(_0x39fb11));case _0x4ede82(0x523):return parseFloat(String(_0x2a20b9))<parseFloat(String(_0x39fb11));case _0x4ede82(0x2d5):return String(_0x2a20b9)!=='';case _0x4ede82(0x106):return String(_0x2a20b9)==='';case'matchRegex':return new RegExp(String(_0x39fb11))[_0x4ede82(0x30f)](String(_0x2a20b9));case _0x4ede82(0x4e9):return!new RegExp(String(_0x39fb11))[_0x4ede82(0x30f)](String(_0x2a20b9));default:return!0x1;}}catch(_0x49b29d){return console[_0x4ede82(0x60b)](_0x4ede82(0x1a2)+_0x49b29d),!0x1;}}async[a0_0x4a837a(0x582)](_0x29ce3b,_0x1be9d8){const _0x4b0de4=a0_0x4a837a;if(this[_0x4b0de4(0x5a9)]['verbose'](this[_0x4b0de4(0x2fb)]+'\x20('+this[_0x4b0de4(0x634)][_0x4b0de4(0x194)]+_0x4b0de4(0x546)),!_0x29ce3b||!_0x1be9d8)return this[_0x4b0de4(0x5a9)][_0x4b0de4(0x60b)](this[_0x4b0de4(0x2fb)]+'\x20('+this[_0x4b0de4(0x634)][_0x4b0de4(0x194)]+_0x4b0de4(0x311)),null;let _0x20951a=_0x1be9d8['saveVariable'],_0x50c7dd=_0x29ce3b['chatLog']['lastReceivedMessage']['text']||_0x29ce3b['chatLog'][_0x4b0de4(0x23b)]['caption']||_0x29ce3b[_0x4b0de4(0x263)][_0x4b0de4(0x23b)]['vote'];try{_0x29ce3b['chatLog'][_0x4b0de4(0x33e)]||(_0x29ce3b['chatLog']['realVariables']={});let _0x27fcbf=_0x29ce3b[_0x4b0de4(0x263)][_0x4b0de4(0x33e)][_0x20951a];_0x29ce3b[_0x4b0de4(0x263)][_0x4b0de4(0x33e)][_0x20951a]=_0x50c7dd;let _0x52d45b={'variable':_0x20951a,'oldValue':_0x27fcbf,'newValue':_0x50c7dd};this[_0x4b0de4(0x401)](_0x29ce3b,_0x1be9d8,_0x52d45b),this[_0x4b0de4(0x5a9)][_0x4b0de4(0x660)](this['instanceName']+'\x20('+this[_0x4b0de4(0x634)]['wuid']+_0x4b0de4(0x30b));}catch(_0x28cbf4){let _0x122b2f={'error':!0x0,'errorLog':_0x28cbf4[_0x4b0de4(0x42d)]()};return this['updateConversation'](_0x29ce3b,_0x1be9d8,_0x122b2f),this[_0x4b0de4(0x5a9)][_0x4b0de4(0x60b)](this[_0x4b0de4(0x2fb)]+'\x20('+this['instance'][_0x4b0de4(0x194)]+'):\x20Erro\x20durante\x20a\x20atualização:\x20'+JSON['stringify'](_0x28cbf4,null,0x2)),null;}}async[a0_0x4a837a(0x50c)](_0x218658,_0x30c324){const _0x28665b=a0_0x4a837a;if(this[_0x28665b(0x5a9)][_0x28665b(0x660)](this[_0x28665b(0x2fb)]+'\x20('+this['instance'][_0x28665b(0x194)]+_0x28665b(0x4e4)),!_0x218658||!_0x30c324)return this[_0x28665b(0x5a9)][_0x28665b(0x60b)](this[_0x28665b(0x2fb)]+'\x20('+this[_0x28665b(0x634)]['wuid']+_0x28665b(0x311)),null;let _0x41fd12=Date[_0x28665b(0x2a2)](),_0x51a1a1=parseInt(_0x30c324[_0x28665b(0x261)],0xa);if(isNaN(_0x51a1a1))return this[_0x28665b(0x5a9)][_0x28665b(0x60b)](this['instanceName']+'\x20('+this[_0x28665b(0x634)][_0x28665b(0x194)]+'):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número'),null;let _0x22af96={'newStoppedUntil':_0x41fd12+_0x51a1a1*0x3c*0x3e8};return await this['updateConversation'](_0x218658,_0x30c324,_0x22af96,!0x0),null;}async[a0_0x4a837a(0x506)](_0x5c5303,_0x5ea6b2,_0x71b2c2){const _0x44ff67=a0_0x4a837a;try{switch(_0x5ea6b2['uazapi'][_0x44ff67(0x613)]){case _0x44ff67(0xa5):await this[_0x44ff67(0x5f0)](_0x5c5303,_0x5ea6b2,_0x71b2c2);break;case _0x44ff67(0x335):await this[_0x44ff67(0x25d)](_0x5c5303,_0x5ea6b2,_0x71b2c2);break;case _0x44ff67(0x5eb):await this['uazapiSendLocation'](_0x5c5303,_0x5ea6b2,_0x71b2c2);break;case _0x44ff67(0xed):await this[_0x44ff67(0x591)](_0x5c5303,_0x5ea6b2,_0x71b2c2);break;case'sendContact':await this['uazapiSendContact'](_0x5c5303,_0x5ea6b2,_0x71b2c2);break;case _0x44ff67(0x419):await this[_0x44ff67(0x38e)](_0x5c5303,_0x5ea6b2,_0x71b2c2);break;case _0x44ff67(0x31c):await this['uazapiDeleteMessage'](_0x5c5303,_0x5ea6b2,_0x71b2c2);break;default:this[_0x44ff67(0x5a9)][_0x44ff67(0x60b)](this[_0x44ff67(0x2fb)]+'\x20('+this[_0x44ff67(0x634)][_0x44ff67(0x194)]+_0x44ff67(0x26a)+_0x5ea6b2['uazapi'][_0x44ff67(0x613)]);}}catch(_0x3ea7ea){this[_0x44ff67(0x5a9)]['error'](this[_0x44ff67(0x2fb)]+'\x20('+this[_0x44ff67(0x634)][_0x44ff67(0x194)]+_0x44ff67(0x3a3)+JSON['stringify'](_0x3ea7ea,null,0x2));}}async[a0_0x4a837a(0x401)](_0x59912b,_0xafd50,_0x54d0f0,_0x477e26=!0x1,_0x46b04a=!0x1){const _0x110728=a0_0x4a837a;_0x59912b[_0x110728(0x263)]['blockLogs']||(_0x59912b['chatLog'][_0x110728(0x48e)]=[]);let _0x14bb4f=(_0x59912b[_0x110728(0x263)][_0x110728(0x48e)]?.[_0x110728(0x58b)]??0x0)+0x1,_0x3922a6=_0x59912b['chatLog']['blockLogs'][_0x110728(0x370)](_0x491629=>String(_0x491629[_0x110728(0x15a)])===String(_0xafd50[_0x110728(0x3f7)]))[_0x110728(0x58b)]+0x1,_0x5b3139=_0x54d0f0?.[_0x110728(0xe6)]??Date[_0x110728(0x2a2)](),_0x26d5bf=_0x54d0f0?.[_0x110728(0x60b)]?_0x54d0f0['errorLog']??_0x54d0f0[_0x110728(0x60b)][_0x110728(0x42d)]():void 0x0,_0x3d4509={'onTime':_0x5b3139,'blockId':_0xafd50[_0x110728(0x3f7)],'order':_0x14bb4f,'activatedCount':_0x3922a6,'error':_0x54d0f0?.['error']??!0x1,'messageId':_0x54d0f0?.[_0x110728(0x367)],'apiResponse':_0x54d0f0?.[_0x110728(0x14c)],'apiResponseString':_0x54d0f0?.[_0x110728(0x14c)]?JSON[_0x110728(0xe8)](_0x54d0f0?.[_0x110728(0x14c)]):void 0x0,'variable':_0x54d0f0?.[_0x110728(0xff)],'oldValue':_0x54d0f0?.['oldValue'],'newValue':_0x54d0f0?.[_0x110728(0x51b)],'newStoppedUntil':_0x54d0f0?.[_0x110728(0x38b)],'moreLogs':_0x54d0f0?.[_0x110728(0x42f)],'errorLog':_0x26d5bf};if(_0x54d0f0[_0x110728(0x42f)]&&_0x54d0f0[_0x110728(0x42f)][_0x110728(0x58b)]>0x0){let _0x35aa63=_0x54d0f0[_0x110728(0x42f)][_0x110728(0x227)](_0x4e2ca3=>this[_0x110728(0x62f)](_0x4e2ca3,_0x59912b[_0x110728(0x263)][_0x110728(0x33e)]));_0x3d4509[_0x110728(0x42f)]=_0x35aa63;}_0x59912b[_0x110728(0x263)][_0x110728(0x33e)]||(_0x59912b[_0x110728(0x263)]['realVariables']={}),_0x59912b[_0x110728(0x263)][_0x110728(0x33e)]['_activatedCount']=String(_0x3922a6),_0x59912b[_0x110728(0x263)][_0x110728(0x33e)][_0x110728(0x56c)]=String(_0x54d0f0[_0x110728(0x60b)]??!0x1),_0x59912b['chatLog']['blockLogs'][_0x110728(0x656)](_0x3d4509),_0x59912b[_0x110728(0x263)][_0x110728(0x14e)]=_0xafd50[_0x110728(0x3f7)]['toString'](),_0x59912b['chatLog'][_0x110728(0x62c)]&&(_0x59912b[_0x110728(0x263)]['lastSendMessage']=_0x59912b[_0x110728(0x263)][_0x110728(0x62c)]),_0x59912b['chatLog'][_0x110728(0x23b)]&&(_0x59912b[_0x110728(0x263)][_0x110728(0x23b)]=_0x59912b[_0x110728(0x263)][_0x110728(0x23b)]),_0x59912b['chatLog'][_0x110728(0x5bb)]&&(_0x59912b['chatLog'][_0x110728(0x5bb)]=_0x59912b[_0x110728(0x263)][_0x110728(0x5bb)]),_0x46b04a&&(_0x59912b[_0x110728(0x2e7)]=_0x110728(0x21c)),_0x477e26?this[_0x110728(0x21f)](_0x59912b):this[_0x110728(0xf5)](_0x59912b,_0xafd50);}[a0_0x4a837a(0x62f)](_0x19a4a7,_0x3ed32d){const _0xfd9247=a0_0x4a837a;return _0x19a4a7[_0xfd9247(0x522)](/\{\{([^}]+)\}\}/g,(_0x2fb235,_0x3aa4fa)=>_0x3ed32d[_0x3aa4fa]?'{{'+_0x3aa4fa+'}}\x20->\x20\x22'+_0x3ed32d[_0x3aa4fa]+'\x22':'{{'+_0x3aa4fa+'}}\x20->\x20valor\x20não\x20encontrado');}async['saveConversationToDatabase'](_0x5f3eeb){const _0x5bae76=a0_0x4a837a;try{let _0x29373a=Object[_0x5bae76(0x44f)](_0x5f3eeb[_0x5bae76(0x263)][_0x5bae76(0x33e)])[_0x5bae76(0x227)](([_0x438133,_0x2b169d])=>({'name':_0x438133,'value':_0x2b169d})),_0x488da8=await J[_0x5bae76(0x466)]({'_id':_0x5f3eeb['_id']},{'$set':{'chatLog.lastBlockId':_0x5f3eeb[_0x5bae76(0x263)][_0x5bae76(0x14e)],'blocks':_0x5f3eeb[_0x5bae76(0x358)],'chatLog.lastSendMessage':_0x5f3eeb['chatLog'][_0x5bae76(0x62c)],'chatLog.lastReceivedMessage':_0x5f3eeb['chatLog'][_0x5bae76(0x23b)],'chatLog.lastCondition':_0x5f3eeb[_0x5bae76(0x263)][_0x5bae76(0x5bb)],'chatLog.chatVariables':_0x29373a,'chatLog.realVariables':_0x5f3eeb['chatLog'][_0x5bae76(0x33e)],'status':_0x5f3eeb[_0x5bae76(0x2e7)],'chatLog.blockLogs':_0x5f3eeb[_0x5bae76(0x263)][_0x5bae76(0x48e)],'waitingPoll_id':_0x5f3eeb[_0x5bae76(0xa3)],'waitingPoll_name':_0x5f3eeb[_0x5bae76(0x5f8)],'waitingPoll_replyOptions':_0x5f3eeb[_0x5bae76(0x4f7)]}},{'new':!0x0});if(_0x488da8){this[_0x5bae76(0x5a9)][_0x5bae76(0x660)](this[_0x5bae76(0x2fb)]+'\x20('+this[_0x5bae76(0x634)][_0x5bae76(0x194)]+'):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20'+_0x488da8[_0x5bae76(0x3f7)]);try{let _0x11f62c=['nome',_0x5bae76(0x646),'email',_0x5bae76(0x16f),_0x5bae76(0x2e7),_0x5bae76(0x576),_0x5bae76(0x649),_0x5bae76(0x49d)];if(!this[_0x5bae76(0x11c)]&&(await this[_0x5bae76(0x169)](),!this[_0x5bae76(0x11c)]))throw new Error(_0x5bae76(0x1f6));let _0xfd1b45=this[_0x5bae76(0x11c)]?.[_0x5bae76(0x2a4)][_0x5bae76(0x227)](_0x53bfee=>_0x53bfee[_0x5bae76(0x372)]),_0x5453ea={};Object['entries'](_0x5f3eeb[_0x5bae76(0x263)][_0x5bae76(0x33e)])[_0x5bae76(0x2c9)](([_0x5e931e,_0x5d9c04])=>{const _0x2cad17=_0x5bae76;_0x11f62c['includes'](_0x5e931e)&&(_0x5e931e===_0x2cad17(0x49d)&&typeof _0x5d9c04=='string'?_0x5453ea[_0x5e931e]=_0x5d9c04[_0x2cad17(0x24d)](',')[_0x2cad17(0x227)](_0x4edf7d=>_0x4edf7d['trim']())[_0x2cad17(0x370)](_0x509930=>_0x509930!==''):_0x5453ea[_0x5e931e]=_0x5d9c04);});let _0x3ce7e6=_0x5f3eeb['chatLog']['blockLogs'][_0x5f3eeb[_0x5bae76(0x263)][_0x5bae76(0x48e)][_0x5bae76(0x58b)]-0x1];if(_0x3ce7e6){let _0x55f34a=_0x3ce7e6['newStoppedUntil'];_0x55f34a!==void 0x0&&(_0x5453ea[_0x5bae76(0xc4)]=_0x55f34a[_0x5bae76(0x42d)]());}let _0x3e3f28=_0x29373a[_0x5bae76(0x370)](_0x3e451e=>_0xfd1b45[_0x5bae76(0x1a9)](_0x3e451e['name']));this[_0x5bae76(0x5a9)][_0x5bae76(0x660)](this[_0x5bae76(0x2fb)]+'\x20('+this['instance'][_0x5bae76(0x194)]+_0x5bae76(0x527)),this['logger'][_0x5bae76(0x660)](_0x5453ea),this[_0x5bae76(0x5a9)][_0x5bae76(0x660)](this['instanceName']+'\x20('+this['instance'][_0x5bae76(0x194)]+_0x5bae76(0x2d0)),this[_0x5bae76(0x5a9)][_0x5bae76(0x660)](_0x3e3f28);let _0x798ec7=_0x3e3f28[_0x5bae76(0x227)](_0x1944b7=>{const _0x58e644=_0x5bae76;let _0x2f6529=this[_0x58e644(0x11c)]?.[_0x58e644(0x2a4)][_0x58e644(0x33c)](_0x37d1aa=>_0x37d1aa[_0x58e644(0x372)]===_0x1944b7[_0x58e644(0x372)]);if(!_0x2f6529)throw new Error(_0x58e644(0x18a)+_0x1944b7[_0x58e644(0x372)]);return{'_id':_0x2f6529['_id'],'value':_0x1944b7[_0x58e644(0x3cb)]};});this['logger'][_0x5bae76(0x660)](this[_0x5bae76(0x2fb)]+'\x20('+this[_0x5bae76(0x634)][_0x5bae76(0x194)]+_0x5bae76(0x460)),this[_0x5bae76(0x5a9)][_0x5bae76(0x660)](_0x798ec7),await this[_0x5bae76(0x5a6)](_0x5f3eeb[_0x5bae76(0x397)],_0x5453ea,_0x798ec7);}catch(_0x8a2461){this['logger']['error'](this[_0x5bae76(0x2fb)]+'\x20('+this[_0x5bae76(0x634)][_0x5bae76(0x194)]+'):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20'+JSON[_0x5bae76(0xe8)](_0x8a2461));}}else this[_0x5bae76(0x5a9)][_0x5bae76(0x60b)](this[_0x5bae76(0x2fb)]+'\x20('+this[_0x5bae76(0x634)][_0x5bae76(0x194)]+_0x5bae76(0x667));}catch(_0x424585){this[_0x5bae76(0x5a9)][_0x5bae76(0x60b)](this[_0x5bae76(0x2fb)]+'\x20('+this['instance'][_0x5bae76(0x194)]+_0x5bae76(0x352)+JSON[_0x5bae76(0xe8)](_0x424585));}}async['saveChatVariables'](_0xa60c3f,_0x1d287e,_0x15d223){const _0x483bd4=a0_0x4a837a;try{let _0x178551={'leadInfo.leadnome':_0x1d287e[_0x483bd4(0x13d)],'leadInfo.nomecompleto':_0x1d287e[_0x483bd4(0x646)],'leadInfo.email':_0x1d287e[_0x483bd4(0x2ea)],'leadInfo.cpf':_0x1d287e[_0x483bd4(0x16f)],'leadInfo.status':_0x1d287e[_0x483bd4(0x2e7)],'leadInfo.notas':_0x1d287e[_0x483bd4(0x576)],'leadInfo.responsavelid':_0x1d287e[_0x483bd4(0x649)],'leadInfo.tags':_0x1d287e[_0x483bd4(0x49d)],'leadInfo.customFields':_0x15d223};if('desativadoFluxoAte'in _0x1d287e){let _0x2f6914=_0x1d287e[_0x483bd4(0xc4)];_0x178551['leadInfo.desativadoFluxoAte']=_0x2f6914?Number(_0x2f6914):null;}let _0xb333e8=await this['repository'][_0x483bd4(0xe2)]['updateOne']({'where':{'_id':_0xa60c3f,'owner':this[_0x483bd4(0x634)]['wuid']}},_0x178551);_0xb333e8?(this[_0x483bd4(0x5a9)][_0x483bd4(0x660)](this['instanceName']+'\x20('+this[_0x483bd4(0x634)][_0x483bd4(0x194)]+_0x483bd4(0x28d)+_0xb333e8['_id']),F(this[_0x483bd4(0x2fb)],_0x483bd4(0x15c),{'chat':_0xb333e8})):this['logger'][_0x483bd4(0x60b)](this[_0x483bd4(0x2fb)]+'\x20('+this[_0x483bd4(0x634)][_0x483bd4(0x194)]+_0x483bd4(0x2f5));}catch(_0x1a4938){this['logger'][_0x483bd4(0x60b)](this[_0x483bd4(0x2fb)]+'\x20('+this[_0x483bd4(0x634)][_0x483bd4(0x194)]+_0x483bd4(0x570)+JSON[_0x483bd4(0xe8)](_0x1a4938,null,0x2));}}async['updateStopChat'](_0x195051,_0x2cc248){const _0x910aeb=a0_0x4a837a;this['logger'][_0x910aeb(0x660)](this['instanceName']+'\x20('+this[_0x910aeb(0x634)][_0x910aeb(0x194)]+_0x910aeb(0x1b5)+_0x2cc248);try{let _0x5446cc=await this['repository'][_0x910aeb(0xe2)][_0x910aeb(0x3ed)]({'where':{'_id':_0x195051['remoteJid'],'owner':_0x195051[_0x910aeb(0x404)]}},{'leadInfo.desativadoFluxoAte':_0x2cc248});this[_0x910aeb(0x5a9)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x910aeb(0x194)]+_0x910aeb(0x653)+_0x195051['_id']),this[_0x910aeb(0x5a9)]['verbose'](this[_0x910aeb(0x2fb)]+'\x20('+this[_0x910aeb(0x634)][_0x910aeb(0x194)]+_0x910aeb(0x1b5)+JSON[_0x910aeb(0xe8)](_0x5446cc,null,0x2)),_0x5446cc&&F(this[_0x910aeb(0x2fb)],_0x910aeb(0x15c),{'chat':_0x5446cc});}catch(_0x149751){this[_0x910aeb(0x5a9)]['error'](this[_0x910aeb(0x2fb)]+'\x20('+this['instance'][_0x910aeb(0x194)]+_0x910aeb(0x389)+JSON[_0x910aeb(0xe8)](_0x149751));}}async['findFlow'](_0x3589fe,_0x2153be){const _0x4bc5a7=a0_0x4a837a;try{this[_0x4bc5a7(0x5a9)][_0x4bc5a7(0x660)](this['instanceName']+'\x20('+this[_0x4bc5a7(0x634)]['wuid']+_0x4bc5a7(0x400));let _0x3b3b24=_0x2153be[_0x4bc5a7(0x522)](/\D/g,''),_0x3f2be9=await I[_0x4bc5a7(0x596)]({'owner':_0x3589fe,'testingWith':_0x3b3b24});return _0x3f2be9||(this['logger']['verbose'](this[_0x4bc5a7(0x2fb)]+'\x20('+this[_0x4bc5a7(0x634)][_0x4bc5a7(0x194)]+_0x4bc5a7(0x2df)),_0x3f2be9=await I[_0x4bc5a7(0x596)]({'owner':_0x3589fe,'default':!0x0})),_0x3f2be9||(this[_0x4bc5a7(0x5a9)][_0x4bc5a7(0x660)](this[_0x4bc5a7(0x2fb)]+'\x20('+this[_0x4bc5a7(0x634)][_0x4bc5a7(0x194)]+_0x4bc5a7(0x2db)),null);}catch(_0x3db0f7){return this['logger'][_0x4bc5a7(0x60b)](this['instanceName']+'\x20('+this['instance'][_0x4bc5a7(0x194)]+_0x4bc5a7(0x5b3)+JSON[_0x4bc5a7(0xe8)](_0x3db0f7,null,0x2)),null;}}async[a0_0x4a837a(0x190)](_0xb50fd9,_0x4bfbf4,_0x5423a2){const _0x2f4023=a0_0x4a837a;try{let _0x4200a4=!!_0x5423a2[_0x2f4023(0x5c2)],_0x434a7b=_0x5423a2[_0x2f4023(0x3f1)],_0x28d4b5=null;if(this[_0x2f4023(0x5a9)][_0x2f4023(0x660)](this[_0x2f4023(0x2fb)]+'\x20('+this['instance'][_0x2f4023(0x194)]+_0x2f4023(0x139)+_0x4200a4+_0x2f4023(0x3f1)+_0x434a7b),_0x4200a4)return this[_0x2f4023(0x5a9)][_0x2f4023(0x660)](this[_0x2f4023(0x2fb)]+'\x20('+this['instance'][_0x2f4023(0x194)]+_0x2f4023(0x58f)),_0x28d4b5=await J['findOne']({'owner':_0xb50fd9,'remoteJid':_0x4bfbf4,'waitingPoll_id':_0x434a7b}),_0x28d4b5?(_0x28d4b5[_0x2f4023(0x5f2)]=Date[_0x2f4023(0x2a2)](),_0x28d4b5['chatLog'][_0x2f4023(0x23b)]=_0x5423a2,_0x28d4b5):(this[_0x2f4023(0x5a9)][_0x2f4023(0x660)](this['instanceName']+'\x20('+this[_0x2f4023(0x634)]['wuid']+_0x2f4023(0x4ec)),null);{if(this['logger'][_0x2f4023(0x660)](this[_0x2f4023(0x2fb)]+'\x20('+this['instance'][_0x2f4023(0x194)]+_0x2f4023(0x4b2)+this['instance'][_0x2f4023(0x194)]+_0x2f4023(0x440)),this[_0x2f4023(0x5a9)][_0x2f4023(0x660)](this['instanceName']+'\x20('+this['instance'][_0x2f4023(0x194)]+_0x2f4023(0x4b5)),_0x28d4b5=await J[_0x2f4023(0x596)]({'owner':_0xb50fd9,'remoteJid':_0x4bfbf4,'status':'open'}),!_0x28d4b5){let _0x1e90fe=await this[_0x2f4023(0xab)](_0xb50fd9,_0x4bfbf4);if(_0x1e90fe&&(_0x28d4b5=await this['createNewConversation'](_0x1e90fe,_0x5423a2[_0x2f4023(0x1a8)],_0x5423a2)),!_0x28d4b5)return null;}let _0x3c604f=Date[_0x2f4023(0x2a2)](),_0x2b7d6b=_0x28d4b5?.[_0x2f4023(0x4d0)]||0x0,_0x3103c4=_0x3c604f-_0x2b7d6b*0x3c*0x3e8;if(this[_0x2f4023(0x5a9)][_0x2f4023(0x660)](this[_0x2f4023(0x2fb)]+'\x20('+this['instance'][_0x2f4023(0x194)]+'):\x20Current\x20Time:\x20'+_0x3c604f+_0x2f4023(0x456)+_0x2b7d6b+',\x20Expiration\x20Time:\x20'+_0x3103c4),this[_0x2f4023(0x5a9)][_0x2f4023(0x660)](this[_0x2f4023(0x2fb)]+'\x20('+this[_0x2f4023(0x634)][_0x2f4023(0x194)]+_0x2f4023(0x2ff)),this['logger'][_0x2f4023(0x660)](this[_0x2f4023(0x2fb)]+'\x20('+this[_0x2f4023(0x634)][_0x2f4023(0x194)]+_0x2f4023(0x4ea)+_0x28d4b5['lastInteraction']),this[_0x2f4023(0x5a9)][_0x2f4023(0x660)](this[_0x2f4023(0x2fb)]+'\x20('+this[_0x2f4023(0x634)][_0x2f4023(0x194)]+_0x2f4023(0x5f1)+_0x3103c4),_0x28d4b5['lastInteraction']<_0x3103c4){this[_0x2f4023(0x5a9)]['verbose'](this[_0x2f4023(0x2fb)]+'\x20('+this[_0x2f4023(0x634)][_0x2f4023(0x194)]+_0x2f4023(0x2bd));let _0x4d20e6=await this[_0x2f4023(0xab)](_0xb50fd9,_0x4bfbf4);if(_0x4d20e6===null)return null;_0x28d4b5&&await J[_0x2f4023(0x3ed)]({'_id':_0x28d4b5[_0x2f4023(0x3f7)]},{'status':_0x2f4023(0x21c)}),_0x28d4b5=await this[_0x2f4023(0x4f9)](_0x4d20e6,_0x5423a2[_0x2f4023(0x1a8)],_0x5423a2);}return _0x28d4b5[_0x2f4023(0x5f2)]=_0x3c604f,_0x28d4b5['chatLog'][_0x2f4023(0x23b)]=_0x5423a2,_0x28d4b5;}}catch(_0x2281d2){return this[_0x2f4023(0x5a9)][_0x2f4023(0x60b)](this[_0x2f4023(0x2fb)]+'\x20('+this['instance']['wuid']+_0x2f4023(0x4e5)+JSON[_0x2f4023(0xe8)](_0x2281d2,null,0x2)),null;}}async[a0_0x4a837a(0x4f9)](_0x47f0b5,_0x11beb6,_0x12bf63){const _0xb610a8=a0_0x4a837a;this[_0xb610a8(0x5a9)][_0xb610a8(0x660)](this[_0xb610a8(0x2fb)]+'\x20('+this[_0xb610a8(0x634)][_0xb610a8(0x194)]+'):\x20Criando\x20nova\x20conversa');try{let _0x4324ab=require(_0xb610a8(0x325))[_0xb610a8(0xec)],_0x3b9793=Date[_0xb610a8(0x2a2)](),_0x2189e2=_0xb610a8(0x559),_0x224721=_0x11beb6[_0xb610a8(0x319)]?null:_0x12bf63,_0xc8aad6=_0x11beb6[_0xb610a8(0x319)]?_0x12bf63:null,_0x49f11c=_0x11beb6[_0xb610a8(0x397)];await this[_0xb610a8(0xb8)](_0x49f11c);let _0x18e339={..._0x47f0b5[_0xb610a8(0x5bf)],'chatLog':null},_0x1a6c1c=await this['variablesToObject'](_0x18e339[_0xb610a8(0x3ad)]),_0x59a4d2=await this['getVariablesChat'](_0x49f11c),_0x382e7e={..._0x1a6c1c,..._0x59a4d2,'_remoteJid':_0x49f11c},_0x465b55={'lastReceivedMessage':_0x224721,'lastSendMessage':_0xc8aad6,'lastBlockId':_0x2189e2,'lastCondition':!0x0,'realVariables':_0x382e7e};_0x18e339[_0xb610a8(0x263)]=_0x465b55,delete _0x18e339[_0xb610a8(0x3f7)],_0x18e339[_0xb610a8(0x3f7)]=new _0x4324ab(),_0x18e339[_0xb610a8(0x5f2)]=_0x3b9793,_0x18e339['status']='open',_0x18e339[_0xb610a8(0x397)]=_0x49f11c;let _0x40d68b=await J[_0xb610a8(0x22c)](_0x18e339);return this[_0xb610a8(0x5a9)][_0xb610a8(0x660)](this[_0xb610a8(0x2fb)]+'\x20('+this[_0xb610a8(0x634)][_0xb610a8(0x194)]+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x40d68b?_0x18e339:null;}catch(_0x1d0bb0){return this['logger'][_0xb610a8(0x60b)](this[_0xb610a8(0x2fb)]+'\x20('+this[_0xb610a8(0x634)][_0xb610a8(0x194)]+_0xb610a8(0x3df)+JSON['stringify'](_0x1d0bb0,null,0x2)),_0x1d0bb0;}}async['uazapiSendText'](_0x423644,_0x464211,_0x376a58){const _0x3bb74e=a0_0x4a837a;this[_0x3bb74e(0x5a9)][_0x3bb74e(0x660)](this['instanceName']+'\x20('+this[_0x3bb74e(0x634)][_0x3bb74e(0x194)]+'):\x20Enviando\x20texto');let _0x1d1df0={'number':_0x376a58,'options':{'delay':_0x464211[_0x3bb74e(0x292)][_0x3bb74e(0x1f2)]},'textMessage':{'text':_0x464211[_0x3bb74e(0x292)][_0x3bb74e(0x472)]}};try{let _0xd952cb=await this[_0x3bb74e(0x4a2)](_0x1d1df0);if(_0xd952cb){let _0x53e762={'_id':_0xd952cb['key']['id'],'_fromMe':_0xd952cb[_0x3bb74e(0x1a8)][_0x3bb74e(0x319)],'_remoteJid':_0xd952cb['key'][_0x3bb74e(0x397)]};_0x423644[_0x3bb74e(0x263)]['lastBlockId']=_0x464211['_id'][_0x3bb74e(0x42d)]();let {message_normalized:_0x2384e6}=this[_0x3bb74e(0x1e5)](_0xd952cb['message'],G(_0xd952cb[_0x3bb74e(0x310)]),null);_0x423644[_0x3bb74e(0x263)][_0x3bb74e(0x62c)]=await _0x2384e6;let _0x161307={'messageId':_0xd952cb['key']['id']},_0x175abb=_0x423644[_0x3bb74e(0x263)]['realVariables'];Object[_0x3bb74e(0x334)](_0x175abb,_0x53e762),_0x423644[_0x3bb74e(0x263)][_0x3bb74e(0x33e)]=_0x175abb,this['updateConversation'](_0x423644,_0x464211,_0x161307);}else{let _0x5a7472={'error':!0x0};this[_0x3bb74e(0x401)](_0x423644,_0x464211,_0x5a7472),this[_0x3bb74e(0x5a9)][_0x3bb74e(0x60b)](this[_0x3bb74e(0x2fb)]+'\x20('+this['instance']['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.');}}catch(_0x4740b9){let _0x3cbc37={'error':!0x0,'errorLog':_0x4740b9[_0x3bb74e(0x42d)]()};this[_0x3bb74e(0x401)](_0x423644,_0x464211,_0x3cbc37),this[_0x3bb74e(0x5a9)]['error'](this[_0x3bb74e(0x2fb)]+'\x20('+this['instance'][_0x3bb74e(0x194)]+_0x3bb74e(0x4fe)+JSON[_0x3bb74e(0xe8)](_0x4740b9,null,0x2));}}async[a0_0x4a837a(0x25d)](_0x24cafc,_0x48fb96,_0x517940){const _0x4f83a7=a0_0x4a837a;this['logger']['verbose'](this[_0x4f83a7(0x2fb)]+'\x20('+this['instance'][_0x4f83a7(0x194)]+'):\x20Enviando\x20mídia');let _0x51e231={'number':_0x517940,'options':{'delay':_0x48fb96['uazapi']['delay']},'mediaMessage':{'mediatype':_0x48fb96['uazapi']['mediatype'],'caption':_0x48fb96[_0x4f83a7(0x292)][_0x4f83a7(0x24a)],'media':_0x48fb96[_0x4f83a7(0x292)][_0x4f83a7(0xcf)],'fileName':_0x48fb96[_0x4f83a7(0x292)]['fileName']}};try{let _0x14a2d3=await this[_0x4f83a7(0x494)](_0x51e231);if(_0x14a2d3){let _0x7b47f8={'_id':_0x14a2d3[_0x4f83a7(0x1a8)]['id'],'_fromMe':_0x14a2d3[_0x4f83a7(0x1a8)][_0x4f83a7(0x319)],'_remoteJid':_0x14a2d3[_0x4f83a7(0x1a8)][_0x4f83a7(0x397)]};_0x24cafc[_0x4f83a7(0x263)][_0x4f83a7(0x14e)]=_0x48fb96[_0x4f83a7(0x3f7)]['toString']();let {message_normalized:_0x3fd06b}=this[_0x4f83a7(0x1e5)](_0x14a2d3[_0x4f83a7(0x310)],G(_0x14a2d3[_0x4f83a7(0x310)]),null);_0x24cafc[_0x4f83a7(0x263)][_0x4f83a7(0x62c)]=await _0x3fd06b;let _0xc9d7ba={'messageId':_0x14a2d3[_0x4f83a7(0x1a8)]['id']},_0x1caf44=_0x24cafc['chatLog']['realVariables'];Object['assign'](_0x1caf44,_0x7b47f8),_0x24cafc['chatLog'][_0x4f83a7(0x33e)]=_0x1caf44,this['updateConversation'](_0x24cafc,_0x48fb96,_0xc9d7ba);}else{let _0x44e67c={'error':!0x0};this[_0x4f83a7(0x401)](_0x24cafc,_0x48fb96,_0x44e67c),this[_0x4f83a7(0x5a9)][_0x4f83a7(0x60b)](this[_0x4f83a7(0x2fb)]+'\x20('+this['instance'][_0x4f83a7(0x194)]+_0x4f83a7(0x3bd));}}catch(_0x4e6e3c){let _0x13c3ca={'error':!0x0,'errorLog':_0x4e6e3c['toString']()};this['updateConversation'](_0x24cafc,_0x48fb96,_0x13c3ca),this[_0x4f83a7(0x5a9)]['error'](this[_0x4f83a7(0x2fb)]+'\x20('+this[_0x4f83a7(0x634)][_0x4f83a7(0x194)]+_0x4f83a7(0x1fa)+JSON[_0x4f83a7(0xe8)](_0x4e6e3c,null,0x2));}}async['uazapiSendLocation'](_0x4ec0c1,_0x68985e,_0x16462e){const _0x42dbb3=a0_0x4a837a;this[_0x42dbb3(0x5a9)][_0x42dbb3(0x660)](this[_0x42dbb3(0x2fb)]+'\x20('+this['instance'][_0x42dbb3(0x194)]+'):\x20Enviando\x20localização');let _0x4df23d={'number':_0x16462e,'options':{'delay':_0x68985e[_0x42dbb3(0x292)][_0x42dbb3(0x1f2)]},'locationMessage':{'name':_0x68985e['uazapi'][_0x42dbb3(0x372)],'address':_0x68985e[_0x42dbb3(0x292)][_0x42dbb3(0xc2)],'latitude':_0x68985e[_0x42dbb3(0x292)][_0x42dbb3(0x324)],'longitude':_0x68985e['uazapi'][_0x42dbb3(0x19d)]}};try{let _0x55fe1c=await this[_0x42dbb3(0x5e2)](_0x4df23d);if(_0x55fe1c){let _0x5cb1f1={'_id':_0x55fe1c[_0x42dbb3(0x1a8)]['id'],'_fromMe':_0x55fe1c[_0x42dbb3(0x1a8)][_0x42dbb3(0x319)],'_remoteJid':_0x55fe1c['key'][_0x42dbb3(0x397)]};_0x4ec0c1[_0x42dbb3(0x263)][_0x42dbb3(0x14e)]=_0x68985e[_0x42dbb3(0x3f7)][_0x42dbb3(0x42d)]();let {message_normalized:_0x219f00}=this[_0x42dbb3(0x1e5)](_0x55fe1c['message'],G(_0x55fe1c[_0x42dbb3(0x310)]),null);_0x4ec0c1[_0x42dbb3(0x263)][_0x42dbb3(0x62c)]=await _0x219f00;let _0x1feeef={'messageId':_0x55fe1c['key']['id']},_0x2e2ff4=_0x4ec0c1[_0x42dbb3(0x263)][_0x42dbb3(0x33e)];Object[_0x42dbb3(0x334)](_0x2e2ff4,_0x5cb1f1),_0x4ec0c1[_0x42dbb3(0x263)][_0x42dbb3(0x33e)]=_0x2e2ff4,this[_0x42dbb3(0x401)](_0x4ec0c1,_0x68985e,_0x1feeef);}else{let _0x389020={'error':!0x0};this[_0x42dbb3(0x401)](_0x4ec0c1,_0x68985e,_0x389020),this[_0x42dbb3(0x5a9)][_0x42dbb3(0x60b)](this[_0x42dbb3(0x2fb)]+'\x20('+this[_0x42dbb3(0x634)][_0x42dbb3(0x194)]+_0x42dbb3(0x603));}}catch(_0x5a42d5){let _0x415686={'error':!0x0,'errorLog':_0x5a42d5[_0x42dbb3(0x42d)]()};this['updateConversation'](_0x4ec0c1,_0x68985e,_0x415686),this['logger'][_0x42dbb3(0x60b)](this[_0x42dbb3(0x2fb)]+'\x20('+this[_0x42dbb3(0x634)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20'+JSON['stringify'](_0x5a42d5,null,0x2));}}async[a0_0x4a837a(0x591)](_0x40b970,_0x2cbb66,_0x103a1b){const _0x16dae9=a0_0x4a837a;this[_0x16dae9(0x5a9)][_0x16dae9(0x660)](this[_0x16dae9(0x2fb)]+'\x20('+this['instance'][_0x16dae9(0x194)]+_0x16dae9(0x240));let _0x6262a1={'number':_0x103a1b,'options':{'delay':_0x2cbb66[_0x16dae9(0x292)][_0x16dae9(0x1f2)]},'audioMessage':{'audio':_0x2cbb66[_0x16dae9(0x292)][_0x16dae9(0x272)]}};try{let _0x1fed3a=await this[_0x16dae9(0x1b0)](_0x6262a1);if(_0x1fed3a){let _0x47ca73={'_id':_0x1fed3a[_0x16dae9(0x1a8)]['id'],'_fromMe':_0x1fed3a[_0x16dae9(0x1a8)][_0x16dae9(0x319)],'_remoteJid':_0x1fed3a['key'][_0x16dae9(0x397)]};_0x40b970['chatLog'][_0x16dae9(0x14e)]=_0x2cbb66[_0x16dae9(0x3f7)]['toString']();let {message_normalized:_0x458530}=this['normalizeMessage'](_0x1fed3a[_0x16dae9(0x310)],G(_0x1fed3a[_0x16dae9(0x310)]),null);_0x40b970[_0x16dae9(0x263)][_0x16dae9(0x62c)]=await _0x458530;let _0x14e6ca={'messageId':_0x1fed3a[_0x16dae9(0x1a8)]['id']},_0x236aa6=_0x40b970[_0x16dae9(0x263)][_0x16dae9(0x33e)];Object[_0x16dae9(0x334)](_0x236aa6,_0x47ca73),_0x40b970[_0x16dae9(0x263)][_0x16dae9(0x33e)]=_0x236aa6,this[_0x16dae9(0x401)](_0x40b970,_0x2cbb66,_0x14e6ca);}else{let _0x97e257={'error':!0x0};this[_0x16dae9(0x401)](_0x40b970,_0x2cbb66,_0x97e257),this[_0x16dae9(0x5a9)][_0x16dae9(0x60b)](this[_0x16dae9(0x2fb)]+'\x20('+this['instance']['wuid']+_0x16dae9(0x21a));}}catch(_0x10c172){let _0x2a914a={'error':!0x0,'errorLog':_0x10c172['toString']()};this[_0x16dae9(0x401)](_0x40b970,_0x2cbb66,_0x2a914a),this['logger'][_0x16dae9(0x60b)](this[_0x16dae9(0x2fb)]+'\x20('+this[_0x16dae9(0x634)][_0x16dae9(0x194)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20'+JSON[_0x16dae9(0xe8)](_0x10c172,null,0x2));}}async['uazapiSendContact'](_0xcd9879,_0x19e8e9,_0x2a5906){const _0x3d4f1b=a0_0x4a837a;this[_0x3d4f1b(0x5a9)]['verbose'](this['instanceName']+'\x20('+this[_0x3d4f1b(0x634)][_0x3d4f1b(0x194)]+'):\x20Enviando\x20contato');let _0x420e0f={'number':_0x2a5906,'options':{'delay':_0x19e8e9[_0x3d4f1b(0x292)][_0x3d4f1b(0x1f2)]},'contactMessage':[{'fullName':_0x19e8e9['uazapi'][_0x3d4f1b(0x4af)],'phoneNumber':_0x19e8e9[_0x3d4f1b(0x292)][_0x3d4f1b(0x159)]}]};try{let _0x52fb94=await this['contactMessage'](_0x420e0f);if(_0x52fb94){let _0x552d1d={'_id':_0x52fb94[_0x3d4f1b(0x1a8)]['id'],'_fromMe':_0x52fb94[_0x3d4f1b(0x1a8)][_0x3d4f1b(0x319)],'_remoteJid':_0x52fb94[_0x3d4f1b(0x1a8)]['remoteJid']};_0xcd9879['chatLog'][_0x3d4f1b(0x14e)]=_0x19e8e9[_0x3d4f1b(0x3f7)][_0x3d4f1b(0x42d)]();let {message_normalized:_0x56382d}=this[_0x3d4f1b(0x1e5)](_0x52fb94[_0x3d4f1b(0x310)],G(_0x52fb94[_0x3d4f1b(0x310)]),null);_0xcd9879[_0x3d4f1b(0x263)][_0x3d4f1b(0x62c)]=await _0x56382d;let _0xed8230={'messageId':_0x52fb94[_0x3d4f1b(0x1a8)]['id']},_0x1b43c9=_0xcd9879[_0x3d4f1b(0x263)][_0x3d4f1b(0x33e)];Object[_0x3d4f1b(0x334)](_0x1b43c9,_0x552d1d),_0xcd9879[_0x3d4f1b(0x263)]['realVariables']=_0x1b43c9,this['updateConversation'](_0xcd9879,_0x19e8e9,_0xed8230);}else{let _0x51661c={'error':!0x0};this[_0x3d4f1b(0x401)](_0xcd9879,_0x19e8e9,_0x51661c),this['logger']['error'](this[_0x3d4f1b(0x2fb)]+'\x20('+this[_0x3d4f1b(0x634)][_0x3d4f1b(0x194)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.');}}catch(_0x39740b){let _0x1f6323={'error':!0x0,'errorLog':_0x39740b[_0x3d4f1b(0x42d)]()};this['updateConversation'](_0xcd9879,_0x19e8e9,_0x1f6323),this['logger'][_0x3d4f1b(0x60b)](this[_0x3d4f1b(0x2fb)]+'\x20('+this['instance'][_0x3d4f1b(0x194)]+_0x3d4f1b(0x253)+JSON[_0x3d4f1b(0xe8)](_0x39740b,null,0x2));}}[a0_0x4a837a(0x4bf)](_0x51fcd0,_0x449a72){const _0x39620f=a0_0x4a837a;for(let _0xef803f of _0x51fcd0)_0xef803f[_0x39620f(0x566)]&&(_0xef803f[_0x39620f(0x566)]=this[_0x39620f(0x602)](_0xef803f[_0x39620f(0x566)],_0x449a72)),_0xef803f[_0x39620f(0x3f3)]&&(_0xef803f['optionDescription']=this[_0x39620f(0x602)](_0xef803f[_0x39620f(0x3f3)],_0x449a72));}async[a0_0x4a837a(0x38e)](_0x2ec11b,_0x36ae4f,_0x15e803){const _0x321d64=a0_0x4a837a;this['logger'][_0x321d64(0x660)](this[_0x321d64(0x2fb)]+'\x20('+this[_0x321d64(0x634)][_0x321d64(0x194)]+_0x321d64(0x5c6));let _0x1096fe=_0x2ec11b[_0x321d64(0x528)][_0x321d64(0x370)](_0x2a3768=>_0x2a3768[_0x321d64(0x15a)]===_0x36ae4f['_id']);this[_0x321d64(0x4bf)](_0x1096fe,_0x2ec11b[_0x321d64(0x263)][_0x321d64(0x33e)]);let _0x573876=_0x1096fe[_0x321d64(0x227)](_0x2cd3e3=>_0x2cd3e3[_0x321d64(0x566)]),_0x46e504={'number':_0x15e803,'options':{'delay':_0x36ae4f[_0x321d64(0x292)][_0x321d64(0x1f2)]},'pollMessage':{'name':_0x36ae4f['uazapi'][_0x321d64(0x372)],'selectableCount':0x1,'values':_0x573876}};try{let _0x526d9b=await this[_0x321d64(0x5b9)](_0x46e504);if(_0x526d9b){let _0x4039a2={'_id':_0x526d9b[_0x321d64(0x1a8)]['id'],'_fromMe':_0x526d9b[_0x321d64(0x1a8)]['fromMe'],'_remoteJid':_0x526d9b[_0x321d64(0x1a8)][_0x321d64(0x397)]};this[_0x321d64(0x5a9)][_0x321d64(0x660)](this[_0x321d64(0x2fb)]+'\x20('+this[_0x321d64(0x634)]['wuid']+'):\x20nextBlock.uazapi.name'+_0x36ae4f[_0x321d64(0x292)][_0x321d64(0x372)]),_0x2ec11b[_0x321d64(0xa3)]=_0x526d9b[_0x321d64(0x1a8)]['id'],_0x2ec11b['waitingPoll_name']=_0x36ae4f[_0x321d64(0x292)][_0x321d64(0x372)],_0x2ec11b['waitingPoll_replyOptions']=_0x1096fe,this['logger'][_0x321d64(0x660)](this[_0x321d64(0x2fb)]+'\x20('+this[_0x321d64(0x634)][_0x321d64(0x194)]+'):\x20conversation.waitingPollname'+_0x2ec11b[_0x321d64(0x5f8)]),_0x2ec11b[_0x321d64(0x263)]['lastBlockId']=_0x36ae4f[_0x321d64(0x3f7)][_0x321d64(0x42d)]();let {message_normalized:_0x41d96e}=this[_0x321d64(0x1e5)](_0x526d9b[_0x321d64(0x310)],G(_0x526d9b[_0x321d64(0x310)]),null);_0x2ec11b['chatLog'][_0x321d64(0x62c)]=await _0x41d96e;let _0xa460d5={'messageId':_0x526d9b[_0x321d64(0x1a8)]['id']},_0x5a17d3=_0x2ec11b[_0x321d64(0x263)]['realVariables'];Object[_0x321d64(0x334)](_0x5a17d3,_0x4039a2),_0x2ec11b[_0x321d64(0x263)][_0x321d64(0x33e)]=_0x5a17d3,this[_0x321d64(0x401)](_0x2ec11b,_0x36ae4f,_0xa460d5);}else{let _0x5c16b3={'error':!0x0};this[_0x321d64(0x401)](_0x2ec11b,_0x36ae4f,_0x5c16b3),this[_0x321d64(0x5a9)][_0x321d64(0x60b)](this[_0x321d64(0x2fb)]+'\x20('+this[_0x321d64(0x634)]['wuid']+_0x321d64(0x2b1));}}catch(_0x42b6eb){let _0x27914f={'error':!0x0,'errorLog':JSON[_0x321d64(0xe8)](_0x42b6eb,null,0x2)};this[_0x321d64(0x401)](_0x2ec11b,_0x36ae4f,_0x27914f),this[_0x321d64(0x5a9)][_0x321d64(0x60b)](this[_0x321d64(0x2fb)]+'\x20('+this[_0x321d64(0x634)][_0x321d64(0x194)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20'+JSON[_0x321d64(0xe8)](_0x42b6eb,null,0x2));}}async['uazapiDeleteMessage'](_0x429fce,_0x543c47,_0x117f0d){const _0x1a654f=a0_0x4a837a;this['logger'][_0x1a654f(0x660)](this['instanceName']+'\x20('+this[_0x1a654f(0x634)][_0x1a654f(0x194)]+_0x1a654f(0x4b4));let _0x2fd0bd=_0x429fce[_0x1a654f(0x263)][_0x1a654f(0x48e)]['find'](_0x49c4c3=>_0x49c4c3[_0x1a654f(0x15a)][_0x1a654f(0x42d)]()===_0x543c47[_0x1a654f(0x292)][_0x1a654f(0x15a)]['toString']()),_0xfa0395={'id':_0x2fd0bd[_0x1a654f(0x367)],'remoteJid':_0x2fd0bd[_0x1a654f(0x397)],'fromMe':_0x2fd0bd[_0x1a654f(0x319)]};try{let _0x2702cb=await this[_0x1a654f(0x31c)](_0xfa0395);if(_0x2702cb){_0x429fce[_0x1a654f(0x263)][_0x1a654f(0x14e)]=_0x543c47[_0x1a654f(0x3f7)]['toString']();let {message_normalized:_0x19288a}=this[_0x1a654f(0x1e5)](_0x2702cb[_0x1a654f(0x310)],G(_0x2702cb['message']),null);_0x429fce[_0x1a654f(0x263)][_0x1a654f(0x62c)]=await _0x19288a;let _0x25015a={};this[_0x1a654f(0x401)](_0x429fce,_0x543c47,_0x25015a);}else{let _0x160617={'error':!0x0};this[_0x1a654f(0x401)](_0x429fce,_0x543c47,_0x160617),this['logger'][_0x1a654f(0x60b)](this['instanceName']+'\x20('+this['instance'][_0x1a654f(0x194)]+_0x1a654f(0x41e));}}catch(_0x202d01){let _0x42d6b4={'error':!0x0,'errorLog':JSON[_0x1a654f(0xe8)](_0x202d01,null,0x2)};this[_0x1a654f(0x401)](_0x429fce,_0x543c47,_0x42d6b4),this[_0x1a654f(0x5a9)][_0x1a654f(0x60b)](this[_0x1a654f(0x2fb)]+'\x20('+this['instance'][_0x1a654f(0x194)]+'):\x20Falha\x20ao\x20deletar\x20mensagem:\x20'+JSON['stringify'](_0x202d01,null,0x2));}}async['createFlow'](_0xfc1424){const _0x49df3d=a0_0x4a837a;try{if(this[_0x49df3d(0x5a9)][_0x49df3d(0x660)](this[_0x49df3d(0x2fb)]+'\x20('+this['instance']['wuid']+'):\x20Criando\x20fluxo...'),await I[_0x49df3d(0x596)]({'owner':this[_0x49df3d(0x634)]['wuid'],'name':_0xfc1424['name']}))return{'message':_0x49df3d(0x64d)};_0xfc1424[_0x49df3d(0x4d5)]===!0x0&&await I['updateMany']({'owner':this[_0x49df3d(0x634)][_0x49df3d(0x194)]},{'default':!0x1});let _0x4944b1=new pe[(_0x49df3d(0x113))][(_0x49df3d(0xec))](),_0x42f20c={'_id':_0x4944b1,'default':!0x0,'title':_0x49df3d(0x517),'x':0x0,'y':0x0},_0x108a0a={'_id':new pe[(_0x49df3d(0x113))][(_0x49df3d(0xec))](),'order':0x1,'groupId':_0x4944b1[_0x49df3d(0x42d)](),'type':_0x49df3d(0x559)};return await I[_0x49df3d(0x22c)]({'owner':this[_0x49df3d(0x634)]['wuid'],'name':_0xfc1424[_0x49df3d(0x372)],'groups':[_0x42f20c],'blocks':[_0x108a0a],..._0xfc1424});}catch(_0x5efb33){throw this['logger']['error'](this[_0x49df3d(0x2fb)]+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20criar\x20fluxo\x20'+JSON[_0x49df3d(0xe8)](_0x5efb33,null,0x2)),new g(_0x49df3d(0x42c)+_0x5efb33);}}async[a0_0x4a837a(0x672)](_0x3796ff){const _0x5d43f9=a0_0x4a837a;try{return this['logger'][_0x5d43f9(0x660)](this[_0x5d43f9(0x2fb)]+'\x20('+this[_0x5d43f9(0x634)][_0x5d43f9(0x194)]+_0x5d43f9(0x17d)),await I[_0x5d43f9(0x4c9)]({'owner':this[_0x5d43f9(0x634)][_0x5d43f9(0x194)],'name':_0x3796ff});}catch(_0x2f58f0){return this[_0x5d43f9(0x5a9)][_0x5d43f9(0x60b)](this[_0x5d43f9(0x2fb)]+'\x20('+this[_0x5d43f9(0x634)][_0x5d43f9(0x194)]+_0x5d43f9(0x463)+JSON[_0x5d43f9(0xe8)](_0x2f58f0,null,0x2)),{'message':_0x5d43f9(0x5e3)+_0x2f58f0};}}async[a0_0x4a837a(0xf3)](_0x4ade75){const _0x208876=a0_0x4a837a;try{this['logger'][_0x208876(0x660)](this['instanceName']+'\x20('+this[_0x208876(0x634)][_0x208876(0x194)]+_0x208876(0x400));let _0x1e2b99=await I['findOne']({'owner':this[_0x208876(0x634)][_0x208876(0x194)],'name':_0x4ade75});if(!_0x1e2b99)throw new Error(_0x208876(0x222));if(!this[_0x208876(0x11c)]&&(await this['getAutomateSystem'](),!this[_0x208876(0x11c)]))return null;let _0x2d5ed4=this[_0x208876(0x11c)]?.[_0x208876(0x2a4)][_0x208876(0x227)](_0x3c1f36=>_0x3c1f36[_0x208876(0x372)]),_0x4ca720=['nome',_0x208876(0x646),_0x208876(0x2ea),_0x208876(0x16f),_0x208876(0x2e7),'notas',_0x208876(0x649),_0x208876(0x49d)];return _0x1e2b99[_0x208876(0x3ad)]=_0x1e2b99[_0x208876(0x3ad)]['filter'](_0x21bbcd=>!(_0x21bbcd[_0x208876(0x625)]===_0x208876(0x234)||_0x21bbcd['leadInfo'])),_0x4ca720[_0x208876(0x2c9)](_0x5dffef=>{const _0x14c4a7=_0x208876;_0x1e2b99[_0x14c4a7(0x3ad)]['push']({'folder':_0x14c4a7(0x234),'name':_0x5dffef,'value':'','doc':'','leadInfo':!0x0});}),_0x2d5ed4[_0x208876(0x2c9)](_0x55b65b=>{const _0x2021d6=_0x208876;let _0x4315b7=_0x1e2b99[_0x2021d6(0x3ad)][_0x2021d6(0x623)](_0x56b5ad=>_0x56b5ad['name']===_0x55b65b);_0x4315b7===-0x1?_0x1e2b99[_0x2021d6(0x3ad)][_0x2021d6(0x656)]({'folder':_0x2021d6(0x234),'name':_0x55b65b,'value':'','doc':'','leadInfo':!0x0}):(_0x1e2b99[_0x2021d6(0x3ad)][_0x4315b7][_0x2021d6(0x625)]=_0x2021d6(0x234),_0x1e2b99[_0x2021d6(0x3ad)][_0x4315b7]['leadInfo']=!0x0);}),_0x1e2b99[_0x208876(0x358)]&&_0x1e2b99[_0x208876(0x358)][_0x208876(0x58b)]>0x0&&_0x1e2b99[_0x208876(0x358)][_0x208876(0x2c9)](_0x21432f=>{const _0xf24fa3=_0x208876;_0x21432f['groupId']&&_0x21432f['next_groupId']&&_0x21432f[_0xf24fa3(0x50b)]===_0x21432f[_0xf24fa3(0x257)]&&(_0x21432f['next_groupId']=null);}),await _0x1e2b99[_0x208876(0x3a1)](),_0x1e2b99;}catch(_0x456960){throw this[_0x208876(0x5a9)][_0x208876(0x60b)](this[_0x208876(0x2fb)]+'\x20('+this[_0x208876(0x634)][_0x208876(0x194)]+_0x208876(0x173)+JSON[_0x208876(0xe8)](_0x456960,null,0x2)),new g('Erro\x20ao\x20buscar\x20o\x20fluxo:\x20'+_0x456960);}}async[a0_0x4a837a(0x251)](){const _0x2b57d5=a0_0x4a837a;try{return this['logger'][_0x2b57d5(0x660)](this[_0x2b57d5(0x2fb)]+'\x20('+this[_0x2b57d5(0x634)][_0x2b57d5(0x194)]+_0x2b57d5(0x1d5)),await I['find']({'owner':this[_0x2b57d5(0x634)][_0x2b57d5(0x194)]});}catch(_0x572e8d){return this[_0x2b57d5(0x5a9)][_0x2b57d5(0x60b)](this[_0x2b57d5(0x2fb)]+'\x20('+this[_0x2b57d5(0x634)]['wuid']+_0x2b57d5(0x465)+JSON['stringify'](_0x572e8d,null,0x2)),{'message':'Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20'+_0x572e8d};}}async[a0_0x4a837a(0x4cd)](_0x543deb){const _0x19a387=a0_0x4a837a;try{this[_0x19a387(0x5a9)][_0x19a387(0x660)](this[_0x19a387(0x2fb)]+'\x20('+this['instance'][_0x19a387(0x194)]+_0x19a387(0x55e));let _0x3abd28=await I[_0x19a387(0x596)]({'owner':this[_0x19a387(0x634)][_0x19a387(0x194)],'name':_0x543deb[_0x19a387(0x372)]});if(!_0x3abd28)return{'message':'Fluxo\x20não\x20encontrado'};if(_0x543deb['default']===!0x0&&await I[_0x19a387(0xa6)]({'owner':this[_0x19a387(0x634)]['wuid']},{'default':!0x1}),_0x543deb[_0x19a387(0x49b)]){if(await I[_0x19a387(0x596)]({'owner':this[_0x19a387(0x634)]['wuid'],'name':_0x543deb['newName']}))return{'message':_0x19a387(0x20f)};_0x543deb['name']=_0x543deb[_0x19a387(0x49b)],delete _0x543deb[_0x19a387(0x49b)];}return await I[_0x19a387(0x55a)](_0x3abd28[_0x19a387(0x3f7)],{'$set':_0x543deb},{'new':!0x0});}catch(_0x5995a6){throw this['logger'][_0x19a387(0x60b)](this[_0x19a387(0x2fb)]+'\x20('+this[_0x19a387(0x634)][_0x19a387(0x194)]+_0x19a387(0xee)+JSON[_0x19a387(0xe8)](_0x5995a6,null,0x2)),new g('Erro\x20ao\x20alterar\x20o\x20fluxo:\x20'+JSON[_0x19a387(0xe8)](_0x5995a6,null,0x2));}}async[a0_0x4a837a(0x16c)](_0x35e4ab){const _0x2d22f0=a0_0x4a837a;try{this[_0x2d22f0(0x5a9)][_0x2d22f0(0x660)](this[_0x2d22f0(0x2fb)]+'\x20('+this[_0x2d22f0(0x634)][_0x2d22f0(0x194)]+_0x2d22f0(0x141));let _0x430ac2={'owner':this[_0x2d22f0(0x634)][_0x2d22f0(0x194)],'name':_0x35e4ab['name']},_0x472d79=await I[_0x2d22f0(0x596)](_0x430ac2);_0x472d79||this[_0x2d22f0(0x1bc)](_0x2d22f0(0x222));let {block:_0x55999a}=_0x35e4ab;return _0x55999a?.['copy']?this[_0x2d22f0(0x249)](_0x472d79,_0x35e4ab):_0x55999a?.[_0x2d22f0(0x580)]?this['deleteBlock'](_0x472d79,_0x35e4ab):_0x55999a[_0x2d22f0(0x3f7)]?await this[_0x2d22f0(0x57e)](_0x472d79,_0x35e4ab):this[_0x2d22f0(0x11d)](_0x472d79,_0x35e4ab),await _0x472d79[_0x2d22f0(0x3a1)](),_0x472d79;}catch(_0x5d123f){this[_0x2d22f0(0x1bc)](_0x2d22f0(0x3c8)+_0x5d123f);}}async['copyBlock'](_0x506be6,_0x815044){const _0x5edf94=a0_0x4a837a;let _0x4070e0=_0x815044[_0x5edf94(0x32a)][_0x5edf94(0x3f7)],_0x5dd874=_0x506be6[_0x5edf94(0x358)][_0x5edf94(0x33c)](_0x337ce5=>_0x337ce5['_id'][_0x5edf94(0x42d)]()===_0x4070e0);if(!_0x5dd874){this['logger']['error'](this[_0x5edf94(0x2fb)]+'\x20('+this[_0x5edf94(0x634)][_0x5edf94(0x194)]+'):\x20Bloco\x20com\x20ID\x20'+_0x4070e0+_0x5edf94(0x384));return;}this[_0x5edf94(0x5a9)][_0x5edf94(0x660)](this[_0x5edf94(0x2fb)]+'\x20('+this[_0x5edf94(0x634)][_0x5edf94(0x194)]+'):\x20Bloco\x20original\x20para\x20cópia:\x20'+JSON['stringify'](_0x5dd874));let _0x416812=JSON[_0x5edf94(0xc0)](JSON[_0x5edf94(0xe8)](_0x5dd874));_0x416812[_0x5edf94(0x3f7)]=new pe[(_0x5edf94(0x4d5))][(_0x5edf94(0x113))][(_0x5edf94(0xec))](),this[_0x5edf94(0x5a9)]['verbose'](this[_0x5edf94(0x2fb)]+'\x20('+this['instance'][_0x5edf94(0x194)]+_0x5edf94(0x187)+JSON[_0x5edf94(0xe8)](_0x416812)),_0x506be6[_0x5edf94(0x358)][_0x5edf94(0x656)](_0x416812),this[_0x5edf94(0x432)](_0x506be6[_0x5edf94(0x358)],_0x416812[_0x5edf94(0x50b)]);}[a0_0x4a837a(0x1bc)](_0x4484b6){const _0x17cc58=a0_0x4a837a;throw this[_0x17cc58(0x5a9)][_0x17cc58(0x60b)](this[_0x17cc58(0x2fb)]+'\x20('+this[_0x17cc58(0x634)]['wuid']+_0x17cc58(0x4b2)+_0x4484b6),new g(_0x4484b6);}[a0_0x4a837a(0x43f)](_0x2fd3bf,_0x337163){const _0x140044=a0_0x4a837a;let {block:_0x3ec676}=_0x337163;if(_0x3ec676[_0x140044(0x295)]==='start'){this[_0x140044(0x1bc)](_0x140044(0x2dc));return;}if(!_0x3ec676[_0x140044(0x3f7)]){this[_0x140044(0x1bc)](_0x140044(0x221));return;}let _0x131300=_0x2fd3bf[_0x140044(0x358)][_0x140044(0x33c)](_0x39b1ac=>_0x39b1ac[_0x140044(0x3f7)][_0x140044(0x42d)]()===_0x337163[_0x140044(0x32a)][_0x140044(0x3f7)][_0x140044(0x42d)]());if(!_0x131300){this[_0x140044(0x1bc)](_0x140044(0x5c4)+_0x3ec676[_0x140044(0x3f7)]+_0x140044(0x65c));return;}_0x2fd3bf['blocks']=_0x2fd3bf[_0x140044(0x358)][_0x140044(0x370)](_0x1c9e8a=>_0x1c9e8a[_0x140044(0x3f7)][_0x140044(0x42d)]()!==_0x337163[_0x140044(0x32a)][_0x140044(0x3f7)]['toString']()),_0x2fd3bf[_0x140044(0x29b)]=_0x2fd3bf[_0x140044(0x29b)][_0x140044(0x370)](_0x3eee51=>_0x3eee51[_0x140044(0x15a)]!==_0x3ec676[_0x140044(0x3f7)][_0x140044(0x42d)]()),_0x2fd3bf['varedits']=_0x2fd3bf['varedits'][_0x140044(0x370)](_0x56c138=>_0x56c138[_0x140044(0x15a)]!==_0x3ec676['_id'][_0x140044(0x42d)]()),_0x2fd3bf[_0x140044(0x528)]=_0x2fd3bf[_0x140044(0x528)][_0x140044(0x370)](_0x5e0d04=>_0x5e0d04[_0x140044(0x15a)]!==_0x3ec676[_0x140044(0x3f7)]['toString']()),this[_0x140044(0x432)](_0x2fd3bf[_0x140044(0x358)],_0x131300['groupId']);}async[a0_0x4a837a(0x57e)](_0x2a898f,_0x3f1c5f){const _0x179477=a0_0x4a837a;let _0x5ed9d6=_0x2a898f[_0x179477(0x358)][_0x179477(0x623)](_0x1d555b=>_0x1d555b['_id'][_0x179477(0x42d)]()===_0x3f1c5f['block']['_id'][_0x179477(0x42d)]());if(this[_0x179477(0x5a9)][_0x179477(0x660)](this[_0x179477(0x2fb)]+'\x20('+this[_0x179477(0x634)][_0x179477(0x194)]+_0x179477(0x175)+_0x5ed9d6),_0x5ed9d6===-0x1){this[_0x179477(0x5a9)]['verbose'](_0x179477(0x5c4)+_0x3f1c5f['block']['_id']+_0x179477(0x225));return;}if(_0x2a898f[_0x179477(0x358)][_0x5ed9d6][_0x179477(0x295)]===_0x179477(0x559)){let _0x3344dc=Object[_0x179477(0x396)](_0x3f1c5f[_0x179477(0x32a)]);if(_0x3344dc[_0x179477(0x58b)]>0x2||_0x3344dc['length']===0x2&&!_0x3344dc['includes'](_0x179477(0x257))){this[_0x179477(0x1bc)](_0x179477(0xd4));return;}}let _0x588d4a=_0x2a898f[_0x179477(0x358)][_0x5ed9d6][_0x179477(0x50b)];for(let _0x10ebd8 in _0x3f1c5f[_0x179477(0x32a)])_0x3f1c5f['block'][_0x179477(0x331)](_0x10ebd8)&&(_0x2a898f[_0x179477(0x358)][_0x5ed9d6][_0x10ebd8]=_0x3f1c5f[_0x179477(0x32a)][_0x10ebd8]);if(this[_0x179477(0x5a9)][_0x179477(0x660)](this[_0x179477(0x2fb)]+'\x20('+this[_0x179477(0x634)]['wuid']+'):\x20Bloco\x20a\x20ser\x20atualizado:\x20'+JSON['stringify'](_0x2a898f[_0x179477(0x358)][_0x5ed9d6])),_0x2a898f[_0x179477(0x358)][_0x5ed9d6][_0x179477(0x3f4)]&&_0x179477(0x53e)in _0x2a898f[_0x179477(0x358)][_0x5ed9d6]['apirequest']){this[_0x179477(0x5a9)]['verbose'](this[_0x179477(0x2fb)]+'\x20('+this['instance']['wuid']+_0x179477(0x12e));let _0x292909=JSON[_0x179477(0xe8)](_0x2a898f[_0x179477(0x358)][_0x5ed9d6][_0x179477(0x3f4)]['header'],null,0x1);_0x292909[_0x179477(0x58b)]>0x2&&(_0x292909=_0x292909[_0x179477(0x15d)](0x1,_0x292909[_0x179477(0x58b)]-0x1)['trim']()),_0x2a898f[_0x179477(0x358)][_0x5ed9d6][_0x179477(0x3f4)][_0x179477(0x22b)]=_0x292909;}if(_0x2a898f[_0x179477(0x358)][_0x5ed9d6]['apirequest']&&'body'in _0x2a898f['blocks'][_0x5ed9d6][_0x179477(0x3f4)]){this[_0x179477(0x5a9)]['verbose'](this[_0x179477(0x2fb)]+'\x20('+this[_0x179477(0x634)][_0x179477(0x194)]+_0x179477(0x294));let _0xe07be0=JSON[_0x179477(0xe8)](_0x2a898f[_0x179477(0x358)][_0x5ed9d6][_0x179477(0x3f4)]['body'],null,0x1);_0xe07be0[_0x179477(0x58b)]>0x2&&(_0xe07be0=_0xe07be0[_0x179477(0x15d)](0x1,_0xe07be0[_0x179477(0x58b)]-0x1)['trim']()),_0x2a898f[_0x179477(0x358)][_0x5ed9d6]['apirequest']['bodyString']=_0xe07be0;}let _0x221a96=_0x2a898f['blocks'][_0x5ed9d6][_0x179477(0x50b)];_0x588d4a!==_0x221a96?(this[_0x179477(0x432)](_0x2a898f[_0x179477(0x358)],_0x588d4a),this['reorderBlocks'](_0x2a898f['blocks'],_0x221a96)):this[_0x179477(0x432)](_0x2a898f['blocks'],_0x588d4a);}[a0_0x4a837a(0x11d)](_0x13b924,_0x5c5ad8){const _0x840d0b=a0_0x4a837a;if(_0x5c5ad8[_0x840d0b(0x32a)][_0x840d0b(0x295)]==='start'){this[_0x840d0b(0x1bc)]('Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão');return;}if(_0x5c5ad8[_0x840d0b(0x32a)][_0x840d0b(0x3f4)]&&_0x840d0b(0x53e)in _0x5c5ad8[_0x840d0b(0x32a)][_0x840d0b(0x3f4)]){this['logger'][_0x840d0b(0x660)](this[_0x840d0b(0x2fb)]+'\x20('+this['instance'][_0x840d0b(0x194)]+_0x840d0b(0x12e));let _0x2f0e5f=JSON['stringify'](_0x5c5ad8[_0x840d0b(0x32a)][_0x840d0b(0x3f4)][_0x840d0b(0x53e)],null,0x1);_0x2f0e5f[_0x840d0b(0x58b)]>0x2&&(_0x2f0e5f=_0x2f0e5f[_0x840d0b(0x15d)](0x1,_0x2f0e5f[_0x840d0b(0x58b)]-0x1)['trim']()),_0x5c5ad8[_0x840d0b(0x32a)]['apirequest'][_0x840d0b(0x22b)]=_0x2f0e5f;}_0x5c5ad8[_0x840d0b(0x32a)][_0x840d0b(0x3f4)]&&_0x840d0b(0x327)in _0x5c5ad8[_0x840d0b(0x32a)]['apirequest']&&(this['logger'][_0x840d0b(0x660)](this[_0x840d0b(0x2fb)]+'\x20('+this['instance'][_0x840d0b(0x194)]+_0x840d0b(0x294)),_0x5c5ad8[_0x840d0b(0x32a)][_0x840d0b(0x3f4)]['bodyString']=JSON[_0x840d0b(0xe8)](_0x5c5ad8[_0x840d0b(0x32a)][_0x840d0b(0x3f4)]['body'],null,0x1)[_0x840d0b(0x268)]()),_0x13b924['blocks'][_0x840d0b(0x656)](_0x5c5ad8[_0x840d0b(0x32a)]),this[_0x840d0b(0x432)](_0x13b924[_0x840d0b(0x358)],_0x5c5ad8[_0x840d0b(0x32a)][_0x840d0b(0x50b)]);}[a0_0x4a837a(0x432)](_0x5e8559,_0x93b953){const _0x123b9d=a0_0x4a837a;let _0x46b8f3=_0x5e8559[_0x123b9d(0x370)](_0x102f18=>_0x102f18['groupId']===_0x93b953);_0x46b8f3[_0x123b9d(0xde)]((_0x20a3ec,_0x3d7fcb)=>_0x20a3ec[_0x123b9d(0x50f)]-_0x3d7fcb['order']),_0x46b8f3[_0x123b9d(0x2c9)]((_0x4cfa6e,_0x5b7537)=>_0x4cfa6e[_0x123b9d(0x50f)]=_0x5b7537+0x1);}async['editFlowReply'](_0x464df2){const _0x4e6ec9=a0_0x4a837a;try{if(this[_0x4e6ec9(0x5a9)]['verbose'](this['instanceName']+'\x20('+this[_0x4e6ec9(0x634)][_0x4e6ec9(0x194)]+_0x4e6ec9(0x671)),!_0x464df2||!_0x464df2[_0x4e6ec9(0x155)]){this[_0x4e6ec9(0x1bc)]('Data\x20inválida\x20fornecida');return;}let _0x42c304={'owner':this['instance']['wuid'],'name':_0x464df2[_0x4e6ec9(0x372)]},_0x5b3e94=await I[_0x4e6ec9(0x596)](_0x42c304);_0x5b3e94||this[_0x4e6ec9(0x1bc)](_0x4e6ec9(0x222));let {replyOption:_0x121ee5}=_0x464df2;return _0x121ee5?.['delete']?this[_0x4e6ec9(0x1af)](_0x5b3e94,_0x464df2):_0x121ee5['_id']?await this[_0x4e6ec9(0x493)](_0x5b3e94,_0x464df2):this[_0x4e6ec9(0x500)](_0x5b3e94,_0x464df2),await _0x5b3e94['save'](),_0x5b3e94;}catch(_0x56d981){this['throwAndLogError']('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0x56d981);}}['deleteReplyOption'](_0xff820c,_0x3e21ba){const _0x30b95d=a0_0x4a837a;let {replyOption:_0x2d724f}=_0x3e21ba;if(!_0x2d724f[_0x30b95d(0x3f7)]){this[_0x30b95d(0x1bc)](_0x30b95d(0x479));return;}if(!_0xff820c[_0x30b95d(0x528)]['find'](_0x4dd7fb=>_0x4dd7fb[_0x30b95d(0x3f7)][_0x30b95d(0x42d)]()===_0x3e21ba[_0x30b95d(0x155)]['_id']['toString']())){this[_0x30b95d(0x1bc)](_0x30b95d(0x3cd)+_0x2d724f[_0x30b95d(0x3f7)]+_0x30b95d(0x65c));return;}_0xff820c[_0x30b95d(0x528)]=_0xff820c[_0x30b95d(0x528)][_0x30b95d(0x370)](_0x14fbec=>_0x14fbec['_id']['toString']()!==_0x3e21ba[_0x30b95d(0x155)][_0x30b95d(0x3f7)][_0x30b95d(0x42d)]());}async[a0_0x4a837a(0x493)](_0x19732c,_0x334b56){const _0x5241a2=a0_0x4a837a;let _0x300bcf=_0x19732c[_0x5241a2(0x528)]['findIndex'](_0x14040b=>_0x14040b['_id']['toString']()===_0x334b56['replyOption'][_0x5241a2(0x3f7)][_0x5241a2(0x42d)]());if(_0x300bcf===-0x1){this[_0x5241a2(0x1bc)]('ReplyOption\x20com\x20ID\x20'+_0x334b56[_0x5241a2(0x155)][_0x5241a2(0x3f7)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}for(let _0x597dd8 in _0x334b56['replyOption'])_0x334b56['replyOption'][_0x5241a2(0x331)](_0x597dd8)&&(_0x19732c[_0x5241a2(0x528)][_0x300bcf][_0x597dd8]=_0x334b56[_0x5241a2(0x155)][_0x597dd8]);}[a0_0x4a837a(0x500)](_0x5eda49,_0x5f3617){const _0x4d3c20=a0_0x4a837a;_0x5eda49['replyOptions']['push'](_0x5f3617[_0x4d3c20(0x155)]);}async[a0_0x4a837a(0x22a)](_0x3e8b2d){const _0x37d715=a0_0x4a837a;this[_0x37d715(0x5a9)][_0x37d715(0x660)](this[_0x37d715(0x2fb)]+'\x20('+this['instance'][_0x37d715(0x194)]+_0x37d715(0x250)+_0x3e8b2d);try{this[_0x37d715(0x5a9)][_0x37d715(0x660)](this['instanceName']+'\x20('+this[_0x37d715(0x634)][_0x37d715(0x194)]+_0x37d715(0x3a2));let _0x4698a8={'owner':this[_0x37d715(0x634)][_0x37d715(0x194)],'name':_0x3e8b2d[_0x37d715(0x372)]},_0x28b889=await I[_0x37d715(0x596)](_0x4698a8);if(!_0x28b889)throw new Error(_0x37d715(0x222));if(_0x3e8b2d[_0x37d715(0x57f)]&&_0x3e8b2d[_0x37d715(0x57f)]?.[_0x37d715(0x580)]===!0x0){if(this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x37d715(0x634)][_0x37d715(0x194)]+_0x37d715(0x36f)),_0x3e8b2d[_0x37d715(0x57f)][_0x37d715(0x4d5)]===!0x0)return{'message':_0x37d715(0x450)};if(_0x28b889['blocks'][_0x37d715(0x288)](_0x78be98=>_0x78be98[_0x37d715(0x50b)][_0x37d715(0x42d)]()===_0x3e8b2d[_0x37d715(0x57f)][_0x37d715(0x3f7)]))return this[_0x37d715(0x5a9)][_0x37d715(0x660)](this[_0x37d715(0x2fb)]+'\x20('+this[_0x37d715(0x634)][_0x37d715(0x194)]+'):\x20tem\x20blocks'),{'message':_0x37d715(0x14a)};_0x28b889[_0x37d715(0x1e7)]=_0x28b889[_0x37d715(0x1e7)][_0x37d715(0x370)](_0x5f3f8f=>_0x5f3f8f['_id'][_0x37d715(0x42d)]()!==_0x3e8b2d['group']['_id']);}else{if(_0x3e8b2d[_0x37d715(0x57f)]){if(_0x3e8b2d[_0x37d715(0x57f)]['default']===!0x0)return{'message':'Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão'};if(_0x3e8b2d[_0x37d715(0x57f)]['_id']){let _0xb912d5=_0x28b889[_0x37d715(0x1e7)][_0x37d715(0x33c)](_0x4a0356=>_0x4a0356[_0x37d715(0x3f7)][_0x37d715(0x42d)]()===_0x3e8b2d[_0x37d715(0x57f)][_0x37d715(0x3f7)]);_0xb912d5&&(_0x3e8b2d[_0x37d715(0x57f)]['x']<0x0&&(_0x3e8b2d['group']['x']=0x0),_0x3e8b2d[_0x37d715(0x57f)]['y']<0x0&&(_0x3e8b2d[_0x37d715(0x57f)]['y']=0x0),Object[_0x37d715(0x334)](_0xb912d5,_0x3e8b2d[_0x37d715(0x57f)]));}else _0x28b889[_0x37d715(0x1e7)][_0x37d715(0x656)](_0x3e8b2d[_0x37d715(0x57f)]);}}return await _0x28b889['save'](),_0x28b889;}catch(_0xd4b065){throw this[_0x37d715(0x5a9)][_0x37d715(0x60b)](this[_0x37d715(0x2fb)]+'\x20('+this['instance'][_0x37d715(0x194)]+_0x37d715(0x5ea)+JSON[_0x37d715(0xe8)](_0xd4b065,null,0x2)),new g(_0x37d715(0x206)+JSON[_0x37d715(0xe8)](_0xd4b065,null,0x2));}}async['editFlowCondition'](_0x500eeb){const _0x446457=a0_0x4a837a;try{this['logger'][_0x446457(0x660)](this['instanceName']+'\x20('+this['instance'][_0x446457(0x194)]+_0x446457(0x112));let _0x10a31b={'owner':this[_0x446457(0x634)][_0x446457(0x194)],'name':_0x500eeb['name']},_0x45eb65=await I[_0x446457(0x596)](_0x10a31b);if(!_0x45eb65)throw new Error(_0x446457(0x222));let _0x261be2=!0x1;if(_0x500eeb['condition']?.['delete']===!0x0)_0x45eb65[_0x446457(0x29b)]=_0x45eb65[_0x446457(0x29b)][_0x446457(0x370)](_0x443b68=>_0x443b68&&_0x500eeb[_0x446457(0x574)]&&_0x443b68[_0x446457(0x3f7)]&&_0x500eeb[_0x446457(0x574)][_0x446457(0x3f7)]&&_0x443b68[_0x446457(0x3f7)][_0x446457(0x42d)]()!==_0x500eeb[_0x446457(0x574)][_0x446457(0x3f7)][_0x446457(0x42d)]()),_0x261be2=!0x0;else{let _0x4d9985=_0x45eb65['conditions'][_0x446457(0x33c)](_0x4e1539=>_0x4e1539&&_0x500eeb[_0x446457(0x574)]&&_0x4e1539[_0x446457(0x3f7)]&&_0x500eeb[_0x446457(0x574)][_0x446457(0x3f7)]&&_0x4e1539['_id']['toString']()===_0x500eeb['condition'][_0x446457(0x3f7)][_0x446457(0x42d)]());_0x4d9985?(_0x261be2=_0x4d9985[_0x446457(0x50f)]!==_0x500eeb[_0x446457(0x574)][_0x446457(0x50f)],Object[_0x446457(0x334)](_0x4d9985,_0x500eeb[_0x446457(0x574)])):(_0x45eb65[_0x446457(0x29b)][_0x446457(0x656)](_0x500eeb[_0x446457(0x574)]),_0x261be2=!0x0);}if(_0x261be2){_0x45eb65[_0x446457(0x29b)][_0x446457(0xde)]((_0x14543d,_0x585883)=>_0x14543d[_0x446457(0x50f)]>_0x585883['order']?0x1:_0x585883[_0x446457(0x50f)]>_0x14543d[_0x446457(0x50f)]?-0x1:0x0);for(let _0xc3361c=0x0;_0xc3361c<_0x45eb65['conditions']['length'];_0xc3361c++)_0x45eb65[_0x446457(0x29b)][_0xc3361c][_0x446457(0x50f)]=_0xc3361c+0x1;_0x45eb65[_0x446457(0x29b)]['length']>0x0&&(_0x45eb65[_0x446457(0x29b)][0x0][_0x446457(0x1d4)]=_0x446457(0x411));}return await _0x45eb65[_0x446457(0x3a1)](),_0x45eb65;}catch(_0x3f89e2){throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x446457(0x634)][_0x446457(0x194)]+_0x446457(0x36b)+JSON[_0x446457(0xe8)](_0x3f89e2,null,0x2)),new Error(_0x446457(0xd5)+_0x3f89e2);}}async[a0_0x4a837a(0x5b8)](_0x20b889){const _0x11912b=a0_0x4a837a;try{this['logger'][_0x11912b(0x660)](this[_0x11912b(0x2fb)]+'\x20('+this[_0x11912b(0x634)][_0x11912b(0x194)]+'):\x20Editando\x20edição\x20do\x20fluxo...');let _0x432903={'owner':this[_0x11912b(0x634)]['wuid'],'name':_0x20b889[_0x11912b(0x372)]},_0x4da170=await I[_0x11912b(0x596)](_0x432903);if(!_0x4da170)throw new Error(_0x11912b(0x222));let _0x3dcfb9=!0x1;if(_0x20b889['varedit']?.[_0x11912b(0x580)]===!0x0)_0x4da170[_0x11912b(0x54a)]=_0x4da170[_0x11912b(0x54a)][_0x11912b(0x370)](_0x1b6500=>_0x1b6500&&_0x20b889['varedit']&&_0x1b6500[_0x11912b(0x3f7)]&&_0x20b889[_0x11912b(0x35e)][_0x11912b(0x3f7)]&&_0x1b6500[_0x11912b(0x3f7)][_0x11912b(0x42d)]()!==_0x20b889[_0x11912b(0x35e)]['_id'][_0x11912b(0x42d)]()),_0x3dcfb9=!0x0;else{let _0x212c12=_0x4da170[_0x11912b(0x54a)][_0x11912b(0x33c)](_0xb5eb8=>_0xb5eb8&&_0x20b889['varedit']&&_0xb5eb8[_0x11912b(0x3f7)]&&_0x20b889[_0x11912b(0x35e)][_0x11912b(0x3f7)]&&_0xb5eb8[_0x11912b(0x3f7)][_0x11912b(0x42d)]()===_0x20b889[_0x11912b(0x35e)]['_id']['toString']());_0x212c12?(_0x3dcfb9=_0x212c12['order']!==_0x20b889[_0x11912b(0x35e)][_0x11912b(0x50f)],Object['assign'](_0x212c12,_0x20b889[_0x11912b(0x35e)])):(_0x4da170[_0x11912b(0x54a)]['push'](_0x20b889['varedit']),_0x3dcfb9=!0x0);}if(_0x3dcfb9){_0x4da170[_0x11912b(0x54a)][_0x11912b(0xde)]((_0x1e9b79,_0xf1daf5)=>_0x1e9b79['order']>_0xf1daf5[_0x11912b(0x50f)]?0x1:_0xf1daf5[_0x11912b(0x50f)]>_0x1e9b79[_0x11912b(0x50f)]?-0x1:0x0);for(let _0x238d2b=0x0;_0x238d2b<_0x4da170[_0x11912b(0x54a)][_0x11912b(0x58b)];_0x238d2b++)_0x4da170['varedits'][_0x238d2b]['order']=_0x238d2b+0x1;}return await _0x4da170['save'](),_0x4da170;}catch(_0x428396){throw this[_0x11912b(0x5a9)][_0x11912b(0x60b)](this[_0x11912b(0x2fb)]+'\x20('+this['instance'][_0x11912b(0x194)]+_0x11912b(0x36b)+JSON[_0x11912b(0xe8)](_0x428396,null,0x2)),new g(_0x11912b(0xd5)+_0x428396);}}async[a0_0x4a837a(0xae)](_0x2285f3){const _0x540969=a0_0x4a837a;try{this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x540969(0x634)][_0x540969(0x194)]+_0x540969(0x5d2));let _0x512fd3={'owner':this[_0x540969(0x634)][_0x540969(0x194)],'name':_0x2285f3['name']},_0x53b32a=await I[_0x540969(0x596)](_0x512fd3);if(!_0x53b32a)throw new Error(_0x540969(0x222));_0x2285f3[_0x540969(0xff)][_0x540969(0x372)]=_0x2285f3[_0x540969(0xff)][_0x540969(0x372)]['trim'](),_0x2285f3['variable'][_0x540969(0x372)]['startsWith']('_')&&(_0x2285f3[_0x540969(0xff)][_0x540969(0x372)]=_0x2285f3['variable']['name'][_0x540969(0x15d)](0x1)),_0x2285f3[_0x540969(0xff)]['name']=_0x2285f3[_0x540969(0xff)][_0x540969(0x372)][_0x540969(0x268)]();let _0x5ba045=_0x53b32a[_0x540969(0x3ad)]['find'](_0x36e954=>_0x36e954[_0x540969(0x372)]===_0x2285f3[_0x540969(0xff)][_0x540969(0x372)]);if(_0x5ba045?.[_0x540969(0x234)]===!0x0)throw new Error('Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.');if(_0x2285f3[_0x540969(0xff)]?.[_0x540969(0x580)]===!0x0){if(!_0x5ba045)return{'message':_0x540969(0x3b7)};_0x53b32a[_0x540969(0x3ad)]=_0x53b32a['variables']['filter'](_0x14f0c7=>_0x14f0c7[_0x540969(0x372)]!==_0x2285f3['variable'][_0x540969(0x372)]);}else _0x5ba045?Object[_0x540969(0x334)](_0x5ba045,_0x2285f3[_0x540969(0xff)]):_0x53b32a[_0x540969(0x3ad)][_0x540969(0x656)](_0x2285f3[_0x540969(0xff)]);return await _0x53b32a[_0x540969(0x3a1)](),_0x53b32a;}catch(_0x2b330a){throw this[_0x540969(0x5a9)][_0x540969(0x60b)](this[_0x540969(0x2fb)]+'\x20('+this[_0x540969(0x634)][_0x540969(0x194)]+_0x540969(0x514)+JSON[_0x540969(0xe8)](_0x2b330a,null,0x2)),new g(_0x540969(0x3e5)+JSON['stringify'](_0x2b330a,null,0x2));}}async['startFlow'](_0x308160){const _0x4484cb=a0_0x4a837a;let _0x3c34a1=null;try{if(!this[_0x4484cb(0x11c)]?.[_0x4484cb(0x4c5)][_0x4484cb(0x258)])throw new g(_0x4484cb(0xd3));this['logger'][_0x4484cb(0x660)](this[_0x4484cb(0x2fb)]+'\x20('+this['instance']['wuid']+_0x4484cb(0x1aa));let _0x1785b7=(await this[_0x4484cb(0x134)]({'numbers':[_0x308160[_0x4484cb(0x397)]]}))[0x0];if(!_0x1785b7[_0x4484cb(0x322)]&&!(0x0,w[_0x4484cb(0x281)])(_0x1785b7[_0x4484cb(0x511)])&&!_0x1785b7['jid']['includes']('@broadcast'))throw _0x3c34a1=JSON['stringify'](_0x1785b7,null,0x2),new g(_0x1785b7);let _0x2551e7=await I['findOne']({'owner':this[_0x4484cb(0x634)][_0x4484cb(0x194)],'name':_0x308160['name']});if(!_0x2551e7)return this[_0x4484cb(0x5a9)][_0x4484cb(0x60b)](this[_0x4484cb(0x2fb)]+'\x20('+this[_0x4484cb(0x634)]['wuid']+_0x4484cb(0x637)),{'message':'Flow\x20não\x20encontrado'};let _0x37c597=await this[_0x4484cb(0x45a)](_0x2551e7,_0x1785b7[_0x4484cb(0x511)],_0x308160[_0x4484cb(0x2ca)]);if(_0x37c597){this[_0x4484cb(0x5a9)][_0x4484cb(0x660)](this[_0x4484cb(0x2fb)]+'\x20('+this[_0x4484cb(0x634)][_0x4484cb(0x194)]+'):\x20Criou\x20conversa\x20no\x20startFlow:');let _0x3640dd=await this[_0x4484cb(0x364)](_0x37c597);return _0x3640dd&&await this[_0x4484cb(0x171)](_0x37c597,_0x3640dd,_0x37c597[_0x4484cb(0x397)]),{'message':_0x4484cb(0x214)+_0x308160[_0x4484cb(0x397)]};}}catch(_0x5032e7){if(this[_0x4484cb(0x5a9)][_0x4484cb(0x60b)](this[_0x4484cb(0x2fb)]+'\x20('+this[_0x4484cb(0x634)][_0x4484cb(0x194)]+'):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20'+JSON['stringify'](_0x5032e7,null,0x2)),_0x3c34a1=JSON[_0x4484cb(0xe8)](_0x5032e7,null,0x2),_0x3c34a1)throw new g(_0x4484cb(0x669)+_0x3c34a1);}}async['closeExistingConversations'](_0x2cbbf4){const _0x4293e3=a0_0x4a837a;let _0x6cdc7d=await J[_0x4293e3(0xa6)]({'owner':this[_0x4293e3(0x634)][_0x4293e3(0x194)],'remoteJid':_0x2cbbf4,'status':_0x4293e3(0x10f)},{'$set':{'status':_0x4293e3(0x21c)}});return this[_0x4293e3(0x5a9)]['verbose'](this[_0x4293e3(0x2fb)]+'\x20('+this[_0x4293e3(0x634)][_0x4293e3(0x194)]+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.'),_0x6cdc7d;}async['createConversationforStartFlow'](_0x10f1be,_0x49a933,_0x3e47ff){const _0x8ce00e=a0_0x4a837a;this[_0x8ce00e(0x5a9)]['verbose'](this[_0x8ce00e(0x2fb)]+'\x20('+this[_0x8ce00e(0x634)][_0x8ce00e(0x194)]+'):\x20Criando\x20nova\x20conversa'),await this[_0x8ce00e(0xb8)](_0x49a933);try{let _0x5accc2=require(_0x8ce00e(0x325))[_0x8ce00e(0xec)],_0x2d04a0=Date[_0x8ce00e(0x2a2)](),_0x24d30a=_0x8ce00e(0x559),_0x155948={},_0x4c77d5={},_0x1a02e7={..._0x10f1be['_doc'],'chatLog':null},_0x392e52=await this[_0x8ce00e(0x63a)](_0x1a02e7['variables']),_0x45e271=await this['getVariablesChat'](_0x49a933),_0x20f3f0={..._0x392e52,..._0x45e271,'_remoteJid':_0x49a933},_0x4aa752={'lastReceivedMessage':_0x155948,'lastSendMessage':_0x4c77d5,'lastBlockId':_0x24d30a,'lastCondition':!0x0,'realVariables':_0x20f3f0};_0x1a02e7[_0x8ce00e(0x263)]=_0x4aa752,_0x1a02e7[_0x8ce00e(0x263)][_0x8ce00e(0x33e)]={..._0x20f3f0,..._0x3e47ff},delete _0x1a02e7['_id'],_0x1a02e7[_0x8ce00e(0x3f7)]=new _0x5accc2(),_0x1a02e7[_0x8ce00e(0x5f2)]=_0x2d04a0,_0x1a02e7[_0x8ce00e(0x2e7)]=_0x8ce00e(0x10f),_0x1a02e7[_0x8ce00e(0x397)]=_0x49a933;let _0x228f1a=await J[_0x8ce00e(0x22c)](_0x1a02e7);return this[_0x8ce00e(0x5a9)]['verbose'](this[_0x8ce00e(0x2fb)]+'\x20('+this[_0x8ce00e(0x634)][_0x8ce00e(0x194)]+_0x8ce00e(0x5ac)),_0x228f1a?_0x1a02e7:null;}catch(_0x4f7fce){throw this['logger']['error'](this['instanceName']+'\x20('+this['instance'][_0x8ce00e(0x194)]+_0x8ce00e(0x3df)+JSON[_0x8ce00e(0xe8)](_0x4f7fce,null,0x2)),new g(_0x4f7fce['message']);}}async[a0_0x4a837a(0x283)](_0x3df4af){const _0x2c0f79=a0_0x4a837a;try{return this[_0x2c0f79(0x5a9)][_0x2c0f79(0x660)](this['instanceName']+'\x20('+this[_0x2c0f79(0x634)][_0x2c0f79(0x194)]+_0x2c0f79(0x3d0)),this[_0x2c0f79(0x5a9)]['verbose'](this[_0x2c0f79(0x2fb)]+'\x20('+this[_0x2c0f79(0x634)][_0x2c0f79(0x194)]+_0x2c0f79(0x1f9)+{'owner':this[_0x2c0f79(0x634)][_0x2c0f79(0x194)],'_id':_0x3df4af}),await J[_0x2c0f79(0x596)]({'owner':this[_0x2c0f79(0x634)][_0x2c0f79(0x194)],'_id':_0x3df4af});}catch(_0x1be2aa){throw this[_0x2c0f79(0x5a9)]['error'](this[_0x2c0f79(0x2fb)]+'\x20('+this[_0x2c0f79(0x634)][_0x2c0f79(0x194)]+_0x2c0f79(0x664)+JSON[_0x2c0f79(0xe8)](_0x1be2aa,null,0x2)),new g(_0x2c0f79(0xa8)+_0x1be2aa['message']);}}async['fetchConversation'](_0x2d1171,_0x281888=0x64){const _0x2e986c=a0_0x4a837a;try{this['logger']['verbose'](this[_0x2e986c(0x2fb)]+'\x20('+this['instance'][_0x2e986c(0x194)]+'):\x20Buscando\x20conversas...');let _0x4ef296={..._0x2d1171,'owner':this['instance'][_0x2e986c(0x194)]};return this['logger'][_0x2e986c(0x660)](_0x4ef296),await J[_0x2e986c(0x33c)](_0x4ef296)[_0x2e986c(0x4f6)](_0x281888)[_0x2e986c(0xde)]({'lastInteraction':-0x1});}catch(_0x491a38){throw this[_0x2e986c(0x5a9)]['error'](this[_0x2e986c(0x2fb)]+'\x20('+this[_0x2e986c(0x634)][_0x2e986c(0x194)]+_0x2e986c(0x3a9)+JSON['stringify'](_0x491a38,null,0x2)),new g(_0x2e986c(0x670)+_0x491a38['message']);}}async[a0_0x4a837a(0xdf)](_0x193aa8){const _0x2ebe7c=a0_0x4a837a;try{return this[_0x2ebe7c(0x5a9)]['verbose'](this[_0x2ebe7c(0x2fb)]+'\x20('+this[_0x2ebe7c(0x634)][_0x2ebe7c(0x194)]+'):\x20Deletando\x20conversa...'),this[_0x2ebe7c(0x5a9)]['verbose'](this[_0x2ebe7c(0x2fb)]+'\x20('+this[_0x2ebe7c(0x634)][_0x2ebe7c(0x194)]+'):\x20Query\x20params:'+{'owner':this[_0x2ebe7c(0x634)][_0x2ebe7c(0x194)],'_id':_0x193aa8}),(await J['deleteOne']({'owner':this[_0x2ebe7c(0x634)][_0x2ebe7c(0x194)],'_id':_0x193aa8}))[_0x2ebe7c(0x1a4)]===0x0?{'message':_0x2ebe7c(0x23a)}:{'message':_0x2ebe7c(0x47f)};}catch(_0x6e56aa){throw this['logger'][_0x2ebe7c(0x60b)](this[_0x2ebe7c(0x2fb)]+'\x20('+this[_0x2ebe7c(0x634)]['wuid']+_0x2ebe7c(0x340)+JSON['stringify'](_0x6e56aa,null,0x2)),new g(_0x2ebe7c(0x2d3)+_0x6e56aa['message']);}}async[a0_0x4a837a(0x290)](_0x348906){const _0xa1350a=a0_0x4a837a;try{let {_id:_0x466729,chatLog:_0xc722b2,status:_0x52fa75}=_0x348906;if(!_0x466729)return{'message':_0xa1350a(0x3c1)};let _0xea4c5c={};if(_0x52fa75!==void 0x0&&(_0xea4c5c[_0xa1350a(0x2e7)]=_0x52fa75),Object[_0xa1350a(0x396)](_0xea4c5c)[_0xa1350a(0x58b)]===0x0)return{'message':'Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.'};let _0x24cfbe=this[_0xa1350a(0x634)]['wuid'],_0x3ca3ad=await J[_0xa1350a(0x466)]({'_id':_0x466729,'owner':_0x24cfbe},{'$set':_0xea4c5c},{'new':!0x0});return _0x3ca3ad||{'message':_0xa1350a(0x2f6)};}catch(_0x4e1e83){throw this[_0xa1350a(0x5a9)]['error'](this['instanceName']+'\x20('+this[_0xa1350a(0x634)]['wuid']+_0xa1350a(0x2d2)+JSON[_0xa1350a(0xe8)](_0x4e1e83,null,0x2)),new g(_0xa1350a(0x1b7)+_0x4e1e83[_0xa1350a(0x310)]);}}async[a0_0x4a837a(0x66a)](_0x16429d){const _0x365f27=a0_0x4a837a;try{_0x16429d[_0x365f27(0x3f7)]=this[_0x365f27(0x305)](_0x16429d['_id']);let {_id:_0x9dbb6,leadInfo:_0x1c4335}=_0x16429d;if(!_0x9dbb6)throw new Error(_0x365f27(0x3fc));let _0x2653a2=(_0x44572d,_0x2dba91,_0x1dfc23)=>{const _0x5ef6e1=_0x365f27;_0x1dfc23[_0x5ef6e1(0x2c9)](_0x33a3a5=>{const _0x4874f5=_0x5ef6e1;_0x44572d[_0x33a3a5]!==void 0x0&&(_0x2dba91[_0x4874f5(0x274)+_0x33a3a5]=_0x44572d[_0x33a3a5]);});},_0x3734a8={};if(_0x2653a2(_0x1c4335,_0x3734a8,['nome','nomecompleto',_0x365f27(0x2ea),_0x365f27(0x16f),_0x365f27(0x2e7),_0x365f27(0x576),_0x365f27(0x49d),_0x365f27(0x508),'responsavelid']),Array[_0x365f27(0x2fc)](_0x1c4335[_0x365f27(0x2a4)])&&(_0x3734a8['leadInfo.customFields']=_0x1c4335['customFields'][_0x365f27(0x227)](_0x4a642d=>({'_id':_0x4a642d[_0x365f27(0x3f7)],'value':_0x4a642d['value']}))),_0x16429d['leadInfo']['desativadoFluxoAte']!==void 0x0&&(_0x3734a8[_0x365f27(0x26d)]=Number(_0x16429d[_0x365f27(0x234)][_0x365f27(0xc4)])),_0x16429d['unreadcount']!==void 0x0&&(_0x3734a8[_0x365f27(0x207)]=Number(_0x16429d['unreadcount'])),Object['keys'](_0x3734a8)[_0x365f27(0x58b)]===0x0)throw new Error('Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.');let _0x46b0fa=this[_0x365f27(0x634)][_0x365f27(0x194)];if(!_0x46b0fa)throw new Error('Tanto\x20id\x20quanto\x20owner\x20são\x20necessários\x20para\x20criar\x20ou\x20editar\x20um\x20chat.');if(!await this[_0x365f27(0x5c0)][_0x365f27(0xe2)][_0x365f27(0x596)]({'where':{'_id':_0x16429d[_0x365f27(0x3f7)],'owner':_0x46b0fa}})){let _0x38e44a=(await this['whatsappNumber']({'numbers':[_0x16429d[_0x365f27(0x3f7)]]}))[0x0];if(!_0x38e44a[_0x365f27(0x322)]&&!(0x0,w[_0x365f27(0x281)])(_0x38e44a['jid'])&&!_0x38e44a[_0x365f27(0x511)][_0x365f27(0x1a9)](_0x365f27(0x2a5)))throw new g(_0x38e44a);_0x16429d['_id']=_0x38e44a[_0x365f27(0x511)];}let _0x418972=await this['repository'][_0x365f27(0xe2)]['updateOne']({'where':{'_id':_0x16429d[_0x365f27(0x3f7)],'owner':_0x46b0fa}},_0x3734a8);return _0x418972&&F(this['instanceName'],_0x365f27(0x15c),{'chat':_0x418972}),_0x418972?(this[_0x365f27(0x5a9)][_0x365f27(0x660)](this[_0x365f27(0x2fb)]+'\x20('+this[_0x365f27(0x634)][_0x365f27(0x194)]+_0x365f27(0x4b2)+_0x418972),_0x418972):{'message':_0x365f27(0x3c4)};}catch(_0x16916a){throw this[_0x365f27(0x5a9)]['error'](this[_0x365f27(0x2fb)]+'\x20('+this[_0x365f27(0x634)][_0x365f27(0x194)]+'):\x20Erro\x20ao\x20editar\x20o\x20chat:\x20'+JSON[_0x365f27(0xe8)](_0x16916a,null,0x2)),new g('Erro\x20ao\x20editar\x20o\x20chat:\x20'+_0x16916a[_0x365f27(0x310)]);}}async[a0_0x4a837a(0x1da)](_0x563ff2){const _0xe57870=a0_0x4a837a;let _0x529cad=this['instance'][_0xe57870(0x194)];try{let _0x4b5d16=await ae['findById'](_0x529cad);_0x4b5d16||(_0x4b5d16=new ae({'_id':_0x529cad}),await _0x4b5d16[_0xe57870(0x3a1)]());let _0x26ff03=_0x563ff2['_id']?_0x4b5d16['agents']['findIndex'](_0x3b0897=>_0x3b0897[_0xe57870(0x3f7)]===_0x563ff2[_0xe57870(0x3f7)]):-0x1;if(_0x563ff2[_0xe57870(0x580)]&&_0x26ff03>-0x1)_0x4b5d16[_0xe57870(0x647)][_0xe57870(0x454)](_0x26ff03,0x1);else{if(_0x26ff03>-0x1){let _0x1edfbf=_0x4b5d16[_0xe57870(0x647)][_0x26ff03];_0x563ff2[_0xe57870(0x40a)]&&(_0x1edfbf[_0xe57870(0x40a)]=_0x563ff2[_0xe57870(0x40a)]),_0x563ff2['name']&&(_0x1edfbf[_0xe57870(0x372)]=_0x563ff2['name']),_0x563ff2['email']&&(_0x1edfbf[_0xe57870(0x2ea)]=_0x563ff2[_0xe57870(0x2ea)]),_0x563ff2[_0xe57870(0x519)]&&(_0x1edfbf[_0xe57870(0x519)]=_0x563ff2[_0xe57870(0x519)]);}else _0x4b5d16[_0xe57870(0x647)][_0xe57870(0x656)]({'_id':_0x563ff2[_0xe57870(0x3f7)]||new pe[(_0xe57870(0x4d5))]['Types']['ObjectId']()['toString'](),'fone':_0x563ff2[_0xe57870(0x40a)],'name':_0x563ff2['name'],'email':_0x563ff2['email'],'role':_0x563ff2[_0xe57870(0x519)]});}let _0x2e2183=await _0x4b5d16[_0xe57870(0x3a1)]();return this[_0xe57870(0x11c)]=_0x2e2183,this[_0xe57870(0x5a9)][_0xe57870(0x660)](this[_0xe57870(0x2fb)]+'\x20('+this[_0xe57870(0x634)]['wuid']+_0xe57870(0xe9)),this['logger'][_0xe57870(0x660)](this['instanceName']+'\x20('+this[_0xe57870(0x634)][_0xe57870(0x194)]+_0xe57870(0x4b2)+this[_0xe57870(0x11c)]),_0x2e2183;}catch(_0x41e0cc){throw this[_0xe57870(0x5a9)][_0xe57870(0x60b)](this['instanceName']+'\x20('+this[_0xe57870(0x634)][_0xe57870(0x194)]+_0xe57870(0x487)+JSON[_0xe57870(0xe8)](_0x41e0cc,null,0x2)),new g('Erro\x20ao\x20editar\x20agentes:\x20'+_0x41e0cc['message']);}}async[a0_0x4a837a(0x59b)](_0x2caddd){const _0x212aa4=a0_0x4a837a;let _0xedcc12=this[_0x212aa4(0x634)][_0x212aa4(0x194)];try{let _0x3090bd=await ae[_0x212aa4(0x111)](_0xedcc12);_0x3090bd||(_0x3090bd=new ae({'_id':_0xedcc12}),await _0x3090bd[_0x212aa4(0x3a1)]());let _0x57160b=_0x2caddd[_0x212aa4(0x3f7)]?_0x3090bd[_0x212aa4(0x2a4)][_0x212aa4(0x623)](_0x16b7a2=>_0x16b7a2[_0x212aa4(0x3f7)]===_0x2caddd['_id']):-0x1,_0x1726b1=!0x1,_0x4936f2=_0x3090bd[_0x212aa4(0x2a4)]['some'](_0x331ff6=>_0x331ff6[_0x212aa4(0x50f)]===_0x2caddd[_0x212aa4(0x50f)]);if(_0x2caddd[_0x212aa4(0x580)]&&_0x57160b>-0x1)_0x3090bd[_0x212aa4(0x2a4)][_0x212aa4(0x454)](_0x57160b,0x1),_0x1726b1=!0x0;else{if(_0x57160b>-0x1){if(_0x3090bd['customFields'][_0x212aa4(0x288)](_0x252a18=>_0x252a18[_0x212aa4(0x372)]===_0x2caddd[_0x212aa4(0x372)]&&_0x252a18[_0x212aa4(0x3f7)]!==_0x2caddd[_0x212aa4(0x3f7)]))throw new Error(_0x212aa4(0x586));let _0x548380=_0x3090bd[_0x212aa4(0x2a4)][_0x57160b];_0x2caddd['order']&&(_0x4936f2||!Number[_0x212aa4(0x3a8)](_0x2caddd['order']))&&(_0x548380['order']=_0x2caddd[_0x212aa4(0x50f)],_0x1726b1=!0x0),_0x2caddd[_0x212aa4(0x372)]&&(_0x548380[_0x212aa4(0x372)]=_0x2caddd[_0x212aa4(0x372)]);}else{if(_0x3090bd['customFields']['some'](_0x5aaa9d=>_0x5aaa9d[_0x212aa4(0x372)]===_0x2caddd[_0x212aa4(0x372)]&&_0x5aaa9d['_id']!==_0x2caddd['_id']))throw new Error(_0x212aa4(0x586));_0x3090bd[_0x212aa4(0x2a4)][_0x212aa4(0x656)]({'_id':_0x2caddd[_0x212aa4(0x3f7)]||new pe[(_0x212aa4(0x4d5))]['Types']['ObjectId']()[_0x212aa4(0x42d)](),'order':_0x2caddd['order'],'name':_0x2caddd[_0x212aa4(0x372)]}),_0x1726b1=!0x0;}}if(_0x1726b1){_0x3090bd[_0x212aa4(0x2a4)]['sort']((_0x3f3782,_0x197555)=>_0x3f3782[_0x212aa4(0x50f)]>_0x197555[_0x212aa4(0x50f)]?0x1:_0x197555[_0x212aa4(0x50f)]>_0x3f3782['order']?-0x1:0x0);for(let _0x1572bc=0x0;_0x1572bc<_0x3090bd[_0x212aa4(0x2a4)][_0x212aa4(0x58b)];_0x1572bc++)_0x3090bd[_0x212aa4(0x2a4)][_0x1572bc][_0x212aa4(0x50f)]=_0x1572bc+0x1;}let _0x395c57=await _0x3090bd['save']();return this[_0x212aa4(0x11c)]=_0x395c57,this['logger'][_0x212aa4(0x660)](this[_0x212aa4(0x2fb)]+'\x20('+this[_0x212aa4(0x634)]['wuid']+_0x212aa4(0x3d5)),this[_0x212aa4(0x5a9)][_0x212aa4(0x660)](this[_0x212aa4(0x2fb)]+'\x20('+this[_0x212aa4(0x634)][_0x212aa4(0x194)]+_0x212aa4(0x4b2)+this[_0x212aa4(0x11c)]),_0x395c57;}catch(_0x53735b){throw this['logger'][_0x212aa4(0x60b)](this[_0x212aa4(0x2fb)]+'\x20('+this[_0x212aa4(0x634)]['wuid']+'):\x20Erro\x20ao\x20tentar\x20updateCustomFields:\x20'+JSON[_0x212aa4(0xe8)](_0x53735b,null,0x2)),new g('Erro\x20ao\x20tentar\x20updateCustomFields:\x20'+_0x53735b[_0x212aa4(0x310)]);}}async['updateFlowConfig'](_0x7db83f){const _0x1d4513=a0_0x4a837a;let _0x56753b=this[_0x1d4513(0x634)]['wuid'];try{let _0x50bca0=await ae['findById'](_0x56753b);_0x50bca0||(_0x50bca0=new ae({'_id':_0x56753b}),await _0x50bca0['save']()),_0x50bca0[_0x1d4513(0x4c5)][_0x1d4513(0x258)]=_0x7db83f?.[_0x1d4513(0x258)]!==void 0x0?_0x7db83f?.['enabled']:_0x50bca0[_0x1d4513(0x4c5)][_0x1d4513(0x258)],_0x50bca0[_0x1d4513(0x4c5)][_0x1d4513(0x3f0)]=_0x7db83f?.['ignoreGroups']!==void 0x0?_0x7db83f?.[_0x1d4513(0x3f0)]:_0x50bca0[_0x1d4513(0x4c5)][_0x1d4513(0x3f0)],_0x50bca0[_0x1d4513(0x4c5)][_0x1d4513(0x1c3)]=_0x7db83f?.[_0x1d4513(0x1c3)]??_0x50bca0[_0x1d4513(0x4c5)]['prefixCommand'],_0x50bca0['flowConfig'][_0x1d4513(0x50c)]=_0x7db83f?.[_0x1d4513(0x50c)]??_0x50bca0[_0x1d4513(0x4c5)][_0x1d4513(0x50c)],_0x50bca0[_0x1d4513(0x4c5)]['stopMinutes']=_0x7db83f?.[_0x1d4513(0x261)]??_0x50bca0[_0x1d4513(0x4c5)][_0x1d4513(0x261)];let _0x121246=await _0x50bca0[_0x1d4513(0x3a1)]();return this[_0x1d4513(0x11c)]=_0x121246,this[_0x1d4513(0x5a9)][_0x1d4513(0x660)](this['instanceName']+'\x20('+this[_0x1d4513(0x634)][_0x1d4513(0x194)]+_0x1d4513(0xe9)),this[_0x1d4513(0x5a9)]['verbose'](this['instanceName']+'\x20('+this[_0x1d4513(0x634)][_0x1d4513(0x194)]+_0x1d4513(0x4b2)+this['AutomateSystem']),setTimeout(()=>this[_0x1d4513(0x3c7)](),0x7d0),_0x121246;}catch(_0x3e938d){throw this[_0x1d4513(0x5a9)][_0x1d4513(0x60b)](this['instanceName']+'\x20('+this[_0x1d4513(0x634)][_0x1d4513(0x194)]+_0x1d4513(0x487)+JSON[_0x1d4513(0xe8)](_0x3e938d,null,0x2)),new g('Erro\x20ao\x20editar\x20agentes:\x20'+_0x3e938d[_0x1d4513(0x310)]);}}async['getAutomateSystem'](){const _0x213e72=a0_0x4a837a;let _0xfc18be=this[_0x213e72(0x634)][_0x213e72(0x194)];try{let _0x4e817b=await ae[_0x213e72(0x111)](_0xfc18be);return _0x4e817b||(_0x4e817b=new ae({'_id':_0xfc18be})),_0x4e817b[_0x213e72(0x4c5)]=_0x4e817b[_0x213e72(0x4c5)]||{},_0x4e817b[_0x213e72(0x4c5)][_0x213e72(0x258)]===void 0x0&&(_0x4e817b[_0x213e72(0x4c5)][_0x213e72(0x258)]=!0x1),_0x4e817b[_0x213e72(0x4c5)][_0x213e72(0x3f0)]===void 0x0&&(_0x4e817b[_0x213e72(0x4c5)]['ignoreGroups']=!0x0),_0x4e817b['flowConfig'][_0x213e72(0x1c3)]===void 0x0&&(_0x4e817b['flowConfig'][_0x213e72(0x1c3)]='!'),_0x4e817b[_0x213e72(0x4c5)][_0x213e72(0x50c)]===void 0x0&&(_0x4e817b[_0x213e72(0x4c5)][_0x213e72(0x50c)]=_0x213e72(0x57b)),_0x4e817b[_0x213e72(0x4c5)][_0x213e72(0x261)]===void 0x0&&(_0x4e817b['flowConfig']['stopMinutes']=0x14),await _0x4e817b[_0x213e72(0x3a1)](),this['AutomateSystem']=_0x4e817b,this['logger'][_0x213e72(0x660)](this[_0x213e72(0x2fb)]+'\x20('+this['instance'][_0x213e72(0x194)]+_0x213e72(0x3d6)),this['logger'][_0x213e72(0x660)](this[_0x213e72(0x11c)]),_0x4e817b;}catch(_0x46709e){throw this[_0x213e72(0x5a9)][_0x213e72(0x60b)](this[_0x213e72(0x2fb)]+'\x20('+this[_0x213e72(0x634)]['wuid']+_0x213e72(0xf7)+JSON[_0x213e72(0xe8)](_0x46709e,null,0x2)),new g('Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20'+_0x46709e[_0x213e72(0x310)]);}}async[a0_0x4a837a(0x4d6)](){const _0x49da65=a0_0x4a837a;this['timerId']&&clearTimeout(this[_0x49da65(0x204)]),this[_0x49da65(0x204)]=setTimeout(()=>{const _0x2cc36e=_0x49da65;this[_0x2cc36e(0x31b)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x4a837a(0x31b)](){const _0x144d77=a0_0x4a837a;Date[_0x144d77(0x2a2)]()-this[_0x144d77(0x607)]>=0x1d4c0&&(this[_0x144d77(0x5a9)][_0x144d77(0x660)](this[_0x144d77(0x2fb)]+'\x20('+this[_0x144d77(0x634)][_0x144d77(0x194)]+'):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.'),this[_0x144d77(0x243)]=null,this[_0x144d77(0x607)]=0x0,this['delayMessage']=0x0,await this[_0x144d77(0x3c7)]());}async[a0_0x4a837a(0x3c7)](){const _0x2085c3=a0_0x4a837a;let _0x10f438=()=>{const _0x2c07ce=a0_0x22fc;this[_0x2c07ce(0x5a9)][_0x2c07ce(0x660)](this['instanceName']+'\x20('+this[_0x2c07ce(0x634)][_0x2c07ce(0x194)]+'):\x20this.processingScheduleMessageId:\x20'+this[_0x2c07ce(0x243)]+_0x2c07ce(0x435));},_0x20c5de=async()=>{const _0x1113bd=a0_0x22fc;this['logger'][_0x1113bd(0x660)](this['instanceName']+'\x20('+this['instance'][_0x1113bd(0x194)]+_0x1113bd(0x469));let _0x2194ce=Date[_0x1113bd(0x2a2)]()-0xc*0x3c*0x3c*0x3e8;return await L[_0x1113bd(0x33c)]({'owner':this[_0x1113bd(0x634)]['wuid'],'status':{'$in':[_0x1113bd(0xd7),_0x1113bd(0x23d)]},'$or':[{'when':{'$lte':Date['now'](),'$gte':_0x2194ce}},{'when':0x0}]});},_0x40800e=async _0x3ddb82=>{const _0x3eaef0=a0_0x22fc;for(let _0x317a2a of _0x3ddb82){if(!await L[_0x3eaef0(0x466)]({'_id':_0x317a2a['_id'],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x3eaef0(0x2a2)]()-0x1770}}]},{'$set':{'startSend':Date[_0x3eaef0(0x2a2)]()}}))return;if(!this['isConnected']){this['logger'][_0x3eaef0(0x660)](this[_0x3eaef0(0x2fb)]+'\x20('+this['instance'][_0x3eaef0(0x194)]+_0x3eaef0(0x5ec));break;}if(_0x317a2a['type']==='flow'&&!this[_0x3eaef0(0x11c)]?.[_0x3eaef0(0x4c5)][_0x3eaef0(0x258)]){this['logger'][_0x3eaef0(0x60b)](this[_0x3eaef0(0x2fb)]+'\x20('+this[_0x3eaef0(0x634)]['wuid']+_0x3eaef0(0x1bb));continue;}(!_0x317a2a['remoteJidsRemaining']||_0x317a2a[_0x3eaef0(0x5a7)][_0x3eaef0(0x58b)]===0x0)&&(_0x317a2a=await L[_0x3eaef0(0x55a)](_0x317a2a[_0x3eaef0(0x3f7)],{'$set':{'status':'sending','remoteJidsRemaining':[..._0x317a2a[_0x3eaef0(0x5db)]]}},{'new':!0x0}));for(let _0x35e038 of _0x317a2a[_0x3eaef0(0x5a7)]){if(await this['setRestartTimer'](),this[_0x3eaef0(0x607)]=Date[_0x3eaef0(0x2a2)](),_0x317a2a[_0x3eaef0(0x126)][_0x3eaef0(0x288)](_0x83a8d2=>_0x83a8d2[_0x3eaef0(0x397)]===_0x35e038)){this[_0x3eaef0(0x5a9)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x3eaef0(0x194)]+_0x3eaef0(0x3f6)+_0x35e038+_0x3eaef0(0x18c));continue;}if(!this[_0x3eaef0(0x5cb)]){this[_0x3eaef0(0x5a9)][_0x3eaef0(0x660)](this[_0x3eaef0(0x2fb)]+'\x20('+this['instance']['wuid']+_0x3eaef0(0x284));break;}if(!this[_0x3eaef0(0x243)]){this[_0x3eaef0(0x5a9)][_0x3eaef0(0x660)](this[_0x3eaef0(0x2fb)]+'\x20('+this[_0x3eaef0(0x634)]['wuid']+_0x3eaef0(0x2a8)+_0x317a2a[_0x3eaef0(0x3f7)]+_0x3eaef0(0x25f));break;}if(_0x317a2a['type']===_0x3eaef0(0x2d4)&&!this[_0x3eaef0(0x11c)]?.[_0x3eaef0(0x4c5)][_0x3eaef0(0x258)]){this[_0x3eaef0(0x5a9)][_0x3eaef0(0x60b)](this['instanceName']+'\x20('+this[_0x3eaef0(0x634)]['wuid']+_0x3eaef0(0x1bb));break;}try{let _0x4eac48=await this[_0x3eaef0(0xce)](_0x35e038,_0x317a2a),_0x26fe9d=_0x4eac48['error']===!0x0,_0x4130ac={'remoteJid':_0x35e038,'error':_0x26fe9d,'id':_0x26fe9d?null:_0x4eac48['id'],'error_log':_0x26fe9d?_0x4eac48[_0x3eaef0(0x2b3)]?_0x4eac48[_0x3eaef0(0x2b3)][_0x3eaef0(0x42d)]():'':null,'log_timestamp':Date[_0x3eaef0(0x2a2)]()};if((await L[_0x3eaef0(0x55a)](_0x317a2a[_0x3eaef0(0x3f7)],{'$push':{'messagesSend':_0x4130ac},'$pull':{'remoteJidsRemaining':_0x35e038}},{'new':!0x0}))['status']===_0x3eaef0(0x36d)){this['logger'][_0x3eaef0(0x660)](this[_0x3eaef0(0x2fb)]+'\x20('+this['instance'][_0x3eaef0(0x194)]+_0x3eaef0(0x2a8)+_0x317a2a[_0x3eaef0(0x3f7)]+'\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.');break;}if(_0x26fe9d)continue;let _0x150b81=this['getDelay'](_0x317a2a[_0x3eaef0(0x492)],_0x317a2a[_0x3eaef0(0x1cc)]);await this['sleep'](_0x150b81);}catch(_0x7c7a4d){this[_0x3eaef0(0x5a9)][_0x3eaef0(0x60b)](this[_0x3eaef0(0x2fb)]+'\x20('+this[_0x3eaef0(0x634)]['wuid']+_0x3eaef0(0x282)+_0x35e038+':\x20'+JSON['stringify'](_0x7c7a4d,null,0x2));let _0xcf8378={'remoteJid':_0x35e038,'error':!0x0,'id':null,'error_log':_0x7c7a4d[_0x3eaef0(0x310)],'log_timestamp':Date[_0x3eaef0(0x2a2)]()};await L[_0x3eaef0(0x55a)](_0x317a2a[_0x3eaef0(0x3f7)],{'$push':{'messagesSend':_0xcf8378},'$pull':{'remoteJidsRemaining':_0x35e038}},{'new':!0x0});}}let _0x1382ce=await L[_0x3eaef0(0x111)](_0x317a2a[_0x3eaef0(0x3f7)]);_0x1382ce['remoteJidsRemaining'][_0x3eaef0(0x58b)]===0x0&&_0x1382ce[_0x3eaef0(0x2e7)]!==_0x3eaef0(0x36d)&&await L[_0x3eaef0(0x55a)](_0x317a2a[_0x3eaef0(0x3f7)],{'$set':{'status':_0x3eaef0(0x241)}},{'new':!0x0}),await new Promise(_0x23dd84=>setTimeout(_0x23dd84,0x1388));}},_0x2bfdb6=async()=>{const _0x3bc79b=a0_0x22fc;let _0x6aaccf=await L[_0x3bc79b(0x596)]({'owner':this[_0x3bc79b(0x634)][_0x3bc79b(0x194)],'status':_0x3bc79b(0xd7),'when':{'$gt':Date[_0x3bc79b(0x2a2)]()}})[_0x3bc79b(0xde)]({'when':0x1});_0x6aaccf&&_0x6aaccf['when']-Date[_0x3bc79b(0x2a2)]()<=0x5265c00?this[_0x3bc79b(0x2ae)]=_0x6aaccf[_0x3bc79b(0x1e0)]-Date[_0x3bc79b(0x2a2)]():this['delayMessage']=(0x3c+Math[_0x3bc79b(0x380)](Math[_0x3bc79b(0x5e0)]()*0x3c))*0x3c*0x3e8,this[_0x3bc79b(0x2ae)]=Math[_0x3bc79b(0x5e9)](this[_0x3bc79b(0x2ae)],0x7d0);let _0x597659=Math[_0x3bc79b(0x32d)](this[_0x3bc79b(0x2ae)]/0xea60);if(_0x6aaccf){let _0x48879a=new Date(_0x6aaccf['when'])[_0x3bc79b(0x235)]();this[_0x3bc79b(0x5a9)][_0x3bc79b(0x660)](this['instanceName']+'\x20('+this[_0x3bc79b(0x634)][_0x3bc79b(0x194)]+_0x3bc79b(0x5b0)+_0x48879a+_0x3bc79b(0x62b)+_0x597659+_0x3bc79b(0x1b6));}else this[_0x3bc79b(0x5a9)][_0x3bc79b(0x660)](this['instanceName']+'\x20('+this[_0x3bc79b(0x634)][_0x3bc79b(0x194)]+_0x3bc79b(0x246)+_0x597659+_0x3bc79b(0x1b6));setTimeout(()=>this[_0x3bc79b(0x3c7)](),this[_0x3bc79b(0x2ae)]);};if(this['processingScheduleMessageId']){await this[_0x2085c3(0x4d6)](),_0x10f438();return;}if(!this[_0x2085c3(0x5cb)]){this['logger'][_0x2085c3(0x660)](this[_0x2085c3(0x2fb)]+'\x20('+this['instance'][_0x2085c3(0x194)]+_0x2085c3(0x101)),this[_0x2085c3(0x243)]=null,this['lastSend']=0x0,this[_0x2085c3(0x2ae)]=0x0;return;}try{let _0x3b9a2a=await _0x20c5de();_0x3b9a2a['length']===0x0?this['logger']['verbose'](this[_0x2085c3(0x2fb)]+'\x20('+this[_0x2085c3(0x634)]['wuid']+'):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.'):(this[_0x2085c3(0x243)]=_0x3b9a2a[0x0][_0x2085c3(0x3f7)],await _0x40800e(_0x3b9a2a)),await _0x2bfdb6(),this[_0x2085c3(0x243)]=null;}catch(_0x533d57){this[_0x2085c3(0x5a9)][_0x2085c3(0x60b)](_0x2085c3(0x470)+JSON['stringify'](_0x533d57,null,0x2));}}[a0_0x4a837a(0x2a0)](_0x48fe06,_0x242faf){const _0x32eb2d=a0_0x4a837a;return _0x48fe06=Math[_0x32eb2d(0x5e9)](0.5,_0x48fe06),_0x242faf=Math[_0x32eb2d(0x5e9)](0x3,_0x242faf),Math[_0x32eb2d(0x380)](Math['random']()*(_0x242faf-_0x48fe06+0x1)+_0x48fe06)*0x3e8;}[a0_0x4a837a(0x23f)](_0x1ddc13){return new Promise(_0x1d2165=>setTimeout(_0x1d2165,_0x1ddc13));}async[a0_0x4a837a(0x2d7)](_0x3b7095){const _0x33c2f6=a0_0x4a837a;if(!this[_0x33c2f6(0x11c)]&&(await this['getAutomateSystem'](),!this[_0x33c2f6(0x11c)]))return null;_0x3b7095=this[_0x33c2f6(0x305)](_0x3b7095);let _0xd06a17=await this['repository'][_0x33c2f6(0xe2)][_0x33c2f6(0x596)]({'where':{'_id':_0x3b7095,'owner':this['instance'][_0x33c2f6(0x194)]}}),_0x385631={};if(_0xd06a17&&_0xd06a17[_0x33c2f6(0x234)]){let _0x3ae2ad=_0xd06a17[_0x33c2f6(0x234)];typeof _0x3ae2ad[_0x33c2f6(0x13d)]==_0x33c2f6(0x46f)&&(_0x385631[_0x33c2f6(0x13d)]=_0x3ae2ad[_0x33c2f6(0x13d)]),typeof _0x3ae2ad[_0x33c2f6(0x646)]==_0x33c2f6(0x46f)&&(_0x385631[_0x33c2f6(0x646)]=_0x3ae2ad[_0x33c2f6(0x646)]),typeof _0x3ae2ad[_0x33c2f6(0x2ea)]=='string'&&(_0x385631['email']=_0x3ae2ad[_0x33c2f6(0x2ea)]),typeof _0x3ae2ad['cpf']==_0x33c2f6(0x46f)&&(_0x385631[_0x33c2f6(0x16f)]=_0x3ae2ad[_0x33c2f6(0x16f)]),typeof _0x3ae2ad[_0x33c2f6(0x2e7)]==_0x33c2f6(0x46f)&&(_0x385631[_0x33c2f6(0x2e7)]=_0x3ae2ad[_0x33c2f6(0x2e7)]),typeof _0x3ae2ad[_0x33c2f6(0x576)]==_0x33c2f6(0x46f)&&(_0x385631[_0x33c2f6(0x576)]=_0x3ae2ad['notas']),typeof _0x3ae2ad[_0x33c2f6(0x649)]==_0x33c2f6(0x46f)&&(_0x385631[_0x33c2f6(0x649)]=_0x3ae2ad[_0x33c2f6(0x649)]),Array[_0x33c2f6(0x2fc)](_0x3ae2ad[_0x33c2f6(0x49d)])&&(_0x385631[_0x33c2f6(0x49d)]=_0x3ae2ad['tags'][_0x33c2f6(0x31f)](',\x20'));}return _0xd06a17&&_0xd06a17['leadInfo']&&_0xd06a17[_0x33c2f6(0x234)][_0x33c2f6(0x2a4)]&&_0xd06a17[_0x33c2f6(0x234)][_0x33c2f6(0x2a4)][_0x33c2f6(0x2c9)](_0x59e791=>{const _0x6eb3ad=_0x33c2f6;let _0x503c0c=this[_0x6eb3ad(0x11c)]?.[_0x6eb3ad(0x2a4)]['find'](_0x942bdb=>_0x942bdb['_id']===_0x59e791[_0x6eb3ad(0x3f7)]);_0x503c0c&&(_0x385631[_0x503c0c[_0x6eb3ad(0x372)]]=_0x59e791[_0x6eb3ad(0x3cb)]);}),_0x385631;}async[a0_0x4a837a(0x23e)](_0x1215c6,_0x4534bb){const _0xf7c4d5=a0_0x4a837a;let _0x525c82=await this['getVariablesChat'](_0x4534bb);return this[_0xf7c4d5(0x602)](_0x1215c6,_0x525c82);}async[a0_0x4a837a(0x391)](_0x480130){const _0x3d389e=a0_0x4a837a;try{if(this[_0x3d389e(0x5a9)][_0x3d389e(0x660)](this[_0x3d389e(0x2fb)]+'\x20('+this[_0x3d389e(0x634)][_0x3d389e(0x194)]+'):\x20Edit\x20schedule\x20message...'),_0x480130[_0x3d389e(0x580)]&&_0x480130['_id']){if(this[_0x3d389e(0x243)]===_0x480130[_0x3d389e(0x3f7)][_0x3d389e(0x42d)]())throw new Error(_0x3d389e(0x343));let _0x49abc3=await L[_0x3d389e(0x5d0)](_0x480130['_id']);return setTimeout(()=>this[_0x3d389e(0x3c7)](),0x7d0),_0x49abc3;}let _0x3bfd29;if(_0x480130[_0x3d389e(0x3f7)]&&(_0x3bfd29=await L['findOne']({'owner':this['instance'][_0x3d389e(0x194)],'_id':_0x480130[_0x3d389e(0x3f7)]})),_0x3bfd29){let _0x440827=_0x480130;this[_0x3d389e(0x243)]===_0x3bfd29[_0x3d389e(0x3f7)][_0x3d389e(0x42d)]()&&(_0x440827={'status':_0x480130[_0x3d389e(0x2e7)],'_id':_0x480130['_id']});let _0x401100=await L[_0x3d389e(0x55a)](_0x3bfd29[_0x3d389e(0x3f7)],{'$set':_0x440827},{'new':!0x0});return setTimeout(()=>this[_0x3d389e(0x3c7)](),0x7d0),_0x401100;}else{_0x480130[_0x3d389e(0x404)]=this['instance']['wuid'];let _0x58ef5f=await new L(_0x480130)['save']();return setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x58ef5f;}}catch(_0x348119){throw this['logger']['error'](this[_0x3d389e(0x2fb)]+'\x20('+this[_0x3d389e(0x634)]['wuid']+_0x3d389e(0x16e)+JSON[_0x3d389e(0xe8)](_0x348119,null,0x2)),new g(_0x3d389e(0x38a)+_0x348119['message']);}}async[a0_0x4a837a(0x17f)](){const _0x56181d=a0_0x4a837a;try{return await L[_0x56181d(0x33c)]({'owner':this['instance']['wuid']})[_0x56181d(0xde)]({'when':0x1});}catch(_0x3de16a){throw this[_0x56181d(0x5a9)][_0x56181d(0x60b)](this[_0x56181d(0x2fb)]+'\x20('+this['instance']['wuid']+_0x56181d(0x267)+JSON['stringify'](_0x3de16a,null,0x2)),new g(_0x56181d(0x38a)+_0x3de16a['message']);}}async[a0_0x4a837a(0x4c1)](){const _0x51c04b=a0_0x4a837a;try{return await L['deleteMany']({'owner':this[_0x51c04b(0x634)]['wuid'],'status':'done'}),this[_0x51c04b(0x5a9)][_0x51c04b(0x660)](this[_0x51c04b(0x2fb)]+'\x20('+this[_0x51c04b(0x634)][_0x51c04b(0x194)]+_0x51c04b(0x238)),this[_0x51c04b(0x17f)]();}catch(_0x2f09e9){throw this[_0x51c04b(0x5a9)][_0x51c04b(0x60b)](this[_0x51c04b(0x2fb)]+'\x20('+this[_0x51c04b(0x634)][_0x51c04b(0x194)]+_0x51c04b(0x2ad)+JSON[_0x51c04b(0xe8)](_0x2f09e9,null,0x2)),new g('Erro:'+_0x2f09e9[_0x51c04b(0x310)]);}}async[a0_0x4a837a(0xce)](_0x3d220c,_0x1ca472){const _0x2c8ab0=a0_0x4a837a;try{if(_0x1ca472[_0x2c8ab0(0x295)]===_0x2c8ab0(0x2d4)&&!this['AutomateSystem']?.[_0x2c8ab0(0x4c5)][_0x2c8ab0(0x258)])return this[_0x2c8ab0(0x5a9)]['error'](this[_0x2c8ab0(0x2fb)]+'\x20('+this[_0x2c8ab0(0x634)]['wuid']+_0x2c8ab0(0x17b)),{'error':!0x0,'detail':_0x2c8ab0(0xd3)};switch(_0x1ca472['type']){case _0x2c8ab0(0x472):return await this[_0x2c8ab0(0x5af)](_0x1ca472,_0x3d220c);case'media':return await this[_0x2c8ab0(0x5d1)](_0x1ca472,_0x3d220c);case _0x2c8ab0(0x272):return await this[_0x2c8ab0(0x5ab)](_0x1ca472,_0x3d220c);case _0x2c8ab0(0x2d4):let _0x134eff=new Pe();return _0x134eff[_0x2c8ab0(0x372)]=_0x1ca472['flowName'],_0x134eff[_0x2c8ab0(0x397)]=_0x3d220c,await this[_0x2c8ab0(0x1c1)](_0x134eff);break;default:return this[_0x2c8ab0(0x5a9)][_0x2c8ab0(0x60b)](this[_0x2c8ab0(0x2fb)]+'\x20('+this[_0x2c8ab0(0x634)][_0x2c8ab0(0x194)]+_0x2c8ab0(0x26a)+_0x1ca472[_0x2c8ab0(0x295)]),{'error':!0x0,'detail':_0x2c8ab0(0x627)};}}catch(_0x381fef){return this[_0x2c8ab0(0x5a9)][_0x2c8ab0(0x60b)](this['instanceName']+'\x20('+this[_0x2c8ab0(0x634)][_0x2c8ab0(0x194)]+_0x2c8ab0(0x61f)+JSON[_0x2c8ab0(0xe8)](_0x381fef,null,0x2)),{'error':!0x0,'detail':_0x381fef[_0x2c8ab0(0x310)]};}}[a0_0x4a837a(0x4be)](_0x5e2127){const _0x812758=a0_0x4a837a;let _0x258736=_0x5e2127['split']('|'),_0x2f9641=Math[_0x812758(0x380)](Math[_0x812758(0x5e0)]()*_0x258736['length']);return _0x258736[_0x2f9641][_0x812758(0x268)]();}async[a0_0x4a837a(0x5af)](_0x537cc,_0x5b36b7){const _0x5a9f01=a0_0x4a837a;if(this[_0x5a9f01(0x5a9)][_0x5a9f01(0x660)](this[_0x5a9f01(0x2fb)]+'\x20('+this['instance'][_0x5a9f01(0x194)]+_0x5a9f01(0x4dd)),!_0x537cc[_0x5a9f01(0x310)][_0x5a9f01(0x472)]||_0x537cc['message'][_0x5a9f01(0x472)]['length']===0x0)return{'error':!0x0,'detail':_0x5a9f01(0x356)};let _0x2372cc=this[_0x5a9f01(0x4be)](_0x537cc[_0x5a9f01(0x310)][_0x5a9f01(0x472)]),_0x35390f=await this['replaceVariablesChat'](_0x2372cc,_0x5b36b7),_0x2b04f6={'number':_0x5b36b7,'options':{'delay':_0x537cc[_0x5a9f01(0x310)][_0x5a9f01(0x1f2)]},'textMessage':{'text':_0x35390f}},_0xa58b89=null;try{let _0x799ba2=await this[_0x5a9f01(0x4a2)](_0x2b04f6);if(_0x799ba2&&_0x799ba2[_0x5a9f01(0x2e7)])return{'error':!0x1,'id':_0x799ba2[_0x5a9f01(0x1a8)]['id']};_0xa58b89=JSON['stringify'](_0x799ba2),this['logger']['verbose'](this[_0x5a9f01(0x2fb)]+'\x20('+this[_0x5a9f01(0x634)][_0x5a9f01(0x194)]+_0x5a9f01(0x4b2)+_0xa58b89);}catch(_0x280ed2){this[_0x5a9f01(0x5a9)][_0x5a9f01(0x60b)](this[_0x5a9f01(0x2fb)]+'\x20('+this[_0x5a9f01(0x634)][_0x5a9f01(0x194)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20'+JSON[_0x5a9f01(0xe8)](_0x280ed2,null,0x2)),_0xa58b89=_0x280ed2[_0x5a9f01(0x310)];}if(_0xa58b89)return{'error':!0x0,'detail':(typeof _0xa58b89==_0x5a9f01(0x32b)?JSON[_0x5a9f01(0xe8)](_0xa58b89,null,0x2):_0xa58b89)[_0x5a9f01(0x522)](/[\[\]{}\n]/g,'\x20')[_0x5a9f01(0x522)](/  +/g,'\x20')};}async['scheduleSendMedia'](_0x44be28,_0x575d76){const _0x22d917=a0_0x4a837a;this[_0x22d917(0x5a9)][_0x22d917(0x660)](this[_0x22d917(0x2fb)]+'\x20('+this[_0x22d917(0x634)][_0x22d917(0x194)]+_0x22d917(0x22e));let _0x123d31;if(_0x44be28[_0x22d917(0x310)][_0x22d917(0x472)]&&_0x44be28[_0x22d917(0x310)][_0x22d917(0x472)][_0x22d917(0x58b)]>0x0){let _0x3c448e=this[_0x22d917(0x4be)](_0x44be28['message'][_0x22d917(0x472)]);_0x123d31=await this[_0x22d917(0x23e)](_0x3c448e,_0x575d76);}let _0xb75460={'number':_0x575d76,'options':{'delay':_0x44be28[_0x22d917(0x310)][_0x22d917(0x1f2)]},'mediaMessage':{'mediatype':_0x44be28[_0x22d917(0x310)][_0x22d917(0x361)],'caption':_0x123d31,'media':_0x44be28['message'][_0x22d917(0x371)]}},_0x55f45c=null;try{let _0x3a4021=await this[_0x22d917(0x494)](_0xb75460);if(_0x3a4021&&_0x3a4021[_0x22d917(0x2e7)])return{'error':!0x1,'id':_0x3a4021['key']['id']};_0x55f45c=JSON[_0x22d917(0xe8)](_0x3a4021),this['logger'][_0x22d917(0x660)](this[_0x22d917(0x2fb)]+'\x20('+this[_0x22d917(0x634)][_0x22d917(0x194)]+_0x22d917(0x4b2)+_0x55f45c);}catch(_0x29cfc3){this[_0x22d917(0x5a9)]['error'](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20'+JSON[_0x22d917(0xe8)](_0x29cfc3,null,0x2)),_0x55f45c=_0x29cfc3[_0x22d917(0x310)];}if(_0x55f45c)return{'error':!0x0,'detail':(typeof _0x55f45c==_0x22d917(0x32b)?JSON[_0x22d917(0xe8)](_0x55f45c,null,0x2):_0x55f45c)[_0x22d917(0x522)](/[\[\]{}\n]/g,'\x20')[_0x22d917(0x522)](/  +/g,'\x20')};}async['scheduleSendAudio'](_0x5f4216,_0x1a2a88){const _0x947ac6=a0_0x4a837a;this['logger'][_0x947ac6(0x660)](this[_0x947ac6(0x2fb)]+'\x20('+this[_0x947ac6(0x634)]['wuid']+_0x947ac6(0x240));let _0x4bf249={'number':_0x1a2a88,'options':{'delay':_0x5f4216[_0x947ac6(0x310)][_0x947ac6(0x1f2)]},'audioMessage':{'audio':_0x5f4216['message'][_0x947ac6(0x371)]}},_0x4750ff=null;try{let _0x1dfce8=await this['audioWhatsapp'](_0x4bf249);if(_0x1dfce8&&_0x1dfce8['status'])return{'error':!0x1,'id':_0x1dfce8[_0x947ac6(0x1a8)]['id']};_0x4750ff=JSON[_0x947ac6(0xe8)](_0x1dfce8),this['logger']['verbose'](this[_0x947ac6(0x2fb)]+'\x20('+this['instance'][_0x947ac6(0x194)]+'):\x20'+_0x4750ff);}catch(_0x6222e3){this[_0x947ac6(0x5a9)][_0x947ac6(0x60b)](this[_0x947ac6(0x2fb)]+'\x20('+this[_0x947ac6(0x634)][_0x947ac6(0x194)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20'+JSON[_0x947ac6(0xe8)](_0x6222e3,null,0x2)),_0x4750ff=_0x6222e3['message'];}if(_0x4750ff)return{'error':!0x0,'detail':(typeof _0x4750ff=='object'?JSON[_0x947ac6(0xe8)](_0x4750ff,null,0x2):_0x4750ff)['replace'](/[\[\]{}\n]/g,'\x20')[_0x947ac6(0x522)](/  +/g,'\x20')};}},be=require(a0_0x4a837a(0x16a)),_t=class c{constructor(_0x558382,_0x453b9d,_0x5cef87){const _0x2553f9=a0_0x4a837a;this['eventEmitter']=_0x558382,this[_0x2553f9(0x1c6)]=_0x453b9d,this['repository']=_0x5cef87,this['db']={},this[_0x2553f9(0x21d)]={},this[_0x2553f9(0x5a9)]=new C(c[_0x2553f9(0x372)]),this[_0x2553f9(0x302)]={},(this[_0x2553f9(0x229)](),this['noConnection'](),this['delInstanceFiles'](),Object[_0x2553f9(0x334)](this['db'],_0x453b9d[_0x2553f9(0x17e)]('DATABASE')),Object[_0x2553f9(0x334)](this[_0x2553f9(0x21d)],_0x453b9d[_0x2553f9(0x17e)](_0x2553f9(0x416))),this['dbInstance']=this['db'][_0x2553f9(0x149)]?this[_0x2553f9(0x5c0)][_0x2553f9(0xf2)]?.['db'](this['db'][_0x2553f9(0xfd)][_0x2553f9(0xbc)]+'-instances'):void 0x0,this[_0x2553f9(0x2d1)]=this['redis'][_0x2553f9(0x149)]?new ne(this[_0x2553f9(0x21d)]):void 0x0);}[a0_0x4a837a(0x385)](_0x23dfd6){const _0x3a5900=a0_0x4a837a;let _0x1f041e=this['configService'][_0x3a5900(0x17e)](_0x3a5900(0x4e6));typeof _0x1f041e==_0x3a5900(0x62e)&&_0x1f041e>0x0&&setTimeout(()=>{const _0x1e999b=_0x3a5900;this[_0x1e999b(0x302)][_0x23dfd6]?.[_0x1e999b(0x26b)]?.[_0x1e999b(0x64f)]!==_0x1e999b(0x10f)&&delete this[_0x1e999b(0x302)][_0x23dfd6];},0x3e8*0x3c*_0x1f041e);}async['instanceInfo'](_0x3cc82c){const _0x1a81c4=a0_0x4a837a;if(_0x3cc82c&&!this[_0x1a81c4(0x302)][_0x3cc82c])throw new x(_0x1a81c4(0x133)+_0x3cc82c+'\x22\x20not\x20found');let _0x14de8e=[];for await(let [_0x56ea64,_0x6fde19]of Object[_0x1a81c4(0x44f)](this['waInstances']))if(_0x6fde19&&_0x6fde19[_0x1a81c4(0x26b)][_0x1a81c4(0x64f)]==='open'){let _0x565fa8=await this['repository'][_0x1a81c4(0x146)][_0x1a81c4(0x33c)](_0x56ea64);_0x14de8e[_0x1a81c4(0x656)]({'instance':{'instanceName':_0x56ea64,'apikey':_0x565fa8[_0x1a81c4(0x5d7)],'owner':_0x6fde19['wuid'],'profileName':await _0x6fde19['getProfileName']()||_0x1a81c4(0x110),'profilePictureUrl':_0x6fde19[_0x1a81c4(0x638)]}});}return _0x14de8e[_0x1a81c4(0x33c)](_0x12fe47=>_0x12fe47[_0x1a81c4(0x634)][_0x1a81c4(0x2fb)]===_0x3cc82c)??_0x14de8e;}[a0_0x4a837a(0x1e4)](){setInterval(async()=>{const _0x400c5e=a0_0x22fc;if(this['db'][_0x400c5e(0x149)])(await this[_0x400c5e(0x45e)]['collections']())[_0x400c5e(0x2c9)](async _0x63d360=>{const _0x527074=_0x400c5e;let _0x106220=_0x63d360[_0x527074(0x53c)][_0x527074(0x522)](/^[\w-]+./,'');await this[_0x527074(0x45e)][_0x527074(0x65e)](_0x106220)[_0x527074(0x561)]({'$or':[{'_id':{'$regex':/^app.state.*/}},{'_id':{'$regex':/^session-.*/}}]});});else{let _0x5a88ee=(0x0,te[_0x400c5e(0xa9)])(V,{'encoding':_0x400c5e(0x2ac)});for await(let _0xaf477b of _0x5a88ee)_0xaf477b[_0x400c5e(0xba)]()&&(0x0,te['readdirSync'])((0x0,be[_0x400c5e(0x31f)])(V,_0xaf477b[_0x400c5e(0x372)]),{'encoding':_0x400c5e(0x2ac)})[_0x400c5e(0x2c9)](async _0x1b4c86=>{const _0x401590=_0x400c5e;(_0x1b4c86[_0x401590(0x37e)](/^app.state.*/)||_0x1b4c86['match'](/^session-.*/))&&(0x0,te[_0x401590(0x434)])((0x0,be['join'])(V,_0xaf477b[_0x401590(0x372)],_0x1b4c86),{'recursive':!0x0,'force':!0x0});});}},0xe10*0x3e8*0x2);}async['cleaningUp'](_0x3aefee){const _0x145022=a0_0x4a837a;this['db'][_0x145022(0x149)]&&(await this[_0x145022(0x5c0)]['dbServer'][_0x145022(0x33b)](),(await this[_0x145022(0x45e)]['collections']())[_0x145022(0x58b)]>0x0&&await this['dbInstance'][_0x145022(0x453)](_0x3aefee)),this[_0x145022(0x21d)][_0x145022(0x149)]&&(this[_0x145022(0x2d1)][_0x145022(0x3c3)]=_0x3aefee,await this[_0x145022(0x2d1)]['delAll']()),!this['db'][_0x145022(0x149)]&&!this[_0x145022(0x21d)][_0x145022(0x149)]&&(0x0,te['rmSync'])((0x0,be[_0x145022(0x31f)])(V,_0x3aefee),{'recursive':!0x0,'force':!0x0});}async[a0_0x4a837a(0x46a)](){const _0x17e05b=a0_0x4a837a;let _0x11ed80=async _0x4af641=>{const _0x4a1dd0=a0_0x22fc;let _0x35b1ef=new ye(this[_0x4a1dd0(0x1c6)],this[_0x4a1dd0(0x123)],this[_0x4a1dd0(0x5c0)]);_0x35b1ef['instanceName']=_0x4af641,await _0x35b1ef[_0x4a1dd0(0x641)](),this[_0x4a1dd0(0x302)][_0x4af641]=_0x35b1ef;};try{if(this['redis'][_0x17e05b(0x149)]){let _0x1de328=await this[_0x17e05b(0x2d1)]['instanceKeys']();_0x1de328?.[_0x17e05b(0x58b)]>0x0&&_0x1de328[_0x17e05b(0x2c9)](async _0x3365c8=>await _0x11ed80(_0x3365c8[_0x17e05b(0x24d)](':')[0x1]));}if(this['db'][_0x17e05b(0x149)]){await this[_0x17e05b(0x5c0)][_0x17e05b(0xf2)][_0x17e05b(0x33b)]();let _0x26554e=await this[_0x17e05b(0x45e)][_0x17e05b(0x1b1)]();_0x26554e[_0x17e05b(0x58b)]>0x0&&_0x26554e[_0x17e05b(0x2c9)](async _0x5c846b=>await _0x11ed80(_0x5c846b['namespace'][_0x17e05b(0x522)](/^[\w-]+\./,'')));return;}let _0x553ca6=(0x0,te['opendirSync'])(V,{'encoding':_0x17e05b(0x2ac)});for await(let _0x28c049 of _0x553ca6)if(_0x28c049[_0x17e05b(0xba)]()){if((0x0,te[_0x17e05b(0x616)])((0x0,be['join'])(V,_0x28c049[_0x17e05b(0x372)]),{'encoding':_0x17e05b(0x2ac)})['length']===0x0){(0x0,te[_0x17e05b(0x434)])((0x0,be['join'])(V,_0x28c049[_0x17e05b(0x372)]),{'recursive':!0x0,'force':!0x0});break;}await _0x11ed80(_0x28c049[_0x17e05b(0x372)]);}}catch(_0x4b4a87){this['logger'][_0x17e05b(0x60b)](_0x4b4a87);}}[a0_0x4a837a(0x229)](){this['eventEmitter']['on']('remove.instance',async _0xdb7af7=>{const _0x32e9de=a0_0x22fc;try{this[_0x32e9de(0x302)][_0xdb7af7]=void 0x0;}catch{}try{this['cleaningUp'](_0xdb7af7);}finally{this[_0x32e9de(0x5a9)][_0x32e9de(0x558)](_0x32e9de(0x133)+_0xdb7af7+'\x22\x20-\x20REMOVED');}});}[a0_0x4a837a(0x30a)](){const _0x1e650b=a0_0x4a837a;this[_0x1e650b(0x123)]['on'](_0x1e650b(0x409),async _0xa1d6b3=>{const _0x106715=_0x1e650b;try{this[_0x106715(0x302)][_0xa1d6b3]=void 0x0,this[_0x106715(0x475)](_0xa1d6b3);}catch(_0xe99632){this[_0x106715(0x5a9)][_0x106715(0x60b)]({'localError':'noConnection','warn':_0x106715(0x598),'error':_0xe99632});}finally{this[_0x106715(0x5a9)]['warn'](_0x106715(0x133)+_0xa1d6b3+_0x106715(0x425));}});}},Pt=class extends W{constructor(_0x362ff4){super(_0x362ff4),this['configService']=_0x362ff4;}['getChatModelForOwner'](_0x45b29e){return xs(_0x45b29e);}async[a0_0x4a837a(0x426)](_0x5bf7af){const _0x3f4a45=a0_0x4a837a;if(_0x5bf7af['length']!==0x0)try{return{'insertCount':(await this[_0x3f4a45(0x161)](_0x5bf7af[0x0][_0x3f4a45(0x404)])[_0x3f4a45(0x44b)]([..._0x5bf7af]))[_0x3f4a45(0x58b)]};}catch(_0x2a2f08){return _0x2a2f08;}}async['find'](_0x1f6f4f){const _0x78ad9e=a0_0x4a837a;try{return await this[_0x78ad9e(0x161)](_0x1f6f4f['where'][_0x78ad9e(0x404)])[_0x78ad9e(0x33c)]({..._0x1f6f4f[_0x78ad9e(0x61c)]})[_0x78ad9e(0xde)]({'lastmsg':-0x1})[_0x78ad9e(0x4f6)](_0x1f6f4f?.['limit']??0x0)[_0x78ad9e(0x16d)]();}catch{return[];}}async['delete'](_0x26737b){const _0x15b3f2=a0_0x4a837a;try{return{'deletedCount':(await this[_0x15b3f2(0x161)](_0x26737b[_0x15b3f2(0x61c)][_0x15b3f2(0x404)])['deleteMany']({..._0x26737b[_0x15b3f2(0x61c)]}))[_0x15b3f2(0x1a4)]};}catch(_0x34274d){return{'error':_0x34274d?.[_0x15b3f2(0x42d)]()};}}async[a0_0x4a837a(0x376)](_0x659a1){const _0x4dd460=a0_0x4a837a;try{return await this['getChatModelForOwner'](_0x659a1['where'][_0x4dd460(0x404)])['deleteMany']({..._0x659a1[_0x4dd460(0x61c)]}),[];}catch(_0x4d4c41){return{'error':_0x4d4c41?.[_0x4dd460(0x42d)]()};}}async['findOne'](_0x819e1b){const _0x60b126=a0_0x4a837a;try{return await this[_0x60b126(0x161)](_0x819e1b[_0x60b126(0x61c)]['owner'])[_0x60b126(0x596)]({..._0x819e1b[_0x60b126(0x61c)]})[_0x60b126(0x16d)]();}catch{return null;}}async[a0_0x4a837a(0x3ed)](_0x173a38,_0x3cc73a,_0x3ce81d){const _0x4e5561=a0_0x4a837a;try{let _0x163269={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x3ce81d};return await this['getChatModelForOwner'](_0x173a38['where'][_0x4e5561(0x404)])['findOneAndUpdate']({..._0x173a38[_0x4e5561(0x61c)]},{'$set':_0x3cc73a},_0x163269);}catch(_0x48769b){return console['error'](_0x48769b),null;}}async[a0_0x4a837a(0xa6)](_0x6a1d34){const _0x3cfd15=a0_0x4a837a;try{let _0x473907=this[_0x3cfd15(0x161)](_0x6a1d34[0x0][_0x3cfd15(0x4d2)]['where'][_0x3cfd15(0x404)]),_0x529b14=_0x6a1d34[_0x3cfd15(0x227)](_0x228c77=>({'updateOne':{'filter':{..._0x228c77['query'][_0x3cfd15(0x61c)]},'update':{'$set':_0x228c77[_0x3cfd15(0x525)]}}}));return(await _0x473907[_0x3cfd15(0x1e8)](_0x529b14))[_0x3cfd15(0x19a)];}catch(_0x5a2252){return console[_0x3cfd15(0x60b)](_0x5a2252),0x0;}}},xt=class{constructor(_0x4ddbc0){const _0x3b7951=a0_0x4a837a;this[_0x3b7951(0x63b)]=_0x4ddbc0;}async[a0_0x4a837a(0x66a)]({instanceName:_0x4ea686},_0x48feaf){const _0x520ce2=a0_0x4a837a;return await this['waMonitor']['waInstances'][_0x4ea686][_0x520ce2(0x66a)](_0x48feaf);}async[a0_0x4a837a(0x134)]({instanceName:_0x483f7e},_0x3233ab){const _0x53d94c=a0_0x4a837a;return await this[_0x53d94c(0x63b)][_0x53d94c(0x302)][_0x483f7e][_0x53d94c(0x134)](_0x3233ab);}async[a0_0x4a837a(0x4b0)]({instanceName:_0x20a2aa},_0x5b23db){const _0x1ecd91=a0_0x4a837a;return await this['waMonitor'][_0x1ecd91(0x302)][_0x20a2aa][_0x1ecd91(0x533)](_0x5b23db);}async[a0_0x4a837a(0x4b9)]({instanceName:_0x772c9a},_0x5d6ad){const _0x3bbc0c=a0_0x4a837a;return await this[_0x3bbc0c(0x63b)][_0x3bbc0c(0x302)][_0x772c9a][_0x3bbc0c(0x4b9)](_0x5d6ad);}async['deleteMessage']({instanceName:_0x2e03f8},_0x42bffc){const _0xcd156c=a0_0x4a837a;return await this[_0xcd156c(0x63b)]['waInstances'][_0x2e03f8][_0xcd156c(0x31c)](_0x42bffc);}async[a0_0x4a837a(0x1fd)]({instanceName:_0xbe23c0},_0x6b4f1a){const _0x4929ef=a0_0x4a837a;return await this[_0x4929ef(0x63b)][_0x4929ef(0x302)][_0xbe23c0][_0x4929ef(0x40f)](_0x6b4f1a[_0x4929ef(0x62e)]);}async['fetchProfile']({instanceName:_0x4fd952},_0x1f26c6){const _0x2ba7aa=a0_0x4a837a;return await this[_0x2ba7aa(0x63b)]['waInstances'][_0x4fd952][_0x2ba7aa(0x4aa)](_0x1f26c6[_0x2ba7aa(0x62e)]);}async[a0_0x4a837a(0x534)]({instanceName:_0x58e1ba},_0x5434a7){return await this['waMonitor']['waInstances'][_0x58e1ba]['updatePresence'](_0x5434a7);}async['fetchContacts']({instanceName:_0x590100},_0x1f2904){const _0x322e06=a0_0x4a837a;return await this[_0x322e06(0x63b)][_0x322e06(0x302)][_0x590100]['fetchContacts'](_0x1f2904);}async[a0_0x4a837a(0x5c7)]({instanceName:_0x26e101},_0x3df1c7){const _0x36468a=a0_0x4a837a;return await this[_0x36468a(0x63b)]['waInstances'][_0x26e101][_0x36468a(0x5c7)](_0x3df1c7);}async[a0_0x4a837a(0x34d)]({instanceName:_0x16d41a},_0x346eb3){const _0x37b203=a0_0x4a837a;return await this[_0x37b203(0x63b)]['waInstances'][_0x16d41a]['fetchMessages'](_0x346eb3);}async[a0_0x4a837a(0x545)]({instanceName:_0x3e00e2}){const _0x4e96e2=a0_0x4a837a;return await this[_0x4e96e2(0x63b)][_0x4e96e2(0x302)][_0x3e00e2][_0x4e96e2(0x545)]();}async[a0_0x4a837a(0x150)]({instanceName:_0x1ddd30}){const _0x1f898d=a0_0x4a837a;return await this[_0x1f898d(0x63b)][_0x1f898d(0x302)][_0x1ddd30][_0x1f898d(0x150)]();}async[a0_0x4a837a(0x571)]({instanceName:_0x51474d},_0x3c6da3){const _0x5f3065=a0_0x4a837a;return await this[_0x5f3065(0x63b)][_0x5f3065(0x302)][_0x51474d][_0x5f3065(0x571)](_0x3c6da3);}async['fetchBusinessProfile']({instanceName:_0x4f35e0},_0x5a1e07){const _0x4fee15=a0_0x4a837a;return await this[_0x4fee15(0x63b)][_0x4fee15(0x302)][_0x4f35e0][_0x4fee15(0x381)](_0x5a1e07[_0x4fee15(0x62e)]);}async[a0_0x4a837a(0x674)]({instanceName:_0x572628},_0x10da77){const _0x2eda76=a0_0x4a837a;return await this['waMonitor'][_0x2eda76(0x302)][_0x572628][_0x2eda76(0x674)](_0x10da77['name']);}async[a0_0x4a837a(0x442)]({instanceName:_0x3ed3d9},_0x2db9ea){const _0x41f5de=a0_0x4a837a;return await this[_0x41f5de(0x63b)][_0x41f5de(0x302)][_0x3ed3d9][_0x41f5de(0x442)](_0x2db9ea[_0x41f5de(0x2e7)]);}async[a0_0x4a837a(0x252)]({instanceName:_0x3a0dee},_0x82f7f2){const _0x5c23aa=a0_0x4a837a;return await this[_0x5c23aa(0x63b)][_0x5c23aa(0x302)][_0x3a0dee][_0x5c23aa(0x252)](_0x82f7f2[_0x5c23aa(0x212)]);}async['removeProfilePicture']({instanceName:_0x485d99},_0x2e5c26){const _0x341952=a0_0x4a837a;return await this[_0x341952(0x63b)]['waInstances'][_0x485d99]['removeProfilePicture']();}},hs=require(a0_0x4a837a(0x478)),$t=class c{constructor(_0x48f90d,_0x52c59c,_0x34e164,_0x5baf08,_0x4322f7){const _0x5b1f69=a0_0x4a837a;this[_0x5b1f69(0x63b)]=_0x48f90d,this[_0x5b1f69(0x1c6)]=_0x52c59c,this['repository']=_0x34e164,this[_0x5b1f69(0x123)]=_0x5baf08,this[_0x5b1f69(0x536)]=_0x4322f7,this['logger']=new C(c[_0x5b1f69(0x372)]);}async[a0_0x4a837a(0x308)]({instanceName:_0x562a94,apikey:_0x59da65}){const _0x591b03=a0_0x4a837a;let _0x1f5e42=new ye(this[_0x591b03(0x1c6)],this[_0x591b03(0x123)],this[_0x591b03(0x5c0)]);_0x1f5e42[_0x591b03(0x2fb)]=_0x562a94,this[_0x591b03(0x63b)][_0x591b03(0x302)][_0x1f5e42[_0x591b03(0x2fb)]]=_0x1f5e42,this[_0x591b03(0x63b)][_0x591b03(0x385)](_0x1f5e42[_0x591b03(0x2fb)]);let _0x3fff26={};_0x59da65?(await this[_0x591b03(0x5c0)][_0x591b03(0x146)][_0x591b03(0x22c)]({'apikey':_0x59da65},_0x562a94),_0x3fff26[_0x591b03(0x5d7)]=_0x59da65):_0x3fff26=await this[_0x591b03(0x536)]['generateHash']({'instanceName':_0x1f5e42[_0x591b03(0x2fb)]});let _0x42fd3f;return await _0x1f5e42[_0x591b03(0x641)](),await(0x0,hs['delay'])(0x7d0),_0x42fd3f=_0x1f5e42['qrCode'],{'instance':{'instanceName':_0x1f5e42['instanceName'],'status':_0x591b03(0x1cb)},'hash':_0x3fff26,'qrcode':_0x42fd3f};}async['connectToWhatsapp']({instanceName:_0x214a72}){const _0x3374eb=a0_0x4a837a;try{let _0x3c42d8=this[_0x3374eb(0x63b)][_0x3374eb(0x302)][_0x214a72];switch(_0x3c42d8[_0x3374eb(0x26b)]?.[_0x3374eb(0x64f)]){case _0x3374eb(0x32e):return await _0x3c42d8['connectToWhatsapp'](),await(0x0,hs[_0x3374eb(0x1f2)])(0x7d0),_0x3c42d8[_0x3374eb(0x56f)];case _0x3374eb(0x1df):return _0x3c42d8[_0x3374eb(0x56f)];default:return await this[_0x3374eb(0x28e)]({'instanceName':_0x214a72});}}catch(_0x5edca9){this['logger']['log'](_0x5edca9);}}async[a0_0x4a837a(0x28e)]({instanceName:_0x458951}){const _0x329186=a0_0x4a837a;let _0xccc826=this[_0x329186(0x63b)]['waInstances'][_0x458951]['connectionStatus'],_0x419984=null;_0xccc826[_0x329186(0x64f)]===_0x329186(0x10f)&&_0x458951&&(_0x419984=await this['waMonitor'][_0x329186(0x4c4)](_0x458951));let _0x3c54b5=null;return _0xccc826[_0x329186(0x64f)]===_0x329186(0x1df)&&_0x458951&&(_0x3c54b5=this[_0x329186(0x63b)]['waInstances'][_0x458951][_0x329186(0x56f)]),{'instance':_0x458951,'connectionStatus':_0xccc826,'instanceInfo':_0x419984,'qrcode':_0x3c54b5};}async[a0_0x4a837a(0x143)]({instanceName:_0x147086}){const _0x45854d=a0_0x4a837a;try{return this[_0x45854d(0x63b)][_0x45854d(0x302)][_0x147086]?.['client']?.['ws']?.[_0x45854d(0x32e)](),{'status':_0x45854d(0x4df),'error':!0x1,'response':{'message':_0x45854d(0x362)}};}catch(_0x4d45a6){this['logger'][_0x45854d(0x60b)](_0x4d45a6);}}async[a0_0x4a837a(0x59e)]({instanceName:_0x202a57}){const _0x50b66a=a0_0x4a837a;return _0x202a57?this[_0x50b66a(0x63b)][_0x50b66a(0x4c4)](_0x202a57):this[_0x50b66a(0x63b)][_0x50b66a(0x4c4)]();}async[a0_0x4a837a(0x1c4)]({instanceName:_0x19c1c2}){const _0x1840f1=a0_0x4a837a;try{return await this[_0x1840f1(0x63b)][_0x1840f1(0x302)][_0x19c1c2]?.[_0x1840f1(0x271)]?.[_0x1840f1(0x1c4)](_0x1840f1(0x355)+_0x19c1c2),{'error':!0x1,'message':_0x1840f1(0x422)};}catch(_0x63bdcd){throw new A(_0x63bdcd['toString']());}}async[a0_0x4a837a(0xac)]({instanceName:_0x4c7bab}){const _0x1ab952=a0_0x4a837a;if((await this[_0x1ab952(0x28e)]({'instanceName':_0x4c7bab}))['connectionStatus'][_0x1ab952(0x64f)]===_0x1ab952(0x10f))throw new g(['Deletion\x20failed',_0x1ab952(0x10b)]);try{return delete this[_0x1ab952(0x63b)][_0x1ab952(0x302)][_0x4c7bab],{'error':!0x1,'message':_0x1ab952(0x1ad)};}catch(_0x36cdb3){throw new g(_0x36cdb3['toString']());}}async['refreshToken'](_0x3af5e9,_0x5cbfac){const _0x11b471=a0_0x4a837a;return await this[_0x11b471(0x536)][_0x11b471(0x2e6)](_0x5cbfac);}},se=require('class-validator'),kt=class{constructor(_0x2abd7a){this['waMonitor']=_0x2abd7a;}async[a0_0x4a837a(0xa5)]({instanceName:_0x41e099},_0x29b96c){const _0x432260=a0_0x4a837a;return await this[_0x432260(0x63b)][_0x432260(0x302)][_0x41e099][_0x432260(0x4a2)](_0x29b96c);}async[a0_0x4a837a(0x335)]({instanceName:_0x41d2eb},_0xc01498){const _0x446590=a0_0x4a837a;if((0x0,se[_0x446590(0x266)])(_0xc01498?.[_0x446590(0x494)]?.[_0x446590(0xcf)])&&!_0xc01498?.[_0x446590(0x494)]?.['fileName'])throw new g(_0x446590(0x575));if((0x0,se[_0x446590(0x491)])(_0xc01498?.[_0x446590(0x494)]?.[_0x446590(0xcf)])||(0x0,se[_0x446590(0x266)])(_0xc01498?.['mediaMessage']?.[_0x446590(0xcf)]))return await this[_0x446590(0x63b)][_0x446590(0x302)][_0x41d2eb][_0x446590(0x494)](_0xc01498);throw new g(_0x446590(0x3bf));}async['sendSticker']({instanceName:_0x210446},_0x31f0b9){const _0x44ac56=a0_0x4a837a;if((0x0,se[_0x44ac56(0x491)])(_0x31f0b9[_0x44ac56(0x639)][_0x44ac56(0x59c)])||(0x0,se['isBase64'])(_0x31f0b9[_0x44ac56(0x639)]['image']))return await this[_0x44ac56(0x63b)]['waInstances'][_0x210446][_0x44ac56(0x19b)](_0x31f0b9);throw new g('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async['sendWhatsAppAudio']({instanceName:_0x3ed800},_0xa099f7){const _0x8c5f4b=a0_0x4a837a;if((0x0,se[_0x8c5f4b(0x491)])(_0xa099f7[_0x8c5f4b(0x18e)][_0x8c5f4b(0x272)])||(0x0,se[_0x8c5f4b(0x266)])(_0xa099f7[_0x8c5f4b(0x18e)][_0x8c5f4b(0x272)]))return await this['waMonitor']['waInstances'][_0x3ed800][_0x8c5f4b(0x1b0)](_0xa099f7);throw new g(_0x8c5f4b(0x3bf));}async[a0_0x4a837a(0x40b)]({instanceName:_0x32eb89},_0x35457e){const _0x2ef456=a0_0x4a837a;if((0x0,se[_0x2ef456(0x266)])(_0x35457e[_0x2ef456(0x4a9)][_0x2ef456(0x494)]?.[_0x2ef456(0xcf)])&&!_0x35457e[_0x2ef456(0x4a9)][_0x2ef456(0x494)]?.['fileName'])throw new g(_0x2ef456(0x575));return await this[_0x2ef456(0x63b)][_0x2ef456(0x302)][_0x32eb89][_0x2ef456(0x4a9)](_0x35457e);}async[a0_0x4a837a(0x5eb)]({instanceName:_0x3321b5},_0x250c86){const _0x23f46c=a0_0x4a837a;return await this[_0x23f46c(0x63b)]['waInstances'][_0x3321b5][_0x23f46c(0x5e2)](_0x250c86);}async['sendPoll']({instanceName:_0x3d5987},_0x427d5b){const _0x4209d1=a0_0x4a837a;return await this['waMonitor']['waInstances'][_0x3d5987][_0x4209d1(0x5b9)](_0x427d5b);}async[a0_0x4a837a(0x55f)]({instanceName:_0x2e72e1},_0x5ad460){const _0x4bbc6e=a0_0x4a837a;return await this[_0x4bbc6e(0x63b)][_0x4bbc6e(0x302)][_0x2e72e1][_0x4bbc6e(0x107)](_0x5ad460);}async[a0_0x4a837a(0x32c)]({instanceName:_0x11d044},_0x1632b4){const _0x33870b=a0_0x4a837a;return await this['waMonitor'][_0x33870b(0x302)][_0x11d044][_0x33870b(0x168)](_0x1632b4);}async['sendReaction']({instanceName:_0x3ab4f2},_0x2ca440){const _0x565f1c=a0_0x4a837a;if(!_0x2ca440['reactionMessage'][_0x565f1c(0x30c)][_0x565f1c(0x37e)](/[^\(\)\w\sà-ú"-\+]+/))throw new g('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this['waMonitor']['waInstances'][_0x3ab4f2][_0x565f1c(0x531)](_0x2ca440);}async[a0_0x4a837a(0xcb)]({instanceName:_0x319203},_0x88749c){const _0x1b0965=a0_0x4a837a;return await this[_0x1b0965(0x63b)]['waInstances'][_0x319203][_0x1b0965(0x202)](_0x88749c);}},Lt=class{constructor(_0x4ed718){const _0x4f7ec8=a0_0x4a837a;this[_0x4f7ec8(0x63b)]=_0x4ed718;}async[a0_0x4a837a(0x659)](_0x1e7e9c,_0x5c85be){const _0x3e4f4b=a0_0x4a837a;return await this[_0x3e4f4b(0x63b)][_0x3e4f4b(0x302)][_0x1e7e9c[_0x3e4f4b(0x2fb)]][_0x3e4f4b(0x659)](_0x5c85be);}async['updateGroupPicture'](_0x559b37,_0x223f1b){const _0x2f5703=a0_0x4a837a;return await this[_0x2f5703(0x63b)][_0x2f5703(0x302)][_0x559b37[_0x2f5703(0x2fb)]]['updateGroupPicture'](_0x223f1b);}async['groupDesc'](_0x2e617b,_0x1d5f71){const _0xa23d49=a0_0x4a837a;return await this['waMonitor'][_0xa23d49(0x302)][_0x2e617b['instanceName']]['groupDesc'](_0x1d5f71);}async[a0_0x4a837a(0x4ba)](_0x80dca5,_0x2b7e49){const _0x256742=a0_0x4a837a;return await this[_0x256742(0x63b)]['waInstances'][_0x80dca5[_0x256742(0x2fb)]][_0x256742(0x4ba)](_0x2b7e49);}async[a0_0x4a837a(0x56d)](_0x58c461,_0x2f718a){const _0x117276=a0_0x4a837a;return await this[_0x117276(0x63b)]['waInstances'][_0x58c461['instanceName']][_0x117276(0x56d)](_0x2f718a);}async[a0_0x4a837a(0x2f8)](_0x34aa63,_0x3c4ad2){const _0x184fa3=a0_0x4a837a;return await this[_0x184fa3(0x63b)][_0x184fa3(0x302)][_0x34aa63[_0x184fa3(0x2fb)]][_0x184fa3(0x611)](_0x3c4ad2);}async[a0_0x4a837a(0x30e)](_0x38d668){const _0x12b083=a0_0x4a837a;return await this[_0x12b083(0x63b)][_0x12b083(0x302)][_0x38d668[_0x12b083(0x2fb)]][_0x12b083(0x30e)]();}async['inviteCode'](_0x97f471,_0x2dcb49){const _0xb5cf06=a0_0x4a837a;return await this[_0xb5cf06(0x63b)][_0xb5cf06(0x302)][_0x97f471[_0xb5cf06(0x2fb)]][_0xb5cf06(0x5b6)](_0x2dcb49);}async[a0_0x4a837a(0x2d8)](_0x1be5d2,_0x20b12){const _0x2a8fe3=a0_0x4a837a;return await this['waMonitor'][_0x2a8fe3(0x302)][_0x1be5d2[_0x2a8fe3(0x2fb)]][_0x2a8fe3(0x2d8)](_0x20b12);}async[a0_0x4a837a(0x4f4)](_0x252ffd,_0x3e319a){const _0x1b6f4a=a0_0x4a837a;return await this[_0x1b6f4a(0x63b)][_0x1b6f4a(0x302)][_0x252ffd[_0x1b6f4a(0x2fb)]][_0x1b6f4a(0x4f4)](_0x3e319a);}async[a0_0x4a837a(0x509)](_0x4d2c9b,_0x439405){const _0x7e3ef6=a0_0x4a837a;return await this[_0x7e3ef6(0x63b)]['waInstances'][_0x4d2c9b[_0x7e3ef6(0x2fb)]]['findParticipants'](_0x439405);}async[a0_0x4a837a(0x3d9)](_0x1f3d6e,_0x51dfaf){const _0x2b5847=a0_0x4a837a;return await this[_0x2b5847(0x63b)]['waInstances'][_0x1f3d6e['instanceName']]['updateGParticipant'](_0x51dfaf);}async[a0_0x4a837a(0x181)](_0x4eaa6e,_0x5712d9){const _0x8910e5=a0_0x4a837a;return await this[_0x8910e5(0x63b)][_0x8910e5(0x302)][_0x4eaa6e[_0x8910e5(0x2fb)]][_0x8910e5(0x181)](_0x5712d9);}async['leaveGroup'](_0x1ce024,_0x37879f){const _0x5f494d=a0_0x4a837a;return await this[_0x5f494d(0x63b)][_0x5f494d(0x302)][_0x1ce024['instanceName']][_0x5f494d(0x22f)](_0x37879f);}},Ut=class{constructor(_0x3aa41b,_0x4e57a4){const _0x3f45c4=a0_0x4a837a;this['waMonit']=_0x3aa41b,this[_0x3f45c4(0x1c6)]=_0x4e57a4;}async[a0_0x4a837a(0x2c4)](_0xb1461c,_0x388279){const _0x19525c=a0_0x4a837a;try{let _0x5d334f=_0xb1461c[_0x19525c(0x179)];if(this[_0x19525c(0x22d)][_0x19525c(0x302)][_0x5d334f[_0x19525c(0x2fb)]]['connectionStatus'][_0x19525c(0x64f)]===_0x19525c(0x10f))throw new g(_0x19525c(0x188));let _0x1e03fc=this['configService']['get'](_0x19525c(0x2aa))['TYPE'];return _0x388279['status'](0xc8)[_0x19525c(0x37d)](_0x19525c(0x2c4),{'type':_0x1e03fc,..._0x5d334f});}catch(_0x5a37f1){console[_0x19525c(0x4eb)](_0x19525c(0x2de),_0x5a37f1);}}},Vt=class{constructor(_0x2c6343){const _0x179fd3=a0_0x4a837a;this[_0x179fd3(0x63b)]=_0x2c6343;}[a0_0x4a837a(0x22c)](_0x3d8e46,_0x34c699){const _0x2ea9bc=a0_0x4a837a;return this['waMonitor'][_0x2ea9bc(0x302)][_0x3d8e46['instanceName']][_0x2ea9bc(0x312)](_0x34c699);}async['find'](_0x46ae7c){const _0x363c21=a0_0x4a837a;try{return await this[_0x363c21(0x63b)][_0x363c21(0x302)][_0x46ae7c[_0x363c21(0x2fb)]][_0x363c21(0x4dc)]();}catch{return{'enabled':null,'url':''};}}},id=new C('FlowController'),Jt=class{constructor(_0x6bab94){this['waMonitor']=_0x6bab94;}async[a0_0x4a837a(0x391)](_0x39ca28,_0x3c1f7f){const _0x3a8d46=a0_0x4a837a;return await this[_0x3a8d46(0x63b)][_0x3a8d46(0x302)][_0x39ca28[_0x3a8d46(0x2fb)]][_0x3a8d46(0x391)](_0x3c1f7f);}async[a0_0x4a837a(0x17f)](_0x593dda){const _0x1cb137=a0_0x4a837a;return await this['waMonitor'][_0x1cb137(0x302)][_0x593dda[_0x1cb137(0x2fb)]][_0x1cb137(0x17f)]();}async[a0_0x4a837a(0x4c1)](_0x37e2ca){const _0x55142d=a0_0x4a837a;return await this['waMonitor'][_0x55142d(0x302)][_0x37e2ca[_0x55142d(0x2fb)]][_0x55142d(0x4c1)]();}async[a0_0x4a837a(0x169)](_0x448170){const _0x2e027e=a0_0x4a837a;return await this[_0x2e027e(0x63b)][_0x2e027e(0x302)][_0x448170[_0x2e027e(0x2fb)]][_0x2e027e(0x169)]();}async['updateAgent'](_0x3c60db,_0x493f12){const _0x2200b2=a0_0x4a837a;return await this[_0x2200b2(0x63b)][_0x2200b2(0x302)][_0x3c60db['instanceName']][_0x2200b2(0x1da)](_0x493f12);}async[a0_0x4a837a(0x59b)](_0x155045,_0x26fc49){const _0x22503c=a0_0x4a837a;return await this['waMonitor']['waInstances'][_0x155045[_0x22503c(0x2fb)]][_0x22503c(0x59b)](_0x26fc49);}async['updateFlowConfig'](_0xe0ed81,_0x46d3e8){const _0x7170b6=a0_0x4a837a;return await this[_0x7170b6(0x63b)][_0x7170b6(0x302)][_0xe0ed81[_0x7170b6(0x2fb)]][_0x7170b6(0x35b)](_0x46d3e8);}async[a0_0x4a837a(0x1c1)](_0x26f60b,_0x3eee5e){const _0x21ed5b=a0_0x4a837a;return await this['waMonitor'][_0x21ed5b(0x302)][_0x26f60b[_0x21ed5b(0x2fb)]][_0x21ed5b(0x1c1)](_0x3eee5e);}async[a0_0x4a837a(0x283)](_0x26d23b,_0x580548){const _0xf4c166=a0_0x4a837a;return await this[_0xf4c166(0x63b)][_0xf4c166(0x302)][_0x26d23b['instanceName']][_0xf4c166(0x283)](_0x580548);}async[a0_0x4a837a(0xe3)](_0x47e8f5,_0x17fc0e){const _0x38637e=a0_0x4a837a;return await this[_0x38637e(0x63b)][_0x38637e(0x302)][_0x47e8f5[_0x38637e(0x2fb)]]['fetchConversation'](_0x17fc0e);}async[a0_0x4a837a(0x290)](_0xd7e188,_0x1fa991){const _0x200867=a0_0x4a837a;return await this[_0x200867(0x63b)][_0x200867(0x302)][_0xd7e188[_0x200867(0x2fb)]][_0x200867(0x290)](_0x1fa991);}async[a0_0x4a837a(0xdf)](_0x2b77a2,_0x738954){const _0x4d0bd5=a0_0x4a837a;return await this[_0x4d0bd5(0x63b)][_0x4d0bd5(0x302)][_0x2b77a2[_0x4d0bd5(0x2fb)]]['deleteConversation'](_0x738954);}async[a0_0x4a837a(0xf3)](_0x225768,_0x3da990){const _0x2c60b2=a0_0x4a837a;return await this['waMonitor'][_0x2c60b2(0x302)][_0x225768[_0x2c60b2(0x2fb)]]['getFlow'](_0x3da990['name']);}async['createFlow'](_0x45757b,_0x1f76f0){const _0x523b06=a0_0x4a837a;return await this[_0x523b06(0x63b)][_0x523b06(0x302)][_0x45757b[_0x523b06(0x2fb)]][_0x523b06(0x2bc)](_0x1f76f0);}async[a0_0x4a837a(0x4cd)](_0x292a93,_0x40a6ae){const _0x18f6f4=a0_0x4a837a;return await this[_0x18f6f4(0x63b)][_0x18f6f4(0x302)][_0x292a93[_0x18f6f4(0x2fb)]]['editFlow'](_0x40a6ae);}async[a0_0x4a837a(0x16c)](_0x4f3855,_0x31239b){const _0x5bb238=a0_0x4a837a;return await this['waMonitor'][_0x5bb238(0x302)][_0x4f3855[_0x5bb238(0x2fb)]][_0x5bb238(0x16c)](_0x31239b);}async['editFlowReply'](_0x577d97,_0x4941a1){const _0x551543=a0_0x4a837a;return await this[_0x551543(0x63b)][_0x551543(0x302)][_0x577d97['instanceName']][_0x551543(0x604)](_0x4941a1);}async[a0_0x4a837a(0x22a)](_0x421d89,_0x3a1e85){const _0xafe84c=a0_0x4a837a;return await this['waMonitor'][_0xafe84c(0x302)][_0x421d89[_0xafe84c(0x2fb)]][_0xafe84c(0x22a)](_0x3a1e85);}async['editFlowCondition'](_0x2167c6,_0x5340b0){const _0x358b33=a0_0x4a837a;return await this['waMonitor'][_0x358b33(0x302)][_0x2167c6['instanceName']]['editFlowCondition'](_0x5340b0);}async[a0_0x4a837a(0x5b8)](_0x461739,_0x19e3f7){const _0x3b527f=a0_0x4a837a;return await this[_0x3b527f(0x63b)][_0x3b527f(0x302)][_0x461739[_0x3b527f(0x2fb)]][_0x3b527f(0x5b8)](_0x19e3f7);}async[a0_0x4a837a(0xae)](_0x730aca,_0x5a641b){const _0x46e5d6=a0_0x4a837a;return await this[_0x46e5d6(0x63b)][_0x46e5d6(0x302)][_0x730aca[_0x46e5d6(0x2fb)]][_0x46e5d6(0xae)](_0x5a641b);}async[a0_0x4a837a(0x672)](_0x102588,_0x274027){const _0x233a2f=a0_0x4a837a;return await this[_0x233a2f(0x63b)]['waInstances'][_0x102588[_0x233a2f(0x2fb)]]['deleteFlow'](_0x274027[_0x233a2f(0x372)]);}async[a0_0x4a837a(0x251)](_0x3fc493){const _0x595083=a0_0x4a837a;return await this['waMonitor'][_0x595083(0x302)][_0x3fc493[_0x595083(0x2fb)]][_0x595083(0x251)]();}},jt=class{constructor(_0x157d79){const _0x3ebf52=a0_0x4a837a;this[_0x3ebf52(0x628)]=_0x157d79;}async[a0_0x4a837a(0x177)](_0x33ef44,_0xa5674c){const _0x17ee1c=a0_0x4a837a;return this[_0x17ee1c(0x628)][_0x17ee1c(0x22c)](_0x33ef44,_0xa5674c);}async[a0_0x4a837a(0x4dc)](_0x18d97e){const _0x333a3c=a0_0x4a837a;return this['webhookService'][_0x333a3c(0x33c)](_0x18d97e);}},Ft=class{constructor(_0x46e29d,_0x5d3825,_0x306586,_0x208bb9,_0x217da2,_0x3b2e4a){const _0x523a88=a0_0x4a837a;this['message']=_0x46e29d,this[_0x523a88(0xe2)]=_0x5d3825,this[_0x523a88(0x549)]=_0x306586,this[_0x523a88(0xcd)]=_0x208bb9,this['auth']=_0x217da2,this['dbClient']=_0x3b2e4a;}get['dbServer'](){const _0x4722ec=a0_0x4a837a;return this[_0x4722ec(0x573)];}},fs=require('path'),ao=require('fs'),Bt=class extends W{constructor(_0x3df146,_0x388268){const _0x28f73e=a0_0x4a837a;super(_0x388268),this[_0x28f73e(0x410)]=_0x3df146,this[_0x28f73e(0x1c6)]=_0x388268;}async[a0_0x4a837a(0x22c)](_0x5e596b,_0xe1acf3){const _0x31c485=a0_0x4a837a;try{return this['dbSettings'][_0x31c485(0x149)]?{'insertCount':(await this['webhookModel']['replaceOne']({'_id':_0xe1acf3},{..._0x5e596b},{'upsert':!0x0}))[_0x31c485(0x19a)]}:(this[_0x31c485(0x29f)]({'path':(0x0,fs['join'])(this[_0x31c485(0x547)],_0x31c485(0xcd)),'fileName':_0xe1acf3,'data':_0x5e596b}),{'insertCount':0x1});}catch(_0xb294c3){return _0xb294c3;}}async[a0_0x4a837a(0x33c)](_0x23ae2c){const _0xe8a52b=a0_0x4a837a;try{return this[_0xe8a52b(0x41b)][_0xe8a52b(0x149)]?await this[_0xe8a52b(0x410)][_0xe8a52b(0x596)]({'_id':_0x23ae2c}):JSON[_0xe8a52b(0xc0)]((0x0,ao[_0xe8a52b(0x286)])((0x0,fs['join'])(this['storePath'],_0xe8a52b(0xcd),_0x23ae2c+_0xe8a52b(0x10c)),{'encoding':_0xe8a52b(0x2ac)}));}catch{return{};}}},ws=require(a0_0x4a837a(0x16a)),oo=require('fs'),qt=class extends W{constructor(_0x450e78,_0x2777e4){const _0xb5fec5=a0_0x4a837a;super(_0x2777e4),this['authModel']=_0x450e78,this[_0xb5fec5(0x1c6)]=_0x2777e4,this[_0xb5fec5(0x146)]=_0x2777e4[_0xb5fec5(0x17e)](_0xb5fec5(0x2aa));}async[a0_0x4a837a(0x22c)](_0x31a368,_0x55f4d6){const _0x192ef9=a0_0x4a837a;try{return this[_0x192ef9(0x41b)][_0x192ef9(0x149)]?{'insertCount':(await this[_0x192ef9(0x342)]['replaceOne']({'_id':_0x55f4d6},{..._0x31a368},{'upsert':!0x0}))['modifiedCount']}:(this[_0x192ef9(0x29f)]({'path':(0x0,ws[_0x192ef9(0x31f)])(Gt,this['auth'][_0x192ef9(0xd8)]),'fileName':_0x55f4d6,'data':_0x31a368}),{'insertCount':0x1});}catch(_0x10d27d){return{'error':_0x10d27d};}}async[a0_0x4a837a(0x33c)](_0xd99b02){const _0xb413b6=a0_0x4a837a;try{return this[_0xb413b6(0x41b)][_0xb413b6(0x149)]?await this[_0xb413b6(0x342)][_0xb413b6(0x596)]({'_id':_0xd99b02}):JSON[_0xb413b6(0xc0)]((0x0,oo[_0xb413b6(0x286)])((0x0,ws[_0xb413b6(0x31f)])(Gt,this[_0xb413b6(0x146)][_0xb413b6(0xd8)],_0xd99b02+_0xb413b6(0x10c)),{'encoding':_0xb413b6(0x2ac)}));}catch{return{};}}},zo=new C('WA\x20MODULE'),Qo=new $e(S),Yo=new Pt(S),Xo=new He(S),Zo=new Bt(Bs,S),ei=new qt(Js,S),le=new Ft(Qo,Yo,Xo,Zo,ei,M?.[a0_0x4a837a(0x3ec)]()),j=new _t(zt,S,le),ti=new rt(S,j,le),si=new Vt(j),us=new jt(si),R=new Jt(j),re=new $t(j,S,le,zt,ti),Ba=new Ut(j,S),K=new kt(j),D=new xt(j),U=new Lt(j);zo['info'](a0_0x4a837a(0x239));var ep=require(a0_0x4a837a(0x390)),ys=require('fs'),io=T(require(a0_0x4a837a(0x421))),ro=T(require(a0_0x4a837a(0x1bf))),Re=class c{static #e;static set['app'](_0x422bc9){this.#e=_0x422bc9;}static get[a0_0x4a837a(0x421)](){const _0x5d35d8=a0_0x4a837a;let {FULLCHAIN:_0x44c92e,PRIVKEY:_0x595d0d}=S[_0x5d35d8(0x17e)](_0x5d35d8(0x38c));return io['createServer']({'cert':(0x0,ys[_0x5d35d8(0x286)])(_0x44c92e),'key':(0x0,ys['readFileSync'])(_0x595d0d)},c.#e);}static get['http'](){const _0x207ccf=a0_0x4a837a;return ro[_0x207ccf(0x577)](c.#e);}},ge=T(require('fs')),go=T(require('ini')),Me=T(require('axios')),Ie=T(require(a0_0x4a837a(0x16a))),Oe=require(a0_0x4a837a(0x306));function ai(){const _0x312929=a0_0x4a837a;j['loadInstance']();let _0xf72b17=Ie['default']['join'](__dirname,_0x312929(0x49c));po(_0xf72b17);}var po=_0xb0fbdf=>{const _0x1b1d55=a0_0x4a837a;let _0x318cbb=ge[_0x1b1d55(0x4d5)][_0x1b1d55(0x616)](_0xb0fbdf),_0x4f60=0xc*0x3c*0x3c*0x3e8,_0x50a612=0x2*0x3c*0x3c*0x3e8,_0x3dab11=new Date()[_0x1b1d55(0x495)]();_0x318cbb[_0x1b1d55(0x2c9)](_0x3699c6=>{const _0x3df289=_0x1b1d55;let _0x1e3d91=Ie[_0x3df289(0x4d5)][_0x3df289(0x31f)](_0xb0fbdf,_0x3699c6),_0x548ee8=ge[_0x3df289(0x4d5)]['statSync'](_0x1e3d91)[_0x3df289(0x1a5)][_0x3df289(0x495)]();_0x3dab11-_0x548ee8>_0x4f60&&(ge['default'][_0x3df289(0x336)](_0x1e3d91),console[_0x3df289(0x4eb)](_0x3df289(0x148)+_0x3699c6));}),setTimeout(()=>po(_0xb0fbdf),_0x50a612);};function oi(){const _0x31bfe8=a0_0x4a837a;let _0x52c8fa=new C('SERVER'),_0x152c55=(0x0,me[_0x31bfe8(0x4d5)])();_0x152c55[_0x31bfe8(0x4c3)]((0x0,uo[_0x31bfe8(0x4d5)])({'origin'(_0x4242ad,_0x5e8e78){const _0x1c29f2=_0x31bfe8;let {ORIGIN:_0x3ea6b4}=S[_0x1c29f2(0x17e)](_0x1c29f2(0x105));return _0x4242ad||(_0x4242ad='*'),_0x3ea6b4[_0x1c29f2(0x10a)]('*')!==-0x1||_0x3ea6b4[_0x1c29f2(0x10a)](_0x4242ad)!==-0x1?_0x5e8e78(null,!0x0):_0x5e8e78(new Error('Not\x20allowed\x20by\x20CORS'));},'methods':[...S['get'](_0x31bfe8(0x105))[_0x31bfe8(0x518)]],'credentials':S['get'](_0x31bfe8(0x105))[_0x31bfe8(0x1e1)]}),(0x0,me[_0x31bfe8(0x3b2)])({'extended':!0x0,'limit':'50mb'}),(0x0,me[_0x31bfe8(0x2c8)])({'limit':_0x31bfe8(0x26e)})),_0x152c55[_0x31bfe8(0x4c3)]((_0x4e8ef2,_0x32b8e7,_0xe00e76)=>{const _0x4353e5=_0x31bfe8;_0x4e8ef2[_0x4353e5(0x16a)][_0x4353e5(0x363)](_0x4353e5(0x379))?_0xe00e76():(0x0,lo[_0x4353e5(0x4d5)])()(_0x4e8ef2,_0x32b8e7,_0xe00e76);}),_0x152c55[_0x31bfe8(0x43d)](_0x31bfe8(0x13a),_0x31bfe8(0x677)),_0x152c55[_0x31bfe8(0x43d)](_0x31bfe8(0x5d4),(0x0,Ss[_0x31bfe8(0x31f)])(Q,_0x31bfe8(0x5d4))),_0x152c55[_0x31bfe8(0x4c3)](me[_0x31bfe8(0x4d5)][_0x31bfe8(0x5e7)]((0x0,Ss[_0x31bfe8(0x31f)])(Q,'public'))),_0x152c55['use']((_0x162d2b,_0x1da7f1,_0x5c1bd0)=>{const _0x39e6be=_0x31bfe8;let _0x1964ee=_0x1da7f1[_0x39e6be(0x498)];_0x1da7f1[_0x39e6be(0x498)]=function(_0x530ce9){const _0x333bdb=_0x39e6be;if(_0x162d2b[_0x333bdb(0x4d2)][_0x333bdb(0x5a5)]===_0x333bdb(0x58c)||_0x162d2b[_0x333bdb(0x1fe)][_0x333bdb(0x292)]===_0x333bdb(0x58c)){let _0x2977c0=JSON['parse'](_0x530ce9);_0x530ce9=JSON[_0x333bdb(0xe8)](_0x554f89(_0x2977c0));}return _0x1964ee['apply'](_0x1da7f1,[_0x530ce9]);},_0x5c1bd0();}),_0x152c55['use']('/',Nt),_0x152c55[_0x31bfe8(0x4c3)]((_0x4a78f4,_0x4cccc1,_0x2f4356,_0x4534e5)=>{const _0x4901a1=_0x31bfe8;if(_0x4a78f4)return _0x2f4356['status'](_0x4a78f4[_0x4901a1(0x2e7)]||0x1f4)['json'](_0x4a78f4);},(_0x31fc37,_0x3672e1,_0x468928)=>{const _0x34e76b=_0x31bfe8;let {method:_0x4ee156,url:_0x3edd6f}=_0x31fc37;_0x3672e1[_0x34e76b(0x2e7)](0x194)[_0x34e76b(0x2c8)]({'status':0x194,'message':_0x34e76b(0x3a7)+_0x4ee156['toUpperCase']()+'\x20'+_0x3edd6f,'error':_0x34e76b(0xfa)}),_0x468928();});let _0x554f89=(_0x303b86,_0x37f379=_0x31bfe8(0x503))=>{const _0x42ee2e=_0x31bfe8;let _0x563ddc=(_0x1cd66c,_0x1e8b68=null,_0x50c102=!0x1)=>{const _0xe37dcb=a0_0x22fc;let _0xf86c9f={};return Object[_0xe37dcb(0x396)](_0x1cd66c)[_0xe37dcb(0x2c9)](_0x213fcd=>{const _0x206b48=_0xe37dcb;let _0xb701dd=_0x1cd66c[_0x213fcd],_0x20b02e=''+_0x37f379+_0x213fcd;_0x1e8b68&&!_0x50c102&&(_0x20b02e=_0x1e8b68+'.'+_0x213fcd),!_0xb701dd&&_0xb701dd!==0x0&&_0xb701dd!==!0x1||typeof _0xb701dd>'u'?_0xf86c9f[_0x20b02e]=null:typeof _0xb701dd!='object'&&!Array[_0x206b48(0x2fc)](_0xb701dd)?_0xf86c9f[_0x20b02e]=_0xb701dd:typeof _0xb701dd==_0x206b48(0x32b)&&!Array[_0x206b48(0x2fc)](_0xb701dd)?_0xf86c9f=Object[_0x206b48(0x334)](_0xf86c9f,_0x563ddc(_0xb701dd,_0x20b02e)):Array['isArray'](_0xb701dd)&&(typeof _0xb701dd[0x0]=='object'?(_0xf86c9f[_0x20b02e]=[],_0xb701dd[_0x206b48(0x2c9)](_0x5a4750=>{const _0x1fefcc=_0x206b48;_0xf86c9f[_0x20b02e][_0x1fefcc(0x656)](_0x563ddc(_0x5a4750,_0x20b02e,!0x0));})):_0xf86c9f[_0x20b02e]=_0xb701dd);}),_0xf86c9f;};return Array['isArray'](_0x303b86)?_0x303b86[_0x42ee2e(0x227)](_0x38828d=>_0x563ddc(_0x38828d)):typeof _0x303b86==_0x42ee2e(0x32b)&&_0x303b86!==null?_0x563ddc(_0x303b86):{};},_0x5aba51=S['get'](_0x31bfe8(0xbe));Re[_0x31bfe8(0x326)]=_0x152c55;let _0x3302c5=Re[_0x5aba51[_0x31bfe8(0xd8)]],_0x3773d0='\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20';_0x3302c5[_0x31bfe8(0x5ba)](_0x5aba51[_0x31bfe8(0x1f7)],()=>{const _0x7b3174=_0x31bfe8;_0x52c8fa[_0x7b3174(0x4eb)](_0x3773d0),_0x52c8fa[_0x7b3174(0x4eb)](_0x5aba51[_0x7b3174(0xd8)][_0x7b3174(0x19c)]()+'\x20-\x20ON:\x20'+_0x5aba51[_0x7b3174(0x1f7)]);}),ai(),_s();}var ii=a0_0x4a837a(0x14d),ri=Ie[a0_0x4a837a(0x4d5)]['join'](__dirname,a0_0x4a837a(0x3c0)),Ae=null;function ni(){return new Promise((_0x51fd79,_0x109cc4)=>{const _0x35fe0b=a0_0x22fc;ge[_0x35fe0b(0x4d5)][_0x35fe0b(0x228)](ri,_0x35fe0b(0x2ac),(_0x12a058,_0x31a1b5)=>{const _0x41f896=_0x35fe0b;if(_0x12a058){Ae=_0x12a058,_0x51fd79();return;}go['default'][_0x41f896(0xc0)](_0x31a1b5)[_0x41f896(0xd6)][_0x41f896(0x351)]===ii?(Ae=null,_0x51fd79()):(Ae=new Error(_0x41f896(0x152)),_0x51fd79());});});}async function ci(){const _0x1a8351=a0_0x4a837a;try{await ni(),await Es();}catch(_0x100dad){console[_0x1a8351(0x60b)](_0x1a8351(0x11e)+_0x100dad),process[_0x1a8351(0x554)](0x1);}}ci();async function mo(){const _0xc06f64=a0_0x4a837a;let _0x26e84e;try{_0x26e84e=(await Me[_0xc06f64(0x4d5)][_0xc06f64(0x17e)]('https://jsonip.com'))[_0xc06f64(0x562)]['ip'];}catch(_0x1e6a34){console[_0xc06f64(0x60b)](_0x1e6a34);try{_0x26e84e=(await Me[_0xc06f64(0x4d5)][_0xc06f64(0x17e)](_0xc06f64(0x516)))[_0xc06f64(0x562)]['ip'];}catch(_0x501d29){console[_0xc06f64(0x60b)](_0x501d29);try{_0x26e84e=(await Me['default']['get'](_0xc06f64(0x552)))[_0xc06f64(0x562)][_0xc06f64(0x37e)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0xeaa314){return console['error'](_0xeaa314),!0x1;}}}return _0x26e84e;}var no=0x0;async function li(){const _0x345928=a0_0x4a837a;let _0x4c6c66=await new ne(S['get'](_0x345928(0x416)))[_0x345928(0x4a8)]();return console[_0x345928(0x4eb)](_0x345928(0x3e0),_0x4c6c66['length']),_0x4c6c66[_0x345928(0x58b)];}async function ui(){const _0x2f8610=a0_0x4a837a;let _0x3d0e5d=S['get'](_0x2f8610(0x416)),_0x427fb7=S['get'](_0x2f8610(0x2aa))[_0x2f8610(0x4e1)][_0x2f8610(0x4d1)],_0x1c96a7=S[_0x2f8610(0x17e)](_0x2f8610(0x38c)),_0x6e9fee=await mo(),_0x4b443c=S[_0x2f8610(0x17e)]('SERVER')[_0x2f8610(0x1f7)];try{let _0x226367={'ip':_0x6e9fee||null,'redis_enable':_0x3d0e5d?.[_0x2f8610(0x149)]||null,'apikey':_0x427fb7||null,'ssl':_0x1c96a7?.[_0x2f8610(0x280)]||null,'lastupdate':ho||null,'port':_0x4b443c||null,'gitInstallError':Ae?.[_0x2f8610(0x310)]||null};if(console[_0x2f8610(0x4eb)]('ip:\x20',_0x226367['ip']),_0x3d0e5d&&_0x3d0e5d['ENABLED']){let _0x479488=await li();_0x226367[_0x2f8610(0x317)]=_0x479488||null;}for(let _0x2fd038 in _0x226367)_0x226367[_0x2f8610(0x331)](_0x2fd038)&&_0x2fd038!=='ip'&&(_0x226367[_0x2fd038]=JSON['stringify'](_0x226367[_0x2fd038]));return(await Me[_0x2f8610(0x4d5)]['post'](_0x2f8610(0x1c2),_0x226367))[_0x2f8610(0x562)];}catch(_0x2080a0){return console[_0x2f8610(0x60b)](_0x2080a0),!0x1;}}var bs=!0x1,ho=0x215,di=0x3,co=0x1b7740;async function Es(){const _0x899a9=a0_0x4a837a;if(!await mo())return console['error'](_0x899a9(0x513)),'NO_IP';let _0x3b7f1c=await ui();if(_0x3b7f1c){if(_0x3b7f1c['response']['licenca']===!0x0){S[_0x899a9(0x17e)](_0x899a9(0x38c))[_0x899a9(0x280)]['includes'](_0x899a9(0x178))&&_0x3b7f1c[_0x899a9(0x350)][_0x899a9(0x512)]&&(await mi(_0x3b7f1c[_0x899a9(0x350)]['subdomain'],gi),await hi(_0x899a9(0x1ce),_0x3b7f1c[_0x899a9(0x350)][_0x899a9(0x512)]),console[_0x899a9(0x4eb)](_0x899a9(0x5f4)),setTimeout(()=>wi(),0x2710)),Ae===null&&_0x3b7f1c[_0x899a9(0x350)]['last_update']-ho>0x0&&await pi(),bs||(bs=!0x0,oi());let _0x5427c2=0x24*0x3c*0x3c,_0x5e231b=_0x3b7f1c['response'][_0x899a9(0x60f)]>_0x5427c2?_0x5427c2:_0x3b7f1c[_0x899a9(0x350)][_0x899a9(0x60f)],_0x2bd76c=Number(_0x5e231b);if(isNaN(_0x2bd76c)){console[_0x899a9(0x60b)](_0x899a9(0x3d2));return;}let _0x4c2530=Math[_0x899a9(0x380)](_0x2bd76c/0xe10),_0x236d9e=Math['floor'](_0x2bd76c%0xe10/0x3c),_0x33bec3=new Date(Date[_0x899a9(0x2a2)]()+_0x2bd76c*0x3e8);setTimeout(Es,_0x2bd76c*0x3e8);let _0x1f94c9=_0x157909=>_0x157909[_0x899a9(0x42d)]()['padStart'](0x2,'0'),_0x1aace7='Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20'+_0x1f94c9(_0x4c2530)+_0x899a9(0x619)+_0x1f94c9(_0x236d9e)+_0x899a9(0x116)+_0x1f94c9(_0x33bec3[_0x899a9(0x1a6)]())+':'+_0x1f94c9(_0x33bec3['getMinutes']())+'.';console[_0x899a9(0x4eb)](_0x1aace7);}else return console[_0x899a9(0x4eb)](_0x899a9(0x1db)),bs&&(console[_0x899a9(0x4eb)]('A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.'),process[_0x899a9(0x554)]()),'LICENSE_INVALID';}else{if(no++,no<di)console['log'](_0x899a9(0x5fc)+co/0xea60+_0x899a9(0x648)),setTimeout(Es,co);else return console['error'](_0x899a9(0x41f)),_0x899a9(0x60c);}}async function pi(){const _0x4fdd98=a0_0x4a837a;console[_0x4fdd98(0x4eb)](_0x4fdd98(0x220));let _0x42ef07=(0x0,Oe[_0x4fdd98(0x5d9)])(_0x4fdd98(0x395),{'shell':!0x0});_0x42ef07[_0x4fdd98(0x541)]['on'](_0x4fdd98(0x562),_0xf0725c=>{const _0x345064=_0x4fdd98;console['log'](_0x345064(0x66e)+_0xf0725c);}),_0x42ef07['stderr']['on']('data',_0x5c491e=>{const _0xcde404=_0x4fdd98;console[_0xcde404(0x60b)]('Erro\x20de\x20atualização:\x20'+_0x5c491e);}),_0x42ef07['on']('exit',_0x42b317=>{const _0x567012=_0x4fdd98;_0x42b317!==0x0?console[_0x567012(0x60b)](_0x567012(0x52e)+_0x42b317):console[_0x567012(0x4eb)](_0x567012(0x4ce)),console[_0x567012(0x4eb)](_0x567012(0x201)),setTimeout(()=>process[_0x567012(0x554)](),0x2710);});}var gi=Ie[a0_0x4a837a(0x4d5)][a0_0x4a837a(0x31f)](__dirname,'env.yml');async function mi(_0x1a1872,_0x2b5f45){const _0x25888b=a0_0x4a837a;let _0x5bf7f4=fi();_0x1a1872=_0x1a1872[_0x25888b(0x522)](_0x25888b(0x446),'');try{let _0x1904ab=ge[_0x25888b(0x4d5)][_0x25888b(0x286)](_0x2b5f45,_0x25888b(0x3e8));_0x1904ab=_0x1904ab[_0x25888b(0x522)](/<apikey>/,_0x5bf7f4),_0x1904ab=_0x1904ab['replace'](/<subdomain>/g,_0x1a1872),ge['default']['writeFileSync'](_0x2b5f45,_0x1904ab,_0x25888b(0x3e8)),console[_0x25888b(0x4eb)](_0x25888b(0x5fa));}catch(_0x3979b2){console[_0x25888b(0x60b)](_0x25888b(0x3fb),_0x3979b2);}}function hi(_0x24535e,_0x16980c){return new Promise((_0x54cf65,_0x59f05d)=>{const _0x129ad6=a0_0x22fc;let _0x4b5505=(0x0,Oe[_0x129ad6(0x5d9)])(_0x129ad6(0x210),[_0x129ad6(0x2af),'--standalone','-m',_0x24535e,_0x129ad6(0x63d),'-d',_0x16980c]);_0x4b5505[_0x129ad6(0x541)]['on']('data',_0x2f25d8=>{const _0xfd315d=_0x129ad6;console['log'](_0xfd315d(0x393)+_0x2f25d8[_0xfd315d(0x42d)]());}),_0x4b5505[_0x129ad6(0x32f)]['on']('data',_0x3bb7d3=>{const _0x1a794a=_0x129ad6;console['error'](_0x1a794a(0x64e)+_0x3bb7d3[_0x1a794a(0x42d)]());}),_0x4b5505['on']('close',_0x163c07=>{const _0x3b8781=_0x129ad6;_0x163c07!==0x0?(console[_0x3b8781(0x60b)](_0x3b8781(0x36c)+_0x163c07),_0x59f05d(_0x3b8781(0x36c)+_0x163c07)):(console['log'](_0x3b8781(0x43b)),_0x54cf65());});});}function fi(_0x5e0f05=0x32){const _0x49ff84=a0_0x4a837a;let _0x318959=_0x49ff84(0x5e4),_0x2a16e4='';for(let _0x5bfed9=0x0;_0x5bfed9<_0x5e0f05;_0x5bfed9++)_0x2a16e4+=_0x318959[_0x49ff84(0x277)](Math[_0x49ff84(0x380)](Math[_0x49ff84(0x5e0)]()*_0x318959[_0x49ff84(0x58b)]));return _0x2a16e4;}function wi(){const _0x373709=a0_0x4a837a;(0x0,Oe[_0x373709(0x43c)])(_0x373709(0x167),(_0x7f4b25,_0x5a96cd,_0x1fad01)=>{const _0x214864=_0x373709;if(_0x7f4b25){console[_0x214864(0x60b)](_0x214864(0x1b9)+_0x7f4b25);return;}if(_0x1fad01){console[_0x214864(0x60b)](_0x214864(0x44d)+_0x1fad01);return;}console[_0x214864(0x4eb)](_0x214864(0x354)+_0x5a96cd);});}