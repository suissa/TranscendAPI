const a0_0x46df1a=a0_0x2bf6;(function(_0x4a7d19,_0x33eda1){const _0xd4949e=a0_0x2bf6,_0x44cd0f=_0x4a7d19();while(!![]){try{const _0x32a555=-parseInt(_0xd4949e(0x2e6))/0x1+parseInt(_0xd4949e(0x445))/0x2*(parseInt(_0xd4949e(0x46e))/0x3)+-parseInt(_0xd4949e(0x798))/0x4+-parseInt(_0xd4949e(0x328))/0x5*(-parseInt(_0xd4949e(0x6e4))/0x6)+-parseInt(_0xd4949e(0xc1))/0x7*(-parseInt(_0xd4949e(0x2e4))/0x8)+parseInt(_0xd4949e(0x4a9))/0x9*(-parseInt(_0xd4949e(0x60a))/0xa)+-parseInt(_0xd4949e(0x635))/0xb*(-parseInt(_0xd4949e(0x655))/0xc);if(_0x32a555===_0x33eda1)break;else _0x44cd0f['push'](_0x44cd0f['shift']());}catch(_0xffec5){_0x44cd0f['push'](_0x44cd0f['shift']());}}}(a0_0x30d9,0x6fc14));var Ki=Object['create'],Ge=Object[a0_0x46df1a(0x552)],Qi=Object['getOwnPropertyDescriptor'],Yi=Object[a0_0x46df1a(0x419)],Xi=Object[a0_0x46df1a(0x6f)],Zi=Object[a0_0x46df1a(0x353)][a0_0x46df1a(0x2b4)],eo=(_0x454c1d,_0x1cbeae)=>{for(var _0x5e3625 in _0x1cbeae)Ge(_0x454c1d,_0x5e3625,{'get':_0x1cbeae[_0x5e3625],'enumerable':!0x0});},Hs=(_0xb82800,_0x38a3cb,_0x135f10,_0x5eeb28)=>{const _0x314bfa=a0_0x46df1a;if(_0x38a3cb&&typeof _0x38a3cb==_0x314bfa(0xde)||typeof _0x38a3cb=='function'){for(let _0x5d96c9 of Yi(_0x38a3cb))!Zi[_0x314bfa(0x513)](_0xb82800,_0x5d96c9)&&_0x5d96c9!==_0x135f10&&Ge(_0xb82800,_0x5d96c9,{'get':()=>_0x38a3cb[_0x5d96c9],'enumerable':!(_0x5eeb28=Qi(_0x38a3cb,_0x5d96c9))||_0x5eeb28[_0x314bfa(0x701)]});}return _0xb82800;},A=(_0xc31a68,_0x5243d9,_0x24c46f)=>(_0x24c46f=_0xc31a68!=null?Ki(Xi(_0xc31a68)):{},Hs(_0x5243d9||!_0xc31a68||!_0xc31a68['__esModule']?Ge(_0x24c46f,a0_0x46df1a(0x2fa),{'value':_0xc31a68,'enumerable':!0x0}):_0x24c46f,_0xc31a68)),to=_0x550312=>Hs(Ge({},a0_0x46df1a(0x365),{'value':!0x0}),_0x550312),mr={};eo(mr,{'fullURL':()=>Ws,'subdomain':()=>X}),module['exports']=to(mr);var Vi=A(require('compression')),Qs=require('fs'),Ys=require('js-yaml'),Xs=require(a0_0x46df1a(0x2ad)),Be=require(a0_0x46df1a(0x2ad)),ce=process[a0_0x46df1a(0x1f5)](),Se=(0x0,Be[a0_0x46df1a(0x473)])(ce,a0_0x46df1a(0x583)),Ks=(0x0,Be[a0_0x46df1a(0x473)])(ce,a0_0x46df1a(0x446)),on=(0x0,Be[a0_0x46df1a(0x473)])(ce,a0_0x46df1a(0x167),'auth'),ps=class{constructor(){const _0x3d6f55=a0_0x46df1a;this[_0x3d6f55(0x679)]();}[a0_0x46df1a(0x20f)](_0xe0d296){const _0x1e2c25=a0_0x46df1a;return this[_0x1e2c25(0x517)][_0xe0d296];}[a0_0x46df1a(0x679)](){const _0x3f2600=a0_0x46df1a;this[_0x3f2600(0x517)]=process['env']?.[_0x3f2600(0x2ee)]!==_0x3f2600(0x5d2)?this[_0x3f2600(0x269)]():this[_0x3f2600(0x749)](),process['env']?.[_0x3f2600(0x2ee)]===_0x3f2600(0x5d2)&&(this[_0x3f2600(0x517)][_0x3f2600(0x67d)]['TYPE']=_0x3f2600(0x389),this['env']['SERVER'][_0x3f2600(0x665)]=Number['parseInt'](process[_0x3f2600(0x517)]?.[_0x3f2600(0x4bf)]??_0x3f2600(0x7a3)));}['envYaml'](){const _0x469165=a0_0x46df1a;return(0x0,Ys[_0x469165(0x195)])((0x0,Qs[_0x469165(0x5b8)])((0x0,Xs[_0x469165(0x473)])(Ks,_0x469165(0x553)),{'encoding':_0x469165(0x196)}));}[a0_0x46df1a(0x749)](){const _0x526d1a=a0_0x46df1a;return{'SERVER':{'TYPE':process[_0x526d1a(0x517)][_0x526d1a(0x396)],'PORT':Number[_0x526d1a(0x619)](process['env'][_0x526d1a(0x4bf)]),'URL':process[_0x526d1a(0x517)][_0x526d1a(0x626)]},'CORS':{'ORIGIN':process[_0x526d1a(0x517)][_0x526d1a(0x60c)]['split'](','),'METHODS':process[_0x526d1a(0x517)][_0x526d1a(0x649)]['split'](','),'CREDENTIALS':process['env']?.[_0x526d1a(0x6f6)]===_0x526d1a(0x5d2)},'SSL_CONF':{'PRIVKEY':process[_0x526d1a(0x517)]?.[_0x526d1a(0x3fc)],'FULLCHAIN':process[_0x526d1a(0x517)]?.[_0x526d1a(0xb2)]},'STORE':{'CLEANING_INTERVAL':Number[_0x526d1a(0x763)](process['env']?.[_0x526d1a(0x316)])?Number[_0x526d1a(0x619)](process[_0x526d1a(0x517)][_0x526d1a(0x316)]):void 0x0,'MESSAGES':process[_0x526d1a(0x517)]?.['STORE_MESSAGE']==='true','CONTACTS':process[_0x526d1a(0x517)]?.[_0x526d1a(0x64b)]===_0x526d1a(0x5d2),'CHATS':process[_0x526d1a(0x517)]?.[_0x526d1a(0xe4)]==='true'},'DATABASE':{'CONNECTION':{'HOST':process[_0x526d1a(0x517)]?.[_0x526d1a(0x104)],'PORT':Number[_0x526d1a(0x619)](process[_0x526d1a(0x517)]?.[_0x526d1a(0x104)]),'USER':process[_0x526d1a(0x517)][_0x526d1a(0x189)],'PASSWORD':process[_0x526d1a(0x517)]['DATABASE_CONNECTION_PASSWORD'],'URI':process[_0x526d1a(0x517)][_0x526d1a(0x3c3)],'DB_PREFIX_NAME':process[_0x526d1a(0x517)][_0x526d1a(0x1b7)]},'ENABLED':process[_0x526d1a(0x517)]?.['DATABASE_ENABLED']==='true'},'REDIS':{'ENABLED':process[_0x526d1a(0x517)]?.[_0x526d1a(0x7c)]==='true','URI':process[_0x526d1a(0x517)]['REDIS_URI']||_0x526d1a(0x714),'PREFIX_KEY':process[_0x526d1a(0x517)]['REDIS_PREFIX_KEY']||_0x526d1a(0x2c2)},'LOG':{'LEVEL':process[_0x526d1a(0x517)]?.[_0x526d1a(0x1f8)][_0x526d1a(0x1ed)](','),'COLOR':process[_0x526d1a(0x517)]?.['LOG_COLOR']===_0x526d1a(0x5d2)},'PROXY':process[_0x526d1a(0x517)]?.['PROXY']===_0x526d1a(0x5d2),'AUTHENTICATION':{'TYPE':process[_0x526d1a(0x517)][_0x526d1a(0x1d6)],'API_KEY':{'KEY':process[_0x526d1a(0x517)][_0x526d1a(0x26a)]},'JWT':{'EXPIRIN_IN':Number[_0x526d1a(0x763)](process[_0x526d1a(0x517)]?.[_0x526d1a(0x560)])?Number[_0x526d1a(0x619)](process[_0x526d1a(0x517)][_0x526d1a(0x560)]):0xe10,'SECRET':process[_0x526d1a(0x517)]['AUTHENTICATION_JWT_SECRET']}}};}},b=new ps(),Gi=A(require(a0_0x46df1a(0x6d5))),be=A(require(a0_0x46df1a(0x71d))),Gs=require(a0_0x46df1a(0x2ad)),hs=A(require(a0_0x46df1a(0x391))),gs=(_0x3b71e0=>(_0x3b71e0['LOG']='\x1b[32m',_0x3b71e0[a0_0x46df1a(0x548)]=a0_0x46df1a(0x4c2),_0x3b71e0[a0_0x46df1a(0x76)]=a0_0x46df1a(0x6c0),_0x3b71e0['ERROR']=a0_0x46df1a(0x380),_0x3b71e0['DEBUG']=a0_0x46df1a(0x633),_0x3b71e0[a0_0x46df1a(0x37c)]=a0_0x46df1a(0x606),_0x3b71e0[a0_0x46df1a(0x762)]=a0_0x46df1a(0x4b8),_0x3b71e0))(gs||{}),Zs=(_0x1b8b0e=>(_0x1b8b0e['LOG']=a0_0x46df1a(0x84),_0x1b8b0e[a0_0x46df1a(0x762)]=a0_0x46df1a(0x3a6),_0x1b8b0e[a0_0x46df1a(0x548)]=a0_0x46df1a(0x9d),_0x1b8b0e['WARN']=a0_0x46df1a(0x3c8),_0x1b8b0e[a0_0x46df1a(0x145)]=a0_0x46df1a(0x131),_0x1b8b0e[a0_0x46df1a(0x76c)]=a0_0x46df1a(0x534),_0x1b8b0e['VERBOSE']=a0_0x46df1a(0x5de),_0x1b8b0e))(Zs||{}),ea=(_0x1f1e73=>(_0x1f1e73[a0_0x46df1a(0x3d2)]=a0_0x46df1a(0x3d2),_0x1f1e73[a0_0x46df1a(0x76)]=a0_0x46df1a(0x76),_0x1f1e73[a0_0x46df1a(0x548)]=a0_0x46df1a(0x548),_0x1f1e73[a0_0x46df1a(0x762)]='DARK',_0x1f1e73[a0_0x46df1a(0x145)]=a0_0x46df1a(0x145),_0x1f1e73[a0_0x46df1a(0x76c)]='DEBUG',_0x1f1e73[a0_0x46df1a(0x37c)]='VERBOSE',_0x1f1e73))(ea||{}),ta=(_0xc2d10f=>(_0xc2d10f[a0_0x46df1a(0x3d2)]=a0_0x46df1a(0x308),_0xc2d10f['INFO']=a0_0x46df1a(0x28b),_0xc2d10f['WARN']=a0_0x46df1a(0x5d4),_0xc2d10f[a0_0x46df1a(0x762)]=a0_0x46df1a(0x64a),_0xc2d10f[a0_0x46df1a(0x145)]=a0_0x46df1a(0x4e3),_0xc2d10f[a0_0x46df1a(0x76c)]='\x1b[46m',_0xc2d10f['VERBOSE']=a0_0x46df1a(0x115),_0xc2d10f))(ta||{}),$=class{constructor(_0x5cea70=a0_0x46df1a(0x2b0)){const _0x141668=a0_0x46df1a;this['context']=_0x5cea70,this[_0x141668(0x46a)]=b;}[a0_0x46df1a(0x187)](_0x220384){this['context']=_0x220384;}[a0_0x46df1a(0x5f2)](_0xe8c3b1,_0x766654){const _0x26c75d=a0_0x46df1a;let _0x1e12b8=[];this[_0x26c75d(0x46a)]['get'](_0x26c75d(0x3d2))[_0x26c75d(0x5bb)][_0x26c75d(0x14b)](_0x4468ba=>_0x1e12b8[_0x26c75d(0x45f)](ea[_0x4468ba]));let _0x5875ca=typeof _0xe8c3b1;_0x1e12b8[_0x26c75d(0x3f1)](_0x766654)&&(b[_0x26c75d(0x20f)](_0x26c75d(0x3d2))[_0x26c75d(0x5e5)]?(console[_0x26c75d(0x307)](_0x26c75d(0x768)+Zs[_0x766654],'\x1b[1m\x1b[37m',(0x0,hs[_0x26c75d(0x2fa)])()[_0x26c75d(0x62e)]('DD/MM\x20HH:mm:ss'),'\x1b[0m',gs[_0x766654]+ta[_0x766654]+_0x26c75d(0x768),_0x766654+_0x26c75d(0x388),_0x26c75d(0x392),this[_0x26c75d(0x4ef)]+_0x26c75d(0x2d8),gs[_0x766654],_0x5875ca!=='object'?_0xe8c3b1:'',_0x26c75d(0x2d8)),_0x5875ca==='object'&&console[_0x26c75d(0x307)](_0xe8c3b1,'\x0a')):console[_0x26c75d(0x307)]((0x0,hs[_0x26c75d(0x2fa)])()[_0x26c75d(0x62e)]('HH:mm:ss'),_0x766654+'\x20',''+this[_0x26c75d(0x4ef)],_0xe8c3b1));}[a0_0x46df1a(0x307)](_0x597b4f){const _0x3294cc=a0_0x46df1a;this[_0x3294cc(0x5f2)](_0x597b4f,'LOG');}[a0_0x46df1a(0x459)](_0x1fe692){const _0x2ea5b6=a0_0x46df1a;this[_0x2ea5b6(0x5f2)](_0x1fe692,_0x2ea5b6(0x548));}[a0_0x46df1a(0x33d)](_0x1b8bf8){const _0x1eb66c=a0_0x46df1a;this[_0x1eb66c(0x5f2)](_0x1b8bf8,_0x1eb66c(0x76));}[a0_0x46df1a(0x2fb)](_0x44da4f){this['console'](_0x44da4f,'ERROR');}[a0_0x46df1a(0x2c1)](_0x445176){const _0x14d415=a0_0x46df1a;this[_0x14d415(0x5f2)](_0x445176,_0x14d415(0x37c));}['debug'](_0x4b4a12){const _0x38bd56=a0_0x46df1a;this[_0x38bd56(0x5f2)](_0x4b4a12,_0x38bd56(0x76c));}[a0_0x46df1a(0x271)](_0x1fc3ef){const _0x301593=a0_0x46df1a;this[_0x301593(0x5f2)](_0x1fc3ef,_0x301593(0x762));}};function sa(){const _0x509853=a0_0x46df1a;process['on']('uncaughtException',(_0x11d51d,_0x3fbb7d)=>{const _0x1c608f=a0_0x2bf6;new $(_0x1c608f(0x45d))[_0x1c608f(0x2fb)]({'origin':_0x3fbb7d,'stderr':process[_0x1c608f(0x1d1)]['fd'],'error':_0x11d51d});}),process['on'](_0x509853(0xfe),(_0x25cd04,_0x17368b)=>{const _0x2e874a=_0x509853;new $(_0x2e874a(0xfe))['error']({'origin':_0x17368b,'stderr':process[_0x2e874a(0x1d1)]['fd'],'error':_0x25cd04});});}var aa=A(require(a0_0x46df1a(0x5ee))),ms=new aa[(a0_0x46df1a(0x2fa))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Me=require(a0_0x46df1a(0x39e)),Ae=A(require(a0_0x46df1a(0x39e))),We=new $(a0_0x46df1a(0x23e)),F=b['get'](a0_0x46df1a(0x723)),R=F[a0_0x46df1a(0x544)]?F[a0_0x46df1a(0x26e)][a0_0x46df1a(0x429)]?Ae[a0_0x46df1a(0x2fa)][a0_0x46df1a(0x692)](F[a0_0x46df1a(0x26e)]['URI'],{'dbName':F[a0_0x46df1a(0x26e)]['DB_PREFIX_NAME']+a0_0x46df1a(0xf7)}):Ae[a0_0x46df1a(0x2fa)]['createConnection'](a0_0x46df1a(0x6f9)+F[a0_0x46df1a(0x26e)]['HOST']+':'+F[a0_0x46df1a(0x26e)][a0_0x46df1a(0x665)]+a0_0x46df1a(0x545),{'user':F[a0_0x46df1a(0x26e)][a0_0x46df1a(0x664)],'pass':F[a0_0x46df1a(0x26e)]['PASSWORD'],'dbName':F[a0_0x46df1a(0x26e)][a0_0x46df1a(0xd5)]+'-whatsapp-api'}):null;F[a0_0x46df1a(0x544)]&&We['info'](a0_0x46df1a(0x1c5)+R[a0_0x46df1a(0x4f6)]);function a0_0x30d9(){const _0x61a698=['):\x20Buscando\x20flow,\x20id:\x20','Início','options','fetchMessages','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','):\x20Criando\x20fluxo\x20compartilhado...','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','messageType','spawn','descOwner','unlinkSync','promote','\x1b[33m','@newsletter','Tentando\x20reconectar...','config','isAdmin','Valor\x20de\x20find\x20ou\x20replace\x20ausente','):Archiving\x20chat','\x5c$&','getUniqueFlowName','deleteBlock','Missing\x20global\x20api\x20key','variable','findOrCreate','app','groupAcceptInvite','sendSticker','flowStopConversation','authModel','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','error\x20get\x20vote','Erro\x20ao\x20normalizar\x20a\x20mensagem:','cors','endsWith','groupdata','sendStatus','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20','removeIPv6ById','sendReaction','expiration','senderKeyDistributionMessage','contactsArrayMessage','):Image\x20converted\x20to\x20WebP','PREFIX_KEY','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20','):Type\x20defined\x20as\x20audio','1811598wemrDR','):\x20Enviando\x20áudio','Erro\x20ao\x20buscar\x20o\x20fluxo','color','sendMessageAck','replacer','varedit','pollCreationMessageV2','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','delayChatLabel','some','):\x20Alterando\x20fluxo...','notify','Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture','\x20do\x20chat\x20','#b4ebff','role','contact_blacklist','CORS_CREDENTIALS','waInstances','addBlock','mongodb://','delaySecMax','):\x20Procurando\x20conversa','triedToSend','READ','Erro\x20ao\x20buscar\x20conversas','data:\x20','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','enumerable','pollCreationMessage','):Image\x20is\x20base64','):Fetching\x20business\x20profile','contacts','getMinutes','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','deleteMany','pairingCode','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','findAndReplaceRegex','action','fullName','Type\x20not\x20found','view\x20engine','CONTACTS_SET','unreadCount','deletedCount','sticker','redis://127.0.0.1:6379','createNewConversation','):\x20Usando\x20extensão\x20padrão:\x20','editflowreply','https://ipv6.jsonip.com','Not\x20is\x20business\x20profile','replaceVariablesInObject','\x20inseridas\x20no\x20banco\x20de\x20dados...','storePath','express','waitingMenu_replyOptions','messageTimestamp','namespace','archived','add','DATABASE','sendMessageWithTyping','getContentType','result','):\x20Editando\x20grupo\x20do\x20fluxo...','StartBot','content','whoCanEdit','data','https://uazapi-plugin.bubbleapps.io/','AUTHENTICATION','):\x20Entrou\x20na\x20função\x20stop','QRCODE_UPDATED','sendText','number','findGroupInfo','statSync','):Temp\x20image\x20deleted','Filtered\x20network\x20interfaces:\x20','when','joinGroup','normalizeMessageContent','headers','jsonwebtoken','title','startFlowWebhook','findIndex','webhook','GET','.X-ABLabel:Celular\x0a','shift','sha256','Not\x20Found','processScheduleFlow','ip\x20-6\x20addr\x20show\x20dev\x20','getMessage','audio/ogg','groupGetInviteInfo','envProcess','\x27\x20não\x20encontrado','.pdf','creation','The\x20instance\x20needs\x20to\x20be\x20disconnected','):\x20Criou\x20conversa\x20no\x20startFlow','removeChatLabel','\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','):\x20Label\x20','ScheduleMessageModel','CONTACTS_UPDATE','key','):\x20Editando\x20mensagens\x20no\x20grupo...','currency','created','chats','limit','lastSend','remoteJid','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo','collection','):\x20delete\x20=\x20true','.wav','replaceOne','cacheInstanceModel','DARK','isInteger','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','detectIPv6PrefixAndInterface','):\x20Editando\x20bloco...','dbConnection','\x1b[1m','contextInfo','sections','\x20horas\x20e\x20','DEBUG','then','/:instanceName','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','readdirSync','address','File\x20written\x20to\x20path:\x20','testIPv6','ReplyOption\x20com\x20ID\x20','findChats','processApiRequest','flowName','_id','mongodb','Internal\x20Server\x20Error','Parando\x20aplicação...','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','\x20}\x0a','dbServer','\x20não\x20encontrado\x20para\x20cópia','Subdomínio\x20final:','Button\x20IDs\x20cannot\x20be\x20repeated.','videoMessage','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','authorization','createWebhook','Group\x20not\x20found','sendDataWebhook','Falha\x20ao\x20criar\x20IPv6.','blockId','\x20removido\x20do\x20chat\x20','Cache\x20instance\x20update\x20result:\x20','pt-BR',',\x20Novo\x20tamanho:\x20','quoted','):\x20Comando\x20desconhecido:\x20','groupMetadata','loadInstance','Fluxo\x20não\x20encontrado\x20na\x20memória.','keys','RECONNECT_TIME_FRAME','buttons','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','313560DRmMbB','Erro\x20ao\x20deletar\x20mensagens:','updateProfilePicture','.TEL;waid=','):\x20sender\x20=\x20number:\x20',']\x20(','pollMessage','\x20chats\x20de\x20','flowPrefixCommand','trim','match','8080','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','updateGroupPicture','updateBlock','authentication','beforeExit','request\x20body:\x20','application/octet-stream','updateMissingEtiquetas','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','sharePass','Safari','connectedName','SendScheduleMessage','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','\x20depois\x20','global','):\x20this.processingGroup_id:\x20','copyBlock','Error\x20removing\x20IPv6\x20address:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture','dropCollection','fetchContacts','description','updateMediaMessage','getPrototypeOf','deleteImportedChat','this.reconnectAttempts:\x20','now','startCommand','reject','update','WARN','telefone','extractPhoneNumber','flowConfig','/wa-connection-update','open','REDIS_ENABLED','mentioned','exit','_fromMe','Validate','sendPresenceUpdate','bulkWrite','create','\x1b[32m%s\x1b[0m','createGroup','admin','mimetype','instanceName','model','FlowRouter','saveCreds','http://checkip.dyndns.org','\x0a*Você\x20respondeu*:\x0a','ms\x20(tentativa\x20','toNumber','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','repository','Error\x20updating\x20message\x20status:','\x20minutos.\x20Será\x20às\x20','lastSendMessage','toLocaleString','Falha\x20ao\x20processar\x20a\x20solicitação','stateConnection','.type','createServer','request\x20received\x20in\x20deleteDoneMessages','stopMinutes','BufferJSON','\x1b[34m%s\x1b[0m','protocolMessage','Imagem\x20não\x20encontrada','groupId','):\x20Flow\x20\x27','flow','TEXT','reorderReplyOptions','selectableCount','/wa-contacts','findLabels','messages.upsert','isURL','CONTACTS_UPSERT','parse','eventHandler','-instances','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','text/event-stream','webhookService','Database\x20update\x20result:','SSL_CONF_FULLCHAIN','\x27...','Error\x20fetching\x20and\x20updating\x20profile:\x20','connect','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','waMonitor','iniciando\x20fluxo\x20router','):\x20Buscando\x20flow...','isLong','):Output\x20path:\x20','restartInstance','ff:fe','Not\x20allowed\x20by\x20CORS','website','drop','295701AhraEw','messageId','https://','setWebhook','textMessage','unknown\x20operation\x20type\x20[','labels.association','sendList','query','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','not\x20loaded','.ppt','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc','organization','apiResponse','contact','text','content-type','uazapiSendLocation','\x20-y','DB_PREFIX_NAME','Novo\x20IP\x20criado:\x20','cacheContact','createSectionsFromValues','replaceVariablesChat','redis','):\x20leadInfoVariables','uazapiSendMedia','):\x20Editando\x20condição\x20do\x20fluxo...','object','PENDING','replaceVariablesInReplyOptions','use','announcement','deleteDoneMessages','STORE_CHATS','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:','setting','webhookMap','connectionState','cacheInstanceRepository','request\x20received\x20in\x20editFlowcondition','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','networkInterface','logger','delayMessage','font','\x20minutos...','LICENSE_INVALID','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','):\x20não\x20encontrou','reorderMessages','globalShow','processblock','-whatsapp-api','apply','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','output','decryptPollVote','announce','^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$','unhandledRejection','getUpdate','timeout','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','inviteUrl','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','DATABASE_CONNECTION_HOST','isJidGroup','muteEndTime','locked','messaging-history.set','):\x20atualização\x20chat:\x20','sharp','entries','):\x20Iniciando\x20bot...','nome','getLastMessage','.ogg','createClient','groupRequestParticipantsList','retrySendMessage','isListOfNumbers','):\x20Buscando\x20conversa...','\x1b[47m','loadWebhook','toUpperCase','Telefone:\x20','isArray','_Flows','Error\x20updating\x20cache\x20contact:','):\x20Entrou\x20na\x20função\x20goToFlow','name','CHATS_SET','whoCanUse','findGroups','verifiedName','not_announcement','env.KEY\x20!==\x20key','normalizeMessage','getAllData','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','):\x20updateResult:','stopped',',\x20Resultado:\x20','qrcode','Atualização:\x20','#d8e651','):\x20Error\x20processing\x20the\x20block:\x20','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','instance.','status.instance','\x1b[31m%s\x1b[0m','0123456789ABCDEF','lean','delayChatLabel_RETRY_DELAY_MS','):\x20Current\x20Time:\x20','flush','restart','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.','getScheduleMessageModelForOwner','post','updateProfileName','from','readData','chat\x20não\x20encontrado','stickerMessage','SECRET','useMultiFileAuthState','messages.update','\x20inseridos\x20no\x20banco\x20de\x20dados...','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','ERROR','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','):\x20whoCanEdit\x20after\x20validation:\x20','processawaitSeconds','chats.upsert','URL','forEach','fetchLatestBaileysVersion','locationMessage','Falta\x20informação\x20para\x20a\x20chamada\x20API','FlowController','AutomateSystem\x20não\x20foi\x20inicializado','updateReadReceiptsPrivacy',',\x20qrcodeCount:\x20','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','dbInstance','MESSAGES_UPDATE','Erro\x20ao\x20arquivar\x20chat','):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27','findParticipants','connecting','minutesToClose','Last\x20message\x20not\x20found\x20for\x20number:\x20','groupParticipantsUpdate','getflow','latitude','):\x20Enviando\x20enquete','updateOneById','request\x20received\x20in\x20getFlow','Esse\x20fluxo\x20expirou','):\x20Erro\x20durante\x20a\x20atualização:\x20','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','Erro\x20ao\x20editar\x20a\x20conversa','canSendMessage','store','removeInstance','updateConversation','slice','DaysToDelete','fora\x20do\x20git','SEND_MESSAGE','Removidas\x20as\x20variáveis:\x20','status','sort','.jpg','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','request\x20received\x20in\x20getAutomateSystem','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','getContactModelForOwner','/wa-all-message','modifiedCount','):\x20teve\x20mudanças\x20chat.archived:\x20','):\x20tem\x20blocks','urlencoded','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','Error\x20in\x20scheduleNextCheck:\x20','\x20tentativas.','/events/:instance','):\x20Deletando\x20mensagem','descId','^\x5cd+','PRESENCE_UPDATE','):\x20\x27Enviando\x20mídia\x20para\x20\x27','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','replyOptions','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','setContext','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','DATABASE_CONNECTION_USER','_Labels','.gif','deleteReplyOption','):Audio\x20converted\x20and\x20stored\x20in\x20cache','/instance/connectionState','goNextblock','CREDENTIALS','goToFlow','https://api.ipify.org?format=json','findContacts','editFlowBlock','load','utf-8','isCommunityAnnounce','author','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','ListType','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','groups','\x20com\x20sucesso.','removeUnusedChatFields','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','Content\x20is\x20required','Parando\x20aplicação,\x20atualização\x20recebida','Nenhum\x20chat\x20fornecido\x20para\x20inserção.','):\x20Bloco\x20original\x20para\x20cópia:\x20','saveChatVariables','lastBlockId','min','endSession','chatHandle','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','optionName','logout','picture','\x22,\x20valor\x20a\x20substituir:\x20\x22','label','Connection\x20closed\x20for\x20instance:\x20','admin_add','undefined','request\x20received\x20in\x20updateAutoCompleteMessages','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','createConversationforStartFlow','quotedMessage','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','DATABASE_CONNECTION_DB_PREFIX_NAME','):\x20Ignoring\x20group\x20messages.','readMessage','):Error\x20in\x20converting\x20audio','contentText','):\x20Bloco\x20com\x20ID\x20','activatedCount','Valor\x20da\x20URL\x20recuperada:','Erro\x20ao\x20atualizar\x20o\x20flow.','type','https://v6.ident.me','XX:XX:XX:XX:XX:XX','Configuração\x20SSL\x20recuperada:','Error\x20parsing\x20JSON:','ON\x20-\x20dbName:\x20','groups.upsert','removeProfilePicture','IPv6\x20address\x20removed:\x20','padStart','?timestamp=','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant','):\x20Entrou\x20na\x20função\x20processawaitSeconds','splice','\x20instance\x20does\x20not\x20exist','response','Mensagens\x20deletadas\x20com\x20sucesso.','stderr','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','updateProfileStatus','start','notas','AUTHENTICATION_TYPE','ObjectId','rows','scheduleMessage','licenca','group-participants.update','GROUPS_UPSERT','reorderBlocks','Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.','editFlowVaredit','.error','):\x20Limpando\x20delayMessage','exec','ini','fileName','reactionMessage','phoneNumber','Selecione','Connection','.doc','contains','Authentication\x20error','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','split','eventEmitter','\x0aitem','promisify','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo','Error\x20while\x20deleting\x20message\x20for\x20everyone','METHODS','GUARD','cwd','findByIdAndDelete','client','LOG_LEVEL','toBRL','hDel','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName','startCommandWord','stopIfLastReturnedError','\x20foi\x20interrompido\x20pelo\x20usuário.','Cache-Control','findGroup','apikey','request\x20received\x20in\x20scheduleMessage','creds.json','footerText','}}\x20->\x20valor\x20não\x20encontrado','save','isJWT','archive','replyOption','startFlow','pollOnReplyDelete','URL\x20não\x20disponível','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','\x20segundos','get','whatsappNumber','writeFileSync','Instance\x20deleted','charAt','yes','groupadd','#d3a91f','profilePicture','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','getValidWhatsAppNumbers','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','connectToWhatsapp','.ogv','#ffffff','):\x20Conversa\x20está\x20expirada','express-async-errors','axios','all','qrcode-terminal','deleteMessage','presence.update','unavailable','Comando\x20desconhecido','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','qrcode.updated','messages','\x27\x20removido\x20do\x20AutomateSystem.','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','delete','numbers','updateMessage','Button\x20texts\x20cannot\x20be\x20repeated','\x22\x20not\x20found','leadInfo.','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','DisconnectReason','allContacts','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','The\x20global\x20api\x20key\x20must\x20be\x20set','#6f7bcf','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','$set','#ff9484','ephemeralExpiration','cpf','Db\x20Connection','backgroundColor','convertaudioMP3','Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','pushName','flowIgnoreGroups','pollUpdateMessage','chats.delete','Error\x20removing\x20unused\x20chat\x20fields:','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','cachedContact','vote','done','choices','image','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','):Converted\x20image\x20deleted','updateReplyOption','imgUrl','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','request\x20received\x20in\x20getConversation','CHATS_DELETE','false','size','recording','request\x20received\x20in\x20starFlow','random','blocks','request\x20received\x20in\x20allFlows','findAll','createAndSave','Background\x20color\x20is\x20required','values','setHeader','fetchProfilePicture','Database\x20connection\x20closed.','width','groupValidate','):\x20Grupo\x20','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','redirect','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','envYaml','AUTHENTICATION_API_KEY','STATUS_INSTANCE','preview','remove','CONNECTION','TYPE','enviado\x20para','dark','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','badSession','https://jsonip.com','updateAgent','long','ScheduleMessage','deleteChat','generateRandomIPv6','maxActives','method','equal','Erro\x20ao\x20iniciar\x20o\x20fluxo.','collections','Instance\x20Key\x20from\x20DB:','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20não\x20estão\x20ativados.','Types','\x20segundos\x20antes\x20de\x20reconectar...','IP\x20confirmed:\x20','basename','height',',\x20valor\x20a\x20encontrar:\x20\x22','statusMessage','nomecompleto','autoCompleteMessages','\x1b[44m','pino','folder','):\x20','isRunning','buttonMessage','groups_ignore','header','):\x20whoCanUse\x20before\x20validation:\x20','\x27\x20não\x20encontrado\x20na\x20memória','g-t','Nenhum\x20participante\x20válido\x20encontrado.','exists','delay','/instance','groupRequestParticipantsUpdate','createOrUpdate','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','PROXY','Configured\x20IPv6:\x20','instanceInfo','STORE','findGroupInfos','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','contacts.update','Não\x20é\x20possível\x20excluir\x20uma\x20mensagem\x20que\x20está\x20em\x20processamento.\x20Pause\x20primeiro\x20e\x20espere\x20em\x20torno\x20de\x2020\x20segundos\x20para\x20deletar','insertMany','birthtime','buttonText','/exit','Instance\x20ID:','inviteCode','Mensagem\x20não\x20suportada','writeFile','path','apirequest','\x20não\x20encontrado\x20para\x20atualização.','Logger','instance','reconnectAttempts','conversation','hasOwnProperty','updatePrivacySettings','Nenhum\x20fluxo\x20encontrado\x20para:\x20','truncatedto',',\x20saindo.','editFlowReply','\x20:\x20','):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','getTime','notEmpty','@g.us','reviver','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','verbose','uazapi','clearVariables','toggleEphemeral','Bad\x20Request','base64','value','_activedCount','):\x20expirationTime:\x20','statusCode','stopConversation','getScheduleMessage','contactMessage','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','conversationTimestamp','Instâncias\x20removidas:\x20','toDataURL','moreLogs','bodyString','removeData','):\x20Falha\x20ao\x20deletar\x20mensagem.','_ScheduleMessages','Instance\x20logged\x20out','\x1b[0m','chats.update','groups.update','pre','):\x20nextBlock.uazapi.name','randomMac','onTime','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','insert','.\x20Pulando.','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','truncatedtoEnd','8VaExXu','finish','486270iENCyx','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','messageStubParameters','Erro\x20ao\x20aplicar\x20varedit:\x20','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','fileLength','connectToWhatsappController','startID','DOCKER_ENV','mediaSticker','updateCustomFields','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture','memberAddMode','whatsappNumbers','getStatus','Error\x20fetching\x20group','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','API\x20Key\x20inválida.','Partes\x20do\x20caminho\x20FULLCHAIN:','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','default','error','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','groupJid','editMessagesInGroup','removeIPv6','customFields','flowActive','labels.edit','):Trying\x20to\x20get\x20business\x20profile','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','groupSettingUpdate','Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','log','\x1b[42m','execSync','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','max','Número\x20não\x20possui\x20WhatsApp.','test','leaveGroup','editConversation','variables','reference','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','groupLeave','https://uazapi-plugin.bubbleapps.io/?url=','sendButtons','STORE_CLEANING_TERMINAL','):Image\x20created','.mp3','localWebhook','isCommunity','No\x20suitable\x20network\x20interface\x20found','conditions','Erro\x20ao\x20atualizar\x20AutomateSystem:','restrict','Erro\x20ao\x20deletar\x20chat:','InstancesAlterarTodas','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','listMessage','isBusiness','valid','#ffc5c7','5iUhytl','AddChatLabel','):\x20Edit\x20schedule\x20message...','@s.whatsapp.net','toFile','):\x20[messages.upsert]\x20group\x20ignored','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','configureIPv6',',\x20canSendMessage:\x20','importChatsBatch','fetchProfilePictureUrl','groupFetchAllParticipating','AddUserFlow','automateSystem','find','events','@broadcast','!cmd_','--------------------------------------','evaluateCondition','ERROR:\x20','warn','notMatchRegex','waitingMenu_text','Content-Type','\x5cd+','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','every','stopWhenYouSendMsg','video','getMessageModelForOwner','uazapiSendAudio','Número:\x20','connectionStatus','groupName','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','MESSAGES_UPSERT','longitude','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','):\x20Fluxo\x20\x27','qrCode','and','setRestartTimeout','prototype','waUploadToServer','.extension','):\x20Criando\x20fluxo...','IPv6\x20address\x20configured:\x20','set','):\x20conversation.lastInteraction:\x20','prepareMediaMessage','waitingForReplyMenu','lastMessage_id','auth','proxy:\x20','presenceSubscribe','processgoToFlow','Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage','sendPoll','keep-alive','):\x20conversation.status:\x20','__esModule','tags','The\x20\x22','makeCacheableSignalKeyStore','Instância\x20não\x20encontrada.','updateGParticipant','flattenObject','replaceVariables','Usando\x20IP\x20existente:\x20','editflowcondition','findFlow','blockLogs','imported','):\x20Enviando\x20texto','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','editflow','closed','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','errorLog','Subdomínio\x20não\x20encontrado','addReplyOption','Error\x20writing\x20file:\x20','delayChatLabel_MAX_RETRIES','VERBOSE','addMessagesToGroup','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','reaction','\x1b[31m','deleteMessageForEveryone','trimmed','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message',',\x20lastCondition:\x20','evaluateConditionTest','no.connection','video-cover.png','\x20\x1b[0m','http','ORG:','sendWhatsAppAudio','Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...','Instance\x20\x22','editFlowGroup','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','dbClient','dayjs','\x1b[33m\x1b[1m','exports','router','empty','SERVER_TYPE','downloadMediaMessage','.fileUrl','.\x20Aguardando\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','etiquetas','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus','groupUpdateDescription','mongoose','createJid','readMessages','.xls','):\x20Fluxos\x20do\x20proprietário\x20\x27','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done','online','newStoppedUntil','\x1b[30m%s\x1b[0m','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.',',\x20Segundo\x20Valor:\x20','/webhook','formatStatusMessage','menuExpiredMessage','EXPIRIN_IN','linkPreview','SSL_CONF','/media/','TEL','msgRetryCounterCache','keyPattern','findByIdAndUpdate','):\x20Fluxos\x20do\x20proprietário\x20\x27global\x27\x20transferidos\x20para\x20a\x20coleção\x20centralizada.','synchronizeAndMapFlows','app-state-sync-key','DELIVERY_ACK','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','revokeInviteCode','uuid','poll','composing','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','CONECTADO\x20À\x20UAZAPI','ip\x20-6\x20addr\x20del\x20','statusJidList','menuMessage','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','DATABASE_CONNECTION_URI','):\x20newFirstValue\x20após\x20replaceVariables:',',\x20resultado:\x20','WA\x20MODULE','):\x20Criou\x20conversa\x20no\x20startFlowWebhook','\x1b[33m%s\x1b[0m','getConversation','saveVariable','Read\x20messages','errors','):\x20Rótulo\x20atualizado:\x20','chatModify','.\x20Removendo\x20da\x20lista\x20de\x20tentativas.',',\x20global:\x20','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','LOG','lastCondition','groupCreate','order','\x22\x20-\x20REMOVED','waitingMenu_id','replaceValue','chat','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','none','owner','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20','^\x5cd+([-]\x5cd+)*@g.us$','groupHandler','applyvaredit','atendimentoAberto','@redis/client','/config','Conexão\x20estabelecida','flowConversation','authService','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','Error\x20in\x20chatModify\x20for\x20number\x20','caption','isBase64','loggedOut','Invalid\x20format','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','startsWith','includes','processUazapi','unlocked','wuid','success','map','process','/64\x20dev\x20','updatePresence','remove.instance','optionDescription','SSL_CONF_PRIVKEY','deleteAll','vir','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','deleteFlow','Erro\x20ao\x20buscar\x20fluxos:','ephemeralMessage','removed','findOne','json','class-validator','displayName','_activatedCount','.png','Conversa\x20deletada\x20com\x20sucesso.','Falhou\x20ao\x20encontrar\x20chat\x20','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','lastFetchAwaitingApproval','public','updateFlowConfig','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','.mimetype','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','viewOnceMessage','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','pollCreationMessageKey','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','pm2\x20flush','getOwnPropertyNames','pow',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','Fluxos\x20encontrados\x20de\x20\x27','editflowgroup','hSet','CLEANING_INTERVAL','replace','createIPv6','Network\x20Interface\x20detected:\x20','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','command','media','updateGroupsAddPrivacy','Instance\x20Name:','MESSAGES_SET','URI','\x27\x20do\x20banco\x20de\x20dados...','StatusJidList\x20is\x20required','):\x20\x27Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x27,\x20','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','isValidIPv6Config','notContains','Esse\x20fluxo\x20não\x20permite\x20importação.','closeExistingConversations','updateGParticipate','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20',',\x20Expiration\x20Time:\x20','recebido\x20de','/wa-chats','WebhookGlobal','apiName','capitalizedWords','getVariablesChat','\x27\x20->\x20','put','Last\x20message\x20not\x20found','superadmin','NextBlock','Erro\x20ao\x20editar\x20agentes','updateChatGroupData','):\x20transformedCustomFieldVariables','PLAYED','):Audio\x20processed','7442aQBbPJ','src','Close\x20connection','ex:\x20\x22groupJid=120362@g.us\x22','convertToWebP','migrateFlowsToCentralizedCollection','OrAnd','delaySecMin',',\x20fará\x20nova\x20verificação\x20em\x20','):Sending\x20audio\x20whatsapp','uazapiSendText','crypto','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','REDIS','AppStateSyncKeyData','Database\x20is\x20not\x20enabled','readMessageBot','viewOnceMessageV2','scheduleSendAudio','defineAuthState','info','isValidAndUniqueIPv6','https://api64.ipify.org?format=json','ids','uncaughtException','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','push','request\x20received\x20in\x20fetchConversation','Erro\x20ao\x20iniciar\x20fluxo:\x20','groupRevokeInvite','Unauthorized','):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar','Mac\x20OS','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','testingWith','_pushName','processPollUpdateMessage','configService','release','messageSecret','connectionUpdate','402ggkDPs','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','integer','):\x20\x27Enviando\x20texto\x20para\x20\x27','processConditions','join','sendAudio','findWebhook','request\x20received\x20in\x20createFlow','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','):\x20whoCanUse\x20after\x20validation:\x20','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','saveTextReply','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20schedule\x20message','The\x20property\x20cannot\x20be\x20empty','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','Message','audio','updateChatWithMessage','existsSync','participant','convertaudio','archiveChat','has','):\x20Visualizando\x20AutomateSystem','lastUpdate','onWhatsApp','editFlowCondition','awaitingApproval','):\x20Chat\x20','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','migrateAllOwnersFlowsToCentralizedCollection','updateGroupWebhook','groupMemberAddMode','prepareWAMessageMedia','inet6','importChats','authState','ip\x20-br\x20link\x20show','generate','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','findById','GROUPS_UPDATE','SINGLE_SELECT','leadInfo.etiquetas','menuIgnoreNonVotes','views','toString','padEnd','leadInfo.desativadoFluxoAte','sendMessage','isJidBroadcast','fetchInstances','):\x20Parar\x20função\x20pois\x20não\x20está\x20conectado','):\x20Mensagem\x20já\x20enviada\x20para\x20','cacheContactModel','buttonId','stdout','9lbNKkh','inner','participants','message_normalized','Data\x20inválida\x20fornecida','editFlowVariable','messages.set','sendMenu','request\x20received\x20in\x20editConversation','):\x20Deletando\x20conversa...','updateOne','updateMany','The\x20','vcard','match_last_seen','\x1b[30m','demote','cleanStore','pollCreationMessageV3','substring','sem\x20texto\x20na\x20mensagem','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','SERVER_PORT','profilePictureUrl','\x20mensagens\x20de\x20','\x1b[34m','send.message','Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27','CHATS_UPDATE','/*.json','lowerCase','#9ab6c1','Erro\x20ao\x20buscar\x20a\x20conversa','changeVariables','):Delete\x20chat','status@broadcast','block','privacySettings','.docx','child_process','findConversation',',\x20Minutes\x20to\x20Close:\x20','getDevice','lastMessage','enabled','):Processing\x20audio','/instance/connect','CHATS_UPSERT','processclearVariables','messageHandle','documentMessage','state','writeData','sendLocation','leadInfo','\x20atualizado\x20com\x20sucesso.\x20Ação:\x20','API_KEY','profile','\x1b[41m','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','next_groupId','insertCount','pictureUrl','EMAIL:','\x20não\x20encontrado','oldToken','binary','creds.update','extractMessageContent',',\x20isAdmin:\x20','context','replaceVariablesLogs','ip:\x20','isConnected','\x22\x20cannot\x20be\x20empty','}}\x20->\x20\x22','PASSWORD','$dbName','fone','PRIVKEY','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20','agents','originalUrl','#83e421','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','createInstance','cleaningUp','lastReceivedMessage','cleanDisconnectedInstances','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','allFlows','Fluxos\x20não\x20estão\x20ativados','g.us','joinGroupValidate','connection.update','assign','delAll','boolean','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','dbSettings','/media','processvaredits','dataValidate','editChat','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','local_map','call','bearer','params','\x27\x20transferidos\x20para\x20a\x20coleção\x20centralizada.','env','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','throwAndLogError','scheduled','[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache','):\x20Bloco\x20copiado:\x20','getHours','):\x20conversation.waitingMenu_name','expression','AutomateFunctions','request\x20received\x20in\x20editFlow','segundos','instanceKeys','fetchConversation','fromMe','Erro\x20ao\x20copiar\x20o\x20documento','checkAndRestartProcess','desativadoFluxoAte','saveMediaToFile','getDelay','):\x20Mensagens\x20com\x20status\x20\x22done\x22\x20deletadas\x20com\x20sucesso.','Rótulo\x20inválido\x20ou\x20sem\x20ID.','\x20minutos','deleteOne','ip\x20-6\x20addr\x20add\x20','imageMessage','noConnection','):\x20Erro\x20ao\x20enviar\x20mensagem\x20para\x20','lastInteraction','\x1b[36m%s\x1b[0m','GROUP_PARTICIPANTS_UPDATE','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','scheduleNextCheck','Type\x20is\x20required','getBusinessProfile','documentWithCaptionMessage','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','sleep','toBrazilianNumberFormat','url','jid','):Desconectado,\x20parando\x20execução.','):\x20newSecondValue\x20após\x20replaceVariables:','_remoteJid','ENABLED','?authSource=admin&readPreference=primary&directConnection=true','groupToggleEphemeral','mkdirSync','INFO','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','toArray','Erro\x20ao\x20atualizar\x20agendamento\x20','floor','cachedData-whatsapp','abs','Subdomínio\x20extraído\x20da\x20URL:','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence','defineProperty','../env.yml','fetchChats','Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral','_error','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','CORS','):Business\x20profile\x20fetched','setUpdate','pollErrorMessage','groupSetting','Erro\x20ao\x20substituir\x20variáveis\x20para\x20','\x22reaction\x22\x20must\x20be\x20an\x20emoji','#fed428','AUTHENTICATION_JWT_EXPIRIN_IN','catch','del','sectionsToString','sendContact','utf8','available','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp','pollMessageOnDelete','cachedContacts-whatsapp','saveConversationToDatabase','updateMissingTags','request\x20received\x20in\x20editFlowgroup','formatBRNumber','Valor\x20inicial:\x20\x22','Erro\x20ao\x20buscar\x20Schedule\x20Messages','proto','waitingMenu_ExpiredMessage','subject','createflow','Log\x20out\x20instance:\x20','user','Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.','sending','SERVER_ACK','filter','secondValue','KEY','uazapiDeleteMessage','validate','):\x20Atualizando\x20status\x20da\x20mensagem\x20','JWT','label_jid','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','instances','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','repeat','audioMessage','/wa-presence','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','listType','Font\x20is\x20required','/instance/fetchInstances','redisEnv','Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup','\x20-i\x20','deleteConversation','findMany','mediaKey','chatLog','imagechat','creds','updateLastSeenPrivacy','Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups','updateOnlinePrivacy','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting','getBase64FromMediaMessage','temp-','ip6eui','fetchProfile','chatId','request\x20received\x20in\x20deleteConversation','scheduleSendText','Erro\x20ao\x20deletar\x20mensagens\x20com\x20status\x20done','routerPath','):\x20[messages.update]\x20group\x20ignored','$pull','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','paused','less','.xlsx','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','dropIndex','Erro\x20ao\x20atualizar\x20o\x20fluxo:','Erro\x20ao\x20criar\x20fluxo','convertedOptions','upperCase','hex','Error\x20testing\x20IP\x20with\x20','Flow\x20\x27','approve','getAutomateSystem','CONNECTION_UPDATE','):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção','generateHash','readFileSync','sendMedia','arraybuffer','LEVEL','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','emit','autoCompleteMessages.command_1','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.','processingGroup_id','greater','[all]','Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20','RemoteJid:','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','send','importChatsAntigo','detail','):\x20debug\x20alterando\x20this.AutomateSystem','Erro\x20ao\x20tentar\x20autoCompleteMessages','audioWhatsapp','stringify','webhookModel','docker','toLowerCase','varedits','LabelModel','true','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','\x1b[43m','Enter\x20a\x20value\x20in\x20milliseconds','_sender','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','ConversationModel','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','editOperator','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','editFlow','oldValue','\x1b[37m%s\x1b[0m','https://chat.whatsapp.com/','):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20','matchRegex','jsonschema','variablesToObject','groupUpdateSubject','COLOR','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','Module\x20-\x20ON','createFlow','length','code','@whiskeysockets/baileys','):\x20Criando\x20nova\x20conversa[createNewConversation]','ipv6Prefix','eventemitter2','deleted','editScheduleMessage2','\x22\x20-\x20NOT\x20CONNECTION','console','groupBetterSetting','downloads','findManyByIds','\x20quoted:\x20','):\x20\x27Enviando\x20audio\x20para\x20\x27','50mb','setNewValue','/wa-groups','firstValue','joinApprovalMode','):\x20Não\x20achou\x20nenhum\x20flow','FULLCHAIN','https','):\x20encontrado\x20próxima\x20mensagem\x20para\x20','#fe9dfe','bodyStringErrorParse','Schema','):\x20Enviando\x20mensagem\x20para\x20','audio/ogg;\x20codecs=opus','\x1b[37m','Bloco\x20com\x20ID\x20','URL:','createHash','6004350qNdQGA','fromObject','CORS_ORIGIN','transformScheduledMessagesByType','Router','close','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','ListMessage','createConversationforgoToFlow','rowId','email','getClient','presence','digest','request_time','parseInt','array','arrayUnique','static','shareOwners','Message\x20absent\x20from\x20node','node-mime-types','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','option','/wa-message','\x0a{\x20instance:\x20','addresss','count','SERVER_URL','/chat','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.','where',',\x20Comparador:\x20','listResponseMessage','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','Cannot\x20','format','\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','findAndReplace','condition','userDevicesCache','\x1b[36m','#ffae04','276793djMdPR','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','IP\x20mismatch:\x20configured\x20','cache','/clients-info','instanceName\x20not\x20provided.','.url','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','https://api.openai.com/v1/images/generations','flowStopMinutes','ButtonsMessage','encoding','group','https://ifconfig.me/ip','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','fetchPrivacySettings','Erro\x20ao\x20deletar\x20a\x20conversa','):\x20Conversa\x20atualizada\x20em\x20memória','IPv6\x20addresses\x20detected:\x20','CORS_METHODS','\x1b[40m','STORE_CONTACTS','/message','Erro\x20na\x20função\x20updateChatWithMessage:\x20','#01d0e2','message','stopMinutesMaxActives','Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:','getFlow','Subdomínio\x20extraído\x20do\x20caminho\x20SSL:','markMessageAsRead','372OyDffI','document','getLabelModelForOwner','Partes\x20do\x20domínio:','.jwt','bateu\x20events','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','updateAll','realVariables','Message\x20not\x20found','editScheduleMessage','):\x20Conversa\x20inserida\x20com\x20sucesso.','subjectTime','\x20contacts','findOneAndUpdate','USER','PORT','rm\x20-rf\x20','unreadcount','reconnectTimestamps','mediaMessage','getConversationModelForOwner','groupDesc','hGetAll','groupJoinApprovalMode','Erro\x20ao\x20editar\x20o\x20chat','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','notEqual',',\x20pairCode:\x20','HeaderType','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','updateStopChat','Operador:\x20\x22','Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...','Erro\x20desconhecido\x20ao\x20deletar\x20mensagens','.webm','loadEnv','API\x20Key\x20from\x20Request:','fetchLabels','findAndUpdateCacheContact','SERVER','deleteInstance','*Pergunta*:\x20\x0a','getChatModelForOwner','last','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','timeInMinutes','responsavelid','resetReconnectionVariables','Pausado\x20por\x20','indexOf','headerString','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','readreceipts','https://github.com/uazapi/uazapi.git','mediatype','contactHandle','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','scheduleSendMedia','Erro\x20ao\x20alterar\x20privacidade','string','createConnection','This\x20name\x20','editedMessage','URL\x20completa:','updateAutoCompleteMessages','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','fetchBusinessProfile','scheduleFlow','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','uazapiSendMenu','https://api.openai.com/v1/audio/speech','round','_FlowHistorico','labelId','AutomateSystem','.txt','flows','Chat\x20com\x20ID\x20','mentions','RemoveChatLabel','Total\x20de\x20fluxos\x20transferidos\x20para\x20a\x20coleção\x20centralizada:\x20','END:VCARD','contacts.upsert','):Getting\x20image\x20from\x20url','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName','Erro\x20ao\x20importar\x20chats','urlOrBase64','/instance/create','last_update','):\x20Query\x20params:\x20','Erro\x20ao\x20remover\x20label\x20','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','CacheContacts\x20database\x20connection\x20closed.','body'];a0_0x30d9=function(){return _0x61a698;};return a0_0x30d9();}var le=F['ENABLED']?F['CONNECTION']['URI']?Ae[a0_0x46df1a(0x2fa)][a0_0x46df1a(0x692)](F[a0_0x46df1a(0x26e)][a0_0x46df1a(0x429)],{'dbName':a0_0x46df1a(0x54e)}):Ae[a0_0x46df1a(0x2fa)][a0_0x46df1a(0x692)](a0_0x46df1a(0x6f9)+F[a0_0x46df1a(0x26e)]['HOST']+':'+F[a0_0x46df1a(0x26e)][a0_0x46df1a(0x665)]+a0_0x46df1a(0x545),{'user':F[a0_0x46df1a(0x26e)][a0_0x46df1a(0x664)],'pass':F[a0_0x46df1a(0x26e)][a0_0x46df1a(0x4f5)],'dbName':a0_0x46df1a(0x56a)}):null;le&&We['info'](a0_0x46df1a(0x1c5)+le[a0_0x46df1a(0x4f6)]),process['on'](a0_0x46df1a(0x7a8),()=>{const _0x35e329=a0_0x46df1a;R&&R[_0x35e329(0x60f)](()=>{const _0x2dcad6=_0x35e329;We[_0x2dcad6(0x459)](_0x2dcad6(0x262));}),le&&le['close'](()=>{const _0x3cfcfe=_0x35e329;We['info'](_0x3cfcfe(0x6b2));});});var so=new Me[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),ao=new Me['Schema']({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),io=new Me[(a0_0x46df1a(0x603))]({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),oo=new Me[(a0_0x46df1a(0x603))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[so],'default':[]}},{'_id':!0x1}),ro=new Me[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':oo,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':ao},'groupdata':{'type':io,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),ia=_0x54f80f=>{const _0x462332=a0_0x46df1a;let _0x3b3c1e='z_'+_0x54f80f+'_Chats';return R?.[_0x462332(0x89)]('ChatModel',ro,_0x3b3c1e);},oa=require('mongoose'),no=new oa[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ra=_0x4d18d4=>{const _0x3822ad=a0_0x46df1a;let _0x57bb70='z_'+_0x4d18d4+'_Contacts';return R?.[_0x3822ad(0x89)]('ContactModel',no,_0x57bb70);},na=require(a0_0x46df1a(0x39e)),fs=class{},co=new na[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ca=le?.[a0_0x46df1a(0x89)](fs[a0_0x46df1a(0x11d)],co,'ContactsAndGroups'),la=require(a0_0x46df1a(0x39e)),ws=class{},lo=new la[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),ze=le?.[a0_0x46df1a(0x89)](ws[a0_0x46df1a(0x11d)],lo,a0_0x46df1a(0x583)),ua=require(a0_0x46df1a(0x39e)),uo=new ua[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),da=_0x33d771=>{const _0x1964ae=a0_0x46df1a;let _0x4f2c90='z_'+_0x33d771+'_Messages';return R?.[_0x1964ae(0x89)]('MessageModel',uo,_0x4f2c90);},pa=require(a0_0x46df1a(0x39e)),ys=class{},po=new pa['Schema']({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),ha=R?.[a0_0x46df1a(0x89)](ys[a0_0x46df1a(0x11d)],po,a0_0x46df1a(0x7a7)),ga=require(a0_0x46df1a(0x39e)),bs=class{},ma=new ga[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});ma[a0_0x46df1a(0x2db)](a0_0x46df1a(0x206),function(_0x2dffbd){const _0x1ad4b7=a0_0x46df1a;delete this[_0x1ad4b7(0x301)],delete this[_0x1ad4b7(0x243)],delete this[_0x1ad4b7(0x7a0)],delete this[_0x1ad4b7(0x6d0)],delete this[_0x1ad4b7(0x63e)],_0x2dffbd();});var fa=R?.['model'](bs[a0_0x46df1a(0x11d)],ma,'webhook'),D=require(a0_0x46df1a(0x39e)),Ss=require('uuid'),He=class{},ya=new D['Schema']({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Ms=new D[(a0_0x46df1a(0x603))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),ho=new D[(a0_0x46df1a(0x603))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':'list'},'footerText':{'type':String},'buttonText':{'type':String,'default':'Selecione'},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x46df1a(0x162)},'pollErrorMessage':{'type':String,'default':a0_0x46df1a(0x306)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),ba=new D['Schema']({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),go=new D['Schema']({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),mo=new D['Schema']({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),vs=new D[(a0_0x46df1a(0x603))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),fo=new D[(a0_0x46df1a(0x603))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),Sa=new D[(a0_0x46df1a(0x603))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':ho},'apirequest':go,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':fo,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),Ma=new D[(a0_0x46df1a(0x603))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),Cs=class{},Ns=new D[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[vs],'blocks':[Sa],'groups':[ya],'conditions':[ba],'varedits':[Ma],'replyOptions':{'type':[Ms],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x571f6b=a0_0x46df1a;return _0x571f6b(0x339)+Math[_0x571f6b(0x259)]()['toString'](0x24)['slice'](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':a0_0x46df1a(0x255)},'startID':{'type':String,'default':()=>(0x0,Ss['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ss['v4'])()},'shareOwners':{'type':[String],'default':[]}});Ns[a0_0x46df1a(0x2db)](a0_0x46df1a(0x663),function(_0xf3c90a){const _0x191711=a0_0x46df1a;let _0x1fbc99=this[_0x191711(0xff)]();if(_0x1fbc99&&typeof _0x1fbc99==_0x191711(0xde)&&_0x191711(0x23a)in _0x1fbc99){let _0x688ac1=_0x1fbc99[_0x191711(0x23a)];if(_0x688ac1){let _0x51b722=new Set(),_0x4aeb41=new Set(_0x688ac1[_0x191711(0x310)]?.[_0x191711(0x3f6)](_0x13ceec=>_0x13ceec[_0x191711(0x11d)])),_0x40adfb=JSON[_0x191711(0x5cc)](_0x688ac1),_0x1cd234=/{{(?!_)([^}]*)}}/g,_0x3b657b;for(;(_0x3b657b=_0x1cd234[_0x191711(0x1e2)](_0x40adfb))!==null;)_0x4aeb41[_0x191711(0x485)](_0x3b657b[0x1])||_0x51b722[_0x191711(0x722)](_0x3b657b[0x1]);_0x51b722[_0x191711(0x256)]>0x0?(console[_0x191711(0x33d)]('Variáveis\x20não\x20encontradas:',Array[_0x191711(0x13c)](_0x51b722)),_0x688ac1['variablesNotFound']=Array[_0x191711(0x13c)](_0x51b722)):_0x688ac1['variablesNotFound']=[],this[_0x191711(0x55a)]({'$set':_0x688ac1});}}_0xf3c90a();});var $s=_0x3aa5dd=>{const _0xa23a46=a0_0x46df1a;let _0xace8c1='z_'+_0x3aa5dd+_0xa23a46(0x11a);return R?.['model']('FlowModel',Ns,_0xace8c1);},fe=R?.[a0_0x46df1a(0x89)](Cs[a0_0x46df1a(0x11d)],Ns,a0_0x46df1a(0x503)),wo=new D[(a0_0x46df1a(0x603))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[vs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[mo]},{'_id':!0x1}),yo=new D[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[vs],'blocks':[Sa],'groups':[ya],'conditions':[ba],'varedits':[Ma],'replyOptions':{'type':[Ms],'default':[]},'chatLog':wo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x46df1a(0x7b)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x46df1a(0x162)},'waitingMenu_replyOptions':{'type':[Ms],'default':[]}}),Ca=_0x3a3233=>{const _0x2c1340=a0_0x46df1a;let _0x7932c0='z_'+_0x3a3233+_0x2c1340(0x69e);return R?.[_0x2c1340(0x89)](_0x2c1340(0x5d8),yo,_0x7932c0);},bo=new D['Schema']({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),wa=new D[(a0_0x46df1a(0x603))]({'_id':{'type':String,'id':!0x0},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),So=new D['Schema']({'_id':{'type':String,'_id':!0x0},'messages':{'type':[wa],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x46df1a(0x51a)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[bo],'default':[]},'startSend':{'type':Number},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':wa,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ea=_0x536854=>{const _0x711c0d=a0_0x46df1a;let _0x4a5b07='z_'+_0x536854+_0x711c0d(0x2d6);return R?.[_0x711c0d(0x89)](_0x711c0d(0x752),So,_0x4a5b07);},Es=class{},Mo=new D[(a0_0x46df1a(0x603))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),Co=new D['Schema']({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Eo=new D[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),vo=new D[(a0_0x46df1a(0x603))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':'!stop'},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),No=new D[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),$o=new D[(a0_0x46df1a(0x603))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[No]},'customFields':{'type':[Eo]},'flowConfig':{'type':vo,'default':{}},'flows':{'type':[Co],'default':[]},'autoCompleteMessages':{'type':[Mo],'default':[]}}),Ie=R?.[a0_0x46df1a(0x89)](Es[a0_0x46df1a(0x11d)],$o,a0_0x46df1a(0x6a0)),va=require('mongoose'),Ro=new va['Schema']({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),Na=_0x43f94b=>{const _0x4f00f6=a0_0x46df1a;let _0x564d22='z_'+_0x43f94b+_0x4f00f6(0x18a);return R?.[_0x4f00f6(0x89)](_0x4f00f6(0x5d1),Ro,_0x564d22);},_=class{constructor(_0x40e200){const _0x42053b=a0_0x46df1a;this['dbSettings']=_0x40e200[_0x42053b(0x20f)](_0x42053b(0x723));}};function I(_0x369777){const _0x453e95=a0_0x46df1a;let _0x906b0e={};for(let [_0x58e738,_0x2fc578]of Object['entries'](_0x369777))if(typeof _0x2fc578==_0x453e95(0xde)&&!Array[_0x453e95(0x119)](_0x2fc578)){for(let [_0x247f4f,_0x20583d]of Object[_0x453e95(0x10b)](_0x2fc578))_0x906b0e[_0x58e738+'.'+_0x247f4f]=_0x20583d;}else _0x906b0e[_0x58e738]=_0x2fc578;return _0x906b0e;}var Ke=class{constructor(_0x4ad12,_0x58d920,_0x53c24b,_0x3702e7,_0x714c49,_0x3aa283,_0x481be0,_0x5d5695,_0x497bec,_0x37be9c,_0x4bda8f,_0x5463fe,_0x1b8ba4){const _0x4c1b2f=a0_0x46df1a;this[_0x4c1b2f(0x64f)]=_0x4ad12,this[_0x4c1b2f(0x3d9)]=_0x58d920,this['contact']=_0x53c24b,this[_0x4c1b2f(0xd7)]=_0x3702e7,this[_0x4c1b2f(0x73e)]=_0x714c49,this[_0x4c1b2f(0x35d)]=_0x3aa283,this[_0x4c1b2f(0x2b1)]=_0x481be0,this[_0x4c1b2f(0xa2)]=_0x5d5695,this[_0x4c1b2f(0x3e7)]=_0x497bec,this[_0x4c1b2f(0x1ae)]=_0x37be9c,this['scheduleMessage']=_0x4bda8f,this[_0x4c1b2f(0x335)]=_0x5463fe,this[_0x4c1b2f(0x390)]=_0x1b8ba4;}get[a0_0x46df1a(0x77f)](){const _0x3a03be=a0_0x46df1a;return this[_0x3a03be(0x390)];}},Qe=class{},Ye=class extends _{[a0_0x46df1a(0x346)](_0x39fb29){return da(_0x39fb29);}async[a0_0x46df1a(0x2e0)](_0x1dcfc0,_0x3036e4){const _0x102176=a0_0x46df1a;if(_0x1dcfc0[_0x102176(0x5e9)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x102176(0x346)](_0x3036e4)[_0x102176(0x2a5)]([..._0x1dcfc0]))[_0x102176(0x5e9)]};}catch(_0x54ba0e){return _0x54ba0e;}}async[a0_0x46df1a(0x336)](_0x137522,_0x220bee){const _0x8b363a=a0_0x46df1a;try{let _0x47ff7f=this[_0x8b363a(0x346)](_0x220bee),_0x4a6391=I(_0x137522[_0x8b363a(0x629)]);return await _0x47ff7f[_0x8b363a(0x336)](_0x4a6391)[_0x8b363a(0x170)]({'messageTimestamp':-0x1})[_0x8b363a(0x759)](_0x137522?.[_0x8b363a(0x759)]??0x0)[_0x8b363a(0x133)]();}catch{return[];}}async[a0_0x46df1a(0x22c)](_0x254286,_0x3d0317){const _0x2d20f1=a0_0x46df1a;try{let _0x5dcc62=this[_0x2d20f1(0x346)](_0x3d0317),_0x166b4a=I(_0x254286[_0x2d20f1(0x629)]);await _0x5dcc62['deleteMany'](_0x166b4a);}catch(_0x39ef26){console['error'](_0x39ef26);}}async[a0_0x46df1a(0x75)](_0x558b23,_0x33d0cc,_0x209f67){const _0x54dcdc=a0_0x46df1a;try{let _0x1ca7cd=this[_0x54dcdc(0x346)](_0x209f67),_0x3b2aee=I(_0x558b23[_0x54dcdc(0x629)]);return await _0x1ca7cd[_0x54dcdc(0x663)](_0x3b2aee,{'$set':_0x33d0cc},{'new':!0x0});}catch(_0x4817a6){throw console[_0x54dcdc(0x2fb)](_0x4817a6),_0x4817a6;}}async[a0_0x46df1a(0x2a5)](_0x47f038,_0x5c1728){const _0x7cd62b=a0_0x46df1a;if(_0x47f038[_0x7cd62b(0x5e9)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x7cd62b(0x346)](_0x5c1728)['insertMany']([..._0x47f038]))[_0x7cd62b(0x5e9)]};}catch(_0x5a147b){return console[_0x7cd62b(0x307)](_0x7cd62b(0x33c),_0x5a147b),_0x5a147b;}}async[a0_0x46df1a(0x3fd)](_0x5c4a13){const _0x2611d8=a0_0x46df1a;try{return await this['getMessageModelForOwner'](_0x5c4a13)[_0x2611d8(0x75d)][_0x2611d8(0xc0)](),{'success':!0x0};}catch(_0x124179){return console[_0x2611d8(0x2fb)](_0x124179),{'success':!0x1,'error':_0x124179};}}},ks=A(require('@ffmpeg-installer/ffmpeg')),w=A(require(a0_0x46df1a(0x5eb))),Le=require('fs'),U=A(require(a0_0x46df1a(0x2ad))),Q=A(require(a0_0x46df1a(0x220))),_i=require(a0_0x46df1a(0x3ba)),xi=A(require(a0_0x46df1a(0x12a))),Di=A(require(a0_0x46df1a(0x222))),$a=[a0_0x46df1a(0x530),a0_0x46df1a(0x4db),a0_0x46df1a(0x586),a0_0x46df1a(0x783),a0_0x46df1a(0x13f)],Ra=[a0_0x46df1a(0x402),a0_0x46df1a(0x53b),a0_0x46df1a(0x413),a0_0x46df1a(0x456)],Ls=require('os'),Jt=A(require(a0_0x46df1a(0x28c))),Fe=require(a0_0x46df1a(0x4d0)),Pi=require(a0_0x46df1a(0x61f)),me=A(require(a0_0x46df1a(0x39e))),k=require(a0_0x46df1a(0x406)),ue=class{constructor(_0x16a47e,_0x4e73fd,_0x30c2d5){const _0x41d91e=a0_0x46df1a;this[_0x41d91e(0x540)]=_0x16a47e,this[_0x41d91e(0x297)]=_0x4e73fd,this[_0x41d91e(0x11d)]=_0x30c2d5;}},Xe=class{},Ze=class{},Te=class{},et=class{},tt=class{},Ce=class{},st=class{},at=class{},it=class{},ot=class{},Pt=A(require(a0_0x46df1a(0x71d))),Aa=require('fs'),Ia=require(a0_0x46df1a(0x2ad));async function Oe(_0x3c3b10){const _0x4cd824=a0_0x46df1a;let _0x37a02b=B[_0x4cd824(0x6f7)][_0x3c3b10];if(F[_0x4cd824(0x544)]){let _0x30d64f=R[_0x4cd824(0x615)]()['db'](F[_0x4cd824(0x26e)]['DB_PREFIX_NAME']+_0x4cd824(0xad))[_0x4cd824(0x75d)](_0x3c3b10);return _0x37a02b||(await _0x30d64f['find']({})[_0x4cd824(0x54b)]())[_0x4cd824(0x5e9)]>0x0;}return _0x37a02b||(0x0,Aa[_0x4cd824(0x481)])((0x0,Ia[_0x4cd824(0x473)])(Se,_0x3c3b10));}async function Ta(_0x2af077,_0x1ffe8b,_0x46fc7c){const _0x3c6eed=a0_0x46df1a;if(_0x2af077['originalUrl']['includes'](_0x3c6eed(0x6ad))||_0x2af077['originalUrl'][_0x3c6eed(0x3f1)](_0x3c6eed(0x58d))||_0x2af077['originalUrl'][_0x3c6eed(0x3f1)]('/exit')||_0x2af077[_0x3c6eed(0x4fb)][_0x3c6eed(0x3f1)](_0x3c6eed(0x3e5))||_0x2af077[_0x3c6eed(0x4fb)]['includes'](_0x3c6eed(0x4d7))||_0x2af077[_0x3c6eed(0x4fb)][_0x3c6eed(0x3f1)](_0x3c6eed(0x18e))||_0x2af077[_0x3c6eed(0x4fb)][_0x3c6eed(0x3f1)]('/instance/delete'))return _0x46fc7c();let _0x11cdf1=_0x2af077[_0x3c6eed(0x515)];if(!_0x11cdf1?.[_0x3c6eed(0x88)])throw new m(_0x3c6eed(0x63a));if(!await Oe(_0x11cdf1[_0x3c6eed(0x88)]))throw new J(_0x3c6eed(0x4b5)+_0x11cdf1[_0x3c6eed(0x88)]+_0x3c6eed(0x1ce));_0x46fc7c();}async function Oa(_0x463b35,_0x21b792,_0x34ade4){const _0x566d33=a0_0x46df1a;if(_0x463b35[_0x566d33(0x4fb)]['includes']('/instance/create')){let _0x21393d=_0x463b35[_0x566d33(0x6b3)];if(await Oe(_0x21393d[_0x566d33(0x88)]))throw new Z(_0x566d33(0x693)+_0x21393d[_0x566d33(0x88)]+'\x20is\x20already\x20in\x20use.');B[_0x566d33(0x6f7)][_0x21393d[_0x566d33(0x88)]]&&delete B['waInstances'][_0x21393d['instanceName']];}_0x34ade4();}var _a=require('class-validator'),xa=A(require('jsonwebtoken')),rt='uazapi',Io=new $(a0_0x46df1a(0x1f4));async function To(_0x475454,_0x542cda,_0xd41d68){const _0x5598be=a0_0x46df1a;let _0x340792=_0x475454[_0x5598be(0x20f)](_0x5598be(0x201));if(_0x340792&&b[_0x5598be(0x20f)](_0x5598be(0x72d))[_0x5598be(0x4e1)]['KEY']!==_0x340792)throw new oe();if(b[_0x5598be(0x20f)](_0x5598be(0x72d))[_0x5598be(0x4e1)][_0x5598be(0x57c)]===_0x340792)return _0xd41d68();if((_0x475454[_0x5598be(0x4fb)][_0x5598be(0x3f1)](_0x5598be(0x6ad))||_0x475454[_0x5598be(0x4fb)][_0x5598be(0x3f1)](_0x5598be(0x58d)))&&!_0x340792)throw new Z(_0x5598be(0x6ca),_0x5598be(0x237));let _0x41fee6=b[_0x5598be(0x20f)]('AUTHENTICATION')[_0x5598be(0x580)];try{let [_0x57877c,_0x4da9d1]=_0x475454[_0x5598be(0x20f)](_0x5598be(0x785))[_0x5598be(0x1ed)]('\x20');if(_0x57877c[_0x5598be(0x5cf)]()!==_0x5598be(0x514))throw new oe();if(!(0x0,_a[_0x5598be(0x207)])(_0x4da9d1))throw new oe();let _0x45b612=_0x475454[_0x5598be(0x515)],_0x58bd9a=xa[_0x5598be(0x2fa)]['verify'](_0x4da9d1,_0x41fee6[_0x5598be(0x140)],{'ignoreExpiration':_0x41fee6[_0x5598be(0x3ac)]===0x0});if(_0x45b612[_0x5598be(0x88)]!==_0x58bd9a[_0x5598be(0x88)]||rt!==_0x58bd9a[_0x5598be(0x438)])throw new oe();return _0xd41d68();}catch(_0x56eea6){throw Io[_0x5598be(0x2fb)](_0x56eea6),new oe();}}async function Oo(_0x335b61,_0x344cda,_0xe4c0c8){const _0x4a1a48=a0_0x46df1a;let _0x2c8904=b[_0x4a1a48(0x20f)](_0x4a1a48(0x72d))[_0x4a1a48(0x4e1)],_0x5b702d=_0x335b61[_0x4a1a48(0x20f)](_0x4a1a48(0x201));if(_0x2c8904[_0x4a1a48(0x57c)]===_0x5b702d)return _0xe4c0c8();if(_0x335b61[_0x4a1a48(0x4fb)][_0x4a1a48(0x3f1)](_0x4a1a48(0x6ad))){let _0x1ee28a=Pa,_0x4878c7=_0x335b61['body'][_0x4a1a48(0x88)];if(_0x1ee28a&&_0x4878c7[_0x4a1a48(0x5cf)]()[_0x4a1a48(0x3f0)](_0x1ee28a[_0x4a1a48(0x5cf)]()))return _0xe4c0c8();if(!_0x5b702d)throw new Z('Missing\x20global\x20api\x20key',_0x4a1a48(0x237));}if(_0x335b61[_0x4a1a48(0x4fb)][_0x4a1a48(0x3f1)](_0x4a1a48(0x58d))&&!_0x5b702d)throw new Z(_0x4a1a48(0x6ca),_0x4a1a48(0x237));if(_0x335b61[_0x4a1a48(0x4fb)][_0x4a1a48(0x3f1)]('/exit')&&!_0x5b702d)throw new Z(_0x4a1a48(0x6ca),'The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x335b61[_0x4a1a48(0x4fb)][_0x4a1a48(0x3f1)](_0x4a1a48(0x3e5))&&!_0x5b702d)throw new Z(_0x4a1a48(0x6ca),_0x4a1a48(0x237));try{let _0xce4155=_0x335b61[_0x4a1a48(0x515)],_0x43a26f=await we[_0x4a1a48(0x35d)]['find'](_0xce4155[_0x4a1a48(0x88)]);if(_0x43a26f&&_0x43a26f[_0x4a1a48(0x201)]===_0x5b702d)return _0xe4c0c8();}catch{}throw new oe();}var Da={'jwt':To,'apikey':Oo},mi=require(a0_0x46df1a(0x71d)),E=require(a0_0x46df1a(0x3ba)),C=(..._0x1bf28c)=>{const _0xab43e6=a0_0x46df1a;let _0x167056={};return _0x1bf28c['forEach'](_0x27ed6e=>_0x167056[_0x27ed6e]={'minLength':0x1,'description':_0xab43e6(0x367)+_0x27ed6e+_0xab43e6(0x4f3)}),{'if':{'propertyNames':{'enum':[..._0x1bf28c]}},'then':{'properties':_0x167056}};},N={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'instanceName':{'type':'string'}},...C(a0_0x46df1a(0x88))},wc={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'oldToken':{'type':a0_0x46df1a(0x691)}},'required':[a0_0x46df1a(0x4ea)],...C(a0_0x46df1a(0x4ea))},yc={'properties':{'key':{'type':a0_0x46df1a(0xde),'properties':{'id':{'type':a0_0x46df1a(0x691)},'remoteJid':{'type':a0_0x46df1a(0x691)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id','remoteJid','fromMe'],...C('id',a0_0x46df1a(0x75b))},'message':{'type':a0_0x46df1a(0xde)}}},ee={'properties':{'delay':{'type':'integer','description':a0_0x46df1a(0x5d5)},'presence':{'type':a0_0x46df1a(0x691),'enum':['unavailable',a0_0x46df1a(0x566),a0_0x46df1a(0x3bc),'recording','paused']}}},H={'type':a0_0x46df1a(0x691),'description':a0_0x46df1a(0x3ee)},ka={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{...H},'options':{...ee},'textMessage':{'type':a0_0x46df1a(0xde),'properties':{'text':{'type':'string'}},'required':[a0_0x46df1a(0xd1)],...C(a0_0x46df1a(0xd1))}},'required':[a0_0x46df1a(0xc5),a0_0x46df1a(0x731)]},La={'type':'string','pattern':a0_0x46df1a(0x199),'description':a0_0x46df1a(0x3ee)},bc={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...La},'options':{...ee},'textMessage':{'type':a0_0x46df1a(0xde),'properties':{'text':{'type':'string'}},'required':['text'],...C(a0_0x46df1a(0xd1))}},'required':[a0_0x46df1a(0xc5),'number']},Sc={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{...La},'options':{...ee},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':'string','enum':[a0_0x46df1a(0x24c),a0_0x46df1a(0x656),a0_0x46df1a(0x345),a0_0x46df1a(0x47f)]},'media':{'type':a0_0x46df1a(0x691)},'fileName':{'type':a0_0x46df1a(0x691)},'caption':{'type':'string'}},'required':[a0_0x46df1a(0x68c),a0_0x46df1a(0x425)],...C(a0_0x46df1a(0x1e4),'caption',a0_0x46df1a(0x425))}},'required':[a0_0x46df1a(0x669),'number']},Fa={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{...H},'options':{...ee},'stickerMessage':{'type':a0_0x46df1a(0xde),'properties':{'image':{'type':a0_0x46df1a(0x691)}},'required':['image'],...C(a0_0x46df1a(0x24c))}},'required':[a0_0x46df1a(0x13f),a0_0x46df1a(0x731)]},Ua={'$id':(0x0,E['v4'])(),'type':'object','properties':{'statusMessage':{'type':'object','properties':{'type':{'type':a0_0x46df1a(0x691),'enum':[a0_0x46df1a(0xd1),a0_0x46df1a(0x24c),'audio',a0_0x46df1a(0x345)]},'content':{'type':a0_0x46df1a(0x691)},'caption':{'type':'string'},'backgroundColor':{'type':'string'},'font':{'type':a0_0x46df1a(0x470),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x46df1a(0x61a),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x46df1a(0x691),'pattern':'^\x5cd+','description':a0_0x46df1a(0x2ea)}},'allContacts':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x46df1a(0x1c0),a0_0x46df1a(0x729)],...C(a0_0x46df1a(0x1c0),'content')}},'required':['statusMessage']},ja={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{...H},'options':{...ee},'mediaMessage':{'type':a0_0x46df1a(0xde),'properties':{'mediatype':{'type':a0_0x46df1a(0x691),'enum':[a0_0x46df1a(0x24c),'document',a0_0x46df1a(0x345),'audio']},'media':{'type':a0_0x46df1a(0x691)},'fileName':{'type':a0_0x46df1a(0x691)},'caption':{'type':'string'}},'required':[a0_0x46df1a(0x68c),a0_0x46df1a(0x425)],...C('fileName','caption','media')}},'required':[a0_0x46df1a(0x669),a0_0x46df1a(0x731)]},Ja={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...H},'options':{...ee},'audioMessage':{'type':a0_0x46df1a(0xde),'properties':{'audio':{'type':'string'}},'required':[a0_0x46df1a(0x47f)],...C('audio')}},'required':[a0_0x46df1a(0x586),a0_0x46df1a(0x731)]},qa={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{...H},'pollMessage':{'type':a0_0x46df1a(0xde),'properties':{'name':{'type':'string'},'selectableCount':{'type':a0_0x46df1a(0x731)},'values':{'type':a0_0x46df1a(0x61a),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x46df1a(0x11d),a0_0x46df1a(0xa5),a0_0x46df1a(0x25f)],...C(a0_0x46df1a(0x11d),a0_0x46df1a(0xa5),a0_0x46df1a(0x25f))}},'required':[a0_0x46df1a(0x731),a0_0x46df1a(0x79e)]},Va={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{...H},'menuMessage':{'type':a0_0x46df1a(0xde),'properties':{'text':{'type':a0_0x46df1a(0x691)},'choices':{'type':a0_0x46df1a(0x61a),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x46df1a(0xd1),a0_0x46df1a(0x24b)],...C('text',a0_0x46df1a(0x24b))}},'required':[a0_0x46df1a(0x731),'menuMessage']},Ga={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{...H},'options':{...ee},'buttonMessage':{'type':a0_0x46df1a(0xde),'properties':{'title':{'type':'string'},'description':{'type':a0_0x46df1a(0x691)},'footerText':{'type':'string'},'buttons':{'type':a0_0x46df1a(0x61a),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x46df1a(0xde),'properties':{'buttonText':{'type':'string'},'buttonId':{'type':a0_0x46df1a(0x691)}},'required':[a0_0x46df1a(0x2a7),a0_0x46df1a(0x4a7)],...C('buttonText',a0_0x46df1a(0x4a7))}},'mediaMessage':{'type':a0_0x46df1a(0xde),'properties':{'media':{'type':a0_0x46df1a(0x691)},'fileName':{'type':a0_0x46df1a(0x691)},'mediatype':{'type':a0_0x46df1a(0x691),'enum':[a0_0x46df1a(0x24c),a0_0x46df1a(0x656),a0_0x46df1a(0x345)]}},'required':[a0_0x46df1a(0x425),a0_0x46df1a(0x68c)],...C('media',a0_0x46df1a(0x1e4))}},'required':['title','buttons'],...C(a0_0x46df1a(0x73b),a0_0x46df1a(0x6d))}},'required':[a0_0x46df1a(0x731),'buttonMessage']},Ba={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{...H},'options':{...ee},'locationMessage':{'type':a0_0x46df1a(0xde),'properties':{'latitude':{'type':a0_0x46df1a(0x731)},'longitude':{'type':'number'},'name':{'type':'string'},'address':{'type':a0_0x46df1a(0x691)}},'required':[a0_0x46df1a(0x15e),a0_0x46df1a(0x34d)],...C(a0_0x46df1a(0x11d),a0_0x46df1a(0x624))}},'required':[a0_0x46df1a(0x731),a0_0x46df1a(0x14d)]},Wa={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{...H},'options':{...ee},'listMessage':{'type':'object','properties':{'title':{'type':a0_0x46df1a(0x691)},'description':{'type':a0_0x46df1a(0x691)},'footerText':{'type':'string'},'buttonText':{'type':a0_0x46df1a(0x691)},'sections':{'type':a0_0x46df1a(0x61a),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':a0_0x46df1a(0x691)},'rows':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x46df1a(0xde),'properties':{'title':{'type':a0_0x46df1a(0x691)},'description':{'type':a0_0x46df1a(0x691)},'rowId':{'type':a0_0x46df1a(0x691)}},'required':[a0_0x46df1a(0x73b),'rowId'],...C(a0_0x46df1a(0x73b),a0_0x46df1a(0x613))}}},'required':[a0_0x46df1a(0x73b),a0_0x46df1a(0x1d8)],...C(a0_0x46df1a(0x73b))}}},'required':[a0_0x46df1a(0x73b),'description','buttonText',a0_0x46df1a(0x76a)],...C('title',a0_0x46df1a(0x6d),'buttonText',a0_0x46df1a(0x204))}},'required':['number','listMessage']},za={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{...H},'options':{...ee},'contactMessage':{'type':'array','items':{'type':a0_0x46df1a(0xde),'properties':{'fullName':{'type':a0_0x46df1a(0x691)},'phoneNumber':{'type':'string','minLength':0xa}},'required':[a0_0x46df1a(0x70d),'phoneNumber'],...C(a0_0x46df1a(0x70d))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x46df1a(0x731),a0_0x46df1a(0x2cd)]},Ha={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'reactionMessage':{'type':'object','properties':{'key':{'type':a0_0x46df1a(0xde),'properties':{'id':{'type':a0_0x46df1a(0x691)},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]}},'required':['id',a0_0x46df1a(0x75b),'fromMe'],...C('id',a0_0x46df1a(0x75b))},'reaction':{'type':a0_0x46df1a(0x691)}},'required':[a0_0x46df1a(0x754),a0_0x46df1a(0x37f)],...C('reaction')}},'required':[a0_0x46df1a(0x1e5)]},Ka={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'numbers':{'type':a0_0x46df1a(0x61a),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x46df1a(0x691),'pattern':a0_0x46df1a(0x181),'description':'\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}}},Qa={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'readMessages':{'type':a0_0x46df1a(0x61a),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':'string'},'fromMe':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x46df1a(0x691)}},'required':['id',a0_0x46df1a(0x525),a0_0x46df1a(0x75b)],...C('id',a0_0x46df1a(0x75b))}}},'required':[a0_0x46df1a(0x3a0)]},Ya={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'privacySettings':{'type':a0_0x46df1a(0xde),'properties':{'readreceipts':{'type':'string','enum':['all',a0_0x46df1a(0x3dc)]},'profile':{'type':a0_0x46df1a(0x691),'enum':['all',a0_0x46df1a(0x705),a0_0x46df1a(0x6f5),a0_0x46df1a(0x3dc)]},'status':{'type':a0_0x46df1a(0x691),'enum':[a0_0x46df1a(0x221),a0_0x46df1a(0x705),'contact_blacklist','none']},'online':{'type':'string','enum':[a0_0x46df1a(0x221),a0_0x46df1a(0x4b7)]},'last':{'type':a0_0x46df1a(0x691),'enum':['all','contacts',a0_0x46df1a(0x6f5),a0_0x46df1a(0x3dc)]},'groupadd':{'type':a0_0x46df1a(0x691),'enum':[a0_0x46df1a(0x221),a0_0x46df1a(0x705),a0_0x46df1a(0x6f5),a0_0x46df1a(0x3dc)]}},'required':[a0_0x46df1a(0x68a),a0_0x46df1a(0x4e2),a0_0x46df1a(0x16f),'online',a0_0x46df1a(0x681),a0_0x46df1a(0x215)],...C('readreceipts','profile',a0_0x46df1a(0x16f),a0_0x46df1a(0x3a4),a0_0x46df1a(0x681),a0_0x46df1a(0x215))}},'required':[a0_0x46df1a(0x4ce)]},Xa={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'lastMessage':{'type':'object','properties':{'key':{'type':a0_0x46df1a(0xde),'properties':{'id':{'type':'string'},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]}},'required':['id',a0_0x46df1a(0x525),'remoteJid'],...C('id',a0_0x46df1a(0x75b))},'messageTimestamp':{'type':a0_0x46df1a(0x470),'minLength':0x1}},'required':[a0_0x46df1a(0x754)],...C(a0_0x46df1a(0x71f))},'archive':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]}},'required':[a0_0x46df1a(0x4d4),'archive']},Za={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'id':{'type':a0_0x46df1a(0x691)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x46df1a(0x691)},'participant':{'type':a0_0x46df1a(0x691)}},'required':['id','fromMe',a0_0x46df1a(0x75b)],...C('id','remoteJid','participant')},ei={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'where':{'type':a0_0x46df1a(0xde),'properties':{'_id':{'type':'string','minLength':0x1},'pushName':{'type':a0_0x46df1a(0x691),'minLength':0x1},'id':{'type':a0_0x46df1a(0x691),'minLength':0x1}},...C(a0_0x46df1a(0x778),'id',a0_0x46df1a(0x242))}}},ti={'$id':(0x0,E['v4'])(),'type':'object','properties':{'name':{'type':a0_0x46df1a(0x691)}},...C(a0_0x46df1a(0x11d))},si={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'status':{'type':a0_0x46df1a(0x691)}},...C(a0_0x46df1a(0x16f))},_e={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{'type':a0_0x46df1a(0x691)},'picture':{'type':'string'}}},ai={'type':a0_0x46df1a(0xde),'properties':{'wuid':{'type':a0_0x46df1a(0x691)},'name':{'type':a0_0x46df1a(0x691)},'picture':{'type':a0_0x46df1a(0x691)},'status':{'type':'string'},'isBusiness':{'type':a0_0x46df1a(0x50a)}}},ii={'$id':(0x0,E['v4'])(),'type':'object','properties':{'where':{'type':a0_0x46df1a(0xde),'properties':{'_id':{'type':'string','minLength':0x1},'key':{'type':a0_0x46df1a(0xde),'if':{'propertyNames':{'enum':[a0_0x46df1a(0x525),'remoteJid','id']}},'then':{'properties':{'remoteJid':{'type':'string','minLength':0x1,'description':a0_0x46df1a(0x47c)},'id':{'type':a0_0x46df1a(0x691),'minLength':0x1,'description':a0_0x46df1a(0x47c)},'fromMe':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x46df1a(0xde)}},...C(a0_0x46df1a(0x778))},'limit':{'type':'integer'}}},Mc={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'where':{'type':'object','properties':{'_id':{'type':'string'},'remoteJid':{'type':a0_0x46df1a(0x691)},'id':{'type':a0_0x46df1a(0x691)},'fromMe':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'participant':{'type':'string'},'status':{'type':a0_0x46df1a(0x691),'enum':[a0_0x46df1a(0x145),a0_0x46df1a(0xdf),a0_0x46df1a(0x579),a0_0x46df1a(0x3b7),a0_0x46df1a(0x6fd),a0_0x46df1a(0x443)]}},...C(a0_0x46df1a(0x778),a0_0x46df1a(0x75b),'id','status')},'limit':{'type':a0_0x46df1a(0x470)}}},oi={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'number':{...H},'presence':{'type':a0_0x46df1a(0x691),'enum':['unavailable',a0_0x46df1a(0x566),a0_0x46df1a(0x3bc),a0_0x46df1a(0x257),a0_0x46df1a(0x5a7)]}},'required':[a0_0x46df1a(0x616),a0_0x46df1a(0x731)]},ri={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'subject':{'type':'string'},'description':{'type':a0_0x46df1a(0x691)},'profilePicture':{'type':a0_0x46df1a(0x691)},'participants':{'type':a0_0x46df1a(0x61a),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':a0_0x46df1a(0x341),'description':a0_0x46df1a(0x5e6)}}},'required':[a0_0x46df1a(0x573),'participants'],...C(a0_0x46df1a(0x573),a0_0x46df1a(0x6d),a0_0x46df1a(0x217))},xe={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'groupJid':{'type':'string','pattern':a0_0x46df1a(0x3e0)}},'required':['groupJid'],...C('groupJid')},ni={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'groupJid':{'type':a0_0x46df1a(0x691)},'action':{'type':a0_0x46df1a(0x691),'enum':[a0_0x46df1a(0x722),a0_0x46df1a(0x26d),a0_0x46df1a(0x6bf),'demote',a0_0x46df1a(0x74),a0_0x46df1a(0x5b3)]},'participants':{'type':a0_0x46df1a(0x61a),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x46df1a(0x691),'minLength':0xa,'pattern':a0_0x46df1a(0x341),'description':a0_0x46df1a(0x5e6)}}},'required':['groupJid',a0_0x46df1a(0x70c),'participants'],...C('groupJid',a0_0x46df1a(0x70c))},ci={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'expiration':{'type':a0_0x46df1a(0x731),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x46df1a(0x2fd),a0_0x46df1a(0x6dd)],...C(a0_0x46df1a(0x2fd),a0_0x46df1a(0x6dd))},li={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'groupJid':{'type':a0_0x46df1a(0x691)},'image':{'type':a0_0x46df1a(0x691)}},'required':[a0_0x46df1a(0x2fd),'image'],...C(a0_0x46df1a(0x2fd),a0_0x46df1a(0x24c))},ui={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'groupJid':{'type':a0_0x46df1a(0x691)},'description':{'type':a0_0x46df1a(0x691)}},'required':[a0_0x46df1a(0x2fd),a0_0x46df1a(0x6d)],...C(a0_0x46df1a(0x2fd),a0_0x46df1a(0x6d))},di={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'groupJid':{'type':'string'},'name':{'type':a0_0x46df1a(0x691)}},'required':['groupJid',a0_0x46df1a(0x11d)],...C(a0_0x46df1a(0x2fd),a0_0x46df1a(0x11d))},pi={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'groupJid':{'type':a0_0x46df1a(0x691)},'setting':{'type':a0_0x46df1a(0x691),'enum':[a0_0x46df1a(0xe2),'not_announcement','unlocked','locked']}},'required':[a0_0x46df1a(0x2fd),'setting'],...C(a0_0x46df1a(0x2fd),a0_0x46df1a(0xe6))},hi={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'groupJid':{'type':'string'},'restrict':{'type':a0_0x46df1a(0x50a)},'announce':{'type':'boolean'},'memberAddMode':{'type':a0_0x46df1a(0x50a)},'joinApprovalMode':{'type':a0_0x46df1a(0x50a)},'expiration':{'type':a0_0x46df1a(0x470),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x46df1a(0x691)},'description':{'type':a0_0x46df1a(0x691)},'image':{'type':'string'}}},Rs={'$id':(0x0,E['v4'])(),'type':a0_0x46df1a(0xde),'properties':{'inviteCode':{'type':'string'}},'required':[a0_0x46df1a(0x2aa)],...C('inviteCode')},gi={'$id':(0x0,E['v4'])(),'type':'object','properties':{'url':{'type':a0_0x46df1a(0x691)},'enabled':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x46df1a(0x53f),'enabled']},Cc={'$id':(0x0,E['v4'])(),'type':'object','properties':{'local_map':{'type':'boolean','enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x46df1a(0x50a),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x46df1a(0x512),a0_0x46df1a(0x26b),'QRCODE_UPDATED',a0_0x46df1a(0x428),a0_0x46df1a(0x155),'MESSAGES_UPSERT','SEND_MESSAGE','CONTACTS_SET',a0_0x46df1a(0xaa),a0_0x46df1a(0x753),'PRESENCE_UPDATE',a0_0x46df1a(0x11e),a0_0x46df1a(0x4d8),'CHATS_UPDATE','CHATS_DELETE',a0_0x46df1a(0x5b5),'GROUPS_UPSERT','GROUPS_UPDATE',a0_0x46df1a(0x535)],...C(a0_0x46df1a(0x512),a0_0x46df1a(0x26b),a0_0x46df1a(0x72f),a0_0x46df1a(0x428),'MESSAGES_UPDATE',a0_0x46df1a(0x34c),a0_0x46df1a(0x16d),a0_0x46df1a(0x710),a0_0x46df1a(0xaa),'CONTACTS_UPDATE',a0_0x46df1a(0x182),a0_0x46df1a(0x11e),'CHATS_UPSERT','CHATS_UPDATE',a0_0x46df1a(0x254),'CONNECTION_UPDATE',a0_0x46df1a(0x1dc),'GROUPS_UPDATE',a0_0x46df1a(0x535))},nt=class{},ct=class extends _{['getContactModelForOwner'](_0x1ee098){return ra(_0x1ee098);}async[a0_0x46df1a(0x2e0)](_0x2b9081){const _0x464a09=a0_0x46df1a;if(_0x2b9081[_0x464a09(0x5e9)]!==0x0)try{return{'insertCount':(await this[_0x464a09(0x175)](_0x2b9081[0x0][_0x464a09(0x3dd)])[_0x464a09(0x2a5)]([..._0x2b9081]))['length']};}catch(_0x5592dd){return _0x5592dd;}}async[a0_0x46df1a(0x22c)](_0x59df7e,_0x541888){const _0x2e05a3=a0_0x46df1a;try{return{'deletedCount':(await this['getContactModelForOwner'](_0x541888)[_0x2e05a3(0x708)]({..._0x59df7e[_0x2e05a3(0x629)]}))[_0x2e05a3(0x712)]};}catch(_0x55425e){return{'error':_0x55425e?.[_0x2e05a3(0x49e)]()};}}async[a0_0x46df1a(0x75)](_0x74c460,_0x557d86){const _0x248599=a0_0x46df1a;try{if(_0x74c460[_0x248599(0x5e9)]===0x0)return;let _0x531cc9=this['getContactModelForOwner'](_0x557d86),_0x1f5e30=_0x74c460[_0x248599(0x3f6)](_0x1ab573=>({'updateOne':{'filter':{'_id':_0x1ab573['_id'],'owner':_0x557d86},'update':{..._0x1ab573}}})),{modifiedCount:_0x5cd537}=await _0x531cc9[_0x248599(0x82)](_0x1f5e30);return{'insertCount':_0x5cd537};}catch{return;}}async[a0_0x46df1a(0x336)](_0x355685,_0x1f3325){const _0x10d028=a0_0x46df1a;try{let _0x1952ea=this[_0x10d028(0x175)](_0x1f3325),_0x253e2f=I(_0x355685[_0x10d028(0x629)]);return await _0x1952ea['find'](_0x253e2f)[_0x10d028(0x759)](_0x355685?.[_0x10d028(0x759)]??0x0)[_0x10d028(0x133)]();}catch{return[];}}async[a0_0x46df1a(0x404)](_0x2970ae,_0x2cd4b0){const _0xdfef5=a0_0x46df1a;try{let _0x2506f5=this[_0xdfef5(0x175)](_0x2cd4b0),_0x5b8d5f=I(_0x2970ae[_0xdfef5(0x629)]);return await _0x2506f5[_0xdfef5(0x404)](_0x5b8d5f)[_0xdfef5(0x133)]();}catch{return null;}}async[a0_0x46df1a(0x3fd)](_0x1cc47f){const _0x213bac=a0_0x46df1a;try{return await this[_0x213bac(0x175)](_0x1cc47f)[_0x213bac(0x75d)][_0x213bac(0xc0)](),{'success':!0x0};}catch(_0x86a5ff){return console[_0x213bac(0x2fb)](_0x86a5ff),{'success':!0x1,'error':_0x86a5ff};}}},lt=require(a0_0x46df1a(0x5e2)),Oc=require(a0_0x46df1a(0x21f)),As=new $(a0_0x46df1a(0x80)),G=class{['routerPath'](_0x2d23c0,_0xa466f0=!0x0){const _0x2be7d3=a0_0x46df1a;let _0x5e99a1='/'+_0x2d23c0;return _0xa466f0&&(_0x5e99a1+=_0x2be7d3(0x76e)),_0x5e99a1;}async[a0_0x46df1a(0x50f)](_0x27d2a6){const _0x167e42=a0_0x46df1a;let {request:_0x3f43cf,schema:_0x323344,ClassRef:_0x536823,execute:_0x409e23}=_0x27d2a6,_0x374586=new _0x536823(),_0x321331=_0x3f43cf['body'],_0x2b2bea=_0x3f43cf['params'];_0x3f43cf?.[_0x167e42(0xc9)]&&Object['keys'](_0x3f43cf['query'])[_0x167e42(0x5e9)]>0x0&&Object[_0x167e42(0x508)](_0x2b2bea,_0x3f43cf[_0x167e42(0xc9)]),_0x3f43cf[_0x167e42(0x4fb)][_0x167e42(0x3f1)](_0x167e42(0x6ad))&&Object[_0x167e42(0x508)](_0x2b2bea,_0x321331),Object[_0x167e42(0x508)](_0x374586,_0x321331);let _0x1e814b=_0x323344?(0x0,lt[_0x167e42(0x57e)])(_0x374586,_0x323344):{'valid':!0x0,'errors':[]};if(!_0x1e814b[_0x167e42(0x326)]){let _0x50b582=_0x1e814b[_0x167e42(0x3cc)]['map'](({property:_0x5c3de6,stack:_0x2f9ee4,schema:_0x49d68})=>{const _0x10eb34=_0x167e42;let _0x231279;return _0x49d68[_0x10eb34(0x6d)]?_0x231279=_0x49d68['description']:_0x231279=_0x2f9ee4[_0x10eb34(0x420)]('instance.',''),{'property':_0x5c3de6['replace']('instance.',''),'message':_0x231279};});throw As['error']([..._0x50b582]),new m(..._0x50b582);}return await _0x409e23(_0x2b2bea,_0x374586);}async[a0_0x46df1a(0x264)](_0x3108ec){const _0x31ad83=a0_0x46df1a;let {request:_0x58c096,ClassRef:_0x1914f4,schema:_0x4280fb,execute:_0xc82330}=_0x3108ec,_0x480d26=_0x58c096[_0x31ad83(0xc9)];if(!_0x480d26?.['groupJid'])throw new m(_0x31ad83(0x610),_0x31ad83(0x448));let _0x192974=_0x58c096['params'],_0x15eec6=_0x58c096['body'],_0x5143f4=new _0x1914f4();Object['assign'](_0x15eec6,_0x480d26),Object[_0x31ad83(0x508)](_0x5143f4,_0x15eec6);let _0x4238ce=(0x0,lt[_0x31ad83(0x57e)])(_0x5143f4,_0x4280fb);if(!_0x4238ce[_0x31ad83(0x326)]){let _0x25bc31=_0x4238ce['errors'][_0x31ad83(0x3f6)](({property:_0x1dea16,stack:_0x1767a8,schema:_0x315b66})=>{const _0x55057b=_0x31ad83;let _0x142ad1;return _0x315b66[_0x55057b(0x6d)]?_0x142ad1=_0x315b66[_0x55057b(0x6d)]:_0x142ad1=_0x1767a8[_0x55057b(0x420)]('instance.',''),{'property':_0x1dea16[_0x55057b(0x420)](_0x55057b(0x12f),''),'message':_0x142ad1};});throw As[_0x31ad83(0x2fb)]([..._0x25bc31]),new m(..._0x25bc31);}return await _0xc82330(_0x192974,_0x5143f4);}async[a0_0x46df1a(0x506)](_0x5bf308){const _0x164c12=a0_0x46df1a;let {request:_0x39beb2,ClassRef:_0x4b96da,schema:_0x1d3119,execute:_0x22e5ed}=_0x5bf308,_0x5f4822=_0x39beb2[_0x164c12(0x6b3)];if(!_0x5f4822?.['inviteCode'])throw new m(_0x164c12(0x2fc),_0x164c12(0x103));let _0xcd78a5=_0x39beb2['params'],_0x45855a=_0x39beb2[_0x164c12(0x6b3)],_0x2729d0=new _0x4b96da();Object[_0x164c12(0x508)](_0x45855a,_0x5f4822),Object['assign'](_0x2729d0,_0x45855a);let _0x52b114=(0x0,lt[_0x164c12(0x57e)])(_0x2729d0,_0x1d3119);if(!_0x52b114[_0x164c12(0x326)]){let _0x55da98=_0x52b114[_0x164c12(0x3cc)][_0x164c12(0x3f6)](({property:_0x203f63,stack:_0x591a8a,schema:_0xfedca5})=>{const _0x2247ee=_0x164c12;let _0x478604;return _0xfedca5[_0x2247ee(0x6d)]?_0x478604=_0xfedca5[_0x2247ee(0x6d)]:_0x478604=_0x591a8a['replace']('instance.',''),{'property':_0x203f63['replace'](_0x2247ee(0x12f),''),'message':_0x478604};});throw As[_0x164c12(0x2fb)]([..._0x55da98]),new m(..._0x55da98);}return await _0x22e5ed(_0xcd78a5,_0x2729d0);}},M=class{},Wc=new $('ChatRouter'),ut=class extends G{constructor(..._0x3aab80){const _0x5a649d=a0_0x46df1a;super(),this[_0x5a649d(0x394)]=(0x0,mi['Router'])(),this[_0x5a649d(0x394)][_0x5a649d(0x13a)](this['routerPath'](_0x5a649d(0x3f9)),..._0x3aab80,async(_0x67e1bd,_0x326be7)=>{const _0x276244=_0x5a649d;let _0x18a934=await this[_0x276244(0x50f)]({'request':_0x67e1bd,'schema':oi,'ClassRef':Xe,'execute':(_0x509f5a,_0x3eb73c)=>P[_0x276244(0x3f9)](_0x509f5a,_0x3eb73c)});return _0x326be7[_0x276244(0x16f)](0xc9)[_0x276244(0x405)](_0x18a934);})[_0x5a649d(0x13a)](this[_0x5a649d(0x5a3)](_0x5a649d(0x2f3)),..._0x3aab80,async(_0xff50bd,_0xe167d)=>{const _0x272d0a=_0x5a649d;let _0x3de604=await this[_0x272d0a(0x50f)]({'request':_0xff50bd,'schema':Ka,'ClassRef':Ze,'execute':(_0x334459,_0xfb24c0)=>P[_0x272d0a(0x210)](_0x334459,_0xfb24c0)});return _0xe167d[_0x272d0a(0x16f)](0xc9)[_0x272d0a(0x405)](_0x3de604);})[_0x5a649d(0x13a)](this[_0x5a649d(0x5a3)](_0x5a649d(0x510)),..._0x3aab80,async(_0x4fdd06,_0x21e3d5)=>{const _0x44d906=_0x5a649d;let _0x2695cc=await this[_0x44d906(0x50f)]({'request':_0x4fdd06,'schema':N,'ClassRef':M,'execute':(_0x2e16ab,_0x5ea9a5)=>P[_0x44d906(0x510)](_0x2e16ab,_0x5ea9a5)});return _0x21e3d5[_0x44d906(0x16f)](0xc9)[_0x44d906(0x405)](_0x2695cc);})['put'](this['routerPath'](_0x5a649d(0x654)),..._0x3aab80,async(_0x46aff1,_0xc22e9c)=>{const _0x5d7a47=_0x5a649d;let _0x211415=await this['dataValidate']({'request':_0x46aff1,'schema':Qa,'ClassRef':st,'execute':(_0x21046d,_0x569b68)=>P[_0x5d7a47(0x1b9)](_0x21046d,_0x569b68)});return _0xc22e9c[_0x5d7a47(0x16f)](0xc9)[_0x5d7a47(0x405)](_0x211415);})[_0x5a649d(0x43c)](this[_0x5a649d(0x5a3)](_0x5a649d(0x484)),..._0x3aab80,async(_0x14cd92,_0x1cefc8)=>{const _0x5a5401=_0x5a649d;let _0x1a4e33=await this[_0x5a5401(0x50f)]({'request':_0x14cd92,'schema':Xa,'ClassRef':at,'execute':(_0x28c398,_0x31ccd6)=>P['archiveChat'](_0x28c398,_0x31ccd6)});return _0x1cefc8['status'](0xc9)[_0x5a5401(0x405)](_0x1a4e33);})[_0x5a649d(0x22c)](this['routerPath'](_0x5a649d(0x381)),..._0x3aab80,async(_0x32d0aa,_0x27dae7)=>{const _0x1ed4eb=_0x5a649d;let _0xbca68d=await this[_0x1ed4eb(0x50f)]({'request':_0x32d0aa,'schema':Za,'ClassRef':ot,'execute':(_0x2ef9c0,_0x27ade2)=>P[_0x1ed4eb(0x223)](_0x2ef9c0,_0x27ade2)});return _0x27dae7[_0x1ed4eb(0x16f)](0xc9)['json'](_0xbca68d);})['post'](this['routerPath'](_0x5a649d(0x332)),..._0x3aab80,async(_0x3ccad9,_0x28548d)=>{const _0x3e6021=_0x5a649d;let _0x617acb=await this[_0x3e6021(0x50f)]({'request':_0x3ccad9,'schema':_e,'ClassRef':Te,'execute':(_0x16d1f2,_0x3a6941)=>P[_0x3e6021(0x261)](_0x16d1f2,_0x3a6941)});return _0x28548d['status'](0xc8)[_0x3e6021(0x405)](_0x617acb);})[_0x5a649d(0x13a)](this[_0x5a649d(0x5a3)]('fetchProfile'),..._0x3aab80,async(_0x5260d8,_0x3d3d81)=>{const _0x1d6cd3=_0x5a649d;let _0xe897b9=await this[_0x1d6cd3(0x50f)]({'request':_0x5260d8,'schema':ai,'ClassRef':Te,'execute':(_0x49a31f,_0x568b24)=>P[_0x1d6cd3(0x59e)](_0x49a31f,_0x568b24)});return _0x3d3d81[_0x1d6cd3(0x16f)](0xc8)['json'](_0xe897b9);})[_0x5a649d(0x13a)](this['routerPath'](_0x5a649d(0x193)),..._0x3aab80,async(_0x172f22,_0x4c33d6)=>{const _0x422731=_0x5a649d;let _0xe8dec4=await this['dataValidate']({'request':_0x172f22,'schema':ei,'ClassRef':nt,'execute':(_0x33b995,_0x54dad9)=>P[_0x422731(0x6c)](_0x33b995,_0x54dad9)});return _0x4c33d6['status'](0xc8)[_0x422731(0x405)](_0xe8dec4);})[_0x5a649d(0x13a)](this['routerPath']('getBase64FromMediaMessage'),..._0x3aab80,async(_0x554ef3,_0xc8b955)=>{const _0x8f929a=_0x5a649d;let _0x1463e4=await this[_0x8f929a(0x50f)]({'request':_0x554ef3,'schema':null,'ClassRef':Object,'execute':(_0x1d90df,_0x45db2d)=>P['getBase64FromMediaMessage'](_0x1d90df,_0x45db2d)});return _0xc8b955['status'](0xc9)[_0x8f929a(0x405)](_0x1463e4);})[_0x5a649d(0x13a)](this[_0x5a649d(0x5a3)]('findMessages'),..._0x3aab80,async(_0x93c8c8,_0x397021)=>{const _0x2e63b5=_0x5a649d;let _0x1be932=await this[_0x2e63b5(0x50f)]({'request':_0x93c8c8,'schema':ii,'ClassRef':Qe,'execute':(_0x3ea796,_0xf67e83)=>P[_0x2e63b5(0x6b7)](_0x3ea796,_0xf67e83)});return _0x397021['status'](0xc8)['json'](_0x1be932);})[_0x5a649d(0x20f)](this['routerPath'](_0x5a649d(0x775)),..._0x3aab80,async(_0x2ccb04,_0x26c9c4)=>{const _0x5cf1b9=_0x5a649d;let _0x2895d4=await this[_0x5cf1b9(0x50f)]({'request':_0x2ccb04,'schema':null,'ClassRef':M,'execute':_0x8b574d=>P['fetchChats'](_0x8b574d)});return _0x26c9c4[_0x5cf1b9(0x16f)](0xc8)['json'](_0x2895d4);})['get'](this[_0x5a649d(0x5a3)](_0x5a649d(0xa7)),..._0x3aab80,async(_0x3c41f7,_0x2e069d)=>{const _0x39aa04=_0x5a649d;let _0x56a87d=await this[_0x39aa04(0x50f)]({'request':_0x3c41f7,'schema':null,'ClassRef':M,'execute':_0x255fd5=>P[_0x39aa04(0x67b)](_0x255fd5)});return _0x2e069d[_0x39aa04(0x16f)](0xc8)['json'](_0x56a87d);})[_0x5a649d(0x43c)](this[_0x5a649d(0x5a3)](_0x5a649d(0x492)),..._0x3aab80,async(_0x46ce8e,_0x181f2b)=>{const _0x372248=_0x5a649d;let _0x5e90e5=await this['dataValidate']({'request':_0x46ce8e,'schema':null,'ClassRef':Array,'execute':(_0x2d0b71,_0x7d51e9)=>P[_0x372248(0x492)](_0x2d0b71,_0x7d51e9)});return _0x181f2b[_0x372248(0x16f)](0xc8)['json'](_0x5e90e5);})[_0x5a649d(0x20f)](this['routerPath'](_0x5a649d(0x645)),..._0x3aab80,async(_0x44a4cd,_0x4fd51f)=>{const _0x4ab3cb=_0x5a649d;let _0x564bce=await this[_0x4ab3cb(0x50f)]({'request':_0x44a4cd,'schema':null,'ClassRef':M,'execute':_0x3ca3cb=>P[_0x4ab3cb(0x645)](_0x3ca3cb)});return _0x4fd51f[_0x4ab3cb(0x16f)](0xc8)['json'](_0x564bce);})[_0x5a649d(0x43c)](this[_0x5a649d(0x5a3)](_0x5a649d(0x2b5)),..._0x3aab80,async(_0x51c347,_0x2c02d7)=>{const _0x1b928b=_0x5a649d;let _0x3983ad=await this[_0x1b928b(0x50f)]({'request':_0x51c347,'schema':Ya,'ClassRef':it,'execute':(_0x33aa00,_0x49336e)=>P[_0x1b928b(0x2b5)](_0x33aa00,_0x49336e)});return _0x2c02d7['status'](0xc9)[_0x1b928b(0x405)](_0x3983ad);})[_0x5a649d(0x13a)](this[_0x5a649d(0x5a3)](_0x5a649d(0x698)),..._0x3aab80,async(_0x385368,_0x2326f2)=>{const _0x4c71ab=_0x5a649d;let _0x24e6e6=await this['dataValidate']({'request':_0x385368,'schema':_e,'ClassRef':Ce,'execute':(_0x4988b7,_0x17ee9f)=>P[_0x4c71ab(0x698)](_0x4988b7,_0x17ee9f)});return _0x2326f2[_0x4c71ab(0x16f)](0xc8)['json'](_0x24e6e6);})['post'](this[_0x5a649d(0x5a3)](_0x5a649d(0x13b)),..._0x3aab80,async(_0x3360b4,_0x4b7808)=>{const _0xd9ae11=_0x5a649d;let _0x2ad37d=await this[_0xd9ae11(0x50f)]({'request':_0x3360b4,'schema':ti,'ClassRef':et,'execute':(_0x414fcf,_0x229b07)=>P[_0xd9ae11(0x13b)](_0x414fcf,_0x229b07)});return _0x4b7808['status'](0xc8)['json'](_0x2ad37d);})[_0x5a649d(0x13a)](this['routerPath'](_0x5a649d(0x1d3)),..._0x3aab80,async(_0xfba270,_0x441221)=>{const _0x29e24c=_0x5a649d;let _0x26ddf6=await this[_0x29e24c(0x50f)]({'request':_0xfba270,'schema':si,'ClassRef':tt,'execute':(_0x43b465,_0x260edc)=>P['updateProfileStatus'](_0x43b465,_0x260edc)});return _0x441221[_0x29e24c(0x16f)](0xc8)[_0x29e24c(0x405)](_0x26ddf6);})[_0x5a649d(0x43c)](this['routerPath'](_0x5a649d(0x79a)),..._0x3aab80,async(_0xbd458c,_0x3ec175)=>{const _0x5526a0=_0x5a649d;let _0x502011=await this[_0x5526a0(0x50f)]({'request':_0xbd458c,'schema':_e,'ClassRef':Ce,'execute':(_0x3944d3,_0x2a657a)=>P['updateProfilePicture'](_0x3944d3,_0x2a657a)});return _0x3ec175[_0x5526a0(0x16f)](0xc8)[_0x5526a0(0x405)](_0x502011);})[_0x5a649d(0x22c)](this[_0x5a649d(0x5a3)](_0x5a649d(0x1c7)),..._0x3aab80,async(_0x596bf0,_0x193b60)=>{const _0x583397=_0x5a649d;let _0x310732=await this[_0x583397(0x50f)]({'request':_0x596bf0,'schema':_e,'ClassRef':Ce,'execute':(_0x5cb1d9,_0xd74789)=>P[_0x583397(0x1c7)](_0x5cb1d9,_0xd74789)});return _0x193b60['status'](0xc8)[_0x583397(0x405)](_0x310732);});}},fi=require('express'),dt=class{},pt=class{},ht=class{},gt=class{},mt=class{},ft=class{},te=class{},De=class{},wt=class extends te{},yt=class extends te{},bt=class extends G{constructor(..._0x55b5f4){const _0x1a49b0=a0_0x46df1a;super(),this[_0x1a49b0(0x394)]=(0x0,fi[_0x1a49b0(0x60e)])(),this['router'][_0x1a49b0(0x13a)](this[_0x1a49b0(0x5a3)](_0x1a49b0(0x83)),..._0x55b5f4,async(_0x2bcb18,_0x51444d)=>{const _0x48f518=_0x1a49b0;let _0x51c869=await this[_0x48f518(0x50f)]({'request':_0x2bcb18,'schema':ri,'ClassRef':dt,'execute':(_0x3cdfbf,_0x12c850)=>q[_0x48f518(0x85)](_0x3cdfbf,_0x12c850)});_0x51444d[_0x48f518(0x16f)](0xc9)['json'](_0x51c869);})['put'](this['routerPath'](_0x1a49b0(0x7a5)),..._0x55b5f4,async(_0x37c91a,_0x12906c)=>{const _0x24753b=_0x1a49b0;let _0x2730ce=await this[_0x24753b(0x264)]({'request':_0x37c91a,'schema':li,'ClassRef':pt,'execute':(_0x559047,_0x1fd874)=>q[_0x24753b(0x7a5)](_0x559047,_0x1fd874)});_0x12906c[_0x24753b(0x16f)](0xc9)[_0x24753b(0x405)](_0x2730ce);})[_0x1a49b0(0x43c)](this[_0x1a49b0(0x5a3)](_0x1a49b0(0x66b)),..._0x55b5f4,async(_0x2b75da,_0x56340d)=>{const _0x453ae0=_0x1a49b0;let _0x4cdb05=await this[_0x453ae0(0x264)]({'request':_0x2b75da,'schema':ui,'ClassRef':ht,'execute':(_0x44d4e3,_0x1f1aef)=>q[_0x453ae0(0x66b)](_0x44d4e3,_0x1f1aef)});_0x56340d[_0x453ae0(0x16f)](0xc9)[_0x453ae0(0x405)](_0x4cdb05);})[_0x1a49b0(0x43c)](this[_0x1a49b0(0x5a3)](_0x1a49b0(0x34a)),..._0x55b5f4,async(_0x52f121,_0x252d17)=>{const _0x171910=_0x1a49b0;let _0x2fa1d8=await this[_0x171910(0x264)]({'request':_0x52f121,'schema':di,'ClassRef':gt,'execute':(_0x2ccd0a,_0x3a194b)=>q['groupName'](_0x2ccd0a,_0x3a194b)});_0x252d17['status'](0xc9)[_0x171910(0x405)](_0x2fa1d8);})[_0x1a49b0(0x43c)](this[_0x1a49b0(0x5a3)]('groupBetterSetting'),..._0x55b5f4,async(_0x24046a,_0x522a89)=>{const _0x32502f=_0x1a49b0;let _0x3cd262=await this[_0x32502f(0x264)]({'request':_0x24046a,'schema':hi,'ClassRef':ft,'execute':(_0x1749a1,_0x187c89)=>q[_0x32502f(0x5f3)](_0x1749a1,_0x187c89)});_0x522a89['status'](0xc9)[_0x32502f(0x405)](_0x3cd262);})[_0x1a49b0(0x43c)](this[_0x1a49b0(0x5a3)](_0x1a49b0(0x55c)),..._0x55b5f4,async(_0x18c027,_0x5d29d0)=>{const _0x30650f=_0x1a49b0;let _0x58b35b=await this[_0x30650f(0x264)]({'request':_0x18c027,'schema':pi,'ClassRef':mt,'execute':(_0x25ac10,_0x4f63a5)=>q[_0x30650f(0x55c)](_0x25ac10,_0x4f63a5)});_0x5d29d0[_0x30650f(0x16f)](0xc9)[_0x30650f(0x405)](_0x58b35b);})['put'](this['routerPath'](_0x1a49b0(0x2c4)),..._0x55b5f4,async(_0x589df5,_0x1a3fa7)=>{const _0x23f001=_0x1a49b0;let _0x154f0f=await this[_0x23f001(0x264)]({'request':_0x589df5,'schema':ci,'ClassRef':yt,'execute':(_0xfd6b07,_0x3776d3)=>q[_0x23f001(0x2c4)](_0xfd6b07,_0x3776d3)});_0x1a3fa7[_0x23f001(0x16f)](0xc9)['json'](_0x154f0f);})['get'](this['routerPath'](_0x1a49b0(0x2a1)),..._0x55b5f4,async(_0x1ed941,_0xce268e)=>{const _0x3c6883=_0x1a49b0;let _0x257d15=await this[_0x3c6883(0x264)]({'request':_0x1ed941,'schema':xe,'ClassRef':te,'execute':(_0x44c643,_0x1b4b5f)=>q[_0x3c6883(0x732)](_0x44c643,_0x1b4b5f)});_0xce268e[_0x3c6883(0x16f)](0xc8)[_0x3c6883(0x405)](_0x257d15);})[_0x1a49b0(0x20f)](this[_0x1a49b0(0x5a3)](_0x1a49b0(0x120)),..._0x55b5f4,async(_0x2ecd4c,_0x3ce924)=>{const _0x3dfcae=_0x1a49b0;let _0x555d4b=await this[_0x3dfcae(0x50f)]({'request':_0x2ecd4c,'schema':N,'ClassRef':M,'execute':_0x43cecb=>q[_0x3dfcae(0x120)](_0x43cecb)});_0x3ce924[_0x3dfcae(0x16f)](0xc8)[_0x3dfcae(0x405)](_0x555d4b);})[_0x1a49b0(0x20f)](this['routerPath'](_0x1a49b0(0x4ab)),..._0x55b5f4,async(_0x537858,_0x3ac0f2)=>{const _0x3fcb52=_0x1a49b0;let _0x4f222a=await this[_0x3fcb52(0x264)]({'request':_0x537858,'schema':xe,'ClassRef':te,'execute':(_0x104875,_0x4694c0)=>q['findParticipants'](_0x104875,_0x4694c0)});_0x3ac0f2[_0x3fcb52(0x16f)](0xc8)[_0x3fcb52(0x405)](_0x4f222a);})[_0x1a49b0(0x20f)](this[_0x1a49b0(0x5a3)](_0x1a49b0(0x2aa)),..._0x55b5f4,async(_0x1ce664,_0x38b758)=>{const _0x4af52c=_0x1a49b0;let _0x13f450=await this[_0x4af52c(0x264)]({'request':_0x1ce664,'schema':xe,'ClassRef':te,'execute':(_0xb4fcdc,_0x205f45)=>q[_0x4af52c(0x2aa)](_0xb4fcdc,_0x205f45)});_0x38b758[_0x4af52c(0x16f)](0xc8)['json'](_0x13f450);})[_0x1a49b0(0x13a)](this[_0x1a49b0(0x5a3)]('inviteCodeDetails'),..._0x55b5f4,async(_0x42dbb6,_0x14700f)=>{const _0x3d868e=_0x1a49b0;let _0x362a6c=await this[_0x3d868e(0x506)]({'request':_0x42dbb6,'schema':Rs,'ClassRef':De,'execute':(_0x55710d,_0xdb887b)=>q[_0x3d868e(0x748)](_0x55710d,_0xdb887b)});_0x14700f[_0x3d868e(0x16f)](0xc9)[_0x3d868e(0x405)](_0x362a6c);})[_0x1a49b0(0x43c)](this[_0x1a49b0(0x5a3)]('joinGroup'),..._0x55b5f4,async(_0x431443,_0x5307d0)=>{const _0x2b5bb4=_0x1a49b0;let _0x55bbcf=await this[_0x2b5bb4(0x506)]({'request':_0x431443,'schema':Rs,'ClassRef':De,'execute':(_0x43663b,_0x37a1da)=>q['joinGroup'](_0x43663b,_0x37a1da)});_0x5307d0[_0x2b5bb4(0x16f)](0xc9)[_0x2b5bb4(0x405)](_0x55bbcf);})[_0x1a49b0(0x43c)](this['routerPath'](_0x1a49b0(0x3b9)),..._0x55b5f4,async(_0x8a3f2f,_0x1e5432)=>{const _0x513448=_0x1a49b0;let _0x5a6360=await this[_0x513448(0x264)]({'request':_0x8a3f2f,'schema':xe,'ClassRef':te,'execute':(_0x27407e,_0x5ec5e6)=>q[_0x513448(0x3b9)](_0x27407e,_0x5ec5e6)});_0x1e5432[_0x513448(0x16f)](0xc9)['json'](_0x5a6360);})[_0x1a49b0(0x43c)](this['routerPath']('updateParticipant'),..._0x55b5f4,async(_0x31356c,_0x176cdc)=>{const _0x411caf=_0x1a49b0;let _0xd018c7=await this[_0x411caf(0x264)]({'request':_0x31356c,'schema':ni,'ClassRef':wt,'execute':(_0xdf40ce,_0x410c2b)=>q[_0x411caf(0x432)](_0xdf40ce,_0x410c2b)});_0x176cdc[_0x411caf(0x16f)](0xc9)[_0x411caf(0x405)](_0xd018c7);})[_0x1a49b0(0x22c)](this['routerPath'](_0x1a49b0(0x30e)),..._0x55b5f4,async(_0x84df23,_0x32bf45)=>{const _0x3003a7=_0x1a49b0;let _0x45ddba=await this[_0x3003a7(0x264)]({'request':_0x84df23,'schema':{},'ClassRef':te,'execute':(_0x509505,_0x458e79)=>q[_0x3003a7(0x30e)](_0x509505,_0x458e79)});_0x32bf45[_0x3003a7(0x16f)](0xc8)[_0x3003a7(0x405)](_0x45ddba);});}},wi=require('express'),St=class extends G{constructor(_0xc99f8c,..._0x21e1dd){const _0x1b1fb5=a0_0x46df1a;super(),this[_0x1b1fb5(0x46a)]=_0xc99f8c,this[_0x1b1fb5(0x394)]=(0x0,wi[_0x1b1fb5(0x60e)])();let _0x3cd506=_0xc99f8c[_0x1b1fb5(0x20f)](_0x1b1fb5(0x72d));this[_0x1b1fb5(0x394)][_0x1b1fb5(0x13a)]('/create',..._0x21e1dd,async(_0x5bfff6,_0x346b75)=>{const _0x44d5a7=_0x1b1fb5;let {instanceName:_0x3fcf4c,apikey:_0x1578d9,number:_0x3cf80e}=_0x5bfff6[_0x44d5a7(0x6b3)],_0x44c84f=await de[_0x44d5a7(0x4fe)]({'instanceName':_0x3fcf4c,'apikey':_0x1578d9,'number':_0x3cf80e});return _0x346b75[_0x44d5a7(0x16f)](0xc9)['json'](_0x44c84f);})[_0x1b1fb5(0x43c)](this[_0x1b1fb5(0x5a3)](_0x1b1fb5(0x137)),..._0x21e1dd,async(_0x317309,_0x5e4e86)=>{const _0x21309a=_0x1b1fb5;let _0x11e8cf=await this[_0x21309a(0x50f)]({'request':_0x317309,'schema':N,'ClassRef':M,'execute':_0x18c89c=>de[_0x21309a(0xbc)](_0x18c89c)});return _0x5e4e86[_0x21309a(0x16f)](0xc8)['json'](_0x11e8cf);})['get'](this[_0x1b1fb5(0x5a3)]('connect'),..._0x21e1dd,async(_0x4c3ebd,_0x40bcac)=>{const _0x5ee002=_0x1b1fb5;let _0x4ed0cd=await this[_0x5ee002(0x50f)]({'request':_0x4c3ebd,'schema':N,'ClassRef':M,'execute':_0x354788=>de[_0x5ee002(0x2ec)](_0x354788)});return _0x40bcac['status'](0xc8)[_0x5ee002(0x405)](_0x4ed0cd);})[_0x1b1fb5(0x20f)](this[_0x1b1fb5(0x5a3)]('connectionState'),..._0x21e1dd,async(_0x12bd8a,_0x4dbf82)=>{const _0x46086b=_0x1b1fb5;let _0x2e70a2=await this['dataValidate']({'request':_0x12bd8a,'schema':N,'ClassRef':M,'execute':_0x40bc1a=>de['connectionState'](_0x40bc1a)});return _0x4dbf82['status'](0xc8)[_0x46086b(0x405)](_0x2e70a2);})[_0x1b1fb5(0x20f)](this[_0x1b1fb5(0x5a3)](_0x1b1fb5(0x4a3),!0x1),..._0x21e1dd,async(_0x108119,_0x472db0)=>{const _0x53dd79=_0x1b1fb5;let _0x5bc0b2=await this['dataValidate']({'request':_0x108119,'schema':null,'ClassRef':M,'execute':_0x36cd21=>de[_0x53dd79(0x4a3)](_0x36cd21)});return _0x472db0[_0x53dd79(0x16f)](0xc8)[_0x53dd79(0x405)](_0x5bc0b2);})[_0x1b1fb5(0x22c)](this[_0x1b1fb5(0x5a3)](_0x1b1fb5(0x1ab)),..._0x21e1dd,async(_0x2746b0,_0xc734b4)=>{const _0x18ce68=_0x1b1fb5;let _0x5cfea3=await this[_0x18ce68(0x50f)]({'request':_0x2746b0,'schema':N,'ClassRef':M,'execute':_0x28ed65=>de[_0x18ce68(0x1ab)](_0x28ed65)});return _0xc734b4['status'](0xc8)[_0x18ce68(0x405)](_0x5cfea3);})['delete'](this[_0x1b1fb5(0x5a3)](_0x1b1fb5(0x22c)),..._0x21e1dd,async(_0xe33b99,_0x3a5d5a)=>{const _0x5deee2=_0x1b1fb5;let _0x5c18a1=await this[_0x5deee2(0x50f)]({'request':_0xe33b99,'schema':N,'ClassRef':M,'execute':_0x2ae02c=>de[_0x5deee2(0x67e)](_0x2ae02c)});return _0x3a5d5a['status'](0xc8)[_0x5deee2(0x405)](_0x5c18a1);});}},yi=require(a0_0x46df1a(0x71d)),Is=class{},z=class extends Is{},Mt=class extends z{},Ct=class extends z{},Et=class extends z{},vt=class extends z{},Pe=class extends z{},Nt=class extends z{},$t=class extends z{},Rt=class extends z{},At=class extends z{},It=class extends z{},Tt=class{},Ot=class extends G{constructor(..._0x4cb790){const _0x5ca8d1=a0_0x46df1a;super(),this[_0x5ca8d1(0x394)]=(0x0,yi[_0x5ca8d1(0x60e)])(),this[_0x5ca8d1(0x394)][_0x5ca8d1(0x13a)](this['routerPath'](_0x5ca8d1(0x730)),..._0x4cb790,async(_0x1d092c,_0x48ab6d)=>{const _0x56c985=_0x5ca8d1;let _0x2796ab=await this['dataValidate']({'request':_0x1d092c,'schema':ka,'ClassRef':Mt,'execute':(_0x8a0863,_0x342a19)=>W['sendText'](_0x8a0863,_0x342a19)});return _0x48ab6d[_0x56c985(0x16f)](0xc9)[_0x56c985(0x405)](_0x2796ab);})[_0x5ca8d1(0x13a)](this['routerPath']('sendMedia'),..._0x4cb790,async(_0x471a9c,_0x4c8a01)=>{const _0x3ff43f=_0x5ca8d1;let _0x4c4031=await this[_0x3ff43f(0x50f)]({'request':_0x471a9c,'schema':ja,'ClassRef':Pe,'execute':(_0x4ea1d6,_0x4a0b95)=>W['sendMedia'](_0x4ea1d6,_0x4a0b95)});return _0x4c8a01[_0x3ff43f(0x16f)](0xc9)['json'](_0x4c4031);})[_0x5ca8d1(0x13a)](this[_0x5ca8d1(0x5a3)](_0x5ca8d1(0x4b0)),..._0x4cb790,async(_0x10fc40,_0x298fc2)=>{const _0x390e3d=_0x5ca8d1;let _0x928357=await this[_0x390e3d(0x50f)]({'request':_0x10fc40,'schema':Va,'ClassRef':vt,'execute':(_0x1fd3ce,_0x379455)=>W[_0x390e3d(0x4b0)](_0x1fd3ce,_0x379455)});return _0x298fc2[_0x390e3d(0x16f)](0xc9)[_0x390e3d(0x405)](_0x928357);})[_0x5ca8d1(0x13a)](this[_0x5ca8d1(0x5a3)]('sendWhatsAppAudio'),..._0x4cb790,async(_0x4d30e2,_0x141446)=>{const _0x27fe81=_0x5ca8d1;let _0x53f56e=await this[_0x27fe81(0x50f)]({'request':_0x4d30e2,'schema':Ja,'ClassRef':Pe,'execute':(_0x1aee96,_0x550cff)=>W[_0x27fe81(0x38b)](_0x1aee96,_0x550cff)});return _0x141446[_0x27fe81(0x16f)](0xc9)[_0x27fe81(0x405)](_0x53f56e);})[_0x5ca8d1(0x13a)](this['routerPath'](_0x5ca8d1(0x315)),..._0x4cb790,async(_0x12d77d,_0x51370d)=>{const _0x11c618=_0x5ca8d1;let _0x2c2152=await this[_0x11c618(0x50f)]({'request':_0x12d77d,'schema':Ga,'ClassRef':$t,'execute':(_0x5b069b,_0x3d392a)=>W[_0x11c618(0x315)](_0x5b069b,_0x3d392a)});return _0x51370d[_0x11c618(0x16f)](0xc9)['json'](_0x2c2152);})[_0x5ca8d1(0x13a)](this[_0x5ca8d1(0x5a3)]('sendLocation'),..._0x4cb790,async(_0x2efc2f,_0xfe2188)=>{const _0x3d02a2=_0x5ca8d1;let _0x3a9235=await this[_0x3d02a2(0x50f)]({'request':_0x2efc2f,'schema':Ba,'ClassRef':Rt,'execute':(_0x2de2f0,_0x1bcbeb)=>W[_0x3d02a2(0x4de)](_0x2de2f0,_0x1bcbeb)});return _0xfe2188[_0x3d02a2(0x16f)](0xc9)[_0x3d02a2(0x405)](_0x3a9235);})['post'](this[_0x5ca8d1(0x5a3)](_0x5ca8d1(0xc8)),..._0x4cb790,async(_0x4b38e5,_0x5a7b02)=>{const _0x5873f9=_0x5ca8d1;let _0x13163f=await this[_0x5873f9(0x50f)]({'request':_0x4b38e5,'schema':Wa,'ClassRef':At,'execute':(_0x2488c6,_0x3fcc2a)=>W['sendList'](_0x2488c6,_0x3fcc2a)});return _0x5a7b02[_0x5873f9(0x16f)](0xc9)['json'](_0x13163f);})[_0x5ca8d1(0x13a)](this[_0x5ca8d1(0x5a3)](_0x5ca8d1(0x564)),..._0x4cb790,async(_0x1d40d8,_0x8ffab7)=>{const _0xd6f01f=_0x5ca8d1;let _0x9261f7=await this[_0xd6f01f(0x50f)]({'request':_0x1d40d8,'schema':za,'ClassRef':It,'execute':(_0x1af0d9,_0x3b4670)=>W[_0xd6f01f(0x564)](_0x1af0d9,_0x3b4670)});return _0x8ffab7[_0xd6f01f(0x16f)](0xc9)['json'](_0x9261f7);})[_0x5ca8d1(0x13a)](this[_0x5ca8d1(0x5a3)]('sendReaction'),..._0x4cb790,async(_0x44c6fc,_0x1659a4)=>{const _0x5bba5b=_0x5ca8d1;let _0x48c4f2=await this['dataValidate']({'request':_0x44c6fc,'schema':Ha,'ClassRef':Tt,'execute':(_0x48c5ff,_0x9b1caa)=>W[_0x5bba5b(0x6dc)](_0x48c5ff,_0x9b1caa)});return _0x1659a4['status'](0xc9)[_0x5bba5b(0x405)](_0x48c4f2);})['post'](this[_0x5ca8d1(0x5a3)]('sendPoll'),..._0x4cb790,async(_0x2147ed,_0x3ad888)=>{const _0x31a07c=_0x5ca8d1;let _0x52af27=await this[_0x31a07c(0x50f)]({'request':_0x2147ed,'schema':qa,'ClassRef':Et,'execute':(_0x3d4e65,_0x10bb76)=>W['sendPoll'](_0x3d4e65,_0x10bb76)});return _0x3ad888[_0x31a07c(0x16f)](0xc9)[_0x31a07c(0x405)](_0x52af27);})['post'](this[_0x5ca8d1(0x5a3)]('sendStatus'),..._0x4cb790,async(_0x4b9c14,_0x2c360e)=>{const _0x3701ee=_0x5ca8d1;let _0x26c920=await this[_0x3701ee(0x50f)]({'request':_0x4b9c14,'schema':Ua,'ClassRef':Ct,'execute':(_0x3e69c0,_0x2df21c)=>W[_0x3701ee(0x6d8)](_0x3e69c0,_0x2df21c)});return _0x2c360e['status'](0xc9)[_0x3701ee(0x405)](_0x26c920);})[_0x5ca8d1(0x13a)](this[_0x5ca8d1(0x5a3)]('sendSticker'),..._0x4cb790,async(_0x28785f,_0x1425a8)=>{const _0x54d8ce=_0x5ca8d1;let _0x565207=await this[_0x54d8ce(0x50f)]({'request':_0x28785f,'schema':Fa,'ClassRef':Nt,'execute':(_0x230574,_0x43b3cb)=>W[_0x54d8ce(0x6cf)](_0x230574,_0x43b3cb)});return _0x1425a8[_0x54d8ce(0x16f)](0xc9)[_0x54d8ce(0x405)](_0x565207);});}},bi=require('express'),_t=class{},xt=class extends G{constructor(..._0x187b70){const _0x3c1f45=a0_0x46df1a;super(),this['router']=(0x0,bi['Router'])(),this[_0x3c1f45(0x394)][_0x3c1f45(0x13a)](this['routerPath'](_0x3c1f45(0x358)),..._0x187b70,async(_0x28c86f,_0x15777e)=>{const _0x29229c=_0x3c1f45;let _0x3d4373=await this[_0x29229c(0x50f)]({'request':_0x28c86f,'schema':gi,'ClassRef':_t,'execute':(_0x448d6b,_0x151c78)=>Ts[_0x29229c(0x786)](_0x448d6b,_0x151c78)});_0x15777e['status'](0xc9)[_0x29229c(0x405)](_0x3d4373);})[_0x3c1f45(0x20f)](this[_0x3c1f45(0x5a3)](_0x3c1f45(0x336)),..._0x187b70,async(_0x1a7be5,_0x1ed4a5)=>{const _0x3a6d59=_0x3c1f45;let _0x1e0750=await this[_0x3a6d59(0x50f)]({'request':_0x1a7be5,'schema':N,'ClassRef':M,'execute':_0x13c3bd=>Ts[_0x3a6d59(0x475)](_0x13c3bd)});_0x1ed4a5[_0x3a6d59(0x16f)](0xc8)[_0x3a6d59(0x405)](_0x1e0750);});}},Si=require('express'),y=new $(a0_0x46df1a(0x8a)),Dt=class extends G{constructor(..._0x319948){const _0x29e718=a0_0x46df1a;super(),this[_0x29e718(0x394)]=(0x0,Si[_0x29e718(0x60e)])(),this['router'][_0x29e718(0x13a)](this[_0x29e718(0x5a3)](_0x29e718(0x1d9)),..._0x319948,async(_0xb35e13,_0x532037)=>{const _0x2b37e7=_0x29e718;let _0x4c121b=_0xb35e13[_0x2b37e7(0x6b3)];y[_0x2b37e7(0x2c1)](_0x2b37e7(0x202)),y[_0x2b37e7(0x2c1)](_0x2b37e7(0x7a9)),y[_0x2b37e7(0x2c1)](_0xb35e13[_0x2b37e7(0x6b3)]);let _0x178444=await this[_0x2b37e7(0x50f)]({'request':_0xb35e13,'schema':N,'ClassRef':M,'execute':_0x586611=>T['editScheduleMessage'](_0x586611,_0x4c121b)});_0x532037[_0x2b37e7(0x16f)](0xc8)[_0x2b37e7(0x405)](_0x178444);})[_0x29e718(0x20f)](this['routerPath'](_0x29e718(0x1d9)),..._0x319948,async(_0x43cfb3,_0x118996)=>{const _0x180d8e=_0x29e718;let _0x4a1d2b=await this[_0x180d8e(0x50f)]({'request':_0x43cfb3,'schema':N,'ClassRef':M,'execute':_0x315dec=>T[_0x180d8e(0x2cc)](_0x315dec)});_0x118996[_0x180d8e(0x16f)](0xc8)[_0x180d8e(0x405)](_0x4a1d2b);})[_0x29e718(0x22c)](this[_0x29e718(0x5a3)]('deleteDoneMessages'),..._0x319948,async(_0x4db5ce,_0x38500e)=>{const _0x35f290=_0x29e718;y[_0x35f290(0x2c1)](_0x35f290(0x9a));let _0x5e36b5=await this['dataValidate']({'request':_0x4db5ce,'schema':N,'ClassRef':M,'execute':_0x4e036e=>T[_0x35f290(0xe3)](_0x4e036e)});_0x38500e['status'](0xc8)[_0x35f290(0x405)](_0x5e36b5);})[_0x29e718(0x13a)](this[_0x29e718(0x5a3)](_0x29e718(0x20a)),..._0x319948,async(_0x27516e,_0x49701a)=>{const _0xa06f6=_0x29e718;let _0x5f37a7=_0x27516e[_0xa06f6(0x6b3)];y['verbose'](_0xa06f6(0x258)),y[_0xa06f6(0x2c1)]('request\x20body:\x20'),y['verbose'](_0x27516e['body']);let _0x2fa417=await this[_0xa06f6(0x50f)]({'request':_0x27516e,'schema':N,'ClassRef':M,'execute':_0x3798d6=>T[_0xa06f6(0x20a)](_0x3798d6,_0x5f37a7)});_0x49701a[_0xa06f6(0x16f)](0xc8)['json'](_0x2fa417);})['get'](this[_0x29e718(0x5a3)](_0x29e718(0x5b4)),..._0x319948,async(_0x45cc26,_0x547f36)=>{const _0x5f84ba=_0x29e718;y[_0x5f84ba(0x2c1)](_0x5f84ba(0x173));let _0x2c4dc4=await this[_0x5f84ba(0x50f)]({'request':_0x45cc26,'schema':N,'ClassRef':M,'execute':_0x14e578=>T['getAutomateSystem'](_0x14e578)});_0x547f36[_0x5f84ba(0x16f)](0xc8)['json'](_0x2c4dc4);})[_0x29e718(0x20f)](this[_0x29e718(0x5a3)]('getTicketSystem'),..._0x319948,async(_0xc57de0,_0x271a57)=>{const _0x529260=_0x29e718;y[_0x529260(0x2c1)]('request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem');let _0x1cf439=await this[_0x529260(0x50f)]({'request':_0xc57de0,'schema':N,'ClassRef':M,'execute':_0x1a1633=>T[_0x529260(0x5b4)](_0x1a1633)});_0x271a57['status'](0xc8)[_0x529260(0x405)](_0x1cf439);})[_0x29e718(0x13a)](this[_0x29e718(0x5a3)]('updateAgent'),..._0x319948,async(_0x90e10e,_0x1898a1)=>{const _0x4a4ab8=_0x29e718;let _0x49fdff=_0x90e10e[_0x4a4ab8(0x6b3)];y[_0x4a4ab8(0x2c1)]('request\x20received\x20in\x20updateAgent'),y['verbose'](_0x4a4ab8(0x7a9)),y[_0x4a4ab8(0x2c1)](_0x90e10e['body']);let _0x490995=await this[_0x4a4ab8(0x50f)]({'request':_0x90e10e,'schema':N,'ClassRef':M,'execute':_0x4159a6=>T[_0x4a4ab8(0x275)](_0x4159a6,_0x49fdff)});_0x1898a1[_0x4a4ab8(0x16f)](0xc8)[_0x4a4ab8(0x405)](_0x490995);})[_0x29e718(0x13a)](this[_0x29e718(0x5a3)]('updateCustomFields'),..._0x319948,async(_0x312ea,_0x1183fb)=>{const _0x40e203=_0x29e718;let _0x540254=_0x312ea[_0x40e203(0x6b3)];y[_0x40e203(0x2c1)]('request\x20received\x20in\x20updateCustomFields'),y['verbose'](_0x40e203(0x7a9)),y[_0x40e203(0x2c1)](_0x312ea[_0x40e203(0x6b3)]);let _0x609268=await this[_0x40e203(0x50f)]({'request':_0x312ea,'schema':N,'ClassRef':M,'execute':_0x309790=>T[_0x40e203(0x2f0)](_0x309790,_0x540254)});_0x1183fb[_0x40e203(0x16f)](0xc8)[_0x40e203(0x405)](_0x609268);})[_0x29e718(0x13a)](this['routerPath'](_0x29e718(0x696)),..._0x319948,async(_0xb83ec2,_0x9fe0f)=>{const _0x74c072=_0x29e718;let _0x5eaade=_0xb83ec2[_0x74c072(0x6b3)];y['verbose'](_0x74c072(0x1b2)),y[_0x74c072(0x2c1)](_0x74c072(0x7a9)),y[_0x74c072(0x2c1)](_0xb83ec2[_0x74c072(0x6b3)]);let _0x4c065b=await this['dataValidate']({'request':_0xb83ec2,'schema':N,'ClassRef':M,'execute':_0x99049d=>T[_0x74c072(0x696)](_0x99049d,_0x5eaade)});_0x9fe0f[_0x74c072(0x16f)](0xc8)[_0x74c072(0x405)](_0x4c065b);})[_0x29e718(0x13a)](this[_0x29e718(0x5a3)](_0x29e718(0x40f)),..._0x319948,async(_0x3024a3,_0x1431f4)=>{const _0x35df39=_0x29e718;let _0x18879b=_0x3024a3[_0x35df39(0x6b3)];y[_0x35df39(0x2c1)]('request\x20received\x20in\x20updateFlowConfig'),y[_0x35df39(0x2c1)]('request\x20body:\x20'),y['verbose'](_0x3024a3[_0x35df39(0x6b3)]);let _0xb1897e=await this[_0x35df39(0x50f)]({'request':_0x3024a3,'schema':N,'ClassRef':M,'execute':_0x3aba=>T[_0x35df39(0x40f)](_0x3aba,_0x18879b)});_0x1431f4[_0x35df39(0x16f)](0xc8)[_0x35df39(0x405)](_0xb1897e);})[_0x29e718(0x13a)](this['routerPath'](_0x29e718(0x3c9)),..._0x319948,async(_0x215608,_0x3e9e34)=>{const _0x24b5d2=_0x29e718;let _0x1857a5=_0x215608[_0x24b5d2(0x6b3)];y[_0x24b5d2(0x2c1)](_0x24b5d2(0x253)),y[_0x24b5d2(0x2c1)](_0x24b5d2(0x7a9)),y['verbose'](_0x215608[_0x24b5d2(0x6b3)]);let _0x236d52=await this['dataValidate']({'request':_0x215608,'schema':N,'ClassRef':M,'execute':_0x4be527=>T[_0x24b5d2(0x3c9)](_0x4be527,_0x1857a5)});_0x3e9e34[_0x24b5d2(0x16f)](0xc8)[_0x24b5d2(0x405)](_0x236d52);})[_0x29e718(0x13a)](this[_0x29e718(0x5a3)](_0x29e718(0x524)),..._0x319948,async(_0x5867bc,_0x1a29cd)=>{const _0x681cc7=_0x29e718;let _0x3d5b8b=_0x5867bc[_0x681cc7(0x6b3)];y[_0x681cc7(0x2c1)](_0x681cc7(0x460)),y[_0x681cc7(0x2c1)]('request\x20body:\x20'),y['verbose'](_0x5867bc[_0x681cc7(0x6b3)]);let _0x5ca8aa=await this['dataValidate']({'request':_0x5867bc,'schema':N,'ClassRef':M,'execute':_0x10b7b0=>T[_0x681cc7(0x524)](_0x10b7b0,_0x3d5b8b)});_0x1a29cd['status'](0xc8)[_0x681cc7(0x405)](_0x5ca8aa);})[_0x29e718(0x13a)](this[_0x29e718(0x5a3)](_0x29e718(0x30f)),..._0x319948,async(_0x569acb,_0x424918)=>{const _0x43b0bb=_0x29e718;let _0x1f8cd4=_0x569acb[_0x43b0bb(0x6b3)];y['verbose'](_0x43b0bb(0x4b1)),y['verbose'](_0x43b0bb(0x7a9)),y[_0x43b0bb(0x2c1)](_0x569acb[_0x43b0bb(0x6b3)]);let _0x19d85e=await this[_0x43b0bb(0x50f)]({'request':_0x569acb,'schema':N,'ClassRef':M,'execute':_0x19830a=>T[_0x43b0bb(0x30f)](_0x19830a,_0x1f8cd4)});_0x424918[_0x43b0bb(0x16f)](0xc8)[_0x43b0bb(0x405)](_0x19d85e);})[_0x29e718(0x22c)](this[_0x29e718(0x5a3)]('deleteConversation'),..._0x319948,async(_0x157eba,_0x2118ea)=>{const _0x6d8b4f=_0x29e718;let _0x36e555=_0x157eba['body'];y[_0x6d8b4f(0x2c1)](_0x6d8b4f(0x5a0)),y[_0x6d8b4f(0x2c1)](_0x6d8b4f(0x7a9)),y[_0x6d8b4f(0x2c1)](_0x157eba['body']);let _0x51b8a7=await this[_0x6d8b4f(0x50f)]({'request':_0x157eba,'schema':N,'ClassRef':M,'execute':_0x41e88d=>T['deleteConversation'](_0x41e88d,_0x36e555)});_0x2118ea[_0x6d8b4f(0x16f)](0xc8)[_0x6d8b4f(0x405)](_0x51b8a7);})[_0x29e718(0x13a)](this['routerPath'](_0x29e718(0x574)),..._0x319948,async(_0x563227,_0x30cba2)=>{const _0x5b475b=_0x29e718;let _0x389a73=_0x563227[_0x5b475b(0x6b3)],_0x4bc7e7=_0x563227[_0x5b475b(0x739)]['apikey'];y[_0x5b475b(0x2c1)](_0x5b475b(0x476)),y[_0x5b475b(0x2c1)](_0x5b475b(0x7a9)),y[_0x5b475b(0x2c1)](_0x563227['body']);let _0x41f49f=await this['dataValidate']({'request':_0x563227,'schema':N,'ClassRef':M,'execute':_0x507421=>T[_0x5b475b(0x5e8)](_0x507421,_0x389a73,_0x4bc7e7)});_0x30cba2[_0x5b475b(0x16f)](0xc8)['json'](_0x41f49f);})['post'](this[_0x29e718(0x5a3)](_0x29e718(0x374)),..._0x319948,async(_0x25e8b2,_0x232d26)=>{const _0x460e31=_0x29e718;let _0xf99e22=_0x25e8b2[_0x460e31(0x6b3)],_0x27b65c=_0x25e8b2[_0x460e31(0x739)][_0x460e31(0x201)];y['verbose']('request\x20received\x20in\x20editFlow'),y['verbose']('request\x20body:\x20'),y[_0x460e31(0x2c1)](_0x25e8b2['body']),delete _0xf99e22[_0x460e31(0x25a)],delete _0xf99e22[_0x460e31(0x310)],delete _0xf99e22[_0x460e31(0x19c)],delete _0xf99e22[_0x460e31(0x31c)];let _0x3b93ed=await this[_0x460e31(0x50f)]({'request':_0x25e8b2,'schema':N,'ClassRef':M,'execute':_0x44b8ce=>T[_0x460e31(0x5dc)](_0x44b8ce,_0xf99e22,_0x27b65c)});_0x232d26['status'](0xc8)[_0x460e31(0x405)](_0x3b93ed);})['post'](this[_0x29e718(0x5a3)]('editflowblock'),..._0x319948,async(_0x396ab5,_0x26215e)=>{const _0x479fee=_0x29e718;let _0x3a25f7=_0x396ab5[_0x479fee(0x6b3)];y[_0x479fee(0x2c1)]('request\x20received\x20in\x20editFlow'),y[_0x479fee(0x2c1)]('request\x20body:\x20'),y[_0x479fee(0x2c1)](_0x396ab5['body']);let _0x459d92=await this[_0x479fee(0x50f)]({'request':_0x396ab5,'schema':N,'ClassRef':M,'execute':_0x445983=>T[_0x479fee(0x194)](_0x445983,_0x3a25f7)});_0x26215e['status'](0xc8)[_0x479fee(0x405)](_0x459d92);})[_0x29e718(0x13a)](this['routerPath'](_0x29e718(0x717)),..._0x319948,async(_0x284efd,_0x9c87d9)=>{const _0x2e80b7=_0x29e718;let _0x50d602=_0x284efd['body'];y[_0x2e80b7(0x2c1)](_0x2e80b7(0x521)),y['verbose'](_0x2e80b7(0x7a9)),y[_0x2e80b7(0x2c1)](_0x284efd['body']);let _0x250cad=await this[_0x2e80b7(0x50f)]({'request':_0x284efd,'schema':N,'ClassRef':M,'execute':_0x132308=>T[_0x2e80b7(0x2b9)](_0x132308,_0x50d602)});_0x9c87d9['status'](0xc8)[_0x2e80b7(0x405)](_0x250cad);})['post'](this[_0x29e718(0x5a3)]('editflowvaredit'),..._0x319948,async(_0x4842bb,_0x36eb97)=>{const _0x398539=_0x29e718;let _0x3c4bbd=_0x4842bb[_0x398539(0x6b3)];y[_0x398539(0x2c1)]('request\x20received\x20in\x20editFlow'),y[_0x398539(0x2c1)]('request\x20body:\x20'),y[_0x398539(0x2c1)](_0x4842bb['body']);let _0x5f070a=await this[_0x398539(0x50f)]({'request':_0x4842bb,'schema':N,'ClassRef':M,'execute':_0x5aa9a9=>T[_0x398539(0x1df)](_0x5aa9a9,_0x3c4bbd)});_0x36eb97['status'](0xc8)[_0x398539(0x405)](_0x5f070a);})['post'](this[_0x29e718(0x5a3)](_0x29e718(0x41d)),..._0x319948,async(_0x10cf19,_0x55c688)=>{const _0x2d3e84=_0x29e718;let _0x341916=_0x10cf19[_0x2d3e84(0x6b3)];y[_0x2d3e84(0x2c1)](_0x2d3e84(0x56d)),y['verbose'](_0x2d3e84(0x7a9)),y[_0x2d3e84(0x2c1)](_0x10cf19[_0x2d3e84(0x6b3)]);let _0x59855a=await this[_0x2d3e84(0x50f)]({'request':_0x10cf19,'schema':N,'ClassRef':M,'execute':_0x422da5=>T[_0x2d3e84(0x38e)](_0x422da5,_0x341916)});_0x55c688['status'](0xc8)[_0x2d3e84(0x405)](_0x59855a);})[_0x29e718(0x13a)](this[_0x29e718(0x5a3)](_0x29e718(0x36e)),..._0x319948,async(_0x4af87e,_0x2e202c)=>{const _0x44be99=_0x29e718;let _0xb1199b=_0x4af87e[_0x44be99(0x6b3)];y[_0x44be99(0x2c1)](_0x44be99(0xea)),y[_0x44be99(0x2c1)](_0x44be99(0x7a9)),y[_0x44be99(0x2c1)](_0x4af87e[_0x44be99(0x6b3)]);let _0x382072=await this[_0x44be99(0x50f)]({'request':_0x4af87e,'schema':N,'ClassRef':M,'execute':_0x4bffe2=>T['editFlowCondition'](_0x4bffe2,_0xb1199b)});_0x2e202c[_0x44be99(0x16f)](0xc8)[_0x44be99(0x405)](_0x382072);})['post'](this[_0x29e718(0x5a3)]('editflowvariable'),..._0x319948,async(_0x30a967,_0x456e14)=>{const _0x425fd0=_0x29e718;let _0x50b0f9=_0x30a967['body'];y[_0x425fd0(0x2c1)]('request\x20received\x20in\x20editFlowvariable'),y['verbose'](_0x425fd0(0x7a9)),y[_0x425fd0(0x2c1)](_0x30a967[_0x425fd0(0x6b3)]);let _0xbc4b1d=await this[_0x425fd0(0x50f)]({'request':_0x30a967,'schema':N,'ClassRef':M,'execute':_0x4f5dcb=>T[_0x425fd0(0x4ae)](_0x4f5dcb,_0x50b0f9)});_0x456e14['status'](0xc8)[_0x425fd0(0x405)](_0xbc4b1d);})[_0x29e718(0x13a)](this[_0x29e718(0x5a3)](_0x29e718(0x15d)),..._0x319948,async(_0x5c87c4,_0x26af89)=>{const _0x4e9f9f=_0x29e718;let _0x405c37=_0x5c87c4[_0x4e9f9f(0x6b3)];y['verbose'](_0x4e9f9f(0x161)),y[_0x4e9f9f(0x2c1)](_0x4e9f9f(0x7a9)),y[_0x4e9f9f(0x2c1)](_0x5c87c4['body']);let _0x13629f=await this[_0x4e9f9f(0x50f)]({'request':_0x5c87c4,'schema':N,'ClassRef':M,'execute':_0x2cf5e8=>T[_0x4e9f9f(0x652)](_0x2cf5e8,_0x405c37)});_0x26af89['status'](0xc8)['json'](_0x13629f);})['delete'](this[_0x29e718(0x5a3)]('deleteflow'),..._0x319948,async(_0x577eb2,_0x2a1723)=>{const _0x15ee30=_0x29e718;let _0x4c14ba=_0x577eb2['body'];y[_0x15ee30(0x2c1)]('request\x20received\x20in\x20deleteFlow'),y[_0x15ee30(0x2c1)](_0x15ee30(0x7a9)),y[_0x15ee30(0x2c1)](_0x577eb2[_0x15ee30(0x6b3)]);let _0x3f673c=await this[_0x15ee30(0x50f)]({'request':_0x577eb2,'schema':N,'ClassRef':M,'execute':_0x28d622=>T['deleteFlow'](_0x28d622,_0x4c14ba)});_0x2a1723[_0x15ee30(0x16f)](0xc8)[_0x15ee30(0x405)](_0x3f673c);})[_0x29e718(0x20f)](this['routerPath']('allflows'),..._0x319948,async(_0x203689,_0x47eb60)=>{const _0x330daf=_0x29e718;y[_0x330daf(0x2c1)](_0x330daf(0x25b));let _0x2ca156=await this[_0x330daf(0x50f)]({'request':_0x203689,'schema':N,'ClassRef':M,'execute':_0x28e555=>T[_0x330daf(0x503)](_0x28e555)});_0x47eb60['status'](0xc8)[_0x330daf(0x405)](_0x2ca156);});}},vi=A(require(a0_0x46df1a(0x2ad))),se={};function Mi(_0x3bfdbf,_0x564b14,_0x101615,_0x43c1b6){se[_0x3bfdbf]||(se[_0x3bfdbf]={}),se[_0x3bfdbf][_0x564b14]={'id':_0x564b14,'response':_0x101615,'events':_0x43c1b6};}function Ci(_0x1486ef,_0x15b128){!se[_0x1486ef]||!se[_0x1486ef][_0x15b128]||delete se[_0x1486ef][_0x15b128];}function j(_0x224083,_0x31f6ee,_0x20ebb4){const _0x1e6491=a0_0x46df1a;if(!se[_0x224083])return;let _0x3d232f=_0x1e6491(0x6ff)+JSON[_0x1e6491(0x5cc)](_0x20ebb4)+'\x0a\x0a';Object[_0x1e6491(0x25f)](se[_0x224083])[_0x1e6491(0x14b)](_0x5aacee=>{const _0x1e9405=_0x1e6491;_0x5aacee['events'][_0x1e9405(0x3f1)](_0x31f6ee)&&_0x5aacee['response']['write'](_0x3d232f);});}function Ei(){const _0x1cd5ae=a0_0x46df1a;let _0x2a4eed={};for(let _0x5989b9 in se)_0x2a4eed[_0x5989b9]=Object['values'](se[_0x5989b9])[_0x1cd5ae(0x3f6)](_0x591edd=>({'id':_0x591edd['id'],'events':_0x591edd['events']}));return _0x2a4eed;}var Ni=require('uuid'),_s=require(a0_0x46df1a(0x39e)),Os=class{},_o=new _s['Schema']({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),xo=new _s[(a0_0x46df1a(0x603))]({'_id':{'type':String,'default':a0_0x46df1a(0x6c3)},'WebhookGlobal':{'type':_o},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Ee=R?.['model'](Os['name'],xo,'All_Instances_Config'),Do=vi[a0_0x46df1a(0x2fa)][a0_0x46df1a(0x473)](__dirname,a0_0x46df1a(0x5f4)),ke=(0x0,Pt[a0_0x46df1a(0x60e)])(),Po=b[a0_0x46df1a(0x20f)]('AUTHENTICATION')[a0_0x46df1a(0x26f)],re=[Ta,Oa,Da[Po]];ke[a0_0x46df1a(0xe1)](a0_0x46df1a(0x50d),Pt[a0_0x46df1a(0x2fa)][a0_0x46df1a(0x61c)](Do))['get'](a0_0x46df1a(0x17e),async(_0x504421,_0x20af45)=>{const _0x5507d5=a0_0x46df1a;console[_0x5507d5(0x307)](_0x5507d5(0x65a));let _0xc48df2=_0x504421[_0x5507d5(0x515)][_0x5507d5(0x2b1)],_0x20d95b=(_0x504421[_0x5507d5(0xc9)][_0x5507d5(0x337)]||'')[_0x5507d5(0x1ed)](','),_0x38cbea=(0x0,Ni['v4'])();console[_0x5507d5(0x307)](_0x5507d5(0x2a9),_0xc48df2),console[_0x5507d5(0x307)]('Subscribed\x20Events:',_0x20d95b);let _0x15996f=b['get']('AUTHENTICATION')[_0x5507d5(0x4e1)],_0x3c87ee=_0x504421[_0x5507d5(0xc9)][_0x5507d5(0x201)];if(console['log'](_0x5507d5(0x67a),_0x3c87ee),_0x15996f[_0x5507d5(0x57c)]!==_0x3c87ee){console['log'](_0x5507d5(0x123));try{let _0x4ca5ec=await we['auth'][_0x5507d5(0x336)](_0xc48df2);if(console[_0x5507d5(0x307)](_0x5507d5(0x27f),_0x4ca5ec),!_0x4ca5ec||_0x4ca5ec[_0x5507d5(0x201)]!==_0x3c87ee)return console[_0x5507d5(0x307)](_0x5507d5(0x188)),_0x20af45[_0x5507d5(0x16f)](0x191)[_0x5507d5(0x5c6)](_0x5507d5(0x2f7));}catch(_0x24a242){return console[_0x5507d5(0x2fb)](_0x5507d5(0x63c),_0x24a242),_0x20af45[_0x5507d5(0x16f)](0x191)[_0x5507d5(0x5c6)]('API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.');}}if(!await Oe(_0xc48df2))return _0x20af45[_0x5507d5(0x16f)](0x194)[_0x5507d5(0x5c6)](_0x5507d5(0x369));_0x20af45['setHeader'](_0x5507d5(0x340),_0x5507d5(0xaf)),_0x20af45[_0x5507d5(0x260)](_0x5507d5(0x1ff),'no-cache'),_0x20af45[_0x5507d5(0x260)](_0x5507d5(0x1e8),_0x5507d5(0x363)),_0x20af45['flushHeaders']();let _0x2a240a=_0x5507d5(0x6ff)+JSON[_0x5507d5(0x5cc)]({'info':_0x5507d5(0x3e6)})+'\x0a\x0a';_0x20af45['write'](_0x2a240a),Mi(_0xc48df2,_0x38cbea,_0x20af45,_0x20d95b),_0x504421['on'](_0x5507d5(0x60f),()=>{const _0x3c3a8b=_0x5507d5;console[_0x3c3a8b(0x307)](_0x3c3a8b(0x1af)+_0xc48df2),Ci(_0xc48df2,_0x38cbea);});}),ke[a0_0x46df1a(0x13a)]('/startFlow/:instance/:startID',async(_0x5e99ed,_0x5ca369)=>{const _0x19f4d3=a0_0x46df1a;console[_0x19f4d3(0x307)](_0x19f4d3(0xb8));let _0x416f2d=_0x5e99ed['params'][_0x19f4d3(0x2b1)],_0x3fca61=_0x5e99ed['params']['startID'],_0x828ad0=_0x5e99ed[_0x19f4d3(0xc9)][_0x19f4d3(0x75b)]||'',_0x1c9137=_0x5e99ed[_0x19f4d3(0x6b3)];console[_0x19f4d3(0x307)](_0x19f4d3(0x427),_0x416f2d),console[_0x19f4d3(0x307)]('StartID:',_0x3fca61),console[_0x19f4d3(0x307)](_0x19f4d3(0x5c4),_0x828ad0),console[_0x19f4d3(0x307)]('Request\x20Body:',_0x1c9137);try{if(!await Oe(_0x416f2d))return _0x5ca369['status'](0x194)[_0x19f4d3(0x5c6)]('Instância\x20não\x20encontrada.');let _0x476d75=await T[_0x19f4d3(0x73c)](_0x416f2d,_0x3fca61,_0x828ad0,_0x1c9137);_0x5ca369[_0x19f4d3(0x5c6)](_0x476d75);}catch(_0x242fa1){console[_0x19f4d3(0x2fb)](_0x242fa1),_0x5ca369[_0x19f4d3(0x16f)](0x1f4)[_0x19f4d3(0x5c6)](_0x19f4d3(0x27d));}}),ke[a0_0x46df1a(0x20f)](a0_0x46df1a(0x639),(_0x180de0,_0x3afeda)=>{const _0x4413af=a0_0x46df1a;let _0x4e8ed2=Ei();_0x3afeda[_0x4413af(0x405)](_0x4e8ed2);})[a0_0x46df1a(0x20f)]('/',(_0x3eeab2,_0x5d3908)=>{const _0x33c3fd=a0_0x46df1a;let _0xc339a=b[_0x33c3fd(0x20f)](_0x33c3fd(0x67d))[_0x33c3fd(0x14a)];if(_0xc339a){let _0x3ca3b2=encodeURIComponent(''+_0xc339a);_0x5d3908[_0x33c3fd(0x267)](_0x33c3fd(0x314)+_0x3ca3b2);return;}let _0x41b228=b[_0x33c3fd(0x20f)]('SSL_CONF'),_0x30ea2a=_0x41b228&&_0x41b228[_0x33c3fd(0x5fe)][_0x33c3fd(0x1ed)]('/')[0x4];if(_0x30ea2a){let _0x12f480=encodeURIComponent('https://'+_0x30ea2a);_0x5d3908[_0x33c3fd(0x267)](_0x33c3fd(0x314)+_0x12f480);}else _0x5d3908[_0x33c3fd(0x267)](_0x33c3fd(0x72c));})[a0_0x46df1a(0x43c)](a0_0x46df1a(0x2a8),...re,async(_0x452a3a,_0x4a1f80)=>{const _0x252c49=a0_0x46df1a;try{console['log'](_0x252c49(0xf9)),_0x4a1f80['status'](0xc8)[_0x252c49(0x405)]({'message':_0x252c49(0x1d2)}),_0x4a1f80['on'](_0x252c49(0x2e5),()=>process['exit'](0x0));}catch(_0x4a8927){console['error'](_0x252c49(0x3bd),_0x4a8927),_0x4a1f80[_0x252c49(0x16f)](0x1f4)[_0x252c49(0x405)]({'message':'Erro\x20ao\x20encerrar\x20a\x20API'});}})[a0_0x46df1a(0x43c)](a0_0x46df1a(0x3e5),...re,async(_0x5a793b,_0x505a4d)=>{const _0x5258a2=a0_0x46df1a;try{let _0x311970=_0x5a793b[_0x5258a2(0x6b3)];await Ee[_0x5258a2(0x4b3)]({},{'$set':_0x311970},{'upsert':!0x0});let _0x4c3945=await Ee[_0x5258a2(0x404)]();_0x505a4d[_0x5258a2(0x405)](_0x4c3945);}catch(_0x355353){_0x505a4d['status'](0x190)[_0x5258a2(0x5c6)](_0x355353['message']);}})[a0_0x46df1a(0x20f)](a0_0x46df1a(0x3e5),...re,async(_0x44b005,_0x3f08a3)=>{const _0x23efee=a0_0x46df1a;try{let _0x754336=await Ee[_0x23efee(0x404)]();if(!_0x754336)return _0x3f08a3[_0x23efee(0x405)]({});_0x3f08a3[_0x23efee(0x405)](_0x754336);}catch(_0x5ca4dc){_0x3f08a3[_0x23efee(0x16f)](0x1f4)['send'](_0x5ca4dc['message']);}})[a0_0x46df1a(0xe1)](a0_0x46df1a(0x299),new St(b,...re)['router'])[a0_0x46df1a(0xe1)](a0_0x46df1a(0x64c),new Ot(...re)[a0_0x46df1a(0x394)])['use'](a0_0x46df1a(0x627),new ut(...re)[a0_0x46df1a(0x394)])[a0_0x46df1a(0xe1)]('/group',new bt(...re)['router'])['use'](a0_0x46df1a(0x3a9),new xt(...re)['router'])[a0_0x46df1a(0xe1)]('/automate',new Dt(...re)['router']);var m=class{constructor(..._0x2af3de){const _0x28cea8=a0_0x46df1a;throw{'status':0x190,'error':_0x28cea8(0x2c5),'message':_0x2af3de[_0x28cea8(0x5e9)]>0x0?_0x2af3de:void 0x0};}},oe=class{constructor(..._0x10657b){const _0x3a95c2=a0_0x46df1a;throw{'status':0x191,'error':_0x3a95c2(0x463),'message':_0x10657b[_0x3a95c2(0x5e9)]>0x0?_0x10657b:void 0x0};}},Z=class{constructor(..._0x4b873e){const _0x80c9b8=a0_0x46df1a;throw{'status':0x193,'error':'Forbidden','message':_0x4b873e[_0x80c9b8(0x5e9)]>0x0?_0x4b873e:void 0x0};}},J=class{constructor(..._0x36b269){const _0x1ef252=a0_0x46df1a;throw{'status':0x194,'error':_0x1ef252(0x743),'message':_0x36b269[_0x1ef252(0x5e9)]>0x0?_0x36b269:void 0x0};}},x=class{constructor(..._0x930daa){const _0x109a15=a0_0x46df1a;throw{'status':0x1f4,'error':_0x109a15(0x77a),'message':_0x930daa['length']>0x0?_0x930daa:void 0x0};}},ye=require(a0_0x46df1a(0x5eb));async function xs(_0x39a3e2){const _0x385179=a0_0x46df1a;let _0x56b716=new $(xs['name']),_0x4c7e8d=R[_0x385179(0x615)](),_0x1ab9bb=_0x4c7e8d['db'](b[_0x385179(0x20f)]('DATABASE')[_0x385179(0x26e)][_0x385179(0xd5)]+_0x385179(0xad))[_0x385179(0x75d)](_0x39a3e2),_0x48da3e=async(_0x89fd50,_0x5f5877)=>{const _0x3a6c59=_0x385179;try{return await _0x4c7e8d['connect'](),await _0x1ab9bb[_0x3a6c59(0x760)]({'_id':_0x5f5877},JSON['parse'](JSON['stringify'](_0x89fd50,ye[_0x3a6c59(0x9c)]['replacer'])),{'upsert':!0x0});}catch{}},_0x3478c7=async _0x57347f=>{const _0x1dc613=_0x385179;try{await _0x4c7e8d['connect']();let _0x2b37fe=await _0x1ab9bb[_0x1dc613(0x404)]({'_id':_0x57347f}),_0x48407b=JSON[_0x1dc613(0x5cc)](_0x2b37fe);return JSON[_0x1dc613(0xab)](_0x48407b,ye[_0x1dc613(0x9c)][_0x1dc613(0x2bf)]);}catch{}},_0x534832=async _0x161688=>{const _0x370aae=_0x385179;try{return await _0x4c7e8d['connect'](),await _0x1ab9bb[_0x370aae(0x52e)]({'_id':_0x161688});}catch{}},_0x8c2442=await _0x3478c7('creds')||(0x0,ye['initAuthCreds'])();return{'state':{'creds':_0x8c2442,'keys':{'get':async(_0x189e4c,_0x3f164a)=>{const _0x466f37=_0x385179;let _0x5115e0={};return await Promise[_0x466f37(0x221)](_0x3f164a[_0x466f37(0x3f6)](async _0x20936a=>{const _0x3414d6=_0x466f37;let _0x1de6fc=await _0x3478c7(_0x189e4c+'-'+_0x20936a);_0x189e4c===_0x3414d6(0x3b6)&&_0x1de6fc&&(_0x1de6fc=ye['proto']['Message'][_0x3414d6(0x453)][_0x3414d6(0x60b)](_0x1de6fc)),_0x5115e0[_0x20936a]=_0x1de6fc;})),_0x5115e0;},'set':async _0x2b505f=>{const _0x484f6c=_0x385179;let _0x1fa364=[];for(let _0x58f220 in _0x2b505f)for(let _0x5061a5 in _0x2b505f[_0x58f220]){let _0x520977=_0x2b505f[_0x58f220][_0x5061a5],_0x4dd9fb=_0x58f220+'-'+_0x5061a5;_0x1fa364['push'](_0x520977?_0x48da3e(_0x520977,_0x4dd9fb):_0x534832(_0x4dd9fb));}await Promise[_0x484f6c(0x221)](_0x1fa364);}}},'saveCreds':async()=>_0x48da3e(_0x8c2442,_0x385179(0x596))};}var Fs=A(require(a0_0x46df1a(0x276))),Us=A(require('node-cache')),Ft=require(a0_0x46df1a(0x5eb)),$i=require(a0_0x46df1a(0x3e4)),Lt=require(a0_0x46df1a(0x5eb)),kt;function ko(_0x1e59a3){const _0x40349f=a0_0x46df1a;return kt||(kt=(0x0,$i[_0x40349f(0x110)])({'url':_0x1e59a3[_0x40349f(0x429)]}),kt[_0x40349f(0xb5)]()),kt;}var pe=class l{constructor(_0x2305ff,_0x4047f8){const _0x18ae3c=a0_0x46df1a;this[_0x18ae3c(0x58e)]=_0x2305ff,this['instanceName']=_0x4047f8,this[_0x18ae3c(0xed)]=new $(l['name']),this[_0x18ae3c(0x1f7)]=ko(_0x2305ff);}set[a0_0x46df1a(0x311)](_0x5b739f){const _0x259668=a0_0x46df1a;this[_0x259668(0x88)]=_0x5b739f;}async['instanceKeys'](){const _0x5ef53a=a0_0x46df1a;try{return await this[_0x5ef53a(0x1f7)]['sendCommand']([_0x5ef53a(0x794),this['redisEnv'][_0x5ef53a(0x6e1)]+':*']);}catch(_0x342378){this[_0x5ef53a(0xed)][_0x5ef53a(0x2fb)](_0x342378);}}async['writeData'](_0x337d9e,_0x30e111){const _0x1c5a21=a0_0x46df1a;try{let _0x2d8697=JSON[_0x1c5a21(0x5cc)](_0x30e111,Lt['BufferJSON'][_0x1c5a21(0x6e9)]);return await this[_0x1c5a21(0x1f7)][_0x1c5a21(0x41e)](this['redisEnv']['PREFIX_KEY']+':'+this[_0x1c5a21(0x88)],_0x337d9e,_0x2d8697);}catch(_0x2f74db){this[_0x1c5a21(0xed)][_0x1c5a21(0x2fb)](_0x2f74db);}}async[a0_0x46df1a(0x125)](){const _0x33bb88=a0_0x46df1a;try{let _0x204566=await this[_0x33bb88(0x1f7)][_0x33bb88(0x66c)](this[_0x33bb88(0x58e)][_0x33bb88(0x6e1)]+':'+this['instanceName']);if(_0x204566){for(let _0x517dab in _0x204566)Object['prototype'][_0x33bb88(0x2b4)]['call'](_0x204566,_0x517dab)&&(_0x204566[_0x517dab]=JSON[_0x33bb88(0xab)](_0x204566[_0x517dab],Lt[_0x33bb88(0x9c)][_0x33bb88(0x2bf)]));return _0x204566;}}catch(_0x26cbc4){this[_0x33bb88(0xed)][_0x33bb88(0x2fb)](_0x26cbc4);}}async[a0_0x46df1a(0x13d)](_0x4500ad){const _0x3cfb36=a0_0x46df1a;try{let _0x143048=await this[_0x3cfb36(0x1f7)]['hGet'](this[_0x3cfb36(0x58e)][_0x3cfb36(0x6e1)]+':'+this[_0x3cfb36(0x88)],_0x4500ad);if(_0x143048)return JSON['parse'](_0x143048,Lt['BufferJSON'][_0x3cfb36(0x2bf)]);}catch(_0x4aef83){this[_0x3cfb36(0xed)][_0x3cfb36(0x2fb)](_0x4aef83);}}async[a0_0x46df1a(0x2d4)](_0x10cd4d){const _0x35df21=a0_0x46df1a;try{return await this[_0x35df21(0x1f7)][_0x35df21(0x1fa)](this[_0x35df21(0x58e)][_0x35df21(0x6e1)]+':'+this[_0x35df21(0x88)],_0x10cd4d);}catch(_0x5591da){this[_0x35df21(0xed)]['error'](_0x5591da);}}async[a0_0x46df1a(0x509)](_0x2529fe){const _0x2846f4=a0_0x46df1a;try{return await this[_0x2846f4(0x1f7)][_0x2846f4(0x562)](_0x2529fe||this[_0x2846f4(0x58e)][_0x2846f4(0x6e1)]+':'+this[_0x2846f4(0x88)]);}catch(_0x3d1958){this[_0x2846f4(0xed)][_0x2846f4(0x2fb)](_0x3d1958);}}};async function Ds(_0x5386f9,_0x866efe){const _0x362446=a0_0x46df1a;let _0x363241=new $(Ds['name']),_0x2a2392=new pe(_0x5386f9,_0x866efe),_0x3381a4=async(_0x59ac82,_0x24e57a)=>{const _0x155f21=a0_0x2bf6;try{return await _0x2a2392[_0x155f21(0x4dd)](_0x24e57a,_0x59ac82);}catch(_0x54243a){return _0x363241[_0x155f21(0x2fb)]({'localError':_0x155f21(0x4dd),'error':_0x54243a});}},_0xf5d22c=async _0x3f741b=>{const _0x5e10a3=a0_0x2bf6;try{return await _0x2a2392[_0x5e10a3(0x13d)](_0x3f741b);}catch(_0x3bc701){_0x363241[_0x5e10a3(0x2fb)]({'readData':_0x5e10a3(0x4dd),'error':_0x3bc701});return;}},_0x60cdec=async _0x174685=>{const _0x481de1=a0_0x2bf6;try{return await _0x2a2392[_0x481de1(0x2d4)](_0x174685);}catch(_0x249cec){_0x363241[_0x481de1(0x2fb)]({'readData':'removeData','error':_0x249cec});}},_0x11a991=await _0xf5d22c(_0x362446(0x596))||(0x0,Ft['initAuthCreds'])();return{'state':{'creds':_0x11a991,'keys':{'get':async(_0x3c8aa5,_0xe5915f)=>{const _0xedfda9=_0x362446;let _0x63e1f0={};return await Promise['all'](_0xe5915f[_0xedfda9(0x3f6)](async _0x30b1aa=>{const _0x32b97e=_0xedfda9;let _0x1692d0=await _0xf5d22c(_0x3c8aa5+'-'+_0x30b1aa);_0x3c8aa5===_0x32b97e(0x3b6)&&_0x1692d0&&(_0x1692d0=Ft[_0x32b97e(0x571)][_0x32b97e(0x47e)][_0x32b97e(0x453)]['fromObject'](_0x1692d0)),_0x63e1f0[_0x30b1aa]=_0x1692d0;})),_0x63e1f0;},'set':async _0x27bbb7=>{const _0x3392e5=_0x362446;let _0x34a61c=[];for(let _0x10bfb7 in _0x27bbb7)for(let _0xd5619d in _0x27bbb7[_0x10bfb7]){let _0x36273b=_0x27bbb7[_0x10bfb7][_0xd5619d],_0x41d43f=_0x10bfb7+'-'+_0xd5619d;_0x34a61c['push'](_0x36273b?await _0x3381a4(_0x36273b,_0x41d43f):await _0x60cdec(_0x41d43f));}await Promise[_0x3392e5(0x221)](_0x34a61c);}}},'saveCreds':async()=>await _0x3381a4(_0x11a991,_0x362446(0x596))};}var L=A(require('fs')),Y=require(a0_0x46df1a(0x3ba)),qt=A(require(a0_0x46df1a(0x10a))),Vt=require(a0_0x46df1a(0x450)),Ri=require(a0_0x46df1a(0x4d0)),Ai=require('util'),Ii=A(require(a0_0x46df1a(0x220))),ve=class extends _{constructor(_0x152759,_0x2d8368,_0x42828c){const _0x334eb7=a0_0x46df1a;super(_0x2d8368),this[_0x334eb7(0x761)]=_0x152759,this[_0x334eb7(0x46a)]=_0x2d8368,this[_0x334eb7(0x767)]=_0x42828c;}async[a0_0x46df1a(0x29b)](_0x3b36c5,_0x590745){const _0x1bcd92=a0_0x46df1a;try{if(this['dbSettings'][_0x1bcd92(0x544)]){console[_0x1bcd92(0x307)]('Creating\x20or\x20updating\x20instance\x20with\x20id:\x20'+_0x590745+'\x20and\x20data:',_0x3b36c5);let _0x54d8d1=await this[_0x1bcd92(0x761)][_0x1bcd92(0x663)]({'_id':_0x590745},{'$set':_0x3b36c5},{'new':!0x0,'upsert':!0x0});return console[_0x1bcd92(0x307)](_0x1bcd92(0xb1),_0x54d8d1),_0x54d8d1;}}catch(_0x2a55de){throw console['error']('Erro\x20ao\x20atualizar\x20cacheInstance:',_0x2a55de),_0x2a55de;}return null;}async[a0_0x46df1a(0x52e)](_0x553a9d){const _0x40caa8=a0_0x46df1a;try{let _0x16ea65=I(_0x553a9d[_0x40caa8(0x629)]);return{'deletedCount':(await this[_0x40caa8(0x761)][_0x40caa8(0x52e)](_0x16ea65))[_0x40caa8(0x712)]};}catch(_0x2f03f0){return{'error':_0x2f03f0?.[_0x40caa8(0x49e)]()};}}async['findOne'](_0x377cfb){const _0x374ded=a0_0x46df1a;try{let _0x2e37b8=I(_0x377cfb[_0x374ded(0x629)]);return await this[_0x374ded(0x761)][_0x374ded(0x404)](_0x2e37b8)[_0x374ded(0x133)]();}catch{return null;}}},Ut=(0x0,Ai[a0_0x46df1a(0x1f0)])(Ri[a0_0x46df1a(0x1e2)]),Lo=b['get']('PROXY'),Ps=class{constructor(){const _0x5e2bac=a0_0x46df1a;this[_0x5e2bac(0xe9)]=new ve(ze,b),(!this[_0x5e2bac(0x5ed)]||!this[_0x5e2bac(0xec)])&&Lo&&this[_0x5e2bac(0x765)]()[_0x5e2bac(0x76d)](()=>{const _0x19a57d=_0x5e2bac;console['log']('IPv6\x20Prefix\x20detected:\x20'+this['ipv6Prefix']),console[_0x19a57d(0x307)](_0x19a57d(0x422)+this[_0x19a57d(0xec)]);})[_0x5e2bac(0x561)](_0xd92021=>{const _0x4aba42=_0x5e2bac;console[_0x4aba42(0x2fb)](_0x4aba42(0x24d)+_0xd92021['message']);});}async[a0_0x46df1a(0x765)](){const _0x1cbe35=a0_0x46df1a;try{let {stdout:_0x58b268}=await Ut(_0x1cbe35(0x494));console['log']('Network\x20interfaces\x20detected:\x20'+_0x58b268);let _0x41ccb5=_0x58b268[_0x1cbe35(0x1ed)]('\x0a')[_0x1cbe35(0x3f6)](_0x21ac94=>_0x21ac94[_0x1cbe35(0x1ed)]('\x20')[0x0])[_0x1cbe35(0x57a)](_0x48e6be=>!_0x48e6be['includes']('lo')&&!_0x48e6be['includes'](_0x1cbe35(0x5ce))&&!_0x48e6be[_0x1cbe35(0x3f1)](_0x1cbe35(0x3fe))&&!_0x48e6be['includes']('wl')&&!_0x48e6be['includes']('@'));if(console['log'](_0x1cbe35(0x735)+_0x41ccb5),_0x41ccb5[_0x1cbe35(0x5e9)]===0x0)throw new Error(_0x1cbe35(0x31b));this['networkInterface']=_0x41ccb5[0x0];let {stdout:_0x55b39b}=await Ut(_0x1cbe35(0x745)+this[_0x1cbe35(0xec)]);console['log'](_0x1cbe35(0x648)+_0x55b39b);let _0x270563=_0x55b39b[_0x1cbe35(0x1ed)]('\x0a')[_0x1cbe35(0x336)](_0x51243a=>_0x51243a[_0x1cbe35(0x3f1)](_0x1cbe35(0x491))&&_0x51243a[_0x1cbe35(0x3f1)](_0x1cbe35(0x7b3)));if(!_0x270563)throw new Error(_0x1cbe35(0x1a9));let _0x22278d=_0x270563['match'](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x22278d)throw new Error(_0x1cbe35(0x496));let [_0x3a730c,_0x34de88,_0xcdd513]=_0x22278d,_0x995c42=Math[_0x1cbe35(0x54d)](Number(_0xcdd513)/0x10),_0x12c436=Number(_0xcdd513)%0x10,_0x5a57c3=_0x34de88[_0x1cbe35(0x1ed)](':')[_0x1cbe35(0x16a)](0x0,_0x995c42)[_0x1cbe35(0x473)](':');if(_0x12c436>0x0){let _0x3c66e1=_0x34de88[_0x1cbe35(0x1ed)](':')[_0x995c42],_0x23f712=0xffff<<0x10-_0x12c436&0xffff,_0x199e8d=(parseInt(_0x3c66e1,0x10)&_0x23f712)['toString'](0x10)['padStart'](0x4,'0');_0x5a57c3+=':'+_0x199e8d;}this[_0x1cbe35(0x5ed)]=_0x5a57c3+':';}catch(_0xa8b34d){console[_0x1cbe35(0x2fb)](_0x1cbe35(0x3b8),_0xa8b34d);}}async[a0_0x46df1a(0x32f)](_0x500ee9){const _0x3ff11d=a0_0x46df1a;let _0x2aaddf=_0x3ff11d(0x52f)+_0x500ee9+_0x3ff11d(0x3f8)+this['networkInterface'];try{await Ut(_0x2aaddf),console[_0x3ff11d(0x307)](_0x3ff11d(0x357)+_0x500ee9);}catch(_0x2af92e){throw console[_0x3ff11d(0x2fb)]('Error\x20adding\x20IPv6\x20address:\x20'+_0x2af92e),new Error('Error\x20adding\x20IPv6\x20address:\x20'+_0x2af92e);}}async[a0_0x46df1a(0x2ff)](_0x184b55){const _0x553e9d=a0_0x46df1a;let _0x8bc4f5=_0x553e9d(0x3bf)+_0x184b55+_0x553e9d(0x3f8)+this[_0x553e9d(0xec)];try{await Ut(_0x8bc4f5),console[_0x553e9d(0x307)](_0x553e9d(0x1c8)+_0x184b55);}catch(_0x51a18a){throw console['error'](_0x553e9d(0x7b6)+_0x51a18a),new Error('Error\x20removing\x20IPv6\x20address:\x20'+_0x51a18a);}}[a0_0x46df1a(0x2dd)](){const _0x450c28=a0_0x46df1a;return _0x450c28(0x1c2)[_0x450c28(0x420)](/X/g,()=>_0x450c28(0x132)['charAt'](Math['floor'](Math[_0x450c28(0x259)]()*0x10)));}['ip6eui'](_0x3ba8bf,_0x45eff5){const _0x40aafe=a0_0x46df1a;let _0x4dca77=_0x45eff5[_0x40aafe(0x1ed)](':');return _0x4dca77[0x0]=(parseInt(_0x4dca77[0x0],0x10)^0x2)[_0x40aafe(0x49e)](0x10)[_0x40aafe(0x1c9)](0x2,'0'),''+_0x3ba8bf+_0x4dca77[0x0]+_0x4dca77[0x1]+':'+_0x4dca77[0x2]+_0x40aafe(0xbd)+_0x4dca77[0x3]+':'+_0x4dca77[0x4]+_0x4dca77[0x5];}[a0_0x46df1a(0x279)](){const _0x1a9582=a0_0x46df1a;let _0x7bbec7=this[_0x1a9582(0x5ed)];_0x7bbec7[_0x1a9582(0x6d6)](':')||(_0x7bbec7+=':');let _0x17e7e6=this[_0x1a9582(0x2dd)]();return this[_0x1a9582(0x59d)](_0x7bbec7,_0x17e7e6);}[a0_0x46df1a(0x42e)](_0x1fba70){const _0x557444=a0_0x46df1a;return new RegExp(_0x557444(0xfd))['test'](_0x1fba70);}async[a0_0x46df1a(0x773)](_0x5284b4){const _0x51fafc=a0_0x46df1a;let _0xd453=[{'url':_0x51fafc(0x718),'parse':_0x30f461=>_0x30f461['ip']},{'url':_0x51fafc(0x45b),'parse':_0x179a8c=>_0x179a8c['ip']},{'url':_0x51fafc(0x642),'parse':_0x4a73d1=>_0x4a73d1[_0x51fafc(0x7a1)]()},{'url':_0x51fafc(0x1c1),'parse':_0x342ba1=>_0x342ba1[_0x51fafc(0x7a1)]()}],_0x31fff9=_0xd453[Math[_0x51fafc(0x54d)](Math[_0x51fafc(0x259)]()*_0xd453[_0x51fafc(0x5e9)])];try{let _0x5180ae=await Ii[_0x51fafc(0x2fa)]['get'](_0x31fff9[_0x51fafc(0x53f)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x5284b4}}),_0x13ff5d=_0x31fff9[_0x51fafc(0xab)](_0x5180ae[_0x51fafc(0x72b)]);return _0x13ff5d[_0x51fafc(0x5cf)]()===_0x5284b4[_0x51fafc(0x5cf)]()?(console[_0x51fafc(0x307)](_0x51fafc(0x284)+_0x5284b4),!0x0):(console[_0x51fafc(0x2fb)](_0x51fafc(0x637)+_0x5284b4+',\x20received\x20'+_0x13ff5d),!0x1);}catch(_0x3ceaf7){return console['error'](_0x51fafc(0x5b1)+_0x31fff9['url']+':\x20'+_0x3ceaf7[_0x51fafc(0x64f)]),!0x1;}}async[a0_0x46df1a(0x421)](_0x738214,_0x95de5b){const _0x158ad5=a0_0x46df1a;if(!this['ipv6Prefix']||!this[_0x158ad5(0xec)])return console['error'](_0x158ad5(0x451)),null;let _0x48d5b3;do _0x48d5b3=this['generateRandomIPv6'](),console[_0x158ad5(0x307)]('Generated\x20IPv6:\x20'+_0x48d5b3);while(!await this[_0x158ad5(0x45a)](_0x48d5b3));await this[_0x158ad5(0x32f)](_0x48d5b3),console[_0x158ad5(0x307)](_0x158ad5(0x29e)+_0x48d5b3);let _0x330478={'_id':_0x738214+'-'+_0x95de5b,'ip':_0x48d5b3},_0xe925bf=await this[_0x158ad5(0xe9)][_0x158ad5(0x29b)](_0x330478,_0x330478[_0x158ad5(0x778)]);return console[_0x158ad5(0x307)](_0x158ad5(0x78c)+_0xe925bf),_0x48d5b3;}async['isValidAndUniqueIPv6'](_0x47b881){const _0x2291bd=a0_0x46df1a;return this[_0x2291bd(0x42e)](_0x47b881)?!await this[_0x2291bd(0xe9)]['findOne']({'where':{'ip':_0x47b881}}):!0x1;}async[a0_0x46df1a(0x6db)](_0x5d9ca5,_0x36c9c6){const _0x1330ab=a0_0x46df1a;let _0x2872d4=_0x5d9ca5+'-'+_0x36c9c6,_0x46052d=await this['cacheInstanceRepository']['findOne']({'where':{'_id':_0x2872d4}});_0x46052d&&_0x46052d['ip']&&(await this[_0x1330ab(0x2ff)](_0x46052d['ip']),await this['cacheInstanceRepository'][_0x1330ab(0x52e)]({'where':{'_id':_0x2872d4}}));}},Fo=new Ps(),he=Fo,js=a0_0x46df1a(0x7ae),ki,ge=null,Pa=null,Uo=0x3,jo=null,Ti=b['get'](a0_0x46df1a(0x72d))[a0_0x46df1a(0x4e1)][a0_0x46df1a(0x57c)],Oi=b['get'](a0_0x46df1a(0x29d));async function Jo(){const _0x408114=a0_0x46df1a;let _0x1b707d=await Ee['findOne']();ge=_0x1b707d?.[_0x408114(0x437)]??null,jo=_0x1b707d?.[_0x408114(0x16b)]??null,js=_0x1b707d?.['connectedClient']??_0x408114(0x7ae),ki=_0x1b707d?.[_0x408114(0x7af)]??X??'uazapi';}async function qo(){await Jo();}qo();var jt={},Ne=class l{constructor(_0xf2edc2,_0x54e007,_0x30a626){const _0x7c2ec9=a0_0x46df1a;this['configService']=_0xf2edc2,this[_0x7c2ec9(0x1ee)]=_0x54e007,this[_0x7c2ec9(0x91)]=_0x30a626,this['AutomateSystem']=null,this[_0x7c2ec9(0xed)]=new $(l[_0x7c2ec9(0x11d)]),this[_0x7c2ec9(0x2b1)]={},this[_0x7c2ec9(0x319)]={},this[_0x7c2ec9(0x97)]={'state':_0x7c2ec9(0x60f)},this[_0x7c2ec9(0x71c)]=(0x0,U[_0x7c2ec9(0x473)])(ce,_0x7c2ec9(0x5f4)),this[_0x7c2ec9(0x3b1)]=new Us[(_0x7c2ec9(0x2fa))](),this[_0x7c2ec9(0x632)]=new Us[(_0x7c2ec9(0x2fa))](),this[_0x7c2ec9(0x1a7)]=!0x1,this['webhookMap']={'status.instance':_0x7c2ec9(0x7a),'connection.update':'/wa-connection-update','qrcode.updated':'/wa-qrcode','messages.upsert':_0x7c2ec9(0x622),'send.message':_0x7c2ec9(0x622),'messages.update':'/wa-message-update','group.upsert':_0x7c2ec9(0x5fa),'group.update':'/wa-groups','group-participants.update':_0x7c2ec9(0x5fa),'messages.set':_0x7c2ec9(0x176),'contacts.set':'/wa-contacts','contacts.upsert':'/wa-contacts','contacts.update':_0x7c2ec9(0xa6),'presence.update':_0x7c2ec9(0x587),'chats.set':_0x7c2ec9(0x436),'chats.update':_0x7c2ec9(0x436),'chats.upsert':_0x7c2ec9(0x436),'chats.delete':_0x7c2ec9(0x436)},this[_0x7c2ec9(0x2b2)]=0x0,this['reconnectTimestamps']=[],this[_0x7c2ec9(0x795)]=0xea60,this['isRunning']=!0x1,this['chatHandle']={'chats.upsert':async(_0x49a670,_0x4e8297)=>{const _0x27d0c6=_0x7c2ec9;let _0x353d4a=[];for await(let _0x1e93fe of _0x49a670)_0x353d4a[_0x27d0c6(0x45f)]({'_id':_0x1e93fe['id'],'owner':this['instance']['wuid'],'group':_0x1e93fe['id'][_0x27d0c6(0x6d6)]('@g.us'),'name':_0x1e93fe['name']||_0x1e93fe['displayName']||null,'contactname':null,'lastmsg':_0x1e93fe[_0x27d0c6(0x2cf)]&&_0x1e93fe['conversationTimestamp'][_0x27d0c6(0x49e)]()[_0x27d0c6(0x5e9)]<0xd?_0x1e93fe[_0x27d0c6(0x2cf)]*0x3e8:_0x1e93fe[_0x27d0c6(0x2cf)]||null,'archived':_0x1e93fe[_0x27d0c6(0x721)]||!0x1,'unreadcount':_0x1e93fe[_0x27d0c6(0x711)]||0x0,'ephemeralExpiration':_0x1e93fe[_0x27d0c6(0x23c)]||0x0});this[_0x27d0c6(0x788)](_0x27d0c6(0x149),_0x353d4a);},'chats.update':async(_0x504431,_0x55cbb8)=>{const _0x19d389=_0x7c2ec9;for(let _0x403969 of _0x504431){let _0x4765dd={'_id':_0x403969['id'],'owner':this[_0x19d389(0x2b1)][_0x19d389(0x3f4)],'archived':_0x403969[_0x19d389(0x721)],'muteEndTime':_0x403969[_0x19d389(0x106)],'ephemeralExpiration':_0x403969[_0x19d389(0x23c)]},_0x579a3c=!0x1,_0xe9a8f0={};_0x4765dd[_0x19d389(0x721)]!=null&&(this['logger'][_0x19d389(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0x19d389(0x3f4)]+_0x19d389(0x178)+_0x403969['id']+_0x19d389(0x2ba)+_0x403969[_0x19d389(0x721)]),_0x579a3c=!0x0,_0xe9a8f0['archived']=_0x403969['archived']),_0x19d389(0x106)in _0x403969&&(this[_0x19d389(0xed)][_0x19d389(0x2c1)](this[_0x19d389(0x88)]+'\x20('+this['instance']['wuid']+'):\x20teve\x20mudanças\x20chat.muteEndTime:\x20'+_0x403969['id']+_0x19d389(0x2ba)+(_0x403969[_0x19d389(0x106)]??'0')),_0x579a3c=!0x0,_0xe9a8f0[_0x19d389(0x106)]=_0x403969['muteEndTime']??0x0),_0x19d389(0x23c)in _0x403969&&(this[_0x19d389(0xed)][_0x19d389(0x2c1)](this[_0x19d389(0x88)]+'\x20('+this['instance']['wuid']+_0x19d389(0x6da)+_0x403969['id']+_0x19d389(0x2ba)+(_0x403969['ephemeralExpiration']!==void 0x0?_0x403969[_0x19d389(0x23c)]:_0x19d389(0x1b1))),_0xe9a8f0['ephemeralExpiration']=_0x403969[_0x19d389(0x23c)]===null?0x0:_0x403969[_0x19d389(0x23c)],_0x579a3c=!0x0);let _0x4859cd;_0x579a3c&&(_0x4859cd=await this['repository'][_0x19d389(0x3d9)][_0x19d389(0x4b3)]({'where':{'_id':_0x403969['id']}},_0xe9a8f0,this['instance']['wuid'])),_0x4859cd&&j(this[_0x19d389(0x88)],'chats',{'chat':_0x4859cd});}},'chats.delete':async _0x3a0f86=>{const _0x353a3c=_0x7c2ec9;for(let _0x34b43e of _0x3a0f86)if(_0x34b43e[_0x353a3c(0x6d6)](_0x353a3c(0x2be))){await this[_0x353a3c(0x91)]['chat'][_0x353a3c(0x22c)]({'where':{'_id':_0x34b43e}},this[_0x353a3c(0x2b1)]['wuid']);let _0x47d3c9={'where':{'key':{'remoteJid':_0x34b43e}}};await this['repository'][_0x353a3c(0x64f)]['delete'](_0x47d3c9,this['instance']['wuid']);}else{await this[_0x353a3c(0x91)][_0x353a3c(0x3d9)][_0x353a3c(0x4b3)]({'where':{'_id':_0x34b43e}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x353a3c(0x2b1)][_0x353a3c(0x3f4)]);let _0x3b36e1={'where':{'key':{'remoteJid':_0x34b43e}}};await this[_0x353a3c(0x91)][_0x353a3c(0x64f)][_0x353a3c(0x22c)](_0x3b36e1,this[_0x353a3c(0x2b1)]['wuid']);}this[_0x353a3c(0x788)](_0x353a3c(0x245),[..._0x3a0f86]);}},this['contactHandle']={'contacts.upsert':async(_0x22fc19,_0x33d5cc)=>{const _0x5b0ec4=_0x7c2ec9;let _0x5e29b9=await this['repository']['contact'][_0x5b0ec4(0x336)]({'where':{}},this[_0x5b0ec4(0x2b1)][_0x5b0ec4(0x3f4)]),_0x60bcc3=[];for await(let _0x4e8cb2 of _0x22fc19)_0x5e29b9[_0x5b0ec4(0x336)](_0xecd5fd=>_0xecd5fd[_0x5b0ec4(0x778)]===_0x4e8cb2['id'])||_0x60bcc3[_0x5b0ec4(0x45f)]({'_id':_0x4e8cb2['id'],'pushName':_0x4e8cb2?.[_0x5b0ec4(0x11d)]||_0x4e8cb2?.[_0x5b0ec4(0x121)],'owner':this[_0x5b0ec4(0x2b1)][_0x5b0ec4(0x3f4)]});this['sendDataWebhook'](_0x5b0ec4(0x6a8),_0x60bcc3),await this[_0x5b0ec4(0x91)][_0x5b0ec4(0xd0)][_0x5b0ec4(0x2e0)](_0x60bcc3);},'contacts.update':async(_0x5c0326,_0x9de863)=>{const _0x48a84d=_0x7c2ec9;let _0x591966=[];for await(let _0x29a84c of _0x5c0326)_0x591966[_0x48a84d(0x45f)]({'_id':_0x29a84c['id'],'pushName':_0x29a84c?.['name']??_0x29a84c?.[_0x48a84d(0x121)],'owner':this[_0x48a84d(0x2b1)][_0x48a84d(0x3f4)]});this[_0x48a84d(0x788)]('contacts.update',_0x591966);}},this['messageHandle']={'messaging-history.set':async({messages:_0x2b7e72,chats:_0x5bca19,isLatest:_0x3710fd},_0x2d0ce2)=>{const _0x5ade57=_0x7c2ec9;if(_0x3710fd){let _0x3ca685=await Promise['all'](_0x5bca19['map'](async _0x2d7bfe=>({'_id':_0x2d7bfe['id'],'owner':this[_0x5ade57(0x2b1)][_0x5ade57(0x3f4)],'group':_0x2d7bfe['id']['endsWith'](_0x5ade57(0x2be)),'name':_0x2d7bfe[_0x5ade57(0x11d)]||_0x2d7bfe[_0x5ade57(0x407)]||_0x2d7bfe['username']||null,'contactname':null,'lastmsg':_0x2d7bfe['conversationTimestamp']&&_0x2d7bfe[_0x5ade57(0x2cf)][_0x5ade57(0x49e)]()[_0x5ade57(0x5e9)]<0xd?_0x2d7bfe['conversationTimestamp']*0x3e8:_0x2d7bfe[_0x5ade57(0x2cf)]||null,'archived':_0x2d7bfe[_0x5ade57(0x721)]||!0x1,'unreadcount':_0x2d7bfe['unreadCount']||0x0,'ephemeralExpiration':_0x2d7bfe[_0x5ade57(0x23c)]||0x0,'muteEndTime':_0x2d7bfe[_0x5ade57(0x106)]||0x0})));this[_0x5ade57(0x788)]('chats.set',_0x3ca685),await this['upsertChats'](_0x3ca685,_0x2d0ce2);}let _0x30c52c=[],_0x1229f9=Date[_0x5ade57(0x72)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x380488]of Object['entries'](_0x2b7e72)){if(_0x380488[_0x5ade57(0x64f)]?.[_0x5ade57(0x9e)]||_0x380488['message']?.[_0x5ade57(0x6de)]||!_0x380488[_0x5ade57(0x64f)]||_0x380488[_0x5ade57(0x754)][_0x5ade57(0x75b)]===_0x5ade57(0x4cc)||(Fs[_0x5ade57(0x2fa)][_0x5ade57(0xba)](_0x380488?.[_0x5ade57(0x71f)])&&(_0x380488['messageTimestamp']=_0x380488[_0x5ade57(0x71f)]?.[_0x5ade57(0x8f)]()),_0x380488['messageTimestamp']&&_0x380488[_0x5ade57(0x71f)][_0x5ade57(0x49e)]()[_0x5ade57(0x5e9)]<0xd&&(_0x380488['messageTimestamp']=_0x380488[_0x5ade57(0x71f)]*0x3e8),_0x380488['messageTimestamp']<_0x1229f9))continue;let _0x45c8f0=(0x0,w['normalizeMessageContent'])(_0x380488['message']),_0x2b8584=(0x0,w['getContentType'])(_0x45c8f0),{message_normalized:_0x3f93d1}=this[_0x5ade57(0x124)](_0x45c8f0,_0x2b8584,null);Object[_0x5ade57(0x794)](_0x3f93d1)['length']>0x0&&_0x30c52c[_0x5ade57(0x45f)]({'_id':_0x380488[_0x5ade57(0x754)]['id'],'key':_0x380488['key'],'pushName':_0x380488[_0x5ade57(0x242)],'participant':_0x380488['participant'],'message':_0x45c8f0,'messageType':_0x2b8584,'message_normalized':{'key':_0x380488['key'],'pushName':_0x380488[_0x5ade57(0x242)],'messageTimestamp':_0x380488[_0x5ade57(0x71f)],..._0x3f93d1},'messageTimestamp':_0x380488[_0x5ade57(0x71f)],'owner':this[_0x5ade57(0x2b1)][_0x5ade57(0x3f4)]});}_0x2d0ce2[_0x5ade57(0x544)]&&_0x30c52c[_0x5ade57(0x5e9)]>0x0&&(this[_0x5ade57(0xed)]['verbose'](this[_0x5ade57(0x88)]+'\x20('+this[_0x5ade57(0x2b1)][_0x5ade57(0x3f4)]+_0x5ade57(0x28e)+_0x30c52c[_0x5ade57(0x5e9)]+_0x5ade57(0x4c1)+this[_0x5ade57(0x2b1)][_0x5ade57(0x3f4)]+_0x5ade57(0x71b)),await this[_0x5ade57(0x91)][_0x5ade57(0x64f)][_0x5ade57(0x2e0)]([..._0x30c52c],this[_0x5ade57(0x2b1)][_0x5ade57(0x3f4)])),this[_0x5ade57(0x788)](_0x5ade57(0x4af),[..._0x30c52c]),_0x2b7e72=void 0x0;},'messages.upsert':async({messages:_0x408adf,type:_0x2f5ecc},_0x55c47e)=>{const _0x559d7f=_0x7c2ec9;for(let _0x31779b of _0x408adf){if(this['localWebhook']?.[_0x559d7f(0x291)]&&_0x31779b[_0x559d7f(0x754)][_0x559d7f(0x75b)][_0x559d7f(0x3f1)]('@g.us')){this[_0x559d7f(0xed)][_0x559d7f(0x2c1)](this[_0x559d7f(0x88)]+'\x20('+this['instance'][_0x559d7f(0x3f4)]+_0x559d7f(0x32d));return;}if(_0x31779b[_0x559d7f(0x2e8)]&&_0x31779b[_0x559d7f(0x2e8)][0x0]===_0x559d7f(0x61e)){console[_0x559d7f(0x2fb)](_0x559d7f(0x42d)),jt[_0x31779b[_0x559d7f(0x754)]['id']]=_0x31779b,this[_0x559d7f(0x112)](_0x31779b,0x0);return;}if(jt[_0x31779b[_0x559d7f(0x754)]['id']]&&(console[_0x559d7f(0x2fb)](_0x559d7f(0x51b)),delete jt[_0x31779b['key']['id']]),_0x2f5ecc!==_0x559d7f(0x6f0)||!_0x31779b?.[_0x559d7f(0x64f)]||_0x31779b[_0x559d7f(0x64f)]?.['protocolMessage']||_0x31779b[_0x559d7f(0x64f)][_0x559d7f(0x6de)]||_0x31779b['key'][_0x559d7f(0x75b)]===_0x559d7f(0x4cc))return;let _0x4a42cf=null,_0x3703a3=null;try{_0x4a42cf=await this[_0x559d7f(0x469)](_0x31779b),_0x3703a3=_0x4a42cf?_0x4a42cf[_0x559d7f(0x473)](','):null;}catch(_0x36c11d){this[_0x559d7f(0xed)][_0x559d7f(0x2c1)](this[_0x559d7f(0x88)]+'\x20('+this[_0x559d7f(0x2b1)]['wuid']+'):\x20'+(_0x36c11d instanceof Error?_0x36c11d[_0x559d7f(0x64f)]:JSON[_0x559d7f(0x5cc)](_0x36c11d,null,0x2))),_0x3703a3=_0x559d7f(0x6d3);}this[_0x559d7f(0x1f7)][_0x559d7f(0x81)](_0x559d7f(0x225)),Fs[_0x559d7f(0x2fa)]['isLong'](_0x31779b[_0x559d7f(0x71f)])&&(_0x31779b['messageTimestamp']=_0x31779b[_0x559d7f(0x71f)]?.['toNumber']()),_0x31779b[_0x559d7f(0x71f)]&&_0x31779b['messageTimestamp'][_0x559d7f(0x49e)]()[_0x559d7f(0x5e9)]<0xd&&(_0x31779b['messageTimestamp']=_0x31779b[_0x559d7f(0x71f)]*0x3e8);let _0x4b88a8=_0x31779b[_0x559d7f(0x64f)],_0x519231=(0x0,w['normalizeMessageContent'])(_0x4b88a8),_0x32566d=(0x0,w[_0x559d7f(0x725)])(_0x519231),{messageContent:_0x3bd627,message_normalized:_0x2bf122}=this['normalizeMessage'](_0x519231,_0x32566d,_0x3703a3);_0x32566d===_0x559d7f(0x9e)&&_0x3bd627?.[_0x559d7f(0x694)]&&(_0x32566d=_0x559d7f(0x694));let _0x19773a,_0x1c5cd9=_0x31779b[_0x559d7f(0x754)][_0x559d7f(0x75b)][_0x559d7f(0x6d6)](_0x559d7f(0x2be));if(_0x31779b[_0x559d7f(0x754)]['fromMe'])_0x19773a=this[_0x559d7f(0x2b1)][_0x559d7f(0x4c0)];else{let _0x384bf5=_0x1c5cd9?_0x31779b[_0x559d7f(0x754)]['participant']:_0x31779b[_0x559d7f(0x754)][_0x559d7f(0x75b)];_0x19773a=(await this[_0x559d7f(0x67c)](_0x384bf5,_0x31779b[_0x559d7f(0x242)],!0x1))[_0x559d7f(0x248)]['pictureUrl'];}let _0x20b503={'_id':_0x31779b[_0x559d7f(0x754)]['id'],'key':_0x31779b[_0x559d7f(0x754)],'isGroup':_0x1c5cd9,'profilePictureUrl':_0x19773a,'pushName':_0x31779b[_0x559d7f(0x242)],'message':_0x519231,'messageType':_0x32566d,'message_normalized':{'key':_0x31779b['key'],'pushName':_0x31779b[_0x559d7f(0x242)],'messageTimestamp':_0x31779b[_0x559d7f(0x71f)],'source':(0x0,w[_0x559d7f(0x4d3)])(_0x31779b['key']['id']),..._0x2bf122},'messageTimestamp':_0x31779b[_0x559d7f(0x71f)],'owner':this[_0x559d7f(0x2b1)]['wuid'],'source':(0x0,w[_0x559d7f(0x4d3)])(_0x31779b[_0x559d7f(0x754)]['id']),'expiration':_0x3bd627?.[_0x559d7f(0x769)]?.[_0x559d7f(0x6dd)]||0x0};_0x3bd627||(this[_0x559d7f(0xed)]['error'](_0x559d7f(0x2ab)),this[_0x559d7f(0xed)][_0x559d7f(0x2fb)](_0x20b503)),this[_0x559d7f(0xed)]['log'](this['instanceName']+'\x20('+this[_0x559d7f(0x2b1)][_0x559d7f(0x3f4)]+_0x559d7f(0x28e)+(_0x20b503[_0x559d7f(0x754)]?.['fromMe']?_0x559d7f(0x270):_0x559d7f(0x435))+'\x20['+_0x20b503['key']?.[_0x559d7f(0x75b)][_0x559d7f(0x420)](_0x559d7f(0x32b),'')+_0x559d7f(0x79d)+_0x20b503['messageType']+')'),_0x20b503[_0x559d7f(0x4ac)]?.[_0x559d7f(0xd1)]&&this[_0x559d7f(0xed)][_0x559d7f(0x307)](_0x31779b[_0x559d7f(0x754)]['id']+':\x20'+_0x20b503[_0x559d7f(0x4ac)]?.['text']),await this['repository'][_0x559d7f(0x64f)][_0x559d7f(0x2e0)]([_0x20b503],this[_0x559d7f(0x2b1)]['wuid']),this[_0x559d7f(0x788)](_0x559d7f(0xa8),_0x20b503),j(this[_0x559d7f(0x88)],_0x559d7f(0x229),{'message':_0x20b503}),_0x31779b[_0x559d7f(0x754)]['remoteJid']!==_0x559d7f(0x4cc)&&await this['updateChatWithMessage'](_0x55c47e,_0x20b503,_0x559d7f(0x34c));}},'messages.update':async(_0x23bfcd,_0x3bfb9e)=>{const _0x5b84e0=_0x7c2ec9;let _0x5a3023={0x0:_0x5b84e0(0x145),0x1:_0x5b84e0(0xdf),0x2:_0x5b84e0(0x579),0x3:_0x5b84e0(0x3b7),0x4:_0x5b84e0(0x6fd),0x5:_0x5b84e0(0x443)};for await(let {key:_0x431163,update:_0x3472d5}of _0x23bfcd){if(this[_0x5b84e0(0x319)]?.[_0x5b84e0(0x291)]&&_0x431163[_0x5b84e0(0x75b)][_0x5b84e0(0x3f1)](_0x5b84e0(0x2be))){this[_0x5b84e0(0xed)][_0x5b84e0(0x2c1)](this[_0x5b84e0(0x88)]+'\x20('+this[_0x5b84e0(0x2b1)][_0x5b84e0(0x3f4)]+_0x5b84e0(0x5a4));return;}if(_0x431163[_0x5b84e0(0x75b)]!==_0x5b84e0(0x4cc)){let _0x1da124=Date[_0x5b84e0(0x72)](),_0x514755;_0x3472d5[_0x5b84e0(0x64f)]===null&&_0x3472d5[_0x5b84e0(0x16f)]===void 0x0?_0x514755='DELETED':_0x514755=_0x5a3023[_0x3472d5['status']];let _0x11f68b=_0x431163['remoteJid'][_0x5b84e0(0x420)](/:\d{1,2}@/g,'@'),_0x13396a={..._0x431163,'remoteJid':_0x11f68b,'status':_0x514755,'datetime':_0x1da124,'owner':this[_0x5b84e0(0x2b1)][_0x5b84e0(0x3f4)]};this[_0x5b84e0(0x788)](_0x5b84e0(0x142),_0x13396a),await this[_0x5b84e0(0x22e)](_0x431163,_0x13396a);}}},'labels.association':async({type:_0x1a43c4,association:_0x5d7b9d})=>{const _0x4a7b3f=_0x7c2ec9;if(_0x5d7b9d[_0x4a7b3f(0x1c0)]===_0x4a7b3f(0x581)){let _0x417ba8,_0x2ac598=0x0;for(;!_0x417ba8&&_0x2ac598<this[_0x4a7b3f(0x37b)];)_0x417ba8=await this[_0x4a7b3f(0x91)]['chat'][_0x4a7b3f(0x404)]({'where':{'_id':_0x5d7b9d[_0x4a7b3f(0x59f)]}},this['instance'][_0x4a7b3f(0x3f4)]),_0x417ba8||(_0x2ac598++,this[_0x4a7b3f(0xed)][_0x4a7b3f(0x459)](this[_0x4a7b3f(0x88)]+'\x20('+this[_0x4a7b3f(0x2b1)]['wuid']+_0x4a7b3f(0x48b)+_0x5d7b9d['chatId']+_0x4a7b3f(0x750)+this[_0x4a7b3f(0x134)]+_0x4a7b3f(0x8e)+_0x2ac598+'/'+this[_0x4a7b3f(0x37b)]+')'),await this[_0x4a7b3f(0x6ed)](this[_0x4a7b3f(0x134)]));if(!_0x417ba8){this['logger']['error'](_0x4a7b3f(0x40b)+_0x5d7b9d['chatId']+_0x4a7b3f(0x7b2)+this[_0x4a7b3f(0x37b)]+_0x4a7b3f(0x17d));return;}switch(_0x1a43c4){case _0x4a7b3f(0x722):console[_0x4a7b3f(0x307)](_0x5d7b9d),await this[_0x4a7b3f(0x91)][_0x4a7b3f(0x3d9)]['updateOne']({'where':{'_id':_0x5d7b9d[_0x4a7b3f(0x59f)]}},{'leadInfo.etiquetas':_0x5d7b9d[_0x4a7b3f(0x69f)]},this['instance']['wuid'],void 0x0,'$addToSet');break;case _0x4a7b3f(0x26d):console[_0x4a7b3f(0x307)](_0x5d7b9d),await this[_0x4a7b3f(0x91)]['chat'][_0x4a7b3f(0x4b3)]({'where':{'_id':_0x5d7b9d[_0x4a7b3f(0x59f)]}},{'leadInfo.etiquetas':_0x5d7b9d['labelId']},this[_0x4a7b3f(0x2b1)][_0x4a7b3f(0x3f4)],void 0x0,_0x4a7b3f(0x5a5));break;default:this[_0x4a7b3f(0xed)][_0x4a7b3f(0x2fb)](_0x4a7b3f(0xc6)+_0x1a43c4+']');}}},'labels.edit':async _0x4c95dd=>{const _0x27b449=_0x7c2ec9;if(!_0x4c95dd||!_0x4c95dd['id']){this['logger'][_0x27b449(0x2fb)](_0x27b449(0x52c));return;}if(!_0x4c95dd[_0x27b449(0x5ef)]){let _0x461520=[_0x27b449(0x23b),'#64c4ff',_0x27b449(0x55f),'#dfaef0',_0x27b449(0x4c8),'#56ccb4',_0x27b449(0x601),_0x27b449(0x216),_0x27b449(0x238),_0x27b449(0x12c),_0x27b449(0x64e),_0x27b449(0x327),'#92ceac','#f64847','#00a1f2',_0x27b449(0x4fc),_0x27b449(0x634),_0x27b449(0x6f3),'#9ba6ff','#9568cf'],_0x2d1331;typeof _0x4c95dd['color']==_0x27b449(0x731)&&_0x4c95dd['color']>=0x0&&_0x4c95dd[_0x27b449(0x6e7)]<_0x461520[_0x27b449(0x5e9)]?_0x2d1331=_0x461520[_0x4c95dd[_0x27b449(0x6e7)]]:(this[_0x27b449(0xed)][_0x27b449(0x2fb)]('Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20'+_0x4c95dd[_0x27b449(0x6e7)]),_0x2d1331='#000000');let _0x13d242={'_id':_0x4c95dd['id'],'colorHex':_0x2d1331,'color':_0x4c95dd?.[_0x27b449(0x6e7)],'name':_0x4c95dd?.[_0x27b449(0x11d)],'owner':this[_0x27b449(0x2b1)]['wuid']};await this[_0x27b449(0x91)]['label'][_0x27b449(0x4b3)]({'where':{'_id':_0x4c95dd['id']}},_0x13d242,this['instance'][_0x27b449(0x3f4)]),this[_0x27b449(0xed)][_0x27b449(0x459)](this[_0x27b449(0x88)]+'\x20('+this[_0x27b449(0x2b1)]['wuid']+_0x27b449(0x3cd)+_0x4c95dd);}_0x4c95dd[_0x27b449(0x5ef)]&&(await this[_0x27b449(0x91)][_0x27b449(0x1ae)]['delete']({'where':{'_id':_0x4c95dd['id']}},this[_0x27b449(0x2b1)][_0x27b449(0x3f4)]),this[_0x27b449(0xed)][_0x27b449(0x459)]('Rótulo\x20deletado:\x27,\x20'+_0x4c95dd['id']));}},this[_0x7c2ec9(0x3e1)]={'groups.upsert':async _0x237798=>{const _0x430fb5=_0x7c2ec9;this[_0x430fb5(0x319)]?.['groups_ignore']||this['sendDataWebhook']('groups.upsert',_0x237798);for(let _0x4e1c50 of _0x237798)await this[_0x430fb5(0x48e)](_0x4e1c50);},'groups.update':async _0x315bae=>{const _0x284edb=_0x7c2ec9;this['localWebhook']?.['groups_ignore']||this[_0x284edb(0x788)](_0x284edb(0x2da),_0x315bae);for(let _0xe97710 of _0x315bae)await this['updateGroupWebhook'](_0xe97710);},'group-participants.update':async _0x105e3c=>{const _0x4b68c5=_0x7c2ec9;this[_0x4b68c5(0x319)]?.[_0x4b68c5(0x291)]||this[_0x4b68c5(0x788)]('group-participants.update',_0x105e3c),await this['updateGroupParticipantsWebhook'](_0x105e3c);}},this[_0x7c2ec9(0x37b)]=0x5,this[_0x7c2ec9(0x134)]=0x1388,this['processPollUpdateMessage']=async _0x4be69c=>{const _0x557378=_0x7c2ec9;if(_0x4be69c[_0x557378(0x64f)]?.[_0x557378(0x244)]){let _0xcd4a45=await this['getMessage'](_0x4be69c['message'][_0x557378(0x244)][_0x557378(0x415)],!0x0);if(_0xcd4a45){let _0x4bd6c4=_0xcd4a45[_0x557378(0x754)]['fromMe']?this[_0x557378(0x2b1)]['wuid']+_0x557378(0x32b):_0xcd4a45[_0x557378(0x754)][_0x557378(0x482)]||_0xcd4a45[_0x557378(0x754)][_0x557378(0x75b)],_0x40f345=_0xcd4a45['key']['id'],_0x17c2d3=_0xcd4a45[_0x557378(0x64f)],_0x50c406=Buffer[_0x557378(0x13c)](_0x17c2d3['messageContextInfo'][_0x557378(0x46c)][_0x557378(0x49e)](_0x557378(0x5b0)),_0x557378(0x5b0)),_0x5e956e=(0x0,w[_0x557378(0xfb)])(_0x4be69c[_0x557378(0x64f)][_0x557378(0x244)][_0x557378(0x249)],{'pollCreatorJid':_0x4bd6c4,'pollMsgId':_0x40f345,'pollEncKey':_0x50c406,'voterJid':_0x4be69c['key'][_0x557378(0x525)]?this[_0x557378(0x2b1)][_0x557378(0x3f4)]+_0x557378(0x32b):_0x4be69c[_0x557378(0x754)][_0x557378(0x75b)][_0x557378(0x6d6)](_0x557378(0x505))?_0x4be69c[_0x557378(0x754)]['participant']:_0x4be69c[_0x557378(0x754)]['remoteJid']}),_0x4edef6=[],_0x59682f=_0x5e956e['selectedOptions']['map'](_0x2fe259=>Buffer[_0x557378(0x13c)](_0x2fe259)[_0x557378(0x49e)]('hex'));for(let {optionName:_0x45a0b1}of _0x17c2d3[_0x557378(0x702)]?.[_0x557378(0x6b6)]||_0x17c2d3[_0x557378(0x4bb)]?.[_0x557378(0x6b6)]||_0x17c2d3[_0x557378(0x6eb)]?.[_0x557378(0x6b6)])_0x59682f['indexOf']((0x0,w['sha256'])(Buffer['from'](_0x45a0b1))[_0x557378(0x49e)](_0x557378(0x5b0)))>-0x1&&_0x4edef6[_0x557378(0x45f)](_0x45a0b1);return _0x4edef6;}}return null;},this[_0x7c2ec9(0x124)]=(_0x4d2fd2,_0x439fe2,_0x57f7b8)=>{const _0x32f8d8=_0x7c2ec9;try{let _0x29eb51=_0x4d2fd2?(0x0,w[_0x32f8d8(0x4ed)])(_0x4d2fd2)[_0x439fe2]:void 0x0,_0xb48d40={},_0x196e03=null,_0x1411b0=null,_0x18eb09=null;_0x439fe2==='protocolMessage'&&_0x29eb51?.['editedMessage']&&(_0x439fe2=(0x0,w[_0x32f8d8(0x725)])(_0x29eb51['editedMessage']),_0x196e03=_0x4d2fd2['protocolMessage'][_0x32f8d8(0x754)]['id'],_0x29eb51=_0x4d2fd2[_0x32f8d8(0x9e)]['editedMessage'][_0x439fe2]),_0x4d2fd2[_0x439fe2]?.[_0x32f8d8(0x769)]?.['stanzaId']&&_0x4d2fd2[_0x439fe2]?.[_0x32f8d8(0x769)]?.[_0x32f8d8(0x1b5)]&&(_0x1411b0=_0x4d2fd2[_0x439fe2]['contextInfo']['stanzaId']),_0x4d2fd2['reactionMessage']&&(_0x18eb09=_0x4d2fd2[_0x32f8d8(0x1e5)]['key']['id']);let _0x74e6d;if(_0x29eb51&&typeof _0x29eb51==_0x32f8d8(0xde)&&_0x32f8d8(0x415)in _0x29eb51&&({pollCreationMessageKey:_0x74e6d}=_0x29eb51),_0x439fe2==='pollCreationMessage'||_0x439fe2===_0x32f8d8(0x6eb)||_0x439fe2===_0x32f8d8(0x4bb)){let _0x471006=_0x29eb51[_0x32f8d8(0x6b6)][_0x32f8d8(0x3f6)](_0x24df29=>_0x24df29[_0x32f8d8(0x1aa)])[_0x32f8d8(0x473)]('|');_0xb48d40[_0x32f8d8(0x5ae)]=_0x471006;}let _0x16e14b='';if(_0x29eb51&&(_0x16e14b+=_0x29eb51[_0x32f8d8(0x11d)]?_0x29eb51[_0x32f8d8(0x11d)]:'',_0x16e14b+=_0x29eb51[_0x32f8d8(0x3eb)]?'\x20'+_0x29eb51['caption']:'',_0x16e14b+=_0x29eb51['conversation']?'\x20'+_0x29eb51[_0x32f8d8(0x2b3)]:'',_0x16e14b+=_0x29eb51['displayName']?'\x20'+_0x29eb51[_0x32f8d8(0x407)]:''),_0x439fe2===_0x32f8d8(0x324)){_0x16e14b=(_0x29eb51[_0x32f8d8(0x73b)]||'')+'\x0a'+(_0x29eb51['description']||'')+'\x0a'+(_0x29eb51[_0x32f8d8(0x204)]||'');let _0x25762f=this[_0x32f8d8(0x563)](_0x29eb51[_0x32f8d8(0x76a)]);_0xb48d40[_0x32f8d8(0x5ae)]=_0x25762f;}if(_0x439fe2===_0x32f8d8(0x62b)&&(_0x57f7b8=_0x29eb51[_0x32f8d8(0x73b)]),_0x29eb51&&_0x29eb51['vcard']){let _0x9707b6=this['formatVCard'](JSON[_0x32f8d8(0x5cc)](_0x29eb51[_0x32f8d8(0x4b6)],null,0x2));_0x16e14b=_0x16e14b+'\x0a'+_0x9707b6;}if(_0x29eb51){let {sections:_0x5ee45a,listType:_0x5608e3,displayName:_0x3e862d,vcard:_0x3b4e4d,contactVcard:_0x56f49f,name:_0xcb3cfd,caption:_0x1e446b,conversation:_0x971d74,pollCreationMessageKey:_0x5d598a,footerText:_0x2a329d,contentText:_0x5a1aaa,pageCount:_0x317c93,headerType:_0x2214f4,isAvatar:_0x232965,isAnimated:_0x1468a9,fallbackLc:_0x5eb37d,fallbackLg:_0x10a81a,namespace:_0x23ac4e,elementName:_0x4b401e,localizableParams:_0x27fd63,viewOnce:_0x278767,height:_0x234f8d,width:_0x49d667,key:_0x4c09a4,firstScanLength:_0x20371c,firstScanSidecar:_0xa60082,gifPlayback:_0x4e6f94,gifAttribution:_0x505bea,midQualityFileSha256:_0xa1a3bd,scansSidecar:_0x55f06a,streamingSidecar:_0x59aa98,thumbnailHeight:_0x4a624f,thumbnailWidth:_0x5d5b67,thumbnailEncSha256:_0x171d67,thumbnailDirectPath:_0x304453,canonicalUrl:_0x24e826,matchedText:_0x32257c,previewType:_0x2028e5,thumbnailSha256:_0x4b95ef,deviceListMetadataVersion:_0x43a6b3,inviteLinkGroupTypeV2:_0x3d306e,interactiveAnnotations:_0x2a9212,scanLengths:_0x20b22b,jpegThumbnail:_0x43c992,url:_0x5d1f6d,mediaKeyTimestamp:_0x3999c4,waveform:_0x63b6a3,stickerSentTs:_0x19cf2b,firstFrameLength:_0x2d088c,fileEncSha256:_0x37e489,contextInfo:_0x28ac42,firstFrameSidecar:_0x5627b6,directPath:_0x118032,fileSha256:_0x4b15e8,mediaKey:_0x1069dd,senderTimestampMs:_0x2f5a3b,..._0x39f81c}=_0x29eb51;(_0x439fe2==='listMessage'||_0x439fe2===_0x32f8d8(0x62b))&&(delete _0x39f81c[_0x32f8d8(0x73b)],delete _0x39f81c[_0x32f8d8(0x6d)]),typeof _0x29eb51==_0x32f8d8(0x691)?_0xb48d40={'text':_0x29eb51,'type':_0x439fe2||_0x32f8d8(0x2b3),..._0x196e03&&{'edited':_0x196e03},..._0x1411b0&&{'quoted':_0x1411b0},..._0x18eb09&&{'reaction':_0x18eb09}}:_0xb48d40={'text':_0x16e14b,..._0x39f81c,..._0x439fe2==='pollUpdateMessage'?{'poll_id':_0x29eb51['pollCreationMessageKey']['id'],'quoted':_0x29eb51[_0x32f8d8(0x415)]['id'],'vote':_0x57f7b8}:{},..._0x439fe2===_0x32f8d8(0x62b)?{'vote':_0x57f7b8}:{},'type':_0x439fe2,..._0x196e03&&{'edited':_0x196e03},..._0x1411b0&&{'quoted':_0x1411b0},..._0x18eb09&&{'reaction':_0x18eb09},...(_0x439fe2===_0x32f8d8(0x702)||_0x439fe2==='pollCreationMessageV2'||_0x439fe2===_0x32f8d8(0x4bb)||_0x439fe2===_0x32f8d8(0x324))&&{'convertedOptions':_0xb48d40[_0x32f8d8(0x5ae)]}};}return{'messageType':_0x439fe2,'messageContent':_0x29eb51,'message_normalized':_0xb48d40};}catch(_0x3e2617){return this[_0x32f8d8(0xed)]['error'](_0x32f8d8(0x6d4)+_0x3e2617),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},(this[_0x7c2ec9(0x4ba)](),this[_0x7c2ec9(0x2b1)][_0x7c2ec9(0x12a)]={'count':0x0},this[_0x7c2ec9(0x2b1)][_0x7c2ec9(0x277)]={'isConnected':!0x1,'delayMessage':null,'processingGroup_id':null,'lastSend':0x0,'timeout':null,'lastMessage_id':null});}set[a0_0x46df1a(0x88)](_0x18b30a){const _0x708d28=a0_0x46df1a;if(!_0x18b30a){this['instance']['name']=(0x0,_i['v4'])();return;}this['instance'][_0x708d28(0x11d)]=_0x18b30a,this['sendDataWebhook'](_0x708d28(0x130),{'instance':this[_0x708d28(0x2b1)][_0x708d28(0x11d)],'status':_0x708d28(0x757)});}get['instanceName'](){const _0x53379c=a0_0x46df1a;return this['instance'][_0x53379c(0x11d)];}get[a0_0x46df1a(0x3f4)](){const _0x447564=a0_0x46df1a;return this[_0x447564(0x2b1)][_0x447564(0x3f4)];}async['getProfileName'](){const _0xd4321b=a0_0x46df1a;let _0x17fca6=this[_0xd4321b(0x1f7)][_0xd4321b(0x576)]?.[_0xd4321b(0x11d)]??this[_0xd4321b(0x1f7)][_0xd4321b(0x576)]?.[_0xd4321b(0x121)];if(!_0x17fca6){if(this[_0xd4321b(0x46a)][_0xd4321b(0x20f)](_0xd4321b(0x723))[_0xd4321b(0x544)]){let _0x4c00e7=await R[_0xd4321b(0x615)]()['db'](this['configService']['get']('DATABASE')['CONNECTION'][_0xd4321b(0xd5)]+'-instances')[_0xd4321b(0x75d)](this[_0xd4321b(0x88)])[_0xd4321b(0x404)]({'_id':_0xd4321b(0x596)});if(_0x4c00e7){let _0xa9db75=JSON['parse'](JSON[_0xd4321b(0x5cc)](_0x4c00e7),w['BufferJSON'][_0xd4321b(0x2bf)]);_0x17fca6=_0xa9db75['me']?.[_0xd4321b(0x11d)]||_0xa9db75['me']?.[_0xd4321b(0x121)];}}else{if((0x0,Le[_0xd4321b(0x481)])((0x0,U[_0xd4321b(0x473)])(Se,this[_0xd4321b(0x88)],_0xd4321b(0x203)))){let _0x3c2c90=JSON[_0xd4321b(0xab)]((0x0,Le[_0xd4321b(0x5b8)])((0x0,U[_0xd4321b(0x473)])(Se,this[_0xd4321b(0x88)],'creds.json'),{'encoding':_0xd4321b(0x196)}));_0x17fca6=_0x3c2c90['me']?.[_0xd4321b(0x11d)]||_0x3c2c90['me']?.['verifiedName'];}}}return _0x17fca6;}get['profilePictureUrl'](){const _0xa1dfdb=a0_0x46df1a;return this['instance'][_0xa1dfdb(0x4c0)];}get[a0_0x46df1a(0x350)](){const _0x3df923=a0_0x46df1a;return this[_0x3df923(0x2b1)][_0x3df923(0x12a)]?.['pairingCode']?{'pairingCode':this['instance'][_0x3df923(0x12a)]?.[_0x3df923(0x709)]}:{'code':this[_0x3df923(0x2b1)]['qrcode']?.[_0x3df923(0x5ea)],'base64':this[_0x3df923(0x2b1)]['qrcode']?.[_0x3df923(0x2c6)]};}async[a0_0x46df1a(0x116)](){const _0x1e6751=a0_0x46df1a;let _0x4ba728=await this[_0x1e6751(0x91)][_0x1e6751(0x73e)][_0x1e6751(0x336)](this[_0x1e6751(0x88)]);this[_0x1e6751(0x319)]['url']=_0x4ba728?.[_0x1e6751(0x53f)],this['localWebhook'][_0x1e6751(0x4d5)]=_0x4ba728?.[_0x1e6751(0x4d5)],this[_0x1e6751(0x319)][_0x1e6751(0x512)]=_0x4ba728?.['local_map'],this[_0x1e6751(0x319)]['STATUS_INSTANCE']=_0x4ba728?.[_0x1e6751(0x26b)],this[_0x1e6751(0x319)]['QRCODE_UPDATED']=_0x4ba728?.[_0x1e6751(0x72f)],this[_0x1e6751(0x319)][_0x1e6751(0x16d)]=_0x4ba728?.['SEND_MESSAGE'],this[_0x1e6751(0x319)][_0x1e6751(0x34c)]=_0x4ba728?.[_0x1e6751(0x34c)],this[_0x1e6751(0x319)][_0x1e6751(0x155)]=_0x4ba728?.[_0x1e6751(0x155)],this['localWebhook'][_0x1e6751(0x1dc)]=_0x4ba728?.[_0x1e6751(0x1dc)],this[_0x1e6751(0x319)]['GROUPS_UPDATE']=_0x4ba728?.[_0x1e6751(0x499)],this[_0x1e6751(0x319)][_0x1e6751(0x535)]=_0x4ba728?.[_0x1e6751(0x535)],this[_0x1e6751(0x319)][_0x1e6751(0x11e)]=_0x4ba728?.[_0x1e6751(0x11e)],this[_0x1e6751(0x319)][_0x1e6751(0x4d8)]=_0x4ba728?.['CHATS_UPSERT'],this[_0x1e6751(0x319)][_0x1e6751(0x4c5)]=_0x4ba728?.[_0x1e6751(0x4c5)],this[_0x1e6751(0x319)]['CHATS_DELETE']=_0x4ba728?.[_0x1e6751(0x254)],this[_0x1e6751(0x319)][_0x1e6751(0x710)]=_0x4ba728?.['CONTACTS_SET'],this[_0x1e6751(0x319)]['CONTACTS_UPSERT']=_0x4ba728?.[_0x1e6751(0xaa)],this['localWebhook']['CONTACTS_UPDATE']=_0x4ba728?.[_0x1e6751(0x753)],this['localWebhook'][_0x1e6751(0x182)]=_0x4ba728?.[_0x1e6751(0x182)],this['localWebhook'][_0x1e6751(0x428)]=_0x4ba728?.['MESSAGES_SET'],this[_0x1e6751(0x319)][_0x1e6751(0x5b5)]=_0x4ba728?.[_0x1e6751(0x5b5)],this[_0x1e6751(0x319)][_0x1e6751(0x291)]=_0x4ba728?.['groups_ignore'];}async[a0_0x46df1a(0xc4)](_0x47b2fc){const _0x41f010=a0_0x46df1a;let _0x5568e4=[_0x41f010(0x778),_0x41f010(0x53f),'enabled','local_map',_0x41f010(0x26b),_0x41f010(0x72f),_0x41f010(0x155),'MESSAGES_UPSERT',_0x41f010(0x16d),_0x41f010(0x1dc),_0x41f010(0x499),_0x41f010(0x535),_0x41f010(0x11e),_0x41f010(0x4d8),'CHATS_UPDATE',_0x41f010(0x254),'CONTACTS_SET',_0x41f010(0xaa),_0x41f010(0x753),'PRESENCE_UPDATE','MESSAGES_SET',_0x41f010(0x5b5),'groups_ignore'],_0x426b73={};return _0x5568e4[_0x41f010(0x14b)](_0x50a7c8=>{_0x47b2fc[_0x50a7c8]!==void 0x0&&(_0x426b73[_0x50a7c8]=_0x47b2fc[_0x50a7c8]);}),_0x426b73['url']&&(_0x426b73['url']=_0x426b73[_0x41f010(0x53f)][_0x41f010(0x7a1)]()),await this[_0x41f010(0x91)]['webhook'][_0x41f010(0x83)](_0x426b73,this[_0x41f010(0x88)]),Object[_0x41f010(0x508)](this['localWebhook'],_0x426b73),await this['repository'][_0x41f010(0x73e)]['find'](this[_0x41f010(0x88)]);}async[a0_0x46df1a(0x475)](){const _0x2ded5d=a0_0x46df1a;return await this['repository']['webhook'][_0x2ded5d(0x336)](this[_0x2ded5d(0x88)]);}async[a0_0x46df1a(0x788)](_0x3f4f31,_0x4eb1af){const _0x39e878=a0_0x46df1a;let _0x39e495=_0x3f4f31[_0x39e878(0x420)](/[\.-]/gm,'_')['toUpperCase'](),_0xdc72c0=this[_0x39e878(0x319)][_0x39e878(0x4d5)]&&(0x0,k[_0x39e878(0xa9)])(this['localWebhook']['url'])?this[_0x39e878(0x319)][_0x39e878(0x53f)]+(this[_0x39e878(0x319)][_0x39e878(0x512)]?this[_0x39e878(0xe7)][_0x3f4f31]:''):null,_0x244ce0=this['localWebhook'][_0x39e495],_0x426013=ge&&ge[_0x39e878(0x4d5)]&&(0x0,k[_0x39e878(0xa9)])(ge['url'])?ge['url']+(ge[_0x39e878(0x512)]?this[_0x39e878(0xe7)][_0x3f4f31]:''):null,_0x436db3=ge?ge[_0x39e495]:null;if(_0x244ce0&&_0xdc72c0)try{await Q['default']['create']({'baseURL':_0xdc72c0})[_0x39e878(0x13a)]('',{'event':_0x3f4f31,'instance':this[_0x39e878(0x2b1)][_0x39e878(0x11d)],'apikey':this[_0x39e878(0x2b1)]['apikey'],'data':_0x4eb1af}),this[_0x39e878(0xed)][_0x39e878(0x307)](this[_0x39e878(0x88)]+'\x20('+this[_0x39e878(0x2b1)]['wuid']+_0x39e878(0x218)+_0x3f4f31+':\x20'+_0xdc72c0);}catch{this[_0x39e878(0xed)]['error'](this[_0x39e878(0x88)]+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0x3f4f31+':\x20'+_0xdc72c0);}if(_0x436db3&&_0x426013)try{await Q[_0x39e878(0x2fa)][_0x39e878(0x83)]({'baseURL':_0x426013})[_0x39e878(0x13a)]('',{'event':_0x3f4f31,'instance':this[_0x39e878(0x2b1)][_0x39e878(0x11d)],'apikey':this[_0x39e878(0x2b1)][_0x39e878(0x201)],'data':_0x4eb1af}),this[_0x39e878(0xed)][_0x39e878(0x307)](this[_0x39e878(0x88)]+'\x20('+this[_0x39e878(0x2b1)]['wuid']+_0x39e878(0x7ac)+_0x3f4f31+':\x20'+_0x426013);}catch{this['logger'][_0x39e878(0x2fb)](this[_0x39e878(0x88)]+'\x20('+this['instance'][_0x39e878(0x3f4)]+_0x39e878(0x689)+_0x3f4f31+':\x20'+_0x426013);}}async['connectionUpdate']({qr:_0x1044a6,connection:_0x3cfd79,lastDisconnect:_0x37ab53}){const _0x15d169=a0_0x46df1a;if(_0x1044a6){if(this[_0x15d169(0x2b1)][_0x15d169(0x12a)][_0x15d169(0x625)]===Uo)return this[_0x15d169(0x788)](_0x15d169(0x228),{'message':'Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','statusCode':w[_0x15d169(0x233)][_0x15d169(0x273)]}),this[_0x15d169(0x97)]={'state':'refused','statusReason':w[_0x15d169(0x233)]['connectionClosed']},this[_0x15d169(0x788)](_0x15d169(0x507),{'instance':this[_0x15d169(0x2b1)][_0x15d169(0x11d)],...this['stateConnection']}),this[_0x15d169(0x788)]('status.instance',{'instance':this['instance'][_0x15d169(0x11d)],'status':_0x15d169(0x403)}),this[_0x15d169(0x91)][_0x15d169(0x35d)][_0x15d169(0x22c)](this[_0x15d169(0x2b1)][_0x15d169(0x11d)]),this[_0x15d169(0x1a7)]=!0x0,he[_0x15d169(0x6db)](X,this[_0x15d169(0x2b1)][_0x15d169(0x11d)]),this['eventEmitter'][_0x15d169(0x5bd)](_0x15d169(0x386),this[_0x15d169(0x2b1)]['name']);this[_0x15d169(0x2b1)][_0x15d169(0x12a)]['count']++;let _0x2024af={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x15d169(0x21d),'dark':'#000000'}};xi['default'][_0x15d169(0x2d1)](_0x1044a6,_0x2024af,(_0x452e43,_0x20f69d)=>{const _0x365d77=_0x15d169;if(_0x452e43){this['logger']['error'](this[_0x365d77(0x88)]+'\x20('+this[_0x365d77(0x2b1)]['wuid']+_0x365d77(0x40c)+(_0x452e43 instanceof Error?_0x452e43[_0x365d77(0x64f)]:JSON[_0x365d77(0x5cc)](_0x452e43,null,0x2)));return;}this[_0x365d77(0x2b1)][_0x365d77(0x12a)][_0x365d77(0x2c6)]=_0x20f69d,this['instance'][_0x365d77(0x12a)]['code']=_0x1044a6,!this[_0x365d77(0x1e6)]&&this['sendDataWebhook'](_0x365d77(0x228),{'qrcode':{'instance':this[_0x365d77(0x2b1)]['name'],'pairingCode':this[_0x365d77(0x2b1)]['qrcode']['pairingCode'],'code':_0x1044a6,'base64':_0x20f69d}});}),this['phoneNumber']?this[_0x15d169(0x2b1)][_0x15d169(0x12a)]['pairingCode']||(await(0x0,w[_0x15d169(0x298)])(0x7d0),this[_0x15d169(0x2b1)][_0x15d169(0x12a)][_0x15d169(0x709)]=await this[_0x15d169(0x1f7)]['requestPairingCode'](this[_0x15d169(0x1e6)])):this[_0x15d169(0x2b1)][_0x15d169(0x12a)][_0x15d169(0x709)]=null,Di[_0x15d169(0x2fa)][_0x15d169(0x495)](_0x1044a6,{'small':!0x0},_0x427d80=>this['logger'][_0x15d169(0x307)](_0x15d169(0x623)+this[_0x15d169(0x2b1)][_0x15d169(0x11d)]+_0x15d169(0x152)+this[_0x15d169(0x2b1)][_0x15d169(0x12a)][_0x15d169(0x625)]+_0x15d169(0x671)+this[_0x15d169(0x2b1)][_0x15d169(0x12a)]['pairingCode']+_0x15d169(0x77e)+_0x427d80));}if(_0x3cfd79&&(this[_0x15d169(0x97)]={'state':_0x3cfd79,'statusReason':_0x37ab53?.['error']?.[_0x15d169(0xfa)]?.[_0x15d169(0x2ca)]??0xc8},this[_0x15d169(0x788)](_0x15d169(0x507),{'instance':this[_0x15d169(0x2b1)][_0x15d169(0x11d)],...this[_0x15d169(0x97)]})),_0x3cfd79===_0x15d169(0x60f)){if(this[_0x15d169(0x2b2)]++,this[_0x15d169(0x668)][_0x15d169(0x45f)](Date['now']()),this['reconnectTimestamps']=this[_0x15d169(0x668)][_0x15d169(0x57a)](_0x37fa50=>Date[_0x15d169(0x72)]()-_0x37fa50<this['RECONNECT_TIME_FRAME']),_0x37ab53[_0x15d169(0x2fb)]?.['output']?.[_0x15d169(0x2ca)]!==w[_0x15d169(0x233)][_0x15d169(0x3ed)]){let _0xe7673a=Math[_0x15d169(0x1a6)](Math[_0x15d169(0x41a)](0x2,this[_0x15d169(0x2b2)])*0x3e8,0x493e0);console['log'](this[_0x15d169(0x88)]+'\x20Tentativa\x20de\x20reconexão\x20'+this['reconnectAttempts']+_0x15d169(0x399)+_0xe7673a/0x3e8+_0x15d169(0x283)),await new Promise(_0x3f64c3=>setTimeout(_0x3f64c3,_0xe7673a)),console[_0x15d169(0x307)](_0x15d169(0x6c2)),await this[_0x15d169(0x21b)]();}else{this['sendDataWebhook'](_0x15d169(0x130),{'instance':this['instance']['name'],'status':'removed'}),this[_0x15d169(0x2b1)][_0x15d169(0x277)][_0x15d169(0x4f2)]=!0x1,this[_0x15d169(0x91)]['webhook'][_0x15d169(0x22c)](this[_0x15d169(0x88)]),this[_0x15d169(0x91)]['auth'][_0x15d169(0x83)]({'owner':'','online':!0x1,'lastDisconnect':Date['now']()},this[_0x15d169(0x2b1)]['name']),he['removeIPv6ById'](X,this['instance']['name']);try{this[_0x15d169(0xed)][_0x15d169(0x2c1)](this[_0x15d169(0x88)]+'\x20('+this['instance'][_0x15d169(0x3f4)]+_0x15d169(0x2e7));let _0x18c686=await this[_0x15d169(0x91)][_0x15d169(0x64f)][_0x15d169(0x3fd)](this[_0x15d169(0x2b1)][_0x15d169(0x3f4)]);_0x18c686['success']?this[_0x15d169(0xed)]['verbose'](this[_0x15d169(0x88)]+'\x20('+this['instance'][_0x15d169(0x3f4)]+_0x15d169(0x12e)):this[_0x15d169(0xed)][_0x15d169(0x2fb)]('Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20'+_0x18c686['error']);}catch(_0x2d3ebc){this[_0x15d169(0xed)]['error'](_0x15d169(0x620)+_0x2d3ebc[_0x15d169(0x64f)]);}this[_0x15d169(0x2b1)][_0x15d169(0x277)]['delayMessage']!==null&&(this[_0x15d169(0xed)]['verbose'](this[_0x15d169(0x88)]+'\x20('+this['instance'][_0x15d169(0x3f4)]+_0x15d169(0x1e1)),clearInterval(this['instance'][_0x15d169(0x277)][_0x15d169(0xee)]),this[_0x15d169(0x2b1)][_0x15d169(0x277)][_0x15d169(0xee)]=null),this[_0x15d169(0xed)][_0x15d169(0x2c1)](this[_0x15d169(0x88)]+'\x20('+this[_0x15d169(0x2b1)][_0x15d169(0x3f4)]+'):\x20Limpando\x20AutomateSystem'),this[_0x15d169(0x6a0)]=null,this[_0x15d169(0x1ee)][_0x15d169(0x5bd)](_0x15d169(0x3fa),this[_0x15d169(0x2b1)][_0x15d169(0x11d)],_0x15d169(0x4aa)),this[_0x15d169(0x1f7)]?.['ws']?.[_0x15d169(0x60f)](),this[_0x15d169(0x1f7)]['end'](new Error(_0x15d169(0x447)));}}if(_0x3cfd79===_0x15d169(0x7b)){try{this[_0x15d169(0x1f7)]['ev'][_0x15d169(0x136)]();}catch(_0x547ceb){this['logger'][_0x15d169(0x2fb)](_0x547ceb);}this[_0x15d169(0x685)],this[_0x15d169(0x2b1)][_0x15d169(0x3f4)]=this[_0x15d169(0x1f7)][_0x15d169(0x576)]['id'][_0x15d169(0x420)](/:\d+/,'')[_0x15d169(0x420)](_0x15d169(0x32b),''),this[_0x15d169(0x2b1)][_0x15d169(0x4c0)]=(await this[_0x15d169(0x217)](this[_0x15d169(0x2b1)][_0x15d169(0x3f4)]+_0x15d169(0x32b)))[_0x15d169(0x4c0)],this['repository'][_0x15d169(0x35d)][_0x15d169(0x83)]({'online':!0x0,'owner':this['instance'][_0x15d169(0x3f4)],'lastDisconnect':null},this[_0x15d169(0x2b1)][_0x15d169(0x11d)]);let _0x118e42=_0x15d169(0x348)+this[_0x15d169(0x2b1)][_0x15d169(0x3f4)],_0xa2a24f=0x28,_0x1c64f2=Math[_0x15d169(0x54d)]((_0xa2a24f-_0x118e42[_0x15d169(0x5e9)])/0x2),_0x49b596='\x20'[_0x15d169(0x585)](_0x1c64f2),_0x5a38f4=_0x15d169(0x3be),_0x4433f4='Instância:\x20'+this[_0x15d169(0x2b1)][_0x15d169(0x11d)],_0x1f387d=(''+_0x49b596+_0x118e42+_0x49b596)[_0x15d169(0x49f)](_0xa2a24f,'\x20'),_0x5579c5=(''+_0x49b596+_0x5a38f4+_0x49b596)[_0x15d169(0x49f)](_0xa2a24f,'\x20'),_0x354e90=(''+_0x49b596+_0x4433f4+_0x49b596)[_0x15d169(0x49f)](_0xa2a24f,'\x20'),_0xb06b8f=Math[_0x15d169(0x30b)](_0x1f387d['length'],_0x5579c5[_0x15d169(0x5e9)],_0x354e90[_0x15d169(0x5e9)]),_0xf54e09=_0x1f387d['padEnd'](_0xb06b8f,'\x20'),_0x5b27da=_0x5579c5[_0x15d169(0x49f)](_0xb06b8f,'\x20'),_0x4b697c=_0x354e90['padEnd'](_0xb06b8f,'\x20');this[_0x15d169(0xed)][_0x15d169(0x459)]((_0x15d169(0x321)+'─'['repeat'](_0xb06b8f)+_0x15d169(0x1b6)+_0x5b27da+_0x15d169(0x644)+_0x4b697c+_0x15d169(0x644)+_0xf54e09+_0x15d169(0x697)+'─'[_0x15d169(0x585)](_0xb06b8f)+'┘')[_0x15d169(0x420)](/^ +/gm,'\x20\x20')),this[_0x15d169(0x520)](),this[_0x15d169(0x2b1)][_0x15d169(0x277)]['isConnected']=!0x0;}}[a0_0x46df1a(0x685)](){const _0x41b549=a0_0x46df1a;this[_0x41b549(0x2b2)]=0x0,this[_0x41b549(0x668)]=[];}async[a0_0x46df1a(0x746)](_0x43c671,_0x13cd91=!0x1){const _0x51c000=a0_0x46df1a;try{let _0x31f4c1=await this[_0x51c000(0x91)]['message'][_0x51c000(0x336)]({'where':{'_id':_0x43c671['id']}},this[_0x51c000(0x2b1)]['wuid']);return _0x13cd91?_0x31f4c1[0x0]:_0x31f4c1[0x0][_0x51c000(0x64f)];}catch{return{'conversation':''};}}[a0_0x46df1a(0x4ba)](){const _0x1dd414=a0_0x46df1a;let _0x5c6fe6=this[_0x1dd414(0x46a)][_0x1dd414(0x20f)](_0x1dd414(0x2a0)),_0x55e742=this['configService']['get'](_0x1dd414(0x723));_0x5c6fe6?.[_0x1dd414(0x41f)]&&!_0x55e742['ENABLED']&&setInterval(()=>{const _0x55906d=_0x1dd414;try{for(let [_0x52fb50,_0x22f446]of Object['entries'](_0x5c6fe6))_0x22f446===!0x0&&(0x0,Fe[_0x55906d(0x309)])(_0x55906d(0x666)+(0x0,U[_0x55906d(0x473)])(this[_0x55906d(0x71c)],_0x52fb50['toLowerCase'](),this[_0x55906d(0x2b1)][_0x55906d(0x3f4)])+_0x55906d(0x4c6));}catch{}},(_0x5c6fe6?.[_0x1dd414(0x41f)]??0xe10)*0x3e8);}async[a0_0x46df1a(0x458)](){const _0xc8424e=a0_0x46df1a;let _0x22813b=this[_0xc8424e(0x46a)][_0xc8424e(0x20f)](_0xc8424e(0x723)),_0x5d05a2=this[_0xc8424e(0x46a)]['get'](_0xc8424e(0x452));return _0x5d05a2?.['ENABLED']?await Ds(_0x5d05a2,this[_0xc8424e(0x2b1)][_0xc8424e(0x11d)]):_0x22813b[_0xc8424e(0x544)]?await xs(this[_0xc8424e(0x2b1)][_0xc8424e(0x11d)]):await(0x0,w[_0xc8424e(0x141)])((0x0,U[_0xc8424e(0x473)])(Se,this[_0xc8424e(0x2b1)][_0xc8424e(0x11d)]));}async[a0_0x46df1a(0x520)](){const _0x25913d=a0_0x46df1a;let _0x4dbe4f=()=>Math['floor'](Math[_0x25913d(0x259)]()*0x4e21)+0x7d0,_0x26c61d=async()=>{const _0x2d2547=_0x25913d;if(!this[_0x2d2547(0x2b1)]['ScheduleMessage'][_0x2d2547(0x4f2)]){this[_0x2d2547(0xed)][_0x2d2547(0x2c1)](this[_0x2d2547(0x88)]+'\x20('+this[_0x2d2547(0x2b1)]['wuid']+_0x2d2547(0x541)),this['isRunning']=!0x1;return;}if(this[_0x2d2547(0x2b1)]['wuid']&&this['AutomateSystem']&&this[_0x2d2547(0x2b1)][_0x2d2547(0x277)][_0x2d2547(0xee)]!==null&&this[_0x2d2547(0x2b1)]['ScheduleMessage'][_0x2d2547(0xee)]!==void 0x0){let _0x426ec7=Math[_0x2d2547(0x69d)](this[_0x2d2547(0x2b1)][_0x2d2547(0x277)][_0x2d2547(0xee)]/0xea60);this[_0x2d2547(0xed)][_0x2d2547(0x2c1)](this[_0x2d2547(0x88)]+'\x20('+this[_0x2d2547(0x2b1)][_0x2d2547(0x3f4)]+'):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20'+_0x426ec7+'\x20minutos\x20verificará\x20novas\x20mensagens'),this[_0x2d2547(0x28f)]=!0x1;return;}else this[_0x2d2547(0x2b1)][_0x2d2547(0x3f4)]&&(this[_0x2d2547(0xed)][_0x2d2547(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0x2d2547(0x3f4)]+_0x2d2547(0x636)),this[_0x2d2547(0x6a0)]||(await this[_0x2d2547(0x5b4)](),this[_0x2d2547(0x120)](),this[_0x2d2547(0x3b5)]()),(this[_0x2d2547(0x2b1)]['ScheduleMessage'][_0x2d2547(0xee)]===null||this[_0x2d2547(0x2b1)]['ScheduleMessage'][_0x2d2547(0xee)]===void 0x0)&&await this['scheduleNextCheck']());if(this[_0x2d2547(0x28f)]){let _0x1ae32e=_0x4dbe4f();this['logger'][_0x2d2547(0x2c1)](this[_0x2d2547(0x88)]+_0x2d2547(0x41b)+_0x1ae32e/0x3e8+_0x2d2547(0x20e)),setTimeout(_0x26c61d,_0x1ae32e);}};if(this['isRunning'])return;this[_0x25913d(0x28f)]=!0x0;let _0xd430d6=_0x4dbe4f();setTimeout(_0x26c61d,_0xd430d6);}async[a0_0x46df1a(0x3b5)](){const _0x3ae192=a0_0x46df1a;let _0x53ab38=this[_0x3ae192(0x2b1)][_0x3ae192(0x3f4)];try{let _0xcf5a61=await this[_0x3ae192(0x91)][_0x3ae192(0xa2)][_0x3ae192(0x25c)]({'where':{'$or':[{'owner':_0x53ab38},{'whoCanUse':{'$in':[_0x53ab38]}},{'shareOwners':{'$in':[_0x53ab38]}}]}}),_0x2cb547=await this['repository'][_0x3ae192(0xa2)][_0x3ae192(0x25c)]({'where':{'$or':[{'owner':'global'},{'whoCanUse':{'$in':[_0x3ae192(0x7b3)]}},{'shareOwners':{'$in':['global']}}]}});_0x2cb547&&_0x2cb547[_0x3ae192(0x5e9)]>0x0?this[_0x3ae192(0xed)]['verbose'](this[_0x3ae192(0x88)]+'\x20('+this[_0x3ae192(0x2b1)][_0x3ae192(0x3f4)]+'):\x20Fluxos\x20do\x20proprietário\x20\x27global\x27\x20já\x20existem\x20na\x20coleção\x20centralizada.'):(await this[_0x3ae192(0x91)][_0x3ae192(0xa2)][_0x3ae192(0x44a)](_0x3ae192(0x7b3)),this[_0x3ae192(0xed)][_0x3ae192(0x2c1)](this[_0x3ae192(0x88)]+'\x20('+this[_0x3ae192(0x2b1)][_0x3ae192(0x3f4)]+_0x3ae192(0x3b4))),_0xcf5a61&&_0xcf5a61['length']>0x0?this[_0x3ae192(0xed)][_0x3ae192(0x2c1)](this[_0x3ae192(0x88)]+'\x20('+this[_0x3ae192(0x2b1)]['wuid']+_0x3ae192(0x3a2)+_0x53ab38+'\x27\x20já\x20existem\x20na\x20coleção\x20centralizada.'):(await this[_0x3ae192(0x91)][_0x3ae192(0xa2)][_0x3ae192(0x44a)](_0x53ab38),this['logger'][_0x3ae192(0x2c1)](this[_0x3ae192(0x88)]+'\x20('+this[_0x3ae192(0x2b1)][_0x3ae192(0x3f4)]+_0x3ae192(0x3a2)+_0x53ab38+_0x3ae192(0x516)),_0xcf5a61=await this[_0x3ae192(0x91)]['flow'][_0x3ae192(0x25c)]({'where':{'$or':[{'owner':_0x53ab38},{'whoCanUse':{'$in':[_0x53ab38]}},{'shareOwners':{'$in':[_0x53ab38]}}]}}));let _0x1fbef4=new Map(this[_0x3ae192(0x6a0)][_0x3ae192(0x6a2)][_0x3ae192(0x3f6)](_0x5c9765=>[_0x5c9765[_0x3ae192(0x778)],_0x5c9765])),_0x59add1=_0xcf5a61['map'](_0x4e989b=>{const _0x392101=_0x3ae192;let _0x441b50=_0x1fbef4[_0x392101(0x20f)](_0x4e989b[_0x392101(0x778)]?.[_0x392101(0x49e)]());return{'_id':_0x4e989b[_0x392101(0x778)]?.[_0x392101(0x49e)](),'name':_0x441b50?.['name']??_0x4e989b[_0x392101(0x11d)],'default':_0x441b50?.[_0x392101(0x2fa)]??_0x4e989b['default']??!0x1,'startCommand':_0x441b50?.[_0x392101(0x73)]??_0x4e989b[_0x392101(0x1fc)],'minutesToClose':_0x441b50?.[_0x392101(0x15a)]??_0x4e989b[_0x392101(0x15a)]??0xa,'readMessages':_0x441b50?.[_0x392101(0x3a0)]??_0x4e989b[_0x392101(0x3a0)]??!0x1,'testingWith':_0x441b50?.[_0x392101(0x467)]??_0x4e989b[_0x392101(0x467)],'canEdit':_0x4e989b[_0x392101(0x3dd)]===_0x53ab38||(_0x4e989b[_0x392101(0x72a)]??[])[_0x392101(0x3f1)](_0x53ab38),'usersCount':(_0x4e989b['shareOwners']??[])[_0x392101(0x5e9)]??0x0};}),_0x26b608=!0x1;_0x59add1[_0x3ae192(0x14b)](_0x1aa4d0=>{const _0x380706=_0x3ae192;_0x1aa4d0[_0x380706(0x2fa)]&&(_0x26b608?_0x1aa4d0[_0x380706(0x2fa)]=!0x1:_0x26b608=!0x0);}),this[_0x3ae192(0x6a0)][_0x3ae192(0x6a2)]=_0x59add1;let _0x1f731a={'flows':_0x59add1};return await this[_0x3ae192(0x91)][_0x3ae192(0x335)]['update'](_0x1f731a,_0x53ab38),this[_0x3ae192(0xed)][_0x3ae192(0x2c1)](this[_0x3ae192(0x88)]+'\x20('+_0x53ab38+_0x3ae192(0x5a6)),_0x59add1[_0x3ae192(0x5e9)];}catch(_0x3e383d){return this[_0x3ae192(0xed)][_0x3ae192(0x2fb)](this[_0x3ae192(0x88)]+'\x20('+_0x53ab38+_0x3ae192(0x433)+(_0x3e383d instanceof Error?_0x3e383d[_0x3ae192(0x64f)]:JSON[_0x3ae192(0x5cc)](_0x3e383d,null,0x2))),{'message':_0x3ae192(0x342)+(_0x3e383d instanceof Error?_0x3e383d[_0x3ae192(0x64f)]:JSON['stringify'](_0x3e383d,null,0x2))};}}async[a0_0x46df1a(0x21b)](_0x2b1ee5){const _0xf318d=a0_0x46df1a;try{let _0x3dabac=await this[_0xf318d(0x91)][_0xf318d(0x2b1)][_0xf318d(0x404)]({'where':{'_id':X+'-'+this['instanceName']}}),_0x20c824;console[_0xf318d(0x307)](_0xf318d(0x33a)),console[_0xf318d(0x307)](_0xf318d(0x35e),Oi),console[_0xf318d(0x307)](_0xf318d(0x71),this[_0xf318d(0x2b2)]),console[_0xf318d(0x307)]('--------------------------------------'),Oi&&(this[_0xf318d(0x2b2)]<0x4||!this[_0xf318d(0x2b2)])&&(!he[_0xf318d(0x5ed)]||!he[_0xf318d(0xec)]?(console['error']('IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.'),_0x20c824=void 0x0):_0x3dabac&&_0x3dabac['ip']?(_0x20c824=_0x3dabac['ip'],console[_0xf318d(0x307)](_0xf318d(0x36d)+_0x20c824)):(_0x20c824=await he['createIPv6'](X,this[_0xf318d(0x2b1)][_0xf318d(0x11d)]),_0x20c824?(console[_0xf318d(0x307)](_0xf318d(0xd6)+_0x20c824),await(0x0,w[_0xf318d(0x298)])(0x3e8)):console[_0xf318d(0x2fb)](_0xf318d(0x789)))),this[_0xf318d(0x116)](),this['instance'][_0xf318d(0x201)]=(await this[_0xf318d(0x91)][_0xf318d(0x35d)][_0xf318d(0x336)](this[_0xf318d(0x2b1)][_0xf318d(0x11d)]))['apikey'],this[_0xf318d(0x2b1)][_0xf318d(0x493)]=await this['defineAuthState']();let {version:_0x3b70c1}=await(0x0,w[_0xf318d(0x14c)])(),_0x3fa2ba=[ki,js,(0x0,Ls['release'])()],_0x3bace7={'localAddress':_0x20c824,'auth':{'creds':this[_0xf318d(0x2b1)]['authState']['state'][_0xf318d(0x596)],'keys':(0x0,w[_0xf318d(0x368)])(this['instance'][_0xf318d(0x493)]['state'][_0xf318d(0x794)],(0x0,Jt['default'])({'level':'error'}))},'logger':(0x0,Jt[_0xf318d(0x2fa)])({'level':'error'}),'printQRInTerminal':!0x1,'browser':_0x2b1ee5?[_0xf318d(0x465),js,(0x0,Ls[_0xf318d(0x46b)])()]:_0x3fa2ba,'version':_0x3b70c1,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'connectTimeoutMs':0xea60,'qrTimeout':0x9c40,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x17e4a5=>{const _0x50c9a7=_0xf318d;let _0x21eb5b=_0x17e4a5['endsWith'](_0x50c9a7(0x6c1)),_0x404611=this[_0x50c9a7(0x319)]?.[_0x50c9a7(0x291)]&&_0x17e4a5[_0x50c9a7(0x6d6)]('@g.us');return _0x21eb5b||(0x0,w[_0x50c9a7(0x4a2)])(_0x17e4a5)||_0x404611;},'msgRetryCounterCache':this['msgRetryCounterCache'],'getMessage':async _0x12eac8=>await this[_0xf318d(0x746)](_0x12eac8),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this['userDevicesCache'],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending':_0x5a4fce=>(_0x5a4fce[_0xf318d(0x324)]?.[_0xf318d(0x58b)]==w[_0xf318d(0x571)]['Message'][_0xf318d(0x611)]['ListType']['PRODUCT_LIST']&&(_0x5a4fce=JSON[_0xf318d(0xab)](JSON[_0xf318d(0x5cc)](_0x5a4fce)),_0x5a4fce[_0xf318d(0x324)][_0xf318d(0x58b)]=w['proto']['Message'][_0xf318d(0x611)][_0xf318d(0x19a)][_0xf318d(0x49a)]),_0x5a4fce)};return this[_0xf318d(0x1a7)]=!0x1,this[_0xf318d(0x1f7)]=(0x0,w[_0xf318d(0x2fa)])(_0x3bace7),this[_0xf318d(0xac)](),this['phoneNumber']=_0x2b1ee5,this[_0xf318d(0x1f7)];}catch(_0x5f4ab8){let _0x452d77=_0xf318d(0x568),_0x3f818a=_0x5f4ab8 instanceof Error?_0x5f4ab8[_0xf318d(0x64f)]:typeof _0x5f4ab8==_0xf318d(0xde)?JSON['stringify'](_0x5f4ab8):_0x5f4ab8,_0x4ea058=_0x452d77+':\x20'+_0x3f818a;throw this[_0xf318d(0xed)]['error'](this['instanceName']+'\x20('+this['instance'][_0xf318d(0x3f4)]+_0xf318d(0x28e)+_0x4ea058),new x(_0x4ea058);}}['eventHandler'](){const _0x29ab85=a0_0x46df1a;this[_0x29ab85(0x1f7)]['ev'][_0x29ab85(0x3f7)](_0x2f1a54=>{const _0x4f1a95=_0x29ab85;if(!this['endSession']){let _0x483f60=this['configService'][_0x4f1a95(0x20f)](_0x4f1a95(0x723));if(_0x2f1a54[_0x4f1a95(0x302)]){let _0x579ee4=_0x2f1a54[_0x4f1a95(0x302)];this[_0x4f1a95(0x4da)][_0x4f1a95(0x302)](_0x579ee4);}if(_0x2f1a54[_0x4f1a95(0xc7)]){let _0x119ef6=_0x2f1a54[_0x4f1a95(0xc7)];this['messageHandle']['labels.association'](_0x119ef6);}if(_0x2f1a54[_0x4f1a95(0x507)]&&this[_0x4f1a95(0x46d)](_0x2f1a54[_0x4f1a95(0x507)]),_0x2f1a54[_0x4f1a95(0x4ec)]&&this[_0x4f1a95(0x2b1)][_0x4f1a95(0x493)][_0x4f1a95(0x8b)](),_0x2f1a54['messaging-history.set']){let _0x40e291=_0x2f1a54[_0x4f1a95(0x108)];this[_0x4f1a95(0x4da)][_0x4f1a95(0x108)](_0x40e291,_0x483f60);}if(_0x2f1a54[_0x4f1a95(0xa8)]){let _0x27e17a=_0x2f1a54[_0x4f1a95(0xa8)];this[_0x4f1a95(0x4da)][_0x4f1a95(0xa8)](_0x27e17a,_0x483f60);}if(_0x2f1a54[_0x4f1a95(0x142)]){let _0x392305=_0x2f1a54[_0x4f1a95(0x142)];this['messageHandle'][_0x4f1a95(0x142)](_0x392305,_0x483f60);}if(_0x2f1a54[_0x4f1a95(0x224)]){let _0x1788e2=_0x2f1a54[_0x4f1a95(0x224)];if(this[_0x4f1a95(0x319)]?.[_0x4f1a95(0x291)]&&_0x1788e2['id'][_0x4f1a95(0x3f1)](_0x4f1a95(0x2be)))return;this[_0x4f1a95(0x788)](_0x4f1a95(0x224),_0x1788e2);}if(_0x2f1a54[_0x4f1a95(0x1c6)]){let _0x2e8f11=_0x2f1a54[_0x4f1a95(0x1c6)];this['groupHandler'][_0x4f1a95(0x1c6)](_0x2e8f11);}if(_0x2f1a54[_0x4f1a95(0x2da)]){let _0x308a31=_0x2f1a54[_0x4f1a95(0x2da)];this['groupHandler']['groups.update'](_0x308a31);}if(_0x2f1a54[_0x4f1a95(0x1db)]){let _0x44644f=_0x2f1a54[_0x4f1a95(0x1db)];this[_0x4f1a95(0x3e1)]['group-participants.update'](_0x44644f);}if(_0x2f1a54[_0x4f1a95(0x149)]){let _0x10a80d=_0x2f1a54[_0x4f1a95(0x149)];this['chatHandle'][_0x4f1a95(0x149)](_0x10a80d,_0x483f60);}if(_0x2f1a54[_0x4f1a95(0x2d9)]){let _0x495993=_0x2f1a54[_0x4f1a95(0x2d9)];this['chatHandle'][_0x4f1a95(0x2d9)](_0x495993,_0x483f60);}if(_0x2f1a54[_0x4f1a95(0x245)]){let _0x4825da=_0x2f1a54[_0x4f1a95(0x245)];this[_0x4f1a95(0x1a8)][_0x4f1a95(0x245)](_0x4825da);}if(_0x2f1a54[_0x4f1a95(0x6a8)]){let _0x4caf7b=_0x2f1a54['contacts.upsert'];this[_0x4f1a95(0x68d)]['contacts.upsert'](_0x4caf7b,_0x483f60);}if(_0x2f1a54[_0x4f1a95(0x2a3)]){let _0x18307c=_0x2f1a54[_0x4f1a95(0x2a3)];this[_0x4f1a95(0x68d)]['contacts.update'](_0x18307c,_0x483f60);}}});}async[a0_0x46df1a(0x112)](_0x510ca6,_0x2b7783){const _0x2eee3f=a0_0x46df1a;if(_0x2b7783>=0xa){console['error'](this[_0x2eee3f(0x88)]+'\x20('+this['instance'][_0x2eee3f(0x3f4)]+_0x2eee3f(0x464)),delete jt[_0x510ca6[_0x2eee3f(0x754)]['id']];return;}try{console[_0x2eee3f(0x2fb)](this[_0x2eee3f(0x88)]+'\x20('+this[_0x2eee3f(0x2b1)][_0x2eee3f(0x3f4)]+_0x2eee3f(0x3df)+(_0x2b7783+0x1)),await this[_0x2eee3f(0x1f7)][_0x2eee3f(0x6e8)](JSON[_0x2eee3f(0xab)](_0x510ca6[_0x2eee3f(0x2e8)][0x1],w['BufferJSON'][_0x2eee3f(0x2bf)])),console[_0x2eee3f(0x2fb)](_0x2eee3f(0x764));}catch(_0x19b1db){console[_0x2eee3f(0x2fb)](this['instanceName']+'\x20('+this[_0x2eee3f(0x2b1)][_0x2eee3f(0x3f4)]+_0x2eee3f(0x322)+_0x19b1db),setTimeout(()=>this['retrySendMessage'](_0x510ca6,_0x2b7783+0x1),Math[_0x2eee3f(0x41a)](0x2,_0x2b7783)*0x3e8);}}[a0_0x46df1a(0x6ed)](_0x3cb404){return new Promise(_0x3c8de5=>setTimeout(_0x3c8de5,_0x3cb404));}[a0_0x46df1a(0x56e)](_0x2a4daa){const _0x1e7f99=a0_0x46df1a;_0x2a4daa=_0x2a4daa[_0x1e7f99(0x420)](/\D/g,'');let _0x58db04=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x1e7f99(0x1e2)](_0x2a4daa);if(_0x58db04&&_0x58db04[0x1]==='55'){let _0x1e3b75=_0x58db04[0x2],_0x32e7e3=_0x58db04[0x3],_0x2a71be=_0x58db04[0x4];if(parseInt(_0x1e3b75)>=0x1f&&_0x32e7e3==='9')return _0x58db04[0x1]+_0x1e3b75+_0x2a71be;}return _0x2a4daa;}['createJid'](_0x48bcac){const _0x123a58=a0_0x46df1a;return _0x48bcac[_0x123a58(0x3f1)](_0x123a58(0x2be))||_0x48bcac[_0x123a58(0x3f1)](_0x123a58(0x32b))||_0x48bcac[_0x123a58(0x3f1)](_0x123a58(0x338))?_0x48bcac:(_0x48bcac=_0x48bcac?.[_0x123a58(0x420)](/\s/g,'')['replace'](/\+/g,'')[_0x123a58(0x420)](/\(/g,'')[_0x123a58(0x420)](/\)/g,'')['split'](/\:/)[0x0]['split']('@')[0x0],_0x48bcac[_0x123a58(0x5e9)]>=0x12?(_0x48bcac=_0x48bcac['replace'](/[^\d-]/g,''),_0x48bcac+_0x123a58(0x2be)):(_0x48bcac=_0x48bcac[_0x123a58(0x420)](/\D/g,''),_0x48bcac+_0x123a58(0x32b)));}async[a0_0x46df1a(0x3f9)](_0x266b5a){const _0x36a731=a0_0x46df1a;let _0x286853=(await this[_0x36a731(0x210)]({'numbers':[_0x266b5a['number']]}))[0x0];if(!_0x286853[_0x36a731(0x297)]&&!(0x0,w[_0x36a731(0x105)])(_0x286853[_0x36a731(0x540)])&&!_0x286853[_0x36a731(0x540)][_0x36a731(0x3f1)](_0x36a731(0x338)))throw new m(_0x286853);let _0x59559d=_0x286853[_0x36a731(0x540)];try{return await this[_0x36a731(0x1f7)][_0x36a731(0x35f)](_0x59559d),await this['client'][_0x36a731(0x81)](_0x266b5a[_0x36a731(0x616)],_0x59559d),{'status':0xc8,'presence':_0x266b5a[_0x36a731(0x616)]};}catch(_0x3e1983){let _0x17e5d5=_0x36a731(0x551),_0x2a1f48=_0x3e1983 instanceof Error?_0x3e1983[_0x36a731(0x64f)]:typeof _0x3e1983==_0x36a731(0xde)?JSON[_0x36a731(0x5cc)](_0x3e1983):_0x3e1983,_0x47cc59=_0x17e5d5+':\x20'+_0x2a1f48;throw this['logger'][_0x36a731(0x2fb)](this[_0x36a731(0x88)]+'\x20('+this['instance'][_0x36a731(0x3f4)]+'):\x20'+_0x47cc59),new m(_0x47cc59);}}async[a0_0x46df1a(0x67c)](_0x7b605c,_0x4274d7,_0x371a26,_0x36042d=!0x0){const _0x10216f=a0_0x46df1a;let _0x308947=await this[_0x10216f(0x91)][_0x10216f(0xd7)][_0x10216f(0x404)]({'where':{'_id':_0x7b605c}});if(!_0x308947&&!_0x36042d)return;let _0x4bc561={'lastUpdate':Date[_0x10216f(0x72)]()};if(_0x371a26||!_0x308947?.['lastUpdate']||Date[_0x10216f(0x72)]()-_0x308947[_0x10216f(0x487)]>0x18*0x3c*0x3c*0x3e8)try{let _0x71b68c=(await this['profilePicture'](_0x7b605c))[_0x10216f(0x4c0)];_0x4bc561[_0x10216f(0x4e7)]=_0x71b68c;}catch(_0x315203){let _0x30a719='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact',_0xb731ab=_0x315203 instanceof Error?_0x315203[_0x10216f(0x64f)]:typeof _0x315203==_0x10216f(0xde)?JSON[_0x10216f(0x5cc)](_0x315203):_0x315203,_0x1ec8a0=_0x30a719+':\x20'+_0xb731ab;throw this[_0x10216f(0xed)]['error'](this['instanceName']+'\x20('+this[_0x10216f(0x2b1)][_0x10216f(0x3f4)]+'):\x20'+_0x1ec8a0),new m(_0x1ec8a0);}return _0x4274d7&&_0x308947?.[_0x10216f(0x11d)]!==_0x4274d7&&(_0x4bc561[_0x10216f(0x11d)]=_0x4274d7),Object[_0x10216f(0x794)](_0x4bc561)[_0x10216f(0x5e9)]>0x1&&(_0x308947?await this[_0x10216f(0x91)][_0x10216f(0xd7)][_0x10216f(0x75)]({'where':{'_id':_0x7b605c}},_0x4bc561):await this['repository'][_0x10216f(0xd7)][_0x10216f(0x2e0)]([{'_id':_0x7b605c,..._0x4bc561}]),_0x308947={..._0x308947,..._0x4bc561}),{'cachedContact':_0x308947};}async['profilePicture'](_0x2ab15f){const _0x2805c3=a0_0x46df1a;let _0x355eec=this[_0x2805c3(0x39f)](_0x2ab15f);try{return{'wuid':_0x355eec,'profilePictureUrl':await this[_0x2805c3(0x1f7)][_0x2805c3(0x4c0)](_0x355eec,'image')};}catch{return{'wuid':_0x355eec,'profilePictureUrl':null};}}async['sendMessageWithTyping'](_0x4fb9e7,_0x384115,_0x3419d6){const _0x3cbfef=a0_0x46df1a;let _0xfd75c7;try{let _0x1f174d=(await this[_0x3cbfef(0x210)]({'numbers':[_0x4fb9e7]}))[0x0];if(!_0x1f174d[_0x3cbfef(0x297)]&&!(0x0,w[_0x3cbfef(0x105)])(_0x1f174d[_0x3cbfef(0x540)])&&!_0x1f174d[_0x3cbfef(0x540)]['includes'](_0x3cbfef(0x338)))throw new m(_0x1f174d);_0xfd75c7=_0x1f174d[_0x3cbfef(0x540)];}catch(_0x4cf7ba){_0xfd75c7=_0x4fb9e7,this[_0x3cbfef(0xed)][_0x3cbfef(0x33d)](this[_0x3cbfef(0x88)]+'\x20('+this['instance']['wuid']+'):\x20error:\x20'+_0x4cf7ba[_0x3cbfef(0x64f)]),this['logger'][_0x3cbfef(0x33d)](this[_0x3cbfef(0x88)]+'\x20('+this[_0x3cbfef(0x2b1)][_0x3cbfef(0x3f4)]+_0x3cbfef(0x79c)+_0xfd75c7);}try{if(_0xfd75c7||(_0xfd75c7=_0x4fb9e7,this[_0x3cbfef(0xed)][_0x3cbfef(0x33d)](this[_0x3cbfef(0x88)]+'\x20('+this['instance'][_0x3cbfef(0x3f4)]+_0x3cbfef(0x65b)+_0xfd75c7)),_0x3419d6||(_0x3419d6={}),_0x3419d6?.['delay']){await this[_0x3cbfef(0x1f7)][_0x3cbfef(0x35f)](_0xfd75c7),await this[_0x3cbfef(0x1f7)][_0x3cbfef(0x81)](_0x3419d6?.[_0x3cbfef(0x616)]??_0x3cbfef(0x3bc),_0xfd75c7);let _0x1119db=Math[_0x3cbfef(0x1a6)](_0x3419d6[_0x3cbfef(0x298)],0x2710);await(0x0,w[_0x3cbfef(0x298)])(_0x1119db),await this[_0x3cbfef(0x1f7)]['sendPresenceUpdate'](_0x3cbfef(0x5a7),_0xfd75c7);}let _0x578bf1=_0x3419d6?.[_0x3cbfef(0x3ad)]!=!0x1?void 0x0:!0x1,_0x50f0bc;if(_0x3419d6?.[_0x3cbfef(0x78f)]){let _0x1d0baa=_0x3419d6?.[_0x3cbfef(0x78f)],_0x215f38=_0x1d0baa?.[_0x3cbfef(0x64f)]?_0x1d0baa:await this[_0x3cbfef(0x746)](_0x1d0baa[_0x3cbfef(0x754)],!0x0);if(!_0x215f38)throw _0x3cbfef(0x65e);_0x50f0bc=_0x215f38;}let _0x26ca22;if((0x0,w[_0x3cbfef(0x105)])(_0xfd75c7))try{let _0x31c854=(await this[_0x3cbfef(0x91)][_0x3cbfef(0x3d9)][_0x3cbfef(0x404)]({'where':{'_id':_0xfd75c7}},this[_0x3cbfef(0x2b1)][_0x3cbfef(0x3f4)]))['groupdata'];if(!_0x31c854)throw new J(_0x3cbfef(0x787));_0x3419d6?.[_0x3cbfef(0x6a4)]&&(_0x3419d6[_0x3cbfef(0x6a4)]?.['everyOne']?_0x26ca22=_0x31c854[_0x3cbfef(0x4ab)][_0x3cbfef(0x3f6)](_0x3b194a=>_0x3b194a['id']):_0x3419d6[_0x3cbfef(0x6a4)]?.[_0x3cbfef(0x7d)]?.[_0x3cbfef(0x5e9)]&&(_0x26ca22=_0x3419d6[_0x3cbfef(0x6a4)][_0x3cbfef(0x7d)][_0x3cbfef(0x3f6)](_0x16e3a3=>{const _0x1f5b81=_0x3cbfef;let _0x3bb5b1=this[_0x1f5b81(0x39f)](_0x16e3a3);return(0x0,w[_0x1f5b81(0x105)])(_0x3bb5b1)?null:_0x3bb5b1;})));}catch{throw new J('Group\x20not\x20found');}let _0xd20bd1=await this[_0x3cbfef(0x91)][_0x3cbfef(0x3d9)][_0x3cbfef(0x404)]({'where':{'_id':_0xfd75c7}},this[_0x3cbfef(0x2b1)][_0x3cbfef(0x3f4)]),_0xe277de=await((async()=>{const _0x4aaaf5=_0x3cbfef;let _0x563da8={'quoted':_0x50f0bc,'ephemeralExpiration':_0xd20bd1?.[_0x4aaaf5(0x23c)]??0x0};if(!_0x384115[_0x4aaaf5(0x47f)]&&!_0x384115[_0x4aaaf5(0x3bb)]&&!_0x384115[_0x4aaaf5(0x713)]&&!_0x384115[_0x4aaaf5(0x2b3)]&&_0xfd75c7!==_0x4aaaf5(0x4cc)&&!_0x384115['audio'])return await this[_0x4aaaf5(0x1f7)][_0x4aaaf5(0x4a1)](_0xfd75c7,{'forward':{'key':{'remoteJid':this[_0x4aaaf5(0x2b1)]['wuid'],'fromMe':!0x0},'message':_0x384115},'mentions':_0x26ca22},_0x563da8);if(_0x384115[_0x4aaaf5(0x1e5)])return await this['client'][_0x4aaaf5(0x4a1)](_0xfd75c7,{'react':{'text':_0x384115[_0x4aaaf5(0x1e5)]['text'],'key':_0x384115['reactionMessage'][_0x4aaaf5(0x754)]}},_0x563da8);if(_0x384115[_0x4aaaf5(0x2b3)]){let _0x5160a4=_0x384115[_0x4aaaf5(0x2b3)];return _0x3419d6?.[_0x4aaaf5(0x4ca)]&&(_0x5160a4=await this[_0x4aaaf5(0xd9)](_0x5160a4,_0xfd75c7)),await this['client'][_0x4aaaf5(0x4a1)](_0xfd75c7,{'text':_0x5160a4,'mentions':_0x26ca22,'linkPreview':_0x578bf1},_0x563da8);}return _0xfd75c7===_0x4aaaf5(0x4cc)?await this[_0x4aaaf5(0x1f7)]['sendMessage'](_0xfd75c7,_0x384115['status'][_0x4aaaf5(0x729)],{'backgroundColor':_0x384115[_0x4aaaf5(0x16f)]['option'][_0x4aaaf5(0x23f)],'font':_0x384115[_0x4aaaf5(0x16f)][_0x4aaaf5(0x621)][_0x4aaaf5(0xef)],'statusJidList':_0x384115[_0x4aaaf5(0x16f)]['option']['statusJidList']}):await this[_0x4aaaf5(0x1f7)][_0x4aaaf5(0x4a1)](_0xfd75c7,_0x384115,_0x563da8);})()),_0x3c8d86=(0x0,w['normalizeMessageContent'])(_0xe277de[_0x3cbfef(0x64f)]),_0x500fdb=(0x0,w[_0x3cbfef(0x725)])(_0x3c8d86),{message_normalized:_0x296e9c}=this[_0x3cbfef(0x124)](_0x3c8d86,_0x500fdb,null),_0x35587b={'_id':_0xe277de[_0x3cbfef(0x754)]['id'],'key':_0xe277de[_0x3cbfef(0x754)],'pushName':_0xe277de[_0x3cbfef(0x242)],'isGroup':_0xe277de['key'][_0x3cbfef(0x75b)][_0x3cbfef(0x6d6)]('@g.us'),'profilePictureUrl':this[_0x3cbfef(0x2b1)][_0x3cbfef(0x4c0)],'message':_0x3c8d86,'messageType':_0x500fdb,'message_normalized':{'key':_0xe277de[_0x3cbfef(0x754)],'pushName':_0xe277de[_0x3cbfef(0x242)],'messageTimestamp':_0xe277de[_0x3cbfef(0x71f)]&&_0xe277de[_0x3cbfef(0x71f)][_0x3cbfef(0x49e)]()['length']<0xd?_0xe277de[_0x3cbfef(0x71f)]*0x3e8:_0xe277de[_0x3cbfef(0x71f)]||null,'source':(0x0,w['getDevice'])(_0xe277de['key']['id']),..._0x296e9c},'messageTimestamp':_0xe277de[_0x3cbfef(0x71f)]&&_0xe277de[_0x3cbfef(0x71f)]['toString']()[_0x3cbfef(0x5e9)]<0xd?_0xe277de[_0x3cbfef(0x71f)]*0x3e8:_0xe277de[_0x3cbfef(0x71f)]||null,'owner':this[_0x3cbfef(0x2b1)]['wuid'],'source':(0x0,w[_0x3cbfef(0x4d3)])(_0xe277de['key']['id'])};return this['logger'][_0x3cbfef(0x33d)](this[_0x3cbfef(0x88)]+'\x20('+this[_0x3cbfef(0x2b1)][_0x3cbfef(0x3f4)]+'):\x20enviado\x20para\x20['+_0x35587b[_0x3cbfef(0x754)]?.[_0x3cbfef(0x75b)][_0x3cbfef(0x420)]('@s.whatsapp.net','')+_0x3cbfef(0x79d)+_0x35587b[_0x3cbfef(0x6bb)]+')'),_0x35587b[_0x3cbfef(0x4ac)]?.['text']&&this[_0x3cbfef(0xed)][_0x3cbfef(0x33d)](_0x35587b[_0x3cbfef(0x4ac)]?.[_0x3cbfef(0xd1)]),this['sendDataWebhook'](_0x3cbfef(0x4c3),_0x35587b),j(this['instanceName'],_0x3cbfef(0x229),{'message':_0x35587b}),this[_0x3cbfef(0x480)](this[_0x3cbfef(0x46a)][_0x3cbfef(0x20f)](_0x3cbfef(0x723)),_0x35587b,'SEND_MESSAGE',_0xd20bd1),await this[_0x3cbfef(0x91)][_0x3cbfef(0x64f)]['insert']([_0x35587b],this[_0x3cbfef(0x2b1)][_0x3cbfef(0x3f4)]),_0xe277de;}catch(_0x47796f){let _0x1db1a8=_0x3cbfef(0x5c3)+_0xfd75c7,_0x446a92=_0x47796f instanceof Error?_0x47796f[_0x3cbfef(0x64f)]:typeof _0x47796f==_0x3cbfef(0xde)?JSON[_0x3cbfef(0x5cc)](_0x47796f):_0x47796f,_0x326dc7=_0x1db1a8+':\x20'+_0x446a92;throw this['logger'][_0x3cbfef(0x2fb)](this['instanceName']+'\x20('+this[_0x3cbfef(0x2b1)][_0x3cbfef(0x3f4)]+_0x3cbfef(0x28e)+_0x326dc7),new m(_0x326dc7);}}get[a0_0x46df1a(0x349)](){const _0x43dcb7=a0_0x46df1a;return this[_0x43dcb7(0x97)];}async['textMessage'](_0x35644c){const _0x225c47=a0_0x46df1a;return await this['sendMessageWithTyping'](_0x35644c[_0x225c47(0x731)],{'conversation':_0x35644c['textMessage']['text']},_0x35644c?.[_0x225c47(0x6b6)]);}async[a0_0x46df1a(0x3aa)](_0x4f0435){const _0x25edca=a0_0x46df1a;if(!_0x4f0435[_0x25edca(0x1c0)])throw new m(_0x25edca(0x539));if(!_0x4f0435['content'])throw new m(_0x25edca(0x1a0));if(_0x4f0435[_0x25edca(0x234)]){let _0x491f25=await this[_0x25edca(0x91)][_0x25edca(0xd0)][_0x25edca(0x336)]({'where':{}},this[_0x25edca(0x2b1)]['wuid']);if(!_0x491f25[_0x25edca(0x5e9)])throw new m('Contacts\x20not\x20found');_0x4f0435[_0x25edca(0x3c0)]=_0x491f25['filter'](_0x17c0d6=>_0x17c0d6[_0x25edca(0x242)])[_0x25edca(0x3f6)](_0x3afe03=>_0x3afe03[_0x25edca(0x778)]);}if(!_0x4f0435[_0x25edca(0x3c0)]?.[_0x25edca(0x5e9)]&&!_0x4f0435[_0x25edca(0x234)])throw new m(_0x25edca(0x42b));if(_0x4f0435[_0x25edca(0x1c0)]===_0x25edca(0xd1)){if(!_0x4f0435[_0x25edca(0x23f)])throw new m(_0x25edca(0x25e));if(!_0x4f0435[_0x25edca(0xef)])throw new m(_0x25edca(0x58c));return{'content':{'text':_0x4f0435[_0x25edca(0x729)]},'option':{'backgroundColor':_0x4f0435['backgroundColor'],'font':_0x4f0435['font'],'statusJidList':_0x4f0435[_0x25edca(0x3c0)]}};}if(_0x4f0435[_0x25edca(0x1c0)]==='image')return{'content':{'image':{'url':_0x4f0435['content']},'caption':_0x4f0435['caption']},'option':{'statusJidList':_0x4f0435['statusJidList']}};if(_0x4f0435[_0x25edca(0x1c0)]==='video')return{'content':{'video':{'url':_0x4f0435[_0x25edca(0x729)]},'caption':_0x4f0435[_0x25edca(0x3eb)]},'option':{'statusJidList':_0x4f0435['statusJidList']}};if(_0x4f0435[_0x25edca(0x1c0)]==='audio'){this['logger'][_0x25edca(0x2c1)](this[_0x25edca(0x88)]+'\x20('+this[_0x25edca(0x2b1)][_0x25edca(0x3f4)]+_0x25edca(0x6e3)),this[_0x25edca(0xed)]['verbose'](this['instanceName']+'\x20('+this[_0x25edca(0x2b1)][_0x25edca(0x3f4)]+_0x25edca(0x4d6));let _0x3e5d6b=await this[_0x25edca(0x483)](_0x4f0435[_0x25edca(0x729)]);if(typeof _0x3e5d6b=='string'){this[_0x25edca(0xed)]['verbose'](this[_0x25edca(0x88)]+'\x20('+this[_0x25edca(0x2b1)][_0x25edca(0x3f4)]+_0x25edca(0x444));let _0x1f7d58=L[_0x25edca(0x5b8)](_0x3e5d6b)['toString'](_0x25edca(0x2c6));return{'content':{'audio':Buffer['from'](_0x1f7d58,'base64'),'ptt':!0x0,'mimetype':_0x25edca(0x747)},'option':{'statusJidList':_0x4f0435[_0x25edca(0x3c0)]}};}else throw new x(_0x3e5d6b);}throw new m(_0x25edca(0x70e));}async[a0_0x46df1a(0x288)](_0x191583){const _0x3c152b=a0_0x46df1a;return await this['sendMessageWithTyping']('status@broadcast',{'status':await this[_0x3c152b(0x3aa)](_0x191583[_0x3c152b(0x288)])});}async[a0_0x46df1a(0x35a)](_0x43ded4){const _0x20b963=a0_0x46df1a;try{let _0x3335b6=await(0x0,w[_0x20b963(0x490)])({[_0x43ded4[_0x20b963(0x68c)]]:(0x0,k[_0x20b963(0xa9)])(_0x43ded4[_0x20b963(0x425)])?{'url':_0x43ded4[_0x20b963(0x425)]}:Buffer['from'](_0x43ded4['media'],_0x20b963(0x2c6))},{'upload':this['client'][_0x20b963(0x354)]}),_0x42fbc9=_0x43ded4[_0x20b963(0x68c)]+_0x20b963(0x47e);if(_0x43ded4[_0x20b963(0x68c)]==='document'&&!_0x43ded4[_0x20b963(0x1e4)]){let _0x52b6e5=new RegExp(/.*\/(.+?)\./)[_0x20b963(0x1e2)](_0x43ded4[_0x20b963(0x425)]);_0x43ded4[_0x20b963(0x1e4)]=_0x52b6e5?_0x52b6e5[0x1]:null;}let _0x97415a;return(0x0,k[_0x20b963(0xa9)])(_0x43ded4['media'])?_0x97415a=(await Q[_0x20b963(0x2fa)]['get'](_0x43ded4['media'],{'responseType':_0x20b963(0x5ba)}))[_0x20b963(0x739)][_0x20b963(0xd2)]:_0x97415a=(0x0,Pi['getMIMEType'])(_0x43ded4[_0x20b963(0x1e4)]),_0x3335b6[_0x42fbc9]['caption']=_0x43ded4?.[_0x20b963(0x3eb)],_0x3335b6[_0x42fbc9][_0x20b963(0x87)]=_0x97415a,_0x3335b6[_0x42fbc9][_0x20b963(0x1e4)]=_0x43ded4[_0x20b963(0x1e4)],_0x43ded4[_0x20b963(0x68c)]===_0x20b963(0x345)&&(_0x3335b6[_0x42fbc9]['jpegThumbnail']=Uint8Array[_0x20b963(0x13c)]((0x0,Le['readFileSync'])((0x0,U[_0x20b963(0x473)])(process[_0x20b963(0x1f5)](),_0x20b963(0x387)))),_0x3335b6[_0x42fbc9]['gifPlayback']=!0x1),(0x0,w['generateWAMessageFromContent'])('',{[_0x42fbc9]:{..._0x3335b6[_0x42fbc9]}},{'userJid':this['instance'][_0x20b963(0x3f4)]});}catch(_0xaa2c9e){let _0x187f45='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage',_0x570595=_0xaa2c9e instanceof Error?_0xaa2c9e[_0x20b963(0x64f)]:typeof _0xaa2c9e==_0x20b963(0xde)?JSON['stringify'](_0xaa2c9e):_0xaa2c9e,_0xb3558d=_0x187f45+':\x20'+_0x570595;throw this[_0x20b963(0xed)][_0x20b963(0x2fb)](this[_0x20b963(0x88)]+'\x20('+this['instance'][_0x20b963(0x3f4)]+'):\x20'+_0xb3558d),new x(_0xb3558d);}}async[a0_0x46df1a(0x669)](_0x31980d){const _0x26007a=a0_0x46df1a;let _0x320415=await this[_0x26007a(0x35a)](_0x31980d[_0x26007a(0x669)]);return await this[_0x26007a(0x724)](_0x31980d[_0x26007a(0x731)],{..._0x320415[_0x26007a(0x64f)]},_0x31980d?.[_0x26007a(0x6b6)]);}async[a0_0x46df1a(0x449)](_0x3eeef6,_0x259e74){const _0x292b90=a0_0x46df1a;try{this['logger'][_0x292b90(0x2c1)](this['instanceName']+'\x20('+this[_0x292b90(0x2b1)][_0x292b90(0x3f4)]+_0x292b90(0x502));let _0x107a05,_0x5117e8=_0x259e74+'-'+new Date()[_0x292b90(0x2bc)]();this[_0x292b90(0xed)][_0x292b90(0x2c1)](this[_0x292b90(0x88)]+'\x20('+this[_0x292b90(0x2b1)][_0x292b90(0x3f4)]+'):Hash\x20to\x20image\x20name:\x20'+_0x5117e8);let _0x470a8c=''+(0x0,U[_0x292b90(0x473)])(this[_0x292b90(0x71c)],_0x5117e8+'.webp');if(this[_0x292b90(0xed)][_0x292b90(0x2c1)](this[_0x292b90(0x88)]+'\x20('+this[_0x292b90(0x2b1)][_0x292b90(0x3f4)]+_0x292b90(0xbb)+_0x470a8c),(0x0,k[_0x292b90(0x3ec)])(_0x3eeef6)){this[_0x292b90(0xed)][_0x292b90(0x2c1)](this[_0x292b90(0x88)]+'\x20('+this[_0x292b90(0x2b1)][_0x292b90(0x3f4)]+_0x292b90(0x703));let _0x4f8e09=_0x3eeef6[_0x292b90(0x420)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x214cb4=Buffer['from'](_0x4f8e09,_0x292b90(0x2c6));_0x107a05=''+(0x0,U['join'])(this[_0x292b90(0x71c)],_0x292b90(0x59c)+_0x5117e8+_0x292b90(0x409)),this[_0x292b90(0xed)][_0x292b90(0x2c1)](this[_0x292b90(0x88)]+'\x20('+this[_0x292b90(0x2b1)][_0x292b90(0x3f4)]+'):Image\x20path:\x20'+_0x107a05),await(0x0,qt[_0x292b90(0x2fa)])(_0x214cb4)['toFile'](_0x107a05),this['logger']['verbose'](this[_0x292b90(0x88)]+'\x20('+this['instance']['wuid']+_0x292b90(0x317));}else{this[_0x292b90(0xed)][_0x292b90(0x2c1)](this[_0x292b90(0x88)]+'\x20('+this[_0x292b90(0x2b1)][_0x292b90(0x3f4)]+'):Image\x20is\x20url');let _0x3aa25f=new Date()[_0x292b90(0x2bc)](),_0x3e46a5=_0x3eeef6+_0x292b90(0x1ca)+_0x3aa25f;this['logger'][_0x292b90(0x2c1)](this[_0x292b90(0x88)]+'\x20('+this[_0x292b90(0x2b1)][_0x292b90(0x3f4)]+'):including\x20timestamp\x20in\x20url:\x20'+_0x3e46a5);let _0x4fe48c=await Q[_0x292b90(0x2fa)][_0x292b90(0x20f)](_0x3e46a5,{'responseType':_0x292b90(0x5ba)});this[_0x292b90(0xed)][_0x292b90(0x2c1)](this[_0x292b90(0x88)]+'\x20('+this[_0x292b90(0x2b1)][_0x292b90(0x3f4)]+_0x292b90(0x6a9));let _0x5bd266=Buffer[_0x292b90(0x13c)](_0x4fe48c['data'],_0x292b90(0x4eb));_0x107a05=''+(0x0,U[_0x292b90(0x473)])(this['storePath'],_0x292b90(0x59c)+_0x5117e8+_0x292b90(0x409)),this[_0x292b90(0xed)][_0x292b90(0x2c1)](this[_0x292b90(0x88)]+'\x20('+this['instance'][_0x292b90(0x3f4)]+'):Image\x20path:\x20'+_0x107a05),await(0x0,qt[_0x292b90(0x2fa)])(_0x5bd266)[_0x292b90(0x32c)](_0x107a05),this[_0x292b90(0xed)][_0x292b90(0x2c1)](this[_0x292b90(0x88)]+'\x20('+this['instance'][_0x292b90(0x3f4)]+_0x292b90(0x317));}return await(0x0,qt[_0x292b90(0x2fa)])(_0x107a05)['webp']()['toFile'](_0x470a8c),this[_0x292b90(0xed)][_0x292b90(0x2c1)](this[_0x292b90(0x88)]+'\x20('+this[_0x292b90(0x2b1)][_0x292b90(0x3f4)]+_0x292b90(0x6e0)),L['unlinkSync'](_0x107a05),this[_0x292b90(0xed)][_0x292b90(0x2c1)](this[_0x292b90(0x88)]+'\x20('+this['instance']['wuid']+_0x292b90(0x734)),_0x470a8c;}catch(_0x776c3a){let _0x2eb785=_0x292b90(0x5aa),_0x635a33=_0x776c3a instanceof Error?_0x776c3a['message']:typeof _0x776c3a==_0x292b90(0xde)?JSON[_0x292b90(0x5cc)](_0x776c3a):_0x776c3a,_0x1bd830=_0x2eb785+':\x20'+_0x635a33;this[_0x292b90(0xed)][_0x292b90(0x2fb)](this[_0x292b90(0x88)]+'\x20('+this[_0x292b90(0x2b1)]['wuid']+'):\x20'+_0x1bd830);}}async[a0_0x46df1a(0x2ef)](_0x5d9b1c){const _0x1ef767=a0_0x46df1a;let _0x203160=await this[_0x1ef767(0x449)](_0x5d9b1c[_0x1ef767(0x13f)][_0x1ef767(0x24c)],_0x5d9b1c[_0x1ef767(0x731)]),_0x5b8068=await this['sendMessageWithTyping'](_0x5d9b1c[_0x1ef767(0x731)],{'sticker':{'url':_0x203160}},_0x5d9b1c?.[_0x1ef767(0x6b6)]);return L['unlinkSync'](_0x203160),this[_0x1ef767(0xed)][_0x1ef767(0x2c1)](this[_0x1ef767(0x88)]+'\x20('+this[_0x1ef767(0x2b1)]['wuid']+_0x1ef767(0x24e)),_0x5b8068;}async['audioWhatsapp'](_0x1086f4){const _0x29a1f7=a0_0x46df1a;if(this[_0x29a1f7(0xed)][_0x29a1f7(0x2c1)](this[_0x29a1f7(0x88)]+'\x20('+this[_0x29a1f7(0x2b1)][_0x29a1f7(0x3f4)]+_0x29a1f7(0x44e)),!_0x1086f4[_0x29a1f7(0x6b6)]?.[_0x29a1f7(0x640)]&&_0x1086f4[_0x29a1f7(0x6b6)]?.[_0x29a1f7(0x640)]!==!0x1&&(_0x1086f4[_0x29a1f7(0x6b6)][_0x29a1f7(0x640)]=!0x0),_0x1086f4[_0x29a1f7(0x6b6)]?.[_0x29a1f7(0x640)]){let _0x326398=await this[_0x29a1f7(0x483)](_0x1086f4[_0x29a1f7(0x586)][_0x29a1f7(0x47f)]);if(typeof _0x326398==_0x29a1f7(0x691)){let _0x262848=L[_0x29a1f7(0x5b8)](_0x326398)[_0x29a1f7(0x49e)](_0x29a1f7(0x2c6));return this[_0x29a1f7(0x724)](_0x1086f4[_0x29a1f7(0x731)],{'audio':Buffer[_0x29a1f7(0x13c)](_0x262848,_0x29a1f7(0x2c6)),'ptt':!0x0,'mimetype':_0x29a1f7(0x605)},{'presence':_0x29a1f7(0x257),'delay':_0x1086f4?.[_0x29a1f7(0x6b6)]?.[_0x29a1f7(0x298)]});}else throw new x(_0x326398);}return await this[_0x29a1f7(0x724)](_0x1086f4[_0x29a1f7(0x731)],{'audio':(0x0,k[_0x29a1f7(0xa9)])(_0x1086f4['audioMessage'][_0x29a1f7(0x47f)])?{'url':_0x1086f4[_0x29a1f7(0x586)]['audio']}:Buffer[_0x29a1f7(0x13c)](_0x1086f4[_0x29a1f7(0x586)][_0x29a1f7(0x47f)],_0x29a1f7(0x2c6)),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':_0x29a1f7(0x257),'delay':_0x1086f4?.[_0x29a1f7(0x6b6)]?.[_0x29a1f7(0x298)]});}async[a0_0x46df1a(0x483)](_0x2628b8){const _0x23a7af=a0_0x46df1a;this[_0x23a7af(0xed)][_0x23a7af(0x2c1)](this['instanceName']+'\x20('+this[_0x23a7af(0x2b1)][_0x23a7af(0x3f4)]+_0x23a7af(0x4d6));let _0x56c7f5=(0x0,k['isURL'])(_0x2628b8)?(0x0,Vt[_0x23a7af(0x609)])(_0x23a7af(0x742))['update'](_0x2628b8)['digest'](_0x23a7af(0x5b0)):(0x0,Vt['createHash'])(_0x23a7af(0x742))[_0x23a7af(0x75)](_0x2628b8)[_0x23a7af(0x617)](_0x23a7af(0x5b0)),_0x52a820=''+(0x0,U['join'])(this[_0x23a7af(0x71c)],_0x56c7f5+_0x23a7af(0x10f));if(L[_0x23a7af(0x481)](_0x52a820))return this[_0x23a7af(0xed)][_0x23a7af(0x2c1)](this['instanceName']+'\x20('+this[_0x23a7af(0x2b1)][_0x23a7af(0x3f4)]+_0x23a7af(0x2ce)),_0x52a820;let _0x2454ac=''+(0x0,U['join'])(this[_0x23a7af(0x71c)],_0x23a7af(0x59c)+(0x0,Y['v4'])()+'.mp3');if((0x0,k[_0x23a7af(0xa9)])(_0x2628b8)){let _0x155725=new Date()[_0x23a7af(0x2bc)](),_0x1c75b7=_0x2628b8+'?timestamp='+_0x155725,_0x1bd447=await Q[_0x23a7af(0x2fa)][_0x23a7af(0x20f)](_0x1c75b7,{'responseType':_0x23a7af(0x5ba)});L[_0x23a7af(0x211)](_0x2454ac,_0x1bd447[_0x23a7af(0x72b)]);}else{let _0x1e25ae=Buffer[_0x23a7af(0x13c)](_0x2628b8,_0x23a7af(0x2c6));L[_0x23a7af(0x211)](_0x2454ac,_0x1e25ae);}return new Promise((_0xb29a4a,_0x216f4e)=>{const _0x1e9ae8=_0x23a7af;(0x0,Fe['exec'])(ks[_0x1e9ae8(0x2fa)]['path']+_0x1e9ae8(0x590)+_0x2454ac+_0x1e9ae8(0x30a)+_0x52a820+_0x1e9ae8(0xd4),_0x45504e=>{const _0x500196=_0x1e9ae8;if(L[_0x500196(0x6be)](_0x2454ac),_0x45504e){this[_0x500196(0xed)][_0x500196(0x2c1)](this[_0x500196(0x88)]+'\x20('+this[_0x500196(0x2b1)][_0x500196(0x3f4)]+_0x500196(0x1ba)),_0x216f4e(_0x45504e);return;}this[_0x500196(0xed)][_0x500196(0x2c1)](this['instanceName']+'\x20('+this[_0x500196(0x2b1)][_0x500196(0x3f4)]+_0x500196(0x18d)),_0xb29a4a(_0x52a820);});});}async[a0_0x46df1a(0x240)](_0x340aad){const _0x699fc8=a0_0x46df1a;this[_0x699fc8(0xed)][_0x699fc8(0x2c1)](this[_0x699fc8(0x88)]+'\x20('+this['instance']['wuid']+_0x699fc8(0x4d6));let _0x3faf29=(0x0,Vt[_0x699fc8(0x609)])(_0x699fc8(0x742))[_0x699fc8(0x75)](_0x340aad)['digest'](_0x699fc8(0x5b0)),_0x19d890=''+(0x0,U[_0x699fc8(0x473)])(this[_0x699fc8(0x71c)],_0x3faf29+'.mp3');if(L[_0x699fc8(0x481)](_0x19d890))return this[_0x699fc8(0xed)][_0x699fc8(0x2c1)](this[_0x699fc8(0x88)]+'\x20('+this[_0x699fc8(0x2b1)][_0x699fc8(0x3f4)]+_0x699fc8(0x2ce)),U[_0x699fc8(0x2fa)]['basename'](_0x19d890);let _0x5a30e2=''+(0x0,U[_0x699fc8(0x473)])(this[_0x699fc8(0x71c)],'temp-'+_0x3faf29+_0x699fc8(0x10f));if((0x0,k[_0x699fc8(0xa9)])(_0x340aad)){let _0x3ddd6f=new Date()[_0x699fc8(0x2bc)](),_0x2bd5b9=_0x340aad+_0x699fc8(0x1ca)+_0x3ddd6f,_0x10bc95=await Q[_0x699fc8(0x2fa)][_0x699fc8(0x20f)](_0x2bd5b9,{'responseType':'arraybuffer'});L[_0x699fc8(0x211)](_0x5a30e2,_0x10bc95[_0x699fc8(0x72b)]);}else{let _0x170886=Buffer['from'](_0x340aad,'base64');L[_0x699fc8(0x211)](_0x5a30e2,_0x170886);}return new Promise((_0x1cf35,_0xb68608)=>{const _0x2760c8=_0x699fc8;(0x0,Fe[_0x2760c8(0x1e2)])(ks[_0x2760c8(0x2fa)]['path']+_0x2760c8(0x590)+_0x5a30e2+_0x2760c8(0x412)+_0x19d890+_0x2760c8(0xd4),_0x558bf4=>{const _0x5c629c=_0x2760c8;if(L[_0x5c629c(0x6be)](_0x5a30e2),_0x558bf4){this[_0x5c629c(0xed)][_0x5c629c(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0x5c629c(0x3f4)]+'):Error\x20in\x20converting\x20audio'),_0xb68608(_0x558bf4);return;}this[_0x5c629c(0xed)][_0x5c629c(0x2c1)](this[_0x5c629c(0x88)]+'\x20('+this[_0x5c629c(0x2b1)][_0x5c629c(0x3f4)]+_0x5c629c(0x18d)),_0x1cf35(U['default'][_0x5c629c(0x285)](_0x19d890));});});}async[a0_0x46df1a(0x290)](_0x1f794b){const _0x15443d=a0_0x46df1a;let _0x53657d={},_0x291a7e=_0x15443d(0xa3);if(_0x1f794b[_0x15443d(0x290)]?.['mediaMessage']){_0x291a7e=_0x1f794b['buttonMessage']['mediaMessage']?.[_0x15443d(0x68c)][_0x15443d(0x117)]()??_0x15443d(0xa3),_0x53657d['mediaKey']=_0x291a7e[_0x15443d(0x5cf)]()+_0x15443d(0x47e);let _0x1f5fd0=await this[_0x15443d(0x35a)](_0x1f794b[_0x15443d(0x290)][_0x15443d(0x669)]);_0x53657d[_0x15443d(0x64f)]=_0x1f5fd0[_0x15443d(0x64f)][_0x53657d['mediaKey']],_0x53657d[_0x15443d(0x1bb)]='*'+_0x1f794b[_0x15443d(0x290)][_0x15443d(0x73b)]+'*\x0a\x0a'+_0x1f794b['buttonMessage']['description'];}let _0x375724={'text':_0x1f794b[_0x15443d(0x290)]['buttons'][_0x15443d(0x3f6)](_0x419521=>_0x419521[_0x15443d(0x2a7)]),'ids':_0x1f794b[_0x15443d(0x290)][_0x15443d(0x796)][_0x15443d(0x3f6)](_0x28e73d=>_0x28e73d[_0x15443d(0x4a7)])};if(!(0x0,k['arrayUnique'])(_0x375724['text'])||!(0x0,k[_0x15443d(0x61b)])(_0x375724[_0x15443d(0x45c)]))throw new m(_0x15443d(0x22f),_0x15443d(0x782));return await this[_0x15443d(0x724)](_0x1f794b[_0x15443d(0x731)],{'buttonsMessage':{'text':_0x53657d?.[_0x15443d(0x593)]?void 0x0:_0x1f794b[_0x15443d(0x290)][_0x15443d(0x73b)],'contentText':_0x53657d?.[_0x15443d(0x1bb)]??_0x1f794b[_0x15443d(0x290)][_0x15443d(0x6d)],'footerText':_0x1f794b['buttonMessage']?.[_0x15443d(0x204)],'buttons':_0x1f794b[_0x15443d(0x290)]['buttons']['map'](_0x1e67b2=>({'buttonText':{'displayText':_0x1e67b2['buttonText']},'buttonId':_0x1e67b2['buttonId'],'type':0x1})),'headerType':w['proto'][_0x15443d(0x47e)][_0x15443d(0x63f)][_0x15443d(0x672)][_0x291a7e],[_0x53657d?.[_0x15443d(0x593)]]:_0x53657d?.[_0x15443d(0x64f)]}},_0x1f794b?.[_0x15443d(0x6b6)]);}async[a0_0x46df1a(0x14d)](_0x42fb7c){const _0x4d9af6=a0_0x46df1a;return await this['sendMessageWithTyping'](_0x42fb7c[_0x4d9af6(0x731)],{'locationMessage':{'degreesLatitude':_0x42fb7c['locationMessage'][_0x4d9af6(0x15e)],'degreesLongitude':_0x42fb7c['locationMessage'][_0x4d9af6(0x34d)],'name':_0x42fb7c[_0x4d9af6(0x14d)]?.[_0x4d9af6(0x11d)],'address':_0x42fb7c[_0x4d9af6(0x14d)]?.['address']}},_0x42fb7c?.[_0x4d9af6(0x6b6)]);}async[a0_0x46df1a(0x2cd)](_0x5d2382){const _0x480700=a0_0x46df1a;let _0x256883={},_0x3f143c=async _0x43177f=>{const _0x52e928=a0_0x2bf6;let _0x4e9428=_0x52e928(0x6d2)+_0x43177f[_0x52e928(0x70d)]+'\x0aFN:'+_0x43177f[_0x52e928(0x70d)]+'\x0a';_0x43177f[_0x52e928(0xce)]&&(_0x4e9428+=_0x52e928(0x38a)+_0x43177f['organization']+';\x0a'),_0x43177f[_0x52e928(0x614)]&&(_0x4e9428+=_0x52e928(0x4e8)+_0x43177f[_0x52e928(0x614)]+'\x0a'),_0x43177f[_0x52e928(0x53f)]&&(_0x4e9428+=_0x52e928(0x608)+_0x43177f['url']+'\x0a');let _0x11c185='',_0x14542b=0x1;if(_0x43177f[_0x52e928(0x1e6)]){let _0x466de2=_0x43177f[_0x52e928(0x1e6)]['split']('|');for(let _0x33f19f of _0x466de2){let _0x312f9c=await this[_0x52e928(0x210)]({'numbers':[_0x33f19f]}),_0x36c70e=(_0x312f9c['length']>0x0?_0x312f9c[0x0][_0x52e928(0x540)]:this[_0x52e928(0x39f)](_0x33f19f))['replace'](_0x52e928(0x32b),'');_0x11c185+='item'+_0x14542b+_0x52e928(0x79b)+_0x36c70e+':'+_0x33f19f+_0x52e928(0x1ef)+_0x14542b+_0x52e928(0x740),_0x14542b++;}}return _0x4e9428+=_0x11c185+_0x52e928(0x6a7),_0x4e9428;};return _0x5d2382[_0x480700(0x2cd)][_0x480700(0x5e9)]===0x1?_0x256883['contactMessage']={'displayName':_0x5d2382['contactMessage'][0x0]['fullName'],'vcard':await _0x3f143c(_0x5d2382[_0x480700(0x2cd)][0x0])}:_0x256883[_0x480700(0x6df)]={'displayName':_0x5d2382['contactMessage'][_0x480700(0x5e9)]+_0x480700(0x662),'contacts':await Promise['all'](_0x5d2382[_0x480700(0x2cd)][_0x480700(0x3f6)](async _0x4a39cb=>({'displayName':_0x4a39cb[_0x480700(0x70d)],'vcard':await _0x3f143c(_0x4a39cb)})))},await this[_0x480700(0x724)](_0x5d2382[_0x480700(0x731)],{..._0x256883},_0x5d2382?.['options']);}async[a0_0x46df1a(0x1e5)](_0x2a73d5){const _0x25a4c2=a0_0x46df1a;return await this['sendMessageWithTyping'](_0x2a73d5[_0x25a4c2(0x1e5)][_0x25a4c2(0x754)][_0x25a4c2(0x75b)],{'reactionMessage':{'key':_0x2a73d5['reactionMessage'][_0x25a4c2(0x754)],'text':_0x2a73d5['reactionMessage'][_0x25a4c2(0x37f)]}});}async[a0_0x46df1a(0x210)](_0x546f3b){const _0x217a03=a0_0x46df1a;let _0x18b60e=[];for await(let _0x41d200 of _0x546f3b[_0x217a03(0x22d)]){let _0x5a9c44=this[_0x217a03(0x39f)](_0x41d200),_0xe87eb=!0x1;try{if((0x0,w['isJidGroup'])(_0x5a9c44)){let _0x4d827e=(await this[_0x217a03(0x91)][_0x217a03(0x3d9)][_0x217a03(0x404)]({'where':{'_id':_0x5a9c44}},this['instance'][_0x217a03(0x3f4)]))[_0x217a03(0x6d7)];_0x4d827e?(_0xe87eb=!0x0,_0x18b60e[_0x217a03(0x45f)](new ue(_0x4d827e['id'],_0xe87eb,_0x4d827e?.[_0x217a03(0x573)]))):(_0x4d827e=await this['findGroup']({'groupJid':_0x5a9c44},_0x217a03(0x4aa)),_0x18b60e['push'](new ue(_0x4d827e['id'],!!_0x4d827e?.['id'],_0x4d827e?.[_0x217a03(0x573)])));}else{if(_0x5a9c44[_0x217a03(0x3f1)](_0x217a03(0x338)))_0x18b60e[_0x217a03(0x45f)](new ue(_0x5a9c44,!0x0));else{let _0x95eaf2=(await this[_0x217a03(0x1f7)][_0x217a03(0x488)](_0x5a9c44))[0x0];_0x18b60e['push'](new ue(_0x95eaf2[_0x217a03(0x540)],_0x95eaf2['exists']));}}}catch{(0x0,w['isJidGroup'])(_0x5a9c44)||await this[_0x217a03(0x70)](_0x5a9c44),_0x18b60e[_0x217a03(0x45f)](new ue(_0x41d200,!0x1));}}return _0x18b60e;}async['deleteImportedChat'](_0x3de15a){const _0x3aad67=a0_0x46df1a;try{await this[_0x3aad67(0x91)][_0x3aad67(0x3d9)]['findOne']({'where':{'_id':_0x3de15a,'imported':!0x0}},this[_0x3aad67(0x2b1)][_0x3aad67(0x3f4)])&&(await this[_0x3aad67(0x91)][_0x3aad67(0x3d9)]['deleteChat'](_0x3de15a,this['instance'][_0x3aad67(0x3f4)]),this['logger'][_0x3aad67(0x459)](_0x3aad67(0x6a3)+_0x3de15a+_0x3aad67(0x784)));}catch(_0x24ce3d){let _0x1a8d87=_0x3aad67(0x3db),_0x103fd6=_0x24ce3d instanceof Error?_0x24ce3d[_0x3aad67(0x64f)]:typeof _0x24ce3d==_0x3aad67(0xde)?JSON['stringify'](_0x24ce3d):_0x24ce3d,_0x2d8fb3=_0x1a8d87+':\x20'+_0x103fd6;this[_0x3aad67(0xed)][_0x3aad67(0x2fb)](this[_0x3aad67(0x88)]+'\x20('+this['instance'][_0x3aad67(0x3f4)]+_0x3aad67(0x28e)+_0x2d8fb3);}}async['markMessageAsRead'](_0x5b95f2){const _0x2d258f=a0_0x46df1a;try{let _0x38a8af=_0x5b95f2['readMessages'][_0x2d258f(0x57a)](_0x2fbfb6=>(0x0,w[_0x2d258f(0x105)])(_0x2fbfb6[_0x2d258f(0x75b)])||(0x0,w['isJidUser'])(_0x2fbfb6['remoteJid']))[_0x2d258f(0x3f6)](_0x142e6d=>({'remoteJid':_0x142e6d[_0x2d258f(0x75b)],'fromMe':_0x142e6d['fromMe'],'id':_0x142e6d['id']}));await this['client'][_0x2d258f(0x3a0)](_0x38a8af);let _0x4bbdd0=_0x38a8af['map'](_0x33c33c=>this[_0x2d258f(0x22e)](_0x33c33c,{'status':_0x2d258f(0x6fd),'owner':this['instance']['wuid']})),_0x140cc9=_0x38a8af[_0x2d258f(0x3f6)](_0x17b418=>this['repository']['chat'][_0x2d258f(0x4b3)]({'where':{'_id':_0x17b418[_0x2d258f(0x75b)]}},{'unreadcount':0x0},this[_0x2d258f(0x2b1)]['wuid'])),[_0x2e95fe,_0xa6270a]=await Promise[_0x2d258f(0x221)]([Promise[_0x2d258f(0x221)](_0x4bbdd0),Promise[_0x2d258f(0x221)](_0x140cc9)]);return _0xa6270a[_0x2d258f(0x57a)](_0x1e163f=>_0x1e163f!==null)[_0x2d258f(0x14b)](_0x38f3d0=>{const _0x362400=_0x2d258f;j(this[_0x362400(0x88)],_0x362400(0x758),{'chat':_0x38f3d0});}),{'message':_0x2d258f(0x3cb),'read':_0x2d258f(0x3f5)};}catch(_0x2b5cad){let _0x21644a='Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida',_0x199da3=_0x2b5cad instanceof Error?_0x2b5cad[_0x2d258f(0x64f)]:typeof _0x2b5cad==_0x2d258f(0xde)?JSON[_0x2d258f(0x5cc)](_0x2b5cad):_0x2b5cad,_0x478447=_0x21644a+':\x20'+_0x199da3;throw this['logger'][_0x2d258f(0x2fb)](this[_0x2d258f(0x88)]+'\x20('+this[_0x2d258f(0x2b1)][_0x2d258f(0x3f4)]+_0x2d258f(0x28e)+_0x478447),new x(_0x478447);}}async[a0_0x46df1a(0x10e)](_0x30d5b5){const _0x383d8b=a0_0x46df1a;let _0xa5c14e={'where':{'key':{'remoteJid':_0x30d5b5}},'limit':0x1},_0x3935ec=await this[_0x383d8b(0x6b7)](_0xa5c14e);return _0x3935ec||(this[_0x383d8b(0xed)]['error'](_0x383d8b(0x15b)+_0x30d5b5),null);}async[a0_0x46df1a(0x484)](_0x18875c){const _0x227a51=a0_0x46df1a;this['logger'][_0x227a51(0x2c1)](this[_0x227a51(0x88)]+'\x20('+this[_0x227a51(0x2b1)][_0x227a51(0x3f4)]+_0x227a51(0x6c6));try{let _0x815957=_0x18875c[_0x227a51(0x4d4)],_0x292c5d=_0x18875c[_0x227a51(0x3d9)];if(!_0x815957&&_0x292c5d?_0x815957=await this[_0x227a51(0x10e)](_0x292c5d):(_0x815957=_0x18875c[_0x227a51(0x4d4)],_0x815957[_0x227a51(0x71f)]=_0x815957?.[_0x227a51(0x71f)]??Date[_0x227a51(0x72)](),_0x292c5d=_0x815957?.[_0x227a51(0x754)]?.[_0x227a51(0x75b)]),!_0x815957||Object[_0x227a51(0x794)](_0x815957)[_0x227a51(0x5e9)]===0x0)throw new J(_0x227a51(0x43d));this[_0x227a51(0xed)][_0x227a51(0x2c1)](this[_0x227a51(0x88)]+'\x20('+this[_0x227a51(0x2b1)][_0x227a51(0x3f4)]+_0x227a51(0x153)+_0x292c5d);try{await this[_0x227a51(0x1f7)][_0x227a51(0x3ce)]({'archive':_0x18875c[_0x227a51(0x208)],'lastMessages':[_0x815957]},this[_0x227a51(0x39f)](_0x292c5d));}catch(_0x157b82){let _0xb1182a=_0x227a51(0x3ea)+_0x292c5d,_0x20bc82=_0x157b82 instanceof Error?_0x157b82[_0x227a51(0x64f)]:typeof _0x157b82=='object'?JSON[_0x227a51(0x5cc)](_0x157b82):_0x157b82,_0x485c19=_0xb1182a+':\x20'+_0x20bc82;this[_0x227a51(0xed)][_0x227a51(0x2fb)](this['instanceName']+'\x20('+this['instance'][_0x227a51(0x3f4)]+_0x227a51(0x28e)+_0x485c19);}this[_0x227a51(0xed)][_0x227a51(0x2c1)](this[_0x227a51(0x88)]+'\x20('+this['instance'][_0x227a51(0x3f4)]+_0x227a51(0x29c)+_0x292c5d);let _0x1101bf=await this[_0x227a51(0x91)][_0x227a51(0x3d9)][_0x227a51(0x4b3)]({'where':{'_id':_0x815957?.[_0x227a51(0x754)]?.[_0x227a51(0x75b)]}},{'archived':_0x18875c['archive']},this[_0x227a51(0x2b1)]['wuid']);return _0x1101bf?(this[_0x227a51(0xed)][_0x227a51(0x2c1)](this[_0x227a51(0x88)]+'\x20('+this[_0x227a51(0x2b1)][_0x227a51(0x3f4)]+'):Notifying\x20clients\x20for\x20chat:\x20'+JSON['stringify'](_0x1101bf)),j(this[_0x227a51(0x88)],'chats',{'chat':_0x1101bf})):this[_0x227a51(0xed)][_0x227a51(0x2fb)](this[_0x227a51(0x88)]+'\x20('+this[_0x227a51(0x2b1)][_0x227a51(0x3f4)]+_0x227a51(0x707)+_0x292c5d),{'chatId':_0x292c5d,'archived':_0x18875c[_0x227a51(0x208)]};}catch(_0x1fb961){let _0x41ab86=_0x227a51(0x156),_0x460ecf=_0x1fb961 instanceof Error?_0x1fb961[_0x227a51(0x64f)]:typeof _0x1fb961==_0x227a51(0xde)?JSON['stringify'](_0x1fb961):_0x1fb961,_0x544c64=_0x41ab86+':\x20'+_0x460ecf;throw this[_0x227a51(0xed)][_0x227a51(0x2fb)](this['instanceName']+'\x20('+this[_0x227a51(0x2b1)][_0x227a51(0x3f4)]+_0x227a51(0x28e)+_0x544c64),new x(_0x544c64);}}async[a0_0x46df1a(0x278)](_0x4be6f5){const _0x25d5be=a0_0x46df1a;this[_0x25d5be(0xed)][_0x25d5be(0x2c1)](this[_0x25d5be(0x88)]+'\x20('+this[_0x25d5be(0x2b1)]['wuid']+_0x25d5be(0x4cb));try{let _0x1752df=await this[_0x25d5be(0x10e)](_0x4be6f5);if(!_0x1752df||Object[_0x25d5be(0x794)](_0x1752df)[_0x25d5be(0x5e9)]===0x0)throw new J('Last\x20message\x20not\x20found');let _0x25702c=_0x1752df[0x0];this[_0x25d5be(0xed)][_0x25d5be(0x2c1)](this[_0x25d5be(0x88)]+'\x20('+this['instance'][_0x25d5be(0x3f4)]+'):Delete\x20chat\x20in\x20client\x20for\x20number:\x20'+_0x4be6f5);try{await this[_0x25d5be(0x1f7)][_0x25d5be(0x3ce)]({'delete':!0x0,'lastMessages':[{'key':_0x25702c[_0x25d5be(0x754)],'messageTimestamp':_0x25702c[_0x25d5be(0x71f)]}]},this[_0x25d5be(0x39f)](_0x4be6f5));}catch(_0x53c998){this[_0x25d5be(0xed)][_0x25d5be(0x2fb)](_0x25d5be(0x3ea)+_0x4be6f5+':\x20'+_0x53c998['toString']());}this[_0x25d5be(0xed)][_0x25d5be(0x2c1)](this[_0x25d5be(0x88)]+'\x20('+this[_0x25d5be(0x2b1)][_0x25d5be(0x3f4)]+'):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0x4be6f5);return;}catch(_0x48d38c){throw this[_0x25d5be(0xed)][_0x25d5be(0x2fb)](this[_0x25d5be(0x88)]+'\x20('+this[_0x25d5be(0x2b1)][_0x25d5be(0x3f4)]+'):Error\x20occurred\x20while\x20archiving\x20chat:\x20'+_0x48d38c[_0x25d5be(0x49e)]()),new x({'archived':!0x1,'message':[_0x25d5be(0x2a2),_0x48d38c[_0x25d5be(0x49e)]()]});}}async['deleteMessage'](_0x260cfe){const _0x2931c6=a0_0x46df1a;try{let _0x4618ec=await this[_0x2931c6(0x1f7)]['sendMessage'](_0x260cfe[_0x2931c6(0x75b)],{'delete':_0x260cfe});try{let _0x37c60c=await this[_0x2931c6(0x22e)](_0x260cfe,{'status':'DELETED','owner':this['instance'][_0x2931c6(0x3f4)]});this[_0x2931c6(0xed)][_0x2931c6(0x2c1)](this[_0x2931c6(0x88)]+'\x20('+this[_0x2931c6(0x2b1)][_0x2931c6(0x3f4)]+_0x2931c6(0x127)+_0x37c60c);}catch(_0x4b0ed6){this[_0x2931c6(0xed)][_0x2931c6(0x2fb)](_0x2931c6(0x92)+_0x4b0ed6);}return _0x4618ec;}catch(_0x322fa6){throw new x(_0x2931c6(0x1f2),_0x322fa6?.[_0x2931c6(0x49e)]());}}async['getBase64FromMediaMessage'](_0x33a035){const _0x5b9f7a=a0_0x46df1a;try{let _0x4a8fb5=_0x33a035?.[_0x5b9f7a(0x64f)]?_0x33a035:await this[_0x5b9f7a(0x746)](_0x33a035['key'],!0x0);for(let _0x4361e6 of Ra)_0x4a8fb5[_0x5b9f7a(0x64f)][_0x4361e6]&&(_0x4a8fb5[_0x5b9f7a(0x64f)]=_0x4a8fb5[_0x5b9f7a(0x64f)][_0x4361e6][_0x5b9f7a(0x64f)]);let _0xb76975,_0x520d4b;for(let _0x479d14 of $a)if(_0xb76975=_0x4a8fb5['message'][_0x479d14],_0xb76975){_0x520d4b=_0x479d14;break;}if(!_0xb76975)throw _0x5b9f7a(0x232);typeof _0xb76975[_0x5b9f7a(0x593)]==_0x5b9f7a(0xde)&&(_0x4a8fb5[_0x5b9f7a(0x64f)]=JSON[_0x5b9f7a(0xab)](JSON[_0x5b9f7a(0x5cc)](_0x4a8fb5[_0x5b9f7a(0x64f)])));let _0x2c68b8=await(0x0,w[_0x5b9f7a(0x397)])({'key':_0x4a8fb5?.[_0x5b9f7a(0x754)],'message':_0x4a8fb5?.[_0x5b9f7a(0x64f)]},'buffer',{},{'logger':(0x0,Jt[_0x5b9f7a(0x2fa)])({'level':'silent'}),'reuploadRequest':this[_0x5b9f7a(0x1f7)][_0x5b9f7a(0x6e)]});if(!(_0x2c68b8 instanceof Buffer))throw new Error(_0x5b9f7a(0x50b));let _0x52f09c=this[_0x5b9f7a(0x46a)]['get'](_0x5b9f7a(0x723)),_0x24b7af,_0x892312;if(_0xb76975[_0x5b9f7a(0x1e4)])_0x24b7af=_0xb76975['fileName'];else{let _0x3e0837=_0xb76975[_0x5b9f7a(0x87)]?.[_0x5b9f7a(0x7a2)](/\/(\w+)/),_0x5a5e6b=_0x3e0837?_0x3e0837[0x1]:null;if(!_0x5a5e6b)throw new Error(_0x5b9f7a(0x383));_0x24b7af=(0x0,Y['v4'])()+'.'+_0x5a5e6b;}_0x520d4b===_0x5b9f7a(0x586)?_0x892312=_0x5b9f7a(0x3af)+await this[_0x5b9f7a(0x240)](_0x2c68b8['toString'](_0x5b9f7a(0x2c6))):(await this[_0x5b9f7a(0x529)](_0x2c68b8,_0x24b7af),_0x892312='/media/'+_0x24b7af);let _0x1f6065=this[_0x5b9f7a(0x46a)][_0x5b9f7a(0x20f)](_0x5b9f7a(0x67d))[_0x5b9f7a(0x14a)];if(!_0x1f6065){let _0x5af3b8=this[_0x5b9f7a(0x46a)][_0x5b9f7a(0x20f)]('SSL_CONF');_0x1f6065=_0x5b9f7a(0xc3)+(_0x5af3b8&&_0x5af3b8[_0x5b9f7a(0x5fe)][_0x5b9f7a(0x1ed)]('/')[0x4]);}_0x892312=''+_0x1f6065+_0x892312;let _0x449de3=0xc*0x3c*0x3c*0x3e8,_0x15849f={'where':{'_id':_0x4a8fb5[_0x5b9f7a(0x754)]['id']}},_0x4a9caa={'message_normalized.fileUrl':_0x892312,'message_normalized.expires_fileUrl':Date['now']()+_0x449de3};try{let _0x300a8f=await this[_0x5b9f7a(0x91)]['message']['update'](_0x15849f,_0x4a9caa,this[_0x5b9f7a(0x2b1)][_0x5b9f7a(0x3f4)]);_0x300a8f&&j(this[_0x5b9f7a(0x88)],_0x5b9f7a(0x229),{'message':_0x300a8f});}catch(_0x5c312c){let _0x2ba64c=_0x5b9f7a(0x361),_0x23e0f3=_0x5c312c instanceof Error?_0x5c312c[_0x5b9f7a(0x64f)]:typeof _0x5c312c=='object'?JSON[_0x5b9f7a(0x5cc)](_0x5c312c):_0x5c312c,_0x984908=_0x2ba64c+':\x20'+_0x23e0f3;this[_0x5b9f7a(0xed)][_0x5b9f7a(0x2fb)](this['instanceName']+'\x20('+this[_0x5b9f7a(0x2b1)][_0x5b9f7a(0x3f4)]+_0x5b9f7a(0x28e)+_0x984908);}return{'mediaType':_0x520d4b,'fileName':_0xb76975[_0x5b9f7a(0x1e4)],'caption':_0xb76975[_0x5b9f7a(0x3eb)],'size':{'fileLength':_0xb76975[_0x5b9f7a(0x2eb)],'height':_0xb76975[_0x5b9f7a(0x286)],'width':_0xb76975[_0x5b9f7a(0x263)]},'mimetype':_0xb76975[_0x5b9f7a(0x87)],'base64':_0x2c68b8['toString']('base64'),'fileUrl':_0x892312,'expires_fileUrl':Date[_0x5b9f7a(0x72)]()+_0x449de3};}catch(_0x2aa1c7){let _0x250fb7=_0x5b9f7a(0x96),_0x499222=_0x2aa1c7 instanceof Error?_0x2aa1c7[_0x5b9f7a(0x64f)]:typeof _0x2aa1c7=='object'?JSON['stringify'](_0x2aa1c7):_0x2aa1c7,_0x45a8b4=_0x250fb7+':\x20'+_0x499222;throw this[_0x5b9f7a(0xed)]['error'](this['instanceName']+'\x20('+this[_0x5b9f7a(0x2b1)][_0x5b9f7a(0x3f4)]+_0x5b9f7a(0x28e)+_0x45a8b4),new m(_0x45a8b4);}}async[a0_0x46df1a(0x529)](_0x45d65f,_0x2feff2){const _0x3b775d=a0_0x46df1a;let _0x258cd5=U[_0x3b775d(0x2fa)]['join'](__dirname,_0x3b775d(0x5f4));L['existsSync'](_0x258cd5)||L[_0x3b775d(0x547)](_0x258cd5,{'recursive':!0x0});let _0x1890c5=U[_0x3b775d(0x2fa)][_0x3b775d(0x473)](_0x258cd5,_0x2feff2);return new Promise((_0x18aabf,_0x3f1889)=>{const _0x5c2f0f=_0x3b775d;L[_0x5c2f0f(0x2ac)](_0x1890c5,_0x45d65f,_0x4a10ba=>{const _0x2fb648=_0x5c2f0f;_0x4a10ba?(this[_0x2fb648(0xed)][_0x2fb648(0x2fb)](_0x2fb648(0x37a)+(_0x4a10ba instanceof Error?_0x4a10ba[_0x2fb648(0x64f)]:JSON[_0x2fb648(0x5cc)](_0x4a10ba,null,0x2))),_0x3f1889(_0x4a10ba)):(this[_0x2fb648(0xed)][_0x2fb648(0x307)](_0x2fb648(0x772)+_0x1890c5),_0x18aabf(_0x1890c5));});});}async[a0_0x46df1a(0x6c)](_0x40db91){const _0x3c4d20=a0_0x46df1a;return await this[_0x3c4d20(0x91)][_0x3c4d20(0xd0)][_0x3c4d20(0x336)](_0x40db91,this[_0x3c4d20(0x2b1)][_0x3c4d20(0x3f4)]);}async[a0_0x46df1a(0x67b)](){const _0x2c3cc3=a0_0x46df1a;return await this[_0x2c3cc3(0x91)][_0x2c3cc3(0x1ae)][_0x2c3cc3(0x336)]({'where':{}},this[_0x2c3cc3(0x2b1)][_0x2c3cc3(0x3f4)]);}async[a0_0x46df1a(0x6b7)](_0x1b1d78){const _0xcc5e4f=a0_0x46df1a;return await this[_0xcc5e4f(0x91)]['message'][_0xcc5e4f(0x336)](_0x1b1d78,this['instance'][_0xcc5e4f(0x3f4)]);}async['fetchChats'](){const _0x22524d=a0_0x46df1a;return this[_0x22524d(0x91)]['chat'][_0x22524d(0x19e)](this[_0x22524d(0x2b1)]['wuid']),this[_0x22524d(0x91)][_0x22524d(0x3d9)][_0x22524d(0x7ab)](this[_0x22524d(0x2b1)][_0x22524d(0x3f4)]),this[_0x22524d(0x91)][_0x22524d(0x3d9)][_0x22524d(0x56c)](this[_0x22524d(0x2b1)]['wuid']),this[_0x22524d(0x91)]['chat']['updateMissingCustomFields'](this[_0x22524d(0x2b1)][_0x22524d(0x3f4)]),await this[_0x22524d(0x91)][_0x22524d(0x3d9)]['find']({'where':{}},this[_0x22524d(0x2b1)]['wuid']);}async[a0_0x46df1a(0x5c7)](_0x221ec1){const _0x4204c0=a0_0x46df1a;try{if(!Array[_0x4204c0(0x119)](_0x221ec1)||_0x221ec1[_0x4204c0(0x5e9)]===0x0)throw new Error('Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.');let _0x50dfef=[],_0x353276=[];for(let _0x277354 of _0x221ec1){if(_0x277354[_0x4204c0(0x778)])_0x277354[_0x4204c0(0x778)]=this[_0x4204c0(0x39f)](_0x277354[_0x4204c0(0x778)]);else continue;await this[_0x4204c0(0x91)][_0x4204c0(0x3d9)][_0x4204c0(0x404)]({'where':{'_id':_0x277354[_0x4204c0(0x778)]}},this[_0x4204c0(0x2b1)][_0x4204c0(0x3f4)])?_0x353276[_0x4204c0(0x45f)]({'_id':_0x277354[_0x4204c0(0x778)],'leadInfo':_0x277354[_0x4204c0(0x4df)],'owner':this[_0x4204c0(0x2b1)]['wuid']}):_0x50dfef[_0x4204c0(0x45f)]({'_id':_0x277354[_0x4204c0(0x778)],'owner':this[_0x4204c0(0x2b1)][_0x4204c0(0x3f4)],'leadInfo':_0x277354['leadInfo'],'imported':!0x0});}return _0x353276[_0x4204c0(0x5e9)]>0x0&&await this[_0x4204c0(0x91)][_0x4204c0(0x3d9)][_0x4204c0(0x4b4)](_0x353276[_0x4204c0(0x3f6)](_0x575e41=>({'query':{'where':{'_id':_0x575e41[_0x4204c0(0x778)],'owner':this['instance'][_0x4204c0(0x3f4)]}},'update':_0x575e41}))),_0x50dfef[_0x4204c0(0x5e9)]>0x0&&await this['repository']['chat']['insertMany'](_0x50dfef,this[_0x4204c0(0x2b1)][_0x4204c0(0x3f4)]),{'updated':_0x353276['length'],'inserted':_0x50dfef[_0x4204c0(0x5e9)]};}catch(_0xcfd13a){let _0x10f98c=_0x4204c0(0x6ab),_0xb4a6ef=_0xcfd13a instanceof Error?_0xcfd13a['message']:typeof _0xcfd13a==_0x4204c0(0xde)?JSON[_0x4204c0(0x5cc)](_0xcfd13a):_0xcfd13a,_0x4d9050=_0x10f98c+':\x20'+_0xb4a6ef;throw this['logger'][_0x4204c0(0x2fb)](this[_0x4204c0(0x88)]+'\x20('+this[_0x4204c0(0x2b1)]['wuid']+'):\x20'+_0x4d9050),new m(_0x4d9050);}}async['importChats'](_0x56c001){const _0x160d63=a0_0x46df1a;try{if(!Array[_0x160d63(0x119)](_0x56c001)||_0x56c001[_0x160d63(0x5e9)]===0x0)throw new Error(_0x160d63(0xca));let _0x14d77f=0x64,_0x5c8dfc=0x0;for(let _0x55d1d9=0x0;_0x55d1d9<_0x56c001['length'];_0x55d1d9+=_0x14d77f){let _0x5289f6=_0x56c001['slice'](_0x55d1d9,_0x55d1d9+_0x14d77f),{updated:_0x1f0389}=await this[_0x160d63(0x331)](_0x5289f6);_0x5c8dfc+=_0x1f0389;}return{'updated':_0x5c8dfc};}catch(_0x451b4b){let _0x5e85f3='Erro\x20ao\x20importar\x20chats',_0x514830=_0x451b4b instanceof Error?_0x451b4b[_0x160d63(0x64f)]:typeof _0x451b4b==_0x160d63(0xde)?JSON[_0x160d63(0x5cc)](_0x451b4b):_0x451b4b,_0x222f08=_0x5e85f3+':\x20'+_0x514830;throw this[_0x160d63(0xed)]['error'](this[_0x160d63(0x88)]+'\x20('+this[_0x160d63(0x2b1)][_0x160d63(0x3f4)]+_0x160d63(0x28e)+_0x222f08),new m(_0x222f08);}}async[a0_0x46df1a(0x331)](_0x48d7ed){const _0x4d93ae=a0_0x46df1a;try{let _0x30da50=await this[_0x4d93ae(0x91)][_0x4d93ae(0x1ae)][_0x4d93ae(0x336)]({'where':{}},this[_0x4d93ae(0x2b1)][_0x4d93ae(0x3f4)]),_0x178079=new Set(_0x30da50[_0x4d93ae(0x3f6)](_0x161438=>_0x161438['_id'])),_0x1aaaf2=[],_0x2e867c=[];for(let _0x582196 of _0x48d7ed){if(!_0x582196[_0x4d93ae(0x778)])continue;_0x582196[_0x4d93ae(0x778)]=this[_0x4d93ae(0x39f)](_0x582196[_0x4d93ae(0x778)]);let _0x1a2c31=await this['repository'][_0x4d93ae(0x3d9)][_0x4d93ae(0x404)]({'where':{'_id':_0x582196['_id']}},this[_0x4d93ae(0x2b1)][_0x4d93ae(0x3f4)]),_0x2d64b6={};if(Object['entries'](_0x582196[_0x4d93ae(0x4df)])['forEach'](([_0x12051a,_0x2cff26])=>{_0x2d64b6['leadInfo.'+_0x12051a]=_0x2cff26;}),_0x1a2c31&&!_0x1a2c31[_0x4d93ae(0x371)]){let _0x219d4b=(_0x582196[_0x4d93ae(0x4df)][_0x4d93ae(0x39b)]||[])[_0x4d93ae(0x57a)](_0x4b20fb=>_0x178079[_0x4d93ae(0x485)](_0x4b20fb)),_0x41bbf7=new Set(_0x1a2c31[_0x4d93ae(0x4df)][_0x4d93ae(0x39b)]||[]),_0x4c7c69=_0x219d4b[_0x4d93ae(0x57a)](_0x16a9ee=>!_0x41bbf7[_0x4d93ae(0x485)](_0x16a9ee)),_0x106439=[..._0x41bbf7][_0x4d93ae(0x57a)](_0x254a39=>!_0x219d4b[_0x4d93ae(0x3f1)](_0x254a39));_0x2e867c['push'](..._0x4c7c69[_0x4d93ae(0x3f6)](_0x490390=>this[_0x4d93ae(0x329)](_0x490390,_0x582196[_0x4d93ae(0x778)]))),_0x2e867c[_0x4d93ae(0x45f)](..._0x106439[_0x4d93ae(0x3f6)](_0x3d897c=>this[_0x4d93ae(0x6a5)](_0x3d897c,_0x582196[_0x4d93ae(0x778)]))),_0x582196['leadInfo'][_0x4d93ae(0x39b)]=_0x219d4b,_0x1aaaf2[_0x4d93ae(0x45f)]({'query':{'where':{'_id':_0x582196['_id'],'owner':this[_0x4d93ae(0x2b1)][_0x4d93ae(0x3f4)]}},'update':_0x2d64b6});}else _0x2d64b6[_0x4d93ae(0x371)]=!0x0,_0x1aaaf2[_0x4d93ae(0x45f)]({'query':{'where':{'_id':_0x582196[_0x4d93ae(0x778)],'owner':this['instance']['wuid']}},'update':_0x2d64b6});}let _0x170f10=await this[_0x4d93ae(0x91)][_0x4d93ae(0x3d9)][_0x4d93ae(0x4b4)](_0x1aaaf2);return await Promise[_0x4d93ae(0x221)](_0x2e867c),{'updated':_0x170f10};}catch(_0xace250){let _0x26c7e9=_0x4d93ae(0x6ab),_0xc8885b=_0xace250 instanceof Error?_0xace250[_0x4d93ae(0x64f)]:typeof _0xace250==_0x4d93ae(0xde)?JSON[_0x4d93ae(0x5cc)](_0xace250):_0xace250,_0x185c1c=_0x26c7e9+':\x20'+_0xc8885b;throw this[_0x4d93ae(0xed)]['error'](this[_0x4d93ae(0x88)]+'\x20('+this[_0x4d93ae(0x2b1)]['wuid']+_0x4d93ae(0x28e)+_0x185c1c),new m(_0x185c1c);}}async['fetchPrivacySettings'](){const _0x5f0d89=a0_0x46df1a;return await this[_0x5f0d89(0x1f7)][_0x5f0d89(0x645)]();}async[a0_0x46df1a(0x2b5)](_0x814eb0){const _0x5d0367=a0_0x46df1a;try{return await this['client'][_0x5d0367(0x151)](_0x814eb0[_0x5d0367(0x4ce)]['readreceipts']),await this[_0x5d0367(0x1f7)]['updateProfilePicturePrivacy'](_0x814eb0['privacySettings']['profile']),await this['client']['updateStatusPrivacy'](_0x814eb0['privacySettings'][_0x5d0367(0x16f)]),await this['client'][_0x5d0367(0x599)](_0x814eb0[_0x5d0367(0x4ce)][_0x5d0367(0x3a4)]),await this[_0x5d0367(0x1f7)][_0x5d0367(0x597)](_0x814eb0['privacySettings']['last']),await this[_0x5d0367(0x1f7)][_0x5d0367(0x426)](_0x814eb0['privacySettings'][_0x5d0367(0x215)]),this[_0x5d0367(0x1f7)]?.['ws']?.['close'](),{'update':_0x5d0367(0x3f5),'data':{'readreceipts':_0x814eb0[_0x5d0367(0x4ce)][_0x5d0367(0x68a)],'profile':_0x814eb0[_0x5d0367(0x4ce)][_0x5d0367(0x4e2)],'status':_0x814eb0[_0x5d0367(0x4ce)][_0x5d0367(0x16f)],'online':_0x814eb0['privacySettings']['online'],'last':_0x814eb0['privacySettings'][_0x5d0367(0x681)],'groupadd':_0x814eb0['privacySettings'][_0x5d0367(0x215)]}};}catch(_0x3ed20d){let _0x306f46=_0x5d0367(0x690),_0x4aaa02=_0x3ed20d instanceof Error?_0x3ed20d[_0x5d0367(0x64f)]:typeof _0x3ed20d==_0x5d0367(0xde)?JSON[_0x5d0367(0x5cc)](_0x3ed20d):_0x3ed20d,_0x110a70=_0x306f46+':\x20'+_0x4aaa02;throw this[_0x5d0367(0xed)]['error'](this[_0x5d0367(0x88)]+'\x20('+this[_0x5d0367(0x2b1)][_0x5d0367(0x3f4)]+_0x5d0367(0x28e)+_0x110a70),new m(_0x110a70);}}async[a0_0x46df1a(0x59e)](_0x310992){const _0x351ef3=a0_0x46df1a;let _0x4678db=(_0x310992?this['createJid'](_0x310992):this['client']?.[_0x351ef3(0x576)]?.['id'])[_0x351ef3(0x420)](/:\d{1,2}@/g,'@');this[_0x351ef3(0xed)][_0x351ef3(0x2c1)](this['instanceName']+'\x20('+this[_0x351ef3(0x2b1)][_0x351ef3(0x3f4)]+'):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20'+_0x4678db);let _0x142fde=await this['repository'][_0x351ef3(0xd0)]['findOne']({'where':{'_id':_0x4678db}},this[_0x351ef3(0x2b1)]['wuid']),_0x28b98e=_0x142fde?_0x142fde[_0x351ef3(0x242)]:null;try{let _0x5ca0ca=(await this[_0x351ef3(0x210)]({'numbers':[_0x4678db]}))?.[_0x351ef3(0x741)](),_0x12ae2d=(await this[_0x351ef3(0x67c)](_0x4678db,null,!0x1))[_0x351ef3(0x248)]['pictureUrl'],_0x4f4fb7=await this[_0x351ef3(0x2f4)](_0x5ca0ca?.[_0x351ef3(0x540)]),_0x444c59=await this[_0x351ef3(0x698)](_0x5ca0ca?.[_0x351ef3(0x540)]),_0x250dea=(await this[_0x351ef3(0x67c)](_0x4678db,null,!0x1))[_0x351ef3(0x248)]['name'],_0x5922fb=await this[_0x351ef3(0x91)][_0x351ef3(0x3d9)][_0x351ef3(0x404)]({'where':{'_id':_0x4678db}},this[_0x351ef3(0x2b1)][_0x351ef3(0x3f4)]),_0x54eaeb={'imagechat':_0x12ae2d,'contactname':_0x28b98e||null,'pushName':_0x250dea,'status':_0x4f4fb7?.['status'],'isBusiness':_0x444c59[_0x351ef3(0x325)],'email':_0x444c59?.[_0x351ef3(0x614)],'description':_0x444c59?.[_0x351ef3(0x6d)],'website':_0x444c59?.['website']?.['shift'](),'lastcache':Date[_0x351ef3(0x72)](),'imported':!_0x5922fb},_0x3d5995=await this[_0x351ef3(0x91)]['chat'][_0x351ef3(0x4b3)]({'where':{'_id':_0x4678db}},_0x54eaeb,this[_0x351ef3(0x2b1)]['wuid']),_0x473c97={'owner':this['instance'][_0x351ef3(0x3f4)],'_id':_0x4678db,'profilePictureUrl':_0x12ae2d,'status':_0x4f4fb7?.[_0x351ef3(0x16f)]};return this[_0x351ef3(0x91)][_0x351ef3(0xd0)][_0x351ef3(0x75)]([_0x473c97],this[_0x351ef3(0x2b1)][_0x351ef3(0x3f4)]),_0x3d5995&&j(this[_0x351ef3(0x88)],'chats',{'chat':_0x3d5995}),{'wuid':_0x5ca0ca?.[_0x351ef3(0x540)]||_0x4678db,'name':_0x5ca0ca?.['name'],'pushName':_0x250dea,'numberExists':_0x5ca0ca?.[_0x351ef3(0x297)],'picture':_0x12ae2d,'status':_0x4f4fb7?.[_0x351ef3(0x16f)],'isBusiness':_0x444c59[_0x351ef3(0x325)],'email':_0x444c59?.[_0x351ef3(0x614)],'description':_0x444c59?.[_0x351ef3(0x6d)],'website':_0x444c59?.[_0x351ef3(0xbf)]?.[_0x351ef3(0x741)]()};}catch(_0x4dd78e){return this[_0x351ef3(0xed)][_0x351ef3(0x2fb)](_0x351ef3(0xb4)+(_0x4dd78e instanceof Error?_0x4dd78e[_0x351ef3(0x64f)]:JSON[_0x351ef3(0x5cc)](_0x4dd78e,null,0x2))),{};}}async[a0_0x46df1a(0x698)](_0x1adb5c){const _0x2b544a=a0_0x46df1a;this[_0x2b544a(0xed)][_0x2b544a(0x2c1)](this['instanceName']+'\x20('+this[_0x2b544a(0x2b1)]['wuid']+_0x2b544a(0x704));try{let _0x427e9f=_0x1adb5c?this[_0x2b544a(0x39f)](_0x1adb5c):this['instance']['wuid'],_0x4eae6b=await this[_0x2b544a(0x1f7)][_0x2b544a(0x53a)](_0x427e9f);return this['logger'][_0x2b544a(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0x2b544a(0x3f4)]+_0x2b544a(0x303)),_0x4eae6b?(this[_0x2b544a(0xed)][_0x2b544a(0x2c1)](this[_0x2b544a(0x88)]+'\x20('+this[_0x2b544a(0x2b1)]['wuid']+_0x2b544a(0x559)),{'isBusiness':!0x0,..._0x4eae6b}):{'isBusiness':!0x1,'message':_0x2b544a(0x719),...(await this['whatsappNumber']({'numbers':[_0x427e9f]}))?.[_0x2b544a(0x741)]()};}catch(_0x2d615f){let _0x4faa97='Falha\x20ao\x20processar\x20fetchBusinessProfile',_0x1b0738=_0x2d615f instanceof Error?_0x2d615f[_0x2b544a(0x64f)]:typeof _0x2d615f==_0x2b544a(0xde)?JSON[_0x2b544a(0x5cc)](_0x2d615f):_0x2d615f,_0x1920af=_0x4faa97+':\x20'+_0x1b0738;throw this['logger'][_0x2b544a(0x2fb)](this[_0x2b544a(0x88)]+'\x20('+this[_0x2b544a(0x2b1)]['wuid']+'):\x20'+_0x1920af),new x(_0x1920af);}}async[a0_0x46df1a(0x2f4)](_0xc9e000){const _0x2fbfad=a0_0x46df1a;let _0x281b39=this[_0x2fbfad(0x39f)](_0xc9e000);try{return{'wuid':_0x281b39,'status':(await this[_0x2fbfad(0x1f7)]['fetchStatus'](_0x281b39))?.[_0x2fbfad(0x16f)]};}catch{return{'wuid':_0x281b39,'status':null};}}async['updateProfileName'](_0x226098){const _0x3f7234=a0_0x46df1a;try{return await this[_0x3f7234(0x1f7)][_0x3f7234(0x13b)](_0x226098),{'update':_0x3f7234(0x3f5)};}catch(_0x396166){let _0x33f0a4=_0x3f7234(0x6aa),_0x2139c0=_0x396166 instanceof Error?_0x396166[_0x3f7234(0x64f)]:typeof _0x396166=='object'?JSON['stringify'](_0x396166):_0x396166,_0x438c63=_0x33f0a4+':\x20'+_0x2139c0;throw this['logger'][_0x3f7234(0x2fb)](this[_0x3f7234(0x88)]+'\x20('+this[_0x3f7234(0x2b1)]['wuid']+_0x3f7234(0x28e)+_0x438c63),new x(_0x438c63);}}async[a0_0x46df1a(0x1d3)](_0x566d87){const _0x107f0e=a0_0x46df1a;try{return await this['client'][_0x107f0e(0x1d3)](_0x566d87),{'update':_0x107f0e(0x3f5)};}catch(_0x4cd8c7){let _0x5e78da=_0x107f0e(0x39c),_0x4c7b34=_0x4cd8c7 instanceof Error?_0x4cd8c7[_0x107f0e(0x64f)]:typeof _0x4cd8c7==_0x107f0e(0xde)?JSON[_0x107f0e(0x5cc)](_0x4cd8c7):_0x4cd8c7,_0x4ed45d=_0x5e78da+':\x20'+_0x4c7b34;throw this[_0x107f0e(0xed)]['error'](this[_0x107f0e(0x88)]+'\x20('+this['instance']['wuid']+_0x107f0e(0x28e)+_0x4ed45d),new x(_0x4ed45d);}}async[a0_0x46df1a(0x79a)](_0x28bc04){const _0xfe22ab=a0_0x46df1a;try{let _0x39c1f7;if((0x0,k[_0xfe22ab(0xa9)])(_0x28bc04)){let _0x3cc216=new Date()['getTime'](),_0x16f82e=_0x28bc04+_0xfe22ab(0x1ca)+_0x3cc216;_0x39c1f7=(await Q[_0xfe22ab(0x2fa)][_0xfe22ab(0x20f)](_0x16f82e,{'responseType':_0xfe22ab(0x5ba)}))[_0xfe22ab(0x72b)];}else{if((0x0,k[_0xfe22ab(0x3ec)])(_0x28bc04))_0x39c1f7=Buffer[_0xfe22ab(0x13c)](_0x28bc04,_0xfe22ab(0x2c6));else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this[_0xfe22ab(0x1f7)][_0xfe22ab(0x79a)](this[_0xfe22ab(0x2b1)][_0xfe22ab(0x3f4)],_0x39c1f7),{'update':_0xfe22ab(0x3f5)};}catch(_0x2e7be5){let _0x507a7f=_0xfe22ab(0x2f1),_0x28d536=_0x2e7be5 instanceof Error?_0x2e7be5['message']:typeof _0x2e7be5=='object'?JSON['stringify'](_0x2e7be5):_0x2e7be5,_0x2cc00f=_0x507a7f+':\x20'+_0x28d536;throw this[_0xfe22ab(0xed)]['error'](this[_0xfe22ab(0x88)]+'\x20('+this[_0xfe22ab(0x2b1)]['wuid']+_0xfe22ab(0x28e)+_0x2cc00f),new x(_0x2cc00f);}}async['removeProfilePicture'](){const _0x392805=a0_0x46df1a;try{return await this[_0x392805(0x1f7)][_0x392805(0x1c7)](this[_0x392805(0x2b1)][_0x392805(0x3f4)]),{'update':_0x392805(0x3f5)};}catch(_0x30718c){let _0x5aff69=_0x392805(0x6f1),_0x5e905d=_0x30718c instanceof Error?_0x30718c[_0x392805(0x64f)]:typeof _0x30718c==_0x392805(0xde)?JSON[_0x392805(0x5cc)](_0x30718c):_0x30718c,_0x40437c=_0x5aff69+':\x20'+_0x5e905d;throw this[_0x392805(0xed)][_0x392805(0x2fb)](this[_0x392805(0x88)]+'\x20('+this[_0x392805(0x2b1)]['wuid']+_0x392805(0x28e)+_0x40437c),new x(_0x40437c);}}async['createGroup'](_0x424a43){const _0x17d615=a0_0x46df1a;try{let _0x34b027=(await this['whatsappNumber']({'numbers':_0x424a43[_0x17d615(0x4ab)]}))[_0x17d615(0x57a)](_0x5d20b1=>_0x5d20b1[_0x17d615(0x297)])[_0x17d615(0x3f6)](_0x29fd12=>_0x29fd12['jid']),{id:_0x2ecacd}=await this['client'][_0x17d615(0x3d4)](_0x424a43[_0x17d615(0x573)],_0x34b027);_0x424a43?.[_0x17d615(0x6d)]&&await this[_0x17d615(0x1f7)][_0x17d615(0x39d)](_0x2ecacd,_0x424a43[_0x17d615(0x6d)]);let _0x346c67=await this['client']['groupMetadata'](_0x2ecacd);return _0x346c67[_0x17d615(0x48a)]=[],{'metadata':_0x346c67};}catch(_0x3d0c27){let _0x522282=_0x17d615(0x497),_0x1d52e6=_0x3d0c27 instanceof Error?_0x3d0c27[_0x17d615(0x64f)]:typeof _0x3d0c27==_0x17d615(0xde)?JSON[_0x17d615(0x5cc)](_0x3d0c27):_0x3d0c27,_0x340abc=_0x522282+':\x20'+_0x1d52e6;throw this[_0x17d615(0xed)][_0x17d615(0x2fb)](this[_0x17d615(0x88)]+'\x20('+this[_0x17d615(0x2b1)]['wuid']+_0x17d615(0x28e)+_0x340abc),new x(_0x340abc);}}async[a0_0x46df1a(0x5f3)](_0x2555fa){const _0x47135a=a0_0x46df1a;try{if(_0x2555fa['restrict']===!0x0&&await this[_0x47135a(0x1f7)][_0x47135a(0x305)](_0x2555fa[_0x47135a(0x2fd)],_0x47135a(0x107)),_0x2555fa['restrict']===!0x1&&await this['client']['groupSettingUpdate'](_0x2555fa[_0x47135a(0x2fd)],_0x47135a(0x3f3)),_0x2555fa[_0x47135a(0xfc)]===!0x0&&await this['client'][_0x47135a(0x305)](_0x2555fa['groupJid'],_0x47135a(0xe2)),_0x2555fa[_0x47135a(0xfc)]===!0x1&&await this['client'][_0x47135a(0x305)](_0x2555fa[_0x47135a(0x2fd)],_0x47135a(0x122)),_0x2555fa[_0x47135a(0x2f2)]===!0x0&&await this[_0x47135a(0x1f7)][_0x47135a(0x48f)](_0x2555fa[_0x47135a(0x2fd)],'all_member_add'),_0x2555fa[_0x47135a(0x2f2)]===!0x1&&await this[_0x47135a(0x1f7)][_0x47135a(0x48f)](_0x2555fa[_0x47135a(0x2fd)],_0x47135a(0x1b0)),_0x2555fa['joinApprovalMode']===!0x0&&await this[_0x47135a(0x1f7)]['groupJoinApprovalMode'](_0x2555fa[_0x47135a(0x2fd)],'on'),_0x2555fa[_0x47135a(0x5fc)]===!0x1&&await this[_0x47135a(0x1f7)][_0x47135a(0x66d)](_0x2555fa[_0x47135a(0x2fd)],'off'),typeof _0x2555fa['expiration']<'u'&&_0x2555fa[_0x47135a(0x6dd)]!==null&&await this[_0x47135a(0x1f7)][_0x47135a(0x546)](_0x2555fa[_0x47135a(0x2fd)],_0x2555fa[_0x47135a(0x6dd)]),_0x2555fa[_0x47135a(0x11d)]&&await this[_0x47135a(0x1f7)]['groupUpdateSubject'](_0x2555fa['groupJid'],_0x2555fa[_0x47135a(0x11d)]),_0x2555fa[_0x47135a(0x6d)]&&await this[_0x47135a(0x1f7)]['groupUpdateDescription'](_0x2555fa[_0x47135a(0x2fd)],_0x2555fa[_0x47135a(0x6d)]),_0x2555fa['image']){let _0x35e10d;if((0x0,k[_0x47135a(0xa9)])(_0x2555fa[_0x47135a(0x24c)])){let _0x46e3d1=new Date()[_0x47135a(0x2bc)](),_0x2f83fb=_0x2555fa[_0x47135a(0x24c)]+_0x47135a(0x1ca)+_0x46e3d1;_0x35e10d=(await Q[_0x47135a(0x2fa)][_0x47135a(0x20f)](_0x2f83fb,{'responseType':_0x47135a(0x5ba)}))[_0x47135a(0x72b)];}else{if((0x0,k['isBase64'])(_0x2555fa[_0x47135a(0x24c)]))_0x35e10d=Buffer['from'](_0x2555fa[_0x47135a(0x24c)],_0x47135a(0x2c6));else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}await this['client'][_0x47135a(0x79a)](_0x2555fa[_0x47135a(0x2fd)],_0x35e10d);}return await this['findGroup']({'groupJid':_0x2555fa['groupJid']});}catch(_0x263334){let _0x2b75e0=_0x47135a(0x59a),_0x9690b0=_0x263334 instanceof Error?_0x263334['message']:typeof _0x263334==_0x47135a(0xde)?JSON[_0x47135a(0x5cc)](_0x263334):_0x263334,_0x13263e=_0x2b75e0+':\x20'+_0x9690b0;throw this[_0x47135a(0xed)][_0x47135a(0x2fb)](this[_0x47135a(0x88)]+'\x20('+this[_0x47135a(0x2b1)]['wuid']+_0x47135a(0x28e)+_0x13263e),new x(_0x13263e);}}async[a0_0x46df1a(0x36a)](_0x4f5351){const _0x2dabe2=a0_0x46df1a;try{if(_0x4f5351['action']===_0x2dabe2(0x5b3)||_0x4f5351['action']===_0x2dabe2(0x74)){let _0x51c32a=_0x4f5351[_0x2dabe2(0x4ab)][_0x2dabe2(0x3f6)](_0x555429=>this[_0x2dabe2(0x39f)](_0x555429));await this[_0x2dabe2(0x1f7)][_0x2dabe2(0x29a)](_0x4f5351[_0x2dabe2(0x2fd)],_0x51c32a,_0x4f5351[_0x2dabe2(0x70c)]);}else{if(_0x4f5351[_0x2dabe2(0x70c)]==='add'){let _0xad279f=(await this[_0x2dabe2(0x210)]({'numbers':_0x4f5351['participants']}))[_0x2dabe2(0x57a)](_0x4fb066=>_0x4fb066[_0x2dabe2(0x297)])[_0x2dabe2(0x3f6)](_0x2e3946=>this[_0x2dabe2(0x39f)](_0x2e3946[_0x2dabe2(0x540)]));if(_0xad279f[_0x2dabe2(0x5e9)]===0x0)throw new m(_0x2dabe2(0x296));await this[_0x2dabe2(0x1f7)][_0x2dabe2(0x15c)](_0x4f5351[_0x2dabe2(0x2fd)],_0xad279f,_0x2dabe2(0x722));}else{let _0x1e42a7=_0x4f5351[_0x2dabe2(0x4ab)][_0x2dabe2(0x3f6)](_0x374ff4=>this[_0x2dabe2(0x39f)](_0x374ff4));await this['client']['groupParticipantsUpdate'](_0x4f5351['groupJid'],_0x1e42a7,_0x4f5351[_0x2dabe2(0x70c)]);}}return await this['findGroup']({'groupJid':_0x4f5351[_0x2dabe2(0x2fd)]});}catch(_0x45d7f4){let _0xcb0526=_0x2dabe2(0x1cb),_0x119540=_0x45d7f4 instanceof Error?_0x45d7f4[_0x2dabe2(0x64f)]:typeof _0x45d7f4==_0x2dabe2(0xde)?JSON['stringify'](_0x45d7f4):_0x45d7f4,_0x2f9ea0=_0xcb0526+':\x20'+_0x119540;throw this[_0x2dabe2(0xed)]['error'](this[_0x2dabe2(0x88)]+'\x20('+this[_0x2dabe2(0x2b1)][_0x2dabe2(0x3f4)]+'):\x20'+_0x2f9ea0),new m(_0x2f9ea0);}}async[a0_0x46df1a(0x748)](_0x5e7802){const _0x370adf=a0_0x46df1a;try{return await this[_0x370adf(0x1f7)][_0x370adf(0x748)](_0x5e7802[_0x370adf(0x2aa)]);}catch(_0x4a5369){let _0x47ec2d=_0x370adf(0x75c),_0x13c778=_0x4a5369 instanceof Error?_0x4a5369[_0x370adf(0x64f)]:typeof _0x4a5369==_0x370adf(0xde)?JSON['stringify'](_0x4a5369):_0x4a5369,_0x484221=_0x47ec2d+':\x20'+_0x13c778;throw this[_0x370adf(0xed)][_0x370adf(0x2fb)](this['instanceName']+'\x20('+this[_0x370adf(0x2b1)][_0x370adf(0x3f4)]+_0x370adf(0x28e)+_0x484221),new m(_0x484221);}}async[a0_0x46df1a(0x200)](_0x34298e,_0x237668='out'){const _0x240f15=a0_0x46df1a;try{let _0x29847a=await this[_0x240f15(0x91)][_0x240f15(0x3d9)][_0x240f15(0x404)]({'where':{'_id':_0x34298e[_0x240f15(0x2fd)]}},this[_0x240f15(0x2b1)][_0x240f15(0x3f4)]),_0x518aee=_0x29847a?_0x29847a[_0x240f15(0x6d7)]:null,_0x1e25eb=0x18*0x3c*0x3c*0x3e8;if(!_0x518aee||_0x518aee[_0x240f15(0x487)]&&Date[_0x240f15(0x72)]()-_0x518aee[_0x240f15(0x487)]>_0x1e25eb){let _0x1f89ba=await this[_0x240f15(0x1f7)][_0x240f15(0x791)](_0x34298e[_0x240f15(0x2fd)]);if(_0x1f89ba[_0x240f15(0x661)]=_0x1f89ba?.[_0x240f15(0x661)]&&_0x1f89ba[_0x240f15(0x661)]['toString']()[_0x240f15(0x5e9)]<0xd?_0x1f89ba?.[_0x240f15(0x661)]*0x3e8:_0x1f89ba?.[_0x240f15(0x661)]||null,_0x1f89ba[_0x240f15(0x74c)]=_0x1f89ba?.['creation']&&_0x1f89ba[_0x240f15(0x74c)][_0x240f15(0x49e)]()['length']<0xd?_0x1f89ba?.[_0x240f15(0x74c)]*0x3e8:_0x1f89ba?.[_0x240f15(0x74c)]||null,_0x518aee={..._0x1f89ba,'lastUpdate':Date['now']()},!_0x1f89ba)return;}let _0xd6994d=_0x518aee[_0x240f15(0x4ab)][_0x240f15(0x6ee)](_0x4f7276=>_0x4f7276['id']===this[_0x240f15(0x2b1)][_0x240f15(0x3f4)]+_0x240f15(0x32b)&&_0x4f7276['admin']!=null);!_0x518aee[_0x240f15(0x2aa)]&&_0xd6994d&&(_0x518aee[_0x240f15(0x2aa)]=(await this['inviteCode'](_0x34298e,!0x1))[_0x240f15(0x102)]);let _0x162b77=(!_0x518aee[_0x240f15(0xfc)]||_0xd6994d)&&(!_0x518aee[_0x240f15(0x31a)]||_0x518aee[_0x240f15(0x31a)]&&_0x518aee['isCommunityAnnounce']&&_0xd6994d);_0x518aee[_0x240f15(0x6c4)]=_0xd6994d,_0x518aee[_0x240f15(0x166)]=_0x162b77;let _0x4701ce=[];if(_0xd6994d&&_0x518aee[_0x240f15(0x5fc)])try{_0x4701ce=await this['client'][_0x240f15(0x111)](_0x34298e[_0x240f15(0x2fd)]),_0x518aee[_0x240f15(0x40d)]=Date['now']();}catch(_0x344271){this['logger']['verbose'](this[_0x240f15(0x88)]+'\x20('+this[_0x240f15(0x2b1)][_0x240f15(0x3f4)]+'):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20'+_0x34298e['groupJid']+':\x20'+(_0x344271 instanceof Error?_0x344271[_0x240f15(0x64f)]:JSON['stringify'](_0x344271,null,0x2)));}try{_0x518aee[_0x240f15(0x24c)]=(await this[_0x240f15(0x67c)](_0x34298e[_0x240f15(0x2fd)],null,!0x0))[_0x240f15(0x248)][_0x240f15(0x4e7)];}catch(_0x441ffb){this[_0x240f15(0xed)]['verbose'](this[_0x240f15(0x88)]+'\x20('+this['instance'][_0x240f15(0x3f4)]+_0x240f15(0x4be)+_0x34298e[_0x240f15(0x2fd)]+':\x20'+(_0x441ffb instanceof Error?_0x441ffb[_0x240f15(0x64f)]:JSON[_0x240f15(0x5cc)](_0x441ffb,null,0x2)));}let _0x46a0ee=_0x518aee[_0x240f15(0x4ab)][_0x240f15(0x3f6)](_0x3485b3=>_0x3485b3['id']),_0x4e581b=_0x4701ce[_0x240f15(0x3f6)](_0x3bf081=>_0x3bf081[_0x240f15(0x540)]),_0x563cc2=await this[_0x240f15(0x91)][_0x240f15(0xd7)]['findManyByIds']([..._0x46a0ee,..._0x4e581b]);_0x518aee[_0x240f15(0x4ab)]=_0x518aee[_0x240f15(0x4ab)][_0x240f15(0x3f6)](_0x18d547=>{const _0x325dee=_0x240f15;let _0x23fefd=_0x563cc2['find'](_0x5e1846=>_0x5e1846[_0x325dee(0x778)]===_0x18d547['id']);return{'id':_0x18d547['id'],'isAdmin':[_0x325dee(0x86),_0x325dee(0x43e)][_0x325dee(0x3f1)](_0x18d547['admin']),'admin':_0x18d547[_0x325dee(0x86)],'pushName':_0x23fefd?.[_0x325dee(0x11d)],'profilePictureUrl':_0x23fefd?.[_0x325dee(0x4e7)]};}),_0x518aee[_0x240f15(0x48a)]=_0x4701ce['map'](_0x52eb49=>{const _0x487f2c=_0x240f15;let _0x3bccb8=_0x563cc2[_0x487f2c(0x336)](_0x7f65c=>_0x7f65c['_id']===_0x52eb49[_0x487f2c(0x540)]);return{'id':_0x52eb49[_0x487f2c(0x540)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x3bccb8?.[_0x487f2c(0x11d)],'profilePictureUrl':_0x3bccb8?.[_0x487f2c(0x4e7)],'request_method':_0x52eb49['request_method'],'request_time':_0x52eb49[_0x487f2c(0x618)]};});let _0x561937=await this[_0x240f15(0x91)]['chat'][_0x240f15(0x4b3)]({'where':{'_id':_0x34298e['groupJid']}},{'imagechat':_0x518aee['image'],'name':_0x518aee[_0x240f15(0x573)],'lastcache':Date['now'](),'groupdata':_0x518aee},this['instance'][_0x240f15(0x3f4)]);return j(this['instanceName'],_0x240f15(0x758),{'chat':_0x561937}),{'metadata':_0x518aee};}catch(_0x1464f3){if(_0x237668==='inner')return;throw new J(_0x240f15(0x2f5),_0x1464f3[_0x240f15(0x64f)][_0x240f15(0x49e)]());}}async[a0_0x46df1a(0x120)](){const _0x9881a6=a0_0x46df1a;try{let _0x25a52a=[],_0x41af91=await this[_0x9881a6(0x1f7)][_0x9881a6(0x333)](),_0x534052=Object[_0x9881a6(0x25f)](_0x41af91),_0x23d30b=_0x534052[_0x9881a6(0x57a)](_0x20ac1e=>(0x0,w['isJidGroup'])(_0x20ac1e?.['id']))[_0x9881a6(0x3f6)](async _0x20a66e=>{const _0x6f5a00=_0x9881a6;try{return await this[_0x6f5a00(0x1f7)][_0x6f5a00(0x4c0)](_0x20a66e['id'],_0x6f5a00(0x26c));}catch(_0x2a0103){return this[_0x6f5a00(0xed)][_0x6f5a00(0x2c1)](this['instanceName']+'\x20('+this[_0x6f5a00(0x2b1)][_0x6f5a00(0x3f4)]+_0x6f5a00(0x4be)+_0x20a66e['id']+':\x20'+(_0x2a0103 instanceof Error?_0x2a0103['message']:JSON[_0x6f5a00(0x5cc)](_0x2a0103,null,0x2))),null;}}),_0x7cab18=await Promise['all'](_0x23d30b);for(let _0x3d16ea=0x0;_0x3d16ea<_0x534052[_0x9881a6(0x5e9)];_0x3d16ea++){let _0xa59885=_0x534052[_0x3d16ea];(0x0,w['isJidGroup'])(_0xa59885?.['id'])&&(_0x25a52a['push']({'groupJid':_0xa59885?.['id'],'subject':_0xa59885?.[_0x9881a6(0x573)],'subjectOwner':_0xa59885?.['subjectOwner']?.['split']('@')[0x0],'subjectTime':_0xa59885?.[_0x9881a6(0x661)],'creation':_0xa59885?.[_0x9881a6(0x74c)],'size':_0xa59885?.[_0x9881a6(0x4ab)]?.['length'],'owner':_0xa59885?.[_0x9881a6(0x3dd)]?.[_0x9881a6(0x1ed)]('@')[0x0],'desc':_0xa59885?.['desc'],'restrict':_0xa59885?.[_0x9881a6(0x31e)],'announce':_0xa59885?.[_0x9881a6(0xfc)],'image':_0x7cab18[_0x3d16ea],'isCommunity':_0xa59885?.[_0x9881a6(0x31a)],'joinApprovalMode':_0xa59885?.[_0x9881a6(0x5fc)],'memberCanAddParticipant':_0xa59885?.[_0x9881a6(0x2f2)],'participants':_0xa59885?.[_0x9881a6(0x4ab)],'descOwner':_0xa59885?.[_0x9881a6(0x6bd)],'descId':_0xa59885?.[_0x9881a6(0x180)],'memberAddMode':_0xa59885?.['memberAddMode'],'isCommunityAnnounce':_0xa59885?.[_0x9881a6(0x197)],'ephemeralDuration':_0xa59885?.['ephemeralDuration']||0x0,'author':_0xa59885?.[_0x9881a6(0x198)]}),this[_0x9881a6(0x441)](_0x534052[_0x3d16ea]));}return _0x25a52a;}catch(_0x344033){let _0x4923c3=_0x9881a6(0x598),_0x5bd321=_0x344033 instanceof Error?_0x344033['message']:typeof _0x344033==_0x9881a6(0xde)?JSON['stringify'](_0x344033):_0x344033,_0x549dbb=_0x4923c3+':\x20'+_0x5bd321;throw this[_0x9881a6(0xed)]['error'](this[_0x9881a6(0x88)]+'\x20('+this[_0x9881a6(0x2b1)]['wuid']+_0x9881a6(0x28e)+_0x549dbb),new J(_0x549dbb);}}async[a0_0x46df1a(0x441)](_0xb66b0d){const _0x521c1e=a0_0x46df1a;let _0x33fdcd=await this[_0x521c1e(0x91)][_0x521c1e(0x3d9)][_0x521c1e(0x404)]({'where':{'_id':_0xb66b0d['id']}},this[_0x521c1e(0x2b1)][_0x521c1e(0x3f4)]);_0xb66b0d[_0x521c1e(0x661)]=_0xb66b0d?.[_0x521c1e(0x661)]&&_0xb66b0d[_0x521c1e(0x661)]['toString']()[_0x521c1e(0x5e9)]<0xd?_0xb66b0d?.['subjectTime']*0x3e8:_0xb66b0d?.[_0x521c1e(0x661)]||null,_0xb66b0d[_0x521c1e(0x74c)]=_0xb66b0d?.['creation']&&_0xb66b0d[_0x521c1e(0x74c)][_0x521c1e(0x49e)]()['length']<0xd?_0xb66b0d?.[_0x521c1e(0x74c)]*0x3e8:_0xb66b0d?.[_0x521c1e(0x74c)]||null;let _0x46a69d=_0x33fdcd?.[_0x521c1e(0x6d7)]?.[_0x521c1e(0x48a)]||[],_0x44d888=_0x33fdcd?.[_0x521c1e(0x6d7)]?.[_0x521c1e(0x40d)],_0xe1789=_0xb66b0d[_0x521c1e(0x4ab)][_0x521c1e(0x3f6)](_0x3c20db=>{const _0x176adf=_0x521c1e;let _0xb102f5=_0x33fdcd?.[_0x176adf(0x6d7)]?.[_0x176adf(0x4ab)][_0x176adf(0x336)](_0x4b9ccb=>_0x4b9ccb['id']===_0x3c20db['id']);return{..._0x3c20db,'isAdmin':[_0x176adf(0x86),'superadmin'][_0x176adf(0x3f1)](_0x3c20db[_0x176adf(0x86)]),'admin':_0x3c20db[_0x176adf(0x86)],'name':_0xb102f5?.['name']||_0x3c20db[_0x176adf(0x11d)],'imgUrl':_0xb102f5?.['imgUrl']||_0x3c20db[_0x176adf(0x250)]};}),_0x2fd495=_0xe1789['some'](_0x5f0442=>_0x5f0442['id']===this[_0x521c1e(0x2b1)][_0x521c1e(0x3f4)]+_0x521c1e(0x32b)&&_0x5f0442[_0x521c1e(0x6c4)]),_0x109427=(!_0xb66b0d['announce']||_0x2fd495)&&(!_0xb66b0d[_0x521c1e(0x31a)]||_0xb66b0d['isCommunity']&&_0xb66b0d['isCommunityAnnounce']&&_0x2fd495),_0x32b0fa={..._0xb66b0d,'participants':_0xe1789,'awaitingApproval':_0x46a69d,'lastFetchAwaitingApproval':_0x44d888,'isAdmin':_0x2fd495,'canSendMessage':_0x109427,'lastUpdate':Date[_0x521c1e(0x72)]()};await this[_0x521c1e(0x91)][_0x521c1e(0x3d9)][_0x521c1e(0x4b3)]({'where':{'_id':_0xb66b0d['id']}},{'name':_0xb66b0d[_0x521c1e(0x573)],'group':!0x0,'groupdata':_0x32b0fa,'lastcache':Date['now']()},this[_0x521c1e(0x2b1)][_0x521c1e(0x3f4)]),j(this[_0x521c1e(0x88)],_0x521c1e(0x758),{'chat':_0xb66b0d});}async[a0_0x46df1a(0x48e)](_0x52ecf9){const _0x24160c=a0_0x46df1a;let _0x3ddff7=await this[_0x24160c(0x91)]['chat'][_0x24160c(0x404)]({'where':{'_id':_0x52ecf9['id']}},this[_0x24160c(0x2b1)]['wuid']);_0x52ecf9['subjectTime']=_0x52ecf9?.[_0x24160c(0x661)]&&_0x52ecf9['subjectTime'][_0x24160c(0x49e)]()[_0x24160c(0x5e9)]<0xd?_0x52ecf9?.[_0x24160c(0x661)]*0x3e8:_0x52ecf9?.[_0x24160c(0x661)]||null,_0x52ecf9[_0x24160c(0x74c)]=_0x52ecf9?.[_0x24160c(0x74c)]&&_0x52ecf9[_0x24160c(0x74c)][_0x24160c(0x49e)]()[_0x24160c(0x5e9)]<0xd?_0x52ecf9?.['creation']*0x3e8:_0x52ecf9?.[_0x24160c(0x74c)]||null,_0x52ecf9[_0x24160c(0x2aa)]&&(_0x52ecf9[_0x24160c(0x2aa)]=_0x24160c(0x5df)+_0x52ecf9['inviteCode']);let _0x473216=_0x3ddff7?.[_0x24160c(0x6d7)]?{..._0x3ddff7[_0x24160c(0x6d7)]}:{};Object[_0x24160c(0x794)](_0x52ecf9)[_0x24160c(0x14b)](_0x328961=>{_0x328961!=='id'&&(_0x473216[_0x328961]=_0x52ecf9[_0x328961]);});let _0x5214bf=_0x473216['participants']?.['some'](_0x795f2e=>_0x795f2e['id']===this[_0x24160c(0x2b1)][_0x24160c(0x3f4)]+_0x24160c(0x32b)&&_0x795f2e[_0x24160c(0x6c4)])||!0x1;_0x473216[_0x24160c(0x6c4)]=_0x5214bf;let _0x6bd115=(!_0x473216[_0x24160c(0xfc)]||_0x5214bf)&&(!_0x473216['isCommunity']||_0x473216[_0x24160c(0x31a)]&&_0x473216['isCommunityAnnounce']&&_0x5214bf);_0x473216[_0x24160c(0x166)]=_0x6bd115;let _0x549b2f={'group':!0x0,'groupdata':_0x473216};_0x52ecf9[_0x24160c(0x573)]&&(_0x549b2f['name']=_0x52ecf9[_0x24160c(0x573)]),await this['repository'][_0x24160c(0x3d9)][_0x24160c(0x4b3)]({'where':{'_id':_0x52ecf9['id']}},_0x549b2f,this['instance'][_0x24160c(0x3f4)],{'upsert':!0x0}),j(this[_0x24160c(0x88)],_0x24160c(0x758),{'chat':_0x549b2f});}async['updateGroupParticipantsWebhook'](_0x390bf2){const _0x319326=a0_0x46df1a;let _0x40c3b2=await this[_0x319326(0x91)][_0x319326(0x3d9)][_0x319326(0x404)]({'where':{'_id':_0x390bf2['id']}},this[_0x319326(0x2b1)][_0x319326(0x3f4)]);if(!_0x40c3b2||!_0x40c3b2[_0x319326(0x6d7)]){this[_0x319326(0xed)][_0x319326(0x459)](this[_0x319326(0x88)]+'\x20('+this[_0x319326(0x2b1)][_0x319326(0x3f4)]+_0x319326(0x42c)+_0x390bf2['id']);return;}let _0x191f3f=await this[_0x319326(0x91)]['cacheContact']['findManyByIds'](_0x390bf2[_0x319326(0x4ab)]),_0x2e56b1=[..._0x40c3b2[_0x319326(0x6d7)]?.[_0x319326(0x4ab)]];switch(_0x390bf2[_0x319326(0x70c)]){case'add':let _0x1a0ba4=_0x191f3f[_0x319326(0x3f6)](_0x4d36b2=>({'id':_0x4d36b2[_0x319326(0x778)],'isAdmin':!0x1,'name':_0x4d36b2['name'],'imgUrl':_0x4d36b2[_0x319326(0x4e7)]}));_0x2e56b1=[..._0x2e56b1,..._0x1a0ba4];break;case _0x319326(0x26d):_0x2e56b1=_0x2e56b1[_0x319326(0x57a)](_0x2ea800=>!_0x390bf2[_0x319326(0x4ab)][_0x319326(0x3f1)](_0x2ea800['id']));break;case _0x319326(0x6bf):case _0x319326(0x4b9):_0x2e56b1=_0x2e56b1[_0x319326(0x3f6)](_0x5e337c=>_0x390bf2[_0x319326(0x4ab)][_0x319326(0x3f1)](_0x5e337c['id'])?{..._0x5e337c,'isAdmin':_0x390bf2[_0x319326(0x70c)]==='promote'}:_0x5e337c);break;}let _0x5e8609=_0x2e56b1[_0x319326(0x5e9)],_0x118a9e=_0x2e56b1[_0x319326(0x6ee)](_0x53d0e7=>_0x53d0e7['id']===this['instance'][_0x319326(0x3f4)]+_0x319326(0x32b)),_0x4167b8=_0x118a9e&&_0x2e56b1[_0x319326(0x6ee)](_0x39637b=>_0x39637b['id']===this[_0x319326(0x2b1)][_0x319326(0x3f4)]+'@s.whatsapp.net'&&_0x39637b[_0x319326(0x6c4)]),_0x1c92ee=_0x118a9e&&(!_0x40c3b2['groupdata'][_0x319326(0xfc)]||_0x4167b8)&&(!_0x40c3b2['groupdata'][_0x319326(0x31a)]||_0x40c3b2[_0x319326(0x6d7)][_0x319326(0x31a)]&&_0x4167b8);await this[_0x319326(0x91)][_0x319326(0x3d9)][_0x319326(0x4b3)]({'where':{'_id':_0x390bf2['id']}},{'groupdata':{..._0x40c3b2[_0x319326(0x6d7)],'participants':_0x2e56b1,'size':_0x5e8609,'isAdmin':_0x4167b8,'canSendMessage':_0x1c92ee}},this[_0x319326(0x2b1)][_0x319326(0x3f4)]),this[_0x319326(0xed)][_0x319326(0x459)](this[_0x319326(0x88)]+'\x20('+this[_0x319326(0x2b1)][_0x319326(0x3f4)]+_0x319326(0x265)+_0x390bf2['id']+_0x319326(0x4e0)+_0x390bf2[_0x319326(0x70c)]+_0x319326(0x78e)+_0x5e8609+_0x319326(0x4ee)+_0x4167b8+_0x319326(0x330)+_0x1c92ee);}async[a0_0x46df1a(0x2aa)](_0x4cb1a8,_0x1bdee9=!0x0){const _0x1a3314=a0_0x46df1a;try{let _0x10119b=await this['client']['groupInviteCode'](_0x4cb1a8[_0x1a3314(0x2fd)]),_0xa371dc={'groupdata.inviteCode':'https://chat.whatsapp.com/'+_0x10119b};if(_0x1bdee9){let _0x2e388b=await this[_0x1a3314(0x91)]['chat'][_0x1a3314(0x4b3)]({'where':{'_id':_0x4cb1a8[_0x1a3314(0x2fd)]}},_0xa371dc,this['instance'][_0x1a3314(0x3f4)]);}return{'inviteUrl':_0x1a3314(0x5df)+_0x10119b,'inviteCode':_0x10119b};}catch(_0x5acf49){let _0x5ac11f=_0x1a3314(0x146),_0x38adbe=_0x5acf49 instanceof Error?_0x5acf49[_0x1a3314(0x64f)]:typeof _0x5acf49==_0x1a3314(0xde)?JSON[_0x1a3314(0x5cc)](_0x5acf49):_0x5acf49,_0x2884ff=_0x5ac11f+':\x20'+_0x38adbe;throw this['logger'][_0x1a3314(0x2fb)](this[_0x1a3314(0x88)]+'\x20('+this[_0x1a3314(0x2b1)]['wuid']+'):\x20'+_0x2884ff),new J(_0x2884ff);}}async[a0_0x46df1a(0x3b9)](_0x22f9c3){const _0x2f9223=a0_0x46df1a;try{let _0x3a2912=await this[_0x2f9223(0x1f7)][_0x2f9223(0x462)](_0x22f9c3[_0x2f9223(0x2fd)]);return{'revoked':!0x0,'inviteUrl':'https://chat.whatsapp.com/'+_0x3a2912,'inviteCode':_0x3a2912};}catch(_0x495f3f){let _0x3bdac8=_0x2f9223(0x417),_0x14aa05=_0x495f3f instanceof Error?_0x495f3f[_0x2f9223(0x64f)]:typeof _0x495f3f==_0x2f9223(0xde)?JSON[_0x2f9223(0x5cc)](_0x495f3f):_0x495f3f,_0x23e0e8=_0x3bdac8+':\x20'+_0x14aa05;throw this[_0x2f9223(0xed)][_0x2f9223(0x2fb)](this[_0x2f9223(0x88)]+'\x20('+this[_0x2f9223(0x2b1)][_0x2f9223(0x3f4)]+_0x2f9223(0x28e)+_0x23e0e8),new J(_0x23e0e8);}}async['joinGroup'](_0x107250){const _0x305858=a0_0x46df1a;try{if((0x0,k[_0x305858(0xa9)])(_0x107250[_0x305858(0x2aa)]))var _0x25e860=_0x107250['inviteCode'][_0x305858(0x1ed)]('/')[0x3];else var _0x25e860=_0x107250[_0x305858(0x2aa)];let _0x3bbc5d=await this['client'][_0x305858(0x6ce)](_0x25e860);return this[_0x305858(0xed)]['verbose'](this[_0x305858(0x88)]+'\x20('+this['instance'][_0x305858(0x3f4)]+_0x305858(0x28e)+_0x3bbc5d),{'join':!0x0,'inviteCode':_0x25e860,'groupJid':_0x3bbc5d};}catch(_0x1ca9b0){let _0x3d9cd1=_0x305858(0x241),_0x4a69f7=_0x1ca9b0 instanceof Error?_0x1ca9b0[_0x305858(0x64f)]:typeof _0x1ca9b0==_0x305858(0xde)?JSON[_0x305858(0x5cc)](_0x1ca9b0):_0x1ca9b0,_0x3bb8e9=_0x3d9cd1+':\x20'+_0x4a69f7;throw this[_0x305858(0xed)][_0x305858(0x2fb)](this[_0x305858(0x88)]+'\x20('+this[_0x305858(0x2b1)][_0x305858(0x3f4)]+_0x305858(0x28e)+_0x3bb8e9),new J(_0x3bb8e9);}}async[a0_0x46df1a(0x158)](_0x331c5a){const _0x58b4bd=a0_0x46df1a;try{return{'participants':(await this[_0x58b4bd(0x91)][_0x58b4bd(0x3d9)][_0x58b4bd(0x404)]({'where':{'_id':_0x331c5a[_0x58b4bd(0x2fd)]}},this[_0x58b4bd(0x2b1)][_0x58b4bd(0x3f4)]))[_0x58b4bd(0x6d7)][_0x58b4bd(0x4ab)]};}catch(_0xae5911){let _0x338512='Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants',_0x5caa10=_0xae5911 instanceof Error?_0xae5911[_0x58b4bd(0x64f)]:typeof _0xae5911=='object'?JSON[_0x58b4bd(0x5cc)](_0xae5911):_0xae5911,_0x1469df=_0x338512+':\x20'+_0x5caa10;throw this[_0x58b4bd(0xed)][_0x58b4bd(0x2fb)](this[_0x58b4bd(0x88)]+'\x20('+this[_0x58b4bd(0x2b1)][_0x58b4bd(0x3f4)]+_0x58b4bd(0x28e)+_0x1469df),new J(_0x1469df);}}async[a0_0x46df1a(0x30e)](_0x4f6c6a){const _0xeed4c3=a0_0x46df1a;try{return await this['client'][_0xeed4c3(0x313)](_0x4f6c6a[_0xeed4c3(0x2fd)]),{'groupJid':_0x4f6c6a[_0xeed4c3(0x2fd)],'leave':!0x0};}catch(_0xb71ee9){let _0x264a4f=_0xeed4c3(0x58f),_0x3bf1e8=_0xb71ee9 instanceof Error?_0xb71ee9[_0xeed4c3(0x64f)]:typeof _0xb71ee9=='object'?JSON[_0xeed4c3(0x5cc)](_0xb71ee9):_0xb71ee9,_0x1ec8a6=_0x264a4f+':\x20'+_0x3bf1e8;throw this[_0xeed4c3(0xed)][_0xeed4c3(0x2fb)](this['instanceName']+'\x20('+this[_0xeed4c3(0x2b1)]['wuid']+_0xeed4c3(0x28e)+_0x1ec8a6),new m(_0x1ec8a6);}}async['pollMessage'](_0x84035a){const _0xd3dbf0=a0_0x46df1a;return await this[_0xd3dbf0(0x724)](_0x84035a[_0xd3dbf0(0x731)],{'poll':{'name':_0x84035a[_0xd3dbf0(0x79e)]?.[_0xd3dbf0(0x11d)],'selectableCount':_0x84035a[_0xd3dbf0(0x79e)]['selectableCount'],'values':_0x84035a['pollMessage'][_0xd3dbf0(0x25f)]}},_0x84035a?.['options']);}async[a0_0x46df1a(0x324)](_0xb75998){const _0x265969=a0_0x46df1a;return await this['sendMessageWithTyping'](_0xb75998[_0x265969(0x731)],{'listMessage':{'title':_0xb75998['listMessage']['title'],'description':_0xb75998[_0x265969(0x324)][_0x265969(0x6d)],'buttonText':_0xb75998[_0x265969(0x324)]?.[_0x265969(0x2a7)],'footerText':_0xb75998['listMessage']?.['footerText'],'sections':_0xb75998[_0x265969(0x324)][_0x265969(0x76a)],'listType':0x2}},_0xb75998?.['options']);}async[a0_0x46df1a(0x3c1)](_0x2e7881){const _0x17c720=a0_0x46df1a;let _0x40bac6;if(_0x2e7881[_0x17c720(0x3c1)]['type']==='list'){let _0x396725=_0x2e7881[_0x17c720(0x3c1)][_0x17c720(0xd1)][_0x17c720(0x687)]('\x0a'),_0x5a45a3='',_0x35f0b0='';_0x396725!==-0x1?(_0x5a45a3=_0x2e7881['menuMessage'][_0x17c720(0xd1)][_0x17c720(0x4bc)](0x0,_0x396725)[_0x17c720(0x7a1)](),_0x35f0b0=_0x2e7881['menuMessage']['text'][_0x17c720(0x4bc)](_0x396725+0x1)):_0x35f0b0=_0x2e7881[_0x17c720(0x3c1)][_0x17c720(0xd1)];let _0x5a0991=_0x2e7881[_0x17c720(0x3c1)]['choices'][_0x17c720(0x57a)](_0x5175c0=>_0x5175c0[_0x17c720(0x7a1)]()!==''),_0xd68f3c=this[_0x17c720(0xd8)](_0x5a0991);_0x40bac6={'listMessage':{'title':_0x5a45a3,'description':_0x35f0b0,'buttonText':_0x2e7881['menuMessage'][_0x17c720(0x2a7)]||_0x17c720(0x1e7),'footerText':_0x2e7881[_0x17c720(0x3c1)][_0x17c720(0x204)],'sections':_0xd68f3c,'listType':0x2}};}else{if(_0x2e7881[_0x17c720(0x3c1)]['type']===_0x17c720(0x3bb)){let _0x3e55b5=_0x2e7881[_0x17c720(0x3c1)][_0x17c720(0x24b)][_0x17c720(0x57a)](_0x2781bc=>!(_0x2781bc[_0x17c720(0x3f0)]('[')&&_0x2781bc[_0x17c720(0x6d6)](']'))&&_0x2781bc['trim']()!=='')[_0x17c720(0x3f6)](_0x48df94=>_0x48df94[_0x17c720(0x1ed)]('\x0a')[0x0]);_0x40bac6={'poll':{'name':_0x2e7881[_0x17c720(0x3c1)][_0x17c720(0xd1)],'selectableCount':_0x2e7881[_0x17c720(0x3c1)]['selectableCount']||0x1,'values':_0x3e55b5}};}}return await this['sendMessageWithTyping'](_0x2e7881['number'],_0x40bac6,_0x2e7881?.[_0x17c720(0x6b6)]);}[a0_0x46df1a(0xd8)](_0xb59d43){const _0x5a5703=a0_0x46df1a;let _0x3e41b4=[],_0x94f001={'rows':[]};return _0xb59d43[_0x5a5703(0x14b)](_0x5cfdc6=>{const _0x46e0fe=_0x5a5703;if(_0x5cfdc6[_0x46e0fe(0x3f0)]('[')&&_0x5cfdc6['endsWith'](']'))_0x94f001[_0x46e0fe(0x1d8)][_0x46e0fe(0x5e9)]>0x0&&_0x3e41b4[_0x46e0fe(0x45f)](_0x94f001),_0x94f001={'title':_0x5cfdc6[_0x46e0fe(0x16a)](0x1,-0x1),'rows':[]};else{let _0x1d43b5=_0x5cfdc6[_0x46e0fe(0x1ed)]('\x0a')['map'](_0x3bfb1f=>_0x3bfb1f[_0x46e0fe(0x7a1)]()),_0x396972=_0x1d43b5[0x0],_0x4b6c82=_0x1d43b5[0x1]||null,_0x5b1442=_0x1d43b5[0x2]||_0x396972;_0x94f001[_0x46e0fe(0x1d8)][_0x46e0fe(0x45f)]({'title':_0x396972,'description':_0x4b6c82,'rowId':_0x5b1442});}}),_0x94f001[_0x5a5703(0x1d8)][_0x5a5703(0x5e9)]>0x0&&_0x3e41b4[_0x5a5703(0x45f)](_0x94f001),_0x3e41b4;}async[a0_0x46df1a(0x22e)](_0x115346,_0x50a830){const _0xd8bb54=a0_0x46df1a;if(await this[_0xd8bb54(0x746)](_0x115346,!0x0)){let _0x4fa6f0={'where':{'_id':_0x115346['id']}},_0x502cc6={'status':[_0x50a830['status']][0x0]};try{let _0x266b84=await this[_0xd8bb54(0x91)]['message'][_0xd8bb54(0x75)](_0x4fa6f0,_0x502cc6,this[_0xd8bb54(0x2b1)][_0xd8bb54(0x3f4)]);_0x266b84&&j(this[_0xd8bb54(0x88)],'messages',{'message':_0x266b84});}catch{}}}[a0_0x46df1a(0x563)](_0x26b587){const _0x29593f=a0_0x46df1a;let _0x509f72=[];return _0x26b587[_0x29593f(0x14b)](_0xd6e81e=>{const _0x54a99f=_0x29593f;_0xd6e81e[_0x54a99f(0x73b)]&&_0x509f72[_0x54a99f(0x45f)]('['+_0xd6e81e[_0x54a99f(0x73b)]+']'),_0xd6e81e[_0x54a99f(0x1d8)][_0x54a99f(0x14b)](_0x22fead=>{const _0x2a1fdc=_0x54a99f;_0x509f72['push'](_0x22fead[_0x2a1fdc(0x73b)]);});}),_0x509f72['join']('|');}['formatVCard'](_0x5351e9){const _0x13d135=a0_0x46df1a;let _0x1a68e2=_0x5351e9['replace'](/\\n/g,'\x0a')['split']('\x0a')[_0x13d135(0x57a)](_0x5f74f9=>_0x5f74f9[_0x13d135(0x3f1)](_0x13d135(0x3b0))||_0x5f74f9[_0x13d135(0x3f1)]('EMAIL')),_0x1b3135='';return _0x1a68e2[_0x13d135(0x14b)](_0x4fe709=>{const _0x21c1c9=_0x13d135;let _0x260f6d=/TEL(?:.*):(.+)/,_0xfdad1d=/EMAIL(?:.*):(.+)/,_0x246414=_0x4fe709[_0x21c1c9(0x7a2)](_0x260f6d),_0x3989bc=_0x4fe709[_0x21c1c9(0x7a2)](_0xfdad1d);if(_0x246414){let _0x838a9=_0x246414[0x1][_0x21c1c9(0x420)](/-| |\+|\(|\)/g,'')[_0x21c1c9(0x7a1)]();_0x1b3135+=_0x21c1c9(0x118)+_0x838a9+'\x0a';}else{if(_0x3989bc){let _0x38bdc1=_0x3989bc[0x1][_0x21c1c9(0x7a1)]();_0x1b3135+='E-mail:\x20'+_0x38bdc1+'\x0a';}}}),_0x1b3135['trim']();}async[a0_0x46df1a(0x480)](_0x5dedc2,_0x1bec29,_0x339d21,_0x38bec9=null){const _0x6903c4=a0_0x46df1a;if(_0x5dedc2['ENABLED'])try{let _0x55ff=_0x1bec29[_0x6903c4(0x754)][_0x6903c4(0x75b)][_0x6903c4(0x420)](/:\d{1,2}@/g,'@'),_0x337b7a=_0x1bec29[_0x6903c4(0x754)][_0x6903c4(0x525)],_0x155361=_0x55ff[_0x6903c4(0x6d6)](_0x6903c4(0x2be)),_0x357f46=_0x1bec29['participant']?.[_0x6903c4(0x420)](/:\d{1,2}@/g,'@')||'',_0x6e4ef=_0x1bec29[_0x6903c4(0x4ac)]?.[_0x6903c4(0xd1)]||_0x1bec29[_0x6903c4(0x4ac)]?.[_0x6903c4(0x3eb)]||_0x1bec29[_0x6903c4(0x4ac)]?.['vote']||_0x1bec29[_0x6903c4(0x4ac)]?.[_0x6903c4(0x11d)]||'',_0x19ee95={'_id':_0x1bec29[_0x6903c4(0x778)],'remoteJid':_0x337b7a?this[_0x6903c4(0x2b1)][_0x6903c4(0x3f4)]:_0x155361?_0x357f46:_0x55ff,'pushName':_0x337b7a?this[_0x6903c4(0x2b1)]['profileName']||'Eu':_0x1bec29[_0x6903c4(0x242)],'text':_0x6e4ef,'type':_0x1bec29[_0x6903c4(0x6bb)],'when':_0x1bec29[_0x6903c4(0x71f)]||Date[_0x6903c4(0x72)]()};_0x38bec9||(_0x38bec9=await this[_0x6903c4(0x91)][_0x6903c4(0x3d9)][_0x6903c4(0x404)]({'where':{'_id':_0x55ff}},this['instance']['wuid']));let _0x42a4a5=_0x38bec9?_0x337b7a?_0x38bec9['unreadcount']:(_0x38bec9[_0x6903c4(0x667)]||0x0)+0x1:_0x337b7a?0x0:0x1,_0x16bfbb={'lastmsg':_0x1bec29[_0x6903c4(0x71f)]||Date[_0x6903c4(0x72)](),'ephemeralExpiration':_0x1bec29[_0x6903c4(0x6dd)],'lastMessage':_0x19ee95,'unreadcount':_0x42a4a5,..._0x337b7a||_0x155361?{}:{'name':_0x1bec29['pushName']},..._0x155361?{'group':_0x155361}:{},...!_0x337b7a&&!_0x155361&&_0x1bec29[_0x6903c4(0x4c0)]?{'imagechat':_0x1bec29[_0x6903c4(0x4c0)]}:{}};if(!_0x155361&&(!_0x38bec9?.['leadInfo']||!_0x38bec9[_0x6903c4(0x4df)][_0x6903c4(0x10d)])&&_0x1bec29[_0x6903c4(0x242)]&&!_0x337b7a&&(_0x16bfbb={..._0x16bfbb,'leadInfo.nome':_0x1bec29['pushName']}),_0x38bec9?.['leadInfo'][_0x6903c4(0x39b)]||(_0x16bfbb={..._0x16bfbb,'leadInfo.etiquetas':[]}),_0x38bec9?.[_0x6903c4(0x4df)][_0x6903c4(0x300)]||(_0x16bfbb={..._0x16bfbb,'leadInfo.customFields':[]}),_0x38bec9?.['leadInfo'][_0x6903c4(0x366)]||(_0x16bfbb={..._0x16bfbb,'leadInfo.tags':[]}),_0x38bec9&&_0x38bec9?.[_0x6903c4(0x371)]){let _0x406032=await this[_0x6903c4(0x91)]['label'][_0x6903c4(0x336)]({'where':{}},this[_0x6903c4(0x2b1)][_0x6903c4(0x3f4)]),_0x4c8323=new Set(_0x406032[_0x6903c4(0x3f6)](_0x57f097=>_0x57f097[_0x6903c4(0x778)])),_0x44768f=(_0x38bec9[_0x6903c4(0x4df)]?.['etiquetas']||[])[_0x6903c4(0x57a)](_0x4bc7a9=>_0x4c8323[_0x6903c4(0x485)](_0x4bc7a9));_0x16bfbb={..._0x16bfbb,'imported':!0x1,'leadInfo.etiquetas':_0x44768f};for(let _0x3b7b74 of _0x44768f)await this[_0x6903c4(0x329)](_0x3b7b74,_0x55ff);}if(!this[_0x6903c4(0x6a0)][_0x6903c4(0x6a2)]['find'](_0x170fa6=>_0x170fa6[_0x6903c4(0x73)]&&_0x6e4ef['includes'](_0x170fa6[_0x6903c4(0x73)]))&&_0x339d21===_0x6903c4(0x34c)&&_0x337b7a&&this['AutomateSystem']?.[_0x6903c4(0x79)][_0x6903c4(0x4d5)]&&_0x6e4ef[_0x6903c4(0x7a1)]()!==this[_0x6903c4(0x6a0)]?.[_0x6903c4(0x79)][_0x6903c4(0x2cb)][_0x6903c4(0x7a1)]()){let _0x1446c2=(this['AutomateSystem']?.[_0x6903c4(0x79)][_0x6903c4(0x344)]||0x0)*0xea60,_0x5ae75d=Date[_0x6903c4(0x72)]()+_0x1446c2;_0x38bec9?.[_0x6903c4(0x4df)]?.[_0x6903c4(0x528)]===0x0||(_0x16bfbb={..._0x16bfbb,'leadInfo.desativadoFluxoAte':_0x5ae75d},this[_0x6903c4(0xed)][_0x6903c4(0x2c1)](this[_0x6903c4(0x88)]+'\x20('+this[_0x6903c4(0x2b1)][_0x6903c4(0x3f4)]+_0x6903c4(0x6e2)+_0x5ae75d+'.'));}if(_0x6e4ef[_0x6903c4(0x7a1)]()===this[_0x6903c4(0x6a0)]?.[_0x6903c4(0x79)][_0x6903c4(0x2cb)][_0x6903c4(0x7a1)]()){this[_0x6903c4(0xed)][_0x6903c4(0x2c1)](this[_0x6903c4(0x88)]+'\x20('+this['instance']['wuid']+'):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20'+_0x6e4ef);let _0x5a2e9f=Date[_0x6903c4(0x72)]();this[_0x6903c4(0x6a0)]?.[_0x6903c4(0x79)][_0x6903c4(0x9b)]===0x0?_0x16bfbb={..._0x16bfbb,'leadInfo.desativadoFluxoAte':_0x5a2e9f+0x7591f6200}:_0x16bfbb={..._0x16bfbb,'leadInfo.desativadoFluxoAte':_0x5a2e9f+this[_0x6903c4(0x6a0)]?.[_0x6903c4(0x79)][_0x6903c4(0x9b)]*0x3c*0x3e8};}if(_0x38bec9=await this[_0x6903c4(0x91)][_0x6903c4(0x3d9)][_0x6903c4(0x4b3)]({'where':{'_id':_0x55ff}},_0x16bfbb,this['instance'][_0x6903c4(0x3f4)],{'new':!0x0,'upsert':!0x0}),_0x38bec9)j(this[_0x6903c4(0x88)],_0x6903c4(0x758),{'chat':_0x38bec9});else{this[_0x6903c4(0xed)][_0x6903c4(0x2fb)](this[_0x6903c4(0x88)]+'\x20('+this['instance'][_0x6903c4(0x3f4)]+'):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat');return;}if(_0x337b7a)return this[_0x6903c4(0xed)][_0x6903c4(0x2c1)](this[_0x6903c4(0x88)]+'\x20('+this[_0x6903c4(0x2b1)][_0x6903c4(0x3f4)]+_0x6903c4(0x58a)),null;if(!this[_0x6903c4(0x6a0)]?.[_0x6903c4(0x79)][_0x6903c4(0x4d5)])return this[_0x6903c4(0xed)]['verbose'](this[_0x6903c4(0x88)]+'\x20('+this[_0x6903c4(0x2b1)][_0x6903c4(0x3f4)]+'):\x20Flow\x20desativado'),null;if(_0x38bec9[_0x6903c4(0x778)][_0x6903c4(0x3f1)](_0x6903c4(0x2be))&&this[_0x6903c4(0x6a0)]?.[_0x6903c4(0x79)]['ignoreGroups']===!0x0)return this[_0x6903c4(0xed)][_0x6903c4(0x2c1)](this['instanceName']+'\x20('+this[_0x6903c4(0x2b1)]['wuid']+_0x6903c4(0x1b8)),null;if(_0x38bec9['leadInfo']){if(_0x38bec9[_0x6903c4(0x4df)][_0x6903c4(0x528)]===0x0||_0x38bec9[_0x6903c4(0x4df)][_0x6903c4(0x3e3)])return this[_0x6903c4(0xed)][_0x6903c4(0x2c1)](this['instanceName']+'\x20('+this[_0x6903c4(0x2b1)][_0x6903c4(0x3f4)]+_0x6903c4(0x6ec)+_0x55ff+_0x6903c4(0x2b8)),null;if(_0x38bec9[_0x6903c4(0x4df)][_0x6903c4(0x528)]>Date[_0x6903c4(0x72)]()&&!_0x1bec29[_0x6903c4(0x4ac)]?.['vote'])return this[_0x6903c4(0xed)][_0x6903c4(0x2c1)](this[_0x6903c4(0x88)]+'\x20('+this['instance']['wuid']+_0x6903c4(0x280)+new Date(_0x38bec9[_0x6903c4(0x4df)]['desativadoFluxoAte'])['toLocaleString']()+',\x20saindo.'),null;}this[_0x6903c4(0xed)]['verbose'](this[_0x6903c4(0x88)]+'\x20('+this[_0x6903c4(0x2b1)][_0x6903c4(0x3f4)]+_0x6903c4(0x2c0)),this[_0x6903c4(0x728)](_0x1bec29,_0x339d21);}catch(_0x274e73){let _0x134df5=_0x6903c4(0x64d),_0x5e5848=_0x274e73 instanceof Error?_0x274e73['message']:typeof _0x274e73=='object'?JSON['stringify'](_0x274e73):_0x274e73,_0x7d1567=_0x134df5+':\x20'+_0x5e5848;return this['logger'][_0x6903c4(0x2fb)](this['instanceName']+'\x20('+this[_0x6903c4(0x2b1)]['wuid']+'):\x20'+_0x7d1567),null;}}async['upsertChats'](_0x52450f,_0x232d2a){const _0x472672=a0_0x46df1a;if(_0x232d2a['ENABLED']){let _0x230692=_0x52450f['map'](async _0x4eba47=>{const _0x5980dd=a0_0x2bf6;try{let _0x468006={'_id':_0x4eba47['_id'],'owner':_0x4eba47[_0x5980dd(0x3dd)],'lastcache':0x0};if(Object[_0x5980dd(0x794)](_0x4eba47)[_0x5980dd(0x14b)](_0x49fb79=>{_0x4eba47[_0x49fb79]!==null&&(_0x468006[_0x49fb79]=_0x4eba47[_0x49fb79]);}),_0x468006[_0x5980dd(0x595)]===null&&(_0x468006['imagechat']=_0x5980dd(0x9f)),Object[_0x5980dd(0x794)](_0x468006)[_0x5980dd(0x5e9)]>0x0)return await this[_0x5980dd(0x91)][_0x5980dd(0x3d9)][_0x5980dd(0x4b3)]({'where':{'_id':_0x4eba47[_0x5980dd(0x778)]}},_0x468006,this[_0x5980dd(0x2b1)][_0x5980dd(0x3f4)]);}catch(_0x3b1a40){let _0xb21b5e=_0x5980dd(0x34b)+_0x4eba47[_0x5980dd(0x778)],_0x496e58=_0x3b1a40 instanceof Error?_0x3b1a40['message']:typeof _0x3b1a40=='object'?JSON[_0x5980dd(0x5cc)](_0x3b1a40):_0x3b1a40,_0xed0846=_0xb21b5e+':\x20'+_0x496e58;return this[_0x5980dd(0xed)][_0x5980dd(0x2fb)](this[_0x5980dd(0x88)]+'\x20('+this[_0x5980dd(0x2b1)][_0x5980dd(0x3f4)]+_0x5980dd(0x28e)+_0xed0846),null;}}),_0x5d1d3f=(await Promise[_0x472672(0x221)](_0x230692))[_0x472672(0x57a)](_0x238670=>_0x238670!==null)[_0x472672(0x5e9)];this[_0x472672(0xed)][_0x472672(0x2c1)](this[_0x472672(0x88)]+'\x20('+this[_0x472672(0x2b1)][_0x472672(0x3f4)]+_0x472672(0x28e)+_0x5d1d3f+_0x472672(0x79f)+this[_0x472672(0x2b1)]['wuid']+_0x472672(0x143));}}async[a0_0x46df1a(0x455)](_0x48c85c){const _0x4f727f=a0_0x46df1a;this['logger']['verbose'](this[_0x4f727f(0x88)]+'\x20('+this[_0x4f727f(0x2b1)]['wuid']+'):\x20Ler\x20mensagem');let _0x1509c1={'readMessages':[{'remoteJid':_0x48c85c[_0x4f727f(0x594)][_0x4f727f(0x500)][_0x4f727f(0x754)][_0x4f727f(0x75b)],'fromMe':_0x48c85c['chatLog']['lastReceivedMessage'][_0x4f727f(0x754)][_0x4f727f(0x525)],'id':_0x48c85c['chatLog'][_0x4f727f(0x500)][_0x4f727f(0x754)]['id']}]};await this[_0x4f727f(0x654)](_0x1509c1);}async[a0_0x46df1a(0x728)](_0x1c7d1b,_0x16bd88){const _0x1af8b8=a0_0x46df1a;try{let {key:_0x14e0c0,message_normalized:_0x197f0b}=_0x1c7d1b,_0x490f41=_0x197f0b,_0x139aed=_0x197f0b[_0x1af8b8(0xd1)]||_0x197f0b[_0x1af8b8(0x3eb)]||_0x197f0b[_0x1af8b8(0x249)]||_0x197f0b[_0x1af8b8(0x11d)]||'',_0x509501=_0x14e0c0[_0x1af8b8(0x75b)],_0x48745e=null,_0x8c2c89=this[_0x1af8b8(0x6a0)]['flows'][_0x1af8b8(0x336)](_0x2fb941=>_0x2fb941['startCommand']&&_0x139aed['includes'](_0x2fb941['startCommand']));if(_0x8c2c89&&_0x16bd88===_0x1af8b8(0x34c)){let _0x27c223=await this[_0x1af8b8(0x91)]['flow']['findOne']({'where':{'_id':_0x8c2c89[_0x1af8b8(0x778)]}});if(this[_0x1af8b8(0xed)]['verbose'](this['instanceName']+'\x20('+this[_0x1af8b8(0x2b1)]['wuid']+_0x1af8b8(0x6b1)),_0x27c223&&_0x27c223['whoCanUse']?.['includes'](this[_0x1af8b8(0x2b1)][_0x1af8b8(0x3f4)]))_0x48745e=await this[_0x1af8b8(0x715)](_0x27c223,_0x14e0c0,_0x490f41);else return this['logger']['verbose'](this[_0x1af8b8(0x88)]+'\x20('+this[_0x1af8b8(0x2b1)]['wuid']+_0x1af8b8(0x1f1)),null;}else this['logger'][_0x1af8b8(0x2c1)](this[_0x1af8b8(0x88)]+'\x20('+this['instance'][_0x1af8b8(0x3f4)]+_0x1af8b8(0x37e));if(_0x48745e=await this[_0x1af8b8(0x4d1)](_0x509501,_0x490f41),_0x48745e){this[_0x1af8b8(0xed)][_0x1af8b8(0x2c1)](this[_0x1af8b8(0x88)]+'\x20('+this[_0x1af8b8(0x2b1)][_0x1af8b8(0x3f4)]+_0x1af8b8(0x1ec)),!_0x14e0c0[_0x1af8b8(0x525)]&&_0x48745e[_0x1af8b8(0x3a0)]&&this[_0x1af8b8(0x455)](_0x48745e);let _0x296598=await this[_0x1af8b8(0x43f)](_0x48745e);_0x296598&&await this[_0x1af8b8(0xf6)](_0x48745e,_0x296598);}}catch(_0x35781c){this[_0x1af8b8(0xed)][_0x1af8b8(0x2fb)](this[_0x1af8b8(0x88)]+'\x20('+this[_0x1af8b8(0x2b1)][_0x1af8b8(0x3f4)]+_0x1af8b8(0x32e)+(_0x35781c instanceof Error?_0x35781c['message']:JSON[_0x1af8b8(0x5cc)](_0x35781c,null,0x2)));}}[a0_0x46df1a(0x36b)](_0xca2276,_0x44e9cc='',_0x34f70f={}){const _0x22ec22=a0_0x46df1a;return typeof _0xca2276!='object'||_0xca2276===null?(_0x44e9cc&&(_0x34f70f[_0x44e9cc]=_0xca2276),_0x34f70f):(Object[_0x22ec22(0x10b)](_0xca2276)['forEach'](([_0x13ebdd,_0x3545a1])=>{const _0x187de4=_0x22ec22;let _0x248ebb=_0x44e9cc?_0x44e9cc+'.'+_0x13ebdd:'_'+_0x13ebdd;Array[_0x187de4(0x119)](_0x3545a1)?_0x3545a1[_0x187de4(0x14b)]((_0xc27a40,_0x2d9729)=>{const _0x433040=_0x187de4;this[_0x433040(0x36b)](_0xc27a40,_0x248ebb+'['+_0x2d9729+']',_0x34f70f);}):typeof _0x3545a1=='object'&&_0x3545a1!==null?this['flattenObject'](_0x3545a1,_0x248ebb,_0x34f70f):_0x34f70f[_0x248ebb]=String(_0x3545a1);}),_0x34f70f);}[a0_0x46df1a(0x5e3)](_0x35d3e3){const _0x169af6=a0_0x46df1a;let _0x3596ef={};for(let _0x1b325f of _0x35d3e3)typeof _0x1b325f['name']==_0x169af6(0x691)&&typeof _0x1b325f[_0x169af6(0x2c7)]==_0x169af6(0x691)&&(_0x3596ef[_0x1b325f['name']]=_0x1b325f[_0x169af6(0x2c7)]);return _0x3596ef;}async[a0_0x46df1a(0x43f)](_0x2956d8){const _0x334084=a0_0x46df1a;if(!this[_0x334084(0x6a0)]?.[_0x334084(0x79)]['enabled']||_0x2956d8[_0x334084(0x16f)]!==_0x334084(0x7b)&&_0x2956d8[_0x334084(0x3d7)]==='')return null;let _0x19238a=_0x2956d8['chatLog']['lastBlockId']||'start';typeof _0x2956d8[_0x334084(0x594)][_0x334084(0x3d3)]>'u'&&(_0x2956d8[_0x334084(0x594)][_0x334084(0x3d3)]=!0x0);let _0x552b28=_0x2956d8['chatLog'][_0x334084(0x3d3)];this['logger']['verbose'](this[_0x334084(0x88)]+'\x20('+this[_0x334084(0x2b1)][_0x334084(0x3f4)]+'):\x20lastBlockId:\x20'+_0x19238a+_0x334084(0x384)+_0x552b28);let _0x35e6d5=_0x19238a==='start'?_0x2956d8[_0x334084(0x25a)][_0x334084(0x336)](_0x13949c=>_0x13949c[_0x334084(0x1c0)]==='start'):_0x2956d8[_0x334084(0x25a)]['find'](_0x279e50=>_0x279e50[_0x334084(0x778)][_0x334084(0x49e)]()===_0x19238a[_0x334084(0x49e)]());if(!_0x35e6d5)return this[_0x334084(0xed)][_0x334084(0x2fb)](this['instanceName']+'\x20('+this[_0x334084(0x2b1)][_0x334084(0x3f4)]+'):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20'+_0x19238a),null;let _0x2c6208={'_pushName':_0x2956d8?.[_0x334084(0x594)]?.[_0x334084(0x500)]?.[_0x334084(0x242)]||'','_sender':this[_0x334084(0x2b1)]['wuid']||'',..._0x2956d8[_0x334084(0x594)][_0x334084(0x65d)]},_0x20381e=null;if(_0x2956d8[_0x334084(0x3d7)]){let _0x476ba1=_0x2956d8['chatLog'][_0x334084(0x500)][_0x334084(0x249)],_0x5a3132=_0x2956d8['waitingMenu_replyOptions'][_0x334084(0x336)](_0x4ba1fd=>_0x4ba1fd[_0x334084(0x621)]===_0x476ba1);if(_0x5a3132){let _0x139617=_0x5a3132[_0x334084(0x4e5)];if(_0x20381e=_0x2956d8[_0x334084(0x25a)][_0x334084(0x336)](_0x14254b=>_0x14254b['groupId']===_0x139617&&_0x14254b[_0x334084(0x3d5)]===0x1),_0x35e6d5[_0x334084(0x2c2)][_0x334084(0x20b)]){let _0x48ddf4={'id':_0x2956d8[_0x334084(0x3d7)],'remoteJid':_0x2956d8['remoteJid'],'fromMe':!0x0};await this['deleteMessage'](_0x48ddf4);}if(_0x35e6d5['uazapi'][_0x334084(0x20b)]&&_0x35e6d5['uazapi'][_0x334084(0x569)]&&_0x35e6d5[_0x334084(0x2c2)]['menuType']===_0x334084(0x3bb)){let _0x1d4e8b={'number':_0x2956d8[_0x334084(0x75b)],'options':{'delay':0x0},'textMessage':{'text':_0x334084(0x67f)+_0x2956d8[_0x334084(0x33f)]+_0x334084(0x8d)+_0x476ba1}};await this[_0x334084(0xc5)](_0x1d4e8b);}_0x2956d8[_0x334084(0x16f)]=_0x334084(0x7b),_0x2956d8[_0x334084(0x3d7)]='',_0x2956d8[_0x334084(0x33f)]='',_0x2956d8[_0x334084(0x71e)]=[];}else{this[_0x334084(0xed)][_0x334084(0x2c1)](this[_0x334084(0x88)]+'\x20('+this[_0x334084(0x2b1)][_0x334084(0x3f4)]+_0x334084(0x236));let _0x43162a={'activatedCount':_0x2956d8['chatLog'][_0x334084(0x370)][_0x334084(0x57a)](_0x2c5365=>String(_0x2c5365[_0x334084(0x78a)])===String(_0x19238a))['length'],'moreLogs':['Não\x20respondeu\x20com\x20a\x20enquete.']};if(_0x35e6d5[_0x334084(0x2c2)][_0x334084(0x55b)]){let _0x415960={'number':_0x2956d8[_0x334084(0x75b)],'options':{'delay':0x0},'textMessage':{'text':_0x35e6d5[_0x334084(0x2c2)][_0x334084(0x55b)]}};await this[_0x334084(0xc5)](_0x415960);}if(_0x35e6d5[_0x334084(0x27a)]!==void 0x0&&_0x43162a[_0x334084(0x1bd)]>=_0x35e6d5[_0x334084(0x27a)]){let _0x1c48e2=Date[_0x334084(0x72)](),_0x4f2164=_0x35e6d5['stopMinutesMaxActives']??0xa;isNaN(_0x4f2164)&&(_0x4f2164=0xa);let _0x1f8df7=_0x1c48e2+_0x4f2164*0x3c*0x3e8;_0x43162a['newStoppedUntil']=_0x1f8df7,_0x43162a['moreLogs'][_0x334084(0x45f)](_0x334084(0x549)),this[_0x334084(0x674)](_0x2956d8,_0x1f8df7),_0x2956d8['waitingMenu_id']='',_0x2956d8[_0x334084(0x33f)]='',_0x2956d8[_0x334084(0x71e)]=[];}return this['updateConversation'](_0x2956d8,_0x35e6d5,_0x43162a,!0x0),null;}}if(_0x552b28&&_0x35e6d5['next_groupId']&&!_0x2956d8[_0x334084(0x3d7)]){let _0x59f725=_0x2956d8['blocks']['filter'](_0x554d83=>_0x554d83[_0x334084(0xa0)][_0x334084(0x49e)]()===_0x35e6d5['next_groupId'][_0x334084(0x49e)]())[_0x334084(0x170)]((_0x25855a,_0x4d7f13)=>_0x25855a[_0x334084(0x3d5)]-_0x4d7f13[_0x334084(0x3d5)]);_0x59f725[_0x334084(0x5e9)]>0x0&&(_0x20381e=_0x59f725[0x0]);}if(!_0x20381e){let _0x56ed7a=_0x35e6d5['groupId'],_0x3ed4a2=_0x2956d8['blocks'][_0x334084(0x57a)](_0x3264e5=>_0x3264e5[_0x334084(0xa0)]===_0x56ed7a&&_0x3264e5[_0x334084(0x3d5)]>_0x35e6d5[_0x334084(0x3d5)])[_0x334084(0x170)]((_0x9a7ea,_0x28072e)=>_0x9a7ea[_0x334084(0x3d5)]-_0x28072e['order']);_0x3ed4a2[_0x334084(0x5e9)]>0x0&&(_0x20381e=_0x3ed4a2[0x0]);}if(!_0x20381e)return _0x2956d8[_0x334084(0x16f)]='closed',null;_0x2956d8[_0x334084(0x594)][_0x334084(0x65d)]=_0x2c6208;let _0x4bdb51=JSON['parse'](JSON[_0x334084(0x5cc)](_0x20381e));return this[_0x334084(0x71a)](_0x4bdb51,_0x2956d8[_0x334084(0x594)][_0x334084(0x65d)]),_0x2956d8[_0x334084(0x594)]['lastBlockId']=_0x4bdb51[_0x334084(0x778)],_0x2956d8['chatLog'][_0x334084(0x3d3)]=!0x0,_0x4bdb51;}[a0_0x46df1a(0x36c)](_0x4a7a79,_0x4f9122){const _0x4139e9=a0_0x46df1a;return _0x4a7a79[_0x4139e9(0x420)](/\{\{([^}]+)\}\}/g,(_0x1ac1fa,_0x209342)=>_0x4f9122[_0x209342]||'');}[a0_0x46df1a(0x71a)](_0x5af1fb,_0x14c8cf){const _0x5e83fa=a0_0x46df1a;for(let _0x372972 in _0x5af1fb)typeof _0x5af1fb[_0x372972]==_0x5e83fa(0x691)?_0x5af1fb[_0x372972]=this['replaceVariables'](_0x5af1fb[_0x372972],_0x14c8cf):typeof _0x5af1fb[_0x372972]==_0x5e83fa(0xde)&&this[_0x5e83fa(0x71a)](_0x5af1fb[_0x372972],_0x14c8cf);}async[a0_0x46df1a(0x18f)](_0x34e463,_0x2b71da){const _0x3cd3f3=a0_0x46df1a;let _0x2ce7cc=_0x2b71da[_0x3cd3f3(0x778)];if(_0x34e463['chatLog']&&_0x34e463[_0x3cd3f3(0x594)][_0x3cd3f3(0x370)]){let _0x103b7f=_0x34e463[_0x3cd3f3(0x594)][_0x3cd3f3(0x370)][_0x3cd3f3(0x57a)](_0x4b0f35=>String(_0x4b0f35[_0x3cd3f3(0x78a)])===String(_0x2ce7cc))['pop']();if(_0x103b7f&&_0x103b7f[_0x3cd3f3(0x2fb)]&&_0x2b71da[_0x3cd3f3(0x1fd)])return _0x34e463[_0x3cd3f3(0x16f)]=_0x3cd3f3(0x375),await this[_0x3cd3f3(0x56b)](_0x34e463),null;}if(_0x2b71da[_0x3cd3f3(0x1c0)]===_0x3cd3f3(0x2c2)&&_0x2b71da['uazapi'][_0x3cd3f3(0x424)]===_0x3cd3f3(0x362)&&_0x34e463[_0x3cd3f3(0x3d7)])return _0x34e463[_0x3cd3f3(0x594)]['lastBlockId']=_0x2ce7cc,await this[_0x3cd3f3(0x56b)](_0x34e463),null;let _0x4e3db9=await this['NextBlock'](_0x34e463);if(_0x34e463['chatLog']&&_0x34e463['chatLog'][_0x3cd3f3(0x370)]){let _0x328ec2=_0x34e463[_0x3cd3f3(0x594)]['blockLogs'][_0x3cd3f3(0x57a)](_0x18e752=>String(_0x18e752[_0x3cd3f3(0x78a)])===String(_0x2ce7cc))[_0x3cd3f3(0x5e9)];if(_0x2b71da[_0x3cd3f3(0x27a)]!==void 0x0&&_0x328ec2>=_0x2b71da[_0x3cd3f3(0x27a)]){let _0x484a07=Date['now'](),_0x3d1f8b=_0x2b71da[_0x3cd3f3(0x650)]??0xa;isNaN(_0x3d1f8b)&&(_0x3d1f8b=0xa);let _0x109ca9=_0x484a07+_0x3d1f8b*0x3c*0x3e8,_0xf42a53={'newStoppedUntil':_0x109ca9};return this['updateStopChat'](_0x34e463,_0x109ca9),this[_0x3cd3f3(0x169)](_0x34e463,_0x2b71da,_0xf42a53,!0x0),null;}}_0x4e3db9&&_0x4e3db9[_0x3cd3f3(0x1c0)]!==_0x3cd3f3(0x206)&&await this[_0x3cd3f3(0xf6)](_0x34e463,_0x4e3db9),_0x4e3db9||await this[_0x3cd3f3(0x56b)](_0x34e463),_0x4e3db9&&_0x4e3db9['type']==='save'&&(_0x34e463[_0x3cd3f3(0x594)][_0x3cd3f3(0x1a5)]=_0x2ce7cc,await this[_0x3cd3f3(0x56b)](_0x34e463));}async[a0_0x46df1a(0xf6)](_0x3de1f5,_0x462447){const _0x4f4769=a0_0x46df1a;try{let _0x2f5b69=_0x462447['type'];this[_0x4f4769(0xed)][_0x4f4769(0x2c1)](this['instanceName']+'\x20('+this[_0x4f4769(0x2b1)][_0x4f4769(0x3f4)]+'):\x20Going\x20to\x20'+_0x2f5b69);let _0x5a303e={'uazapi':()=>this[_0x4f4769(0x3f2)](_0x3de1f5,_0x462447),'save':()=>this[_0x4f4769(0x47a)](_0x3de1f5,_0x462447),'stop':()=>this['stopConversation'](_0x3de1f5,_0x462447),'condition':()=>this[_0x4f4769(0x472)](_0x3de1f5,_0x462447),'varedit':()=>this[_0x4f4769(0x50e)](_0x3de1f5,_0x462447),'apirequest':()=>this['processApiRequest'](_0x3de1f5,_0x462447),'goToFlow':()=>this[_0x4f4769(0x360)](_0x3de1f5,_0x462447),'scheduleFlow':()=>this['processScheduleFlow'](_0x3de1f5,_0x462447),'awaitSeconds':()=>this[_0x4f4769(0x148)](_0x3de1f5,_0x462447),'clearVariables':()=>this[_0x4f4769(0x4d9)](_0x3de1f5,_0x462447)}[_0x2f5b69];_0x5a303e&&await _0x5a303e();}catch(_0xcc9d72){this[_0x4f4769(0xed)][_0x4f4769(0x2fb)](this[_0x4f4769(0x88)]+'\x20('+this[_0x4f4769(0x2b1)][_0x4f4769(0x3f4)]+_0x4f4769(0x12d)+(_0xcc9d72 instanceof Error?_0xcc9d72['message']:JSON[_0x4f4769(0x5cc)](_0xcc9d72,null,0x2)));}}async[a0_0x46df1a(0x148)](_0x131609,_0xdb9741){const _0x5c945d=a0_0x46df1a;if(this[_0x5c945d(0xed)]['verbose'](this[_0x5c945d(0x88)]+'\x20('+this[_0x5c945d(0x2b1)][_0x5c945d(0x3f4)]+_0x5c945d(0x1cc)),!_0x131609||!_0xdb9741)return this[_0x5c945d(0xed)][_0x5c945d(0x2fb)](this[_0x5c945d(0x88)]+'\x20('+this['instance'][_0x5c945d(0x3f4)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x2541d6=+_0xdb9741['awaitSeconds'];isNaN(_0x2541d6)&&(_0x2541d6=0x0),_0x2541d6=Math[_0x5c945d(0x1a6)](_0x2541d6,0x3c),await(0x0,w['delay'])(_0x2541d6*0x3e8);let _0x1a53fb={'moreLogs':[_0x5c945d(0x686)+_0x2541d6+_0x5c945d(0x20e)]};return await this[_0x5c945d(0x169)](_0x131609,_0xdb9741,_0x1a53fb),_0x2541d6;}async[a0_0x46df1a(0x4d9)](_0x1a8ed8,_0x4a626f){const _0x113504=a0_0x46df1a;if(this[_0x113504(0xed)][_0x113504(0x2c1)](this[_0x113504(0x88)]+'\x20('+this['instance'][_0x113504(0x3f4)]+'):\x20Entrou\x20na\x20função\x20clearVariables'),!_0x1a8ed8||!_0x4a626f)return this[_0x113504(0xed)][_0x113504(0x2fb)](this[_0x113504(0x88)]+'\x20('+this[_0x113504(0x2b1)][_0x113504(0x3f4)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x2d6616=[];if(_0x4a626f[_0x113504(0x2c3)]['trim']()===_0x113504(0x5c2)){let _0x1dc609=[_0x113504(0x5d6),_0x113504(0x468),_0x113504(0x556),_0x113504(0x2c8),_0x113504(0x543),_0x113504(0x778),_0x113504(0x7f)];_0x2d6616=Object[_0x113504(0x794)](_0x1a8ed8['chatLog'][_0x113504(0x65d)])[_0x113504(0x57a)](_0xdb82a7=>_0xdb82a7[_0x113504(0x3f0)]('_')&&!_0x1dc609[_0x113504(0x3f1)](_0xdb82a7));}else _0x2d6616=_0x4a626f['clearVariables'][_0x113504(0x1ed)]('|')[_0x113504(0x3f6)](_0x20e9ca=>(_0x20e9ca=_0x20e9ca[_0x113504(0x420)](/[{}]/g,'')['trim'](),_0x20e9ca['startsWith']('_')?_0x20e9ca:'_'+_0x20e9ca));let _0x25d556=[];_0x2d6616[_0x113504(0x14b)](_0x4d4d7a=>{const _0x3ae75c=_0x113504;_0x4d4d7a in _0x1a8ed8['chatLog']['realVariables']&&(delete _0x1a8ed8['chatLog'][_0x3ae75c(0x65d)][_0x4d4d7a],_0x25d556['push'](_0x4d4d7a));}),_0x25d556['length']>0x0?this[_0x113504(0xed)][_0x113504(0x2c1)](this[_0x113504(0x88)]+'\x20('+this[_0x113504(0x2b1)]['wuid']+'):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20'+_0x25d556[_0x113504(0x473)](',\x20')):this[_0x113504(0xed)][_0x113504(0x2c1)](this[_0x113504(0x88)]+'\x20('+this[_0x113504(0x2b1)][_0x113504(0x3f4)]+_0x113504(0x5b6));let _0x39109a={'moreLogs':[_0x113504(0x16e)+_0x25d556['join'](',\x20')]};return await this[_0x113504(0x169)](_0x1a8ed8,_0x4a626f,_0x39109a),null;}async[a0_0x46df1a(0x744)](_0x5ed0ed,_0x327b30){const _0x21b507=a0_0x46df1a;if(this['logger']['verbose'](this[_0x21b507(0x88)]+'\x20('+this[_0x21b507(0x2b1)][_0x21b507(0x3f4)]+'):\x20Entrou\x20na\x20função\x20scheduleFlow'),!_0x5ed0ed||!_0x327b30)return this[_0x21b507(0xed)][_0x21b507(0x2fb)](this['instanceName']+'\x20('+this['instance'][_0x21b507(0x3f4)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x27cd85=_0x5ed0ed[_0x21b507(0x75b)];_0x327b30[_0x21b507(0x699)][_0x21b507(0x75b)]&&_0x327b30[_0x21b507(0x699)]['remoteJid'][_0x21b507(0x7a1)]()!==''&&(_0x27cd85=_0x327b30[_0x21b507(0x2c2)][_0x21b507(0x75b)][_0x21b507(0x7a1)]());let _0x4afcab=_0x327b30[_0x21b507(0x699)][_0x21b507(0x683)]*0xea60,_0x16ce22=Date['now']()+_0x4afcab,_0xdd5d28={'status':_0x21b507(0x51a),'info':'Fluxo\x20agendado\x20pelo\x20fluxo\x20'+_0x5ed0ed[_0x21b507(0x11d)],'remoteJids':[_0x27cd85],'when':_0x16ce22,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x21b507(0xa2),'flowName':_0x327b30['scheduleFlow'][_0x21b507(0x777)]};this['editScheduleMessage'](_0xdd5d28);let _0x517546=await this['NextBlock'](_0x5ed0ed);_0x517546&&await this['processblock'](_0x5ed0ed,_0x517546);}async['processgoToFlow'](_0x39f29d,_0x295a63){const _0x5f39cb=a0_0x46df1a;if(this[_0x5f39cb(0xed)][_0x5f39cb(0x2c1)](this['instanceName']+'\x20('+this[_0x5f39cb(0x2b1)][_0x5f39cb(0x3f4)]+_0x5f39cb(0x11c)),!_0x39f29d||!_0x295a63)return this[_0x5f39cb(0xed)][_0x5f39cb(0x2fb)](this[_0x5f39cb(0x88)]+'\x20('+this[_0x5f39cb(0x2b1)][_0x5f39cb(0x3f4)]+_0x5f39cb(0x3da)),null;await this[_0x5f39cb(0x169)](_0x39f29d,_0x295a63,{},!0x0,!0x0);let _0xba0765=_0x295a63[_0x5f39cb(0x191)];_0x39f29d=await this[_0x5f39cb(0x612)](_0xba0765,_0x39f29d[_0x5f39cb(0x75b)],_0x39f29d[_0x5f39cb(0x594)][_0x5f39cb(0x65d)]);let _0x3eb318=await this['NextBlock'](_0x39f29d);_0x3eb318&&await this['processblock'](_0x39f29d,_0x3eb318);}async[a0_0x46df1a(0x612)](_0x339d93,_0x227729,_0x50a020){const _0x4fda49=a0_0x46df1a;this[_0x4fda49(0xed)][_0x4fda49(0x2c1)](this[_0x4fda49(0x88)]+'\x20('+this[_0x4fda49(0x2b1)][_0x4fda49(0x3f4)]+'):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]');try{let _0x437173=this['AutomateSystem'][_0x4fda49(0x6a2)][_0x4fda49(0x336)](_0x1910f2=>_0x1910f2[_0x4fda49(0x778)]===_0x339d93);_0x437173||this[_0x4fda49(0xed)][_0x4fda49(0x2fb)](this[_0x4fda49(0x88)]+'\x20('+this['instance'][_0x4fda49(0x3f4)]+_0x4fda49(0xa1)+_0x339d93+_0x4fda49(0x294));let _0x1452dc=await this[_0x4fda49(0x91)][_0x4fda49(0xa2)]['findOne']({'where':{'_id':_0x437173[_0x4fda49(0x778)]}});if(!_0x1452dc||!_0x1452dc[_0x4fda49(0x11f)]?.[_0x4fda49(0x3f1)](this[_0x4fda49(0x2b1)][_0x4fda49(0x3f4)]))throw this[_0x4fda49(0xed)][_0x4fda49(0x2fb)](this[_0x4fda49(0x88)]+'\x20('+this[_0x4fda49(0x2b1)][_0x4fda49(0x3f4)]+_0x4fda49(0xa1)+_0x339d93+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x4fda49(0x5b2)+_0x339d93+_0x4fda49(0x252));let _0x5a08c3=require('mongodb')[_0x4fda49(0x1d7)],_0x342a74=Date['now'](),_0x31124a=_0x4fda49(0x1d4),_0x6144af={},_0x57b276={},_0x288872=this['AutomateSystem']['flows'][_0x4fda49(0x336)](_0xb646ae=>_0xb646ae[_0x4fda49(0x778)]===_0x1452dc['_id']?.[_0x4fda49(0x49e)]()),_0x4e2805=_0x288872?.[_0x4fda49(0x15a)]??_0x1452dc[_0x4fda49(0x15a)]??0x0,_0x15bc59=_0x288872?.['readMessages']??_0x1452dc[_0x4fda49(0x3a0)]??!0x1,_0x39bc08={'flowId':_0x437173[_0x4fda49(0x778)],'readMessages':_0x437173[_0x4fda49(0x3a0)],..._0x1452dc,'chatLog':null},_0x4e4728={'lastReceivedMessage':_0x6144af,'lastSendMessage':_0x57b276,'lastBlockId':_0x31124a,'lastCondition':!0x0,'realVariables':_0x50a020};_0x39bc08[_0x4fda49(0x594)]=_0x4e4728,_0x39bc08[_0x4fda49(0x594)][_0x4fda49(0x65d)]={..._0x50a020},delete _0x39bc08[_0x4fda49(0x778)],_0x39bc08[_0x4fda49(0x778)]=new _0x5a08c3(),_0x39bc08[_0x4fda49(0x533)]=_0x342a74,_0x39bc08[_0x4fda49(0x16f)]=_0x4fda49(0x7b),_0x39bc08['remoteJid']=_0x227729,_0x39bc08[_0x4fda49(0x15a)]=_0x4e2805,_0x39bc08[_0x4fda49(0x3a0)]=_0x15bc59;let _0x208b45=await this['repository'][_0x4fda49(0x3e7)][_0x4fda49(0x4b3)](_0x39bc08[_0x4fda49(0x778)],_0x39bc08,this[_0x4fda49(0x2b1)][_0x4fda49(0x3f4)]);return this[_0x4fda49(0xed)]['verbose'](this['instanceName']+'\x20('+this[_0x4fda49(0x2b1)][_0x4fda49(0x3f4)]+_0x4fda49(0x660)),_0x208b45?_0x39bc08:null;}catch(_0x263690){let _0x314a82=_0x4fda49(0x526),_0x13a9a5=_0x263690 instanceof Error?_0x263690[_0x4fda49(0x64f)]:typeof _0x263690==_0x4fda49(0xde)?JSON[_0x4fda49(0x5cc)](_0x263690):_0x263690,_0x26f105=_0x314a82+':\x20'+_0x13a9a5;throw this[_0x4fda49(0xed)][_0x4fda49(0x2fb)](this[_0x4fda49(0x88)]+'\x20('+this[_0x4fda49(0x2b1)][_0x4fda49(0x3f4)]+_0x4fda49(0x28e)+_0x26f105),new m(_0x26f105);}}async[a0_0x46df1a(0x776)](_0x510ee1,_0x2e479e){const _0x498315=a0_0x46df1a;let _0x2f2ae9,_0x14d0a3;try{let _0xb1bb7e=_0x2e479e[_0x498315(0x2ae)];if(!_0xb1bb7e||!_0xb1bb7e['url']||!_0xb1bb7e['method'])throw new Error(_0x498315(0x14e));let _0x12cab0;([_0x498315(0x69c),_0x498315(0x63d),'https://api.elevenlabs.io/v1/text-to-speech/']['some'](_0x5cea9a=>_0xb1bb7e[_0x498315(0x53f)][_0x498315(0x3f1)](_0x5cea9a))||_0xb1bb7e['requestFile'])&&(_0x12cab0='arraybuffer');let _0x2e2e97='\u205f',_0x4476d7;try{_0x4476d7=JSON[_0x498315(0xab)](_0xb1bb7e['bodyString'][_0x498315(0x420)](new RegExp(_0x2e2e97,'g'),''));}catch(_0xc114e6){throw _0xc114e6;}let _0x581f0e={'method':_0xb1bb7e[_0x498315(0x27b)],'url':_0xb1bb7e[_0x498315(0x53f)],'headers':_0xb1bb7e[_0x498315(0x292)]||{},..._0xb1bb7e[_0x498315(0x27b)][_0x498315(0x117)]()!==_0x498315(0x73f)&&_0xb1bb7e['bodyString']?{'data':JSON[_0x498315(0xab)](_0xb1bb7e[_0x498315(0x2d3)][_0x498315(0x420)](new RegExp(_0x2e2e97,'g'),''))}:{},..._0x12cab0&&{'responseType':_0x12cab0}},_0x507d35=await(0x0,Q[_0x498315(0x2fa)])(_0x581f0e),_0x4c7e69=_0x507d35[_0x498315(0x739)]['content-type'];if(_0x4c7e69&&_0x4c7e69[_0x498315(0x3f1)]('application/json')||typeof _0x507d35['data']==_0x498315(0x691)){if(typeof _0x507d35['data']==_0x498315(0x691)){let _0x405052=_0x507d35[_0x498315(0x72b)][_0x498315(0x420)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x498315(0x7a1)]();try{_0x2f2ae9=JSON['parse'](_0x405052);}catch(_0x4e8574){this['logger'][_0x498315(0x2fb)](_0x498315(0x19b)+_0x4e8574[_0x498315(0x64f)]),_0x2f2ae9={'_apiResponse':_0x507d35[_0x498315(0x72b)]};}}else _0x2f2ae9=_0x507d35[_0x498315(0x72b)];let _0x5c2e30=_0x510ee1[_0x498315(0x594)]['realVariables'],_0x4af188=this['flattenObject'](_0x2f2ae9);return Object[_0x498315(0x508)](_0x5c2e30,_0x4af188),_0x510ee1[_0x498315(0x594)][_0x498315(0x65d)]=_0x5c2e30,_0x14d0a3={'error':!0x1,'apiResponse':_0x2f2ae9},this[_0x498315(0x169)](_0x510ee1,_0x2e479e,_0x14d0a3),_0x2f2ae9;}if(_0x4c7e69&&(_0x4c7e69[_0x498315(0x3f1)](_0x498315(0x7aa))||_0x4c7e69['includes']('image')||_0x4c7e69[_0x498315(0x3f1)](_0x498315(0x47f))||_0x4c7e69[_0x498315(0x3f1)](_0x498315(0x345)))){this[_0x498315(0xed)]['verbose'](this[_0x498315(0x88)]+'\x20('+this['instance'][_0x498315(0x3f4)]+'):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20'+_0x4c7e69);let _0x46348b=(0x0,Y['v4'])(),_0x2f944e='',_0x9b8243={'image/jpeg':_0x498315(0x171),'image/png':'.png','image/gif':_0x498315(0x18b),'image/webp':'.webp','image/svg+xml':'.svg','audio/mpeg':_0x498315(0x318),'audio/ogg':_0x498315(0x10f),'audio/wav':_0x498315(0x75f),'video/mp4':'.mp4','video/webm':_0x498315(0x678),'video/ogg':_0x498315(0x21c),'text/plain':_0x498315(0x6a1),'application/pdf':_0x498315(0x74b),'application/msword':_0x498315(0x1e9),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x498315(0x4cf),'application/vnd.ms-excel':_0x498315(0x3a1),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x498315(0x5a9),'application/vnd.ms-powerpoint':_0x498315(0xcc),'application/vnd.openxmlformats-officedocument.presentationml.presentation':'.pptx'};_0x9b8243[_0x4c7e69]?(_0x2f944e=_0x9b8243[_0x4c7e69],this[_0x498315(0xed)][_0x498315(0x2c1)](this['instanceName']+'\x20('+this[_0x498315(0x2b1)][_0x498315(0x3f4)]+_0x498315(0x2bb)+_0x2f944e)):(_0x2f944e=_0x498315(0x1e0),this['logger'][_0x498315(0x2c1)](this[_0x498315(0x88)]+'\x20('+this['instance']['wuid']+_0x498315(0x716)+_0x2f944e)),_0x46348b+=_0x2f944e,this[_0x498315(0xed)][_0x498315(0x2c1)](this[_0x498315(0x88)]+'\x20('+this['instance'][_0x498315(0x3f4)]+_0x498315(0x76f)+_0x46348b);let _0x10b45e=this[_0x498315(0x46a)][_0x498315(0x20f)]('SERVER')['URL'];if(!_0x10b45e){let _0x4b414c=this['configService'][_0x498315(0x20f)]('SSL_CONF');_0x10b45e=_0x498315(0xc3)+(_0x4b414c&&_0x4b414c[_0x498315(0x5fe)]['split']('/')[0x4]);}let _0x412c4a=Buffer[_0x498315(0x13c)](_0x507d35[_0x498315(0x72b)]);await this['saveMediaToFile'](_0x412c4a,_0x46348b);let _0x36a228=_0x498315(0x3af)+_0x46348b;_0x36a228=''+_0x10b45e+_0x36a228,_0x2f2ae9={'fileUrl':_0x36a228},_0x510ee1[_0x498315(0x594)][_0x498315(0x65d)]['fileUrl']=_0x36a228;let _0x4edb5b=_0x510ee1[_0x498315(0x594)][_0x498315(0x65d)],_0x3a290c=this['flattenObject'](_0x2f2ae9);return Object[_0x498315(0x508)](_0x4edb5b,_0x3a290c),_0x510ee1[_0x498315(0x594)][_0x498315(0x65d)]=_0x4edb5b,_0x14d0a3={'error':!0x1,'apiResponse':{'fileUrl':_0x36a228}},this['updateConversation'](_0x510ee1,_0x2e479e,_0x14d0a3),_0x2f2ae9;}}catch(_0xc78871){this[_0x498315(0xed)]['error'](_0x498315(0x22b)+_0xc78871[_0x498315(0x64f)]),_0xc78871[_0x498315(0x1cf)]&&(_0x2f2ae9=_0xc78871[_0x498315(0x1cf)]['data']);let _0x46087e=_0x510ee1[_0x498315(0x594)][_0x498315(0x65d)],_0x162cec=this['flattenObject'](_0x2f2ae9);return Object[_0x498315(0x508)](_0x46087e,_0x162cec),_0x510ee1[_0x498315(0x594)]['realVariables']=_0x46087e,_0x14d0a3={'error':!0x0,'errorLog':_0xc78871[_0x498315(0x49e)](),'apiResponse':_0x2f2ae9},this[_0x498315(0x169)](_0x510ee1,_0x2e479e,_0x14d0a3),{'success':!0x1};}}['applyvaredit'](_0x450ca4,_0xd9503a){const _0xb248ab=a0_0x46df1a;let _0xcd7465=_0xf79ca8=>{const _0x230719=a0_0x2bf6;let _0x50d22d=_0xf79ca8[_0x230719(0x420)](/[^0-9.,-]/g,'')[_0x230719(0x420)](',','.'),_0x2a2e05=parseFloat(_0x50d22d);return isNaN(_0x2a2e05)?null:_0x2a2e05;},_0x2a3dc7=_0xd9503a['firstValue'],_0x56ebdc=_0xd9503a[_0xb248ab(0x57b)];typeof _0x2a3dc7==_0xb248ab(0x691)&&(_0x2a3dc7=this[_0xb248ab(0x36c)](_0x2a3dc7,_0x450ca4[_0xb248ab(0x594)][_0xb248ab(0x65d)])??''),typeof _0x56ebdc==_0xb248ab(0x691)&&(_0x56ebdc=this[_0xb248ab(0x36c)](_0x56ebdc,_0x450ca4[_0xb248ab(0x594)][_0xb248ab(0x65d)])??'');let _0x1c4e6b=null;if(!_0xd9503a[_0xb248ab(0x5da)])return null;switch(this[_0xb248ab(0xed)][_0xb248ab(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0xb248ab(0x3f4)]+_0xb248ab(0x3c4)+_0x2a3dc7),this[_0xb248ab(0xed)][_0xb248ab(0x2c1)](this[_0xb248ab(0x88)]+'\x20('+this[_0xb248ab(0x2b1)][_0xb248ab(0x3f4)]+_0xb248ab(0x542)+_0x56ebdc),_0xd9503a[_0xb248ab(0x5da)]){case'+':case'-':case'*':case'/':let _0x4a6aff=_0xcd7465(_0x2a3dc7||'0'),_0x4816aa=_0xcd7465(_0x56ebdc||'0');if(_0x4a6aff===null)return null;switch(_0xd9503a[_0xb248ab(0x5da)]){case'+':_0x1c4e6b=_0x4a6aff+(_0x4816aa??0x0);break;case'-':_0x1c4e6b=_0x4a6aff-(_0x4816aa??0x0);break;case'*':_0x1c4e6b=_0x4a6aff*(_0x4816aa??0x1);break;case'/':_0x4816aa!==0x0&&(_0x1c4e6b=_0x4a6aff/(_0x4816aa??0x1));break;}break;case _0xb248ab(0x630):case _0xb248ab(0x70b):let _0x161e61=_0x56ebdc,_0x4e9dd0=_0xd9503a[_0xb248ab(0x3d8)];if(typeof _0x4e9dd0=='string'&&(_0x4e9dd0=this[_0xb248ab(0x36c)](_0x4e9dd0,_0x450ca4[_0xb248ab(0x594)][_0xb248ab(0x65d)])??''),_0x161e61&&_0x4e9dd0!==void 0x0){let _0x28467a=_0xd9503a['editOperator']===_0xb248ab(0x630)?new RegExp(_0x161e61[_0xb248ab(0x420)](/[-\/\\^$*+?.()|[\]{}]/g,_0xb248ab(0x6c7)),'g'):new RegExp(_0x161e61,'g');_0x1c4e6b=_0x2a3dc7[_0xb248ab(0x420)](_0x28467a,_0x4e9dd0);}else console[_0xb248ab(0x33d)](_0xb248ab(0x6c5));break;case _0xb248ab(0x5f9):_0x1c4e6b=_0x56ebdc;break;case'extractRegex':let _0x21ea80=_0x2a3dc7[_0xb248ab(0x7a2)](new RegExp(_0x56ebdc||''));_0x1c4e6b=_0x21ea80?_0x21ea80[0x0]:'';break;case _0xb248ab(0x2b7):_0x1c4e6b=_0x2a3dc7['slice'](0x0,parseInt(_0x56ebdc||'0'));break;case _0xb248ab(0x2e3):let _0x57858c=parseInt(_0x56ebdc||'0');_0x1c4e6b=_0x2a3dc7[_0xb248ab(0x16a)](_0x2a3dc7[_0xb248ab(0x5e9)]-_0x57858c);break;case _0xb248ab(0x53e):let _0x20c3af=_0xcd7465(_0x2a3dc7),_0x51acb5=parseInt(_0x56ebdc||'0');_0x51acb5=Math[_0xb248ab(0x54f)](_0x51acb5),_0x20c3af!==null?_0x1c4e6b=_0x20c3af[_0xb248ab(0x95)](_0xb248ab(0x78d),{'minimumFractionDigits':_0x51acb5,'maximumFractionDigits':_0x51acb5}):(console[_0xb248ab(0x33d)](_0xb248ab(0x101)+_0x2a3dc7),_0x1c4e6b=null);break;case _0xb248ab(0x1f9):let _0x15da64=_0xcd7465(_0x2a3dc7);_0x15da64!==null?_0x1c4e6b=_0x15da64[_0xb248ab(0x95)](_0xb248ab(0x78d),{'style':_0xb248ab(0x756),'currency':'BRL'}):(console[_0xb248ab(0x33d)](_0xb248ab(0x6ba)+_0x2a3dc7),_0x1c4e6b=null);break;case _0xb248ab(0x5af):_0x1c4e6b=_0x2a3dc7['toUpperCase']();break;case'lowerCase':_0x1c4e6b=_0x2a3dc7[_0xb248ab(0x5cf)]();break;case _0xb248ab(0x439):_0x1c4e6b=_0x2a3dc7[_0xb248ab(0x1ed)]('\x20')['map'](_0x3c01cd=>_0x3c01cd[_0xb248ab(0x213)](0x0)[_0xb248ab(0x117)]()+_0x3c01cd[_0xb248ab(0x16a)](0x1)[_0xb248ab(0x5cf)]())[_0xb248ab(0x473)]('\x20');break;case'trimmed':_0x1c4e6b=_0x2a3dc7['trim']();break;default:_0x1c4e6b=_0x2a3dc7;}return _0x1c4e6b!==null?_0x1c4e6b[_0xb248ab(0x49e)]():null;}async['processvaredits'](_0x2c3d84,_0x223d2a){const _0x198d54=a0_0x46df1a;try{let _0x5de9bf=_0x2c3d84[_0x198d54(0x5d0)]?.['filter'](_0x3af5dc=>_0x3af5dc[_0x198d54(0x78a)]===_0x223d2a[_0x198d54(0x778)]?.[_0x198d54(0x49e)]())||[],_0x95a180=_0x223d2a[_0x198d54(0x3ca)],_0x56445a=null,_0x50b79c=[],_0x190951=_0x2c3d84[_0x198d54(0x594)][_0x198d54(0x65d)][_0x95a180];_0x50b79c[_0x198d54(0x45f)](_0x198d54(0x56f)+_0x190951+'\x22');for(let _0x1e9d6f of _0x5de9bf){_0x1e9d6f[_0x198d54(0x5fb)]=_0x190951,_0x56445a=_0x1e9d6f[_0x198d54(0x5fb)];let _0x3dffbe;try{_0x3dffbe=this[_0x198d54(0x3e2)](_0x2c3d84,_0x1e9d6f);}catch(_0x197652){this['logger'][_0x198d54(0x2fb)](_0x198d54(0x2e9)+_0x197652[_0x198d54(0x64f)]);continue;}if(_0x3dffbe!==null){let _0x4df3bf=_0x198d54(0x675)+_0x1e9d6f['editOperator']+'\x22',_0x3ac09b=['toBRL',_0x198d54(0x5af),_0x198d54(0x4c7),_0x198d54(0x439),_0x198d54(0x382)];_0x1e9d6f[_0x198d54(0x5da)]===_0x198d54(0x630)||_0x1e9d6f[_0x198d54(0x5da)]===_0x198d54(0x70b)?_0x4df3bf+=_0x198d54(0x287)+_0x1e9d6f[_0x198d54(0x57b)]+_0x198d54(0x1ad)+_0x1e9d6f[_0x198d54(0x3d8)]+'\x22':!_0x3ac09b[_0x198d54(0x3f1)](_0x1e9d6f[_0x198d54(0x5da)])&&_0x1e9d6f['secondValue']!==null&&_0x1e9d6f[_0x198d54(0x57b)]!==void 0x0&&(_0x4df3bf+=',\x20valor\x20passado:\x20\x22'+_0x1e9d6f[_0x198d54(0x57b)]+'\x22'),_0x4df3bf+=_0x198d54(0x3c5)+_0x3dffbe+'.',_0x50b79c['push'](_0x4df3bf);}_0x3dffbe!==null&&(_0x190951=_0x3dffbe);}if(_0x2c3d84[_0x198d54(0x594)][_0x198d54(0x65d)]&&_0x223d2a[_0x198d54(0x3ca)]){_0x2c3d84['chatLog'][_0x198d54(0x65d)][_0x223d2a[_0x198d54(0x3ca)]]=_0x190951;let _0x37f51e={'variable':_0x223d2a['saveVariable'],'oldValue':_0x56445a,'newValue':_0x190951,'moreLogs':_0x50b79c};try{this['updateConversation'](_0x2c3d84,_0x223d2a,_0x37f51e);}catch(_0x2e4a26){this[_0x198d54(0xed)][_0x198d54(0x2fb)]('Erro\x20ao\x20atualizar\x20conversa:\x20'+_0x2e4a26[_0x198d54(0x64f)]);}}return _0x95a180;}catch(_0x59eb19){return this[_0x198d54(0xed)][_0x198d54(0x2fb)]('Erro\x20inesperado\x20em\x20processvaredits:\x20'+_0x59eb19[_0x198d54(0x64f)]),null;}}async['processConditions'](_0x167469,_0x258695){const _0x3bb178=a0_0x46df1a;try{let _0x51502d=[],_0x39109b=_0x167469[_0x3bb178(0x31c)][_0x3bb178(0x57a)](_0x527338=>_0x527338[_0x3bb178(0x78a)]===_0x258695[_0x3bb178(0x778)][_0x3bb178(0x49e)]()),_0x197832=null,_0x4096c8=!0x1;for(let _0x4fe2c0 of _0x39109b){let _0x2c62af=this[_0x3bb178(0x33b)](_0x167469,_0x4fe2c0);_0x51502d[_0x3bb178(0x45f)]('Primeiro\x20Valor:\x20'+_0x4fe2c0[_0x3bb178(0x5fb)]+_0x3bb178(0x62a)+_0x4fe2c0['expression']+_0x3bb178(0x3a8)+_0x4fe2c0[_0x3bb178(0x57b)]+_0x3bb178(0x129)+_0x2c62af),_0x197832===null?_0x197832=_0x2c62af:_0x4fe2c0[_0x3bb178(0x44b)]==='and'?(_0x197832=_0x197832&&_0x2c62af,_0x2c62af||(_0x4096c8=!0x0)):_0x4fe2c0[_0x3bb178(0x44b)]==='or'&&(_0x4096c8||(_0x197832=_0x197832||_0x2c62af));}_0x197832===null&&(_0x197832=!0x0);let _0x14c16d={'moreLogs':_0x51502d};_0x167469['chatLog'][_0x3bb178(0x3d3)]=_0x197832,await this['updateConversation'](_0x167469,_0x258695,_0x14c16d);}catch(_0x4058c5){this[_0x3bb178(0xed)][_0x3bb178(0x2fb)](this['instanceName']+'\x20('+this[_0x3bb178(0x2b1)][_0x3bb178(0x3f4)]+'):\x20Error\x20processing\x20conditions:\x20'+(_0x4058c5 instanceof Error?_0x4058c5[_0x3bb178(0x64f)]:JSON[_0x3bb178(0x5cc)](_0x4058c5,null,0x2)));}}[a0_0x46df1a(0x33b)](_0x37029e,_0x3ac128){const _0x552392=a0_0x46df1a;let _0x4198dd=_0x3ac128[_0x552392(0x5fb)],_0x2754ac=_0x3ac128[_0x552392(0x57b)];typeof _0x4198dd==_0x552392(0x691)&&(_0x4198dd=this[_0x552392(0x36c)](_0x4198dd,_0x37029e[_0x552392(0x594)][_0x552392(0x65d)])??''),typeof _0x2754ac==_0x552392(0x691)&&(_0x2754ac=this[_0x552392(0x36c)](_0x2754ac,_0x37029e[_0x552392(0x594)][_0x552392(0x65d)])??'');try{switch(_0x3ac128[_0x552392(0x51f)]){case _0x552392(0x27c):return _0x4198dd===_0x2754ac;case _0x552392(0x670):return _0x4198dd!==_0x2754ac;case _0x552392(0x1ea):return this['contains'](_0x4198dd,_0x2754ac);case'notContains':return!this[_0x552392(0x1ea)](_0x4198dd,_0x2754ac);case _0x552392(0x5c1):return parseFloat(_0x4198dd)>parseFloat(_0x2754ac);case _0x552392(0x5a8):return parseFloat(_0x4198dd)<parseFloat(_0x2754ac);case _0x552392(0x2bd):return _0x4198dd!=='';case _0x552392(0x395):return _0x4198dd==='';case _0x552392(0x5e1):return new RegExp(_0x2754ac)[_0x552392(0x30d)](_0x4198dd);case _0x552392(0x33e):return!new RegExp(_0x2754ac)[_0x552392(0x30d)](_0x4198dd);default:return!0x1;}}catch(_0x2f2211){return this[_0x552392(0xed)]['error']('Erro\x20ao\x20avaliar\x20a\x20condição:\x20'+_0x2f2211),!0x1;}}[a0_0x46df1a(0x1ea)](_0x229963,_0x49fdc){const _0x383fa7=a0_0x46df1a;if(_0x229963===_0x49fdc&&/^\d+$/[_0x383fa7(0x30d)](_0x229963))return!0x0;if(this[_0x383fa7(0x113)](_0x229963)&&/^\d+$/[_0x383fa7(0x30d)](_0x49fdc)){let _0x18b0df=_0x229963[_0x383fa7(0x1ed)](',')[_0x383fa7(0x3f6)](_0x1c44bf=>parseInt(_0x1c44bf[_0x383fa7(0x7a1)]())),_0x5b3111=parseInt(_0x49fdc);return _0x18b0df[_0x383fa7(0x3f1)](_0x5b3111);}return _0x229963['includes'](_0x49fdc);}[a0_0x46df1a(0x113)](_0x42c5b5){const _0x310c27=a0_0x46df1a;return/^\d+(,\d+)*$/[_0x310c27(0x30d)](_0x42c5b5);}['processConditionsTest'](_0xe03cc2){const _0x1ca0f2=a0_0x46df1a;let _0x56792b=!0x0,_0x5631ae=null;for(let _0x33365b of _0xe03cc2){let _0x469f66=this['evaluateConditionTest'](_0x33365b);if(_0x5631ae==='or'&&_0x469f66){_0x56792b=!0x0;break;}if(_0x5631ae===_0x1ca0f2(0x351)&&!_0x469f66){_0x56792b=!0x1;break;}_0x5631ae=_0x33365b[_0x1ca0f2(0x44b)];}return _0x56792b;}[a0_0x46df1a(0x385)](_0x4fb5fd){const _0x30c2fb=a0_0x46df1a;let _0x274438=_0x4fb5fd[_0x30c2fb(0x5fb)],_0x5de810=_0x4fb5fd[_0x30c2fb(0x57b)];try{switch(_0x4fb5fd[_0x30c2fb(0x51f)]){case'equal':return String(_0x274438)===String(_0x5de810);case _0x30c2fb(0x670):return String(_0x274438)!==String(_0x5de810);case _0x30c2fb(0x1ea):return String(_0x274438)[_0x30c2fb(0x3f1)](String(_0x5de810));case _0x30c2fb(0x42f):return!String(_0x274438)[_0x30c2fb(0x3f1)](String(_0x5de810));case _0x30c2fb(0x5c1):return parseFloat(String(_0x274438))>parseFloat(String(_0x5de810));case _0x30c2fb(0x5a8):return parseFloat(String(_0x274438))<parseFloat(String(_0x5de810));case _0x30c2fb(0x2bd):return String(_0x274438)!=='';case _0x30c2fb(0x395):return String(_0x274438)==='';case _0x30c2fb(0x5e1):return new RegExp(String(_0x5de810))[_0x30c2fb(0x30d)](String(_0x274438));case _0x30c2fb(0x33e):return!new RegExp(String(_0x5de810))['test'](String(_0x274438));default:return!0x1;}}catch(_0x55de58){return this['logger'][_0x30c2fb(0x2fb)](_0x30c2fb(0x227)+_0x55de58),!0x1;}}async[a0_0x46df1a(0x47a)](_0x4e125d,_0x5bcdb9){const _0x8fdf69=a0_0x46df1a;if(this[_0x8fdf69(0xed)][_0x8fdf69(0x2c1)](this[_0x8fdf69(0x88)]+'\x20('+this[_0x8fdf69(0x2b1)][_0x8fdf69(0x3f4)]+'):\x20Entrou\x20na\x20função\x20saveReply'),!_0x4e125d||!_0x5bcdb9)return this[_0x8fdf69(0xed)][_0x8fdf69(0x2fb)](this[_0x8fdf69(0x88)]+'\x20('+this[_0x8fdf69(0x2b1)][_0x8fdf69(0x3f4)]+_0x8fdf69(0x3da)),null;let _0x34b7b4=_0x4e125d[_0x8fdf69(0x594)][_0x8fdf69(0x500)]['key']['id'];this[_0x8fdf69(0xed)][_0x8fdf69(0x2c1)](this[_0x8fdf69(0x88)]+'\x20('+this[_0x8fdf69(0x2b1)][_0x8fdf69(0x3f4)]+'):\x20mediaMessageInfoId\x20:\x20'+_0x34b7b4);let _0x3524db={'key':{'id':_0x34b7b4}},_0x2d7420=_0x5bcdb9[_0x8fdf69(0x3ca)];_0x4e125d[_0x8fdf69(0x594)][_0x8fdf69(0x65d)]['_'+_0x2d7420+_0x8fdf69(0x398)]=null,_0x4e125d[_0x8fdf69(0x594)][_0x8fdf69(0x65d)]['_'+_0x2d7420+_0x8fdf69(0x411)]=null,_0x4e125d[_0x8fdf69(0x594)]['realVariables']['_'+_0x2d7420+_0x8fdf69(0x355)]=null,_0x4e125d['chatLog']['realVariables']['_'+_0x2d7420+_0x8fdf69(0x98)]=_0x4e125d[_0x8fdf69(0x594)][_0x8fdf69(0x500)][_0x8fdf69(0x1c0)];try{let _0x23a35c=await this['getBase64FromMediaMessage'](_0x3524db);this['logger'][_0x8fdf69(0x2c1)](this[_0x8fdf69(0x88)]+'\x20('+this[_0x8fdf69(0x2b1)]['wuid']+_0x8fdf69(0x172)),_0x4e125d[_0x8fdf69(0x594)][_0x8fdf69(0x65d)]['_'+_0x2d7420+_0x8fdf69(0x63b)]=_0x23a35c['fileUrl'],_0x4e125d[_0x8fdf69(0x594)][_0x8fdf69(0x65d)]['_'+_0x2d7420+_0x8fdf69(0x411)]=_0x23a35c[_0x8fdf69(0x87)];let _0x641c96=_0x23a35c['mimetype'][_0x8fdf69(0x7a2)](/\/(\w+)$/),_0x2c5af5=_0x641c96?_0x641c96[0x1]:null;_0x4e125d[_0x8fdf69(0x594)][_0x8fdf69(0x65d)]['_'+_0x2d7420+_0x8fdf69(0x355)]=_0x2c5af5,this[_0x8fdf69(0xed)][_0x8fdf69(0x2c1)](this[_0x8fdf69(0x88)]+'\x20('+this[_0x8fdf69(0x2b1)][_0x8fdf69(0x3f4)]+_0x8fdf69(0x157)+_0x2d7420+'\x27.');}catch(_0x254ec6){this['logger']['error'](this[_0x8fdf69(0x88)]+'\x20('+this[_0x8fdf69(0x2b1)][_0x8fdf69(0x3f4)]+_0x8fdf69(0x4f9)+_0x254ec6['message']);}let _0x379131=_0x4e125d[_0x8fdf69(0x594)][_0x8fdf69(0x500)][_0x8fdf69(0xd1)]||_0x4e125d[_0x8fdf69(0x594)]['lastReceivedMessage'][_0x8fdf69(0x3eb)]||_0x4e125d[_0x8fdf69(0x594)]['lastReceivedMessage'][_0x8fdf69(0x249)];try{_0x4e125d[_0x8fdf69(0x594)][_0x8fdf69(0x65d)]||(_0x4e125d[_0x8fdf69(0x594)]['realVariables']={});let _0x2b85c0=_0x4e125d[_0x8fdf69(0x594)]['realVariables'][_0x2d7420];_0x4e125d[_0x8fdf69(0x594)][_0x8fdf69(0x65d)][_0x2d7420]=_0x379131;let _0x37cc9a={'variable':_0x2d7420,'oldValue':_0x2b85c0,'newValue':_0x379131};this[_0x8fdf69(0x169)](_0x4e125d,_0x5bcdb9,_0x37cc9a),this[_0x8fdf69(0xed)][_0x8fdf69(0x2c1)](this[_0x8fdf69(0x88)]+'\x20('+this[_0x8fdf69(0x2b1)][_0x8fdf69(0x3f4)]+_0x8fdf69(0x647));}catch(_0x29873a){let _0x2ed186={'error':!0x0,'errorLog':_0x29873a['toString']()};return this[_0x8fdf69(0x169)](_0x4e125d,_0x5bcdb9,_0x2ed186),this[_0x8fdf69(0xed)]['error'](this['instanceName']+'\x20('+this[_0x8fdf69(0x2b1)][_0x8fdf69(0x3f4)]+_0x8fdf69(0x163)+(_0x29873a instanceof Error?_0x29873a[_0x8fdf69(0x64f)]:JSON[_0x8fdf69(0x5cc)](_0x29873a,null,0x2))),null;}}async[a0_0x46df1a(0x2cb)](_0x27f4fc,_0x339152){const _0x37a156=a0_0x46df1a;if(this[_0x37a156(0xed)][_0x37a156(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0x37a156(0x3f4)]+_0x37a156(0x72e)),!_0x27f4fc||!_0x339152)return this[_0x37a156(0xed)][_0x37a156(0x2fb)](this[_0x37a156(0x88)]+'\x20('+this[_0x37a156(0x2b1)][_0x37a156(0x3f4)]+_0x37a156(0x3da)),null;let _0x4209a0=Date[_0x37a156(0x72)](),_0x35e918=parseInt(_0x339152['stopMinutes'],0xa);if(isNaN(_0x35e918))return this['logger'][_0x37a156(0x2fb)](this[_0x37a156(0x88)]+'\x20('+this[_0x37a156(0x2b1)]['wuid']+'):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número'),null;let _0x1e0874={'newStoppedUntil':_0x4209a0+_0x35e918*0x3c*0x3e8};return await this['updateConversation'](_0x27f4fc,_0x339152,_0x1e0874,!0x0),null;}async[a0_0x46df1a(0x3f2)](_0x1d49d6,_0x2e03ff){const _0x4f6c15=a0_0x46df1a;try{switch(_0x2e03ff[_0x4f6c15(0x2c2)]['command']){case _0x4f6c15(0x730):await this[_0x4f6c15(0x44f)](_0x1d49d6,_0x2e03ff);break;case _0x4f6c15(0x5b9):await this[_0x4f6c15(0xdc)](_0x1d49d6,_0x2e03ff);break;case _0x4f6c15(0x4de):await this[_0x4f6c15(0xd3)](_0x1d49d6,_0x2e03ff);break;case _0x4f6c15(0x474):await this[_0x4f6c15(0x347)](_0x1d49d6,_0x2e03ff);break;case _0x4f6c15(0x564):await this['uazapiSendContact'](_0x1d49d6,_0x2e03ff);break;case'sendPoll':await this[_0x4f6c15(0x69b)](_0x1d49d6,_0x2e03ff);break;case _0x4f6c15(0x4b0):await this[_0x4f6c15(0x69b)](_0x1d49d6,_0x2e03ff);break;case _0x4f6c15(0x223):await this[_0x4f6c15(0x57d)](_0x1d49d6,_0x2e03ff);break;default:this[_0x4f6c15(0xed)][_0x4f6c15(0x2fb)](this['instanceName']+'\x20('+this[_0x4f6c15(0x2b1)][_0x4f6c15(0x3f4)]+_0x4f6c15(0x790)+_0x2e03ff['uazapi']['command']);}}catch(_0x2cfd04){this[_0x4f6c15(0xed)][_0x4f6c15(0x2fb)](this[_0x4f6c15(0x88)]+'\x20('+this[_0x4f6c15(0x2b1)]['wuid']+_0x4f6c15(0x45e)+(_0x2cfd04 instanceof Error?_0x2cfd04[_0x4f6c15(0x64f)]:JSON[_0x4f6c15(0x5cc)](_0x2cfd04,null,0x2)));}}async[a0_0x46df1a(0x169)](_0x32207f,_0x534fac,_0x4d1140,_0x4a229e=!0x1,_0x57d7b6=!0x1){const _0x222aa3=a0_0x46df1a;_0x32207f['chatLog']['blockLogs']||(_0x32207f[_0x222aa3(0x594)]['blockLogs']=[]);let _0x2399e6=(_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x370)]?.[_0x222aa3(0x5e9)]??0x0)+0x1,_0xf05bbc=_0x32207f['chatLog'][_0x222aa3(0x370)]['filter'](_0x342b3a=>String(_0x342b3a[_0x222aa3(0x78a)])===String(_0x534fac[_0x222aa3(0x778)]))['length']+0x1,_0x2a43f8=_0x4d1140?.[_0x222aa3(0x2de)]??Date[_0x222aa3(0x72)](),_0x55518c=_0x4d1140?.[_0x222aa3(0x2fb)]?_0x4d1140[_0x222aa3(0x377)]??_0x4d1140[_0x222aa3(0x2fb)][_0x222aa3(0x49e)]():void 0x0,_0x384f1a={'onTime':_0x2a43f8,'blockId':_0x534fac[_0x222aa3(0x778)],'order':_0x2399e6,'activatedCount':_0xf05bbc,'error':_0x4d1140?.[_0x222aa3(0x2fb)]??!0x1,'messageId':_0x4d1140?.[_0x222aa3(0xc2)],'apiResponse':_0x4d1140?.['apiResponse'],'apiResponseString':_0x4d1140?.['apiResponse']?JSON['stringify'](_0x4d1140?.[_0x222aa3(0xcf)]):void 0x0,'variable':_0x4d1140?.['variable'],'oldValue':_0x4d1140?.[_0x222aa3(0x5dd)],'newValue':_0x4d1140?.['newValue'],'newStoppedUntil':_0x4d1140?.[_0x222aa3(0x3a5)],'moreLogs':_0x4d1140?.['moreLogs'],'errorLog':_0x55518c};if(_0x4d1140[_0x222aa3(0x2d2)]&&_0x4d1140['moreLogs'][_0x222aa3(0x5e9)]>0x0){let _0x5b517=_0x4d1140[_0x222aa3(0x2d2)][_0x222aa3(0x3f6)](_0x352e22=>this[_0x222aa3(0x4f0)](_0x352e22,_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x65d)]));_0x384f1a['moreLogs']=_0x5b517;}if(_0x32207f[_0x222aa3(0x594)]['realVariables']||(_0x32207f[_0x222aa3(0x594)]['realVariables']={}),_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x65d)][_0x222aa3(0x408)]=String(_0xf05bbc),_0x32207f[_0x222aa3(0x594)]['realVariables'][_0x222aa3(0x556)]=String(_0x4d1140[_0x222aa3(0x2fb)]??!0x1),_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x370)][_0x222aa3(0x45f)](_0x384f1a),_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x65d)]['telefone']&&_0x32207f[_0x222aa3(0x594)]['realVariables'][_0x222aa3(0x77)]!==_0x32207f[_0x222aa3(0x75b)]){let _0x4a9fe1=(await this[_0x222aa3(0x210)]({'numbers':[_0x32207f['chatLog']['realVariables'][_0x222aa3(0x77)]]}))[0x0]['jid'];_0x32207f['chatLog']['realVariables']['telefone']=_0x4a9fe1,_0x32207f[_0x222aa3(0x75b)]=_0x4a9fe1;try{let _0x595c4e={'_id':{'$ne':_0x32207f['_id']},'remoteJid':_0x4a9fe1,'status':_0x222aa3(0x7b)},_0x4e514d={'status':_0x222aa3(0x375)};await this[_0x222aa3(0x91)][_0x222aa3(0x3e7)][_0x222aa3(0x4b4)](_0x595c4e,_0x4e514d,this[_0x222aa3(0x2b1)][_0x222aa3(0x3f4)]),this['logger'][_0x222aa3(0x2c1)](this[_0x222aa3(0x88)]+'\x20('+this[_0x222aa3(0x2b1)][_0x222aa3(0x3f4)]+_0x222aa3(0x1b3));}catch(_0x4e60f8){this['logger'][_0x222aa3(0x2fb)](this[_0x222aa3(0x88)]+'\x20('+this['instance'][_0x222aa3(0x3f4)]+_0x222aa3(0x17b)+_0x4e60f8['message']);}try{let _0x5d1a13=_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x65d)],_0x40fa3c=await this[_0x222aa3(0x43a)](_0x4a9fe1),_0x433492={..._0x5d1a13,..._0x40fa3c,'_remoteJid':_0x4a9fe1};_0x32207f[_0x222aa3(0x594)]['realVariables']=_0x433492;}catch(_0x52482d){this['logger'][_0x222aa3(0x2fb)](this[_0x222aa3(0x88)]+'\x20('+this[_0x222aa3(0x2b1)][_0x222aa3(0x3f4)]+_0x222aa3(0xeb)+_0x52482d[_0x222aa3(0x64f)]);}}_0x32207f['chatLog']['lastBlockId']=_0x534fac[_0x222aa3(0x778)][_0x222aa3(0x49e)](),_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x94)]&&(_0x32207f['chatLog'][_0x222aa3(0x94)]=_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x94)]),_0x32207f['chatLog'][_0x222aa3(0x500)]&&(_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x500)]=_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x500)]),_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x3d3)]&&(_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x3d3)]=_0x32207f[_0x222aa3(0x594)][_0x222aa3(0x3d3)]),_0x57d7b6&&(_0x32207f['status']=_0x222aa3(0x375)),_0x4a229e?this['saveConversationToDatabase'](_0x32207f):this[_0x222aa3(0x18f)](_0x32207f,_0x534fac);}[a0_0x46df1a(0x4f0)](_0x534310,_0x212b12){const _0x56469f=a0_0x46df1a;return _0x534310[_0x56469f(0x420)](/\{\{([^}]+)\}\}/g,(_0x2edd3a,_0x19fbda)=>_0x212b12[_0x19fbda]?'{{'+_0x19fbda+_0x56469f(0x4f4)+_0x212b12[_0x19fbda]+'\x22':'{{'+_0x19fbda+_0x56469f(0x205));}async[a0_0x46df1a(0x56b)](_0x215569){const _0x5ca69c=a0_0x46df1a;try{let _0x51d850=Object[_0x5ca69c(0x10b)](_0x215569[_0x5ca69c(0x594)][_0x5ca69c(0x65d)])['map'](([_0x2c70b3,_0x357c81])=>({'name':_0x2c70b3,'value':_0x357c81})),_0x26b4a7={'status':_0x215569['status'],'remoteJid':_0x215569[_0x5ca69c(0x75b)],'blocks':_0x215569[_0x5ca69c(0x25a)],'waitingMenu_id':_0x215569['waitingMenu_id'],'waitingMenu_text':_0x215569[_0x5ca69c(0x33f)],'waitingMenu_replyOptions':_0x215569[_0x5ca69c(0x71e)],'chatLog':{'lastBlockId':_0x215569[_0x5ca69c(0x594)][_0x5ca69c(0x1a5)],'lastSendMessage':_0x215569[_0x5ca69c(0x594)]['lastSendMessage'],'lastReceivedMessage':_0x215569[_0x5ca69c(0x594)][_0x5ca69c(0x500)],'lastCondition':_0x215569['chatLog'][_0x5ca69c(0x3d3)],'chatVariables':_0x51d850,'realVariables':_0x215569[_0x5ca69c(0x594)][_0x5ca69c(0x65d)],'blockLogs':_0x215569[_0x5ca69c(0x594)][_0x5ca69c(0x370)]}},_0x1c624e=await this[_0x5ca69c(0x91)]['flowConversation']['updateOne'](_0x215569[_0x5ca69c(0x778)],_0x26b4a7,this[_0x5ca69c(0x2b1)][_0x5ca69c(0x3f4)]);if(_0x1c624e){this[_0x5ca69c(0xed)][_0x5ca69c(0x2c1)](this[_0x5ca69c(0x88)]+'\x20('+this[_0x5ca69c(0x2b1)][_0x5ca69c(0x3f4)]+_0x5ca69c(0x536)+_0x1c624e['_id']);try{let _0x25a60f=[_0x5ca69c(0x10d),'nomecompleto','email',_0x5ca69c(0x23d),_0x5ca69c(0x16f),'notas','responsavelid',_0x5ca69c(0x366),_0x5ca69c(0x39b),_0x5ca69c(0x3e3)];if(!this[_0x5ca69c(0x6a0)]&&(await this['getAutomateSystem'](),!this[_0x5ca69c(0x6a0)]))throw new Error(_0x5ca69c(0x150));let _0x29da05=this['AutomateSystem']?.['customFields'][_0x5ca69c(0x3f6)](_0x16cebb=>_0x16cebb[_0x5ca69c(0x11d)]),_0x1551e5={};Object[_0x5ca69c(0x10b)](_0x215569[_0x5ca69c(0x594)][_0x5ca69c(0x65d)])[_0x5ca69c(0x14b)](([_0xefb87e,_0x2f3135])=>{const _0x4f7a5c=_0x5ca69c;_0x25a60f[_0x4f7a5c(0x3f1)](_0xefb87e)&&(_0xefb87e===_0x4f7a5c(0x366)&&typeof _0x2f3135==_0x4f7a5c(0x691)?_0x1551e5[_0xefb87e]=_0x2f3135[_0x4f7a5c(0x1ed)](',')[_0x4f7a5c(0x3f6)](_0x3f92fa=>_0x3f92fa[_0x4f7a5c(0x7a1)]())['filter'](_0x122211=>_0x122211!==''):_0xefb87e===_0x4f7a5c(0x39b)&&typeof _0x2f3135==_0x4f7a5c(0x691)?_0x1551e5[_0xefb87e]=_0x2f3135[_0x4f7a5c(0x1ed)](',')['map'](_0x1f3165=>_0x1f3165[_0x4f7a5c(0x7a1)]())['filter'](_0xe75225=>_0xe75225!==''):_0x1551e5[_0xefb87e]=_0x2f3135);});let _0x3858d8=_0x215569[_0x5ca69c(0x594)]['blockLogs'][_0x215569[_0x5ca69c(0x594)][_0x5ca69c(0x370)][_0x5ca69c(0x5e9)]-0x1];if(_0x3858d8){let _0x1e5b01=_0x3858d8[_0x5ca69c(0x3a5)];_0x1e5b01!==void 0x0&&(_0x1551e5[_0x5ca69c(0x528)]=_0x1e5b01[_0x5ca69c(0x49e)]());}let _0x20fa67=_0x51d850[_0x5ca69c(0x57a)](_0x3c464f=>_0x29da05[_0x5ca69c(0x3f1)](_0x3c464f[_0x5ca69c(0x11d)]));this[_0x5ca69c(0xed)][_0x5ca69c(0x2c1)](this[_0x5ca69c(0x88)]+'\x20('+this['instance'][_0x5ca69c(0x3f4)]+_0x5ca69c(0xdb)),this[_0x5ca69c(0xed)][_0x5ca69c(0x2c1)](_0x1551e5),this[_0x5ca69c(0xed)][_0x5ca69c(0x2c1)](this[_0x5ca69c(0x88)]+'\x20('+this[_0x5ca69c(0x2b1)][_0x5ca69c(0x3f4)]+'):\x20customFieldVariables'),this['logger'][_0x5ca69c(0x2c1)](_0x20fa67);let _0x1e032b=_0x20fa67[_0x5ca69c(0x3f6)](_0x4da0c2=>{const _0x356ddf=_0x5ca69c;let _0x341603=this[_0x356ddf(0x6a0)]?.[_0x356ddf(0x300)][_0x356ddf(0x336)](_0x5c303d=>_0x5c303d[_0x356ddf(0x11d)]===_0x4da0c2[_0x356ddf(0x11d)]);if(!_0x341603)throw new Error('Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20'+_0x4da0c2[_0x356ddf(0x11d)]);return{'_id':_0x341603[_0x356ddf(0x778)],'value':_0x4da0c2['value']};});this[_0x5ca69c(0xed)][_0x5ca69c(0x2c1)](this[_0x5ca69c(0x88)]+'\x20('+this[_0x5ca69c(0x2b1)][_0x5ca69c(0x3f4)]+_0x5ca69c(0x442)),this[_0x5ca69c(0xed)][_0x5ca69c(0x2c1)](_0x1e032b),await this[_0x5ca69c(0x1a4)](_0x215569[_0x5ca69c(0x75b)],_0x1551e5,_0x1e032b);}catch(_0x4fa55b){this[_0x5ca69c(0xed)][_0x5ca69c(0x2fb)](this[_0x5ca69c(0x88)]+'\x20('+this[_0x5ca69c(0x2b1)][_0x5ca69c(0x3f4)]+_0x5ca69c(0x77d)+(_0x4fa55b instanceof Error?_0x4fa55b['message']:JSON['stringify'](_0x4fa55b,null,0x2)));}}else this[_0x5ca69c(0xed)][_0x5ca69c(0x2fb)](this['instanceName']+'\x20('+this[_0x5ca69c(0x2b1)][_0x5ca69c(0x3f4)]+_0x5ca69c(0x20d));}catch(_0x2199b5){this[_0x5ca69c(0xed)][_0x5ca69c(0x2fb)](this[_0x5ca69c(0x88)]+'\x20('+this[_0x5ca69c(0x2b1)][_0x5ca69c(0x3f4)]+_0x5ca69c(0x3e9)+(_0x2199b5 instanceof Error?_0x2199b5[_0x5ca69c(0x64f)]:JSON[_0x5ca69c(0x5cc)](_0x2199b5,null,0x2)));}}async[a0_0x46df1a(0x1a4)](_0x150a8b,_0x137f8a,_0x4f87ae){const _0x3853fb=a0_0x46df1a;try{let _0x3f8c14={'leadInfo.leadnome':_0x137f8a[_0x3853fb(0x10d)],'leadInfo.nomecompleto':_0x137f8a[_0x3853fb(0x289)],'leadInfo.email':_0x137f8a['email'],'leadInfo.cpf':_0x137f8a['cpf'],'leadInfo.status':_0x137f8a[_0x3853fb(0x16f)],'leadInfo.notas':_0x137f8a['notas'],'leadInfo.responsavelid':_0x137f8a[_0x3853fb(0x684)],'leadInfo.tags':_0x137f8a['tags'],'leadInfo.etiquetas':_0x137f8a['etiquetas'],'leadInfo.customFields':_0x4f87ae,'leadInfo.atendimentoAberto':_0x137f8a[_0x3853fb(0x3e3)]},_0x2f3295=await this[_0x3853fb(0x91)][_0x3853fb(0x3d9)][_0x3853fb(0x404)]({'where':{'_id':_0x150a8b}},this[_0x3853fb(0x2b1)][_0x3853fb(0x3f4)]);if(!_0x2f3295)return _0x3853fb(0x13e);let _0x439391=new Set(_0x2f3295[_0x3853fb(0x4df)][_0x3853fb(0x39b)]||[]),_0xff230=new Set(_0x137f8a[_0x3853fb(0x39b)]||[]),_0xee7098=await this['repository']['label'][_0x3853fb(0x336)]({'where':{}},this['instance'][_0x3853fb(0x3f4)]),_0x2ac59b=new Set(_0xee7098[_0x3853fb(0x3f6)](_0x4aa571=>_0x4aa571['_id'])),_0x576a10=[..._0xff230]['filter'](_0x47805b=>!_0x439391[_0x3853fb(0x485)](_0x47805b)&&_0x2ac59b[_0x3853fb(0x485)](_0x47805b)),_0x4d21fd=[..._0x439391]['filter'](_0x132388=>!_0xff230[_0x3853fb(0x485)](_0x132388));for(let _0x4050dc of _0x576a10)await this[_0x3853fb(0x329)](_0x4050dc,_0x2f3295[_0x3853fb(0x778)]),_0x439391['add'](_0x4050dc);for(let _0x597f04 of _0x4d21fd)await this['RemoveChatLabel'](_0x597f04,_0x2f3295[_0x3853fb(0x778)]),_0x439391[_0x3853fb(0x22c)](_0x597f04);if(_0x3853fb(0x528)in _0x137f8a){let _0x445a4b=_0x137f8a[_0x3853fb(0x528)];_0x3f8c14[_0x3853fb(0x4a0)]=_0x445a4b?Number(_0x445a4b):null;}if('atendimentoAberto'in _0x137f8a){let _0xf75ded=_0x137f8a[_0x3853fb(0x3e3)]['toLowerCase']();_0x3f8c14['leadInfo.atendimentoAberto']=_0xf75ded===_0x3853fb(0x5d2)||_0xf75ded==='1'||_0xf75ded===_0x3853fb(0x214)||_0xf75ded==='sim';}let _0x3bf1fb=await this[_0x3853fb(0x91)][_0x3853fb(0x3d9)][_0x3853fb(0x4b3)]({'where':{'_id':_0x150a8b}},_0x3f8c14,this[_0x3853fb(0x2b1)][_0x3853fb(0x3f4)]);_0x3bf1fb?(this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x3853fb(0x2b1)][_0x3853fb(0x3f4)]+_0x3853fb(0xf2)+_0x3bf1fb[_0x3853fb(0x778)]),j(this[_0x3853fb(0x88)],_0x3853fb(0x758),{'chat':_0x3bf1fb})):this[_0x3853fb(0xed)][_0x3853fb(0x2fb)](this[_0x3853fb(0x88)]+'\x20('+this[_0x3853fb(0x2b1)]['wuid']+'):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD');}catch(_0x4d04dd){this[_0x3853fb(0xed)]['error'](this[_0x3853fb(0x88)]+'\x20('+this[_0x3853fb(0x2b1)][_0x3853fb(0x3f4)]+'):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20'+(_0x4d04dd instanceof Error?_0x4d04dd[_0x3853fb(0x64f)]:JSON['stringify'](_0x4d04dd,null,0x2)));}}async[a0_0x46df1a(0x674)](_0x40691c,_0x199371){const _0x3bcf07=a0_0x46df1a;this[_0x3bcf07(0xed)][_0x3bcf07(0x2c1)](this[_0x3bcf07(0x88)]+'\x20('+this['instance'][_0x3bcf07(0x3f4)]+'):\x20atualização\x20chat:\x20'+_0x199371);try{let _0x4eff30=await this[_0x3bcf07(0x91)][_0x3bcf07(0x3d9)][_0x3bcf07(0x4b3)]({'where':{'_id':_0x40691c[_0x3bcf07(0x75b)]}},{'leadInfo.desativadoFluxoAte':_0x199371},this[_0x3bcf07(0x2b1)][_0x3bcf07(0x3f4)]);this[_0x3bcf07(0xed)][_0x3bcf07(0x2c1)](this[_0x3bcf07(0x88)]+'\x20('+this['instance'][_0x3bcf07(0x3f4)]+_0x3bcf07(0x537)+_0x40691c['_id']),this[_0x3bcf07(0xed)][_0x3bcf07(0x2c1)](this[_0x3bcf07(0x88)]+'\x20('+this[_0x3bcf07(0x2b1)][_0x3bcf07(0x3f4)]+_0x3bcf07(0x109)+JSON[_0x3bcf07(0x5cc)](_0x4eff30,null,0x2)),_0x4eff30&&j(this[_0x3bcf07(0x88)],_0x3bcf07(0x758),{'chat':_0x4eff30});}catch(_0x50ba74){this[_0x3bcf07(0xed)][_0x3bcf07(0x2fb)](this[_0x3bcf07(0x88)]+'\x20('+this[_0x3bcf07(0x2b1)]['wuid']+_0x3bcf07(0x643)+(_0x50ba74 instanceof Error?_0x50ba74['message']:JSON[_0x3bcf07(0x5cc)](_0x50ba74,null,0x2)));}}async['findFlow'](_0xff7be6){const _0x485c1c=a0_0x46df1a;try{this['logger'][_0x485c1c(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0x485c1c(0x3f4)]+_0x485c1c(0xb9));let _0x14685b=_0xff7be6[_0x485c1c(0x420)](/\D/g,''),_0x34a70b=this[_0x485c1c(0x6a0)][_0x485c1c(0x6a2)]['find'](_0x10e999=>_0x10e999['testingWith']===_0x14685b);if(_0x34a70b||(this['logger'][_0x485c1c(0x2c1)](this['instanceName']+'\x20('+this[_0x485c1c(0x2b1)][_0x485c1c(0x3f4)]+_0x485c1c(0x3ef)),_0x34a70b=this[_0x485c1c(0x6a0)][_0x485c1c(0x6a2)][_0x485c1c(0x336)](_0x4a31b3=>_0x4a31b3[_0x485c1c(0x2fa)]===!0x0)),!_0x34a70b)return this[_0x485c1c(0xed)][_0x485c1c(0x2c1)](this[_0x485c1c(0x88)]+'\x20('+this[_0x485c1c(0x2b1)]['wuid']+_0x485c1c(0x5fd)),null;let _0x391e56=await this[_0x485c1c(0x91)][_0x485c1c(0xa2)]['findOne']({'where':{'_id':_0x34a70b[_0x485c1c(0x778)]}});if(!_0x391e56||!_0x391e56['whoCanUse']?.[_0x485c1c(0x3f1)](this[_0x485c1c(0x2b1)][_0x485c1c(0x3f4)]))throw this['logger'][_0x485c1c(0x2fb)](this['instanceName']+'\x20('+this['instance'][_0x485c1c(0x3f4)]+_0x485c1c(0xa1)+_0x391e56[_0x485c1c(0x778)]+_0x485c1c(0x252)),new m(_0x485c1c(0x5b2)+_0x391e56[_0x485c1c(0x778)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');return _0x391e56;}catch(_0x191272){return this['logger'][_0x485c1c(0x2fb)](this[_0x485c1c(0x88)]+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20'+(_0x191272 instanceof Error?_0x191272[_0x485c1c(0x64f)]:JSON['stringify'](_0x191272,null,0x2))),null;}}async[a0_0x46df1a(0x4d1)](_0x31aa7c,_0x16ddd4){const _0x3b58df=a0_0x46df1a;try{let _0x5b07fa=!!_0x16ddd4[_0x3b58df(0x249)],_0x35fe82=_0x16ddd4[_0x3b58df(0x78f)],_0x3e660d=null;if(this[_0x3b58df(0xed)][_0x3b58df(0x2c1)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20isVote:\x20'+_0x5b07fa+_0x3b58df(0x5f6)+_0x35fe82),_0x5b07fa){this[_0x3b58df(0xed)][_0x3b58df(0x2c1)](this[_0x3b58df(0x88)]+'\x20('+this[_0x3b58df(0x2b1)][_0x3b58df(0x3f4)]+'):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto');let _0x17feb9={'where':{'remoteJid':_0x31aa7c,'waitingMenu_id':_0x35fe82}};if(_0x3e660d=await this[_0x3b58df(0x91)][_0x3b58df(0x3e7)]['findOne'](_0x17feb9,this[_0x3b58df(0x2b1)][_0x3b58df(0x3f4)]),!_0x3e660d)return this[_0x3b58df(0xed)][_0x3b58df(0x2c1)](this[_0x3b58df(0x88)]+'\x20('+this['instance'][_0x3b58df(0x3f4)]+_0x3b58df(0xf3)),null;let _0x3b0306=Date[_0x3b58df(0x72)](),_0x66abc0=_0x3e660d?.[_0x3b58df(0x15a)]||0x0,_0x5445e1=_0x3b0306-_0x66abc0*0x3c*0x3e8;if(_0x3e660d[_0x3b58df(0x533)]<_0x5445e1){this['logger'][_0x3b58df(0x2c1)](this[_0x3b58df(0x88)]+'\x20('+this[_0x3b58df(0x2b1)][_0x3b58df(0x3f4)]+'):\x20Conversa\x20está\x20expirada\x20-\x20voto');let _0x5001d9={'number':_0x3e660d[_0x3b58df(0x75b)],'options':{'delay':0x0},'textMessage':{'text':_0x3e660d[_0x3b58df(0x572)]}};await this[_0x3b58df(0xc5)](_0x5001d9);let _0x1e752b={'status':'closed','waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this['repository'][_0x3b58df(0x3e7)]['updateOne'](_0x3e660d[_0x3b58df(0x778)],_0x1e752b,this[_0x3b58df(0x2b1)][_0x3b58df(0x3f4)]),null;}return _0x3e660d[_0x3b58df(0x533)]=Date[_0x3b58df(0x72)](),_0x3e660d['chatLog'][_0x3b58df(0x500)]=_0x16ddd4,_0x3e660d;}else{this['logger'][_0x3b58df(0x2c1)](this['instanceName']+'\x20('+this[_0x3b58df(0x2b1)][_0x3b58df(0x3f4)]+_0x3b58df(0x28e)+this[_0x3b58df(0x2b1)]['wuid']+_0x3b58df(0x62f)),this[_0x3b58df(0xed)][_0x3b58df(0x2c1)](this['instanceName']+'\x20('+this[_0x3b58df(0x2b1)][_0x3b58df(0x3f4)]+_0x3b58df(0x6fb));let _0x1f0d8d={'where':{'remoteJid':_0x31aa7c,'status':'open'}};if(_0x3e660d=await this[_0x3b58df(0x91)][_0x3b58df(0x3e7)][_0x3b58df(0x404)](_0x1f0d8d,this[_0x3b58df(0x2b1)][_0x3b58df(0x3f4)]),!_0x3e660d){let _0x35f4df=await this[_0x3b58df(0x36f)](_0x31aa7c);if(_0x35f4df&&(_0x3e660d=await this[_0x3b58df(0x715)](_0x35f4df,_0x16ddd4[_0x3b58df(0x754)],_0x16ddd4)),!_0x3e660d)return null;}let _0x240a14=Date[_0x3b58df(0x72)](),_0x448906=_0x3e660d?.[_0x3b58df(0x15a)]||0x0,_0x384983=_0x240a14-_0x448906*0x3c*0x3e8;if(this[_0x3b58df(0xed)][_0x3b58df(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0x3b58df(0x3f4)]+_0x3b58df(0x135)+_0x240a14+_0x3b58df(0x4d2)+_0x448906+_0x3b58df(0x434)+_0x384983),this[_0x3b58df(0xed)]['verbose'](this[_0x3b58df(0x88)]+'\x20('+this[_0x3b58df(0x2b1)]['wuid']+_0x3b58df(0x304)),this[_0x3b58df(0xed)][_0x3b58df(0x2c1)](this[_0x3b58df(0x88)]+'\x20('+this['instance'][_0x3b58df(0x3f4)]+_0x3b58df(0x359)+_0x3e660d[_0x3b58df(0x533)]),this[_0x3b58df(0xed)]['verbose'](this[_0x3b58df(0x88)]+'\x20('+this[_0x3b58df(0x2b1)][_0x3b58df(0x3f4)]+_0x3b58df(0x2c9)+_0x384983),_0x3e660d['lastInteraction']<_0x384983){this[_0x3b58df(0xed)]['verbose'](this[_0x3b58df(0x88)]+'\x20('+this['instance']['wuid']+_0x3b58df(0x21e));let _0x3bd9a3=await this[_0x3b58df(0x36f)](_0x31aa7c);if(_0x3bd9a3===null)return null;_0x3e660d&&await this['repository']['flowConversation'][_0x3b58df(0x4b3)](_0x3e660d[_0x3b58df(0x778)],{'status':_0x3b58df(0x375)},this[_0x3b58df(0x2b1)]['wuid']),_0x3e660d=await this[_0x3b58df(0x715)](_0x3bd9a3,_0x16ddd4[_0x3b58df(0x754)],_0x16ddd4);}return _0x3e660d['lastInteraction']=_0x240a14,_0x3e660d['chatLog'][_0x3b58df(0x500)]=_0x16ddd4,_0x3e660d;}}catch(_0x4dc00a){return this[_0x3b58df(0xed)][_0x3b58df(0x2fb)](this[_0x3b58df(0x88)]+'\x20('+this[_0x3b58df(0x2b1)][_0x3b58df(0x3f4)]+_0x3b58df(0x423)+(_0x4dc00a instanceof Error?_0x4dc00a[_0x3b58df(0x64f)]:JSON[_0x3b58df(0x5cc)](_0x4dc00a,null,0x2))),null;}}async['createNewConversation'](_0x4c0d58,_0x15bf59,_0x240bdf){const _0x41f5c6=a0_0x46df1a;this[_0x41f5c6(0xed)]['verbose'](this[_0x41f5c6(0x88)]+'\x20('+this[_0x41f5c6(0x2b1)][_0x41f5c6(0x3f4)]+_0x41f5c6(0x5ec));try{let _0x570766=require(_0x41f5c6(0x779))['ObjectId'],_0x2057d6=Date[_0x41f5c6(0x72)](),_0x4b08cc=_0x41f5c6(0x1d4),_0x89692a=_0x15bf59[_0x41f5c6(0x525)]?null:_0x240bdf,_0x7c2da3=_0x15bf59[_0x41f5c6(0x525)]?_0x240bdf:null,_0x2ee147=_0x15bf59[_0x41f5c6(0x75b)],_0x564222=this[_0x41f5c6(0x6a0)][_0x41f5c6(0x6a2)]['find'](_0x317b49=>_0x317b49['_id']===_0x4c0d58[_0x41f5c6(0x778)]?.['toString']()),_0x4e63c0=_0x564222?.['minutesToClose']??_0x4c0d58[_0x41f5c6(0x15a)]??0x0,_0x56b04c=_0x564222?.[_0x41f5c6(0x3a0)]??_0x4c0d58[_0x41f5c6(0x3a0)]??!0x1;await this[_0x41f5c6(0x431)](_0x2ee147);let _0x431e65={'flowId':_0x4c0d58[_0x41f5c6(0x778)],..._0x4c0d58,'chatLog':null},_0x9666e3=await this[_0x41f5c6(0x5e3)](_0x431e65['variables']),_0x58a5f1=await this['getVariablesChat'](_0x2ee147),_0x3259a9={..._0x9666e3,..._0x58a5f1,'_remoteJid':_0x2ee147},_0x4ab415={'lastReceivedMessage':_0x89692a,'lastSendMessage':_0x7c2da3,'lastBlockId':_0x4b08cc,'lastCondition':!0x0,'realVariables':_0x3259a9};_0x431e65[_0x41f5c6(0x594)]=_0x4ab415,delete _0x431e65['_id'],_0x431e65[_0x41f5c6(0x778)]=new _0x570766(),_0x431e65[_0x41f5c6(0x533)]=_0x2057d6,_0x431e65['status']=_0x41f5c6(0x7b),_0x431e65[_0x41f5c6(0x75b)]=_0x2ee147,_0x431e65[_0x41f5c6(0x15a)]=_0x4e63c0,_0x431e65[_0x41f5c6(0x3a0)]=_0x56b04c;let _0x387ff4=await this[_0x41f5c6(0x91)][_0x41f5c6(0x3e7)][_0x41f5c6(0x4b3)](_0x431e65[_0x41f5c6(0x778)],_0x431e65,this[_0x41f5c6(0x2b1)][_0x41f5c6(0x3f4)]);return this['logger']['verbose'](this[_0x41f5c6(0x88)]+'\x20('+this[_0x41f5c6(0x2b1)][_0x41f5c6(0x3f4)]+_0x41f5c6(0x660)),_0x387ff4?_0x431e65:null;}catch(_0xad104b){return this[_0x41f5c6(0xed)][_0x41f5c6(0x2fb)](this[_0x41f5c6(0x88)]+'\x20('+this[_0x41f5c6(0x2b1)][_0x41f5c6(0x3f4)]+_0x41f5c6(0x2e2)+(_0xad104b instanceof Error?_0xad104b[_0x41f5c6(0x64f)]:JSON[_0x41f5c6(0x5cc)](_0xad104b,null,0x2))),_0xad104b;}}async[a0_0x46df1a(0x44f)](_0x4d82f2,_0x336583){const _0x30011b=a0_0x46df1a;let _0xe23079=_0x4d82f2[_0x30011b(0x75b)];_0x336583['uazapi'][_0x30011b(0x75b)]&&_0x336583[_0x30011b(0x2c2)][_0x30011b(0x75b)][_0x30011b(0x7a1)]()!==''&&(_0xe23079=_0x336583[_0x30011b(0x2c2)][_0x30011b(0x75b)]['trim']()),this[_0x30011b(0xed)][_0x30011b(0x2c1)](this[_0x30011b(0x88)]+'\x20('+this[_0x30011b(0x2b1)]['wuid']+_0x30011b(0x372));let _0x2629ba={'number':_0xe23079,'options':{'delay':_0x336583['uazapi']['delay'],'linkPreview':_0x336583[_0x30011b(0x2c2)][_0x30011b(0x3ad)]},'textMessage':{'text':_0x336583[_0x30011b(0x2c2)]['text']}};try{let _0x5a7a9d=await this['textMessage'](_0x2629ba);if(_0x5a7a9d){let _0x41fb5f={'_id':_0x5a7a9d[_0x30011b(0x754)]['id'],'_fromMe':_0x5a7a9d[_0x30011b(0x754)][_0x30011b(0x525)],'_remoteJid':_0x5a7a9d['key'][_0x30011b(0x75b)]},_0x5965c6=(0x0,w[_0x30011b(0x738)])(_0x5a7a9d[_0x30011b(0x64f)]),_0x53b883=(0x0,w['getContentType'])(_0x5965c6);_0x4d82f2[_0x30011b(0x594)]['lastBlockId']=_0x336583[_0x30011b(0x778)][_0x30011b(0x49e)]();let {message_normalized:_0x2da251}=this[_0x30011b(0x124)](_0x5965c6,_0x53b883,null);_0x4d82f2[_0x30011b(0x594)][_0x30011b(0x94)]=await _0x2da251;let _0x3c2a3f={'messageId':_0x5a7a9d[_0x30011b(0x754)]['id']},_0x13e1de=_0x4d82f2[_0x30011b(0x594)]['realVariables'];Object[_0x30011b(0x508)](_0x13e1de,_0x41fb5f),_0x4d82f2['chatLog'][_0x30011b(0x65d)]=_0x13e1de,this[_0x30011b(0x169)](_0x4d82f2,_0x336583,_0x3c2a3f);}else{let _0x4f88a3={'error':!0x0};this[_0x30011b(0x169)](_0x4d82f2,_0x336583,_0x4f88a3),this[_0x30011b(0xed)][_0x30011b(0x2fb)](this[_0x30011b(0x88)]+'\x20('+this['instance'][_0x30011b(0x3f4)]+_0x30011b(0x557));}}catch(_0x327adb){let _0x2a3c65={'error':!0x0,'errorLog':_0x327adb['toString']()};this['updateConversation'](_0x4d82f2,_0x336583,_0x2a3c65),this[_0x30011b(0xed)]['error'](this[_0x30011b(0x88)]+'\x20('+this[_0x30011b(0x2b1)]['wuid']+_0x30011b(0x39a)+(_0x327adb instanceof Error?_0x327adb[_0x30011b(0x64f)]:JSON['stringify'](_0x327adb,null,0x2)));}}async[a0_0x46df1a(0xdc)](_0x191a3f,_0x59d006){const _0x429e3e=a0_0x46df1a;let _0x17392c=_0x191a3f[_0x429e3e(0x75b)];_0x59d006[_0x429e3e(0x2c2)][_0x429e3e(0x75b)]&&_0x59d006[_0x429e3e(0x2c2)]['remoteJid'][_0x429e3e(0x7a1)]()!==''&&(_0x17392c=_0x59d006[_0x429e3e(0x2c2)][_0x429e3e(0x75b)][_0x429e3e(0x7a1)]()),this[_0x429e3e(0xed)][_0x429e3e(0x2c1)](this[_0x429e3e(0x88)]+'\x20('+this[_0x429e3e(0x2b1)][_0x429e3e(0x3f4)]+'):\x20Enviando\x20mídia');let _0x22fa26={'number':_0x17392c,'options':{'delay':_0x59d006[_0x429e3e(0x2c2)][_0x429e3e(0x298)],'linkPreview':_0x59d006[_0x429e3e(0x2c2)]['linkPreview']},'mediaMessage':{'mediatype':_0x59d006['uazapi'][_0x429e3e(0x68c)],'caption':_0x59d006[_0x429e3e(0x2c2)]['caption'],'media':_0x59d006[_0x429e3e(0x2c2)][_0x429e3e(0x425)],'fileName':_0x59d006[_0x429e3e(0x2c2)][_0x429e3e(0x1e4)]}};try{let _0x215fb0=await this[_0x429e3e(0x669)](_0x22fa26);if(_0x215fb0){let _0x1b8ed0={'_id':_0x215fb0[_0x429e3e(0x754)]['id'],'_fromMe':_0x215fb0['key']['fromMe'],'_remoteJid':_0x215fb0[_0x429e3e(0x754)][_0x429e3e(0x75b)]},_0x58fd0d=(0x0,w[_0x429e3e(0x738)])(_0x215fb0[_0x429e3e(0x64f)]),_0x194597=(0x0,w[_0x429e3e(0x725)])(_0x58fd0d);_0x191a3f[_0x429e3e(0x594)][_0x429e3e(0x1a5)]=_0x59d006[_0x429e3e(0x778)][_0x429e3e(0x49e)]();let {message_normalized:_0x326d6d}=this[_0x429e3e(0x124)](_0x58fd0d,_0x194597,null);_0x191a3f[_0x429e3e(0x594)]['lastSendMessage']=await _0x326d6d;let _0x10ffeb={'messageId':_0x215fb0[_0x429e3e(0x754)]['id']},_0x390f45=_0x191a3f[_0x429e3e(0x594)][_0x429e3e(0x65d)];Object[_0x429e3e(0x508)](_0x390f45,_0x1b8ed0),_0x191a3f[_0x429e3e(0x594)][_0x429e3e(0x65d)]=_0x390f45,this[_0x429e3e(0x169)](_0x191a3f,_0x59d006,_0x10ffeb);}else{let _0xfd8f0b={'error':!0x0};this[_0x429e3e(0x169)](_0x191a3f,_0x59d006,_0xfd8f0b),this[_0x429e3e(0xed)]['error'](this['instanceName']+'\x20('+this[_0x429e3e(0x2b1)][_0x429e3e(0x3f4)]+_0x429e3e(0x184));}}catch(_0x1fc814){let _0x195ae5={'error':!0x0,'errorLog':_0x1fc814['toString']()};this[_0x429e3e(0x169)](_0x191a3f,_0x59d006,_0x195ae5),this[_0x429e3e(0xed)][_0x429e3e(0x2fb)](this[_0x429e3e(0x88)]+'\x20('+this[_0x429e3e(0x2b1)]['wuid']+_0x429e3e(0x47d)+(_0x1fc814 instanceof Error?_0x1fc814[_0x429e3e(0x64f)]:JSON['stringify'](_0x1fc814,null,0x2)));}}async['uazapiSendLocation'](_0x104096,_0x1ac53d){const _0xb34f9c=a0_0x46df1a;let _0x2d432d=_0x104096['remoteJid'];_0x1ac53d[_0xb34f9c(0x2c2)][_0xb34f9c(0x75b)]&&_0x1ac53d['uazapi'][_0xb34f9c(0x75b)][_0xb34f9c(0x7a1)]()!==''&&(_0x2d432d=_0x1ac53d[_0xb34f9c(0x2c2)][_0xb34f9c(0x75b)]['trim']()),this['logger'][_0xb34f9c(0x2c1)](this[_0xb34f9c(0x88)]+'\x20('+this[_0xb34f9c(0x2b1)][_0xb34f9c(0x3f4)]+'):\x20Enviando\x20localização');let _0x291023={'number':_0x2d432d,'options':{'delay':_0x1ac53d[_0xb34f9c(0x2c2)]['delay']},'locationMessage':{'name':_0x1ac53d[_0xb34f9c(0x2c2)]['name'],'address':_0x1ac53d[_0xb34f9c(0x2c2)][_0xb34f9c(0x771)],'latitude':_0x1ac53d[_0xb34f9c(0x2c2)]['latitude'],'longitude':_0x1ac53d[_0xb34f9c(0x2c2)][_0xb34f9c(0x34d)]}};try{let _0x14e32a=await this[_0xb34f9c(0x14d)](_0x291023);if(_0x14e32a){let _0x4e41c2={'_id':_0x14e32a['key']['id'],'_fromMe':_0x14e32a[_0xb34f9c(0x754)][_0xb34f9c(0x525)],'_remoteJid':_0x14e32a['key'][_0xb34f9c(0x75b)]},_0x101cc4=(0x0,w[_0xb34f9c(0x738)])(_0x14e32a[_0xb34f9c(0x64f)]),_0x59f5e0=(0x0,w[_0xb34f9c(0x725)])(_0x101cc4);_0x104096[_0xb34f9c(0x594)][_0xb34f9c(0x1a5)]=_0x1ac53d[_0xb34f9c(0x778)][_0xb34f9c(0x49e)]();let {message_normalized:_0x5521fa}=this[_0xb34f9c(0x124)](_0x101cc4,_0x59f5e0,null);_0x104096[_0xb34f9c(0x594)][_0xb34f9c(0x94)]=await _0x5521fa;let _0x3b789e={'messageId':_0x14e32a[_0xb34f9c(0x754)]['id']},_0x3459b1=_0x104096[_0xb34f9c(0x594)][_0xb34f9c(0x65d)];Object[_0xb34f9c(0x508)](_0x3459b1,_0x4e41c2),_0x104096['chatLog'][_0xb34f9c(0x65d)]=_0x3459b1,this[_0xb34f9c(0x169)](_0x104096,_0x1ac53d,_0x3b789e);}else{let _0x3a6e01={'error':!0x0};this['updateConversation'](_0x104096,_0x1ac53d,_0x3a6e01),this[_0xb34f9c(0xed)]['error'](this[_0xb34f9c(0x88)]+'\x20('+this[_0xb34f9c(0x2b1)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.');}}catch(_0x56a6b4){let _0x380f9a={'error':!0x0,'errorLog':_0x56a6b4[_0xb34f9c(0x49e)]()};this[_0xb34f9c(0x169)](_0x104096,_0x1ac53d,_0x380f9a),this[_0xb34f9c(0xed)][_0xb34f9c(0x2fb)](this[_0xb34f9c(0x88)]+'\x20('+this[_0xb34f9c(0x2b1)][_0xb34f9c(0x3f4)]+_0xb34f9c(0x268)+(_0x56a6b4 instanceof Error?_0x56a6b4[_0xb34f9c(0x64f)]:JSON[_0xb34f9c(0x5cc)](_0x56a6b4,null,0x2)));}}async[a0_0x46df1a(0x347)](_0xa9e92f,_0x539a21){const _0x32ec81=a0_0x46df1a;let _0x337b9f=_0xa9e92f[_0x32ec81(0x75b)];_0x539a21[_0x32ec81(0x2c2)][_0x32ec81(0x75b)]&&_0x539a21[_0x32ec81(0x2c2)][_0x32ec81(0x75b)]['trim']()!==''&&(_0x337b9f=_0x539a21[_0x32ec81(0x2c2)][_0x32ec81(0x75b)][_0x32ec81(0x7a1)]()),this[_0x32ec81(0xed)][_0x32ec81(0x2c1)](this[_0x32ec81(0x88)]+'\x20('+this[_0x32ec81(0x2b1)]['wuid']+_0x32ec81(0x6e5));let _0x4fa4d9={'number':_0x337b9f,'options':{'delay':_0x539a21['uazapi'][_0x32ec81(0x298)]},'audioMessage':{'audio':_0x539a21[_0x32ec81(0x2c2)]['audio']}};try{let _0x1de866=await this[_0x32ec81(0x5cb)](_0x4fa4d9);if(_0x1de866){let _0x8742f={'_id':_0x1de866[_0x32ec81(0x754)]['id'],'_fromMe':_0x1de866[_0x32ec81(0x754)][_0x32ec81(0x525)],'_remoteJid':_0x1de866[_0x32ec81(0x754)]['remoteJid']},_0x2cac4e=(0x0,w['normalizeMessageContent'])(_0x1de866[_0x32ec81(0x64f)]),_0x3b9bed=(0x0,w[_0x32ec81(0x725)])(_0x2cac4e);_0xa9e92f['chatLog']['lastBlockId']=_0x539a21['_id'][_0x32ec81(0x49e)]();let {message_normalized:_0x268c1b}=this[_0x32ec81(0x124)](_0x2cac4e,_0x3b9bed,null);_0xa9e92f[_0x32ec81(0x594)]['lastSendMessage']=await _0x268c1b;let _0x174a7e={'messageId':_0x1de866[_0x32ec81(0x754)]['id']},_0x21d1f4=_0xa9e92f[_0x32ec81(0x594)][_0x32ec81(0x65d)];Object[_0x32ec81(0x508)](_0x21d1f4,_0x8742f),_0xa9e92f[_0x32ec81(0x594)][_0x32ec81(0x65d)]=_0x21d1f4,this[_0x32ec81(0x169)](_0xa9e92f,_0x539a21,_0x174a7e);}else{let _0x7060c5={'error':!0x0};this[_0x32ec81(0x169)](_0xa9e92f,_0x539a21,_0x7060c5),this['logger'][_0x32ec81(0x2fb)](this[_0x32ec81(0x88)]+'\x20('+this['instance'][_0x32ec81(0x3f4)]+_0x32ec81(0x511));}}catch(_0x266352){let _0x4a25d9={'error':!0x0,'errorLog':_0x266352[_0x32ec81(0x49e)]()};this['updateConversation'](_0xa9e92f,_0x539a21,_0x4a25d9),this['logger'][_0x32ec81(0x2fb)](this[_0x32ec81(0x88)]+'\x20('+this['instance'][_0x32ec81(0x3f4)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20'+(_0x266352 instanceof Error?_0x266352[_0x32ec81(0x64f)]:JSON['stringify'](_0x266352,null,0x2)));}}async['uazapiSendContact'](_0x303225,_0x291b34){const _0x63a61=a0_0x46df1a;let _0x1c538e=_0x303225[_0x63a61(0x75b)];_0x291b34[_0x63a61(0x2c2)][_0x63a61(0x75b)]&&_0x291b34[_0x63a61(0x2c2)]['remoteJid'][_0x63a61(0x7a1)]()!==''&&(_0x1c538e=_0x291b34['uazapi'][_0x63a61(0x75b)][_0x63a61(0x7a1)]()),this[_0x63a61(0xed)]['verbose'](this[_0x63a61(0x88)]+'\x20('+this[_0x63a61(0x2b1)]['wuid']+'):\x20Enviando\x20contato');let _0x114350={'number':_0x1c538e,'options':{'delay':_0x291b34[_0x63a61(0x2c2)]['delay']},'contactMessage':[{'fullName':_0x291b34[_0x63a61(0x2c2)]['fullName'],'phoneNumber':_0x291b34[_0x63a61(0x2c2)][_0x63a61(0x1e6)]}]};try{let _0x34c453=await this['contactMessage'](_0x114350);if(_0x34c453){let _0x5ebfd8={'_id':_0x34c453[_0x63a61(0x754)]['id'],'_fromMe':_0x34c453[_0x63a61(0x754)][_0x63a61(0x525)],'_remoteJid':_0x34c453['key']['remoteJid']},_0x208297=(0x0,w[_0x63a61(0x738)])(_0x34c453[_0x63a61(0x64f)]),_0xea4da6=(0x0,w['getContentType'])(_0x208297);_0x303225['chatLog'][_0x63a61(0x1a5)]=_0x291b34['_id'][_0x63a61(0x49e)]();let {message_normalized:_0x254d13}=this['normalizeMessage'](_0x208297,_0xea4da6,null);_0x303225[_0x63a61(0x594)][_0x63a61(0x94)]=await _0x254d13;let _0x4e4d4e={'messageId':_0x34c453['key']['id']},_0x102436=_0x303225[_0x63a61(0x594)][_0x63a61(0x65d)];Object[_0x63a61(0x508)](_0x102436,_0x5ebfd8),_0x303225[_0x63a61(0x594)][_0x63a61(0x65d)]=_0x102436,this['updateConversation'](_0x303225,_0x291b34,_0x4e4d4e);}else{let _0x353d27={'error':!0x0};this[_0x63a61(0x169)](_0x303225,_0x291b34,_0x353d27),this['logger']['error'](this[_0x63a61(0x88)]+'\x20('+this[_0x63a61(0x2b1)][_0x63a61(0x3f4)]+_0x63a61(0x3ff));}}catch(_0x1d4606){let _0x1a7e64={'error':!0x0,'errorLog':_0x1d4606[_0x63a61(0x49e)]()};this[_0x63a61(0x169)](_0x303225,_0x291b34,_0x1a7e64),this['logger'][_0x63a61(0x2fb)](this['instanceName']+'\x20('+this['instance'][_0x63a61(0x3f4)]+_0x63a61(0x2df)+(_0x1d4606 instanceof Error?_0x1d4606[_0x63a61(0x64f)]:JSON[_0x63a61(0x5cc)](_0x1d4606,null,0x2)));}}[a0_0x46df1a(0xe0)](_0x35438f,_0x2a79c1){const _0x51de88=a0_0x46df1a;for(let _0x18a52c of _0x35438f)_0x18a52c[_0x51de88(0x621)]&&(_0x18a52c[_0x51de88(0x621)]=this['replaceVariables'](_0x18a52c[_0x51de88(0x621)],_0x2a79c1)),_0x18a52c['optionDescription']&&(_0x18a52c['optionDescription']=this[_0x51de88(0x36c)](_0x18a52c[_0x51de88(0x3fb)],_0x2a79c1));}async[a0_0x46df1a(0x69b)](_0x2b6973,_0x3f080c){const _0x4ebe5a=a0_0x46df1a;let _0x5758ca=_0x2b6973['remoteJid'];_0x3f080c[_0x4ebe5a(0x2c2)][_0x4ebe5a(0x75b)]&&_0x3f080c[_0x4ebe5a(0x2c2)]['remoteJid']['trim']()!==''&&(_0x5758ca=_0x3f080c[_0x4ebe5a(0x2c2)][_0x4ebe5a(0x75b)][_0x4ebe5a(0x7a1)]()),this['logger'][_0x4ebe5a(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0x4ebe5a(0x3f4)]+_0x4ebe5a(0x15f));let _0x226b24=_0x2b6973['replyOptions'][_0x4ebe5a(0x57a)](_0x452820=>_0x452820[_0x4ebe5a(0x78a)]===_0x3f080c[_0x4ebe5a(0x778)])[_0x4ebe5a(0x170)]((_0x3e2bc9,_0x531531)=>_0x3e2bc9[_0x4ebe5a(0x3d5)]-_0x531531['order']);this[_0x4ebe5a(0xe0)](_0x226b24,_0x2b6973[_0x4ebe5a(0x594)][_0x4ebe5a(0x65d)]);let _0x16f563=_0x226b24[_0x4ebe5a(0x3f6)](_0x55537e=>_0x55537e[_0x4ebe5a(0x621)]),_0x2b8b26={'number':_0x5758ca,'menuMessage':{'type':_0x3f080c['uazapi']['menuType']||_0x4ebe5a(0x3bb),'text':_0x3f080c[_0x4ebe5a(0x2c2)][_0x4ebe5a(0xd1)]||_0x3f080c[_0x4ebe5a(0x2c2)][_0x4ebe5a(0x11d)],'footerText':_0x3f080c['uazapi'][_0x4ebe5a(0x204)],'buttonText':_0x3f080c[_0x4ebe5a(0x2c2)][_0x4ebe5a(0x2a7)],'selectableCount':0x1,'choices':_0x16f563},'options':{'delay':_0x3f080c[_0x4ebe5a(0x2c2)]['delay']}};try{let _0x521594=await this[_0x4ebe5a(0x3c1)](_0x2b8b26);if(_0x521594){let _0x38444d={'_id':_0x521594[_0x4ebe5a(0x754)]['id'],'_fromMe':_0x521594[_0x4ebe5a(0x754)]['fromMe'],'_remoteJid':_0x521594[_0x4ebe5a(0x754)][_0x4ebe5a(0x75b)]};_0x3f080c[_0x4ebe5a(0x2c2)][_0x4ebe5a(0x49c)]===!0x0&&(_0x2b6973['status']=_0x4ebe5a(0x35b),this['logger'][_0x4ebe5a(0x2c1)](this['instanceName']+'\x20('+this[_0x4ebe5a(0x2b1)]['wuid']+_0x4ebe5a(0x364)+_0x2b6973[_0x4ebe5a(0x16f)])),this['logger'][_0x4ebe5a(0x2c1)](this['instanceName']+'\x20('+this[_0x4ebe5a(0x2b1)][_0x4ebe5a(0x3f4)]+_0x4ebe5a(0x2dc)+(_0x3f080c[_0x4ebe5a(0x2c2)][_0x4ebe5a(0x11d)]||_0x3f080c['uazapi'][_0x4ebe5a(0xd1)])),_0x2b6973[_0x4ebe5a(0x3d7)]=_0x521594[_0x4ebe5a(0x754)]['id'],_0x2b6973[_0x4ebe5a(0x33f)]=_0x3f080c['uazapi'][_0x4ebe5a(0x11d)]||_0x3f080c[_0x4ebe5a(0x2c2)][_0x4ebe5a(0xd1)],_0x2b6973['waitingMenu_replyOptions']=_0x226b24,_0x3f080c[_0x4ebe5a(0x2c2)]['menuExpiredMessage']&&(_0x2b6973['waitingMenu_ExpiredMessage']=_0x3f080c[_0x4ebe5a(0x2c2)][_0x4ebe5a(0x3ab)]),this[_0x4ebe5a(0xed)]['verbose'](this[_0x4ebe5a(0x88)]+'\x20('+this[_0x4ebe5a(0x2b1)][_0x4ebe5a(0x3f4)]+_0x4ebe5a(0x51e)+_0x2b6973[_0x4ebe5a(0x33f)]);let _0x1bda83=(0x0,w[_0x4ebe5a(0x738)])(_0x521594[_0x4ebe5a(0x64f)]),_0x35971c=(0x0,w['getContentType'])(_0x1bda83);_0x2b6973[_0x4ebe5a(0x594)][_0x4ebe5a(0x1a5)]=_0x3f080c[_0x4ebe5a(0x778)]['toString']();let {message_normalized:_0x2ce0c0}=this[_0x4ebe5a(0x124)](_0x1bda83,_0x35971c,null);_0x2b6973[_0x4ebe5a(0x594)]['lastSendMessage']=await _0x2ce0c0;let _0x2302af={'messageId':_0x521594[_0x4ebe5a(0x754)]['id']},_0x10bb8f=_0x2b6973['chatLog'][_0x4ebe5a(0x65d)];Object[_0x4ebe5a(0x508)](_0x10bb8f,_0x38444d),_0x2b6973['chatLog'][_0x4ebe5a(0x65d)]=_0x10bb8f,this[_0x4ebe5a(0x169)](_0x2b6973,_0x3f080c,_0x2302af);}else{let _0x21f38a={'error':!0x0};this[_0x4ebe5a(0x169)](_0x2b6973,_0x3f080c,_0x21f38a),this[_0x4ebe5a(0xed)]['error'](this['instanceName']+'\x20('+this[_0x4ebe5a(0x2b1)][_0x4ebe5a(0x3f4)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.');}}catch(_0x38cf5d){let _0x1f337d={'error':!0x0,'errorLog':_0x38cf5d instanceof Error?_0x38cf5d[_0x4ebe5a(0x64f)]:JSON[_0x4ebe5a(0x5cc)](_0x38cf5d,null,0x2)};this[_0x4ebe5a(0x169)](_0x2b6973,_0x3f080c,_0x1f337d),this[_0x4ebe5a(0xed)]['error'](this[_0x4ebe5a(0x88)]+'\x20('+this[_0x4ebe5a(0x2b1)][_0x4ebe5a(0x3f4)]+_0x4ebe5a(0x416)+(_0x38cf5d instanceof Error?_0x38cf5d['message']:JSON[_0x4ebe5a(0x5cc)](_0x38cf5d,null,0x2)));}}async[a0_0x46df1a(0x57d)](_0x235bcd,_0x2a2b4b){const _0x58aa49=a0_0x46df1a;this[_0x58aa49(0xed)]['verbose'](this[_0x58aa49(0x88)]+'\x20('+this[_0x58aa49(0x2b1)][_0x58aa49(0x3f4)]+_0x58aa49(0x17f));let _0x559a2a=_0x235bcd[_0x58aa49(0x594)]['blockLogs']['find'](_0x232254=>_0x232254[_0x58aa49(0x78a)][_0x58aa49(0x49e)]()===_0x2a2b4b[_0x58aa49(0x2c2)]['blockId']['toString']()),_0x29c2b4={'id':_0x559a2a[_0x58aa49(0xc2)],'remoteJid':_0x559a2a['remoteJid'],'fromMe':_0x559a2a[_0x58aa49(0x525)]};try{let _0x5bd905=await this[_0x58aa49(0x223)](_0x29c2b4);if(_0x5bd905){let _0xd64e5a=(0x0,w[_0x58aa49(0x738)])(_0x5bd905['message']),_0x22dae4=(0x0,w['getContentType'])(_0xd64e5a);_0x235bcd['chatLog']['lastBlockId']=_0x2a2b4b['_id'][_0x58aa49(0x49e)]();let {message_normalized:_0x53e517}=this[_0x58aa49(0x124)](_0xd64e5a,_0x22dae4,null);_0x235bcd[_0x58aa49(0x594)]['lastSendMessage']=await _0x53e517;let _0x59a8cb={};this['updateConversation'](_0x235bcd,_0x2a2b4b,_0x59a8cb);}else{let _0x4464bd={'error':!0x0};this[_0x58aa49(0x169)](_0x235bcd,_0x2a2b4b,_0x4464bd),this['logger'][_0x58aa49(0x2fb)](this['instanceName']+'\x20('+this[_0x58aa49(0x2b1)][_0x58aa49(0x3f4)]+_0x58aa49(0x2d5));}}catch(_0x6fe51e){let _0x293328={'error':!0x0,'errorLog':_0x6fe51e instanceof Error?_0x6fe51e[_0x58aa49(0x64f)]:JSON[_0x58aa49(0x5cc)](_0x6fe51e,null,0x2)};this[_0x58aa49(0x169)](_0x235bcd,_0x2a2b4b,_0x293328),this[_0x58aa49(0xed)]['error'](this['instanceName']+'\x20('+this[_0x58aa49(0x2b1)][_0x58aa49(0x3f4)]+'):\x20Falha\x20ao\x20deletar\x20mensagem:\x20'+(_0x6fe51e instanceof Error?_0x6fe51e[_0x58aa49(0x64f)]:JSON[_0x58aa49(0x5cc)](_0x6fe51e,null,0x2)));}}async[a0_0x46df1a(0x5e8)](_0x315ede,_0x2d5d42){const _0x3c185e=a0_0x46df1a;if(_0x315ede[_0x3c185e(0x11d)]||(_0x315ede[_0x3c185e(0x11d)]=(0x0,Y['v4'])()),_0x2d5d42!==Ti&&_0x315ede?.[_0x3c185e(0xf5)])throw new m('Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global');if('_id'in _0x315ede&&_0x3c185e(0x3dd)in _0x315ede)return this[_0x3c185e(0x334)](_0x315ede['owner'],_0x315ede['_id']);this[_0x3c185e(0xed)][_0x3c185e(0x2c1)](this[_0x3c185e(0x88)]+'\x20('+this[_0x3c185e(0x2b1)][_0x3c185e(0x3f4)]+_0x3c185e(0x356));let _0x2a206a=this[_0x3c185e(0x6c8)](_0x315ede[_0x3c185e(0x11d)]),_0x18be46=new me[(_0x3c185e(0x282))][(_0x3c185e(0x1d7))](),_0x16da21={'_id':_0x18be46,'default':!0x0,'title':_0x3c185e(0x6b5),'x':0x0,'y':0x0},_0x13b4a8={'_id':new me[(_0x3c185e(0x282))][(_0x3c185e(0x1d7))](),'order':0x1,'groupId':_0x18be46['toString'](),'type':_0x3c185e(0x1d4)},_0xb61997=this[_0x3c185e(0x2b1)][_0x3c185e(0x3f4)],_0x5b7d7a={'_id':(0x0,Y['v4'])(),'owner':_0xb61997,'name':_0x2a206a,'whoCanEdit':[_0xb61997],'whoCanUse':[_0xb61997],'groups':[_0x16da21],'blocks':[_0x13b4a8],..._0x315ede};try{let _0x46b351=await this['repository'][_0x3c185e(0xa2)][_0x3c185e(0x25d)](_0x5b7d7a);return await this[_0x3c185e(0x3b5)](),_0x46b351;}catch(_0x1dae9a){let _0x154418=_0x3c185e(0x5ad),_0x2d7a45=_0x1dae9a instanceof Error?_0x1dae9a[_0x3c185e(0x64f)]:typeof _0x1dae9a==_0x3c185e(0xde)?JSON['stringify'](_0x1dae9a):_0x1dae9a,_0x3214ab=_0x154418+':\x20'+_0x2d7a45;throw this[_0x3c185e(0xed)][_0x3c185e(0x2fb)](this[_0x3c185e(0x88)]+'\x20('+this[_0x3c185e(0x2b1)][_0x3c185e(0x3f4)]+'):\x20'+_0x3214ab),new m(_0x3214ab);}}async[a0_0x46df1a(0x334)](_0x209bcb,_0x26d096){const _0x5c1055=a0_0x46df1a;try{this['logger']['verbose'](this[_0x5c1055(0x88)]+'\x20('+this[_0x5c1055(0x2b1)]['wuid']+_0x5c1055(0x6b9));let _0x43f26a=await this[_0x5c1055(0x91)][_0x5c1055(0xa2)][_0x5c1055(0x404)]({'where':{'_id':_0x26d096,'owner':_0x209bcb}});if(!_0x43f26a)throw new m('Nenhum\x20fluxo\x20correspondente\x20encontrado.');if(_0x43f26a['shareFlow']===!0x1&&!_0x43f26a['globalShow'])throw new m(_0x5c1055(0x430));let _0x23298d=new Set(_0x43f26a[_0x5c1055(0x11f)]??[]);_0x23298d[_0x5c1055(0x722)](this[_0x5c1055(0x2b1)]['wuid']);let _0xb37dc1=await this[_0x5c1055(0x91)]['flow'][_0x5c1055(0x4b3)](_0x26d096,{..._0x43f26a,'whoCanUse':Array[_0x5c1055(0x13c)](_0x23298d)});return await this[_0x5c1055(0x3b5)](),_0xb37dc1;}catch(_0x2b3d8a){let _0x2e47fa='Erro\x20ao\x20criar\x20fluxo\x20compartilhado',_0x4f8935=_0x2b3d8a instanceof Error?_0x2b3d8a[_0x5c1055(0x64f)]:typeof _0x2b3d8a=='object'?JSON[_0x5c1055(0x5cc)](_0x2b3d8a):_0x2b3d8a,_0x516fc1=_0x2e47fa+':\x20'+_0x4f8935;throw this['logger'][_0x5c1055(0x2fb)](this[_0x5c1055(0x88)]+'\x20('+this[_0x5c1055(0x2b1)][_0x5c1055(0x3f4)]+_0x5c1055(0x28e)+_0x516fc1),new m(_0x516fc1);}}[a0_0x46df1a(0x6c8)](_0x4673d1){const _0x55f1bb=a0_0x46df1a;let _0x914f6a=_0x4673d1,_0x56ac8c=0x1;for(;this[_0x55f1bb(0x6a0)]['flows'][_0x55f1bb(0x6ee)](_0x2cb921=>_0x2cb921['name']===_0x914f6a);)_0x56ac8c++,_0x914f6a=_0x4673d1+'\x20('+_0x56ac8c+')';return _0x914f6a;}async['deleteFlow'](_0x448379){const _0xe4696c=a0_0x46df1a;try{if(this['logger'][_0xe4696c(0x2c1)](this[_0xe4696c(0x88)]+'\x20('+this[_0xe4696c(0x2b1)][_0xe4696c(0x3f4)]+'):\x20\x27Deletando\x20fluxo,\x20id:\x20'+_0x448379[_0xe4696c(0x778)]+_0xe4696c(0x3d0)+_0x448379[_0xe4696c(0x7b3)]),!this[_0xe4696c(0x6a0)]['flows']['find'](_0xe09be1=>_0xe09be1[_0xe4696c(0x778)]===_0x448379[_0xe4696c(0x778)]))throw this[_0xe4696c(0xed)][_0xe4696c(0x2c1)](this[_0xe4696c(0x88)]+'\x20('+this[_0xe4696c(0x2b1)][_0xe4696c(0x3f4)]+_0xe4696c(0x34f)+_0x448379['_id']+_0xe4696c(0x74a)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x48533c=await this[_0xe4696c(0x91)][_0xe4696c(0xa2)][_0xe4696c(0x404)]({'where':{'_id':_0x448379[_0xe4696c(0x778)]}});if(!_0x48533c)throw new m(_0xe4696c(0x46f));if(this[_0xe4696c(0x2b1)][_0xe4696c(0x3f4)]===_0x48533c[_0xe4696c(0x3dd)]){this[_0xe4696c(0xed)]['verbose'](this[_0xe4696c(0x88)]+'\x20('+this[_0xe4696c(0x2b1)][_0xe4696c(0x3f4)]+_0xe4696c(0x239)+_0x448379['_id']+_0xe4696c(0x42a));let _0x58398d=await this[_0xe4696c(0x91)][_0xe4696c(0xa2)]['deleteOne']({'where':{'_id':_0x448379[_0xe4696c(0x778)]}});return await this['synchronizeAndMapFlows'](),_0x58398d;}return this[_0xe4696c(0xed)][_0xe4696c(0x2c1)](this[_0xe4696c(0x88)]+'\x20('+this[_0xe4696c(0x2b1)][_0xe4696c(0x3f4)]+'):\x20Removendo\x20\x27'+this[_0xe4696c(0x2b1)][_0xe4696c(0x3f4)]+_0xe4696c(0x479)+_0x448379[_0xe4696c(0x778)]+_0xe4696c(0xb3)),_0x48533c['whoCanUse']=(_0x48533c['whoCanUse']??[])[_0xe4696c(0x57a)](_0x1c8adc=>_0x1c8adc!==this[_0xe4696c(0x2b1)][_0xe4696c(0x3f4)]),_0x48533c[_0xe4696c(0x72a)]=(_0x48533c[_0xe4696c(0x72a)]??[])[_0xe4696c(0x57a)](_0x593c60=>_0x593c60!==this[_0xe4696c(0x2b1)]['wuid']),_0x48533c[_0xe4696c(0x72a)]['length']===0x0&&_0x48533c[_0xe4696c(0x11f)][_0xe4696c(0x5e9)]>0x0&&(_0x48533c['whoCanEdit'][_0xe4696c(0x45f)](_0x48533c['whoCanUse'][0x0]),this['logger'][_0xe4696c(0x2c1)](this[_0xe4696c(0x88)]+'\x20('+this[_0xe4696c(0x2b1)][_0xe4696c(0x3f4)]+'):\x20Adicionando\x20\x27'+_0x48533c[_0xe4696c(0x11f)][0x0]+_0xe4696c(0x235)+_0x448379[_0xe4696c(0x778)]+'\x27...')),await this[_0xe4696c(0x91)][_0xe4696c(0xa2)][_0xe4696c(0x4b3)](_0x48533c[_0xe4696c(0x778)],_0x48533c),await this['synchronizeAndMapFlows'](),{'message':'Fluxo\x20\x27'+_0x448379[_0xe4696c(0x11d)]+_0xe4696c(0x22a)};}catch(_0xa47a2f){return this[_0xe4696c(0xed)][_0xe4696c(0x2fb)](this[_0xe4696c(0x88)]+'\x20('+this['instance'][_0xe4696c(0x3f4)]+_0xe4696c(0x48c)+(_0xa47a2f instanceof Error?_0xa47a2f[_0xe4696c(0x64f)]:JSON[_0xe4696c(0x5cc)](_0xa47a2f,null,0x2))),{'message':_0xe4696c(0x53c)+(_0xa47a2f instanceof Error?_0xa47a2f[_0xe4696c(0x64f)]:JSON[_0xe4696c(0x5cc)](_0xa47a2f,null,0x2))};}}async[a0_0x46df1a(0x652)](_0x1d852b){const _0x295c49=a0_0x46df1a;try{if(this[_0x295c49(0xed)][_0x295c49(0x459)](this['instanceName']+'\x20('+this[_0x295c49(0x2b1)]['wuid']+_0x295c49(0x6b4)+_0x1d852b),!this['AutomateSystem']&&(await this['getAutomateSystem'](),!this[_0x295c49(0x6a0)]))return null;let _0x388c69=await this[_0x295c49(0x91)][_0x295c49(0xa2)]['findOne']({'where':{'_id':_0x1d852b}});if(!_0x388c69)throw new m('Fluxo\x20id\x20\x27'+_0x1d852b+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.');if(!(_0x388c69[_0x295c49(0xf5)]||_0x388c69[_0x295c49(0x11f)]?.[_0x295c49(0x3f1)](this[_0x295c49(0x2b1)]['wuid'])))throw new m(_0x295c49(0x4c4)+name+'\x27');_0x388c69[_0x295c49(0xf5)]&&!_0x388c69[_0x295c49(0x11f)]?.['includes'](this['instance'][_0x295c49(0x3f4)])&&(_0x388c69['whoCanUse']=[..._0x388c69[_0x295c49(0x11f)]??[],this['instance'][_0x295c49(0x3f4)]],await this['repository'][_0x295c49(0xa2)][_0x295c49(0x4b3)](_0x388c69[_0x295c49(0x778)],_0x388c69),this['synchronizeAndMapFlows']());let _0x2a7e9b=this[_0x295c49(0x6a0)]?.[_0x295c49(0x300)][_0x295c49(0x3f6)](_0x4c7de2=>_0x4c7de2['name']),_0x821027=[_0x295c49(0x10d),_0x295c49(0x289),_0x295c49(0x614),_0x295c49(0x23d),_0x295c49(0x16f),_0x295c49(0x1d5),_0x295c49(0x684),_0x295c49(0x366),_0x295c49(0x39b),_0x295c49(0x77),_0x295c49(0x3e3)];_0x388c69['variables']=_0x388c69[_0x295c49(0x310)][_0x295c49(0x57a)](_0x2bf92c=>!(_0x2bf92c[_0x295c49(0x28d)]===_0x295c49(0x4df)||_0x2bf92c[_0x295c49(0x4df)])),_0x821027[_0x295c49(0x14b)](_0x5996eb=>{const _0x3ce472=_0x295c49;_0x388c69[_0x3ce472(0x310)][_0x3ce472(0x45f)]({'folder':'leadInfo','name':_0x5996eb,'value':'','doc':'','leadInfo':!0x0});}),_0x2a7e9b[_0x295c49(0x14b)](_0x29265d=>{const _0x2222b8=_0x295c49;let _0x15e485=_0x388c69[_0x2222b8(0x310)][_0x2222b8(0x73d)](_0x50569d=>_0x50569d[_0x2222b8(0x11d)]===_0x29265d);_0x15e485===-0x1?_0x388c69['variables']['push']({'folder':_0x2222b8(0x4df),'name':_0x29265d,'value':'','doc':'','leadInfo':!0x0}):(_0x388c69[_0x2222b8(0x310)][_0x15e485][_0x2222b8(0x28d)]=_0x2222b8(0x4df),_0x388c69['variables'][_0x15e485][_0x2222b8(0x4df)]=!0x0);}),_0x388c69[_0x295c49(0x25a)]&&_0x388c69[_0x295c49(0x25a)]['length']>0x0&&_0x388c69[_0x295c49(0x25a)]['forEach'](_0x1cb822=>{const _0x5cded7=_0x295c49;_0x1cb822['groupId']&&_0x1cb822['next_groupId']&&_0x1cb822[_0x5cded7(0xa0)]===_0x1cb822[_0x5cded7(0x4e5)]&&(_0x1cb822[_0x5cded7(0x4e5)]=null);});let _0x315bb6=await this[_0x295c49(0x91)][_0x295c49(0xa2)][_0x295c49(0x4b3)](_0x388c69[_0x295c49(0x778)],_0x388c69);if(!_0x315bb6)throw new Error(_0x295c49(0x1bf));return _0x315bb6;}catch(_0x490def){let _0x2bbfc9=_0x295c49(0x6e6),_0x2281e5=_0x490def instanceof Error?_0x490def[_0x295c49(0x64f)]:typeof _0x490def==_0x295c49(0xde)?JSON[_0x295c49(0x5cc)](_0x490def):_0x490def,_0x417497=_0x2bbfc9+':\x20'+_0x2281e5;throw this[_0x295c49(0xed)][_0x295c49(0x2fb)](this[_0x295c49(0x88)]+'\x20('+this['instance'][_0x295c49(0x3f4)]+_0x295c49(0x28e)+_0x417497),new m(_0x417497);}}async[a0_0x46df1a(0x503)](){const _0x3943e8=a0_0x46df1a;try{this[_0x3943e8(0xed)][_0x3943e8(0x2c1)](this[_0x3943e8(0x88)]+'\x20('+this[_0x3943e8(0x2b1)][_0x3943e8(0x3f4)]+'):\x20Buscando\x20todos\x20os\x20fluxos...'),await this[_0x3943e8(0x3b5)]();let _0x527b09=await this[_0x3943e8(0x91)][_0x3943e8(0xa2)]['findAll']({'where':{'globalShow':!0x0}});return[...this[_0x3943e8(0x6a0)][_0x3943e8(0x6a2)],..._0x527b09];}catch(_0x5eec88){return this[_0x3943e8(0xed)][_0x3943e8(0x2fb)](this[_0x3943e8(0x88)]+'\x20('+this[_0x3943e8(0x2b1)]['wuid']+'):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20'+(_0x5eec88 instanceof Error?_0x5eec88['message']:JSON[_0x3943e8(0x5cc)](_0x5eec88,null,0x2))),{'message':'Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20'+(_0x5eec88 instanceof Error?_0x5eec88[_0x3943e8(0x64f)]:String(_0x5eec88))};}}async[a0_0x46df1a(0x5dc)](_0x239b1a,_0x36d4b6){const _0x1ea558=a0_0x46df1a;try{this[_0x1ea558(0xed)][_0x1ea558(0x2c1)](this[_0x1ea558(0x88)]+'\x20('+this[_0x1ea558(0x2b1)][_0x1ea558(0x3f4)]+_0x1ea558(0x6ef));let _0x401b94=this[_0x1ea558(0x6a0)]['flows']['find'](_0x24b7de=>_0x24b7de[_0x1ea558(0x778)]===_0x239b1a[_0x1ea558(0x778)]);if(!_0x401b94)throw this[_0x1ea558(0xed)][_0x1ea558(0x2c1)](this[_0x1ea558(0x88)]+'\x20('+this['instance']['wuid']+_0x1ea558(0x34f)+_0x239b1a['_id']+'\x27\x20não\x20encontrado'),new m(_0x1ea558(0x793));let _0x442141=await this[_0x1ea558(0x91)][_0x1ea558(0xa2)][_0x1ea558(0x404)]({'where':{'_id':_0x239b1a[_0x1ea558(0x778)]}});if(!_0x442141||!_0x442141[_0x1ea558(0x11f)]?.[_0x1ea558(0x3f1)](this[_0x1ea558(0x2b1)][_0x1ea558(0x3f4)]))throw this[_0x1ea558(0xed)][_0x1ea558(0x2fb)](this[_0x1ea558(0x88)]+'\x20('+this[_0x1ea558(0x2b1)][_0x1ea558(0x3f4)]+_0x1ea558(0xa1)+_0x239b1a[_0x1ea558(0x778)]+_0x1ea558(0x252)),new m(_0x1ea558(0x5b2)+_0x239b1a[_0x1ea558(0x778)]+_0x1ea558(0x252));let _0x50b597=this[_0x1ea558(0x6a0)]['flows']['findIndex'](_0x18c5b5=>_0x18c5b5['_id']===_0x401b94[_0x1ea558(0x778)]);if(_0x50b597!==-0x1){let _0x46039d=this[_0x1ea558(0x6a0)][_0x1ea558(0x6a2)][_0x50b597];if(_0x46039d[_0x1ea558(0x11d)]=_0x239b1a[_0x1ea558(0x11d)]??_0x46039d['name'],_0x46039d[_0x1ea558(0x2fa)]=_0x239b1a[_0x1ea558(0x2fa)]??_0x46039d[_0x1ea558(0x2fa)],_0x46039d[_0x1ea558(0x467)]=_0x239b1a['testingWith']??_0x46039d[_0x1ea558(0x467)],_0x46039d[_0x1ea558(0x73)]=_0x239b1a[_0x1ea558(0x1fc)]??_0x46039d[_0x1ea558(0x73)],_0x46039d[_0x1ea558(0x15a)]=_0x239b1a[_0x1ea558(0x15a)]??_0x46039d['minutesToClose'],_0x46039d[_0x1ea558(0x3a0)]=_0x239b1a['readMessages']??_0x46039d[_0x1ea558(0x3a0)],_0x239b1a[_0x1ea558(0x2fa)]&&this[_0x1ea558(0x6a0)][_0x1ea558(0x6a2)][_0x1ea558(0x14b)]((_0x33d578,_0x581f95)=>{const _0x385ed3=_0x1ea558;_0x581f95!==_0x50b597&&(_0x33d578[_0x385ed3(0x2fa)]=!0x1);}),this['AutomateSystem']['flows'][_0x50b597]=_0x46039d,!await this[_0x1ea558(0x91)][_0x1ea558(0x335)][_0x1ea558(0x75)]({'flows':this[_0x1ea558(0x6a0)][_0x1ea558(0x6a2)]},this[_0x1ea558(0x2b1)][_0x1ea558(0x3f4)]))throw new m(_0x1ea558(0x376));}let _0x4d9471=[_0x1ea558(0x7b3),_0x1ea558(0x2ed),_0x1ea558(0x7ad),_0x1ea558(0x61d)];for(let _0x24e2e5 of _0x4d9471)delete _0x239b1a[_0x24e2e5];if(_0x442141['whoCanEdit']?.[_0x1ea558(0x3f1)](this[_0x1ea558(0x2b1)][_0x1ea558(0x3f4)])||(_0x239b1a={'_id':_0x239b1a[_0x1ea558(0x778)]}),_0x36d4b6!==Ti&&_0x239b1a?.[_0x1ea558(0xf5)]&&!_0x442141?.[_0x1ea558(0xf5)])throw new m(_0x1ea558(0x1de));let _0x679f4e=new Set(_0x239b1a[_0x1ea558(0x72a)]??_0x442141[_0x1ea558(0x72a)]);_0x679f4e['add'](_0x442141[_0x1ea558(0x3dd)]);let _0xd9f32d=new Set(_0x239b1a['whoCanUse']??_0x442141[_0x1ea558(0x11f)]??[]);_0x679f4e[_0x1ea558(0x14b)](_0xa80bfb=>_0xd9f32d[_0x1ea558(0x722)](_0xa80bfb)),_0xd9f32d[_0x1ea558(0x722)](_0x442141['owner']),this[_0x1ea558(0xed)][_0x1ea558(0x2c1)](this[_0x1ea558(0x88)]+'\x20('+this[_0x1ea558(0x2b1)]['wuid']+'):\x20whoCanEdit\x20before\x20validation:\x20'+Array[_0x1ea558(0x13c)](_0x679f4e)),this[_0x1ea558(0xed)]['verbose'](this['instanceName']+'\x20('+this[_0x1ea558(0x2b1)][_0x1ea558(0x3f4)]+_0x1ea558(0x293)+Array[_0x1ea558(0x13c)](_0xd9f32d));let _0x1f8a76=await this['getValidWhatsAppNumbers'](Array[_0x1ea558(0x13c)](_0xd9f32d)),_0xefee4e=Array[_0x1ea558(0x13c)](_0x679f4e)[_0x1ea558(0x57a)](_0x2453ce=>_0x1f8a76[_0x1ea558(0x3f1)](_0x2453ce)),_0x56f515=Array['from'](_0xd9f32d)['filter'](_0x5523d5=>_0x1f8a76[_0x1ea558(0x3f1)](_0x5523d5));this[_0x1ea558(0xed)][_0x1ea558(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0x1ea558(0x3f4)]+_0x1ea558(0x147)+_0xefee4e),this[_0x1ea558(0xed)][_0x1ea558(0x2c1)](this[_0x1ea558(0x88)]+'\x20('+this['instance'][_0x1ea558(0x3f4)]+_0x1ea558(0x478)+_0x56f515);let _0x4d9ca6={..._0x442141,..._0x239b1a,'whoCanEdit':_0xefee4e,'whoCanUse':_0x56f515},_0x206f97=await this['repository'][_0x1ea558(0xa2)][_0x1ea558(0x4b3)](_0x442141[_0x1ea558(0x778)],_0x4d9ca6);return await this[_0x1ea558(0x3b5)](),_0x206f97;}catch(_0x484aab){let _0x38dde3='Erro\x20ao\x20alterar\x20fluxo',_0x206ced=_0x484aab instanceof Error?_0x484aab[_0x1ea558(0x64f)]:typeof _0x484aab==_0x1ea558(0xde)?JSON[_0x1ea558(0x5cc)](_0x484aab):_0x484aab,_0x3f30e3=_0x38dde3+':\x20'+_0x206ced;throw this[_0x1ea558(0xed)][_0x1ea558(0x2fb)](this[_0x1ea558(0x88)]+'\x20('+this[_0x1ea558(0x2b1)][_0x1ea558(0x3f4)]+'):\x20'+_0x3f30e3),new m(_0x3f30e3);}}async[a0_0x46df1a(0x219)](_0x2f683a){const _0x4346bc=a0_0x46df1a;let _0x223ef7={'numbers':_0x2f683a};return(await this[_0x4346bc(0x210)](_0x223ef7))[_0x4346bc(0x57a)](_0x1657b5=>_0x1657b5[_0x4346bc(0x297)])[_0x4346bc(0x3f6)](_0x3b0b75=>_0x3b0b75[_0x4346bc(0x540)])[_0x4346bc(0x3f6)](_0x17d2b3=>this['extractPhoneNumber'](_0x17d2b3));}[a0_0x46df1a(0x78)](_0x39ed71){const _0x237f47=a0_0x46df1a;let _0x5a4997=_0x39ed71[_0x237f47(0x7a2)](/\d+/);return _0x5a4997?_0x5a4997[0x0]:'';}async[a0_0x46df1a(0x194)](_0x135c26){const _0x4d3558=a0_0x46df1a;try{if(this[_0x4d3558(0xed)][_0x4d3558(0x2c1)](this[_0x4d3558(0x88)]+'\x20('+this[_0x4d3558(0x2b1)][_0x4d3558(0x3f4)]+_0x4d3558(0x766)),!this[_0x4d3558(0x6a0)][_0x4d3558(0x6a2)]['find'](_0x3a3578=>_0x3a3578['_id']===_0x135c26['_id']))throw this['logger'][_0x4d3558(0x2c1)](this['instanceName']+'\x20('+this[_0x4d3558(0x2b1)][_0x4d3558(0x3f4)]+_0x4d3558(0x34f)+_0x135c26[_0x4d3558(0x778)]+'\x27\x20não\x20encontrado'),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x20e83a=await this[_0x4d3558(0x91)][_0x4d3558(0xa2)][_0x4d3558(0x404)]({'where':{'_id':_0x135c26[_0x4d3558(0x778)]}});if(!_0x20e83a||!_0x20e83a['whoCanUse']?.[_0x4d3558(0x3f1)](this[_0x4d3558(0x2b1)][_0x4d3558(0x3f4)]))throw this['logger']['error'](this[_0x4d3558(0x88)]+'\x20('+this['instance']['wuid']+_0x4d3558(0xa1)+_0x135c26[_0x4d3558(0x778)]+_0x4d3558(0x252)),new m('Flow\x20\x27'+_0x135c26['_id']+_0x4d3558(0x252));if(!_0x20e83a[_0x4d3558(0x72a)]?.['includes'](this[_0x4d3558(0x2b1)][_0x4d3558(0x3f4)]))throw new m(_0x4d3558(0x518));let {block:_0x102ea1}=_0x135c26;_0x102ea1?.['copy']?this[_0x4d3558(0x7b5)](_0x20e83a,_0x135c26):_0x102ea1?.['delete']?this['deleteBlock'](_0x20e83a,_0x135c26):_0x102ea1[_0x4d3558(0x778)]?await this[_0x4d3558(0x7a6)](_0x20e83a,_0x135c26):this['addBlock'](_0x20e83a,_0x135c26);let _0x18d937=await this[_0x4d3558(0x91)][_0x4d3558(0xa2)][_0x4d3558(0x4b3)](_0x20e83a['_id'],_0x20e83a);if(!_0x18d937)throw new Error(_0x4d3558(0x1bf));return _0x18d937;}catch(_0x1bd2a2){this['throwAndLogError']('Erro\x20ao\x20editar\x20o\x20bloco:\x20'+_0x1bd2a2[_0x4d3558(0x64f)]);}}async[a0_0x46df1a(0x7b5)](_0x1bad18,_0x3de278){const _0x32309b=a0_0x46df1a;let _0x3fe98b=_0x3de278[_0x32309b(0x4cd)][_0x32309b(0x778)],_0x4002ea=_0x1bad18[_0x32309b(0x25a)][_0x32309b(0x336)](_0x2cb65c=>_0x2cb65c[_0x32309b(0x778)]['toString']()===_0x3fe98b);if(!_0x4002ea){this[_0x32309b(0xed)][_0x32309b(0x2fb)](this[_0x32309b(0x88)]+'\x20('+this[_0x32309b(0x2b1)][_0x32309b(0x3f4)]+_0x32309b(0x1bc)+_0x3fe98b+_0x32309b(0x780));return;}this['logger'][_0x32309b(0x2c1)](this[_0x32309b(0x88)]+'\x20('+this[_0x32309b(0x2b1)][_0x32309b(0x3f4)]+_0x32309b(0x1a3)+JSON[_0x32309b(0x5cc)](_0x4002ea));let _0x23be31=JSON['parse'](JSON[_0x32309b(0x5cc)](_0x4002ea));_0x23be31[_0x32309b(0x778)]=new me['default'][(_0x32309b(0x282))][(_0x32309b(0x1d7))](),this[_0x32309b(0xed)][_0x32309b(0x2c1)](this[_0x32309b(0x88)]+'\x20('+this['instance']['wuid']+_0x32309b(0x51c)+JSON[_0x32309b(0x5cc)](_0x23be31)),_0x1bad18[_0x32309b(0x25a)][_0x32309b(0x45f)](_0x23be31),this[_0x32309b(0x1dd)](_0x1bad18[_0x32309b(0x25a)],_0x23be31[_0x32309b(0xa0)]);}['throwAndLogError'](_0x1f3a25){const _0x183c96=a0_0x46df1a;throw this[_0x183c96(0xed)][_0x183c96(0x2fb)](this['instanceName']+'\x20('+this[_0x183c96(0x2b1)]['wuid']+'):\x20'+_0x1f3a25),new m(_0x1f3a25);}[a0_0x46df1a(0x6c9)](_0x440416,_0x31c5da){const _0x32744b=a0_0x46df1a;let {block:_0x1b7a89}=_0x31c5da;if(_0x1b7a89['type']===_0x32744b(0x1d4)){this['throwAndLogError'](_0x32744b(0x21a));return;}if(!_0x1b7a89[_0x32744b(0x778)]){this['throwAndLogError'](_0x32744b(0x4fd));return;}let _0xada636=_0x440416[_0x32744b(0x25a)]['find'](_0x3fc111=>_0x3fc111['_id'][_0x32744b(0x49e)]()===_0x31c5da['block']['_id']['toString']());if(!_0xada636){this[_0x32744b(0x519)]('Bloco\x20com\x20ID\x20'+_0x1b7a89[_0x32744b(0x778)]+_0x32744b(0x4e9));return;}_0x440416[_0x32744b(0x25a)]=_0x440416[_0x32744b(0x25a)]['filter'](_0x320747=>_0x320747[_0x32744b(0x778)][_0x32744b(0x49e)]()!==_0x31c5da[_0x32744b(0x4cd)][_0x32744b(0x778)][_0x32744b(0x49e)]()),_0x440416[_0x32744b(0x31c)]=_0x440416[_0x32744b(0x31c)]['filter'](_0x420f2b=>_0x420f2b[_0x32744b(0x78a)]!==_0x1b7a89[_0x32744b(0x778)][_0x32744b(0x49e)]()),_0x440416['varedits']=_0x440416[_0x32744b(0x5d0)][_0x32744b(0x57a)](_0x3c7459=>_0x3c7459[_0x32744b(0x78a)]!==_0x1b7a89[_0x32744b(0x778)][_0x32744b(0x49e)]()),_0x440416[_0x32744b(0x185)]=_0x440416['replyOptions'][_0x32744b(0x57a)](_0x17bcd6=>_0x17bcd6['blockId']!==_0x1b7a89[_0x32744b(0x778)][_0x32744b(0x49e)]()),this[_0x32744b(0x1dd)](_0x440416[_0x32744b(0x25a)],_0xada636[_0x32744b(0xa0)]);}async[a0_0x46df1a(0x7a6)](_0x36fe04,_0x230b3c){const _0x3d6937=a0_0x46df1a;let _0x1731cf=_0x36fe04[_0x3d6937(0x25a)][_0x3d6937(0x73d)](_0x42c1c3=>_0x42c1c3[_0x3d6937(0x778)]['toString']()===_0x230b3c[_0x3d6937(0x4cd)][_0x3d6937(0x778)][_0x3d6937(0x49e)]());if(this['logger'][_0x3d6937(0x2c1)](this['instanceName']+'\x20('+this[_0x3d6937(0x2b1)]['wuid']+_0x3d6937(0x410)+_0x1731cf),_0x1731cf===-0x1){this[_0x3d6937(0xed)][_0x3d6937(0x2c1)](_0x3d6937(0x607)+_0x230b3c['block'][_0x3d6937(0x778)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}if(_0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0x1c0)]===_0x3d6937(0x1d4)){let _0x1d5923=Object['keys'](_0x230b3c['block']);if(_0x1d5923['length']>0x2||_0x1d5923[_0x3d6937(0x5e9)]===0x2&&!_0x1d5923[_0x3d6937(0x3f1)](_0x3d6937(0x4e5))){this[_0x3d6937(0x519)](_0x3d6937(0x266));return;}}let _0x2cf19e=_0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0xa0)];for(let _0x4551d8 in _0x230b3c[_0x3d6937(0x4cd)])_0x230b3c[_0x3d6937(0x4cd)][_0x3d6937(0x2b4)](_0x4551d8)&&(_0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x4551d8]=_0x230b3c[_0x3d6937(0x4cd)][_0x4551d8]);if(this[_0x3d6937(0xed)][_0x3d6937(0x2c1)](this['instanceName']+'\x20('+this[_0x3d6937(0x2b1)][_0x3d6937(0x3f4)]+'):\x20Bloco\x20a\x20ser\x20atualizado:\x20'+JSON[_0x3d6937(0x5cc)](_0x36fe04[_0x3d6937(0x25a)][_0x1731cf])),_0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0x2ae)]&&_0x3d6937(0x292)in _0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0x2ae)]){this[_0x3d6937(0xed)][_0x3d6937(0x2c1)](this[_0x3d6937(0x88)]+'\x20('+this[_0x3d6937(0x2b1)][_0x3d6937(0x3f4)]+'):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString');let _0x4be039=JSON[_0x3d6937(0x5cc)](_0x36fe04['blocks'][_0x1731cf]['apirequest'][_0x3d6937(0x292)],null,0x1);_0x4be039[_0x3d6937(0x5e9)]>0x2&&(_0x4be039=_0x4be039['substring'](0x1,_0x4be039[_0x3d6937(0x5e9)]-0x1)['trim']()),_0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0x2ae)]['headerString']=_0x4be039;}if(_0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0x2ae)]&&'body'in _0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0x2ae)]&&!('bodyString'in _0x36fe04[_0x3d6937(0x25a)][_0x1731cf]['apirequest'])){this['logger'][_0x3d6937(0x2c1)](this[_0x3d6937(0x88)]+'\x20('+this[_0x3d6937(0x2b1)][_0x3d6937(0x3f4)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0x2ae)][_0x3d6937(0x602)]=!0x1;let _0x5ee390=JSON['stringify'](_0x36fe04[_0x3d6937(0x25a)][_0x1731cf]['apirequest'][_0x3d6937(0x6b3)],null,0x2);_0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0x2ae)]['bodyString']=_0x5ee390;}if(_0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0x2ae)]&&_0x3d6937(0x2d3)in _0x36fe04[_0x3d6937(0x25a)][_0x1731cf]['apirequest']){_0x36fe04[_0x3d6937(0x25a)][_0x1731cf]['apirequest'][_0x3d6937(0x602)]=!0x1;let _0x172862=_0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0x2ae)][_0x3d6937(0x2d3)],_0x4476c2=this['beautifyWithPlaceholders'](_0x172862);_0x36fe04['blocks'][_0x1731cf][_0x3d6937(0x2ae)]['bodyString']=_0x4476c2[_0x3d6937(0x726)],_0x36fe04['blocks'][_0x1731cf][_0x3d6937(0x2ae)]['bodyStringErrorParse']=_0x4476c2[_0x3d6937(0x2fb)];}let _0x46cef7=_0x36fe04[_0x3d6937(0x25a)][_0x1731cf][_0x3d6937(0xa0)];_0x2cf19e!==_0x46cef7?(this[_0x3d6937(0x1dd)](_0x36fe04['blocks'],_0x2cf19e),this[_0x3d6937(0x1dd)](_0x36fe04[_0x3d6937(0x25a)],_0x46cef7)):this[_0x3d6937(0x1dd)](_0x36fe04[_0x3d6937(0x25a)],_0x2cf19e);}['beautifyWithPlaceholders'](_0x1397a9){const _0x3e2d03=a0_0x46df1a;let _0x23bb9c='\u205f',_0x542005=!0x1,_0x1ccc2e='';for(let _0x5afc5c=0x0;_0x5afc5c<_0x1397a9['length'];_0x5afc5c++){let _0x26aa5e=_0x1397a9[_0x5afc5c];_0x26aa5e==='\x22'&&(_0x5afc5c===0x0||_0x1397a9[_0x5afc5c-0x1]!=='\x5c')&&(_0x542005=!_0x542005),!(!_0x542005&&(_0x26aa5e==='\x0a'||_0x26aa5e==='\x20'||_0x26aa5e===_0x23bb9c))&&(_0x1ccc2e+=_0x26aa5e);}let _0x23c519={},_0x311f85=9876543210.1234,_0x34fbb5=_0x1ccc2e[_0x3e2d03(0x420)](/\{\{([^}]+)\}\}/g,_0xd38101=>{let _0x36bc3d=_0xd38101,_0x18bc17=''+_0x311f85;return _0x23c519[_0x18bc17]=_0x36bc3d,_0x311f85+=0.0001,_0x18bc17;}),_0x704ab3='',_0x1a27e0=!0x1;try{let _0x7c186b=JSON[_0x3e2d03(0xab)](_0x34fbb5);_0x704ab3=JSON[_0x3e2d03(0x5cc)](_0x7c186b,null,0x2),_0x704ab3=_0x704ab3[_0x3e2d03(0x420)](/\n( +)/g,(_0x51d7fd,_0x5816c3)=>{const _0x2ca575=_0x3e2d03;let _0x3e962c=_0x5816c3['length'];return'\x0a'+_0x23bb9c[_0x2ca575(0x585)](_0x3e962c*0x2);}),_0x704ab3=_0x704ab3[_0x3e2d03(0x420)](/(\d{10,}\.\d+)/g,_0x90bec3=>_0x23c519[_0x90bec3]||_0x90bec3);}catch(_0x469268){this[_0x3e2d03(0xed)][_0x3e2d03(0x2fb)](_0x3e2d03(0x1c4)+_0x469268),_0x704ab3=_0x1397a9,_0x1a27e0=!0x0;}return{'result':_0x704ab3,'error':_0x1a27e0};}[a0_0x46df1a(0x6f8)](_0x54a9d0,_0x92c37d){const _0x2fa2ed=a0_0x46df1a;if(_0x92c37d[_0x2fa2ed(0x4cd)][_0x2fa2ed(0x1c0)]===_0x2fa2ed(0x1d4)){this[_0x2fa2ed(0x519)](_0x2fa2ed(0x589));return;}if(_0x92c37d[_0x2fa2ed(0x4cd)]['apirequest']&&_0x2fa2ed(0x292)in _0x92c37d[_0x2fa2ed(0x4cd)][_0x2fa2ed(0x2ae)]){this[_0x2fa2ed(0xed)]['verbose'](this[_0x2fa2ed(0x88)]+'\x20('+this[_0x2fa2ed(0x2b1)][_0x2fa2ed(0x3f4)]+_0x2fa2ed(0x68e));let _0x31d323=JSON[_0x2fa2ed(0x5cc)](_0x92c37d['block'][_0x2fa2ed(0x2ae)][_0x2fa2ed(0x292)],null,0x1);_0x31d323[_0x2fa2ed(0x5e9)]>0x2&&(_0x31d323=_0x31d323[_0x2fa2ed(0x4bc)](0x1,_0x31d323[_0x2fa2ed(0x5e9)]-0x1)['trim']()),_0x92c37d[_0x2fa2ed(0x4cd)][_0x2fa2ed(0x2ae)][_0x2fa2ed(0x688)]=_0x31d323;}_0x92c37d['block'][_0x2fa2ed(0x2ae)]&&_0x2fa2ed(0x6b3)in _0x92c37d[_0x2fa2ed(0x4cd)]['apirequest']&&(this['logger'][_0x2fa2ed(0x2c1)](this[_0x2fa2ed(0x88)]+'\x20('+this[_0x2fa2ed(0x2b1)][_0x2fa2ed(0x3f4)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x92c37d[_0x2fa2ed(0x4cd)][_0x2fa2ed(0x2ae)][_0x2fa2ed(0x2d3)]=JSON[_0x2fa2ed(0x5cc)](_0x92c37d['block']['apirequest']['body'],null,0x1)['trim']()),_0x54a9d0['blocks'][_0x2fa2ed(0x45f)](_0x92c37d['block']),this[_0x2fa2ed(0x1dd)](_0x54a9d0[_0x2fa2ed(0x25a)],_0x92c37d[_0x2fa2ed(0x4cd)]['groupId']);}[a0_0x46df1a(0x1dd)](_0x130882,_0x5aacbd){const _0xbb1766=a0_0x46df1a;let _0x447b57=_0x130882[_0xbb1766(0x57a)](_0x4078e7=>_0x4078e7[_0xbb1766(0xa0)]===_0x5aacbd);_0x447b57['sort']((_0x1e2796,_0x414a41)=>_0x1e2796[_0xbb1766(0x3d5)]-_0x414a41['order']),_0x447b57['forEach']((_0x4fa2fb,_0x3d99d9)=>_0x4fa2fb[_0xbb1766(0x3d5)]=_0x3d99d9+0x1);}async[a0_0x46df1a(0x2b9)](_0x34e6c1){const _0x1225c1=a0_0x46df1a;try{if(this[_0x1225c1(0xed)]['verbose'](this[_0x1225c1(0x88)]+'\x20('+this[_0x1225c1(0x2b1)]['wuid']+'):\x20Editando\x20replyOption...'),!_0x34e6c1||!_0x34e6c1[_0x1225c1(0x209)]){this[_0x1225c1(0x519)](_0x1225c1(0x4ad));return;}if(!this['AutomateSystem'][_0x1225c1(0x6a2)][_0x1225c1(0x336)](_0x3d3669=>_0x3d3669[_0x1225c1(0x778)]===_0x34e6c1[_0x1225c1(0x778)]))throw this[_0x1225c1(0xed)][_0x1225c1(0x2c1)](this['instanceName']+'\x20('+this[_0x1225c1(0x2b1)][_0x1225c1(0x3f4)]+_0x1225c1(0x34f)+_0x34e6c1[_0x1225c1(0x778)]+'\x27\x20não\x20encontrado'),new m(_0x1225c1(0x793));let _0xa24219=await this[_0x1225c1(0x91)][_0x1225c1(0xa2)][_0x1225c1(0x404)]({'where':{'_id':_0x34e6c1[_0x1225c1(0x778)]}});if(!_0xa24219||!_0xa24219[_0x1225c1(0x11f)]?.[_0x1225c1(0x3f1)](this[_0x1225c1(0x2b1)]['wuid']))throw this['logger']['error'](this[_0x1225c1(0x88)]+'\x20('+this[_0x1225c1(0x2b1)][_0x1225c1(0x3f4)]+_0x1225c1(0xa1)+_0x34e6c1[_0x1225c1(0x778)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x1225c1(0x5b2)+_0x34e6c1[_0x1225c1(0x778)]+_0x1225c1(0x252));if(!_0xa24219[_0x1225c1(0x72a)]?.[_0x1225c1(0x3f1)](this[_0x1225c1(0x2b1)][_0x1225c1(0x3f4)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let {replyOption:_0x402f91}=_0x34e6c1;_0x402f91?.[_0x1225c1(0x22c)]?(this[_0x1225c1(0x18c)](_0xa24219,_0x34e6c1),this[_0x1225c1(0xa4)](_0xa24219[_0x1225c1(0x185)],_0x34e6c1[_0x1225c1(0x209)][_0x1225c1(0x78a)])):_0x402f91[_0x1225c1(0x778)]?(await this[_0x1225c1(0x24f)](_0xa24219,_0x34e6c1),this[_0x1225c1(0xa4)](_0xa24219[_0x1225c1(0x185)],_0x34e6c1[_0x1225c1(0x209)][_0x1225c1(0x78a)])):(this[_0x1225c1(0x379)](_0xa24219,_0x34e6c1),this[_0x1225c1(0xa4)](_0xa24219['replyOptions'],_0x34e6c1[_0x1225c1(0x209)]['blockId']));let _0xf61634=await this['repository']['flow']['updateOne'](_0xa24219[_0x1225c1(0x778)],_0xa24219);if(!_0xf61634)throw new Error(_0x1225c1(0x1bf));return _0xf61634;}catch(_0x26e062){this[_0x1225c1(0x519)]('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0x26e062);}}[a0_0x46df1a(0xa4)](_0x330e78,_0x1f2247){const _0x3d475a=a0_0x46df1a;_0x330e78[_0x3d475a(0x14b)](_0x549239=>{const _0x4ca6d6=_0x3d475a;_0x549239['blockId']===_0x1f2247&&_0x549239[_0x4ca6d6(0x3d5)]===void 0x0&&(_0x549239[_0x4ca6d6(0x3d5)]=0x270f);});let _0x39de7b=_0x330e78[_0x3d475a(0x57a)](_0x27c020=>_0x27c020[_0x3d475a(0x78a)]===_0x1f2247);_0x39de7b[_0x3d475a(0x170)]((_0x59fdb2,_0x2e764e)=>_0x59fdb2[_0x3d475a(0x3d5)]-_0x2e764e[_0x3d475a(0x3d5)]),_0x39de7b[_0x3d475a(0x14b)]((_0x460593,_0x448a)=>{const _0x4d70dc=_0x3d475a;_0x460593[_0x4d70dc(0x3d5)]=_0x448a+0x1;}),_0x330e78[_0x3d475a(0x14b)](_0x635ca8=>{const _0x5f3832=_0x3d475a;if(_0x635ca8[_0x5f3832(0x78a)]===_0x1f2247){let _0x5ecd40=_0x39de7b[_0x5f3832(0x336)](_0x11148b=>_0x11148b['_id']&&_0x635ca8[_0x5f3832(0x778)]&&_0x11148b[_0x5f3832(0x778)][_0x5f3832(0x49e)]()===_0x635ca8[_0x5f3832(0x778)]['toString']());_0x5ecd40&&(_0x635ca8[_0x5f3832(0x3d5)]=_0x5ecd40[_0x5f3832(0x3d5)]);}});}[a0_0x46df1a(0x18c)](_0x8d52b5,_0x3a24d4){const _0x944ceb=a0_0x46df1a;let {replyOption:_0x1861a5}=_0x3a24d4;if(!_0x1861a5[_0x944ceb(0x778)]){this['throwAndLogError']('replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption');return;}if(!_0x8d52b5[_0x944ceb(0x185)][_0x944ceb(0x336)](_0x55bb2e=>_0x55bb2e['_id']['toString']()===_0x3a24d4['replyOption'][_0x944ceb(0x778)][_0x944ceb(0x49e)]())){this['throwAndLogError'](_0x944ceb(0x774)+_0x1861a5[_0x944ceb(0x778)]+_0x944ceb(0x4e9));return;}_0x8d52b5[_0x944ceb(0x185)]=_0x8d52b5[_0x944ceb(0x185)]['filter'](_0x4e1b5d=>_0x4e1b5d[_0x944ceb(0x778)]['toString']()!==_0x3a24d4['replyOption']['_id']['toString']());}async[a0_0x46df1a(0x24f)](_0x6e004d,_0x4ed273){const _0xaa1cb4=a0_0x46df1a;let _0x595a3=_0x6e004d[_0xaa1cb4(0x185)][_0xaa1cb4(0x73d)](_0x2b72a4=>_0x2b72a4[_0xaa1cb4(0x778)][_0xaa1cb4(0x49e)]()===_0x4ed273[_0xaa1cb4(0x209)][_0xaa1cb4(0x778)][_0xaa1cb4(0x49e)]());if(_0x595a3===-0x1){this[_0xaa1cb4(0x519)](_0xaa1cb4(0x774)+_0x4ed273[_0xaa1cb4(0x209)][_0xaa1cb4(0x778)]+_0xaa1cb4(0x2af));return;}for(let _0xcdda0c in _0x4ed273[_0xaa1cb4(0x209)])_0x4ed273[_0xaa1cb4(0x209)]['hasOwnProperty'](_0xcdda0c)&&(_0x6e004d[_0xaa1cb4(0x185)][_0x595a3][_0xcdda0c]=_0x4ed273[_0xaa1cb4(0x209)][_0xcdda0c]);}[a0_0x46df1a(0x379)](_0x2779a7,_0x5fdb9){const _0x31e7d3=a0_0x46df1a;_0x2779a7[_0x31e7d3(0x185)][_0x31e7d3(0x45f)](_0x5fdb9[_0x31e7d3(0x209)]);}async[a0_0x46df1a(0x38e)](_0x3ccfc5){const _0x1e31ec=a0_0x46df1a;this['logger'][_0x1e31ec(0x2c1)](this[_0x1e31ec(0x88)]+'\x20('+this[_0x1e31ec(0x2b1)][_0x1e31ec(0x3f4)]+_0x1e31ec(0x584)+JSON[_0x1e31ec(0x5cc)](_0x3ccfc5,null,0x2));try{if(this[_0x1e31ec(0xed)]['verbose'](this[_0x1e31ec(0x88)]+'\x20('+this[_0x1e31ec(0x2b1)]['wuid']+_0x1e31ec(0x727)),!this[_0x1e31ec(0x6a0)][_0x1e31ec(0x6a2)][_0x1e31ec(0x336)](_0xdb3ac0=>_0xdb3ac0['_id']===_0x3ccfc5[_0x1e31ec(0x778)]))throw this['logger'][_0x1e31ec(0x2c1)](this[_0x1e31ec(0x88)]+'\x20('+this[_0x1e31ec(0x2b1)][_0x1e31ec(0x3f4)]+'):\x20Fluxo\x20\x27'+_0x3ccfc5['_id']+_0x1e31ec(0x74a)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x2ad9c7=await this[_0x1e31ec(0x91)][_0x1e31ec(0xa2)][_0x1e31ec(0x404)]({'where':{'_id':_0x3ccfc5[_0x1e31ec(0x778)]}});if(!_0x2ad9c7||!_0x2ad9c7[_0x1e31ec(0x11f)]?.['includes'](this[_0x1e31ec(0x2b1)][_0x1e31ec(0x3f4)]))throw this[_0x1e31ec(0xed)][_0x1e31ec(0x2fb)](this['instanceName']+'\x20('+this[_0x1e31ec(0x2b1)]['wuid']+_0x1e31ec(0xa1)+_0x3ccfc5[_0x1e31ec(0x778)]+_0x1e31ec(0x252)),new m(_0x1e31ec(0x5b2)+_0x3ccfc5[_0x1e31ec(0x778)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x2ad9c7[_0x1e31ec(0x72a)]?.[_0x1e31ec(0x3f1)](this['instance']['wuid']))throw new m(_0x1e31ec(0x518));if(_0x3ccfc5['group']&&_0x3ccfc5[_0x1e31ec(0x641)]?.[_0x1e31ec(0x22c)]===!0x0){if(this[_0x1e31ec(0xed)][_0x1e31ec(0x2c1)](this[_0x1e31ec(0x88)]+'\x20('+this[_0x1e31ec(0x2b1)][_0x1e31ec(0x3f4)]+_0x1e31ec(0x75e)),_0x3ccfc5[_0x1e31ec(0x641)]['default']===!0x0)return{'message':_0x1e31ec(0x414)};if(_0x2ad9c7[_0x1e31ec(0x25a)][_0x1e31ec(0x6ee)](_0x533fb2=>_0x533fb2[_0x1e31ec(0xa0)][_0x1e31ec(0x49e)]()===_0x3ccfc5[_0x1e31ec(0x641)][_0x1e31ec(0x778)]))return this[_0x1e31ec(0xed)][_0x1e31ec(0x2c1)](this[_0x1e31ec(0x88)]+'\x20('+this['instance'][_0x1e31ec(0x3f4)]+_0x1e31ec(0x179)),{'message':'Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.'};_0x2ad9c7['groups']=_0x2ad9c7[_0x1e31ec(0x19c)][_0x1e31ec(0x57a)](_0x3346f6=>_0x3346f6[_0x1e31ec(0x778)][_0x1e31ec(0x49e)]()!==_0x3ccfc5[_0x1e31ec(0x641)][_0x1e31ec(0x778)]);}else{if(_0x3ccfc5[_0x1e31ec(0x641)]){if(_0x3ccfc5[_0x1e31ec(0x641)]['default']===!0x0)return{'message':_0x1e31ec(0x247)};if(_0x3ccfc5['group'][_0x1e31ec(0x778)]){let _0x1d1d57=_0x2ad9c7['groups'][_0x1e31ec(0x336)](_0x27e6ce=>_0x27e6ce[_0x1e31ec(0x778)]['toString']()===_0x3ccfc5[_0x1e31ec(0x641)]['_id']);_0x1d1d57&&(_0x3ccfc5[_0x1e31ec(0x641)]['x']<0x0&&(_0x3ccfc5[_0x1e31ec(0x641)]['x']=0x0),_0x3ccfc5[_0x1e31ec(0x641)]['y']<0x0&&(_0x3ccfc5[_0x1e31ec(0x641)]['y']=0x0),Object[_0x1e31ec(0x508)](_0x1d1d57,_0x3ccfc5[_0x1e31ec(0x641)]));}else _0x2ad9c7[_0x1e31ec(0x19c)]['push'](_0x3ccfc5[_0x1e31ec(0x641)]);}}let _0x47aea6=await this[_0x1e31ec(0x91)]['flow'][_0x1e31ec(0x4b3)](_0x2ad9c7[_0x1e31ec(0x778)],_0x2ad9c7);if(!_0x47aea6)throw new Error(_0x1e31ec(0x1bf));return _0x47aea6;}catch(_0xc9d0f6){let _0xe7f916=_0x1e31ec(0x700),_0x590933=_0xc9d0f6 instanceof Error?_0xc9d0f6['message']:typeof _0xc9d0f6==_0x1e31ec(0xde)?JSON[_0x1e31ec(0x5cc)](_0xc9d0f6):_0xc9d0f6,_0x1ee760=_0xe7f916+':\x20'+_0x590933;throw this[_0x1e31ec(0xed)][_0x1e31ec(0x2fb)](this['instanceName']+'\x20('+this['instance'][_0x1e31ec(0x3f4)]+'):\x20'+_0x1ee760),new m(_0x1ee760);}}async['editFlowCondition'](_0x24663a){const _0x23e126=a0_0x46df1a;try{if(this[_0x23e126(0xed)][_0x23e126(0x2c1)](this[_0x23e126(0x88)]+'\x20('+this[_0x23e126(0x2b1)][_0x23e126(0x3f4)]+_0x23e126(0xdd)),!this[_0x23e126(0x6a0)][_0x23e126(0x6a2)]['find'](_0x1e104f=>_0x1e104f[_0x23e126(0x778)]===_0x24663a[_0x23e126(0x778)]))throw this['logger'][_0x23e126(0x2c1)](this['instanceName']+'\x20('+this[_0x23e126(0x2b1)]['wuid']+_0x23e126(0x34f)+_0x24663a['_id']+'\x27\x20não\x20encontrado'),new m(_0x23e126(0x793));let _0x1e3469=await this[_0x23e126(0x91)][_0x23e126(0xa2)][_0x23e126(0x404)]({'where':{'_id':_0x24663a[_0x23e126(0x778)]}});if(!_0x1e3469||!_0x1e3469[_0x23e126(0x11f)]?.[_0x23e126(0x3f1)](this[_0x23e126(0x2b1)][_0x23e126(0x3f4)]))throw this[_0x23e126(0xed)]['error'](this['instanceName']+'\x20('+this[_0x23e126(0x2b1)][_0x23e126(0x3f4)]+_0x23e126(0xa1)+_0x24663a[_0x23e126(0x778)]+_0x23e126(0x252)),new m(_0x23e126(0x5b2)+_0x24663a[_0x23e126(0x778)]+_0x23e126(0x252));if(!_0x1e3469[_0x23e126(0x72a)]?.[_0x23e126(0x3f1)](this['instance'][_0x23e126(0x3f4)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let _0x27396d=!0x1;if(_0x24663a['condition']?.[_0x23e126(0x22c)]===!0x0)_0x1e3469['conditions']=_0x1e3469[_0x23e126(0x31c)][_0x23e126(0x57a)](_0x128c1d=>_0x128c1d&&_0x24663a['condition']&&_0x128c1d[_0x23e126(0x778)]&&_0x24663a[_0x23e126(0x631)][_0x23e126(0x778)]&&_0x128c1d[_0x23e126(0x778)]['toString']()!==_0x24663a[_0x23e126(0x631)]['_id'][_0x23e126(0x49e)]()),_0x27396d=!0x0;else{let _0x46250e=_0x1e3469[_0x23e126(0x31c)][_0x23e126(0x336)](_0x387977=>_0x387977&&_0x24663a['condition']&&_0x387977[_0x23e126(0x778)]&&_0x24663a['condition'][_0x23e126(0x778)]&&_0x387977['_id'][_0x23e126(0x49e)]()===_0x24663a[_0x23e126(0x631)][_0x23e126(0x778)][_0x23e126(0x49e)]());_0x46250e?(_0x27396d=_0x46250e[_0x23e126(0x3d5)]!==_0x24663a[_0x23e126(0x631)]['order'],Object['assign'](_0x46250e,_0x24663a[_0x23e126(0x631)])):(_0x1e3469[_0x23e126(0x31c)][_0x23e126(0x45f)](_0x24663a[_0x23e126(0x631)]),_0x27396d=!0x0);}if(_0x27396d){_0x1e3469[_0x23e126(0x31c)][_0x23e126(0x170)]((_0x2f673b,_0x3272a1)=>_0x2f673b[_0x23e126(0x3d5)]>_0x3272a1[_0x23e126(0x3d5)]?0x1:_0x3272a1['order']>_0x2f673b[_0x23e126(0x3d5)]?-0x1:0x0);for(let _0x2536a7=0x0;_0x2536a7<_0x1e3469[_0x23e126(0x31c)][_0x23e126(0x5e9)];_0x2536a7++)_0x1e3469[_0x23e126(0x31c)][_0x2536a7][_0x23e126(0x3d5)]=_0x2536a7+0x1;_0x1e3469[_0x23e126(0x31c)][_0x23e126(0x5e9)]>0x0&&(_0x1e3469[_0x23e126(0x31c)][0x0]['OrAnd']=_0x23e126(0x351));}let _0x53516c=await this[_0x23e126(0x91)]['flow'][_0x23e126(0x4b3)](_0x1e3469[_0x23e126(0x778)],_0x1e3469);if(!_0x53516c)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x53516c;}catch(_0x2edb07){let _0x231b66=_0x23e126(0x582),_0x3f02d3=_0x2edb07 instanceof Error?_0x2edb07[_0x23e126(0x64f)]:typeof _0x2edb07=='object'?JSON['stringify'](_0x2edb07):_0x2edb07,_0x4deb84=_0x231b66+':\x20'+_0x3f02d3;throw this[_0x23e126(0xed)][_0x23e126(0x2fb)](this[_0x23e126(0x88)]+'\x20('+this['instance'][_0x23e126(0x3f4)]+_0x23e126(0x28e)+_0x4deb84),new m(_0x4deb84);}}async[a0_0x46df1a(0x1df)](_0x31113d){const _0x8349ef=a0_0x46df1a;try{if(this[_0x8349ef(0xed)][_0x8349ef(0x2c1)](this[_0x8349ef(0x88)]+'\x20('+this[_0x8349ef(0x2b1)][_0x8349ef(0x3f4)]+'):\x20Editando\x20edição\x20do\x20fluxo...'),!this[_0x8349ef(0x6a0)][_0x8349ef(0x6a2)][_0x8349ef(0x336)](_0x2d3531=>_0x2d3531['_id']===_0x31113d[_0x8349ef(0x778)]))throw this[_0x8349ef(0xed)][_0x8349ef(0x2c1)](this[_0x8349ef(0x88)]+'\x20('+this['instance']['wuid']+_0x8349ef(0x34f)+_0x31113d[_0x8349ef(0x778)]+_0x8349ef(0x74a)),new m(_0x8349ef(0x793));let _0x3686be=await this[_0x8349ef(0x91)]['flow']['findOne']({'where':{'_id':_0x31113d['_id']}});if(!_0x3686be||!_0x3686be[_0x8349ef(0x11f)]?.[_0x8349ef(0x3f1)](this['instance'][_0x8349ef(0x3f4)]))throw this['logger'][_0x8349ef(0x2fb)](this[_0x8349ef(0x88)]+'\x20('+this[_0x8349ef(0x2b1)][_0x8349ef(0x3f4)]+'):\x20Flow\x20\x27'+_0x31113d['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x8349ef(0x5b2)+_0x31113d['_id']+_0x8349ef(0x252));if(!_0x3686be[_0x8349ef(0x72a)]?.[_0x8349ef(0x3f1)](this[_0x8349ef(0x2b1)]['wuid']))throw new m(_0x8349ef(0x518));let _0x46a15e=!0x1;if(_0x31113d['varedit']?.[_0x8349ef(0x22c)]===!0x0)_0x3686be[_0x8349ef(0x5d0)]=_0x3686be[_0x8349ef(0x5d0)][_0x8349ef(0x57a)](_0x3c8564=>_0x3c8564&&_0x31113d[_0x8349ef(0x6ea)]&&_0x3c8564['_id']&&_0x31113d[_0x8349ef(0x6ea)][_0x8349ef(0x778)]&&_0x3c8564['_id'][_0x8349ef(0x49e)]()!==_0x31113d[_0x8349ef(0x6ea)]['_id'][_0x8349ef(0x49e)]()),_0x46a15e=!0x0;else{let _0x6ab578=_0x3686be[_0x8349ef(0x5d0)][_0x8349ef(0x336)](_0x4be806=>_0x4be806&&_0x31113d[_0x8349ef(0x6ea)]&&_0x4be806[_0x8349ef(0x778)]&&_0x31113d['varedit']['_id']&&_0x4be806['_id'][_0x8349ef(0x49e)]()===_0x31113d[_0x8349ef(0x6ea)][_0x8349ef(0x778)]['toString']());_0x6ab578?(_0x46a15e=_0x6ab578[_0x8349ef(0x3d5)]!==_0x31113d[_0x8349ef(0x6ea)]['order'],Object[_0x8349ef(0x508)](_0x6ab578,_0x31113d[_0x8349ef(0x6ea)])):(_0x3686be[_0x8349ef(0x5d0)][_0x8349ef(0x45f)](_0x31113d['varedit']),_0x46a15e=!0x0);}if(_0x46a15e){_0x3686be['varedits'][_0x8349ef(0x170)]((_0x3db18b,_0x3244d8)=>_0x3db18b[_0x8349ef(0x3d5)]>_0x3244d8['order']?0x1:_0x3244d8[_0x8349ef(0x3d5)]>_0x3db18b[_0x8349ef(0x3d5)]?-0x1:0x0);for(let _0xe4f29b=0x0;_0xe4f29b<_0x3686be[_0x8349ef(0x5d0)][_0x8349ef(0x5e9)];_0xe4f29b++)_0x3686be[_0x8349ef(0x5d0)][_0xe4f29b][_0x8349ef(0x3d5)]=_0xe4f29b+0x1;}let _0x38e9=await this[_0x8349ef(0x91)]['flow'][_0x8349ef(0x4b3)](_0x3686be[_0x8349ef(0x778)],_0x3686be);if(!_0x38e9)throw new Error(_0x8349ef(0x1bf));return _0x38e9;}catch(_0x17ab88){let _0x21ad04=_0x8349ef(0x582),_0x30f23d=_0x17ab88 instanceof Error?_0x17ab88[_0x8349ef(0x64f)]:typeof _0x17ab88==_0x8349ef(0xde)?JSON[_0x8349ef(0x5cc)](_0x17ab88):_0x17ab88,_0x1e324e=_0x21ad04+':\x20'+_0x30f23d;throw this[_0x8349ef(0xed)][_0x8349ef(0x2fb)](this[_0x8349ef(0x88)]+'\x20('+this[_0x8349ef(0x2b1)][_0x8349ef(0x3f4)]+_0x8349ef(0x28e)+_0x1e324e),new m(_0x1e324e);}}async[a0_0x46df1a(0x4ae)](_0x5d12e2){const _0x3e5265=a0_0x46df1a;try{if(this[_0x3e5265(0xed)][_0x3e5265(0x2c1)](this[_0x3e5265(0x88)]+'\x20('+this[_0x3e5265(0x2b1)][_0x3e5265(0x3f4)]+'):\x20Editando\x20variável\x20do\x20fluxo...'),!this[_0x3e5265(0x6a0)]['flows'][_0x3e5265(0x336)](_0x511f1c=>_0x511f1c[_0x3e5265(0x778)]===_0x5d12e2[_0x3e5265(0x778)]))throw this[_0x3e5265(0xed)]['verbose'](this['instanceName']+'\x20('+this[_0x3e5265(0x2b1)][_0x3e5265(0x3f4)]+_0x3e5265(0x34f)+_0x5d12e2['_id']+_0x3e5265(0x74a)),new m(_0x3e5265(0x793));let _0x177eb8=await this['repository'][_0x3e5265(0xa2)][_0x3e5265(0x404)]({'where':{'_id':_0x5d12e2[_0x3e5265(0x778)]}});if(!_0x177eb8||!_0x177eb8[_0x3e5265(0x11f)]?.[_0x3e5265(0x3f1)](this[_0x3e5265(0x2b1)][_0x3e5265(0x3f4)]))throw this['logger'][_0x3e5265(0x2fb)](this['instanceName']+'\x20('+this[_0x3e5265(0x2b1)]['wuid']+_0x3e5265(0xa1)+_0x5d12e2[_0x3e5265(0x778)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x3e5265(0x5b2)+_0x5d12e2[_0x3e5265(0x778)]+_0x3e5265(0x252));if(!_0x177eb8[_0x3e5265(0x72a)]?.[_0x3e5265(0x3f1)](this['instance'][_0x3e5265(0x3f4)]))throw new m(_0x3e5265(0x518));_0x5d12e2[_0x3e5265(0x6cb)][_0x3e5265(0x11d)]=_0x5d12e2[_0x3e5265(0x6cb)]['name'][_0x3e5265(0x7a1)](),_0x5d12e2['variable'][_0x3e5265(0x11d)][_0x3e5265(0x3f0)]('_')&&(_0x5d12e2['variable'][_0x3e5265(0x11d)]=_0x5d12e2['variable'][_0x3e5265(0x11d)][_0x3e5265(0x4bc)](0x1)),_0x5d12e2['variable'][_0x3e5265(0x11d)]=_0x5d12e2[_0x3e5265(0x6cb)][_0x3e5265(0x11d)][_0x3e5265(0x7a1)]();let _0x5496fb=_0x177eb8['variables'][_0x3e5265(0x336)](_0x4f1b6e=>_0x4f1b6e[_0x3e5265(0x11d)]===_0x5d12e2[_0x3e5265(0x6cb)]['name']);if(_0x5496fb?.[_0x3e5265(0x4df)]===!0x0)throw new Error(_0x3e5265(0x5c5));if(_0x5d12e2[_0x3e5265(0x6cb)]?.[_0x3e5265(0x22c)]===!0x0){if(!_0x5496fb)return{'message':'Variável\x20não\x20encontrada!'};_0x177eb8['variables']=_0x177eb8[_0x3e5265(0x310)]['filter'](_0x5276c9=>_0x5276c9[_0x3e5265(0x11d)]!==_0x5d12e2[_0x3e5265(0x6cb)]['name']);}else _0x5496fb?Object[_0x3e5265(0x508)](_0x5496fb,_0x5d12e2[_0x3e5265(0x6cb)]):_0x177eb8[_0x3e5265(0x310)]['push'](_0x5d12e2[_0x3e5265(0x6cb)]);let _0x18187a=await this[_0x3e5265(0x91)][_0x3e5265(0xa2)][_0x3e5265(0x4b3)](_0x177eb8[_0x3e5265(0x778)],_0x177eb8);if(!_0x18187a)throw new Error(_0x3e5265(0x1bf));return _0x18187a;}catch(_0x5d36d6){let _0x432449='Erro\x20ao\x20editar\x20variável\x20do\x20fluxo',_0x5e5546=_0x5d36d6 instanceof Error?_0x5d36d6[_0x3e5265(0x64f)]:typeof _0x5d36d6==_0x3e5265(0xde)?JSON['stringify'](_0x5d36d6):_0x5d36d6,_0x51da62=_0x432449+':\x20'+_0x5e5546;throw this[_0x3e5265(0xed)]['error'](this[_0x3e5265(0x88)]+'\x20('+this[_0x3e5265(0x2b1)][_0x3e5265(0x3f4)]+_0x3e5265(0x28e)+_0x51da62),new m(_0x51da62);}}async['startFlow'](_0x3a473f){const _0x109a5f=a0_0x46df1a;let _0x1d8e85=null;try{if(!this[_0x109a5f(0x6a0)]?.[_0x109a5f(0x79)][_0x109a5f(0x4d5)])throw new m(_0x109a5f(0x504));this[_0x109a5f(0xed)][_0x109a5f(0x2c1)](this[_0x109a5f(0x88)]+'\x20('+this['instance']['wuid']+_0x109a5f(0x10c));let _0x4f4468=(await this[_0x109a5f(0x210)]({'numbers':[_0x3a473f['remoteJid']]}))[0x0];if(!_0x4f4468[_0x109a5f(0x297)]&&!(0x0,w[_0x109a5f(0x105)])(_0x4f4468['jid'])&&!_0x4f4468['jid'][_0x109a5f(0x3f1)](_0x109a5f(0x338)))throw _0x1d8e85=JSON[_0x109a5f(0x5cc)](_0x4f4468,null,0x2),new m(_0x4f4468);let _0x143b53;if(_0x3a473f[_0x109a5f(0x11d)][_0x109a5f(0x5e9)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x109a5f(0x30d)](_0x3a473f[_0x109a5f(0x11d)])?_0x143b53=this[_0x109a5f(0x6a0)][_0x109a5f(0x6a2)][_0x109a5f(0x336)](_0x171f3c=>_0x171f3c[_0x109a5f(0x778)]===_0x3a473f[_0x109a5f(0x11d)]):_0x143b53=this['AutomateSystem'][_0x109a5f(0x6a2)]['find'](_0x329b63=>_0x329b63['name']===_0x3a473f['name']),!_0x143b53)throw this[_0x109a5f(0xed)][_0x109a5f(0x2c1)](this[_0x109a5f(0x88)]+'\x20('+this[_0x109a5f(0x2b1)][_0x109a5f(0x3f4)]+'):\x20Fluxo\x20\x27'+_0x3a473f['name']+_0x109a5f(0x74a)),new m(_0x109a5f(0x793));let _0x256ec7=await this[_0x109a5f(0x91)][_0x109a5f(0xa2)][_0x109a5f(0x404)]({'where':{'_id':_0x143b53[_0x109a5f(0x778)]}});if(!_0x256ec7||!_0x256ec7[_0x109a5f(0x11f)]?.[_0x109a5f(0x3f1)](this[_0x109a5f(0x2b1)][_0x109a5f(0x3f4)]))throw this[_0x109a5f(0xed)][_0x109a5f(0x2fb)](this[_0x109a5f(0x88)]+'\x20('+this[_0x109a5f(0x2b1)][_0x109a5f(0x3f4)]+'):\x20Flow\x20\x27'+_0x143b53[_0x109a5f(0x778)]+_0x109a5f(0x252)),_0x1d8e85='Flow\x20\x27'+_0x143b53[_0x109a5f(0x778)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo',new m(_0x1d8e85);let _0x68b359=await this[_0x109a5f(0x1b4)](_0x256ec7,_0x4f4468[_0x109a5f(0x540)],_0x3a473f[_0x109a5f(0x4ca)]);if(_0x68b359){this['logger'][_0x109a5f(0x2c1)](this[_0x109a5f(0x88)]+'\x20('+this[_0x109a5f(0x2b1)]['wuid']+_0x109a5f(0x74e));let _0x12185f=await this[_0x109a5f(0x43f)](_0x68b359);return _0x12185f&&await this[_0x109a5f(0xf6)](_0x68b359,_0x12185f),{'message':'Flow\x20iniciado\x20com\x20'+_0x3a473f[_0x109a5f(0x75b)]};}}catch(_0xb556b3){if(this[_0x109a5f(0xed)][_0x109a5f(0x2fb)](this['instanceName']+'\x20('+this['instance'][_0x109a5f(0x3f4)]+_0x109a5f(0x7b1)+(_0xb556b3 instanceof Error?_0xb556b3[_0x109a5f(0x64f)]:JSON[_0x109a5f(0x5cc)](_0xb556b3,null,0x2))),_0x1d8e85=_0xb556b3 instanceof Error?_0xb556b3['message']:JSON[_0x109a5f(0x5cc)](_0xb556b3,null,0x2),_0x1d8e85)throw new m(_0x109a5f(0x461)+_0x1d8e85);}}async[a0_0x46df1a(0x73c)](_0x249b1a,_0x44a3b9,_0x50e351){const _0x297885=a0_0x46df1a;let _0x5f3bfc=null;try{if(!this['AutomateSystem']?.[_0x297885(0x79)][_0x297885(0x4d5)])throw new m(_0x297885(0x504));if(this['logger']['verbose'](this[_0x297885(0x88)]+'\x20('+this[_0x297885(0x2b1)][_0x297885(0x3f4)]+_0x297885(0x10c)),_0x44a3b9){let _0x338933=(await this[_0x297885(0x210)]({'numbers':[_0x44a3b9]}))[0x0];if(!_0x338933['exists']&&!(0x0,w[_0x297885(0x105)])(_0x338933[_0x297885(0x540)])&&!_0x338933['jid'][_0x297885(0x3f1)]('@broadcast'))throw _0x5f3bfc=JSON[_0x297885(0x5cc)](_0x338933,null,0x2),new m(_0x338933);_0x44a3b9=_0x338933[_0x297885(0x540)];}else _0x44a3b9||(_0x44a3b9=(0x0,Y['v4'])());let _0x275968=await this[_0x297885(0x91)][_0x297885(0xa2)][_0x297885(0x404)]({'where':{'_id':_0x249b1a}});if(!_0x275968||!_0x275968[_0x297885(0x11f)]?.[_0x297885(0x3f1)](this[_0x297885(0x2b1)]['wuid']))throw this[_0x297885(0xed)][_0x297885(0x2fb)](this[_0x297885(0x88)]+'\x20('+this['instance']['wuid']+_0x297885(0xa1)+_0x249b1a+_0x297885(0x252)),new m('Flow\x20\x27'+_0x249b1a+_0x297885(0x252));let _0x49e8f7=await this[_0x297885(0x1b4)](_0x275968,_0x44a3b9,null);if(_0x49e8f7){this[_0x297885(0xed)][_0x297885(0x2c1)](this[_0x297885(0x88)]+'\x20('+this['instance'][_0x297885(0x3f4)]+_0x297885(0x3c7));let _0x220737;if(_0x50e351){let _0x517ee6=_0x49e8f7[_0x297885(0x594)][_0x297885(0x65d)],_0x1d4d66=this[_0x297885(0x36b)](_0x50e351);Object[_0x297885(0x508)](_0x517ee6,_0x1d4d66),_0x49e8f7['chatLog'][_0x297885(0x65d)]=_0x517ee6,_0x220737={'error':!0x1,'apiResponse':_0x50e351};}let _0x2fff32=await this[_0x297885(0x43f)](_0x49e8f7);return _0x2fff32&&await this[_0x297885(0xf6)](_0x49e8f7,_0x2fff32),{'message':'Flow\x20iniciado'};}}catch(_0x47d286){if(this['logger']['error'](this['instanceName']+'\x20('+this[_0x297885(0x2b1)]['wuid']+_0x297885(0x7b1)+(_0x47d286 instanceof Error?_0x47d286[_0x297885(0x64f)]:JSON[_0x297885(0x5cc)](_0x47d286,null,0x2))),_0x5f3bfc=_0x47d286 instanceof Error?_0x47d286['message']:JSON[_0x297885(0x5cc)](_0x47d286,null,0x2),_0x5f3bfc)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x5f3bfc);}}async[a0_0x46df1a(0x431)](_0xc067c1){const _0x53ec71=a0_0x46df1a;try{let _0x3afad8={'remoteJid':_0xc067c1,'status':'open'},_0xc8897c={'status':'closed'},_0x11a47c=await this[_0x53ec71(0x91)][_0x53ec71(0x3e7)]['updateMany'](_0x3afad8,_0xc8897c,this[_0x53ec71(0x2b1)]['wuid']);return this[_0x53ec71(0xed)]['verbose'](this[_0x53ec71(0x88)]+'\x20('+this[_0x53ec71(0x2b1)][_0x53ec71(0x3f4)]+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.'),_0x11a47c;}catch(_0x5eefff){throw this['logger'][_0x53ec71(0x2fb)](this[_0x53ec71(0x88)]+'\x20('+this['instance'][_0x53ec71(0x3f4)]+_0x53ec71(0x17b)+_0x5eefff[_0x53ec71(0x64f)]),_0x5eefff;}}async['createConversationforStartFlow'](_0x196ac8,_0x4f4a03,_0x128060){const _0x4c9d3c=a0_0x46df1a;this[_0x4c9d3c(0xed)][_0x4c9d3c(0x2c1)](this[_0x4c9d3c(0x88)]+'\x20('+this[_0x4c9d3c(0x2b1)][_0x4c9d3c(0x3f4)]+_0x4c9d3c(0x90)),await this[_0x4c9d3c(0x431)](_0x4f4a03);try{let _0x5d789e=require(_0x4c9d3c(0x779))['ObjectId'],_0x463ad5=Date['now'](),_0x1e0701='start',_0x2cd72d={},_0x106ca3={},_0x282b61=this[_0x4c9d3c(0x6a0)][_0x4c9d3c(0x6a2)][_0x4c9d3c(0x336)](_0x18e367=>_0x18e367[_0x4c9d3c(0x778)]===_0x196ac8[_0x4c9d3c(0x778)]?.[_0x4c9d3c(0x49e)]()),_0x1978f2=_0x282b61?.[_0x4c9d3c(0x15a)]??_0x196ac8[_0x4c9d3c(0x15a)]??0x0,_0x18b98f=_0x282b61?.[_0x4c9d3c(0x3a0)]??_0x196ac8['readMessages']??!0x1,_0x11465f={'flowId':_0x196ac8[_0x4c9d3c(0x778)],..._0x196ac8,'chatLog':null},_0x3c71f9=await this[_0x4c9d3c(0x5e3)](_0x11465f[_0x4c9d3c(0x310)]),_0x40970a=await this[_0x4c9d3c(0x43a)](_0x4f4a03),_0x37b5bd={..._0x3c71f9,..._0x40970a,'_remoteJid':_0x4f4a03},_0x35ac6f={'lastReceivedMessage':_0x2cd72d,'lastSendMessage':_0x106ca3,'lastBlockId':_0x1e0701,'lastCondition':!0x0,'realVariables':_0x37b5bd};_0x11465f[_0x4c9d3c(0x594)]=_0x35ac6f,_0x11465f[_0x4c9d3c(0x594)][_0x4c9d3c(0x65d)]={..._0x37b5bd,..._0x128060},delete _0x11465f[_0x4c9d3c(0x778)],_0x11465f[_0x4c9d3c(0x778)]=new _0x5d789e(),_0x11465f[_0x4c9d3c(0x533)]=_0x463ad5,_0x11465f[_0x4c9d3c(0x16f)]=_0x4c9d3c(0x7b),_0x11465f[_0x4c9d3c(0x75b)]=_0x4f4a03,_0x11465f[_0x4c9d3c(0x15a)]=_0x1978f2,_0x11465f[_0x4c9d3c(0x3a0)]=_0x18b98f,_0x11465f[_0x4c9d3c(0x778)]=_0x196ac8[_0x4c9d3c(0x778)];let _0x35b916=await this[_0x4c9d3c(0x91)][_0x4c9d3c(0x3e7)][_0x4c9d3c(0x4b3)](_0x11465f[_0x4c9d3c(0x778)],_0x11465f,this[_0x4c9d3c(0x2b1)]['wuid']);return this['logger'][_0x4c9d3c(0x2c1)](this[_0x4c9d3c(0x88)]+'\x20('+this[_0x4c9d3c(0x2b1)][_0x4c9d3c(0x3f4)]+_0x4c9d3c(0x660)),_0x35b916?_0x11465f:null;}catch(_0x22236c){let _0x22193c=_0x4c9d3c(0x526),_0x3f0176=_0x22236c instanceof Error?_0x22236c[_0x4c9d3c(0x64f)]:typeof _0x22236c=='object'?JSON[_0x4c9d3c(0x5cc)](_0x22236c):_0x22236c,_0x9fe57d=_0x22193c+':\x20'+_0x3f0176;throw this['logger'][_0x4c9d3c(0x2fb)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4c9d3c(0x28e)+_0x9fe57d),new m(_0x9fe57d);}}async['getConversation'](_0x45c6d9){const _0xd7243b=a0_0x46df1a;try{this[_0xd7243b(0xed)][_0xd7243b(0x2c1)](this[_0xd7243b(0x88)]+'\x20('+this[_0xd7243b(0x2b1)][_0xd7243b(0x3f4)]+_0xd7243b(0x114)),this[_0xd7243b(0xed)][_0xd7243b(0x2c1)](this[_0xd7243b(0x88)]+'\x20('+this[_0xd7243b(0x2b1)]['wuid']+_0xd7243b(0x6af)+_0x45c6d9);let _0x322e7f={'where':{'_id':_0x45c6d9}};return await this['repository'][_0xd7243b(0x3e7)][_0xd7243b(0x404)](_0x322e7f,this[_0xd7243b(0x2b1)][_0xd7243b(0x3f4)]);}catch(_0x355224){let _0x2170ce=_0xd7243b(0x4c9),_0x4dcc6b=_0x355224 instanceof Error?_0x355224[_0xd7243b(0x64f)]:typeof _0x355224=='object'?JSON[_0xd7243b(0x5cc)](_0x355224):_0x355224,_0x2f69bd=_0x2170ce+':\x20'+_0x4dcc6b;throw this['logger'][_0xd7243b(0x2fb)](this[_0xd7243b(0x88)]+'\x20('+this['instance'][_0xd7243b(0x3f4)]+'):\x20'+_0x2f69bd),new m(_0x2f69bd);}}async[a0_0x46df1a(0x524)](_0x214fc9){const _0x5a1864=a0_0x46df1a;try{return this[_0x5a1864(0xed)]['verbose'](this[_0x5a1864(0x88)]+'\x20('+this[_0x5a1864(0x2b1)]['wuid']+'):\x20Buscando\x20conversas...'),await this[_0x5a1864(0x91)][_0x5a1864(0x3e7)]['find'](_0x214fc9,this[_0x5a1864(0x2b1)]['wuid']);}catch(_0x262ea7){let _0x12053e=_0x5a1864(0x6fe),_0x2db732=_0x262ea7 instanceof Error?_0x262ea7[_0x5a1864(0x64f)]:typeof _0x262ea7=='object'?JSON['stringify'](_0x262ea7):_0x262ea7,_0x367d16=_0x12053e+':\x20'+_0x2db732;throw this[_0x5a1864(0xed)][_0x5a1864(0x2fb)](this['instanceName']+'\x20('+this[_0x5a1864(0x2b1)][_0x5a1864(0x3f4)]+_0x5a1864(0x28e)+_0x367d16),new m(_0x367d16);}}async[a0_0x46df1a(0x591)](_0x701621){const _0x361d9a=a0_0x46df1a;try{return this[_0x361d9a(0xed)][_0x361d9a(0x2c1)](this[_0x361d9a(0x88)]+'\x20('+this[_0x361d9a(0x2b1)][_0x361d9a(0x3f4)]+_0x361d9a(0x4b2)),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x361d9a(0x2b1)][_0x361d9a(0x3f4)]+'):\x20Query\x20params:'+_0x701621),(await this[_0x361d9a(0x91)][_0x361d9a(0x3e7)][_0x361d9a(0x52e)]({'where':{'_id':_0x701621[_0x361d9a(0x778)]}},this['instance']['wuid']))[_0x361d9a(0x712)]===0x0?{'message':_0x361d9a(0x66f)}:{'message':_0x361d9a(0x40a)};}catch(_0x2e4090){let _0x469f07=_0x361d9a(0x646),_0x20e480=_0x2e4090 instanceof Error?_0x2e4090['message']:typeof _0x2e4090==_0x361d9a(0xde)?JSON[_0x361d9a(0x5cc)](_0x2e4090):_0x2e4090,_0x3c5e23=_0x469f07+':\x20'+_0x20e480;throw this[_0x361d9a(0xed)][_0x361d9a(0x2fb)](this[_0x361d9a(0x88)]+'\x20('+this[_0x361d9a(0x2b1)][_0x361d9a(0x3f4)]+_0x361d9a(0x28e)+_0x3c5e23),new m(_0x3c5e23);}}async[a0_0x46df1a(0x30f)](_0x416e02){const _0x123547=a0_0x46df1a;try{let {_id:_0x364658,chatLog:_0x461cd1,status:_0x4b476d}=_0x416e02;if(!_0x364658)return{'message':'O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.'};let _0x390c11={};if(_0x4b476d!==void 0x0&&(_0x390c11[_0x123547(0x16f)]=_0x4b476d),Object[_0x123547(0x794)](_0x390c11)[_0x123547(0x5e9)]===0x0)return{'message':'Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.'};let _0x4e2444=await this[_0x123547(0x91)][_0x123547(0x3e7)][_0x123547(0x4b3)](_0x364658,_0x390c11,this[_0x123547(0x2b1)][_0x123547(0x3f4)]);return _0x4e2444||{'message':'Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.'};}catch(_0x38fb47){let _0x37ddfb=_0x123547(0x165),_0x3ce1b9=_0x38fb47 instanceof Error?_0x38fb47['message']:typeof _0x38fb47=='object'?JSON['stringify'](_0x38fb47):_0x38fb47,_0x5a3819=_0x37ddfb+':\x20'+_0x3ce1b9;throw this[_0x123547(0xed)][_0x123547(0x2fb)](this['instanceName']+'\x20('+this[_0x123547(0x2b1)]['wuid']+_0x123547(0x28e)+_0x5a3819),new m(_0x5a3819);}}async['editChat'](_0x4d37cb){const _0x574dad=a0_0x46df1a;try{_0x4d37cb['_id']=this[_0x574dad(0x39f)](_0x4d37cb[_0x574dad(0x778)]);let _0xfc2d4d=await this[_0x574dad(0x91)][_0x574dad(0x3d9)]['findOne']({'where':{'_id':_0x4d37cb[_0x574dad(0x778)]}},this[_0x574dad(0x2b1)][_0x574dad(0x3f4)]);if(!_0xfc2d4d)throw new m('Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo');let {_id:_0x46901d,leadInfo:_0x3d5e57}=_0x4d37cb;if(!_0x46901d)throw new Error(_0x574dad(0x3a7));if(_0x4d37cb[_0x574dad(0x22c)]===_0x574dad(0x221))return await this['deleteChat'](_0x4d37cb[_0x574dad(0x778)]),await this[_0x574dad(0x91)][_0x574dad(0x3d9)][_0x574dad(0x22c)]({'where':{'_id':_0x4d37cb[_0x574dad(0x778)]}},this['instance'][_0x574dad(0x3f4)]),await this[_0x574dad(0x91)][_0x574dad(0x64f)][_0x574dad(0x22c)]({'where':{'key':{'remoteJid':_0x4d37cb[_0x574dad(0x778)]}}},this[_0x574dad(0x2b1)][_0x574dad(0x3f4)]),_0x4d37cb=await this[_0x574dad(0x91)]['chat']['updateOne']({'where':{'_id':_0x4d37cb[_0x574dad(0x778)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x574dad(0x2b1)][_0x574dad(0x3f4)]),j(this[_0x574dad(0x88)],_0x574dad(0x758),{'chat':_0x4d37cb}),{'message':'Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.'};if(_0x4d37cb[_0x574dad(0x22c)]===_0x574dad(0x229))return await this[_0x574dad(0x91)][_0x574dad(0x64f)][_0x574dad(0x22c)]({'where':{'key':{'remoteJid':_0x4d37cb[_0x574dad(0x778)]}}},this[_0x574dad(0x2b1)][_0x574dad(0x3f4)]),_0x4d37cb=await this['repository'][_0x574dad(0x3d9)][_0x574dad(0x4b3)]({'where':{'_id':_0x4d37cb[_0x574dad(0x778)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x574dad(0x2b1)][_0x574dad(0x3f4)]),j(this['instanceName'],_0x574dad(0x758),{'chat':_0x4d37cb}),{'message':_0x574dad(0x1d0)};let _0x5b76b2=(_0xdbd2a9,_0x1a4971,_0x5936a2)=>{_0xdbd2a9&&_0x5936a2['forEach'](_0x254df4=>{const _0x79ade1=a0_0x2bf6;_0xdbd2a9[_0x254df4]!==void 0x0&&(_0x1a4971[_0x79ade1(0x231)+_0x254df4]=_0xdbd2a9[_0x254df4]);});},_0x1380a7={};if(_0x574dad(0x106)in _0x4d37cb&&(this[_0x574dad(0xed)][_0x574dad(0x2c1)](this['instanceName']+'\x20('+this[_0x574dad(0x2b1)][_0x574dad(0x3f4)]+_0x574dad(0x5e0)+_0x4d37cb[_0x574dad(0x778)]),_0x4d37cb[_0x574dad(0x106)]=_0x4d37cb[_0x574dad(0x106)]===0x0?null:-0x1,await this[_0x574dad(0x1f7)][_0x574dad(0x3ce)]({'mute':_0x4d37cb[_0x574dad(0x106)]},_0x4d37cb[_0x574dad(0x778)]),_0x1380a7['muteEndTime']=Number(_0x4d37cb[_0x574dad(0x106)])),_0x3d5e57&&(_0x5b76b2(_0x3d5e57,_0x1380a7,[_0x574dad(0x10d),_0x574dad(0x289),_0x574dad(0x614),_0x574dad(0x23d),_0x574dad(0x16f),_0x574dad(0x1d5),'tags','atendimentoAberto','responsavelid',_0x574dad(0x39b),_0x574dad(0x528)]),Array['isArray'](_0x3d5e57[_0x574dad(0x300)])&&(_0x1380a7['leadInfo.customFields']=_0x3d5e57[_0x574dad(0x300)][_0x574dad(0x3f6)](_0x1c340a=>({'_id':_0x1c340a['_id'],'value':_0x1c340a['value']}))),_0x4d37cb[_0x574dad(0x4df)]['etiquetas']!==void 0x0)){let _0x2b5f00=await this[_0x574dad(0x91)][_0x574dad(0x1ae)]['find']({'where':{}},this[_0x574dad(0x2b1)]['wuid']),_0x31cd06=new Set(_0x4d37cb['leadInfo'][_0x574dad(0x39b)]||[]),_0x45cf6f=new Set(_0x4d37cb[_0x574dad(0x4df)][_0x574dad(0x39b)]),_0x575094=new Set(_0x2b5f00['map'](_0x5a67c9=>_0x5a67c9['_id'])),_0x21b531=[..._0x45cf6f][_0x574dad(0x57a)](_0x44a882=>!_0x31cd06[_0x574dad(0x485)](_0x44a882)&&_0x575094['has'](_0x44a882)),_0xd072dc=[..._0x31cd06][_0x574dad(0x57a)](_0x4d356e=>!_0x45cf6f[_0x574dad(0x485)](_0x4d356e));if(_0x1380a7[_0x574dad(0x49b)]=[..._0x31cd06],_0xfc2d4d&&!_0xfc2d4d[_0x574dad(0x371)]){for(let _0x5496f8 of _0x21b531)await this[_0x574dad(0x329)](_0x5496f8,_0x4d37cb[_0x574dad(0x778)]),_0x31cd06[_0x574dad(0x722)](_0x5496f8);for(let _0x60584 of _0xd072dc)await this['RemoveChatLabel'](_0x60584,_0x4d37cb[_0x574dad(0x778)]),_0x31cd06[_0x574dad(0x22c)](_0x60584);}}if(_0x4d37cb[_0x574dad(0x667)]!==void 0x0&&(_0x1380a7['unreadcount']=Number(_0x4d37cb[_0x574dad(0x667)])),Object[_0x574dad(0x794)](_0x1380a7)['length']===0x0)throw new Error(_0x574dad(0x38f));let _0x17f6f0=await this[_0x574dad(0x91)][_0x574dad(0x3d9)][_0x574dad(0x4b3)]({'where':{'_id':_0x4d37cb[_0x574dad(0x778)]}},_0x1380a7,this[_0x574dad(0x2b1)][_0x574dad(0x3f4)]);return _0x17f6f0&&j(this[_0x574dad(0x88)],_0x574dad(0x758),{'chat':_0x17f6f0}),_0x17f6f0?(this[_0x574dad(0xed)][_0x574dad(0x2c1)](this[_0x574dad(0x88)]+'\x20('+this[_0x574dad(0x2b1)][_0x574dad(0x3f4)]+_0x574dad(0x28e)+JSON[_0x574dad(0x5cc)](_0x17f6f0,null,0x2)),_0x17f6f0):{'message':'Nenhum\x20chat\x20encontrado\x20para\x20editar.'};}catch(_0x5464d7){let _0xb66868=_0x574dad(0x66e),_0x1ea527=_0x5464d7 instanceof Error?_0x5464d7['message']:typeof _0x5464d7==_0x574dad(0xde)?JSON['stringify'](_0x5464d7):_0x5464d7,_0x481090=_0xb66868+':\x20'+_0x1ea527;throw this['logger'][_0x574dad(0x2fb)](this['instanceName']+'\x20('+this[_0x574dad(0x2b1)][_0x574dad(0x3f4)]+_0x574dad(0x28e)+_0x481090),new m(_0x481090);}}async[a0_0x46df1a(0x329)](_0x56becd,_0x1d6201){const _0x158a31=a0_0x46df1a;try{await this['client']['addChatLabel'](_0x1d6201,_0x56becd),this[_0x158a31(0xed)][_0x158a31(0x459)](this[_0x158a31(0x88)]+'\x20('+this[_0x158a31(0x2b1)][_0x158a31(0x3f4)]+'):\x20Label\x20'+_0x56becd+'\x20adicionado\x20ao\x20chat\x20'+_0x1d6201+_0x158a31(0x19d));}catch(_0x2e4567){this['logger'][_0x158a31(0x2fb)]('Erro\x20ao\x20adicionar\x20label\x20'+_0x56becd+'\x20ao\x20chat\x20'+_0x1d6201+':\x20'+_0x2e4567);}}async[a0_0x46df1a(0x6a5)](_0x288f73,_0x583add){const _0x2213f0=a0_0x46df1a;try{await this[_0x2213f0(0x1f7)][_0x2213f0(0x74f)](_0x583add,_0x288f73),this['logger'][_0x2213f0(0x459)](this[_0x2213f0(0x88)]+'\x20('+this[_0x2213f0(0x2b1)][_0x2213f0(0x3f4)]+_0x2213f0(0x751)+_0x288f73+_0x2213f0(0x78b)+_0x583add+_0x2213f0(0x19d));}catch(_0x471d57){this[_0x2213f0(0xed)][_0x2213f0(0x2fb)](_0x2213f0(0x6b0)+_0x288f73+_0x2213f0(0x6f2)+_0x583add+':\x20'+_0x471d57);}}async[a0_0x46df1a(0x275)](_0x49ea56){const _0x5a701d=a0_0x46df1a;try{let _0x126190=await this[_0x5a701d(0x91)][_0x5a701d(0x335)][_0x5a701d(0x6cc)](this[_0x5a701d(0x2b1)]['wuid']),_0x55750d=_0x49ea56[_0x5a701d(0x778)]?_0x126190[_0x5a701d(0x4fa)][_0x5a701d(0x73d)](_0x3bc691=>_0x3bc691[_0x5a701d(0x778)]===_0x49ea56[_0x5a701d(0x778)]):-0x1;if(_0x49ea56[_0x5a701d(0x22c)]&&_0x55750d>-0x1)_0x126190['agents']['splice'](_0x55750d,0x1);else{if(_0x55750d>-0x1){let _0x5f1f45=_0x126190['agents'][_0x55750d];_0x49ea56[_0x5a701d(0x4f7)]&&(_0x5f1f45[_0x5a701d(0x4f7)]=_0x49ea56[_0x5a701d(0x4f7)]),_0x49ea56[_0x5a701d(0x11d)]&&(_0x5f1f45[_0x5a701d(0x11d)]=_0x49ea56['name']),_0x49ea56[_0x5a701d(0x614)]&&(_0x5f1f45[_0x5a701d(0x614)]=_0x49ea56['email']),_0x49ea56[_0x5a701d(0x6f4)]&&(_0x5f1f45[_0x5a701d(0x6f4)]=_0x49ea56[_0x5a701d(0x6f4)]);}else _0x126190['agents'][_0x5a701d(0x45f)]({'_id':_0x49ea56[_0x5a701d(0x778)]||new me[(_0x5a701d(0x2fa))]['Types'][(_0x5a701d(0x1d7))]()[_0x5a701d(0x49e)](),'fone':_0x49ea56['fone'],'name':_0x49ea56['name'],'email':_0x49ea56[_0x5a701d(0x614)],'role':_0x49ea56[_0x5a701d(0x6f4)]});}let _0xf4a09a={'agents':_0x126190[_0x5a701d(0x4fa)]},_0x94e31a=await this[_0x5a701d(0x91)]['automateSystem']['update'](_0xf4a09a,this[_0x5a701d(0x2b1)][_0x5a701d(0x3f4)]);return this[_0x5a701d(0x6a0)]=_0x94e31a,this[_0x5a701d(0xed)][_0x5a701d(0x2c1)](this[_0x5a701d(0x88)]+'\x20('+this['instance'][_0x5a701d(0x3f4)]+'):\x20alterando\x20this.AutomateSystem'),this['logger'][_0x5a701d(0x2c1)](this[_0x5a701d(0x88)]+'\x20('+this[_0x5a701d(0x2b1)]['wuid']+_0x5a701d(0x28e)+this['AutomateSystem']),_0x94e31a;}catch(_0x1c9892){let _0x7d1f8e=_0x5a701d(0x440),_0x3a3d35=_0x1c9892 instanceof Error?_0x1c9892[_0x5a701d(0x64f)]:typeof _0x1c9892=='object'?JSON[_0x5a701d(0x5cc)](_0x1c9892):_0x1c9892,_0x1aaced=_0x7d1f8e+':\x20'+_0x3a3d35;throw this[_0x5a701d(0xed)][_0x5a701d(0x2fb)](this[_0x5a701d(0x88)]+'\x20('+this[_0x5a701d(0x2b1)]['wuid']+_0x5a701d(0x28e)+_0x1aaced),new m(_0x1aaced);}}async[a0_0x46df1a(0x2f0)](_0x584645){const _0x3a9a1a=a0_0x46df1a;try{let _0xf0be48=await this[_0x3a9a1a(0x91)][_0x3a9a1a(0x335)]['findOrCreate'](this[_0x3a9a1a(0x2b1)][_0x3a9a1a(0x3f4)]),_0x28089c=_0x584645['_id']?_0xf0be48['customFields'][_0x3a9a1a(0x73d)](_0x4df4bf=>_0x4df4bf[_0x3a9a1a(0x778)]===_0x584645[_0x3a9a1a(0x778)]):-0x1,_0x28e2fb=!0x1,_0x2c5db9=_0xf0be48[_0x3a9a1a(0x300)]['some'](_0x4c4921=>_0x4c4921[_0x3a9a1a(0x3d5)]===_0x584645[_0x3a9a1a(0x3d5)]);if(_0x584645[_0x3a9a1a(0x22c)]&&_0x28089c>-0x1)_0xf0be48[_0x3a9a1a(0x300)]['splice'](_0x28089c,0x1),_0x28e2fb=!0x0;else{if(_0x28089c>-0x1){if(_0xf0be48[_0x3a9a1a(0x300)][_0x3a9a1a(0x6ee)](_0x315498=>_0x315498['name']===_0x584645[_0x3a9a1a(0x11d)]&&_0x315498['_id']!==_0x584645[_0x3a9a1a(0x778)]))throw new Error(_0x3a9a1a(0x174));let _0x464cf3=_0xf0be48[_0x3a9a1a(0x300)][_0x28089c];_0x584645[_0x3a9a1a(0x3d5)]&&(_0x2c5db9||!Number[_0x3a9a1a(0x763)](_0x584645[_0x3a9a1a(0x3d5)]))&&(_0x464cf3[_0x3a9a1a(0x3d5)]=_0x584645[_0x3a9a1a(0x3d5)],_0x28e2fb=!0x0),_0x584645[_0x3a9a1a(0x11d)]&&(_0x464cf3[_0x3a9a1a(0x11d)]=_0x584645['name']);}else{if(_0xf0be48[_0x3a9a1a(0x300)][_0x3a9a1a(0x6ee)](_0x57de02=>_0x57de02[_0x3a9a1a(0x11d)]===_0x584645[_0x3a9a1a(0x11d)]&&_0x57de02[_0x3a9a1a(0x778)]!==_0x584645[_0x3a9a1a(0x778)]))throw new Error(_0x3a9a1a(0x174));_0xf0be48['customFields']['push']({'_id':_0x584645['_id']||new me['default']['Types'][(_0x3a9a1a(0x1d7))]()[_0x3a9a1a(0x49e)](),'order':_0x584645[_0x3a9a1a(0x3d5)],'name':_0x584645[_0x3a9a1a(0x11d)]}),_0x28e2fb=!0x0;}}if(_0x28e2fb){_0xf0be48[_0x3a9a1a(0x300)][_0x3a9a1a(0x170)]((_0x2994b1,_0x9b28b3)=>_0x2994b1[_0x3a9a1a(0x3d5)]>_0x9b28b3['order']?0x1:_0x9b28b3['order']>_0x2994b1[_0x3a9a1a(0x3d5)]?-0x1:0x0);for(let _0x48a9a7=0x0;_0x48a9a7<_0xf0be48[_0x3a9a1a(0x300)][_0x3a9a1a(0x5e9)];_0x48a9a7++)_0xf0be48[_0x3a9a1a(0x300)][_0x48a9a7][_0x3a9a1a(0x3d5)]=_0x48a9a7+0x1;}let _0x22fd0a=await this[_0x3a9a1a(0x91)]['automateSystem'][_0x3a9a1a(0x75)](_0xf0be48,this[_0x3a9a1a(0x2b1)][_0x3a9a1a(0x3f4)]);return this['AutomateSystem']=_0x22fd0a,this[_0x3a9a1a(0xed)][_0x3a9a1a(0x2c1)](this['instanceName']+'\x20('+this[_0x3a9a1a(0x2b1)][_0x3a9a1a(0x3f4)]+_0x3a9a1a(0x5c9)),this['logger'][_0x3a9a1a(0x2c1)](this[_0x3a9a1a(0x88)]+'\x20('+this[_0x3a9a1a(0x2b1)][_0x3a9a1a(0x3f4)]+_0x3a9a1a(0x28e)+this['AutomateSystem']),_0x22fd0a;}catch(_0x316f5c){let _0x19a8f7='Erro\x20ao\x20tentar\x20updateCustomFields',_0x4dfac4=_0x316f5c instanceof Error?_0x316f5c[_0x3a9a1a(0x64f)]:typeof _0x316f5c=='object'?JSON[_0x3a9a1a(0x5cc)](_0x316f5c):_0x316f5c,_0x38fb1a=_0x19a8f7+':\x20'+_0x4dfac4;throw this[_0x3a9a1a(0xed)]['error'](this[_0x3a9a1a(0x88)]+'\x20('+this[_0x3a9a1a(0x2b1)]['wuid']+_0x3a9a1a(0x28e)+_0x38fb1a),new m(_0x38fb1a);}}async[a0_0x46df1a(0x696)](_0x11acaf){const _0x15b996=a0_0x46df1a;try{let _0x4790d4=await this[_0x15b996(0x91)][_0x15b996(0x335)][_0x15b996(0x6cc)](this[_0x15b996(0x2b1)][_0x15b996(0x3f4)]),_0x276501=_0x4790d4?.[_0x15b996(0x28a)]?.[_0x15b996(0x73d)](_0xedf8f8=>_0xedf8f8[_0x15b996(0x778)]===_0x11acaf?.[_0x15b996(0x778)]);if(_0x11acaf?.['delete'])_0x276501>-0x1&&_0x4790d4?.[_0x15b996(0x28a)]?.[_0x15b996(0x1cd)](_0x276501,0x1);else{if(_0x276501>-0x1){let _0x59fba8=_0x4790d4[_0x15b996(0x28a)][_0x276501];_0x59fba8[_0x15b996(0x3d5)]=_0x11acaf?.[_0x15b996(0x3d5)]||_0x59fba8['order'],_0x59fba8[_0x15b996(0x424)]=_0x11acaf?.['command']||_0x59fba8[_0x15b996(0x424)],_0x59fba8[_0x15b996(0x64f)]=_0x11acaf?.['message']||_0x59fba8[_0x15b996(0x64f)];}else{let _0x1a7f7a={'_id':_0x11acaf?.['_id']||new me['default'][(_0x15b996(0x282))][(_0x15b996(0x1d7))]()['toString'](),'order':_0x11acaf?.[_0x15b996(0x3d5)],'command':_0x11acaf?.[_0x15b996(0x424)],'message':_0x11acaf?.[_0x15b996(0x64f)]};_0x4790d4?.[_0x15b996(0x28a)]?.[_0x15b996(0x45f)](_0x1a7f7a);}}_0x4790d4?.[_0x15b996(0x28a)]?.['sort']((_0xa41b10,_0x99e14d)=>_0xa41b10[_0x15b996(0x3d5)]-_0x99e14d[_0x15b996(0x3d5)]);let _0xf0c12e=await this['repository'][_0x15b996(0x335)][_0x15b996(0x75)](_0x4790d4,this[_0x15b996(0x2b1)][_0x15b996(0x3f4)]);return this[_0x15b996(0x6a0)]=_0xf0c12e,this['logger'][_0x15b996(0x2c1)](this[_0x15b996(0x88)]+'\x20('+this[_0x15b996(0x2b1)][_0x15b996(0x3f4)]+'):\x20debug\x20alterando\x20this.AutomateSystem'),_0xf0c12e;}catch(_0x4d34ec){let _0x2f51db=_0x15b996(0x5ca),_0x3d4ac8=_0x4d34ec instanceof Error?_0x4d34ec[_0x15b996(0x64f)]:typeof _0x4d34ec==_0x15b996(0xde)?JSON[_0x15b996(0x5cc)](_0x4d34ec):_0x4d34ec,_0x469ed0=_0x2f51db+':\x20'+_0x3d4ac8;throw this[_0x15b996(0xed)][_0x15b996(0x2fb)](this[_0x15b996(0x88)]+'\x20('+this['instance'][_0x15b996(0x3f4)]+'):\x20'+_0x469ed0),new m(_0x469ed0);}}async[a0_0x46df1a(0x40f)](_0x40e4fa){const _0x1dc3be=a0_0x46df1a;try{let _0x3cb0b5=await this['repository'][_0x1dc3be(0x335)]['findOrCreate'](this[_0x1dc3be(0x2b1)][_0x1dc3be(0x3f4)]);if(!_0x3cb0b5)throw new Error(_0x1dc3be(0x577));let _0x2948e1={'_id':_0x3cb0b5['_id'],'flowConfig':{'enabled':_0x40e4fa[_0x1dc3be(0x4d5)]??_0x3cb0b5[_0x1dc3be(0x79)][_0x1dc3be(0x4d5)],'ignoreGroups':_0x40e4fa['ignoreGroups']??_0x3cb0b5['flowConfig']['ignoreGroups'],'stopConversation':_0x40e4fa['stopConversation'][_0x1dc3be(0x7a1)]()??_0x3cb0b5[_0x1dc3be(0x79)]['stopConversation']['trim'](),'stopMinutes':_0x40e4fa[_0x1dc3be(0x9b)]??_0x3cb0b5[_0x1dc3be(0x79)][_0x1dc3be(0x9b)],'stopWhenYouSendMsg':_0x40e4fa[_0x1dc3be(0x344)]??_0x3cb0b5[_0x1dc3be(0x79)][_0x1dc3be(0x344)]}},_0x12bd28=await this['repository'][_0x1dc3be(0x335)][_0x1dc3be(0x75)](_0x2948e1,this[_0x1dc3be(0x2b1)][_0x1dc3be(0x3f4)]);return this[_0x1dc3be(0x6a0)]=_0x12bd28,this['logger']['verbose'](this[_0x1dc3be(0x88)]+'\x20('+this[_0x1dc3be(0x2b1)][_0x1dc3be(0x3f4)]+'):\x20alterando\x20this.AutomateSystem'),this[_0x1dc3be(0xed)][_0x1dc3be(0x2c1)](this[_0x1dc3be(0x88)]+'\x20('+this[_0x1dc3be(0x2b1)]['wuid']+_0x1dc3be(0x28e)+this[_0x1dc3be(0x6a0)]),setTimeout(()=>this[_0x1dc3be(0x538)](),0x7d0),_0x12bd28;}catch(_0x42fd38){let _0x30511f='Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos',_0x527ed8=_0x42fd38 instanceof Error?_0x42fd38['message']:typeof _0x42fd38==_0x1dc3be(0xde)?JSON[_0x1dc3be(0x5cc)](_0x42fd38):_0x42fd38,_0x107c9c=_0x30511f+':\x20'+_0x527ed8;throw this[_0x1dc3be(0xed)]['error'](this[_0x1dc3be(0x88)]+'\x20('+this['instance'][_0x1dc3be(0x3f4)]+_0x1dc3be(0x28e)+_0x107c9c),new m(_0x107c9c);}}async[a0_0x46df1a(0x5b4)](){const _0x40d5a0=a0_0x46df1a;try{let _0xc801f0=await this[_0x40d5a0(0x91)][_0x40d5a0(0x335)][_0x40d5a0(0x6cc)](this[_0x40d5a0(0x2b1)][_0x40d5a0(0x3f4)]);return this['AutomateSystem']=_0xc801f0,this[_0x40d5a0(0xed)][_0x40d5a0(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0x40d5a0(0x3f4)]+_0x40d5a0(0x486)),this[_0x40d5a0(0xed)][_0x40d5a0(0x2c1)](this[_0x40d5a0(0x6a0)]),_0xc801f0;}catch(_0x13bf6b){let _0x398d7e='Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem',_0x4451f0=_0x13bf6b instanceof Error?_0x13bf6b[_0x40d5a0(0x64f)]:typeof _0x13bf6b=='object'?JSON[_0x40d5a0(0x5cc)](_0x13bf6b):_0x13bf6b,_0x2e5633=_0x398d7e+':\x20'+_0x4451f0;throw this[_0x40d5a0(0xed)][_0x40d5a0(0x2fb)](this[_0x40d5a0(0x88)]+'\x20('+this[_0x40d5a0(0x2b1)][_0x40d5a0(0x3f4)]+_0x40d5a0(0x28e)+_0x2e5633),new m(_0x2e5633);}}async[a0_0x46df1a(0x352)](){const _0x497c12=a0_0x46df1a;this[_0x497c12(0x2b1)]['ScheduleMessage'][_0x497c12(0x100)]&&clearTimeout(this[_0x497c12(0x2b1)]['ScheduleMessage'][_0x497c12(0x100)]),this[_0x497c12(0x2b1)]['ScheduleMessage'][_0x497c12(0x100)]=setTimeout(()=>{const _0x28b437=_0x497c12;this[_0x28b437(0x527)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x46df1a(0x527)](){const _0xf0828f=a0_0x46df1a;Date['now']()-this[_0xf0828f(0x2b1)][_0xf0828f(0x277)][_0xf0828f(0x75a)]>=0x1d4c0&&(this[_0xf0828f(0xed)][_0xf0828f(0x2c1)](this[_0xf0828f(0x88)]+'\x20('+this[_0xf0828f(0x2b1)][_0xf0828f(0x3f4)]+'):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.'),this[_0xf0828f(0x2b1)][_0xf0828f(0x277)][_0xf0828f(0x5c0)]=null,this['instance'][_0xf0828f(0x277)][_0xf0828f(0x75a)]=0x0,this[_0xf0828f(0x2b1)][_0xf0828f(0x277)][_0xf0828f(0xee)]=0x0,await this[_0xf0828f(0x538)]());}async[a0_0x46df1a(0x538)](){const _0x491e49=a0_0x46df1a;await this[_0x491e49(0x60d)]();let _0x35a9b1=()=>{const _0x93e8ca=_0x491e49;this['logger'][_0x93e8ca(0x2c1)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x93e8ca(0x7b4)+this[_0x93e8ca(0x2b1)][_0x93e8ca(0x277)][_0x93e8ca(0x5c0)]+'\x20saindo\x20da\x20função');},_0x344e64=async()=>{const _0xbe8f92=_0x491e49;this['logger'][_0xbe8f92(0x2c1)](this[_0xbe8f92(0x88)]+'\x20('+this['instance']['wuid']+'):\x20Procurando\x20mensagens\x20para\x20envio');let _0x2122d8=Date[_0xbe8f92(0x72)]()-0xc*0x3c*0x3c*0x3e8,_0x4373dd={'where':{'status':{'$in':[_0xbe8f92(0x51a),_0xbe8f92(0x578)]},'$or':[{'when':{'$lte':Date['now'](),'$gte':_0x2122d8}},{'when':0x0}]}};return await this['repository']['scheduleMessage'][_0xbe8f92(0x336)](_0x4373dd,this['instance']['wuid']);},_0x580628=async _0x5ca277=>{const _0x1b75a5=_0x491e49;let _0x3ceb62=Math[_0x1b75a5(0x54d)](Math['random']()*0x1389)+0xbb8;for(let _0x191517 of _0x5ca277){let _0x1ad9cd={'_id':_0x191517['_id'],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x1b75a5(0x72)]()-0x2710}}]},_0x3448c1={'startSend':Date[_0x1b75a5(0x72)]()};if(!await this[_0x1b75a5(0x91)]['scheduleMessage'][_0x1b75a5(0x4b3)](_0x1ad9cd,_0x3448c1,this['instance'][_0x1b75a5(0x3f4)]))return;if(!this[_0x1b75a5(0x2b1)][_0x1b75a5(0x277)]['isConnected']){this[_0x1b75a5(0xed)][_0x1b75a5(0x2c1)](this[_0x1b75a5(0x88)]+'\x20('+this[_0x1b75a5(0x2b1)][_0x1b75a5(0x3f4)]+_0x1b75a5(0x2f9));break;}let _0x3907da=(_0x191517[_0x1b75a5(0x229)]||[])[_0x1b75a5(0x170)]((_0x1fca51,_0x53a39a)=>(_0x1fca51[_0x1b75a5(0x3d5)]??0x0)-(_0x53a39a[_0x1b75a5(0x3d5)]??0x0));for(let _0x45de3a of _0x3907da){if(await this[_0x1b75a5(0x352)](),this['instance'][_0x1b75a5(0x277)][_0x1b75a5(0x75a)]=Date[_0x1b75a5(0x72)](),this[_0x1b75a5(0x2b1)][_0x1b75a5(0x277)][_0x1b75a5(0x35c)]===_0x45de3a[_0x1b75a5(0x778)]){this[_0x1b75a5(0xed)]['error'](this[_0x1b75a5(0x88)]+'\x20('+this[_0x1b75a5(0x2b1)][_0x1b75a5(0x3f4)]+_0x1b75a5(0x532)+_0x45de3a['_id']+_0x1b75a5(0x3cf));continue;}if(this[_0x1b75a5(0x2b1)][_0x1b75a5(0x277)][_0x1b75a5(0x35c)]=_0x45de3a['_id'],_0x45de3a[_0x1b75a5(0x6fc)]){this[_0x1b75a5(0xed)][_0x1b75a5(0x2c1)](this[_0x1b75a5(0x88)]+'\x20('+this['instance'][_0x1b75a5(0x3f4)]+_0x1b75a5(0x4a5)+_0x45de3a[_0x1b75a5(0x75b)]+_0x1b75a5(0x2e1));continue;}if(!this[_0x1b75a5(0x2b1)][_0x1b75a5(0x277)][_0x1b75a5(0x4f2)]){this['logger'][_0x1b75a5(0x2c1)](this[_0x1b75a5(0x88)]+'\x20('+this[_0x1b75a5(0x2b1)][_0x1b75a5(0x3f4)]+'):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.');break;}if(!this[_0x1b75a5(0x2b1)][_0x1b75a5(0x277)][_0x1b75a5(0x5c0)]){this[_0x1b75a5(0xed)][_0x1b75a5(0x2c1)](this[_0x1b75a5(0x88)]+'\x20('+this[_0x1b75a5(0x2b1)][_0x1b75a5(0x3f4)]+_0x1b75a5(0x62c)+_0x191517[_0x1b75a5(0x778)]+_0x1b75a5(0x1fe));break;}if(_0x45de3a[_0x1b75a5(0x1c0)]===_0x1b75a5(0xa2)&&!this[_0x1b75a5(0x6a0)]?.['flowConfig'][_0x1b75a5(0x4d5)]){this[_0x1b75a5(0xed)][_0x1b75a5(0x2fb)](this[_0x1b75a5(0x88)]+'\x20('+this[_0x1b75a5(0x2b1)][_0x1b75a5(0x3f4)]+_0x1b75a5(0x281));break;}let _0x3c9709={'idControl':_0x45de3a[_0x1b75a5(0x778)],'remoteJid':_0x45de3a[_0x1b75a5(0x75b)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date[_0x1b75a5(0x72)]()},_0xaeb0ac=null;try{this['logger'][_0x1b75a5(0x2c1)](this[_0x1b75a5(0x88)]+'\x20('+this[_0x1b75a5(0x2b1)][_0x1b75a5(0x3f4)]+_0x1b75a5(0x604)+_0x45de3a[_0x1b75a5(0x75b)]);let _0x4c4a9d=await this['SendScheduleMessage'](_0x45de3a[_0x1b75a5(0x75b)],_0x45de3a);_0x3c9709[_0x1b75a5(0x2fb)]=_0x4c4a9d[_0x1b75a5(0x2fb)],_0x3c9709['id']=_0x4c4a9d['error']?null:_0x4c4a9d['id'],_0x3c9709['error_log']=_0x4c4a9d[_0x1b75a5(0x2fb)]?_0x4c4a9d[_0x1b75a5(0x5c8)]?_0x4c4a9d[_0x1b75a5(0x5c8)]['toString']():'':null;let _0x2ce1a8=_0x191517[_0x1b75a5(0x229)]['findIndex'](_0x5a155d=>_0x5a155d['_id']===_0x45de3a[_0x1b75a5(0x778)]);_0x2ce1a8!==-0x1&&(_0x191517['messages'][_0x2ce1a8][_0x1b75a5(0x6fc)]=!0x0);let _0x5c34b4={'$push':{'messagesSend':_0x3c9709},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x4a4bcf=[{'elem._id':_0x45de3a[_0x1b75a5(0x778)]}];if(this['logger'][_0x1b75a5(0x2c1)](this[_0x1b75a5(0x88)]+'\x20('+this[_0x1b75a5(0x2b1)][_0x1b75a5(0x3f4)]+_0x1b75a5(0x57f)+_0x45de3a[_0x1b75a5(0x778)]),_0xaeb0ac=await this[_0x1b75a5(0x91)][_0x1b75a5(0x1d9)][_0x1b75a5(0x4b3)]({'_id':_0x191517[_0x1b75a5(0x778)]},_0x5c34b4,this[_0x1b75a5(0x2b1)][_0x1b75a5(0x3f4)],{'arrayFilters':_0x4a4bcf}),_0x4c4a9d['error']){this[_0x1b75a5(0xed)][_0x1b75a5(0x2fb)](this[_0x1b75a5(0x88)]+'\x20('+this[_0x1b75a5(0x2b1)][_0x1b75a5(0x3f4)]+_0x1b75a5(0x673)+_0x4c4a9d['detail']);continue;}let _0x38dafd=this['getDelay'](_0x191517[_0x1b75a5(0x44c)],_0x191517[_0x1b75a5(0x6fa)]);await this[_0x1b75a5(0x53d)](_0x38dafd);}catch(_0x1741b1){this[_0x1b75a5(0xed)][_0x1b75a5(0x2fb)](this[_0x1b75a5(0x88)]+'\x20('+this['instance'][_0x1b75a5(0x3f4)]+'):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20'+_0x45de3a[_0x1b75a5(0x75b)]+':\x20'+(_0x1741b1 instanceof Error?_0x1741b1[_0x1b75a5(0x64f)]:JSON[_0x1b75a5(0x5cc)](_0x1741b1,null,0x2))),_0x3c9709[_0x1b75a5(0x2fb)]=!0x0,_0x3c9709['error_log']=_0x1741b1[_0x1b75a5(0x64f)];let _0x1ecda0=_0x191517[_0x1b75a5(0x229)][_0x1b75a5(0x73d)](_0x5c3884=>_0x5c3884[_0x1b75a5(0x778)]===_0x45de3a[_0x1b75a5(0x778)]);_0x1ecda0!==-0x1&&(_0x191517[_0x1b75a5(0x229)][_0x1ecda0][_0x1b75a5(0x6fc)]=!0x0);let _0x43d322={'$push':{'messagesSend':_0x3c9709},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x9b4f9d=[{'elem._id':_0x45de3a[_0x1b75a5(0x778)]}];this[_0x1b75a5(0xed)][_0x1b75a5(0x2c1)](this[_0x1b75a5(0x88)]+'\x20('+this[_0x1b75a5(0x2b1)]['wuid']+_0x1b75a5(0x5db)+_0x45de3a['_id']),_0xaeb0ac=await this[_0x1b75a5(0x91)][_0x1b75a5(0x1d9)][_0x1b75a5(0x4b3)]({'_id':_0x191517[_0x1b75a5(0x778)]},_0x43d322,this[_0x1b75a5(0x2b1)][_0x1b75a5(0x3f4)],{'arrayFilters':_0x9b4f9d});}}let _0x156436=await this[_0x1b75a5(0x91)][_0x1b75a5(0x1d9)][_0x1b75a5(0x498)](_0x191517[_0x1b75a5(0x778)],this['instance'][_0x1b75a5(0x3f4)]);if(_0x156436[_0x1b75a5(0x229)][_0x1b75a5(0x343)](_0x1b452b=>_0x1b452b['triedToSend'])&&_0x156436['status']!==_0x1b75a5(0x128)){this[_0x1b75a5(0x2b1)][_0x1b75a5(0x277)][_0x1b75a5(0x35c)]=null;let _0x28ae95={'$set':{'status':_0x1b75a5(0x24a)}};await this['repository'][_0x1b75a5(0x1d9)][_0x1b75a5(0x160)](_0x156436[_0x1b75a5(0x778)],_0x28ae95,this[_0x1b75a5(0x2b1)]['wuid']);}await new Promise(_0x1000dd=>setTimeout(_0x1000dd,_0x3ceb62));}},_0x27755f=async()=>{const _0x5c0d1b=_0x491e49;let _0x1e293c={'where':{'status':_0x5c0d1b(0x51a),'when':{'$gt':Date[_0x5c0d1b(0x72)]()}}},_0x16e531=await this[_0x5c0d1b(0x91)][_0x5c0d1b(0x1d9)]['findOne'](_0x1e293c,this[_0x5c0d1b(0x2b1)][_0x5c0d1b(0x3f4)]);_0x16e531&&_0x16e531[_0x5c0d1b(0x736)]-Date[_0x5c0d1b(0x72)]()<=0x5265c00?this[_0x5c0d1b(0x2b1)][_0x5c0d1b(0x277)][_0x5c0d1b(0xee)]=_0x16e531[_0x5c0d1b(0x736)]-Date['now']():this[_0x5c0d1b(0x2b1)][_0x5c0d1b(0x277)][_0x5c0d1b(0xee)]=(0x3c+Math[_0x5c0d1b(0x54d)](Math[_0x5c0d1b(0x259)]()*0x3c))*0x3c*0x3e8,this[_0x5c0d1b(0x2b1)][_0x5c0d1b(0x277)][_0x5c0d1b(0xee)]=Math[_0x5c0d1b(0x30b)](this[_0x5c0d1b(0x2b1)]['ScheduleMessage']['delayMessage'],0x1*0x2*0x3e8);let _0x2825b4=Math[_0x5c0d1b(0x69d)](this[_0x5c0d1b(0x2b1)][_0x5c0d1b(0x277)][_0x5c0d1b(0xee)]/0xea60);if(_0x16e531){let _0x1c6f2e=new Date(_0x16e531['when'])[_0x5c0d1b(0x95)]();this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x5c0d1b(0x2b1)][_0x5c0d1b(0x3f4)]+_0x5c0d1b(0x600)+_0x1c6f2e+_0x5c0d1b(0x44d)+_0x2825b4+_0x5c0d1b(0x52d));}else this[_0x5c0d1b(0xed)][_0x5c0d1b(0x2c1)](this[_0x5c0d1b(0x88)]+'\x20('+this[_0x5c0d1b(0x2b1)]['wuid']+_0x5c0d1b(0x186)+_0x2825b4+_0x5c0d1b(0x52d));setTimeout(()=>this['scheduleNextCheck'](),this[_0x5c0d1b(0x2b1)]['ScheduleMessage'][_0x5c0d1b(0xee)]);};if(this[_0x491e49(0x2b1)]['ScheduleMessage']['processingGroup_id']){await this[_0x491e49(0x352)](),_0x35a9b1();return;}if(!this[_0x491e49(0x2b1)][_0x491e49(0x277)][_0x491e49(0x4f2)]){this[_0x491e49(0xed)]['verbose'](this[_0x491e49(0x88)]+'\x20('+this[_0x491e49(0x2b1)][_0x491e49(0x3f4)]+_0x491e49(0x4a4)),this[_0x491e49(0x2b1)][_0x491e49(0x277)][_0x491e49(0x5c0)]=null,this[_0x491e49(0x2b1)][_0x491e49(0x277)][_0x491e49(0x75a)]=0x0,this['instance'][_0x491e49(0x277)][_0x491e49(0xee)]=0x0,this['instance'][_0x491e49(0x277)]['lastMessage_id']=null;return;}try{let _0x3e7770=await _0x344e64();_0x3e7770['length']===0x0?this[_0x491e49(0xed)]['verbose'](this['instanceName']+'\x20('+this[_0x491e49(0x2b1)][_0x491e49(0x3f4)]+'):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.'):(this[_0x491e49(0x2b1)]['ScheduleMessage'][_0x491e49(0x5c0)]=_0x3e7770[0x0][_0x491e49(0x778)],await _0x580628(_0x3e7770)),await _0x27755f(),this['instance'][_0x491e49(0x277)]['processingGroup_id']=null,this[_0x491e49(0x2b1)]['ScheduleMessage'][_0x491e49(0x35c)]=null;}catch(_0x217015){this['logger'][_0x491e49(0x2fb)](_0x491e49(0x17c)+(_0x217015 instanceof Error?_0x217015[_0x491e49(0x64f)]:JSON['stringify'](_0x217015,null,0x2)));}}[a0_0x46df1a(0x52a)](_0x2c5129,_0x2649f4){const _0x577f9f=a0_0x46df1a;return _0x2c5129=Math[_0x577f9f(0x30b)](0.5,_0x2c5129),_0x2649f4=Math[_0x577f9f(0x1a6)](Math[_0x577f9f(0x30b)](0x3,_0x2649f4),0x78),Math[_0x577f9f(0x54d)](Math[_0x577f9f(0x259)]()*(_0x2649f4-_0x2c5129+0x1)+_0x2c5129)*0x3e8;}[a0_0x46df1a(0x53d)](_0x165c5b){return new Promise(_0x5b122b=>setTimeout(_0x5b122b,_0x165c5b));}async[a0_0x46df1a(0x43a)](_0xda1162){const _0x404ec5=a0_0x46df1a;if(!this[_0x404ec5(0x6a0)]&&(await this[_0x404ec5(0x5b4)](),!this[_0x404ec5(0x6a0)]))return null;_0xda1162=this['createJid'](_0xda1162);let _0x68e352=await this[_0x404ec5(0x91)]['chat'][_0x404ec5(0x404)]({'where':{'_id':_0xda1162}},this[_0x404ec5(0x2b1)][_0x404ec5(0x3f4)]),_0x54db5e={};if(_0x68e352&&_0x68e352[_0x404ec5(0x4df)]){let _0x4da4f1=_0x68e352[_0x404ec5(0x4df)];typeof _0x4da4f1[_0x404ec5(0x10d)]==_0x404ec5(0x691)&&(_0x54db5e[_0x404ec5(0x10d)]=_0x4da4f1[_0x404ec5(0x10d)]),typeof _0x4da4f1[_0x404ec5(0x289)]==_0x404ec5(0x691)&&(_0x54db5e[_0x404ec5(0x289)]=_0x4da4f1[_0x404ec5(0x289)]),typeof _0x4da4f1[_0x404ec5(0x614)]==_0x404ec5(0x691)&&(_0x54db5e[_0x404ec5(0x614)]=_0x4da4f1[_0x404ec5(0x614)]),typeof _0x4da4f1[_0x404ec5(0x23d)]==_0x404ec5(0x691)&&(_0x54db5e['cpf']=_0x4da4f1[_0x404ec5(0x23d)]),typeof _0x4da4f1[_0x404ec5(0x16f)]=='string'&&(_0x54db5e['status']=_0x4da4f1[_0x404ec5(0x16f)]),typeof _0x4da4f1[_0x404ec5(0x1d5)]==_0x404ec5(0x691)&&(_0x54db5e[_0x404ec5(0x1d5)]=_0x4da4f1[_0x404ec5(0x1d5)]),typeof _0x4da4f1[_0x404ec5(0x684)]=='string'&&(_0x54db5e[_0x404ec5(0x684)]=_0x4da4f1[_0x404ec5(0x684)]),Array[_0x404ec5(0x119)](_0x4da4f1[_0x404ec5(0x366)])&&(_0x54db5e[_0x404ec5(0x366)]=_0x4da4f1[_0x404ec5(0x366)][_0x404ec5(0x473)](',\x20')),Array['isArray'](_0x4da4f1[_0x404ec5(0x39b)])&&(_0x54db5e['etiquetas']=_0x4da4f1[_0x404ec5(0x39b)][_0x404ec5(0x473)](',\x20'));}return _0x68e352&&_0x68e352[_0x404ec5(0x4df)]&&_0x68e352[_0x404ec5(0x4df)][_0x404ec5(0x300)]&&_0x68e352[_0x404ec5(0x4df)][_0x404ec5(0x300)]['forEach'](_0x1c2e94=>{const _0x2d3e7a=_0x404ec5;let _0x4490f5=this[_0x2d3e7a(0x6a0)]?.[_0x2d3e7a(0x300)][_0x2d3e7a(0x336)](_0x13291f=>_0x13291f[_0x2d3e7a(0x778)]===_0x1c2e94[_0x2d3e7a(0x778)]);_0x4490f5&&(_0x54db5e[_0x4490f5['name']]=_0x1c2e94['value']);}),_0x54db5e;}async[a0_0x46df1a(0xd9)](_0x328a80,_0x39a530){const _0x2468c6=a0_0x46df1a;try{let _0x263a6c=await this['getVariablesChat'](_0x39a530);return this[_0x2468c6(0x36c)](_0x328a80,_0x263a6c);}catch(_0x5f452b){return this[_0x2468c6(0xed)][_0x2468c6(0x2fb)](_0x2468c6(0x55d)+_0x39a530+':\x20'+_0x5f452b),_0x328a80;}}async[a0_0x46df1a(0x60d)](){const _0x4685fd=a0_0x46df1a;let _0x16c506=async(_0x203264,_0x23da36)=>{const _0x212783=a0_0x2bf6;let _0x1a6e46=(await this[_0x212783(0x91)][_0x212783(0x1d9)]['find']({'where':{'type':_0x203264}},this[_0x212783(0x2b1)]['wuid']))['map'](async _0x561a75=>{const _0x401255=_0x212783;let _0xfeb267=_0x23da36(_0x561a75),_0x4c8442=_0x561a75['remoteJids'][_0x401255(0x3f6)](_0x54fbcd=>({'_id':(0x0,Y['v4'])(),'type':_0xfeb267,'remoteJid':_0x54fbcd,'flow':_0x561a75[_0x401255(0x777)],'text':_0x561a75['message']?.[_0x401255(0xd1)],'delay':_0x561a75[_0x401255(0x64f)]?.[_0x401255(0x298)],'urlOrBase64':_0x561a75['message']?.[_0x401255(0x6ac)],'linkPreview':_0x561a75[_0x401255(0x64f)]?.['linkPreview'],'fileName':_0x561a75[_0x401255(0x64f)]?.[_0x401255(0x1e4)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x401255(0x91)][_0x401255(0x1d9)][_0x401255(0x160)](_0x561a75[_0x401255(0x778)],{'$set':{'type':_0xfeb267,'messages':_0x4c8442},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x401255(0x2b1)]['wuid']);}catch(_0x5c4af3){console[_0x401255(0x2fb)](_0x401255(0x54c)+_0x561a75[_0x401255(0x778)]+':',_0x5c4af3);}});await Promise[_0x212783(0x221)](_0x1a6e46);};await _0x16c506('text',_0x580366=>_0x4685fd(0xd1)),await _0x16c506(_0x4685fd(0x425),_0x281775=>_0x281775[_0x4685fd(0x64f)]?.['mediatype']||_0x4685fd(0x425)),await _0x16c506(_0x4685fd(0x47f),_0x34bcc2=>'audio'),await _0x16c506('flow',_0x47b129=>_0x4685fd(0xa2)),await _0x16c506(_0x4685fd(0x24c),_0xff187b=>_0x4685fd(0x24c)),await _0x16c506(_0x4685fd(0x345),_0x44bcca=>'video'),await _0x16c506('document',_0x2e1e57=>_0x4685fd(0x656)),console['log']('Transformação\x20concluída!');}async[a0_0x46df1a(0x65f)](_0x24367a){const _0x3a727f=a0_0x46df1a;try{if(this[_0x3a727f(0xed)]['verbose'](this[_0x3a727f(0x88)]+'\x20('+this['instance'][_0x3a727f(0x3f4)]+_0x3a727f(0x164)),_0x24367a['_id']||(_0x24367a['_id']=(0x0,Y['v4'])()),this[_0x3a727f(0x2b1)][_0x3a727f(0x277)][_0x3a727f(0x5c0)]===_0x24367a[_0x3a727f(0x778)]?.['toString']()&&_0x24367a[_0x3a727f(0x16f)]!==_0x3a727f(0x128))throw new Error('Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.');if(_0x24367a[_0x3a727f(0x22c)]&&_0x24367a[_0x3a727f(0x778)]){let _0x3d9ade=await this['repository']['scheduleMessage'][_0x3a727f(0x52e)](_0x24367a['_id'],this[_0x3a727f(0x2b1)][_0x3a727f(0x3f4)]);return setTimeout(()=>this[_0x3a727f(0x538)](),0x7d0),_0x3d9ade;}let _0x47bd6e=null;if(_0x24367a[_0x3a727f(0x778)]&&(_0x47bd6e=await this[_0x3a727f(0x91)][_0x3a727f(0x1d9)][_0x3a727f(0x498)](_0x24367a[_0x3a727f(0x778)],this[_0x3a727f(0x2b1)][_0x3a727f(0x3f4)])),_0x47bd6e){let {_id:_0x86d107,owner:_0x1de190,messages:_0x439fe6,..._0x19bf94}=_0x24367a;if(_0x439fe6){let _0x48f389=_0x439fe6[_0x3a727f(0x57a)](_0x11577e=>!_0x11577e['_id']),_0x34e8b4=_0x439fe6['filter'](_0x32dd68=>_0x32dd68[_0x3a727f(0x778)]&&!_0x32dd68[_0x3a727f(0x22c)]),_0x2af0a1=_0x439fe6['filter'](_0x58044e=>_0x58044e['_id']&&_0x58044e[_0x3a727f(0x22c)]);if(_0x48f389['length']>0x0&&await this[_0x3a727f(0x37d)](_0x24367a[_0x3a727f(0x778)],_0x48f389),_0x34e8b4[_0x3a727f(0x5e9)]>0x0&&await this[_0x3a727f(0x2fe)]({'_id':_0x24367a[_0x3a727f(0x778)],'messages':_0x34e8b4}),_0x2af0a1[_0x3a727f(0x5e9)]>0x0){let _0x57eff7=_0x2af0a1[_0x3a727f(0x3f6)](_0x3f2d59=>({'updateOne':{'filter':{'_id':_0x24367a[_0x3a727f(0x778)]},'update':{'$pull':{'messages':{'_id':_0x3f2d59['_id']}}}}}));await this['repository'][_0x3a727f(0x1d9)][_0x3a727f(0x82)](_0x57eff7,this['instance'][_0x3a727f(0x3f4)]);}}let _0x13e123={'$set':_0x19bf94},_0x4fdf29=await this['repository'][_0x3a727f(0x1d9)][_0x3a727f(0x160)](_0x24367a[_0x3a727f(0x778)],_0x13e123,this[_0x3a727f(0x2b1)][_0x3a727f(0x3f4)]);return _0x4fdf29&&(this['reorderMessages'](_0x4fdf29[_0x3a727f(0x229)]),await this[_0x3a727f(0x91)][_0x3a727f(0x1d9)]['updateOneById'](_0x4fdf29[_0x3a727f(0x778)],{'$set':{'messages':_0x4fdf29[_0x3a727f(0x229)]}},this['instance'][_0x3a727f(0x3f4)])),setTimeout(()=>this[_0x3a727f(0x538)](),0x7d0),await this[_0x3a727f(0x60d)](),_0x4fdf29;}else{_0x24367a[_0x3a727f(0x3dd)]=this['instance'][_0x3a727f(0x3f4)],_0x24367a['messages']&&_0x24367a[_0x3a727f(0x229)][_0x3a727f(0x14b)](_0x289ffe=>{const _0x24a97f=_0x3a727f;_0x289ffe[_0x24a97f(0x778)]||(_0x289ffe[_0x24a97f(0x778)]=(0x0,Y['v4'])()),delete _0x289ffe['triedToSend'];});let _0x1ea9fe=await this[_0x3a727f(0x91)][_0x3a727f(0x1d9)][_0x3a727f(0x25d)](_0x24367a,this[_0x3a727f(0x2b1)]['wuid']);return _0x1ea9fe&&(this[_0x3a727f(0xf4)](_0x1ea9fe[_0x3a727f(0x229)]),await this[_0x3a727f(0x91)][_0x3a727f(0x1d9)][_0x3a727f(0x160)](_0x1ea9fe[_0x3a727f(0x778)],{'$set':{'messages':_0x1ea9fe[_0x3a727f(0x229)]}},this['instance'][_0x3a727f(0x3f4)])),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x1ea9fe;}}catch(_0x5e9b4c){let _0x1b098c=_0x3a727f(0x588),_0xc749f7=_0x5e9b4c instanceof Error?_0x5e9b4c[_0x3a727f(0x64f)]:typeof _0x5e9b4c==_0x3a727f(0xde)?JSON[_0x3a727f(0x5cc)](_0x5e9b4c):_0x5e9b4c,_0x1daf57=_0x1b098c+':\x20'+_0xc749f7;throw this[_0x3a727f(0xed)]['error'](this[_0x3a727f(0x88)]+'\x20('+this[_0x3a727f(0x2b1)]['wuid']+_0x3a727f(0x28e)+_0x1daf57),new m(_0x1daf57);}}async[a0_0x46df1a(0x37d)](_0x133065,_0x5e6185){const _0x188b77=a0_0x46df1a;try{this[_0x188b77(0xed)][_0x188b77(0x2c1)](this[_0x188b77(0x88)]+'\x20('+this[_0x188b77(0x2b1)][_0x188b77(0x3f4)]+_0x188b77(0x466)),_0x5e6185[_0x188b77(0x14b)](_0x21f167=>{const _0x1893a4=_0x188b77;_0x21f167[_0x1893a4(0x778)]||(_0x21f167[_0x1893a4(0x778)]=(0x0,Y['v4'])()),delete _0x21f167['triedToSend'];});let _0xcf2329={'$push':{'messages':{'$each':_0x5e6185}}},_0x1a5b58=await this['repository'][_0x188b77(0x1d9)][_0x188b77(0x160)](_0x133065,_0xcf2329,this['instance']['wuid']);return _0x1a5b58&&(this[_0x188b77(0xf4)](_0x1a5b58[_0x188b77(0x229)]),await this['repository']['scheduleMessage'][_0x188b77(0x160)](_0x1a5b58[_0x188b77(0x778)],{'$set':{'messages':_0x1a5b58['messages']}},this[_0x188b77(0x2b1)][_0x188b77(0x3f4)])),_0x1a5b58;}catch(_0x4e0afb){let _0x1dc7f9=_0x188b77(0x373),_0x93ab69=_0x4e0afb instanceof Error?_0x4e0afb[_0x188b77(0x64f)]:typeof _0x4e0afb=='object'?JSON[_0x188b77(0x5cc)](_0x4e0afb):_0x4e0afb,_0x58122a=_0x1dc7f9+':\x20'+_0x93ab69;throw this[_0x188b77(0xed)][_0x188b77(0x2fb)](this['instanceName']+'\x20('+this[_0x188b77(0x2b1)]['wuid']+_0x188b77(0x28e)+_0x58122a),new m(_0x58122a);}}async[a0_0x46df1a(0x2fe)](_0x30a14f){const _0x3d0c9e=a0_0x46df1a;try{if(this['logger'][_0x3d0c9e(0x2c1)](this['instanceName']+'\x20('+this[_0x3d0c9e(0x2b1)]['wuid']+_0x3d0c9e(0x755)),!_0x30a14f[_0x3d0c9e(0x778)]||!_0x30a14f[_0x3d0c9e(0x229)])throw new Error(_0x3d0c9e(0x5d9));let _0x5dd8a0=_0x30a14f[_0x3d0c9e(0x778)],_0x570ded=_0x30a14f[_0x3d0c9e(0x229)],_0x123347=_0x570ded[_0x3d0c9e(0x57a)](_0x4e69db=>!_0x4e69db[_0x3d0c9e(0x22c)])[_0x3d0c9e(0x3f6)](_0x2c7208=>{const _0x95403d=_0x3d0c9e;let _0x584d5a=_0x2c7208[_0x95403d(0x778)];if(!_0x584d5a)throw new Error(_0x95403d(0x138));return delete _0x2c7208['triedToSend'],{'updateOne':{'filter':{'_id':_0x5dd8a0,'messages._id':_0x584d5a},'update':{'$set':{'messages.$[elem]':_0x2c7208}},'arrayFilters':[{'elem._id':_0x584d5a}]}};}),_0x35d7c7=_0x570ded['filter'](_0x19c7b0=>_0x19c7b0[_0x3d0c9e(0x22c)])[_0x3d0c9e(0x3f6)](_0x1f6305=>{const _0x592155=_0x3d0c9e;let _0x540ee6=_0x1f6305[_0x592155(0x778)];if(!_0x540ee6)throw new Error('Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.');return{'updateOne':{'filter':{'_id':_0x5dd8a0},'update':{'$pull':{'messages':{'_id':_0x540ee6}}}}};}),_0x1972a9=[..._0x123347,..._0x35d7c7],_0x3e04ee=await this[_0x3d0c9e(0x91)][_0x3d0c9e(0x1d9)][_0x3d0c9e(0x82)](_0x1972a9,this[_0x3d0c9e(0x2b1)]['wuid']),_0xd01e9=await this[_0x3d0c9e(0x91)][_0x3d0c9e(0x1d9)][_0x3d0c9e(0x498)](_0x5dd8a0,this[_0x3d0c9e(0x2b1)][_0x3d0c9e(0x3f4)]);return _0xd01e9&&(this[_0x3d0c9e(0xf4)](_0xd01e9[_0x3d0c9e(0x229)]),await this[_0x3d0c9e(0x91)][_0x3d0c9e(0x1d9)][_0x3d0c9e(0x160)](_0xd01e9[_0x3d0c9e(0x778)],{'$set':{'messages':_0xd01e9[_0x3d0c9e(0x229)]}},this[_0x3d0c9e(0x2b1)][_0x3d0c9e(0x3f4)])),_0xd01e9;}catch(_0x235f21){let _0x3bddfe=_0x3d0c9e(0x70a),_0x308f71=_0x235f21 instanceof Error?_0x235f21[_0x3d0c9e(0x64f)]:typeof _0x235f21==_0x3d0c9e(0xde)?JSON[_0x3d0c9e(0x5cc)](_0x235f21):_0x235f21,_0x377e93=_0x3bddfe+':\x20'+_0x308f71;throw this[_0x3d0c9e(0xed)]['error'](this['instanceName']+'\x20('+this[_0x3d0c9e(0x2b1)][_0x3d0c9e(0x3f4)]+_0x3d0c9e(0x28e)+_0x377e93),new m(_0x377e93);}}async[a0_0x46df1a(0xe3)](){const _0x2c696b=a0_0x46df1a;try{let _0x436af8={'status':_0x2c696b(0x24a)},_0x23b7df=await this[_0x2c696b(0x91)][_0x2c696b(0x1d9)]['deleteMany'](_0x436af8,this[_0x2c696b(0x2b1)][_0x2c696b(0x3f4)]);if(!_0x23b7df[_0x2c696b(0x2fb)])this[_0x2c696b(0xed)][_0x2c696b(0x2c1)](this['instanceName']+'\x20('+this[_0x2c696b(0x2b1)][_0x2c696b(0x3f4)]+'):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.');else throw new Error(_0x23b7df[_0x2c696b(0x2fb)][_0x2c696b(0x64f)]||_0x2c696b(0x19f));return this[_0x2c696b(0x2cc)]();}catch(_0x486d3){let _0x4b812d=_0x2c696b(0x3a3),_0x5e2119=_0x486d3 instanceof Error?_0x486d3[_0x2c696b(0x64f)]:typeof _0x486d3==_0x2c696b(0xde)?JSON[_0x2c696b(0x5cc)](_0x486d3):_0x486d3,_0x60572b=_0x4b812d+':\x20'+_0x5e2119;throw this[_0x2c696b(0xed)][_0x2c696b(0x2fb)](this[_0x2c696b(0x88)]+'\x20('+this[_0x2c696b(0x2b1)]['wuid']+_0x2c696b(0x28e)+_0x60572b),new m(_0x60572b);}}async[a0_0x46df1a(0x2cc)](){const _0xa0315d=a0_0x46df1a;try{return await this[_0xa0315d(0x91)]['scheduleMessage'][_0xa0315d(0x336)]({'where':{}},this[_0xa0315d(0x2b1)][_0xa0315d(0x3f4)]);}catch(_0x573464){let _0x3f5529=_0xa0315d(0x570),_0x2ee136=_0x573464 instanceof Error?_0x573464[_0xa0315d(0x64f)]:typeof _0x573464=='object'?JSON[_0xa0315d(0x5cc)](_0x573464):_0x573464,_0x59ee4b=_0x3f5529+':\x20'+_0x2ee136;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0xa0315d(0x2b1)][_0xa0315d(0x3f4)]+_0xa0315d(0x28e)+_0x59ee4b),new m(_0x59ee4b);}}['reorderMessages'](_0x448a5e){const _0x3a70eb=a0_0x46df1a;_0x448a5e[_0x3a70eb(0x170)]((_0x3638bc,_0x5dd528)=>_0x3638bc['order']-_0x5dd528['order']),_0x448a5e[_0x3a70eb(0x14b)]((_0x3f373b,_0x71c6bf)=>{const _0x40acd5=_0x3a70eb;_0x3f373b[_0x40acd5(0x3d5)]=_0x71c6bf+0x1;});}async[a0_0x46df1a(0x5f0)](_0x10a17c){const _0x380ffc=a0_0x46df1a;try{if(this['logger'][_0x380ffc(0x2c1)](this['instanceName']+'\x20('+this['instance'][_0x380ffc(0x3f4)]+_0x380ffc(0x32a)),_0x10a17c[_0x380ffc(0x22c)]&&_0x10a17c[_0x380ffc(0x778)]){if(this[_0x380ffc(0x2b1)]['ScheduleMessage'][_0x380ffc(0x5c0)]===_0x10a17c[_0x380ffc(0x778)]['toString']())throw new Error(_0x380ffc(0x2a4));let _0x4cabc8=await this[_0x380ffc(0x91)][_0x380ffc(0x1d9)]['deleteOne'](_0x10a17c[_0x380ffc(0x778)],this[_0x380ffc(0x2b1)]['wuid']);return setTimeout(()=>this[_0x380ffc(0x538)](),0x7d0),_0x4cabc8;}let _0x453934;if(_0x10a17c['_id']&&(_0x453934=await this['repository']['scheduleMessage'][_0x380ffc(0x498)](_0x10a17c[_0x380ffc(0x778)],this[_0x380ffc(0x2b1)]['wuid'])),_0x453934){let _0x467283;if(this[_0x380ffc(0x2b1)][_0x380ffc(0x277)][_0x380ffc(0x5c0)]===_0x453934[_0x380ffc(0x778)][_0x380ffc(0x49e)]())_0x467283={'$set':{'status':_0x10a17c['status']}};else{let {_id:_0x6a4d99,..._0x373693}=_0x10a17c;_0x467283={'$set':_0x373693};}let _0x132a07=await this[_0x380ffc(0x91)][_0x380ffc(0x1d9)][_0x380ffc(0x160)](_0x10a17c[_0x380ffc(0x778)],_0x467283,this['instance'][_0x380ffc(0x3f4)]);return setTimeout(()=>this[_0x380ffc(0x538)](),0x7d0),_0x132a07;}else{_0x10a17c[_0x380ffc(0x3dd)]=this[_0x380ffc(0x2b1)][_0x380ffc(0x3f4)];let _0x5697bf=await this[_0x380ffc(0x91)]['scheduleMessage'][_0x380ffc(0x25d)](_0x10a17c,this['instance']['wuid']);return setTimeout(()=>this[_0x380ffc(0x538)](),0x7d0),_0x5697bf;}}catch(_0x108960){let _0x11989a=_0x380ffc(0x47b),_0x5f15c7=_0x108960 instanceof Error?_0x108960[_0x380ffc(0x64f)]:typeof _0x108960==_0x380ffc(0xde)?JSON['stringify'](_0x108960):_0x108960,_0x22c645=_0x11989a+':\x20'+_0x5f15c7;throw this[_0x380ffc(0xed)][_0x380ffc(0x2fb)](this[_0x380ffc(0x88)]+'\x20('+this[_0x380ffc(0x2b1)][_0x380ffc(0x3f4)]+_0x380ffc(0x28e)+_0x22c645),new m(_0x22c645);}}async['deleteDoneMessages2'](){const _0x5e0378=a0_0x46df1a;try{let _0x5e818d={'status':_0x5e0378(0x24a)},_0x4aa3bf=await this[_0x5e0378(0x91)]['scheduleMessage'][_0x5e0378(0x708)](_0x5e818d,this[_0x5e0378(0x2b1)][_0x5e0378(0x3f4)]);if(!_0x4aa3bf['error'])this[_0x5e0378(0xed)]['verbose'](this['instanceName']+'\x20('+this[_0x5e0378(0x2b1)][_0x5e0378(0x3f4)]+_0x5e0378(0x52b));else throw new Error(_0x4aa3bf[_0x5e0378(0x2fb)][_0x5e0378(0x64f)]||_0x5e0378(0x677));return this['getScheduleMessage']();}catch(_0x568375){let _0x2769b9=_0x5e0378(0x5a2),_0x65e771=_0x568375 instanceof Error?_0x568375[_0x5e0378(0x64f)]:typeof _0x568375=='object'?JSON[_0x5e0378(0x5cc)](_0x568375):_0x568375,_0x42bdd1=_0x2769b9+':\x20'+_0x65e771;throw this[_0x5e0378(0xed)]['error'](this[_0x5e0378(0x88)]+'\x20('+this[_0x5e0378(0x2b1)][_0x5e0378(0x3f4)]+_0x5e0378(0x28e)+_0x42bdd1),new m(_0x42bdd1);}}async[a0_0x46df1a(0x7b0)](_0x4e8225,_0x452d17){const _0x179f87=a0_0x46df1a;try{if(!_0x452d17)return this[_0x179f87(0xed)][_0x179f87(0x2fb)](this[_0x179f87(0x88)]+'\x20('+this['instance']['wuid']+_0x179f87(0x4e4)),{'error':!0x0,'detail':_0x179f87(0xb6)};if(_0x452d17[_0x179f87(0x1c0)]===_0x179f87(0xa2)&&!this[_0x179f87(0x6a0)]?.[_0x179f87(0x79)][_0x179f87(0x4d5)])return this[_0x179f87(0xed)][_0x179f87(0x2fb)](this['instanceName']+'\x20('+this[_0x179f87(0x2b1)][_0x179f87(0x3f4)]+'):\x20Fluxos\x20não\x20estão\x20ativados'),{'error':!0x0,'detail':_0x179f87(0x504)};switch(_0x452d17[_0x179f87(0x1c0)]){case _0x179f87(0xd1):return await this[_0x179f87(0x5a1)](_0x452d17,_0x4e8225);case _0x179f87(0x345):case _0x179f87(0x24c):case'document':return await this[_0x179f87(0x68f)](_0x452d17,_0x4e8225);case'audio':return await this['scheduleSendAudio'](_0x452d17,_0x4e8225);case _0x179f87(0xa2):let _0x346082=new He();return _0x346082[_0x179f87(0x11d)]=_0x452d17[_0x179f87(0xa2)],_0x346082[_0x179f87(0x75b)]=_0x4e8225,await this[_0x179f87(0x20a)](_0x346082);default:return this['logger'][_0x179f87(0x2fb)](this[_0x179f87(0x88)]+'\x20('+this[_0x179f87(0x2b1)][_0x179f87(0x3f4)]+_0x179f87(0x790)+_0x452d17[_0x179f87(0x1c0)]),{'error':!0x0,'detail':_0x179f87(0x226)};}}catch(_0x19cd2e){return this[_0x179f87(0xed)][_0x179f87(0x2fb)](this['instanceName']+'\x20('+this[_0x179f87(0x2b1)][_0x179f87(0x3f4)]+_0x179f87(0x77c)+(_0x19cd2e instanceof Error?_0x19cd2e[_0x179f87(0x64f)]:JSON[_0x179f87(0x5cc)](_0x19cd2e,null,0x2))),{'error':!0x0,'detail':_0x19cd2e[_0x179f87(0x64f)]};}}async[a0_0x46df1a(0x5a1)](_0x3fddfa,_0x533fd2){const _0x448dec=a0_0x46df1a;if(this[_0x448dec(0xed)]['verbose'](this[_0x448dec(0x88)]+'\x20('+this[_0x448dec(0x2b1)][_0x448dec(0x3f4)]+_0x448dec(0x471)+_0x533fd2+'\x27'),!_0x3fddfa[_0x448dec(0xd1)]||_0x3fddfa['text'][_0x448dec(0x5e9)]===0x0)return{'error':!0x0,'detail':_0x448dec(0x4bd)};let _0xd42b24=await this[_0x448dec(0xd9)](_0x3fddfa[_0x448dec(0xd1)],_0x533fd2),_0x503bd8={'number':_0x533fd2,'options':{'delay':_0x3fddfa[_0x448dec(0x298)],'linkPreview':_0x3fddfa[_0x448dec(0x3ad)]},'textMessage':{'text':_0xd42b24}},_0x101ae7=null;try{let _0x2e3bdc=await this[_0x448dec(0xc5)](_0x503bd8);if(_0x2e3bdc&&_0x2e3bdc[_0x448dec(0x16f)])return{'error':!0x1,'id':_0x2e3bdc[_0x448dec(0x754)]['id']};_0x101ae7=JSON[_0x448dec(0x5cc)](_0x2e3bdc),this[_0x448dec(0xed)][_0x448dec(0x2c1)](this['instanceName']+'\x20('+this[_0x448dec(0x2b1)][_0x448dec(0x3f4)]+_0x448dec(0x28e)+_0x101ae7);}catch(_0x9af2fd){this['logger'][_0x448dec(0x2fb)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x448dec(0x2f6)+(_0x9af2fd instanceof Error?_0x9af2fd[_0x448dec(0x64f)]:JSON[_0x448dec(0x5cc)](_0x9af2fd,null,0x2))),_0x101ae7=_0x9af2fd['message'];}if(_0x101ae7)return{'error':!0x0,'detail':(typeof _0x101ae7==_0x448dec(0xde)?JSON[_0x448dec(0x5cc)](_0x101ae7,null,0x2):_0x101ae7)[_0x448dec(0x420)](/[\[\]{}\n]/g,'\x20')[_0x448dec(0x420)](/  +/g,'\x20')};}async[a0_0x46df1a(0x68f)](_0xfd65ea,_0x55fc49){const _0x278154=a0_0x46df1a;this[_0x278154(0xed)][_0x278154(0x2c1)](this['instanceName']+'\x20('+this[_0x278154(0x2b1)][_0x278154(0x3f4)]+_0x278154(0x183)+_0x55fc49+'\x27');let _0x1955d0;_0xfd65ea['text']&&_0xfd65ea[_0x278154(0xd1)][_0x278154(0x5e9)]>0x0&&(_0x1955d0=await this['replaceVariablesChat'](_0xfd65ea[_0x278154(0xd1)],_0x55fc49));let _0x1bfd08={'number':_0x55fc49,'options':{'delay':_0xfd65ea['delay'],'linkPreview':_0xfd65ea[_0x278154(0x3ad)]},'mediaMessage':{'mediatype':_0xfd65ea['type'],'caption':_0x1955d0,'media':_0xfd65ea[_0x278154(0x6ac)]}},_0x56cbdb=null;try{let _0x290a72=await this[_0x278154(0x669)](_0x1bfd08);if(_0x290a72&&_0x290a72['status'])return{'error':!0x1,'id':_0x290a72[_0x278154(0x754)]['id']};_0x56cbdb=JSON['stringify'](_0x290a72),this['logger'][_0x278154(0x2c1)](this['instanceName']+'\x20('+this[_0x278154(0x2b1)]['wuid']+_0x278154(0x28e)+_0x56cbdb);}catch(_0x39a5d6){this[_0x278154(0xed)]['error'](this[_0x278154(0x88)]+'\x20('+this['instance'][_0x278154(0x3f4)]+_0x278154(0x477)+(_0x39a5d6 instanceof Error?_0x39a5d6[_0x278154(0x64f)]:JSON[_0x278154(0x5cc)](_0x39a5d6,null,0x2))),_0x56cbdb=_0x39a5d6['message'];}if(_0x56cbdb)return{'error':!0x0,'detail':(typeof _0x56cbdb=='object'?JSON['stringify'](_0x56cbdb,null,0x2):_0x56cbdb)['replace'](/[\[\]{}\n]/g,'\x20')[_0x278154(0x420)](/  +/g,'\x20')};}async[a0_0x46df1a(0x457)](_0x4230db,_0x404689){const _0x2eb993=a0_0x46df1a;this[_0x2eb993(0xed)][_0x2eb993(0x2c1)](this[_0x2eb993(0x88)]+'\x20('+this[_0x2eb993(0x2b1)][_0x2eb993(0x3f4)]+_0x2eb993(0x5f7)+_0x404689+'\x27');let _0x41371b={'number':_0x404689,'options':{'delay':_0x4230db[_0x2eb993(0x298)]},'audioMessage':{'audio':_0x4230db[_0x2eb993(0x6ac)]}},_0x5ada1f=null;try{let _0x4c4e5b=await this[_0x2eb993(0x5cb)](_0x41371b);if(_0x4c4e5b&&_0x4c4e5b[_0x2eb993(0x16f)])return{'error':!0x1,'id':_0x4c4e5b[_0x2eb993(0x754)]['id']};_0x5ada1f=JSON['stringify'](_0x4c4e5b),this[_0x2eb993(0xed)]['verbose'](this['instanceName']+'\x20('+this[_0x2eb993(0x2b1)][_0x2eb993(0x3f4)]+_0x2eb993(0x28e)+_0x5ada1f);}catch(_0x159a92){this[_0x2eb993(0xed)][_0x2eb993(0x2fb)](this[_0x2eb993(0x88)]+'\x20('+this['instance'][_0x2eb993(0x3f4)]+_0x2eb993(0x3c2)+(_0x159a92 instanceof Error?_0x159a92[_0x2eb993(0x64f)]:JSON[_0x2eb993(0x5cc)](_0x159a92,null,0x2))),_0x5ada1f=_0x159a92[_0x2eb993(0x64f)];}if(_0x5ada1f)return{'error':!0x0,'detail':(typeof _0x5ada1f=='object'?JSON[_0x2eb993(0x5cc)](_0x5ada1f,null,0x2):_0x5ada1f)[_0x2eb993(0x420)](/[\[\]{}\n]/g,'\x20')['replace'](/  +/g,'\x20')};}async[a0_0x46df1a(0x66b)](_0x515786){const _0x2086f4=a0_0x46df1a;try{return await this['client'][_0x2086f4(0x39d)](_0x515786['groupJid'],_0x515786[_0x2086f4(0x6d)]),{'update':'success'};}catch(_0x218b3d){let _0x393d6b=_0x2086f4(0xcd),_0x41a463=_0x218b3d instanceof Error?_0x218b3d[_0x2086f4(0x64f)]:typeof _0x218b3d==_0x2086f4(0xde)?JSON[_0x2086f4(0x5cc)](_0x218b3d):_0x218b3d,_0x343bcb=_0x393d6b+':\x20'+_0x41a463;throw this[_0x2086f4(0xed)][_0x2086f4(0x2fb)](this[_0x2086f4(0x88)]+'\x20('+this['instance'][_0x2086f4(0x3f4)]+_0x2086f4(0x28e)+_0x343bcb),new x(_0x343bcb);}}async['groupName'](_0x2128af){const _0x4465eb=a0_0x46df1a;try{return await this['client'][_0x4465eb(0x5e4)](_0x2128af[_0x4465eb(0x2fd)],_0x2128af['name']),{'update':_0x4465eb(0x3f5)};}catch(_0x53a7d5){let _0x812f79=_0x4465eb(0x1fb),_0x488b4d=_0x53a7d5 instanceof Error?_0x53a7d5[_0x4465eb(0x64f)]:typeof _0x53a7d5==_0x4465eb(0xde)?JSON[_0x4465eb(0x5cc)](_0x53a7d5):_0x53a7d5,_0x555aac=_0x812f79+':\x20'+_0x488b4d;throw this['logger'][_0x4465eb(0x2fb)](this[_0x4465eb(0x88)]+'\x20('+this['instance'][_0x4465eb(0x3f4)]+'):\x20'+_0x555aac),new x(_0x555aac);}}async[a0_0x46df1a(0x2c4)](_0x39a708){const _0x4f09aa=a0_0x46df1a;try{let _0x3e0758=await this[_0x4f09aa(0x1f7)][_0x4f09aa(0x546)](_0x39a708[_0x4f09aa(0x2fd)],_0x39a708['expiration']);return{'success':!0x0};}catch(_0x40cf9a){let _0x27c9ef=_0x4f09aa(0x555),_0x4d4f45=_0x40cf9a instanceof Error?_0x40cf9a[_0x4f09aa(0x64f)]:typeof _0x40cf9a=='object'?JSON['stringify'](_0x40cf9a):_0x40cf9a,_0xd34273=_0x27c9ef+':\x20'+_0x4d4f45;throw this[_0x4f09aa(0xed)][_0x4f09aa(0x2fb)](this[_0x4f09aa(0x88)]+'\x20('+this['instance'][_0x4f09aa(0x3f4)]+_0x4f09aa(0x28e)+_0xd34273),new x(_0xd34273);}}async[a0_0x46df1a(0x55c)](_0x4fc91a){const _0x3a62fa=a0_0x46df1a;try{return await this[_0x3a62fa(0x1f7)]['groupSettingUpdate'](_0x4fc91a['groupJid'],_0x4fc91a[_0x3a62fa(0xe6)]),{'update':'success'};}catch(_0x1260da){let _0x4cdb88=_0x3a62fa(0x567),_0x32c836=_0x1260da instanceof Error?_0x1260da[_0x3a62fa(0x64f)]:typeof _0x1260da==_0x3a62fa(0xde)?JSON[_0x3a62fa(0x5cc)](_0x1260da):_0x1260da,_0x1736bd=_0x4cdb88+':\x20'+_0x32c836;throw this[_0x3a62fa(0xed)][_0x3a62fa(0x2fb)](this['instanceName']+'\x20('+this['instance'][_0x3a62fa(0x3f4)]+_0x3a62fa(0x28e)+_0x1736bd),new x(_0x1736bd);}}async['updateGroupPicture'](_0x2b7cef){const _0x707f77=a0_0x46df1a;try{let _0x4364ba;if((0x0,k[_0x707f77(0xa9)])(_0x2b7cef[_0x707f77(0x24c)])){let _0x397a29=new Date()['getTime'](),_0x3c74d8=_0x2b7cef[_0x707f77(0x24c)]+_0x707f77(0x1ca)+_0x397a29;_0x4364ba=(await Q[_0x707f77(0x2fa)][_0x707f77(0x20f)](_0x3c74d8,{'responseType':_0x707f77(0x5ba)}))[_0x707f77(0x72b)];}else{if((0x0,k[_0x707f77(0x3ec)])(_0x2b7cef['image']))_0x4364ba=Buffer[_0x707f77(0x13c)](_0x2b7cef['image'],_0x707f77(0x2c6));else throw new m(_0x707f77(0x126));}return await this[_0x707f77(0x1f7)][_0x707f77(0x79a)](_0x2b7cef['groupJid'],_0x4364ba),{'update':_0x707f77(0x3f5)};}catch(_0x3f1b66){let _0x1b8ebe=_0x707f77(0x6a),_0x456930=_0x3f1b66 instanceof Error?_0x3f1b66['message']:typeof _0x3f1b66==_0x707f77(0xde)?JSON[_0x707f77(0x5cc)](_0x3f1b66):_0x3f1b66,_0x3c2f60=_0x1b8ebe+':\x20'+_0x456930;throw this[_0x707f77(0xed)][_0x707f77(0x2fb)](this[_0x707f77(0x88)]+'\x20('+this['instance'][_0x707f77(0x3f4)]+'):\x20'+_0x3c2f60),new x(_0x3c2f60);}}},Gt=class l{constructor(_0x15fbb9,_0x414272,_0x1399c1){const _0x5a63d0=a0_0x46df1a;this[_0x5a63d0(0x1ee)]=_0x15fbb9,this[_0x5a63d0(0x46a)]=_0x414272,this[_0x5a63d0(0x91)]=_0x1399c1,this['db']={},this['redis']={},this[_0x5a63d0(0xed)]=new $(l[_0x5a63d0(0x11d)]),this['waInstances']={},(this[_0x5a63d0(0x168)](),this[_0x5a63d0(0x531)](),Object[_0x5a63d0(0x508)](this['db'],_0x414272['get'](_0x5a63d0(0x723))),Object[_0x5a63d0(0x508)](this['redis'],_0x414272[_0x5a63d0(0x20f)](_0x5a63d0(0x452))),this[_0x5a63d0(0x154)]=this['db'][_0x5a63d0(0x544)]?this['repository']['dbServer']?.['db'](this['db'][_0x5a63d0(0x26e)][_0x5a63d0(0xd5)]+_0x5a63d0(0xad)):void 0x0,this[_0x5a63d0(0x638)]=this[_0x5a63d0(0xda)][_0x5a63d0(0x544)]?new pe(this[_0x5a63d0(0xda)]):void 0x0);}async['instanceInfo'](_0x79dc0f){const _0x19609e=a0_0x46df1a;if(_0x79dc0f&&!this[_0x19609e(0x6f7)][_0x79dc0f])throw new J(_0x19609e(0x38d)+_0x79dc0f+_0x19609e(0x230));let _0x4b2669=[];for await(let [_0x1b0a5f,_0x5afbcc]of Object[_0x19609e(0x10b)](this[_0x19609e(0x6f7)]))if(_0x5afbcc&&_0x5afbcc[_0x19609e(0x349)][_0x19609e(0x4dc)]==='open'){let _0x547fb3=await this['repository'][_0x19609e(0x35d)][_0x19609e(0x336)](_0x1b0a5f);_0x4b2669[_0x19609e(0x45f)]({'instance':{'instanceName':_0x1b0a5f,'apikey':_0x547fb3[_0x19609e(0x201)],'owner':_0x5afbcc[_0x19609e(0x3f4)],'profileName':await _0x5afbcc['getProfileName']()||_0x19609e(0xcb),'profilePictureUrl':_0x5afbcc[_0x19609e(0x4c0)]}});}return _0x4b2669[_0x19609e(0x336)](_0x2ac1f8=>_0x2ac1f8[_0x19609e(0x2b1)][_0x19609e(0x88)]===_0x79dc0f)??_0x4b2669;}async[a0_0x46df1a(0x4ff)](_0x197129){const _0xd41910=a0_0x46df1a;if(this['db'][_0xd41910(0x544)]&&(await this['repository']['dbServer'][_0xd41910(0xb5)](),(await this['dbInstance'][_0xd41910(0x27e)]())[_0xd41910(0x5e9)]>0x0&&await this['dbInstance'][_0xd41910(0x6b)](_0x197129)),this[_0xd41910(0xda)][_0xd41910(0x544)]){this['cache'][_0xd41910(0x311)]=_0x197129,await this[_0xd41910(0x638)][_0xd41910(0x509)]();return;}}async[a0_0x46df1a(0x792)](){const _0x1f101b=a0_0x46df1a;await this[_0x1f101b(0x320)]();let _0x3e286f=async _0x4c9985=>{const _0x1796a1=_0x1f101b;let _0x2c8d3b=new Ne(this[_0x1796a1(0x46a)],this[_0x1796a1(0x1ee)],this[_0x1796a1(0x91)]);_0x2c8d3b[_0x1796a1(0x88)]=_0x4c9985,await _0x2c8d3b[_0x1796a1(0x21b)](),this[_0x1796a1(0x6f7)][_0x4c9985]=_0x2c8d3b;};try{if(this[_0x1f101b(0xda)]['ENABLED']){let _0x222e87=await this[_0x1f101b(0x638)][_0x1f101b(0x523)]();_0x222e87?.[_0x1f101b(0x5e9)]>0x0&&_0x222e87[_0x1f101b(0x14b)](async _0x2b9078=>await _0x3e286f(_0x2b9078['split'](':')[0x1]));return;}if(this['db']['ENABLED']){await this['repository']['dbServer'][_0x1f101b(0xb5)]();let _0x37c509=await this[_0x1f101b(0x154)]['collections']();_0x37c509[_0x1f101b(0x5e9)]>0x0&&_0x37c509['forEach'](async _0x2cb685=>await _0x3e286f(_0x2cb685[_0x1f101b(0x720)][_0x1f101b(0x420)](/^[\w-]+\./,'')));return;}}catch(_0x35a2b5){this[_0x1f101b(0xed)]['error'](_0x35a2b5);}}async[a0_0x46df1a(0x501)](){const _0x395261=a0_0x46df1a;try{let _0x4956d5=await this[_0x395261(0x91)][_0x395261(0x35d)]['findMany']({'online':!0x1});for(let _0x44ffff of _0x4956d5){let _0x18abc4=_0x44ffff[_0x395261(0x778)];await he[_0x395261(0x6db)](X,_0x18abc4);}console[_0x395261(0x307)](_0x395261(0x6b8)+_0x4956d5[_0x395261(0x5e9)]);let _0x7635a4={'online':!0x1},_0x1d2f69=await this[_0x395261(0x91)][_0x395261(0x35d)][_0x395261(0x708)](_0x7635a4);console[_0x395261(0x307)](_0x395261(0x2d0)+_0x1d2f69[_0x395261(0x4e6)]);}catch(_0x69bbd0){console[_0x395261(0x2fb)](_0x395261(0x651),_0x69bbd0);}}async[a0_0x46df1a(0x320)](){const _0x2685cf=a0_0x46df1a;try{let _0x51487a={'online':!0x1},_0x444904={'online':!0x1,'lastDisconnect':Date[_0x2685cf(0x72)]()},_0x184951=await this['repository'][_0x2685cf(0x35d)][_0x2685cf(0x65c)](_0x51487a,_0x444904);await this['cleanDisconnectedInstances']();}catch(_0x1bf042){console['error'](_0x2685cf(0x54a),_0x1bf042);}}['removeInstance'](){const _0x3cc287=a0_0x46df1a;this[_0x3cc287(0x1ee)]['on'](_0x3cc287(0x3fa),async _0x365e39=>{const _0x307323=_0x3cc287;try{this[_0x307323(0x6f7)][_0x365e39]=void 0x0;}catch{}try{this[_0x307323(0x4ff)](_0x365e39);}finally{this['logger'][_0x307323(0x33d)]('Instance\x20\x22'+_0x365e39+_0x307323(0x3d6));}});}['noConnection'](){const _0x1f85c7=a0_0x46df1a;this[_0x1f85c7(0x1ee)]['on']('no.connection',async _0x532e6c=>{const _0x345664=_0x1f85c7;try{this['waInstances'][_0x532e6c]=void 0x0;}catch{}try{this[_0x345664(0x4ff)](_0x532e6c);}finally{this[_0x345664(0xed)][_0x345664(0x33d)](_0x345664(0x38d)+_0x532e6c+_0x345664(0x5f1));}});}},Bt=class extends _{[a0_0x46df1a(0x680)](_0x1c1031){return ia(_0x1c1031);}async['insert'](_0x474f3e){const _0x57b45a=a0_0x46df1a;if(_0x474f3e[_0x57b45a(0x5e9)]!==0x0)try{return{'insertCount':(await this[_0x57b45a(0x680)](_0x474f3e[0x0]['owner'])[_0x57b45a(0x2a5)]([..._0x474f3e]))[_0x57b45a(0x5e9)]};}catch(_0x591e98){return _0x591e98;}}async['find'](_0xfb576e,_0x17f688){const _0x4aa5f7=a0_0x46df1a;try{let _0x28856f=this[_0x4aa5f7(0x680)](_0x17f688),_0x2f2267=I(_0xfb576e['where']);return await _0x28856f[_0x4aa5f7(0x336)](_0x2f2267)[_0x4aa5f7(0x170)]({'lastmsg':-0x1})[_0x4aa5f7(0x759)](_0xfb576e?.[_0x4aa5f7(0x759)]??0x0)[_0x4aa5f7(0x133)]();}catch{return[];}}async[a0_0x46df1a(0x22c)](_0x1db514,_0x336be9){const _0x37ce60=a0_0x46df1a;try{return{'deletedCount':(await this['getChatModelForOwner'](_0x336be9)[_0x37ce60(0x708)]({..._0x1db514[_0x37ce60(0x629)]}))[_0x37ce60(0x712)]};}catch(_0x2175f6){return{'error':_0x2175f6?.[_0x37ce60(0x49e)]()};}}async[a0_0x46df1a(0x3fd)](_0x413f7f,_0x1c0ace){const _0x5b65f5=a0_0x46df1a;try{return await this['getChatModelForOwner'](_0x1c0ace)[_0x5b65f5(0x708)]({..._0x413f7f[_0x5b65f5(0x629)]}),[];}catch(_0x400049){return{'error':_0x400049?.[_0x5b65f5(0x49e)]()};}}async[a0_0x46df1a(0x404)](_0x4bbefc,_0x4f32c2){const _0x169f14=a0_0x46df1a;try{let _0xa25a=this[_0x169f14(0x680)](_0x4f32c2),_0x4231c7=I(_0x4bbefc[_0x169f14(0x629)]);return await _0xa25a[_0x169f14(0x404)](_0x4231c7)[_0x169f14(0x133)]();}catch{return null;}}async[a0_0x46df1a(0x4b3)](_0x3d50f4,_0x5211ff,_0x24fc5e,_0x5182d8,_0x220f3c=a0_0x46df1a(0x23a)){const _0x45921a=a0_0x46df1a;try{let _0x5ea15c={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x5182d8},_0x6da26f=this[_0x45921a(0x680)](_0x24fc5e),_0x292525=I(_0x3d50f4[_0x45921a(0x629)]);Object[_0x45921a(0x794)](_0x5211ff)[_0x45921a(0x14b)](_0x3de377=>{_0x5211ff[_0x3de377]==null&&delete _0x5211ff[_0x3de377];});let _0x42b054={};return _0x42b054[_0x220f3c]=_0x5211ff,await _0x6da26f[_0x45921a(0x663)](_0x292525,_0x42b054,_0x5ea15c);}catch(_0x33988b){return console[_0x45921a(0x2fb)](_0x33988b),null;}}async[a0_0x46df1a(0x4b4)](_0x1dee21){const _0x46fa82=a0_0x46df1a;try{let _0x91de29=this['getChatModelForOwner'](_0x1dee21[0x0][_0x46fa82(0xc9)][_0x46fa82(0x629)]['owner']),_0x1b4651=_0x1dee21[_0x46fa82(0x3f6)](_0x51d077=>({'updateOne':{'filter':{..._0x51d077[_0x46fa82(0xc9)][_0x46fa82(0x629)]},'update':{'$set':_0x51d077[_0x46fa82(0x75)]},'upsert':!0x0}})),_0xbc5c32=await _0x91de29[_0x46fa82(0x82)](_0x1b4651);return _0xbc5c32[_0x46fa82(0x177)]+_0xbc5c32['upsertedCount'];}catch(_0x2dde42){return console[_0x46fa82(0x2fb)](_0x2dde42),0x0;}}async[a0_0x46df1a(0x19e)](_0x349ebe){const _0xfd696=a0_0x46df1a;try{let _0x216d65={'group_isCommunity':'','group_announce':'','group_size':''},_0x1f28c5={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x283fc6={'$unset':_0x216d65};return(await this[_0xfd696(0x680)](_0x349ebe)[_0xfd696(0x4b4)](_0x1f28c5,_0x283fc6))[_0xfd696(0x177)];}catch(_0x2032f2){return console[_0xfd696(0x2fb)](_0xfd696(0x246),_0x2032f2),0x0;}}async[a0_0x46df1a(0x7ab)](_0x47de45){const _0x370b9d=a0_0x46df1a;try{let _0x4dec6e=this['getChatModelForOwner'](_0x47de45),_0x24e329={'leadInfo.etiquetas':{'$exists':!0x1}},_0x484df8={'$set':{'leadInfo.etiquetas':[]}};return(await _0x4dec6e['updateMany'](_0x24e329,_0x484df8))['modifiedCount'];}catch(_0x5877d1){return console[_0x370b9d(0x2fb)](_0x5877d1),0x0;}}async[a0_0x46df1a(0x56c)](_0x5b6b3b){const _0xab01cb=a0_0x46df1a;try{let _0xfd0f31=this[_0xab01cb(0x680)](_0x5b6b3b),_0x340af1={'leadInfo.tags':{'$exists':!0x1}},_0x3c2acf={'$set':{'leadInfo.tags':[]}};return(await _0xfd0f31[_0xab01cb(0x4b4)](_0x340af1,_0x3c2acf))[_0xab01cb(0x177)];}catch(_0x1d5cf2){return console[_0xab01cb(0x2fb)](_0x1d5cf2),0x0;}}async['updateMissingCustomFields'](_0xd6438e){const _0xeb2ccc=a0_0x46df1a;try{let _0x5b2e09=this[_0xeb2ccc(0x680)](_0xd6438e),_0x520452={'leadInfo.customFields':{'$exists':!0x1}},_0x4d9160={'$set':{'leadInfo.customFields':[]}};return(await _0x5b2e09[_0xeb2ccc(0x4b4)](_0x520452,_0x4d9160))[_0xeb2ccc(0x177)];}catch(_0x202523){return console[_0xeb2ccc(0x2fb)](_0x202523),0x0;}}async['insertMany'](_0x60ae76,_0x61ca28){const _0x1518af=a0_0x46df1a;if(!Array[_0x1518af(0x119)](_0x60ae76)||_0x60ae76[_0x1518af(0x5e9)]===0x0)throw new Error(_0x1518af(0x1a2));try{return(await this[_0x1518af(0x680)](_0x61ca28)['insertMany'](_0x60ae76))['length'];}catch(_0x597226){throw console['error']('Erro\x20ao\x20inserir\x20chats:',_0x597226),_0x597226;}}async['deleteChat'](_0x3ae758,_0x308295){const _0x4ff03b=a0_0x46df1a;try{await this[_0x4ff03b(0x680)](_0x308295)[_0x4ff03b(0x52e)]({'_id':_0x3ae758});}catch(_0x5eb0a6){throw console[_0x4ff03b(0x2fb)](_0x4ff03b(0x31f),_0x5eb0a6),_0x5eb0a6;}}},Wt=class extends _{constructor(_0x327b1c,_0x1eab0a,_0x191fa3){const _0x5c3147=a0_0x46df1a;super(_0x1eab0a),this[_0x5c3147(0x4a6)]=_0x327b1c,this[_0x5c3147(0x46a)]=_0x1eab0a,this[_0x5c3147(0x767)]=_0x191fa3;}async['insert'](_0x532a19){const _0x47e63e=a0_0x46df1a;if(_0x532a19[_0x47e63e(0x5e9)]!==0x0)try{return{'insertCount':(await this['cacheContactModel'][_0x47e63e(0x2a5)]([..._0x532a19]))[_0x47e63e(0x5e9)]};}catch(_0x2b1701){return _0x2b1701;}}async['update'](_0xd14bec,_0x4f6eca){const _0x4208bd=a0_0x46df1a;try{let _0x4438a5=I(_0xd14bec[_0x4208bd(0x629)]);return{'updatedCount':(await this[_0x4208bd(0x4a6)][_0x4208bd(0x4b4)](_0x4438a5,{'$set':_0x4f6eca}))['modifiedCount']};}catch(_0x5eb710){return console[_0x4208bd(0x2fb)](_0x4208bd(0x11b),_0x5eb710),{'error':_0x5eb710['toString']()};}}async[a0_0x46df1a(0x5f5)](_0x185c2b){const _0x484537=a0_0x46df1a;try{let _0x13a6e1={'_id':{'$in':_0x185c2b}};return await this[_0x484537(0x4a6)][_0x484537(0x336)](_0x13a6e1)[_0x484537(0x133)]();}catch(_0x332a62){return console['error']('Error\x20finding\x20many\x20contacts:',_0x332a62),[];}}async[a0_0x46df1a(0x22c)](_0x4f6dd4){const _0x5ec413=a0_0x46df1a;try{return{'deletedCount':(await this[_0x5ec413(0x4a6)][_0x5ec413(0x708)]({..._0x4f6dd4[_0x5ec413(0x629)]}))['deletedCount']};}catch(_0xd22040){return{'error':_0xd22040?.['toString']()};}}async[a0_0x46df1a(0x336)](_0x57456f){const _0x43a77c=a0_0x46df1a;try{let _0x434d8d=I(_0x57456f[_0x43a77c(0x629)]);return await this[_0x43a77c(0x4a6)][_0x43a77c(0x336)](_0x434d8d)[_0x43a77c(0x759)](_0x57456f?.['limit']??0x0)[_0x43a77c(0x133)]();}catch{return[];}}async['findOne'](_0x11a77f){const _0x469fc0=a0_0x46df1a;try{let _0x1696fe=I(_0x11a77f[_0x469fc0(0x629)]);return await this[_0x469fc0(0x4a6)][_0x469fc0(0x404)](_0x1696fe)[_0x469fc0(0x133)]();}catch{return null;}}},zt=class extends _{[a0_0x46df1a(0x657)](_0x3149bf){return Na(_0x3149bf);}async['updateOne'](_0xc7bbbd,_0x512126,_0x339a7a,_0x22013a){const _0x1d1dd6=a0_0x46df1a;try{let _0x17420a={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x22013a},_0x457c06=this[_0x1d1dd6(0x657)](_0x339a7a),_0x3480c4=I(_0xc7bbbd[_0x1d1dd6(0x629)]);return await _0x457c06[_0x1d1dd6(0x663)](_0x3480c4,{'$set':_0x512126},_0x17420a);}catch(_0xa348c6){return console[_0x1d1dd6(0x2fb)](_0xa348c6),null;}}async[a0_0x46df1a(0x336)](_0x4250e5,_0x12349b){const _0x4c4887=a0_0x46df1a;try{let _0x4b92a1=this[_0x4c4887(0x657)](_0x12349b),_0x5a2b02=I(_0x4250e5['where']);return await _0x4b92a1[_0x4c4887(0x336)](_0x5a2b02);}catch(_0xa39cb1){console['error'](_0xa39cb1);}}async[a0_0x46df1a(0x22c)](_0x160fb0,_0x57b394){const _0x3ff55a=a0_0x46df1a;try{let _0x11dc71=this[_0x3ff55a(0x657)](_0x57b394),_0x3f580f=I(_0x160fb0[_0x3ff55a(0x629)]);await _0x11dc71[_0x3ff55a(0x708)](_0x3f580f);}catch(_0x84fa87){console[_0x3ff55a(0x2fb)](_0x84fa87);}}async[a0_0x46df1a(0x3fd)](_0x179087){const _0x216c17=a0_0x46df1a;try{return await this[_0x216c17(0x657)](_0x179087)[_0x216c17(0x75d)]['drop'](),{'success':!0x0};}catch(_0x3d23a4){return console['error'](_0x3d23a4),{'success':!0x1,'error':_0x3d23a4};}}},Ht=class{constructor(_0x33aab6){const _0x2eb2fa=a0_0x46df1a;this[_0x2eb2fa(0xb7)]=_0x33aab6;}async[a0_0x46df1a(0x510)]({instanceName:_0x270f2e},_0x10833a){const _0x4876a7=a0_0x46df1a;return await this['waMonitor'][_0x4876a7(0x6f7)][_0x270f2e][_0x4876a7(0x510)](_0x10833a);}async[a0_0x46df1a(0x210)]({instanceName:_0x671230},_0x560a07){const _0x5898e0=a0_0x46df1a;return await this[_0x5898e0(0xb7)][_0x5898e0(0x6f7)][_0x671230][_0x5898e0(0x210)](_0x560a07);}async['importChats']({instanceName:_0x5778dd},_0x264636){const _0x5cb4b3=a0_0x46df1a;return await this[_0x5cb4b3(0xb7)][_0x5cb4b3(0x6f7)][_0x5778dd]['importChats'](_0x264636);}async[a0_0x46df1a(0x1b9)]({instanceName:_0x11cd6e},_0x3b26bd){const _0x379756=a0_0x46df1a;return await this['waMonitor']['waInstances'][_0x11cd6e][_0x379756(0x654)](_0x3b26bd);}async['archiveChat']({instanceName:_0x1cabfe},_0x364c71){const _0x49ca2d=a0_0x46df1a;return await this[_0x49ca2d(0xb7)][_0x49ca2d(0x6f7)][_0x1cabfe]['archiveChat'](_0x364c71);}async[a0_0x46df1a(0x223)]({instanceName:_0x37ad40},_0x5a39b0){const _0x3c2d77=a0_0x46df1a;return await this[_0x3c2d77(0xb7)][_0x3c2d77(0x6f7)][_0x37ad40][_0x3c2d77(0x223)](_0x5a39b0);}async['fetchProfilePicture']({instanceName:_0x51fa10},_0x190792){const _0x443c38=a0_0x46df1a;return await this['waMonitor'][_0x443c38(0x6f7)][_0x51fa10]['profilePicture'](_0x190792[_0x443c38(0x731)]);}async[a0_0x46df1a(0x59e)]({instanceName:_0x52d2dc},_0x365937){const _0x381a4f=a0_0x46df1a;return await this['waMonitor'][_0x381a4f(0x6f7)][_0x52d2dc][_0x381a4f(0x59e)](_0x365937[_0x381a4f(0x731)]);}async[a0_0x46df1a(0x3f9)]({instanceName:_0x393b18},_0x2d105e){const _0x23bf94=a0_0x46df1a;return await this[_0x23bf94(0xb7)][_0x23bf94(0x6f7)][_0x393b18][_0x23bf94(0x3f9)](_0x2d105e);}async[a0_0x46df1a(0x6c)]({instanceName:_0x1f3e91},_0x3e67ea){const _0x598788=a0_0x46df1a;return await this['waMonitor'][_0x598788(0x6f7)][_0x1f3e91][_0x598788(0x6c)](_0x3e67ea);}async[a0_0x46df1a(0x59b)]({instanceName:_0x3c5d39},_0x1ef97d){const _0x9fe131=a0_0x46df1a;return await this[_0x9fe131(0xb7)][_0x9fe131(0x6f7)][_0x3c5d39][_0x9fe131(0x59b)](_0x1ef97d);}async[a0_0x46df1a(0x6b7)]({instanceName:_0x4bdc00},_0x9f3a84){const _0x4a3b4c=a0_0x46df1a;return await this[_0x4a3b4c(0xb7)][_0x4a3b4c(0x6f7)][_0x4bdc00]['fetchMessages'](_0x9f3a84);}async[a0_0x46df1a(0x67b)]({instanceName:_0x54cacb}){const _0x55adee=a0_0x46df1a;return await this['waMonitor'][_0x55adee(0x6f7)][_0x54cacb][_0x55adee(0x67b)]();}async[a0_0x46df1a(0x554)]({instanceName:_0x3114df}){const _0x1ba1ff=a0_0x46df1a;return await this[_0x1ba1ff(0xb7)]['waInstances'][_0x3114df][_0x1ba1ff(0x554)]();}async[a0_0x46df1a(0x645)]({instanceName:_0xfd729a}){const _0x5c132e=a0_0x46df1a;return await this[_0x5c132e(0xb7)]['waInstances'][_0xfd729a][_0x5c132e(0x645)]();}async['updatePrivacySettings']({instanceName:_0x1bd238},_0x131219){const _0x364e62=a0_0x46df1a;return await this[_0x364e62(0xb7)][_0x364e62(0x6f7)][_0x1bd238][_0x364e62(0x2b5)](_0x131219);}async[a0_0x46df1a(0x698)]({instanceName:_0x22f63d},_0x4b8dd6){const _0x5071c8=a0_0x46df1a;return await this[_0x5071c8(0xb7)][_0x5071c8(0x6f7)][_0x22f63d][_0x5071c8(0x698)](_0x4b8dd6[_0x5071c8(0x731)]);}async[a0_0x46df1a(0x13b)]({instanceName:_0x1c375c},_0x1344e6){const _0x4a00fa=a0_0x46df1a;return await this['waMonitor'][_0x4a00fa(0x6f7)][_0x1c375c][_0x4a00fa(0x13b)](_0x1344e6['name']);}async[a0_0x46df1a(0x1d3)]({instanceName:_0x30c9e5},_0x3fd05d){const _0x4dba25=a0_0x46df1a;return await this[_0x4dba25(0xb7)][_0x4dba25(0x6f7)][_0x30c9e5]['updateProfileStatus'](_0x3fd05d[_0x4dba25(0x16f)]);}async[a0_0x46df1a(0x79a)]({instanceName:_0x2f8079},_0x1c582a){const _0x226876=a0_0x46df1a;return await this['waMonitor'][_0x226876(0x6f7)][_0x2f8079][_0x226876(0x79a)](_0x1c582a[_0x226876(0x1ac)]);}async[a0_0x46df1a(0x1c7)]({instanceName:_0x2cc7e0},_0x34240a){const _0x71d5fc=a0_0x46df1a;return await this[_0x71d5fc(0xb7)][_0x71d5fc(0x6f7)][_0x2cc7e0][_0x71d5fc(0x1c7)]();}},Kt=require(a0_0x46df1a(0x5eb)),Qt=class l{constructor(_0x1adf1f,_0x55c8aa,_0xe87d4a,_0x47465f,_0x37ba4f){const _0x72ec59=a0_0x46df1a;this[_0x72ec59(0xb7)]=_0x1adf1f,this[_0x72ec59(0x46a)]=_0x55c8aa,this['repository']=_0xe87d4a,this[_0x72ec59(0x1ee)]=_0x47465f,this['authService']=_0x37ba4f,this[_0x72ec59(0xed)]=new $(l['name']);}async['createInstance']({instanceName:_0x456b79,apikey:_0x2d2400,number:_0x20f5fd,proxy:_0x1b6279=!0x0}){const _0x4948eb=a0_0x46df1a;try{let _0x4ba659=new Ne(this['configService'],this[_0x4948eb(0x1ee)],this[_0x4948eb(0x91)]);_0x4ba659[_0x4948eb(0x88)]=_0x456b79,this[_0x4948eb(0xb7)][_0x4948eb(0x6f7)][_0x4ba659[_0x4948eb(0x88)]]=_0x4ba659;let _0x230e09={};_0x2d2400?(await this[_0x4948eb(0x91)][_0x4948eb(0x35d)][_0x4948eb(0x83)]({'apikey':_0x2d2400},_0x456b79),_0x230e09[_0x4948eb(0x201)]=_0x2d2400):_0x230e09=await this[_0x4948eb(0x3e8)][_0x4948eb(0x5b7)]({'instanceName':_0x4ba659[_0x4948eb(0x88)]});let _0x4a126e;if(_0x20f5fd){if(_0x4a126e=await this['verifyWhatsAppNumber'](_0x20f5fd),_0x4a126e[_0x4948eb(0x2fb)])throw new x(_0x4a126e[_0x4948eb(0x2fb)][_0x4948eb(0x49e)]());_0x20f5fd=_0x4a126e[_0x4948eb(0x731)];}let _0x39fb5b;return await _0x4ba659[_0x4948eb(0x21b)](_0x20f5fd),await(0x0,Kt['delay'])(0xfa0),_0x20f5fd&&await(0x0,Kt[_0x4948eb(0x298)])(0xbb8),_0x39fb5b=_0x4ba659['qrCode'],{'instance':{'instanceName':_0x4ba659[_0x4948eb(0x88)],'status':_0x4948eb(0x757)},'hash':_0x230e09,'qrcode':_0x39fb5b};}catch(_0x249bb1){throw this[_0x4948eb(0xed)][_0x4948eb(0x2fb)](_0x249bb1),_0x249bb1;}}async[a0_0x46df1a(0x2ec)]({instanceName:_0x5ef464,number:_0x2fb3c3=null}){const _0x5361b5=a0_0x46df1a;try{let _0x48cc23=this[_0x5361b5(0xb7)][_0x5361b5(0x6f7)][_0x5ef464];switch(_0x48cc23?.['connectionStatus']?.['state']){case _0x5361b5(0x60f):return await _0x48cc23['connectToWhatsapp'](_0x2fb3c3),await(0x0,Kt[_0x5361b5(0x298)])(0x7d0),_0x48cc23['qrCode'];case _0x5361b5(0x159):return _0x48cc23[_0x5361b5(0x350)];default:return await this['connectionState']({'instanceName':_0x5ef464});}}catch(_0x5e366b){this['logger'][_0x5361b5(0x307)](_0x5e366b);}}async[a0_0x46df1a(0xe8)]({instanceName:_0x24b6d0}){const _0x4f6e07=a0_0x46df1a;let _0x502cc5=this[_0x4f6e07(0xb7)]['waInstances'][_0x24b6d0][_0x4f6e07(0x349)],_0x39f584=null;_0x502cc5[_0x4f6e07(0x4dc)]===_0x4f6e07(0x7b)&&_0x24b6d0&&(_0x39f584=await this['waMonitor'][_0x4f6e07(0x29f)](_0x24b6d0));let _0x228553=null;return _0x502cc5['state']==='connecting'&&_0x24b6d0&&(_0x228553=this['waMonitor'][_0x4f6e07(0x6f7)][_0x24b6d0][_0x4f6e07(0x350)]),{'instance':_0x24b6d0,'connectionStatus':_0x502cc5,'instanceInfo':_0x39f584,'qrcode':_0x228553};}async['verifyWhatsAppNumber'](_0x4014a4){const _0x159a76=a0_0x46df1a;_0x4014a4=_0x4014a4[_0x159a76(0x420)](/\D/g,'');let _0x1e1640=Object[_0x159a76(0x794)](this[_0x159a76(0xb7)][_0x159a76(0x6f7)])[_0x159a76(0x57a)](_0x31171f=>{const _0x254833=_0x159a76;let _0x622f6e=this['waMonitor'][_0x254833(0x6f7)][_0x31171f];return _0x622f6e&&_0x622f6e[_0x254833(0x349)]&&_0x622f6e['connectionStatus']['state']===_0x254833(0x7b);});if(_0x1e1640[_0x159a76(0x5e9)]===0x0)return{'number':this['formatBRNumber'](_0x4014a4)};let _0x36598d=Math[_0x159a76(0x54d)](Math[_0x159a76(0x259)]()*_0x1e1640['length']),_0x58b476=_0x1e1640[_0x36598d];try{let _0x26b863=(await this['waMonitor'][_0x159a76(0x6f7)][_0x58b476][_0x159a76(0x210)]({'numbers':[_0x4014a4]}))[_0x159a76(0x741)]();return _0x26b863[_0x159a76(0x297)]?{'number':_0x26b863[_0x159a76(0x540)]['replace']('@s.whatsapp.net','')}:{'number':_0x4014a4,'error':_0x159a76(0x30c)};}catch(_0xb37e44){return this['logger'][_0x159a76(0x2fb)](_0x159a76(0x251)+_0xb37e44),{'number':_0x4014a4,'error':'Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.'};}}[a0_0x46df1a(0x56e)](_0x5863f3){const _0x4b0d5f=a0_0x46df1a;let _0x1ed129=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x4b0d5f(0x1e2)](_0x5863f3);if(_0x1ed129&&_0x1ed129[0x1]==='55'){let _0x18d2ea=_0x1ed129[0x2],_0x299780=_0x1ed129[0x3],_0x1e1d81=_0x1ed129[0x4];if(parseInt(_0x18d2ea)>=0x1f&&_0x299780==='9')return _0x1ed129[0x1]+_0x18d2ea+_0x1e1d81;}return _0x5863f3;}async['restartInstance']({instanceName:_0x2878bb}){const _0x5a8b85=a0_0x46df1a;try{return this[_0x5a8b85(0xb7)]['waInstances'][_0x2878bb]?.['client']?.['ws']?.[_0x5a8b85(0x60f)](),{'status':'SUCCESS','error':!0x1,'response':{'message':'Instance\x20restarted'}};}catch(_0xdbc0a4){this[_0x5a8b85(0xed)][_0x5a8b85(0x2fb)](_0xdbc0a4);}}async['fetchInstances']({instanceName:_0x3c0950}){const _0x1c8206=a0_0x46df1a;return _0x3c0950?this[_0x1c8206(0xb7)][_0x1c8206(0x29f)](_0x3c0950):this[_0x1c8206(0xb7)][_0x1c8206(0x29f)]();}async[a0_0x46df1a(0x1ab)]({instanceName:_0x33b7e1}){const _0x30fe67=a0_0x46df1a;try{return await this[_0x30fe67(0xb7)][_0x30fe67(0x6f7)][_0x33b7e1]?.['client']?.[_0x30fe67(0x1ab)](_0x30fe67(0x575)+_0x33b7e1),{'error':!0x1,'message':_0x30fe67(0x2d7)};}catch(_0x20ef7e){throw new x(_0x20ef7e[_0x30fe67(0x49e)]());}}async[a0_0x46df1a(0x67e)]({instanceName:_0x5ba93}){const _0x7a113f=a0_0x46df1a;if((await this[_0x7a113f(0xe8)]({'instanceName':_0x5ba93}))['connectionStatus'][_0x7a113f(0x4dc)]===_0x7a113f(0x7b))throw new m(['Deletion\x20failed',_0x7a113f(0x74d)]);try{return delete this[_0x7a113f(0xb7)]['waInstances'][_0x5ba93],{'error':!0x1,'message':_0x7a113f(0x212)};}catch(_0x4f2fe2){throw new m(_0x4f2fe2['toString']());}}},ae=require(a0_0x46df1a(0x406)),Yt=class{constructor(_0x2db323){const _0x5418a9=a0_0x46df1a;this[_0x5418a9(0xb7)]=_0x2db323;}async[a0_0x46df1a(0x730)]({instanceName:_0x172bc1},_0x1c6c51){const _0x2a3f68=a0_0x46df1a;return await this['waMonitor'][_0x2a3f68(0x6f7)][_0x172bc1][_0x2a3f68(0xc5)](_0x1c6c51);}async[a0_0x46df1a(0x4b0)]({instanceName:_0x4d6a94},_0x62d11e){const _0x9b566c=a0_0x46df1a;return await this['waMonitor'][_0x9b566c(0x6f7)][_0x4d6a94][_0x9b566c(0x3c1)](_0x62d11e);}async['sendMedia']({instanceName:_0x5879d4},_0x1635d7){const _0x1572e1=a0_0x46df1a;if((0x0,ae[_0x1572e1(0x3ec)])(_0x1635d7?.[_0x1572e1(0x669)]?.[_0x1572e1(0x425)])&&!_0x1635d7?.[_0x1572e1(0x669)]?.[_0x1572e1(0x1e4)])throw new m(_0x1572e1(0x5d7));if((0x0,ae['isURL'])(_0x1635d7?.['mediaMessage']?.[_0x1572e1(0x425)])||(0x0,ae[_0x1572e1(0x3ec)])(_0x1635d7?.[_0x1572e1(0x669)]?.['media']))return await this[_0x1572e1(0xb7)][_0x1572e1(0x6f7)][_0x5879d4][_0x1572e1(0x669)](_0x1635d7);throw new m(_0x1572e1(0x3d1));}async[a0_0x46df1a(0x6cf)]({instanceName:_0xa81291},_0x2daceb){const _0x1e32b1=a0_0x46df1a;if((0x0,ae[_0x1e32b1(0xa9)])(_0x2daceb[_0x1e32b1(0x13f)][_0x1e32b1(0x24c)])||(0x0,ae['isBase64'])(_0x2daceb[_0x1e32b1(0x13f)]['image']))return await this[_0x1e32b1(0xb7)][_0x1e32b1(0x6f7)][_0xa81291]['mediaSticker'](_0x2daceb);throw new m(_0x1e32b1(0x3d1));}async[a0_0x46df1a(0x38b)]({instanceName:_0x3f8735},_0x22f1ed){const _0x364491=a0_0x46df1a;if((0x0,ae[_0x364491(0xa9)])(_0x22f1ed['audioMessage']['audio'])||(0x0,ae[_0x364491(0x3ec)])(_0x22f1ed['audioMessage'][_0x364491(0x47f)]))return await this[_0x364491(0xb7)]['waInstances'][_0x3f8735][_0x364491(0x5cb)](_0x22f1ed);throw new m(_0x364491(0x3d1));}async[a0_0x46df1a(0x315)]({instanceName:_0x5658f7},_0x3384f){const _0x205781=a0_0x46df1a;if((0x0,ae[_0x205781(0x3ec)])(_0x3384f[_0x205781(0x290)][_0x205781(0x669)]?.['media'])&&!_0x3384f['buttonMessage'][_0x205781(0x669)]?.['fileName'])throw new m(_0x205781(0x5d7));return await this[_0x205781(0xb7)][_0x205781(0x6f7)][_0x5658f7][_0x205781(0x290)](_0x3384f);}async[a0_0x46df1a(0x4de)]({instanceName:_0x5bf19d},_0x130d1c){const _0x534f31=a0_0x46df1a;return await this['waMonitor']['waInstances'][_0x5bf19d][_0x534f31(0x14d)](_0x130d1c);}async[a0_0x46df1a(0x362)]({instanceName:_0x5be10c},_0x3a3c3b){const _0x2972f5=a0_0x46df1a;return await this[_0x2972f5(0xb7)][_0x2972f5(0x6f7)][_0x5be10c][_0x2972f5(0x79e)](_0x3a3c3b);}async[a0_0x46df1a(0xc8)]({instanceName:_0x45450b},_0x573a84){const _0x4f4987=a0_0x46df1a;return await this[_0x4f4987(0xb7)][_0x4f4987(0x6f7)][_0x45450b]['listMessage'](_0x573a84);}async[a0_0x46df1a(0x564)]({instanceName:_0x31e692},_0x4b90bf){const _0x19d3a4=a0_0x46df1a;return await this[_0x19d3a4(0xb7)]['waInstances'][_0x31e692][_0x19d3a4(0x2cd)](_0x4b90bf);}async[a0_0x46df1a(0x6dc)]({instanceName:_0x459db0},_0x3a39b0){const _0x5c7ab8=a0_0x46df1a;if(!_0x3a39b0['reactionMessage'][_0x5c7ab8(0x37f)][_0x5c7ab8(0x7a2)](/[^\(\)\w\sà-ú"-\+]+/))throw new m(_0x5c7ab8(0x55e));return await this[_0x5c7ab8(0xb7)][_0x5c7ab8(0x6f7)][_0x459db0][_0x5c7ab8(0x1e5)](_0x3a39b0);}async[a0_0x46df1a(0x6d8)]({instanceName:_0x42df52},_0x3c8d99){const _0x312c3a=a0_0x46df1a;return await this[_0x312c3a(0xb7)][_0x312c3a(0x6f7)][_0x42df52][_0x312c3a(0x288)](_0x3c8d99);}},Li=require(a0_0x46df1a(0x73a)),Js=require(a0_0x46df1a(0x3ba)),Xt=class l{constructor(_0xc70bc4,_0x61816d,_0x5886ba){const _0x74c76f=a0_0x46df1a;this[_0x74c76f(0x46a)]=_0xc70bc4,this[_0x74c76f(0xb7)]=_0x61816d,this[_0x74c76f(0x91)]=_0x5886ba,this[_0x74c76f(0xed)]=new $(l[_0x74c76f(0x11d)]);}async['jwt'](_0x3eacce){const _0x37507c=a0_0x46df1a;let _0x5c581b=this['configService'][_0x37507c(0x20f)](_0x37507c(0x72d))[_0x37507c(0x580)],_0x2d4945=(0x0,Li['sign'])({'instanceName':_0x3eacce['instanceName'],'apiName':rt,'tokenId':(0x0,Js['v4'])()},_0x5c581b[_0x37507c(0x140)],{'expiresIn':_0x5c581b[_0x37507c(0x3ac)],'encoding':_0x37507c(0x565),'subject':_0x37507c(0x295)}),_0x4c3839=await this['repository'][_0x37507c(0x35d)][_0x37507c(0x83)]({'jwt':_0x2d4945},_0x3eacce['instanceName']);if(_0x4c3839[_0x37507c(0x2fb)])throw this[_0x37507c(0xed)]['error']({'localError':l[_0x37507c(0x11d)]+'.jwt','error':_0x4c3839['error']}),new m('Authentication\x20error',_0x4c3839[_0x37507c(0x2fb)]?.[_0x37507c(0x49e)]());return{'jwt':_0x2d4945};}async[a0_0x46df1a(0x201)](_0x58c41a){const _0x63796e=a0_0x46df1a;let _0x33ae3b=(0x0,Js['v4'])()[_0x63796e(0x117)](),_0x347e9d=await this['repository'][_0x63796e(0x35d)]['create']({'apikey':_0x33ae3b},_0x58c41a['instanceName']);if(_0x347e9d[_0x63796e(0x2fb)])throw this[_0x63796e(0xed)][_0x63796e(0x2fb)]({'localError':l[_0x63796e(0x11d)]+_0x63796e(0x659),'error':_0x347e9d[_0x63796e(0x2fb)]}),new m(_0x63796e(0x1eb),_0x347e9d['error']?.[_0x63796e(0x49e)]());return{'apikey':_0x33ae3b};}async[a0_0x46df1a(0x5b7)](_0x5365ce){const _0x1f90e2=a0_0x46df1a;let _0x323515=this[_0x1f90e2(0x46a)]['get'](_0x1f90e2(0x72d));return await this[_0x323515['TYPE']](_0x5365ce);}},Zt=class{constructor(_0x9d6dd7){const _0x2f67f9=a0_0x46df1a;this[_0x2f67f9(0xb7)]=_0x9d6dd7;}async[a0_0x46df1a(0x85)](_0x24bcec,_0xfed640){const _0x1a9461=a0_0x46df1a;return await this[_0x1a9461(0xb7)]['waInstances'][_0x24bcec[_0x1a9461(0x88)]][_0x1a9461(0x85)](_0xfed640);}async[a0_0x46df1a(0x7a5)](_0x35fd60,_0x317620){const _0x348e49=a0_0x46df1a;return await this['waMonitor'][_0x348e49(0x6f7)][_0x35fd60['instanceName']]['updateGroupPicture'](_0x317620);}async[a0_0x46df1a(0x66b)](_0x39dbf0,_0x339cfd){const _0x60e362=a0_0x46df1a;return await this[_0x60e362(0xb7)][_0x60e362(0x6f7)][_0x39dbf0['instanceName']][_0x60e362(0x66b)](_0x339cfd);}async[a0_0x46df1a(0x34a)](_0x4343,_0x490f50){const _0x4b58cb=a0_0x46df1a;return await this['waMonitor'][_0x4b58cb(0x6f7)][_0x4343[_0x4b58cb(0x88)]][_0x4b58cb(0x34a)](_0x490f50);}async[a0_0x46df1a(0x5f3)](_0x113224,_0x4ce55){const _0x15b3fc=a0_0x46df1a;return await this[_0x15b3fc(0xb7)]['waInstances'][_0x113224[_0x15b3fc(0x88)]][_0x15b3fc(0x5f3)](_0x4ce55);}async[a0_0x46df1a(0x55c)](_0x4d2456,_0x4d0e4d){const _0x390599=a0_0x46df1a;return await this[_0x390599(0xb7)][_0x390599(0x6f7)][_0x4d2456[_0x390599(0x88)]][_0x390599(0x55c)](_0x4d0e4d);}async['findGroupInfo'](_0x6ef72f,_0x4b6108){const _0x2b9ed2=a0_0x46df1a;return await this[_0x2b9ed2(0xb7)]['waInstances'][_0x6ef72f[_0x2b9ed2(0x88)]][_0x2b9ed2(0x200)](_0x4b6108);}async[a0_0x46df1a(0x120)](_0x3c521f){const _0x3a3cb9=a0_0x46df1a;return await this[_0x3a3cb9(0xb7)][_0x3a3cb9(0x6f7)][_0x3c521f[_0x3a3cb9(0x88)]][_0x3a3cb9(0x120)]();}async['inviteCode'](_0x5a5952,_0xf20566){const _0x44cdbc=a0_0x46df1a;return await this['waMonitor'][_0x44cdbc(0x6f7)][_0x5a5952[_0x44cdbc(0x88)]][_0x44cdbc(0x2aa)](_0xf20566);}async[a0_0x46df1a(0x737)](_0x585388,_0x30d4ff){const _0x5bcffe=a0_0x46df1a;return await this[_0x5bcffe(0xb7)][_0x5bcffe(0x6f7)][_0x585388[_0x5bcffe(0x88)]]['joinGroup'](_0x30d4ff);}async['groupGetInviteInfo'](_0x48763d,_0x459e5e){const _0x4fd55d=a0_0x46df1a;return await this['waMonitor'][_0x4fd55d(0x6f7)][_0x48763d['instanceName']][_0x4fd55d(0x748)](_0x459e5e);}async['revokeInviteCode'](_0x319257,_0x33e523){const _0x56d2e4=a0_0x46df1a;return await this[_0x56d2e4(0xb7)][_0x56d2e4(0x6f7)][_0x319257[_0x56d2e4(0x88)]][_0x56d2e4(0x3b9)](_0x33e523);}async[a0_0x46df1a(0x158)](_0x5323fe,_0x3db89b){const _0x328c34=a0_0x46df1a;return await this[_0x328c34(0xb7)]['waInstances'][_0x5323fe[_0x328c34(0x88)]][_0x328c34(0x158)](_0x3db89b);}async['updateGParticipate'](_0x1ae2a7,_0x5966b2){const _0x2cd7d0=a0_0x46df1a;return await this[_0x2cd7d0(0xb7)][_0x2cd7d0(0x6f7)][_0x1ae2a7[_0x2cd7d0(0x88)]][_0x2cd7d0(0x36a)](_0x5966b2);}async[a0_0x46df1a(0x2c4)](_0x4c7938,_0x40b249){const _0x257374=a0_0x46df1a;return await this[_0x257374(0xb7)]['waInstances'][_0x4c7938[_0x257374(0x88)]][_0x257374(0x2c4)](_0x40b249);}async[a0_0x46df1a(0x30e)](_0x35dd1a,_0x2225ae){const _0x3ceb01=a0_0x46df1a;return await this[_0x3ceb01(0xb7)][_0x3ceb01(0x6f7)][_0x35dd1a[_0x3ceb01(0x88)]][_0x3ceb01(0x30e)](_0x2225ae);}},es=class{constructor(_0x1e141c){this['waMonitor']=_0x1e141c;}[a0_0x46df1a(0x83)](_0x2d5130,_0x46a255){const _0x4c3701=a0_0x46df1a;return this[_0x4c3701(0xb7)][_0x4c3701(0x6f7)][_0x2d5130[_0x4c3701(0x88)]]['setWebhook'](_0x46a255);}async[a0_0x46df1a(0x336)](_0x2f7f4b){const _0x4b92d7=a0_0x46df1a;try{return await this[_0x4b92d7(0xb7)][_0x4b92d7(0x6f7)][_0x2f7f4b[_0x4b92d7(0x88)]][_0x4b92d7(0x475)]();}catch{return{'enabled':null,'url':''};}}},Wp=new $(a0_0x46df1a(0x14f)),ts=class{constructor(_0x5ac58a){this['waMonitor']=_0x5ac58a;}async['editScheduleMessage'](_0x25fd7a,_0x1dc9c8){const _0x56f23c=a0_0x46df1a;return await this[_0x56f23c(0xb7)]['waInstances'][_0x25fd7a[_0x56f23c(0x88)]]['editScheduleMessage'](_0x1dc9c8);}async[a0_0x46df1a(0x2cc)](_0x3aca67){const _0x5e9f12=a0_0x46df1a;return await this[_0x5e9f12(0xb7)][_0x5e9f12(0x6f7)][_0x3aca67[_0x5e9f12(0x88)]][_0x5e9f12(0x2cc)]();}async[a0_0x46df1a(0xe3)](_0x1d4951){const _0x51e8db=a0_0x46df1a;return await this['waMonitor'][_0x51e8db(0x6f7)][_0x1d4951[_0x51e8db(0x88)]][_0x51e8db(0xe3)]();}async[a0_0x46df1a(0x5b4)](_0x909871){const _0x33fe27=a0_0x46df1a;return await this[_0x33fe27(0xb7)][_0x33fe27(0x6f7)][_0x909871[_0x33fe27(0x88)]][_0x33fe27(0x5b4)]();}async['updateAgent'](_0x54d03f,_0x38497b){const _0x547dde=a0_0x46df1a;return await this[_0x547dde(0xb7)]['waInstances'][_0x54d03f['instanceName']][_0x547dde(0x275)](_0x38497b);}async[a0_0x46df1a(0x2f0)](_0x1a4551,_0x31a73a){const _0x27259a=a0_0x46df1a;return await this[_0x27259a(0xb7)][_0x27259a(0x6f7)][_0x1a4551[_0x27259a(0x88)]][_0x27259a(0x2f0)](_0x31a73a);}async[a0_0x46df1a(0x696)](_0x47161d,_0x23806f){const _0x6c5a5a=a0_0x46df1a;return await this['waMonitor'][_0x6c5a5a(0x6f7)][_0x47161d['instanceName']][_0x6c5a5a(0x696)](_0x23806f);}async['updateFlowConfig'](_0x96f459,_0x916628){const _0x466a65=a0_0x46df1a;return await this[_0x466a65(0xb7)][_0x466a65(0x6f7)][_0x96f459['instanceName']]['updateFlowConfig'](_0x916628);}async[a0_0x46df1a(0x20a)](_0x1f1a1e,_0x46bbad){const _0x2792fe=a0_0x46df1a;return await this['waMonitor']['waInstances'][_0x1f1a1e[_0x2792fe(0x88)]][_0x2792fe(0x20a)](_0x46bbad);}async[a0_0x46df1a(0x73c)](_0x22ddd6,_0x44c9cc,_0x216350,_0x333e0d){const _0x46eee9=a0_0x46df1a;return await this[_0x46eee9(0xb7)][_0x46eee9(0x6f7)][_0x22ddd6]['startFlowWebhook'](_0x44c9cc,_0x216350,_0x333e0d);}async[a0_0x46df1a(0x3c9)](_0x279f3c,_0xa58b06){const _0x41be57=a0_0x46df1a;return await this[_0x41be57(0xb7)][_0x41be57(0x6f7)][_0x279f3c[_0x41be57(0x88)]][_0x41be57(0x3c9)](_0xa58b06);}async[a0_0x46df1a(0x524)](_0xc8915d,_0x306e81){const _0x5e48fc=a0_0x46df1a;return await this[_0x5e48fc(0xb7)][_0x5e48fc(0x6f7)][_0xc8915d['instanceName']][_0x5e48fc(0x524)](_0x306e81);}async[a0_0x46df1a(0x30f)](_0x32e101,_0x574bf6){const _0x5667e8=a0_0x46df1a;return await this['waMonitor']['waInstances'][_0x32e101[_0x5667e8(0x88)]][_0x5667e8(0x30f)](_0x574bf6);}async['deleteConversation'](_0x24b3f9,_0xac4062){const _0x2a2384=a0_0x46df1a;return await this[_0x2a2384(0xb7)]['waInstances'][_0x24b3f9[_0x2a2384(0x88)]][_0x2a2384(0x591)](_0xac4062);}async['getFlow'](_0x259614,_0x5bb249){const _0x31e2d3=a0_0x46df1a;return await this['waMonitor'][_0x31e2d3(0x6f7)][_0x259614[_0x31e2d3(0x88)]][_0x31e2d3(0x652)](_0x5bb249[_0x31e2d3(0x778)]);}async[a0_0x46df1a(0x5e8)](_0x2ff03c,_0x7d8957,_0x7df045){const _0x574f16=a0_0x46df1a;return await this[_0x574f16(0xb7)][_0x574f16(0x6f7)][_0x2ff03c[_0x574f16(0x88)]][_0x574f16(0x5e8)](_0x7d8957,_0x7df045);}async[a0_0x46df1a(0x5dc)](_0x27ac76,_0x21edf0,_0x5dd203){const _0x4fa008=a0_0x46df1a;return await this[_0x4fa008(0xb7)][_0x4fa008(0x6f7)][_0x27ac76[_0x4fa008(0x88)]][_0x4fa008(0x5dc)](_0x21edf0,_0x5dd203);}async[a0_0x46df1a(0x194)](_0x120aac,_0x5009c2){const _0xad00a1=a0_0x46df1a;return await this[_0xad00a1(0xb7)]['waInstances'][_0x120aac[_0xad00a1(0x88)]][_0xad00a1(0x194)](_0x5009c2);}async[a0_0x46df1a(0x2b9)](_0x5058ff,_0x33606a){const _0x5eb3e8=a0_0x46df1a;return await this[_0x5eb3e8(0xb7)][_0x5eb3e8(0x6f7)][_0x5058ff[_0x5eb3e8(0x88)]][_0x5eb3e8(0x2b9)](_0x33606a);}async[a0_0x46df1a(0x38e)](_0x366d99,_0x1702f2){const _0x24f266=a0_0x46df1a;return await this[_0x24f266(0xb7)]['waInstances'][_0x366d99['instanceName']][_0x24f266(0x38e)](_0x1702f2);}async[a0_0x46df1a(0x489)](_0x5e22a2,_0x2eb77a){const _0x23f0a0=a0_0x46df1a;return await this[_0x23f0a0(0xb7)][_0x23f0a0(0x6f7)][_0x5e22a2[_0x23f0a0(0x88)]]['editFlowCondition'](_0x2eb77a);}async[a0_0x46df1a(0x1df)](_0x3e7479,_0x4aab98){const _0x471060=a0_0x46df1a;return await this[_0x471060(0xb7)]['waInstances'][_0x3e7479[_0x471060(0x88)]]['editFlowVaredit'](_0x4aab98);}async[a0_0x46df1a(0x4ae)](_0x41db69,_0x2787cb){const _0x5989a7=a0_0x46df1a;return await this[_0x5989a7(0xb7)]['waInstances'][_0x41db69[_0x5989a7(0x88)]][_0x5989a7(0x4ae)](_0x2787cb);}async[a0_0x46df1a(0x400)](_0x5ce3bd,_0x34d900){const _0x445d59=a0_0x46df1a;return await this[_0x445d59(0xb7)]['waInstances'][_0x5ce3bd['instanceName']][_0x445d59(0x400)](_0x34d900);}async['allFlows'](_0x2258f6){const _0xc0e7e0=a0_0x46df1a;return await this[_0xc0e7e0(0xb7)][_0xc0e7e0(0x6f7)][_0x2258f6[_0xc0e7e0(0x88)]][_0xc0e7e0(0x503)]();}},ss=class{constructor(_0x83014e){const _0x17c2cf=a0_0x46df1a;this[_0x17c2cf(0xb0)]=_0x83014e;}async[a0_0x46df1a(0x786)](_0x316498,_0x581ee0){const _0x4db41f=a0_0x46df1a;return this[_0x4db41f(0xb0)][_0x4db41f(0x83)](_0x316498,_0x581ee0);}async[a0_0x46df1a(0x475)](_0x42d292){const _0x384e98=a0_0x46df1a;return this[_0x384e98(0xb0)][_0x384e98(0x336)](_0x42d292);}},as=class extends _{constructor(_0x421b93,_0x431518){const _0x553fe5=a0_0x46df1a;super(_0x431518),this[_0x553fe5(0x5cd)]=_0x421b93,this[_0x553fe5(0x46a)]=_0x431518;}async[a0_0x46df1a(0x83)](_0x5ceb07,_0x280fe1){const _0x2f1969=a0_0x46df1a;try{return this[_0x2f1969(0x50c)][_0x2f1969(0x544)]?{'insertCount':(await this[_0x2f1969(0x5cd)]['replaceOne']({'_id':_0x280fe1},{..._0x5ceb07},{'upsert':!0x0}))['modifiedCount']}:{'insertCount':0x1};}catch(_0x3c91f4){return _0x3c91f4;}}async[a0_0x46df1a(0x22c)](_0x24f98f){const _0x5802d8=a0_0x46df1a;try{if(this[_0x5802d8(0x50c)][_0x5802d8(0x544)]){await this[_0x5802d8(0x5cd)][_0x5802d8(0x52e)]({'_id':_0x24f98f});return;}}catch(_0x15c58e){return{'error':_0x15c58e};}}async['find'](_0x12c447){const _0x7e7070=a0_0x46df1a;try{if(this[_0x7e7070(0x50c)][_0x7e7070(0x544)])return await this['webhookModel'][_0x7e7070(0x404)]({'_id':_0x12c447});}catch{return{};}}},is=class extends _{constructor(_0x42ab0a,_0x25d349){const _0x262ca3=a0_0x46df1a;super(_0x25d349),this[_0x262ca3(0x6d1)]=_0x42ab0a,this['configService']=_0x25d349,this[_0x262ca3(0x35d)]=_0x25d349[_0x262ca3(0x20f)](_0x262ca3(0x72d));}async[a0_0x46df1a(0x83)](_0x501d05,_0x4cf27d){const _0x4ac2f6=a0_0x46df1a;try{if(this[_0x4ac2f6(0x50c)][_0x4ac2f6(0x544)])return{'insertCount':(await this['authModel']['updateOne']({'_id':_0x4cf27d},{'$set':{..._0x501d05}},{'upsert':!0x0}))[_0x4ac2f6(0x177)]};}catch(_0x39ca52){return{'error':_0x39ca52};}}async[a0_0x46df1a(0x65c)](_0x2b6585,_0x1c9398){const _0x476cba=a0_0x46df1a;try{if(this[_0x476cba(0x50c)][_0x476cba(0x544)])return{'insertCount':(await this[_0x476cba(0x6d1)][_0x476cba(0x4b4)](_0x2b6585,{'$set':_0x1c9398},{'upsert':!0x1}))[_0x476cba(0x177)]};throw new Error(_0x476cba(0x454));}catch(_0x16a27b){return{'error':_0x16a27b};}}async[a0_0x46df1a(0x708)](_0x42a21c){const _0x450135=a0_0x46df1a;try{if(this[_0x450135(0x50c)][_0x450135(0x544)])return{'insertCount':(await this['authModel'][_0x450135(0x708)](_0x42a21c))[_0x450135(0x712)]};throw new Error('[AUTH]\x20Database\x20is\x20not\x20enabled');}catch(_0x5407ee){return{'error':_0x5407ee};}}async[a0_0x46df1a(0x22c)](_0x244139){const _0x34c5dd=a0_0x46df1a;try{if(this[_0x34c5dd(0x50c)][_0x34c5dd(0x544)]){await this['authModel']['deleteOne']({'_id':_0x244139});return;}}catch(_0x5aee90){return{'error':_0x5aee90};}}async['find'](_0x406df9){const _0x17e568=a0_0x46df1a;try{if(this[_0x17e568(0x50c)][_0x17e568(0x544)])return await this['authModel'][_0x17e568(0x404)]({'_id':_0x406df9});}catch{return{};}}async['findAll'](){const _0x501275=a0_0x46df1a;try{if(this[_0x501275(0x50c)][_0x501275(0x544)])return await this[_0x501275(0x6d1)][_0x501275(0x336)]();}catch{return[];}}async[a0_0x46df1a(0x592)](_0x53807d){const _0x489e58=a0_0x46df1a;try{if(this['dbSettings'][_0x489e58(0x544)])return await this['authModel']['find'](_0x53807d);}catch{return[];}}},Fi=require(a0_0x46df1a(0x3ba)),os=class extends _{async[a0_0x46df1a(0x52e)](_0x2ee2cc){const _0x57d64c=a0_0x46df1a;try{let _0x102331=I(_0x2ee2cc[_0x57d64c(0x629)]);return{'deletedCount':(await fe[_0x57d64c(0x52e)](_0x102331))['deletedCount']};}catch(_0x244b98){return{'error':_0x244b98?.[_0x57d64c(0x49e)]()};}}async['updateOne'](_0x3e2767,_0x433b7){const _0x440ba5=a0_0x46df1a;try{let _0x1e2b6f=await fe[_0x440ba5(0x498)](_0x3e2767);return _0x1e2b6f?(Object['assign'](_0x1e2b6f,_0x433b7),await _0x1e2b6f['save']()):(console['error'](_0x440ba5(0xe5),_0x3e2767),null);}catch(_0x5573e8){return console[_0x440ba5(0x2fb)](_0x440ba5(0x5ac),_0x5573e8),null;}}async[a0_0x46df1a(0x25d)](_0x301382){const _0xb30df1=a0_0x46df1a;try{return await new fe(_0x301382)[_0xb30df1(0x206)]();}catch(_0x2002c9){return console[_0xb30df1(0x2fb)]('Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:',_0x2002c9),null;}}async['findAll'](_0x29c551){const _0xf6bbc0=a0_0x46df1a;try{let _0x8bf00c=_0x29c551[_0xf6bbc0(0x629)]??{};return await fe[_0xf6bbc0(0x336)](_0x8bf00c)['limit'](_0x29c551[_0xf6bbc0(0x759)]??0x0)['lean']();}catch(_0x458c9b){return console[_0xf6bbc0(0x2fb)](_0xf6bbc0(0x401),_0x458c9b),[];}}async[a0_0x46df1a(0x404)](_0x5dc299){const _0x411520=a0_0x46df1a;try{let _0x1e3016=I(_0x5dc299[_0x411520(0x629)]);return await fe[_0x411520(0x404)](_0x1e3016)[_0x411520(0x133)]();}catch{return null;}}async[a0_0x46df1a(0x3fd)](_0x6af6f4){const _0x4c279c=a0_0x46df1a;try{let _0x3ed35e=$s(_0x6af6f4);if(!_0x3ed35e){let _0xa139aa='Modelo\x20de\x20proprietário\x20não\x20pôde\x20ser\x20criado\x20para:\x20'+_0x6af6f4;return console[_0x4c279c(0x2fb)](_0xa139aa),{'success':!0x1,'error':new Error(_0xa139aa)};}return await _0x3ed35e['collection']['drop'](),{'success':!0x0};}catch(_0x4235dc){return console['error'](_0x4235dc),{'success':!0x1,'error':_0x4235dc instanceof Error?_0x4235dc:new Error(String(_0x4235dc))};}}async[a0_0x46df1a(0x44a)](_0x2795ae){const _0xa8bd82=a0_0x46df1a;try{let _0x295dce=$s(_0x2795ae);if(!_0x295dce)return console[_0xa8bd82(0x2fb)]('Modelo\x20de\x20proprietário\x20não\x20pôde\x20ser\x20criado\x20para:\x20'+_0x2795ae),0x0;let _0x24fc8d=await _0x295dce['find']({})[_0xa8bd82(0x133)]();if(console[_0xa8bd82(0x307)](_0xa8bd82(0x41c)+_0x2795ae+_0xa8bd82(0x43b)+_0x24fc8d[_0xa8bd82(0x5e9)]),!_0x24fc8d||_0x24fc8d['length']===0x0)return console[_0xa8bd82(0x307)](_0xa8bd82(0x2b6)+_0x2795ae),0x0;let _0x162855=_0x24fc8d[_0xa8bd82(0x3f6)](_0x31c8f1=>{const _0x51e488=_0xa8bd82;let {global:_0x5217e2,startID:_0x3eb24b,sharePass:_0x5b4c9e,shareOwners:_0x2beca1,minutesToClose:_0x1df14d,readMessages:_0x25e168,testingWith:_0x36aa07,startCommandWord:_0x1de433,default:_0x1abdb9,..._0x1b9476}=_0x31c8f1,_0x4e3306=Array[_0x51e488(0x13c)](new Set([..._0x2beca1,_0x2795ae])),_0x24e980=Array['from'](new Set([..._0x2beca1,_0x2795ae]));return{..._0x1b9476,'_id':(0x0,Fi['v4'])(),'owner':_0x2795ae,'globalShow':_0x31c8f1['global']===_0x51e488(0x5d2),'whoCanEdit':_0x4e3306,'whoCanUse':_0x24e980};});return await fe[_0xa8bd82(0x2a5)](_0x162855),await _0x295dce['collection'][_0xa8bd82(0xc0)](),console[_0xa8bd82(0x307)]('Fluxos\x20transferidos\x20do\x20proprietário\x20\x27'+_0x2795ae+'\x27\x20para\x20a\x20coleção\x20centralizada.'),_0x162855[_0xa8bd82(0x5e9)];}catch(_0x53c604){return console['error']('Erro\x20ao\x20migrar\x20fluxos\x20do\x20proprietário\x20\x27'+_0x2795ae+'\x27:',_0x53c604),0x0;}}async[a0_0x46df1a(0x48d)](_0x53f215){const _0x36da78=a0_0x46df1a;let _0x2fce4b=0x0;for(let _0x12695e of _0x53f215){let _0x382d3f=await this[_0x36da78(0x44a)](_0x12695e);_0x2fce4b+=_0x382d3f;}return console[_0x36da78(0x307)](_0x36da78(0x6a6)+_0x2fce4b),_0x2fce4b;}},rs=class extends _{[a0_0x46df1a(0x66a)](_0x3c910f){return Ca(_0x3c910f);}async[a0_0x46df1a(0x2e0)](_0x37ec58){const _0x53cd7b=a0_0x46df1a;if(_0x37ec58[_0x53cd7b(0x5e9)]!==0x0)try{return{'insertCount':(await this[_0x53cd7b(0x66a)](_0x37ec58[0x0][_0x53cd7b(0x3dd)])['insertMany']([..._0x37ec58]))[_0x53cd7b(0x5e9)]};}catch(_0x47ea2b){return _0x47ea2b;}}async[a0_0x46df1a(0x22c)](_0x54a7d5,_0x4729b1){const _0x59c2c2=a0_0x46df1a;try{let _0x4770df=this[_0x59c2c2(0x66a)](_0x4729b1),_0x343bb1=I(_0x54a7d5[_0x59c2c2(0x629)]);return{'deletedCount':(await _0x4770df[_0x59c2c2(0x708)](_0x343bb1))[_0x59c2c2(0x712)]};}catch(_0x37ca66){return{'error':_0x37ca66?.[_0x59c2c2(0x49e)]()};}}async['deleteOne'](_0x59c197,_0x10972d){const _0x58a617=a0_0x46df1a;try{let _0x2ce6d2=this[_0x58a617(0x66a)](_0x10972d),_0x10ca77=I(_0x59c197[_0x58a617(0x629)]);return{'deletedCount':(await _0x2ce6d2[_0x58a617(0x52e)](_0x10ca77))[_0x58a617(0x712)]};}catch(_0x4338ac){return{'error':_0x4338ac?.[_0x58a617(0x49e)]()};}}async[a0_0x46df1a(0x75)](_0x1aa7fd,_0x13329d){const _0x21cd97=a0_0x46df1a;try{if(_0x1aa7fd[_0x21cd97(0x5e9)]===0x0)return;let _0x1b1a47=this[_0x21cd97(0x66a)](_0x13329d),_0x508fbc=_0x1aa7fd[_0x21cd97(0x3f6)](_0x5a0d48=>({'updateOne':{'filter':{'name':_0x5a0d48[_0x21cd97(0x11d)],'owner':_0x13329d},'update':{..._0x5a0d48}}})),{modifiedCount:_0x515e09}=await _0x1b1a47[_0x21cd97(0x82)](_0x508fbc);return{'insertCount':_0x515e09};}catch{return;}}async[a0_0x46df1a(0x4b4)](_0x49c95e,_0x37692f,_0x22c85d){const _0x135b8f=a0_0x46df1a;try{return{'modifiedCount':(await this['getConversationModelForOwner'](_0x22c85d)[_0x135b8f(0x4b4)](_0x49c95e,{'$set':_0x37692f})[_0x135b8f(0x1e2)]())[_0x135b8f(0x177)]};}catch(_0x8382a3){return console[_0x135b8f(0x2fb)](_0x135b8f(0x144),_0x8382a3),{'error':_0x8382a3};}}async[a0_0x46df1a(0x4b3)](_0x224d09,_0x5ea620,_0x4e3f04){const _0x176382=a0_0x46df1a;try{return await this[_0x176382(0x66a)](_0x4e3f04)[_0x176382(0x663)]({'_id':_0x224d09},{'$set':_0x5ea620},{'new':!0x0,'upsert':!0x0})[_0x176382(0x133)]();}catch(_0x4fded1){return console[_0x176382(0x2fb)](_0x4fded1),null;}}async['find'](_0x1ee401,_0x228141){const _0x57d20c=a0_0x46df1a;try{return await this[_0x57d20c(0x66a)](_0x228141)['find'](_0x1ee401)[_0x57d20c(0x170)]({'lastInteraction':-0x1})[_0x57d20c(0x133)]();}catch{return[];}}async[a0_0x46df1a(0x404)](_0x32369a,_0x5b9dd1){const _0x3f33a9=a0_0x46df1a;try{return await this[_0x3f33a9(0x66a)](_0x5b9dd1)['findOne']({..._0x32369a[_0x3f33a9(0x629)]})[_0x3f33a9(0x133)]();}catch{return null;}}async[a0_0x46df1a(0x3fd)](_0x37ca9a){const _0x54e035=a0_0x46df1a;try{return await this[_0x54e035(0x66a)](_0x37ca9a)[_0x54e035(0x75d)][_0x54e035(0xc0)](),{'success':!0x0};}catch(_0x3f0f55){return console[_0x54e035(0x2fb)](_0x3f0f55),{'success':!0x1,'error':_0x3f0f55};}}},ns=class extends _{['getScheduleMessageModelForOwner'](_0x128cc1){return Ea(_0x128cc1);}async[a0_0x46df1a(0x82)](_0x3b5d1a,_0x3c9f0d){const _0x156344=a0_0x46df1a;try{return await this['getScheduleMessageModelForOwner'](_0x3c9f0d)[_0x156344(0x82)](_0x3b5d1a);}catch(_0xf24704){return console[_0x156344(0x2fb)]('Erro\x20ao\x20executar\x20bulkWrite:',_0xf24704),null;}}async[a0_0x46df1a(0x25d)](_0x267bfd,_0xb97792){const _0x1bfadd=a0_0x46df1a;try{let _0x58494b=this['getScheduleMessageModelForOwner'](_0xb97792);return await new _0x58494b(_0x267bfd)[_0x1bfadd(0x206)]();}catch(_0x32883f){return console[_0x1bfadd(0x2fb)](_0x1bfadd(0x323),_0x32883f),null;}}async[a0_0x46df1a(0x52e)](_0x54cb9a,_0x571d04){const _0x76699a=a0_0x46df1a;try{return await this[_0x76699a(0x139)](_0x571d04)[_0x76699a(0x1f6)](_0x54cb9a),{};}catch(_0x1ad729){return{'error':_0x1ad729?.[_0x76699a(0x49e)]()};}}async[a0_0x46df1a(0x4b3)](_0x3d9047,_0x1fcc4c,_0xfa8c09,_0x4ebdec={}){const _0x2a4e27=a0_0x46df1a;try{return await this['getScheduleMessageModelForOwner'](_0xfa8c09)['findOneAndUpdate'](_0x3d9047,_0x1fcc4c,{..._0x4ebdec,'new':!0x0})[_0x2a4e27(0x133)]();}catch(_0x546c08){return console['error'](_0x2a4e27(0xae),_0x546c08),null;}}async['updateOneById'](_0x54f953,_0xb9125c,_0x57d3c4){const _0x2d1a60=a0_0x46df1a;try{return await this[_0x2d1a60(0x139)](_0x57d3c4)[_0x2d1a60(0x3b3)](_0x54f953,_0xb9125c,{'new':!0x0})[_0x2d1a60(0x133)]();}catch(_0x1ee8f1){return console['error'](_0x2d1a60(0xae),_0x1ee8f1),null;}}async[a0_0x46df1a(0x336)](_0x4178dc,_0x3fc219){const _0x1f6175=a0_0x46df1a;try{return await this['getScheduleMessageModelForOwner'](_0x3fc219)['find'](_0x4178dc[_0x1f6175(0x629)])[_0x1f6175(0x759)](_0x4178dc?.[_0x1f6175(0x759)]??0x0)['sort']({'when':0x1})[_0x1f6175(0x133)]();}catch{return[];}}async[a0_0x46df1a(0x404)](_0x3e8a6b,_0x2c19fc){const _0xd482b3=a0_0x46df1a;try{return await this['getScheduleMessageModelForOwner'](_0x2c19fc)[_0xd482b3(0x404)](_0x3e8a6b[_0xd482b3(0x629)])[_0xd482b3(0x170)]({'when':0x1})[_0xd482b3(0x133)]();}catch{return null;}}async[a0_0x46df1a(0x498)](_0x396ce3,_0x2eba6f){const _0x3b7ae5=a0_0x46df1a;try{return await this[_0x3b7ae5(0x139)](_0x2eba6f)[_0x3b7ae5(0x498)](_0x396ce3)[_0x3b7ae5(0x133)]();}catch{return null;}}async['deleteMany'](_0x1920a8,_0x2fecb6){const _0x16aefa=a0_0x46df1a;try{return{'deletedCount':(await this[_0x16aefa(0x139)](_0x2fecb6)['deleteMany'](_0x1920a8))['deletedCount']};}catch(_0x261e81){return console['error'](_0x16aefa(0x799),_0x261e81),{'error':_0x261e81};}}async['deleteAll'](_0x33e22a){const _0x5ebf10=a0_0x46df1a;try{return await this[_0x5ebf10(0x139)](_0x33e22a)[_0x5ebf10(0x75d)][_0x5ebf10(0xc0)](),{'success':!0x0};}catch(_0x172a33){return console['error'](_0x172a33),{'success':!0x1,'error':_0x172a33};}}},cs=class extends _{async[a0_0x46df1a(0x75)](_0x260c02,_0x585727){const _0x591eb7=a0_0x46df1a;try{if(this[_0x591eb7(0x50c)][_0x591eb7(0x544)])return await Ie[_0x591eb7(0x663)]({'_id':_0x585727},{'$set':_0x260c02},{'new':!0x0});}catch(_0x69663b){throw console[_0x591eb7(0x2fb)](_0x591eb7(0x31d),_0x69663b),_0x69663b;}}async['findOrCreate'](_0x2bf10f){const _0xeca10d=a0_0x46df1a;try{let _0x1d08ba=await Ie[_0xeca10d(0x498)](_0x2bf10f);return _0x1d08ba?_0x1d08ba[_0xeca10d(0x28a)]||(_0x1d08ba['autoCompleteMessages']=[],await _0x1d08ba[_0xeca10d(0x206)]()):(_0x1d08ba=new Ie({'_id':_0x2bf10f,'autoCompleteMessages':[]}),await _0x1d08ba[_0xeca10d(0x206)]()),_0x1d08ba;}catch(_0x80f4cd){return _0x80f4cd[_0xeca10d(0x5ea)]===0x2af8&&_0x80f4cd[_0xeca10d(0x3b2)]&&_0x80f4cd['keyPattern']['autoCompleteMessages.command']?(console['error'](_0xeca10d(0x38c)),await Ie['collection'][_0xeca10d(0x5ab)](_0xeca10d(0x5be)),null):(console[_0xeca10d(0x2fb)]('Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:',_0x80f4cd),null);}}},Vo=new $(a0_0x46df1a(0x3c6)),Go=new Ye(b),Bo=new Bt(b),Wo=new ct(b),zo=new Wt(ca,b),Ho=new as(fa,b),Ko=new is(ha,b),Qo=new ve(ze,b),Yo=new os(b),Xo=new zt(b),Zo=new rs(b),er=new ns(b),tr=new cs(b),we=new Ke(Go,Bo,Wo,zo,Ho,Ko,Qo,Yo,Zo,Xo,er,tr,R?.[a0_0x46df1a(0x615)]()),B=new Gt(ms,b,we),sr=new Xt(b,B,we),ar=new es(B),Ts=new ss(ar),T=new ts(B),de=new Qt(B,b,we,ms,sr),W=new Yt(B),P=new Ht(B),q=new Zt(B);Vo[a0_0x46df1a(0x459)](a0_0x46df1a(0x5e7));function a0_0x2bf6(_0x318219,_0x2f3a5b){const _0x30d98d=a0_0x30d9();return a0_0x2bf6=function(_0x2bf66e,_0x2a8fb8){_0x2bf66e=_0x2bf66e-0x6a;let _0x8a52=_0x30d98d[_0x2bf66e];return _0x8a52;},a0_0x2bf6(_0x318219,_0x2f3a5b);}var lg=require(a0_0x46df1a(0x21f)),qs=require('fs'),Ui=A(require(a0_0x46df1a(0x5ff))),ji=A(require(a0_0x46df1a(0x389))),Ue=class l{static #e;static set['app'](_0x38bb8a){this.#e=_0x38bb8a;}static get[a0_0x46df1a(0x5ff)](){const _0x9ab36a=a0_0x46df1a;let {FULLCHAIN:_0x58b0c6,PRIVKEY:_0x17c7e9}=b[_0x9ab36a(0x20f)](_0x9ab36a(0x3ae));return Ui[_0x9ab36a(0x99)]({'cert':(0x0,qs['readFileSync'])(_0x58b0c6),'key':(0x0,qs[_0x9ab36a(0x5b8)])(_0x17c7e9)},l.#e);}static get['http'](){const _0x3a4274=a0_0x46df1a;return ji[_0x3a4274(0x99)](l.#e);}},je=A(require('fs')),Wi=A(require(a0_0x46df1a(0x1e3))),Je=A(require('axios')),us=A(require('path')),ls=require(a0_0x46df1a(0x4d0));function ir(){const _0x140a3b=a0_0x46df1a;B[_0x140a3b(0x792)]();let _0x5e40c1=us['default']['join'](__dirname,_0x140a3b(0x5f4));Bi(_0x5e40c1);}var Bi=_0x983ac0=>{const _0x516d87=a0_0x46df1a;let _0x287728=je['default'][_0x516d87(0x770)](_0x983ac0),_0x586605=0xc*0x3c*0x3c*0x3e8,_0x5a9c25=0x2*0x3c*0x3c*0x3e8,_0x31d2d8=new Date()[_0x516d87(0x2bc)]();_0x287728[_0x516d87(0x14b)](_0x311399=>{const _0x241e5f=_0x516d87;let _0x1ebe61=us[_0x241e5f(0x2fa)]['join'](_0x983ac0,_0x311399),_0x30e204=je[_0x241e5f(0x2fa)][_0x241e5f(0x733)](_0x1ebe61)[_0x241e5f(0x2a6)][_0x241e5f(0x2bc)]();_0x31d2d8-_0x30e204>_0x586605&&(je[_0x241e5f(0x2fa)][_0x241e5f(0x6be)](_0x1ebe61),console[_0x241e5f(0x307)]('Deleted\x20'+_0x311399));}),setTimeout(()=>Bi(_0x983ac0),_0x5a9c25);};function or(){const _0x21fffb=a0_0x46df1a;let _0x238990=new $(_0x21fffb(0x67d)),_0x5c46cf=(0x0,be[_0x21fffb(0x2fa)])();_0x5c46cf[_0x21fffb(0xe1)]((0x0,Gi['default'])({'origin'(_0x1719d0,_0x17e6ed){const _0xa229fd=_0x21fffb;let {ORIGIN:_0x2efcb2}=b[_0xa229fd(0x20f)]('CORS');return _0x1719d0||(_0x1719d0='*'),_0x2efcb2[_0xa229fd(0x687)]('*')!==-0x1||_0x2efcb2[_0xa229fd(0x687)](_0x1719d0)!==-0x1?_0x17e6ed(null,!0x0):_0x17e6ed(new Error(_0xa229fd(0xbe)));},'methods':[...b[_0x21fffb(0x20f)](_0x21fffb(0x558))[_0x21fffb(0x1f3)]],'credentials':b[_0x21fffb(0x20f)](_0x21fffb(0x558))[_0x21fffb(0x190)]}),(0x0,be[_0x21fffb(0x17a)])({'extended':!0x0,'limit':_0x21fffb(0x5f8)}),(0x0,be[_0x21fffb(0x405)])({'limit':'50mb'})),_0x5c46cf[_0x21fffb(0xe1)]((_0x5b806b,_0x2ff72f,_0x5c0188)=>{const _0xe272de=_0x21fffb;_0x5b806b['path'][_0xe272de(0x3f0)]('/events')?_0x5c0188():(0x0,Vi[_0xe272de(0x2fa)])()(_0x5b806b,_0x2ff72f,_0x5c0188);}),_0x5c46cf[_0x21fffb(0x358)](_0x21fffb(0x70f),'hbs'),_0x5c46cf['set']('views',(0x0,Gs[_0x21fffb(0x473)])(ce,_0x21fffb(0x49d))),_0x5c46cf[_0x21fffb(0xe1)](be['default'][_0x21fffb(0x61c)]((0x0,Gs[_0x21fffb(0x473)])(ce,_0x21fffb(0x40e)))),_0x5c46cf[_0x21fffb(0xe1)]((_0xd34df6,_0x1e7924,_0x19c64f)=>{const _0x41e29f=_0x21fffb;let _0x56f20d=_0x1e7924[_0x41e29f(0x5c6)];_0x1e7924['send']=function(_0x26572f){const _0x243ebf=_0x41e29f;if(_0xd34df6[_0x243ebf(0xc9)]['convert']===_0x243ebf(0x5d2)||_0xd34df6[_0x243ebf(0x739)]['uazapi']===_0x243ebf(0x5d2)){let _0x1c9024=JSON[_0x243ebf(0xab)](_0x26572f);_0x26572f=JSON[_0x243ebf(0x5cc)](_0x4665be(_0x1c9024));}return _0x56f20d[_0x243ebf(0xf8)](_0x1e7924,[_0x26572f]);},_0x19c64f();}),_0x5c46cf[_0x21fffb(0xe1)]('/',ke),_0x5c46cf[_0x21fffb(0xe1)]((_0x1aeff8,_0x2a540c,_0x367a5a,_0xf04caa)=>{const _0x1fd3e4=_0x21fffb;if(_0x1aeff8)return _0x367a5a['status'](_0x1aeff8[_0x1fd3e4(0x16f)]||0x1f4)['json'](_0x1aeff8);},(_0x5c6517,_0xc5f2bd,_0x4407cd)=>{const _0x19bf2a=_0x21fffb;let {method:_0x187e2b,url:_0x195dfa}=_0x5c6517;_0xc5f2bd[_0x19bf2a(0x16f)](0x194)[_0x19bf2a(0x405)]({'status':0x194,'message':_0x19bf2a(0x62d)+_0x187e2b['toUpperCase']()+'\x20'+_0x195dfa,'error':_0x19bf2a(0x743)}),_0x4407cd();});let _0x4665be=(_0x54f5cd,_0x146b0a='_p_')=>{const _0x9005c9=_0x21fffb;let _0x57cc83=(_0x43f5e,_0x188a6c=null,_0x24f6ba=!0x1)=>{const _0xdf365f=a0_0x2bf6;let _0x4a562d={};return Object[_0xdf365f(0x794)](_0x43f5e)[_0xdf365f(0x14b)](_0x2a596e=>{const _0x5b5fab=_0xdf365f;let _0x136c39=_0x43f5e[_0x2a596e],_0x2401e7=''+_0x146b0a+_0x2a596e;_0x188a6c&&!_0x24f6ba&&(_0x2401e7=_0x188a6c+'.'+_0x2a596e),!_0x136c39&&_0x136c39!==0x0&&_0x136c39!==!0x1||typeof _0x136c39>'u'?_0x4a562d[_0x2401e7]=null:typeof _0x136c39!='object'&&!Array[_0x5b5fab(0x119)](_0x136c39)?_0x4a562d[_0x2401e7]=_0x136c39:typeof _0x136c39==_0x5b5fab(0xde)&&!Array[_0x5b5fab(0x119)](_0x136c39)?_0x4a562d=Object[_0x5b5fab(0x508)](_0x4a562d,_0x57cc83(_0x136c39,_0x2401e7)):Array[_0x5b5fab(0x119)](_0x136c39)&&(typeof _0x136c39[0x0]==_0x5b5fab(0xde)?(_0x4a562d[_0x2401e7]=[],_0x136c39['forEach'](_0x4adc83=>{const _0x3816bc=_0x5b5fab;_0x4a562d[_0x2401e7][_0x3816bc(0x45f)](_0x57cc83(_0x4adc83,_0x2401e7,!0x0));})):_0x4a562d[_0x2401e7]=_0x136c39);}),_0x4a562d;};return Array[_0x9005c9(0x119)](_0x54f5cd)?_0x54f5cd[_0x9005c9(0x3f6)](_0x3e6046=>_0x57cc83(_0x3e6046)):typeof _0x54f5cd==_0x9005c9(0xde)&&_0x54f5cd!==null?_0x57cc83(_0x54f5cd):{};},_0x26a6ae=b[_0x21fffb(0x20f)]('SERVER');Ue[_0x21fffb(0x6cd)]=_0x5c46cf;let _0x4fb1b7=Ue[_0x26a6ae[_0x21fffb(0x26f)]],_0x11d57b=_0x21fffb(0x272);_0x4fb1b7['listen'](_0x26a6ae[_0x21fffb(0x665)],()=>{const _0x32705b=_0x21fffb;_0x238990[_0x32705b(0x307)](_0x11d57b),_0x238990[_0x32705b(0x307)](_0x26a6ae['TYPE'][_0x32705b(0x117)]()+'\x20-\x20ON:\x20'+_0x26a6ae['PORT']);}),ir(),sa();}var rr=a0_0x46df1a(0x68b),nr=us['default']['join'](__dirname,'./.git/config'),$e=null;function cr(){return new Promise((_0x341e31,_0x1995b6)=>{const _0xa8a5c2=a0_0x2bf6;je[_0xa8a5c2(0x2fa)]['readFile'](nr,_0xa8a5c2(0x196),(_0xd267e3,_0x1a4563)=>{const _0x592930=_0xa8a5c2;if(_0xd267e3){$e=_0xd267e3,_0x341e31();return;}Wi[_0x592930(0x2fa)][_0x592930(0xab)](_0x1a4563)['remote\x20\x22origin\x22']['url']===rr?($e=null,_0x341e31()):($e=new Error(_0x592930(0x5d3)),_0x341e31());});});}async function lr(){const _0x404281=a0_0x46df1a;try{await cr(),await Bs();}catch(_0x1acfb7){console[_0x404281(0x2fb)]('Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20'+_0x1acfb7),process[_0x404281(0x7e)](0x1);}}lr();async function zi(){const _0x3997d8=a0_0x46df1a;let _0x6ec03a;try{_0x6ec03a=(await Je[_0x3997d8(0x2fa)]['get'](_0x3997d8(0x274)))['data']['ip'];}catch(_0x562ea3){console['error'](_0x562ea3);try{_0x6ec03a=(await Je[_0x3997d8(0x2fa)][_0x3997d8(0x20f)](_0x3997d8(0x192)))[_0x3997d8(0x72b)]['ip'];}catch(_0x5b4b08){console[_0x3997d8(0x2fb)](_0x5b4b08);try{_0x6ec03a=(await Je[_0x3997d8(0x2fa)][_0x3997d8(0x20f)](_0x3997d8(0x8c)))[_0x3997d8(0x72b)][_0x3997d8(0x7a2)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x491570){return console[_0x3997d8(0x2fb)](_0x491570),!0x1;}}}return _0x6ec03a;}var Ji=0x0;async function ur(){const _0x2d2546=a0_0x46df1a;let _0x360f16=await new pe(b[_0x2d2546(0x20f)]('REDIS'))['instanceKeys']();return console[_0x2d2546(0x307)]('instancias:\x20',_0x360f16[_0x2d2546(0x5e9)]),_0x360f16['length'];}function dr(_0x269fc8){const _0x40b458=a0_0x46df1a;let _0x4cb046=_0x269fc8[_0x40b458(0x20f)](_0x40b458(0x67d))[_0x40b458(0x14a)],_0x5ca3c0=_0x269fc8[_0x40b458(0x20f)]('SSL_CONF');console[_0x40b458(0x307)](_0x40b458(0x1be),_0x4cb046),console[_0x40b458(0x307)](_0x40b458(0x1c3),_0x5ca3c0);let _0x5d0c4e='',_0x21e82c=_0x4cb046||'';if(_0x4cb046){let _0x3ed414=_0x4cb046[_0x40b458(0x7a2)](/\/\/(.*?)\./);console[_0x40b458(0x307)]('Resultado\x20da\x20correspondência\x20de\x20URL:',_0x3ed414),_0x3ed414&&_0x3ed414[0x1]&&(_0x5d0c4e=_0x3ed414[0x1],console[_0x40b458(0x307)](_0x40b458(0x550),_0x5d0c4e));}if(!_0x5d0c4e&&_0x5ca3c0&&_0x5ca3c0[_0x40b458(0x5fe)]){let _0x1faa05=_0x5ca3c0[_0x40b458(0x5fe)]['split']('/');console[_0x40b458(0x307)](_0x40b458(0x2f8),_0x1faa05);let _0x2bfa60=_0x1faa05[_0x1faa05[_0x40b458(0x5e9)]-0x2];if(console[_0x40b458(0x307)](_0x40b458(0x5bc),_0x2bfa60),_0x2bfa60){let _0x3c7c3f=_0x2bfa60['split']('.');console[_0x40b458(0x307)](_0x40b458(0x658),_0x3c7c3f),_0x3c7c3f['length']>0x2&&(_0x5d0c4e=_0x3c7c3f[0x0],console[_0x40b458(0x307)](_0x40b458(0x653),_0x5d0c4e),_0x21e82c=''+_0x2bfa60);}}return{'subdomain':_0x5d0c4e||_0x40b458(0x378),'fullURL':_0x21e82c||_0x40b458(0x20c)};}var {subdomain:X,fullURL:Ws}=dr(b);console[a0_0x46df1a(0x307)](a0_0x46df1a(0x781),X),console[a0_0x46df1a(0x307)](a0_0x46df1a(0x695),Ws);async function pr(){const _0x2e14cf=a0_0x46df1a;let _0x8ada60=b[_0x2e14cf(0x20f)](_0x2e14cf(0x452)),_0x31515d=b[_0x2e14cf(0x20f)]('AUTHENTICATION')[_0x2e14cf(0x4e1)][_0x2e14cf(0x57c)],_0x3d254d=b[_0x2e14cf(0x20f)]('SSL_CONF'),_0x32bd6f=await zi(),_0x4ef796=b[_0x2e14cf(0x20f)](_0x2e14cf(0x67d))[_0x2e14cf(0x665)],_0x38d265=Ws;try{let _0x32df72={'ip':_0x32bd6f||null,'redis_enable':_0x8ada60?.[_0x2e14cf(0x544)]||null,'apikey':_0x31515d||null,'ssl':_0x3d254d?.[_0x2e14cf(0x4f8)]||null,'lastupdate':Hi||null,'port':_0x4ef796||null,'gitInstallError':$e?.['message']||null,'url':_0x38d265||null,'subdomain':X};if(console[_0x2e14cf(0x307)](_0x2e14cf(0x4f1),_0x32df72['ip']),_0x8ada60&&_0x8ada60[_0x2e14cf(0x544)]){let _0x4ebb24=await ur();_0x32df72['instanceCount']=_0x4ebb24||null;}for(let _0x1d9d37 in _0x32df72)_0x32df72[_0x2e14cf(0x2b4)](_0x1d9d37)&&_0x1d9d37!=='ip'&&(_0x32df72[_0x1d9d37]=JSON['stringify'](_0x32df72[_0x1d9d37]));return(await Je['default'][_0x2e14cf(0x13a)]('https://uazapi.bubbleapps.io/api/1.1/wf/verificar/',_0x32df72))[_0x2e14cf(0x72b)];}catch(_0x174694){return console[_0x2e14cf(0x2fb)](_0x174694),!0x1;}}var Vs=!0x1,Hi=0x254,hr=0x3,qi=0x1b7740;async function Bs(){const _0x2ad522=a0_0x46df1a;let _0x2b7c6a=_0x2ad522(0x16c);$e===null&&(_0x2b7c6a=await zi());let _0x4c7ebb=await pr();if(_0x4c7ebb){if(_0x4c7ebb['response'][_0x2ad522(0x1da)]===!0x0){$e===null&&_0x4c7ebb['response'][_0x2ad522(0x6ae)]-Hi>0x0&&await gr(),Vs||(Vs=!0x0,or());let _0x2d7e2e=0x24*0x3c*0x3c,_0x365f07=_0x4c7ebb[_0x2ad522(0x1cf)]['segundos']>_0x2d7e2e?_0x2d7e2e:_0x4c7ebb[_0x2ad522(0x1cf)][_0x2ad522(0x522)],_0x361bbe=Number(_0x365f07);if(isNaN(_0x361bbe)){console[_0x2ad522(0x2fb)]('interval\x20não\x20é\x20um\x20número');return;}let _0x33051a=Math[_0x2ad522(0x54d)](_0x361bbe/0xe10),_0x245a4b=Math[_0x2ad522(0x54d)](_0x361bbe%0xe10/0x3c),_0x3ca120=new Date(Date[_0x2ad522(0x72)]()+_0x361bbe*0x3e8);setTimeout(Bs,_0x361bbe*0x3e8);let _0x87110c=_0x5eb49d=>_0x5eb49d[_0x2ad522(0x49e)]()[_0x2ad522(0x1c9)](0x2,'0'),_0x30b268=_0x2ad522(0x682)+_0x87110c(_0x33051a)+_0x2ad522(0x76b)+_0x87110c(_0x245a4b)+_0x2ad522(0x93)+_0x87110c(_0x3ca120[_0x2ad522(0x51d)]())+':'+_0x87110c(_0x3ca120[_0x2ad522(0x706)]())+'.';console['log'](_0x30b268);}else return console[_0x2ad522(0x307)](_0x2ad522(0x312)),Vs&&(console['log']('A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.'),process[_0x2ad522(0x7e)]()),_0x2ad522(0xf1);}else{if(Ji++,Ji<hr)console[_0x2ad522(0x307)](_0x2ad522(0x797)+qi/0xea60+_0x2ad522(0xf0)),setTimeout(Bs,qi);else return console['error'](_0x2ad522(0x6d9)),'SERVER_OFFLINE';}}async function gr(){const _0x5c3339=a0_0x46df1a;console[_0x5c3339(0x307)](_0x5c3339(0x1a1)),console[_0x5c3339(0x307)]('Limpando\x20logs\x20do\x20PM2...'),(0x0,ls[_0x5c3339(0x6bc)])(_0x5c3339(0x418),{'shell':!0x0})['on'](_0x5c3339(0x60f),_0x613107=>{const _0x57a279=_0x5c3339;_0x613107!==0x0?console['error'](_0x57a279(0x7a4)):(console['log'](_0x57a279(0x34e)),console[_0x57a279(0x307)](_0x57a279(0x676)),(0x0,ls[_0x57a279(0x6bc)])(_0x57a279(0x3de),{'shell':!0x0})['on'](_0x57a279(0x60f),_0x341bca=>{const _0x1123be=_0x57a279;if(_0x341bca!==0x0)console[_0x1123be(0x2fb)](_0x1123be(0x628));else{console['log'](_0x1123be(0x5bf));let _0x3a36c4=(0x0,ls[_0x1123be(0x6bc)])('git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm',{'shell':!0x0});_0x3a36c4[_0x1123be(0x4a8)]['on'](_0x1123be(0x72b),_0xace744=>{const _0xbfc0be=_0x1123be;console[_0xbfc0be(0x307)](_0xbfc0be(0x12b)+_0xace744);}),_0x3a36c4[_0x1123be(0x1d1)]['on'](_0x1123be(0x72b),_0x3a90ea=>{const _0x43b595=_0x1123be;console[_0x43b595(0x2fb)]('Erro\x20de\x20atualização:\x20'+_0x3a90ea);}),_0x3a36c4['on'](_0x1123be(0x7e),_0x2376b2=>{const _0x4bddc7=_0x1123be;_0x2376b2!==0x0?console['error'](_0x4bddc7(0x69a)+_0x2376b2):console[_0x4bddc7(0x307)]('Sistema\x20atualizado\x20com\x20sucesso!'),console[_0x4bddc7(0x307)](_0x4bddc7(0x77b)),setTimeout(()=>process['exit'](),0x2710);});}}));});}0x0&&(module[a0_0x46df1a(0x393)]={'fullURL':fullURL,'subdomain':subdomain});