const a0_0x5ca971=a0_0x2d21;(function(_0x416f8b,_0x1d89c3){const _0x206c01=a0_0x2d21,_0x6c5be2=_0x416f8b();while(!![]){try{const _0x3977fd=parseInt(_0x206c01(0x19d))/0x1+parseInt(_0x206c01(0x527))/0x2+parseInt(_0x206c01(0x3f1))/0x3+parseInt(_0x206c01(0x4c2))/0x4*(parseInt(_0x206c01(0x8a0))/0x5)+parseInt(_0x206c01(0x4da))/0x6*(parseInt(_0x206c01(0x404))/0x7)+parseInt(_0x206c01(0x436))/0x8*(-parseInt(_0x206c01(0x334))/0x9)+-parseInt(_0x206c01(0x52c))/0xa*(parseInt(_0x206c01(0x8a3))/0xb);if(_0x3977fd===_0x1d89c3)break;else _0x6c5be2['push'](_0x6c5be2['shift']());}catch(_0x2990c7){_0x6c5be2['push'](_0x6c5be2['shift']());}}}(a0_0x2c21,0x76121));var zi=Object[a0_0x5ca971(0x226)],Ge=Object[a0_0x5ca971(0x5ff)],Hi=Object[a0_0x5ca971(0x538)],Ki=Object[a0_0x5ca971(0x22c)],Qi=Object[a0_0x5ca971(0x3e4)],Yi=Object[a0_0x5ca971(0x171)]['hasOwnProperty'],Xi=(_0x13a6c4,_0x258f21)=>{for(var _0x2ff228 in _0x258f21)Ge(_0x13a6c4,_0x2ff228,{'get':_0x258f21[_0x2ff228],'enumerable':!0x0});},Ws=(_0x2d668f,_0x331eae,_0x31b535,_0x3f99c0)=>{const _0x41dbf3=a0_0x5ca971;if(_0x331eae&&typeof _0x331eae==_0x41dbf3(0x487)||typeof _0x331eae=='function'){for(let _0x2d4a83 of Ki(_0x331eae))!Yi[_0x41dbf3(0x770)](_0x2d668f,_0x2d4a83)&&_0x2d4a83!==_0x31b535&&Ge(_0x2d668f,_0x2d4a83,{'get':()=>_0x331eae[_0x2d4a83],'enumerable':!(_0x3f99c0=Hi(_0x331eae,_0x2d4a83))||_0x3f99c0[_0x41dbf3(0x75e)]});}return _0x2d668f;},A=(_0x463f3c,_0x1fc9fe,_0xbf788)=>(_0xbf788=_0x463f3c!=null?zi(Qi(_0x463f3c)):{},Ws(_0x1fc9fe||!_0x463f3c||!_0x463f3c[a0_0x5ca971(0x854)]?Ge(_0xbf788,a0_0x5ca971(0x678),{'value':_0x463f3c,'enumerable':!0x0}):_0xbf788,_0x463f3c)),Zi=_0xb5fb9=>Ws(Ge({},a0_0x5ca971(0x854),{'value':!0x0}),_0xb5fb9),hr={};Xi(hr,{'fullURL':()=>Gs,'subdomain':()=>K}),module[a0_0x5ca971(0x1cd)]=Zi(hr);var Ji=A(require('compression')),Hs=require('fs'),Ks=require('js-yaml'),Qs=require('path'),Be=require(a0_0x5ca971(0x562)),ue=process[a0_0x5ca971(0x639)](),Se=(0x0,Be[a0_0x5ca971(0x897)])(ue,a0_0x5ca971(0x62e)),zs=(0x0,Be[a0_0x5ca971(0x897)])(ue,'src'),sn=(0x0,Be[a0_0x5ca971(0x897)])(ue,'store',a0_0x5ca971(0x6aa)),ps=class{constructor(){const _0x3e7f6a=a0_0x5ca971;this[_0x3e7f6a(0x7bf)]();}[a0_0x5ca971(0x76d)](_0x5b9f9c){const _0x4fa8bd=a0_0x5ca971;return this[_0x4fa8bd(0x638)][_0x5b9f9c];}[a0_0x5ca971(0x7bf)](){const _0x4b6a8e=a0_0x5ca971;this[_0x4b6a8e(0x638)]=process['env']?.[_0x4b6a8e(0x462)]!==_0x4b6a8e(0x18a)?this['envYaml']():this[_0x4b6a8e(0x725)](),process[_0x4b6a8e(0x638)]?.[_0x4b6a8e(0x462)]===_0x4b6a8e(0x18a)&&(this[_0x4b6a8e(0x638)]['SERVER']['TYPE']='http',this[_0x4b6a8e(0x638)]['SERVER'][_0x4b6a8e(0x84b)]=Number[_0x4b6a8e(0x1d8)](process[_0x4b6a8e(0x638)]?.['SERVER_PORT']??'8080'));}['envYaml'](){const _0x299ee6=a0_0x5ca971;return(0x0,Ks['load'])((0x0,Hs[_0x299ee6(0x259)])((0x0,Qs[_0x299ee6(0x897)])(zs,'../env.yml'),{'encoding':'utf-8'}));}[a0_0x5ca971(0x725)](){const _0x179a79=a0_0x5ca971;return{'SERVER':{'TYPE':process[_0x179a79(0x638)]['SERVER_TYPE'],'PORT':Number[_0x179a79(0x1d8)](process['env'][_0x179a79(0x6a0)]),'URL':process[_0x179a79(0x638)][_0x179a79(0x2b5)]},'CORS':{'ORIGIN':process[_0x179a79(0x638)][_0x179a79(0x38c)][_0x179a79(0x266)](','),'METHODS':process[_0x179a79(0x638)][_0x179a79(0x46e)][_0x179a79(0x266)](','),'CREDENTIALS':process['env']?.['CORS_CREDENTIALS']===_0x179a79(0x18a)},'SSL_CONF':{'PRIVKEY':process[_0x179a79(0x638)]?.[_0x179a79(0x52a)],'FULLCHAIN':process[_0x179a79(0x638)]?.[_0x179a79(0x4c7)]},'STORE':{'CLEANING_INTERVAL':Number[_0x179a79(0x65b)](process['env']?.[_0x179a79(0x49e)])?Number[_0x179a79(0x1d8)](process[_0x179a79(0x638)][_0x179a79(0x49e)]):void 0x0,'MESSAGES':process[_0x179a79(0x638)]?.['STORE_MESSAGE']===_0x179a79(0x18a),'CONTACTS':process[_0x179a79(0x638)]?.[_0x179a79(0x3a5)]===_0x179a79(0x18a),'CHATS':process[_0x179a79(0x638)]?.[_0x179a79(0x878)]===_0x179a79(0x18a)},'DATABASE':{'CONNECTION':{'HOST':process[_0x179a79(0x638)]?.[_0x179a79(0x16c)],'PORT':Number[_0x179a79(0x1d8)](process[_0x179a79(0x638)]?.[_0x179a79(0x16c)]),'USER':process[_0x179a79(0x638)][_0x179a79(0x764)],'PASSWORD':process['env']['DATABASE_CONNECTION_PASSWORD'],'URI':process[_0x179a79(0x638)][_0x179a79(0x57d)],'DB_PREFIX_NAME':process[_0x179a79(0x638)][_0x179a79(0x4d2)]},'ENABLED':process[_0x179a79(0x638)]?.['DATABASE_ENABLED']==='true'},'REDIS':{'ENABLED':process['env']?.[_0x179a79(0x7e2)]==='true','URI':process['env'][_0x179a79(0x459)]||_0x179a79(0x1e3),'PREFIX_KEY':process[_0x179a79(0x638)][_0x179a79(0x836)]||_0x179a79(0x748)},'LOG':{'LEVEL':process[_0x179a79(0x638)]?.['LOG_LEVEL'][_0x179a79(0x266)](','),'COLOR':process[_0x179a79(0x638)]?.[_0x179a79(0x67f)]===_0x179a79(0x18a)},'PROXY':process[_0x179a79(0x638)]?.[_0x179a79(0x4c9)]==='true','AUTHENTICATION':{'TYPE':process[_0x179a79(0x638)][_0x179a79(0x762)],'API_KEY':{'KEY':process[_0x179a79(0x638)][_0x179a79(0x3f8)]},'JWT':{'EXPIRIN_IN':Number[_0x179a79(0x65b)](process[_0x179a79(0x638)]?.['AUTHENTICATION_JWT_EXPIRIN_IN'])?Number[_0x179a79(0x1d8)](process[_0x179a79(0x638)][_0x179a79(0x460)]):0xe10,'SECRET':process['env'][_0x179a79(0x4cb)]}}};}},b=new ps(),qi=A(require(a0_0x5ca971(0x201))),be=A(require(a0_0x5ca971(0x1e7))),qs=require('path'),hs=A(require(a0_0x5ca971(0x14f))),gs=(_0x46540e=>(_0x46540e[a0_0x5ca971(0x4b9)]='\x1b[32m',_0x46540e['INFO']=a0_0x5ca971(0x566),_0x46540e['WARN']=a0_0x5ca971(0x715),_0x46540e[a0_0x5ca971(0x86e)]=a0_0x5ca971(0x46f),_0x46540e[a0_0x5ca971(0x2ed)]=a0_0x5ca971(0x4ac),_0x46540e[a0_0x5ca971(0x6a8)]=a0_0x5ca971(0x5b6),_0x46540e['DARK']=a0_0x5ca971(0x1ef),_0x46540e))(gs||{}),Ys=(_0x281183=>(_0x281183['LOG']=a0_0x5ca971(0x221),_0x281183[a0_0x5ca971(0x58a)]=a0_0x5ca971(0x394),_0x281183[a0_0x5ca971(0x6e6)]=a0_0x5ca971(0x89d),_0x281183['WARN']='\x1b[33m%s\x1b[0m',_0x281183[a0_0x5ca971(0x86e)]=a0_0x5ca971(0x1d1),_0x281183[a0_0x5ca971(0x2ed)]=a0_0x5ca971(0x53a),_0x281183[a0_0x5ca971(0x6a8)]='\x1b[37m%s\x1b[0m',_0x281183))(Ys||{}),Xs=(_0x5d4850=>(_0x5d4850[a0_0x5ca971(0x4b9)]=a0_0x5ca971(0x4b9),_0x5d4850[a0_0x5ca971(0x5e8)]=a0_0x5ca971(0x5e8),_0x5d4850['INFO']='INFO',_0x5d4850[a0_0x5ca971(0x58a)]=a0_0x5ca971(0x58a),_0x5d4850[a0_0x5ca971(0x86e)]=a0_0x5ca971(0x86e),_0x5d4850[a0_0x5ca971(0x2ed)]=a0_0x5ca971(0x2ed),_0x5d4850['VERBOSE']=a0_0x5ca971(0x6a8),_0x5d4850))(Xs||{}),Zs=(_0x552674=>(_0x552674[a0_0x5ca971(0x4b9)]=a0_0x5ca971(0x1bd),_0x552674[a0_0x5ca971(0x6e6)]=a0_0x5ca971(0x7a9),_0x552674['WARN']=a0_0x5ca971(0x838),_0x552674['DARK']=a0_0x5ca971(0x2c0),_0x552674[a0_0x5ca971(0x86e)]=a0_0x5ca971(0x2c5),_0x552674['DEBUG']=a0_0x5ca971(0x607),_0x552674['VERBOSE']=a0_0x5ca971(0x54f),_0x552674))(Zs||{}),$=class{constructor(_0x18c0a8=a0_0x5ca971(0x752)){this['context']=_0x18c0a8,this['configService']=b;}['setContext'](_0x53bfe8){this['context']=_0x53bfe8;}['console'](_0x1b1975,_0x1b8afd){const _0x4a2ba2=a0_0x5ca971;let _0x371192=[];this[_0x4a2ba2(0x601)]['get'](_0x4a2ba2(0x4b9))[_0x4a2ba2(0x73d)][_0x4a2ba2(0x491)](_0x4d483b=>_0x371192['push'](Xs[_0x4d483b]));let _0x1ce6c5=typeof _0x1b1975;_0x371192['includes'](_0x1b8afd)&&(b[_0x4a2ba2(0x76d)](_0x4a2ba2(0x4b9))[_0x4a2ba2(0x3ec)]?(console[_0x4a2ba2(0x2a9)](_0x4a2ba2(0x2e6)+Ys[_0x1b8afd],_0x4a2ba2(0x2f1),(0x0,hs[_0x4a2ba2(0x678)])()['format'](_0x4a2ba2(0x367)),_0x4a2ba2(0x4f8),gs[_0x1b8afd]+Zs[_0x1b8afd]+_0x4a2ba2(0x2e6),_0x1b8afd+_0x4a2ba2(0x44e),_0x4a2ba2(0x708),this[_0x4a2ba2(0x17f)]+'\x1b[0m',gs[_0x1b8afd],_0x1ce6c5!==_0x4a2ba2(0x487)?_0x1b1975:'',_0x4a2ba2(0x4f8)),_0x1ce6c5===_0x4a2ba2(0x487)&&console[_0x4a2ba2(0x2a9)](_0x1b1975,'\x0a')):console[_0x4a2ba2(0x2a9)]((0x0,hs[_0x4a2ba2(0x678)])()['format'](_0x4a2ba2(0x3c4)),_0x1b8afd+'\x20',''+this[_0x4a2ba2(0x17f)],_0x1b1975));}[a0_0x5ca971(0x2a9)](_0x3c9cd5){const _0x1dd6f0=a0_0x5ca971;this[_0x1dd6f0(0x444)](_0x3c9cd5,_0x1dd6f0(0x4b9));}[a0_0x5ca971(0x1d2)](_0x4ed42d){const _0x2b9554=a0_0x5ca971;this['console'](_0x4ed42d,_0x2b9554(0x6e6));}[a0_0x5ca971(0x38d)](_0x59a556){this['console'](_0x59a556,'WARN');}[a0_0x5ca971(0x2b1)](_0x4790f9){const _0x5e6bfd=a0_0x5ca971;this[_0x5e6bfd(0x444)](_0x4790f9,'ERROR');}[a0_0x5ca971(0x608)](_0x5ce9b4){const _0x521f23=a0_0x5ca971;this[_0x521f23(0x444)](_0x5ce9b4,_0x521f23(0x6a8));}['debug'](_0x5538e9){const _0x34a6ca=a0_0x5ca971;this['console'](_0x5538e9,_0x34a6ca(0x2ed));}['dark'](_0x413b03){const _0xec865d=a0_0x5ca971;this[_0xec865d(0x444)](_0x413b03,'DARK');}};function ea(){const _0x285bbd=a0_0x5ca971;process['on'](_0x285bbd(0x1dd),(_0x1a76d5,_0x95a20)=>{const _0x391856=_0x285bbd;new $(_0x391856(0x1dd))[_0x391856(0x2b1)]({'origin':_0x95a20,'stderr':process[_0x391856(0x47c)]['fd'],'error':_0x1a76d5});}),process['on'](_0x285bbd(0x40d),(_0x229968,_0x26a2ca)=>{const _0x24aebf=_0x285bbd;new $(_0x24aebf(0x40d))['error']({'origin':_0x26a2ca,'stderr':process[_0x24aebf(0x47c)]['fd'],'error':_0x229968});});}var ta=A(require(a0_0x5ca971(0x558))),ms=new ta[(a0_0x5ca971(0x678))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Me=require(a0_0x5ca971(0x410)),Ie=A(require(a0_0x5ca971(0x410))),We=new $('Db\x20Connection'),j=b[a0_0x5ca971(0x76d)](a0_0x5ca971(0x868)),R=j[a0_0x5ca971(0x325)]?j[a0_0x5ca971(0x543)]['URI']?Ie[a0_0x5ca971(0x678)]['createConnection'](j[a0_0x5ca971(0x543)][a0_0x5ca971(0x528)],{'dbName':j[a0_0x5ca971(0x543)][a0_0x5ca971(0x70e)]+a0_0x5ca971(0x701)}):Ie[a0_0x5ca971(0x678)][a0_0x5ca971(0x898)](a0_0x5ca971(0x431)+j['CONNECTION'][a0_0x5ca971(0x800)]+':'+j[a0_0x5ca971(0x543)]['PORT']+a0_0x5ca971(0x273),{'user':j['CONNECTION'][a0_0x5ca971(0x422)],'pass':j[a0_0x5ca971(0x543)][a0_0x5ca971(0x2b2)],'dbName':j['CONNECTION']['DB_PREFIX_NAME']+a0_0x5ca971(0x701)}):null;j[a0_0x5ca971(0x325)]&&We[a0_0x5ca971(0x1d2)](a0_0x5ca971(0x48c)+R[a0_0x5ca971(0x1d0)]);function a0_0x2c21(){const _0x546df0=['#fe9dfe','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','):\x20Enviando\x20mensagem\x20para\x20','namespace','updateStatusPrivacy','label','fromMe','Logger','trimmed','status@broadcast','AutomateSystem','Erro\x20ao\x20atualizar\x20o\x20fluxo:','creds.json','loadInstance','getDevice','groupGetInviteInfo','archived','toLocaleString','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','enumerable','ip\x20-6\x20addr\x20add\x20','importChatsBatch','Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo','AUTHENTICATION_TYPE','toLowerCase','DATABASE_CONNECTION_USER','audio','waitingMenu_id','Contacts\x20not\x20found','url','expression','ContactsAndGroups','setting','uazapiSendMenu','get','sections','padEnd','call','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','insert','sendButtons','editFlowCondition','groups_ignore','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20','shift','json','/wa-message','scheduleNextCheck','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','SSL_CONF','.webp','):\x20Bloco\x20original\x20para\x20cópia:\x20','contains','hDel','request\x20received\x20in\x20createFlow','labels.edit','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','backgroundColor','empty','presenceSubscribe','buttons','keep-alive','dbServer','unknown\x20operation\x20type\x20[','numbers','):including\x20timestamp\x20in\x20url:\x20','downloadMediaMessage','deleteMessageForEveryone','scheduleSendText','segundos','):\x20Flow\x20\x27','/media','https://api.openai.com/v1/audio/speech','chats','Rótulo\x20inválido\x20ou\x20sem\x20ID.','automateSystem','GUARD','editScheduleMessage','Forbidden','telefone','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','Instância:\x20','testingWith','whoCanEdit','maxActives','^\x5cd+([-]\x5cd+)*@g.us$','cleaningUp','sendPoll','redis','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture','groupMemberAddMode','MAX_SAFE_INTEGER','map','\x1b[44m','updateGParticipate','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20','listResponseMessage','editOperator','):\x20Editando\x20edição\x20do\x20fluxo...','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus','):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','toString','Erro\x20ao\x20deletar\x20chat:','getContactModelForOwner','initAuthCreds','sim','groupToggleEphemeral','Fluxo\x20não\x20encontrado\x20na\x20memória.','/instance/delete','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','useMultiFileAuthState','set','idSchedule','Erro\x20ao\x20buscar\x20fluxos:','inet6','loadEnv','\x27\x20do\x20banco\x20de\x20dados...','inner','class-validator','request\x20received\x20in\x20getConversation','floor','addReplyOption','processUazapi','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact','PRESENCE_UPDATE','Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...','isURL','values','app-state-sync-key','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','):\x20Entrou\x20na\x20função\x20goToFlow','/instance/fetchInstances','apirequest','now','\x20and\x20data:','Background\x20color\x20is\x20required','):\x20Entrou\x20na\x20função\x20clearVariables','):\x20customFieldVariables','.xlsx','messaging-history.set','readData','PREFIX_KEY','REDIS','util','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','uazapiSendText','sendWhatsAppAudio','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','GET','\x20depois\x20','REDIS_ENABLED','menuIgnoreNonVotes','ephemeralMessage','?timestamp=','.url','Falha\x20ao\x20processar\x20a\x20solicitação','):Converted\x20image\x20deleted','updateBlock','findFlow','cleanStore','#56ccb4','ip:\x20','qrCode','\x20-i\x20','https://uazapi-plugin.bubbleapps.io/?url=','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:','):\x20nextBlock.uazapi.name','eventEmitter','pollCreationMessageKey','config','messages.upsert','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','localWebhook','./.git/config','repository','restartInstance','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','bearer','):\x20whoCanUse\x20after\x20validation:\x20','HOST','validate','ORG:','Limpando\x20logs\x20do\x20PM2...','):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20','Subdomínio\x20não\x20encontrado','):\x20updateResult:','replaceVariablesLogs','Erro\x20ao\x20atualizar\x20cacheInstance:','#dfaef0','groupName','unlinkSync','currency','):Getting\x20image\x20from\x20url','enabled','connectToWhatsappController','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','recebido\x20de','Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.','/wa-contacts','emit','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','):\x20mediaMessageInfoId\x20:\x20','collection','ms\x20(tentativa\x20','unreadCount','Invalid\x20format','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','/webhook','CLEANING_INTERVAL','sendMessageAck','contact','command','Erro\x20ao\x20atualizar\x20conversa:\x20','Erro\x20ao\x20tentar\x20updateCustomFields','contact_blacklist','verifiedName','The\x20property\x20cannot\x20be\x20empty','reorderMessages','updateMany','noConnection','convertaudioMP3','triedToSend','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','gifPlayback','Esse\x20fluxo\x20expirou','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','notMatchRegex','Valor\x20inicial:\x20\x22','uazapiSendContact','WA\x20MODULE','ip6eui','REDIS_PREFIX_KEY','Deleted\x20','\x1b[43m','includes','):\x20Bloco\x20copiado:\x20','closed','.webm','endsWith','\x0a*Você\x20respondeu*:\x0a','):\x20Enviando\x20enquete','_fromMe','process','local_map','getTicketSystem','eventHandler','ignoreGroups','https://api.ipify.org?format=json','Comando\x20desconhecido','):\x20Adicionando\x20\x27','removeProfilePicture','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','PORT','pt-BR','\x20ao\x20chat\x20','pollOnReplyDelete','profilePictureUrl','BRL','):\x20Entrou\x20na\x20função\x20stop','):\x20Entrou\x20na\x20função\x20processawaitSeconds','):Image\x20created','__esModule','Erro\x20ao\x20buscar\x20a\x20conversa','updateGroupPicture','selectableCount','JWT','isValidAndUniqueIPv6','customFields','copy','createConversationforgoToFlow','conditions','allContacts','\x20segundos','pollCreationMessageV2','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','):\x20Buscando\x20conversa...','):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção','findMany','round','rows','pre','DATABASE','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','Module\x20-\x20ON','Detalhes\x20do\x20erro:','updateGroupWebhook','ERROR','findContacts','):\x20Flow\x20desativado','Last\x20message\x20not\x20found\x20for\x20number:\x20','reconnectTimestamps','messages','Flow\x20iniciado\x20com\x20','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','option','):Temp\x20image\x20deleted','STORE_CHATS','findParticipants','request\x20received\x20in\x20allFlows','Rótulo\x20deletado:\x27,\x20','menuExpiredMessage','msgRetryCounterCache','delAll','unreadcount','.doc','):Trying\x20to\x20get\x20business\x20profile','EMAIL:','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','):\x20sender\x20=\x20number:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting','state','method','getConversationModelForOwner','findChats','lowerCase','enviado\x20para','waitingMenu_replyOptions','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','views','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','Not\x20allowed\x20by\x20CORS','):Archiving\x20chat','):\x20Enviando\x20contato','no-cache','.error','#ffc5c7','Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups','join','createConnection','):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20','deleteInstance','urlOrBase64','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','\x1b[34m%s\x1b[0m','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo','):\x20this.nextMessageId\x20&&\x20this.nextMessageId\x20!==\x20message._id','503620nFeQgo','inviteUrl','delete','11rMmluv','writeData',']\x20(','utf-8','PENDING','--------------------------------------','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','role','stateConnection','editFlowVariable','getProfileName','editFlowGroup','cleanDisconnectedInstances','):\x20encontrado\x20próxima\x20mensagem\x20para\x20','dayjs','lastFetchAwaitingApproval','Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27','deleteChat','Imagem\x20não\x20encontrada','leadInfo.etiquetas','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','Enter\x20a\x20value\x20in\x20milliseconds','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','open','groupId','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','http','Tentando\x20reconectar...','request\x20received\x20in\x20deleteConversation','CHATS_UPDATE','replyOptions','exists','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','apiName','Database\x20update\x20result:','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20','reviver','last_update','Valor\x20de\x20find\x20ou\x20replace\x20ausente','variables','replyOption','):\x20Deletando\x20conversa...','networkInterface','DATABASE_CONNECTION_HOST','choices','size',',\x20pairCode:\x20','uazapiDeleteMessage','prototype','Erro\x20ao\x20iniciar\x20fluxo:\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','flowConversation','sectionsToString','SINGLE_SELECT','):\x20alterando\x20this.AutomateSystem','STATUS_INSTANCE','stringify','conversationTimestamp','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','\x27...','release','groupJid','context','Retornando\x20grupos\x20COM\x20cache','groupDesc','):\x20Query\x20params:\x20','RemoteJid:','locationMessage','https://chat.whatsapp.com/','Número\x20não\x20possui\x20WhatsApp.','fetchLabels','Chat\x20com\x20ID\x20','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','true','errors','synchronizeAndMapFlows','):Delete\x20chat\x20in\x20client\x20for\x20number:\x20',',\x20received\x20','undefined','delay','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','!stop','deleteBlock','\x20Tentativa\x20de\x20reconexão\x20','getMinutes','goNextblock','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','notas','width','.svg','defineAuthState','Error\x20while\x20deleting\x20message\x20for\x20everyone','702259njjndj','\x20chats\x20de\x20','ephemeralDuration','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','static','):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!','ObjectId','reduce','):\x20Removendo\x20\x27','groupRevokeInvite','convertaudio','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','uuid','allFlows','createflow','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp','getChatModelForOwner','Types','processUUID','Connection\x20closed\x20for\x20instance:\x20','fromObject','Removidas\x20as\x20variáveis:\x20','startID','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant','waitingMenu_ExpiredMessage','groupdata.participants','\x27\x20não\x20encontrado','startCommandWord','sort','headers','condition','\x1b[42m','Erro\x20ao\x20atualizar\x20o\x20flow.','BufferJSON','replaceValue','request\x20received\x20in\x20editConversation','arrayUnique','parse','imageMessage','out','IPv6\x20Prefix\x20detected:\x20','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','findMessages','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','mkdirSync','CORS','groupSetting','exports','Error\x20in\x20chatModify\x20for\x20number\x20','where','$dbName','\x1b[31m%s\x1b[0m','info','env.KEY\x20!==\x20key','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','fetchConversation','):\x20expirationTime:\x20','Nenhum\x20fluxo\x20correspondente\x20encontrado.','parseInt','base64','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','mimetype','createConversationforStartFlow','uncaughtException','nextMessageId','lean','headerString','saveConversationToDatabase','processgoToFlow','redis://127.0.0.1:6379','success','.mp3','updateConversation','express','):\x20Conversa\x20atualizada\x20em\x20memória','poll','setUpdate','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','connectionStatus','readMessages','Instance\x20deleted','\x1b[30m','fora\x20do\x20git','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','uazapiSendAudio','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','_Messages','media','app','\x22\x20not\x20found','getVariablesChat','):\x20\x27Enviando\x20texto\x20para\x20\x27','https://api64.ipify.org?format=json','fetchMessages','replacer','isJidGroup','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','newStoppedUntil','blocks','cors','assign','spawn','):\x20teve\x20mudanças\x20chat.muteEndTime:\x20','hSet','_pushName','nome','):\x20debug\x20alterando\x20this.AutomateSystem','sendMenu','CONTACTS_UPDATE','clearVariables','getBusinessProfile','isConnected','lastRealGroupsFetch','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','oldToken','dbInstance','autoCompleteMessages.command','Schema','varedits','Erro\x20ao\x20remover\x20label\x20','CONECTADO\x20À\x20UAZAPI','.X-ABLabel:Celular\x0a','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','ERROR:\x20','utf8','startFlow','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','DELIVERY_ACK','jsonwebtoken','messageId','):\x20conversation.lastInteraction:\x20','\x1b[32m%s\x1b[0m','createWebhook','updateProfilePicturePrivacy','messages.set','configureIPv6','create','textMessage','updateOnlinePrivacy','):\x20isVote:\x20','beautifyWithPlaceholders','test','getOwnPropertyNames','):\x20conversation.waitingMenu_name','Erro\x20ao\x20buscar\x20conversas','IP\x20mismatch:\x20configured\x20','statusJidList','Telefone:\x20','LICENSE_INVALID','):\x20Current\x20Time:\x20','hGetAll','archiveChat','editConversation','mediatype','editflow','view\x20engine','upsertChats','evaluateConditionTest','Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants','CONTACTS_UPSERT','isCommunityAnnounce','\x22reaction\x22\x20must\x20be\x20an\x20emoji','\x5cd+','created','extractPhoneNumber','error_log','min','execSync','\x20segundos\x20antes\x20de\x20reconectar...','getFlow','messageType',',\x20canSendMessage:\x20','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','findById','use','/startFlow/:instance/:startID','):\x20Label\x20','Fluxo\x20agendado\x20pelo\x20fluxo\x20','delayChatLabel_RETRY_DELAY_MS','originalUrl','Erro\x20ao\x20criar\x20fluxo','updateParticipant','KEY','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global','data:\x20','readFileSync','Nenhum\x20chat\x20encontrado\x20para\x20editar.','URL\x20não\x20disponível','authState','.extension','demote','):\x20Enviando\x20localização','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','.xls','Error\x20updating\x20cache\x20contact:','updateAgent','retrySendMessage','scheduleFlow','split','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','limit','generateRandomIPv6','AUTHENTICATION','update','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','\x20adicionado\x20ao\x20chat\x20','waMonitor','isCommunity','Error\x20adding\x20IPv6\x20address:\x20','):\x20Going\x20to\x20','sleep','?authSource=admin&readPreference=primary&directConnection=true','number','activatedCount','createOrUpdate','):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27','binary','importChatsAntigo','chatId','flowStopConversation','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','findAndReplaceRegex','webhookModel','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','boolean','\x20não\x20encontrado\x20para\x20atualização.','_Labels','authService','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20não\x20estão\x20ativados.','not_announcement','prepareWAMessageMedia','promisify','.docx','/config','instanceName\x20not\x20provided.','):\x20Entrou\x20na\x20função\x20scheduleFlow','Network\x20interfaces\x20detected:\x20','stopWhenYouSendMsg','Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','generate','/*.json','Safari','/wa-qrcode','request\x20received\x20in\x20updateFlowConfig','Fluxos\x20não\x20estão\x20ativados','chats.update','processvaredits','):\x20Conversa\x20inserida\x20com\x20sucesso.','randomMac','reorderReplyOptions','listType','replaceVariables','):\x20transformedCustomFieldVariables','Parando\x20aplicação,\x20atualização\x20recebida','pop','string','fileName','):Desconectado,\x20parando\x20execução.','reject','newValue','audio/ogg;\x20codecs=opus','SERVER_ACK','):\x20Editando\x20replyOption...','muteEndTime','log','):\x20Comando\x20desconhecido:\x20','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','updateOneById','flowName','allflows','):Output\x20path:\x20','.pptx','error','PASSWORD','pollErrorMessage','documentMessage','SERVER_URL','hGet','updateMissingCustomFields','userDevicesCache','getAutomateSystem','creation','lastReceivedMessage','ipv6Prefix','folder','findGroupsEspecial','):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20','\x1b[40m','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','online','editflowvaredit','\x1b[41m','HeaderType','capitalizedWords','no.connection','deleteflow','loggedOut','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','client','createNewConversation','promote','max','sendMedia','superadmin','deleted','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','find','resetReconnectionVariables','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','Erro\x20ao\x20editar\x20a\x20conversa','Início','Erro\x20ao\x20iniciar\x20o\x20fluxo.','):\x20whoCanEdit\x20after\x20validation:\x20','[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache','chat\x20não\x20encontrado','removeData','editedMessage','getflow','goToFlow','):\x20Não\x20achou\x20nenhum\x20flow','\x20mensagens\x20de\x20','timeInMinutes','Erro\x20ao\x20atualizar\x20AutomateSystem:','):Processing\x20audio','\x1b[1m','updateReplyOption','viewOnceMessage','createAndSave','\x20não\x20encontrado','buttonText','TYPE','DEBUG','picture','):\x20Query\x20params:','jwt','\x1b[1m\x1b[37m','detail','lastSendMessage','verifyWhatsAppNumber','/wa-connection-update','archive','status','*Pergunta*:\x20\x0a','chatModify','pino','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo','):Notifying\x20clients\x20for\x20chat:\x20','XX:XX:XX:XX:XX:XX','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage','contactHandle','Valor\x20da\x20URL\x20recuperada:','\x20is\x20already\x20in\x20use.','reconnectAttempts','Instance\x20logged\x20out','sendText','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','options','splice','StartBot','authorization','routerPath','createJid','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName','The\x20instance\x20needs\x20to\x20be\x20disconnected','interval\x20não\x20é\x20um\x20número','order','):\x20Buscando\x20conversas...','deleteImportedChat','hex','readFile','writeFileSync','beforeExit','digest','https://api.openai.com/v1/images/generations','CHATS_DELETE','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','IPv6\x20addresses\x20detected:\x20','.ogg','.jwt','write','Usando\x20IP\x20existente:\x20','child_process','pollCreationMessageV3','vir','Instance\x20ID:','pollMessageOnDelete','request_method','ENABLED','subjectTime','entries','Validate','Bloco\x20com\x20ID\x20','mentioned','):\x20Criou\x20conversa\x20no\x20startFlow','groupRequestParticipantsUpdate','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','statusCode','/wa-all-message','Fluxo\x20id\x20\x27','latitude','\x20removido\x20do\x20chat\x20','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','41859GdLFvR','express-async-errors','Falta\x20informação\x20para\x20a\x20chamada\x20API','Subdomínio\x20final:','sendList','code','paused','stopMinutesMaxActives','_sender','charAt','#d3a91f','getMIMEType','):\x20Buscando\x20flow,\x20id:\x20','leadInfo','/exit','announce','remote\x20\x22origin\x22','lastInteraction','^\x5cd+','scheduled','.txt','connectionUpdate','https://uazapi-plugin.bubbleapps.io/','stickerMessage','pollCreationMessage','\x0aitem','getLastMessage','formatVCard','/wa-groups','GROUPS_UPSERT','next_groupId','variablesToObject','InstancesAlterarTodas','generateHash','scheduleSendMedia','Content-Type','setRestartTimeout','fetchContacts','transformScheduledMessagesByType','less','MESSAGES_UPSERT','storePath','\x20não\x20encontrado\x20para\x20cópia','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','bodyString','Partes\x20do\x20domínio:','joinGroup','downloads','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','startsWith','modifiedCount','DD/MM\x20HH:mm:ss','editMessagesInGroup','router','):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20','menuMessage','Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:','Error\x20parsing\x20JSON:','AddChatLabel','):\x20Enviando\x20texto','):\x20Envio\x20interrompido\x20devido\x20a\x20UUID\x20de\x20processo\x20não\x20corresponder.','node-cache','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','waitingMenu_text','optionDescription','}}\x20->\x20\x22','loadWebhook','READ','convertToWebP','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','toBrazilianNumberFormat','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture','updateChatWithMessage','sendMessage','\x20com\x20sucesso.','getScheduleMessageModelForOwner','model','instanceInfo','AutomateFunctions','RECONNECT_TIME_FRAME','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','proto','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc','pushName','Mensagem\x20não\x20suportada','):\x20Editando\x20mensagens\x20no\x20grupo...','/group','CORS_ORIGIN','warn','authModel','CHATS_UPSERT','item','creds.update','Retornando\x20grupos\x20SEM\x20cache','endSession','\x1b[30m%s\x1b[0m','[AUTH]\x20Database\x20is\x20not\x20enabled','.mp4','labelId','content-type','.TEL;waid=','application/json','):Image\x20path:\x20','pairingCode','ScheduleMessageModel','lastSend','drop','replaceVariablesInReplyOptions','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','start','):\x20','inviteCodeDetails','STORE_CONTACTS','formatBRNumber','Missing\x20global\x20api\x20key','copyBlock','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','atendimentoAberto','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence','unavailable','_p_','IPv6\x20address\x20removed:\x20','Erro\x20ao\x20deletar\x20a\x20conversa','request\x20received\x20in\x20getFlow','group-participants.update','Erro\x20ao\x20aplicar\x20varedit:\x20','\x20horas\x20e\x20','groupHandler','createFlow','replaceOne','@broadcast','fetchChats','PRIVKEY','groupFetchAllParticipating','deleteFlow','sendMessageWithTyping','saveTextReply','getBase64FromMediaMessage','.pdf','/media/','blockLogs','):\x20ev.flush\x20realizado','updateProfileStatus','HH:mm:ss','sendAudio','isAdmin','):\x20whoCanUse\x20before\x20validation:\x20','):Image\x20is\x20base64','deleteAll','match','_error','Error\x20removing\x20IPv6\x20address:\x20','OrAnd','dbSettings','statSync','messageSecret','\x20do\x20chat\x20','replace','contactsArrayMessage','Falha\x20ao\x20recriar\x20IPv6.','connectToWhatsapp','agents','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','sharp','vcard','request\x20received\x20in\x20updateCustomFields','leaveGroup','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','):Audio\x20converted\x20and\x20stored\x20in\x20cache','updateAll','shareOwners','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','startCommand',',\x20saindo.','readreceipts','getPrototypeOf','ListType','Message','Error\x20fetching\x20group','username','ScheduleMessage','#64c4ff','reaction','COLOR','Bad\x20Request','rowId','inviteCode','instance','1672161KuLAbQ',',\x20Expiration\x20Time:\x20','response','slice','temp-','updateProfilePicture','https','AUTHENTICATION_API_KEY','toNumber','readMessageBot','ReplyOption\x20com\x20ID\x20','add','announcement','params','badSession','document','Error\x20in\x20scheduleNextCheck:\x20','revokeInviteCode','):Hash\x20to\x20image\x20name:\x20','735jjceeH','updateMediaMessage','https://jsonip.com','Subdomínio\x20extraído\x20do\x20caminho\x20SSL:','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','getTime','updatePrivacySettings','http://checkip.dyndns.org','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','unhandledRejection','getClient','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','mongoose','#9568cf','webhook','off','DELETED','imagechat','connect','_activatedCount','keys','normalizeMessageContent','ini','):Image\x20converted\x20to\x20WebP','name','encoding','findRealGroups','createSectionsFromValues','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','):\x20Editando\x20condição\x20do\x20fluxo...','USER','Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral','):\x20Criando\x20nova\x20conversa[createNewConversation]','):\x20Enviando\x20áudio','Content\x20is\x20required','):\x20Buscando\x20flow...','email','bulkWrite','Log\x20out\x20instance:\x20','):\x20Limpando\x20delayMessage','replaceVariablesChat','owner','METHODS','/wa-presence','list','mongodb://','#ffae04','FULLCHAIN','throwAndLogError','):\x20atualização\x20chat:\x20','1048aJvAqC','\x0aFN:','.ppt','CHATS_SET','pollUpdateMessage','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','\x20}\x0a','/events','scheduleMessage','sendDataWebhook','website','video-cover.png','groupUpdateDescription','videoMessage','console','instance.','):\x20[messages.update]\x20group\x20ignored','findIndex','decryptPollVote','blockId','none','action','Configuração\x20SSL\x20recuperada:','description','\x20\x1b[0m','sendContact','pendingMessages','title','redirect','autoCompleteMessages.command_1','request\x20received\x20in\x20getAutomateSystem','):Business\x20profile\x20fetched','@whiskeysockets/baileys','):\x20Criando\x20fluxo...','events','REDIS_URI','indexOf','webhookService','padStart','ids','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','canSendMessage','AUTHENTICATION_JWT_EXPIRIN_IN','!cmd_','DOCKER_ENV','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','messageStubParameters','Não\x20respondeu\x20com\x20a\x20enquete.','flush','chatHandle','minutesToClose','truncatedtoEnd','[all]','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','uazapiSendLocation','IPv6\x20recriado\x20após\x20falhas\x20de\x20reconexão.','CORS_METHODS','\x1b[31m','DisconnectReason','isRunning','send','ConversationModel','\x27\x20removido\x20do\x20AutomateSystem.','LabelModel','createGroup','Close\x20connection',',\x20Minutes\x20to\x20Close:\x20','restrict','uazapiSendMedia','\x20minutos','stderr','DaysToDelete','pollMessage','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:','webhookMap','createIPv6','):\x20Limpando\x20AutomateSystem','cachedData-whatsapp','RemoveChatLabel','API_KEY','object','removeIPv6ById','participant','ex:\x20\x22groupJid=120362@g.us\x22','leadInfo.','ON\x20-\x20dbName:\x20','instancias:\x20','updateMessage','quoted','header','forEach','\x22\x20cannot\x20be\x20empty','insertMany','/message','sha256','updateStopChat',',\x20qrcodeCount:\x20','Deletion\x20failed','findByIdAndUpdate','groupMetadata','Instance\x20Name:','Erro\x20ao\x20buscar\x20Schedule\x20Messages','processConditionsTest','STORE_CLEANING_TERMINAL','Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','The\x20global\x20api\x20key\x20must\x20be\x20set','URL','oldValue','bodyStringErrorParse','.png','):\x20delete\x20=\x20true','_id','@s.whatsapp.net','):\x20Detecção\x20de\x20condição\x20de\x20corrida,\x20a\x20mensagem\x20','sendPresenceUpdate','findAll','_ScheduleMessages','\x1b[36m','):Error\x20in\x20converting\x20audio','sendCommand','admin','Message\x20absent\x20from\x20node','/:instanceName','remove.instance','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','request\x20received\x20in\x20updateAgent','mediaMessage','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','findAndUpdateCacheContact','):\x20Criando\x20fluxo\x20compartilhado...','LOG','del','getMessage','valid','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','):Image\x20is\x20url','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','delayChatLabel','):\x20Ignoring\x20group\x20messages.','4LnxjRy','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','PRODUCT_LIST','processclearVariables','fetchStatus','SSL_CONF_FULLCHAIN','updateCustomFields','PROXY','groups','AUTHENTICATION_JWT_SECRET','Erro\x20ao\x20buscar\x20o\x20fluxo','dropCollection','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','E-mail:\x20','isArray','\x20quoted:\x20','DATABASE_CONNECTION_DB_PREFIX_NAME','ip\x20-6\x20addr\x20show\x20dev\x20','notContains','editFlowBlock','extractRegex','isBase64','Type\x20is\x20required','instanceKeys','36846HWBEXk','\x22\x20-\x20REMOVED','Instance\x20Key\x20from\x20DB:','Filtered\x20network\x20interfaces:\x20','):\x20Error\x20processing\x20the\x20block:\x20','matchRegex','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','joinGroupValidate','messageHandle','memberAddMode','generateWAMessageFromContent','Selecione','upperCase','Erro\x20ao\x20copiar\x20o\x20documento','color','imported','pow','linkPreview','groups.update','phoneNumber','):\x20Enviando\x20mídia','jpegThumbnail','sharePass','Erro\x20de\x20atualização:\x20','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','):\x20Chat\x20','message','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','not\x20loaded','isListOfNumbers','\x1b[0m','findOrCreate','reactionMessage','Conversa\x20deletada\x20com\x20sucesso.','nomecompleto','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName','waitingForReplyMenu','statusMessage','fone','secondValue','/instance/create','):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar','public','Erro\x20ao\x20importar\x20chats','cpf','qrcode','stanzaId','remoteJid','dataValidate','addChatLabel','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','AppStateSyncKeyData','remove','saveMediaToFile',',\x20Novo\x20tamanho:\x20','displayName','author','post','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','timeout','SendScheduleMessage','quotedMessage','moreLogs','notEmpty','connecting','\x20não\x20é\x20a\x20esperada.','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','repeat','longitude','mediaSticker','):\x20whoCanEdit\x20before\x20validation:\x20','lastUpdate','stopConversation','image','Flow\x20\x27','566264ZQTSog','URI','PLAYED','SSL_CONF_PRIVKEY','protocolMessage','11954090naJGyb','lastMessage_id','variablesNotFound','\x20-y','):\x20Procurando\x20conversa','getConversation','length','audioWhatsapp','ff:fe','):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20','type','joinApprovalMode','getOwnPropertyDescriptor','findGroup','\x1b[36m%s\x1b[0m','unlocked','isLong','flushHeaders','truncatedto','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','participants','random','#9ba6ff','CONNECTION','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','fetchInstances','isJidBroadcast','wuid','Atualização:\x20','viewOnceMessageV2','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','Primeiro\x20Valor:\x20','fetchProfile','descOwner','connectedName','\x1b[47m','getScheduleMessage','sendSticker','this.reconnectAttempts:\x20','processApiRequest','MessageModel','dbClient','Instance\x20\x22','flows','eventemitter2','pictureUrl','output','findGroups','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','):\x20error:\x20','Router','SECRET','delayChatLabel_MAX_RETRIES','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','path',',\x20isAdmin:\x20','deleteDoneMessages','processPollUpdateMessage','\x1b[34m','Database\x20connection\x20closed.','flattenObject','logout','toggleEphemeral','logger','query','trim','deleteConversation','request\x20received\x20in\x20updateAutoCompleteMessages','CREDENTIALS','contentText','caption','\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','AutomateSystem\x20não\x20foi\x20inicializado','isBusiness','/create','):\x20Bloco\x20com\x20ID\x20','Configured\x20IPv6:\x20','-instances','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.','#d8e651','DATABASE_CONNECTION_URI','selectedOptions','autoCompleteMessages','QRCODE_UPDATED','mentions','Esse\x20fluxo\x20não\x20permite\x20importação.','Error\x20fetching\x20and\x20updating\x20profile:\x20','done','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','getStatus','filter','audio/ogg','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','DARK','processblock','STORE','$addToSet','\x20minutos\x20verificará\x20novas\x20mensagens','descId','/wa-message-update','/instance','Partes\x20do\x20caminho\x20FULLCHAIN:','processawaitSeconds','count','#f64847','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','Erro\x20ao\x20alterar\x20privacidade','text/event-stream','varedit','push','fetchProfilePicture','AddUserFlow','groupAcceptInvite','connectedClient','integer','ip\x20-br\x20link\x20show','ephemeralExpiration','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','Parando\x20aplicação...','closeExistingConversations','message_normalized','groupLeave','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','saveVariable','dbConnection','sendLocation','exec','buttonMessage','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','Instance\x20restarted','presence.update','.ogv','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','SEND_MESSAGE','File\x20written\x20to\x20path:\x20','Cache\x20instance\x20update\x20result:\x20','\x1b[37m','equal','iniciando\x20fluxo\x20router','then','reference','birthtime','Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.','findGroupInfos','FlowController','sending','isValidIPv6Config','whatsappNumber','NextBlock','put','myAppStateKeyId','axios','subject','deletedCount','groupdata','data','\x20:\x20','):\x20Usando\x20extensão\x20padrão:\x20','updateChatGroupData','deviceSentMessage','/instance/connectionState','getContentType','):\x20Falha\x20ao\x20deletar\x20mensagem.','existsSync','CONTACTS_SET','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','value','apikey','markMessageAsRead','lastMessage','contacts.upsert','updateGParticipant','qrcode-terminal','):\x20\x27Enviando\x20audio\x20para\x20\x27','findOneAndUpdate','.mimetype','ListMessage','contacts','removeIPv6','etiquetas','jid','responsavelid','g-t','@g.us','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','WARN','available','mediaKey','font','hbs','footerText','IP\x20confirmed:\x20','substring','contextInfo','Error\x20testing\x20IP\x20with\x20','request\x20received\x20in\x20starFlow','array','Variável\x20não\x20encontrada!','Garbage\x20collection\x20não\x20está\x20disponível.','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.','toBRL','processConditions','whoCanUse','#92ceac','group','$set','reorderBlocks','end','defineProperty','long','configService','setWebhook','whatsappNumbers','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','expiration','some','\x1b[46m','verbose','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','checkAndRestartProcess','.jpg','address','delayMessage','Erro\x20na\x20função\x20updateChatWithMessage:\x20','}}\x20->\x20valor\x20não\x20encontrado','findByIdAndDelete','presence','deleteMessage','cacheInstanceRepository','status.instance','\x20saindo\x20da\x20função','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','/events/:instance','\x20foi\x20interrompido\x20pelo\x20usuário.','getLabelModelForOwner','chatLog','waInstances','/instance/connect','saveCreds','\x5c$&','$pull','MESSAGES_SET','cacheInstanceModel','processScheduleFlow','findGroupInfo','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','cache','convertedOptions','flowConfig','updateAutoCompleteMessages','node-mime-types','https://ipv6.jsonip.com','authentication','delaySecMax','realVariables','instances','buttonId','request\x20received\x20in\x20editFlow','deleteOne','mongodb','lastCondition','editflowreply','updatePresence','firstValue','flowActive','env','cwd','Resultado\x20da\x20correspondência\x20de\x20URL:','Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','toArray','deleteMany','requestPairingCode','findOne','request\x20received\x20in\x20fetchConversation','awaitingApproval','\x20inseridas\x20no\x20banco\x20de\x20dados...','request_time','admin_add','CacheContacts\x20database\x20connection\x20closed.','vote','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','setNewValue','toFile','groupBetterSetting','Network\x20Interface\x20detected:\x20','importChats','has','findWebhook','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','crypto','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','):\x20Alterando\x20fluxo...','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','editFlowVaredit','chats.upsert','prepareMediaMessage','groupParticipantsUpdate','rm\x20-rf\x20','isInteger','fetchBusinessProfile','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','removeUnusedChatFields','GROUPS_UPDATE','createInstance',',\x20valor\x20a\x20encontrar:\x20\x22','connection.update','locked','block','CONNECTION_UPDATE','API\x20Key\x20from\x20Request:','errorLog','match_last_seen','profile','groupUpdateSubject','global','Erro\x20ao\x20substituir\x20variáveis\x20para\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','):\x20Mensagem\x20já\x20enviada\x20para\x20','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','groups.upsert','fetchProfilePictureUrl','/wa-chats','profilePicture','Novo\x20IP\x20criado:\x20','Pausado\x20por\x20','when','default','URL\x20completa:','listMessage','Erro\x20ao\x20arquivar\x20chat','Erro\x20ao\x20buscar\x20metadados\x20do\x20grupo\x20para\x20','lastBlockId','SERVER_OFFLINE','LOG_COLOR','getMessageModelForOwner','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','updateGroupParticipantsWebhook','conversation','messageTimestamp','privacySettings','delaySecMin','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','createServer','editflowgroup','contactMessage','collections','approve','.\x20Aguardando\x20','cacheContact','startFlowWebhook','findManyByIds','senderKeyDistributionMessage','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','imgUrl','EMAIL','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','groupadd','addBlock','groupSettingUpdate','SERVER','redisEnv','TEXT','result','request\x20received\x20in\x20scheduleMessage','setHeader','SERVER_PORT','removeChatLabel','):\x20Erro\x20ao\x20enviar\x20mensagem\x20para\x20','editFlow','menuType','Cache-Control','updateGroupsAddPrivacy','groupValidate','VERBOSE','addresss','auth','dropIndex',',\x20resultado:\x20','scheduleSendAudio','getDelay','audioMessage','recording','ChatModel','\x22\x20-\x20NOT\x20CONNECTION','groupCreate','messageContextInfo','https://','Mensagens\x20deletadas\x20com\x20sucesso.','sendStatus','video','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','refused','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','cachedContact','last','Instância\x20não\x20encontrada.','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','updateFlowConfig','GROUP_PARTICIPANTS_UPDATE','arraybuffer','every','stopped','desativadoFluxoAte','):\x20teve\x20mudanças\x20chat.archived:\x20','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','):\x20Deletando\x20mensagem','Authentication\x20error','Type\x20not\x20found','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','Erro\x20ao\x20editar\x20o\x20chat','false','Subdomínio\x20extraído\x20da\x20URL:','createHash','label_jid','editChat','connectionClosed','cacheContactModel','chats.delete','EXPIRIN_IN','ButtonsMessage','replaceVariablesInObject','notEqual','flow','/64\x20dev\x20','findAndReplace','instanceName','all','creds','shareFlow','ChatRouter','insertCount','IPv6\x20address\x20configured:\x20','text','messages.update','INFO','proxy:\x20','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','subjectOwner','request\x20body:\x20','\x20inseridos\x20no\x20banco\x20de\x20dados...','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','exit','labels.association','):\x20leadInfoVariables','editFlowReply','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','readMessage','):\x20this.instance.ScheduleMessage.lastMessage_id\x20===\x20message._id','):\x20Fluxos\x20não\x20estão\x20ativados','findLabels',',\x20lastCondition:\x20','ContactModel','flowIgnoreGroups','fileUrl','toUpperCase','detectIPv6PrefixAndInterface','sendReaction','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','groupInviteCode','Generated\x20IPv6:\x20','-whatsapp-api','editflowvariable','finish','):\x20Fluxo\x20\x27','sem\x20texto\x20na\x20mensagem','Group\x20not\x20found','restart','\x1b[33m\x1b[1m','Internal\x20Server\x20Error','https://v6.ident.me','All_Instances_Config','deleteReplyOption','content','DB_PREFIX_NAME','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','Erro\x20ao\x20deletar\x20mensagens:','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','0123456789ABCDEF','normalizeMessage','processingGroup_id','\x1b[33m','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','MESSAGES_UPDATE','getHours','stopIfLastReturnedError','updateProfileName','No\x20suitable\x20network\x20interface\x20found','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','getUniqueFlowName','Erro\x20ao\x20adicionar\x20label\x20','\x20tentativas.','SUCCESS','listen','body','from','envProcess','connectionState','Falha\x20ao\x20processar\x20a\x20solicitação\x20findRealGroups','):\x20this.processingGroup_id:\x20','instanceCount','hasOwnProperty','fullName','and','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','stopMinutes','yes',',\x20Segundo\x20Valor:\x20','globalShow','user','readdirSync','fetchPrivacySettings','Not\x20Found','applyvaredit','Conexão\x20estabelecida','Erro\x20ao\x20editar\x20o\x20bloco:\x20','chat','Número:\x20','removeInstance','variable','LEVEL','close','#000000','formatStatusMessage','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','tags','updateOne','contacts.update','composing','save','urlencoded','uazapi','):\x20Ler\x20mensagem','key'];a0_0x2c21=function(){return _0x546df0;};return a0_0x2c21();}var de=j[a0_0x5ca971(0x325)]?j[a0_0x5ca971(0x543)][a0_0x5ca971(0x528)]?Ie[a0_0x5ca971(0x678)][a0_0x5ca971(0x898)](j[a0_0x5ca971(0x543)][a0_0x5ca971(0x528)],{'dbName':a0_0x5ca971(0x484)}):Ie[a0_0x5ca971(0x678)]['createConnection'](a0_0x5ca971(0x431)+j[a0_0x5ca971(0x543)]['HOST']+':'+j['CONNECTION'][a0_0x5ca971(0x84b)]+a0_0x5ca971(0x273),{'user':j['CONNECTION']['USER'],'pass':j['CONNECTION']['PASSWORD'],'dbName':'cachedContacts-whatsapp'}):null;de&&We[a0_0x5ca971(0x1d2)](a0_0x5ca971(0x48c)+de[a0_0x5ca971(0x1d0)]),process['on'](a0_0x5ca971(0x315),()=>{const _0x5e92b4=a0_0x5ca971;R&&R['close'](()=>{const _0x3b7c2e=a0_0x2d21;We[_0x3b7c2e(0x1d2)](_0x3b7c2e(0x567));}),de&&de[_0x5e92b4(0x73e)](()=>{const _0x200401=_0x5e92b4;We['info'](_0x200401(0x646));});});var eo=new Me['Schema']({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),to=new Me[(a0_0x5ca971(0x213))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),so=new Me['Schema']({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),ao=new Me['Schema']({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[eo],'default':[]}},{'_id':!0x1}),io=new Me[(a0_0x5ca971(0x213))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':ao,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':to},'groupdata':{'type':so,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),sa=_0x68e308=>{const _0x47a458=a0_0x5ca971;let _0x5e91df='z_'+_0x68e308+'_Chats';return R?.['model'](_0x47a458(0x6b1),io,_0x5e91df);},aa=require(a0_0x5ca971(0x410)),oo=new aa[(a0_0x5ca971(0x213))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ia=_0x237e83=>{const _0x1b240a=a0_0x5ca971;let _0x1726aa='z_'+_0x237e83+'_Contacts';return R?.[_0x1b240a(0x381)](_0x1b240a(0x6f8),oo,_0x1726aa);},oa=require(a0_0x5ca971(0x410)),fs=class{},ro=new oa[(a0_0x5ca971(0x213))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ra=de?.['model'](fs[a0_0x5ca971(0x41c)],ro,a0_0x5ca971(0x76a)),na=require(a0_0x5ca971(0x410)),ws=class{},no=new na['Schema']({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),ze=de?.[a0_0x5ca971(0x381)](ws[a0_0x5ca971(0x41c)],no,'instances'),ca=require(a0_0x5ca971(0x410)),co=new ca['Schema']({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),la=_0x6ed652=>{const _0x27a0eb=a0_0x5ca971;let _0x3e306e='z_'+_0x6ed652+_0x27a0eb(0x1f4);return R?.['model'](_0x27a0eb(0x554),co,_0x3e306e);},ua=require(a0_0x5ca971(0x410)),ys=class{},lo=new ua[(a0_0x5ca971(0x213))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),da=R?.['model'](ys[a0_0x5ca971(0x41c)],lo,a0_0x5ca971(0x62b)),pa=require('mongoose'),bs=class{},ha=new pa[(a0_0x5ca971(0x213))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});ha[a0_0x5ca971(0x867)](a0_0x5ca971(0x746),function(_0x20592c){const _0x59340a=a0_0x5ca971;delete this[_0x59340a(0x637)],delete this[_0x59340a(0x6f9)],delete this['flowPrefixCommand'],delete this[_0x59340a(0x27b)],delete this['flowStopMinutes'],_0x20592c();});var ga=R?.['model'](bs[a0_0x5ca971(0x41c)],ha,a0_0x5ca971(0x412)),P=require(a0_0x5ca971(0x410)),Ss=require('uuid'),He=class{},fa=new P[(a0_0x5ca971(0x213))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Ms=new P[(a0_0x5ca971(0x213))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),uo=new P['Schema']({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':'list'},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x5ca971(0x4e5)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x5ca971(0x82f)},'pollErrorMessage':{'type':String,'default':a0_0x5ca971(0x49f)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),wa=new P[(a0_0x5ca971(0x213))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),po=new P[(a0_0x5ca971(0x213))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),ho=new P[(a0_0x5ca971(0x213))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),vs=new P[(a0_0x5ca971(0x213))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),go=new P[(a0_0x5ca971(0x213))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),ya=new P['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':uo},'apirequest':po,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':go,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),ba=new P[(a0_0x5ca971(0x213))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),Cs=class{},Sa=new P['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[vs],'blocks':[ya],'groups':[fa],'conditions':[wa],'varedits':[ba],'replyOptions':{'type':[Ms],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x46e8be=a0_0x5ca971;return _0x46e8be(0x461)+Math[_0x46e8be(0x541)]()[_0x46e8be(0x7b1)](0x24)[_0x46e8be(0x3f4)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':a0_0x5ca971(0x6ce)},'startID':{'type':String,'default':()=>(0x0,Ss['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ss['v4'])()},'shareOwners':{'type':[String],'default':[]}});Sa[a0_0x5ca971(0x867)](a0_0x5ca971(0x5dc),function(_0x216728){const _0x1a73f6=a0_0x5ca971;let _0x366221=this['getUpdate']();if(_0x366221&&typeof _0x366221=='object'&&_0x1a73f6(0x5fc)in _0x366221){let _0x188661=_0x366221[_0x1a73f6(0x5fc)];if(_0x188661){let _0x35be79=new Set(),_0x4b888a=new Set(_0x188661['variables']?.[_0x1a73f6(0x7a8)](_0x129b68=>_0x129b68['name'])),_0x2570c8=JSON[_0x1a73f6(0x179)](_0x188661),_0x23b630=/{{(?!_)([^}]*)}}/g,_0x5223ad;for(;(_0x5223ad=_0x23b630[_0x1a73f6(0x5ac)](_0x2570c8))!==null;)_0x4b888a[_0x1a73f6(0x64e)](_0x5223ad[0x1])||_0x35be79[_0x1a73f6(0x3fc)](_0x5223ad[0x1]);_0x35be79[_0x1a73f6(0x16e)]>0x0?(console[_0x1a73f6(0x38d)]('Variáveis\x20não\x20encontradas:',Array['from'](_0x35be79)),_0x188661[_0x1a73f6(0x52e)]=Array[_0x1a73f6(0x724)](_0x35be79)):_0x188661[_0x1a73f6(0x52e)]=[],this[_0x1a73f6(0x1ea)]({'$set':_0x188661});}}_0x216728();});var Ce=R?.[a0_0x5ca971(0x381)](Cs[a0_0x5ca971(0x41c)],Sa,a0_0x5ca971(0x1aa)),mo=new P[(a0_0x5ca971(0x213))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[vs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[ho]},{'_id':!0x1}),fo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[vs],'blocks':[ya],'groups':[fa],'conditions':[wa],'varedits':[ba],'replyOptions':{'type':[Ms],'default':[]},'chatLog':mo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x5ca971(0x158)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x5ca971(0x82f)},'waitingMenu_replyOptions':{'type':[Ms],'default':[]}}),Ma=_0x18b407=>{const _0x3adc41=a0_0x5ca971;let _0x566345='z_'+_0x18b407+'_FlowHistorico';return R?.[_0x3adc41(0x381)](_0x3adc41(0x473),fo,_0x566345);},wo=new P[(a0_0x5ca971(0x213))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),ma=new P[(a0_0x5ca971(0x213))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),yo=new P[(a0_0x5ca971(0x213))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[ma],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x5ca971(0x347)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[wo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':ma,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ca=_0x53098a=>{const _0x37477f=a0_0x5ca971;let _0xe65e3d='z_'+_0x53098a+_0x37477f(0x4ab);return R?.[_0x37477f(0x381)](_0x37477f(0x39d),yo,_0xe65e3d);},Es=class{},bo=new P[(a0_0x5ca971(0x213))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),So=new P[(a0_0x5ca971(0x213))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Mo=new P[(a0_0x5ca971(0x213))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Co=new P[(a0_0x5ca971(0x213))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':a0_0x5ca971(0x192)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),Eo=new P[(a0_0x5ca971(0x213))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),vo=new P[(a0_0x5ca971(0x213))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[Eo]},'customFields':{'type':[Mo]},'flowConfig':{'type':Co,'default':{}},'flows':{'type':[So],'default':[]},'autoCompleteMessages':{'type':[bo],'default':[]}}),Ae=R?.[a0_0x5ca971(0x381)](Es[a0_0x5ca971(0x41c)],vo,a0_0x5ca971(0x755)),Ea=require(a0_0x5ca971(0x410)),No=new Ea[(a0_0x5ca971(0x213))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),va=_0x2f8a32=>{const _0x59312d=a0_0x5ca971;let _0x58f8d1='z_'+_0x2f8a32+_0x59312d(0x282);return R?.[_0x59312d(0x381)](_0x59312d(0x475),No,_0x58f8d1);},_=class{constructor(_0x4068a7){const _0x2c49da=a0_0x5ca971;this['dbSettings']=_0x4068a7[_0x2c49da(0x76d)]('DATABASE');}};function I(_0x5df1fd){const _0x146125=a0_0x5ca971;let _0x8ccf24={};for(let [_0x90e22,_0xd7a215]of Object[_0x146125(0x327)](_0x5df1fd))if(typeof _0xd7a215==_0x146125(0x487)&&!Array[_0x146125(0x4d0)](_0xd7a215)){for(let [_0x1657fd,_0x1cb449]of Object[_0x146125(0x327)](_0xd7a215))_0x8ccf24[_0x90e22+'.'+_0x1657fd]=_0x1cb449;}else _0x8ccf24[_0x90e22]=_0xd7a215;return _0x8ccf24;}var Ke=class{constructor(_0x4359fd,_0x41238b,_0x1aa438,_0x1970a2,_0x13cd63,_0x3d8dd9,_0x538cff,_0x3e37c6,_0xcb88a7,_0x30e380,_0xd7317c,_0x3ac17b,_0x315119){const _0x48c194=a0_0x5ca971;this['message']=_0x4359fd,this[_0x48c194(0x739)]=_0x41238b,this[_0x48c194(0x821)]=_0x1aa438,this[_0x48c194(0x68f)]=_0x1970a2,this[_0x48c194(0x412)]=_0x13cd63,this['auth']=_0x3d8dd9,this[_0x48c194(0x3f0)]=_0x538cff,this['flow']=_0x3e37c6,this['flowConversation']=_0xcb88a7,this['label']=_0x30e380,this[_0x48c194(0x43e)]=_0xd7317c,this['automateSystem']=_0x3ac17b,this[_0x48c194(0x555)]=_0x315119;}get[a0_0x5ca971(0x78a)](){const _0x2683b0=a0_0x5ca971;return this[_0x2683b0(0x555)];}},Qe=class{},Ye=class extends _{[a0_0x5ca971(0x680)](_0xade47a){return la(_0xade47a);}async[a0_0x5ca971(0x772)](_0x1bedc8,_0xe7f36e){const _0x336548=a0_0x5ca971;if(_0x1bedc8[_0x336548(0x532)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x336548(0x680)](_0xe7f36e)['insertMany']([..._0x1bedc8]))[_0x336548(0x532)]};}catch(_0x4ba2b9){return _0x4ba2b9;}}async['find'](_0x10061d,_0x4b2712){const _0x384040=a0_0x5ca971;try{let _0x29ba90=this[_0x384040(0x680)](_0x4b2712),_0x37d78d=I(_0x10061d[_0x384040(0x1cf)]);return await _0x29ba90[_0x384040(0x2d4)](_0x37d78d)[_0x384040(0x1ba)]({'messageTimestamp':-0x1})[_0x384040(0x268)](_0x10061d?.[_0x384040(0x268)]??0x0)[_0x384040(0x1df)]();}catch{return[];}}async[a0_0x5ca971(0x8a2)](_0x5351ee,_0x137d5c){const _0x33aab8=a0_0x5ca971;try{let _0x5dc8be=this[_0x33aab8(0x680)](_0x137d5c),_0x306032=I(_0x5351ee[_0x33aab8(0x1cf)]);await _0x5dc8be[_0x33aab8(0x63e)](_0x306032);}catch(_0x9e5bf2){console[_0x33aab8(0x2b1)](_0x9e5bf2);}}async[a0_0x5ca971(0x26b)](_0x308135,_0x1a4262,_0x31cdcb){const _0x3a0afd=a0_0x5ca971;try{let _0x499d94=this['getMessageModelForOwner'](_0x31cdcb),_0x1c66e2=I(_0x308135[_0x3a0afd(0x1cf)]);return await _0x499d94[_0x3a0afd(0x5dc)](_0x1c66e2,{'$set':_0x1a4262},{'new':!0x0});}catch(_0x433d51){throw console[_0x3a0afd(0x2b1)](_0x433d51),_0x433d51;}}async[a0_0x5ca971(0x493)](_0x102053,_0x2cdc1f){const _0x318ce0=a0_0x5ca971;if(_0x102053[_0x318ce0(0x532)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x318ce0(0x680)](_0x2cdc1f)[_0x318ce0(0x493)]([..._0x102053]))[_0x318ce0(0x532)]};}catch(_0x527ddf){return console[_0x318ce0(0x2a9)](_0x318ce0(0x219),_0x527ddf),_0x527ddf;}}async[a0_0x5ca971(0x3c9)](_0xcf86bd){const _0x3536b7=a0_0x5ca971;try{return await this[_0x3536b7(0x680)](_0xcf86bd)[_0x3536b7(0x819)][_0x3536b7(0x39f)](),{'success':!0x0};}catch(_0x210e67){return console[_0x3536b7(0x2b1)](_0x210e67),{'success':!0x1,'error':_0x210e67};}}},Ds=A(require('@ffmpeg-installer/ffmpeg')),w=A(require(a0_0x5ca971(0x456))),Le=require('fs'),J=A(require('path')),ee=A(require(a0_0x5ca971(0x5c5))),_i=require('uuid'),Oi=A(require('qrcode')),xi=A(require(a0_0x5ca971(0x5da))),Na=[a0_0x5ca971(0x1c4),a0_0x5ca971(0x2b4),a0_0x5ca971(0x6af),a0_0x5ca971(0x443),'stickerMessage'],$a=[a0_0x5ca971(0x7e4),'documentWithCaptionMessage',a0_0x5ca971(0x2e8),a0_0x5ca971(0x549)],Ps=require('os'),Jt=A(require(a0_0x5ca971(0x2fa))),Fe=require(a0_0x5ca971(0x31f)),Di=require(a0_0x5ca971(0x629)),fe=A(require(a0_0x5ca971(0x410))),L=require(a0_0x5ca971(0x7c2)),pe=class{constructor(_0x14b756,_0x5f319a,_0x34b3b2){const _0xdb8241=a0_0x5ca971;this['jid']=_0x14b756,this[_0xdb8241(0x160)]=_0x5f319a,this[_0xdb8241(0x41c)]=_0x34b3b2;}},Xe=class{},Ze=class{},Te=class{},et=class{},tt=class{},Ee=class{},st=class{},at=class{},it=class{},ot=class{},Pt=A(require('express')),Ra=require('fs'),Ia=require('path');async function _e(_0x23d77b){const _0x983364=a0_0x5ca971;let _0x29080f=z[_0x983364(0x61b)][_0x23d77b];if(j['ENABLED']){let _0x23872d=R[_0x983364(0x40e)]()['db'](j[_0x983364(0x543)]['DB_PREFIX_NAME']+_0x983364(0x57a))[_0x983364(0x819)](_0x23d77b);return _0x29080f||(await _0x23872d[_0x983364(0x2d4)]({})[_0x983364(0x63d)]())[_0x983364(0x532)]>0x0;}return _0x29080f||(0x0,Ra[_0x983364(0x5d1)])((0x0,Ia['join'])(Se,_0x23d77b));}async function Aa(_0x432405,_0x5291f1,_0x4fa57c){const _0xf306cb=a0_0x5ca971;if(_0x432405[_0xf306cb(0x252)][_0xf306cb(0x839)]('/instance/create')||_0x432405[_0xf306cb(0x252)][_0xf306cb(0x839)](_0xf306cb(0x7cf))||_0x432405[_0xf306cb(0x252)][_0xf306cb(0x839)](_0xf306cb(0x342))||_0x432405['originalUrl'][_0xf306cb(0x839)](_0xf306cb(0x289))||_0x432405[_0xf306cb(0x252)][_0xf306cb(0x839)](_0xf306cb(0x61c))||_0x432405['originalUrl'][_0xf306cb(0x839)](_0xf306cb(0x5ce))||_0x432405[_0xf306cb(0x252)][_0xf306cb(0x839)](_0xf306cb(0x7b8)))return _0x4fa57c();let _0x49426a=_0x432405[_0xf306cb(0x3fe)];if(!_0x49426a?.['instanceName'])throw new m(_0xf306cb(0x28a));if(!await _e(_0x49426a['instanceName']))throw new q('The\x20'+_0x49426a[_0xf306cb(0x6dd)]+'\x20instance\x20does\x20not\x20exist');_0x4fa57c();}async function Ta(_0x4f2323,_0xa4d4e3,_0x20fe3a){const _0x15e2db=a0_0x5ca971;if(_0x4f2323[_0x15e2db(0x252)][_0x15e2db(0x839)](_0x15e2db(0x502))){let _0x11f1fd=_0x4f2323['body'];if(await _e(_0x11f1fd[_0x15e2db(0x6dd)]))throw new se('This\x20name\x20'+_0x11f1fd[_0x15e2db(0x6dd)]+_0x15e2db(0x301));z[_0x15e2db(0x61b)][_0x11f1fd[_0x15e2db(0x6dd)]]&&delete z[_0x15e2db(0x61b)][_0x11f1fd[_0x15e2db(0x6dd)]];}_0x20fe3a();}var _a=require('class-validator'),Oa=A(require(a0_0x5ca971(0x21e))),rt=a0_0x5ca971(0x748),Ro=new $(a0_0x5ca971(0x798));function a0_0x2d21(_0x499a02,_0x3a476e){const _0x2c21e7=a0_0x2c21();return a0_0x2d21=function(_0x2d21ce,_0x4ae2f8){_0x2d21ce=_0x2d21ce-0x144;let _0x38a97b=_0x2c21e7[_0x2d21ce];return _0x38a97b;},a0_0x2d21(_0x499a02,_0x3a476e);}async function Io(_0x184596,_0x30c7cd,_0x42d50d){const _0x8478c6=a0_0x5ca971;let _0x2c3a39=_0x184596['get']('apikey');if(_0x2c3a39&&b[_0x8478c6(0x76d)](_0x8478c6(0x26a))['API_KEY'][_0x8478c6(0x255)]!==_0x2c3a39)throw new ce();if(b[_0x8478c6(0x76d)](_0x8478c6(0x26a))[_0x8478c6(0x486)]['KEY']===_0x2c3a39)return _0x42d50d();if((_0x184596[_0x8478c6(0x252)][_0x8478c6(0x839)](_0x8478c6(0x502))||_0x184596[_0x8478c6(0x252)][_0x8478c6(0x839)](_0x8478c6(0x7cf)))&&!_0x2c3a39)throw new se('Missing\x20global\x20api\x20key','The\x20global\x20api\x20key\x20must\x20be\x20set');let _0x521200=b['get'](_0x8478c6(0x26a))[_0x8478c6(0x858)];try{let [_0x4eea59,_0x24cb1a]=_0x184596['get'](_0x8478c6(0x309))[_0x8478c6(0x266)]('\x20');if(_0x4eea59['toLowerCase']()!==_0x8478c6(0x7fe))throw new ce();if(!(0x0,_a['isJWT'])(_0x24cb1a))throw new ce();let _0x53dfa9=_0x184596[_0x8478c6(0x3fe)],_0x2a8dba=Oa['default']['verify'](_0x24cb1a,_0x521200[_0x8478c6(0x55f)],{'ignoreExpiration':_0x521200[_0x8478c6(0x6d6)]===0x0});if(_0x53dfa9[_0x8478c6(0x6dd)]!==_0x2a8dba[_0x8478c6(0x6dd)]||rt!==_0x2a8dba[_0x8478c6(0x162)])throw new ce();return _0x42d50d();}catch(_0x3c0036){throw Ro[_0x8478c6(0x2b1)](_0x3c0036),new ce();}}async function Ao(_0x284f7a,_0x58b98a,_0x5d37f4){const _0x43d698=a0_0x5ca971;let _0x299d31=b[_0x43d698(0x76d)](_0x43d698(0x26a))[_0x43d698(0x486)],_0x247f66=_0x284f7a[_0x43d698(0x76d)](_0x43d698(0x5d5));if(_0x299d31[_0x43d698(0x255)]===_0x247f66)return _0x5d37f4();if(_0x284f7a[_0x43d698(0x252)]['includes']('/instance/create')){let _0x121a5a=Da,_0x19268c=_0x284f7a['body'][_0x43d698(0x6dd)];if(_0x121a5a&&_0x19268c['toLowerCase']()[_0x43d698(0x365)](_0x121a5a['toLowerCase']()))return _0x5d37f4();if(!_0x247f66)throw new se(_0x43d698(0x3a7),_0x43d698(0x4a0));}if(_0x284f7a[_0x43d698(0x252)][_0x43d698(0x839)](_0x43d698(0x7cf))&&!_0x247f66)throw new se('Missing\x20global\x20api\x20key',_0x43d698(0x4a0));if(_0x284f7a[_0x43d698(0x252)][_0x43d698(0x839)](_0x43d698(0x342))&&!_0x247f66)throw new se('Missing\x20global\x20api\x20key','The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x284f7a[_0x43d698(0x252)][_0x43d698(0x839)]('/config')&&!_0x247f66)throw new se(_0x43d698(0x3a7),_0x43d698(0x4a0));try{let _0x5ae93e=_0x284f7a[_0x43d698(0x3fe)],_0x453e1a=await we[_0x43d698(0x6aa)][_0x43d698(0x2d4)](_0x5ae93e[_0x43d698(0x6dd)]);if(_0x453e1a&&_0x453e1a['apikey']===_0x247f66)return _0x5d37f4();}catch{}throw new ce();}var xa={'jwt':Io,'apikey':Ao},gi=require('express'),v=require(a0_0x5ca971(0x1a9)),E=(..._0x13e0ee)=>{const _0x42d131=a0_0x5ca971;let _0x504c05={};return _0x13e0ee[_0x42d131(0x491)](_0x298260=>_0x504c05[_0x298260]={'minLength':0x1,'description':'The\x20\x22'+_0x298260+_0x42d131(0x492)}),{'if':{'propertyNames':{'enum':[..._0x13e0ee]}},'then':{'properties':_0x504c05}};},N={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'instanceName':{'type':'string'}},...E(a0_0x5ca971(0x6dd))},mc={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'oldToken':{'type':'string'}},'required':[a0_0x5ca971(0x210)],...E(a0_0x5ca971(0x210))},fc={'properties':{'key':{'type':a0_0x5ca971(0x487),'properties':{'id':{'type':a0_0x5ca971(0x2a0)},'remoteJid':{'type':'string'},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id',a0_0x5ca971(0x509),'fromMe'],...E('id','remoteJid')},'message':{'type':a0_0x5ca971(0x487)}}},ae={'properties':{'delay':{'type':a0_0x5ca971(0x59f),'description':a0_0x5ca971(0x156)},'presence':{'type':a0_0x5ca971(0x2a0),'enum':[a0_0x5ca971(0x3ac),'available',a0_0x5ca971(0x745),'recording',a0_0x5ca971(0x33a)]}}},X={'type':a0_0x5ca971(0x2a0),'description':a0_0x5ca971(0x81c)},Pa={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...X},'options':{...ae},'textMessage':{'type':'object','properties':{'text':{'type':a0_0x5ca971(0x2a0)}},'required':[a0_0x5ca971(0x6e4)],...E(a0_0x5ca971(0x6e4))}},'required':[a0_0x5ca971(0x227),a0_0x5ca971(0x274)]},ka={'type':a0_0x5ca971(0x2a0),'pattern':'^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','description':a0_0x5ca971(0x81c)},wc={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...ka},'options':{...ae},'textMessage':{'type':a0_0x5ca971(0x487),'properties':{'text':{'type':a0_0x5ca971(0x2a0)}},'required':[a0_0x5ca971(0x6e4)],...E('text')}},'required':[a0_0x5ca971(0x227),a0_0x5ca971(0x274)]},yc={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'number':{...ka},'options':{...ae},'mediaMessage':{'type':a0_0x5ca971(0x487),'properties':{'mediatype':{'type':a0_0x5ca971(0x2a0),'enum':['image','document',a0_0x5ca971(0x6b8),a0_0x5ca971(0x765)]},'media':{'type':a0_0x5ca971(0x2a0)},'fileName':{'type':'string'},'caption':{'type':'string'}},'required':[a0_0x5ca971(0x237),a0_0x5ca971(0x1f5)],...E(a0_0x5ca971(0x2a1),a0_0x5ca971(0x572),a0_0x5ca971(0x1f5))}},'required':[a0_0x5ca971(0x4b5),a0_0x5ca971(0x274)]},La={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'number':{...X},'options':{...ae},'stickerMessage':{'type':'object','properties':{'image':{'type':a0_0x5ca971(0x2a0)}},'required':[a0_0x5ca971(0x525)],...E('image')}},'required':[a0_0x5ca971(0x34b),a0_0x5ca971(0x274)]},Fa={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'statusMessage':{'type':a0_0x5ca971(0x487),'properties':{'type':{'type':'string','enum':[a0_0x5ca971(0x6e4),a0_0x5ca971(0x525),a0_0x5ca971(0x765),a0_0x5ca971(0x6b8)]},'content':{'type':a0_0x5ca971(0x2a0)},'caption':{'type':'string'},'backgroundColor':{'type':a0_0x5ca971(0x2a0)},'font':{'type':'integer','minimum':0x0,'maximum':0x5},'statusJidList':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca971(0x2a0),'pattern':a0_0x5ca971(0x346),'description':a0_0x5ca971(0x3e0)}},'allContacts':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x5ca971(0x536),a0_0x5ca971(0x70d)],...E('type',a0_0x5ca971(0x70d))}},'required':[a0_0x5ca971(0x4ff)]},Ua={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'number':{...X},'options':{...ae},'mediaMessage':{'type':a0_0x5ca971(0x487),'properties':{'mediatype':{'type':a0_0x5ca971(0x2a0),'enum':['image',a0_0x5ca971(0x400),'video','audio']},'media':{'type':a0_0x5ca971(0x2a0)},'fileName':{'type':a0_0x5ca971(0x2a0)},'caption':{'type':'string'}},'required':[a0_0x5ca971(0x237),a0_0x5ca971(0x1f5)],...E(a0_0x5ca971(0x2a1),'caption',a0_0x5ca971(0x1f5))}},'required':[a0_0x5ca971(0x4b5),a0_0x5ca971(0x274)]},ja={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'number':{...X},'options':{...ae},'audioMessage':{'type':'object','properties':{'audio':{'type':'string'}},'required':['audio'],...E(a0_0x5ca971(0x765))}},'required':[a0_0x5ca971(0x6af),a0_0x5ca971(0x274)]},Ja={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'number':{...X},'pollMessage':{'type':'object','properties':{'name':{'type':a0_0x5ca971(0x2a0)},'selectableCount':{'type':a0_0x5ca971(0x274)},'values':{'type':a0_0x5ca971(0x5f3),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x5ca971(0x41c),'selectableCount',a0_0x5ca971(0x7cb)],...E(a0_0x5ca971(0x41c),a0_0x5ca971(0x857),a0_0x5ca971(0x7cb))}},'required':['number',a0_0x5ca971(0x47e)]},qa={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...X},'menuMessage':{'type':a0_0x5ca971(0x487),'properties':{'text':{'type':'string'},'choices':{'type':a0_0x5ca971(0x5f3),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x5ca971(0x6e4),a0_0x5ca971(0x16d)],...E('text',a0_0x5ca971(0x16d))}},'required':[a0_0x5ca971(0x274),a0_0x5ca971(0x36b)]},Va={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'number':{...X},'options':{...ae},'buttonMessage':{'type':a0_0x5ca971(0x487),'properties':{'title':{'type':'string'},'description':{'type':a0_0x5ca971(0x2a0)},'footerText':{'type':a0_0x5ca971(0x2a0)},'buttons':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca971(0x487),'properties':{'buttonText':{'type':a0_0x5ca971(0x2a0)},'buttonId':{'type':a0_0x5ca971(0x2a0)}},'required':[a0_0x5ca971(0x2eb),a0_0x5ca971(0x62f)],...E('buttonText',a0_0x5ca971(0x62f))}},'mediaMessage':{'type':a0_0x5ca971(0x487),'properties':{'media':{'type':'string'},'fileName':{'type':a0_0x5ca971(0x2a0)},'mediatype':{'type':a0_0x5ca971(0x2a0),'enum':[a0_0x5ca971(0x525),a0_0x5ca971(0x400),'video']}},'required':['media',a0_0x5ca971(0x237)],...E(a0_0x5ca971(0x1f5),a0_0x5ca971(0x2a1))}},'required':[a0_0x5ca971(0x451),'buttons'],...E(a0_0x5ca971(0x451),a0_0x5ca971(0x44d))}},'required':[a0_0x5ca971(0x274),a0_0x5ca971(0x5ad)]},Ga={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'number':{...X},'options':{...ae},'locationMessage':{'type':a0_0x5ca971(0x487),'properties':{'latitude':{'type':'number'},'longitude':{'type':a0_0x5ca971(0x274)},'name':{'type':a0_0x5ca971(0x2a0)},'address':{'type':a0_0x5ca971(0x2a0)}},'required':[a0_0x5ca971(0x331),a0_0x5ca971(0x520)],...E(a0_0x5ca971(0x41c),a0_0x5ca971(0x6a9))}},'required':[a0_0x5ca971(0x274),'locationMessage']},Ba={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'number':{...X},'options':{...ae},'listMessage':{'type':a0_0x5ca971(0x487),'properties':{'title':{'type':a0_0x5ca971(0x2a0)},'description':{'type':a0_0x5ca971(0x2a0)},'footerText':{'type':a0_0x5ca971(0x2a0)},'buttonText':{'type':a0_0x5ca971(0x2a0)},'sections':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca971(0x487),'properties':{'title':{'type':a0_0x5ca971(0x2a0)},'rows':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca971(0x487),'properties':{'title':{'type':a0_0x5ca971(0x2a0)},'description':{'type':a0_0x5ca971(0x2a0)},'rowId':{'type':a0_0x5ca971(0x2a0)}},'required':[a0_0x5ca971(0x451),a0_0x5ca971(0x3ee)],...E('title',a0_0x5ca971(0x3ee))}}},'required':[a0_0x5ca971(0x451),a0_0x5ca971(0x866)],...E(a0_0x5ca971(0x451))}}},'required':['title',a0_0x5ca971(0x44d),a0_0x5ca971(0x2eb),'sections'],...E(a0_0x5ca971(0x451),a0_0x5ca971(0x44d),a0_0x5ca971(0x2eb),a0_0x5ca971(0x5ed))}},'required':['number',a0_0x5ca971(0x67a)]},Wa={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{...X},'options':{...ae},'contactMessage':{'type':a0_0x5ca971(0x5f3),'items':{'type':a0_0x5ca971(0x487),'properties':{'fullName':{'type':a0_0x5ca971(0x2a0)},'phoneNumber':{'type':'string','minLength':0xa}},'required':[a0_0x5ca971(0x72b),a0_0x5ca971(0x4ed)],...E(a0_0x5ca971(0x72b))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x5ca971(0x274),a0_0x5ca971(0x68b)]},za={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'reactionMessage':{'type':a0_0x5ca971(0x487),'properties':{'key':{'type':a0_0x5ca971(0x487),'properties':{'id':{'type':a0_0x5ca971(0x2a0)},'remoteJid':{'type':a0_0x5ca971(0x2a0)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id',a0_0x5ca971(0x509),a0_0x5ca971(0x751)],...E('id',a0_0x5ca971(0x509))},'reaction':{'type':a0_0x5ca971(0x2a0)}},'required':['key','reaction'],...E(a0_0x5ca971(0x3eb))}},'required':['reactionMessage']},Ha={'$id':(0x0,v['v4'])(),'type':'object','properties':{'numbers':{'type':a0_0x5ca971(0x5f3),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':a0_0x5ca971(0x346),'description':a0_0x5ca971(0x883)}}}},Ka={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'readMessages':{'type':a0_0x5ca971(0x5f3),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x5ca971(0x2a0)},'fromMe':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'remoteJid':{'type':'string'}},'required':['id',a0_0x5ca971(0x751),a0_0x5ca971(0x509)],...E('id',a0_0x5ca971(0x509))}}},'required':[a0_0x5ca971(0x1ed)]},Qa={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'privacySettings':{'type':'object','properties':{'readreceipts':{'type':a0_0x5ca971(0x2a0),'enum':[a0_0x5ca971(0x6de),a0_0x5ca971(0x44a)]},'profile':{'type':a0_0x5ca971(0x2a0),'enum':['all',a0_0x5ca971(0x5df),a0_0x5ca971(0x825),a0_0x5ca971(0x44a)]},'status':{'type':a0_0x5ca971(0x2a0),'enum':[a0_0x5ca971(0x6de),'contacts',a0_0x5ca971(0x825),a0_0x5ca971(0x44a)]},'online':{'type':'string','enum':[a0_0x5ca971(0x6de),a0_0x5ca971(0x668)]},'last':{'type':a0_0x5ca971(0x2a0),'enum':[a0_0x5ca971(0x6de),a0_0x5ca971(0x5df),a0_0x5ca971(0x825),'none']},'groupadd':{'type':a0_0x5ca971(0x2a0),'enum':[a0_0x5ca971(0x6de),'contacts',a0_0x5ca971(0x825),a0_0x5ca971(0x44a)]}},'required':[a0_0x5ca971(0x3e3),a0_0x5ca971(0x669),a0_0x5ca971(0x2f7),a0_0x5ca971(0x2c3),'last',a0_0x5ca971(0x697)],...E(a0_0x5ca971(0x3e3),a0_0x5ca971(0x669),a0_0x5ca971(0x2f7),a0_0x5ca971(0x2c3),a0_0x5ca971(0x6bd),'groupadd')}},'required':[a0_0x5ca971(0x685)]},Ya={'$id':(0x0,v['v4'])(),'type':'object','properties':{'lastMessage':{'type':a0_0x5ca971(0x487),'properties':{'key':{'type':a0_0x5ca971(0x487),'properties':{'id':{'type':a0_0x5ca971(0x2a0)},'remoteJid':{'type':a0_0x5ca971(0x2a0)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id','fromMe','remoteJid'],...E('id',a0_0x5ca971(0x509))},'messageTimestamp':{'type':'integer','minLength':0x1}},'required':['key'],...E(a0_0x5ca971(0x684))},'archive':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['lastMessage',a0_0x5ca971(0x2f6)]},Xa={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'id':{'type':a0_0x5ca971(0x2a0)},'fromMe':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x5ca971(0x2a0)},'participant':{'type':a0_0x5ca971(0x2a0)}},'required':['id',a0_0x5ca971(0x751),a0_0x5ca971(0x509)],...E('id',a0_0x5ca971(0x509),a0_0x5ca971(0x489))},Za={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'where':{'type':a0_0x5ca971(0x487),'properties':{'_id':{'type':a0_0x5ca971(0x2a0),'minLength':0x1},'pushName':{'type':a0_0x5ca971(0x2a0),'minLength':0x1},'id':{'type':a0_0x5ca971(0x2a0),'minLength':0x1}},...E(a0_0x5ca971(0x4a6),'id','pushName')}}},ei={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'name':{'type':'string'}},...E('name')},ti={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'status':{'type':a0_0x5ca971(0x2a0)}},...E('status')},Oe={'$id':(0x0,v['v4'])(),'type':'object','properties':{'number':{'type':a0_0x5ca971(0x2a0)},'picture':{'type':a0_0x5ca971(0x2a0)}}},si={'type':a0_0x5ca971(0x487),'properties':{'wuid':{'type':a0_0x5ca971(0x2a0)},'name':{'type':a0_0x5ca971(0x2a0)},'picture':{'type':a0_0x5ca971(0x2a0)},'status':{'type':a0_0x5ca971(0x2a0)},'isBusiness':{'type':'boolean'}}},ai={'$id':(0x0,v['v4'])(),'type':'object','properties':{'where':{'type':a0_0x5ca971(0x487),'properties':{'_id':{'type':'string','minLength':0x1},'key':{'type':a0_0x5ca971(0x487),'if':{'propertyNames':{'enum':[a0_0x5ca971(0x751),a0_0x5ca971(0x509),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x5ca971(0x2a0),'minLength':0x1,'description':a0_0x5ca971(0x827)},'id':{'type':a0_0x5ca971(0x2a0),'minLength':0x1,'description':'The\x20property\x20cannot\x20be\x20empty'},'fromMe':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x5ca971(0x487)}},...E('_id')},'limit':{'type':a0_0x5ca971(0x59f)}}},bc={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'where':{'type':'object','properties':{'_id':{'type':'string'},'remoteJid':{'type':'string'},'id':{'type':a0_0x5ca971(0x2a0)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'participant':{'type':a0_0x5ca971(0x2a0)},'status':{'type':a0_0x5ca971(0x2a0),'enum':[a0_0x5ca971(0x86e),'PENDING',a0_0x5ca971(0x2a6),a0_0x5ca971(0x21d),a0_0x5ca971(0x378),a0_0x5ca971(0x529)]}},...E(a0_0x5ca971(0x4a6),'remoteJid','id',a0_0x5ca971(0x2f7))},'limit':{'type':a0_0x5ca971(0x59f)}}},ii={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'number':{...X},'presence':{'type':a0_0x5ca971(0x2a0),'enum':[a0_0x5ca971(0x3ac),a0_0x5ca971(0x5e9),a0_0x5ca971(0x745),a0_0x5ca971(0x6b0),a0_0x5ca971(0x33a)]}},'required':[a0_0x5ca971(0x611),a0_0x5ca971(0x274)]},oi={'$id':(0x0,v['v4'])(),'type':'object','properties':{'subject':{'type':a0_0x5ca971(0x2a0)},'description':{'type':a0_0x5ca971(0x2a0)},'profilePicture':{'type':'string'},'participants':{'type':a0_0x5ca971(0x5f3),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca971(0x2a0),'minLength':0xa,'pattern':'\x5cd+','description':a0_0x5ca971(0x1c7)}}},'required':[a0_0x5ca971(0x5c6),a0_0x5ca971(0x540)],...E('subject',a0_0x5ca971(0x44d),a0_0x5ca971(0x674))},xe={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'groupJid':{'type':a0_0x5ca971(0x2a0),'pattern':a0_0x5ca971(0x7a1)}},'required':['groupJid'],...E('groupJid')},ri={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'groupJid':{'type':a0_0x5ca971(0x2a0)},'action':{'type':a0_0x5ca971(0x2a0),'enum':[a0_0x5ca971(0x3fc),a0_0x5ca971(0x50e),a0_0x5ca971(0x2ce),a0_0x5ca971(0x25e),a0_0x5ca971(0x2a3),a0_0x5ca971(0x68d)]},'participants':{'type':a0_0x5ca971(0x5f3),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5ca971(0x2a0),'minLength':0xa,'pattern':a0_0x5ca971(0x240),'description':a0_0x5ca971(0x1c7)}}},'required':[a0_0x5ca971(0x17e),'action','participants'],...E('groupJid',a0_0x5ca971(0x44b))},ni={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'groupJid':{'type':a0_0x5ca971(0x2a0)},'expiration':{'type':a0_0x5ca971(0x274),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':['groupJid',a0_0x5ca971(0x605)],...E(a0_0x5ca971(0x17e),a0_0x5ca971(0x605))},ci={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'groupJid':{'type':a0_0x5ca971(0x2a0)},'image':{'type':a0_0x5ca971(0x2a0)}},'required':['groupJid',a0_0x5ca971(0x525)],...E('groupJid',a0_0x5ca971(0x525))},li={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'groupJid':{'type':'string'},'description':{'type':a0_0x5ca971(0x2a0)}},'required':[a0_0x5ca971(0x17e),a0_0x5ca971(0x44d)],...E(a0_0x5ca971(0x17e),a0_0x5ca971(0x44d))},ui={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x5ca971(0x2a0)},'name':{'type':a0_0x5ca971(0x2a0)}},'required':[a0_0x5ca971(0x17e),a0_0x5ca971(0x41c)],...E(a0_0x5ca971(0x17e),a0_0x5ca971(0x41c))},di={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x5ca971(0x2a0)},'setting':{'type':a0_0x5ca971(0x2a0),'enum':[a0_0x5ca971(0x3fd),a0_0x5ca971(0x285),a0_0x5ca971(0x53b),a0_0x5ca971(0x663)]}},'required':['groupJid',a0_0x5ca971(0x76b)],...E('groupJid',a0_0x5ca971(0x76b))},pi={'$id':(0x0,v['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x5ca971(0x2a0)},'restrict':{'type':a0_0x5ca971(0x280)},'announce':{'type':a0_0x5ca971(0x280)},'memberAddMode':{'type':a0_0x5ca971(0x280)},'joinApprovalMode':{'type':a0_0x5ca971(0x280)},'expiration':{'type':a0_0x5ca971(0x59f),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x5ca971(0x2a0)},'description':{'type':a0_0x5ca971(0x2a0)},'image':{'type':a0_0x5ca971(0x2a0)}}},Ns={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'inviteCode':{'type':a0_0x5ca971(0x2a0)}},'required':['inviteCode'],...E(a0_0x5ca971(0x3ef))},hi={'$id':(0x0,v['v4'])(),'type':'object','properties':{'url':{'type':a0_0x5ca971(0x2a0)},'enabled':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]}},'required':[a0_0x5ca971(0x768),a0_0x5ca971(0x80e)]},Sc={'$id':(0x0,v['v4'])(),'type':a0_0x5ca971(0x487),'properties':{'local_map':{'type':'boolean','enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':'boolean','enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x5ca971(0x280),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x5ca971(0x842),a0_0x5ca971(0x178),a0_0x5ca971(0x580),a0_0x5ca971(0x620),a0_0x5ca971(0x718),'MESSAGES_UPSERT',a0_0x5ca971(0x5b3),a0_0x5ca971(0x5d2),a0_0x5ca971(0x23d),'CONTACTS_UPDATE',a0_0x5ca971(0x7c8),a0_0x5ca971(0x439),a0_0x5ca971(0x38f),a0_0x5ca971(0x15e),a0_0x5ca971(0x318),a0_0x5ca971(0x665),a0_0x5ca971(0x351),a0_0x5ca971(0x65f),'GROUP_PARTICIPANTS_UPDATE'],...E('local_map',a0_0x5ca971(0x178),a0_0x5ca971(0x580),a0_0x5ca971(0x620),a0_0x5ca971(0x718),a0_0x5ca971(0x35c),'SEND_MESSAGE',a0_0x5ca971(0x5d2),'CONTACTS_UPSERT',a0_0x5ca971(0x20a),a0_0x5ca971(0x7c8),a0_0x5ca971(0x439),a0_0x5ca971(0x38f),'CHATS_UPDATE','CHATS_DELETE',a0_0x5ca971(0x665),a0_0x5ca971(0x351),a0_0x5ca971(0x65f),'GROUP_PARTICIPANTS_UPDATE')},nt=class{},ct=class extends _{['getContactModelForOwner'](_0x58a833){return ia(_0x58a833);}async[a0_0x5ca971(0x772)](_0xec2f10){const _0xeefe3a=a0_0x5ca971;if(_0xec2f10['length']!==0x0)try{return{'insertCount':(await this[_0xeefe3a(0x7b3)](_0xec2f10[0x0][_0xeefe3a(0x42d)])[_0xeefe3a(0x493)]([..._0xec2f10]))[_0xeefe3a(0x532)]};}catch(_0x31849e){return _0x31849e;}}async[a0_0x5ca971(0x8a2)](_0x4a7596,_0x782349){const _0x2680ee=a0_0x5ca971;try{return{'deletedCount':(await this[_0x2680ee(0x7b3)](_0x782349)[_0x2680ee(0x63e)]({..._0x4a7596[_0x2680ee(0x1cf)]}))['deletedCount']};}catch(_0x5c8417){return{'error':_0x5c8417?.[_0x2680ee(0x7b1)]()};}}async['update'](_0x2128c0,_0x2730b3){const _0x25b310=a0_0x5ca971;try{if(_0x2128c0[_0x25b310(0x532)]===0x0)return;let _0x2d9d82=this['getContactModelForOwner'](_0x2730b3),_0x5eebc9=_0x2128c0[_0x25b310(0x7a8)](_0xdfa678=>({'updateOne':{'filter':{'_id':_0xdfa678[_0x25b310(0x4a6)],'owner':_0x2730b3},'update':{..._0xdfa678}}})),{modifiedCount:_0x15acac}=await _0x2d9d82[_0x25b310(0x429)](_0x5eebc9);return{'insertCount':_0x15acac};}catch{return;}}async[a0_0x5ca971(0x2d4)](_0x4c26b0,_0x2a731d){const _0x5a61c5=a0_0x5ca971;try{let _0x217395=this[_0x5a61c5(0x7b3)](_0x2a731d),_0x32eae5=I(_0x4c26b0['where']);return await _0x217395[_0x5a61c5(0x2d4)](_0x32eae5)[_0x5a61c5(0x268)](_0x4c26b0?.['limit']??0x0)[_0x5a61c5(0x1df)]();}catch{return[];}}async[a0_0x5ca971(0x640)](_0x39545f,_0x1130bc){const _0x5262a4=a0_0x5ca971;try{let _0x494062=this[_0x5262a4(0x7b3)](_0x1130bc),_0x4aa2c4=I(_0x39545f['where']);return await _0x494062[_0x5262a4(0x640)](_0x4aa2c4)[_0x5262a4(0x1df)]();}catch{return null;}}async[a0_0x5ca971(0x3c9)](_0x5e36a5){const _0xd552f5=a0_0x5ca971;try{return await this['getContactModelForOwner'](_0x5e36a5)[_0xd552f5(0x819)]['drop'](),{'success':!0x0};}catch(_0x2c4ec5){return console[_0xd552f5(0x2b1)](_0x2c4ec5),{'success':!0x1,'error':_0x2c4ec5};}}},lt=require('jsonschema'),Ac=require('express-async-errors'),$s=new $(a0_0x5ca971(0x328)),W=class{[a0_0x5ca971(0x30a)](_0x463321,_0x1e2071=!0x0){const _0x193e62=a0_0x5ca971;let _0x51f6bc='/'+_0x463321;return _0x1e2071&&(_0x51f6bc+=_0x193e62(0x4b1)),_0x51f6bc;}async[a0_0x5ca971(0x50a)](_0x234f35){const _0x41d7a4=a0_0x5ca971;let {request:_0x35b45f,schema:_0x4849d8,ClassRef:_0x423b43,execute:_0x4366ad}=_0x234f35,_0x416f49=new _0x423b43(),_0x5ce80e=_0x35b45f[_0x41d7a4(0x723)],_0x5d21e3=_0x35b45f[_0x41d7a4(0x3fe)];_0x35b45f?.[_0x41d7a4(0x56c)]&&Object['keys'](_0x35b45f[_0x41d7a4(0x56c)])[_0x41d7a4(0x532)]>0x0&&Object[_0x41d7a4(0x202)](_0x5d21e3,_0x35b45f[_0x41d7a4(0x56c)]),_0x35b45f[_0x41d7a4(0x252)]['includes'](_0x41d7a4(0x502))&&Object['assign'](_0x5d21e3,_0x5ce80e),Object[_0x41d7a4(0x202)](_0x416f49,_0x5ce80e);let _0x372a20=_0x4849d8?(0x0,lt[_0x41d7a4(0x801)])(_0x416f49,_0x4849d8):{'valid':!0x0,'errors':[]};if(!_0x372a20[_0x41d7a4(0x4bc)]){let _0x4b8958=_0x372a20['errors'][_0x41d7a4(0x7a8)](({property:_0x24ed6c,stack:_0x23f705,schema:_0x557539})=>{const _0x132c80=_0x41d7a4;let _0x4669f1;return _0x557539[_0x132c80(0x44d)]?_0x4669f1=_0x557539[_0x132c80(0x44d)]:_0x4669f1=_0x23f705[_0x132c80(0x3d2)](_0x132c80(0x445),''),{'property':_0x24ed6c[_0x132c80(0x3d2)](_0x132c80(0x445),''),'message':_0x4669f1};});throw $s['error']([..._0x4b8958]),new m(..._0x4b8958);}return await _0x4366ad(_0x5d21e3,_0x416f49);}async[a0_0x5ca971(0x6a7)](_0x58a58d){const _0x396530=a0_0x5ca971;let {request:_0x320c98,ClassRef:_0x5162b4,schema:_0x1e8df7,execute:_0x46e9f1}=_0x58a58d,_0x5005c2=_0x320c98[_0x396530(0x56c)];if(!_0x5005c2?.[_0x396530(0x17e)])throw new m(_0x396530(0x711),_0x396530(0x48a));let _0x3d8fad=_0x320c98[_0x396530(0x3fe)],_0x1a4744=_0x320c98['body'],_0x48f4d1=new _0x5162b4();Object[_0x396530(0x202)](_0x1a4744,_0x5005c2),Object[_0x396530(0x202)](_0x48f4d1,_0x1a4744);let _0x26100b=(0x0,lt[_0x396530(0x801)])(_0x48f4d1,_0x1e8df7);if(!_0x26100b['valid']){let _0x1101f3=_0x26100b['errors'][_0x396530(0x7a8)](({property:_0x3209b8,stack:_0xe31745,schema:_0x4778ee})=>{const _0x274e29=_0x396530;let _0x2b3bc0;return _0x4778ee[_0x274e29(0x44d)]?_0x2b3bc0=_0x4778ee[_0x274e29(0x44d)]:_0x2b3bc0=_0xe31745['replace'](_0x274e29(0x445),''),{'property':_0x3209b8[_0x274e29(0x3d2)](_0x274e29(0x445),''),'message':_0x2b3bc0};});throw $s[_0x396530(0x2b1)]([..._0x1101f3]),new m(..._0x1101f3);}return await _0x46e9f1(_0x3d8fad,_0x48f4d1);}async[a0_0x5ca971(0x4e1)](_0x54802a){const _0x5e3d86=a0_0x5ca971;let {request:_0x32b414,ClassRef:_0x5bf770,schema:_0x4035d4,execute:_0x393ca9}=_0x54802a,_0x3c78af=_0x32b414['body'];if(!_0x3c78af?.[_0x5e3d86(0x3ef)])throw new m(_0x5e3d86(0x40c),_0x5e3d86(0x6f2));let _0x4f67ae=_0x32b414[_0x5e3d86(0x3fe)],_0x21a60d=_0x32b414[_0x5e3d86(0x723)],_0x3ec8b3=new _0x5bf770();Object[_0x5e3d86(0x202)](_0x21a60d,_0x3c78af),Object[_0x5e3d86(0x202)](_0x3ec8b3,_0x21a60d);let _0x607c6c=(0x0,lt['validate'])(_0x3ec8b3,_0x4035d4);if(!_0x607c6c[_0x5e3d86(0x4bc)]){let _0x51c6ed=_0x607c6c[_0x5e3d86(0x18b)]['map'](({property:_0xfcd970,stack:_0xb90361,schema:_0x42219d})=>{const _0x163593=_0x5e3d86;let _0x47a18f;return _0x42219d['description']?_0x47a18f=_0x42219d[_0x163593(0x44d)]:_0x47a18f=_0xb90361['replace'](_0x163593(0x445),''),{'property':_0xfcd970['replace'](_0x163593(0x445),''),'message':_0x47a18f};});throw $s['error']([..._0x51c6ed]),new m(..._0x51c6ed);}return await _0x393ca9(_0x4f67ae,_0x3ec8b3);}},C=class{},Gc=new $(a0_0x5ca971(0x6e1)),ut=class extends W{constructor(..._0x58e53d){const _0x5decfe=a0_0x5ca971;super(),this[_0x5decfe(0x369)]=(0x0,gi[_0x5decfe(0x55e)])(),this[_0x5decfe(0x369)][_0x5decfe(0x513)](this[_0x5decfe(0x30a)](_0x5decfe(0x635)),..._0x58e53d,async(_0x5c456a,_0x1988d5)=>{const _0x2558fe=_0x5decfe;let _0x4b5ce7=await this['dataValidate']({'request':_0x5c456a,'schema':ii,'ClassRef':Xe,'execute':(_0x4e1cd9,_0x25e598)=>k['updatePresence'](_0x4e1cd9,_0x25e598)});return _0x1988d5[_0x2558fe(0x2f7)](0xc9)['json'](_0x4b5ce7);})[_0x5decfe(0x513)](this['routerPath'](_0x5decfe(0x603)),..._0x58e53d,async(_0x28d220,_0xdd024b)=>{const _0x549896=_0x5decfe;let _0x43e747=await this['dataValidate']({'request':_0x28d220,'schema':Ha,'ClassRef':Ze,'execute':(_0x3eac15,_0x6bb373)=>k['whatsappNumber'](_0x3eac15,_0x6bb373)});return _0xdd024b[_0x549896(0x2f7)](0xc9)[_0x549896(0x779)](_0x43e747);})[_0x5decfe(0x513)](this['routerPath'](_0x5decfe(0x6d2)),..._0x58e53d,async(_0x18bb0e,_0x244954)=>{const _0x5f1f88=_0x5decfe;let _0x787913=await this[_0x5f1f88(0x50a)]({'request':_0x18bb0e,'schema':N,'ClassRef':C,'execute':(_0x229cf5,_0x4e85f6)=>k[_0x5f1f88(0x6d2)](_0x229cf5,_0x4e85f6)});return _0x244954[_0x5f1f88(0x2f7)](0xc9)['json'](_0x787913);})[_0x5decfe(0x5c3)](this[_0x5decfe(0x30a)](_0x5decfe(0x5d6)),..._0x58e53d,async(_0x571c5a,_0x6fb36d)=>{const _0x16a4a0=_0x5decfe;let _0x3f816c=await this[_0x16a4a0(0x50a)]({'request':_0x571c5a,'schema':Ka,'ClassRef':st,'execute':(_0x3a591e,_0x41fb31)=>k[_0x16a4a0(0x6f3)](_0x3a591e,_0x41fb31)});return _0x6fb36d[_0x16a4a0(0x2f7)](0xc9)['json'](_0x3f816c);})[_0x5decfe(0x5c3)](this[_0x5decfe(0x30a)](_0x5decfe(0x235)),..._0x58e53d,async(_0x5303ed,_0x130625)=>{const _0x24f6ce=_0x5decfe;let _0x1102b4=await this[_0x24f6ce(0x50a)]({'request':_0x5303ed,'schema':Ya,'ClassRef':at,'execute':(_0x1cd990,_0x51d295)=>k[_0x24f6ce(0x235)](_0x1cd990,_0x51d295)});return _0x130625['status'](0xc9)['json'](_0x1102b4);})[_0x5decfe(0x8a2)](this[_0x5decfe(0x30a)](_0x5decfe(0x78f)),..._0x58e53d,async(_0x33bdd3,_0x1bb9fa)=>{const _0x53f8b6=_0x5decfe;let _0x3395f8=await this['dataValidate']({'request':_0x33bdd3,'schema':Xa,'ClassRef':ot,'execute':(_0x2b11e7,_0x4ab389)=>k[_0x53f8b6(0x612)](_0x2b11e7,_0x4ab389)});return _0x1bb9fa[_0x53f8b6(0x2f7)](0xc9)[_0x53f8b6(0x779)](_0x3395f8);})[_0x5decfe(0x513)](this[_0x5decfe(0x30a)](_0x5decfe(0x672)),..._0x58e53d,async(_0x4fcf17,_0x20fbfc)=>{const _0x38d50b=_0x5decfe;let _0x992484=await this['dataValidate']({'request':_0x4fcf17,'schema':Oe,'ClassRef':Te,'execute':(_0x35c352,_0x9b3fb4)=>k['fetchProfilePicture'](_0x35c352,_0x9b3fb4)});return _0x20fbfc[_0x38d50b(0x2f7)](0xc8)[_0x38d50b(0x779)](_0x992484);})[_0x5decfe(0x513)](this[_0x5decfe(0x30a)](_0x5decfe(0x54c)),..._0x58e53d,async(_0x1bdf55,_0x5244a4)=>{const _0x322690=_0x5decfe;let _0x4525de=await this['dataValidate']({'request':_0x1bdf55,'schema':si,'ClassRef':Te,'execute':(_0x286931,_0x23a619)=>k[_0x322690(0x54c)](_0x286931,_0x23a619)});return _0x5244a4[_0x322690(0x2f7)](0xc8)[_0x322690(0x779)](_0x4525de);})[_0x5decfe(0x513)](this['routerPath'](_0x5decfe(0x86f)),..._0x58e53d,async(_0x2b201a,_0xf384fe)=>{const _0x34a398=_0x5decfe;let _0x55cc5b=await this[_0x34a398(0x50a)]({'request':_0x2b201a,'schema':Za,'ClassRef':nt,'execute':(_0x4a9a09,_0x7c8d9b)=>k[_0x34a398(0x359)](_0x4a9a09,_0x7c8d9b)});return _0xf384fe['status'](0xc8)[_0x34a398(0x779)](_0x55cc5b);})[_0x5decfe(0x513)](this[_0x5decfe(0x30a)](_0x5decfe(0x3be)),..._0x58e53d,async(_0x5a86e6,_0x5dee53)=>{const _0x1c876c=_0x5decfe;let _0x3b2be4=await this['dataValidate']({'request':_0x5a86e6,'schema':null,'ClassRef':Object,'execute':(_0x28a81a,_0xbdad12)=>k[_0x1c876c(0x3be)](_0x28a81a,_0xbdad12)});return _0x5dee53[_0x1c876c(0x2f7)](0xc9)[_0x1c876c(0x779)](_0x3b2be4);})[_0x5decfe(0x513)](this[_0x5decfe(0x30a)](_0x5decfe(0x1c8)),..._0x58e53d,async(_0x5f3235,_0x850ad5)=>{const _0x23ed9c=_0x5decfe;let _0xf76388=await this[_0x23ed9c(0x50a)]({'request':_0x5f3235,'schema':ai,'ClassRef':Qe,'execute':(_0x15007d,_0x5e1470)=>k['fetchMessages'](_0x15007d,_0x5e1470)});return _0x850ad5[_0x23ed9c(0x2f7)](0xc8)[_0x23ed9c(0x779)](_0xf76388);})[_0x5decfe(0x76d)](this[_0x5decfe(0x30a)](_0x5decfe(0x889)),..._0x58e53d,async(_0x2d4e55,_0xecf681)=>{const _0x51dce9=_0x5decfe;let _0x4f0866=await this[_0x51dce9(0x50a)]({'request':_0x2d4e55,'schema':null,'ClassRef':C,'execute':_0x45c719=>k[_0x51dce9(0x3b8)](_0x45c719)});return _0xecf681[_0x51dce9(0x2f7)](0xc8)[_0x51dce9(0x779)](_0x4f0866);})['get'](this['routerPath'](_0x5decfe(0x6f6)),..._0x58e53d,async(_0x4460ad,_0x51e702)=>{const _0x5ee666=_0x5decfe;let _0x92b0fc=await this[_0x5ee666(0x50a)]({'request':_0x4460ad,'schema':null,'ClassRef':C,'execute':_0x1ad401=>k['fetchLabels'](_0x1ad401)});return _0x51e702['status'](0xc8)[_0x5ee666(0x779)](_0x92b0fc);})[_0x5decfe(0x5c3)](this[_0x5decfe(0x30a)](_0x5decfe(0x64d)),..._0x58e53d,async(_0x3f8733,_0xb7f165)=>{const _0x23e4e0=_0x5decfe;let _0x11de0a=await this[_0x23e4e0(0x50a)]({'request':_0x3f8733,'schema':null,'ClassRef':Array,'execute':(_0x5dc149,_0x193fd0)=>k[_0x23e4e0(0x64d)](_0x5dc149,_0x193fd0)});return _0xb7f165['status'](0xc8)[_0x23e4e0(0x779)](_0x11de0a);})[_0x5decfe(0x76d)](this['routerPath'](_0x5decfe(0x734)),..._0x58e53d,async(_0x1be020,_0x190cc2)=>{const _0x22d82b=_0x5decfe;let _0x2726e5=await this[_0x22d82b(0x50a)]({'request':_0x1be020,'schema':null,'ClassRef':C,'execute':_0x5416a4=>k[_0x22d82b(0x734)](_0x5416a4)});return _0x190cc2[_0x22d82b(0x2f7)](0xc8)[_0x22d82b(0x779)](_0x2726e5);})[_0x5decfe(0x5c3)](this['routerPath'](_0x5decfe(0x40a)),..._0x58e53d,async(_0x4db03b,_0x537eff)=>{const _0x1c0d98=_0x5decfe;let _0x22dacc=await this['dataValidate']({'request':_0x4db03b,'schema':Qa,'ClassRef':it,'execute':(_0x567357,_0x530f90)=>k['updatePrivacySettings'](_0x567357,_0x530f90)});return _0x537eff[_0x1c0d98(0x2f7)](0xc9)['json'](_0x22dacc);})[_0x5decfe(0x513)](this[_0x5decfe(0x30a)](_0x5decfe(0x65c)),..._0x58e53d,async(_0x47c7ad,_0x592881)=>{const _0x15a1ad=_0x5decfe;let _0x5e3965=await this[_0x15a1ad(0x50a)]({'request':_0x47c7ad,'schema':Oe,'ClassRef':Ee,'execute':(_0x2ad4f9,_0x2b3a76)=>k['fetchBusinessProfile'](_0x2ad4f9,_0x2b3a76)});return _0x592881[_0x15a1ad(0x2f7)](0xc8)['json'](_0x5e3965);})[_0x5decfe(0x513)](this[_0x5decfe(0x30a)](_0x5decfe(0x71b)),..._0x58e53d,async(_0x1f1a22,_0x250e5c)=>{const _0x107b24=_0x5decfe;let _0x3c19fd=await this[_0x107b24(0x50a)]({'request':_0x1f1a22,'schema':ei,'ClassRef':et,'execute':(_0x5ad669,_0x2b5057)=>k['updateProfileName'](_0x5ad669,_0x2b5057)});return _0x250e5c[_0x107b24(0x2f7)](0xc8)[_0x107b24(0x779)](_0x3c19fd);})[_0x5decfe(0x513)](this[_0x5decfe(0x30a)]('updateProfileStatus'),..._0x58e53d,async(_0x11864b,_0x345e7b)=>{const _0x45b134=_0x5decfe;let _0x5cf38a=await this[_0x45b134(0x50a)]({'request':_0x11864b,'schema':ti,'ClassRef':tt,'execute':(_0xd92ace,_0x5d16d1)=>k['updateProfileStatus'](_0xd92ace,_0x5d16d1)});return _0x345e7b['status'](0xc8)[_0x45b134(0x779)](_0x5cf38a);})['put'](this[_0x5decfe(0x30a)](_0x5decfe(0x3f6)),..._0x58e53d,async(_0x3d9dca,_0x33b58f)=>{let _0x3ade65=await this['dataValidate']({'request':_0x3d9dca,'schema':Oe,'ClassRef':Ee,'execute':(_0x4f2f9e,_0x4d8ac4)=>k['updateProfilePicture'](_0x4f2f9e,_0x4d8ac4)});return _0x33b58f['status'](0xc8)['json'](_0x3ade65);})[_0x5decfe(0x8a2)](this['routerPath']('removeProfilePicture'),..._0x58e53d,async(_0x897ea6,_0x38037f)=>{const _0x1724e0=_0x5decfe;let _0x49e7a2=await this[_0x1724e0(0x50a)]({'request':_0x897ea6,'schema':Oe,'ClassRef':Ee,'execute':(_0x55cedc,_0x4c00fd)=>k[_0x1724e0(0x849)](_0x55cedc,_0x4c00fd)});return _0x38037f[_0x1724e0(0x2f7)](0xc8)[_0x1724e0(0x779)](_0x49e7a2);});}},mi=require(a0_0x5ca971(0x1e7)),dt=class{},pt=class{},ht=class{},gt=class{},mt=class{},ft=class{},ie=class{},De=class{},wt=class extends ie{},yt=class extends ie{},bt=class extends W{constructor(..._0x6b16f5){const _0x1bb978=a0_0x5ca971;super(),this[_0x1bb978(0x369)]=(0x0,mi[_0x1bb978(0x55e)])(),this[_0x1bb978(0x369)]['post'](this[_0x1bb978(0x30a)]('create'),..._0x6b16f5,async(_0xd3cc04,_0x483304)=>{const _0x2ea701=_0x1bb978;let _0x423c0a=await this[_0x2ea701(0x50a)]({'request':_0xd3cc04,'schema':oi,'ClassRef':dt,'execute':(_0x415dbe,_0x897cbf)=>B[_0x2ea701(0x476)](_0x415dbe,_0x897cbf)});_0x483304[_0x2ea701(0x2f7)](0xc9)[_0x2ea701(0x779)](_0x423c0a);})['put'](this[_0x1bb978(0x30a)](_0x1bb978(0x856)),..._0x6b16f5,async(_0x4c92f1,_0x83b420)=>{const _0x1c241f=_0x1bb978;let _0x155da0=await this[_0x1c241f(0x6a7)]({'request':_0x4c92f1,'schema':ci,'ClassRef':pt,'execute':(_0x33eb83,_0x4b1861)=>B[_0x1c241f(0x856)](_0x33eb83,_0x4b1861)});_0x83b420[_0x1c241f(0x2f7)](0xc9)[_0x1c241f(0x779)](_0x155da0);})[_0x1bb978(0x5c3)](this[_0x1bb978(0x30a)](_0x1bb978(0x181)),..._0x6b16f5,async(_0x531ae3,_0x404015)=>{const _0x109149=_0x1bb978;let _0x45c837=await this['groupValidate']({'request':_0x531ae3,'schema':li,'ClassRef':ht,'execute':(_0xe0c3fa,_0x2bd80a)=>B[_0x109149(0x181)](_0xe0c3fa,_0x2bd80a)});_0x404015[_0x109149(0x2f7)](0xc9)['json'](_0x45c837);})[_0x1bb978(0x5c3)](this[_0x1bb978(0x30a)]('groupName'),..._0x6b16f5,async(_0x5670da,_0x1db354)=>{const _0x15b833=_0x1bb978;let _0xf1ec4d=await this[_0x15b833(0x6a7)]({'request':_0x5670da,'schema':ui,'ClassRef':gt,'execute':(_0x4f1e55,_0x242a37)=>B[_0x15b833(0x80a)](_0x4f1e55,_0x242a37)});_0x1db354[_0x15b833(0x2f7)](0xc9)['json'](_0xf1ec4d);})[_0x1bb978(0x5c3)](this[_0x1bb978(0x30a)](_0x1bb978(0x64b)),..._0x6b16f5,async(_0x3d2d82,_0x5510e3)=>{const _0x33bcc6=_0x1bb978;let _0x2d6e66=await this[_0x33bcc6(0x6a7)]({'request':_0x3d2d82,'schema':pi,'ClassRef':ft,'execute':(_0x3d5d9a,_0x53f0eb)=>B[_0x33bcc6(0x64b)](_0x3d5d9a,_0x53f0eb)});_0x5510e3[_0x33bcc6(0x2f7)](0xc9)['json'](_0x2d6e66);})[_0x1bb978(0x5c3)](this[_0x1bb978(0x30a)]('groupSetting'),..._0x6b16f5,async(_0x55b288,_0x205c63)=>{const _0x36b2ca=_0x1bb978;let _0x4ad5f4=await this[_0x36b2ca(0x6a7)]({'request':_0x55b288,'schema':di,'ClassRef':mt,'execute':(_0xfa0c9c,_0x57069c)=>B['groupSetting'](_0xfa0c9c,_0x57069c)});_0x205c63[_0x36b2ca(0x2f7)](0xc9)[_0x36b2ca(0x779)](_0x4ad5f4);})['put'](this[_0x1bb978(0x30a)]('toggleEphemeral'),..._0x6b16f5,async(_0x502541,_0x517a39)=>{const _0x30032a=_0x1bb978;let _0x46318b=await this[_0x30032a(0x6a7)]({'request':_0x502541,'schema':ni,'ClassRef':yt,'execute':(_0x3ce052,_0x52388d)=>B['toggleEphemeral'](_0x3ce052,_0x52388d)});_0x517a39['status'](0xc9)[_0x30032a(0x779)](_0x46318b);})[_0x1bb978(0x76d)](this['routerPath'](_0x1bb978(0x5bd)),..._0x6b16f5,async(_0x4aca56,_0x17eafa)=>{const _0x5e526c=_0x1bb978;let _0x22afc9=await this[_0x5e526c(0x6a7)]({'request':_0x4aca56,'schema':xe,'ClassRef':ie,'execute':(_0xa48cc7,_0x47aaed)=>B[_0x5e526c(0x623)](_0xa48cc7,_0x47aaed)});_0x17eafa[_0x5e526c(0x2f7)](0xc8)[_0x5e526c(0x779)](_0x22afc9);})[_0x1bb978(0x76d)](this[_0x1bb978(0x30a)](_0x1bb978(0x55b)),..._0x6b16f5,async(_0x2e564f,_0x40cfee)=>{const _0x3a0f59=_0x1bb978;let _0x212ee7=await this['dataValidate']({'request':_0x2e564f,'schema':N,'ClassRef':C,'execute':_0x48eca4=>B[_0x3a0f59(0x55b)](_0x48eca4)});_0x40cfee['status'](0xc8)[_0x3a0f59(0x779)](_0x212ee7);})[_0x1bb978(0x76d)](this[_0x1bb978(0x30a)](_0x1bb978(0x540)),..._0x6b16f5,async(_0x2b93a7,_0x33025e)=>{const _0x3e024e=_0x1bb978;let _0x2fd858=await this['groupValidate']({'request':_0x2b93a7,'schema':xe,'ClassRef':ie,'execute':(_0x37633c,_0x171bf0)=>B[_0x3e024e(0x879)](_0x37633c,_0x171bf0)});_0x33025e[_0x3e024e(0x2f7)](0xc8)[_0x3e024e(0x779)](_0x2fd858);})['get'](this[_0x1bb978(0x30a)](_0x1bb978(0x3ef)),..._0x6b16f5,async(_0x38f7f3,_0x28b024)=>{const _0x25d747=_0x1bb978;let _0x5c8e5a=await this[_0x25d747(0x6a7)]({'request':_0x38f7f3,'schema':xe,'ClassRef':ie,'execute':(_0x1b8f8b,_0x47ce48)=>B[_0x25d747(0x3ef)](_0x1b8f8b,_0x47ce48)});_0x28b024[_0x25d747(0x2f7)](0xc8)[_0x25d747(0x779)](_0x5c8e5a);})[_0x1bb978(0x513)](this['routerPath'](_0x1bb978(0x3a4)),..._0x6b16f5,async(_0x432c67,_0x4f7d80)=>{const _0x440702=_0x1bb978;let _0x87f4f0=await this['joinGroupValidate']({'request':_0x432c67,'schema':Ns,'ClassRef':De,'execute':(_0x1d57a9,_0x1e8b8c)=>B[_0x440702(0x75a)](_0x1d57a9,_0x1e8b8c)});_0x4f7d80[_0x440702(0x2f7)](0xc9)['json'](_0x87f4f0);})[_0x1bb978(0x5c3)](this[_0x1bb978(0x30a)]('joinGroup'),..._0x6b16f5,async(_0x2e7f2e,_0x5affa0)=>{const _0x2053f3=_0x1bb978;let _0x379116=await this[_0x2053f3(0x4e1)]({'request':_0x2e7f2e,'schema':Ns,'ClassRef':De,'execute':(_0x2c3a5d,_0x53a620)=>B[_0x2053f3(0x362)](_0x2c3a5d,_0x53a620)});_0x5affa0['status'](0xc9)[_0x2053f3(0x779)](_0x379116);})[_0x1bb978(0x5c3)](this[_0x1bb978(0x30a)](_0x1bb978(0x402)),..._0x6b16f5,async(_0x38d89b,_0xf7dc21)=>{const _0x13f070=_0x1bb978;let _0x1983d7=await this[_0x13f070(0x6a7)]({'request':_0x38d89b,'schema':xe,'ClassRef':ie,'execute':(_0x1a4345,_0x56268d)=>B[_0x13f070(0x402)](_0x1a4345,_0x56268d)});_0xf7dc21[_0x13f070(0x2f7)](0xc9)[_0x13f070(0x779)](_0x1983d7);})[_0x1bb978(0x5c3)](this['routerPath'](_0x1bb978(0x254)),..._0x6b16f5,async(_0x8640b7,_0x248d25)=>{const _0x29ce73=_0x1bb978;let _0x1027eb=await this[_0x29ce73(0x6a7)]({'request':_0x8640b7,'schema':ri,'ClassRef':wt,'execute':(_0x31f15c,_0x3245d9)=>B[_0x29ce73(0x7aa)](_0x31f15c,_0x3245d9)});_0x248d25[_0x29ce73(0x2f7)](0xc9)['json'](_0x1027eb);})[_0x1bb978(0x8a2)](this[_0x1bb978(0x30a)]('leaveGroup'),..._0x6b16f5,async(_0x373880,_0x863d46)=>{const _0x262f0a=_0x1bb978;let _0x3d9515=await this[_0x262f0a(0x6a7)]({'request':_0x373880,'schema':{},'ClassRef':ie,'execute':(_0x48ca5d,_0x4ad567)=>B[_0x262f0a(0x3db)](_0x48ca5d,_0x4ad567)});_0x863d46['status'](0xc8)[_0x262f0a(0x779)](_0x3d9515);});}},fi=require(a0_0x5ca971(0x1e7)),St=class extends W{constructor(_0x2303bf,..._0x9c8932){const _0x3b2430=a0_0x5ca971;super(),this[_0x3b2430(0x601)]=_0x2303bf,this[_0x3b2430(0x369)]=(0x0,fi[_0x3b2430(0x55e)])();let _0x4e6f47=_0x2303bf[_0x3b2430(0x76d)](_0x3b2430(0x26a));this[_0x3b2430(0x369)]['post'](_0x3b2430(0x577),..._0x9c8932,async(_0x5ea47f,_0x33be88)=>{const _0x520545=_0x3b2430;let {instanceName:_0x494b98,apikey:_0x84bc5f,number:_0x1713cf}=_0x5ea47f[_0x520545(0x723)],_0x260717=await he[_0x520545(0x660)]({'instanceName':_0x494b98,'apikey':_0x84bc5f,'number':_0x1713cf});return _0x33be88['status'](0xc9)[_0x520545(0x779)](_0x260717);})[_0x3b2430(0x5c3)](this[_0x3b2430(0x30a)](_0x3b2430(0x707)),..._0x9c8932,async(_0x3c2863,_0x5b1134)=>{const _0xd2f45c=_0x3b2430;let _0xd44335=await this[_0xd2f45c(0x50a)]({'request':_0x3c2863,'schema':N,'ClassRef':C,'execute':_0x77f600=>he[_0xd2f45c(0x7fb)](_0x77f600)});return _0x5b1134[_0xd2f45c(0x2f7)](0xc8)['json'](_0xd44335);})[_0x3b2430(0x76d)](this[_0x3b2430(0x30a)](_0x3b2430(0x416)),..._0x9c8932,async(_0x2f9271,_0x5933f8)=>{const _0x1bdac4=_0x3b2430;let _0x2ed0c1=await this[_0x1bdac4(0x50a)]({'request':_0x2f9271,'schema':N,'ClassRef':C,'execute':_0xb978f0=>he[_0x1bdac4(0x80f)](_0xb978f0)});return _0x5933f8[_0x1bdac4(0x2f7)](0xc8)[_0x1bdac4(0x779)](_0x2ed0c1);})[_0x3b2430(0x76d)](this['routerPath'](_0x3b2430(0x726)),..._0x9c8932,async(_0xf62c8,_0x2d21f1)=>{const _0x2046bc=_0x3b2430;let _0x4a724d=await this[_0x2046bc(0x50a)]({'request':_0xf62c8,'schema':N,'ClassRef':C,'execute':_0x492719=>he['connectionState'](_0x492719)});return _0x2d21f1['status'](0xc8)[_0x2046bc(0x779)](_0x4a724d);})[_0x3b2430(0x76d)](this['routerPath'](_0x3b2430(0x545),!0x1),..._0x9c8932,async(_0x49a9e0,_0x47eaa1)=>{const _0x56073f=_0x3b2430;let _0x5d632e=await this[_0x56073f(0x50a)]({'request':_0x49a9e0,'schema':null,'ClassRef':C,'execute':_0x32f958=>he[_0x56073f(0x545)](_0x32f958)});return _0x47eaa1['status'](0xc8)[_0x56073f(0x779)](_0x5d632e);})[_0x3b2430(0x8a2)](this[_0x3b2430(0x30a)](_0x3b2430(0x569)),..._0x9c8932,async(_0x855fe3,_0x426c93)=>{const _0x54881b=_0x3b2430;let _0x963889=await this[_0x54881b(0x50a)]({'request':_0x855fe3,'schema':N,'ClassRef':C,'execute':_0x5d6603=>he[_0x54881b(0x569)](_0x5d6603)});return _0x426c93['status'](0xc8)[_0x54881b(0x779)](_0x963889);})[_0x3b2430(0x8a2)](this['routerPath']('delete'),..._0x9c8932,async(_0x2dbc5b,_0x4c5cb9)=>{const _0x1bd7b5=_0x3b2430;let _0x3a5f0e=await this[_0x1bd7b5(0x50a)]({'request':_0x2dbc5b,'schema':N,'ClassRef':C,'execute':_0x18b5c1=>he['deleteInstance'](_0x18b5c1)});return _0x4c5cb9[_0x1bd7b5(0x2f7)](0xc8)[_0x1bd7b5(0x779)](_0x3a5f0e);});}},wi=require(a0_0x5ca971(0x1e7)),Rs=class{},Q=class extends Rs{},Mt=class extends Q{},Ct=class extends Q{},Et=class extends Q{},vt=class extends Q{},Pe=class extends Q{},Nt=class extends Q{},$t=class extends Q{},Rt=class extends Q{},It=class extends Q{},At=class extends Q{},Tt=class{},_t=class extends W{constructor(..._0x4a8f73){const _0x27939d=a0_0x5ca971;super(),this[_0x27939d(0x369)]=(0x0,wi['Router'])(),this[_0x27939d(0x369)][_0x27939d(0x513)](this[_0x27939d(0x30a)](_0x27939d(0x304)),..._0x4a8f73,async(_0x574dab,_0xff8de6)=>{const _0x136416=_0x27939d;let _0x25c544=await this[_0x136416(0x50a)]({'request':_0x574dab,'schema':Pa,'ClassRef':Mt,'execute':(_0x5b98fd,_0x4f3723)=>H[_0x136416(0x304)](_0x5b98fd,_0x4f3723)});return _0xff8de6[_0x136416(0x2f7)](0xc9)[_0x136416(0x779)](_0x25c544);})['post'](this[_0x27939d(0x30a)](_0x27939d(0x2d0)),..._0x4a8f73,async(_0x3646ad,_0x29d5ca)=>{const _0x50b7cd=_0x27939d;let _0x43f263=await this['dataValidate']({'request':_0x3646ad,'schema':Ua,'ClassRef':Pe,'execute':(_0xfb2d69,_0x109a8c)=>H[_0x50b7cd(0x2d0)](_0xfb2d69,_0x109a8c)});return _0x29d5ca[_0x50b7cd(0x2f7)](0xc9)[_0x50b7cd(0x779)](_0x43f263);})['post'](this[_0x27939d(0x30a)]('sendMenu'),..._0x4a8f73,async(_0x340696,_0x18b9cf)=>{const _0x198a54=_0x27939d;let _0x41075b=await this['dataValidate']({'request':_0x340696,'schema':qa,'ClassRef':vt,'execute':(_0x5904a6,_0x5fbb6e)=>H[_0x198a54(0x209)](_0x5904a6,_0x5fbb6e)});return _0x18b9cf[_0x198a54(0x2f7)](0xc9)[_0x198a54(0x779)](_0x41075b);})[_0x27939d(0x513)](this[_0x27939d(0x30a)](_0x27939d(0x7de)),..._0x4a8f73,async(_0x20bfbe,_0x452313)=>{const _0x56e6d7=_0x27939d;let _0x539776=await this['dataValidate']({'request':_0x20bfbe,'schema':ja,'ClassRef':Pe,'execute':(_0x3b94a4,_0x3cb09d)=>H[_0x56e6d7(0x7de)](_0x3b94a4,_0x3cb09d)});return _0x452313[_0x56e6d7(0x2f7)](0xc9)[_0x56e6d7(0x779)](_0x539776);})[_0x27939d(0x513)](this['routerPath'](_0x27939d(0x773)),..._0x4a8f73,async(_0x57044a,_0x5d5897)=>{const _0x5cedd2=_0x27939d;let _0x1c10ce=await this['dataValidate']({'request':_0x57044a,'schema':Va,'ClassRef':$t,'execute':(_0x474e3e,_0x168e19)=>H['sendButtons'](_0x474e3e,_0x168e19)});return _0x5d5897[_0x5cedd2(0x2f7)](0xc9)[_0x5cedd2(0x779)](_0x1c10ce);})[_0x27939d(0x513)](this[_0x27939d(0x30a)]('sendLocation'),..._0x4a8f73,async(_0x5c8414,_0x186e83)=>{const _0x35444a=_0x27939d;let _0x7ca624=await this[_0x35444a(0x50a)]({'request':_0x5c8414,'schema':Ga,'ClassRef':Rt,'execute':(_0x49f226,_0x3eee34)=>H[_0x35444a(0x5ab)](_0x49f226,_0x3eee34)});return _0x186e83[_0x35444a(0x2f7)](0xc9)[_0x35444a(0x779)](_0x7ca624);})[_0x27939d(0x513)](this[_0x27939d(0x30a)](_0x27939d(0x338)),..._0x4a8f73,async(_0x206d40,_0x262614)=>{const _0x548fce=_0x27939d;let _0xd0d584=await this['dataValidate']({'request':_0x206d40,'schema':Ba,'ClassRef':It,'execute':(_0xe9e089,_0x1ee192)=>H[_0x548fce(0x338)](_0xe9e089,_0x1ee192)});return _0x262614[_0x548fce(0x2f7)](0xc9)[_0x548fce(0x779)](_0xd0d584);})[_0x27939d(0x513)](this['routerPath'](_0x27939d(0x44f)),..._0x4a8f73,async(_0x1b7849,_0x406ea9)=>{const _0x2673f6=_0x27939d;let _0x27cd24=await this[_0x2673f6(0x50a)]({'request':_0x1b7849,'schema':Wa,'ClassRef':At,'execute':(_0x551fe9,_0x1132c0)=>H['sendContact'](_0x551fe9,_0x1132c0)});return _0x406ea9['status'](0xc9)[_0x2673f6(0x779)](_0x27cd24);})['post'](this['routerPath']('sendReaction'),..._0x4a8f73,async(_0x4be26e,_0x1ef602)=>{const _0x3edfb7=_0x27939d;let _0x9aa7f2=await this[_0x3edfb7(0x50a)]({'request':_0x4be26e,'schema':za,'ClassRef':Tt,'execute':(_0x5e1629,_0x1979c5)=>H[_0x3edfb7(0x6fd)](_0x5e1629,_0x1979c5)});return _0x1ef602[_0x3edfb7(0x2f7)](0xc9)[_0x3edfb7(0x779)](_0x9aa7f2);})[_0x27939d(0x513)](this[_0x27939d(0x30a)]('sendPoll'),..._0x4a8f73,async(_0x21c782,_0xc0bacb)=>{const _0xa33164=_0x27939d;let _0x5a3703=await this['dataValidate']({'request':_0x21c782,'schema':Ja,'ClassRef':Et,'execute':(_0x363545,_0x2f4f13)=>H[_0xa33164(0x7a3)](_0x363545,_0x2f4f13)});return _0xc0bacb[_0xa33164(0x2f7)](0xc9)[_0xa33164(0x779)](_0x5a3703);})[_0x27939d(0x513)](this[_0x27939d(0x30a)](_0x27939d(0x6b7)),..._0x4a8f73,async(_0xb84b7a,_0x5f062c)=>{const _0x1a5c46=_0x27939d;let _0x585fab=await this[_0x1a5c46(0x50a)]({'request':_0xb84b7a,'schema':Fa,'ClassRef':Ct,'execute':(_0x1f75c2,_0x7f7e1)=>H[_0x1a5c46(0x6b7)](_0x1f75c2,_0x7f7e1)});return _0x5f062c['status'](0xc9)['json'](_0x585fab);})[_0x27939d(0x513)](this['routerPath'](_0x27939d(0x551)),..._0x4a8f73,async(_0x38d252,_0x4674b0)=>{const _0x22c41e=_0x27939d;let _0x50f3d2=await this['dataValidate']({'request':_0x38d252,'schema':La,'ClassRef':Nt,'execute':(_0x3e38f3,_0x3384e4)=>H['sendSticker'](_0x3e38f3,_0x3384e4)});return _0x4674b0[_0x22c41e(0x2f7)](0xc9)[_0x22c41e(0x779)](_0x50f3d2);});}},yi=require(a0_0x5ca971(0x1e7)),Ot=class{},xt=class extends W{constructor(..._0x536f6e){const _0x12ced8=a0_0x5ca971;super(),this[_0x12ced8(0x369)]=(0x0,yi['Router'])(),this[_0x12ced8(0x369)]['post'](this['routerPath'](_0x12ced8(0x7bb)),..._0x536f6e,async(_0x1a029b,_0x2ddbf1)=>{const _0x8a4bac=_0x12ced8;let _0x5997e1=await this[_0x8a4bac(0x50a)]({'request':_0x1a029b,'schema':hi,'ClassRef':Ot,'execute':(_0xc98397,_0xc66e35)=>Is[_0x8a4bac(0x222)](_0xc98397,_0xc66e35)});_0x2ddbf1[_0x8a4bac(0x2f7)](0xc9)[_0x8a4bac(0x779)](_0x5997e1);})[_0x12ced8(0x76d)](this[_0x12ced8(0x30a)]('find'),..._0x536f6e,async(_0x3c999f,_0x50a891)=>{const _0x344de7=_0x12ced8;let _0x3d1d28=await this['dataValidate']({'request':_0x3c999f,'schema':N,'ClassRef':C,'execute':_0x1c2df6=>Is[_0x344de7(0x64f)](_0x1c2df6)});_0x50a891['status'](0xc8)[_0x344de7(0x779)](_0x3d1d28);});}},bi=require('express'),y=new $('FlowRouter'),Dt=class extends W{constructor(..._0x42d17e){const _0x1590d1=a0_0x5ca971;super(),this[_0x1590d1(0x369)]=(0x0,bi[_0x1590d1(0x55e)])(),this[_0x1590d1(0x369)]['post'](this[_0x1590d1(0x30a)]('scheduleMessage'),..._0x42d17e,async(_0x2392b2,_0x273d64)=>{const _0xc57805=_0x1590d1;let _0x4f34f5=_0x2392b2[_0xc57805(0x723)];y['verbose'](_0xc57805(0x69e)),y[_0xc57805(0x608)](_0xc57805(0x6ea)),y[_0xc57805(0x608)](_0x2392b2[_0xc57805(0x723)]);let _0x5957e0=await this['dataValidate']({'request':_0x2392b2,'schema':N,'ClassRef':C,'execute':_0x32cd64=>T[_0xc57805(0x799)](_0x32cd64,_0x4f34f5)});_0x273d64[_0xc57805(0x2f7)](0xc8)[_0xc57805(0x779)](_0x5957e0);})['get'](this['routerPath'](_0x1590d1(0x43e)),..._0x42d17e,async(_0x2b97cd,_0x5eb954)=>{const _0x18ed63=_0x1590d1;let _0x42a4c9=await this['dataValidate']({'request':_0x2b97cd,'schema':N,'ClassRef':C,'execute':_0x38237b=>T[_0x18ed63(0x550)](_0x38237b)});_0x5eb954[_0x18ed63(0x2f7)](0xc8)['json'](_0x42a4c9);})[_0x1590d1(0x8a2)](this[_0x1590d1(0x30a)]('deleteDoneMessages'),..._0x42d17e,async(_0x5a6340,_0xadd3db)=>{const _0xbf5f2c=_0x1590d1;y[_0xbf5f2c(0x608)]('request\x20received\x20in\x20deleteDoneMessages');let _0x2cc839=await this[_0xbf5f2c(0x50a)]({'request':_0x5a6340,'schema':N,'ClassRef':C,'execute':_0x2d69f9=>T[_0xbf5f2c(0x564)](_0x2d69f9)});_0xadd3db['status'](0xc8)[_0xbf5f2c(0x779)](_0x2cc839);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)]('startFlow'),..._0x42d17e,async(_0x3a3272,_0x9b49b8)=>{const _0x5bfaab=_0x1590d1;let _0x5cfe76=_0x3a3272['body'];y[_0x5bfaab(0x608)](_0x5bfaab(0x5f2)),y[_0x5bfaab(0x608)](_0x5bfaab(0x6ea)),y[_0x5bfaab(0x608)](_0x3a3272[_0x5bfaab(0x723)]);let _0x4013c5=await this['dataValidate']({'request':_0x3a3272,'schema':N,'ClassRef':C,'execute':_0x2bddca=>T['startFlow'](_0x2bddca,_0x5cfe76)});_0x9b49b8[_0x5bfaab(0x2f7)](0xc8)[_0x5bfaab(0x779)](_0x4013c5);})[_0x1590d1(0x76d)](this[_0x1590d1(0x30a)](_0x1590d1(0x2b9)),..._0x42d17e,async(_0x308078,_0x555994)=>{const _0x25ca1a=_0x1590d1;y[_0x25ca1a(0x608)](_0x25ca1a(0x454));let _0x440f9b=await this[_0x25ca1a(0x50a)]({'request':_0x308078,'schema':N,'ClassRef':C,'execute':_0x3f449=>T[_0x25ca1a(0x2b9)](_0x3f449)});_0x555994[_0x25ca1a(0x2f7)](0xc8)[_0x25ca1a(0x779)](_0x440f9b);})[_0x1590d1(0x76d)](this[_0x1590d1(0x30a)](_0x1590d1(0x843)),..._0x42d17e,async(_0xf783c6,_0xf6e207)=>{const _0x3bda16=_0x1590d1;y[_0x3bda16(0x608)](_0x3bda16(0x3dc));let _0x203187=await this[_0x3bda16(0x50a)]({'request':_0xf783c6,'schema':N,'ClassRef':C,'execute':_0x10c9f9=>T[_0x3bda16(0x2b9)](_0x10c9f9)});_0xf6e207[_0x3bda16(0x2f7)](0xc8)[_0x3bda16(0x779)](_0x203187);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)]('updateAgent'),..._0x42d17e,async(_0x54b36b,_0x4453b5)=>{const _0x57dd7f=_0x1590d1;let _0x498bbe=_0x54b36b[_0x57dd7f(0x723)];y[_0x57dd7f(0x608)](_0x57dd7f(0x4b4)),y[_0x57dd7f(0x608)](_0x57dd7f(0x6ea)),y['verbose'](_0x54b36b['body']);let _0x4d909b=await this[_0x57dd7f(0x50a)]({'request':_0x54b36b,'schema':N,'ClassRef':C,'execute':_0x2d6a32=>T[_0x57dd7f(0x263)](_0x2d6a32,_0x498bbe)});_0x4453b5[_0x57dd7f(0x2f7)](0xc8)[_0x57dd7f(0x779)](_0x4d909b);})['post'](this[_0x1590d1(0x30a)](_0x1590d1(0x4c8)),..._0x42d17e,async(_0x3c2681,_0x567fd9)=>{const _0x3bbcad=_0x1590d1;let _0x5de97d=_0x3c2681['body'];y[_0x3bbcad(0x608)](_0x3bbcad(0x3da)),y['verbose'](_0x3bbcad(0x6ea)),y[_0x3bbcad(0x608)](_0x3c2681[_0x3bbcad(0x723)]);let _0x2a6a4c=await this[_0x3bbcad(0x50a)]({'request':_0x3c2681,'schema':N,'ClassRef':C,'execute':_0x589b6b=>T['updateCustomFields'](_0x589b6b,_0x5de97d)});_0x567fd9[_0x3bbcad(0x2f7)](0xc8)[_0x3bbcad(0x779)](_0x2a6a4c);})['post'](this['routerPath'](_0x1590d1(0x628)),..._0x42d17e,async(_0x11fa53,_0x49af56)=>{const _0x5f71d2=_0x1590d1;let _0x1070f1=_0x11fa53[_0x5f71d2(0x723)];y[_0x5f71d2(0x608)](_0x5f71d2(0x56f)),y[_0x5f71d2(0x608)]('request\x20body:\x20'),y['verbose'](_0x11fa53[_0x5f71d2(0x723)]);let _0x10a449=await this[_0x5f71d2(0x50a)]({'request':_0x11fa53,'schema':N,'ClassRef':C,'execute':_0x1d78dc=>T[_0x5f71d2(0x628)](_0x1d78dc,_0x1070f1)});_0x49af56[_0x5f71d2(0x2f7)](0xc8)[_0x5f71d2(0x779)](_0x10a449);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)](_0x1590d1(0x6c0)),..._0x42d17e,async(_0x388d79,_0x36f608)=>{const _0x7299cb=_0x1590d1;let _0x1b66ef=_0x388d79[_0x7299cb(0x723)];y[_0x7299cb(0x608)](_0x7299cb(0x294)),y[_0x7299cb(0x608)](_0x7299cb(0x6ea)),y[_0x7299cb(0x608)](_0x388d79[_0x7299cb(0x723)]);let _0x2cfebf=await this[_0x7299cb(0x50a)]({'request':_0x388d79,'schema':N,'ClassRef':C,'execute':_0x2c2a4a=>T[_0x7299cb(0x6c0)](_0x2c2a4a,_0x1b66ef)});_0x36f608[_0x7299cb(0x2f7)](0xc8)[_0x7299cb(0x779)](_0x2cfebf);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)]('getConversation'),..._0x42d17e,async(_0x5b55e9,_0x1673bb)=>{const _0x4a0f6a=_0x1590d1;let _0x57fe8e=_0x5b55e9['body'];y['verbose'](_0x4a0f6a(0x7c3)),y['verbose'](_0x4a0f6a(0x6ea)),y['verbose'](_0x5b55e9[_0x4a0f6a(0x723)]);let _0x17cd4d=await this['dataValidate']({'request':_0x5b55e9,'schema':N,'ClassRef':C,'execute':_0x2286f3=>T['getConversation'](_0x2286f3,_0x57fe8e)});_0x1673bb['status'](0xc8)[_0x4a0f6a(0x779)](_0x17cd4d);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)](_0x1590d1(0x1d5)),..._0x42d17e,async(_0x4bff94,_0x1550c3)=>{const _0x5c719e=_0x1590d1;let _0x263bf8=_0x4bff94[_0x5c719e(0x723)];y[_0x5c719e(0x608)](_0x5c719e(0x641)),y[_0x5c719e(0x608)](_0x5c719e(0x6ea)),y[_0x5c719e(0x608)](_0x4bff94['body']);let _0x4522d6=await this[_0x5c719e(0x50a)]({'request':_0x4bff94,'schema':N,'ClassRef':C,'execute':_0xf142e5=>T[_0x5c719e(0x1d5)](_0xf142e5,_0x263bf8)});_0x1550c3[_0x5c719e(0x2f7)](0xc8)['json'](_0x4522d6);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)](_0x1590d1(0x236)),..._0x42d17e,async(_0xa850,_0x106fd6)=>{const _0x25102e=_0x1590d1;let _0x1a7d38=_0xa850['body'];y['verbose'](_0x25102e(0x1c1)),y[_0x25102e(0x608)]('request\x20body:\x20'),y[_0x25102e(0x608)](_0xa850[_0x25102e(0x723)]);let _0x867c5=await this[_0x25102e(0x50a)]({'request':_0xa850,'schema':N,'ClassRef':C,'execute':_0x37dd5f=>T[_0x25102e(0x236)](_0x37dd5f,_0x1a7d38)});_0x106fd6['status'](0xc8)[_0x25102e(0x779)](_0x867c5);})[_0x1590d1(0x8a2)](this[_0x1590d1(0x30a)]('deleteConversation'),..._0x42d17e,async(_0x16e0e1,_0x5622b3)=>{const _0x49811f=_0x1590d1;let _0x241f2f=_0x16e0e1['body'];y[_0x49811f(0x608)](_0x49811f(0x15d)),y['verbose']('request\x20body:\x20'),y[_0x49811f(0x608)](_0x16e0e1[_0x49811f(0x723)]);let _0x29f0b0=await this[_0x49811f(0x50a)]({'request':_0x16e0e1,'schema':N,'ClassRef':C,'execute':_0x3c5771=>T[_0x49811f(0x56e)](_0x3c5771,_0x241f2f)});_0x5622b3[_0x49811f(0x2f7)](0xc8)[_0x49811f(0x779)](_0x29f0b0);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)](_0x1590d1(0x1ab)),..._0x42d17e,async(_0x299e65,_0x4bb4c1)=>{const _0x5dd676=_0x1590d1;let _0xc56839=_0x299e65[_0x5dd676(0x723)],_0x4138e0=_0x299e65[_0x5dd676(0x1bb)][_0x5dd676(0x5d5)];y[_0x5dd676(0x608)](_0x5dd676(0x782)),y[_0x5dd676(0x608)](_0x5dd676(0x6ea)),y['verbose'](_0x299e65['body']);let _0x1a34fa=await this[_0x5dd676(0x50a)]({'request':_0x299e65,'schema':N,'ClassRef':C,'execute':_0x467629=>T['createFlow'](_0x467629,_0xc56839,_0x4138e0)});_0x4bb4c1[_0x5dd676(0x2f7)](0xc8)[_0x5dd676(0x779)](_0x1a34fa);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)](_0x1590d1(0x238)),..._0x42d17e,async(_0x93a7bb,_0x469ff6)=>{const _0x40a1d2=_0x1590d1;let _0x5e8a2e=_0x93a7bb['body'],_0x2a1949=_0x93a7bb[_0x40a1d2(0x1bb)][_0x40a1d2(0x5d5)];y[_0x40a1d2(0x608)]('request\x20received\x20in\x20editFlow'),y[_0x40a1d2(0x608)](_0x40a1d2(0x6ea)),y[_0x40a1d2(0x608)](_0x93a7bb[_0x40a1d2(0x723)]),delete _0x5e8a2e[_0x40a1d2(0x200)],delete _0x5e8a2e[_0x40a1d2(0x168)],delete _0x5e8a2e[_0x40a1d2(0x4ca)],delete _0x5e8a2e[_0x40a1d2(0x85d)];let _0x3aec76=await this[_0x40a1d2(0x50a)]({'request':_0x93a7bb,'schema':N,'ClassRef':C,'execute':_0x1dc43c=>T[_0x40a1d2(0x6a3)](_0x1dc43c,_0x5e8a2e,_0x2a1949)});_0x469ff6[_0x40a1d2(0x2f7)](0xc8)[_0x40a1d2(0x779)](_0x3aec76);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)]('editflowblock'),..._0x42d17e,async(_0x2c2dd0,_0x1c4814)=>{const _0x1adff8=_0x1590d1;let _0x84c979=_0x2c2dd0['body'];y[_0x1adff8(0x608)](_0x1adff8(0x630)),y[_0x1adff8(0x608)](_0x1adff8(0x6ea)),y[_0x1adff8(0x608)](_0x2c2dd0[_0x1adff8(0x723)]);let _0x5a1dbd=await this['dataValidate']({'request':_0x2c2dd0,'schema':N,'ClassRef':C,'execute':_0x5bfe24=>T[_0x1adff8(0x4d5)](_0x5bfe24,_0x84c979)});_0x1c4814['status'](0xc8)[_0x1adff8(0x779)](_0x5a1dbd);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)](_0x1590d1(0x634)),..._0x42d17e,async(_0x45400b,_0x17fb2c)=>{const _0x3be9ce=_0x1590d1;let _0x59833e=_0x45400b[_0x3be9ce(0x723)];y['verbose'](_0x3be9ce(0x630)),y[_0x3be9ce(0x608)](_0x3be9ce(0x6ea)),y[_0x3be9ce(0x608)](_0x45400b['body']);let _0x56fe6c=await this[_0x3be9ce(0x50a)]({'request':_0x45400b,'schema':N,'ClassRef':C,'execute':_0x6df7cc=>T[_0x3be9ce(0x6f1)](_0x6df7cc,_0x59833e)});_0x17fb2c[_0x3be9ce(0x2f7)](0xc8)[_0x3be9ce(0x779)](_0x56fe6c);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)](_0x1590d1(0x2c4)),..._0x42d17e,async(_0x2f6b7d,_0xf5d244)=>{const _0x33a58b=_0x1590d1;let _0x27f31c=_0x2f6b7d[_0x33a58b(0x723)];y[_0x33a58b(0x608)](_0x33a58b(0x630)),y[_0x33a58b(0x608)](_0x33a58b(0x6ea)),y[_0x33a58b(0x608)](_0x2f6b7d[_0x33a58b(0x723)]);let _0x55d046=await this[_0x33a58b(0x50a)]({'request':_0x2f6b7d,'schema':N,'ClassRef':C,'execute':_0x31fdda=>T[_0x33a58b(0x656)](_0x31fdda,_0x27f31c)});_0xf5d244['status'](0xc8)[_0x33a58b(0x779)](_0x55d046);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)](_0x1590d1(0x68a)),..._0x42d17e,async(_0xde0956,_0xf415c1)=>{const _0xdcb5eb=_0x1590d1;let _0x245555=_0xde0956['body'];y[_0xdcb5eb(0x608)]('request\x20received\x20in\x20editFlowgroup'),y[_0xdcb5eb(0x608)](_0xdcb5eb(0x6ea)),y[_0xdcb5eb(0x608)](_0xde0956['body']);let _0x238e56=await this[_0xdcb5eb(0x50a)]({'request':_0xde0956,'schema':N,'ClassRef':C,'execute':_0x4c30a4=>T['editFlowGroup'](_0x4c30a4,_0x245555)});_0xf415c1[_0xdcb5eb(0x2f7)](0xc8)[_0xdcb5eb(0x779)](_0x238e56);})[_0x1590d1(0x513)](this[_0x1590d1(0x30a)]('editflowcondition'),..._0x42d17e,async(_0xa85f21,_0x18125a)=>{const _0x337710=_0x1590d1;let _0xc7d819=_0xa85f21[_0x337710(0x723)];y['verbose']('request\x20received\x20in\x20editFlowcondition'),y[_0x337710(0x608)]('request\x20body:\x20'),y['verbose'](_0xa85f21['body']);let _0x30e978=await this[_0x337710(0x50a)]({'request':_0xa85f21,'schema':N,'ClassRef':C,'execute':_0x22e4e8=>T[_0x337710(0x774)](_0x22e4e8,_0xc7d819)});_0x18125a['status'](0xc8)[_0x337710(0x779)](_0x30e978);})['post'](this[_0x1590d1(0x30a)](_0x1590d1(0x702)),..._0x42d17e,async(_0x1040ac,_0x531ea7)=>{const _0x3c3df3=_0x1590d1;let _0x36b0ac=_0x1040ac[_0x3c3df3(0x723)];y[_0x3c3df3(0x608)]('request\x20received\x20in\x20editFlowvariable'),y[_0x3c3df3(0x608)](_0x3c3df3(0x6ea)),y[_0x3c3df3(0x608)](_0x1040ac[_0x3c3df3(0x723)]);let _0x186e6f=await this[_0x3c3df3(0x50a)]({'request':_0x1040ac,'schema':N,'ClassRef':C,'execute':_0x3c127b=>T['editFlowVariable'](_0x3c127b,_0x36b0ac)});_0x531ea7[_0x3c3df3(0x2f7)](0xc8)[_0x3c3df3(0x779)](_0x186e6f);})[_0x1590d1(0x513)](this['routerPath'](_0x1590d1(0x2df)),..._0x42d17e,async(_0x545559,_0x26da68)=>{const _0x432a0f=_0x1590d1;let _0x14a7a9=_0x545559[_0x432a0f(0x723)];y[_0x432a0f(0x608)](_0x432a0f(0x3b0)),y['verbose'](_0x432a0f(0x6ea)),y[_0x432a0f(0x608)](_0x545559[_0x432a0f(0x723)]);let _0x5f578a=await this[_0x432a0f(0x50a)]({'request':_0x545559,'schema':N,'ClassRef':C,'execute':_0x892a3=>T[_0x432a0f(0x247)](_0x892a3,_0x14a7a9)});_0x26da68[_0x432a0f(0x2f7)](0xc8)[_0x432a0f(0x779)](_0x5f578a);})[_0x1590d1(0x8a2)](this[_0x1590d1(0x30a)](_0x1590d1(0x2c9)),..._0x42d17e,async(_0x3a5327,_0x14ad45)=>{const _0x113462=_0x1590d1;let _0x5db218=_0x3a5327[_0x113462(0x723)];y[_0x113462(0x608)]('request\x20received\x20in\x20deleteFlow'),y['verbose'](_0x113462(0x6ea)),y[_0x113462(0x608)](_0x3a5327[_0x113462(0x723)]);let _0x4e8402=await this[_0x113462(0x50a)]({'request':_0x3a5327,'schema':N,'ClassRef':C,'execute':_0x4f1ed0=>T[_0x113462(0x3bb)](_0x4f1ed0,_0x5db218)});_0x14ad45[_0x113462(0x2f7)](0xc8)[_0x113462(0x779)](_0x4e8402);})[_0x1590d1(0x76d)](this['routerPath'](_0x1590d1(0x2ae)),..._0x42d17e,async(_0x33db18,_0xc3577e)=>{const _0x10581d=_0x1590d1;y[_0x10581d(0x608)](_0x10581d(0x87a));let _0x5e5c8f=await this[_0x10581d(0x50a)]({'request':_0x33db18,'schema':N,'ClassRef':C,'execute':_0x149247=>T[_0x10581d(0x1aa)](_0x149247)});_0xc3577e[_0x10581d(0x2f7)](0xc8)[_0x10581d(0x779)](_0x5e5c8f);});}},Ei=A(require(a0_0x5ca971(0x562))),oe={};function Si(_0x24e437,_0x552fd5,_0x1301d2,_0x2c0510){oe[_0x24e437]||(oe[_0x24e437]={}),oe[_0x24e437][_0x552fd5]={'id':_0x552fd5,'response':_0x1301d2,'events':_0x2c0510};}function Mi(_0x47c61e,_0xabccc1){!oe[_0x47c61e]||!oe[_0x47c61e][_0xabccc1]||delete oe[_0x47c61e][_0xabccc1];}function V(_0x583a83,_0x4d6dfa,_0xa0a9c9){const _0x550ddf=a0_0x5ca971;if(!oe[_0x583a83])return;let _0x1cd792='data:\x20'+JSON['stringify'](_0xa0a9c9)+'\x0a\x0a';Object[_0x550ddf(0x7cb)](oe[_0x583a83])[_0x550ddf(0x491)](_0x3e93dc=>{const _0x4495c5=_0x550ddf;_0x3e93dc['events'][_0x4495c5(0x839)](_0x4d6dfa)&&_0x3e93dc['response'][_0x4495c5(0x31d)](_0x1cd792);});}function Ci(){const _0xd2a80d=a0_0x5ca971;let _0x539c6e={};for(let _0x6bcd3f in oe)_0x539c6e[_0x6bcd3f]=Object[_0xd2a80d(0x7cb)](oe[_0x6bcd3f])[_0xd2a80d(0x7a8)](_0x8af002=>({'id':_0x8af002['id'],'events':_0x8af002[_0xd2a80d(0x458)]}));return _0x539c6e;}var vi=require('uuid'),Ts=require(a0_0x5ca971(0x410)),As=class{},To=new Ts['Schema']({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),_o=new Ts[(a0_0x5ca971(0x213))]({'_id':{'type':String,'default':a0_0x5ca971(0x7f5)},'WebhookGlobal':{'type':To},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),ve=R?.['model'](As[a0_0x5ca971(0x41c)],_o,a0_0x5ca971(0x70b)),Oo=Ei[a0_0x5ca971(0x678)]['join'](__dirname,a0_0x5ca971(0x363)),ke=(0x0,Pt[a0_0x5ca971(0x55e)])(),xo=b[a0_0x5ca971(0x76d)](a0_0x5ca971(0x26a))[a0_0x5ca971(0x2ec)],le=[Aa,Ta,xa[xo]];ke[a0_0x5ca971(0x24d)](a0_0x5ca971(0x793),Pt['default'][a0_0x5ca971(0x1a1)](Oo))[a0_0x5ca971(0x76d)](a0_0x5ca971(0x617),async(_0x5962d7,_0x4965f2)=>{const _0x56327d=a0_0x5ca971;console[_0x56327d(0x2a9)]('bateu\x20events');let _0x140c66=_0x5962d7[_0x56327d(0x3fe)]['instance'],_0x38b102=(_0x5962d7['query']['events']||'')[_0x56327d(0x266)](','),_0x3abc96=(0x0,vi['v4'])();console[_0x56327d(0x2a9)](_0x56327d(0x322),_0x140c66),console[_0x56327d(0x2a9)]('Subscribed\x20Events:',_0x38b102);let _0xcc9ae8=b[_0x56327d(0x76d)]('AUTHENTICATION')[_0x56327d(0x486)],_0x55736e=_0x5962d7[_0x56327d(0x56c)][_0x56327d(0x5d5)];if(console[_0x56327d(0x2a9)](_0x56327d(0x666),_0x55736e),_0xcc9ae8[_0x56327d(0x255)]!==_0x55736e){console[_0x56327d(0x2a9)](_0x56327d(0x1d3));try{let _0x5c9b46=await we[_0x56327d(0x6aa)]['find'](_0x140c66);if(console[_0x56327d(0x2a9)](_0x56327d(0x4dc),_0x5c9b46),!_0x5c9b46||_0x5c9b46['apikey']!==_0x55736e)return console['log'](_0x56327d(0x6fe)),_0x4965f2[_0x56327d(0x2f7)](0x191)[_0x56327d(0x472)]('API\x20Key\x20inválida.');}catch(_0x2f8796){return console['error'](_0x56327d(0x4e0),_0x2f8796),_0x4965f2[_0x56327d(0x2f7)](0x191)[_0x56327d(0x472)](_0x56327d(0x81d));}}if(!await _e(_0x140c66))return _0x4965f2[_0x56327d(0x2f7)](0x194)[_0x56327d(0x472)]('Instância\x20não\x20encontrada.');_0x4965f2['setHeader'](_0x56327d(0x357),_0x56327d(0x598)),_0x4965f2['setHeader'](_0x56327d(0x6a5),_0x56327d(0x893)),_0x4965f2[_0x56327d(0x69f)]('Connection',_0x56327d(0x789)),_0x4965f2[_0x56327d(0x53d)]();let _0x3ec647=_0x56327d(0x258)+JSON['stringify']({'info':_0x56327d(0x737)})+'\x0a\x0a';_0x4965f2['write'](_0x3ec647),Si(_0x140c66,_0x3abc96,_0x4965f2,_0x38b102),_0x5962d7['on'](_0x56327d(0x73e),()=>{const _0x53ec57=_0x56327d;console[_0x53ec57(0x2a9)](_0x53ec57(0x1b0)+_0x140c66),Mi(_0x140c66,_0x3abc96);});}),ke[a0_0x5ca971(0x513)](a0_0x5ca971(0x24e),async(_0x41fbe7,_0x478d4a)=>{const _0x4876cc=a0_0x5ca971;console['log'](_0x4876cc(0x5b8));let _0x48339f=_0x41fbe7[_0x4876cc(0x3fe)]['instance'],_0xcf8e8d=_0x41fbe7['params'][_0x4876cc(0x1b3)],_0x148186=_0x41fbe7['query']['remoteJid']||'',_0x54109c=_0x41fbe7[_0x4876cc(0x723)];console[_0x4876cc(0x2a9)](_0x4876cc(0x49b),_0x48339f),console[_0x4876cc(0x2a9)]('StartID:',_0xcf8e8d),console[_0x4876cc(0x2a9)](_0x4876cc(0x183),_0x148186),console[_0x4876cc(0x2a9)]('Request\x20Body:',_0x54109c);try{if(!await _e(_0x48339f))return _0x478d4a[_0x4876cc(0x2f7)](0x194)['send'](_0x4876cc(0x6be));let _0x135dc1=await T[_0x4876cc(0x690)](_0x48339f,_0xcf8e8d,_0x148186,_0x54109c);_0x478d4a[_0x4876cc(0x472)](_0x135dc1);}catch(_0x51a6d3){console[_0x4876cc(0x2b1)](_0x51a6d3),_0x478d4a['status'](0x1f4)[_0x4876cc(0x472)](_0x4876cc(0x2d9));}}),ke['get']('/clients-info',(_0x3faf32,_0x56d023)=>{const _0x45a5d5=a0_0x5ca971;let _0x3c6062=Ci();_0x56d023[_0x45a5d5(0x779)](_0x3c6062);})[a0_0x5ca971(0x76d)]('/',(_0x449797,_0x115dfe)=>{const _0xc3b384=a0_0x5ca971;let _0x416c6f=b[_0xc3b384(0x76d)](_0xc3b384(0x69a))[_0xc3b384(0x4a1)];if(_0x416c6f){let _0x2b306b=encodeURIComponent(''+_0x416c6f);_0x115dfe[_0xc3b384(0x452)](_0xc3b384(0x7f0)+_0x2b306b);return;}let _0x4c2c6a=b[_0xc3b384(0x76d)](_0xc3b384(0x77d)),_0x2f316c=_0x4c2c6a&&_0x4c2c6a[_0xc3b384(0x433)][_0xc3b384(0x266)]('/')[0x4];if(_0x2f316c){let _0x2bbc60=encodeURIComponent(_0xc3b384(0x6b5)+_0x2f316c);_0x115dfe[_0xc3b384(0x452)](_0xc3b384(0x7f0)+_0x2bbc60);}else _0x115dfe['redirect'](_0xc3b384(0x34a));})[a0_0x5ca971(0x5c3)]('/exit',...le,async(_0x58c280,_0x118095)=>{const _0x5a6832=a0_0x5ca971;try{console[_0x5a6832(0x2a9)](_0x5a6832(0x4f2)),_0x118095[_0x5a6832(0x2f7)](0xc8)[_0x5a6832(0x779)]({'message':'API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos'}),_0x118095['on'](_0x5a6832(0x703),()=>process[_0x5a6832(0x6ee)](0x0));}catch(_0x499f39){console[_0x5a6832(0x2b1)](_0x5a6832(0x77c),_0x499f39),_0x118095[_0x5a6832(0x2f7)](0x1f4)[_0x5a6832(0x779)]({'message':'Erro\x20ao\x20encerrar\x20a\x20API'});}})[a0_0x5ca971(0x5c3)](a0_0x5ca971(0x289),...le,async(_0x46fff7,_0xa79ca5)=>{const _0x1fae0f=a0_0x5ca971;try{let _0x9b3c70=_0x46fff7[_0x1fae0f(0x723)];await ve[_0x1fae0f(0x743)]({},{'$set':_0x9b3c70},{'upsert':!0x0});let _0xb1ce27=await ve['findOne']();_0xa79ca5['json'](_0xb1ce27);}catch(_0x3d6267){_0xa79ca5[_0x1fae0f(0x2f7)](0x190)[_0x1fae0f(0x472)](_0x3d6267[_0x1fae0f(0x4f4)]);}})[a0_0x5ca971(0x76d)](a0_0x5ca971(0x289),...le,async(_0xd589db,_0x20958c)=>{const _0x1162de=a0_0x5ca971;try{let _0x990333=await ve[_0x1162de(0x640)]();if(!_0x990333)return _0x20958c[_0x1162de(0x779)]({});_0x20958c['json'](_0x990333);}catch(_0x42d6e9){_0x20958c[_0x1162de(0x2f7)](0x1f4)[_0x1162de(0x472)](_0x42d6e9[_0x1162de(0x4f4)]);}})['use'](a0_0x5ca971(0x591),new St(b,...le)[a0_0x5ca971(0x369)])['use'](a0_0x5ca971(0x494),new _t(...le)[a0_0x5ca971(0x369)])[a0_0x5ca971(0x24d)]('/chat',new ut(...le)[a0_0x5ca971(0x369)])['use'](a0_0x5ca971(0x38b),new bt(...le)[a0_0x5ca971(0x369)])[a0_0x5ca971(0x24d)](a0_0x5ca971(0x81e),new xt(...le)[a0_0x5ca971(0x369)])[a0_0x5ca971(0x24d)]('/automate',new Dt(...le)['router']);var m=class{constructor(..._0x486239){const _0x3d1e1f=a0_0x5ca971;throw{'status':0x190,'error':_0x3d1e1f(0x3ed),'message':_0x486239['length']>0x0?_0x486239:void 0x0};}},ce=class{constructor(..._0x4b0f67){const _0x538a64=a0_0x5ca971;throw{'status':0x191,'error':'Unauthorized','message':_0x4b0f67[_0x538a64(0x532)]>0x0?_0x4b0f67:void 0x0};}},se=class{constructor(..._0x215001){const _0x378cd1=a0_0x5ca971;throw{'status':0x193,'error':_0x378cd1(0x79a),'message':_0x215001[_0x378cd1(0x532)]>0x0?_0x215001:void 0x0};}},q=class{constructor(..._0x165bea){const _0x5f4c8e=a0_0x5ca971;throw{'status':0x194,'error':'Not\x20Found','message':_0x165bea[_0x5f4c8e(0x532)]>0x0?_0x165bea:void 0x0};}},O=class{constructor(..._0x445078){const _0x39290a=a0_0x5ca971;throw{'status':0x1f4,'error':_0x39290a(0x709),'message':_0x445078['length']>0x0?_0x445078:void 0x0};}},ye=require('@whiskeysockets/baileys');async function _s(_0x10cdb9){const _0x5137ec=a0_0x5ca971;let _0x32fa6b=new $(_s[_0x5137ec(0x41c)]),_0x9b774=R['getClient'](),_0x2e5428=_0x9b774['db'](b[_0x5137ec(0x76d)](_0x5137ec(0x868))['CONNECTION'][_0x5137ec(0x70e)]+_0x5137ec(0x57a))['collection'](_0x10cdb9),_0x47dfac=async(_0x2f9972,_0x4a65f6)=>{const _0x3e768d=_0x5137ec;try{return await _0x9b774[_0x3e768d(0x416)](),await _0x2e5428[_0x3e768d(0x3b6)]({'_id':_0x4a65f6},JSON[_0x3e768d(0x1c3)](JSON[_0x3e768d(0x179)](_0x2f9972,ye[_0x3e768d(0x1bf)][_0x3e768d(0x1fc)])),{'upsert':!0x0});}catch{}},_0x12ed26=async _0x4d84b0=>{const _0x543d12=_0x5137ec;try{await _0x9b774[_0x543d12(0x416)]();let _0x5f2fda=await _0x2e5428['findOne']({'_id':_0x4d84b0}),_0x2e713b=JSON[_0x543d12(0x179)](_0x5f2fda);return JSON[_0x543d12(0x1c3)](_0x2e713b,ye[_0x543d12(0x1bf)][_0x543d12(0x165)]);}catch{}},_0x3a93c2=async _0x371042=>{const _0x3ee950=_0x5137ec;try{return await _0x9b774['connect'](),await _0x2e5428[_0x3ee950(0x631)]({'_id':_0x371042});}catch{}},_0x2dbb5a=await _0x12ed26(_0x5137ec(0x6df))||(0x0,ye[_0x5137ec(0x7b4)])();return{'state':{'creds':_0x2dbb5a,'keys':{'get':async(_0x1fa824,_0x3f04d7)=>{const _0x1b3156=_0x5137ec;let _0x7e46b9={};return await Promise[_0x1b3156(0x6de)](_0x3f04d7[_0x1b3156(0x7a8)](async _0x1f0321=>{const _0x42695d=_0x1b3156;let _0xe111e2=await _0x12ed26(_0x1fa824+'-'+_0x1f0321);_0x1fa824===_0x42695d(0x7cc)&&_0xe111e2&&(_0xe111e2=ye[_0x42695d(0x386)]['Message'][_0x42695d(0x50d)][_0x42695d(0x1b1)](_0xe111e2)),_0x7e46b9[_0x1f0321]=_0xe111e2;})),_0x7e46b9;},'set':async _0x3d3f0b=>{const _0x44825e=_0x5137ec;let _0x5cbc4b=[];for(let _0x19ca5b in _0x3d3f0b)for(let _0x29329f in _0x3d3f0b[_0x19ca5b]){let _0x49a67c=_0x3d3f0b[_0x19ca5b][_0x29329f],_0x96024c=_0x19ca5b+'-'+_0x29329f;_0x5cbc4b[_0x44825e(0x59a)](_0x49a67c?_0x47dfac(_0x49a67c,_0x96024c):_0x3a93c2(_0x96024c));}await Promise[_0x44825e(0x6de)](_0x5cbc4b);}}},'saveCreds':async()=>_0x47dfac(_0x2dbb5a,_0x5137ec(0x6df))};}var ks=A(require(a0_0x5ca971(0x600))),Ls=A(require(a0_0x5ca971(0x371))),Ft=require(a0_0x5ca971(0x456)),Ni=require('@redis/client'),Lt=require(a0_0x5ca971(0x456)),kt;function Do(_0x223df9){const _0x12b92e=a0_0x5ca971;return kt||(kt=(0x0,Ni['createClient'])({'url':_0x223df9[_0x12b92e(0x528)]}),kt[_0x12b92e(0x416)]()),kt;}var ge=class u{constructor(_0x3b4ebc,_0x2638a5){const _0x3f5aa1=a0_0x5ca971;this[_0x3f5aa1(0x69b)]=_0x3b4ebc,this['instanceName']=_0x2638a5,this[_0x3f5aa1(0x56b)]=new $(u[_0x3f5aa1(0x41c)]),this[_0x3f5aa1(0x2cc)]=Do(_0x3b4ebc);}set[a0_0x5ca971(0x5ba)](_0x496878){this['instanceName']=_0x496878;}async[a0_0x5ca971(0x4d9)](){const _0x4d4ab8=a0_0x5ca971;try{return await this[_0x4d4ab8(0x2cc)][_0x4d4ab8(0x4ae)](['keys',this[_0x4d4ab8(0x69b)][_0x4d4ab8(0x7d9)]+':*']);}catch(_0x568fed){this['logger'][_0x4d4ab8(0x2b1)](_0x568fed);}}async['writeData'](_0x597612,_0x886e1f){const _0x28e8df=a0_0x5ca971;try{let _0x447f50=JSON[_0x28e8df(0x179)](_0x886e1f,Lt[_0x28e8df(0x1bf)][_0x28e8df(0x1fc)]);return await this[_0x28e8df(0x2cc)][_0x28e8df(0x205)](this[_0x28e8df(0x69b)]['PREFIX_KEY']+':'+this['instanceName'],_0x597612,_0x447f50);}catch(_0x33aa7a){this[_0x28e8df(0x56b)][_0x28e8df(0x2b1)](_0x33aa7a);}}async['getAllData'](){const _0x231c46=a0_0x5ca971;try{let _0xbef419=await this['client'][_0x231c46(0x234)](this[_0x231c46(0x69b)][_0x231c46(0x7d9)]+':'+this[_0x231c46(0x6dd)]);if(_0xbef419){for(let _0x2f1dde in _0xbef419)Object[_0x231c46(0x171)][_0x231c46(0x72a)][_0x231c46(0x770)](_0xbef419,_0x2f1dde)&&(_0xbef419[_0x2f1dde]=JSON[_0x231c46(0x1c3)](_0xbef419[_0x2f1dde],Lt['BufferJSON']['reviver']));return _0xbef419;}}catch(_0x2c1a1e){this[_0x231c46(0x56b)]['error'](_0x2c1a1e);}}async[a0_0x5ca971(0x7d8)](_0x36a3c5){const _0x15a1d0=a0_0x5ca971;try{let _0x28fa72=await this[_0x15a1d0(0x2cc)][_0x15a1d0(0x2b6)](this[_0x15a1d0(0x69b)][_0x15a1d0(0x7d9)]+':'+this[_0x15a1d0(0x6dd)],_0x36a3c5);if(_0x28fa72)return JSON[_0x15a1d0(0x1c3)](_0x28fa72,Lt[_0x15a1d0(0x1bf)][_0x15a1d0(0x165)]);}catch(_0x195c38){this[_0x15a1d0(0x56b)][_0x15a1d0(0x2b1)](_0x195c38);}}async['removeData'](_0x31778f){const _0x4f23f3=a0_0x5ca971;try{return await this[_0x4f23f3(0x2cc)][_0x4f23f3(0x781)](this[_0x4f23f3(0x69b)][_0x4f23f3(0x7d9)]+':'+this['instanceName'],_0x31778f);}catch(_0x442848){this['logger'][_0x4f23f3(0x2b1)](_0x442848);}}async['delAll'](_0x405979){const _0x3486fb=a0_0x5ca971;try{return await this[_0x3486fb(0x2cc)][_0x3486fb(0x4ba)](_0x405979||this[_0x3486fb(0x69b)][_0x3486fb(0x7d9)]+':'+this[_0x3486fb(0x6dd)]);}catch(_0x217747){this[_0x3486fb(0x56b)]['error'](_0x217747);}}};async function Os(_0x250e8d,_0x1154ce){const _0x7adb12=a0_0x5ca971;let _0x3eff4f=new $(Os[_0x7adb12(0x41c)]),_0xb9a84e=new ge(_0x250e8d,_0x1154ce),_0x1b6728=async(_0x3e7f56,_0x3cb3e4)=>{const _0x408bde=_0x7adb12;try{return await _0xb9a84e['writeData'](_0x3cb3e4,_0x3e7f56);}catch(_0x1567c6){return _0x3eff4f[_0x408bde(0x2b1)]({'localError':_0x408bde(0x8a4),'error':_0x1567c6});}},_0x139566=async _0x30acaf=>{const _0x433232=_0x7adb12;try{return await _0xb9a84e[_0x433232(0x7d8)](_0x30acaf);}catch(_0x51d771){_0x3eff4f[_0x433232(0x2b1)]({'readData':_0x433232(0x8a4),'error':_0x51d771});return;}},_0x41d0ea=async _0x3228d1=>{const _0xf6f514=_0x7adb12;try{return await _0xb9a84e[_0xf6f514(0x2dd)](_0x3228d1);}catch(_0x563c3c){_0x3eff4f[_0xf6f514(0x2b1)]({'readData':_0xf6f514(0x2dd),'error':_0x563c3c});}},_0x5f471e=await _0x139566(_0x7adb12(0x6df))||(0x0,Ft[_0x7adb12(0x7b4)])();return{'state':{'creds':_0x5f471e,'keys':{'get':async(_0x5832e4,_0x5b24cb)=>{const _0x358425=_0x7adb12;let _0x5af98d={};return await Promise[_0x358425(0x6de)](_0x5b24cb[_0x358425(0x7a8)](async _0xcc0c76=>{const _0xd14d0f=_0x358425;let _0x3fc40a=await _0x139566(_0x5832e4+'-'+_0xcc0c76);_0x5832e4===_0xd14d0f(0x7cc)&&_0x3fc40a&&(_0x3fc40a=Ft[_0xd14d0f(0x386)]['Message']['AppStateSyncKeyData']['fromObject'](_0x3fc40a)),_0x5af98d[_0xcc0c76]=_0x3fc40a;})),_0x5af98d;},'set':async _0x31519e=>{const _0x3611c9=_0x7adb12;let _0x362885=[];for(let _0x49d8a2 in _0x31519e)for(let _0x399bc6 in _0x31519e[_0x49d8a2]){let _0x25a043=_0x31519e[_0x49d8a2][_0x399bc6],_0x2789b9=_0x49d8a2+'-'+_0x399bc6;_0x362885[_0x3611c9(0x59a)](_0x25a043?await _0x1b6728(_0x25a043,_0x2789b9):await _0x41d0ea(_0x2789b9));}await Promise['all'](_0x362885);}}},'saveCreds':async()=>await _0x1b6728(_0x5f471e,'creds')};}var F=A(require('fs')),Y=require(a0_0x5ca971(0x1a9)),qt=A(require(a0_0x5ca971(0x3d8))),Vt=require(a0_0x5ca971(0x651)),$i=require(a0_0x5ca971(0x31f)),Ri=require(a0_0x5ca971(0x7db)),Ii=A(require(a0_0x5ca971(0x5c5))),Ne=class extends _{constructor(_0x492581,_0x4ac2b4,_0x3912fa){const _0x4fcc9f=a0_0x5ca971;super(_0x4ac2b4),this[_0x4fcc9f(0x621)]=_0x492581,this[_0x4fcc9f(0x601)]=_0x4ac2b4,this[_0x4fcc9f(0x5aa)]=_0x3912fa;}async[a0_0x5ca971(0x276)](_0x44510b,_0x360af7){const _0x7e9ec0=a0_0x5ca971;try{if(this['dbSettings'][_0x7e9ec0(0x325)]){console[_0x7e9ec0(0x2a9)]('Creating\x20or\x20updating\x20instance\x20with\x20id:\x20'+_0x360af7+_0x7e9ec0(0x7d2),_0x44510b);let _0x3ed6ca=await this[_0x7e9ec0(0x621)][_0x7e9ec0(0x5dc)]({'_id':_0x360af7},{'$set':_0x44510b},{'new':!0x0,'upsert':!0x0});return console[_0x7e9ec0(0x2a9)](_0x7e9ec0(0x163),_0x3ed6ca),_0x3ed6ca;}}catch(_0x37e8d4){throw console['error'](_0x7e9ec0(0x808),_0x37e8d4),_0x37e8d4;}return null;}async[a0_0x5ca971(0x631)](_0x50e26f){const _0x1b8df1=a0_0x5ca971;try{let _0x41e54b=I(_0x50e26f[_0x1b8df1(0x1cf)]);return{'deletedCount':(await this[_0x1b8df1(0x621)][_0x1b8df1(0x631)](_0x41e54b))[_0x1b8df1(0x5c7)]};}catch(_0x53cebe){return{'error':_0x53cebe?.['toString']()};}}async['findOne'](_0x4a29b8){const _0x57159b=a0_0x5ca971;try{let _0x3878d7=I(_0x4a29b8[_0x57159b(0x1cf)]);return await this['cacheInstanceModel'][_0x57159b(0x640)](_0x3878d7)[_0x57159b(0x1df)]();}catch{return null;}}},Ut=(0x0,Ri[a0_0x5ca971(0x287)])($i['exec']),Po=b[a0_0x5ca971(0x76d)](a0_0x5ca971(0x4c9)),xs=class{constructor(){const _0x164aab=a0_0x5ca971;this[_0x164aab(0x613)]=new Ne(ze,b),(!this[_0x164aab(0x2bc)]||!this[_0x164aab(0x16b)])&&Po&&this[_0x164aab(0x6fc)]()[_0x164aab(0x5b9)](()=>{const _0xf094e6=_0x164aab;console[_0xf094e6(0x2a9)](_0xf094e6(0x1c6)+this['ipv6Prefix']),console[_0xf094e6(0x2a9)](_0xf094e6(0x64c)+this[_0xf094e6(0x16b)]);})['catch'](_0x22572b=>{const _0x211458=_0x164aab;console['error']('Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20'+_0x22572b[_0x211458(0x4f4)]);});}async[a0_0x5ca971(0x6fc)](){const _0x3dcf24=a0_0x5ca971;try{let {stdout:_0x3bdda5}=await Ut(_0x3dcf24(0x5a0));console['log'](_0x3dcf24(0x28c)+_0x3bdda5);let _0x16a192=_0x3bdda5[_0x3dcf24(0x266)]('\x0a')['map'](_0x3776d5=>_0x3776d5[_0x3dcf24(0x266)]('\x20')[0x0])[_0x3dcf24(0x587)](_0x5b91fc=>!_0x5b91fc[_0x3dcf24(0x839)]('lo')&&!_0x5b91fc[_0x3dcf24(0x839)]('docker')&&!_0x5b91fc[_0x3dcf24(0x839)](_0x3dcf24(0x321))&&!_0x5b91fc[_0x3dcf24(0x839)]('wl')&&!_0x5b91fc['includes']('@'));if(console['log'](_0x3dcf24(0x4dd)+_0x16a192),_0x16a192['length']===0x0)throw new Error(_0x3dcf24(0x71c));this[_0x3dcf24(0x16b)]=_0x16a192[0x0];let {stdout:_0x51617f}=await Ut(_0x3dcf24(0x4d3)+this['networkInterface']);console[_0x3dcf24(0x2a9)](_0x3dcf24(0x31a)+_0x51617f);let _0x58ace5=_0x51617f[_0x3dcf24(0x266)]('\x0a')['find'](_0x15099a=>_0x15099a[_0x3dcf24(0x839)](_0x3dcf24(0x7be))&&_0x15099a['includes'](_0x3dcf24(0x66b)));if(!_0x58ace5)throw new Error(_0x3dcf24(0x43b));let _0x50bafe=_0x58ace5['match'](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x50bafe)throw new Error(_0x3dcf24(0x585));let [_0x24b21c,_0x1425b8,_0xf3f743]=_0x50bafe,_0x164a75=Math[_0x3dcf24(0x7c4)](Number(_0xf3f743)/0x10),_0x3e19b5=Number(_0xf3f743)%0x10,_0x2de6b8=_0x1425b8[_0x3dcf24(0x266)](':')[_0x3dcf24(0x3f4)](0x0,_0x164a75)[_0x3dcf24(0x897)](':');if(_0x3e19b5>0x0){let _0x29c54c=_0x1425b8[_0x3dcf24(0x266)](':')[_0x164a75],_0x31f63f=0xffff<<0x10-_0x3e19b5&0xffff,_0x4a97ef=(parseInt(_0x29c54c,0x10)&_0x31f63f)[_0x3dcf24(0x7b1)](0x10)['padStart'](0x4,'0');_0x2de6b8+=':'+_0x4a97ef;}this['ipv6Prefix']=_0x2de6b8+':';}catch(_0x164fc6){console['error'](_0x3dcf24(0x46b),_0x164fc6);}}async[a0_0x5ca971(0x225)](_0x301a02){const _0x2f0497=a0_0x5ca971;let _0x1db805=_0x2f0497(0x75f)+_0x301a02+_0x2f0497(0x6db)+this['networkInterface'];try{await Ut(_0x1db805),console[_0x2f0497(0x2a9)](_0x2f0497(0x6e3)+_0x301a02);}catch(_0x4bc8ca){console['error'](_0x2f0497(0x270)+_0x4bc8ca);}}async[a0_0x5ca971(0x5e0)](_0x44717a){const _0x557dea=a0_0x5ca971;let _0x5d7b17='ip\x20-6\x20addr\x20del\x20'+_0x44717a+_0x557dea(0x6db)+this['networkInterface'];try{await Ut(_0x5d7b17),console[_0x557dea(0x2a9)](_0x557dea(0x3ae)+_0x44717a);}catch(_0x5005d3){console[_0x557dea(0x2b1)](_0x557dea(0x3cc)+_0x5005d3);}}[a0_0x5ca971(0x299)](){const _0x38a228=a0_0x5ca971;return _0x38a228(0x2fd)[_0x38a228(0x3d2)](/X/g,()=>_0x38a228(0x712)[_0x38a228(0x33d)](Math['floor'](Math[_0x38a228(0x541)]()*0x10)));}[a0_0x5ca971(0x835)](_0x4c2c7e,_0x33e46a){const _0x31a0e2=a0_0x5ca971;let _0x388094=_0x33e46a[_0x31a0e2(0x266)](':');return _0x388094[0x0]=(parseInt(_0x388094[0x0],0x10)^0x2)[_0x31a0e2(0x7b1)](0x10)[_0x31a0e2(0x45c)](0x2,'0'),''+_0x4c2c7e+_0x388094[0x0]+_0x388094[0x1]+':'+_0x388094[0x2]+_0x31a0e2(0x534)+_0x388094[0x3]+':'+_0x388094[0x4]+_0x388094[0x5];}['generateRandomIPv6'](){const _0x1c506b=a0_0x5ca971;let _0x18ed92=this[_0x1c506b(0x2bc)];_0x18ed92['endsWith'](':')||(_0x18ed92+=':');let _0x3e9777=this[_0x1c506b(0x299)]();return this[_0x1c506b(0x835)](_0x18ed92,_0x3e9777);}[a0_0x5ca971(0x5c0)](_0x23e2e9){const _0x16043d=a0_0x5ca971;return new RegExp('^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$')[_0x16043d(0x22b)](_0x23e2e9);}async['testIPv6'](_0xfe1a98){const _0x39cbba=a0_0x5ca971;let _0x57bf16=[{'url':_0x39cbba(0x62a),'parse':_0x1b4a47=>_0x1b4a47['ip']},{'url':_0x39cbba(0x1fa),'parse':_0x1ceef6=>_0x1ceef6['ip']},{'url':'https://ifconfig.me/ip','parse':_0x1f097e=>_0x1f097e[_0x39cbba(0x56d)]()},{'url':_0x39cbba(0x70a),'parse':_0x1c036e=>_0x1c036e[_0x39cbba(0x56d)]()}],_0x2617cd=_0x57bf16[Math[_0x39cbba(0x7c4)](Math[_0x39cbba(0x541)]()*_0x57bf16[_0x39cbba(0x532)])];try{let _0x12e8af=await Ii[_0x39cbba(0x678)]['get'](_0x2617cd['url'],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0xfe1a98}}),_0x452154=_0x2617cd[_0x39cbba(0x1c3)](_0x12e8af[_0x39cbba(0x5c9)]);return _0x452154['toLowerCase']()===_0xfe1a98[_0x39cbba(0x763)]()?(console[_0x39cbba(0x2a9)](_0x39cbba(0x5ee)+_0xfe1a98),!0x0):(console[_0x39cbba(0x2b1)](_0x39cbba(0x22f)+_0xfe1a98+_0x39cbba(0x18e)+_0x452154),!0x1);}catch(_0xe93e89){return console[_0x39cbba(0x2b1)](_0x39cbba(0x5f1)+_0x2617cd[_0x39cbba(0x768)]+':\x20'+_0xe93e89[_0x39cbba(0x4f4)]),!0x1;}}async[a0_0x5ca971(0x482)](_0x33f77b,_0x506812){const _0x2b5b61=a0_0x5ca971;if(!this[_0x2b5b61(0x2bc)]||!this[_0x2b5b61(0x16b)])return console[_0x2b5b61(0x2b1)]('IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.'),null;let _0x28a2bb;do _0x28a2bb=this[_0x2b5b61(0x269)](),console[_0x2b5b61(0x2a9)](_0x2b5b61(0x700)+_0x28a2bb);while(!await this[_0x2b5b61(0x859)](_0x28a2bb));await this['configureIPv6'](_0x28a2bb),console['log'](_0x2b5b61(0x579)+_0x28a2bb);let _0x53b2ee={'_id':_0x33f77b+'-'+_0x506812,'ip':_0x28a2bb},_0x4d3561=await this[_0x2b5b61(0x613)][_0x2b5b61(0x276)](_0x53b2ee,_0x53b2ee[_0x2b5b61(0x4a6)]);return console[_0x2b5b61(0x2a9)](_0x2b5b61(0x5b5)+_0x4d3561),_0x28a2bb;}async[a0_0x5ca971(0x859)](_0x101c4e){const _0xdeca49=a0_0x5ca971;return this[_0xdeca49(0x5c0)](_0x101c4e)?!await this[_0xdeca49(0x613)][_0xdeca49(0x640)]({'where':{'ip':_0x101c4e}}):!0x1;}async[a0_0x5ca971(0x488)](_0x19285e,_0x35f756){const _0x1ac6eb=a0_0x5ca971;let _0x596a15=_0x19285e+'-'+_0x35f756,_0x5bf364=await this[_0x1ac6eb(0x613)][_0x1ac6eb(0x640)]({'where':{'_id':_0x596a15}});_0x5bf364&&_0x5bf364['ip']&&(await this['removeIPv6'](_0x5bf364['ip']),await this[_0x1ac6eb(0x613)]['deleteOne']({'where':{'_id':_0x596a15}}));}},ko=new xs(),re=ko,Fs=a0_0x5ca971(0x292),Pi,me=null,Da=null,Lo=0x3,Fo=null,Ai=b[a0_0x5ca971(0x76d)](a0_0x5ca971(0x26a))[a0_0x5ca971(0x486)][a0_0x5ca971(0x255)],Ti=b[a0_0x5ca971(0x76d)](a0_0x5ca971(0x4c9));async function Uo(){const _0x6c7b49=a0_0x5ca971;let _0x277c11=await ve['findOne']();me=_0x277c11?.['WebhookGlobal']??null,Fo=_0x277c11?.[_0x6c7b49(0x47d)]??null,Fs=_0x277c11?.[_0x6c7b49(0x59e)]??'Safari',Pi=_0x277c11?.[_0x6c7b49(0x54e)]??K??_0x6c7b49(0x748);}async function jo(){await Uo();}jo();var jt={},$e=class u{constructor(_0x4951df,_0x188924,_0x3fb335){const _0x3518dd=a0_0x5ca971;this[_0x3518dd(0x601)]=_0x4951df,this['eventEmitter']=_0x188924,this[_0x3518dd(0x7fa)]=_0x3fb335,this[_0x3518dd(0x755)]=null,this[_0x3518dd(0x56b)]=new $(u[_0x3518dd(0x41c)]),this[_0x3518dd(0x3f0)]={},this['localWebhook']={},this[_0x3518dd(0x149)]={'state':'close'},this[_0x3518dd(0x35d)]=(0x0,J[_0x3518dd(0x897)])(ue,_0x3518dd(0x363)),this[_0x3518dd(0x87d)]=new Ls['default'](),this[_0x3518dd(0x2b8)]=new Ls[(_0x3518dd(0x678))](),this[_0x3518dd(0x393)]=!0x1,this['webhookMap']={'status.instance':_0x3518dd(0x2f5),'connection.update':_0x3518dd(0x2f5),'qrcode.updated':_0x3518dd(0x293),'messages.upsert':_0x3518dd(0x77a),'send.message':'/wa-message','messages.update':_0x3518dd(0x590),'group.upsert':'/wa-groups','group.update':_0x3518dd(0x350),'group-participants.update':'/wa-groups','messages.set':_0x3518dd(0x32f),'contacts.set':_0x3518dd(0x815),'contacts.upsert':_0x3518dd(0x815),'contacts.update':_0x3518dd(0x815),'presence.update':_0x3518dd(0x42f),'chats.set':_0x3518dd(0x673),'chats.update':_0x3518dd(0x673),'chats.upsert':'/wa-chats','chats.delete':_0x3518dd(0x673)},this[_0x3518dd(0x302)]=0x0,this[_0x3518dd(0x872)]=[],this[_0x3518dd(0x384)]=0xea60,this['isRunning']=!0x1,this[_0x3518dd(0x467)]={'chats.upsert':async(_0x9df28e,_0x5474ec)=>{const _0x484466=_0x3518dd;let _0x1dddae=[];for await(let _0x1e7be3 of _0x9df28e)_0x1dddae[_0x484466(0x59a)]({'_id':_0x1e7be3['id'],'owner':this[_0x484466(0x3f0)][_0x484466(0x547)],'group':_0x1e7be3['id'][_0x484466(0x83d)](_0x484466(0x5e5)),'name':_0x1e7be3[_0x484466(0x41c)]||_0x1e7be3[_0x484466(0x511)]||null,'contactname':null,'lastmsg':_0x1e7be3[_0x484466(0x17a)]&&_0x1e7be3[_0x484466(0x17a)][_0x484466(0x7b1)]()['length']<0xd?_0x1e7be3['conversationTimestamp']*0x3e8:_0x1e7be3['conversationTimestamp']||null,'archived':_0x1e7be3[_0x484466(0x75b)]||!0x1,'unreadcount':_0x1e7be3[_0x484466(0x81b)]||0x0,'ephemeralExpiration':_0x1e7be3[_0x484466(0x5a1)]||0x0});this[_0x484466(0x43f)](_0x484466(0x657),_0x1dddae);},'chats.update':async(_0x4ec324,_0x263e26)=>{const _0x1450c3=_0x3518dd;for(let _0x6106bb of _0x4ec324){let _0x26d35c={'_id':_0x6106bb['id'],'owner':this[_0x1450c3(0x3f0)]['wuid'],'archived':_0x6106bb[_0x1450c3(0x75b)],'muteEndTime':_0x6106bb['muteEndTime'],'ephemeralExpiration':_0x6106bb[_0x1450c3(0x5a1)]},_0x12f216=!0x1,_0x172ae2={};_0x26d35c['archived']!=null&&(this[_0x1450c3(0x56b)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x1450c3(0x547)]+_0x1450c3(0x6c6)+_0x6106bb['id']+_0x1450c3(0x5ca)+_0x6106bb[_0x1450c3(0x75b)]),_0x12f216=!0x0,_0x172ae2['archived']=_0x6106bb['archived']),_0x1450c3(0x2a8)in _0x6106bb&&(this[_0x1450c3(0x56b)][_0x1450c3(0x608)](this[_0x1450c3(0x6dd)]+'\x20('+this[_0x1450c3(0x3f0)][_0x1450c3(0x547)]+_0x1450c3(0x204)+_0x6106bb['id']+_0x1450c3(0x5ca)+(_0x6106bb['muteEndTime']??'0')),_0x12f216=!0x0,_0x172ae2[_0x1450c3(0x2a8)]=_0x6106bb['muteEndTime']??0x0),_0x1450c3(0x5a1)in _0x6106bb&&(this[_0x1450c3(0x56b)][_0x1450c3(0x608)](this[_0x1450c3(0x6dd)]+'\x20('+this['instance']['wuid']+_0x1450c3(0x535)+_0x6106bb['id']+'\x20:\x20'+(_0x6106bb[_0x1450c3(0x5a1)]!==void 0x0?_0x6106bb[_0x1450c3(0x5a1)]:_0x1450c3(0x18f))),_0x172ae2[_0x1450c3(0x5a1)]=_0x6106bb['ephemeralExpiration']===null?0x0:_0x6106bb['ephemeralExpiration'],_0x12f216=!0x0);let _0x3b3ced;_0x12f216&&(_0x3b3ced=await this['repository']['chat'][_0x1450c3(0x743)]({'where':{'_id':_0x6106bb['id']}},_0x172ae2,this[_0x1450c3(0x3f0)][_0x1450c3(0x547)])),_0x3b3ced&&V(this[_0x1450c3(0x6dd)],_0x1450c3(0x795),{'chat':_0x3b3ced});}},'chats.delete':async _0x1f8c1a=>{const _0x1b05df=_0x3518dd;for(let _0x3774e3 of _0x1f8c1a)if(_0x3774e3['endsWith'](_0x1b05df(0x5e5))){await this[_0x1b05df(0x7fa)][_0x1b05df(0x739)][_0x1b05df(0x8a2)]({'where':{'_id':_0x3774e3}},this[_0x1b05df(0x3f0)]['wuid']);let _0x10be8e={'where':{'key':{'remoteJid':_0x3774e3}}};await this['repository'][_0x1b05df(0x4f4)]['delete'](_0x10be8e,this['instance']['wuid']);}else{await this[_0x1b05df(0x7fa)][_0x1b05df(0x739)]['updateOne']({'where':{'_id':_0x3774e3}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x1b05df(0x547)]);let _0xd02987={'where':{'key':{'remoteJid':_0x3774e3}}};await this['repository']['message']['delete'](_0xd02987,this[_0x1b05df(0x3f0)][_0x1b05df(0x547)]);}this[_0x1b05df(0x43f)](_0x1b05df(0x6d5),[..._0x1f8c1a]);}},this[_0x3518dd(0x2ff)]={'contacts.upsert':async(_0x5e1b13,_0x1551e8)=>{const _0x32a2e0=_0x3518dd;let _0xcb4850=await this['repository'][_0x32a2e0(0x821)][_0x32a2e0(0x2d4)]({'where':{}},this[_0x32a2e0(0x3f0)][_0x32a2e0(0x547)]),_0x3d7857=[];for await(let _0x5d253f of _0x5e1b13)_0xcb4850[_0x32a2e0(0x2d4)](_0x217f16=>_0x217f16[_0x32a2e0(0x4a6)]===_0x5d253f['id'])||_0x3d7857[_0x32a2e0(0x59a)]({'_id':_0x5d253f['id'],'pushName':_0x5d253f?.[_0x32a2e0(0x41c)]||_0x5d253f?.['verifiedName'],'owner':this[_0x32a2e0(0x3f0)]['wuid']});this[_0x32a2e0(0x43f)](_0x32a2e0(0x5d8),_0x3d7857),await this['repository'][_0x32a2e0(0x821)][_0x32a2e0(0x772)](_0x3d7857);},'contacts.update':async(_0x29ebf3,_0x2a5562)=>{const _0x45ab4a=_0x3518dd;let _0x1a541f=[];for await(let _0x2c7294 of _0x29ebf3)_0x1a541f[_0x45ab4a(0x59a)]({'_id':_0x2c7294['id'],'pushName':_0x2c7294?.[_0x45ab4a(0x41c)]??_0x2c7294?.[_0x45ab4a(0x826)],'owner':this['instance']['wuid']});this['sendDataWebhook'](_0x45ab4a(0x744),_0x1a541f);}},this[_0x3518dd(0x4e2)]={'messaging-history.set':async({messages:_0xfe1f0f,chats:_0x333813,isLatest:_0x3d88f3},_0x285cb1)=>{const _0x10fd07=_0x3518dd;if(_0x3d88f3){let _0x45d4d3=await Promise['all'](_0x333813['map'](async _0xc8d2b5=>({'_id':_0xc8d2b5['id'],'owner':this[_0x10fd07(0x3f0)]['wuid'],'group':_0xc8d2b5['id'][_0x10fd07(0x83d)](_0x10fd07(0x5e5)),'name':_0xc8d2b5[_0x10fd07(0x41c)]||_0xc8d2b5['displayName']||_0xc8d2b5[_0x10fd07(0x3e8)]||null,'contactname':null,'lastmsg':_0xc8d2b5[_0x10fd07(0x17a)]&&_0xc8d2b5[_0x10fd07(0x17a)][_0x10fd07(0x7b1)]()['length']<0xd?_0xc8d2b5[_0x10fd07(0x17a)]*0x3e8:_0xc8d2b5[_0x10fd07(0x17a)]||null,'archived':_0xc8d2b5[_0x10fd07(0x75b)]||!0x1,'unreadcount':_0xc8d2b5[_0x10fd07(0x81b)]||0x0,'ephemeralExpiration':_0xc8d2b5[_0x10fd07(0x5a1)]||0x0,'muteEndTime':_0xc8d2b5[_0x10fd07(0x2a8)]||0x0})));this['sendDataWebhook']('chats.set',_0x45d4d3),await this[_0x10fd07(0x23a)](_0x45d4d3,_0x285cb1);}let _0x31f6e8=[],_0x139c8a=Date[_0x10fd07(0x7d1)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x11a019]of Object[_0x10fd07(0x327)](_0xfe1f0f)){if(_0x11a019['message']?.[_0x10fd07(0x52b)]||_0x11a019[_0x10fd07(0x4f4)]?.['senderKeyDistributionMessage']||!_0x11a019[_0x10fd07(0x4f4)]||_0x11a019[_0x10fd07(0x74a)][_0x10fd07(0x509)]===_0x10fd07(0x754)||(ks[_0x10fd07(0x678)][_0x10fd07(0x53c)](_0x11a019?.[_0x10fd07(0x684)])&&(_0x11a019['messageTimestamp']=_0x11a019[_0x10fd07(0x684)]?.[_0x10fd07(0x3f9)]()),_0x11a019[_0x10fd07(0x684)]&&_0x11a019[_0x10fd07(0x684)][_0x10fd07(0x7b1)]()['length']<0xd&&(_0x11a019[_0x10fd07(0x684)]=_0x11a019['messageTimestamp']*0x3e8),_0x11a019[_0x10fd07(0x684)]<_0x139c8a))continue;let _0x514680=(0x0,w[_0x10fd07(0x419)])(_0x11a019[_0x10fd07(0x4f4)]),_0x3360ef=(0x0,w['getContentType'])(_0x514680),{message_normalized:_0x5553d9}=this['normalizeMessage'](_0x514680,_0x3360ef,null);Object['keys'](_0x5553d9)[_0x10fd07(0x532)]>0x0&&_0x31f6e8[_0x10fd07(0x59a)]({'_id':_0x11a019[_0x10fd07(0x74a)]['id'],'key':_0x11a019[_0x10fd07(0x74a)],'pushName':_0x11a019[_0x10fd07(0x388)],'participant':_0x11a019[_0x10fd07(0x489)],'message':_0x514680,'messageType':_0x3360ef,'message_normalized':{'key':_0x11a019[_0x10fd07(0x74a)],'pushName':_0x11a019[_0x10fd07(0x388)],'messageTimestamp':_0x11a019[_0x10fd07(0x684)],..._0x5553d9},'messageTimestamp':_0x11a019[_0x10fd07(0x684)],'owner':this[_0x10fd07(0x3f0)][_0x10fd07(0x547)]});}_0x285cb1[_0x10fd07(0x325)]&&_0x31f6e8['length']>0x0&&(this[_0x10fd07(0x56b)][_0x10fd07(0x608)](this['instanceName']+'\x20('+this[_0x10fd07(0x3f0)][_0x10fd07(0x547)]+_0x10fd07(0x3a3)+_0x31f6e8['length']+_0x10fd07(0x2e2)+this[_0x10fd07(0x3f0)][_0x10fd07(0x547)]+_0x10fd07(0x643)),await this['repository'][_0x10fd07(0x4f4)][_0x10fd07(0x772)]([..._0x31f6e8],this[_0x10fd07(0x3f0)]['wuid'])),this['sendDataWebhook'](_0x10fd07(0x224),[..._0x31f6e8]),_0xfe1f0f=void 0x0;},'messages.upsert':async({messages:_0x1d2b24,type:_0x54e48a},_0x270d1c)=>{const _0x5253ad=_0x3518dd;for(let _0x30f390 of _0x1d2b24){if(this['localWebhook']?.['groups_ignore']&&_0x30f390[_0x5253ad(0x74a)][_0x5253ad(0x509)]['includes'](_0x5253ad(0x5e5))){this[_0x5253ad(0x56b)]['verbose'](this['instanceName']+'\x20('+this[_0x5253ad(0x3f0)][_0x5253ad(0x547)]+'):\x20[messages.upsert]\x20group\x20ignored');return;}if(_0x54e48a!=='notify'||!_0x30f390?.[_0x5253ad(0x4f4)]||_0x30f390[_0x5253ad(0x4f4)]?.['protocolMessage']||_0x30f390[_0x5253ad(0x4f4)][_0x5253ad(0x692)]||_0x30f390[_0x5253ad(0x74a)]['remoteJid']===_0x5253ad(0x754))return;let _0x5d7a9f=null,_0x3a2ed0=null;if(_0x30f390[_0x5253ad(0x464)]&&_0x30f390[_0x5253ad(0x464)][0x0]==_0x5253ad(0x4b0)){console[_0x5253ad(0x2b1)]('[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação'),jt[_0x30f390[_0x5253ad(0x74a)]['id']]=_0x30f390,this[_0x5253ad(0x264)](_0x30f390,0x0);return;}jt[_0x30f390[_0x5253ad(0x74a)]['id']]&&(console[_0x5253ad(0x2b1)](_0x5253ad(0x2db)),delete jt[_0x30f390['key']['id']]);try{_0x5d7a9f=await this[_0x5253ad(0x565)](_0x30f390),_0x3a2ed0=_0x5d7a9f?_0x5d7a9f['join'](','):null;}catch(_0x27ec04){this[_0x5253ad(0x56b)][_0x5253ad(0x608)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x5253ad(0x3a3)+(_0x27ec04 instanceof Error?_0x27ec04[_0x5253ad(0x4f4)]:JSON[_0x5253ad(0x179)](_0x27ec04,null,0x2))),_0x3a2ed0='error\x20get\x20vote';}this[_0x5253ad(0x2cc)][_0x5253ad(0x4a9)](_0x5253ad(0x3ac)),ks[_0x5253ad(0x678)][_0x5253ad(0x53c)](_0x30f390[_0x5253ad(0x684)])&&(_0x30f390[_0x5253ad(0x684)]=_0x30f390[_0x5253ad(0x684)]?.[_0x5253ad(0x3f9)]()),_0x30f390[_0x5253ad(0x684)]&&_0x30f390[_0x5253ad(0x684)]['toString']()[_0x5253ad(0x532)]<0xd&&(_0x30f390[_0x5253ad(0x684)]=_0x30f390[_0x5253ad(0x684)]*0x3e8);let _0x5817b1=_0x30f390['message'],_0x25946c=(0x0,w[_0x5253ad(0x419)])(_0x5817b1),_0x419cd0=(0x0,w[_0x5253ad(0x5cf)])(_0x25946c),{messageContent:_0x1b3ade,message_normalized:_0x110d6a}=this[_0x5253ad(0x713)](_0x25946c,_0x419cd0,_0x3a2ed0);_0x419cd0==='protocolMessage'&&_0x1b3ade?.['editedMessage']&&(_0x419cd0='editedMessage');let _0x163c19,_0xb4dec6=_0x30f390[_0x5253ad(0x74a)][_0x5253ad(0x509)][_0x5253ad(0x83d)](_0x5253ad(0x5e5));if(_0x30f390[_0x5253ad(0x74a)][_0x5253ad(0x751)])_0x163c19=this[_0x5253ad(0x3f0)]['profilePictureUrl'];else{let _0x3e2bd2=_0xb4dec6?_0x30f390[_0x5253ad(0x74a)]['participant']:_0x30f390['key'][_0x5253ad(0x509)];_0x163c19=(await this[_0x5253ad(0x4b7)](_0x3e2bd2,_0x30f390[_0x5253ad(0x388)],!0x1))[_0x5253ad(0x6bc)][_0x5253ad(0x559)];}let _0x374e52={'_id':_0x30f390[_0x5253ad(0x74a)]['id'],'key':_0x30f390[_0x5253ad(0x74a)],'isGroup':_0xb4dec6,'profilePictureUrl':_0x163c19,'pushName':_0x30f390['pushName'],'message':_0x25946c,'messageType':_0x419cd0,'message_normalized':{'key':_0x30f390[_0x5253ad(0x74a)],'pushName':_0x30f390['pushName'],'messageTimestamp':_0x30f390[_0x5253ad(0x684)],'source':(0x0,w[_0x5253ad(0x759)])(_0x30f390[_0x5253ad(0x74a)]['id']),..._0x110d6a},'messageTimestamp':_0x30f390[_0x5253ad(0x684)],'owner':this['instance'][_0x5253ad(0x547)],'source':(0x0,w[_0x5253ad(0x759)])(_0x30f390['key']['id']),'expiration':_0x1b3ade?.[_0x5253ad(0x5f0)]?.[_0x5253ad(0x605)]||0x0};_0x1b3ade||(this[_0x5253ad(0x56b)][_0x5253ad(0x2b1)](_0x5253ad(0x389)),this['logger']['error'](_0x374e52)),this[_0x5253ad(0x56b)][_0x5253ad(0x2a9)](this[_0x5253ad(0x6dd)]+'\x20('+this['instance'][_0x5253ad(0x547)]+_0x5253ad(0x3a3)+(_0x374e52[_0x5253ad(0x74a)]?.[_0x5253ad(0x751)]?_0x5253ad(0x88b):_0x5253ad(0x812))+'\x20['+_0x374e52[_0x5253ad(0x74a)]?.[_0x5253ad(0x509)][_0x5253ad(0x3d2)](_0x5253ad(0x4a7),'')+_0x5253ad(0x8a5)+_0x374e52[_0x5253ad(0x248)]+')'),_0x374e52['message_normalized']?.[_0x5253ad(0x6e4)]&&this[_0x5253ad(0x56b)][_0x5253ad(0x2a9)](_0x30f390[_0x5253ad(0x74a)]['id']+':\x20'+_0x374e52[_0x5253ad(0x5a5)]?.[_0x5253ad(0x6e4)]),await this[_0x5253ad(0x7fa)][_0x5253ad(0x4f4)]['insert']([_0x374e52],this[_0x5253ad(0x3f0)]['wuid']),this[_0x5253ad(0x43f)](_0x5253ad(0x7f6),_0x374e52),V(this['instanceName'],_0x5253ad(0x873),{'message':_0x374e52}),_0x30f390[_0x5253ad(0x74a)][_0x5253ad(0x509)]!==_0x5253ad(0x754)&&await this[_0x5253ad(0x37d)](_0x270d1c,_0x374e52,_0x5253ad(0x35c));}},'messages.update':async(_0x1680b4,_0x5990ae)=>{const _0x249538=_0x3518dd;let _0x1ed3e6={0x0:'ERROR',0x1:_0x249538(0x145),0x2:_0x249538(0x2a6),0x3:'DELIVERY_ACK',0x4:_0x249538(0x378),0x5:_0x249538(0x529)};for await(let {key:_0x196c44,update:_0x51063a}of _0x1680b4){if(this[_0x249538(0x7f8)]?.[_0x249538(0x775)]&&_0x196c44[_0x249538(0x509)][_0x249538(0x839)](_0x249538(0x5e5))){this[_0x249538(0x56b)]['verbose'](this['instanceName']+'\x20('+this[_0x249538(0x3f0)][_0x249538(0x547)]+_0x249538(0x446));return;}if(_0x196c44[_0x249538(0x509)]!==_0x249538(0x754)){let _0x505463=Date[_0x249538(0x7d1)](),_0x2e9a5e;_0x51063a[_0x249538(0x4f4)]===null&&_0x51063a['status']===void 0x0?_0x2e9a5e=_0x249538(0x414):_0x2e9a5e=_0x1ed3e6[_0x51063a[_0x249538(0x2f7)]];let _0x51bc03=_0x196c44[_0x249538(0x509)][_0x249538(0x3d2)](/:\d{1,2}@/g,'@'),_0x363e5d={..._0x196c44,'remoteJid':_0x51bc03,'status':_0x2e9a5e,'datetime':_0x505463,'owner':this[_0x249538(0x3f0)][_0x249538(0x547)]};this['sendDataWebhook'](_0x249538(0x6e5),_0x363e5d),await this[_0x249538(0x48e)](_0x196c44,_0x363e5d);}}},'labels.association':async({type:_0x4f7a73,association:_0x308593})=>{const _0xee932b=_0x3518dd;if(_0x308593[_0xee932b(0x536)]===_0xee932b(0x6d1)){let _0x4befaa,_0x115d8f=0x0;for(;!_0x4befaa&&_0x115d8f<this[_0xee932b(0x560)];)_0x4befaa=await this['repository'][_0xee932b(0x739)][_0xee932b(0x640)]({'where':{'_id':_0x308593[_0xee932b(0x27a)]}},this[_0xee932b(0x3f0)][_0xee932b(0x547)]),_0x4befaa||(_0x115d8f++,this[_0xee932b(0x56b)][_0xee932b(0x1d2)](this[_0xee932b(0x6dd)]+'\x20('+this['instance'][_0xee932b(0x547)]+_0xee932b(0x4f3)+_0x308593[_0xee932b(0x27a)]+'\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20'+this[_0xee932b(0x251)]+_0xee932b(0x81a)+_0x115d8f+'/'+this[_0xee932b(0x560)]+')'),await this[_0xee932b(0x4c0)](this['delayChatLabel_RETRY_DELAY_MS']));if(!_0x4befaa){this[_0xee932b(0x56b)][_0xee932b(0x2b1)]('Falhou\x20ao\x20encontrar\x20chat\x20'+_0x308593[_0xee932b(0x27a)]+_0xee932b(0x7e1)+this[_0xee932b(0x560)]+_0xee932b(0x720));return;}switch(_0x4f7a73){case'add':console[_0xee932b(0x2a9)](_0x308593),await this[_0xee932b(0x7fa)][_0xee932b(0x739)][_0xee932b(0x743)]({'where':{'_id':_0x308593[_0xee932b(0x27a)]}},{'leadInfo.etiquetas':_0x308593[_0xee932b(0x397)]},this['instance']['wuid'],void 0x0,_0xee932b(0x58d));break;case'remove':console['log'](_0x308593),await this[_0xee932b(0x7fa)][_0xee932b(0x739)][_0xee932b(0x743)]({'where':{'_id':_0x308593[_0xee932b(0x27a)]}},{'leadInfo.etiquetas':_0x308593['labelId']},this[_0xee932b(0x3f0)][_0xee932b(0x547)],void 0x0,_0xee932b(0x61f));break;default:this[_0xee932b(0x56b)]['error'](_0xee932b(0x78b)+_0x4f7a73+']');}}},'labels.edit':async _0x5df108=>{const _0x2bffa0=_0x3518dd;if(!_0x5df108||!_0x5df108['id']){this[_0x2bffa0(0x56b)][_0x2bffa0(0x2b1)](_0x2bffa0(0x796));return;}if(!_0x5df108[_0x2bffa0(0x2d2)]){let _0x6785ed=['#ff9484',_0x2bffa0(0x3ea),'#fed428',_0x2bffa0(0x809),'#9ab6c1',_0x2bffa0(0x7ec),_0x2bffa0(0x74b),_0x2bffa0(0x33e),'#6f7bcf',_0x2bffa0(0x57c),'#01d0e2',_0x2bffa0(0x895),_0x2bffa0(0x5fa),_0x2bffa0(0x595),'#00a1f2','#83e421',_0x2bffa0(0x432),'#b4ebff',_0x2bffa0(0x542),_0x2bffa0(0x411)],_0x58130b;typeof _0x5df108[_0x2bffa0(0x4e8)]=='number'&&_0x5df108[_0x2bffa0(0x4e8)]>=0x0&&_0x5df108['color']<_0x6785ed[_0x2bffa0(0x532)]?_0x58130b=_0x6785ed[_0x5df108['color']]:(this['logger'][_0x2bffa0(0x2b1)]('Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20'+_0x5df108['color']),_0x58130b='#000000');let _0x2dbbc3={'_id':_0x5df108['id'],'colorHex':_0x58130b,'color':_0x5df108?.['color'],'name':_0x5df108?.[_0x2bffa0(0x41c)],'owner':this['instance']['wuid']};await this[_0x2bffa0(0x7fa)][_0x2bffa0(0x750)][_0x2bffa0(0x743)]({'where':{'_id':_0x5df108['id']}},_0x2dbbc3,this[_0x2bffa0(0x3f0)][_0x2bffa0(0x547)]),this[_0x2bffa0(0x56b)][_0x2bffa0(0x1d2)](this[_0x2bffa0(0x6dd)]+'\x20('+this['instance'][_0x2bffa0(0x547)]+'):\x20Rótulo\x20atualizado:\x20'+_0x5df108);}_0x5df108[_0x2bffa0(0x2d2)]&&(await this['repository']['label'][_0x2bffa0(0x8a2)]({'where':{'_id':_0x5df108['id']}},this[_0x2bffa0(0x3f0)][_0x2bffa0(0x547)]),this[_0x2bffa0(0x56b)]['info'](_0x2bffa0(0x87b)+_0x5df108['id']));}},this[_0x3518dd(0x3b4)]={'groups.upsert':async _0x42e451=>{const _0x168e62=_0x3518dd;this[_0x168e62(0x7f8)]?.['groups_ignore']||this['sendDataWebhook'](_0x168e62(0x671),_0x42e451);for(let _0x4c0adf of _0x42e451)await this[_0x168e62(0x86d)](_0x4c0adf);},'groups.update':async _0x34690b=>{const _0x267bab=_0x3518dd;this[_0x267bab(0x7f8)]?.['groups_ignore']||this['sendDataWebhook'](_0x267bab(0x4ec),_0x34690b);for(let _0x2a592d of _0x34690b)await this[_0x267bab(0x86d)](_0x2a592d);},'group-participants.update':async _0xa19b44=>{const _0x449707=_0x3518dd;this[_0x449707(0x7f8)]?.['groups_ignore']||this[_0x449707(0x43f)](_0x449707(0x3b1),_0xa19b44),await this[_0x449707(0x682)](_0xa19b44);}},this[_0x3518dd(0x560)]=0x5,this[_0x3518dd(0x251)]=0x1388,this[_0x3518dd(0x20e)]=0x0,this[_0x3518dd(0x565)]=async _0x4ee705=>{const _0x1ba1a1=_0x3518dd;if(_0x4ee705[_0x1ba1a1(0x4f4)]?.[_0x1ba1a1(0x43a)]){let _0x2f99b9=await this[_0x1ba1a1(0x4bb)](_0x4ee705['message']['pollUpdateMessage'][_0x1ba1a1(0x7f4)],!0x0);if(_0x2f99b9){let _0x3db7ac=_0x2f99b9['key']['fromMe']?this[_0x1ba1a1(0x3f0)][_0x1ba1a1(0x547)]+'@s.whatsapp.net':_0x2f99b9[_0x1ba1a1(0x74a)][_0x1ba1a1(0x489)]||_0x2f99b9[_0x1ba1a1(0x74a)][_0x1ba1a1(0x509)],_0x46f4fc=_0x2f99b9[_0x1ba1a1(0x74a)]['id'],_0x20a452=_0x2f99b9['message'],_0x3f3154=Buffer[_0x1ba1a1(0x724)](_0x20a452[_0x1ba1a1(0x6b4)][_0x1ba1a1(0x3d0)][_0x1ba1a1(0x7b1)](_0x1ba1a1(0x312)),_0x1ba1a1(0x312)),_0x29986d=(0x0,w[_0x1ba1a1(0x448)])(_0x4ee705['message']['pollUpdateMessage'][_0x1ba1a1(0x647)],{'pollCreatorJid':_0x3db7ac,'pollMsgId':_0x46f4fc,'pollEncKey':_0x3f3154,'voterJid':_0x4ee705[_0x1ba1a1(0x74a)][_0x1ba1a1(0x751)]?this['instance']['wuid']+'@s.whatsapp.net':_0x4ee705['key']['remoteJid'][_0x1ba1a1(0x83d)]('g.us')?_0x4ee705[_0x1ba1a1(0x74a)][_0x1ba1a1(0x489)]:_0x4ee705[_0x1ba1a1(0x74a)][_0x1ba1a1(0x509)]}),_0x5efbf6=[],_0x1aa704=_0x29986d[_0x1ba1a1(0x57e)][_0x1ba1a1(0x7a8)](_0x360e0c=>Buffer['from'](_0x360e0c)['toString'](_0x1ba1a1(0x312)));for(let {optionName:_0x4ebb53}of _0x20a452[_0x1ba1a1(0x34c)]?.['options']||_0x20a452['pollCreationMessageV3']?.[_0x1ba1a1(0x306)]||_0x20a452['pollCreationMessageV2']?.[_0x1ba1a1(0x306)])_0x1aa704[_0x1ba1a1(0x45a)]((0x0,w['sha256'])(Buffer[_0x1ba1a1(0x724)](_0x4ebb53))[_0x1ba1a1(0x7b1)]('hex'))>-0x1&&_0x5efbf6['push'](_0x4ebb53);return _0x5efbf6;}}return null;},this[_0x3518dd(0x713)]=(_0x536299,_0xb3abdb,_0x28992a)=>{const _0x176da7=_0x3518dd;try{let _0x30b425=_0x536299?(0x0,w['extractMessageContent'])(_0x536299)[_0xb3abdb]:void 0x0,_0x5774a2={},_0x202bfe=null,_0xa0ba2d=null,_0x147b76=null;_0xb3abdb===_0x176da7(0x52b)&&_0x30b425?.[_0x176da7(0x2de)]&&(_0xb3abdb=(0x0,w[_0x176da7(0x5cf)])(_0x30b425[_0x176da7(0x2de)]),_0x202bfe=_0x536299[_0x176da7(0x52b)][_0x176da7(0x74a)]['id'],_0x30b425=_0x536299['protocolMessage'][_0x176da7(0x2de)][_0xb3abdb]),_0x536299[_0xb3abdb]?.[_0x176da7(0x5f0)]?.[_0x176da7(0x508)]&&_0x536299[_0xb3abdb]?.[_0x176da7(0x5f0)]?.[_0x176da7(0x517)]&&(_0xa0ba2d=_0x536299[_0xb3abdb][_0x176da7(0x5f0)][_0x176da7(0x508)]),_0x536299[_0x176da7(0x4fa)]&&(_0x147b76=_0x536299[_0x176da7(0x4fa)][_0x176da7(0x74a)]['id']);let _0x4f83ac;if(_0x30b425&&typeof _0x30b425=='object'&&'pollCreationMessageKey'in _0x30b425&&({pollCreationMessageKey:_0x4f83ac}=_0x30b425),_0xb3abdb===_0x176da7(0x34c)||_0xb3abdb===_0x176da7(0x860)||_0xb3abdb===_0x176da7(0x320)){let _0x50fe04=_0x30b425[_0x176da7(0x306)][_0x176da7(0x7a8)](_0x2512f0=>_0x2512f0['optionName'])[_0x176da7(0x897)]('|');_0x5774a2[_0x176da7(0x626)]=_0x50fe04;}let _0x5e5e64='';if(_0x30b425&&(_0x5e5e64+=_0x30b425[_0x176da7(0x41c)]?_0x30b425['name']:'',_0x5e5e64+=_0x30b425[_0x176da7(0x572)]?'\x20'+_0x30b425['caption']:'',_0x5e5e64+=_0x30b425['conversation']?'\x20'+_0x30b425[_0x176da7(0x683)]:'',_0x5e5e64+=_0x30b425['displayName']?'\x20'+_0x30b425['displayName']:''),_0xb3abdb==='listMessage'){_0x5e5e64=(_0x30b425[_0x176da7(0x451)]||'')+'\x0a'+(_0x30b425[_0x176da7(0x44d)]||'')+'\x0a'+(_0x30b425[_0x176da7(0x5ed)]||'');let _0x32e127=this['sectionsToString'](_0x30b425[_0x176da7(0x76e)]);_0x5774a2[_0x176da7(0x626)]=_0x32e127;}if(_0xb3abdb===_0x176da7(0x7ac)&&(_0x28992a=_0x30b425[_0x176da7(0x451)]),_0x30b425&&_0x30b425['vcard']){let _0x49dc5d=this[_0x176da7(0x34f)](JSON[_0x176da7(0x179)](_0x30b425[_0x176da7(0x3d9)],null,0x2));_0x5e5e64=_0x5e5e64+'\x0a'+_0x49dc5d;}if(_0x30b425){let {sections:_0x19d0d5,listType:_0xfc4ca6,displayName:_0x13bc38,vcard:_0x5406b4,contactVcard:_0x58aee7,name:_0x215c1d,caption:_0x474dbb,conversation:_0x2e1c6b,pollCreationMessageKey:_0x5b9485,footerText:_0x26e6d6,contentText:_0x4b2e0f,pageCount:_0x3cb158,headerType:_0x327c22,isAvatar:_0x5a029d,isAnimated:_0x12b46d,fallbackLc:_0x53e53e,fallbackLg:_0x45de36,namespace:_0x482421,elementName:_0x31e83f,localizableParams:_0x233867,viewOnce:_0x51fb4a,height:_0x1a9697,width:_0x555bdc,key:_0x4f44ff,firstScanLength:_0x3566fd,firstScanSidecar:_0x4edb83,gifPlayback:_0x5fb33b,gifAttribution:_0x5dda75,midQualityFileSha256:_0x4591bb,scansSidecar:_0x2a696d,streamingSidecar:_0x591cee,thumbnailHeight:_0x2b9c64,thumbnailWidth:_0x5a74c0,thumbnailEncSha256:_0x4b90d8,thumbnailDirectPath:_0x5758d0,canonicalUrl:_0x3c8f23,matchedText:_0x4ec996,previewType:_0x10cdcf,thumbnailSha256:_0x27b1aa,deviceListMetadataVersion:_0x2b444a,inviteLinkGroupTypeV2:_0x2b1649,interactiveAnnotations:_0x5daede,scanLengths:_0x4c37ab,jpegThumbnail:_0x20091c,url:_0x993ae6,mediaKeyTimestamp:_0x563484,waveform:_0x5c397a,stickerSentTs:_0x1585f7,firstFrameLength:_0x249c19,fileEncSha256:_0x25c140,contextInfo:_0x1aa753,firstFrameSidecar:_0x5a8c31,directPath:_0x4b48,fileSha256:_0x25dbc3,mediaKey:_0x4add06,senderTimestampMs:_0x5262e8,..._0x349f69}=_0x30b425;(_0xb3abdb===_0x176da7(0x67a)||_0xb3abdb===_0x176da7(0x7ac))&&(delete _0x349f69[_0x176da7(0x451)],delete _0x349f69['description']),typeof _0x30b425==_0x176da7(0x2a0)?_0x5774a2={'text':_0x30b425,'type':_0xb3abdb||_0x176da7(0x683),..._0x202bfe&&{'edited':_0x202bfe},..._0xa0ba2d&&{'quoted':_0xa0ba2d},..._0x147b76&&{'reaction':_0x147b76}}:_0x5774a2={'text':_0x5e5e64,..._0x349f69,..._0xb3abdb===_0x176da7(0x43a)?{'poll_id':_0x30b425[_0x176da7(0x7f4)]['id'],'quoted':_0x30b425['pollCreationMessageKey']['id'],'vote':_0x28992a}:{},..._0xb3abdb==='listResponseMessage'?{'vote':_0x28992a}:{},'type':_0xb3abdb,..._0x202bfe&&{'edited':_0x202bfe},..._0xa0ba2d&&{'quoted':_0xa0ba2d},..._0x147b76&&{'reaction':_0x147b76},...(_0xb3abdb==='pollCreationMessage'||_0xb3abdb===_0x176da7(0x860)||_0xb3abdb===_0x176da7(0x320)||_0xb3abdb===_0x176da7(0x67a))&&{'convertedOptions':_0x5774a2[_0x176da7(0x626)]}};}return{'messageType':_0xb3abdb,'messageContent':_0x30b425,'message_normalized':_0x5774a2};}catch(_0x3d9249){return this[_0x176da7(0x56b)][_0x176da7(0x2b1)]('Erro\x20ao\x20normalizar\x20a\x20mensagem:'+_0x3d9249),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this[_0x3518dd(0x450)]=[],this['nextMessageId']=null,this[_0x3518dd(0x1af)]=null,(this[_0x3518dd(0x7eb)](),this[_0x3518dd(0x3f0)][_0x3518dd(0x507)]={'count':0x0},this[_0x3518dd(0x3f0)][_0x3518dd(0x3e9)]={'isConnected':!0x1,'delayMessage':null,'processingGroup_id':null,'lastSend':0x0,'timeout':null,'lastMessage_id':null});}set[a0_0x5ca971(0x6dd)](_0x57cd4e){const _0x3db532=a0_0x5ca971;if(!_0x57cd4e){this[_0x3db532(0x3f0)]['name']=(0x0,_i['v4'])();return;}this[_0x3db532(0x3f0)][_0x3db532(0x41c)]=_0x57cd4e,this[_0x3db532(0x43f)](_0x3db532(0x614),{'instance':this[_0x3db532(0x3f0)][_0x3db532(0x41c)],'status':'created'});}get[a0_0x5ca971(0x6dd)](){const _0x17d1fb=a0_0x5ca971;return this[_0x17d1fb(0x3f0)][_0x17d1fb(0x41c)];}get['wuid'](){const _0x49efbf=a0_0x5ca971;return this[_0x49efbf(0x3f0)]['wuid'];}async['getProfileName'](){const _0x25efd9=a0_0x5ca971;let _0xb5d69b=this['client'][_0x25efd9(0x732)]?.[_0x25efd9(0x41c)]??this[_0x25efd9(0x2cc)][_0x25efd9(0x732)]?.[_0x25efd9(0x826)];if(!_0xb5d69b){if(this['configService'][_0x25efd9(0x76d)](_0x25efd9(0x868))[_0x25efd9(0x325)]){let _0x23ab0c=await R[_0x25efd9(0x40e)]()['db'](this[_0x25efd9(0x601)][_0x25efd9(0x76d)](_0x25efd9(0x868))['CONNECTION']['DB_PREFIX_NAME']+_0x25efd9(0x57a))['collection'](this[_0x25efd9(0x6dd)])[_0x25efd9(0x640)]({'_id':_0x25efd9(0x6df)});if(_0x23ab0c){let _0x5ac408=JSON[_0x25efd9(0x1c3)](JSON[_0x25efd9(0x179)](_0x23ab0c),w[_0x25efd9(0x1bf)][_0x25efd9(0x165)]);_0xb5d69b=_0x5ac408['me']?.[_0x25efd9(0x41c)]||_0x5ac408['me']?.[_0x25efd9(0x826)];}}else{if((0x0,Le[_0x25efd9(0x5d1)])((0x0,J['join'])(Se,this[_0x25efd9(0x6dd)],_0x25efd9(0x757)))){let _0x3632b4=JSON['parse']((0x0,Le['readFileSync'])((0x0,J[_0x25efd9(0x897)])(Se,this[_0x25efd9(0x6dd)],'creds.json'),{'encoding':_0x25efd9(0x144)}));_0xb5d69b=_0x3632b4['me']?.[_0x25efd9(0x41c)]||_0x3632b4['me']?.['verifiedName'];}}}return _0xb5d69b;}get[a0_0x5ca971(0x84f)](){const _0x2f3743=a0_0x5ca971;return this[_0x2f3743(0x3f0)][_0x2f3743(0x84f)];}get[a0_0x5ca971(0x7ee)](){const _0x5cb1b=a0_0x5ca971;return this[_0x5cb1b(0x3f0)][_0x5cb1b(0x507)]?.['pairingCode']?{'pairingCode':this[_0x5cb1b(0x3f0)][_0x5cb1b(0x507)]?.[_0x5cb1b(0x39c)]}:{'code':this[_0x5cb1b(0x3f0)][_0x5cb1b(0x507)]?.[_0x5cb1b(0x339)],'base64':this[_0x5cb1b(0x3f0)][_0x5cb1b(0x507)]?.[_0x5cb1b(0x1d9)]};}async['loadWebhook'](){const _0x1f35db=a0_0x5ca971;let _0x3fd794=await this[_0x1f35db(0x7fa)][_0x1f35db(0x412)][_0x1f35db(0x2d4)](this[_0x1f35db(0x6dd)]);this[_0x1f35db(0x7f8)][_0x1f35db(0x768)]=_0x3fd794?.[_0x1f35db(0x768)],this[_0x1f35db(0x7f8)][_0x1f35db(0x80e)]=_0x3fd794?.[_0x1f35db(0x80e)],this['localWebhook']['local_map']=_0x3fd794?.[_0x1f35db(0x842)],this[_0x1f35db(0x7f8)]['STATUS_INSTANCE']=_0x3fd794?.[_0x1f35db(0x178)],this['localWebhook'][_0x1f35db(0x580)]=_0x3fd794?.[_0x1f35db(0x580)],this['localWebhook'][_0x1f35db(0x5b3)]=_0x3fd794?.[_0x1f35db(0x5b3)],this['localWebhook'][_0x1f35db(0x35c)]=_0x3fd794?.[_0x1f35db(0x35c)],this[_0x1f35db(0x7f8)][_0x1f35db(0x718)]=_0x3fd794?.[_0x1f35db(0x718)],this[_0x1f35db(0x7f8)][_0x1f35db(0x351)]=_0x3fd794?.[_0x1f35db(0x351)],this[_0x1f35db(0x7f8)][_0x1f35db(0x65f)]=_0x3fd794?.['GROUPS_UPDATE'],this['localWebhook'][_0x1f35db(0x6c1)]=_0x3fd794?.[_0x1f35db(0x6c1)],this[_0x1f35db(0x7f8)][_0x1f35db(0x439)]=_0x3fd794?.[_0x1f35db(0x439)],this[_0x1f35db(0x7f8)][_0x1f35db(0x38f)]=_0x3fd794?.[_0x1f35db(0x38f)],this[_0x1f35db(0x7f8)]['CHATS_UPDATE']=_0x3fd794?.[_0x1f35db(0x15e)],this[_0x1f35db(0x7f8)][_0x1f35db(0x318)]=_0x3fd794?.[_0x1f35db(0x318)],this[_0x1f35db(0x7f8)]['CONTACTS_SET']=_0x3fd794?.[_0x1f35db(0x5d2)],this[_0x1f35db(0x7f8)][_0x1f35db(0x23d)]=_0x3fd794?.[_0x1f35db(0x23d)],this[_0x1f35db(0x7f8)]['CONTACTS_UPDATE']=_0x3fd794?.[_0x1f35db(0x20a)],this[_0x1f35db(0x7f8)][_0x1f35db(0x7c8)]=_0x3fd794?.[_0x1f35db(0x7c8)],this[_0x1f35db(0x7f8)][_0x1f35db(0x620)]=_0x3fd794?.[_0x1f35db(0x620)],this[_0x1f35db(0x7f8)]['CONNECTION_UPDATE']=_0x3fd794?.['CONNECTION_UPDATE'],this[_0x1f35db(0x7f8)][_0x1f35db(0x775)]=_0x3fd794?.['groups_ignore'];}async[a0_0x5ca971(0x602)](_0x2234a9){const _0x1f7200=a0_0x5ca971;let _0xb109cf=['_id',_0x1f7200(0x768),_0x1f7200(0x80e),_0x1f7200(0x842),'STATUS_INSTANCE',_0x1f7200(0x580),_0x1f7200(0x718),_0x1f7200(0x35c),_0x1f7200(0x5b3),_0x1f7200(0x351),_0x1f7200(0x65f),_0x1f7200(0x6c1),'CHATS_SET',_0x1f7200(0x38f),_0x1f7200(0x15e),'CHATS_DELETE',_0x1f7200(0x5d2),'CONTACTS_UPSERT','CONTACTS_UPDATE',_0x1f7200(0x7c8),_0x1f7200(0x620),_0x1f7200(0x665),_0x1f7200(0x775)],_0x5d2c81={};return _0xb109cf['forEach'](_0x2559e2=>{_0x2234a9[_0x2559e2]!==void 0x0&&(_0x5d2c81[_0x2559e2]=_0x2234a9[_0x2559e2]);}),_0x5d2c81[_0x1f7200(0x768)]&&(_0x5d2c81[_0x1f7200(0x768)]=_0x5d2c81[_0x1f7200(0x768)][_0x1f7200(0x56d)]()),await this[_0x1f7200(0x7fa)]['webhook'][_0x1f7200(0x226)](_0x5d2c81,this[_0x1f7200(0x6dd)]),Object[_0x1f7200(0x202)](this['localWebhook'],_0x5d2c81),await this[_0x1f7200(0x7fa)][_0x1f7200(0x412)][_0x1f7200(0x2d4)](this[_0x1f7200(0x6dd)]);}async['findWebhook'](){const _0x367a6f=a0_0x5ca971;return await this[_0x367a6f(0x7fa)][_0x367a6f(0x412)][_0x367a6f(0x2d4)](this['instanceName']);}async[a0_0x5ca971(0x43f)](_0x4c53b0,_0x1adc1b){const _0x57b117=a0_0x5ca971;let _0x4203c6=_0x4c53b0[_0x57b117(0x3d2)](/[\.-]/gm,'_')[_0x57b117(0x6fb)](),_0x5ab720=this[_0x57b117(0x7f8)]['enabled']&&(0x0,L[_0x57b117(0x7ca)])(this['localWebhook']['url'])?this[_0x57b117(0x7f8)][_0x57b117(0x768)]+(this[_0x57b117(0x7f8)][_0x57b117(0x842)]?this[_0x57b117(0x481)][_0x4c53b0]:''):null,_0x1bb6a9=this[_0x57b117(0x7f8)][_0x4203c6],_0x3ffa2c=me&&me[_0x57b117(0x80e)]&&(0x0,L['isURL'])(me[_0x57b117(0x768)])?me[_0x57b117(0x768)]+(me[_0x57b117(0x842)]?this[_0x57b117(0x481)][_0x4c53b0]:''):null,_0x389cc6=me?me[_0x4203c6]:null;if(_0x1bb6a9&&_0x5ab720)try{await ee[_0x57b117(0x678)][_0x57b117(0x226)]({'baseURL':_0x5ab720})[_0x57b117(0x513)]('',{'event':_0x4c53b0,'instance':this['instance'][_0x57b117(0x41c)],'apikey':this[_0x57b117(0x3f0)][_0x57b117(0x5d5)],'data':_0x1adc1b}),this['logger'][_0x57b117(0x2a9)](this[_0x57b117(0x6dd)]+'\x20('+this[_0x57b117(0x3f0)][_0x57b117(0x547)]+_0x57b117(0x364)+_0x4c53b0+':\x20'+_0x5ab720);}catch{this[_0x57b117(0x56b)][_0x57b117(0x2b1)](this[_0x57b117(0x6dd)]+'\x20('+this['instance'][_0x57b117(0x547)]+_0x57b117(0x82d)+_0x4c53b0+':\x20'+_0x5ab720);}if(_0x389cc6&&_0x3ffa2c)try{await ee[_0x57b117(0x678)][_0x57b117(0x226)]({'baseURL':_0x3ffa2c})[_0x57b117(0x513)]('',{'event':_0x4c53b0,'instance':this[_0x57b117(0x3f0)][_0x57b117(0x41c)],'apikey':this[_0x57b117(0x3f0)]['apikey'],'data':_0x1adc1b}),this[_0x57b117(0x56b)]['log'](this['instanceName']+'\x20('+this['instance'][_0x57b117(0x547)]+_0x57b117(0x157)+_0x4c53b0+':\x20'+_0x3ffa2c);}catch{this['logger'][_0x57b117(0x2b1)](this[_0x57b117(0x6dd)]+'\x20('+this[_0x57b117(0x3f0)][_0x57b117(0x547)]+'):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20'+_0x4c53b0+':\x20'+_0x3ffa2c);}}async[a0_0x5ca971(0x349)]({qr:_0x4bc519,connection:_0x201e0c,lastDisconnect:_0xc01162,receivedPendingNotifications:_0x28db82}){const _0x2dd387=a0_0x5ca971;if(_0x4bc519){if(this['instance'][_0x2dd387(0x507)][_0x2dd387(0x594)]===Lo)return this[_0x2dd387(0x43f)]('qrcode.updated',{'message':_0x2dd387(0x27f),'statusCode':w['DisconnectReason'][_0x2dd387(0x3ff)]}),this[_0x2dd387(0x149)]={'state':_0x2dd387(0x6ba),'statusReason':w[_0x2dd387(0x470)][_0x2dd387(0x6d3)]},this['sendDataWebhook'](_0x2dd387(0x662),{'instance':this[_0x2dd387(0x3f0)][_0x2dd387(0x41c)],...this[_0x2dd387(0x149)]}),this[_0x2dd387(0x43f)](_0x2dd387(0x614),{'instance':this['instance'][_0x2dd387(0x41c)],'status':'removed'}),this[_0x2dd387(0x7fa)][_0x2dd387(0x6aa)][_0x2dd387(0x8a2)](this[_0x2dd387(0x3f0)][_0x2dd387(0x41c)]),this[_0x2dd387(0x393)]=!0x0,re[_0x2dd387(0x488)](K,this[_0x2dd387(0x3f0)][_0x2dd387(0x41c)]),this['eventEmitter']['emit']('no.connection',this[_0x2dd387(0x3f0)][_0x2dd387(0x41c)]);this[_0x2dd387(0x3f0)]['qrcode'][_0x2dd387(0x594)]++;let _0x2ecfd2={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':'#ffffff','dark':_0x2dd387(0x73f)}};Oi[_0x2dd387(0x678)]['toDataURL'](_0x4bc519,_0x2ecfd2,(_0x1c714e,_0x167e54)=>{const _0xda9825=_0x2dd387;if(_0x1c714e){this['logger'][_0xda9825(0x2b1)](this[_0xda9825(0x6dd)]+'\x20('+this[_0xda9825(0x3f0)][_0xda9825(0x547)]+'):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:'+(_0x1c714e instanceof Error?_0x1c714e['message']:JSON[_0xda9825(0x179)](_0x1c714e,null,0x2)));return;}this['instance'][_0xda9825(0x507)][_0xda9825(0x1d9)]=_0x167e54,this[_0xda9825(0x3f0)][_0xda9825(0x507)][_0xda9825(0x339)]=_0x4bc519,!this[_0xda9825(0x4ed)]&&this[_0xda9825(0x43f)]('qrcode.updated',{'qrcode':{'instance':this[_0xda9825(0x3f0)][_0xda9825(0x41c)],'pairingCode':this['instance'][_0xda9825(0x507)][_0xda9825(0x39c)],'code':_0x4bc519,'base64':_0x167e54}});}),this[_0x2dd387(0x4ed)]?this[_0x2dd387(0x3f0)][_0x2dd387(0x507)]['pairingCode']||(await(0x0,w[_0x2dd387(0x190)])(0x7d0),this['instance'][_0x2dd387(0x507)][_0x2dd387(0x39c)]=await this['client'][_0x2dd387(0x63f)](this['phoneNumber'])):this[_0x2dd387(0x3f0)][_0x2dd387(0x507)]['pairingCode']=null,xi[_0x2dd387(0x678)][_0x2dd387(0x290)](_0x4bc519,{'small':!0x0},_0xd25b82=>this['logger'][_0x2dd387(0x2a9)]('\x0a{\x20instance:\x20'+this['instance'][_0x2dd387(0x41c)]+_0x2dd387(0x497)+this[_0x2dd387(0x3f0)][_0x2dd387(0x507)][_0x2dd387(0x594)]+_0x2dd387(0x16f)+this[_0x2dd387(0x3f0)][_0x2dd387(0x507)][_0x2dd387(0x39c)]+_0x2dd387(0x43c)+_0xd25b82));}if(_0x201e0c&&(this[_0x2dd387(0x149)]={'state':_0x201e0c,'statusReason':_0xc01162?.[_0x2dd387(0x2b1)]?.[_0x2dd387(0x55a)]?.[_0x2dd387(0x32e)]??0xc8},this[_0x2dd387(0x43f)](_0x2dd387(0x662),{'instance':this[_0x2dd387(0x3f0)][_0x2dd387(0x41c)],...this['stateConnection']})),_0x201e0c===_0x2dd387(0x73e)){if(this[_0x2dd387(0x302)]++,this[_0x2dd387(0x872)][_0x2dd387(0x59a)](Date[_0x2dd387(0x7d1)]()),this[_0x2dd387(0x872)]=this[_0x2dd387(0x872)]['filter'](_0x42b506=>Date[_0x2dd387(0x7d1)]()-_0x42b506<this[_0x2dd387(0x384)]),_0xc01162[_0x2dd387(0x2b1)]?.[_0x2dd387(0x55a)]?.[_0x2dd387(0x32e)]!==w[_0x2dd387(0x470)][_0x2dd387(0x2ca)]){let _0x2c4ab8=this[_0x2dd387(0x302)]<=0x1?0x0:Math[_0x2dd387(0x244)](Math[_0x2dd387(0x4ea)](0x2,this[_0x2dd387(0x302)]-0x1)*0x3e8,0x493e0);console['log'](this['instanceName']+_0x2dd387(0x194)+this['reconnectAttempts']+_0x2dd387(0x68e)+_0x2c4ab8/0x3e8+_0x2dd387(0x246)),await new Promise(_0x44ea80=>setTimeout(_0x44ea80,_0x2c4ab8)),console['log'](_0x2dd387(0x15c)),await this['connectToWhatsapp']();}else{this[_0x2dd387(0x43f)]('status.instance',{'instance':this[_0x2dd387(0x3f0)][_0x2dd387(0x41c)],'status':'removed'}),this['instance'][_0x2dd387(0x3e9)]['isConnected']=!0x1,this[_0x2dd387(0x7fa)][_0x2dd387(0x412)][_0x2dd387(0x8a2)](this[_0x2dd387(0x6dd)]),this['repository'][_0x2dd387(0x6aa)][_0x2dd387(0x226)]({'owner':'','online':!0x1,'lastDisconnect':Date['now']()},this['instance']['name']),re[_0x2dd387(0x488)](K,this[_0x2dd387(0x3f0)]['name']);try{this[_0x2dd387(0x56b)][_0x2dd387(0x608)](this[_0x2dd387(0x6dd)]+'\x20('+this['instance'][_0x2dd387(0x547)]+'):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...');let _0x4086b1=await this[_0x2dd387(0x7fa)][_0x2dd387(0x4f4)][_0x2dd387(0x3c9)](this[_0x2dd387(0x3f0)][_0x2dd387(0x547)]);_0x4086b1[_0x2dd387(0x1e4)]?this[_0x2dd387(0x56b)][_0x2dd387(0x608)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.'):this[_0x2dd387(0x56b)][_0x2dd387(0x2b1)]('Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20'+_0x4086b1[_0x2dd387(0x2b1)]);}catch(_0x4a47ce){this[_0x2dd387(0x56b)][_0x2dd387(0x2b1)](_0x2dd387(0x1b4)+_0x4a47ce[_0x2dd387(0x4f4)]);}this[_0x2dd387(0x3f0)][_0x2dd387(0x3e9)][_0x2dd387(0x60d)]!==null&&(this['logger'][_0x2dd387(0x608)](this[_0x2dd387(0x6dd)]+'\x20('+this[_0x2dd387(0x3f0)][_0x2dd387(0x547)]+_0x2dd387(0x42b)),clearInterval(this[_0x2dd387(0x3f0)][_0x2dd387(0x3e9)][_0x2dd387(0x60d)]),this[_0x2dd387(0x3f0)]['ScheduleMessage'][_0x2dd387(0x60d)]=null),this['logger'][_0x2dd387(0x608)](this[_0x2dd387(0x6dd)]+'\x20('+this[_0x2dd387(0x3f0)]['wuid']+_0x2dd387(0x483)),this[_0x2dd387(0x755)]=null,this['eventEmitter'][_0x2dd387(0x816)](_0x2dd387(0x4b2),this[_0x2dd387(0x3f0)][_0x2dd387(0x41c)],_0x2dd387(0x7c1)),this[_0x2dd387(0x2cc)]?.['ws']?.[_0x2dd387(0x73e)](),this[_0x2dd387(0x2cc)][_0x2dd387(0x5fe)](new Error(_0x2dd387(0x477)));}}if(_0x201e0c===_0x2dd387(0x158)){this['logger']['warn'](this[_0x2dd387(0x6dd)]+'\x20('+this[_0x2dd387(0x3f0)][_0x2dd387(0x547)]+'):\x20this.client.authState.creds?.myAppStateKeyId:\x20'+this[_0x2dd387(0x2cc)][_0x2dd387(0x25c)][_0x2dd387(0x6df)]?.['myAppStateKeyId']),this[_0x2dd387(0x2cc)][_0x2dd387(0x25c)]['creds']?.[_0x2dd387(0x5c4)]||(this[_0x2dd387(0x56b)][_0x2dd387(0x38d)](this[_0x2dd387(0x6dd)]+'\x20('+this['instance'][_0x2dd387(0x547)]+_0x2dd387(0x3c2)),this['client']['ev'][_0x2dd387(0x466)]()),this[_0x2dd387(0x2d5)],this['instance'][_0x2dd387(0x547)]=this[_0x2dd387(0x2cc)][_0x2dd387(0x732)]['id'][_0x2dd387(0x3d2)](/:\d+/,'')[_0x2dd387(0x3d2)](_0x2dd387(0x4a7),''),this[_0x2dd387(0x3f0)][_0x2dd387(0x84f)]=(await this[_0x2dd387(0x674)](this['instance'][_0x2dd387(0x547)]+_0x2dd387(0x4a7)))[_0x2dd387(0x84f)],this['repository'][_0x2dd387(0x6aa)][_0x2dd387(0x226)]({'online':!0x0,'owner':this[_0x2dd387(0x3f0)]['wuid'],'lastDisconnect':null},this[_0x2dd387(0x3f0)][_0x2dd387(0x41c)]);let _0x385e54=_0x2dd387(0x73a)+this[_0x2dd387(0x3f0)]['wuid'],_0x3e03fe=0x28,_0x9a6c23=Math[_0x2dd387(0x7c4)]((_0x3e03fe-_0x385e54[_0x2dd387(0x532)])/0x2),_0x50c44c='\x20'[_0x2dd387(0x51f)](_0x9a6c23),_0x504762=_0x2dd387(0x216),_0x28ba93=_0x2dd387(0x79d)+this[_0x2dd387(0x3f0)]['name'],_0x2481c1=(''+_0x50c44c+_0x385e54+_0x50c44c)[_0x2dd387(0x76f)](_0x3e03fe,'\x20'),_0x56f9b1=(''+_0x50c44c+_0x504762+_0x50c44c)[_0x2dd387(0x76f)](_0x3e03fe,'\x20'),_0x56516a=(''+_0x50c44c+_0x28ba93+_0x50c44c)[_0x2dd387(0x76f)](_0x3e03fe,'\x20'),_0x4cdc6f=Math[_0x2dd387(0x2cf)](_0x2481c1['length'],_0x56f9b1[_0x2dd387(0x532)],_0x56516a[_0x2dd387(0x532)]),_0x3ce7b5=_0x2481c1[_0x2dd387(0x76f)](_0x4cdc6f,'\x20'),_0x109dbe=_0x56f9b1['padEnd'](_0x4cdc6f,'\x20'),_0x11b272=_0x56516a[_0x2dd387(0x76f)](_0x4cdc6f,'\x20');this['logger'][_0x2dd387(0x1d2)]((_0x2dd387(0x7cd)+'─'[_0x2dd387(0x51f)](_0x4cdc6f)+_0x2dd387(0x86a)+_0x109dbe+_0x2dd387(0x869)+_0x11b272+_0x2dd387(0x869)+_0x3ce7b5+_0x2dd387(0x40f)+'─'[_0x2dd387(0x51f)](_0x4cdc6f)+'┘')[_0x2dd387(0x3d2)](/^ +/gm,'\x20\x20')),this[_0x2dd387(0x383)](),this['instance'][_0x2dd387(0x3e9)][_0x2dd387(0x20d)]=!0x0;}}[a0_0x5ca971(0x2d5)](){const _0x558f8c=a0_0x5ca971;this[_0x558f8c(0x302)]=0x0,this[_0x558f8c(0x872)]=[];}async[a0_0x5ca971(0x4bb)](_0x5b36bc,_0x2cb080=!0x1){const _0x322146=a0_0x5ca971;try{let _0xd32f4c=await this['repository']['message']['find']({'where':{'_id':_0x5b36bc['id']}},this['instance'][_0x322146(0x547)]);return _0x2cb080?_0xd32f4c[0x0]:_0xd32f4c[0x0][_0x322146(0x4f4)];}catch{return{'conversation':''};}}[a0_0x5ca971(0x7eb)](){const _0xac3dda=a0_0x5ca971;let _0x204728=this[_0xac3dda(0x601)][_0xac3dda(0x76d)](_0xac3dda(0x58c)),_0x3267a0=this[_0xac3dda(0x601)][_0xac3dda(0x76d)]('DATABASE');_0x204728?.[_0xac3dda(0x81f)]&&!_0x3267a0['ENABLED']&&setInterval(()=>{const _0x542024=_0xac3dda;try{for(let [_0xc895e8,_0x389524]of Object[_0x542024(0x327)](_0x204728))_0x389524===!0x0&&(0x0,Fe[_0x542024(0x245)])(_0x542024(0x65a)+(0x0,J['join'])(this[_0x542024(0x35d)],_0xc895e8[_0x542024(0x763)](),this[_0x542024(0x3f0)][_0x542024(0x547)])+_0x542024(0x291));}catch{}},(_0x204728?.['CLEANING_INTERVAL']??0xe10)*0x3e8);}async[a0_0x5ca971(0x19b)](){const _0x1297eb=a0_0x5ca971;let _0x27dedf=this[_0x1297eb(0x601)][_0x1297eb(0x76d)](_0x1297eb(0x868)),_0x1d7bb9=this[_0x1297eb(0x601)][_0x1297eb(0x76d)](_0x1297eb(0x7da));return _0x1d7bb9?.[_0x1297eb(0x325)]?await Os(_0x1d7bb9,this['instance']['name']):_0x27dedf[_0x1297eb(0x325)]?await _s(this[_0x1297eb(0x3f0)][_0x1297eb(0x41c)]):await(0x0,w[_0x1297eb(0x7ba)])((0x0,J['join'])(Se,this['instance'][_0x1297eb(0x41c)]));}async[a0_0x5ca971(0x383)](){const _0x2e63fe=a0_0x5ca971;let _0x12bdad=()=>Math[_0x2e63fe(0x7c4)](Math[_0x2e63fe(0x541)]()*0x4e21)+0x7d0,_0x42efcb=async()=>{const _0x13f2a3=_0x2e63fe;if(!this['instance']['ScheduleMessage'][_0x13f2a3(0x20d)]){this[_0x13f2a3(0x56b)][_0x13f2a3(0x608)](this[_0x13f2a3(0x6dd)]+'\x20('+this[_0x13f2a3(0x3f0)][_0x13f2a3(0x547)]+_0x13f2a3(0x2a2)),this[_0x13f2a3(0x471)]=!0x1;return;}if(this[_0x13f2a3(0x3f0)]['wuid']&&this[_0x13f2a3(0x755)]&&this[_0x13f2a3(0x3f0)][_0x13f2a3(0x3e9)][_0x13f2a3(0x60d)]!==null&&this[_0x13f2a3(0x3f0)][_0x13f2a3(0x3e9)][_0x13f2a3(0x60d)]!==void 0x0){let _0x15fce2=Math[_0x13f2a3(0x865)](this[_0x13f2a3(0x3f0)][_0x13f2a3(0x3e9)][_0x13f2a3(0x60d)]/0xea60);this[_0x13f2a3(0x56b)]['verbose'](this[_0x13f2a3(0x6dd)]+'\x20('+this[_0x13f2a3(0x3f0)]['wuid']+_0x13f2a3(0x777)+_0x15fce2+_0x13f2a3(0x58e)),this[_0x13f2a3(0x471)]=!0x1;return;}else this[_0x13f2a3(0x3f0)][_0x13f2a3(0x547)]&&(this['logger'][_0x13f2a3(0x608)](this[_0x13f2a3(0x6dd)]+'\x20('+this[_0x13f2a3(0x3f0)]['wuid']+_0x13f2a3(0x26c)),this['AutomateSystem']||(await this[_0x13f2a3(0x2b9)](),this[_0x13f2a3(0x41e)](),this['synchronizeAndMapFlows']()),(this[_0x13f2a3(0x3f0)][_0x13f2a3(0x3e9)][_0x13f2a3(0x60d)]===null||this['instance'][_0x13f2a3(0x3e9)][_0x13f2a3(0x60d)]===void 0x0)&&await this[_0x13f2a3(0x77b)]());if(this['isRunning']){let _0x5aca9e=_0x12bdad();this[_0x13f2a3(0x56b)][_0x13f2a3(0x608)](this[_0x13f2a3(0x6dd)]+':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20'+_0x5aca9e/0x3e8+_0x13f2a3(0x85f)),setTimeout(_0x42efcb,_0x5aca9e);}};if(this['isRunning'])return;this[_0x2e63fe(0x471)]=!0x0;let _0x2616c4=_0x12bdad();setTimeout(_0x42efcb,_0x2616c4);}async[a0_0x5ca971(0x18c)](){const _0x2c532e=a0_0x5ca971;let _0x4ab77a=this['instance']['wuid'];try{let _0x4032bc=await this[_0x2c532e(0x7fa)][_0x2c532e(0x6da)][_0x2c532e(0x4aa)]({'where':{'$or':[{'owner':_0x4ab77a},{'whoCanUse':{'$in':[_0x4ab77a]}},{'shareOwners':{'$in':[_0x4ab77a]}}]}}),_0x4bea3c=new Map(this[_0x2c532e(0x755)]['flows'][_0x2c532e(0x7a8)](_0x3261c0=>[_0x3261c0[_0x2c532e(0x4a6)],_0x3261c0])),_0x227907=_0x4032bc[_0x2c532e(0x7a8)](_0x22f71=>{const _0x55d761=_0x2c532e;let _0x40bc2d=_0x4bea3c[_0x55d761(0x76d)](_0x22f71[_0x55d761(0x4a6)]?.['toString']());return{'_id':_0x22f71['_id']?.[_0x55d761(0x7b1)](),'name':_0x40bc2d?.[_0x55d761(0x41c)]??_0x22f71[_0x55d761(0x41c)],'default':_0x40bc2d?.[_0x55d761(0x678)]??_0x22f71[_0x55d761(0x678)]??!0x1,'startCommand':_0x40bc2d?.['startCommand']??_0x22f71['startCommandWord'],'minutesToClose':_0x40bc2d?.[_0x55d761(0x468)]??_0x22f71[_0x55d761(0x468)]??0xa,'readMessages':_0x40bc2d?.['readMessages']??_0x22f71[_0x55d761(0x1ed)]??!0x1,'testingWith':_0x40bc2d?.[_0x55d761(0x79e)]??_0x22f71[_0x55d761(0x79e)],'canEdit':_0x22f71[_0x55d761(0x42d)]===_0x4ab77a||(_0x22f71[_0x55d761(0x79f)]??[])[_0x55d761(0x839)](_0x4ab77a),'usersCount':(_0x22f71[_0x55d761(0x3df)]??[])[_0x55d761(0x532)]??0x0};}),_0x3772ec=!0x1;_0x227907[_0x2c532e(0x491)](_0x2f94e8=>{const _0x2060ec=_0x2c532e;_0x2f94e8[_0x2060ec(0x678)]&&(_0x3772ec?_0x2f94e8[_0x2060ec(0x678)]=!0x1:_0x3772ec=!0x0);}),this[_0x2c532e(0x755)][_0x2c532e(0x557)]=_0x227907;let _0x5ca6ce={'flows':_0x227907};return await this[_0x2c532e(0x7fa)]['automateSystem'][_0x2c532e(0x26b)](_0x5ca6ce,_0x4ab77a),this[_0x2c532e(0x56b)][_0x2c532e(0x608)](this[_0x2c532e(0x6dd)]+'\x20('+_0x4ab77a+_0x2c532e(0x717)),_0x227907[_0x2c532e(0x532)];}catch(_0xae9abb){return this[_0x2c532e(0x56b)]['error'](this[_0x2c532e(0x6dd)]+'\x20('+_0x4ab77a+_0x2c532e(0x2c1)+(_0xae9abb instanceof Error?_0xae9abb['message']:JSON['stringify'](_0xae9abb,null,0x2))),{'message':_0x2c532e(0x260)+(_0xae9abb instanceof Error?_0xae9abb[_0x2c532e(0x4f4)]:JSON[_0x2c532e(0x179)](_0xae9abb,null,0x2))};}}async[a0_0x5ca971(0x3d5)](_0x2b821c){const _0x123fad=a0_0x5ca971;try{let _0x41c67f=await this[_0x123fad(0x7fa)][_0x123fad(0x3f0)][_0x123fad(0x640)]({'where':{'_id':K+'-'+this[_0x123fad(0x6dd)]}}),_0x3c7204,_0x556f52=!re['ipv6Prefix']||!re['networkInterface'];console['log']('--------------------------------------'),console[_0x123fad(0x2a9)](_0x123fad(0x6e7),Ti),console[_0x123fad(0x2a9)](_0x123fad(0x552),this[_0x123fad(0x302)]),console[_0x123fad(0x2a9)](_0x123fad(0x146)),Ti&&!_0x556f52&&(this[_0x123fad(0x302)]<0x4||!this[_0x123fad(0x302)]?_0x41c67f&&_0x41c67f['ip']?(_0x3c7204=_0x41c67f['ip'],console[_0x123fad(0x2a9)](_0x123fad(0x31e)+_0x3c7204)):(_0x3c7204=await re[_0x123fad(0x482)](K,this[_0x123fad(0x3f0)][_0x123fad(0x41c)]),_0x3c7204?(console[_0x123fad(0x2a9)](_0x123fad(0x675)+_0x3c7204),await(0x0,w[_0x123fad(0x190)])(0x7d0)):console['error']('Falha\x20ao\x20criar\x20IPv6.')):this['reconnectAttempts']<0x6&&(await re[_0x123fad(0x488)](K,this[_0x123fad(0x3f0)][_0x123fad(0x41c)]),console['log'](_0x123fad(0x46d)),_0x3c7204=await re[_0x123fad(0x482)](K,this[_0x123fad(0x3f0)][_0x123fad(0x41c)]),_0x3c7204?(console[_0x123fad(0x2a9)](_0x123fad(0x675)+_0x3c7204),await(0x0,w[_0x123fad(0x190)])(0x7d0)):console[_0x123fad(0x2b1)](_0x123fad(0x3d4)))),this[_0x123fad(0x377)](),this[_0x123fad(0x3f0)][_0x123fad(0x5d5)]=(await this[_0x123fad(0x7fa)][_0x123fad(0x6aa)][_0x123fad(0x2d4)](this[_0x123fad(0x3f0)][_0x123fad(0x41c)]))[_0x123fad(0x5d5)],this[_0x123fad(0x3f0)]['authState']=await this[_0x123fad(0x19b)]();let {version:_0x2b5d2f}=await(0x0,w['fetchLatestBaileysVersion'])(),_0x2ff54b=[Pi,Fs,(0x0,Ps[_0x123fad(0x17d)])()],_0x10445b={'localAddress':_0x3c7204,'auth':{'creds':this[_0x123fad(0x3f0)][_0x123fad(0x25c)][_0x123fad(0x886)]['creds'],'keys':(0x0,w['makeCacheableSignalKeyStore'])(this[_0x123fad(0x3f0)][_0x123fad(0x25c)]['state']['keys'],(0x0,Jt['default'])({'level':_0x123fad(0x2b1)}))},'logger':(0x0,Jt['default'])({'level':_0x123fad(0x2b1)}),'printQRInTerminal':!0x1,'browser':_0x2b821c?['Mac\x20OS',Fs,(0x0,Ps['release'])()]:_0x2ff54b,'version':_0x2b5d2f,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x691a8f=>{const _0x2db865=_0x123fad;let _0x424743=this[_0x2db865(0x7f8)]?.[_0x2db865(0x775)]&&(0x0,w[_0x2db865(0x1fd)])(_0x691a8f);return(0x0,w[_0x2db865(0x546)])(_0x691a8f)||_0x424743;},'msgRetryCounterCache':this['msgRetryCounterCache'],'getMessage':async _0x11aeca=>await this['getMessage'](_0x11aeca),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x123fad(0x2b8)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x57018d){const _0x524d26=_0x123fad;return _0x57018d[_0x524d26(0x5cd)]?.[_0x524d26(0x4f4)]?.[_0x524d26(0x67a)]?.[_0x524d26(0x29b)]===w['proto'][_0x524d26(0x3e6)][_0x524d26(0x5de)]['ListType'][_0x524d26(0x4c4)]&&(_0x57018d=JSON[_0x524d26(0x1c3)](JSON[_0x524d26(0x179)](_0x57018d)),_0x57018d[_0x524d26(0x5cd)][_0x524d26(0x4f4)][_0x524d26(0x67a)][_0x524d26(0x29b)]=w[_0x524d26(0x386)]['Message'][_0x524d26(0x5de)]['ListType']['SINGLE_SELECT']),_0x57018d[_0x524d26(0x67a)]?.[_0x524d26(0x29b)]==w[_0x524d26(0x386)][_0x524d26(0x3e6)]['ListMessage'][_0x524d26(0x3e5)][_0x524d26(0x4c4)]&&(_0x57018d=JSON['parse'](JSON[_0x524d26(0x179)](_0x57018d)),_0x57018d[_0x524d26(0x67a)][_0x524d26(0x29b)]=w['proto'][_0x524d26(0x3e6)][_0x524d26(0x5de)][_0x524d26(0x3e5)][_0x524d26(0x176)]),_0x57018d;}};return this[_0x123fad(0x393)]=!0x1,this['client']=(0x0,w[_0x123fad(0x678)])(_0x10445b),this[_0x123fad(0x844)](),this[_0x123fad(0x4ed)]=_0x2b821c,this[_0x123fad(0x2cc)];}catch(_0x23dbb6){let _0x26bf70=_0x123fad(0x1ac),_0x383d8b=_0x23dbb6 instanceof Error?_0x23dbb6['message']:typeof _0x23dbb6==_0x123fad(0x487)?JSON[_0x123fad(0x179)](_0x23dbb6):_0x23dbb6,_0x53eab5=_0x26bf70+':\x20'+_0x383d8b;throw this['logger'][_0x123fad(0x2b1)](this[_0x123fad(0x6dd)]+'\x20('+this[_0x123fad(0x3f0)][_0x123fad(0x547)]+_0x123fad(0x3a3)+_0x53eab5),console[_0x123fad(0x2b1)](_0x123fad(0x86c),_0x23dbb6),_0x23dbb6 instanceof Error&&console[_0x123fad(0x2b1)]('Stack\x20trace:',_0x23dbb6['stack']),new O(_0x53eab5);}}[a0_0x5ca971(0x844)](){const _0x5f1601=a0_0x5ca971;this['client']['ev'][_0x5f1601(0x841)](_0x32848a=>{const _0x28ac70=_0x5f1601;if(!this[_0x28ac70(0x393)]){let _0x54a95a=this[_0x28ac70(0x601)][_0x28ac70(0x76d)]('DATABASE');if(_0x32848a[_0x28ac70(0x783)]){let _0x1f6f45=_0x32848a['labels.edit'];this[_0x28ac70(0x4e2)][_0x28ac70(0x783)](_0x1f6f45);}if(_0x32848a[_0x28ac70(0x6ef)]){let _0x100ce7=_0x32848a['labels.association'];this[_0x28ac70(0x4e2)][_0x28ac70(0x6ef)](_0x100ce7);}if(_0x32848a['connection.update']&&this[_0x28ac70(0x349)](_0x32848a['connection.update']),_0x32848a[_0x28ac70(0x391)]&&this['instance']['authState'][_0x28ac70(0x61d)](),_0x32848a[_0x28ac70(0x7d7)]){let _0x2666d6=_0x32848a[_0x28ac70(0x7d7)];this[_0x28ac70(0x4e2)]['messaging-history.set'](_0x2666d6,_0x54a95a);}if(_0x32848a[_0x28ac70(0x7f6)]){let _0x30f445=_0x32848a[_0x28ac70(0x7f6)];this['messageHandle'][_0x28ac70(0x7f6)](_0x30f445,_0x54a95a);}if(_0x32848a[_0x28ac70(0x6e5)]){let _0x5606a9=_0x32848a[_0x28ac70(0x6e5)];this['messageHandle'][_0x28ac70(0x6e5)](_0x5606a9,_0x54a95a);}if(_0x32848a['presence.update']){let _0x549fdc=_0x32848a['presence.update'];if(this[_0x28ac70(0x7f8)]?.[_0x28ac70(0x775)]&&_0x549fdc['id']['includes'](_0x28ac70(0x5e5)))return;this['sendDataWebhook'](_0x28ac70(0x5b0),_0x549fdc);}if(_0x32848a[_0x28ac70(0x671)]){let _0x114005=_0x32848a[_0x28ac70(0x671)];this['groupHandler'][_0x28ac70(0x671)](_0x114005);}if(_0x32848a[_0x28ac70(0x4ec)]){let _0x1ebf36=_0x32848a[_0x28ac70(0x4ec)];this[_0x28ac70(0x3b4)]['groups.update'](_0x1ebf36);}if(_0x32848a['group-participants.update']){let _0x557706=_0x32848a[_0x28ac70(0x3b1)];this[_0x28ac70(0x3b4)][_0x28ac70(0x3b1)](_0x557706);}if(_0x32848a['chats.upsert']){let _0xcac350=_0x32848a[_0x28ac70(0x657)];this[_0x28ac70(0x467)][_0x28ac70(0x657)](_0xcac350,_0x54a95a);}if(_0x32848a[_0x28ac70(0x296)]){let _0x2e98c5=_0x32848a['chats.update'];this[_0x28ac70(0x467)]['chats.update'](_0x2e98c5,_0x54a95a);}if(_0x32848a[_0x28ac70(0x6d5)]){let _0x1fce0e=_0x32848a[_0x28ac70(0x6d5)];this[_0x28ac70(0x467)]['chats.delete'](_0x1fce0e);}if(_0x32848a['contacts.upsert']){let _0x2311e3=_0x32848a[_0x28ac70(0x5d8)];this[_0x28ac70(0x2ff)]['contacts.upsert'](_0x2311e3,_0x54a95a);}if(_0x32848a['contacts.update']){let _0x4fafc0=_0x32848a[_0x28ac70(0x744)];this[_0x28ac70(0x2ff)][_0x28ac70(0x744)](_0x4fafc0,_0x54a95a);}}});}async[a0_0x5ca971(0x264)](_0x314024,_0x55a4c4){const _0x4ef319=a0_0x5ca971;if(_0x55a4c4>=0xa){console['error'](this[_0x4ef319(0x6dd)]+'\x20('+this['instance']['wuid']+_0x4ef319(0x503)),delete jt[_0x314024[_0x4ef319(0x74a)]['id']];return;}try{console[_0x4ef319(0x2b1)](this[_0x4ef319(0x6dd)]+'\x20('+this['instance'][_0x4ef319(0x547)]+_0x4ef319(0x36a)+(_0x55a4c4+0x1)),await this[_0x4ef319(0x2cc)][_0x4ef319(0x820)](JSON[_0x4ef319(0x1c3)](_0x314024[_0x4ef319(0x464)][0x1],w[_0x4ef319(0x1bf)][_0x4ef319(0x165)])),console[_0x4ef319(0x2b1)](_0x4ef319(0x688));}catch(_0x496164){console[_0x4ef319(0x2b1)](this[_0x4ef319(0x6dd)]+'\x20('+this['instance'][_0x4ef319(0x547)]+_0x4ef319(0x1a8)+_0x496164),setTimeout(()=>this[_0x4ef319(0x264)](_0x314024,_0x55a4c4+0x1),Math[_0x4ef319(0x4ea)](0x2,_0x55a4c4)*0x3e8);}}[a0_0x5ca971(0x4c0)](_0x5d1385){return new Promise(_0x2752ea=>setTimeout(_0x2752ea,_0x5d1385));}[a0_0x5ca971(0x3a6)](_0x42957d){const _0x4ef128=a0_0x5ca971;_0x42957d=_0x42957d[_0x4ef128(0x3d2)](/\D/g,'');let _0x9c4e55=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x4ef128(0x5ac)](_0x42957d);if(_0x9c4e55&&_0x9c4e55[0x1]==='55'){let _0x23d7a3=_0x9c4e55[0x2],_0x5786a5=_0x9c4e55[0x3],_0x4604a2=_0x9c4e55[0x4];if(parseInt(_0x23d7a3)>=0x1f&&_0x5786a5==='9')return _0x9c4e55[0x1]+_0x23d7a3+_0x4604a2;}return _0x42957d;}['createJid'](_0x410337){const _0x475170=a0_0x5ca971;return _0x410337[_0x475170(0x839)]('@g.us')||_0x410337[_0x475170(0x839)](_0x475170(0x4a7))||_0x410337[_0x475170(0x839)](_0x475170(0x3b7))?_0x410337:(_0x410337=_0x410337?.['replace'](/\s/g,'')['replace'](/\+/g,'')[_0x475170(0x3d2)](/\(/g,'')[_0x475170(0x3d2)](/\)/g,'')['split'](/\:/)[0x0][_0x475170(0x266)]('@')[0x0],_0x410337[_0x475170(0x532)]>=0x12?(_0x410337=_0x410337[_0x475170(0x3d2)](/[^\d-]/g,''),_0x410337+_0x475170(0x5e5)):(_0x410337=_0x410337[_0x475170(0x3d2)](/\D/g,''),_0x410337+_0x475170(0x4a7)));}async[a0_0x5ca971(0x635)](_0x36c3e2){const _0x5f1050=a0_0x5ca971;let _0x29a3b5=(await this[_0x5f1050(0x5c1)]({'numbers':[_0x36c3e2[_0x5f1050(0x274)]]}))[0x0];if(!_0x29a3b5[_0x5f1050(0x160)]&&!(0x0,w[_0x5f1050(0x1fd)])(_0x29a3b5['jid'])&&!_0x29a3b5[_0x5f1050(0x5e2)][_0x5f1050(0x839)]('@broadcast'))throw new m(_0x29a3b5);let _0x369a2c=_0x29a3b5['jid'];try{return await this[_0x5f1050(0x2cc)][_0x5f1050(0x787)](_0x369a2c),await this[_0x5f1050(0x2cc)][_0x5f1050(0x4a9)](_0x36c3e2[_0x5f1050(0x611)],_0x369a2c),{'status':0xc8,'presence':_0x36c3e2[_0x5f1050(0x611)]};}catch(_0x593e85){let _0x172881=_0x5f1050(0x3ab),_0x294fb4=_0x593e85 instanceof Error?_0x593e85[_0x5f1050(0x4f4)]:typeof _0x593e85==_0x5f1050(0x487)?JSON['stringify'](_0x593e85):_0x593e85,_0x579bef=_0x172881+':\x20'+_0x294fb4;throw this[_0x5f1050(0x56b)]['error'](this[_0x5f1050(0x6dd)]+'\x20('+this[_0x5f1050(0x3f0)][_0x5f1050(0x547)]+_0x5f1050(0x3a3)+_0x579bef),new m(_0x579bef);}}async[a0_0x5ca971(0x4b7)](_0x175cb5,_0x1dff94,_0x2aa4bc,_0x44ee36=!0x0){const _0x59b0b9=a0_0x5ca971;let _0x398b76=await this[_0x59b0b9(0x7fa)]['cacheContact'][_0x59b0b9(0x640)]({'where':{'_id':_0x175cb5}});if(!_0x398b76&&!_0x44ee36)return;let _0x122c35={'lastUpdate':Date[_0x59b0b9(0x7d1)]()};if(_0x2aa4bc||!_0x398b76?.[_0x59b0b9(0x523)]||Date['now']()-_0x398b76[_0x59b0b9(0x523)]>0x18*0x3c*0x3c*0x3e8)try{let _0xbc701=(await this[_0x59b0b9(0x674)](_0x175cb5))['profilePictureUrl'];_0x122c35[_0x59b0b9(0x559)]=_0xbc701;}catch(_0x25dcdc){let _0x21fb21=_0x59b0b9(0x7c7),_0xc32b3d=_0x25dcdc instanceof Error?_0x25dcdc[_0x59b0b9(0x4f4)]:typeof _0x25dcdc==_0x59b0b9(0x487)?JSON[_0x59b0b9(0x179)](_0x25dcdc):_0x25dcdc,_0xa60928=_0x21fb21+':\x20'+_0xc32b3d;throw this[_0x59b0b9(0x56b)][_0x59b0b9(0x2b1)](this[_0x59b0b9(0x6dd)]+'\x20('+this[_0x59b0b9(0x3f0)][_0x59b0b9(0x547)]+_0x59b0b9(0x3a3)+_0xa60928),new m(_0xa60928);}return _0x1dff94&&_0x398b76?.[_0x59b0b9(0x41c)]!==_0x1dff94&&(_0x122c35[_0x59b0b9(0x41c)]=_0x1dff94),Object[_0x59b0b9(0x418)](_0x122c35)[_0x59b0b9(0x532)]>0x1&&(_0x398b76?await this[_0x59b0b9(0x7fa)][_0x59b0b9(0x68f)][_0x59b0b9(0x26b)]({'where':{'_id':_0x175cb5}},_0x122c35):await this[_0x59b0b9(0x7fa)]['cacheContact'][_0x59b0b9(0x772)]([{'_id':_0x175cb5,..._0x122c35}]),_0x398b76={..._0x398b76,..._0x122c35}),{'cachedContact':_0x398b76};}async[a0_0x5ca971(0x674)](_0x2f8622){const _0xaa1026=a0_0x5ca971;let _0x770b67=this['createJid'](_0x2f8622);try{return{'wuid':_0x770b67,'profilePictureUrl':await this[_0xaa1026(0x2cc)][_0xaa1026(0x84f)](_0x770b67,_0xaa1026(0x525))};}catch{return{'wuid':_0x770b67,'profilePictureUrl':null};}}async[a0_0x5ca971(0x3bc)](_0x51a6e2,_0x44638c,_0x5bf562){const _0x26130b=a0_0x5ca971;let _0x2c9087;try{let _0x175808=(await this[_0x26130b(0x5c1)]({'numbers':[_0x51a6e2]}))?.[_0x26130b(0x778)]();if(!_0x175808['exists']&&!(0x0,w['isJidGroup'])(_0x175808[_0x26130b(0x5e2)])&&!_0x175808[_0x26130b(0x5e2)][_0x26130b(0x839)]('@broadcast'))throw new m(_0x175808);_0x2c9087=_0x175808[_0x26130b(0x5e2)];}catch(_0x23e93a){_0x2c9087=_0x51a6e2,this['logger'][_0x26130b(0x38d)](this[_0x26130b(0x6dd)]+'\x20('+this['instance']['wuid']+_0x26130b(0x55d)+_0x23e93a[_0x26130b(0x4f4)]),this['logger'][_0x26130b(0x38d)](this[_0x26130b(0x6dd)]+'\x20('+this[_0x26130b(0x3f0)]['wuid']+_0x26130b(0x884)+_0x2c9087);}try{if(_0x2c9087||(_0x2c9087=_0x51a6e2,this[_0x26130b(0x56b)][_0x26130b(0x38d)](this[_0x26130b(0x6dd)]+'\x20('+this[_0x26130b(0x3f0)][_0x26130b(0x547)]+_0x26130b(0x51c)+_0x2c9087)),_0x5bf562||(_0x5bf562={}),_0x5bf562?.[_0x26130b(0x190)]){await this[_0x26130b(0x2cc)][_0x26130b(0x787)](_0x2c9087),await this['client'][_0x26130b(0x4a9)](_0x5bf562?.['presence']??_0x26130b(0x745),_0x2c9087);let _0x5cadfb=Math[_0x26130b(0x244)](_0x5bf562[_0x26130b(0x190)],0x2710);await(0x0,w[_0x26130b(0x190)])(_0x5cadfb),await this[_0x26130b(0x2cc)][_0x26130b(0x4a9)]('paused',_0x2c9087);}let _0x5f03ee=_0x5bf562?.[_0x26130b(0x4eb)]!=!0x1?void 0x0:!0x1,_0x516990;if(_0x5bf562?.[_0x26130b(0x48f)]){let _0x11bd2f=_0x5bf562?.[_0x26130b(0x48f)],_0x114dea=_0x11bd2f?.['message']?_0x11bd2f:await this[_0x26130b(0x4bb)](_0x11bd2f[_0x26130b(0x74a)],!0x0);_0x114dea&&(_0x516990=_0x114dea);}let _0x3499fa,_0x28766c=null;if((0x0,w[_0x26130b(0x1fd)])(_0x2c9087))try{if(_0x28766c=await this['getGroupMetadataCache'](_0x2c9087),!_0x28766c)throw new q('Group\x20not\x20found');_0x5bf562?.[_0x26130b(0x581)]&&(_0x5bf562['mentions']?.['everyOne']?_0x3499fa=_0x28766c['participants'][_0x26130b(0x7a8)](_0x377275=>_0x377275['id']):_0x5bf562[_0x26130b(0x581)]?.[_0x26130b(0x32a)]?.[_0x26130b(0x532)]&&(_0x3499fa=_0x5bf562[_0x26130b(0x581)]['mentioned'][_0x26130b(0x7a8)](_0x44daa8=>{const _0x18cf8f=_0x26130b;let _0x341fde=this[_0x18cf8f(0x30b)](_0x44daa8);return(0x0,w[_0x18cf8f(0x1fd)])(_0x341fde)?null:_0x341fde;})));}catch{throw new q(_0x26130b(0x706));}let _0x3183a7=await this[_0x26130b(0x7fa)][_0x26130b(0x739)][_0x26130b(0x640)]({'where':{'_id':_0x2c9087}},this[_0x26130b(0x3f0)][_0x26130b(0x547)]),_0x42535d=await((async()=>{const _0x2a10c2=_0x26130b;let _0x499bb3={'quoted':_0x516990,'ephemeralExpiration':_0x3183a7?.[_0x2a10c2(0x5a1)]??0x0};if(!_0x44638c[_0x2a10c2(0x765)]&&!_0x44638c[_0x2a10c2(0x1e9)]&&!_0x44638c['sticker']&&!_0x44638c[_0x2a10c2(0x683)]&&_0x2c9087!=='status@broadcast'&&_0x44638c[_0x2a10c2(0x4fa)])return await this['client'][_0x2a10c2(0x37e)](_0x2c9087,{'react':{'text':_0x44638c[_0x2a10c2(0x4fa)]['text'],'key':_0x44638c[_0x2a10c2(0x4fa)][_0x2a10c2(0x74a)]}},_0x499bb3);if(_0x44638c['conversation']){let _0x4085a9=_0x44638c[_0x2a10c2(0x683)];return _0x5bf562?.['changeVariables']&&(_0x4085a9=await this[_0x2a10c2(0x42c)](_0x4085a9,_0x2c9087)),await this['client'][_0x2a10c2(0x37e)](_0x2c9087,{'text':_0x4085a9,'mentions':_0x3499fa,'linkPreview':_0x5f03ee},_0x499bb3);}return!_0x44638c[_0x2a10c2(0x765)]&&!_0x44638c['poll']&&_0x2c9087!=_0x2a10c2(0x754)?await this[_0x2a10c2(0x2cc)][_0x2a10c2(0x37e)](_0x2c9087,{'forward':{'key':{'remoteJid':this[_0x2a10c2(0x3f0)][_0x2a10c2(0x547)],'fromMe':!0x0},'message':_0x44638c},'mentions':_0x3499fa},_0x499bb3):_0x2c9087===_0x2a10c2(0x754)?await this[_0x2a10c2(0x2cc)][_0x2a10c2(0x37e)](_0x2c9087,_0x44638c[_0x2a10c2(0x2f7)][_0x2a10c2(0x70d)],{'backgroundColor':_0x44638c[_0x2a10c2(0x2f7)]['option'][_0x2a10c2(0x785)],'font':_0x44638c[_0x2a10c2(0x2f7)][_0x2a10c2(0x876)]['font'],'statusJidList':_0x44638c[_0x2a10c2(0x2f7)][_0x2a10c2(0x876)][_0x2a10c2(0x230)]}):await this[_0x2a10c2(0x2cc)]['sendMessage'](_0x2c9087,_0x44638c,_0x499bb3);})()),_0x5e8a5b=(0x0,w['normalizeMessageContent'])(_0x42535d['message']),_0x35fa46=(0x0,w[_0x26130b(0x5cf)])(_0x5e8a5b),{message_normalized:_0x4abd2a}=this[_0x26130b(0x713)](_0x5e8a5b,_0x35fa46,null),_0x50d69={'_id':_0x42535d[_0x26130b(0x74a)]['id'],'key':_0x42535d[_0x26130b(0x74a)],'pushName':_0x42535d[_0x26130b(0x388)],'isGroup':_0x42535d[_0x26130b(0x74a)][_0x26130b(0x509)]['endsWith'](_0x26130b(0x5e5)),'profilePictureUrl':this['instance'][_0x26130b(0x84f)],'message':_0x5e8a5b,'messageType':_0x35fa46,'message_normalized':{'key':_0x42535d['key'],'pushName':_0x42535d['pushName'],'messageTimestamp':_0x42535d[_0x26130b(0x684)]&&_0x42535d[_0x26130b(0x684)][_0x26130b(0x7b1)]()[_0x26130b(0x532)]<0xd?_0x42535d[_0x26130b(0x684)]*0x3e8:_0x42535d[_0x26130b(0x684)]||null,'source':(0x0,w[_0x26130b(0x759)])(_0x42535d[_0x26130b(0x74a)]['id']),..._0x4abd2a},'messageTimestamp':_0x42535d[_0x26130b(0x684)]&&_0x42535d[_0x26130b(0x684)][_0x26130b(0x7b1)]()[_0x26130b(0x532)]<0xd?_0x42535d[_0x26130b(0x684)]*0x3e8:_0x42535d[_0x26130b(0x684)]||null,'owner':this['instance'][_0x26130b(0x547)],'source':(0x0,w['getDevice'])(_0x42535d[_0x26130b(0x74a)]['id'])};return this[_0x26130b(0x56b)][_0x26130b(0x38d)](this['instanceName']+'\x20('+this[_0x26130b(0x3f0)][_0x26130b(0x547)]+'):\x20enviado\x20para\x20['+_0x50d69[_0x26130b(0x74a)]?.[_0x26130b(0x509)]['replace']('@s.whatsapp.net','')+_0x26130b(0x8a5)+_0x50d69[_0x26130b(0x248)]+')'),_0x50d69[_0x26130b(0x5a5)]?.[_0x26130b(0x6e4)]&&this['logger']['warn'](_0x50d69[_0x26130b(0x5a5)]?.['text']),this[_0x26130b(0x43f)]('send.message',_0x50d69),V(this[_0x26130b(0x6dd)],_0x26130b(0x873),{'message':_0x50d69}),this[_0x26130b(0x37d)](this[_0x26130b(0x601)]['get'](_0x26130b(0x868)),_0x50d69,_0x26130b(0x5b3),_0x3183a7),await this[_0x26130b(0x7fa)]['message'][_0x26130b(0x772)]([_0x50d69],this[_0x26130b(0x3f0)][_0x26130b(0x547)]),_0x42535d;}catch(_0x57fe23){let _0x306344=_0x26130b(0x28e)+_0x2c9087,_0x1269ac=_0x57fe23 instanceof Error?_0x57fe23[_0x26130b(0x4f4)]:typeof _0x57fe23==_0x26130b(0x487)?JSON[_0x26130b(0x179)](_0x57fe23):_0x57fe23,_0x4957c8=_0x306344+':\x20'+_0x1269ac;throw this[_0x26130b(0x56b)][_0x26130b(0x2b1)](this[_0x26130b(0x6dd)]+'\x20('+this[_0x26130b(0x3f0)][_0x26130b(0x547)]+_0x26130b(0x3a3)+_0x4957c8),new m(_0x4957c8);}}async['getGroupMetadataCache'](_0x5a1131){const _0x292975=a0_0x5ca971;try{let _0x1acb7f=await this[_0x292975(0x7fa)][_0x292975(0x739)][_0x292975(0x640)]({'where':{'_id':_0x5a1131}},this['instance']['wuid']);return _0x1acb7f?_0x1acb7f['groupdata']:null;}catch(_0x1542a7){return this[_0x292975(0x56b)][_0x292975(0x2b1)](_0x292975(0x67c)+_0x5a1131+':\x20'+_0x1542a7[_0x292975(0x4f4)]),null;}}get['connectionStatus'](){const _0x3a5740=a0_0x5ca971;return this[_0x3a5740(0x149)];}async['textMessage'](_0x5a27dd){const _0x52f925=a0_0x5ca971;return await this[_0x52f925(0x3bc)](_0x5a27dd['number'],{'conversation':_0x5a27dd['textMessage'][_0x52f925(0x6e4)]},_0x5a27dd?.['options']);}async[a0_0x5ca971(0x740)](_0x21e7eb){const _0x58b3f2=a0_0x5ca971;if(!_0x21e7eb[_0x58b3f2(0x536)])throw new m(_0x58b3f2(0x4d8));if(!_0x21e7eb['content'])throw new m(_0x58b3f2(0x426));if(_0x21e7eb[_0x58b3f2(0x85e)]){let _0x5454a4=await this[_0x58b3f2(0x7fa)][_0x58b3f2(0x821)]['find']({'where':{}},this[_0x58b3f2(0x3f0)][_0x58b3f2(0x547)]);if(!_0x5454a4[_0x58b3f2(0x532)])throw new m(_0x58b3f2(0x767));_0x21e7eb[_0x58b3f2(0x230)]=_0x5454a4[_0x58b3f2(0x587)](_0x14c701=>_0x14c701[_0x58b3f2(0x388)])[_0x58b3f2(0x7a8)](_0x2db20a=>_0x2db20a[_0x58b3f2(0x4a6)]);}if(!_0x21e7eb['statusJidList']?.[_0x58b3f2(0x532)]&&!_0x21e7eb[_0x58b3f2(0x85e)])throw new m('StatusJidList\x20is\x20required');if(_0x21e7eb[_0x58b3f2(0x536)]===_0x58b3f2(0x6e4)){if(!_0x21e7eb[_0x58b3f2(0x785)])throw new m(_0x58b3f2(0x7d3));if(!_0x21e7eb[_0x58b3f2(0x5eb)])throw new m('Font\x20is\x20required');return{'content':{'text':_0x21e7eb[_0x58b3f2(0x70d)]},'option':{'backgroundColor':_0x21e7eb['backgroundColor'],'font':_0x21e7eb[_0x58b3f2(0x5eb)],'statusJidList':_0x21e7eb[_0x58b3f2(0x230)]}};}if(_0x21e7eb['type']===_0x58b3f2(0x525))return{'content':{'image':{'url':_0x21e7eb['content']},'caption':_0x21e7eb['caption']},'option':{'statusJidList':_0x21e7eb[_0x58b3f2(0x230)]}};if(_0x21e7eb[_0x58b3f2(0x536)]==='video')return{'content':{'video':{'url':_0x21e7eb[_0x58b3f2(0x70d)]},'caption':_0x21e7eb[_0x58b3f2(0x572)]},'option':{'statusJidList':_0x21e7eb[_0x58b3f2(0x230)]}};if(_0x21e7eb[_0x58b3f2(0x536)]===_0x58b3f2(0x765)){this[_0x58b3f2(0x56b)][_0x58b3f2(0x608)](this[_0x58b3f2(0x6dd)]+'\x20('+this[_0x58b3f2(0x3f0)][_0x58b3f2(0x547)]+'):Type\x20defined\x20as\x20audio'),this['logger']['verbose'](this[_0x58b3f2(0x6dd)]+'\x20('+this[_0x58b3f2(0x3f0)]['wuid']+_0x58b3f2(0x2e5));let _0x3c31b2=await this[_0x58b3f2(0x1a7)](_0x21e7eb[_0x58b3f2(0x70d)]);if(typeof _0x3c31b2=='string'){this[_0x58b3f2(0x56b)][_0x58b3f2(0x608)](this[_0x58b3f2(0x6dd)]+'\x20('+this[_0x58b3f2(0x3f0)]['wuid']+'):Audio\x20processed');let _0x3b1c06=F[_0x58b3f2(0x259)](_0x3c31b2)[_0x58b3f2(0x7b1)](_0x58b3f2(0x1d9));return{'content':{'audio':Buffer['from'](_0x3b1c06,'base64'),'ptt':!0x0,'mimetype':_0x58b3f2(0x588)},'option':{'statusJidList':_0x21e7eb[_0x58b3f2(0x230)]}};}else throw new O(_0x3c31b2);}throw new m(_0x58b3f2(0x6cb));}async[a0_0x5ca971(0x4ff)](_0x390dc2){const _0x1addef=a0_0x5ca971;return await this[_0x1addef(0x3bc)]('status@broadcast',{'status':await this[_0x1addef(0x740)](_0x390dc2[_0x1addef(0x4ff)])});}async[a0_0x5ca971(0x658)](_0x4249ef){const _0x22ad02=a0_0x5ca971;try{let _0x37fbf3=await(0x0,w[_0x22ad02(0x286)])({[_0x4249ef['mediatype']]:(0x0,L[_0x22ad02(0x7ca)])(_0x4249ef[_0x22ad02(0x1f5)])?{'url':_0x4249ef['media']}:Buffer[_0x22ad02(0x724)](_0x4249ef['media'],_0x22ad02(0x1d9))},{'upload':this[_0x22ad02(0x2cc)]['waUploadToServer']}),_0x7894be=_0x4249ef[_0x22ad02(0x237)]+'Message';if(_0x4249ef[_0x22ad02(0x237)]===_0x22ad02(0x400)&&!_0x4249ef[_0x22ad02(0x2a1)]){let _0x3b6fe3=new RegExp(/.*\/(.+?)\./)[_0x22ad02(0x5ac)](_0x4249ef[_0x22ad02(0x1f5)]);_0x4249ef[_0x22ad02(0x2a1)]=_0x3b6fe3?_0x3b6fe3[0x1]:null;}let _0x16f55f;return(0x0,L['isURL'])(_0x4249ef[_0x22ad02(0x1f5)])?_0x16f55f=(await ee[_0x22ad02(0x678)][_0x22ad02(0x76d)](_0x4249ef[_0x22ad02(0x1f5)],{'responseType':_0x22ad02(0x6c2)}))['headers']['content-type']:_0x16f55f=(0x0,Di[_0x22ad02(0x33f)])(_0x4249ef[_0x22ad02(0x2a1)]),_0x37fbf3[_0x7894be][_0x22ad02(0x572)]=_0x4249ef?.[_0x22ad02(0x572)],_0x37fbf3[_0x7894be][_0x22ad02(0x1db)]=_0x16f55f,_0x37fbf3[_0x7894be][_0x22ad02(0x2a1)]=_0x4249ef[_0x22ad02(0x2a1)],_0x4249ef[_0x22ad02(0x237)]===_0x22ad02(0x6b8)&&(_0x37fbf3[_0x7894be][_0x22ad02(0x4ef)]=Uint8Array['from']((0x0,Le[_0x22ad02(0x259)])((0x0,J['join'])(process[_0x22ad02(0x639)](),_0x22ad02(0x441)))),_0x37fbf3[_0x7894be][_0x22ad02(0x82e)]=!0x1),(0x0,w[_0x22ad02(0x4e4)])('',{[_0x7894be]:{..._0x37fbf3[_0x7894be]}},{'userJid':this[_0x22ad02(0x3f0)][_0x22ad02(0x547)]});}catch(_0x391ba6){let _0x5c8c8b=_0x22ad02(0x2fe),_0x197d50=_0x391ba6 instanceof Error?_0x391ba6['message']:typeof _0x391ba6==_0x22ad02(0x487)?JSON[_0x22ad02(0x179)](_0x391ba6):_0x391ba6,_0x557825=_0x5c8c8b+':\x20'+_0x197d50;throw this['logger'][_0x22ad02(0x2b1)](this[_0x22ad02(0x6dd)]+'\x20('+this[_0x22ad02(0x3f0)][_0x22ad02(0x547)]+_0x22ad02(0x3a3)+_0x557825),new O(_0x557825);}}async[a0_0x5ca971(0x4b5)](_0x1093ff){const _0x13150c=a0_0x5ca971;let _0x19e9da=await this['prepareMediaMessage'](_0x1093ff[_0x13150c(0x4b5)]);return await this[_0x13150c(0x3bc)](_0x1093ff['number'],{..._0x19e9da[_0x13150c(0x4f4)]},_0x1093ff?.[_0x13150c(0x306)]);}async[a0_0x5ca971(0x379)](_0xe41a8a,_0x304774){const _0x18a67f=a0_0x5ca971;try{this[_0x18a67f(0x56b)][_0x18a67f(0x608)](this[_0x18a67f(0x6dd)]+'\x20('+this[_0x18a67f(0x3f0)][_0x18a67f(0x547)]+_0x18a67f(0x21c));let _0x5a89b4,_0x311f8e=_0x304774+'-'+new Date()['getTime']();this[_0x18a67f(0x56b)][_0x18a67f(0x608)](this[_0x18a67f(0x6dd)]+'\x20('+this[_0x18a67f(0x3f0)][_0x18a67f(0x547)]+_0x18a67f(0x403)+_0x311f8e);let _0x12dc7b=''+(0x0,J[_0x18a67f(0x897)])(this[_0x18a67f(0x35d)],_0x311f8e+_0x18a67f(0x77e));if(this['logger'][_0x18a67f(0x608)](this[_0x18a67f(0x6dd)]+'\x20('+this[_0x18a67f(0x3f0)][_0x18a67f(0x547)]+_0x18a67f(0x2af)+_0x12dc7b),(0x0,L['isBase64'])(_0xe41a8a)){this[_0x18a67f(0x56b)][_0x18a67f(0x608)](this['instanceName']+'\x20('+this['instance'][_0x18a67f(0x547)]+_0x18a67f(0x3c8));let _0x492a99=_0xe41a8a[_0x18a67f(0x3d2)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x38cec3=Buffer[_0x18a67f(0x724)](_0x492a99,_0x18a67f(0x1d9));_0x5a89b4=''+(0x0,J[_0x18a67f(0x897)])(this[_0x18a67f(0x35d)],_0x18a67f(0x3f5)+_0x311f8e+_0x18a67f(0x4a4)),this[_0x18a67f(0x56b)][_0x18a67f(0x608)](this[_0x18a67f(0x6dd)]+'\x20('+this['instance'][_0x18a67f(0x547)]+_0x18a67f(0x39b)+_0x5a89b4),await(0x0,qt['default'])(_0x38cec3)[_0x18a67f(0x64a)](_0x5a89b4),this[_0x18a67f(0x56b)]['verbose'](this[_0x18a67f(0x6dd)]+'\x20('+this[_0x18a67f(0x3f0)][_0x18a67f(0x547)]+'):Image\x20created');}else{this[_0x18a67f(0x56b)]['verbose'](this[_0x18a67f(0x6dd)]+'\x20('+this[_0x18a67f(0x3f0)]['wuid']+_0x18a67f(0x4be));let _0x15d940=new Date()[_0x18a67f(0x409)](),_0x490441=_0xe41a8a+_0x18a67f(0x7e5)+_0x15d940;this['logger'][_0x18a67f(0x608)](this[_0x18a67f(0x6dd)]+'\x20('+this['instance']['wuid']+_0x18a67f(0x78d)+_0x490441);let _0x36edde=await ee['default']['get'](_0x490441,{'responseType':_0x18a67f(0x6c2)});this[_0x18a67f(0x56b)][_0x18a67f(0x608)](this[_0x18a67f(0x6dd)]+'\x20('+this['instance']['wuid']+_0x18a67f(0x80d));let _0x2dd968=Buffer[_0x18a67f(0x724)](_0x36edde['data'],_0x18a67f(0x278));_0x5a89b4=''+(0x0,J[_0x18a67f(0x897)])(this[_0x18a67f(0x35d)],_0x18a67f(0x3f5)+_0x311f8e+_0x18a67f(0x4a4)),this[_0x18a67f(0x56b)]['verbose'](this['instanceName']+'\x20('+this[_0x18a67f(0x3f0)][_0x18a67f(0x547)]+_0x18a67f(0x39b)+_0x5a89b4),await(0x0,qt[_0x18a67f(0x678)])(_0x2dd968)['toFile'](_0x5a89b4),this[_0x18a67f(0x56b)][_0x18a67f(0x608)](this[_0x18a67f(0x6dd)]+'\x20('+this[_0x18a67f(0x3f0)]['wuid']+_0x18a67f(0x853));}return await(0x0,qt[_0x18a67f(0x678)])(_0x5a89b4)['webp']()[_0x18a67f(0x64a)](_0x12dc7b),this[_0x18a67f(0x56b)][_0x18a67f(0x608)](this[_0x18a67f(0x6dd)]+'\x20('+this[_0x18a67f(0x3f0)]['wuid']+_0x18a67f(0x41b)),F[_0x18a67f(0x80b)](_0x5a89b4),this['logger'][_0x18a67f(0x608)](this['instanceName']+'\x20('+this[_0x18a67f(0x3f0)][_0x18a67f(0x547)]+_0x18a67f(0x877)),_0x12dc7b;}catch(_0x237906){let _0xf2830a=_0x18a67f(0x385),_0x7e5952=_0x237906 instanceof Error?_0x237906['message']:typeof _0x237906==_0x18a67f(0x487)?JSON['stringify'](_0x237906):_0x237906,_0x8241a5=_0xf2830a+':\x20'+_0x7e5952;this[_0x18a67f(0x56b)]['error'](this[_0x18a67f(0x6dd)]+'\x20('+this[_0x18a67f(0x3f0)][_0x18a67f(0x547)]+_0x18a67f(0x3a3)+_0x8241a5);}}async[a0_0x5ca971(0x521)](_0x579ed1){const _0x69a289=a0_0x5ca971;let _0x5e3ed0=await this[_0x69a289(0x379)](_0x579ed1[_0x69a289(0x34b)][_0x69a289(0x525)],_0x579ed1['number']),_0x5629b8=await this['sendMessageWithTyping'](_0x579ed1[_0x69a289(0x274)],{'sticker':{'url':_0x5e3ed0}},_0x579ed1?.[_0x69a289(0x306)]);return F['unlinkSync'](_0x5e3ed0),this['logger'][_0x69a289(0x608)](this[_0x69a289(0x6dd)]+'\x20('+this['instance'][_0x69a289(0x547)]+_0x69a289(0x7e8)),_0x5629b8;}async[a0_0x5ca971(0x533)](_0xa6ac26){const _0x3deb43=a0_0x5ca971;if(this[_0x3deb43(0x56b)][_0x3deb43(0x608)](this[_0x3deb43(0x6dd)]+'\x20('+this[_0x3deb43(0x3f0)][_0x3deb43(0x547)]+'):Sending\x20audio\x20whatsapp'),!_0xa6ac26[_0x3deb43(0x306)]?.[_0x3deb43(0x41d)]&&_0xa6ac26[_0x3deb43(0x306)]?.[_0x3deb43(0x41d)]!==!0x1&&(_0xa6ac26[_0x3deb43(0x306)][_0x3deb43(0x41d)]=!0x0),_0xa6ac26[_0x3deb43(0x306)]?.[_0x3deb43(0x41d)]){let _0x2c2ca3=await this[_0x3deb43(0x1a7)](_0xa6ac26[_0x3deb43(0x6af)][_0x3deb43(0x765)]);if(typeof _0x2c2ca3==_0x3deb43(0x2a0)){let _0x58fa51=F['readFileSync'](_0x2c2ca3)[_0x3deb43(0x7b1)](_0x3deb43(0x1d9));return this[_0x3deb43(0x3bc)](_0xa6ac26[_0x3deb43(0x274)],{'audio':Buffer[_0x3deb43(0x724)](_0x58fa51,_0x3deb43(0x1d9)),'ptt':!0x0,'mimetype':_0x3deb43(0x2a5)},{'presence':_0x3deb43(0x6b0),'delay':_0xa6ac26?.[_0x3deb43(0x306)]?.[_0x3deb43(0x190)]});}else throw new O(_0x2c2ca3);}return await this[_0x3deb43(0x3bc)](_0xa6ac26[_0x3deb43(0x274)],{'audio':(0x0,L[_0x3deb43(0x7ca)])(_0xa6ac26[_0x3deb43(0x6af)][_0x3deb43(0x765)])?{'url':_0xa6ac26[_0x3deb43(0x6af)]['audio']}:Buffer[_0x3deb43(0x724)](_0xa6ac26[_0x3deb43(0x6af)][_0x3deb43(0x765)],_0x3deb43(0x1d9)),'ptt':!0x0,'mimetype':_0x3deb43(0x2a5)},{'presence':_0x3deb43(0x6b0),'delay':_0xa6ac26?.[_0x3deb43(0x306)]?.[_0x3deb43(0x190)]});}async[a0_0x5ca971(0x1a7)](_0x5d3331){const _0x1ba4dd=a0_0x5ca971;this[_0x1ba4dd(0x56b)][_0x1ba4dd(0x608)](this[_0x1ba4dd(0x6dd)]+'\x20('+this['instance'][_0x1ba4dd(0x547)]+_0x1ba4dd(0x2e5));let _0x2ceade=(0x0,L[_0x1ba4dd(0x7ca)])(_0x5d3331)?(0x0,Vt['createHash'])('sha256')[_0x1ba4dd(0x26b)](_0x5d3331)[_0x1ba4dd(0x316)](_0x1ba4dd(0x312)):(0x0,Vt['createHash'])(_0x1ba4dd(0x495))['update'](_0x5d3331)[_0x1ba4dd(0x316)]('hex'),_0x233e9f=''+(0x0,J[_0x1ba4dd(0x897)])(this[_0x1ba4dd(0x35d)],_0x2ceade+_0x1ba4dd(0x31b));if(F[_0x1ba4dd(0x5d1)](_0x233e9f))return this[_0x1ba4dd(0x56b)][_0x1ba4dd(0x608)](this['instanceName']+'\x20('+this[_0x1ba4dd(0x3f0)]['wuid']+_0x1ba4dd(0x15a)),_0x233e9f;let _0x38cfc3=''+(0x0,J[_0x1ba4dd(0x897)])(this[_0x1ba4dd(0x35d)],_0x1ba4dd(0x3f5)+(0x0,Y['v4'])()+'.mp3');if((0x0,L[_0x1ba4dd(0x7ca)])(_0x5d3331)){let _0x4953cc=new Date()[_0x1ba4dd(0x409)](),_0x483fb7=_0x5d3331+_0x1ba4dd(0x7e5)+_0x4953cc,_0x545f5f=await ee[_0x1ba4dd(0x678)]['get'](_0x483fb7,{'responseType':'arraybuffer'});F[_0x1ba4dd(0x314)](_0x38cfc3,_0x545f5f[_0x1ba4dd(0x5c9)]);}else{let _0x1cceff=Buffer[_0x1ba4dd(0x724)](_0x5d3331,'base64');F[_0x1ba4dd(0x314)](_0x38cfc3,_0x1cceff);}return new Promise((_0x58a17c,_0x43386f)=>{const _0xcc73f5=_0x1ba4dd;(0x0,Fe['exec'])(Ds[_0xcc73f5(0x678)][_0xcc73f5(0x562)]+_0xcc73f5(0x7ef)+_0x38cfc3+'\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20'+_0x233e9f+_0xcc73f5(0x52f),_0x64fdac=>{const _0x39c930=_0xcc73f5;if(F[_0x39c930(0x80b)](_0x38cfc3),_0x64fdac){this[_0x39c930(0x56b)]['verbose'](this[_0x39c930(0x6dd)]+'\x20('+this[_0x39c930(0x3f0)][_0x39c930(0x547)]+'):Error\x20in\x20converting\x20audio'),_0x43386f(_0x64fdac);return;}this['logger'][_0x39c930(0x608)](this['instanceName']+'\x20('+this[_0x39c930(0x3f0)][_0x39c930(0x547)]+_0x39c930(0x3dd)),_0x58a17c(_0x233e9f);});});}async[a0_0x5ca971(0x82b)](_0x4323c4){const _0x2c4733=a0_0x5ca971;this[_0x2c4733(0x56b)][_0x2c4733(0x608)](this[_0x2c4733(0x6dd)]+'\x20('+this['instance'][_0x2c4733(0x547)]+_0x2c4733(0x2e5));let _0x3d5f29=(0x0,Vt[_0x2c4733(0x6d0)])(_0x2c4733(0x495))['update'](_0x4323c4)['digest']('hex'),_0x44928f=''+(0x0,J[_0x2c4733(0x897)])(this[_0x2c4733(0x35d)],_0x3d5f29+'.mp3');if(F[_0x2c4733(0x5d1)](_0x44928f))return this[_0x2c4733(0x56b)][_0x2c4733(0x608)](this[_0x2c4733(0x6dd)]+'\x20('+this[_0x2c4733(0x3f0)][_0x2c4733(0x547)]+_0x2c4733(0x15a)),J['default']['basename'](_0x44928f);let _0x5085e7=''+(0x0,J[_0x2c4733(0x897)])(this['storePath'],'temp-'+_0x3d5f29+_0x2c4733(0x31b));if((0x0,L[_0x2c4733(0x7ca)])(_0x4323c4)){let _0x69c054=new Date()[_0x2c4733(0x409)](),_0x7149ac=_0x4323c4+_0x2c4733(0x7e5)+_0x69c054,_0x59cd4b=await ee[_0x2c4733(0x678)][_0x2c4733(0x76d)](_0x7149ac,{'responseType':_0x2c4733(0x6c2)});F['writeFileSync'](_0x5085e7,_0x59cd4b[_0x2c4733(0x5c9)]);}else{let _0x46c340=Buffer['from'](_0x4323c4,_0x2c4733(0x1d9));F[_0x2c4733(0x314)](_0x5085e7,_0x46c340);}return new Promise((_0x1ffa58,_0x4dbe32)=>{const _0x1239bf=_0x2c4733;(0x0,Fe['exec'])(Ds[_0x1239bf(0x678)]['path']+_0x1239bf(0x7ef)+_0x5085e7+_0x1239bf(0x561)+_0x44928f+_0x1239bf(0x52f),_0x4e5f19=>{const _0x2dcc1c=_0x1239bf;if(F[_0x2dcc1c(0x80b)](_0x5085e7),_0x4e5f19){this[_0x2dcc1c(0x56b)][_0x2dcc1c(0x608)](this['instanceName']+'\x20('+this[_0x2dcc1c(0x3f0)][_0x2dcc1c(0x547)]+_0x2dcc1c(0x4ad)),_0x4dbe32(_0x4e5f19);return;}this['logger'][_0x2dcc1c(0x608)](this[_0x2dcc1c(0x6dd)]+'\x20('+this[_0x2dcc1c(0x3f0)][_0x2dcc1c(0x547)]+_0x2dcc1c(0x3dd)),_0x1ffa58(J[_0x2dcc1c(0x678)]['basename'](_0x44928f));});});}async[a0_0x5ca971(0x5ad)](_0x3e4233){const _0xb910dc=a0_0x5ca971;let _0x31f2c5={},_0x4ba912=_0xb910dc(0x69c);if(_0x3e4233[_0xb910dc(0x5ad)]?.[_0xb910dc(0x4b5)]){_0x4ba912=_0x3e4233['buttonMessage'][_0xb910dc(0x4b5)]?.['mediatype'][_0xb910dc(0x6fb)]()??'TEXT',_0x31f2c5[_0xb910dc(0x5ea)]=_0x4ba912[_0xb910dc(0x763)]()+'Message';let _0x267532=await this[_0xb910dc(0x658)](_0x3e4233[_0xb910dc(0x5ad)][_0xb910dc(0x4b5)]);_0x31f2c5[_0xb910dc(0x4f4)]=_0x267532[_0xb910dc(0x4f4)][_0x31f2c5[_0xb910dc(0x5ea)]],_0x31f2c5[_0xb910dc(0x571)]='*'+_0x3e4233[_0xb910dc(0x5ad)][_0xb910dc(0x451)]+'*\x0a\x0a'+_0x3e4233[_0xb910dc(0x5ad)][_0xb910dc(0x44d)];}let _0x520526={'text':_0x3e4233[_0xb910dc(0x5ad)][_0xb910dc(0x788)][_0xb910dc(0x7a8)](_0x28e3fb=>_0x28e3fb[_0xb910dc(0x2eb)]),'ids':_0x3e4233[_0xb910dc(0x5ad)]['buttons'][_0xb910dc(0x7a8)](_0x381df9=>_0x381df9[_0xb910dc(0x62f)])};if(!(0x0,L['arrayUnique'])(_0x520526['text'])||!(0x0,L[_0xb910dc(0x1c2)])(_0x520526[_0xb910dc(0x45d)]))throw new m('Button\x20texts\x20cannot\x20be\x20repeated','Button\x20IDs\x20cannot\x20be\x20repeated.');return await this['sendMessageWithTyping'](_0x3e4233['number'],{'buttonsMessage':{'text':_0x31f2c5?.[_0xb910dc(0x5ea)]?void 0x0:_0x3e4233[_0xb910dc(0x5ad)][_0xb910dc(0x451)],'contentText':_0x31f2c5?.[_0xb910dc(0x571)]??_0x3e4233['buttonMessage'][_0xb910dc(0x44d)],'footerText':_0x3e4233[_0xb910dc(0x5ad)]?.[_0xb910dc(0x5ed)],'buttons':_0x3e4233[_0xb910dc(0x5ad)][_0xb910dc(0x788)]['map'](_0x137734=>({'buttonText':{'displayText':_0x137734[_0xb910dc(0x2eb)]},'buttonId':_0x137734[_0xb910dc(0x62f)],'type':0x1})),'headerType':w[_0xb910dc(0x386)][_0xb910dc(0x3e6)][_0xb910dc(0x6d7)][_0xb910dc(0x2c6)][_0x4ba912],[_0x31f2c5?.[_0xb910dc(0x5ea)]]:_0x31f2c5?.[_0xb910dc(0x4f4)]}},_0x3e4233?.[_0xb910dc(0x306)]);}async[a0_0x5ca971(0x184)](_0x230620){const _0x497cc7=a0_0x5ca971;return await this[_0x497cc7(0x3bc)](_0x230620[_0x497cc7(0x274)],{'locationMessage':{'degreesLatitude':_0x230620[_0x497cc7(0x184)]['latitude'],'degreesLongitude':_0x230620[_0x497cc7(0x184)][_0x497cc7(0x520)],'name':_0x230620['locationMessage']?.[_0x497cc7(0x41c)],'address':_0x230620[_0x497cc7(0x184)]?.[_0x497cc7(0x60c)]}},_0x230620?.[_0x497cc7(0x306)]);}async[a0_0x5ca971(0x68b)](_0x3874b1){const _0x564941=a0_0x5ca971;let _0x259b50={},_0x190bc5=async _0x3e1752=>{const _0x2ff493=a0_0x2d21;let _0xc06d91=_0x2ff493(0x696)+_0x3e1752[_0x2ff493(0x72b)]+_0x2ff493(0x437)+_0x3e1752[_0x2ff493(0x72b)]+'\x0a';_0x3e1752['organization']&&(_0xc06d91+=_0x2ff493(0x802)+_0x3e1752['organization']+';\x0a'),_0x3e1752['email']&&(_0xc06d91+=_0x2ff493(0x882)+_0x3e1752[_0x2ff493(0x428)]+'\x0a'),_0x3e1752[_0x2ff493(0x768)]&&(_0xc06d91+='URL:'+_0x3e1752[_0x2ff493(0x768)]+'\x0a');let _0x58b605='',_0x2d1731=0x1;if(_0x3e1752['phoneNumber']){let _0x49b194=_0x3e1752[_0x2ff493(0x4ed)][_0x2ff493(0x266)]('|');for(let _0x143e8a of _0x49b194){let _0x52c32b=await this['whatsappNumber']({'numbers':[_0x143e8a]}),_0x586c7a=(_0x52c32b[_0x2ff493(0x532)]>0x0?_0x52c32b[0x0][_0x2ff493(0x5e2)]:this[_0x2ff493(0x30b)](_0x143e8a))[_0x2ff493(0x3d2)](_0x2ff493(0x4a7),'');_0x58b605+=_0x2ff493(0x390)+_0x2d1731+_0x2ff493(0x399)+_0x586c7a+':'+_0x143e8a+_0x2ff493(0x34d)+_0x2d1731+_0x2ff493(0x217),_0x2d1731++;}}return _0xc06d91+=_0x58b605+'END:VCARD',_0xc06d91;};return _0x3874b1[_0x564941(0x68b)][_0x564941(0x532)]===0x1?_0x259b50[_0x564941(0x68b)]={'displayName':_0x3874b1[_0x564941(0x68b)][0x0][_0x564941(0x72b)],'vcard':await _0x190bc5(_0x3874b1[_0x564941(0x68b)][0x0])}:_0x259b50[_0x564941(0x3d3)]={'displayName':_0x3874b1[_0x564941(0x68b)][_0x564941(0x532)]+'\x20contacts','contacts':await Promise[_0x564941(0x6de)](_0x3874b1['contactMessage'][_0x564941(0x7a8)](async _0x56572e=>({'displayName':_0x56572e[_0x564941(0x72b)],'vcard':await _0x190bc5(_0x56572e)})))},await this[_0x564941(0x3bc)](_0x3874b1[_0x564941(0x274)],{..._0x259b50},_0x3874b1?.[_0x564941(0x306)]);}async['reactionMessage'](_0x16e3d1){const _0x337e2c=a0_0x5ca971;return await this['sendMessageWithTyping'](_0x16e3d1[_0x337e2c(0x4fa)][_0x337e2c(0x74a)][_0x337e2c(0x509)],{'reactionMessage':{'key':_0x16e3d1[_0x337e2c(0x4fa)][_0x337e2c(0x74a)],'text':_0x16e3d1[_0x337e2c(0x4fa)][_0x337e2c(0x3eb)]}});}async[a0_0x5ca971(0x5c1)](_0x226ccb){const _0x5352a7=a0_0x5ca971;let _0x4e12b5=[];for await(let _0x257021 of _0x226ccb[_0x5352a7(0x78c)]){let _0x52d0c5=this[_0x5352a7(0x30b)](_0x257021),_0x4ae66a=!0x1;try{if((0x0,w[_0x5352a7(0x1fd)])(_0x52d0c5)){let _0x207868=(await this[_0x5352a7(0x7fa)][_0x5352a7(0x739)]['findOne']({'where':{'_id':_0x52d0c5}},this[_0x5352a7(0x3f0)][_0x5352a7(0x547)]))[_0x5352a7(0x5c8)];_0x207868?(_0x4ae66a=!0x0,_0x4e12b5['push'](new pe(_0x207868['id'],_0x4ae66a,_0x207868?.[_0x5352a7(0x5c6)]))):(_0x207868=await this['findGroup']({'groupJid':_0x52d0c5},_0x5352a7(0x7c1)),_0x4e12b5['push'](new pe(_0x207868['id'],!!_0x207868?.['id'],_0x207868?.[_0x5352a7(0x5c6)])));}else{if(_0x52d0c5['includes'](_0x5352a7(0x3b7)))_0x4e12b5[_0x5352a7(0x59a)](new pe(_0x52d0c5,!0x0));else{let _0x1fabaf=(await this['client']['onWhatsApp'](_0x52d0c5))[0x0];_0x4e12b5[_0x5352a7(0x59a)](new pe(_0x1fabaf[_0x5352a7(0x5e2)],_0x1fabaf[_0x5352a7(0x160)]));}}}catch{(0x0,w[_0x5352a7(0x1fd)])(_0x52d0c5)||await this['deleteImportedChat'](_0x52d0c5),_0x4e12b5[_0x5352a7(0x59a)](new pe(_0x257021,!0x1));}}return _0x4e12b5;}async[a0_0x5ca971(0x311)](_0x293f12){const _0x5c6adb=a0_0x5ca971;try{await this[_0x5c6adb(0x7fa)]['chat']['findOne']({'where':{'_id':_0x293f12,'imported':!0x0}},this['instance'][_0x5c6adb(0x547)])&&(await this['repository']['chat'][_0x5c6adb(0x152)](_0x293f12,this[_0x5c6adb(0x3f0)][_0x5c6adb(0x547)]),this['logger'][_0x5c6adb(0x1d2)](_0x5c6adb(0x188)+_0x293f12+'\x20foi\x20removido\x20por\x20não\x20ser\x20válido.'));}catch(_0x682638){let _0xc7488f=_0x5c6adb(0x655),_0x4f1c08=_0x682638 instanceof Error?_0x682638['message']:typeof _0x682638==_0x5c6adb(0x487)?JSON[_0x5c6adb(0x179)](_0x682638):_0x682638,_0x252e5b=_0xc7488f+':\x20'+_0x4f1c08;this['logger']['error'](this['instanceName']+'\x20('+this['instance'][_0x5c6adb(0x547)]+_0x5c6adb(0x3a3)+_0x252e5b);}}async[a0_0x5ca971(0x5d6)](_0x26d73c){const _0x232eaf=a0_0x5ca971;try{let _0xebdb0b=_0x26d73c[_0x232eaf(0x1ed)][_0x232eaf(0x587)](_0x2d412a=>(0x0,w[_0x232eaf(0x1fd)])(_0x2d412a[_0x232eaf(0x509)])||(0x0,w['isJidUser'])(_0x2d412a[_0x232eaf(0x509)]))[_0x232eaf(0x7a8)](_0x59f04f=>({'remoteJid':_0x59f04f[_0x232eaf(0x509)],'fromMe':_0x59f04f[_0x232eaf(0x751)],'id':_0x59f04f['id']}));await this[_0x232eaf(0x2cc)][_0x232eaf(0x1ed)](_0xebdb0b);let _0x1e3575=_0xebdb0b[_0x232eaf(0x7a8)](_0x2f340e=>this[_0x232eaf(0x48e)](_0x2f340e,{'status':_0x232eaf(0x378),'owner':this['instance'][_0x232eaf(0x547)]})),_0x2228f1=_0xebdb0b[_0x232eaf(0x7a8)](_0xd18bc2=>this[_0x232eaf(0x7fa)][_0x232eaf(0x739)][_0x232eaf(0x743)]({'where':{'_id':_0xd18bc2[_0x232eaf(0x509)]}},{'unreadcount':0x0},this[_0x232eaf(0x3f0)][_0x232eaf(0x547)])),[_0x1e4700,_0x185f4e]=await Promise['all']([Promise['all'](_0x1e3575),Promise['all'](_0x2228f1)]);return _0x185f4e[_0x232eaf(0x587)](_0x5291f8=>_0x5291f8!==null)[_0x232eaf(0x491)](_0x5b682f=>{const _0xb51480=_0x232eaf;V(this[_0xb51480(0x6dd)],_0xb51480(0x795),{'chat':_0x5b682f});}),{'message':'Read\x20messages','read':'success'};}catch(_0x125333){let _0x487d3d=_0x232eaf(0x37a),_0x358893=_0x125333 instanceof Error?_0x125333[_0x232eaf(0x4f4)]:typeof _0x125333==_0x232eaf(0x487)?JSON[_0x232eaf(0x179)](_0x125333):_0x125333,_0x5d2002=_0x487d3d+':\x20'+_0x358893;throw this[_0x232eaf(0x56b)]['error'](this[_0x232eaf(0x6dd)]+'\x20('+this['instance'][_0x232eaf(0x547)]+_0x232eaf(0x3a3)+_0x5d2002),new O(_0x5d2002);}}async[a0_0x5ca971(0x34e)](_0x2b9625){const _0x197540=a0_0x5ca971;let _0x57ac65={'where':{'key':{'remoteJid':_0x2b9625}},'limit':0x1},_0x242f80=await this[_0x197540(0x1fb)](_0x57ac65);return _0x242f80||(this[_0x197540(0x56b)][_0x197540(0x2b1)](_0x197540(0x871)+_0x2b9625),null);}async[a0_0x5ca971(0x235)](_0x2493c2){const _0x32db0d=a0_0x5ca971;this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x32db0d(0x547)]+_0x32db0d(0x891));try{let _0x270eaf=_0x2493c2[_0x32db0d(0x5d7)],_0x31a94a=_0x2493c2[_0x32db0d(0x739)];if(!_0x270eaf&&_0x31a94a?_0x270eaf=await this[_0x32db0d(0x34e)](_0x31a94a):(_0x270eaf=_0x2493c2[_0x32db0d(0x5d7)],_0x270eaf[_0x32db0d(0x684)]=_0x270eaf?.[_0x32db0d(0x684)]??Date[_0x32db0d(0x7d1)](),_0x31a94a=_0x270eaf?.[_0x32db0d(0x74a)]?.[_0x32db0d(0x509)]),!_0x270eaf||Object[_0x32db0d(0x418)](_0x270eaf)[_0x32db0d(0x532)]===0x0)throw new q('Last\x20message\x20not\x20found');this['logger'][_0x32db0d(0x608)](this['instanceName']+'\x20('+this[_0x32db0d(0x3f0)][_0x32db0d(0x547)]+_0x32db0d(0x319)+_0x31a94a);try{await this[_0x32db0d(0x2cc)][_0x32db0d(0x2f9)]({'archive':_0x2493c2[_0x32db0d(0x2f6)],'lastMessages':[_0x270eaf]},this[_0x32db0d(0x30b)](_0x31a94a));}catch(_0x52c870){let _0x491311=_0x32db0d(0x1ce)+_0x31a94a,_0x56dd11=_0x52c870 instanceof Error?_0x52c870[_0x32db0d(0x4f4)]:typeof _0x52c870=='object'?JSON[_0x32db0d(0x179)](_0x52c870):_0x52c870,_0x1b5ea6=_0x491311+':\x20'+_0x56dd11;this[_0x32db0d(0x56b)][_0x32db0d(0x2b1)](this['instanceName']+'\x20('+this['instance'][_0x32db0d(0x547)]+_0x32db0d(0x3a3)+_0x1b5ea6);}this[_0x32db0d(0x56b)][_0x32db0d(0x608)](this[_0x32db0d(0x6dd)]+'\x20('+this[_0x32db0d(0x3f0)][_0x32db0d(0x547)]+_0x32db0d(0x693)+_0x31a94a);let _0x686205=await this[_0x32db0d(0x7fa)][_0x32db0d(0x739)][_0x32db0d(0x743)]({'where':{'_id':_0x270eaf?.['key']?.[_0x32db0d(0x509)]}},{'archived':_0x2493c2[_0x32db0d(0x2f6)]},this[_0x32db0d(0x3f0)]['wuid']);return _0x686205?(this[_0x32db0d(0x56b)][_0x32db0d(0x608)](this[_0x32db0d(0x6dd)]+'\x20('+this[_0x32db0d(0x3f0)][_0x32db0d(0x547)]+_0x32db0d(0x2fc)+JSON[_0x32db0d(0x179)](_0x686205)),V(this[_0x32db0d(0x6dd)],_0x32db0d(0x795),{'chat':_0x686205})):this[_0x32db0d(0x56b)][_0x32db0d(0x2b1)](this[_0x32db0d(0x6dd)]+'\x20('+this['instance'][_0x32db0d(0x547)]+_0x32db0d(0x7fc)+_0x31a94a),{'chatId':_0x31a94a,'archived':_0x2493c2[_0x32db0d(0x2f6)]};}catch(_0x26b523){let _0x27c40b=_0x32db0d(0x67b),_0x4e6645=_0x26b523 instanceof Error?_0x26b523[_0x32db0d(0x4f4)]:typeof _0x26b523==_0x32db0d(0x487)?JSON['stringify'](_0x26b523):_0x26b523,_0x42860d=_0x27c40b+':\x20'+_0x4e6645;throw this[_0x32db0d(0x56b)][_0x32db0d(0x2b1)](this[_0x32db0d(0x6dd)]+'\x20('+this[_0x32db0d(0x3f0)]['wuid']+'):\x20'+_0x42860d),new O(_0x42860d);}}async[a0_0x5ca971(0x152)](_0x2b1e13){const _0x1d1fa5=a0_0x5ca971;this[_0x1d1fa5(0x56b)][_0x1d1fa5(0x608)](this['instanceName']+'\x20('+this[_0x1d1fa5(0x3f0)][_0x1d1fa5(0x547)]+'):Delete\x20chat');try{let _0x44756e=await this[_0x1d1fa5(0x34e)](_0x2b1e13);if(!_0x44756e||Object[_0x1d1fa5(0x418)](_0x44756e)['length']===0x0)throw new q('Last\x20message\x20not\x20found');let _0x1fd9df=_0x44756e[0x0];this['logger'][_0x1d1fa5(0x608)](this[_0x1d1fa5(0x6dd)]+'\x20('+this[_0x1d1fa5(0x3f0)][_0x1d1fa5(0x547)]+_0x1d1fa5(0x18d)+_0x2b1e13);try{await this[_0x1d1fa5(0x2cc)][_0x1d1fa5(0x2f9)]({'delete':!0x0,'lastMessages':[{'key':_0x1fd9df['key'],'messageTimestamp':_0x1fd9df[_0x1d1fa5(0x684)]}]},this[_0x1d1fa5(0x30b)](_0x2b1e13));}catch(_0x5fe3a8){this[_0x1d1fa5(0x56b)][_0x1d1fa5(0x2b1)](_0x1d1fa5(0x1ce)+_0x2b1e13+':\x20'+_0x5fe3a8[_0x1d1fa5(0x7b1)]());}this[_0x1d1fa5(0x56b)][_0x1d1fa5(0x608)](this[_0x1d1fa5(0x6dd)]+'\x20('+this['instance'][_0x1d1fa5(0x547)]+_0x1d1fa5(0x693)+_0x2b1e13);return;}catch(_0x2a5885){throw this[_0x1d1fa5(0x56b)]['error'](this['instanceName']+'\x20('+this[_0x1d1fa5(0x3f0)][_0x1d1fa5(0x547)]+'):Error\x20occurred\x20while\x20archiving\x20chat:\x20'+_0x2a5885[_0x1d1fa5(0x7b1)]()),new O({'archived':!0x1,'message':[_0x1d1fa5(0x6bf),_0x2a5885[_0x1d1fa5(0x7b1)]()]});}}async[a0_0x5ca971(0x612)](_0x283422){const _0x124d4d=a0_0x5ca971;try{let _0x43d4a6=await this[_0x124d4d(0x2cc)][_0x124d4d(0x37e)](_0x283422[_0x124d4d(0x509)],{'delete':_0x283422});try{let _0x4b1abf=await this[_0x124d4d(0x48e)](_0x283422,{'status':_0x124d4d(0x414),'owner':this[_0x124d4d(0x3f0)]['wuid']});this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x124d4d(0x3f0)]['wuid']+_0x124d4d(0x806)+_0x4b1abf);}catch(_0x40c257){this['logger'][_0x124d4d(0x2b1)]('Error\x20updating\x20message\x20status:'+_0x40c257);}return _0x43d4a6;}catch(_0x33d5d2){throw new O(_0x124d4d(0x19c),_0x33d5d2?.['toString']());}}async[a0_0x5ca971(0x3be)](_0x307c8a){const _0xb04a25=a0_0x5ca971;try{let _0xecc9f3=_0x307c8a?.[_0xb04a25(0x4f4)]?_0x307c8a:await this['getMessage'](_0x307c8a['key'],!0x0);for(let _0x40ab6d of $a)_0xecc9f3[_0xb04a25(0x4f4)][_0x40ab6d]&&(_0xecc9f3[_0xb04a25(0x4f4)]=_0xecc9f3[_0xb04a25(0x4f4)][_0x40ab6d]['message']);let _0xba56b3,_0x36ac93;for(let _0x2b64ee of Na)if(_0xba56b3=_0xecc9f3[_0xb04a25(0x4f4)][_0x2b64ee],_0xba56b3){_0x36ac93=_0x2b64ee;break;}if(!_0xba56b3)throw _0xb04a25(0x7fd);typeof _0xba56b3[_0xb04a25(0x5ea)]==_0xb04a25(0x487)&&(_0xecc9f3['message']=JSON['parse'](JSON[_0xb04a25(0x179)](_0xecc9f3[_0xb04a25(0x4f4)])));let _0x3cca84=await(0x0,w[_0xb04a25(0x78e)])({'key':_0xecc9f3?.['key'],'message':_0xecc9f3?.['message']},'buffer',{},{'logger':(0x0,Jt[_0xb04a25(0x678)])({'level':'silent'}),'reuploadRequest':this[_0xb04a25(0x2cc)][_0xb04a25(0x405)]});if(!(_0x3cca84 instanceof Buffer))throw new Error(_0xb04a25(0x596));let _0x3218a8=this[_0xb04a25(0x601)][_0xb04a25(0x76d)](_0xb04a25(0x868)),_0x4c297b,_0x2c42ca;if(_0xba56b3['fileName'])_0x4c297b=_0xba56b3[_0xb04a25(0x2a1)];else{let _0xefc128=_0xba56b3['mimetype']?.[_0xb04a25(0x3ca)](/\/(\w+)/),_0x7a8591=_0xefc128?_0xefc128[0x1]:null;if(!_0x7a8591)throw new Error('File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message');_0x4c297b=(0x0,Y['v4'])()+'.'+_0x7a8591;}_0x36ac93==='audioMessage'?_0x2c42ca=_0xb04a25(0x3c0)+await this['convertaudioMP3'](_0x3cca84[_0xb04a25(0x7b1)]('base64')):(await this[_0xb04a25(0x50f)](_0x3cca84,_0x4c297b),_0x2c42ca='/media/'+_0x4c297b);let _0x54fb0b=this[_0xb04a25(0x601)][_0xb04a25(0x76d)](_0xb04a25(0x69a))['URL'];if(!_0x54fb0b){let _0x3926b2=this[_0xb04a25(0x601)]['get'](_0xb04a25(0x77d));_0x54fb0b='https://'+(_0x3926b2&&_0x3926b2[_0xb04a25(0x433)][_0xb04a25(0x266)]('/')[0x4]);}_0x2c42ca=''+_0x54fb0b+_0x2c42ca;let _0x3539fc=0xc*0x3c*0x3c*0x3e8,_0x545405={'where':{'_id':_0xecc9f3[_0xb04a25(0x74a)]['id']}},_0x1b90c0={'message_normalized.fileUrl':_0x2c42ca,'message_normalized.expires_fileUrl':Date[_0xb04a25(0x7d1)]()+_0x3539fc};try{let _0x4adc15=await this[_0xb04a25(0x7fa)][_0xb04a25(0x4f4)]['update'](_0x545405,_0x1b90c0,this[_0xb04a25(0x3f0)][_0xb04a25(0x547)]);_0x4adc15&&V(this[_0xb04a25(0x6dd)],'messages',{'message':_0x4adc15});}catch(_0x2e06b5){let _0x2bec0e='Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage',_0x2043fa=_0x2e06b5 instanceof Error?_0x2e06b5[_0xb04a25(0x4f4)]:typeof _0x2e06b5==_0xb04a25(0x487)?JSON[_0xb04a25(0x179)](_0x2e06b5):_0x2e06b5,_0x16abe8=_0x2bec0e+':\x20'+_0x2043fa;this['logger']['error'](this['instanceName']+'\x20('+this[_0xb04a25(0x3f0)][_0xb04a25(0x547)]+_0xb04a25(0x3a3)+_0x16abe8);}return{'mediaType':_0x36ac93,'fileName':_0xba56b3['fileName'],'caption':_0xba56b3[_0xb04a25(0x572)],'size':{'fileLength':_0xba56b3['fileLength'],'height':_0xba56b3['height'],'width':_0xba56b3[_0xb04a25(0x199)]},'mimetype':_0xba56b3[_0xb04a25(0x1db)],'base64':_0x3cca84['toString'](_0xb04a25(0x1d9)),'fileUrl':_0x2c42ca,'expires_fileUrl':Date['now']()+_0x3539fc};}catch(_0x5da0cd){let _0x808506=_0xb04a25(0x7e7),_0x20c923=_0x5da0cd instanceof Error?_0x5da0cd[_0xb04a25(0x4f4)]:typeof _0x5da0cd==_0xb04a25(0x487)?JSON[_0xb04a25(0x179)](_0x5da0cd):_0x5da0cd,_0x27e4e7=_0x808506+':\x20'+_0x20c923;throw this[_0xb04a25(0x56b)][_0xb04a25(0x2b1)](this[_0xb04a25(0x6dd)]+'\x20('+this[_0xb04a25(0x3f0)][_0xb04a25(0x547)]+'):\x20'+_0x27e4e7),new m(_0x27e4e7);}}async[a0_0x5ca971(0x50f)](_0x52b11b,_0x15149c){const _0x34f837=a0_0x5ca971;let _0x4d6604=J['default'][_0x34f837(0x897)](__dirname,_0x34f837(0x363));F[_0x34f837(0x5d1)](_0x4d6604)||F[_0x34f837(0x1ca)](_0x4d6604,{'recursive':!0x0});let _0x5961c3=J[_0x34f837(0x678)][_0x34f837(0x897)](_0x4d6604,_0x15149c);return new Promise((_0x1bfd71,_0x24bf1d)=>{F['writeFile'](_0x5961c3,_0x52b11b,_0x5ebce1=>{const _0xec00e8=a0_0x2d21;_0x5ebce1?(this['logger']['error']('Error\x20writing\x20file:\x20'+(_0x5ebce1 instanceof Error?_0x5ebce1[_0xec00e8(0x4f4)]:JSON[_0xec00e8(0x179)](_0x5ebce1,null,0x2))),_0x24bf1d(_0x5ebce1)):(this[_0xec00e8(0x56b)][_0xec00e8(0x2a9)](_0xec00e8(0x5b4)+_0x5961c3),_0x1bfd71(_0x5961c3));});});}async[a0_0x5ca971(0x359)](_0x3114a6){const _0x32fe0c=a0_0x5ca971;return await this['repository'][_0x32fe0c(0x821)][_0x32fe0c(0x2d4)](_0x3114a6,this[_0x32fe0c(0x3f0)][_0x32fe0c(0x547)]);}async['fetchLabels'](){const _0x11b141=a0_0x5ca971;return await this[_0x11b141(0x7fa)][_0x11b141(0x750)][_0x11b141(0x2d4)]({'where':{}},this[_0x11b141(0x3f0)]['wuid']);}async[a0_0x5ca971(0x1fb)](_0x298380){const _0xa9c729=a0_0x5ca971;return await this[_0xa9c729(0x7fa)]['message'][_0xa9c729(0x2d4)](_0x298380,this[_0xa9c729(0x3f0)]['wuid']);}async['fetchChats'](){const _0x4af272=a0_0x5ca971;return this[_0x4af272(0x7fa)]['chat'][_0x4af272(0x65e)](this[_0x4af272(0x3f0)][_0x4af272(0x547)]),this['repository'][_0x4af272(0x739)]['updateMissingEtiquetas'](this['instance']['wuid']),this[_0x4af272(0x7fa)][_0x4af272(0x739)]['updateMissingTags'](this[_0x4af272(0x3f0)][_0x4af272(0x547)]),this[_0x4af272(0x7fa)]['chat'][_0x4af272(0x2b7)](this[_0x4af272(0x3f0)][_0x4af272(0x547)]),await this[_0x4af272(0x7fa)][_0x4af272(0x739)][_0x4af272(0x2d4)]({'where':{}},this[_0x4af272(0x3f0)][_0x4af272(0x547)]);}async[a0_0x5ca971(0x279)](_0x3c76d0){const _0x488e52=a0_0x5ca971;try{if(!Array[_0x488e52(0x4d0)](_0x3c76d0)||_0x3c76d0[_0x488e52(0x532)]===0x0)throw new Error(_0x488e52(0x5a7));let _0x2fc1dd=[],_0x441bef=[];for(let _0x4681b3 of _0x3c76d0){if(_0x4681b3[_0x488e52(0x4a6)])_0x4681b3['_id']=this[_0x488e52(0x30b)](_0x4681b3['_id']);else continue;await this['repository'][_0x488e52(0x739)][_0x488e52(0x640)]({'where':{'_id':_0x4681b3[_0x488e52(0x4a6)]}},this[_0x488e52(0x3f0)][_0x488e52(0x547)])?_0x441bef[_0x488e52(0x59a)]({'_id':_0x4681b3['_id'],'leadInfo':_0x4681b3[_0x488e52(0x341)],'owner':this['instance'][_0x488e52(0x547)]}):_0x2fc1dd[_0x488e52(0x59a)]({'_id':_0x4681b3['_id'],'owner':this[_0x488e52(0x3f0)][_0x488e52(0x547)],'leadInfo':_0x4681b3[_0x488e52(0x341)],'imported':!0x0});}return _0x441bef[_0x488e52(0x532)]>0x0&&await this[_0x488e52(0x7fa)][_0x488e52(0x739)][_0x488e52(0x829)](_0x441bef[_0x488e52(0x7a8)](_0x1e6f11=>({'query':{'where':{'_id':_0x1e6f11['_id'],'owner':this[_0x488e52(0x3f0)][_0x488e52(0x547)]}},'update':_0x1e6f11}))),_0x2fc1dd['length']>0x0&&await this[_0x488e52(0x7fa)][_0x488e52(0x739)][_0x488e52(0x493)](_0x2fc1dd,this[_0x488e52(0x3f0)]['wuid']),{'updated':_0x441bef[_0x488e52(0x532)],'inserted':_0x2fc1dd[_0x488e52(0x532)]};}catch(_0x58adf3){let _0x20a7ec=_0x488e52(0x505),_0x105a07=_0x58adf3 instanceof Error?_0x58adf3[_0x488e52(0x4f4)]:typeof _0x58adf3=='object'?JSON[_0x488e52(0x179)](_0x58adf3):_0x58adf3,_0x32b915=_0x20a7ec+':\x20'+_0x105a07;throw this[_0x488e52(0x56b)][_0x488e52(0x2b1)](this[_0x488e52(0x6dd)]+'\x20('+this['instance'][_0x488e52(0x547)]+_0x488e52(0x3a3)+_0x32b915),new m(_0x32b915);}}async[a0_0x5ca971(0x64d)](_0x32f0be){const _0x4ee432=a0_0x5ca971;try{if(!Array['isArray'](_0x32f0be)||_0x32f0be['length']===0x0)throw new Error('Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.');let _0x103d9c=0x64,_0x2b38bd=0x0;for(let _0x1ca700=0x0;_0x1ca700<_0x32f0be['length'];_0x1ca700+=_0x103d9c){let _0x1cc665=_0x32f0be[_0x4ee432(0x3f4)](_0x1ca700,_0x1ca700+_0x103d9c),{updated:_0x503156}=await this[_0x4ee432(0x760)](_0x1cc665);_0x2b38bd+=_0x503156;}return{'updated':_0x2b38bd};}catch(_0x1e4983){let _0x1cf69b=_0x4ee432(0x505),_0x206fc4=_0x1e4983 instanceof Error?_0x1e4983['message']:typeof _0x1e4983==_0x4ee432(0x487)?JSON['stringify'](_0x1e4983):_0x1e4983,_0x51becc=_0x1cf69b+':\x20'+_0x206fc4;throw this['logger'][_0x4ee432(0x2b1)](this['instanceName']+'\x20('+this[_0x4ee432(0x3f0)][_0x4ee432(0x547)]+_0x4ee432(0x3a3)+_0x51becc),new m(_0x51becc);}}async[a0_0x5ca971(0x760)](_0x25e53b){const _0x5aeb08=a0_0x5ca971;try{let _0x18d458=await this[_0x5aeb08(0x7fa)][_0x5aeb08(0x750)][_0x5aeb08(0x2d4)]({'where':{}},this[_0x5aeb08(0x3f0)][_0x5aeb08(0x547)]),_0x5a0037=new Set(_0x18d458[_0x5aeb08(0x7a8)](_0xaf1300=>_0xaf1300[_0x5aeb08(0x4a6)])),_0x149c0a=[],_0x5e26f3=[];for(let _0x424386 of _0x25e53b){if(!_0x424386['_id'])continue;_0x424386[_0x5aeb08(0x4a6)]=this['createJid'](_0x424386['_id']);let _0x46058c=await this[_0x5aeb08(0x7fa)][_0x5aeb08(0x739)][_0x5aeb08(0x640)]({'where':{'_id':_0x424386[_0x5aeb08(0x4a6)]}},this[_0x5aeb08(0x3f0)]['wuid']),_0x52cf5e={};if(Object[_0x5aeb08(0x327)](_0x424386['leadInfo'])[_0x5aeb08(0x491)](([_0x395e9b,_0x1e94ea])=>{const _0x73ba3f=_0x5aeb08;_0x52cf5e[_0x73ba3f(0x48b)+_0x395e9b]=_0x1e94ea;}),_0x46058c&&!_0x46058c[_0x5aeb08(0x4e9)]){let _0x15a2e7=(_0x424386['leadInfo']['etiquetas']||[])[_0x5aeb08(0x587)](_0x212098=>_0x5a0037[_0x5aeb08(0x64e)](_0x212098)),_0x41cc30=new Set(_0x46058c['leadInfo']['etiquetas']||[]),_0x5a4415=_0x15a2e7[_0x5aeb08(0x587)](_0x2082ac=>!_0x41cc30[_0x5aeb08(0x64e)](_0x2082ac)),_0x4337aa=[..._0x41cc30]['filter'](_0x3722b4=>!_0x15a2e7[_0x5aeb08(0x839)](_0x3722b4));_0x5e26f3[_0x5aeb08(0x59a)](..._0x5a4415[_0x5aeb08(0x7a8)](_0x43f830=>this[_0x5aeb08(0x36e)](_0x43f830,_0x424386[_0x5aeb08(0x4a6)]))),_0x5e26f3[_0x5aeb08(0x59a)](..._0x4337aa[_0x5aeb08(0x7a8)](_0x34c2c2=>this['RemoveChatLabel'](_0x34c2c2,_0x424386['_id']))),_0x424386['leadInfo'][_0x5aeb08(0x5e1)]=_0x15a2e7,_0x149c0a[_0x5aeb08(0x59a)]({'query':{'where':{'_id':_0x424386['_id'],'owner':this['instance']['wuid']}},'update':_0x52cf5e});}else _0x52cf5e[_0x5aeb08(0x4e9)]=!0x0,_0x149c0a['push']({'query':{'where':{'_id':_0x424386[_0x5aeb08(0x4a6)],'owner':this[_0x5aeb08(0x3f0)]['wuid']}},'update':_0x52cf5e});}let _0x270a3d=await this[_0x5aeb08(0x7fa)]['chat'][_0x5aeb08(0x829)](_0x149c0a);return await Promise[_0x5aeb08(0x6de)](_0x5e26f3),{'updated':_0x270a3d};}catch(_0x5e6c1a){let _0x2ebe80=_0x5aeb08(0x505),_0x410da5=_0x5e6c1a instanceof Error?_0x5e6c1a[_0x5aeb08(0x4f4)]:typeof _0x5e6c1a==_0x5aeb08(0x487)?JSON[_0x5aeb08(0x179)](_0x5e6c1a):_0x5e6c1a,_0x35851e=_0x2ebe80+':\x20'+_0x410da5;throw this[_0x5aeb08(0x56b)][_0x5aeb08(0x2b1)](this[_0x5aeb08(0x6dd)]+'\x20('+this[_0x5aeb08(0x3f0)][_0x5aeb08(0x547)]+_0x5aeb08(0x3a3)+_0x35851e),new m(_0x35851e);}}async[a0_0x5ca971(0x734)](){const _0x4e7b2e=a0_0x5ca971;return await this[_0x4e7b2e(0x2cc)][_0x4e7b2e(0x734)]();}async[a0_0x5ca971(0x40a)](_0x353681){const _0x38bfb3=a0_0x5ca971;try{return await this[_0x38bfb3(0x2cc)]['updateReadReceiptsPrivacy'](_0x353681[_0x38bfb3(0x685)][_0x38bfb3(0x3e3)]),await this[_0x38bfb3(0x2cc)][_0x38bfb3(0x223)](_0x353681[_0x38bfb3(0x685)][_0x38bfb3(0x669)]),await this[_0x38bfb3(0x2cc)][_0x38bfb3(0x74f)](_0x353681[_0x38bfb3(0x685)][_0x38bfb3(0x2f7)]),await this[_0x38bfb3(0x2cc)][_0x38bfb3(0x228)](_0x353681['privacySettings'][_0x38bfb3(0x2c3)]),await this[_0x38bfb3(0x2cc)]['updateLastSeenPrivacy'](_0x353681['privacySettings'][_0x38bfb3(0x6bd)]),await this[_0x38bfb3(0x2cc)][_0x38bfb3(0x6a6)](_0x353681[_0x38bfb3(0x685)][_0x38bfb3(0x697)]),this['client']?.['ws']?.['close'](),{'update':_0x38bfb3(0x1e4),'data':{'readreceipts':_0x353681[_0x38bfb3(0x685)]['readreceipts'],'profile':_0x353681[_0x38bfb3(0x685)][_0x38bfb3(0x669)],'status':_0x353681[_0x38bfb3(0x685)]['status'],'online':_0x353681['privacySettings'][_0x38bfb3(0x2c3)],'last':_0x353681[_0x38bfb3(0x685)][_0x38bfb3(0x6bd)],'groupadd':_0x353681[_0x38bfb3(0x685)][_0x38bfb3(0x697)]}};}catch(_0x36ea2b){let _0x5bf69f=_0x38bfb3(0x597),_0x3caf91=_0x36ea2b instanceof Error?_0x36ea2b[_0x38bfb3(0x4f4)]:typeof _0x36ea2b=='object'?JSON[_0x38bfb3(0x179)](_0x36ea2b):_0x36ea2b,_0x3501b8=_0x5bf69f+':\x20'+_0x3caf91;throw this[_0x38bfb3(0x56b)][_0x38bfb3(0x2b1)](this['instanceName']+'\x20('+this[_0x38bfb3(0x3f0)][_0x38bfb3(0x547)]+'):\x20'+_0x3501b8),new m(_0x3501b8);}}async['fetchProfile'](_0x1a3f83){const _0x3d80dc=a0_0x5ca971;let _0x4327db=(_0x1a3f83?this[_0x3d80dc(0x30b)](_0x1a3f83):this['client']?.['user']?.['id'])['replace'](/:\d{1,2}@/g,'@');this['logger'][_0x3d80dc(0x608)](this['instanceName']+'\x20('+this['instance'][_0x3d80dc(0x547)]+'):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20'+_0x4327db);let _0x81ea00=await this[_0x3d80dc(0x7fa)][_0x3d80dc(0x821)][_0x3d80dc(0x640)]({'where':{'_id':_0x4327db}},this[_0x3d80dc(0x3f0)][_0x3d80dc(0x547)]),_0x3af7d7=_0x81ea00?_0x81ea00[_0x3d80dc(0x388)]:null;try{let _0xa5bc5=(await this[_0x3d80dc(0x5c1)]({'numbers':[_0x4327db]}))?.[_0x3d80dc(0x778)](),_0x5d8e5b=(await this[_0x3d80dc(0x4b7)](_0x4327db,null,!0x1))[_0x3d80dc(0x6bc)][_0x3d80dc(0x559)],_0x2cc7f0=await this[_0x3d80dc(0x586)](_0xa5bc5?.['jid']),_0x50b972=await this[_0x3d80dc(0x65c)](_0xa5bc5?.[_0x3d80dc(0x5e2)]),_0x250fe3=(await this['findAndUpdateCacheContact'](_0x4327db,null,!0x1))[_0x3d80dc(0x6bc)][_0x3d80dc(0x41c)],_0xd345d2=await this['repository'][_0x3d80dc(0x739)][_0x3d80dc(0x640)]({'where':{'_id':_0x4327db}},this[_0x3d80dc(0x3f0)][_0x3d80dc(0x547)]),_0x1070ad={'imagechat':_0x5d8e5b,'contactname':_0x3af7d7||null,'pushName':_0x250fe3,'status':_0x2cc7f0?.[_0x3d80dc(0x2f7)],'isBusiness':_0x50b972[_0x3d80dc(0x576)],'email':_0x50b972?.['email'],'description':_0x50b972?.['description'],'website':_0x50b972?.[_0x3d80dc(0x440)]?.[_0x3d80dc(0x778)](),'lastcache':Date['now'](),'imported':!_0xd345d2},_0x49cb08=await this[_0x3d80dc(0x7fa)][_0x3d80dc(0x739)][_0x3d80dc(0x743)]({'where':{'_id':_0x4327db}},_0x1070ad,this[_0x3d80dc(0x3f0)]['wuid']),_0x7a95c8={'owner':this[_0x3d80dc(0x3f0)][_0x3d80dc(0x547)],'_id':_0x4327db,'profilePictureUrl':_0x5d8e5b,'status':_0x2cc7f0?.['status']};return this['repository'][_0x3d80dc(0x821)]['update']([_0x7a95c8],this[_0x3d80dc(0x3f0)]['wuid']),_0x49cb08&&V(this[_0x3d80dc(0x6dd)],_0x3d80dc(0x795),{'chat':_0x49cb08}),{'wuid':_0xa5bc5?.[_0x3d80dc(0x5e2)]||_0x4327db,'name':_0xa5bc5?.[_0x3d80dc(0x41c)],'pushName':_0x250fe3,'numberExists':_0xa5bc5?.[_0x3d80dc(0x160)],'picture':_0x5d8e5b,'status':_0x2cc7f0?.['status'],'isBusiness':_0x50b972[_0x3d80dc(0x576)],'email':_0x50b972?.[_0x3d80dc(0x428)],'description':_0x50b972?.[_0x3d80dc(0x44d)],'website':_0x50b972?.[_0x3d80dc(0x440)]?.['shift']()};}catch(_0x2c7a4d){return this[_0x3d80dc(0x56b)][_0x3d80dc(0x2b1)](_0x3d80dc(0x583)+(_0x2c7a4d instanceof Error?_0x2c7a4d[_0x3d80dc(0x4f4)]:JSON[_0x3d80dc(0x179)](_0x2c7a4d,null,0x2))),{};}}async[a0_0x5ca971(0x65c)](_0x27fae1){const _0x51df87=a0_0x5ca971;this['logger'][_0x51df87(0x608)](this[_0x51df87(0x6dd)]+'\x20('+this[_0x51df87(0x3f0)][_0x51df87(0x547)]+'):Fetching\x20business\x20profile');try{let _0x50e9cf=_0x27fae1?this[_0x51df87(0x30b)](_0x27fae1):this[_0x51df87(0x3f0)][_0x51df87(0x547)],_0xdf11ca=await this[_0x51df87(0x2cc)][_0x51df87(0x20c)](_0x50e9cf);return this['logger']['verbose'](this[_0x51df87(0x6dd)]+'\x20('+this['instance'][_0x51df87(0x547)]+_0x51df87(0x881)),_0xdf11ca?(this[_0x51df87(0x56b)][_0x51df87(0x608)](this[_0x51df87(0x6dd)]+'\x20('+this[_0x51df87(0x3f0)][_0x51df87(0x547)]+_0x51df87(0x455)),{'isBusiness':!0x0,..._0xdf11ca}):{'isBusiness':!0x1,'message':'Not\x20is\x20business\x20profile',...(await this[_0x51df87(0x5c1)]({'numbers':[_0x50e9cf]}))?.[_0x51df87(0x778)]()};}catch(_0x16c096){let _0x3cbe6a='Falha\x20ao\x20processar\x20fetchBusinessProfile',_0x45a75d=_0x16c096 instanceof Error?_0x16c096['message']:typeof _0x16c096=='object'?JSON[_0x51df87(0x179)](_0x16c096):_0x16c096,_0x55c85f=_0x3cbe6a+':\x20'+_0x45a75d;throw this[_0x51df87(0x56b)]['error'](this['instanceName']+'\x20('+this['instance'][_0x51df87(0x547)]+_0x51df87(0x3a3)+_0x55c85f),new O(_0x55c85f);}}async[a0_0x5ca971(0x586)](_0x39dfc3){const _0x16de9d=a0_0x5ca971;let _0x220c3f=this['createJid'](_0x39dfc3);try{return{'wuid':_0x220c3f,'status':(await this[_0x16de9d(0x2cc)][_0x16de9d(0x4c6)](_0x220c3f))?.[_0x16de9d(0x2f7)]};}catch{return{'wuid':_0x220c3f,'status':null};}}async[a0_0x5ca971(0x71b)](_0x59b26d){const _0x3613d4=a0_0x5ca971;try{return await this[_0x3613d4(0x2cc)][_0x3613d4(0x71b)](_0x59b26d),{'update':_0x3613d4(0x1e4)};}catch(_0x27baa5){let _0x11b5cc=_0x3613d4(0x30c),_0x45e9d8=_0x27baa5 instanceof Error?_0x27baa5[_0x3613d4(0x4f4)]:typeof _0x27baa5==_0x3613d4(0x487)?JSON[_0x3613d4(0x179)](_0x27baa5):_0x27baa5,_0x397d8a=_0x11b5cc+':\x20'+_0x45e9d8;throw this[_0x3613d4(0x56b)]['error'](this[_0x3613d4(0x6dd)]+'\x20('+this[_0x3613d4(0x3f0)][_0x3613d4(0x547)]+_0x3613d4(0x3a3)+_0x397d8a),new O(_0x397d8a);}}async[a0_0x5ca971(0x3c3)](_0x24859d){const _0x4916d2=a0_0x5ca971;try{return await this[_0x4916d2(0x2cc)][_0x4916d2(0x3c3)](_0x24859d),{'update':_0x4916d2(0x1e4)};}catch(_0x2e4909){let _0x4e7a12=_0x4916d2(0x7af),_0x1d9634=_0x2e4909 instanceof Error?_0x2e4909[_0x4916d2(0x4f4)]:typeof _0x2e4909==_0x4916d2(0x487)?JSON[_0x4916d2(0x179)](_0x2e4909):_0x2e4909,_0x54ef4d=_0x4e7a12+':\x20'+_0x1d9634;throw this[_0x4916d2(0x56b)][_0x4916d2(0x2b1)](this[_0x4916d2(0x6dd)]+'\x20('+this[_0x4916d2(0x3f0)][_0x4916d2(0x547)]+_0x4916d2(0x3a3)+_0x54ef4d),new O(_0x54ef4d);}}async[a0_0x5ca971(0x3f6)](_0x501f99){const _0x45304d=a0_0x5ca971;try{let _0x312db5;if((0x0,L[_0x45304d(0x7ca)])(_0x501f99)){let _0x146d52=new Date()[_0x45304d(0x409)](),_0x38ce1f=_0x501f99+_0x45304d(0x7e5)+_0x146d52;_0x312db5=(await ee['default']['get'](_0x38ce1f,{'responseType':_0x45304d(0x6c2)}))['data'];}else{if((0x0,L['isBase64'])(_0x501f99))_0x312db5=Buffer[_0x45304d(0x724)](_0x501f99,_0x45304d(0x1d9));else throw new m(_0x45304d(0x1eb));}return await this['client'][_0x45304d(0x3f6)](this['instance'][_0x45304d(0x547)],_0x312db5),{'update':_0x45304d(0x1e4)};}catch(_0x8d0308){let _0x5b167e=_0x45304d(0x7a5),_0x48130e=_0x8d0308 instanceof Error?_0x8d0308[_0x45304d(0x4f4)]:typeof _0x8d0308==_0x45304d(0x487)?JSON[_0x45304d(0x179)](_0x8d0308):_0x8d0308,_0x2ee8b4=_0x5b167e+':\x20'+_0x48130e;throw this[_0x45304d(0x56b)][_0x45304d(0x2b1)](this[_0x45304d(0x6dd)]+'\x20('+this[_0x45304d(0x3f0)][_0x45304d(0x547)]+_0x45304d(0x3a3)+_0x2ee8b4),new O(_0x2ee8b4);}}async[a0_0x5ca971(0x849)](){const _0xf96013=a0_0x5ca971;try{return await this[_0xf96013(0x2cc)][_0xf96013(0x849)](this[_0xf96013(0x3f0)][_0xf96013(0x547)]),{'update':_0xf96013(0x1e4)};}catch(_0x15f08c){let _0x4b1b6e='Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture',_0x18bf6f=_0x15f08c instanceof Error?_0x15f08c['message']:typeof _0x15f08c==_0xf96013(0x487)?JSON[_0xf96013(0x179)](_0x15f08c):_0x15f08c,_0xd02d32=_0x4b1b6e+':\x20'+_0x18bf6f;throw this[_0xf96013(0x56b)][_0xf96013(0x2b1)](this[_0xf96013(0x6dd)]+'\x20('+this[_0xf96013(0x3f0)][_0xf96013(0x547)]+_0xf96013(0x3a3)+_0xd02d32),new O(_0xd02d32);}}async[a0_0x5ca971(0x476)](_0xa26550){const _0x224975=a0_0x5ca971;try{let _0x574760=(await this['whatsappNumber']({'numbers':_0xa26550[_0x224975(0x540)]}))[_0x224975(0x587)](_0x591076=>_0x591076[_0x224975(0x160)])[_0x224975(0x7a8)](_0x52d59f=>_0x52d59f[_0x224975(0x5e2)]),{id:_0x57df26}=await this[_0x224975(0x2cc)][_0x224975(0x6b3)](_0xa26550[_0x224975(0x5c6)],_0x574760);_0xa26550?.['description']&&await this[_0x224975(0x2cc)][_0x224975(0x442)](_0x57df26,_0xa26550[_0x224975(0x44d)]);let _0x469f16=await this[_0x224975(0x2cc)]['groupMetadata'](_0x57df26);return _0x469f16[_0x224975(0x642)]=[],{'metadata':_0x469f16};}catch(_0x55c5d3){let _0xcadce4=_0x224975(0x7df),_0x21176c=_0x55c5d3 instanceof Error?_0x55c5d3[_0x224975(0x4f4)]:typeof _0x55c5d3==_0x224975(0x487)?JSON['stringify'](_0x55c5d3):_0x55c5d3,_0x2d13a3=_0xcadce4+':\x20'+_0x21176c;throw this[_0x224975(0x56b)][_0x224975(0x2b1)](this['instanceName']+'\x20('+this[_0x224975(0x3f0)][_0x224975(0x547)]+_0x224975(0x3a3)+_0x2d13a3),new O(_0x2d13a3);}}async[a0_0x5ca971(0x64b)](_0x35ee63){const _0xd26fec=a0_0x5ca971;try{if(_0x35ee63[_0xd26fec(0x479)]===!0x0&&await this[_0xd26fec(0x2cc)][_0xd26fec(0x699)](_0x35ee63[_0xd26fec(0x17e)],'locked'),_0x35ee63['restrict']===!0x1&&await this[_0xd26fec(0x2cc)][_0xd26fec(0x699)](_0x35ee63[_0xd26fec(0x17e)],'unlocked'),_0x35ee63[_0xd26fec(0x343)]===!0x0&&await this['client']['groupSettingUpdate'](_0x35ee63[_0xd26fec(0x17e)],'announcement'),_0x35ee63[_0xd26fec(0x343)]===!0x1&&await this['client'][_0xd26fec(0x699)](_0x35ee63[_0xd26fec(0x17e)],_0xd26fec(0x285)),_0x35ee63[_0xd26fec(0x4e3)]===!0x0&&await this[_0xd26fec(0x2cc)]['groupMemberAddMode'](_0x35ee63['groupJid'],'all_member_add'),_0x35ee63[_0xd26fec(0x4e3)]===!0x1&&await this[_0xd26fec(0x2cc)][_0xd26fec(0x7a6)](_0x35ee63[_0xd26fec(0x17e)],_0xd26fec(0x645)),_0x35ee63['joinApprovalMode']===!0x0&&await this[_0xd26fec(0x2cc)]['groupJoinApprovalMode'](_0x35ee63[_0xd26fec(0x17e)],'on'),_0x35ee63[_0xd26fec(0x537)]===!0x1&&await this[_0xd26fec(0x2cc)]['groupJoinApprovalMode'](_0x35ee63[_0xd26fec(0x17e)],_0xd26fec(0x413)),typeof _0x35ee63['expiration']<'u'&&_0x35ee63[_0xd26fec(0x605)]!==null&&await this[_0xd26fec(0x2cc)]['groupToggleEphemeral'](_0x35ee63['groupJid'],_0x35ee63[_0xd26fec(0x605)]),_0x35ee63['name']&&await this[_0xd26fec(0x2cc)][_0xd26fec(0x66a)](_0x35ee63[_0xd26fec(0x17e)],_0x35ee63[_0xd26fec(0x41c)]),_0x35ee63['description']&&await this[_0xd26fec(0x2cc)]['groupUpdateDescription'](_0x35ee63['groupJid'],_0x35ee63[_0xd26fec(0x44d)]),_0x35ee63[_0xd26fec(0x525)]){let _0x1dcf07;if((0x0,L[_0xd26fec(0x7ca)])(_0x35ee63[_0xd26fec(0x525)])){let _0x41858c=new Date()[_0xd26fec(0x409)](),_0x552479=_0x35ee63[_0xd26fec(0x525)]+_0xd26fec(0x7e5)+_0x41858c;_0x1dcf07=(await ee['default'][_0xd26fec(0x76d)](_0x552479,{'responseType':_0xd26fec(0x6c2)}))['data'];}else{if((0x0,L['isBase64'])(_0x35ee63[_0xd26fec(0x525)]))_0x1dcf07=Buffer['from'](_0x35ee63[_0xd26fec(0x525)],_0xd26fec(0x1d9));else throw new m(_0xd26fec(0x1eb));}await this['client'][_0xd26fec(0x3f6)](_0x35ee63['groupJid'],_0x1dcf07);}return await this['findGroup']({'groupJid':_0x35ee63[_0xd26fec(0x17e)]});}catch(_0xa97cc2){let _0x860c14=_0xd26fec(0x885),_0x156196=_0xa97cc2 instanceof Error?_0xa97cc2['message']:typeof _0xa97cc2==_0xd26fec(0x487)?JSON[_0xd26fec(0x179)](_0xa97cc2):_0xa97cc2,_0x402ced=_0x860c14+':\x20'+_0x156196;throw this[_0xd26fec(0x56b)]['error'](this[_0xd26fec(0x6dd)]+'\x20('+this['instance'][_0xd26fec(0x547)]+'):\x20'+_0x402ced),new O(_0x402ced);}}async[a0_0x5ca971(0x5d9)](_0x42521c){const _0x1c94ba=a0_0x5ca971;try{if(_0x42521c[_0x1c94ba(0x44b)]===_0x1c94ba(0x68d)||_0x42521c[_0x1c94ba(0x44b)]===_0x1c94ba(0x2a3)){let _0x496f20=_0x42521c[_0x1c94ba(0x540)]['map'](_0x2fbaca=>this['createJid'](_0x2fbaca));await this['client'][_0x1c94ba(0x32c)](_0x42521c['groupJid'],_0x496f20,_0x42521c[_0x1c94ba(0x44b)]);}else{if(_0x42521c[_0x1c94ba(0x44b)]===_0x1c94ba(0x3fc)){let _0x1d12de=(await this[_0x1c94ba(0x5c1)]({'numbers':_0x42521c[_0x1c94ba(0x540)]}))[_0x1c94ba(0x587)](_0x4bcd20=>_0x4bcd20[_0x1c94ba(0x160)])['map'](_0x40d6d7=>this[_0x1c94ba(0x30b)](_0x40d6d7[_0x1c94ba(0x5e2)]));if(_0x1d12de[_0x1c94ba(0x532)]===0x0)throw new m('Nenhum\x20participante\x20válido\x20encontrado.');await this['client'][_0x1c94ba(0x659)](_0x42521c['groupJid'],_0x1d12de,_0x1c94ba(0x3fc));}else{let _0x33d193=_0x42521c['participants'][_0x1c94ba(0x7a8)](_0x1b64ed=>this[_0x1c94ba(0x30b)](_0x1b64ed));await this[_0x1c94ba(0x2cc)][_0x1c94ba(0x659)](_0x42521c[_0x1c94ba(0x17e)],_0x33d193,_0x42521c[_0x1c94ba(0x44b)]);}}return await this[_0x1c94ba(0x539)]({'groupJid':_0x42521c[_0x1c94ba(0x17e)]});}catch(_0x4523c1){let _0x11be9b=_0x1c94ba(0x1b5),_0x523fe0=_0x4523c1 instanceof Error?_0x4523c1[_0x1c94ba(0x4f4)]:typeof _0x4523c1=='object'?JSON[_0x1c94ba(0x179)](_0x4523c1):_0x4523c1,_0x30eb79=_0x11be9b+':\x20'+_0x523fe0;throw this['logger'][_0x1c94ba(0x2b1)](this[_0x1c94ba(0x6dd)]+'\x20('+this[_0x1c94ba(0x3f0)][_0x1c94ba(0x547)]+_0x1c94ba(0x3a3)+_0x30eb79),new m(_0x30eb79);}}async['groupGetInviteInfo'](_0x134407){const _0x490ba5=a0_0x5ca971;try{return await this[_0x490ba5(0x2cc)]['groupGetInviteInfo'](_0x134407[_0x490ba5(0x3ef)]);}catch(_0x15a672){let _0x5dad79=_0x490ba5(0x89e),_0x249e39=_0x15a672 instanceof Error?_0x15a672[_0x490ba5(0x4f4)]:typeof _0x15a672==_0x490ba5(0x487)?JSON[_0x490ba5(0x179)](_0x15a672):_0x15a672,_0xc990b6=_0x5dad79+':\x20'+_0x249e39;throw this['logger']['error'](this['instanceName']+'\x20('+this['instance'][_0x490ba5(0x547)]+_0x490ba5(0x3a3)+_0xc990b6),new m(_0xc990b6);}}async[a0_0x5ca971(0x539)](_0x5f295e,_0x3732b5=a0_0x5ca971(0x1c5)){const _0x3b9181=a0_0x5ca971;try{let _0x2334b9=await this[_0x3b9181(0x7fa)][_0x3b9181(0x739)][_0x3b9181(0x640)]({'where':{'_id':_0x5f295e[_0x3b9181(0x17e)]}},this[_0x3b9181(0x3f0)][_0x3b9181(0x547)]),_0x59cca7=_0x2334b9?_0x2334b9[_0x3b9181(0x5c8)]:null,_0x3478d4=0x18*0x3c*0x3c*0x3e8;if(!_0x59cca7||_0x59cca7['lastUpdate']&&Date['now']()-_0x59cca7[_0x3b9181(0x523)]>_0x3478d4){let _0x596ae2=await this['client'][_0x3b9181(0x49a)](_0x5f295e[_0x3b9181(0x17e)]);if(_0x596ae2[_0x3b9181(0x326)]=_0x596ae2?.[_0x3b9181(0x326)]&&_0x596ae2[_0x3b9181(0x326)][_0x3b9181(0x7b1)]()['length']<0xd?_0x596ae2?.[_0x3b9181(0x326)]*0x3e8:_0x596ae2?.['subjectTime']||null,_0x596ae2[_0x3b9181(0x2ba)]=_0x596ae2?.['creation']&&_0x596ae2[_0x3b9181(0x2ba)][_0x3b9181(0x7b1)]()[_0x3b9181(0x532)]<0xd?_0x596ae2?.[_0x3b9181(0x2ba)]*0x3e8:_0x596ae2?.[_0x3b9181(0x2ba)]||null,_0x59cca7={..._0x596ae2,'lastUpdate':Date[_0x3b9181(0x7d1)]()},!_0x596ae2)return;}let _0x5bb1d7=_0x59cca7[_0x3b9181(0x540)][_0x3b9181(0x606)](_0xaed290=>_0xaed290['id']===this[_0x3b9181(0x3f0)][_0x3b9181(0x547)]+_0x3b9181(0x4a7)&&_0xaed290[_0x3b9181(0x4af)]!=null);!_0x59cca7[_0x3b9181(0x3ef)]&&_0x5bb1d7&&(_0x59cca7['inviteCode']=(await this[_0x3b9181(0x3ef)](_0x5f295e,!0x1))[_0x3b9181(0x8a1)]);let _0x1b11b3=(!_0x59cca7[_0x3b9181(0x343)]||_0x5bb1d7)&&(!_0x59cca7[_0x3b9181(0x26f)]||_0x59cca7[_0x3b9181(0x26f)]&&_0x59cca7[_0x3b9181(0x23e)]&&_0x5bb1d7);_0x59cca7[_0x3b9181(0x3c6)]=_0x5bb1d7,_0x59cca7[_0x3b9181(0x45f)]=_0x1b11b3;let _0xa35b10=[];if(_0x5bb1d7&&_0x59cca7['joinApprovalMode'])try{_0xa35b10=await this['client']['groupRequestParticipantsList'](_0x5f295e['groupJid']),_0x59cca7[_0x3b9181(0x150)]=Date[_0x3b9181(0x7d1)]();}catch(_0xd87ce6){this['logger'][_0x3b9181(0x608)](this['instanceName']+'\x20('+this[_0x3b9181(0x3f0)]['wuid']+_0x3b9181(0x741)+_0x5f295e['groupJid']+':\x20'+(_0xd87ce6 instanceof Error?_0xd87ce6[_0x3b9181(0x4f4)]:JSON[_0x3b9181(0x179)](_0xd87ce6,null,0x2)));}try{_0x59cca7['image']=(await this['findAndUpdateCacheContact'](_0x5f295e[_0x3b9181(0x17e)],null,!0x0))[_0x3b9181(0x6bc)][_0x3b9181(0x559)];}catch(_0x2738fa){this[_0x3b9181(0x56b)][_0x3b9181(0x608)](this['instanceName']+'\x20('+this['instance'][_0x3b9181(0x547)]+_0x3b9181(0x875)+_0x5f295e[_0x3b9181(0x17e)]+':\x20'+(_0x2738fa instanceof Error?_0x2738fa[_0x3b9181(0x4f4)]:JSON['stringify'](_0x2738fa,null,0x2)));}let _0xb1111f=_0x59cca7[_0x3b9181(0x540)]['map'](_0x3f3972=>_0x3f3972['id']),_0x388b18=_0xa35b10['map'](_0x5bcedf=>_0x5bcedf[_0x3b9181(0x5e2)]),_0x83eea7=await this['repository'][_0x3b9181(0x68f)][_0x3b9181(0x691)]([..._0xb1111f,..._0x388b18]);_0x59cca7[_0x3b9181(0x540)]=_0x59cca7[_0x3b9181(0x540)][_0x3b9181(0x7a8)](_0x911fba=>{const _0x41a251=_0x3b9181;let _0x93010b=_0x83eea7[_0x41a251(0x2d4)](_0xe8959e=>_0xe8959e[_0x41a251(0x4a6)]===_0x911fba['id']);return{'id':_0x911fba['id'],'isAdmin':['admin',_0x41a251(0x2d1)][_0x41a251(0x839)](_0x911fba[_0x41a251(0x4af)]),'admin':_0x911fba[_0x41a251(0x4af)],'pushName':_0x93010b?.[_0x41a251(0x41c)],'profilePictureUrl':_0x93010b?.['pictureUrl']};}),_0x59cca7[_0x3b9181(0x642)]=_0xa35b10[_0x3b9181(0x7a8)](_0xf2df42=>{const _0x356b10=_0x3b9181;let _0x53662c=_0x83eea7['find'](_0x4e8e68=>_0x4e8e68[_0x356b10(0x4a6)]===_0xf2df42[_0x356b10(0x5e2)]);return{'id':_0xf2df42['jid'],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x53662c?.[_0x356b10(0x41c)],'profilePictureUrl':_0x53662c?.['pictureUrl'],'request_method':_0xf2df42[_0x356b10(0x324)],'request_time':_0xf2df42[_0x356b10(0x644)]};});let _0x5745a3=await this[_0x3b9181(0x7fa)][_0x3b9181(0x739)][_0x3b9181(0x743)]({'where':{'_id':_0x5f295e[_0x3b9181(0x17e)]}},{'imagechat':_0x59cca7[_0x3b9181(0x525)],'name':_0x59cca7[_0x3b9181(0x5c6)],'lastcache':Date[_0x3b9181(0x7d1)](),'groupdata':_0x59cca7},this[_0x3b9181(0x3f0)][_0x3b9181(0x547)]);return V(this[_0x3b9181(0x6dd)],'chats',{'chat':_0x5745a3}),{'metadata':_0x59cca7};}catch(_0x137ec0){if(_0x3732b5==='inner')return;throw new q(_0x3b9181(0x3e7),_0x137ec0['message'][_0x3b9181(0x7b1)]());}}async[a0_0x5ca971(0x55b)](){const _0x247343=a0_0x5ca971;try{this[_0x247343(0x56b)][_0x247343(0x1d2)](_0x247343(0x180));let _0x14250d=Date[_0x247343(0x7d1)](),_0x39e1c5=0x3*0x3c*0x3c*0x3e8;return _0x14250d-this[_0x247343(0x20e)]>_0x39e1c5&&(this[_0x247343(0x41e)](),this[_0x247343(0x20e)]=_0x14250d),(await this['repository'][_0x247343(0x739)][_0x247343(0x2be)]({'where':{'group':!0x0}},this[_0x247343(0x3f0)][_0x247343(0x547)]))[_0x247343(0x7a8)](_0x3d8fd2=>({..._0x3d8fd2[_0x247343(0x5c8)],'groupJid':_0x3d8fd2['_id'],'image':_0x3d8fd2[_0x247343(0x415)]}));}catch(_0x5d08c6){let _0x24f2e6=_0x247343(0x896),_0x5dc0a3=_0x5d08c6 instanceof Error?_0x5d08c6['message']:typeof _0x5d08c6=='object'?JSON['stringify'](_0x5d08c6):_0x5d08c6,_0x49466a=_0x24f2e6+':\x20'+_0x5dc0a3;throw this[_0x247343(0x56b)][_0x247343(0x2b1)](this['instanceName']+'\x20('+this[_0x247343(0x3f0)][_0x247343(0x547)]+_0x247343(0x3a3)+_0x49466a),new q(_0x49466a);}}async[a0_0x5ca971(0x41e)](){const _0x448382=a0_0x5ca971;try{this['logger'][_0x448382(0x1d2)](_0x448382(0x392));let _0x54cc02=[],_0x6c629f=await this[_0x448382(0x2cc)][_0x448382(0x3ba)](),_0x158c2e=Object[_0x448382(0x7cb)](_0x6c629f),_0xd9373f=_0x158c2e[_0x448382(0x587)](_0x567ecc=>(0x0,w[_0x448382(0x1fd)])(_0x567ecc?.['id']))[_0x448382(0x7a8)](async _0x8a5637=>{const _0x288b5d=_0x448382;try{return await this[_0x288b5d(0x2cc)][_0x288b5d(0x84f)](_0x8a5637['id'],'preview');}catch(_0x3c10ed){return this[_0x288b5d(0x56b)][_0x288b5d(0x608)](this['instanceName']+'\x20('+this[_0x288b5d(0x3f0)]['wuid']+'):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20'+_0x8a5637['id']+':\x20'+(_0x3c10ed instanceof Error?_0x3c10ed[_0x288b5d(0x4f4)]:JSON[_0x288b5d(0x179)](_0x3c10ed,null,0x2))),null;}}),_0x2e5c67=await Promise[_0x448382(0x6de)](_0xd9373f);for(let _0x580288=0x0;_0x580288<_0x158c2e[_0x448382(0x532)];_0x580288++){let _0x20c580=_0x158c2e[_0x580288];(0x0,w[_0x448382(0x1fd)])(_0x20c580?.['id'])&&(_0x54cc02[_0x448382(0x59a)]({'groupJid':_0x20c580?.['id'],'subject':_0x20c580?.[_0x448382(0x5c6)],'subjectOwner':_0x20c580?.[_0x448382(0x6e9)]?.[_0x448382(0x266)]('@')[0x0],'subjectTime':_0x20c580?.[_0x448382(0x326)],'creation':_0x20c580?.[_0x448382(0x2ba)],'size':_0x20c580?.[_0x448382(0x540)]?.[_0x448382(0x532)],'owner':_0x20c580?.[_0x448382(0x42d)]?.[_0x448382(0x266)]('@')[0x0],'desc':_0x20c580?.['desc'],'restrict':_0x20c580?.['restrict'],'announce':_0x20c580?.[_0x448382(0x343)],'image':_0x2e5c67[_0x580288],'isCommunity':_0x20c580?.[_0x448382(0x26f)],'joinApprovalMode':_0x20c580?.[_0x448382(0x537)],'memberCanAddParticipant':_0x20c580?.[_0x448382(0x4e3)],'participants':_0x20c580?.[_0x448382(0x540)],'descOwner':_0x20c580?.[_0x448382(0x54d)],'descId':_0x20c580?.[_0x448382(0x58f)],'memberAddMode':_0x20c580?.[_0x448382(0x4e3)],'isCommunityAnnounce':_0x20c580?.['isCommunityAnnounce'],'ephemeralDuration':_0x20c580?.[_0x448382(0x19f)]||0x0,'author':_0x20c580?.[_0x448382(0x512)]}),this[_0x448382(0x5cc)](_0x158c2e[_0x580288]));}return _0x54cc02;}catch(_0x1ca3b1){let _0x2374bd=_0x448382(0x727),_0x5d46fb=_0x1ca3b1 instanceof Error?_0x1ca3b1[_0x448382(0x4f4)]:typeof _0x1ca3b1==_0x448382(0x487)?JSON[_0x448382(0x179)](_0x1ca3b1):_0x1ca3b1,_0x5add1d=_0x2374bd+':\x20'+_0x5d46fb;throw this[_0x448382(0x56b)][_0x448382(0x2b1)](this[_0x448382(0x6dd)]+'\x20('+this[_0x448382(0x3f0)][_0x448382(0x547)]+_0x448382(0x3a3)+_0x5add1d),new q(_0x5add1d);}}async[a0_0x5ca971(0x5cc)](_0x51baed){const _0x8994e4=a0_0x5ca971;let _0x47da55=await this[_0x8994e4(0x7fa)][_0x8994e4(0x739)][_0x8994e4(0x640)]({'where':{'_id':_0x51baed['id']}},this[_0x8994e4(0x3f0)]['wuid']);_0x51baed[_0x8994e4(0x326)]=_0x51baed?.[_0x8994e4(0x326)]&&_0x51baed[_0x8994e4(0x326)][_0x8994e4(0x7b1)]()[_0x8994e4(0x532)]<0xd?_0x51baed?.[_0x8994e4(0x326)]*0x3e8:_0x51baed?.[_0x8994e4(0x326)]||null,_0x51baed[_0x8994e4(0x2ba)]=_0x51baed?.['creation']&&_0x51baed[_0x8994e4(0x2ba)][_0x8994e4(0x7b1)]()[_0x8994e4(0x532)]<0xd?_0x51baed?.[_0x8994e4(0x2ba)]*0x3e8:_0x51baed?.[_0x8994e4(0x2ba)]||null;let _0x1c5275=_0x47da55?.[_0x8994e4(0x5c8)]?.[_0x8994e4(0x642)]||[],_0xd5cd0c=_0x47da55?.[_0x8994e4(0x5c8)]?.[_0x8994e4(0x150)],_0x5a3612=_0x51baed[_0x8994e4(0x540)][_0x8994e4(0x7a8)](_0x3b75fc=>{const _0x1d3864=_0x8994e4;let _0x46b262=_0x47da55?.['groupdata']?.[_0x1d3864(0x540)]['find'](_0x1e3613=>_0x1e3613['id']===_0x3b75fc['id']);return{..._0x3b75fc,'isAdmin':[_0x1d3864(0x4af),_0x1d3864(0x2d1)]['includes'](_0x3b75fc[_0x1d3864(0x4af)]),'admin':_0x3b75fc[_0x1d3864(0x4af)],'name':_0x46b262?.['name']||_0x3b75fc[_0x1d3864(0x41c)],'imgUrl':_0x46b262?.[_0x1d3864(0x694)]||_0x3b75fc['imgUrl']};}),_0x48e986=_0x5a3612['some'](_0x501105=>_0x501105['id']===this[_0x8994e4(0x3f0)][_0x8994e4(0x547)]+_0x8994e4(0x4a7)&&_0x501105[_0x8994e4(0x3c6)]),_0xe8576b=(!_0x51baed[_0x8994e4(0x343)]||_0x48e986)&&(!_0x51baed['isCommunity']||_0x51baed[_0x8994e4(0x26f)]&&_0x51baed[_0x8994e4(0x23e)]&&_0x48e986),_0x729023={..._0x51baed,'participants':_0x5a3612,'awaitingApproval':_0x1c5275,'lastFetchAwaitingApproval':_0xd5cd0c,'isAdmin':_0x48e986,'canSendMessage':_0xe8576b,'lastUpdate':Date[_0x8994e4(0x7d1)]()};await this[_0x8994e4(0x7fa)][_0x8994e4(0x739)][_0x8994e4(0x743)]({'where':{'_id':_0x51baed['id']}},{'name':_0x51baed[_0x8994e4(0x5c6)],'group':!0x0,'groupdata':_0x729023,'lastcache':Date['now']()},this[_0x8994e4(0x3f0)]['wuid']),V(this[_0x8994e4(0x6dd)],_0x8994e4(0x795),{'chat':_0x51baed});}async[a0_0x5ca971(0x86d)](_0x47587e){const _0x46b65b=a0_0x5ca971;let _0x15aed1=await this[_0x46b65b(0x7fa)][_0x46b65b(0x739)][_0x46b65b(0x640)]({'where':{'_id':_0x47587e['id']}},this[_0x46b65b(0x3f0)][_0x46b65b(0x547)]);_0x47587e[_0x46b65b(0x326)]=_0x47587e?.[_0x46b65b(0x326)]&&_0x47587e[_0x46b65b(0x326)][_0x46b65b(0x7b1)]()['length']<0xd?_0x47587e?.[_0x46b65b(0x326)]*0x3e8:_0x47587e?.[_0x46b65b(0x326)]||null,_0x47587e[_0x46b65b(0x2ba)]=_0x47587e?.[_0x46b65b(0x2ba)]&&_0x47587e[_0x46b65b(0x2ba)][_0x46b65b(0x7b1)]()['length']<0xd?_0x47587e?.[_0x46b65b(0x2ba)]*0x3e8:_0x47587e?.[_0x46b65b(0x2ba)]||null,_0x47587e[_0x46b65b(0x3ef)]&&(_0x47587e[_0x46b65b(0x3ef)]='https://chat.whatsapp.com/'+_0x47587e[_0x46b65b(0x3ef)]);let _0x301b61=_0x15aed1?.['groupdata']?{..._0x15aed1[_0x46b65b(0x5c8)]}:{};Object[_0x46b65b(0x418)](_0x47587e)['forEach'](_0x5b9d2a=>{_0x5b9d2a!=='id'&&(_0x301b61[_0x5b9d2a]=_0x47587e[_0x5b9d2a]);});let _0x53ee95=_0x301b61[_0x46b65b(0x540)]?.[_0x46b65b(0x606)](_0x128ea9=>_0x128ea9['id']===this[_0x46b65b(0x3f0)]['wuid']+_0x46b65b(0x4a7)&&_0x128ea9[_0x46b65b(0x3c6)])||!0x1;_0x301b61[_0x46b65b(0x3c6)]=_0x53ee95;let _0x2d70d0=(!_0x301b61[_0x46b65b(0x343)]||_0x53ee95)&&(!_0x301b61[_0x46b65b(0x26f)]||_0x301b61['isCommunity']&&_0x301b61['isCommunityAnnounce']&&_0x53ee95);_0x301b61[_0x46b65b(0x45f)]=_0x2d70d0;let _0x32535b={'group':!0x0,'groupdata':_0x301b61};_0x47587e[_0x46b65b(0x5c6)]&&(_0x32535b[_0x46b65b(0x41c)]=_0x47587e[_0x46b65b(0x5c6)]),await this[_0x46b65b(0x7fa)][_0x46b65b(0x739)][_0x46b65b(0x743)]({'where':{'_id':_0x47587e['id']}},_0x32535b,this[_0x46b65b(0x3f0)][_0x46b65b(0x547)],{'upsert':!0x0}),V(this[_0x46b65b(0x6dd)],_0x46b65b(0x795),{'chat':_0x32535b});}async[a0_0x5ca971(0x682)](_0x53592f){const _0x154151=a0_0x5ca971;let _0x4b0915=await this[_0x154151(0x7fa)]['chat'][_0x154151(0x640)]({'where':{'_id':_0x53592f['id']}},this[_0x154151(0x3f0)][_0x154151(0x547)]);if(!_0x4b0915||!_0x4b0915[_0x154151(0x5c8)]){this[_0x154151(0x56b)]['info'](this[_0x154151(0x6dd)]+'\x20('+this[_0x154151(0x3f0)][_0x154151(0x547)]+'):\x20\x27Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x27,\x20'+_0x53592f['id']);return;}let _0x42a110=await this['repository']['cacheContact'][_0x154151(0x691)](_0x53592f[_0x154151(0x540)]),_0x2ac3e0=[..._0x4b0915[_0x154151(0x5c8)]?.[_0x154151(0x540)]];switch(_0x53592f[_0x154151(0x44b)]){case _0x154151(0x3fc):let _0x32af48=_0x42a110[_0x154151(0x7a8)](_0x2a5588=>({'id':_0x2a5588[_0x154151(0x4a6)],'isAdmin':!0x1,'name':_0x2a5588[_0x154151(0x41c)],'imgUrl':_0x2a5588[_0x154151(0x559)]}));_0x2ac3e0=[..._0x2ac3e0,..._0x32af48];break;case _0x154151(0x50e):_0x2ac3e0=_0x2ac3e0[_0x154151(0x587)](_0x47a77c=>!_0x53592f['participants']['includes'](_0x47a77c['id']));break;case _0x154151(0x2ce):case'demote':_0x2ac3e0=_0x2ac3e0[_0x154151(0x7a8)](_0x311ea1=>_0x53592f[_0x154151(0x540)]['includes'](_0x311ea1['id'])?{..._0x311ea1,'isAdmin':_0x53592f[_0x154151(0x44b)]===_0x154151(0x2ce)}:_0x311ea1);break;}let _0x5a7fa0=_0x2ac3e0[_0x154151(0x532)],_0x1f9ad3=_0x2ac3e0['some'](_0x2677cb=>_0x2677cb['id']===this['instance']['wuid']+'@s.whatsapp.net'),_0x47d051=_0x1f9ad3&&_0x2ac3e0[_0x154151(0x606)](_0x3e53bb=>_0x3e53bb['id']===this[_0x154151(0x3f0)][_0x154151(0x547)]+_0x154151(0x4a7)&&_0x3e53bb[_0x154151(0x3c6)]),_0xd901e=_0x1f9ad3&&(!_0x4b0915['groupdata'][_0x154151(0x343)]||_0x47d051)&&(!_0x4b0915[_0x154151(0x5c8)][_0x154151(0x26f)]||_0x4b0915[_0x154151(0x5c8)]['isCommunity']&&_0x47d051);await this[_0x154151(0x7fa)]['chat'][_0x154151(0x743)]({'where':{'_id':_0x53592f['id']}},{'groupdata':{..._0x4b0915[_0x154151(0x5c8)],'participants':_0x2ac3e0,'size':_0x5a7fa0,'isAdmin':_0x47d051,'canSendMessage':_0xd901e}},this['instance'][_0x154151(0x547)]),this[_0x154151(0x56b)][_0x154151(0x1d2)](this[_0x154151(0x6dd)]+'\x20('+this[_0x154151(0x3f0)][_0x154151(0x547)]+'):\x20Grupo\x20'+_0x53592f['id']+'\x20atualizado\x20com\x20sucesso.\x20Ação:\x20'+_0x53592f[_0x154151(0x44b)]+_0x154151(0x510)+_0x5a7fa0+_0x154151(0x563)+_0x47d051+_0x154151(0x249)+_0xd901e);}async['inviteCode'](_0x1f2d11,_0x413c92=!0x0){const _0x4d4e48=a0_0x5ca971;try{let _0x17e85c=await this['client'][_0x4d4e48(0x6ff)](_0x1f2d11['groupJid']),_0x5b67c={'groupdata.inviteCode':_0x4d4e48(0x185)+_0x17e85c};if(_0x413c92){let _0x1bb653=await this['repository'][_0x4d4e48(0x739)][_0x4d4e48(0x743)]({'where':{'_id':_0x1f2d11['groupJid']}},_0x5b67c,this['instance'][_0x4d4e48(0x547)]);}return{'inviteUrl':'https://chat.whatsapp.com/'+_0x17e85c,'inviteCode':_0x17e85c};}catch(_0x32d46f){let _0x5c7d66='Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode',_0x44615d=_0x32d46f instanceof Error?_0x32d46f['message']:typeof _0x32d46f=='object'?JSON[_0x4d4e48(0x179)](_0x32d46f):_0x32d46f,_0x246b27=_0x5c7d66+':\x20'+_0x44615d;throw this['logger'][_0x4d4e48(0x2b1)](this[_0x4d4e48(0x6dd)]+'\x20('+this[_0x4d4e48(0x3f0)]['wuid']+_0x4d4e48(0x3a3)+_0x246b27),new q(_0x246b27);}}async[a0_0x5ca971(0x402)](_0x6a3ded){const _0x20fd4c=a0_0x5ca971;try{let _0x38ba61=await this[_0x20fd4c(0x2cc)][_0x20fd4c(0x1a6)](_0x6a3ded['groupJid']);return{'revoked':!0x0,'inviteUrl':'https://chat.whatsapp.com/'+_0x38ba61,'inviteCode':_0x38ba61};}catch(_0x2caa75){let _0x4988ec=_0x20fd4c(0x17b),_0xaf3380=_0x2caa75 instanceof Error?_0x2caa75['message']:typeof _0x2caa75==_0x20fd4c(0x487)?JSON['stringify'](_0x2caa75):_0x2caa75,_0x2d1283=_0x4988ec+':\x20'+_0xaf3380;throw this[_0x20fd4c(0x56b)][_0x20fd4c(0x2b1)](this['instanceName']+'\x20('+this['instance'][_0x20fd4c(0x547)]+_0x20fd4c(0x3a3)+_0x2d1283),new q(_0x2d1283);}}async[a0_0x5ca971(0x362)](_0x225a42){const _0x6c7b09=a0_0x5ca971;try{if((0x0,L['isURL'])(_0x225a42[_0x6c7b09(0x3ef)]))var _0x48c59a=_0x225a42[_0x6c7b09(0x3ef)][_0x6c7b09(0x266)]('/')[0x3];else var _0x48c59a=_0x225a42[_0x6c7b09(0x3ef)];let _0x450011=await this[_0x6c7b09(0x2cc)][_0x6c7b09(0x59d)](_0x48c59a);return this[_0x6c7b09(0x56b)][_0x6c7b09(0x608)](this[_0x6c7b09(0x6dd)]+'\x20('+this[_0x6c7b09(0x3f0)][_0x6c7b09(0x547)]+_0x6c7b09(0x3a3)+_0x450011),{'join':!0x0,'inviteCode':_0x48c59a,'groupJid':_0x450011};}catch(_0x46c72e){let _0x499ab3=_0x6c7b09(0x5a8),_0x2baea8=_0x46c72e instanceof Error?_0x46c72e[_0x6c7b09(0x4f4)]:typeof _0x46c72e=='object'?JSON['stringify'](_0x46c72e):_0x46c72e,_0x3c8396=_0x499ab3+':\x20'+_0x2baea8;throw this['logger']['error'](this[_0x6c7b09(0x6dd)]+'\x20('+this[_0x6c7b09(0x3f0)][_0x6c7b09(0x547)]+_0x6c7b09(0x3a3)+_0x3c8396),new q(_0x3c8396);}}async[a0_0x5ca971(0x879)](_0x90e51f){const _0x481a3f=a0_0x5ca971;try{return{'participants':(await this['repository']['chat'][_0x481a3f(0x640)]({'where':{'_id':_0x90e51f[_0x481a3f(0x17e)]}},this[_0x481a3f(0x3f0)][_0x481a3f(0x547)]))[_0x481a3f(0x5c8)][_0x481a3f(0x540)]};}catch(_0x4fb9f0){let _0x199cfa=_0x481a3f(0x23c),_0x1dcb87=_0x4fb9f0 instanceof Error?_0x4fb9f0[_0x481a3f(0x4f4)]:typeof _0x4fb9f0==_0x481a3f(0x487)?JSON['stringify'](_0x4fb9f0):_0x4fb9f0,_0x297b8d=_0x199cfa+':\x20'+_0x1dcb87;throw this[_0x481a3f(0x56b)][_0x481a3f(0x2b1)](this['instanceName']+'\x20('+this[_0x481a3f(0x3f0)][_0x481a3f(0x547)]+_0x481a3f(0x3a3)+_0x297b8d),new q(_0x297b8d);}}async['leaveGroup'](_0x31ef38){const _0x1f0367=a0_0x5ca971;try{return await this['client'][_0x1f0367(0x5a6)](_0x31ef38[_0x1f0367(0x17e)]),{'groupJid':_0x31ef38[_0x1f0367(0x17e)],'leave':!0x0};}catch(_0xdba499){let _0x1b5c33='Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup',_0x1cc0ac=_0xdba499 instanceof Error?_0xdba499['message']:typeof _0xdba499==_0x1f0367(0x487)?JSON[_0x1f0367(0x179)](_0xdba499):_0xdba499,_0xfbd95e=_0x1b5c33+':\x20'+_0x1cc0ac;throw this[_0x1f0367(0x56b)][_0x1f0367(0x2b1)](this['instanceName']+'\x20('+this[_0x1f0367(0x3f0)]['wuid']+_0x1f0367(0x3a3)+_0xfbd95e),new m(_0xfbd95e);}}async[a0_0x5ca971(0x47e)](_0x1e762a){const _0x1762f0=a0_0x5ca971;return await this[_0x1762f0(0x3bc)](_0x1e762a[_0x1762f0(0x274)],{'poll':{'name':_0x1e762a[_0x1762f0(0x47e)]?.[_0x1762f0(0x41c)],'selectableCount':_0x1e762a[_0x1762f0(0x47e)][_0x1762f0(0x857)],'values':_0x1e762a[_0x1762f0(0x47e)]['values']}},_0x1e762a?.[_0x1762f0(0x306)]);}async[a0_0x5ca971(0x67a)](_0x45bf2c){const _0x3cf447=a0_0x5ca971;return await this['sendMessageWithTyping'](_0x45bf2c[_0x3cf447(0x274)],{'listMessage':{'title':_0x45bf2c[_0x3cf447(0x67a)][_0x3cf447(0x451)],'description':_0x45bf2c[_0x3cf447(0x67a)]['description'],'buttonText':_0x45bf2c[_0x3cf447(0x67a)]?.[_0x3cf447(0x2eb)],'footerText':_0x45bf2c[_0x3cf447(0x67a)]?.[_0x3cf447(0x5ed)],'sections':_0x45bf2c[_0x3cf447(0x67a)][_0x3cf447(0x76e)],'listType':0x2}},_0x45bf2c?.['options']);}async[a0_0x5ca971(0x36b)](_0x1325a4){const _0x2a466a=a0_0x5ca971;let _0x4ed57d;if(_0x1325a4[_0x2a466a(0x36b)]['type']===_0x2a466a(0x430)){let _0x3a8237=_0x1325a4['menuMessage'][_0x2a466a(0x6e4)]['indexOf']('\x0a'),_0x46f54c='',_0x41d3ca='';_0x3a8237!==-0x1?(_0x46f54c=_0x1325a4[_0x2a466a(0x36b)]['text'][_0x2a466a(0x5ef)](0x0,_0x3a8237)[_0x2a466a(0x56d)](),_0x41d3ca=_0x1325a4[_0x2a466a(0x36b)][_0x2a466a(0x6e4)][_0x2a466a(0x5ef)](_0x3a8237+0x1)):_0x41d3ca=_0x1325a4[_0x2a466a(0x36b)]['text'];let _0x50f835=_0x1325a4[_0x2a466a(0x36b)][_0x2a466a(0x16d)]['filter'](_0x56094d=>_0x56094d[_0x2a466a(0x56d)]()!==''),_0x16ba56=this[_0x2a466a(0x41f)](_0x50f835);_0x4ed57d={'listMessage':{'title':_0x46f54c,'description':_0x41d3ca,'buttonText':_0x1325a4[_0x2a466a(0x36b)]['buttonText']||_0x2a466a(0x4e5),'footerText':_0x1325a4['menuMessage'][_0x2a466a(0x5ed)],'sections':_0x16ba56,'listType':0x2}};}else{if(_0x1325a4[_0x2a466a(0x36b)][_0x2a466a(0x536)]===_0x2a466a(0x1e9)){let _0x4e1782=_0x1325a4[_0x2a466a(0x36b)]['choices'][_0x2a466a(0x587)](_0x3a3318=>!(_0x3a3318[_0x2a466a(0x365)]('[')&&_0x3a3318[_0x2a466a(0x83d)](']'))&&_0x3a3318[_0x2a466a(0x56d)]()!=='')[_0x2a466a(0x7a8)](_0x4c49b0=>_0x4c49b0[_0x2a466a(0x266)]('\x0a')[0x0]);_0x4ed57d={'poll':{'name':_0x1325a4[_0x2a466a(0x36b)][_0x2a466a(0x6e4)],'selectableCount':_0x1325a4[_0x2a466a(0x36b)][_0x2a466a(0x857)]||0x1,'values':_0x4e1782}};}}return await this[_0x2a466a(0x3bc)](_0x1325a4[_0x2a466a(0x274)],_0x4ed57d,_0x1325a4?.[_0x2a466a(0x306)]);}[a0_0x5ca971(0x41f)](_0x423d0d){const _0x289de9=a0_0x5ca971;let _0x241fd3=[],_0x46646c={'rows':[]};return _0x423d0d[_0x289de9(0x491)](_0x22c1a7=>{const _0x498e55=_0x289de9;if(_0x22c1a7[_0x498e55(0x365)]('[')&&_0x22c1a7[_0x498e55(0x83d)](']'))_0x46646c[_0x498e55(0x866)]['length']>0x0&&_0x241fd3[_0x498e55(0x59a)](_0x46646c),_0x46646c={'title':_0x22c1a7[_0x498e55(0x3f4)](0x1,-0x1),'rows':[]};else{let _0x589217=_0x22c1a7[_0x498e55(0x266)]('\x0a')[_0x498e55(0x7a8)](_0x36ec59=>_0x36ec59[_0x498e55(0x56d)]()),_0x4133df=_0x589217[0x0],_0x4dea7f=_0x589217[0x1]||null,_0x524fe0=_0x589217[0x2]||_0x4133df;_0x46646c[_0x498e55(0x866)][_0x498e55(0x59a)]({'title':_0x4133df,'description':_0x4dea7f,'rowId':_0x524fe0});}}),_0x46646c[_0x289de9(0x866)][_0x289de9(0x532)]>0x0&&_0x241fd3[_0x289de9(0x59a)](_0x46646c),_0x241fd3;}async['updateMessage'](_0x45246c,_0x2e4cdd){const _0x219510=a0_0x5ca971;if(await this[_0x219510(0x4bb)](_0x45246c,!0x0)){let _0x3591cf={'where':{'_id':_0x45246c['id']}},_0x32f372={'status':[_0x2e4cdd[_0x219510(0x2f7)]][0x0]};try{let _0x2a2a8c=await this[_0x219510(0x7fa)][_0x219510(0x4f4)][_0x219510(0x26b)](_0x3591cf,_0x32f372,this[_0x219510(0x3f0)]['wuid']);_0x2a2a8c&&V(this['instanceName'],_0x219510(0x873),{'message':_0x2a2a8c});}catch{}}}[a0_0x5ca971(0x175)](_0x5054d9){const _0xc5da80=a0_0x5ca971;let _0x5aa107=[];return _0x5054d9[_0xc5da80(0x491)](_0x12563c=>{const _0x5a507a=_0xc5da80;_0x12563c['title']&&_0x5aa107[_0x5a507a(0x59a)]('['+_0x12563c['title']+']'),_0x12563c[_0x5a507a(0x866)]['forEach'](_0x40695b=>{const _0xc1a616=_0x5a507a;_0x5aa107[_0xc1a616(0x59a)](_0x40695b[_0xc1a616(0x451)]);});}),_0x5aa107[_0xc5da80(0x897)]('|');}[a0_0x5ca971(0x34f)](_0x3b7e38){const _0x1e73f6=a0_0x5ca971;let _0x5aae14=_0x3b7e38[_0x1e73f6(0x3d2)](/\\n/g,'\x0a')['split']('\x0a')[_0x1e73f6(0x587)](_0x1a92ce=>_0x1a92ce[_0x1e73f6(0x839)]('TEL')||_0x1a92ce[_0x1e73f6(0x839)](_0x1e73f6(0x695))),_0x46e0d7='';return _0x5aae14[_0x1e73f6(0x491)](_0x1c3253=>{const _0x23c253=_0x1e73f6;let _0x37f6d6=/TEL(?:.*):(.+)/,_0x443802=/EMAIL(?:.*):(.+)/,_0x534251=_0x1c3253['match'](_0x37f6d6),_0x2bffa5=_0x1c3253[_0x23c253(0x3ca)](_0x443802);if(_0x534251){let _0x4444ca=_0x534251[0x1][_0x23c253(0x3d2)](/-| |\+|\(|\)/g,'')[_0x23c253(0x56d)]();_0x46e0d7+=_0x23c253(0x231)+_0x4444ca+'\x0a';}else{if(_0x2bffa5){let _0x2fb103=_0x2bffa5[0x1][_0x23c253(0x56d)]();_0x46e0d7+=_0x23c253(0x4cf)+_0x2fb103+'\x0a';}}}),_0x46e0d7['trim']();}async[a0_0x5ca971(0x37d)](_0x18095c,_0x2295cc,_0x4ab58b,_0x28674e=null){const _0xa36557=a0_0x5ca971;if(_0x18095c['ENABLED'])try{let _0x2cd31e=_0x2295cc[_0xa36557(0x74a)][_0xa36557(0x509)][_0xa36557(0x3d2)](/:\d{1,2}@/g,'@'),_0x488cb2=_0x2295cc[_0xa36557(0x74a)][_0xa36557(0x751)],_0x422c62=_0x2cd31e['endsWith'](_0xa36557(0x5e5)),_0x57414e=_0x2295cc[_0xa36557(0x489)]?.[_0xa36557(0x3d2)](/:\d{1,2}@/g,'@')||'',_0x25f9d9=_0x2295cc[_0xa36557(0x5a5)]?.[_0xa36557(0x6e4)]||_0x2295cc['message_normalized']?.['caption']||_0x2295cc[_0xa36557(0x5a5)]?.[_0xa36557(0x647)]||_0x2295cc[_0xa36557(0x5a5)]?.[_0xa36557(0x41c)]||'',_0x1b5ef4={'_id':_0x2295cc[_0xa36557(0x4a6)],'remoteJid':_0x488cb2?this[_0xa36557(0x3f0)][_0xa36557(0x547)]:_0x422c62?_0x57414e:_0x2cd31e,'pushName':_0x488cb2?this[_0xa36557(0x3f0)]['profileName']||'Eu':_0x2295cc['pushName'],'text':_0x25f9d9,'type':_0x2295cc['messageType'],'when':_0x2295cc[_0xa36557(0x684)]||Date[_0xa36557(0x7d1)]()};_0x28674e||(_0x28674e=await this['repository'][_0xa36557(0x739)][_0xa36557(0x640)]({'where':{'_id':_0x2cd31e}},this[_0xa36557(0x3f0)][_0xa36557(0x547)]));let _0x106bcf=_0x28674e?_0x488cb2?_0x28674e['unreadcount']:(_0x28674e['unreadcount']||0x0)+0x1:_0x488cb2?0x0:0x1,_0x181e23={'lastmsg':_0x2295cc['messageTimestamp']||Date['now'](),'ephemeralExpiration':_0x2295cc['expiration'],'lastMessage':_0x1b5ef4,'unreadcount':_0x106bcf,..._0x488cb2||_0x422c62?{}:{'name':_0x2295cc[_0xa36557(0x388)]},..._0x422c62?{'group':_0x422c62}:{},...!_0x488cb2&&!_0x422c62&&_0x2295cc[_0xa36557(0x84f)]?{'imagechat':_0x2295cc['profilePictureUrl']}:{}};if(!_0x422c62&&(!_0x28674e?.['leadInfo']||!_0x28674e[_0xa36557(0x341)][_0xa36557(0x207)])&&_0x2295cc[_0xa36557(0x388)]&&!_0x488cb2&&(_0x181e23={..._0x181e23,'leadInfo.nome':_0x2295cc['pushName']}),_0x28674e?.[_0xa36557(0x341)]['etiquetas']||(_0x181e23={..._0x181e23,'leadInfo.etiquetas':[]}),_0x28674e?.[_0xa36557(0x341)]['customFields']||(_0x181e23={..._0x181e23,'leadInfo.customFields':[]}),_0x28674e?.[_0xa36557(0x341)]['tags']||(_0x181e23={..._0x181e23,'leadInfo.tags':[]}),_0x28674e&&_0x28674e?.[_0xa36557(0x4e9)]){let _0xf963f=await this['repository']['label']['find']({'where':{}},this[_0xa36557(0x3f0)][_0xa36557(0x547)]),_0x5b475b=new Set(_0xf963f['map'](_0x5e0b99=>_0x5e0b99[_0xa36557(0x4a6)])),_0x516f03=(_0x28674e['leadInfo']?.[_0xa36557(0x5e1)]||[])[_0xa36557(0x587)](_0x2c760f=>_0x5b475b['has'](_0x2c760f));_0x181e23={..._0x181e23,'imported':!0x1,'leadInfo.etiquetas':_0x516f03};for(let _0x3e6b0a of _0x516f03)await this[_0xa36557(0x36e)](_0x3e6b0a,_0x2cd31e);}if(!this[_0xa36557(0x755)][_0xa36557(0x557)]['find'](_0x580ee9=>_0x580ee9[_0xa36557(0x3e1)]&&_0x25f9d9['includes'](_0x580ee9['startCommand']))&&_0x4ab58b==='MESSAGES_UPSERT'&&_0x488cb2&&this[_0xa36557(0x755)]?.[_0xa36557(0x627)][_0xa36557(0x80e)]&&_0x25f9d9['trim']()!==this[_0xa36557(0x755)]?.[_0xa36557(0x627)]['stopConversation'][_0xa36557(0x56d)]()){let _0x2ca2d8=(this[_0xa36557(0x755)]?.[_0xa36557(0x627)][_0xa36557(0x28d)]||0x0)*0xea60,_0x1bd170=Date[_0xa36557(0x7d1)]()+_0x2ca2d8;_0x28674e?.[_0xa36557(0x341)]?.['desativadoFluxoAte']===0x0||(_0x181e23={..._0x181e23,'leadInfo.desativadoFluxoAte':_0x1bd170},this[_0xa36557(0x56b)]['verbose'](this[_0xa36557(0x6dd)]+'\x20('+this['instance'][_0xa36557(0x547)]+_0xa36557(0x164)+_0x1bd170+'.'));}if(_0x25f9d9[_0xa36557(0x56d)]()===this[_0xa36557(0x755)]?.[_0xa36557(0x627)][_0xa36557(0x524)]['trim']()){this['logger'][_0xa36557(0x608)](this[_0xa36557(0x6dd)]+'\x20('+this['instance'][_0xa36557(0x547)]+'):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20'+_0x25f9d9);let _0xab1780=Date[_0xa36557(0x7d1)]();this[_0xa36557(0x755)]?.[_0xa36557(0x627)]['stopMinutes']===0x0?_0x181e23={..._0x181e23,'leadInfo.desativadoFluxoAte':_0xab1780+0x7591f6200}:_0x181e23={..._0x181e23,'leadInfo.desativadoFluxoAte':_0xab1780+this['AutomateSystem']?.[_0xa36557(0x627)][_0xa36557(0x72e)]*0x3c*0x3e8};}if(_0x28674e=await this['repository'][_0xa36557(0x739)][_0xa36557(0x743)]({'where':{'_id':_0x2cd31e}},_0x181e23,this[_0xa36557(0x3f0)][_0xa36557(0x547)],{'new':!0x0,'upsert':!0x0}),_0x28674e)V(this[_0xa36557(0x6dd)],_0xa36557(0x795),{'chat':_0x28674e});else{this[_0xa36557(0x56b)][_0xa36557(0x2b1)](this[_0xa36557(0x6dd)]+'\x20('+this[_0xa36557(0x3f0)][_0xa36557(0x547)]+_0xa36557(0x776));return;}if(_0x488cb2)return this[_0xa36557(0x56b)][_0xa36557(0x608)](this['instanceName']+'\x20('+this[_0xa36557(0x3f0)][_0xa36557(0x547)]+_0xa36557(0x7dc)),null;if(!this[_0xa36557(0x755)]?.[_0xa36557(0x627)][_0xa36557(0x80e)])return this['logger']['verbose'](this[_0xa36557(0x6dd)]+'\x20('+this[_0xa36557(0x3f0)][_0xa36557(0x547)]+_0xa36557(0x870)),null;if(_0x28674e[_0xa36557(0x4a6)][_0xa36557(0x839)](_0xa36557(0x5e5))&&this['AutomateSystem']?.[_0xa36557(0x627)]['ignoreGroups']===!0x0)return this[_0xa36557(0x56b)][_0xa36557(0x608)](this[_0xa36557(0x6dd)]+'\x20('+this['instance']['wuid']+_0xa36557(0x4c1)),null;if(_0x28674e[_0xa36557(0x341)]){if(_0x28674e['leadInfo']['desativadoFluxoAte']===0x0||_0x28674e['leadInfo']['atendimentoAberto'])return this[_0xa36557(0x56b)][_0xa36557(0x608)](this[_0xa36557(0x6dd)]+'\x20('+this[_0xa36557(0x3f0)][_0xa36557(0x547)]+_0xa36557(0x20f)+_0x2cd31e+',\x20saindo.'),null;if(_0x28674e[_0xa36557(0x341)]['desativadoFluxoAte']>Date[_0xa36557(0x7d1)]()&&!_0x2295cc[_0xa36557(0x5a5)]?.['vote'])return this[_0xa36557(0x56b)][_0xa36557(0x608)](this['instanceName']+'\x20('+this['instance'][_0xa36557(0x547)]+'):\x20Está\x20configurado\x20para\x20parar\x20até\x20'+new Date(_0x28674e['leadInfo'][_0xa36557(0x6c5)])[_0xa36557(0x75c)]()+_0xa36557(0x3e2)),null;}this['logger'][_0xa36557(0x608)](this[_0xa36557(0x6dd)]+'\x20('+this['instance'][_0xa36557(0x547)]+_0xa36557(0x4c3)),this['StartBot'](_0x2295cc,_0x4ab58b);}catch(_0x4f5eef){let _0xf64f2e=_0xa36557(0x60e),_0x5b698d=_0x4f5eef instanceof Error?_0x4f5eef[_0xa36557(0x4f4)]:typeof _0x4f5eef==_0xa36557(0x487)?JSON[_0xa36557(0x179)](_0x4f5eef):_0x4f5eef,_0x2265a5=_0xf64f2e+':\x20'+_0x5b698d;return this[_0xa36557(0x56b)][_0xa36557(0x2b1)](this[_0xa36557(0x6dd)]+'\x20('+this[_0xa36557(0x3f0)][_0xa36557(0x547)]+'):\x20'+_0x2265a5),null;}}async[a0_0x5ca971(0x23a)](_0x132fa7,_0x33fab3){const _0xf35e54=a0_0x5ca971;if(_0x33fab3['ENABLED']){let _0x1d7d95=_0x132fa7[_0xf35e54(0x7a8)](async _0x59c765=>{const _0x498ec5=_0xf35e54;try{let _0x221d80={'_id':_0x59c765['_id'],'owner':_0x59c765[_0x498ec5(0x42d)],'lastcache':0x0};if(Object[_0x498ec5(0x418)](_0x59c765)['forEach'](_0x5c77eb=>{_0x59c765[_0x5c77eb]!==null&&(_0x221d80[_0x5c77eb]=_0x59c765[_0x5c77eb]);}),_0x221d80[_0x498ec5(0x415)]===null&&(_0x221d80[_0x498ec5(0x415)]=_0x498ec5(0x153)),Object[_0x498ec5(0x418)](_0x221d80)['length']>0x0)return await this['repository'][_0x498ec5(0x739)]['updateOne']({'where':{'_id':_0x59c765['_id']}},_0x221d80,this[_0x498ec5(0x3f0)][_0x498ec5(0x547)]);}catch(_0x56338b){let _0x501c2e=_0x498ec5(0x463)+_0x59c765[_0x498ec5(0x4a6)],_0xfecda1=_0x56338b instanceof Error?_0x56338b['message']:typeof _0x56338b==_0x498ec5(0x487)?JSON[_0x498ec5(0x179)](_0x56338b):_0x56338b,_0x4ec341=_0x501c2e+':\x20'+_0xfecda1;return this[_0x498ec5(0x56b)][_0x498ec5(0x2b1)](this[_0x498ec5(0x6dd)]+'\x20('+this[_0x498ec5(0x3f0)][_0x498ec5(0x547)]+'):\x20'+_0x4ec341),null;}}),_0x348934=(await Promise[_0xf35e54(0x6de)](_0x1d7d95))[_0xf35e54(0x587)](_0x203f09=>_0x203f09!==null)[_0xf35e54(0x532)];this['logger'][_0xf35e54(0x608)](this[_0xf35e54(0x6dd)]+'\x20('+this['instance'][_0xf35e54(0x547)]+_0xf35e54(0x3a3)+_0x348934+_0xf35e54(0x19e)+this[_0xf35e54(0x3f0)][_0xf35e54(0x547)]+_0xf35e54(0x6eb));}}async[a0_0x5ca971(0x3fa)](_0x4f1478){const _0x527f62=a0_0x5ca971;this[_0x527f62(0x56b)]['verbose'](this[_0x527f62(0x6dd)]+'\x20('+this['instance'][_0x527f62(0x547)]+_0x527f62(0x749));let _0x41accf={'readMessages':[{'remoteJid':_0x4f1478[_0x527f62(0x61a)][_0x527f62(0x2bb)][_0x527f62(0x74a)][_0x527f62(0x509)],'fromMe':_0x4f1478[_0x527f62(0x61a)]['lastReceivedMessage'][_0x527f62(0x74a)][_0x527f62(0x751)],'id':_0x4f1478[_0x527f62(0x61a)][_0x527f62(0x2bb)][_0x527f62(0x74a)]['id']}]};await this[_0x527f62(0x5d6)](_0x41accf);}async[a0_0x5ca971(0x308)](_0x56c0d2,_0x252086){const _0x4418d7=a0_0x5ca971;try{let {key:_0x57078e,message_normalized:_0x31663a}=_0x56c0d2,_0x2c1af7=_0x31663a,_0x3ee887=_0x31663a[_0x4418d7(0x6e4)]||_0x31663a[_0x4418d7(0x572)]||_0x31663a[_0x4418d7(0x647)]||_0x31663a['name']||'',_0x21485e=_0x57078e[_0x4418d7(0x509)],_0x26e794=null,_0x5adcab=this[_0x4418d7(0x755)][_0x4418d7(0x557)]['find'](_0x1e2652=>_0x1e2652[_0x4418d7(0x3e1)]&&_0x3ee887['includes'](_0x1e2652[_0x4418d7(0x3e1)]));if(_0x5adcab&&_0x252086===_0x4418d7(0x35c)){let _0x3cae2b=await this[_0x4418d7(0x7fa)][_0x4418d7(0x6da)][_0x4418d7(0x640)]({'where':{'_id':_0x5adcab[_0x4418d7(0x4a6)]}});if(this[_0x4418d7(0x56b)][_0x4418d7(0x608)](this['instanceName']+'\x20('+this[_0x4418d7(0x3f0)][_0x4418d7(0x547)]+_0x4418d7(0x604)),_0x3cae2b&&_0x3cae2b['whoCanUse']?.[_0x4418d7(0x839)](this[_0x4418d7(0x3f0)][_0x4418d7(0x547)]))_0x26e794=await this[_0x4418d7(0x2cd)](_0x3cae2b,_0x57078e,_0x2c1af7);else return this[_0x4418d7(0x56b)][_0x4418d7(0x608)](this[_0x4418d7(0x6dd)]+'\x20('+this[_0x4418d7(0x3f0)][_0x4418d7(0x547)]+_0x4418d7(0x2fb)),null;}else this[_0x4418d7(0x56b)][_0x4418d7(0x608)](this[_0x4418d7(0x6dd)]+'\x20('+this['instance'][_0x4418d7(0x547)]+_0x4418d7(0x6bb));if(_0x26e794=await this['findConversation'](_0x21485e,_0x2c1af7),_0x26e794){this['logger']['verbose'](this[_0x4418d7(0x6dd)]+'\x20('+this[_0x4418d7(0x3f0)][_0x4418d7(0x547)]+'):\x20Encontrou\x20conversa\x20no\x20startBot:\x20'),!_0x57078e['fromMe']&&_0x26e794[_0x4418d7(0x1ed)]&&this[_0x4418d7(0x3fa)](_0x26e794);let _0x1ddfea=await this[_0x4418d7(0x5c2)](_0x26e794);_0x1ddfea&&await this[_0x4418d7(0x58b)](_0x26e794,_0x1ddfea);}}catch(_0x2691bd){this[_0x4418d7(0x56b)][_0x4418d7(0x2b1)](this[_0x4418d7(0x6dd)]+'\x20('+this['instance'][_0x4418d7(0x547)]+_0x4418d7(0x70f)+(_0x2691bd instanceof Error?_0x2691bd[_0x4418d7(0x4f4)]:JSON[_0x4418d7(0x179)](_0x2691bd,null,0x2)));}}['flattenObject'](_0x2de147,_0x24d402='',_0x220b49={}){const _0x14fb3c=a0_0x5ca971;return typeof _0x2de147!=_0x14fb3c(0x487)||_0x2de147===null?(_0x24d402&&(_0x220b49[_0x24d402]=_0x2de147),_0x220b49):(Object[_0x14fb3c(0x327)](_0x2de147)[_0x14fb3c(0x491)](([_0x233fea,_0x4fb4b5])=>{const _0x1e6584=_0x14fb3c;let _0x2eeccc=_0x24d402?_0x24d402+'.'+_0x233fea:'_'+_0x233fea;Array[_0x1e6584(0x4d0)](_0x4fb4b5)?_0x4fb4b5['forEach']((_0xc1cc56,_0x5ad60a)=>{const _0x31fc59=_0x1e6584;this[_0x31fc59(0x568)](_0xc1cc56,_0x2eeccc+'['+_0x5ad60a+']',_0x220b49);}):typeof _0x4fb4b5==_0x1e6584(0x487)&&_0x4fb4b5!==null?this[_0x1e6584(0x568)](_0x4fb4b5,_0x2eeccc,_0x220b49):_0x220b49[_0x2eeccc]=String(_0x4fb4b5);}),_0x220b49);}['variablesToObject'](_0x147632){const _0x382da2=a0_0x5ca971;let _0x1b32cb={};for(let _0x59b81d of _0x147632)typeof _0x59b81d[_0x382da2(0x41c)]==_0x382da2(0x2a0)&&typeof _0x59b81d[_0x382da2(0x5d4)]==_0x382da2(0x2a0)&&(_0x1b32cb[_0x59b81d['name']]=_0x59b81d[_0x382da2(0x5d4)]);return _0x1b32cb;}async[a0_0x5ca971(0x5c2)](_0x5ac1e5){const _0x710665=a0_0x5ca971;if(!this[_0x710665(0x755)]?.[_0x710665(0x627)][_0x710665(0x80e)]||_0x5ac1e5[_0x710665(0x2f7)]!==_0x710665(0x158)&&_0x5ac1e5[_0x710665(0x766)]==='')return null;let _0x3b2d84=_0x5ac1e5[_0x710665(0x61a)][_0x710665(0x67d)]||_0x710665(0x3a2);typeof _0x5ac1e5[_0x710665(0x61a)][_0x710665(0x633)]>'u'&&(_0x5ac1e5['chatLog'][_0x710665(0x633)]=!0x0);let _0x3a44fd=_0x5ac1e5[_0x710665(0x61a)]['lastCondition'];this[_0x710665(0x56b)]['verbose'](this[_0x710665(0x6dd)]+'\x20('+this['instance'][_0x710665(0x547)]+'):\x20lastBlockId:\x20'+_0x3b2d84+_0x710665(0x6f7)+_0x3a44fd);let _0x530e6f=_0x3b2d84==='start'?_0x5ac1e5[_0x710665(0x200)][_0x710665(0x2d4)](_0x578120=>_0x578120[_0x710665(0x536)]===_0x710665(0x3a2)):_0x5ac1e5[_0x710665(0x200)][_0x710665(0x2d4)](_0x593a17=>_0x593a17[_0x710665(0x4a6)]['toString']()===_0x3b2d84[_0x710665(0x7b1)]());if(!_0x530e6f)return this[_0x710665(0x56b)][_0x710665(0x2b1)](this[_0x710665(0x6dd)]+'\x20('+this[_0x710665(0x3f0)][_0x710665(0x547)]+_0x710665(0x514)+_0x3b2d84),null;let _0x4e1712={'_pushName':_0x5ac1e5?.[_0x710665(0x61a)]?.[_0x710665(0x2bb)]?.[_0x710665(0x388)]||'','_sender':this[_0x710665(0x3f0)][_0x710665(0x547)]||'',..._0x5ac1e5[_0x710665(0x61a)][_0x710665(0x62d)]},_0x1ef684=null;if(_0x5ac1e5['waitingMenu_id']){let _0x3eb737=_0x5ac1e5[_0x710665(0x61a)][_0x710665(0x2bb)][_0x710665(0x647)],_0x2edf42=_0x5ac1e5[_0x710665(0x88c)][_0x710665(0x2d4)](_0x160a07=>_0x160a07[_0x710665(0x876)]===_0x3eb737);if(_0x2edf42){let _0x12ad26=_0x2edf42[_0x710665(0x352)];if(_0x1ef684=_0x5ac1e5[_0x710665(0x200)]['find'](_0x28fa4e=>_0x28fa4e[_0x710665(0x159)]===_0x12ad26&&_0x28fa4e[_0x710665(0x30f)]===0x1),_0x530e6f[_0x710665(0x748)][_0x710665(0x84e)]){let _0x4b64bf={'id':_0x5ac1e5[_0x710665(0x766)],'remoteJid':_0x5ac1e5[_0x710665(0x509)],'fromMe':!0x0};await this['deleteMessage'](_0x4b64bf);}if(_0x530e6f[_0x710665(0x748)][_0x710665(0x84e)]&&_0x530e6f[_0x710665(0x748)][_0x710665(0x323)]&&_0x530e6f[_0x710665(0x748)][_0x710665(0x6a4)]===_0x710665(0x1e9)){let _0x111a97={'number':_0x5ac1e5['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x710665(0x2f8)+_0x5ac1e5[_0x710665(0x374)]+_0x710665(0x83e)+_0x3eb737}};await this[_0x710665(0x227)](_0x111a97);}_0x5ac1e5['status']=_0x710665(0x158),_0x5ac1e5[_0x710665(0x766)]='',_0x5ac1e5[_0x710665(0x374)]='',_0x5ac1e5[_0x710665(0x88c)]=[];}else{this[_0x710665(0x56b)][_0x710665(0x608)](this[_0x710665(0x6dd)]+'\x20('+this[_0x710665(0x3f0)][_0x710665(0x547)]+_0x710665(0x35f));let _0x58ab2d={'activatedCount':_0x5ac1e5[_0x710665(0x61a)]['blockLogs'][_0x710665(0x587)](_0x23ac3d=>String(_0x23ac3d[_0x710665(0x449)])===String(_0x3b2d84))[_0x710665(0x532)],'moreLogs':[_0x710665(0x465)]};if(_0x530e6f[_0x710665(0x748)][_0x710665(0x2b3)]){let _0x3ccb32={'number':_0x5ac1e5['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x530e6f[_0x710665(0x748)]['pollErrorMessage']}};await this[_0x710665(0x227)](_0x3ccb32);}if(_0x530e6f[_0x710665(0x7a0)]!==void 0x0&&_0x58ab2d[_0x710665(0x275)]>=_0x530e6f[_0x710665(0x7a0)]){let _0x1d3ed9=Date['now'](),_0x182534=_0x530e6f[_0x710665(0x33b)]??0xa;isNaN(_0x182534)&&(_0x182534=0xa);let _0x1775e4=_0x1d3ed9+_0x182534*0x3c*0x3e8;_0x58ab2d[_0x710665(0x1ff)]=_0x1775e4,_0x58ab2d[_0x710665(0x518)][_0x710665(0x59a)](_0x710665(0x197)),this[_0x710665(0x496)](_0x5ac1e5,_0x1775e4),_0x5ac1e5[_0x710665(0x766)]='',_0x5ac1e5[_0x710665(0x374)]='',_0x5ac1e5[_0x710665(0x88c)]=[];}return this[_0x710665(0x1e6)](_0x5ac1e5,_0x530e6f,_0x58ab2d,!0x0),null;}}if(_0x3a44fd&&_0x530e6f[_0x710665(0x352)]&&!_0x5ac1e5[_0x710665(0x766)]){let _0x5dfdba=_0x5ac1e5['blocks'][_0x710665(0x587)](_0x275fec=>_0x275fec['groupId'][_0x710665(0x7b1)]()===_0x530e6f['next_groupId']['toString']())['sort']((_0x56f226,_0x4be51b)=>_0x56f226[_0x710665(0x30f)]-_0x4be51b[_0x710665(0x30f)]);_0x5dfdba[_0x710665(0x532)]>0x0&&(_0x1ef684=_0x5dfdba[0x0]);}if(!_0x1ef684){let _0x3e976c=_0x530e6f[_0x710665(0x159)],_0x261e71=_0x5ac1e5[_0x710665(0x200)][_0x710665(0x587)](_0x54cf67=>_0x54cf67[_0x710665(0x159)]===_0x3e976c&&_0x54cf67[_0x710665(0x30f)]>_0x530e6f[_0x710665(0x30f)])[_0x710665(0x1ba)]((_0x51d182,_0x300090)=>_0x51d182[_0x710665(0x30f)]-_0x300090[_0x710665(0x30f)]);_0x261e71[_0x710665(0x532)]>0x0&&(_0x1ef684=_0x261e71[0x0]);}if(!_0x1ef684)return _0x5ac1e5[_0x710665(0x2f7)]=_0x710665(0x83b),null;_0x5ac1e5[_0x710665(0x61a)][_0x710665(0x62d)]=_0x4e1712;let _0x282338=JSON[_0x710665(0x1c3)](JSON[_0x710665(0x179)](_0x1ef684));return this[_0x710665(0x6d8)](_0x282338,_0x5ac1e5[_0x710665(0x61a)][_0x710665(0x62d)]),_0x5ac1e5[_0x710665(0x61a)]['lastBlockId']=_0x282338[_0x710665(0x4a6)],_0x5ac1e5[_0x710665(0x61a)][_0x710665(0x633)]=!0x0,_0x282338;}[a0_0x5ca971(0x29c)](_0x4271c2,_0x43ba47){const _0x5383c6=a0_0x5ca971;return _0x4271c2[_0x5383c6(0x3d2)](/\{\{([^}]+)\}\}/g,(_0x3bbe11,_0x25461e)=>_0x43ba47[_0x25461e]||'');}['replaceVariablesInObject'](_0x5c8a4d,_0x54b90c){const _0x2fbe44=a0_0x5ca971;for(let _0x468d05 in _0x5c8a4d)typeof _0x5c8a4d[_0x468d05]==_0x2fbe44(0x2a0)?_0x5c8a4d[_0x468d05]=this[_0x2fbe44(0x29c)](_0x5c8a4d[_0x468d05],_0x54b90c):typeof _0x5c8a4d[_0x468d05]==_0x2fbe44(0x487)&&this['replaceVariablesInObject'](_0x5c8a4d[_0x468d05],_0x54b90c);}async[a0_0x5ca971(0x196)](_0x13f8b6,_0x5aa7f7){const _0x4b0787=a0_0x5ca971;let _0x45e344=_0x5aa7f7['_id'];if(_0x13f8b6['chatLog']&&_0x13f8b6['chatLog'][_0x4b0787(0x3c1)]){let _0x5b5e4e=_0x13f8b6[_0x4b0787(0x61a)][_0x4b0787(0x3c1)][_0x4b0787(0x587)](_0x2c8fc9=>String(_0x2c8fc9['blockId'])===String(_0x45e344))[_0x4b0787(0x29f)]();if(_0x5b5e4e&&_0x5b5e4e[_0x4b0787(0x2b1)]&&_0x5aa7f7[_0x4b0787(0x71a)])return _0x13f8b6[_0x4b0787(0x2f7)]='closed',await this[_0x4b0787(0x1e1)](_0x13f8b6),null;}if(_0x5aa7f7[_0x4b0787(0x536)]===_0x4b0787(0x748)&&_0x5aa7f7[_0x4b0787(0x748)]['command']===_0x4b0787(0x7a3)&&_0x13f8b6[_0x4b0787(0x766)])return _0x13f8b6[_0x4b0787(0x61a)][_0x4b0787(0x67d)]=_0x45e344,await this[_0x4b0787(0x1e1)](_0x13f8b6),null;let _0x23ef59=await this[_0x4b0787(0x5c2)](_0x13f8b6);if(_0x13f8b6[_0x4b0787(0x61a)]&&_0x13f8b6[_0x4b0787(0x61a)][_0x4b0787(0x3c1)]){let _0x1d383e=_0x13f8b6['chatLog'][_0x4b0787(0x3c1)][_0x4b0787(0x587)](_0x3dfdd7=>String(_0x3dfdd7[_0x4b0787(0x449)])===String(_0x45e344))[_0x4b0787(0x532)];if(_0x5aa7f7[_0x4b0787(0x7a0)]!==void 0x0&&_0x1d383e>=_0x5aa7f7[_0x4b0787(0x7a0)]){let _0x8363b4=Date[_0x4b0787(0x7d1)](),_0x686289=_0x5aa7f7[_0x4b0787(0x33b)]??0xa;isNaN(_0x686289)&&(_0x686289=0xa);let _0x5a65b6=_0x8363b4+_0x686289*0x3c*0x3e8,_0x4693e6={'newStoppedUntil':_0x5a65b6};return this['updateStopChat'](_0x13f8b6,_0x5a65b6),this[_0x4b0787(0x1e6)](_0x13f8b6,_0x5aa7f7,_0x4693e6,!0x0),null;}}_0x23ef59&&_0x23ef59[_0x4b0787(0x536)]!==_0x4b0787(0x746)&&await this['processblock'](_0x13f8b6,_0x23ef59),_0x23ef59||await this['saveConversationToDatabase'](_0x13f8b6),_0x23ef59&&_0x23ef59[_0x4b0787(0x536)]===_0x4b0787(0x746)&&(_0x13f8b6[_0x4b0787(0x61a)][_0x4b0787(0x67d)]=_0x45e344,await this[_0x4b0787(0x1e1)](_0x13f8b6));}async[a0_0x5ca971(0x58b)](_0x4e4436,_0x2a1816){const _0x469f6a=a0_0x5ca971;try{let _0xa238ff=_0x2a1816[_0x469f6a(0x536)];this[_0x469f6a(0x56b)]['verbose'](this[_0x469f6a(0x6dd)]+'\x20('+this[_0x469f6a(0x3f0)][_0x469f6a(0x547)]+_0x469f6a(0x271)+_0xa238ff);let _0x3bbe55={'uazapi':()=>this[_0x469f6a(0x7c6)](_0x4e4436,_0x2a1816),'save':()=>this['saveTextReply'](_0x4e4436,_0x2a1816),'stop':()=>this[_0x469f6a(0x524)](_0x4e4436,_0x2a1816),'condition':()=>this['processConditions'](_0x4e4436,_0x2a1816),'varedit':()=>this[_0x469f6a(0x297)](_0x4e4436,_0x2a1816),'apirequest':()=>this[_0x469f6a(0x553)](_0x4e4436,_0x2a1816),'goToFlow':()=>this[_0x469f6a(0x1e2)](_0x4e4436,_0x2a1816),'scheduleFlow':()=>this['processScheduleFlow'](_0x4e4436,_0x2a1816),'awaitSeconds':()=>this[_0x469f6a(0x593)](_0x4e4436,_0x2a1816),'clearVariables':()=>this[_0x469f6a(0x4c5)](_0x4e4436,_0x2a1816)}[_0xa238ff];_0x3bbe55&&await _0x3bbe55();}catch(_0x257886){this[_0x469f6a(0x56b)][_0x469f6a(0x2b1)](this[_0x469f6a(0x6dd)]+'\x20('+this[_0x469f6a(0x3f0)][_0x469f6a(0x547)]+_0x469f6a(0x4de)+(_0x257886 instanceof Error?_0x257886['message']:JSON['stringify'](_0x257886,null,0x2)));}}async[a0_0x5ca971(0x593)](_0x238a3e,_0x109522){const _0x35f75a=a0_0x5ca971;if(this[_0x35f75a(0x56b)][_0x35f75a(0x608)](this[_0x35f75a(0x6dd)]+'\x20('+this[_0x35f75a(0x3f0)]['wuid']+_0x35f75a(0x852)),!_0x238a3e||!_0x109522)return this[_0x35f75a(0x56b)]['error'](this['instanceName']+'\x20('+this[_0x35f75a(0x3f0)][_0x35f75a(0x547)]+_0x35f75a(0x6c8)),null;let _0x56e82d=+_0x109522['awaitSeconds'];isNaN(_0x56e82d)&&(_0x56e82d=0x0),_0x56e82d=Math[_0x35f75a(0x244)](_0x56e82d,0x3c),await(0x0,w[_0x35f75a(0x190)])(_0x56e82d*0x3e8);let _0x22225a={'moreLogs':[_0x35f75a(0x676)+_0x56e82d+'\x20segundos']};return await this[_0x35f75a(0x1e6)](_0x238a3e,_0x109522,_0x22225a),_0x56e82d;}async[a0_0x5ca971(0x4c5)](_0x381e7c,_0x4afb9e){const _0x524c68=a0_0x5ca971;if(this[_0x524c68(0x56b)][_0x524c68(0x608)](this['instanceName']+'\x20('+this[_0x524c68(0x3f0)]['wuid']+_0x524c68(0x7d4)),!_0x381e7c||!_0x4afb9e)return this[_0x524c68(0x56b)][_0x524c68(0x2b1)](this[_0x524c68(0x6dd)]+'\x20('+this[_0x524c68(0x3f0)][_0x524c68(0x547)]+_0x524c68(0x6c8)),null;let _0x29f959=[];if(_0x4afb9e[_0x524c68(0x20b)][_0x524c68(0x56d)]()===_0x524c68(0x46a)){let _0x37a7f0=[_0x524c68(0x33c),_0x524c68(0x206),_0x524c68(0x3cb),'_activedCount','_remoteJid',_0x524c68(0x4a6),_0x524c68(0x840)];_0x29f959=Object[_0x524c68(0x418)](_0x381e7c[_0x524c68(0x61a)][_0x524c68(0x62d)])[_0x524c68(0x587)](_0x505985=>_0x505985['startsWith']('_')&&!_0x37a7f0[_0x524c68(0x839)](_0x505985));}else _0x29f959=_0x4afb9e[_0x524c68(0x20b)][_0x524c68(0x266)]('|')[_0x524c68(0x7a8)](_0x346db9=>(_0x346db9=_0x346db9[_0x524c68(0x3d2)](/[{}]/g,'')[_0x524c68(0x56d)](),_0x346db9['startsWith']('_')?_0x346db9:'_'+_0x346db9));let _0x18e939=[];_0x29f959[_0x524c68(0x491)](_0x476eb5=>{const _0x5d1051=_0x524c68;_0x476eb5 in _0x381e7c[_0x5d1051(0x61a)][_0x5d1051(0x62d)]&&(delete _0x381e7c[_0x5d1051(0x61a)]['realVariables'][_0x476eb5],_0x18e939[_0x5d1051(0x59a)](_0x476eb5));}),_0x18e939[_0x524c68(0x532)]>0x0?this[_0x524c68(0x56b)][_0x524c68(0x608)](this[_0x524c68(0x6dd)]+'\x20('+this['instance'][_0x524c68(0x547)]+_0x524c68(0x2bf)+_0x18e939['join'](',\x20')):this['logger']['verbose'](this[_0x524c68(0x6dd)]+'\x20('+this[_0x524c68(0x3f0)][_0x524c68(0x547)]+_0x524c68(0x863));let _0x4590e7={'moreLogs':[_0x524c68(0x1b2)+_0x18e939[_0x524c68(0x897)](',\x20')]};return await this['updateConversation'](_0x381e7c,_0x4afb9e,_0x4590e7),null;}async[a0_0x5ca971(0x622)](_0x2d1739,_0x414e32){const _0x252cdc=a0_0x5ca971;if(this[_0x252cdc(0x56b)][_0x252cdc(0x608)](this[_0x252cdc(0x6dd)]+'\x20('+this[_0x252cdc(0x3f0)][_0x252cdc(0x547)]+_0x252cdc(0x28b)),!_0x2d1739||!_0x414e32)return this[_0x252cdc(0x56b)][_0x252cdc(0x2b1)](this[_0x252cdc(0x6dd)]+'\x20('+this[_0x252cdc(0x3f0)][_0x252cdc(0x547)]+_0x252cdc(0x6c8)),null;let _0x3a538f=_0x2d1739[_0x252cdc(0x509)];_0x414e32[_0x252cdc(0x265)][_0x252cdc(0x509)]&&_0x414e32[_0x252cdc(0x265)][_0x252cdc(0x509)][_0x252cdc(0x56d)]()!==''&&(_0x3a538f=_0x414e32[_0x252cdc(0x748)]['remoteJid'][_0x252cdc(0x56d)]());let _0x28b6c9=_0x414e32['scheduleFlow'][_0x252cdc(0x2e3)]*0xea60,_0x4dc557=Date[_0x252cdc(0x7d1)]()+_0x28b6c9,_0x59a238={'status':_0x252cdc(0x347),'info':_0x252cdc(0x250)+_0x2d1739[_0x252cdc(0x41c)],'remoteJids':[_0x3a538f],'when':_0x4dc557,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x252cdc(0x6da),'flowName':_0x414e32[_0x252cdc(0x265)][_0x252cdc(0x2ad)]};this[_0x252cdc(0x799)](_0x59a238);let _0x56abd1=await this[_0x252cdc(0x5c2)](_0x2d1739);_0x56abd1&&await this['processblock'](_0x2d1739,_0x56abd1);}async[a0_0x5ca971(0x1e2)](_0x10c419,_0x288808){const _0x5ae633=a0_0x5ca971;if(this[_0x5ae633(0x56b)][_0x5ae633(0x608)](this[_0x5ae633(0x6dd)]+'\x20('+this[_0x5ae633(0x3f0)][_0x5ae633(0x547)]+_0x5ae633(0x7ce)),!_0x10c419||!_0x288808)return this[_0x5ae633(0x56b)][_0x5ae633(0x2b1)](this[_0x5ae633(0x6dd)]+'\x20('+this[_0x5ae633(0x3f0)]['wuid']+_0x5ae633(0x6c8)),null;await this[_0x5ae633(0x1e6)](_0x10c419,_0x288808,{},!0x0,!0x0);let _0x1735d6=_0x288808[_0x5ae633(0x2e0)];_0x10c419=await this[_0x5ae633(0x85c)](_0x1735d6,_0x10c419[_0x5ae633(0x509)],_0x10c419[_0x5ae633(0x61a)][_0x5ae633(0x62d)]);let _0x15020b=await this[_0x5ae633(0x5c2)](_0x10c419);_0x15020b&&await this[_0x5ae633(0x58b)](_0x10c419,_0x15020b);}async[a0_0x5ca971(0x85c)](_0x4a27ae,_0x3a6ea1,_0x557e1e){const _0x9ffb8f=a0_0x5ca971;this[_0x9ffb8f(0x56b)][_0x9ffb8f(0x608)](this[_0x9ffb8f(0x6dd)]+'\x20('+this[_0x9ffb8f(0x3f0)][_0x9ffb8f(0x547)]+'):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]');try{let _0x4b7c04=this[_0x9ffb8f(0x755)]['flows'][_0x9ffb8f(0x2d4)](_0x319a9e=>_0x319a9e[_0x9ffb8f(0x4a6)]===_0x4a27ae);_0x4b7c04||this['logger']['error'](this[_0x9ffb8f(0x6dd)]+'\x20('+this['instance'][_0x9ffb8f(0x547)]+_0x9ffb8f(0x792)+_0x4a27ae+'\x27\x20não\x20encontrado\x20na\x20memória');let _0x27ebb5=await this[_0x9ffb8f(0x7fa)][_0x9ffb8f(0x6da)][_0x9ffb8f(0x640)]({'where':{'_id':_0x4b7c04[_0x9ffb8f(0x4a6)]}});if(!_0x27ebb5||!_0x27ebb5['whoCanUse']?.['includes'](this[_0x9ffb8f(0x3f0)]['wuid']))throw this[_0x9ffb8f(0x56b)][_0x9ffb8f(0x2b1)](this[_0x9ffb8f(0x6dd)]+'\x20('+this[_0x9ffb8f(0x3f0)][_0x9ffb8f(0x547)]+_0x9ffb8f(0x792)+_0x4a27ae+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x9ffb8f(0x526)+_0x4a27ae+_0x9ffb8f(0x1f1));let _0x4fac22=require(_0x9ffb8f(0x632))['ObjectId'],_0x49841b=Date[_0x9ffb8f(0x7d1)](),_0x6b6345=_0x9ffb8f(0x3a2),_0x5808e6={},_0x30c791={},_0x4d1b25=this[_0x9ffb8f(0x755)][_0x9ffb8f(0x557)][_0x9ffb8f(0x2d4)](_0x35ee0f=>_0x35ee0f[_0x9ffb8f(0x4a6)]===_0x27ebb5['_id']?.[_0x9ffb8f(0x7b1)]()),_0xde8d52=_0x4d1b25?.[_0x9ffb8f(0x468)]??_0x27ebb5[_0x9ffb8f(0x468)]??0x0,_0x35e6ec=_0x4d1b25?.[_0x9ffb8f(0x1ed)]??_0x27ebb5['readMessages']??!0x1,_0x3889ea={'flowId':_0x4b7c04[_0x9ffb8f(0x4a6)],'readMessages':_0x4b7c04[_0x9ffb8f(0x1ed)],..._0x27ebb5,'chatLog':null},_0x379efb={'lastReceivedMessage':_0x5808e6,'lastSendMessage':_0x30c791,'lastBlockId':_0x6b6345,'lastCondition':!0x0,'realVariables':_0x557e1e};_0x3889ea[_0x9ffb8f(0x61a)]=_0x379efb,_0x3889ea[_0x9ffb8f(0x61a)][_0x9ffb8f(0x62d)]={..._0x557e1e},delete _0x3889ea[_0x9ffb8f(0x4a6)],_0x3889ea['_id']=new _0x4fac22(),_0x3889ea[_0x9ffb8f(0x345)]=_0x49841b,_0x3889ea[_0x9ffb8f(0x2f7)]=_0x9ffb8f(0x158),_0x3889ea[_0x9ffb8f(0x509)]=_0x3a6ea1,_0x3889ea[_0x9ffb8f(0x468)]=_0xde8d52,_0x3889ea[_0x9ffb8f(0x1ed)]=_0x35e6ec;let _0x26916f=await this[_0x9ffb8f(0x7fa)]['flowConversation']['updateOne'](_0x3889ea[_0x9ffb8f(0x4a6)],_0x3889ea,this['instance'][_0x9ffb8f(0x547)]);return this[_0x9ffb8f(0x56b)][_0x9ffb8f(0x608)](this[_0x9ffb8f(0x6dd)]+'\x20('+this[_0x9ffb8f(0x3f0)][_0x9ffb8f(0x547)]+_0x9ffb8f(0x298)),_0x26916f?_0x3889ea:null;}catch(_0x345444){let _0x40d783=_0x9ffb8f(0x4e7),_0x44559d=_0x345444 instanceof Error?_0x345444[_0x9ffb8f(0x4f4)]:typeof _0x345444==_0x9ffb8f(0x487)?JSON['stringify'](_0x345444):_0x345444,_0xc83420=_0x40d783+':\x20'+_0x44559d;throw this[_0x9ffb8f(0x56b)][_0x9ffb8f(0x2b1)](this[_0x9ffb8f(0x6dd)]+'\x20('+this[_0x9ffb8f(0x3f0)][_0x9ffb8f(0x547)]+_0x9ffb8f(0x3a3)+_0xc83420),new m(_0xc83420);}}async[a0_0x5ca971(0x553)](_0x21c298,_0x3080b4){const _0x59ca81=a0_0x5ca971;let _0xcd5035,_0x46f538;try{let _0x3725f1=_0x3080b4['apirequest'];if(!_0x3725f1||!_0x3725f1[_0x59ca81(0x768)]||!_0x3725f1[_0x59ca81(0x887)])throw new Error(_0x59ca81(0x336));let _0x30abf2;([_0x59ca81(0x794),_0x59ca81(0x317),'https://api.elevenlabs.io/v1/text-to-speech/'][_0x59ca81(0x606)](_0x5bfb56=>_0x3725f1[_0x59ca81(0x768)][_0x59ca81(0x839)](_0x5bfb56))||_0x3725f1['requestFile'])&&(_0x30abf2='arraybuffer');let _0x186b6a='\u205f',_0x542f01;try{_0x542f01=JSON[_0x59ca81(0x1c3)](_0x3725f1[_0x59ca81(0x360)]['replace'](new RegExp(_0x186b6a,'g'),''));}catch(_0x2495c4){throw _0x2495c4;}let _0x363fc5={'method':_0x3725f1['method'],'url':_0x3725f1[_0x59ca81(0x768)],'headers':_0x3725f1[_0x59ca81(0x490)]||{},..._0x3725f1[_0x59ca81(0x887)][_0x59ca81(0x6fb)]()!==_0x59ca81(0x7e0)&&_0x3725f1[_0x59ca81(0x360)]?{'data':JSON['parse'](_0x3725f1[_0x59ca81(0x360)][_0x59ca81(0x3d2)](new RegExp(_0x186b6a,'g'),''))}:{},..._0x30abf2&&{'responseType':_0x30abf2}},_0x4bed22=await(0x0,ee[_0x59ca81(0x678)])(_0x363fc5),_0x402032=_0x4bed22[_0x59ca81(0x1bb)][_0x59ca81(0x398)];if(_0x402032&&_0x402032['includes'](_0x59ca81(0x39a))||typeof _0x4bed22[_0x59ca81(0x5c9)]==_0x59ca81(0x2a0)){if(typeof _0x4bed22['data']==_0x59ca81(0x2a0)){let _0x467069=_0x4bed22[_0x59ca81(0x5c9)][_0x59ca81(0x3d2)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x59ca81(0x56d)]();try{_0xcd5035=JSON[_0x59ca81(0x1c3)](_0x467069);}catch(_0x18e16c){this['logger'][_0x59ca81(0x2b1)]('Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20'+_0x18e16c[_0x59ca81(0x4f4)]),_0xcd5035={'_apiResponse':_0x4bed22['data']};}}else _0xcd5035=_0x4bed22['data'];let _0xe924fa=_0x21c298[_0x59ca81(0x61a)]['realVariables'],_0x1ee66b=this['flattenObject'](_0xcd5035);return Object['assign'](_0xe924fa,_0x1ee66b),_0x21c298[_0x59ca81(0x61a)][_0x59ca81(0x62d)]=_0xe924fa,_0x46f538={'error':!0x1,'apiResponse':_0xcd5035},this[_0x59ca81(0x1e6)](_0x21c298,_0x3080b4,_0x46f538),_0xcd5035;}if(_0x402032&&(_0x402032[_0x59ca81(0x839)]('application/octet-stream')||_0x402032['includes']('image')||_0x402032[_0x59ca81(0x839)]('audio')||_0x402032[_0x59ca81(0x839)](_0x59ca81(0x6b8)))){this[_0x59ca81(0x56b)][_0x59ca81(0x608)](this[_0x59ca81(0x6dd)]+'\x20('+this[_0x59ca81(0x3f0)][_0x59ca81(0x547)]+_0x59ca81(0x899)+_0x402032);let _0x1d3ab0=(0x0,Y['v4'])(),_0x1d857d='',_0x504423={'image/jpeg':_0x59ca81(0x60b),'image/png':_0x59ca81(0x4a4),'image/gif':'.gif','image/webp':_0x59ca81(0x77e),'image/svg+xml':_0x59ca81(0x19a),'audio/mpeg':_0x59ca81(0x1e5),'audio/ogg':'.ogg','audio/wav':'.wav','video/mp4':_0x59ca81(0x396),'video/webm':_0x59ca81(0x83c),'video/ogg':_0x59ca81(0x5b1),'text/plain':_0x59ca81(0x348),'application/pdf':_0x59ca81(0x3bf),'application/msword':_0x59ca81(0x880),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x59ca81(0x288),'application/vnd.ms-excel':_0x59ca81(0x261),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x59ca81(0x7d6),'application/vnd.ms-powerpoint':_0x59ca81(0x438),'application/vnd.openxmlformats-officedocument.presentationml.presentation':_0x59ca81(0x2b0)};_0x504423[_0x402032]?(_0x1d857d=_0x504423[_0x402032],this[_0x59ca81(0x56b)][_0x59ca81(0x608)](this[_0x59ca81(0x6dd)]+'\x20('+this[_0x59ca81(0x3f0)]['wuid']+_0x59ca81(0x7b0)+_0x1d857d)):(_0x1d857d=_0x59ca81(0x894),this[_0x59ca81(0x56b)][_0x59ca81(0x608)](this['instanceName']+'\x20('+this[_0x59ca81(0x3f0)]['wuid']+_0x59ca81(0x5cb)+_0x1d857d)),_0x1d3ab0+=_0x1d857d,this[_0x59ca81(0x56b)][_0x59ca81(0x608)](this['instanceName']+'\x20('+this[_0x59ca81(0x3f0)]['wuid']+'):\x20Nome\x20do\x20arquivo\x20gerado:\x20'+_0x1d3ab0);let _0x496f19=this[_0x59ca81(0x601)][_0x59ca81(0x76d)](_0x59ca81(0x69a))[_0x59ca81(0x4a1)];if(!_0x496f19){let _0x453798=this[_0x59ca81(0x601)][_0x59ca81(0x76d)](_0x59ca81(0x77d));_0x496f19=_0x59ca81(0x6b5)+(_0x453798&&_0x453798['FULLCHAIN'][_0x59ca81(0x266)]('/')[0x4]);}let _0x36409c=Buffer[_0x59ca81(0x724)](_0x4bed22[_0x59ca81(0x5c9)]);await this[_0x59ca81(0x50f)](_0x36409c,_0x1d3ab0);let _0x25913c='/media/'+_0x1d3ab0;_0x25913c=''+_0x496f19+_0x25913c,_0xcd5035={'fileUrl':_0x25913c},_0x21c298[_0x59ca81(0x61a)][_0x59ca81(0x62d)][_0x59ca81(0x6fa)]=_0x25913c;let _0x3c85e8=_0x21c298['chatLog'][_0x59ca81(0x62d)],_0xb2cb18=this[_0x59ca81(0x568)](_0xcd5035);return Object[_0x59ca81(0x202)](_0x3c85e8,_0xb2cb18),_0x21c298[_0x59ca81(0x61a)]['realVariables']=_0x3c85e8,_0x46f538={'error':!0x1,'apiResponse':{'fileUrl':_0x25913c}},this[_0x59ca81(0x1e6)](_0x21c298,_0x3080b4,_0x46f538),_0xcd5035;}}catch(_0x37b203){this[_0x59ca81(0x56b)][_0x59ca81(0x2b1)](_0x59ca81(0x681)+_0x37b203[_0x59ca81(0x4f4)]),_0x37b203['response']&&(_0xcd5035=_0x37b203['response'][_0x59ca81(0x5c9)]);let _0x140a25=_0x21c298[_0x59ca81(0x61a)][_0x59ca81(0x62d)],_0x34fef9=this[_0x59ca81(0x568)](_0xcd5035);return Object[_0x59ca81(0x202)](_0x140a25,_0x34fef9),_0x21c298[_0x59ca81(0x61a)]['realVariables']=_0x140a25,_0x46f538={'error':!0x0,'errorLog':_0x37b203[_0x59ca81(0x7b1)](),'apiResponse':_0xcd5035},this[_0x59ca81(0x1e6)](_0x21c298,_0x3080b4,_0x46f538),{'success':!0x1};}}[a0_0x5ca971(0x736)](_0x2b19aa,_0x1d4d69){const _0x32f284=a0_0x5ca971;let _0x2b4870=_0x1052b3=>{const _0x440bb2=a0_0x2d21;let _0x1c1d6f=_0x1052b3['replace'](/[^0-9.,-]/g,'')[_0x440bb2(0x3d2)](',','.'),_0x464fde=parseFloat(_0x1c1d6f);return isNaN(_0x464fde)?null:_0x464fde;},_0x322914=_0x1d4d69[_0x32f284(0x636)],_0xbf6a6d=_0x1d4d69['secondValue'];typeof _0x322914=='string'&&(_0x322914=this[_0x32f284(0x29c)](_0x322914,_0x2b19aa['chatLog']['realVariables'])??''),typeof _0xbf6a6d==_0x32f284(0x2a0)&&(_0xbf6a6d=this[_0x32f284(0x29c)](_0xbf6a6d,_0x2b19aa[_0x32f284(0x61a)][_0x32f284(0x62d)])??'');let _0x15e450=null;if(!_0x1d4d69[_0x32f284(0x7ad)])return null;switch(this[_0x32f284(0x56b)][_0x32f284(0x608)](this[_0x32f284(0x6dd)]+'\x20('+this[_0x32f284(0x3f0)][_0x32f284(0x547)]+'):\x20newFirstValue\x20após\x20replaceVariables:'+_0x322914),this['logger'][_0x32f284(0x608)](this[_0x32f284(0x6dd)]+'\x20('+this['instance']['wuid']+'):\x20newSecondValue\x20após\x20replaceVariables:'+_0xbf6a6d),_0x1d4d69[_0x32f284(0x7ad)]){case'+':case'-':case'*':case'/':let _0x794666=_0x2b4870(_0x322914||'0'),_0x26d446=_0x2b4870(_0xbf6a6d||'0');if(_0x794666===null)return null;switch(_0x1d4d69[_0x32f284(0x7ad)]){case'+':_0x15e450=_0x794666+(_0x26d446??0x0);break;case'-':_0x15e450=_0x794666-(_0x26d446??0x0);break;case'*':_0x15e450=_0x794666*(_0x26d446??0x1);break;case'/':_0x26d446!==0x0&&(_0x15e450=_0x794666/(_0x26d446??0x1));break;}break;case'findAndReplace':case _0x32f284(0x27d):let _0x2533a5=_0xbf6a6d,_0x1e6f1e=_0x1d4d69[_0x32f284(0x1c0)];if(typeof _0x1e6f1e==_0x32f284(0x2a0)&&(_0x1e6f1e=this['replaceVariables'](_0x1e6f1e,_0x2b19aa[_0x32f284(0x61a)][_0x32f284(0x62d)])??''),_0x2533a5&&_0x1e6f1e!==void 0x0){let _0x5342d8=_0x1d4d69[_0x32f284(0x7ad)]===_0x32f284(0x6dc)?new RegExp(_0x2533a5[_0x32f284(0x3d2)](/[-\/\\^$*+?.()|[\]{}]/g,_0x32f284(0x61e)),'g'):new RegExp(_0x2533a5,'g');_0x15e450=_0x322914['replace'](_0x5342d8,_0x1e6f1e);}else console['warn'](_0x32f284(0x167));break;case _0x32f284(0x649):_0x15e450=_0xbf6a6d;break;case _0x32f284(0x4d6):let _0x4f25b7=_0x322914['match'](new RegExp(_0xbf6a6d||''));_0x15e450=_0x4f25b7?_0x4f25b7[0x0]:'';break;case _0x32f284(0x53e):_0x15e450=_0x322914[_0x32f284(0x3f4)](0x0,parseInt(_0xbf6a6d||'0'));break;case _0x32f284(0x469):let _0x9dcae3=parseInt(_0xbf6a6d||'0');_0x15e450=_0x322914['slice'](_0x322914['length']-_0x9dcae3);break;case _0x32f284(0x37b):let _0xd0bdf7=_0x2b4870(_0x322914),_0x590e89=parseInt(_0xbf6a6d||'0');_0x590e89=Math['abs'](_0x590e89),_0xd0bdf7!==null?_0x15e450=_0xd0bdf7[_0x32f284(0x75c)]('pt-BR',{'minimumFractionDigits':_0x590e89,'maximumFractionDigits':_0x590e89}):(console[_0x32f284(0x38d)](_0x32f284(0x648)+_0x322914),_0x15e450=null);break;case _0x32f284(0x5f7):let _0x3c160e=_0x2b4870(_0x322914);_0x3c160e!==null?_0x15e450=_0x3c160e[_0x32f284(0x75c)](_0x32f284(0x84c),{'style':_0x32f284(0x80c),'currency':_0x32f284(0x850)}):(console[_0x32f284(0x38d)](_0x32f284(0x4f5)+_0x322914),_0x15e450=null);break;case'upperCase':_0x15e450=_0x322914['toUpperCase']();break;case _0x32f284(0x88a):_0x15e450=_0x322914[_0x32f284(0x763)]();break;case _0x32f284(0x2c7):_0x15e450=_0x322914[_0x32f284(0x266)]('\x20')[_0x32f284(0x7a8)](_0x4d36c5=>_0x4d36c5['charAt'](0x0)[_0x32f284(0x6fb)]()+_0x4d36c5[_0x32f284(0x3f4)](0x1)[_0x32f284(0x763)]())[_0x32f284(0x897)]('\x20');break;case _0x32f284(0x753):_0x15e450=_0x322914[_0x32f284(0x56d)]();break;default:_0x15e450=_0x322914;}return _0x15e450!==null?_0x15e450[_0x32f284(0x7b1)]():null;}async[a0_0x5ca971(0x297)](_0x240cfc,_0x2d3dc4){const _0x13fe28=a0_0x5ca971;try{let _0x199d66=_0x240cfc[_0x13fe28(0x214)]?.[_0x13fe28(0x587)](_0x2ffea2=>_0x2ffea2[_0x13fe28(0x449)]===_0x2d3dc4['_id']?.['toString']())||[],_0x387ee2=_0x2d3dc4['saveVariable'],_0x49570b=null,_0x629b31=[],_0x584b85=_0x240cfc[_0x13fe28(0x61a)][_0x13fe28(0x62d)][_0x387ee2];_0x629b31[_0x13fe28(0x59a)](_0x13fe28(0x832)+_0x584b85+'\x22');for(let _0x27d7b3 of _0x199d66){_0x27d7b3[_0x13fe28(0x636)]=_0x584b85,_0x49570b=_0x27d7b3[_0x13fe28(0x636)];let _0x25c946;try{_0x25c946=this['applyvaredit'](_0x240cfc,_0x27d7b3);}catch(_0x3c81ab){this[_0x13fe28(0x56b)][_0x13fe28(0x2b1)](_0x13fe28(0x3b2)+_0x3c81ab[_0x13fe28(0x4f4)]);continue;}if(_0x25c946!==null){let _0x1c5424='Operador:\x20\x22'+_0x27d7b3[_0x13fe28(0x7ad)]+'\x22',_0x31dee1=['toBRL',_0x13fe28(0x4e6),'lowerCase',_0x13fe28(0x2c7),_0x13fe28(0x753)];_0x27d7b3[_0x13fe28(0x7ad)]===_0x13fe28(0x6dc)||_0x27d7b3[_0x13fe28(0x7ad)]===_0x13fe28(0x27d)?_0x1c5424+=_0x13fe28(0x661)+_0x27d7b3[_0x13fe28(0x501)]+'\x22,\x20valor\x20a\x20substituir:\x20\x22'+_0x27d7b3[_0x13fe28(0x1c0)]+'\x22':!_0x31dee1[_0x13fe28(0x839)](_0x27d7b3[_0x13fe28(0x7ad)])&&_0x27d7b3[_0x13fe28(0x501)]!==null&&_0x27d7b3[_0x13fe28(0x501)]!==void 0x0&&(_0x1c5424+=',\x20valor\x20passado:\x20\x22'+_0x27d7b3[_0x13fe28(0x501)]+'\x22'),_0x1c5424+=_0x13fe28(0x6ac)+_0x25c946+'.',_0x629b31['push'](_0x1c5424);}_0x25c946!==null&&(_0x584b85=_0x25c946);}if(_0x240cfc[_0x13fe28(0x61a)][_0x13fe28(0x62d)]&&_0x2d3dc4[_0x13fe28(0x5a9)]){_0x240cfc['chatLog'][_0x13fe28(0x62d)][_0x2d3dc4[_0x13fe28(0x5a9)]]=_0x584b85;let _0x18dec7={'variable':_0x2d3dc4[_0x13fe28(0x5a9)],'oldValue':_0x49570b,'newValue':_0x584b85,'moreLogs':_0x629b31};try{this['updateConversation'](_0x240cfc,_0x2d3dc4,_0x18dec7);}catch(_0x33b151){this[_0x13fe28(0x56b)][_0x13fe28(0x2b1)](_0x13fe28(0x823)+_0x33b151['message']);}}return _0x387ee2;}catch(_0x153b0b){return this[_0x13fe28(0x56b)][_0x13fe28(0x2b1)]('Erro\x20inesperado\x20em\x20processvaredits:\x20'+_0x153b0b[_0x13fe28(0x4f4)]),null;}}async[a0_0x5ca971(0x5f8)](_0x7e1beb,_0x4351e4){const _0x247b5f=a0_0x5ca971;try{let _0x5018df=[],_0x27f58c=_0x7e1beb[_0x247b5f(0x85d)]['filter'](_0x2d5453=>_0x2d5453[_0x247b5f(0x449)]===_0x4351e4['_id'][_0x247b5f(0x7b1)]()),_0x412e96=null,_0x15eb81=!0x1;for(let _0x1d6830 of _0x27f58c){let _0x423533=this['evaluateCondition'](_0x7e1beb,_0x1d6830);_0x5018df[_0x247b5f(0x59a)](_0x247b5f(0x54b)+_0x1d6830[_0x247b5f(0x636)]+',\x20Comparador:\x20'+_0x1d6830[_0x247b5f(0x769)]+_0x247b5f(0x730)+_0x1d6830['secondValue']+',\x20Resultado:\x20'+_0x423533),_0x412e96===null?_0x412e96=_0x423533:_0x1d6830[_0x247b5f(0x3cd)]===_0x247b5f(0x72c)?(_0x412e96=_0x412e96&&_0x423533,_0x423533||(_0x15eb81=!0x0)):_0x1d6830[_0x247b5f(0x3cd)]==='or'&&(_0x15eb81||(_0x412e96=_0x412e96||_0x423533));}_0x412e96===null&&(_0x412e96=!0x0);let _0x2a9241={'moreLogs':_0x5018df};_0x7e1beb[_0x247b5f(0x61a)][_0x247b5f(0x633)]=_0x412e96,await this[_0x247b5f(0x1e6)](_0x7e1beb,_0x4351e4,_0x2a9241);}catch(_0x5da2fb){this[_0x247b5f(0x56b)]['error'](this[_0x247b5f(0x6dd)]+'\x20('+this[_0x247b5f(0x3f0)][_0x247b5f(0x547)]+'):\x20Error\x20processing\x20conditions:\x20'+(_0x5da2fb instanceof Error?_0x5da2fb[_0x247b5f(0x4f4)]:JSON[_0x247b5f(0x179)](_0x5da2fb,null,0x2)));}}['evaluateCondition'](_0x173812,_0xa6792a){const _0x3d9678=a0_0x5ca971;let _0x515383=_0xa6792a['firstValue'],_0x30bbe6=_0xa6792a[_0x3d9678(0x501)];typeof _0x515383==_0x3d9678(0x2a0)&&(_0x515383=this[_0x3d9678(0x29c)](_0x515383,_0x173812['chatLog'][_0x3d9678(0x62d)])??''),typeof _0x30bbe6==_0x3d9678(0x2a0)&&(_0x30bbe6=this['replaceVariables'](_0x30bbe6,_0x173812[_0x3d9678(0x61a)][_0x3d9678(0x62d)])??'');try{switch(_0xa6792a[_0x3d9678(0x769)]){case'equal':return _0x515383===_0x30bbe6;case _0x3d9678(0x6d9):return _0x515383!==_0x30bbe6;case'contains':return this[_0x3d9678(0x780)](_0x515383,_0x30bbe6);case _0x3d9678(0x4d4):return!this['contains'](_0x515383,_0x30bbe6);case'greater':return parseFloat(_0x515383)>parseFloat(_0x30bbe6);case _0x3d9678(0x35b):return parseFloat(_0x515383)<parseFloat(_0x30bbe6);case _0x3d9678(0x519):return _0x515383!=='';case _0x3d9678(0x786):return _0x515383==='';case _0x3d9678(0x4df):return new RegExp(_0x30bbe6)[_0x3d9678(0x22b)](_0x515383);case _0x3d9678(0x831):return!new RegExp(_0x30bbe6)['test'](_0x515383);default:return!0x1;}}catch(_0x389da9){return this[_0x3d9678(0x56b)][_0x3d9678(0x2b1)](_0x3d9678(0x89c)+_0x389da9),!0x1;}}[a0_0x5ca971(0x780)](_0x164e1d,_0x42ceb9){const _0x326eb9=a0_0x5ca971;if(_0x164e1d===_0x42ceb9&&/^\d+$/['test'](_0x164e1d))return!0x0;if(this['isListOfNumbers'](_0x164e1d)&&/^\d+$/[_0x326eb9(0x22b)](_0x42ceb9)){let _0xaef79d=_0x164e1d[_0x326eb9(0x266)](',')[_0x326eb9(0x7a8)](_0x54a980=>parseInt(_0x54a980[_0x326eb9(0x56d)]())),_0xc8034e=parseInt(_0x42ceb9);return _0xaef79d[_0x326eb9(0x839)](_0xc8034e);}return _0x164e1d[_0x326eb9(0x839)](_0x42ceb9);}[a0_0x5ca971(0x4f7)](_0xe716d8){const _0x270948=a0_0x5ca971;return/^\d+(,\d+)*$/[_0x270948(0x22b)](_0xe716d8);}[a0_0x5ca971(0x49d)](_0x4dfd08){const _0x1896ce=a0_0x5ca971;let _0x4dea2d=!0x0,_0x1abdaf=null;for(let _0x2efc82 of _0x4dfd08){let _0x45b713=this['evaluateConditionTest'](_0x2efc82);if(_0x1abdaf==='or'&&_0x45b713){_0x4dea2d=!0x0;break;}if(_0x1abdaf===_0x1896ce(0x72c)&&!_0x45b713){_0x4dea2d=!0x1;break;}_0x1abdaf=_0x2efc82[_0x1896ce(0x3cd)];}return _0x4dea2d;}[a0_0x5ca971(0x23b)](_0xf8a256){const _0x5bfcba=a0_0x5ca971;let _0x457065=_0xf8a256['firstValue'],_0xc90c02=_0xf8a256[_0x5bfcba(0x501)];try{switch(_0xf8a256['expression']){case _0x5bfcba(0x5b7):return String(_0x457065)===String(_0xc90c02);case _0x5bfcba(0x6d9):return String(_0x457065)!==String(_0xc90c02);case _0x5bfcba(0x780):return String(_0x457065)['includes'](String(_0xc90c02));case _0x5bfcba(0x4d4):return!String(_0x457065)[_0x5bfcba(0x839)](String(_0xc90c02));case'greater':return parseFloat(String(_0x457065))>parseFloat(String(_0xc90c02));case'less':return parseFloat(String(_0x457065))<parseFloat(String(_0xc90c02));case'notEmpty':return String(_0x457065)!=='';case'empty':return String(_0x457065)==='';case _0x5bfcba(0x4df):return new RegExp(String(_0xc90c02))[_0x5bfcba(0x22b)](String(_0x457065));case _0x5bfcba(0x831):return!new RegExp(String(_0xc90c02))[_0x5bfcba(0x22b)](String(_0x457065));default:return!0x1;}}catch(_0x58e197){return this[_0x5bfcba(0x56b)][_0x5bfcba(0x2b1)]('Erro\x20ao\x20avaliar\x20a\x20condição:\x20'+_0x58e197),!0x1;}}async[a0_0x5ca971(0x3bd)](_0x3b4c1c,_0xf9d5bc){const _0x2c53ee=a0_0x5ca971;if(this[_0x2c53ee(0x56b)][_0x2c53ee(0x608)](this[_0x2c53ee(0x6dd)]+'\x20('+this['instance'][_0x2c53ee(0x547)]+'):\x20Entrou\x20na\x20função\x20saveReply'),!_0x3b4c1c||!_0xf9d5bc)return this[_0x2c53ee(0x56b)][_0x2c53ee(0x2b1)](this[_0x2c53ee(0x6dd)]+'\x20('+this[_0x2c53ee(0x3f0)]['wuid']+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x4b5dd8=_0x3b4c1c['chatLog']['lastReceivedMessage']['key']['id'];this[_0x2c53ee(0x56b)][_0x2c53ee(0x608)](this[_0x2c53ee(0x6dd)]+'\x20('+this['instance'][_0x2c53ee(0x547)]+_0x2c53ee(0x818)+_0x4b5dd8);let _0x5d2516={'key':{'id':_0x4b5dd8}},_0x1e175d=_0xf9d5bc[_0x2c53ee(0x5a9)];_0x3b4c1c[_0x2c53ee(0x61a)][_0x2c53ee(0x62d)]['_'+_0x1e175d+'.fileUrl']=null,_0x3b4c1c[_0x2c53ee(0x61a)][_0x2c53ee(0x62d)]['_'+_0x1e175d+'.mimetype']=null,_0x3b4c1c[_0x2c53ee(0x61a)][_0x2c53ee(0x62d)]['_'+_0x1e175d+_0x2c53ee(0x25d)]=null,_0x3b4c1c['chatLog']['realVariables']['_'+_0x1e175d+'.type']=_0x3b4c1c[_0x2c53ee(0x61a)]['lastReceivedMessage'][_0x2c53ee(0x536)];try{let _0x33e9b2=await this[_0x2c53ee(0x3be)](_0x5d2516);this[_0x2c53ee(0x56b)][_0x2c53ee(0x608)](this[_0x2c53ee(0x6dd)]+'\x20('+this[_0x2c53ee(0x3f0)]['wuid']+_0x2c53ee(0x333)),_0x3b4c1c[_0x2c53ee(0x61a)][_0x2c53ee(0x62d)]['_'+_0x1e175d+_0x2c53ee(0x7e6)]=_0x33e9b2[_0x2c53ee(0x6fa)],_0x3b4c1c[_0x2c53ee(0x61a)][_0x2c53ee(0x62d)]['_'+_0x1e175d+_0x2c53ee(0x5dd)]=_0x33e9b2[_0x2c53ee(0x1db)];let _0x12255f=_0x33e9b2['mimetype']['match'](/\/(\w+)$/),_0x5a3e0a=_0x12255f?_0x12255f[0x1]:null;_0x3b4c1c['chatLog']['realVariables']['_'+_0x1e175d+_0x2c53ee(0x25d)]=_0x5a3e0a,this['logger']['verbose'](this[_0x2c53ee(0x6dd)]+'\x20('+this[_0x2c53ee(0x3f0)][_0x2c53ee(0x547)]+_0x2c53ee(0x277)+_0x1e175d+'\x27.');}catch(_0x406261){this[_0x2c53ee(0x56b)][_0x2c53ee(0x2b1)](this[_0x2c53ee(0x6dd)]+'\x20('+this['instance'][_0x2c53ee(0x547)]+_0x2c53ee(0x47f)+_0x406261[_0x2c53ee(0x4f4)]);}let _0x521170=_0x3b4c1c[_0x2c53ee(0x61a)][_0x2c53ee(0x2bb)][_0x2c53ee(0x6e4)]||_0x3b4c1c['chatLog']['lastReceivedMessage']['caption']||_0x3b4c1c[_0x2c53ee(0x61a)]['lastReceivedMessage']['vote'];try{_0x3b4c1c[_0x2c53ee(0x61a)][_0x2c53ee(0x62d)]||(_0x3b4c1c[_0x2c53ee(0x61a)][_0x2c53ee(0x62d)]={});let _0x3b89d2=_0x3b4c1c['chatLog']['realVariables'][_0x1e175d];_0x3b4c1c[_0x2c53ee(0x61a)]['realVariables'][_0x1e175d]=_0x521170;let _0x24665b={'variable':_0x1e175d,'oldValue':_0x3b89d2,'newValue':_0x521170};this[_0x2c53ee(0x1e6)](_0x3b4c1c,_0xf9d5bc,_0x24665b),this[_0x2c53ee(0x56b)]['verbose'](this['instanceName']+'\x20('+this[_0x2c53ee(0x3f0)][_0x2c53ee(0x547)]+_0x2c53ee(0x1e8));}catch(_0x1de775){let _0x9d7b09={'error':!0x0,'errorLog':_0x1de775['toString']()};return this['updateConversation'](_0x3b4c1c,_0xf9d5bc,_0x9d7b09),this['logger'][_0x2c53ee(0x2b1)](this[_0x2c53ee(0x6dd)]+'\x20('+this[_0x2c53ee(0x3f0)][_0x2c53ee(0x547)]+'):\x20Erro\x20durante\x20a\x20atualização:\x20'+(_0x1de775 instanceof Error?_0x1de775[_0x2c53ee(0x4f4)]:JSON[_0x2c53ee(0x179)](_0x1de775,null,0x2))),null;}}async[a0_0x5ca971(0x524)](_0x13b479,_0xedae0a){const _0x48e6bd=a0_0x5ca971;if(this[_0x48e6bd(0x56b)]['verbose'](this[_0x48e6bd(0x6dd)]+'\x20('+this[_0x48e6bd(0x3f0)][_0x48e6bd(0x547)]+_0x48e6bd(0x851)),!_0x13b479||!_0xedae0a)return this[_0x48e6bd(0x56b)][_0x48e6bd(0x2b1)](this[_0x48e6bd(0x6dd)]+'\x20('+this[_0x48e6bd(0x3f0)][_0x48e6bd(0x547)]+_0x48e6bd(0x6c8)),null;let _0xe75a4d=Date[_0x48e6bd(0x7d1)](),_0x2a3d06=parseInt(_0xedae0a[_0x48e6bd(0x72e)],0xa);if(isNaN(_0x2a3d06))return this[_0x48e6bd(0x56b)]['error'](this[_0x48e6bd(0x6dd)]+'\x20('+this[_0x48e6bd(0x3f0)][_0x48e6bd(0x547)]+_0x48e6bd(0x6b9)),null;let _0x52a026={'newStoppedUntil':_0xe75a4d+_0x2a3d06*0x3c*0x3e8};return await this[_0x48e6bd(0x1e6)](_0x13b479,_0xedae0a,_0x52a026,!0x0),null;}async[a0_0x5ca971(0x7c6)](_0x448984,_0x4fdc20){const _0x436c96=a0_0x5ca971;try{switch(_0x4fdc20[_0x436c96(0x748)][_0x436c96(0x822)]){case _0x436c96(0x304):await this['uazapiSendText'](_0x448984,_0x4fdc20);break;case _0x436c96(0x2d0):await this['uazapiSendMedia'](_0x448984,_0x4fdc20);break;case _0x436c96(0x5ab):await this[_0x436c96(0x46c)](_0x448984,_0x4fdc20);break;case _0x436c96(0x3c5):await this['uazapiSendAudio'](_0x448984,_0x4fdc20);break;case _0x436c96(0x44f):await this[_0x436c96(0x833)](_0x448984,_0x4fdc20);break;case'sendPoll':await this['uazapiSendMenu'](_0x448984,_0x4fdc20);break;case _0x436c96(0x209):await this['uazapiSendMenu'](_0x448984,_0x4fdc20);break;case'deleteMessage':await this[_0x436c96(0x170)](_0x448984,_0x4fdc20);break;default:this[_0x436c96(0x56b)][_0x436c96(0x2b1)](this[_0x436c96(0x6dd)]+'\x20('+this[_0x436c96(0x3f0)][_0x436c96(0x547)]+_0x436c96(0x2aa)+_0x4fdc20[_0x436c96(0x748)][_0x436c96(0x822)]);}}catch(_0xcd7b55){this[_0x436c96(0x56b)]['error'](this[_0x436c96(0x6dd)]+'\x20('+this['instance'][_0x436c96(0x547)]+_0x436c96(0x147)+(_0xcd7b55 instanceof Error?_0xcd7b55[_0x436c96(0x4f4)]:JSON[_0x436c96(0x179)](_0xcd7b55,null,0x2)));}}async['updateConversation'](_0x35c1e4,_0x59fddb,_0x23d4da,_0x3689c3=!0x1,_0x523c9e=!0x1){const _0x3dcdc4=a0_0x5ca971;_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x3c1)]||(_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x3c1)]=[]);let _0x3fd21b=(_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x3c1)]?.['length']??0x0)+0x1,_0x597c4c=_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x3c1)]['filter'](_0xea8688=>String(_0xea8688[_0x3dcdc4(0x449)])===String(_0x59fddb[_0x3dcdc4(0x4a6)]))[_0x3dcdc4(0x532)]+0x1,_0x45424f=_0x23d4da?.['onTime']??Date[_0x3dcdc4(0x7d1)](),_0x15c8a2=_0x23d4da?.['error']?_0x23d4da[_0x3dcdc4(0x667)]??_0x23d4da['error'][_0x3dcdc4(0x7b1)]():void 0x0,_0x182f2b={'onTime':_0x45424f,'blockId':_0x59fddb[_0x3dcdc4(0x4a6)],'order':_0x3fd21b,'activatedCount':_0x597c4c,'error':_0x23d4da?.[_0x3dcdc4(0x2b1)]??!0x1,'messageId':_0x23d4da?.[_0x3dcdc4(0x21f)],'apiResponse':_0x23d4da?.['apiResponse'],'apiResponseString':_0x23d4da?.['apiResponse']?JSON[_0x3dcdc4(0x179)](_0x23d4da?.['apiResponse']):void 0x0,'variable':_0x23d4da?.[_0x3dcdc4(0x73c)],'oldValue':_0x23d4da?.[_0x3dcdc4(0x4a2)],'newValue':_0x23d4da?.[_0x3dcdc4(0x2a4)],'newStoppedUntil':_0x23d4da?.[_0x3dcdc4(0x1ff)],'moreLogs':_0x23d4da?.[_0x3dcdc4(0x518)],'errorLog':_0x15c8a2};if(_0x23d4da[_0x3dcdc4(0x518)]&&_0x23d4da['moreLogs']['length']>0x0){let _0x37c887=_0x23d4da[_0x3dcdc4(0x518)][_0x3dcdc4(0x7a8)](_0x5db70b=>this['replaceVariablesLogs'](_0x5db70b,_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x62d)]));_0x182f2b[_0x3dcdc4(0x518)]=_0x37c887;}if(_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x62d)]||(_0x35c1e4['chatLog']['realVariables']={}),_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x62d)][_0x3dcdc4(0x417)]=String(_0x597c4c),_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x62d)][_0x3dcdc4(0x3cb)]=String(_0x23d4da[_0x3dcdc4(0x2b1)]??!0x1),_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x3c1)]['push'](_0x182f2b),_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x62d)][_0x3dcdc4(0x79b)]&&_0x35c1e4[_0x3dcdc4(0x61a)]['realVariables']['telefone']!==_0x35c1e4[_0x3dcdc4(0x509)]){let _0x507225=(await this[_0x3dcdc4(0x5c1)]({'numbers':[_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x62d)]['telefone']]}))[0x0]['jid'];_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x62d)][_0x3dcdc4(0x79b)]=_0x507225,_0x35c1e4[_0x3dcdc4(0x509)]=_0x507225;try{let _0x82f43d={'_id':{'$ne':_0x35c1e4['_id']},'remoteJid':_0x507225,'status':_0x3dcdc4(0x158)},_0x4897fb={'status':_0x3dcdc4(0x83b)};await this[_0x3dcdc4(0x7fa)]['flowConversation'][_0x3dcdc4(0x829)](_0x82f43d,_0x4897fb,this['instance'][_0x3dcdc4(0x547)]),this['logger'][_0x3dcdc4(0x608)](this[_0x3dcdc4(0x6dd)]+'\x20('+this[_0x3dcdc4(0x3f0)][_0x3dcdc4(0x547)]+_0x3dcdc4(0x1c9));}catch(_0x13bf4f){this[_0x3dcdc4(0x56b)][_0x3dcdc4(0x2b1)](this[_0x3dcdc4(0x6dd)]+'\x20('+this[_0x3dcdc4(0x3f0)][_0x3dcdc4(0x547)]+'):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20'+_0x13bf4f[_0x3dcdc4(0x4f4)]);}try{let _0x5ccc47=_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x62d)],_0x1169df=await this[_0x3dcdc4(0x1f8)](_0x507225),_0x457ee6={..._0x5ccc47,..._0x1169df,'_remoteJid':_0x507225};_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x62d)]=_0x457ee6;}catch(_0x2a7003){this[_0x3dcdc4(0x56b)][_0x3dcdc4(0x2b1)](this[_0x3dcdc4(0x6dd)]+'\x20('+this[_0x3dcdc4(0x3f0)]['wuid']+_0x3dcdc4(0x654)+_0x2a7003[_0x3dcdc4(0x4f4)]);}}_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x67d)]=_0x59fddb['_id']['toString'](),_0x35c1e4['chatLog'][_0x3dcdc4(0x2f3)]&&(_0x35c1e4['chatLog'][_0x3dcdc4(0x2f3)]=_0x35c1e4['chatLog']['lastSendMessage']),_0x35c1e4[_0x3dcdc4(0x61a)]['lastReceivedMessage']&&(_0x35c1e4[_0x3dcdc4(0x61a)]['lastReceivedMessage']=_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x2bb)]),_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x633)]&&(_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x633)]=_0x35c1e4[_0x3dcdc4(0x61a)][_0x3dcdc4(0x633)]),_0x523c9e&&(_0x35c1e4[_0x3dcdc4(0x2f7)]='closed'),_0x3689c3?this[_0x3dcdc4(0x1e1)](_0x35c1e4):this[_0x3dcdc4(0x196)](_0x35c1e4,_0x59fddb);}[a0_0x5ca971(0x807)](_0x54705a,_0x53a787){const _0x3cb983=a0_0x5ca971;return _0x54705a[_0x3cb983(0x3d2)](/\{\{([^}]+)\}\}/g,(_0x3827f9,_0x70dbfa)=>_0x53a787[_0x70dbfa]?'{{'+_0x70dbfa+_0x3cb983(0x376)+_0x53a787[_0x70dbfa]+'\x22':'{{'+_0x70dbfa+_0x3cb983(0x60f));}async[a0_0x5ca971(0x1e1)](_0x30dd2e){const _0x3701e4=a0_0x5ca971;try{let _0x5ba2d6=Object[_0x3701e4(0x327)](_0x30dd2e[_0x3701e4(0x61a)][_0x3701e4(0x62d)])[_0x3701e4(0x7a8)](([_0x5eab8a,_0x4b086c])=>({'name':_0x5eab8a,'value':_0x4b086c})),_0x543170={'status':_0x30dd2e[_0x3701e4(0x2f7)],'remoteJid':_0x30dd2e[_0x3701e4(0x509)],'blocks':_0x30dd2e[_0x3701e4(0x200)],'waitingMenu_id':_0x30dd2e[_0x3701e4(0x766)],'waitingMenu_text':_0x30dd2e[_0x3701e4(0x374)],'waitingMenu_replyOptions':_0x30dd2e[_0x3701e4(0x88c)],'chatLog':{'lastBlockId':_0x30dd2e[_0x3701e4(0x61a)][_0x3701e4(0x67d)],'lastSendMessage':_0x30dd2e[_0x3701e4(0x61a)][_0x3701e4(0x2f3)],'lastReceivedMessage':_0x30dd2e[_0x3701e4(0x61a)][_0x3701e4(0x2bb)],'lastCondition':_0x30dd2e[_0x3701e4(0x61a)][_0x3701e4(0x633)],'chatVariables':_0x5ba2d6,'realVariables':_0x30dd2e[_0x3701e4(0x61a)][_0x3701e4(0x62d)],'blockLogs':_0x30dd2e[_0x3701e4(0x61a)]['blockLogs']}},_0x5cc100=await this[_0x3701e4(0x7fa)]['flowConversation'][_0x3701e4(0x743)](_0x30dd2e[_0x3701e4(0x4a6)],_0x543170,this['instance'][_0x3701e4(0x547)]);if(_0x5cc100){this['logger'][_0x3701e4(0x608)](this['instanceName']+'\x20('+this['instance'][_0x3701e4(0x547)]+'):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20'+_0x5cc100[_0x3701e4(0x4a6)]);try{let _0x13670c=['nome',_0x3701e4(0x4fc),_0x3701e4(0x428),'cpf','status','notas','responsavelid',_0x3701e4(0x742),_0x3701e4(0x5e1),_0x3701e4(0x3aa)];if(!this[_0x3701e4(0x755)]&&(await this[_0x3701e4(0x2b9)](),!this[_0x3701e4(0x755)]))throw new Error(_0x3701e4(0x575));let _0x47fe=this[_0x3701e4(0x755)]?.[_0x3701e4(0x85a)][_0x3701e4(0x7a8)](_0x419938=>_0x419938[_0x3701e4(0x41c)]),_0x113ee8={};Object[_0x3701e4(0x327)](_0x30dd2e[_0x3701e4(0x61a)]['realVariables'])[_0x3701e4(0x491)](([_0x41748b,_0x286a6e])=>{const _0x4c1b12=_0x3701e4;_0x13670c[_0x4c1b12(0x839)](_0x41748b)&&(_0x41748b===_0x4c1b12(0x742)&&typeof _0x286a6e==_0x4c1b12(0x2a0)?_0x113ee8[_0x41748b]=_0x286a6e[_0x4c1b12(0x266)](',')[_0x4c1b12(0x7a8)](_0x4350db=>_0x4350db[_0x4c1b12(0x56d)]())[_0x4c1b12(0x587)](_0xa209aa=>_0xa209aa!==''):_0x41748b===_0x4c1b12(0x5e1)&&typeof _0x286a6e==_0x4c1b12(0x2a0)?_0x113ee8[_0x41748b]=_0x286a6e[_0x4c1b12(0x266)](',')[_0x4c1b12(0x7a8)](_0x48d1b3=>_0x48d1b3[_0x4c1b12(0x56d)]())[_0x4c1b12(0x587)](_0x30b830=>_0x30b830!==''):_0x113ee8[_0x41748b]=_0x286a6e);});let _0x21b638=_0x30dd2e['chatLog'][_0x3701e4(0x3c1)][_0x30dd2e[_0x3701e4(0x61a)][_0x3701e4(0x3c1)][_0x3701e4(0x532)]-0x1];if(_0x21b638){let _0x305337=_0x21b638['newStoppedUntil'];_0x305337!==void 0x0&&(_0x113ee8['desativadoFluxoAte']=_0x305337[_0x3701e4(0x7b1)]());}let _0x50fd46=_0x5ba2d6[_0x3701e4(0x587)](_0x163df0=>_0x47fe[_0x3701e4(0x839)](_0x163df0[_0x3701e4(0x41c)]));this['logger'][_0x3701e4(0x608)](this[_0x3701e4(0x6dd)]+'\x20('+this[_0x3701e4(0x3f0)][_0x3701e4(0x547)]+_0x3701e4(0x6f0)),this['logger'][_0x3701e4(0x608)](_0x113ee8),this[_0x3701e4(0x56b)][_0x3701e4(0x608)](this[_0x3701e4(0x6dd)]+'\x20('+this[_0x3701e4(0x3f0)][_0x3701e4(0x547)]+_0x3701e4(0x7d5)),this[_0x3701e4(0x56b)][_0x3701e4(0x608)](_0x50fd46);let _0x336349=_0x50fd46[_0x3701e4(0x7a8)](_0x257e82=>{const _0x5f22ec=_0x3701e4;let _0x5bf221=this['AutomateSystem']?.[_0x5f22ec(0x85a)]['find'](_0xed0519=>_0xed0519['name']===_0x257e82['name']);if(!_0x5bf221)throw new Error(_0x5f22ec(0x716)+_0x257e82[_0x5f22ec(0x41c)]);return{'_id':_0x5bf221[_0x5f22ec(0x4a6)],'value':_0x257e82[_0x5f22ec(0x5d4)]};});this[_0x3701e4(0x56b)][_0x3701e4(0x608)](this[_0x3701e4(0x6dd)]+'\x20('+this['instance']['wuid']+_0x3701e4(0x29d)),this['logger'][_0x3701e4(0x608)](_0x336349),await this['saveChatVariables'](_0x30dd2e[_0x3701e4(0x509)],_0x113ee8,_0x336349);}catch(_0x128023){this[_0x3701e4(0x56b)][_0x3701e4(0x2b1)](this[_0x3701e4(0x6dd)]+'\x20('+this[_0x3701e4(0x3f0)][_0x3701e4(0x547)]+'):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20'+(_0x128023 instanceof Error?_0x128023['message']:JSON['stringify'](_0x128023,null,0x2)));}}else this['logger'][_0x3701e4(0x2b1)](this['instanceName']+'\x20('+this[_0x3701e4(0x3f0)][_0x3701e4(0x547)]+_0x3701e4(0x65d));}catch(_0x458059){this[_0x3701e4(0x56b)][_0x3701e4(0x2b1)](this[_0x3701e4(0x6dd)]+'\x20('+this['instance'][_0x3701e4(0x547)]+_0x3701e4(0x652)+(_0x458059 instanceof Error?_0x458059[_0x3701e4(0x4f4)]:JSON[_0x3701e4(0x179)](_0x458059,null,0x2)));}}async['saveChatVariables'](_0x44b471,_0x3566b8,_0x5dc8dd){const _0x564a35=a0_0x5ca971;try{let _0x131102={'leadInfo.leadnome':_0x3566b8[_0x564a35(0x207)],'leadInfo.nomecompleto':_0x3566b8[_0x564a35(0x4fc)],'leadInfo.email':_0x3566b8['email'],'leadInfo.cpf':_0x3566b8[_0x564a35(0x506)],'leadInfo.status':_0x3566b8['status'],'leadInfo.notas':_0x3566b8[_0x564a35(0x198)],'leadInfo.responsavelid':_0x3566b8['responsavelid'],'leadInfo.tags':_0x3566b8['tags'],'leadInfo.etiquetas':_0x3566b8[_0x564a35(0x5e1)],'leadInfo.customFields':_0x5dc8dd,'leadInfo.atendimentoAberto':_0x3566b8[_0x564a35(0x3aa)]},_0x81417a=await this['repository'][_0x564a35(0x739)]['findOne']({'where':{'_id':_0x44b471}},this['instance']['wuid']);if(!_0x81417a)return _0x564a35(0x2dc);let _0x4011b2=new Set(_0x81417a[_0x564a35(0x341)][_0x564a35(0x5e1)]||[]),_0x4830b7=new Set(_0x3566b8['etiquetas']||[]),_0x19c515=await this[_0x564a35(0x7fa)][_0x564a35(0x750)][_0x564a35(0x2d4)]({'where':{}},this['instance'][_0x564a35(0x547)]),_0x1902c7=new Set(_0x19c515[_0x564a35(0x7a8)](_0x4d7dce=>_0x4d7dce['_id'])),_0x2b9367=[..._0x4830b7][_0x564a35(0x587)](_0x32627a=>!_0x4011b2[_0x564a35(0x64e)](_0x32627a)&&_0x1902c7['has'](_0x32627a)),_0x9fa6b1=[..._0x4011b2][_0x564a35(0x587)](_0x20a4f4=>!_0x4830b7['has'](_0x20a4f4));for(let _0x20639e of _0x2b9367)await this[_0x564a35(0x36e)](_0x20639e,_0x81417a[_0x564a35(0x4a6)]),_0x4011b2[_0x564a35(0x3fc)](_0x20639e);for(let _0x5247c1 of _0x9fa6b1)await this[_0x564a35(0x485)](_0x5247c1,_0x81417a[_0x564a35(0x4a6)]),_0x4011b2['delete'](_0x5247c1);if('desativadoFluxoAte'in _0x3566b8){let _0x461acd=_0x3566b8[_0x564a35(0x6c5)];_0x131102['leadInfo.desativadoFluxoAte']=_0x461acd?Number(_0x461acd):null;}if(_0x564a35(0x3aa)in _0x3566b8){let _0x536e8d=_0x3566b8['atendimentoAberto'][_0x564a35(0x763)]();_0x131102['leadInfo.atendimentoAberto']=_0x536e8d===_0x564a35(0x18a)||_0x536e8d==='1'||_0x536e8d===_0x564a35(0x72f)||_0x536e8d===_0x564a35(0x7b5);}let _0x21d4d9=await this['repository'][_0x564a35(0x739)][_0x564a35(0x743)]({'where':{'_id':_0x44b471}},_0x131102,this['instance'][_0x564a35(0x547)]);_0x21d4d9?(this[_0x564a35(0x56b)][_0x564a35(0x608)](this[_0x564a35(0x6dd)]+'\x20('+this[_0x564a35(0x3f0)][_0x564a35(0x547)]+'):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20'+_0x21d4d9['_id']),V(this[_0x564a35(0x6dd)],_0x564a35(0x795),{'chat':_0x21d4d9})):this[_0x564a35(0x56b)][_0x564a35(0x2b1)](this[_0x564a35(0x6dd)]+'\x20('+this[_0x564a35(0x3f0)][_0x564a35(0x547)]+_0x564a35(0x27c));}catch(_0x4c8a19){this[_0x564a35(0x56b)][_0x564a35(0x2b1)](this['instanceName']+'\x20('+this[_0x564a35(0x3f0)]['wuid']+_0x564a35(0x1f3)+(_0x4c8a19 instanceof Error?_0x4c8a19[_0x564a35(0x4f4)]:JSON[_0x564a35(0x179)](_0x4c8a19,null,0x2)));}}async[a0_0x5ca971(0x496)](_0x2f51a8,_0x42d9a4){const _0x6c6328=a0_0x5ca971;this['logger'][_0x6c6328(0x608)](this[_0x6c6328(0x6dd)]+'\x20('+this[_0x6c6328(0x3f0)][_0x6c6328(0x547)]+_0x6c6328(0x435)+_0x42d9a4);try{let _0x1987e3=await this[_0x6c6328(0x7fa)][_0x6c6328(0x739)][_0x6c6328(0x743)]({'where':{'_id':_0x2f51a8[_0x6c6328(0x509)]}},{'leadInfo.desativadoFluxoAte':_0x42d9a4},this[_0x6c6328(0x3f0)][_0x6c6328(0x547)]);this[_0x6c6328(0x56b)][_0x6c6328(0x608)](this['instanceName']+'\x20('+this[_0x6c6328(0x3f0)][_0x6c6328(0x547)]+_0x6c6328(0x3a9)+_0x2f51a8[_0x6c6328(0x4a6)]),this['logger'][_0x6c6328(0x608)](this[_0x6c6328(0x6dd)]+'\x20('+this['instance'][_0x6c6328(0x547)]+_0x6c6328(0x435)+JSON[_0x6c6328(0x179)](_0x1987e3,null,0x2)),_0x1987e3&&V(this[_0x6c6328(0x6dd)],_0x6c6328(0x795),{'chat':_0x1987e3});}catch(_0x52fae5){this[_0x6c6328(0x56b)][_0x6c6328(0x2b1)](this[_0x6c6328(0x6dd)]+'\x20('+this[_0x6c6328(0x3f0)][_0x6c6328(0x547)]+_0x6c6328(0x5e7)+(_0x52fae5 instanceof Error?_0x52fae5[_0x6c6328(0x4f4)]:JSON[_0x6c6328(0x179)](_0x52fae5,null,0x2)));}}async[a0_0x5ca971(0x7ea)](_0x1a8830){const _0x232705=a0_0x5ca971;try{this[_0x232705(0x56b)][_0x232705(0x608)](this['instanceName']+'\x20('+this[_0x232705(0x3f0)]['wuid']+_0x232705(0x427));let _0x43bc12=_0x1a8830[_0x232705(0x3d2)](/\D/g,''),_0x21bbae=this['AutomateSystem'][_0x232705(0x557)][_0x232705(0x2d4)](_0x1abd32=>_0x1abd32[_0x232705(0x79e)]===_0x43bc12);if(_0x21bbae||(this[_0x232705(0x56b)][_0x232705(0x608)](this[_0x232705(0x6dd)]+'\x20('+this[_0x232705(0x3f0)][_0x232705(0x547)]+'):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...'),_0x21bbae=this[_0x232705(0x755)][_0x232705(0x557)][_0x232705(0x2d4)](_0x186a16=>_0x186a16['default']===!0x0)),!_0x21bbae)return this[_0x232705(0x56b)][_0x232705(0x608)](this[_0x232705(0x6dd)]+'\x20('+this[_0x232705(0x3f0)]['wuid']+_0x232705(0x2e1)),null;let _0x26d9d4=await this[_0x232705(0x7fa)]['flow']['findOne']({'where':{'_id':_0x21bbae[_0x232705(0x4a6)]}});if(!_0x26d9d4||!_0x26d9d4[_0x232705(0x5f9)]?.[_0x232705(0x839)](this[_0x232705(0x3f0)]['wuid']))throw this[_0x232705(0x56b)][_0x232705(0x2b1)](this['instanceName']+'\x20('+this[_0x232705(0x3f0)][_0x232705(0x547)]+'):\x20Flow\x20\x27'+_0x26d9d4[_0x232705(0x4a6)]+_0x232705(0x1f1)),new m(_0x232705(0x526)+_0x26d9d4['_id']+_0x232705(0x1f1));return _0x26d9d4;}catch(_0x1ecfd2){return this[_0x232705(0x56b)][_0x232705(0x2b1)](this[_0x232705(0x6dd)]+'\x20('+this[_0x232705(0x3f0)][_0x232705(0x547)]+'):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20'+(_0x1ecfd2 instanceof Error?_0x1ecfd2[_0x232705(0x4f4)]:JSON[_0x232705(0x179)](_0x1ecfd2,null,0x2))),null;}}async['findConversation'](_0x3b5131,_0x337674){const _0x37404a=a0_0x5ca971;try{let _0x376835=!!_0x337674[_0x37404a(0x647)],_0x128436=_0x337674[_0x37404a(0x48f)],_0x1d34e4=null;if(this[_0x37404a(0x56b)][_0x37404a(0x608)](this[_0x37404a(0x6dd)]+'\x20('+this[_0x37404a(0x3f0)][_0x37404a(0x547)]+_0x37404a(0x229)+_0x376835+_0x37404a(0x4d1)+_0x128436),_0x376835){this[_0x37404a(0x56b)]['verbose'](this['instanceName']+'\x20('+this[_0x37404a(0x3f0)][_0x37404a(0x547)]+_0x37404a(0x79c));let _0x154336={'where':{'remoteJid':_0x3b5131,'waitingMenu_id':_0x128436}};if(_0x1d34e4=await this['repository']['flowConversation']['findOne'](_0x154336,this[_0x37404a(0x3f0)]['wuid']),!_0x1d34e4)return this['logger'][_0x37404a(0x608)](this[_0x37404a(0x6dd)]+'\x20('+this[_0x37404a(0x3f0)][_0x37404a(0x547)]+'):\x20não\x20encontrou'),null;let _0x2cef1=Date[_0x37404a(0x7d1)](),_0x557a7e=_0x1d34e4?.[_0x37404a(0x468)]||0x0,_0x49b8b0=_0x2cef1-_0x557a7e*0x3c*0x3e8;if(_0x1d34e4[_0x37404a(0x345)]<_0x49b8b0){this[_0x37404a(0x56b)][_0x37404a(0x608)](this[_0x37404a(0x6dd)]+'\x20('+this[_0x37404a(0x3f0)][_0x37404a(0x547)]+'):\x20Conversa\x20está\x20expirada\x20-\x20voto');let _0x4cab71={'number':_0x1d34e4[_0x37404a(0x509)],'options':{'delay':0x0},'textMessage':{'text':_0x1d34e4[_0x37404a(0x1b6)]}};await this[_0x37404a(0x227)](_0x4cab71);let _0x31457a={'status':_0x37404a(0x83b),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x37404a(0x7fa)]['flowConversation'][_0x37404a(0x743)](_0x1d34e4['_id'],_0x31457a,this['instance'][_0x37404a(0x547)]),null;}return _0x1d34e4[_0x37404a(0x345)]=Date[_0x37404a(0x7d1)](),_0x1d34e4[_0x37404a(0x61a)][_0x37404a(0x2bb)]=_0x337674,_0x1d34e4;}else{this[_0x37404a(0x56b)]['verbose'](this[_0x37404a(0x6dd)]+'\x20('+this[_0x37404a(0x3f0)]['wuid']+_0x37404a(0x3a3)+this[_0x37404a(0x3f0)]['wuid']+_0x37404a(0x573)),this[_0x37404a(0x56b)][_0x37404a(0x608)](this['instanceName']+'\x20('+this[_0x37404a(0x3f0)][_0x37404a(0x547)]+_0x37404a(0x530));let _0x37b657={'where':{'remoteJid':_0x3b5131,'status':_0x37404a(0x158)}};if(_0x1d34e4=await this[_0x37404a(0x7fa)][_0x37404a(0x174)][_0x37404a(0x640)](_0x37b657,this[_0x37404a(0x3f0)]['wuid']),!_0x1d34e4){let _0x408ea0=await this[_0x37404a(0x7ea)](_0x3b5131);if(_0x408ea0&&(_0x1d34e4=await this[_0x37404a(0x2cd)](_0x408ea0,_0x337674[_0x37404a(0x74a)],_0x337674)),!_0x1d34e4)return null;}let _0x50b59f=Date[_0x37404a(0x7d1)](),_0x58fb75=_0x1d34e4?.['minutesToClose']||0x0,_0x5da876=_0x50b59f-_0x58fb75*0x3c*0x3e8;if(this[_0x37404a(0x56b)][_0x37404a(0x608)](this[_0x37404a(0x6dd)]+'\x20('+this[_0x37404a(0x3f0)]['wuid']+_0x37404a(0x233)+_0x50b59f+_0x37404a(0x478)+_0x58fb75+_0x37404a(0x3f2)+_0x5da876),this[_0x37404a(0x56b)][_0x37404a(0x608)](this['instanceName']+'\x20('+this['instance'][_0x37404a(0x547)]+_0x37404a(0x650)),this['logger'][_0x37404a(0x608)](this[_0x37404a(0x6dd)]+'\x20('+this[_0x37404a(0x3f0)]['wuid']+_0x37404a(0x220)+_0x1d34e4['lastInteraction']),this['logger'][_0x37404a(0x608)](this[_0x37404a(0x6dd)]+'\x20('+this[_0x37404a(0x3f0)][_0x37404a(0x547)]+_0x37404a(0x1d6)+_0x5da876),_0x1d34e4[_0x37404a(0x345)]<_0x5da876){this[_0x37404a(0x56b)][_0x37404a(0x608)](this['instanceName']+'\x20('+this[_0x37404a(0x3f0)][_0x37404a(0x547)]+'):\x20Conversa\x20está\x20expirada');let _0x31d67c=await this[_0x37404a(0x7ea)](_0x3b5131);if(_0x31d67c===null)return null;_0x1d34e4&&await this[_0x37404a(0x7fa)][_0x37404a(0x174)][_0x37404a(0x743)](_0x1d34e4[_0x37404a(0x4a6)],{'status':_0x37404a(0x83b)},this[_0x37404a(0x3f0)][_0x37404a(0x547)]),_0x1d34e4=await this['createNewConversation'](_0x31d67c,_0x337674[_0x37404a(0x74a)],_0x337674);}return _0x1d34e4[_0x37404a(0x345)]=_0x50b59f,_0x1d34e4[_0x37404a(0x61a)]['lastReceivedMessage']=_0x337674,_0x1d34e4;}}catch(_0x56a87e){return this[_0x37404a(0x56b)]['error'](this[_0x37404a(0x6dd)]+'\x20('+this[_0x37404a(0x3f0)][_0x37404a(0x547)]+_0x37404a(0x75d)+(_0x56a87e instanceof Error?_0x56a87e['message']:JSON['stringify'](_0x56a87e,null,0x2))),null;}}async['createNewConversation'](_0xe48025,_0x58071e,_0x461ce7){const _0x36418e=a0_0x5ca971;this['logger'][_0x36418e(0x608)](this[_0x36418e(0x6dd)]+'\x20('+this['instance'][_0x36418e(0x547)]+_0x36418e(0x424));try{let _0x3f9e22=require('mongodb')[_0x36418e(0x1a3)],_0x1a73b7=Date[_0x36418e(0x7d1)](),_0x152f92=_0x36418e(0x3a2),_0x370ea3=_0x58071e[_0x36418e(0x751)]?null:_0x461ce7,_0x2a51a6=_0x58071e[_0x36418e(0x751)]?_0x461ce7:null,_0x285bb2=_0x58071e[_0x36418e(0x509)],_0x3eb06c=this[_0x36418e(0x755)][_0x36418e(0x557)][_0x36418e(0x2d4)](_0x5eb6c6=>_0x5eb6c6[_0x36418e(0x4a6)]===_0xe48025['_id']?.['toString']()),_0x977d36=_0x3eb06c?.[_0x36418e(0x468)]??_0xe48025[_0x36418e(0x468)]??0x0,_0x10c682=_0x3eb06c?.[_0x36418e(0x1ed)]??_0xe48025['readMessages']??!0x1;await this['closeExistingConversations'](_0x285bb2);let _0x18679c={'flowId':_0xe48025[_0x36418e(0x4a6)],..._0xe48025,'chatLog':null},_0x543741=await this['variablesToObject'](_0x18679c[_0x36418e(0x168)]),_0x16f16f=await this['getVariablesChat'](_0x285bb2),_0xe21165={..._0x543741,..._0x16f16f,'_remoteJid':_0x285bb2},_0x427178={'lastReceivedMessage':_0x370ea3,'lastSendMessage':_0x2a51a6,'lastBlockId':_0x152f92,'lastCondition':!0x0,'realVariables':_0xe21165};_0x18679c['chatLog']=_0x427178,delete _0x18679c[_0x36418e(0x4a6)],_0x18679c[_0x36418e(0x4a6)]=new _0x3f9e22(),_0x18679c['lastInteraction']=_0x1a73b7,_0x18679c[_0x36418e(0x2f7)]=_0x36418e(0x158),_0x18679c['remoteJid']=_0x285bb2,_0x18679c[_0x36418e(0x468)]=_0x977d36,_0x18679c['readMessages']=_0x10c682;let _0x56a044=await this[_0x36418e(0x7fa)][_0x36418e(0x174)][_0x36418e(0x743)](_0x18679c[_0x36418e(0x4a6)],_0x18679c,this[_0x36418e(0x3f0)][_0x36418e(0x547)]);return this[_0x36418e(0x56b)]['verbose'](this[_0x36418e(0x6dd)]+'\x20('+this[_0x36418e(0x3f0)][_0x36418e(0x547)]+'):\x20Conversa\x20inserida\x20com\x20sucesso.'),_0x56a044?_0x18679c:null;}catch(_0x207890){return this[_0x36418e(0x56b)]['error'](this[_0x36418e(0x6dd)]+'\x20('+this[_0x36418e(0x3f0)][_0x36418e(0x547)]+'):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20'+(_0x207890 instanceof Error?_0x207890['message']:JSON[_0x36418e(0x179)](_0x207890,null,0x2))),_0x207890;}}async[a0_0x5ca971(0x7dd)](_0x42db6f,_0x1fcef7){const _0x5d64b6=a0_0x5ca971;let _0x4b5727=_0x42db6f[_0x5d64b6(0x509)];_0x1fcef7['uazapi']['remoteJid']&&_0x1fcef7[_0x5d64b6(0x748)][_0x5d64b6(0x509)][_0x5d64b6(0x56d)]()!==''&&(_0x4b5727=_0x1fcef7[_0x5d64b6(0x748)]['remoteJid'][_0x5d64b6(0x56d)]()),this[_0x5d64b6(0x56b)][_0x5d64b6(0x608)](this[_0x5d64b6(0x6dd)]+'\x20('+this[_0x5d64b6(0x3f0)][_0x5d64b6(0x547)]+_0x5d64b6(0x36f));let _0x19a31a={'number':_0x4b5727,'options':{'delay':_0x1fcef7[_0x5d64b6(0x748)]['delay'],'linkPreview':_0x1fcef7['uazapi'][_0x5d64b6(0x4eb)]},'textMessage':{'text':_0x1fcef7[_0x5d64b6(0x748)]['text']}};try{let _0x44b2d7=await this[_0x5d64b6(0x227)](_0x19a31a);if(_0x44b2d7){let _0x5a2f5b={'_id':_0x44b2d7[_0x5d64b6(0x74a)]['id'],'_fromMe':_0x44b2d7['key'][_0x5d64b6(0x751)],'_remoteJid':_0x44b2d7[_0x5d64b6(0x74a)][_0x5d64b6(0x509)]},_0x538dca=(0x0,w['normalizeMessageContent'])(_0x44b2d7[_0x5d64b6(0x4f4)]),_0x44fb25=(0x0,w[_0x5d64b6(0x5cf)])(_0x538dca);_0x42db6f[_0x5d64b6(0x61a)]['lastBlockId']=_0x1fcef7[_0x5d64b6(0x4a6)][_0x5d64b6(0x7b1)]();let {message_normalized:_0x1e55c4}=this[_0x5d64b6(0x713)](_0x538dca,_0x44fb25,null);_0x42db6f['chatLog'][_0x5d64b6(0x2f3)]=await _0x1e55c4;let _0x2915eb={'messageId':_0x44b2d7[_0x5d64b6(0x74a)]['id']},_0x2cb08b=_0x42db6f[_0x5d64b6(0x61a)][_0x5d64b6(0x62d)];Object[_0x5d64b6(0x202)](_0x2cb08b,_0x5a2f5b),_0x42db6f[_0x5d64b6(0x61a)][_0x5d64b6(0x62d)]=_0x2cb08b,this[_0x5d64b6(0x1e6)](_0x42db6f,_0x1fcef7,_0x2915eb);}else{let _0x373f58={'error':!0x0};this[_0x5d64b6(0x1e6)](_0x42db6f,_0x1fcef7,_0x373f58),this[_0x5d64b6(0x56b)][_0x5d64b6(0x2b1)](this[_0x5d64b6(0x6dd)]+'\x20('+this['instance'][_0x5d64b6(0x547)]+_0x5d64b6(0x7f7));}}catch(_0x2b9dea){let _0x34a36d={'error':!0x0,'errorLog':_0x2b9dea[_0x5d64b6(0x7b1)]()};this[_0x5d64b6(0x1e6)](_0x42db6f,_0x1fcef7,_0x34a36d),this[_0x5d64b6(0x56b)][_0x5d64b6(0x2b1)](this['instanceName']+'\x20('+this['instance'][_0x5d64b6(0x547)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20'+(_0x2b9dea instanceof Error?_0x2b9dea[_0x5d64b6(0x4f4)]:JSON[_0x5d64b6(0x179)](_0x2b9dea,null,0x2)));}}async[a0_0x5ca971(0x47a)](_0x3f7efa,_0x23bf51){const _0x925483=a0_0x5ca971;let _0x2f8852=_0x3f7efa['remoteJid'];_0x23bf51['uazapi'][_0x925483(0x509)]&&_0x23bf51[_0x925483(0x748)][_0x925483(0x509)]['trim']()!==''&&(_0x2f8852=_0x23bf51['uazapi']['remoteJid'][_0x925483(0x56d)]()),this[_0x925483(0x56b)]['verbose'](this[_0x925483(0x6dd)]+'\x20('+this[_0x925483(0x3f0)][_0x925483(0x547)]+_0x925483(0x4ee));let _0x33e48b={'number':_0x2f8852,'options':{'delay':_0x23bf51[_0x925483(0x748)]['delay'],'linkPreview':_0x23bf51[_0x925483(0x748)][_0x925483(0x4eb)]},'mediaMessage':{'mediatype':_0x23bf51[_0x925483(0x748)][_0x925483(0x237)],'caption':_0x23bf51[_0x925483(0x748)][_0x925483(0x572)],'media':_0x23bf51['uazapi'][_0x925483(0x1f5)],'fileName':_0x23bf51[_0x925483(0x748)]['fileName']}};try{let _0x1e43aa=await this[_0x925483(0x4b5)](_0x33e48b);if(_0x1e43aa){let _0x101544={'_id':_0x1e43aa[_0x925483(0x74a)]['id'],'_fromMe':_0x1e43aa[_0x925483(0x74a)]['fromMe'],'_remoteJid':_0x1e43aa[_0x925483(0x74a)]['remoteJid']},_0x40d797=(0x0,w[_0x925483(0x419)])(_0x1e43aa[_0x925483(0x4f4)]),_0x387397=(0x0,w[_0x925483(0x5cf)])(_0x40d797);_0x3f7efa[_0x925483(0x61a)][_0x925483(0x67d)]=_0x23bf51['_id'][_0x925483(0x7b1)]();let {message_normalized:_0x290c13}=this['normalizeMessage'](_0x40d797,_0x387397,null);_0x3f7efa[_0x925483(0x61a)][_0x925483(0x2f3)]=await _0x290c13;let _0x1d0d33={'messageId':_0x1e43aa[_0x925483(0x74a)]['id']},_0x31a386=_0x3f7efa[_0x925483(0x61a)][_0x925483(0x62d)];Object[_0x925483(0x202)](_0x31a386,_0x101544),_0x3f7efa['chatLog'][_0x925483(0x62d)]=_0x31a386,this['updateConversation'](_0x3f7efa,_0x23bf51,_0x1d0d33);}else{let _0x19c119={'error':!0x0};this[_0x925483(0x1e6)](_0x3f7efa,_0x23bf51,_0x19c119),this[_0x925483(0x56b)][_0x925483(0x2b1)](this[_0x925483(0x6dd)]+'\x20('+this['instance'][_0x925483(0x547)]+_0x925483(0x155));}}catch(_0x31a6db){let _0x5e438a={'error':!0x0,'errorLog':_0x31a6db[_0x925483(0x7b1)]()};this[_0x925483(0x1e6)](_0x3f7efa,_0x23bf51,_0x5e438a),this[_0x925483(0x56b)][_0x925483(0x2b1)](this[_0x925483(0x6dd)]+'\x20('+this[_0x925483(0x3f0)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20'+(_0x31a6db instanceof Error?_0x31a6db[_0x925483(0x4f4)]:JSON[_0x925483(0x179)](_0x31a6db,null,0x2)));}}async[a0_0x5ca971(0x46c)](_0x1a4440,_0x49cebf){const _0x3f00e1=a0_0x5ca971;let _0x1e9b94=_0x1a4440['remoteJid'];_0x49cebf[_0x3f00e1(0x748)][_0x3f00e1(0x509)]&&_0x49cebf[_0x3f00e1(0x748)][_0x3f00e1(0x509)][_0x3f00e1(0x56d)]()!==''&&(_0x1e9b94=_0x49cebf['uazapi'][_0x3f00e1(0x509)][_0x3f00e1(0x56d)]()),this['logger'][_0x3f00e1(0x608)](this[_0x3f00e1(0x6dd)]+'\x20('+this[_0x3f00e1(0x3f0)][_0x3f00e1(0x547)]+_0x3f00e1(0x25f));let _0x273d26={'number':_0x1e9b94,'options':{'delay':_0x49cebf[_0x3f00e1(0x748)][_0x3f00e1(0x190)]},'locationMessage':{'name':_0x49cebf[_0x3f00e1(0x748)]['name'],'address':_0x49cebf[_0x3f00e1(0x748)][_0x3f00e1(0x60c)],'latitude':_0x49cebf['uazapi'][_0x3f00e1(0x331)],'longitude':_0x49cebf[_0x3f00e1(0x748)]['longitude']}};try{let _0x5820c1=await this[_0x3f00e1(0x184)](_0x273d26);if(_0x5820c1){let _0x30fbac={'_id':_0x5820c1[_0x3f00e1(0x74a)]['id'],'_fromMe':_0x5820c1[_0x3f00e1(0x74a)][_0x3f00e1(0x751)],'_remoteJid':_0x5820c1[_0x3f00e1(0x74a)][_0x3f00e1(0x509)]},_0x433908=(0x0,w[_0x3f00e1(0x419)])(_0x5820c1[_0x3f00e1(0x4f4)]),_0x3f213b=(0x0,w[_0x3f00e1(0x5cf)])(_0x433908);_0x1a4440[_0x3f00e1(0x61a)]['lastBlockId']=_0x49cebf[_0x3f00e1(0x4a6)][_0x3f00e1(0x7b1)]();let {message_normalized:_0x36b6f7}=this[_0x3f00e1(0x713)](_0x433908,_0x3f213b,null);_0x1a4440['chatLog']['lastSendMessage']=await _0x36b6f7;let _0x5dfd5c={'messageId':_0x5820c1[_0x3f00e1(0x74a)]['id']},_0x4ea327=_0x1a4440[_0x3f00e1(0x61a)][_0x3f00e1(0x62d)];Object[_0x3f00e1(0x202)](_0x4ea327,_0x30fbac),_0x1a4440[_0x3f00e1(0x61a)][_0x3f00e1(0x62d)]=_0x4ea327,this[_0x3f00e1(0x1e6)](_0x1a4440,_0x49cebf,_0x5dfd5c);}else{let _0x539325={'error':!0x0};this['updateConversation'](_0x1a4440,_0x49cebf,_0x539325),this[_0x3f00e1(0x56b)][_0x3f00e1(0x2b1)](this[_0x3f00e1(0x6dd)]+'\x20('+this[_0x3f00e1(0x3f0)][_0x3f00e1(0x547)]+_0x3f00e1(0x5ae));}}catch(_0x4ea077){let _0x3d6472={'error':!0x0,'errorLog':_0x4ea077[_0x3f00e1(0x7b1)]()};this[_0x3f00e1(0x1e6)](_0x1a4440,_0x49cebf,_0x3d6472),this[_0x3f00e1(0x56b)][_0x3f00e1(0x2b1)](this[_0x3f00e1(0x6dd)]+'\x20('+this[_0x3f00e1(0x3f0)][_0x3f00e1(0x547)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20'+(_0x4ea077 instanceof Error?_0x4ea077[_0x3f00e1(0x4f4)]:JSON[_0x3f00e1(0x179)](_0x4ea077,null,0x2)));}}async[a0_0x5ca971(0x1f2)](_0x4b0847,_0x18d66d){const _0x246ed6=a0_0x5ca971;let _0x120123=_0x4b0847['remoteJid'];_0x18d66d['uazapi'][_0x246ed6(0x509)]&&_0x18d66d['uazapi']['remoteJid'][_0x246ed6(0x56d)]()!==''&&(_0x120123=_0x18d66d[_0x246ed6(0x748)][_0x246ed6(0x509)][_0x246ed6(0x56d)]()),this[_0x246ed6(0x56b)][_0x246ed6(0x608)](this[_0x246ed6(0x6dd)]+'\x20('+this[_0x246ed6(0x3f0)][_0x246ed6(0x547)]+_0x246ed6(0x425));let _0x2afec0={'number':_0x120123,'options':{'delay':_0x18d66d[_0x246ed6(0x748)][_0x246ed6(0x190)]},'audioMessage':{'audio':_0x18d66d[_0x246ed6(0x748)]['audio']}};try{let _0x3816ec=await this[_0x246ed6(0x533)](_0x2afec0);if(_0x3816ec){let _0x22c037={'_id':_0x3816ec['key']['id'],'_fromMe':_0x3816ec[_0x246ed6(0x74a)][_0x246ed6(0x751)],'_remoteJid':_0x3816ec[_0x246ed6(0x74a)][_0x246ed6(0x509)]},_0x39156b=(0x0,w[_0x246ed6(0x419)])(_0x3816ec[_0x246ed6(0x4f4)]),_0x3426af=(0x0,w[_0x246ed6(0x5cf)])(_0x39156b);_0x4b0847[_0x246ed6(0x61a)][_0x246ed6(0x67d)]=_0x18d66d[_0x246ed6(0x4a6)][_0x246ed6(0x7b1)]();let {message_normalized:_0x3a3d4d}=this[_0x246ed6(0x713)](_0x39156b,_0x3426af,null);_0x4b0847['chatLog']['lastSendMessage']=await _0x3a3d4d;let _0x345620={'messageId':_0x3816ec[_0x246ed6(0x74a)]['id']},_0x44f8e4=_0x4b0847[_0x246ed6(0x61a)][_0x246ed6(0x62d)];Object[_0x246ed6(0x202)](_0x44f8e4,_0x22c037),_0x4b0847['chatLog']['realVariables']=_0x44f8e4,this[_0x246ed6(0x1e6)](_0x4b0847,_0x18d66d,_0x345620);}else{let _0x42bd67={'error':!0x0};this[_0x246ed6(0x1e6)](_0x4b0847,_0x18d66d,_0x42bd67),this['logger'][_0x246ed6(0x2b1)](this[_0x246ed6(0x6dd)]+'\x20('+this['instance']['wuid']+_0x246ed6(0x66d));}}catch(_0x8aae65){let _0x3834d0={'error':!0x0,'errorLog':_0x8aae65['toString']()};this[_0x246ed6(0x1e6)](_0x4b0847,_0x18d66d,_0x3834d0),this[_0x246ed6(0x56b)][_0x246ed6(0x2b1)](this[_0x246ed6(0x6dd)]+'\x20('+this[_0x246ed6(0x3f0)][_0x246ed6(0x547)]+_0x246ed6(0x7ab)+(_0x8aae65 instanceof Error?_0x8aae65[_0x246ed6(0x4f4)]:JSON['stringify'](_0x8aae65,null,0x2)));}}async[a0_0x5ca971(0x833)](_0x32f3d9,_0x392144){const _0x380b22=a0_0x5ca971;let _0x5e5944=_0x32f3d9[_0x380b22(0x509)];_0x392144[_0x380b22(0x748)][_0x380b22(0x509)]&&_0x392144[_0x380b22(0x748)][_0x380b22(0x509)]['trim']()!==''&&(_0x5e5944=_0x392144['uazapi']['remoteJid'][_0x380b22(0x56d)]()),this[_0x380b22(0x56b)]['verbose'](this[_0x380b22(0x6dd)]+'\x20('+this[_0x380b22(0x3f0)][_0x380b22(0x547)]+_0x380b22(0x892));let _0x50baee={'number':_0x5e5944,'options':{'delay':_0x392144['uazapi'][_0x380b22(0x190)]},'contactMessage':[{'fullName':_0x392144[_0x380b22(0x748)][_0x380b22(0x72b)],'phoneNumber':_0x392144[_0x380b22(0x748)]['phoneNumber']}]};try{let _0x360cd7=await this[_0x380b22(0x68b)](_0x50baee);if(_0x360cd7){let _0x56ac49={'_id':_0x360cd7[_0x380b22(0x74a)]['id'],'_fromMe':_0x360cd7[_0x380b22(0x74a)][_0x380b22(0x751)],'_remoteJid':_0x360cd7[_0x380b22(0x74a)][_0x380b22(0x509)]},_0x28a94b=(0x0,w['normalizeMessageContent'])(_0x360cd7[_0x380b22(0x4f4)]),_0x39e274=(0x0,w[_0x380b22(0x5cf)])(_0x28a94b);_0x32f3d9[_0x380b22(0x61a)][_0x380b22(0x67d)]=_0x392144[_0x380b22(0x4a6)][_0x380b22(0x7b1)]();let {message_normalized:_0x258974}=this[_0x380b22(0x713)](_0x28a94b,_0x39e274,null);_0x32f3d9[_0x380b22(0x61a)][_0x380b22(0x2f3)]=await _0x258974;let _0x51f941={'messageId':_0x360cd7[_0x380b22(0x74a)]['id']},_0x426ae4=_0x32f3d9[_0x380b22(0x61a)][_0x380b22(0x62d)];Object[_0x380b22(0x202)](_0x426ae4,_0x56ac49),_0x32f3d9[_0x380b22(0x61a)]['realVariables']=_0x426ae4,this[_0x380b22(0x1e6)](_0x32f3d9,_0x392144,_0x51f941);}else{let _0x3574fa={'error':!0x0};this['updateConversation'](_0x32f3d9,_0x392144,_0x3574fa),this[_0x380b22(0x56b)]['error'](this[_0x380b22(0x6dd)]+'\x20('+this[_0x380b22(0x3f0)]['wuid']+_0x380b22(0x1da));}}catch(_0x47be44){let _0x1e6605={'error':!0x0,'errorLog':_0x47be44['toString']()};this[_0x380b22(0x1e6)](_0x32f3d9,_0x392144,_0x1e6605),this[_0x380b22(0x56b)]['error'](this['instanceName']+'\x20('+this[_0x380b22(0x3f0)][_0x380b22(0x547)]+_0x380b22(0x3a1)+(_0x47be44 instanceof Error?_0x47be44[_0x380b22(0x4f4)]:JSON['stringify'](_0x47be44,null,0x2)));}}['replaceVariablesInReplyOptions'](_0x40508e,_0x36c361){const _0x53bd03=a0_0x5ca971;for(let _0x46e2a5 of _0x40508e)_0x46e2a5[_0x53bd03(0x876)]&&(_0x46e2a5[_0x53bd03(0x876)]=this[_0x53bd03(0x29c)](_0x46e2a5[_0x53bd03(0x876)],_0x36c361)),_0x46e2a5['optionDescription']&&(_0x46e2a5['optionDescription']=this[_0x53bd03(0x29c)](_0x46e2a5[_0x53bd03(0x375)],_0x36c361));}async[a0_0x5ca971(0x76c)](_0x2ad6a5,_0x43daa3){const _0x2c5e23=a0_0x5ca971;let _0x966923=_0x2ad6a5[_0x2c5e23(0x509)];_0x43daa3[_0x2c5e23(0x748)][_0x2c5e23(0x509)]&&_0x43daa3[_0x2c5e23(0x748)][_0x2c5e23(0x509)][_0x2c5e23(0x56d)]()!==''&&(_0x966923=_0x43daa3['uazapi']['remoteJid'][_0x2c5e23(0x56d)]()),this[_0x2c5e23(0x56b)][_0x2c5e23(0x608)](this[_0x2c5e23(0x6dd)]+'\x20('+this['instance'][_0x2c5e23(0x547)]+_0x2c5e23(0x83f));let _0x30d3f7=_0x2ad6a5[_0x2c5e23(0x15f)][_0x2c5e23(0x587)](_0x1054e4=>_0x1054e4[_0x2c5e23(0x449)]===_0x43daa3['_id'])[_0x2c5e23(0x1ba)]((_0x306b2b,_0x36bede)=>_0x306b2b[_0x2c5e23(0x30f)]-_0x36bede[_0x2c5e23(0x30f)]);this[_0x2c5e23(0x3a0)](_0x30d3f7,_0x2ad6a5[_0x2c5e23(0x61a)]['realVariables']);let _0x168aa0=_0x30d3f7[_0x2c5e23(0x7a8)](_0x59209a=>_0x59209a[_0x2c5e23(0x876)]),_0x5cfe43={'number':_0x966923,'menuMessage':{'type':_0x43daa3[_0x2c5e23(0x748)][_0x2c5e23(0x6a4)]||_0x2c5e23(0x1e9),'text':_0x43daa3[_0x2c5e23(0x748)]['text']||_0x43daa3['uazapi'][_0x2c5e23(0x41c)],'footerText':_0x43daa3[_0x2c5e23(0x748)][_0x2c5e23(0x5ed)],'buttonText':_0x43daa3[_0x2c5e23(0x748)]['buttonText'],'selectableCount':0x1,'choices':_0x168aa0},'options':{'delay':_0x43daa3[_0x2c5e23(0x748)][_0x2c5e23(0x190)]}};try{let _0x96f906=await this[_0x2c5e23(0x36b)](_0x5cfe43);if(_0x96f906){let _0x30c98f={'_id':_0x96f906[_0x2c5e23(0x74a)]['id'],'_fromMe':_0x96f906[_0x2c5e23(0x74a)][_0x2c5e23(0x751)],'_remoteJid':_0x96f906[_0x2c5e23(0x74a)][_0x2c5e23(0x509)]};_0x43daa3[_0x2c5e23(0x748)][_0x2c5e23(0x7e3)]===!0x0&&(_0x2ad6a5[_0x2c5e23(0x2f7)]=_0x2c5e23(0x4fe),this[_0x2c5e23(0x56b)][_0x2c5e23(0x608)](this[_0x2c5e23(0x6dd)]+'\x20('+this[_0x2c5e23(0x3f0)][_0x2c5e23(0x547)]+'):\x20conversation.status:\x20'+_0x2ad6a5[_0x2c5e23(0x2f7)])),this['logger'][_0x2c5e23(0x608)](this[_0x2c5e23(0x6dd)]+'\x20('+this[_0x2c5e23(0x3f0)][_0x2c5e23(0x547)]+_0x2c5e23(0x7f2)+(_0x43daa3['uazapi']['name']||_0x43daa3['uazapi']['text'])),_0x2ad6a5[_0x2c5e23(0x766)]=_0x96f906['key']['id'],_0x2ad6a5[_0x2c5e23(0x374)]=_0x43daa3[_0x2c5e23(0x748)][_0x2c5e23(0x41c)]||_0x43daa3[_0x2c5e23(0x748)]['text'],_0x2ad6a5['waitingMenu_replyOptions']=_0x30d3f7,_0x43daa3[_0x2c5e23(0x748)][_0x2c5e23(0x87c)]&&(_0x2ad6a5[_0x2c5e23(0x1b6)]=_0x43daa3[_0x2c5e23(0x748)][_0x2c5e23(0x87c)]),this[_0x2c5e23(0x56b)][_0x2c5e23(0x608)](this[_0x2c5e23(0x6dd)]+'\x20('+this[_0x2c5e23(0x3f0)][_0x2c5e23(0x547)]+_0x2c5e23(0x22d)+_0x2ad6a5[_0x2c5e23(0x374)]);let _0x3f090f=(0x0,w[_0x2c5e23(0x419)])(_0x96f906[_0x2c5e23(0x4f4)]),_0x36f207=(0x0,w['getContentType'])(_0x3f090f);_0x2ad6a5['chatLog']['lastBlockId']=_0x43daa3[_0x2c5e23(0x4a6)][_0x2c5e23(0x7b1)]();let {message_normalized:_0x447418}=this[_0x2c5e23(0x713)](_0x3f090f,_0x36f207,null);_0x2ad6a5[_0x2c5e23(0x61a)][_0x2c5e23(0x2f3)]=await _0x447418;let _0x28b60e={'messageId':_0x96f906[_0x2c5e23(0x74a)]['id']},_0x56af4e=_0x2ad6a5['chatLog'][_0x2c5e23(0x62d)];Object['assign'](_0x56af4e,_0x30c98f),_0x2ad6a5[_0x2c5e23(0x61a)][_0x2c5e23(0x62d)]=_0x56af4e,this[_0x2c5e23(0x1e6)](_0x2ad6a5,_0x43daa3,_0x28b60e);}else{let _0x2468d4={'error':!0x0};this[_0x2c5e23(0x1e6)](_0x2ad6a5,_0x43daa3,_0x2468d4),this[_0x2c5e23(0x56b)]['error'](this[_0x2c5e23(0x6dd)]+'\x20('+this[_0x2c5e23(0x3f0)]['wuid']+_0x2c5e23(0x173));}}catch(_0x24eea1){let _0x12de41={'error':!0x0,'errorLog':_0x24eea1 instanceof Error?_0x24eea1[_0x2c5e23(0x4f4)]:JSON[_0x2c5e23(0x179)](_0x24eea1,null,0x2)};this['updateConversation'](_0x2ad6a5,_0x43daa3,_0x12de41),this[_0x2c5e23(0x56b)]['error'](this[_0x2c5e23(0x6dd)]+'\x20('+this[_0x2c5e23(0x3f0)][_0x2c5e23(0x547)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20'+(_0x24eea1 instanceof Error?_0x24eea1['message']:JSON['stringify'](_0x24eea1,null,0x2)));}}async[a0_0x5ca971(0x170)](_0x5e8e21,_0x5f2705){const _0x549869=a0_0x5ca971;this[_0x549869(0x56b)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x549869(0x547)]+_0x549869(0x6c9));let _0x4c1304=_0x5e8e21[_0x549869(0x61a)][_0x549869(0x3c1)][_0x549869(0x2d4)](_0x10822a=>_0x10822a[_0x549869(0x449)][_0x549869(0x7b1)]()===_0x5f2705[_0x549869(0x748)][_0x549869(0x449)]['toString']()),_0x58d9fb={'id':_0x4c1304['messageId'],'remoteJid':_0x4c1304['remoteJid'],'fromMe':_0x4c1304[_0x549869(0x751)]};try{let _0x52e482=await this[_0x549869(0x612)](_0x58d9fb);if(_0x52e482){let _0x39acb1=(0x0,w['normalizeMessageContent'])(_0x52e482[_0x549869(0x4f4)]),_0x14420b=(0x0,w['getContentType'])(_0x39acb1);_0x5e8e21['chatLog'][_0x549869(0x67d)]=_0x5f2705[_0x549869(0x4a6)][_0x549869(0x7b1)]();let {message_normalized:_0x4b5cd6}=this['normalizeMessage'](_0x39acb1,_0x14420b,null);_0x5e8e21[_0x549869(0x61a)]['lastSendMessage']=await _0x4b5cd6;let _0x5e8a7b={};this[_0x549869(0x1e6)](_0x5e8e21,_0x5f2705,_0x5e8a7b);}else{let _0x4f50e4={'error':!0x0};this[_0x549869(0x1e6)](_0x5e8e21,_0x5f2705,_0x4f50e4),this[_0x549869(0x56b)]['error'](this[_0x549869(0x6dd)]+'\x20('+this[_0x549869(0x3f0)][_0x549869(0x547)]+_0x549869(0x5d0));}}catch(_0x547662){let _0x513f81={'error':!0x0,'errorLog':_0x547662 instanceof Error?_0x547662[_0x549869(0x4f4)]:JSON[_0x549869(0x179)](_0x547662,null,0x2)};this['updateConversation'](_0x5e8e21,_0x5f2705,_0x513f81),this[_0x549869(0x56b)]['error'](this[_0x549869(0x6dd)]+'\x20('+this[_0x549869(0x3f0)][_0x549869(0x547)]+'):\x20Falha\x20ao\x20deletar\x20mensagem:\x20'+(_0x547662 instanceof Error?_0x547662['message']:JSON[_0x549869(0x179)](_0x547662,null,0x2)));}}async[a0_0x5ca971(0x3b5)](_0x3a58cf,_0x2b141f){const _0x8681c5=a0_0x5ca971;if(_0x3a58cf[_0x8681c5(0x41c)]||(_0x3a58cf[_0x8681c5(0x41c)]=(0x0,Y['v4'])()),_0x2b141f!==Ai&&_0x3a58cf?.[_0x8681c5(0x731)])throw new m(_0x8681c5(0x257));if('_id'in _0x3a58cf&&'owner'in _0x3a58cf)return this[_0x8681c5(0x59c)](_0x3a58cf[_0x8681c5(0x42d)],_0x3a58cf['_id']);this[_0x8681c5(0x56b)][_0x8681c5(0x608)](this['instanceName']+'\x20('+this[_0x8681c5(0x3f0)]['wuid']+_0x8681c5(0x457));let _0x5a7c5e=this[_0x8681c5(0x71e)](_0x3a58cf['name']),_0x331073=new fe[(_0x8681c5(0x1ae))][(_0x8681c5(0x1a3))](),_0x3afd45={'_id':_0x331073,'default':!0x0,'title':_0x8681c5(0x2d8),'x':0x0,'y':0x0},_0x29fd44={'_id':new fe[(_0x8681c5(0x1ae))]['ObjectId'](),'order':0x1,'groupId':_0x331073[_0x8681c5(0x7b1)](),'type':_0x8681c5(0x3a2)},_0x499d73=this[_0x8681c5(0x3f0)][_0x8681c5(0x547)],_0x4537cf={'_id':(0x0,Y['v4'])(),'owner':_0x499d73,'name':_0x5a7c5e,'whoCanEdit':[_0x499d73],'whoCanUse':[_0x499d73],'groups':[_0x3afd45],'blocks':[_0x29fd44],..._0x3a58cf};try{let _0x2d375e=await this[_0x8681c5(0x7fa)][_0x8681c5(0x6da)][_0x8681c5(0x2e9)](_0x4537cf);return await this[_0x8681c5(0x18c)](),_0x2d375e;}catch(_0x3ac9c2){let _0x3e958f=_0x8681c5(0x253),_0x4b9377=_0x3ac9c2 instanceof Error?_0x3ac9c2[_0x8681c5(0x4f4)]:typeof _0x3ac9c2==_0x8681c5(0x487)?JSON[_0x8681c5(0x179)](_0x3ac9c2):_0x3ac9c2,_0xbff084=_0x3e958f+':\x20'+_0x4b9377;throw this[_0x8681c5(0x56b)][_0x8681c5(0x2b1)](this[_0x8681c5(0x6dd)]+'\x20('+this[_0x8681c5(0x3f0)]['wuid']+_0x8681c5(0x3a3)+_0xbff084),new m(_0xbff084);}}async[a0_0x5ca971(0x59c)](_0x30a907,_0x388a59){const _0x597fc6=a0_0x5ca971;try{this[_0x597fc6(0x56b)][_0x597fc6(0x608)](this['instanceName']+'\x20('+this[_0x597fc6(0x3f0)][_0x597fc6(0x547)]+_0x597fc6(0x4b8));let _0x1a04f6=await this[_0x597fc6(0x7fa)][_0x597fc6(0x6da)][_0x597fc6(0x640)]({'where':{'_id':_0x388a59,'owner':_0x30a907}});if(!_0x1a04f6)throw new m(_0x597fc6(0x1d7));if(_0x1a04f6[_0x597fc6(0x6e0)]===!0x1&&!_0x1a04f6['globalShow'])throw new m(_0x597fc6(0x582));let _0x32d73e=new Set(_0x1a04f6[_0x597fc6(0x5f9)]??[]);_0x32d73e['add'](this[_0x597fc6(0x3f0)][_0x597fc6(0x547)]);let _0x4c9719=await this[_0x597fc6(0x7fa)][_0x597fc6(0x6da)][_0x597fc6(0x743)](_0x388a59,{..._0x1a04f6,'whoCanUse':Array[_0x597fc6(0x724)](_0x32d73e)});return await this[_0x597fc6(0x18c)](),_0x4c9719;}catch(_0x4b56df){let _0x5aee98=_0x597fc6(0x574),_0x4ea617=_0x4b56df instanceof Error?_0x4b56df[_0x597fc6(0x4f4)]:typeof _0x4b56df=='object'?JSON[_0x597fc6(0x179)](_0x4b56df):_0x4b56df,_0x563d20=_0x5aee98+':\x20'+_0x4ea617;throw this[_0x597fc6(0x56b)]['error'](this[_0x597fc6(0x6dd)]+'\x20('+this[_0x597fc6(0x3f0)][_0x597fc6(0x547)]+'):\x20'+_0x563d20),new m(_0x563d20);}}[a0_0x5ca971(0x71e)](_0x1cb6c7){const _0x3dac0f=a0_0x5ca971;let _0x3de205=_0x1cb6c7,_0x576475=0x1;for(;this[_0x3dac0f(0x755)][_0x3dac0f(0x557)]['some'](_0x225be7=>_0x225be7['name']===_0x3de205);)_0x576475++,_0x3de205=_0x1cb6c7+'\x20('+_0x576475+')';return _0x3de205;}async[a0_0x5ca971(0x3bb)](_0x85b980){const _0x495c28=a0_0x5ca971;try{if(this[_0x495c28(0x56b)]['verbose'](this[_0x495c28(0x6dd)]+'\x20('+this['instance'][_0x495c28(0x547)]+'):\x20\x27Deletando\x20fluxo,\x20id:\x20'+_0x85b980['_id']+',\x20global:\x20'+_0x85b980[_0x495c28(0x66b)]),!this[_0x495c28(0x755)][_0x495c28(0x557)][_0x495c28(0x2d4)](_0x3d8b13=>_0x3d8b13['_id']===_0x85b980[_0x495c28(0x4a6)]))throw this['logger'][_0x495c28(0x608)](this['instanceName']+'\x20('+this['instance'][_0x495c28(0x547)]+_0x495c28(0x704)+_0x85b980[_0x495c28(0x4a6)]+_0x495c28(0x1b8)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x4da4ec=await this[_0x495c28(0x7fa)][_0x495c28(0x6da)][_0x495c28(0x640)]({'where':{'_id':_0x85b980[_0x495c28(0x4a6)]}});if(!_0x4da4ec)throw new m(_0x495c28(0x5b2));if(this[_0x495c28(0x3f0)][_0x495c28(0x547)]===_0x4da4ec['owner']){this[_0x495c28(0x56b)][_0x495c28(0x608)](this[_0x495c28(0x6dd)]+'\x20('+this[_0x495c28(0x3f0)][_0x495c28(0x547)]+_0x495c28(0x861)+_0x85b980['_id']+_0x495c28(0x7c0));let _0x3e2940=await this[_0x495c28(0x7fa)][_0x495c28(0x6da)][_0x495c28(0x631)]({'where':{'_id':_0x85b980[_0x495c28(0x4a6)]}});return await this['synchronizeAndMapFlows'](),_0x3e2940;}return this[_0x495c28(0x56b)][_0x495c28(0x608)](this[_0x495c28(0x6dd)]+'\x20('+this['instance'][_0x495c28(0x547)]+_0x495c28(0x1a5)+this[_0x495c28(0x3f0)]['wuid']+_0x495c28(0x2ab)+_0x85b980[_0x495c28(0x4a6)]+_0x495c28(0x17c)),_0x4da4ec['whoCanUse']=(_0x4da4ec[_0x495c28(0x5f9)]??[])[_0x495c28(0x587)](_0x466357=>_0x466357!==this[_0x495c28(0x3f0)][_0x495c28(0x547)]),_0x4da4ec['whoCanEdit']=(_0x4da4ec[_0x495c28(0x79f)]??[])[_0x495c28(0x587)](_0x301fb0=>_0x301fb0!==this[_0x495c28(0x3f0)][_0x495c28(0x547)]),_0x4da4ec[_0x495c28(0x79f)][_0x495c28(0x532)]===0x0&&_0x4da4ec[_0x495c28(0x5f9)][_0x495c28(0x532)]>0x0&&(_0x4da4ec[_0x495c28(0x79f)][_0x495c28(0x59a)](_0x4da4ec[_0x495c28(0x5f9)][0x0]),this[_0x495c28(0x56b)][_0x495c28(0x608)](this[_0x495c28(0x6dd)]+'\x20('+this[_0x495c28(0x3f0)]['wuid']+_0x495c28(0x848)+_0x4da4ec[_0x495c28(0x5f9)][0x0]+_0x495c28(0x4ce)+_0x85b980[_0x495c28(0x4a6)]+_0x495c28(0x17c))),await this[_0x495c28(0x7fa)][_0x495c28(0x6da)][_0x495c28(0x743)](_0x4da4ec[_0x495c28(0x4a6)],_0x4da4ec),await this[_0x495c28(0x18c)](),{'message':'Fluxo\x20\x27'+_0x85b980[_0x495c28(0x41c)]+_0x495c28(0x474)};}catch(_0x5a95c8){return this[_0x495c28(0x56b)][_0x495c28(0x2b1)](this[_0x495c28(0x6dd)]+'\x20('+this[_0x495c28(0x3f0)][_0x495c28(0x547)]+_0x495c28(0x218)+(_0x5a95c8 instanceof Error?_0x5a95c8[_0x495c28(0x4f4)]:JSON[_0x495c28(0x179)](_0x5a95c8,null,0x2))),{'message':'Erro\x20ao\x20deletar\x20o\x20fluxo:\x20'+(_0x5a95c8 instanceof Error?_0x5a95c8[_0x495c28(0x4f4)]:JSON['stringify'](_0x5a95c8,null,0x2))};}}async[a0_0x5ca971(0x247)](_0x3f1589){const _0x9d73ea=a0_0x5ca971;try{if(this['logger'][_0x9d73ea(0x1d2)](this['instanceName']+'\x20('+this[_0x9d73ea(0x3f0)][_0x9d73ea(0x547)]+_0x9d73ea(0x340)+_0x3f1589),!this[_0x9d73ea(0x755)]&&(await this[_0x9d73ea(0x2b9)](),!this[_0x9d73ea(0x755)]))return null;let _0x1a6062=await this[_0x9d73ea(0x7fa)][_0x9d73ea(0x6da)][_0x9d73ea(0x640)]({'where':{'_id':_0x3f1589}});if(!_0x1a6062)throw new m(_0x9d73ea(0x330)+_0x3f1589+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.');if(!(_0x1a6062[_0x9d73ea(0x731)]||_0x1a6062['whoCanUse']?.[_0x9d73ea(0x839)](this['instance'][_0x9d73ea(0x547)])))throw new m(_0x9d73ea(0x151)+name+'\x27');_0x1a6062[_0x9d73ea(0x731)]&&!_0x1a6062[_0x9d73ea(0x5f9)]?.[_0x9d73ea(0x839)](this[_0x9d73ea(0x3f0)]['wuid'])&&(_0x1a6062[_0x9d73ea(0x5f9)]=[..._0x1a6062[_0x9d73ea(0x5f9)]??[],this[_0x9d73ea(0x3f0)][_0x9d73ea(0x547)]],await this[_0x9d73ea(0x7fa)][_0x9d73ea(0x6da)][_0x9d73ea(0x743)](_0x1a6062['_id'],_0x1a6062),this[_0x9d73ea(0x18c)]());let _0x36fcad=this[_0x9d73ea(0x755)]?.[_0x9d73ea(0x85a)]['map'](_0x1f26d4=>_0x1f26d4[_0x9d73ea(0x41c)]),_0x11eba9=[_0x9d73ea(0x207),_0x9d73ea(0x4fc),_0x9d73ea(0x428),_0x9d73ea(0x506),_0x9d73ea(0x2f7),'notas',_0x9d73ea(0x5e3),_0x9d73ea(0x742),'etiquetas',_0x9d73ea(0x79b),'atendimentoAberto'];_0x1a6062[_0x9d73ea(0x168)]=_0x1a6062['variables'][_0x9d73ea(0x587)](_0x2f70ee=>!(_0x2f70ee[_0x9d73ea(0x2bd)]===_0x9d73ea(0x341)||_0x2f70ee[_0x9d73ea(0x341)])),_0x11eba9[_0x9d73ea(0x491)](_0x2101c5=>{const _0xbffd1b=_0x9d73ea;_0x1a6062[_0xbffd1b(0x168)][_0xbffd1b(0x59a)]({'folder':_0xbffd1b(0x341),'name':_0x2101c5,'value':'','doc':'','leadInfo':!0x0});}),_0x36fcad[_0x9d73ea(0x491)](_0x2e5458=>{const _0x417252=_0x9d73ea;let _0x5bc6a4=_0x1a6062[_0x417252(0x168)][_0x417252(0x447)](_0x1d2995=>_0x1d2995[_0x417252(0x41c)]===_0x2e5458);_0x5bc6a4===-0x1?_0x1a6062[_0x417252(0x168)][_0x417252(0x59a)]({'folder':_0x417252(0x341),'name':_0x2e5458,'value':'','doc':'','leadInfo':!0x0}):(_0x1a6062['variables'][_0x5bc6a4][_0x417252(0x2bd)]=_0x417252(0x341),_0x1a6062[_0x417252(0x168)][_0x5bc6a4][_0x417252(0x341)]=!0x0);}),_0x1a6062[_0x9d73ea(0x200)]&&_0x1a6062[_0x9d73ea(0x200)][_0x9d73ea(0x532)]>0x0&&_0x1a6062['blocks'][_0x9d73ea(0x491)](_0x1ab17f=>{const _0x2ce6af=_0x9d73ea;_0x1ab17f[_0x2ce6af(0x159)]&&_0x1ab17f[_0x2ce6af(0x352)]&&_0x1ab17f[_0x2ce6af(0x159)]===_0x1ab17f[_0x2ce6af(0x352)]&&(_0x1ab17f['next_groupId']=null);});let _0x3e85a8=await this[_0x9d73ea(0x7fa)][_0x9d73ea(0x6da)][_0x9d73ea(0x743)](_0x1a6062[_0x9d73ea(0x4a6)],_0x1a6062);if(!_0x3e85a8)throw new Error(_0x9d73ea(0x1be));return _0x3e85a8;}catch(_0x425956){let _0x44594c=_0x9d73ea(0x4cc),_0x32c644=_0x425956 instanceof Error?_0x425956[_0x9d73ea(0x4f4)]:typeof _0x425956==_0x9d73ea(0x487)?JSON[_0x9d73ea(0x179)](_0x425956):_0x425956,_0x117b15=_0x44594c+':\x20'+_0x32c644;throw this['logger'][_0x9d73ea(0x2b1)](this[_0x9d73ea(0x6dd)]+'\x20('+this[_0x9d73ea(0x3f0)]['wuid']+'):\x20'+_0x117b15),new m(_0x117b15);}}async[a0_0x5ca971(0x1aa)](){const _0x525ec5=a0_0x5ca971;try{this[_0x525ec5(0x56b)][_0x525ec5(0x608)](this[_0x525ec5(0x6dd)]+'\x20('+this[_0x525ec5(0x3f0)]['wuid']+'):\x20Buscando\x20todos\x20os\x20fluxos...'),await this['synchronizeAndMapFlows']();let _0x3334ad=await this[_0x525ec5(0x7fa)][_0x525ec5(0x6da)][_0x525ec5(0x4aa)]({'where':{'globalShow':!0x0}});return[...this[_0x525ec5(0x755)]['flows'],..._0x3334ad];}catch(_0x2a2f7c){return this['logger'][_0x525ec5(0x2b1)](this[_0x525ec5(0x6dd)]+'\x20('+this[_0x525ec5(0x3f0)][_0x525ec5(0x547)]+_0x525ec5(0x28f)+(_0x2a2f7c instanceof Error?_0x2a2f7c[_0x525ec5(0x4f4)]:JSON[_0x525ec5(0x179)](_0x2a2f7c,null,0x2))),{'message':'Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20'+(_0x2a2f7c instanceof Error?_0x2a2f7c[_0x525ec5(0x4f4)]:String(_0x2a2f7c))};}}async[a0_0x5ca971(0x6a3)](_0x47158f,_0x3e662b){const _0x34ec60=a0_0x5ca971;try{this[_0x34ec60(0x56b)][_0x34ec60(0x608)](this['instanceName']+'\x20('+this[_0x34ec60(0x3f0)]['wuid']+_0x34ec60(0x653));let _0x2f1c49=this[_0x34ec60(0x755)]['flows'][_0x34ec60(0x2d4)](_0x3807bf=>_0x3807bf[_0x34ec60(0x4a6)]===_0x47158f[_0x34ec60(0x4a6)]);if(!_0x2f1c49)throw this['logger'][_0x34ec60(0x608)](this['instanceName']+'\x20('+this[_0x34ec60(0x3f0)][_0x34ec60(0x547)]+_0x34ec60(0x704)+_0x47158f[_0x34ec60(0x4a6)]+_0x34ec60(0x1b8)),new m(_0x34ec60(0x7b7));let _0x5729e1=await this[_0x34ec60(0x7fa)][_0x34ec60(0x6da)][_0x34ec60(0x640)]({'where':{'_id':_0x47158f[_0x34ec60(0x4a6)]}});if(!_0x5729e1||!_0x5729e1['whoCanUse']?.[_0x34ec60(0x839)](this[_0x34ec60(0x3f0)][_0x34ec60(0x547)]))throw this[_0x34ec60(0x56b)][_0x34ec60(0x2b1)](this[_0x34ec60(0x6dd)]+'\x20('+this[_0x34ec60(0x3f0)][_0x34ec60(0x547)]+_0x34ec60(0x792)+_0x47158f['_id']+_0x34ec60(0x1f1)),new m(_0x34ec60(0x526)+_0x47158f[_0x34ec60(0x4a6)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x3b689b=this[_0x34ec60(0x755)]['flows'][_0x34ec60(0x447)](_0x5a9a13=>_0x5a9a13[_0x34ec60(0x4a6)]===_0x2f1c49[_0x34ec60(0x4a6)]);if(_0x3b689b!==-0x1){let _0x54c3b5=this[_0x34ec60(0x755)]['flows'][_0x3b689b];if(_0x54c3b5['name']=_0x47158f['name']??_0x54c3b5[_0x34ec60(0x41c)],_0x54c3b5[_0x34ec60(0x678)]=_0x47158f[_0x34ec60(0x678)]??_0x54c3b5[_0x34ec60(0x678)],_0x54c3b5[_0x34ec60(0x79e)]=_0x47158f[_0x34ec60(0x79e)]??_0x54c3b5['testingWith'],_0x54c3b5['startCommand']=_0x47158f[_0x34ec60(0x1b9)]??_0x54c3b5['startCommand'],_0x54c3b5['minutesToClose']=_0x47158f['minutesToClose']??_0x54c3b5[_0x34ec60(0x468)],_0x54c3b5[_0x34ec60(0x1ed)]=_0x47158f[_0x34ec60(0x1ed)]??_0x54c3b5['readMessages'],_0x47158f[_0x34ec60(0x678)]&&this['AutomateSystem']['flows'][_0x34ec60(0x491)]((_0x5e360a,_0x57e7be)=>{_0x57e7be!==_0x3b689b&&(_0x5e360a['default']=!0x1);}),this[_0x34ec60(0x755)][_0x34ec60(0x557)][_0x3b689b]=_0x54c3b5,!await this['repository'][_0x34ec60(0x797)][_0x34ec60(0x26b)]({'flows':this[_0x34ec60(0x755)][_0x34ec60(0x557)]},this[_0x34ec60(0x3f0)][_0x34ec60(0x547)]))throw new m(_0x34ec60(0x6c7));}let _0x30b8db=[_0x34ec60(0x66b),_0x34ec60(0x1b3),_0x34ec60(0x4f0),'shareOwners'];for(let _0x2084a1 of _0x30b8db)delete _0x47158f[_0x2084a1];if(_0x5729e1[_0x34ec60(0x79f)]?.[_0x34ec60(0x839)](this['instance'][_0x34ec60(0x547)])||(_0x47158f={'_id':_0x47158f[_0x34ec60(0x4a6)]}),_0x3e662b!==Ai&&_0x47158f?.[_0x34ec60(0x731)]&&!_0x5729e1?.[_0x34ec60(0x731)])throw new m(_0x34ec60(0x5bc));let _0x50f567=new Set(_0x47158f['whoCanEdit']??_0x5729e1[_0x34ec60(0x79f)]);_0x50f567[_0x34ec60(0x3fc)](_0x5729e1[_0x34ec60(0x42d)]);let _0xb3fb7f=new Set(_0x47158f['whoCanUse']??_0x5729e1[_0x34ec60(0x5f9)]??[]);_0x50f567[_0x34ec60(0x491)](_0x466b8e=>_0xb3fb7f[_0x34ec60(0x3fc)](_0x466b8e)),_0xb3fb7f[_0x34ec60(0x3fc)](_0x5729e1[_0x34ec60(0x42d)]),this[_0x34ec60(0x56b)][_0x34ec60(0x608)](this[_0x34ec60(0x6dd)]+'\x20('+this['instance']['wuid']+_0x34ec60(0x522)+Array[_0x34ec60(0x724)](_0x50f567)),this[_0x34ec60(0x56b)][_0x34ec60(0x608)](this[_0x34ec60(0x6dd)]+'\x20('+this[_0x34ec60(0x3f0)][_0x34ec60(0x547)]+_0x34ec60(0x3c7)+Array[_0x34ec60(0x724)](_0xb3fb7f));let _0x2e8b86=await this['getValidWhatsAppNumbers'](Array[_0x34ec60(0x724)](_0xb3fb7f)),_0x242793=Array[_0x34ec60(0x724)](_0x50f567)[_0x34ec60(0x587)](_0x1575ac=>_0x2e8b86[_0x34ec60(0x839)](_0x1575ac)),_0x322913=Array[_0x34ec60(0x724)](_0xb3fb7f)[_0x34ec60(0x587)](_0x184ddb=>_0x2e8b86[_0x34ec60(0x839)](_0x184ddb));this[_0x34ec60(0x56b)]['verbose'](this[_0x34ec60(0x6dd)]+'\x20('+this[_0x34ec60(0x3f0)][_0x34ec60(0x547)]+_0x34ec60(0x2da)+_0x242793),this['logger']['verbose'](this[_0x34ec60(0x6dd)]+'\x20('+this[_0x34ec60(0x3f0)][_0x34ec60(0x547)]+_0x34ec60(0x7ff)+_0x322913);let _0x4c62b4={..._0x5729e1,..._0x47158f,'whoCanEdit':_0x242793,'whoCanUse':_0x322913},_0x207cd0=await this['repository']['flow'][_0x34ec60(0x743)](_0x5729e1[_0x34ec60(0x4a6)],_0x4c62b4);return await this[_0x34ec60(0x18c)](),_0x207cd0;}catch(_0x56fafa){let _0x1e0a5b='Erro\x20ao\x20alterar\x20fluxo',_0x4751ef=_0x56fafa instanceof Error?_0x56fafa[_0x34ec60(0x4f4)]:typeof _0x56fafa==_0x34ec60(0x487)?JSON[_0x34ec60(0x179)](_0x56fafa):_0x56fafa,_0x206913=_0x1e0a5b+':\x20'+_0x4751ef;throw this[_0x34ec60(0x56b)][_0x34ec60(0x2b1)](this['instanceName']+'\x20('+this[_0x34ec60(0x3f0)][_0x34ec60(0x547)]+_0x34ec60(0x3a3)+_0x206913),new m(_0x206913);}}async['getValidWhatsAppNumbers'](_0x47a30c){const _0x2d25e1=a0_0x5ca971;let _0x2b01cd={'numbers':_0x47a30c};return(await this[_0x2d25e1(0x5c1)](_0x2b01cd))[_0x2d25e1(0x587)](_0x16a09b=>_0x16a09b[_0x2d25e1(0x160)])[_0x2d25e1(0x7a8)](_0x423484=>_0x423484[_0x2d25e1(0x5e2)])[_0x2d25e1(0x7a8)](_0x41021d=>this[_0x2d25e1(0x242)](_0x41021d));}['extractPhoneNumber'](_0x462459){let _0x3c9f3=_0x462459['match'](/\d+/);return _0x3c9f3?_0x3c9f3[0x0]:'';}async[a0_0x5ca971(0x4d5)](_0x210f34){const _0x4d75f3=a0_0x5ca971;try{if(this[_0x4d75f3(0x56b)][_0x4d75f3(0x608)](this[_0x4d75f3(0x6dd)]+'\x20('+this[_0x4d75f3(0x3f0)][_0x4d75f3(0x547)]+'):\x20Editando\x20bloco...'),!this[_0x4d75f3(0x755)]['flows'][_0x4d75f3(0x2d4)](_0x2cf8d2=>_0x2cf8d2['_id']===_0x210f34['_id']))throw this[_0x4d75f3(0x56b)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x4d75f3(0x547)]+_0x4d75f3(0x704)+_0x210f34[_0x4d75f3(0x4a6)]+'\x27\x20não\x20encontrado'),new m(_0x4d75f3(0x7b7));let _0xd0d52a=await this[_0x4d75f3(0x7fa)][_0x4d75f3(0x6da)][_0x4d75f3(0x640)]({'where':{'_id':_0x210f34[_0x4d75f3(0x4a6)]}});if(!_0xd0d52a||!_0xd0d52a['whoCanUse']?.[_0x4d75f3(0x839)](this['instance'][_0x4d75f3(0x547)]))throw this[_0x4d75f3(0x56b)][_0x4d75f3(0x2b1)](this[_0x4d75f3(0x6dd)]+'\x20('+this[_0x4d75f3(0x3f0)][_0x4d75f3(0x547)]+_0x4d75f3(0x792)+_0x210f34['_id']+_0x4d75f3(0x1f1)),new m(_0x4d75f3(0x526)+_0x210f34['_id']+_0x4d75f3(0x1f1));if(!_0xd0d52a[_0x4d75f3(0x79f)]?.[_0x4d75f3(0x839)](this['instance'][_0x4d75f3(0x547)]))throw new m(_0x4d75f3(0x6ed));let {block:_0x216784}=_0x210f34;_0x216784?.[_0x4d75f3(0x85b)]?this[_0x4d75f3(0x3a8)](_0xd0d52a,_0x210f34):_0x216784?.[_0x4d75f3(0x8a2)]?this['deleteBlock'](_0xd0d52a,_0x210f34):_0x216784[_0x4d75f3(0x4a6)]?await this[_0x4d75f3(0x7e9)](_0xd0d52a,_0x210f34):this[_0x4d75f3(0x698)](_0xd0d52a,_0x210f34);let _0xfeb962=await this[_0x4d75f3(0x7fa)][_0x4d75f3(0x6da)]['updateOne'](_0xd0d52a[_0x4d75f3(0x4a6)],_0xd0d52a);if(!_0xfeb962)throw new Error(_0x4d75f3(0x1be));return _0xfeb962;}catch(_0x5baa08){this[_0x4d75f3(0x434)](_0x4d75f3(0x738)+_0x5baa08[_0x4d75f3(0x4f4)]);}}async[a0_0x5ca971(0x3a8)](_0x294d4d,_0xf712b5){const _0x59af57=a0_0x5ca971;let _0xcd2a75=_0xf712b5['block'][_0x59af57(0x4a6)],_0x18393c=_0x294d4d['blocks'][_0x59af57(0x2d4)](_0x3d7c5d=>_0x3d7c5d['_id'][_0x59af57(0x7b1)]()===_0xcd2a75);if(!_0x18393c){this['logger'][_0x59af57(0x2b1)](this[_0x59af57(0x6dd)]+'\x20('+this[_0x59af57(0x3f0)][_0x59af57(0x547)]+_0x59af57(0x578)+_0xcd2a75+_0x59af57(0x35e));return;}this[_0x59af57(0x56b)][_0x59af57(0x608)](this[_0x59af57(0x6dd)]+'\x20('+this[_0x59af57(0x3f0)]['wuid']+_0x59af57(0x77f)+JSON[_0x59af57(0x179)](_0x18393c));let _0x3a0135=JSON[_0x59af57(0x1c3)](JSON[_0x59af57(0x179)](_0x18393c));_0x3a0135[_0x59af57(0x4a6)]=new fe[(_0x59af57(0x678))][(_0x59af57(0x1ae))][(_0x59af57(0x1a3))](),this[_0x59af57(0x56b)][_0x59af57(0x608)](this[_0x59af57(0x6dd)]+'\x20('+this[_0x59af57(0x3f0)][_0x59af57(0x547)]+_0x59af57(0x83a)+JSON['stringify'](_0x3a0135)),_0x294d4d['blocks'][_0x59af57(0x59a)](_0x3a0135),this[_0x59af57(0x5fd)](_0x294d4d[_0x59af57(0x200)],_0x3a0135[_0x59af57(0x159)]);}[a0_0x5ca971(0x434)](_0x490910){const _0x3b30f4=a0_0x5ca971;throw this[_0x3b30f4(0x56b)][_0x3b30f4(0x2b1)](this[_0x3b30f4(0x6dd)]+'\x20('+this['instance'][_0x3b30f4(0x547)]+_0x3b30f4(0x3a3)+_0x490910),new m(_0x490910);}[a0_0x5ca971(0x193)](_0x217f7a,_0x21e765){const _0x1cf57f=a0_0x5ca971;let {block:_0xf83c34}=_0x21e765;if(_0xf83c34[_0x1cf57f(0x536)]===_0x1cf57f(0x3a2)){this['throwAndLogError'](_0x1cf57f(0x1a0));return;}if(!_0xf83c34[_0x1cf57f(0x4a6)]){this[_0x1cf57f(0x434)](_0x1cf57f(0x256));return;}let _0x5777fe=_0x217f7a[_0x1cf57f(0x200)][_0x1cf57f(0x2d4)](_0x5b959f=>_0x5b959f['_id'][_0x1cf57f(0x7b1)]()===_0x21e765['block'][_0x1cf57f(0x4a6)]['toString']());if(!_0x5777fe){this[_0x1cf57f(0x434)](_0x1cf57f(0x329)+_0xf83c34[_0x1cf57f(0x4a6)]+_0x1cf57f(0x2ea));return;}_0x217f7a[_0x1cf57f(0x200)]=_0x217f7a['blocks'][_0x1cf57f(0x587)](_0x195fb7=>_0x195fb7[_0x1cf57f(0x4a6)][_0x1cf57f(0x7b1)]()!==_0x21e765[_0x1cf57f(0x664)][_0x1cf57f(0x4a6)]['toString']()),_0x217f7a['conditions']=_0x217f7a['conditions'][_0x1cf57f(0x587)](_0x466091=>_0x466091[_0x1cf57f(0x449)]!==_0xf83c34[_0x1cf57f(0x4a6)]['toString']()),_0x217f7a[_0x1cf57f(0x214)]=_0x217f7a[_0x1cf57f(0x214)][_0x1cf57f(0x587)](_0x67a358=>_0x67a358[_0x1cf57f(0x449)]!==_0xf83c34['_id'][_0x1cf57f(0x7b1)]()),_0x217f7a[_0x1cf57f(0x15f)]=_0x217f7a[_0x1cf57f(0x15f)][_0x1cf57f(0x587)](_0x1b9c15=>_0x1b9c15['blockId']!==_0xf83c34[_0x1cf57f(0x4a6)][_0x1cf57f(0x7b1)]()),this[_0x1cf57f(0x5fd)](_0x217f7a[_0x1cf57f(0x200)],_0x5777fe[_0x1cf57f(0x159)]);}async[a0_0x5ca971(0x7e9)](_0x4a3d5f,_0x561735){const _0x4c4905=a0_0x5ca971;let _0x51b4d3=_0x4a3d5f[_0x4c4905(0x200)][_0x4c4905(0x447)](_0x15d3d1=>_0x15d3d1[_0x4c4905(0x4a6)][_0x4c4905(0x7b1)]()===_0x561735[_0x4c4905(0x664)][_0x4c4905(0x4a6)][_0x4c4905(0x7b1)]());if(this['logger']['verbose'](this[_0x4c4905(0x6dd)]+'\x20('+this[_0x4c4905(0x3f0)]['wuid']+'):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:'+_0x51b4d3),_0x51b4d3===-0x1){this[_0x4c4905(0x56b)][_0x4c4905(0x608)](_0x4c4905(0x329)+_0x561735[_0x4c4905(0x664)]['_id']+_0x4c4905(0x281));return;}if(_0x4a3d5f['blocks'][_0x51b4d3][_0x4c4905(0x536)]==='start'){let _0x1276fa=Object[_0x4c4905(0x418)](_0x561735[_0x4c4905(0x664)]);if(_0x1276fa['length']>0x2||_0x1276fa[_0x4c4905(0x532)]===0x2&&!_0x1276fa[_0x4c4905(0x839)](_0x4c4905(0x352))){this['throwAndLogError'](_0x4c4905(0x811));return;}}let _0x237eeb=_0x4a3d5f['blocks'][_0x51b4d3][_0x4c4905(0x159)];for(let _0x447f11 in _0x561735['block'])_0x561735[_0x4c4905(0x664)][_0x4c4905(0x72a)](_0x447f11)&&(_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3][_0x447f11]=_0x561735[_0x4c4905(0x664)][_0x447f11]);if(this[_0x4c4905(0x56b)][_0x4c4905(0x608)](this[_0x4c4905(0x6dd)]+'\x20('+this[_0x4c4905(0x3f0)]['wuid']+'):\x20Bloco\x20a\x20ser\x20atualizado:\x20'+JSON[_0x4c4905(0x179)](_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3])),_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3][_0x4c4905(0x7d0)]&&_0x4c4905(0x490)in _0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3]['apirequest']){this[_0x4c4905(0x56b)]['verbose'](this[_0x4c4905(0x6dd)]+'\x20('+this[_0x4c4905(0x3f0)]['wuid']+_0x4c4905(0x670));let _0x3996f3=JSON[_0x4c4905(0x179)](_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3][_0x4c4905(0x7d0)]['header'],null,0x1);_0x3996f3[_0x4c4905(0x532)]>0x2&&(_0x3996f3=_0x3996f3[_0x4c4905(0x5ef)](0x1,_0x3996f3[_0x4c4905(0x532)]-0x1)[_0x4c4905(0x56d)]()),_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3]['apirequest'][_0x4c4905(0x1e0)]=_0x3996f3;}if(_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3]['apirequest']&&'body'in _0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3][_0x4c4905(0x7d0)]&&!('bodyString'in _0x4a3d5f['blocks'][_0x51b4d3][_0x4c4905(0x7d0)])){this[_0x4c4905(0x56b)]['verbose'](this[_0x4c4905(0x6dd)]+'\x20('+this[_0x4c4905(0x3f0)][_0x4c4905(0x547)]+_0x4c4905(0x5d3)),_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3][_0x4c4905(0x7d0)][_0x4c4905(0x4a3)]=!0x1;let _0x265dc1=JSON[_0x4c4905(0x179)](_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3]['apirequest'][_0x4c4905(0x723)],null,0x2);_0x4a3d5f['blocks'][_0x51b4d3][_0x4c4905(0x7d0)]['bodyString']=_0x265dc1;}if(_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3][_0x4c4905(0x7d0)]&&'bodyString'in _0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3][_0x4c4905(0x7d0)]){_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3]['apirequest'][_0x4c4905(0x4a3)]=!0x1;let _0x18ab05=_0x4a3d5f['blocks'][_0x51b4d3][_0x4c4905(0x7d0)][_0x4c4905(0x360)],_0xa799d2=this[_0x4c4905(0x22a)](_0x18ab05);_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3][_0x4c4905(0x7d0)][_0x4c4905(0x360)]=_0xa799d2[_0x4c4905(0x69d)],_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3]['apirequest']['bodyStringErrorParse']=_0xa799d2[_0x4c4905(0x2b1)];}let _0x21e84e=_0x4a3d5f[_0x4c4905(0x200)][_0x51b4d3][_0x4c4905(0x159)];_0x237eeb!==_0x21e84e?(this[_0x4c4905(0x5fd)](_0x4a3d5f[_0x4c4905(0x200)],_0x237eeb),this[_0x4c4905(0x5fd)](_0x4a3d5f[_0x4c4905(0x200)],_0x21e84e)):this[_0x4c4905(0x5fd)](_0x4a3d5f['blocks'],_0x237eeb);}[a0_0x5ca971(0x22a)](_0x4b2db3){const _0x32a68a=a0_0x5ca971;let _0x3477dd='\u205f',_0x7e9b37=!0x1,_0x3cf0b2='';for(let _0xb760ec=0x0;_0xb760ec<_0x4b2db3['length'];_0xb760ec++){let _0x2e2ce3=_0x4b2db3[_0xb760ec];_0x2e2ce3==='\x22'&&(_0xb760ec===0x0||_0x4b2db3[_0xb760ec-0x1]!=='\x5c')&&(_0x7e9b37=!_0x7e9b37),!(!_0x7e9b37&&(_0x2e2ce3==='\x0a'||_0x2e2ce3==='\x20'||_0x2e2ce3===_0x3477dd))&&(_0x3cf0b2+=_0x2e2ce3);}let _0x2438dd={},_0x241520=9876543210.1234,_0x4abc39=_0x3cf0b2['replace'](/\{\{([^}]+)\}\}/g,_0x57e975=>{let _0x457b3c=_0x57e975,_0x16d877=''+_0x241520;return _0x2438dd[_0x16d877]=_0x457b3c,_0x241520+=0.0001,_0x16d877;}),_0x3b8580='',_0x43e3a0=!0x1;try{let _0x2d287c=JSON[_0x32a68a(0x1c3)](_0x4abc39);_0x3b8580=JSON['stringify'](_0x2d287c,null,0x2),_0x3b8580=_0x3b8580[_0x32a68a(0x3d2)](/\n( +)/g,(_0x15f5eb,_0x444bdd)=>{const _0x1dee64=_0x32a68a;let _0x1cad47=_0x444bdd[_0x1dee64(0x532)];return'\x0a'+_0x3477dd[_0x1dee64(0x51f)](_0x1cad47*0x2);}),_0x3b8580=_0x3b8580[_0x32a68a(0x3d2)](/(\d{10,}\.\d+)/g,_0x3b239a=>_0x2438dd[_0x3b239a]||_0x3b239a);}catch(_0x394f86){this[_0x32a68a(0x56b)][_0x32a68a(0x2b1)](_0x32a68a(0x36d)+_0x394f86),_0x3b8580=_0x4b2db3,_0x43e3a0=!0x0;}return{'result':_0x3b8580,'error':_0x43e3a0};}[a0_0x5ca971(0x698)](_0x3672a8,_0x1221c0){const _0x29eea8=a0_0x5ca971;if(_0x1221c0[_0x29eea8(0x664)][_0x29eea8(0x536)]===_0x29eea8(0x3a2)){this['throwAndLogError']('Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão');return;}if(_0x1221c0[_0x29eea8(0x664)][_0x29eea8(0x7d0)]&&_0x29eea8(0x490)in _0x1221c0[_0x29eea8(0x664)][_0x29eea8(0x7d0)]){this['logger']['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x29eea8(0x670));let _0x467d11=JSON[_0x29eea8(0x179)](_0x1221c0[_0x29eea8(0x664)][_0x29eea8(0x7d0)][_0x29eea8(0x490)],null,0x1);_0x467d11[_0x29eea8(0x532)]>0x2&&(_0x467d11=_0x467d11['substring'](0x1,_0x467d11['length']-0x1)[_0x29eea8(0x56d)]()),_0x1221c0[_0x29eea8(0x664)]['apirequest']['headerString']=_0x467d11;}_0x1221c0[_0x29eea8(0x664)][_0x29eea8(0x7d0)]&&_0x29eea8(0x723)in _0x1221c0[_0x29eea8(0x664)][_0x29eea8(0x7d0)]&&(this[_0x29eea8(0x56b)][_0x29eea8(0x608)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x29eea8(0x5d3)),_0x1221c0[_0x29eea8(0x664)]['apirequest'][_0x29eea8(0x360)]=JSON[_0x29eea8(0x179)](_0x1221c0[_0x29eea8(0x664)]['apirequest'][_0x29eea8(0x723)],null,0x1)[_0x29eea8(0x56d)]()),_0x3672a8[_0x29eea8(0x200)][_0x29eea8(0x59a)](_0x1221c0[_0x29eea8(0x664)]),this['reorderBlocks'](_0x3672a8[_0x29eea8(0x200)],_0x1221c0[_0x29eea8(0x664)][_0x29eea8(0x159)]);}[a0_0x5ca971(0x5fd)](_0x19183a,_0x20a2d8){const _0x3b6d04=a0_0x5ca971;let _0x170602=_0x19183a['filter'](_0x4a1a9a=>_0x4a1a9a['groupId']===_0x20a2d8);_0x170602[_0x3b6d04(0x1ba)]((_0x1bc58b,_0x16c917)=>_0x1bc58b[_0x3b6d04(0x30f)]-_0x16c917['order']),_0x170602['forEach']((_0x248655,_0x39cb39)=>_0x248655[_0x3b6d04(0x30f)]=_0x39cb39+0x1);}async[a0_0x5ca971(0x6f1)](_0x25f12f){const _0x2dd288=a0_0x5ca971;try{if(this[_0x2dd288(0x56b)]['verbose'](this[_0x2dd288(0x6dd)]+'\x20('+this['instance'][_0x2dd288(0x547)]+_0x2dd288(0x2a7)),!_0x25f12f||!_0x25f12f[_0x2dd288(0x169)]){this[_0x2dd288(0x434)]('Data\x20inválida\x20fornecida');return;}if(!this[_0x2dd288(0x755)][_0x2dd288(0x557)][_0x2dd288(0x2d4)](_0x46ccde=>_0x46ccde[_0x2dd288(0x4a6)]===_0x25f12f[_0x2dd288(0x4a6)]))throw this[_0x2dd288(0x56b)]['verbose'](this[_0x2dd288(0x6dd)]+'\x20('+this['instance'][_0x2dd288(0x547)]+'):\x20Fluxo\x20\x27'+_0x25f12f[_0x2dd288(0x4a6)]+_0x2dd288(0x1b8)),new m(_0x2dd288(0x7b7));let _0x2e920e=await this[_0x2dd288(0x7fa)]['flow'][_0x2dd288(0x640)]({'where':{'_id':_0x25f12f[_0x2dd288(0x4a6)]}});if(!_0x2e920e||!_0x2e920e[_0x2dd288(0x5f9)]?.['includes'](this[_0x2dd288(0x3f0)][_0x2dd288(0x547)]))throw this['logger'][_0x2dd288(0x2b1)](this[_0x2dd288(0x6dd)]+'\x20('+this[_0x2dd288(0x3f0)]['wuid']+_0x2dd288(0x792)+_0x25f12f[_0x2dd288(0x4a6)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x2dd288(0x526)+_0x25f12f[_0x2dd288(0x4a6)]+_0x2dd288(0x1f1));if(!_0x2e920e[_0x2dd288(0x79f)]?.[_0x2dd288(0x839)](this[_0x2dd288(0x3f0)][_0x2dd288(0x547)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let {replyOption:_0x46f45e}=_0x25f12f;_0x46f45e?.[_0x2dd288(0x8a2)]?(this[_0x2dd288(0x70c)](_0x2e920e,_0x25f12f),this[_0x2dd288(0x29a)](_0x2e920e[_0x2dd288(0x15f)],_0x25f12f[_0x2dd288(0x169)][_0x2dd288(0x449)])):_0x46f45e[_0x2dd288(0x4a6)]?(await this[_0x2dd288(0x2e7)](_0x2e920e,_0x25f12f),this[_0x2dd288(0x29a)](_0x2e920e['replyOptions'],_0x25f12f[_0x2dd288(0x169)]['blockId'])):(this[_0x2dd288(0x7c5)](_0x2e920e,_0x25f12f),this[_0x2dd288(0x29a)](_0x2e920e['replyOptions'],_0x25f12f['replyOption'][_0x2dd288(0x449)]));let _0x294a30=await this[_0x2dd288(0x7fa)][_0x2dd288(0x6da)][_0x2dd288(0x743)](_0x2e920e[_0x2dd288(0x4a6)],_0x2e920e);if(!_0x294a30)throw new Error(_0x2dd288(0x1be));return _0x294a30;}catch(_0xc026af){this[_0x2dd288(0x434)]('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0xc026af);}}[a0_0x5ca971(0x29a)](_0x5187e5,_0x1e50c2){const _0x2758fc=a0_0x5ca971;_0x5187e5['forEach'](_0x22933d=>{const _0x409c85=a0_0x2d21;_0x22933d[_0x409c85(0x449)]===_0x1e50c2&&_0x22933d['order']===void 0x0&&(_0x22933d[_0x409c85(0x30f)]=0x270f);});let _0x188a56=_0x5187e5[_0x2758fc(0x587)](_0x3439a4=>_0x3439a4[_0x2758fc(0x449)]===_0x1e50c2);_0x188a56[_0x2758fc(0x1ba)]((_0x47d3f0,_0x30efc7)=>_0x47d3f0[_0x2758fc(0x30f)]-_0x30efc7['order']),_0x188a56['forEach']((_0x4011ec,_0xfb4da9)=>{_0x4011ec['order']=_0xfb4da9+0x1;}),_0x5187e5['forEach'](_0x50bea8=>{const _0x9202d1=_0x2758fc;if(_0x50bea8['blockId']===_0x1e50c2){let _0xf14506=_0x188a56['find'](_0x4eea9e=>_0x4eea9e[_0x9202d1(0x4a6)]&&_0x50bea8[_0x9202d1(0x4a6)]&&_0x4eea9e[_0x9202d1(0x4a6)][_0x9202d1(0x7b1)]()===_0x50bea8['_id']['toString']());_0xf14506&&(_0x50bea8[_0x9202d1(0x30f)]=_0xf14506[_0x9202d1(0x30f)]);}});}[a0_0x5ca971(0x70c)](_0x43be41,_0x3d81a3){const _0x336ef4=a0_0x5ca971;let {replyOption:_0x3b49bf}=_0x3d81a3;if(!_0x3b49bf[_0x336ef4(0x4a6)]){this[_0x336ef4(0x434)](_0x336ef4(0x3d7));return;}if(!_0x43be41[_0x336ef4(0x15f)][_0x336ef4(0x2d4)](_0x44315d=>_0x44315d['_id'][_0x336ef4(0x7b1)]()===_0x3d81a3[_0x336ef4(0x169)][_0x336ef4(0x4a6)][_0x336ef4(0x7b1)]())){this[_0x336ef4(0x434)](_0x336ef4(0x3fb)+_0x3b49bf[_0x336ef4(0x4a6)]+_0x336ef4(0x2ea));return;}_0x43be41[_0x336ef4(0x15f)]=_0x43be41[_0x336ef4(0x15f)][_0x336ef4(0x587)](_0x320303=>_0x320303[_0x336ef4(0x4a6)]['toString']()!==_0x3d81a3[_0x336ef4(0x169)][_0x336ef4(0x4a6)][_0x336ef4(0x7b1)]());}async[a0_0x5ca971(0x2e7)](_0x3404a6,_0x242059){const _0x1a3cf4=a0_0x5ca971;let _0x126490=_0x3404a6[_0x1a3cf4(0x15f)][_0x1a3cf4(0x447)](_0x4d0039=>_0x4d0039['_id'][_0x1a3cf4(0x7b1)]()===_0x242059['replyOption']['_id'][_0x1a3cf4(0x7b1)]());if(_0x126490===-0x1){this[_0x1a3cf4(0x434)](_0x1a3cf4(0x3fb)+_0x242059[_0x1a3cf4(0x169)][_0x1a3cf4(0x4a6)]+_0x1a3cf4(0x281));return;}for(let _0x173731 in _0x242059[_0x1a3cf4(0x169)])_0x242059['replyOption'][_0x1a3cf4(0x72a)](_0x173731)&&(_0x3404a6[_0x1a3cf4(0x15f)][_0x126490][_0x173731]=_0x242059[_0x1a3cf4(0x169)][_0x173731]);}[a0_0x5ca971(0x7c5)](_0x4329c0,_0x5ebbef){const _0x2a651e=a0_0x5ca971;_0x4329c0[_0x2a651e(0x15f)]['push'](_0x5ebbef[_0x2a651e(0x169)]);}async['editFlowGroup'](_0x680bdd){const _0x359497=a0_0x5ca971;this[_0x359497(0x56b)][_0x359497(0x608)](this[_0x359497(0x6dd)]+'\x20('+this['instance'][_0x359497(0x547)]+_0x359497(0x4b3)+JSON['stringify'](_0x680bdd,null,0x2));try{if(this[_0x359497(0x56b)][_0x359497(0x608)](this[_0x359497(0x6dd)]+'\x20('+this[_0x359497(0x3f0)][_0x359497(0x547)]+'):\x20Editando\x20grupo\x20do\x20fluxo...'),!this[_0x359497(0x755)][_0x359497(0x557)][_0x359497(0x2d4)](_0x172ed3=>_0x172ed3[_0x359497(0x4a6)]===_0x680bdd[_0x359497(0x4a6)]))throw this[_0x359497(0x56b)][_0x359497(0x608)](this[_0x359497(0x6dd)]+'\x20('+this[_0x359497(0x3f0)][_0x359497(0x547)]+_0x359497(0x704)+_0x680bdd[_0x359497(0x4a6)]+'\x27\x20não\x20encontrado'),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x1f1993=await this[_0x359497(0x7fa)][_0x359497(0x6da)]['findOne']({'where':{'_id':_0x680bdd[_0x359497(0x4a6)]}});if(!_0x1f1993||!_0x1f1993[_0x359497(0x5f9)]?.['includes'](this[_0x359497(0x3f0)][_0x359497(0x547)]))throw this[_0x359497(0x56b)]['error'](this[_0x359497(0x6dd)]+'\x20('+this[_0x359497(0x3f0)][_0x359497(0x547)]+'):\x20Flow\x20\x27'+_0x680bdd[_0x359497(0x4a6)]+_0x359497(0x1f1)),new m(_0x359497(0x526)+_0x680bdd[_0x359497(0x4a6)]+_0x359497(0x1f1));if(!_0x1f1993[_0x359497(0x79f)]?.[_0x359497(0x839)](this[_0x359497(0x3f0)][_0x359497(0x547)]))throw new m(_0x359497(0x6ed));if(_0x680bdd[_0x359497(0x5fb)]&&_0x680bdd[_0x359497(0x5fb)]?.['delete']===!0x0){if(this['logger'][_0x359497(0x608)](this['instanceName']+'\x20('+this[_0x359497(0x3f0)]['wuid']+_0x359497(0x4a5)),_0x680bdd[_0x359497(0x5fb)][_0x359497(0x678)]===!0x0)return{'message':_0x359497(0x305)};if(_0x1f1993[_0x359497(0x200)][_0x359497(0x606)](_0x5094f8=>_0x5094f8[_0x359497(0x159)][_0x359497(0x7b1)]()===_0x680bdd['group'][_0x359497(0x4a6)]))return this[_0x359497(0x56b)][_0x359497(0x608)](this[_0x359497(0x6dd)]+'\x20('+this['instance'][_0x359497(0x547)]+'):\x20tem\x20blocks'),{'message':_0x359497(0x63c)};_0x1f1993[_0x359497(0x4ca)]=_0x1f1993[_0x359497(0x4ca)]['filter'](_0x5b8315=>_0x5b8315[_0x359497(0x4a6)][_0x359497(0x7b1)]()!==_0x680bdd[_0x359497(0x5fb)][_0x359497(0x4a6)]);}else{if(_0x680bdd['group']){if(_0x680bdd[_0x359497(0x5fb)][_0x359497(0x678)]===!0x0)return{'message':_0x359497(0x420)};if(_0x680bdd[_0x359497(0x5fb)]['_id']){let _0x2220ef=_0x1f1993[_0x359497(0x4ca)][_0x359497(0x2d4)](_0x5c295c=>_0x5c295c['_id'][_0x359497(0x7b1)]()===_0x680bdd[_0x359497(0x5fb)][_0x359497(0x4a6)]);_0x2220ef&&(_0x680bdd[_0x359497(0x5fb)]['x']<0x0&&(_0x680bdd[_0x359497(0x5fb)]['x']=0x0),_0x680bdd[_0x359497(0x5fb)]['y']<0x0&&(_0x680bdd[_0x359497(0x5fb)]['y']=0x0),Object[_0x359497(0x202)](_0x2220ef,_0x680bdd[_0x359497(0x5fb)]));}else _0x1f1993[_0x359497(0x4ca)][_0x359497(0x59a)](_0x680bdd[_0x359497(0x5fb)]);}}let _0x1f0d57=await this[_0x359497(0x7fa)][_0x359497(0x6da)][_0x359497(0x743)](_0x1f1993[_0x359497(0x4a6)],_0x1f1993);if(!_0x1f0d57)throw new Error(_0x359497(0x1be));return _0x1f0d57;}catch(_0x2fd36e){let _0x292f49=_0x359497(0x7b9),_0x5aca7f=_0x2fd36e instanceof Error?_0x2fd36e['message']:typeof _0x2fd36e==_0x359497(0x487)?JSON['stringify'](_0x2fd36e):_0x2fd36e,_0x3a9865=_0x292f49+':\x20'+_0x5aca7f;throw this[_0x359497(0x56b)][_0x359497(0x2b1)](this[_0x359497(0x6dd)]+'\x20('+this[_0x359497(0x3f0)][_0x359497(0x547)]+_0x359497(0x3a3)+_0x3a9865),new m(_0x3a9865);}}async['editFlowCondition'](_0x3185ad){const _0x4ee9ff=a0_0x5ca971;try{if(this[_0x4ee9ff(0x56b)][_0x4ee9ff(0x608)](this[_0x4ee9ff(0x6dd)]+'\x20('+this[_0x4ee9ff(0x3f0)][_0x4ee9ff(0x547)]+_0x4ee9ff(0x421)),!this[_0x4ee9ff(0x755)][_0x4ee9ff(0x557)]['find'](_0x34968a=>_0x34968a['_id']===_0x3185ad[_0x4ee9ff(0x4a6)]))throw this[_0x4ee9ff(0x56b)]['verbose'](this[_0x4ee9ff(0x6dd)]+'\x20('+this[_0x4ee9ff(0x3f0)][_0x4ee9ff(0x547)]+_0x4ee9ff(0x704)+_0x3185ad[_0x4ee9ff(0x4a6)]+_0x4ee9ff(0x1b8)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x32e78c=await this[_0x4ee9ff(0x7fa)][_0x4ee9ff(0x6da)][_0x4ee9ff(0x640)]({'where':{'_id':_0x3185ad['_id']}});if(!_0x32e78c||!_0x32e78c['whoCanUse']?.[_0x4ee9ff(0x839)](this['instance']['wuid']))throw this[_0x4ee9ff(0x56b)]['error'](this[_0x4ee9ff(0x6dd)]+'\x20('+this[_0x4ee9ff(0x3f0)][_0x4ee9ff(0x547)]+_0x4ee9ff(0x792)+_0x3185ad[_0x4ee9ff(0x4a6)]+_0x4ee9ff(0x1f1)),new m(_0x4ee9ff(0x526)+_0x3185ad[_0x4ee9ff(0x4a6)]+_0x4ee9ff(0x1f1));if(!_0x32e78c['whoCanEdit']?.[_0x4ee9ff(0x839)](this[_0x4ee9ff(0x3f0)][_0x4ee9ff(0x547)]))throw new m(_0x4ee9ff(0x6ed));let _0x2787a3=!0x1;if(_0x3185ad['condition']?.[_0x4ee9ff(0x8a2)]===!0x0)_0x32e78c[_0x4ee9ff(0x85d)]=_0x32e78c['conditions']['filter'](_0x1459d7=>_0x1459d7&&_0x3185ad[_0x4ee9ff(0x1bc)]&&_0x1459d7[_0x4ee9ff(0x4a6)]&&_0x3185ad[_0x4ee9ff(0x1bc)][_0x4ee9ff(0x4a6)]&&_0x1459d7[_0x4ee9ff(0x4a6)][_0x4ee9ff(0x7b1)]()!==_0x3185ad[_0x4ee9ff(0x1bc)][_0x4ee9ff(0x4a6)][_0x4ee9ff(0x7b1)]()),_0x2787a3=!0x0;else{let _0x5cf473=_0x32e78c['conditions'][_0x4ee9ff(0x2d4)](_0x3cdd75=>_0x3cdd75&&_0x3185ad[_0x4ee9ff(0x1bc)]&&_0x3cdd75[_0x4ee9ff(0x4a6)]&&_0x3185ad['condition']['_id']&&_0x3cdd75['_id'][_0x4ee9ff(0x7b1)]()===_0x3185ad['condition']['_id'][_0x4ee9ff(0x7b1)]());_0x5cf473?(_0x2787a3=_0x5cf473[_0x4ee9ff(0x30f)]!==_0x3185ad[_0x4ee9ff(0x1bc)][_0x4ee9ff(0x30f)],Object[_0x4ee9ff(0x202)](_0x5cf473,_0x3185ad['condition'])):(_0x32e78c[_0x4ee9ff(0x85d)][_0x4ee9ff(0x59a)](_0x3185ad['condition']),_0x2787a3=!0x0);}if(_0x2787a3){_0x32e78c['conditions'][_0x4ee9ff(0x1ba)]((_0x529037,_0x48f22d)=>_0x529037['order']>_0x48f22d['order']?0x1:_0x48f22d[_0x4ee9ff(0x30f)]>_0x529037['order']?-0x1:0x0);for(let _0x4c29b8=0x0;_0x4c29b8<_0x32e78c['conditions']['length'];_0x4c29b8++)_0x32e78c['conditions'][_0x4c29b8][_0x4ee9ff(0x30f)]=_0x4c29b8+0x1;_0x32e78c[_0x4ee9ff(0x85d)][_0x4ee9ff(0x532)]>0x0&&(_0x32e78c[_0x4ee9ff(0x85d)][0x0]['OrAnd']='and');}let _0x389059=await this['repository'][_0x4ee9ff(0x6da)]['updateOne'](_0x32e78c[_0x4ee9ff(0x4a6)],_0x32e78c);if(!_0x389059)throw new Error(_0x4ee9ff(0x1be));return _0x389059;}catch(_0xfd2e7){let _0x43a61b='Erro\x20ao\x20editar\x20condição\x20do\x20fluxo',_0x135298=_0xfd2e7 instanceof Error?_0xfd2e7[_0x4ee9ff(0x4f4)]:typeof _0xfd2e7==_0x4ee9ff(0x487)?JSON[_0x4ee9ff(0x179)](_0xfd2e7):_0xfd2e7,_0x1b5159=_0x43a61b+':\x20'+_0x135298;throw this[_0x4ee9ff(0x56b)][_0x4ee9ff(0x2b1)](this[_0x4ee9ff(0x6dd)]+'\x20('+this['instance']['wuid']+_0x4ee9ff(0x3a3)+_0x1b5159),new m(_0x1b5159);}}async[a0_0x5ca971(0x656)](_0x46e751){const _0x4e2b38=a0_0x5ca971;try{if(this[_0x4e2b38(0x56b)][_0x4e2b38(0x608)](this[_0x4e2b38(0x6dd)]+'\x20('+this[_0x4e2b38(0x3f0)][_0x4e2b38(0x547)]+_0x4e2b38(0x7ae)),!this[_0x4e2b38(0x755)][_0x4e2b38(0x557)][_0x4e2b38(0x2d4)](_0x3e5fc9=>_0x3e5fc9[_0x4e2b38(0x4a6)]===_0x46e751[_0x4e2b38(0x4a6)]))throw this[_0x4e2b38(0x56b)][_0x4e2b38(0x608)](this[_0x4e2b38(0x6dd)]+'\x20('+this['instance'][_0x4e2b38(0x547)]+_0x4e2b38(0x704)+_0x46e751[_0x4e2b38(0x4a6)]+_0x4e2b38(0x1b8)),new m(_0x4e2b38(0x7b7));let _0x4b53f1=await this[_0x4e2b38(0x7fa)][_0x4e2b38(0x6da)]['findOne']({'where':{'_id':_0x46e751[_0x4e2b38(0x4a6)]}});if(!_0x4b53f1||!_0x4b53f1[_0x4e2b38(0x5f9)]?.[_0x4e2b38(0x839)](this[_0x4e2b38(0x3f0)][_0x4e2b38(0x547)]))throw this[_0x4e2b38(0x56b)]['error'](this['instanceName']+'\x20('+this['instance'][_0x4e2b38(0x547)]+_0x4e2b38(0x792)+_0x46e751[_0x4e2b38(0x4a6)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x46e751[_0x4e2b38(0x4a6)]+_0x4e2b38(0x1f1));if(!_0x4b53f1[_0x4e2b38(0x79f)]?.['includes'](this[_0x4e2b38(0x3f0)]['wuid']))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let _0x3714d7=!0x1;if(_0x46e751[_0x4e2b38(0x599)]?.[_0x4e2b38(0x8a2)]===!0x0)_0x4b53f1[_0x4e2b38(0x214)]=_0x4b53f1[_0x4e2b38(0x214)][_0x4e2b38(0x587)](_0xcff38f=>_0xcff38f&&_0x46e751[_0x4e2b38(0x599)]&&_0xcff38f['_id']&&_0x46e751[_0x4e2b38(0x599)]['_id']&&_0xcff38f[_0x4e2b38(0x4a6)][_0x4e2b38(0x7b1)]()!==_0x46e751[_0x4e2b38(0x599)][_0x4e2b38(0x4a6)][_0x4e2b38(0x7b1)]()),_0x3714d7=!0x0;else{let _0x480694=_0x4b53f1[_0x4e2b38(0x214)][_0x4e2b38(0x2d4)](_0x229ffd=>_0x229ffd&&_0x46e751[_0x4e2b38(0x599)]&&_0x229ffd[_0x4e2b38(0x4a6)]&&_0x46e751['varedit'][_0x4e2b38(0x4a6)]&&_0x229ffd[_0x4e2b38(0x4a6)][_0x4e2b38(0x7b1)]()===_0x46e751[_0x4e2b38(0x599)][_0x4e2b38(0x4a6)][_0x4e2b38(0x7b1)]());_0x480694?(_0x3714d7=_0x480694[_0x4e2b38(0x30f)]!==_0x46e751[_0x4e2b38(0x599)][_0x4e2b38(0x30f)],Object['assign'](_0x480694,_0x46e751[_0x4e2b38(0x599)])):(_0x4b53f1['varedits'][_0x4e2b38(0x59a)](_0x46e751[_0x4e2b38(0x599)]),_0x3714d7=!0x0);}if(_0x3714d7){_0x4b53f1[_0x4e2b38(0x214)]['sort']((_0x9f17d8,_0x488330)=>_0x9f17d8[_0x4e2b38(0x30f)]>_0x488330[_0x4e2b38(0x30f)]?0x1:_0x488330['order']>_0x9f17d8[_0x4e2b38(0x30f)]?-0x1:0x0);for(let _0x2ebaca=0x0;_0x2ebaca<_0x4b53f1[_0x4e2b38(0x214)]['length'];_0x2ebaca++)_0x4b53f1[_0x4e2b38(0x214)][_0x2ebaca][_0x4e2b38(0x30f)]=_0x2ebaca+0x1;}let _0x4dce96=await this[_0x4e2b38(0x7fa)]['flow'][_0x4e2b38(0x743)](_0x4b53f1[_0x4e2b38(0x4a6)],_0x4b53f1);if(!_0x4dce96)throw new Error(_0x4e2b38(0x1be));return _0x4dce96;}catch(_0x3185af){let _0x4a9af4=_0x4e2b38(0x51e),_0x5c5564=_0x3185af instanceof Error?_0x3185af[_0x4e2b38(0x4f4)]:typeof _0x3185af==_0x4e2b38(0x487)?JSON[_0x4e2b38(0x179)](_0x3185af):_0x3185af,_0x1d6af5=_0x4a9af4+':\x20'+_0x5c5564;throw this[_0x4e2b38(0x56b)][_0x4e2b38(0x2b1)](this[_0x4e2b38(0x6dd)]+'\x20('+this[_0x4e2b38(0x3f0)][_0x4e2b38(0x547)]+_0x4e2b38(0x3a3)+_0x1d6af5),new m(_0x1d6af5);}}async[a0_0x5ca971(0x14a)](_0x2411dc){const _0x48d99a=a0_0x5ca971;try{if(this[_0x48d99a(0x56b)][_0x48d99a(0x608)](this[_0x48d99a(0x6dd)]+'\x20('+this[_0x48d99a(0x3f0)][_0x48d99a(0x547)]+'):\x20Editando\x20variável\x20do\x20fluxo...'),!this[_0x48d99a(0x755)]['flows'][_0x48d99a(0x2d4)](_0x1caae0=>_0x1caae0[_0x48d99a(0x4a6)]===_0x2411dc[_0x48d99a(0x4a6)]))throw this[_0x48d99a(0x56b)][_0x48d99a(0x608)](this[_0x48d99a(0x6dd)]+'\x20('+this[_0x48d99a(0x3f0)]['wuid']+_0x48d99a(0x704)+_0x2411dc[_0x48d99a(0x4a6)]+'\x27\x20não\x20encontrado'),new m(_0x48d99a(0x7b7));let _0x50be54=await this[_0x48d99a(0x7fa)]['flow'][_0x48d99a(0x640)]({'where':{'_id':_0x2411dc[_0x48d99a(0x4a6)]}});if(!_0x50be54||!_0x50be54[_0x48d99a(0x5f9)]?.[_0x48d99a(0x839)](this[_0x48d99a(0x3f0)][_0x48d99a(0x547)]))throw this[_0x48d99a(0x56b)][_0x48d99a(0x2b1)](this['instanceName']+'\x20('+this[_0x48d99a(0x3f0)][_0x48d99a(0x547)]+'):\x20Flow\x20\x27'+_0x2411dc[_0x48d99a(0x4a6)]+_0x48d99a(0x1f1)),new m('Flow\x20\x27'+_0x2411dc[_0x48d99a(0x4a6)]+_0x48d99a(0x1f1));if(!_0x50be54['whoCanEdit']?.[_0x48d99a(0x839)](this['instance'][_0x48d99a(0x547)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');_0x2411dc['variable'][_0x48d99a(0x41c)]=_0x2411dc[_0x48d99a(0x73c)][_0x48d99a(0x41c)][_0x48d99a(0x56d)](),_0x2411dc[_0x48d99a(0x73c)][_0x48d99a(0x41c)][_0x48d99a(0x365)]('_')&&(_0x2411dc[_0x48d99a(0x73c)][_0x48d99a(0x41c)]=_0x2411dc[_0x48d99a(0x73c)][_0x48d99a(0x41c)][_0x48d99a(0x5ef)](0x1)),_0x2411dc[_0x48d99a(0x73c)][_0x48d99a(0x41c)]=_0x2411dc[_0x48d99a(0x73c)][_0x48d99a(0x41c)]['trim']();let _0x317827=_0x50be54[_0x48d99a(0x168)][_0x48d99a(0x2d4)](_0x47327f=>_0x47327f[_0x48d99a(0x41c)]===_0x2411dc[_0x48d99a(0x73c)][_0x48d99a(0x41c)]);if(_0x317827?.[_0x48d99a(0x341)]===!0x0)throw new Error(_0x48d99a(0x4bf));if(_0x2411dc[_0x48d99a(0x73c)]?.['delete']===!0x0){if(!_0x317827)return{'message':_0x48d99a(0x5f4)};_0x50be54[_0x48d99a(0x168)]=_0x50be54['variables'][_0x48d99a(0x587)](_0x8f6ede=>_0x8f6ede[_0x48d99a(0x41c)]!==_0x2411dc[_0x48d99a(0x73c)][_0x48d99a(0x41c)]);}else _0x317827?Object[_0x48d99a(0x202)](_0x317827,_0x2411dc[_0x48d99a(0x73c)]):_0x50be54['variables']['push'](_0x2411dc[_0x48d99a(0x73c)]);let _0x38c11a=await this[_0x48d99a(0x7fa)][_0x48d99a(0x6da)]['updateOne'](_0x50be54['_id'],_0x50be54);if(!_0x38c11a)throw new Error(_0x48d99a(0x1be));return _0x38c11a;}catch(_0x5fb569){let _0x13f9f8='Erro\x20ao\x20editar\x20variável\x20do\x20fluxo',_0x3d56af=_0x5fb569 instanceof Error?_0x5fb569[_0x48d99a(0x4f4)]:typeof _0x5fb569==_0x48d99a(0x487)?JSON[_0x48d99a(0x179)](_0x5fb569):_0x5fb569,_0x207dab=_0x13f9f8+':\x20'+_0x3d56af;throw this[_0x48d99a(0x56b)][_0x48d99a(0x2b1)](this[_0x48d99a(0x6dd)]+'\x20('+this['instance'][_0x48d99a(0x547)]+'):\x20'+_0x207dab),new m(_0x207dab);}}async[a0_0x5ca971(0x21b)](_0x1e9826){const _0x17065f=a0_0x5ca971;let _0x3bdc1d=null;try{if(!this[_0x17065f(0x755)]?.['flowConfig'][_0x17065f(0x80e)])throw new m(_0x17065f(0x295));this['logger']['verbose'](this[_0x17065f(0x6dd)]+'\x20('+this[_0x17065f(0x3f0)][_0x17065f(0x547)]+'):\x20Iniciando\x20bot...');let _0x540734=(await this['whatsappNumber']({'numbers':[_0x1e9826[_0x17065f(0x509)]]}))[0x0];if(!_0x540734['exists']&&!(0x0,w[_0x17065f(0x1fd)])(_0x540734[_0x17065f(0x5e2)])&&!_0x540734[_0x17065f(0x5e2)]['includes'](_0x17065f(0x3b7)))throw _0x3bdc1d=JSON['stringify'](_0x540734,null,0x2),new m(_0x540734);let _0x3f9418;if(_0x1e9826[_0x17065f(0x41c)][_0x17065f(0x532)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x17065f(0x22b)](_0x1e9826[_0x17065f(0x41c)])?_0x3f9418=this[_0x17065f(0x755)][_0x17065f(0x557)]['find'](_0x41ec87=>_0x41ec87[_0x17065f(0x4a6)]===_0x1e9826[_0x17065f(0x41c)]):_0x3f9418=this[_0x17065f(0x755)]['flows']['find'](_0x22df04=>_0x22df04[_0x17065f(0x41c)]===_0x1e9826[_0x17065f(0x41c)]),!_0x3f9418)throw this[_0x17065f(0x56b)][_0x17065f(0x608)](this[_0x17065f(0x6dd)]+'\x20('+this[_0x17065f(0x3f0)][_0x17065f(0x547)]+_0x17065f(0x704)+_0x1e9826[_0x17065f(0x41c)]+_0x17065f(0x1b8)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x4ea4b2=await this[_0x17065f(0x7fa)]['flow'][_0x17065f(0x640)]({'where':{'_id':_0x3f9418[_0x17065f(0x4a6)]}});if(!_0x4ea4b2||!_0x4ea4b2[_0x17065f(0x5f9)]?.[_0x17065f(0x839)](this['instance'][_0x17065f(0x547)]))throw this[_0x17065f(0x56b)]['error'](this[_0x17065f(0x6dd)]+'\x20('+this['instance'][_0x17065f(0x547)]+_0x17065f(0x792)+_0x3f9418['_id']+_0x17065f(0x1f1)),_0x3bdc1d=_0x17065f(0x526)+_0x3f9418['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo',new m(_0x3bdc1d);let _0x522c6e=await this['createConversationforStartFlow'](_0x4ea4b2,_0x540734[_0x17065f(0x5e2)],_0x1e9826['changeVariables']);if(_0x522c6e){this[_0x17065f(0x56b)][_0x17065f(0x608)](this['instanceName']+'\x20('+this['instance'][_0x17065f(0x547)]+_0x17065f(0x32b));let _0x16d952=await this[_0x17065f(0x5c2)](_0x522c6e);return _0x16d952&&await this['processblock'](_0x522c6e,_0x16d952),{'message':_0x17065f(0x874)+_0x1e9826[_0x17065f(0x509)]};}}catch(_0x255808){if(this[_0x17065f(0x56b)][_0x17065f(0x2b1)](this[_0x17065f(0x6dd)]+'\x20('+this[_0x17065f(0x3f0)][_0x17065f(0x547)]+'):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20'+(_0x255808 instanceof Error?_0x255808['message']:JSON[_0x17065f(0x179)](_0x255808,null,0x2))),_0x3bdc1d=_0x255808 instanceof Error?_0x255808[_0x17065f(0x4f4)]:JSON[_0x17065f(0x179)](_0x255808,null,0x2),_0x3bdc1d)throw new m(_0x17065f(0x172)+_0x3bdc1d);}}async[a0_0x5ca971(0x690)](_0x1e2337,_0x4510f7,_0x41f0b9){const _0x46f6ed=a0_0x5ca971;let _0x543e8e=null;try{if(!this['AutomateSystem']?.[_0x46f6ed(0x627)]['enabled'])throw new m(_0x46f6ed(0x295));if(this['logger'][_0x46f6ed(0x608)](this[_0x46f6ed(0x6dd)]+'\x20('+this['instance'][_0x46f6ed(0x547)]+'):\x20Iniciando\x20bot...'),_0x4510f7){let _0x5af447=(await this['whatsappNumber']({'numbers':[_0x4510f7]}))[0x0];if(!_0x5af447[_0x46f6ed(0x160)]&&!(0x0,w[_0x46f6ed(0x1fd)])(_0x5af447[_0x46f6ed(0x5e2)])&&!_0x5af447[_0x46f6ed(0x5e2)][_0x46f6ed(0x839)](_0x46f6ed(0x3b7)))throw _0x543e8e=JSON[_0x46f6ed(0x179)](_0x5af447,null,0x2),new m(_0x5af447);_0x4510f7=_0x5af447[_0x46f6ed(0x5e2)];}else _0x4510f7||(_0x4510f7=(0x0,Y['v4'])());let _0x3ac3da=await this[_0x46f6ed(0x7fa)][_0x46f6ed(0x6da)][_0x46f6ed(0x640)]({'where':{'_id':_0x1e2337}});if(!_0x3ac3da||!_0x3ac3da[_0x46f6ed(0x5f9)]?.['includes'](this['instance'][_0x46f6ed(0x547)]))throw this[_0x46f6ed(0x56b)]['error'](this[_0x46f6ed(0x6dd)]+'\x20('+this[_0x46f6ed(0x3f0)][_0x46f6ed(0x547)]+_0x46f6ed(0x792)+_0x1e2337+_0x46f6ed(0x1f1)),new m('Flow\x20\x27'+_0x1e2337+_0x46f6ed(0x1f1));let _0x140952=await this[_0x46f6ed(0x1dc)](_0x3ac3da,_0x4510f7,null);if(_0x140952){this[_0x46f6ed(0x56b)][_0x46f6ed(0x608)](this[_0x46f6ed(0x6dd)]+'\x20('+this[_0x46f6ed(0x3f0)][_0x46f6ed(0x547)]+'):\x20Criou\x20conversa\x20no\x20startFlowWebhook');let _0x11da08;if(_0x41f0b9){let _0xce3ee6=_0x140952['chatLog'][_0x46f6ed(0x62d)],_0x4c247f=this[_0x46f6ed(0x568)](_0x41f0b9);Object['assign'](_0xce3ee6,_0x4c247f),_0x140952[_0x46f6ed(0x61a)][_0x46f6ed(0x62d)]=_0xce3ee6,_0x11da08={'error':!0x1,'apiResponse':_0x41f0b9};}let _0x1d214e=await this[_0x46f6ed(0x5c2)](_0x140952);return _0x1d214e&&await this[_0x46f6ed(0x58b)](_0x140952,_0x1d214e),{'message':'Flow\x20iniciado'};}}catch(_0x4c8df1){if(this['logger'][_0x46f6ed(0x2b1)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20'+(_0x4c8df1 instanceof Error?_0x4c8df1[_0x46f6ed(0x4f4)]:JSON[_0x46f6ed(0x179)](_0x4c8df1,null,0x2))),_0x543e8e=_0x4c8df1 instanceof Error?_0x4c8df1[_0x46f6ed(0x4f4)]:JSON[_0x46f6ed(0x179)](_0x4c8df1,null,0x2),_0x543e8e)throw new m(_0x46f6ed(0x172)+_0x543e8e);}}async[a0_0x5ca971(0x5a4)](_0x5bcbb0){const _0x3ad113=a0_0x5ca971;try{let _0x4a65ad={'remoteJid':_0x5bcbb0,'status':_0x3ad113(0x158)},_0x44ea28={'status':'closed'},_0x2dd56a=await this['repository']['flowConversation'][_0x3ad113(0x829)](_0x4a65ad,_0x44ea28,this[_0x3ad113(0x3f0)][_0x3ad113(0x547)]);return this[_0x3ad113(0x56b)][_0x3ad113(0x608)](this[_0x3ad113(0x6dd)]+'\x20('+this[_0x3ad113(0x3f0)][_0x3ad113(0x547)]+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.'),_0x2dd56a;}catch(_0x4e2230){throw this[_0x3ad113(0x56b)][_0x3ad113(0x2b1)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20'+_0x4e2230[_0x3ad113(0x4f4)]),_0x4e2230;}}async[a0_0x5ca971(0x1dc)](_0x5ba0cd,_0x58c3a5,_0xabf89e){const _0x2e1aa2=a0_0x5ca971;this[_0x2e1aa2(0x56b)][_0x2e1aa2(0x608)](this['instanceName']+'\x20('+this[_0x2e1aa2(0x3f0)]['wuid']+_0x2e1aa2(0x544)),await this[_0x2e1aa2(0x5a4)](_0x58c3a5);try{let _0x5ed6f8=require('mongodb')['ObjectId'],_0x4728b7=Date[_0x2e1aa2(0x7d1)](),_0x2fd35c='start',_0x5dddcf={},_0x593174={},_0x31d671=this['AutomateSystem'][_0x2e1aa2(0x557)][_0x2e1aa2(0x2d4)](_0x5cd46d=>_0x5cd46d[_0x2e1aa2(0x4a6)]===_0x5ba0cd['_id']?.[_0x2e1aa2(0x7b1)]()),_0x5b26d1=_0x31d671?.[_0x2e1aa2(0x468)]??_0x5ba0cd[_0x2e1aa2(0x468)]??0x0,_0x569ecc=_0x31d671?.[_0x2e1aa2(0x1ed)]??_0x5ba0cd[_0x2e1aa2(0x1ed)]??!0x1,_0x11aa9b={'flowId':_0x5ba0cd[_0x2e1aa2(0x4a6)],..._0x5ba0cd,'chatLog':null},_0x1493a0=await this[_0x2e1aa2(0x353)](_0x11aa9b[_0x2e1aa2(0x168)]),_0x3bbef2=await this[_0x2e1aa2(0x1f8)](_0x58c3a5),_0x8784cf={..._0x1493a0,..._0x3bbef2,'_remoteJid':_0x58c3a5},_0x5ac4ec={'lastReceivedMessage':_0x5dddcf,'lastSendMessage':_0x593174,'lastBlockId':_0x2fd35c,'lastCondition':!0x0,'realVariables':_0x8784cf};_0x11aa9b[_0x2e1aa2(0x61a)]=_0x5ac4ec,_0x11aa9b[_0x2e1aa2(0x61a)][_0x2e1aa2(0x62d)]={..._0x8784cf,..._0xabf89e},delete _0x11aa9b[_0x2e1aa2(0x4a6)],_0x11aa9b['_id']=new _0x5ed6f8(),_0x11aa9b[_0x2e1aa2(0x345)]=_0x4728b7,_0x11aa9b['status']='open',_0x11aa9b[_0x2e1aa2(0x509)]=_0x58c3a5,_0x11aa9b[_0x2e1aa2(0x468)]=_0x5b26d1,_0x11aa9b[_0x2e1aa2(0x1ed)]=_0x569ecc,_0x11aa9b[_0x2e1aa2(0x4a6)]=_0x5ba0cd[_0x2e1aa2(0x4a6)];let _0x55a9e3=await this[_0x2e1aa2(0x7fa)][_0x2e1aa2(0x174)][_0x2e1aa2(0x743)](_0x11aa9b['_id'],_0x11aa9b,this[_0x2e1aa2(0x3f0)][_0x2e1aa2(0x547)]);return this[_0x2e1aa2(0x56b)][_0x2e1aa2(0x608)](this[_0x2e1aa2(0x6dd)]+'\x20('+this[_0x2e1aa2(0x3f0)][_0x2e1aa2(0x547)]+_0x2e1aa2(0x298)),_0x55a9e3?_0x11aa9b:null;}catch(_0x43261f){let _0x366769=_0x2e1aa2(0x4e7),_0x476310=_0x43261f instanceof Error?_0x43261f['message']:typeof _0x43261f==_0x2e1aa2(0x487)?JSON[_0x2e1aa2(0x179)](_0x43261f):_0x43261f,_0x10cf6a=_0x366769+':\x20'+_0x476310;throw this[_0x2e1aa2(0x56b)]['error'](this[_0x2e1aa2(0x6dd)]+'\x20('+this[_0x2e1aa2(0x3f0)][_0x2e1aa2(0x547)]+_0x2e1aa2(0x3a3)+_0x10cf6a),new m(_0x10cf6a);}}async[a0_0x5ca971(0x531)](_0x3b7daf){const _0xb9bc24=a0_0x5ca971;try{this[_0xb9bc24(0x56b)][_0xb9bc24(0x608)](this[_0xb9bc24(0x6dd)]+'\x20('+this[_0xb9bc24(0x3f0)]['wuid']+_0xb9bc24(0x862)),this[_0xb9bc24(0x56b)][_0xb9bc24(0x608)](this[_0xb9bc24(0x6dd)]+'\x20('+this['instance'][_0xb9bc24(0x547)]+_0xb9bc24(0x182)+_0x3b7daf);let _0x12d727={'where':{'_id':_0x3b7daf}};return await this[_0xb9bc24(0x7fa)][_0xb9bc24(0x174)][_0xb9bc24(0x640)](_0x12d727,this[_0xb9bc24(0x3f0)][_0xb9bc24(0x547)]);}catch(_0x3f031d){let _0x4b1174=_0xb9bc24(0x855),_0x18bf7e=_0x3f031d instanceof Error?_0x3f031d[_0xb9bc24(0x4f4)]:typeof _0x3f031d==_0xb9bc24(0x487)?JSON['stringify'](_0x3f031d):_0x3f031d,_0x5de92d=_0x4b1174+':\x20'+_0x18bf7e;throw this[_0xb9bc24(0x56b)]['error'](this[_0xb9bc24(0x6dd)]+'\x20('+this[_0xb9bc24(0x3f0)]['wuid']+_0xb9bc24(0x3a3)+_0x5de92d),new m(_0x5de92d);}}async['fetchConversation'](_0x4b5de6){const _0x174bb0=a0_0x5ca971;try{return this['logger'][_0x174bb0(0x608)](this[_0x174bb0(0x6dd)]+'\x20('+this[_0x174bb0(0x3f0)][_0x174bb0(0x547)]+_0x174bb0(0x310)),await this[_0x174bb0(0x7fa)][_0x174bb0(0x174)]['find'](_0x4b5de6,this[_0x174bb0(0x3f0)]['wuid']);}catch(_0x41ed56){let _0x5937b6=_0x174bb0(0x22e),_0x5b0315=_0x41ed56 instanceof Error?_0x41ed56[_0x174bb0(0x4f4)]:typeof _0x41ed56==_0x174bb0(0x487)?JSON[_0x174bb0(0x179)](_0x41ed56):_0x41ed56,_0x58f5d1=_0x5937b6+':\x20'+_0x5b0315;throw this[_0x174bb0(0x56b)][_0x174bb0(0x2b1)](this['instanceName']+'\x20('+this['instance'][_0x174bb0(0x547)]+_0x174bb0(0x3a3)+_0x58f5d1),new m(_0x58f5d1);}}async['deleteConversation'](_0x5dc3c1){const _0x4aae2c=a0_0x5ca971;try{return this[_0x4aae2c(0x56b)][_0x4aae2c(0x608)](this[_0x4aae2c(0x6dd)]+'\x20('+this[_0x4aae2c(0x3f0)][_0x4aae2c(0x547)]+_0x4aae2c(0x16a)),this[_0x4aae2c(0x56b)]['verbose'](this[_0x4aae2c(0x6dd)]+'\x20('+this[_0x4aae2c(0x3f0)][_0x4aae2c(0x547)]+_0x4aae2c(0x2ef)+_0x5dc3c1),(await this[_0x4aae2c(0x7fa)][_0x4aae2c(0x174)][_0x4aae2c(0x631)]({'where':{'_id':_0x5dc3c1[_0x4aae2c(0x4a6)]}},this[_0x4aae2c(0x3f0)][_0x4aae2c(0x547)]))['deletedCount']===0x0?{'message':'Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.'}:{'message':_0x4aae2c(0x4fb)};}catch(_0x4d53c7){let _0x152e19=_0x4aae2c(0x3af),_0x3ba03d=_0x4d53c7 instanceof Error?_0x4d53c7[_0x4aae2c(0x4f4)]:typeof _0x4d53c7==_0x4aae2c(0x487)?JSON[_0x4aae2c(0x179)](_0x4d53c7):_0x4d53c7,_0x29dfbc=_0x152e19+':\x20'+_0x3ba03d;throw this[_0x4aae2c(0x56b)]['error'](this['instanceName']+'\x20('+this['instance'][_0x4aae2c(0x547)]+_0x4aae2c(0x3a3)+_0x29dfbc),new m(_0x29dfbc);}}async[a0_0x5ca971(0x236)](_0x52e448){const _0x1b97df=a0_0x5ca971;try{let {_id:_0x35f03e,chatLog:_0x36cb98,status:_0x5112e3}=_0x52e448;if(!_0x35f03e)return{'message':_0x1b97df(0x810)};let _0x3432af={};if(_0x5112e3!==void 0x0&&(_0x3432af[_0x1b97df(0x2f7)]=_0x5112e3),Object[_0x1b97df(0x418)](_0x3432af)['length']===0x0)return{'message':_0x1b97df(0x191)};let _0x18690b=await this['repository']['flowConversation']['updateOne'](_0x35f03e,_0x3432af,this[_0x1b97df(0x3f0)][_0x1b97df(0x547)]);return _0x18690b||{'message':_0x1b97df(0x687)};}catch(_0x3d44d2){let _0x2f281a=_0x1b97df(0x2d7),_0x2cb713=_0x3d44d2 instanceof Error?_0x3d44d2[_0x1b97df(0x4f4)]:typeof _0x3d44d2==_0x1b97df(0x487)?JSON[_0x1b97df(0x179)](_0x3d44d2):_0x3d44d2,_0xf3a917=_0x2f281a+':\x20'+_0x2cb713;throw this[_0x1b97df(0x56b)][_0x1b97df(0x2b1)](this[_0x1b97df(0x6dd)]+'\x20('+this[_0x1b97df(0x3f0)][_0x1b97df(0x547)]+_0x1b97df(0x3a3)+_0xf3a917),new m(_0xf3a917);}}async['editChat'](_0x397a88){const _0x4f8f14=a0_0x5ca971;try{_0x397a88[_0x4f8f14(0x4a6)]=this['createJid'](_0x397a88[_0x4f8f14(0x4a6)]);let _0x42a0ee=await this[_0x4f8f14(0x7fa)][_0x4f8f14(0x739)]['findOne']({'where':{'_id':_0x397a88[_0x4f8f14(0x4a6)]}},this[_0x4f8f14(0x3f0)][_0x4f8f14(0x547)]);if(!_0x42a0ee)throw new m(_0x4f8f14(0x761));let {_id:_0x125457,leadInfo:_0x2b5fc4}=_0x397a88;if(!_0x125457)throw new Error(_0x4f8f14(0x771));if(_0x397a88[_0x4f8f14(0x8a2)]===_0x4f8f14(0x6de))return await this[_0x4f8f14(0x152)](_0x397a88['_id']),await this[_0x4f8f14(0x7fa)][_0x4f8f14(0x739)][_0x4f8f14(0x8a2)]({'where':{'_id':_0x397a88[_0x4f8f14(0x4a6)]}},this['instance'][_0x4f8f14(0x547)]),await this[_0x4f8f14(0x7fa)][_0x4f8f14(0x4f4)][_0x4f8f14(0x8a2)]({'where':{'key':{'remoteJid':_0x397a88[_0x4f8f14(0x4a6)]}}},this[_0x4f8f14(0x3f0)][_0x4f8f14(0x547)]),_0x397a88=await this[_0x4f8f14(0x7fa)][_0x4f8f14(0x739)][_0x4f8f14(0x743)]({'where':{'_id':_0x397a88[_0x4f8f14(0x4a6)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x4f8f14(0x3f0)][_0x4f8f14(0x547)]),V(this['instanceName'],_0x4f8f14(0x795),{'chat':_0x397a88}),{'message':_0x4f8f14(0x66e)};if(_0x397a88[_0x4f8f14(0x8a2)]==='messages')return await this['repository'][_0x4f8f14(0x4f4)][_0x4f8f14(0x8a2)]({'where':{'key':{'remoteJid':_0x397a88['_id']}}},this[_0x4f8f14(0x3f0)]['wuid']),_0x397a88=await this[_0x4f8f14(0x7fa)][_0x4f8f14(0x739)][_0x4f8f14(0x743)]({'where':{'_id':_0x397a88[_0x4f8f14(0x4a6)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x4f8f14(0x3f0)][_0x4f8f14(0x547)]),V(this[_0x4f8f14(0x6dd)],_0x4f8f14(0x795),{'chat':_0x397a88}),{'message':_0x4f8f14(0x6b6)};let _0x89bbcb=(_0x4411f1,_0x12e89d,_0x4f17a8)=>{const _0x447d4b=_0x4f8f14;_0x4411f1&&_0x4f17a8[_0x447d4b(0x491)](_0x566891=>{_0x4411f1[_0x566891]!==void 0x0&&(_0x12e89d['leadInfo.'+_0x566891]=_0x4411f1[_0x566891]);});},_0x454c83={};if(_0x4f8f14(0x2a8)in _0x397a88&&(this[_0x4f8f14(0x56b)][_0x4f8f14(0x608)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4f8f14(0x804)+_0x397a88[_0x4f8f14(0x4a6)]),_0x397a88['muteEndTime']=_0x397a88[_0x4f8f14(0x2a8)]===0x0?null:-0x1,await this[_0x4f8f14(0x2cc)][_0x4f8f14(0x2f9)]({'mute':_0x397a88[_0x4f8f14(0x2a8)]},_0x397a88[_0x4f8f14(0x4a6)]),_0x454c83['muteEndTime']=Number(_0x397a88[_0x4f8f14(0x2a8)])),_0x2b5fc4&&(_0x89bbcb(_0x2b5fc4,_0x454c83,[_0x4f8f14(0x207),_0x4f8f14(0x4fc),_0x4f8f14(0x428),_0x4f8f14(0x506),'status',_0x4f8f14(0x198),_0x4f8f14(0x742),_0x4f8f14(0x3aa),'responsavelid',_0x4f8f14(0x5e1),'desativadoFluxoAte']),Array[_0x4f8f14(0x4d0)](_0x2b5fc4[_0x4f8f14(0x85a)])&&(_0x454c83['leadInfo.customFields']=_0x2b5fc4[_0x4f8f14(0x85a)][_0x4f8f14(0x7a8)](_0x34d04c=>({'_id':_0x34d04c[_0x4f8f14(0x4a6)],'value':_0x34d04c[_0x4f8f14(0x5d4)]}))),_0x397a88[_0x4f8f14(0x341)][_0x4f8f14(0x5e1)]!==void 0x0)){let _0x36e906=await this['repository'][_0x4f8f14(0x750)]['find']({'where':{}},this[_0x4f8f14(0x3f0)][_0x4f8f14(0x547)]),_0x282bf5=new Set(_0x397a88[_0x4f8f14(0x341)][_0x4f8f14(0x5e1)]||[]),_0x39716f=new Set(_0x397a88['leadInfo'][_0x4f8f14(0x5e1)]),_0x5d39ca=new Set(_0x36e906[_0x4f8f14(0x7a8)](_0x5f36c8=>_0x5f36c8['_id'])),_0x17bf5a=[..._0x39716f][_0x4f8f14(0x587)](_0x5a43fe=>!_0x282bf5[_0x4f8f14(0x64e)](_0x5a43fe)&&_0x5d39ca['has'](_0x5a43fe)),_0x156207=[..._0x282bf5][_0x4f8f14(0x587)](_0x3da660=>!_0x39716f[_0x4f8f14(0x64e)](_0x3da660));if(_0x454c83[_0x4f8f14(0x154)]=[..._0x282bf5],_0x42a0ee&&!_0x42a0ee[_0x4f8f14(0x4e9)]){for(let _0x4e077c of _0x17bf5a)await this[_0x4f8f14(0x36e)](_0x4e077c,_0x397a88[_0x4f8f14(0x4a6)]),_0x282bf5[_0x4f8f14(0x3fc)](_0x4e077c);for(let _0x565522 of _0x156207)await this['RemoveChatLabel'](_0x565522,_0x397a88[_0x4f8f14(0x4a6)]),_0x282bf5['delete'](_0x565522);}}if(_0x397a88[_0x4f8f14(0x87f)]!==void 0x0&&(_0x454c83[_0x4f8f14(0x87f)]=Number(_0x397a88[_0x4f8f14(0x87f)])),Object[_0x4f8f14(0x418)](_0x454c83)['length']===0x0)throw new Error('Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.');let _0xfe564d=await this['repository']['chat'][_0x4f8f14(0x743)]({'where':{'_id':_0x397a88['_id']}},_0x454c83,this[_0x4f8f14(0x3f0)][_0x4f8f14(0x547)]);return _0xfe564d&&V(this[_0x4f8f14(0x6dd)],'chats',{'chat':_0xfe564d}),_0xfe564d?(this[_0x4f8f14(0x56b)][_0x4f8f14(0x608)](this[_0x4f8f14(0x6dd)]+'\x20('+this[_0x4f8f14(0x3f0)][_0x4f8f14(0x547)]+_0x4f8f14(0x3a3)+JSON[_0x4f8f14(0x179)](_0xfe564d,null,0x2)),_0xfe564d):{'message':_0x4f8f14(0x25a)};}catch(_0x3fd612){let _0x90ce4c=_0x4f8f14(0x6cd),_0x49ff04=_0x3fd612 instanceof Error?_0x3fd612['message']:typeof _0x3fd612==_0x4f8f14(0x487)?JSON[_0x4f8f14(0x179)](_0x3fd612):_0x3fd612,_0x2c8299=_0x90ce4c+':\x20'+_0x49ff04;throw this[_0x4f8f14(0x56b)]['error'](this[_0x4f8f14(0x6dd)]+'\x20('+this[_0x4f8f14(0x3f0)][_0x4f8f14(0x547)]+_0x4f8f14(0x3a3)+_0x2c8299),new m(_0x2c8299);}}async[a0_0x5ca971(0x36e)](_0x55c8c9,_0x30955b){const _0x451bef=a0_0x5ca971;try{await this['client'][_0x451bef(0x50b)](_0x30955b,_0x55c8c9),this[_0x451bef(0x56b)][_0x451bef(0x1d2)](this['instanceName']+'\x20('+this['instance'][_0x451bef(0x547)]+_0x451bef(0x24f)+_0x55c8c9+_0x451bef(0x26d)+_0x30955b+_0x451bef(0x37f));}catch(_0x2bd166){this[_0x451bef(0x56b)][_0x451bef(0x2b1)](_0x451bef(0x71f)+_0x55c8c9+_0x451bef(0x84d)+_0x30955b+':\x20'+_0x2bd166);}}async[a0_0x5ca971(0x485)](_0x41d8c4,_0x35a3e4){const _0x120746=a0_0x5ca971;try{await this['client'][_0x120746(0x6a1)](_0x35a3e4,_0x41d8c4),this[_0x120746(0x56b)][_0x120746(0x1d2)](this['instanceName']+'\x20('+this['instance'][_0x120746(0x547)]+'):\x20Label\x20'+_0x41d8c4+_0x120746(0x332)+_0x35a3e4+_0x120746(0x37f));}catch(_0x32f9b9){this[_0x120746(0x56b)][_0x120746(0x2b1)](_0x120746(0x215)+_0x41d8c4+_0x120746(0x3d1)+_0x35a3e4+':\x20'+_0x32f9b9);}}async[a0_0x5ca971(0x263)](_0x490735){const _0x5e4008=a0_0x5ca971;try{let _0x2bf03b=await this[_0x5e4008(0x7fa)][_0x5e4008(0x797)][_0x5e4008(0x4f9)](this[_0x5e4008(0x3f0)][_0x5e4008(0x547)]),_0x376f81=_0x490735[_0x5e4008(0x4a6)]?_0x2bf03b[_0x5e4008(0x3d6)]['findIndex'](_0x200d76=>_0x200d76['_id']===_0x490735['_id']):-0x1;if(_0x490735['delete']&&_0x376f81>-0x1)_0x2bf03b[_0x5e4008(0x3d6)][_0x5e4008(0x307)](_0x376f81,0x1);else{if(_0x376f81>-0x1){let _0x4762ae=_0x2bf03b[_0x5e4008(0x3d6)][_0x376f81];_0x490735[_0x5e4008(0x500)]&&(_0x4762ae['fone']=_0x490735[_0x5e4008(0x500)]),_0x490735[_0x5e4008(0x41c)]&&(_0x4762ae['name']=_0x490735[_0x5e4008(0x41c)]),_0x490735[_0x5e4008(0x428)]&&(_0x4762ae[_0x5e4008(0x428)]=_0x490735[_0x5e4008(0x428)]),_0x490735[_0x5e4008(0x148)]&&(_0x4762ae[_0x5e4008(0x148)]=_0x490735[_0x5e4008(0x148)]);}else _0x2bf03b['agents'][_0x5e4008(0x59a)]({'_id':_0x490735[_0x5e4008(0x4a6)]||new fe[(_0x5e4008(0x678))][(_0x5e4008(0x1ae))]['ObjectId']()[_0x5e4008(0x7b1)](),'fone':_0x490735[_0x5e4008(0x500)],'name':_0x490735[_0x5e4008(0x41c)],'email':_0x490735[_0x5e4008(0x428)],'role':_0x490735[_0x5e4008(0x148)]});}let _0x5301da={'agents':_0x2bf03b[_0x5e4008(0x3d6)]},_0x1c5fc8=await this['repository'][_0x5e4008(0x797)]['update'](_0x5301da,this[_0x5e4008(0x3f0)][_0x5e4008(0x547)]);return this[_0x5e4008(0x755)]=_0x1c5fc8,this[_0x5e4008(0x56b)][_0x5e4008(0x608)](this['instanceName']+'\x20('+this[_0x5e4008(0x3f0)][_0x5e4008(0x547)]+_0x5e4008(0x177)),this[_0x5e4008(0x56b)][_0x5e4008(0x608)](this[_0x5e4008(0x6dd)]+'\x20('+this['instance'][_0x5e4008(0x547)]+'):\x20'+this[_0x5e4008(0x755)]),_0x1c5fc8;}catch(_0x5dfb88){let _0x7170eb='Erro\x20ao\x20editar\x20agentes',_0x5b4a8f=_0x5dfb88 instanceof Error?_0x5dfb88['message']:typeof _0x5dfb88=='object'?JSON['stringify'](_0x5dfb88):_0x5dfb88,_0x3e4a35=_0x7170eb+':\x20'+_0x5b4a8f;throw this['logger']['error'](this[_0x5e4008(0x6dd)]+'\x20('+this[_0x5e4008(0x3f0)][_0x5e4008(0x547)]+_0x5e4008(0x3a3)+_0x3e4a35),new m(_0x3e4a35);}}async['updateCustomFields'](_0x2f831c){const _0x688a4b=a0_0x5ca971;try{let _0x1de288=await this[_0x688a4b(0x7fa)]['automateSystem'][_0x688a4b(0x4f9)](this[_0x688a4b(0x3f0)]['wuid']),_0x4442e3=_0x2f831c['_id']?_0x1de288['customFields'][_0x688a4b(0x447)](_0x74761d=>_0x74761d[_0x688a4b(0x4a6)]===_0x2f831c[_0x688a4b(0x4a6)]):-0x1,_0x1713f5=!0x1,_0x16617e=_0x1de288['customFields'][_0x688a4b(0x606)](_0x1918c7=>_0x1918c7[_0x688a4b(0x30f)]===_0x2f831c['order']);if(_0x2f831c[_0x688a4b(0x8a2)]&&_0x4442e3>-0x1)_0x1de288['customFields'][_0x688a4b(0x307)](_0x4442e3,0x1),_0x1713f5=!0x0;else{if(_0x4442e3>-0x1){if(_0x1de288['customFields'][_0x688a4b(0x606)](_0x1acb27=>_0x1acb27[_0x688a4b(0x41c)]===_0x2f831c[_0x688a4b(0x41c)]&&_0x1acb27['_id']!==_0x2f831c[_0x688a4b(0x4a6)]))throw new Error('Nome\x20do\x20campo\x20personalizado\x20já\x20existe.');let _0x28e760=_0x1de288['customFields'][_0x4442e3];_0x2f831c[_0x688a4b(0x30f)]&&(_0x16617e||!Number[_0x688a4b(0x65b)](_0x2f831c['order']))&&(_0x28e760[_0x688a4b(0x30f)]=_0x2f831c[_0x688a4b(0x30f)],_0x1713f5=!0x0),_0x2f831c[_0x688a4b(0x41c)]&&(_0x28e760['name']=_0x2f831c[_0x688a4b(0x41c)]);}else{if(_0x1de288['customFields'][_0x688a4b(0x606)](_0x2951fd=>_0x2951fd[_0x688a4b(0x41c)]===_0x2f831c['name']&&_0x2951fd['_id']!==_0x2f831c[_0x688a4b(0x4a6)]))throw new Error(_0x688a4b(0x55c));_0x1de288[_0x688a4b(0x85a)][_0x688a4b(0x59a)]({'_id':_0x2f831c['_id']||new fe[(_0x688a4b(0x678))][(_0x688a4b(0x1ae))][(_0x688a4b(0x1a3))]()[_0x688a4b(0x7b1)](),'order':_0x2f831c['order'],'name':_0x2f831c['name']}),_0x1713f5=!0x0;}}if(_0x1713f5){_0x1de288['customFields']['sort']((_0x11898e,_0x4ea3fa)=>_0x11898e[_0x688a4b(0x30f)]>_0x4ea3fa[_0x688a4b(0x30f)]?0x1:_0x4ea3fa[_0x688a4b(0x30f)]>_0x11898e[_0x688a4b(0x30f)]?-0x1:0x0);for(let _0x508232=0x0;_0x508232<_0x1de288[_0x688a4b(0x85a)][_0x688a4b(0x532)];_0x508232++)_0x1de288[_0x688a4b(0x85a)][_0x508232][_0x688a4b(0x30f)]=_0x508232+0x1;}let _0x249c2b=await this[_0x688a4b(0x7fa)][_0x688a4b(0x797)]['update'](_0x1de288,this[_0x688a4b(0x3f0)][_0x688a4b(0x547)]);return this[_0x688a4b(0x755)]=_0x249c2b,this[_0x688a4b(0x56b)][_0x688a4b(0x608)](this[_0x688a4b(0x6dd)]+'\x20('+this[_0x688a4b(0x3f0)]['wuid']+'):\x20debug\x20alterando\x20this.AutomateSystem'),this['logger']['verbose'](this[_0x688a4b(0x6dd)]+'\x20('+this[_0x688a4b(0x3f0)][_0x688a4b(0x547)]+'):\x20'+this[_0x688a4b(0x755)]),_0x249c2b;}catch(_0x57bc20){let _0x14432e=_0x688a4b(0x824),_0x1e7873=_0x57bc20 instanceof Error?_0x57bc20[_0x688a4b(0x4f4)]:typeof _0x57bc20==_0x688a4b(0x487)?JSON['stringify'](_0x57bc20):_0x57bc20,_0x2f7fb0=_0x14432e+':\x20'+_0x1e7873;throw this['logger'][_0x688a4b(0x2b1)](this[_0x688a4b(0x6dd)]+'\x20('+this['instance'][_0x688a4b(0x547)]+_0x688a4b(0x3a3)+_0x2f7fb0),new m(_0x2f7fb0);}}async[a0_0x5ca971(0x628)](_0x1c1648){const _0x77b9be=a0_0x5ca971;try{let _0x3abf88=await this[_0x77b9be(0x7fa)][_0x77b9be(0x797)]['findOrCreate'](this[_0x77b9be(0x3f0)][_0x77b9be(0x547)]),_0x445b02=_0x3abf88?.[_0x77b9be(0x57f)]?.[_0x77b9be(0x447)](_0x5f9854=>_0x5f9854[_0x77b9be(0x4a6)]===_0x1c1648?.[_0x77b9be(0x4a6)]);if(_0x1c1648?.[_0x77b9be(0x8a2)])_0x445b02>-0x1&&_0x3abf88?.[_0x77b9be(0x57f)]?.[_0x77b9be(0x307)](_0x445b02,0x1);else{if(_0x445b02>-0x1){let _0x3d40d8=_0x3abf88[_0x77b9be(0x57f)][_0x445b02];_0x3d40d8[_0x77b9be(0x30f)]=_0x1c1648?.['order']||_0x3d40d8[_0x77b9be(0x30f)],_0x3d40d8[_0x77b9be(0x822)]=_0x1c1648?.[_0x77b9be(0x822)]||_0x3d40d8[_0x77b9be(0x822)],_0x3d40d8[_0x77b9be(0x4f4)]=_0x1c1648?.[_0x77b9be(0x4f4)]||_0x3d40d8[_0x77b9be(0x4f4)];}else{let _0x20ba6f={'_id':_0x1c1648?.[_0x77b9be(0x4a6)]||new fe[(_0x77b9be(0x678))]['Types'][(_0x77b9be(0x1a3))]()[_0x77b9be(0x7b1)](),'order':_0x1c1648?.[_0x77b9be(0x30f)],'command':_0x1c1648?.[_0x77b9be(0x822)],'message':_0x1c1648?.[_0x77b9be(0x4f4)]};_0x3abf88?.['autoCompleteMessages']?.[_0x77b9be(0x59a)](_0x20ba6f);}}_0x3abf88?.['autoCompleteMessages']?.[_0x77b9be(0x1ba)]((_0x1e77dd,_0x341464)=>_0x1e77dd[_0x77b9be(0x30f)]-_0x341464[_0x77b9be(0x30f)]);let _0x2b38bc=await this[_0x77b9be(0x7fa)]['automateSystem'][_0x77b9be(0x26b)](_0x3abf88,this[_0x77b9be(0x3f0)][_0x77b9be(0x547)]);return this[_0x77b9be(0x755)]=_0x2b38bc,this[_0x77b9be(0x56b)][_0x77b9be(0x608)](this[_0x77b9be(0x6dd)]+'\x20('+this['instance'][_0x77b9be(0x547)]+_0x77b9be(0x208)),_0x2b38bc;}catch(_0xa69be0){let _0x18b01a='Erro\x20ao\x20tentar\x20autoCompleteMessages',_0x4b42ac=_0xa69be0 instanceof Error?_0xa69be0['message']:typeof _0xa69be0=='object'?JSON[_0x77b9be(0x179)](_0xa69be0):_0xa69be0,_0x4a50e4=_0x18b01a+':\x20'+_0x4b42ac;throw this[_0x77b9be(0x56b)]['error'](this[_0x77b9be(0x6dd)]+'\x20('+this[_0x77b9be(0x3f0)][_0x77b9be(0x547)]+_0x77b9be(0x3a3)+_0x4a50e4),new m(_0x4a50e4);}}async[a0_0x5ca971(0x6c0)](_0x1b7762){const _0x412807=a0_0x5ca971;try{let _0x40129c=await this[_0x412807(0x7fa)][_0x412807(0x797)]['findOrCreate'](this[_0x412807(0x3f0)][_0x412807(0x547)]);if(!_0x40129c)throw new Error('Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.');let _0x36a33a={'_id':_0x40129c[_0x412807(0x4a6)],'flowConfig':{'enabled':_0x1b7762['enabled']??_0x40129c[_0x412807(0x627)]['enabled'],'ignoreGroups':_0x1b7762[_0x412807(0x845)]??_0x40129c['flowConfig']['ignoreGroups'],'stopConversation':_0x1b7762[_0x412807(0x524)][_0x412807(0x56d)]()??_0x40129c[_0x412807(0x627)][_0x412807(0x524)][_0x412807(0x56d)](),'stopMinutes':_0x1b7762[_0x412807(0x72e)]??_0x40129c[_0x412807(0x627)]['stopMinutes'],'stopWhenYouSendMsg':_0x1b7762[_0x412807(0x28d)]??_0x40129c[_0x412807(0x627)]['stopWhenYouSendMsg']}},_0x11d561=await this[_0x412807(0x7fa)][_0x412807(0x797)]['update'](_0x36a33a,this[_0x412807(0x3f0)][_0x412807(0x547)]);return this[_0x412807(0x755)]=_0x11d561,this[_0x412807(0x56b)][_0x412807(0x608)](this[_0x412807(0x6dd)]+'\x20('+this[_0x412807(0x3f0)][_0x412807(0x547)]+'):\x20alterando\x20this.AutomateSystem'),this[_0x412807(0x56b)][_0x412807(0x608)](this['instanceName']+'\x20('+this[_0x412807(0x3f0)]['wuid']+_0x412807(0x3a3)+this[_0x412807(0x755)]),setTimeout(()=>this[_0x412807(0x77b)](),0x7d0),_0x11d561;}catch(_0x106eee){let _0x4a7018=_0x412807(0x63b),_0x3e85c8=_0x106eee instanceof Error?_0x106eee[_0x412807(0x4f4)]:typeof _0x106eee==_0x412807(0x487)?JSON[_0x412807(0x179)](_0x106eee):_0x106eee,_0x43cfb=_0x4a7018+':\x20'+_0x3e85c8;throw this[_0x412807(0x56b)][_0x412807(0x2b1)](this['instanceName']+'\x20('+this[_0x412807(0x3f0)][_0x412807(0x547)]+_0x412807(0x3a3)+_0x43cfb),new m(_0x43cfb);}}async[a0_0x5ca971(0x2b9)](){const _0x8776f7=a0_0x5ca971;try{let _0xb7167a=await this[_0x8776f7(0x7fa)][_0x8776f7(0x797)][_0x8776f7(0x4f9)](this[_0x8776f7(0x3f0)][_0x8776f7(0x547)]);return this['AutomateSystem']=_0xb7167a,_0xb7167a;}catch(_0x76acfc){let _0x5e4174='Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem',_0x1886fa=_0x76acfc instanceof Error?_0x76acfc[_0x8776f7(0x4f4)]:typeof _0x76acfc==_0x8776f7(0x487)?JSON['stringify'](_0x76acfc):_0x76acfc,_0x531eb7=_0x5e4174+':\x20'+_0x1886fa;throw this[_0x8776f7(0x56b)]['error'](this[_0x8776f7(0x6dd)]+'\x20('+this[_0x8776f7(0x3f0)]['wuid']+_0x8776f7(0x3a3)+_0x531eb7),new m(_0x531eb7);}}async[a0_0x5ca971(0x358)](){const _0x14e3a3=a0_0x5ca971;this[_0x14e3a3(0x3f0)]['ScheduleMessage']['timeout']&&clearTimeout(this[_0x14e3a3(0x3f0)][_0x14e3a3(0x3e9)][_0x14e3a3(0x515)]),this[_0x14e3a3(0x3f0)][_0x14e3a3(0x3e9)][_0x14e3a3(0x515)]=setTimeout(()=>{const _0x2d0cac=_0x14e3a3;this[_0x2d0cac(0x60a)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x5ca971(0x60a)](){const _0x2f2b0c=a0_0x5ca971;Date['now']()-this[_0x2f2b0c(0x3f0)][_0x2f2b0c(0x3e9)][_0x2f2b0c(0x39e)]>=0x1d4c0&&(this[_0x2f2b0c(0x56b)][_0x2f2b0c(0x608)](this['instanceName']+'\x20('+this[_0x2f2b0c(0x3f0)][_0x2f2b0c(0x547)]+'):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.'),this['instance']['ScheduleMessage'][_0x2f2b0c(0x714)]=null,this['instance'][_0x2f2b0c(0x3e9)][_0x2f2b0c(0x39e)]=0x0,this['instance'][_0x2f2b0c(0x3e9)][_0x2f2b0c(0x60d)]=0x0,this[_0x2f2b0c(0x1de)]=null,this[_0x2f2b0c(0x1af)]=null,await this['scheduleNextCheck']());}async['scheduleNextCheck'](){const _0x37cbb2=a0_0x5ca971;let _0x304365=!0x1;this[_0x37cbb2(0x450)]=[],this['nextMessageId']=null,this['processUUID']=(0x0,Y['v4'])(),await this[_0x37cbb2(0x35a)]();let _0x3140c2=()=>{const _0xb206d2=_0x37cbb2;this[_0xb206d2(0x56b)]['verbose'](this[_0xb206d2(0x6dd)]+'\x20('+this['instance'][_0xb206d2(0x547)]+_0xb206d2(0x728)+this[_0xb206d2(0x3f0)]['ScheduleMessage']['processingGroup_id']+_0xb206d2(0x615));},_0x50e472=async()=>{const _0x5959cb=_0x37cbb2;this[_0x5959cb(0x56b)][_0x5959cb(0x608)](this[_0x5959cb(0x6dd)]+'\x20('+this[_0x5959cb(0x3f0)][_0x5959cb(0x547)]+'):\x20Procurando\x20mensagens\x20para\x20envio');let _0x5e8cba=new Date(Date[_0x5959cb(0x7d1)]()-0xc*0x3c*0x3c*0x3e8),_0x5327d9={'where':{'status':{'$in':[_0x5959cb(0x347),_0x5959cb(0x5bf)]},'$or':[{'when':{'$lte':new Date(),'$gte':_0x5e8cba}},{'when':0x0}]}},_0x2d46b0=await this[_0x5959cb(0x7fa)]['scheduleMessage']['find'](_0x5327d9,this[_0x5959cb(0x3f0)][_0x5959cb(0x547)]);return this[_0x5959cb(0x56b)][_0x5959cb(0x608)](this[_0x5959cb(0x6dd)]+'\x20('+this[_0x5959cb(0x3f0)][_0x5959cb(0x547)]+'):\x20Mensagens\x20prontas\x20para\x20envio\x20encontradas:\x20'+_0x2d46b0['length']),_0x2d46b0;},_0x3bcfec=async _0x45a047=>{const _0x470c69=_0x37cbb2;let _0x563423=await this[_0x470c69(0x7fa)][_0x470c69(0x43e)][_0x470c69(0x24c)](_0x45a047,this[_0x470c69(0x3f0)]['wuid']);return this[_0x470c69(0x450)]=_0x563423[_0x470c69(0x873)][_0x470c69(0x587)](_0x3559b5=>!_0x3559b5[_0x470c69(0x82c)]),this[_0x470c69(0x450)][_0x470c69(0x532)]===0x0?null:this[_0x470c69(0x450)][_0x470c69(0x1a4)]((_0x2b1801,_0x50bb06)=>(_0x2b1801[_0x470c69(0x30f)]??Number[_0x470c69(0x7a7)])<(_0x50bb06[_0x470c69(0x30f)]??Number[_0x470c69(0x7a7)])?_0x2b1801:_0x50bb06,this[_0x470c69(0x450)][0x0]);},_0x3da4d2=async _0x4191b2=>{const _0x167721=_0x37cbb2;let _0x11c911=Math['floor'](Math['random']()*0x1389)+0xbb8;for(let _0x313867 of _0x4191b2){let _0x2e50d4={'_id':_0x313867[_0x167721(0x4a6)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date['now']()-0x2710}}]},_0x1d93b3={'startSend':Date[_0x167721(0x7d1)](),'processUUID':this['processUUID']};if(!await this[_0x167721(0x7fa)][_0x167721(0x43e)][_0x167721(0x743)](_0x2e50d4,_0x1d93b3,this[_0x167721(0x3f0)][_0x167721(0x547)]))return;if(!this[_0x167721(0x3f0)][_0x167721(0x3e9)]['isConnected']){this[_0x167721(0x56b)][_0x167721(0x608)](this['instanceName']+'\x20('+this[_0x167721(0x3f0)]['wuid']+_0x167721(0x2c2));break;}for((this[_0x167721(0x450)]['length']===0x0||!_0x304365)&&await _0x3bcfec(_0x313867[_0x167721(0x4a6)]);this[_0x167721(0x450)][_0x167721(0x532)]>0x0||!_0x304365;){if(await this['setRestartTimeout'](),!this[_0x167721(0x1de)]){let _0x495fd0=await _0x3bcfec(_0x313867[_0x167721(0x4a6)]);if(!_0x495fd0){_0x304365=!0x0;break;}this[_0x167721(0x1de)]=_0x495fd0[_0x167721(0x4a6)];}let _0x4d1684=_0x313867[_0x167721(0x873)][_0x167721(0x2d4)](_0xb8144d=>_0xb8144d[_0x167721(0x4a6)]===this['nextMessageId']);if(!_0x4d1684){_0x304365=!0x0;break;}if(this['nextMessageId']&&this[_0x167721(0x1de)]!==_0x4d1684[_0x167721(0x4a6)]){this[_0x167721(0x56b)][_0x167721(0x2b1)](this[_0x167721(0x6dd)]+'\x20('+this['instance'][_0x167721(0x547)]+_0x167721(0x89f)),this['logger'][_0x167721(0x2b1)](this[_0x167721(0x6dd)]+'\x20('+this[_0x167721(0x3f0)]['wuid']+_0x167721(0x4a8)+_0x4d1684['_id']+_0x167721(0x51b));return;}if(this[_0x167721(0x1de)]=_0x4d1684[_0x167721(0x4a6)],this[_0x167721(0x3f0)][_0x167721(0x3e9)][_0x167721(0x39e)]=Date[_0x167721(0x7d1)](),this[_0x167721(0x3f0)]['ScheduleMessage'][_0x167721(0x52d)]===_0x4d1684[_0x167721(0x4a6)]){this[_0x167721(0x56b)][_0x167721(0x2b1)](this[_0x167721(0x6dd)]+'\x20('+this['instance'][_0x167721(0x547)]+_0x167721(0x6f4)),this[_0x167721(0x56b)][_0x167721(0x2b1)](this['instanceName']+'\x20('+this['instance'][_0x167721(0x547)]+_0x167721(0x6a2)+_0x4d1684[_0x167721(0x4a6)]+'.\x20Removendo\x20da\x20lista\x20de\x20tentativas.');return;}if(this[_0x167721(0x3f0)]['ScheduleMessage']['lastMessage_id']=_0x4d1684[_0x167721(0x4a6)],_0x4d1684[_0x167721(0x82c)]){this[_0x167721(0x56b)][_0x167721(0x608)](this[_0x167721(0x6dd)]+'\x20('+this[_0x167721(0x3f0)][_0x167721(0x547)]+_0x167721(0x66f)+_0x4d1684[_0x167721(0x509)]+'.\x20Pulando.');continue;}if(!this[_0x167721(0x3f0)][_0x167721(0x3e9)][_0x167721(0x20d)]){this[_0x167721(0x56b)]['verbose'](this[_0x167721(0x6dd)]+'\x20('+this[_0x167721(0x3f0)][_0x167721(0x547)]+_0x167721(0x408));break;}if(!this[_0x167721(0x3f0)]['ScheduleMessage'][_0x167721(0x714)]){this['logger']['verbose'](this[_0x167721(0x6dd)]+'\x20('+this[_0x167721(0x3f0)][_0x167721(0x547)]+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0x313867['_id']+_0x167721(0x618));break;}if(_0x4d1684[_0x167721(0x536)]===_0x167721(0x6da)&&!this['AutomateSystem']?.[_0x167721(0x627)][_0x167721(0x80e)]){this[_0x167721(0x56b)][_0x167721(0x2b1)](this[_0x167721(0x6dd)]+'\x20('+this[_0x167721(0x3f0)]['wuid']+_0x167721(0x284));break;}let _0x52e37c={'idControl':_0x4d1684[_0x167721(0x4a6)],'remoteJid':_0x4d1684['remoteJid'],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date['now']()},_0x1abb02=null;try{this[_0x167721(0x56b)][_0x167721(0x608)](this[_0x167721(0x6dd)]+'\x20('+this[_0x167721(0x3f0)][_0x167721(0x547)]+_0x167721(0x74d)+_0x4d1684['remoteJid']);let _0x41e357=await this[_0x167721(0x516)](_0x4d1684[_0x167721(0x509)],_0x4d1684);_0x52e37c[_0x167721(0x2b1)]=_0x41e357[_0x167721(0x2b1)],_0x52e37c['id']=_0x41e357[_0x167721(0x2b1)]?null:_0x41e357['id'],_0x52e37c['error_log']=_0x41e357[_0x167721(0x2b1)]?_0x41e357[_0x167721(0x2f2)]?_0x41e357[_0x167721(0x2f2)][_0x167721(0x7b1)]():'':null;let _0x1146ff=_0x313867[_0x167721(0x873)][_0x167721(0x447)](_0x31a63a=>_0x31a63a['_id']===_0x4d1684[_0x167721(0x4a6)]);_0x1146ff!==-0x1&&(_0x313867[_0x167721(0x873)][_0x1146ff][_0x167721(0x82c)]=!0x0);let _0x2b1c6c={'$push':{'messagesSend':_0x52e37c},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x13ce42=[{'elem._id':_0x4d1684[_0x167721(0x4a6)]}];if(this[_0x167721(0x56b)][_0x167721(0x608)](this['instanceName']+'\x20('+this[_0x167721(0x3f0)][_0x167721(0x547)]+'):\x20Atualizando\x20status\x20da\x20mensagem\x20'+_0x4d1684['_id']),_0x1abb02=await this[_0x167721(0x7fa)][_0x167721(0x43e)][_0x167721(0x743)]({'_id':_0x313867[_0x167721(0x4a6)]},_0x2b1c6c,this[_0x167721(0x3f0)][_0x167721(0x547)],{'arrayFilters':_0x13ce42}),_0x41e357[_0x167721(0x2b1)]){this[_0x167721(0x56b)][_0x167721(0x2b1)](this[_0x167721(0x6dd)]+'\x20('+this['instance'][_0x167721(0x547)]+_0x167721(0x72d)+_0x41e357[_0x167721(0x2f2)]);continue;}let _0x3d1208=this['getDelay'](_0x313867[_0x167721(0x686)],_0x313867[_0x167721(0x62c)]);await this[_0x167721(0x272)](_0x3d1208);}catch(_0x47e5f7){this[_0x167721(0x56b)][_0x167721(0x2b1)](this[_0x167721(0x6dd)]+'\x20('+this[_0x167721(0x3f0)][_0x167721(0x547)]+_0x167721(0x784)+_0x4d1684[_0x167721(0x509)]+':\x20'+(_0x47e5f7 instanceof Error?_0x47e5f7[_0x167721(0x4f4)]:JSON[_0x167721(0x179)](_0x47e5f7,null,0x2))),_0x52e37c[_0x167721(0x2b1)]=!0x0,_0x52e37c[_0x167721(0x243)]=_0x47e5f7[_0x167721(0x4f4)];let _0x465426=_0x313867[_0x167721(0x873)][_0x167721(0x447)](_0x17da28=>_0x17da28[_0x167721(0x4a6)]===_0x4d1684[_0x167721(0x4a6)]);_0x465426!==-0x1&&(_0x313867['messages'][_0x465426][_0x167721(0x82c)]=!0x0);let _0x17b028={'$push':{'messagesSend':_0x52e37c},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x5a4079=[{'elem._id':_0x4d1684[_0x167721(0x4a6)]}];this[_0x167721(0x56b)]['verbose'](this[_0x167721(0x6dd)]+'\x20('+this[_0x167721(0x3f0)][_0x167721(0x547)]+_0x167721(0x51d)+_0x4d1684[_0x167721(0x4a6)]),_0x1abb02=await this[_0x167721(0x7fa)][_0x167721(0x43e)][_0x167721(0x743)]({'_id':_0x313867[_0x167721(0x4a6)]},_0x17b028,this[_0x167721(0x3f0)]['wuid'],{'arrayFilters':_0x5a4079});}finally{if(_0x1abb02&&_0x1abb02[_0x167721(0x2f7)]===_0x167721(0x6c4)){this[_0x167721(0x56b)][_0x167721(0x608)](this[_0x167721(0x6dd)]+'\x20('+this['instance'][_0x167721(0x547)]+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0x4d1684[_0x167721(0x4a6)]+_0x167721(0x54a));break;}let _0x26d717=_0x1abb02[_0x167721(0x873)][_0x167721(0x2d4)](_0x151e9d=>_0x151e9d['_id']===_0x4d1684[_0x167721(0x4a6)]);if(_0x26d717&&!_0x26d717['triedToSend']){let _0x58fe3a={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x3ea5c6=[{'elem._id':_0x4d1684[_0x167721(0x4a6)]}];await this[_0x167721(0x7fa)][_0x167721(0x43e)][_0x167721(0x743)]({'_id':_0x1abb02[_0x167721(0x4a6)]},_0x58fe3a,this[_0x167721(0x3f0)]['wuid'],{'arrayFilters':_0x3ea5c6});}if(this[_0x167721(0x450)]=_0x1abb02[_0x167721(0x873)]['filter'](_0x39d9bc=>!_0x39d9bc['triedToSend']),_0x304365=this[_0x167721(0x450)]['length']===0x0,this['nextMessageId']=_0x1abb02['messages'][_0x167721(0x532)]>0x0?_0x1abb02[_0x167721(0x873)][_0x167721(0x587)](_0x1b067c=>!_0x1b067c[_0x167721(0x82c)])[_0x167721(0x1a4)]((_0x49750e,_0x3302d2)=>(_0x49750e[_0x167721(0x30f)]??Number['MAX_SAFE_INTEGER'])<(_0x3302d2[_0x167721(0x30f)]??Number[_0x167721(0x7a7)])?_0x49750e:_0x3302d2,_0x1abb02[_0x167721(0x873)][0x0])['_id']:null,_0x304365=!this[_0x167721(0x1de)],_0x1abb02[_0x167721(0x1af)]!==this['processUUID']){this[_0x167721(0x56b)][_0x167721(0x608)](this['instanceName']+'\x20('+this[_0x167721(0x3f0)][_0x167721(0x547)]+_0x167721(0x370));break;}}}this[_0x167721(0x450)]=[],this[_0x167721(0x1de)]=null;let _0x243b1d=await this['repository'][_0x167721(0x43e)][_0x167721(0x24c)](_0x313867['_id'],this[_0x167721(0x3f0)]['wuid']);if(_0x304365=_0x243b1d[_0x167721(0x873)][_0x167721(0x6c3)](_0x5b5d69=>_0x5b5d69[_0x167721(0x82c)]),_0x304365&&_0x243b1d[_0x167721(0x2f7)]!=='stopped'){this[_0x167721(0x3f0)]['ScheduleMessage'][_0x167721(0x52d)]=null;let _0x42acdb={'$set':{'status':_0x167721(0x584)}};await this[_0x167721(0x7fa)][_0x167721(0x43e)][_0x167721(0x2ac)](_0x243b1d[_0x167721(0x4a6)],_0x42acdb,this['instance'][_0x167721(0x547)]);}await new Promise(_0x18bd7d=>setTimeout(_0x18bd7d,_0x11c911)),global['gc']?global['gc']():console[_0x167721(0x38d)](_0x167721(0x5f5));}this[_0x167721(0x1de)]=null,this[_0x167721(0x1af)]=null;},_0x315ead=async()=>{const _0x13574d=_0x37cbb2;let _0x575997=new Date(Date[_0x13574d(0x7d1)]()-0x2932e00),_0x403303={'where':{'status':_0x13574d(0x347),'$or':[{'when':{'$lte':new Date(),'$gte':_0x575997}},{'when':0x0}]}},_0x2a8432=await this[_0x13574d(0x7fa)]['scheduleMessage'][_0x13574d(0x640)](_0x403303,this[_0x13574d(0x3f0)]['wuid']);_0x2a8432&&_0x2a8432['when']-Date['now']()<=0x6ddd00?this[_0x13574d(0x3f0)][_0x13574d(0x3e9)]['delayMessage']=_0x2a8432['when']-Date[_0x13574d(0x7d1)]():this[_0x13574d(0x3f0)][_0x13574d(0x3e9)][_0x13574d(0x60d)]=(0x3c+Math['floor'](Math[_0x13574d(0x541)]()*0x3c))*0x3c*0x3e8,this['instance'][_0x13574d(0x3e9)][_0x13574d(0x60d)]=Math['max'](this[_0x13574d(0x3f0)][_0x13574d(0x3e9)][_0x13574d(0x60d)],0x1*0x2*0x3e8);let _0x14b447=Math[_0x13574d(0x865)](this[_0x13574d(0x3f0)][_0x13574d(0x3e9)][_0x13574d(0x60d)]/0xea60);if(_0x2a8432){let _0xb5f736=new Date(_0x2a8432[_0x13574d(0x677)])[_0x13574d(0x75c)]();this['logger'][_0x13574d(0x608)](this['instanceName']+'\x20('+this['instance'][_0x13574d(0x547)]+_0x13574d(0x14e)+_0xb5f736+',\x20fará\x20nova\x20verificação\x20em\x20'+_0x14b447+_0x13574d(0x47b));}else this[_0x13574d(0x56b)][_0x13574d(0x608)](this[_0x13574d(0x6dd)]+'\x20('+this[_0x13574d(0x3f0)][_0x13574d(0x547)]+_0x13574d(0x2cb)+_0x14b447+_0x13574d(0x47b));setTimeout(()=>this['scheduleNextCheck'](),this['instance'][_0x13574d(0x3e9)][_0x13574d(0x60d)]);};if(this[_0x37cbb2(0x3f0)][_0x37cbb2(0x3e9)][_0x37cbb2(0x714)]){await this[_0x37cbb2(0x358)](),_0x3140c2();return;}if(!this[_0x37cbb2(0x3f0)][_0x37cbb2(0x3e9)][_0x37cbb2(0x20d)]){this[_0x37cbb2(0x56b)]['verbose'](this[_0x37cbb2(0x6dd)]+'\x20('+this[_0x37cbb2(0x3f0)][_0x37cbb2(0x547)]+'):\x20Parar\x20função\x20pois\x20não\x20está\x20conectado'),this[_0x37cbb2(0x3f0)][_0x37cbb2(0x3e9)][_0x37cbb2(0x714)]=null,this[_0x37cbb2(0x3f0)]['ScheduleMessage'][_0x37cbb2(0x39e)]=0x0,this[_0x37cbb2(0x3f0)]['ScheduleMessage'][_0x37cbb2(0x60d)]=0x0,this['instance'][_0x37cbb2(0x3e9)][_0x37cbb2(0x52d)]=null;return;}try{let _0x5b1a5e=await _0x50e472();_0x5b1a5e[_0x37cbb2(0x532)]===0x0?this[_0x37cbb2(0x56b)][_0x37cbb2(0x608)](this[_0x37cbb2(0x6dd)]+'\x20('+this['instance'][_0x37cbb2(0x547)]+_0x37cbb2(0x74c)):(this[_0x37cbb2(0x3f0)][_0x37cbb2(0x3e9)][_0x37cbb2(0x714)]=_0x5b1a5e[0x0]['_id'],await _0x3da4d2(_0x5b1a5e)),await _0x315ead(),this[_0x37cbb2(0x3f0)][_0x37cbb2(0x3e9)][_0x37cbb2(0x714)]=null,this[_0x37cbb2(0x3f0)][_0x37cbb2(0x3e9)][_0x37cbb2(0x52d)]=null;}catch(_0x1bdb72){this[_0x37cbb2(0x56b)][_0x37cbb2(0x2b1)](_0x37cbb2(0x401)+(_0x1bdb72 instanceof Error?_0x1bdb72[_0x37cbb2(0x4f4)]:JSON['stringify'](_0x1bdb72,null,0x2)));}}[a0_0x5ca971(0x6ae)](_0x2cbdad,_0x735496){const _0x7d44eb=a0_0x5ca971;return _0x2cbdad=Math[_0x7d44eb(0x2cf)](0.5,_0x2cbdad),_0x735496=Math['min'](Math['max'](0x3,_0x735496),0x78),Math['floor'](Math[_0x7d44eb(0x541)]()*(_0x735496-_0x2cbdad+0x1)+_0x2cbdad)*0x3e8;}[a0_0x5ca971(0x272)](_0x3ee2ab){return new Promise(_0x2313ad=>setTimeout(_0x2313ad,_0x3ee2ab));}async['getVariablesChat'](_0x44e1f2){const _0x1d0c6d=a0_0x5ca971;if(!this[_0x1d0c6d(0x755)]&&(await this['getAutomateSystem'](),!this['AutomateSystem']))return null;_0x44e1f2=this[_0x1d0c6d(0x30b)](_0x44e1f2);let _0x2834a2=await this[_0x1d0c6d(0x7fa)]['chat']['findOne']({'where':{'_id':_0x44e1f2}},this[_0x1d0c6d(0x3f0)][_0x1d0c6d(0x547)]),_0x3fb87a={};if(_0x2834a2&&_0x2834a2[_0x1d0c6d(0x341)]){let _0x5e66a9=_0x2834a2[_0x1d0c6d(0x341)];typeof _0x5e66a9['nome']=='string'&&(_0x3fb87a[_0x1d0c6d(0x207)]=_0x5e66a9['nome']),typeof _0x5e66a9['nomecompleto']==_0x1d0c6d(0x2a0)&&(_0x3fb87a[_0x1d0c6d(0x4fc)]=_0x5e66a9[_0x1d0c6d(0x4fc)]),typeof _0x5e66a9[_0x1d0c6d(0x428)]==_0x1d0c6d(0x2a0)&&(_0x3fb87a[_0x1d0c6d(0x428)]=_0x5e66a9[_0x1d0c6d(0x428)]),typeof _0x5e66a9[_0x1d0c6d(0x506)]==_0x1d0c6d(0x2a0)&&(_0x3fb87a['cpf']=_0x5e66a9['cpf']),typeof _0x5e66a9[_0x1d0c6d(0x2f7)]==_0x1d0c6d(0x2a0)&&(_0x3fb87a[_0x1d0c6d(0x2f7)]=_0x5e66a9['status']),typeof _0x5e66a9['notas']==_0x1d0c6d(0x2a0)&&(_0x3fb87a[_0x1d0c6d(0x198)]=_0x5e66a9[_0x1d0c6d(0x198)]),typeof _0x5e66a9[_0x1d0c6d(0x5e3)]=='string'&&(_0x3fb87a[_0x1d0c6d(0x5e3)]=_0x5e66a9[_0x1d0c6d(0x5e3)]),Array[_0x1d0c6d(0x4d0)](_0x5e66a9[_0x1d0c6d(0x742)])&&(_0x3fb87a[_0x1d0c6d(0x742)]=_0x5e66a9[_0x1d0c6d(0x742)][_0x1d0c6d(0x897)](',\x20')),Array[_0x1d0c6d(0x4d0)](_0x5e66a9['etiquetas'])&&(_0x3fb87a[_0x1d0c6d(0x5e1)]=_0x5e66a9[_0x1d0c6d(0x5e1)][_0x1d0c6d(0x897)](',\x20'));}return _0x2834a2&&_0x2834a2[_0x1d0c6d(0x341)]&&_0x2834a2['leadInfo']['customFields']&&_0x2834a2['leadInfo'][_0x1d0c6d(0x85a)][_0x1d0c6d(0x491)](_0x287c0a=>{const _0x3400ee=_0x1d0c6d;let _0x16af16=this[_0x3400ee(0x755)]?.[_0x3400ee(0x85a)][_0x3400ee(0x2d4)](_0x47d9b7=>_0x47d9b7[_0x3400ee(0x4a6)]===_0x287c0a[_0x3400ee(0x4a6)]);_0x16af16&&(_0x3fb87a[_0x16af16['name']]=_0x287c0a[_0x3400ee(0x5d4)]);}),_0x3fb87a;}async[a0_0x5ca971(0x42c)](_0xfb9ef8,_0x56341b){const _0x3de16f=a0_0x5ca971;try{let _0x6f98f6=await this[_0x3de16f(0x1f8)](_0x56341b);return this[_0x3de16f(0x29c)](_0xfb9ef8,_0x6f98f6);}catch(_0x1cab75){return this[_0x3de16f(0x56b)][_0x3de16f(0x2b1)](_0x3de16f(0x66c)+_0x56341b+':\x20'+_0x1cab75),_0xfb9ef8;}}async[a0_0x5ca971(0x35a)](){const _0x49152c=a0_0x5ca971;let _0x357afb=async(_0xd04729,_0x4d1e55)=>{const _0xb29bc9=a0_0x2d21;let _0x4e5f69=(await this[_0xb29bc9(0x7fa)][_0xb29bc9(0x43e)][_0xb29bc9(0x2d4)]({'where':{'type':_0xd04729}},this[_0xb29bc9(0x3f0)]['wuid']))[_0xb29bc9(0x7a8)](async _0x263ac0=>{const _0x208c2f=_0xb29bc9;let _0x3f50a1=_0x4d1e55(_0x263ac0),_0x3130a2=_0x2ab6c6=>/^\d+$/['test'](_0x2ab6c6),_0x4effc5=_0x263ac0['remoteJids']['filter'](_0x559e4e=>_0x559e4e[_0x208c2f(0x83d)](_0x208c2f(0x4a7))?_0x559e4e[_0x208c2f(0x532)]>0x19:_0x559e4e[_0x208c2f(0x83d)](_0x208c2f(0x5e5))?_0x559e4e['length']>0xf:_0x3130a2(_0x559e4e)?_0x559e4e['length']>=0xb:!0x1)[_0x208c2f(0x7a8)](_0x46055e=>({'_id':(0x0,Y['v4'])(),'idSchedule':_0x263ac0[_0x208c2f(0x4a6)],'type':_0x3f50a1,'remoteJid':_0x46055e,'flow':_0x263ac0[_0x208c2f(0x2ad)],'text':_0x263ac0[_0x208c2f(0x4f4)]?.[_0x208c2f(0x6e4)],'delay':_0x263ac0['message']?.[_0x208c2f(0x190)],'urlOrBase64':_0x263ac0[_0x208c2f(0x4f4)]?.[_0x208c2f(0x89b)],'linkPreview':_0x263ac0['message']?.[_0x208c2f(0x4eb)],'fileName':_0x263ac0[_0x208c2f(0x4f4)]?.['fileName'],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x208c2f(0x7fa)][_0x208c2f(0x43e)][_0x208c2f(0x2ac)](_0x263ac0[_0x208c2f(0x4a6)],{'$set':{'messages':_0x4effc5},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x208c2f(0x3f0)][_0x208c2f(0x547)]);}catch(_0x32c9fc){console[_0x208c2f(0x2b1)]('Erro\x20ao\x20atualizar\x20agendamento\x20'+_0x263ac0[_0x208c2f(0x4a6)]+':',_0x32c9fc);}});await Promise[_0xb29bc9(0x6de)](_0x4e5f69);};await _0x357afb(_0x49152c(0x6e4),_0x29f794=>_0x49152c(0x6e4)),await _0x357afb('media',_0x2c8827=>_0x2c8827[_0x49152c(0x4f4)]?.['mediatype']||_0x49152c(0x1f5)),await _0x357afb(_0x49152c(0x765),_0x1150c9=>_0x49152c(0x765)),await _0x357afb(_0x49152c(0x6da),_0x1c7962=>_0x49152c(0x6da)),await _0x357afb(_0x49152c(0x525),_0x521d5c=>_0x49152c(0x525)),await _0x357afb(_0x49152c(0x6b8),_0xab1bca=>_0x49152c(0x6b8)),await _0x357afb('document',_0x180886=>_0x49152c(0x400)),this['logger'][_0x49152c(0x608)](this[_0x49152c(0x6dd)]+'\x20('+this[_0x49152c(0x3f0)][_0x49152c(0x547)]+_0x49152c(0x1a2));}async[a0_0x5ca971(0x799)](_0x5524d8){const _0x4921f8=a0_0x5ca971;try{if(this[_0x4921f8(0x56b)][_0x4921f8(0x608)](this[_0x4921f8(0x6dd)]+'\x20('+this[_0x4921f8(0x3f0)]['wuid']+_0x4921f8(0x53f)),_0x5524d8[_0x4921f8(0x4a6)]||(_0x5524d8[_0x4921f8(0x4a6)]=(0x0,Y['v4'])()),this[_0x4921f8(0x3f0)][_0x4921f8(0x3e9)][_0x4921f8(0x714)]===_0x5524d8['_id']?.['toString']()&&_0x5524d8[_0x4921f8(0x2f7)]!==_0x4921f8(0x6c4))throw new Error(_0x4921f8(0x813));if(_0x5524d8['delete']&&_0x5524d8['_id']){let _0x1016aa=await this[_0x4921f8(0x7fa)][_0x4921f8(0x43e)][_0x4921f8(0x631)](_0x5524d8['_id'],this[_0x4921f8(0x3f0)][_0x4921f8(0x547)]);return setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x1016aa;}let _0x22f03e=null;if(_0x5524d8[_0x4921f8(0x4a6)]&&(_0x22f03e=await this['repository'][_0x4921f8(0x43e)]['findById'](_0x5524d8[_0x4921f8(0x4a6)],this[_0x4921f8(0x3f0)][_0x4921f8(0x547)])),_0x22f03e){let {_id:_0x43bcb0,owner:_0x5ee879,messages:_0x257c72,..._0x1c795b}=_0x5524d8;if(_0x257c72){let _0x43103e=_0x257c72['filter'](_0x4b9730=>!_0x4b9730[_0x4921f8(0x4a6)]),_0x3918b9=_0x257c72[_0x4921f8(0x587)](_0x1f2cd2=>_0x1f2cd2[_0x4921f8(0x4a6)]&&!_0x1f2cd2[_0x4921f8(0x8a2)]),_0x26db30=_0x257c72[_0x4921f8(0x587)](_0x3974a6=>_0x3974a6[_0x4921f8(0x4a6)]&&_0x3974a6['delete']);if(_0x43103e[_0x4921f8(0x532)]>0x0&&await this['addMessagesToGroup'](_0x5524d8[_0x4921f8(0x4a6)],_0x43103e),_0x3918b9[_0x4921f8(0x532)]>0x0&&await this[_0x4921f8(0x368)]({'_id':_0x5524d8[_0x4921f8(0x4a6)],'messages':_0x3918b9}),_0x26db30[_0x4921f8(0x532)]>0x0){let _0x1f6be4=_0x26db30['map'](_0x8fe663=>({'updateOne':{'filter':{'_id':_0x5524d8[_0x4921f8(0x4a6)]},'update':{'$pull':{'messages':{'_id':_0x8fe663[_0x4921f8(0x4a6)]}}}}}));await this[_0x4921f8(0x7fa)][_0x4921f8(0x43e)][_0x4921f8(0x429)](_0x1f6be4,this['instance'][_0x4921f8(0x547)]);}}let _0x561156={'$set':{..._0x1c795b,'status':_0x5524d8['status']||_0x22f03e[_0x4921f8(0x2f7)]}},_0x3a3edc=await this['repository'][_0x4921f8(0x43e)]['updateOneById'](_0x5524d8[_0x4921f8(0x4a6)],_0x561156,this['instance'][_0x4921f8(0x547)]);return _0x3a3edc&&(this['reorderMessages'](_0x3a3edc[_0x4921f8(0x873)]),await this['repository'][_0x4921f8(0x43e)]['updateOneById'](_0x3a3edc[_0x4921f8(0x4a6)],{'$set':{'messages':_0x3a3edc[_0x4921f8(0x873)]}},this[_0x4921f8(0x3f0)][_0x4921f8(0x547)])),setTimeout(()=>this[_0x4921f8(0x77b)](),0x7d0),await this[_0x4921f8(0x35a)](),_0x3a3edc;}else{_0x5524d8[_0x4921f8(0x42d)]=this[_0x4921f8(0x3f0)][_0x4921f8(0x547)],_0x5524d8['messages']&&_0x5524d8['messages'][_0x4921f8(0x491)](_0x1d370c=>{const _0x5c34fd=_0x4921f8;_0x1d370c[_0x5c34fd(0x4a6)]||(_0x1d370c['_id']=(0x0,Y['v4'])()),_0x1d370c[_0x5c34fd(0x7bc)]||(_0x1d370c[_0x5c34fd(0x7bc)]=_0x5524d8['_id']),delete _0x1d370c[_0x5c34fd(0x82c)];});let _0x3c0b2d=await this[_0x4921f8(0x7fa)][_0x4921f8(0x43e)][_0x4921f8(0x2e9)](_0x5524d8,this['instance']['wuid']);return _0x3c0b2d&&(this[_0x4921f8(0x828)](_0x3c0b2d[_0x4921f8(0x873)]),await this['repository']['scheduleMessage'][_0x4921f8(0x2ac)](_0x3c0b2d[_0x4921f8(0x4a6)],{'$set':{'messages':_0x3c0b2d[_0x4921f8(0x873)]}},this['instance'][_0x4921f8(0x547)])),setTimeout(()=>this[_0x4921f8(0x77b)](),0x7d0),_0x3c0b2d;}}catch(_0x4c8c1f){let _0x1bcadc=_0x4921f8(0x189),_0x74efb4=_0x4c8c1f instanceof Error?_0x4c8c1f[_0x4921f8(0x4f4)]:typeof _0x4c8c1f=='object'?JSON[_0x4921f8(0x179)](_0x4c8c1f):_0x4c8c1f,_0x5d3eca=_0x1bcadc+':\x20'+_0x74efb4;throw this[_0x4921f8(0x56b)][_0x4921f8(0x2b1)](this[_0x4921f8(0x6dd)]+'\x20('+this[_0x4921f8(0x3f0)][_0x4921f8(0x547)]+_0x4921f8(0x3a3)+_0x5d3eca),new m(_0x5d3eca);}}async['addMessagesToGroup'](_0x1c6fd6,_0x2938c5){const _0x519daa=a0_0x5ca971;try{this[_0x519daa(0x56b)][_0x519daa(0x608)](this[_0x519daa(0x6dd)]+'\x20('+this[_0x519daa(0x3f0)][_0x519daa(0x547)]+_0x519daa(0x24a)),_0x2938c5[_0x519daa(0x491)](_0x463d1b=>{const _0x59ecb5=_0x519daa;_0x463d1b[_0x59ecb5(0x4a6)]||(_0x463d1b[_0x59ecb5(0x4a6)]=(0x0,Y['v4'])()),_0x463d1b['idSchedule']||(_0x463d1b[_0x59ecb5(0x7bc)]=_0x1c6fd6),delete _0x463d1b[_0x59ecb5(0x82c)];});let _0x2da72e={'$push':{'messages':{'$each':_0x2938c5}}},_0x38b858=await this['repository'][_0x519daa(0x43e)]['updateOneById'](_0x1c6fd6,_0x2da72e,this['instance'][_0x519daa(0x547)]);return _0x38b858&&(this['reorderMessages'](_0x38b858['messages']),await this[_0x519daa(0x7fa)][_0x519daa(0x43e)][_0x519daa(0x2ac)](_0x38b858[_0x519daa(0x4a6)],{'$set':{'messages':_0x38b858['messages']}},this['instance'][_0x519daa(0x547)])),_0x38b858;}catch(_0x17df13){let _0x109231=_0x519daa(0x4b6),_0x3be528=_0x17df13 instanceof Error?_0x17df13[_0x519daa(0x4f4)]:typeof _0x17df13==_0x519daa(0x487)?JSON[_0x519daa(0x179)](_0x17df13):_0x17df13,_0x10ad04=_0x109231+':\x20'+_0x3be528;throw this[_0x519daa(0x56b)][_0x519daa(0x2b1)](this[_0x519daa(0x6dd)]+'\x20('+this[_0x519daa(0x3f0)][_0x519daa(0x547)]+_0x519daa(0x3a3)+_0x10ad04),new m(_0x10ad04);}}async[a0_0x5ca971(0x368)](_0x45a62c){const _0x38951d=a0_0x5ca971;try{if(this[_0x38951d(0x56b)][_0x38951d(0x608)](this[_0x38951d(0x6dd)]+'\x20('+this[_0x38951d(0x3f0)][_0x38951d(0x547)]+_0x38951d(0x38a)),!_0x45a62c[_0x38951d(0x4a6)]||!_0x45a62c[_0x38951d(0x873)])throw new Error(_0x38951d(0x373));let _0x34d90a=_0x45a62c['_id'],_0x1e83c8=_0x45a62c[_0x38951d(0x873)],_0xe3bb68=_0x1e83c8[_0x38951d(0x587)](_0x50b4fa=>!_0x50b4fa[_0x38951d(0x8a2)])[_0x38951d(0x7a8)](_0x3505f2=>{const _0x3773e8=_0x38951d;let _0xde7eb4=_0x3505f2[_0x3773e8(0x4a6)];if(!_0xde7eb4)throw new Error(_0x3773e8(0x57b));return _0x3505f2['idSchedule']||(_0x3505f2[_0x3773e8(0x7bc)]=_0x34d90a),delete _0x3505f2[_0x3773e8(0x82c)],{'updateOne':{'filter':{'_id':_0x34d90a,'messages._id':_0xde7eb4},'update':{'$set':{'messages.$[elem]':_0x3505f2}},'arrayFilters':[{'elem._id':_0xde7eb4}]}};}),_0xe036f6=_0x1e83c8['filter'](_0x3ed80e=>_0x3ed80e[_0x38951d(0x8a2)])['map'](_0x50b19f=>{const _0x3c1972=_0x38951d;let _0x444f55=_0x50b19f[_0x3c1972(0x4a6)];if(!_0x444f55)throw new Error(_0x3c1972(0x5f6));return{'updateOne':{'filter':{'_id':_0x34d90a},'update':{'$pull':{'messages':{'_id':_0x444f55}}}}};}),_0x12d261=[..._0xe3bb68,..._0xe036f6],_0x2382ba=await this[_0x38951d(0x7fa)][_0x38951d(0x43e)][_0x38951d(0x429)](_0x12d261,this[_0x38951d(0x3f0)][_0x38951d(0x547)]),_0x454c94=await this[_0x38951d(0x7fa)][_0x38951d(0x43e)][_0x38951d(0x24c)](_0x34d90a,this[_0x38951d(0x3f0)][_0x38951d(0x547)]);return _0x454c94&&(this['reorderMessages'](_0x454c94[_0x38951d(0x873)]),await this[_0x38951d(0x7fa)][_0x38951d(0x43e)][_0x38951d(0x2ac)](_0x454c94[_0x38951d(0x4a6)],{'$set':{'messages':_0x454c94[_0x38951d(0x873)]}},this[_0x38951d(0x3f0)][_0x38951d(0x547)])),_0x454c94;}catch(_0x4b99fe){let _0x4f738e=_0x38951d(0x1d4),_0xceef84=_0x4b99fe instanceof Error?_0x4b99fe[_0x38951d(0x4f4)]:typeof _0x4b99fe==_0x38951d(0x487)?JSON[_0x38951d(0x179)](_0x4b99fe):_0x4b99fe,_0xb4d763=_0x4f738e+':\x20'+_0xceef84;throw this['logger'][_0x38951d(0x2b1)](this[_0x38951d(0x6dd)]+'\x20('+this['instance'][_0x38951d(0x547)]+_0x38951d(0x3a3)+_0xb4d763),new m(_0xb4d763);}}async[a0_0x5ca971(0x564)](){const _0x1aaaf8=a0_0x5ca971;try{let _0x2fa733={'status':_0x1aaaf8(0x584)},_0x4dcb00=await this[_0x1aaaf8(0x7fa)][_0x1aaaf8(0x43e)]['deleteMany'](_0x2fa733,this[_0x1aaaf8(0x3f0)][_0x1aaaf8(0x547)]);if(!_0x4dcb00[_0x1aaaf8(0x2b1)])this[_0x1aaaf8(0x56b)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x1aaaf8(0x547)]+_0x1aaaf8(0x624));else throw new Error(_0x4dcb00[_0x1aaaf8(0x2b1)]['message']||'Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens');return this['getScheduleMessage']();}catch(_0xa09f5e){let _0x335250=_0x1aaaf8(0x609),_0x4482ac=_0xa09f5e instanceof Error?_0xa09f5e['message']:typeof _0xa09f5e==_0x1aaaf8(0x487)?JSON[_0x1aaaf8(0x179)](_0xa09f5e):_0xa09f5e,_0x19c1a1=_0x335250+':\x20'+_0x4482ac;throw this[_0x1aaaf8(0x56b)][_0x1aaaf8(0x2b1)](this[_0x1aaaf8(0x6dd)]+'\x20('+this['instance'][_0x1aaaf8(0x547)]+_0x1aaaf8(0x3a3)+_0x19c1a1),new m(_0x19c1a1);}}async[a0_0x5ca971(0x550)](){const _0x469fa9=a0_0x5ca971;try{return await this[_0x469fa9(0x7fa)][_0x469fa9(0x43e)]['find']({'where':{}},this[_0x469fa9(0x3f0)][_0x469fa9(0x547)]);}catch(_0x52040e){let _0x3b14da=_0x469fa9(0x49c),_0x1031d7=_0x52040e instanceof Error?_0x52040e['message']:typeof _0x52040e=='object'?JSON['stringify'](_0x52040e):_0x52040e,_0x41d381=_0x3b14da+':\x20'+_0x1031d7;throw this[_0x469fa9(0x56b)][_0x469fa9(0x2b1)](this[_0x469fa9(0x6dd)]+'\x20('+this[_0x469fa9(0x3f0)][_0x469fa9(0x547)]+'):\x20'+_0x41d381),new m(_0x41d381);}}[a0_0x5ca971(0x828)](_0x340a80){const _0x370bea=a0_0x5ca971;_0x340a80['sort']((_0x59ab8f,_0x3aff11)=>_0x59ab8f[_0x370bea(0x30f)]-_0x3aff11[_0x370bea(0x30f)]),_0x340a80['forEach']((_0x4a28d1,_0x3398f3)=>{_0x4a28d1['order']=_0x3398f3+0x1;});}async[a0_0x5ca971(0x516)](_0x530017,_0x2bf6a5){const _0x400f2f=a0_0x5ca971;try{if(!_0x2bf6a5)return this['logger'][_0x400f2f(0x2b1)](this[_0x400f2f(0x6dd)]+'\x20('+this[_0x400f2f(0x3f0)][_0x400f2f(0x547)]+_0x400f2f(0x1fe)),{'error':!0x0,'detail':_0x400f2f(0x2d6)};if(_0x2bf6a5['type']===_0x400f2f(0x6da)&&!this['AutomateSystem']?.[_0x400f2f(0x627)][_0x400f2f(0x80e)])return this[_0x400f2f(0x56b)]['error'](this[_0x400f2f(0x6dd)]+'\x20('+this[_0x400f2f(0x3f0)][_0x400f2f(0x547)]+_0x400f2f(0x6f5)),{'error':!0x0,'detail':'Fluxos\x20não\x20estão\x20ativados'};switch(_0x2bf6a5['type']){case _0x400f2f(0x6e4):return await this[_0x400f2f(0x790)](_0x2bf6a5,_0x530017);case _0x400f2f(0x6b8):case _0x400f2f(0x525):case'document':return await this['scheduleSendMedia'](_0x2bf6a5,_0x530017);case _0x400f2f(0x765):return await this[_0x400f2f(0x6ad)](_0x2bf6a5,_0x530017);case'flow':let _0x228344=new He();return _0x228344[_0x400f2f(0x41c)]=_0x2bf6a5[_0x400f2f(0x6da)],_0x228344['remoteJid']=_0x530017,await this[_0x400f2f(0x21b)](_0x228344);default:return this['logger'][_0x400f2f(0x2b1)](this[_0x400f2f(0x6dd)]+'\x20('+this['instance'][_0x400f2f(0x547)]+_0x400f2f(0x2aa)+_0x2bf6a5[_0x400f2f(0x536)]),{'error':!0x0,'detail':_0x400f2f(0x847)};}}catch(_0x37dad8){return this['logger']['error'](this[_0x400f2f(0x6dd)]+'\x20('+this[_0x400f2f(0x3f0)][_0x400f2f(0x547)]+_0x400f2f(0x267)+(_0x37dad8 instanceof Error?_0x37dad8['message']:JSON[_0x400f2f(0x179)](_0x37dad8,null,0x2))),{'error':!0x0,'detail':_0x37dad8[_0x400f2f(0x4f4)]};}}async['scheduleSendText'](_0x1706cf,_0x4450dd){const _0x32a465=a0_0x5ca971;if(this[_0x32a465(0x56b)]['verbose'](this[_0x32a465(0x6dd)]+'\x20('+this[_0x32a465(0x3f0)][_0x32a465(0x547)]+_0x32a465(0x1f9)+_0x4450dd+'\x27'),!_0x1706cf['text']||_0x1706cf[_0x32a465(0x6e4)]['length']===0x0)return{'error':!0x0,'detail':_0x32a465(0x705)};let _0xf23f0e=await this[_0x32a465(0x42c)](_0x1706cf[_0x32a465(0x6e4)],_0x4450dd),_0xe589b6={'number':_0x4450dd,'options':{'delay':_0x1706cf[_0x32a465(0x190)],'linkPreview':_0x1706cf[_0x32a465(0x4eb)]},'textMessage':{'text':_0xf23f0e}},_0x216054=null;try{let _0x26d8a2=await this[_0x32a465(0x227)](_0xe589b6);if(_0x26d8a2&&_0x26d8a2[_0x32a465(0x2f7)])return{'error':!0x1,'id':_0x26d8a2[_0x32a465(0x74a)]['id']};_0x216054=JSON[_0x32a465(0x179)](_0x26d8a2),this[_0x32a465(0x56b)]['verbose'](this[_0x32a465(0x6dd)]+'\x20('+this[_0x32a465(0x3f0)][_0x32a465(0x547)]+_0x32a465(0x3a3)+_0x216054);}catch(_0xdd9f43){this['logger'][_0x32a465(0x2b1)](this[_0x32a465(0x6dd)]+'\x20('+this[_0x32a465(0x3f0)][_0x32a465(0x547)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20'+(_0xdd9f43 instanceof Error?_0xdd9f43[_0x32a465(0x4f4)]:JSON['stringify'](_0xdd9f43,null,0x2))),_0x216054=_0xdd9f43[_0x32a465(0x4f4)];}if(_0x216054)return{'error':!0x0,'detail':(typeof _0x216054==_0x32a465(0x487)?JSON[_0x32a465(0x179)](_0x216054,null,0x2):_0x216054)['replace'](/[\[\]{}\n]/g,'\x20')[_0x32a465(0x3d2)](/  +/g,'\x20')};}async[a0_0x5ca971(0x356)](_0x259cda,_0x6b8b7f){const _0x581993=a0_0x5ca971;this[_0x581993(0x56b)]['verbose'](this[_0x581993(0x6dd)]+'\x20('+this['instance'][_0x581993(0x547)]+'):\x20\x27Enviando\x20mídia\x20para\x20\x27'+_0x6b8b7f+'\x27');let _0x599e00;_0x259cda[_0x581993(0x6e4)]&&_0x259cda['text'][_0x581993(0x532)]>0x0&&(_0x599e00=await this[_0x581993(0x42c)](_0x259cda[_0x581993(0x6e4)],_0x6b8b7f));let _0x58c86b={'number':_0x6b8b7f,'options':{'delay':_0x259cda[_0x581993(0x190)],'linkPreview':_0x259cda['linkPreview']},'mediaMessage':{'mediatype':_0x259cda[_0x581993(0x536)],'caption':_0x599e00,'media':_0x259cda['urlOrBase64']}},_0x340f00=null;try{let _0x1196f5=await this['mediaMessage'](_0x58c86b);if(_0x1196f5&&_0x1196f5[_0x581993(0x2f7)])return{'error':!0x1,'id':_0x1196f5[_0x581993(0x74a)]['id']};_0x340f00=JSON[_0x581993(0x179)](_0x1196f5),this['logger'][_0x581993(0x608)](this['instanceName']+'\x20('+this[_0x581993(0x3f0)][_0x581993(0x547)]+_0x581993(0x3a3)+_0x340f00);}catch(_0x15151c){this[_0x581993(0x56b)][_0x581993(0x2b1)](this[_0x581993(0x6dd)]+'\x20('+this[_0x581993(0x3f0)]['wuid']+_0x581993(0x161)+(_0x15151c instanceof Error?_0x15151c['message']:JSON[_0x581993(0x179)](_0x15151c,null,0x2))),_0x340f00=_0x15151c[_0x581993(0x4f4)];}if(_0x340f00)return{'error':!0x0,'detail':(typeof _0x340f00=='object'?JSON['stringify'](_0x340f00,null,0x2):_0x340f00)['replace'](/[\[\]{}\n]/g,'\x20')[_0x581993(0x3d2)](/  +/g,'\x20')};}async[a0_0x5ca971(0x6ad)](_0x54b6ab,_0x5db121){const _0x2f55f3=a0_0x5ca971;this[_0x2f55f3(0x56b)][_0x2f55f3(0x608)](this[_0x2f55f3(0x6dd)]+'\x20('+this[_0x2f55f3(0x3f0)]['wuid']+_0x2f55f3(0x5db)+_0x5db121+'\x27');let _0x352105={'number':_0x5db121,'options':{'delay':_0x54b6ab['delay']},'audioMessage':{'audio':_0x54b6ab[_0x2f55f3(0x89b)]}},_0x46e1a3=null;try{let _0x3ce9df=await this[_0x2f55f3(0x533)](_0x352105);if(_0x3ce9df&&_0x3ce9df['status'])return{'error':!0x1,'id':_0x3ce9df[_0x2f55f3(0x74a)]['id']};_0x46e1a3=JSON[_0x2f55f3(0x179)](_0x3ce9df),this[_0x2f55f3(0x56b)][_0x2f55f3(0x608)](this[_0x2f55f3(0x6dd)]+'\x20('+this[_0x2f55f3(0x3f0)][_0x2f55f3(0x547)]+_0x2f55f3(0x3a3)+_0x46e1a3);}catch(_0x52b0be){this['logger'][_0x2f55f3(0x2b1)](this[_0x2f55f3(0x6dd)]+'\x20('+this['instance'][_0x2f55f3(0x547)]+_0x2f55f3(0x88d)+(_0x52b0be instanceof Error?_0x52b0be[_0x2f55f3(0x4f4)]:JSON[_0x2f55f3(0x179)](_0x52b0be,null,0x2))),_0x46e1a3=_0x52b0be[_0x2f55f3(0x4f4)];}if(_0x46e1a3)return{'error':!0x0,'detail':(typeof _0x46e1a3==_0x2f55f3(0x487)?JSON[_0x2f55f3(0x179)](_0x46e1a3,null,0x2):_0x46e1a3)['replace'](/[\[\]{}\n]/g,'\x20')['replace'](/  +/g,'\x20')};}async['groupDesc'](_0xad2d9f){const _0x5c2bdf=a0_0x5ca971;try{return await this[_0x5c2bdf(0x2cc)][_0x5c2bdf(0x442)](_0xad2d9f['groupJid'],_0xad2d9f[_0x5c2bdf(0x44d)]),{'update':_0x5c2bdf(0x1e4)};}catch(_0x5b63c3){let _0x31ee3b=_0x5c2bdf(0x387),_0x41a46f=_0x5b63c3 instanceof Error?_0x5b63c3[_0x5c2bdf(0x4f4)]:typeof _0x5b63c3==_0x5c2bdf(0x487)?JSON[_0x5c2bdf(0x179)](_0x5b63c3):_0x5b63c3,_0x15c214=_0x31ee3b+':\x20'+_0x41a46f;throw this[_0x5c2bdf(0x56b)][_0x5c2bdf(0x2b1)](this[_0x5c2bdf(0x6dd)]+'\x20('+this[_0x5c2bdf(0x3f0)][_0x5c2bdf(0x547)]+_0x5c2bdf(0x3a3)+_0x15c214),new O(_0x15c214);}}async[a0_0x5ca971(0x80a)](_0x52f9d9){const _0x2e45b2=a0_0x5ca971;try{return await this['client'][_0x2e45b2(0x66a)](_0x52f9d9[_0x2e45b2(0x17e)],_0x52f9d9[_0x2e45b2(0x41c)]),{'update':_0x2e45b2(0x1e4)};}catch(_0x3e8bf8){let _0x2690e0=_0x2e45b2(0x4fd),_0x369d08=_0x3e8bf8 instanceof Error?_0x3e8bf8[_0x2e45b2(0x4f4)]:typeof _0x3e8bf8==_0x2e45b2(0x487)?JSON[_0x2e45b2(0x179)](_0x3e8bf8):_0x3e8bf8,_0x5a5fed=_0x2690e0+':\x20'+_0x369d08;throw this['logger'][_0x2e45b2(0x2b1)](this[_0x2e45b2(0x6dd)]+'\x20('+this[_0x2e45b2(0x3f0)]['wuid']+'):\x20'+_0x5a5fed),new O(_0x5a5fed);}}async[a0_0x5ca971(0x56a)](_0xd69d13){const _0x118054=a0_0x5ca971;try{let _0x98b2ef=await this[_0x118054(0x2cc)][_0x118054(0x7b6)](_0xd69d13[_0x118054(0x17e)],_0xd69d13[_0x118054(0x605)]);return{'success':!0x0};}catch(_0x49fc3c){let _0x43d00f=_0x118054(0x423),_0x2c084f=_0x49fc3c instanceof Error?_0x49fc3c[_0x118054(0x4f4)]:typeof _0x49fc3c==_0x118054(0x487)?JSON['stringify'](_0x49fc3c):_0x49fc3c,_0x43d0eb=_0x43d00f+':\x20'+_0x2c084f;throw this[_0x118054(0x56b)][_0x118054(0x2b1)](this[_0x118054(0x6dd)]+'\x20('+this['instance']['wuid']+'):\x20'+_0x43d0eb),new O(_0x43d0eb);}}async['groupSetting'](_0x1c3e22){const _0x17ea9c=a0_0x5ca971;try{return await this[_0x17ea9c(0x2cc)][_0x17ea9c(0x699)](_0x1c3e22[_0x17ea9c(0x17e)],_0x1c3e22[_0x17ea9c(0x76b)]),{'update':_0x17ea9c(0x1e4)};}catch(_0x264106){let _0x254f0a=_0x17ea9c(0x5e6),_0x17757b=_0x264106 instanceof Error?_0x264106['message']:typeof _0x264106==_0x17ea9c(0x487)?JSON[_0x17ea9c(0x179)](_0x264106):_0x264106,_0x4e316d=_0x254f0a+':\x20'+_0x17757b;throw this['logger'][_0x17ea9c(0x2b1)](this['instanceName']+'\x20('+this[_0x17ea9c(0x3f0)]['wuid']+'):\x20'+_0x4e316d),new O(_0x4e316d);}}async[a0_0x5ca971(0x856)](_0x29fdf9){const _0x1e86ac=a0_0x5ca971;try{let _0x5a8a61;if((0x0,L['isURL'])(_0x29fdf9['image'])){let _0x4fbf91=new Date()[_0x1e86ac(0x409)](),_0x5956b=_0x29fdf9['image']+_0x1e86ac(0x7e5)+_0x4fbf91;_0x5a8a61=(await ee[_0x1e86ac(0x678)][_0x1e86ac(0x76d)](_0x5956b,{'responseType':'arraybuffer'}))[_0x1e86ac(0x5c9)];}else{if((0x0,L[_0x1e86ac(0x4d7)])(_0x29fdf9[_0x1e86ac(0x525)]))_0x5a8a61=Buffer[_0x1e86ac(0x724)](_0x29fdf9['image'],_0x1e86ac(0x1d9));else throw new m(_0x1e86ac(0x1eb));}return await this[_0x1e86ac(0x2cc)][_0x1e86ac(0x3f6)](_0x29fdf9[_0x1e86ac(0x17e)],_0x5a8a61),{'update':_0x1e86ac(0x1e4)};}catch(_0x11dfec){let _0x35d318=_0x1e86ac(0x37c),_0x1fd018=_0x11dfec instanceof Error?_0x11dfec[_0x1e86ac(0x4f4)]:typeof _0x11dfec==_0x1e86ac(0x487)?JSON[_0x1e86ac(0x179)](_0x11dfec):_0x11dfec,_0x1bea7a=_0x35d318+':\x20'+_0x1fd018;throw this[_0x1e86ac(0x56b)][_0x1e86ac(0x2b1)](this['instanceName']+'\x20('+this[_0x1e86ac(0x3f0)][_0x1e86ac(0x547)]+_0x1e86ac(0x3a3)+_0x1bea7a),new O(_0x1bea7a);}}},Gt=class u{constructor(_0x56973c,_0x40633b,_0x4917fb){const _0x5c05fc=a0_0x5ca971;this[_0x5c05fc(0x7f3)]=_0x56973c,this[_0x5c05fc(0x601)]=_0x40633b,this[_0x5c05fc(0x7fa)]=_0x4917fb,this['db']={},this['redis']={},this[_0x5c05fc(0x56b)]=new $(u[_0x5c05fc(0x41c)]),this['waInstances']={},(this[_0x5c05fc(0x73b)](),this[_0x5c05fc(0x82a)](),Object[_0x5c05fc(0x202)](this['db'],_0x40633b[_0x5c05fc(0x76d)]('DATABASE')),Object[_0x5c05fc(0x202)](this[_0x5c05fc(0x7a4)],_0x40633b[_0x5c05fc(0x76d)]('REDIS')),this['dbInstance']=this['db'][_0x5c05fc(0x325)]?this[_0x5c05fc(0x7fa)][_0x5c05fc(0x78a)]?.['db'](this['db'][_0x5c05fc(0x543)]['DB_PREFIX_NAME']+_0x5c05fc(0x57a)):void 0x0,this[_0x5c05fc(0x625)]=this['redis'][_0x5c05fc(0x325)]?new ge(this[_0x5c05fc(0x7a4)]):void 0x0);}async[a0_0x5ca971(0x382)](_0x4d5f45){const _0x2f4284=a0_0x5ca971;if(_0x4d5f45&&!this['waInstances'][_0x4d5f45])throw new q(_0x2f4284(0x556)+_0x4d5f45+_0x2f4284(0x1f7));let _0x220826=[];for await(let [_0x3a23a5,_0x56b46a]of Object[_0x2f4284(0x327)](this[_0x2f4284(0x61b)]))if(_0x56b46a&&_0x56b46a[_0x2f4284(0x1ec)][_0x2f4284(0x886)]===_0x2f4284(0x158)){let _0x371591=await this['repository'][_0x2f4284(0x6aa)][_0x2f4284(0x2d4)](_0x3a23a5);_0x220826['push']({'instance':{'instanceName':_0x3a23a5,'apikey':_0x371591[_0x2f4284(0x5d5)],'owner':_0x56b46a['wuid'],'profileName':await _0x56b46a[_0x2f4284(0x14b)]()||_0x2f4284(0x4f6),'profilePictureUrl':_0x56b46a[_0x2f4284(0x84f)]}});}return _0x220826[_0x2f4284(0x2d4)](_0x18ec41=>_0x18ec41['instance'][_0x2f4284(0x6dd)]===_0x4d5f45)??_0x220826;}async[a0_0x5ca971(0x7a2)](_0x24c2a8){const _0x4fd713=a0_0x5ca971;if(this['db'][_0x4fd713(0x325)]&&(await this[_0x4fd713(0x7fa)][_0x4fd713(0x78a)][_0x4fd713(0x416)](),(await this[_0x4fd713(0x211)][_0x4fd713(0x68c)]())['length']>0x0&&await this[_0x4fd713(0x211)][_0x4fd713(0x4cd)](_0x24c2a8)),this[_0x4fd713(0x7a4)]['ENABLED']){this[_0x4fd713(0x625)][_0x4fd713(0x5ba)]=_0x24c2a8,await this[_0x4fd713(0x625)][_0x4fd713(0x87e)]();return;}}async[a0_0x5ca971(0x758)](){const _0x35d935=a0_0x5ca971;await this['InstancesAlterarTodas']();let _0x3de152=async _0x4266f3=>{const _0x283a96=a0_0x2d21;let _0x4ae161=new $e(this[_0x283a96(0x601)],this[_0x283a96(0x7f3)],this['repository']);_0x4ae161[_0x283a96(0x6dd)]=_0x4266f3,await _0x4ae161[_0x283a96(0x3d5)](),this[_0x283a96(0x61b)][_0x4266f3]=_0x4ae161;};try{if(this['redis'][_0x35d935(0x325)]){let _0x50ceb6=await this[_0x35d935(0x625)]['instanceKeys']();_0x50ceb6?.[_0x35d935(0x532)]>0x0&&_0x50ceb6['forEach'](async _0x50e601=>await _0x3de152(_0x50e601[_0x35d935(0x266)](':')[0x1]));return;}if(this['db'][_0x35d935(0x325)]){await this[_0x35d935(0x7fa)][_0x35d935(0x78a)][_0x35d935(0x416)]();let _0x5c66ca=await this[_0x35d935(0x211)]['collections']();_0x5c66ca['length']>0x0&&_0x5c66ca['forEach'](async _0x3f7f84=>await _0x3de152(_0x3f7f84[_0x35d935(0x74e)][_0x35d935(0x3d2)](/^[\w-]+\./,'')));return;}}catch(_0x3fa911){this[_0x35d935(0x56b)]['error'](_0x3fa911);}}async[a0_0x5ca971(0x14d)](){const _0x4af733=a0_0x5ca971;try{let _0x5d0fbf=await this[_0x4af733(0x7fa)]['auth'][_0x4af733(0x864)]({'online':!0x1});for(let _0x139e81 of _0x5d0fbf){let _0x215e93=_0x139e81[_0x4af733(0x4a6)];await re[_0x4af733(0x488)](K,_0x215e93);}console[_0x4af733(0x2a9)](_0x4af733(0x817)+_0x5d0fbf[_0x4af733(0x532)]);let _0x4bc526={'online':!0x1},_0xe8eef9=await this[_0x4af733(0x7fa)][_0x4af733(0x6aa)][_0x4af733(0x63e)](_0x4bc526);console[_0x4af733(0x2a9)]('Instâncias\x20removidas:\x20'+_0xe8eef9[_0x4af733(0x6e2)]);}catch(_0x596d5a){console[_0x4af733(0x2b1)](_0x4af733(0x36c),_0x596d5a);}}async[a0_0x5ca971(0x354)](){const _0x5deb41=a0_0x5ca971;try{let _0x1455a0={'online':!0x1},_0x3d6c56={'online':!0x1,'lastDisconnect':Date[_0x5deb41(0x7d1)]()},_0x219106=await this[_0x5deb41(0x7fa)][_0x5deb41(0x6aa)][_0x5deb41(0x3de)](_0x1455a0,_0x3d6c56);await this[_0x5deb41(0x14d)]();}catch(_0x1e2e16){console[_0x5deb41(0x2b1)]('Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:',_0x1e2e16);}}['removeInstance'](){const _0x2ded08=a0_0x5ca971;this['eventEmitter']['on'](_0x2ded08(0x4b2),async _0x2bb25f=>{const _0x53ef01=_0x2ded08;try{this[_0x53ef01(0x61b)][_0x2bb25f]=void 0x0;}catch{}try{this[_0x53ef01(0x7a2)](_0x2bb25f);}finally{this[_0x53ef01(0x56b)][_0x53ef01(0x38d)](_0x53ef01(0x556)+_0x2bb25f+_0x53ef01(0x4db));}});}[a0_0x5ca971(0x82a)](){const _0x5cae9a=a0_0x5ca971;this['eventEmitter']['on'](_0x5cae9a(0x2c8),async _0x7c3bd0=>{const _0x2b845f=_0x5cae9a;try{this[_0x2b845f(0x61b)][_0x7c3bd0]=void 0x0;}catch{}try{this[_0x2b845f(0x7a2)](_0x7c3bd0);}finally{this[_0x2b845f(0x56b)][_0x2b845f(0x38d)](_0x2b845f(0x556)+_0x7c3bd0+_0x2b845f(0x6b2));}});}},Bt=class extends _{[a0_0x5ca971(0x1ad)](_0x4edd56){return sa(_0x4edd56);}async[a0_0x5ca971(0x772)](_0x5cf8c5){const _0x4b931c=a0_0x5ca971;if(_0x5cf8c5['length']!==0x0)try{return{'insertCount':(await this[_0x4b931c(0x1ad)](_0x5cf8c5[0x0][_0x4b931c(0x42d)])[_0x4b931c(0x493)]([..._0x5cf8c5]))[_0x4b931c(0x532)]};}catch(_0x44b63d){return _0x44b63d;}}async[a0_0x5ca971(0x2d4)](_0x442e1c,_0x2edab8){const _0x15b436=a0_0x5ca971;try{let _0x180a0d=this['getChatModelForOwner'](_0x2edab8),_0x52b33e=I(_0x442e1c[_0x15b436(0x1cf)]);return await _0x180a0d['find'](_0x52b33e)[_0x15b436(0x1ba)]({'lastmsg':-0x1})['limit'](_0x442e1c?.[_0x15b436(0x268)]??0x0)['lean']();}catch{return[];}}async[a0_0x5ca971(0x2be)](_0x2b8e1b,_0x5054fe){const _0x588a19=a0_0x5ca971;try{let _0x29b05c=this[_0x588a19(0x1ad)](_0x5054fe),_0x489cd4=I(_0x2b8e1b['where']);return _0x489cd4[_0x588a19(0x1b7)]={'$ne':[]},await _0x29b05c[_0x588a19(0x2d4)](_0x489cd4)['sort']({'lastmsg':-0x1})[_0x588a19(0x268)](_0x2b8e1b?.[_0x588a19(0x268)]??0x0)['lean']();}catch{return[];}}async[a0_0x5ca971(0x8a2)](_0x4ffda9,_0x24b7ca){const _0x57af7a=a0_0x5ca971;try{return{'deletedCount':(await this[_0x57af7a(0x1ad)](_0x24b7ca)[_0x57af7a(0x63e)]({..._0x4ffda9[_0x57af7a(0x1cf)]}))[_0x57af7a(0x5c7)]};}catch(_0x5876f9){return{'error':_0x5876f9?.[_0x57af7a(0x7b1)]()};}}async[a0_0x5ca971(0x3c9)](_0x4a6fb8,_0x49588e){const _0x28c0a7=a0_0x5ca971;try{return await this[_0x28c0a7(0x1ad)](_0x49588e)[_0x28c0a7(0x63e)]({..._0x4a6fb8[_0x28c0a7(0x1cf)]}),[];}catch(_0x508fc1){return{'error':_0x508fc1?.[_0x28c0a7(0x7b1)]()};}}async[a0_0x5ca971(0x640)](_0x2f2f3b,_0x36c3c5){const _0x3c612a=a0_0x5ca971;try{let _0x51e5b8=this['getChatModelForOwner'](_0x36c3c5),_0x10b472=I(_0x2f2f3b[_0x3c612a(0x1cf)]);return await _0x51e5b8[_0x3c612a(0x640)](_0x10b472)[_0x3c612a(0x1df)]();}catch{return null;}}async[a0_0x5ca971(0x743)](_0x1cabe1,_0x3bf9c1,_0x236bea,_0x3a54a2,_0x12213d=a0_0x5ca971(0x5fc)){const _0x361da8=a0_0x5ca971;try{let _0x3dc434={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x3a54a2},_0xa14efa=this[_0x361da8(0x1ad)](_0x236bea),_0x408e0d=I(_0x1cabe1[_0x361da8(0x1cf)]);Object[_0x361da8(0x418)](_0x3bf9c1)[_0x361da8(0x491)](_0x1d08a8=>{_0x3bf9c1[_0x1d08a8]==null&&delete _0x3bf9c1[_0x1d08a8];});let _0x3583d9={};return _0x3583d9[_0x12213d]=_0x3bf9c1,await _0xa14efa[_0x361da8(0x5dc)](_0x408e0d,_0x3583d9,_0x3dc434);}catch(_0x14b505){return console[_0x361da8(0x2b1)](_0x14b505),null;}}async[a0_0x5ca971(0x829)](_0x4f1261){const _0x5c0d34=a0_0x5ca971;try{let _0x47dd01=this['getChatModelForOwner'](_0x4f1261[0x0][_0x5c0d34(0x56c)][_0x5c0d34(0x1cf)][_0x5c0d34(0x42d)]),_0x583f17=_0x4f1261[_0x5c0d34(0x7a8)](_0x1baac4=>({'updateOne':{'filter':{..._0x1baac4[_0x5c0d34(0x56c)][_0x5c0d34(0x1cf)]},'update':{'$set':_0x1baac4[_0x5c0d34(0x26b)]},'upsert':!0x0}})),_0x253398=await _0x47dd01[_0x5c0d34(0x429)](_0x583f17);return _0x253398[_0x5c0d34(0x366)]+_0x253398['upsertedCount'];}catch(_0x33bdc1){return console[_0x5c0d34(0x2b1)](_0x33bdc1),0x0;}}async[a0_0x5ca971(0x65e)](_0x3bb0d1){const _0x13af15=a0_0x5ca971;try{let _0x8e7c26={'group_isCommunity':'','group_announce':'','group_size':''},_0x2e621f={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x22d6be={'$unset':_0x8e7c26};return(await this[_0x13af15(0x1ad)](_0x3bb0d1)[_0x13af15(0x829)](_0x2e621f,_0x22d6be))[_0x13af15(0x366)];}catch(_0x57f632){return console[_0x13af15(0x2b1)]('Error\x20removing\x20unused\x20chat\x20fields:',_0x57f632),0x0;}}async['updateMissingEtiquetas'](_0x339795){const _0x36ba44=a0_0x5ca971;try{let _0x3ced48=this[_0x36ba44(0x1ad)](_0x339795),_0x46bda1={'leadInfo.etiquetas':{'$exists':!0x1}},_0x263396={'$set':{'leadInfo.etiquetas':[]}};return(await _0x3ced48[_0x36ba44(0x829)](_0x46bda1,_0x263396))['modifiedCount'];}catch(_0x416067){return console[_0x36ba44(0x2b1)](_0x416067),0x0;}}async['updateMissingTags'](_0x1f7df0){const _0xe7e78f=a0_0x5ca971;try{let _0x5889e6=this[_0xe7e78f(0x1ad)](_0x1f7df0),_0x1e20fc={'leadInfo.tags':{'$exists':!0x1}},_0x2724f0={'$set':{'leadInfo.tags':[]}};return(await _0x5889e6['updateMany'](_0x1e20fc,_0x2724f0))[_0xe7e78f(0x366)];}catch(_0x185c9d){return console[_0xe7e78f(0x2b1)](_0x185c9d),0x0;}}async[a0_0x5ca971(0x2b7)](_0x2d35a3){const _0x629260=a0_0x5ca971;try{let _0x5db2e5=this['getChatModelForOwner'](_0x2d35a3),_0x2af6b6={'leadInfo.customFields':{'$exists':!0x1}},_0x2df14a={'$set':{'leadInfo.customFields':[]}};return(await _0x5db2e5[_0x629260(0x829)](_0x2af6b6,_0x2df14a))[_0x629260(0x366)];}catch(_0x25f443){return console['error'](_0x25f443),0x0;}}async['insertMany'](_0x4af303,_0x55ec89){const _0x11260c=a0_0x5ca971;if(!Array[_0x11260c(0x4d0)](_0x4af303)||_0x4af303[_0x11260c(0x532)]===0x0)throw new Error('Nenhum\x20chat\x20fornecido\x20para\x20inserção.');try{return(await this[_0x11260c(0x1ad)](_0x55ec89)[_0x11260c(0x493)](_0x4af303))[_0x11260c(0x532)];}catch(_0x36ea16){throw console[_0x11260c(0x2b1)]('Erro\x20ao\x20inserir\x20chats:',_0x36ea16),_0x36ea16;}}async[a0_0x5ca971(0x152)](_0x47e195,_0x62a682){const _0x245edc=a0_0x5ca971;try{await this['getChatModelForOwner'](_0x62a682)[_0x245edc(0x631)]({'_id':_0x47e195});}catch(_0x5d0803){throw console[_0x245edc(0x2b1)](_0x245edc(0x7b2),_0x5d0803),_0x5d0803;}}},Wt=class extends _{constructor(_0x4cdfcc,_0x3fc5f1,_0x45d15a){const _0x470205=a0_0x5ca971;super(_0x3fc5f1),this[_0x470205(0x6d4)]=_0x4cdfcc,this[_0x470205(0x601)]=_0x3fc5f1,this[_0x470205(0x5aa)]=_0x45d15a;}async[a0_0x5ca971(0x772)](_0x12b907){const _0x10e180=a0_0x5ca971;if(_0x12b907[_0x10e180(0x532)]!==0x0)try{return{'insertCount':(await this['cacheContactModel'][_0x10e180(0x493)]([..._0x12b907]))[_0x10e180(0x532)]};}catch(_0x350234){return _0x350234;}}async[a0_0x5ca971(0x26b)](_0x2fc760,_0x2e169a){const _0x1591d4=a0_0x5ca971;try{let _0x4bbb8b=I(_0x2fc760[_0x1591d4(0x1cf)]);return{'updatedCount':(await this[_0x1591d4(0x6d4)][_0x1591d4(0x829)](_0x4bbb8b,{'$set':_0x2e169a}))[_0x1591d4(0x366)]};}catch(_0x43de85){return console[_0x1591d4(0x2b1)](_0x1591d4(0x262),_0x43de85),{'error':_0x43de85[_0x1591d4(0x7b1)]()};}}async[a0_0x5ca971(0x691)](_0x3e341e){const _0x2bb89c=a0_0x5ca971;try{let _0x135ba0={'_id':{'$in':_0x3e341e}};return await this[_0x2bb89c(0x6d4)][_0x2bb89c(0x2d4)](_0x135ba0)[_0x2bb89c(0x1df)]();}catch(_0x532dc0){return console['error']('Error\x20finding\x20many\x20contacts:',_0x532dc0),[];}}async['delete'](_0x1210cf){const _0x52152a=a0_0x5ca971;try{return{'deletedCount':(await this['cacheContactModel'][_0x52152a(0x63e)]({..._0x1210cf[_0x52152a(0x1cf)]}))[_0x52152a(0x5c7)]};}catch(_0x20e251){return{'error':_0x20e251?.['toString']()};}}async[a0_0x5ca971(0x2d4)](_0x281871){const _0x5ab8e7=a0_0x5ca971;try{let _0x2c42b2=I(_0x281871['where']);return await this[_0x5ab8e7(0x6d4)][_0x5ab8e7(0x2d4)](_0x2c42b2)[_0x5ab8e7(0x268)](_0x281871?.[_0x5ab8e7(0x268)]??0x0)[_0x5ab8e7(0x1df)]();}catch{return[];}}async[a0_0x5ca971(0x640)](_0x2bbc9b){const _0x45c2b8=a0_0x5ca971;try{let _0x4b53e5=I(_0x2bbc9b['where']);return await this[_0x45c2b8(0x6d4)][_0x45c2b8(0x640)](_0x4b53e5)['lean']();}catch{return null;}}},zt=class extends _{['getLabelModelForOwner'](_0x27a6ab){return va(_0x27a6ab);}async[a0_0x5ca971(0x743)](_0x26666d,_0x52bdef,_0x3054a5,_0x2462ca){const _0x25e1cd=a0_0x5ca971;try{let _0x498dbf={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x2462ca},_0x3e2efc=this[_0x25e1cd(0x619)](_0x3054a5),_0x3e5db1=I(_0x26666d[_0x25e1cd(0x1cf)]);return await _0x3e2efc[_0x25e1cd(0x5dc)](_0x3e5db1,{'$set':_0x52bdef},_0x498dbf);}catch(_0x1328f7){return console[_0x25e1cd(0x2b1)](_0x1328f7),null;}}async[a0_0x5ca971(0x2d4)](_0x3940b3,_0x13b99a){const _0x2c48c4=a0_0x5ca971;try{let _0x146a09=this[_0x2c48c4(0x619)](_0x13b99a),_0xb79dbd=I(_0x3940b3['where']);return await _0x146a09['find'](_0xb79dbd);}catch(_0x401aa4){console[_0x2c48c4(0x2b1)](_0x401aa4);}}async[a0_0x5ca971(0x8a2)](_0x3ddc0f,_0x53418f){const _0x463802=a0_0x5ca971;try{let _0x39e6ca=this[_0x463802(0x619)](_0x53418f),_0x2edbcb=I(_0x3ddc0f[_0x463802(0x1cf)]);await _0x39e6ca[_0x463802(0x63e)](_0x2edbcb);}catch(_0x462034){console[_0x463802(0x2b1)](_0x462034);}}async[a0_0x5ca971(0x3c9)](_0xe5cb0b){const _0x5176f4=a0_0x5ca971;try{return await this[_0x5176f4(0x619)](_0xe5cb0b)[_0x5176f4(0x819)][_0x5176f4(0x39f)](),{'success':!0x0};}catch(_0x261807){return console[_0x5176f4(0x2b1)](_0x261807),{'success':!0x1,'error':_0x261807};}}},Ht=class{constructor(_0x317eed){const _0x560ee2=a0_0x5ca971;this[_0x560ee2(0x26e)]=_0x317eed;}async[a0_0x5ca971(0x6d2)]({instanceName:_0x227bb5},_0x1d6144){const _0x3a8d37=a0_0x5ca971;return await this[_0x3a8d37(0x26e)][_0x3a8d37(0x61b)][_0x227bb5][_0x3a8d37(0x6d2)](_0x1d6144);}async['whatsappNumber']({instanceName:_0x532fb2},_0x5b4e5b){const _0x50b03b=a0_0x5ca971;return await this[_0x50b03b(0x26e)]['waInstances'][_0x532fb2][_0x50b03b(0x5c1)](_0x5b4e5b);}async['importChats']({instanceName:_0x505247},_0x51a42d){const _0x144247=a0_0x5ca971;return await this[_0x144247(0x26e)]['waInstances'][_0x505247][_0x144247(0x64d)](_0x51a42d);}async[a0_0x5ca971(0x6f3)]({instanceName:_0x53fd2d},_0x593448){const _0x1db153=a0_0x5ca971;return await this['waMonitor']['waInstances'][_0x53fd2d][_0x1db153(0x5d6)](_0x593448);}async['archiveChat']({instanceName:_0x3fac8d},_0x303b97){const _0x24a913=a0_0x5ca971;return await this['waMonitor'][_0x24a913(0x61b)][_0x3fac8d][_0x24a913(0x235)](_0x303b97);}async[a0_0x5ca971(0x612)]({instanceName:_0x1f6aeb},_0x2bc62a){const _0x39435c=a0_0x5ca971;return await this[_0x39435c(0x26e)][_0x39435c(0x61b)][_0x1f6aeb][_0x39435c(0x612)](_0x2bc62a);}async[a0_0x5ca971(0x59b)]({instanceName:_0x34c9bf},_0x18e329){const _0x87c57c=a0_0x5ca971;return await this[_0x87c57c(0x26e)][_0x87c57c(0x61b)][_0x34c9bf]['profilePicture'](_0x18e329[_0x87c57c(0x274)]);}async[a0_0x5ca971(0x54c)]({instanceName:_0x3cd9c0},_0x28b1b8){const _0x36003f=a0_0x5ca971;return await this[_0x36003f(0x26e)]['waInstances'][_0x3cd9c0]['fetchProfile'](_0x28b1b8[_0x36003f(0x274)]);}async['updatePresence']({instanceName:_0xee1c5f},_0x5a38c1){const _0x1202ab=a0_0x5ca971;return await this[_0x1202ab(0x26e)]['waInstances'][_0xee1c5f][_0x1202ab(0x635)](_0x5a38c1);}async['fetchContacts']({instanceName:_0x3e3b49},_0x45d9dc){const _0x57cfb7=a0_0x5ca971;return await this[_0x57cfb7(0x26e)][_0x57cfb7(0x61b)][_0x3e3b49][_0x57cfb7(0x359)](_0x45d9dc);}async[a0_0x5ca971(0x3be)]({instanceName:_0x15bbfb},_0x12ee1a){const _0x41e290=a0_0x5ca971;return await this['waMonitor'][_0x41e290(0x61b)][_0x15bbfb][_0x41e290(0x3be)](_0x12ee1a);}async[a0_0x5ca971(0x1fb)]({instanceName:_0x43012a},_0x16071c){const _0x1f99b7=a0_0x5ca971;return await this[_0x1f99b7(0x26e)][_0x1f99b7(0x61b)][_0x43012a]['fetchMessages'](_0x16071c);}async[a0_0x5ca971(0x187)]({instanceName:_0x242714}){const _0x5d6346=a0_0x5ca971;return await this['waMonitor'][_0x5d6346(0x61b)][_0x242714][_0x5d6346(0x187)]();}async['fetchChats']({instanceName:_0x16a927}){const _0x587b57=a0_0x5ca971;return await this[_0x587b57(0x26e)]['waInstances'][_0x16a927]['fetchChats']();}async[a0_0x5ca971(0x734)]({instanceName:_0x4bae75}){const _0x581389=a0_0x5ca971;return await this[_0x581389(0x26e)][_0x581389(0x61b)][_0x4bae75][_0x581389(0x734)]();}async[a0_0x5ca971(0x40a)]({instanceName:_0x20a632},_0x52a3c9){const _0x551e2c=a0_0x5ca971;return await this[_0x551e2c(0x26e)][_0x551e2c(0x61b)][_0x20a632][_0x551e2c(0x40a)](_0x52a3c9);}async[a0_0x5ca971(0x65c)]({instanceName:_0x356533},_0x60dd7b){const _0x2a2a6a=a0_0x5ca971;return await this[_0x2a2a6a(0x26e)]['waInstances'][_0x356533][_0x2a2a6a(0x65c)](_0x60dd7b[_0x2a2a6a(0x274)]);}async[a0_0x5ca971(0x71b)]({instanceName:_0x6d283e},_0x59bad2){const _0x414f97=a0_0x5ca971;return await this[_0x414f97(0x26e)][_0x414f97(0x61b)][_0x6d283e][_0x414f97(0x71b)](_0x59bad2['name']);}async[a0_0x5ca971(0x3c3)]({instanceName:_0x48833c},_0x23f976){const _0x4d50c7=a0_0x5ca971;return await this[_0x4d50c7(0x26e)][_0x4d50c7(0x61b)][_0x48833c]['updateProfileStatus'](_0x23f976[_0x4d50c7(0x2f7)]);}async[a0_0x5ca971(0x3f6)]({instanceName:_0x40aa83},_0x4d3fa4){const _0x27e73e=a0_0x5ca971;return await this[_0x27e73e(0x26e)][_0x27e73e(0x61b)][_0x40aa83][_0x27e73e(0x3f6)](_0x4d3fa4[_0x27e73e(0x2ee)]);}async[a0_0x5ca971(0x849)]({instanceName:_0x465176},_0x274973){const _0x428ab3=a0_0x5ca971;return await this['waMonitor'][_0x428ab3(0x61b)][_0x465176][_0x428ab3(0x849)]();}},Kt=require(a0_0x5ca971(0x456)),Qt=class u{constructor(_0x2df8c3,_0x44d673,_0x3ab91c,_0x32e1da,_0x25b143){const _0x32ac15=a0_0x5ca971;this[_0x32ac15(0x26e)]=_0x2df8c3,this['configService']=_0x44d673,this[_0x32ac15(0x7fa)]=_0x3ab91c,this['eventEmitter']=_0x32e1da,this[_0x32ac15(0x283)]=_0x25b143,this['logger']=new $(u[_0x32ac15(0x41c)]);}async[a0_0x5ca971(0x660)]({instanceName:_0x29bd59,apikey:_0x515b56,number:_0x4e9bc8,proxy:_0x4ea53e=!0x0}){const _0x4fa28a=a0_0x5ca971;try{let _0x381e89=new $e(this[_0x4fa28a(0x601)],this[_0x4fa28a(0x7f3)],this['repository']);_0x381e89[_0x4fa28a(0x6dd)]=_0x29bd59,this['waMonitor'][_0x4fa28a(0x61b)][_0x381e89[_0x4fa28a(0x6dd)]]=_0x381e89;let _0x2a9f47={};_0x515b56?(await this[_0x4fa28a(0x7fa)][_0x4fa28a(0x6aa)]['create']({'apikey':_0x515b56},_0x29bd59),_0x2a9f47[_0x4fa28a(0x5d5)]=_0x515b56):_0x2a9f47=await this[_0x4fa28a(0x283)][_0x4fa28a(0x355)]({'instanceName':_0x381e89[_0x4fa28a(0x6dd)]});let _0x268ed6;if(_0x4e9bc8){if(_0x268ed6=await this[_0x4fa28a(0x2f4)](_0x4e9bc8),_0x268ed6[_0x4fa28a(0x2b1)])throw new O(_0x268ed6['error'][_0x4fa28a(0x7b1)]());_0x4e9bc8=_0x268ed6[_0x4fa28a(0x274)];}let _0x48e9ed;return await _0x381e89['connectToWhatsapp'](_0x4e9bc8),await(0x0,Kt['delay'])(0xfa0),_0x4e9bc8&&await(0x0,Kt[_0x4fa28a(0x190)])(0xbb8),_0x48e9ed=_0x381e89['qrCode'],{'instance':{'instanceName':_0x381e89[_0x4fa28a(0x6dd)],'status':_0x4fa28a(0x241)},'hash':_0x2a9f47,'qrcode':_0x48e9ed};}catch(_0x3d4f74){throw this[_0x4fa28a(0x56b)][_0x4fa28a(0x2b1)](_0x3d4f74),_0x3d4f74;}}async[a0_0x5ca971(0x80f)]({instanceName:_0x4b152d,number:_0x210677=null}){const _0x426045=a0_0x5ca971;try{let _0x337d0b=this[_0x426045(0x26e)][_0x426045(0x61b)][_0x4b152d];switch(_0x337d0b?.[_0x426045(0x1ec)]?.['state']){case _0x426045(0x73e):return await _0x337d0b[_0x426045(0x3d5)](_0x210677),await(0x0,Kt[_0x426045(0x190)])(0x7d0),_0x337d0b['qrCode'];case _0x426045(0x51a):return _0x337d0b[_0x426045(0x7ee)];default:return await this[_0x426045(0x726)]({'instanceName':_0x4b152d});}}catch(_0x1ea163){this[_0x426045(0x56b)][_0x426045(0x2a9)](_0x1ea163);}}async[a0_0x5ca971(0x726)]({instanceName:_0x7a944}){const _0x5b74c6=a0_0x5ca971;let _0x54123d=this[_0x5b74c6(0x26e)][_0x5b74c6(0x61b)][_0x7a944][_0x5b74c6(0x1ec)],_0x486fe2=null;_0x54123d[_0x5b74c6(0x886)]===_0x5b74c6(0x158)&&_0x7a944&&(_0x486fe2=await this[_0x5b74c6(0x26e)][_0x5b74c6(0x382)](_0x7a944));let _0x362ff8=null;return _0x54123d[_0x5b74c6(0x886)]===_0x5b74c6(0x51a)&&_0x7a944&&(_0x362ff8=this[_0x5b74c6(0x26e)][_0x5b74c6(0x61b)][_0x7a944]['qrCode']),{'instance':_0x7a944,'connectionStatus':_0x54123d,'instanceInfo':_0x486fe2,'qrcode':_0x362ff8};}async[a0_0x5ca971(0x2f4)](_0x10a25e){const _0x30dc33=a0_0x5ca971;_0x10a25e=_0x10a25e[_0x30dc33(0x3d2)](/\D/g,'');let _0xdecd11=Object['keys'](this[_0x30dc33(0x26e)][_0x30dc33(0x61b)])[_0x30dc33(0x587)](_0x580520=>{const _0x507155=_0x30dc33;let _0x2c9d32=this[_0x507155(0x26e)][_0x507155(0x61b)][_0x580520];return _0x2c9d32&&_0x2c9d32[_0x507155(0x1ec)]&&_0x2c9d32[_0x507155(0x1ec)][_0x507155(0x886)]===_0x507155(0x158);});if(_0xdecd11['length']===0x0)return{'number':this[_0x30dc33(0x3a6)](_0x10a25e)};let _0x86f475=Math[_0x30dc33(0x7c4)](Math[_0x30dc33(0x541)]()*_0xdecd11[_0x30dc33(0x532)]),_0x562d15=_0xdecd11[_0x86f475];try{let _0x402ae0=(await this[_0x30dc33(0x26e)]['waInstances'][_0x562d15][_0x30dc33(0x5c1)]({'numbers':[_0x10a25e]}))['shift']();return _0x402ae0['exists']?{'number':_0x402ae0[_0x30dc33(0x5e2)]['replace']('@s.whatsapp.net','')}:{'number':_0x10a25e,'error':_0x30dc33(0x186)};}catch(_0x16b7b7){return this[_0x30dc33(0x56b)][_0x30dc33(0x2b1)](_0x30dc33(0x7f1)+_0x16b7b7),{'number':_0x10a25e,'error':'Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.'};}}['formatBRNumber'](_0x4731e7){const _0x31aee1=a0_0x5ca971;let _0x135173=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x31aee1(0x5ac)](_0x4731e7);if(_0x135173&&_0x135173[0x1]==='55'){let _0x2bd55c=_0x135173[0x2],_0x4452e9=_0x135173[0x3],_0x4efd9c=_0x135173[0x4];if(parseInt(_0x2bd55c)>=0x1f&&_0x4452e9==='9')return _0x135173[0x1]+_0x2bd55c+_0x4efd9c;}return _0x4731e7;}async[a0_0x5ca971(0x7fb)]({instanceName:_0x41806d}){const _0x1b1b75=a0_0x5ca971;try{return this[_0x1b1b75(0x26e)][_0x1b1b75(0x61b)][_0x41806d]?.[_0x1b1b75(0x2cc)]?.['ws']?.['close'](),{'status':_0x1b1b75(0x721),'error':!0x1,'response':{'message':_0x1b1b75(0x5af)}};}catch(_0x2ab217){this[_0x1b1b75(0x56b)][_0x1b1b75(0x2b1)](_0x2ab217);}}async[a0_0x5ca971(0x545)]({instanceName:_0x5d019c}){const _0x37464f=a0_0x5ca971;return _0x5d019c?this[_0x37464f(0x26e)][_0x37464f(0x382)](_0x5d019c):this[_0x37464f(0x26e)][_0x37464f(0x382)]();}async[a0_0x5ca971(0x569)]({instanceName:_0x599a4c}){const _0x8f72cb=a0_0x5ca971;try{return await this['waMonitor'][_0x8f72cb(0x61b)][_0x599a4c]?.['client']?.[_0x8f72cb(0x569)](_0x8f72cb(0x42a)+_0x599a4c),{'error':!0x1,'message':_0x8f72cb(0x303)};}catch(_0x23552f){throw new O(_0x23552f[_0x8f72cb(0x7b1)]());}}async[a0_0x5ca971(0x89a)]({instanceName:_0x450b47}){const _0x518104=a0_0x5ca971;if((await this[_0x518104(0x726)]({'instanceName':_0x450b47}))[_0x518104(0x1ec)]['state']===_0x518104(0x158))throw new m([_0x518104(0x498),_0x518104(0x30d)]);try{return delete this[_0x518104(0x26e)][_0x518104(0x61b)][_0x450b47],{'error':!0x1,'message':_0x518104(0x1ee)};}catch(_0x12b188){throw new m(_0x12b188[_0x518104(0x7b1)]());}}},ne=require(a0_0x5ca971(0x7c2)),Yt=class{constructor(_0x44735d){const _0x43ee6e=a0_0x5ca971;this[_0x43ee6e(0x26e)]=_0x44735d;}async[a0_0x5ca971(0x304)]({instanceName:_0x595f16},_0x1b389f){const _0x2ffce6=a0_0x5ca971;return await this[_0x2ffce6(0x26e)][_0x2ffce6(0x61b)][_0x595f16][_0x2ffce6(0x227)](_0x1b389f);}async[a0_0x5ca971(0x209)]({instanceName:_0x1e9741},_0x20c65b){const _0x19ee41=a0_0x5ca971;return await this[_0x19ee41(0x26e)][_0x19ee41(0x61b)][_0x1e9741][_0x19ee41(0x36b)](_0x20c65b);}async[a0_0x5ca971(0x2d0)]({instanceName:_0x1f3a20},_0x2528c2){const _0x2e0e46=a0_0x5ca971;if((0x0,ne['isBase64'])(_0x2528c2?.[_0x2e0e46(0x4b5)]?.[_0x2e0e46(0x1f5)])&&!_0x2528c2?.['mediaMessage']?.[_0x2e0e46(0x2a1)])throw new m(_0x2e0e46(0x4bd));if((0x0,ne[_0x2e0e46(0x7ca)])(_0x2528c2?.['mediaMessage']?.[_0x2e0e46(0x1f5)])||(0x0,ne[_0x2e0e46(0x4d7)])(_0x2528c2?.[_0x2e0e46(0x4b5)]?.[_0x2e0e46(0x1f5)]))return await this[_0x2e0e46(0x26e)][_0x2e0e46(0x61b)][_0x1f3a20][_0x2e0e46(0x4b5)](_0x2528c2);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x5ca971(0x551)]({instanceName:_0x21243c},_0x20744e){const _0x3bc0ab=a0_0x5ca971;if((0x0,ne[_0x3bc0ab(0x7ca)])(_0x20744e[_0x3bc0ab(0x34b)][_0x3bc0ab(0x525)])||(0x0,ne[_0x3bc0ab(0x4d7)])(_0x20744e[_0x3bc0ab(0x34b)][_0x3bc0ab(0x525)]))return await this[_0x3bc0ab(0x26e)][_0x3bc0ab(0x61b)][_0x21243c]['mediaSticker'](_0x20744e);throw new m(_0x3bc0ab(0x71d));}async[a0_0x5ca971(0x7de)]({instanceName:_0x2eda91},_0x113612){const _0x3f6b0d=a0_0x5ca971;if((0x0,ne[_0x3f6b0d(0x7ca)])(_0x113612[_0x3f6b0d(0x6af)]['audio'])||(0x0,ne['isBase64'])(_0x113612['audioMessage'][_0x3f6b0d(0x765)]))return await this[_0x3f6b0d(0x26e)][_0x3f6b0d(0x61b)][_0x2eda91][_0x3f6b0d(0x533)](_0x113612);throw new m(_0x3f6b0d(0x71d));}async[a0_0x5ca971(0x773)]({instanceName:_0x1bd134},_0x1dda96){const _0x2a24bf=a0_0x5ca971;if((0x0,ne[_0x2a24bf(0x4d7)])(_0x1dda96[_0x2a24bf(0x5ad)][_0x2a24bf(0x4b5)]?.['media'])&&!_0x1dda96[_0x2a24bf(0x5ad)][_0x2a24bf(0x4b5)]?.[_0x2a24bf(0x2a1)])throw new m(_0x2a24bf(0x4bd));return await this[_0x2a24bf(0x26e)][_0x2a24bf(0x61b)][_0x1bd134][_0x2a24bf(0x5ad)](_0x1dda96);}async[a0_0x5ca971(0x5ab)]({instanceName:_0x28c1b0},_0x3f8228){const _0x38283c=a0_0x5ca971;return await this[_0x38283c(0x26e)][_0x38283c(0x61b)][_0x28c1b0][_0x38283c(0x184)](_0x3f8228);}async['sendPoll']({instanceName:_0x280c68},_0x6b015a){const _0x5eb956=a0_0x5ca971;return await this[_0x5eb956(0x26e)][_0x5eb956(0x61b)][_0x280c68][_0x5eb956(0x47e)](_0x6b015a);}async['sendList']({instanceName:_0x5481ef},_0x5e274b){const _0x33829f=a0_0x5ca971;return await this[_0x33829f(0x26e)][_0x33829f(0x61b)][_0x5481ef][_0x33829f(0x67a)](_0x5e274b);}async[a0_0x5ca971(0x44f)]({instanceName:_0x329fd3},_0x209d21){const _0x2d2429=a0_0x5ca971;return await this[_0x2d2429(0x26e)][_0x2d2429(0x61b)][_0x329fd3][_0x2d2429(0x68b)](_0x209d21);}async[a0_0x5ca971(0x6fd)]({instanceName:_0x4f54c5},_0x9d4e5b){const _0x5713e9=a0_0x5ca971;if(!_0x9d4e5b[_0x5713e9(0x4fa)][_0x5713e9(0x3eb)]['match'](/[^\(\)\w\sà-ú"-\+]+/))throw new m(_0x5713e9(0x23f));return await this[_0x5713e9(0x26e)][_0x5713e9(0x61b)][_0x4f54c5][_0x5713e9(0x4fa)](_0x9d4e5b);}async[a0_0x5ca971(0x6b7)]({instanceName:_0x5cd0f3},_0x121d45){const _0x25b313=a0_0x5ca971;return await this[_0x25b313(0x26e)]['waInstances'][_0x5cd0f3][_0x25b313(0x4ff)](_0x121d45);}},ki=require('jsonwebtoken'),Us=require(a0_0x5ca971(0x1a9)),Xt=class u{constructor(_0x386d90,_0x56325a,_0x208190){const _0x3f578f=a0_0x5ca971;this[_0x3f578f(0x601)]=_0x386d90,this[_0x3f578f(0x26e)]=_0x56325a,this['repository']=_0x208190,this[_0x3f578f(0x56b)]=new $(u[_0x3f578f(0x41c)]);}async[a0_0x5ca971(0x2f0)](_0x503198){const _0x2c9fcc=a0_0x5ca971;let _0x551db3=this[_0x2c9fcc(0x601)]['get'](_0x2c9fcc(0x26a))[_0x2c9fcc(0x858)],_0x43c948=(0x0,ki['sign'])({'instanceName':_0x503198[_0x2c9fcc(0x6dd)],'apiName':rt,'tokenId':(0x0,Us['v4'])()},_0x551db3[_0x2c9fcc(0x55f)],{'expiresIn':_0x551db3[_0x2c9fcc(0x6d6)],'encoding':_0x2c9fcc(0x21a),'subject':_0x2c9fcc(0x5e4)}),_0x39d9f4=await this[_0x2c9fcc(0x7fa)]['auth'][_0x2c9fcc(0x226)]({'jwt':_0x43c948},_0x503198[_0x2c9fcc(0x6dd)]);if(_0x39d9f4[_0x2c9fcc(0x2b1)])throw this[_0x2c9fcc(0x56b)][_0x2c9fcc(0x2b1)]({'localError':u['name']+_0x2c9fcc(0x31c),'error':_0x39d9f4[_0x2c9fcc(0x2b1)]}),new m(_0x2c9fcc(0x6ca),_0x39d9f4[_0x2c9fcc(0x2b1)]?.['toString']());return{'jwt':_0x43c948};}async['apikey'](_0x1645b7){const _0x59badb=a0_0x5ca971;let _0x293a65=(0x0,Us['v4'])()['toUpperCase'](),_0x7674b2=await this[_0x59badb(0x7fa)][_0x59badb(0x6aa)][_0x59badb(0x226)]({'apikey':_0x293a65},_0x1645b7[_0x59badb(0x6dd)]);if(_0x7674b2[_0x59badb(0x2b1)])throw this['logger'][_0x59badb(0x2b1)]({'localError':u['name']+'.jwt','error':_0x7674b2[_0x59badb(0x2b1)]}),new m(_0x59badb(0x6ca),_0x7674b2[_0x59badb(0x2b1)]?.['toString']());return{'apikey':_0x293a65};}async['generateHash'](_0x55a83e){const _0x5d6c4b=a0_0x5ca971;let _0x2ac358=this['configService'][_0x5d6c4b(0x76d)](_0x5d6c4b(0x26a));return await this[_0x2ac358['TYPE']](_0x55a83e);}},Zt=class{constructor(_0x3958){const _0x108e8a=a0_0x5ca971;this[_0x108e8a(0x26e)]=_0x3958;}async[a0_0x5ca971(0x476)](_0x549c9a,_0x330313){const _0x34e6cc=a0_0x5ca971;return await this[_0x34e6cc(0x26e)]['waInstances'][_0x549c9a[_0x34e6cc(0x6dd)]][_0x34e6cc(0x476)](_0x330313);}async['updateGroupPicture'](_0x45766f,_0x1017a1){const _0x38656c=a0_0x5ca971;return await this[_0x38656c(0x26e)][_0x38656c(0x61b)][_0x45766f['instanceName']][_0x38656c(0x856)](_0x1017a1);}async[a0_0x5ca971(0x181)](_0x257972,_0x1c35f6){const _0x42f0e9=a0_0x5ca971;return await this['waMonitor'][_0x42f0e9(0x61b)][_0x257972['instanceName']][_0x42f0e9(0x181)](_0x1c35f6);}async[a0_0x5ca971(0x80a)](_0x5aa0d1,_0x24969f){const _0x496ab9=a0_0x5ca971;return await this['waMonitor'][_0x496ab9(0x61b)][_0x5aa0d1[_0x496ab9(0x6dd)]][_0x496ab9(0x80a)](_0x24969f);}async['groupBetterSetting'](_0x1ceb99,_0x39acf8){const _0xa67529=a0_0x5ca971;return await this['waMonitor']['waInstances'][_0x1ceb99[_0xa67529(0x6dd)]][_0xa67529(0x64b)](_0x39acf8);}async[a0_0x5ca971(0x1cc)](_0x2582e2,_0x5617ab){const _0x419568=a0_0x5ca971;return await this[_0x419568(0x26e)][_0x419568(0x61b)][_0x2582e2[_0x419568(0x6dd)]][_0x419568(0x1cc)](_0x5617ab);}async[a0_0x5ca971(0x623)](_0x31fa09,_0x4f6727){const _0x256558=a0_0x5ca971;return await this[_0x256558(0x26e)][_0x256558(0x61b)][_0x31fa09[_0x256558(0x6dd)]][_0x256558(0x539)](_0x4f6727);}async[a0_0x5ca971(0x55b)](_0xdb753d){const _0x5a4601=a0_0x5ca971;return await this[_0x5a4601(0x26e)][_0x5a4601(0x61b)][_0xdb753d[_0x5a4601(0x6dd)]]['findGroups']();}async['inviteCode'](_0x4f27f,_0x17bbc9){const _0x2f0452=a0_0x5ca971;return await this[_0x2f0452(0x26e)][_0x2f0452(0x61b)][_0x4f27f[_0x2f0452(0x6dd)]][_0x2f0452(0x3ef)](_0x17bbc9);}async['joinGroup'](_0x5be313,_0x2e118e){const _0x249cd2=a0_0x5ca971;return await this[_0x249cd2(0x26e)][_0x249cd2(0x61b)][_0x5be313['instanceName']][_0x249cd2(0x362)](_0x2e118e);}async[a0_0x5ca971(0x75a)](_0x2fdd11,_0x3ecd4c){const _0x235458=a0_0x5ca971;return await this['waMonitor'][_0x235458(0x61b)][_0x2fdd11[_0x235458(0x6dd)]][_0x235458(0x75a)](_0x3ecd4c);}async['revokeInviteCode'](_0x147a92,_0x2ac31c){const _0x333fdf=a0_0x5ca971;return await this[_0x333fdf(0x26e)][_0x333fdf(0x61b)][_0x147a92['instanceName']]['revokeInviteCode'](_0x2ac31c);}async[a0_0x5ca971(0x879)](_0x5557cc,_0x2499e7){const _0x2a1c96=a0_0x5ca971;return await this['waMonitor'][_0x2a1c96(0x61b)][_0x5557cc['instanceName']]['findParticipants'](_0x2499e7);}async[a0_0x5ca971(0x7aa)](_0x423bca,_0x2fcf83){const _0x4240fa=a0_0x5ca971;return await this['waMonitor'][_0x4240fa(0x61b)][_0x423bca[_0x4240fa(0x6dd)]]['updateGParticipant'](_0x2fcf83);}async[a0_0x5ca971(0x56a)](_0x485332,_0x5ca62c){const _0x35f898=a0_0x5ca971;return await this['waMonitor'][_0x35f898(0x61b)][_0x485332[_0x35f898(0x6dd)]]['toggleEphemeral'](_0x5ca62c);}async[a0_0x5ca971(0x3db)](_0x3587a4,_0x156845){const _0x94b452=a0_0x5ca971;return await this[_0x94b452(0x26e)][_0x94b452(0x61b)][_0x3587a4[_0x94b452(0x6dd)]][_0x94b452(0x3db)](_0x156845);}},es=class{constructor(_0x559709){this['waMonitor']=_0x559709;}[a0_0x5ca971(0x226)](_0x4ac2f0,_0x435815){const _0x7d3ff=a0_0x5ca971;return this[_0x7d3ff(0x26e)][_0x7d3ff(0x61b)][_0x4ac2f0[_0x7d3ff(0x6dd)]][_0x7d3ff(0x602)](_0x435815);}async['find'](_0x3dedf8){const _0x33e763=a0_0x5ca971;try{return await this[_0x33e763(0x26e)][_0x33e763(0x61b)][_0x3dedf8['instanceName']]['findWebhook']();}catch{return{'enabled':null,'url':''};}}},Gp=new $(a0_0x5ca971(0x5be)),ts=class{constructor(_0x5c61b6){this['waMonitor']=_0x5c61b6;}async[a0_0x5ca971(0x799)](_0x1370fe,_0x1940b7){const _0x4115d7=a0_0x5ca971;return await this[_0x4115d7(0x26e)]['waInstances'][_0x1370fe[_0x4115d7(0x6dd)]][_0x4115d7(0x799)](_0x1940b7);}async[a0_0x5ca971(0x550)](_0x11f0c6){const _0x1d3058=a0_0x5ca971;return await this[_0x1d3058(0x26e)][_0x1d3058(0x61b)][_0x11f0c6[_0x1d3058(0x6dd)]]['getScheduleMessage']();}async[a0_0x5ca971(0x564)](_0x3433c0){const _0x3e18e4=a0_0x5ca971;return await this[_0x3e18e4(0x26e)][_0x3e18e4(0x61b)][_0x3433c0[_0x3e18e4(0x6dd)]][_0x3e18e4(0x564)]();}async[a0_0x5ca971(0x2b9)](_0x1970d4){const _0x389096=a0_0x5ca971;return await this[_0x389096(0x26e)][_0x389096(0x61b)][_0x1970d4[_0x389096(0x6dd)]][_0x389096(0x2b9)]();}async['updateAgent'](_0x460887,_0x53f633){const _0x50ccf3=a0_0x5ca971;return await this[_0x50ccf3(0x26e)][_0x50ccf3(0x61b)][_0x460887[_0x50ccf3(0x6dd)]][_0x50ccf3(0x263)](_0x53f633);}async['updateCustomFields'](_0x4cb836,_0x2befb1){const _0x28378c=a0_0x5ca971;return await this[_0x28378c(0x26e)]['waInstances'][_0x4cb836[_0x28378c(0x6dd)]][_0x28378c(0x4c8)](_0x2befb1);}async[a0_0x5ca971(0x628)](_0x58d095,_0x434ea6){const _0xd8eef6=a0_0x5ca971;return await this[_0xd8eef6(0x26e)][_0xd8eef6(0x61b)][_0x58d095[_0xd8eef6(0x6dd)]][_0xd8eef6(0x628)](_0x434ea6);}async[a0_0x5ca971(0x6c0)](_0x595a96,_0x5144b4){const _0x46566a=a0_0x5ca971;return await this[_0x46566a(0x26e)][_0x46566a(0x61b)][_0x595a96['instanceName']]['updateFlowConfig'](_0x5144b4);}async[a0_0x5ca971(0x21b)](_0x5aa937,_0x100ef2){const _0x26eb47=a0_0x5ca971;return await this[_0x26eb47(0x26e)][_0x26eb47(0x61b)][_0x5aa937['instanceName']][_0x26eb47(0x21b)](_0x100ef2);}async[a0_0x5ca971(0x690)](_0x1c2dfa,_0x9e172f,_0x2f488d,_0x16e7d5){const _0x2404f1=a0_0x5ca971;return await this[_0x2404f1(0x26e)][_0x2404f1(0x61b)][_0x1c2dfa][_0x2404f1(0x690)](_0x9e172f,_0x2f488d,_0x16e7d5);}async[a0_0x5ca971(0x531)](_0x36122e,_0x140218){const _0x1740b6=a0_0x5ca971;return await this[_0x1740b6(0x26e)][_0x1740b6(0x61b)][_0x36122e['instanceName']][_0x1740b6(0x531)](_0x140218);}async['fetchConversation'](_0x144a13,_0x11edfb){const _0x427fa4=a0_0x5ca971;return await this[_0x427fa4(0x26e)][_0x427fa4(0x61b)][_0x144a13['instanceName']][_0x427fa4(0x1d5)](_0x11edfb);}async[a0_0x5ca971(0x236)](_0x582eb1,_0x31db95){const _0x335ad1=a0_0x5ca971;return await this[_0x335ad1(0x26e)][_0x335ad1(0x61b)][_0x582eb1[_0x335ad1(0x6dd)]][_0x335ad1(0x236)](_0x31db95);}async[a0_0x5ca971(0x56e)](_0x2267f5,_0x38bab1){const _0xd4b53b=a0_0x5ca971;return await this['waMonitor'][_0xd4b53b(0x61b)][_0x2267f5[_0xd4b53b(0x6dd)]][_0xd4b53b(0x56e)](_0x38bab1);}async[a0_0x5ca971(0x247)](_0x56c98c,_0x3a7315){const _0x3e2845=a0_0x5ca971;return await this[_0x3e2845(0x26e)][_0x3e2845(0x61b)][_0x56c98c[_0x3e2845(0x6dd)]][_0x3e2845(0x247)](_0x3a7315['_id']);}async[a0_0x5ca971(0x3b5)](_0x297958,_0x386e83,_0x19dfbd){const _0x68d128=a0_0x5ca971;return await this[_0x68d128(0x26e)]['waInstances'][_0x297958[_0x68d128(0x6dd)]][_0x68d128(0x3b5)](_0x386e83,_0x19dfbd);}async[a0_0x5ca971(0x6a3)](_0x32bc2c,_0x1f2994,_0x4dc3c5){const _0x520d20=a0_0x5ca971;return await this[_0x520d20(0x26e)][_0x520d20(0x61b)][_0x32bc2c[_0x520d20(0x6dd)]][_0x520d20(0x6a3)](_0x1f2994,_0x4dc3c5);}async['editFlowBlock'](_0x2867e6,_0x56728f){const _0x4b21ea=a0_0x5ca971;return await this[_0x4b21ea(0x26e)][_0x4b21ea(0x61b)][_0x2867e6[_0x4b21ea(0x6dd)]]['editFlowBlock'](_0x56728f);}async[a0_0x5ca971(0x6f1)](_0x9280eb,_0x505f38){const _0x393e7f=a0_0x5ca971;return await this['waMonitor']['waInstances'][_0x9280eb['instanceName']][_0x393e7f(0x6f1)](_0x505f38);}async[a0_0x5ca971(0x14c)](_0x2cad37,_0x19c8d4){const _0x7f8f9=a0_0x5ca971;return await this[_0x7f8f9(0x26e)]['waInstances'][_0x2cad37[_0x7f8f9(0x6dd)]][_0x7f8f9(0x14c)](_0x19c8d4);}async['editFlowCondition'](_0x980438,_0x56891f){const _0x45873b=a0_0x5ca971;return await this[_0x45873b(0x26e)][_0x45873b(0x61b)][_0x980438['instanceName']][_0x45873b(0x774)](_0x56891f);}async[a0_0x5ca971(0x656)](_0x414210,_0x1dce9c){const _0x2d2ce5=a0_0x5ca971;return await this[_0x2d2ce5(0x26e)]['waInstances'][_0x414210[_0x2d2ce5(0x6dd)]][_0x2d2ce5(0x656)](_0x1dce9c);}async[a0_0x5ca971(0x14a)](_0xca43e3,_0x267203){const _0x5b5689=a0_0x5ca971;return await this[_0x5b5689(0x26e)][_0x5b5689(0x61b)][_0xca43e3[_0x5b5689(0x6dd)]][_0x5b5689(0x14a)](_0x267203);}async[a0_0x5ca971(0x3bb)](_0x226624,_0xb0ae46){const _0xc3260d=a0_0x5ca971;return await this[_0xc3260d(0x26e)][_0xc3260d(0x61b)][_0x226624['instanceName']]['deleteFlow'](_0xb0ae46);}async[a0_0x5ca971(0x1aa)](_0x6bd24){const _0x4e4de9=a0_0x5ca971;return await this[_0x4e4de9(0x26e)]['waInstances'][_0x6bd24[_0x4e4de9(0x6dd)]][_0x4e4de9(0x1aa)]();}},ss=class{constructor(_0x544d59){const _0x5e8c6e=a0_0x5ca971;this[_0x5e8c6e(0x45b)]=_0x544d59;}async[a0_0x5ca971(0x222)](_0x25507d,_0x341cee){const _0x2af8b5=a0_0x5ca971;return this[_0x2af8b5(0x45b)][_0x2af8b5(0x226)](_0x25507d,_0x341cee);}async[a0_0x5ca971(0x64f)](_0x345c33){const _0xd2c6fd=a0_0x5ca971;return this[_0xd2c6fd(0x45b)][_0xd2c6fd(0x2d4)](_0x345c33);}},as=class extends _{constructor(_0x4ba780,_0x232be1){const _0x198c2b=a0_0x5ca971;super(_0x232be1),this[_0x198c2b(0x27e)]=_0x4ba780,this['configService']=_0x232be1;}async[a0_0x5ca971(0x226)](_0x4630f6,_0x3b97d5){const _0x442dad=a0_0x5ca971;try{return this[_0x442dad(0x3ce)][_0x442dad(0x325)]?{'insertCount':(await this[_0x442dad(0x27e)]['replaceOne']({'_id':_0x3b97d5},{..._0x4630f6},{'upsert':!0x0}))[_0x442dad(0x366)]}:{'insertCount':0x1};}catch(_0x215931){return _0x215931;}}async[a0_0x5ca971(0x8a2)](_0x458a51){const _0x563e7f=a0_0x5ca971;try{if(this[_0x563e7f(0x3ce)][_0x563e7f(0x325)]){await this['webhookModel'][_0x563e7f(0x631)]({'_id':_0x458a51});return;}}catch(_0x267d9b){return{'error':_0x267d9b};}}async[a0_0x5ca971(0x2d4)](_0x4cf363){const _0xc91311=a0_0x5ca971;try{if(this[_0xc91311(0x3ce)][_0xc91311(0x325)])return await this['webhookModel'][_0xc91311(0x640)]({'_id':_0x4cf363});}catch{return{};}}},is=class extends _{constructor(_0x482d68,_0x11fdf0){const _0x2951b4=a0_0x5ca971;super(_0x11fdf0),this[_0x2951b4(0x38e)]=_0x482d68,this[_0x2951b4(0x601)]=_0x11fdf0,this[_0x2951b4(0x6aa)]=_0x11fdf0[_0x2951b4(0x76d)](_0x2951b4(0x26a));}async[a0_0x5ca971(0x226)](_0x1ca0b0,_0x177cbe){const _0x402074=a0_0x5ca971;try{if(this[_0x402074(0x3ce)][_0x402074(0x325)])return{'insertCount':(await this[_0x402074(0x38e)][_0x402074(0x743)]({'_id':_0x177cbe},{'$set':{..._0x1ca0b0}},{'upsert':!0x0}))[_0x402074(0x366)]};}catch(_0x258449){return{'error':_0x258449};}}async[a0_0x5ca971(0x3de)](_0x1ce042,_0x585f96){const _0x43fa77=a0_0x5ca971;try{if(this[_0x43fa77(0x3ce)]['ENABLED'])return{'insertCount':(await this['authModel'][_0x43fa77(0x829)](_0x1ce042,{'$set':_0x585f96},{'upsert':!0x1}))[_0x43fa77(0x366)]};throw new Error('Database\x20is\x20not\x20enabled');}catch(_0x9be9f1){return{'error':_0x9be9f1};}}async[a0_0x5ca971(0x63e)](_0x369c5e){const _0x3e5ce8=a0_0x5ca971;try{if(this[_0x3e5ce8(0x3ce)][_0x3e5ce8(0x325)])return{'insertCount':(await this['authModel'][_0x3e5ce8(0x63e)](_0x369c5e))[_0x3e5ce8(0x5c7)]};throw new Error(_0x3e5ce8(0x395));}catch(_0xadf498){return{'error':_0xadf498};}}async[a0_0x5ca971(0x8a2)](_0x5d7605){const _0x2d4ab3=a0_0x5ca971;try{if(this[_0x2d4ab3(0x3ce)][_0x2d4ab3(0x325)]){await this[_0x2d4ab3(0x38e)][_0x2d4ab3(0x631)]({'_id':_0x5d7605});return;}}catch(_0x4ec088){return{'error':_0x4ec088};}}async[a0_0x5ca971(0x2d4)](_0x2b4d00){const _0x4f762e=a0_0x5ca971;try{if(this[_0x4f762e(0x3ce)][_0x4f762e(0x325)])return await this[_0x4f762e(0x38e)][_0x4f762e(0x640)]({'_id':_0x2b4d00});}catch{return{};}}async[a0_0x5ca971(0x4aa)](){const _0x4de03b=a0_0x5ca971;try{if(this[_0x4de03b(0x3ce)][_0x4de03b(0x325)])return await this[_0x4de03b(0x38e)][_0x4de03b(0x2d4)]();}catch{return[];}}async[a0_0x5ca971(0x864)](_0x15ea1a){const _0x3ac107=a0_0x5ca971;try{if(this[_0x3ac107(0x3ce)][_0x3ac107(0x325)])return await this[_0x3ac107(0x38e)][_0x3ac107(0x2d4)](_0x15ea1a);}catch{return[];}}},os=class extends _{async[a0_0x5ca971(0x631)](_0x5a204a){const _0x4d2fe3=a0_0x5ca971;try{let _0x15cf79=I(_0x5a204a[_0x4d2fe3(0x1cf)]);return{'deletedCount':(await Ce['deleteOne'](_0x15cf79))['deletedCount']};}catch(_0x277acf){return{'error':_0x277acf?.[_0x4d2fe3(0x7b1)]()};}}async[a0_0x5ca971(0x743)](_0x3b6ff3,_0x19ee23){const _0x3a6f79=a0_0x5ca971;try{let _0x1380ad=await Ce[_0x3a6f79(0x24c)](_0x3b6ff3);return _0x1380ad?(Object[_0x3a6f79(0x202)](_0x1380ad,_0x19ee23),await _0x1380ad['save']()):(console[_0x3a6f79(0x2b1)](_0x3a6f79(0x480),_0x3b6ff3),null);}catch(_0x6f6a3c){return console[_0x3a6f79(0x2b1)](_0x3a6f79(0x756),_0x6f6a3c),null;}}async[a0_0x5ca971(0x2e9)](_0xbad230){const _0x4f564d=a0_0x5ca971;try{return await new Ce(_0xbad230)[_0x4f564d(0x746)]();}catch(_0x252cd7){return console[_0x4f564d(0x2b1)](_0x4f564d(0x24b),_0x252cd7),null;}}async[a0_0x5ca971(0x4aa)](_0x31c001){const _0x3b143e=a0_0x5ca971;try{let _0x3816f4=_0x31c001['where']??{};return await Ce[_0x3b143e(0x2d4)](_0x3816f4)[_0x3b143e(0x268)](_0x31c001['limit']??0x0)[_0x3b143e(0x1df)]();}catch(_0x2c047b){return console[_0x3b143e(0x2b1)](_0x3b143e(0x7bd),_0x2c047b),[];}}async[a0_0x5ca971(0x640)](_0x2d4ca4){const _0xbdf37d=a0_0x5ca971;try{let _0x267ada=I(_0x2d4ca4['where']);return await Ce[_0xbdf37d(0x640)](_0x267ada)[_0xbdf37d(0x1df)]();}catch{return null;}}},rs=class extends _{[a0_0x5ca971(0x888)](_0x473429){return Ma(_0x473429);}async['insert'](_0x219e92){const _0x12f7f2=a0_0x5ca971;if(_0x219e92[_0x12f7f2(0x532)]!==0x0)try{return{'insertCount':(await this[_0x12f7f2(0x888)](_0x219e92[0x0][_0x12f7f2(0x42d)])[_0x12f7f2(0x493)]([..._0x219e92]))[_0x12f7f2(0x532)]};}catch(_0x1d9cb2){return _0x1d9cb2;}}async[a0_0x5ca971(0x8a2)](_0x12f78f,_0x25d22c){const _0x6d19ac=a0_0x5ca971;try{let _0x1a0c08=this[_0x6d19ac(0x888)](_0x25d22c),_0x5c5d71=I(_0x12f78f[_0x6d19ac(0x1cf)]);return{'deletedCount':(await _0x1a0c08[_0x6d19ac(0x63e)](_0x5c5d71))['deletedCount']};}catch(_0x16e70e){return{'error':_0x16e70e?.[_0x6d19ac(0x7b1)]()};}}async[a0_0x5ca971(0x631)](_0x2b588e,_0x32d0ff){const _0x346ab0=a0_0x5ca971;try{let _0x3b3300=this[_0x346ab0(0x888)](_0x32d0ff),_0x55e697=I(_0x2b588e[_0x346ab0(0x1cf)]);return{'deletedCount':(await _0x3b3300[_0x346ab0(0x631)](_0x55e697))[_0x346ab0(0x5c7)]};}catch(_0x50670c){return{'error':_0x50670c?.[_0x346ab0(0x7b1)]()};}}async[a0_0x5ca971(0x26b)](_0x3eb55a,_0x58ffee){const _0x9f2d5a=a0_0x5ca971;try{if(_0x3eb55a[_0x9f2d5a(0x532)]===0x0)return;let _0x2f39e0=this[_0x9f2d5a(0x888)](_0x58ffee),_0xd9d3e4=_0x3eb55a['map'](_0xa1be44=>({'updateOne':{'filter':{'name':_0xa1be44[_0x9f2d5a(0x41c)],'owner':_0x58ffee},'update':{..._0xa1be44}}})),{modifiedCount:_0x3d5eb3}=await _0x2f39e0[_0x9f2d5a(0x429)](_0xd9d3e4);return{'insertCount':_0x3d5eb3};}catch{return;}}async[a0_0x5ca971(0x829)](_0xaf3361,_0x331603,_0x58b431){const _0x27aa68=a0_0x5ca971;try{return{'modifiedCount':(await this['getConversationModelForOwner'](_0x58b431)[_0x27aa68(0x829)](_0xaf3361,{'$set':_0x331603})[_0x27aa68(0x5ac)]())[_0x27aa68(0x366)]};}catch(_0x414684){return console[_0x27aa68(0x2b1)](_0x27aa68(0x6cc),_0x414684),{'error':_0x414684};}}async[a0_0x5ca971(0x743)](_0x23dc3f,_0x10cb73,_0x3fd946){const _0x34675f=a0_0x5ca971;try{return await this[_0x34675f(0x888)](_0x3fd946)['findOneAndUpdate']({'_id':_0x23dc3f},{'$set':_0x10cb73},{'new':!0x0,'upsert':!0x0})[_0x34675f(0x1df)]();}catch(_0x24a03c){return console[_0x34675f(0x2b1)](_0x24a03c),null;}}async[a0_0x5ca971(0x2d4)](_0x41ce9e,_0x29daf4){const _0x286fda=a0_0x5ca971;try{return await this[_0x286fda(0x888)](_0x29daf4)[_0x286fda(0x2d4)](_0x41ce9e)[_0x286fda(0x1ba)]({'lastInteraction':-0x1})[_0x286fda(0x1df)]();}catch{return[];}}async[a0_0x5ca971(0x640)](_0x5d69f8,_0x5d2177){const _0x168bf9=a0_0x5ca971;try{return await this[_0x168bf9(0x888)](_0x5d2177)['findOne']({..._0x5d69f8[_0x168bf9(0x1cf)]})['lean']();}catch{return null;}}async[a0_0x5ca971(0x3c9)](_0x1cc350){const _0x5075e4=a0_0x5ca971;try{return await this[_0x5075e4(0x888)](_0x1cc350)[_0x5075e4(0x819)][_0x5075e4(0x39f)](),{'success':!0x0};}catch(_0x48c72a){return console[_0x5075e4(0x2b1)](_0x48c72a),{'success':!0x1,'error':_0x48c72a};}}},ns=class extends _{[a0_0x5ca971(0x380)](_0x598c36){return Ca(_0x598c36);}async[a0_0x5ca971(0x429)](_0x5231e9,_0x387882){const _0x564855=a0_0x5ca971;try{return await this['getScheduleMessageModelForOwner'](_0x387882)[_0x564855(0x429)](_0x5231e9);}catch(_0x48d27d){return console[_0x564855(0x2b1)]('Erro\x20ao\x20executar\x20bulkWrite:',_0x48d27d),null;}}async['createAndSave'](_0xe95ff6,_0x4459cb){const _0x206547=a0_0x5ca971;try{let _0x1c290c=this[_0x206547(0x380)](_0x4459cb);return await new _0x1c290c(_0xe95ff6)[_0x206547(0x746)]();}catch(_0x4d5e1f){return console[_0x206547(0x2b1)](_0x206547(0x88f),_0x4d5e1f),null;}}async[a0_0x5ca971(0x631)](_0x29c705,_0x29bd56){const _0x7e5213=a0_0x5ca971;try{return await this[_0x7e5213(0x380)](_0x29bd56)[_0x7e5213(0x610)](_0x29c705),{};}catch(_0x185aa9){return{'error':_0x185aa9?.['toString']()};}}async[a0_0x5ca971(0x743)](_0x2cd24a,_0x459fe5,_0x2ffc7c,_0x462797={}){const _0x174aed=a0_0x5ca971;try{return await this[_0x174aed(0x380)](_0x2ffc7c)[_0x174aed(0x5dc)](_0x2cd24a,_0x459fe5,{..._0x462797,'new':!0x0})[_0x174aed(0x1df)]();}catch(_0x35d6dc){return console[_0x174aed(0x2b1)]('Erro\x20ao\x20atualizar\x20uma\x20mensagem:',_0x35d6dc),null;}}async[a0_0x5ca971(0x2ac)](_0x9bd283,_0x273b8c,_0x2a36af){const _0x1f20ee=a0_0x5ca971;try{return await this[_0x1f20ee(0x380)](_0x2a36af)[_0x1f20ee(0x499)](_0x9bd283,_0x273b8c,{'new':!0x0})[_0x1f20ee(0x1df)]();}catch(_0x4f6878){return console[_0x1f20ee(0x2b1)]('Erro\x20ao\x20atualizar\x20uma\x20mensagem:',_0x4f6878),null;}}async[a0_0x5ca971(0x2d4)](_0x4a3c97,_0x28dd57){const _0x355841=a0_0x5ca971;try{return await this[_0x355841(0x380)](_0x28dd57)[_0x355841(0x2d4)](_0x4a3c97[_0x355841(0x1cf)])[_0x355841(0x268)](_0x4a3c97?.[_0x355841(0x268)]??0x0)[_0x355841(0x1ba)]({'when':0x1})[_0x355841(0x1df)]();}catch{return[];}}async[a0_0x5ca971(0x640)](_0x3ead27,_0x3c0719){const _0xb4f839=a0_0x5ca971;try{return await this['getScheduleMessageModelForOwner'](_0x3c0719)['findOne'](_0x3ead27[_0xb4f839(0x1cf)])['sort']({'when':0x1})[_0xb4f839(0x1df)]();}catch{return null;}}async[a0_0x5ca971(0x24c)](_0x3ce3e2,_0x57bc36){const _0x38113d=a0_0x5ca971;try{return await this['getScheduleMessageModelForOwner'](_0x57bc36)[_0x38113d(0x24c)](_0x3ce3e2)[_0x38113d(0x1df)]();}catch{return null;}}async[a0_0x5ca971(0x63e)](_0x603416,_0x36ec5c){const _0x5db7cc=a0_0x5ca971;try{return{'deletedCount':(await this[_0x5db7cc(0x380)](_0x36ec5c)[_0x5db7cc(0x63e)](_0x603416))['deletedCount']};}catch(_0x3ce9f2){return console[_0x5db7cc(0x2b1)](_0x5db7cc(0x710),_0x3ce9f2),{'error':_0x3ce9f2};}}async[a0_0x5ca971(0x3c9)](_0x462602){const _0x29d5cf=a0_0x5ca971;try{return await this[_0x29d5cf(0x380)](_0x462602)[_0x29d5cf(0x819)][_0x29d5cf(0x39f)](),{'success':!0x0};}catch(_0x19209d){return console[_0x29d5cf(0x2b1)](_0x19209d),{'success':!0x1,'error':_0x19209d};}}},cs=class extends _{async[a0_0x5ca971(0x26b)](_0x1a3976,_0x9475a7){const _0x2c2e3d=a0_0x5ca971;try{if(this[_0x2c2e3d(0x3ce)]['ENABLED'])return await Ae[_0x2c2e3d(0x5dc)]({'_id':_0x9475a7},{'$set':_0x1a3976},{'new':!0x0});}catch(_0x52ceda){throw console[_0x2c2e3d(0x2b1)](_0x2c2e3d(0x2e4),_0x52ceda),_0x52ceda;}}async[a0_0x5ca971(0x4f9)](_0x42c7d8){const _0x459b40=a0_0x5ca971;try{let _0x4d51ca=await Ae[_0x459b40(0x24c)](_0x42c7d8);return _0x4d51ca?_0x4d51ca[_0x459b40(0x57f)]||(_0x4d51ca[_0x459b40(0x57f)]=[],await _0x4d51ca['save']()):(_0x4d51ca=new Ae({'_id':_0x42c7d8,'autoCompleteMessages':[]}),await _0x4d51ca['save']()),_0x4d51ca;}catch(_0xe88a90){return _0xe88a90[_0x459b40(0x339)]===0x2af8&&_0xe88a90['keyPattern']&&_0xe88a90['keyPattern'][_0x459b40(0x212)]?(console[_0x459b40(0x2b1)]('Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...'),await Ae[_0x459b40(0x819)][_0x459b40(0x6ab)](_0x459b40(0x453)),null):(console[_0x459b40(0x2b1)](_0x459b40(0x50c),_0xe88a90),null);}}},Jo=new $(a0_0x5ca971(0x834)),qo=new Ye(b),Vo=new Bt(b),Go=new ct(b),Bo=new Wt(ra,b),Wo=new as(ga,b),zo=new is(da,b),Ho=new Ne(ze,b),Ko=new os(b),Qo=new zt(b),Yo=new rs(b),Xo=new ns(b),Zo=new cs(b),we=new Ke(qo,Vo,Go,Bo,Wo,zo,Ho,Ko,Yo,Qo,Xo,Zo,R?.[a0_0x5ca971(0x40e)]()),z=new Gt(ms,b,we),er=new Xt(b,z,we),tr=new es(z),Is=new ss(tr),T=new ts(z),he=new Qt(z,b,we,ms,er),H=new Yt(z),k=new Ht(z),B=new Zt(z);Jo['info'](a0_0x5ca971(0x86b));var ng=require(a0_0x5ca971(0x335)),js=require('fs'),Li=A(require(a0_0x5ca971(0x3f7))),Fi=A(require(a0_0x5ca971(0x15b))),Ue=class u{static #e;static set[a0_0x5ca971(0x1f6)](_0x5587c9){this.#e=_0x5587c9;}static get[a0_0x5ca971(0x3f7)](){const _0x393eea=a0_0x5ca971;let {FULLCHAIN:_0x188efd,PRIVKEY:_0x54cc17}=b[_0x393eea(0x76d)](_0x393eea(0x77d));return Li[_0x393eea(0x689)]({'cert':(0x0,js[_0x393eea(0x259)])(_0x188efd),'key':(0x0,js['readFileSync'])(_0x54cc17)},u.#e);}static get['http'](){const _0x28201=a0_0x5ca971;return Fi[_0x28201(0x689)](u.#e);}},je=A(require('fs')),Gi=A(require(a0_0x5ca971(0x41a))),Je=A(require(a0_0x5ca971(0x5c5))),us=A(require(a0_0x5ca971(0x562))),ls=require(a0_0x5ca971(0x31f));function sr(){const _0x5741ff=a0_0x5ca971;z[_0x5741ff(0x758)]();let _0x5dac13=us['default'][_0x5741ff(0x897)](__dirname,'downloads');Vi(_0x5dac13);}var Vi=_0x43bc6f=>{const _0x7ff499=a0_0x5ca971;let _0x503c77=je[_0x7ff499(0x678)][_0x7ff499(0x733)](_0x43bc6f),_0xe649d4=0xc*0x3c*0x3c*0x3e8,_0x237591=0x2*0x3c*0x3c*0x3e8,_0x10a63e=new Date()[_0x7ff499(0x409)]();_0x503c77[_0x7ff499(0x491)](_0x221d4c=>{const _0x446b53=_0x7ff499;let _0x3aae6f=us[_0x446b53(0x678)][_0x446b53(0x897)](_0x43bc6f,_0x221d4c),_0x149a58=je[_0x446b53(0x678)][_0x446b53(0x3cf)](_0x3aae6f)[_0x446b53(0x5bb)][_0x446b53(0x409)]();_0x10a63e-_0x149a58>_0xe649d4&&(je['default'][_0x446b53(0x80b)](_0x3aae6f),console['log'](_0x446b53(0x837)+_0x221d4c));}),setTimeout(()=>Vi(_0x43bc6f),_0x237591);};function ar(){const _0x2a64c1=a0_0x5ca971;let _0x4cc26d=new $(_0x2a64c1(0x69a)),_0x2af5b8=(0x0,be[_0x2a64c1(0x678)])();_0x2af5b8[_0x2a64c1(0x24d)]((0x0,qi[_0x2a64c1(0x678)])({'origin'(_0x437e01,_0xe45786){const _0x363aa2=_0x2a64c1;let {ORIGIN:_0x3e0cf5}=b[_0x363aa2(0x76d)](_0x363aa2(0x1cb));return _0x437e01||(_0x437e01='*'),_0x3e0cf5[_0x363aa2(0x45a)]('*')!==-0x1||_0x3e0cf5[_0x363aa2(0x45a)](_0x437e01)!==-0x1?_0xe45786(null,!0x0):_0xe45786(new Error(_0x363aa2(0x890)));},'methods':[...b['get'](_0x2a64c1(0x1cb))[_0x2a64c1(0x42e)]],'credentials':b[_0x2a64c1(0x76d)](_0x2a64c1(0x1cb))[_0x2a64c1(0x570)]}),(0x0,be[_0x2a64c1(0x747)])({'extended':!0x0,'limit':'50mb'}),(0x0,be[_0x2a64c1(0x779)])({'limit':'50mb'})),_0x2af5b8['use']((_0x52bced,_0x4c1f30,_0x1fb82f)=>{const _0x4f4ddc=_0x2a64c1;_0x52bced[_0x4f4ddc(0x562)][_0x4f4ddc(0x365)](_0x4f4ddc(0x43d))?_0x1fb82f():(0x0,Ji['default'])()(_0x52bced,_0x4c1f30,_0x1fb82f);}),_0x2af5b8[_0x2a64c1(0x7bb)](_0x2a64c1(0x239),_0x2a64c1(0x5ec)),_0x2af5b8[_0x2a64c1(0x7bb)]('views',(0x0,qs[_0x2a64c1(0x897)])(ue,_0x2a64c1(0x88e))),_0x2af5b8['use'](be[_0x2a64c1(0x678)][_0x2a64c1(0x1a1)]((0x0,qs[_0x2a64c1(0x897)])(ue,_0x2a64c1(0x504)))),_0x2af5b8['use']((_0x57c03a,_0x18ce3f,_0xf17ad)=>{const _0x3e349d=_0x2a64c1;let _0x39c26e=_0x18ce3f[_0x3e349d(0x472)];_0x18ce3f[_0x3e349d(0x472)]=function(_0x29b8af){const _0x2e3841=_0x3e349d;if(_0x57c03a[_0x2e3841(0x56c)]['convert']===_0x2e3841(0x18a)||_0x57c03a[_0x2e3841(0x1bb)]['uazapi']==='true'){let _0x64e419=JSON[_0x2e3841(0x1c3)](_0x29b8af);_0x29b8af=JSON['stringify'](_0x4d9224(_0x64e419));}return _0x39c26e['apply'](_0x18ce3f,[_0x29b8af]);},_0xf17ad();}),_0x2af5b8[_0x2a64c1(0x24d)]('/',ke),_0x2af5b8[_0x2a64c1(0x24d)]((_0x23d792,_0x5bd947,_0x362512,_0x1e17a2)=>{const _0x4eef68=_0x2a64c1;if(_0x23d792)return _0x362512[_0x4eef68(0x2f7)](_0x23d792['status']||0x1f4)[_0x4eef68(0x779)](_0x23d792);},(_0x4fd874,_0x1b8c57,_0x533f9d)=>{const _0x5d5f18=_0x2a64c1;let {method:_0x4d066c,url:_0x20aa8e}=_0x4fd874;_0x1b8c57[_0x5d5f18(0x2f7)](0x194)[_0x5d5f18(0x779)]({'status':0x194,'message':'Cannot\x20'+_0x4d066c[_0x5d5f18(0x6fb)]()+'\x20'+_0x20aa8e,'error':_0x5d5f18(0x735)}),_0x533f9d();});let _0x4d9224=(_0x211e32,_0x4c5566=_0x2a64c1(0x3ad))=>{const _0x2148bd=_0x2a64c1;let _0xdec5b7=(_0x4dc7f3,_0x1f36ab=null,_0x5e2a8e=!0x1)=>{const _0xa9554d=a0_0x2d21;let _0x3a2b60={};return Object[_0xa9554d(0x418)](_0x4dc7f3)['forEach'](_0x314f23=>{const _0x3cc4fd=_0xa9554d;let _0x5960f3=_0x4dc7f3[_0x314f23],_0x2e0af1=''+_0x4c5566+_0x314f23;_0x1f36ab&&!_0x5e2a8e&&(_0x2e0af1=_0x1f36ab+'.'+_0x314f23),!_0x5960f3&&_0x5960f3!==0x0&&_0x5960f3!==!0x1||typeof _0x5960f3>'u'?_0x3a2b60[_0x2e0af1]=null:typeof _0x5960f3!='object'&&!Array[_0x3cc4fd(0x4d0)](_0x5960f3)?_0x3a2b60[_0x2e0af1]=_0x5960f3:typeof _0x5960f3==_0x3cc4fd(0x487)&&!Array[_0x3cc4fd(0x4d0)](_0x5960f3)?_0x3a2b60=Object[_0x3cc4fd(0x202)](_0x3a2b60,_0xdec5b7(_0x5960f3,_0x2e0af1)):Array['isArray'](_0x5960f3)&&(typeof _0x5960f3[0x0]==_0x3cc4fd(0x487)?(_0x3a2b60[_0x2e0af1]=[],_0x5960f3[_0x3cc4fd(0x491)](_0x3a1b93=>{_0x3a2b60[_0x2e0af1]['push'](_0xdec5b7(_0x3a1b93,_0x2e0af1,!0x0));})):_0x3a2b60[_0x2e0af1]=_0x5960f3);}),_0x3a2b60;};return Array[_0x2148bd(0x4d0)](_0x211e32)?_0x211e32[_0x2148bd(0x7a8)](_0x9f6995=>_0xdec5b7(_0x9f6995)):typeof _0x211e32=='object'&&_0x211e32!==null?_0xdec5b7(_0x211e32):{};},_0x1e08f1=b[_0x2a64c1(0x76d)](_0x2a64c1(0x69a));Ue[_0x2a64c1(0x1f6)]=_0x2af5b8;let _0x3282fe=Ue[_0x1e08f1['TYPE']],_0x550872=_0x2a64c1(0x45e);_0x3282fe[_0x2a64c1(0x722)](_0x1e08f1[_0x2a64c1(0x84b)],()=>{const _0x2516e3=_0x2a64c1;_0x4cc26d[_0x2516e3(0x2a9)](_0x550872),_0x4cc26d['log'](_0x1e08f1[_0x2516e3(0x2ec)][_0x2516e3(0x6fb)]()+'\x20-\x20ON:\x20'+_0x1e08f1[_0x2516e3(0x84b)]);}),sr(),ea();}var ir='https://github.com/uazapi/uazapi.git',or=us['default']['join'](__dirname,a0_0x5ca971(0x7f9)),Re=null;function rr(){return new Promise((_0x50fbec,_0x53c042)=>{const _0x2e7ca0=a0_0x2d21;je[_0x2e7ca0(0x678)][_0x2e7ca0(0x313)](or,_0x2e7ca0(0x144),(_0x22a6f8,_0x24f9de)=>{const _0x794dcf=_0x2e7ca0;if(_0x22a6f8){Re=_0x22a6f8,_0x50fbec();return;}Gi[_0x794dcf(0x678)]['parse'](_0x24f9de)[_0x794dcf(0x344)]['url']===ir?(Re=null,_0x50fbec()):(Re=new Error(_0x794dcf(0x589)),_0x50fbec());});});}async function nr(){const _0x19bf16=a0_0x5ca971;try{await rr(),await Vs();}catch(_0x4f37f6){console[_0x19bf16(0x2b1)]('Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20'+_0x4f37f6),process[_0x19bf16(0x6ee)](0x1);}}nr();async function Bi(){const _0x3a49fc=a0_0x5ca971;let _0x290a14;try{_0x290a14=(await Je[_0x3a49fc(0x678)][_0x3a49fc(0x76d)](_0x3a49fc(0x406)))[_0x3a49fc(0x5c9)]['ip'];}catch(_0x4c17ed){console[_0x3a49fc(0x2b1)](_0x4c17ed);try{_0x290a14=(await Je[_0x3a49fc(0x678)]['get'](_0x3a49fc(0x846)))[_0x3a49fc(0x5c9)]['ip'];}catch(_0x3437b3){console[_0x3a49fc(0x2b1)](_0x3437b3);try{_0x290a14=(await Je[_0x3a49fc(0x678)][_0x3a49fc(0x76d)](_0x3a49fc(0x40b)))[_0x3a49fc(0x5c9)][_0x3a49fc(0x3ca)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x3c7e38){return console[_0x3a49fc(0x2b1)](_0x3c7e38),!0x1;}}}return _0x290a14;}var Ui=0x0;async function cr(){const _0x8eaaf7=a0_0x5ca971;let _0x2dab17=await new ge(b[_0x8eaaf7(0x76d)](_0x8eaaf7(0x7da)))['instanceKeys']();return console['log'](_0x8eaaf7(0x48d),_0x2dab17[_0x8eaaf7(0x532)]),_0x2dab17[_0x8eaaf7(0x532)];}function lr(_0x185370){const _0x389be4=a0_0x5ca971;let _0x5de0c8=_0x185370[_0x389be4(0x76d)](_0x389be4(0x69a))['URL'],_0x7f4b86=_0x185370[_0x389be4(0x76d)](_0x389be4(0x77d));console[_0x389be4(0x2a9)](_0x389be4(0x300),_0x5de0c8),console[_0x389be4(0x2a9)](_0x389be4(0x44c),_0x7f4b86);let _0x3a11ee='',_0x62144d=_0x5de0c8||'';if(_0x5de0c8){let _0x4f2be4=_0x5de0c8[_0x389be4(0x3ca)](/\/\/(.*?)\./);console[_0x389be4(0x2a9)](_0x389be4(0x63a),_0x4f2be4),_0x4f2be4&&_0x4f2be4[0x1]&&(_0x3a11ee=_0x4f2be4[0x1],console[_0x389be4(0x2a9)](_0x389be4(0x6cf),_0x3a11ee));}if(!_0x3a11ee&&_0x7f4b86&&_0x7f4b86['FULLCHAIN']){let _0x4cd30a=_0x7f4b86[_0x389be4(0x433)][_0x389be4(0x266)]('/');console[_0x389be4(0x2a9)](_0x389be4(0x592),_0x4cd30a);let _0x323ae4=_0x4cd30a[_0x4cd30a['length']-0x2];if(console[_0x389be4(0x2a9)]('Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:',_0x323ae4),_0x323ae4){let _0x415341=_0x323ae4[_0x389be4(0x266)]('.');console[_0x389be4(0x2a9)](_0x389be4(0x361),_0x415341),_0x415341['length']>0x2&&(_0x3a11ee=_0x415341[0x0],console[_0x389be4(0x2a9)](_0x389be4(0x407),_0x3a11ee),_0x62144d=''+_0x323ae4);}}return{'subdomain':_0x3a11ee||_0x389be4(0x805),'fullURL':_0x62144d||_0x389be4(0x25b)};}var {subdomain:K,fullURL:Gs}=lr(b);console[a0_0x5ca971(0x2a9)](a0_0x5ca971(0x337),K),console['log'](a0_0x5ca971(0x679),Gs);async function ur(){const _0x50a4d9=a0_0x5ca971;let _0x57565d=b['get'](_0x50a4d9(0x7da)),_0x3dc38c=b[_0x50a4d9(0x76d)]('AUTHENTICATION')[_0x50a4d9(0x486)]['KEY'],_0x2711fb=b['get'](_0x50a4d9(0x77d)),_0x2bbaad=await Bi(),_0x1eb0a7=b[_0x50a4d9(0x76d)](_0x50a4d9(0x69a))['PORT'],_0xd30174=Gs;try{let _0x2d4c33={'ip':_0x2bbaad||null,'redis_enable':_0x57565d?.[_0x50a4d9(0x325)]||null,'apikey':_0x3dc38c||null,'ssl':_0x2711fb?.[_0x50a4d9(0x3b9)]||null,'lastupdate':Wi||null,'port':_0x1eb0a7||null,'gitInstallError':Re?.[_0x50a4d9(0x4f4)]||null,'url':_0xd30174||null,'subdomain':K};if(console['log'](_0x50a4d9(0x7ed),_0x2d4c33['ip']),_0x57565d&&_0x57565d[_0x50a4d9(0x325)]){let _0xe63067=await cr();_0x2d4c33[_0x50a4d9(0x729)]=_0xe63067||null;}for(let _0x3604df in _0x2d4c33)_0x2d4c33[_0x50a4d9(0x72a)](_0x3604df)&&_0x3604df!=='ip'&&(_0x2d4c33[_0x3604df]=JSON[_0x50a4d9(0x179)](_0x2d4c33[_0x3604df]));return(await Je[_0x50a4d9(0x678)][_0x50a4d9(0x513)]('https://uazapi.bubbleapps.io/api/1.1/wf/verificar/',_0x2d4c33))['data'];}catch(_0x10c175){return console[_0x50a4d9(0x2b1)](_0x10c175),!0x1;}}var Js=!0x1,Wi=0x25c,dr=0x3,ji=0x1b7740;async function Vs(){const _0x40e5de=a0_0x5ca971;let _0x4fdd94=_0x40e5de(0x1f0);Re===null&&(_0x4fdd94=await Bi());let _0x27a81a=await ur();if(_0x27a81a){if(_0x27a81a[_0x40e5de(0x3f3)]['licenca']===!0x0){Re===null&&_0x27a81a[_0x40e5de(0x3f3)][_0x40e5de(0x166)]-Wi>0x0&&await pr(),Js||(Js=!0x0,ar());let _0x3a366a=0x24*0x3c*0x3c,_0x45c236=_0x27a81a[_0x40e5de(0x3f3)][_0x40e5de(0x791)]>_0x3a366a?_0x3a366a:_0x27a81a[_0x40e5de(0x3f3)][_0x40e5de(0x791)],_0x5d1c50=Number(_0x45c236);if(isNaN(_0x5d1c50)){console[_0x40e5de(0x2b1)](_0x40e5de(0x30e));return;}let _0x7a83e1=Math['floor'](_0x5d1c50/0xe10),_0xe76f19=Math[_0x40e5de(0x7c4)](_0x5d1c50%0xe10/0x3c),_0x5072c8=new Date(Date['now']()+_0x5d1c50*0x3e8);setTimeout(Vs,_0x5d1c50*0x3e8);let _0x3f5cab=_0x565db8=>_0x565db8[_0x40e5de(0x7b1)]()[_0x40e5de(0x45c)](0x2,'0'),_0x291bbf=_0x40e5de(0x830)+_0x3f5cab(_0x7a83e1)+_0x40e5de(0x3b3)+_0x3f5cab(_0xe76f19)+'\x20minutos.\x20Será\x20às\x20'+_0x3f5cab(_0x5072c8[_0x40e5de(0x719)]())+':'+_0x3f5cab(_0x5072c8[_0x40e5de(0x195)]())+'.';console['log'](_0x291bbf);}else return console['log'](_0x40e5de(0x32d)),Js&&(console[_0x40e5de(0x2a9)](_0x40e5de(0x2d3)),process[_0x40e5de(0x6ee)]()),_0x40e5de(0x232);}else{if(Ui++,Ui<dr)console[_0x40e5de(0x2a9)](_0x40e5de(0x84a)+ji/0xea60+'\x20minutos...'),setTimeout(Vs,ji);else return console[_0x40e5de(0x2b1)]('Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.'),_0x40e5de(0x67e);}}async function pr(){const _0x1ef61e=a0_0x5ca971;console[_0x1ef61e(0x2a9)](_0x1ef61e(0x29e)),console['log'](_0x1ef61e(0x803)),(0x0,ls[_0x1ef61e(0x203)])('pm2\x20flush',{'shell':!0x0})['on']('close',_0x263e3e=>{const _0x234546=_0x1ef61e;_0x263e3e!==0x0?console[_0x234546(0x2b1)](_0x234546(0x616)):(console[_0x234546(0x2a9)](_0x234546(0x5a2)),console[_0x234546(0x2a9)](_0x234546(0x7c9)),(0x0,ls[_0x234546(0x203)])('rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys',{'shell':!0x0})['on'](_0x234546(0x73e),_0x51de42=>{const _0x2f55e6=_0x234546;if(_0x51de42!==0x0)console[_0x2f55e6(0x2b1)](_0x2f55e6(0x6ec));else{console[_0x2f55e6(0x2a9)](_0x2f55e6(0x814));let _0x2d401d=(0x0,ls['spawn'])(_0x2f55e6(0x372),{'shell':!0x0});_0x2d401d['stdout']['on'](_0x2f55e6(0x5c9),_0x3e063b=>{const _0x23699a=_0x2f55e6;console['log'](_0x23699a(0x548)+_0x3e063b);}),_0x2d401d[_0x2f55e6(0x47c)]['on'](_0x2f55e6(0x5c9),_0x308e50=>{const _0x17a59c=_0x2f55e6;console[_0x17a59c(0x2b1)](_0x17a59c(0x4f1)+_0x308e50);}),_0x2d401d['on'](_0x2f55e6(0x6ee),_0x5253b2=>{const _0x27dadf=_0x2f55e6;_0x5253b2!==0x0?console['error'](_0x27dadf(0x6e8)+_0x5253b2):console['log']('Sistema\x20atualizado\x20com\x20sucesso!'),console[_0x27dadf(0x2a9)](_0x27dadf(0x5a3)),setTimeout(()=>process[_0x27dadf(0x6ee)](),0x2710);});}}));});}0x0&&(module['exports']={'fullURL':fullURL,'subdomain':subdomain});