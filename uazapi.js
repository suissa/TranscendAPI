const a0_0x2101b5=a0_0xeaf6;(function(_0x46bf62,_0x5b3476){const _0x2fab27=a0_0xeaf6,_0x17677a=_0x46bf62();while(!![]){try{const _0x360185=-parseInt(_0x2fab27(0x192))/0x1+parseInt(_0x2fab27(0x552))/0x2+parseInt(_0x2fab27(0x42b))/0x3+parseInt(_0x2fab27(0x772))/0x4*(-parseInt(_0x2fab27(0x866))/0x5)+parseInt(_0x2fab27(0x296))/0x6+parseInt(_0x2fab27(0x6a4))/0x7+parseInt(_0x2fab27(0x29a))/0x8*(-parseInt(_0x2fab27(0x5e1))/0x9);if(_0x360185===_0x5b3476)break;else _0x17677a['push'](_0x17677a['shift']());}catch(_0x4e6664){_0x17677a['push'](_0x17677a['shift']());}}}(a0_0xfc4a,0x8db9d));var Bi=Object[a0_0x2101b5(0x65e)],qe=Object[a0_0x2101b5(0x694)],Wi=Object[a0_0x2101b5(0x3c5)],zi=Object[a0_0x2101b5(0x308)],Hi=Object[a0_0x2101b5(0x147)],Ki=Object[a0_0x2101b5(0x51a)]['hasOwnProperty'],Qi=(_0x234db1,_0x1783b0)=>{for(var _0x347871 in _0x1783b0)qe(_0x234db1,_0x347871,{'get':_0x1783b0[_0x347871],'enumerable':!0x0});},Bs=(_0x4ed4fb,_0x376591,_0x3cce42,_0x40a9a4)=>{const _0x569393=a0_0x2101b5;if(_0x376591&&typeof _0x376591==_0x569393(0x69d)||typeof _0x376591==_0x569393(0x672)){for(let _0x4b3bb9 of zi(_0x376591))!Ki[_0x569393(0x5d1)](_0x4ed4fb,_0x4b3bb9)&&_0x4b3bb9!==_0x3cce42&&qe(_0x4ed4fb,_0x4b3bb9,{'get':()=>_0x376591[_0x4b3bb9],'enumerable':!(_0x40a9a4=Wi(_0x376591,_0x4b3bb9))||_0x40a9a4[_0x569393(0x17d)]});}return _0x4ed4fb;},T=(_0x360997,_0x442939,_0x398407)=>(_0x398407=_0x360997!=null?Bi(Hi(_0x360997)):{},Bs(_0x442939||!_0x360997||!_0x360997[a0_0x2101b5(0x7e0)]?qe(_0x398407,a0_0x2101b5(0x7ae),{'value':_0x360997,'enumerable':!0x0}):_0x398407,_0x360997)),Yi=_0x412e8a=>Bs(qe({},a0_0x2101b5(0x7e0),{'value':!0x0}),_0x412e8a),hr={};Qi(hr,{'fullURL':()=>Gs,'subdomain':()=>B}),module[a0_0x2101b5(0x76f)]=Yi(hr);var Ui=T(require(a0_0x2101b5(0x80f))),zs=require('fs'),Hs=require(a0_0x2101b5(0x3ad)),Ks=require(a0_0x2101b5(0x204)),Ve=require(a0_0x2101b5(0x204)),le=process[a0_0x2101b5(0x36a)](),Se=(0x0,Ve[a0_0x2101b5(0x1b4)])(le,a0_0x2101b5(0x151)),Ws=(0x0,Ve[a0_0x2101b5(0x1b4)])(le,'src'),gn=(0x0,Ve[a0_0x2101b5(0x1b4)])(le,'store',a0_0x2101b5(0x7e4)),us=class{constructor(){const _0x377f37=a0_0x2101b5;this[_0x377f37(0x395)]();}['get'](_0x48c5fe){return this['env'][_0x48c5fe];}['loadEnv'](){const _0x43da05=a0_0x2101b5;this[_0x43da05(0x520)]=process['env']?.['DOCKER_ENV']!==_0x43da05(0x58b)?this[_0x43da05(0x640)]():this[_0x43da05(0x2f0)](),process[_0x43da05(0x520)]?.[_0x43da05(0x526)]==='true'&&(this[_0x43da05(0x520)][_0x43da05(0x7d4)][_0x43da05(0x337)]=_0x43da05(0x44a),this[_0x43da05(0x520)][_0x43da05(0x7d4)][_0x43da05(0x57f)]=Number[_0x43da05(0x1fc)](process['env']?.[_0x43da05(0x6fc)]??'8080'));}['envYaml'](){const _0x1fbade=a0_0x2101b5;return(0x0,Hs['load'])((0x0,zs['readFileSync'])((0x0,Ks[_0x1fbade(0x1b4)])(Ws,'../env.yml'),{'encoding':'utf-8'}));}['envProcess'](){const _0x1e0b3c=a0_0x2101b5;return{'SERVER':{'TYPE':process[_0x1e0b3c(0x520)][_0x1e0b3c(0x7f2)],'PORT':Number[_0x1e0b3c(0x1fc)](process['env'][_0x1e0b3c(0x6fc)]),'URL':process[_0x1e0b3c(0x520)]['SERVER_URL']},'CORS':{'ORIGIN':process['env'][_0x1e0b3c(0x1a7)]['split'](','),'METHODS':process['env']['CORS_METHODS'][_0x1e0b3c(0x2bd)](','),'CREDENTIALS':process[_0x1e0b3c(0x520)]?.[_0x1e0b3c(0x2e3)]===_0x1e0b3c(0x58b)},'SSL_CONF':{'PRIVKEY':process[_0x1e0b3c(0x520)]?.[_0x1e0b3c(0x865)],'FULLCHAIN':process['env']?.[_0x1e0b3c(0x781)]},'STORE':{'CLEANING_INTERVAL':Number['isInteger'](process[_0x1e0b3c(0x520)]?.[_0x1e0b3c(0x298)])?Number[_0x1e0b3c(0x1fc)](process[_0x1e0b3c(0x520)]['STORE_CLEANING_TERMINAL']):void 0x0,'MESSAGES':process['env']?.[_0x1e0b3c(0x87d)]===_0x1e0b3c(0x58b),'CONTACTS':process[_0x1e0b3c(0x520)]?.['STORE_CONTACTS']===_0x1e0b3c(0x58b),'CHATS':process[_0x1e0b3c(0x520)]?.['STORE_CHATS']===_0x1e0b3c(0x58b)},'DATABASE':{'CONNECTION':{'HOST':process[_0x1e0b3c(0x520)]?.[_0x1e0b3c(0x833)],'PORT':Number[_0x1e0b3c(0x1fc)](process[_0x1e0b3c(0x520)]?.['DATABASE_CONNECTION_HOST']),'USER':process['env']['DATABASE_CONNECTION_USER'],'PASSWORD':process['env'][_0x1e0b3c(0x688)],'URI':process[_0x1e0b3c(0x520)][_0x1e0b3c(0x5f5)],'DB_PREFIX_NAME':process[_0x1e0b3c(0x520)][_0x1e0b3c(0x68b)]},'ENABLED':process['env']?.['DATABASE_ENABLED']===_0x1e0b3c(0x58b)},'REDIS':{'ENABLED':process[_0x1e0b3c(0x520)]?.[_0x1e0b3c(0x7b8)]==='true','URI':process[_0x1e0b3c(0x520)]['REDIS_URI']||'redis://127.0.0.1:6379','PREFIX_KEY':process[_0x1e0b3c(0x520)]['REDIS_PREFIX_KEY']||_0x1e0b3c(0x6ae)},'LOG':{'LEVEL':process[_0x1e0b3c(0x520)]?.[_0x1e0b3c(0x317)][_0x1e0b3c(0x2bd)](','),'COLOR':process['env']?.[_0x1e0b3c(0x2aa)]===_0x1e0b3c(0x58b)},'PROXY':process[_0x1e0b3c(0x520)]?.[_0x1e0b3c(0x194)]===_0x1e0b3c(0x58b),'AUTHENTICATION':{'TYPE':process[_0x1e0b3c(0x520)][_0x1e0b3c(0x490)],'API_KEY':{'KEY':process[_0x1e0b3c(0x520)][_0x1e0b3c(0x347)]},'JWT':{'EXPIRIN_IN':Number[_0x1e0b3c(0x46c)](process[_0x1e0b3c(0x520)]?.[_0x1e0b3c(0x882)])?Number['parseInt'](process[_0x1e0b3c(0x520)][_0x1e0b3c(0x882)]):0xe10,'SECRET':process[_0x1e0b3c(0x520)][_0x1e0b3c(0x2cb)]}}};}},S=new us(),ji=T(require(a0_0x2101b5(0x652))),ye=T(require(a0_0x2101b5(0x2ae))),qs=require(a0_0x2101b5(0x204)),ds=T(require(a0_0x2101b5(0x60b))),ps=(_0x38dfdd=>(_0x38dfdd['LOG']=a0_0x2101b5(0x27d),_0x38dfdd[a0_0x2101b5(0x3de)]=a0_0x2101b5(0x805),_0x38dfdd[a0_0x2101b5(0x3ba)]='\x1b[33m',_0x38dfdd['ERROR']=a0_0x2101b5(0x1bb),_0x38dfdd[a0_0x2101b5(0x22a)]=a0_0x2101b5(0x393),_0x38dfdd[a0_0x2101b5(0x7db)]=a0_0x2101b5(0x661),_0x38dfdd['DARK']=a0_0x2101b5(0x2f2),_0x38dfdd))(ps||{}),Qs=(_0x41e344=>(_0x41e344[a0_0x2101b5(0x78d)]=a0_0x2101b5(0x26d),_0x41e344[a0_0x2101b5(0x4ee)]='\x1b[30m%s\x1b[0m',_0x41e344[a0_0x2101b5(0x3de)]='\x1b[34m%s\x1b[0m',_0x41e344[a0_0x2101b5(0x3ba)]=a0_0x2101b5(0x812),_0x41e344[a0_0x2101b5(0x1dd)]=a0_0x2101b5(0x7ed),_0x41e344[a0_0x2101b5(0x22a)]=a0_0x2101b5(0x80b),_0x41e344[a0_0x2101b5(0x7db)]=a0_0x2101b5(0x279),_0x41e344))(Qs||{}),Ys=(_0x586d4b=>(_0x586d4b[a0_0x2101b5(0x78d)]=a0_0x2101b5(0x78d),_0x586d4b[a0_0x2101b5(0x3ba)]=a0_0x2101b5(0x3ba),_0x586d4b[a0_0x2101b5(0x3de)]=a0_0x2101b5(0x3de),_0x586d4b[a0_0x2101b5(0x4ee)]=a0_0x2101b5(0x4ee),_0x586d4b[a0_0x2101b5(0x1dd)]='ERROR',_0x586d4b[a0_0x2101b5(0x22a)]=a0_0x2101b5(0x22a),_0x586d4b[a0_0x2101b5(0x7db)]=a0_0x2101b5(0x7db),_0x586d4b))(Ys||{}),Xs=(_0xcc8b3a=>(_0xcc8b3a[a0_0x2101b5(0x78d)]='\x1b[42m',_0xcc8b3a[a0_0x2101b5(0x3de)]='\x1b[44m',_0xcc8b3a[a0_0x2101b5(0x3ba)]=a0_0x2101b5(0x4a3),_0xcc8b3a[a0_0x2101b5(0x4ee)]='\x1b[40m',_0xcc8b3a[a0_0x2101b5(0x1dd)]=a0_0x2101b5(0x8aa),_0xcc8b3a['DEBUG']=a0_0x2101b5(0x4ec),_0xcc8b3a[a0_0x2101b5(0x7db)]='\x1b[47m',_0xcc8b3a))(Xs||{}),$=class{constructor(_0x23fd0c='Logger'){const _0x251318=a0_0x2101b5;this[_0x251318(0x81c)]=_0x23fd0c,this[_0x251318(0x596)]=S;}[a0_0x2101b5(0x282)](_0x481640){const _0x4ae941=a0_0x2101b5;this[_0x4ae941(0x81c)]=_0x481640;}['console'](_0x3b637b,_0x4e4245){const _0x222c39=a0_0x2101b5;let _0xca81d7=[];this[_0x222c39(0x596)][_0x222c39(0x34a)](_0x222c39(0x78d))[_0x222c39(0x1a2)][_0x222c39(0x600)](_0x47b407=>_0xca81d7['push'](Ys[_0x47b407]));let _0x1a9527=typeof _0x3b637b;_0xca81d7['includes'](_0x4e4245)&&(S['get'](_0x222c39(0x78d))[_0x222c39(0x5bd)]?(console[_0x222c39(0x509)](_0x222c39(0x211)+Qs[_0x4e4245],_0x222c39(0x4f7),(0x0,ds[_0x222c39(0x7ae)])()[_0x222c39(0x14f)](_0x222c39(0x6e6)),_0x222c39(0x5da),ps[_0x4e4245]+Xs[_0x4e4245]+_0x222c39(0x211),_0x4e4245+_0x222c39(0x3a3),_0x222c39(0x18e),this['context']+_0x222c39(0x5da),ps[_0x4e4245],_0x1a9527!==_0x222c39(0x69d)?_0x3b637b:'',_0x222c39(0x5da)),_0x1a9527===_0x222c39(0x69d)&&console[_0x222c39(0x509)](_0x3b637b,'\x0a')):console[_0x222c39(0x509)]((0x0,ds[_0x222c39(0x7ae)])()[_0x222c39(0x14f)](_0x222c39(0x8a8)),_0x4e4245+'\x20',''+this[_0x222c39(0x81c)],_0x3b637b));}[a0_0x2101b5(0x509)](_0xccd1a2){const _0x3cbb99=a0_0x2101b5;this[_0x3cbb99(0x1d7)](_0xccd1a2,_0x3cbb99(0x78d));}[a0_0x2101b5(0x344)](_0x27e7da){const _0x1a1a50=a0_0x2101b5;this[_0x1a1a50(0x1d7)](_0x27e7da,_0x1a1a50(0x3de));}[a0_0x2101b5(0x7e3)](_0x230adc){this['console'](_0x230adc,'WARN');}[a0_0x2101b5(0x3c9)](_0x2c43e5){const _0x14eec5=a0_0x2101b5;this[_0x14eec5(0x1d7)](_0x2c43e5,'ERROR');}[a0_0x2101b5(0x667)](_0x44c604){const _0x36d052=a0_0x2101b5;this[_0x36d052(0x1d7)](_0x44c604,'VERBOSE');}[a0_0x2101b5(0x375)](_0x27b567){const _0x3270db=a0_0x2101b5;this[_0x3270db(0x1d7)](_0x27b567,'DEBUG');}[a0_0x2101b5(0x610)](_0x419ecf){const _0xe9c6e5=a0_0x2101b5;this['console'](_0x419ecf,_0xe9c6e5(0x4ee));}};function Zs(){const _0x24708c=a0_0x2101b5;process['on']('uncaughtException',(_0x2ee931,_0x58ac3e)=>{const _0x271e4a=a0_0xeaf6;new $(_0x271e4a(0x39e))[_0x271e4a(0x3c9)]({'origin':_0x58ac3e,'stderr':process[_0x271e4a(0x495)]['fd'],'error':_0x2ee931});}),process['on'](_0x24708c(0x1f0),(_0x56f954,_0x38f5ec)=>{const _0x1cd7b7=_0x24708c;new $(_0x1cd7b7(0x1f0))[_0x1cd7b7(0x3c9)]({'origin':_0x38f5ec,'stderr':process[_0x1cd7b7(0x495)]['fd'],'error':_0x56f954});});}var ea=T(require(a0_0x2101b5(0x782))),hs=new ea['default']({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Me=require(a0_0x2101b5(0x607)),Ae=T(require(a0_0x2101b5(0x607))),Ge=new $(a0_0x2101b5(0x427)),L=S[a0_0x2101b5(0x34a)](a0_0x2101b5(0x5b1)),I=L['ENABLED']?L[a0_0x2101b5(0x656)]['URI']?Ae[a0_0x2101b5(0x7ae)][a0_0x2101b5(0x753)](L[a0_0x2101b5(0x656)][a0_0x2101b5(0x630)],{'dbName':L['CONNECTION'][a0_0x2101b5(0x181)]+a0_0x2101b5(0x769)}):Ae[a0_0x2101b5(0x7ae)][a0_0x2101b5(0x753)]('mongodb://'+L[a0_0x2101b5(0x656)][a0_0x2101b5(0x21d)]+':'+L[a0_0x2101b5(0x656)][a0_0x2101b5(0x57f)]+'?authSource=admin&readPreference=primary&directConnection=true',{'user':L[a0_0x2101b5(0x656)][a0_0x2101b5(0x1c7)],'pass':L[a0_0x2101b5(0x656)][a0_0x2101b5(0x4e6)],'dbName':L[a0_0x2101b5(0x656)]['DB_PREFIX_NAME']+a0_0x2101b5(0x769)}):null;L[a0_0x2101b5(0x6f5)]&&Ge['info']('ON\x20-\x20dbName:\x20'+I[a0_0x2101b5(0x36b)]);var X=L[a0_0x2101b5(0x6f5)]?L[a0_0x2101b5(0x656)]['URI']?Ae['default'][a0_0x2101b5(0x753)](L[a0_0x2101b5(0x656)][a0_0x2101b5(0x630)],{'dbName':'cachedData-whatsapp'}):Ae[a0_0x2101b5(0x7ae)][a0_0x2101b5(0x753)](a0_0x2101b5(0x575)+L[a0_0x2101b5(0x656)]['HOST']+':'+L[a0_0x2101b5(0x656)][a0_0x2101b5(0x57f)]+a0_0x2101b5(0x8c0),{'user':L[a0_0x2101b5(0x656)][a0_0x2101b5(0x1c7)],'pass':L[a0_0x2101b5(0x656)][a0_0x2101b5(0x4e6)],'dbName':a0_0x2101b5(0x1f4)}):null;X&&Ge['info']('ON\x20-\x20dbName:\x20'+X[a0_0x2101b5(0x36b)]),process['on'](a0_0x2101b5(0x896),()=>{const _0x1c8a73=a0_0x2101b5;I&&I[_0x1c8a73(0x584)](()=>{const _0x48439d=_0x1c8a73;Ge[_0x48439d(0x344)](_0x48439d(0x3b4));}),X&&X['close'](()=>{const _0x386876=_0x1c8a73;Ge[_0x386876(0x344)]('CacheContacts\x20database\x20connection\x20closed.');});});var Xi=new Me['Schema']({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),Zi=new Me[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),eo=new Me['Schema']({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),to=new Me[(a0_0x2101b5(0x6c8))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[Xi],'default':[]}},{'_id':!0x1}),so=new Me['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':to,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':Zi},'groupdata':{'type':eo,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),ta=_0xcc7998=>{const _0x3d1a40=a0_0x2101b5;let _0x18844e='z_'+_0xcc7998+'_Chats';return I?.[_0x3d1a40(0x887)]('ChatModel',so,_0x18844e);},sa=require('mongoose'),ao=new sa['Schema']({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),aa=_0x1bb0fe=>{const _0x5443b3=a0_0x2101b5;let _0x1eb5e7='z_'+_0x1bb0fe+_0x5443b3(0x5c5);return I?.['model'](_0x5443b3(0x86d),ao,_0x1eb5e7);},ia=require('mongoose'),gs=class{},io=new ia[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),oa=X?.['model'](gs[a0_0x2101b5(0x89c)],io,a0_0x2101b5(0x870)),ra=require(a0_0x2101b5(0x607)),ms=class{},oo=new ra['Schema']({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),Be=X?.['model'](ms[a0_0x2101b5(0x89c)],oo,a0_0x2101b5(0x151)),ws=require(a0_0x2101b5(0x607)),fs=class{},ro=new ws[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),no=new ws[(a0_0x2101b5(0x6c8))]({'_id':{'type':String},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),na=X?.[a0_0x2101b5(0x887)](fs[a0_0x2101b5(0x89c)],no,a0_0x2101b5(0x2f5)),ca=_0x2bafa2=>{const _0x1a52a5=a0_0x2101b5;let _0x47a374='z_'+_0x2bafa2+_0x1a52a5(0x369);return I?.[_0x1a52a5(0x887)](_0x1a52a5(0x18d),ro,_0x47a374);},la=require('mongoose'),ys=class{},co=new la[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),ua=I?.[a0_0x2101b5(0x887)](ys[a0_0x2101b5(0x89c)],co,a0_0x2101b5(0x868)),da=require(a0_0x2101b5(0x607)),bs=class{},pa=new da[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});pa[a0_0x2101b5(0x82d)](a0_0x2101b5(0x3af),function(_0x55ff4e){const _0x31bd6d=a0_0x2101b5;delete this['flowActive'],delete this[_0x31bd6d(0x684)],delete this['flowPrefixCommand'],delete this[_0x31bd6d(0x6b6)],delete this['flowStopMinutes'],_0x55ff4e();});var ha=I?.[a0_0x2101b5(0x887)](bs[a0_0x2101b5(0x89c)],pa,'webhook'),P=require(a0_0x2101b5(0x607)),Ss=require(a0_0x2101b5(0x3a2)),We=class{},Ms=class{},ma=new P[(a0_0x2101b5(0x6c8))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Cs=new P[(a0_0x2101b5(0x6c8))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),lo=new P[(a0_0x2101b5(0x6c8))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':'list'},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x2101b5(0x2c6)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x2101b5(0x7d3)},'pollErrorMessage':{'type':String,'default':'Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.'},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),fa=new P[(a0_0x2101b5(0x6c8))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),uo=new P[(a0_0x2101b5(0x6c8))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),po=new P[(a0_0x2101b5(0x6c8))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),vs=new P[(a0_0x2101b5(0x6c8))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),ho=new P[(a0_0x2101b5(0x6c8))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),wa=new P[(a0_0x2101b5(0x6c8))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':lo},'apirequest':uo,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':ho,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),ya=new P[(a0_0x2101b5(0x6c8))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),ba=new P[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[vs],'blocks':[wa],'groups':[ma],'conditions':[fa],'varedits':[ya],'replyOptions':{'type':[Cs],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x46d075=a0_0x2101b5;return _0x46d075(0x81e)+Math[_0x46d075(0x78b)]()[_0x46d075(0x60f)](0x24)[_0x46d075(0x388)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':a0_0x2101b5(0x2b3)},'startID':{'type':String,'default':()=>(0x0,Ss['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ss['v4'])()},'shareOwners':{'type':[String],'default':[]}});ba[a0_0x2101b5(0x82d)]('findOneAndUpdate',function(_0x4d8ddb){const _0x473f6a=a0_0x2101b5;let _0x3f0daf=this[_0x473f6a(0x813)]();if(_0x3f0daf&&typeof _0x3f0daf=='object'&&'$set'in _0x3f0daf){let _0x2ab3c5=_0x3f0daf[_0x473f6a(0x6d1)];if(_0x2ab3c5){let _0x1c7a59=new Set(),_0x2d67ba=new Set(_0x2ab3c5[_0x473f6a(0x2da)]?.[_0x473f6a(0x5e6)](_0x8aad4e=>_0x8aad4e[_0x473f6a(0x89c)])),_0x19ea5a=JSON[_0x473f6a(0x41d)](_0x2ab3c5),_0x4ab967=/{{(?!_)([^}]*)}}/g,_0x168c93;for(;(_0x168c93=_0x4ab967['exec'](_0x19ea5a))!==null;)_0x2d67ba[_0x473f6a(0x350)](_0x168c93[0x1])||_0x1c7a59['add'](_0x168c93[0x1]);_0x1c7a59['size']>0x0?(console['warn'](_0x473f6a(0x402),Array[_0x473f6a(0x50f)](_0x1c7a59)),_0x2ab3c5[_0x473f6a(0x6c2)]=Array[_0x473f6a(0x50f)](_0x1c7a59)):_0x2ab3c5['variablesNotFound']=[],this[_0x473f6a(0x54d)]({'$set':_0x2ab3c5});}}_0x4d8ddb();});var Ce=I?.[a0_0x2101b5(0x887)](Ms['name'],ba,a0_0x2101b5(0x4c3)),go=new P[(a0_0x2101b5(0x6c8))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[vs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[po]},{'_id':!0x1}),mo=new P[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[vs],'blocks':[wa],'groups':[ma],'conditions':[fa],'varedits':[ya],'replyOptions':{'type':[Cs],'default':[]},'chatLog':go,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':'open'},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x2101b5(0x7d3)},'waitingMenu_replyOptions':{'type':[Cs],'default':[]}}),Sa=_0x226980=>{const _0x1828a3=a0_0x2101b5;let _0x1ccf04='z_'+_0x226980+_0x1828a3(0x264);return I?.[_0x1828a3(0x887)](_0x1828a3(0x64c),mo,_0x1ccf04);},fo=new P[(a0_0x2101b5(0x6c8))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),ga=new P['Schema']({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),wo=new P[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[ga],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x2101b5(0x518)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[fo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':ga,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ma=_0x474765=>{const _0x5a6d1b=a0_0x2101b5;let _0x5b32a3='z_'+_0x474765+_0x5a6d1b(0x6e4);return I?.[_0x5a6d1b(0x887)](_0x5a6d1b(0x31c),wo,_0x5b32a3);},Es=class{},yo=new P['Schema']({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),bo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),So=new P[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Mo=new P['Schema']({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':a0_0x2101b5(0x6eb)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),Co=new P[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),Eo=new P[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[Co]},'customFields':{'type':[So]},'flowConfig':{'type':Mo,'default':{}},'flows':{'type':[bo],'default':[]},'autoCompleteMessages':{'type':[yo],'default':[]}}),Ie=I?.[a0_0x2101b5(0x887)](Es[a0_0x2101b5(0x89c)],Eo,'AutomateSystem'),Ca=require(a0_0x2101b5(0x607)),vo=new Ca[(a0_0x2101b5(0x6c8))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),Ea=_0x315d9f=>{const _0x282898=a0_0x2101b5;let _0x3e1744='z_'+_0x315d9f+_0x282898(0x6cc);return I?.[_0x282898(0x887)](_0x282898(0x848),vo,_0x3e1744);},_=class{constructor(_0x397cff){const _0x826850=a0_0x2101b5;this[_0x826850(0x4d5)]=_0x397cff['get'](_0x826850(0x5b1));}};function A(_0x45fe76){const _0x4db5d7=a0_0x2101b5;let _0x114297={};for(let [_0x1eeba0,_0x25617f]of Object[_0x4db5d7(0x7bc)](_0x45fe76))if(typeof _0x25617f==_0x4db5d7(0x69d)&&!Array['isArray'](_0x25617f)){for(let [_0x25dc7d,_0x215899]of Object[_0x4db5d7(0x7bc)](_0x25617f))_0x114297[_0x1eeba0+'.'+_0x25dc7d]=_0x215899;}else _0x114297[_0x1eeba0]=_0x25617f;return _0x114297;}var ze=class{constructor(_0x4c2e02,_0x8ad041,_0x1ca281,_0x544acc,_0x5bad4a,_0x448157,_0x352d19,_0x2e2589,_0x598812,_0xaf166a,_0x18ebb1,_0x5de89b,_0x17cab0,_0x4cd69c){const _0xaceaa3=a0_0x2101b5;this[_0xaceaa3(0x31f)]=_0x4c2e02,this[_0xaceaa3(0x5b2)]=_0x8ad041,this['contact']=_0x1ca281,this[_0xaceaa3(0x7e6)]=_0x544acc,this[_0xaceaa3(0x29d)]=_0x5bad4a,this[_0xaceaa3(0x8a1)]=_0x448157,this[_0xaceaa3(0x7e4)]=_0x352d19,this[_0xaceaa3(0x7f4)]=_0x2e2589,this[_0xaceaa3(0x399)]=_0x598812,this[_0xaceaa3(0x4bd)]=_0xaf166a,this['label']=_0x18ebb1,this[_0xaceaa3(0x549)]=_0x5de89b,this[_0xaceaa3(0x1ff)]=_0x17cab0,this[_0xaceaa3(0x89e)]=_0x4cd69c;}get[a0_0x2101b5(0x5cd)](){const _0x479609=a0_0x2101b5;return this[_0x479609(0x89e)];}},He=class{},Ke=class extends _{['getMessageModelForOwner'](_0x2cbfe8){return ca(_0x2cbfe8);}async[a0_0x2101b5(0x7a2)](_0x3fec2e,_0x4ee6b8){const _0x26c190=a0_0x2101b5;if(_0x3fec2e[_0x26c190(0x608)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x26c190(0x77d)](_0x4ee6b8)[_0x26c190(0x250)]([..._0x3fec2e]))[_0x26c190(0x608)]};}catch(_0x1ed4af){return _0x1ed4af;}}async[a0_0x2101b5(0x604)](_0x597660,_0x1f53eb){const _0x2bcaf3=a0_0x2101b5;try{let _0x4dffe8=this[_0x2bcaf3(0x77d)](_0x1f53eb),_0x4102c6=A(_0x597660[_0x2bcaf3(0x702)]);return await _0x4dffe8[_0x2bcaf3(0x604)](_0x4102c6)[_0x2bcaf3(0x305)]({'messageTimestamp':-0x1})['limit'](_0x597660?.['limit']??0x0)[_0x2bcaf3(0x70f)]();}catch{return[];}}async[a0_0x2101b5(0x57b)](_0x57ab93,_0x5e04fa){const _0x3161ad=a0_0x2101b5;try{let _0x29f02b=this[_0x3161ad(0x77d)](_0x5e04fa),_0x436f0b=A(_0x57ab93['where']);await _0x29f02b[_0x3161ad(0x690)](_0x436f0b);}catch(_0x1741c5){console[_0x3161ad(0x3c9)](_0x1741c5);}}async[a0_0x2101b5(0x842)](_0x15a2e9,_0x2aff6a,_0x26b1e5){const _0x219712=a0_0x2101b5;try{let _0xa2c01c=this['getMessageModelForOwner'](_0x26b1e5),_0x5eb368=A(_0x15a2e9[_0x219712(0x702)]);return await _0xa2c01c[_0x219712(0x5de)](_0x5eb368,{'$set':_0x2aff6a},{'new':!0x0});}catch(_0x1457da){throw console[_0x219712(0x3c9)](_0x1457da),_0x1457da;}}async[a0_0x2101b5(0x250)](_0x2d397d,_0xf158f3){const _0x33b1f4=a0_0x2101b5;if(_0x2d397d[_0x33b1f4(0x608)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x33b1f4(0x77d)](_0xf158f3)[_0x33b1f4(0x250)]([..._0x2d397d]))['length']};}catch(_0x5af9d4){return console[_0x33b1f4(0x509)]('ERROR:\x20',_0x5af9d4),_0x5af9d4;}}async['deleteAll'](_0x3dcb13){const _0x40783f=a0_0x2101b5;try{return await this[_0x40783f(0x77d)](_0x3dcb13)['collection'][_0x40783f(0x214)](),{'success':!0x0};}catch(_0x1df591){return console['error'](_0x1df591),{'success':!0x1,'error':_0x1df591};}}},Ps=T(require('@ffmpeg-installer/ffmpeg')),w=T(require(a0_0x2101b5(0x89f))),Le=require('fs'),j=T(require(a0_0x2101b5(0x204))),Q=T(require('axios')),Ii=require(a0_0x2101b5(0x3a2)),Ti=T(require('qrcode')),_i=T(require(a0_0x2101b5(0x3a7))),va=[a0_0x2101b5(0x45b),a0_0x2101b5(0x66d),a0_0x2101b5(0x893),a0_0x2101b5(0x363),a0_0x2101b5(0x18c)],Na=['ephemeralMessage',a0_0x2101b5(0x846),a0_0x2101b5(0x24e),a0_0x2101b5(0x540)],Ds=require('os'),Ft=T(require(a0_0x2101b5(0x51e))),Fe=require(a0_0x2101b5(0x7d0)),Oi=require(a0_0x2101b5(0x386)),ge=T(require('mongoose')),J=require(a0_0x2101b5(0x80e)),ue=class{constructor(_0x14f24a,_0x40e73c,_0x5c10c4){const _0x79b45c=a0_0x2101b5;this['jid']=_0x14f24a,this[_0x79b45c(0x6de)]=_0x40e73c,this[_0x79b45c(0x89c)]=_0x5c10c4;}},Qe=class{},Ye=class{},Te=class{},Xe=class{},Ze=class{},Ee=class{},et=class{},tt=class{},st=class{},at=class{},Ot=T(require('express')),$a=require('fs'),Ra=require(a0_0x2101b5(0x204));async function _e(_0x5418a1){const _0x2e9151=a0_0x2101b5;let _0x412bed=G['waInstances'][_0x5418a1];if(L[_0x2e9151(0x6f5)]){let _0x27db14=I[_0x2e9151(0x44f)]()['db'](L[_0x2e9151(0x656)][_0x2e9151(0x181)]+'-instances')['collection'](_0x5418a1);return _0x412bed||(await _0x27db14['find']({})['toArray']())[_0x2e9151(0x608)]>0x0;}return _0x412bed||(0x0,$a[_0x2e9151(0x7b7)])((0x0,Ra['join'])(Se,_0x5418a1));}async function Aa(_0x3a57b3,_0x1fe24a,_0x597c5b){const _0x2d2b26=a0_0x2101b5;if(_0x3a57b3[_0x2d2b26(0x49e)]['includes']('/instance/create')||_0x3a57b3[_0x2d2b26(0x49e)][_0x2d2b26(0x267)]('/instance/fetchInstances')||_0x3a57b3[_0x2d2b26(0x49e)][_0x2d2b26(0x267)](_0x2d2b26(0x8b5))||_0x3a57b3[_0x2d2b26(0x49e)]['includes'](_0x2d2b26(0x292))||_0x3a57b3['originalUrl']['includes'](_0x2d2b26(0x7fb))||_0x3a57b3[_0x2d2b26(0x49e)][_0x2d2b26(0x267)](_0x2d2b26(0x55e))||_0x3a57b3['originalUrl'][_0x2d2b26(0x267)]('/instance/delete'))return _0x597c5b();let _0x14a63f=_0x3a57b3[_0x2d2b26(0x19c)];if(!_0x14a63f?.[_0x2d2b26(0x4a8)])throw new m('instanceName\x20not\x20provided.');if(!await _e(_0x14a63f[_0x2d2b26(0x4a8)]))throw new U('The\x20'+_0x14a63f[_0x2d2b26(0x4a8)]+_0x2d2b26(0x739));_0x597c5b();}async function Ia(_0x29f075,_0x4c7132,_0x26c213){const _0x192107=a0_0x2101b5;if(_0x29f075[_0x192107(0x49e)][_0x192107(0x267)](_0x192107(0x19f))){let _0x3f8b58=_0x29f075[_0x192107(0x2ab)];if(await _e(_0x3f8b58[_0x192107(0x4a8)]))throw new Z(_0x192107(0x8a0)+_0x3f8b58[_0x192107(0x4a8)]+_0x192107(0x63d));G[_0x192107(0x34b)][_0x3f8b58[_0x192107(0x4a8)]]&&delete G[_0x192107(0x34b)][_0x3f8b58[_0x192107(0x4a8)]];}_0x26c213();}var Ta=require(a0_0x2101b5(0x80e)),_a=T(require(a0_0x2101b5(0x450))),it=a0_0x2101b5(0x6ae),$o=new $(a0_0x2101b5(0x8b8));async function Ro(_0x584abc,_0x5abcf2,_0x50d139){const _0x142351=a0_0x2101b5;let _0x4ed2aa=_0x584abc[_0x142351(0x34a)](_0x142351(0x77b));if(_0x4ed2aa&&S['get'](_0x142351(0x532))[_0x142351(0x2df)][_0x142351(0x324)]!==_0x4ed2aa)throw new ie();if(S[_0x142351(0x34a)]('AUTHENTICATION')[_0x142351(0x2df)][_0x142351(0x324)]===_0x4ed2aa)return _0x50d139();if((_0x584abc[_0x142351(0x49e)]['includes'](_0x142351(0x19f))||_0x584abc[_0x142351(0x49e)]['includes'](_0x142351(0x56d)))&&!_0x4ed2aa)throw new Z('Missing\x20global\x20api\x20key','The\x20global\x20api\x20key\x20must\x20be\x20set');let _0x13bf7e=S[_0x142351(0x34a)](_0x142351(0x532))['JWT'];try{let [_0x5043f9,_0x573f06]=_0x584abc[_0x142351(0x34a)](_0x142351(0x603))[_0x142351(0x2bd)]('\x20');if(_0x5043f9[_0x142351(0x86b)]()!==_0x142351(0x6ab))throw new ie();if(!(0x0,Ta[_0x142351(0x60c)])(_0x573f06))throw new ie();let _0x3d0223=_0x584abc[_0x142351(0x19c)],_0x39a747=_a['default']['verify'](_0x573f06,_0x13bf7e[_0x142351(0x2f6)],{'ignoreExpiration':_0x13bf7e[_0x142351(0x86f)]===0x0});if(_0x3d0223[_0x142351(0x4a8)]!==_0x39a747[_0x142351(0x4a8)]||it!==_0x39a747[_0x142351(0x3ed)])throw new ie();return _0x50d139();}catch(_0x3a7e31){throw $o[_0x142351(0x3c9)](_0x3a7e31),new ie();}}async function Ao(_0x16dc46,_0x1b5a50,_0x144e75){const _0x444f19=a0_0x2101b5;let _0x4f75b8=S['get'](_0x444f19(0x532))[_0x444f19(0x2df)],_0x3e8c2e=_0x16dc46['get'](_0x444f19(0x77b));if(_0x4f75b8[_0x444f19(0x324)]===_0x3e8c2e)return _0x144e75();if(_0x16dc46['originalUrl']['includes']('/instance/create')){let _0x34f8d0=xa,_0x11c671=_0x16dc46[_0x444f19(0x2ab)][_0x444f19(0x4a8)];if(_0x34f8d0&&_0x11c671[_0x444f19(0x86b)]()['startsWith'](_0x34f8d0['toLowerCase']()))return _0x144e75();if(!_0x3e8c2e)throw new Z(_0x444f19(0x3e1),_0x444f19(0x1e6));}if(_0x16dc46[_0x444f19(0x49e)]['includes'](_0x444f19(0x56d))&&!_0x3e8c2e)throw new Z(_0x444f19(0x3e1),_0x444f19(0x1e6));if(_0x16dc46['originalUrl'][_0x444f19(0x267)]('/exit')&&!_0x3e8c2e)throw new Z(_0x444f19(0x3e1),_0x444f19(0x1e6));if(_0x16dc46[_0x444f19(0x49e)][_0x444f19(0x267)](_0x444f19(0x292))&&!_0x3e8c2e)throw new Z('Missing\x20global\x20api\x20key',_0x444f19(0x1e6));try{let _0x33ca4a=_0x16dc46[_0x444f19(0x19c)],_0x2f6fcf=await fe[_0x444f19(0x7e4)][_0x444f19(0x604)](_0x33ca4a[_0x444f19(0x4a8)]);if(_0x2f6fcf&&_0x2f6fcf[_0x444f19(0x77b)]===_0x3e8c2e)return _0x144e75();}catch{}throw new ie();}var Oa={'jwt':Ro,'apikey':Ao},pi=require('express'),C=require(a0_0x2101b5(0x3a2)),E=(..._0xda5e9a)=>{const _0x34ea95=a0_0x2101b5;let _0x3ca639={};return _0xda5e9a[_0x34ea95(0x600)](_0xe24d84=>_0x3ca639[_0xe24d84]={'minLength':0x1,'description':'The\x20\x22'+_0xe24d84+'\x22\x20cannot\x20be\x20empty'}),{'if':{'propertyNames':{'enum':[..._0xda5e9a]}},'then':{'properties':_0x3ca639}};},N={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'instanceName':{'type':a0_0x2101b5(0x30d)}},...E(a0_0x2101b5(0x4a8))},Rc={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'oldToken':{'type':'string'}},'required':[a0_0x2101b5(0x5b3)],...E(a0_0x2101b5(0x5b3))},Ac={'properties':{'key':{'type':a0_0x2101b5(0x69d),'properties':{'id':{'type':a0_0x2101b5(0x30d)},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]}},'required':['id','remoteJid',a0_0x2101b5(0x4f0)],...E('id','remoteJid')},'message':{'type':a0_0x2101b5(0x69d)}}},oe={'properties':{'delay':{'type':a0_0x2101b5(0x861),'description':a0_0x2101b5(0x6c6)},'presence':{'type':a0_0x2101b5(0x30d),'enum':['unavailable',a0_0x2101b5(0x426),a0_0x2101b5(0x7ea),a0_0x2101b5(0x268),a0_0x2101b5(0x5d0)]}}},ee={'type':a0_0x2101b5(0x30d),'description':'Invalid\x20format'},Pa={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'number':{...ee},'options':{...oe},'textMessage':{'type':a0_0x2101b5(0x69d),'properties':{'text':{'type':'string'}},'required':['text'],...E('text')}},'required':[a0_0x2101b5(0x87c),a0_0x2101b5(0x17a)]},Da={'type':a0_0x2101b5(0x30d),'pattern':a0_0x2101b5(0x5cc),'description':a0_0x2101b5(0x7c0)},Ic={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'number':{...Da},'options':{...oe},'textMessage':{'type':a0_0x2101b5(0x69d),'properties':{'text':{'type':'string'}},'required':['text'],...E(a0_0x2101b5(0x1b9))}},'required':[a0_0x2101b5(0x87c),a0_0x2101b5(0x17a)]},Tc={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Da},'options':{...oe},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x2101b5(0x30d),'enum':[a0_0x2101b5(0x2c4),'document',a0_0x2101b5(0x492),a0_0x2101b5(0x6d8)]},'media':{'type':a0_0x2101b5(0x30d)},'fileName':{'type':a0_0x2101b5(0x30d)},'caption':{'type':a0_0x2101b5(0x30d)}},'required':[a0_0x2101b5(0x88d),a0_0x2101b5(0x4f6)],...E(a0_0x2101b5(0x8b3),a0_0x2101b5(0x6bd),a0_0x2101b5(0x4f6))}},'required':['mediaMessage',a0_0x2101b5(0x17a)]},ka={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...ee},'options':{...oe},'stickerMessage':{'type':a0_0x2101b5(0x69d),'properties':{'image':{'type':a0_0x2101b5(0x30d)}},'required':[a0_0x2101b5(0x2c4)],...E('image')}},'required':[a0_0x2101b5(0x18c),a0_0x2101b5(0x17a)]},La={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'statusMessage':{'type':'object','properties':{'type':{'type':'string','enum':[a0_0x2101b5(0x1b9),'image',a0_0x2101b5(0x6d8),a0_0x2101b5(0x492)]},'content':{'type':a0_0x2101b5(0x30d)},'caption':{'type':'string'},'backgroundColor':{'type':'string'},'font':{'type':'integer','minimum':0x0,'maximum':0x5},'statusJidList':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x2101b5(0x30d),'pattern':a0_0x2101b5(0x437),'description':a0_0x2101b5(0x3b9)}},'allContacts':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x2101b5(0x1a3),a0_0x2101b5(0x823)],...E(a0_0x2101b5(0x1a3),a0_0x2101b5(0x823))}},'required':[a0_0x2101b5(0x40b)]},Fa={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'number':{...ee},'options':{...oe},'mediaMessage':{'type':a0_0x2101b5(0x69d),'properties':{'mediatype':{'type':a0_0x2101b5(0x30d),'enum':[a0_0x2101b5(0x2c4),'document','video',a0_0x2101b5(0x6d8)]},'media':{'type':'string'},'fileName':{'type':a0_0x2101b5(0x30d)},'caption':{'type':'string'}},'required':[a0_0x2101b5(0x88d),a0_0x2101b5(0x4f6)],...E(a0_0x2101b5(0x8b3),'caption',a0_0x2101b5(0x4f6))}},'required':[a0_0x2101b5(0x1fe),a0_0x2101b5(0x17a)]},Ua={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'number':{...ee},'options':{...oe},'audioMessage':{'type':a0_0x2101b5(0x69d),'properties':{'audio':{'type':'string'}},'required':[a0_0x2101b5(0x6d8)],...E(a0_0x2101b5(0x6d8))}},'required':['audioMessage',a0_0x2101b5(0x17a)]},ja={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'number':{...ee},'pollMessage':{'type':a0_0x2101b5(0x69d),'properties':{'name':{'type':a0_0x2101b5(0x30d)},'selectableCount':{'type':a0_0x2101b5(0x17a)},'values':{'type':'array','minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x2101b5(0x89c),a0_0x2101b5(0x2a2),a0_0x2101b5(0x482)],...E('name',a0_0x2101b5(0x2a2),a0_0x2101b5(0x482))}},'required':[a0_0x2101b5(0x17a),a0_0x2101b5(0x3ee)]},Ja={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'number':{...ee},'menuMessage':{'type':a0_0x2101b5(0x69d),'properties':{'text':{'type':'string'},'choices':{'type':a0_0x2101b5(0x14a),'uniqueItems':!0x0}},'required':['text',a0_0x2101b5(0x721)],...E(a0_0x2101b5(0x1b9),a0_0x2101b5(0x721))}},'required':[a0_0x2101b5(0x17a),a0_0x2101b5(0x4c7)]},qa={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'number':{...ee},'options':{...oe},'locationMessage':{'type':a0_0x2101b5(0x69d),'properties':{'latitude':{'type':a0_0x2101b5(0x17a)},'longitude':{'type':'number'},'name':{'type':a0_0x2101b5(0x30d)},'address':{'type':a0_0x2101b5(0x30d)}},'required':[a0_0x2101b5(0x269),'longitude'],...E(a0_0x2101b5(0x89c),a0_0x2101b5(0x325))}},'required':[a0_0x2101b5(0x17a),a0_0x2101b5(0x59f)]},Va={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'number':{...ee},'options':{...oe},'listMessage':{'type':a0_0x2101b5(0x69d),'properties':{'title':{'type':a0_0x2101b5(0x30d)},'description':{'type':a0_0x2101b5(0x30d)},'footerText':{'type':'string'},'buttonText':{'type':a0_0x2101b5(0x30d)},'sections':{'type':a0_0x2101b5(0x14a),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x2101b5(0x69d),'properties':{'title':{'type':'string'},'rows':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x2101b5(0x69d),'properties':{'title':{'type':a0_0x2101b5(0x30d)},'description':{'type':a0_0x2101b5(0x30d)},'rowId':{'type':a0_0x2101b5(0x30d)}},'required':['title',a0_0x2101b5(0x3df)],...E('title',a0_0x2101b5(0x3df))}}},'required':[a0_0x2101b5(0x67c),a0_0x2101b5(0x89a)],...E('title')}}},'required':['title',a0_0x2101b5(0x6f7),'buttonText',a0_0x2101b5(0x381)],...E(a0_0x2101b5(0x67c),a0_0x2101b5(0x6f7),a0_0x2101b5(0x7c7),a0_0x2101b5(0x741))}},'required':[a0_0x2101b5(0x17a),'listMessage']},Ga={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...ee},'options':{...oe},'contactMessage':{'type':a0_0x2101b5(0x14a),'items':{'type':'object','properties':{'fullName':{'type':'string'},'phoneNumber':{'type':a0_0x2101b5(0x30d),'minLength':0xa}},'required':[a0_0x2101b5(0x8ab),a0_0x2101b5(0x3b1)],...E(a0_0x2101b5(0x8ab))},'minItems':0x1,'uniqueItems':!0x0}},'required':['number',a0_0x2101b5(0x1ee)]},Ba={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'reactionMessage':{'type':a0_0x2101b5(0x69d),'properties':{'key':{'type':a0_0x2101b5(0x69d),'properties':{'id':{'type':a0_0x2101b5(0x30d)},'remoteJid':{'type':a0_0x2101b5(0x30d)},'fromMe':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]}},'required':['id',a0_0x2101b5(0x4e1),a0_0x2101b5(0x4f0)],...E('id',a0_0x2101b5(0x4e1))},'reaction':{'type':a0_0x2101b5(0x30d)}},'required':[a0_0x2101b5(0x150),a0_0x2101b5(0x61b)],...E(a0_0x2101b5(0x61b))}},'required':[a0_0x2101b5(0x83e)]},Wa={'$id':(0x0,C['v4'])(),'type':'object','properties':{'numbers':{'type':a0_0x2101b5(0x14a),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':'^\x5cd+','description':a0_0x2101b5(0x5af)}}}},za={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'readMessages':{'type':a0_0x2101b5(0x14a),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x2101b5(0x30d)},'fromMe':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x2101b5(0x30d)}},'required':['id',a0_0x2101b5(0x4f0),'remoteJid'],...E('id',a0_0x2101b5(0x4e1))}}},'required':[a0_0x2101b5(0x82e)]},Ha={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'privacySettings':{'type':'object','properties':{'readreceipts':{'type':a0_0x2101b5(0x30d),'enum':['all',a0_0x2101b5(0x65c)]},'profile':{'type':a0_0x2101b5(0x30d),'enum':[a0_0x2101b5(0x186),a0_0x2101b5(0x42c),'contact_blacklist',a0_0x2101b5(0x65c)]},'status':{'type':a0_0x2101b5(0x30d),'enum':[a0_0x2101b5(0x186),'contacts',a0_0x2101b5(0x738),a0_0x2101b5(0x65c)]},'online':{'type':'string','enum':[a0_0x2101b5(0x186),a0_0x2101b5(0x61f)]},'last':{'type':'string','enum':[a0_0x2101b5(0x186),'contacts','contact_blacklist',a0_0x2101b5(0x65c)]},'groupadd':{'type':a0_0x2101b5(0x30d),'enum':['all','contacts','contact_blacklist','none']}},'required':[a0_0x2101b5(0x6b3),a0_0x2101b5(0x24c),'status',a0_0x2101b5(0x18b),a0_0x2101b5(0x416),'groupadd'],...E('readreceipts',a0_0x2101b5(0x24c),a0_0x2101b5(0x352),a0_0x2101b5(0x18b),a0_0x2101b5(0x416),a0_0x2101b5(0x2c0))}},'required':[a0_0x2101b5(0x50a)]},Ka={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'lastMessage':{'type':a0_0x2101b5(0x69d),'properties':{'key':{'type':a0_0x2101b5(0x69d),'properties':{'id':{'type':a0_0x2101b5(0x30d)},'remoteJid':{'type':a0_0x2101b5(0x30d)},'fromMe':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]}},'required':['id',a0_0x2101b5(0x4f0),a0_0x2101b5(0x4e1)],...E('id','remoteJid')},'messageTimestamp':{'type':a0_0x2101b5(0x861),'minLength':0x1}},'required':['key'],...E('messageTimestamp')},'archive':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x2101b5(0x338),a0_0x2101b5(0x58e)]},Qa={'$id':(0x0,C['v4'])(),'type':'object','properties':{'id':{'type':a0_0x2101b5(0x30d)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x2101b5(0x30d)},'participant':{'type':a0_0x2101b5(0x30d)}},'required':['id','fromMe','remoteJid'],...E('id',a0_0x2101b5(0x4e1),a0_0x2101b5(0x620))},Ya={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x2101b5(0x30d),'minLength':0x1},'pushName':{'type':a0_0x2101b5(0x30d),'minLength':0x1},'id':{'type':a0_0x2101b5(0x30d),'minLength':0x1}},...E(a0_0x2101b5(0x1b8),'id',a0_0x2101b5(0x3d1))}}},Xa={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'name':{'type':a0_0x2101b5(0x30d)}},...E(a0_0x2101b5(0x89c))},Za={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'status':{'type':a0_0x2101b5(0x30d)}},...E(a0_0x2101b5(0x352))},Oe={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'number':{'type':'string'},'picture':{'type':'string'}}},ei={'type':a0_0x2101b5(0x69d),'properties':{'wuid':{'type':a0_0x2101b5(0x30d)},'name':{'type':'string'},'picture':{'type':a0_0x2101b5(0x30d)},'status':{'type':a0_0x2101b5(0x30d)},'isBusiness':{'type':'boolean'}}},ti={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'where':{'type':'object','properties':{'_id':{'type':'string','minLength':0x1},'key':{'type':'object','if':{'propertyNames':{'enum':[a0_0x2101b5(0x4f0),'remoteJid','id']}},'then':{'properties':{'remoteJid':{'type':a0_0x2101b5(0x30d),'minLength':0x1,'description':a0_0x2101b5(0x70e)},'id':{'type':'string','minLength':0x1,'description':a0_0x2101b5(0x70e)},'fromMe':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x2101b5(0x69d)}},...E('_id')},'limit':{'type':a0_0x2101b5(0x861)}}},_c={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'where':{'type':a0_0x2101b5(0x69d),'properties':{'_id':{'type':a0_0x2101b5(0x30d)},'remoteJid':{'type':a0_0x2101b5(0x30d)},'id':{'type':a0_0x2101b5(0x30d)},'fromMe':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'participant':{'type':'string'},'status':{'type':a0_0x2101b5(0x30d),'enum':[a0_0x2101b5(0x1dd),'PENDING',a0_0x2101b5(0x27b),'DELIVERY_ACK',a0_0x2101b5(0x4b3),a0_0x2101b5(0x271)]}},...E(a0_0x2101b5(0x1b8),a0_0x2101b5(0x4e1),'id',a0_0x2101b5(0x352))},'limit':{'type':'integer'}}},si={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'number':{...ee},'presence':{'type':'string','enum':['unavailable',a0_0x2101b5(0x426),a0_0x2101b5(0x7ea),a0_0x2101b5(0x268),a0_0x2101b5(0x5d0)]}},'required':[a0_0x2101b5(0x780),a0_0x2101b5(0x17a)]},ai={'$id':(0x0,C['v4'])(),'type':'object','properties':{'subject':{'type':'string'},'description':{'type':'string'},'profilePicture':{'type':a0_0x2101b5(0x30d)},'participants':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x2101b5(0x30d),'minLength':0xa,'pattern':'\x5cd+','description':a0_0x2101b5(0x8ca)}}},'required':['subject','participants'],...E(a0_0x2101b5(0x22c),'description',a0_0x2101b5(0x1d1))},xe={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x2101b5(0x30d),'pattern':'^\x5cd+([-]\x5cd+)*@g.us$'}},'required':[a0_0x2101b5(0x5c0)],...E(a0_0x2101b5(0x5c0))},ii={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'groupJid':{'type':'string'},'action':{'type':'string','enum':[a0_0x2101b5(0x6c5),a0_0x2101b5(0x1c6),a0_0x2101b5(0x397),a0_0x2101b5(0x557),a0_0x2101b5(0x501),a0_0x2101b5(0x424)]},'participants':{'type':a0_0x2101b5(0x14a),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x2101b5(0x30d),'minLength':0xa,'pattern':a0_0x2101b5(0x272),'description':a0_0x2101b5(0x8ca)}}},'required':[a0_0x2101b5(0x5c0),a0_0x2101b5(0x3b3),'participants'],...E(a0_0x2101b5(0x5c0),a0_0x2101b5(0x3b3))},oi={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'groupJid':{'type':a0_0x2101b5(0x30d)},'expiration':{'type':a0_0x2101b5(0x17a),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x2101b5(0x5c0),a0_0x2101b5(0x6cb)],...E(a0_0x2101b5(0x5c0),a0_0x2101b5(0x6cb))},ri={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x2101b5(0x30d)},'image':{'type':a0_0x2101b5(0x30d)}},'required':[a0_0x2101b5(0x5c0),'image'],...E(a0_0x2101b5(0x5c0),a0_0x2101b5(0x2c4))},ni={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'description':{'type':a0_0x2101b5(0x30d)}},'required':[a0_0x2101b5(0x5c0),'description'],...E('groupJid',a0_0x2101b5(0x6f7))},ci={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'groupJid':{'type':a0_0x2101b5(0x30d)},'name':{'type':a0_0x2101b5(0x30d)}},'required':['groupJid',a0_0x2101b5(0x89c)],...E(a0_0x2101b5(0x5c0),a0_0x2101b5(0x89c))},li={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x2101b5(0x30d)},'setting':{'type':a0_0x2101b5(0x30d),'enum':[a0_0x2101b5(0x565),'not_announcement',a0_0x2101b5(0x81a),a0_0x2101b5(0x6fb)]}},'required':[a0_0x2101b5(0x5c0),'setting'],...E('groupJid',a0_0x2101b5(0x5c7))},ui={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'groupJid':{'type':a0_0x2101b5(0x30d)},'restrict':{'type':a0_0x2101b5(0x154)},'announce':{'type':a0_0x2101b5(0x154)},'memberAddMode':{'type':'boolean'},'joinApprovalMode':{'type':a0_0x2101b5(0x154)},'expiration':{'type':a0_0x2101b5(0x861),'enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x2101b5(0x30d)},'description':{'type':'string'},'image':{'type':a0_0x2101b5(0x30d)}}},Ns={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'inviteCode':{'type':a0_0x2101b5(0x30d)}},'required':[a0_0x2101b5(0x718)],...E(a0_0x2101b5(0x718))},di={'$id':(0x0,C['v4'])(),'type':a0_0x2101b5(0x69d),'properties':{'url':{'type':'string'},'enabled':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]}},'required':[a0_0x2101b5(0x52a),'enabled']},Oc={'$id':(0x0,C['v4'])(),'type':'object','properties':{'local_map':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x2101b5(0x154),'enum':[!0x0,!0x1]}},'required':[a0_0x2101b5(0x277),'STATUS_INSTANCE','QRCODE_UPDATED','MESSAGES_SET',a0_0x2101b5(0x836),a0_0x2101b5(0x23d),a0_0x2101b5(0x517),'CONTACTS_SET','CONTACTS_UPSERT',a0_0x2101b5(0x80d),a0_0x2101b5(0x78c),a0_0x2101b5(0x636),a0_0x2101b5(0x241),'CHATS_UPDATE',a0_0x2101b5(0x873),'CONNECTION_UPDATE',a0_0x2101b5(0x5c9),a0_0x2101b5(0x56e),a0_0x2101b5(0x8c3)],...E(a0_0x2101b5(0x277),a0_0x2101b5(0x460),'QRCODE_UPDATED',a0_0x2101b5(0x5f7),a0_0x2101b5(0x836),a0_0x2101b5(0x23d),'SEND_MESSAGE',a0_0x2101b5(0x1e0),a0_0x2101b5(0x3d9),a0_0x2101b5(0x80d),a0_0x2101b5(0x78c),a0_0x2101b5(0x636),a0_0x2101b5(0x241),a0_0x2101b5(0x662),'CHATS_DELETE',a0_0x2101b5(0x5e0),a0_0x2101b5(0x5c9),a0_0x2101b5(0x56e),a0_0x2101b5(0x8c3))},ot=class{},rt=class extends _{['getContactModelForOwner'](_0x467cf8){return aa(_0x467cf8);}async['insert'](_0x47c818){const _0x1dff1f=a0_0x2101b5;if(_0x47c818[_0x1dff1f(0x608)]!==0x0)try{return{'insertCount':(await this[_0x1dff1f(0x4d7)](_0x47c818[0x0][_0x1dff1f(0x235)])[_0x1dff1f(0x250)]([..._0x47c818]))[_0x1dff1f(0x608)]};}catch(_0x3ac1ee){return _0x3ac1ee;}}async[a0_0x2101b5(0x57b)](_0x1c0bd9,_0x426502){const _0x2141fa=a0_0x2101b5;try{return{'deletedCount':(await this[_0x2141fa(0x4d7)](_0x426502)[_0x2141fa(0x690)]({..._0x1c0bd9[_0x2141fa(0x702)]}))[_0x2141fa(0x797)]};}catch(_0x59085c){return{'error':_0x59085c?.['toString']()};}}async[a0_0x2101b5(0x842)](_0x495e57,_0x13e935){const _0x41a13b=a0_0x2101b5;try{if(_0x495e57[_0x41a13b(0x608)]===0x0)return;let _0x4e159a=this[_0x41a13b(0x4d7)](_0x13e935),_0x1df2a6=_0x495e57[_0x41a13b(0x5e6)](_0x5a96a7=>({'updateOne':{'filter':{'_id':_0x5a96a7[_0x41a13b(0x1b8)],'owner':_0x13e935},'update':{..._0x5a96a7}}})),{modifiedCount:_0x4e406e}=await _0x4e159a[_0x41a13b(0x726)](_0x1df2a6);return{'insertCount':_0x4e406e};}catch{return;}}async['find'](_0x1786cd,_0x5df74f){const _0x573278=a0_0x2101b5;try{let _0x4e05e4=this[_0x573278(0x4d7)](_0x5df74f),_0x3b6b21=A(_0x1786cd[_0x573278(0x702)]);return await _0x4e05e4['find'](_0x3b6b21)[_0x573278(0x2a6)](_0x1786cd?.[_0x573278(0x2a6)]??0x0)[_0x573278(0x70f)]();}catch{return[];}}async[a0_0x2101b5(0x505)](_0x11942c,_0x52bddf){const _0x187143=a0_0x2101b5;try{let _0x2d5243=this[_0x187143(0x4d7)](_0x52bddf),_0x1baf16=A(_0x11942c['where']);return await _0x2d5243[_0x187143(0x505)](_0x1baf16)[_0x187143(0x70f)]();}catch{return null;}}async[a0_0x2101b5(0x3f7)](_0x292e79){const _0x5b5661=a0_0x2101b5;try{return await this[_0x5b5661(0x4d7)](_0x292e79)['collection'][_0x5b5661(0x214)](),{'success':!0x0};}catch(_0x436477){return console['error'](_0x436477),{'success':!0x1,'error':_0x436477};}}},nt=require('jsonschema'),Jc=require(a0_0x2101b5(0x244)),$s=new $(a0_0x2101b5(0x85f)),V=class{['routerPath'](_0x3eeac4,_0x30ac48=!0x0){const _0x594831=a0_0x2101b5;let _0x2fbcfc='/'+_0x3eeac4;return _0x30ac48&&(_0x2fbcfc+=_0x594831(0x2ef)),_0x2fbcfc;}async['dataValidate'](_0x3740fd){const _0xed551=a0_0x2101b5;let {request:_0x3a7883,schema:_0x3e66c4,ClassRef:_0x224600,execute:_0x1bd4eb}=_0x3740fd,_0x4df0ca=new _0x224600(),_0x7cffd=_0x3a7883['body'],_0x170e75=_0x3a7883[_0xed551(0x19c)];_0x3a7883?.[_0xed551(0x56a)]&&Object['keys'](_0x3a7883['query'])['length']>0x0&&Object['assign'](_0x170e75,_0x3a7883[_0xed551(0x56a)]),_0x3a7883[_0xed551(0x49e)]['includes']('/instance/create')&&Object['assign'](_0x170e75,_0x7cffd),Object[_0xed551(0x6b1)](_0x4df0ca,_0x7cffd);let _0x512d5d=_0x3e66c4?(0x0,nt[_0xed551(0x1d5)])(_0x4df0ca,_0x3e66c4):{'valid':!0x0,'errors':[]};if(!_0x512d5d[_0xed551(0x321)]){let _0x3c8830=_0x512d5d[_0xed551(0x7cc)]['map'](({property:_0x59d6d0,stack:_0x1fca29,schema:_0x224211})=>{const _0x2b7241=_0xed551;let _0x450b5f;return _0x224211[_0x2b7241(0x6f7)]?_0x450b5f=_0x224211['description']:_0x450b5f=_0x1fca29[_0x2b7241(0x869)](_0x2b7241(0x341),''),{'property':_0x59d6d0[_0x2b7241(0x869)](_0x2b7241(0x341),''),'message':_0x450b5f};});throw $s[_0xed551(0x3c9)]([..._0x3c8830]),new m(..._0x3c8830);}return await _0x1bd4eb(_0x170e75,_0x4df0ca);}async[a0_0x2101b5(0x20d)](_0x1df486){const _0x107eb0=a0_0x2101b5;let {request:_0x1a23d0,ClassRef:_0x221e64,schema:_0x59c8a2,execute:_0x617279}=_0x1df486,_0x166afc=_0x1a23d0['query'];if(!_0x166afc?.['groupJid'])throw new m(_0x107eb0(0x300),'ex:\x20\x22groupJid=120362@g.us\x22');let _0x11283d=_0x1a23d0[_0x107eb0(0x19c)],_0x27168c=_0x1a23d0[_0x107eb0(0x2ab)],_0x303ef0=new _0x221e64();Object['assign'](_0x27168c,_0x166afc),Object['assign'](_0x303ef0,_0x27168c);let _0x1f8a07=(0x0,nt['validate'])(_0x303ef0,_0x59c8a2);if(!_0x1f8a07[_0x107eb0(0x321)]){let _0xe3e332=_0x1f8a07[_0x107eb0(0x7cc)][_0x107eb0(0x5e6)](({property:_0x3021fc,stack:_0x558827,schema:_0x27bd35})=>{const _0x30d8f9=_0x107eb0;let _0x5e02af;return _0x27bd35[_0x30d8f9(0x6f7)]?_0x5e02af=_0x27bd35[_0x30d8f9(0x6f7)]:_0x5e02af=_0x558827[_0x30d8f9(0x869)](_0x30d8f9(0x341),''),{'property':_0x3021fc['replace']('instance.',''),'message':_0x5e02af};});throw $s[_0x107eb0(0x3c9)]([..._0xe3e332]),new m(..._0xe3e332);}return await _0x617279(_0x11283d,_0x303ef0);}async[a0_0x2101b5(0x66f)](_0x3b65c1){const _0x6ce7bf=a0_0x2101b5;let {request:_0x17faa2,ClassRef:_0x33cdb0,schema:_0x4bc6e5,execute:_0x48a0a8}=_0x3b65c1,_0x436fec=_0x17faa2['body'];if(!_0x436fec?.['inviteCode'])throw new m(_0x6ce7bf(0x67e),'ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22');let _0x329139=_0x17faa2[_0x6ce7bf(0x19c)],_0x12742c=_0x17faa2[_0x6ce7bf(0x2ab)],_0x49404f=new _0x33cdb0();Object['assign'](_0x12742c,_0x436fec),Object[_0x6ce7bf(0x6b1)](_0x49404f,_0x12742c);let _0x8c2b98=(0x0,nt[_0x6ce7bf(0x1d5)])(_0x49404f,_0x4bc6e5);if(!_0x8c2b98[_0x6ce7bf(0x321)]){let _0x583929=_0x8c2b98[_0x6ce7bf(0x7cc)][_0x6ce7bf(0x5e6)](({property:_0x3e3ade,stack:_0xa7d83f,schema:_0xfdb1f3})=>{const _0x726911=_0x6ce7bf;let _0x4b28ed;return _0xfdb1f3[_0x726911(0x6f7)]?_0x4b28ed=_0xfdb1f3[_0x726911(0x6f7)]:_0x4b28ed=_0xa7d83f[_0x726911(0x869)](_0x726911(0x341),''),{'property':_0x3e3ade['replace'](_0x726911(0x341),''),'message':_0x4b28ed};});throw $s['error']([..._0x583929]),new m(..._0x583929);}return await _0x48a0a8(_0x329139,_0x49404f);}},M=class{},sl=new $(a0_0x2101b5(0x677)),ct=class extends V{constructor(..._0x53cd73){const _0x2e67aa=a0_0x2101b5;super(),this[_0x2e67aa(0x834)]=(0x0,pi[_0x2e67aa(0x588)])(),this['router'][_0x2e67aa(0x46b)](this['routerPath'](_0x2e67aa(0x73e)),..._0x53cd73,async(_0x7d2bf7,_0x4fb557)=>{const _0x5529f0=_0x2e67aa;let _0xbe51f0=await this[_0x5529f0(0x3fb)]({'request':_0x7d2bf7,'schema':si,'ClassRef':Qe,'execute':(_0x28e3c6,_0xc681de)=>D['updatePresence'](_0x28e3c6,_0xc681de)});return _0x4fb557[_0x5529f0(0x352)](0xc9)['json'](_0xbe51f0);})['post'](this['routerPath'](_0x2e67aa(0x7a6)),..._0x53cd73,async(_0x258c0f,_0x5c4bdd)=>{const _0x2b8dad=_0x2e67aa;let _0x5e96fd=await this['dataValidate']({'request':_0x258c0f,'schema':Wa,'ClassRef':Ye,'execute':(_0x5a1168,_0x326ee7)=>D[_0x2b8dad(0x56b)](_0x5a1168,_0x326ee7)});return _0x5c4bdd[_0x2b8dad(0x352)](0xc9)[_0x2b8dad(0x48e)](_0x5e96fd);})[_0x2e67aa(0x46b)](this['routerPath'](_0x2e67aa(0x7a5)),..._0x53cd73,async(_0x431354,_0x466f7d)=>{const _0x3b2e1c=_0x2e67aa;let _0x1234e9=await this['dataValidate']({'request':_0x431354,'schema':N,'ClassRef':M,'execute':(_0x2d9d05,_0x53cc33)=>D[_0x3b2e1c(0x7a5)](_0x2d9d05,_0x53cc33)});return _0x466f7d[_0x3b2e1c(0x352)](0xc9)[_0x3b2e1c(0x48e)](_0x1234e9);})[_0x2e67aa(0x5db)](this['routerPath'](_0x2e67aa(0x69b)),..._0x53cd73,async(_0x1bfa2e,_0x23afe1)=>{const _0x1f9ec2=_0x2e67aa;let _0x29d2ff=await this[_0x1f9ec2(0x3fb)]({'request':_0x1bfa2e,'schema':za,'ClassRef':et,'execute':(_0x32ef96,_0x58e87e)=>D[_0x1f9ec2(0x51f)](_0x32ef96,_0x58e87e)});return _0x23afe1[_0x1f9ec2(0x352)](0xc9)['json'](_0x29d2ff);})[_0x2e67aa(0x5db)](this[_0x2e67aa(0x1b6)](_0x2e67aa(0x5aa)),..._0x53cd73,async(_0x1835f3,_0x4a78fb)=>{const _0x3ae658=_0x2e67aa;let _0xda90a5=await this[_0x3ae658(0x3fb)]({'request':_0x1835f3,'schema':Ka,'ClassRef':tt,'execute':(_0x27cfe2,_0x241a3b)=>D[_0x3ae658(0x5aa)](_0x27cfe2,_0x241a3b)});return _0x4a78fb[_0x3ae658(0x352)](0xc9)[_0x3ae658(0x48e)](_0xda90a5);})[_0x2e67aa(0x57b)](this[_0x2e67aa(0x1b6)]('deleteMessageForEveryone'),..._0x53cd73,async(_0x3fe7a6,_0x5a9fc5)=>{const _0x2dfacc=_0x2e67aa;let _0x222524=await this[_0x2dfacc(0x3fb)]({'request':_0x3fe7a6,'schema':Qa,'ClassRef':at,'execute':(_0xfa4648,_0x545acd)=>D['deleteMessage'](_0xfa4648,_0x545acd)});return _0x5a9fc5['status'](0xc9)[_0x2dfacc(0x48e)](_0x222524);})[_0x2e67aa(0x46b)](this['routerPath']('fetchProfilePictureUrl'),..._0x53cd73,async(_0x1500a6,_0x13b5b5)=>{const _0x440910=_0x2e67aa;let _0x3a874b=await this['dataValidate']({'request':_0x1500a6,'schema':Oe,'ClassRef':Te,'execute':(_0x5dd648,_0xc10bc4)=>D[_0x440910(0x159)](_0x5dd648,_0xc10bc4)});return _0x13b5b5[_0x440910(0x352)](0xc8)[_0x440910(0x48e)](_0x3a874b);})['post'](this[_0x2e67aa(0x1b6)](_0x2e67aa(0x5ac)),..._0x53cd73,async(_0x3ffced,_0x251fe2)=>{const _0x3cca0b=_0x2e67aa;let _0x124c06=await this[_0x3cca0b(0x3fb)]({'request':_0x3ffced,'schema':ei,'ClassRef':Te,'execute':(_0x3fea20,_0x5ccb5a)=>D[_0x3cca0b(0x5ac)](_0x3fea20,_0x5ccb5a)});return _0x251fe2[_0x3cca0b(0x352)](0xc8)[_0x3cca0b(0x48e)](_0x124c06);})[_0x2e67aa(0x46b)](this['routerPath'](_0x2e67aa(0x513)),..._0x53cd73,async(_0x5e1848,_0x36df71)=>{const _0x3b703a=_0x2e67aa;let _0x1c0869=await this[_0x3b703a(0x3fb)]({'request':_0x5e1848,'schema':Ya,'ClassRef':ot,'execute':(_0xe5c6b8,_0x2b5a92)=>D[_0x3b703a(0x5df)](_0xe5c6b8,_0x2b5a92)});return _0x36df71['status'](0xc8)['json'](_0x1c0869);})[_0x2e67aa(0x46b)](this[_0x2e67aa(0x1b6)](_0x2e67aa(0x2d6)),..._0x53cd73,async(_0x184ab3,_0x27c5e0)=>{const _0x22a869=_0x2e67aa;let _0x509f99=await this[_0x22a869(0x3fb)]({'request':_0x184ab3,'schema':null,'ClassRef':Object,'execute':(_0x2bd919,_0x3852dc)=>D[_0x22a869(0x2d6)](_0x2bd919,_0x3852dc)});return _0x27c5e0[_0x22a869(0x352)](0xc9)[_0x22a869(0x48e)](_0x509f99);})[_0x2e67aa(0x46b)](this[_0x2e67aa(0x1b6)](_0x2e67aa(0x8c4)),..._0x53cd73,async(_0x4f8180,_0x11e548)=>{const _0x29df0a=_0x2e67aa;let _0x733138=await this['dataValidate']({'request':_0x4f8180,'schema':ti,'ClassRef':He,'execute':(_0x5d4247,_0xedc1c4)=>D[_0x29df0a(0x255)](_0x5d4247,_0xedc1c4)});return _0x11e548[_0x29df0a(0x352)](0xc8)[_0x29df0a(0x48e)](_0x733138);})['get'](this[_0x2e67aa(0x1b6)](_0x2e67aa(0x20c)),..._0x53cd73,async(_0x3c04c9,_0x18224f)=>{const _0x2c35fa=_0x2e67aa;let _0x55606c=await this['dataValidate']({'request':_0x3c04c9,'schema':null,'ClassRef':M,'execute':_0x4f91fd=>D[_0x2c35fa(0x262)](_0x4f91fd)});return _0x18224f['status'](0xc8)['json'](_0x55606c);})[_0x2e67aa(0x34a)](this['routerPath'](_0x2e67aa(0x398)),..._0x53cd73,async(_0x43a0fa,_0x2291e6)=>{const _0x3f9c23=_0x2e67aa;let _0x18a0a5=await this['dataValidate']({'request':_0x43a0fa,'schema':null,'ClassRef':M,'execute':_0x2936f4=>D[_0x3f9c23(0x8bb)](_0x2936f4)});return _0x2291e6[_0x3f9c23(0x352)](0xc8)[_0x3f9c23(0x48e)](_0x18a0a5);})[_0x2e67aa(0x5db)](this[_0x2e67aa(0x1b6)](_0x2e67aa(0x3bd)),..._0x53cd73,async(_0x27c945,_0x11d484)=>{const _0x133c12=_0x2e67aa;let _0x32767b=await this[_0x133c12(0x3fb)]({'request':_0x27c945,'schema':null,'ClassRef':Array,'execute':(_0xa5e135,_0x2b608a)=>D[_0x133c12(0x3bd)](_0xa5e135,_0x2b608a)});return _0x11d484[_0x133c12(0x352)](0xc8)[_0x133c12(0x48e)](_0x32767b);})[_0x2e67aa(0x34a)](this[_0x2e67aa(0x1b6)]('fetchPrivacySettings'),..._0x53cd73,async(_0x2e7d72,_0x4a8a24)=>{const _0x1db46c=_0x2e67aa;let _0x4fede2=await this['dataValidate']({'request':_0x2e7d72,'schema':null,'ClassRef':M,'execute':_0xcdd86a=>D['fetchPrivacySettings'](_0xcdd86a)});return _0x4a8a24[_0x1db46c(0x352)](0xc8)[_0x1db46c(0x48e)](_0x4fede2);})['put'](this['routerPath']('updatePrivacySettings'),..._0x53cd73,async(_0x412432,_0x3ad6b9)=>{const _0x4f80e8=_0x2e67aa;let _0xde09d5=await this[_0x4f80e8(0x3fb)]({'request':_0x412432,'schema':Ha,'ClassRef':st,'execute':(_0x45bed4,_0x239240)=>D[_0x4f80e8(0x516)](_0x45bed4,_0x239240)});return _0x3ad6b9[_0x4f80e8(0x352)](0xc9)[_0x4f80e8(0x48e)](_0xde09d5);})['post'](this[_0x2e67aa(0x1b6)]('fetchBusinessProfile'),..._0x53cd73,async(_0x2b7ff1,_0x249255)=>{const _0x461f9e=_0x2e67aa;let _0x29012e=await this[_0x461f9e(0x3fb)]({'request':_0x2b7ff1,'schema':Oe,'ClassRef':Ee,'execute':(_0x344ae1,_0x567c8b)=>D[_0x461f9e(0x626)](_0x344ae1,_0x567c8b)});return _0x249255[_0x461f9e(0x352)](0xc8)[_0x461f9e(0x48e)](_0x29012e);})[_0x2e67aa(0x46b)](this['routerPath'](_0x2e67aa(0x6a0)),..._0x53cd73,async(_0x347681,_0x36ea6c)=>{const _0x226818=_0x2e67aa;let _0x2db0a9=await this['dataValidate']({'request':_0x347681,'schema':Xa,'ClassRef':Xe,'execute':(_0x541a11,_0xaba253)=>D[_0x226818(0x6a0)](_0x541a11,_0xaba253)});return _0x36ea6c['status'](0xc8)[_0x226818(0x48e)](_0x2db0a9);})[_0x2e67aa(0x46b)](this['routerPath'](_0x2e67aa(0x1f9)),..._0x53cd73,async(_0x58dd34,_0x20197f)=>{const _0x2bb25e=_0x2e67aa;let _0x902d16=await this['dataValidate']({'request':_0x58dd34,'schema':Za,'ClassRef':Ze,'execute':(_0x42d77c,_0x20b228)=>D[_0x2bb25e(0x1f9)](_0x42d77c,_0x20b228)});return _0x20197f[_0x2bb25e(0x352)](0xc8)[_0x2bb25e(0x48e)](_0x902d16);})[_0x2e67aa(0x5db)](this[_0x2e67aa(0x1b6)](_0x2e67aa(0x809)),..._0x53cd73,async(_0x42846e,_0x31c673)=>{const _0x1436c1=_0x2e67aa;let _0x5041aa=await this['dataValidate']({'request':_0x42846e,'schema':Oe,'ClassRef':Ee,'execute':(_0x4beadd,_0x5d5d9d)=>D[_0x1436c1(0x809)](_0x4beadd,_0x5d5d9d)});return _0x31c673[_0x1436c1(0x352)](0xc8)[_0x1436c1(0x48e)](_0x5041aa);})[_0x2e67aa(0x57b)](this[_0x2e67aa(0x1b6)](_0x2e67aa(0x665)),..._0x53cd73,async(_0x412ece,_0x24b142)=>{const _0x5cbb01=_0x2e67aa;let _0x4b6aba=await this[_0x5cbb01(0x3fb)]({'request':_0x412ece,'schema':Oe,'ClassRef':Ee,'execute':(_0x5e37eb,_0x224af0)=>D[_0x5cbb01(0x665)](_0x5e37eb,_0x224af0)});return _0x24b142[_0x5cbb01(0x352)](0xc8)[_0x5cbb01(0x48e)](_0x4b6aba);});}},hi=require(a0_0x2101b5(0x2ae)),lt=class{},ut=class{},dt=class{},pt=class{},ht=class{},gt=class{},te=class{},Pe=class{},mt=class extends te{},ft=class extends te{},wt=class extends V{constructor(..._0x2aae94){const _0x1fe2b4=a0_0x2101b5;super(),this['router']=(0x0,hi['Router'])(),this[_0x1fe2b4(0x834)][_0x1fe2b4(0x46b)](this['routerPath'](_0x1fe2b4(0x65e)),..._0x2aae94,async(_0x6ecda,_0x361862)=>{const _0x5c1f3e=_0x1fe2b4;let _0x120fcb=await this[_0x5c1f3e(0x3fb)]({'request':_0x6ecda,'schema':ai,'ClassRef':lt,'execute':(_0x260f9e,_0x2eed10)=>q[_0x5c1f3e(0x85a)](_0x260f9e,_0x2eed10)});_0x361862[_0x5c1f3e(0x352)](0xc9)[_0x5c1f3e(0x48e)](_0x120fcb);})[_0x1fe2b4(0x5db)](this[_0x1fe2b4(0x1b6)](_0x1fe2b4(0x2b1)),..._0x2aae94,async(_0x3a5df2,_0x674544)=>{const _0x2a3a13=_0x1fe2b4;let _0x2ffebf=await this[_0x2a3a13(0x20d)]({'request':_0x3a5df2,'schema':ri,'ClassRef':ut,'execute':(_0x4830a0,_0x2cbc41)=>q[_0x2a3a13(0x2b1)](_0x4830a0,_0x2cbc41)});_0x674544['status'](0xc9)[_0x2a3a13(0x48e)](_0x2ffebf);})[_0x1fe2b4(0x5db)](this[_0x1fe2b4(0x1b6)](_0x1fe2b4(0x510)),..._0x2aae94,async(_0x1dac03,_0x1f747d)=>{const _0x47baf6=_0x1fe2b4;let _0x1cdba3=await this[_0x47baf6(0x20d)]({'request':_0x1dac03,'schema':ni,'ClassRef':dt,'execute':(_0x563e13,_0x1bcd3d)=>q[_0x47baf6(0x510)](_0x563e13,_0x1bcd3d)});_0x1f747d[_0x47baf6(0x352)](0xc9)[_0x47baf6(0x48e)](_0x1cdba3);})[_0x1fe2b4(0x5db)](this[_0x1fe2b4(0x1b6)](_0x1fe2b4(0x14d)),..._0x2aae94,async(_0x189f2e,_0xede4f8)=>{const _0x8c46dc=_0x1fe2b4;let _0x3cf857=await this[_0x8c46dc(0x20d)]({'request':_0x189f2e,'schema':ci,'ClassRef':pt,'execute':(_0x1612f5,_0x4c4698)=>q[_0x8c46dc(0x14d)](_0x1612f5,_0x4c4698)});_0xede4f8[_0x8c46dc(0x352)](0xc9)[_0x8c46dc(0x48e)](_0x3cf857);})[_0x1fe2b4(0x5db)](this[_0x1fe2b4(0x1b6)](_0x1fe2b4(0x559)),..._0x2aae94,async(_0x369af6,_0x4acdc7)=>{const _0x40de4d=_0x1fe2b4;let _0x15b557=await this['groupValidate']({'request':_0x369af6,'schema':ui,'ClassRef':gt,'execute':(_0x4cf3c5,_0x2afad6)=>q[_0x40de4d(0x559)](_0x4cf3c5,_0x2afad6)});_0x4acdc7[_0x40de4d(0x352)](0xc9)['json'](_0x15b557);})[_0x1fe2b4(0x5db)](this[_0x1fe2b4(0x1b6)]('groupSetting'),..._0x2aae94,async(_0x801dbb,_0x321373)=>{const _0x3700ac=_0x1fe2b4;let _0x119540=await this[_0x3700ac(0x20d)]({'request':_0x801dbb,'schema':li,'ClassRef':ht,'execute':(_0x1af2a3,_0x5a5435)=>q['groupSetting'](_0x1af2a3,_0x5a5435)});_0x321373[_0x3700ac(0x352)](0xc9)[_0x3700ac(0x48e)](_0x119540);})['put'](this['routerPath'](_0x1fe2b4(0x40e)),..._0x2aae94,async(_0x3b435c,_0x5ac9dd)=>{const _0x1c5723=_0x1fe2b4;let _0x28c32a=await this[_0x1c5723(0x20d)]({'request':_0x3b435c,'schema':oi,'ClassRef':ft,'execute':(_0x50b500,_0x2703c5)=>q[_0x1c5723(0x40e)](_0x50b500,_0x2703c5)});_0x5ac9dd['status'](0xc9)[_0x1c5723(0x48e)](_0x28c32a);})[_0x1fe2b4(0x34a)](this[_0x1fe2b4(0x1b6)](_0x1fe2b4(0x4b1)),..._0x2aae94,async(_0x62cc5d,_0x194eeb)=>{const _0x372ad1=_0x1fe2b4;let _0x4b82bf=await this[_0x372ad1(0x20d)]({'request':_0x62cc5d,'schema':xe,'ClassRef':te,'execute':(_0x1c679a,_0x580b13)=>q[_0x372ad1(0x2e7)](_0x1c679a,_0x580b13)});_0x194eeb[_0x372ad1(0x352)](0xc8)['json'](_0x4b82bf);})[_0x1fe2b4(0x34a)](this[_0x1fe2b4(0x1b6)]('findGroups'),..._0x2aae94,async(_0xbd3cf5,_0x41e31b)=>{const _0x1c2692=_0x1fe2b4;let _0x1fdce5=await this[_0x1c2692(0x3fb)]({'request':_0xbd3cf5,'schema':N,'ClassRef':M,'execute':_0x51416d=>q[_0x1c2692(0x744)](_0x51416d)});_0x41e31b['status'](0xc8)[_0x1c2692(0x48e)](_0x1fdce5);})['get'](this['routerPath']('participants'),..._0x2aae94,async(_0x100351,_0x1803dd)=>{const _0x1c1764=_0x1fe2b4;let _0x49abc9=await this[_0x1c1764(0x20d)]({'request':_0x100351,'schema':xe,'ClassRef':te,'execute':(_0x48241f,_0x26f80b)=>q[_0x1c1764(0x193)](_0x48241f,_0x26f80b)});_0x1803dd[_0x1c1764(0x352)](0xc8)[_0x1c1764(0x48e)](_0x49abc9);})['get'](this[_0x1fe2b4(0x1b6)](_0x1fe2b4(0x718)),..._0x2aae94,async(_0x5296e1,_0x191048)=>{const _0xff66c3=_0x1fe2b4;let _0x186d93=await this['groupValidate']({'request':_0x5296e1,'schema':xe,'ClassRef':te,'execute':(_0xeac4ff,_0xbb2e99)=>q[_0xff66c3(0x718)](_0xeac4ff,_0xbb2e99)});_0x191048[_0xff66c3(0x352)](0xc8)['json'](_0x186d93);})[_0x1fe2b4(0x46b)](this[_0x1fe2b4(0x1b6)](_0x1fe2b4(0x710)),..._0x2aae94,async(_0x1498b9,_0x2dde6e)=>{const _0x5ae911=_0x1fe2b4;let _0x48e061=await this[_0x5ae911(0x66f)]({'request':_0x1498b9,'schema':Ns,'ClassRef':Pe,'execute':(_0x5592c0,_0x441b32)=>q['groupGetInviteInfo'](_0x5592c0,_0x441b32)});_0x2dde6e[_0x5ae911(0x352)](0xc9)[_0x5ae911(0x48e)](_0x48e061);})[_0x1fe2b4(0x5db)](this['routerPath'](_0x1fe2b4(0x22d)),..._0x2aae94,async(_0x2976e8,_0x30a4b2)=>{const _0x181850=_0x1fe2b4;let _0x26d69d=await this[_0x181850(0x66f)]({'request':_0x2976e8,'schema':Ns,'ClassRef':Pe,'execute':(_0x335dab,_0xbc8891)=>q[_0x181850(0x22d)](_0x335dab,_0xbc8891)});_0x30a4b2[_0x181850(0x352)](0xc9)[_0x181850(0x48e)](_0x26d69d);})[_0x1fe2b4(0x5db)](this['routerPath'](_0x1fe2b4(0x25c)),..._0x2aae94,async(_0x50349a,_0x49742f)=>{const _0xe688db=_0x1fe2b4;let _0x5ad09c=await this[_0xe688db(0x20d)]({'request':_0x50349a,'schema':xe,'ClassRef':te,'execute':(_0x206367,_0x19ec93)=>q[_0xe688db(0x25c)](_0x206367,_0x19ec93)});_0x49742f[_0xe688db(0x352)](0xc9)[_0xe688db(0x48e)](_0x5ad09c);})[_0x1fe2b4(0x5db)](this['routerPath'](_0x1fe2b4(0x831)),..._0x2aae94,async(_0x49203c,_0x336792)=>{const _0x2d52e6=_0x1fe2b4;let _0xdfe126=await this[_0x2d52e6(0x20d)]({'request':_0x49203c,'schema':ii,'ClassRef':mt,'execute':(_0x36e3fb,_0x545824)=>q[_0x2d52e6(0x534)](_0x36e3fb,_0x545824)});_0x336792[_0x2d52e6(0x352)](0xc9)[_0x2d52e6(0x48e)](_0xdfe126);})[_0x1fe2b4(0x57b)](this[_0x1fe2b4(0x1b6)](_0x1fe2b4(0x496)),..._0x2aae94,async(_0x6a28b7,_0x315315)=>{const _0x5843c1=_0x1fe2b4;let _0x493469=await this[_0x5843c1(0x20d)]({'request':_0x6a28b7,'schema':{},'ClassRef':te,'execute':(_0x521e8e,_0x1c816c)=>q[_0x5843c1(0x496)](_0x521e8e,_0x1c816c)});_0x315315[_0x5843c1(0x352)](0xc8)[_0x5843c1(0x48e)](_0x493469);});}},gi=require(a0_0x2101b5(0x2ae)),yt=class extends V{constructor(_0x326f4e,..._0x4453a5){const _0x3a57fc=a0_0x2101b5;super(),this[_0x3a57fc(0x596)]=_0x326f4e,this[_0x3a57fc(0x834)]=(0x0,gi['Router'])();let _0x3da713=_0x326f4e[_0x3a57fc(0x34a)](_0x3a57fc(0x532));this[_0x3a57fc(0x834)]['post']('/create',..._0x4453a5,async(_0x4e4dc4,_0x5c95f3)=>{const _0x3f8e45=_0x3a57fc;let {instanceName:_0x2a42c3,apikey:_0x456759,number:_0x533b39}=_0x4e4dc4['body'],_0x80a32b=await de[_0x3f8e45(0x471)]({'instanceName':_0x2a42c3,'apikey':_0x456759,'number':_0x533b39});return _0x5c95f3['status'](0xc9)['json'](_0x80a32b);})[_0x3a57fc(0x5db)](this[_0x3a57fc(0x1b6)](_0x3a57fc(0x488)),..._0x4453a5,async(_0x47fe06,_0x356168)=>{const _0x3fa4fd=_0x3a57fc;let _0x4c83cc=await this[_0x3fa4fd(0x3fb)]({'request':_0x47fe06,'schema':N,'ClassRef':M,'execute':_0x3dfe40=>de[_0x3fa4fd(0x73a)](_0x3dfe40)});return _0x356168[_0x3fa4fd(0x352)](0xc8)[_0x3fa4fd(0x48e)](_0x4c83cc);})[_0x3a57fc(0x34a)](this[_0x3a57fc(0x1b6)](_0x3a57fc(0x4e2)),..._0x4453a5,async(_0x13cce4,_0x1cfcbe)=>{const _0x1f6f4e=_0x3a57fc;let _0x16d76d=await this['dataValidate']({'request':_0x13cce4,'schema':N,'ClassRef':M,'execute':_0x5b7990=>de[_0x1f6f4e(0x8c2)](_0x5b7990)});return _0x1cfcbe[_0x1f6f4e(0x352)](0xc8)[_0x1f6f4e(0x48e)](_0x16d76d);})[_0x3a57fc(0x34a)](this[_0x3a57fc(0x1b6)](_0x3a57fc(0x668)),..._0x4453a5,async(_0x2fbf6e,_0x278715)=>{const _0x3469bf=_0x3a57fc;let _0x5ce2b2=await this[_0x3469bf(0x3fb)]({'request':_0x2fbf6e,'schema':N,'ClassRef':M,'execute':_0x832145=>de['connectionState'](_0x832145)});return _0x278715[_0x3469bf(0x352)](0xc8)[_0x3469bf(0x48e)](_0x5ce2b2);})[_0x3a57fc(0x34a)](this[_0x3a57fc(0x1b6)](_0x3a57fc(0x881),!0x1),..._0x4453a5,async(_0x1c9fac,_0x496af0)=>{const _0x295ccc=_0x3a57fc;let _0x4f6d95=await this[_0x295ccc(0x3fb)]({'request':_0x1c9fac,'schema':null,'ClassRef':M,'execute':_0x3b5dd3=>de[_0x295ccc(0x881)](_0x3b5dd3)});return _0x496af0['status'](0xc8)[_0x295ccc(0x48e)](_0x4f6d95);})['delete'](this['routerPath'](_0x3a57fc(0x2bc)),..._0x4453a5,async(_0xa42af6,_0x170d9e)=>{const _0x31c0e4=_0x3a57fc;let _0x52b106=await this[_0x31c0e4(0x3fb)]({'request':_0xa42af6,'schema':N,'ClassRef':M,'execute':_0x4781d3=>de['logout'](_0x4781d3)});return _0x170d9e[_0x31c0e4(0x352)](0xc8)['json'](_0x52b106);})[_0x3a57fc(0x57b)](this['routerPath'](_0x3a57fc(0x57b)),..._0x4453a5,async(_0x3d7e8b,_0x87062c)=>{const _0x2b8ad7=_0x3a57fc;let _0x2145a7=await this[_0x2b8ad7(0x3fb)]({'request':_0x3d7e8b,'schema':N,'ClassRef':M,'execute':_0x47ff13=>de[_0x2b8ad7(0x37b)](_0x47ff13)});return _0x87062c[_0x2b8ad7(0x352)](0xc8)[_0x2b8ad7(0x48e)](_0x2145a7);});}},mi=require(a0_0x2101b5(0x2ae)),Rs=class{},K=class extends Rs{},bt=class extends K{},St=class extends K{},Mt=class extends K{},Ct=class extends K{},De=class extends K{},Et=class extends K{},vt=class extends K{},Nt=class extends K{},$t=class extends K{},Rt=class{},At=class extends V{constructor(..._0x521715){const _0x1c5a31=a0_0x2101b5;super(),this['router']=(0x0,mi['Router'])(),this[_0x1c5a31(0x834)][_0x1c5a31(0x46b)](this['routerPath'](_0x1c5a31(0x22f)),..._0x521715,async(_0x2e0083,_0x284f1c)=>{const _0xe03079=_0x1c5a31;let _0x201406=await this['dataValidate']({'request':_0x2e0083,'schema':Pa,'ClassRef':bt,'execute':(_0x14e79a,_0x1d06e8)=>W[_0xe03079(0x22f)](_0x14e79a,_0x1d06e8)});return _0x284f1c['status'](0xc9)[_0xe03079(0x48e)](_0x201406);})[_0x1c5a31(0x46b)](this[_0x1c5a31(0x1b6)](_0x1c5a31(0x55f)),..._0x521715,async(_0x48a518,_0x11eed7)=>{const _0x23cbee=_0x1c5a31;let _0x1cc44e=await this[_0x23cbee(0x3fb)]({'request':_0x48a518,'schema':Fa,'ClassRef':De,'execute':(_0x209ea0,_0x44c120)=>W[_0x23cbee(0x55f)](_0x209ea0,_0x44c120)});return _0x11eed7[_0x23cbee(0x352)](0xc9)['json'](_0x1cc44e);})['post'](this[_0x1c5a31(0x1b6)](_0x1c5a31(0x2e2)),..._0x521715,async(_0x1b0aea,_0x366c96)=>{const _0xf2dce2=_0x1c5a31;let _0x5d7705=await this[_0xf2dce2(0x3fb)]({'request':_0x1b0aea,'schema':Ja,'ClassRef':Ct,'execute':(_0x2e344e,_0x4d8b5f)=>W[_0xf2dce2(0x2e2)](_0x2e344e,_0x4d8b5f)});return _0x366c96[_0xf2dce2(0x352)](0xc9)['json'](_0x5d7705);})['post'](this[_0x1c5a31(0x1b6)](_0x1c5a31(0x5f8)),..._0x521715,async(_0x2f471a,_0x80127c)=>{const _0x1ea8e4=_0x1c5a31;let _0x50c6d3=await this[_0x1ea8e4(0x3fb)]({'request':_0x2f471a,'schema':Ua,'ClassRef':De,'execute':(_0x44e292,_0x409969)=>W['sendWhatsAppAudio'](_0x44e292,_0x409969)});return _0x80127c[_0x1ea8e4(0x352)](0xc9)[_0x1ea8e4(0x48e)](_0x50c6d3);})[_0x1c5a31(0x46b)](this[_0x1c5a31(0x1b6)](_0x1c5a31(0x682)),..._0x521715,async(_0x24d282,_0x3741e6)=>{const _0x5ab807=_0x1c5a31;let _0xc81954=await this[_0x5ab807(0x3fb)]({'request':_0x24d282,'schema':qa,'ClassRef':vt,'execute':(_0x4fe3cb,_0x1f0fde)=>W[_0x5ab807(0x682)](_0x4fe3cb,_0x1f0fde)});return _0x3741e6[_0x5ab807(0x352)](0xc9)['json'](_0xc81954);})[_0x1c5a31(0x46b)](this['routerPath'](_0x1c5a31(0x8b2)),..._0x521715,async(_0x2e3b75,_0x32b675)=>{const _0x1c3888=_0x1c5a31;let _0x3819f8=await this[_0x1c3888(0x3fb)]({'request':_0x2e3b75,'schema':Va,'ClassRef':Nt,'execute':(_0x17b129,_0x2a94b9)=>W[_0x1c3888(0x8b2)](_0x17b129,_0x2a94b9)});return _0x32b675[_0x1c3888(0x352)](0xc9)[_0x1c3888(0x48e)](_0x3819f8);})[_0x1c5a31(0x46b)](this['routerPath'](_0x1c5a31(0x2c1)),..._0x521715,async(_0x136912,_0x52099d)=>{const _0x4b6182=_0x1c5a31;let _0x4446c0=await this[_0x4b6182(0x3fb)]({'request':_0x136912,'schema':Ga,'ClassRef':$t,'execute':(_0x1f0846,_0x123061)=>W['sendContact'](_0x1f0846,_0x123061)});return _0x52099d[_0x4b6182(0x352)](0xc9)['json'](_0x4446c0);})['post'](this['routerPath'](_0x1c5a31(0x221)),..._0x521715,async(_0x5d2fa5,_0x318353)=>{const _0x309ee4=_0x1c5a31;let _0x4773d0=await this['dataValidate']({'request':_0x5d2fa5,'schema':Ba,'ClassRef':Rt,'execute':(_0x283063,_0x2e63bd)=>W[_0x309ee4(0x221)](_0x283063,_0x2e63bd)});return _0x318353['status'](0xc9)[_0x309ee4(0x48e)](_0x4773d0);})[_0x1c5a31(0x46b)](this[_0x1c5a31(0x1b6)](_0x1c5a31(0x208)),..._0x521715,async(_0x168186,_0x4eaea0)=>{const _0x221743=_0x1c5a31;let _0x3d923a=await this[_0x221743(0x3fb)]({'request':_0x168186,'schema':ja,'ClassRef':Mt,'execute':(_0x1b411d,_0x40a819)=>W[_0x221743(0x208)](_0x1b411d,_0x40a819)});return _0x4eaea0[_0x221743(0x352)](0xc9)[_0x221743(0x48e)](_0x3d923a);})['post'](this['routerPath'](_0x1c5a31(0x669)),..._0x521715,async(_0x2a5737,_0x551555)=>{const _0x7ea285=_0x1c5a31;let _0x3bd414=await this[_0x7ea285(0x3fb)]({'request':_0x2a5737,'schema':La,'ClassRef':St,'execute':(_0xd2c3f,_0x577752)=>W[_0x7ea285(0x669)](_0xd2c3f,_0x577752)});return _0x551555[_0x7ea285(0x352)](0xc9)['json'](_0x3bd414);})[_0x1c5a31(0x46b)](this[_0x1c5a31(0x1b6)]('sendSticker'),..._0x521715,async(_0x175144,_0x4a11a8)=>{const _0xb97f0e=_0x1c5a31;let _0x5f4e56=await this['dataValidate']({'request':_0x175144,'schema':ka,'ClassRef':Et,'execute':(_0xf2bcc0,_0x24528f)=>W[_0xb97f0e(0x5b8)](_0xf2bcc0,_0x24528f)});return _0x4a11a8[_0xb97f0e(0x352)](0xc9)[_0xb97f0e(0x48e)](_0x5f4e56);});}},fi=require(a0_0x2101b5(0x2ae)),It=class{},Tt=class extends V{constructor(..._0x465e27){const _0x13a842=a0_0x2101b5;super(),this[_0x13a842(0x834)]=(0x0,fi[_0x13a842(0x588)])(),this['router'][_0x13a842(0x46b)](this[_0x13a842(0x1b6)](_0x13a842(0x8c5)),..._0x465e27,async(_0x3e7534,_0x3b8d62)=>{const _0x78c319=_0x13a842;let _0x2f4cf3=await this[_0x78c319(0x3fb)]({'request':_0x3e7534,'schema':di,'ClassRef':It,'execute':(_0x5d0dd2,_0x43f822)=>As[_0x78c319(0x4eb)](_0x5d0dd2,_0x43f822)});_0x3b8d62[_0x78c319(0x352)](0xc9)['json'](_0x2f4cf3);})[_0x13a842(0x34a)](this[_0x13a842(0x1b6)](_0x13a842(0x604)),..._0x465e27,async(_0x261ce9,_0x576a7e)=>{const _0x2611fc=_0x13a842;let _0x556407=await this[_0x2611fc(0x3fb)]({'request':_0x261ce9,'schema':N,'ClassRef':M,'execute':_0x2c51e5=>As['findWebhook'](_0x2c51e5)});_0x576a7e[_0x2611fc(0x352)](0xc8)[_0x2611fc(0x48e)](_0x556407);});}},wi=require('express'),y=new $(a0_0x2101b5(0x4fa)),_t=class extends V{constructor(..._0x15a759){const _0xc79949=a0_0x2101b5;super(),this[_0xc79949(0x834)]=(0x0,wi[_0xc79949(0x588)])(),this['router']['post'](this[_0xc79949(0x1b6)]('scheduleMessage'),..._0x15a759,async(_0x582494,_0xac3f7c)=>{const _0x268472=_0xc79949;let _0x4e6282=_0x582494['body'];y[_0x268472(0x667)](_0x268472(0x867)),y[_0x268472(0x667)](_0x268472(0x632)),y['verbose'](_0x582494[_0x268472(0x2ab)]);let _0x1a3d78=await this[_0x268472(0x3fb)]({'request':_0x582494,'schema':N,'ClassRef':M,'execute':_0x18aec8=>O['editScheduleMessage'](_0x18aec8,_0x4e6282)});_0xac3f7c[_0x268472(0x352)](0xc8)[_0x268472(0x48e)](_0x1a3d78);})[_0xc79949(0x34a)](this[_0xc79949(0x1b6)](_0xc79949(0x549)),..._0x15a759,async(_0x58eaf9,_0x2f6390)=>{const _0xab18d6=_0xc79949;let _0x4ee7b2=await this[_0xab18d6(0x3fb)]({'request':_0x58eaf9,'schema':N,'ClassRef':M,'execute':_0xafcace=>O['getScheduleMessage'](_0xafcace)});_0x2f6390[_0xab18d6(0x352)](0xc8)[_0xab18d6(0x48e)](_0x4ee7b2);})[_0xc79949(0x57b)](this[_0xc79949(0x1b6)](_0xc79949(0x1bf)),..._0x15a759,async(_0x5256fa,_0x1a8687)=>{const _0x10e3c6=_0xc79949;y[_0x10e3c6(0x667)](_0x10e3c6(0x582));let _0x23f22c=await this[_0x10e3c6(0x3fb)]({'request':_0x5256fa,'schema':N,'ClassRef':M,'execute':_0x1e0ac7=>O[_0x10e3c6(0x1bf)](_0x1e0ac7)});_0x1a8687[_0x10e3c6(0x352)](0xc8)[_0x10e3c6(0x48e)](_0x23f22c);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)](_0xc79949(0x266)),..._0x15a759,async(_0xd05626,_0x5c7cf0)=>{const _0xda61cf=_0xc79949;let _0x163b64=_0xd05626['body'];y['verbose'](_0xda61cf(0x7fa)),y[_0xda61cf(0x667)]('request\x20body:\x20'),y['verbose'](_0xd05626['body']);let _0x153ad9=await this[_0xda61cf(0x3fb)]({'request':_0xd05626,'schema':N,'ClassRef':M,'execute':_0x32cbba=>O[_0xda61cf(0x266)](_0x32cbba,_0x163b64)});_0x5c7cf0['status'](0xc8)[_0xda61cf(0x48e)](_0x153ad9);})[_0xc79949(0x34a)](this[_0xc79949(0x1b6)](_0xc79949(0x474)),..._0x15a759,async(_0x4a0c14,_0x2c7e46)=>{const _0x22410d=_0xc79949;y[_0x22410d(0x667)](_0x22410d(0x5b5));let _0x422c49=await this['dataValidate']({'request':_0x4a0c14,'schema':N,'ClassRef':M,'execute':_0x2d4299=>O[_0x22410d(0x474)](_0x2d4299)});_0x2c7e46['status'](0xc8)['json'](_0x422c49);})[_0xc79949(0x34a)](this[_0xc79949(0x1b6)](_0xc79949(0x845)),..._0x15a759,async(_0x3ce16e,_0xa3a16a)=>{const _0x139bf7=_0xc79949;y['verbose'](_0x139bf7(0x4ad));let _0x378c27=await this['dataValidate']({'request':_0x3ce16e,'schema':N,'ClassRef':M,'execute':_0x462852=>O[_0x139bf7(0x474)](_0x462852)});_0xa3a16a['status'](0xc8)['json'](_0x378c27);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)]('updateAgent'),..._0x15a759,async(_0x9ced9,_0x262739)=>{const _0x4fe7a5=_0xc79949;let _0x4af029=_0x9ced9[_0x4fe7a5(0x2ab)];y[_0x4fe7a5(0x667)](_0x4fe7a5(0x631)),y[_0x4fe7a5(0x667)](_0x4fe7a5(0x632)),y['verbose'](_0x9ced9[_0x4fe7a5(0x2ab)]);let _0x5ddbba=await this[_0x4fe7a5(0x3fb)]({'request':_0x9ced9,'schema':N,'ClassRef':M,'execute':_0x5ed3db=>O[_0x4fe7a5(0x572)](_0x5ed3db,_0x4af029)});_0x262739[_0x4fe7a5(0x352)](0xc8)[_0x4fe7a5(0x48e)](_0x5ddbba);})['post'](this[_0xc79949(0x1b6)]('updateCustomFields'),..._0x15a759,async(_0x401765,_0x509f4c)=>{const _0x3e80c2=_0xc79949;let _0x1f07fd=_0x401765[_0x3e80c2(0x2ab)];y[_0x3e80c2(0x667)](_0x3e80c2(0x160)),y['verbose'](_0x3e80c2(0x632)),y['verbose'](_0x401765[_0x3e80c2(0x2ab)]);let _0x2d5b7d=await this['dataValidate']({'request':_0x401765,'schema':N,'ClassRef':M,'execute':_0x318909=>O[_0x3e80c2(0x32f)](_0x318909,_0x1f07fd)});_0x509f4c[_0x3e80c2(0x352)](0xc8)[_0x3e80c2(0x48e)](_0x2d5b7d);})['post'](this[_0xc79949(0x1b6)](_0xc79949(0x5ae)),..._0x15a759,async(_0x36bbd0,_0x243029)=>{const _0x2cfeb7=_0xc79949;let _0x5ad3f7=_0x36bbd0[_0x2cfeb7(0x2ab)];y[_0x2cfeb7(0x667)](_0x2cfeb7(0x340)),y[_0x2cfeb7(0x667)](_0x2cfeb7(0x632)),y[_0x2cfeb7(0x667)](_0x36bbd0[_0x2cfeb7(0x2ab)]);let _0x11dc8c=await this[_0x2cfeb7(0x3fb)]({'request':_0x36bbd0,'schema':N,'ClassRef':M,'execute':_0xcb6f02=>O[_0x2cfeb7(0x5ae)](_0xcb6f02,_0x5ad3f7)});_0x243029[_0x2cfeb7(0x352)](0xc8)[_0x2cfeb7(0x48e)](_0x11dc8c);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)](_0xc79949(0x374)),..._0x15a759,async(_0x4093c7,_0x3ee971)=>{const _0x2c6962=_0xc79949;let _0x3a0082=_0x4093c7[_0x2c6962(0x2ab)];y[_0x2c6962(0x667)]('request\x20received\x20in\x20updateFlowConfig'),y[_0x2c6962(0x667)]('request\x20body:\x20'),y[_0x2c6962(0x667)](_0x4093c7[_0x2c6962(0x2ab)]);let _0x256acf=await this[_0x2c6962(0x3fb)]({'request':_0x4093c7,'schema':N,'ClassRef':M,'execute':_0x356cc4=>O[_0x2c6962(0x374)](_0x356cc4,_0x3a0082)});_0x3ee971[_0x2c6962(0x352)](0xc8)[_0x2c6962(0x48e)](_0x256acf);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)](_0xc79949(0x5ea)),..._0x15a759,async(_0x26ed32,_0x34b598)=>{const _0x45c6a4=_0xc79949;let _0x1c4cff=_0x26ed32[_0x45c6a4(0x2ab)];y[_0x45c6a4(0x667)](_0x45c6a4(0x48d)),y[_0x45c6a4(0x667)](_0x45c6a4(0x632)),y[_0x45c6a4(0x667)](_0x26ed32['body']);let _0x45666c=await this[_0x45c6a4(0x3fb)]({'request':_0x26ed32,'schema':N,'ClassRef':M,'execute':_0x150acb=>O['getConversation'](_0x150acb,_0x1c4cff)});_0x34b598[_0x45c6a4(0x352)](0xc8)[_0x45c6a4(0x48e)](_0x45666c);})[_0xc79949(0x46b)](this['routerPath']('fetchConversation'),..._0x15a759,async(_0x4fbf87,_0x3ba348)=>{const _0x355a10=_0xc79949;let _0x38921d=_0x4fbf87[_0x355a10(0x2ab)];y[_0x355a10(0x667)](_0x355a10(0x5ef)),y[_0x355a10(0x667)](_0x355a10(0x632)),y[_0x355a10(0x667)](_0x4fbf87[_0x355a10(0x2ab)]);let _0x38a767=await this[_0x355a10(0x3fb)]({'request':_0x4fbf87,'schema':N,'ClassRef':M,'execute':_0x316952=>O[_0x355a10(0x711)](_0x316952,_0x38921d)});_0x3ba348[_0x355a10(0x352)](0xc8)['json'](_0x38a767);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)](_0xc79949(0x713)),..._0x15a759,async(_0x16ab00,_0x3ecb7c)=>{const _0xe2d90e=_0xc79949;let _0x35bd52=_0x16ab00['body'];y[_0xe2d90e(0x667)](_0xe2d90e(0x5ff)),y[_0xe2d90e(0x667)](_0xe2d90e(0x632)),y[_0xe2d90e(0x667)](_0x16ab00['body']);let _0x129bb2=await this['dataValidate']({'request':_0x16ab00,'schema':N,'ClassRef':M,'execute':_0x2ed0eb=>O[_0xe2d90e(0x713)](_0x2ed0eb,_0x35bd52)});_0x3ecb7c[_0xe2d90e(0x352)](0xc8)[_0xe2d90e(0x48e)](_0x129bb2);})['delete'](this[_0xc79949(0x1b6)](_0xc79949(0x692)),..._0x15a759,async(_0x5fb2c9,_0x1cbe4e)=>{const _0x537a90=_0xc79949;let _0x35073a=_0x5fb2c9['body'];y[_0x537a90(0x667)](_0x537a90(0x4b6)),y[_0x537a90(0x667)](_0x537a90(0x632)),y[_0x537a90(0x667)](_0x5fb2c9[_0x537a90(0x2ab)]);let _0x23f0d1=await this[_0x537a90(0x3fb)]({'request':_0x5fb2c9,'schema':N,'ClassRef':M,'execute':_0x4bd234=>O['deleteConversation'](_0x4bd234,_0x35073a)});_0x1cbe4e[_0x537a90(0x352)](0xc8)['json'](_0x23f0d1);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)]('createflow'),..._0x15a759,async(_0x3e866f,_0x53760d)=>{const _0x2a3f84=_0xc79949;let _0x44d3f7=_0x3e866f[_0x2a3f84(0x2ab)],_0x334e63=_0x3e866f[_0x2a3f84(0x35e)][_0x2a3f84(0x77b)];y[_0x2a3f84(0x667)](_0x2a3f84(0x43e)),y[_0x2a3f84(0x667)]('request\x20body:\x20'),y[_0x2a3f84(0x667)](_0x3e866f[_0x2a3f84(0x2ab)]);let _0x383e99=await this[_0x2a3f84(0x3fb)]({'request':_0x3e866f,'schema':N,'ClassRef':M,'execute':_0x46f98e=>O[_0x2a3f84(0x2e9)](_0x46f98e,_0x44d3f7,_0x334e63)});_0x53760d['status'](0xc8)[_0x2a3f84(0x48e)](_0x383e99);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)](_0xc79949(0x52d)),..._0x15a759,async(_0x2851ee,_0x31f46d)=>{const _0xddd5dd=_0xc79949;let _0x3aecfa=_0x2851ee[_0xddd5dd(0x2ab)],_0x322f80=_0x2851ee[_0xddd5dd(0x35e)]['apikey'];y[_0xddd5dd(0x667)]('request\x20received\x20in\x20editFlow'),y[_0xddd5dd(0x667)]('request\x20body:\x20'),y[_0xddd5dd(0x667)](_0x2851ee[_0xddd5dd(0x2ab)]),delete _0x3aecfa['blocks'],delete _0x3aecfa[_0xddd5dd(0x2da)],delete _0x3aecfa[_0xddd5dd(0x1ac)],delete _0x3aecfa[_0xddd5dd(0x3b7)];let _0x3d56aa=await this['dataValidate']({'request':_0x2851ee,'schema':N,'ClassRef':M,'execute':_0x514531=>O[_0xddd5dd(0x890)](_0x514531,_0x3aecfa,_0x322f80)});_0x31f46d[_0xddd5dd(0x352)](0xc8)['json'](_0x3d56aa);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)](_0xc79949(0x515)),..._0x15a759,async(_0x3d7ef2,_0x127ea4)=>{const _0x16f12b=_0xc79949;let _0x4e9de7=_0x3d7ef2[_0x16f12b(0x2ab)];y[_0x16f12b(0x667)](_0x16f12b(0x315)),y[_0x16f12b(0x667)]('request\x20body:\x20'),y[_0x16f12b(0x667)](_0x3d7ef2[_0x16f12b(0x2ab)]);let _0x13abc6=await this['dataValidate']({'request':_0x3d7ef2,'schema':N,'ClassRef':M,'execute':_0x6536fa=>O[_0x16f12b(0x827)](_0x6536fa,_0x4e9de7)});_0x127ea4[_0x16f12b(0x352)](0xc8)[_0x16f12b(0x48e)](_0x13abc6);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)](_0xc79949(0x227)),..._0x15a759,async(_0x3e9e5b,_0xf91d74)=>{const _0x29cfcb=_0xc79949;let _0x36e7cf=_0x3e9e5b[_0x29cfcb(0x2ab)];y[_0x29cfcb(0x667)](_0x29cfcb(0x315)),y[_0x29cfcb(0x667)](_0x29cfcb(0x632)),y[_0x29cfcb(0x667)](_0x3e9e5b['body']);let _0x593f8c=await this[_0x29cfcb(0x3fb)]({'request':_0x3e9e5b,'schema':N,'ClassRef':M,'execute':_0x40facf=>O[_0x29cfcb(0x3a1)](_0x40facf,_0x36e7cf)});_0xf91d74['status'](0xc8)[_0x29cfcb(0x48e)](_0x593f8c);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)]('editflowvaredit'),..._0x15a759,async(_0x5bfbcc,_0x47dadd)=>{const _0x3ea470=_0xc79949;let _0x3c5a41=_0x5bfbcc[_0x3ea470(0x2ab)];y['verbose']('request\x20received\x20in\x20editFlow'),y[_0x3ea470(0x667)](_0x3ea470(0x632)),y['verbose'](_0x5bfbcc[_0x3ea470(0x2ab)]);let _0x537525=await this[_0x3ea470(0x3fb)]({'request':_0x5bfbcc,'schema':N,'ClassRef':M,'execute':_0x5afab8=>O['editFlowVaredit'](_0x5afab8,_0x3c5a41)});_0x47dadd[_0x3ea470(0x352)](0xc8)[_0x3ea470(0x48e)](_0x537525);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)](_0xc79949(0x48f)),..._0x15a759,async(_0x447fe2,_0x293721)=>{const _0x38e561=_0xc79949;let _0x1fee84=_0x447fe2['body'];y[_0x38e561(0x667)](_0x38e561(0x53d)),y[_0x38e561(0x667)](_0x38e561(0x632)),y['verbose'](_0x447fe2['body']);let _0x1d5c87=await this[_0x38e561(0x3fb)]({'request':_0x447fe2,'schema':N,'ClassRef':M,'execute':_0x51d2ee=>O['editFlowGroup'](_0x51d2ee,_0x1fee84)});_0x293721[_0x38e561(0x352)](0xc8)[_0x38e561(0x48e)](_0x1d5c87);})['post'](this[_0xc79949(0x1b6)](_0xc79949(0x614)),..._0x15a759,async(_0x3ef340,_0x55a75a)=>{const _0x366517=_0xc79949;let _0x1ff1b5=_0x3ef340[_0x366517(0x2ab)];y[_0x366517(0x667)]('request\x20received\x20in\x20editFlowcondition'),y['verbose'](_0x366517(0x632)),y['verbose'](_0x3ef340['body']);let _0x338554=await this[_0x366517(0x3fb)]({'request':_0x3ef340,'schema':N,'ClassRef':M,'execute':_0x319ddb=>O[_0x366517(0x7a4)](_0x319ddb,_0x1ff1b5)});_0x55a75a['status'](0xc8)[_0x366517(0x48e)](_0x338554);})['post'](this[_0xc79949(0x1b6)](_0xc79949(0x7dd)),..._0x15a759,async(_0x5b1ddc,_0x56593c)=>{const _0x8b30ef=_0xc79949;let _0xe6cac1=_0x5b1ddc[_0x8b30ef(0x2ab)];y[_0x8b30ef(0x667)](_0x8b30ef(0x382)),y[_0x8b30ef(0x667)](_0x8b30ef(0x632)),y[_0x8b30ef(0x667)](_0x5b1ddc[_0x8b30ef(0x2ab)]);let _0x4983f0=await this['dataValidate']({'request':_0x5b1ddc,'schema':N,'ClassRef':M,'execute':_0x1f6bc7=>O[_0x8b30ef(0x3d7)](_0x1f6bc7,_0xe6cac1)});_0x56593c[_0x8b30ef(0x352)](0xc8)[_0x8b30ef(0x48e)](_0x4983f0);})[_0xc79949(0x46b)](this[_0xc79949(0x1b6)]('getflow'),..._0x15a759,async(_0x2f357d,_0x59c4f8)=>{const _0x253969=_0xc79949;let _0x1cfc0d=_0x2f357d[_0x253969(0x2ab)];y[_0x253969(0x667)]('request\x20received\x20in\x20getFlow'),y[_0x253969(0x667)](_0x253969(0x632)),y[_0x253969(0x667)](_0x2f357d[_0x253969(0x2ab)]);let _0x3ee226=await this[_0x253969(0x3fb)]({'request':_0x2f357d,'schema':N,'ClassRef':M,'execute':_0x35758f=>O[_0x253969(0x330)](_0x35758f,_0x1cfc0d)});_0x59c4f8[_0x253969(0x352)](0xc8)[_0x253969(0x48e)](_0x3ee226);})[_0xc79949(0x57b)](this[_0xc79949(0x1b6)](_0xc79949(0x252)),..._0x15a759,async(_0x3e1a01,_0x3127fe)=>{const _0x3576ba=_0xc79949;let _0x175209=_0x3e1a01[_0x3576ba(0x2ab)];y['verbose'](_0x3576ba(0x4dc)),y[_0x3576ba(0x667)](_0x3576ba(0x632)),y['verbose'](_0x3e1a01['body']);let _0x5e6f8b=await this['dataValidate']({'request':_0x3e1a01,'schema':N,'ClassRef':M,'execute':_0x24a2a7=>O[_0x3576ba(0x146)](_0x24a2a7,_0x175209)});_0x3127fe[_0x3576ba(0x352)](0xc8)[_0x3576ba(0x48e)](_0x5e6f8b);})['get'](this[_0xc79949(0x1b6)](_0xc79949(0x1c8)),..._0x15a759,async(_0x4f77eb,_0x5b507c)=>{const _0x400517=_0xc79949;y[_0x400517(0x667)](_0x400517(0x430));let _0x40e26f=await this['dataValidate']({'request':_0x4f77eb,'schema':N,'ClassRef':M,'execute':_0x49c9bd=>O[_0x400517(0x4c3)](_0x49c9bd)});_0x5b507c[_0x400517(0x352)](0xc8)[_0x400517(0x48e)](_0x40e26f);});}},Mi=T(require(a0_0x2101b5(0x204))),se={};function yi(_0x3a1393,_0x4a2a41,_0x5b91ed,_0x3ca688){se[_0x3a1393]||(se[_0x3a1393]={}),se[_0x3a1393][_0x4a2a41]={'id':_0x4a2a41,'response':_0x5b91ed,'events':_0x3ca688};}function bi(_0x2eff24,_0x1ab509){!se[_0x2eff24]||!se[_0x2eff24][_0x1ab509]||delete se[_0x2eff24][_0x1ab509];}function F(_0x1eedc2,_0x2e74bb,_0xfbc586){const _0xdb49bd=a0_0x2101b5;if(!se[_0x1eedc2])return;let _0x41d505=_0xdb49bd(0x322)+JSON[_0xdb49bd(0x41d)](_0xfbc586)+'\x0a\x0a';Object[_0xdb49bd(0x482)](se[_0x1eedc2])['forEach'](_0x7f17b5=>{const _0x7b791b=_0xdb49bd;_0x7f17b5[_0x7b791b(0x248)][_0x7b791b(0x267)](_0x2e74bb)&&_0x7f17b5['response'][_0x7b791b(0x1cb)](_0x41d505);});}function Si(){const _0x115a69=a0_0x2101b5;let _0xeae122={};for(let _0x14d445 in se)_0xeae122[_0x14d445]=Object[_0x115a69(0x482)](se[_0x14d445])[_0x115a69(0x5e6)](_0x1eb10a=>({'id':_0x1eb10a['id'],'events':_0x1eb10a[_0x115a69(0x248)]}));return _0xeae122;}var Ci=require('uuid'),Ts=require(a0_0x2101b5(0x607)),Is=class{},Io=new Ts[(a0_0x2101b5(0x6c8))]({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),To=new Ts[(a0_0x2101b5(0x6c8))]({'_id':{'type':String,'default':'config'},'WebhookGlobal':{'type':Io},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),ve=I?.[a0_0x2101b5(0x887)](Is[a0_0x2101b5(0x89c)],To,a0_0x2101b5(0x356)),_o=Mi[a0_0x2101b5(0x7ae)][a0_0x2101b5(0x1b4)](__dirname,a0_0x2101b5(0x177)),ke=(0x0,Ot['Router'])(),Oo=S[a0_0x2101b5(0x34a)](a0_0x2101b5(0x532))[a0_0x2101b5(0x337)],re=[Aa,Ia,Oa[Oo]];ke['use'](a0_0x2101b5(0x778),Ot[a0_0x2101b5(0x7ae)][a0_0x2101b5(0x17e)](_o))[a0_0x2101b5(0x34a)](a0_0x2101b5(0x7c8),async(_0xcde53f,_0x2d2fba)=>{const _0x5ab565=a0_0x2101b5;console[_0x5ab565(0x509)](_0x5ab565(0x571));let _0x1ed830=_0xcde53f['params'][_0x5ab565(0x7f4)],_0x130f9a=(_0xcde53f['query'][_0x5ab565(0x248)]||'')[_0x5ab565(0x2bd)](','),_0x94cfc8=(0x0,Ci['v4'])();console[_0x5ab565(0x509)]('Instance\x20ID:',_0x1ed830),console[_0x5ab565(0x509)]('Subscribed\x20Events:',_0x130f9a);let _0x5769e5=S[_0x5ab565(0x34a)](_0x5ab565(0x532))['API_KEY'],_0x1c799e=_0xcde53f[_0x5ab565(0x56a)][_0x5ab565(0x77b)];if(console[_0x5ab565(0x509)](_0x5ab565(0x874),_0x1c799e),_0x5769e5[_0x5ab565(0x324)]!==_0x1c799e){console[_0x5ab565(0x509)]('env.KEY\x20!==\x20key');try{let _0x27421c=await fe['auth'][_0x5ab565(0x604)](_0x1ed830);if(console[_0x5ab565(0x509)](_0x5ab565(0x166),_0x27421c),!_0x27421c||_0x27421c[_0x5ab565(0x77b)]!==_0x1c799e)return console[_0x5ab565(0x509)](_0x5ab565(0x77f)),_0x2d2fba[_0x5ab565(0x352)](0x191)['send'](_0x5ab565(0x6e5));}catch(_0x439cb5){return console[_0x5ab565(0x3c9)]('Error\x20retrieving\x20instance\x20or\x20API\x20Key:',_0x439cb5),_0x2d2fba[_0x5ab565(0x352)](0x191)[_0x5ab565(0x335)]('API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.');}}if(!await _e(_0x1ed830))return _0x2d2fba[_0x5ab565(0x352)](0x194)[_0x5ab565(0x335)](_0x5ab565(0x500));_0x2d2fba['setHeader'](_0x5ab565(0x2db),'text/event-stream'),_0x2d2fba[_0x5ab565(0x3a8)](_0x5ab565(0x5c1),_0x5ab565(0x625)),_0x2d2fba[_0x5ab565(0x3a8)](_0x5ab565(0x6a9),_0x5ab565(0x6f2)),_0x2d2fba[_0x5ab565(0x32c)]();let _0x400be0=_0x5ab565(0x322)+JSON[_0x5ab565(0x41d)]({'info':_0x5ab565(0x89d)})+'\x0a\x0a';_0x2d2fba[_0x5ab565(0x1cb)](_0x400be0),yi(_0x1ed830,_0x94cfc8,_0x2d2fba,_0x130f9a),_0xcde53f['on'](_0x5ab565(0x584),()=>{const _0x4fffc1=_0x5ab565;console['log'](_0x4fffc1(0x5a8)+_0x1ed830),bi(_0x1ed830,_0x94cfc8);});}),ke[a0_0x2101b5(0x46b)](a0_0x2101b5(0x55a),async(_0xcd1780,_0x534233)=>{const _0x4c327d=a0_0x2101b5;console['log']('iniciando\x20fluxo\x20router');let _0x1df491=_0xcd1780[_0x4c327d(0x19c)]['instance'],_0x3d2ba9=_0xcd1780['params'][_0x4c327d(0x850)],_0x34085a=_0xcd1780['query'][_0x4c327d(0x4e1)]||'',_0x556e0a=_0xcd1780[_0x4c327d(0x2ab)];console['log'](_0x4c327d(0x627),_0x1df491),console['log'](_0x4c327d(0x701),_0x3d2ba9),console[_0x4c327d(0x509)](_0x4c327d(0x35d),_0x34085a),console['log']('Request\x20Body:',_0x556e0a);try{if(!await _e(_0x1df491))return _0x534233['status'](0x194)[_0x4c327d(0x335)]('Instância\x20não\x20encontrada.');let _0x24b28a=await O['startFlowWebhook'](_0x1df491,_0x3d2ba9,_0x34085a,_0x556e0a);_0x534233['send'](_0x24b28a);}catch(_0x239dff){console[_0x4c327d(0x3c9)](_0x239dff),_0x534233['status'](0x1f4)[_0x4c327d(0x335)]('Erro\x20ao\x20iniciar\x20o\x20fluxo.');}}),ke[a0_0x2101b5(0x34a)]('/clients-info',(_0x57ec2a,_0x21d13e)=>{const _0x4734f0=a0_0x2101b5;let _0x2907d9=Si();_0x21d13e[_0x4734f0(0x48e)](_0x2907d9);})[a0_0x2101b5(0x34a)]('/',(_0x1055d5,_0x41f171)=>{const _0x33c9e1=a0_0x2101b5;let _0x5ba8f2=S[_0x33c9e1(0x34a)](_0x33c9e1(0x7d4))['URL'];if(_0x5ba8f2){let _0x4c81dc=encodeURIComponent(''+_0x5ba8f2);_0x41f171[_0x33c9e1(0x217)](_0x33c9e1(0x302)+_0x4c81dc);return;}let _0x5665e5=S[_0x33c9e1(0x34a)](_0x33c9e1(0x4f5)),_0x3d6078=_0x5665e5&&_0x5665e5[_0x33c9e1(0x436)][_0x33c9e1(0x2bd)]('/')[0x4];if(_0x3d6078){let _0x1e2c51=encodeURIComponent('https://'+_0x3d6078);_0x41f171[_0x33c9e1(0x217)](_0x33c9e1(0x302)+_0x1e2c51);}else _0x41f171[_0x33c9e1(0x217)](_0x33c9e1(0x530));})['put']('/exit',...re,async(_0x168865,_0x273bc1)=>{const _0x45e9a4=a0_0x2101b5;try{console[_0x45e9a4(0x509)](_0x45e9a4(0x215)),_0x273bc1[_0x45e9a4(0x352)](0xc8)[_0x45e9a4(0x48e)]({'message':_0x45e9a4(0x22b)}),_0x273bc1['on'](_0x45e9a4(0x751),()=>process[_0x45e9a4(0x32d)](0x0));}catch(_0xf6af1d){console[_0x45e9a4(0x3c9)]('Erro\x20ao\x20tentar\x20encerrar\x20a\x20API',_0xf6af1d),_0x273bc1[_0x45e9a4(0x352)](0x1f4)[_0x45e9a4(0x48e)]({'message':_0x45e9a4(0x1aa)});}})[a0_0x2101b5(0x5db)](a0_0x2101b5(0x292),...re,async(_0x3508f2,_0x412404)=>{const _0x192b17=a0_0x2101b5;try{let _0x1f1566=_0x3508f2['body'];await ve['updateOne']({},{'$set':_0x1f1566},{'upsert':!0x0});let _0x7ca662=await ve[_0x192b17(0x505)]();_0x412404[_0x192b17(0x48e)](_0x7ca662);}catch(_0x20d3c7){_0x412404[_0x192b17(0x352)](0x190)[_0x192b17(0x335)](_0x20d3c7[_0x192b17(0x31f)]);}})[a0_0x2101b5(0x34a)](a0_0x2101b5(0x292),...re,async(_0x56d50b,_0x31e1a1)=>{const _0x3fb30c=a0_0x2101b5;try{let _0x320e47=await ve[_0x3fb30c(0x505)]();if(!_0x320e47)return _0x31e1a1['json']({});_0x31e1a1[_0x3fb30c(0x48e)](_0x320e47);}catch(_0x32266b){_0x31e1a1[_0x3fb30c(0x352)](0x1f4)['send'](_0x32266b['message']);}})['use'](a0_0x2101b5(0x792),new yt(S,...re)[a0_0x2101b5(0x834)])[a0_0x2101b5(0x5a6)](a0_0x2101b5(0x1dc),new At(...re)[a0_0x2101b5(0x834)])[a0_0x2101b5(0x5a6)]('/chat',new ct(...re)[a0_0x2101b5(0x834)])[a0_0x2101b5(0x5a6)](a0_0x2101b5(0x6f8),new wt(...re)[a0_0x2101b5(0x834)])[a0_0x2101b5(0x5a6)](a0_0x2101b5(0x329),new Tt(...re)[a0_0x2101b5(0x834)])[a0_0x2101b5(0x5a6)](a0_0x2101b5(0x175),new _t(...re)[a0_0x2101b5(0x834)]);var m=class{constructor(..._0x48faf8){const _0x243555=a0_0x2101b5;throw{'status':0x190,'error':_0x243555(0x529),'message':_0x48faf8['length']>0x0?_0x48faf8:void 0x0};}},ie=class{constructor(..._0x3d8a15){const _0x488655=a0_0x2101b5;throw{'status':0x191,'error':_0x488655(0x5fa),'message':_0x3d8a15[_0x488655(0x608)]>0x0?_0x3d8a15:void 0x0};}},Z=class{constructor(..._0x40d115){throw{'status':0x193,'error':'Forbidden','message':_0x40d115['length']>0x0?_0x40d115:void 0x0};}},U=class{constructor(..._0x47f9bb){const _0x56c833=a0_0x2101b5;throw{'status':0x194,'error':_0x56c833(0x25e),'message':_0x47f9bb['length']>0x0?_0x47f9bb:void 0x0};}},x=class{constructor(..._0x537dbd){const _0x3ee2e9=a0_0x2101b5;throw{'status':0x1f4,'error':_0x3ee2e9(0x236),'message':_0x537dbd[_0x3ee2e9(0x608)]>0x0?_0x537dbd:void 0x0};}},we=require(a0_0x2101b5(0x89f));async function _s(_0x5cac38){const _0x2f91cd=a0_0x2101b5;let _0x3a426e=new $(_s['name']),_0x557733=I[_0x2f91cd(0x44f)](),_0xabd519=_0x557733['db'](S['get'](_0x2f91cd(0x5b1))[_0x2f91cd(0x656)][_0x2f91cd(0x181)]+_0x2f91cd(0x852))[_0x2f91cd(0x1bc)](_0x5cac38),_0x4fbd56=async(_0x173fe8,_0x533973)=>{const _0x337dc4=_0x2f91cd;try{return await _0x557733[_0x337dc4(0x4e2)](),await _0xabd519[_0x337dc4(0x149)]({'_id':_0x533973},JSON[_0x337dc4(0x4bc)](JSON[_0x337dc4(0x41d)](_0x173fe8,we[_0x337dc4(0x5bb)][_0x337dc4(0x47f)])),{'upsert':!0x0});}catch{}},_0xfce958=async _0x14ffea=>{const _0x35c056=_0x2f91cd;try{await _0x557733['connect']();let _0x5819d3=await _0xabd519[_0x35c056(0x505)]({'_id':_0x14ffea}),_0x12096a=JSON['stringify'](_0x5819d3);return JSON[_0x35c056(0x4bc)](_0x12096a,we[_0x35c056(0x5bb)][_0x35c056(0x764)]);}catch{}},_0x24bc9c=async _0x192471=>{const _0x247304=_0x2f91cd;try{return await _0x557733[_0x247304(0x4e2)](),await _0xabd519[_0x247304(0x66e)]({'_id':_0x192471});}catch{}},_0x2d944c=await _0xfce958(_0x2f91cd(0x4da))||(0x0,we[_0x2f91cd(0x3a4)])();return{'state':{'creds':_0x2d944c,'keys':{'get':async(_0xcfc7eb,_0x51badb)=>{const _0x11a0c0=_0x2f91cd;let _0x1aed48={};return await Promise[_0x11a0c0(0x186)](_0x51badb[_0x11a0c0(0x5e6)](async _0x56f000=>{const _0x542755=_0x11a0c0;let _0x16c0be=await _0xfce958(_0xcfc7eb+'-'+_0x56f000);_0xcfc7eb===_0x542755(0x717)&&_0x16c0be&&(_0x16c0be=we['proto'][_0x542755(0x83d)][_0x542755(0x171)][_0x542755(0x206)](_0x16c0be)),_0x1aed48[_0x56f000]=_0x16c0be;})),_0x1aed48;},'set':async _0x3aac86=>{const _0x191e74=_0x2f91cd;let _0x13a795=[];for(let _0x181c19 in _0x3aac86)for(let _0x3cc4a8 in _0x3aac86[_0x181c19]){let _0x374ab6=_0x3aac86[_0x181c19][_0x3cc4a8],_0x517f80=_0x181c19+'-'+_0x3cc4a8;_0x13a795[_0x191e74(0x2a9)](_0x374ab6?_0x4fbd56(_0x374ab6,_0x517f80):_0x24bc9c(_0x517f80));}await Promise[_0x191e74(0x186)](_0x13a795);}}},'saveCreds':async()=>_0x4fbd56(_0x2d944c,_0x2f91cd(0x4da))};}var ks=T(require('long')),Ls=T(require(a0_0x2101b5(0x47b))),Dt=require(a0_0x2101b5(0x89f)),Ei=require(a0_0x2101b5(0x224)),Pt=require(a0_0x2101b5(0x89f)),xt;function xo(_0x2362c1){const _0x5d2830=a0_0x2101b5;return xt||(xt=(0x0,Ei['createClient'])({'url':_0x2362c1[_0x5d2830(0x630)]}),xt[_0x5d2830(0x4e2)]()),xt;}var pe=class u{constructor(_0x2d02bd,_0x1f88cc){const _0x572e84=a0_0x2101b5;this['redisEnv']=_0x2d02bd,this[_0x572e84(0x4a8)]=_0x1f88cc,this[_0x572e84(0x240)]=new $(u['name']),this[_0x572e84(0x796)]=xo(_0x2d02bd);}set[a0_0x2101b5(0x547)](_0x1e78f2){this['instanceName']=_0x1e78f2;}async['instanceKeys'](){const _0x1b3940=a0_0x2101b5;try{return await this[_0x1b3940(0x796)]['sendCommand']([_0x1b3940(0x59a),this[_0x1b3940(0x453)][_0x1b3940(0x3ea)]+':*']);}catch(_0x5dce74){this['logger'][_0x1b3940(0x3c9)](_0x5dce74);}}async[a0_0x2101b5(0x700)](_0x3b39f2,_0x48d23e){const _0x2bcf05=a0_0x2101b5;try{let _0x2f06f0=JSON[_0x2bcf05(0x41d)](_0x48d23e,Pt[_0x2bcf05(0x5bb)]['replacer']);return await this[_0x2bcf05(0x796)][_0x2bcf05(0x1fa)](this[_0x2bcf05(0x453)][_0x2bcf05(0x3ea)]+':'+this[_0x2bcf05(0x4a8)],_0x3b39f2,_0x2f06f0);}catch(_0x38944d){this[_0x2bcf05(0x240)][_0x2bcf05(0x3c9)](_0x38944d);}}async[a0_0x2101b5(0x75f)](){const _0x34d693=a0_0x2101b5;try{let _0x4c7251=await this[_0x34d693(0x796)][_0x34d693(0x2c9)](this[_0x34d693(0x453)][_0x34d693(0x3ea)]+':'+this[_0x34d693(0x4a8)]);if(_0x4c7251){for(let _0x9e7b1 in _0x4c7251)Object['prototype'][_0x34d693(0x414)]['call'](_0x4c7251,_0x9e7b1)&&(_0x4c7251[_0x9e7b1]=JSON['parse'](_0x4c7251[_0x9e7b1],Pt['BufferJSON'][_0x34d693(0x764)]));return _0x4c7251;}}catch(_0x152cca){this[_0x34d693(0x240)][_0x34d693(0x3c9)](_0x152cca);}}async[a0_0x2101b5(0x777)](_0x5e5cfe){const _0x5ca861=a0_0x2101b5;try{let _0x2c9816=await this['client'][_0x5ca861(0x829)](this[_0x5ca861(0x453)][_0x5ca861(0x3ea)]+':'+this[_0x5ca861(0x4a8)],_0x5e5cfe);if(_0x2c9816)return JSON[_0x5ca861(0x4bc)](_0x2c9816,Pt[_0x5ca861(0x5bb)][_0x5ca861(0x764)]);}catch(_0x38959d){this['logger']['error'](_0x38959d);}}async['removeData'](_0x4a0793){const _0x10b914=a0_0x2101b5;try{return await this[_0x10b914(0x796)][_0x10b914(0x3fc)](this[_0x10b914(0x453)][_0x10b914(0x3ea)]+':'+this[_0x10b914(0x4a8)],_0x4a0793);}catch(_0x59c731){this[_0x10b914(0x240)][_0x10b914(0x3c9)](_0x59c731);}}async[a0_0x2101b5(0x55b)](_0x2a179f){const _0x324803=a0_0x2101b5;try{return await this[_0x324803(0x796)][_0x324803(0x47e)](_0x2a179f||this[_0x324803(0x453)][_0x324803(0x3ea)]+':'+this[_0x324803(0x4a8)]);}catch(_0x297afc){this[_0x324803(0x240)]['error'](_0x297afc);}}};async function Os(_0x507f6f,_0x986a13){const _0x160609=a0_0x2101b5;let _0x4828e8=new $(Os[_0x160609(0x89c)]),_0x1081b8=new pe(_0x507f6f,_0x986a13),_0x3ae3f1=async(_0x2be0aa,_0x4052fc)=>{const _0x5c10df=_0x160609;try{return await _0x1081b8[_0x5c10df(0x700)](_0x4052fc,_0x2be0aa);}catch(_0x5b9a83){return _0x4828e8['error']({'localError':_0x5c10df(0x700),'error':_0x5b9a83});}},_0x52d659=async _0x3e2749=>{const _0x2f3ecb=_0x160609;try{return await _0x1081b8['readData'](_0x3e2749);}catch(_0x19da01){_0x4828e8[_0x2f3ecb(0x3c9)]({'readData':'writeData','error':_0x19da01});return;}},_0x3e68cf=async _0x5a1548=>{const _0x2a4823=_0x160609;try{return await _0x1081b8['removeData'](_0x5a1548);}catch(_0x393696){_0x4828e8[_0x2a4823(0x3c9)]({'readData':_0x2a4823(0x274),'error':_0x393696});}},_0x25d616=await _0x52d659(_0x160609(0x4da))||(0x0,Dt[_0x160609(0x3a4)])();return{'state':{'creds':_0x25d616,'keys':{'get':async(_0x501eea,_0x3f73aa)=>{const _0x5db83e=_0x160609;let _0x15058c={};return await Promise[_0x5db83e(0x186)](_0x3f73aa[_0x5db83e(0x5e6)](async _0x5271d9=>{const _0x2505ea=_0x5db83e;let _0x471bae=await _0x52d659(_0x501eea+'-'+_0x5271d9);_0x501eea===_0x2505ea(0x717)&&_0x471bae&&(_0x471bae=Dt[_0x2505ea(0x843)]['Message'][_0x2505ea(0x171)][_0x2505ea(0x206)](_0x471bae)),_0x15058c[_0x5271d9]=_0x471bae;})),_0x15058c;},'set':async _0x2100d9=>{const _0x463b92=_0x160609;let _0x5b952f=[];for(let _0xaeae41 in _0x2100d9)for(let _0x1f64ae in _0x2100d9[_0xaeae41]){let _0x16ee1f=_0x2100d9[_0xaeae41][_0x1f64ae],_0x516fcb=_0xaeae41+'-'+_0x1f64ae;_0x5b952f[_0x463b92(0x2a9)](_0x16ee1f?await _0x3ae3f1(_0x16ee1f,_0x516fcb):await _0x3e68cf(_0x516fcb));}await Promise['all'](_0x5b952f);}}},'saveCreds':async()=>await _0x3ae3f1(_0x25d616,'creds')};}var k=T(require('fs')),Y=require(a0_0x2101b5(0x3a2)),Ut=T(require('sharp')),ne=require(a0_0x2101b5(0x50e)),vi=require('child_process'),Ni=require(a0_0x2101b5(0x3e2)),$i=T(require(a0_0x2101b5(0x737))),Ne=class extends _{constructor(_0x298489,_0x2caef0,_0xda2d81){const _0x2302ac=a0_0x2101b5;super(_0x2caef0),this[_0x2302ac(0x4ea)]=_0x298489,this[_0x2302ac(0x596)]=_0x2caef0,this['dbConnection']=_0xda2d81;}async[a0_0x2101b5(0x2fb)](_0x3616d1,_0x4274ca){const _0x4e9fc2=a0_0x2101b5;try{if(this[_0x4e9fc2(0x4d5)][_0x4e9fc2(0x6f5)]){console[_0x4e9fc2(0x509)](_0x4e9fc2(0x3fd)+_0x4274ca+_0x4e9fc2(0x38c),_0x3616d1);let _0x28646f=await this[_0x4e9fc2(0x4ea)][_0x4e9fc2(0x5de)]({'_id':_0x4274ca},{'$set':_0x3616d1},{'new':!0x0,'upsert':!0x0});return console['log'](_0x4e9fc2(0x7c1),_0x28646f),_0x28646f;}}catch(_0x236716){throw console[_0x4e9fc2(0x3c9)](_0x4e9fc2(0x54c),_0x236716),_0x236716;}return null;}async[a0_0x2101b5(0x66e)](_0xd60257){const _0x2cda53=a0_0x2101b5;try{let _0x37c590=A(_0xd60257['where']);return{'deletedCount':(await this[_0x2cda53(0x4ea)][_0x2cda53(0x66e)](_0x37c590))[_0x2cda53(0x797)]};}catch(_0x29e8ab){return{'error':_0x29e8ab?.[_0x2cda53(0x60f)]()};}}async[a0_0x2101b5(0x505)](_0x33b21d){const _0x4d88a5=a0_0x2101b5;try{let _0x84ca0d=A(_0x33b21d[_0x4d88a5(0x702)]);return await this[_0x4d88a5(0x4ea)]['findOne'](_0x84ca0d)['lean']();}catch{return null;}}},kt=(0x0,Ni[a0_0x2101b5(0x43a)])(vi[a0_0x2101b5(0x49b)]),Po=S[a0_0x2101b5(0x34a)](a0_0x2101b5(0x194)),xs=class{constructor(){const _0x34a848=a0_0x2101b5;this[_0x34a848(0x3a9)]=new Ne(Be,S),(!this['ipv6Prefix']||!this['networkInterface'])&&Po&&this['detectIPv6PrefixAndInterface']()[_0x34a848(0x5c4)](()=>{const _0x51182a=_0x34a848;console[_0x51182a(0x509)]('IPv6\x20Prefix\x20detected:\x20'+this['ipv6Prefix']),console[_0x51182a(0x509)](_0x51182a(0x48b)+this['networkInterface']);})[_0x34a848(0x1e1)](_0x16f864=>{const _0xc7b0be=_0x34a848;console[_0xc7b0be(0x3c9)]('Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20'+_0x16f864[_0xc7b0be(0x31f)]);});}async[a0_0x2101b5(0x17b)](){const _0xab9ec4=a0_0x2101b5;try{let {stdout:_0x401e82}=await kt(_0xab9ec4(0x82b));console['log'](_0xab9ec4(0x88c)+_0x401e82);let _0x50b47b=_0x401e82[_0xab9ec4(0x2bd)]('\x0a')['map'](_0x238466=>_0x238466[_0xab9ec4(0x2bd)]('\x20')[0x0])[_0xab9ec4(0x285)](_0x3cd2d5=>!_0x3cd2d5[_0xab9ec4(0x267)]('lo')&&!_0x3cd2d5[_0xab9ec4(0x267)]('docker')&&!_0x3cd2d5[_0xab9ec4(0x267)]('vir')&&!_0x3cd2d5[_0xab9ec4(0x267)]('wl')&&!_0x3cd2d5[_0xab9ec4(0x267)]('@'));if(console[_0xab9ec4(0x509)](_0xab9ec4(0x46a)+_0x50b47b),_0x50b47b['length']===0x0)throw new Error(_0xab9ec4(0x4be));this['networkInterface']=_0x50b47b[0x0];let {stdout:_0x15d4d8}=await kt('ip\x20-6\x20addr\x20show\x20dev\x20'+this[_0xab9ec4(0x508)]);console[_0xab9ec4(0x509)](_0xab9ec4(0x294)+_0x15d4d8);let _0x2ef87b=_0x15d4d8[_0xab9ec4(0x2bd)]('\x0a')['find'](_0x2dbd37=>_0x2dbd37[_0xab9ec4(0x267)]('inet6')&&_0x2dbd37['includes'](_0xab9ec4(0x4c5)));if(!_0x2ef87b)throw new Error(_0xab9ec4(0x69a));let _0xffbb49=_0x2ef87b['match'](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0xffbb49)throw new Error('Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address');let [_0x3cd831,_0x3aabaa,_0x554b0b]=_0xffbb49,_0x54069a=Math[_0xab9ec4(0x72b)](Number(_0x554b0b)/0x10),_0x5d49fa=Number(_0x554b0b)%0x10,_0x4740eb=_0x3aabaa['split'](':')[_0xab9ec4(0x388)](0x0,_0x54069a)[_0xab9ec4(0x1b4)](':');if(_0x5d49fa>0x0){let _0x144470=_0x3aabaa[_0xab9ec4(0x2bd)](':')[_0x54069a],_0x5a22b9=0xffff<<0x10-_0x5d49fa&0xffff,_0x4fa4b7=(parseInt(_0x144470,0x10)&_0x5a22b9)['toString'](0x10)[_0xab9ec4(0x446)](0x4,'0');_0x4740eb+=':'+_0x4fa4b7;}this[_0xab9ec4(0x2fd)]=_0x4740eb+':';}catch(_0x2a58f9){console['error'](_0xab9ec4(0x618),_0x2a58f9);}}async['configureIPv6'](_0x215541){const _0x2075c5=a0_0x2101b5;let _0x4746aa='ip\x20-6\x20addr\x20add\x20'+_0x215541+_0x2075c5(0x7eb)+this[_0x2075c5(0x508)];try{await kt(_0x4746aa),console[_0x2075c5(0x509)]('IPv6\x20address\x20configured:\x20'+_0x215541);}catch(_0x4fcea2){console['error']('Error\x20adding\x20IPv6\x20address:\x20'+_0x4fcea2);}}async[a0_0x2101b5(0x7de)](_0x3e3abb){const _0xa72a88=a0_0x2101b5;let _0x2451f2=_0xa72a88(0x2de)+_0x3e3abb+'/64\x20dev\x20'+this[_0xa72a88(0x508)];try{await kt(_0x2451f2),console[_0xa72a88(0x509)](_0xa72a88(0x202)+_0x3e3abb);}catch(_0x48d7b3){console[_0xa72a88(0x3c9)]('Error\x20removing\x20IPv6\x20address:\x20'+_0x48d7b3);}}[a0_0x2101b5(0x5f2)](){const _0x55e660=a0_0x2101b5;return _0x55e660(0x2dd)[_0x55e660(0x869)](/X/g,()=>_0x55e660(0x880)[_0x55e660(0x606)](Math[_0x55e660(0x72b)](Math[_0x55e660(0x78b)]()*0x10)));}[a0_0x2101b5(0x183)](_0x27e289,_0x169ba2){const _0x14fd7c=a0_0x2101b5;let _0x169603=_0x169ba2['split'](':');return _0x169603[0x0]=(parseInt(_0x169603[0x0],0x10)^0x2)[_0x14fd7c(0x60f)](0x10)[_0x14fd7c(0x446)](0x2,'0'),''+_0x27e289+_0x169603[0x0]+_0x169603[0x1]+':'+_0x169603[0x2]+_0x14fd7c(0x5e9)+_0x169603[0x3]+':'+_0x169603[0x4]+_0x169603[0x5];}['generateRandomIPv6'](){const _0x2a84b6=a0_0x2101b5;let _0x2c7e5f=this['ipv6Prefix'];_0x2c7e5f[_0x2a84b6(0x643)](':')||(_0x2c7e5f+=':');let _0x1f3585=this[_0x2a84b6(0x5f2)]();return this[_0x2a84b6(0x183)](_0x2c7e5f,_0x1f3585);}[a0_0x2101b5(0x543)](_0x8f3e3){const _0x2901b7=a0_0x2101b5;return new RegExp(_0x2901b7(0x60a))['test'](_0x8f3e3);}async[a0_0x2101b5(0x5ab)](_0x280202){const _0x249f2e=a0_0x2101b5;let _0x46d185=[{'url':_0x249f2e(0x7bb),'parse':_0xcd072d=>_0xcd072d['ip']},{'url':_0x249f2e(0x654),'parse':_0x2de4d7=>_0x2de4d7['ip']},{'url':_0x249f2e(0x6a6),'parse':_0xb26981=>_0xb26981['trim']()},{'url':_0x249f2e(0x16e),'parse':_0x495fc8=>_0x495fc8[_0x249f2e(0x3f2)]()}],_0x475165=_0x46d185[Math['floor'](Math['random']()*_0x46d185[_0x249f2e(0x608)])];try{let _0x324e5e=await $i[_0x249f2e(0x7ae)]['get'](_0x475165[_0x249f2e(0x52a)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x280202}}),_0x1fa239=_0x475165[_0x249f2e(0x4bc)](_0x324e5e[_0x249f2e(0x1a0)]);return _0x1fa239[_0x249f2e(0x86b)]()===_0x280202[_0x249f2e(0x86b)]()?(console[_0x249f2e(0x509)](_0x249f2e(0x27f)+_0x280202),!0x0):(console[_0x249f2e(0x3c9)]('IP\x20mismatch:\x20configured\x20'+_0x280202+_0x249f2e(0x418)+_0x1fa239),!0x1);}catch(_0x4eb231){return console[_0x249f2e(0x3c9)](_0x249f2e(0x21c)+_0x475165[_0x249f2e(0x52a)]+':\x20'+_0x4eb231[_0x249f2e(0x31f)]),!0x1;}}async[a0_0x2101b5(0x34c)](_0xa6585d,_0x2090de){const _0x3c2dc1=a0_0x2101b5;if(!this[_0x3c2dc1(0x2fd)]||!this['networkInterface'])return console[_0x3c2dc1(0x3c9)]('IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.'),null;let _0x3afd93;do _0x3afd93=this['generateRandomIPv6'](),console[_0x3c2dc1(0x509)]('Generated\x20IPv6:\x20'+_0x3afd93);while(!await this['isValidAndUniqueIPv6'](_0x3afd93));await this[_0x3c2dc1(0x776)](_0x3afd93),console['log'](_0x3c2dc1(0x69e)+_0x3afd93);let _0x315200={'_id':_0xa6585d+'-'+_0x2090de,'ip':_0x3afd93},_0x87bcbd=await this[_0x3c2dc1(0x3a9)][_0x3c2dc1(0x2fb)](_0x315200,_0x315200[_0x3c2dc1(0x1b8)]);return console[_0x3c2dc1(0x509)]('Cache\x20instance\x20update\x20result:\x20'+_0x87bcbd),_0x3afd93;}async[a0_0x2101b5(0x6b0)](_0x1fe8f5){const _0x5f3bd4=a0_0x2101b5;return this[_0x5f3bd4(0x543)](_0x1fe8f5)?!await this[_0x5f3bd4(0x3a9)][_0x5f3bd4(0x505)]({'where':{'ip':_0x1fe8f5}}):!0x1;}async['removeIPv6ById'](_0x5016e2,_0x520e7e){const _0x106b28=a0_0x2101b5;let _0x4dc6f8=_0x5016e2+'-'+_0x520e7e,_0x46a669=await this[_0x106b28(0x3a9)][_0x106b28(0x505)]({'where':{'_id':_0x4dc6f8}});_0x46a669&&_0x46a669['ip']&&(await this[_0x106b28(0x7de)](_0x46a669['ip']),await this[_0x106b28(0x3a9)]['deleteOne']({'where':{'_id':_0x4dc6f8}}));}},Do=new xs(),ae=Do,Fs=a0_0x2101b5(0x1a9),xi,he=null,xa=null,ko=0x3,Lo=null,Ri=S[a0_0x2101b5(0x34a)]('AUTHENTICATION')['API_KEY'][a0_0x2101b5(0x324)],Ai=S[a0_0x2101b5(0x34a)](a0_0x2101b5(0x194));async function Fo(){const _0x31ed41=a0_0x2101b5;let _0x2ab193=await ve[_0x31ed41(0x505)]();he=_0x2ab193?.[_0x31ed41(0x62c)]??null,Lo=_0x2ab193?.[_0x31ed41(0x6f1)]??null,Fs=_0x2ab193?.['connectedClient']??'Safari',xi=_0x2ab193?.[_0x31ed41(0x724)]??B??_0x31ed41(0x6ae);}async function Uo(){await Fo();}function a0_0xfc4a(){const _0x48115d=['getProfileName','):\x20nextBlock.uazapi.name','beautifyWithPlaceholders','mongodb','-whatsapp-api','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','buttons','min','\x0aFN:','messages','exports','):\x20Alterando\x20fluxo...','Falta\x20informação\x20para\x20a\x20chamada\x20API','924StnZDz','start','maxActives','requestFile','configureIPv6','readData','/media','cleanDisconnectedInstances','findOrCreate','apikey','unlinkSync','getMessageModelForOwner','initializeQueue','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','presence','SSL_CONF_FULLCHAIN','eventemitter2','.xls','label','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global','Erro\x20ao\x20buscar\x20o\x20fluxo','trimmed','release','PRODUCT_LIST','random','PRESENCE_UPDATE','LOG','stopConversation','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','Erro\x20ao\x20normalizar\x20a\x20mensagem:','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','/instance','instancias:\x20','Erro\x20ao\x20tentar\x20updateCustomFields','updateMissingEtiquetas','client','deletedCount','presence.update','):\x20Bloco\x20copiado:\x20','.webp','#9ab6c1','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','flattenObject','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','convertaudioMP3','organization','insert','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','editFlowCondition','editChat','whatsappNumbers','flowName','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','toUpperCase','Erro\x20inesperado\x20em\x20processvaredits:\x20','Parando\x20aplicação,\x20atualização\x20recebida','Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo','default','processingGroup','[AUTH]\x20Database\x20is\x20not\x20enabled','nativeFlowMessage','response','[\x20SYSTEM\x20-\x20UAZAPI\x20]\x20-\x20Mensagem\x20perdida,\x20não\x20foi\x20possível\x20descriptografá-la,\x20abra\x20o\x20WhatsApp\x20no\x20seu\x20celular\x20para\x20visualizá-la','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','Erro\x20na\x20função\x20updateChatWithMessage:\x20','existsSync','REDIS_ENABLED','webhookMap','):\x20Conversa\x20atualizada\x20em\x20memória','https://ipv6.jsonip.com','entries','\x20minutos','views','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','Invalid\x20format','Database\x20update\x20result:','writeFileSync','Imagem\x20não\x20encontrada','addBlock','optionDescription','utf-8','buttonText','/events/:instance','statSync','email','shift','errors','.mp4','updateGParticipant','and','child_process','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','keyPattern','Esse\x20fluxo\x20expirou','SERVER','variable','JWT','AddChatLabel','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','messageId','groupToggleEphemeral','VERBOSE','creation','editflowvariable','removeIPv6','awaitingApproval','__esModule','processvaredits','Erro\x20ao\x20importar\x20chats','warn','auth','webhookService','cacheContact','currency',',\x20valor\x20passado:\x20\x22','):Business\x20profile\x20fetched','composing','/64\x20dev\x20','#56ccb4','\x1b[31m%s\x1b[0m','lastReceivedMessage','updateBlock','createConversationforStartFlow','leadInfo','SERVER_TYPE','Erro\x20ao\x20deletar\x20a\x20conversa','instance','moreLogs','#ffc5c7','\x20não\x20encontrado','deleteImportedChat','[all]','request\x20received\x20in\x20starFlow','/instance/connect','cleanStore','contacts.update','wuid','toFile','messageType','https://chat.whatsapp.com/','connectToWhatsapp','getReadyToSendMessages','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','\x1b[34m','Removidas\x20as\x20variáveis:\x20','webp','lowerCase','updateProfilePicture','loadWebhook','\x1b[36m%s\x1b[0m','options','CONTACTS_UPDATE','class-validator','compression','idSchedule','badSession','\x1b[33m%s\x1b[0m','getUpdate','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','https://api.openai.com/v1/images/generations','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','quotedMessage','EMAIL','changeVariables','unlocked','findAndUpdateCacheContact','context','saveChatVariables','!cmd_','createNewConversation','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','):\x20\x27Enviando\x20mídia\x20para\x20\x27','Instance\x20\x22','content','isCommunity','):Notifying\x20clients\x20for\x20chat:\x20','labelId','editFlowBlock','addReplyOption','hGet','RemoveChatLabel','ip\x20-br\x20link\x20show','segundos','pre','readMessages','Nenhum\x20chat\x20encontrado\x20para\x20editar.','processConditionsTest','updateParticipant','Falha\x20ao\x20criar\x20IPv6.','DATABASE_CONNECTION_HOST','router','leadInfo.atendimentoAberto','MESSAGES_UPDATE','\x20segundos\x20antes\x20de\x20reconectar...','):\x20teve\x20mudanças\x20chat.muteEndTime:\x20','Erro\x20ao\x20arquivar\x20chat','expression','agents','\x27\x20não\x20encontrado','Message','reactionMessage','addMessagesToGroup','LICENSE_INVALID','buttonMessage','update','proto','getHours','getTicketSystem','documentWithCaptionMessage','SERVER_OFFLINE','LabelModel','sharePass','connecting','):Image\x20path:\x20',',\x20Minutes\x20to\x20Close:\x20','):Type\x20defined\x20as\x20audio','URL\x20completa:','findIndex','startID','_pushName','-instances','endSession','updateStatusPrivacy','convertedOptions','):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20','):\x20Editando\x20grupo\x20do\x20fluxo...','updateOne',',\x20Novo\x20tamanho:\x20','createGroup','mentions','Group\x20not\x20found','@g.us','scheduleSendMedia','Validate','pictureUrl','integer','Failed\x20to\x20send\x20buttons\x20message','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','lastUpdate','SSL_CONF_PRIVKEY','3055yPovab','request\x20received\x20in\x20scheduleMessage','authentication','replace','mentioned','toLowerCase','stopMinutesMaxActives','ContactModel','/wa-all-message','EXPIRIN_IN','ContactsAndGroups','/events','groupLeave','CHATS_DELETE','API\x20Key\x20from\x20Request:','updateMissingCustomFields','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','updateMany','stateConnection','sendDataWebhook','Comando\x20desconhecido','findConversation','textMessage','STORE_MESSAGE','\x0a{\x20instance:\x20','now','0123456789ABCDEF','fetchInstances','AUTHENTICATION_JWT_EXPIRIN_IN','substring','apiResponse','):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção','):\x20Encontrado\x20próxima\x20mensagem\x20para\x20','model','waitingMenu_ExpiredMessage','namespace','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','contact','Network\x20interfaces\x20detected:\x20','mediatype','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','resetReconnectionVariables','editFlow','error_log','Sem\x20permissão\x20para\x20enviar\x20para\x20esse\x20grupo','audioMessage','[service]\x20request\x20received\x20in\x20sendButtons','chats.update','beforeExit','):\x20Editando\x20condição\x20do\x20fluxo...','sendMessage','connectionUpdate','rows','indexOf','name','Conexão\x20estabelecida','dbClient','@whiskeysockets/baileys','This\x20name\x20','webhook','groupAcceptInvite','):\x20leadInfoVariables','conversationTimestamp','URL\x20não\x20disponível','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','font','HH:mm:ss','timeInMinutes','\x1b[41m','fullName','label_jid','waitingForReplyMenu','\x20depois\x20','groupFetchAllParticipating','contacts.upsert','getStatus','sendList','fileName','flowConfig','/exit','):\x20Deletando\x20mensagem',',\x20global:\x20','GUARD','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','Erro\x20ao\x20buscar\x20fluxos:','fetchLabels','getTime','username','superadmin','this.reconnectAttempts:\x20','?authSource=admin&readPreference=primary&directConnection=true','customFields','connectToWhatsappController','GROUP_PARTICIPANTS_UPDATE','findMessages','set','#83e421','tags','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','STORE','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','):\x20Entrou\x20na\x20função\x20clearVariables','upsertChats','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','\x20minutos.\x20Será\x20às\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture','convert','atendimentoAberto','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','flows','deleteFlow','getPrototypeOf','flush','replaceOne','array','pt-BR','groupUpdateSubject','groupName','Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups','format','key','instances','updateMessage','chatHandle','boolean','count','lastBlockId','Erro\x20ao\x20buscar\x20a\x20conversa','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','fetchProfilePicture','Falha\x20ao\x20processar\x20a\x20solicitação','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','status@broadcast','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.','matchRegex','quick_reply','request\x20received\x20in\x20updateCustomFields','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','updateGroupWebhook','Type\x20not\x20found','notEqual','groupGetInviteInfo','Instance\x20Key\x20from\x20DB:','\x20inseridas\x20no\x20banco\x20de\x20dados...','muteEndTime','\x20:\x20','retrySendMessage','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','Erro\x20ao\x20aplicar\x20varedit:\x20','groupSettingUpdate','https://v6.ident.me','application/json','contactHandle','AppStateSyncKeyData','synchronizeAndMapFlows','instanceInfo','sectionsToString','/automate','):\x20Query\x20params:\x20','downloads','Type\x20is\x20required','color','number','detectIPv6PrefixAndInterface','fakeReceived','enumerable','static','messages.set','getSeconds','DB_PREFIX_NAME','created','ip6eui','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','\x20do\x20chat\x20','all','):\x20Enviando\x20localização','END:VCARD','updateLastSeenPrivacy','):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20','online','stickerMessage','MessageModel','\x1b[33m\x1b[1m','FlowController','\x22\x20-\x20REMOVED','block','320453KiBWJK','findParticipants','PROXY','\x20-i\x20','):Delete\x20chat','_second','execSync','mimetype','view\x20engine','dropIndex','params','):\x20Limpando\x20AutomateSystem','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','/instance/create','data','licenca','LEVEL','type','app','Partes\x20do\x20domínio:','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','CORS_ORIGIN','findAll','Safari','Erro\x20ao\x20encerrar\x20a\x20API','):\x20Error\x20processing\x20conditions:\x20','groups','numbers','):Fetching\x20business\x20profile','editScheduleMessage','whoCanEdit','_lastVote','userDevicesCache','notMatchRegex','join','@s.whatsapp.net','routerPath','ReplyOption\x20com\x20ID\x20','_id','text','sim','\x1b[31m','collection','Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:','Grupo\x20não\x20encontrado','deleteDoneMessages',',\x20resultado:\x20','):\x20Há\x20mensagens\x20prontas,\x20limpando\x20e\x20adicionando\x20à\x20fila','myAppStateKeyId','button','removeIPv6ById','.docx','remove','USER','allflows','reconnectAttempts','fetchStatus','write','editMessagesInGroup','_activedCount','creds.json','capitalizedWords','\x0aitem','profilePicture','getLastMessage','awaitSeconds','):\x20conversation.lastInteraction:\x20','validate','thumbnailUrl','console','toLocaleString','uazapiDeleteMessage','varedit','.xlsx','/message','ERROR','realVariables','updateGroupParticipantsWebhook','CONTACTS_SET','catch','ListType','readFileSync','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','leadInfo.desativadoFluxoAte','The\x20global\x20api\x20key\x20must\x20be\x20set','):\x20updateResult:','evaluateConditionTest','\x20quoted:\x20','archived','Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20','fora\x20do\x20git','formatBRNumber','contactMessage','last_update','unhandledRejection','.url','truncatedto','connection.update','cachedContacts-whatsapp','inner','processReadyMessages','request_method','pairingCode','updateProfileStatus','hSet','Instance\x20deleted','parseInt','bodyString','mediaMessage','automateSystem','processUazapi','vcard','IPv6\x20address\x20removed:\x20','/wa-contacts','path','findGroupsEspecial','fromObject','RECONNECT_TIME_FRAME','sendPoll','groups.upsert','isCommunityAnnounce','removeUnusedChatFields','findChats','groupValidate','pollCreationMessageKey','hbs','):\x20Entrou\x20na\x20função\x20goToFlow','\x1b[1m','qrcode','globalShow','drop','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','replaceValue','redirect','conversation','updateAll','descOwner',',\x20pairCode:\x20','Error\x20testing\x20IP\x20with\x20','HOST','Erro\x20ao\x20atualizar\x20AutomateSystem:','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','saveCreds','sendReaction','groupHandler','.webm','@redis/client','editOperator','applyvaredit','editflowreply','Botão\x201','delayChatLabel_RETRY_DELAY_MS','DEBUG','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','subject','joinGroup','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','sendText','api','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','\x27\x20removido\x20do\x20AutomateSystem.','Falha\x20ao\x20processar\x20fetchBusinessProfile','folder','owner','Internal\x20Server\x20Error','\x20mensagens\x20de\x20','/wa-connection-update','}}\x20->\x20valor\x20não\x20encontrado','DisconnectReason','Resultado\x20da\x20correspondência\x20de\x20URL:','startCommand','MESSAGES_UPSERT','minutesToClose','):\x20Buscando\x20todos\x20os\x20fluxos...','logger','CHATS_UPSERT','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','saveMediaToFile','express-async-errors',']\x20(','cpf','fone','events','apply','Nenhum\x20chat\x20fornecido\x20para\x20inserção.','Error\x20parsing\x20JSON:','profile','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc','viewOnceMessage','nomecompleto','insertMany','fileUrl','deleteflow','triedToSend','done','fetchMessages','replyOptions','uazapiSendText','templateButtonReplyMessage','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','WA\x20MODULE','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','revokeInviteCode','TEL','Not\x20Found','mkdirSync','):\x20Criando\x20fluxo\x20compartilhado...','Instâncias\x20removidas:\x20','fetchChats','isLong','_FlowHistorico','gifPlayback','startFlow','includes','recording','latitude','getConversationModelForOwner','Nenhum\x20participante\x20válido\x20encontrado.','groupMemberAddMode','\x1b[32m%s\x1b[0m','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','ini','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact','PLAYED','\x5cd+','condition','removeData','):\x20\x27Deletando\x20fluxo,\x20id:\x20','#ff9484','local_map','):\x20Query\x20params:','\x1b[37m%s\x1b[0m','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','SERVER_ACK','.error','\x1b[32m','padEnd','IP\x20confirmed:\x20','updateChatWithMessage','isBusiness','setContext','):Image\x20is\x20url','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','filter','eventEmitter','Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.','allContacts','extractPhoneNumber','preview','createJid','extractMessageContent','\x5c$&','updateOnlinePrivacy','clear','/wa-qrcode','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','/config','state','IPv6\x20addresses\x20detected:\x20','):\x20Entrou\x20na\x20função\x20saveReply','5638068SBeYev','_p_','STORE_CLEANING_TERMINAL','digest','862312aibZfd','updateMediaMessage','groupId','messageLogs','success','ms\x20(tentativa\x20','):\x20Buscando\x20flow,\x20id:\x20','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.','selectableCount','Esse\x20fluxo\x20não\x20permite\x20importação.','updateReadReceiptsPrivacy','when','limit','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','reduce','push','LOG_COLOR','body','nome','CLEANING_INTERVAL','express','#ffffff','):\x20Going\x20to\x20','updateGroupPicture','restrict','false','statusJidList','Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','goToFlow','importChatsAntigo','):Image\x20is\x20base64','getChatModelForOwner','):\x20whoCanUse\x20before\x20validation:\x20','logout','split','_activatedCount','StartBot','groupadd','sendContact','\x27...','Failed\x20to\x20prepare\x20media\x20message','image','group-participants.update','Selecione','Error\x20removing\x20unused\x20chat\x20fields:','oldValue','hGetAll','):\x20Buscando\x20conversa...','AUTHENTICATION_JWT_SECRET','.\x20Aguardando\x20','leadInfo.etiquetas','startCommandWord','selectedRowId','uazapiSendAudio','clearVariables','sendPresenceUpdate','delaySecMin','):Image\x20converted\x20to\x20WebP','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','getBase64FromMediaMessage','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','):\x20Editando\x20edição\x20do\x20fluxo...','variables','Content-Type','\x20Tentativa\x20de\x20reconexão\x20','XX:XX:XX:XX:XX:XX','ip\x20-6\x20addr\x20del\x20','API_KEY','Error\x20in\x20prepareMediaMessage:','):\x20Editando\x20replyOption...','sendMenu','CORS_CREDENTIALS','message_normalized','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','Subdomínio\x20extraído\x20da\x20URL:','findGroupInfo','):\x20tem\x20blocks','createFlow','updateReplyOption','joinApprovalMode','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','onTime','createConversationforgoToFlow','/:instanceName','envProcess','apirequest','\x1b[30m','):Delete\x20chat\x20in\x20client\x20for\x20number:\x20','shareOwners','messagesLogs','SECRET','Mensagens\x20deletadas\x20com\x20sucesso.','isConnected','scheduleSendAudio','waitingMenu_replyOptions','createOrUpdate','stopMinutes','ipv6Prefix','remote\x20\x22origin\x22','):\x20Ignoring\x20group\x20messages.','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','https://uazapi-plugin.bubbleapps.io/?url=','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','Erro\x20ao\x20deletar\x20mensagens:','sort','getBusinessProfile','Partes\x20do\x20caminho\x20FULLCHAIN:','getOwnPropertyNames','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','sendMessageAck','notas','instanceKeys','string','Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.','messageHandle','Adicionando\x20novo\x20participante:\x20','Error\x20in\x20chatModify\x20for\x20number\x20','fetchLatestBaileysVersion','.ppt','request\x20received\x20in\x20editFlow','Subdomínio\x20não\x20encontrado','LOG_LEVEL','normalizeMessage','instanceCount','):\x20Buscando\x20flow...','Rótulo\x20deletado:\x27,\x20','ScheduleMessageModel','ephemeralDuration','messageStubParameters','message','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','valid','data:\x20','quoted','KEY','addresss','Error\x20fetching\x20group','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','Não\x20respondeu\x20com\x20a\x20enquete.','/webhook',',\x20valor\x20a\x20encontrar:\x20\x22','authState','flushHeaders','exit','vote','updateCustomFields','getFlow','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','messages.upsert','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','send','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','TYPE','lastMessage','Erro\x20ao\x20alterar\x20fluxo','audio/ogg;\x20codecs=opus','):\x20Enviando\x20áudio','messageLogsModel','Rótulo\x20inválido\x20ou\x20sem\x20ID.','):\x20não\x20encontrou','):\x20','request\x20received\x20in\x20updateAutoCompleteMessages','instance.','arraybuffer','):\x20Removendo\x20\x27','info','lastSendMessage','scheduleNextCheck','AUTHENTICATION_API_KEY','blockLogs','URL','get','waInstances','createIPv6','Module\x20-\x20ON','isJidBroadcast','stopWhenYouSendMsg','has','createHash','status','Flow\x20\x27','):\x20Enviando\x20mídia','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','All_Instances_Config','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','basename','Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20','):\x20Fluxo\x20\x27','Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27','list2','RemoteJid:','headers','convertaudio','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','cache','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','videoMessage','):\x20lastBlockId:\x20','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','#fe9dfe','\x20contacts','_Messages','cwd','$dbName','Erro\x20ao\x20alterar\x20privacidade','out','replaceVariablesChat','protocolMessage','Read\x20messages','sign','Not\x20is\x20business\x20profile','footer','updateFlowConfig','debug','):\x20delete\x20=\x20true','):Error\x20in\x20converting\x20audio','subjectTime','reconnectTimestamps','):\x20whoCanUse\x20after\x20validation:\x20','deleteInstance','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','process','address','getDevice','sections','request\x20received\x20in\x20editFlowvariable','):\x20Não\x20achou\x20nenhum\x20flow','status.instance','bodyStringErrorParse','node-mime-types','editFlowGroup','slice','Last\x20message\x20not\x20found\x20for\x20number:\x20','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','Erro\x20ao\x20adicionar\x20label\x20','\x20and\x20data:','startFlowWebhook','):\x20Conversa\x20inserida\x20com\x20sucesso.','removed','off','temp-','website','\x1b[36m','backgroundColor','loadEnv','interactiveMessage','promote','findLabels','flow','isJidGroup','Authentication\x20error','pendingMessages','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','uncaughtException','no.connection','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','editFlowReply','uuid','\x20\x1b[0m','initAuthCreds','processScheduleFlow','admin_add','qrcode-terminal','setHeader','cacheInstanceRepository','checkAndRestartProcess','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','Subdomínio\x20final:','js-yaml','isRunning','save','InstancesAlterarTodas','phoneNumber','video-cover.png','action','Database\x20connection\x20closed.','Font\x20is\x20required','code','conditions','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','WARN','):Hash\x20to\x20image\x20name:\x20','desc','importChats','labels.edit','end','readMessageBot','buttonParamsJson','editedMessage','enviado\x20para','SINGLE_SELECT','getOwnPropertyDescriptor','updateProfilePicturePrivacy','selectedId','connectionStatus','error','delayMessage','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','https://api.elevenlabs.io/v1/text-to-speech/','_minute','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','removeInstance','.ogg','pushName','remove.instance','deleted','desativadoFluxoAte','Detalhes\x20do\x20erro:','.ogv','editFlowVariable','[TESTE\x20RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','CONTACTS_UPSERT','/wa-chats','ObjectId','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','\x0a*Você\x20respondeu*:\x0a','INFO','rowId','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','Missing\x20global\x20api\x20key','util','):\x20transformedCustomFieldVariables','Usando\x20IP\x20existente:\x20','Garbage\x20collection\x20não\x20está\x20disponível.','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','groupdata','Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral','fetchPrivacySettings','PREFIX_KEY','lastRealGroupsFetch','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','apiName','pollMessage','groupCreate','labels.association','less','trim','equal','processgoToFlow','\x22,\x20valor\x20a\x20substituir:\x20\x22','isAdmin','deleteAll','Erro\x20ao\x20atualizar\x20agendamento\x20','fileLength','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName','dataValidate','hDel','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','@broadcast','_sender','createAndSave','/*.json','Variáveis\x20não\x20encontradas:','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus','menu_options','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','cachedContact','formatStatusMessage','https://api.ipify.org?format=json','updateChatGroupData','autoCompleteMessages','statusMessage','$pull','getDelay','toggleEphemeral','evaluateCondition','):\x20isVote:\x20','):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!','msgRetryCounterCache','isArray','hasOwnProperty','chats','last','stopped',',\x20received\x20','imagechat','urlencoded','pollUpdateMessage','messageSecret','stringify','generate','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','getLabelModelForOwner','.X-ABLabel:Celular\x0a','updateMissingTags','):\x20Mensagem\x20já\x20enviada\x20para\x20','approve','chatId','available','Db\x20Connection','uazapiSendContact','Error\x20updating\x20message\x20status:','chats.set','3088167QAuSqg','contacts','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','listMessage','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','request\x20received\x20in\x20allFlows','):Temp\x20image\x20deleted','ephemeralExpiration','Falha\x20ao\x20recriar\x20IPv6.','Pausado\x20por\x20','http://checkip.dyndns.org','FULLCHAIN','^\x5cd+','MAX_SAFE_INTEGER','Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.','promisify','repository','command','?timestamp=','request\x20received\x20in\x20createFlow','imgUrl','notContains','getScheduleMessageModelForOwner','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','delaySecMax','):\x20Procurando\x20PRONTAS\x20mensagens\x20para\x20envio','padStart','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','):\x20atualização\x20chat:\x20','dbConnection','http','saveTextReply','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','request_time','):\x20Falha\x20ao\x20deletar\x20mensagem.','getClient','jsonwebtoken','deleteMessage','Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos','redisEnv','modifiedCount',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','groupRequestParticipantsUpdate','CREDENTIALS','updateStopChat','role','):Getting\x20image\x20from\x20url','imageMessage','findGroup','repeat','senderKeyDistributionMessage','):\x20Grupo\x20','STATUS_INSTANCE','generateWAMessageFromContent','leadInfo.','ScheduleMessage','https://','delayChatLabel','downloadMediaMessage','):\x20Ler\x20mensagem','./.git/config','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','Filtered\x20network\x20interfaces:\x20','post','isInteger','sticker','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','value','groupUpdateDescription','createInstance','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','Error\x20writing\x20file:\x20','getAutomateSystem','\x20com\x20sucesso.','isListOfNumbers','lastSend','.mimetype','replaceVariablesInObject','messaging-history.set','node-cache','\x20ao\x20chat\x20','p-queue','del','replacer','Chat\x20com\x20ID\x20','):\x20whoCanEdit\x20after\x20validation:\x20','values','qrcode.updated','Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.','admin','):\x20Flow\x20\x27','replyOption','restart','stdout','getScheduleMessage','Network\x20Interface\x20detected:\x20','autoCompleteMessages.command','request\x20received\x20in\x20getConversation','json','editflowgroup','AUTHENTICATION_TYPE',',\x20canSendMessage:\x20','video','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','firstValue','stderr','leaveGroup','\x20minutos\x20verificará\x20novas\x20mensagens','*Pergunta*:\x20\x0a','messageContextInfo','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','exec','getMinutes','spawn','originalUrl','unavailable','_remoteJid','):Desconectado,\x20parando\x20execução.','):Image\x20created','\x1b[43m','cta_url','blocks','contains','etiquetas','instanceName','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.',',\x20Expiration\x20Time:\x20','getContentType','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','Erro\x20ao\x20editar\x20a\x20conversa','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','contactsArrayMessage','findGroupInfos','memberAddMode','READ','hex','\x20-\x20ON:\x20','request\x20received\x20in\x20deleteConversation','):\x20Criou\x20conversa\x20no\x20startFlow','pollCreationMessageV3','URL:','--------------------------------------','user','parse','flowConversation','No\x20suitable\x20network\x20interface\x20found','):\x20enviado\x20para\x20[','getUniqueFlowName','reorderMessages','):\x20debug\x20alterando\x20this.AutomateSystem','allFlows','Types','global','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','menuMessage','Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage','updateConversation','getMessage','\x20removido\x20do\x20chat\x20','):\x20Limpando\x20delayMessage','\x20}\x0a','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','):including\x20timestamp\x20in\x20url:\x20','Deletion\x20failed','unreadcount','deviceSentMessage','):\x20Iniciando\x20processReadyMessages','enabled','dbSettings','findWebhook','getContactModelForOwner','lastFetchAwaitingApproval','processawaitSeconds','creds','https://jsonip.com','request\x20received\x20in\x20deleteFlow','imported','Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20','readFile','addChatLabel','remoteJid','connect','defineAuthState','/wa-message','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','PASSWORD','varedits','.extension','Limpando\x20logs\x20do\x20PM2...','cacheInstanceModel','createWebhook','\x1b[46m','testingWith','DARK','):\x20alterando\x20this.AutomateSystem','fromMe','whoCanUse','scheduleSendText','Error\x20updating\x20cache\x20contact:','isJidUser','SSL_CONF','media','\x1b[1m\x1b[37m','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','headerString','FlowRouter','):\x20\x27Enviando\x20texto\x20para\x20\x27','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','findById','list','):Converted\x20image\x20deleted','Instância\x20não\x20encontrada.','reject','some','variablesToObject','DELETED','findOne','groupRequestParticipantsList','ignoreGroups','networkInterface','log','privacySettings',',\x20fará\x20nova\x20verificação\x20em\x20','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','crypto','from','groupDesc','_day','utf8','findContacts','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','editflowblock','updatePrivacySettings','SEND_MESSAGE','scheduled','interval\x20não\x20é\x20um\x20número','prototype','header','/wa-presence','uazapiSendMedia','pino','readMessage','env','formatVCard','Valor\x20inicial:\x20\x22','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','#01d0e2','NextBlock','DOCKER_ENV','replaceVariablesInReplyOptions','public','Bad\x20Request','url','pollCreationMessage','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp','editflow','timeout','\x20segundos','https://uazapi-plugin.bubbleapps.io/','inviteUrl','AUTHENTICATION','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','updateGParticipate','writeFile','copyBlock','lastInteraction','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo','sendAudio','Erro\x20ao\x20remover\x20label\x20','yes','toNumber','request\x20received\x20in\x20editFlowgroup','uazapiSendMenu','getValidWhatsAppNumbers','viewOnceMessageV2','sending','next_groupId','isValidIPv6Config','createServer','AutomateSystem\x20não\x20foi\x20inicializado','extractRegex','reference','):\x20Label\x20','scheduleMessage','):Archiving\x20chat','messages.update','Erro\x20ao\x20atualizar\x20cacheInstance:','setUpdate','.svg','Sistema\x20atualizado\x20com\x20sucesso!','Erro\x20ao\x20copiar\x20o\x20documento','Error\x20in\x20buttonsMessage\x20function:','181134WttriQ','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20','stanzaId','groupMetadata','demote','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','groupBetterSetting','/startFlow/:instance/:startID','delAll','greater','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','/instance/connectionState','sendMedia','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20',',\x20Comparador:\x20','SendScheduleMessage','chats.delete','processclearVariables','announcement','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','sendMessageWithTyping','activatedCount','):\x20Conversa\x20está\x20expirada','query','whatsappNumber','Instance\x20restarted','/instance/fetchInstances','GROUPS_UPDATE','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','storePath','bateu\x20events','updateAgent','\x20não\x20encontrado\x20para\x20cópia','rm\x20-rf\x20','mongodb://','CORS','Primeiro\x20Valor:\x20','):\x20Entrou\x20na\x20função\x20stop','):\x20Usando\x20extensão\x20padrão:\x20','lastCondition','delete','Retornando\x20grupos\x20SEM\x20cache','binary','newStoppedUntil','PORT','collections','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','request\x20received\x20in\x20deleteDoneMessages','toBRL','close','Nenhum\x20fluxo\x20correspondente\x20encontrado.','cacheContactModel','):\x20this.client.authState.creds?.myAppStateKeyId:\x20','Router','audioWhatsapp','Contacts\x20not\x20found','true','):\x20Rótulo\x20atualizado:\x20','groupSetting','archive','jid','*Teste\x20de\x20Título*\x0a\x0aDescrição\x20de\x20Teste\x0a','QRCODE_UPDATED','):\x20Procurando\x20conversa','urlOrBase64','.fileUrl','/media/','configService','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','emit','Conversa\x20deletada\x20com\x20sucesso.','keys','sleep','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','sha256','.jwt','locationMessage','https://api.openai.com/v1/audio/speech','author','convertToString','noConnection','telefone','.mp3','use','Erro\x20ao\x20iniciar\x20fluxo:\x20','Connection\x20closed\x20for\x20instance:\x20','.wav','archiveChat','testIPv6','fetchProfile','goNextblock','updateAutoCompleteMessages','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','listType','DATABASE','chat','oldToken','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','request\x20received\x20in\x20getAutomateSystem','findAndReplaceRegex','createButtonsFromValues','sendSticker','Selecione\x20uma\x20opção','sendButtons','BufferJSON','):\x20Mensagens\x20PRONTAS\x20para\x20envio\x20encontradas:\x20','COLOR','randomBytes','transformScheduledMessagesByType','groupJid','Cache-Control','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','Close\x20connection','then','_Contacts','#00a1f2','setting','upperCase','GROUPS_UPSERT','Atualização:\x20','):\x20Fluxos\x20não\x20estão\x20ativados','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','dbServer','E-mail:\x20','#64c4ff','paused','call','#9ba6ff','AddUserFlow','pollErrorMessage','importChatsBatch','saveConversationToDatabase','verifiedName','group','pow','\x1b[0m','put','statusCode','):\x20error:\x20','findOneAndUpdate','fetchContacts','CONNECTION_UPDATE','171pyhEVy','authModel','selectedDisplayText','qrCode','\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','map','findByIdAndUpdate','isBase64','ff:fe','getConversation','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','):\x20Conversa\x20está\x20expirada\x20-\x20voto','_hour','autoCompleteMessages.command_1','request\x20received\x20in\x20fetchConversation','responsavelid','Rodapé\x20de\x20Teste','randomMac','decryptPollVote','chats.upsert','DATABASE_CONNECTION_URI','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','MESSAGES_SET','sendWhatsAppAudio','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture','Unauthorized','useMultiFileAuthState','):Processing\x20audio','poll','Background\x20color\x20is\x20required','request\x20received\x20in\x20editConversation','forEach','findFlow','round','authorization','find','single_select','charAt','mongoose','length','content-type','^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$','dayjs','isJWT','displayName','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','toString','dark','profileName','eventHandler','participants','editflowcondition','):\x20customFieldVariables','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo','):\x20Current\x20Time:\x20','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','descId','REDIS','reaction','pollMessageOnDelete','groups_ignore','pop','match_last_seen','participant','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','base64','buffer','no-cache','fetchBusinessProfile','Instance\x20Name:','verifyWhatsAppNumber','isBusinessInstance','groupJoinApprovalMode','closed','WebhookGlobal','option','webhookModel','setRestartTimeout','URI','request\x20received\x20in\x20updateAgent','request\x20body:\x20','):Audio\x20converted\x20and\x20stored\x20in\x20cache','Erro\x20ao\x20buscar\x20conversas','createButtonSectionsFromValues','CHATS_SET','menuIgnoreNonVotes','document','File\x20written\x20to\x20path:\x20','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','\x20is\x20already\x20in\x20use.','loadInstance','Falha\x20ao\x20processar\x20a\x20solicitação\x20findRealGroups','envYaml','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','endsWith','presenceSubscribe','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','messageTimestamp','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','3EB0','AutomateFunctions','Error\x20fetching\x20and\x20updating\x20profile:\x20','ConversationModel','delay','):\x20Enviando\x20contato','method','):\x20Criando\x20nova\x20conversa[createNewConversation]','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','cors','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','https://api64.ipify.org?format=json','AutomateSystem','CONNECTION','IPv6\x20recriado\x20após\x20falhas\x20de\x20reconexão.','Erro\x20ao\x20deletar\x20chat:','\x20não\x20encontrado\x20para\x20atualização.','#d3a91f','):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20','none','Bloco\x20com\x20ID\x20','create','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','birthtime','\x1b[37m','CHATS_UPDATE','encoding','order','removeProfilePicture','findMany','verbose','connectionState','sendStatus','findRealGroups','match','Last\x20message\x20not\x20found','documentMessage','deleteOne','joinGroupValidate','unreadCount','):\x20whoCanEdit\x20before\x20validation:\x20','function','waUploadToServer','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','empty','):\x20Iniciando\x20bot...','ChatRouter','blockId','uazapiSendLocation','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','reorderBlocks','title','waMonitor','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','SUCCESS','display_text','waitingMenu_id','sendLocation','Fluxos\x20não\x20estão\x20ativados','flowIgnoreGroups','\x20chats\x20de\x20','secondValue','canSendMessage','DATABASE_CONNECTION_PASSWORD','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','startsWith','DATABASE_CONNECTION_DB_PREFIX_NAME','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','interactiveResponseMessage','\x27\x20não\x20encontrado\x20na\x20memória','Botão\x202','deleteMany','scheduleFlow','deleteConversation','menuType','defineProperty','METHODS','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.',',\x20qrcodeCount:\x20','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','):\x20teve\x20mudanças\x20chat.archived:\x20','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','markMessageAsRead','Erro\x20de\x20atualização:\x20','object','Configured\x20IPv6:\x20','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','updateProfileName','getFullYear','deleteBlock','Erro\x20ao\x20tentar\x20autoCompleteMessages','7213220PABDNj','50mb','https://ifconfig.me/ip','redis','makeCacheableSignalKeyStore','Connection','):\x20Editando\x20mensagens\x20no\x20grupo...','bearer','):\x20Atualizando\x20status\x20da\x20mensagem\x20','proxy:\x20','uazapi','groups.update','isValidAndUniqueIPv6','assign',',\x20Resultado:\x20','readreceipts','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','.png','flowStopConversation','/wa-groups','OrAnd','):\x20Chat\x20','Retornando\x20grupos\x20COM\x20cache','createSectionsFromValues','groupInviteCode','caption','menuExpiredMessage','):\x20Enviando\x20texto','updateGroupsAddPrivacy','processApiRequest','variablesNotFound','test','Stack\x20trace:','add','Enter\x20a\x20value\x20in\x20milliseconds','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','Schema','undefined','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20','expiration','_Labels','splice','silent','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','processConditions','$set','updateOneById','):\x20\x27Enviando\x20audio\x20para\x20\x27','output','optionName','deleteChat','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','audio','#000000','notify','Erro\x20ao\x20editar\x20agentes','[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache','Erro\x20ao\x20atualizar\x20o\x20flow.','exists','.jpg','Flow\x20iniciado\x20com\x20','):\x20Entrou\x20na\x20função\x20processawaitSeconds','normalizeMessageContent','Subdomínio\x20extraído\x20do\x20caminho\x20SSL:','_ScheduleMessages','API\x20Key\x20inválida.','DD/MM\x20HH:mm:ss','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.','announce','Erro\x20ao\x20buscar\x20Schedule\x20Messages','!stop','delayChatLabel_MAX_RETRIES','replaceVariables','editFlowVaredit','groupParticipantsUpdate','PENDING','DaysToDelete','keep-alive','pollOnReplyDelete','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','ENABLED','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','description','/group','linkPreview','):\x20Flow\x20desativado','locked','SERVER_PORT','${Message\x20absent\x20from\x20node}','findManyByIds','mediaSticker','writeData','StartID:','where','findAndReplace','insertCount','reorderReplyOptions','):\x20Procurando\x20mensagens\x20para\x20envio','Erro\x20ao\x20substituir\x20variáveis\x20para\x20','\x22\x20not\x20found','closeExistingConversations','sendMessageWithTypingButtons','convertToWebP','):\x20Entrou\x20na\x20função\x20scheduleFlow','prepareMediaMessage','The\x20property\x20cannot\x20be\x20empty','lean','inviteCodeDetails','fetchConversation','_error','editConversation','deleteReplyOption','height','ListMessage','app-state-sync-key','inviteCode','isURL','listResponseMessage','.type','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','localWebhook','open','#d8e651','replaceVariablesLogs','choices','Erro\x20desconhecido\x20ao\x20tentar\x20enviar\x20mensagem\x20para\x20o\x20grupo','Variável\x20não\x20encontrada!','connectedName','Fluxo\x20não\x20encontrado\x20na\x20memória.','bulkWrite','):\x20Deletando\x20conversa...','profilePictureUrl','remoteJids',',\x20isAdmin:\x20','floor','refused','send.message','shareFlow','Falhou\x20ao\x20encontrar\x20chat\x20','application/octet-stream','singleSelectReply','/wa-message-update','truncatedtoEnd','throwAndLogError','):\x20Instancia\x20isBusiness:\x20','longitude','axios','contact_blacklist','\x20instance\x20does\x20not\x20exist','restartInstance','cleaningUp','queue','Erro\x20ao\x20editar\x20o\x20chat','updatePresence','Erro\x20ao\x20criar\x20fluxo','listen','footerText','The\x20instance\x20needs\x20to\x20be\x20disconnected','dbInstance','findGroups','):\x20expirationTime:\x20','):\x20Bloco\x20com\x20ID\x20','https','contextInfo','Novo\x20IP\x20criado:\x20','sem\x20texto\x20na\x20mensagem','Flow\x20iniciado','toBrazilianNumberFormat','leadInfo.customFields','Deleted\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture','saveVariable','finish',',\x20saindo.','createConnection','chatLog','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','#6f7bcf','generateHash','processblock','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','$addToSet','g-t','pollCreationMessageV2','mediaKey','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','getAllData','waitingMenu_text','getVariablesChat','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','max','reviver'];a0_0xfc4a=function(){return _0x48115d;};return a0_0xfc4a();}Uo();var Lt={},$e=class u{constructor(_0x2bff2f,_0x57387b,_0x9ffd12){const _0x170cb3=a0_0x2101b5;this[_0x170cb3(0x596)]=_0x2bff2f,this[_0x170cb3(0x286)]=_0x57387b,this[_0x170cb3(0x43b)]=_0x9ffd12,this['AutomateSystem']=null,this[_0x170cb3(0x240)]=new $(u[_0x170cb3(0x89c)]),this[_0x170cb3(0x7f4)]={},this['localWebhook']={},this['stateConnection']={'state':'close'},this[_0x170cb3(0x570)]=(0x0,j['join'])(le,_0x170cb3(0x177)),this[_0x170cb3(0x412)]=new Ls[(_0x170cb3(0x7ae))](),this[_0x170cb3(0x1b2)]=new Ls[(_0x170cb3(0x7ae))](),this[_0x170cb3(0x853)]=!0x1,this['webhookMap']={'status.instance':_0x170cb3(0x238),'connection.update':_0x170cb3(0x238),'qrcode.updated':_0x170cb3(0x290),'messages.upsert':_0x170cb3(0x4e4),'send.message':'/wa-message','messages.update':_0x170cb3(0x732),'group.upsert':_0x170cb3(0x6b7),'group.update':_0x170cb3(0x6b7),'group-participants.update':_0x170cb3(0x6b7),'messages.set':_0x170cb3(0x86e),'contacts.set':'/wa-contacts','contacts.upsert':'/wa-contacts','contacts.update':_0x170cb3(0x203),'presence.update':_0x170cb3(0x51c),'chats.set':'/wa-chats','chats.update':_0x170cb3(0x3da),'chats.upsert':'/wa-chats','chats.delete':'/wa-chats'},this['reconnectAttempts']=0x0,this[_0x170cb3(0x379)]=[],this[_0x170cb3(0x207)]=0xea60,this[_0x170cb3(0x3ae)]=!0x1,this[_0x170cb3(0x153)]={'chats.upsert':async(_0x1efc6c,_0xea909d)=>{const _0x1c8b3e=_0x170cb3;let _0x594558=[];for await(let _0x44a955 of _0x1efc6c)_0x594558[_0x1c8b3e(0x2a9)]({'_id':_0x44a955['id'],'owner':this['instance'][_0x1c8b3e(0x7fe)],'group':_0x44a955['id']['endsWith'](_0x1c8b3e(0x85d)),'name':_0x44a955[_0x1c8b3e(0x89c)]||_0x44a955[_0x1c8b3e(0x60d)]||null,'contactname':null,'lastmsg':_0x44a955[_0x1c8b3e(0x8a4)]&&_0x44a955[_0x1c8b3e(0x8a4)][_0x1c8b3e(0x60f)]()[_0x1c8b3e(0x608)]<0xd?_0x44a955['conversationTimestamp']*0x3e8:_0x44a955['conversationTimestamp']||null,'archived':_0x44a955[_0x1c8b3e(0x1ea)]||!0x1,'unreadcount':_0x44a955[_0x1c8b3e(0x670)]||0x0,'ephemeralExpiration':_0x44a955[_0x1c8b3e(0x432)]||0x0});this[_0x1c8b3e(0x879)](_0x1c8b3e(0x5f4),_0x594558);},'chats.update':async(_0xec702f,_0x31bb3a)=>{const _0x42f5fc=_0x170cb3;for(let _0x17f1ee of _0xec702f){let _0x59fa77={'_id':_0x17f1ee['id'],'owner':this[_0x42f5fc(0x7f4)]['wuid'],'archived':_0x17f1ee['archived'],'muteEndTime':_0x17f1ee[_0x42f5fc(0x168)],'ephemeralExpiration':_0x17f1ee[_0x42f5fc(0x432)]},_0x5934bc=!0x1,_0x164ccc={};_0x59fa77[_0x42f5fc(0x1ea)]!=null&&(this[_0x42f5fc(0x240)][_0x42f5fc(0x667)](this[_0x42f5fc(0x4a8)]+'\x20('+this['instance'][_0x42f5fc(0x7fe)]+_0x42f5fc(0x699)+_0x17f1ee['id']+'\x20:\x20'+_0x17f1ee[_0x42f5fc(0x1ea)]),_0x5934bc=!0x0,_0x164ccc['archived']=_0x17f1ee['archived']),_0x42f5fc(0x168)in _0x17f1ee&&(this[_0x42f5fc(0x240)][_0x42f5fc(0x667)](this[_0x42f5fc(0x4a8)]+'\x20('+this['instance'][_0x42f5fc(0x7fe)]+_0x42f5fc(0x838)+_0x17f1ee['id']+'\x20:\x20'+(_0x17f1ee[_0x42f5fc(0x168)]??'0')),_0x5934bc=!0x0,_0x164ccc[_0x42f5fc(0x168)]=_0x17f1ee[_0x42f5fc(0x168)]??0x0),_0x42f5fc(0x432)in _0x17f1ee&&(this[_0x42f5fc(0x240)][_0x42f5fc(0x667)](this['instanceName']+'\x20('+this[_0x42f5fc(0x7f4)]['wuid']+'):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20'+_0x17f1ee['id']+_0x42f5fc(0x169)+(_0x17f1ee['ephemeralExpiration']!==void 0x0?_0x17f1ee[_0x42f5fc(0x432)]:_0x42f5fc(0x6c9))),_0x164ccc[_0x42f5fc(0x432)]=_0x17f1ee[_0x42f5fc(0x432)]===null?0x0:_0x17f1ee['ephemeralExpiration'],_0x5934bc=!0x0);let _0x42ac6f;_0x5934bc&&(_0x42ac6f=await this['repository'][_0x42f5fc(0x5b2)][_0x42f5fc(0x858)]({'where':{'_id':_0x17f1ee['id']}},_0x164ccc,this['instance'][_0x42f5fc(0x7fe)])),_0x42ac6f&&F(this[_0x42f5fc(0x4a8)],_0x42f5fc(0x415),{'chat':_0x42ac6f});}},'chats.delete':async _0x51fb27=>{const _0x2d6287=_0x170cb3;for(let _0x2ca9a0 of _0x51fb27)if(_0x2ca9a0[_0x2d6287(0x643)](_0x2d6287(0x85d))){await this[_0x2d6287(0x43b)]['chat'][_0x2d6287(0x57b)]({'where':{'_id':_0x2ca9a0}},this[_0x2d6287(0x7f4)]['wuid']);let _0x16d1ad={'where':{'key':{'remoteJid':_0x2ca9a0}}};await this[_0x2d6287(0x43b)][_0x2d6287(0x31f)][_0x2d6287(0x57b)](_0x16d1ad,this[_0x2d6287(0x7f4)]['wuid']);}else{await this[_0x2d6287(0x43b)][_0x2d6287(0x5b2)][_0x2d6287(0x858)]({'where':{'_id':_0x2ca9a0}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x2d6287(0x7f4)][_0x2d6287(0x7fe)]);let _0xca13f4={'where':{'key':{'remoteJid':_0x2ca9a0}}};await this[_0x2d6287(0x43b)]['message']['delete'](_0xca13f4,this[_0x2d6287(0x7f4)][_0x2d6287(0x7fe)]);}this[_0x2d6287(0x879)](_0x2d6287(0x563),[..._0x51fb27]);}},this[_0x170cb3(0x170)]={'contacts.upsert':async(_0x29938c,_0x2f754c)=>{const _0x58eed6=_0x170cb3;let _0x52f4a2=await this['repository'][_0x58eed6(0x88b)][_0x58eed6(0x604)]({'where':{}},this['instance'][_0x58eed6(0x7fe)]),_0x40ea5c=[];for await(let _0x5c74f0 of _0x29938c)_0x52f4a2['find'](_0x295da0=>_0x295da0[_0x58eed6(0x1b8)]===_0x5c74f0['id'])||_0x40ea5c['push']({'_id':_0x5c74f0['id'],'pushName':_0x5c74f0?.[_0x58eed6(0x89c)]||_0x5c74f0?.[_0x58eed6(0x5d7)],'owner':this[_0x58eed6(0x7f4)][_0x58eed6(0x7fe)]});this[_0x58eed6(0x879)](_0x58eed6(0x8b0),_0x40ea5c),await this[_0x58eed6(0x43b)][_0x58eed6(0x88b)]['insert'](_0x40ea5c);},'contacts.update':async(_0x1ff5b9,_0x113d2d)=>{const _0x10c7dd=_0x170cb3;let _0x12885b=[];for await(let _0xf64254 of _0x1ff5b9)_0x12885b[_0x10c7dd(0x2a9)]({'_id':_0xf64254['id'],'pushName':_0xf64254?.[_0x10c7dd(0x89c)]??_0xf64254?.[_0x10c7dd(0x5d7)],'owner':this[_0x10c7dd(0x7f4)][_0x10c7dd(0x7fe)]});this[_0x10c7dd(0x879)](_0x10c7dd(0x7fd),_0x12885b);}},this['messageHandle']={'messaging-history.set':async({messages:_0x23af81,chats:_0xd2a494,isLatest:_0x5c0e4b},_0x4429a4)=>{const _0x15b5dc=_0x170cb3;if(_0x5c0e4b){let _0x190bd9=await Promise['all'](_0xd2a494['map'](async _0x37c0df=>({'_id':_0x37c0df['id'],'owner':this[_0x15b5dc(0x7f4)][_0x15b5dc(0x7fe)],'group':_0x37c0df['id'][_0x15b5dc(0x643)](_0x15b5dc(0x85d)),'name':_0x37c0df['name']||_0x37c0df['displayName']||_0x37c0df[_0x15b5dc(0x8bd)]||null,'contactname':null,'lastmsg':_0x37c0df[_0x15b5dc(0x8a4)]&&_0x37c0df[_0x15b5dc(0x8a4)][_0x15b5dc(0x60f)]()[_0x15b5dc(0x608)]<0xd?_0x37c0df[_0x15b5dc(0x8a4)]*0x3e8:_0x37c0df[_0x15b5dc(0x8a4)]||null,'archived':_0x37c0df[_0x15b5dc(0x1ea)]||!0x1,'unreadcount':_0x37c0df[_0x15b5dc(0x670)]||0x0,'ephemeralExpiration':_0x37c0df[_0x15b5dc(0x432)]||0x0,'muteEndTime':_0x37c0df[_0x15b5dc(0x168)]||0x0})));this[_0x15b5dc(0x879)](_0x15b5dc(0x42a),_0x190bd9),await this[_0x15b5dc(0x8cc)](_0x190bd9,_0x4429a4);}let _0x8de070=[],_0x40217b=Date[_0x15b5dc(0x87f)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x289874]of Object[_0x15b5dc(0x7bc)](_0x23af81)){if(_0x289874[_0x15b5dc(0x31f)]?.[_0x15b5dc(0x36f)]||_0x289874[_0x15b5dc(0x31f)]?.[_0x15b5dc(0x45e)]||!_0x289874[_0x15b5dc(0x31f)]||_0x289874[_0x15b5dc(0x150)][_0x15b5dc(0x4e1)]===_0x15b5dc(0x15c)||(ks[_0x15b5dc(0x7ae)][_0x15b5dc(0x263)](_0x289874?.[_0x15b5dc(0x646)])&&(_0x289874['messageTimestamp']=_0x289874[_0x15b5dc(0x646)]?.[_0x15b5dc(0x53c)]()),_0x289874[_0x15b5dc(0x646)]&&_0x289874['messageTimestamp']['toString']()[_0x15b5dc(0x608)]<0xd&&(_0x289874[_0x15b5dc(0x646)]=_0x289874[_0x15b5dc(0x646)]*0x3e8),_0x289874[_0x15b5dc(0x646)]<_0x40217b))continue;let _0x28ed71=(0x0,w['normalizeMessageContent'])(_0x289874[_0x15b5dc(0x31f)]),_0x5cb145=(0x0,w[_0x15b5dc(0x4ac)])(_0x28ed71),{message_normalized:_0x5e494e}=this[_0x15b5dc(0x318)](_0x28ed71,_0x5cb145,null);Object[_0x15b5dc(0x59a)](_0x5e494e)[_0x15b5dc(0x608)]>0x0&&_0x8de070[_0x15b5dc(0x2a9)]({'_id':_0x289874['key']['id'],'key':_0x289874['key'],'pushName':_0x289874[_0x15b5dc(0x3d1)],'participant':_0x289874[_0x15b5dc(0x620)],'message':_0x28ed71,'messageType':_0x5cb145,'message_normalized':{'key':_0x289874['key'],'pushName':_0x289874[_0x15b5dc(0x3d1)],'messageTimestamp':_0x289874[_0x15b5dc(0x646)],..._0x5e494e},'messageTimestamp':_0x289874[_0x15b5dc(0x646)],'owner':this[_0x15b5dc(0x7f4)]['wuid']});}_0x4429a4['ENABLED']&&_0x8de070[_0x15b5dc(0x608)]>0x0&&(this[_0x15b5dc(0x240)]['verbose'](this[_0x15b5dc(0x4a8)]+'\x20('+this[_0x15b5dc(0x7f4)][_0x15b5dc(0x7fe)]+'):\x20'+_0x8de070[_0x15b5dc(0x608)]+_0x15b5dc(0x237)+this[_0x15b5dc(0x7f4)][_0x15b5dc(0x7fe)]+_0x15b5dc(0x167)),await this[_0x15b5dc(0x43b)][_0x15b5dc(0x31f)][_0x15b5dc(0x7a2)]([..._0x8de070],this[_0x15b5dc(0x7f4)][_0x15b5dc(0x7fe)])),this[_0x15b5dc(0x879)](_0x15b5dc(0x17f),[..._0x8de070]),_0x23af81=void 0x0;},'messages.upsert':async({messages:_0x52bfac,type:_0x3b8c08},_0x1adbd6)=>{const _0x301bd2=_0x170cb3;for(let _0x1c20e6 of _0x52bfac){if(this[_0x301bd2(0x71d)]?.[_0x301bd2(0x61d)]&&_0x1c20e6[_0x301bd2(0x150)][_0x301bd2(0x4e1)][_0x301bd2(0x267)](_0x301bd2(0x85d))){this[_0x301bd2(0x240)][_0x301bd2(0x667)](this[_0x301bd2(0x4a8)]+'\x20('+this['instance']['wuid']+'):\x20[messages.upsert]\x20group\x20ignored');return;}if(_0x1c20e6[_0x301bd2(0x150)][_0x301bd2(0x4e1)][_0x301bd2(0x267)]('@newsletter')||_0x1c20e6[_0x301bd2(0x150)][_0x301bd2(0x4e1)]==='status@broadcast')return;if(_0x1c20e6['messageStubParameters']&&_0x1c20e6[_0x301bd2(0x31e)][0x0]==='Message\x20absent\x20from\x20node'){console[_0x301bd2(0x3c9)](_0x301bd2(0x67a)),await this[_0x301bd2(0x17c)](_0x1c20e6),Lt[_0x1c20e6[_0x301bd2(0x150)]['id']]=_0x1c20e6,this[_0x301bd2(0x16a)](_0x1c20e6,0x0);return;}if(_0x3b8c08!==_0x301bd2(0x6da)||!_0x1c20e6?.[_0x301bd2(0x31f)]||_0x1c20e6[_0x301bd2(0x31f)]?.[_0x301bd2(0x36f)]||_0x1c20e6['message']?.[_0x301bd2(0x45e)])return;let _0x2d255c=null,_0xb87e4=null;Lt[_0x1c20e6[_0x301bd2(0x150)]['id']]&&(console[_0x301bd2(0x3c9)](_0x301bd2(0x6dc)),await this['repository'][_0x301bd2(0x29d)][_0x301bd2(0x57b)]({'where':{'_id':_0x1c20e6[_0x301bd2(0x150)]['id']}}),delete Lt[_0x1c20e6['key']['id']]);try{_0x2d255c=await this['processPollUpdateMessage'](_0x1c20e6),_0xb87e4=_0x2d255c?_0x2d255c[_0x301bd2(0x1b4)](','):null;}catch(_0x4e569f){this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x301bd2(0x7f4)][_0x301bd2(0x7fe)]+'):\x20'+(_0x4e569f instanceof Error?_0x4e569f[_0x301bd2(0x31f)]:JSON[_0x301bd2(0x41d)](_0x4e569f,null,0x2))),_0xb87e4='error\x20get\x20vote';}this[_0x301bd2(0x796)][_0x301bd2(0x2d2)](_0x301bd2(0x49f)),ks['default'][_0x301bd2(0x263)](_0x1c20e6['messageTimestamp'])&&(_0x1c20e6['messageTimestamp']=_0x1c20e6[_0x301bd2(0x646)]?.[_0x301bd2(0x53c)]()),_0x1c20e6[_0x301bd2(0x646)]&&_0x1c20e6[_0x301bd2(0x646)]['toString']()['length']<0xd&&(_0x1c20e6[_0x301bd2(0x646)]=_0x1c20e6[_0x301bd2(0x646)]*0x3e8);let _0x51868c=_0x1c20e6[_0x301bd2(0x31f)],_0x13a1bc=(0x0,w['normalizeMessageContent'])(_0x51868c),_0x23bfef=(0x0,w[_0x301bd2(0x4ac)])(_0x13a1bc),{messageContent:_0x171a61,message_normalized:_0x4da991}=this['normalizeMessage'](_0x13a1bc,_0x23bfef,_0xb87e4);if(_0x23bfef===_0x301bd2(0x36f)&&_0x171a61?.[_0x301bd2(0x3c2)]&&(_0x23bfef=_0x301bd2(0x3c2)),_0x23bfef==='interactiveMessage'&&_0x1c20e6[_0x301bd2(0x150)][_0x301bd2(0x4f0)])return;let _0x3b7511,_0x425024=_0x1c20e6[_0x301bd2(0x150)][_0x301bd2(0x4e1)][_0x301bd2(0x643)](_0x301bd2(0x85d));if(_0x1c20e6[_0x301bd2(0x150)][_0x301bd2(0x4f0)])_0x3b7511=this[_0x301bd2(0x7f4)][_0x301bd2(0x728)];else{let _0x2dd94=_0x425024?_0x1c20e6[_0x301bd2(0x150)][_0x301bd2(0x620)]:_0x1c20e6[_0x301bd2(0x150)][_0x301bd2(0x4e1)];_0x3b7511=(await this[_0x301bd2(0x81b)](_0x2dd94,_0x1c20e6['pushName'],!0x1))['cachedContact'][_0x301bd2(0x860)];}let _0x154007={'_id':_0x1c20e6[_0x301bd2(0x150)]['id'],'key':_0x1c20e6['key'],'isGroup':_0x425024,'profilePictureUrl':_0x3b7511,'pushName':_0x1c20e6[_0x301bd2(0x3d1)],'message':_0x13a1bc,'messageType':_0x23bfef,'message_normalized':{'key':_0x1c20e6['key'],'pushName':_0x1c20e6[_0x301bd2(0x3d1)],'messageTimestamp':_0x1c20e6[_0x301bd2(0x646)],'source':(0x0,w[_0x301bd2(0x380)])(_0x1c20e6[_0x301bd2(0x150)]['id']),..._0x4da991},'messageTimestamp':_0x1c20e6[_0x301bd2(0x646)],'owner':this[_0x301bd2(0x7f4)]['wuid'],'source':(0x0,w[_0x301bd2(0x380)])(_0x1c20e6[_0x301bd2(0x150)]['id']),'expiration':_0x171a61?.[_0x301bd2(0x748)]?.['expiration']||0x0};if(_0x171a61||(this[_0x301bd2(0x240)]['error']('Mensagem\x20não\x20suportada'),this[_0x301bd2(0x240)][_0x301bd2(0x3c9)](_0x154007)),_0x4da991[_0x301bd2(0x1b9)]===_0x301bd2(0x6fd)){console[_0x301bd2(0x3c9)](_0x301bd2(0x3d8)),await this[_0x301bd2(0x17c)](_0x1c20e6);return;}this[_0x301bd2(0x240)][_0x301bd2(0x509)](this[_0x301bd2(0x4a8)]+'\x20('+this['instance'][_0x301bd2(0x7fe)]+'):\x20'+(_0x154007['key']?.[_0x301bd2(0x4f0)]?_0x301bd2(0x3c3):'recebido\x20de')+'\x20['+_0x154007[_0x301bd2(0x150)]?.[_0x301bd2(0x4e1)][_0x301bd2(0x869)]('@s.whatsapp.net','')+_0x301bd2(0x245)+_0x154007[_0x301bd2(0x800)]+')'),_0x154007[_0x301bd2(0x2e4)]?.[_0x301bd2(0x1b9)]&&this[_0x301bd2(0x240)]['log'](_0x1c20e6['key']['id']+':\x20'+_0x154007[_0x301bd2(0x2e4)]?.['text']),await this['repository']['message'][_0x301bd2(0x7a2)]([_0x154007],this[_0x301bd2(0x7f4)]['wuid']),this[_0x301bd2(0x879)]('messages.upsert',_0x154007),F(this[_0x301bd2(0x4a8)],_0x301bd2(0x76e),{'message':_0x154007}),_0x1c20e6[_0x301bd2(0x150)]['remoteJid']!==_0x301bd2(0x15c)&&await this[_0x301bd2(0x280)](_0x1adbd6,_0x154007,_0x301bd2(0x23d));}},'messages.update':async(_0x1da52b,_0x274c74)=>{const _0x518f10=_0x170cb3;let _0x57f3bf={0x0:_0x518f10(0x1dd),0x1:_0x518f10(0x6f0),0x2:_0x518f10(0x27b),0x3:'DELIVERY_ACK',0x4:'READ',0x5:_0x518f10(0x271)};for await(let {key:_0x310fa4,update:_0x5f4069}of _0x1da52b){if(this[_0x518f10(0x71d)]?.[_0x518f10(0x61d)]&&_0x310fa4[_0x518f10(0x4e1)][_0x518f10(0x267)]('@g.us')){this[_0x518f10(0x240)][_0x518f10(0x667)](this[_0x518f10(0x4a8)]+'\x20('+this[_0x518f10(0x7f4)][_0x518f10(0x7fe)]+'):\x20[messages.update]\x20group\x20ignored');return;}if(_0x310fa4[_0x518f10(0x4e1)]!==_0x518f10(0x15c)){let _0x546f98=Date[_0x518f10(0x87f)](),_0x2b3c68;_0x5f4069[_0x518f10(0x31f)]===null&&_0x5f4069[_0x518f10(0x352)]===void 0x0?_0x2b3c68=_0x518f10(0x504):_0x2b3c68=_0x57f3bf[_0x5f4069[_0x518f10(0x352)]];let _0x1847e0=_0x310fa4[_0x518f10(0x4e1)][_0x518f10(0x869)](/:\d{1,2}@/g,'@'),_0x1dc322={..._0x310fa4,'remoteJid':_0x1847e0,'status':_0x2b3c68,'datetime':_0x546f98,'owner':this[_0x518f10(0x7f4)]['wuid']};this['sendDataWebhook'](_0x518f10(0x54b),_0x1dc322),await this['updateMessage'](_0x310fa4,_0x1dc322);}}},'labels.association':async({type:_0x22dfcf,association:_0x3b4cb5})=>{const _0xa14c48=_0x170cb3;if(_0x3b4cb5['type']===_0xa14c48(0x8ac)){let _0x269fed,_0xba1d5d=0x0;for(;!_0x269fed&&_0xba1d5d<this[_0xa14c48(0x6ec)];)_0x269fed=await this[_0xa14c48(0x43b)][_0xa14c48(0x5b2)][_0xa14c48(0x505)]({'where':{'_id':_0x3b4cb5[_0xa14c48(0x425)]}},this['instance'][_0xa14c48(0x7fe)]),_0x269fed||(_0xba1d5d++,this[_0xa14c48(0x240)][_0xa14c48(0x344)](this[_0xa14c48(0x4a8)]+'\x20('+this[_0xa14c48(0x7f4)][_0xa14c48(0x7fe)]+_0xa14c48(0x6b9)+_0x3b4cb5[_0xa14c48(0x425)]+_0xa14c48(0x5e5)+this[_0xa14c48(0x229)]+_0xa14c48(0x29f)+_0xba1d5d+'/'+this[_0xa14c48(0x6ec)]+')'),await this[_0xa14c48(0x465)](this[_0xa14c48(0x229)]));if(!_0x269fed){this[_0xa14c48(0x240)][_0xa14c48(0x3c9)](_0xa14c48(0x72f)+_0x3b4cb5[_0xa14c48(0x425)]+_0xa14c48(0x8ae)+this[_0xa14c48(0x6ec)]+'\x20tentativas.');return;}switch(_0x22dfcf){case'add':console['log'](_0x3b4cb5),await this[_0xa14c48(0x43b)][_0xa14c48(0x5b2)][_0xa14c48(0x858)]({'where':{'_id':_0x3b4cb5[_0xa14c48(0x425)]}},{'leadInfo.etiquetas':_0x3b4cb5[_0xa14c48(0x826)]},this[_0xa14c48(0x7f4)][_0xa14c48(0x7fe)],void 0x0,_0xa14c48(0x75a));break;case'remove':console[_0xa14c48(0x509)](_0x3b4cb5),await this[_0xa14c48(0x43b)][_0xa14c48(0x5b2)][_0xa14c48(0x858)]({'where':{'_id':_0x3b4cb5[_0xa14c48(0x425)]}},{'leadInfo.etiquetas':_0x3b4cb5[_0xa14c48(0x826)]},this[_0xa14c48(0x7f4)][_0xa14c48(0x7fe)],void 0x0,_0xa14c48(0x40c));break;default:this[_0xa14c48(0x240)][_0xa14c48(0x3c9)]('unknown\x20operation\x20type\x20['+_0x22dfcf+']');}}},'labels.edit':async _0x37686c=>{const _0xbe9c12=_0x170cb3;if(!_0x37686c||!_0x37686c['id']){this[_0xbe9c12(0x240)][_0xbe9c12(0x3c9)](_0xbe9c12(0x33d));return;}if(!_0x37686c['deleted']){let _0x30dcca=[_0xbe9c12(0x276),_0xbe9c12(0x5cf),'#fed428','#dfaef0',_0xbe9c12(0x79b),_0xbe9c12(0x7ec),_0xbe9c12(0x367),_0xbe9c12(0x65a),_0xbe9c12(0x756),_0xbe9c12(0x71f),_0xbe9c12(0x524),_0xbe9c12(0x7f6),'#92ceac','#f64847',_0xbe9c12(0x5c6),_0xbe9c12(0x8c6),'#ffae04','#b4ebff',_0xbe9c12(0x5d2),'#9568cf'],_0x39fd70;typeof _0x37686c[_0xbe9c12(0x179)]==_0xbe9c12(0x17a)&&_0x37686c[_0xbe9c12(0x179)]>=0x0&&_0x37686c[_0xbe9c12(0x179)]<_0x30dcca[_0xbe9c12(0x608)]?_0x39fd70=_0x30dcca[_0x37686c[_0xbe9c12(0x179)]]:(this[_0xbe9c12(0x240)][_0xbe9c12(0x3c9)](_0xbe9c12(0x1eb)+_0x37686c[_0xbe9c12(0x179)]),_0x39fd70='#000000');let _0x3486b3={'_id':_0x37686c['id'],'colorHex':_0x39fd70,'color':_0x37686c?.[_0xbe9c12(0x179)],'name':_0x37686c?.[_0xbe9c12(0x89c)],'owner':this['instance'][_0xbe9c12(0x7fe)]};await this[_0xbe9c12(0x43b)]['label'][_0xbe9c12(0x858)]({'where':{'_id':_0x37686c['id']}},_0x3486b3,this['instance'][_0xbe9c12(0x7fe)]),this['logger']['info'](this[_0xbe9c12(0x4a8)]+'\x20('+this[_0xbe9c12(0x7f4)]['wuid']+_0xbe9c12(0x58c)+_0x37686c);}_0x37686c[_0xbe9c12(0x3d3)]&&(await this[_0xbe9c12(0x43b)]['label'][_0xbe9c12(0x57b)]({'where':{'_id':_0x37686c['id']}},this['instance']['wuid']),this[_0xbe9c12(0x240)]['info'](_0xbe9c12(0x31b)+_0x37686c['id']));}},this[_0x170cb3(0x222)]={'groups.upsert':async _0x57580a=>{const _0x66baba=_0x170cb3;this['localWebhook']?.[_0x66baba(0x61d)]||this[_0x66baba(0x879)](_0x66baba(0x209),_0x57580a);for(let _0x4cf1f4 of _0x57580a)await this[_0x66baba(0x162)](_0x4cf1f4);},'groups.update':async _0x3a4f7f=>{const _0x4942c8=_0x170cb3;this[_0x4942c8(0x71d)]?.['groups_ignore']||this[_0x4942c8(0x879)](_0x4942c8(0x6af),_0x3a4f7f);for(let _0x536327 of _0x3a4f7f)await this[_0x4942c8(0x162)](_0x536327);},'group-participants.update':async _0x3f91dc=>{const _0x5dc2da=_0x170cb3;this[_0x5dc2da(0x71d)]?.['groups_ignore']||this['sendDataWebhook'](_0x5dc2da(0x2c5),_0x3f91dc),await this[_0x5dc2da(0x1df)](_0x3f91dc);}},this['delayChatLabel_MAX_RETRIES']=0x5,this[_0x170cb3(0x229)]=0x1388,this[_0x170cb3(0x3eb)]=0x0,this['processPollUpdateMessage']=async _0x10c9df=>{const _0x18771e=_0x170cb3;if(_0x10c9df[_0x18771e(0x31f)]?.[_0x18771e(0x41b)]){let _0x276043=await this[_0x18771e(0x4ca)](_0x10c9df[_0x18771e(0x31f)][_0x18771e(0x41b)][_0x18771e(0x20e)],!0x0);if(_0x276043){let _0x3a6a4f=_0x276043['key'][_0x18771e(0x4f0)]?this[_0x18771e(0x7f4)]['wuid']+'@s.whatsapp.net':_0x276043[_0x18771e(0x150)][_0x18771e(0x620)]||_0x276043['key'][_0x18771e(0x4e1)],_0x72941=_0x276043[_0x18771e(0x150)]['id'],_0x209f50=_0x276043[_0x18771e(0x31f)],_0x3a481e=Buffer[_0x18771e(0x50f)](_0x209f50[_0x18771e(0x499)][_0x18771e(0x41c)][_0x18771e(0x60f)](_0x18771e(0x4b4)),_0x18771e(0x4b4)),_0x247b1b=(0x0,w[_0x18771e(0x5f3)])(_0x10c9df[_0x18771e(0x31f)][_0x18771e(0x41b)][_0x18771e(0x32e)],{'pollCreatorJid':_0x3a6a4f,'pollMsgId':_0x72941,'pollEncKey':_0x3a481e,'voterJid':_0x10c9df[_0x18771e(0x150)][_0x18771e(0x4f0)]?this[_0x18771e(0x7f4)]['wuid']+_0x18771e(0x1b5):_0x10c9df[_0x18771e(0x150)]['remoteJid'][_0x18771e(0x643)]('g.us')?_0x10c9df[_0x18771e(0x150)]['participant']:_0x10c9df[_0x18771e(0x150)][_0x18771e(0x4e1)]}),_0x20c376=[],_0x38b654=_0x247b1b['selectedOptions'][_0x18771e(0x5e6)](_0x4b4602=>Buffer[_0x18771e(0x50f)](_0x4b4602)['toString'](_0x18771e(0x4b4)));for(let {optionName:_0x3328a7}of _0x209f50[_0x18771e(0x52b)]?.[_0x18771e(0x80c)]||_0x209f50[_0x18771e(0x4b8)]?.[_0x18771e(0x80c)]||_0x209f50[_0x18771e(0x75c)]?.[_0x18771e(0x80c)])_0x38b654[_0x18771e(0x89b)]((0x0,w['sha256'])(Buffer['from'](_0x3328a7))[_0x18771e(0x60f)](_0x18771e(0x4b4)))>-0x1&&_0x20c376[_0x18771e(0x2a9)](_0x3328a7);return _0x20c376;}}return null;},this[_0x170cb3(0x318)]=(_0x55b79c,_0x5441b2,_0x406641)=>{const _0x4b119c=_0x170cb3;try{let _0x3034c5=_0x55b79c?(0x0,w[_0x4b119c(0x28c)])(_0x55b79c)[_0x5441b2]:void 0x0,_0x2550a0={},_0x39caef=null,_0x1420a8=null,_0x3cb467=null,_0x3fb0bc=null;_0x5441b2===_0x4b119c(0x36f)&&_0x3034c5?.[_0x4b119c(0x3c2)]&&(_0x5441b2=(0x0,w[_0x4b119c(0x4ac)])(_0x3034c5['editedMessage']),_0x39caef=_0x55b79c[_0x4b119c(0x36f)]['key']['id'],_0x3034c5=_0x55b79c[_0x4b119c(0x36f)][_0x4b119c(0x3c2)][_0x5441b2]),_0x55b79c[_0x5441b2]?.[_0x4b119c(0x748)]?.[_0x4b119c(0x555)]&&_0x55b79c[_0x5441b2]?.['contextInfo']?.[_0x4b119c(0x817)]&&(_0x1420a8=_0x55b79c[_0x5441b2][_0x4b119c(0x748)][_0x4b119c(0x555)]),_0x55b79c[_0x4b119c(0x83e)]&&(_0x3cb467=_0x55b79c[_0x4b119c(0x83e)]['key']['id']);let _0x2b4aac;if(_0x3034c5&&typeof _0x3034c5==_0x4b119c(0x69d)&&_0x4b119c(0x20e)in _0x3034c5&&({pollCreationMessageKey:_0x2b4aac}=_0x3034c5),_0x5441b2===_0x4b119c(0x52b)||_0x5441b2===_0x4b119c(0x75c)||_0x5441b2===_0x4b119c(0x4b8)){let _0x1e5558=_0x3034c5['options'][_0x4b119c(0x5e6)](_0x285213=>_0x285213[_0x4b119c(0x6d5)])[_0x4b119c(0x1b4)]('|');_0x2550a0[_0x4b119c(0x855)]=_0x1e5558;}if(_0x5441b2===_0x4b119c(0x396)){let _0x381585=_0x3034c5[_0x4b119c(0x7b1)][_0x4b119c(0x76b)][_0x4b119c(0x5e6)](_0x78e54e=>JSON[_0x4b119c(0x4bc)](_0x78e54e[_0x4b119c(0x3c1)])[_0x4b119c(0x680)])['join']('|');_0x2550a0[_0x4b119c(0x855)]=_0x381585;}_0x5441b2===_0x4b119c(0x71a)&&(_0x2550a0['buttonOrList_id']=_0x3034c5?.[_0x4b119c(0x731)]?.[_0x4b119c(0x2cf)]);let _0x2869e3='';if(_0x3034c5&&(_0x2869e3+=_0x3034c5[_0x4b119c(0x89c)]?_0x3034c5[_0x4b119c(0x89c)]:'',_0x2869e3+=_0x3034c5[_0x4b119c(0x6bd)]?'\x20'+_0x3034c5[_0x4b119c(0x6bd)]:'',_0x2869e3+=_0x3034c5[_0x4b119c(0x218)]?'\x20'+_0x3034c5[_0x4b119c(0x218)]:'',_0x2869e3+=_0x3034c5[_0x4b119c(0x60d)]?'\x20'+_0x3034c5[_0x4b119c(0x60d)]:'',_0x5441b2!==_0x4b119c(0x68d)&&(_0x2869e3+=_0x3034c5[_0x4b119c(0x2ab)]?.[_0x4b119c(0x1b9)]?'\x20'+_0x3034c5[_0x4b119c(0x2ab)][_0x4b119c(0x1b9)]:''),_0x2869e3+=_0x3034c5?.[_0x4b119c(0x373)]?.[_0x4b119c(0x1b9)]?'\x20'+_0x3034c5?.[_0x4b119c(0x373)]?.['text']:''),_0x5441b2===_0x4b119c(0x42e)){_0x2869e3=(_0x3034c5[_0x4b119c(0x67c)]||'')+'\x0a'+(_0x3034c5[_0x4b119c(0x6f7)]||'')+'\x0a'+(_0x3034c5['footerText']||'');let _0x54a2e9=this[_0x4b119c(0x174)](_0x3034c5[_0x4b119c(0x381)]);_0x2550a0[_0x4b119c(0x855)]=_0x54a2e9;}if(_0x5441b2===_0x4b119c(0x71a)&&(_0x406641=_0x3034c5[_0x4b119c(0x67c)],_0x3fb0bc=_0x3034c5?.[_0x4b119c(0x731)]?.[_0x4b119c(0x2cf)]),_0x5441b2==='interactiveResponseMessage'){let _0x13c821=_0x3034c5?.['nativeFlowResponseMessage'];_0x13c821&&_0x13c821[_0x4b119c(0x89c)]===_0x4b119c(0x404)&&(_0x3fb0bc=JSON[_0x4b119c(0x4bc)](_0x13c821['paramsJson'])['id']),_0x406641=_0x3034c5?.[_0x4b119c(0x2ab)]?.['text'];}if(_0x5441b2===_0x4b119c(0x258)&&(_0x406641=_0x3034c5?.[_0x4b119c(0x5e3)],_0x3fb0bc=_0x3034c5?.[_0x4b119c(0x3c7)]),_0x3034c5&&_0x3034c5[_0x4b119c(0x201)]){let _0x4c893f=this[_0x4b119c(0x521)](JSON[_0x4b119c(0x41d)](_0x3034c5[_0x4b119c(0x201)],null,0x2));_0x2869e3=_0x2869e3+'\x0a'+_0x4c893f;}if(_0x3034c5){let {nativeFlowResponseMessage:_0x34154a,selectedId:_0x3bd6fd,selectedDisplayText:_0x54d013,selectedIndex:_0x4e8706,body:_0x49422e,nativeFlowMessage:_0x491cd3,singleSelectReply:_0x3183b8,sections:_0x25c3de,listType:_0x4457a5,displayName:_0x183061,vcard:_0x2ad26d,contactVcard:_0x3d269f,name:_0x16cc10,caption:_0x3e83cc,conversation:_0x4451ff,pollCreationMessageKey:_0x44a235,footerText:_0x5d08df,contentText:_0x240cf8,pageCount:_0x8c4484,headerType:_0x1e29db,isAvatar:_0x46352a,isAnimated:_0x242df0,fallbackLc:_0x5af4a5,fallbackLg:_0x18c535,namespace:_0x63118a,elementName:_0x56750e,localizableParams:_0x392a49,viewOnce:_0x5f512f,height:_0x47836e,width:_0x16cf3a,key:_0x2f929b,firstScanLength:_0xa700d8,firstScanSidecar:_0x33127c,gifPlayback:_0x4d0153,gifAttribution:_0x57ef44,midQualityFileSha256:_0x52af39,scansSidecar:_0x474cd1,streamingSidecar:_0x9a3343,thumbnailHeight:_0x53e2eb,thumbnailWidth:_0x53aa6a,thumbnailEncSha256:_0x407f49,thumbnailDirectPath:_0x214d7a,canonicalUrl:_0x54e6d9,matchedText:_0x3187fe,previewType:_0x30fbbd,thumbnailSha256:_0x1838f2,deviceListMetadataVersion:_0x2cd346,inviteLinkGroupTypeV2:_0x6a96db,interactiveAnnotations:_0x1369d6,scanLengths:_0x45c751,jpegThumbnail:_0x2fa8a2,url:_0xe7bad1,mediaKeyTimestamp:_0x2eee3b,waveform:_0x252ae3,stickerSentTs:_0x1a8a6e,firstFrameLength:_0x14a1e6,fileEncSha256:_0x41f341,contextInfo:_0x5e5e01,firstFrameSidecar:_0x4e0933,directPath:_0x27ffbc,fileSha256:_0x9b375b,mediaKey:_0x3fad2a,senderTimestampMs:_0xe9275e,..._0x158430}=_0x3034c5;(_0x5441b2===_0x4b119c(0x42e)||_0x5441b2===_0x4b119c(0x71a))&&(delete _0x158430['title'],delete _0x158430[_0x4b119c(0x6f7)]),typeof _0x3034c5=='string'?_0x2550a0={'text':_0x3034c5,'type':_0x5441b2||_0x4b119c(0x218),..._0x39caef&&{'edited':_0x39caef},..._0x1420a8&&{'quoted':_0x1420a8},..._0x3cb467&&{'reaction':_0x3cb467}}:_0x2550a0={'text':_0x2869e3,..._0x158430,..._0x5441b2===_0x4b119c(0x41b)?{'poll_id':_0x3034c5[_0x4b119c(0x20e)]['id'],'quoted':_0x3034c5[_0x4b119c(0x20e)]['id'],'vote':_0x406641}:{},..._0x5441b2==='listResponseMessage'?{'buttonOrList_id':_0x3fb0bc,'vote':_0x406641}:{},..._0x5441b2===_0x4b119c(0x68d)?{'buttonOrList_id':_0x3fb0bc,'vote':_0x406641}:{},..._0x5441b2===_0x4b119c(0x258)?{'buttonOrList_id':_0x3fb0bc,'vote':_0x406641}:{},'type':_0x5441b2,..._0x39caef&&{'edited':_0x39caef},..._0x1420a8&&{'quoted':_0x1420a8},..._0x3cb467&&{'reaction':_0x3cb467},...(_0x5441b2===_0x4b119c(0x52b)||_0x5441b2===_0x4b119c(0x75c)||_0x5441b2==='pollCreationMessageV3'||_0x5441b2==='listMessage'||_0x5441b2===_0x4b119c(0x396))&&{'convertedOptions':_0x2550a0[_0x4b119c(0x855)]}};}return{'messageType':_0x5441b2,'messageContent':_0x3034c5,'message_normalized':_0x2550a0};}catch(_0x13186c){return this[_0x4b119c(0x240)]['error'](_0x4b119c(0x790)+_0x13186c),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this['pendingMessages']=[],(this[_0x170cb3(0x7fc)](),this[_0x170cb3(0x77e)](),this[_0x170cb3(0x7f4)][_0x170cb3(0x212)]={'count':0x0},this[_0x170cb3(0x7f4)]['ScheduleMessage']={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}set['instanceName'](_0x33fbc9){const _0x472318=a0_0x2101b5;if(!_0x33fbc9){this['instance']['name']=(0x0,Ii['v4'])();return;}this[_0x472318(0x7f4)][_0x472318(0x89c)]=_0x33fbc9,this[_0x472318(0x879)](_0x472318(0x384),{'instance':this[_0x472318(0x7f4)][_0x472318(0x89c)],'status':'created'});}get[a0_0x2101b5(0x4a8)](){const _0x25db26=a0_0x2101b5;return this[_0x25db26(0x7f4)]['name'];}get['wuid'](){const _0x258489=a0_0x2101b5;return this[_0x258489(0x7f4)][_0x258489(0x7fe)];}async[a0_0x2101b5(0x765)](){const _0x1f38a3=a0_0x2101b5;let _0x1eb9e2=this[_0x1f38a3(0x796)][_0x1f38a3(0x4bb)]?.[_0x1f38a3(0x89c)]??this[_0x1f38a3(0x796)][_0x1f38a3(0x4bb)]?.[_0x1f38a3(0x5d7)];if(!_0x1eb9e2){if(this[_0x1f38a3(0x596)][_0x1f38a3(0x34a)](_0x1f38a3(0x5b1))[_0x1f38a3(0x6f5)]){let _0x40cbc5=await I[_0x1f38a3(0x44f)]()['db'](this[_0x1f38a3(0x596)][_0x1f38a3(0x34a)]('DATABASE')[_0x1f38a3(0x656)][_0x1f38a3(0x181)]+_0x1f38a3(0x852))[_0x1f38a3(0x1bc)](this['instanceName'])['findOne']({'_id':_0x1f38a3(0x4da)});if(_0x40cbc5){let _0x2dffd6=JSON[_0x1f38a3(0x4bc)](JSON[_0x1f38a3(0x41d)](_0x40cbc5),w[_0x1f38a3(0x5bb)][_0x1f38a3(0x764)]);_0x1eb9e2=_0x2dffd6['me']?.[_0x1f38a3(0x89c)]||_0x2dffd6['me']?.[_0x1f38a3(0x5d7)];}}else{if((0x0,Le[_0x1f38a3(0x7b7)])((0x0,j[_0x1f38a3(0x1b4)])(Se,this[_0x1f38a3(0x4a8)],_0x1f38a3(0x1ce)))){let _0x48eb1a=JSON[_0x1f38a3(0x4bc)]((0x0,Le[_0x1f38a3(0x1e3)])((0x0,j[_0x1f38a3(0x1b4)])(Se,this[_0x1f38a3(0x4a8)],'creds.json'),{'encoding':_0x1f38a3(0x7c6)}));_0x1eb9e2=_0x48eb1a['me']?.[_0x1f38a3(0x89c)]||_0x48eb1a['me']?.[_0x1f38a3(0x5d7)];}}}return _0x1eb9e2;}get[a0_0x2101b5(0x728)](){const _0x77bfb3=a0_0x2101b5;return this[_0x77bfb3(0x7f4)]['profilePictureUrl'];}async[a0_0x2101b5(0x629)](){const _0xce65d7=a0_0x2101b5;let _0x27d8f4=this['instance'][_0xce65d7(0x7fe)]+'@s.whatsapp.net';try{await this[_0xce65d7(0x796)][_0xce65d7(0x306)](_0x27d8f4)?this[_0xce65d7(0x7f4)]['isBusiness']=!0x0:this[_0xce65d7(0x7f4)][_0xce65d7(0x281)]=!0x1;}catch{this[_0xce65d7(0x7f4)][_0xce65d7(0x281)]=!0x1;}return this[_0xce65d7(0x240)][_0xce65d7(0x344)](this[_0xce65d7(0x4a8)]+'\x20('+this[_0xce65d7(0x7f4)][_0xce65d7(0x7fe)]+_0xce65d7(0x735)+this[_0xce65d7(0x7f4)][_0xce65d7(0x281)]),this[_0xce65d7(0x7f4)]['isBusiness'];}get['qrCode'](){const _0x289842=a0_0x2101b5;return this[_0x289842(0x7f4)][_0x289842(0x212)]?.[_0x289842(0x1f8)]?{'pairingCode':this[_0x289842(0x7f4)]['qrcode']?.[_0x289842(0x1f8)]}:{'code':this[_0x289842(0x7f4)]['qrcode']?.[_0x289842(0x3b6)],'base64':this['instance'][_0x289842(0x212)]?.['base64']};}async[a0_0x2101b5(0x80a)](){const _0x59d2be=a0_0x2101b5;let _0x4e7583=await this[_0x59d2be(0x43b)]['webhook']['find'](this[_0x59d2be(0x4a8)]);this['localWebhook'][_0x59d2be(0x52a)]=_0x4e7583?.[_0x59d2be(0x52a)],this[_0x59d2be(0x71d)]['enabled']=_0x4e7583?.[_0x59d2be(0x4d4)],this[_0x59d2be(0x71d)][_0x59d2be(0x277)]=_0x4e7583?.[_0x59d2be(0x277)],this[_0x59d2be(0x71d)][_0x59d2be(0x460)]=_0x4e7583?.[_0x59d2be(0x460)],this[_0x59d2be(0x71d)]['QRCODE_UPDATED']=_0x4e7583?.[_0x59d2be(0x591)],this['localWebhook'][_0x59d2be(0x517)]=_0x4e7583?.[_0x59d2be(0x517)],this['localWebhook'][_0x59d2be(0x23d)]=_0x4e7583?.['MESSAGES_UPSERT'],this[_0x59d2be(0x71d)][_0x59d2be(0x836)]=_0x4e7583?.[_0x59d2be(0x836)],this['localWebhook'][_0x59d2be(0x5c9)]=_0x4e7583?.[_0x59d2be(0x5c9)],this[_0x59d2be(0x71d)][_0x59d2be(0x56e)]=_0x4e7583?.['GROUPS_UPDATE'],this['localWebhook'][_0x59d2be(0x8c3)]=_0x4e7583?.[_0x59d2be(0x8c3)],this[_0x59d2be(0x71d)][_0x59d2be(0x636)]=_0x4e7583?.[_0x59d2be(0x636)],this['localWebhook'][_0x59d2be(0x241)]=_0x4e7583?.[_0x59d2be(0x241)],this[_0x59d2be(0x71d)]['CHATS_UPDATE']=_0x4e7583?.[_0x59d2be(0x662)],this[_0x59d2be(0x71d)][_0x59d2be(0x873)]=_0x4e7583?.[_0x59d2be(0x873)],this[_0x59d2be(0x71d)][_0x59d2be(0x1e0)]=_0x4e7583?.['CONTACTS_SET'],this[_0x59d2be(0x71d)][_0x59d2be(0x3d9)]=_0x4e7583?.[_0x59d2be(0x3d9)],this['localWebhook'][_0x59d2be(0x80d)]=_0x4e7583?.[_0x59d2be(0x80d)],this['localWebhook'][_0x59d2be(0x78c)]=_0x4e7583?.[_0x59d2be(0x78c)],this[_0x59d2be(0x71d)]['MESSAGES_SET']=_0x4e7583?.[_0x59d2be(0x5f7)],this[_0x59d2be(0x71d)][_0x59d2be(0x5e0)]=_0x4e7583?.[_0x59d2be(0x5e0)],this[_0x59d2be(0x71d)][_0x59d2be(0x61d)]=_0x4e7583?.[_0x59d2be(0x61d)];}async['setWebhook'](_0x29cfa7){const _0x1b7414=a0_0x2101b5;let _0x406711=[_0x1b7414(0x1b8),_0x1b7414(0x52a),_0x1b7414(0x4d4),_0x1b7414(0x277),_0x1b7414(0x460),_0x1b7414(0x591),_0x1b7414(0x836),'MESSAGES_UPSERT',_0x1b7414(0x517),_0x1b7414(0x5c9),_0x1b7414(0x56e),_0x1b7414(0x8c3),_0x1b7414(0x636),_0x1b7414(0x241),'CHATS_UPDATE',_0x1b7414(0x873),_0x1b7414(0x1e0),_0x1b7414(0x3d9),_0x1b7414(0x80d),'PRESENCE_UPDATE',_0x1b7414(0x5f7),_0x1b7414(0x5e0),_0x1b7414(0x61d)],_0x3e006b={};return _0x406711[_0x1b7414(0x600)](_0x134dc2=>{_0x29cfa7[_0x134dc2]!==void 0x0&&(_0x3e006b[_0x134dc2]=_0x29cfa7[_0x134dc2]);}),_0x3e006b[_0x1b7414(0x52a)]&&(_0x3e006b['url']=_0x3e006b[_0x1b7414(0x52a)][_0x1b7414(0x3f2)]()),await this[_0x1b7414(0x43b)]['webhook'][_0x1b7414(0x65e)](_0x3e006b,this[_0x1b7414(0x4a8)]),Object[_0x1b7414(0x6b1)](this[_0x1b7414(0x71d)],_0x3e006b),await this['repository'][_0x1b7414(0x8a1)][_0x1b7414(0x604)](this[_0x1b7414(0x4a8)]);}async[a0_0x2101b5(0x4d6)](){const _0x2e733d=a0_0x2101b5;return await this[_0x2e733d(0x43b)][_0x2e733d(0x8a1)][_0x2e733d(0x604)](this['instanceName']);}async[a0_0x2101b5(0x879)](_0x5c7d53,_0x231551){const _0x50f8f3=a0_0x2101b5;let _0x1dff42=_0x5c7d53[_0x50f8f3(0x869)](/[\.-]/gm,'_')['toUpperCase'](),_0x453177=this['localWebhook'][_0x50f8f3(0x4d4)]&&(0x0,J[_0x50f8f3(0x719)])(this[_0x50f8f3(0x71d)]['url'])?this[_0x50f8f3(0x71d)]['url']+(this[_0x50f8f3(0x71d)][_0x50f8f3(0x277)]?this[_0x50f8f3(0x7b9)][_0x5c7d53]:''):null,_0x4c3494=this[_0x50f8f3(0x71d)][_0x1dff42],_0x4067b2=he&&he[_0x50f8f3(0x4d4)]&&(0x0,J[_0x50f8f3(0x719)])(he[_0x50f8f3(0x52a)])?he['url']+(he[_0x50f8f3(0x277)]?this['webhookMap'][_0x5c7d53]:''):null,_0x2e842b=he?he[_0x1dff42]:null;if(_0x4c3494&&_0x453177)try{await Q['default'][_0x50f8f3(0x65e)]({'baseURL':_0x453177})['post']('',{'event':_0x5c7d53,'instance':this[_0x50f8f3(0x7f4)]['name'],'apikey':this[_0x50f8f3(0x7f4)][_0x50f8f3(0x77b)],'data':_0x231551}),this[_0x50f8f3(0x240)][_0x50f8f3(0x509)](this[_0x50f8f3(0x4a8)]+'\x20('+this['instance'][_0x50f8f3(0x7fe)]+_0x50f8f3(0x69f)+_0x5c7d53+':\x20'+_0x453177);}catch{this['logger']['error'](this[_0x50f8f3(0x4a8)]+'\x20('+this[_0x50f8f3(0x7f4)][_0x50f8f3(0x7fe)]+_0x50f8f3(0x301)+_0x5c7d53+':\x20'+_0x453177);}if(_0x2e842b&&_0x4067b2)try{await Q['default'][_0x50f8f3(0x65e)]({'baseURL':_0x4067b2})[_0x50f8f3(0x46b)]('',{'event':_0x5c7d53,'instance':this[_0x50f8f3(0x7f4)][_0x50f8f3(0x89c)],'apikey':this[_0x50f8f3(0x7f4)][_0x50f8f3(0x77b)],'data':_0x231551}),this[_0x50f8f3(0x240)][_0x50f8f3(0x509)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x50f8f3(0x303)+_0x5c7d53+':\x20'+_0x4067b2);}catch{this[_0x50f8f3(0x240)]['error'](this[_0x50f8f3(0x4a8)]+'\x20('+this[_0x50f8f3(0x7f4)][_0x50f8f3(0x7fe)]+_0x50f8f3(0x4e5)+_0x5c7d53+':\x20'+_0x4067b2);}}async['connectionUpdate']({qr:_0x334fcf,connection:_0x544b8e,lastDisconnect:_0x44245c}){const _0x20a04b=a0_0x2101b5;if(_0x334fcf){if(this[_0x20a04b(0x7f4)][_0x20a04b(0x212)][_0x20a04b(0x155)]===ko)return this[_0x20a04b(0x879)]('qrcode.updated',{'message':'Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','statusCode':w[_0x20a04b(0x23a)][_0x20a04b(0x811)]}),this[_0x20a04b(0x878)]={'state':_0x20a04b(0x72c),'statusReason':w[_0x20a04b(0x23a)]['connectionClosed']},this[_0x20a04b(0x879)](_0x20a04b(0x1f3),{'instance':this[_0x20a04b(0x7f4)][_0x20a04b(0x89c)],...this[_0x20a04b(0x878)]}),this[_0x20a04b(0x879)](_0x20a04b(0x384),{'instance':this[_0x20a04b(0x7f4)]['name'],'status':_0x20a04b(0x38f)}),this['repository'][_0x20a04b(0x7e4)]['delete'](this[_0x20a04b(0x7f4)][_0x20a04b(0x89c)]),this['endSession']=!0x0,ae[_0x20a04b(0x1c4)](B,this['instance'][_0x20a04b(0x89c)]),this[_0x20a04b(0x286)][_0x20a04b(0x598)](_0x20a04b(0x39f),this[_0x20a04b(0x7f4)][_0x20a04b(0x89c)]);this[_0x20a04b(0x7f4)][_0x20a04b(0x212)][_0x20a04b(0x155)]++;let _0x10bc37={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x20a04b(0x2af),'dark':_0x20a04b(0x6d9)}};Ti['default']['toDataURL'](_0x334fcf,_0x10bc37,(_0x165852,_0x8f3362)=>{const _0x4ffe71=_0x20a04b;if(_0x165852){this[_0x4ffe71(0x240)][_0x4ffe71(0x3c9)](this[_0x4ffe71(0x4a8)]+'\x20('+this[_0x4ffe71(0x7f4)][_0x4ffe71(0x7fe)]+_0x4ffe71(0x309)+(_0x165852 instanceof Error?_0x165852[_0x4ffe71(0x31f)]:JSON[_0x4ffe71(0x41d)](_0x165852,null,0x2)));return;}this[_0x4ffe71(0x7f4)][_0x4ffe71(0x212)][_0x4ffe71(0x623)]=_0x8f3362,this[_0x4ffe71(0x7f4)][_0x4ffe71(0x212)][_0x4ffe71(0x3b6)]=_0x334fcf,!this[_0x4ffe71(0x3b1)]&&this[_0x4ffe71(0x879)](_0x4ffe71(0x483),{'qrcode':{'instance':this[_0x4ffe71(0x7f4)][_0x4ffe71(0x89c)],'pairingCode':this[_0x4ffe71(0x7f4)][_0x4ffe71(0x212)][_0x4ffe71(0x1f8)],'code':_0x334fcf,'base64':_0x8f3362}});}),this['phoneNumber']?this['instance']['qrcode'][_0x20a04b(0x1f8)]||(await(0x0,w[_0x20a04b(0x64d)])(0x7d0),this[_0x20a04b(0x7f4)]['qrcode']['pairingCode']=await this[_0x20a04b(0x796)]['requestPairingCode'](this[_0x20a04b(0x3b1)])):this['instance']['qrcode']['pairingCode']=null,_i[_0x20a04b(0x7ae)][_0x20a04b(0x41e)](_0x334fcf,{'small':!0x0},_0x3b3fa9=>this[_0x20a04b(0x240)]['log'](_0x20a04b(0x87e)+this[_0x20a04b(0x7f4)][_0x20a04b(0x89c)]+_0x20a04b(0x697)+this['instance']['qrcode'][_0x20a04b(0x155)]+_0x20a04b(0x21b)+this['instance'][_0x20a04b(0x212)][_0x20a04b(0x1f8)]+_0x20a04b(0x4cd)+_0x3b3fa9));}if(_0x544b8e&&(this['stateConnection']={'state':_0x544b8e,'statusReason':_0x44245c?.['error']?.[_0x20a04b(0x6d4)]?.[_0x20a04b(0x5dc)]??0xc8},this[_0x20a04b(0x879)](_0x20a04b(0x1f3),{'instance':this['instance'][_0x20a04b(0x89c)],...this[_0x20a04b(0x878)]})),_0x544b8e===_0x20a04b(0x584)){if(this[_0x20a04b(0x1c9)]++,this[_0x20a04b(0x379)]['push'](Date[_0x20a04b(0x87f)]()),this[_0x20a04b(0x379)]=this['reconnectTimestamps'][_0x20a04b(0x285)](_0x1fde79=>Date[_0x20a04b(0x87f)]()-_0x1fde79<this['RECONNECT_TIME_FRAME']),_0x44245c[_0x20a04b(0x3c9)]?.['output']?.[_0x20a04b(0x5dc)]!==w['DisconnectReason']['loggedOut']){let _0x98cd4c=this[_0x20a04b(0x1c9)]<=0x1?0x0:Math[_0x20a04b(0x76c)](Math[_0x20a04b(0x5d9)](0x2,this[_0x20a04b(0x1c9)]-0x1)*0x3e8,0x493e0);console[_0x20a04b(0x509)](this[_0x20a04b(0x4a8)]+_0x20a04b(0x2dc)+this[_0x20a04b(0x1c9)]+_0x20a04b(0x2cc)+_0x98cd4c/0x3e8+_0x20a04b(0x837)),await new Promise(_0x1efcae=>setTimeout(_0x1efcae,_0x98cd4c)),console[_0x20a04b(0x509)]('Tentando\x20reconectar...'),await this[_0x20a04b(0x802)]();}else{this[_0x20a04b(0x879)](_0x20a04b(0x384),{'instance':this[_0x20a04b(0x7f4)]['name'],'status':_0x20a04b(0x38f)}),this['instance'][_0x20a04b(0x463)]['isConnected']=!0x1,this[_0x20a04b(0x43b)]['webhook'][_0x20a04b(0x57b)](this[_0x20a04b(0x4a8)]),this[_0x20a04b(0x43b)]['auth'][_0x20a04b(0x65e)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x20a04b(0x87f)]()},this[_0x20a04b(0x7f4)][_0x20a04b(0x89c)]),ae['removeIPv6ById'](B,this[_0x20a04b(0x7f4)][_0x20a04b(0x89c)]);try{this[_0x20a04b(0x240)][_0x20a04b(0x667)](this[_0x20a04b(0x4a8)]+'\x20('+this[_0x20a04b(0x7f4)][_0x20a04b(0x7fe)]+'):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...');let _0x39e309=await this[_0x20a04b(0x43b)][_0x20a04b(0x31f)][_0x20a04b(0x3f7)](this[_0x20a04b(0x7f4)][_0x20a04b(0x7fe)]);_0x39e309[_0x20a04b(0x29e)]?this[_0x20a04b(0x240)][_0x20a04b(0x667)](this[_0x20a04b(0x4a8)]+'\x20('+this[_0x20a04b(0x7f4)][_0x20a04b(0x7fe)]+_0x20a04b(0x79c)):this[_0x20a04b(0x240)]['error'](_0x20a04b(0x4de)+_0x39e309['error']);}catch(_0x235cf4){this['logger']['error'](_0x20a04b(0x63c)+_0x235cf4[_0x20a04b(0x31f)]);}this[_0x20a04b(0x7f4)][_0x20a04b(0x463)][_0x20a04b(0x3ca)]!==null&&(this['logger']['verbose'](this[_0x20a04b(0x4a8)]+'\x20('+this['instance']['wuid']+_0x20a04b(0x4cc)),clearInterval(this[_0x20a04b(0x7f4)]['ScheduleMessage'][_0x20a04b(0x3ca)]),this['instance'][_0x20a04b(0x463)][_0x20a04b(0x3ca)]=null),this[_0x20a04b(0x240)][_0x20a04b(0x667)](this['instanceName']+'\x20('+this[_0x20a04b(0x7f4)][_0x20a04b(0x7fe)]+_0x20a04b(0x19d)),this['AutomateSystem']=null,this['eventEmitter'][_0x20a04b(0x598)](_0x20a04b(0x3d2),this['instance'][_0x20a04b(0x89c)],_0x20a04b(0x1f5)),this['client']?.['ws']?.[_0x20a04b(0x584)](),this[_0x20a04b(0x796)][_0x20a04b(0x3bf)](new Error(_0x20a04b(0x5c3)));}}if(_0x544b8e===_0x20a04b(0x71e)){this['logger'][_0x20a04b(0x7e3)](this[_0x20a04b(0x4a8)]+'\x20('+this[_0x20a04b(0x7f4)][_0x20a04b(0x7fe)]+_0x20a04b(0x587)+this[_0x20a04b(0x796)][_0x20a04b(0x32b)][_0x20a04b(0x4da)]?.['myAppStateKeyId']),this[_0x20a04b(0x796)]['authState'][_0x20a04b(0x4da)]?.[_0x20a04b(0x1c2)]||(this[_0x20a04b(0x240)][_0x20a04b(0x7e3)](this['instanceName']+'\x20('+this[_0x20a04b(0x7f4)][_0x20a04b(0x7fe)]+'):\x20ev.flush\x20realizado'),this['client']['ev'][_0x20a04b(0x148)]()),this[_0x20a04b(0x88f)],this[_0x20a04b(0x7f4)][_0x20a04b(0x7fe)]=this[_0x20a04b(0x796)][_0x20a04b(0x4bb)]['id']['replace'](/:\d+/,'')[_0x20a04b(0x869)](_0x20a04b(0x1b5),''),this[_0x20a04b(0x7f4)][_0x20a04b(0x728)]=(await this[_0x20a04b(0x1d1)](this[_0x20a04b(0x7f4)][_0x20a04b(0x7fe)]+_0x20a04b(0x1b5)))[_0x20a04b(0x728)],this[_0x20a04b(0x43b)]['auth']['create']({'online':!0x0,'owner':this[_0x20a04b(0x7f4)]['wuid'],'lastDisconnect':null},this['instance'][_0x20a04b(0x89c)]);let _0x1d384f='Número:\x20'+this['instance']['wuid'],_0x2e42a0=0x28,_0x48aee1=Math[_0x20a04b(0x72b)]((_0x2e42a0-_0x1d384f[_0x20a04b(0x608)])/0x2),_0xcec7a7='\x20'['repeat'](_0x48aee1),_0x2e05f8='CONECTADO\x20À\x20UAZAPI',_0x57c88a='Instância:\x20'+this['instance']['name'],_0x5dbf51=(''+_0xcec7a7+_0x1d384f+_0xcec7a7)[_0x20a04b(0x27e)](_0x2e42a0,'\x20'),_0x4e8e02=(''+_0xcec7a7+_0x2e05f8+_0xcec7a7)[_0x20a04b(0x27e)](_0x2e42a0,'\x20'),_0xe82532=(''+_0xcec7a7+_0x57c88a+_0xcec7a7)[_0x20a04b(0x27e)](_0x2e42a0,'\x20'),_0x1802da=Math[_0x20a04b(0x763)](_0x5dbf51[_0x20a04b(0x608)],_0x4e8e02[_0x20a04b(0x608)],_0xe82532['length']),_0x161007=_0x5dbf51[_0x20a04b(0x27e)](_0x1802da,'\x20'),_0x27a788=_0x4e8e02[_0x20a04b(0x27e)](_0x1802da,'\x20'),_0x5b6c28=_0xe82532[_0x20a04b(0x27e)](_0x1802da,'\x20');this['logger']['info']((_0x20a04b(0x642)+'─'[_0x20a04b(0x45d)](_0x1802da)+'┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0x27a788+_0x20a04b(0x533)+_0x5b6c28+_0x20a04b(0x533)+_0x161007+_0x20a04b(0x447)+'─'[_0x20a04b(0x45d)](_0x1802da)+'┘')[_0x20a04b(0x869)](/^ +/gm,'\x20\x20')),this[_0x20a04b(0x64a)](),this[_0x20a04b(0x7f4)][_0x20a04b(0x463)]['isConnected']=!0x0;}}['resetReconnectionVariables'](){const _0x408846=a0_0x2101b5;this[_0x408846(0x1c9)]=0x0,this[_0x408846(0x379)]=[];}async['getMessage'](_0x9b107c,_0x13b9f2=!0x1){const _0xea0ab7=a0_0x2101b5;try{let _0x223317=await this[_0xea0ab7(0x43b)][_0xea0ab7(0x31f)][_0xea0ab7(0x604)]({'where':{'_id':_0x9b107c['id']}},this['instance']['wuid']);return _0x13b9f2?_0x223317[0x0]:_0x223317[0x0][_0xea0ab7(0x31f)];}catch{return{'conversation':''};}}[a0_0x2101b5(0x7fc)](){const _0x2ae67d=a0_0x2101b5;let _0x349944=this[_0x2ae67d(0x596)][_0x2ae67d(0x34a)](_0x2ae67d(0x8c9)),_0x1c6ab5=this['configService'][_0x2ae67d(0x34a)]('DATABASE');_0x349944?.[_0x2ae67d(0x2ad)]&&!_0x1c6ab5[_0x2ae67d(0x6f5)]&&setInterval(()=>{const _0x390283=_0x2ae67d;try{for(let [_0x4c48cc,_0xc8db33]of Object[_0x390283(0x7bc)](_0x349944))_0xc8db33===!0x0&&(0x0,Fe[_0x390283(0x198)])(_0x390283(0x574)+(0x0,j['join'])(this[_0x390283(0x570)],_0x4c48cc[_0x390283(0x86b)](),this['instance']['wuid'])+_0x390283(0x401));}catch{}},(_0x349944?.[_0x2ae67d(0x2ad)]??0xe10)*0x3e8);}async['defineAuthState'](){const _0x393877=a0_0x2101b5;let _0x7aad70=this['configService']['get'](_0x393877(0x5b1)),_0x5a7bee=this[_0x393877(0x596)][_0x393877(0x34a)]('REDIS');return _0x5a7bee?.[_0x393877(0x6f5)]?await Os(_0x5a7bee,this[_0x393877(0x7f4)][_0x393877(0x89c)]):_0x7aad70['ENABLED']?await _s(this['instance']['name']):await(0x0,w[_0x393877(0x5fb)])((0x0,j[_0x393877(0x1b4)])(Se,this[_0x393877(0x7f4)][_0x393877(0x89c)]));}async[a0_0x2101b5(0x64a)](){const _0x1def6f=a0_0x2101b5;let _0x3b279d=()=>Math[_0x1def6f(0x72b)](Math[_0x1def6f(0x78b)]()*0x4e21)+0x7d0,_0x33b634=async()=>{const _0x57ea2b=_0x1def6f;if(!this[_0x57ea2b(0x7f4)]['ScheduleMessage'][_0x57ea2b(0x2f8)]){this[_0x57ea2b(0x240)][_0x57ea2b(0x667)](this[_0x57ea2b(0x4a8)]+'\x20('+this['instance'][_0x57ea2b(0x7fe)]+_0x57ea2b(0x4a1)),this[_0x57ea2b(0x3ae)]=!0x1;return;}if(this[_0x57ea2b(0x7f4)]['wuid']&&this[_0x57ea2b(0x655)]&&this['instance'][_0x57ea2b(0x463)][_0x57ea2b(0x3ca)]!==null&&this[_0x57ea2b(0x7f4)][_0x57ea2b(0x463)][_0x57ea2b(0x3ca)]!==void 0x0){let _0x315f67=Math[_0x57ea2b(0x602)](this[_0x57ea2b(0x7f4)]['ScheduleMessage'][_0x57ea2b(0x3ca)]/0xea60);this['logger'][_0x57ea2b(0x667)](this[_0x57ea2b(0x4a8)]+'\x20('+this[_0x57ea2b(0x7f4)]['wuid']+_0x57ea2b(0x560)+_0x315f67+_0x57ea2b(0x497)),this['isRunning']=!0x1;return;}else this[_0x57ea2b(0x7f4)][_0x57ea2b(0x7fe)]&&(this[_0x57ea2b(0x240)]['verbose'](this['instanceName']+'\x20('+this[_0x57ea2b(0x7f4)][_0x57ea2b(0x7fe)]+_0x57ea2b(0x514)),this['AutomateSystem']||(await this[_0x57ea2b(0x474)](),this['findRealGroups'](),this[_0x57ea2b(0x172)]()),(this[_0x57ea2b(0x7f4)]['ScheduleMessage'][_0x57ea2b(0x3ca)]===null||this[_0x57ea2b(0x7f4)]['ScheduleMessage']['delayMessage']===void 0x0)&&await this['scheduleNextCheck']());if(this[_0x57ea2b(0x3ae)]){let _0x41dd67=_0x3b279d();this[_0x57ea2b(0x240)][_0x57ea2b(0x667)](this['instanceName']+_0x57ea2b(0x455)+_0x41dd67/0x3e8+_0x57ea2b(0x52f)),setTimeout(_0x33b634,_0x41dd67);}};if(this['isRunning'])return;this[_0x1def6f(0x3ae)]=!0x0;let _0x2d6fbc=_0x3b279d();setTimeout(_0x33b634,_0x2d6fbc);}async[a0_0x2101b5(0x172)](){const _0x3a7b17=a0_0x2101b5;let _0x296747=this['instance'][_0x3a7b17(0x7fe)];try{let _0x2541c6=await this[_0x3a7b17(0x43b)]['flow'][_0x3a7b17(0x1a8)]({'where':{'$or':[{'owner':_0x296747},{'whoCanUse':{'$in':[_0x296747]}},{'shareOwners':{'$in':[_0x296747]}}]}}),_0x363dbd=new Map(this[_0x3a7b17(0x655)][_0x3a7b17(0x145)][_0x3a7b17(0x5e6)](_0x4f636d=>[_0x4f636d['_id'],_0x4f636d])),_0x4ff3f8=_0x2541c6['map'](_0x4d9de7=>{const _0x5e6568=_0x3a7b17;let _0x5da703=_0x363dbd[_0x5e6568(0x34a)](_0x4d9de7['_id']?.[_0x5e6568(0x60f)]());return{'_id':_0x4d9de7['_id']?.[_0x5e6568(0x60f)](),'name':_0x5da703?.[_0x5e6568(0x89c)]??_0x4d9de7[_0x5e6568(0x89c)],'default':_0x5da703?.[_0x5e6568(0x7ae)]??_0x4d9de7[_0x5e6568(0x7ae)]??!0x1,'startCommand':_0x5da703?.[_0x5e6568(0x23c)]??_0x4d9de7[_0x5e6568(0x2ce)],'minutesToClose':_0x5da703?.[_0x5e6568(0x23e)]??_0x4d9de7[_0x5e6568(0x23e)]??0xa,'readMessages':_0x5da703?.[_0x5e6568(0x82e)]??_0x4d9de7[_0x5e6568(0x82e)]??!0x1,'testingWith':_0x5da703?.[_0x5e6568(0x4ed)]??_0x4d9de7[_0x5e6568(0x4ed)],'canEdit':_0x4d9de7[_0x5e6568(0x235)]===_0x296747||(_0x4d9de7[_0x5e6568(0x1b0)]??[])[_0x5e6568(0x267)](_0x296747),'usersCount':(_0x4d9de7[_0x5e6568(0x2f4)]??[])['length']??0x0};}),_0x316ef3=!0x1;_0x4ff3f8[_0x3a7b17(0x600)](_0x5bde06=>{const _0x33bd20=_0x3a7b17;_0x5bde06[_0x33bd20(0x7ae)]&&(_0x316ef3?_0x5bde06[_0x33bd20(0x7ae)]=!0x1:_0x316ef3=!0x0);}),this[_0x3a7b17(0x655)][_0x3a7b17(0x145)]=_0x4ff3f8;let _0x361357={'flows':_0x4ff3f8};return await this[_0x3a7b17(0x43b)][_0x3a7b17(0x1ff)]['update'](_0x361357,_0x296747),this[_0x3a7b17(0x240)][_0x3a7b17(0x667)](this[_0x3a7b17(0x4a8)]+'\x20('+_0x296747+_0x3a7b17(0x472)),_0x4ff3f8['length'];}catch(_0x206c32){return this[_0x3a7b17(0x240)][_0x3a7b17(0x3c9)](this[_0x3a7b17(0x4a8)]+'\x20('+_0x296747+_0x3a7b17(0x814)+(_0x206c32 instanceof Error?_0x206c32[_0x3a7b17(0x31f)]:JSON['stringify'](_0x206c32,null,0x2))),{'message':_0x3a7b17(0x5c2)+(_0x206c32 instanceof Error?_0x206c32[_0x3a7b17(0x31f)]:JSON[_0x3a7b17(0x41d)](_0x206c32,null,0x2))};}}async[a0_0x2101b5(0x802)](_0x221406){const _0x2bd218=a0_0x2101b5;try{let _0xd4b217=await this[_0x2bd218(0x43b)]['instance'][_0x2bd218(0x505)]({'where':{'_id':B+'-'+this[_0x2bd218(0x4a8)]}}),_0x53bace,_0x502a50=!ae[_0x2bd218(0x2fd)]||!ae[_0x2bd218(0x508)];console[_0x2bd218(0x509)](_0x2bd218(0x4ba)),console[_0x2bd218(0x509)](_0x2bd218(0x6ad),Ai),console[_0x2bd218(0x509)](_0x2bd218(0x8bf),this[_0x2bd218(0x1c9)]),console[_0x2bd218(0x509)](_0x2bd218(0x4ba)),Ai&&!_0x502a50&&(this['reconnectAttempts']<0x4||!this[_0x2bd218(0x1c9)]?_0xd4b217&&_0xd4b217['ip']?(_0x53bace=_0xd4b217['ip'],console[_0x2bd218(0x509)](_0x2bd218(0x3e4)+_0x53bace)):(_0x53bace=await ae[_0x2bd218(0x34c)](B,this[_0x2bd218(0x7f4)][_0x2bd218(0x89c)]),_0x53bace?(console[_0x2bd218(0x509)](_0x2bd218(0x749)+_0x53bace),await(0x0,w['delay'])(0x7d0)):console[_0x2bd218(0x3c9)](_0x2bd218(0x832))):this[_0x2bd218(0x1c9)]<0x6&&(await ae[_0x2bd218(0x1c4)](B,this[_0x2bd218(0x7f4)][_0x2bd218(0x89c)]),console[_0x2bd218(0x509)](_0x2bd218(0x657)),_0x53bace=await ae[_0x2bd218(0x34c)](B,this[_0x2bd218(0x7f4)][_0x2bd218(0x89c)]),_0x53bace?(console[_0x2bd218(0x509)](_0x2bd218(0x749)+_0x53bace),await(0x0,w['delay'])(0x7d0)):console[_0x2bd218(0x3c9)](_0x2bd218(0x433)))),this[_0x2bd218(0x80a)](),this[_0x2bd218(0x7f4)][_0x2bd218(0x77b)]=(await this['repository'][_0x2bd218(0x7e4)][_0x2bd218(0x604)](this[_0x2bd218(0x7f4)][_0x2bd218(0x89c)]))['apikey'],this[_0x2bd218(0x7f4)][_0x2bd218(0x32b)]=await this[_0x2bd218(0x4e3)]();let {version:_0x37911d}=await(0x0,w[_0x2bd218(0x313)])(),_0x44cc1f=[xi,Fs,(0x0,Ds['release'])()],_0x1b491b={'localAddress':_0x53bace,'auth':{'creds':this['instance']['authState'][_0x2bd218(0x293)][_0x2bd218(0x4da)],'keys':(0x0,w[_0x2bd218(0x6a8)])(this[_0x2bd218(0x7f4)][_0x2bd218(0x32b)][_0x2bd218(0x293)]['keys'],(0x0,Ft['default'])({'level':'error'}))},'logger':(0x0,Ft[_0x2bd218(0x7ae)])({'level':_0x2bd218(0x3c9)}),'printQRInTerminal':!0x1,'browser':_0x221406?['Mac\x20OS',Fs,(0x0,Ds[_0x2bd218(0x789)])()]:_0x44cc1f,'version':_0x37911d,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x4388ba=>{const _0x12e3ad=_0x2bd218;let _0x6f6aa7=this[_0x12e3ad(0x71d)]?.['groups_ignore']&&(0x0,w[_0x12e3ad(0x39a)])(_0x4388ba);return(0x0,w[_0x12e3ad(0x34e)])(_0x4388ba)||_0x6f6aa7;},'msgRetryCounterCache':this['msgRetryCounterCache'],'getMessage':async _0x5db5fb=>await this[_0x2bd218(0x4ca)](_0x5db5fb),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x2bd218(0x1b2)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x3e5e98){const _0x1d34b3=_0x2bd218;return _0x3e5e98[_0x1d34b3(0x4d2)]?.[_0x1d34b3(0x31f)]?.['listMessage']?.[_0x1d34b3(0x5b0)]===w[_0x1d34b3(0x843)][_0x1d34b3(0x83d)][_0x1d34b3(0x716)][_0x1d34b3(0x1e2)][_0x1d34b3(0x78a)]&&(_0x3e5e98=JSON[_0x1d34b3(0x4bc)](JSON[_0x1d34b3(0x41d)](_0x3e5e98)),_0x3e5e98[_0x1d34b3(0x4d2)][_0x1d34b3(0x31f)][_0x1d34b3(0x42e)][_0x1d34b3(0x5b0)]=w['proto'][_0x1d34b3(0x83d)][_0x1d34b3(0x716)][_0x1d34b3(0x1e2)]['SINGLE_SELECT']),_0x3e5e98[_0x1d34b3(0x42e)]?.[_0x1d34b3(0x5b0)]==w[_0x1d34b3(0x843)][_0x1d34b3(0x83d)]['ListMessage'][_0x1d34b3(0x1e2)]['PRODUCT_LIST']&&(_0x3e5e98=JSON['parse'](JSON['stringify'](_0x3e5e98)),_0x3e5e98[_0x1d34b3(0x42e)][_0x1d34b3(0x5b0)]=w[_0x1d34b3(0x843)]['Message']['ListMessage'][_0x1d34b3(0x1e2)][_0x1d34b3(0x3c4)]),_0x3e5e98;}};return this[_0x2bd218(0x853)]=!0x1,this[_0x2bd218(0x796)]=(0x0,w['default'])(_0x1b491b),this[_0x2bd218(0x612)](),this['phoneNumber']=_0x221406,this[_0x2bd218(0x796)];}catch(_0x5c5a3f){let _0x3b957c=_0x2bd218(0x52c),_0x402898=_0x5c5a3f instanceof Error?_0x5c5a3f[_0x2bd218(0x31f)]:typeof _0x5c5a3f==_0x2bd218(0x69d)?JSON[_0x2bd218(0x41d)](_0x5c5a3f):_0x5c5a3f,_0xa24fa7=_0x3b957c+':\x20'+_0x402898;throw this[_0x2bd218(0x240)][_0x2bd218(0x3c9)](this['instanceName']+'\x20('+this[_0x2bd218(0x7f4)]['wuid']+_0x2bd218(0x33f)+_0xa24fa7),console['error'](_0x2bd218(0x3d5),_0x5c5a3f),_0x5c5a3f instanceof Error&&console[_0x2bd218(0x3c9)](_0x2bd218(0x6c4),_0x5c5a3f['stack']),new x(_0xa24fa7);}}[a0_0x2101b5(0x612)](){const _0x5f357b=a0_0x2101b5;this[_0x5f357b(0x796)]['ev'][_0x5f357b(0x37e)](_0x4175c0=>{const _0x2e8ed3=_0x5f357b;if(!this[_0x2e8ed3(0x853)]){let _0x1ba574=this[_0x2e8ed3(0x596)][_0x2e8ed3(0x34a)](_0x2e8ed3(0x5b1));if(_0x4175c0[_0x2e8ed3(0x3be)]){let _0x5ec2e8=_0x4175c0['labels.edit'];this[_0x2e8ed3(0x310)]['labels.edit'](_0x5ec2e8);}if(_0x4175c0['labels.association']){let _0x2b6f3d=_0x4175c0[_0x2e8ed3(0x3f0)];this['messageHandle'][_0x2e8ed3(0x3f0)](_0x2b6f3d);}if(_0x4175c0['connection.update']&&this[_0x2e8ed3(0x899)](_0x4175c0[_0x2e8ed3(0x1f3)]),_0x4175c0['creds.update']&&this[_0x2e8ed3(0x7f4)]['authState'][_0x2e8ed3(0x220)](),_0x4175c0['messaging-history.set']){let _0x28310b=_0x4175c0[_0x2e8ed3(0x47a)];this[_0x2e8ed3(0x310)]['messaging-history.set'](_0x28310b,_0x1ba574);}if(_0x4175c0[_0x2e8ed3(0x333)]){let _0x235079=_0x4175c0[_0x2e8ed3(0x333)];this[_0x2e8ed3(0x310)]['messages.upsert'](_0x235079,_0x1ba574);}if(_0x4175c0['messages.update']){let _0x566a33=_0x4175c0[_0x2e8ed3(0x54b)];this['messageHandle']['messages.update'](_0x566a33,_0x1ba574);}if(_0x4175c0['presence.update']){let _0x108113=_0x4175c0[_0x2e8ed3(0x798)];if(this['localWebhook']?.['groups_ignore']&&_0x108113['id'][_0x2e8ed3(0x267)]('@g.us'))return;this['sendDataWebhook']('presence.update',_0x108113);}if(_0x4175c0[_0x2e8ed3(0x209)]){let _0x154ba4=_0x4175c0[_0x2e8ed3(0x209)];this[_0x2e8ed3(0x222)][_0x2e8ed3(0x209)](_0x154ba4);}if(_0x4175c0['groups.update']){let _0x2f230b=_0x4175c0[_0x2e8ed3(0x6af)];this[_0x2e8ed3(0x222)][_0x2e8ed3(0x6af)](_0x2f230b);}if(_0x4175c0[_0x2e8ed3(0x2c5)]){let _0x27d0c2=_0x4175c0[_0x2e8ed3(0x2c5)];this['groupHandler'][_0x2e8ed3(0x2c5)](_0x27d0c2);}if(_0x4175c0['chats.upsert']){let _0x423de2=_0x4175c0[_0x2e8ed3(0x5f4)];this[_0x2e8ed3(0x153)]['chats.upsert'](_0x423de2,_0x1ba574);}if(_0x4175c0['chats.update']){let _0x34bb79=_0x4175c0[_0x2e8ed3(0x895)];this[_0x2e8ed3(0x153)][_0x2e8ed3(0x895)](_0x34bb79,_0x1ba574);}if(_0x4175c0[_0x2e8ed3(0x563)]){let _0x25dd8f=_0x4175c0[_0x2e8ed3(0x563)];this[_0x2e8ed3(0x153)]['chats.delete'](_0x25dd8f);}if(_0x4175c0[_0x2e8ed3(0x8b0)]){let _0x4863e3=_0x4175c0[_0x2e8ed3(0x8b0)];this[_0x2e8ed3(0x170)][_0x2e8ed3(0x8b0)](_0x4863e3,_0x1ba574);}if(_0x4175c0[_0x2e8ed3(0x7fd)]){let _0xdf6376=_0x4175c0[_0x2e8ed3(0x7fd)];this[_0x2e8ed3(0x170)][_0x2e8ed3(0x7fd)](_0xdf6376,_0x1ba574);}}});}async[a0_0x2101b5(0x16a)](_0x90c7cd,_0x4f68ed){const _0xcce7cc=a0_0x2101b5;if(_0x4f68ed>=0xa){console['error'](this['instanceName']+'\x20('+this[_0xcce7cc(0x7f4)][_0xcce7cc(0x7fe)]+'):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar'),delete Lt[_0x90c7cd[_0xcce7cc(0x150)]['id']];return;}try{console[_0xcce7cc(0x3c9)](this['instanceName']+'\x20('+this['instance'][_0xcce7cc(0x7fe)]+_0xcce7cc(0x856)+(_0x4f68ed+0x1)),await this[_0xcce7cc(0x796)][_0xcce7cc(0x30a)](JSON['parse'](_0x90c7cd[_0xcce7cc(0x31e)][0x1],w['BufferJSON'][_0xcce7cc(0x764)])),console['error'](_0xcce7cc(0x443));}catch(_0x389803){console['error'](this[_0xcce7cc(0x4a8)]+'\x20('+this['instance'][_0xcce7cc(0x7fe)]+'):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20'+_0x389803),setTimeout(()=>this[_0xcce7cc(0x16a)](_0x90c7cd,_0x4f68ed+0x1),Math['pow'](0x2,_0x4f68ed)*0x3e8);}}async[a0_0x2101b5(0x17c)](_0x2edce2){const _0x483a4f=a0_0x2101b5;let _0x4d919b=_0x2edce2[_0x483a4f(0x150)][_0x483a4f(0x4e1)][_0x483a4f(0x643)](_0x483a4f(0x85d)),_0x4b6ea2;if(_0x2edce2[_0x483a4f(0x150)]['fromMe'])_0x4b6ea2=this['instance'][_0x483a4f(0x728)];else{let _0x45015a=_0x4d919b?_0x2edce2['key'][_0x483a4f(0x620)]:_0x2edce2[_0x483a4f(0x150)]['remoteJid'];_0x4b6ea2=(await this[_0x483a4f(0x81b)](_0x45015a,_0x2edce2[_0x483a4f(0x3d1)],!0x1))[_0x483a4f(0x406)][_0x483a4f(0x860)];}let _0xbae8af={'_id':_0x2edce2[_0x483a4f(0x150)]['id'],'key':_0x2edce2['key'],'isGroup':_0x4d919b,'profilePictureUrl':_0x4b6ea2,'pushName':_0x2edce2[_0x483a4f(0x3d1)],'message':{'text':_0x483a4f(0x7b3)},'messageType':_0x483a4f(0x3c9),'message_normalized':{'key':_0x2edce2['key'],'pushName':_0x2edce2[_0x483a4f(0x3d1)],'messageTimestamp':_0x2edce2[_0x483a4f(0x646)],'source':(0x0,w[_0x483a4f(0x380)])(_0x2edce2['key']['id']),'text':_0x483a4f(0x7b3)},'messageTimestamp':_0x2edce2[_0x483a4f(0x646)],'owner':this[_0x483a4f(0x7f4)][_0x483a4f(0x7fe)],'source':(0x0,w[_0x483a4f(0x380)])(_0x2edce2[_0x483a4f(0x150)]['id'])};this[_0x483a4f(0x240)][_0x483a4f(0x3c9)](this[_0x483a4f(0x4a8)]+'\x20('+this[_0x483a4f(0x7f4)][_0x483a4f(0x7fe)]+_0x483a4f(0x33f)+(_0xbae8af[_0x483a4f(0x150)]?.[_0x483a4f(0x4f0)]?_0x483a4f(0x3c3):'recebido\x20de')+'\x20['+_0xbae8af['key']?.['remoteJid']['replace'](_0x483a4f(0x1b5),'')+_0x483a4f(0x245)+_0xbae8af[_0x483a4f(0x800)]+')'),_0xbae8af['message_normalized']?.[_0x483a4f(0x1b9)]&&this['logger'][_0x483a4f(0x3c9)](_0x2edce2[_0x483a4f(0x150)]['id']+':\x20'+_0xbae8af[_0x483a4f(0x2e4)]?.[_0x483a4f(0x1b9)]),await this[_0x483a4f(0x43b)]['message']['insert']([_0xbae8af],this[_0x483a4f(0x7f4)]['wuid']),await this[_0x483a4f(0x43b)][_0x483a4f(0x29d)][_0x483a4f(0x7a2)]([_0xbae8af]),this[_0x483a4f(0x879)](_0x483a4f(0x333),_0xbae8af),F(this[_0x483a4f(0x4a8)],_0x483a4f(0x76e),{'message':_0xbae8af});}[a0_0x2101b5(0x465)](_0x90ef6){return new Promise(_0x3120b9=>setTimeout(_0x3120b9,_0x90ef6));}[a0_0x2101b5(0x1ed)](_0x4904f4){const _0x6ffda=a0_0x2101b5;_0x4904f4=_0x4904f4[_0x6ffda(0x869)](/\D/g,'');let _0x1d7789=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x6ffda(0x49b)](_0x4904f4);if(_0x1d7789&&_0x1d7789[0x1]==='55'){let _0x4aa2b4=_0x1d7789[0x2],_0x277125=_0x1d7789[0x3],_0x1aca0f=_0x1d7789[0x4];if(parseInt(_0x4aa2b4)>=0x1f&&_0x277125==='9')return _0x1d7789[0x1]+_0x4aa2b4+_0x1aca0f;}return _0x4904f4;}[a0_0x2101b5(0x28b)](_0x3b5e1e){const _0x151b54=a0_0x2101b5;return _0x3b5e1e[_0x151b54(0x267)](_0x151b54(0x85d))||_0x3b5e1e[_0x151b54(0x267)](_0x151b54(0x1b5))||_0x3b5e1e[_0x151b54(0x267)]('@broadcast')?_0x3b5e1e:(_0x3b5e1e=_0x3b5e1e?.['replace'](/\s/g,'')[_0x151b54(0x869)](/\+/g,'')[_0x151b54(0x869)](/\(/g,'')['replace'](/\)/g,'')[_0x151b54(0x2bd)](/\:/)[0x0][_0x151b54(0x2bd)]('@')[0x0],_0x3b5e1e[_0x151b54(0x608)]>=0x12?(_0x3b5e1e=_0x3b5e1e['replace'](/[^\d-]/g,''),_0x3b5e1e+'@g.us'):(_0x3b5e1e=_0x3b5e1e[_0x151b54(0x869)](/\D/g,''),_0x3b5e1e+'@s.whatsapp.net'));}async[a0_0x2101b5(0x73e)](_0x409817){const _0xdea08a=a0_0x2101b5;let _0x50db1a=(await this['whatsappNumber']({'numbers':[_0x409817[_0xdea08a(0x17a)]]}))[0x0];if(!_0x50db1a['exists']&&!(0x0,w[_0xdea08a(0x39a)])(_0x50db1a[_0xdea08a(0x58f)])&&!_0x50db1a[_0xdea08a(0x58f)][_0xdea08a(0x267)](_0xdea08a(0x3fe)))throw new m(_0x50db1a);let _0x1e7843=_0x50db1a[_0xdea08a(0x58f)];try{return await this[_0xdea08a(0x796)]['presenceSubscribe'](_0x1e7843),await this[_0xdea08a(0x796)]['sendPresenceUpdate'](_0x409817[_0xdea08a(0x780)],_0x1e7843),{'status':0xc8,'presence':_0x409817[_0xdea08a(0x780)]};}catch(_0x41d144){let _0x346322='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence',_0x4859ad=_0x41d144 instanceof Error?_0x41d144[_0xdea08a(0x31f)]:typeof _0x41d144==_0xdea08a(0x69d)?JSON['stringify'](_0x41d144):_0x41d144,_0x199a6f=_0x346322+':\x20'+_0x4859ad;throw this[_0xdea08a(0x240)][_0xdea08a(0x3c9)](this[_0xdea08a(0x4a8)]+'\x20('+this[_0xdea08a(0x7f4)]['wuid']+_0xdea08a(0x33f)+_0x199a6f),new m(_0x199a6f);}}async[a0_0x2101b5(0x81b)](_0x2402fb,_0x3f9931,_0x2854fe,_0x2700c5=!0x0){const _0x3b342a=a0_0x2101b5;let _0x1c7521=await this[_0x3b342a(0x43b)][_0x3b342a(0x7e6)][_0x3b342a(0x505)]({'where':{'_id':_0x2402fb}});if(!_0x1c7521&&!_0x2700c5)return;let _0x5b1532={'lastUpdate':Date[_0x3b342a(0x87f)]()};if(_0x2854fe||!_0x1c7521?.[_0x3b342a(0x864)]||Date['now']()-_0x1c7521[_0x3b342a(0x864)]>0x18*0x3c*0x3c*0x3e8)try{let _0x420cde=(await this[_0x3b342a(0x1d1)](_0x2402fb))['profilePictureUrl'];_0x5b1532['pictureUrl']=_0x420cde;}catch(_0x57efb6){let _0x9a66a7=_0x3b342a(0x270),_0x533d12=_0x57efb6 instanceof Error?_0x57efb6[_0x3b342a(0x31f)]:typeof _0x57efb6=='object'?JSON[_0x3b342a(0x41d)](_0x57efb6):_0x57efb6,_0x47d653=_0x9a66a7+':\x20'+_0x533d12;throw this[_0x3b342a(0x240)]['error'](this[_0x3b342a(0x4a8)]+'\x20('+this[_0x3b342a(0x7f4)][_0x3b342a(0x7fe)]+_0x3b342a(0x33f)+_0x47d653),new m(_0x47d653);}return _0x3f9931&&_0x1c7521?.['name']!==_0x3f9931&&(_0x5b1532[_0x3b342a(0x89c)]=_0x3f9931),Object[_0x3b342a(0x59a)](_0x5b1532)['length']>0x1&&(_0x1c7521?await this['repository'][_0x3b342a(0x7e6)][_0x3b342a(0x842)]({'where':{'_id':_0x2402fb}},_0x5b1532):await this['repository']['cacheContact']['insert']([{'_id':_0x2402fb,..._0x5b1532}]),_0x1c7521={..._0x1c7521,..._0x5b1532}),{'cachedContact':_0x1c7521};}async[a0_0x2101b5(0x1d1)](_0x5c8f4f){const _0x273cad=a0_0x2101b5;let _0x2349fc=this[_0x273cad(0x28b)](_0x5c8f4f);try{return{'wuid':_0x2349fc,'profilePictureUrl':await this[_0x273cad(0x796)][_0x273cad(0x728)](_0x2349fc,_0x273cad(0x2c4))};}catch{return{'wuid':_0x2349fc,'profilePictureUrl':null};}}async['sendMessageWithTyping'](_0x176789,_0x575512,_0x240942){const _0x282011=a0_0x2101b5;let _0x216a56;try{let _0x3e934b=(await this['whatsappNumber']({'numbers':[_0x176789]}))?.['shift']();if(!_0x3e934b[_0x282011(0x6de)]&&!(0x0,w[_0x282011(0x39a)])(_0x3e934b[_0x282011(0x58f)])&&!_0x3e934b[_0x282011(0x58f)][_0x282011(0x267)]('@broadcast'))throw new m(_0x3e934b);_0x216a56=_0x3e934b['jid'];}catch(_0x533394){_0x216a56=_0x176789,this[_0x282011(0x240)][_0x282011(0x7e3)](this[_0x282011(0x4a8)]+'\x20('+this[_0x282011(0x7f4)][_0x282011(0x7fe)]+_0x282011(0x5dd)+_0x533394[_0x282011(0x31f)]),this[_0x282011(0x240)][_0x282011(0x7e3)](this[_0x282011(0x4a8)]+'\x20('+this[_0x282011(0x7f4)][_0x282011(0x7fe)]+'):\x20sender\x20=\x20number:\x20'+_0x216a56);}try{if(_0x216a56||(_0x216a56=_0x176789,this[_0x282011(0x240)][_0x282011(0x7e3)](this[_0x282011(0x4a8)]+'\x20('+this[_0x282011(0x7f4)][_0x282011(0x7fe)]+'):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20'+_0x216a56)),_0x240942||(_0x240942={}),_0x240942?.[_0x282011(0x64d)]){await this[_0x282011(0x796)][_0x282011(0x644)](_0x216a56),await this[_0x282011(0x796)][_0x282011(0x2d2)](_0x240942?.[_0x282011(0x780)]??'composing',_0x216a56);let _0x394e26=Math[_0x282011(0x76c)](_0x240942[_0x282011(0x64d)],0x2710);await(0x0,w[_0x282011(0x64d)])(_0x394e26),await this[_0x282011(0x796)][_0x282011(0x2d2)]('paused',_0x216a56);}let _0x1aa802=_0x240942?.[_0x282011(0x6f9)]!=!0x1?void 0x0:!0x1,_0x31dfae;if(_0x240942?.[_0x282011(0x323)]){let _0x3682b6=_0x240942?.[_0x282011(0x323)],_0xef0b37=_0x3682b6?.['message']?_0x3682b6:await this[_0x282011(0x4ca)](_0x3682b6['key'],!0x0);_0xef0b37&&(_0x31dfae=_0xef0b37);}let _0x5c2ce6=await this[_0x282011(0x43b)][_0x282011(0x5b2)]['findOne']({'where':{'_id':_0x216a56}},this['instance'][_0x282011(0x7fe)]),_0x2099f4,_0x1df9c9=null;if((0x0,w[_0x282011(0x39a)])(_0x216a56))try{if(_0x1df9c9=_0x5c2ce6[_0x282011(0x3e7)],!_0x1df9c9)throw new U(_0x282011(0x1be));if(!_0x1df9c9['canSendMessage'])throw new m(_0x282011(0x892));_0x240942?.[_0x282011(0x85b)]&&(_0x240942['mentions']?.['everyOne']?_0x2099f4=_0x1df9c9['participants']['map'](_0x6603ef=>_0x6603ef['id']):_0x240942['mentions']?.[_0x282011(0x86a)]?.['length']&&(_0x2099f4=_0x240942['mentions'][_0x282011(0x86a)]['map'](_0x31479d=>{const _0x3d2d04=_0x282011;let _0x236cce=this[_0x3d2d04(0x28b)](_0x31479d);return(0x0,w['isJidGroup'])(_0x236cce)?null:_0x236cce;})));}catch(_0x25b1ec){throw _0x25b1ec instanceof U?new U(_0x282011(0x1be)):_0x25b1ec instanceof m?new m(_0x282011(0x892)):new Error(_0x282011(0x722));}let _0x2ecd6a=await((async()=>{const _0x7c1cc1=_0x282011;let _0x1c3fb9={'quoted':_0x31dfae,'ephemeralExpiration':_0x5c2ce6?.[_0x7c1cc1(0x432)]??0x0};if(!_0x575512[_0x7c1cc1(0x6d8)]&&!_0x575512[_0x7c1cc1(0x5fd)]&&!_0x575512[_0x7c1cc1(0x46d)]&&!_0x575512['conversation']&&_0x216a56!=='status@broadcast'&&_0x575512['reactionMessage'])return await this[_0x7c1cc1(0x796)][_0x7c1cc1(0x898)](_0x216a56,{'react':{'text':_0x575512[_0x7c1cc1(0x83e)][_0x7c1cc1(0x1b9)],'key':_0x575512[_0x7c1cc1(0x83e)]['key']}},_0x1c3fb9);if(_0x575512[_0x7c1cc1(0x218)]){let _0x487bf5=_0x575512['conversation'];return _0x240942?.[_0x7c1cc1(0x819)]&&(_0x487bf5=await this[_0x7c1cc1(0x36e)](_0x487bf5,_0x216a56)),await this[_0x7c1cc1(0x796)][_0x7c1cc1(0x898)](_0x216a56,{'text':_0x487bf5,'mentions':_0x2099f4,'linkPreview':_0x1aa802},_0x1c3fb9);}return!_0x575512['audio']&&!_0x575512['poll']&&_0x216a56!=_0x7c1cc1(0x15c)?await this['client'][_0x7c1cc1(0x898)](_0x216a56,{'forward':{'key':{'remoteJid':this[_0x7c1cc1(0x7f4)][_0x7c1cc1(0x7fe)],'fromMe':!0x0},'message':_0x575512},'mentions':_0x2099f4},_0x1c3fb9):_0x216a56===_0x7c1cc1(0x15c)?await this[_0x7c1cc1(0x796)]['sendMessage'](_0x216a56,_0x575512[_0x7c1cc1(0x352)][_0x7c1cc1(0x823)],{'backgroundColor':_0x575512['status'][_0x7c1cc1(0x62d)][_0x7c1cc1(0x394)],'font':_0x575512['status']['option'][_0x7c1cc1(0x8a7)],'statusJidList':_0x575512[_0x7c1cc1(0x352)][_0x7c1cc1(0x62d)][_0x7c1cc1(0x2b4)]}):await this[_0x7c1cc1(0x796)][_0x7c1cc1(0x898)](_0x216a56,_0x575512,_0x1c3fb9);})()),_0x5c5315=(0x0,w['normalizeMessageContent'])(_0x2ecd6a['message']),_0x941a6c=(0x0,w[_0x282011(0x4ac)])(_0x5c5315),{message_normalized:_0x42ed09}=this[_0x282011(0x318)](_0x5c5315,_0x941a6c,null),_0x22213a={'_id':_0x2ecd6a[_0x282011(0x150)]['id'],'key':_0x2ecd6a[_0x282011(0x150)],'pushName':_0x2ecd6a[_0x282011(0x3d1)],'isGroup':_0x2ecd6a[_0x282011(0x150)][_0x282011(0x4e1)][_0x282011(0x643)]('@g.us'),'profilePictureUrl':this[_0x282011(0x7f4)][_0x282011(0x728)],'message':_0x5c5315,'messageType':_0x941a6c,'message_normalized':{'key':_0x2ecd6a['key'],'pushName':_0x2ecd6a[_0x282011(0x3d1)],'messageTimestamp':_0x2ecd6a[_0x282011(0x646)]&&_0x2ecd6a['messageTimestamp']['toString']()[_0x282011(0x608)]<0xd?_0x2ecd6a[_0x282011(0x646)]*0x3e8:_0x2ecd6a[_0x282011(0x646)]||null,'source':(0x0,w[_0x282011(0x380)])(_0x2ecd6a['key']['id']),..._0x42ed09},'messageTimestamp':_0x2ecd6a[_0x282011(0x646)]&&_0x2ecd6a[_0x282011(0x646)]['toString']()[_0x282011(0x608)]<0xd?_0x2ecd6a[_0x282011(0x646)]*0x3e8:_0x2ecd6a[_0x282011(0x646)]||null,'owner':this[_0x282011(0x7f4)][_0x282011(0x7fe)],'source':(0x0,w[_0x282011(0x380)])(_0x2ecd6a[_0x282011(0x150)]['id'])};return this['logger'][_0x282011(0x7e3)](this[_0x282011(0x4a8)]+'\x20('+this['instance']['wuid']+_0x282011(0x4bf)+_0x22213a[_0x282011(0x150)]?.[_0x282011(0x4e1)][_0x282011(0x869)](_0x282011(0x1b5),'')+']\x20('+_0x22213a['messageType']+')'),_0x22213a[_0x282011(0x2e4)]?.[_0x282011(0x1b9)]&&this[_0x282011(0x240)][_0x282011(0x7e3)](_0x22213a['message_normalized']?.[_0x282011(0x1b9)]),this[_0x282011(0x879)](_0x282011(0x72d),_0x22213a),F(this[_0x282011(0x4a8)],_0x282011(0x76e),{'message':_0x22213a}),this[_0x282011(0x280)](this[_0x282011(0x596)]['get'](_0x282011(0x5b1)),_0x22213a,'SEND_MESSAGE',_0x5c2ce6),await this[_0x282011(0x43b)][_0x282011(0x31f)]['insert']([_0x22213a],this[_0x282011(0x7f4)][_0x282011(0x7fe)]),_0x2ecd6a;}catch(_0x3770fb){let _0x5acbef=_0x282011(0x359)+_0x216a56,_0x2905db=_0x3770fb instanceof Error?_0x3770fb[_0x282011(0x31f)]:typeof _0x3770fb==_0x282011(0x69d)?JSON[_0x282011(0x41d)](_0x3770fb):_0x3770fb,_0x23fe03=_0x5acbef+':\x20'+_0x2905db;throw this[_0x282011(0x240)]['error'](this[_0x282011(0x4a8)]+'\x20('+this[_0x282011(0x7f4)][_0x282011(0x7fe)]+_0x282011(0x33f)+_0x23fe03),new m(_0x23fe03);}}async[a0_0x2101b5(0x70a)](_0x44862c,_0x718c97,_0x4c2453){const _0xae30a5=a0_0x2101b5;let _0x139f5e=this[_0xae30a5(0x28b)](_0x44862c),_0x308414=(await this[_0xae30a5(0x56b)]({'numbers':[_0x139f5e]}))[0x0];if(!_0x308414[_0xae30a5(0x6de)]&&!(0x0,w['isJidGroup'])(_0x308414['jid']))throw new m(_0x308414);let _0xe96d82=(0x0,w[_0xae30a5(0x39a)])(_0x139f5e)?_0x139f5e:_0x308414[_0xae30a5(0x58f)];if((0x0,w['isJidGroup'])(_0xe96d82))try{await this[_0xae30a5(0x796)][_0xae30a5(0x556)](_0xe96d82);}catch{throw new m(_0xae30a5(0x85c));}try{_0x4c2453?.[_0xae30a5(0x64d)]&&(await this[_0xae30a5(0x796)][_0xae30a5(0x644)](_0xe96d82),await this['client']['sendPresenceUpdate'](_0x4c2453?.[_0xae30a5(0x780)]??_0xae30a5(0x7ea),_0x139f5e),await(0x0,w['delay'])(_0x4c2453[_0xae30a5(0x64d)]),await this[_0xae30a5(0x796)]['sendPresenceUpdate']('paused',_0xe96d82));let _0x4d6410=await((async()=>{const _0x289eb9=_0xae30a5;let _0x1a814b,_0x4621bf=_0x289eb9(0x649)+(0x0,ne[_0x289eb9(0x5be)])(0x12)['toString'](_0x289eb9(0x4b4))[_0x289eb9(0x7a9)](),_0x58ca53=(0x0,w[_0x289eb9(0x461)])(_0xe96d82,_0x718c97,{'timestamp':new Date(),'userJid':this[_0x289eb9(0x7f4)][_0x289eb9(0x7fe)],'messageId':_0x4621bf,'quoted':_0x1a814b}),_0x4c66f2=await this[_0x289eb9(0x796)]['relayMessage'](_0xe96d82,_0x58ca53['message'],{'messageId':_0x4621bf});_0x58ca53[_0x289eb9(0x150)]={'id':_0x4c66f2,'remoteJid':_0x139f5e,'participant':(0x0,w[_0x289eb9(0x4f4)])(_0x139f5e)?void 0x0:_0x139f5e,'fromMe':!0x0};for(let [_0x5ebac4,_0x3f15b7]of Object['entries'](_0x58ca53))(!_0x3f15b7||Array['isArray'](_0x3f15b7)&&_0x3f15b7[_0x289eb9(0x608)]===0x0)&&delete _0x58ca53[_0x5ebac4];return this[_0x289eb9(0x796)]['ev'][_0x289eb9(0x598)](_0x289eb9(0x333),{'messages':[_0x58ca53],'type':_0x289eb9(0x6da)}),_0x58ca53;})()),_0x1f3da8=await this['repository']['chat']['findOne']({'where':{'_id':_0xe96d82}},this[_0xae30a5(0x7f4)][_0xae30a5(0x7fe)]),_0x377f9c=(0x0,w[_0xae30a5(0x6e2)])(_0x4d6410['message']),_0x38ac37=(0x0,w[_0xae30a5(0x4ac)])(_0x377f9c),{message_normalized:_0x215e39}=this[_0xae30a5(0x318)](_0x377f9c,_0x38ac37,null),_0x1ce6a5={'_id':_0x4d6410['key']['id'],'key':_0x4d6410[_0xae30a5(0x150)],'pushName':_0x4d6410['pushName'],'isGroup':_0x4d6410[_0xae30a5(0x150)][_0xae30a5(0x4e1)][_0xae30a5(0x643)](_0xae30a5(0x85d)),'profilePictureUrl':this[_0xae30a5(0x7f4)][_0xae30a5(0x728)],'message':_0x377f9c,'messageType':_0x38ac37,'message_normalized':{'key':_0x4d6410[_0xae30a5(0x150)],'pushName':_0x4d6410[_0xae30a5(0x3d1)],'messageTimestamp':_0x4d6410[_0xae30a5(0x646)]&&_0x4d6410['messageTimestamp'][_0xae30a5(0x60f)]()['length']<0xd?_0x4d6410[_0xae30a5(0x646)]*0x3e8:_0x4d6410[_0xae30a5(0x646)]||null,'source':(0x0,w[_0xae30a5(0x380)])(_0x4d6410['key']['id']),..._0x215e39},'messageTimestamp':_0x4d6410[_0xae30a5(0x646)]&&_0x4d6410[_0xae30a5(0x646)][_0xae30a5(0x60f)]()[_0xae30a5(0x608)]<0xd?_0x4d6410[_0xae30a5(0x646)]*0x3e8:_0x4d6410['messageTimestamp']||null,'owner':this['instance'][_0xae30a5(0x7fe)],'source':(0x0,w['getDevice'])(_0x4d6410[_0xae30a5(0x150)]['id'])};return this['logger'][_0xae30a5(0x7e3)](this[_0xae30a5(0x4a8)]+'\x20('+this[_0xae30a5(0x7f4)][_0xae30a5(0x7fe)]+_0xae30a5(0x4bf)+_0x1ce6a5['key']?.['remoteJid'][_0xae30a5(0x869)](_0xae30a5(0x1b5),'')+_0xae30a5(0x245)+_0x1ce6a5[_0xae30a5(0x800)]+')'),_0x1ce6a5[_0xae30a5(0x2e4)]?.[_0xae30a5(0x1b9)]&&this[_0xae30a5(0x240)]['warn'](_0x1ce6a5['message_normalized']?.[_0xae30a5(0x1b9)]),this[_0xae30a5(0x879)](_0xae30a5(0x72d),_0x1ce6a5),F(this[_0xae30a5(0x4a8)],'messages',{'message':_0x1ce6a5}),this['updateChatWithMessage'](this[_0xae30a5(0x596)]['get'](_0xae30a5(0x5b1)),_0x1ce6a5,'SEND_MESSAGE',_0x1f3da8),await this[_0xae30a5(0x43b)]['message'][_0xae30a5(0x7a2)]([_0x1ce6a5],this[_0xae30a5(0x7f4)][_0xae30a5(0x7fe)]),_0x4d6410;}catch(_0x4cdd16){throw this[_0xae30a5(0x240)][_0xae30a5(0x3c9)](_0x4cdd16),new m(_0x4cdd16['toString']());}}get[a0_0x2101b5(0x3c8)](){const _0x4ae3a2=a0_0x2101b5;return this[_0x4ae3a2(0x878)];}async['textMessage'](_0x1a2185){const _0x4af7ca=a0_0x2101b5;return await this[_0x4af7ca(0x567)](_0x1a2185['number'],{'conversation':_0x1a2185[_0x4af7ca(0x87c)]['text']},_0x1a2185?.['options']);}async[a0_0x2101b5(0x407)](_0x2d14b5){const _0x54a01e=a0_0x2101b5;if(!_0x2d14b5['type'])throw new m(_0x54a01e(0x178));if(!_0x2d14b5[_0x54a01e(0x823)])throw new m('Content\x20is\x20required');if(_0x2d14b5[_0x54a01e(0x288)]){let _0x5a205c=await this[_0x54a01e(0x43b)][_0x54a01e(0x88b)][_0x54a01e(0x604)]({'where':{}},this[_0x54a01e(0x7f4)][_0x54a01e(0x7fe)]);if(!_0x5a205c[_0x54a01e(0x608)])throw new m(_0x54a01e(0x58a));_0x2d14b5[_0x54a01e(0x2b4)]=_0x5a205c[_0x54a01e(0x285)](_0x121e93=>_0x121e93[_0x54a01e(0x3d1)])[_0x54a01e(0x5e6)](_0x5bbf90=>_0x5bbf90[_0x54a01e(0x1b8)]);}if(!_0x2d14b5[_0x54a01e(0x2b4)]?.['length']&&!_0x2d14b5[_0x54a01e(0x288)])throw new m('StatusJidList\x20is\x20required');if(_0x2d14b5[_0x54a01e(0x1a3)]===_0x54a01e(0x1b9)){if(!_0x2d14b5[_0x54a01e(0x394)])throw new m(_0x54a01e(0x5fe));if(!_0x2d14b5[_0x54a01e(0x8a7)])throw new m(_0x54a01e(0x3b5));return{'content':{'text':_0x2d14b5['content']},'option':{'backgroundColor':_0x2d14b5[_0x54a01e(0x394)],'font':_0x2d14b5[_0x54a01e(0x8a7)],'statusJidList':_0x2d14b5[_0x54a01e(0x2b4)]}};}if(_0x2d14b5[_0x54a01e(0x1a3)]==='image')return{'content':{'image':{'url':_0x2d14b5[_0x54a01e(0x823)]},'caption':_0x2d14b5[_0x54a01e(0x6bd)]},'option':{'statusJidList':_0x2d14b5['statusJidList']}};if(_0x2d14b5[_0x54a01e(0x1a3)]===_0x54a01e(0x492))return{'content':{'video':{'url':_0x2d14b5[_0x54a01e(0x823)]},'caption':_0x2d14b5[_0x54a01e(0x6bd)]},'option':{'statusJidList':_0x2d14b5[_0x54a01e(0x2b4)]}};if(_0x2d14b5[_0x54a01e(0x1a3)]===_0x54a01e(0x6d8)){this[_0x54a01e(0x240)][_0x54a01e(0x667)](this[_0x54a01e(0x4a8)]+'\x20('+this['instance'][_0x54a01e(0x7fe)]+_0x54a01e(0x84d)),this[_0x54a01e(0x240)][_0x54a01e(0x667)](this[_0x54a01e(0x4a8)]+'\x20('+this[_0x54a01e(0x7f4)][_0x54a01e(0x7fe)]+_0x54a01e(0x5fc));let _0x1d14c8=await this[_0x54a01e(0x35f)](_0x2d14b5[_0x54a01e(0x823)]);if(typeof _0x1d14c8==_0x54a01e(0x30d)){this[_0x54a01e(0x240)][_0x54a01e(0x667)](this[_0x54a01e(0x4a8)]+'\x20('+this['instance']['wuid']+'):Audio\x20processed');let _0x1a9078=k[_0x54a01e(0x1e3)](_0x1d14c8)[_0x54a01e(0x60f)](_0x54a01e(0x623));return{'content':{'audio':Buffer['from'](_0x1a9078,_0x54a01e(0x623)),'ptt':!0x0,'mimetype':'audio/ogg'},'option':{'statusJidList':_0x2d14b5['statusJidList']}};}else throw new x(_0x1d14c8);}throw new m(_0x54a01e(0x163));}async['statusMessage'](_0xe1ef35){const _0xba2442=a0_0x2101b5;return await this[_0xba2442(0x567)](_0xba2442(0x15c),{'status':await this[_0xba2442(0x407)](_0xe1ef35['statusMessage'])});}async['prepareMediaMessage'](_0x539459){const _0x49e77d=a0_0x2101b5;try{let _0x46a7d2=await(0x0,w['prepareWAMessageMedia'])({[_0x539459[_0x49e77d(0x88d)]]:(0x0,J[_0x49e77d(0x719)])(_0x539459[_0x49e77d(0x4f6)])?{'url':_0x539459['media']}:Buffer[_0x49e77d(0x50f)](_0x539459[_0x49e77d(0x4f6)],_0x49e77d(0x623))},{'upload':this[_0x49e77d(0x796)][_0x49e77d(0x673)]}),_0x2e9d3d=_0x539459['mediatype']+_0x49e77d(0x83d);if(_0x539459[_0x49e77d(0x88d)]===_0x49e77d(0x638)&&!_0x539459[_0x49e77d(0x8b3)]){let _0x2fdd44=new RegExp(/.*\/(.+?)\./)['exec'](_0x539459['media']);_0x539459[_0x49e77d(0x8b3)]=_0x2fdd44?_0x2fdd44[0x1]:null;}let _0x2f8ea0;return(0x0,J['isURL'])(_0x539459[_0x49e77d(0x4f6)])?_0x2f8ea0=(await Q['default'][_0x49e77d(0x34a)](_0x539459[_0x49e77d(0x4f6)],{'responseType':'arraybuffer'}))[_0x49e77d(0x35e)][_0x49e77d(0x609)]:_0x2f8ea0=(0x0,Oi['getMIMEType'])(_0x539459[_0x49e77d(0x8b3)]),_0x46a7d2[_0x2e9d3d][_0x49e77d(0x6bd)]=_0x539459?.[_0x49e77d(0x6bd)],_0x46a7d2[_0x2e9d3d][_0x49e77d(0x199)]=_0x2f8ea0,_0x46a7d2[_0x2e9d3d][_0x49e77d(0x8b3)]=_0x539459['fileName'],_0x539459[_0x49e77d(0x88d)]===_0x49e77d(0x492)&&(_0x46a7d2[_0x2e9d3d]['jpegThumbnail']=Uint8Array[_0x49e77d(0x50f)]((0x0,Le['readFileSync'])((0x0,j[_0x49e77d(0x1b4)])(process[_0x49e77d(0x36a)](),_0x49e77d(0x3b2)))),_0x46a7d2[_0x2e9d3d][_0x49e77d(0x265)]=!0x1),(0x0,w[_0x49e77d(0x461)])('',{[_0x2e9d3d]:{..._0x46a7d2[_0x2e9d3d]}},{'userJid':this[_0x49e77d(0x7f4)][_0x49e77d(0x7fe)]});}catch(_0x4b74b5){let _0x2675cd='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage',_0x39feaa=_0x4b74b5 instanceof Error?_0x4b74b5[_0x49e77d(0x31f)]:typeof _0x4b74b5=='object'?JSON[_0x49e77d(0x41d)](_0x4b74b5):_0x4b74b5,_0x2fd147=_0x2675cd+':\x20'+_0x39feaa;throw this[_0x49e77d(0x240)][_0x49e77d(0x3c9)](this[_0x49e77d(0x4a8)]+'\x20('+this[_0x49e77d(0x7f4)][_0x49e77d(0x7fe)]+_0x49e77d(0x33f)+_0x2fd147),new x(_0x2fd147);}}async[a0_0x2101b5(0x1fe)](_0x397ac4){const _0x2d341a=a0_0x2101b5;let _0x3c5b42=await this['prepareMediaMessage'](_0x397ac4[_0x2d341a(0x1fe)]);return await this[_0x2d341a(0x567)](_0x397ac4[_0x2d341a(0x17a)],{..._0x3c5b42[_0x2d341a(0x31f)]},_0x397ac4?.[_0x2d341a(0x80c)]);}async[a0_0x2101b5(0x70b)](_0x1e62a3,_0xdb8120){const _0x4071e5=a0_0x2101b5;try{this[_0x4071e5(0x240)][_0x4071e5(0x667)](this[_0x4071e5(0x4a8)]+'\x20('+this[_0x4071e5(0x7f4)][_0x4071e5(0x7fe)]+_0x4071e5(0x55d));let _0x3a43c3,_0x1d2610=_0xdb8120+'-'+new Date()[_0x4071e5(0x8bc)]();this['logger']['verbose'](this[_0x4071e5(0x4a8)]+'\x20('+this['instance'][_0x4071e5(0x7fe)]+_0x4071e5(0x3bb)+_0x1d2610);let _0x749d1b=''+(0x0,j['join'])(this[_0x4071e5(0x570)],_0x1d2610+_0x4071e5(0x79a));if(this['logger'][_0x4071e5(0x667)](this[_0x4071e5(0x4a8)]+'\x20('+this[_0x4071e5(0x7f4)][_0x4071e5(0x7fe)]+'):Output\x20path:\x20'+_0x749d1b),(0x0,J[_0x4071e5(0x5e8)])(_0x1e62a3)){this['logger'][_0x4071e5(0x667)](this['instanceName']+'\x20('+this[_0x4071e5(0x7f4)]['wuid']+_0x4071e5(0x2b9));let _0x29553a=_0x1e62a3[_0x4071e5(0x869)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x4648df=Buffer['from'](_0x29553a,'base64');_0x3a43c3=''+(0x0,j[_0x4071e5(0x1b4)])(this[_0x4071e5(0x570)],'temp-'+_0x1d2610+'.png'),this[_0x4071e5(0x240)][_0x4071e5(0x667)](this[_0x4071e5(0x4a8)]+'\x20('+this['instance'][_0x4071e5(0x7fe)]+_0x4071e5(0x84b)+_0x3a43c3),await(0x0,Ut[_0x4071e5(0x7ae)])(_0x4648df)[_0x4071e5(0x7ff)](_0x3a43c3),this[_0x4071e5(0x240)]['verbose'](this[_0x4071e5(0x4a8)]+'\x20('+this[_0x4071e5(0x7f4)]['wuid']+_0x4071e5(0x4a2));}else{this[_0x4071e5(0x240)][_0x4071e5(0x667)](this[_0x4071e5(0x4a8)]+'\x20('+this[_0x4071e5(0x7f4)][_0x4071e5(0x7fe)]+_0x4071e5(0x283));let _0xc36a06=new Date()['getTime'](),_0x568807=_0x1e62a3+_0x4071e5(0x43d)+_0xc36a06;this[_0x4071e5(0x240)]['verbose'](this[_0x4071e5(0x4a8)]+'\x20('+this['instance']['wuid']+_0x4071e5(0x4cf)+_0x568807);let _0x535549=await Q[_0x4071e5(0x7ae)][_0x4071e5(0x34a)](_0x568807,{'responseType':'arraybuffer'});this[_0x4071e5(0x240)][_0x4071e5(0x667)](this['instanceName']+'\x20('+this['instance'][_0x4071e5(0x7fe)]+_0x4071e5(0x45a));let _0x363b7e=Buffer[_0x4071e5(0x50f)](_0x535549['data'],_0x4071e5(0x57d));_0x3a43c3=''+(0x0,j['join'])(this[_0x4071e5(0x570)],_0x4071e5(0x391)+_0x1d2610+_0x4071e5(0x6b5)),this['logger'][_0x4071e5(0x667)](this[_0x4071e5(0x4a8)]+'\x20('+this[_0x4071e5(0x7f4)][_0x4071e5(0x7fe)]+'):Image\x20path:\x20'+_0x3a43c3),await(0x0,Ut[_0x4071e5(0x7ae)])(_0x363b7e)[_0x4071e5(0x7ff)](_0x3a43c3),this[_0x4071e5(0x240)][_0x4071e5(0x667)](this[_0x4071e5(0x4a8)]+'\x20('+this[_0x4071e5(0x7f4)]['wuid']+'):Image\x20created');}return await(0x0,Ut[_0x4071e5(0x7ae)])(_0x3a43c3)[_0x4071e5(0x807)]()[_0x4071e5(0x7ff)](_0x749d1b),this[_0x4071e5(0x240)][_0x4071e5(0x667)](this['instanceName']+'\x20('+this[_0x4071e5(0x7f4)][_0x4071e5(0x7fe)]+_0x4071e5(0x2d4)),k['unlinkSync'](_0x3a43c3),this[_0x4071e5(0x240)][_0x4071e5(0x667)](this['instanceName']+'\x20('+this[_0x4071e5(0x7f4)][_0x4071e5(0x7fe)]+_0x4071e5(0x431)),_0x749d1b;}catch(_0x3022f9){let _0x20224f='Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP',_0xacfb32=_0x3022f9 instanceof Error?_0x3022f9['message']:typeof _0x3022f9=='object'?JSON[_0x4071e5(0x41d)](_0x3022f9):_0x3022f9,_0x142627=_0x20224f+':\x20'+_0xacfb32;this[_0x4071e5(0x240)][_0x4071e5(0x3c9)](this[_0x4071e5(0x4a8)]+'\x20('+this[_0x4071e5(0x7f4)][_0x4071e5(0x7fe)]+_0x4071e5(0x33f)+_0x142627);}}async[a0_0x2101b5(0x6ff)](_0x23063a){const _0x4db427=a0_0x2101b5;let _0x3c8f96=await this[_0x4db427(0x70b)](_0x23063a[_0x4db427(0x18c)][_0x4db427(0x2c4)],_0x23063a[_0x4db427(0x17a)]),_0x36515a=await this[_0x4db427(0x567)](_0x23063a[_0x4db427(0x17a)],{'sticker':{'url':_0x3c8f96}},_0x23063a?.[_0x4db427(0x80c)]);return k['unlinkSync'](_0x3c8f96),this[_0x4db427(0x240)][_0x4db427(0x667)](this['instanceName']+'\x20('+this[_0x4db427(0x7f4)][_0x4db427(0x7fe)]+_0x4db427(0x4ff)),_0x36515a;}async[a0_0x2101b5(0x589)](_0x3e33ea){const _0x109a4d=a0_0x2101b5;if(this[_0x109a4d(0x240)][_0x109a4d(0x667)](this[_0x109a4d(0x4a8)]+'\x20('+this[_0x109a4d(0x7f4)][_0x109a4d(0x7fe)]+'):Sending\x20audio\x20whatsapp'),!_0x3e33ea['options']?.['encoding']&&_0x3e33ea[_0x109a4d(0x80c)]?.[_0x109a4d(0x663)]!==!0x1&&(_0x3e33ea['options'][_0x109a4d(0x663)]=!0x0),_0x3e33ea[_0x109a4d(0x80c)]?.[_0x109a4d(0x663)]){let _0x54cba5=await this[_0x109a4d(0x35f)](_0x3e33ea[_0x109a4d(0x893)][_0x109a4d(0x6d8)]);if(typeof _0x54cba5==_0x109a4d(0x30d)){let _0x3fa5e9=k[_0x109a4d(0x1e3)](_0x54cba5)[_0x109a4d(0x60f)](_0x109a4d(0x623));return this['sendMessageWithTyping'](_0x3e33ea['number'],{'audio':Buffer[_0x109a4d(0x50f)](_0x3fa5e9,_0x109a4d(0x623)),'ptt':!0x0,'mimetype':_0x109a4d(0x33a)},{'presence':'recording','delay':_0x3e33ea?.[_0x109a4d(0x80c)]?.[_0x109a4d(0x64d)]});}else throw new x(_0x54cba5);}return await this[_0x109a4d(0x567)](_0x3e33ea['number'],{'audio':(0x0,J[_0x109a4d(0x719)])(_0x3e33ea['audioMessage']['audio'])?{'url':_0x3e33ea[_0x109a4d(0x893)][_0x109a4d(0x6d8)]}:Buffer[_0x109a4d(0x50f)](_0x3e33ea[_0x109a4d(0x893)][_0x109a4d(0x6d8)],_0x109a4d(0x623)),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':_0x109a4d(0x268),'delay':_0x3e33ea?.[_0x109a4d(0x80c)]?.[_0x109a4d(0x64d)]});}async[a0_0x2101b5(0x35f)](_0x59e58d){const _0x18673e=a0_0x2101b5;this['logger']['verbose'](this[_0x18673e(0x4a8)]+'\x20('+this[_0x18673e(0x7f4)][_0x18673e(0x7fe)]+_0x18673e(0x5fc));let _0x1413d6=(0x0,J[_0x18673e(0x719)])(_0x59e58d)?(0x0,ne[_0x18673e(0x351)])(_0x18673e(0x59d))[_0x18673e(0x842)](_0x59e58d)['digest'](_0x18673e(0x4b4)):(0x0,ne[_0x18673e(0x351)])(_0x18673e(0x59d))[_0x18673e(0x842)](_0x59e58d)[_0x18673e(0x299)]('hex'),_0x3991b2=''+(0x0,j[_0x18673e(0x1b4)])(this[_0x18673e(0x570)],_0x1413d6+_0x18673e(0x3d0));if(k['existsSync'](_0x3991b2))return this[_0x18673e(0x240)][_0x18673e(0x667)](this['instanceName']+'\x20('+this[_0x18673e(0x7f4)]['wuid']+_0x18673e(0x360)),_0x3991b2;let _0x439f29=''+(0x0,j[_0x18673e(0x1b4)])(this[_0x18673e(0x570)],_0x18673e(0x391)+(0x0,Y['v4'])()+_0x18673e(0x5a5));if((0x0,J['isURL'])(_0x59e58d)){let _0x5b2c91=new Date()[_0x18673e(0x8bc)](),_0x262a16=_0x59e58d+_0x18673e(0x43d)+_0x5b2c91,_0x375514=await Q[_0x18673e(0x7ae)][_0x18673e(0x34a)](_0x262a16,{'responseType':_0x18673e(0x342)});k[_0x18673e(0x7c2)](_0x439f29,_0x375514[_0x18673e(0x1a0)]);}else{let _0xf96b35=Buffer[_0x18673e(0x50f)](_0x59e58d,_0x18673e(0x623));k['writeFileSync'](_0x439f29,_0xf96b35);}return new Promise((_0x82840b,_0x45e9dc)=>{const _0xb8e2c=_0x18673e;(0x0,Fe[_0xb8e2c(0x49b)])(Ps[_0xb8e2c(0x7ae)][_0xb8e2c(0x204)]+_0xb8e2c(0x195)+_0x439f29+_0xb8e2c(0x26e)+_0x3991b2+'\x20-y',_0xc7599a=>{const _0xd79e92=_0xb8e2c;if(k[_0xd79e92(0x77c)](_0x439f29),_0xc7599a){this['logger'][_0xd79e92(0x667)](this[_0xd79e92(0x4a8)]+'\x20('+this['instance']['wuid']+_0xd79e92(0x377)),_0x45e9dc(_0xc7599a);return;}this[_0xd79e92(0x240)][_0xd79e92(0x667)](this['instanceName']+'\x20('+this[_0xd79e92(0x7f4)][_0xd79e92(0x7fe)]+_0xd79e92(0x633)),_0x82840b(_0x3991b2);});});}async[a0_0x2101b5(0x7a0)](_0x581a8a){const _0x2f3238=a0_0x2101b5;this[_0x2f3238(0x240)][_0x2f3238(0x667)](this['instanceName']+'\x20('+this[_0x2f3238(0x7f4)][_0x2f3238(0x7fe)]+'):Processing\x20audio');let _0x488f80=(0x0,ne[_0x2f3238(0x351)])('sha256')[_0x2f3238(0x842)](_0x581a8a)[_0x2f3238(0x299)]('hex'),_0x27dbdc=''+(0x0,j[_0x2f3238(0x1b4)])(this[_0x2f3238(0x570)],_0x488f80+_0x2f3238(0x5a5));if(k[_0x2f3238(0x7b7)](_0x27dbdc))return this[_0x2f3238(0x240)]['verbose'](this['instanceName']+'\x20('+this[_0x2f3238(0x7f4)][_0x2f3238(0x7fe)]+'):Cached\x20audio\x20found,\x20returning\x20existing\x20file'),j[_0x2f3238(0x7ae)][_0x2f3238(0x358)](_0x27dbdc);let _0x1251a2=''+(0x0,j[_0x2f3238(0x1b4)])(this['storePath'],_0x2f3238(0x391)+_0x488f80+_0x2f3238(0x3d0));if((0x0,J[_0x2f3238(0x719)])(_0x581a8a)){let _0x3ff851=new Date()[_0x2f3238(0x8bc)](),_0xa2fcd2=_0x581a8a+_0x2f3238(0x43d)+_0x3ff851,_0x52d672=await Q[_0x2f3238(0x7ae)][_0x2f3238(0x34a)](_0xa2fcd2,{'responseType':_0x2f3238(0x342)});k[_0x2f3238(0x7c2)](_0x1251a2,_0x52d672[_0x2f3238(0x1a0)]);}else{let _0x553cfa=Buffer['from'](_0x581a8a,'base64');k[_0x2f3238(0x7c2)](_0x1251a2,_0x553cfa);}return new Promise((_0x36e9ba,_0x371d02)=>{const _0x4764e6=_0x2f3238;(0x0,Fe['exec'])(Ps[_0x4764e6(0x7ae)][_0x4764e6(0x204)]+_0x4764e6(0x195)+_0x1251a2+'\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20'+_0x27dbdc+'\x20-y',_0xb50715=>{const _0x395b07=_0x4764e6;if(k['unlinkSync'](_0x1251a2),_0xb50715){this[_0x395b07(0x240)][_0x395b07(0x667)](this[_0x395b07(0x4a8)]+'\x20('+this[_0x395b07(0x7f4)][_0x395b07(0x7fe)]+_0x395b07(0x377)),_0x371d02(_0xb50715);return;}this['logger'][_0x395b07(0x667)](this[_0x395b07(0x4a8)]+'\x20('+this[_0x395b07(0x7f4)]['wuid']+_0x395b07(0x633)),_0x36e9ba(j['default'][_0x395b07(0x358)](_0x27dbdc));});});}async[a0_0x2101b5(0x841)](_0x336b2b){const _0x2af5ca=a0_0x2101b5;console[_0x2af5ca(0x509)](_0x2af5ca(0x894),_0x336b2b);let _0x343142;try{_0x336b2b[_0x2af5ca(0x841)]?.['thumbnailUrl']&&(_0x343142=await this[_0x2af5ca(0x70d)]({'mediatype':_0x2af5ca(0x2c4),'media':_0x336b2b['buttonMessage'][_0x2af5ca(0x1d6)]}));}catch(_0x3d9f7e){throw console[_0x2af5ca(0x3c9)](_0x2af5ca(0x2e0),_0x3d9f7e),new Error(_0x2af5ca(0x2c3));}try{let _0x42b48={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x2af5ca(0x590)},'footer':{'text':_0x2af5ca(0x5f1)},'header':((()=>{const _0x3d120c=_0x2af5ca;if(_0x343142?.[_0x3d120c(0x31f)]?.[_0x3d120c(0x45b)])return{'hasMediaAttachment':!!_0x343142['message'][_0x3d120c(0x45b)],'imageMessage':_0x343142[_0x3d120c(0x31f)][_0x3d120c(0x45b)]};})()),'nativeFlowMessage':{'buttons':[{'name':_0x2af5ca(0x15f),'buttonParamsJson':JSON[_0x2af5ca(0x41d)]({'display_text':_0x2af5ca(0x228),'id':'1'})},{'name':'quick_reply','buttonParamsJson':JSON[_0x2af5ca(0x41d)]({'display_text':_0x2af5ca(0x68f),'id':'2'})}],'messageParamsJson':JSON[_0x2af5ca(0x41d)]({'from':_0x2af5ca(0x230),'templateId':_0x2af5ca(0x649)+(0x0,ne[_0x2af5ca(0x5be)])(0x12)[_0x2af5ca(0x60f)](_0x2af5ca(0x4b4))[_0x2af5ca(0x7a9)]()})}}}}};return await this[_0x2af5ca(0x70a)](_0x336b2b[_0x2af5ca(0x17a)],_0x42b48,_0x336b2b?.['options']);}catch(_0x36a459){throw console[_0x2af5ca(0x3c9)](_0x2af5ca(0x551),_0x36a459),new Error(_0x2af5ca(0x862));}}async[a0_0x2101b5(0x59f)](_0x34bfcd){const _0x295661=a0_0x2101b5;return await this[_0x295661(0x567)](_0x34bfcd['number'],{'locationMessage':{'degreesLatitude':_0x34bfcd[_0x295661(0x59f)][_0x295661(0x269)],'degreesLongitude':_0x34bfcd['locationMessage'][_0x295661(0x736)],'name':_0x34bfcd[_0x295661(0x59f)]?.[_0x295661(0x89c)],'address':_0x34bfcd[_0x295661(0x59f)]?.[_0x295661(0x37f)]}},_0x34bfcd?.[_0x295661(0x80c)]);}async[a0_0x2101b5(0x1ee)](_0x1ba145){const _0x5b2504=a0_0x2101b5;let _0x49c7b9={},_0xe77684=async _0x10955c=>{const _0x23b054=a0_0xeaf6;let _0x56cb86=_0x23b054(0x75e)+_0x10955c[_0x23b054(0x8ab)]+_0x23b054(0x76d)+_0x10955c['fullName']+'\x0a';_0x10955c['organization']&&(_0x56cb86+='ORG:'+_0x10955c[_0x23b054(0x7a1)]+';\x0a'),_0x10955c['email']&&(_0x56cb86+='EMAIL:'+_0x10955c[_0x23b054(0x7ca)]+'\x0a'),_0x10955c[_0x23b054(0x52a)]&&(_0x56cb86+=_0x23b054(0x4b9)+_0x10955c[_0x23b054(0x52a)]+'\x0a');let _0x520f56='',_0x31d1a0=0x1;if(_0x10955c[_0x23b054(0x3b1)]){let _0x238917=_0x10955c['phoneNumber'][_0x23b054(0x2bd)]('|');for(let _0x241b30 of _0x238917){let _0x472661=await this['whatsappNumber']({'numbers':[_0x241b30]}),_0x522edb=(_0x472661['length']>0x0?_0x472661[0x0][_0x23b054(0x58f)]:this[_0x23b054(0x28b)](_0x241b30))[_0x23b054(0x869)]('@s.whatsapp.net','');_0x520f56+='item'+_0x31d1a0+'.TEL;waid='+_0x522edb+':'+_0x241b30+_0x23b054(0x1d0)+_0x31d1a0+_0x23b054(0x421),_0x31d1a0++;}}return _0x56cb86+=_0x520f56+_0x23b054(0x188),_0x56cb86;};return _0x1ba145[_0x5b2504(0x1ee)][_0x5b2504(0x608)]===0x1?_0x49c7b9[_0x5b2504(0x1ee)]={'displayName':_0x1ba145[_0x5b2504(0x1ee)][0x0]['fullName'],'vcard':await _0xe77684(_0x1ba145[_0x5b2504(0x1ee)][0x0])}:_0x49c7b9[_0x5b2504(0x4b0)]={'displayName':_0x1ba145[_0x5b2504(0x1ee)]['length']+_0x5b2504(0x368),'contacts':await Promise[_0x5b2504(0x186)](_0x1ba145[_0x5b2504(0x1ee)]['map'](async _0x46edc7=>({'displayName':_0x46edc7[_0x5b2504(0x8ab)],'vcard':await _0xe77684(_0x46edc7)})))},await this[_0x5b2504(0x567)](_0x1ba145[_0x5b2504(0x17a)],{..._0x49c7b9},_0x1ba145?.[_0x5b2504(0x80c)]);}async[a0_0x2101b5(0x83e)](_0x4fd7c7){const _0x1e1b3c=a0_0x2101b5;return await this[_0x1e1b3c(0x567)](_0x4fd7c7[_0x1e1b3c(0x83e)][_0x1e1b3c(0x150)][_0x1e1b3c(0x4e1)],{'reactionMessage':{'key':_0x4fd7c7[_0x1e1b3c(0x83e)][_0x1e1b3c(0x150)],'text':_0x4fd7c7[_0x1e1b3c(0x83e)]['reaction']}});}async[a0_0x2101b5(0x56b)](_0xd7671e){const _0x143188=a0_0x2101b5;let _0x4c37e1=[];for await(let _0xe10ecf of _0xd7671e[_0x143188(0x1ad)]){let _0x154a12=this[_0x143188(0x28b)](_0xe10ecf),_0x55ff4d=!0x1;try{if((0x0,w['isJidGroup'])(_0x154a12)){let _0x5b0f75=(await this[_0x143188(0x43b)]['chat']['findOne']({'where':{'_id':_0x154a12}},this[_0x143188(0x7f4)]['wuid']))[_0x143188(0x3e7)];_0x5b0f75?(_0x55ff4d=!0x0,_0x4c37e1['push'](new ue(_0x5b0f75['id'],_0x55ff4d,_0x5b0f75?.['subject']))):(_0x5b0f75=await this[_0x143188(0x45c)]({'groupJid':_0x154a12},_0x143188(0x1f5)),_0x4c37e1[_0x143188(0x2a9)](new ue(_0x5b0f75['id'],!!_0x5b0f75?.['id'],_0x5b0f75?.[_0x143188(0x22c)])));}else{if(_0x154a12[_0x143188(0x267)](_0x143188(0x3fe)))_0x4c37e1[_0x143188(0x2a9)](new ue(_0x154a12,!0x0));else{let _0x23ca63=(await this[_0x143188(0x796)]['onWhatsApp'](_0x154a12))[0x0];_0x4c37e1[_0x143188(0x2a9)](new ue(_0x23ca63[_0x143188(0x58f)],_0x23ca63['exists']));}}}catch{(0x0,w[_0x143188(0x39a)])(_0x154a12)||await this['deleteImportedChat'](_0x154a12),_0x4c37e1[_0x143188(0x2a9)](new ue(_0xe10ecf,!0x1));}}return _0x4c37e1;}async[a0_0x2101b5(0x7f8)](_0x1ddae0){const _0x42ea29=a0_0x2101b5;try{await this[_0x42ea29(0x43b)][_0x42ea29(0x5b2)][_0x42ea29(0x505)]({'where':{'_id':_0x1ddae0,'imported':!0x0}},this[_0x42ea29(0x7f4)][_0x42ea29(0x7fe)])&&(await this[_0x42ea29(0x43b)][_0x42ea29(0x5b2)]['deleteChat'](_0x1ddae0,this[_0x42ea29(0x7f4)][_0x42ea29(0x7fe)]),this[_0x42ea29(0x240)][_0x42ea29(0x344)](_0x42ea29(0x480)+_0x1ddae0+_0x42ea29(0x5b4)));}catch(_0xfeb688){let _0x3f84a=_0x42ea29(0x6c7),_0x5d9ec1=_0xfeb688 instanceof Error?_0xfeb688[_0x42ea29(0x31f)]:typeof _0xfeb688=='object'?JSON['stringify'](_0xfeb688):_0xfeb688,_0x25385e=_0x3f84a+':\x20'+_0x5d9ec1;this[_0x42ea29(0x240)][_0x42ea29(0x3c9)](this[_0x42ea29(0x4a8)]+'\x20('+this[_0x42ea29(0x7f4)]['wuid']+_0x42ea29(0x33f)+_0x25385e);}}async[a0_0x2101b5(0x69b)](_0x1941df){const _0x467be2=a0_0x2101b5;try{let _0x4f6e28=_0x1941df['readMessages'][_0x467be2(0x285)](_0x1b0773=>(0x0,w[_0x467be2(0x39a)])(_0x1b0773[_0x467be2(0x4e1)])||(0x0,w[_0x467be2(0x4f4)])(_0x1b0773[_0x467be2(0x4e1)]))[_0x467be2(0x5e6)](_0x3484eb=>({'remoteJid':_0x3484eb['remoteJid'],'fromMe':_0x3484eb['fromMe'],'id':_0x3484eb['id']}));await this[_0x467be2(0x796)]['readMessages'](_0x4f6e28);let _0x1dc1f1=_0x4f6e28[_0x467be2(0x5e6)](_0x681ed6=>this[_0x467be2(0x152)](_0x681ed6,{'status':_0x467be2(0x4b3),'owner':this[_0x467be2(0x7f4)][_0x467be2(0x7fe)]})),_0x230102=_0x4f6e28[_0x467be2(0x5e6)](_0x406a1b=>this[_0x467be2(0x43b)][_0x467be2(0x5b2)][_0x467be2(0x858)]({'where':{'_id':_0x406a1b['remoteJid']}},{'unreadcount':0x0},this[_0x467be2(0x7f4)][_0x467be2(0x7fe)])),[_0x12846e,_0x15a0f1]=await Promise[_0x467be2(0x186)]([Promise[_0x467be2(0x186)](_0x1dc1f1),Promise[_0x467be2(0x186)](_0x230102)]);return _0x15a0f1[_0x467be2(0x285)](_0xe80f96=>_0xe80f96!==null)[_0x467be2(0x600)](_0x245aa0=>{const _0x3c3664=_0x467be2;F(this[_0x3c3664(0x4a8)],_0x3c3664(0x415),{'chat':_0x245aa0});}),{'message':_0x467be2(0x370),'read':_0x467be2(0x29e)};}catch(_0x257523){let _0x331143=_0x467be2(0x405),_0x57abf6=_0x257523 instanceof Error?_0x257523[_0x467be2(0x31f)]:typeof _0x257523=='object'?JSON['stringify'](_0x257523):_0x257523,_0x46b9e9=_0x331143+':\x20'+_0x57abf6;throw this[_0x467be2(0x240)][_0x467be2(0x3c9)](this[_0x467be2(0x4a8)]+'\x20('+this['instance'][_0x467be2(0x7fe)]+_0x467be2(0x33f)+_0x46b9e9),new x(_0x46b9e9);}}async[a0_0x2101b5(0x1d2)](_0x2d88ae){const _0x526caa=a0_0x2101b5;let _0x2c09cd={'where':{'key':{'remoteJid':_0x2d88ae}},'limit':0x1},_0x13527c=await this[_0x526caa(0x255)](_0x2c09cd);return _0x13527c||(this[_0x526caa(0x240)][_0x526caa(0x3c9)](_0x526caa(0x389)+_0x2d88ae),null);}async[a0_0x2101b5(0x5aa)](_0x346521){const _0x21222a=a0_0x2101b5;this[_0x21222a(0x240)][_0x21222a(0x667)](this[_0x21222a(0x4a8)]+'\x20('+this['instance'][_0x21222a(0x7fe)]+_0x21222a(0x54a));try{let _0x2ce524=_0x346521['lastMessage'],_0x289c77=_0x346521[_0x21222a(0x5b2)];if(!_0x2ce524&&_0x289c77?_0x2ce524=await this[_0x21222a(0x1d2)](_0x289c77):(_0x2ce524=_0x346521[_0x21222a(0x338)],_0x2ce524[_0x21222a(0x646)]=_0x2ce524?.['messageTimestamp']??Date[_0x21222a(0x87f)](),_0x289c77=_0x2ce524?.[_0x21222a(0x150)]?.[_0x21222a(0x4e1)]),!_0x2ce524||Object[_0x21222a(0x59a)](_0x2ce524)[_0x21222a(0x608)]===0x0)throw new U(_0x21222a(0x66c));this[_0x21222a(0x240)][_0x21222a(0x667)](this[_0x21222a(0x4a8)]+'\x20('+this[_0x21222a(0x7f4)][_0x21222a(0x7fe)]+_0x21222a(0x259)+_0x289c77);try{await this[_0x21222a(0x796)]['chatModify']({'archive':_0x346521['archive'],'lastMessages':[_0x2ce524]},this[_0x21222a(0x28b)](_0x289c77));}catch(_0x55b4c7){let _0x41a698=_0x21222a(0x312)+_0x289c77,_0x6ba816=_0x55b4c7 instanceof Error?_0x55b4c7[_0x21222a(0x31f)]:typeof _0x55b4c7=='object'?JSON[_0x21222a(0x41d)](_0x55b4c7):_0x55b4c7,_0xc07626=_0x41a698+':\x20'+_0x6ba816;this[_0x21222a(0x240)][_0x21222a(0x3c9)](this[_0x21222a(0x4a8)]+'\x20('+this['instance']['wuid']+_0x21222a(0x33f)+_0xc07626);}this['logger'][_0x21222a(0x667)](this[_0x21222a(0x4a8)]+'\x20('+this[_0x21222a(0x7f4)][_0x21222a(0x7fe)]+_0x21222a(0x46e)+_0x289c77);let _0x11fa5f=await this[_0x21222a(0x43b)][_0x21222a(0x5b2)][_0x21222a(0x858)]({'where':{'_id':_0x2ce524?.['key']?.[_0x21222a(0x4e1)]}},{'archived':_0x346521[_0x21222a(0x58e)]},this[_0x21222a(0x7f4)][_0x21222a(0x7fe)]);return _0x11fa5f?(this[_0x21222a(0x240)][_0x21222a(0x667)](this[_0x21222a(0x4a8)]+'\x20('+this[_0x21222a(0x7f4)][_0x21222a(0x7fe)]+_0x21222a(0x825)+JSON['stringify'](_0x11fa5f)),F(this[_0x21222a(0x4a8)],_0x21222a(0x415),{'chat':_0x11fa5f})):this[_0x21222a(0x240)][_0x21222a(0x3c9)](this['instanceName']+'\x20('+this['instance'][_0x21222a(0x7fe)]+_0x21222a(0x44c)+_0x289c77),{'chatId':_0x289c77,'archived':_0x346521[_0x21222a(0x58e)]};}catch(_0x1cc7bf){let _0x5d458c=_0x21222a(0x839),_0x25a963=_0x1cc7bf instanceof Error?_0x1cc7bf[_0x21222a(0x31f)]:typeof _0x1cc7bf=='object'?JSON[_0x21222a(0x41d)](_0x1cc7bf):_0x1cc7bf,_0x432c53=_0x5d458c+':\x20'+_0x25a963;throw this[_0x21222a(0x240)][_0x21222a(0x3c9)](this[_0x21222a(0x4a8)]+'\x20('+this['instance'][_0x21222a(0x7fe)]+_0x21222a(0x33f)+_0x432c53),new x(_0x432c53);}}async[a0_0x2101b5(0x6d6)](_0x5718c8){const _0x14ada5=a0_0x2101b5;this[_0x14ada5(0x240)][_0x14ada5(0x667)](this[_0x14ada5(0x4a8)]+'\x20('+this[_0x14ada5(0x7f4)]['wuid']+_0x14ada5(0x196));try{let _0x523063=await this[_0x14ada5(0x1d2)](_0x5718c8);if(!_0x523063||Object[_0x14ada5(0x59a)](_0x523063)[_0x14ada5(0x608)]===0x0)throw new U('Last\x20message\x20not\x20found');let _0x4380ae=_0x523063[0x0];this[_0x14ada5(0x240)][_0x14ada5(0x667)](this[_0x14ada5(0x4a8)]+'\x20('+this[_0x14ada5(0x7f4)][_0x14ada5(0x7fe)]+_0x14ada5(0x2f3)+_0x5718c8);try{await this['client']['chatModify']({'delete':!0x0,'lastMessages':[{'key':_0x4380ae['key'],'messageTimestamp':_0x4380ae[_0x14ada5(0x646)]}]},this['createJid'](_0x5718c8));}catch(_0x5af613){this['logger'][_0x14ada5(0x3c9)]('Error\x20in\x20chatModify\x20for\x20number\x20'+_0x5718c8+':\x20'+_0x5af613[_0x14ada5(0x60f)]());}this['logger'][_0x14ada5(0x667)](this[_0x14ada5(0x4a8)]+'\x20('+this[_0x14ada5(0x7f4)][_0x14ada5(0x7fe)]+_0x14ada5(0x46e)+_0x5718c8);return;}catch(_0x469c2b){throw this['logger']['error'](this[_0x14ada5(0x4a8)]+'\x20('+this[_0x14ada5(0x7f4)][_0x14ada5(0x7fe)]+_0x14ada5(0x56f)+_0x469c2b[_0x14ada5(0x60f)]()),new x({'archived':!0x1,'message':[_0x14ada5(0x648),_0x469c2b['toString']()]});}}async[a0_0x2101b5(0x451)](_0x4dd572){const _0x3ff6d4=a0_0x2101b5;try{let _0x3cc63d=await this[_0x3ff6d4(0x796)][_0x3ff6d4(0x898)](_0x4dd572[_0x3ff6d4(0x4e1)],{'delete':_0x4dd572});try{let _0x2b6bda=await this[_0x3ff6d4(0x152)](_0x4dd572,{'status':_0x3ff6d4(0x504),'owner':this[_0x3ff6d4(0x7f4)][_0x3ff6d4(0x7fe)]});this[_0x3ff6d4(0x240)][_0x3ff6d4(0x667)](this[_0x3ff6d4(0x4a8)]+'\x20('+this['instance'][_0x3ff6d4(0x7fe)]+_0x3ff6d4(0x1e7)+_0x2b6bda);}catch(_0x323c83){this[_0x3ff6d4(0x240)][_0x3ff6d4(0x3c9)](_0x3ff6d4(0x429)+_0x323c83);}return _0x3cc63d;}catch(_0x37ca42){throw new x('Error\x20while\x20deleting\x20message\x20for\x20everyone',_0x37ca42?.['toString']());}}async[a0_0x2101b5(0x2d6)](_0x511d56){const _0x6e68e0=a0_0x2101b5;try{let _0x33247e=_0x511d56?.[_0x6e68e0(0x31f)]?_0x511d56:await this[_0x6e68e0(0x4ca)](_0x511d56[_0x6e68e0(0x150)],!0x0);for(let _0x18fcf5 of Na)_0x33247e[_0x6e68e0(0x31f)][_0x18fcf5]&&(_0x33247e[_0x6e68e0(0x31f)]=_0x33247e[_0x6e68e0(0x31f)][_0x18fcf5][_0x6e68e0(0x31f)]);let _0x1c8bfb,_0x111813;for(let _0x154a0e of va)if(_0x1c8bfb=_0x33247e[_0x6e68e0(0x31f)][_0x154a0e],_0x1c8bfb){_0x111813=_0x154a0e;break;}if(!_0x1c8bfb)throw'The\x20message\x20is\x20not\x20of\x20the\x20media\x20type';typeof _0x1c8bfb[_0x6e68e0(0x75d)]==_0x6e68e0(0x69d)&&(_0x33247e[_0x6e68e0(0x31f)]=JSON[_0x6e68e0(0x4bc)](JSON[_0x6e68e0(0x41d)](_0x33247e['message'])));let _0x2bbf4e=await(0x0,w[_0x6e68e0(0x466)])({'key':_0x33247e?.['key'],'message':_0x33247e?.[_0x6e68e0(0x31f)]},_0x6e68e0(0x624),{},{'logger':(0x0,Ft[_0x6e68e0(0x7ae)])({'level':_0x6e68e0(0x6ce)}),'reuploadRequest':this[_0x6e68e0(0x796)][_0x6e68e0(0x29b)]});if(!(_0x2bbf4e instanceof Buffer))throw new Error('Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.');let _0x2ab01d=this['configService'][_0x6e68e0(0x34a)](_0x6e68e0(0x5b1)),_0x4c4087,_0x23835d;if(_0x1c8bfb[_0x6e68e0(0x8b3)])_0x4c4087=_0x1c8bfb['fileName'];else{let _0xd8e74b=_0x1c8bfb[_0x6e68e0(0x199)]?.[_0x6e68e0(0x66b)](/\/(\w+)/),_0x240216=_0xd8e74b?_0xd8e74b[0x1]:null;if(!_0x240216)throw new Error(_0x6e68e0(0x50c));_0x4c4087=(0x0,Y['v4'])()+'.'+_0x240216;}_0x111813===_0x6e68e0(0x893)?_0x23835d='/media/'+await this[_0x6e68e0(0x7a0)](_0x2bbf4e[_0x6e68e0(0x60f)](_0x6e68e0(0x623))):(await this[_0x6e68e0(0x243)](_0x2bbf4e,_0x4c4087),_0x23835d=_0x6e68e0(0x595)+_0x4c4087);let _0x3b897c=this[_0x6e68e0(0x596)][_0x6e68e0(0x34a)](_0x6e68e0(0x7d4))[_0x6e68e0(0x349)];if(!_0x3b897c){let _0x291673=this[_0x6e68e0(0x596)][_0x6e68e0(0x34a)]('SSL_CONF');_0x3b897c=_0x6e68e0(0x464)+(_0x291673&&_0x291673[_0x6e68e0(0x436)][_0x6e68e0(0x2bd)]('/')[0x4]);}_0x23835d=''+_0x3b897c+_0x23835d;let _0x13304a=0xc*0x3c*0x3c*0x3e8,_0x204ff5={'where':{'_id':_0x33247e[_0x6e68e0(0x150)]['id']}},_0x86fe2a={'message_normalized.fileUrl':_0x23835d,'message_normalized.expires_fileUrl':Date[_0x6e68e0(0x87f)]()+_0x13304a};try{let _0x3ad5a8=await this[_0x6e68e0(0x43b)][_0x6e68e0(0x31f)][_0x6e68e0(0x842)](_0x204ff5,_0x86fe2a,this[_0x6e68e0(0x7f4)][_0x6e68e0(0x7fe)]);_0x3ad5a8&&F(this[_0x6e68e0(0x4a8)],_0x6e68e0(0x76e),{'message':_0x3ad5a8});}catch(_0x8b3974){let _0x58907a=_0x6e68e0(0x4c8),_0x2430b2=_0x8b3974 instanceof Error?_0x8b3974[_0x6e68e0(0x31f)]:typeof _0x8b3974==_0x6e68e0(0x69d)?JSON[_0x6e68e0(0x41d)](_0x8b3974):_0x8b3974,_0x1f45dd=_0x58907a+':\x20'+_0x2430b2;this['logger'][_0x6e68e0(0x3c9)](this[_0x6e68e0(0x4a8)]+'\x20('+this['instance'][_0x6e68e0(0x7fe)]+_0x6e68e0(0x33f)+_0x1f45dd);}return{'mediaType':_0x111813,'fileName':_0x1c8bfb[_0x6e68e0(0x8b3)],'caption':_0x1c8bfb[_0x6e68e0(0x6bd)],'size':{'fileLength':_0x1c8bfb[_0x6e68e0(0x3f9)],'height':_0x1c8bfb[_0x6e68e0(0x715)],'width':_0x1c8bfb['width']},'mimetype':_0x1c8bfb['mimetype'],'base64':_0x2bbf4e[_0x6e68e0(0x60f)](_0x6e68e0(0x623)),'fileUrl':_0x23835d,'expires_fileUrl':Date[_0x6e68e0(0x87f)]()+_0x13304a};}catch(_0x210788){let _0x15576f=_0x6e68e0(0x15a),_0x47b7b2=_0x210788 instanceof Error?_0x210788[_0x6e68e0(0x31f)]:typeof _0x210788=='object'?JSON['stringify'](_0x210788):_0x210788,_0x28999f=_0x15576f+':\x20'+_0x47b7b2;throw this[_0x6e68e0(0x240)][_0x6e68e0(0x3c9)](this[_0x6e68e0(0x4a8)]+'\x20('+this['instance'][_0x6e68e0(0x7fe)]+_0x6e68e0(0x33f)+_0x28999f),new m(_0x28999f);}}async[a0_0x2101b5(0x243)](_0x3d5cde,_0xeed3e5){const _0x5a3258=a0_0x2101b5;let _0x4153c5=j[_0x5a3258(0x7ae)][_0x5a3258(0x1b4)](__dirname,_0x5a3258(0x177));k[_0x5a3258(0x7b7)](_0x4153c5)||k[_0x5a3258(0x25f)](_0x4153c5,{'recursive':!0x0});let _0x1edf20=j[_0x5a3258(0x7ae)][_0x5a3258(0x1b4)](_0x4153c5,_0xeed3e5);return new Promise((_0x3fe2cd,_0x24db5d)=>{const _0x255702=_0x5a3258;k[_0x255702(0x535)](_0x1edf20,_0x3d5cde,_0x3b5e80=>{const _0x5b4f22=_0x255702;_0x3b5e80?(this[_0x5b4f22(0x240)][_0x5b4f22(0x3c9)](_0x5b4f22(0x473)+(_0x3b5e80 instanceof Error?_0x3b5e80[_0x5b4f22(0x31f)]:JSON['stringify'](_0x3b5e80,null,0x2))),_0x24db5d(_0x3b5e80)):(this[_0x5b4f22(0x240)][_0x5b4f22(0x509)](_0x5b4f22(0x639)+_0x1edf20),_0x3fe2cd(_0x1edf20));});});}async[a0_0x2101b5(0x5df)](_0x3f5f57){const _0x38c701=a0_0x2101b5;return await this[_0x38c701(0x43b)][_0x38c701(0x88b)][_0x38c701(0x604)](_0x3f5f57,this[_0x38c701(0x7f4)]['wuid']);}async[a0_0x2101b5(0x8bb)](){const _0x430a84=a0_0x2101b5;return await this['repository'][_0x430a84(0x784)]['find']({'where':{}},this[_0x430a84(0x7f4)]['wuid']);}async[a0_0x2101b5(0x255)](_0x1515d7){const _0x8ab610=a0_0x2101b5;return await this[_0x8ab610(0x43b)]['message'][_0x8ab610(0x604)](_0x1515d7,this[_0x8ab610(0x7f4)][_0x8ab610(0x7fe)]);}async[a0_0x2101b5(0x262)](){const _0x21a556=a0_0x2101b5;return this['repository'][_0x21a556(0x5b2)][_0x21a556(0x20b)](this[_0x21a556(0x7f4)][_0x21a556(0x7fe)]),this['repository']['chat'][_0x21a556(0x795)](this[_0x21a556(0x7f4)][_0x21a556(0x7fe)]),this[_0x21a556(0x43b)][_0x21a556(0x5b2)][_0x21a556(0x422)](this[_0x21a556(0x7f4)][_0x21a556(0x7fe)]),this[_0x21a556(0x43b)][_0x21a556(0x5b2)][_0x21a556(0x875)](this[_0x21a556(0x7f4)]['wuid']),await this[_0x21a556(0x43b)][_0x21a556(0x5b2)]['find']({'where':{}},this[_0x21a556(0x7f4)][_0x21a556(0x7fe)]);}async[a0_0x2101b5(0x2b8)](_0x1b5030){const _0x5684f2=a0_0x2101b5;try{if(!Array['isArray'](_0x1b5030)||_0x1b5030[_0x5684f2(0x608)]===0x0)throw new Error(_0x5684f2(0x22e));let _0x2058ef=[],_0x2a3167=[];for(let _0x4d986a of _0x1b5030){if(_0x4d986a[_0x5684f2(0x1b8)])_0x4d986a[_0x5684f2(0x1b8)]=this[_0x5684f2(0x28b)](_0x4d986a[_0x5684f2(0x1b8)]);else continue;await this[_0x5684f2(0x43b)]['chat'][_0x5684f2(0x505)]({'where':{'_id':_0x4d986a[_0x5684f2(0x1b8)]}},this[_0x5684f2(0x7f4)][_0x5684f2(0x7fe)])?_0x2a3167[_0x5684f2(0x2a9)]({'_id':_0x4d986a[_0x5684f2(0x1b8)],'leadInfo':_0x4d986a['leadInfo'],'owner':this['instance']['wuid']}):_0x2058ef[_0x5684f2(0x2a9)]({'_id':_0x4d986a['_id'],'owner':this[_0x5684f2(0x7f4)][_0x5684f2(0x7fe)],'leadInfo':_0x4d986a['leadInfo'],'imported':!0x0});}return _0x2a3167[_0x5684f2(0x608)]>0x0&&await this['repository'][_0x5684f2(0x5b2)][_0x5684f2(0x877)](_0x2a3167[_0x5684f2(0x5e6)](_0x2afd6b=>({'query':{'where':{'_id':_0x2afd6b[_0x5684f2(0x1b8)],'owner':this[_0x5684f2(0x7f4)][_0x5684f2(0x7fe)]}},'update':_0x2afd6b}))),_0x2058ef['length']>0x0&&await this[_0x5684f2(0x43b)][_0x5684f2(0x5b2)]['insertMany'](_0x2058ef,this[_0x5684f2(0x7f4)][_0x5684f2(0x7fe)]),{'updated':_0x2a3167[_0x5684f2(0x608)],'inserted':_0x2058ef[_0x5684f2(0x608)]};}catch(_0x1fca01){let _0x183b8a=_0x5684f2(0x7e2),_0x39a4d6=_0x1fca01 instanceof Error?_0x1fca01[_0x5684f2(0x31f)]:typeof _0x1fca01=='object'?JSON[_0x5684f2(0x41d)](_0x1fca01):_0x1fca01,_0x208084=_0x183b8a+':\x20'+_0x39a4d6;throw this[_0x5684f2(0x240)]['error'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x5684f2(0x33f)+_0x208084),new m(_0x208084);}}async[a0_0x2101b5(0x3bd)](_0x22c54f){const _0x54a32b=a0_0x2101b5;try{if(!Array[_0x54a32b(0x413)](_0x22c54f)||_0x22c54f[_0x54a32b(0x608)]===0x0)throw new Error(_0x54a32b(0x22e));let _0x6116cf=0x64,_0x5355bc=0x0;for(let _0xd5bb13=0x0;_0xd5bb13<_0x22c54f[_0x54a32b(0x608)];_0xd5bb13+=_0x6116cf){let _0x23217a=_0x22c54f['slice'](_0xd5bb13,_0xd5bb13+_0x6116cf),{updated:_0x3b4aaf}=await this[_0x54a32b(0x5d5)](_0x23217a);_0x5355bc+=_0x3b4aaf;}return{'updated':_0x5355bc};}catch(_0xb263c4){let _0x3026fc=_0x54a32b(0x7e2),_0x39a5b9=_0xb263c4 instanceof Error?_0xb263c4[_0x54a32b(0x31f)]:typeof _0xb263c4==_0x54a32b(0x69d)?JSON[_0x54a32b(0x41d)](_0xb263c4):_0xb263c4,_0x4bc043=_0x3026fc+':\x20'+_0x39a5b9;throw this[_0x54a32b(0x240)][_0x54a32b(0x3c9)](this[_0x54a32b(0x4a8)]+'\x20('+this[_0x54a32b(0x7f4)][_0x54a32b(0x7fe)]+'):\x20'+_0x4bc043),new m(_0x4bc043);}}async[a0_0x2101b5(0x5d5)](_0x2dfcf0){const _0x442803=a0_0x2101b5;try{let _0x298efc=await this[_0x442803(0x43b)][_0x442803(0x784)][_0x442803(0x604)]({'where':{}},this[_0x442803(0x7f4)][_0x442803(0x7fe)]),_0x433061=new Set(_0x298efc[_0x442803(0x5e6)](_0x29c434=>_0x29c434[_0x442803(0x1b8)])),_0xdb2376=[],_0x8ac2fd=[];for(let _0x12007f of _0x2dfcf0){if(!_0x12007f[_0x442803(0x1b8)])continue;_0x12007f['_id']=this[_0x442803(0x28b)](_0x12007f[_0x442803(0x1b8)]);let _0x1ee176=await this[_0x442803(0x43b)][_0x442803(0x5b2)]['findOne']({'where':{'_id':_0x12007f[_0x442803(0x1b8)]}},this[_0x442803(0x7f4)][_0x442803(0x7fe)]),_0x13bfa5={};if(Object[_0x442803(0x7bc)](_0x12007f[_0x442803(0x7f1)])['forEach'](([_0x307c31,_0x430dbc])=>{const _0x730570=_0x442803;_0x13bfa5[_0x730570(0x462)+_0x307c31]=_0x430dbc;}),_0x1ee176&&!_0x1ee176[_0x442803(0x4dd)]){let _0x32d2d9=(_0x12007f['leadInfo'][_0x442803(0x4a7)]||[])[_0x442803(0x285)](_0x35a790=>_0x433061['has'](_0x35a790)),_0x1339bc=new Set(_0x1ee176['leadInfo'][_0x442803(0x4a7)]||[]),_0x21ccac=_0x32d2d9[_0x442803(0x285)](_0x5298f8=>!_0x1339bc[_0x442803(0x350)](_0x5298f8)),_0xd375f=[..._0x1339bc][_0x442803(0x285)](_0x2ee64f=>!_0x32d2d9[_0x442803(0x267)](_0x2ee64f));_0x8ac2fd['push'](..._0x21ccac['map'](_0x4d38dd=>this['AddChatLabel'](_0x4d38dd,_0x12007f[_0x442803(0x1b8)]))),_0x8ac2fd['push'](..._0xd375f[_0x442803(0x5e6)](_0x313d76=>this[_0x442803(0x82a)](_0x313d76,_0x12007f[_0x442803(0x1b8)]))),_0x12007f[_0x442803(0x7f1)][_0x442803(0x4a7)]=_0x32d2d9,_0xdb2376[_0x442803(0x2a9)]({'query':{'where':{'_id':_0x12007f[_0x442803(0x1b8)],'owner':this[_0x442803(0x7f4)][_0x442803(0x7fe)]}},'update':_0x13bfa5});}else _0x13bfa5['imported']=!0x0,_0xdb2376[_0x442803(0x2a9)]({'query':{'where':{'_id':_0x12007f[_0x442803(0x1b8)],'owner':this[_0x442803(0x7f4)][_0x442803(0x7fe)]}},'update':_0x13bfa5});}let _0xf8cfef=await this[_0x442803(0x43b)][_0x442803(0x5b2)][_0x442803(0x877)](_0xdb2376);return await Promise[_0x442803(0x186)](_0x8ac2fd),{'updated':_0xf8cfef};}catch(_0x1f8de9){let _0x28b29f='Erro\x20ao\x20importar\x20chats',_0x599285=_0x1f8de9 instanceof Error?_0x1f8de9[_0x442803(0x31f)]:typeof _0x1f8de9==_0x442803(0x69d)?JSON['stringify'](_0x1f8de9):_0x1f8de9,_0x48104b=_0x28b29f+':\x20'+_0x599285;throw this['logger'][_0x442803(0x3c9)](this[_0x442803(0x4a8)]+'\x20('+this[_0x442803(0x7f4)][_0x442803(0x7fe)]+_0x442803(0x33f)+_0x48104b),new m(_0x48104b);}}async[a0_0x2101b5(0x3e9)](){return await this['client']['fetchPrivacySettings']();}async[a0_0x2101b5(0x516)](_0x5178be){const _0x3ab524=a0_0x2101b5;try{return await this['client'][_0x3ab524(0x2a4)](_0x5178be[_0x3ab524(0x50a)][_0x3ab524(0x6b3)]),await this[_0x3ab524(0x796)][_0x3ab524(0x3c6)](_0x5178be['privacySettings'][_0x3ab524(0x24c)]),await this[_0x3ab524(0x796)][_0x3ab524(0x854)](_0x5178be['privacySettings']['status']),await this[_0x3ab524(0x796)][_0x3ab524(0x28e)](_0x5178be['privacySettings'][_0x3ab524(0x18b)]),await this[_0x3ab524(0x796)][_0x3ab524(0x189)](_0x5178be[_0x3ab524(0x50a)][_0x3ab524(0x416)]),await this[_0x3ab524(0x796)][_0x3ab524(0x6c0)](_0x5178be['privacySettings'][_0x3ab524(0x2c0)]),this[_0x3ab524(0x796)]?.['ws']?.[_0x3ab524(0x584)](),{'update':_0x3ab524(0x29e),'data':{'readreceipts':_0x5178be[_0x3ab524(0x50a)]['readreceipts'],'profile':_0x5178be['privacySettings'][_0x3ab524(0x24c)],'status':_0x5178be['privacySettings'][_0x3ab524(0x352)],'online':_0x5178be[_0x3ab524(0x50a)][_0x3ab524(0x18b)],'last':_0x5178be[_0x3ab524(0x50a)][_0x3ab524(0x416)],'groupadd':_0x5178be[_0x3ab524(0x50a)][_0x3ab524(0x2c0)]}};}catch(_0x511bd7){let _0x243a0e=_0x3ab524(0x36c),_0x221eca=_0x511bd7 instanceof Error?_0x511bd7[_0x3ab524(0x31f)]:typeof _0x511bd7==_0x3ab524(0x69d)?JSON['stringify'](_0x511bd7):_0x511bd7,_0x77a6aa=_0x243a0e+':\x20'+_0x221eca;throw this[_0x3ab524(0x240)][_0x3ab524(0x3c9)](this[_0x3ab524(0x4a8)]+'\x20('+this[_0x3ab524(0x7f4)][_0x3ab524(0x7fe)]+'):\x20'+_0x77a6aa),new m(_0x77a6aa);}}async[a0_0x2101b5(0x5ac)](_0x5cf524){const _0x593de9=a0_0x2101b5;let _0x1a33a8=(_0x5cf524?this[_0x593de9(0x28b)](_0x5cf524):this[_0x593de9(0x796)]?.[_0x593de9(0x4bb)]?.['id'])['replace'](/:\d{1,2}@/g,'@');this[_0x593de9(0x240)][_0x593de9(0x667)](this[_0x593de9(0x4a8)]+'\x20('+this[_0x593de9(0x7f4)]['wuid']+_0x593de9(0x6b4)+_0x1a33a8);let _0x3da5dd=await this['repository']['contact'][_0x593de9(0x505)]({'where':{'_id':_0x1a33a8}},this['instance'][_0x593de9(0x7fe)]),_0x5d16cf=_0x3da5dd?_0x3da5dd[_0x593de9(0x3d1)]:null;try{let _0x4fb766=(await this[_0x593de9(0x56b)]({'numbers':[_0x1a33a8]}))?.[_0x593de9(0x7cb)](),_0xc1a93a=(await this[_0x593de9(0x81b)](_0x1a33a8,null,!0x1))[_0x593de9(0x406)][_0x593de9(0x860)],_0xad355f=await this[_0x593de9(0x8b1)](_0x4fb766?.[_0x593de9(0x58f)]),_0x4c8b8c=await this['fetchBusinessProfile'](_0x4fb766?.['jid']),_0x2752d8=(await this['findAndUpdateCacheContact'](_0x1a33a8,null,!0x1))['cachedContact'][_0x593de9(0x89c)],_0x30e32e=await this[_0x593de9(0x43b)][_0x593de9(0x5b2)][_0x593de9(0x505)]({'where':{'_id':_0x1a33a8}},this[_0x593de9(0x7f4)][_0x593de9(0x7fe)]),_0x3f82bf={'imagechat':_0xc1a93a,'contactname':_0x5d16cf||null,'pushName':_0x2752d8,'status':_0xad355f?.['status'],'isBusiness':_0x4c8b8c[_0x593de9(0x281)],'email':_0x4c8b8c?.[_0x593de9(0x7ca)],'description':_0x4c8b8c?.[_0x593de9(0x6f7)],'website':_0x4c8b8c?.[_0x593de9(0x392)]?.['shift'](),'lastcache':Date[_0x593de9(0x87f)](),'imported':!_0x30e32e},_0x45208d=await this[_0x593de9(0x43b)][_0x593de9(0x5b2)][_0x593de9(0x858)]({'where':{'_id':_0x1a33a8}},_0x3f82bf,this['instance'][_0x593de9(0x7fe)]),_0x40d443={'owner':this[_0x593de9(0x7f4)][_0x593de9(0x7fe)],'_id':_0x1a33a8,'profilePictureUrl':_0xc1a93a,'status':_0xad355f?.['status']};return this['repository'][_0x593de9(0x88b)][_0x593de9(0x842)]([_0x40d443],this['instance'][_0x593de9(0x7fe)]),_0x45208d&&F(this[_0x593de9(0x4a8)],_0x593de9(0x415),{'chat':_0x45208d}),{'wuid':_0x4fb766?.[_0x593de9(0x58f)]||_0x1a33a8,'name':_0x4fb766?.[_0x593de9(0x89c)],'pushName':_0x2752d8,'numberExists':_0x4fb766?.[_0x593de9(0x6de)],'picture':_0xc1a93a,'status':_0xad355f?.['status'],'isBusiness':_0x4c8b8c[_0x593de9(0x281)],'email':_0x4c8b8c?.[_0x593de9(0x7ca)],'description':_0x4c8b8c?.['description'],'website':_0x4c8b8c?.[_0x593de9(0x392)]?.[_0x593de9(0x7cb)]()};}catch(_0x180cf5){return this['logger']['error'](_0x593de9(0x64b)+(_0x180cf5 instanceof Error?_0x180cf5[_0x593de9(0x31f)]:JSON['stringify'](_0x180cf5,null,0x2))),{};}}async['fetchBusinessProfile'](_0x2b6a21){const _0x504b99=a0_0x2101b5;this[_0x504b99(0x240)][_0x504b99(0x667)](this[_0x504b99(0x4a8)]+'\x20('+this[_0x504b99(0x7f4)]['wuid']+_0x504b99(0x1ae));try{let _0x58d699=_0x2b6a21?this[_0x504b99(0x28b)](_0x2b6a21):this['instance'][_0x504b99(0x7fe)],_0x2fa08a=await this[_0x504b99(0x796)][_0x504b99(0x306)](_0x58d699);return this[_0x504b99(0x240)][_0x504b99(0x667)](this[_0x504b99(0x4a8)]+'\x20('+this['instance'][_0x504b99(0x7fe)]+'):Trying\x20to\x20get\x20business\x20profile'),_0x2fa08a?(this['logger'][_0x504b99(0x667)](this[_0x504b99(0x4a8)]+'\x20('+this[_0x504b99(0x7f4)][_0x504b99(0x7fe)]+_0x504b99(0x7e9)),{'isBusiness':!0x0,..._0x2fa08a}):{'isBusiness':!0x1,'message':_0x504b99(0x372),...(await this[_0x504b99(0x56b)]({'numbers':[_0x58d699]}))?.[_0x504b99(0x7cb)]()};}catch(_0x37e93f){let _0x151a4c=_0x504b99(0x233),_0x4b99c3=_0x37e93f instanceof Error?_0x37e93f[_0x504b99(0x31f)]:typeof _0x37e93f=='object'?JSON[_0x504b99(0x41d)](_0x37e93f):_0x37e93f,_0x506426=_0x151a4c+':\x20'+_0x4b99c3;throw this[_0x504b99(0x240)][_0x504b99(0x3c9)](this[_0x504b99(0x4a8)]+'\x20('+this[_0x504b99(0x7f4)][_0x504b99(0x7fe)]+'):\x20'+_0x506426),new x(_0x506426);}}async['getStatus'](_0xd49dcb){const _0x2bf446=a0_0x2101b5;let _0x45a67f=this[_0x2bf446(0x28b)](_0xd49dcb);try{return{'wuid':_0x45a67f,'status':(await this['client'][_0x2bf446(0x1ca)](_0x45a67f))[0x0]?.[_0x2bf446(0x352)]};}catch{return{'wuid':_0x45a67f,'status':null};}}async[a0_0x2101b5(0x6a0)](_0x4e18aa){const _0x3331d4=a0_0x2101b5;try{return await this[_0x3331d4(0x796)][_0x3331d4(0x6a0)](_0x4e18aa),{'update':_0x3331d4(0x29e)};}catch(_0x229911){let _0x3dbdc7='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName',_0xb39b5e=_0x229911 instanceof Error?_0x229911[_0x3331d4(0x31f)]:typeof _0x229911=='object'?JSON[_0x3331d4(0x41d)](_0x229911):_0x229911,_0x7cc8ff=_0x3dbdc7+':\x20'+_0xb39b5e;throw this[_0x3331d4(0x240)][_0x3331d4(0x3c9)](this[_0x3331d4(0x4a8)]+'\x20('+this[_0x3331d4(0x7f4)][_0x3331d4(0x7fe)]+_0x3331d4(0x33f)+_0x7cc8ff),new x(_0x7cc8ff);}}async['updateProfileStatus'](_0x2edf62){const _0x5b241c=a0_0x2101b5;try{return await this[_0x5b241c(0x796)][_0x5b241c(0x1f9)](_0x2edf62),{'update':_0x5b241c(0x29e)};}catch(_0x194e4d){let _0x29fea4=_0x5b241c(0x403),_0x3c8588=_0x194e4d instanceof Error?_0x194e4d[_0x5b241c(0x31f)]:typeof _0x194e4d==_0x5b241c(0x69d)?JSON[_0x5b241c(0x41d)](_0x194e4d):_0x194e4d,_0x3f9685=_0x29fea4+':\x20'+_0x3c8588;throw this[_0x5b241c(0x240)]['error'](this[_0x5b241c(0x4a8)]+'\x20('+this['instance'][_0x5b241c(0x7fe)]+_0x5b241c(0x33f)+_0x3f9685),new x(_0x3f9685);}}async[a0_0x2101b5(0x809)](_0x20f3e4){const _0x3651a5=a0_0x2101b5;try{let _0x3cce32;if((0x0,J[_0x3651a5(0x719)])(_0x20f3e4)){let _0x3b6cdb=new Date()[_0x3651a5(0x8bc)](),_0x3fb8d5=_0x20f3e4+_0x3651a5(0x43d)+_0x3b6cdb;_0x3cce32=(await Q[_0x3651a5(0x7ae)][_0x3651a5(0x34a)](_0x3fb8d5,{'responseType':'arraybuffer'}))['data'];}else{if((0x0,J[_0x3651a5(0x5e8)])(_0x20f3e4))_0x3cce32=Buffer[_0x3651a5(0x50f)](_0x20f3e4,_0x3651a5(0x623));else throw new m(_0x3651a5(0x2a7));}return await this[_0x3651a5(0x796)][_0x3651a5(0x809)](this[_0x3651a5(0x7f4)][_0x3651a5(0x7fe)],_0x3cce32),{'update':_0x3651a5(0x29e)};}catch(_0x971e1b){let _0x1ad143=_0x3651a5(0x74f),_0x5614af=_0x971e1b instanceof Error?_0x971e1b[_0x3651a5(0x31f)]:typeof _0x971e1b==_0x3651a5(0x69d)?JSON[_0x3651a5(0x41d)](_0x971e1b):_0x971e1b,_0x266139=_0x1ad143+':\x20'+_0x5614af;throw this[_0x3651a5(0x240)][_0x3651a5(0x3c9)](this[_0x3651a5(0x4a8)]+'\x20('+this['instance'][_0x3651a5(0x7fe)]+_0x3651a5(0x33f)+_0x266139),new x(_0x266139);}}async[a0_0x2101b5(0x665)](){const _0x4bf304=a0_0x2101b5;try{return await this[_0x4bf304(0x796)][_0x4bf304(0x665)](this[_0x4bf304(0x7f4)][_0x4bf304(0x7fe)]),{'update':_0x4bf304(0x29e)};}catch(_0x3e9470){let _0x4a9e5e=_0x4bf304(0x8cf),_0x2c6b95=_0x3e9470 instanceof Error?_0x3e9470[_0x4bf304(0x31f)]:typeof _0x3e9470==_0x4bf304(0x69d)?JSON[_0x4bf304(0x41d)](_0x3e9470):_0x3e9470,_0x227eff=_0x4a9e5e+':\x20'+_0x2c6b95;throw this[_0x4bf304(0x240)][_0x4bf304(0x3c9)](this[_0x4bf304(0x4a8)]+'\x20('+this[_0x4bf304(0x7f4)][_0x4bf304(0x7fe)]+'):\x20'+_0x227eff),new x(_0x227eff);}}async['createGroup'](_0x19e0e6){const _0x35de40=a0_0x2101b5;try{let _0x151889=(await this[_0x35de40(0x56b)]({'numbers':_0x19e0e6[_0x35de40(0x613)]}))[_0x35de40(0x285)](_0x136e1a=>_0x136e1a[_0x35de40(0x6de)])[_0x35de40(0x5e6)](_0x5b9902=>_0x5b9902[_0x35de40(0x58f)]),{id:_0x156c76}=await this[_0x35de40(0x796)][_0x35de40(0x3ef)](_0x19e0e6[_0x35de40(0x22c)],_0x151889);_0x19e0e6?.[_0x35de40(0x6f7)]&&await this[_0x35de40(0x796)][_0x35de40(0x470)](_0x156c76,_0x19e0e6[_0x35de40(0x6f7)]);let _0xca099f=await this[_0x35de40(0x796)][_0x35de40(0x556)](_0x156c76);return _0xca099f[_0x35de40(0x7df)]=[],await this[_0x35de40(0x409)](_0xca099f),{'metadata':_0xca099f};}catch(_0x51ffc6){let _0x295ca4=_0x35de40(0x4a9),_0x433152=_0x51ffc6 instanceof Error?_0x51ffc6['message']:typeof _0x51ffc6==_0x35de40(0x69d)?JSON['stringify'](_0x51ffc6):_0x51ffc6,_0x53f603=_0x295ca4+':\x20'+_0x433152;throw this[_0x35de40(0x240)][_0x35de40(0x3c9)](this[_0x35de40(0x4a8)]+'\x20('+this['instance'][_0x35de40(0x7fe)]+'):\x20'+_0x53f603),new x(_0x53f603);}}async[a0_0x2101b5(0x559)](_0x542660){const _0x5cbeda=a0_0x2101b5;try{if(_0x542660[_0x5cbeda(0x2b2)]===!0x0&&await this[_0x5cbeda(0x796)][_0x5cbeda(0x16d)](_0x542660['groupJid'],_0x5cbeda(0x6fb)),_0x542660[_0x5cbeda(0x2b2)]===!0x1&&await this[_0x5cbeda(0x796)]['groupSettingUpdate'](_0x542660[_0x5cbeda(0x5c0)],_0x5cbeda(0x81a)),_0x542660[_0x5cbeda(0x6e9)]===!0x0&&await this[_0x5cbeda(0x796)][_0x5cbeda(0x16d)](_0x542660[_0x5cbeda(0x5c0)],_0x5cbeda(0x565)),_0x542660['announce']===!0x1&&await this['client'][_0x5cbeda(0x16d)](_0x542660['groupJid'],'not_announcement'),_0x542660[_0x5cbeda(0x4b2)]===!0x0&&await this[_0x5cbeda(0x796)][_0x5cbeda(0x26c)](_0x542660[_0x5cbeda(0x5c0)],'all_member_add'),_0x542660[_0x5cbeda(0x4b2)]===!0x1&&await this['client']['groupMemberAddMode'](_0x542660[_0x5cbeda(0x5c0)],_0x5cbeda(0x3a6)),_0x542660[_0x5cbeda(0x2eb)]===!0x0&&await this[_0x5cbeda(0x796)][_0x5cbeda(0x62a)](_0x542660[_0x5cbeda(0x5c0)],'on'),_0x542660[_0x5cbeda(0x2eb)]===!0x1&&await this[_0x5cbeda(0x796)][_0x5cbeda(0x62a)](_0x542660[_0x5cbeda(0x5c0)],_0x5cbeda(0x390)),typeof _0x542660[_0x5cbeda(0x6cb)]<'u'&&_0x542660[_0x5cbeda(0x6cb)]!==null&&await this['client'][_0x5cbeda(0x7da)](_0x542660[_0x5cbeda(0x5c0)],_0x542660['expiration']),_0x542660[_0x5cbeda(0x89c)]&&await this[_0x5cbeda(0x796)][_0x5cbeda(0x14c)](_0x542660[_0x5cbeda(0x5c0)],_0x542660[_0x5cbeda(0x89c)]),_0x542660[_0x5cbeda(0x6f7)]&&await this[_0x5cbeda(0x796)][_0x5cbeda(0x470)](_0x542660[_0x5cbeda(0x5c0)],_0x542660['description']),_0x542660[_0x5cbeda(0x2c4)]){let _0x24b6e2;if((0x0,J[_0x5cbeda(0x719)])(_0x542660[_0x5cbeda(0x2c4)])){let _0x40dfd6=new Date()[_0x5cbeda(0x8bc)](),_0x52973e=_0x542660[_0x5cbeda(0x2c4)]+_0x5cbeda(0x43d)+_0x40dfd6;_0x24b6e2=(await Q[_0x5cbeda(0x7ae)][_0x5cbeda(0x34a)](_0x52973e,{'responseType':_0x5cbeda(0x342)}))[_0x5cbeda(0x1a0)];}else{if((0x0,J[_0x5cbeda(0x5e8)])(_0x542660[_0x5cbeda(0x2c4)]))_0x24b6e2=Buffer[_0x5cbeda(0x50f)](_0x542660[_0x5cbeda(0x2c4)],_0x5cbeda(0x623));else throw new m(_0x5cbeda(0x2a7));}await this[_0x5cbeda(0x796)][_0x5cbeda(0x809)](_0x542660[_0x5cbeda(0x5c0)],_0x24b6e2);}return await this[_0x5cbeda(0x45c)]({'groupJid':_0x542660[_0x5cbeda(0x5c0)]});}catch(_0x235030){let _0x5f390a='Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting',_0x284596=_0x235030 instanceof Error?_0x235030[_0x5cbeda(0x31f)]:typeof _0x235030==_0x5cbeda(0x69d)?JSON['stringify'](_0x235030):_0x235030,_0x42e498=_0x5f390a+':\x20'+_0x284596;throw this[_0x5cbeda(0x240)][_0x5cbeda(0x3c9)](this['instanceName']+'\x20('+this[_0x5cbeda(0x7f4)]['wuid']+_0x5cbeda(0x33f)+_0x42e498),new x(_0x42e498);}}async[a0_0x2101b5(0x7ce)](_0x10485d){const _0x2d563b=a0_0x2101b5;try{let _0x42743f=_0x10485d['participants'][_0x2d563b(0x5e6)](_0x23a7ad=>this['createJid'](_0x23a7ad));if(_0x10485d[_0x2d563b(0x3b3)]===_0x2d563b(0x424)||_0x10485d[_0x2d563b(0x3b3)]===_0x2d563b(0x501))await this[_0x2d563b(0x796)][_0x2d563b(0x456)](_0x10485d['groupJid'],_0x42743f,_0x10485d[_0x2d563b(0x3b3)]);else{if(_0x10485d[_0x2d563b(0x3b3)]===_0x2d563b(0x6c5)){let _0x363bb8=(await this[_0x2d563b(0x56b)]({'numbers':_0x10485d[_0x2d563b(0x613)]}))[_0x2d563b(0x285)](_0x252774=>_0x252774[_0x2d563b(0x6de)])[_0x2d563b(0x5e6)](_0xee9e67=>this[_0x2d563b(0x28b)](_0xee9e67[_0x2d563b(0x58f)]));if(_0x363bb8[_0x2d563b(0x608)]===0x0)throw new m(_0x2d563b(0x26b));await this[_0x2d563b(0x796)][_0x2d563b(0x6ef)](_0x10485d[_0x2d563b(0x5c0)],_0x363bb8,'add');}else await this[_0x2d563b(0x796)][_0x2d563b(0x6ef)](_0x10485d[_0x2d563b(0x5c0)],_0x42743f,_0x10485d['action']);}return await this[_0x2d563b(0x45c)]({'groupJid':_0x10485d[_0x2d563b(0x5c0)]});}catch(_0x2f91c1){let _0x14dff3='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant',_0x226a1b=_0x2f91c1 instanceof Error?_0x2f91c1[_0x2d563b(0x31f)]:typeof _0x2f91c1==_0x2d563b(0x69d)?JSON[_0x2d563b(0x41d)](_0x2f91c1):_0x2f91c1,_0x58f484=_0x14dff3+':\x20'+_0x226a1b;throw this[_0x2d563b(0x240)][_0x2d563b(0x3c9)](this[_0x2d563b(0x4a8)]+'\x20('+this['instance'][_0x2d563b(0x7fe)]+_0x2d563b(0x33f)+_0x58f484),new m(_0x58f484);}}async[a0_0x2101b5(0x165)](_0x42936c){const _0x495228=a0_0x2101b5;try{return await this[_0x495228(0x796)]['groupGetInviteInfo'](_0x42936c[_0x495228(0x718)]);}catch(_0x141328){let _0x4105dc=_0x495228(0x7ad),_0x5649b6=_0x141328 instanceof Error?_0x141328[_0x495228(0x31f)]:typeof _0x141328==_0x495228(0x69d)?JSON[_0x495228(0x41d)](_0x141328):_0x141328,_0x1dff92=_0x4105dc+':\x20'+_0x5649b6;throw this[_0x495228(0x240)]['error'](this[_0x495228(0x4a8)]+'\x20('+this[_0x495228(0x7f4)]['wuid']+_0x495228(0x33f)+_0x1dff92),new m(_0x1dff92);}}async[a0_0x2101b5(0x45c)](_0x23a1b7,_0x16832c=a0_0x2101b5(0x36d)){const _0x20fdbf=a0_0x2101b5;try{let _0xfee032=await this[_0x20fdbf(0x43b)][_0x20fdbf(0x5b2)][_0x20fdbf(0x505)]({'where':{'_id':_0x23a1b7[_0x20fdbf(0x5c0)]}},this[_0x20fdbf(0x7f4)][_0x20fdbf(0x7fe)]),_0x241b4c=_0xfee032?_0xfee032[_0x20fdbf(0x3e7)]:null,_0x2241d4=0x18*0x3c*0x3c*0x3e8;if(!_0x241b4c||_0x241b4c[_0x20fdbf(0x864)]&&Date['now']()-_0x241b4c[_0x20fdbf(0x864)]>_0x2241d4){let _0x140b60=await this[_0x20fdbf(0x796)]['groupMetadata'](_0x23a1b7['groupJid']);if(_0x140b60['subjectTime']=_0x140b60?.[_0x20fdbf(0x378)]&&_0x140b60[_0x20fdbf(0x378)][_0x20fdbf(0x60f)]()['length']<0xd?_0x140b60?.['subjectTime']*0x3e8:_0x140b60?.['subjectTime']||null,_0x140b60[_0x20fdbf(0x7dc)]=_0x140b60?.[_0x20fdbf(0x7dc)]&&_0x140b60[_0x20fdbf(0x7dc)][_0x20fdbf(0x60f)]()['length']<0xd?_0x140b60?.[_0x20fdbf(0x7dc)]*0x3e8:_0x140b60?.[_0x20fdbf(0x7dc)]||null,_0x241b4c={..._0x140b60,'lastUpdate':Date[_0x20fdbf(0x87f)]()},!_0x140b60)return;}let _0x30fff0=_0x241b4c['participants']?.[_0x20fdbf(0x502)](_0x34fd40=>_0x34fd40['id']===this[_0x20fdbf(0x7f4)][_0x20fdbf(0x7fe)]+_0x20fdbf(0x1b5)&&_0x34fd40[_0x20fdbf(0x485)]!=null)||!0x1;!_0x241b4c['inviteCode']&&_0x30fff0&&(_0x241b4c[_0x20fdbf(0x718)]=(await this[_0x20fdbf(0x718)](_0x23a1b7,!0x1))[_0x20fdbf(0x531)]);let _0x5458df=(!_0x241b4c[_0x20fdbf(0x6e9)]||_0x30fff0)&&(!_0x241b4c['isCommunity']||_0x241b4c[_0x20fdbf(0x824)]&&_0x241b4c[_0x20fdbf(0x20a)]&&_0x30fff0);_0x241b4c[_0x20fdbf(0x3f6)]=_0x30fff0,_0x241b4c['canSendMessage']=_0x5458df;let _0x120540=[];if(_0x30fff0&&_0x241b4c['joinApprovalMode'])try{_0x120540=await this[_0x20fdbf(0x796)][_0x20fdbf(0x506)](_0x23a1b7[_0x20fdbf(0x5c0)]),_0x241b4c['lastFetchAwaitingApproval']=Date[_0x20fdbf(0x87f)]();}catch(_0x1038d1){this[_0x20fdbf(0x240)][_0x20fdbf(0x667)](this[_0x20fdbf(0x4a8)]+'\x20('+this[_0x20fdbf(0x7f4)]['wuid']+_0x20fdbf(0x320)+_0x23a1b7[_0x20fdbf(0x5c0)]+':\x20'+(_0x1038d1 instanceof Error?_0x1038d1['message']:JSON[_0x20fdbf(0x41d)](_0x1038d1,null,0x2)));}try{_0x241b4c['image']=(await this[_0x20fdbf(0x81b)](_0x23a1b7['groupJid'],null,!0x0))[_0x20fdbf(0x406)][_0x20fdbf(0x860)];}catch(_0x3f7147){this[_0x20fdbf(0x240)][_0x20fdbf(0x667)](this['instanceName']+'\x20('+this['instance'][_0x20fdbf(0x7fe)]+_0x20fdbf(0x68c)+_0x23a1b7['groupJid']+':\x20'+(_0x3f7147 instanceof Error?_0x3f7147[_0x20fdbf(0x31f)]:JSON[_0x20fdbf(0x41d)](_0x3f7147,null,0x2)));}let _0x17001d=_0x241b4c[_0x20fdbf(0x613)]['map'](_0x38924c=>_0x38924c['id']),_0x3cd59b=_0x120540[_0x20fdbf(0x5e6)](_0x58fcb5=>_0x58fcb5[_0x20fdbf(0x58f)]),_0xe16b1e=await this[_0x20fdbf(0x43b)]['cacheContact'][_0x20fdbf(0x6fe)]([..._0x17001d,..._0x3cd59b]);_0x241b4c[_0x20fdbf(0x613)]=_0x241b4c[_0x20fdbf(0x613)][_0x20fdbf(0x5e6)](_0x579fc0=>{const _0x367d2c=_0x20fdbf;let _0x25225e=_0xe16b1e[_0x367d2c(0x604)](_0x49bbaa=>_0x49bbaa['_id']===_0x579fc0['id']);return{'id':_0x579fc0['id'],'isAdmin':[_0x367d2c(0x485),_0x367d2c(0x8be)]['includes'](_0x579fc0[_0x367d2c(0x485)]),'admin':_0x579fc0[_0x367d2c(0x485)],'pushName':_0x25225e?.['name'],'profilePictureUrl':_0x25225e?.[_0x367d2c(0x860)]};}),_0x241b4c[_0x20fdbf(0x7df)]=_0x120540[_0x20fdbf(0x5e6)](_0x1c7fee=>{const _0x3505e3=_0x20fdbf;let _0x2ac5af=_0xe16b1e[_0x3505e3(0x604)](_0x203943=>_0x203943[_0x3505e3(0x1b8)]===_0x1c7fee[_0x3505e3(0x58f)]);return{'id':_0x1c7fee[_0x3505e3(0x58f)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x2ac5af?.[_0x3505e3(0x89c)],'profilePictureUrl':_0x2ac5af?.[_0x3505e3(0x860)],'request_method':_0x1c7fee[_0x3505e3(0x1f7)],'request_time':_0x1c7fee[_0x3505e3(0x44d)]};});let _0x6a2122=await this[_0x20fdbf(0x43b)]['chat'][_0x20fdbf(0x858)]({'where':{'_id':_0x23a1b7['groupJid']}},{'imagechat':_0x241b4c['image'],'name':_0x241b4c[_0x20fdbf(0x22c)],'lastcache':Date[_0x20fdbf(0x87f)](),'groupdata':_0x241b4c},this[_0x20fdbf(0x7f4)]['wuid']);return F(this['instanceName'],'chats',{'chat':_0x6a2122}),{'metadata':_0x241b4c};}catch(_0x291cf1){if(_0x16832c===_0x20fdbf(0x1f5))return;throw new U(_0x20fdbf(0x326),_0x291cf1[_0x20fdbf(0x31f)][_0x20fdbf(0x60f)]());}}async[a0_0x2101b5(0x744)](){const _0x2fce5c=a0_0x2101b5;try{this[_0x2fce5c(0x240)][_0x2fce5c(0x344)](_0x2fce5c(0x6ba));let _0x47e61c=Date[_0x2fce5c(0x87f)](),_0x116e2f=0x3*0x3c*0x3c*0x3e8;return _0x47e61c-this[_0x2fce5c(0x3eb)]>_0x116e2f&&(this[_0x2fce5c(0x66a)](),this['lastRealGroupsFetch']=_0x47e61c),(await this[_0x2fce5c(0x43b)][_0x2fce5c(0x5b2)]['findGroupsEspecial']({'where':{'group':!0x0}},this[_0x2fce5c(0x7f4)][_0x2fce5c(0x7fe)]))[_0x2fce5c(0x5e6)](_0x3866b8=>({..._0x3866b8[_0x2fce5c(0x3e7)],'groupJid':_0x3866b8?.[_0x2fce5c(0x1b8)],'participants':_0x3866b8?.[_0x2fce5c(0x3e7)]?.[_0x2fce5c(0x613)]||[],'awaitingApproval':_0x3866b8?.[_0x2fce5c(0x3e7)]?.['awaitingApproval']||[],'image':_0x3866b8?.['imagechat']}));}catch(_0x37ca45){let _0x5a2b9f=_0x2fce5c(0x14e),_0x58f1ee=_0x37ca45 instanceof Error?_0x37ca45[_0x2fce5c(0x31f)]:typeof _0x37ca45==_0x2fce5c(0x69d)?JSON['stringify'](_0x37ca45):_0x37ca45,_0x4250a7=_0x5a2b9f+':\x20'+_0x58f1ee;throw this[_0x2fce5c(0x240)]['error'](this['instanceName']+'\x20('+this[_0x2fce5c(0x7f4)][_0x2fce5c(0x7fe)]+'):\x20'+_0x4250a7),new U(_0x4250a7);}}async[a0_0x2101b5(0x66a)](){const _0x3e9e89=a0_0x2101b5;try{this[_0x3e9e89(0x240)][_0x3e9e89(0x344)](_0x3e9e89(0x57c));let _0xef07f8=[],_0xd25497=await this[_0x3e9e89(0x796)][_0x3e9e89(0x8af)](),_0x2936ea=Object['values'](_0xd25497),_0x5ef393=_0x2936ea[_0x3e9e89(0x285)](_0x29ee6a=>(0x0,w[_0x3e9e89(0x39a)])(_0x29ee6a?.['id']))[_0x3e9e89(0x5e6)](async _0x187371=>{const _0x1f9dd3=_0x3e9e89;try{return await this[_0x1f9dd3(0x796)][_0x1f9dd3(0x728)](_0x187371['id'],_0x1f9dd3(0x28a));}catch(_0x5744b2){return this[_0x1f9dd3(0x240)][_0x1f9dd3(0x667)](this[_0x1f9dd3(0x4a8)]+'\x20('+this['instance'][_0x1f9dd3(0x7fe)]+_0x1f9dd3(0x68c)+_0x187371['id']+':\x20'+(_0x5744b2 instanceof Error?_0x5744b2[_0x1f9dd3(0x31f)]:JSON[_0x1f9dd3(0x41d)](_0x5744b2,null,0x2))),null;}}),_0x15c572=await Promise[_0x3e9e89(0x186)](_0x5ef393);for(let _0x5e3d2f=0x0;_0x5e3d2f<_0x2936ea[_0x3e9e89(0x608)];_0x5e3d2f++){let _0x380f4f=_0x2936ea[_0x5e3d2f];(0x0,w['isJidGroup'])(_0x380f4f?.['id'])&&(_0xef07f8[_0x3e9e89(0x2a9)]({'groupJid':_0x380f4f?.['id'],'subject':_0x380f4f?.[_0x3e9e89(0x22c)],'subjectOwner':_0x380f4f?.['subjectOwner']?.[_0x3e9e89(0x2bd)]('@')[0x0],'subjectTime':_0x380f4f?.[_0x3e9e89(0x378)],'creation':_0x380f4f?.[_0x3e9e89(0x7dc)],'size':_0x380f4f?.[_0x3e9e89(0x613)]?.[_0x3e9e89(0x608)],'owner':_0x380f4f?.[_0x3e9e89(0x235)]?.['split']('@')[0x0],'desc':_0x380f4f?.[_0x3e9e89(0x3bc)],'restrict':_0x380f4f?.[_0x3e9e89(0x2b2)],'announce':_0x380f4f?.[_0x3e9e89(0x6e9)],'image':_0x15c572[_0x5e3d2f],'isCommunity':_0x380f4f?.[_0x3e9e89(0x824)],'joinApprovalMode':_0x380f4f?.[_0x3e9e89(0x2eb)],'memberCanAddParticipant':_0x380f4f?.['memberAddMode'],'participants':_0x380f4f?.[_0x3e9e89(0x613)],'descOwner':_0x380f4f?.[_0x3e9e89(0x21a)],'descId':_0x380f4f?.[_0x3e9e89(0x619)],'memberAddMode':_0x380f4f?.[_0x3e9e89(0x4b2)],'isCommunityAnnounce':_0x380f4f?.['isCommunityAnnounce'],'ephemeralDuration':_0x380f4f?.[_0x3e9e89(0x31d)]||0x0,'author':_0x380f4f?.[_0x3e9e89(0x5a1)]}),this[_0x3e9e89(0x409)](_0x2936ea[_0x5e3d2f]));}return _0xef07f8;}catch(_0x3af22b){let _0x4a7cd2=_0x3e9e89(0x63f),_0x55a468=_0x3af22b instanceof Error?_0x3af22b['message']:typeof _0x3af22b==_0x3e9e89(0x69d)?JSON[_0x3e9e89(0x41d)](_0x3af22b):_0x3af22b,_0x591eb6=_0x4a7cd2+':\x20'+_0x55a468;throw this['logger'][_0x3e9e89(0x3c9)](this[_0x3e9e89(0x4a8)]+'\x20('+this[_0x3e9e89(0x7f4)][_0x3e9e89(0x7fe)]+_0x3e9e89(0x33f)+_0x591eb6),new U(_0x591eb6);}}async[a0_0x2101b5(0x409)](_0x5ece58){const _0xaf1576=a0_0x2101b5;let _0x1c605e=await this['repository'][_0xaf1576(0x5b2)]['findOne']({'where':{'_id':_0x5ece58['id']}},this[_0xaf1576(0x7f4)]['wuid']);_0x5ece58['subjectTime']=_0x5ece58?.[_0xaf1576(0x378)]&&_0x5ece58[_0xaf1576(0x378)][_0xaf1576(0x60f)]()[_0xaf1576(0x608)]<0xd?_0x5ece58?.[_0xaf1576(0x378)]*0x3e8:_0x5ece58?.[_0xaf1576(0x378)]||null,_0x5ece58['creation']=_0x5ece58?.['creation']&&_0x5ece58[_0xaf1576(0x7dc)][_0xaf1576(0x60f)]()[_0xaf1576(0x608)]<0xd?_0x5ece58?.[_0xaf1576(0x7dc)]*0x3e8:_0x5ece58?.[_0xaf1576(0x7dc)]||null;let _0x297314=_0x1c605e?.['groupdata']?.[_0xaf1576(0x7df)]||[],_0x2463e5=_0x1c605e?.[_0xaf1576(0x3e7)]?.[_0xaf1576(0x4d8)],_0x1a1064=_0x5ece58[_0xaf1576(0x613)][_0xaf1576(0x5e6)](_0x34cdcd=>{const _0x18c4b0=_0xaf1576;let _0x273040=_0x1c605e?.[_0x18c4b0(0x3e7)]?.['participants'][_0x18c4b0(0x604)](_0x26f376=>_0x26f376['id']===_0x34cdcd['id']);return{..._0x34cdcd,'isAdmin':[_0x18c4b0(0x485),'superadmin'][_0x18c4b0(0x267)](_0x34cdcd['admin']),'admin':_0x34cdcd['admin'],'name':_0x273040?.[_0x18c4b0(0x89c)]||_0x34cdcd[_0x18c4b0(0x89c)],'imgUrl':_0x273040?.[_0x18c4b0(0x43f)]||_0x34cdcd[_0x18c4b0(0x43f)]};}),_0x4d97ff=_0x1a1064[_0xaf1576(0x502)](_0x13e90b=>_0x13e90b['id']===this[_0xaf1576(0x7f4)]['wuid']+_0xaf1576(0x1b5)&&_0x13e90b[_0xaf1576(0x485)]!=null)||!0x1,_0x25cc61=(!_0x5ece58[_0xaf1576(0x6e9)]||_0x4d97ff)&&(!_0x5ece58[_0xaf1576(0x824)]||_0x5ece58[_0xaf1576(0x824)]&&_0x5ece58[_0xaf1576(0x20a)]&&_0x4d97ff),_0x488f8f={..._0x5ece58,'participants':_0x1a1064,'awaitingApproval':_0x297314,'lastFetchAwaitingApproval':_0x2463e5,'isAdmin':_0x4d97ff,'canSendMessage':_0x25cc61,'lastUpdate':Date['now']()};await this['repository'][_0xaf1576(0x5b2)][_0xaf1576(0x858)]({'where':{'_id':_0x5ece58['id']}},{'name':_0x5ece58['subject'],'group':!0x0,'groupdata':_0x488f8f,'lastcache':Date[_0xaf1576(0x87f)]()},this['instance'][_0xaf1576(0x7fe)]),F(this[_0xaf1576(0x4a8)],_0xaf1576(0x415),{'chat':_0x5ece58});}async[a0_0x2101b5(0x162)](_0x333435){const _0x382cb3=a0_0x2101b5;let _0x446800=await this[_0x382cb3(0x43b)][_0x382cb3(0x5b2)]['findOne']({'where':{'_id':_0x333435['id']}},this[_0x382cb3(0x7f4)][_0x382cb3(0x7fe)]);_0x333435[_0x382cb3(0x378)]=_0x333435?.['subjectTime']&&_0x333435[_0x382cb3(0x378)][_0x382cb3(0x60f)]()['length']<0xd?_0x333435?.[_0x382cb3(0x378)]*0x3e8:_0x333435?.[_0x382cb3(0x378)]||null,_0x333435[_0x382cb3(0x7dc)]=_0x333435?.[_0x382cb3(0x7dc)]&&_0x333435['creation'][_0x382cb3(0x60f)]()[_0x382cb3(0x608)]<0xd?_0x333435?.[_0x382cb3(0x7dc)]*0x3e8:_0x333435?.[_0x382cb3(0x7dc)]||null,_0x333435[_0x382cb3(0x718)]&&(_0x333435[_0x382cb3(0x718)]=_0x382cb3(0x801)+_0x333435[_0x382cb3(0x718)]);let _0x1a8191=_0x446800?.[_0x382cb3(0x3e7)]?{..._0x446800[_0x382cb3(0x3e7)]}:{};Object['keys'](_0x333435)[_0x382cb3(0x600)](_0x2d9e1f=>{_0x2d9e1f!=='id'&&(_0x1a8191[_0x2d9e1f]=_0x333435[_0x2d9e1f]);});let _0x47cb6=_0x1a8191[_0x382cb3(0x613)]?.[_0x382cb3(0x502)](_0x3d11f4=>_0x3d11f4['id']===this['instance'][_0x382cb3(0x7fe)]+_0x382cb3(0x1b5)&&_0x3d11f4[_0x382cb3(0x485)]!=null)||!0x1;_0x1a8191['isAdmin']=_0x47cb6;let _0x10c5c9=(!_0x1a8191[_0x382cb3(0x6e9)]||_0x47cb6)&&(!_0x1a8191[_0x382cb3(0x824)]||_0x1a8191[_0x382cb3(0x824)]&&_0x1a8191[_0x382cb3(0x20a)]&&_0x47cb6);_0x1a8191[_0x382cb3(0x687)]=_0x10c5c9;let _0x1d7ede={'group':!0x0,'groupdata':_0x1a8191};_0x333435[_0x382cb3(0x22c)]&&(_0x1d7ede[_0x382cb3(0x89c)]=_0x333435[_0x382cb3(0x22c)]),await this[_0x382cb3(0x43b)][_0x382cb3(0x5b2)]['updateOne']({'where':{'_id':_0x333435['id']}},_0x1d7ede,this[_0x382cb3(0x7f4)][_0x382cb3(0x7fe)],{'upsert':!0x0}),F(this[_0x382cb3(0x4a8)],'chats',{'chat':_0x1d7ede});}async[a0_0x2101b5(0x1df)](_0x7acc35){const _0x3f23fa=a0_0x2101b5;let _0x481bd4=await this[_0x3f23fa(0x43b)][_0x3f23fa(0x5b2)][_0x3f23fa(0x505)]({'where':{'_id':_0x7acc35['id']}},this[_0x3f23fa(0x7f4)][_0x3f23fa(0x7fe)]);if(!_0x481bd4||!_0x481bd4['groupdata']){this['logger'][_0x3f23fa(0x344)](this[_0x3f23fa(0x4a8)]+'\x20('+this[_0x3f23fa(0x7f4)][_0x3f23fa(0x7fe)]+'):\x20Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x20'+_0x7acc35['id']);return;}let _0x3031be=await this[_0x3f23fa(0x43b)]['cacheContact'][_0x3f23fa(0x6fe)](_0x7acc35['participants']),_0x25238c=[..._0x481bd4[_0x3f23fa(0x3e7)]?.[_0x3f23fa(0x613)]];switch(_0x7acc35[_0x3f23fa(0x3b3)]){case'add':_0x3031be[_0x3f23fa(0x5e6)](_0x49f0a3=>({'id':_0x49f0a3[_0x3f23fa(0x1b8)],'isAdmin':!0x1,'name':_0x49f0a3[_0x3f23fa(0x89c)],'imgUrl':_0x49f0a3[_0x3f23fa(0x860)]}))[_0x3f23fa(0x600)](_0x201e86=>{const _0x506765=_0x3f23fa;_0x25238c[_0x506765(0x502)](_0x3642b2=>_0x3642b2['id']===_0x201e86['id'])||(_0x25238c['push'](_0x201e86),this[_0x506765(0x240)]['info'](_0x506765(0x311)+JSON[_0x506765(0x41d)](_0x201e86)));});break;case'remove':_0x25238c=_0x25238c[_0x3f23fa(0x285)](_0x3ed8c5=>!_0x7acc35[_0x3f23fa(0x613)]['includes'](_0x3ed8c5['id']));break;case _0x3f23fa(0x397):_0x25238c=_0x25238c[_0x3f23fa(0x5e6)](_0x1e5a68=>_0x7acc35[_0x3f23fa(0x613)][_0x3f23fa(0x267)](_0x1e5a68['id'])?{..._0x1e5a68,'isAdmin':!0x0,'admin':_0x3f23fa(0x485)}:_0x1e5a68);break;case _0x3f23fa(0x557):_0x25238c=_0x25238c[_0x3f23fa(0x5e6)](_0x2ebcc8=>_0x7acc35[_0x3f23fa(0x613)][_0x3f23fa(0x267)](_0x2ebcc8['id'])?{..._0x2ebcc8,'isAdmin':!0x1,'admin':null}:_0x2ebcc8);break;}let _0x12500f=_0x25238c[_0x3f23fa(0x608)],_0xf5aaca=_0x25238c[_0x3f23fa(0x502)](_0x27f500=>_0x27f500['id']===this['instance'][_0x3f23fa(0x7fe)]+_0x3f23fa(0x1b5)),_0x58ee2d=_0xf5aaca&&_0x25238c[_0x3f23fa(0x502)](_0x4c4611=>_0x4c4611['id']===this[_0x3f23fa(0x7f4)][_0x3f23fa(0x7fe)]+_0x3f23fa(0x1b5)&&_0x4c4611[_0x3f23fa(0x485)]!=null)||!0x1,_0x5b746d=_0xf5aaca&&(!_0x481bd4[_0x3f23fa(0x3e7)][_0x3f23fa(0x6e9)]||_0x58ee2d)&&(!_0x481bd4['groupdata'][_0x3f23fa(0x824)]||_0x481bd4[_0x3f23fa(0x3e7)][_0x3f23fa(0x824)]&&_0x58ee2d);await this['repository'][_0x3f23fa(0x5b2)][_0x3f23fa(0x858)]({'where':{'_id':_0x7acc35['id']}},{'groupdata':{..._0x481bd4[_0x3f23fa(0x3e7)],'participants':_0x25238c,'size':_0x12500f,'isAdmin':_0x58ee2d,'canSendMessage':_0x5b746d}},this['instance'][_0x3f23fa(0x7fe)]),this[_0x3f23fa(0x240)]['info'](this[_0x3f23fa(0x4a8)]+'\x20('+this[_0x3f23fa(0x7f4)]['wuid']+_0x3f23fa(0x45f)+_0x7acc35['id']+'\x20atualizado\x20com\x20sucesso.\x20Ação:\x20'+_0x7acc35['action']+_0x3f23fa(0x859)+_0x12500f+_0x3f23fa(0x72a)+_0x58ee2d+_0x3f23fa(0x491)+_0x5b746d);}async[a0_0x2101b5(0x718)](_0x3a0c9e,_0x24b60a=!0x0){const _0x102c0e=a0_0x2101b5;try{let _0x43c9f6=await this['client'][_0x102c0e(0x6bc)](_0x3a0c9e['groupJid']),_0x410aea={'groupdata.inviteCode':'https://chat.whatsapp.com/'+_0x43c9f6};if(_0x24b60a){let _0x36c634=await this[_0x102c0e(0x43b)][_0x102c0e(0x5b2)][_0x102c0e(0x858)]({'where':{'_id':_0x3a0c9e[_0x102c0e(0x5c0)]}},_0x410aea,this[_0x102c0e(0x7f4)]['wuid']);}return{'inviteUrl':'https://chat.whatsapp.com/'+_0x43c9f6,'inviteCode':_0x43c9f6};}catch(_0x9e1c51){let _0x3852a1=_0x102c0e(0x1e4),_0x7f912d=_0x9e1c51 instanceof Error?_0x9e1c51[_0x102c0e(0x31f)]:typeof _0x9e1c51==_0x102c0e(0x69d)?JSON[_0x102c0e(0x41d)](_0x9e1c51):_0x9e1c51,_0x8bf18f=_0x3852a1+':\x20'+_0x7f912d;throw this[_0x102c0e(0x240)][_0x102c0e(0x3c9)](this['instanceName']+'\x20('+this[_0x102c0e(0x7f4)][_0x102c0e(0x7fe)]+_0x102c0e(0x33f)+_0x8bf18f),new U(_0x8bf18f);}}async[a0_0x2101b5(0x25c)](_0x1361d2){const _0x27d30d=a0_0x2101b5;try{let _0x16f694=await this[_0x27d30d(0x796)]['groupRevokeInvite'](_0x1361d2[_0x27d30d(0x5c0)]);return{'revoked':!0x0,'inviteUrl':_0x27d30d(0x801)+_0x16f694,'inviteCode':_0x16f694};}catch(_0x4d366f){let _0x2fc95f=_0x27d30d(0x63b),_0x37d7f5=_0x4d366f instanceof Error?_0x4d366f['message']:typeof _0x4d366f==_0x27d30d(0x69d)?JSON[_0x27d30d(0x41d)](_0x4d366f):_0x4d366f,_0x26ab17=_0x2fc95f+':\x20'+_0x37d7f5;throw this[_0x27d30d(0x240)][_0x27d30d(0x3c9)](this[_0x27d30d(0x4a8)]+'\x20('+this[_0x27d30d(0x7f4)][_0x27d30d(0x7fe)]+_0x27d30d(0x33f)+_0x26ab17),new U(_0x26ab17);}}async[a0_0x2101b5(0x22d)](_0x56f620){const _0x2aef2d=a0_0x2101b5;try{if((0x0,J[_0x2aef2d(0x719)])(_0x56f620['inviteCode']))var _0xe89106=_0x56f620['inviteCode']['split']('/')[0x3];else var _0xe89106=_0x56f620['inviteCode'];let _0x4b2749=await this[_0x2aef2d(0x796)][_0x2aef2d(0x8a2)](_0xe89106);return this[_0x2aef2d(0x240)][_0x2aef2d(0x667)](this['instanceName']+'\x20('+this['instance'][_0x2aef2d(0x7fe)]+_0x2aef2d(0x33f)+_0x4b2749),{'join':!0x0,'inviteCode':_0xe89106,'groupJid':_0x4b2749};}catch(_0x3f14b3){let _0x4df284='Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url',_0x1dad69=_0x3f14b3 instanceof Error?_0x3f14b3[_0x2aef2d(0x31f)]:typeof _0x3f14b3==_0x2aef2d(0x69d)?JSON[_0x2aef2d(0x41d)](_0x3f14b3):_0x3f14b3,_0x2e90d3=_0x4df284+':\x20'+_0x1dad69;throw this[_0x2aef2d(0x240)][_0x2aef2d(0x3c9)](this['instanceName']+'\x20('+this[_0x2aef2d(0x7f4)]['wuid']+'):\x20'+_0x2e90d3),new U(_0x2e90d3);}}async['findParticipants'](_0x3e83c9){const _0x49ed87=a0_0x2101b5;try{return{'participants':(await this[_0x49ed87(0x43b)][_0x49ed87(0x5b2)]['findOne']({'where':{'_id':_0x3e83c9[_0x49ed87(0x5c0)]}},this['instance'][_0x49ed87(0x7fe)]))[_0x49ed87(0x3e7)]['participants']};}catch(_0x33152d){let _0x60f9dc='Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants',_0x55c277=_0x33152d instanceof Error?_0x33152d[_0x49ed87(0x31f)]:typeof _0x33152d=='object'?JSON[_0x49ed87(0x41d)](_0x33152d):_0x33152d,_0x161f00=_0x60f9dc+':\x20'+_0x55c277;throw this[_0x49ed87(0x240)]['error'](this[_0x49ed87(0x4a8)]+'\x20('+this['instance'][_0x49ed87(0x7fe)]+'):\x20'+_0x161f00),new U(_0x161f00);}}async['leaveGroup'](_0x43633c){const _0x4ca3d9=a0_0x2101b5;try{return await this[_0x4ca3d9(0x796)][_0x4ca3d9(0x872)](_0x43633c[_0x4ca3d9(0x5c0)]),{'groupJid':_0x43633c[_0x4ca3d9(0x5c0)],'leave':!0x0};}catch(_0x5e8cc9){let _0x5d0cdd=_0x4ca3d9(0x7ac),_0x40506d=_0x5e8cc9 instanceof Error?_0x5e8cc9[_0x4ca3d9(0x31f)]:typeof _0x5e8cc9=='object'?JSON[_0x4ca3d9(0x41d)](_0x5e8cc9):_0x5e8cc9,_0x283885=_0x5d0cdd+':\x20'+_0x40506d;throw this[_0x4ca3d9(0x240)]['error'](this[_0x4ca3d9(0x4a8)]+'\x20('+this[_0x4ca3d9(0x7f4)][_0x4ca3d9(0x7fe)]+'):\x20'+_0x283885),new m(_0x283885);}}async[a0_0x2101b5(0x3ee)](_0x3e1444){const _0xd30091=a0_0x2101b5;return await this[_0xd30091(0x567)](_0x3e1444[_0xd30091(0x17a)],{'poll':{'name':_0x3e1444[_0xd30091(0x3ee)]?.[_0xd30091(0x89c)],'selectableCount':_0x3e1444[_0xd30091(0x3ee)][_0xd30091(0x2a2)],'values':_0x3e1444[_0xd30091(0x3ee)][_0xd30091(0x482)]}},_0x3e1444?.['options']);}async[a0_0x2101b5(0x42e)](_0x19973d){const _0x2d5646=a0_0x2101b5;return await this['sendMessageWithTyping'](_0x19973d[_0x2d5646(0x17a)],{'listMessage':{'title':_0x19973d['listMessage'][_0x2d5646(0x67c)],'description':_0x19973d[_0x2d5646(0x42e)]['description'],'buttonText':_0x19973d[_0x2d5646(0x42e)]?.['buttonText'],'footerText':_0x19973d[_0x2d5646(0x42e)]?.[_0x2d5646(0x741)],'sections':_0x19973d[_0x2d5646(0x42e)][_0x2d5646(0x381)],'listType':0x2}},_0x19973d?.[_0x2d5646(0x80c)]);}async[a0_0x2101b5(0x4c7)](_0xac22b8){const _0x10e79d=a0_0x2101b5;this['instance'][_0x10e79d(0x281)]===void 0x0&&await this[_0x10e79d(0x629)](),_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x1a3)]===_0x10e79d(0x4fe)&&!this['instance'][_0x10e79d(0x281)]&&(_0xac22b8[_0x10e79d(0x4c7)]['type']=_0x10e79d(0x35c));let _0x494aed;if(_0xac22b8['menuMessage'][_0x10e79d(0x1a3)]===_0x10e79d(0x35c)){let _0x17a4af=_0xac22b8[_0x10e79d(0x4c7)]['text'][_0x10e79d(0x89b)]('\x0a'),_0xba97e4='',_0x4c5e2d='';_0x17a4af!==-0x1?(_0xba97e4=_0xac22b8['menuMessage'][_0x10e79d(0x1b9)][_0x10e79d(0x883)](0x0,_0x17a4af)['trim'](),_0x4c5e2d=_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x1b9)][_0x10e79d(0x883)](_0x17a4af+0x1)):_0x4c5e2d=_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x1b9)];let _0xf338a8=_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x721)]['filter'](_0x1f0a5d=>_0x1f0a5d[_0x10e79d(0x3f2)]()!==''),_0x4259ab=this[_0x10e79d(0x6bb)](_0xf338a8);_0x494aed={'listMessage':{'title':_0xba97e4,'description':_0x4c5e2d,'buttonText':_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x7c7)]||'Selecione','footerText':_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x741)],'sections':_0x4259ab,'listType':0x2}};}else{if(_0xac22b8['menuMessage'][_0x10e79d(0x1a3)]==='poll'){let _0x36a39f=_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x721)][_0x10e79d(0x285)](_0x23c45d=>!(_0x23c45d[_0x10e79d(0x68a)]('[')&&_0x23c45d['endsWith'](']'))&&_0x23c45d[_0x10e79d(0x3f2)]()!=='')['map'](_0xa3da1e=>_0xa3da1e[_0x10e79d(0x2bd)]('\x0a')[0x0]);for(;_0x36a39f[_0x10e79d(0x608)]<0x2;)_0x36a39f['push']('Opção\x20Falsa\x20'+(_0x36a39f['length']+0x1));_0x494aed={'poll':{'name':_0xac22b8['menuMessage'][_0x10e79d(0x1b9)],'selectableCount':_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x2a2)]||0x1,'values':_0x36a39f}};}else{if(_0xac22b8['menuMessage'][_0x10e79d(0x1a3)]===_0x10e79d(0x1c3)){let _0x259ede=this[_0x10e79d(0x5b7)](_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x721)][_0x10e79d(0x285)](_0x140390=>!(_0x140390['startsWith']('[')&&_0x140390['endsWith'](']'))));return _0x494aed={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0xac22b8['menuMessage'][_0x10e79d(0x1b9)]},'footer':_0xac22b8['menuMessage'][_0x10e79d(0x741)]?{'text':_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x741)]}:void 0x0,'nativeFlowMessage':{'buttons':_0x259ede,'messageParamsJson':JSON[_0x10e79d(0x41d)]({'from':_0x10e79d(0x230),'templateId':_0x10e79d(0x649)+(0x0,ne['randomBytes'])(0x12)['toString'](_0x10e79d(0x4b4))[_0x10e79d(0x7a9)]()})}}}}},await this['sendMessageWithTypingButtons'](_0xac22b8['number'],_0x494aed,_0xac22b8?.[_0x10e79d(0x80c)]);}else{if(_0xac22b8['menuMessage'][_0x10e79d(0x1a3)]===_0x10e79d(0x4fe)){let _0x372e0c=this[_0x10e79d(0x635)](_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x721)]);return _0x494aed={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x1b9)]},'footer':_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x741)]?{'text':_0xac22b8[_0x10e79d(0x4c7)][_0x10e79d(0x741)]}:void 0x0,'nativeFlowMessage':{'buttons':_0x372e0c,'messageParamsJson':JSON['stringify']({'from':'api','templateId':'3EB0'+(0x0,ne[_0x10e79d(0x5be)])(0x12)['toString'](_0x10e79d(0x4b4))[_0x10e79d(0x7a9)]()})}}}}},await this['sendMessageWithTypingButtons'](_0xac22b8[_0x10e79d(0x17a)],_0x494aed,_0xac22b8?.[_0x10e79d(0x80c)]);}}}}return await this[_0x10e79d(0x567)](_0xac22b8[_0x10e79d(0x17a)],_0x494aed,_0xac22b8?.[_0x10e79d(0x80c)]);}[a0_0x2101b5(0x5b7)](_0x2a2851){const _0x2ffd6a=a0_0x2101b5;return _0x2a2851[_0x2ffd6a(0x5e6)](_0x3798bc=>{const _0x1e7772=_0x2ffd6a;let _0x13b55e=_0x3798bc[_0x1e7772(0x2bd)]('\x0a')[_0x1e7772(0x5e6)](_0x5d2093=>_0x5d2093[_0x1e7772(0x3f2)]()),_0x1256d1=_0x13b55e[0x0],_0x200cd2=_0x13b55e[0x1]||_0x1256d1,_0x178678=_0x200cd2[_0x1e7772(0x68a)](_0x1e7772(0x44a))?_0x1e7772(0x4a4):_0x1e7772(0x15f);return{'name':_0x178678,'buttonParamsJson':JSON[_0x1e7772(0x41d)]({'display_text':_0x1256d1,'id':_0x178678==='quick_reply'?_0x200cd2:void 0x0,'url':_0x178678===_0x1e7772(0x4a4)?_0x200cd2:void 0x0})};});}[a0_0x2101b5(0x635)](_0x739305){const _0x2bb4b9=a0_0x2101b5;let _0x5e3b52=[],_0xd80ae9={'title':'','rows':[]};return _0x739305['forEach'](_0x45dfc0=>{const _0x4060e5=a0_0xeaf6;if(_0x45dfc0[_0x4060e5(0x68a)]('[')&&_0x45dfc0[_0x4060e5(0x643)](']'))_0xd80ae9[_0x4060e5(0x89a)]['length']>0x0&&_0x5e3b52[_0x4060e5(0x2a9)](_0xd80ae9),_0xd80ae9={'title':_0x45dfc0[_0x4060e5(0x388)](0x1,-0x1),'rows':[]};else{let _0x3a235f=_0x45dfc0[_0x4060e5(0x2bd)]('\x0a')[_0x4060e5(0x5e6)](_0x4c186d=>_0x4c186d[_0x4060e5(0x3f2)]()),_0x41bbfd=_0x3a235f[0x0],_0x5c43f6=_0x3a235f[0x1]?_0x3a235f[0x1]:void 0x0,_0x5de50e=_0x3a235f[0x2]||_0x41bbfd;_0xd80ae9[_0x4060e5(0x89a)]['push']({'title':_0x41bbfd,'description':_0x5c43f6,'id':_0x5de50e});}}),_0xd80ae9[_0x2bb4b9(0x89a)][_0x2bb4b9(0x608)]>0x0&&_0x5e3b52[_0x2bb4b9(0x2a9)](_0xd80ae9),[{'name':_0x2bb4b9(0x605),'buttonParamsJson':JSON['stringify']({'title':_0x2bb4b9(0x5b9),'sections':_0x5e3b52})}];}['createSectionsFromValues'](_0x5ce8fa){const _0x1d46c4=a0_0x2101b5;let _0x1e2edf=[],_0x186bc5={'rows':[]};return _0x5ce8fa[_0x1d46c4(0x600)](_0x17ece7=>{const _0x2a4d72=_0x1d46c4;if(_0x17ece7[_0x2a4d72(0x68a)]('[')&&_0x17ece7[_0x2a4d72(0x643)](']'))_0x186bc5[_0x2a4d72(0x89a)][_0x2a4d72(0x608)]>0x0&&_0x1e2edf[_0x2a4d72(0x2a9)](_0x186bc5),_0x186bc5={'title':_0x17ece7['slice'](0x1,-0x1),'rows':[]};else{let _0x4ee35f=_0x17ece7[_0x2a4d72(0x2bd)]('\x0a')[_0x2a4d72(0x5e6)](_0x390b2f=>_0x390b2f['trim']()),_0x147952=_0x4ee35f[0x0],_0x25ff96=_0x4ee35f[0x1]||null,_0x4bd5cd=_0x4ee35f[0x2]||_0x147952;_0x186bc5[_0x2a4d72(0x89a)][_0x2a4d72(0x2a9)]({'title':_0x147952,'description':_0x25ff96,'rowId':_0x4bd5cd});}}),_0x186bc5[_0x1d46c4(0x89a)][_0x1d46c4(0x608)]>0x0&&_0x1e2edf[_0x1d46c4(0x2a9)](_0x186bc5),_0x1e2edf;}async[a0_0x2101b5(0x152)](_0x512d74,_0x1b7716){const _0x127e3d=a0_0x2101b5;if(await this[_0x127e3d(0x4ca)](_0x512d74,!0x0)){let _0x10eadb={'where':{'_id':_0x512d74['id']}},_0x83fa99={'status':[_0x1b7716[_0x127e3d(0x352)]][0x0]};try{let _0x468109=await this[_0x127e3d(0x43b)][_0x127e3d(0x31f)]['update'](_0x10eadb,_0x83fa99,this[_0x127e3d(0x7f4)]['wuid']);_0x468109&&F(this[_0x127e3d(0x4a8)],_0x127e3d(0x76e),{'message':_0x468109});}catch{}}}['sectionsToString'](_0x1a88a3){const _0x4c8848=a0_0x2101b5;let _0x566876=[];return _0x1a88a3[_0x4c8848(0x600)](_0x217338=>{const _0x15c6ce=_0x4c8848;_0x217338[_0x15c6ce(0x67c)]&&_0x566876[_0x15c6ce(0x2a9)]('['+_0x217338[_0x15c6ce(0x67c)]+']'),_0x217338['rows']['forEach'](_0x409d98=>{const _0x346201=_0x15c6ce;_0x566876['push'](_0x409d98[_0x346201(0x67c)]);});}),_0x566876[_0x4c8848(0x1b4)]('|');}['formatVCard'](_0x5cbe56){const _0x23dfec=a0_0x2101b5;let _0x5dedff=_0x5cbe56[_0x23dfec(0x869)](/\\n/g,'\x0a')[_0x23dfec(0x2bd)]('\x0a')[_0x23dfec(0x285)](_0x217ae4=>_0x217ae4[_0x23dfec(0x267)](_0x23dfec(0x25d))||_0x217ae4[_0x23dfec(0x267)](_0x23dfec(0x818))),_0x464254='';return _0x5dedff[_0x23dfec(0x600)](_0x14cf46=>{const _0x24c08d=_0x23dfec;let _0x3ce576=/TEL(?:.*):(.+)/,_0x435de6=/EMAIL(?:.*):(.+)/,_0x1bb4ac=_0x14cf46[_0x24c08d(0x66b)](_0x3ce576),_0xbe48dd=_0x14cf46['match'](_0x435de6);if(_0x1bb4ac){let _0x25beef=_0x1bb4ac[0x1][_0x24c08d(0x869)](/-| |\+|\(|\)/g,'')[_0x24c08d(0x3f2)]();_0x464254+='Telefone:\x20'+_0x25beef+'\x0a';}else{if(_0xbe48dd){let _0x3bd323=_0xbe48dd[0x1][_0x24c08d(0x3f2)]();_0x464254+=_0x24c08d(0x5ce)+_0x3bd323+'\x0a';}}}),_0x464254[_0x23dfec(0x3f2)]();}async['updateChatWithMessage'](_0x4cdf15,_0x219d7e,_0x1c1495,_0x5c16a1=null){const _0x1c5aea=a0_0x2101b5;if(_0x4cdf15['ENABLED'])try{let _0x42aafb=_0x219d7e[_0x1c5aea(0x150)]['remoteJid']['replace'](/:\d{1,2}@/g,'@'),_0x2ba17d=_0x219d7e['key'][_0x1c5aea(0x4f0)],_0x259283=_0x42aafb[_0x1c5aea(0x643)](_0x1c5aea(0x85d)),_0x50660b=_0x219d7e[_0x1c5aea(0x620)]?.[_0x1c5aea(0x869)](/:\d{1,2}@/g,'@')||'',_0x5f25fa=_0x219d7e['message_normalized']?.[_0x1c5aea(0x1b9)]||_0x219d7e['message_normalized']?.['caption']||_0x219d7e[_0x1c5aea(0x2e4)]?.['vote']||_0x219d7e['message_normalized']?.[_0x1c5aea(0x89c)]||'',_0x3fdff0={'_id':_0x219d7e[_0x1c5aea(0x1b8)],'remoteJid':_0x2ba17d?this['instance'][_0x1c5aea(0x7fe)]:_0x259283?_0x50660b:_0x42aafb,'pushName':_0x2ba17d?this[_0x1c5aea(0x7f4)][_0x1c5aea(0x611)]||'Eu':_0x219d7e[_0x1c5aea(0x3d1)],'text':_0x5f25fa,'type':_0x219d7e[_0x1c5aea(0x800)],'when':_0x219d7e[_0x1c5aea(0x646)]||Date['now']()};_0x5c16a1||(_0x5c16a1=await this[_0x1c5aea(0x43b)][_0x1c5aea(0x5b2)][_0x1c5aea(0x505)]({'where':{'_id':_0x42aafb}},this[_0x1c5aea(0x7f4)][_0x1c5aea(0x7fe)]));let _0x422b01=_0x2ba17d?0x0:_0x5c16a1?(_0x5c16a1['unreadcount']||0x0)+0x1:0x1,_0x1ac439={'lastmsg':_0x219d7e['messageTimestamp']||Date['now'](),'ephemeralExpiration':_0x219d7e['expiration'],'lastMessage':_0x3fdff0,'unreadcount':_0x422b01,..._0x2ba17d||_0x259283?{}:{'name':_0x219d7e[_0x1c5aea(0x3d1)]},..._0x259283?{'group':_0x259283}:{},...!_0x2ba17d&&!_0x259283&&_0x219d7e['profilePictureUrl']?{'imagechat':_0x219d7e[_0x1c5aea(0x728)]}:{}};if(!_0x259283&&(!_0x5c16a1?.[_0x1c5aea(0x7f1)]||!_0x5c16a1['leadInfo'][_0x1c5aea(0x2ac)])&&_0x219d7e[_0x1c5aea(0x3d1)]&&!_0x2ba17d&&(_0x1ac439={..._0x1ac439,'leadInfo.nome':_0x219d7e[_0x1c5aea(0x3d1)]}),_0x5c16a1?.[_0x1c5aea(0x7f1)][_0x1c5aea(0x4a7)]||(_0x1ac439={..._0x1ac439,'leadInfo.etiquetas':[]}),_0x5c16a1?.['leadInfo'][_0x1c5aea(0x8c1)]||(_0x1ac439={..._0x1ac439,'leadInfo.customFields':[]}),_0x5c16a1?.['leadInfo'][_0x1c5aea(0x8c7)]||(_0x1ac439={..._0x1ac439,'leadInfo.tags':[]}),_0x5c16a1&&_0x5c16a1?.[_0x1c5aea(0x4dd)]){let _0x229ee1=await this[_0x1c5aea(0x43b)]['label'][_0x1c5aea(0x604)]({'where':{}},this['instance'][_0x1c5aea(0x7fe)]),_0x33a924=new Set(_0x229ee1['map'](_0x45374e=>_0x45374e[_0x1c5aea(0x1b8)])),_0x5b8e63=(_0x5c16a1[_0x1c5aea(0x7f1)]?.['etiquetas']||[])['filter'](_0x5b6e95=>_0x33a924[_0x1c5aea(0x350)](_0x5b6e95));_0x1ac439={..._0x1ac439,'imported':!0x1,'leadInfo.etiquetas':_0x5b8e63};for(let _0x42ea15 of _0x5b8e63)await this['AddChatLabel'](_0x42ea15,_0x42aafb);}if(!this[_0x1c5aea(0x655)]['flows'][_0x1c5aea(0x604)](_0x3b38d8=>_0x3b38d8['startCommand']&&_0x5f25fa[_0x1c5aea(0x267)](_0x3b38d8[_0x1c5aea(0x23c)]))&&_0x1c1495==='MESSAGES_UPSERT'&&_0x2ba17d&&this[_0x1c5aea(0x655)]?.[_0x1c5aea(0x8b4)][_0x1c5aea(0x4d4)]&&_0x5f25fa[_0x1c5aea(0x3f2)]()!==this['AutomateSystem']?.[_0x1c5aea(0x8b4)][_0x1c5aea(0x78e)]['trim']()){let _0xd2427=(this['AutomateSystem']?.[_0x1c5aea(0x8b4)][_0x1c5aea(0x34f)]||0x0)*0xea60,_0x1438da=Date[_0x1c5aea(0x87f)]()+_0xd2427;_0x5c16a1?.['leadInfo']?.[_0x1c5aea(0x3d4)]===0x0||(_0x1ac439={..._0x1ac439,'leadInfo.desativadoFluxoAte':_0x1438da},this[_0x1c5aea(0x240)][_0x1c5aea(0x667)](this['instanceName']+'\x20('+this['instance'][_0x1c5aea(0x7fe)]+'):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20'+_0x1438da+'.'));}if(_0x5f25fa[_0x1c5aea(0x3f2)]()===this[_0x1c5aea(0x655)]?.[_0x1c5aea(0x8b4)][_0x1c5aea(0x78e)][_0x1c5aea(0x3f2)]()){this[_0x1c5aea(0x240)][_0x1c5aea(0x667)](this[_0x1c5aea(0x4a8)]+'\x20('+this[_0x1c5aea(0x7f4)][_0x1c5aea(0x7fe)]+'):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20'+_0x5f25fa);let _0x451960=Date['now']();this[_0x1c5aea(0x655)]?.[_0x1c5aea(0x8b4)][_0x1c5aea(0x2fc)]===0x0?_0x1ac439={..._0x1ac439,'leadInfo.desativadoFluxoAte':_0x451960+0x7591f6200}:_0x1ac439={..._0x1ac439,'leadInfo.desativadoFluxoAte':_0x451960+this[_0x1c5aea(0x655)]?.[_0x1c5aea(0x8b4)][_0x1c5aea(0x2fc)]*0x3c*0x3e8};}if(_0x5c16a1=await this[_0x1c5aea(0x43b)][_0x1c5aea(0x5b2)][_0x1c5aea(0x858)]({'where':{'_id':_0x42aafb}},_0x1ac439,this[_0x1c5aea(0x7f4)][_0x1c5aea(0x7fe)],{'new':!0x0,'upsert':!0x0}),_0x5c16a1)F(this['instanceName'],_0x1c5aea(0x415),{'chat':_0x5c16a1});else{this[_0x1c5aea(0x240)][_0x1c5aea(0x3c9)](this['instanceName']+'\x20('+this[_0x1c5aea(0x7f4)][_0x1c5aea(0x7fe)]+_0x1c5aea(0x3ec));return;}if(_0x2ba17d)return this[_0x1c5aea(0x240)][_0x1c5aea(0x667)](this[_0x1c5aea(0x4a8)]+'\x20('+this[_0x1c5aea(0x7f4)][_0x1c5aea(0x7fe)]+'):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...'),null;if(!this[_0x1c5aea(0x655)]?.[_0x1c5aea(0x8b4)][_0x1c5aea(0x4d4)])return this[_0x1c5aea(0x240)][_0x1c5aea(0x667)](this[_0x1c5aea(0x4a8)]+'\x20('+this['instance']['wuid']+_0x1c5aea(0x6fa)),null;if(_0x5c16a1[_0x1c5aea(0x1b8)]['includes']('@g.us')&&this[_0x1c5aea(0x655)]?.[_0x1c5aea(0x8b4)][_0x1c5aea(0x507)]===!0x0)return this[_0x1c5aea(0x240)][_0x1c5aea(0x667)](this['instanceName']+'\x20('+this[_0x1c5aea(0x7f4)][_0x1c5aea(0x7fe)]+_0x1c5aea(0x2ff)),null;if(_0x5c16a1['leadInfo']){if(_0x5c16a1[_0x1c5aea(0x7f1)][_0x1c5aea(0x3d4)]===0x0||_0x5c16a1[_0x1c5aea(0x7f1)][_0x1c5aea(0x143)])return this[_0x1c5aea(0x240)][_0x1c5aea(0x667)](this[_0x1c5aea(0x4a8)]+'\x20('+this[_0x1c5aea(0x7f4)][_0x1c5aea(0x7fe)]+_0x1c5aea(0x7a3)+_0x42aafb+_0x1c5aea(0x752)),null;if(_0x5c16a1[_0x1c5aea(0x7f1)][_0x1c5aea(0x3d4)]>Date[_0x1c5aea(0x87f)]()&&!_0x219d7e[_0x1c5aea(0x2e4)]?.[_0x1c5aea(0x32e)])return this[_0x1c5aea(0x240)]['verbose'](this[_0x1c5aea(0x4a8)]+'\x20('+this[_0x1c5aea(0x7f4)][_0x1c5aea(0x7fe)]+'):\x20Está\x20configurado\x20para\x20parar\x20até\x20'+new Date(_0x5c16a1[_0x1c5aea(0x7f1)][_0x1c5aea(0x3d4)])[_0x1c5aea(0x1d8)]()+_0x1c5aea(0x752)),null;}this[_0x1c5aea(0x240)]['verbose'](this[_0x1c5aea(0x4a8)]+'\x20('+this['instance'][_0x1c5aea(0x7fe)]+'):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações'),this[_0x1c5aea(0x2bf)](_0x219d7e,_0x1c1495);}catch(_0x5db87c){let _0x1e4ab0=_0x1c5aea(0x7b6),_0x3ca874=_0x5db87c instanceof Error?_0x5db87c[_0x1c5aea(0x31f)]:typeof _0x5db87c=='object'?JSON[_0x1c5aea(0x41d)](_0x5db87c):_0x5db87c,_0x26df88=_0x1e4ab0+':\x20'+_0x3ca874;return this[_0x1c5aea(0x240)][_0x1c5aea(0x3c9)](this[_0x1c5aea(0x4a8)]+'\x20('+this[_0x1c5aea(0x7f4)][_0x1c5aea(0x7fe)]+_0x1c5aea(0x33f)+_0x26df88),null;}}async[a0_0x2101b5(0x8cc)](_0x122788,_0x102809){const _0x353771=a0_0x2101b5;if(_0x102809[_0x353771(0x6f5)]){let _0x2cecba=_0x122788[_0x353771(0x5e6)](async _0x2670b8=>{const _0x54f01=_0x353771;try{let _0x34961e={'_id':_0x2670b8[_0x54f01(0x1b8)],'owner':_0x2670b8[_0x54f01(0x235)],'lastcache':0x0};if(Object['keys'](_0x2670b8)[_0x54f01(0x600)](_0x1d68af=>{_0x2670b8[_0x1d68af]!==null&&(_0x34961e[_0x1d68af]=_0x2670b8[_0x1d68af]);}),_0x34961e[_0x54f01(0x419)]===null&&(_0x34961e['imagechat']=_0x54f01(0x7c3)),Object[_0x54f01(0x59a)](_0x34961e)[_0x54f01(0x608)]>0x0)return await this[_0x54f01(0x43b)][_0x54f01(0x5b2)][_0x54f01(0x858)]({'where':{'_id':_0x2670b8[_0x54f01(0x1b8)]}},_0x34961e,this[_0x54f01(0x7f4)][_0x54f01(0x7fe)]);}catch(_0x575136){let _0x1dd420='Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20'+_0x2670b8[_0x54f01(0x1b8)],_0x174b05=_0x575136 instanceof Error?_0x575136[_0x54f01(0x31f)]:typeof _0x575136=='object'?JSON[_0x54f01(0x41d)](_0x575136):_0x575136,_0x5cfabf=_0x1dd420+':\x20'+_0x174b05;return this['logger'][_0x54f01(0x3c9)](this['instanceName']+'\x20('+this[_0x54f01(0x7f4)][_0x54f01(0x7fe)]+'):\x20'+_0x5cfabf),null;}}),_0x238362=(await Promise[_0x353771(0x186)](_0x2cecba))[_0x353771(0x285)](_0x1f0692=>_0x1f0692!==null)[_0x353771(0x608)];this[_0x353771(0x240)]['verbose'](this[_0x353771(0x4a8)]+'\x20('+this[_0x353771(0x7f4)]['wuid']+_0x353771(0x33f)+_0x238362+_0x353771(0x685)+this['instance'][_0x353771(0x7fe)]+'\x20inseridos\x20no\x20banco\x20de\x20dados...');}}async[a0_0x2101b5(0x3c0)](_0x2ad7c9){const _0xb18230=a0_0x2101b5;this[_0xb18230(0x240)][_0xb18230(0x667)](this[_0xb18230(0x4a8)]+'\x20('+this[_0xb18230(0x7f4)][_0xb18230(0x7fe)]+_0xb18230(0x467));let _0x2e7e97={'readMessages':[{'remoteJid':_0x2ad7c9[_0xb18230(0x754)]['lastReceivedMessage']['key'][_0xb18230(0x4e1)],'fromMe':_0x2ad7c9[_0xb18230(0x754)][_0xb18230(0x7ee)][_0xb18230(0x150)]['fromMe'],'id':_0x2ad7c9[_0xb18230(0x754)][_0xb18230(0x7ee)][_0xb18230(0x150)]['id']}]};await this[_0xb18230(0x69b)](_0x2e7e97);}async['StartBot'](_0x29fba5,_0x430b35){const _0x9043fe=a0_0x2101b5;try{let {key:_0x3783d9,message_normalized:_0x1b5723}=_0x29fba5,_0x11f284=_0x1b5723,_0x1811fb=_0x1b5723[_0x9043fe(0x1b9)]||_0x1b5723['caption']||_0x1b5723['vote']||_0x1b5723[_0x9043fe(0x89c)]||'',_0x411628=_0x3783d9[_0x9043fe(0x4e1)],_0x51e2aa=null,_0x525f17=this[_0x9043fe(0x655)][_0x9043fe(0x145)][_0x9043fe(0x604)](_0x1d4e26=>_0x1d4e26['startCommand']&&_0x1811fb[_0x9043fe(0x267)](_0x1d4e26[_0x9043fe(0x23c)]));if(_0x525f17&&_0x430b35===_0x9043fe(0x23d)){let _0x2c5860=await this[_0x9043fe(0x43b)][_0x9043fe(0x399)]['findOne']({'where':{'_id':_0x525f17[_0x9043fe(0x1b8)]}});if(this[_0x9043fe(0x240)][_0x9043fe(0x667)](this[_0x9043fe(0x4a8)]+'\x20('+this[_0x9043fe(0x7f4)][_0x9043fe(0x7fe)]+'):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.'),_0x2c5860&&_0x2c5860['whoCanUse']?.[_0x9043fe(0x267)](this[_0x9043fe(0x7f4)]['wuid']))_0x51e2aa=await this[_0x9043fe(0x81f)](_0x2c5860,_0x3783d9,_0x11f284);else return this[_0x9043fe(0x240)][_0x9043fe(0x667)](this[_0x9043fe(0x4a8)]+'\x20('+this[_0x9043fe(0x7f4)][_0x9043fe(0x7fe)]+_0x9043fe(0x616)),null;}else this[_0x9043fe(0x240)]['verbose'](this['instanceName']+'\x20('+this[_0x9043fe(0x7f4)][_0x9043fe(0x7fe)]+_0x9043fe(0x689));if(_0x51e2aa=await this[_0x9043fe(0x87b)](_0x411628,_0x11f284),_0x51e2aa){this[_0x9043fe(0x240)][_0x9043fe(0x667)](this[_0x9043fe(0x4a8)]+'\x20('+this['instance'][_0x9043fe(0x7fe)]+'):\x20Encontrou\x20conversa\x20no\x20startBot:\x20'),!_0x3783d9[_0x9043fe(0x4f0)]&&_0x51e2aa[_0x9043fe(0x82e)]&&this[_0x9043fe(0x3c0)](_0x51e2aa);let _0xb27bd9=await this[_0x9043fe(0x525)](_0x51e2aa);_0xb27bd9&&await this['processblock'](_0x51e2aa,_0xb27bd9);}}catch(_0x32fd34){this[_0x9043fe(0x240)][_0x9043fe(0x3c9)](this[_0x9043fe(0x4a8)]+'\x20('+this[_0x9043fe(0x7f4)][_0x9043fe(0x7fe)]+_0x9043fe(0x4f8)+(_0x32fd34 instanceof Error?_0x32fd34['message']:JSON[_0x9043fe(0x41d)](_0x32fd34,null,0x2)));}}[a0_0x2101b5(0x79e)](_0x1eebf6,_0x49b89c='',_0x226d77={}){const _0x5efb90=a0_0x2101b5;return typeof _0x1eebf6!=_0x5efb90(0x69d)||_0x1eebf6===null?(_0x49b89c&&(_0x226d77[_0x49b89c]=_0x1eebf6),_0x226d77):(Object[_0x5efb90(0x7bc)](_0x1eebf6)[_0x5efb90(0x600)](([_0x305906,_0x1be956])=>{const _0xc6fb68=_0x5efb90;let _0x447fd1=_0x49b89c?_0x49b89c+'.'+_0x305906:'_'+_0x305906;Array['isArray'](_0x1be956)?_0x1be956[_0xc6fb68(0x600)]((_0x1e4892,_0x33a843)=>{const _0x580703=_0xc6fb68;this[_0x580703(0x79e)](_0x1e4892,_0x447fd1+'['+_0x33a843+']',_0x226d77);}):typeof _0x1be956==_0xc6fb68(0x69d)&&_0x1be956!==null?this[_0xc6fb68(0x79e)](_0x1be956,_0x447fd1,_0x226d77):_0x226d77[_0x447fd1]=String(_0x1be956);}),_0x226d77);}[a0_0x2101b5(0x503)](_0x1deced){const _0x13ca7d=a0_0x2101b5;let _0x350247={};for(let _0x1ca21d of _0x1deced)typeof _0x1ca21d[_0x13ca7d(0x89c)]=='string'&&typeof _0x1ca21d[_0x13ca7d(0x46f)]=='string'&&(_0x350247[_0x1ca21d[_0x13ca7d(0x89c)]]=_0x1ca21d['value']);return _0x350247;}async[a0_0x2101b5(0x525)](_0x552bb9){const _0x1d6c79=a0_0x2101b5;if(!this[_0x1d6c79(0x655)]?.['flowConfig'][_0x1d6c79(0x4d4)]||_0x552bb9[_0x1d6c79(0x352)]!==_0x1d6c79(0x71e)&&_0x552bb9[_0x1d6c79(0x681)]==='')return null;let _0x29977d=_0x552bb9[_0x1d6c79(0x754)]['lastBlockId']||_0x1d6c79(0x773);typeof _0x552bb9[_0x1d6c79(0x754)][_0x1d6c79(0x57a)]>'u'&&(_0x552bb9[_0x1d6c79(0x754)][_0x1d6c79(0x57a)]=!0x0);let _0x15e1af=_0x552bb9[_0x1d6c79(0x754)]['lastCondition'];this['logger'][_0x1d6c79(0x667)](this[_0x1d6c79(0x4a8)]+'\x20('+this[_0x1d6c79(0x7f4)][_0x1d6c79(0x7fe)]+_0x1d6c79(0x364)+_0x29977d+',\x20lastCondition:\x20'+_0x15e1af);let _0x5a1df7=_0x29977d===_0x1d6c79(0x773)?_0x552bb9[_0x1d6c79(0x4a5)][_0x1d6c79(0x604)](_0x87a052=>_0x87a052[_0x1d6c79(0x1a3)]===_0x1d6c79(0x773)):_0x552bb9[_0x1d6c79(0x4a5)]['find'](_0x37b2a8=>_0x37b2a8[_0x1d6c79(0x1b8)]['toString']()===_0x29977d[_0x1d6c79(0x60f)]());if(!_0x5a1df7)return this[_0x1d6c79(0x240)][_0x1d6c79(0x3c9)](this[_0x1d6c79(0x4a8)]+'\x20('+this[_0x1d6c79(0x7f4)][_0x1d6c79(0x7fe)]+_0x1d6c79(0x6e7)+_0x29977d),null;let _0x1f0e4a={'_pushName':_0x552bb9?.[_0x1d6c79(0x754)]?.[_0x1d6c79(0x7ee)]?.[_0x1d6c79(0x3d1)]||'','_sender':this[_0x1d6c79(0x7f4)][_0x1d6c79(0x7fe)]||'',..._0x552bb9['chatLog'][_0x1d6c79(0x1de)]},_0x5d68e7=new Date();_0x1f0e4a[_0x1d6c79(0x511)]=_0x5d68e7['getDate'](),_0x1f0e4a['_month']=_0x5d68e7['getMonth']()+0x1,_0x1f0e4a['_year']=_0x5d68e7[_0x1d6c79(0x6a1)](),_0x1f0e4a[_0x1d6c79(0x5ed)]=_0x5d68e7[_0x1d6c79(0x844)](),_0x1f0e4a[_0x1d6c79(0x3cd)]=_0x5d68e7[_0x1d6c79(0x49c)](),_0x1f0e4a[_0x1d6c79(0x197)]=_0x5d68e7[_0x1d6c79(0x180)]();let _0x3972dd=null;if(_0x552bb9['waitingMenu_id']){let _0x16ad8f=_0x552bb9[_0x1d6c79(0x754)][_0x1d6c79(0x7ee)][_0x1d6c79(0x32e)],_0x589642=_0x552bb9[_0x1d6c79(0x2fa)][_0x1d6c79(0x604)](_0x47ab7c=>_0x47ab7c[_0x1d6c79(0x62d)]===_0x16ad8f);if(_0x589642){let _0x47e43f=_0x589642[_0x1d6c79(0x542)];if(_0x3972dd=_0x552bb9[_0x1d6c79(0x4a5)][_0x1d6c79(0x604)](_0x229b02=>_0x229b02[_0x1d6c79(0x29c)]===_0x47e43f&&_0x229b02['order']===0x1),_0x5a1df7[_0x1d6c79(0x6ae)][_0x1d6c79(0x6f3)]){let _0x5b8ef1={'id':_0x552bb9[_0x1d6c79(0x681)],'remoteJid':_0x552bb9[_0x1d6c79(0x4e1)],'fromMe':!0x0};await this[_0x1d6c79(0x451)](_0x5b8ef1);}if(_0x5a1df7[_0x1d6c79(0x6ae)]['pollOnReplyDelete']&&_0x5a1df7[_0x1d6c79(0x6ae)][_0x1d6c79(0x61c)]&&_0x5a1df7['uazapi']['menuType']===_0x1d6c79(0x5fd)){let _0x231ca7={'number':_0x552bb9[_0x1d6c79(0x4e1)],'options':{'delay':0x0},'textMessage':{'text':_0x1d6c79(0x498)+_0x552bb9[_0x1d6c79(0x760)]+_0x1d6c79(0x3dd)+_0x16ad8f}};await this[_0x1d6c79(0x87c)](_0x231ca7);}_0x1f0e4a[_0x1d6c79(0x1b1)]=_0x16ad8f,_0x552bb9[_0x1d6c79(0x352)]=_0x1d6c79(0x71e),_0x552bb9[_0x1d6c79(0x681)]='',_0x552bb9['waitingMenu_text']='',_0x552bb9[_0x1d6c79(0x2fa)]=[];}else{this[_0x1d6c79(0x240)][_0x1d6c79(0x667)](this[_0x1d6c79(0x4a8)]+'\x20('+this[_0x1d6c79(0x7f4)][_0x1d6c79(0x7fe)]+_0x1d6c79(0x755));let _0x5563d9={'activatedCount':_0x552bb9['chatLog'][_0x1d6c79(0x348)]['filter'](_0x51004b=>String(_0x51004b[_0x1d6c79(0x678)])===String(_0x29977d))[_0x1d6c79(0x608)],'moreLogs':[_0x1d6c79(0x328)]};if(_0x5a1df7[_0x1d6c79(0x6ae)][_0x1d6c79(0x5d4)]){let _0x38144={'number':_0x552bb9['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x5a1df7[_0x1d6c79(0x6ae)][_0x1d6c79(0x5d4)]}};await this['textMessage'](_0x38144);}if(_0x5a1df7[_0x1d6c79(0x774)]!==void 0x0&&_0x5563d9[_0x1d6c79(0x568)]>=_0x5a1df7[_0x1d6c79(0x774)]){let _0x145e74=Date[_0x1d6c79(0x87f)](),_0x2b0f71=_0x5a1df7[_0x1d6c79(0x86c)]??0xa;isNaN(_0x2b0f71)&&(_0x2b0f71=0xa);let _0x291895=_0x145e74+_0x2b0f71*0x3c*0x3e8;_0x5563d9[_0x1d6c79(0x57e)]=_0x291895,_0x5563d9[_0x1d6c79(0x7f5)][_0x1d6c79(0x2a9)](_0x1d6c79(0x336)),this[_0x1d6c79(0x458)](_0x552bb9,_0x291895),_0x552bb9[_0x1d6c79(0x681)]='',_0x552bb9[_0x1d6c79(0x760)]='',_0x552bb9['waitingMenu_replyOptions']=[];}return this[_0x1d6c79(0x4c9)](_0x552bb9,_0x5a1df7,_0x5563d9,!0x0),null;}}if(_0x15e1af&&_0x5a1df7[_0x1d6c79(0x542)]&&!_0x552bb9[_0x1d6c79(0x681)]){let _0x154d22=_0x552bb9[_0x1d6c79(0x4a5)][_0x1d6c79(0x285)](_0x2f5f09=>_0x2f5f09[_0x1d6c79(0x29c)][_0x1d6c79(0x60f)]()===_0x5a1df7[_0x1d6c79(0x542)][_0x1d6c79(0x60f)]())[_0x1d6c79(0x305)]((_0x22c734,_0x4eb1f6)=>_0x22c734[_0x1d6c79(0x664)]-_0x4eb1f6[_0x1d6c79(0x664)]);_0x154d22[_0x1d6c79(0x608)]>0x0&&(_0x3972dd=_0x154d22[0x0]);}if(!_0x3972dd){let _0x1c3c3e=_0x5a1df7[_0x1d6c79(0x29c)],_0x54cf47=_0x552bb9['blocks'][_0x1d6c79(0x285)](_0x5d7030=>_0x5d7030[_0x1d6c79(0x29c)]===_0x1c3c3e&&_0x5d7030['order']>_0x5a1df7[_0x1d6c79(0x664)])[_0x1d6c79(0x305)]((_0x3738e3,_0x5507c8)=>_0x3738e3[_0x1d6c79(0x664)]-_0x5507c8[_0x1d6c79(0x664)]);_0x54cf47['length']>0x0&&(_0x3972dd=_0x54cf47[0x0]);}if(!_0x3972dd)return _0x552bb9[_0x1d6c79(0x352)]=_0x1d6c79(0x62b),null;_0x552bb9[_0x1d6c79(0x754)][_0x1d6c79(0x1de)]=_0x1f0e4a;let _0x520066=JSON[_0x1d6c79(0x4bc)](JSON[_0x1d6c79(0x41d)](_0x3972dd));return this[_0x1d6c79(0x479)](_0x520066,_0x552bb9[_0x1d6c79(0x754)][_0x1d6c79(0x1de)]),_0x552bb9['chatLog'][_0x1d6c79(0x156)]=_0x520066[_0x1d6c79(0x1b8)],_0x552bb9[_0x1d6c79(0x754)]['lastCondition']=!0x0,_0x520066;}['replaceVariables'](_0x22bd35,_0x5536c6){const _0x60907=a0_0x2101b5;return _0x22bd35[_0x60907(0x869)](/\{\{([^}]+)\}\}/g,(_0x35069b,_0x101a40)=>_0x5536c6[_0x101a40]||'');}['replaceVariablesInObject'](_0x21e82f,_0x323cb2){const _0x45c54d=a0_0x2101b5;for(let _0x5026fc in _0x21e82f)typeof _0x21e82f[_0x5026fc]==_0x45c54d(0x30d)?_0x21e82f[_0x5026fc]=this['replaceVariables'](_0x21e82f[_0x5026fc],_0x323cb2):typeof _0x21e82f[_0x5026fc]=='object'&&this[_0x45c54d(0x479)](_0x21e82f[_0x5026fc],_0x323cb2);}async[a0_0x2101b5(0x5ad)](_0x389128,_0x21fe04){const _0x4c77be=a0_0x2101b5;let _0x31d9b2=_0x21fe04[_0x4c77be(0x1b8)];if(_0x389128['chatLog']&&_0x389128[_0x4c77be(0x754)][_0x4c77be(0x348)]){let _0x3680a0=_0x389128['chatLog'][_0x4c77be(0x348)][_0x4c77be(0x285)](_0x376750=>String(_0x376750['blockId'])===String(_0x31d9b2))[_0x4c77be(0x61e)]();if(_0x3680a0&&_0x3680a0[_0x4c77be(0x3c9)]&&_0x21fe04['stopIfLastReturnedError'])return _0x389128[_0x4c77be(0x352)]=_0x4c77be(0x62b),await this[_0x4c77be(0x5d6)](_0x389128),null;}if(_0x21fe04[_0x4c77be(0x1a3)]==='uazapi'&&_0x21fe04[_0x4c77be(0x6ae)][_0x4c77be(0x43c)]===_0x4c77be(0x208)&&_0x389128[_0x4c77be(0x681)])return _0x389128['chatLog'][_0x4c77be(0x156)]=_0x31d9b2,await this[_0x4c77be(0x5d6)](_0x389128),null;let _0x30f9f4=await this['NextBlock'](_0x389128);if(_0x389128[_0x4c77be(0x754)]&&_0x389128['chatLog'][_0x4c77be(0x348)]){let _0xe9395c=_0x389128['chatLog']['blockLogs'][_0x4c77be(0x285)](_0x47c315=>String(_0x47c315[_0x4c77be(0x678)])===String(_0x31d9b2))[_0x4c77be(0x608)];if(_0x21fe04[_0x4c77be(0x774)]!==void 0x0&&_0xe9395c>=_0x21fe04[_0x4c77be(0x774)]){let _0x5e00c3=Date[_0x4c77be(0x87f)](),_0x1fc87e=_0x21fe04[_0x4c77be(0x86c)]??0xa;isNaN(_0x1fc87e)&&(_0x1fc87e=0xa);let _0x3d7a1e=_0x5e00c3+_0x1fc87e*0x3c*0x3e8,_0x3a3b5d={'newStoppedUntil':_0x3d7a1e};return this[_0x4c77be(0x458)](_0x389128,_0x3d7a1e),this[_0x4c77be(0x4c9)](_0x389128,_0x21fe04,_0x3a3b5d,!0x0),null;}}_0x30f9f4&&_0x30f9f4[_0x4c77be(0x1a3)]!=='save'&&await this['processblock'](_0x389128,_0x30f9f4),_0x30f9f4||await this['saveConversationToDatabase'](_0x389128),_0x30f9f4&&_0x30f9f4['type']===_0x4c77be(0x3af)&&(_0x389128[_0x4c77be(0x754)]['lastBlockId']=_0x31d9b2,await this[_0x4c77be(0x5d6)](_0x389128));}async[a0_0x2101b5(0x758)](_0x5926ea,_0x1825c3){const _0x1c5b23=a0_0x2101b5;try{let _0x3d79fe=_0x1825c3[_0x1c5b23(0x1a3)];this[_0x1c5b23(0x240)][_0x1c5b23(0x667)](this[_0x1c5b23(0x4a8)]+'\x20('+this['instance'][_0x1c5b23(0x7fe)]+_0x1c5b23(0x2b0)+_0x3d79fe);let _0x2a191b={'uazapi':()=>this['processUazapi'](_0x5926ea,_0x1825c3),'save':()=>this[_0x1c5b23(0x44b)](_0x5926ea,_0x1825c3),'stop':()=>this[_0x1c5b23(0x78e)](_0x5926ea,_0x1825c3),'condition':()=>this[_0x1c5b23(0x6d0)](_0x5926ea,_0x1825c3),'varedit':()=>this['processvaredits'](_0x5926ea,_0x1825c3),'apirequest':()=>this[_0x1c5b23(0x6c1)](_0x5926ea,_0x1825c3),'goToFlow':()=>this[_0x1c5b23(0x3f4)](_0x5926ea,_0x1825c3),'scheduleFlow':()=>this[_0x1c5b23(0x3a5)](_0x5926ea,_0x1825c3),'awaitSeconds':()=>this[_0x1c5b23(0x4d9)](_0x5926ea,_0x1825c3),'clearVariables':()=>this['processclearVariables'](_0x5926ea,_0x1825c3)}[_0x3d79fe];_0x2a191b&&await _0x2a191b();}catch(_0x206e83){this['logger'][_0x1c5b23(0x3c9)](this[_0x1c5b23(0x4a8)]+'\x20('+this['instance'][_0x1c5b23(0x7fe)]+'):\x20Error\x20processing\x20the\x20block:\x20'+(_0x206e83 instanceof Error?_0x206e83['message']:JSON[_0x1c5b23(0x41d)](_0x206e83,null,0x2)));}}async[a0_0x2101b5(0x4d9)](_0x508870,_0x1b878e){const _0x2c5a76=a0_0x2101b5;if(this['logger'][_0x2c5a76(0x667)](this['instanceName']+'\x20('+this[_0x2c5a76(0x7f4)]['wuid']+_0x2c5a76(0x6e1)),!_0x508870||!_0x1b878e)return this[_0x2c5a76(0x240)][_0x2c5a76(0x3c9)](this['instanceName']+'\x20('+this[_0x2c5a76(0x7f4)][_0x2c5a76(0x7fe)]+_0x2c5a76(0x816)),null;let _0x55e479=+_0x1b878e[_0x2c5a76(0x1d3)];isNaN(_0x55e479)&&(_0x55e479=0x0),_0x55e479=Math[_0x2c5a76(0x76c)](_0x55e479,0x3c),await(0x0,w[_0x2c5a76(0x64d)])(_0x55e479*0x3e8);let _0x120ed7={'moreLogs':[_0x2c5a76(0x434)+_0x55e479+'\x20segundos']};return await this[_0x2c5a76(0x4c9)](_0x508870,_0x1b878e,_0x120ed7),_0x55e479;}async[a0_0x2101b5(0x564)](_0xdbefe6,_0x56a4ed){const _0x2fe9c0=a0_0x2101b5;if(this['logger'][_0x2fe9c0(0x667)](this[_0x2fe9c0(0x4a8)]+'\x20('+this[_0x2fe9c0(0x7f4)][_0x2fe9c0(0x7fe)]+_0x2fe9c0(0x8cb)),!_0xdbefe6||!_0x56a4ed)return this[_0x2fe9c0(0x240)][_0x2fe9c0(0x3c9)](this[_0x2fe9c0(0x4a8)]+'\x20('+this[_0x2fe9c0(0x7f4)]['wuid']+_0x2fe9c0(0x816)),null;let _0x4b56c3=[];if(_0x56a4ed[_0x2fe9c0(0x2d1)]['trim']()===_0x2fe9c0(0x7f9)){let _0x27285f=[_0x2fe9c0(0x3ff),_0x2fe9c0(0x851),_0x2fe9c0(0x712),_0x2fe9c0(0x1cd),_0x2fe9c0(0x4a0),_0x2fe9c0(0x1b8),'_fromMe'];_0x4b56c3=Object[_0x2fe9c0(0x59a)](_0xdbefe6[_0x2fe9c0(0x754)]['realVariables'])['filter'](_0x1b89b0=>_0x1b89b0[_0x2fe9c0(0x68a)]('_')&&!_0x27285f[_0x2fe9c0(0x267)](_0x1b89b0));}else _0x4b56c3=_0x56a4ed[_0x2fe9c0(0x2d1)]['split']('|')['map'](_0x46f80d=>(_0x46f80d=_0x46f80d[_0x2fe9c0(0x869)](/[{}]/g,'')[_0x2fe9c0(0x3f2)](),_0x46f80d[_0x2fe9c0(0x68a)]('_')?_0x46f80d:'_'+_0x46f80d));let _0x54d5eb=[];_0x4b56c3[_0x2fe9c0(0x600)](_0x3c084c=>{const _0x1dac3c=_0x2fe9c0;_0x3c084c in _0xdbefe6['chatLog']['realVariables']&&(delete _0xdbefe6[_0x1dac3c(0x754)][_0x1dac3c(0x1de)][_0x3c084c],_0x54d5eb[_0x1dac3c(0x2a9)](_0x3c084c));}),_0x54d5eb[_0x2fe9c0(0x608)]>0x0?this['logger'][_0x2fe9c0(0x667)](this[_0x2fe9c0(0x4a8)]+'\x20('+this['instance'][_0x2fe9c0(0x7fe)]+_0x2fe9c0(0x65b)+_0x54d5eb[_0x2fe9c0(0x1b4)](',\x20')):this[_0x2fe9c0(0x240)][_0x2fe9c0(0x667)](this['instanceName']+'\x20('+this['instance'][_0x2fe9c0(0x7fe)]+_0x2fe9c0(0x885));let _0x41d9a8={'moreLogs':[_0x2fe9c0(0x806)+_0x54d5eb[_0x2fe9c0(0x1b4)](',\x20')]};return await this[_0x2fe9c0(0x4c9)](_0xdbefe6,_0x56a4ed,_0x41d9a8),null;}async[a0_0x2101b5(0x3a5)](_0x654ef,_0x113954){const _0x4dacea=a0_0x2101b5;if(this[_0x4dacea(0x240)][_0x4dacea(0x667)](this[_0x4dacea(0x4a8)]+'\x20('+this[_0x4dacea(0x7f4)][_0x4dacea(0x7fe)]+_0x4dacea(0x70c)),!_0x654ef||!_0x113954)return this[_0x4dacea(0x240)][_0x4dacea(0x3c9)](this[_0x4dacea(0x4a8)]+'\x20('+this[_0x4dacea(0x7f4)][_0x4dacea(0x7fe)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x4f45de=_0x654ef[_0x4dacea(0x4e1)];_0x113954[_0x4dacea(0x691)][_0x4dacea(0x4e1)]&&_0x113954[_0x4dacea(0x691)][_0x4dacea(0x4e1)][_0x4dacea(0x3f2)]()!==''&&(_0x4f45de=_0x113954[_0x4dacea(0x6ae)][_0x4dacea(0x4e1)][_0x4dacea(0x3f2)]());let _0x35521e=_0x113954[_0x4dacea(0x691)][_0x4dacea(0x8a9)]*0xea60,_0x14d7f6=Date['now']()+_0x35521e,_0x14b2be={'status':_0x4dacea(0x518),'info':'Fluxo\x20agendado\x20pelo\x20fluxo\x20'+_0x654ef[_0x4dacea(0x89c)],'remoteJids':[_0x4f45de],'when':_0x14d7f6,'delaySecMin':0x0,'delaySecMax':0x0,'type':'flow','flowName':_0x113954[_0x4dacea(0x691)][_0x4dacea(0x7a7)]};this['editScheduleMessage'](_0x14b2be);let _0x30fb47=await this['NextBlock'](_0x654ef);_0x30fb47&&await this[_0x4dacea(0x758)](_0x654ef,_0x30fb47);}async[a0_0x2101b5(0x3f4)](_0x39f365,_0xc0e734){const _0x297676=a0_0x2101b5;if(this[_0x297676(0x240)]['verbose'](this[_0x297676(0x4a8)]+'\x20('+this[_0x297676(0x7f4)]['wuid']+_0x297676(0x210)),!_0x39f365||!_0xc0e734)return this[_0x297676(0x240)]['error'](this[_0x297676(0x4a8)]+'\x20('+this['instance'][_0x297676(0x7fe)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;await this[_0x297676(0x4c9)](_0x39f365,_0xc0e734,{},!0x0,!0x0);let _0x1d28e9=_0xc0e734[_0x297676(0x2b7)];_0x39f365=await this['createConversationforgoToFlow'](_0x1d28e9,_0x39f365['remoteJid'],_0x39f365['chatLog'][_0x297676(0x1de)]);let _0x2f8b2e=await this[_0x297676(0x525)](_0x39f365);_0x2f8b2e&&await this[_0x297676(0x758)](_0x39f365,_0x2f8b2e);}async[a0_0x2101b5(0x2ee)](_0x51cb75,_0x58e549,_0x310f22){const _0x524b18=a0_0x2101b5;this['logger'][_0x524b18(0x667)](this[_0x524b18(0x4a8)]+'\x20('+this[_0x524b18(0x7f4)][_0x524b18(0x7fe)]+_0x524b18(0x2b6));try{let _0x4f07c8=this[_0x524b18(0x655)][_0x524b18(0x145)][_0x524b18(0x604)](_0x1b9cdf=>_0x1b9cdf[_0x524b18(0x1b8)]===_0x51cb75);_0x4f07c8||this[_0x524b18(0x240)][_0x524b18(0x3c9)](this[_0x524b18(0x4a8)]+'\x20('+this[_0x524b18(0x7f4)][_0x524b18(0x7fe)]+_0x524b18(0x486)+_0x51cb75+_0x524b18(0x68e));let _0x1461db=await this[_0x524b18(0x43b)][_0x524b18(0x399)][_0x524b18(0x505)]({'where':{'_id':_0x4f07c8[_0x524b18(0x1b8)]}});if(!_0x1461db||!_0x1461db[_0x524b18(0x4f1)]?.[_0x524b18(0x267)](this[_0x524b18(0x7f4)][_0x524b18(0x7fe)]))throw this['logger']['error'](this[_0x524b18(0x4a8)]+'\x20('+this[_0x524b18(0x7f4)][_0x524b18(0x7fe)]+_0x524b18(0x486)+_0x51cb75+_0x524b18(0x242)),new m(_0x524b18(0x353)+_0x51cb75+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x358dd4=require(_0x524b18(0x768))[_0x524b18(0x3db)],_0x33b4c1=Date[_0x524b18(0x87f)](),_0x3c806f=_0x524b18(0x773),_0x4defe9={},_0x46d1be={},_0x3162a9=this[_0x524b18(0x655)][_0x524b18(0x145)][_0x524b18(0x604)](_0x490bcf=>_0x490bcf[_0x524b18(0x1b8)]===_0x1461db[_0x524b18(0x1b8)]?.['toString']()),_0x4c4f98=_0x3162a9?.['minutesToClose']??_0x1461db[_0x524b18(0x23e)]??0x0,_0x13d42e=_0x3162a9?.[_0x524b18(0x82e)]??_0x1461db[_0x524b18(0x82e)]??!0x1,_0x4c1797={'flowId':_0x4f07c8[_0x524b18(0x1b8)],'readMessages':_0x4f07c8[_0x524b18(0x82e)],..._0x1461db,'chatLog':null},_0x44e615={'lastReceivedMessage':_0x4defe9,'lastSendMessage':_0x46d1be,'lastBlockId':_0x3c806f,'lastCondition':!0x0,'realVariables':_0x310f22};_0x4c1797['chatLog']=_0x44e615,_0x4c1797[_0x524b18(0x754)][_0x524b18(0x1de)]={..._0x310f22},delete _0x4c1797[_0x524b18(0x1b8)],_0x4c1797[_0x524b18(0x1b8)]=new _0x358dd4(),_0x4c1797[_0x524b18(0x537)]=_0x33b4c1,_0x4c1797[_0x524b18(0x352)]=_0x524b18(0x71e),_0x4c1797[_0x524b18(0x4e1)]=_0x58e549,_0x4c1797[_0x524b18(0x23e)]=_0x4c4f98,_0x4c1797[_0x524b18(0x82e)]=_0x13d42e;let _0x38c0bf=await this[_0x524b18(0x43b)][_0x524b18(0x4bd)][_0x524b18(0x858)](_0x4c1797[_0x524b18(0x1b8)],_0x4c1797,this[_0x524b18(0x7f4)][_0x524b18(0x7fe)]);return this['logger'][_0x524b18(0x667)](this[_0x524b18(0x4a8)]+'\x20('+this[_0x524b18(0x7f4)]['wuid']+_0x524b18(0x38e)),_0x38c0bf?_0x4c1797:null;}catch(_0x5cc05c){let _0x28b540=_0x524b18(0x550),_0x28dec5=_0x5cc05c instanceof Error?_0x5cc05c[_0x524b18(0x31f)]:typeof _0x5cc05c=='object'?JSON['stringify'](_0x5cc05c):_0x5cc05c,_0x20c6b5=_0x28b540+':\x20'+_0x28dec5;throw this[_0x524b18(0x240)][_0x524b18(0x3c9)](this[_0x524b18(0x4a8)]+'\x20('+this[_0x524b18(0x7f4)][_0x524b18(0x7fe)]+'):\x20'+_0x20c6b5),new m(_0x20c6b5);}}async[a0_0x2101b5(0x6c1)](_0x492461,_0x407bdc){const _0x2f0060=a0_0x2101b5;let _0xa88136,_0x5f422e;try{let _0x57bf49=_0x407bdc[_0x2f0060(0x2f1)];if(!_0x57bf49||!_0x57bf49[_0x2f0060(0x52a)]||!_0x57bf49[_0x2f0060(0x64f)])throw new Error(_0x2f0060(0x771));let _0x4996c8;([_0x2f0060(0x5a0),_0x2f0060(0x815),_0x2f0060(0x3cc)][_0x2f0060(0x502)](_0x5f32be=>_0x57bf49[_0x2f0060(0x52a)]['includes'](_0x5f32be))||_0x57bf49[_0x2f0060(0x775)])&&(_0x4996c8=_0x2f0060(0x342));let _0x464fe8='\u205f',_0x4ec8a5;try{_0x4ec8a5=JSON[_0x2f0060(0x4bc)](_0x57bf49[_0x2f0060(0x1fd)][_0x2f0060(0x869)](new RegExp(_0x464fe8,'g'),''));}catch(_0x1739cd){throw _0x1739cd;}let _0x4cd658={'method':_0x57bf49[_0x2f0060(0x64f)],'url':_0x57bf49[_0x2f0060(0x52a)],'headers':_0x57bf49[_0x2f0060(0x51b)]||{},..._0x57bf49[_0x2f0060(0x64f)]['toUpperCase']()!=='GET'&&_0x57bf49[_0x2f0060(0x1fd)]?{'data':JSON['parse'](_0x57bf49[_0x2f0060(0x1fd)][_0x2f0060(0x869)](new RegExp(_0x464fe8,'g'),''))}:{},..._0x4996c8&&{'responseType':_0x4996c8}},_0x56c60d=await(0x0,Q[_0x2f0060(0x7ae)])(_0x4cd658),_0x3e1d8a=_0x56c60d[_0x2f0060(0x35e)][_0x2f0060(0x609)];if(_0x3e1d8a&&_0x3e1d8a[_0x2f0060(0x267)](_0x2f0060(0x16f))||typeof _0x56c60d[_0x2f0060(0x1a0)]==_0x2f0060(0x30d)){if(typeof _0x56c60d[_0x2f0060(0x1a0)]==_0x2f0060(0x30d)){let _0x2fe51d=_0x56c60d[_0x2f0060(0x1a0)][_0x2f0060(0x869)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x2f0060(0x3f2)]();try{_0xa88136=JSON[_0x2f0060(0x4bc)](_0x2fe51d);}catch(_0x4c16db){this[_0x2f0060(0x240)][_0x2f0060(0x3c9)](_0x2f0060(0x7a8)+_0x4c16db[_0x2f0060(0x31f)]),_0xa88136={'_apiResponse':_0x56c60d['data']};}}else _0xa88136=_0x56c60d[_0x2f0060(0x1a0)];let _0x406feb=_0x492461['chatLog'][_0x2f0060(0x1de)],_0x59e32c=this[_0x2f0060(0x79e)](_0xa88136);return Object[_0x2f0060(0x6b1)](_0x406feb,_0x59e32c),_0x492461[_0x2f0060(0x754)][_0x2f0060(0x1de)]=_0x406feb,_0x5f422e={'error':!0x1,'apiResponse':_0xa88136},this[_0x2f0060(0x4c9)](_0x492461,_0x407bdc,_0x5f422e),_0xa88136;}if(_0x3e1d8a&&(_0x3e1d8a[_0x2f0060(0x267)](_0x2f0060(0x730))||_0x3e1d8a[_0x2f0060(0x267)](_0x2f0060(0x2c4))||_0x3e1d8a['includes'](_0x2f0060(0x6d8))||_0x3e1d8a[_0x2f0060(0x267)](_0x2f0060(0x492)))){this['logger'][_0x2f0060(0x667)](this[_0x2f0060(0x4a8)]+'\x20('+this[_0x2f0060(0x7f4)]['wuid']+_0x2f0060(0x554)+_0x3e1d8a);let _0x1ab19d=(0x0,Y['v4'])(),_0x5ab583='',_0x4157b2={'image/jpeg':_0x2f0060(0x6df),'image/png':_0x2f0060(0x6b5),'image/gif':'.gif','image/webp':'.webp','image/svg+xml':_0x2f0060(0x54e),'audio/mpeg':_0x2f0060(0x5a5),'audio/ogg':_0x2f0060(0x3d0),'audio/wav':_0x2f0060(0x5a9),'video/mp4':_0x2f0060(0x7cd),'video/webm':_0x2f0060(0x223),'video/ogg':_0x2f0060(0x3d6),'text/plain':'.txt','application/pdf':'.pdf','application/msword':'.doc','application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x2f0060(0x1c5),'application/vnd.ms-excel':_0x2f0060(0x783),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x2f0060(0x1db),'application/vnd.ms-powerpoint':_0x2f0060(0x314),'application/vnd.openxmlformats-officedocument.presentationml.presentation':'.pptx'};_0x4157b2[_0x3e1d8a]?(_0x5ab583=_0x4157b2[_0x3e1d8a],this['logger']['verbose'](this[_0x2f0060(0x4a8)]+'\x20('+this['instance'][_0x2f0060(0x7fe)]+'):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20'+_0x5ab583)):(_0x5ab583=_0x2f0060(0x27c),this[_0x2f0060(0x240)][_0x2f0060(0x667)](this[_0x2f0060(0x4a8)]+'\x20('+this[_0x2f0060(0x7f4)][_0x2f0060(0x7fe)]+_0x2f0060(0x579)+_0x5ab583)),_0x1ab19d+=_0x5ab583,this[_0x2f0060(0x240)][_0x2f0060(0x667)](this['instanceName']+'\x20('+this[_0x2f0060(0x7f4)][_0x2f0060(0x7fe)]+'):\x20Nome\x20do\x20arquivo\x20gerado:\x20'+_0x1ab19d);let _0x2d84d8=this['configService']['get']('SERVER')[_0x2f0060(0x349)];if(!_0x2d84d8){let _0x15ba78=this[_0x2f0060(0x596)][_0x2f0060(0x34a)](_0x2f0060(0x4f5));_0x2d84d8=_0x2f0060(0x464)+(_0x15ba78&&_0x15ba78['FULLCHAIN'][_0x2f0060(0x2bd)]('/')[0x4]);}let _0x556633=Buffer[_0x2f0060(0x50f)](_0x56c60d[_0x2f0060(0x1a0)]);await this[_0x2f0060(0x243)](_0x556633,_0x1ab19d);let _0x35b1b8=_0x2f0060(0x595)+_0x1ab19d;_0x35b1b8=''+_0x2d84d8+_0x35b1b8,_0xa88136={'fileUrl':_0x35b1b8},_0x492461[_0x2f0060(0x754)][_0x2f0060(0x1de)][_0x2f0060(0x251)]=_0x35b1b8;let _0xac8636=_0x492461[_0x2f0060(0x754)][_0x2f0060(0x1de)],_0x5ba8ed=this[_0x2f0060(0x79e)](_0xa88136);return Object['assign'](_0xac8636,_0x5ba8ed),_0x492461[_0x2f0060(0x754)][_0x2f0060(0x1de)]=_0xac8636,_0x5f422e={'error':!0x1,'apiResponse':{'fileUrl':_0x35b1b8}},this['updateConversation'](_0x492461,_0x407bdc,_0x5f422e),_0xa88136;}}catch(_0x59f50d){this[_0x2f0060(0x240)][_0x2f0060(0x3c9)]('Erro\x20ao\x20processar\x20a\x20chamada\x20API:'+_0x59f50d['message']),_0x59f50d['response']&&(_0xa88136=_0x59f50d['response'][_0x2f0060(0x1a0)]);let _0x47863c=_0x492461['chatLog']['realVariables'],_0x2a093b=this[_0x2f0060(0x79e)](_0xa88136);return Object[_0x2f0060(0x6b1)](_0x47863c,_0x2a093b),_0x492461['chatLog'][_0x2f0060(0x1de)]=_0x47863c,_0x5f422e={'error':!0x0,'errorLog':_0x59f50d[_0x2f0060(0x60f)](),'apiResponse':_0xa88136},this[_0x2f0060(0x4c9)](_0x492461,_0x407bdc,_0x5f422e),{'success':!0x1};}}[a0_0x2101b5(0x226)](_0x3e4693,_0x52c173){const _0x55d752=a0_0x2101b5;let _0x9a930c=_0x397717=>{const _0x185e3c=a0_0xeaf6;let _0x3c9916=_0x397717[_0x185e3c(0x869)](/[^0-9.,-]/g,'')['replace'](',','.'),_0x3ab37f=parseFloat(_0x3c9916);return isNaN(_0x3ab37f)?null:_0x3ab37f;},_0x41ad85=_0x52c173[_0x55d752(0x494)],_0x3e5238=_0x52c173[_0x55d752(0x686)];typeof _0x41ad85==_0x55d752(0x30d)&&(_0x41ad85=this[_0x55d752(0x6ed)](_0x41ad85,_0x3e4693['chatLog'][_0x55d752(0x1de)])??''),typeof _0x3e5238=='string'&&(_0x3e5238=this[_0x55d752(0x6ed)](_0x3e5238,_0x3e4693['chatLog'][_0x55d752(0x1de)])??'');let _0x462b2b=null;if(!_0x52c173[_0x55d752(0x225)])return null;switch(this['logger'][_0x55d752(0x667)](this[_0x55d752(0x4a8)]+'\x20('+this[_0x55d752(0x7f4)][_0x55d752(0x7fe)]+'):\x20newFirstValue\x20após\x20replaceVariables:'+_0x41ad85),this[_0x55d752(0x240)]['verbose'](this[_0x55d752(0x4a8)]+'\x20('+this['instance'][_0x55d752(0x7fe)]+'):\x20newSecondValue\x20após\x20replaceVariables:'+_0x3e5238),_0x52c173[_0x55d752(0x225)]){case'+':case'-':case'*':case'/':let _0x5e1158=_0x9a930c(_0x41ad85||'0'),_0x5bac78=_0x9a930c(_0x3e5238||'0');if(_0x5e1158===null)return null;switch(_0x52c173[_0x55d752(0x225)]){case'+':_0x462b2b=_0x5e1158+(_0x5bac78??0x0);break;case'-':_0x462b2b=_0x5e1158-(_0x5bac78??0x0);break;case'*':_0x462b2b=_0x5e1158*(_0x5bac78??0x1);break;case'/':_0x5bac78!==0x0&&(_0x462b2b=_0x5e1158/(_0x5bac78??0x1));break;}break;case _0x55d752(0x703):case'findAndReplaceRegex':let _0x1edbea=_0x3e5238,_0x210455=_0x52c173[_0x55d752(0x216)];if(typeof _0x210455=='string'&&(_0x210455=this[_0x55d752(0x6ed)](_0x210455,_0x3e4693[_0x55d752(0x754)][_0x55d752(0x1de)])??''),_0x1edbea&&_0x210455!==void 0x0){let _0x1e7b66=_0x52c173['editOperator']===_0x55d752(0x703)?new RegExp(_0x1edbea[_0x55d752(0x869)](/[-\/\\^$*+?.()|[\]{}]/g,_0x55d752(0x28d)),'g'):new RegExp(_0x1edbea,'g');_0x462b2b=_0x41ad85[_0x55d752(0x869)](_0x1e7b66,_0x210455);}else console['warn']('Valor\x20de\x20find\x20ou\x20replace\x20ausente');break;case'setNewValue':_0x462b2b=_0x3e5238;break;case _0x55d752(0x546):let _0x882abe=_0x41ad85[_0x55d752(0x66b)](new RegExp(_0x3e5238||''));_0x462b2b=_0x882abe?_0x882abe[0x0]:'';break;case _0x55d752(0x1f2):_0x462b2b=_0x41ad85['slice'](0x0,parseInt(_0x3e5238||'0'));break;case _0x55d752(0x733):let _0x277b0e=parseInt(_0x3e5238||'0');_0x462b2b=_0x41ad85['slice'](_0x41ad85[_0x55d752(0x608)]-_0x277b0e);break;case _0x55d752(0x74c):let _0x373a9e=_0x9a930c(_0x41ad85),_0x1d62f5=parseInt(_0x3e5238||'0');_0x1d62f5=Math['abs'](_0x1d62f5),_0x373a9e!==null?_0x462b2b=_0x373a9e[_0x55d752(0x1d8)](_0x55d752(0x14b),{'minimumFractionDigits':_0x1d62f5,'maximumFractionDigits':_0x1d62f5}):(console['warn'](_0x55d752(0x5f6)+_0x41ad85),_0x462b2b=null);break;case _0x55d752(0x583):let _0x374b7b=_0x9a930c(_0x41ad85);_0x374b7b!==null?_0x462b2b=_0x374b7b[_0x55d752(0x1d8)](_0x55d752(0x14b),{'style':_0x55d752(0x7e7),'currency':'BRL'}):(console['warn'](_0x55d752(0x791)+_0x41ad85),_0x462b2b=null);break;case _0x55d752(0x5c8):_0x462b2b=_0x41ad85[_0x55d752(0x7a9)]();break;case _0x55d752(0x808):_0x462b2b=_0x41ad85['toLowerCase']();break;case _0x55d752(0x1cf):_0x462b2b=_0x41ad85[_0x55d752(0x2bd)]('\x20')[_0x55d752(0x5e6)](_0x401bae=>_0x401bae[_0x55d752(0x606)](0x0)[_0x55d752(0x7a9)]()+_0x401bae[_0x55d752(0x388)](0x1)[_0x55d752(0x86b)]())[_0x55d752(0x1b4)]('\x20');break;case _0x55d752(0x5a2):_0x462b2b=JSON['stringify'](_0x41ad85);break;case _0x55d752(0x788):_0x462b2b=_0x41ad85[_0x55d752(0x3f2)]();break;default:_0x462b2b=_0x41ad85;}return _0x462b2b!==null?_0x462b2b['toString']():null;}async[a0_0x2101b5(0x7e1)](_0x1cf1f1,_0x1816ac){const _0x4b7f25=a0_0x2101b5;try{let _0x36222f=_0x1cf1f1[_0x4b7f25(0x4e7)]?.[_0x4b7f25(0x285)](_0x9579a=>_0x9579a[_0x4b7f25(0x678)]===_0x1816ac[_0x4b7f25(0x1b8)]?.['toString']())||[],_0x195583=_0x1816ac[_0x4b7f25(0x750)],_0x35d69d=null,_0x3f215d=[],_0x4829e3=_0x1cf1f1[_0x4b7f25(0x754)][_0x4b7f25(0x1de)][_0x195583];_0x3f215d['push'](_0x4b7f25(0x522)+_0x4829e3+'\x22');for(let _0x417167 of _0x36222f){_0x417167['firstValue']=_0x4829e3,_0x35d69d=_0x417167[_0x4b7f25(0x494)];let _0x32fea0;try{_0x32fea0=this[_0x4b7f25(0x226)](_0x1cf1f1,_0x417167);}catch(_0x1041fb){this[_0x4b7f25(0x240)][_0x4b7f25(0x3c9)](_0x4b7f25(0x16c)+_0x1041fb[_0x4b7f25(0x31f)]);continue;}if(_0x32fea0!==null){let _0x3f5894='Operador:\x20\x22'+_0x417167[_0x4b7f25(0x225)]+'\x22',_0x19ad1f=[_0x4b7f25(0x583),_0x4b7f25(0x5c8),_0x4b7f25(0x808),_0x4b7f25(0x1cf),_0x4b7f25(0x788)];_0x417167[_0x4b7f25(0x225)]===_0x4b7f25(0x703)||_0x417167[_0x4b7f25(0x225)]===_0x4b7f25(0x5b6)?_0x3f5894+=_0x4b7f25(0x32a)+_0x417167[_0x4b7f25(0x686)]+_0x4b7f25(0x3f5)+_0x417167[_0x4b7f25(0x216)]+'\x22':!_0x19ad1f[_0x4b7f25(0x267)](_0x417167[_0x4b7f25(0x225)])&&_0x417167[_0x4b7f25(0x686)]!==null&&_0x417167[_0x4b7f25(0x686)]!==void 0x0&&(_0x3f5894+=_0x4b7f25(0x7e8)+_0x417167[_0x4b7f25(0x686)]+'\x22'),_0x3f5894+=_0x4b7f25(0x1c0)+_0x32fea0+'.',_0x3f215d[_0x4b7f25(0x2a9)](_0x3f5894);}_0x32fea0!==null&&(_0x4829e3=_0x32fea0);}if(_0x1cf1f1[_0x4b7f25(0x754)][_0x4b7f25(0x1de)]&&_0x1816ac[_0x4b7f25(0x750)]){_0x1cf1f1['chatLog'][_0x4b7f25(0x1de)][_0x1816ac[_0x4b7f25(0x750)]]=_0x4829e3;let _0x27489e={'variable':_0x1816ac['saveVariable'],'oldValue':_0x35d69d,'newValue':_0x4829e3,'moreLogs':_0x3f215d};try{this[_0x4b7f25(0x4c9)](_0x1cf1f1,_0x1816ac,_0x27489e);}catch(_0x59427f){this[_0x4b7f25(0x240)][_0x4b7f25(0x3c9)]('Erro\x20ao\x20atualizar\x20conversa:\x20'+_0x59427f[_0x4b7f25(0x31f)]);}}return _0x195583;}catch(_0x31c52c){return this[_0x4b7f25(0x240)][_0x4b7f25(0x3c9)](_0x4b7f25(0x7aa)+_0x31c52c['message']),null;}}async[a0_0x2101b5(0x6d0)](_0x253316,_0x3f557f){const _0x26067f=a0_0x2101b5;try{let _0x28d3f1=[],_0x124c6f=_0x253316[_0x26067f(0x3b7)]['filter'](_0x9cd4f5=>_0x9cd4f5['blockId']===_0x3f557f['_id'][_0x26067f(0x60f)]()),_0x2cc785=null,_0x3f6ebb=!0x1;for(let _0x4bc6f1 of _0x124c6f){let _0x38fe52=this[_0x26067f(0x40f)](_0x253316,_0x4bc6f1);_0x28d3f1[_0x26067f(0x2a9)](_0x26067f(0x577)+_0x4bc6f1['firstValue']+_0x26067f(0x561)+_0x4bc6f1[_0x26067f(0x83a)]+',\x20Segundo\x20Valor:\x20'+_0x4bc6f1[_0x26067f(0x686)]+_0x26067f(0x6b2)+_0x38fe52),_0x2cc785===null?_0x2cc785=_0x38fe52:_0x4bc6f1[_0x26067f(0x6b8)]==='and'?(_0x2cc785=_0x2cc785&&_0x38fe52,_0x38fe52||(_0x3f6ebb=!0x0)):_0x4bc6f1[_0x26067f(0x6b8)]==='or'&&(_0x3f6ebb||(_0x2cc785=_0x2cc785||_0x38fe52));}_0x2cc785===null&&(_0x2cc785=!0x0);let _0x263e24={'moreLogs':_0x28d3f1};_0x253316['chatLog'][_0x26067f(0x57a)]=_0x2cc785,await this[_0x26067f(0x4c9)](_0x253316,_0x3f557f,_0x263e24);}catch(_0x583858){this[_0x26067f(0x240)][_0x26067f(0x3c9)](this[_0x26067f(0x4a8)]+'\x20('+this[_0x26067f(0x7f4)][_0x26067f(0x7fe)]+_0x26067f(0x1ab)+(_0x583858 instanceof Error?_0x583858['message']:JSON[_0x26067f(0x41d)](_0x583858,null,0x2)));}}[a0_0x2101b5(0x40f)](_0x1a2025,_0x406461){const _0x41d442=a0_0x2101b5;let _0x555881=_0x406461['firstValue'],_0x151e84=_0x406461[_0x41d442(0x686)];typeof _0x555881==_0x41d442(0x30d)&&(_0x555881=this[_0x41d442(0x6ed)](_0x555881,_0x1a2025[_0x41d442(0x754)][_0x41d442(0x1de)])??''),typeof _0x151e84==_0x41d442(0x30d)&&(_0x151e84=this[_0x41d442(0x6ed)](_0x151e84,_0x1a2025[_0x41d442(0x754)][_0x41d442(0x1de)])??'');try{switch(_0x406461[_0x41d442(0x83a)]){case _0x41d442(0x3f3):return _0x555881===_0x151e84;case _0x41d442(0x164):return _0x555881!==_0x151e84;case _0x41d442(0x4a6):return this[_0x41d442(0x4a6)](_0x555881,_0x151e84);case'notContains':return!this[_0x41d442(0x4a6)](_0x555881,_0x151e84);case _0x41d442(0x55c):return parseFloat(_0x555881)>parseFloat(_0x151e84);case _0x41d442(0x3f1):return parseFloat(_0x555881)<parseFloat(_0x151e84);case'notEmpty':return _0x555881!=='';case _0x41d442(0x675):return _0x555881==='';case _0x41d442(0x15e):return new RegExp(_0x151e84)[_0x41d442(0x6c3)](_0x555881);case _0x41d442(0x1b3):return!new RegExp(_0x151e84)['test'](_0x555881);default:return!0x1;}}catch(_0x1b9484){return this[_0x41d442(0x240)][_0x41d442(0x3c9)]('Erro\x20ao\x20avaliar\x20a\x20condição:\x20'+_0x1b9484),!0x1;}}['contains'](_0x685113,_0x49614a){const _0x1f84a7=a0_0x2101b5;if(_0x685113===_0x49614a&&/^\d+$/['test'](_0x685113))return!0x0;if(this[_0x1f84a7(0x476)](_0x685113)&&/^\d+$/['test'](_0x49614a)){let _0x9e9fa7=_0x685113['split'](',')[_0x1f84a7(0x5e6)](_0x3ed8ee=>parseInt(_0x3ed8ee[_0x1f84a7(0x3f2)]())),_0x5947c3=parseInt(_0x49614a);return _0x9e9fa7[_0x1f84a7(0x267)](_0x5947c3);}return _0x685113[_0x1f84a7(0x267)](_0x49614a);}[a0_0x2101b5(0x476)](_0x432939){const _0x209479=a0_0x2101b5;return/^\d+(,\d+)*$/[_0x209479(0x6c3)](_0x432939);}[a0_0x2101b5(0x830)](_0xacd9b8){const _0x370a75=a0_0x2101b5;let _0x4264e6=!0x0,_0x4873b4=null;for(let _0x476a5d of _0xacd9b8){let _0x5ca9d8=this[_0x370a75(0x1e8)](_0x476a5d);if(_0x4873b4==='or'&&_0x5ca9d8){_0x4264e6=!0x0;break;}if(_0x4873b4===_0x370a75(0x7cf)&&!_0x5ca9d8){_0x4264e6=!0x1;break;}_0x4873b4=_0x476a5d['OrAnd'];}return _0x4264e6;}[a0_0x2101b5(0x1e8)](_0x491f02){const _0x321a67=a0_0x2101b5;let _0x1f1468=_0x491f02[_0x321a67(0x494)],_0x103632=_0x491f02[_0x321a67(0x686)];try{switch(_0x491f02[_0x321a67(0x83a)]){case _0x321a67(0x3f3):return String(_0x1f1468)===String(_0x103632);case _0x321a67(0x164):return String(_0x1f1468)!==String(_0x103632);case _0x321a67(0x4a6):return String(_0x1f1468)['includes'](String(_0x103632));case _0x321a67(0x440):return!String(_0x1f1468)[_0x321a67(0x267)](String(_0x103632));case'greater':return parseFloat(String(_0x1f1468))>parseFloat(String(_0x103632));case _0x321a67(0x3f1):return parseFloat(String(_0x1f1468))<parseFloat(String(_0x103632));case'notEmpty':return String(_0x1f1468)!=='';case _0x321a67(0x675):return String(_0x1f1468)==='';case _0x321a67(0x15e):return new RegExp(String(_0x103632))['test'](String(_0x1f1468));case _0x321a67(0x1b3):return!new RegExp(String(_0x103632))[_0x321a67(0x6c3)](String(_0x1f1468));default:return!0x1;}}catch(_0x35872a){return this[_0x321a67(0x240)]['error'](_0x321a67(0x653)+_0x35872a),!0x1;}}async[a0_0x2101b5(0x44b)](_0x16ab0d,_0x50ac71){const _0x3331f5=a0_0x2101b5;if(this[_0x3331f5(0x240)]['verbose'](this[_0x3331f5(0x4a8)]+'\x20('+this['instance'][_0x3331f5(0x7fe)]+_0x3331f5(0x295)),!_0x16ab0d||!_0x50ac71)return this[_0x3331f5(0x240)][_0x3331f5(0x3c9)](this[_0x3331f5(0x4a8)]+'\x20('+this[_0x3331f5(0x7f4)]['wuid']+_0x3331f5(0x816)),null;let _0x3ab386=_0x16ab0d[_0x3331f5(0x754)][_0x3331f5(0x7ee)]['key']['id'];this['logger']['verbose'](this[_0x3331f5(0x4a8)]+'\x20('+this['instance'][_0x3331f5(0x7fe)]+'):\x20mediaMessageInfoId\x20:\x20'+_0x3ab386);let _0x2b7f2d={'key':{'id':_0x3ab386}},_0x2b7673=_0x50ac71[_0x3331f5(0x750)];_0x16ab0d[_0x3331f5(0x754)]['realVariables']['_'+_0x2b7673+_0x3331f5(0x594)]=null,_0x16ab0d[_0x3331f5(0x754)]['realVariables']['_'+_0x2b7673+_0x3331f5(0x478)]=null,_0x16ab0d[_0x3331f5(0x754)][_0x3331f5(0x1de)]['_'+_0x2b7673+_0x3331f5(0x4e8)]=null,_0x16ab0d['chatLog'][_0x3331f5(0x1de)]['_'+_0x2b7673+_0x3331f5(0x71b)]=_0x16ab0d[_0x3331f5(0x754)][_0x3331f5(0x7ee)][_0x3331f5(0x1a3)];try{let _0x41dc73=await this[_0x3331f5(0x2d6)](_0x2b7f2d);this[_0x3331f5(0x240)][_0x3331f5(0x667)](this[_0x3331f5(0x4a8)]+'\x20('+this[_0x3331f5(0x7f4)][_0x3331f5(0x7fe)]+_0x3331f5(0x4c6)),_0x16ab0d[_0x3331f5(0x754)]['realVariables']['_'+_0x2b7673+_0x3331f5(0x1f1)]=_0x41dc73[_0x3331f5(0x251)],_0x16ab0d[_0x3331f5(0x754)]['realVariables']['_'+_0x2b7673+'.mimetype']=_0x41dc73[_0x3331f5(0x199)];let _0x50c63c=_0x41dc73[_0x3331f5(0x199)][_0x3331f5(0x66b)](/\/(\w+)$/),_0x1755af=_0x50c63c?_0x50c63c[0x1]:null;_0x16ab0d[_0x3331f5(0x754)]['realVariables']['_'+_0x2b7673+'.extension']=_0x1755af,this[_0x3331f5(0x240)][_0x3331f5(0x667)](this[_0x3331f5(0x4a8)]+'\x20('+this['instance']['wuid']+'):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27'+_0x2b7673+'\x27.');}catch(_0x3cf26b){this[_0x3331f5(0x240)][_0x3331f5(0x3c9)](this[_0x3331f5(0x4a8)]+'\x20('+this[_0x3331f5(0x7f4)]['wuid']+_0x3331f5(0x6ca)+_0x3cf26b[_0x3331f5(0x31f)]);}let _0x5d8cf8=_0x16ab0d[_0x3331f5(0x754)]['lastReceivedMessage'][_0x3331f5(0x1b9)]||_0x16ab0d[_0x3331f5(0x754)]['lastReceivedMessage']['caption']||_0x16ab0d[_0x3331f5(0x754)][_0x3331f5(0x7ee)]['vote'];try{_0x16ab0d[_0x3331f5(0x754)][_0x3331f5(0x1de)]||(_0x16ab0d['chatLog'][_0x3331f5(0x1de)]={});let _0x18074c=_0x16ab0d[_0x3331f5(0x754)][_0x3331f5(0x1de)][_0x2b7673];_0x16ab0d['chatLog'][_0x3331f5(0x1de)][_0x2b7673]=_0x5d8cf8;let _0x168db3={'variable':_0x2b7673,'oldValue':_0x18074c,'newValue':_0x5d8cf8};this[_0x3331f5(0x4c9)](_0x16ab0d,_0x50ac71,_0x168db3),this['logger']['verbose'](this[_0x3331f5(0x4a8)]+'\x20('+this[_0x3331f5(0x7f4)][_0x3331f5(0x7fe)]+_0x3331f5(0x7ba));}catch(_0x502afc){let _0x3ac89c={'error':!0x0,'errorLog':_0x502afc[_0x3331f5(0x60f)]()};return this['updateConversation'](_0x16ab0d,_0x50ac71,_0x3ac89c),this[_0x3331f5(0x240)]['error'](this[_0x3331f5(0x4a8)]+'\x20('+this[_0x3331f5(0x7f4)][_0x3331f5(0x7fe)]+'):\x20Erro\x20durante\x20a\x20atualização:\x20'+(_0x502afc instanceof Error?_0x502afc[_0x3331f5(0x31f)]:JSON[_0x3331f5(0x41d)](_0x502afc,null,0x2))),null;}}async[a0_0x2101b5(0x78e)](_0x115ae8,_0x3e966e){const _0x376b01=a0_0x2101b5;if(this[_0x376b01(0x240)][_0x376b01(0x667)](this['instanceName']+'\x20('+this[_0x376b01(0x7f4)]['wuid']+_0x376b01(0x578)),!_0x115ae8||!_0x3e966e)return this[_0x376b01(0x240)]['error'](this['instanceName']+'\x20('+this[_0x376b01(0x7f4)]['wuid']+_0x376b01(0x816)),null;let _0x1d9bcd=Date['now'](),_0x4ca679=parseInt(_0x3e966e[_0x376b01(0x2fc)],0xa);if(isNaN(_0x4ca679))return this[_0x376b01(0x240)][_0x376b01(0x3c9)](this[_0x376b01(0x4a8)]+'\x20('+this[_0x376b01(0x7f4)][_0x376b01(0x7fe)]+_0x376b01(0x820)),null;let _0x5d23a3={'newStoppedUntil':_0x1d9bcd+_0x4ca679*0x3c*0x3e8};return await this[_0x376b01(0x4c9)](_0x115ae8,_0x3e966e,_0x5d23a3,!0x0),null;}async[a0_0x2101b5(0x200)](_0x245d86,_0x2acd56){const _0xb5875f=a0_0x2101b5;try{switch(_0x2acd56[_0xb5875f(0x6ae)][_0xb5875f(0x43c)]){case'sendText':await this[_0xb5875f(0x257)](_0x245d86,_0x2acd56);break;case'sendMedia':await this[_0xb5875f(0x51d)](_0x245d86,_0x2acd56);break;case _0xb5875f(0x682):await this[_0xb5875f(0x679)](_0x245d86,_0x2acd56);break;case _0xb5875f(0x539):await this[_0xb5875f(0x2d0)](_0x245d86,_0x2acd56);break;case _0xb5875f(0x2c1):await this[_0xb5875f(0x428)](_0x245d86,_0x2acd56);break;case _0xb5875f(0x208):await this[_0xb5875f(0x53e)](_0x245d86,_0x2acd56);break;case'sendMenu':await this['uazapiSendMenu'](_0x245d86,_0x2acd56);break;case _0xb5875f(0x451):await this[_0xb5875f(0x1d9)](_0x245d86,_0x2acd56);break;default:this['logger']['error'](this[_0xb5875f(0x4a8)]+'\x20('+this[_0xb5875f(0x7f4)][_0xb5875f(0x7fe)]+'):\x20Comando\x20desconhecido:\x20'+_0x2acd56[_0xb5875f(0x6ae)][_0xb5875f(0x43c)]);}}catch(_0x39d643){this['logger'][_0xb5875f(0x3c9)](this[_0xb5875f(0x4a8)]+'\x20('+this[_0xb5875f(0x7f4)]['wuid']+_0xb5875f(0x42f)+(_0x39d643 instanceof Error?_0x39d643[_0xb5875f(0x31f)]:JSON[_0xb5875f(0x41d)](_0x39d643,null,0x2)));}}async['updateConversation'](_0xc30bae,_0x3ab362,_0x3658c3,_0x9a7975=!0x1,_0x31e60c=!0x1){const _0x15a319=a0_0x2101b5;_0xc30bae['chatLog'][_0x15a319(0x348)]||(_0xc30bae[_0x15a319(0x754)][_0x15a319(0x348)]=[]);let _0x2901d1=(_0xc30bae[_0x15a319(0x754)]['blockLogs']?.[_0x15a319(0x608)]??0x0)+0x1,_0x201fa2=_0xc30bae[_0x15a319(0x754)][_0x15a319(0x348)][_0x15a319(0x285)](_0x34d3d2=>String(_0x34d3d2['blockId'])===String(_0x3ab362[_0x15a319(0x1b8)]))['length']+0x1,_0x6b987=_0x3658c3?.[_0x15a319(0x2ed)]??Date['now'](),_0x4a85aa=_0x3658c3?.[_0x15a319(0x3c9)]?_0x3658c3['errorLog']??_0x3658c3[_0x15a319(0x3c9)][_0x15a319(0x60f)]():void 0x0,_0x5bf868={'onTime':_0x6b987,'blockId':_0x3ab362[_0x15a319(0x1b8)],'order':_0x2901d1,'activatedCount':_0x201fa2,'error':_0x3658c3?.[_0x15a319(0x3c9)]??!0x1,'messageId':_0x3658c3?.[_0x15a319(0x7d9)],'apiResponse':_0x3658c3?.['apiResponse'],'apiResponseString':_0x3658c3?.[_0x15a319(0x884)]?JSON[_0x15a319(0x41d)](_0x3658c3?.[_0x15a319(0x884)]):void 0x0,'variable':_0x3658c3?.[_0x15a319(0x7d5)],'oldValue':_0x3658c3?.[_0x15a319(0x2c8)],'newValue':_0x3658c3?.['newValue'],'newStoppedUntil':_0x3658c3?.[_0x15a319(0x57e)],'moreLogs':_0x3658c3?.[_0x15a319(0x7f5)],'errorLog':_0x4a85aa};if(_0x3658c3[_0x15a319(0x7f5)]&&_0x3658c3[_0x15a319(0x7f5)][_0x15a319(0x608)]>0x0){let _0x4c5c57=_0x3658c3[_0x15a319(0x7f5)][_0x15a319(0x5e6)](_0x2b1306=>this[_0x15a319(0x720)](_0x2b1306,_0xc30bae[_0x15a319(0x754)]['realVariables']));_0x5bf868['moreLogs']=_0x4c5c57;}if(_0xc30bae[_0x15a319(0x754)]['realVariables']||(_0xc30bae['chatLog'][_0x15a319(0x1de)]={}),_0xc30bae[_0x15a319(0x754)][_0x15a319(0x1de)][_0x15a319(0x2be)]=String(_0x201fa2),_0xc30bae['chatLog'][_0x15a319(0x1de)][_0x15a319(0x712)]=String(_0x3658c3['error']??!0x1),_0xc30bae[_0x15a319(0x754)][_0x15a319(0x348)][_0x15a319(0x2a9)](_0x5bf868),_0xc30bae[_0x15a319(0x754)][_0x15a319(0x1de)][_0x15a319(0x5a4)]&&_0xc30bae['chatLog']['realVariables']['telefone']!==_0xc30bae[_0x15a319(0x4e1)]){let _0x488af2=(await this[_0x15a319(0x56b)]({'numbers':[_0xc30bae[_0x15a319(0x754)][_0x15a319(0x1de)]['telefone']]}))[0x0][_0x15a319(0x58f)];_0xc30bae[_0x15a319(0x754)][_0x15a319(0x1de)][_0x15a319(0x5a4)]=_0x488af2,_0xc30bae[_0x15a319(0x4e1)]=_0x488af2;try{let _0x16b90e={'_id':{'$ne':_0xc30bae[_0x15a319(0x1b8)]},'remoteJid':_0x488af2,'status':_0x15a319(0x71e)},_0x3c0e23={'status':_0x15a319(0x62b)};await this['repository']['flowConversation'][_0x15a319(0x877)](_0x16b90e,_0x3c0e23,this[_0x15a319(0x7f4)][_0x15a319(0x7fe)]),this['logger'][_0x15a319(0x667)](this[_0x15a319(0x4a8)]+'\x20('+this['instance'][_0x15a319(0x7fe)]+_0x15a319(0x15b));}catch(_0x3be83f){this[_0x15a319(0x240)][_0x15a319(0x3c9)](this[_0x15a319(0x4a8)]+'\x20('+this[_0x15a319(0x7f4)][_0x15a319(0x7fe)]+_0x15a319(0x50d)+_0x3be83f['message']);}try{let _0x5a1236=_0xc30bae['chatLog'][_0x15a319(0x1de)],_0x2781fb=await this[_0x15a319(0x761)](_0x488af2),_0x4d9c3e={..._0x5a1236,..._0x2781fb,'_remoteJid':_0x488af2};_0xc30bae[_0x15a319(0x754)][_0x15a319(0x1de)]=_0x4d9c3e;}catch(_0x10de4e){this[_0x15a319(0x240)][_0x15a319(0x3c9)](this[_0x15a319(0x4a8)]+'\x20('+this[_0x15a319(0x7f4)][_0x15a319(0x7fe)]+_0x15a319(0x79d)+_0x10de4e['message']);}}_0xc30bae[_0x15a319(0x754)]['lastBlockId']=_0x3ab362[_0x15a319(0x1b8)][_0x15a319(0x60f)](),_0xc30bae['chatLog'][_0x15a319(0x345)]&&(_0xc30bae[_0x15a319(0x754)][_0x15a319(0x345)]=_0xc30bae[_0x15a319(0x754)][_0x15a319(0x345)]),_0xc30bae[_0x15a319(0x754)][_0x15a319(0x7ee)]&&(_0xc30bae['chatLog']['lastReceivedMessage']=_0xc30bae[_0x15a319(0x754)][_0x15a319(0x7ee)]),_0xc30bae[_0x15a319(0x754)][_0x15a319(0x57a)]&&(_0xc30bae['chatLog'][_0x15a319(0x57a)]=_0xc30bae[_0x15a319(0x754)]['lastCondition']),_0x31e60c&&(_0xc30bae[_0x15a319(0x352)]=_0x15a319(0x62b)),_0x9a7975?this[_0x15a319(0x5d6)](_0xc30bae):this[_0x15a319(0x5ad)](_0xc30bae,_0x3ab362);}[a0_0x2101b5(0x720)](_0x113d1a,_0x2869a5){const _0x1f1043=a0_0x2101b5;return _0x113d1a[_0x1f1043(0x869)](/\{\{([^}]+)\}\}/g,(_0x2a9f13,_0x35cd9b)=>_0x2869a5[_0x35cd9b]?'{{'+_0x35cd9b+'}}\x20->\x20\x22'+_0x2869a5[_0x35cd9b]+'\x22':'{{'+_0x35cd9b+_0x1f1043(0x239));}async[a0_0x2101b5(0x5d6)](_0x1cd6b8){const _0x5a2235=a0_0x2101b5;try{let _0x873acd=Object[_0x5a2235(0x7bc)](_0x1cd6b8['chatLog'][_0x5a2235(0x1de)])[_0x5a2235(0x5e6)](([_0x366a08,_0x5ecb52])=>({'name':_0x366a08,'value':_0x5ecb52})),_0x333f7f={'status':_0x1cd6b8[_0x5a2235(0x352)],'remoteJid':_0x1cd6b8['remoteJid'],'blocks':_0x1cd6b8[_0x5a2235(0x4a5)],'waitingMenu_id':_0x1cd6b8[_0x5a2235(0x681)],'waitingMenu_text':_0x1cd6b8[_0x5a2235(0x760)],'waitingMenu_replyOptions':_0x1cd6b8[_0x5a2235(0x2fa)],'chatLog':{'lastBlockId':_0x1cd6b8[_0x5a2235(0x754)][_0x5a2235(0x156)],'lastSendMessage':_0x1cd6b8[_0x5a2235(0x754)][_0x5a2235(0x345)],'lastReceivedMessage':_0x1cd6b8[_0x5a2235(0x754)][_0x5a2235(0x7ee)],'lastCondition':_0x1cd6b8[_0x5a2235(0x754)][_0x5a2235(0x57a)],'chatVariables':_0x873acd,'realVariables':_0x1cd6b8[_0x5a2235(0x754)]['realVariables'],'blockLogs':_0x1cd6b8[_0x5a2235(0x754)][_0x5a2235(0x348)]}},_0x2bfb47=await this[_0x5a2235(0x43b)][_0x5a2235(0x4bd)][_0x5a2235(0x858)](_0x1cd6b8['_id'],_0x333f7f,this[_0x5a2235(0x7f4)][_0x5a2235(0x7fe)]);if(_0x2bfb47){this['logger']['verbose'](this[_0x5a2235(0x4a8)]+'\x20('+this[_0x5a2235(0x7f4)][_0x5a2235(0x7fe)]+_0x5a2235(0x3b8)+_0x2bfb47[_0x5a2235(0x1b8)]);try{let _0x4df199=['nome','nomecompleto',_0x5a2235(0x7ca),_0x5a2235(0x246),_0x5a2235(0x352),'notas',_0x5a2235(0x5f0),_0x5a2235(0x8c7),_0x5a2235(0x4a7),_0x5a2235(0x143)];if(!this[_0x5a2235(0x655)]&&(await this[_0x5a2235(0x474)](),!this[_0x5a2235(0x655)]))throw new Error(_0x5a2235(0x545));let _0x550bcc=this[_0x5a2235(0x655)]?.['customFields'][_0x5a2235(0x5e6)](_0x5bc6de=>_0x5bc6de[_0x5a2235(0x89c)]),_0x322565={};Object['entries'](_0x1cd6b8['chatLog'][_0x5a2235(0x1de)])['forEach'](([_0x441a06,_0x54cbb8])=>{const _0x185d11=_0x5a2235;_0x4df199[_0x185d11(0x267)](_0x441a06)&&(_0x441a06===_0x185d11(0x8c7)&&typeof _0x54cbb8==_0x185d11(0x30d)?_0x322565[_0x441a06]=_0x54cbb8['split'](',')['map'](_0x48a9f7=>_0x48a9f7[_0x185d11(0x3f2)]())[_0x185d11(0x285)](_0x325ab8=>_0x325ab8!==''):_0x441a06==='etiquetas'&&typeof _0x54cbb8==_0x185d11(0x30d)?_0x322565[_0x441a06]=_0x54cbb8[_0x185d11(0x2bd)](',')['map'](_0x443a8c=>_0x443a8c[_0x185d11(0x3f2)]())[_0x185d11(0x285)](_0x5c76d3=>_0x5c76d3!==''):_0x322565[_0x441a06]=_0x54cbb8);});let _0x2be893=_0x1cd6b8['chatLog'][_0x5a2235(0x348)][_0x1cd6b8[_0x5a2235(0x754)][_0x5a2235(0x348)][_0x5a2235(0x608)]-0x1];if(_0x2be893){let _0x5cc508=_0x2be893[_0x5a2235(0x57e)];_0x5cc508!==void 0x0&&(_0x322565['desativadoFluxoAte']=_0x5cc508[_0x5a2235(0x60f)]());}let _0x4e4e79=_0x873acd[_0x5a2235(0x285)](_0x5687ae=>_0x550bcc[_0x5a2235(0x267)](_0x5687ae[_0x5a2235(0x89c)]));this[_0x5a2235(0x240)][_0x5a2235(0x667)](this['instanceName']+'\x20('+this[_0x5a2235(0x7f4)][_0x5a2235(0x7fe)]+_0x5a2235(0x8a3)),this[_0x5a2235(0x240)][_0x5a2235(0x667)](_0x322565),this[_0x5a2235(0x240)][_0x5a2235(0x667)](this[_0x5a2235(0x4a8)]+'\x20('+this[_0x5a2235(0x7f4)][_0x5a2235(0x7fe)]+_0x5a2235(0x615)),this[_0x5a2235(0x240)][_0x5a2235(0x667)](_0x4e4e79);let _0x2045b5=_0x4e4e79['map'](_0x4a8981=>{const _0x3d2209=_0x5a2235;let _0x4cf29b=this['AutomateSystem']?.[_0x3d2209(0x8c1)]['find'](_0x3d7e9f=>_0x3d7e9f[_0x3d2209(0x89c)]===_0x4a8981[_0x3d2209(0x89c)]);if(!_0x4cf29b)throw new Error(_0x3d2209(0x158)+_0x4a8981[_0x3d2209(0x89c)]);return{'_id':_0x4cf29b['_id'],'value':_0x4a8981[_0x3d2209(0x46f)]};});this[_0x5a2235(0x240)]['verbose'](this['instanceName']+'\x20('+this[_0x5a2235(0x7f4)]['wuid']+_0x5a2235(0x3e3)),this[_0x5a2235(0x240)]['verbose'](_0x2045b5),await this[_0x5a2235(0x81d)](_0x1cd6b8['remoteJid'],_0x322565,_0x2045b5);}catch(_0x38dc4a){this[_0x5a2235(0x240)][_0x5a2235(0x3c9)](this[_0x5a2235(0x4a8)]+'\x20('+this[_0x5a2235(0x7f4)]['wuid']+'):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20'+(_0x38dc4a instanceof Error?_0x38dc4a[_0x5a2235(0x31f)]:JSON['stringify'](_0x38dc4a,null,0x2)));}}else this[_0x5a2235(0x240)][_0x5a2235(0x3c9)](this[_0x5a2235(0x4a8)]+'\x20('+this[_0x5a2235(0x7f4)][_0x5a2235(0x7fe)]+'):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida');}catch(_0x299245){this['logger'][_0x5a2235(0x3c9)](this['instanceName']+'\x20('+this['instance'][_0x5a2235(0x7fe)]+_0x5a2235(0x622)+(_0x299245 instanceof Error?_0x299245[_0x5a2235(0x31f)]:JSON[_0x5a2235(0x41d)](_0x299245,null,0x2)));}}async[a0_0x2101b5(0x81d)](_0x29007f,_0x12b591,_0x2d9cd8){const _0x4d418a=a0_0x2101b5;try{let _0x502571={'leadInfo.leadnome':_0x12b591[_0x4d418a(0x2ac)],'leadInfo.nomecompleto':_0x12b591[_0x4d418a(0x24f)],'leadInfo.email':_0x12b591['email'],'leadInfo.cpf':_0x12b591[_0x4d418a(0x246)],'leadInfo.status':_0x12b591[_0x4d418a(0x352)],'leadInfo.notas':_0x12b591[_0x4d418a(0x30b)],'leadInfo.responsavelid':_0x12b591[_0x4d418a(0x5f0)],'leadInfo.tags':_0x12b591[_0x4d418a(0x8c7)],'leadInfo.etiquetas':_0x12b591['etiquetas'],'leadInfo.customFields':_0x2d9cd8,'leadInfo.atendimentoAberto':_0x12b591[_0x4d418a(0x143)]},_0x55b565=await this[_0x4d418a(0x43b)][_0x4d418a(0x5b2)][_0x4d418a(0x505)]({'where':{'_id':_0x29007f}},this[_0x4d418a(0x7f4)][_0x4d418a(0x7fe)]);if(!_0x55b565)return'chat\x20não\x20encontrado';let _0x3388af=new Set(_0x55b565[_0x4d418a(0x7f1)]['etiquetas']||[]),_0x55898c=new Set(_0x12b591[_0x4d418a(0x4a7)]||[]),_0x54d2d5=await this[_0x4d418a(0x43b)][_0x4d418a(0x784)][_0x4d418a(0x604)]({'where':{}},this[_0x4d418a(0x7f4)][_0x4d418a(0x7fe)]),_0x1d0d3b=new Set(_0x54d2d5[_0x4d418a(0x5e6)](_0x3fce14=>_0x3fce14[_0x4d418a(0x1b8)])),_0x236ff5=[..._0x55898c][_0x4d418a(0x285)](_0x2cd191=>!_0x3388af[_0x4d418a(0x350)](_0x2cd191)&&_0x1d0d3b[_0x4d418a(0x350)](_0x2cd191)),_0x4120f5=[..._0x3388af][_0x4d418a(0x285)](_0x4a605e=>!_0x55898c[_0x4d418a(0x350)](_0x4a605e));for(let _0x50fd1e of _0x236ff5)await this[_0x4d418a(0x7d7)](_0x50fd1e,_0x55b565[_0x4d418a(0x1b8)]),_0x3388af[_0x4d418a(0x6c5)](_0x50fd1e);for(let _0x4e57fe of _0x4120f5)await this[_0x4d418a(0x82a)](_0x4e57fe,_0x55b565['_id']),_0x3388af['delete'](_0x4e57fe);if('desativadoFluxoAte'in _0x12b591){let _0xab1159=_0x12b591['desativadoFluxoAte'];_0x502571[_0x4d418a(0x1e5)]=_0xab1159?Number(_0xab1159):null;}if(_0x4d418a(0x143)in _0x12b591){let _0x5efde6=_0x12b591[_0x4d418a(0x143)][_0x4d418a(0x86b)]();_0x502571[_0x4d418a(0x835)]=_0x5efde6===_0x4d418a(0x58b)||_0x5efde6==='1'||_0x5efde6===_0x4d418a(0x53b)||_0x5efde6===_0x4d418a(0x1ba);}let _0x4e4e9a=await this['repository'][_0x4d418a(0x5b2)][_0x4d418a(0x858)]({'where':{'_id':_0x29007f}},_0x502571,this[_0x4d418a(0x7f4)][_0x4d418a(0x7fe)]);_0x4e4e9a?(this[_0x4d418a(0x240)][_0x4d418a(0x667)](this['instanceName']+'\x20('+this[_0x4d418a(0x7f4)][_0x4d418a(0x7fe)]+_0x4d418a(0x581)+_0x4e4e9a[_0x4d418a(0x1b8)]),F(this[_0x4d418a(0x4a8)],_0x4d418a(0x415),{'chat':_0x4e4e9a})):this[_0x4d418a(0x240)][_0x4d418a(0x3c9)](this['instanceName']+'\x20('+this[_0x4d418a(0x7f4)][_0x4d418a(0x7fe)]+_0x4d418a(0x876));}catch(_0x205c7a){this[_0x4d418a(0x240)]['error'](this[_0x4d418a(0x4a8)]+'\x20('+this['instance'][_0x4d418a(0x7fe)]+_0x4d418a(0x2d7)+(_0x205c7a instanceof Error?_0x205c7a['message']:JSON[_0x4d418a(0x41d)](_0x205c7a,null,0x2)));}}async[a0_0x2101b5(0x458)](_0x48e9d7,_0x39d97c){const _0x2ce2d0=a0_0x2101b5;this[_0x2ce2d0(0x240)][_0x2ce2d0(0x667)](this[_0x2ce2d0(0x4a8)]+'\x20('+this[_0x2ce2d0(0x7f4)][_0x2ce2d0(0x7fe)]+_0x2ce2d0(0x448)+_0x39d97c);try{let _0x1aa9f4=await this['repository'][_0x2ce2d0(0x5b2)][_0x2ce2d0(0x858)]({'where':{'_id':_0x48e9d7[_0x2ce2d0(0x4e1)]}},{'leadInfo.desativadoFluxoAte':_0x39d97c},this[_0x2ce2d0(0x7f4)][_0x2ce2d0(0x7fe)]);this[_0x2ce2d0(0x240)][_0x2ce2d0(0x667)](this[_0x2ce2d0(0x4a8)]+'\x20('+this[_0x2ce2d0(0x7f4)][_0x2ce2d0(0x7fe)]+'):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20'+_0x48e9d7[_0x2ce2d0(0x1b8)]),this[_0x2ce2d0(0x240)][_0x2ce2d0(0x667)](this[_0x2ce2d0(0x4a8)]+'\x20('+this[_0x2ce2d0(0x7f4)]['wuid']+_0x2ce2d0(0x448)+JSON['stringify'](_0x1aa9f4,null,0x2)),_0x1aa9f4&&F(this[_0x2ce2d0(0x4a8)],_0x2ce2d0(0x415),{'chat':_0x1aa9f4});}catch(_0x1e99ea){this[_0x2ce2d0(0x240)]['error'](this[_0x2ce2d0(0x4a8)]+'\x20('+this[_0x2ce2d0(0x7f4)][_0x2ce2d0(0x7fe)]+'):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20'+(_0x1e99ea instanceof Error?_0x1e99ea[_0x2ce2d0(0x31f)]:JSON[_0x2ce2d0(0x41d)](_0x1e99ea,null,0x2)));}}async['findFlow'](_0x3e8543){const _0xa2882a=a0_0x2101b5;try{this[_0xa2882a(0x240)][_0xa2882a(0x667)](this[_0xa2882a(0x4a8)]+'\x20('+this[_0xa2882a(0x7f4)][_0xa2882a(0x7fe)]+_0xa2882a(0x31a));let _0x42c619=_0x3e8543[_0xa2882a(0x869)](/\D/g,''),_0x2d6f72=this[_0xa2882a(0x655)][_0xa2882a(0x145)][_0xa2882a(0x604)](_0x2c49b3=>_0x2c49b3[_0xa2882a(0x4ed)]===_0x42c619);if(_0x2d6f72||(this[_0xa2882a(0x240)][_0xa2882a(0x667)](this[_0xa2882a(0x4a8)]+'\x20('+this[_0xa2882a(0x7f4)][_0xa2882a(0x7fe)]+_0xa2882a(0x79f)),_0x2d6f72=this[_0xa2882a(0x655)][_0xa2882a(0x145)]['find'](_0x568bae=>_0x568bae[_0xa2882a(0x7ae)]===!0x0)),!_0x2d6f72)return this[_0xa2882a(0x240)][_0xa2882a(0x667)](this['instanceName']+'\x20('+this[_0xa2882a(0x7f4)][_0xa2882a(0x7fe)]+_0xa2882a(0x383)),null;let _0x1589dd=await this[_0xa2882a(0x43b)]['flow']['findOne']({'where':{'_id':_0x2d6f72[_0xa2882a(0x1b8)]}});if(!_0x1589dd||!_0x1589dd[_0xa2882a(0x4f1)]?.['includes'](this[_0xa2882a(0x7f4)][_0xa2882a(0x7fe)]))throw this[_0xa2882a(0x240)]['error'](this[_0xa2882a(0x4a8)]+'\x20('+this[_0xa2882a(0x7f4)][_0xa2882a(0x7fe)]+_0xa2882a(0x486)+_0x1589dd[_0xa2882a(0x1b8)]+_0xa2882a(0x242)),new m('Flow\x20\x27'+_0x1589dd[_0xa2882a(0x1b8)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');return _0x1589dd;}catch(_0x40e8cd){return this[_0xa2882a(0x240)][_0xa2882a(0x3c9)](this['instanceName']+'\x20('+this[_0xa2882a(0x7f4)][_0xa2882a(0x7fe)]+_0xa2882a(0x804)+(_0x40e8cd instanceof Error?_0x40e8cd[_0xa2882a(0x31f)]:JSON[_0xa2882a(0x41d)](_0x40e8cd,null,0x2))),null;}}async[a0_0x2101b5(0x87b)](_0x408497,_0x216720){const _0x6fddd2=a0_0x2101b5;try{let _0x6ca3fb=!!_0x216720[_0x6fddd2(0x32e)],_0x3b862a=_0x216720['quoted'],_0x109777=null;if(this['logger']['verbose'](this[_0x6fddd2(0x4a8)]+'\x20('+this[_0x6fddd2(0x7f4)][_0x6fddd2(0x7fe)]+_0x6fddd2(0x410)+_0x6ca3fb+_0x6fddd2(0x1e9)+_0x3b862a),_0x6ca3fb){this[_0x6fddd2(0x240)][_0x6fddd2(0x667)](this[_0x6fddd2(0x4a8)]+'\x20('+this[_0x6fddd2(0x7f4)][_0x6fddd2(0x7fe)]+'):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto');let _0x3facfb={'where':{'remoteJid':_0x408497,'waitingMenu_id':_0x3b862a}};if(_0x109777=await this[_0x6fddd2(0x43b)]['flowConversation']['findOne'](_0x3facfb,this['instance'][_0x6fddd2(0x7fe)]),!_0x109777)return this[_0x6fddd2(0x240)][_0x6fddd2(0x667)](this['instanceName']+'\x20('+this[_0x6fddd2(0x7f4)][_0x6fddd2(0x7fe)]+_0x6fddd2(0x33e)),null;let _0x588e87=Date[_0x6fddd2(0x87f)](),_0x477ee9=_0x109777?.['minutesToClose']||0x0,_0x5764ea=_0x588e87-_0x477ee9*0x3c*0x3e8;if(_0x109777['lastInteraction']<_0x5764ea){this['logger']['verbose'](this[_0x6fddd2(0x4a8)]+'\x20('+this['instance']['wuid']+_0x6fddd2(0x5ec));let _0x13e2e3={'number':_0x109777[_0x6fddd2(0x4e1)],'options':{'delay':0x0},'textMessage':{'text':_0x109777[_0x6fddd2(0x888)]}};await this['textMessage'](_0x13e2e3);let _0x2ba7b4={'status':_0x6fddd2(0x62b),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this['repository'][_0x6fddd2(0x4bd)]['updateOne'](_0x109777[_0x6fddd2(0x1b8)],_0x2ba7b4,this['instance'][_0x6fddd2(0x7fe)]),null;}return _0x109777[_0x6fddd2(0x537)]=Date[_0x6fddd2(0x87f)](),_0x109777['chatLog'][_0x6fddd2(0x7ee)]=_0x216720,_0x109777;}else{this[_0x6fddd2(0x240)][_0x6fddd2(0x667)](this['instanceName']+'\x20('+this[_0x6fddd2(0x7f4)][_0x6fddd2(0x7fe)]+_0x6fddd2(0x33f)+this['instance']['wuid']+'\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário'),this[_0x6fddd2(0x240)][_0x6fddd2(0x667)](this[_0x6fddd2(0x4a8)]+'\x20('+this[_0x6fddd2(0x7f4)]['wuid']+_0x6fddd2(0x592));let _0x3f3aab={'where':{'remoteJid':_0x408497,'status':'open'}};if(_0x109777=await this['repository'][_0x6fddd2(0x4bd)][_0x6fddd2(0x505)](_0x3f3aab,this[_0x6fddd2(0x7f4)][_0x6fddd2(0x7fe)]),!_0x109777){let _0x2824aa=await this[_0x6fddd2(0x601)](_0x408497);if(_0x2824aa&&(_0x109777=await this[_0x6fddd2(0x81f)](_0x2824aa,_0x216720[_0x6fddd2(0x150)],_0x216720)),!_0x109777)return null;}let _0x13739a=Date[_0x6fddd2(0x87f)](),_0x37f111=_0x109777?.[_0x6fddd2(0x23e)]||0x0,_0x32f8d1=_0x13739a-_0x37f111*0x3c*0x3e8;if(this[_0x6fddd2(0x240)]['verbose'](this[_0x6fddd2(0x4a8)]+'\x20('+this[_0x6fddd2(0x7f4)][_0x6fddd2(0x7fe)]+_0x6fddd2(0x617)+_0x13739a+_0x6fddd2(0x84c)+_0x37f111+_0x6fddd2(0x4ab)+_0x32f8d1),this[_0x6fddd2(0x240)][_0x6fddd2(0x667)](this[_0x6fddd2(0x4a8)]+'\x20('+this[_0x6fddd2(0x7f4)][_0x6fddd2(0x7fe)]+_0x6fddd2(0x3ce)),this[_0x6fddd2(0x240)][_0x6fddd2(0x667)](this[_0x6fddd2(0x4a8)]+'\x20('+this[_0x6fddd2(0x7f4)]['wuid']+_0x6fddd2(0x1d4)+_0x109777[_0x6fddd2(0x537)]),this[_0x6fddd2(0x240)]['verbose'](this[_0x6fddd2(0x4a8)]+'\x20('+this['instance']['wuid']+_0x6fddd2(0x745)+_0x32f8d1),_0x109777[_0x6fddd2(0x537)]<_0x32f8d1){this['logger'][_0x6fddd2(0x667)](this[_0x6fddd2(0x4a8)]+'\x20('+this[_0x6fddd2(0x7f4)][_0x6fddd2(0x7fe)]+_0x6fddd2(0x569));let _0x456f83=await this[_0x6fddd2(0x601)](_0x408497);if(_0x456f83===null)return null;_0x109777&&await this[_0x6fddd2(0x43b)][_0x6fddd2(0x4bd)][_0x6fddd2(0x858)](_0x109777[_0x6fddd2(0x1b8)],{'status':_0x6fddd2(0x62b)},this[_0x6fddd2(0x7f4)]['wuid']),_0x109777=await this[_0x6fddd2(0x81f)](_0x456f83,_0x216720[_0x6fddd2(0x150)],_0x216720);}return _0x109777['lastInteraction']=_0x13739a,_0x109777[_0x6fddd2(0x754)][_0x6fddd2(0x7ee)]=_0x216720,_0x109777;}}catch(_0x3acad9){return this[_0x6fddd2(0x240)][_0x6fddd2(0x3c9)](this[_0x6fddd2(0x4a8)]+'\x20('+this[_0x6fddd2(0x7f4)][_0x6fddd2(0x7fe)]+'):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20'+(_0x3acad9 instanceof Error?_0x3acad9[_0x6fddd2(0x31f)]:JSON[_0x6fddd2(0x41d)](_0x3acad9,null,0x2))),null;}}async[a0_0x2101b5(0x81f)](_0x40668f,_0xf66853,_0x1941c9){const _0x25e909=a0_0x2101b5;this[_0x25e909(0x240)][_0x25e909(0x667)](this[_0x25e909(0x4a8)]+'\x20('+this[_0x25e909(0x7f4)][_0x25e909(0x7fe)]+_0x25e909(0x650));try{let _0x1a979a=require('mongodb')[_0x25e909(0x3db)],_0x27619f=Date[_0x25e909(0x87f)](),_0x1de83a=_0x25e909(0x773),_0x5a7caa=_0xf66853[_0x25e909(0x4f0)]?null:_0x1941c9,_0x23a5fa=_0xf66853[_0x25e909(0x4f0)]?_0x1941c9:null,_0xd41b3a=_0xf66853['remoteJid'],_0x56c560=this['AutomateSystem'][_0x25e909(0x145)][_0x25e909(0x604)](_0x1624e7=>_0x1624e7[_0x25e909(0x1b8)]===_0x40668f['_id']?.[_0x25e909(0x60f)]()),_0x3b3073=_0x56c560?.[_0x25e909(0x23e)]??_0x40668f[_0x25e909(0x23e)]??0x0,_0x38001a=_0x56c560?.['readMessages']??_0x40668f[_0x25e909(0x82e)]??!0x1;await this[_0x25e909(0x709)](_0xd41b3a);let _0x3b892d={'flowId':_0x40668f[_0x25e909(0x1b8)],..._0x40668f,'chatLog':null},_0x512866=await this[_0x25e909(0x503)](_0x3b892d['variables']),_0x5da2f7=await this[_0x25e909(0x761)](_0xd41b3a),_0x3404e1={..._0x512866,..._0x5da2f7,'_remoteJid':_0xd41b3a},_0x524755={'lastReceivedMessage':_0x5a7caa,'lastSendMessage':_0x23a5fa,'lastBlockId':_0x1de83a,'lastCondition':!0x0,'realVariables':_0x3404e1};_0x3b892d[_0x25e909(0x754)]=_0x524755,delete _0x3b892d[_0x25e909(0x1b8)],_0x3b892d[_0x25e909(0x1b8)]=new _0x1a979a(),_0x3b892d['lastInteraction']=_0x27619f,_0x3b892d[_0x25e909(0x352)]=_0x25e909(0x71e),_0x3b892d['remoteJid']=_0xd41b3a,_0x3b892d[_0x25e909(0x23e)]=_0x3b3073,_0x3b892d[_0x25e909(0x82e)]=_0x38001a;let _0x5bf80b=await this[_0x25e909(0x43b)][_0x25e909(0x4bd)]['updateOne'](_0x3b892d['_id'],_0x3b892d,this['instance']['wuid']);return this[_0x25e909(0x240)][_0x25e909(0x667)](this[_0x25e909(0x4a8)]+'\x20('+this[_0x25e909(0x7f4)][_0x25e909(0x7fe)]+_0x25e909(0x38e)),_0x5bf80b?_0x3b892d:null;}catch(_0x37ee9c){return this[_0x25e909(0x240)][_0x25e909(0x3c9)](this[_0x25e909(0x4a8)]+'\x20('+this['instance'][_0x25e909(0x7fe)]+_0x25e909(0x161)+(_0x37ee9c instanceof Error?_0x37ee9c['message']:JSON['stringify'](_0x37ee9c,null,0x2))),_0x37ee9c;}}async[a0_0x2101b5(0x257)](_0x505609,_0x25ca67){const _0x456b28=a0_0x2101b5;let _0x5594b2=_0x505609['remoteJid'];_0x25ca67['uazapi'][_0x456b28(0x4e1)]&&_0x25ca67[_0x456b28(0x6ae)][_0x456b28(0x4e1)][_0x456b28(0x3f2)]()!==''&&(_0x5594b2=_0x25ca67[_0x456b28(0x6ae)]['remoteJid'][_0x456b28(0x3f2)]()),this[_0x456b28(0x240)][_0x456b28(0x667)](this[_0x456b28(0x4a8)]+'\x20('+this[_0x456b28(0x7f4)][_0x456b28(0x7fe)]+_0x456b28(0x6bf));let _0x50d860={'number':_0x5594b2,'options':{'delay':_0x25ca67[_0x456b28(0x6ae)][_0x456b28(0x64d)],'linkPreview':_0x25ca67[_0x456b28(0x6ae)][_0x456b28(0x6f9)]},'textMessage':{'text':_0x25ca67['uazapi'][_0x456b28(0x1b9)]}};try{let _0x3fcde7=await this[_0x456b28(0x87c)](_0x50d860);if(_0x3fcde7){let _0x6acc31={'_id':_0x3fcde7['key']['id'],'_fromMe':_0x3fcde7['key'][_0x456b28(0x4f0)],'_remoteJid':_0x3fcde7[_0x456b28(0x150)][_0x456b28(0x4e1)]},_0x5e506c=(0x0,w[_0x456b28(0x6e2)])(_0x3fcde7[_0x456b28(0x31f)]),_0x1e615a=(0x0,w[_0x456b28(0x4ac)])(_0x5e506c);_0x505609[_0x456b28(0x754)]['lastBlockId']=_0x25ca67[_0x456b28(0x1b8)][_0x456b28(0x60f)]();let {message_normalized:_0x58b786}=this[_0x456b28(0x318)](_0x5e506c,_0x1e615a,null);_0x505609['chatLog'][_0x456b28(0x345)]=await _0x58b786;let _0x35d736={'messageId':_0x3fcde7['key']['id']},_0x2bd2b2=_0x505609[_0x456b28(0x754)][_0x456b28(0x1de)];Object[_0x456b28(0x6b1)](_0x2bd2b2,_0x6acc31),_0x505609[_0x456b28(0x754)][_0x456b28(0x1de)]=_0x2bd2b2,this[_0x456b28(0x4c9)](_0x505609,_0x25ca67,_0x35d736);}else{let _0x34bfd2={'error':!0x0};this[_0x456b28(0x4c9)](_0x505609,_0x25ca67,_0x34bfd2),this[_0x456b28(0x240)][_0x456b28(0x3c9)](this[_0x456b28(0x4a8)]+'\x20('+this[_0x456b28(0x7f4)][_0x456b28(0x7fe)]+_0x456b28(0x7b5));}}catch(_0x419c0c){let _0x345494={'error':!0x0,'errorLog':_0x419c0c['toString']()};this[_0x456b28(0x4c9)](_0x505609,_0x25ca67,_0x345494),this['logger'][_0x456b28(0x3c9)](this[_0x456b28(0x4a8)]+'\x20('+this['instance'][_0x456b28(0x7fe)]+_0x456b28(0x334)+(_0x419c0c instanceof Error?_0x419c0c[_0x456b28(0x31f)]:JSON[_0x456b28(0x41d)](_0x419c0c,null,0x2)));}}async[a0_0x2101b5(0x51d)](_0x2fa1a4,_0xdce747){const _0x2a7636=a0_0x2101b5;let _0x5a1ff4=_0x2fa1a4[_0x2a7636(0x4e1)];_0xdce747[_0x2a7636(0x6ae)][_0x2a7636(0x4e1)]&&_0xdce747[_0x2a7636(0x6ae)][_0x2a7636(0x4e1)][_0x2a7636(0x3f2)]()!==''&&(_0x5a1ff4=_0xdce747[_0x2a7636(0x6ae)][_0x2a7636(0x4e1)]['trim']()),this['logger'][_0x2a7636(0x667)](this['instanceName']+'\x20('+this['instance'][_0x2a7636(0x7fe)]+_0x2a7636(0x354));let _0x5e42d9={'number':_0x5a1ff4,'options':{'delay':_0xdce747['uazapi'][_0x2a7636(0x64d)],'linkPreview':_0xdce747[_0x2a7636(0x6ae)][_0x2a7636(0x6f9)]},'mediaMessage':{'mediatype':_0xdce747[_0x2a7636(0x6ae)][_0x2a7636(0x88d)],'caption':_0xdce747['uazapi']['caption'],'media':_0xdce747['uazapi'][_0x2a7636(0x4f6)],'fileName':_0xdce747[_0x2a7636(0x6ae)]['fileName']}};try{let _0x304ea0=await this[_0x2a7636(0x1fe)](_0x5e42d9);if(_0x304ea0){let _0x4ee844={'_id':_0x304ea0[_0x2a7636(0x150)]['id'],'_fromMe':_0x304ea0['key'][_0x2a7636(0x4f0)],'_remoteJid':_0x304ea0[_0x2a7636(0x150)]['remoteJid']},_0x3bc231=(0x0,w[_0x2a7636(0x6e2)])(_0x304ea0['message']),_0xef59b6=(0x0,w[_0x2a7636(0x4ac)])(_0x3bc231);_0x2fa1a4[_0x2a7636(0x754)][_0x2a7636(0x156)]=_0xdce747['_id'][_0x2a7636(0x60f)]();let {message_normalized:_0x430d31}=this[_0x2a7636(0x318)](_0x3bc231,_0xef59b6,null);_0x2fa1a4[_0x2a7636(0x754)][_0x2a7636(0x345)]=await _0x430d31;let _0x3643f4={'messageId':_0x304ea0[_0x2a7636(0x150)]['id']},_0x1df047=_0x2fa1a4['chatLog'][_0x2a7636(0x1de)];Object[_0x2a7636(0x6b1)](_0x1df047,_0x4ee844),_0x2fa1a4[_0x2a7636(0x754)]['realVariables']=_0x1df047,this['updateConversation'](_0x2fa1a4,_0xdce747,_0x3643f4);}else{let _0xf10a7f={'error':!0x0};this[_0x2a7636(0x4c9)](_0x2fa1a4,_0xdce747,_0xf10a7f),this[_0x2a7636(0x240)][_0x2a7636(0x3c9)](this['instanceName']+'\x20('+this['instance'][_0x2a7636(0x7fe)]+_0x2a7636(0x60e));}}catch(_0x5f20e7){let _0x5eb36d={'error':!0x0,'errorLog':_0x5f20e7[_0x2a7636(0x60f)]()};this[_0x2a7636(0x4c9)](_0x2fa1a4,_0xdce747,_0x5eb36d),this['logger'][_0x2a7636(0x3c9)](this[_0x2a7636(0x4a8)]+'\x20('+this['instance']['wuid']+_0x2a7636(0x21f)+(_0x5f20e7 instanceof Error?_0x5f20e7[_0x2a7636(0x31f)]:JSON['stringify'](_0x5f20e7,null,0x2)));}}async[a0_0x2101b5(0x679)](_0x39d85a,_0x938cef){const _0x50f173=a0_0x2101b5;let _0x43d1ce=_0x39d85a[_0x50f173(0x4e1)];_0x938cef[_0x50f173(0x6ae)]['remoteJid']&&_0x938cef['uazapi'][_0x50f173(0x4e1)][_0x50f173(0x3f2)]()!==''&&(_0x43d1ce=_0x938cef[_0x50f173(0x6ae)][_0x50f173(0x4e1)][_0x50f173(0x3f2)]()),this[_0x50f173(0x240)]['verbose'](this[_0x50f173(0x4a8)]+'\x20('+this[_0x50f173(0x7f4)]['wuid']+_0x50f173(0x187));let _0x42939e={'number':_0x43d1ce,'options':{'delay':_0x938cef[_0x50f173(0x6ae)][_0x50f173(0x64d)]},'locationMessage':{'name':_0x938cef[_0x50f173(0x6ae)][_0x50f173(0x89c)],'address':_0x938cef[_0x50f173(0x6ae)]['address'],'latitude':_0x938cef['uazapi']['latitude'],'longitude':_0x938cef[_0x50f173(0x6ae)][_0x50f173(0x736)]}};try{let _0x117825=await this[_0x50f173(0x59f)](_0x42939e);if(_0x117825){let _0x2b6a68={'_id':_0x117825[_0x50f173(0x150)]['id'],'_fromMe':_0x117825[_0x50f173(0x150)][_0x50f173(0x4f0)],'_remoteJid':_0x117825['key'][_0x50f173(0x4e1)]},_0x3717d6=(0x0,w[_0x50f173(0x6e2)])(_0x117825[_0x50f173(0x31f)]),_0x5d7a32=(0x0,w[_0x50f173(0x4ac)])(_0x3717d6);_0x39d85a[_0x50f173(0x754)][_0x50f173(0x156)]=_0x938cef[_0x50f173(0x1b8)][_0x50f173(0x60f)]();let {message_normalized:_0x2bbb85}=this[_0x50f173(0x318)](_0x3717d6,_0x5d7a32,null);_0x39d85a[_0x50f173(0x754)][_0x50f173(0x345)]=await _0x2bbb85;let _0x456b95={'messageId':_0x117825[_0x50f173(0x150)]['id']},_0x2264df=_0x39d85a['chatLog'][_0x50f173(0x1de)];Object[_0x50f173(0x6b1)](_0x2264df,_0x2b6a68),_0x39d85a[_0x50f173(0x754)][_0x50f173(0x1de)]=_0x2264df,this[_0x50f173(0x4c9)](_0x39d85a,_0x938cef,_0x456b95);}else{let _0x393aa3={'error':!0x0};this['updateConversation'](_0x39d85a,_0x938cef,_0x393aa3),this[_0x50f173(0x240)][_0x50f173(0x3c9)](this[_0x50f173(0x4a8)]+'\x20('+this['instance'][_0x50f173(0x7fe)]+_0x50f173(0x7d8));}}catch(_0x136cfe){let _0x342e69={'error':!0x0,'errorLog':_0x136cfe['toString']()};this[_0x50f173(0x4c9)](_0x39d85a,_0x938cef,_0x342e69),this[_0x50f173(0x240)][_0x50f173(0x3c9)](this[_0x50f173(0x4a8)]+'\x20('+this[_0x50f173(0x7f4)][_0x50f173(0x7fe)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20'+(_0x136cfe instanceof Error?_0x136cfe[_0x50f173(0x31f)]:JSON['stringify'](_0x136cfe,null,0x2)));}}async[a0_0x2101b5(0x2d0)](_0x49551b,_0xcb7557){const _0x2117d6=a0_0x2101b5;let _0x219ca5=_0x49551b['remoteJid'];_0xcb7557[_0x2117d6(0x6ae)][_0x2117d6(0x4e1)]&&_0xcb7557[_0x2117d6(0x6ae)][_0x2117d6(0x4e1)]['trim']()!==''&&(_0x219ca5=_0xcb7557['uazapi'][_0x2117d6(0x4e1)]['trim']()),this['logger'][_0x2117d6(0x667)](this[_0x2117d6(0x4a8)]+'\x20('+this[_0x2117d6(0x7f4)]['wuid']+_0x2117d6(0x33b));let _0x3fd9d2={'number':_0x219ca5,'options':{'delay':_0xcb7557['uazapi']['delay']},'audioMessage':{'audio':_0xcb7557[_0x2117d6(0x6ae)][_0x2117d6(0x6d8)]}};try{let _0x2219db=await this['audioWhatsapp'](_0x3fd9d2);if(_0x2219db){let _0x30497d={'_id':_0x2219db[_0x2117d6(0x150)]['id'],'_fromMe':_0x2219db[_0x2117d6(0x150)]['fromMe'],'_remoteJid':_0x2219db[_0x2117d6(0x150)][_0x2117d6(0x4e1)]},_0x375cbb=(0x0,w['normalizeMessageContent'])(_0x2219db[_0x2117d6(0x31f)]),_0xfce871=(0x0,w[_0x2117d6(0x4ac)])(_0x375cbb);_0x49551b[_0x2117d6(0x754)][_0x2117d6(0x156)]=_0xcb7557[_0x2117d6(0x1b8)]['toString']();let {message_normalized:_0x91624c}=this[_0x2117d6(0x318)](_0x375cbb,_0xfce871,null);_0x49551b[_0x2117d6(0x754)][_0x2117d6(0x345)]=await _0x91624c;let _0x174cc9={'messageId':_0x2219db[_0x2117d6(0x150)]['id']},_0x19ec6f=_0x49551b[_0x2117d6(0x754)][_0x2117d6(0x1de)];Object['assign'](_0x19ec6f,_0x30497d),_0x49551b[_0x2117d6(0x754)]['realVariables']=_0x19ec6f,this[_0x2117d6(0x4c9)](_0x49551b,_0xcb7557,_0x174cc9);}else{let _0x15a752={'error':!0x0};this[_0x2117d6(0x4c9)](_0x49551b,_0xcb7557,_0x15a752),this[_0x2117d6(0x240)][_0x2117d6(0x3c9)](this[_0x2117d6(0x4a8)]+'\x20('+this[_0x2117d6(0x7f4)][_0x2117d6(0x7fe)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.');}}catch(_0x5b45a0){let _0x18c723={'error':!0x0,'errorLog':_0x5b45a0[_0x2117d6(0x60f)]()};this[_0x2117d6(0x4c9)](_0x49551b,_0xcb7557,_0x18c723),this[_0x2117d6(0x240)]['error'](this['instanceName']+'\x20('+this[_0x2117d6(0x7f4)][_0x2117d6(0x7fe)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20'+(_0x5b45a0 instanceof Error?_0x5b45a0[_0x2117d6(0x31f)]:JSON[_0x2117d6(0x41d)](_0x5b45a0,null,0x2)));}}async[a0_0x2101b5(0x428)](_0x56a95e,_0x2044cf){const _0x25ea2a=a0_0x2101b5;let _0x272e7f=_0x56a95e[_0x25ea2a(0x4e1)];_0x2044cf[_0x25ea2a(0x6ae)]['remoteJid']&&_0x2044cf['uazapi']['remoteJid']['trim']()!==''&&(_0x272e7f=_0x2044cf[_0x25ea2a(0x6ae)][_0x25ea2a(0x4e1)][_0x25ea2a(0x3f2)]()),this[_0x25ea2a(0x240)][_0x25ea2a(0x667)](this[_0x25ea2a(0x4a8)]+'\x20('+this[_0x25ea2a(0x7f4)][_0x25ea2a(0x7fe)]+_0x25ea2a(0x64e));let _0x3c7c6c={'number':_0x272e7f,'options':{'delay':_0x2044cf[_0x25ea2a(0x6ae)][_0x25ea2a(0x64d)]},'contactMessage':[{'fullName':_0x2044cf[_0x25ea2a(0x6ae)]['fullName'],'phoneNumber':_0x2044cf[_0x25ea2a(0x6ae)][_0x25ea2a(0x3b1)]}]};try{let _0x39c095=await this[_0x25ea2a(0x1ee)](_0x3c7c6c);if(_0x39c095){let _0x7f4dcd={'_id':_0x39c095['key']['id'],'_fromMe':_0x39c095['key'][_0x25ea2a(0x4f0)],'_remoteJid':_0x39c095[_0x25ea2a(0x150)][_0x25ea2a(0x4e1)]},_0x5d57e2=(0x0,w[_0x25ea2a(0x6e2)])(_0x39c095[_0x25ea2a(0x31f)]),_0x235e8d=(0x0,w['getContentType'])(_0x5d57e2);_0x56a95e['chatLog'][_0x25ea2a(0x156)]=_0x2044cf['_id'][_0x25ea2a(0x60f)]();let {message_normalized:_0x27234e}=this[_0x25ea2a(0x318)](_0x5d57e2,_0x235e8d,null);_0x56a95e[_0x25ea2a(0x754)]['lastSendMessage']=await _0x27234e;let _0x2d2de8={'messageId':_0x39c095[_0x25ea2a(0x150)]['id']},_0x3cbe14=_0x56a95e[_0x25ea2a(0x754)]['realVariables'];Object[_0x25ea2a(0x6b1)](_0x3cbe14,_0x7f4dcd),_0x56a95e[_0x25ea2a(0x754)][_0x25ea2a(0x1de)]=_0x3cbe14,this[_0x25ea2a(0x4c9)](_0x56a95e,_0x2044cf,_0x2d2de8);}else{let _0x14cc2d={'error':!0x0};this[_0x25ea2a(0x4c9)](_0x56a95e,_0x2044cf,_0x14cc2d),this[_0x25ea2a(0x240)][_0x25ea2a(0x3c9)](this['instanceName']+'\x20('+this['instance'][_0x25ea2a(0x7fe)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.');}}catch(_0x2468fc){let _0x501b59={'error':!0x0,'errorLog':_0x2468fc[_0x25ea2a(0x60f)]()};this[_0x25ea2a(0x4c9)](_0x56a95e,_0x2044cf,_0x501b59),this[_0x25ea2a(0x240)][_0x25ea2a(0x3c9)](this[_0x25ea2a(0x4a8)]+'\x20('+this[_0x25ea2a(0x7f4)][_0x25ea2a(0x7fe)]+_0x25ea2a(0x7bf)+(_0x2468fc instanceof Error?_0x2468fc[_0x25ea2a(0x31f)]:JSON['stringify'](_0x2468fc,null,0x2)));}}[a0_0x2101b5(0x527)](_0x52ab9a,_0x6c83d2){const _0x519cc0=a0_0x2101b5;for(let _0x4eafa5 of _0x52ab9a)_0x4eafa5['option']&&(_0x4eafa5[_0x519cc0(0x62d)]=this[_0x519cc0(0x6ed)](_0x4eafa5[_0x519cc0(0x62d)],_0x6c83d2)),_0x4eafa5[_0x519cc0(0x7c5)]&&(_0x4eafa5[_0x519cc0(0x7c5)]=this['replaceVariables'](_0x4eafa5[_0x519cc0(0x7c5)],_0x6c83d2));}async[a0_0x2101b5(0x53e)](_0x604deb,_0x35d322){const _0x311897=a0_0x2101b5;let _0x1ceb60=_0x604deb[_0x311897(0x4e1)];_0x35d322[_0x311897(0x6ae)][_0x311897(0x4e1)]&&_0x35d322[_0x311897(0x6ae)]['remoteJid'][_0x311897(0x3f2)]()!==''&&(_0x1ceb60=_0x35d322[_0x311897(0x6ae)][_0x311897(0x4e1)][_0x311897(0x3f2)]()),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x311897(0x7f4)]['wuid']+'):\x20Enviando\x20enquete');let _0x3d3259=_0x604deb[_0x311897(0x256)][_0x311897(0x285)](_0x476e57=>_0x476e57[_0x311897(0x678)]===_0x35d322[_0x311897(0x1b8)])['sort']((_0x516353,_0x1a65a6)=>_0x516353[_0x311897(0x664)]-_0x1a65a6[_0x311897(0x664)]);this[_0x311897(0x527)](_0x3d3259,_0x604deb[_0x311897(0x754)]['realVariables']);let _0x36e5a6=_0x3d3259[_0x311897(0x5e6)](_0xde767b=>_0xde767b[_0x311897(0x62d)]),_0x3fb39e={'number':_0x1ceb60,'menuMessage':{'type':_0x35d322[_0x311897(0x6ae)][_0x311897(0x693)]||_0x311897(0x5fd),'text':_0x35d322[_0x311897(0x6ae)][_0x311897(0x1b9)]||_0x35d322[_0x311897(0x6ae)][_0x311897(0x89c)],'footerText':_0x35d322[_0x311897(0x6ae)][_0x311897(0x741)],'buttonText':_0x35d322[_0x311897(0x6ae)][_0x311897(0x7c7)],'selectableCount':0x1,'choices':_0x36e5a6},'options':{'delay':_0x35d322['uazapi']['delay']}};try{let _0x3ba777=await this['menuMessage'](_0x3fb39e);if(_0x3ba777){let _0x285dcb={'_id':_0x3ba777[_0x311897(0x150)]['id'],'_fromMe':_0x3ba777[_0x311897(0x150)][_0x311897(0x4f0)],'_remoteJid':_0x3ba777[_0x311897(0x150)][_0x311897(0x4e1)]};_0x35d322[_0x311897(0x6ae)][_0x311897(0x637)]===!0x0&&(_0x604deb['status']=_0x311897(0x8ad),this[_0x311897(0x240)][_0x311897(0x667)](this[_0x311897(0x4a8)]+'\x20('+this[_0x311897(0x7f4)][_0x311897(0x7fe)]+'):\x20conversation.status:\x20'+_0x604deb[_0x311897(0x352)])),this[_0x311897(0x240)][_0x311897(0x667)](this[_0x311897(0x4a8)]+'\x20('+this[_0x311897(0x7f4)][_0x311897(0x7fe)]+_0x311897(0x766)+(_0x35d322['uazapi'][_0x311897(0x89c)]||_0x35d322[_0x311897(0x6ae)][_0x311897(0x1b9)])),_0x604deb[_0x311897(0x681)]=_0x3ba777[_0x311897(0x150)]['id'],_0x604deb['waitingMenu_text']=_0x35d322[_0x311897(0x6ae)]['name']||_0x35d322[_0x311897(0x6ae)]['text'],_0x604deb[_0x311897(0x2fa)]=_0x3d3259,_0x35d322[_0x311897(0x6ae)][_0x311897(0x6be)]&&(_0x604deb[_0x311897(0x888)]=_0x35d322[_0x311897(0x6ae)][_0x311897(0x6be)]),this[_0x311897(0x240)][_0x311897(0x667)](this[_0x311897(0x4a8)]+'\x20('+this[_0x311897(0x7f4)]['wuid']+'):\x20conversation.waitingMenu_name'+_0x604deb[_0x311897(0x760)]);let _0x28eb5a=(0x0,w[_0x311897(0x6e2)])(_0x3ba777['message']),_0x2d64f0=(0x0,w[_0x311897(0x4ac)])(_0x28eb5a);_0x604deb['chatLog'][_0x311897(0x156)]=_0x35d322['_id'][_0x311897(0x60f)]();let {message_normalized:_0x3cd37d}=this[_0x311897(0x318)](_0x28eb5a,_0x2d64f0,null);_0x604deb['chatLog']['lastSendMessage']=await _0x3cd37d;let _0x205459={'messageId':_0x3ba777[_0x311897(0x150)]['id']},_0x23a225=_0x604deb[_0x311897(0x754)]['realVariables'];Object['assign'](_0x23a225,_0x285dcb),_0x604deb[_0x311897(0x754)]['realVariables']=_0x23a225,this[_0x311897(0x4c9)](_0x604deb,_0x35d322,_0x205459);}else{let _0x1f7ecf={'error':!0x0};this[_0x311897(0x4c9)](_0x604deb,_0x35d322,_0x1f7ecf),this[_0x311897(0x240)][_0x311897(0x3c9)](this[_0x311897(0x4a8)]+'\x20('+this[_0x311897(0x7f4)][_0x311897(0x7fe)]+_0x311897(0x4aa));}}catch(_0x57a58a){let _0x5c56ea={'error':!0x0,'errorLog':_0x57a58a instanceof Error?_0x57a58a[_0x311897(0x31f)]:JSON[_0x311897(0x41d)](_0x57a58a,null,0x2)};this['updateConversation'](_0x604deb,_0x35d322,_0x5c56ea),this[_0x311897(0x240)][_0x311897(0x3c9)](this[_0x311897(0x4a8)]+'\x20('+this[_0x311897(0x7f4)]['wuid']+_0x311897(0x184)+(_0x57a58a instanceof Error?_0x57a58a[_0x311897(0x31f)]:JSON[_0x311897(0x41d)](_0x57a58a,null,0x2)));}}async[a0_0x2101b5(0x1d9)](_0x38f513,_0x490c9a){const _0x302893=a0_0x2101b5;this[_0x302893(0x240)]['verbose'](this[_0x302893(0x4a8)]+'\x20('+this[_0x302893(0x7f4)][_0x302893(0x7fe)]+_0x302893(0x8b6));let _0x3e8493=_0x38f513[_0x302893(0x754)]['blockLogs'][_0x302893(0x604)](_0x127b91=>_0x127b91[_0x302893(0x678)][_0x302893(0x60f)]()===_0x490c9a[_0x302893(0x6ae)]['blockId'][_0x302893(0x60f)]()),_0x37fd13={'id':_0x3e8493['messageId'],'remoteJid':_0x3e8493[_0x302893(0x4e1)],'fromMe':_0x3e8493[_0x302893(0x4f0)]};try{let _0x9f3ee2=await this[_0x302893(0x451)](_0x37fd13);if(_0x9f3ee2){let _0x331032=(0x0,w[_0x302893(0x6e2)])(_0x9f3ee2[_0x302893(0x31f)]),_0x326579=(0x0,w[_0x302893(0x4ac)])(_0x331032);_0x38f513[_0x302893(0x754)]['lastBlockId']=_0x490c9a['_id']['toString']();let {message_normalized:_0x573b78}=this[_0x302893(0x318)](_0x331032,_0x326579,null);_0x38f513['chatLog'][_0x302893(0x345)]=await _0x573b78;let _0x3491c0={};this['updateConversation'](_0x38f513,_0x490c9a,_0x3491c0);}else{let _0x23f3ae={'error':!0x0};this[_0x302893(0x4c9)](_0x38f513,_0x490c9a,_0x23f3ae),this[_0x302893(0x240)][_0x302893(0x3c9)](this[_0x302893(0x4a8)]+'\x20('+this[_0x302893(0x7f4)][_0x302893(0x7fe)]+_0x302893(0x44e));}}catch(_0x3ecb9b){let _0x183b2f={'error':!0x0,'errorLog':_0x3ecb9b instanceof Error?_0x3ecb9b[_0x302893(0x31f)]:JSON[_0x302893(0x41d)](_0x3ecb9b,null,0x2)};this[_0x302893(0x4c9)](_0x38f513,_0x490c9a,_0x183b2f),this[_0x302893(0x240)]['error'](this[_0x302893(0x4a8)]+'\x20('+this[_0x302893(0x7f4)][_0x302893(0x7fe)]+'):\x20Falha\x20ao\x20deletar\x20mensagem:\x20'+(_0x3ecb9b instanceof Error?_0x3ecb9b['message']:JSON['stringify'](_0x3ecb9b,null,0x2)));}}async[a0_0x2101b5(0x2e9)](_0x2309f1,_0x48c49b){const _0xc6f00b=a0_0x2101b5;if(_0x2309f1['name']||(_0x2309f1[_0xc6f00b(0x89c)]=(0x0,Y['v4'])()),_0x48c49b!==Ri&&_0x2309f1?.[_0xc6f00b(0x213)])throw new m(_0xc6f00b(0x786));if('_id'in _0x2309f1&&_0xc6f00b(0x235)in _0x2309f1)return this[_0xc6f00b(0x5d3)](_0x2309f1[_0xc6f00b(0x235)],_0x2309f1[_0xc6f00b(0x1b8)]);this[_0xc6f00b(0x240)][_0xc6f00b(0x667)](this[_0xc6f00b(0x4a8)]+'\x20('+this[_0xc6f00b(0x7f4)][_0xc6f00b(0x7fe)]+'):\x20Criando\x20fluxo...');let _0x5034ae=this['getUniqueFlowName'](_0x2309f1[_0xc6f00b(0x89c)]),_0x44a2d0=new ge['Types'][(_0xc6f00b(0x3db))](),_0x4c7179={'_id':_0x44a2d0,'default':!0x0,'title':'Início','x':0x0,'y':0x0},_0xd02092={'_id':new ge[(_0xc6f00b(0x4c4))]['ObjectId'](),'order':0x1,'groupId':_0x44a2d0[_0xc6f00b(0x60f)](),'type':_0xc6f00b(0x773)},_0x23b9af=this[_0xc6f00b(0x7f4)][_0xc6f00b(0x7fe)],_0xc18346={'_id':(0x0,Y['v4'])(),'owner':_0x23b9af,'name':_0x5034ae,'whoCanEdit':[_0x23b9af],'whoCanUse':[_0x23b9af],'groups':[_0x4c7179],'blocks':[_0xd02092],..._0x2309f1};try{let _0x2743be=await this['repository'][_0xc6f00b(0x399)][_0xc6f00b(0x400)](_0xc18346);return await this[_0xc6f00b(0x172)](),_0x2743be;}catch(_0x24c779){let _0x59f2c6=_0xc6f00b(0x73f),_0x3a906d=_0x24c779 instanceof Error?_0x24c779[_0xc6f00b(0x31f)]:typeof _0x24c779==_0xc6f00b(0x69d)?JSON['stringify'](_0x24c779):_0x24c779,_0x6c2399=_0x59f2c6+':\x20'+_0x3a906d;throw this[_0xc6f00b(0x240)][_0xc6f00b(0x3c9)](this[_0xc6f00b(0x4a8)]+'\x20('+this[_0xc6f00b(0x7f4)][_0xc6f00b(0x7fe)]+_0xc6f00b(0x33f)+_0x6c2399),new m(_0x6c2399);}}async[a0_0x2101b5(0x5d3)](_0x5420e5,_0xbc8be){const _0x1c1453=a0_0x2101b5;try{this['logger'][_0x1c1453(0x667)](this[_0x1c1453(0x4a8)]+'\x20('+this[_0x1c1453(0x7f4)]['wuid']+_0x1c1453(0x260));let _0x1f6646=await this[_0x1c1453(0x43b)][_0x1c1453(0x399)][_0x1c1453(0x505)]({'where':{'_id':_0xbc8be,'owner':_0x5420e5}});if(!_0x1f6646)throw new m(_0x1c1453(0x585));if(_0x1f6646[_0x1c1453(0x72e)]===!0x1&&!_0x1f6646[_0x1c1453(0x213)])throw new m(_0x1c1453(0x2a3));let _0xa0572d=new Set(_0x1f6646[_0x1c1453(0x4f1)]??[]);_0xa0572d['add'](this[_0x1c1453(0x7f4)][_0x1c1453(0x7fe)]);let _0x10fae2=await this[_0x1c1453(0x43b)][_0x1c1453(0x399)][_0x1c1453(0x858)](_0xbc8be,{..._0x1f6646,'whoCanUse':Array['from'](_0xa0572d)});return await this['synchronizeAndMapFlows'](),_0x10fae2;}catch(_0x5a01e6){let _0x315a1f=_0x1c1453(0x8a6),_0x2e543a=_0x5a01e6 instanceof Error?_0x5a01e6[_0x1c1453(0x31f)]:typeof _0x5a01e6=='object'?JSON[_0x1c1453(0x41d)](_0x5a01e6):_0x5a01e6,_0x49b748=_0x315a1f+':\x20'+_0x2e543a;throw this[_0x1c1453(0x240)][_0x1c1453(0x3c9)](this[_0x1c1453(0x4a8)]+'\x20('+this[_0x1c1453(0x7f4)][_0x1c1453(0x7fe)]+_0x1c1453(0x33f)+_0x49b748),new m(_0x49b748);}}[a0_0x2101b5(0x4c0)](_0xc6e05d){const _0x3f755d=a0_0x2101b5;let _0x5a8660=_0xc6e05d,_0x1286f3=0x1;for(;this[_0x3f755d(0x655)]['flows']['some'](_0x45f4c9=>_0x45f4c9[_0x3f755d(0x89c)]===_0x5a8660);)_0x1286f3++,_0x5a8660=_0xc6e05d+'\x20('+_0x1286f3+')';return _0x5a8660;}async[a0_0x2101b5(0x146)](_0x4b13a7){const _0x36ace6=a0_0x2101b5;try{if(this[_0x36ace6(0x240)][_0x36ace6(0x667)](this[_0x36ace6(0x4a8)]+'\x20('+this[_0x36ace6(0x7f4)]['wuid']+_0x36ace6(0x275)+_0x4b13a7[_0x36ace6(0x1b8)]+_0x36ace6(0x8b7)+_0x4b13a7[_0x36ace6(0x4c5)]),!this[_0x36ace6(0x655)][_0x36ace6(0x145)][_0x36ace6(0x604)](_0x58730a=>_0x58730a[_0x36ace6(0x1b8)]===_0x4b13a7[_0x36ace6(0x1b8)]))throw this[_0x36ace6(0x240)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x36ace6(0x7fe)]+_0x36ace6(0x35a)+_0x4b13a7[_0x36ace6(0x1b8)]+'\x27\x20não\x20encontrado'),new m(_0x36ace6(0x725));let _0x5b7fd5=await this[_0x36ace6(0x43b)]['flow'][_0x36ace6(0x505)]({'where':{'_id':_0x4b13a7[_0x36ace6(0x1b8)]}});if(!_0x5b7fd5)throw new m(_0x36ace6(0x698));if(this[_0x36ace6(0x7f4)]['wuid']===_0x5b7fd5[_0x36ace6(0x235)]){this[_0x36ace6(0x240)][_0x36ace6(0x667)](this[_0x36ace6(0x4a8)]+'\x20('+this[_0x36ace6(0x7f4)]['wuid']+_0x36ace6(0x6d7)+_0x4b13a7[_0x36ace6(0x1b8)]+'\x27\x20do\x20banco\x20de\x20dados...');let _0x3ae4b0=await this[_0x36ace6(0x43b)][_0x36ace6(0x399)][_0x36ace6(0x66e)]({'where':{'_id':_0x4b13a7[_0x36ace6(0x1b8)]}});return await this[_0x36ace6(0x172)](),_0x3ae4b0;}return this['logger'][_0x36ace6(0x667)](this[_0x36ace6(0x4a8)]+'\x20('+this[_0x36ace6(0x7f4)][_0x36ace6(0x7fe)]+_0x36ace6(0x343)+this['instance'][_0x36ace6(0x7fe)]+_0x36ace6(0x27a)+_0x4b13a7['_id']+_0x36ace6(0x2c2)),_0x5b7fd5[_0x36ace6(0x4f1)]=(_0x5b7fd5[_0x36ace6(0x4f1)]??[])[_0x36ace6(0x285)](_0x28f647=>_0x28f647!==this[_0x36ace6(0x7f4)]['wuid']),_0x5b7fd5[_0x36ace6(0x1b0)]=(_0x5b7fd5[_0x36ace6(0x1b0)]??[])[_0x36ace6(0x285)](_0x12d7e0=>_0x12d7e0!==this['instance'][_0x36ace6(0x7fe)]),_0x5b7fd5['whoCanEdit']['length']===0x0&&_0x5b7fd5[_0x36ace6(0x4f1)][_0x36ace6(0x608)]>0x0&&(_0x5b7fd5[_0x36ace6(0x1b0)][_0x36ace6(0x2a9)](_0x5b7fd5[_0x36ace6(0x4f1)][0x0]),this['logger'][_0x36ace6(0x667)](this[_0x36ace6(0x4a8)]+'\x20('+this[_0x36ace6(0x7f4)][_0x36ace6(0x7fe)]+'):\x20Adicionando\x20\x27'+_0x5b7fd5[_0x36ace6(0x4f1)][0x0]+_0x36ace6(0x647)+_0x4b13a7[_0x36ace6(0x1b8)]+_0x36ace6(0x2c2))),await this[_0x36ace6(0x43b)]['flow'][_0x36ace6(0x858)](_0x5b7fd5['_id'],_0x5b7fd5),await this['synchronizeAndMapFlows'](),{'message':'Fluxo\x20\x27'+_0x4b13a7[_0x36ace6(0x89c)]+_0x36ace6(0x232)};}catch(_0x51499e){return this[_0x36ace6(0x240)][_0x36ace6(0x3c9)](this['instanceName']+'\x20('+this[_0x36ace6(0x7f4)][_0x36ace6(0x7fe)]+'):\x20Erro\x20ao\x20deletar\x20fluxo\x20'+(_0x51499e instanceof Error?_0x51499e[_0x36ace6(0x31f)]:JSON[_0x36ace6(0x41d)](_0x51499e,null,0x2))),{'message':_0x36ace6(0x39d)+(_0x51499e instanceof Error?_0x51499e[_0x36ace6(0x31f)]:JSON[_0x36ace6(0x41d)](_0x51499e,null,0x2))};}}async[a0_0x2101b5(0x330)](_0x38d0c8){const _0x20c057=a0_0x2101b5;try{if(this[_0x20c057(0x240)]['info'](this[_0x20c057(0x4a8)]+'\x20('+this[_0x20c057(0x7f4)][_0x20c057(0x7fe)]+_0x20c057(0x2a0)+_0x38d0c8),!this[_0x20c057(0x655)]&&(await this['getAutomateSystem'](),!this[_0x20c057(0x655)]))return null;let _0x1d4049=await this['repository'][_0x20c057(0x399)][_0x20c057(0x505)]({'where':{'_id':_0x38d0c8}});if(!_0x1d4049)throw new m('Fluxo\x20id\x20\x27'+_0x38d0c8+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.');if(!(_0x1d4049[_0x20c057(0x213)]||_0x1d4049[_0x20c057(0x4f1)]?.[_0x20c057(0x267)](this[_0x20c057(0x7f4)][_0x20c057(0x7fe)])))throw new m(_0x20c057(0x35b)+name+'\x27');_0x1d4049['globalShow']&&!_0x1d4049['whoCanUse']?.[_0x20c057(0x267)](this[_0x20c057(0x7f4)][_0x20c057(0x7fe)])&&(_0x1d4049['whoCanUse']=[..._0x1d4049[_0x20c057(0x4f1)]??[],this[_0x20c057(0x7f4)][_0x20c057(0x7fe)]],await this['repository'][_0x20c057(0x399)][_0x20c057(0x858)](_0x1d4049[_0x20c057(0x1b8)],_0x1d4049),this[_0x20c057(0x172)]());let _0xf1d551=this['AutomateSystem']?.['customFields'][_0x20c057(0x5e6)](_0xc200fe=>_0xc200fe[_0x20c057(0x89c)]),_0x126fcf=[_0x20c057(0x2ac),_0x20c057(0x24f),_0x20c057(0x7ca),_0x20c057(0x246),'status',_0x20c057(0x30b),'responsavelid',_0x20c057(0x8c7),_0x20c057(0x4a7),_0x20c057(0x5a4),_0x20c057(0x143)];_0x1d4049[_0x20c057(0x2da)]=_0x1d4049['variables'][_0x20c057(0x285)](_0x3c58ce=>!(_0x3c58ce[_0x20c057(0x234)]==='leadInfo'||_0x3c58ce[_0x20c057(0x7f1)])),_0x126fcf[_0x20c057(0x600)](_0x381eda=>{const _0x58abff=_0x20c057;_0x1d4049[_0x58abff(0x2da)][_0x58abff(0x2a9)]({'folder':'leadInfo','name':_0x381eda,'value':'','doc':'','leadInfo':!0x0});}),_0xf1d551[_0x20c057(0x600)](_0x162913=>{const _0x23cb79=_0x20c057;let _0x243eb1=_0x1d4049[_0x23cb79(0x2da)][_0x23cb79(0x84f)](_0xe4a3c4=>_0xe4a3c4[_0x23cb79(0x89c)]===_0x162913);_0x243eb1===-0x1?_0x1d4049[_0x23cb79(0x2da)][_0x23cb79(0x2a9)]({'folder':_0x23cb79(0x7f1),'name':_0x162913,'value':'','doc':'','leadInfo':!0x0}):(_0x1d4049['variables'][_0x243eb1][_0x23cb79(0x234)]='leadInfo',_0x1d4049[_0x23cb79(0x2da)][_0x243eb1][_0x23cb79(0x7f1)]=!0x0);}),_0x1d4049[_0x20c057(0x4a5)]&&_0x1d4049[_0x20c057(0x4a5)][_0x20c057(0x608)]>0x0&&_0x1d4049[_0x20c057(0x4a5)][_0x20c057(0x600)](_0x166201=>{const _0x5df9ff=_0x20c057;_0x166201[_0x5df9ff(0x29c)]&&_0x166201[_0x5df9ff(0x542)]&&_0x166201['groupId']===_0x166201[_0x5df9ff(0x542)]&&(_0x166201['next_groupId']=null);});let _0x6d7b37=await this['repository']['flow'][_0x20c057(0x858)](_0x1d4049[_0x20c057(0x1b8)],_0x1d4049);if(!_0x6d7b37)throw new Error(_0x20c057(0x6dd));return _0x6d7b37;}catch(_0xbfc10c){let _0x391d82=_0x20c057(0x787),_0x109713=_0xbfc10c instanceof Error?_0xbfc10c[_0x20c057(0x31f)]:typeof _0xbfc10c==_0x20c057(0x69d)?JSON[_0x20c057(0x41d)](_0xbfc10c):_0xbfc10c,_0x5d129f=_0x391d82+':\x20'+_0x109713;throw this[_0x20c057(0x240)]['error'](this[_0x20c057(0x4a8)]+'\x20('+this[_0x20c057(0x7f4)][_0x20c057(0x7fe)]+_0x20c057(0x33f)+_0x5d129f),new m(_0x5d129f);}}async[a0_0x2101b5(0x4c3)](){const _0x1c5d5b=a0_0x2101b5;try{this[_0x1c5d5b(0x240)][_0x1c5d5b(0x667)](this[_0x1c5d5b(0x4a8)]+'\x20('+this['instance'][_0x1c5d5b(0x7fe)]+_0x1c5d5b(0x23f)),await this['synchronizeAndMapFlows']();let _0x570fe5=await this[_0x1c5d5b(0x43b)][_0x1c5d5b(0x399)]['findAll']({'where':{'globalShow':!0x0}});return[...this[_0x1c5d5b(0x655)]['flows'],..._0x570fe5];}catch(_0x2c1d05){return this[_0x1c5d5b(0x240)][_0x1c5d5b(0x3c9)](this[_0x1c5d5b(0x4a8)]+'\x20('+this[_0x1c5d5b(0x7f4)][_0x1c5d5b(0x7fe)]+_0x1c5d5b(0x41f)+(_0x2c1d05 instanceof Error?_0x2c1d05[_0x1c5d5b(0x31f)]:JSON[_0x1c5d5b(0x41d)](_0x2c1d05,null,0x2))),{'message':_0x1c5d5b(0x42d)+(_0x2c1d05 instanceof Error?_0x2c1d05['message']:String(_0x2c1d05))};}}async['editFlow'](_0x3538eb,_0x3004be){const _0x2fa158=a0_0x2101b5;try{this[_0x2fa158(0x240)][_0x2fa158(0x667)](this[_0x2fa158(0x4a8)]+'\x20('+this[_0x2fa158(0x7f4)][_0x2fa158(0x7fe)]+_0x2fa158(0x770));let _0x1daff7=this[_0x2fa158(0x655)][_0x2fa158(0x145)][_0x2fa158(0x604)](_0x22e980=>_0x22e980[_0x2fa158(0x1b8)]===_0x3538eb[_0x2fa158(0x1b8)]);if(!_0x1daff7)throw this[_0x2fa158(0x240)]['verbose'](this[_0x2fa158(0x4a8)]+'\x20('+this[_0x2fa158(0x7f4)][_0x2fa158(0x7fe)]+_0x2fa158(0x35a)+_0x3538eb['_id']+_0x2fa158(0x83c)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x282a14=await this[_0x2fa158(0x43b)]['flow'][_0x2fa158(0x505)]({'where':{'_id':_0x3538eb['_id']}});if(!_0x282a14||!_0x282a14[_0x2fa158(0x4f1)]?.[_0x2fa158(0x267)](this[_0x2fa158(0x7f4)]['wuid']))throw this[_0x2fa158(0x240)][_0x2fa158(0x3c9)](this['instanceName']+'\x20('+this[_0x2fa158(0x7f4)][_0x2fa158(0x7fe)]+_0x2fa158(0x486)+_0x3538eb[_0x2fa158(0x1b8)]+_0x2fa158(0x242)),new m(_0x2fa158(0x353)+_0x3538eb['_id']+_0x2fa158(0x242));let _0x515a4d=this[_0x2fa158(0x655)][_0x2fa158(0x145)][_0x2fa158(0x84f)](_0x15e461=>_0x15e461[_0x2fa158(0x1b8)]===_0x1daff7[_0x2fa158(0x1b8)]);if(_0x515a4d!==-0x1){let _0x1ea704=this['AutomateSystem'][_0x2fa158(0x145)][_0x515a4d];if(_0x1ea704[_0x2fa158(0x89c)]=_0x3538eb[_0x2fa158(0x89c)]??_0x1ea704[_0x2fa158(0x89c)],_0x1ea704[_0x2fa158(0x7ae)]=_0x3538eb[_0x2fa158(0x7ae)]??_0x1ea704[_0x2fa158(0x7ae)],_0x1ea704[_0x2fa158(0x4ed)]=_0x3538eb['testingWith']??_0x1ea704[_0x2fa158(0x4ed)],_0x1ea704[_0x2fa158(0x23c)]=_0x3538eb[_0x2fa158(0x2ce)]??_0x1ea704['startCommand'],_0x1ea704[_0x2fa158(0x23e)]=_0x3538eb[_0x2fa158(0x23e)]??_0x1ea704[_0x2fa158(0x23e)],_0x1ea704['readMessages']=_0x3538eb[_0x2fa158(0x82e)]??_0x1ea704[_0x2fa158(0x82e)],_0x3538eb['default']&&this[_0x2fa158(0x655)][_0x2fa158(0x145)][_0x2fa158(0x600)]((_0x36fc5a,_0x4ae202)=>{_0x4ae202!==_0x515a4d&&(_0x36fc5a['default']=!0x1);}),this[_0x2fa158(0x655)][_0x2fa158(0x145)][_0x515a4d]=_0x1ea704,!await this[_0x2fa158(0x43b)][_0x2fa158(0x1ff)][_0x2fa158(0x842)]({'flows':this['AutomateSystem'][_0x2fa158(0x145)]},this[_0x2fa158(0x7f4)][_0x2fa158(0x7fe)]))throw new m('Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.');}let _0x515cea=[_0x2fa158(0x4c5),_0x2fa158(0x850),_0x2fa158(0x849),_0x2fa158(0x2f4)];for(let _0x315c80 of _0x515cea)delete _0x3538eb[_0x315c80];if(_0x282a14['whoCanEdit']?.['includes'](this[_0x2fa158(0x7f4)]['wuid'])||(_0x3538eb={'_id':_0x3538eb[_0x2fa158(0x1b8)]}),_0x3004be!==Ri&&_0x3538eb?.[_0x2fa158(0x213)]&&!_0x282a14?.['globalShow'])throw new m(_0x2fa158(0x287));let _0x1f594f=new Set(_0x3538eb[_0x2fa158(0x1b0)]??_0x282a14[_0x2fa158(0x1b0)]);_0x1f594f[_0x2fa158(0x6c5)](_0x282a14['owner']);let _0xa58250=new Set(_0x3538eb[_0x2fa158(0x4f1)]??_0x282a14[_0x2fa158(0x4f1)]??[]);_0x1f594f['forEach'](_0x504135=>_0xa58250[_0x2fa158(0x6c5)](_0x504135)),_0xa58250[_0x2fa158(0x6c5)](_0x282a14['owner']),this[_0x2fa158(0x240)][_0x2fa158(0x667)](this[_0x2fa158(0x4a8)]+'\x20('+this['instance'][_0x2fa158(0x7fe)]+_0x2fa158(0x671)+Array[_0x2fa158(0x50f)](_0x1f594f)),this['logger']['verbose'](this[_0x2fa158(0x4a8)]+'\x20('+this[_0x2fa158(0x7f4)][_0x2fa158(0x7fe)]+_0x2fa158(0x2bb)+Array[_0x2fa158(0x50f)](_0xa58250));let _0x24c423=await this[_0x2fa158(0x53f)](Array[_0x2fa158(0x50f)](_0xa58250)),_0x427662=Array[_0x2fa158(0x50f)](_0x1f594f)[_0x2fa158(0x285)](_0x2aad9b=>_0x24c423[_0x2fa158(0x267)](_0x2aad9b)),_0x4ac44b=Array['from'](_0xa58250)[_0x2fa158(0x285)](_0x13207f=>_0x24c423[_0x2fa158(0x267)](_0x13207f));this[_0x2fa158(0x240)]['verbose'](this['instanceName']+'\x20('+this[_0x2fa158(0x7f4)]['wuid']+_0x2fa158(0x481)+_0x427662),this[_0x2fa158(0x240)][_0x2fa158(0x667)](this[_0x2fa158(0x4a8)]+'\x20('+this['instance'][_0x2fa158(0x7fe)]+_0x2fa158(0x37a)+_0x4ac44b);let _0x4e90f1={..._0x282a14,..._0x3538eb,'whoCanEdit':_0x427662,'whoCanUse':_0x4ac44b},_0x3791ab=await this[_0x2fa158(0x43b)][_0x2fa158(0x399)][_0x2fa158(0x858)](_0x282a14[_0x2fa158(0x1b8)],_0x4e90f1);return await this[_0x2fa158(0x172)](),_0x3791ab;}catch(_0x1d7382){let _0x406959=_0x2fa158(0x339),_0x5d23fc=_0x1d7382 instanceof Error?_0x1d7382[_0x2fa158(0x31f)]:typeof _0x1d7382==_0x2fa158(0x69d)?JSON[_0x2fa158(0x41d)](_0x1d7382):_0x1d7382,_0x3df0bb=_0x406959+':\x20'+_0x5d23fc;throw this[_0x2fa158(0x240)]['error'](this[_0x2fa158(0x4a8)]+'\x20('+this['instance']['wuid']+_0x2fa158(0x33f)+_0x3df0bb),new m(_0x3df0bb);}}async[a0_0x2101b5(0x53f)](_0x1681f2){const _0x27fd05=a0_0x2101b5;let _0x380472={'numbers':_0x1681f2};return(await this[_0x27fd05(0x56b)](_0x380472))[_0x27fd05(0x285)](_0x14bda7=>_0x14bda7[_0x27fd05(0x6de)])[_0x27fd05(0x5e6)](_0x376a2f=>_0x376a2f[_0x27fd05(0x58f)])[_0x27fd05(0x5e6)](_0x227e7f=>this[_0x27fd05(0x289)](_0x227e7f));}[a0_0x2101b5(0x289)](_0x3ce463){const _0x5e681a=a0_0x2101b5;let _0x4f802f=_0x3ce463[_0x5e681a(0x66b)](/\d+/);return _0x4f802f?_0x4f802f[0x0]:'';}async[a0_0x2101b5(0x827)](_0x343105){const _0x34c454=a0_0x2101b5;try{if(this[_0x34c454(0x240)][_0x34c454(0x667)](this['instanceName']+'\x20('+this[_0x34c454(0x7f4)][_0x34c454(0x7fe)]+'):\x20Editando\x20bloco...'),!this[_0x34c454(0x655)][_0x34c454(0x145)]['find'](_0x3def96=>_0x3def96['_id']===_0x343105[_0x34c454(0x1b8)]))throw this[_0x34c454(0x240)][_0x34c454(0x667)](this[_0x34c454(0x4a8)]+'\x20('+this[_0x34c454(0x7f4)]['wuid']+_0x34c454(0x35a)+_0x343105[_0x34c454(0x1b8)]+_0x34c454(0x83c)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0xbcd86f=await this[_0x34c454(0x43b)][_0x34c454(0x399)][_0x34c454(0x505)]({'where':{'_id':_0x343105[_0x34c454(0x1b8)]}});if(!_0xbcd86f||!_0xbcd86f[_0x34c454(0x4f1)]?.[_0x34c454(0x267)](this[_0x34c454(0x7f4)][_0x34c454(0x7fe)]))throw this[_0x34c454(0x240)][_0x34c454(0x3c9)](this['instanceName']+'\x20('+this[_0x34c454(0x7f4)][_0x34c454(0x7fe)]+_0x34c454(0x486)+_0x343105[_0x34c454(0x1b8)]+_0x34c454(0x242)),new m('Flow\x20\x27'+_0x343105['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0xbcd86f[_0x34c454(0x1b0)]?.[_0x34c454(0x267)](this[_0x34c454(0x7f4)][_0x34c454(0x7fe)]))throw new m(_0x34c454(0x785));let {block:_0x5c3fd4}=_0x343105;_0x5c3fd4?.['copy']?this['copyBlock'](_0xbcd86f,_0x343105):_0x5c3fd4?.['delete']?this[_0x34c454(0x6a2)](_0xbcd86f,_0x343105):_0x5c3fd4[_0x34c454(0x1b8)]?await this['updateBlock'](_0xbcd86f,_0x343105):this[_0x34c454(0x7c4)](_0xbcd86f,_0x343105);let _0x473d54=await this[_0x34c454(0x43b)][_0x34c454(0x399)][_0x34c454(0x858)](_0xbcd86f[_0x34c454(0x1b8)],_0xbcd86f);if(!_0x473d54)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x473d54;}catch(_0x4fe1e0){this['throwAndLogError']('Erro\x20ao\x20editar\x20o\x20bloco:\x20'+_0x4fe1e0['message']);}}async[a0_0x2101b5(0x536)](_0x6c9d95,_0x13f6fc){const _0x54f1e4=a0_0x2101b5;let _0xfbecd4=_0x13f6fc[_0x54f1e4(0x191)][_0x54f1e4(0x1b8)],_0x4a8cde=_0x6c9d95['blocks'][_0x54f1e4(0x604)](_0x11d6b1=>_0x11d6b1['_id'][_0x54f1e4(0x60f)]()===_0xfbecd4);if(!_0x4a8cde){this[_0x54f1e4(0x240)]['error'](this[_0x54f1e4(0x4a8)]+'\x20('+this['instance'][_0x54f1e4(0x7fe)]+_0x54f1e4(0x746)+_0xfbecd4+_0x54f1e4(0x573));return;}this['logger'][_0x54f1e4(0x667)](this['instanceName']+'\x20('+this[_0x54f1e4(0x7f4)][_0x54f1e4(0x7fe)]+'):\x20Bloco\x20original\x20para\x20cópia:\x20'+JSON['stringify'](_0x4a8cde));let _0x4f6e39=JSON[_0x54f1e4(0x4bc)](JSON['stringify'](_0x4a8cde));_0x4f6e39[_0x54f1e4(0x1b8)]=new ge[(_0x54f1e4(0x7ae))]['Types'][(_0x54f1e4(0x3db))](),this[_0x54f1e4(0x240)][_0x54f1e4(0x667)](this[_0x54f1e4(0x4a8)]+'\x20('+this[_0x54f1e4(0x7f4)][_0x54f1e4(0x7fe)]+_0x54f1e4(0x799)+JSON[_0x54f1e4(0x41d)](_0x4f6e39)),_0x6c9d95[_0x54f1e4(0x4a5)][_0x54f1e4(0x2a9)](_0x4f6e39),this[_0x54f1e4(0x67b)](_0x6c9d95[_0x54f1e4(0x4a5)],_0x4f6e39[_0x54f1e4(0x29c)]);}[a0_0x2101b5(0x734)](_0x26bd90){const _0xb4eff8=a0_0x2101b5;throw this['logger'][_0xb4eff8(0x3c9)](this[_0xb4eff8(0x4a8)]+'\x20('+this['instance']['wuid']+_0xb4eff8(0x33f)+_0x26bd90),new m(_0x26bd90);}[a0_0x2101b5(0x6a2)](_0x2a2f75,_0x198606){const _0x5e5cad=a0_0x2101b5;let {block:_0x49445b}=_0x198606;if(_0x49445b['type']==='start'){this[_0x5e5cad(0x734)](_0x5e5cad(0x5eb));return;}if(!_0x49445b[_0x5e5cad(0x1b8)]){this[_0x5e5cad(0x734)](_0x5e5cad(0x78f));return;}let _0x43d383=_0x2a2f75[_0x5e5cad(0x4a5)][_0x5e5cad(0x604)](_0x340b15=>_0x340b15[_0x5e5cad(0x1b8)][_0x5e5cad(0x60f)]()===_0x198606[_0x5e5cad(0x191)][_0x5e5cad(0x1b8)]['toString']());if(!_0x43d383){this[_0x5e5cad(0x734)](_0x5e5cad(0x65d)+_0x49445b[_0x5e5cad(0x1b8)]+_0x5e5cad(0x7f7));return;}_0x2a2f75[_0x5e5cad(0x4a5)]=_0x2a2f75['blocks']['filter'](_0x3d37eb=>_0x3d37eb['_id'][_0x5e5cad(0x60f)]()!==_0x198606['block']['_id'][_0x5e5cad(0x60f)]()),_0x2a2f75[_0x5e5cad(0x3b7)]=_0x2a2f75[_0x5e5cad(0x3b7)][_0x5e5cad(0x285)](_0xe04564=>_0xe04564[_0x5e5cad(0x678)]!==_0x49445b[_0x5e5cad(0x1b8)][_0x5e5cad(0x60f)]()),_0x2a2f75['varedits']=_0x2a2f75[_0x5e5cad(0x4e7)]['filter'](_0x4ed766=>_0x4ed766[_0x5e5cad(0x678)]!==_0x49445b['_id'][_0x5e5cad(0x60f)]()),_0x2a2f75[_0x5e5cad(0x256)]=_0x2a2f75[_0x5e5cad(0x256)][_0x5e5cad(0x285)](_0x33ea6e=>_0x33ea6e[_0x5e5cad(0x678)]!==_0x49445b['_id'][_0x5e5cad(0x60f)]()),this['reorderBlocks'](_0x2a2f75[_0x5e5cad(0x4a5)],_0x43d383['groupId']);}async[a0_0x2101b5(0x7ef)](_0x289961,_0x2ec2f1){const _0x35b6e7=a0_0x2101b5;let _0x6deb85=_0x289961[_0x35b6e7(0x4a5)]['findIndex'](_0x2d22ce=>_0x2d22ce[_0x35b6e7(0x1b8)][_0x35b6e7(0x60f)]()===_0x2ec2f1['block'][_0x35b6e7(0x1b8)][_0x35b6e7(0x60f)]());if(this[_0x35b6e7(0x240)][_0x35b6e7(0x667)](this['instanceName']+'\x20('+this[_0x35b6e7(0x7f4)]['wuid']+_0x35b6e7(0x16b)+_0x6deb85),_0x6deb85===-0x1){this[_0x35b6e7(0x240)]['verbose'](_0x35b6e7(0x65d)+_0x2ec2f1[_0x35b6e7(0x191)][_0x35b6e7(0x1b8)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}if(_0x289961[_0x35b6e7(0x4a5)][_0x6deb85][_0x35b6e7(0x1a3)]===_0x35b6e7(0x773)){let _0x4e12d2=Object[_0x35b6e7(0x59a)](_0x2ec2f1[_0x35b6e7(0x191)]);if(_0x4e12d2['length']>0x2||_0x4e12d2[_0x35b6e7(0x608)]===0x2&&!_0x4e12d2[_0x35b6e7(0x267)](_0x35b6e7(0x542))){this[_0x35b6e7(0x734)]('Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão');return;}}let _0x3e2a19=_0x289961[_0x35b6e7(0x4a5)][_0x6deb85][_0x35b6e7(0x29c)];for(let _0x5936bd in _0x2ec2f1['block'])_0x2ec2f1['block']['hasOwnProperty'](_0x5936bd)&&(_0x289961[_0x35b6e7(0x4a5)][_0x6deb85][_0x5936bd]=_0x2ec2f1[_0x35b6e7(0x191)][_0x5936bd]);if(this[_0x35b6e7(0x240)][_0x35b6e7(0x667)](this[_0x35b6e7(0x4a8)]+'\x20('+this['instance'][_0x35b6e7(0x7fe)]+_0x35b6e7(0x355)+JSON[_0x35b6e7(0x41d)](_0x289961[_0x35b6e7(0x4a5)][_0x6deb85])),_0x289961[_0x35b6e7(0x4a5)][_0x6deb85][_0x35b6e7(0x2f1)]&&_0x35b6e7(0x51b)in _0x289961[_0x35b6e7(0x4a5)][_0x6deb85][_0x35b6e7(0x2f1)]){this[_0x35b6e7(0x240)][_0x35b6e7(0x667)](this['instanceName']+'\x20('+this[_0x35b6e7(0x7f4)][_0x35b6e7(0x7fe)]+'):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString');let _0x588546=JSON[_0x35b6e7(0x41d)](_0x289961[_0x35b6e7(0x4a5)][_0x6deb85][_0x35b6e7(0x2f1)][_0x35b6e7(0x51b)],null,0x1);_0x588546[_0x35b6e7(0x608)]>0x2&&(_0x588546=_0x588546[_0x35b6e7(0x883)](0x1,_0x588546[_0x35b6e7(0x608)]-0x1)[_0x35b6e7(0x3f2)]()),_0x289961['blocks'][_0x6deb85][_0x35b6e7(0x2f1)][_0x35b6e7(0x4f9)]=_0x588546;}if(_0x289961[_0x35b6e7(0x4a5)][_0x6deb85][_0x35b6e7(0x2f1)]&&'body'in _0x289961[_0x35b6e7(0x4a5)][_0x6deb85][_0x35b6e7(0x2f1)]&&!(_0x35b6e7(0x1fd)in _0x289961['blocks'][_0x6deb85][_0x35b6e7(0x2f1)])){this[_0x35b6e7(0x240)]['verbose'](this[_0x35b6e7(0x4a8)]+'\x20('+this[_0x35b6e7(0x7f4)][_0x35b6e7(0x7fe)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x289961[_0x35b6e7(0x4a5)][_0x6deb85][_0x35b6e7(0x2f1)][_0x35b6e7(0x385)]=!0x1;let _0x2ec54b=JSON['stringify'](_0x289961[_0x35b6e7(0x4a5)][_0x6deb85][_0x35b6e7(0x2f1)]['body'],null,0x2);_0x289961['blocks'][_0x6deb85]['apirequest']['bodyString']=_0x2ec54b;}if(_0x289961[_0x35b6e7(0x4a5)][_0x6deb85][_0x35b6e7(0x2f1)]&&_0x35b6e7(0x1fd)in _0x289961['blocks'][_0x6deb85][_0x35b6e7(0x2f1)]){_0x289961[_0x35b6e7(0x4a5)][_0x6deb85]['apirequest'][_0x35b6e7(0x385)]=!0x1;let _0x199e02=_0x289961['blocks'][_0x6deb85][_0x35b6e7(0x2f1)]['bodyString'],_0x4f2185=this[_0x35b6e7(0x767)](_0x199e02);_0x289961[_0x35b6e7(0x4a5)][_0x6deb85]['apirequest'][_0x35b6e7(0x1fd)]=_0x4f2185['result'],_0x289961[_0x35b6e7(0x4a5)][_0x6deb85]['apirequest'][_0x35b6e7(0x385)]=_0x4f2185[_0x35b6e7(0x3c9)];}let _0x3b60b9=_0x289961['blocks'][_0x6deb85]['groupId'];_0x3e2a19!==_0x3b60b9?(this[_0x35b6e7(0x67b)](_0x289961[_0x35b6e7(0x4a5)],_0x3e2a19),this[_0x35b6e7(0x67b)](_0x289961['blocks'],_0x3b60b9)):this[_0x35b6e7(0x67b)](_0x289961[_0x35b6e7(0x4a5)],_0x3e2a19);}[a0_0x2101b5(0x767)](_0x356c66){const _0x43cd40=a0_0x2101b5;let _0xe50903='\u205f',_0x2fcde2=!0x1,_0x30703b='';for(let _0x2a07c6=0x0;_0x2a07c6<_0x356c66['length'];_0x2a07c6++){let _0x429361=_0x356c66[_0x2a07c6];_0x429361==='\x22'&&(_0x2a07c6===0x0||_0x356c66[_0x2a07c6-0x1]!=='\x5c')&&(_0x2fcde2=!_0x2fcde2),!(!_0x2fcde2&&(_0x429361==='\x0a'||_0x429361==='\x20'||_0x429361===_0xe50903))&&(_0x30703b+=_0x429361);}let _0x5834d9={},_0x579adf=9876543210.1234,_0x413145=_0x30703b[_0x43cd40(0x869)](/\{\{([^}]+)\}\}/g,_0x55e7d1=>{let _0x13b744=_0x55e7d1,_0x1c0e5f=''+_0x579adf;return _0x5834d9[_0x1c0e5f]=_0x13b744,_0x579adf+=0.0001,_0x1c0e5f;}),_0x1f9326='',_0x46dcef=!0x1;try{let _0x206111=JSON['parse'](_0x413145);_0x1f9326=JSON['stringify'](_0x206111,null,0x2),_0x1f9326=_0x1f9326[_0x43cd40(0x869)](/\n( +)/g,(_0x19f1b7,_0x36eb78)=>{const _0x53898e=_0x43cd40;let _0x286055=_0x36eb78[_0x53898e(0x608)];return'\x0a'+_0xe50903[_0x53898e(0x45d)](_0x286055*0x2);}),_0x1f9326=_0x1f9326[_0x43cd40(0x869)](/(\d{10,}\.\d+)/g,_0x461f2e=>_0x5834d9[_0x461f2e]||_0x461f2e);}catch(_0x524ba7){this[_0x43cd40(0x240)][_0x43cd40(0x3c9)](_0x43cd40(0x24b)+_0x524ba7),_0x1f9326=_0x356c66,_0x46dcef=!0x0;}return{'result':_0x1f9326,'error':_0x46dcef};}[a0_0x2101b5(0x7c4)](_0x5657b7,_0x2675a4){const _0x2d0998=a0_0x2101b5;if(_0x2675a4[_0x2d0998(0x191)][_0x2d0998(0x1a3)]===_0x2d0998(0x773)){this[_0x2d0998(0x734)](_0x2d0998(0x366));return;}if(_0x2675a4[_0x2d0998(0x191)][_0x2d0998(0x2f1)]&&'header'in _0x2675a4['block'][_0x2d0998(0x2f1)]){this[_0x2d0998(0x240)][_0x2d0998(0x667)](this['instanceName']+'\x20('+this['instance'][_0x2d0998(0x7fe)]+_0x2d0998(0x365));let _0x4ca040=JSON[_0x2d0998(0x41d)](_0x2675a4[_0x2d0998(0x191)][_0x2d0998(0x2f1)][_0x2d0998(0x51b)],null,0x1);_0x4ca040[_0x2d0998(0x608)]>0x2&&(_0x4ca040=_0x4ca040[_0x2d0998(0x883)](0x1,_0x4ca040[_0x2d0998(0x608)]-0x1)[_0x2d0998(0x3f2)]()),_0x2675a4[_0x2d0998(0x191)][_0x2d0998(0x2f1)][_0x2d0998(0x4f9)]=_0x4ca040;}_0x2675a4[_0x2d0998(0x191)][_0x2d0998(0x2f1)]&&'body'in _0x2675a4[_0x2d0998(0x191)]['apirequest']&&(this[_0x2d0998(0x240)]['verbose'](this[_0x2d0998(0x4a8)]+'\x20('+this[_0x2d0998(0x7f4)][_0x2d0998(0x7fe)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0x2675a4[_0x2d0998(0x191)][_0x2d0998(0x2f1)]['bodyString']=JSON['stringify'](_0x2675a4[_0x2d0998(0x191)][_0x2d0998(0x2f1)]['body'],null,0x1)[_0x2d0998(0x3f2)]()),_0x5657b7[_0x2d0998(0x4a5)]['push'](_0x2675a4[_0x2d0998(0x191)]),this['reorderBlocks'](_0x5657b7[_0x2d0998(0x4a5)],_0x2675a4['block']['groupId']);}['reorderBlocks'](_0x481c5d,_0xe835e){const _0x2616ce=a0_0x2101b5;let _0x3ec2e2=_0x481c5d['filter'](_0x7f1295=>_0x7f1295['groupId']===_0xe835e);_0x3ec2e2[_0x2616ce(0x305)]((_0x10fe39,_0x4132fc)=>_0x10fe39[_0x2616ce(0x664)]-_0x4132fc[_0x2616ce(0x664)]),_0x3ec2e2['forEach']((_0x5ab040,_0x2fe83c)=>_0x5ab040[_0x2616ce(0x664)]=_0x2fe83c+0x1);}async[a0_0x2101b5(0x3a1)](_0x2038ca){const _0xe62988=a0_0x2101b5;try{if(this[_0xe62988(0x240)][_0xe62988(0x667)](this[_0xe62988(0x4a8)]+'\x20('+this['instance'][_0xe62988(0x7fe)]+_0xe62988(0x2e1)),!_0x2038ca||!_0x2038ca['replyOption']){this['throwAndLogError']('Data\x20inválida\x20fornecida');return;}if(!this[_0xe62988(0x655)][_0xe62988(0x145)][_0xe62988(0x604)](_0xb71ea5=>_0xb71ea5['_id']===_0x2038ca[_0xe62988(0x1b8)]))throw this[_0xe62988(0x240)]['verbose'](this[_0xe62988(0x4a8)]+'\x20('+this[_0xe62988(0x7f4)][_0xe62988(0x7fe)]+'):\x20Fluxo\x20\x27'+_0x2038ca['_id']+_0xe62988(0x83c)),new m(_0xe62988(0x725));let _0x33f5f3=await this[_0xe62988(0x43b)][_0xe62988(0x399)][_0xe62988(0x505)]({'where':{'_id':_0x2038ca['_id']}});if(!_0x33f5f3||!_0x33f5f3['whoCanUse']?.[_0xe62988(0x267)](this[_0xe62988(0x7f4)][_0xe62988(0x7fe)]))throw this[_0xe62988(0x240)]['error'](this[_0xe62988(0x4a8)]+'\x20('+this[_0xe62988(0x7f4)][_0xe62988(0x7fe)]+_0xe62988(0x486)+_0x2038ca['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x2038ca[_0xe62988(0x1b8)]+_0xe62988(0x242));if(!_0x33f5f3['whoCanEdit']?.['includes'](this[_0xe62988(0x7f4)][_0xe62988(0x7fe)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let {replyOption:_0x3cc199}=_0x2038ca;_0x3cc199?.[_0xe62988(0x57b)]?(this[_0xe62988(0x714)](_0x33f5f3,_0x2038ca),this[_0xe62988(0x705)](_0x33f5f3[_0xe62988(0x256)],_0x2038ca[_0xe62988(0x487)][_0xe62988(0x678)])):_0x3cc199[_0xe62988(0x1b8)]?(await this['updateReplyOption'](_0x33f5f3,_0x2038ca),this['reorderReplyOptions'](_0x33f5f3[_0xe62988(0x256)],_0x2038ca['replyOption'][_0xe62988(0x678)])):(this[_0xe62988(0x828)](_0x33f5f3,_0x2038ca),this[_0xe62988(0x705)](_0x33f5f3[_0xe62988(0x256)],_0x2038ca[_0xe62988(0x487)][_0xe62988(0x678)]));let _0x42ca15=await this[_0xe62988(0x43b)][_0xe62988(0x399)][_0xe62988(0x858)](_0x33f5f3[_0xe62988(0x1b8)],_0x33f5f3);if(!_0x42ca15)throw new Error(_0xe62988(0x6dd));return _0x42ca15;}catch(_0x58bde7){this['throwAndLogError']('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0x58bde7);}}[a0_0x2101b5(0x705)](_0x59f543,_0x24fe3a){const _0x407ec2=a0_0x2101b5;_0x59f543[_0x407ec2(0x600)](_0xdb11e1=>{const _0x4a7768=_0x407ec2;_0xdb11e1[_0x4a7768(0x678)]===_0x24fe3a&&_0xdb11e1[_0x4a7768(0x664)]===void 0x0&&(_0xdb11e1['order']=0x270f);});let _0x315d01=_0x59f543[_0x407ec2(0x285)](_0x96f784=>_0x96f784[_0x407ec2(0x678)]===_0x24fe3a);_0x315d01[_0x407ec2(0x305)]((_0x2ea5de,_0xae5a62)=>_0x2ea5de[_0x407ec2(0x664)]-_0xae5a62[_0x407ec2(0x664)]),_0x315d01[_0x407ec2(0x600)]((_0x41ce2b,_0x3b9300)=>{const _0xa878e1=_0x407ec2;_0x41ce2b[_0xa878e1(0x664)]=_0x3b9300+0x1;}),_0x59f543[_0x407ec2(0x600)](_0x436ce3=>{const _0x42b9d6=_0x407ec2;if(_0x436ce3[_0x42b9d6(0x678)]===_0x24fe3a){let _0xee21d=_0x315d01[_0x42b9d6(0x604)](_0x21491d=>_0x21491d[_0x42b9d6(0x1b8)]&&_0x436ce3[_0x42b9d6(0x1b8)]&&_0x21491d[_0x42b9d6(0x1b8)][_0x42b9d6(0x60f)]()===_0x436ce3[_0x42b9d6(0x1b8)][_0x42b9d6(0x60f)]());_0xee21d&&(_0x436ce3[_0x42b9d6(0x664)]=_0xee21d[_0x42b9d6(0x664)]);}});}[a0_0x2101b5(0x714)](_0x4e7882,_0x2ed4bb){const _0xffb26c=a0_0x2101b5;let {replyOption:_0x1775c6}=_0x2ed4bb;if(!_0x1775c6[_0xffb26c(0x1b8)]){this[_0xffb26c(0x734)](_0xffb26c(0x76a));return;}if(!_0x4e7882['replyOptions']['find'](_0x14f758=>_0x14f758[_0xffb26c(0x1b8)][_0xffb26c(0x60f)]()===_0x2ed4bb[_0xffb26c(0x487)]['_id'][_0xffb26c(0x60f)]())){this[_0xffb26c(0x734)](_0xffb26c(0x1b7)+_0x1775c6['_id']+'\x20não\x20encontrado');return;}_0x4e7882['replyOptions']=_0x4e7882[_0xffb26c(0x256)][_0xffb26c(0x285)](_0x3c9be4=>_0x3c9be4[_0xffb26c(0x1b8)][_0xffb26c(0x60f)]()!==_0x2ed4bb[_0xffb26c(0x487)]['_id'][_0xffb26c(0x60f)]());}async[a0_0x2101b5(0x2ea)](_0x2c8201,_0x200dde){const _0x1dbea3=a0_0x2101b5;let _0x1575fb=_0x2c8201[_0x1dbea3(0x256)][_0x1dbea3(0x84f)](_0xcdaf70=>_0xcdaf70[_0x1dbea3(0x1b8)]['toString']()===_0x200dde[_0x1dbea3(0x487)][_0x1dbea3(0x1b8)][_0x1dbea3(0x60f)]());if(_0x1575fb===-0x1){this[_0x1dbea3(0x734)](_0x1dbea3(0x1b7)+_0x200dde['replyOption'][_0x1dbea3(0x1b8)]+_0x1dbea3(0x659));return;}for(let _0x1ed48f in _0x200dde[_0x1dbea3(0x487)])_0x200dde[_0x1dbea3(0x487)][_0x1dbea3(0x414)](_0x1ed48f)&&(_0x2c8201[_0x1dbea3(0x256)][_0x1575fb][_0x1ed48f]=_0x200dde[_0x1dbea3(0x487)][_0x1ed48f]);}['addReplyOption'](_0x578d2f,_0x331880){const _0x977d17=a0_0x2101b5;_0x578d2f[_0x977d17(0x256)][_0x977d17(0x2a9)](_0x331880[_0x977d17(0x487)]);}async['editFlowGroup'](_0x4e2ef0){const _0x1dc436=a0_0x2101b5;this[_0x1dc436(0x240)][_0x1dc436(0x667)](this[_0x1dc436(0x4a8)]+'\x20('+this['instance']['wuid']+_0x1dc436(0x3dc)+JSON[_0x1dc436(0x41d)](_0x4e2ef0,null,0x2));try{if(this[_0x1dc436(0x240)][_0x1dc436(0x667)](this[_0x1dc436(0x4a8)]+'\x20('+this[_0x1dc436(0x7f4)][_0x1dc436(0x7fe)]+_0x1dc436(0x857)),!this['AutomateSystem'][_0x1dc436(0x145)]['find'](_0x270e1b=>_0x270e1b[_0x1dc436(0x1b8)]===_0x4e2ef0[_0x1dc436(0x1b8)]))throw this[_0x1dc436(0x240)][_0x1dc436(0x667)](this['instanceName']+'\x20('+this[_0x1dc436(0x7f4)][_0x1dc436(0x7fe)]+'):\x20Fluxo\x20\x27'+_0x4e2ef0[_0x1dc436(0x1b8)]+_0x1dc436(0x83c)),new m(_0x1dc436(0x725));let _0x4716ae=await this['repository'][_0x1dc436(0x399)][_0x1dc436(0x505)]({'where':{'_id':_0x4e2ef0[_0x1dc436(0x1b8)]}});if(!_0x4716ae||!_0x4716ae[_0x1dc436(0x4f1)]?.[_0x1dc436(0x267)](this['instance'][_0x1dc436(0x7fe)]))throw this[_0x1dc436(0x240)]['error'](this[_0x1dc436(0x4a8)]+'\x20('+this[_0x1dc436(0x7f4)]['wuid']+'):\x20Flow\x20\x27'+_0x4e2ef0['_id']+_0x1dc436(0x242)),new m(_0x1dc436(0x353)+_0x4e2ef0['_id']+_0x1dc436(0x242));if(!_0x4716ae[_0x1dc436(0x1b0)]?.[_0x1dc436(0x267)](this[_0x1dc436(0x7f4)][_0x1dc436(0x7fe)]))throw new m(_0x1dc436(0x785));if(_0x4e2ef0[_0x1dc436(0x5d8)]&&_0x4e2ef0['group']?.[_0x1dc436(0x57b)]===!0x0){if(this['logger']['verbose'](this[_0x1dc436(0x4a8)]+'\x20('+this['instance'][_0x1dc436(0x7fe)]+_0x1dc436(0x376)),_0x4e2ef0[_0x1dc436(0x5d8)][_0x1dc436(0x7ae)]===!0x0)return{'message':_0x1dc436(0x762)};if(_0x4716ae['blocks']['some'](_0x25bd58=>_0x25bd58['groupId'][_0x1dc436(0x60f)]()===_0x4e2ef0[_0x1dc436(0x5d8)][_0x1dc436(0x1b8)]))return this[_0x1dc436(0x240)]['verbose'](this[_0x1dc436(0x4a8)]+'\x20('+this[_0x1dc436(0x7f4)]['wuid']+_0x1dc436(0x2e8)),{'message':_0x1dc436(0x2e5)};_0x4716ae['groups']=_0x4716ae[_0x1dc436(0x1ac)][_0x1dc436(0x285)](_0x26b363=>_0x26b363[_0x1dc436(0x1b8)][_0x1dc436(0x60f)]()!==_0x4e2ef0[_0x1dc436(0x5d8)][_0x1dc436(0x1b8)]);}else{if(_0x4e2ef0['group']){if(_0x4e2ef0[_0x1dc436(0x5d8)][_0x1dc436(0x7ae)]===!0x0)return{'message':_0x1dc436(0x7b4)};if(_0x4e2ef0['group']['_id']){let _0x5810aa=_0x4716ae[_0x1dc436(0x1ac)][_0x1dc436(0x604)](_0x3138ce=>_0x3138ce[_0x1dc436(0x1b8)][_0x1dc436(0x60f)]()===_0x4e2ef0[_0x1dc436(0x5d8)]['_id']);_0x5810aa&&(_0x4e2ef0[_0x1dc436(0x5d8)]['x']<0x0&&(_0x4e2ef0['group']['x']=0x0),_0x4e2ef0[_0x1dc436(0x5d8)]['y']<0x0&&(_0x4e2ef0[_0x1dc436(0x5d8)]['y']=0x0),Object[_0x1dc436(0x6b1)](_0x5810aa,_0x4e2ef0[_0x1dc436(0x5d8)]));}else _0x4716ae[_0x1dc436(0x1ac)][_0x1dc436(0x2a9)](_0x4e2ef0[_0x1dc436(0x5d8)]);}}let _0x2aa5b7=await this[_0x1dc436(0x43b)]['flow'][_0x1dc436(0x858)](_0x4716ae[_0x1dc436(0x1b8)],_0x4716ae);if(!_0x2aa5b7)throw new Error(_0x1dc436(0x6dd));return _0x2aa5b7;}catch(_0x275c92){let _0xec1105=_0x1dc436(0x493),_0x32d258=_0x275c92 instanceof Error?_0x275c92[_0x1dc436(0x31f)]:typeof _0x275c92==_0x1dc436(0x69d)?JSON[_0x1dc436(0x41d)](_0x275c92):_0x275c92,_0x469dfd=_0xec1105+':\x20'+_0x32d258;throw this[_0x1dc436(0x240)]['error'](this[_0x1dc436(0x4a8)]+'\x20('+this[_0x1dc436(0x7f4)]['wuid']+'):\x20'+_0x469dfd),new m(_0x469dfd);}}async[a0_0x2101b5(0x7a4)](_0x245a92){const _0x1db920=a0_0x2101b5;try{if(this['logger'][_0x1db920(0x667)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x1db920(0x897)),!this[_0x1db920(0x655)][_0x1db920(0x145)]['find'](_0x1a5878=>_0x1a5878[_0x1db920(0x1b8)]===_0x245a92['_id']))throw this[_0x1db920(0x240)][_0x1db920(0x667)](this[_0x1db920(0x4a8)]+'\x20('+this[_0x1db920(0x7f4)][_0x1db920(0x7fe)]+_0x1db920(0x35a)+_0x245a92[_0x1db920(0x1b8)]+_0x1db920(0x83c)),new m(_0x1db920(0x725));let _0x56443e=await this['repository']['flow'][_0x1db920(0x505)]({'where':{'_id':_0x245a92['_id']}});if(!_0x56443e||!_0x56443e[_0x1db920(0x4f1)]?.[_0x1db920(0x267)](this[_0x1db920(0x7f4)][_0x1db920(0x7fe)]))throw this[_0x1db920(0x240)][_0x1db920(0x3c9)](this[_0x1db920(0x4a8)]+'\x20('+this[_0x1db920(0x7f4)]['wuid']+_0x1db920(0x486)+_0x245a92[_0x1db920(0x1b8)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x1db920(0x353)+_0x245a92[_0x1db920(0x1b8)]+_0x1db920(0x242));if(!_0x56443e[_0x1db920(0x1b0)]?.[_0x1db920(0x267)](this[_0x1db920(0x7f4)][_0x1db920(0x7fe)]))throw new m(_0x1db920(0x785));let _0x3d43c7=!0x1;if(_0x245a92['condition']?.[_0x1db920(0x57b)]===!0x0)_0x56443e['conditions']=_0x56443e[_0x1db920(0x3b7)]['filter'](_0xbeee47=>_0xbeee47&&_0x245a92[_0x1db920(0x273)]&&_0xbeee47['_id']&&_0x245a92[_0x1db920(0x273)][_0x1db920(0x1b8)]&&_0xbeee47[_0x1db920(0x1b8)][_0x1db920(0x60f)]()!==_0x245a92[_0x1db920(0x273)][_0x1db920(0x1b8)]['toString']()),_0x3d43c7=!0x0;else{let _0x203a7a=_0x56443e['conditions'][_0x1db920(0x604)](_0xddb271=>_0xddb271&&_0x245a92[_0x1db920(0x273)]&&_0xddb271[_0x1db920(0x1b8)]&&_0x245a92['condition'][_0x1db920(0x1b8)]&&_0xddb271[_0x1db920(0x1b8)]['toString']()===_0x245a92[_0x1db920(0x273)][_0x1db920(0x1b8)]['toString']());_0x203a7a?(_0x3d43c7=_0x203a7a[_0x1db920(0x664)]!==_0x245a92['condition'][_0x1db920(0x664)],Object['assign'](_0x203a7a,_0x245a92['condition'])):(_0x56443e[_0x1db920(0x3b7)][_0x1db920(0x2a9)](_0x245a92['condition']),_0x3d43c7=!0x0);}if(_0x3d43c7){_0x56443e[_0x1db920(0x3b7)]['sort']((_0x31b16d,_0x2334bf)=>_0x31b16d[_0x1db920(0x664)]>_0x2334bf[_0x1db920(0x664)]?0x1:_0x2334bf[_0x1db920(0x664)]>_0x31b16d[_0x1db920(0x664)]?-0x1:0x0);for(let _0x373f7a=0x0;_0x373f7a<_0x56443e[_0x1db920(0x3b7)][_0x1db920(0x608)];_0x373f7a++)_0x56443e[_0x1db920(0x3b7)][_0x373f7a][_0x1db920(0x664)]=_0x373f7a+0x1;_0x56443e[_0x1db920(0x3b7)]['length']>0x0&&(_0x56443e[_0x1db920(0x3b7)][0x0][_0x1db920(0x6b8)]='and');}let _0x214b42=await this[_0x1db920(0x43b)][_0x1db920(0x399)][_0x1db920(0x858)](_0x56443e[_0x1db920(0x1b8)],_0x56443e);if(!_0x214b42)throw new Error(_0x1db920(0x6dd));return _0x214b42;}catch(_0x26007c){let _0x55c1f1='Erro\x20ao\x20editar\x20condição\x20do\x20fluxo',_0x3b9eaf=_0x26007c instanceof Error?_0x26007c[_0x1db920(0x31f)]:typeof _0x26007c==_0x1db920(0x69d)?JSON[_0x1db920(0x41d)](_0x26007c):_0x26007c,_0x5624b9=_0x55c1f1+':\x20'+_0x3b9eaf;throw this[_0x1db920(0x240)][_0x1db920(0x3c9)](this['instanceName']+'\x20('+this[_0x1db920(0x7f4)]['wuid']+_0x1db920(0x33f)+_0x5624b9),new m(_0x5624b9);}}async[a0_0x2101b5(0x6ee)](_0x5bc7ee){const _0x1eb39d=a0_0x2101b5;try{if(this[_0x1eb39d(0x240)][_0x1eb39d(0x667)](this[_0x1eb39d(0x4a8)]+'\x20('+this['instance'][_0x1eb39d(0x7fe)]+_0x1eb39d(0x2d9)),!this[_0x1eb39d(0x655)][_0x1eb39d(0x145)][_0x1eb39d(0x604)](_0x135430=>_0x135430['_id']===_0x5bc7ee[_0x1eb39d(0x1b8)]))throw this[_0x1eb39d(0x240)][_0x1eb39d(0x667)](this[_0x1eb39d(0x4a8)]+'\x20('+this[_0x1eb39d(0x7f4)]['wuid']+'):\x20Fluxo\x20\x27'+_0x5bc7ee[_0x1eb39d(0x1b8)]+_0x1eb39d(0x83c)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0xcd6b5a=await this[_0x1eb39d(0x43b)][_0x1eb39d(0x399)][_0x1eb39d(0x505)]({'where':{'_id':_0x5bc7ee[_0x1eb39d(0x1b8)]}});if(!_0xcd6b5a||!_0xcd6b5a['whoCanUse']?.['includes'](this[_0x1eb39d(0x7f4)]['wuid']))throw this[_0x1eb39d(0x240)]['error'](this[_0x1eb39d(0x4a8)]+'\x20('+this[_0x1eb39d(0x7f4)][_0x1eb39d(0x7fe)]+_0x1eb39d(0x486)+_0x5bc7ee[_0x1eb39d(0x1b8)]+_0x1eb39d(0x242)),new m(_0x1eb39d(0x353)+_0x5bc7ee[_0x1eb39d(0x1b8)]+_0x1eb39d(0x242));if(!_0xcd6b5a[_0x1eb39d(0x1b0)]?.['includes'](this[_0x1eb39d(0x7f4)][_0x1eb39d(0x7fe)]))throw new m(_0x1eb39d(0x785));let _0x5d1fb7=!0x1;if(_0x5bc7ee['varedit']?.[_0x1eb39d(0x57b)]===!0x0)_0xcd6b5a[_0x1eb39d(0x4e7)]=_0xcd6b5a[_0x1eb39d(0x4e7)]['filter'](_0x43ba89=>_0x43ba89&&_0x5bc7ee['varedit']&&_0x43ba89[_0x1eb39d(0x1b8)]&&_0x5bc7ee[_0x1eb39d(0x1da)][_0x1eb39d(0x1b8)]&&_0x43ba89[_0x1eb39d(0x1b8)][_0x1eb39d(0x60f)]()!==_0x5bc7ee[_0x1eb39d(0x1da)]['_id'][_0x1eb39d(0x60f)]()),_0x5d1fb7=!0x0;else{let _0x522244=_0xcd6b5a[_0x1eb39d(0x4e7)][_0x1eb39d(0x604)](_0x499adc=>_0x499adc&&_0x5bc7ee['varedit']&&_0x499adc[_0x1eb39d(0x1b8)]&&_0x5bc7ee[_0x1eb39d(0x1da)][_0x1eb39d(0x1b8)]&&_0x499adc['_id'][_0x1eb39d(0x60f)]()===_0x5bc7ee['varedit'][_0x1eb39d(0x1b8)][_0x1eb39d(0x60f)]());_0x522244?(_0x5d1fb7=_0x522244[_0x1eb39d(0x664)]!==_0x5bc7ee[_0x1eb39d(0x1da)][_0x1eb39d(0x664)],Object[_0x1eb39d(0x6b1)](_0x522244,_0x5bc7ee[_0x1eb39d(0x1da)])):(_0xcd6b5a[_0x1eb39d(0x4e7)][_0x1eb39d(0x2a9)](_0x5bc7ee['varedit']),_0x5d1fb7=!0x0);}if(_0x5d1fb7){_0xcd6b5a['varedits'][_0x1eb39d(0x305)]((_0x1cce35,_0x496701)=>_0x1cce35['order']>_0x496701['order']?0x1:_0x496701[_0x1eb39d(0x664)]>_0x1cce35[_0x1eb39d(0x664)]?-0x1:0x0);for(let _0x224526=0x0;_0x224526<_0xcd6b5a[_0x1eb39d(0x4e7)][_0x1eb39d(0x608)];_0x224526++)_0xcd6b5a[_0x1eb39d(0x4e7)][_0x224526][_0x1eb39d(0x664)]=_0x224526+0x1;}let _0x1f405b=await this[_0x1eb39d(0x43b)]['flow'][_0x1eb39d(0x858)](_0xcd6b5a[_0x1eb39d(0x1b8)],_0xcd6b5a);if(!_0x1f405b)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x1f405b;}catch(_0x25d733){let _0x266b98=_0x1eb39d(0x37d),_0x54219e=_0x25d733 instanceof Error?_0x25d733[_0x1eb39d(0x31f)]:typeof _0x25d733==_0x1eb39d(0x69d)?JSON[_0x1eb39d(0x41d)](_0x25d733):_0x25d733,_0xd67095=_0x266b98+':\x20'+_0x54219e;throw this[_0x1eb39d(0x240)][_0x1eb39d(0x3c9)](this[_0x1eb39d(0x4a8)]+'\x20('+this[_0x1eb39d(0x7f4)][_0x1eb39d(0x7fe)]+_0x1eb39d(0x33f)+_0xd67095),new m(_0xd67095);}}async[a0_0x2101b5(0x3d7)](_0x8fb28a){const _0xda63da=a0_0x2101b5;try{if(this['logger'][_0xda63da(0x667)](this[_0xda63da(0x4a8)]+'\x20('+this[_0xda63da(0x7f4)][_0xda63da(0x7fe)]+'):\x20Editando\x20variável\x20do\x20fluxo...'),!this['AutomateSystem'][_0xda63da(0x145)][_0xda63da(0x604)](_0x5c6ae1=>_0x5c6ae1['_id']===_0x8fb28a['_id']))throw this[_0xda63da(0x240)][_0xda63da(0x667)](this[_0xda63da(0x4a8)]+'\x20('+this[_0xda63da(0x7f4)][_0xda63da(0x7fe)]+_0xda63da(0x35a)+_0x8fb28a[_0xda63da(0x1b8)]+_0xda63da(0x83c)),new m(_0xda63da(0x725));let _0x2a828b=await this[_0xda63da(0x43b)][_0xda63da(0x399)][_0xda63da(0x505)]({'where':{'_id':_0x8fb28a['_id']}});if(!_0x2a828b||!_0x2a828b['whoCanUse']?.[_0xda63da(0x267)](this[_0xda63da(0x7f4)][_0xda63da(0x7fe)]))throw this[_0xda63da(0x240)][_0xda63da(0x3c9)](this[_0xda63da(0x4a8)]+'\x20('+this[_0xda63da(0x7f4)][_0xda63da(0x7fe)]+'):\x20Flow\x20\x27'+_0x8fb28a[_0xda63da(0x1b8)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0xda63da(0x353)+_0x8fb28a[_0xda63da(0x1b8)]+_0xda63da(0x242));if(!_0x2a828b[_0xda63da(0x1b0)]?.[_0xda63da(0x267)](this[_0xda63da(0x7f4)][_0xda63da(0x7fe)]))throw new m(_0xda63da(0x785));_0x8fb28a[_0xda63da(0x7d5)][_0xda63da(0x89c)]=_0x8fb28a[_0xda63da(0x7d5)]['name']['trim'](),_0x8fb28a[_0xda63da(0x7d5)]['name'][_0xda63da(0x68a)]('_')&&(_0x8fb28a[_0xda63da(0x7d5)]['name']=_0x8fb28a[_0xda63da(0x7d5)]['name'][_0xda63da(0x883)](0x1)),_0x8fb28a[_0xda63da(0x7d5)][_0xda63da(0x89c)]=_0x8fb28a[_0xda63da(0x7d5)][_0xda63da(0x89c)][_0xda63da(0x3f2)]();let _0x2657f9=_0x2a828b[_0xda63da(0x2da)][_0xda63da(0x604)](_0x56c4b0=>_0x56c4b0[_0xda63da(0x89c)]===_0x8fb28a[_0xda63da(0x7d5)]['name']);if(_0x2657f9?.[_0xda63da(0x7f1)]===!0x0)throw new Error(_0xda63da(0x674));if(_0x8fb28a['variable']?.[_0xda63da(0x57b)]===!0x0){if(!_0x2657f9)return{'message':_0xda63da(0x723)};_0x2a828b[_0xda63da(0x2da)]=_0x2a828b[_0xda63da(0x2da)]['filter'](_0x11d225=>_0x11d225['name']!==_0x8fb28a[_0xda63da(0x7d5)]['name']);}else _0x2657f9?Object[_0xda63da(0x6b1)](_0x2657f9,_0x8fb28a[_0xda63da(0x7d5)]):_0x2a828b[_0xda63da(0x2da)][_0xda63da(0x2a9)](_0x8fb28a[_0xda63da(0x7d5)]);let _0x59baa6=await this[_0xda63da(0x43b)][_0xda63da(0x399)][_0xda63da(0x858)](_0x2a828b['_id'],_0x2a828b);if(!_0x59baa6)throw new Error(_0xda63da(0x6dd));return _0x59baa6;}catch(_0x1bc18c){let _0xdfaab9=_0xda63da(0x538),_0x32c802=_0x1bc18c instanceof Error?_0x1bc18c['message']:typeof _0x1bc18c==_0xda63da(0x69d)?JSON[_0xda63da(0x41d)](_0x1bc18c):_0x1bc18c,_0x4f5250=_0xdfaab9+':\x20'+_0x32c802;throw this[_0xda63da(0x240)][_0xda63da(0x3c9)](this[_0xda63da(0x4a8)]+'\x20('+this[_0xda63da(0x7f4)][_0xda63da(0x7fe)]+_0xda63da(0x33f)+_0x4f5250),new m(_0x4f5250);}}async[a0_0x2101b5(0x266)](_0x45532d){const _0x17ae52=a0_0x2101b5;let _0x4d312b=null;try{if(!this['AutomateSystem']?.[_0x17ae52(0x8b4)][_0x17ae52(0x4d4)])throw new m(_0x17ae52(0x683));this['logger'][_0x17ae52(0x667)](this['instanceName']+'\x20('+this[_0x17ae52(0x7f4)][_0x17ae52(0x7fe)]+'):\x20Iniciando\x20bot...');let _0x10c960=(await this[_0x17ae52(0x56b)]({'numbers':[_0x45532d['remoteJid']]}))[0x0];if(!_0x10c960[_0x17ae52(0x6de)]&&!(0x0,w['isJidGroup'])(_0x10c960[_0x17ae52(0x58f)])&&!_0x10c960[_0x17ae52(0x58f)][_0x17ae52(0x267)](_0x17ae52(0x3fe)))throw _0x4d312b=JSON[_0x17ae52(0x41d)](_0x10c960,null,0x2),new m(_0x10c960);let _0x5753a9;if(_0x45532d['name'][_0x17ae52(0x608)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x17ae52(0x6c3)](_0x45532d['name'])?_0x5753a9=this[_0x17ae52(0x655)][_0x17ae52(0x145)]['find'](_0x3e38e1=>_0x3e38e1['_id']===_0x45532d[_0x17ae52(0x89c)]):_0x5753a9=this[_0x17ae52(0x655)][_0x17ae52(0x145)][_0x17ae52(0x604)](_0x481fc1=>_0x481fc1['name']===_0x45532d[_0x17ae52(0x89c)]),!_0x5753a9)throw this[_0x17ae52(0x240)][_0x17ae52(0x667)](this[_0x17ae52(0x4a8)]+'\x20('+this['instance'][_0x17ae52(0x7fe)]+'):\x20Fluxo\x20\x27'+_0x45532d[_0x17ae52(0x89c)]+_0x17ae52(0x83c)),new m(_0x17ae52(0x725));let _0x57cd49=await this[_0x17ae52(0x43b)][_0x17ae52(0x399)][_0x17ae52(0x505)]({'where':{'_id':_0x5753a9[_0x17ae52(0x1b8)]}});if(!_0x57cd49||!_0x57cd49[_0x17ae52(0x4f1)]?.[_0x17ae52(0x267)](this[_0x17ae52(0x7f4)][_0x17ae52(0x7fe)]))throw this[_0x17ae52(0x240)]['error'](this[_0x17ae52(0x4a8)]+'\x20('+this[_0x17ae52(0x7f4)][_0x17ae52(0x7fe)]+_0x17ae52(0x486)+_0x5753a9['_id']+_0x17ae52(0x242)),_0x4d312b=_0x17ae52(0x353)+_0x5753a9['_id']+_0x17ae52(0x242),new m(_0x4d312b);let _0x519e29=await this[_0x17ae52(0x7f0)](_0x57cd49,_0x10c960[_0x17ae52(0x58f)],_0x45532d[_0x17ae52(0x819)]);if(_0x519e29){this[_0x17ae52(0x240)][_0x17ae52(0x667)](this[_0x17ae52(0x4a8)]+'\x20('+this[_0x17ae52(0x7f4)]['wuid']+_0x17ae52(0x4b7));let _0x580fa4=await this[_0x17ae52(0x525)](_0x519e29);return _0x580fa4&&await this[_0x17ae52(0x758)](_0x519e29,_0x580fa4),{'message':_0x17ae52(0x6e0)+_0x45532d[_0x17ae52(0x4e1)]};}}catch(_0x2ecf87){if(this[_0x17ae52(0x240)]['error'](this[_0x17ae52(0x4a8)]+'\x20('+this['instance'][_0x17ae52(0x7fe)]+_0x17ae52(0x3e6)+(_0x2ecf87 instanceof Error?_0x2ecf87['message']:JSON['stringify'](_0x2ecf87,null,0x2))),_0x4d312b=_0x2ecf87 instanceof Error?_0x2ecf87[_0x17ae52(0x31f)]:JSON['stringify'](_0x2ecf87,null,0x2),_0x4d312b)throw new m(_0x17ae52(0x5a7)+_0x4d312b);}}async['startFlowWebhook'](_0x3621ed,_0xab0f61,_0x58c246){const _0x24da8e=a0_0x2101b5;let _0x3628e0=null;try{if(!this[_0x24da8e(0x655)]?.[_0x24da8e(0x8b4)]['enabled'])throw new m(_0x24da8e(0x683));if(this[_0x24da8e(0x240)][_0x24da8e(0x667)](this['instanceName']+'\x20('+this[_0x24da8e(0x7f4)][_0x24da8e(0x7fe)]+_0x24da8e(0x676)),_0xab0f61){let _0xee4b1f=(await this['whatsappNumber']({'numbers':[_0xab0f61]}))[0x0];if(!_0xee4b1f['exists']&&!(0x0,w[_0x24da8e(0x39a)])(_0xee4b1f['jid'])&&!_0xee4b1f[_0x24da8e(0x58f)][_0x24da8e(0x267)](_0x24da8e(0x3fe)))throw _0x3628e0=JSON[_0x24da8e(0x41d)](_0xee4b1f,null,0x2),new m(_0xee4b1f);_0xab0f61=_0xee4b1f['jid'];}else _0xab0f61||(_0xab0f61=(0x0,Y['v4'])());let _0x56b54f=await this['repository'][_0x24da8e(0x399)][_0x24da8e(0x505)]({'where':{'_id':_0x3621ed}});if(!_0x56b54f||!_0x56b54f[_0x24da8e(0x4f1)]?.[_0x24da8e(0x267)](this[_0x24da8e(0x7f4)][_0x24da8e(0x7fe)]))throw this['logger'][_0x24da8e(0x3c9)](this[_0x24da8e(0x4a8)]+'\x20('+this[_0x24da8e(0x7f4)]['wuid']+_0x24da8e(0x486)+_0x3621ed+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x3621ed+_0x24da8e(0x242));let _0x5dee84=await this['createConversationforStartFlow'](_0x56b54f,_0xab0f61,null);if(_0x5dee84){this[_0x24da8e(0x240)][_0x24da8e(0x667)](this[_0x24da8e(0x4a8)]+'\x20('+this['instance'][_0x24da8e(0x7fe)]+'):\x20Criou\x20conversa\x20no\x20startFlowWebhook');let _0x45279a;if(_0x58c246){let _0x1db226=_0x5dee84[_0x24da8e(0x754)][_0x24da8e(0x1de)],_0x41bfe6=this[_0x24da8e(0x79e)](_0x58c246);Object[_0x24da8e(0x6b1)](_0x1db226,_0x41bfe6),_0x5dee84['chatLog'][_0x24da8e(0x1de)]=_0x1db226,_0x45279a={'error':!0x1,'apiResponse':_0x58c246};}let _0x5dd16f=await this[_0x24da8e(0x525)](_0x5dee84);return _0x5dd16f&&await this[_0x24da8e(0x758)](_0x5dee84,_0x5dd16f),{'message':_0x24da8e(0x74b)};}}catch(_0x4a105d){if(this[_0x24da8e(0x240)][_0x24da8e(0x3c9)](this[_0x24da8e(0x4a8)]+'\x20('+this[_0x24da8e(0x7f4)][_0x24da8e(0x7fe)]+_0x24da8e(0x3e6)+(_0x4a105d instanceof Error?_0x4a105d['message']:JSON['stringify'](_0x4a105d,null,0x2))),_0x3628e0=_0x4a105d instanceof Error?_0x4a105d['message']:JSON[_0x24da8e(0x41d)](_0x4a105d,null,0x2),_0x3628e0)throw new m(_0x24da8e(0x5a7)+_0x3628e0);}}async[a0_0x2101b5(0x709)](_0x36cb5c){const _0x3f140d=a0_0x2101b5;try{let _0x3c9b6f={'remoteJid':_0x36cb5c,'status':_0x3f140d(0x71e)},_0x311181={'status':_0x3f140d(0x62b)},_0x2534cc=await this[_0x3f140d(0x43b)]['flowConversation']['updateMany'](_0x3c9b6f,_0x311181,this['instance']['wuid']);return this[_0x3f140d(0x240)][_0x3f140d(0x667)](this[_0x3f140d(0x4a8)]+'\x20('+this[_0x3f140d(0x7f4)][_0x3f140d(0x7fe)]+_0x3f140d(0x15b)),_0x2534cc;}catch(_0x20a726){throw this['logger'][_0x3f140d(0x3c9)](this[_0x3f140d(0x4a8)]+'\x20('+this[_0x3f140d(0x7f4)][_0x3f140d(0x7fe)]+_0x3f140d(0x50d)+_0x20a726[_0x3f140d(0x31f)]),_0x20a726;}}async[a0_0x2101b5(0x7f0)](_0x2a1ca9,_0x30bb0a,_0x5035ed){const _0x549131=a0_0x2101b5;this[_0x549131(0x240)][_0x549131(0x667)](this[_0x549131(0x4a8)]+'\x20('+this['instance'][_0x549131(0x7fe)]+'):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]'),await this[_0x549131(0x709)](_0x30bb0a);try{let _0x304f60=require(_0x549131(0x768))[_0x549131(0x3db)],_0x2a9a4c=Date['now'](),_0x39b209=_0x549131(0x773),_0x4c8603={},_0x5d4fe0={},_0x438c58=this[_0x549131(0x655)][_0x549131(0x145)][_0x549131(0x604)](_0x3ac13a=>_0x3ac13a[_0x549131(0x1b8)]===_0x2a1ca9[_0x549131(0x1b8)]?.['toString']()),_0x125255=_0x438c58?.[_0x549131(0x23e)]??_0x2a1ca9[_0x549131(0x23e)]??0x0,_0x429a30=_0x438c58?.['readMessages']??_0x2a1ca9[_0x549131(0x82e)]??!0x1,_0x3d6072={'flowId':_0x2a1ca9['_id'],..._0x2a1ca9,'chatLog':null},_0x39767b=await this[_0x549131(0x503)](_0x3d6072[_0x549131(0x2da)]),_0x42b117=await this[_0x549131(0x761)](_0x30bb0a),_0x550600={..._0x39767b,..._0x42b117,'_remoteJid':_0x30bb0a},_0x1000e7={'lastReceivedMessage':_0x4c8603,'lastSendMessage':_0x5d4fe0,'lastBlockId':_0x39b209,'lastCondition':!0x0,'realVariables':_0x550600};_0x3d6072['chatLog']=_0x1000e7,_0x3d6072[_0x549131(0x754)][_0x549131(0x1de)]={..._0x550600,..._0x5035ed},delete _0x3d6072[_0x549131(0x1b8)],_0x3d6072['_id']=new _0x304f60(),_0x3d6072[_0x549131(0x537)]=_0x2a9a4c,_0x3d6072['status']='open',_0x3d6072[_0x549131(0x4e1)]=_0x30bb0a,_0x3d6072['minutesToClose']=_0x125255,_0x3d6072[_0x549131(0x82e)]=_0x429a30,_0x3d6072[_0x549131(0x1b8)]=_0x2a1ca9['_id'];let _0x2a69ac=await this[_0x549131(0x43b)]['flowConversation'][_0x549131(0x858)](_0x3d6072[_0x549131(0x1b8)],_0x3d6072,this['instance']['wuid']);return this[_0x549131(0x240)][_0x549131(0x667)](this[_0x549131(0x4a8)]+'\x20('+this[_0x549131(0x7f4)][_0x549131(0x7fe)]+_0x549131(0x38e)),_0x2a69ac?_0x3d6072:null;}catch(_0x10ebda){let _0x35e9d7=_0x549131(0x550),_0x3970c7=_0x10ebda instanceof Error?_0x10ebda['message']:typeof _0x10ebda==_0x549131(0x69d)?JSON[_0x549131(0x41d)](_0x10ebda):_0x10ebda,_0x5393ea=_0x35e9d7+':\x20'+_0x3970c7;throw this[_0x549131(0x240)]['error'](this[_0x549131(0x4a8)]+'\x20('+this['instance'][_0x549131(0x7fe)]+_0x549131(0x33f)+_0x5393ea),new m(_0x5393ea);}}async[a0_0x2101b5(0x5ea)](_0x23b047){const _0xb89474=a0_0x2101b5;try{this['logger'][_0xb89474(0x667)](this[_0xb89474(0x4a8)]+'\x20('+this[_0xb89474(0x7f4)]['wuid']+_0xb89474(0x2ca)),this[_0xb89474(0x240)][_0xb89474(0x667)](this[_0xb89474(0x4a8)]+'\x20('+this[_0xb89474(0x7f4)]['wuid']+_0xb89474(0x176)+_0x23b047);let _0x39da63={'where':{'_id':_0x23b047}};return await this[_0xb89474(0x43b)][_0xb89474(0x4bd)]['findOne'](_0x39da63,this[_0xb89474(0x7f4)][_0xb89474(0x7fe)]);}catch(_0x4c54c6){let _0x13a4ca=_0xb89474(0x157),_0x29343d=_0x4c54c6 instanceof Error?_0x4c54c6['message']:typeof _0x4c54c6==_0xb89474(0x69d)?JSON[_0xb89474(0x41d)](_0x4c54c6):_0x4c54c6,_0x1b32eb=_0x13a4ca+':\x20'+_0x29343d;throw this[_0xb89474(0x240)]['error'](this[_0xb89474(0x4a8)]+'\x20('+this['instance'][_0xb89474(0x7fe)]+'):\x20'+_0x1b32eb),new m(_0x1b32eb);}}async[a0_0x2101b5(0x711)](_0x11494f){const _0x181737=a0_0x2101b5;try{return this[_0x181737(0x240)]['verbose'](this[_0x181737(0x4a8)]+'\x20('+this['instance'][_0x181737(0x7fe)]+'):\x20Buscando\x20conversas...'),await this['repository'][_0x181737(0x4bd)]['find'](_0x11494f,this['instance'][_0x181737(0x7fe)]);}catch(_0x26670b){let _0x39510b=_0x181737(0x634),_0x43f5c2=_0x26670b instanceof Error?_0x26670b['message']:typeof _0x26670b==_0x181737(0x69d)?JSON[_0x181737(0x41d)](_0x26670b):_0x26670b,_0x249ac6=_0x39510b+':\x20'+_0x43f5c2;throw this[_0x181737(0x240)][_0x181737(0x3c9)](this[_0x181737(0x4a8)]+'\x20('+this[_0x181737(0x7f4)][_0x181737(0x7fe)]+_0x181737(0x33f)+_0x249ac6),new m(_0x249ac6);}}async[a0_0x2101b5(0x692)](_0x228dcf){const _0x46aa40=a0_0x2101b5;try{return this[_0x46aa40(0x240)][_0x46aa40(0x667)](this['instanceName']+'\x20('+this[_0x46aa40(0x7f4)][_0x46aa40(0x7fe)]+_0x46aa40(0x727)),this[_0x46aa40(0x240)]['verbose'](this[_0x46aa40(0x4a8)]+'\x20('+this[_0x46aa40(0x7f4)]['wuid']+_0x46aa40(0x278)+_0x228dcf),(await this['repository'][_0x46aa40(0x4bd)][_0x46aa40(0x66e)]({'where':{'_id':_0x228dcf[_0x46aa40(0x1b8)]}},this[_0x46aa40(0x7f4)][_0x46aa40(0x7fe)]))[_0x46aa40(0x797)]===0x0?{'message':_0x46aa40(0x7d1)}:{'message':_0x46aa40(0x599)};}catch(_0x36e635){let _0x1d0e7d=_0x46aa40(0x7f3),_0x360316=_0x36e635 instanceof Error?_0x36e635[_0x46aa40(0x31f)]:typeof _0x36e635=='object'?JSON[_0x46aa40(0x41d)](_0x36e635):_0x36e635,_0x15e8dd=_0x1d0e7d+':\x20'+_0x360316;throw this[_0x46aa40(0x240)]['error'](this[_0x46aa40(0x4a8)]+'\x20('+this[_0x46aa40(0x7f4)][_0x46aa40(0x7fe)]+_0x46aa40(0x33f)+_0x15e8dd),new m(_0x15e8dd);}}async[a0_0x2101b5(0x713)](_0x129f1f){const _0x22d4af=a0_0x2101b5;try{let {_id:_0x373537,chatLog:_0x5323c3,status:_0x3b0698}=_0x129f1f;if(!_0x373537)return{'message':_0x22d4af(0x19e)};let _0x43b0f7={};if(_0x3b0698!==void 0x0&&(_0x43b0f7[_0x22d4af(0x352)]=_0x3b0698),Object[_0x22d4af(0x59a)](_0x43b0f7)['length']===0x0)return{'message':_0x22d4af(0x4af)};let _0x18f15b=await this['repository']['flowConversation']['updateOne'](_0x373537,_0x43b0f7,this[_0x22d4af(0x7f4)][_0x22d4af(0x7fe)]);return _0x18f15b||{'message':_0x22d4af(0x558)};}catch(_0x33463){let _0xe3ba5f=_0x22d4af(0x4ae),_0x423ed3=_0x33463 instanceof Error?_0x33463[_0x22d4af(0x31f)]:typeof _0x33463==_0x22d4af(0x69d)?JSON[_0x22d4af(0x41d)](_0x33463):_0x33463,_0x586d81=_0xe3ba5f+':\x20'+_0x423ed3;throw this[_0x22d4af(0x240)][_0x22d4af(0x3c9)](this[_0x22d4af(0x4a8)]+'\x20('+this[_0x22d4af(0x7f4)]['wuid']+_0x22d4af(0x33f)+_0x586d81),new m(_0x586d81);}}async[a0_0x2101b5(0x7a5)](_0x333bb0){const _0x6ed047=a0_0x2101b5;try{_0x333bb0[_0x6ed047(0x1b8)]=this[_0x6ed047(0x28b)](_0x333bb0[_0x6ed047(0x1b8)]);let _0x13ebb5=await this[_0x6ed047(0x43b)]['chat'][_0x6ed047(0x505)]({'where':{'_id':_0x333bb0[_0x6ed047(0x1b8)]}},this['instance'][_0x6ed047(0x7fe)]);if(!_0x13ebb5)throw new m(_0x6ed047(0x2b5));let {_id:_0x4706dc,leadInfo:_0x4d114e}=_0x333bb0;if(!_0x4706dc)throw new Error(_0x6ed047(0x25b));if(_0x333bb0['delete']===_0x6ed047(0x186))return await this[_0x6ed047(0x6d6)](_0x333bb0[_0x6ed047(0x1b8)]),await this['repository'][_0x6ed047(0x5b2)][_0x6ed047(0x57b)]({'where':{'_id':_0x333bb0[_0x6ed047(0x1b8)]}},this[_0x6ed047(0x7f4)][_0x6ed047(0x7fe)]),await this[_0x6ed047(0x43b)][_0x6ed047(0x31f)][_0x6ed047(0x57b)]({'where':{'key':{'remoteJid':_0x333bb0['_id']}}},this['instance'][_0x6ed047(0x7fe)]),_0x333bb0=await this['repository']['chat'][_0x6ed047(0x858)]({'where':{'_id':_0x333bb0[_0x6ed047(0x1b8)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x6ed047(0x7f4)][_0x6ed047(0x7fe)]),F(this['instanceName'],_0x6ed047(0x415),{'chat':_0x333bb0}),{'message':_0x6ed047(0x442)};if(_0x333bb0[_0x6ed047(0x57b)]==='messages')return await this[_0x6ed047(0x43b)][_0x6ed047(0x31f)][_0x6ed047(0x57b)]({'where':{'key':{'remoteJid':_0x333bb0[_0x6ed047(0x1b8)]}}},this[_0x6ed047(0x7f4)][_0x6ed047(0x7fe)]),_0x333bb0=await this['repository'][_0x6ed047(0x5b2)][_0x6ed047(0x858)]({'where':{'_id':_0x333bb0['_id']}},{'lastmsg':0x0,'unreadcount':0x0},this['instance'][_0x6ed047(0x7fe)]),F(this[_0x6ed047(0x4a8)],_0x6ed047(0x415),{'chat':_0x333bb0}),{'message':_0x6ed047(0x2f7)};let _0x4c00ba=(_0x5bf0dc,_0x39171b,_0x528107)=>{_0x5bf0dc&&_0x528107['forEach'](_0x24ec26=>{const _0x403833=a0_0xeaf6;_0x5bf0dc[_0x24ec26]!==void 0x0&&(_0x39171b[_0x403833(0x462)+_0x24ec26]=_0x5bf0dc[_0x24ec26]);});},_0xbf21b4={};if(_0x6ed047(0x168)in _0x333bb0&&(this[_0x6ed047(0x240)]['verbose'](this[_0x6ed047(0x4a8)]+'\x20('+this[_0x6ed047(0x7f4)][_0x6ed047(0x7fe)]+_0x6ed047(0x18a)+_0x333bb0['_id']),_0x333bb0[_0x6ed047(0x168)]=_0x333bb0[_0x6ed047(0x168)]===0x0?null:-0x1,await this[_0x6ed047(0x796)]['chatModify']({'mute':_0x333bb0[_0x6ed047(0x168)]},_0x333bb0[_0x6ed047(0x1b8)]),_0xbf21b4[_0x6ed047(0x168)]=Number(_0x333bb0[_0x6ed047(0x168)])),_0x4d114e&&(_0x4c00ba(_0x4d114e,_0xbf21b4,[_0x6ed047(0x2ac),_0x6ed047(0x24f),_0x6ed047(0x7ca),_0x6ed047(0x246),_0x6ed047(0x352),_0x6ed047(0x30b),_0x6ed047(0x8c7),'atendimentoAberto',_0x6ed047(0x5f0),_0x6ed047(0x4a7),_0x6ed047(0x3d4)]),Array[_0x6ed047(0x413)](_0x4d114e[_0x6ed047(0x8c1)])&&(_0xbf21b4[_0x6ed047(0x74d)]=_0x4d114e['customFields'][_0x6ed047(0x5e6)](_0x542ed9=>({'_id':_0x542ed9[_0x6ed047(0x1b8)],'value':_0x542ed9[_0x6ed047(0x46f)]}))),_0x333bb0[_0x6ed047(0x7f1)][_0x6ed047(0x4a7)]!==void 0x0)){let _0x2521ce=await this[_0x6ed047(0x43b)][_0x6ed047(0x784)][_0x6ed047(0x604)]({'where':{}},this['instance'][_0x6ed047(0x7fe)]),_0x3df59d=new Set(_0x333bb0[_0x6ed047(0x7f1)][_0x6ed047(0x4a7)]||[]),_0x4dd191=new Set(_0x333bb0[_0x6ed047(0x7f1)][_0x6ed047(0x4a7)]),_0x5b2df4=new Set(_0x2521ce[_0x6ed047(0x5e6)](_0x4ef5da=>_0x4ef5da[_0x6ed047(0x1b8)])),_0x21d7d9=[..._0x4dd191][_0x6ed047(0x285)](_0x3802d3=>!_0x3df59d[_0x6ed047(0x350)](_0x3802d3)&&_0x5b2df4['has'](_0x3802d3)),_0xfdf7fe=[..._0x3df59d][_0x6ed047(0x285)](_0x1cd773=>!_0x4dd191[_0x6ed047(0x350)](_0x1cd773));if(_0xbf21b4[_0x6ed047(0x2cd)]=[..._0x3df59d],_0x13ebb5&&!_0x13ebb5[_0x6ed047(0x4dd)]){for(let _0xf09c2e of _0x21d7d9)await this[_0x6ed047(0x7d7)](_0xf09c2e,_0x333bb0[_0x6ed047(0x1b8)]),_0x3df59d[_0x6ed047(0x6c5)](_0xf09c2e);for(let _0x22c4f1 of _0xfdf7fe)await this['RemoveChatLabel'](_0x22c4f1,_0x333bb0[_0x6ed047(0x1b8)]),_0x3df59d[_0x6ed047(0x57b)](_0x22c4f1);}}if(_0x333bb0['unreadcount']!==void 0x0&&(_0xbf21b4[_0x6ed047(0x4d1)]=Number(_0x333bb0[_0x6ed047(0x4d1)])),Object[_0x6ed047(0x59a)](_0xbf21b4)[_0x6ed047(0x608)]===0x0)throw new Error(_0x6ed047(0x4af));let _0x4d54b8=await this[_0x6ed047(0x43b)][_0x6ed047(0x5b2)][_0x6ed047(0x858)]({'where':{'_id':_0x333bb0[_0x6ed047(0x1b8)]}},_0xbf21b4,this[_0x6ed047(0x7f4)][_0x6ed047(0x7fe)]);return _0x4d54b8&&F(this[_0x6ed047(0x4a8)],_0x6ed047(0x415),{'chat':_0x4d54b8}),_0x4d54b8?(this[_0x6ed047(0x240)][_0x6ed047(0x667)](this['instanceName']+'\x20('+this['instance'][_0x6ed047(0x7fe)]+_0x6ed047(0x33f)+JSON[_0x6ed047(0x41d)](_0x4d54b8,null,0x2)),_0x4d54b8):{'message':_0x6ed047(0x82f)};}catch(_0x506308){let _0x3cd5d0=_0x6ed047(0x73d),_0x3ae81a=_0x506308 instanceof Error?_0x506308[_0x6ed047(0x31f)]:typeof _0x506308=='object'?JSON[_0x6ed047(0x41d)](_0x506308):_0x506308,_0x3e0da1=_0x3cd5d0+':\x20'+_0x3ae81a;throw this[_0x6ed047(0x240)][_0x6ed047(0x3c9)](this[_0x6ed047(0x4a8)]+'\x20('+this[_0x6ed047(0x7f4)]['wuid']+_0x6ed047(0x33f)+_0x3e0da1),new m(_0x3e0da1);}}async[a0_0x2101b5(0x7d7)](_0x4b7786,_0x341b00){const _0x4f76d6=a0_0x2101b5;try{await this['client'][_0x4f76d6(0x4e0)](_0x341b00,_0x4b7786),this['logger']['info'](this[_0x4f76d6(0x4a8)]+'\x20('+this[_0x4f76d6(0x7f4)][_0x4f76d6(0x7fe)]+'):\x20Label\x20'+_0x4b7786+'\x20adicionado\x20ao\x20chat\x20'+_0x341b00+_0x4f76d6(0x475));}catch(_0x15e789){this['logger']['error'](_0x4f76d6(0x38b)+_0x4b7786+_0x4f76d6(0x47c)+_0x341b00+':\x20'+_0x15e789);}}async['RemoveChatLabel'](_0x83d378,_0x177a09){const _0x687f94=a0_0x2101b5;try{await this[_0x687f94(0x796)]['removeChatLabel'](_0x177a09,_0x83d378),this[_0x687f94(0x240)]['info'](this[_0x687f94(0x4a8)]+'\x20('+this[_0x687f94(0x7f4)][_0x687f94(0x7fe)]+_0x687f94(0x548)+_0x83d378+_0x687f94(0x4cb)+_0x177a09+_0x687f94(0x475));}catch(_0x4d7bd7){this[_0x687f94(0x240)][_0x687f94(0x3c9)](_0x687f94(0x53a)+_0x83d378+_0x687f94(0x185)+_0x177a09+':\x20'+_0x4d7bd7);}}async[a0_0x2101b5(0x572)](_0x126498){const _0x235dfe=a0_0x2101b5;try{let _0x3a4dc5=await this[_0x235dfe(0x43b)]['automateSystem'][_0x235dfe(0x77a)](this[_0x235dfe(0x7f4)]['wuid']),_0x40ac02=_0x126498[_0x235dfe(0x1b8)]?_0x3a4dc5[_0x235dfe(0x83b)]['findIndex'](_0xda5ea6=>_0xda5ea6[_0x235dfe(0x1b8)]===_0x126498[_0x235dfe(0x1b8)]):-0x1;if(_0x126498[_0x235dfe(0x57b)]&&_0x40ac02>-0x1)_0x3a4dc5[_0x235dfe(0x83b)][_0x235dfe(0x6cd)](_0x40ac02,0x1);else{if(_0x40ac02>-0x1){let _0xc002a0=_0x3a4dc5[_0x235dfe(0x83b)][_0x40ac02];_0x126498[_0x235dfe(0x247)]&&(_0xc002a0[_0x235dfe(0x247)]=_0x126498[_0x235dfe(0x247)]),_0x126498['name']&&(_0xc002a0['name']=_0x126498['name']),_0x126498[_0x235dfe(0x7ca)]&&(_0xc002a0[_0x235dfe(0x7ca)]=_0x126498[_0x235dfe(0x7ca)]),_0x126498[_0x235dfe(0x459)]&&(_0xc002a0[_0x235dfe(0x459)]=_0x126498[_0x235dfe(0x459)]);}else _0x3a4dc5['agents'][_0x235dfe(0x2a9)]({'_id':_0x126498[_0x235dfe(0x1b8)]||new ge[(_0x235dfe(0x7ae))][(_0x235dfe(0x4c4))][(_0x235dfe(0x3db))]()[_0x235dfe(0x60f)](),'fone':_0x126498['fone'],'name':_0x126498[_0x235dfe(0x89c)],'email':_0x126498[_0x235dfe(0x7ca)],'role':_0x126498[_0x235dfe(0x459)]});}let _0x55451b={'agents':_0x3a4dc5[_0x235dfe(0x83b)]},_0x23fe14=await this[_0x235dfe(0x43b)][_0x235dfe(0x1ff)][_0x235dfe(0x842)](_0x55451b,this[_0x235dfe(0x7f4)][_0x235dfe(0x7fe)]);return this[_0x235dfe(0x655)]=_0x23fe14,this['logger'][_0x235dfe(0x667)](this[_0x235dfe(0x4a8)]+'\x20('+this[_0x235dfe(0x7f4)][_0x235dfe(0x7fe)]+_0x235dfe(0x4ef)),this['logger']['verbose'](this[_0x235dfe(0x4a8)]+'\x20('+this['instance'][_0x235dfe(0x7fe)]+_0x235dfe(0x33f)+this[_0x235dfe(0x655)]),_0x23fe14;}catch(_0x361b7f){let _0x430a42=_0x235dfe(0x6db),_0x14bce0=_0x361b7f instanceof Error?_0x361b7f[_0x235dfe(0x31f)]:typeof _0x361b7f==_0x235dfe(0x69d)?JSON[_0x235dfe(0x41d)](_0x361b7f):_0x361b7f,_0x37b7d8=_0x430a42+':\x20'+_0x14bce0;throw this[_0x235dfe(0x240)][_0x235dfe(0x3c9)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x235dfe(0x33f)+_0x37b7d8),new m(_0x37b7d8);}}async['updateCustomFields'](_0x4235be){const _0x41e159=a0_0x2101b5;try{let _0xa8cfbd=await this[_0x41e159(0x43b)][_0x41e159(0x1ff)][_0x41e159(0x77a)](this[_0x41e159(0x7f4)][_0x41e159(0x7fe)]),_0x14b968=_0x4235be[_0x41e159(0x1b8)]?_0xa8cfbd[_0x41e159(0x8c1)][_0x41e159(0x84f)](_0x5348c8=>_0x5348c8[_0x41e159(0x1b8)]===_0x4235be[_0x41e159(0x1b8)]):-0x1,_0xbf1ee2=!0x1,_0x5213f9=_0xa8cfbd[_0x41e159(0x8c1)][_0x41e159(0x502)](_0x2ec81e=>_0x2ec81e[_0x41e159(0x664)]===_0x4235be[_0x41e159(0x664)]);if(_0x4235be['delete']&&_0x14b968>-0x1)_0xa8cfbd[_0x41e159(0x8c1)][_0x41e159(0x6cd)](_0x14b968,0x1),_0xbf1ee2=!0x0;else{if(_0x14b968>-0x1){if(_0xa8cfbd['customFields'][_0x41e159(0x502)](_0x50285f=>_0x50285f[_0x41e159(0x89c)]===_0x4235be[_0x41e159(0x89c)]&&_0x50285f['_id']!==_0x4235be['_id']))throw new Error(_0x41e159(0x8cd));let _0x3abe32=_0xa8cfbd[_0x41e159(0x8c1)][_0x14b968];_0x4235be['order']&&(_0x5213f9||!Number[_0x41e159(0x46c)](_0x4235be['order']))&&(_0x3abe32['order']=_0x4235be[_0x41e159(0x664)],_0xbf1ee2=!0x0),_0x4235be['name']&&(_0x3abe32['name']=_0x4235be['name']);}else{if(_0xa8cfbd['customFields'][_0x41e159(0x502)](_0x575253=>_0x575253[_0x41e159(0x89c)]===_0x4235be[_0x41e159(0x89c)]&&_0x575253['_id']!==_0x4235be[_0x41e159(0x1b8)]))throw new Error(_0x41e159(0x8cd));_0xa8cfbd[_0x41e159(0x8c1)][_0x41e159(0x2a9)]({'_id':_0x4235be[_0x41e159(0x1b8)]||new ge[(_0x41e159(0x7ae))][(_0x41e159(0x4c4))]['ObjectId']()[_0x41e159(0x60f)](),'order':_0x4235be[_0x41e159(0x664)],'name':_0x4235be[_0x41e159(0x89c)]}),_0xbf1ee2=!0x0;}}if(_0xbf1ee2){_0xa8cfbd['customFields'][_0x41e159(0x305)]((_0x3ca3fe,_0x459219)=>_0x3ca3fe[_0x41e159(0x664)]>_0x459219[_0x41e159(0x664)]?0x1:_0x459219[_0x41e159(0x664)]>_0x3ca3fe['order']?-0x1:0x0);for(let _0x2c987a=0x0;_0x2c987a<_0xa8cfbd[_0x41e159(0x8c1)][_0x41e159(0x608)];_0x2c987a++)_0xa8cfbd[_0x41e159(0x8c1)][_0x2c987a][_0x41e159(0x664)]=_0x2c987a+0x1;}let _0x72434c=await this['repository']['automateSystem']['update'](_0xa8cfbd,this[_0x41e159(0x7f4)][_0x41e159(0x7fe)]);return this[_0x41e159(0x655)]=_0x72434c,this['logger'][_0x41e159(0x667)](this['instanceName']+'\x20('+this[_0x41e159(0x7f4)][_0x41e159(0x7fe)]+'):\x20debug\x20alterando\x20this.AutomateSystem'),this['logger'][_0x41e159(0x667)](this['instanceName']+'\x20('+this[_0x41e159(0x7f4)][_0x41e159(0x7fe)]+_0x41e159(0x33f)+this[_0x41e159(0x655)]),_0x72434c;}catch(_0x5f33c1){let _0x5dfdb2=_0x41e159(0x794),_0x3f1067=_0x5f33c1 instanceof Error?_0x5f33c1[_0x41e159(0x31f)]:typeof _0x5f33c1==_0x41e159(0x69d)?JSON[_0x41e159(0x41d)](_0x5f33c1):_0x5f33c1,_0x180c67=_0x5dfdb2+':\x20'+_0x3f1067;throw this[_0x41e159(0x240)][_0x41e159(0x3c9)](this[_0x41e159(0x4a8)]+'\x20('+this['instance']['wuid']+_0x41e159(0x33f)+_0x180c67),new m(_0x180c67);}}async[a0_0x2101b5(0x5ae)](_0x217f3a){const _0x3f6c9a=a0_0x2101b5;try{let _0x2a4540=await this[_0x3f6c9a(0x43b)]['automateSystem']['findOrCreate'](this[_0x3f6c9a(0x7f4)][_0x3f6c9a(0x7fe)]),_0x5b861d=_0x2a4540?.[_0x3f6c9a(0x40a)]?.[_0x3f6c9a(0x84f)](_0x48682e=>_0x48682e[_0x3f6c9a(0x1b8)]===_0x217f3a?.[_0x3f6c9a(0x1b8)]);if(_0x217f3a?.[_0x3f6c9a(0x57b)])_0x5b861d>-0x1&&_0x2a4540?.[_0x3f6c9a(0x40a)]?.[_0x3f6c9a(0x6cd)](_0x5b861d,0x1);else{if(_0x5b861d>-0x1){let _0x5738b4=_0x2a4540[_0x3f6c9a(0x40a)][_0x5b861d];_0x5738b4[_0x3f6c9a(0x664)]=_0x217f3a?.[_0x3f6c9a(0x664)]||_0x5738b4[_0x3f6c9a(0x664)],_0x5738b4[_0x3f6c9a(0x43c)]=_0x217f3a?.[_0x3f6c9a(0x43c)]||_0x5738b4[_0x3f6c9a(0x43c)],_0x5738b4[_0x3f6c9a(0x31f)]=_0x217f3a?.[_0x3f6c9a(0x31f)]||_0x5738b4[_0x3f6c9a(0x31f)];}else{let _0x43176b={'_id':_0x217f3a?.[_0x3f6c9a(0x1b8)]||new ge[(_0x3f6c9a(0x7ae))][(_0x3f6c9a(0x4c4))]['ObjectId']()[_0x3f6c9a(0x60f)](),'order':_0x217f3a?.[_0x3f6c9a(0x664)],'command':_0x217f3a?.[_0x3f6c9a(0x43c)],'message':_0x217f3a?.[_0x3f6c9a(0x31f)]};_0x2a4540?.[_0x3f6c9a(0x40a)]?.['push'](_0x43176b);}}_0x2a4540?.[_0x3f6c9a(0x40a)]?.[_0x3f6c9a(0x305)]((_0x2c97a0,_0x4b372e)=>_0x2c97a0['order']-_0x4b372e[_0x3f6c9a(0x664)]);let _0x129744=await this[_0x3f6c9a(0x43b)][_0x3f6c9a(0x1ff)][_0x3f6c9a(0x842)](_0x2a4540,this[_0x3f6c9a(0x7f4)][_0x3f6c9a(0x7fe)]);return this[_0x3f6c9a(0x655)]=_0x129744,this[_0x3f6c9a(0x240)]['verbose'](this[_0x3f6c9a(0x4a8)]+'\x20('+this[_0x3f6c9a(0x7f4)][_0x3f6c9a(0x7fe)]+_0x3f6c9a(0x4c2)),_0x129744;}catch(_0x29eab2){let _0x339c96=_0x3f6c9a(0x6a3),_0x411f10=_0x29eab2 instanceof Error?_0x29eab2[_0x3f6c9a(0x31f)]:typeof _0x29eab2==_0x3f6c9a(0x69d)?JSON[_0x3f6c9a(0x41d)](_0x29eab2):_0x29eab2,_0x494ce4=_0x339c96+':\x20'+_0x411f10;throw this[_0x3f6c9a(0x240)][_0x3f6c9a(0x3c9)](this['instanceName']+'\x20('+this[_0x3f6c9a(0x7f4)][_0x3f6c9a(0x7fe)]+'):\x20'+_0x494ce4),new m(_0x494ce4);}}async['updateFlowConfig'](_0x404b21){const _0x4d5548=a0_0x2101b5;try{let _0x20f3ec=await this[_0x4d5548(0x43b)][_0x4d5548(0x1ff)]['findOrCreate'](this['instance'][_0x4d5548(0x7fe)]);if(!_0x20f3ec)throw new Error(_0x4d5548(0x484));let _0x149f99={'_id':_0x20f3ec[_0x4d5548(0x1b8)],'flowConfig':{'enabled':_0x404b21[_0x4d5548(0x4d4)]??_0x20f3ec[_0x4d5548(0x8b4)][_0x4d5548(0x4d4)],'ignoreGroups':_0x404b21[_0x4d5548(0x507)]??_0x20f3ec['flowConfig'][_0x4d5548(0x507)],'stopConversation':_0x404b21[_0x4d5548(0x78e)][_0x4d5548(0x3f2)]()??_0x20f3ec[_0x4d5548(0x8b4)][_0x4d5548(0x78e)][_0x4d5548(0x3f2)](),'stopMinutes':_0x404b21[_0x4d5548(0x2fc)]??_0x20f3ec[_0x4d5548(0x8b4)][_0x4d5548(0x2fc)],'stopWhenYouSendMsg':_0x404b21[_0x4d5548(0x34f)]??_0x20f3ec['flowConfig']['stopWhenYouSendMsg']}},_0x4b2520=await this[_0x4d5548(0x43b)][_0x4d5548(0x1ff)][_0x4d5548(0x842)](_0x149f99,this[_0x4d5548(0x7f4)]['wuid']);return this['AutomateSystem']=_0x4b2520,this[_0x4d5548(0x240)]['verbose'](this[_0x4d5548(0x4a8)]+'\x20('+this[_0x4d5548(0x7f4)][_0x4d5548(0x7fe)]+_0x4d5548(0x4ef)),this[_0x4d5548(0x240)][_0x4d5548(0x667)](this[_0x4d5548(0x4a8)]+'\x20('+this['instance']['wuid']+_0x4d5548(0x33f)+this[_0x4d5548(0x655)]),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x4b2520;}catch(_0x24dd92){let _0x44be55=_0x4d5548(0x452),_0x585722=_0x24dd92 instanceof Error?_0x24dd92['message']:typeof _0x24dd92=='object'?JSON[_0x4d5548(0x41d)](_0x24dd92):_0x24dd92,_0x5ddeb1=_0x44be55+':\x20'+_0x585722;throw this[_0x4d5548(0x240)][_0x4d5548(0x3c9)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4d5548(0x33f)+_0x5ddeb1),new m(_0x5ddeb1);}}async['getAutomateSystem'](){const _0x35a639=a0_0x2101b5;try{let _0x39a938=await this['repository'][_0x35a639(0x1ff)]['findOrCreate'](this[_0x35a639(0x7f4)][_0x35a639(0x7fe)]);return this[_0x35a639(0x655)]=_0x39a938,_0x39a938;}catch(_0x5b9fde){let _0x123efb=_0x35a639(0x6f4),_0x5f3648=_0x5b9fde instanceof Error?_0x5b9fde['message']:typeof _0x5b9fde=='object'?JSON['stringify'](_0x5b9fde):_0x5b9fde,_0x2052c3=_0x123efb+':\x20'+_0x5f3648;throw this[_0x35a639(0x240)][_0x35a639(0x3c9)](this[_0x35a639(0x4a8)]+'\x20('+this['instance']['wuid']+_0x35a639(0x33f)+_0x2052c3),new m(_0x2052c3);}}async[a0_0x2101b5(0x77e)](){const _0x3b13e=a0_0x2101b5;let _0x828403=(await import(_0x3b13e(0x47d)))[_0x3b13e(0x7ae)];this['queue']=new _0x828403({'concurrency':0x1});}async[a0_0x2101b5(0x62f)](){const _0x596dc5=a0_0x2101b5;this[_0x596dc5(0x7f4)][_0x596dc5(0x463)][_0x596dc5(0x52e)]&&clearTimeout(this['instance'][_0x596dc5(0x463)][_0x596dc5(0x52e)]),this['instance']['ScheduleMessage'][_0x596dc5(0x52e)]=setTimeout(()=>{const _0xe06d4d=_0x596dc5;this[_0xe06d4d(0x3aa)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x2101b5(0x3aa)](){const _0x31ea0e=a0_0x2101b5;let _0x4bd0e6=this['instance'][_0x31ea0e(0x463)]['lastSend'];(_0x4bd0e6===0x0||_0x4bd0e6===null||Date[_0x31ea0e(0x87f)]()-_0x4bd0e6>=0x1d4c0)&&(this[_0x31ea0e(0x240)][_0x31ea0e(0x667)](this[_0x31ea0e(0x4a8)]+'\x20('+this[_0x31ea0e(0x7f4)][_0x31ea0e(0x7fe)]+_0x31ea0e(0x696)),this[_0x31ea0e(0x7f4)][_0x31ea0e(0x463)][_0x31ea0e(0x7af)]=null,this[_0x31ea0e(0x7f4)][_0x31ea0e(0x463)][_0x31ea0e(0x477)]=0x0,this['instance'][_0x31ea0e(0x463)][_0x31ea0e(0x3ca)]=0x0,await this[_0x31ea0e(0x346)]());}async[a0_0x2101b5(0x346)](){const _0x1825a2=a0_0x2101b5;this['logger']['warn'](this[_0x1825a2(0x4a8)]+'\x20('+this['instance'][_0x1825a2(0x7fe)]+_0x1825a2(0x706)),await this[_0x1825a2(0x5bf)]();let _0x1d233e=await this[_0x1825a2(0x803)]();_0x1d233e[_0x1825a2(0x608)]>0x0&&(setTimeout(()=>this[_0x1825a2(0x3aa)](),0x14*0x3e8),this[_0x1825a2(0x240)][_0x1825a2(0x7e3)](this['instanceName']+'\x20('+this[_0x1825a2(0x7f4)]['wuid']+_0x1825a2(0x1c1)),this[_0x1825a2(0x73c)][_0x1825a2(0x28f)](),this[_0x1825a2(0x73c)][_0x1825a2(0x6c5)](()=>this[_0x1825a2(0x1f6)](_0x1d233e)));let _0x3d6000={'where':{'status':_0x1825a2(0x518),'when':{'$gt':Date[_0x1825a2(0x87f)]()}}},_0x33539c=await this[_0x1825a2(0x43b)][_0x1825a2(0x549)][_0x1825a2(0x505)](_0x3d6000,this[_0x1825a2(0x7f4)][_0x1825a2(0x7fe)]);_0x33539c&&_0x33539c[_0x1825a2(0x2a5)]-Date['now']()<=0x6ddd00?this[_0x1825a2(0x7f4)]['ScheduleMessage'][_0x1825a2(0x3ca)]=_0x33539c['when']-Date[_0x1825a2(0x87f)]():this['instance']['ScheduleMessage']['delayMessage']=(0x3c+Math[_0x1825a2(0x72b)](Math[_0x1825a2(0x78b)]()*0x3c))*0x3c*0x3e8,this['instance'][_0x1825a2(0x463)][_0x1825a2(0x3ca)]=Math[_0x1825a2(0x763)](this[_0x1825a2(0x7f4)]['ScheduleMessage'][_0x1825a2(0x3ca)],0x1*0x2*0x3e8);let _0x36e676=Math['round'](this['instance'][_0x1825a2(0x463)][_0x1825a2(0x3ca)]/0xea60);if(_0x33539c){let _0x1b5b7c=new Date(_0x33539c[_0x1825a2(0x2a5)])[_0x1825a2(0x1d8)]();this[_0x1825a2(0x240)][_0x1825a2(0x7e3)](this[_0x1825a2(0x4a8)]+'\x20('+this['instance'][_0x1825a2(0x7fe)]+_0x1825a2(0x886)+_0x1b5b7c+_0x1825a2(0x50b)+_0x36e676+_0x1825a2(0x7bd));}else this[_0x1825a2(0x240)][_0x1825a2(0x7e3)](this[_0x1825a2(0x4a8)]+'\x20('+this[_0x1825a2(0x7f4)][_0x1825a2(0x7fe)]+'):\x20Não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20'+_0x36e676+_0x1825a2(0x7bd));setTimeout(()=>{const _0x2afa42=_0x1825a2;this[_0x2afa42(0x346)]();},this['instance'][_0x1825a2(0x463)][_0x1825a2(0x3ca)]);}async[a0_0x2101b5(0x803)](){const _0x4d1c01=a0_0x2101b5;this[_0x4d1c01(0x240)][_0x4d1c01(0x7e3)](this['instanceName']+'\x20('+this['instance'][_0x4d1c01(0x7fe)]+_0x4d1c01(0x445));let _0x2be25e=Date[_0x4d1c01(0x87f)]()-0xc*0x3c*0x3c*0x3e8,_0xd75c4e={'where':{'status':{'$in':[_0x4d1c01(0x518),_0x4d1c01(0x541)]},'$or':[{'when':{'$lte':Date[_0x4d1c01(0x87f)](),'$gte':_0x2be25e}},{'when':0x0}]}},_0x57a8ee=await this[_0x4d1c01(0x43b)][_0x4d1c01(0x549)][_0x4d1c01(0x604)](_0xd75c4e,this[_0x4d1c01(0x7f4)]['wuid']);return this[_0x4d1c01(0x240)][_0x4d1c01(0x7e3)](this['instanceName']+'\x20('+this['instance'][_0x4d1c01(0x7fe)]+_0x4d1c01(0x5bc)+_0x57a8ee[_0x4d1c01(0x608)]),_0x57a8ee;}async['processReadyMessages'](_0x1ad0f6){const _0x138d25=a0_0x2101b5;this[_0x138d25(0x240)]['warn'](this[_0x138d25(0x4a8)]+'\x20('+this[_0x138d25(0x7f4)]['wuid']+_0x138d25(0x4d3));let _0x31306d=0x3*0x3e8,_0x208aa8=0x8*0x3e8,_0xb1c349=Math[_0x138d25(0x72b)](Math[_0x138d25(0x78b)]()*(_0x208aa8-_0x31306d+0x1))+_0x31306d,_0x277cb2=()=>this[_0x138d25(0x39c)][_0x138d25(0x608)]===0x0?null:this[_0x138d25(0x39c)][_0x138d25(0x2a8)]((_0x43bb25,_0x106372)=>(_0x43bb25[_0x138d25(0x664)]??Number[_0x138d25(0x438)])<(_0x106372[_0x138d25(0x664)]??Number[_0x138d25(0x438)])?_0x43bb25:_0x106372,this[_0x138d25(0x39c)][0x0]);_0x1ad0f6=await this['getReadyToSendMessages']();for(let _0x6f463e of _0x1ad0f6){await this[_0x138d25(0x62f)]();let _0x512236=0x3*0x3e8,_0x162fd5={'_id':_0x6f463e[_0x138d25(0x1b8)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x138d25(0x87f)]()-_0x512236}}]},_0x339c4b={'startSend':Date[_0x138d25(0x87f)](),'status':'sending'},_0x4d805e=await this[_0x138d25(0x43b)][_0x138d25(0x549)][_0x138d25(0x858)](_0x162fd5,_0x339c4b,this['instance'][_0x138d25(0x7fe)]);if(this[_0x138d25(0x39c)]=_0x4d805e['messages'][_0x138d25(0x285)](_0x11f73b=>!_0x11f73b[_0x138d25(0x253)]),!_0x4d805e){setTimeout(()=>this[_0x138d25(0x3aa)](),0xa*0x3e8);continue;}if(this[_0x138d25(0x7f4)][_0x138d25(0x463)][_0x138d25(0x7af)]=_0x4d805e,!this['instance'][_0x138d25(0x463)]['isConnected']){this[_0x138d25(0x240)]['warn'](this[_0x138d25(0x4a8)]+'\x20('+this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]+'):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected');break;}for(;this[_0x138d25(0x39c)][_0x138d25(0x608)]>0x0;){await this['setRestartTimeout']();let _0x581e41=_0x277cb2();if(!_0x581e41)break;let _0x446cc6=_0x6f463e[_0x138d25(0x76e)][_0x138d25(0x604)](_0x3a1462=>_0x3a1462['_id']===_0x581e41[_0x138d25(0x1b8)]);if(!_0x446cc6)break;if(this[_0x138d25(0x7f4)]['ScheduleMessage'][_0x138d25(0x477)]=Date[_0x138d25(0x87f)](),_0x446cc6[_0x138d25(0x253)]){this[_0x138d25(0x240)][_0x138d25(0x7e3)](this[_0x138d25(0x4a8)]+'\x20('+this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]+_0x138d25(0x423)+_0x446cc6[_0x138d25(0x4e1)]+'.\x20Pulando.'),this['pendingMessages']=this['pendingMessages'][_0x138d25(0x285)](_0x496422=>_0x496422['_id']!==_0x446cc6[_0x138d25(0x1b8)]);continue;}if(!this[_0x138d25(0x7f4)][_0x138d25(0x463)][_0x138d25(0x2f8)]){this[_0x138d25(0x240)][_0x138d25(0x7e3)](this[_0x138d25(0x4a8)]+'\x20('+this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]+_0x138d25(0x88a));break;}if(!this['instance']['ScheduleMessage'][_0x138d25(0x7af)]){this[_0x138d25(0x240)][_0x138d25(0x7e3)](this['instanceName']+'\x20('+this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]+_0x138d25(0x327)+_0x6f463e[_0x138d25(0x1b8)]+'\x20foi\x20interrompido\x20pelo\x20usuário.');break;}let _0x5a7daf={'idControl':_0x446cc6[_0x138d25(0x1b8)],'remoteJid':_0x446cc6['remoteJid'],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date[_0x138d25(0x87f)]()},_0x397f2a=null;try{this[_0x138d25(0x240)][_0x138d25(0x7e3)](this[_0x138d25(0x4a8)]+'\x20('+this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]+'):\x20Enviando\x20mensagem\x20para\x20'+_0x446cc6['remoteJid']);let _0x13c879=await this[_0x138d25(0x562)](_0x446cc6[_0x138d25(0x4e1)],_0x446cc6);_0x5a7daf[_0x138d25(0x3c9)]=_0x13c879['error'],_0x5a7daf['id']=_0x13c879[_0x138d25(0x3c9)]?null:_0x13c879['id'],_0x5a7daf['error_log']=_0x13c879[_0x138d25(0x3c9)]?_0x13c879['detail']?_0x13c879['detail'][_0x138d25(0x60f)]():'':null;let _0x4ffe49=_0x6f463e[_0x138d25(0x76e)]['findIndex'](_0x34a3be=>_0x34a3be[_0x138d25(0x1b8)]===_0x446cc6['_id']);_0x4ffe49!==-0x1&&(_0x6f463e[_0x138d25(0x76e)][_0x4ffe49][_0x138d25(0x253)]=!0x0);let _0x580e17={'$push':{'messagesSend':_0x5a7daf},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x249e29=[{'elem._id':_0x446cc6[_0x138d25(0x1b8)]}];if(this[_0x138d25(0x240)][_0x138d25(0x7e3)](this['instanceName']+'\x20('+this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]+_0x138d25(0x6ac)+_0x446cc6['_id']),_0x397f2a=await this['repository'][_0x138d25(0x549)][_0x138d25(0x858)]({'_id':_0x6f463e[_0x138d25(0x1b8)]},_0x580e17,this[_0x138d25(0x7f4)][_0x138d25(0x7fe)],{'arrayFilters':_0x249e29}),_0x13c879['error']){this[_0x138d25(0x240)][_0x138d25(0x3c9)](this[_0x138d25(0x4a8)]+'\x20('+this[_0x138d25(0x7f4)]['wuid']+_0x138d25(0x4ce)+_0x13c879['detail']);continue;}let _0x2b02a9=this['getDelay'](_0x6f463e[_0x138d25(0x2d3)],_0x6f463e[_0x138d25(0x444)]);await this[_0x138d25(0x59b)](_0x2b02a9);}catch(_0x5d6053){this[_0x138d25(0x240)][_0x138d25(0x3c9)](this['instanceName']+'\x20('+this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]+_0x138d25(0x566)+_0x446cc6[_0x138d25(0x4e1)]+':\x20'+(_0x5d6053 instanceof Error?_0x5d6053['message']:JSON[_0x138d25(0x41d)](_0x5d6053,null,0x2))),_0x5a7daf[_0x138d25(0x3c9)]=!0x0,_0x5a7daf[_0x138d25(0x891)]=_0x5d6053['message'];let _0x1a4b61=_0x6f463e[_0x138d25(0x76e)][_0x138d25(0x84f)](_0x460ac5=>_0x460ac5[_0x138d25(0x1b8)]===_0x446cc6[_0x138d25(0x1b8)]);_0x1a4b61!==-0x1&&(_0x6f463e[_0x138d25(0x76e)][_0x1a4b61][_0x138d25(0x253)]=!0x0);let _0x5b5e35={'$push':{'messagesSend':_0x5a7daf},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x2b82d6=[{'elem._id':_0x446cc6['_id']}];this[_0x138d25(0x240)][_0x138d25(0x7e3)](this['instanceName']+'\x20('+this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]+_0x138d25(0x621)+_0x446cc6[_0x138d25(0x1b8)]),_0x397f2a=await this[_0x138d25(0x43b)][_0x138d25(0x549)][_0x138d25(0x858)]({'_id':_0x6f463e[_0x138d25(0x1b8)]},_0x5b5e35,this[_0x138d25(0x7f4)][_0x138d25(0x7fe)],{'arrayFilters':_0x2b82d6});}finally{if(_0x397f2a&&_0x397f2a[_0x138d25(0x352)]===_0x138d25(0x417)){this[_0x138d25(0x240)][_0x138d25(0x7e3)](this['instanceName']+'\x20('+this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]+_0x138d25(0x327)+_0x446cc6['_id']+_0x138d25(0x144));break;}let _0x64b8dc=_0x397f2a[_0x138d25(0x76e)][_0x138d25(0x604)](_0x1f46cb=>_0x1f46cb[_0x138d25(0x1b8)]===_0x446cc6[_0x138d25(0x1b8)]);if(_0x64b8dc&&!_0x64b8dc['triedToSend']){let _0x479b9a={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x4263af=[{'elem._id':_0x446cc6[_0x138d25(0x1b8)]}];await this[_0x138d25(0x43b)]['scheduleMessage'][_0x138d25(0x858)]({'_id':_0x397f2a[_0x138d25(0x1b8)]},_0x479b9a,this[_0x138d25(0x7f4)][_0x138d25(0x7fe)],{'arrayFilters':_0x4263af});}if(this['pendingMessages']=_0x397f2a['messages'][_0x138d25(0x285)](_0x103bce=>!_0x103bce[_0x138d25(0x253)]),!this[_0x138d25(0x7f4)][_0x138d25(0x463)][_0x138d25(0x7af)]){await this[_0x138d25(0x62f)](),this[_0x138d25(0x240)][_0x138d25(0x7e3)](this[_0x138d25(0x4a8)]+'\x20('+this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]+_0x138d25(0x327)+_0x6f463e[_0x138d25(0x1b8)]+'\x20foi\x20interrompido\x20pelo\x20usuário.');break;}}}this[_0x138d25(0x39c)]=[];let _0x364879=await this[_0x138d25(0x43b)][_0x138d25(0x549)][_0x138d25(0x4fd)](_0x6f463e[_0x138d25(0x1b8)],this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]);if(_0x364879['messages']['every'](_0x165e76=>_0x165e76['triedToSend'])&&_0x364879[_0x138d25(0x352)]!==_0x138d25(0x417)){let _0x4e651d={'$set':{'status':_0x138d25(0x254)}};await this['repository']['scheduleMessage'][_0x138d25(0x6d2)](_0x364879[_0x138d25(0x1b8)],_0x4e651d,this[_0x138d25(0x7f4)][_0x138d25(0x7fe)]);}await new Promise(_0x511979=>setTimeout(_0x511979,_0xb1c349)),global['gc']?global['gc']():console[_0x138d25(0x7e3)](_0x138d25(0x3e5));}}[a0_0x2101b5(0x40d)](_0x3349da,_0x5240b6){const _0x52735c=a0_0x2101b5;return _0x3349da=Math[_0x52735c(0x763)](0.5,_0x3349da),_0x5240b6=Math[_0x52735c(0x76c)](Math[_0x52735c(0x763)](0x3,_0x5240b6),0x78),Math['floor'](Math[_0x52735c(0x78b)]()*(_0x5240b6-_0x3349da+0x1)+_0x3349da)*0x3e8;}[a0_0x2101b5(0x59b)](_0x1ca694){return new Promise(_0x12af5f=>setTimeout(_0x12af5f,_0x1ca694));}async[a0_0x2101b5(0x761)](_0x1f1a68){const _0x534fe6=a0_0x2101b5;if(!this['AutomateSystem']&&(await this[_0x534fe6(0x474)](),!this['AutomateSystem']))return null;_0x1f1a68=this[_0x534fe6(0x28b)](_0x1f1a68);let _0x4ea8ef=await this[_0x534fe6(0x43b)]['chat']['findOne']({'where':{'_id':_0x1f1a68}},this['instance'][_0x534fe6(0x7fe)]),_0x1c915b={};if(_0x4ea8ef&&_0x4ea8ef['leadInfo']){let _0x31099a=_0x4ea8ef[_0x534fe6(0x7f1)];typeof _0x31099a[_0x534fe6(0x2ac)]==_0x534fe6(0x30d)&&(_0x1c915b[_0x534fe6(0x2ac)]=_0x31099a[_0x534fe6(0x2ac)]),typeof _0x31099a[_0x534fe6(0x24f)]==_0x534fe6(0x30d)&&(_0x1c915b[_0x534fe6(0x24f)]=_0x31099a[_0x534fe6(0x24f)]),typeof _0x31099a[_0x534fe6(0x7ca)]==_0x534fe6(0x30d)&&(_0x1c915b[_0x534fe6(0x7ca)]=_0x31099a[_0x534fe6(0x7ca)]),typeof _0x31099a[_0x534fe6(0x246)]==_0x534fe6(0x30d)&&(_0x1c915b['cpf']=_0x31099a[_0x534fe6(0x246)]),typeof _0x31099a['status']=='string'&&(_0x1c915b[_0x534fe6(0x352)]=_0x31099a[_0x534fe6(0x352)]),typeof _0x31099a[_0x534fe6(0x30b)]==_0x534fe6(0x30d)&&(_0x1c915b['notas']=_0x31099a[_0x534fe6(0x30b)]),typeof _0x31099a[_0x534fe6(0x5f0)]==_0x534fe6(0x30d)&&(_0x1c915b[_0x534fe6(0x5f0)]=_0x31099a[_0x534fe6(0x5f0)]),Array[_0x534fe6(0x413)](_0x31099a[_0x534fe6(0x8c7)])&&(_0x1c915b['tags']=_0x31099a['tags'][_0x534fe6(0x1b4)](',\x20')),Array[_0x534fe6(0x413)](_0x31099a['etiquetas'])&&(_0x1c915b[_0x534fe6(0x4a7)]=_0x31099a[_0x534fe6(0x4a7)][_0x534fe6(0x1b4)](',\x20'));}return _0x4ea8ef&&_0x4ea8ef[_0x534fe6(0x7f1)]&&_0x4ea8ef[_0x534fe6(0x7f1)][_0x534fe6(0x8c1)]&&_0x4ea8ef[_0x534fe6(0x7f1)][_0x534fe6(0x8c1)][_0x534fe6(0x600)](_0xcaad34=>{const _0xa9f80b=_0x534fe6;let _0x162db5=this[_0xa9f80b(0x655)]?.[_0xa9f80b(0x8c1)]['find'](_0x1ca04d=>_0x1ca04d[_0xa9f80b(0x1b8)]===_0xcaad34['_id']);_0x162db5&&(_0x1c915b[_0x162db5[_0xa9f80b(0x89c)]]=_0xcaad34[_0xa9f80b(0x46f)]);}),_0x1c915b;}async[a0_0x2101b5(0x36e)](_0x46f99c,_0x4057de){const _0x22c1c8=a0_0x2101b5;try{let _0x4f9173=await this['getVariablesChat'](_0x4057de);return this['replaceVariables'](_0x46f99c,_0x4f9173);}catch(_0x54d7d7){return this[_0x22c1c8(0x240)][_0x22c1c8(0x3c9)](_0x22c1c8(0x707)+_0x4057de+':\x20'+_0x54d7d7),_0x46f99c;}}async[a0_0x2101b5(0x5bf)](){const _0x2d0d20=a0_0x2101b5;let _0x34846c=async(_0x3bbcc4,_0x3f6f2)=>{const _0x47197a=a0_0xeaf6;let _0x255454=(await this[_0x47197a(0x43b)]['scheduleMessage'][_0x47197a(0x604)]({'where':{'type':_0x3bbcc4}},this[_0x47197a(0x7f4)][_0x47197a(0x7fe)]))[_0x47197a(0x5e6)](async _0x1fe799=>{const _0x4e5965=_0x47197a;let _0x35f09b=_0x3f6f2(_0x1fe799),_0x42c803=_0x19fa25=>/^\d+$/[_0x4e5965(0x6c3)](_0x19fa25),_0xb9cabd=_0x1fe799[_0x4e5965(0x729)][_0x4e5965(0x285)](_0x25f63a=>_0x25f63a[_0x4e5965(0x643)](_0x4e5965(0x1b5))?_0x25f63a['length']>0x19:_0x25f63a['endsWith'](_0x4e5965(0x85d))?_0x25f63a[_0x4e5965(0x608)]>0xf:_0x42c803(_0x25f63a)?_0x25f63a[_0x4e5965(0x608)]>=0xb:!0x1)[_0x4e5965(0x5e6)](_0x2f9ce7=>({'_id':(0x0,Y['v4'])(),'idSchedule':_0x1fe799['_id'],'type':_0x35f09b,'remoteJid':_0x2f9ce7,'flow':_0x1fe799[_0x4e5965(0x7a7)],'text':_0x1fe799[_0x4e5965(0x31f)]?.[_0x4e5965(0x1b9)],'delay':_0x1fe799[_0x4e5965(0x31f)]?.[_0x4e5965(0x64d)],'urlOrBase64':_0x1fe799['message']?.[_0x4e5965(0x593)],'linkPreview':_0x1fe799['message']?.[_0x4e5965(0x6f9)],'fileName':_0x1fe799[_0x4e5965(0x31f)]?.[_0x4e5965(0x8b3)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x4e5965(0x43b)]['scheduleMessage'][_0x4e5965(0x6d2)](_0x1fe799[_0x4e5965(0x1b8)],{'$set':{'messages':_0xb9cabd},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x4e5965(0x7f4)]['wuid']);}catch(_0x37b519){console[_0x4e5965(0x3c9)](_0x4e5965(0x3f8)+_0x1fe799[_0x4e5965(0x1b8)]+':',_0x37b519);}});await Promise[_0x47197a(0x186)](_0x255454);};await _0x34846c(_0x2d0d20(0x1b9),_0x1ff33d=>_0x2d0d20(0x1b9)),await _0x34846c(_0x2d0d20(0x4f6),_0x272496=>_0x272496[_0x2d0d20(0x31f)]?.['mediatype']||_0x2d0d20(0x4f6)),await _0x34846c(_0x2d0d20(0x6d8),_0x101d05=>_0x2d0d20(0x6d8)),await _0x34846c(_0x2d0d20(0x399),_0x552bf3=>_0x2d0d20(0x399)),await _0x34846c(_0x2d0d20(0x2c4),_0x2bbfa2=>_0x2d0d20(0x2c4)),await _0x34846c('video',_0x142b2b=>_0x2d0d20(0x492)),await _0x34846c(_0x2d0d20(0x638),_0x430dd6=>_0x2d0d20(0x638)),this[_0x2d0d20(0x240)][_0x2d0d20(0x7e3)](this[_0x2d0d20(0x4a8)]+'\x20('+this[_0x2d0d20(0x7f4)][_0x2d0d20(0x7fe)]+_0x2d0d20(0x411));}async['editScheduleMessage'](_0x1cf24e){const _0x19d77b=a0_0x2101b5;try{if(this[_0x19d77b(0x240)][_0x19d77b(0x7e3)](this[_0x19d77b(0x4a8)]+'\x20('+this[_0x19d77b(0x7f4)][_0x19d77b(0x7fe)]+_0x19d77b(0x3e0)),_0x1cf24e[_0x19d77b(0x1b8)]||(_0x1cf24e[_0x19d77b(0x1b8)]=(0x0,Y['v4'])()),this[_0x19d77b(0x7f4)][_0x19d77b(0x463)]['processingGroup']?.[_0x19d77b(0x1b8)]===_0x1cf24e[_0x19d77b(0x1b8)]?.[_0x19d77b(0x60f)]()){if(_0x1cf24e[_0x19d77b(0x352)]===_0x19d77b(0x417))this[_0x19d77b(0x7f4)][_0x19d77b(0x463)][_0x19d77b(0x7af)]=null;else throw new Error(_0x19d77b(0x439));}if(_0x1cf24e[_0x19d77b(0x57b)]&&_0x1cf24e[_0x19d77b(0x1b8)]){let _0x3df924=await this[_0x19d77b(0x43b)]['scheduleMessage']['deleteOne'](_0x1cf24e[_0x19d77b(0x1b8)],this[_0x19d77b(0x7f4)][_0x19d77b(0x7fe)]);return setTimeout(()=>this[_0x19d77b(0x346)](),0x7d0),_0x3df924;}let _0x4ff4a4=null;if(_0x1cf24e[_0x19d77b(0x1b8)]&&(_0x4ff4a4=await this[_0x19d77b(0x43b)][_0x19d77b(0x549)][_0x19d77b(0x4fd)](_0x1cf24e[_0x19d77b(0x1b8)],this[_0x19d77b(0x7f4)][_0x19d77b(0x7fe)])),_0x4ff4a4){let {_id:_0x19793f,owner:_0x1c5072,messages:_0x33acbf,..._0x42913b}=_0x1cf24e;if(_0x33acbf){let _0x400fcd=_0x33acbf[_0x19d77b(0x285)](_0xf449da=>!_0xf449da[_0x19d77b(0x1b8)]),_0x45f6c4=_0x33acbf['filter'](_0x39ed76=>_0x39ed76['_id']&&!_0x39ed76[_0x19d77b(0x57b)]),_0x14cf61=_0x33acbf[_0x19d77b(0x285)](_0x544bd3=>_0x544bd3[_0x19d77b(0x1b8)]&&_0x544bd3[_0x19d77b(0x57b)]);if(_0x400fcd[_0x19d77b(0x608)]>0x0&&await this[_0x19d77b(0x83f)](_0x1cf24e[_0x19d77b(0x1b8)],_0x400fcd),_0x45f6c4[_0x19d77b(0x608)]>0x0&&await this['editMessagesInGroup']({'_id':_0x1cf24e['_id'],'messages':_0x45f6c4}),_0x14cf61[_0x19d77b(0x608)]>0x0){let _0x37ae17=_0x14cf61[_0x19d77b(0x5e6)](_0x394931=>({'updateOne':{'filter':{'_id':_0x1cf24e['_id']},'update':{'$pull':{'messages':{'_id':_0x394931[_0x19d77b(0x1b8)]}}}}}));await this[_0x19d77b(0x43b)]['scheduleMessage']['bulkWrite'](_0x37ae17,this[_0x19d77b(0x7f4)]['wuid']);}}let _0x1261eb={'$set':{..._0x42913b,'status':_0x1cf24e[_0x19d77b(0x352)]||_0x4ff4a4[_0x19d77b(0x352)]}},_0x557285=await this['repository'][_0x19d77b(0x549)][_0x19d77b(0x6d2)](_0x1cf24e['_id'],_0x1261eb,this['instance'][_0x19d77b(0x7fe)]);return _0x557285&&(this['reorderMessages'](_0x557285[_0x19d77b(0x76e)]),await this[_0x19d77b(0x43b)][_0x19d77b(0x549)][_0x19d77b(0x6d2)](_0x557285[_0x19d77b(0x1b8)],{'$set':{'messages':_0x557285['messages']}},this[_0x19d77b(0x7f4)][_0x19d77b(0x7fe)])),setTimeout(()=>this[_0x19d77b(0x346)](),0x7d0),await this[_0x19d77b(0x5bf)](),_0x557285;}else{_0x1cf24e[_0x19d77b(0x235)]=this['instance'][_0x19d77b(0x7fe)],_0x1cf24e[_0x19d77b(0x76e)]&&_0x1cf24e[_0x19d77b(0x76e)][_0x19d77b(0x600)](_0x201774=>{const _0x5484e3=_0x19d77b;_0x201774[_0x5484e3(0x1b8)]||(_0x201774['_id']=(0x0,Y['v4'])()),_0x201774[_0x5484e3(0x810)]||(_0x201774['idSchedule']=_0x1cf24e['_id']),delete _0x201774['triedToSend'];});let _0x4b6dc5=await this[_0x19d77b(0x43b)][_0x19d77b(0x549)][_0x19d77b(0x400)](_0x1cf24e,this[_0x19d77b(0x7f4)]['wuid']);return _0x4b6dc5&&(this[_0x19d77b(0x4c1)](_0x4b6dc5[_0x19d77b(0x76e)]),await this['repository'][_0x19d77b(0x549)]['updateOneById'](_0x4b6dc5[_0x19d77b(0x1b8)],{'$set':{'messages':_0x4b6dc5[_0x19d77b(0x76e)]}},this[_0x19d77b(0x7f4)][_0x19d77b(0x7fe)])),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x4b6dc5;}}catch(_0x35ebc2){let _0x54b5b8='Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens',_0x2b228a=_0x35ebc2 instanceof Error?_0x35ebc2['message']:typeof _0x35ebc2==_0x19d77b(0x69d)?JSON['stringify'](_0x35ebc2):_0x35ebc2,_0x21176d=_0x54b5b8+':\x20'+_0x2b228a;throw this['logger']['error'](this[_0x19d77b(0x4a8)]+'\x20('+this[_0x19d77b(0x7f4)][_0x19d77b(0x7fe)]+_0x19d77b(0x33f)+_0x21176d),new m(_0x21176d);}}async[a0_0x2101b5(0x83f)](_0x239d1b,_0x47bbf9){const _0x2fcd13=a0_0x2101b5;try{this[_0x2fcd13(0x240)][_0x2fcd13(0x667)](this[_0x2fcd13(0x4a8)]+'\x20('+this['instance'][_0x2fcd13(0x7fe)]+_0x2fcd13(0x63a)),_0x47bbf9[_0x2fcd13(0x600)](_0xebabc2=>{const _0x3ceb7a=_0x2fcd13;_0xebabc2[_0x3ceb7a(0x1b8)]||(_0xebabc2[_0x3ceb7a(0x1b8)]=(0x0,Y['v4'])()),_0xebabc2[_0x3ceb7a(0x810)]||(_0xebabc2[_0x3ceb7a(0x810)]=_0x239d1b),delete _0xebabc2[_0x3ceb7a(0x253)];});let _0x8e027={'$push':{'messages':{'$each':_0x47bbf9}}},_0x449917=await this[_0x2fcd13(0x43b)]['scheduleMessage']['updateOneById'](_0x239d1b,_0x8e027,this[_0x2fcd13(0x7f4)][_0x2fcd13(0x7fe)]);return _0x449917&&(this[_0x2fcd13(0x4c1)](_0x449917[_0x2fcd13(0x76e)]),await this[_0x2fcd13(0x43b)]['scheduleMessage'][_0x2fcd13(0x6d2)](_0x449917[_0x2fcd13(0x1b8)],{'$set':{'messages':_0x449917[_0x2fcd13(0x76e)]}},this['instance']['wuid'])),_0x449917;}catch(_0x106beb){let _0x7d73f2=_0x2fcd13(0x231),_0x2cb6ea=_0x106beb instanceof Error?_0x106beb[_0x2fcd13(0x31f)]:typeof _0x106beb==_0x2fcd13(0x69d)?JSON[_0x2fcd13(0x41d)](_0x106beb):_0x106beb,_0x10f9d2=_0x7d73f2+':\x20'+_0x2cb6ea;throw this[_0x2fcd13(0x240)][_0x2fcd13(0x3c9)](this[_0x2fcd13(0x4a8)]+'\x20('+this[_0x2fcd13(0x7f4)]['wuid']+_0x2fcd13(0x33f)+_0x10f9d2),new m(_0x10f9d2);}}async[a0_0x2101b5(0x1cc)](_0x4338c5){const _0x587b6=a0_0x2101b5;try{if(this[_0x587b6(0x240)][_0x587b6(0x667)](this[_0x587b6(0x4a8)]+'\x20('+this[_0x587b6(0x7f4)][_0x587b6(0x7fe)]+_0x587b6(0x6aa)),!_0x4338c5[_0x587b6(0x1b8)]||!_0x4338c5[_0x587b6(0x76e)])throw new Error(_0x587b6(0x3ab));let _0x57b8ef=_0x4338c5[_0x587b6(0x1b8)],_0x208007=_0x4338c5[_0x587b6(0x76e)],_0x560cbc=_0x208007[_0x587b6(0x285)](_0xbf02e7=>!_0xbf02e7[_0x587b6(0x57b)])[_0x587b6(0x5e6)](_0xfee7a2=>{const _0x7189c4=_0x587b6;let _0x5cd61c=_0xfee7a2[_0x7189c4(0x1b8)];if(!_0x5cd61c)throw new Error(_0x7189c4(0x2a1));return _0xfee7a2[_0x7189c4(0x810)]||(_0xfee7a2[_0x7189c4(0x810)]=_0x57b8ef),delete _0xfee7a2[_0x7189c4(0x253)],{'updateOne':{'filter':{'_id':_0x57b8ef,'messages._id':_0x5cd61c},'update':{'$set':{'messages.$[elem]':_0xfee7a2}},'arrayFilters':[{'elem._id':_0x5cd61c}]}};}),_0x58a0f2=_0x208007[_0x587b6(0x285)](_0x11e74e=>_0x11e74e['delete'])['map'](_0x2676f0=>{const _0x20522e=_0x587b6;let _0x5147b1=_0x2676f0[_0x20522e(0x1b8)];if(!_0x5147b1)throw new Error(_0x20522e(0x15d));return{'updateOne':{'filter':{'_id':_0x57b8ef},'update':{'$pull':{'messages':{'_id':_0x5147b1}}}}};}),_0x438a27=[..._0x560cbc,..._0x58a0f2],_0x39a788=await this['repository'][_0x587b6(0x549)][_0x587b6(0x726)](_0x438a27,this[_0x587b6(0x7f4)]['wuid']),_0x16d95f=await this[_0x587b6(0x43b)][_0x587b6(0x549)][_0x587b6(0x4fd)](_0x57b8ef,this[_0x587b6(0x7f4)]['wuid']);return _0x16d95f&&(this[_0x587b6(0x4c1)](_0x16d95f[_0x587b6(0x76e)]),await this['repository'][_0x587b6(0x549)]['updateOneById'](_0x16d95f[_0x587b6(0x1b8)],{'$set':{'messages':_0x16d95f[_0x587b6(0x76e)]}},this[_0x587b6(0x7f4)][_0x587b6(0x7fe)])),_0x16d95f;}catch(_0x4938af){let _0x3a9570=_0x587b6(0x362),_0x24ca14=_0x4938af instanceof Error?_0x4938af[_0x587b6(0x31f)]:typeof _0x4938af==_0x587b6(0x69d)?JSON['stringify'](_0x4938af):_0x4938af,_0xd2b3b8=_0x3a9570+':\x20'+_0x24ca14;throw this['logger']['error'](this[_0x587b6(0x4a8)]+'\x20('+this[_0x587b6(0x7f4)][_0x587b6(0x7fe)]+_0x587b6(0x33f)+_0xd2b3b8),new m(_0xd2b3b8);}}async['deleteDoneMessages'](){const _0x1ca442=a0_0x2101b5;try{let _0xd1b8a4={'status':'done'},_0x584bb5=await this[_0x1ca442(0x43b)]['scheduleMessage'][_0x1ca442(0x690)](_0xd1b8a4,this[_0x1ca442(0x7f4)][_0x1ca442(0x7fe)]);if(!_0x584bb5[_0x1ca442(0x3c9)])this[_0x1ca442(0x240)][_0x1ca442(0x667)](this[_0x1ca442(0x4a8)]+'\x20('+this[_0x1ca442(0x7f4)]['wuid']+_0x1ca442(0x3a0));else throw new Error(_0x584bb5[_0x1ca442(0x3c9)][_0x1ca442(0x31f)]||_0x1ca442(0x641));return this['getScheduleMessage']();}catch(_0x29f858){let _0x24297d=_0x1ca442(0x331),_0x17dffb=_0x29f858 instanceof Error?_0x29f858[_0x1ca442(0x31f)]:typeof _0x29f858==_0x1ca442(0x69d)?JSON[_0x1ca442(0x41d)](_0x29f858):_0x29f858,_0x496b87=_0x24297d+':\x20'+_0x17dffb;throw this['logger'][_0x1ca442(0x3c9)](this[_0x1ca442(0x4a8)]+'\x20('+this[_0x1ca442(0x7f4)][_0x1ca442(0x7fe)]+'):\x20'+_0x496b87),new m(_0x496b87);}}async[a0_0x2101b5(0x48a)](){const _0x438591=a0_0x2101b5;try{return await this[_0x438591(0x43b)][_0x438591(0x549)]['find']({'where':{}},this[_0x438591(0x7f4)][_0x438591(0x7fe)]);}catch(_0x11dc5a){let _0x40886f=_0x438591(0x6ea),_0x5769d7=_0x11dc5a instanceof Error?_0x11dc5a[_0x438591(0x31f)]:typeof _0x11dc5a=='object'?JSON['stringify'](_0x11dc5a):_0x11dc5a,_0x537c67=_0x40886f+':\x20'+_0x5769d7;throw this[_0x438591(0x240)][_0x438591(0x3c9)](this['instanceName']+'\x20('+this[_0x438591(0x7f4)][_0x438591(0x7fe)]+_0x438591(0x33f)+_0x537c67),new m(_0x537c67);}}[a0_0x2101b5(0x4c1)](_0xac1b9f){const _0x25cab9=a0_0x2101b5;_0xac1b9f['sort']((_0xb84297,_0x448510)=>_0xb84297[_0x25cab9(0x664)]-_0x448510[_0x25cab9(0x664)]),_0xac1b9f[_0x25cab9(0x600)]((_0x3f4b9a,_0x50957b)=>{const _0x8b0943=_0x25cab9;_0x3f4b9a[_0x8b0943(0x664)]=_0x50957b+0x1;});}async[a0_0x2101b5(0x562)](_0x1be141,_0x254326){const _0x2da04d=a0_0x2101b5;try{if(!_0x254326)return this[_0x2da04d(0x240)][_0x2da04d(0x3c9)](this[_0x2da04d(0x4a8)]+'\x20('+this['instance'][_0x2da04d(0x7fe)]+_0x2da04d(0x291)),{'error':!0x0,'detail':_0x2da04d(0x71c)};if(_0x254326['type']===_0x2da04d(0x399)&&!this['AutomateSystem']?.['flowConfig'][_0x2da04d(0x4d4)])return this[_0x2da04d(0x240)][_0x2da04d(0x3c9)](this[_0x2da04d(0x4a8)]+'\x20('+this[_0x2da04d(0x7f4)]['wuid']+_0x2da04d(0x5cb)),{'error':!0x0,'detail':_0x2da04d(0x683)};switch(_0x254326[_0x2da04d(0x1a3)]){case _0x2da04d(0x1b9):return await this[_0x2da04d(0x4f2)](_0x254326,_0x1be141);case _0x2da04d(0x492):case'image':case _0x2da04d(0x638):return await this[_0x2da04d(0x85e)](_0x254326,_0x1be141);case _0x2da04d(0x6d8):return await this[_0x2da04d(0x2f9)](_0x254326,_0x1be141);case _0x2da04d(0x399):let _0x3dd406=new We();return _0x3dd406['name']=_0x254326['flow'],_0x3dd406[_0x2da04d(0x4e1)]=_0x1be141,await this[_0x2da04d(0x266)](_0x3dd406);default:return this[_0x2da04d(0x240)]['error'](this[_0x2da04d(0x4a8)]+'\x20('+this['instance']['wuid']+'):\x20Comando\x20desconhecido:\x20'+_0x254326['type']),{'error':!0x0,'detail':_0x2da04d(0x87a)};}}catch(_0x192124){return this[_0x2da04d(0x240)][_0x2da04d(0x3c9)](this[_0x2da04d(0x4a8)]+'\x20('+this[_0x2da04d(0x7f4)]['wuid']+_0x2da04d(0x2d5)+(_0x192124 instanceof Error?_0x192124[_0x2da04d(0x31f)]:JSON['stringify'](_0x192124,null,0x2))),{'error':!0x0,'detail':_0x192124[_0x2da04d(0x31f)]};}}async[a0_0x2101b5(0x4f2)](_0x3fc16b,_0x41139f){const _0x195716=a0_0x2101b5;if(this[_0x195716(0x240)][_0x195716(0x667)](this['instanceName']+'\x20('+this[_0x195716(0x7f4)]['wuid']+_0x195716(0x4fb)+_0x41139f+'\x27'),!_0x3fc16b[_0x195716(0x1b9)]||_0x3fc16b[_0x195716(0x1b9)][_0x195716(0x608)]===0x0)return{'error':!0x0,'detail':_0x195716(0x74a)};let _0x1826c3=await this[_0x195716(0x36e)](_0x3fc16b[_0x195716(0x1b9)],_0x41139f),_0x521700={'number':_0x41139f,'options':{'delay':_0x3fc16b[_0x195716(0x64d)],'linkPreview':_0x3fc16b[_0x195716(0x6f9)]},'textMessage':{'text':_0x1826c3}},_0x496778=null;try{let _0x57b21b=await this[_0x195716(0x87c)](_0x521700);if(_0x57b21b&&_0x57b21b[_0x195716(0x352)])return{'error':!0x1,'id':_0x57b21b['key']['id']};_0x496778=JSON[_0x195716(0x41d)](_0x57b21b),this[_0x195716(0x240)][_0x195716(0x667)](this['instanceName']+'\x20('+this[_0x195716(0x7f4)][_0x195716(0x7fe)]+'):\x20'+_0x496778);}catch(_0x4e875b){this[_0x195716(0x240)][_0x195716(0x3c9)](this[_0x195716(0x4a8)]+'\x20('+this[_0x195716(0x7f4)][_0x195716(0x7fe)]+_0x195716(0x59c)+(_0x4e875b instanceof Error?_0x4e875b[_0x195716(0x31f)]:JSON[_0x195716(0x41d)](_0x4e875b,null,0x2))),_0x496778=_0x4e875b['message'];}if(_0x496778)return{'error':!0x0,'detail':(typeof _0x496778==_0x195716(0x69d)?JSON[_0x195716(0x41d)](_0x496778,null,0x2):_0x496778)['replace'](/[\[\]{}\n]/g,'\x20')[_0x195716(0x869)](/  +/g,'\x20')};}async['scheduleSendMedia'](_0x42fd3b,_0x2ace20){const _0x48691b=a0_0x2101b5;this[_0x48691b(0x240)][_0x48691b(0x667)](this[_0x48691b(0x4a8)]+'\x20('+this[_0x48691b(0x7f4)][_0x48691b(0x7fe)]+_0x48691b(0x821)+_0x2ace20+'\x27');let _0xc306e;_0x42fd3b[_0x48691b(0x1b9)]&&_0x42fd3b[_0x48691b(0x1b9)]['length']>0x0&&(_0xc306e=await this[_0x48691b(0x36e)](_0x42fd3b[_0x48691b(0x1b9)],_0x2ace20));let _0x57b0ed={'number':_0x2ace20,'options':{'delay':_0x42fd3b[_0x48691b(0x64d)],'linkPreview':_0x42fd3b[_0x48691b(0x6f9)]},'mediaMessage':{'mediatype':_0x42fd3b[_0x48691b(0x1a3)],'caption':_0xc306e,'media':_0x42fd3b[_0x48691b(0x593)]}},_0x35eef6=null;try{let _0x445cb7=await this['mediaMessage'](_0x57b0ed);if(_0x445cb7&&_0x445cb7[_0x48691b(0x352)])return{'error':!0x1,'id':_0x445cb7[_0x48691b(0x150)]['id']};_0x35eef6=JSON[_0x48691b(0x41d)](_0x445cb7),this[_0x48691b(0x240)][_0x48691b(0x667)](this['instanceName']+'\x20('+this[_0x48691b(0x7f4)][_0x48691b(0x7fe)]+_0x48691b(0x33f)+_0x35eef6);}catch(_0x26093f){this['logger'][_0x48691b(0x3c9)](this['instanceName']+'\x20('+this[_0x48691b(0x7f4)][_0x48691b(0x7fe)]+_0x48691b(0x6f6)+(_0x26093f instanceof Error?_0x26093f[_0x48691b(0x31f)]:JSON[_0x48691b(0x41d)](_0x26093f,null,0x2))),_0x35eef6=_0x26093f[_0x48691b(0x31f)];}if(_0x35eef6)return{'error':!0x0,'detail':(typeof _0x35eef6=='object'?JSON[_0x48691b(0x41d)](_0x35eef6,null,0x2):_0x35eef6)[_0x48691b(0x869)](/[\[\]{}\n]/g,'\x20')[_0x48691b(0x869)](/  +/g,'\x20')};}async[a0_0x2101b5(0x2f9)](_0x78d3bc,_0xcbc0ee){const _0x82c99d=a0_0x2101b5;this[_0x82c99d(0x240)][_0x82c99d(0x667)](this['instanceName']+'\x20('+this[_0x82c99d(0x7f4)][_0x82c99d(0x7fe)]+_0x82c99d(0x6d3)+_0xcbc0ee+'\x27');let _0x523796={'number':_0xcbc0ee,'options':{'delay':_0x78d3bc[_0x82c99d(0x64d)]},'audioMessage':{'audio':_0x78d3bc[_0x82c99d(0x593)]}},_0x32bad2=null;try{let _0x25042a=await this[_0x82c99d(0x589)](_0x523796);if(_0x25042a&&_0x25042a[_0x82c99d(0x352)])return{'error':!0x1,'id':_0x25042a[_0x82c99d(0x150)]['id']};_0x32bad2=JSON[_0x82c99d(0x41d)](_0x25042a),this[_0x82c99d(0x240)][_0x82c99d(0x667)](this[_0x82c99d(0x4a8)]+'\x20('+this[_0x82c99d(0x7f4)][_0x82c99d(0x7fe)]+_0x82c99d(0x33f)+_0x32bad2);}catch(_0x5389be){this[_0x82c99d(0x240)]['error'](this[_0x82c99d(0x4a8)]+'\x20('+this[_0x82c99d(0x7f4)]['wuid']+_0x82c99d(0x469)+(_0x5389be instanceof Error?_0x5389be[_0x82c99d(0x31f)]:JSON[_0x82c99d(0x41d)](_0x5389be,null,0x2))),_0x32bad2=_0x5389be[_0x82c99d(0x31f)];}if(_0x32bad2)return{'error':!0x0,'detail':(typeof _0x32bad2==_0x82c99d(0x69d)?JSON[_0x82c99d(0x41d)](_0x32bad2,null,0x2):_0x32bad2)[_0x82c99d(0x869)](/[\[\]{}\n]/g,'\x20')[_0x82c99d(0x869)](/  +/g,'\x20')};}async['groupDesc'](_0x3d8fd8){const _0x5f2632=a0_0x2101b5;try{return await this[_0x5f2632(0x796)][_0x5f2632(0x470)](_0x3d8fd8[_0x5f2632(0x5c0)],_0x3d8fd8[_0x5f2632(0x6f7)]),{'update':'success'};}catch(_0x269133){let _0x115bac=_0x5f2632(0x24d),_0xf79bfc=_0x269133 instanceof Error?_0x269133[_0x5f2632(0x31f)]:typeof _0x269133=='object'?JSON['stringify'](_0x269133):_0x269133,_0x4aeec7=_0x115bac+':\x20'+_0xf79bfc;throw this[_0x5f2632(0x240)][_0x5f2632(0x3c9)](this['instanceName']+'\x20('+this[_0x5f2632(0x7f4)][_0x5f2632(0x7fe)]+_0x5f2632(0x33f)+_0x4aeec7),new x(_0x4aeec7);}}async[a0_0x2101b5(0x14d)](_0x4a6919){const _0x4864d7=a0_0x2101b5;try{return await this['client'][_0x4864d7(0x14c)](_0x4a6919[_0x4864d7(0x5c0)],_0x4a6919[_0x4864d7(0x89c)]),{'update':'success'};}catch(_0x272e82){let _0x228466=_0x4864d7(0x3fa),_0x2701d9=_0x272e82 instanceof Error?_0x272e82[_0x4864d7(0x31f)]:typeof _0x272e82==_0x4864d7(0x69d)?JSON[_0x4864d7(0x41d)](_0x272e82):_0x272e82,_0x9a7036=_0x228466+':\x20'+_0x2701d9;throw this[_0x4864d7(0x240)][_0x4864d7(0x3c9)](this[_0x4864d7(0x4a8)]+'\x20('+this[_0x4864d7(0x7f4)][_0x4864d7(0x7fe)]+_0x4864d7(0x33f)+_0x9a7036),new x(_0x9a7036);}}async[a0_0x2101b5(0x40e)](_0x30ef4c){const _0x36f4a3=a0_0x2101b5;try{let _0x1d6f7c=await this[_0x36f4a3(0x796)][_0x36f4a3(0x7da)](_0x30ef4c['groupJid'],_0x30ef4c[_0x36f4a3(0x6cb)]);return{'success':!0x0};}catch(_0x5c705e){let _0x4dea08=_0x36f4a3(0x3e8),_0x3e9153=_0x5c705e instanceof Error?_0x5c705e[_0x36f4a3(0x31f)]:typeof _0x5c705e==_0x36f4a3(0x69d)?JSON[_0x36f4a3(0x41d)](_0x5c705e):_0x5c705e,_0x58c0c4=_0x4dea08+':\x20'+_0x3e9153;throw this[_0x36f4a3(0x240)]['error'](this['instanceName']+'\x20('+this[_0x36f4a3(0x7f4)][_0x36f4a3(0x7fe)]+_0x36f4a3(0x33f)+_0x58c0c4),new x(_0x58c0c4);}}async['groupSetting'](_0x6ad075){const _0x538f5a=a0_0x2101b5;try{return await this['client'][_0x538f5a(0x16d)](_0x6ad075['groupJid'],_0x6ad075[_0x538f5a(0x5c7)]),{'update':_0x538f5a(0x29e)};}catch(_0xba573a){let _0x2fed02=_0x538f5a(0x3cb),_0x5249b2=_0xba573a instanceof Error?_0xba573a[_0x538f5a(0x31f)]:typeof _0xba573a==_0x538f5a(0x69d)?JSON['stringify'](_0xba573a):_0xba573a,_0x475e2b=_0x2fed02+':\x20'+_0x5249b2;throw this['logger'][_0x538f5a(0x3c9)](this[_0x538f5a(0x4a8)]+'\x20('+this[_0x538f5a(0x7f4)][_0x538f5a(0x7fe)]+_0x538f5a(0x33f)+_0x475e2b),new x(_0x475e2b);}}async[a0_0x2101b5(0x2b1)](_0x1ea6d){const _0x1c7cb1=a0_0x2101b5;try{let _0x11c04c;if((0x0,J[_0x1c7cb1(0x719)])(_0x1ea6d['image'])){let _0x5a895b=new Date()[_0x1c7cb1(0x8bc)](),_0x1db8fd=_0x1ea6d[_0x1c7cb1(0x2c4)]+_0x1c7cb1(0x43d)+_0x5a895b;_0x11c04c=(await Q[_0x1c7cb1(0x7ae)][_0x1c7cb1(0x34a)](_0x1db8fd,{'responseType':'arraybuffer'}))[_0x1c7cb1(0x1a0)];}else{if((0x0,J[_0x1c7cb1(0x5e8)])(_0x1ea6d[_0x1c7cb1(0x2c4)]))_0x11c04c=Buffer[_0x1c7cb1(0x50f)](_0x1ea6d[_0x1c7cb1(0x2c4)],_0x1c7cb1(0x623));else throw new m(_0x1c7cb1(0x2a7));}return await this[_0x1c7cb1(0x796)]['updateProfilePicture'](_0x1ea6d[_0x1c7cb1(0x5c0)],_0x11c04c),{'update':_0x1c7cb1(0x29e)};}catch(_0x228067){let _0x458e41=_0x1c7cb1(0x5f9),_0x2b46b2=_0x228067 instanceof Error?_0x228067[_0x1c7cb1(0x31f)]:typeof _0x228067==_0x1c7cb1(0x69d)?JSON['stringify'](_0x228067):_0x228067,_0x143257=_0x458e41+':\x20'+_0x2b46b2;throw this[_0x1c7cb1(0x240)][_0x1c7cb1(0x3c9)](this['instanceName']+'\x20('+this['instance'][_0x1c7cb1(0x7fe)]+'):\x20'+_0x143257),new x(_0x143257);}}},jt=class u{constructor(_0xcb4108,_0x10728c,_0x46d001){const _0x2dabdb=a0_0x2101b5;this[_0x2dabdb(0x286)]=_0xcb4108,this[_0x2dabdb(0x596)]=_0x10728c,this[_0x2dabdb(0x43b)]=_0x46d001,this['db']={},this[_0x2dabdb(0x6a7)]={},this[_0x2dabdb(0x240)]=new $(u[_0x2dabdb(0x89c)]),this[_0x2dabdb(0x34b)]={},(this[_0x2dabdb(0x3cf)](),this[_0x2dabdb(0x5a3)](),Object[_0x2dabdb(0x6b1)](this['db'],_0x10728c[_0x2dabdb(0x34a)](_0x2dabdb(0x5b1))),Object[_0x2dabdb(0x6b1)](this['redis'],_0x10728c['get'](_0x2dabdb(0x61a))),this['dbInstance']=this['db'][_0x2dabdb(0x6f5)]?this[_0x2dabdb(0x43b)][_0x2dabdb(0x5cd)]?.['db'](this['db'][_0x2dabdb(0x656)]['DB_PREFIX_NAME']+_0x2dabdb(0x852)):void 0x0,this[_0x2dabdb(0x361)]=this[_0x2dabdb(0x6a7)][_0x2dabdb(0x6f5)]?new pe(this['redis']):void 0x0);}async['instanceInfo'](_0x33d50b){const _0x33f876=a0_0x2101b5;if(_0x33d50b&&!this[_0x33f876(0x34b)][_0x33d50b])throw new U(_0x33f876(0x822)+_0x33d50b+_0x33f876(0x708));let _0x158fc7=[];for await(let [_0xee48ea,_0x3bea7d]of Object[_0x33f876(0x7bc)](this[_0x33f876(0x34b)]))if(_0x3bea7d&&_0x3bea7d[_0x33f876(0x3c8)][_0x33f876(0x293)]==='open'){let _0x2eb02c=await this['repository'][_0x33f876(0x7e4)][_0x33f876(0x604)](_0xee48ea);_0x158fc7[_0x33f876(0x2a9)]({'instance':{'instanceName':_0xee48ea,'apikey':_0x2eb02c[_0x33f876(0x77b)],'owner':_0x3bea7d['wuid'],'profileName':await _0x3bea7d[_0x33f876(0x765)]()||'not\x20loaded','profilePictureUrl':_0x3bea7d[_0x33f876(0x728)]}});}return _0x158fc7[_0x33f876(0x604)](_0x2fcd9c=>_0x2fcd9c[_0x33f876(0x7f4)]['instanceName']===_0x33d50b)??_0x158fc7;}async[a0_0x2101b5(0x73b)](_0x3ba1a5){const _0x1bb3a6=a0_0x2101b5;if(this['db'][_0x1bb3a6(0x6f5)]&&(await this[_0x1bb3a6(0x43b)][_0x1bb3a6(0x5cd)]['connect'](),(await this['dbInstance'][_0x1bb3a6(0x580)]())[_0x1bb3a6(0x608)]>0x0&&await this[_0x1bb3a6(0x743)]['dropCollection'](_0x3ba1a5)),this[_0x1bb3a6(0x6a7)][_0x1bb3a6(0x6f5)]){this[_0x1bb3a6(0x361)][_0x1bb3a6(0x547)]=_0x3ba1a5,await this['cache'][_0x1bb3a6(0x55b)]();return;}}async[a0_0x2101b5(0x63e)](){const _0x33a54a=a0_0x2101b5;await this[_0x33a54a(0x3b0)]();let _0x3e3513=async _0x17e78a=>{const _0x250c54=_0x33a54a;let _0x2efd7c=new $e(this[_0x250c54(0x596)],this[_0x250c54(0x286)],this[_0x250c54(0x43b)]);_0x2efd7c['instanceName']=_0x17e78a,await _0x2efd7c['connectToWhatsapp'](),this[_0x250c54(0x34b)][_0x17e78a]=_0x2efd7c;};try{if(this[_0x33a54a(0x6a7)][_0x33a54a(0x6f5)]){let _0x57d166=await this[_0x33a54a(0x361)]['instanceKeys']();_0x57d166?.[_0x33a54a(0x608)]>0x0&&_0x57d166[_0x33a54a(0x600)](async _0x1d9a44=>await _0x3e3513(_0x1d9a44[_0x33a54a(0x2bd)](':')[0x1]));return;}if(this['db'][_0x33a54a(0x6f5)]){await this[_0x33a54a(0x43b)][_0x33a54a(0x5cd)]['connect']();let _0x4dd6bd=await this[_0x33a54a(0x743)][_0x33a54a(0x580)]();_0x4dd6bd[_0x33a54a(0x608)]>0x0&&_0x4dd6bd[_0x33a54a(0x600)](async _0x8757c3=>await _0x3e3513(_0x8757c3[_0x33a54a(0x889)][_0x33a54a(0x869)](/^[\w-]+\./,'')));return;}}catch(_0xeb377d){this['logger']['error'](_0xeb377d);}}async['cleanDisconnectedInstances'](){const _0x5ddf58=a0_0x2101b5;try{let _0xd3507b=await this[_0x5ddf58(0x43b)][_0x5ddf58(0x7e4)][_0x5ddf58(0x666)]({'online':!0x1});for(let _0x1ee1fe of _0xd3507b){let _0x3f96ba=_0x1ee1fe[_0x5ddf58(0x1b8)];await ae[_0x5ddf58(0x1c4)](B,_0x3f96ba);}console[_0x5ddf58(0x509)](_0x5ddf58(0x4fc)+_0xd3507b[_0x5ddf58(0x608)]);let _0x4da65d={'online':!0x1},_0x5c1b72=await this[_0x5ddf58(0x43b)][_0x5ddf58(0x7e4)]['deleteMany'](_0x4da65d);console[_0x5ddf58(0x509)](_0x5ddf58(0x261)+_0x5c1b72[_0x5ddf58(0x704)]);}catch(_0x441aa6){console[_0x5ddf58(0x3c9)](_0x5ddf58(0x1bd),_0x441aa6);}}async['InstancesAlterarTodas'](){const _0x1ebe2a=a0_0x2101b5;try{let _0x23c171={'online':!0x1},_0x16b877={'online':!0x1,'lastDisconnect':Date[_0x1ebe2a(0x87f)]()},_0x2b028a=await this[_0x1ebe2a(0x43b)][_0x1ebe2a(0x7e4)][_0x1ebe2a(0x219)](_0x23c171,_0x16b877);await this[_0x1ebe2a(0x779)]();}catch(_0x59863){console['error'](_0x1ebe2a(0x597),_0x59863);}}[a0_0x2101b5(0x3cf)](){const _0x38651d=a0_0x2101b5;this[_0x38651d(0x286)]['on'](_0x38651d(0x3d2),async _0x154692=>{const _0x4b9631=_0x38651d;try{this[_0x4b9631(0x34b)][_0x154692]=void 0x0;}catch{}try{this[_0x4b9631(0x73b)](_0x154692);}finally{this['logger']['warn'](_0x4b9631(0x822)+_0x154692+_0x4b9631(0x190));}});}[a0_0x2101b5(0x5a3)](){const _0x457a0c=a0_0x2101b5;this[_0x457a0c(0x286)]['on'](_0x457a0c(0x39f),async _0x3656ff=>{const _0x208f24=_0x457a0c;try{this[_0x208f24(0x34b)][_0x3656ff]=void 0x0;}catch{}try{this[_0x208f24(0x73b)](_0x3656ff);}finally{this[_0x208f24(0x240)][_0x208f24(0x7e3)](_0x208f24(0x822)+_0x3656ff+'\x22\x20-\x20NOT\x20CONNECTION');}});}},Jt=class extends _{[a0_0x2101b5(0x2ba)](_0x237de4){return ta(_0x237de4);}async['insert'](_0x1100cc){const _0x3bc51d=a0_0x2101b5;if(_0x1100cc['length']!==0x0)try{return{'insertCount':(await this[_0x3bc51d(0x2ba)](_0x1100cc[0x0][_0x3bc51d(0x235)])[_0x3bc51d(0x250)]([..._0x1100cc]))['length']};}catch(_0x3fa53d){return _0x3fa53d;}}async[a0_0x2101b5(0x604)](_0x5223e6,_0xd0521f){const _0xb257f6=a0_0x2101b5;try{let _0x5de9f1=this['getChatModelForOwner'](_0xd0521f),_0x51dd26=A(_0x5223e6['where']);return await _0x5de9f1[_0xb257f6(0x604)](_0x51dd26)[_0xb257f6(0x305)]({'lastmsg':-0x1})['limit'](_0x5223e6?.['limit']??0x0)[_0xb257f6(0x70f)]();}catch{return[];}}async[a0_0x2101b5(0x205)](_0x206d23,_0x4a52ce){const _0x6afb69=a0_0x2101b5;try{let _0x3de9e4=this[_0x6afb69(0x2ba)](_0x4a52ce),_0x6359e0=A(_0x206d23[_0x6afb69(0x702)]);return _0x6359e0['groupdata.participants']={'$ne':[]},await _0x3de9e4[_0x6afb69(0x604)](_0x6359e0)[_0x6afb69(0x305)]({'lastmsg':-0x1})['limit'](_0x206d23?.['limit']??0x0)[_0x6afb69(0x70f)]();}catch{return[];}}async[a0_0x2101b5(0x57b)](_0x1b1577,_0x1a08af){const _0x5c9789=a0_0x2101b5;try{return{'deletedCount':(await this[_0x5c9789(0x2ba)](_0x1a08af)['deleteMany']({..._0x1b1577['where']}))['deletedCount']};}catch(_0x239bb8){return{'error':_0x239bb8?.[_0x5c9789(0x60f)]()};}}async[a0_0x2101b5(0x3f7)](_0x2c4cc9,_0x5df177){const _0xef975e=a0_0x2101b5;try{return await this[_0xef975e(0x2ba)](_0x5df177)[_0xef975e(0x690)]({..._0x2c4cc9[_0xef975e(0x702)]}),[];}catch(_0x1d40bb){return{'error':_0x1d40bb?.[_0xef975e(0x60f)]()};}}async[a0_0x2101b5(0x505)](_0x4a5f8d,_0x44ff08){const _0x5c0b2d=a0_0x2101b5;try{let _0x53b0d3=this[_0x5c0b2d(0x2ba)](_0x44ff08),_0xbccf69=A(_0x4a5f8d[_0x5c0b2d(0x702)]);return await _0x53b0d3[_0x5c0b2d(0x505)](_0xbccf69)[_0x5c0b2d(0x70f)]();}catch{return null;}}async[a0_0x2101b5(0x858)](_0x95f31f,_0x1a02dc,_0x1ec4b5,_0x22bb06,_0x220971=a0_0x2101b5(0x6d1)){const _0x21a953=a0_0x2101b5;try{let _0x58dc02={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x22bb06},_0x50c9e7=this[_0x21a953(0x2ba)](_0x1ec4b5),_0x1f95d5=A(_0x95f31f[_0x21a953(0x702)]);Object['keys'](_0x1a02dc)[_0x21a953(0x600)](_0x141702=>{_0x1a02dc[_0x141702]==null&&delete _0x1a02dc[_0x141702];});let _0x71a2ae={};return _0x71a2ae[_0x220971]=_0x1a02dc,await _0x50c9e7[_0x21a953(0x5de)](_0x1f95d5,_0x71a2ae,_0x58dc02);}catch(_0x33a01b){return console['error'](_0x33a01b),null;}}async['updateMany'](_0x5ab290){const _0x50d63f=a0_0x2101b5;try{let _0x218d41=this[_0x50d63f(0x2ba)](_0x5ab290[0x0]['query'][_0x50d63f(0x702)]['owner']),_0x43fd46=_0x5ab290[_0x50d63f(0x5e6)](_0x3b66b4=>({'updateOne':{'filter':{..._0x3b66b4['query'][_0x50d63f(0x702)]},'update':{'$set':_0x3b66b4[_0x50d63f(0x842)]},'upsert':!0x0}})),_0xfe3c9c=await _0x218d41['bulkWrite'](_0x43fd46);return _0xfe3c9c[_0x50d63f(0x454)]+_0xfe3c9c['upsertedCount'];}catch(_0x4eabee){return console[_0x50d63f(0x3c9)](_0x4eabee),0x0;}}async['removeUnusedChatFields'](_0x300914){const _0x37d594=a0_0x2101b5;try{let _0x112d89={'group_isCommunity':'','group_announce':'','group_size':''},_0x495de2={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x2b1e1c={'$unset':_0x112d89};return(await this['getChatModelForOwner'](_0x300914)[_0x37d594(0x877)](_0x495de2,_0x2b1e1c))[_0x37d594(0x454)];}catch(_0x45600f){return console[_0x37d594(0x3c9)](_0x37d594(0x2c7),_0x45600f),0x0;}}async[a0_0x2101b5(0x795)](_0x5b5ab4){const _0x5e7bb9=a0_0x2101b5;try{let _0x100b95=this[_0x5e7bb9(0x2ba)](_0x5b5ab4),_0x18f588={'leadInfo.etiquetas':{'$exists':!0x1}},_0x47a48a={'$set':{'leadInfo.etiquetas':[]}};return(await _0x100b95[_0x5e7bb9(0x877)](_0x18f588,_0x47a48a))['modifiedCount'];}catch(_0x1041d0){return console['error'](_0x1041d0),0x0;}}async['updateMissingTags'](_0x5e9ed3){const _0x339d92=a0_0x2101b5;try{let _0x4b3380=this[_0x339d92(0x2ba)](_0x5e9ed3),_0x50fbbe={'leadInfo.tags':{'$exists':!0x1}},_0x5bb105={'$set':{'leadInfo.tags':[]}};return(await _0x4b3380['updateMany'](_0x50fbbe,_0x5bb105))[_0x339d92(0x454)];}catch(_0x506cc9){return console[_0x339d92(0x3c9)](_0x506cc9),0x0;}}async[a0_0x2101b5(0x875)](_0x45d35d){const _0x37b891=a0_0x2101b5;try{let _0x41b4e3=this[_0x37b891(0x2ba)](_0x45d35d),_0x2c00d2={'leadInfo.customFields':{'$exists':!0x1}},_0x2ed038={'$set':{'leadInfo.customFields':[]}};return(await _0x41b4e3[_0x37b891(0x877)](_0x2c00d2,_0x2ed038))[_0x37b891(0x454)];}catch(_0x4a619c){return console['error'](_0x4a619c),0x0;}}async['insertMany'](_0x44bf05,_0x262764){const _0x2db500=a0_0x2101b5;if(!Array[_0x2db500(0x413)](_0x44bf05)||_0x44bf05[_0x2db500(0x608)]===0x0)throw new Error(_0x2db500(0x24a));try{return(await this[_0x2db500(0x2ba)](_0x262764)[_0x2db500(0x250)](_0x44bf05))[_0x2db500(0x608)];}catch(_0x1dab18){throw console['error']('Erro\x20ao\x20inserir\x20chats:',_0x1dab18),_0x1dab18;}}async['deleteChat'](_0x576a24,_0x306881){const _0x3252e9=a0_0x2101b5;try{await this[_0x3252e9(0x2ba)](_0x306881)[_0x3252e9(0x66e)]({'_id':_0x576a24});}catch(_0x59493e){throw console[_0x3252e9(0x3c9)](_0x3252e9(0x658),_0x59493e),_0x59493e;}}},qt=class extends _{constructor(_0x15a06a,_0x1fc89b,_0x1d42ac){const _0x43c4a3=a0_0x2101b5;super(_0x1fc89b),this['cacheContactModel']=_0x15a06a,this[_0x43c4a3(0x596)]=_0x1fc89b,this['dbConnection']=_0x1d42ac;}async['insert'](_0x9acf1f){const _0x177c73=a0_0x2101b5;if(_0x9acf1f[_0x177c73(0x608)]!==0x0)try{return{'insertCount':(await this['cacheContactModel'][_0x177c73(0x250)]([..._0x9acf1f]))[_0x177c73(0x608)]};}catch(_0x1893e0){return _0x1893e0;}}async[a0_0x2101b5(0x842)](_0x3011b4,_0x3009a){const _0xe8fb09=a0_0x2101b5;try{let _0x5771ec=A(_0x3011b4[_0xe8fb09(0x702)]);return{'updatedCount':(await this[_0xe8fb09(0x586)][_0xe8fb09(0x877)](_0x5771ec,{'$set':_0x3009a}))[_0xe8fb09(0x454)]};}catch(_0x260317){return console[_0xe8fb09(0x3c9)](_0xe8fb09(0x4f3),_0x260317),{'error':_0x260317[_0xe8fb09(0x60f)]()};}}async[a0_0x2101b5(0x6fe)](_0x25f5b5){const _0x38b699=a0_0x2101b5;try{let _0x55157e={'_id':{'$in':_0x25f5b5}};return await this[_0x38b699(0x586)][_0x38b699(0x604)](_0x55157e)[_0x38b699(0x70f)]();}catch(_0x54d960){return console[_0x38b699(0x3c9)]('Error\x20finding\x20many\x20contacts:',_0x54d960),[];}}async[a0_0x2101b5(0x57b)](_0x220af4){const _0x55c771=a0_0x2101b5;try{return{'deletedCount':(await this['cacheContactModel'][_0x55c771(0x690)]({..._0x220af4['where']}))[_0x55c771(0x797)]};}catch(_0x1d168b){return{'error':_0x1d168b?.[_0x55c771(0x60f)]()};}}async[a0_0x2101b5(0x604)](_0x251ad0){const _0x114a2b=a0_0x2101b5;try{let _0x1ca42b=A(_0x251ad0[_0x114a2b(0x702)]);return await this[_0x114a2b(0x586)][_0x114a2b(0x604)](_0x1ca42b)[_0x114a2b(0x2a6)](_0x251ad0?.[_0x114a2b(0x2a6)]??0x0)['lean']();}catch{return[];}}async[a0_0x2101b5(0x505)](_0x5e3fd6){const _0x4ee8e6=a0_0x2101b5;try{let _0x224d60=A(_0x5e3fd6['where']);return await this[_0x4ee8e6(0x586)][_0x4ee8e6(0x505)](_0x224d60)[_0x4ee8e6(0x70f)]();}catch{return null;}}},Vt=class extends _{constructor(_0x280fbc,_0x2239d1,_0x3898f8){const _0x34e70a=a0_0x2101b5;super(_0x2239d1),this[_0x34e70a(0x33c)]=_0x280fbc,this['configService']=_0x2239d1,this[_0x34e70a(0x449)]=_0x3898f8;}async[a0_0x2101b5(0x7a2)](_0xac381f){const _0x5a7a10=a0_0x2101b5;if(_0xac381f[_0x5a7a10(0x608)]!==0x0)try{return{'insertCount':(await this[_0x5a7a10(0x33c)]['insertMany']([..._0xac381f]))['length']};}catch(_0x2d44e5){return _0x2d44e5;}}async['update'](_0x2b93f1,_0x2e175c){const _0x6c2368=a0_0x2101b5;try{let _0x2f2c51=A(_0x2b93f1[_0x6c2368(0x702)]);return{'updatedCount':(await this[_0x6c2368(0x33c)]['updateMany'](_0x2f2c51,{'$set':_0x2e175c}))[_0x6c2368(0x454)]};}catch(_0x3b1ea0){return console[_0x6c2368(0x3c9)](_0x6c2368(0x4f3),_0x3b1ea0),{'error':_0x3b1ea0[_0x6c2368(0x60f)]()};}}async[a0_0x2101b5(0x57b)](_0x3671c9){const _0x289a91=a0_0x2101b5;try{return{'deletedCount':(await this['messageLogsModel'][_0x289a91(0x690)]({..._0x3671c9[_0x289a91(0x702)]}))[_0x289a91(0x797)]};}catch(_0x4fe008){return{'error':_0x4fe008?.[_0x289a91(0x60f)]()};}}async[a0_0x2101b5(0x505)](_0x538f60){const _0x3fffd0=a0_0x2101b5;try{let _0x89574c=A(_0x538f60[_0x3fffd0(0x702)]);return await this[_0x3fffd0(0x33c)]['findOne'](_0x89574c)['lean']();}catch{return null;}}},Gt=class extends _{[a0_0x2101b5(0x420)](_0x4c16f7){return Ea(_0x4c16f7);}async[a0_0x2101b5(0x858)](_0x4a6ccb,_0x4aca1a,_0x516511,_0x5802d5){const _0x150259=a0_0x2101b5;try{let _0x4300af={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x5802d5},_0x52c489=this[_0x150259(0x420)](_0x516511),_0x1a1d9c=A(_0x4a6ccb[_0x150259(0x702)]);return await _0x52c489[_0x150259(0x5de)](_0x1a1d9c,{'$set':_0x4aca1a},_0x4300af);}catch(_0x3a48de){return console[_0x150259(0x3c9)](_0x3a48de),null;}}async[a0_0x2101b5(0x604)](_0x273b58,_0x4742a9){const _0x46389b=a0_0x2101b5;try{let _0x6530d0=this[_0x46389b(0x420)](_0x4742a9),_0x1c394c=A(_0x273b58[_0x46389b(0x702)]);return await _0x6530d0[_0x46389b(0x604)](_0x1c394c);}catch(_0x368998){console[_0x46389b(0x3c9)](_0x368998);}}async[a0_0x2101b5(0x57b)](_0x441c04,_0x262fbc){const _0x1937ef=a0_0x2101b5;try{let _0x447f62=this[_0x1937ef(0x420)](_0x262fbc),_0x51711b=A(_0x441c04[_0x1937ef(0x702)]);await _0x447f62['deleteMany'](_0x51711b);}catch(_0x51b130){console['error'](_0x51b130);}}async['deleteAll'](_0x3e59d5){const _0x73a2fd=a0_0x2101b5;try{return await this[_0x73a2fd(0x420)](_0x3e59d5)[_0x73a2fd(0x1bc)][_0x73a2fd(0x214)](),{'success':!0x0};}catch(_0x390be8){return console[_0x73a2fd(0x3c9)](_0x390be8),{'success':!0x1,'error':_0x390be8};}}},Bt=class{constructor(_0x2ba1f3){const _0x3d7311=a0_0x2101b5;this[_0x3d7311(0x67d)]=_0x2ba1f3;}async[a0_0x2101b5(0x7a5)]({instanceName:_0x537a5d},_0x5bcf6e){const _0x32cdc7=a0_0x2101b5;return await this[_0x32cdc7(0x67d)][_0x32cdc7(0x34b)][_0x537a5d][_0x32cdc7(0x7a5)](_0x5bcf6e);}async[a0_0x2101b5(0x56b)]({instanceName:_0x4a2848},_0x2c4f14){const _0x5a9d60=a0_0x2101b5;return await this['waMonitor']['waInstances'][_0x4a2848][_0x5a9d60(0x56b)](_0x2c4f14);}async[a0_0x2101b5(0x3bd)]({instanceName:_0x44350f},_0x302157){const _0x3bf4d5=a0_0x2101b5;return await this[_0x3bf4d5(0x67d)][_0x3bf4d5(0x34b)][_0x44350f][_0x3bf4d5(0x3bd)](_0x302157);}async['readMessage']({instanceName:_0x364d56},_0x3c98da){const _0x3454e2=a0_0x2101b5;return await this['waMonitor'][_0x3454e2(0x34b)][_0x364d56][_0x3454e2(0x69b)](_0x3c98da);}async['archiveChat']({instanceName:_0x2f07d8},_0x3106ad){const _0x1d111d=a0_0x2101b5;return await this[_0x1d111d(0x67d)][_0x1d111d(0x34b)][_0x2f07d8][_0x1d111d(0x5aa)](_0x3106ad);}async[a0_0x2101b5(0x451)]({instanceName:_0x2ed1b0},_0x9fc213){const _0xffed4d=a0_0x2101b5;return await this[_0xffed4d(0x67d)][_0xffed4d(0x34b)][_0x2ed1b0][_0xffed4d(0x451)](_0x9fc213);}async['fetchProfilePicture']({instanceName:_0x16e892},_0x2a5f2a){const _0x5baf67=a0_0x2101b5;return await this[_0x5baf67(0x67d)][_0x5baf67(0x34b)][_0x16e892]['profilePicture'](_0x2a5f2a[_0x5baf67(0x17a)]);}async[a0_0x2101b5(0x5ac)]({instanceName:_0x326f06},_0x51f293){const _0x18e8aa=a0_0x2101b5;return await this[_0x18e8aa(0x67d)][_0x18e8aa(0x34b)][_0x326f06]['fetchProfile'](_0x51f293[_0x18e8aa(0x17a)]);}async['updatePresence']({instanceName:_0x15c7a5},_0x42d292){const _0x28bce4=a0_0x2101b5;return await this[_0x28bce4(0x67d)][_0x28bce4(0x34b)][_0x15c7a5][_0x28bce4(0x73e)](_0x42d292);}async[a0_0x2101b5(0x5df)]({instanceName:_0x48d746},_0x2fb117){const _0x2d6a22=a0_0x2101b5;return await this[_0x2d6a22(0x67d)][_0x2d6a22(0x34b)][_0x48d746][_0x2d6a22(0x5df)](_0x2fb117);}async[a0_0x2101b5(0x2d6)]({instanceName:_0x388d3d},_0x5b750f){const _0x1fa1fd=a0_0x2101b5;return await this[_0x1fa1fd(0x67d)][_0x1fa1fd(0x34b)][_0x388d3d]['getBase64FromMediaMessage'](_0x5b750f);}async[a0_0x2101b5(0x255)]({instanceName:_0x482394},_0x221f6f){const _0x50da47=a0_0x2101b5;return await this[_0x50da47(0x67d)]['waInstances'][_0x482394][_0x50da47(0x255)](_0x221f6f);}async['fetchLabels']({instanceName:_0x5e60a9}){const _0x44865a=a0_0x2101b5;return await this[_0x44865a(0x67d)][_0x44865a(0x34b)][_0x5e60a9][_0x44865a(0x8bb)]();}async[a0_0x2101b5(0x262)]({instanceName:_0x46fcf7}){const _0x36adda=a0_0x2101b5;return await this[_0x36adda(0x67d)][_0x36adda(0x34b)][_0x46fcf7]['fetchChats']();}async[a0_0x2101b5(0x3e9)]({instanceName:_0x4fdf10}){const _0x40224b=a0_0x2101b5;return await this['waMonitor'][_0x40224b(0x34b)][_0x4fdf10][_0x40224b(0x3e9)]();}async[a0_0x2101b5(0x516)]({instanceName:_0x3aef9b},_0x279fc2){const _0x3e9dcd=a0_0x2101b5;return await this['waMonitor'][_0x3e9dcd(0x34b)][_0x3aef9b]['updatePrivacySettings'](_0x279fc2);}async[a0_0x2101b5(0x626)]({instanceName:_0x7b5d74},_0x528596){const _0x5fdc41=a0_0x2101b5;return await this[_0x5fdc41(0x67d)][_0x5fdc41(0x34b)][_0x7b5d74][_0x5fdc41(0x626)](_0x528596['number']);}async[a0_0x2101b5(0x6a0)]({instanceName:_0x41d491},_0x400bab){const _0x448084=a0_0x2101b5;return await this[_0x448084(0x67d)][_0x448084(0x34b)][_0x41d491][_0x448084(0x6a0)](_0x400bab[_0x448084(0x89c)]);}async[a0_0x2101b5(0x1f9)]({instanceName:_0x4dd97b},_0x55ece8){const _0x235db0=a0_0x2101b5;return await this[_0x235db0(0x67d)][_0x235db0(0x34b)][_0x4dd97b][_0x235db0(0x1f9)](_0x55ece8[_0x235db0(0x352)]);}async[a0_0x2101b5(0x809)]({instanceName:_0x4908b1},_0x18523f){const _0x1242a4=a0_0x2101b5;return await this['waMonitor'][_0x1242a4(0x34b)][_0x4908b1][_0x1242a4(0x809)](_0x18523f['picture']);}async[a0_0x2101b5(0x665)]({instanceName:_0x3dc95d},_0x4688c6){const _0x3f837c=a0_0x2101b5;return await this['waMonitor']['waInstances'][_0x3dc95d][_0x3f837c(0x665)]();}},Wt=require(a0_0x2101b5(0x89f)),zt=class u{constructor(_0x299298,_0x5bb533,_0x439e76,_0x205d82,_0x423ac6){const _0x26159f=a0_0x2101b5;this['waMonitor']=_0x299298,this[_0x26159f(0x596)]=_0x5bb533,this[_0x26159f(0x43b)]=_0x439e76,this['eventEmitter']=_0x205d82,this['authService']=_0x423ac6,this[_0x26159f(0x240)]=new $(u[_0x26159f(0x89c)]);}async['createInstance']({instanceName:_0x3f0f70,apikey:_0x1e84aa,number:_0x48efcb,proxy:_0x223e8b=!0x0}){const _0x229e4a=a0_0x2101b5;try{let _0x29ff6f=new $e(this[_0x229e4a(0x596)],this[_0x229e4a(0x286)],this['repository']);_0x29ff6f[_0x229e4a(0x4a8)]=_0x3f0f70,this['waMonitor'][_0x229e4a(0x34b)][_0x29ff6f[_0x229e4a(0x4a8)]]=_0x29ff6f;let _0x3dc657={};_0x1e84aa?(await this[_0x229e4a(0x43b)][_0x229e4a(0x7e4)][_0x229e4a(0x65e)]({'apikey':_0x1e84aa},_0x3f0f70),_0x3dc657[_0x229e4a(0x77b)]=_0x1e84aa):_0x3dc657=await this['authService'][_0x229e4a(0x757)]({'instanceName':_0x29ff6f[_0x229e4a(0x4a8)]});let _0x25ac8d;if(_0x48efcb){if(_0x25ac8d=await this[_0x229e4a(0x628)](_0x48efcb),_0x25ac8d[_0x229e4a(0x3c9)])throw new x(_0x25ac8d[_0x229e4a(0x3c9)]['toString']());_0x48efcb=_0x25ac8d[_0x229e4a(0x17a)];}let _0x2fc385;return await _0x29ff6f[_0x229e4a(0x802)](_0x48efcb),await(0x0,Wt[_0x229e4a(0x64d)])(0xfa0),_0x48efcb&&await(0x0,Wt[_0x229e4a(0x64d)])(0xbb8),_0x2fc385=_0x29ff6f['qrCode'],{'instance':{'instanceName':_0x29ff6f[_0x229e4a(0x4a8)],'status':_0x229e4a(0x182)},'hash':_0x3dc657,'qrcode':_0x2fc385};}catch(_0x15c8b1){throw this[_0x229e4a(0x240)][_0x229e4a(0x3c9)](_0x15c8b1),_0x15c8b1;}}async['connectToWhatsappController']({instanceName:_0x537707,number:_0x3fc90a=null}){const _0x12a293=a0_0x2101b5;try{let _0x5d5f12=this[_0x12a293(0x67d)][_0x12a293(0x34b)][_0x537707];switch(_0x5d5f12?.['connectionStatus']?.[_0x12a293(0x293)]){case'close':return await _0x5d5f12[_0x12a293(0x802)](_0x3fc90a),await(0x0,Wt[_0x12a293(0x64d)])(0x7d0),_0x5d5f12[_0x12a293(0x5e4)];case _0x12a293(0x84a):return _0x5d5f12[_0x12a293(0x5e4)];default:return await this[_0x12a293(0x668)]({'instanceName':_0x537707});}}catch(_0x368944){this['logger'][_0x12a293(0x509)](_0x368944);}}async[a0_0x2101b5(0x668)]({instanceName:_0x85dbe6}){const _0x478056=a0_0x2101b5;let _0x1363d6=this[_0x478056(0x67d)]['waInstances'][_0x85dbe6][_0x478056(0x3c8)],_0x43f1d6=null;_0x1363d6[_0x478056(0x293)]==='open'&&_0x85dbe6&&(_0x43f1d6=await this['waMonitor'][_0x478056(0x173)](_0x85dbe6));let _0x51340d=null;return _0x1363d6[_0x478056(0x293)]===_0x478056(0x84a)&&_0x85dbe6&&(_0x51340d=this[_0x478056(0x67d)][_0x478056(0x34b)][_0x85dbe6]['qrCode']),{'instance':_0x85dbe6,'connectionStatus':_0x1363d6,'instanceInfo':_0x43f1d6,'qrcode':_0x51340d};}async['verifyWhatsAppNumber'](_0x2497df){const _0x153c5e=a0_0x2101b5;_0x2497df=_0x2497df[_0x153c5e(0x869)](/\D/g,'');let _0x2e964a=Object[_0x153c5e(0x59a)](this[_0x153c5e(0x67d)][_0x153c5e(0x34b)])['filter'](_0x35ce81=>{const _0xcc2438=_0x153c5e;let _0xc7c788=this[_0xcc2438(0x67d)][_0xcc2438(0x34b)][_0x35ce81];return _0xc7c788&&_0xc7c788[_0xcc2438(0x3c8)]&&_0xc7c788[_0xcc2438(0x3c8)]['state']===_0xcc2438(0x71e);});if(_0x2e964a[_0x153c5e(0x608)]===0x0)return{'number':this[_0x153c5e(0x1ed)](_0x2497df)};let _0x51c680=Math['floor'](Math['random']()*_0x2e964a['length']),_0x1b60ce=_0x2e964a[_0x51c680];try{let _0x69de44=(await this[_0x153c5e(0x67d)][_0x153c5e(0x34b)][_0x1b60ce]['whatsappNumber']({'numbers':[_0x2497df]}))['shift']();return _0x69de44[_0x153c5e(0x6de)]?{'number':_0x69de44[_0x153c5e(0x58f)]['replace'](_0x153c5e(0x1b5),'')}:{'number':_0x2497df,'error':'Número\x20não\x20possui\x20WhatsApp.'};}catch(_0x619f85){return this['logger'][_0x153c5e(0x3c9)]('Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:'+_0x619f85),{'number':_0x2497df,'error':'Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.'};}}[a0_0x2101b5(0x1ed)](_0x53591e){let _0x2ec394=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)['exec'](_0x53591e);if(_0x2ec394&&_0x2ec394[0x1]==='55'){let _0x16d680=_0x2ec394[0x2],_0xa662dc=_0x2ec394[0x3],_0x25da06=_0x2ec394[0x4];if(parseInt(_0x16d680)>=0x1f&&_0xa662dc==='9')return _0x2ec394[0x1]+_0x16d680+_0x25da06;}return _0x53591e;}async['restartInstance']({instanceName:_0x20828e}){const _0x875381=a0_0x2101b5;try{return this['waMonitor'][_0x875381(0x34b)][_0x20828e]?.[_0x875381(0x796)]?.['ws']?.[_0x875381(0x584)](),{'status':_0x875381(0x67f),'error':!0x1,'response':{'message':_0x875381(0x56c)}};}catch(_0x17a22b){this[_0x875381(0x240)][_0x875381(0x3c9)](_0x17a22b);}}async['fetchInstances']({instanceName:_0x566546}){const _0x3577d6=a0_0x2101b5;return _0x566546?this[_0x3577d6(0x67d)][_0x3577d6(0x173)](_0x566546):this[_0x3577d6(0x67d)][_0x3577d6(0x173)]();}async[a0_0x2101b5(0x2bc)]({instanceName:_0x29a081}){const _0x4e5dd0=a0_0x2101b5;try{return await this[_0x4e5dd0(0x67d)]['waInstances'][_0x29a081]?.[_0x4e5dd0(0x796)]?.[_0x4e5dd0(0x2bc)]('Log\x20out\x20instance:\x20'+_0x29a081),{'error':!0x1,'message':'Instance\x20logged\x20out'};}catch(_0x209cdb){throw new x(_0x209cdb['toString']());}}async[a0_0x2101b5(0x37b)]({instanceName:_0x39accf}){const _0x33f306=a0_0x2101b5;if((await this[_0x33f306(0x668)]({'instanceName':_0x39accf}))[_0x33f306(0x3c8)][_0x33f306(0x293)]==='open')throw new m([_0x33f306(0x4d0),_0x33f306(0x742)]);try{return delete this[_0x33f306(0x67d)]['waInstances'][_0x39accf],{'error':!0x1,'message':_0x33f306(0x1fb)};}catch(_0x25c9bd){throw new m(_0x25c9bd[_0x33f306(0x60f)]());}}},ce=require('class-validator'),Ht=class{constructor(_0x31a3dc){const _0x1fc491=a0_0x2101b5;this[_0x1fc491(0x67d)]=_0x31a3dc;}async[a0_0x2101b5(0x22f)]({instanceName:_0x3939f8},_0x57ff39){const _0x32c1d2=a0_0x2101b5;return await this[_0x32c1d2(0x67d)][_0x32c1d2(0x34b)][_0x3939f8][_0x32c1d2(0x87c)](_0x57ff39);}async['sendMenu']({instanceName:_0x29d525},_0x5dde6f){const _0x18a2e2=a0_0x2101b5;return await this['waMonitor'][_0x18a2e2(0x34b)][_0x29d525][_0x18a2e2(0x4c7)](_0x5dde6f);}async['sendMedia']({instanceName:_0x9f1516},_0x55ec6d){const _0x55c9a2=a0_0x2101b5;if((0x0,ce[_0x55c9a2(0x5e8)])(_0x55ec6d?.[_0x55c9a2(0x1fe)]?.[_0x55c9a2(0x4f6)])&&!_0x55ec6d?.[_0x55c9a2(0x1fe)]?.[_0x55c9a2(0x8b3)])throw new m(_0x55c9a2(0x8b9));if((0x0,ce[_0x55c9a2(0x719)])(_0x55ec6d?.[_0x55c9a2(0x1fe)]?.[_0x55c9a2(0x4f6)])||(0x0,ce[_0x55c9a2(0x5e8)])(_0x55ec6d?.[_0x55c9a2(0x1fe)]?.[_0x55c9a2(0x4f6)]))return await this[_0x55c9a2(0x67d)][_0x55c9a2(0x34b)][_0x9f1516][_0x55c9a2(0x1fe)](_0x55ec6d);throw new m(_0x55c9a2(0x88e));}async[a0_0x2101b5(0x5b8)]({instanceName:_0x151a41},_0x3a16c6){const _0xdc1fbb=a0_0x2101b5;if((0x0,ce[_0xdc1fbb(0x719)])(_0x3a16c6[_0xdc1fbb(0x18c)]['image'])||(0x0,ce[_0xdc1fbb(0x5e8)])(_0x3a16c6[_0xdc1fbb(0x18c)][_0xdc1fbb(0x2c4)]))return await this['waMonitor']['waInstances'][_0x151a41][_0xdc1fbb(0x6ff)](_0x3a16c6);throw new m(_0xdc1fbb(0x88e));}async['sendWhatsAppAudio']({instanceName:_0x163cc9},_0x3a3c6a){const _0x109602=a0_0x2101b5;if((0x0,ce[_0x109602(0x719)])(_0x3a3c6a[_0x109602(0x893)][_0x109602(0x6d8)])||(0x0,ce[_0x109602(0x5e8)])(_0x3a3c6a['audioMessage']['audio']))return await this[_0x109602(0x67d)][_0x109602(0x34b)][_0x163cc9][_0x109602(0x589)](_0x3a3c6a);throw new m(_0x109602(0x88e));}async[a0_0x2101b5(0x5ba)]({instanceName:_0x239b22},_0x2df426){const _0x4983fc=a0_0x2101b5;return await this[_0x4983fc(0x67d)][_0x4983fc(0x34b)][_0x239b22][_0x4983fc(0x841)](_0x2df426);}async['sendLocation']({instanceName:_0x3e8cb9},_0x14aab8){const _0x11fb2c=a0_0x2101b5;return await this['waMonitor'][_0x11fb2c(0x34b)][_0x3e8cb9][_0x11fb2c(0x59f)](_0x14aab8);}async['sendPoll']({instanceName:_0x3e9e1b},_0x162fed){const _0x2f68b1=a0_0x2101b5;return await this[_0x2f68b1(0x67d)][_0x2f68b1(0x34b)][_0x3e9e1b][_0x2f68b1(0x3ee)](_0x162fed);}async['sendList']({instanceName:_0x251e0e},_0x2b8840){const _0x9e79e3=a0_0x2101b5;return await this[_0x9e79e3(0x67d)][_0x9e79e3(0x34b)][_0x251e0e][_0x9e79e3(0x42e)](_0x2b8840);}async[a0_0x2101b5(0x2c1)]({instanceName:_0x2b7831},_0x33406b){const _0x48cc66=a0_0x2101b5;return await this[_0x48cc66(0x67d)][_0x48cc66(0x34b)][_0x2b7831][_0x48cc66(0x1ee)](_0x33406b);}async[a0_0x2101b5(0x221)]({instanceName:_0xb0ee48},_0x44dbd0){const _0x2f7bcc=a0_0x2101b5;if(!_0x44dbd0[_0x2f7bcc(0x83e)]['reaction'][_0x2f7bcc(0x66b)](/[^\(\)\w\sà-ú"-\+]+/))throw new m('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this[_0x2f7bcc(0x67d)][_0x2f7bcc(0x34b)][_0xb0ee48]['reactionMessage'](_0x44dbd0);}async[a0_0x2101b5(0x669)]({instanceName:_0x40ced8},_0x4a15e2){const _0xc14e3c=a0_0x2101b5;return await this[_0xc14e3c(0x67d)]['waInstances'][_0x40ced8]['statusMessage'](_0x4a15e2);}},Pi=require(a0_0x2101b5(0x450)),Us=require(a0_0x2101b5(0x3a2)),Kt=class u{constructor(_0x57e073,_0x387175,_0x5a2863){const _0x213cc0=a0_0x2101b5;this[_0x213cc0(0x596)]=_0x57e073,this[_0x213cc0(0x67d)]=_0x387175,this[_0x213cc0(0x43b)]=_0x5a2863,this[_0x213cc0(0x240)]=new $(u[_0x213cc0(0x89c)]);}async['jwt'](_0x34f0ba){const _0x4c6813=a0_0x2101b5;let _0x3a94e5=this[_0x4c6813(0x596)]['get'](_0x4c6813(0x532))[_0x4c6813(0x7d6)],_0x2f6c72=(0x0,Pi[_0x4c6813(0x371)])({'instanceName':_0x34f0ba[_0x4c6813(0x4a8)],'apiName':it,'tokenId':(0x0,Us['v4'])()},_0x3a94e5[_0x4c6813(0x2f6)],{'expiresIn':_0x3a94e5['EXPIRIN_IN'],'encoding':_0x4c6813(0x512),'subject':_0x4c6813(0x75b)}),_0x39cc38=await this['repository'][_0x4c6813(0x7e4)][_0x4c6813(0x65e)]({'jwt':_0x2f6c72},_0x34f0ba['instanceName']);if(_0x39cc38[_0x4c6813(0x3c9)])throw this[_0x4c6813(0x240)][_0x4c6813(0x3c9)]({'localError':u[_0x4c6813(0x89c)]+_0x4c6813(0x59e),'error':_0x39cc38['error']}),new m(_0x4c6813(0x39b),_0x39cc38[_0x4c6813(0x3c9)]?.[_0x4c6813(0x60f)]());return{'jwt':_0x2f6c72};}async[a0_0x2101b5(0x77b)](_0x945249){const _0x569d9d=a0_0x2101b5;let _0x549a67=(0x0,Us['v4'])()['toUpperCase'](),_0x29efd4=await this[_0x569d9d(0x43b)]['auth']['create']({'apikey':_0x549a67},_0x945249[_0x569d9d(0x4a8)]);if(_0x29efd4['error'])throw this['logger'][_0x569d9d(0x3c9)]({'localError':u[_0x569d9d(0x89c)]+'.jwt','error':_0x29efd4[_0x569d9d(0x3c9)]}),new m('Authentication\x20error',_0x29efd4[_0x569d9d(0x3c9)]?.[_0x569d9d(0x60f)]());return{'apikey':_0x549a67};}async['generateHash'](_0x59132b){const _0x4ad9b2=a0_0x2101b5;let _0x446823=this[_0x4ad9b2(0x596)][_0x4ad9b2(0x34a)](_0x4ad9b2(0x532));return await this[_0x446823[_0x4ad9b2(0x337)]](_0x59132b);}},Qt=class{constructor(_0x203a9e){this['waMonitor']=_0x203a9e;}async[a0_0x2101b5(0x85a)](_0x3791a,_0x14b649){const _0x223348=a0_0x2101b5;return await this['waMonitor'][_0x223348(0x34b)][_0x3791a['instanceName']][_0x223348(0x85a)](_0x14b649);}async['updateGroupPicture'](_0x2359c6,_0x516c9a){const _0xacd549=a0_0x2101b5;return await this[_0xacd549(0x67d)][_0xacd549(0x34b)][_0x2359c6['instanceName']]['updateGroupPicture'](_0x516c9a);}async[a0_0x2101b5(0x510)](_0x4cfc05,_0x1a2471){const _0x2a9174=a0_0x2101b5;return await this[_0x2a9174(0x67d)][_0x2a9174(0x34b)][_0x4cfc05['instanceName']][_0x2a9174(0x510)](_0x1a2471);}async[a0_0x2101b5(0x14d)](_0x18c400,_0x18534d){const _0x206ccf=a0_0x2101b5;return await this[_0x206ccf(0x67d)][_0x206ccf(0x34b)][_0x18c400[_0x206ccf(0x4a8)]][_0x206ccf(0x14d)](_0x18534d);}async[a0_0x2101b5(0x559)](_0xc38951,_0x2a46a1){const _0x536734=a0_0x2101b5;return await this[_0x536734(0x67d)]['waInstances'][_0xc38951[_0x536734(0x4a8)]][_0x536734(0x559)](_0x2a46a1);}async[a0_0x2101b5(0x58d)](_0x407973,_0x3b0f0b){const _0x2e5efb=a0_0x2101b5;return await this['waMonitor'][_0x2e5efb(0x34b)][_0x407973['instanceName']][_0x2e5efb(0x58d)](_0x3b0f0b);}async['findGroupInfo'](_0x45b070,_0x9f1d5){const _0x121385=a0_0x2101b5;return await this[_0x121385(0x67d)][_0x121385(0x34b)][_0x45b070[_0x121385(0x4a8)]]['findGroup'](_0x9f1d5);}async[a0_0x2101b5(0x744)](_0x3ede92){const _0x2d906c=a0_0x2101b5;return await this[_0x2d906c(0x67d)][_0x2d906c(0x34b)][_0x3ede92['instanceName']][_0x2d906c(0x744)]();}async['inviteCode'](_0x50f20d,_0x1621f9){const _0x59d2aa=a0_0x2101b5;return await this[_0x59d2aa(0x67d)][_0x59d2aa(0x34b)][_0x50f20d[_0x59d2aa(0x4a8)]][_0x59d2aa(0x718)](_0x1621f9);}async[a0_0x2101b5(0x22d)](_0x436a6a,_0x2851de){const _0x1d38c0=a0_0x2101b5;return await this[_0x1d38c0(0x67d)][_0x1d38c0(0x34b)][_0x436a6a['instanceName']][_0x1d38c0(0x22d)](_0x2851de);}async[a0_0x2101b5(0x165)](_0x3dc0f8,_0x3366ef){const _0x249b61=a0_0x2101b5;return await this['waMonitor'][_0x249b61(0x34b)][_0x3dc0f8[_0x249b61(0x4a8)]][_0x249b61(0x165)](_0x3366ef);}async['revokeInviteCode'](_0x5ad9f2,_0x3a8afe){const _0x34023b=a0_0x2101b5;return await this[_0x34023b(0x67d)][_0x34023b(0x34b)][_0x5ad9f2[_0x34023b(0x4a8)]]['revokeInviteCode'](_0x3a8afe);}async[a0_0x2101b5(0x193)](_0x1cce9a,_0x4d8b6d){const _0x2b4474=a0_0x2101b5;return await this[_0x2b4474(0x67d)][_0x2b4474(0x34b)][_0x1cce9a[_0x2b4474(0x4a8)]][_0x2b4474(0x193)](_0x4d8b6d);}async[a0_0x2101b5(0x534)](_0x1c4193,_0x3d4403){const _0x25d0f8=a0_0x2101b5;return await this[_0x25d0f8(0x67d)]['waInstances'][_0x1c4193['instanceName']][_0x25d0f8(0x7ce)](_0x3d4403);}async[a0_0x2101b5(0x40e)](_0xe63dc5,_0x2cc68f){const _0x4abc60=a0_0x2101b5;return await this[_0x4abc60(0x67d)]['waInstances'][_0xe63dc5[_0x4abc60(0x4a8)]][_0x4abc60(0x40e)](_0x2cc68f);}async[a0_0x2101b5(0x496)](_0x239cb6,_0x33ce3d){const _0x46d8c0=a0_0x2101b5;return await this[_0x46d8c0(0x67d)][_0x46d8c0(0x34b)][_0x239cb6[_0x46d8c0(0x4a8)]]['leaveGroup'](_0x33ce3d);}},Yt=class{constructor(_0x1b5e0c){const _0x1c55db=a0_0x2101b5;this[_0x1c55db(0x67d)]=_0x1b5e0c;}[a0_0x2101b5(0x65e)](_0x30ede3,_0xc849e1){const _0x5a7704=a0_0x2101b5;return this[_0x5a7704(0x67d)]['waInstances'][_0x30ede3[_0x5a7704(0x4a8)]]['setWebhook'](_0xc849e1);}async[a0_0x2101b5(0x604)](_0x52671e){const _0x43ff76=a0_0x2101b5;try{return await this[_0x43ff76(0x67d)][_0x43ff76(0x34b)][_0x52671e[_0x43ff76(0x4a8)]]['findWebhook']();}catch{return{'enabled':null,'url':''};}}},nh=new $(a0_0x2101b5(0x18f)),Xt=class{constructor(_0x3e4f09){const _0x431f8b=a0_0x2101b5;this[_0x431f8b(0x67d)]=_0x3e4f09;}async[a0_0x2101b5(0x1af)](_0x3ee57a,_0x51c036){const _0x16478f=a0_0x2101b5;return await this[_0x16478f(0x67d)][_0x16478f(0x34b)][_0x3ee57a['instanceName']][_0x16478f(0x1af)](_0x51c036);}async['getScheduleMessage'](_0x2b02eb){const _0x1ef4c0=a0_0x2101b5;return await this[_0x1ef4c0(0x67d)][_0x1ef4c0(0x34b)][_0x2b02eb[_0x1ef4c0(0x4a8)]]['getScheduleMessage']();}async[a0_0x2101b5(0x1bf)](_0x781de3){const _0x4de9f8=a0_0x2101b5;return await this[_0x4de9f8(0x67d)][_0x4de9f8(0x34b)][_0x781de3[_0x4de9f8(0x4a8)]][_0x4de9f8(0x1bf)]();}async['getAutomateSystem'](_0x1836c8){const _0x844866=a0_0x2101b5;return await this[_0x844866(0x67d)][_0x844866(0x34b)][_0x1836c8[_0x844866(0x4a8)]][_0x844866(0x474)]();}async[a0_0x2101b5(0x572)](_0x5b0d88,_0x50f6ed){const _0x4bcb4c=a0_0x2101b5;return await this['waMonitor'][_0x4bcb4c(0x34b)][_0x5b0d88[_0x4bcb4c(0x4a8)]][_0x4bcb4c(0x572)](_0x50f6ed);}async[a0_0x2101b5(0x32f)](_0x3ddd19,_0x433925){const _0x15095e=a0_0x2101b5;return await this[_0x15095e(0x67d)]['waInstances'][_0x3ddd19[_0x15095e(0x4a8)]][_0x15095e(0x32f)](_0x433925);}async[a0_0x2101b5(0x5ae)](_0xf699e5,_0x21fe18){const _0x10f790=a0_0x2101b5;return await this[_0x10f790(0x67d)]['waInstances'][_0xf699e5[_0x10f790(0x4a8)]][_0x10f790(0x5ae)](_0x21fe18);}async['updateFlowConfig'](_0x652624,_0x2998c5){const _0x12b53c=a0_0x2101b5;return await this[_0x12b53c(0x67d)][_0x12b53c(0x34b)][_0x652624[_0x12b53c(0x4a8)]]['updateFlowConfig'](_0x2998c5);}async[a0_0x2101b5(0x266)](_0x462478,_0xe8ba9f){const _0x235a61=a0_0x2101b5;return await this['waMonitor']['waInstances'][_0x462478['instanceName']][_0x235a61(0x266)](_0xe8ba9f);}async[a0_0x2101b5(0x38d)](_0x1b5b4f,_0x3a012d,_0x91773e,_0x556250){const _0x45d452=a0_0x2101b5;return await this[_0x45d452(0x67d)][_0x45d452(0x34b)][_0x1b5b4f]['startFlowWebhook'](_0x3a012d,_0x91773e,_0x556250);}async[a0_0x2101b5(0x5ea)](_0x31b543,_0xfbe76c){const _0x11794a=a0_0x2101b5;return await this['waMonitor']['waInstances'][_0x31b543[_0x11794a(0x4a8)]][_0x11794a(0x5ea)](_0xfbe76c);}async[a0_0x2101b5(0x711)](_0x5c9b13,_0x51da38){const _0x3c361f=a0_0x2101b5;return await this[_0x3c361f(0x67d)][_0x3c361f(0x34b)][_0x5c9b13[_0x3c361f(0x4a8)]][_0x3c361f(0x711)](_0x51da38);}async[a0_0x2101b5(0x713)](_0x5a2105,_0x3ed7f2){const _0x2a5a6b=a0_0x2101b5;return await this[_0x2a5a6b(0x67d)][_0x2a5a6b(0x34b)][_0x5a2105[_0x2a5a6b(0x4a8)]]['editConversation'](_0x3ed7f2);}async[a0_0x2101b5(0x692)](_0x6184b4,_0x2552ed){const _0xf15bbb=a0_0x2101b5;return await this[_0xf15bbb(0x67d)]['waInstances'][_0x6184b4['instanceName']][_0xf15bbb(0x692)](_0x2552ed);}async[a0_0x2101b5(0x330)](_0x1d0be9,_0x5d1f45){const _0x95e1d8=a0_0x2101b5;return await this['waMonitor'][_0x95e1d8(0x34b)][_0x1d0be9[_0x95e1d8(0x4a8)]]['getFlow'](_0x5d1f45[_0x95e1d8(0x1b8)]);}async[a0_0x2101b5(0x2e9)](_0x44a3a1,_0x451141,_0x1b59ea){const _0x5b425c=a0_0x2101b5;return await this[_0x5b425c(0x67d)]['waInstances'][_0x44a3a1['instanceName']][_0x5b425c(0x2e9)](_0x451141,_0x1b59ea);}async['editFlow'](_0x1845be,_0x1e50d1,_0x7c5fea){const _0x7ac5d9=a0_0x2101b5;return await this[_0x7ac5d9(0x67d)]['waInstances'][_0x1845be[_0x7ac5d9(0x4a8)]]['editFlow'](_0x1e50d1,_0x7c5fea);}async[a0_0x2101b5(0x827)](_0x45f2e9,_0x15a806){const _0x5596e=a0_0x2101b5;return await this[_0x5596e(0x67d)][_0x5596e(0x34b)][_0x45f2e9['instanceName']][_0x5596e(0x827)](_0x15a806);}async[a0_0x2101b5(0x3a1)](_0x48513f,_0x1f2db3){const _0x2f059b=a0_0x2101b5;return await this[_0x2f059b(0x67d)][_0x2f059b(0x34b)][_0x48513f[_0x2f059b(0x4a8)]][_0x2f059b(0x3a1)](_0x1f2db3);}async[a0_0x2101b5(0x387)](_0x4f925f,_0x3eb403){const _0x30c84a=a0_0x2101b5;return await this[_0x30c84a(0x67d)][_0x30c84a(0x34b)][_0x4f925f[_0x30c84a(0x4a8)]][_0x30c84a(0x387)](_0x3eb403);}async['editFlowCondition'](_0x2d1f40,_0x23dec3){const _0x5134a5=a0_0x2101b5;return await this[_0x5134a5(0x67d)][_0x5134a5(0x34b)][_0x2d1f40['instanceName']][_0x5134a5(0x7a4)](_0x23dec3);}async['editFlowVaredit'](_0x4886e9,_0x2375a8){const _0x2f018e=a0_0x2101b5;return await this[_0x2f018e(0x67d)][_0x2f018e(0x34b)][_0x4886e9[_0x2f018e(0x4a8)]]['editFlowVaredit'](_0x2375a8);}async[a0_0x2101b5(0x3d7)](_0x5cbbe7,_0x1007f8){const _0x58375f=a0_0x2101b5;return await this[_0x58375f(0x67d)][_0x58375f(0x34b)][_0x5cbbe7[_0x58375f(0x4a8)]][_0x58375f(0x3d7)](_0x1007f8);}async[a0_0x2101b5(0x146)](_0x24302f,_0x5641b7){const _0x31bdfe=a0_0x2101b5;return await this[_0x31bdfe(0x67d)]['waInstances'][_0x24302f[_0x31bdfe(0x4a8)]][_0x31bdfe(0x146)](_0x5641b7);}async[a0_0x2101b5(0x4c3)](_0x4e079d){const _0x337d5d=a0_0x2101b5;return await this[_0x337d5d(0x67d)]['waInstances'][_0x4e079d['instanceName']][_0x337d5d(0x4c3)]();}},Zt=class{constructor(_0x4e29d3){const _0x598e49=a0_0x2101b5;this[_0x598e49(0x7e5)]=_0x4e29d3;}async[a0_0x2101b5(0x4eb)](_0x37d531,_0x27f38a){return this['webhookService']['create'](_0x37d531,_0x27f38a);}async[a0_0x2101b5(0x4d6)](_0x11c257){const _0x52c65f=a0_0x2101b5;return this[_0x52c65f(0x7e5)][_0x52c65f(0x604)](_0x11c257);}},es=class extends _{constructor(_0x88910f,_0x34b082){const _0x5b3ff9=a0_0x2101b5;super(_0x34b082),this['webhookModel']=_0x88910f,this[_0x5b3ff9(0x596)]=_0x34b082;}async[a0_0x2101b5(0x65e)](_0x56ed58,_0x5323ab){const _0x3ff3e8=a0_0x2101b5;try{return this[_0x3ff3e8(0x4d5)][_0x3ff3e8(0x6f5)]?{'insertCount':(await this[_0x3ff3e8(0x62e)][_0x3ff3e8(0x149)]({'_id':_0x5323ab},{..._0x56ed58},{'upsert':!0x0}))['modifiedCount']}:{'insertCount':0x1};}catch(_0x5302d6){return _0x5302d6;}}async[a0_0x2101b5(0x57b)](_0x29469a){const _0x2d8494=a0_0x2101b5;try{if(this['dbSettings'][_0x2d8494(0x6f5)]){await this['webhookModel']['deleteOne']({'_id':_0x29469a});return;}}catch(_0x39a3f2){return{'error':_0x39a3f2};}}async['find'](_0x10cfc6){const _0x191d73=a0_0x2101b5;try{if(this[_0x191d73(0x4d5)][_0x191d73(0x6f5)])return await this[_0x191d73(0x62e)]['findOne']({'_id':_0x10cfc6});}catch{return{};}}},ts=class extends _{constructor(_0x7f0493,_0x104375){const _0xcbba99=a0_0x2101b5;super(_0x104375),this[_0xcbba99(0x5e2)]=_0x7f0493,this[_0xcbba99(0x596)]=_0x104375,this[_0xcbba99(0x7e4)]=_0x104375[_0xcbba99(0x34a)]('AUTHENTICATION');}async['create'](_0x14ebf6,_0x125ed1){const _0x406156=a0_0x2101b5;try{if(this[_0x406156(0x4d5)]['ENABLED'])return{'insertCount':(await this[_0x406156(0x5e2)][_0x406156(0x858)]({'_id':_0x125ed1},{'$set':{..._0x14ebf6}},{'upsert':!0x0}))['modifiedCount']};}catch(_0x3b7515){return{'error':_0x3b7515};}}async[a0_0x2101b5(0x219)](_0x174a12,_0x2aba56){const _0x38b8db=a0_0x2101b5;try{if(this[_0x38b8db(0x4d5)][_0x38b8db(0x6f5)])return{'insertCount':(await this['authModel'][_0x38b8db(0x877)](_0x174a12,{'$set':_0x2aba56},{'upsert':!0x1}))[_0x38b8db(0x454)]};throw new Error('Database\x20is\x20not\x20enabled');}catch(_0x3a9e18){return{'error':_0x3a9e18};}}async[a0_0x2101b5(0x690)](_0xd79026){const _0x292e57=a0_0x2101b5;try{if(this[_0x292e57(0x4d5)][_0x292e57(0x6f5)])return{'insertCount':(await this[_0x292e57(0x5e2)][_0x292e57(0x690)](_0xd79026))[_0x292e57(0x797)]};throw new Error(_0x292e57(0x7b0));}catch(_0x2977df){return{'error':_0x2977df};}}async['delete'](_0x3c8386){const _0x1639aa=a0_0x2101b5;try{if(this['dbSettings'][_0x1639aa(0x6f5)]){await this[_0x1639aa(0x5e2)][_0x1639aa(0x66e)]({'_id':_0x3c8386});return;}}catch(_0x5d53e0){return{'error':_0x5d53e0};}}async[a0_0x2101b5(0x604)](_0x2c30a8){const _0x1c68d6=a0_0x2101b5;try{if(this[_0x1c68d6(0x4d5)][_0x1c68d6(0x6f5)])return await this[_0x1c68d6(0x5e2)]['findOne']({'_id':_0x2c30a8});}catch{return{};}}async[a0_0x2101b5(0x1a8)](){const _0x5e3bf5=a0_0x2101b5;try{if(this['dbSettings']['ENABLED'])return await this[_0x5e3bf5(0x5e2)]['find']();}catch{return[];}}async[a0_0x2101b5(0x666)](_0x2afdcd){const _0x4d99a1=a0_0x2101b5;try{if(this[_0x4d99a1(0x4d5)][_0x4d99a1(0x6f5)])return await this[_0x4d99a1(0x5e2)][_0x4d99a1(0x604)](_0x2afdcd);}catch{return[];}}},ss=class extends _{async[a0_0x2101b5(0x66e)](_0xc750de){const _0x131f72=a0_0x2101b5;try{let _0x1d9126=A(_0xc750de[_0x131f72(0x702)]);return{'deletedCount':(await Ce['deleteOne'](_0x1d9126))[_0x131f72(0x797)]};}catch(_0x59df8d){return{'error':_0x59df8d?.[_0x131f72(0x60f)]()};}}async['updateOne'](_0x3aaf9a,_0x2bc3bf){const _0x1c6746=a0_0x2101b5;try{let _0x218038=await Ce[_0x1c6746(0x4fd)](_0x3aaf9a);return _0x218038?(Object[_0x1c6746(0x6b1)](_0x218038,_0x2bc3bf),await _0x218038[_0x1c6746(0x3af)]()):(console['error'](_0x1c6746(0x37c),_0x3aaf9a),null);}catch(_0x2400c8){return console['error']('Erro\x20ao\x20atualizar\x20o\x20fluxo:',_0x2400c8),null;}}async[a0_0x2101b5(0x400)](_0x5c52e8){const _0x422198=a0_0x2101b5;try{return await new Ce(_0x5c52e8)[_0x422198(0x3af)]();}catch(_0x2d4207){return console['error'](_0x422198(0x8c8),_0x2d4207),null;}}async[a0_0x2101b5(0x1a8)](_0x1556b2){const _0x3a9351=a0_0x2101b5;try{let _0xb36c35=_0x1556b2['where']??{};return await Ce[_0x3a9351(0x604)](_0xb36c35)[_0x3a9351(0x2a6)](_0x1556b2[_0x3a9351(0x2a6)]??0x0)[_0x3a9351(0x70f)]();}catch(_0x4f4c75){return console[_0x3a9351(0x3c9)](_0x3a9351(0x8ba),_0x4f4c75),[];}}async['findOne'](_0x5cfc31){const _0xb524f8=a0_0x2101b5;try{let _0x385c64=A(_0x5cfc31['where']);return await Ce[_0xb524f8(0x505)](_0x385c64)[_0xb524f8(0x70f)]();}catch{return null;}}},as=class extends _{['getConversationModelForOwner'](_0x43d911){return Sa(_0x43d911);}async['insert'](_0x195252){const _0x450df4=a0_0x2101b5;if(_0x195252[_0x450df4(0x608)]!==0x0)try{return{'insertCount':(await this['getConversationModelForOwner'](_0x195252[0x0]['owner'])[_0x450df4(0x250)]([..._0x195252]))['length']};}catch(_0x462612){return _0x462612;}}async[a0_0x2101b5(0x57b)](_0x19336a,_0x5271bd){const _0x130077=a0_0x2101b5;try{let _0x3f6720=this[_0x130077(0x26a)](_0x5271bd),_0x57a22f=A(_0x19336a[_0x130077(0x702)]);return{'deletedCount':(await _0x3f6720[_0x130077(0x690)](_0x57a22f))['deletedCount']};}catch(_0x5c98d8){return{'error':_0x5c98d8?.[_0x130077(0x60f)]()};}}async[a0_0x2101b5(0x66e)](_0x5e5182,_0x230a79){const _0x130ae6=a0_0x2101b5;try{let _0x4db0e0=this[_0x130ae6(0x26a)](_0x230a79),_0x1a28ef=A(_0x5e5182[_0x130ae6(0x702)]);return{'deletedCount':(await _0x4db0e0[_0x130ae6(0x66e)](_0x1a28ef))[_0x130ae6(0x797)]};}catch(_0x2670b7){return{'error':_0x2670b7?.[_0x130ae6(0x60f)]()};}}async[a0_0x2101b5(0x842)](_0x34180a,_0x19edfa){const _0x5b9851=a0_0x2101b5;try{if(_0x34180a[_0x5b9851(0x608)]===0x0)return;let _0x175686=this[_0x5b9851(0x26a)](_0x19edfa),_0x8ecced=_0x34180a[_0x5b9851(0x5e6)](_0x3a77b0=>({'updateOne':{'filter':{'name':_0x3a77b0[_0x5b9851(0x89c)],'owner':_0x19edfa},'update':{..._0x3a77b0}}})),{modifiedCount:_0x8791e3}=await _0x175686[_0x5b9851(0x726)](_0x8ecced);return{'insertCount':_0x8791e3};}catch{return;}}async[a0_0x2101b5(0x877)](_0x48fe3e,_0xa3dfa7,_0x1bb3e8){const _0x18c96a=a0_0x2101b5;try{return{'modifiedCount':(await this['getConversationModelForOwner'](_0x1bb3e8)[_0x18c96a(0x877)](_0x48fe3e,{'$set':_0xa3dfa7})[_0x18c96a(0x49b)]())[_0x18c96a(0x454)]};}catch(_0x1a5f18){return console[_0x18c96a(0x3c9)]('Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:',_0x1a5f18),{'error':_0x1a5f18};}}async[a0_0x2101b5(0x858)](_0x233107,_0x34735d,_0xa0d09){const _0x2d89ee=a0_0x2101b5;try{return await this['getConversationModelForOwner'](_0xa0d09)[_0x2d89ee(0x5de)]({'_id':_0x233107},{'$set':_0x34735d},{'new':!0x0,'upsert':!0x0})[_0x2d89ee(0x70f)]();}catch(_0x2da506){return console['error'](_0x2da506),null;}}async[a0_0x2101b5(0x604)](_0xd30660,_0x7345f6){const _0x146aa2=a0_0x2101b5;try{return await this['getConversationModelForOwner'](_0x7345f6)['find'](_0xd30660)[_0x146aa2(0x305)]({'lastInteraction':-0x1})[_0x146aa2(0x70f)]();}catch{return[];}}async['findOne'](_0x35c99e,_0x6ee311){const _0xb6caa2=a0_0x2101b5;try{return await this[_0xb6caa2(0x26a)](_0x6ee311)[_0xb6caa2(0x505)]({..._0x35c99e[_0xb6caa2(0x702)]})[_0xb6caa2(0x70f)]();}catch{return null;}}async[a0_0x2101b5(0x3f7)](_0xa305c3){const _0x1fc5e8=a0_0x2101b5;try{return await this[_0x1fc5e8(0x26a)](_0xa305c3)[_0x1fc5e8(0x1bc)][_0x1fc5e8(0x214)](),{'success':!0x0};}catch(_0x3872ac){return console[_0x1fc5e8(0x3c9)](_0x3872ac),{'success':!0x1,'error':_0x3872ac};}}},is=class extends _{[a0_0x2101b5(0x441)](_0x2f98c7){return Ma(_0x2f98c7);}async['bulkWrite'](_0x3d59e7,_0x26415b){const _0x30f5c8=a0_0x2101b5;try{return await this[_0x30f5c8(0x441)](_0x26415b)['bulkWrite'](_0x3d59e7);}catch(_0x42c761){return console[_0x30f5c8(0x3c9)]('Erro\x20ao\x20executar\x20bulkWrite:',_0x42c761),null;}}async[a0_0x2101b5(0x400)](_0x2230b4,_0x4047b3){const _0x5ae5c4=a0_0x2101b5;try{let _0x6f914f=this[_0x5ae5c4(0x441)](_0x4047b3);return await new _0x6f914f(_0x2230b4)[_0x5ae5c4(0x3af)]();}catch(_0x54f3bc){return console[_0x5ae5c4(0x3c9)](_0x5ae5c4(0x863),_0x54f3bc),null;}}async[a0_0x2101b5(0x66e)](_0x841605,_0x5691a1){try{return await this['getScheduleMessageModelForOwner'](_0x5691a1)['findByIdAndDelete'](_0x841605),{};}catch(_0x27c24a){return{'error':_0x27c24a?.['toString']()};}}async[a0_0x2101b5(0x858)](_0x1c2977,_0x5552cb,_0x2840fe,_0x538c5d={}){const _0x301b4f=a0_0x2101b5;try{return await this[_0x301b4f(0x441)](_0x2840fe)['findOneAndUpdate'](_0x1c2977,_0x5552cb,{..._0x538c5d,'new':!0x0})['lean']();}catch(_0x580f07){return console['error'](_0x301b4f(0x332),_0x580f07),null;}}async[a0_0x2101b5(0x6d2)](_0x59f1e4,_0x33210e,_0x3e9100){const _0x20e4ec=a0_0x2101b5;try{return await this[_0x20e4ec(0x441)](_0x3e9100)[_0x20e4ec(0x5e7)](_0x59f1e4,_0x33210e,{'new':!0x0})[_0x20e4ec(0x70f)]();}catch(_0x4eb4f9){return console[_0x20e4ec(0x3c9)](_0x20e4ec(0x332),_0x4eb4f9),null;}}async['find'](_0x212e38,_0x13af1e){const _0x220337=a0_0x2101b5;try{return await this[_0x220337(0x441)](_0x13af1e)['find'](_0x212e38[_0x220337(0x702)])[_0x220337(0x2a6)](_0x212e38?.[_0x220337(0x2a6)]??0x0)[_0x220337(0x305)]({'when':0x1})[_0x220337(0x70f)]();}catch{return[];}}async['findOne'](_0x4b6882,_0x32c0dc){const _0x4fe40b=a0_0x2101b5;try{return await this[_0x4fe40b(0x441)](_0x32c0dc)[_0x4fe40b(0x505)](_0x4b6882[_0x4fe40b(0x702)])['sort']({'when':0x1})['lean']();}catch{return null;}}async['findById'](_0x4c3fd0,_0x22379f){const _0x4dc3c3=a0_0x2101b5;try{return await this[_0x4dc3c3(0x441)](_0x22379f)['findById'](_0x4c3fd0)['lean']();}catch{return null;}}async[a0_0x2101b5(0x690)](_0x3d828e,_0x409fd3){const _0x14114e=a0_0x2101b5;try{return{'deletedCount':(await this[_0x14114e(0x441)](_0x409fd3)[_0x14114e(0x690)](_0x3d828e))[_0x14114e(0x797)]};}catch(_0x221fcf){return console['error'](_0x14114e(0x304),_0x221fcf),{'error':_0x221fcf};}}async[a0_0x2101b5(0x3f7)](_0x8aa270){const _0x5537b6=a0_0x2101b5;try{return await this[_0x5537b6(0x441)](_0x8aa270)[_0x5537b6(0x1bc)][_0x5537b6(0x214)](),{'success':!0x0};}catch(_0x160805){return console[_0x5537b6(0x3c9)](_0x160805),{'success':!0x1,'error':_0x160805};}}},os=class extends _{async[a0_0x2101b5(0x842)](_0x146916,_0x4ead70){const _0x2b36de=a0_0x2101b5;try{if(this['dbSettings'][_0x2b36de(0x6f5)])return await Ie[_0x2b36de(0x5de)]({'_id':_0x4ead70},{'$set':_0x146916},{'new':!0x0});}catch(_0x11831c){throw console[_0x2b36de(0x3c9)](_0x2b36de(0x21e),_0x11831c),_0x11831c;}}async[a0_0x2101b5(0x77a)](_0x44b2d9){const _0x15c4e8=a0_0x2101b5;try{let _0x5936ff=await Ie['findById'](_0x44b2d9);return _0x5936ff?_0x5936ff['autoCompleteMessages']||(_0x5936ff['autoCompleteMessages']=[],await _0x5936ff[_0x15c4e8(0x3af)]()):(_0x5936ff=new Ie({'_id':_0x44b2d9,'autoCompleteMessages':[]}),await _0x5936ff[_0x15c4e8(0x3af)]()),_0x5936ff;}catch(_0x2d2ce7){return _0x2d2ce7[_0x15c4e8(0x3b6)]===0x2af8&&_0x2d2ce7[_0x15c4e8(0x7d2)]&&_0x2d2ce7['keyPattern'][_0x15c4e8(0x48c)]?(console['error']('Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...'),await Ie['collection'][_0x15c4e8(0x19b)](_0x15c4e8(0x5ee)),null):(console[_0x15c4e8(0x3c9)](_0x15c4e8(0x759),_0x2d2ce7),null);}}},jo=new $(a0_0x2101b5(0x25a)),Jo=new Ke(S),qo=new Jt(S),Vo=new rt(S),Go=new qt(oa,S),Bo=new Vt(na,S),Wo=new es(ha,S),zo=new ts(ua,S),Ho=new Ne(Be,S),Ko=new ss(S),Qo=new Gt(S),Yo=new as(S),Xo=new is(S),Zo=new os(S),fe=new ze(Jo,qo,Vo,Go,Bo,Wo,zo,Ho,Ko,Yo,Qo,Xo,Zo,I?.[a0_0x2101b5(0x44f)]()),G=new jt(hs,S,fe),er=new Kt(S,G,fe),tr=new Yt(G),As=new Zt(tr),O=new Xt(G),de=new zt(G,S,fe,hs,er),W=new Ht(G),D=new Bt(G),q=new Qt(G);jo[a0_0x2101b5(0x344)](a0_0x2101b5(0x34d));var Ng=require('express-async-errors'),js=require('fs'),Di=T(require(a0_0x2101b5(0x747))),ki=T(require(a0_0x2101b5(0x44a))),Ue=class u{static #e;static set['app'](_0x56450f){this.#e=_0x56450f;}static get[a0_0x2101b5(0x747)](){const _0x31a2f2=a0_0x2101b5;let {FULLCHAIN:_0x28f636,PRIVKEY:_0x5b6728}=S[_0x31a2f2(0x34a)](_0x31a2f2(0x4f5));return Di[_0x31a2f2(0x544)]({'cert':(0x0,js[_0x31a2f2(0x1e3)])(_0x28f636),'key':(0x0,js[_0x31a2f2(0x1e3)])(_0x5b6728)},u.#e);}static get[a0_0x2101b5(0x44a)](){const _0x3f0355=a0_0x2101b5;return ki[_0x3f0355(0x544)](u.#e);}},je=T(require('fs')),qi=T(require(a0_0x2101b5(0x26f))),Je=T(require(a0_0x2101b5(0x737))),ns=T(require('path')),rs=require('child_process');function sr(){const _0x27f1ea=a0_0x2101b5;G[_0x27f1ea(0x63e)]();let _0x5ad534=ns[_0x27f1ea(0x7ae)][_0x27f1ea(0x1b4)](__dirname,_0x27f1ea(0x177));Ji(_0x5ad534);}var Ji=_0x25f887=>{const _0x5af8b6=a0_0x2101b5;let _0x10a542=je[_0x5af8b6(0x7ae)]['readdirSync'](_0x25f887),_0x474c3d=0xc*0x3c*0x3c*0x3e8,_0x2d4877=0x2*0x3c*0x3c*0x3e8,_0x1525d1=new Date()[_0x5af8b6(0x8bc)]();_0x10a542[_0x5af8b6(0x600)](_0x164a62=>{const _0x5e6b9a=_0x5af8b6;let _0x5f4cb3=ns[_0x5e6b9a(0x7ae)][_0x5e6b9a(0x1b4)](_0x25f887,_0x164a62),_0x2b062e=je[_0x5e6b9a(0x7ae)][_0x5e6b9a(0x7c9)](_0x5f4cb3)[_0x5e6b9a(0x660)]['getTime']();_0x1525d1-_0x2b062e>_0x474c3d&&(je['default'][_0x5e6b9a(0x77c)](_0x5f4cb3),console[_0x5e6b9a(0x509)](_0x5e6b9a(0x74e)+_0x164a62));}),setTimeout(()=>Ji(_0x25f887),_0x2d4877);};function ar(){const _0xa43507=a0_0x2101b5;let _0x5aea4a=new $(_0xa43507(0x7d4)),_0x54df1a=(0x0,ye[_0xa43507(0x7ae)])();_0x54df1a[_0xa43507(0x5a6)]((0x0,ji[_0xa43507(0x7ae)])({'origin'(_0x82a01c,_0x149ad9){const _0xbaeb16=_0xa43507;let {ORIGIN:_0x3b834a}=S[_0xbaeb16(0x34a)]('CORS');return _0x82a01c||(_0x82a01c='*'),_0x3b834a[_0xbaeb16(0x89b)]('*')!==-0x1||_0x3b834a['indexOf'](_0x82a01c)!==-0x1?_0x149ad9(null,!0x0):_0x149ad9(new Error('Not\x20allowed\x20by\x20CORS'));},'methods':[...S['get']('CORS')[_0xa43507(0x695)]],'credentials':S[_0xa43507(0x34a)](_0xa43507(0x576))[_0xa43507(0x457)]}),(0x0,ye[_0xa43507(0x41a)])({'extended':!0x0,'limit':_0xa43507(0x6a5)}),(0x0,ye[_0xa43507(0x48e)])({'limit':'50mb'})),_0x54df1a['use']((_0x6cbb11,_0xe81d64,_0x29b645)=>{const _0xbfb460=_0xa43507;_0x6cbb11['path']['startsWith'](_0xbfb460(0x871))?_0x29b645():(0x0,Ui[_0xbfb460(0x7ae)])()(_0x6cbb11,_0xe81d64,_0x29b645);}),_0x54df1a[_0xa43507(0x8c5)](_0xa43507(0x19a),_0xa43507(0x20f)),_0x54df1a['set'](_0xa43507(0x7be),(0x0,qs[_0xa43507(0x1b4)])(le,_0xa43507(0x7be))),_0x54df1a[_0xa43507(0x5a6)](ye[_0xa43507(0x7ae)][_0xa43507(0x17e)]((0x0,qs['join'])(le,_0xa43507(0x528)))),_0x54df1a[_0xa43507(0x5a6)]((_0x265fc7,_0x90e201,_0x277d2d)=>{const _0x59df63=_0xa43507;let _0x24007c=_0x90e201[_0x59df63(0x335)];_0x90e201[_0x59df63(0x335)]=function(_0x34aa7d){const _0x246d5c=_0x59df63;if(_0x265fc7[_0x246d5c(0x56a)][_0x246d5c(0x142)]==='true'||_0x265fc7[_0x246d5c(0x35e)][_0x246d5c(0x6ae)]===_0x246d5c(0x58b)){let _0x2649ad=JSON[_0x246d5c(0x4bc)](_0x34aa7d);_0x34aa7d=JSON['stringify'](_0x1aeb9f(_0x2649ad));}return _0x24007c[_0x246d5c(0x249)](_0x90e201,[_0x34aa7d]);},_0x277d2d();}),_0x54df1a[_0xa43507(0x5a6)]('/',ke),_0x54df1a[_0xa43507(0x5a6)]((_0x548bac,_0x4676eb,_0x12bd69,_0x420f69)=>{const _0x1b7554=_0xa43507;if(_0x548bac)return _0x12bd69[_0x1b7554(0x352)](_0x548bac[_0x1b7554(0x352)]||0x1f4)[_0x1b7554(0x48e)](_0x548bac);},(_0x1cf1ae,_0x1e3c99,_0x5bf220)=>{const _0x2e1b18=_0xa43507;let {method:_0x4238e9,url:_0x7833d1}=_0x1cf1ae;_0x1e3c99['status'](0x194)[_0x2e1b18(0x48e)]({'status':0x194,'message':'Cannot\x20'+_0x4238e9['toUpperCase']()+'\x20'+_0x7833d1,'error':_0x2e1b18(0x25e)}),_0x5bf220();});let _0x1aeb9f=(_0x54ef90,_0x1895da=_0xa43507(0x297))=>{const _0x571a1b=_0xa43507;let _0x3d389e=(_0x6880c0,_0x4c4301=null,_0x4084=!0x1)=>{const _0x5e204f=a0_0xeaf6;let _0x450776={};return Object[_0x5e204f(0x59a)](_0x6880c0)[_0x5e204f(0x600)](_0x16d98e=>{const _0x7008d8=_0x5e204f;let _0x116fe8=_0x6880c0[_0x16d98e],_0x2b3b04=''+_0x1895da+_0x16d98e;_0x4c4301&&!_0x4084&&(_0x2b3b04=_0x4c4301+'.'+_0x16d98e),!_0x116fe8&&_0x116fe8!==0x0&&_0x116fe8!==!0x1||typeof _0x116fe8>'u'?_0x450776[_0x2b3b04]=null:typeof _0x116fe8!=_0x7008d8(0x69d)&&!Array[_0x7008d8(0x413)](_0x116fe8)?_0x450776[_0x2b3b04]=_0x116fe8:typeof _0x116fe8==_0x7008d8(0x69d)&&!Array[_0x7008d8(0x413)](_0x116fe8)?_0x450776=Object[_0x7008d8(0x6b1)](_0x450776,_0x3d389e(_0x116fe8,_0x2b3b04)):Array[_0x7008d8(0x413)](_0x116fe8)&&(typeof _0x116fe8[0x0]==_0x7008d8(0x69d)?(_0x450776[_0x2b3b04]=[],_0x116fe8['forEach'](_0x5a74bf=>{_0x450776[_0x2b3b04]['push'](_0x3d389e(_0x5a74bf,_0x2b3b04,!0x0));})):_0x450776[_0x2b3b04]=_0x116fe8);}),_0x450776;};return Array[_0x571a1b(0x413)](_0x54ef90)?_0x54ef90['map'](_0x578004=>_0x3d389e(_0x578004)):typeof _0x54ef90==_0x571a1b(0x69d)&&_0x54ef90!==null?_0x3d389e(_0x54ef90):{};},_0x511a4e=S[_0xa43507(0x34a)](_0xa43507(0x7d4));Ue[_0xa43507(0x1a4)]=_0x54df1a;let _0x49c9fe=Ue[_0x511a4e[_0xa43507(0x337)]],_0x122f58=_0xa43507(0x553);_0x49c9fe[_0xa43507(0x740)](_0x511a4e[_0xa43507(0x57f)],()=>{const _0xfc077f=_0xa43507;_0x5aea4a[_0xfc077f(0x509)](_0x122f58),_0x5aea4a['log'](_0x511a4e[_0xfc077f(0x337)]['toUpperCase']()+_0xfc077f(0x4b5)+_0x511a4e[_0xfc077f(0x57f)]);}),sr(),Zs();}var ir='https://github.com/uazapi/uazapi.git',or=ns['default'][a0_0x2101b5(0x1b4)](__dirname,a0_0x2101b5(0x468)),Re=null;function rr(){return new Promise((_0x482bf8,_0x33cd10)=>{const _0x1897bd=a0_0xeaf6;je[_0x1897bd(0x7ae)][_0x1897bd(0x4df)](or,'utf-8',(_0x5c5b1,_0x588294)=>{const _0x11daa5=_0x1897bd;if(_0x5c5b1){Re=_0x5c5b1,_0x482bf8();return;}qi[_0x11daa5(0x7ae)][_0x11daa5(0x4bc)](_0x588294)[_0x11daa5(0x2fe)]['url']===ir?(Re=null,_0x482bf8()):(Re=new Error('uazapi\x20não\x20está\x20instalado\x20pelo\x20git'),_0x482bf8());});});}async function nr(){const _0x55ede0=a0_0x2101b5;try{await rr(),await Vs();}catch(_0x2bd468){console[_0x55ede0(0x3c9)](_0x55ede0(0x2ec)+_0x2bd468),process['exit'](0x1);}}nr();function a0_0xeaf6(_0x328597,_0x289ad5){const _0xfc4a92=a0_0xfc4a();return a0_0xeaf6=function(_0xeaf6a9,_0x1dba23){_0xeaf6a9=_0xeaf6a9-0x142;let _0x5f0550=_0xfc4a92[_0xeaf6a9];return _0x5f0550;},a0_0xeaf6(_0x328597,_0x289ad5);}async function Vi(){const _0x191138=a0_0x2101b5;let _0x4f435a;try{_0x4f435a=(await Je[_0x191138(0x7ae)][_0x191138(0x34a)](_0x191138(0x4db)))[_0x191138(0x1a0)]['ip'];}catch(_0x31a3da){console[_0x191138(0x3c9)](_0x31a3da);try{_0x4f435a=(await Je[_0x191138(0x7ae)]['get'](_0x191138(0x408)))[_0x191138(0x1a0)]['ip'];}catch(_0x2afa85){console[_0x191138(0x3c9)](_0x2afa85);try{_0x4f435a=(await Je[_0x191138(0x7ae)][_0x191138(0x34a)](_0x191138(0x435)))[_0x191138(0x1a0)][_0x191138(0x66b)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x220e34){return console[_0x191138(0x3c9)](_0x220e34),!0x1;}}}return _0x4f435a;}var Li=0x0;async function cr(){const _0x491eca=a0_0x2101b5;let _0x32072c=await new pe(S[_0x491eca(0x34a)]('REDIS'))[_0x491eca(0x30c)]();return console[_0x491eca(0x509)](_0x491eca(0x793),_0x32072c[_0x491eca(0x608)]),_0x32072c['length'];}function lr(_0xecc91f){const _0x5ad391=a0_0x2101b5;let _0x140312=_0xecc91f[_0x5ad391(0x34a)](_0x5ad391(0x7d4))[_0x5ad391(0x349)],_0x3fab26=_0xecc91f['get'](_0x5ad391(0x4f5));console['log']('Valor\x20da\x20URL\x20recuperada:',_0x140312),console[_0x5ad391(0x509)]('Configuração\x20SSL\x20recuperada:',_0x3fab26);let _0x116947='',_0x16d18c=_0x140312||'';if(_0x140312){let _0xa06d74=_0x140312[_0x5ad391(0x66b)](/\/\/(.*?)\./);console[_0x5ad391(0x509)](_0x5ad391(0x23b),_0xa06d74),_0xa06d74&&_0xa06d74[0x1]&&(_0x116947=_0xa06d74[0x1],console[_0x5ad391(0x509)](_0x5ad391(0x2e6),_0x116947));}if(!_0x116947&&_0x3fab26&&_0x3fab26[_0x5ad391(0x436)]){let _0x32c09a=_0x3fab26['FULLCHAIN'][_0x5ad391(0x2bd)]('/');console[_0x5ad391(0x509)](_0x5ad391(0x307),_0x32c09a);let _0x1afedd=_0x32c09a[_0x32c09a[_0x5ad391(0x608)]-0x2];if(console[_0x5ad391(0x509)](_0x5ad391(0x645),_0x1afedd),_0x1afedd){let _0x3bc998=_0x1afedd[_0x5ad391(0x2bd)]('.');console[_0x5ad391(0x509)](_0x5ad391(0x1a5),_0x3bc998),_0x3bc998['length']>0x2&&(_0x116947=_0x3bc998[0x0],console[_0x5ad391(0x509)](_0x5ad391(0x6e3),_0x116947),_0x16d18c=''+_0x1afedd);}}return{'subdomain':_0x116947||_0x5ad391(0x316),'fullURL':_0x16d18c||_0x5ad391(0x8a5)};}var {subdomain:B,fullURL:Gs}=lr(S);console[a0_0x2101b5(0x509)](a0_0x2101b5(0x3ac),B),console[a0_0x2101b5(0x509)](a0_0x2101b5(0x84e),Gs);async function ur(){const _0x3e12fe=a0_0x2101b5;let _0x1c7b18=S[_0x3e12fe(0x34a)](_0x3e12fe(0x61a)),_0x14e9b3=S[_0x3e12fe(0x34a)](_0x3e12fe(0x532))['API_KEY'][_0x3e12fe(0x324)],_0x413262=S['get']('SSL_CONF'),_0x1628ff=await Vi(),_0x450edd=S[_0x3e12fe(0x34a)](_0x3e12fe(0x7d4))[_0x3e12fe(0x57f)],_0x2ea290=Gs;try{let _0xae12be={'ip':_0x1628ff||null,'redis_enable':_0x1c7b18?.[_0x3e12fe(0x6f5)]||null,'apikey':_0x14e9b3||null,'ssl':_0x413262?.['PRIVKEY']||null,'lastupdate':Gi||null,'port':_0x450edd||null,'gitInstallError':Re?.[_0x3e12fe(0x31f)]||null,'url':_0x2ea290||null,'subdomain':B};if(console[_0x3e12fe(0x509)]('ip:\x20',_0xae12be['ip']),_0x1c7b18&&_0x1c7b18[_0x3e12fe(0x6f5)]){let _0x5c193a=await cr();_0xae12be[_0x3e12fe(0x319)]=_0x5c193a||null;}for(let _0x41944f in _0xae12be)_0xae12be['hasOwnProperty'](_0x41944f)&&_0x41944f!=='ip'&&(_0xae12be[_0x41944f]=JSON[_0x3e12fe(0x41d)](_0xae12be[_0x41944f]));return(await Je[_0x3e12fe(0x7ae)]['post'](_0x3e12fe(0x357),_0xae12be))[_0x3e12fe(0x1a0)];}catch(_0x5be6c4){return console[_0x3e12fe(0x3c9)](_0x5be6c4),!0x1;}}var Js=!0x1,Gi=0x26f,dr=0x3,Fi=0x1b7740;async function Vs(){const _0x13d497=a0_0x2101b5;let _0x2f5dcb=_0x13d497(0x1ec);Re===null&&(_0x2f5dcb=await Vi());let _0x30134f=await ur();if(_0x30134f){if(_0x30134f[_0x13d497(0x7b2)][_0x13d497(0x1a1)]===!0x0){Re===null&&_0x30134f[_0x13d497(0x7b2)][_0x13d497(0x1ef)]-Gi>0x0&&await pr(),Js||(Js=!0x0,ar());let _0x16bfc7=0x24*0x3c*0x3c,_0x1a39f4=_0x30134f[_0x13d497(0x7b2)]['segundos']>_0x16bfc7?_0x16bfc7:_0x30134f['response'][_0x13d497(0x82c)],_0x3ae6e5=Number(_0x1a39f4);if(isNaN(_0x3ae6e5)){console[_0x13d497(0x3c9)](_0x13d497(0x519));return;}let _0x439a32=Math['floor'](_0x3ae6e5/0xe10),_0x336ec2=Math[_0x13d497(0x72b)](_0x3ae6e5%0xe10/0x3c),_0x4d989f=new Date(Date[_0x13d497(0x87f)]()+_0x3ae6e5*0x3e8);setTimeout(Vs,_0x3ae6e5*0x3e8);let _0xb6c3b9=_0x2bb72d=>_0x2bb72d[_0x13d497(0x60f)]()[_0x13d497(0x446)](0x2,'0'),_0x4e2dae=_0x13d497(0x6cf)+_0xb6c3b9(_0x439a32)+'\x20horas\x20e\x20'+_0xb6c3b9(_0x336ec2)+_0x13d497(0x8ce)+_0xb6c3b9(_0x4d989f[_0x13d497(0x844)]())+':'+_0xb6c3b9(_0x4d989f[_0x13d497(0x49c)]())+'.';console[_0x13d497(0x509)](_0x4e2dae);}else return console['log']('Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/'),Js&&(console['log'](_0x13d497(0x65f)),process['exit']()),_0x13d497(0x840);}else{if(Li++,Li<dr)console[_0x13d497(0x509)](_0x13d497(0x523)+Fi/0xea60+'\x20minutos...'),setTimeout(Vs,Fi);else return console['error'](_0x13d497(0x1a6)),_0x13d497(0x847);}}async function pr(){const _0x167198=a0_0x2101b5;console['log'](_0x167198(0x7ab)),console[_0x167198(0x509)](_0x167198(0x4e9)),(0x0,rs['spawn'])('pm2\x20flush',{'shell':!0x0})['on'](_0x167198(0x584),_0x3d7ed1=>{const _0xc2352f=_0x167198;_0x3d7ed1!==0x0?console[_0xc2352f(0x3c9)](_0xc2352f(0x38a)):(console[_0xc2352f(0x509)](_0xc2352f(0x651)),console['log'](_0xc2352f(0x30e)),(0x0,rs[_0xc2352f(0x49d)])(_0xc2352f(0x284),{'shell':!0x0})['on'](_0xc2352f(0x584),_0x143428=>{const _0xbb4af7=_0xc2352f;if(_0x143428!==0x0)console[_0xbb4af7(0x3c9)](_0xbb4af7(0x6e8));else{console['log'](_0xbb4af7(0x30f));let _0x5ac269=(0x0,rs[_0xbb4af7(0x49d)])(_0xbb4af7(0x2d8),{'shell':!0x0});_0x5ac269[_0xbb4af7(0x489)]['on'](_0xbb4af7(0x1a0),_0x46b08e=>{const _0x50d64b=_0xbb4af7;console[_0x50d64b(0x509)](_0x50d64b(0x5ca)+_0x46b08e);}),_0x5ac269[_0xbb4af7(0x495)]['on']('data',_0x106c1e=>{const _0x2bb853=_0xbb4af7;console['error'](_0x2bb853(0x69c)+_0x106c1e);}),_0x5ac269['on'](_0xbb4af7(0x32d),_0x2421b5=>{const _0x49f58e=_0xbb4af7;_0x2421b5!==0x0?console[_0x49f58e(0x3c9)](_0x49f58e(0x49a)+_0x2421b5):console[_0x49f58e(0x509)](_0x49f58e(0x54f)),console['log']('Parando\x20aplicação...'),setTimeout(()=>process[_0x49f58e(0x32d)](),0x2710);});}}));});}0x0&&(module[a0_0x2101b5(0x76f)]={'fullURL':fullURL,'subdomain':subdomain});