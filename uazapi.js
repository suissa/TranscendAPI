const a0_0x20331d=a0_0xae02;(function(_0x157e8a,_0x1311ba){const _0x189ec7=a0_0xae02,_0x1e2f54=_0x157e8a();while(!![]){try{const _0x54a846=-parseInt(_0x189ec7(0x258))/0x1+parseInt(_0x189ec7(0x3fe))/0x2+parseInt(_0x189ec7(0x44f))/0x3+parseInt(_0x189ec7(0x230))/0x4+parseInt(_0x189ec7(0x66e))/0x5*(parseInt(_0x189ec7(0x517))/0x6)+parseInt(_0x189ec7(0x2ac))/0x7+-parseInt(_0x189ec7(0x567))/0x8;if(_0x54a846===_0x1311ba)break;else _0x1e2f54['push'](_0x1e2f54['shift']());}catch(_0xc849a5){_0x1e2f54['push'](_0x1e2f54['shift']());}}}(a0_0x26a0,0x83d40));var Ki=Object[a0_0x20331d(0x260)],Be=Object[a0_0x20331d(0x8ad)],Qi=Object[a0_0x20331d(0x61a)],Yi=Object['getOwnPropertyNames'],Xi=Object[a0_0x20331d(0x715)],Zi=Object['prototype'][a0_0x20331d(0x36c)],eo=(_0xb1dbc8,_0x453e79)=>{for(var _0x283dcc in _0x453e79)Be(_0xb1dbc8,_0x283dcc,{'get':_0x453e79[_0x283dcc],'enumerable':!0x0});},Hs=(_0x5d0a6e,_0x2018a2,_0x9944f6,_0x52926f)=>{const _0x5a70e6=a0_0x20331d;if(_0x2018a2&&typeof _0x2018a2==_0x5a70e6(0x4bd)||typeof _0x2018a2=='function'){for(let _0x1ffc43 of Yi(_0x2018a2))!Zi['call'](_0x5d0a6e,_0x1ffc43)&&_0x1ffc43!==_0x9944f6&&Be(_0x5d0a6e,_0x1ffc43,{'get':()=>_0x2018a2[_0x1ffc43],'enumerable':!(_0x52926f=Qi(_0x2018a2,_0x1ffc43))||_0x52926f[_0x5a70e6(0x70b)]});}return _0x5d0a6e;},I=(_0x19ad53,_0x1193e5,_0x2e5a52)=>(_0x2e5a52=_0x19ad53!=null?Ki(Xi(_0x19ad53)):{},Hs(_0x1193e5||!_0x19ad53||!_0x19ad53['__esModule']?Be(_0x2e5a52,a0_0x20331d(0x42b),{'value':_0x19ad53,'enumerable':!0x0}):_0x2e5a52,_0x19ad53)),to=_0x5f254e=>Hs(Be({},a0_0x20331d(0x2f5),{'value':!0x0}),_0x5f254e),mr={};eo(mr,{'fullURL':()=>Ws,'subdomain':()=>K}),module['exports']=to(mr);var Vi=I(require(a0_0x20331d(0x89b))),Qs=require('fs'),Ys=require(a0_0x20331d(0x3e2)),Xs=require('path'),We=require(a0_0x20331d(0x4b7)),ue=process[a0_0x20331d(0x5be)](),Me=(0x0,We[a0_0x20331d(0x6ca)])(ue,'instances'),Ks=(0x0,We[a0_0x20331d(0x6ca)])(ue,'src'),an=(0x0,We[a0_0x20331d(0x6ca)])(ue,'store',a0_0x20331d(0x4e2)),hs=class{constructor(){const _0x23a32c=a0_0x20331d;this[_0x23a32c(0x4d9)]();}[a0_0x20331d(0x51d)](_0x50f538){const _0x59e0d2=a0_0x20331d;return this[_0x59e0d2(0x673)][_0x50f538];}[a0_0x20331d(0x4d9)](){const _0x45dc28=a0_0x20331d;this[_0x45dc28(0x673)]=process[_0x45dc28(0x673)]?.[_0x45dc28(0x82f)]!==_0x45dc28(0x3ca)?this[_0x45dc28(0x913)]():this[_0x45dc28(0x83a)](),process[_0x45dc28(0x673)]?.[_0x45dc28(0x82f)]===_0x45dc28(0x3ca)&&(this[_0x45dc28(0x673)][_0x45dc28(0x763)]['TYPE']=_0x45dc28(0x6a6),this[_0x45dc28(0x673)][_0x45dc28(0x763)][_0x45dc28(0x5b1)]=Number[_0x45dc28(0x43f)](process[_0x45dc28(0x673)]?.[_0x45dc28(0x6cb)]??'8080'));}[a0_0x20331d(0x913)](){const _0x25460c=a0_0x20331d;return(0x0,Ys[_0x25460c(0x68f)])((0x0,Qs[_0x25460c(0x4f7)])((0x0,Xs[_0x25460c(0x6ca)])(Ks,'../env.yml'),{'encoding':'utf-8'}));}[a0_0x20331d(0x83a)](){const _0xbe54a2=a0_0x20331d;return{'SERVER':{'TYPE':process[_0xbe54a2(0x673)]['SERVER_TYPE'],'PORT':Number[_0xbe54a2(0x43f)](process[_0xbe54a2(0x673)][_0xbe54a2(0x6cb)]),'URL':process['env'][_0xbe54a2(0x674)]},'CORS':{'ORIGIN':process[_0xbe54a2(0x673)]['CORS_ORIGIN'][_0xbe54a2(0x382)](','),'METHODS':process['env'][_0xbe54a2(0x84f)]['split'](','),'CREDENTIALS':process[_0xbe54a2(0x673)]?.[_0xbe54a2(0x35f)]===_0xbe54a2(0x3ca)},'SSL_CONF':{'PRIVKEY':process['env']?.[_0xbe54a2(0x252)],'FULLCHAIN':process['env']?.[_0xbe54a2(0x662)]},'STORE':{'CLEANING_INTERVAL':Number[_0xbe54a2(0x4a7)](process[_0xbe54a2(0x673)]?.[_0xbe54a2(0x2cf)])?Number['parseInt'](process[_0xbe54a2(0x673)][_0xbe54a2(0x2cf)]):void 0x0,'MESSAGES':process[_0xbe54a2(0x673)]?.[_0xbe54a2(0x388)]===_0xbe54a2(0x3ca),'CONTACTS':process[_0xbe54a2(0x673)]?.[_0xbe54a2(0x90e)]===_0xbe54a2(0x3ca),'CHATS':process[_0xbe54a2(0x673)]?.[_0xbe54a2(0x6d7)]===_0xbe54a2(0x3ca)},'DATABASE':{'CONNECTION':{'HOST':process[_0xbe54a2(0x673)]?.[_0xbe54a2(0x64d)],'PORT':Number['parseInt'](process['env']?.[_0xbe54a2(0x64d)]),'USER':process[_0xbe54a2(0x673)][_0xbe54a2(0x494)],'PASSWORD':process[_0xbe54a2(0x673)][_0xbe54a2(0x8b0)],'URI':process[_0xbe54a2(0x673)]['DATABASE_CONNECTION_URI'],'DB_PREFIX_NAME':process['env']['DATABASE_CONNECTION_DB_PREFIX_NAME']},'ENABLED':process['env']?.['DATABASE_ENABLED']===_0xbe54a2(0x3ca)},'REDIS':{'ENABLED':process[_0xbe54a2(0x673)]?.['REDIS_ENABLED']===_0xbe54a2(0x3ca),'URI':process[_0xbe54a2(0x673)]['REDIS_URI']||_0xbe54a2(0x74e),'PREFIX_KEY':process[_0xbe54a2(0x673)][_0xbe54a2(0x757)]||_0xbe54a2(0x700)},'LOG':{'LEVEL':process[_0xbe54a2(0x673)]?.[_0xbe54a2(0x24a)]['split'](','),'COLOR':process['env']?.[_0xbe54a2(0x30d)]===_0xbe54a2(0x3ca)},'PROXY':process[_0xbe54a2(0x673)]?.[_0xbe54a2(0x560)]===_0xbe54a2(0x3ca),'AUTHENTICATION':{'TYPE':process[_0xbe54a2(0x673)][_0xbe54a2(0x687)],'API_KEY':{'KEY':process['env'][_0xbe54a2(0x7b9)]},'JWT':{'EXPIRIN_IN':Number[_0xbe54a2(0x4a7)](process['env']?.['AUTHENTICATION_JWT_EXPIRIN_IN'])?Number[_0xbe54a2(0x43f)](process[_0xbe54a2(0x673)][_0xbe54a2(0x1f8)]):0xe10,'SECRET':process[_0xbe54a2(0x673)][_0xbe54a2(0x934)]}}};}},b=new hs(),Gi=I(require(a0_0x20331d(0x4d1))),be=I(require('express')),Gs=require(a0_0x20331d(0x4b7)),gs=I(require(a0_0x20331d(0x3a3))),ms=(_0x1d1f3c=>(_0x1d1f3c[a0_0x20331d(0x8d2)]=a0_0x20331d(0x80a),_0x1d1f3c['INFO']='\x1b[34m',_0x1d1f3c[a0_0x20331d(0x7fc)]=a0_0x20331d(0x200),_0x1d1f3c[a0_0x20331d(0x3f9)]=a0_0x20331d(0x86d),_0x1d1f3c[a0_0x20331d(0x5ef)]=a0_0x20331d(0x54b),_0x1d1f3c[a0_0x20331d(0x749)]=a0_0x20331d(0x44b),_0x1d1f3c[a0_0x20331d(0x353)]=a0_0x20331d(0x405),_0x1d1f3c))(ms||{}),Zs=(_0x4617cf=>(_0x4617cf[a0_0x20331d(0x8d2)]=a0_0x20331d(0x47c),_0x4617cf[a0_0x20331d(0x353)]=a0_0x20331d(0x6b4),_0x4617cf[a0_0x20331d(0x6e3)]=a0_0x20331d(0x7e8),_0x4617cf[a0_0x20331d(0x7fc)]=a0_0x20331d(0x8fb),_0x4617cf[a0_0x20331d(0x3f9)]=a0_0x20331d(0x599),_0x4617cf['DEBUG']=a0_0x20331d(0x81e),_0x4617cf[a0_0x20331d(0x749)]='\x1b[37m%s\x1b[0m',_0x4617cf))(Zs||{}),ea=(_0x25e789=>(_0x25e789[a0_0x20331d(0x8d2)]=a0_0x20331d(0x8d2),_0x25e789[a0_0x20331d(0x7fc)]=a0_0x20331d(0x7fc),_0x25e789['INFO']=a0_0x20331d(0x6e3),_0x25e789['DARK']='DARK',_0x25e789[a0_0x20331d(0x3f9)]=a0_0x20331d(0x3f9),_0x25e789['DEBUG']=a0_0x20331d(0x5ef),_0x25e789[a0_0x20331d(0x749)]=a0_0x20331d(0x749),_0x25e789))(ea||{}),ta=(_0x537733=>(_0x537733[a0_0x20331d(0x8d2)]=a0_0x20331d(0x2dd),_0x537733[a0_0x20331d(0x6e3)]=a0_0x20331d(0x430),_0x537733['WARN']='\x1b[43m',_0x537733['DARK']=a0_0x20331d(0x207),_0x537733[a0_0x20331d(0x3f9)]=a0_0x20331d(0x4bc),_0x537733[a0_0x20331d(0x5ef)]=a0_0x20331d(0x25f),_0x537733[a0_0x20331d(0x749)]=a0_0x20331d(0x2f4),_0x537733))(ta||{}),$=class{constructor(_0x430978=a0_0x20331d(0x8a9)){const _0x318c8d=a0_0x20331d;this['context']=_0x430978,this[_0x318c8d(0x373)]=b;}[a0_0x20331d(0x6e0)](_0x5f592b){const _0x50b6a6=a0_0x20331d;this[_0x50b6a6(0x4ac)]=_0x5f592b;}[a0_0x20331d(0x253)](_0x53846e,_0x15e357){const _0x36edf4=a0_0x20331d;let _0x1ae1f6=[];this[_0x36edf4(0x373)][_0x36edf4(0x51d)](_0x36edf4(0x8d2))['LEVEL'][_0x36edf4(0x22b)](_0x4adce2=>_0x1ae1f6['push'](ea[_0x4adce2]));let _0x3ce5ca=typeof _0x53846e;_0x1ae1f6[_0x36edf4(0x8eb)](_0x15e357)&&(b['get'](_0x36edf4(0x8d2))['COLOR']?(console[_0x36edf4(0x834)]('\x1b[1m'+Zs[_0x15e357],_0x36edf4(0x31f),(0x0,gs[_0x36edf4(0x42b)])()['format'](_0x36edf4(0x474)),'\x1b[0m',ms[_0x15e357]+ta[_0x15e357]+_0x36edf4(0x5ba),_0x15e357+'\x20\x1b[0m',_0x36edf4(0x41f),this[_0x36edf4(0x4ac)]+'\x1b[0m',ms[_0x15e357],_0x3ce5ca!==_0x36edf4(0x4bd)?_0x53846e:'',_0x36edf4(0x38b)),_0x3ce5ca===_0x36edf4(0x4bd)&&console['log'](_0x53846e,'\x0a')):console['log']((0x0,gs['default'])()[_0x36edf4(0x8a7)](_0x36edf4(0x5cb)),_0x15e357+'\x20',''+this[_0x36edf4(0x4ac)],_0x53846e));}[a0_0x20331d(0x834)](_0x27d246){const _0x25da7d=a0_0x20331d;this[_0x25da7d(0x253)](_0x27d246,_0x25da7d(0x8d2));}[a0_0x20331d(0x7f7)](_0x13f526){const _0x5b5d0d=a0_0x20331d;this[_0x5b5d0d(0x253)](_0x13f526,'INFO');}['warn'](_0x530c1e){const _0x31d16f=a0_0x20331d;this[_0x31d16f(0x253)](_0x530c1e,_0x31d16f(0x7fc));}[a0_0x20331d(0x2c2)](_0x4bbea2){const _0xd63e4b=a0_0x20331d;this[_0xd63e4b(0x253)](_0x4bbea2,_0xd63e4b(0x3f9));}[a0_0x20331d(0x7a9)](_0x43bc18){const _0x4f59b3=a0_0x20331d;this[_0x4f59b3(0x253)](_0x43bc18,'VERBOSE');}[a0_0x20331d(0x6f0)](_0x2d447a){const _0x463225=a0_0x20331d;this[_0x463225(0x253)](_0x2d447a,_0x463225(0x5ef));}[a0_0x20331d(0x7bd)](_0x2a3616){const _0xd43a7d=a0_0x20331d;this[_0xd43a7d(0x253)](_0x2a3616,_0xd43a7d(0x353));}};function sa(){const _0x16fa7e=a0_0x20331d;process['on']('uncaughtException',(_0x3f83fa,_0x15e08c)=>{const _0x52102b=a0_0xae02;new $(_0x52102b(0x908))[_0x52102b(0x2c2)]({'origin':_0x15e08c,'stderr':process['stderr']['fd'],'error':_0x3f83fa});}),process['on'](_0x16fa7e(0x6b9),(_0x3f27c1,_0x1d7317)=>{new $('unhandledRejection')['error']({'origin':_0x1d7317,'stderr':process['stderr']['fd'],'error':_0x3f27c1});});}var aa=I(require(a0_0x20331d(0x573))),fs=new aa[(a0_0x20331d(0x42b))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Ce=require(a0_0x20331d(0x8e1)),Ie=I(require('mongoose')),ze=new $(a0_0x20331d(0x7e9)),U=b[a0_0x20331d(0x51d)](a0_0x20331d(0x8c2)),R=U[a0_0x20331d(0x56c)]?U[a0_0x20331d(0x8e5)][a0_0x20331d(0x51a)]?Ie[a0_0x20331d(0x42b)]['createConnection'](U[a0_0x20331d(0x8e5)][a0_0x20331d(0x51a)],{'dbName':U[a0_0x20331d(0x8e5)][a0_0x20331d(0x667)]+a0_0x20331d(0x833)}):Ie[a0_0x20331d(0x42b)]['createConnection'](a0_0x20331d(0x6a9)+U[a0_0x20331d(0x8e5)][a0_0x20331d(0x4c5)]+':'+U[a0_0x20331d(0x8e5)]['PORT']+a0_0x20331d(0x3ef),{'user':U[a0_0x20331d(0x8e5)][a0_0x20331d(0x725)],'pass':U[a0_0x20331d(0x8e5)][a0_0x20331d(0x241)],'dbName':U[a0_0x20331d(0x8e5)]['DB_PREFIX_NAME']+a0_0x20331d(0x833)}):null;U['ENABLED']&&ze[a0_0x20331d(0x7f7)](a0_0x20331d(0x327)+R['$dbName']);var de=U['ENABLED']?U[a0_0x20331d(0x8e5)]['URI']?Ie[a0_0x20331d(0x42b)][a0_0x20331d(0x6ef)](U[a0_0x20331d(0x8e5)]['URI'],{'dbName':a0_0x20331d(0x301)}):Ie[a0_0x20331d(0x42b)]['createConnection'](a0_0x20331d(0x6a9)+U['CONNECTION'][a0_0x20331d(0x4c5)]+':'+U[a0_0x20331d(0x8e5)][a0_0x20331d(0x5b1)]+a0_0x20331d(0x3ef),{'user':U[a0_0x20331d(0x8e5)][a0_0x20331d(0x725)],'pass':U['CONNECTION'][a0_0x20331d(0x241)],'dbName':a0_0x20331d(0x857)}):null;de&&ze[a0_0x20331d(0x7f7)](a0_0x20331d(0x327)+de[a0_0x20331d(0x2c5)]),process['on'](a0_0x20331d(0x462),()=>{const _0x11b4e7=a0_0x20331d;R&&R[_0x11b4e7(0x8fe)](()=>{const _0x3e8323=_0x11b4e7;ze[_0x3e8323(0x7f7)](_0x3e8323(0x44d));}),de&&de['close'](()=>{const _0x4dbfa0=_0x11b4e7;ze[_0x4dbfa0(0x7f7)](_0x4dbfa0(0x348));});});var so=new Ce[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),ao=new Ce[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),io=new Ce[(a0_0x20331d(0x696))]({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),oo=new Ce[(a0_0x20331d(0x696))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[so],'default':[]}},{'_id':!0x1}),ro=new Ce[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':oo,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':ao},'groupdata':{'type':io,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),ia=_0x3778a1=>{const _0x2b39fb=a0_0x20331d;let _0x1f5339='z_'+_0x3778a1+_0x2b39fb(0x8c9);return R?.[_0x2b39fb(0x2d4)](_0x2b39fb(0x911),ro,_0x1f5339);},oa=require(a0_0x20331d(0x8e1)),no=new oa[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ra=_0xdfc849=>{const _0x22363c=a0_0x20331d;let _0x19dbc4='z_'+_0xdfc849+_0x22363c(0x563);return R?.[_0x22363c(0x2d4)](_0x22363c(0x6d6),no,_0x19dbc4);},na=require(a0_0x20331d(0x8e1)),ws=class{},co=new na[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),ca=de?.[a0_0x20331d(0x2d4)](ws[a0_0x20331d(0x8b9)],co,a0_0x20331d(0x2cc)),la=require(a0_0x20331d(0x8e1)),ys=class{},lo=new la['Schema']({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),He=de?.['model'](ys[a0_0x20331d(0x8b9)],lo,a0_0x20331d(0x6d0)),ua=require(a0_0x20331d(0x8e1)),uo=new ua[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),da=_0x23edc2=>{const _0xd9c603=a0_0x20331d;let _0x48f0c7='z_'+_0x23edc2+_0xd9c603(0x2b4);return R?.['model']('MessageModel',uo,_0x48f0c7);},pa=require(a0_0x20331d(0x8e1)),bs=class{},po=new pa[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),ha=R?.[a0_0x20331d(0x2d4)](bs[a0_0x20331d(0x8b9)],po,a0_0x20331d(0x750)),ga=require(a0_0x20331d(0x8e1)),Ss=class{},ma=new ga['Schema']({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});ma[a0_0x20331d(0x7d0)](a0_0x20331d(0x84d),function(_0x1ddba4){const _0x1396f3=a0_0x20331d;delete this['flowActive'],delete this[_0x1396f3(0x799)],delete this[_0x1396f3(0x50c)],delete this['flowStopConversation'],delete this[_0x1396f3(0x5f8)],_0x1ddba4();});var fa=R?.[a0_0x20331d(0x2d4)](Ss[a0_0x20331d(0x8b9)],ma,a0_0x20331d(0x603)),P=require(a0_0x20331d(0x8e1)),Ms=require(a0_0x20331d(0x23a)),Ke=class{},ya=new P[(a0_0x20331d(0x696))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Cs=new P[(a0_0x20331d(0x696))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),ho=new P[(a0_0x20331d(0x696))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x20331d(0x41e)},'footerText':{'type':String},'buttonText':{'type':String,'default':'Selecione'},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':'Esse\x20fluxo\x20expirou'},'pollErrorMessage':{'type':String,'default':a0_0x20331d(0x40b)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),ba=new P['Schema']({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),go=new P[(a0_0x20331d(0x696))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),mo=new P['Schema']({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Ns=new P['Schema']({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),fo=new P[(a0_0x20331d(0x696))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),Sa=new P[(a0_0x20331d(0x696))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':ho},'apirequest':go,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':fo,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),Ma=new P[(a0_0x20331d(0x696))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),Es=class{},Ca=new P['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[Ns],'blocks':[Sa],'groups':[ya],'conditions':[ba],'varedits':[Ma],'replyOptions':{'type':[Cs],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x3ed941=a0_0x20331d;return _0x3ed941(0x363)+Math['random']()['toString'](0x24)[_0x3ed941(0x394)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':a0_0x20331d(0x484)},'startID':{'type':String,'default':()=>(0x0,Ms['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ms['v4'])()},'shareOwners':{'type':[String],'default':[]}});Ca[a0_0x20331d(0x7d0)]('findOneAndUpdate',function(_0x4287f7){const _0x4f4ec5=a0_0x20331d;let _0x1c105e=this[_0x4f4ec5(0x8bd)]();if(_0x1c105e&&typeof _0x1c105e=='object'&&'$set'in _0x1c105e){let _0x5eb790=_0x1c105e[_0x4f4ec5(0x565)];if(_0x5eb790){let _0x175e63=new Set(),_0x32efc4=new Set(_0x5eb790[_0x4f4ec5(0x5e3)]?.[_0x4f4ec5(0x41b)](_0x2add07=>_0x2add07['name'])),_0x1867e4=JSON[_0x4f4ec5(0x5f3)](_0x5eb790),_0x111f5d=/{{(?!_)([^}]*)}}/g,_0xe00803;for(;(_0xe00803=_0x111f5d[_0x4f4ec5(0x318)](_0x1867e4))!==null;)_0x32efc4[_0x4f4ec5(0x718)](_0xe00803[0x1])||_0x175e63[_0x4f4ec5(0x783)](_0xe00803[0x1]);_0x175e63[_0x4f4ec5(0x4aa)]>0x0?(console['warn'](_0x4f4ec5(0x8e0),Array[_0x4f4ec5(0x654)](_0x175e63)),_0x5eb790[_0x4f4ec5(0x5e4)]=Array[_0x4f4ec5(0x654)](_0x175e63)):_0x5eb790[_0x4f4ec5(0x5e4)]=[],this[_0x4f4ec5(0x22f)]({'$set':_0x5eb790});}}_0x4287f7();});var Ee=R?.[a0_0x20331d(0x2d4)](Es[a0_0x20331d(0x8b9)],Ca,a0_0x20331d(0x2e6)),wo=new P[(a0_0x20331d(0x696))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[Ns],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[mo]},{'_id':!0x1}),yo=new P[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[Ns],'blocks':[Sa],'groups':[ya],'conditions':[ba],'varedits':[Ma],'replyOptions':{'type':[Cs],'default':[]},'chatLog':wo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x20331d(0x29f)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':'Esse\x20fluxo\x20expirou'},'waitingMenu_replyOptions':{'type':[Cs],'default':[]}}),Ea=_0x3007cf=>{const _0x1e19a1=a0_0x20331d;let _0x4d15c8='z_'+_0x3007cf+_0x1e19a1(0x62a);return R?.[_0x1e19a1(0x2d4)](_0x1e19a1(0x488),yo,_0x4d15c8);},bo=new P[(a0_0x20331d(0x696))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),wa=new P[(a0_0x20331d(0x696))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),So=new P[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[wa],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x20331d(0x229)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[bo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':wa,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),va=_0x21291e=>{const _0x3eded1=a0_0x20331d;let _0x1d0d2c='z_'+_0x21291e+_0x3eded1(0x5d5);return R?.['model']('ScheduleMessageModel',So,_0x1d0d2c);},vs=class{},Mo=new P[(a0_0x20331d(0x696))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),Co=new P[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Eo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),vo=new P[(a0_0x20331d(0x696))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':a0_0x20331d(0x4a0)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),No=new P[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),$o=new P[(a0_0x20331d(0x696))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[No]},'customFields':{'type':[Eo]},'flowConfig':{'type':vo,'default':{}},'flows':{'type':[Co],'default':[]},'autoCompleteMessages':{'type':[Mo],'default':[]}}),Te=R?.[a0_0x20331d(0x2d4)](vs['name'],$o,a0_0x20331d(0x246)),Na=require('mongoose'),Ro=new Na[(a0_0x20331d(0x696))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),$a=_0x36055c=>{const _0x14a9be=a0_0x20331d;let _0x55a8bf='z_'+_0x36055c+_0x14a9be(0x680);return R?.['model']('LabelModel',Ro,_0x55a8bf);},_=class{constructor(_0x3c8b58){const _0x1fe845=a0_0x20331d;this[_0x1fe845(0x407)]=_0x3c8b58[_0x1fe845(0x51d)](_0x1fe845(0x8c2));}};function A(_0x5619e9){const _0xa22880=a0_0x20331d;let _0x32d8d9={};for(let [_0x11aa9c,_0x39e4ec]of Object[_0xa22880(0x458)](_0x5619e9))if(typeof _0x39e4ec=='object'&&!Array[_0xa22880(0x3f2)](_0x39e4ec)){for(let [_0x13552e,_0x9f0a20]of Object[_0xa22880(0x458)](_0x39e4ec))_0x32d8d9[_0x11aa9c+'.'+_0x13552e]=_0x9f0a20;}else _0x32d8d9[_0x11aa9c]=_0x39e4ec;return _0x32d8d9;}var Qe=class{constructor(_0x5c8991,_0x4e9608,_0x3f6a24,_0x49aece,_0x7646b1,_0x3fdc4d,_0x3b9410,_0x4bc599,_0x5c025c,_0x54dd15,_0x567528,_0x2328d6,_0x27a838){const _0x15114c=a0_0x20331d;this[_0x15114c(0x923)]=_0x5c8991,this[_0x15114c(0x617)]=_0x4e9608,this[_0x15114c(0x929)]=_0x3f6a24,this[_0x15114c(0x65d)]=_0x49aece,this[_0x15114c(0x603)]=_0x7646b1,this['auth']=_0x3fdc4d,this[_0x15114c(0x664)]=_0x3b9410,this['flow']=_0x4bc599,this[_0x15114c(0x444)]=_0x5c025c,this['label']=_0x54dd15,this[_0x15114c(0x35b)]=_0x567528,this[_0x15114c(0x91d)]=_0x2328d6,this[_0x15114c(0x5f4)]=_0x27a838;}get[a0_0x20331d(0x81a)](){return this['dbClient'];}},Ye=class{},Xe=class extends _{[a0_0x20331d(0x8c1)](_0x34cee4){return da(_0x34cee4);}async[a0_0x20331d(0x477)](_0x5b4568,_0xd4581b){const _0x1d47e1=a0_0x20331d;if(_0x5b4568[_0x1d47e1(0x786)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x1d47e1(0x8c1)](_0xd4581b)[_0x1d47e1(0x323)]([..._0x5b4568]))[_0x1d47e1(0x786)]};}catch(_0xbb552d){return _0xbb552d;}}async[a0_0x20331d(0x691)](_0x2ce2a9,_0x2012c9){const _0x32b3cd=a0_0x20331d;try{let _0x418950=this[_0x32b3cd(0x8c1)](_0x2012c9),_0x51bcf1=A(_0x2ce2a9['where']);return await _0x418950['find'](_0x51bcf1)['sort']({'messageTimestamp':-0x1})[_0x32b3cd(0x7ce)](_0x2ce2a9?.['limit']??0x0)[_0x32b3cd(0x4cf)]();}catch{return[];}}async[a0_0x20331d(0x65e)](_0x1c7670,_0xd02681){const _0x131b49=a0_0x20331d;try{let _0x12326a=this['getMessageModelForOwner'](_0xd02681),_0x5149f3=A(_0x1c7670[_0x131b49(0x656)]);await _0x12326a['deleteMany'](_0x5149f3);}catch(_0x33a54f){console['error'](_0x33a54f);}}async[a0_0x20331d(0x3fd)](_0x4a0920,_0x48ca65,_0x3e5325){const _0x1a07fc=a0_0x20331d;try{let _0x2ba668=this[_0x1a07fc(0x8c1)](_0x3e5325),_0x42081a=A(_0x4a0920['where']);return await _0x2ba668[_0x1a07fc(0x858)](_0x42081a,{'$set':_0x48ca65},{'new':!0x0});}catch(_0x5c2605){throw console[_0x1a07fc(0x2c2)](_0x5c2605),_0x5c2605;}}async[a0_0x20331d(0x323)](_0x5e72a2,_0x29e6b4){const _0x5ce2f2=a0_0x20331d;if(_0x5e72a2[_0x5ce2f2(0x786)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x5ce2f2(0x8c1)](_0x29e6b4)['insertMany']([..._0x5e72a2]))['length']};}catch(_0xb72cdc){return console[_0x5ce2f2(0x834)]('ERROR:\x20',_0xb72cdc),_0xb72cdc;}}async['deleteAll'](_0x1332f0){const _0x15b84b=a0_0x20331d;try{return await this[_0x15b84b(0x8c1)](_0x1332f0)['collection'][_0x15b84b(0x789)](),{'success':!0x0};}catch(_0x1eb65f){return console['error'](_0x1eb65f),{'success':!0x1,'error':_0x1eb65f};}}},Ps=I(require(a0_0x20331d(0x52c))),w=I(require(a0_0x20331d(0x3ac))),Fe=require('fs'),j=I(require(a0_0x20331d(0x4b7))),te=I(require(a0_0x20331d(0x2a0))),xi=require(a0_0x20331d(0x23a)),Di=I(require(a0_0x20331d(0x8ef))),Pi=I(require(a0_0x20331d(0x791))),Ra=[a0_0x20331d(0x75d),a0_0x20331d(0x1e5),a0_0x20331d(0x8c4),a0_0x20331d(0x5fc),'stickerMessage'],Aa=[a0_0x20331d(0x7f5),a0_0x20331d(0x4bb),'viewOnceMessage','viewOnceMessageV2'],ks=require('os'),qt=I(require(a0_0x20331d(0x22e))),Ue=require('child_process'),ki=require(a0_0x20331d(0x376)),Ls=require(a0_0x20331d(0x7d2)),fe=I(require(a0_0x20331d(0x8e1))),L=require('class-validator'),pe=class{constructor(_0x4f8b9b,_0x269f90,_0x36c510){const _0xd6b566=a0_0x20331d;this[_0xd6b566(0x461)]=_0x4f8b9b,this[_0xd6b566(0x8f2)]=_0x269f90,this[_0xd6b566(0x8b9)]=_0x36c510;}},Ze=class{},et=class{},Oe=class{},tt=class{},st=class{},ve=class{},at=class{},it=class{},ot=class{},rt=class{},kt=I(require(a0_0x20331d(0x8ae))),Ia=require('fs'),Ta=require(a0_0x20331d(0x4b7));async function _e(_0x241c67){const _0x40d82f=a0_0x20331d;let _0x145380=z['waInstances'][_0x241c67];if(U[_0x40d82f(0x56c)]){let _0x1b2e11=R[_0x40d82f(0x4ce)]()['db'](U[_0x40d82f(0x8e5)][_0x40d82f(0x667)]+_0x40d82f(0x26f))[_0x40d82f(0x2cd)](_0x241c67);return _0x145380||(await _0x1b2e11[_0x40d82f(0x691)]({})[_0x40d82f(0x2a9)]())[_0x40d82f(0x786)]>0x0;}return _0x145380||(0x0,Ia[_0x40d82f(0x5f0)])((0x0,Ta[_0x40d82f(0x6ca)])(Me,_0x241c67));}async function Oa(_0x31869a,_0x20e489,_0x8686a5){const _0x29a346=a0_0x20331d;if(_0x31869a['originalUrl'][_0x29a346(0x8eb)](_0x29a346(0x795))||_0x31869a[_0x29a346(0x6fe)][_0x29a346(0x8eb)](_0x29a346(0x4f2))||_0x31869a['originalUrl'][_0x29a346(0x8eb)](_0x29a346(0x277))||_0x31869a[_0x29a346(0x6fe)][_0x29a346(0x8eb)](_0x29a346(0x6f7))||_0x31869a[_0x29a346(0x6fe)][_0x29a346(0x8eb)](_0x29a346(0x439))||_0x31869a[_0x29a346(0x6fe)][_0x29a346(0x8eb)](_0x29a346(0x849))||_0x31869a[_0x29a346(0x6fe)][_0x29a346(0x8eb)](_0x29a346(0x2fb)))return _0x8686a5();let _0x5a579b=_0x31869a['params'];if(!_0x5a579b?.[_0x29a346(0x8ba)])throw new m(_0x29a346(0x862));if(!await _e(_0x5a579b['instanceName']))throw new J(_0x29a346(0x5de)+_0x5a579b['instanceName']+'\x20instance\x20does\x20not\x20exist');_0x8686a5();}async function _a(_0x416330,_0x528081,_0x403948){const _0x4cbee2=a0_0x20331d;if(_0x416330[_0x4cbee2(0x6fe)][_0x4cbee2(0x8eb)]('/instance/create')){let _0x123857=_0x416330['body'];if(await _e(_0x123857[_0x4cbee2(0x8ba)]))throw new se(_0x4cbee2(0x7df)+_0x123857[_0x4cbee2(0x8ba)]+'\x20is\x20already\x20in\x20use.');z['waInstances'][_0x123857['instanceName']]&&delete z['waInstances'][_0x123857['instanceName']];}_0x403948();}var xa=require('class-validator'),Da=I(require('jsonwebtoken')),nt='uazapi',Io=new $(a0_0x20331d(0x699));async function To(_0x4a9520,_0x98a8ce,_0x2b5825){const _0x330f1e=a0_0x20331d;let _0x11f9a0=_0x4a9520[_0x330f1e(0x51d)]('apikey');if(_0x11f9a0&&b[_0x330f1e(0x51d)](_0x330f1e(0x63d))[_0x330f1e(0x921)][_0x330f1e(0x887)]!==_0x11f9a0)throw new ce();if(b[_0x330f1e(0x51d)](_0x330f1e(0x63d))[_0x330f1e(0x921)][_0x330f1e(0x887)]===_0x11f9a0)return _0x2b5825();if((_0x4a9520[_0x330f1e(0x6fe)][_0x330f1e(0x8eb)](_0x330f1e(0x795))||_0x4a9520[_0x330f1e(0x6fe)]['includes']('/instance/fetchInstances'))&&!_0x11f9a0)throw new se(_0x330f1e(0x392),_0x330f1e(0x8ce));let _0x5a38dc=b['get'](_0x330f1e(0x63d))[_0x330f1e(0x478)];try{let [_0x4457e4,_0x2b33f1]=_0x4a9520['get']('authorization')['split']('\x20');if(_0x4457e4['toLowerCase']()!==_0x330f1e(0x3bd))throw new ce();if(!(0x0,xa['isJWT'])(_0x2b33f1))throw new ce();let _0x4cc728=_0x4a9520[_0x330f1e(0x589)],_0x233da3=Da[_0x330f1e(0x42b)]['verify'](_0x2b33f1,_0x5a38dc[_0x330f1e(0x35c)],{'ignoreExpiration':_0x5a38dc[_0x330f1e(0x7cc)]===0x0});if(_0x4cc728[_0x330f1e(0x8ba)]!==_0x233da3[_0x330f1e(0x8ba)]||nt!==_0x233da3[_0x330f1e(0x5b2)])throw new ce();return _0x2b5825();}catch(_0x105454){throw Io[_0x330f1e(0x2c2)](_0x105454),new ce();}}async function Oo(_0x3ebb2d,_0x3bb79a,_0x427600){const _0x46cc2f=a0_0x20331d;let _0x4a3124=b[_0x46cc2f(0x51d)](_0x46cc2f(0x63d))[_0x46cc2f(0x921)],_0x204e1d=_0x3ebb2d['get'](_0x46cc2f(0x450));if(_0x4a3124[_0x46cc2f(0x887)]===_0x204e1d)return _0x427600();if(_0x3ebb2d[_0x46cc2f(0x6fe)][_0x46cc2f(0x8eb)](_0x46cc2f(0x795))){let _0x14d3a1=ka,_0x3825d1=_0x3ebb2d[_0x46cc2f(0x3b2)][_0x46cc2f(0x8ba)];if(_0x14d3a1&&_0x3825d1[_0x46cc2f(0x6a5)]()[_0x46cc2f(0x359)](_0x14d3a1[_0x46cc2f(0x6a5)]()))return _0x427600();if(!_0x204e1d)throw new se(_0x46cc2f(0x392),_0x46cc2f(0x8ce));}if(_0x3ebb2d[_0x46cc2f(0x6fe)][_0x46cc2f(0x8eb)]('/instance/fetchInstances')&&!_0x204e1d)throw new se(_0x46cc2f(0x392),'The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x3ebb2d[_0x46cc2f(0x6fe)][_0x46cc2f(0x8eb)](_0x46cc2f(0x277))&&!_0x204e1d)throw new se(_0x46cc2f(0x392),_0x46cc2f(0x8ce));if(_0x3ebb2d[_0x46cc2f(0x6fe)][_0x46cc2f(0x8eb)](_0x46cc2f(0x6f7))&&!_0x204e1d)throw new se('Missing\x20global\x20api\x20key',_0x46cc2f(0x8ce));try{let _0x443f0b=_0x3ebb2d[_0x46cc2f(0x589)],_0x4fcc95=await we[_0x46cc2f(0x4e2)][_0x46cc2f(0x691)](_0x443f0b[_0x46cc2f(0x8ba)]);if(_0x4fcc95&&_0x4fcc95[_0x46cc2f(0x450)]===_0x204e1d)return _0x427600();}catch{}throw new ce();}var Pa={'jwt':To,'apikey':Oo},fi=require(a0_0x20331d(0x8ae)),E=require('uuid'),C=(..._0x13d17e)=>{const _0x40b25a=a0_0x20331d;let _0x49c37d={};return _0x13d17e[_0x40b25a(0x22b)](_0x28307e=>_0x49c37d[_0x28307e]={'minLength':0x1,'description':_0x40b25a(0x68e)+_0x28307e+_0x40b25a(0x764)}),{'if':{'propertyNames':{'enum':[..._0x13d17e]}},'then':{'properties':_0x49c37d}};},v={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'instanceName':{'type':a0_0x20331d(0x6f2)}},...C(a0_0x20331d(0x8ba))},fc={'$id':(0x0,E['v4'])(),'type':'object','properties':{'oldToken':{'type':a0_0x20331d(0x6f2)}},'required':['oldToken'],...C(a0_0x20331d(0x40e))},wc={'properties':{'key':{'type':a0_0x20331d(0x4bd),'properties':{'id':{'type':a0_0x20331d(0x6f2)},'remoteJid':{'type':a0_0x20331d(0x6f2)},'fromMe':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]}},'required':['id',a0_0x20331d(0x3eb),a0_0x20331d(0x288)],...C('id','remoteJid')},'message':{'type':a0_0x20331d(0x4bd)}}},ae={'properties':{'delay':{'type':'integer','description':a0_0x20331d(0x40a)},'presence':{'type':'string','enum':[a0_0x20331d(0x505),'available',a0_0x20331d(0x384),'recording',a0_0x20331d(0x50b)]}}},Z={'type':a0_0x20331d(0x6f2),'description':a0_0x20331d(0x793)},La={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'number':{...Z},'options':{...ae},'textMessage':{'type':a0_0x20331d(0x4bd),'properties':{'text':{'type':a0_0x20331d(0x6f2)}},'required':[a0_0x20331d(0x4e1)],...C(a0_0x20331d(0x4e1))}},'required':[a0_0x20331d(0x807),a0_0x20331d(0x6f9)]},Fa={'type':a0_0x20331d(0x6f2),'pattern':'^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','description':a0_0x20331d(0x793)},yc={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'number':{...Fa},'options':{...ae},'textMessage':{'type':a0_0x20331d(0x4bd),'properties':{'text':{'type':a0_0x20331d(0x6f2)}},'required':[a0_0x20331d(0x4e1)],...C('text')}},'required':[a0_0x20331d(0x807),a0_0x20331d(0x6f9)]},bc={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'number':{...Fa},'options':{...ae},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x20331d(0x6f2),'enum':[a0_0x20331d(0x801),a0_0x20331d(0x8e2),a0_0x20331d(0x775),a0_0x20331d(0x481)]},'media':{'type':a0_0x20331d(0x6f2)},'fileName':{'type':'string'},'caption':{'type':a0_0x20331d(0x6f2)}},'required':[a0_0x20331d(0x57f),a0_0x20331d(0x4ad)],...C('fileName',a0_0x20331d(0x312),a0_0x20331d(0x4ad))}},'required':[a0_0x20331d(0x682),a0_0x20331d(0x6f9)]},Ua={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'number':{...Z},'options':{...ae},'stickerMessage':{'type':a0_0x20331d(0x4bd),'properties':{'image':{'type':a0_0x20331d(0x6f2)}},'required':[a0_0x20331d(0x801)],...C(a0_0x20331d(0x801))}},'required':['stickerMessage',a0_0x20331d(0x6f9)]},ja={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'statusMessage':{'type':a0_0x20331d(0x4bd),'properties':{'type':{'type':a0_0x20331d(0x6f2),'enum':['text',a0_0x20331d(0x801),a0_0x20331d(0x481),a0_0x20331d(0x775)]},'content':{'type':a0_0x20331d(0x6f2)},'caption':{'type':'string'},'backgroundColor':{'type':'string'},'font':{'type':a0_0x20331d(0x837),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x20331d(0x264),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x20331d(0x6f2),'pattern':'^\x5cd+','description':'\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}},'allContacts':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]}},'required':[a0_0x20331d(0x32e),a0_0x20331d(0x77d)],...C(a0_0x20331d(0x32e),a0_0x20331d(0x77d))}},'required':[a0_0x20331d(0x45e)]},Ja={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'number':{...Z},'options':{...ae},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x20331d(0x6f2),'enum':[a0_0x20331d(0x801),'document','video',a0_0x20331d(0x481)]},'media':{'type':'string'},'fileName':{'type':a0_0x20331d(0x6f2)},'caption':{'type':a0_0x20331d(0x6f2)}},'required':[a0_0x20331d(0x57f),a0_0x20331d(0x4ad)],...C(a0_0x20331d(0x7ad),a0_0x20331d(0x312),'media')}},'required':[a0_0x20331d(0x682),a0_0x20331d(0x6f9)]},qa={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'number':{...Z},'options':{...ae},'audioMessage':{'type':a0_0x20331d(0x4bd),'properties':{'audio':{'type':a0_0x20331d(0x6f2)}},'required':[a0_0x20331d(0x481)],...C(a0_0x20331d(0x481))}},'required':[a0_0x20331d(0x8c4),'number']},Va={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'number':{...Z},'pollMessage':{'type':a0_0x20331d(0x4bd),'properties':{'name':{'type':a0_0x20331d(0x6f2)},'selectableCount':{'type':a0_0x20331d(0x6f9)},'values':{'type':a0_0x20331d(0x264),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x20331d(0x8b9),a0_0x20331d(0x77a),a0_0x20331d(0x610)],...C(a0_0x20331d(0x8b9),a0_0x20331d(0x77a),a0_0x20331d(0x610))}},'required':[a0_0x20331d(0x6f9),'pollMessage']},Ga={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'menuMessage':{'type':a0_0x20331d(0x4bd),'properties':{'text':{'type':a0_0x20331d(0x6f2)},'choices':{'type':a0_0x20331d(0x264),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x20331d(0x4e1),a0_0x20331d(0x871)],...C(a0_0x20331d(0x4e1),a0_0x20331d(0x871))}},'required':[a0_0x20331d(0x6f9),a0_0x20331d(0x817)]},Ba={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'number':{...Z},'options':{...ae},'buttonMessage':{'type':'object','properties':{'title':{'type':a0_0x20331d(0x6f2)},'description':{'type':a0_0x20331d(0x6f2)},'footerText':{'type':'string'},'buttons':{'type':a0_0x20331d(0x264),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x20331d(0x4bd),'properties':{'buttonText':{'type':a0_0x20331d(0x6f2)},'buttonId':{'type':a0_0x20331d(0x6f2)}},'required':[a0_0x20331d(0x357),a0_0x20331d(0x609)],...C(a0_0x20331d(0x357),a0_0x20331d(0x609))}},'mediaMessage':{'type':a0_0x20331d(0x4bd),'properties':{'media':{'type':a0_0x20331d(0x6f2)},'fileName':{'type':'string'},'mediatype':{'type':a0_0x20331d(0x6f2),'enum':[a0_0x20331d(0x801),a0_0x20331d(0x8e2),a0_0x20331d(0x775)]}},'required':[a0_0x20331d(0x4ad),a0_0x20331d(0x57f)],...C(a0_0x20331d(0x4ad),'fileName')}},'required':[a0_0x20331d(0x416),a0_0x20331d(0x747)],...C(a0_0x20331d(0x416),a0_0x20331d(0x464))}},'required':['number',a0_0x20331d(0x4ba)]},Wa={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'number':{...Z},'options':{...ae},'locationMessage':{'type':'object','properties':{'latitude':{'type':'number'},'longitude':{'type':a0_0x20331d(0x6f9)},'name':{'type':'string'},'address':{'type':a0_0x20331d(0x6f2)}},'required':[a0_0x20331d(0x213),a0_0x20331d(0x915)],...C(a0_0x20331d(0x8b9),a0_0x20331d(0x400))}},'required':[a0_0x20331d(0x6f9),'locationMessage']},za={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'number':{...Z},'options':{...ae},'listMessage':{'type':'object','properties':{'title':{'type':a0_0x20331d(0x6f2)},'description':{'type':a0_0x20331d(0x6f2)},'footerText':{'type':a0_0x20331d(0x6f2)},'buttonText':{'type':a0_0x20331d(0x6f2)},'sections':{'type':a0_0x20331d(0x264),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x20331d(0x4bd),'properties':{'title':{'type':a0_0x20331d(0x6f2)},'rows':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x20331d(0x4bd),'properties':{'title':{'type':a0_0x20331d(0x6f2)},'description':{'type':a0_0x20331d(0x6f2)},'rowId':{'type':a0_0x20331d(0x6f2)}},'required':['title',a0_0x20331d(0x4f4)],...C('title',a0_0x20331d(0x4f4))}}},'required':['title','rows'],...C(a0_0x20331d(0x416))}}},'required':[a0_0x20331d(0x416),'description','buttonText',a0_0x20331d(0x874)],...C('title','description','buttonText',a0_0x20331d(0x504))}},'required':[a0_0x20331d(0x6f9),a0_0x20331d(0x57c)]},Ha={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'contactMessage':{'type':a0_0x20331d(0x264),'items':{'type':a0_0x20331d(0x4bd),'properties':{'fullName':{'type':a0_0x20331d(0x6f2)},'phoneNumber':{'type':a0_0x20331d(0x6f2),'minLength':0xa}},'required':[a0_0x20331d(0x3ec),a0_0x20331d(0x623)],...C(a0_0x20331d(0x3ec))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x20331d(0x6f9),a0_0x20331d(0x821)]},Ka={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'reactionMessage':{'type':a0_0x20331d(0x4bd),'properties':{'key':{'type':a0_0x20331d(0x4bd),'properties':{'id':{'type':a0_0x20331d(0x6f2)},'remoteJid':{'type':a0_0x20331d(0x6f2)},'fromMe':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]}},'required':['id',a0_0x20331d(0x3eb),'fromMe'],...C('id','remoteJid')},'reaction':{'type':a0_0x20331d(0x6f2)}},'required':['key',a0_0x20331d(0x8bc)],...C(a0_0x20331d(0x8bc))}},'required':[a0_0x20331d(0x813)]},Qa={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'numbers':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x20331d(0x6f2),'pattern':a0_0x20331d(0x526),'description':a0_0x20331d(0x1f4)}}}},Ya={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'readMessages':{'type':a0_0x20331d(0x264),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x20331d(0x6f2)},'fromMe':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x20331d(0x6f2)}},'required':['id',a0_0x20331d(0x288),a0_0x20331d(0x3eb)],...C('id',a0_0x20331d(0x3eb))}}},'required':[a0_0x20331d(0x5b5)]},Xa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'privacySettings':{'type':a0_0x20331d(0x4bd),'properties':{'readreceipts':{'type':a0_0x20331d(0x6f2),'enum':[a0_0x20331d(0x2ea),'none']},'profile':{'type':a0_0x20331d(0x6f2),'enum':['all',a0_0x20331d(0x1ff),a0_0x20331d(0x84a),a0_0x20331d(0x8c0)]},'status':{'type':a0_0x20331d(0x6f2),'enum':[a0_0x20331d(0x2ea),'contacts',a0_0x20331d(0x84a),a0_0x20331d(0x8c0)]},'online':{'type':a0_0x20331d(0x6f2),'enum':[a0_0x20331d(0x2ea),a0_0x20331d(0x805)]},'last':{'type':a0_0x20331d(0x6f2),'enum':[a0_0x20331d(0x2ea),a0_0x20331d(0x1ff),'contact_blacklist',a0_0x20331d(0x8c0)]},'groupadd':{'type':'string','enum':[a0_0x20331d(0x2ea),a0_0x20331d(0x1ff),'contact_blacklist',a0_0x20331d(0x8c0)]}},'required':[a0_0x20331d(0x6d1),a0_0x20331d(0x4f6),a0_0x20331d(0x8aa),a0_0x20331d(0x73f),a0_0x20331d(0x7f8),'groupadd'],...C(a0_0x20331d(0x6d1),'profile','status',a0_0x20331d(0x73f),a0_0x20331d(0x7f8),'groupadd')}},'required':[a0_0x20331d(0x53b)]},Za={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'lastMessage':{'type':a0_0x20331d(0x4bd),'properties':{'key':{'type':a0_0x20331d(0x4bd),'properties':{'id':{'type':a0_0x20331d(0x6f2)},'remoteJid':{'type':'string'},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id','fromMe','remoteJid'],...C('id',a0_0x20331d(0x3eb))},'messageTimestamp':{'type':a0_0x20331d(0x837),'minLength':0x1}},'required':['key'],...C(a0_0x20331d(0x627))},'archive':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]}},'required':[a0_0x20331d(0x25d),a0_0x20331d(0x666)]},ei={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'id':{'type':a0_0x20331d(0x6f2)},'fromMe':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x20331d(0x6f2)},'participant':{'type':a0_0x20331d(0x6f2)}},'required':['id','fromMe',a0_0x20331d(0x3eb)],...C('id',a0_0x20331d(0x3eb),a0_0x20331d(0x292))},ti={'$id':(0x0,E['v4'])(),'type':'object','properties':{'where':{'type':a0_0x20331d(0x4bd),'properties':{'_id':{'type':a0_0x20331d(0x6f2),'minLength':0x1},'pushName':{'type':'string','minLength':0x1},'id':{'type':a0_0x20331d(0x6f2),'minLength':0x1}},...C('_id','id','pushName')}}},si={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'name':{'type':'string'}},...C(a0_0x20331d(0x8b9))},ai={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'status':{'type':a0_0x20331d(0x6f2)}},...C(a0_0x20331d(0x8aa))},xe={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'number':{'type':'string'},'picture':{'type':'string'}}},ii={'type':'object','properties':{'wuid':{'type':a0_0x20331d(0x6f2)},'name':{'type':'string'},'picture':{'type':a0_0x20331d(0x6f2)},'status':{'type':a0_0x20331d(0x6f2)},'isBusiness':{'type':a0_0x20331d(0x1e6)}}},oi={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x20331d(0x6f2),'minLength':0x1},'key':{'type':a0_0x20331d(0x4bd),'if':{'propertyNames':{'enum':['fromMe',a0_0x20331d(0x3eb),'id']}},'then':{'properties':{'remoteJid':{'type':'string','minLength':0x1,'description':a0_0x20331d(0x2de)},'id':{'type':a0_0x20331d(0x6f2),'minLength':0x1,'description':a0_0x20331d(0x2de)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x20331d(0x4bd)}},...C(a0_0x20331d(0x53e))},'limit':{'type':a0_0x20331d(0x837)}}},Sc={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'where':{'type':a0_0x20331d(0x4bd),'properties':{'_id':{'type':a0_0x20331d(0x6f2)},'remoteJid':{'type':a0_0x20331d(0x6f2)},'id':{'type':a0_0x20331d(0x6f2)},'fromMe':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x20331d(0x6f2)},'status':{'type':a0_0x20331d(0x6f2),'enum':['ERROR',a0_0x20331d(0x490),'SERVER_ACK',a0_0x20331d(0x245),a0_0x20331d(0x72b),a0_0x20331d(0x5d2)]}},...C(a0_0x20331d(0x53e),'remoteJid','id',a0_0x20331d(0x8aa))},'limit':{'type':a0_0x20331d(0x837)}}},ri={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'presence':{'type':'string','enum':['unavailable',a0_0x20331d(0x624),a0_0x20331d(0x384),a0_0x20331d(0x803),a0_0x20331d(0x50b)]}},'required':[a0_0x20331d(0x347),a0_0x20331d(0x6f9)]},ni={'$id':(0x0,E['v4'])(),'type':'object','properties':{'subject':{'type':a0_0x20331d(0x6f2)},'description':{'type':a0_0x20331d(0x6f2)},'profilePicture':{'type':a0_0x20331d(0x6f2)},'participants':{'type':a0_0x20331d(0x264),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x20331d(0x6f2),'minLength':0xa,'pattern':a0_0x20331d(0x52f),'description':a0_0x20331d(0x2f7)}}},'required':[a0_0x20331d(0x605),'participants'],...C(a0_0x20331d(0x605),a0_0x20331d(0x464),'profilePicture')},De={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'groupJid':{'type':a0_0x20331d(0x6f2),'pattern':a0_0x20331d(0x411)}},'required':[a0_0x20331d(0x545)],...C('groupJid')},ci={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'groupJid':{'type':a0_0x20331d(0x6f2)},'action':{'type':a0_0x20331d(0x6f2),'enum':[a0_0x20331d(0x783),a0_0x20331d(0x47e),a0_0x20331d(0x5a4),'demote',a0_0x20331d(0x4de),a0_0x20331d(0x2bd)]},'participants':{'type':a0_0x20331d(0x264),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x20331d(0x6f2),'minLength':0xa,'pattern':'\x5cd+','description':a0_0x20331d(0x2f7)}}},'required':[a0_0x20331d(0x545),a0_0x20331d(0x2db),a0_0x20331d(0x38f)],...C(a0_0x20331d(0x545),a0_0x20331d(0x2db))},li={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'groupJid':{'type':a0_0x20331d(0x6f2)},'expiration':{'type':'number','enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x20331d(0x545),'expiration'],...C('groupJid',a0_0x20331d(0x5d4))},ui={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'groupJid':{'type':a0_0x20331d(0x6f2)},'image':{'type':a0_0x20331d(0x6f2)}},'required':['groupJid',a0_0x20331d(0x801)],...C(a0_0x20331d(0x545),a0_0x20331d(0x801))},di={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'groupJid':{'type':'string'},'description':{'type':a0_0x20331d(0x6f2)}},'required':[a0_0x20331d(0x545),'description'],...C(a0_0x20331d(0x545),a0_0x20331d(0x464))},pi={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'groupJid':{'type':a0_0x20331d(0x6f2)},'name':{'type':a0_0x20331d(0x6f2)}},'required':[a0_0x20331d(0x545),a0_0x20331d(0x8b9)],...C('groupJid',a0_0x20331d(0x8b9))},hi={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'groupJid':{'type':'string'},'setting':{'type':'string','enum':[a0_0x20331d(0x6e9),a0_0x20331d(0x41d),'unlocked',a0_0x20331d(0x8f0)]}},'required':[a0_0x20331d(0x545),'setting'],...C('groupJid',a0_0x20331d(0x2af))},gi={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x20331d(0x6f2)},'restrict':{'type':a0_0x20331d(0x1e6)},'announce':{'type':a0_0x20331d(0x1e6)},'memberAddMode':{'type':a0_0x20331d(0x1e6)},'joinApprovalMode':{'type':a0_0x20331d(0x1e6)},'expiration':{'type':'integer','enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x20331d(0x6f2)},'description':{'type':a0_0x20331d(0x6f2)},'image':{'type':'string'}}},$s={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'inviteCode':{'type':a0_0x20331d(0x6f2)}},'required':[a0_0x20331d(0x1e3)],...C(a0_0x20331d(0x1e3))},mi={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'url':{'type':a0_0x20331d(0x6f2)},'enabled':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]}},'required':[a0_0x20331d(0x562),a0_0x20331d(0x349)]},Mc={'$id':(0x0,E['v4'])(),'type':a0_0x20331d(0x4bd),'properties':{'local_map':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':'boolean','enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x20331d(0x1e6),'enum':[!0x0,!0x1]}},'required':[a0_0x20331d(0x53c),a0_0x20331d(0x7cd),a0_0x20331d(0x3ab),a0_0x20331d(0x389),a0_0x20331d(0x899),a0_0x20331d(0x204),a0_0x20331d(0x5dc),a0_0x20331d(0x475),a0_0x20331d(0x306),'CONTACTS_UPDATE','PRESENCE_UPDATE','CHATS_SET',a0_0x20331d(0x66c),a0_0x20331d(0x217),a0_0x20331d(0x543),a0_0x20331d(0x78c),a0_0x20331d(0x64c),a0_0x20331d(0x855),a0_0x20331d(0x37d)],...C('local_map',a0_0x20331d(0x7cd),a0_0x20331d(0x3ab),a0_0x20331d(0x389),a0_0x20331d(0x899),a0_0x20331d(0x204),a0_0x20331d(0x5dc),'CONTACTS_SET',a0_0x20331d(0x306),a0_0x20331d(0x910),'PRESENCE_UPDATE',a0_0x20331d(0x3f6),a0_0x20331d(0x66c),a0_0x20331d(0x217),a0_0x20331d(0x543),a0_0x20331d(0x78c),a0_0x20331d(0x64c),a0_0x20331d(0x855),a0_0x20331d(0x37d))},ct=class{},lt=class extends _{[a0_0x20331d(0x2ae)](_0x4fafea){return ra(_0x4fafea);}async['insert'](_0x4a36cd){const _0x43fc3b=a0_0x20331d;if(_0x4a36cd[_0x43fc3b(0x786)]!==0x0)try{return{'insertCount':(await this[_0x43fc3b(0x2ae)](_0x4a36cd[0x0][_0x43fc3b(0x63b)])['insertMany']([..._0x4a36cd]))[_0x43fc3b(0x786)]};}catch(_0x20cac8){return _0x20cac8;}}async['delete'](_0x8f75b5,_0x2b87df){const _0x349c13=a0_0x20331d;try{return{'deletedCount':(await this['getContactModelForOwner'](_0x2b87df)['deleteMany']({..._0x8f75b5[_0x349c13(0x656)]}))[_0x349c13(0x557)]};}catch(_0xc09c7){return{'error':_0xc09c7?.['toString']()};}}async[a0_0x20331d(0x3fd)](_0x4b372d,_0x4d7ee5){const _0x4a57e9=a0_0x20331d;try{if(_0x4b372d[_0x4a57e9(0x786)]===0x0)return;let _0x76e5c4=this[_0x4a57e9(0x2ae)](_0x4d7ee5),_0x1489bc=_0x4b372d[_0x4a57e9(0x41b)](_0x576710=>({'updateOne':{'filter':{'_id':_0x576710[_0x4a57e9(0x53e)],'owner':_0x4d7ee5},'update':{..._0x576710}}})),{modifiedCount:_0x57dcd6}=await _0x76e5c4[_0x4a57e9(0x641)](_0x1489bc);return{'insertCount':_0x57dcd6};}catch{return;}}async['find'](_0x20995d,_0xb7694b){const _0x23f25f=a0_0x20331d;try{let _0x502912=this['getContactModelForOwner'](_0xb7694b),_0x1c4d6c=A(_0x20995d[_0x23f25f(0x656)]);return await _0x502912[_0x23f25f(0x691)](_0x1c4d6c)[_0x23f25f(0x7ce)](_0x20995d?.[_0x23f25f(0x7ce)]??0x0)[_0x23f25f(0x4cf)]();}catch{return[];}}async[a0_0x20331d(0x63f)](_0x5cf9de,_0x5bca9a){const _0xb7d965=a0_0x20331d;try{let _0x2bea0d=this[_0xb7d965(0x2ae)](_0x5bca9a),_0x6f09d0=A(_0x5cf9de[_0xb7d965(0x656)]);return await _0x2bea0d['findOne'](_0x6f09d0)[_0xb7d965(0x4cf)]();}catch{return null;}}async['deleteAll'](_0xd63c76){const _0x40c418=a0_0x20331d;try{return await this[_0x40c418(0x2ae)](_0xd63c76)[_0x40c418(0x2cd)][_0x40c418(0x789)](),{'success':!0x0};}catch(_0x39a586){return console[_0x40c418(0x2c2)](_0x39a586),{'success':!0x1,'error':_0x39a586};}}},ut=require('jsonschema'),Tc=require(a0_0x20331d(0x3d8)),Rs=new $(a0_0x20331d(0x577)),G=class{[a0_0x20331d(0x24d)](_0x1f45ff,_0x491721=!0x0){const _0x4f4c0b=a0_0x20331d;let _0x2c3ec2='/'+_0x1f45ff;return _0x491721&&(_0x2c3ec2+=_0x4f4c0b(0x390)),_0x2c3ec2;}async[a0_0x20331d(0x65b)](_0x2c92ce){const _0x35bfec=a0_0x20331d;let {request:_0x1e3350,schema:_0x4f7459,ClassRef:_0x1566a6,execute:_0x46f59f}=_0x2c92ce,_0x73be31=new _0x1566a6(),_0x575306=_0x1e3350[_0x35bfec(0x3b2)],_0x2b9ac4=_0x1e3350[_0x35bfec(0x589)];_0x1e3350?.['query']&&Object[_0x35bfec(0x4db)](_0x1e3350[_0x35bfec(0x552)])[_0x35bfec(0x786)]>0x0&&Object['assign'](_0x2b9ac4,_0x1e3350[_0x35bfec(0x552)]),_0x1e3350['originalUrl'][_0x35bfec(0x8eb)](_0x35bfec(0x795))&&Object[_0x35bfec(0x2df)](_0x2b9ac4,_0x575306),Object[_0x35bfec(0x2df)](_0x73be31,_0x575306);let _0x46b92e=_0x4f7459?(0x0,ut['validate'])(_0x73be31,_0x4f7459):{'valid':!0x0,'errors':[]};if(!_0x46b92e[_0x35bfec(0x8e4)]){let _0x4b1518=_0x46b92e[_0x35bfec(0x289)]['map'](({property:_0x3292a1,stack:_0x892515,schema:_0x4dbbfa})=>{const _0x59b1ce=_0x35bfec;let _0x126d44;return _0x4dbbfa[_0x59b1ce(0x464)]?_0x126d44=_0x4dbbfa[_0x59b1ce(0x464)]:_0x126d44=_0x892515[_0x59b1ce(0x759)](_0x59b1ce(0x2bf),''),{'property':_0x3292a1[_0x59b1ce(0x759)](_0x59b1ce(0x2bf),''),'message':_0x126d44};});throw Rs[_0x35bfec(0x2c2)]([..._0x4b1518]),new m(..._0x4b1518);}return await _0x46f59f(_0x2b9ac4,_0x73be31);}async[a0_0x20331d(0x1ef)](_0x49a983){const _0x49f4b8=a0_0x20331d;let {request:_0x72edaf,ClassRef:_0x56a42e,schema:_0x1c0abe,execute:_0x1d31e1}=_0x49a983,_0x27ee48=_0x72edaf[_0x49f4b8(0x552)];if(!_0x27ee48?.[_0x49f4b8(0x545)])throw new m(_0x49f4b8(0x52b),_0x49f4b8(0x85f));let _0x233216=_0x72edaf['params'],_0x21a96a=_0x72edaf[_0x49f4b8(0x3b2)],_0x17c7e6=new _0x56a42e();Object[_0x49f4b8(0x2df)](_0x21a96a,_0x27ee48),Object[_0x49f4b8(0x2df)](_0x17c7e6,_0x21a96a);let _0x448ebd=(0x0,ut[_0x49f4b8(0x37b)])(_0x17c7e6,_0x1c0abe);if(!_0x448ebd[_0x49f4b8(0x8e4)]){let _0x3a7cc8=_0x448ebd[_0x49f4b8(0x289)][_0x49f4b8(0x41b)](({property:_0x196fc8,stack:_0x4d8fcb,schema:_0x2afb9f})=>{const _0x1af122=_0x49f4b8;let _0xa9ab56;return _0x2afb9f[_0x1af122(0x464)]?_0xa9ab56=_0x2afb9f[_0x1af122(0x464)]:_0xa9ab56=_0x4d8fcb[_0x1af122(0x759)](_0x1af122(0x2bf),''),{'property':_0x196fc8['replace'](_0x1af122(0x2bf),''),'message':_0xa9ab56};});throw Rs['error']([..._0x3a7cc8]),new m(..._0x3a7cc8);}return await _0x1d31e1(_0x233216,_0x17c7e6);}async[a0_0x20331d(0x427)](_0x36dbe0){const _0x279ad6=a0_0x20331d;let {request:_0x37ef1f,ClassRef:_0x550380,schema:_0x5e6678,execute:_0x876fad}=_0x36dbe0,_0x575143=_0x37ef1f['body'];if(!_0x575143?.[_0x279ad6(0x1e3)])throw new m(_0x279ad6(0x888),_0x279ad6(0x287));let _0x1d6ad7=_0x37ef1f[_0x279ad6(0x589)],_0x46a44f=_0x37ef1f['body'],_0x3ff0a9=new _0x550380();Object['assign'](_0x46a44f,_0x575143),Object[_0x279ad6(0x2df)](_0x3ff0a9,_0x46a44f);let _0x187c5a=(0x0,ut['validate'])(_0x3ff0a9,_0x5e6678);if(!_0x187c5a[_0x279ad6(0x8e4)]){let _0x53ef53=_0x187c5a['errors'][_0x279ad6(0x41b)](({property:_0x55425b,stack:_0x535710,schema:_0x1e75f8})=>{const _0x975b=_0x279ad6;let _0x1a48a4;return _0x1e75f8[_0x975b(0x464)]?_0x1a48a4=_0x1e75f8[_0x975b(0x464)]:_0x1a48a4=_0x535710[_0x975b(0x759)](_0x975b(0x2bf),''),{'property':_0x55425b[_0x975b(0x759)]('instance.',''),'message':_0x1a48a4};});throw Rs[_0x279ad6(0x2c2)]([..._0x53ef53]),new m(..._0x53ef53);}return await _0x876fad(_0x1d6ad7,_0x3ff0a9);}},M=class{},Bc=new $(a0_0x20331d(0x7ea)),dt=class extends G{constructor(..._0x57284a){const _0x4f386e=a0_0x20331d;super(),this[_0x4f386e(0x49f)]=(0x0,fi['Router'])(),this[_0x4f386e(0x49f)][_0x4f386e(0x21c)](this[_0x4f386e(0x24d)](_0x4f386e(0x661)),..._0x57284a,async(_0x228b33,_0xa5bf9b)=>{const _0x5ce1b8=_0x4f386e;let _0x1f39cf=await this[_0x5ce1b8(0x65b)]({'request':_0x228b33,'schema':ri,'ClassRef':Ze,'execute':(_0xa59f49,_0xf69c7)=>k[_0x5ce1b8(0x661)](_0xa59f49,_0xf69c7)});return _0xa5bf9b[_0x5ce1b8(0x8aa)](0xc9)[_0x5ce1b8(0x66a)](_0x1f39cf);})['post'](this[_0x4f386e(0x24d)](_0x4f386e(0x2cb)),..._0x57284a,async(_0x217de5,_0x405c74)=>{const _0x409cce=_0x4f386e;let _0x278bdc=await this['dataValidate']({'request':_0x217de5,'schema':Qa,'ClassRef':et,'execute':(_0x5a250f,_0x1fc33d)=>k[_0x409cce(0x78a)](_0x5a250f,_0x1fc33d)});return _0x405c74[_0x409cce(0x8aa)](0xc9)[_0x409cce(0x66a)](_0x278bdc);})['post'](this[_0x4f386e(0x24d)]('editChat'),..._0x57284a,async(_0x4cfef0,_0x56c2d0)=>{const _0x2c77ba=_0x4f386e;let _0x4b3f49=await this[_0x2c77ba(0x65b)]({'request':_0x4cfef0,'schema':v,'ClassRef':M,'execute':(_0x3093a3,_0x1677fa)=>k[_0x2c77ba(0x71f)](_0x3093a3,_0x1677fa)});return _0x56c2d0[_0x2c77ba(0x8aa)](0xc9)[_0x2c77ba(0x66a)](_0x4b3f49);})[_0x4f386e(0x296)](this['routerPath'](_0x4f386e(0x7e7)),..._0x57284a,async(_0x345444,_0x29554f)=>{const _0x360887=_0x4f386e;let _0x1387a8=await this[_0x360887(0x65b)]({'request':_0x345444,'schema':Ya,'ClassRef':at,'execute':(_0x3a5ab0,_0x5e9df5)=>k[_0x360887(0x1f5)](_0x3a5ab0,_0x5e9df5)});return _0x29554f[_0x360887(0x8aa)](0xc9)[_0x360887(0x66a)](_0x1387a8);})[_0x4f386e(0x296)](this[_0x4f386e(0x24d)](_0x4f386e(0x467)),..._0x57284a,async(_0xb5b280,_0x2eb6e3)=>{const _0x4a0da8=_0x4f386e;let _0xec4c24=await this[_0x4a0da8(0x65b)]({'request':_0xb5b280,'schema':Za,'ClassRef':it,'execute':(_0x13d168,_0x5c838b)=>k['archiveChat'](_0x13d168,_0x5c838b)});return _0x2eb6e3[_0x4a0da8(0x8aa)](0xc9)[_0x4a0da8(0x66a)](_0xec4c24);})['delete'](this[_0x4f386e(0x24d)]('deleteMessageForEveryone'),..._0x57284a,async(_0x335bf2,_0x5f37f5)=>{const _0x15abd9=_0x4f386e;let _0x508fb9=await this[_0x15abd9(0x65b)]({'request':_0x335bf2,'schema':ei,'ClassRef':rt,'execute':(_0x48035d,_0x457182)=>k[_0x15abd9(0x509)](_0x48035d,_0x457182)});return _0x5f37f5[_0x15abd9(0x8aa)](0xc9)[_0x15abd9(0x66a)](_0x508fb9);})[_0x4f386e(0x21c)](this[_0x4f386e(0x24d)](_0x4f386e(0x790)),..._0x57284a,async(_0x2fd57c,_0xf4aa1e)=>{const _0x465145=_0x4f386e;let _0x3533eb=await this[_0x465145(0x65b)]({'request':_0x2fd57c,'schema':xe,'ClassRef':Oe,'execute':(_0x3504d0,_0x23555d)=>k[_0x465145(0x26b)](_0x3504d0,_0x23555d)});return _0xf4aa1e[_0x465145(0x8aa)](0xc8)[_0x465145(0x66a)](_0x3533eb);})['post'](this['routerPath'](_0x4f386e(0x514)),..._0x57284a,async(_0x333a9e,_0x1bb84e)=>{const _0x7d2f84=_0x4f386e;let _0x4bc769=await this['dataValidate']({'request':_0x333a9e,'schema':ii,'ClassRef':Oe,'execute':(_0x4a0e8d,_0x34ae03)=>k[_0x7d2f84(0x514)](_0x4a0e8d,_0x34ae03)});return _0x1bb84e[_0x7d2f84(0x8aa)](0xc8)[_0x7d2f84(0x66a)](_0x4bc769);})[_0x4f386e(0x21c)](this[_0x4f386e(0x24d)](_0x4f386e(0x2c8)),..._0x57284a,async(_0x2a1545,_0x5ed9a1)=>{const _0x2b1723=_0x4f386e;let _0x3d0add=await this['dataValidate']({'request':_0x2a1545,'schema':ti,'ClassRef':ct,'execute':(_0xdd7520,_0x5162b0)=>k['fetchContacts'](_0xdd7520,_0x5162b0)});return _0x5ed9a1['status'](0xc8)[_0x2b1723(0x66a)](_0x3d0add);})[_0x4f386e(0x21c)](this[_0x4f386e(0x24d)](_0x4f386e(0x82d)),..._0x57284a,async(_0x2a6d00,_0x519ecb)=>{const _0x1c3a2a=_0x4f386e;let _0x55d5a2=await this['dataValidate']({'request':_0x2a6d00,'schema':null,'ClassRef':Object,'execute':(_0x5c797e,_0x2697ec)=>k[_0x1c3a2a(0x82d)](_0x5c797e,_0x2697ec)});return _0x519ecb['status'](0xc9)[_0x1c3a2a(0x66a)](_0x55d5a2);})[_0x4f386e(0x21c)](this['routerPath'](_0x4f386e(0x5ed)),..._0x57284a,async(_0x51a631,_0x13e4a5)=>{const _0x2324b2=_0x4f386e;let _0x374433=await this['dataValidate']({'request':_0x51a631,'schema':oi,'ClassRef':Ye,'execute':(_0x175fda,_0x190285)=>k['fetchMessages'](_0x175fda,_0x190285)});return _0x13e4a5['status'](0xc8)[_0x2324b2(0x66a)](_0x374433);})[_0x4f386e(0x51d)](this[_0x4f386e(0x24d)](_0x4f386e(0x40f)),..._0x57284a,async(_0x157f55,_0x5a6b03)=>{const _0x3a10f0=_0x4f386e;let _0x1169d3=await this[_0x3a10f0(0x65b)]({'request':_0x157f55,'schema':null,'ClassRef':M,'execute':_0x34f075=>k[_0x3a10f0(0x370)](_0x34f075)});return _0x5a6b03[_0x3a10f0(0x8aa)](0xc8)['json'](_0x1169d3);})['get'](this[_0x4f386e(0x24d)](_0x4f386e(0x778)),..._0x57284a,async(_0x3a515e,_0x1a400f)=>{const _0x57cb2d=_0x4f386e;let _0x304580=await this['dataValidate']({'request':_0x3a515e,'schema':null,'ClassRef':M,'execute':_0x419738=>k['fetchLabels'](_0x419738)});return _0x1a400f[_0x57cb2d(0x8aa)](0xc8)[_0x57cb2d(0x66a)](_0x304580);})[_0x4f386e(0x296)](this[_0x4f386e(0x24d)](_0x4f386e(0x825)),..._0x57284a,async(_0x3a3a85,_0x125caf)=>{const _0x320d0d=_0x4f386e;let _0x4186ad=await this['dataValidate']({'request':_0x3a3a85,'schema':null,'ClassRef':Array,'execute':(_0xefe653,_0x3b9290)=>k[_0x320d0d(0x825)](_0xefe653,_0x3b9290)});return _0x125caf[_0x320d0d(0x8aa)](0xc8)[_0x320d0d(0x66a)](_0x4186ad);})[_0x4f386e(0x51d)](this['routerPath']('fetchPrivacySettings'),..._0x57284a,async(_0x4c5129,_0x4b0403)=>{const _0x35d56c=_0x4f386e;let _0x4860b6=await this[_0x35d56c(0x65b)]({'request':_0x4c5129,'schema':null,'ClassRef':M,'execute':_0x8dc865=>k[_0x35d56c(0x2bb)](_0x8dc865)});return _0x4b0403[_0x35d56c(0x8aa)](0xc8)[_0x35d56c(0x66a)](_0x4860b6);})[_0x4f386e(0x296)](this[_0x4f386e(0x24d)](_0x4f386e(0x3e6)),..._0x57284a,async(_0x153a4c,_0x9490fa)=>{const _0x2ebcb7=_0x4f386e;let _0x5aaa69=await this[_0x2ebcb7(0x65b)]({'request':_0x153a4c,'schema':Xa,'ClassRef':ot,'execute':(_0x19ee15,_0x445f6a)=>k[_0x2ebcb7(0x3e6)](_0x19ee15,_0x445f6a)});return _0x9490fa[_0x2ebcb7(0x8aa)](0xc9)[_0x2ebcb7(0x66a)](_0x5aaa69);})[_0x4f386e(0x21c)](this[_0x4f386e(0x24d)](_0x4f386e(0x69d)),..._0x57284a,async(_0x424a1a,_0x518e76)=>{const _0x185fda=_0x4f386e;let _0x29a1dd=await this[_0x185fda(0x65b)]({'request':_0x424a1a,'schema':xe,'ClassRef':ve,'execute':(_0x377246,_0x9a9fc6)=>k[_0x185fda(0x69d)](_0x377246,_0x9a9fc6)});return _0x518e76[_0x185fda(0x8aa)](0xc8)[_0x185fda(0x66a)](_0x29a1dd);})[_0x4f386e(0x21c)](this[_0x4f386e(0x24d)](_0x4f386e(0x692)),..._0x57284a,async(_0x251271,_0x46d4b8)=>{const _0x2336da=_0x4f386e;let _0x25f008=await this[_0x2336da(0x65b)]({'request':_0x251271,'schema':si,'ClassRef':tt,'execute':(_0x396968,_0x43d8e1)=>k[_0x2336da(0x692)](_0x396968,_0x43d8e1)});return _0x46d4b8[_0x2336da(0x8aa)](0xc8)[_0x2336da(0x66a)](_0x25f008);})['post'](this[_0x4f386e(0x24d)](_0x4f386e(0x90b)),..._0x57284a,async(_0x59e3b8,_0x13c008)=>{const _0x301db5=_0x4f386e;let _0x40cf72=await this['dataValidate']({'request':_0x59e3b8,'schema':ai,'ClassRef':st,'execute':(_0x2857c6,_0x4e78a8)=>k[_0x301db5(0x90b)](_0x2857c6,_0x4e78a8)});return _0x13c008[_0x301db5(0x8aa)](0xc8)[_0x301db5(0x66a)](_0x40cf72);})['put'](this[_0x4f386e(0x24d)]('updateProfilePicture'),..._0x57284a,async(_0x56c611,_0x34955a)=>{const _0x36b8b7=_0x4f386e;let _0x2504c2=await this[_0x36b8b7(0x65b)]({'request':_0x56c611,'schema':xe,'ClassRef':ve,'execute':(_0xaa1f7d,_0x41d63e)=>k[_0x36b8b7(0x4bf)](_0xaa1f7d,_0x41d63e)});return _0x34955a['status'](0xc8)[_0x36b8b7(0x66a)](_0x2504c2);})[_0x4f386e(0x65e)](this[_0x4f386e(0x24d)](_0x4f386e(0x5a3)),..._0x57284a,async(_0x2a13a1,_0x15afb7)=>{const _0x378cc1=_0x4f386e;let _0xa11894=await this[_0x378cc1(0x65b)]({'request':_0x2a13a1,'schema':xe,'ClassRef':ve,'execute':(_0x1692ee,_0x57ffba)=>k[_0x378cc1(0x5a3)](_0x1692ee,_0x57ffba)});return _0x15afb7['status'](0xc8)[_0x378cc1(0x66a)](_0xa11894);});}},wi=require(a0_0x20331d(0x8ae)),pt=class{},ht=class{},gt=class{},mt=class{},ft=class{},wt=class{},ie=class{},Pe=class{},yt=class extends ie{},bt=class extends ie{},St=class extends G{constructor(..._0x298599){const _0x2ec666=a0_0x20331d;super(),this[_0x2ec666(0x49f)]=(0x0,wi[_0x2ec666(0x889)])(),this['router'][_0x2ec666(0x21c)](this['routerPath'](_0x2ec666(0x260)),..._0x298599,async(_0x9bc37d,_0x3cd4f7)=>{const _0x479d43=_0x2ec666;let _0x29f2aa=await this[_0x479d43(0x65b)]({'request':_0x9bc37d,'schema':ni,'ClassRef':pt,'execute':(_0x2fa417,_0x2f05e6)=>V[_0x479d43(0x48c)](_0x2fa417,_0x2f05e6)});_0x3cd4f7['status'](0xc9)[_0x479d43(0x66a)](_0x29f2aa);})[_0x2ec666(0x296)](this['routerPath'](_0x2ec666(0x313)),..._0x298599,async(_0x3da70e,_0x45be33)=>{const _0x1873b8=_0x2ec666;let _0x10c4a2=await this[_0x1873b8(0x1ef)]({'request':_0x3da70e,'schema':ui,'ClassRef':ht,'execute':(_0x280638,_0x5a520e)=>V[_0x1873b8(0x313)](_0x280638,_0x5a520e)});_0x45be33[_0x1873b8(0x8aa)](0xc9)['json'](_0x10c4a2);})[_0x2ec666(0x296)](this[_0x2ec666(0x24d)](_0x2ec666(0x3b8)),..._0x298599,async(_0x204b2b,_0x45ef6b)=>{const _0x1598bd=_0x2ec666;let _0x50e5aa=await this[_0x1598bd(0x1ef)]({'request':_0x204b2b,'schema':di,'ClassRef':gt,'execute':(_0x5cc1a2,_0x267388)=>V[_0x1598bd(0x3b8)](_0x5cc1a2,_0x267388)});_0x45ef6b['status'](0xc9)[_0x1598bd(0x66a)](_0x50e5aa);})[_0x2ec666(0x296)](this[_0x2ec666(0x24d)](_0x2ec666(0x22d)),..._0x298599,async(_0x15eff1,_0x432f6)=>{const _0x59a082=_0x2ec666;let _0x56015f=await this[_0x59a082(0x1ef)]({'request':_0x15eff1,'schema':pi,'ClassRef':mt,'execute':(_0x4c82ab,_0x4e82d9)=>V['groupName'](_0x4c82ab,_0x4e82d9)});_0x432f6[_0x59a082(0x8aa)](0xc9)[_0x59a082(0x66a)](_0x56015f);})[_0x2ec666(0x296)](this[_0x2ec666(0x24d)]('groupBetterSetting'),..._0x298599,async(_0x4d23d6,_0x567655)=>{const _0x1df53c=_0x2ec666;let _0x3dd518=await this[_0x1df53c(0x1ef)]({'request':_0x4d23d6,'schema':gi,'ClassRef':wt,'execute':(_0x262d78,_0x12814d)=>V[_0x1df53c(0x23d)](_0x262d78,_0x12814d)});_0x567655[_0x1df53c(0x8aa)](0xc9)[_0x1df53c(0x66a)](_0x3dd518);})[_0x2ec666(0x296)](this[_0x2ec666(0x24d)]('groupSetting'),..._0x298599,async(_0xfd0e08,_0x548d64)=>{const _0x5bf2bb=_0x2ec666;let _0x1e7156=await this[_0x5bf2bb(0x1ef)]({'request':_0xfd0e08,'schema':hi,'ClassRef':ft,'execute':(_0x125cb8,_0x4779d0)=>V[_0x5bf2bb(0x33b)](_0x125cb8,_0x4779d0)});_0x548d64[_0x5bf2bb(0x8aa)](0xc9)[_0x5bf2bb(0x66a)](_0x1e7156);})[_0x2ec666(0x296)](this['routerPath'](_0x2ec666(0x630)),..._0x298599,async(_0x62444d,_0x599ca3)=>{const _0x36b74a=_0x2ec666;let _0x247ad2=await this[_0x36b74a(0x1ef)]({'request':_0x62444d,'schema':li,'ClassRef':bt,'execute':(_0x31d9f9,_0x4d5046)=>V[_0x36b74a(0x630)](_0x31d9f9,_0x4d5046)});_0x599ca3[_0x36b74a(0x8aa)](0xc9)[_0x36b74a(0x66a)](_0x247ad2);})[_0x2ec666(0x51d)](this[_0x2ec666(0x24d)](_0x2ec666(0x320)),..._0x298599,async(_0x9679df,_0x1be6f9)=>{const _0x208d16=_0x2ec666;let _0x4d53a1=await this[_0x208d16(0x1ef)]({'request':_0x9679df,'schema':De,'ClassRef':ie,'execute':(_0xc27a96,_0x2f9388)=>V[_0x208d16(0x8bb)](_0xc27a96,_0x2f9388)});_0x1be6f9[_0x208d16(0x8aa)](0xc8)[_0x208d16(0x66a)](_0x4d53a1);})['get'](this['routerPath'](_0x2ec666(0x44e)),..._0x298599,async(_0xb65513,_0x1c1783)=>{const _0x27ae3e=_0x2ec666;let _0x312992=await this[_0x27ae3e(0x65b)]({'request':_0xb65513,'schema':v,'ClassRef':M,'execute':_0x5820d4=>V[_0x27ae3e(0x44e)](_0x5820d4)});_0x1c1783['status'](0xc8)[_0x27ae3e(0x66a)](_0x312992);})['get'](this['routerPath']('participants'),..._0x298599,async(_0x2dbde5,_0x5ce5e2)=>{const _0x1a1920=_0x2ec666;let _0x3fdf97=await this[_0x1a1920(0x1ef)]({'request':_0x2dbde5,'schema':De,'ClassRef':ie,'execute':(_0x235f56,_0x512988)=>V[_0x1a1920(0x79c)](_0x235f56,_0x512988)});_0x5ce5e2['status'](0xc8)[_0x1a1920(0x66a)](_0x3fdf97);})[_0x2ec666(0x51d)](this['routerPath'](_0x2ec666(0x1e3)),..._0x298599,async(_0x2f327a,_0x21fdd3)=>{const _0xd53260=_0x2ec666;let _0x572998=await this[_0xd53260(0x1ef)]({'request':_0x2f327a,'schema':De,'ClassRef':ie,'execute':(_0x4caecb,_0x179222)=>V['inviteCode'](_0x4caecb,_0x179222)});_0x21fdd3[_0xd53260(0x8aa)](0xc8)[_0xd53260(0x66a)](_0x572998);})[_0x2ec666(0x21c)](this['routerPath']('inviteCodeDetails'),..._0x298599,async(_0x405016,_0x48eabd)=>{const _0x245299=_0x2ec666;let _0x2ff044=await this[_0x245299(0x427)]({'request':_0x405016,'schema':$s,'ClassRef':Pe,'execute':(_0xaf7629,_0x56409f)=>V['groupGetInviteInfo'](_0xaf7629,_0x56409f)});_0x48eabd['status'](0xc9)[_0x245299(0x66a)](_0x2ff044);})[_0x2ec666(0x296)](this['routerPath'](_0x2ec666(0x732)),..._0x298599,async(_0x358310,_0x2cabcc)=>{const _0x456244=_0x2ec666;let _0x3c343a=await this[_0x456244(0x427)]({'request':_0x358310,'schema':$s,'ClassRef':Pe,'execute':(_0x4bce13,_0x550892)=>V[_0x456244(0x732)](_0x4bce13,_0x550892)});_0x2cabcc['status'](0xc9)[_0x456244(0x66a)](_0x3c343a);})[_0x2ec666(0x296)](this[_0x2ec666(0x24d)](_0x2ec666(0x823)),..._0x298599,async(_0x1dbeb4,_0x82a34f)=>{const _0x45f3f2=_0x2ec666;let _0x27d7f4=await this[_0x45f3f2(0x1ef)]({'request':_0x1dbeb4,'schema':De,'ClassRef':ie,'execute':(_0x5caad9,_0x19860d)=>V[_0x45f3f2(0x823)](_0x5caad9,_0x19860d)});_0x82a34f['status'](0xc9)[_0x45f3f2(0x66a)](_0x27d7f4);})[_0x2ec666(0x296)](this[_0x2ec666(0x24d)](_0x2ec666(0x460)),..._0x298599,async(_0x5b4064,_0x2319e4)=>{const _0x57fae9=_0x2ec666;let _0x19e990=await this[_0x57fae9(0x1ef)]({'request':_0x5b4064,'schema':ci,'ClassRef':yt,'execute':(_0x40cded,_0x2af773)=>V[_0x57fae9(0x4dc)](_0x40cded,_0x2af773)});_0x2319e4[_0x57fae9(0x8aa)](0xc9)[_0x57fae9(0x66a)](_0x19e990);})[_0x2ec666(0x65e)](this[_0x2ec666(0x24d)](_0x2ec666(0x7ec)),..._0x298599,async(_0x48e9ee,_0x388c42)=>{const _0x15bf9c=_0x2ec666;let _0x5650a9=await this[_0x15bf9c(0x1ef)]({'request':_0x48e9ee,'schema':{},'ClassRef':ie,'execute':(_0x2332d4,_0x4c90b5)=>V[_0x15bf9c(0x7ec)](_0x2332d4,_0x4c90b5)});_0x388c42[_0x15bf9c(0x8aa)](0xc8)[_0x15bf9c(0x66a)](_0x5650a9);});}},yi=require(a0_0x20331d(0x8ae)),Mt=class extends G{constructor(_0x33dc5a,..._0x324c5a){const _0x1d9199=a0_0x20331d;super(),this['configService']=_0x33dc5a,this['router']=(0x0,yi['Router'])();let _0x35ba42=_0x33dc5a[_0x1d9199(0x51d)](_0x1d9199(0x63d));this['router'][_0x1d9199(0x21c)](_0x1d9199(0x694),..._0x324c5a,async(_0x1cd344,_0x356dae)=>{const _0x4f12ef=_0x1d9199;let {instanceName:_0xe17cf4,apikey:_0x1d7c6c,number:_0x293063}=_0x1cd344[_0x4f12ef(0x3b2)],_0x10cbb1=await he[_0x4f12ef(0x451)]({'instanceName':_0xe17cf4,'apikey':_0x1d7c6c,'number':_0x293063});return _0x356dae['status'](0xc9)[_0x4f12ef(0x66a)](_0x10cbb1);})[_0x1d9199(0x296)](this[_0x1d9199(0x24d)](_0x1d9199(0x4b6)),..._0x324c5a,async(_0x5b9374,_0x488881)=>{const _0x53fca7=_0x1d9199;let _0x1fe932=await this['dataValidate']({'request':_0x5b9374,'schema':v,'ClassRef':M,'execute':_0x47cf48=>he[_0x53fca7(0x600)](_0x47cf48)});return _0x488881[_0x53fca7(0x8aa)](0xc8)[_0x53fca7(0x66a)](_0x1fe932);})[_0x1d9199(0x51d)](this['routerPath']('connect'),..._0x324c5a,async(_0x2f842f,_0x4fe2aa)=>{const _0x51a16e=_0x1d9199;let _0x8ebd19=await this[_0x51a16e(0x65b)]({'request':_0x2f842f,'schema':v,'ClassRef':M,'execute':_0x1cd49a=>he[_0x51a16e(0x381)](_0x1cd49a)});return _0x4fe2aa[_0x51a16e(0x8aa)](0xc8)[_0x51a16e(0x66a)](_0x8ebd19);})['get'](this[_0x1d9199(0x24d)](_0x1d9199(0x5a0)),..._0x324c5a,async(_0x3d7858,_0x575f13)=>{const _0x566731=_0x1d9199;let _0x3c0a68=await this['dataValidate']({'request':_0x3d7858,'schema':v,'ClassRef':M,'execute':_0x585402=>he[_0x566731(0x5a0)](_0x585402)});return _0x575f13[_0x566731(0x8aa)](0xc8)[_0x566731(0x66a)](_0x3c0a68);})[_0x1d9199(0x51d)](this[_0x1d9199(0x24d)](_0x1d9199(0x875),!0x1),..._0x324c5a,async(_0x2a8350,_0x3f0dbd)=>{const _0x50b136=_0x1d9199;let _0x3e1b3f=await this[_0x50b136(0x65b)]({'request':_0x2a8350,'schema':null,'ClassRef':M,'execute':_0x4e1e2a=>he[_0x50b136(0x875)](_0x4e1e2a)});return _0x3f0dbd['status'](0xc8)[_0x50b136(0x66a)](_0x3e1b3f);})['delete'](this[_0x1d9199(0x24d)](_0x1d9199(0x534)),..._0x324c5a,async(_0x36623c,_0x4913f6)=>{const _0x3cf333=_0x1d9199;let _0x20cb94=await this[_0x3cf333(0x65b)]({'request':_0x36623c,'schema':v,'ClassRef':M,'execute':_0x48b1b=>he[_0x3cf333(0x534)](_0x48b1b)});return _0x4913f6[_0x3cf333(0x8aa)](0xc8)[_0x3cf333(0x66a)](_0x20cb94);})[_0x1d9199(0x65e)](this['routerPath'](_0x1d9199(0x65e)),..._0x324c5a,async(_0x21d13c,_0x5272e7)=>{const _0x54c178=_0x1d9199;let _0x1a69ce=await this[_0x54c178(0x65b)]({'request':_0x21d13c,'schema':v,'ClassRef':M,'execute':_0xbd136d=>he[_0x54c178(0x729)](_0xbd136d)});return _0x5272e7[_0x54c178(0x8aa)](0xc8)['json'](_0x1a69ce);});}},bi=require(a0_0x20331d(0x8ae)),As=class{},Y=class extends As{},Ct=class extends Y{},Et=class extends Y{},vt=class extends Y{},Nt=class extends Y{},ke=class extends Y{},$t=class extends Y{},Rt=class extends Y{},At=class extends Y{},It=class extends Y{},Tt=class extends Y{},Ot=class{},_t=class extends G{constructor(..._0x239eed){const _0x146f48=a0_0x20331d;super(),this[_0x146f48(0x49f)]=(0x0,bi['Router'])(),this['router'][_0x146f48(0x21c)](this[_0x146f48(0x24d)]('sendText'),..._0x239eed,async(_0x9aa8c,_0x51968a)=>{const _0x2a96da=_0x146f48;let _0x530246=await this['dataValidate']({'request':_0x9aa8c,'schema':La,'ClassRef':Ct,'execute':(_0x2965ce,_0x5f4c46)=>H['sendText'](_0x2965ce,_0x5f4c46)});return _0x51968a[_0x2a96da(0x8aa)](0xc9)[_0x2a96da(0x66a)](_0x530246);})['post'](this['routerPath'](_0x146f48(0x52e)),..._0x239eed,async(_0x4f0885,_0x4d0944)=>{const _0x582017=_0x146f48;let _0x2119cc=await this[_0x582017(0x65b)]({'request':_0x4f0885,'schema':Ja,'ClassRef':ke,'execute':(_0x4b4431,_0x56ca3f)=>H[_0x582017(0x52e)](_0x4b4431,_0x56ca3f)});return _0x4d0944[_0x582017(0x8aa)](0xc9)['json'](_0x2119cc);})[_0x146f48(0x21c)](this[_0x146f48(0x24d)](_0x146f48(0x5ca)),..._0x239eed,async(_0xf041d0,_0x4203a3)=>{const _0x1b2dde=_0x146f48;let _0x35ee7b=await this[_0x1b2dde(0x65b)]({'request':_0xf041d0,'schema':Ga,'ClassRef':Nt,'execute':(_0xd617b,_0x5f4848)=>H[_0x1b2dde(0x5ca)](_0xd617b,_0x5f4848)});return _0x4203a3['status'](0xc9)[_0x1b2dde(0x66a)](_0x35ee7b);})[_0x146f48(0x21c)](this[_0x146f48(0x24d)](_0x146f48(0x6c9)),..._0x239eed,async(_0x55c55a,_0x101b33)=>{const _0x15f531=_0x146f48;let _0xb8461b=await this[_0x15f531(0x65b)]({'request':_0x55c55a,'schema':qa,'ClassRef':ke,'execute':(_0x3711f6,_0x30af0b)=>H[_0x15f531(0x6c9)](_0x3711f6,_0x30af0b)});return _0x101b33[_0x15f531(0x8aa)](0xc9)[_0x15f531(0x66a)](_0xb8461b);})[_0x146f48(0x21c)](this['routerPath']('sendButtons'),..._0x239eed,async(_0x1d1fdb,_0x79f01c)=>{const _0x36beac=_0x146f48;let _0x2d7578=await this['dataValidate']({'request':_0x1d1fdb,'schema':Ba,'ClassRef':Rt,'execute':(_0x5497f0,_0x5b0906)=>H[_0x36beac(0x486)](_0x5497f0,_0x5b0906)});return _0x79f01c[_0x36beac(0x8aa)](0xc9)[_0x36beac(0x66a)](_0x2d7578);})['post'](this[_0x146f48(0x24d)](_0x146f48(0x46e)),..._0x239eed,async(_0x41db10,_0x20b2ec)=>{const _0x859e85=_0x146f48;let _0x4f5f21=await this[_0x859e85(0x65b)]({'request':_0x41db10,'schema':Wa,'ClassRef':At,'execute':(_0x3800c0,_0x36dd4f)=>H[_0x859e85(0x46e)](_0x3800c0,_0x36dd4f)});return _0x20b2ec[_0x859e85(0x8aa)](0xc9)[_0x859e85(0x66a)](_0x4f5f21);})[_0x146f48(0x21c)](this['routerPath'](_0x146f48(0x7d9)),..._0x239eed,async(_0xcd1ae7,_0x437c16)=>{const _0x5b6146=_0x146f48;let _0x425138=await this['dataValidate']({'request':_0xcd1ae7,'schema':za,'ClassRef':It,'execute':(_0xbeab05,_0x51d43)=>H[_0x5b6146(0x7d9)](_0xbeab05,_0x51d43)});return _0x437c16[_0x5b6146(0x8aa)](0xc9)[_0x5b6146(0x66a)](_0x425138);})['post'](this['routerPath']('sendContact'),..._0x239eed,async(_0x121830,_0x55831f)=>{const _0x82a3be=_0x146f48;let _0xd798a7=await this[_0x82a3be(0x65b)]({'request':_0x121830,'schema':Ha,'ClassRef':Tt,'execute':(_0x2e60e5,_0x504194)=>H[_0x82a3be(0x886)](_0x2e60e5,_0x504194)});return _0x55831f[_0x82a3be(0x8aa)](0xc9)[_0x82a3be(0x66a)](_0xd798a7);})[_0x146f48(0x21c)](this[_0x146f48(0x24d)](_0x146f48(0x6c3)),..._0x239eed,async(_0x60e5eb,_0x41746c)=>{const _0x1f9c2f=_0x146f48;let _0x24e8eb=await this[_0x1f9c2f(0x65b)]({'request':_0x60e5eb,'schema':Ka,'ClassRef':Ot,'execute':(_0x5de035,_0x1ed279)=>H['sendReaction'](_0x5de035,_0x1ed279)});return _0x41746c[_0x1f9c2f(0x8aa)](0xc9)[_0x1f9c2f(0x66a)](_0x24e8eb);})['post'](this[_0x146f48(0x24d)](_0x146f48(0x6bc)),..._0x239eed,async(_0x5552ec,_0x1737a5)=>{const _0x377e73=_0x146f48;let _0x243896=await this[_0x377e73(0x65b)]({'request':_0x5552ec,'schema':Va,'ClassRef':vt,'execute':(_0x1bc129,_0x259d4b)=>H['sendPoll'](_0x1bc129,_0x259d4b)});return _0x1737a5[_0x377e73(0x8aa)](0xc9)[_0x377e73(0x66a)](_0x243896);})[_0x146f48(0x21c)](this[_0x146f48(0x24d)]('sendStatus'),..._0x239eed,async(_0x15a487,_0x320bcd)=>{const _0x57084e=_0x146f48;let _0x3b43dd=await this['dataValidate']({'request':_0x15a487,'schema':ja,'ClassRef':Et,'execute':(_0x393b85,_0x127cd6)=>H[_0x57084e(0x491)](_0x393b85,_0x127cd6)});return _0x320bcd[_0x57084e(0x8aa)](0xc9)[_0x57084e(0x66a)](_0x3b43dd);})['post'](this[_0x146f48(0x24d)](_0x146f48(0x1ee)),..._0x239eed,async(_0x4b0299,_0x5e5d3d)=>{const _0x19de07=_0x146f48;let _0x2c51ce=await this['dataValidate']({'request':_0x4b0299,'schema':Ua,'ClassRef':$t,'execute':(_0x435f30,_0x5b6b8b)=>H[_0x19de07(0x1ee)](_0x435f30,_0x5b6b8b)});return _0x5e5d3d[_0x19de07(0x8aa)](0xc9)[_0x19de07(0x66a)](_0x2c51ce);});}},Si=require(a0_0x20331d(0x8ae)),xt=class{},Dt=class extends G{constructor(..._0x1e71f2){const _0x3ae649=a0_0x20331d;super(),this['router']=(0x0,Si['Router'])(),this['router'][_0x3ae649(0x21c)](this[_0x3ae649(0x24d)](_0x3ae649(0x7cb)),..._0x1e71f2,async(_0x1c16bf,_0x3a80bf)=>{const _0x15133d=_0x3ae649;let _0x57806f=await this[_0x15133d(0x65b)]({'request':_0x1c16bf,'schema':mi,'ClassRef':xt,'execute':(_0x3158e0,_0x5d1236)=>Is['createWebhook'](_0x3158e0,_0x5d1236)});_0x3a80bf['status'](0xc9)['json'](_0x57806f);})['get'](this[_0x3ae649(0x24d)](_0x3ae649(0x691)),..._0x1e71f2,async(_0x30043b,_0x4c11c1)=>{const _0x24a22b=_0x3ae649;let _0x5ace0d=await this[_0x24a22b(0x65b)]({'request':_0x30043b,'schema':v,'ClassRef':M,'execute':_0x5b1ff8=>Is[_0x24a22b(0x242)](_0x5b1ff8)});_0x4c11c1[_0x24a22b(0x8aa)](0xc8)[_0x24a22b(0x66a)](_0x5ace0d);});}},Mi=require(a0_0x20331d(0x8ae)),y=new $(a0_0x20331d(0x309)),Pt=class extends G{constructor(..._0x105102){const _0x1f0eaa=a0_0x20331d;super(),this['router']=(0x0,Mi[_0x1f0eaa(0x889)])(),this[_0x1f0eaa(0x49f)]['post'](this[_0x1f0eaa(0x24d)]('scheduleMessage'),..._0x105102,async(_0x3e35ee,_0xa11135)=>{const _0x68085c=_0x1f0eaa;let _0x5aa0e0=_0x3e35ee[_0x68085c(0x3b2)];y[_0x68085c(0x7a9)](_0x68085c(0x727)),y[_0x68085c(0x7a9)](_0x68085c(0x572)),y[_0x68085c(0x7a9)](_0x3e35ee[_0x68085c(0x3b2)]);let _0x328724=await this[_0x68085c(0x65b)]({'request':_0x3e35ee,'schema':v,'ClassRef':M,'execute':_0x35ff2e=>T[_0x68085c(0x65f)](_0x35ff2e,_0x5aa0e0)});_0xa11135['status'](0xc8)['json'](_0x328724);})[_0x1f0eaa(0x51d)](this[_0x1f0eaa(0x24d)]('scheduleMessage'),..._0x105102,async(_0x554610,_0x398abe)=>{const _0x515de8=_0x1f0eaa;let _0x119951=await this[_0x515de8(0x65b)]({'request':_0x554610,'schema':v,'ClassRef':M,'execute':_0x3ac610=>T[_0x515de8(0x1e7)](_0x3ac610)});_0x398abe[_0x515de8(0x8aa)](0xc8)[_0x515de8(0x66a)](_0x119951);})['delete'](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x537)),..._0x105102,async(_0x39c578,_0x15623f)=>{const _0x5de941=_0x1f0eaa;y[_0x5de941(0x7a9)](_0x5de941(0x469));let _0x21a34f=await this[_0x5de941(0x65b)]({'request':_0x39c578,'schema':v,'ClassRef':M,'execute':_0x10dc6e=>T[_0x5de941(0x537)](_0x10dc6e)});_0x15623f[_0x5de941(0x8aa)](0xc8)[_0x5de941(0x66a)](_0x21a34f);})[_0x1f0eaa(0x21c)](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x5d7)),..._0x105102,async(_0x1ff98a,_0x5e78ab)=>{const _0x152314=_0x1f0eaa;let _0x12395b=_0x1ff98a[_0x152314(0x3b2)];y[_0x152314(0x7a9)](_0x152314(0x70e)),y['verbose']('request\x20body:\x20'),y[_0x152314(0x7a9)](_0x1ff98a[_0x152314(0x3b2)]);let _0x12b657=await this[_0x152314(0x65b)]({'request':_0x1ff98a,'schema':v,'ClassRef':M,'execute':_0x48b863=>T[_0x152314(0x5d7)](_0x48b863,_0x12395b)});_0x5e78ab[_0x152314(0x8aa)](0xc8)[_0x152314(0x66a)](_0x12b657);})[_0x1f0eaa(0x51d)](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x3df)),..._0x105102,async(_0x1ffc44,_0x2c1829)=>{const _0x593d13=_0x1f0eaa;y[_0x593d13(0x7a9)](_0x593d13(0x76d));let _0x4c8e63=await this['dataValidate']({'request':_0x1ffc44,'schema':v,'ClassRef':M,'execute':_0x1c69d6=>T['getAutomateSystem'](_0x1c69d6)});_0x2c1829[_0x593d13(0x8aa)](0xc8)[_0x593d13(0x66a)](_0x4c8e63);})[_0x1f0eaa(0x51d)](this[_0x1f0eaa(0x24d)]('getTicketSystem'),..._0x105102,async(_0x51128c,_0x31c0bb)=>{const _0x5d1ebb=_0x1f0eaa;y[_0x5d1ebb(0x7a9)]('request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem');let _0x4c17f6=await this['dataValidate']({'request':_0x51128c,'schema':v,'ClassRef':M,'execute':_0x53ada1=>T['getAutomateSystem'](_0x53ada1)});_0x31c0bb['status'](0xc8)[_0x5d1ebb(0x66a)](_0x4c17f6);})[_0x1f0eaa(0x21c)](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x440)),..._0x105102,async(_0x582594,_0x79d204)=>{const _0x2930ef=_0x1f0eaa;let _0x1dca2e=_0x582594[_0x2930ef(0x3b2)];y['verbose'](_0x2930ef(0x838)),y[_0x2930ef(0x7a9)](_0x2930ef(0x572)),y[_0x2930ef(0x7a9)](_0x582594['body']);let _0x64e697=await this[_0x2930ef(0x65b)]({'request':_0x582594,'schema':v,'ClassRef':M,'execute':_0x4a8162=>T[_0x2930ef(0x440)](_0x4a8162,_0x1dca2e)});_0x79d204[_0x2930ef(0x8aa)](0xc8)[_0x2930ef(0x66a)](_0x64e697);})[_0x1f0eaa(0x21c)](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x615)),..._0x105102,async(_0x5f2906,_0x4ca7d9)=>{const _0x451572=_0x1f0eaa;let _0x326d88=_0x5f2906[_0x451572(0x3b2)];y[_0x451572(0x7a9)]('request\x20received\x20in\x20updateCustomFields'),y['verbose'](_0x451572(0x572)),y[_0x451572(0x7a9)](_0x5f2906[_0x451572(0x3b2)]);let _0x452f06=await this[_0x451572(0x65b)]({'request':_0x5f2906,'schema':v,'ClassRef':M,'execute':_0xbcd8a8=>T[_0x451572(0x615)](_0xbcd8a8,_0x326d88)});_0x4ca7d9[_0x451572(0x8aa)](0xc8)[_0x451572(0x66a)](_0x452f06);})[_0x1f0eaa(0x21c)](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x703)),..._0x105102,async(_0x4e5c52,_0x53172f)=>{const _0x5882a0=_0x1f0eaa;let _0x41c8c6=_0x4e5c52[_0x5882a0(0x3b2)];y['verbose']('request\x20received\x20in\x20updateAutoCompleteMessages'),y[_0x5882a0(0x7a9)](_0x5882a0(0x572)),y[_0x5882a0(0x7a9)](_0x4e5c52[_0x5882a0(0x3b2)]);let _0x5d4517=await this[_0x5882a0(0x65b)]({'request':_0x4e5c52,'schema':v,'ClassRef':M,'execute':_0x5441ae=>T['updateAutoCompleteMessages'](_0x5441ae,_0x41c8c6)});_0x53172f['status'](0xc8)[_0x5882a0(0x66a)](_0x5d4517);})[_0x1f0eaa(0x21c)](this['routerPath'](_0x1f0eaa(0x82e)),..._0x105102,async(_0x40489b,_0x4132ff)=>{const _0x139e0e=_0x1f0eaa;let _0x158056=_0x40489b[_0x139e0e(0x3b2)];y['verbose']('request\x20received\x20in\x20updateFlowConfig'),y[_0x139e0e(0x7a9)]('request\x20body:\x20'),y[_0x139e0e(0x7a9)](_0x40489b[_0x139e0e(0x3b2)]);let _0x51b210=await this[_0x139e0e(0x65b)]({'request':_0x40489b,'schema':v,'ClassRef':M,'execute':_0x22aee0=>T['updateFlowConfig'](_0x22aee0,_0x158056)});_0x4132ff[_0x139e0e(0x8aa)](0xc8)[_0x139e0e(0x66a)](_0x51b210);})['post'](this['routerPath'](_0x1f0eaa(0x441)),..._0x105102,async(_0x14a0b3,_0x3d3948)=>{const _0xc338b7=_0x1f0eaa;let _0xfdb0e9=_0x14a0b3[_0xc338b7(0x3b2)];y[_0xc338b7(0x7a9)](_0xc338b7(0x6dc)),y[_0xc338b7(0x7a9)](_0xc338b7(0x572)),y[_0xc338b7(0x7a9)](_0x14a0b3['body']);let _0x4c854d=await this[_0xc338b7(0x65b)]({'request':_0x14a0b3,'schema':v,'ClassRef':M,'execute':_0x1d6853=>T[_0xc338b7(0x441)](_0x1d6853,_0xfdb0e9)});_0x3d3948['status'](0xc8)[_0xc338b7(0x66a)](_0x4c854d);})[_0x1f0eaa(0x21c)](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x578)),..._0x105102,async(_0x256d4a,_0x3f2ef1)=>{const _0x34ee61=_0x1f0eaa;let _0xaa5e23=_0x256d4a['body'];y['verbose'](_0x34ee61(0x675)),y['verbose'](_0x34ee61(0x572)),y['verbose'](_0x256d4a[_0x34ee61(0x3b2)]);let _0x2573a2=await this[_0x34ee61(0x65b)]({'request':_0x256d4a,'schema':v,'ClassRef':M,'execute':_0x2d8669=>T['fetchConversation'](_0x2d8669,_0xaa5e23)});_0x3f2ef1[_0x34ee61(0x8aa)](0xc8)['json'](_0x2573a2);})[_0x1f0eaa(0x21c)](this['routerPath'](_0x1f0eaa(0x85d)),..._0x105102,async(_0x217124,_0x37b159)=>{const _0x443b3a=_0x1f0eaa;let _0x327769=_0x217124[_0x443b3a(0x3b2)];y[_0x443b3a(0x7a9)](_0x443b3a(0x847)),y['verbose'](_0x443b3a(0x572)),y[_0x443b3a(0x7a9)](_0x217124[_0x443b3a(0x3b2)]);let _0x64d40e=await this[_0x443b3a(0x65b)]({'request':_0x217124,'schema':v,'ClassRef':M,'execute':_0x3dd9df=>T['editConversation'](_0x3dd9df,_0x327769)});_0x37b159[_0x443b3a(0x8aa)](0xc8)[_0x443b3a(0x66a)](_0x64d40e);})['delete'](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x27e)),..._0x105102,async(_0x41fc64,_0x9ecb7)=>{const _0x1ed473=_0x1f0eaa;let _0xbe0234=_0x41fc64[_0x1ed473(0x3b2)];y[_0x1ed473(0x7a9)](_0x1ed473(0x7a1)),y[_0x1ed473(0x7a9)](_0x1ed473(0x572)),y[_0x1ed473(0x7a9)](_0x41fc64[_0x1ed473(0x3b2)]);let _0x1a8b56=await this['dataValidate']({'request':_0x41fc64,'schema':v,'ClassRef':M,'execute':_0x186f4d=>T['deleteConversation'](_0x186f4d,_0xbe0234)});_0x9ecb7[_0x1ed473(0x8aa)](0xc8)[_0x1ed473(0x66a)](_0x1a8b56);})[_0x1f0eaa(0x21c)](this[_0x1f0eaa(0x24d)]('createflow'),..._0x105102,async(_0x20c4c7,_0x3e4e4a)=>{const _0x41a8bb=_0x1f0eaa;let _0x56ec6e=_0x20c4c7['body'],_0x59ace1=_0x20c4c7['headers'][_0x41a8bb(0x450)];y[_0x41a8bb(0x7a9)](_0x41a8bb(0x6ad)),y[_0x41a8bb(0x7a9)](_0x41a8bb(0x572)),y['verbose'](_0x20c4c7[_0x41a8bb(0x3b2)]);let _0x15b991=await this[_0x41a8bb(0x65b)]({'request':_0x20c4c7,'schema':v,'ClassRef':M,'execute':_0x3cd0b0=>T[_0x41a8bb(0x37e)](_0x3cd0b0,_0x56ec6e,_0x59ace1)});_0x3e4e4a[_0x41a8bb(0x8aa)](0xc8)['json'](_0x15b991);})['post'](this[_0x1f0eaa(0x24d)]('editflow'),..._0x105102,async(_0x220fa6,_0x31f603)=>{const _0xa26046=_0x1f0eaa;let _0x23261b=_0x220fa6[_0xa26046(0x3b2)],_0x3b5477=_0x220fa6[_0xa26046(0x8b8)][_0xa26046(0x450)];y['verbose'](_0xa26046(0x3d4)),y['verbose'](_0xa26046(0x572)),y[_0xa26046(0x7a9)](_0x220fa6[_0xa26046(0x3b2)]),delete _0x23261b[_0xa26046(0x210)],delete _0x23261b[_0xa26046(0x5e3)],delete _0x23261b[_0xa26046(0x3a1)],delete _0x23261b['conditions'];let _0x2e5bd9=await this[_0xa26046(0x65b)]({'request':_0x220fa6,'schema':v,'ClassRef':M,'execute':_0x56891f=>T[_0xa26046(0x84e)](_0x56891f,_0x23261b,_0x3b5477)});_0x31f603[_0xa26046(0x8aa)](0xc8)['json'](_0x2e5bd9);})[_0x1f0eaa(0x21c)](this[_0x1f0eaa(0x24d)]('editflowblock'),..._0x105102,async(_0x57c56e,_0x1cd39d)=>{const _0x145706=_0x1f0eaa;let _0x3a37de=_0x57c56e['body'];y[_0x145706(0x7a9)](_0x145706(0x3d4)),y[_0x145706(0x7a9)](_0x145706(0x572)),y[_0x145706(0x7a9)](_0x57c56e[_0x145706(0x3b2)]);let _0x3fc6da=await this[_0x145706(0x65b)]({'request':_0x57c56e,'schema':v,'ClassRef':M,'execute':_0x40071b=>T[_0x145706(0x670)](_0x40071b,_0x3a37de)});_0x1cd39d['status'](0xc8)[_0x145706(0x66a)](_0x3fc6da);})['post'](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x284)),..._0x105102,async(_0x2aab4c,_0x4cfc34)=>{const _0x3d937a=_0x1f0eaa;let _0x3a3308=_0x2aab4c[_0x3d937a(0x3b2)];y[_0x3d937a(0x7a9)](_0x3d937a(0x3d4)),y[_0x3d937a(0x7a9)](_0x3d937a(0x572)),y[_0x3d937a(0x7a9)](_0x2aab4c[_0x3d937a(0x3b2)]);let _0x231aa4=await this['dataValidate']({'request':_0x2aab4c,'schema':v,'ClassRef':M,'execute':_0x442c89=>T[_0x3d937a(0x62c)](_0x442c89,_0x3a3308)});_0x4cfc34[_0x3d937a(0x8aa)](0xc8)[_0x3d937a(0x66a)](_0x231aa4);})[_0x1f0eaa(0x21c)](this[_0x1f0eaa(0x24d)]('editflowvaredit'),..._0x105102,async(_0x408de9,_0x830229)=>{const _0x22dfe8=_0x1f0eaa;let _0x284d3f=_0x408de9[_0x22dfe8(0x3b2)];y[_0x22dfe8(0x7a9)](_0x22dfe8(0x3d4)),y['verbose']('request\x20body:\x20'),y[_0x22dfe8(0x7a9)](_0x408de9[_0x22dfe8(0x3b2)]);let _0x283354=await this[_0x22dfe8(0x65b)]({'request':_0x408de9,'schema':v,'ClassRef':M,'execute':_0xf5a4cd=>T[_0x22dfe8(0x257)](_0xf5a4cd,_0x284d3f)});_0x830229[_0x22dfe8(0x8aa)](0xc8)['json'](_0x283354);})[_0x1f0eaa(0x21c)](this['routerPath'](_0x1f0eaa(0x66f)),..._0x105102,async(_0x3a90dd,_0x11fc14)=>{const _0x27de7f=_0x1f0eaa;let _0x4e4acb=_0x3a90dd[_0x27de7f(0x3b2)];y['verbose'](_0x27de7f(0x8dd)),y[_0x27de7f(0x7a9)](_0x27de7f(0x572)),y[_0x27de7f(0x7a9)](_0x3a90dd[_0x27de7f(0x3b2)]);let _0x36e8fb=await this[_0x27de7f(0x65b)]({'request':_0x3a90dd,'schema':v,'ClassRef':M,'execute':_0x48a81b=>T[_0x27de7f(0x7c8)](_0x48a81b,_0x4e4acb)});_0x11fc14[_0x27de7f(0x8aa)](0xc8)[_0x27de7f(0x66a)](_0x36e8fb);})['post'](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x516)),..._0x105102,async(_0xe9292a,_0x4075a2)=>{const _0x473fa9=_0x1f0eaa;let _0x5636e6=_0xe9292a[_0x473fa9(0x3b2)];y[_0x473fa9(0x7a9)]('request\x20received\x20in\x20editFlowcondition'),y[_0x473fa9(0x7a9)](_0x473fa9(0x572)),y[_0x473fa9(0x7a9)](_0xe9292a['body']);let _0x59cc84=await this[_0x473fa9(0x65b)]({'request':_0xe9292a,'schema':v,'ClassRef':M,'execute':_0x470acc=>T['editFlowCondition'](_0x470acc,_0x5636e6)});_0x4075a2[_0x473fa9(0x8aa)](0xc8)['json'](_0x59cc84);})['post'](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x355)),..._0x105102,async(_0x3c5f4f,_0x4405bc)=>{const _0x3addf4=_0x1f0eaa;let _0x207902=_0x3c5f4f[_0x3addf4(0x3b2)];y[_0x3addf4(0x7a9)](_0x3addf4(0x91f)),y[_0x3addf4(0x7a9)](_0x3addf4(0x572)),y[_0x3addf4(0x7a9)](_0x3c5f4f[_0x3addf4(0x3b2)]);let _0x1f83ca=await this[_0x3addf4(0x65b)]({'request':_0x3c5f4f,'schema':v,'ClassRef':M,'execute':_0x281c89=>T[_0x3addf4(0x4e3)](_0x281c89,_0x207902)});_0x4405bc['status'](0xc8)[_0x3addf4(0x66a)](_0x1f83ca);})['post'](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x61c)),..._0x105102,async(_0x3431d4,_0x32d0b7)=>{const _0x4e2497=_0x1f0eaa;let _0x5d1bc8=_0x3431d4['body'];y[_0x4e2497(0x7a9)]('request\x20received\x20in\x20getFlow'),y[_0x4e2497(0x7a9)]('request\x20body:\x20'),y['verbose'](_0x3431d4[_0x4e2497(0x3b2)]);let _0x5edbcf=await this[_0x4e2497(0x65b)]({'request':_0x3431d4,'schema':v,'ClassRef':M,'execute':_0x3ed3ee=>T[_0x4e2497(0x585)](_0x3ed3ee,_0x5d1bc8)});_0x32d0b7[_0x4e2497(0x8aa)](0xc8)[_0x4e2497(0x66a)](_0x5edbcf);})[_0x1f0eaa(0x65e)](this[_0x1f0eaa(0x24d)]('deleteflow'),..._0x105102,async(_0x264494,_0x9772cc)=>{const _0x160c2f=_0x1f0eaa;let _0x1d76d9=_0x264494[_0x160c2f(0x3b2)];y[_0x160c2f(0x7a9)](_0x160c2f(0x53a)),y[_0x160c2f(0x7a9)](_0x160c2f(0x572)),y['verbose'](_0x264494[_0x160c2f(0x3b2)]);let _0x35ebe8=await this[_0x160c2f(0x65b)]({'request':_0x264494,'schema':v,'ClassRef':M,'execute':_0x305dec=>T[_0x160c2f(0x250)](_0x305dec,_0x1d76d9)});_0x9772cc[_0x160c2f(0x8aa)](0xc8)[_0x160c2f(0x66a)](_0x35ebe8);})['get'](this[_0x1f0eaa(0x24d)](_0x1f0eaa(0x2a1)),..._0x105102,async(_0x55c62e,_0xf711ca)=>{const _0x59b122=_0x1f0eaa;y[_0x59b122(0x7a9)]('request\x20received\x20in\x20allFlows');let _0x5b8727=await this[_0x59b122(0x65b)]({'request':_0x55c62e,'schema':v,'ClassRef':M,'execute':_0x40c566=>T[_0x59b122(0x2e6)](_0x40c566)});_0xf711ca[_0x59b122(0x8aa)](0xc8)['json'](_0x5b8727);});}},Ni=I(require('path')),oe={};function Ci(_0xed233a,_0x35a890,_0x4ed80d,_0x48c324){oe[_0xed233a]||(oe[_0xed233a]={}),oe[_0xed233a][_0x35a890]={'id':_0x35a890,'response':_0x4ed80d,'events':_0x48c324};}function Ei(_0xe2df06,_0x2164c1){!oe[_0xe2df06]||!oe[_0xe2df06][_0x2164c1]||delete oe[_0xe2df06][_0x2164c1];}function q(_0xfd796f,_0x447786,_0xf8a200){const _0x1a12a1=a0_0x20331d;if(!oe[_0xfd796f])return;let _0x558a2e=_0x1a12a1(0x4e9)+JSON['stringify'](_0xf8a200)+'\x0a\x0a';Object[_0x1a12a1(0x610)](oe[_0xfd796f])['forEach'](_0x33cb5e=>{const _0x4c6b79=_0x1a12a1;_0x33cb5e['events']['includes'](_0x447786)&&_0x33cb5e[_0x4c6b79(0x60e)][_0x4c6b79(0x36a)](_0x558a2e);});}function vi(){const _0x57abe1=a0_0x20331d;let _0x470fcc={};for(let _0x3a1bf3 in oe)_0x470fcc[_0x3a1bf3]=Object[_0x57abe1(0x610)](oe[_0x3a1bf3])[_0x57abe1(0x41b)](_0x2a2896=>({'id':_0x2a2896['id'],'events':_0x2a2896[_0x57abe1(0x706)]}));return _0x470fcc;}var $i=require(a0_0x20331d(0x23a)),Os=require(a0_0x20331d(0x8e1)),Ts=class{},_o=new Os['Schema']({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),xo=new Os['Schema']({'_id':{'type':String,'default':'config'},'WebhookGlobal':{'type':_o},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Ne=R?.['model'](Ts['name'],xo,a0_0x20331d(0x8be)),Do=Ni[a0_0x20331d(0x42b)]['join'](__dirname,a0_0x20331d(0x307)),Le=(0x0,kt['Router'])(),Po=b[a0_0x20331d(0x51d)](a0_0x20331d(0x63d))[a0_0x20331d(0x80f)],le=[Oa,_a,Pa[Po]];Le[a0_0x20331d(0x533)](a0_0x20331d(0x90a),kt[a0_0x20331d(0x42b)][a0_0x20331d(0x924)](Do))[a0_0x20331d(0x51d)]('/events/:instance',async(_0x3d3ab6,_0xf482fd)=>{const _0x5ccb33=a0_0x20331d;console['log'](_0x5ccb33(0x304));let _0x15166a=_0x3d3ab6[_0x5ccb33(0x589)][_0x5ccb33(0x664)],_0x398bc4=(_0x3d3ab6[_0x5ccb33(0x552)][_0x5ccb33(0x706)]||'')[_0x5ccb33(0x382)](','),_0x13c92a=(0x0,$i['v4'])();console[_0x5ccb33(0x834)](_0x5ccb33(0x24e),_0x15166a),console[_0x5ccb33(0x834)]('Subscribed\x20Events:',_0x398bc4);let _0x2816a6=b['get'](_0x5ccb33(0x63d))[_0x5ccb33(0x921)],_0x49b694=_0x3d3ab6[_0x5ccb33(0x552)][_0x5ccb33(0x450)];if(console[_0x5ccb33(0x834)]('API\x20Key\x20from\x20Request:',_0x49b694),_0x2816a6[_0x5ccb33(0x887)]!==_0x49b694){console[_0x5ccb33(0x834)](_0x5ccb33(0x3d2));try{let _0x4178d1=await we[_0x5ccb33(0x4e2)][_0x5ccb33(0x691)](_0x15166a);if(console[_0x5ccb33(0x834)](_0x5ccb33(0x220),_0x4178d1),!_0x4178d1||_0x4178d1['apikey']!==_0x49b694)return console[_0x5ccb33(0x834)]('API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!'),_0xf482fd['status'](0x191)[_0x5ccb33(0x811)](_0x5ccb33(0x3be));}catch(_0xd12b87){return console['error'](_0x5ccb33(0x709),_0xd12b87),_0xf482fd['status'](0x191)[_0x5ccb33(0x811)](_0x5ccb33(0x885));}}if(!await _e(_0x15166a))return _0xf482fd['status'](0x194)[_0x5ccb33(0x811)](_0x5ccb33(0x8a6));_0xf482fd[_0x5ccb33(0x443)]('Content-Type',_0x5ccb33(0x3a4)),_0xf482fd[_0x5ccb33(0x443)](_0x5ccb33(0x454),_0x5ccb33(0x2f0)),_0xf482fd[_0x5ccb33(0x443)](_0x5ccb33(0x489),'keep-alive'),_0xf482fd[_0x5ccb33(0x2da)]();let _0xa1f794=_0x5ccb33(0x4e9)+JSON[_0x5ccb33(0x5f3)]({'info':_0x5ccb33(0x28f)})+'\x0a\x0a';_0xf482fd[_0x5ccb33(0x36a)](_0xa1f794),Ci(_0x15166a,_0x13c92a,_0xf482fd,_0x398bc4),_0x3d3ab6['on'](_0x5ccb33(0x8fe),()=>{const _0x44b2b6=_0x5ccb33;console[_0x44b2b6(0x834)](_0x44b2b6(0x4f8)+_0x15166a),Ei(_0x15166a,_0x13c92a);});}),Le[a0_0x20331d(0x21c)](a0_0x20331d(0x5ce),async(_0x27166e,_0x362e9e)=>{const _0x4fca87=a0_0x20331d;console[_0x4fca87(0x834)]('iniciando\x20fluxo\x20router');let _0x50b7cd=_0x27166e[_0x4fca87(0x589)][_0x4fca87(0x664)],_0x53ac45=_0x27166e['params'][_0x4fca87(0x3cc)],_0x5b2da1=_0x27166e[_0x4fca87(0x552)][_0x4fca87(0x3eb)]||'',_0x38f491=_0x27166e[_0x4fca87(0x3b2)];console[_0x4fca87(0x834)](_0x4fca87(0x772),_0x50b7cd),console['log']('StartID:',_0x53ac45),console[_0x4fca87(0x834)]('RemoteJid:',_0x5b2da1),console['log'](_0x4fca87(0x4e6),_0x38f491);try{if(!await _e(_0x50b7cd))return _0x362e9e[_0x4fca87(0x8aa)](0x194)[_0x4fca87(0x811)](_0x4fca87(0x8a6));let _0x4ec317=await T[_0x4fca87(0x3a7)](_0x50b7cd,_0x53ac45,_0x5b2da1,_0x38f491);_0x362e9e[_0x4fca87(0x811)](_0x4ec317);}catch(_0x26860f){console['error'](_0x26860f),_0x362e9e[_0x4fca87(0x8aa)](0x1f4)['send'](_0x4fca87(0x79a));}}),Le[a0_0x20331d(0x51d)](a0_0x20331d(0x5b4),(_0xdd70e,_0x272873)=>{const _0x155ff6=a0_0x20331d;let _0x255af2=vi();_0x272873[_0x155ff6(0x66a)](_0x255af2);})[a0_0x20331d(0x51d)]('/',(_0x35e3fc,_0x562909)=>{const _0x6293b1=a0_0x20331d;let _0x19cb38=b[_0x6293b1(0x51d)]('SERVER')['URL'];if(_0x19cb38){let _0xef816c=encodeURIComponent(''+_0x19cb38);_0x562909[_0x6293b1(0x6ee)](_0x6293b1(0x851)+_0xef816c);return;}let _0x73a2a5=b[_0x6293b1(0x51d)]('SSL_CONF'),_0x4e1acd=_0x73a2a5&&_0x73a2a5[_0x6293b1(0x8c3)][_0x6293b1(0x382)]('/')[0x4];if(_0x4e1acd){let _0x5ea7d5=encodeURIComponent(_0x6293b1(0x398)+_0x4e1acd);_0x562909[_0x6293b1(0x6ee)]('https://uazapi-plugin.bubbleapps.io/?url='+_0x5ea7d5);}else _0x562909[_0x6293b1(0x6ee)](_0x6293b1(0x33d));})['put'](a0_0x20331d(0x277),...le,async(_0x13ce54,_0x325cfc)=>{const _0x49dd65=a0_0x20331d;try{console[_0x49dd65(0x834)]('Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit'),_0x325cfc[_0x49dd65(0x8aa)](0xc8)['json']({'message':_0x49dd65(0x39b)}),_0x325cfc['on'](_0x49dd65(0x87b),()=>process[_0x49dd65(0x294)](0x0));}catch(_0x57cf97){console[_0x49dd65(0x2c2)]('Erro\x20ao\x20tentar\x20encerrar\x20a\x20API',_0x57cf97),_0x325cfc[_0x49dd65(0x8aa)](0x1f4)[_0x49dd65(0x66a)]({'message':_0x49dd65(0x658)});}})[a0_0x20331d(0x296)](a0_0x20331d(0x6f7),...le,async(_0x3521ce,_0x16770e)=>{const _0x341ff5=a0_0x20331d;try{let _0x2e2fc6=_0x3521ce[_0x341ff5(0x3b2)];await Ne[_0x341ff5(0x2d5)]({},{'$set':_0x2e2fc6},{'upsert':!0x0});let _0x59e198=await Ne[_0x341ff5(0x63f)]();_0x16770e[_0x341ff5(0x66a)](_0x59e198);}catch(_0x25b446){_0x16770e['status'](0x190)[_0x341ff5(0x811)](_0x25b446[_0x341ff5(0x923)]);}})[a0_0x20331d(0x51d)](a0_0x20331d(0x6f7),...le,async(_0x968dd9,_0x117aa5)=>{const _0x27a51b=a0_0x20331d;try{let _0x2e737c=await Ne[_0x27a51b(0x63f)]();if(!_0x2e737c)return _0x117aa5[_0x27a51b(0x66a)]({});_0x117aa5[_0x27a51b(0x66a)](_0x2e737c);}catch(_0x56bc2d){_0x117aa5[_0x27a51b(0x8aa)](0x1f4)[_0x27a51b(0x811)](_0x56bc2d[_0x27a51b(0x923)]);}})[a0_0x20331d(0x533)](a0_0x20331d(0x221),new Mt(b,...le)[a0_0x20331d(0x49f)])[a0_0x20331d(0x533)](a0_0x20331d(0x541),new _t(...le)['router'])[a0_0x20331d(0x533)](a0_0x20331d(0x29b),new dt(...le)[a0_0x20331d(0x49f)])[a0_0x20331d(0x533)](a0_0x20331d(0x67b),new St(...le)[a0_0x20331d(0x49f)])[a0_0x20331d(0x533)]('/webhook',new Dt(...le)[a0_0x20331d(0x49f)])['use'](a0_0x20331d(0x8b2),new Pt(...le)[a0_0x20331d(0x49f)]);var m=class{constructor(..._0x2f1b8f){const _0x1668e6=a0_0x20331d;throw{'status':0x190,'error':_0x1668e6(0x6ea),'message':_0x2f1b8f[_0x1668e6(0x786)]>0x0?_0x2f1b8f:void 0x0};}},ce=class{constructor(..._0x479b1){const _0x4761a5=a0_0x20331d;throw{'status':0x191,'error':_0x4761a5(0x351),'message':_0x479b1['length']>0x0?_0x479b1:void 0x0};}},se=class{constructor(..._0x59968e){const _0x15f55a=a0_0x20331d;throw{'status':0x193,'error':_0x15f55a(0x62f),'message':_0x59968e[_0x15f55a(0x786)]>0x0?_0x59968e:void 0x0};}},J=class{constructor(..._0x48de99){const _0x50ba86=a0_0x20331d;throw{'status':0x194,'error':_0x50ba86(0x844),'message':_0x48de99[_0x50ba86(0x786)]>0x0?_0x48de99:void 0x0};}},x=class{constructor(..._0x1de19d){const _0x38e749=a0_0x20331d;throw{'status':0x1f4,'error':_0x38e749(0x7e2),'message':_0x1de19d[_0x38e749(0x786)]>0x0?_0x1de19d:void 0x0};}},ye=require(a0_0x20331d(0x3ac));async function _s(_0x33a2ad){const _0xba5f0a=a0_0x20331d;let _0x17bcdd=new $(_s[_0xba5f0a(0x8b9)]),_0x81378=R[_0xba5f0a(0x4ce)](),_0x49c185=_0x81378['db'](b[_0xba5f0a(0x51d)](_0xba5f0a(0x8c2))[_0xba5f0a(0x8e5)]['DB_PREFIX_NAME']+_0xba5f0a(0x26f))[_0xba5f0a(0x2cd)](_0x33a2ad),_0x528e3d=async(_0x3a5518,_0x551fd1)=>{const _0x267b71=_0xba5f0a;try{return await _0x81378[_0x267b71(0x4a5)](),await _0x49c185['replaceOne']({'_id':_0x551fd1},JSON['parse'](JSON[_0x267b71(0x5f3)](_0x3a5518,ye['BufferJSON'][_0x267b71(0x794)])),{'upsert':!0x0});}catch{}},_0x31cfd1=async _0x7c6533=>{const _0x4de9ef=_0xba5f0a;try{await _0x81378['connect']();let _0x19a132=await _0x49c185[_0x4de9ef(0x63f)]({'_id':_0x7c6533}),_0x5562ee=JSON['stringify'](_0x19a132);return JSON[_0x4de9ef(0x79b)](_0x5562ee,ye[_0x4de9ef(0x83d)]['reviver']);}catch{}},_0x1854ee=async _0x3d2d45=>{const _0x28ddc4=_0xba5f0a;try{return await _0x81378['connect'](),await _0x49c185[_0x28ddc4(0x24c)]({'_id':_0x3d2d45});}catch{}},_0x457c68=await _0x31cfd1(_0xba5f0a(0x854))||(0x0,ye[_0xba5f0a(0x78b)])();return{'state':{'creds':_0x457c68,'keys':{'get':async(_0x39e538,_0x530c04)=>{const _0x3bed91=_0xba5f0a;let _0x1dc09b={};return await Promise[_0x3bed91(0x2ea)](_0x530c04[_0x3bed91(0x41b)](async _0x2c6563=>{const _0x284ba4=_0x3bed91;let _0x5a6039=await _0x31cfd1(_0x39e538+'-'+_0x2c6563);_0x39e538===_0x284ba4(0x35a)&&_0x5a6039&&(_0x5a6039=ye[_0x284ba4(0x315)][_0x284ba4(0x8af)][_0x284ba4(0x870)][_0x284ba4(0x8b5)](_0x5a6039)),_0x1dc09b[_0x2c6563]=_0x5a6039;})),_0x1dc09b;},'set':async _0x56587a=>{const _0x42418a=_0xba5f0a;let _0x53598a=[];for(let _0x10f694 in _0x56587a)for(let _0xc97d86 in _0x56587a[_0x10f694]){let _0x451126=_0x56587a[_0x10f694][_0xc97d86],_0x61fc29=_0x10f694+'-'+_0xc97d86;_0x53598a[_0x42418a(0x4e8)](_0x451126?_0x528e3d(_0x451126,_0x61fc29):_0x1854ee(_0x61fc29));}await Promise[_0x42418a(0x2ea)](_0x53598a);}}},'saveCreds':async()=>_0x528e3d(_0x457c68,_0xba5f0a(0x854))};}var Fs=I(require(a0_0x20331d(0x2b2))),Us=I(require(a0_0x20331d(0x33a))),Ut=require(a0_0x20331d(0x3ac)),Ri=require(a0_0x20331d(0x528)),Ft=require(a0_0x20331d(0x3ac)),Lt;function ko(_0x3421e4){const _0x264f09=a0_0x20331d;return Lt||(Lt=(0x0,Ri[_0x264f09(0x64a)])({'url':_0x3421e4[_0x264f09(0x51a)]}),Lt[_0x264f09(0x4a5)]()),Lt;}var ge=class u{constructor(_0x51c4bd,_0x72444){const _0x15fb5d=a0_0x20331d;this[_0x15fb5d(0x8db)]=_0x51c4bd,this[_0x15fb5d(0x8ba)]=_0x72444,this[_0x15fb5d(0x7a2)]=new $(u[_0x15fb5d(0x8b9)]),this['client']=ko(_0x51c4bd);}set['reference'](_0x3c491e){const _0x1c31cb=a0_0x20331d;this[_0x1c31cb(0x8ba)]=_0x3c491e;}async[a0_0x20331d(0x579)](){const _0x2260b3=a0_0x20331d;try{return await this['client'][_0x2260b3(0x3bb)](['keys',this['redisEnv'][_0x2260b3(0x738)]+':*']);}catch(_0x5c7895){this[_0x2260b3(0x7a2)][_0x2260b3(0x2c2)](_0x5c7895);}}async[a0_0x20331d(0x391)](_0x1fb13d,_0x4f48b7){const _0xacf309=a0_0x20331d;try{let _0x247966=JSON[_0xacf309(0x5f3)](_0x4f48b7,Ft[_0xacf309(0x83d)][_0xacf309(0x794)]);return await this[_0xacf309(0x8a4)][_0xacf309(0x6d8)](this[_0xacf309(0x8db)][_0xacf309(0x738)]+':'+this['instanceName'],_0x1fb13d,_0x247966);}catch(_0x12fdf8){this[_0xacf309(0x7a2)]['error'](_0x12fdf8);}}async[a0_0x20331d(0x8a1)](){const _0x1b9063=a0_0x20331d;try{let _0x11b63d=await this['client'][_0x1b9063(0x711)](this[_0x1b9063(0x8db)][_0x1b9063(0x738)]+':'+this['instanceName']);if(_0x11b63d){for(let _0x509c15 in _0x11b63d)Object[_0x1b9063(0x330)]['hasOwnProperty'][_0x1b9063(0x417)](_0x11b63d,_0x509c15)&&(_0x11b63d[_0x509c15]=JSON[_0x1b9063(0x79b)](_0x11b63d[_0x509c15],Ft[_0x1b9063(0x83d)][_0x1b9063(0x5b7)]));return _0x11b63d;}}catch(_0x4f8166){this[_0x1b9063(0x7a2)][_0x1b9063(0x2c2)](_0x4f8166);}}async['readData'](_0xacbef2){const _0x56b65d=a0_0x20331d;try{let _0x451be2=await this[_0x56b65d(0x8a4)][_0x56b65d(0x57b)](this[_0x56b65d(0x8db)][_0x56b65d(0x738)]+':'+this[_0x56b65d(0x8ba)],_0xacbef2);if(_0x451be2)return JSON['parse'](_0x451be2,Ft[_0x56b65d(0x83d)][_0x56b65d(0x5b7)]);}catch(_0x3c2fcc){this['logger']['error'](_0x3c2fcc);}}async['removeData'](_0x36627f){const _0x3d646f=a0_0x20331d;try{return await this[_0x3d646f(0x8a4)][_0x3d646f(0x65c)](this[_0x3d646f(0x8db)][_0x3d646f(0x738)]+':'+this[_0x3d646f(0x8ba)],_0x36627f);}catch(_0x1943b9){this[_0x3d646f(0x7a2)][_0x3d646f(0x2c2)](_0x1943b9);}}async[a0_0x20331d(0x21e)](_0x30e231){const _0x3fedb5=a0_0x20331d;try{return await this[_0x3fedb5(0x8a4)][_0x3fedb5(0x85a)](_0x30e231||this[_0x3fedb5(0x8db)][_0x3fedb5(0x738)]+':'+this[_0x3fedb5(0x8ba)]);}catch(_0x507397){this[_0x3fedb5(0x7a2)]['error'](_0x507397);}}};async function xs(_0x198bdb,_0x5bb3d7){const _0x274379=a0_0x20331d;let _0x46d5b3=new $(xs[_0x274379(0x8b9)]),_0xe503b2=new ge(_0x198bdb,_0x5bb3d7),_0x3a04f1=async(_0x4b252e,_0x444b37)=>{const _0xac643c=_0x274379;try{return await _0xe503b2['writeData'](_0x444b37,_0x4b252e);}catch(_0x46a0f1){return _0x46d5b3[_0xac643c(0x2c2)]({'localError':_0xac643c(0x391),'error':_0x46a0f1});}},_0x485565=async _0x56fe92=>{const _0x3bea2b=_0x274379;try{return await _0xe503b2[_0x3bea2b(0x29a)](_0x56fe92);}catch(_0x4ce1c4){_0x46d5b3['error']({'readData':_0x3bea2b(0x391),'error':_0x4ce1c4});return;}},_0x619455=async _0x3a2ba1=>{const _0x4f17f1=_0x274379;try{return await _0xe503b2[_0x4f17f1(0x900)](_0x3a2ba1);}catch(_0x5487d4){_0x46d5b3[_0x4f17f1(0x2c2)]({'readData':_0x4f17f1(0x900),'error':_0x5487d4});}},_0x2509b2=await _0x485565('creds')||(0x0,Ut[_0x274379(0x78b)])();return{'state':{'creds':_0x2509b2,'keys':{'get':async(_0x10d4f6,_0x38ca60)=>{const _0x2ef015=_0x274379;let _0x3c3edd={};return await Promise[_0x2ef015(0x2ea)](_0x38ca60['map'](async _0x159803=>{const _0x3b8e73=_0x2ef015;let _0x57542a=await _0x485565(_0x10d4f6+'-'+_0x159803);_0x10d4f6===_0x3b8e73(0x35a)&&_0x57542a&&(_0x57542a=Ut['proto'][_0x3b8e73(0x8af)]['AppStateSyncKeyData'][_0x3b8e73(0x8b5)](_0x57542a)),_0x3c3edd[_0x159803]=_0x57542a;})),_0x3c3edd;},'set':async _0x16a59f=>{const _0x51fdb3=_0x274379;let _0xdeb76f=[];for(let _0x40ad97 in _0x16a59f)for(let _0x461758 in _0x16a59f[_0x40ad97]){let _0x5b5ce6=_0x16a59f[_0x40ad97][_0x461758],_0x271231=_0x40ad97+'-'+_0x461758;_0xdeb76f[_0x51fdb3(0x4e8)](_0x5b5ce6?await _0x3a04f1(_0x5b5ce6,_0x271231):await _0x619455(_0x271231));}await Promise[_0x51fdb3(0x2ea)](_0xdeb76f);}}},'saveCreds':async()=>await _0x3a04f1(_0x2509b2,_0x274379(0x854))};}var F=I(require('fs')),X=require(a0_0x20331d(0x23a)),Vt=I(require('sharp')),Gt=require(a0_0x20331d(0x3f1)),Ai=require('child_process'),Ii=require(a0_0x20331d(0x3e1)),Ti=I(require('axios')),$e=class extends _{constructor(_0x5cb013,_0x58eb1b,_0x2085b8){const _0x280fea=a0_0x20331d;super(_0x58eb1b),this[_0x280fea(0x808)]=_0x5cb013,this[_0x280fea(0x373)]=_0x58eb1b,this[_0x280fea(0x5b3)]=_0x2085b8;}async[a0_0x20331d(0x479)](_0x4d545a,_0x38b16f){const _0x39d779=a0_0x20331d;try{if(this[_0x39d779(0x407)]['ENABLED']){console[_0x39d779(0x834)]('Creating\x20or\x20updating\x20instance\x20with\x20id:\x20'+_0x38b16f+_0x39d779(0x8a8),_0x4d545a);let _0x718c77=await this[_0x39d779(0x808)]['findOneAndUpdate']({'_id':_0x38b16f},{'$set':_0x4d545a},{'new':!0x0,'upsert':!0x0});return console[_0x39d779(0x834)]('Database\x20update\x20result:',_0x718c77),_0x718c77;}}catch(_0x26e175){throw console['error']('Erro\x20ao\x20atualizar\x20cacheInstance:',_0x26e175),_0x26e175;}return null;}async[a0_0x20331d(0x24c)](_0x3fba22){const _0x3b2950=a0_0x20331d;try{let _0x34ccef=A(_0x3fba22['where']);return{'deletedCount':(await this[_0x3b2950(0x808)]['deleteOne'](_0x34ccef))[_0x3b2950(0x557)]};}catch(_0x3e866f){return{'error':_0x3e866f?.[_0x3b2950(0x27d)]()};}}async[a0_0x20331d(0x63f)](_0x295006){const _0x4f9d23=a0_0x20331d;try{let _0x37b8e0=A(_0x295006[_0x4f9d23(0x656)]);return await this[_0x4f9d23(0x808)][_0x4f9d23(0x63f)](_0x37b8e0)[_0x4f9d23(0x4cf)]();}catch{return null;}}},jt=(0x0,Ii['promisify'])(Ai[a0_0x20331d(0x318)]),Lo=b['get'](a0_0x20331d(0x560)),Ds=class{constructor(){const _0x2c016f=a0_0x20331d;this[_0x2c016f(0x88b)]=new $e(He,b),(!this[_0x2c016f(0x80c)]||!this[_0x2c016f(0x51f)])&&Lo&&this[_0x2c016f(0x762)]()['then'](()=>{const _0x4ed606=_0x2c016f;console[_0x4ed606(0x834)](_0x4ed606(0x262)+this[_0x4ed606(0x80c)]),console['log'](_0x4ed606(0x7fd)+this['networkInterface']);})[_0x2c016f(0x5f6)](_0x25cc65=>{const _0xe5c6c9=_0x2c016f;console[_0xe5c6c9(0x2c2)](_0xe5c6c9(0x792)+_0x25cc65[_0xe5c6c9(0x923)]);});}async['detectIPv6PrefixAndInterface'](){const _0x5b0baa=a0_0x20331d;try{let {stdout:_0x15e4da}=await jt(_0x5b0baa(0x87d));console['log']('Network\x20interfaces\x20detected:\x20'+_0x15e4da);let _0x95ca6=_0x15e4da['split']('\x0a')[_0x5b0baa(0x41b)](_0x3d7625=>_0x3d7625[_0x5b0baa(0x382)]('\x20')[0x0])['filter'](_0x5e75ee=>!_0x5e75ee[_0x5b0baa(0x8eb)]('lo')&&!_0x5e75ee['includes'](_0x5b0baa(0x2e2))&&!_0x5e75ee[_0x5b0baa(0x8eb)](_0x5b0baa(0x535))&&!_0x5e75ee[_0x5b0baa(0x8eb)]('wl')&&!_0x5e75ee[_0x5b0baa(0x8eb)]('@'));if(console[_0x5b0baa(0x834)]('Filtered\x20network\x20interfaces:\x20'+_0x95ca6),_0x95ca6[_0x5b0baa(0x786)]===0x0)throw new Error('No\x20suitable\x20network\x20interface\x20found');this['networkInterface']=_0x95ca6[0x0];let {stdout:_0x15d887}=await jt(_0x5b0baa(0x5f2)+this['networkInterface']);console[_0x5b0baa(0x834)](_0x5b0baa(0x5eb)+_0x15d887);let _0x4a4e34=_0x15d887[_0x5b0baa(0x382)]('\x0a')['find'](_0x3e2d65=>_0x3e2d65[_0x5b0baa(0x8eb)](_0x5b0baa(0x4fb))&&_0x3e2d65[_0x5b0baa(0x8eb)](_0x5b0baa(0x30f)));if(!_0x4a4e34)throw new Error(_0x5b0baa(0x412));let _0x529f17=_0x4a4e34[_0x5b0baa(0x325)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x529f17)throw new Error(_0x5b0baa(0x4d2));let [_0x2d2ac1,_0x1684c7,_0x231a79]=_0x529f17,_0x347c70=Math[_0x5b0baa(0x60b)](Number(_0x231a79)/0x10),_0x2dab05=Number(_0x231a79)%0x10,_0x48c58f=_0x1684c7['split'](':')[_0x5b0baa(0x394)](0x0,_0x347c70)[_0x5b0baa(0x6ca)](':');if(_0x2dab05>0x0){let _0x1e6e3c=_0x1684c7['split'](':')[_0x347c70],_0x30eaf2=0xffff<<0x10-_0x2dab05&0xffff,_0x2a210a=(parseInt(_0x1e6e3c,0x10)&_0x30eaf2)['toString'](0x10)[_0x5b0baa(0x75b)](0x4,'0');_0x48c58f+=':'+_0x2a210a;}this[_0x5b0baa(0x80c)]=_0x48c58f+':';}catch(_0x56b3a5){console[_0x5b0baa(0x2c2)](_0x5b0baa(0x7ae),_0x56b3a5);}}async[a0_0x20331d(0x881)](_0x5641a9){const _0x1f7797=a0_0x20331d;let _0x16b519=_0x1f7797(0x2bc)+_0x5641a9+_0x1f7797(0x7dc)+this[_0x1f7797(0x51f)];try{await jt(_0x16b519),console[_0x1f7797(0x834)](_0x1f7797(0x4ec)+_0x5641a9);}catch(_0x570195){console[_0x1f7797(0x2c2)]('Error\x20adding\x20IPv6\x20address:\x20'+_0x570195);}}async['removeIPv6'](_0x498e4d){const _0x20097c=a0_0x20331d;let _0x4f5c52='ip\x20-6\x20addr\x20del\x20'+_0x498e4d+_0x20097c(0x7dc)+this[_0x20097c(0x51f)];try{await jt(_0x4f5c52),console['log'](_0x20097c(0x76f)+_0x498e4d);}catch(_0xf71772){console[_0x20097c(0x2c2)](_0x20097c(0x48f)+_0xf71772);}}[a0_0x20331d(0x788)](){const _0x34e28d=a0_0x20331d;return _0x34e28d(0x884)[_0x34e28d(0x759)](/X/g,()=>_0x34e28d(0x89d)[_0x34e28d(0x5a8)](Math[_0x34e28d(0x60b)](Math[_0x34e28d(0x636)]()*0x10)));}['ip6eui'](_0x48d010,_0x1ffb53){const _0x86df76=a0_0x20331d;let _0x3d39ab=_0x1ffb53[_0x86df76(0x382)](':');return _0x3d39ab[0x0]=(parseInt(_0x3d39ab[0x0],0x10)^0x2)['toString'](0x10)[_0x86df76(0x75b)](0x2,'0'),''+_0x48d010+_0x3d39ab[0x0]+_0x3d39ab[0x1]+':'+_0x3d39ab[0x2]+_0x86df76(0x334)+_0x3d39ab[0x3]+':'+_0x3d39ab[0x4]+_0x3d39ab[0x5];}[a0_0x20331d(0x206)](){const _0x4f68dd=a0_0x20331d;let _0x1526e7=this[_0x4f68dd(0x80c)];_0x1526e7[_0x4f68dd(0x3ea)](':')||(_0x1526e7+=':');let _0x2f3300=this['randomMac']();return this['ip6eui'](_0x1526e7,_0x2f3300);}[a0_0x20331d(0x657)](_0x11a52a){const _0x3abbbc=a0_0x20331d;return new RegExp('^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$')[_0x3abbbc(0x248)](_0x11a52a);}async[a0_0x20331d(0x263)](_0x47e29){const _0x13711d=a0_0x20331d;let _0x478a2e=[{'url':_0x13711d(0x708),'parse':_0x3cf1d1=>_0x3cf1d1['ip']},{'url':_0x13711d(0x751),'parse':_0x267ec3=>_0x267ec3['ip']},{'url':'https://ifconfig.me/ip','parse':_0x5c415c=>_0x5c415c[_0x13711d(0x291)]()},{'url':_0x13711d(0x89a),'parse':_0x36f791=>_0x36f791['trim']()}],_0x150989=_0x478a2e[Math[_0x13711d(0x60b)](Math[_0x13711d(0x636)]()*_0x478a2e[_0x13711d(0x786)])];try{let _0x479309=await Ti[_0x13711d(0x42b)][_0x13711d(0x51d)](_0x150989[_0x13711d(0x562)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x47e29}}),_0x59220b=_0x150989[_0x13711d(0x79b)](_0x479309[_0x13711d(0x311)]);return _0x59220b[_0x13711d(0x6a5)]()===_0x47e29[_0x13711d(0x6a5)]()?(console[_0x13711d(0x834)](_0x13711d(0x781)+_0x47e29),!0x0):(console[_0x13711d(0x2c2)](_0x13711d(0x713)+_0x47e29+_0x13711d(0x340)+_0x59220b),!0x1);}catch(_0x5035ad){return console[_0x13711d(0x2c2)](_0x13711d(0x7ca)+_0x150989['url']+':\x20'+_0x5035ad[_0x13711d(0x923)]),!0x1;}}async[a0_0x20331d(0x8de)](_0x372850,_0x577c60){const _0x357ac7=a0_0x20331d;if(!this['ipv6Prefix']||!this[_0x357ac7(0x51f)])return console[_0x357ac7(0x2c2)](_0x357ac7(0x55a)),null;let _0x320910;do _0x320910=this['generateRandomIPv6'](),console[_0x357ac7(0x834)]('Generated\x20IPv6:\x20'+_0x320910);while(!await this[_0x357ac7(0x8e7)](_0x320910));await this[_0x357ac7(0x881)](_0x320910),console[_0x357ac7(0x834)]('Configured\x20IPv6:\x20'+_0x320910);let _0x42887f={'_id':_0x372850+'-'+_0x577c60,'ip':_0x320910},_0x1e4f73=await this[_0x357ac7(0x88b)][_0x357ac7(0x479)](_0x42887f,_0x42887f[_0x357ac7(0x53e)]);return console[_0x357ac7(0x834)]('Cache\x20instance\x20update\x20result:\x20'+_0x1e4f73),_0x320910;}async[a0_0x20331d(0x8e7)](_0x5aff9e){const _0x5ead99=a0_0x20331d;return this['isValidIPv6Config'](_0x5aff9e)?!await this['cacheInstanceRepository'][_0x5ead99(0x63f)]({'where':{'ip':_0x5aff9e}}):!0x1;}async['removeIPv6ById'](_0xaaea21,_0x587aba){const _0xce8c15=a0_0x20331d;let _0x430911=_0xaaea21+'-'+_0x587aba,_0x9d7743=await this['cacheInstanceRepository'][_0xce8c15(0x63f)]({'where':{'_id':_0x430911}});_0x9d7743&&_0x9d7743['ip']&&(await this[_0xce8c15(0x49a)](_0x9d7743['ip']),await this['cacheInstanceRepository'][_0xce8c15(0x24c)]({'where':{'_id':_0x430911}}));}},Fo=new Ds(),re=Fo,js=a0_0x20331d(0x4cc),Li,me=null,ka=null,Uo=0x3,jo=null,Oi=b[a0_0x20331d(0x51d)](a0_0x20331d(0x63d))[a0_0x20331d(0x921)][a0_0x20331d(0x887)],_i=b[a0_0x20331d(0x51d)](a0_0x20331d(0x560));async function Jo(){const _0x4ea884=a0_0x20331d;let _0x26c3a9=await Ne['findOne']();me=_0x26c3a9?.[_0x4ea884(0x681)]??null,jo=_0x26c3a9?.['DaysToDelete']??null,js=_0x26c3a9?.[_0x4ea884(0x726)]??'Safari',Li=_0x26c3a9?.['connectedName']??K??_0x4ea884(0x700);}async function qo(){await Jo();}qo();var Jt={},Re=class u{constructor(_0x31f6d6,_0x5b31bf,_0x41db49){const _0x286814=a0_0x20331d;this[_0x286814(0x373)]=_0x31f6d6,this[_0x286814(0x2f6)]=_0x5b31bf,this[_0x286814(0x402)]=_0x41db49,this[_0x286814(0x246)]=null,this[_0x286814(0x7a2)]=new $(u[_0x286814(0x8b9)]),this[_0x286814(0x664)]={},this[_0x286814(0x590)]={},this['stateConnection']={'state':_0x286814(0x8fe)},this[_0x286814(0x69f)]=(0x0,j['join'])(ue,_0x286814(0x307)),this[_0x286814(0x449)]=new Us['default'](),this[_0x286814(0x47d)]=new Us[(_0x286814(0x42b))](),this[_0x286814(0x864)]=!0x1,this['webhookMap']={'status.instance':_0x286814(0x55e),'connection.update':_0x286814(0x55e),'qrcode.updated':_0x286814(0x31b),'messages.upsert':_0x286814(0x6f6),'send.message':'/wa-message','messages.update':_0x286814(0x89c),'group.upsert':_0x286814(0x6df),'group.update':'/wa-groups','group-participants.update':_0x286814(0x6df),'messages.set':'/wa-all-message','contacts.set':_0x286814(0x23e),'contacts.upsert':_0x286814(0x23e),'contacts.update':_0x286814(0x23e),'presence.update':_0x286814(0x672),'chats.set':_0x286814(0x502),'chats.update':_0x286814(0x502),'chats.upsert':_0x286814(0x502),'chats.delete':_0x286814(0x502)},this[_0x286814(0x52a)]=0x0,this[_0x286814(0x926)]=[],this['RECONNECT_TIME_FRAME']=0xea60,this['isRunning']=!0x1,this[_0x286814(0x3da)]={'chats.upsert':async(_0x270bdd,_0x45e056)=>{const _0xafe2c3=_0x286814;let _0x191a3b=[];for await(let _0x50e42d of _0x270bdd)_0x191a3b[_0xafe2c3(0x4e8)]({'_id':_0x50e42d['id'],'owner':this[_0xafe2c3(0x664)][_0xafe2c3(0x60f)],'group':_0x50e42d['id'][_0xafe2c3(0x3ea)](_0xafe2c3(0x5dd)),'name':_0x50e42d['name']||_0x50e42d[_0xafe2c3(0x368)]||null,'contactname':null,'lastmsg':_0x50e42d[_0xafe2c3(0x6e8)]&&_0x50e42d[_0xafe2c3(0x6e8)][_0xafe2c3(0x27d)]()[_0xafe2c3(0x786)]<0xd?_0x50e42d[_0xafe2c3(0x6e8)]*0x3e8:_0x50e42d[_0xafe2c3(0x6e8)]||null,'archived':_0x50e42d[_0xafe2c3(0x3f4)]||!0x1,'unreadcount':_0x50e42d[_0xafe2c3(0x601)]||0x0,'ephemeralExpiration':_0x50e42d['ephemeralExpiration']||0x0});this[_0xafe2c3(0x3d7)](_0xafe2c3(0x867),_0x191a3b);},'chats.update':async(_0x557c04,_0x1b9dab)=>{const _0x4f0d75=_0x286814;for(let _0x27595a of _0x557c04){let _0x53ffa2={'_id':_0x27595a['id'],'owner':this['instance'][_0x4f0d75(0x60f)],'archived':_0x27595a['archived'],'muteEndTime':_0x27595a[_0x4f0d75(0x60a)],'ephemeralExpiration':_0x27595a[_0x4f0d75(0x7af)]},_0x28bade=!0x1,_0x24de23={};_0x53ffa2[_0x4f0d75(0x3f4)]!=null&&(this[_0x4f0d75(0x7a2)][_0x4f0d75(0x7a9)](this['instanceName']+'\x20('+this[_0x4f0d75(0x664)][_0x4f0d75(0x60f)]+_0x4f0d75(0x387)+_0x27595a['id']+_0x4f0d75(0x903)+_0x27595a[_0x4f0d75(0x3f4)]),_0x28bade=!0x0,_0x24de23[_0x4f0d75(0x3f4)]=_0x27595a[_0x4f0d75(0x3f4)]),_0x4f0d75(0x60a)in _0x27595a&&(this[_0x4f0d75(0x7a2)][_0x4f0d75(0x7a9)](this[_0x4f0d75(0x8ba)]+'\x20('+this[_0x4f0d75(0x664)]['wuid']+_0x4f0d75(0x8f4)+_0x27595a['id']+_0x4f0d75(0x903)+(_0x27595a['muteEndTime']??'0')),_0x28bade=!0x0,_0x24de23[_0x4f0d75(0x60a)]=_0x27595a[_0x4f0d75(0x60a)]??0x0),'ephemeralExpiration'in _0x27595a&&(this[_0x4f0d75(0x7a2)][_0x4f0d75(0x7a9)](this[_0x4f0d75(0x8ba)]+'\x20('+this[_0x4f0d75(0x664)]['wuid']+_0x4f0d75(0x576)+_0x27595a['id']+_0x4f0d75(0x903)+(_0x27595a[_0x4f0d75(0x7af)]!==void 0x0?_0x27595a[_0x4f0d75(0x7af)]:_0x4f0d75(0x4c1))),_0x24de23[_0x4f0d75(0x7af)]=_0x27595a['ephemeralExpiration']===null?0x0:_0x27595a['ephemeralExpiration'],_0x28bade=!0x0);let _0x8abb73;_0x28bade&&(_0x8abb73=await this['repository']['chat']['updateOne']({'where':{'_id':_0x27595a['id']}},_0x24de23,this[_0x4f0d75(0x664)][_0x4f0d75(0x60f)])),_0x8abb73&&q(this[_0x4f0d75(0x8ba)],_0x4f0d75(0x28b),{'chat':_0x8abb73});}},'chats.delete':async _0x1fb7ea=>{const _0x473bc4=_0x286814;for(let _0x3953f7 of _0x1fb7ea)if(_0x3953f7['endsWith'](_0x473bc4(0x5dd))){await this[_0x473bc4(0x402)][_0x473bc4(0x617)][_0x473bc4(0x65e)]({'where':{'_id':_0x3953f7}},this[_0x473bc4(0x664)][_0x473bc4(0x60f)]);let _0xb5237d={'where':{'key':{'remoteJid':_0x3953f7}}};await this['repository']['message'][_0x473bc4(0x65e)](_0xb5237d,this['instance'][_0x473bc4(0x60f)]);}else{await this[_0x473bc4(0x402)][_0x473bc4(0x617)][_0x473bc4(0x2d5)]({'where':{'_id':_0x3953f7}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x473bc4(0x664)][_0x473bc4(0x60f)]);let _0x1a52ba={'where':{'key':{'remoteJid':_0x3953f7}}};await this[_0x473bc4(0x402)][_0x473bc4(0x923)][_0x473bc4(0x65e)](_0x1a52ba,this[_0x473bc4(0x664)][_0x473bc4(0x60f)]);}this['sendDataWebhook'](_0x473bc4(0x4ef),[..._0x1fb7ea]);}},this[_0x286814(0x659)]={'contacts.upsert':async(_0xde1ebb,_0x569cc1)=>{const _0x388067=_0x286814;let _0x38aa20=await this['repository'][_0x388067(0x929)]['find']({'where':{}},this[_0x388067(0x664)][_0x388067(0x60f)]),_0xe09a07=[];for await(let _0xd6825c of _0xde1ebb)_0x38aa20[_0x388067(0x691)](_0x510a90=>_0x510a90[_0x388067(0x53e)]===_0xd6825c['id'])||_0xe09a07[_0x388067(0x4e8)]({'_id':_0xd6825c['id'],'pushName':_0xd6825c?.[_0x388067(0x8b9)]||_0xd6825c?.[_0x388067(0x346)],'owner':this[_0x388067(0x664)]['wuid']});this[_0x388067(0x3d7)](_0x388067(0x735),_0xe09a07),await this[_0x388067(0x402)][_0x388067(0x929)][_0x388067(0x477)](_0xe09a07);},'contacts.update':async(_0xb72a8f,_0x2789a8)=>{const _0x34b299=_0x286814;let _0x340d92=[];for await(let _0x40fdcf of _0xb72a8f)_0x340d92[_0x34b299(0x4e8)]({'_id':_0x40fdcf['id'],'pushName':_0x40fdcf?.[_0x34b299(0x8b9)]??_0x40fdcf?.[_0x34b299(0x346)],'owner':this[_0x34b299(0x664)][_0x34b299(0x60f)]});this['sendDataWebhook'](_0x34b299(0x316),_0x340d92);}},this[_0x286814(0x3d6)]={'messaging-history.set':async({messages:_0x1ab95b,chats:_0x3e5a2a,isLatest:_0x4cf971},_0x34a84f)=>{const _0x1bbb79=_0x286814;if(_0x4cf971){let _0x51b55d=await Promise[_0x1bbb79(0x2ea)](_0x3e5a2a[_0x1bbb79(0x41b)](async _0x421cf9=>({'_id':_0x421cf9['id'],'owner':this[_0x1bbb79(0x664)][_0x1bbb79(0x60f)],'group':_0x421cf9['id']['endsWith'](_0x1bbb79(0x5dd)),'name':_0x421cf9['name']||_0x421cf9[_0x1bbb79(0x368)]||_0x421cf9[_0x1bbb79(0x395)]||null,'contactname':null,'lastmsg':_0x421cf9['conversationTimestamp']&&_0x421cf9[_0x1bbb79(0x6e8)][_0x1bbb79(0x27d)]()['length']<0xd?_0x421cf9[_0x1bbb79(0x6e8)]*0x3e8:_0x421cf9[_0x1bbb79(0x6e8)]||null,'archived':_0x421cf9['archived']||!0x1,'unreadcount':_0x421cf9['unreadCount']||0x0,'ephemeralExpiration':_0x421cf9[_0x1bbb79(0x7af)]||0x0,'muteEndTime':_0x421cf9[_0x1bbb79(0x60a)]||0x0})));this[_0x1bbb79(0x3d7)](_0x1bbb79(0x5f7),_0x51b55d),await this[_0x1bbb79(0x831)](_0x51b55d,_0x34a84f);}let _0x2e47c0=[],_0x2b84e2=Date['now']()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x39f3ae]of Object['entries'](_0x1ab95b)){if(_0x39f3ae['message']?.['protocolMessage']||_0x39f3ae[_0x1bbb79(0x923)]?.[_0x1bbb79(0x3e3)]||!_0x39f3ae[_0x1bbb79(0x923)]||_0x39f3ae['key'][_0x1bbb79(0x3eb)]===_0x1bbb79(0x5c4)||(Fs[_0x1bbb79(0x42b)][_0x1bbb79(0x637)](_0x39f3ae?.[_0x1bbb79(0x627)])&&(_0x39f3ae[_0x1bbb79(0x627)]=_0x39f3ae['messageTimestamp']?.[_0x1bbb79(0x214)]()),_0x39f3ae['messageTimestamp']&&_0x39f3ae['messageTimestamp']['toString']()[_0x1bbb79(0x786)]<0xd&&(_0x39f3ae[_0x1bbb79(0x627)]=_0x39f3ae[_0x1bbb79(0x627)]*0x3e8),_0x39f3ae[_0x1bbb79(0x627)]<_0x2b84e2))continue;let _0x2e8286=(0x0,w[_0x1bbb79(0x27f)])(_0x39f3ae['message']),_0x22a64e=(0x0,w[_0x1bbb79(0x2a3)])(_0x2e8286),{message_normalized:_0x4d6580}=this[_0x1bbb79(0x6ce)](_0x2e8286,_0x22a64e,null);Object[_0x1bbb79(0x4db)](_0x4d6580)[_0x1bbb79(0x786)]>0x0&&_0x2e47c0[_0x1bbb79(0x4e8)]({'_id':_0x39f3ae['key']['id'],'key':_0x39f3ae[_0x1bbb79(0x2f3)],'pushName':_0x39f3ae['pushName'],'participant':_0x39f3ae[_0x1bbb79(0x292)],'message':_0x2e8286,'messageType':_0x22a64e,'message_normalized':{'key':_0x39f3ae[_0x1bbb79(0x2f3)],'pushName':_0x39f3ae['pushName'],'messageTimestamp':_0x39f3ae[_0x1bbb79(0x627)],..._0x4d6580},'messageTimestamp':_0x39f3ae['messageTimestamp'],'owner':this[_0x1bbb79(0x664)][_0x1bbb79(0x60f)]});}_0x34a84f['ENABLED']&&_0x2e47c0[_0x1bbb79(0x786)]>0x0&&(this['logger'][_0x1bbb79(0x7a9)](this[_0x1bbb79(0x8ba)]+'\x20('+this[_0x1bbb79(0x664)][_0x1bbb79(0x60f)]+'):\x20'+_0x2e47c0[_0x1bbb79(0x786)]+_0x1bbb79(0x383)+this[_0x1bbb79(0x664)][_0x1bbb79(0x60f)]+_0x1bbb79(0x734)),await this[_0x1bbb79(0x402)][_0x1bbb79(0x923)][_0x1bbb79(0x477)]([..._0x2e47c0],this['instance'][_0x1bbb79(0x60f)])),this[_0x1bbb79(0x3d7)](_0x1bbb79(0x324),[..._0x2e47c0]),_0x1ab95b=void 0x0;},'messages.upsert':async({messages:_0x295231,type:_0x2b17c4},_0x578a24)=>{const _0x15f9e5=_0x286814;for(let _0x51b258 of _0x295231){if(this[_0x15f9e5(0x590)]?.['groups_ignore']&&_0x51b258[_0x15f9e5(0x2f3)][_0x15f9e5(0x3eb)][_0x15f9e5(0x8eb)](_0x15f9e5(0x5dd))){this[_0x15f9e5(0x7a2)]['verbose'](this[_0x15f9e5(0x8ba)]+'\x20('+this[_0x15f9e5(0x664)][_0x15f9e5(0x60f)]+_0x15f9e5(0x2f8));return;}if(_0x2b17c4!==_0x15f9e5(0x326)||!_0x51b258?.[_0x15f9e5(0x923)]||_0x51b258['message']?.['protocolMessage']||_0x51b258[_0x15f9e5(0x923)]['senderKeyDistributionMessage']||_0x51b258[_0x15f9e5(0x2f3)][_0x15f9e5(0x3eb)]===_0x15f9e5(0x5c4))return;let _0x381dcf=null,_0x4d021c=null;if(_0x51b258['messageStubParameters']&&_0x51b258['messageStubParameters'][0x0]==='Message\x20absent\x20from\x20node'){console[_0x15f9e5(0x2c2)]('[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação'),Jt[_0x51b258[_0x15f9e5(0x2f3)]['id']]=_0x51b258,this[_0x15f9e5(0x399)](_0x51b258,0x0);return;}Jt[_0x51b258['key']['id']]&&(console[_0x15f9e5(0x2c2)](_0x15f9e5(0x49c)),delete Jt[_0x51b258[_0x15f9e5(0x2f3)]['id']]);try{_0x381dcf=await this[_0x15f9e5(0x338)](_0x51b258),_0x4d021c=_0x381dcf?_0x381dcf[_0x15f9e5(0x6ca)](','):null;}catch(_0x3f684f){this[_0x15f9e5(0x7a2)][_0x15f9e5(0x7a9)](this[_0x15f9e5(0x8ba)]+'\x20('+this[_0x15f9e5(0x664)][_0x15f9e5(0x60f)]+'):\x20'+(_0x3f684f instanceof Error?_0x3f684f[_0x15f9e5(0x923)]:JSON[_0x15f9e5(0x5f3)](_0x3f684f,null,0x2))),_0x4d021c=_0x15f9e5(0x671);}this[_0x15f9e5(0x8a4)][_0x15f9e5(0x339)](_0x15f9e5(0x505)),Fs['default'][_0x15f9e5(0x637)](_0x51b258[_0x15f9e5(0x627)])&&(_0x51b258['messageTimestamp']=_0x51b258['messageTimestamp']?.[_0x15f9e5(0x214)]()),_0x51b258[_0x15f9e5(0x627)]&&_0x51b258['messageTimestamp'][_0x15f9e5(0x27d)]()[_0x15f9e5(0x786)]<0xd&&(_0x51b258[_0x15f9e5(0x627)]=_0x51b258[_0x15f9e5(0x627)]*0x3e8);let _0x36c1d4=_0x51b258[_0x15f9e5(0x923)],_0x372efe=(0x0,w[_0x15f9e5(0x27f)])(_0x36c1d4),_0x2a7cbf=(0x0,w['getContentType'])(_0x372efe),{messageContent:_0xc50b40,message_normalized:_0x48767a}=this[_0x15f9e5(0x6ce)](_0x372efe,_0x2a7cbf,_0x4d021c);_0x2a7cbf==='protocolMessage'&&_0xc50b40?.[_0x15f9e5(0x6f1)]&&(_0x2a7cbf=_0x15f9e5(0x6f1));let _0x5843b3,_0x106228=_0x51b258[_0x15f9e5(0x2f3)][_0x15f9e5(0x3eb)][_0x15f9e5(0x3ea)](_0x15f9e5(0x5dd));if(_0x51b258['key']['fromMe'])_0x5843b3=this[_0x15f9e5(0x664)][_0x15f9e5(0x6ba)];else{let _0x36f397=_0x106228?_0x51b258['key'][_0x15f9e5(0x292)]:_0x51b258[_0x15f9e5(0x2f3)]['remoteJid'];_0x5843b3=(await this['findAndUpdateCacheContact'](_0x36f397,_0x51b258[_0x15f9e5(0x932)],!0x1))[_0x15f9e5(0x761)][_0x15f9e5(0x36f)];}let _0x5289af={'_id':_0x51b258[_0x15f9e5(0x2f3)]['id'],'key':_0x51b258[_0x15f9e5(0x2f3)],'isGroup':_0x106228,'profilePictureUrl':_0x5843b3,'pushName':_0x51b258[_0x15f9e5(0x932)],'message':_0x372efe,'messageType':_0x2a7cbf,'message_normalized':{'key':_0x51b258[_0x15f9e5(0x2f3)],'pushName':_0x51b258[_0x15f9e5(0x932)],'messageTimestamp':_0x51b258[_0x15f9e5(0x627)],'source':(0x0,w['getDevice'])(_0x51b258[_0x15f9e5(0x2f3)]['id']),..._0x48767a},'messageTimestamp':_0x51b258[_0x15f9e5(0x627)],'owner':this[_0x15f9e5(0x664)][_0x15f9e5(0x60f)],'source':(0x0,w['getDevice'])(_0x51b258['key']['id']),'expiration':_0xc50b40?.[_0x15f9e5(0x4fd)]?.[_0x15f9e5(0x5d4)]||0x0};_0xc50b40||(this[_0x15f9e5(0x7a2)][_0x15f9e5(0x2c2)]('Mensagem\x20não\x20suportada'),this['logger']['error'](_0x5289af)),this[_0x15f9e5(0x7a2)][_0x15f9e5(0x834)](this[_0x15f9e5(0x8ba)]+'\x20('+this[_0x15f9e5(0x664)][_0x15f9e5(0x60f)]+_0x15f9e5(0x51c)+(_0x5289af[_0x15f9e5(0x2f3)]?.['fromMe']?'enviado\x20para':_0x15f9e5(0x55d))+'\x20['+_0x5289af[_0x15f9e5(0x2f3)]?.[_0x15f9e5(0x3eb)][_0x15f9e5(0x759)](_0x15f9e5(0x6c2),'')+_0x15f9e5(0x20b)+_0x5289af['messageType']+')'),_0x5289af[_0x15f9e5(0x539)]?.['text']&&this[_0x15f9e5(0x7a2)][_0x15f9e5(0x834)](_0x51b258[_0x15f9e5(0x2f3)]['id']+':\x20'+_0x5289af[_0x15f9e5(0x539)]?.[_0x15f9e5(0x4e1)]),await this[_0x15f9e5(0x402)]['message'][_0x15f9e5(0x477)]([_0x5289af],this[_0x15f9e5(0x664)][_0x15f9e5(0x60f)]),this[_0x15f9e5(0x3d7)](_0x15f9e5(0x917),_0x5289af),q(this[_0x15f9e5(0x8ba)],_0x15f9e5(0x92e),{'message':_0x5289af}),_0x51b258[_0x15f9e5(0x2f3)]['remoteJid']!=='status@broadcast'&&await this['updateChatWithMessage'](_0x578a24,_0x5289af,_0x15f9e5(0x204));}},'messages.update':async(_0x38ecb1,_0x201255)=>{const _0x16cbf2=_0x286814;let _0x3ef3a6={0x0:_0x16cbf2(0x3f9),0x1:_0x16cbf2(0x490),0x2:_0x16cbf2(0x21d),0x3:_0x16cbf2(0x245),0x4:_0x16cbf2(0x72b),0x5:_0x16cbf2(0x5d2)};for await(let {key:_0x364b40,update:_0x1a2f4e}of _0x38ecb1){if(this[_0x16cbf2(0x590)]?.['groups_ignore']&&_0x364b40[_0x16cbf2(0x3eb)]['includes'](_0x16cbf2(0x5dd))){this['logger']['verbose'](this[_0x16cbf2(0x8ba)]+'\x20('+this['instance']['wuid']+_0x16cbf2(0x71c));return;}if(_0x364b40['remoteJid']!==_0x16cbf2(0x5c4)){let _0x942a5e=Date[_0x16cbf2(0x37f)](),_0xd0a5c2;_0x1a2f4e[_0x16cbf2(0x923)]===null&&_0x1a2f4e[_0x16cbf2(0x8aa)]===void 0x0?_0xd0a5c2='DELETED':_0xd0a5c2=_0x3ef3a6[_0x1a2f4e['status']];let _0x51ca99=_0x364b40[_0x16cbf2(0x3eb)][_0x16cbf2(0x759)](/:\d{1,2}@/g,'@'),_0x2718c1={..._0x364b40,'remoteJid':_0x51ca99,'status':_0xd0a5c2,'datetime':_0x942a5e,'owner':this[_0x16cbf2(0x664)]['wuid']};this['sendDataWebhook'](_0x16cbf2(0x8b4),_0x2718c1),await this[_0x16cbf2(0x25c)](_0x364b40,_0x2718c1);}}},'labels.association':async({type:_0x5310bb,association:_0x947079})=>{const _0x24c8f8=_0x286814;if(_0x947079['type']===_0x24c8f8(0x3ad)){let _0x1b89ba,_0x5847d9=0x0;for(;!_0x1b89ba&&_0x5847d9<this['delayChatLabel_MAX_RETRIES'];)_0x1b89ba=await this[_0x24c8f8(0x402)][_0x24c8f8(0x617)][_0x24c8f8(0x63f)]({'where':{'_id':_0x947079['chatId']}},this[_0x24c8f8(0x664)][_0x24c8f8(0x60f)]),_0x1b89ba||(_0x5847d9++,this['logger'][_0x24c8f8(0x7f7)](this['instanceName']+'\x20('+this[_0x24c8f8(0x664)][_0x24c8f8(0x60f)]+_0x24c8f8(0x36e)+_0x947079['chatId']+_0x24c8f8(0x1e1)+this[_0x24c8f8(0x754)]+'ms\x20(tentativa\x20'+_0x5847d9+'/'+this[_0x24c8f8(0x27a)]+')'),await this[_0x24c8f8(0x1f3)](this[_0x24c8f8(0x754)]));if(!_0x1b89ba){this[_0x24c8f8(0x7a2)][_0x24c8f8(0x2c2)](_0x24c8f8(0x2c4)+_0x947079[_0x24c8f8(0x650)]+_0x24c8f8(0x758)+this[_0x24c8f8(0x27a)]+'\x20tentativas.');return;}switch(_0x5310bb){case'add':console['log'](_0x947079),await this['repository'][_0x24c8f8(0x617)][_0x24c8f8(0x2d5)]({'where':{'_id':_0x947079['chatId']}},{'leadInfo.etiquetas':_0x947079[_0x24c8f8(0x279)]},this['instance'][_0x24c8f8(0x60f)],void 0x0,_0x24c8f8(0x925));break;case'remove':console[_0x24c8f8(0x834)](_0x947079),await this[_0x24c8f8(0x402)]['chat'][_0x24c8f8(0x2d5)]({'where':{'_id':_0x947079[_0x24c8f8(0x650)]}},{'leadInfo.etiquetas':_0x947079[_0x24c8f8(0x279)]},this[_0x24c8f8(0x664)][_0x24c8f8(0x60f)],void 0x0,_0x24c8f8(0x254));break;default:this[_0x24c8f8(0x7a2)][_0x24c8f8(0x2c2)](_0x24c8f8(0x3dc)+_0x5310bb+']');}}},'labels.edit':async _0x13c460=>{const _0x17dffb=_0x286814;if(!_0x13c460||!_0x13c460['id']){this['logger'][_0x17dffb(0x2c2)](_0x17dffb(0x4ea));return;}if(!_0x13c460[_0x17dffb(0x5a1)]){let _0x5cdb97=[_0x17dffb(0x212),'#64c4ff','#fed428',_0x17dffb(0x203),_0x17dffb(0x918),_0x17dffb(0x70c),_0x17dffb(0x5c6),_0x17dffb(0x4d0),'#6f7bcf',_0x17dffb(0x235),_0x17dffb(0x767),_0x17dffb(0x760),_0x17dffb(0x308),'#f64847',_0x17dffb(0x4c7),'#83e421',_0x17dffb(0x8d9),_0x17dffb(0x32c),_0x17dffb(0x8ed),_0x17dffb(0x5c9)],_0xf3ff9c;typeof _0x13c460['color']==_0x17dffb(0x6f9)&&_0x13c460[_0x17dffb(0x80b)]>=0x0&&_0x13c460[_0x17dffb(0x80b)]<_0x5cdb97[_0x17dffb(0x786)]?_0xf3ff9c=_0x5cdb97[_0x13c460['color']]:(this[_0x17dffb(0x7a2)]['error']('Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20'+_0x13c460[_0x17dffb(0x80b)]),_0xf3ff9c=_0x17dffb(0x4c9));let _0x30e590={'_id':_0x13c460['id'],'colorHex':_0xf3ff9c,'color':_0x13c460?.[_0x17dffb(0x80b)],'name':_0x13c460?.[_0x17dffb(0x8b9)],'owner':this[_0x17dffb(0x664)][_0x17dffb(0x60f)]};await this[_0x17dffb(0x402)][_0x17dffb(0x47b)][_0x17dffb(0x2d5)]({'where':{'_id':_0x13c460['id']}},_0x30e590,this[_0x17dffb(0x664)][_0x17dffb(0x60f)]),this['logger']['info'](this[_0x17dffb(0x8ba)]+'\x20('+this['instance'][_0x17dffb(0x60f)]+'):\x20Rótulo\x20atualizado:\x20'+_0x13c460);}_0x13c460[_0x17dffb(0x5a1)]&&(await this[_0x17dffb(0x402)][_0x17dffb(0x47b)][_0x17dffb(0x65e)]({'where':{'_id':_0x13c460['id']}},this[_0x17dffb(0x664)][_0x17dffb(0x60f)]),this['logger'][_0x17dffb(0x7f7)](_0x17dffb(0x558)+_0x13c460['id']));}},this[_0x286814(0x366)]={'groups.upsert':async _0x47681e=>{const _0x1f238e=_0x286814;this[_0x1f238e(0x590)]?.['groups_ignore']||this[_0x1f238e(0x3d7)](_0x1f238e(0x2d9),_0x47681e);for(let _0x4b5fd7 of _0x47681e)await this[_0x1f238e(0x7c4)](_0x4b5fd7);},'groups.update':async _0x358bf0=>{const _0x394b07=_0x286814;this[_0x394b07(0x590)]?.[_0x394b07(0x872)]||this[_0x394b07(0x3d7)](_0x394b07(0x7e1),_0x358bf0);for(let _0xc25d48 of _0x358bf0)await this[_0x394b07(0x7c4)](_0xc25d48);},'group-participants.update':async _0x37126a=>{const _0x55dd5d=_0x286814;this[_0x55dd5d(0x590)]?.['groups_ignore']||this[_0x55dd5d(0x3d7)](_0x55dd5d(0x3f8),_0x37126a),await this['updateGroupParticipantsWebhook'](_0x37126a);}},this[_0x286814(0x27a)]=0x5,this[_0x286814(0x754)]=0x1388,this['lastRealGroupsFetch']=0x0,this[_0x286814(0x338)]=async _0x17d6d4=>{const _0x55b2e1=_0x286814;if(_0x17d6d4[_0x55b2e1(0x923)]?.[_0x55b2e1(0x4c2)]){let _0x5d6c90=await this['getMessage'](_0x17d6d4[_0x55b2e1(0x923)][_0x55b2e1(0x4c2)][_0x55b2e1(0x290)],!0x0);if(_0x5d6c90){let _0x30a4dd=_0x5d6c90[_0x55b2e1(0x2f3)][_0x55b2e1(0x288)]?this[_0x55b2e1(0x664)][_0x55b2e1(0x60f)]+_0x55b2e1(0x6c2):_0x5d6c90['key'][_0x55b2e1(0x292)]||_0x5d6c90[_0x55b2e1(0x2f3)][_0x55b2e1(0x3eb)],_0x42d2bc=_0x5d6c90[_0x55b2e1(0x2f3)]['id'],_0x568da4=_0x5d6c90[_0x55b2e1(0x923)],_0x3312c1=Buffer[_0x55b2e1(0x654)](_0x568da4[_0x55b2e1(0x710)][_0x55b2e1(0x42e)][_0x55b2e1(0x27d)](_0x55b2e1(0x40d)),_0x55b2e1(0x40d)),_0x517a24=(0x0,w['decryptPollVote'])(_0x17d6d4[_0x55b2e1(0x923)]['pollUpdateMessage'][_0x55b2e1(0x878)],{'pollCreatorJid':_0x30a4dd,'pollMsgId':_0x42d2bc,'pollEncKey':_0x3312c1,'voterJid':_0x17d6d4[_0x55b2e1(0x2f3)]['fromMe']?this[_0x55b2e1(0x664)]['wuid']+_0x55b2e1(0x6c2):_0x17d6d4[_0x55b2e1(0x2f3)][_0x55b2e1(0x3eb)][_0x55b2e1(0x3ea)](_0x55b2e1(0x611))?_0x17d6d4[_0x55b2e1(0x2f3)][_0x55b2e1(0x292)]:_0x17d6d4[_0x55b2e1(0x2f3)]['remoteJid']}),_0x53d64b=[],_0x10e694=_0x517a24[_0x55b2e1(0x335)][_0x55b2e1(0x41b)](_0x265461=>Buffer[_0x55b2e1(0x654)](_0x265461)[_0x55b2e1(0x27d)](_0x55b2e1(0x40d)));for(let {optionName:_0x25673a}of _0x568da4['pollCreationMessage']?.[_0x55b2e1(0x5c1)]||_0x568da4[_0x55b2e1(0x842)]?.[_0x55b2e1(0x5c1)]||_0x568da4[_0x55b2e1(0x810)]?.[_0x55b2e1(0x5c1)])_0x10e694[_0x55b2e1(0x3ee)]((0x0,w['sha256'])(Buffer['from'](_0x25673a))[_0x55b2e1(0x27d)](_0x55b2e1(0x40d)))>-0x1&&_0x53d64b[_0x55b2e1(0x4e8)](_0x25673a);return _0x53d64b;}}return null;},this['normalizeMessage']=(_0x113f04,_0x5d67f6,_0x58816f)=>{const _0x5ba107=_0x286814;try{let _0x48dac6=_0x113f04?(0x0,w[_0x5ba107(0x56d)])(_0x113f04)[_0x5d67f6]:void 0x0,_0x2c6364={},_0x1dbc67=null,_0x4928a6=null,_0x46e69c=null;_0x5d67f6===_0x5ba107(0x2be)&&_0x48dac6?.[_0x5ba107(0x6f1)]&&(_0x5d67f6=(0x0,w['getContentType'])(_0x48dac6[_0x5ba107(0x6f1)]),_0x1dbc67=_0x113f04[_0x5ba107(0x2be)]['key']['id'],_0x48dac6=_0x113f04[_0x5ba107(0x2be)][_0x5ba107(0x6f1)][_0x5d67f6]),_0x113f04[_0x5d67f6]?.[_0x5ba107(0x4fd)]?.['stanzaId']&&_0x113f04[_0x5d67f6]?.[_0x5ba107(0x4fd)]?.['quotedMessage']&&(_0x4928a6=_0x113f04[_0x5d67f6][_0x5ba107(0x4fd)][_0x5ba107(0x67a)]),_0x113f04[_0x5ba107(0x813)]&&(_0x46e69c=_0x113f04[_0x5ba107(0x813)][_0x5ba107(0x2f3)]['id']);let _0x5b1826;if(_0x48dac6&&typeof _0x48dac6==_0x5ba107(0x4bd)&&_0x5ba107(0x290)in _0x48dac6&&({pollCreationMessageKey:_0x5b1826}=_0x48dac6),_0x5d67f6===_0x5ba107(0x244)||_0x5d67f6==='pollCreationMessageV2'||_0x5d67f6===_0x5ba107(0x842)){let _0x3307e5=_0x48dac6[_0x5ba107(0x5c1)][_0x5ba107(0x41b)](_0x2960c3=>_0x2960c3[_0x5ba107(0x6ae)])[_0x5ba107(0x6ca)]('|');_0x2c6364[_0x5ba107(0x446)]=_0x3307e5;}let _0x26eb0a='';if(_0x48dac6&&(_0x26eb0a+=_0x48dac6[_0x5ba107(0x8b9)]?_0x48dac6['name']:'',_0x26eb0a+=_0x48dac6['caption']?'\x20'+_0x48dac6[_0x5ba107(0x312)]:'',_0x26eb0a+=_0x48dac6[_0x5ba107(0x8e8)]?'\x20'+_0x48dac6[_0x5ba107(0x8e8)]:'',_0x26eb0a+=_0x48dac6[_0x5ba107(0x368)]?'\x20'+_0x48dac6[_0x5ba107(0x368)]:''),_0x5d67f6===_0x5ba107(0x57c)){_0x26eb0a=(_0x48dac6[_0x5ba107(0x416)]||'')+'\x0a'+(_0x48dac6['description']||'')+'\x0a'+(_0x48dac6[_0x5ba107(0x504)]||'');let _0x3892ca=this['sectionsToString'](_0x48dac6[_0x5ba107(0x874)]);_0x2c6364[_0x5ba107(0x446)]=_0x3892ca;}if(_0x5d67f6===_0x5ba107(0x299)&&(_0x58816f=_0x48dac6[_0x5ba107(0x416)]),_0x48dac6&&_0x48dac6[_0x5ba107(0x28a)]){let _0x4cd4f4=this['formatVCard'](JSON[_0x5ba107(0x5f3)](_0x48dac6[_0x5ba107(0x28a)],null,0x2));_0x26eb0a=_0x26eb0a+'\x0a'+_0x4cd4f4;}if(_0x48dac6){let {sections:_0x27d4f6,listType:_0x395b7b,displayName:_0x5b46b6,vcard:_0x53bde9,contactVcard:_0x553f43,name:_0x55332b,caption:_0xc955bf,conversation:_0x2a7f0f,pollCreationMessageKey:_0xb992d7,footerText:_0x16aac6,contentText:_0x3f612c,pageCount:_0x5dcbcc,headerType:_0x27f883,isAvatar:_0x3938e3,isAnimated:_0xa49f65,fallbackLc:_0x4f8777,fallbackLg:_0x1693b8,namespace:_0x1bf03d,elementName:_0x13e569,localizableParams:_0x463156,viewOnce:_0x286bb1,height:_0x3bb5ae,width:_0x3924ae,key:_0x13ad44,firstScanLength:_0x29487f,firstScanSidecar:_0x54685c,gifPlayback:_0x238fce,gifAttribution:_0x47cf3f,midQualityFileSha256:_0x2b6d7f,scansSidecar:_0x33d26d,streamingSidecar:_0x33d101,thumbnailHeight:_0x351a44,thumbnailWidth:_0x3807e4,thumbnailEncSha256:_0x1c8ca3,thumbnailDirectPath:_0x1656f0,canonicalUrl:_0x3dd601,matchedText:_0x265101,previewType:_0x59aa34,thumbnailSha256:_0x10ab22,deviceListMetadataVersion:_0x34d8b5,inviteLinkGroupTypeV2:_0x5f3ad6,interactiveAnnotations:_0x30544a,scanLengths:_0x49a1cf,jpegThumbnail:_0x46b87e,url:_0x2f1217,mediaKeyTimestamp:_0x396699,waveform:_0xadbed5,stickerSentTs:_0x4592b6,firstFrameLength:_0x1e913d,fileEncSha256:_0x587feb,contextInfo:_0x75b15c,firstFrameSidecar:_0x17db5e,directPath:_0x5369b2,fileSha256:_0x5ab5dd,mediaKey:_0x25671c,senderTimestampMs:_0x5a20d7,..._0xedd6bf}=_0x48dac6;(_0x5d67f6===_0x5ba107(0x57c)||_0x5d67f6===_0x5ba107(0x299))&&(delete _0xedd6bf[_0x5ba107(0x416)],delete _0xedd6bf[_0x5ba107(0x464)]),typeof _0x48dac6==_0x5ba107(0x6f2)?_0x2c6364={'text':_0x48dac6,'type':_0x5d67f6||_0x5ba107(0x8e8),..._0x1dbc67&&{'edited':_0x1dbc67},..._0x4928a6&&{'quoted':_0x4928a6},..._0x46e69c&&{'reaction':_0x46e69c}}:_0x2c6364={'text':_0x26eb0a,..._0xedd6bf,..._0x5d67f6==='pollUpdateMessage'?{'poll_id':_0x48dac6[_0x5ba107(0x290)]['id'],'quoted':_0x48dac6['pollCreationMessageKey']['id'],'vote':_0x58816f}:{},..._0x5d67f6==='listResponseMessage'?{'vote':_0x58816f}:{},'type':_0x5d67f6,..._0x1dbc67&&{'edited':_0x1dbc67},..._0x4928a6&&{'quoted':_0x4928a6},..._0x46e69c&&{'reaction':_0x46e69c},...(_0x5d67f6==='pollCreationMessage'||_0x5d67f6===_0x5ba107(0x810)||_0x5d67f6===_0x5ba107(0x842)||_0x5d67f6==='listMessage')&&{'convertedOptions':_0x2c6364[_0x5ba107(0x446)]}};}return{'messageType':_0x5d67f6,'messageContent':_0x48dac6,'message_normalized':_0x2c6364};}catch(_0x13a0a1){return this[_0x5ba107(0x7a2)]['error'](_0x5ba107(0x39a)+_0x13a0a1),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this[_0x286814(0x647)]=new Ls[(_0x286814(0x7fb))](),this['checkMutex']=new Ls['Mutex'](),this[_0x286814(0x7fa)]=null,this[_0x286814(0x5ab)]=[],(this[_0x286814(0x8d1)](),this[_0x286814(0x664)]['qrcode']={'count':0x0},this[_0x286814(0x664)][_0x286814(0x352)]={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}set[a0_0x20331d(0x8ba)](_0x9a5f58){const _0x17e22b=a0_0x20331d;if(!_0x9a5f58){this[_0x17e22b(0x664)][_0x17e22b(0x8b9)]=(0x0,xi['v4'])();return;}this[_0x17e22b(0x664)]['name']=_0x9a5f58,this['sendDataWebhook'](_0x17e22b(0x2c7),{'instance':this[_0x17e22b(0x664)][_0x17e22b(0x8b9)],'status':'created'});}get[a0_0x20331d(0x8ba)](){const _0x2dff51=a0_0x20331d;return this['instance'][_0x2dff51(0x8b9)];}get[a0_0x20331d(0x60f)](){const _0x5ea822=a0_0x20331d;return this[_0x5ea822(0x664)]['wuid'];}async['getProfileName'](){const _0x2e316d=a0_0x20331d;let _0x268d1a=this['client'][_0x2e316d(0x34e)]?.[_0x2e316d(0x8b9)]??this['client'][_0x2e316d(0x34e)]?.[_0x2e316d(0x346)];if(!_0x268d1a){if(this[_0x2e316d(0x373)]['get']('DATABASE')[_0x2e316d(0x56c)]){let _0x55ffbf=await R[_0x2e316d(0x4ce)]()['db'](this[_0x2e316d(0x373)]['get'](_0x2e316d(0x8c2))[_0x2e316d(0x8e5)][_0x2e316d(0x667)]+'-instances')[_0x2e316d(0x2cd)](this[_0x2e316d(0x8ba)])[_0x2e316d(0x63f)]({'_id':_0x2e316d(0x854)});if(_0x55ffbf){let _0x4722bf=JSON[_0x2e316d(0x79b)](JSON[_0x2e316d(0x5f3)](_0x55ffbf),w[_0x2e316d(0x83d)]['reviver']);_0x268d1a=_0x4722bf['me']?.[_0x2e316d(0x8b9)]||_0x4722bf['me']?.[_0x2e316d(0x346)];}}else{if((0x0,Fe[_0x2e316d(0x5f0)])((0x0,j[_0x2e316d(0x6ca)])(Me,this['instanceName'],_0x2e316d(0x433)))){let _0x33f315=JSON[_0x2e316d(0x79b)]((0x0,Fe['readFileSync'])((0x0,j['join'])(Me,this[_0x2e316d(0x8ba)],'creds.json'),{'encoding':_0x2e316d(0x50d)}));_0x268d1a=_0x33f315['me']?.[_0x2e316d(0x8b9)]||_0x33f315['me']?.['verifiedName'];}}}return _0x268d1a;}get['profilePictureUrl'](){return this['instance']['profilePictureUrl'];}get[a0_0x20331d(0x5cd)](){const _0x1effd7=a0_0x20331d;return this['instance']['qrcode']?.[_0x1effd7(0x800)]?{'pairingCode':this[_0x1effd7(0x664)][_0x1effd7(0x8ef)]?.['pairingCode']}:{'code':this['instance'][_0x1effd7(0x8ef)]?.[_0x1effd7(0x79f)],'base64':this['instance'][_0x1effd7(0x8ef)]?.[_0x1effd7(0x588)]};}async[a0_0x20331d(0x4d7)](){const _0x515b40=a0_0x20331d;let _0x312330=await this[_0x515b40(0x402)][_0x515b40(0x603)][_0x515b40(0x691)](this[_0x515b40(0x8ba)]);this[_0x515b40(0x590)]['url']=_0x312330?.[_0x515b40(0x562)],this[_0x515b40(0x590)][_0x515b40(0x349)]=_0x312330?.[_0x515b40(0x349)],this['localWebhook']['local_map']=_0x312330?.['local_map'],this[_0x515b40(0x590)][_0x515b40(0x7cd)]=_0x312330?.[_0x515b40(0x7cd)],this[_0x515b40(0x590)][_0x515b40(0x3ab)]=_0x312330?.[_0x515b40(0x3ab)],this[_0x515b40(0x590)]['SEND_MESSAGE']=_0x312330?.['SEND_MESSAGE'],this[_0x515b40(0x590)][_0x515b40(0x204)]=_0x312330?.[_0x515b40(0x204)],this[_0x515b40(0x590)][_0x515b40(0x899)]=_0x312330?.[_0x515b40(0x899)],this['localWebhook'][_0x515b40(0x64c)]=_0x312330?.[_0x515b40(0x64c)],this[_0x515b40(0x590)][_0x515b40(0x855)]=_0x312330?.[_0x515b40(0x855)],this[_0x515b40(0x590)][_0x515b40(0x37d)]=_0x312330?.['GROUP_PARTICIPANTS_UPDATE'],this[_0x515b40(0x590)][_0x515b40(0x3f6)]=_0x312330?.[_0x515b40(0x3f6)],this[_0x515b40(0x590)][_0x515b40(0x66c)]=_0x312330?.['CHATS_UPSERT'],this[_0x515b40(0x590)][_0x515b40(0x217)]=_0x312330?.['CHATS_UPDATE'],this[_0x515b40(0x590)][_0x515b40(0x543)]=_0x312330?.[_0x515b40(0x543)],this[_0x515b40(0x590)]['CONTACTS_SET']=_0x312330?.[_0x515b40(0x475)],this[_0x515b40(0x590)][_0x515b40(0x306)]=_0x312330?.[_0x515b40(0x306)],this[_0x515b40(0x590)][_0x515b40(0x910)]=_0x312330?.[_0x515b40(0x910)],this[_0x515b40(0x590)][_0x515b40(0x300)]=_0x312330?.[_0x515b40(0x300)],this['localWebhook'][_0x515b40(0x389)]=_0x312330?.[_0x515b40(0x389)],this['localWebhook'][_0x515b40(0x78c)]=_0x312330?.['CONNECTION_UPDATE'],this[_0x515b40(0x590)][_0x515b40(0x872)]=_0x312330?.[_0x515b40(0x872)];}async['setWebhook'](_0x1f0a72){const _0x2937fc=a0_0x20331d;let _0x4b76f2=[_0x2937fc(0x53e),_0x2937fc(0x562),'enabled',_0x2937fc(0x53c),_0x2937fc(0x7cd),_0x2937fc(0x3ab),_0x2937fc(0x899),_0x2937fc(0x204),_0x2937fc(0x5dc),_0x2937fc(0x64c),_0x2937fc(0x855),'GROUP_PARTICIPANTS_UPDATE',_0x2937fc(0x3f6),_0x2937fc(0x66c),_0x2937fc(0x217),_0x2937fc(0x543),_0x2937fc(0x475),_0x2937fc(0x306),'CONTACTS_UPDATE','PRESENCE_UPDATE',_0x2937fc(0x389),_0x2937fc(0x78c),_0x2937fc(0x872)],_0x145a8d={};return _0x4b76f2[_0x2937fc(0x22b)](_0x49b473=>{_0x1f0a72[_0x49b473]!==void 0x0&&(_0x145a8d[_0x49b473]=_0x1f0a72[_0x49b473]);}),_0x145a8d[_0x2937fc(0x562)]&&(_0x145a8d['url']=_0x145a8d[_0x2937fc(0x562)][_0x2937fc(0x291)]()),await this[_0x2937fc(0x402)]['webhook'][_0x2937fc(0x260)](_0x145a8d,this['instanceName']),Object[_0x2937fc(0x2df)](this[_0x2937fc(0x590)],_0x145a8d),await this['repository'][_0x2937fc(0x603)]['find'](this[_0x2937fc(0x8ba)]);}async[a0_0x20331d(0x242)](){const _0x341c3d=a0_0x20331d;return await this['repository'][_0x341c3d(0x603)][_0x341c3d(0x691)](this[_0x341c3d(0x8ba)]);}async['sendDataWebhook'](_0x11da51,_0x4caaad){const _0x37027d=a0_0x20331d;let _0x50f7f8=_0x11da51['replace'](/[\.-]/gm,'_')[_0x37027d(0x5ad)](),_0x4acb8a=this[_0x37027d(0x590)][_0x37027d(0x349)]&&(0x0,L[_0x37027d(0x58b)])(this[_0x37027d(0x590)][_0x37027d(0x562)])?this[_0x37027d(0x590)][_0x37027d(0x562)]+(this[_0x37027d(0x590)][_0x37027d(0x53c)]?this['webhookMap'][_0x11da51]:''):null,_0x286a10=this[_0x37027d(0x590)][_0x50f7f8],_0x54db5a=me&&me[_0x37027d(0x349)]&&(0x0,L[_0x37027d(0x58b)])(me[_0x37027d(0x562)])?me[_0x37027d(0x562)]+(me[_0x37027d(0x53c)]?this[_0x37027d(0x7a7)][_0x11da51]:''):null,_0x115d2d=me?me[_0x50f7f8]:null;if(_0x286a10&&_0x4acb8a)try{await te[_0x37027d(0x42b)][_0x37027d(0x260)]({'baseURL':_0x4acb8a})[_0x37027d(0x21c)]('',{'event':_0x11da51,'instance':this['instance'][_0x37027d(0x8b9)],'apikey':this[_0x37027d(0x664)][_0x37027d(0x450)],'data':_0x4caaad}),this['logger']['log'](this[_0x37027d(0x8ba)]+'\x20('+this['instance'][_0x37027d(0x60f)]+_0x37027d(0x8a2)+_0x11da51+':\x20'+_0x4acb8a);}catch{this['logger'][_0x37027d(0x2c2)](this[_0x37027d(0x8ba)]+'\x20('+this[_0x37027d(0x664)][_0x37027d(0x60f)]+'):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0x11da51+':\x20'+_0x4acb8a);}if(_0x115d2d&&_0x54db5a)try{await te['default'][_0x37027d(0x260)]({'baseURL':_0x54db5a})[_0x37027d(0x21c)]('',{'event':_0x11da51,'instance':this[_0x37027d(0x664)][_0x37027d(0x8b9)],'apikey':this[_0x37027d(0x664)][_0x37027d(0x450)],'data':_0x4caaad}),this[_0x37027d(0x7a2)]['log'](this[_0x37027d(0x8ba)]+'\x20('+this['instance'][_0x37027d(0x60f)]+_0x37027d(0x30a)+_0x11da51+':\x20'+_0x54db5a);}catch{this[_0x37027d(0x7a2)]['error'](this[_0x37027d(0x8ba)]+'\x20('+this[_0x37027d(0x664)][_0x37027d(0x60f)]+_0x37027d(0x362)+_0x11da51+':\x20'+_0x54db5a);}}async['connectionUpdate']({qr:_0x1bd396,connection:_0x2d4ee2,lastDisconnect:_0x27108e}){const _0x20507=a0_0x20331d;if(_0x1bd396){if(this[_0x20507(0x664)][_0x20507(0x8ef)][_0x20507(0x846)]===Uo)return this['sendDataWebhook'](_0x20507(0x612),{'message':'Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','statusCode':w['DisconnectReason'][_0x20507(0x54d)]}),this[_0x20507(0x904)]={'state':_0x20507(0x736),'statusReason':w['DisconnectReason'][_0x20507(0x43b)]},this[_0x20507(0x3d7)](_0x20507(0x2e4),{'instance':this[_0x20507(0x664)][_0x20507(0x8b9)],...this[_0x20507(0x904)]}),this['sendDataWebhook'](_0x20507(0x2c7),{'instance':this[_0x20507(0x664)][_0x20507(0x8b9)],'status':'removed'}),this['repository'][_0x20507(0x4e2)][_0x20507(0x65e)](this[_0x20507(0x664)][_0x20507(0x8b9)]),this[_0x20507(0x864)]=!0x0,re[_0x20507(0x5a5)](K,this[_0x20507(0x664)][_0x20507(0x8b9)]),this[_0x20507(0x2f6)][_0x20507(0x702)]('no.connection',this[_0x20507(0x664)][_0x20507(0x8b9)]);this[_0x20507(0x664)][_0x20507(0x8ef)][_0x20507(0x846)]++;let _0x407e8f={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x20507(0x843),'dark':_0x20507(0x4c9)}};Di[_0x20507(0x42b)][_0x20507(0x82b)](_0x1bd396,_0x407e8f,(_0x490f30,_0x13ca69)=>{const _0x5f202c=_0x20507;if(_0x490f30){this[_0x5f202c(0x7a2)]['error'](this[_0x5f202c(0x8ba)]+'\x20('+this[_0x5f202c(0x664)][_0x5f202c(0x60f)]+_0x5f202c(0x5da)+(_0x490f30 instanceof Error?_0x490f30[_0x5f202c(0x923)]:JSON[_0x5f202c(0x5f3)](_0x490f30,null,0x2)));return;}this['instance'][_0x5f202c(0x8ef)][_0x5f202c(0x588)]=_0x13ca69,this[_0x5f202c(0x664)]['qrcode']['code']=_0x1bd396,!this[_0x5f202c(0x623)]&&this[_0x5f202c(0x3d7)](_0x5f202c(0x612),{'qrcode':{'instance':this[_0x5f202c(0x664)][_0x5f202c(0x8b9)],'pairingCode':this[_0x5f202c(0x664)][_0x5f202c(0x8ef)]['pairingCode'],'code':_0x1bd396,'base64':_0x13ca69}});}),this[_0x20507(0x623)]?this[_0x20507(0x664)][_0x20507(0x8ef)]['pairingCode']||(await(0x0,w['delay'])(0x7d0),this[_0x20507(0x664)]['qrcode'][_0x20507(0x800)]=await this['client']['requestPairingCode'](this[_0x20507(0x623)])):this[_0x20507(0x664)][_0x20507(0x8ef)][_0x20507(0x800)]=null,Pi[_0x20507(0x42b)][_0x20507(0x82c)](_0x1bd396,{'small':!0x0},_0x281de3=>this[_0x20507(0x7a2)][_0x20507(0x834)](_0x20507(0x7a4)+this['instance'][_0x20507(0x8b9)]+_0x20507(0x556)+this[_0x20507(0x664)][_0x20507(0x8ef)][_0x20507(0x846)]+_0x20507(0x6b7)+this[_0x20507(0x664)][_0x20507(0x8ef)][_0x20507(0x800)]+_0x20507(0x5a6)+_0x281de3));}if(_0x2d4ee2&&(this[_0x20507(0x904)]={'state':_0x2d4ee2,'statusReason':_0x27108e?.[_0x20507(0x2c2)]?.['output']?.[_0x20507(0x409)]??0xc8},this[_0x20507(0x3d7)]('connection.update',{'instance':this[_0x20507(0x664)][_0x20507(0x8b9)],...this[_0x20507(0x904)]})),_0x2d4ee2===_0x20507(0x8fe)){if(this[_0x20507(0x52a)]++,this[_0x20507(0x926)]['push'](Date[_0x20507(0x37f)]()),this['reconnectTimestamps']=this[_0x20507(0x926)]['filter'](_0x488eeb=>Date[_0x20507(0x37f)]()-_0x488eeb<this[_0x20507(0x2fa)]),_0x27108e[_0x20507(0x2c2)]?.[_0x20507(0x436)]?.[_0x20507(0x409)]!==w[_0x20507(0x896)][_0x20507(0x3b7)]){let _0x335597=this[_0x20507(0x52a)]<=0x1?0x0:Math[_0x20507(0x841)](Math[_0x20507(0x36b)](0x2,this[_0x20507(0x52a)]-0x1)*0x3e8,0x493e0);console['log'](this[_0x20507(0x8ba)]+'\x20Tentativa\x20de\x20reconexão\x20'+this[_0x20507(0x52a)]+_0x20507(0x785)+_0x335597/0x3e8+_0x20507(0x201)),await new Promise(_0xa8a88d=>setTimeout(_0xa8a88d,_0x335597)),console['log'](_0x20507(0x3d5)),await this[_0x20507(0x6a2)]();}else{this[_0x20507(0x3d7)](_0x20507(0x2c7),{'instance':this[_0x20507(0x664)]['name'],'status':_0x20507(0x435)}),this[_0x20507(0x664)][_0x20507(0x352)][_0x20507(0x397)]=!0x1,this[_0x20507(0x402)]['webhook'][_0x20507(0x65e)](this[_0x20507(0x8ba)]),this['repository'][_0x20507(0x4e2)][_0x20507(0x260)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x20507(0x37f)]()},this[_0x20507(0x664)]['name']),re[_0x20507(0x5a5)](K,this[_0x20507(0x664)][_0x20507(0x8b9)]);try{this[_0x20507(0x7a2)][_0x20507(0x7a9)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x20507(0x44a));let _0x5e247f=await this[_0x20507(0x402)][_0x20507(0x923)][_0x20507(0x321)](this['instance'][_0x20507(0x60f)]);_0x5e247f[_0x20507(0x1ed)]?this[_0x20507(0x7a2)][_0x20507(0x7a9)](this[_0x20507(0x8ba)]+'\x20('+this['instance']['wuid']+_0x20507(0x651)):this[_0x20507(0x7a2)][_0x20507(0x2c2)](_0x20507(0x685)+_0x5e247f['error']);}catch(_0xd183f2){this[_0x20507(0x7a2)][_0x20507(0x2c2)](_0x20507(0x8b3)+_0xd183f2[_0x20507(0x923)]);}this[_0x20507(0x664)][_0x20507(0x352)][_0x20507(0x5f1)]!==null&&(this[_0x20507(0x7a2)][_0x20507(0x7a9)](this['instanceName']+'\x20('+this[_0x20507(0x664)][_0x20507(0x60f)]+_0x20507(0x518)),clearInterval(this[_0x20507(0x664)][_0x20507(0x352)]['delayMessage']),this[_0x20507(0x664)][_0x20507(0x352)][_0x20507(0x5f1)]=null),this['logger'][_0x20507(0x7a9)](this['instanceName']+'\x20('+this[_0x20507(0x664)]['wuid']+_0x20507(0x432)),this[_0x20507(0x246)]=null,this['eventEmitter'][_0x20507(0x702)](_0x20507(0x4d5),this['instance'][_0x20507(0x8b9)],'inner'),this['client']?.['ws']?.[_0x20507(0x8fe)](),this['client'][_0x20507(0x293)](new Error(_0x20507(0x7ff)));}}if(_0x2d4ee2===_0x20507(0x29f)){this[_0x20507(0x7a2)][_0x20507(0x365)](this[_0x20507(0x8ba)]+'\x20('+this[_0x20507(0x664)][_0x20507(0x60f)]+_0x20507(0x717)+this[_0x20507(0x8a4)][_0x20507(0x5c0)][_0x20507(0x854)]?.[_0x20507(0x426)]),this['client'][_0x20507(0x5c0)]['creds']?.[_0x20507(0x426)]||(this[_0x20507(0x7a2)][_0x20507(0x365)](this[_0x20507(0x8ba)]+'\x20('+this[_0x20507(0x664)][_0x20507(0x60f)]+_0x20507(0x39d)),this[_0x20507(0x8a4)]['ev'][_0x20507(0x1eb)]()),this[_0x20507(0x7f0)],this[_0x20507(0x664)][_0x20507(0x60f)]=this['client'][_0x20507(0x34e)]['id'][_0x20507(0x759)](/:\d+/,'')[_0x20507(0x759)]('@s.whatsapp.net',''),this[_0x20507(0x664)]['profilePictureUrl']=(await this['profilePicture'](this[_0x20507(0x664)]['wuid']+_0x20507(0x6c2)))[_0x20507(0x6ba)],this[_0x20507(0x402)][_0x20507(0x4e2)][_0x20507(0x260)]({'online':!0x0,'owner':this[_0x20507(0x664)]['wuid'],'lastDisconnect':null},this[_0x20507(0x664)][_0x20507(0x8b9)]);let _0x228b30=_0x20507(0x652)+this[_0x20507(0x664)][_0x20507(0x60f)],_0x4ce76c=0x28,_0x58a5f2=Math[_0x20507(0x60b)]((_0x4ce76c-_0x228b30[_0x20507(0x786)])/0x2),_0x372721='\x20'[_0x20507(0x41c)](_0x58a5f2),_0x3577b9=_0x20507(0x25e),_0x403c77='Instância:\x20'+this[_0x20507(0x664)][_0x20507(0x8b9)],_0x1f8367=(''+_0x372721+_0x228b30+_0x372721)[_0x20507(0x7da)](_0x4ce76c,'\x20'),_0x76eaff=(''+_0x372721+_0x3577b9+_0x372721)[_0x20507(0x7da)](_0x4ce76c,'\x20'),_0x4da5be=(''+_0x372721+_0x403c77+_0x372721)[_0x20507(0x7da)](_0x4ce76c,'\x20'),_0x44690f=Math[_0x20507(0x6d5)](_0x1f8367['length'],_0x76eaff[_0x20507(0x786)],_0x4da5be[_0x20507(0x786)]),_0x5ae0a5=_0x1f8367['padEnd'](_0x44690f,'\x20'),_0x3b48d7=_0x76eaff[_0x20507(0x7da)](_0x44690f,'\x20'),_0x9f0e4c=_0x4da5be['padEnd'](_0x44690f,'\x20');this[_0x20507(0x7a2)][_0x20507(0x7f7)](('\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌'+'─'[_0x20507(0x41c)](_0x44690f)+'┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0x3b48d7+_0x20507(0x4c3)+_0x9f0e4c+_0x20507(0x4c3)+_0x5ae0a5+_0x20507(0x485)+'─'['repeat'](_0x44690f)+'┘')[_0x20507(0x759)](/^ +/gm,'\x20\x20')),this['AutomateFunctions'](),this['instance'][_0x20507(0x352)][_0x20507(0x397)]=!0x0;}}[a0_0x20331d(0x7f0)](){this['reconnectAttempts']=0x0,this['reconnectTimestamps']=[];}async['getMessage'](_0x4a6ca8,_0x3b720c=!0x1){const _0x2208e9=a0_0x20331d;try{let _0x1bb26d=await this['repository'][_0x2208e9(0x923)][_0x2208e9(0x691)]({'where':{'_id':_0x4a6ca8['id']}},this[_0x2208e9(0x664)][_0x2208e9(0x60f)]);return _0x3b720c?_0x1bb26d[0x0]:_0x1bb26d[0x0][_0x2208e9(0x923)];}catch{return{'conversation':''};}}[a0_0x20331d(0x8d1)](){const _0x52737a=a0_0x20331d;let _0x4be07e=this[_0x52737a(0x373)][_0x52737a(0x51d)]('STORE'),_0x2aba77=this[_0x52737a(0x373)][_0x52737a(0x51d)](_0x52737a(0x8c2));_0x4be07e?.['CLEANING_INTERVAL']&&!_0x2aba77[_0x52737a(0x56c)]&&setInterval(()=>{const _0x3075fc=_0x52737a;try{for(let [_0x27677d,_0x57b563]of Object['entries'](_0x4be07e))_0x57b563===!0x0&&(0x0,Ue['execSync'])(_0x3075fc(0x6be)+(0x0,j['join'])(this[_0x3075fc(0x69f)],_0x27677d[_0x3075fc(0x6a5)](),this[_0x3075fc(0x664)][_0x3075fc(0x60f)])+_0x3075fc(0x8da));}catch{}},(_0x4be07e?.[_0x52737a(0x434)]??0xe10)*0x3e8);}async['defineAuthState'](){const _0x5557fb=a0_0x20331d;let _0x545db4=this[_0x5557fb(0x373)][_0x5557fb(0x51d)](_0x5557fb(0x8c2)),_0x4b04ce=this[_0x5557fb(0x373)][_0x5557fb(0x51d)](_0x5557fb(0x892));return _0x4b04ce?.['ENABLED']?await xs(_0x4b04ce,this[_0x5557fb(0x664)][_0x5557fb(0x8b9)]):_0x545db4[_0x5557fb(0x56c)]?await _s(this['instance']['name']):await(0x0,w[_0x5557fb(0x8ee)])((0x0,j[_0x5557fb(0x6ca)])(Me,this[_0x5557fb(0x664)][_0x5557fb(0x8b9)]));}async[a0_0x20331d(0x35e)](){const _0x196bcd=a0_0x20331d;let _0x43fe83=()=>Math[_0x196bcd(0x60b)](Math[_0x196bcd(0x636)]()*0x4e21)+0x7d0,_0x65780d=async()=>{const _0x58f46d=_0x196bcd;if(!this[_0x58f46d(0x664)][_0x58f46d(0x352)][_0x58f46d(0x397)]){this[_0x58f46d(0x7a2)][_0x58f46d(0x7a9)](this[_0x58f46d(0x8ba)]+'\x20('+this[_0x58f46d(0x664)][_0x58f46d(0x60f)]+_0x58f46d(0x6c7)),this['isRunning']=!0x1;return;}if(this['instance']['wuid']&&this[_0x58f46d(0x246)]&&this['instance'][_0x58f46d(0x352)]['delayMessage']!==null&&this[_0x58f46d(0x664)]['ScheduleMessage'][_0x58f46d(0x5f1)]!==void 0x0){let _0x420505=Math[_0x58f46d(0x2ee)](this['instance'][_0x58f46d(0x352)][_0x58f46d(0x5f1)]/0xea60);this[_0x58f46d(0x7a2)][_0x58f46d(0x7a9)](this[_0x58f46d(0x8ba)]+'\x20('+this[_0x58f46d(0x664)][_0x58f46d(0x60f)]+'):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20'+_0x420505+_0x58f46d(0x32f)),this[_0x58f46d(0x74d)]=!0x1;return;}else this[_0x58f46d(0x664)]['wuid']&&(this[_0x58f46d(0x7a2)]['verbose'](this[_0x58f46d(0x8ba)]+'\x20('+this[_0x58f46d(0x664)][_0x58f46d(0x60f)]+_0x58f46d(0x26a)),this[_0x58f46d(0x246)]||(await this[_0x58f46d(0x3df)](),this['findRealGroups'](),this['synchronizeAndMapFlows']()),(this[_0x58f46d(0x664)][_0x58f46d(0x352)]['delayMessage']===null||this['instance']['ScheduleMessage'][_0x58f46d(0x5f1)]===void 0x0)&&await this[_0x58f46d(0x835)]());if(this['isRunning']){let _0x57a9e5=_0x43fe83();this[_0x58f46d(0x7a2)][_0x58f46d(0x7a9)](this['instanceName']+_0x58f46d(0x285)+_0x57a9e5/0x3e8+'\x20segundos'),setTimeout(_0x65780d,_0x57a9e5);}};if(this['isRunning'])return;this['isRunning']=!0x0;let _0x2b69d0=_0x43fe83();setTimeout(_0x65780d,_0x2b69d0);}async[a0_0x20331d(0x2f9)](){const _0x2b8744=a0_0x20331d;let _0x4d20bc=this[_0x2b8744(0x664)]['wuid'];try{let _0x48278b=await this[_0x2b8744(0x402)][_0x2b8744(0x29c)][_0x2b8744(0x7c9)]({'where':{'$or':[{'owner':_0x4d20bc},{'whoCanUse':{'$in':[_0x4d20bc]}},{'shareOwners':{'$in':[_0x4d20bc]}}]}}),_0x292f23=new Map(this['AutomateSystem'][_0x2b8744(0x550)][_0x2b8744(0x41b)](_0x102251=>[_0x102251[_0x2b8744(0x53e)],_0x102251])),_0x3879ea=_0x48278b[_0x2b8744(0x41b)](_0xab64a5=>{const _0x3d1b53=_0x2b8744;let _0x393f47=_0x292f23[_0x3d1b53(0x51d)](_0xab64a5['_id']?.[_0x3d1b53(0x27d)]());return{'_id':_0xab64a5['_id']?.[_0x3d1b53(0x27d)](),'name':_0x393f47?.['name']??_0xab64a5[_0x3d1b53(0x8b9)],'default':_0x393f47?.[_0x3d1b53(0x42b)]??_0xab64a5['default']??!0x1,'startCommand':_0x393f47?.[_0x3d1b53(0x769)]??_0xab64a5[_0x3d1b53(0x26e)],'minutesToClose':_0x393f47?.[_0x3d1b53(0x3fc)]??_0xab64a5[_0x3d1b53(0x3fc)]??0xa,'readMessages':_0x393f47?.[_0x3d1b53(0x5b5)]??_0xab64a5[_0x3d1b53(0x5b5)]??!0x1,'testingWith':_0x393f47?.['testingWith']??_0xab64a5[_0x3d1b53(0x232)],'canEdit':_0xab64a5[_0x3d1b53(0x63b)]===_0x4d20bc||(_0xab64a5['whoCanEdit']??[])['includes'](_0x4d20bc),'usersCount':(_0xab64a5[_0x3d1b53(0x224)]??[])[_0x3d1b53(0x786)]??0x0};}),_0x4e94cf=!0x1;_0x3879ea[_0x2b8744(0x22b)](_0x54a1c8=>{const _0x570925=_0x2b8744;_0x54a1c8[_0x570925(0x42b)]&&(_0x4e94cf?_0x54a1c8[_0x570925(0x42b)]=!0x1:_0x4e94cf=!0x0);}),this['AutomateSystem']['flows']=_0x3879ea;let _0x20035d={'flows':_0x3879ea};return await this[_0x2b8744(0x402)][_0x2b8744(0x91d)][_0x2b8744(0x3fd)](_0x20035d,_0x4d20bc),this[_0x2b8744(0x7a2)][_0x2b8744(0x7a9)](this[_0x2b8744(0x8ba)]+'\x20('+_0x4d20bc+_0x2b8744(0x663)),_0x3879ea[_0x2b8744(0x786)];}catch(_0x5641fd){return this[_0x2b8744(0x7a2)]['error'](this['instanceName']+'\x20('+_0x4d20bc+'):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20'+(_0x5641fd instanceof Error?_0x5641fd[_0x2b8744(0x923)]:JSON['stringify'](_0x5641fd,null,0x2))),{'message':_0x2b8744(0x523)+(_0x5641fd instanceof Error?_0x5641fd['message']:JSON[_0x2b8744(0x5f3)](_0x5641fd,null,0x2))};}}async[a0_0x20331d(0x6a2)](_0x4eebff){const _0x543caa=a0_0x20331d;try{let _0x4c830c=await this[_0x543caa(0x402)]['instance'][_0x543caa(0x63f)]({'where':{'_id':K+'-'+this[_0x543caa(0x8ba)]}}),_0x8517f6,_0x41d4b2=!re[_0x543caa(0x80c)]||!re[_0x543caa(0x51f)];console['log'](_0x543caa(0x86e)),console[_0x543caa(0x834)](_0x543caa(0x59a),_i),console[_0x543caa(0x834)](_0x543caa(0x8a0),this[_0x543caa(0x52a)]),console[_0x543caa(0x834)]('--------------------------------------'),_i&&!_0x41d4b2&&(this[_0x543caa(0x52a)]<0x4||!this[_0x543caa(0x52a)]?_0x4c830c&&_0x4c830c['ip']?(_0x8517f6=_0x4c830c['ip'],console[_0x543caa(0x834)]('Usando\x20IP\x20existente:\x20'+_0x8517f6)):(_0x8517f6=await re[_0x543caa(0x8de)](K,this[_0x543caa(0x664)][_0x543caa(0x8b9)]),_0x8517f6?(console[_0x543caa(0x834)](_0x543caa(0x33e)+_0x8517f6),await(0x0,w[_0x543caa(0x7b3)])(0x7d0)):console[_0x543caa(0x2c2)]('Falha\x20ao\x20criar\x20IPv6.')):this['reconnectAttempts']<0x6&&(await re['removeIPv6ById'](K,this[_0x543caa(0x664)][_0x543caa(0x8b9)]),console[_0x543caa(0x834)]('IPv6\x20recriado\x20após\x20falhas\x20de\x20reconexão.'),_0x8517f6=await re[_0x543caa(0x8de)](K,this[_0x543caa(0x664)][_0x543caa(0x8b9)]),_0x8517f6?(console[_0x543caa(0x834)](_0x543caa(0x33e)+_0x8517f6),await(0x0,w[_0x543caa(0x7b3)])(0x7d0)):console['error']('Falha\x20ao\x20recriar\x20IPv6.'))),this[_0x543caa(0x4d7)](),this[_0x543caa(0x664)][_0x543caa(0x450)]=(await this[_0x543caa(0x402)][_0x543caa(0x4e2)][_0x543caa(0x691)](this['instance'][_0x543caa(0x8b9)]))[_0x543caa(0x450)],this['instance'][_0x543caa(0x5c0)]=await this[_0x543caa(0x879)]();let {version:_0x42320d}=await(0x0,w['fetchLatestBaileysVersion'])(),_0x1ee0b3=[Li,js,(0x0,ks[_0x543caa(0x5df)])()],_0x2f4d06={'localAddress':_0x8517f6,'auth':{'creds':this['instance'][_0x543caa(0x5c0)][_0x543caa(0x52d)][_0x543caa(0x854)],'keys':(0x0,w['makeCacheableSignalKeyStore'])(this['instance'][_0x543caa(0x5c0)][_0x543caa(0x52d)][_0x543caa(0x4db)],(0x0,qt['default'])({'level':'error'}))},'logger':(0x0,qt[_0x543caa(0x42b)])({'level':_0x543caa(0x2c2)}),'printQRInTerminal':!0x1,'browser':_0x4eebff?[_0x543caa(0x77e),js,(0x0,ks[_0x543caa(0x5df)])()]:_0x1ee0b3,'version':_0x42320d,'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x7fbcf9=>{const _0x37a3d4=_0x543caa;let _0x3ea0f9=this[_0x37a3d4(0x590)]?.[_0x37a3d4(0x872)]&&(0x0,w[_0x37a3d4(0x776)])(_0x7fbcf9);return(0x0,w[_0x37a3d4(0x7c6)])(_0x7fbcf9)||_0x3ea0f9;},'msgRetryCounterCache':this[_0x543caa(0x449)],'getMessage':async _0x531196=>await this[_0x543caa(0x378)](_0x531196),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this['userDevicesCache'],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x996572){const _0x11dd1e=_0x543caa;return _0x996572[_0x11dd1e(0x6d9)]?.[_0x11dd1e(0x923)]?.['listMessage']?.[_0x11dd1e(0x7ee)]===w[_0x11dd1e(0x315)]['Message'][_0x11dd1e(0x5bf)][_0x11dd1e(0x520)][_0x11dd1e(0x404)]&&(_0x996572=JSON[_0x11dd1e(0x79b)](JSON['stringify'](_0x996572)),_0x996572[_0x11dd1e(0x6d9)][_0x11dd1e(0x923)]['listMessage'][_0x11dd1e(0x7ee)]=w['proto'][_0x11dd1e(0x8af)][_0x11dd1e(0x5bf)][_0x11dd1e(0x520)]['SINGLE_SELECT']),_0x996572[_0x11dd1e(0x57c)]?.[_0x11dd1e(0x7ee)]==w[_0x11dd1e(0x315)][_0x11dd1e(0x8af)][_0x11dd1e(0x5bf)][_0x11dd1e(0x520)][_0x11dd1e(0x404)]&&(_0x996572=JSON[_0x11dd1e(0x79b)](JSON[_0x11dd1e(0x5f3)](_0x996572)),_0x996572[_0x11dd1e(0x57c)][_0x11dd1e(0x7ee)]=w[_0x11dd1e(0x315)]['Message'][_0x11dd1e(0x5bf)]['ListType'][_0x11dd1e(0x91c)]),_0x996572;}};return this[_0x543caa(0x864)]=!0x1,this[_0x543caa(0x8a4)]=(0x0,w[_0x543caa(0x42b)])(_0x2f4d06),this[_0x543caa(0x3ce)](),this['phoneNumber']=_0x4eebff,this[_0x543caa(0x8a4)];}catch(_0x537601){let _0x534241=_0x543caa(0x27b),_0x34caf7=_0x537601 instanceof Error?_0x537601[_0x543caa(0x923)]:typeof _0x537601=='object'?JSON[_0x543caa(0x5f3)](_0x537601):_0x537601,_0x56b0a1=_0x534241+':\x20'+_0x34caf7;throw this['logger'][_0x543caa(0x2c2)](this[_0x543caa(0x8ba)]+'\x20('+this[_0x543caa(0x664)][_0x543caa(0x60f)]+_0x543caa(0x51c)+_0x56b0a1),console['error'](_0x543caa(0x684),_0x537601),_0x537601 instanceof Error&&console[_0x543caa(0x2c2)](_0x543caa(0x47a),_0x537601[_0x543caa(0x3ff)]),new x(_0x56b0a1);}}['eventHandler'](){const _0x25b2bf=a0_0x20331d;this[_0x25b2bf(0x8a4)]['ev'][_0x25b2bf(0x6aa)](_0x3bde79=>{const _0x243170=_0x25b2bf;if(!this[_0x243170(0x864)]){let _0xb02b32=this['configService'][_0x243170(0x51d)](_0x243170(0x8c2));if(_0x3bde79[_0x243170(0x513)]){let _0x37faaf=_0x3bde79[_0x243170(0x513)];this['messageHandle'][_0x243170(0x513)](_0x37faaf);}if(_0x3bde79[_0x243170(0x863)]){let _0x45bedf=_0x3bde79[_0x243170(0x863)];this['messageHandle'][_0x243170(0x863)](_0x45bedf);}if(_0x3bde79[_0x243170(0x2e4)]&&this[_0x243170(0x5d8)](_0x3bde79['connection.update']),_0x3bde79['creds.update']&&this[_0x243170(0x664)][_0x243170(0x5c0)]['saveCreds'](),_0x3bde79['messaging-history.set']){let _0x559726=_0x3bde79[_0x243170(0x27c)];this[_0x243170(0x3d6)]['messaging-history.set'](_0x559726,_0xb02b32);}if(_0x3bde79[_0x243170(0x917)]){let _0x45770c=_0x3bde79['messages.upsert'];this[_0x243170(0x3d6)]['messages.upsert'](_0x45770c,_0xb02b32);}if(_0x3bde79['messages.update']){let _0x2bdf78=_0x3bde79['messages.update'];this[_0x243170(0x3d6)][_0x243170(0x8b4)](_0x2bdf78,_0xb02b32);}if(_0x3bde79[_0x243170(0x4d6)]){let _0x475354=_0x3bde79[_0x243170(0x4d6)];if(this[_0x243170(0x590)]?.[_0x243170(0x872)]&&_0x475354['id'][_0x243170(0x8eb)](_0x243170(0x5dd)))return;this[_0x243170(0x3d7)](_0x243170(0x4d6),_0x475354);}if(_0x3bde79[_0x243170(0x2d9)]){let _0x682fd7=_0x3bde79[_0x243170(0x2d9)];this[_0x243170(0x366)][_0x243170(0x2d9)](_0x682fd7);}if(_0x3bde79['groups.update']){let _0x26c49a=_0x3bde79['groups.update'];this[_0x243170(0x366)][_0x243170(0x7e1)](_0x26c49a);}if(_0x3bde79[_0x243170(0x3f8)]){let _0x4d7803=_0x3bde79['group-participants.update'];this[_0x243170(0x366)]['group-participants.update'](_0x4d7803);}if(_0x3bde79[_0x243170(0x867)]){let _0x273cc3=_0x3bde79[_0x243170(0x867)];this[_0x243170(0x3da)]['chats.upsert'](_0x273cc3,_0xb02b32);}if(_0x3bde79['chats.update']){let _0x1e34f2=_0x3bde79[_0x243170(0x222)];this[_0x243170(0x3da)]['chats.update'](_0x1e34f2,_0xb02b32);}if(_0x3bde79['chats.delete']){let _0x2c9a50=_0x3bde79['chats.delete'];this['chatHandle'][_0x243170(0x4ef)](_0x2c9a50);}if(_0x3bde79[_0x243170(0x735)]){let _0x597d01=_0x3bde79[_0x243170(0x735)];this[_0x243170(0x659)][_0x243170(0x735)](_0x597d01,_0xb02b32);}if(_0x3bde79['contacts.update']){let _0x473f87=_0x3bde79[_0x243170(0x316)];this['contactHandle'][_0x243170(0x316)](_0x473f87,_0xb02b32);}}});}async['retrySendMessage'](_0x2f579d,_0x375b53){const _0x240bf2=a0_0x20331d;if(_0x375b53>=0xa){console[_0x240bf2(0x2c2)](this[_0x240bf2(0x8ba)]+'\x20('+this[_0x240bf2(0x664)][_0x240bf2(0x60f)]+'):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar'),delete Jt[_0x2f579d[_0x240bf2(0x2f3)]['id']];return;}try{console[_0x240bf2(0x2c2)](this['instanceName']+'\x20('+this[_0x240bf2(0x664)][_0x240bf2(0x60f)]+'):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20'+(_0x375b53+0x1)),await this[_0x240bf2(0x8a4)][_0x240bf2(0x2ad)](JSON[_0x240bf2(0x79b)](_0x2f579d['messageStubParameters'][0x1],w['BufferJSON'][_0x240bf2(0x5b7)])),console['error'](_0x240bf2(0x2fd));}catch(_0x25e2c){console[_0x240bf2(0x2c2)](this[_0x240bf2(0x8ba)]+'\x20('+this[_0x240bf2(0x664)]['wuid']+_0x240bf2(0x5db)+_0x25e2c),setTimeout(()=>this['retrySendMessage'](_0x2f579d,_0x375b53+0x1),Math[_0x240bf2(0x36b)](0x2,_0x375b53)*0x3e8);}}[a0_0x20331d(0x1f3)](_0x52c154){return new Promise(_0x1469b9=>setTimeout(_0x1469b9,_0x52c154));}['formatBRNumber'](_0x160301){const _0x212db6=a0_0x20331d;_0x160301=_0x160301[_0x212db6(0x759)](/\D/g,'');let _0x5a9a5b=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x212db6(0x318)](_0x160301);if(_0x5a9a5b&&_0x5a9a5b[0x1]==='55'){let _0x141fa2=_0x5a9a5b[0x2],_0x2f93c4=_0x5a9a5b[0x3],_0x1a6648=_0x5a9a5b[0x4];if(parseInt(_0x141fa2)>=0x1f&&_0x2f93c4==='9')return _0x5a9a5b[0x1]+_0x141fa2+_0x1a6648;}return _0x160301;}[a0_0x20331d(0x205)](_0x297d29){const _0x44c04a=a0_0x20331d;return _0x297d29[_0x44c04a(0x8eb)](_0x44c04a(0x5dd))||_0x297d29[_0x44c04a(0x8eb)](_0x44c04a(0x6c2))||_0x297d29[_0x44c04a(0x8eb)]('@broadcast')?_0x297d29:(_0x297d29=_0x297d29?.['replace'](/\s/g,'')[_0x44c04a(0x759)](/\+/g,'')['replace'](/\(/g,'')[_0x44c04a(0x759)](/\)/g,'')[_0x44c04a(0x382)](/\:/)[0x0][_0x44c04a(0x382)]('@')[0x0],_0x297d29['length']>=0x12?(_0x297d29=_0x297d29['replace'](/[^\d-]/g,''),_0x297d29+_0x44c04a(0x5dd)):(_0x297d29=_0x297d29[_0x44c04a(0x759)](/\D/g,''),_0x297d29+_0x44c04a(0x6c2)));}async['updatePresence'](_0x31b06e){const _0x57afbd=a0_0x20331d;let _0x426e1c=(await this[_0x57afbd(0x78a)]({'numbers':[_0x31b06e[_0x57afbd(0x6f9)]]}))[0x0];if(!_0x426e1c[_0x57afbd(0x8f2)]&&!(0x0,w[_0x57afbd(0x776)])(_0x426e1c[_0x57afbd(0x461)])&&!_0x426e1c['jid'][_0x57afbd(0x8eb)](_0x57afbd(0x3b3)))throw new m(_0x426e1c);let _0x2f917e=_0x426e1c[_0x57afbd(0x461)];try{return await this[_0x57afbd(0x8a4)][_0x57afbd(0x71a)](_0x2f917e),await this['client'][_0x57afbd(0x339)](_0x31b06e[_0x57afbd(0x347)],_0x2f917e),{'status':0xc8,'presence':_0x31b06e['presence']};}catch(_0x4121c5){let _0x2550af='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence',_0x5d93ab=_0x4121c5 instanceof Error?_0x4121c5['message']:typeof _0x4121c5==_0x57afbd(0x4bd)?JSON[_0x57afbd(0x5f3)](_0x4121c5):_0x4121c5,_0x47f688=_0x2550af+':\x20'+_0x5d93ab;throw this['logger'][_0x57afbd(0x2c2)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x57afbd(0x51c)+_0x47f688),new m(_0x47f688);}}async[a0_0x20331d(0x4a1)](_0x384391,_0x4b65d8,_0x40bac3,_0x3e260d=!0x0){const _0x241d07=a0_0x20331d;let _0x31f7a7=await this[_0x241d07(0x402)]['cacheContact']['findOne']({'where':{'_id':_0x384391}});if(!_0x31f7a7&&!_0x3e260d)return;let _0x542de4={'lastUpdate':Date[_0x241d07(0x37f)]()};if(_0x40bac3||!_0x31f7a7?.[_0x241d07(0x6d2)]||Date[_0x241d07(0x37f)]()-_0x31f7a7[_0x241d07(0x6d2)]>0x18*0x3c*0x3c*0x3e8)try{let _0x2b8fb1=(await this['profilePicture'](_0x384391))[_0x241d07(0x6ba)];_0x542de4[_0x241d07(0x36f)]=_0x2b8fb1;}catch(_0x5a02e7){let _0x5b7161='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact',_0x332e7a=_0x5a02e7 instanceof Error?_0x5a02e7[_0x241d07(0x923)]:typeof _0x5a02e7==_0x241d07(0x4bd)?JSON[_0x241d07(0x5f3)](_0x5a02e7):_0x5a02e7,_0x3a15f6=_0x5b7161+':\x20'+_0x332e7a;throw this['logger']['error'](this[_0x241d07(0x8ba)]+'\x20('+this[_0x241d07(0x664)][_0x241d07(0x60f)]+'):\x20'+_0x3a15f6),new m(_0x3a15f6);}return _0x4b65d8&&_0x31f7a7?.[_0x241d07(0x8b9)]!==_0x4b65d8&&(_0x542de4[_0x241d07(0x8b9)]=_0x4b65d8),Object[_0x241d07(0x4db)](_0x542de4)['length']>0x1&&(_0x31f7a7?await this[_0x241d07(0x402)][_0x241d07(0x65d)][_0x241d07(0x3fd)]({'where':{'_id':_0x384391}},_0x542de4):await this[_0x241d07(0x402)][_0x241d07(0x65d)][_0x241d07(0x477)]([{'_id':_0x384391,..._0x542de4}]),_0x31f7a7={..._0x31f7a7,..._0x542de4}),{'cachedContact':_0x31f7a7};}async['profilePicture'](_0x200160){const _0x430e9f=a0_0x20331d;let _0x39fc78=this[_0x430e9f(0x205)](_0x200160);try{return{'wuid':_0x39fc78,'profilePictureUrl':await this[_0x430e9f(0x8a4)][_0x430e9f(0x6ba)](_0x39fc78,_0x430e9f(0x801))};}catch{return{'wuid':_0x39fc78,'profilePictureUrl':null};}}async[a0_0x20331d(0x7a3)](_0x56a86c,_0x1fdedd,_0x55f34e){const _0x49b9fd=a0_0x20331d;let _0x21061b;try{let _0x1466a1=(await this['whatsappNumber']({'numbers':[_0x56a86c]}))?.['shift']();if(!_0x1466a1['exists']&&!(0x0,w['isJidGroup'])(_0x1466a1[_0x49b9fd(0x461)])&&!_0x1466a1[_0x49b9fd(0x461)][_0x49b9fd(0x8eb)]('@broadcast'))throw new m(_0x1466a1);_0x21061b=_0x1466a1['jid'];}catch(_0x9d2987){_0x21061b=_0x56a86c,this[_0x49b9fd(0x7a2)][_0x49b9fd(0x365)](this[_0x49b9fd(0x8ba)]+'\x20('+this[_0x49b9fd(0x664)][_0x49b9fd(0x60f)]+_0x49b9fd(0x679)+_0x9d2987[_0x49b9fd(0x923)]),this['logger'][_0x49b9fd(0x365)](this[_0x49b9fd(0x8ba)]+'\x20('+this['instance'][_0x49b9fd(0x60f)]+_0x49b9fd(0x79d)+_0x21061b);}try{if(_0x21061b||(_0x21061b=_0x56a86c,this[_0x49b9fd(0x7a2)]['warn'](this['instanceName']+'\x20('+this[_0x49b9fd(0x664)]['wuid']+'):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20'+_0x21061b)),_0x55f34e||(_0x55f34e={}),_0x55f34e?.['delay']){await this[_0x49b9fd(0x8a4)][_0x49b9fd(0x71a)](_0x21061b),await this['client'][_0x49b9fd(0x339)](_0x55f34e?.['presence']??'composing',_0x21061b);let _0x4163bd=Math[_0x49b9fd(0x841)](_0x55f34e['delay'],0x2710);await(0x0,w[_0x49b9fd(0x7b3)])(_0x4163bd),await this[_0x49b9fd(0x8a4)][_0x49b9fd(0x339)]('paused',_0x21061b);}let _0x3eb599=_0x55f34e?.[_0x49b9fd(0x73b)]!=!0x1?void 0x0:!0x1,_0x44e00b;if(_0x55f34e?.[_0x49b9fd(0x38a)]){let _0x49252e=_0x55f34e?.[_0x49b9fd(0x38a)],_0x19a74c=_0x49252e?.[_0x49b9fd(0x923)]?_0x49252e:await this[_0x49b9fd(0x378)](_0x49252e[_0x49b9fd(0x2f3)],!0x0);_0x19a74c&&(_0x44e00b=_0x19a74c);}let _0x1798c7=await this[_0x49b9fd(0x402)][_0x49b9fd(0x617)][_0x49b9fd(0x63f)]({'where':{'_id':_0x21061b}},this[_0x49b9fd(0x664)][_0x49b9fd(0x60f)]),_0x51dc07,_0x3fdc0a=null;if((0x0,w[_0x49b9fd(0x776)])(_0x21061b))try{if(_0x3fdc0a=_0x1798c7['groupdata'],!_0x3fdc0a)throw new J('Group\x20not\x20found');_0x55f34e?.[_0x49b9fd(0x4ca)]&&(_0x55f34e[_0x49b9fd(0x4ca)]?.[_0x49b9fd(0x7d7)]?_0x51dc07=_0x3fdc0a[_0x49b9fd(0x38f)][_0x49b9fd(0x41b)](_0x4a368b=>_0x4a368b['id']):_0x55f34e[_0x49b9fd(0x4ca)]?.[_0x49b9fd(0x564)]?.[_0x49b9fd(0x786)]&&(_0x51dc07=_0x55f34e[_0x49b9fd(0x4ca)]['mentioned'][_0x49b9fd(0x41b)](_0x596a64=>{const _0x195d3c=_0x49b9fd;let _0xcc9c0=this['createJid'](_0x596a64);return(0x0,w[_0x195d3c(0x776)])(_0xcc9c0)?null:_0xcc9c0;})));}catch{throw new J(_0x49b9fd(0x401));}let _0x278adc=await((async()=>{const _0x55fb9d=_0x49b9fd;let _0x3fccac={'quoted':_0x44e00b,'ephemeralExpiration':_0x1798c7?.['ephemeralExpiration']??0x0};if(!_0x1fdedd[_0x55fb9d(0x481)]&&!_0x1fdedd[_0x55fb9d(0x266)]&&!_0x1fdedd['sticker']&&!_0x1fdedd[_0x55fb9d(0x8e8)]&&_0x21061b!==_0x55fb9d(0x5c4)&&_0x1fdedd[_0x55fb9d(0x813)])return await this['client'][_0x55fb9d(0x66d)](_0x21061b,{'react':{'text':_0x1fdedd[_0x55fb9d(0x813)]['text'],'key':_0x1fdedd[_0x55fb9d(0x813)][_0x55fb9d(0x2f3)]}},_0x3fccac);if(_0x1fdedd['conversation']){let _0x598da6=_0x1fdedd[_0x55fb9d(0x8e8)];return _0x55f34e?.[_0x55fb9d(0x54f)]&&(_0x598da6=await this[_0x55fb9d(0x468)](_0x598da6,_0x21061b)),await this[_0x55fb9d(0x8a4)][_0x55fb9d(0x66d)](_0x21061b,{'text':_0x598da6,'mentions':_0x51dc07,'linkPreview':_0x3eb599},_0x3fccac);}return!_0x1fdedd[_0x55fb9d(0x481)]&&!_0x1fdedd['poll']&&_0x21061b!=_0x55fb9d(0x5c4)?await this[_0x55fb9d(0x8a4)][_0x55fb9d(0x66d)](_0x21061b,{'forward':{'key':{'remoteJid':this[_0x55fb9d(0x664)][_0x55fb9d(0x60f)],'fromMe':!0x0},'message':_0x1fdedd},'mentions':_0x51dc07},_0x3fccac):_0x21061b===_0x55fb9d(0x5c4)?await this['client'][_0x55fb9d(0x66d)](_0x21061b,_0x1fdedd[_0x55fb9d(0x8aa)][_0x55fb9d(0x77d)],{'backgroundColor':_0x1fdedd[_0x55fb9d(0x8aa)][_0x55fb9d(0x69c)]['backgroundColor'],'font':_0x1fdedd[_0x55fb9d(0x8aa)]['option'][_0x55fb9d(0x80d)],'statusJidList':_0x1fdedd[_0x55fb9d(0x8aa)]['option'][_0x55fb9d(0x273)]}):await this[_0x55fb9d(0x8a4)][_0x55fb9d(0x66d)](_0x21061b,_0x1fdedd,_0x3fccac);})()),_0x546d07=(0x0,w[_0x49b9fd(0x27f)])(_0x278adc[_0x49b9fd(0x923)]),_0x211760=(0x0,w[_0x49b9fd(0x2a3)])(_0x546d07),{message_normalized:_0x3405cf}=this[_0x49b9fd(0x6ce)](_0x546d07,_0x211760,null),_0x324cf3={'_id':_0x278adc[_0x49b9fd(0x2f3)]['id'],'key':_0x278adc[_0x49b9fd(0x2f3)],'pushName':_0x278adc[_0x49b9fd(0x932)],'isGroup':_0x278adc[_0x49b9fd(0x2f3)][_0x49b9fd(0x3eb)]['endsWith'](_0x49b9fd(0x5dd)),'profilePictureUrl':this[_0x49b9fd(0x664)]['profilePictureUrl'],'message':_0x546d07,'messageType':_0x211760,'message_normalized':{'key':_0x278adc[_0x49b9fd(0x2f3)],'pushName':_0x278adc[_0x49b9fd(0x932)],'messageTimestamp':_0x278adc['messageTimestamp']&&_0x278adc[_0x49b9fd(0x627)][_0x49b9fd(0x27d)]()[_0x49b9fd(0x786)]<0xd?_0x278adc['messageTimestamp']*0x3e8:_0x278adc[_0x49b9fd(0x627)]||null,'source':(0x0,w[_0x49b9fd(0x302)])(_0x278adc[_0x49b9fd(0x2f3)]['id']),..._0x3405cf},'messageTimestamp':_0x278adc['messageTimestamp']&&_0x278adc['messageTimestamp'][_0x49b9fd(0x27d)]()[_0x49b9fd(0x786)]<0xd?_0x278adc[_0x49b9fd(0x627)]*0x3e8:_0x278adc[_0x49b9fd(0x627)]||null,'owner':this[_0x49b9fd(0x664)][_0x49b9fd(0x60f)],'source':(0x0,w[_0x49b9fd(0x302)])(_0x278adc[_0x49b9fd(0x2f3)]['id'])};return this['logger'][_0x49b9fd(0x365)](this[_0x49b9fd(0x8ba)]+'\x20('+this[_0x49b9fd(0x664)]['wuid']+_0x49b9fd(0x2d3)+_0x324cf3[_0x49b9fd(0x2f3)]?.[_0x49b9fd(0x3eb)][_0x49b9fd(0x759)](_0x49b9fd(0x6c2),'')+']\x20('+_0x324cf3['messageType']+')'),_0x324cf3[_0x49b9fd(0x539)]?.['text']&&this['logger']['warn'](_0x324cf3[_0x49b9fd(0x539)]?.[_0x49b9fd(0x4e1)]),this['sendDataWebhook'](_0x49b9fd(0x2e9),_0x324cf3),q(this[_0x49b9fd(0x8ba)],_0x49b9fd(0x92e),{'message':_0x324cf3}),this['updateChatWithMessage'](this['configService']['get'](_0x49b9fd(0x8c2)),_0x324cf3,_0x49b9fd(0x5dc),_0x1798c7),await this[_0x49b9fd(0x402)][_0x49b9fd(0x923)]['insert']([_0x324cf3],this[_0x49b9fd(0x664)][_0x49b9fd(0x60f)]),_0x278adc;}catch(_0x1f59b1){let _0x1910b3=_0x49b9fd(0x5ec)+_0x21061b,_0x4edbb2=_0x1f59b1 instanceof Error?_0x1f59b1[_0x49b9fd(0x923)]:typeof _0x1f59b1=='object'?JSON[_0x49b9fd(0x5f3)](_0x1f59b1):_0x1f59b1,_0x4dcf29=_0x1910b3+':\x20'+_0x4edbb2;throw this[_0x49b9fd(0x7a2)][_0x49b9fd(0x2c2)](this[_0x49b9fd(0x8ba)]+'\x20('+this['instance'][_0x49b9fd(0x60f)]+_0x49b9fd(0x51c)+_0x4dcf29),new m(_0x4dcf29);}}get['connectionStatus'](){const _0x2bcf05=a0_0x20331d;return this[_0x2bcf05(0x904)];}async[a0_0x20331d(0x807)](_0x3b4ffd){const _0x9b2cbd=a0_0x20331d;return await this['sendMessageWithTyping'](_0x3b4ffd[_0x9b2cbd(0x6f9)],{'conversation':_0x3b4ffd[_0x9b2cbd(0x807)][_0x9b2cbd(0x4e1)]},_0x3b4ffd?.['options']);}async['formatStatusMessage'](_0x39a6f3){const _0x5e4c63=a0_0x20331d;if(!_0x39a6f3[_0x5e4c63(0x32e)])throw new m(_0x5e4c63(0x89f));if(!_0x39a6f3[_0x5e4c63(0x77d)])throw new m(_0x5e4c63(0x8f5));if(_0x39a6f3[_0x5e4c63(0x59e)]){let _0x338ee5=await this[_0x5e4c63(0x402)][_0x5e4c63(0x929)][_0x5e4c63(0x691)]({'where':{}},this[_0x5e4c63(0x664)][_0x5e4c63(0x60f)]);if(!_0x338ee5[_0x5e4c63(0x786)])throw new m(_0x5e4c63(0x930));_0x39a6f3[_0x5e4c63(0x273)]=_0x338ee5[_0x5e4c63(0x625)](_0x56b56f=>_0x56b56f['pushName'])[_0x5e4c63(0x41b)](_0x3fe971=>_0x3fe971[_0x5e4c63(0x53e)]);}if(!_0x39a6f3[_0x5e4c63(0x273)]?.['length']&&!_0x39a6f3['allContacts'])throw new m(_0x5e4c63(0x5e5));if(_0x39a6f3[_0x5e4c63(0x32e)]===_0x5e4c63(0x4e1)){if(!_0x39a6f3['backgroundColor'])throw new m(_0x5e4c63(0x722));if(!_0x39a6f3[_0x5e4c63(0x80d)])throw new m(_0x5e4c63(0x845));return{'content':{'text':_0x39a6f3[_0x5e4c63(0x77d)]},'option':{'backgroundColor':_0x39a6f3[_0x5e4c63(0x6c6)],'font':_0x39a6f3[_0x5e4c63(0x80d)],'statusJidList':_0x39a6f3[_0x5e4c63(0x273)]}};}if(_0x39a6f3[_0x5e4c63(0x32e)]===_0x5e4c63(0x801))return{'content':{'image':{'url':_0x39a6f3[_0x5e4c63(0x77d)]},'caption':_0x39a6f3[_0x5e4c63(0x312)]},'option':{'statusJidList':_0x39a6f3[_0x5e4c63(0x273)]}};if(_0x39a6f3['type']===_0x5e4c63(0x775))return{'content':{'video':{'url':_0x39a6f3[_0x5e4c63(0x77d)]},'caption':_0x39a6f3[_0x5e4c63(0x312)]},'option':{'statusJidList':_0x39a6f3[_0x5e4c63(0x273)]}};if(_0x39a6f3[_0x5e4c63(0x32e)]==='audio'){this[_0x5e4c63(0x7a2)][_0x5e4c63(0x7a9)](this[_0x5e4c63(0x8ba)]+'\x20('+this[_0x5e4c63(0x664)][_0x5e4c63(0x60f)]+'):Type\x20defined\x20as\x20audio'),this[_0x5e4c63(0x7a2)][_0x5e4c63(0x7a9)](this[_0x5e4c63(0x8ba)]+'\x20('+this[_0x5e4c63(0x664)][_0x5e4c63(0x60f)]+_0x5e4c63(0x880));let _0x65de68=await this[_0x5e4c63(0x4a3)](_0x39a6f3[_0x5e4c63(0x77d)]);if(typeof _0x65de68=='string'){this[_0x5e4c63(0x7a2)][_0x5e4c63(0x7a9)](this['instanceName']+'\x20('+this[_0x5e4c63(0x664)][_0x5e4c63(0x60f)]+_0x5e4c63(0x216));let _0x5040bd=F[_0x5e4c63(0x4f7)](_0x65de68)[_0x5e4c63(0x27d)](_0x5e4c63(0x588));return{'content':{'audio':Buffer[_0x5e4c63(0x654)](_0x5040bd,_0x5e4c63(0x588)),'ptt':!0x0,'mimetype':'audio/ogg'},'option':{'statusJidList':_0x39a6f3[_0x5e4c63(0x273)]}};}else throw new x(_0x65de68);}throw new m(_0x5e4c63(0x5c7));}async['statusMessage'](_0x2c068f){const _0x9c9444=a0_0x20331d;return await this[_0x9c9444(0x7a3)](_0x9c9444(0x5c4),{'status':await this[_0x9c9444(0x3e8)](_0x2c068f[_0x9c9444(0x45e)])});}async[a0_0x20331d(0x61b)](_0x14c8cf){const _0xc750c=a0_0x20331d;try{let _0x1fccfa=await(0x0,w[_0xc750c(0x360)])({[_0x14c8cf[_0xc750c(0x57f)]]:(0x0,L[_0xc750c(0x58b)])(_0x14c8cf[_0xc750c(0x4ad)])?{'url':_0x14c8cf[_0xc750c(0x4ad)]}:Buffer[_0xc750c(0x654)](_0x14c8cf[_0xc750c(0x4ad)],'base64')},{'upload':this['client'][_0xc750c(0x43a)]}),_0x32f412=_0x14c8cf[_0xc750c(0x57f)]+_0xc750c(0x8af);if(_0x14c8cf[_0xc750c(0x57f)]===_0xc750c(0x8e2)&&!_0x14c8cf['fileName']){let _0x26e7fd=new RegExp(/.*\/(.+?)\./)[_0xc750c(0x318)](_0x14c8cf['media']);_0x14c8cf['fileName']=_0x26e7fd?_0x26e7fd[0x1]:null;}let _0x4211ba;return(0x0,L[_0xc750c(0x58b)])(_0x14c8cf[_0xc750c(0x4ad)])?_0x4211ba=(await te[_0xc750c(0x42b)][_0xc750c(0x51d)](_0x14c8cf[_0xc750c(0x4ad)],{'responseType':_0xc750c(0x361)}))[_0xc750c(0x8b8)][_0xc750c(0x74a)]:_0x4211ba=(0x0,ki[_0xc750c(0x897)])(_0x14c8cf['fileName']),_0x1fccfa[_0x32f412][_0xc750c(0x312)]=_0x14c8cf?.['caption'],_0x1fccfa[_0x32f412][_0xc750c(0x893)]=_0x4211ba,_0x1fccfa[_0x32f412][_0xc750c(0x7ad)]=_0x14c8cf['fileName'],_0x14c8cf[_0xc750c(0x57f)]==='video'&&(_0x1fccfa[_0x32f412][_0xc750c(0x649)]=Uint8Array[_0xc750c(0x654)]((0x0,Fe['readFileSync'])((0x0,j[_0xc750c(0x6ca)])(process[_0xc750c(0x5be)](),'video-cover.png'))),_0x1fccfa[_0x32f412][_0xc750c(0x745)]=!0x1),(0x0,w['generateWAMessageFromContent'])('',{[_0x32f412]:{..._0x1fccfa[_0x32f412]}},{'userJid':this[_0xc750c(0x664)][_0xc750c(0x60f)]});}catch(_0x364297){let _0x3660a0='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage',_0x22bf4=_0x364297 instanceof Error?_0x364297[_0xc750c(0x923)]:typeof _0x364297==_0xc750c(0x4bd)?JSON[_0xc750c(0x5f3)](_0x364297):_0x364297,_0x3727dd=_0x3660a0+':\x20'+_0x22bf4;throw this[_0xc750c(0x7a2)]['error'](this['instanceName']+'\x20('+this[_0xc750c(0x664)][_0xc750c(0x60f)]+_0xc750c(0x51c)+_0x3727dd),new x(_0x3727dd);}}async['mediaMessage'](_0x32f5e7){const _0x30b34b=a0_0x20331d;let _0xcd2472=await this[_0x30b34b(0x61b)](_0x32f5e7['mediaMessage']);return await this[_0x30b34b(0x7a3)](_0x32f5e7['number'],{..._0xcd2472[_0x30b34b(0x923)]},_0x32f5e7?.[_0x30b34b(0x5c1)]);}async['convertToWebP'](_0x4547cd,_0x49e644){const _0x435773=a0_0x20331d;try{this[_0x435773(0x7a2)][_0x435773(0x7a9)](this['instanceName']+'\x20('+this[_0x435773(0x664)]['wuid']+'):Converting\x20image\x20to\x20WebP\x20to\x20sticker');let _0x3f224e,_0x4d5200=_0x49e644+'-'+new Date()[_0x435773(0x276)]();this[_0x435773(0x7a2)][_0x435773(0x7a9)](this[_0x435773(0x8ba)]+'\x20('+this[_0x435773(0x664)]['wuid']+'):Hash\x20to\x20image\x20name:\x20'+_0x4d5200);let _0x587cae=''+(0x0,j[_0x435773(0x6ca)])(this[_0x435773(0x69f)],_0x4d5200+'.webp');if(this[_0x435773(0x7a2)]['verbose'](this[_0x435773(0x8ba)]+'\x20('+this[_0x435773(0x664)][_0x435773(0x60f)]+_0x435773(0x275)+_0x587cae),(0x0,L['isBase64'])(_0x4547cd)){this[_0x435773(0x7a2)][_0x435773(0x7a9)](this[_0x435773(0x8ba)]+'\x20('+this['instance'][_0x435773(0x60f)]+_0x435773(0x342));let _0x2cfd7e=_0x4547cd[_0x435773(0x759)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x5ea016=Buffer['from'](_0x2cfd7e,_0x435773(0x588));_0x3f224e=''+(0x0,j[_0x435773(0x6ca)])(this[_0x435773(0x69f)],_0x435773(0x56e)+_0x4d5200+'.png'),this[_0x435773(0x7a2)][_0x435773(0x7a9)](this[_0x435773(0x8ba)]+'\x20('+this[_0x435773(0x664)][_0x435773(0x60f)]+_0x435773(0x5e1)+_0x3f224e),await(0x0,Vt[_0x435773(0x42b)])(_0x5ea016)[_0x435773(0x219)](_0x3f224e),this[_0x435773(0x7a2)][_0x435773(0x7a9)](this[_0x435773(0x8ba)]+'\x20('+this[_0x435773(0x664)]['wuid']+_0x435773(0x3c7));}else{this['logger'][_0x435773(0x7a9)](this['instanceName']+'\x20('+this[_0x435773(0x664)][_0x435773(0x60f)]+'):Image\x20is\x20url');let _0x23ed28=new Date()['getTime'](),_0xb86709=_0x4547cd+_0x435773(0x8fc)+_0x23ed28;this['logger'][_0x435773(0x7a9)](this[_0x435773(0x8ba)]+'\x20('+this['instance'][_0x435773(0x60f)]+_0x435773(0x8d3)+_0xb86709);let _0x3731bf=await te[_0x435773(0x42b)]['get'](_0xb86709,{'responseType':_0x435773(0x361)});this[_0x435773(0x7a2)][_0x435773(0x7a9)](this[_0x435773(0x8ba)]+'\x20('+this[_0x435773(0x664)][_0x435773(0x60f)]+'):Getting\x20image\x20from\x20url');let _0x3682da=Buffer[_0x435773(0x654)](_0x3731bf['data'],_0x435773(0x20d));_0x3f224e=''+(0x0,j['join'])(this[_0x435773(0x69f)],'temp-'+_0x4d5200+_0x435773(0x2eb)),this[_0x435773(0x7a2)][_0x435773(0x7a9)](this[_0x435773(0x8ba)]+'\x20('+this['instance']['wuid']+_0x435773(0x5e1)+_0x3f224e),await(0x0,Vt[_0x435773(0x42b)])(_0x3682da)['toFile'](_0x3f224e),this[_0x435773(0x7a2)][_0x435773(0x7a9)](this['instanceName']+'\x20('+this['instance'][_0x435773(0x60f)]+_0x435773(0x3c7));}return await(0x0,Vt[_0x435773(0x42b)])(_0x3f224e)['webp']()[_0x435773(0x219)](_0x587cae),this['logger'][_0x435773(0x7a9)](this[_0x435773(0x8ba)]+'\x20('+this[_0x435773(0x664)][_0x435773(0x60f)]+_0x435773(0x628)),F['unlinkSync'](_0x3f224e),this[_0x435773(0x7a2)][_0x435773(0x7a9)](this[_0x435773(0x8ba)]+'\x20('+this[_0x435773(0x664)][_0x435773(0x60f)]+'):Temp\x20image\x20deleted'),_0x587cae;}catch(_0x58ddfe){let _0x558357=_0x435773(0x3c4),_0x2cabe9=_0x58ddfe instanceof Error?_0x58ddfe['message']:typeof _0x58ddfe==_0x435773(0x4bd)?JSON[_0x435773(0x5f3)](_0x58ddfe):_0x58ddfe,_0x34a52d=_0x558357+':\x20'+_0x2cabe9;this['logger']['error'](this[_0x435773(0x8ba)]+'\x20('+this['instance']['wuid']+_0x435773(0x51c)+_0x34a52d);}}async['mediaSticker'](_0xca330f){const _0x596f10=a0_0x20331d;let _0x1a044c=await this[_0x596f10(0x2f1)](_0xca330f['stickerMessage'][_0x596f10(0x801)],_0xca330f[_0x596f10(0x6f9)]),_0x23e118=await this[_0x596f10(0x7a3)](_0xca330f['number'],{'sticker':{'url':_0x1a044c}},_0xca330f?.[_0x596f10(0x5c1)]);return F[_0x596f10(0x438)](_0x1a044c),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x596f10(0x664)][_0x596f10(0x60f)]+_0x596f10(0x261)),_0x23e118;}async[a0_0x20331d(0x226)](_0x2dc74a){const _0x29b668=a0_0x20331d;if(this[_0x29b668(0x7a2)][_0x29b668(0x7a9)](this[_0x29b668(0x8ba)]+'\x20('+this[_0x29b668(0x664)][_0x29b668(0x60f)]+_0x29b668(0x265)),!_0x2dc74a['options']?.[_0x29b668(0x581)]&&_0x2dc74a[_0x29b668(0x5c1)]?.[_0x29b668(0x581)]!==!0x1&&(_0x2dc74a[_0x29b668(0x5c1)][_0x29b668(0x581)]=!0x0),_0x2dc74a[_0x29b668(0x5c1)]?.[_0x29b668(0x581)]){let _0x313c40=await this[_0x29b668(0x4a3)](_0x2dc74a[_0x29b668(0x8c4)][_0x29b668(0x481)]);if(typeof _0x313c40=='string'){let _0x56b2cb=F[_0x29b668(0x4f7)](_0x313c40)[_0x29b668(0x27d)](_0x29b668(0x588));return this['sendMessageWithTyping'](_0x2dc74a[_0x29b668(0x6f9)],{'audio':Buffer[_0x29b668(0x654)](_0x56b2cb,_0x29b668(0x588)),'ptt':!0x0,'mimetype':_0x29b668(0x5c8)},{'presence':'recording','delay':_0x2dc74a?.['options']?.[_0x29b668(0x7b3)]});}else throw new x(_0x313c40);}return await this['sendMessageWithTyping'](_0x2dc74a[_0x29b668(0x6f9)],{'audio':(0x0,L[_0x29b668(0x58b)])(_0x2dc74a[_0x29b668(0x8c4)][_0x29b668(0x481)])?{'url':_0x2dc74a[_0x29b668(0x8c4)][_0x29b668(0x481)]}:Buffer['from'](_0x2dc74a[_0x29b668(0x8c4)][_0x29b668(0x481)],_0x29b668(0x588)),'ptt':!0x0,'mimetype':_0x29b668(0x5c8)},{'presence':_0x29b668(0x803),'delay':_0x2dc74a?.[_0x29b668(0x5c1)]?.[_0x29b668(0x7b3)]});}async[a0_0x20331d(0x4a3)](_0x2098cb){const _0x2fae2e=a0_0x20331d;this[_0x2fae2e(0x7a2)][_0x2fae2e(0x7a9)](this[_0x2fae2e(0x8ba)]+'\x20('+this[_0x2fae2e(0x664)][_0x2fae2e(0x60f)]+'):Processing\x20audio');let _0x5297c0=(0x0,L['isURL'])(_0x2098cb)?(0x0,Gt[_0x2fae2e(0x25a)])(_0x2fae2e(0x548))[_0x2fae2e(0x3fd)](_0x2098cb)['digest'](_0x2fae2e(0x40d)):(0x0,Gt[_0x2fae2e(0x25a)])(_0x2fae2e(0x548))[_0x2fae2e(0x3fd)](_0x2098cb)[_0x2fae2e(0x883)](_0x2fae2e(0x40d)),_0x3145dd=''+(0x0,j[_0x2fae2e(0x6ca)])(this[_0x2fae2e(0x69f)],_0x5297c0+_0x2fae2e(0x5c5));if(F[_0x2fae2e(0x5f0)](_0x3145dd))return this['logger']['verbose'](this[_0x2fae2e(0x8ba)]+'\x20('+this[_0x2fae2e(0x664)]['wuid']+_0x2fae2e(0x88c)),_0x3145dd;let _0x59dffb=''+(0x0,j[_0x2fae2e(0x6ca)])(this['storePath'],_0x2fae2e(0x56e)+(0x0,X['v4'])()+_0x2fae2e(0x643));if((0x0,L['isURL'])(_0x2098cb)){let _0x23dc1f=new Date()[_0x2fae2e(0x276)](),_0x57abb5=_0x2098cb+_0x2fae2e(0x8fc)+_0x23dc1f,_0x3faf1f=await te[_0x2fae2e(0x42b)][_0x2fae2e(0x51d)](_0x57abb5,{'responseType':_0x2fae2e(0x361)});F['writeFileSync'](_0x59dffb,_0x3faf1f[_0x2fae2e(0x311)]);}else{let _0xed5694=Buffer[_0x2fae2e(0x654)](_0x2098cb,_0x2fae2e(0x588));F[_0x2fae2e(0x740)](_0x59dffb,_0xed5694);}return new Promise((_0x4d7964,_0x163754)=>{const _0x407776=_0x2fae2e;(0x0,Ue['exec'])(Ps[_0x407776(0x42b)][_0x407776(0x4b7)]+'\x20-i\x20'+_0x59dffb+'\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20'+_0x3145dd+_0x407776(0x243),_0x1160f7=>{const _0x2d27b2=_0x407776;if(F[_0x2d27b2(0x438)](_0x59dffb),_0x1160f7){this[_0x2d27b2(0x7a2)][_0x2d27b2(0x7a9)](this['instanceName']+'\x20('+this[_0x2d27b2(0x664)][_0x2d27b2(0x60f)]+'):Error\x20in\x20converting\x20audio'),_0x163754(_0x1160f7);return;}this[_0x2d27b2(0x7a2)][_0x2d27b2(0x7a9)](this[_0x2d27b2(0x8ba)]+'\x20('+this[_0x2d27b2(0x664)]['wuid']+'):Audio\x20converted\x20and\x20stored\x20in\x20cache'),_0x4d7964(_0x3145dd);});});}async[a0_0x20331d(0x4b5)](_0x7f4e1b){const _0x15c66e=a0_0x20331d;this[_0x15c66e(0x7a2)][_0x15c66e(0x7a9)](this[_0x15c66e(0x8ba)]+'\x20('+this[_0x15c66e(0x664)]['wuid']+'):Processing\x20audio');let _0x3adfc6=(0x0,Gt[_0x15c66e(0x25a)])(_0x15c66e(0x548))[_0x15c66e(0x3fd)](_0x7f4e1b)[_0x15c66e(0x883)](_0x15c66e(0x40d)),_0x3a6616=''+(0x0,j[_0x15c66e(0x6ca)])(this[_0x15c66e(0x69f)],_0x3adfc6+_0x15c66e(0x643));if(F[_0x15c66e(0x5f0)](_0x3a6616))return this[_0x15c66e(0x7a2)][_0x15c66e(0x7a9)](this[_0x15c66e(0x8ba)]+'\x20('+this[_0x15c66e(0x664)][_0x15c66e(0x60f)]+_0x15c66e(0x88c)),j['default']['basename'](_0x3a6616);let _0x2f2ab8=''+(0x0,j[_0x15c66e(0x6ca)])(this[_0x15c66e(0x69f)],_0x15c66e(0x56e)+_0x3adfc6+_0x15c66e(0x5c5));if((0x0,L[_0x15c66e(0x58b)])(_0x7f4e1b)){let _0x259436=new Date()[_0x15c66e(0x276)](),_0x2cb426=_0x7f4e1b+_0x15c66e(0x8fc)+_0x259436,_0x56432b=await te[_0x15c66e(0x42b)][_0x15c66e(0x51d)](_0x2cb426,{'responseType':_0x15c66e(0x361)});F[_0x15c66e(0x740)](_0x2f2ab8,_0x56432b[_0x15c66e(0x311)]);}else{let _0x3304b4=Buffer[_0x15c66e(0x654)](_0x7f4e1b,_0x15c66e(0x588));F['writeFileSync'](_0x2f2ab8,_0x3304b4);}return new Promise((_0x284e15,_0x5303e2)=>{const _0x2416f2=_0x15c66e;(0x0,Ue[_0x2416f2(0x318)])(Ps['default'][_0x2416f2(0x4b7)]+'\x20-i\x20'+_0x2f2ab8+'\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20'+_0x3a6616+_0x2416f2(0x243),_0x1d78db=>{const _0xf05627=_0x2416f2;if(F[_0xf05627(0x438)](_0x2f2ab8),_0x1d78db){this[_0xf05627(0x7a2)][_0xf05627(0x7a9)](this['instanceName']+'\x20('+this[_0xf05627(0x664)][_0xf05627(0x60f)]+_0xf05627(0x62b)),_0x5303e2(_0x1d78db);return;}this[_0xf05627(0x7a2)]['verbose'](this[_0xf05627(0x8ba)]+'\x20('+this[_0xf05627(0x664)][_0xf05627(0x60f)]+_0xf05627(0x6fc)),_0x284e15(j['default'][_0xf05627(0x58f)](_0x3a6616));});});}async[a0_0x20331d(0x4ba)](_0x435d5d){const _0x3992f4=a0_0x20331d;let _0x53c92a={},_0xe6686='TEXT';if(_0x435d5d[_0x3992f4(0x4ba)]?.['mediaMessage']){_0xe6686=_0x435d5d[_0x3992f4(0x4ba)][_0x3992f4(0x682)]?.[_0x3992f4(0x57f)][_0x3992f4(0x5ad)]()??_0x3992f4(0x3dd),_0x53c92a[_0x3992f4(0x492)]=_0xe6686[_0x3992f4(0x6a5)]()+_0x3992f4(0x8af);let _0x403f84=await this[_0x3992f4(0x61b)](_0x435d5d[_0x3992f4(0x4ba)][_0x3992f4(0x682)]);_0x53c92a[_0x3992f4(0x923)]=_0x403f84[_0x3992f4(0x923)][_0x53c92a['mediaKey']],_0x53c92a[_0x3992f4(0x46f)]='*'+_0x435d5d['buttonMessage'][_0x3992f4(0x416)]+_0x3992f4(0x91e)+_0x435d5d[_0x3992f4(0x4ba)]['description'];}let _0x28f937={'text':_0x435d5d[_0x3992f4(0x4ba)][_0x3992f4(0x747)][_0x3992f4(0x41b)](_0x2592f7=>_0x2592f7[_0x3992f4(0x357)]),'ids':_0x435d5d[_0x3992f4(0x4ba)][_0x3992f4(0x747)]['map'](_0x597902=>_0x597902[_0x3992f4(0x609)])};if(!(0x0,L[_0x3992f4(0x8fa)])(_0x28f937['text'])||!(0x0,L[_0x3992f4(0x8fa)])(_0x28f937[_0x3992f4(0x809)]))throw new m(_0x3992f4(0x81b),_0x3992f4(0x595));return await this[_0x3992f4(0x7a3)](_0x435d5d[_0x3992f4(0x6f9)],{'buttonsMessage':{'text':_0x53c92a?.[_0x3992f4(0x492)]?void 0x0:_0x435d5d['buttonMessage'][_0x3992f4(0x416)],'contentText':_0x53c92a?.[_0x3992f4(0x46f)]??_0x435d5d[_0x3992f4(0x4ba)][_0x3992f4(0x464)],'footerText':_0x435d5d[_0x3992f4(0x4ba)]?.[_0x3992f4(0x504)],'buttons':_0x435d5d[_0x3992f4(0x4ba)][_0x3992f4(0x747)][_0x3992f4(0x41b)](_0x2fc585=>({'buttonText':{'displayText':_0x2fc585[_0x3992f4(0x357)]},'buttonId':_0x2fc585[_0x3992f4(0x609)],'type':0x1})),'headerType':w[_0x3992f4(0x315)][_0x3992f4(0x8af)][_0x3992f4(0x4fa)][_0x3992f4(0x4f1)][_0xe6686],[_0x53c92a?.['mediaKey']]:_0x53c92a?.['message']}},_0x435d5d?.[_0x3992f4(0x5c1)]);}async['locationMessage'](_0x47ccd2){const _0x3c237c=a0_0x20331d;return await this['sendMessageWithTyping'](_0x47ccd2[_0x3c237c(0x6f9)],{'locationMessage':{'degreesLatitude':_0x47ccd2[_0x3c237c(0x6dd)][_0x3c237c(0x213)],'degreesLongitude':_0x47ccd2[_0x3c237c(0x6dd)]['longitude'],'name':_0x47ccd2['locationMessage']?.[_0x3c237c(0x8b9)],'address':_0x47ccd2[_0x3c237c(0x6dd)]?.[_0x3c237c(0x574)]}},_0x47ccd2?.[_0x3c237c(0x5c1)]);}async['contactMessage'](_0x252fa0){const _0x3ae10c=a0_0x20331d;let _0x469b28={},_0x2da070=async _0x4dfb85=>{const _0x506d0f=a0_0xae02;let _0x44b453=_0x506d0f(0x6e1)+_0x4dfb85[_0x506d0f(0x3ec)]+_0x506d0f(0x421)+_0x4dfb85[_0x506d0f(0x3ec)]+'\x0a';_0x4dfb85[_0x506d0f(0x5ac)]&&(_0x44b453+=_0x506d0f(0x65a)+_0x4dfb85[_0x506d0f(0x5ac)]+';\x0a'),_0x4dfb85[_0x506d0f(0x619)]&&(_0x44b453+=_0x506d0f(0x63c)+_0x4dfb85['email']+'\x0a'),_0x4dfb85[_0x506d0f(0x562)]&&(_0x44b453+=_0x506d0f(0x2ce)+_0x4dfb85[_0x506d0f(0x562)]+'\x0a');let _0xb5e6aa='',_0x1bddeb=0x1;if(_0x4dfb85[_0x506d0f(0x623)]){let _0x4069d4=_0x4dfb85['phoneNumber']['split']('|');for(let _0x315eee of _0x4069d4){let _0x166177=await this[_0x506d0f(0x78a)]({'numbers':[_0x315eee]}),_0x426f95=(_0x166177['length']>0x0?_0x166177[0x0][_0x506d0f(0x461)]:this[_0x506d0f(0x205)](_0x315eee))[_0x506d0f(0x759)](_0x506d0f(0x6c2),'');_0xb5e6aa+=_0x506d0f(0x57d)+_0x1bddeb+_0x506d0f(0x3d9)+_0x426f95+':'+_0x315eee+_0x506d0f(0x644)+_0x1bddeb+'.X-ABLabel:Celular\x0a',_0x1bddeb++;}}return _0x44b453+=_0xb5e6aa+_0x506d0f(0x621),_0x44b453;};return _0x252fa0[_0x3ae10c(0x821)][_0x3ae10c(0x786)]===0x1?_0x469b28[_0x3ae10c(0x821)]={'displayName':_0x252fa0[_0x3ae10c(0x821)][0x0][_0x3ae10c(0x3ec)],'vcard':await _0x2da070(_0x252fa0['contactMessage'][0x0])}:_0x469b28[_0x3ae10c(0x521)]={'displayName':_0x252fa0[_0x3ae10c(0x821)][_0x3ae10c(0x786)]+'\x20contacts','contacts':await Promise[_0x3ae10c(0x2ea)](_0x252fa0[_0x3ae10c(0x821)][_0x3ae10c(0x41b)](async _0x1f0a2b=>({'displayName':_0x1f0a2b['fullName'],'vcard':await _0x2da070(_0x1f0a2b)})))},await this[_0x3ae10c(0x7a3)](_0x252fa0['number'],{..._0x469b28},_0x252fa0?.[_0x3ae10c(0x5c1)]);}async[a0_0x20331d(0x813)](_0x3d1673){const _0x4416ed=a0_0x20331d;return await this[_0x4416ed(0x7a3)](_0x3d1673[_0x4416ed(0x813)][_0x4416ed(0x2f3)]['remoteJid'],{'reactionMessage':{'key':_0x3d1673[_0x4416ed(0x813)][_0x4416ed(0x2f3)],'text':_0x3d1673[_0x4416ed(0x813)]['reaction']}});}async[a0_0x20331d(0x78a)](_0x4621bf){const _0x5ac4c6=a0_0x20331d;let _0x44362d=[];for await(let _0x4b5eb3 of _0x4621bf[_0x5ac4c6(0x58e)]){let _0x59cc72=this[_0x5ac4c6(0x205)](_0x4b5eb3),_0x423137=!0x1;try{if((0x0,w['isJidGroup'])(_0x59cc72)){let _0x4249f8=(await this[_0x5ac4c6(0x402)]['chat']['findOne']({'where':{'_id':_0x59cc72}},this[_0x5ac4c6(0x664)][_0x5ac4c6(0x60f)]))['groupdata'];_0x4249f8?(_0x423137=!0x0,_0x44362d[_0x5ac4c6(0x4e8)](new pe(_0x4249f8['id'],_0x423137,_0x4249f8?.[_0x5ac4c6(0x605)]))):(_0x4249f8=await this[_0x5ac4c6(0x8c6)]({'groupJid':_0x59cc72},_0x5ac4c6(0x7e5)),_0x44362d[_0x5ac4c6(0x4e8)](new pe(_0x4249f8['id'],!!_0x4249f8?.['id'],_0x4249f8?.[_0x5ac4c6(0x605)])));}else{if(_0x59cc72['includes'](_0x5ac4c6(0x3b3)))_0x44362d['push'](new pe(_0x59cc72,!0x0));else{let _0x57b033=(await this[_0x5ac4c6(0x8a4)]['onWhatsApp'](_0x59cc72))[0x0];_0x44362d[_0x5ac4c6(0x4e8)](new pe(_0x57b033[_0x5ac4c6(0x461)],_0x57b033[_0x5ac4c6(0x8f2)]));}}}catch{(0x0,w[_0x5ac4c6(0x776)])(_0x59cc72)||await this[_0x5ac4c6(0x83e)](_0x59cc72),_0x44362d[_0x5ac4c6(0x4e8)](new pe(_0x4b5eb3,!0x1));}}return _0x44362d;}async[a0_0x20331d(0x83e)](_0x583164){const _0x39835c=a0_0x20331d;try{await this['repository'][_0x39835c(0x617)][_0x39835c(0x63f)]({'where':{'_id':_0x583164,'imported':!0x0}},this['instance']['wuid'])&&(await this[_0x39835c(0x402)]['chat'][_0x39835c(0x336)](_0x583164,this[_0x39835c(0x664)][_0x39835c(0x60f)]),this[_0x39835c(0x7a2)][_0x39835c(0x7f7)](_0x39835c(0x3e0)+_0x583164+_0x39835c(0x707)));}catch(_0x336840){let _0x3d9e32=_0x39835c(0x822),_0x46e3a4=_0x336840 instanceof Error?_0x336840['message']:typeof _0x336840==_0x39835c(0x4bd)?JSON[_0x39835c(0x5f3)](_0x336840):_0x336840,_0x14b103=_0x3d9e32+':\x20'+_0x46e3a4;this[_0x39835c(0x7a2)]['error'](this['instanceName']+'\x20('+this[_0x39835c(0x664)][_0x39835c(0x60f)]+_0x39835c(0x51c)+_0x14b103);}}async[a0_0x20331d(0x7e7)](_0x4bf4b8){const _0x116ebd=a0_0x20331d;try{let _0x1a8f05=_0x4bf4b8[_0x116ebd(0x5b5)][_0x116ebd(0x625)](_0x17f102=>(0x0,w[_0x116ebd(0x776)])(_0x17f102[_0x116ebd(0x3eb)])||(0x0,w['isJidUser'])(_0x17f102[_0x116ebd(0x3eb)]))[_0x116ebd(0x41b)](_0x3c8c66=>({'remoteJid':_0x3c8c66['remoteJid'],'fromMe':_0x3c8c66['fromMe'],'id':_0x3c8c66['id']}));await this['client'][_0x116ebd(0x5b5)](_0x1a8f05);let _0x23bbfa=_0x1a8f05[_0x116ebd(0x41b)](_0x589d6e=>this[_0x116ebd(0x25c)](_0x589d6e,{'status':_0x116ebd(0x72b),'owner':this[_0x116ebd(0x664)][_0x116ebd(0x60f)]})),_0x4314ac=_0x1a8f05[_0x116ebd(0x41b)](_0x543772=>this[_0x116ebd(0x402)][_0x116ebd(0x617)][_0x116ebd(0x2d5)]({'where':{'_id':_0x543772['remoteJid']}},{'unreadcount':0x0},this[_0x116ebd(0x664)][_0x116ebd(0x60f)])),[_0x4aa7d2,_0x190a90]=await Promise[_0x116ebd(0x2ea)]([Promise['all'](_0x23bbfa),Promise[_0x116ebd(0x2ea)](_0x4314ac)]);return _0x190a90[_0x116ebd(0x625)](_0x3dc19a=>_0x3dc19a!==null)[_0x116ebd(0x22b)](_0x57a5f3=>{const _0x230496=_0x116ebd;q(this['instanceName'],_0x230496(0x28b),{'chat':_0x57a5f3});}),{'message':_0x116ebd(0x482),'read':'success'};}catch(_0xdf8f83){let _0x144bea='Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida',_0x360d1d=_0xdf8f83 instanceof Error?_0xdf8f83[_0x116ebd(0x923)]:typeof _0xdf8f83==_0x116ebd(0x4bd)?JSON[_0x116ebd(0x5f3)](_0xdf8f83):_0xdf8f83,_0xa9c4aa=_0x144bea+':\x20'+_0x360d1d;throw this[_0x116ebd(0x7a2)][_0x116ebd(0x2c2)](this[_0x116ebd(0x8ba)]+'\x20('+this[_0x116ebd(0x664)][_0x116ebd(0x60f)]+_0x116ebd(0x51c)+_0xa9c4aa),new x(_0xa9c4aa);}}async['getLastMessage'](_0x77c873){const _0x478afe=a0_0x20331d;let _0x12a79e={'where':{'key':{'remoteJid':_0x77c873}},'limit':0x1},_0x39b596=await this['fetchMessages'](_0x12a79e);return _0x39b596||(this['logger'][_0x478afe(0x2c2)](_0x478afe(0x8f1)+_0x77c873),null);}async[a0_0x20331d(0x467)](_0x1cb9d1){const _0x428de1=a0_0x20331d;this[_0x428de1(0x7a2)][_0x428de1(0x7a9)](this[_0x428de1(0x8ba)]+'\x20('+this['instance'][_0x428de1(0x60f)]+'):Archiving\x20chat');try{let _0x595ed6=_0x1cb9d1[_0x428de1(0x25d)],_0x35cdc6=_0x1cb9d1[_0x428de1(0x617)];if(!_0x595ed6&&_0x35cdc6?_0x595ed6=await this[_0x428de1(0x5bc)](_0x35cdc6):(_0x595ed6=_0x1cb9d1[_0x428de1(0x25d)],_0x595ed6['messageTimestamp']=_0x595ed6?.[_0x428de1(0x627)]??Date[_0x428de1(0x37f)](),_0x35cdc6=_0x595ed6?.[_0x428de1(0x2f3)]?.[_0x428de1(0x3eb)]),!_0x595ed6||Object[_0x428de1(0x4db)](_0x595ed6)[_0x428de1(0x786)]===0x0)throw new J('Last\x20message\x20not\x20found');this['logger'][_0x428de1(0x7a9)](this[_0x428de1(0x8ba)]+'\x20('+this['instance'][_0x428de1(0x60f)]+_0x428de1(0x3cb)+_0x35cdc6);try{await this[_0x428de1(0x8a4)]['chatModify']({'archive':_0x1cb9d1[_0x428de1(0x666)],'lastMessages':[_0x595ed6]},this['createJid'](_0x35cdc6));}catch(_0x5cdc21){let _0x4e7476=_0x428de1(0x2ed)+_0x35cdc6,_0x302dab=_0x5cdc21 instanceof Error?_0x5cdc21[_0x428de1(0x923)]:typeof _0x5cdc21==_0x428de1(0x4bd)?JSON['stringify'](_0x5cdc21):_0x5cdc21,_0x5a28cf=_0x4e7476+':\x20'+_0x302dab;this[_0x428de1(0x7a2)][_0x428de1(0x2c2)](this[_0x428de1(0x8ba)]+'\x20('+this[_0x428de1(0x664)]['wuid']+_0x428de1(0x51c)+_0x5a28cf);}this['logger'][_0x428de1(0x7a9)](this[_0x428de1(0x8ba)]+'\x20('+this[_0x428de1(0x664)][_0x428de1(0x60f)]+'):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0x35cdc6);let _0x4900e9=await this['repository'][_0x428de1(0x617)][_0x428de1(0x2d5)]({'where':{'_id':_0x595ed6?.[_0x428de1(0x2f3)]?.[_0x428de1(0x3eb)]}},{'archived':_0x1cb9d1['archive']},this[_0x428de1(0x664)][_0x428de1(0x60f)]);return _0x4900e9?(this['logger']['verbose'](this[_0x428de1(0x8ba)]+'\x20('+this['instance']['wuid']+_0x428de1(0x2e3)+JSON[_0x428de1(0x5f3)](_0x4900e9)),q(this[_0x428de1(0x8ba)],_0x428de1(0x28b),{'chat':_0x4900e9})):this[_0x428de1(0x7a2)][_0x428de1(0x2c2)](this[_0x428de1(0x8ba)]+'\x20('+this['instance'][_0x428de1(0x60f)]+_0x428de1(0x295)+_0x35cdc6),{'chatId':_0x35cdc6,'archived':_0x1cb9d1[_0x428de1(0x666)]};}catch(_0x5dbf5f){let _0x44fe02=_0x428de1(0x8a3),_0x53047f=_0x5dbf5f instanceof Error?_0x5dbf5f[_0x428de1(0x923)]:typeof _0x5dbf5f=='object'?JSON[_0x428de1(0x5f3)](_0x5dbf5f):_0x5dbf5f,_0x3df453=_0x44fe02+':\x20'+_0x53047f;throw this[_0x428de1(0x7a2)][_0x428de1(0x2c2)](this[_0x428de1(0x8ba)]+'\x20('+this[_0x428de1(0x664)][_0x428de1(0x60f)]+'):\x20'+_0x3df453),new x(_0x3df453);}}async[a0_0x20331d(0x336)](_0x17a5df){const _0x11ad8=a0_0x20331d;this[_0x11ad8(0x7a2)]['verbose'](this[_0x11ad8(0x8ba)]+'\x20('+this[_0x11ad8(0x664)][_0x11ad8(0x60f)]+_0x11ad8(0x30e));try{let _0x58e1aa=await this[_0x11ad8(0x5bc)](_0x17a5df);if(!_0x58e1aa||Object[_0x11ad8(0x4db)](_0x58e1aa)[_0x11ad8(0x786)]===0x0)throw new J(_0x11ad8(0x487));let _0x59ed98=_0x58e1aa[0x0];this[_0x11ad8(0x7a2)][_0x11ad8(0x7a9)](this[_0x11ad8(0x8ba)]+'\x20('+this[_0x11ad8(0x664)][_0x11ad8(0x60f)]+'):Delete\x20chat\x20in\x20client\x20for\x20number:\x20'+_0x17a5df);try{await this[_0x11ad8(0x8a4)][_0x11ad8(0x447)]({'delete':!0x0,'lastMessages':[{'key':_0x59ed98[_0x11ad8(0x2f3)],'messageTimestamp':_0x59ed98['messageTimestamp']}]},this[_0x11ad8(0x205)](_0x17a5df));}catch(_0x427120){this[_0x11ad8(0x7a2)]['error'](_0x11ad8(0x2ed)+_0x17a5df+':\x20'+_0x427120[_0x11ad8(0x27d)]());}this['logger'][_0x11ad8(0x7a9)](this[_0x11ad8(0x8ba)]+'\x20('+this['instance'][_0x11ad8(0x60f)]+_0x11ad8(0x32a)+_0x17a5df);return;}catch(_0x5610ca){throw this['logger'][_0x11ad8(0x2c2)](this[_0x11ad8(0x8ba)]+'\x20('+this[_0x11ad8(0x664)][_0x11ad8(0x60f)]+_0x11ad8(0x907)+_0x5610ca['toString']()),new x({'archived':!0x1,'message':[_0x11ad8(0x873),_0x5610ca[_0x11ad8(0x27d)]()]});}}async[a0_0x20331d(0x509)](_0x22ff6c){const _0x20d7b9=a0_0x20331d;try{let _0x3e776a=await this['client']['sendMessage'](_0x22ff6c[_0x20d7b9(0x3eb)],{'delete':_0x22ff6c});try{let _0x201105=await this['updateMessage'](_0x22ff6c,{'status':_0x20d7b9(0x455),'owner':this[_0x20d7b9(0x664)][_0x20d7b9(0x60f)]});this[_0x20d7b9(0x7a2)][_0x20d7b9(0x7a9)](this[_0x20d7b9(0x8ba)]+'\x20('+this[_0x20d7b9(0x664)]['wuid']+_0x20d7b9(0x497)+_0x201105);}catch(_0x44a0b5){this['logger'][_0x20d7b9(0x2c2)]('Error\x20updating\x20message\x20status:'+_0x44a0b5);}return _0x3e776a;}catch(_0x53c98f){throw new x(_0x20d7b9(0x827),_0x53c98f?.['toString']());}}async['getBase64FromMediaMessage'](_0x471568){const _0x295531=a0_0x20331d;try{let _0x476fef=_0x471568?.[_0x295531(0x923)]?_0x471568:await this[_0x295531(0x378)](_0x471568[_0x295531(0x2f3)],!0x0);for(let _0x5c009e of Aa)_0x476fef[_0x295531(0x923)][_0x5c009e]&&(_0x476fef[_0x295531(0x923)]=_0x476fef[_0x295531(0x923)][_0x5c009e][_0x295531(0x923)]);let _0x22c6b2,_0x5c9a89;for(let _0x57960e of Ra)if(_0x22c6b2=_0x476fef[_0x295531(0x923)][_0x57960e],_0x22c6b2){_0x5c9a89=_0x57960e;break;}if(!_0x22c6b2)throw _0x295531(0x424);typeof _0x22c6b2[_0x295531(0x492)]==_0x295531(0x4bd)&&(_0x476fef[_0x295531(0x923)]=JSON[_0x295531(0x79b)](JSON[_0x295531(0x5f3)](_0x476fef[_0x295531(0x923)])));let _0x472ff2=await(0x0,w[_0x295531(0x3c5)])({'key':_0x476fef?.['key'],'message':_0x476fef?.['message']},_0x295531(0x472),{},{'logger':(0x0,qt[_0x295531(0x42b)])({'level':_0x295531(0x79e)}),'reuploadRequest':this[_0x295531(0x8a4)][_0x295531(0x7c3)]});if(!(_0x472ff2 instanceof Buffer))throw new Error('Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.');let _0x4b141d=this[_0x295531(0x373)][_0x295531(0x51d)](_0x295531(0x8c2)),_0xc2bb9c,_0x30bdbf;if(_0x22c6b2[_0x295531(0x7ad)])_0xc2bb9c=_0x22c6b2[_0x295531(0x7ad)];else{let _0xf4e994=_0x22c6b2[_0x295531(0x893)]?.['match'](/\/(\w+)/),_0x399dfe=_0xf4e994?_0xf4e994[0x1]:null;if(!_0x399dfe)throw new Error(_0x295531(0x705));_0xc2bb9c=(0x0,X['v4'])()+'.'+_0x399dfe;}_0x5c9a89==='audioMessage'?_0x30bdbf=_0x295531(0x406)+await this[_0x295531(0x4b5)](_0x472ff2[_0x295531(0x27d)](_0x295531(0x588))):(await this[_0x295531(0x364)](_0x472ff2,_0xc2bb9c),_0x30bdbf=_0x295531(0x406)+_0xc2bb9c);let _0x1c06c0=this[_0x295531(0x373)][_0x295531(0x51d)]('SERVER')[_0x295531(0x8ac)];if(!_0x1c06c0){let _0x3dacca=this[_0x295531(0x373)]['get'](_0x295531(0x53d));_0x1c06c0=_0x295531(0x398)+(_0x3dacca&&_0x3dacca['FULLCHAIN']['split']('/')[0x4]);}_0x30bdbf=''+_0x1c06c0+_0x30bdbf;let _0x4ed122=0xc*0x3c*0x3c*0x3e8,_0x4836eb={'where':{'_id':_0x476fef[_0x295531(0x2f3)]['id']}},_0x1b0a9d={'message_normalized.fileUrl':_0x30bdbf,'message_normalized.expires_fileUrl':Date[_0x295531(0x37f)]()+_0x4ed122};try{let _0x8193fa=await this[_0x295531(0x402)][_0x295531(0x923)][_0x295531(0x3fd)](_0x4836eb,_0x1b0a9d,this[_0x295531(0x664)][_0x295531(0x60f)]);_0x8193fa&&q(this[_0x295531(0x8ba)],_0x295531(0x92e),{'message':_0x8193fa});}catch(_0x46dff4){let _0x1dd88b=_0x295531(0x753),_0x12196a=_0x46dff4 instanceof Error?_0x46dff4[_0x295531(0x923)]:typeof _0x46dff4=='object'?JSON[_0x295531(0x5f3)](_0x46dff4):_0x46dff4,_0x43e94f=_0x1dd88b+':\x20'+_0x12196a;this[_0x295531(0x7a2)][_0x295531(0x2c2)](this[_0x295531(0x8ba)]+'\x20('+this[_0x295531(0x664)][_0x295531(0x60f)]+_0x295531(0x51c)+_0x43e94f);}return{'mediaType':_0x5c9a89,'fileName':_0x22c6b2[_0x295531(0x7ad)],'caption':_0x22c6b2[_0x295531(0x312)],'size':{'fileLength':_0x22c6b2[_0x295531(0x3bc)],'height':_0x22c6b2[_0x295531(0x1f7)],'width':_0x22c6b2[_0x295531(0x8f7)]},'mimetype':_0x22c6b2[_0x295531(0x893)],'base64':_0x472ff2[_0x295531(0x27d)]('base64'),'fileUrl':_0x30bdbf,'expires_fileUrl':Date[_0x295531(0x37f)]()+_0x4ed122};}catch(_0x2a5ce7){let _0x5a6389=_0x295531(0x607),_0x3f2433=_0x2a5ce7 instanceof Error?_0x2a5ce7[_0x295531(0x923)]:typeof _0x2a5ce7=='object'?JSON[_0x295531(0x5f3)](_0x2a5ce7):_0x2a5ce7,_0x4cbaa0=_0x5a6389+':\x20'+_0x3f2433;throw this[_0x295531(0x7a2)][_0x295531(0x2c2)](this[_0x295531(0x8ba)]+'\x20('+this[_0x295531(0x664)][_0x295531(0x60f)]+_0x295531(0x51c)+_0x4cbaa0),new m(_0x4cbaa0);}}async[a0_0x20331d(0x364)](_0x5b63d9,_0x9494d){const _0x553f18=a0_0x20331d;let _0x1a5797=j[_0x553f18(0x42b)][_0x553f18(0x6ca)](__dirname,_0x553f18(0x307));F['existsSync'](_0x1a5797)||F[_0x553f18(0x67d)](_0x1a5797,{'recursive':!0x0});let _0x236b7d=j[_0x553f18(0x42b)][_0x553f18(0x6ca)](_0x1a5797,_0x9494d);return new Promise((_0x4b775c,_0x457fd2)=>{const _0x44accd=_0x553f18;F[_0x44accd(0x272)](_0x236b7d,_0x5b63d9,_0x247fd8=>{const _0x162119=_0x44accd;_0x247fd8?(this[_0x162119(0x7a2)][_0x162119(0x2c2)](_0x162119(0x45f)+(_0x247fd8 instanceof Error?_0x247fd8[_0x162119(0x923)]:JSON[_0x162119(0x5f3)](_0x247fd8,null,0x2))),_0x457fd2(_0x247fd8)):(this[_0x162119(0x7a2)][_0x162119(0x834)](_0x162119(0x305)+_0x236b7d),_0x4b775c(_0x236b7d));});});}async[a0_0x20331d(0x815)](_0x467d89){const _0x1ac691=a0_0x20331d;return await this[_0x1ac691(0x402)][_0x1ac691(0x929)][_0x1ac691(0x691)](_0x467d89,this[_0x1ac691(0x664)]['wuid']);}async['fetchLabels'](){const _0x142c93=a0_0x20331d;return await this[_0x142c93(0x402)][_0x142c93(0x47b)]['find']({'where':{}},this[_0x142c93(0x664)][_0x142c93(0x60f)]);}async[a0_0x20331d(0x2b3)](_0x3200b0){const _0x5c5300=a0_0x20331d;return await this[_0x5c5300(0x402)][_0x5c5300(0x923)][_0x5c5300(0x691)](_0x3200b0,this[_0x5c5300(0x664)]['wuid']);}async['fetchChats'](){const _0x2d2d40=a0_0x20331d;return this['repository'][_0x2d2d40(0x617)][_0x2d2d40(0x51b)](this[_0x2d2d40(0x664)][_0x2d2d40(0x60f)]),this[_0x2d2d40(0x402)][_0x2d2d40(0x617)][_0x2d2d40(0x4ab)](this['instance'][_0x2d2d40(0x60f)]),this[_0x2d2d40(0x402)][_0x2d2d40(0x617)]['updateMissingTags'](this[_0x2d2d40(0x664)][_0x2d2d40(0x60f)]),this[_0x2d2d40(0x402)][_0x2d2d40(0x617)][_0x2d2d40(0x7ba)](this[_0x2d2d40(0x664)][_0x2d2d40(0x60f)]),await this['repository'][_0x2d2d40(0x617)][_0x2d2d40(0x691)]({'where':{}},this[_0x2d2d40(0x664)]['wuid']);}async[a0_0x20331d(0x28c)](_0x33f189){const _0x14fae8=a0_0x20331d;try{if(!Array[_0x14fae8(0x3f2)](_0x33f189)||_0x33f189[_0x14fae8(0x786)]===0x0)throw new Error(_0x14fae8(0x240));let _0x5ac222=[],_0x578b1c=[];for(let _0x165aaa of _0x33f189){if(_0x165aaa[_0x14fae8(0x53e)])_0x165aaa[_0x14fae8(0x53e)]=this[_0x14fae8(0x205)](_0x165aaa[_0x14fae8(0x53e)]);else continue;await this['repository'][_0x14fae8(0x617)][_0x14fae8(0x63f)]({'where':{'_id':_0x165aaa[_0x14fae8(0x53e)]}},this[_0x14fae8(0x664)][_0x14fae8(0x60f)])?_0x578b1c[_0x14fae8(0x4e8)]({'_id':_0x165aaa[_0x14fae8(0x53e)],'leadInfo':_0x165aaa[_0x14fae8(0x766)],'owner':this[_0x14fae8(0x664)][_0x14fae8(0x60f)]}):_0x5ac222[_0x14fae8(0x4e8)]({'_id':_0x165aaa[_0x14fae8(0x53e)],'owner':this[_0x14fae8(0x664)][_0x14fae8(0x60f)],'leadInfo':_0x165aaa['leadInfo'],'imported':!0x0});}return _0x578b1c[_0x14fae8(0x786)]>0x0&&await this['repository'][_0x14fae8(0x617)]['updateMany'](_0x578b1c[_0x14fae8(0x41b)](_0x2d06a5=>({'query':{'where':{'_id':_0x2d06a5[_0x14fae8(0x53e)],'owner':this[_0x14fae8(0x664)][_0x14fae8(0x60f)]}},'update':_0x2d06a5}))),_0x5ac222['length']>0x0&&await this[_0x14fae8(0x402)][_0x14fae8(0x617)][_0x14fae8(0x323)](_0x5ac222,this[_0x14fae8(0x664)][_0x14fae8(0x60f)]),{'updated':_0x578b1c[_0x14fae8(0x786)],'inserted':_0x5ac222['length']};}catch(_0xe7c6eb){let _0x33076b=_0x14fae8(0x3c2),_0x25d30b=_0xe7c6eb instanceof Error?_0xe7c6eb[_0x14fae8(0x923)]:typeof _0xe7c6eb=='object'?JSON[_0x14fae8(0x5f3)](_0xe7c6eb):_0xe7c6eb,_0x45b41e=_0x33076b+':\x20'+_0x25d30b;throw this[_0x14fae8(0x7a2)]['error'](this['instanceName']+'\x20('+this[_0x14fae8(0x664)][_0x14fae8(0x60f)]+'):\x20'+_0x45b41e),new m(_0x45b41e);}}async[a0_0x20331d(0x825)](_0x5bf67b){const _0x36f57a=a0_0x20331d;try{if(!Array[_0x36f57a(0x3f2)](_0x5bf67b)||_0x5bf67b['length']===0x0)throw new Error(_0x36f57a(0x240));let _0x6f8d42=0x64,_0x4dae59=0x0;for(let _0x42fae7=0x0;_0x42fae7<_0x5bf67b[_0x36f57a(0x786)];_0x42fae7+=_0x6f8d42){let _0x25b6e7=_0x5bf67b['slice'](_0x42fae7,_0x42fae7+_0x6f8d42),{updated:_0x127628}=await this[_0x36f57a(0x73d)](_0x25b6e7);_0x4dae59+=_0x127628;}return{'updated':_0x4dae59};}catch(_0x40ee7d){let _0x21e14f='Erro\x20ao\x20importar\x20chats',_0x51f821=_0x40ee7d instanceof Error?_0x40ee7d[_0x36f57a(0x923)]:typeof _0x40ee7d==_0x36f57a(0x4bd)?JSON[_0x36f57a(0x5f3)](_0x40ee7d):_0x40ee7d,_0x21409a=_0x21e14f+':\x20'+_0x51f821;throw this[_0x36f57a(0x7a2)][_0x36f57a(0x2c2)](this[_0x36f57a(0x8ba)]+'\x20('+this[_0x36f57a(0x664)]['wuid']+'):\x20'+_0x21409a),new m(_0x21409a);}}async[a0_0x20331d(0x73d)](_0x5b0ccf){const _0x584bc6=a0_0x20331d;try{let _0x5ebe43=await this[_0x584bc6(0x402)]['label']['find']({'where':{}},this[_0x584bc6(0x664)]['wuid']),_0x19c5ac=new Set(_0x5ebe43[_0x584bc6(0x41b)](_0x37b0ab=>_0x37b0ab[_0x584bc6(0x53e)])),_0x2cd3d8=[],_0x2a3357=[];for(let _0x118b65 of _0x5b0ccf){if(!_0x118b65['_id'])continue;_0x118b65[_0x584bc6(0x53e)]=this[_0x584bc6(0x205)](_0x118b65[_0x584bc6(0x53e)]);let _0x5c8852=await this[_0x584bc6(0x402)][_0x584bc6(0x617)][_0x584bc6(0x63f)]({'where':{'_id':_0x118b65['_id']}},this['instance'][_0x584bc6(0x60f)]),_0x2f7f5e={};if(Object[_0x584bc6(0x458)](_0x118b65[_0x584bc6(0x766)])['forEach'](([_0x5de7a9,_0x5e8676])=>{const _0x595eb5=_0x584bc6;_0x2f7f5e[_0x595eb5(0x5bb)+_0x5de7a9]=_0x5e8676;}),_0x5c8852&&!_0x5c8852[_0x584bc6(0x60d)]){let _0x2afa81=(_0x118b65[_0x584bc6(0x766)][_0x584bc6(0x820)]||[])[_0x584bc6(0x625)](_0x26c04a=>_0x19c5ac[_0x584bc6(0x718)](_0x26c04a)),_0x4372a8=new Set(_0x5c8852[_0x584bc6(0x766)]['etiquetas']||[]),_0x303cb9=_0x2afa81['filter'](_0x19564a=>!_0x4372a8[_0x584bc6(0x718)](_0x19564a)),_0x5eef2f=[..._0x4372a8]['filter'](_0x1ffb3e=>!_0x2afa81['includes'](_0x1ffb3e));_0x2a3357['push'](..._0x303cb9[_0x584bc6(0x41b)](_0x45bed9=>this['AddChatLabel'](_0x45bed9,_0x118b65[_0x584bc6(0x53e)]))),_0x2a3357['push'](..._0x5eef2f['map'](_0x181bba=>this[_0x584bc6(0x58a)](_0x181bba,_0x118b65[_0x584bc6(0x53e)]))),_0x118b65[_0x584bc6(0x766)][_0x584bc6(0x820)]=_0x2afa81,_0x2cd3d8[_0x584bc6(0x4e8)]({'query':{'where':{'_id':_0x118b65[_0x584bc6(0x53e)],'owner':this[_0x584bc6(0x664)][_0x584bc6(0x60f)]}},'update':_0x2f7f5e});}else _0x2f7f5e[_0x584bc6(0x60d)]=!0x0,_0x2cd3d8['push']({'query':{'where':{'_id':_0x118b65[_0x584bc6(0x53e)],'owner':this[_0x584bc6(0x664)][_0x584bc6(0x60f)]}},'update':_0x2f7f5e});}let _0x16de04=await this[_0x584bc6(0x402)][_0x584bc6(0x617)]['updateMany'](_0x2cd3d8);return await Promise[_0x584bc6(0x2ea)](_0x2a3357),{'updated':_0x16de04};}catch(_0x28b240){let _0x25a39e=_0x584bc6(0x3c2),_0x55a093=_0x28b240 instanceof Error?_0x28b240[_0x584bc6(0x923)]:typeof _0x28b240==_0x584bc6(0x4bd)?JSON[_0x584bc6(0x5f3)](_0x28b240):_0x28b240,_0x27a70c=_0x25a39e+':\x20'+_0x55a093;throw this[_0x584bc6(0x7a2)]['error'](this['instanceName']+'\x20('+this['instance'][_0x584bc6(0x60f)]+_0x584bc6(0x51c)+_0x27a70c),new m(_0x27a70c);}}async[a0_0x20331d(0x2bb)](){const _0x23aaf8=a0_0x20331d;return await this['client'][_0x23aaf8(0x2bb)]();}async[a0_0x20331d(0x3e6)](_0x1908ba){const _0x51d804=a0_0x20331d;try{return await this[_0x51d804(0x8a4)][_0x51d804(0x2f2)](_0x1908ba['privacySettings'][_0x51d804(0x6d1)]),await this[_0x51d804(0x8a4)]['updateProfilePicturePrivacy'](_0x1908ba[_0x51d804(0x53b)][_0x51d804(0x4f6)]),await this[_0x51d804(0x8a4)][_0x51d804(0x3db)](_0x1908ba[_0x51d804(0x53b)][_0x51d804(0x8aa)]),await this[_0x51d804(0x8a4)][_0x51d804(0x551)](_0x1908ba[_0x51d804(0x53b)]['online']),await this[_0x51d804(0x8a4)][_0x51d804(0x721)](_0x1908ba[_0x51d804(0x53b)][_0x51d804(0x7f8)]),await this[_0x51d804(0x8a4)][_0x51d804(0x549)](_0x1908ba[_0x51d804(0x53b)]['groupadd']),this[_0x51d804(0x8a4)]?.['ws']?.[_0x51d804(0x8fe)](),{'update':_0x51d804(0x1ed),'data':{'readreceipts':_0x1908ba[_0x51d804(0x53b)][_0x51d804(0x6d1)],'profile':_0x1908ba[_0x51d804(0x53b)]['profile'],'status':_0x1908ba[_0x51d804(0x53b)][_0x51d804(0x8aa)],'online':_0x1908ba['privacySettings'][_0x51d804(0x73f)],'last':_0x1908ba[_0x51d804(0x53b)]['last'],'groupadd':_0x1908ba[_0x51d804(0x53b)][_0x51d804(0x24f)]}};}catch(_0x46f8ca){let _0x2f3932=_0x51d804(0x42d),_0x390b6b=_0x46f8ca instanceof Error?_0x46f8ca[_0x51d804(0x923)]:typeof _0x46f8ca=='object'?JSON['stringify'](_0x46f8ca):_0x46f8ca,_0x26edfd=_0x2f3932+':\x20'+_0x390b6b;throw this[_0x51d804(0x7a2)][_0x51d804(0x2c2)](this['instanceName']+'\x20('+this[_0x51d804(0x664)]['wuid']+_0x51d804(0x51c)+_0x26edfd),new m(_0x26edfd);}}async[a0_0x20331d(0x514)](_0x12ba1a){const _0x449155=a0_0x20331d;let _0x3ba026=(_0x12ba1a?this[_0x449155(0x205)](_0x12ba1a):this['client']?.[_0x449155(0x34e)]?.['id'])['replace'](/:\d{1,2}@/g,'@');this[_0x449155(0x7a2)][_0x449155(0x7a9)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x449155(0x632)+_0x3ba026);let _0x2f0691=await this['repository'][_0x449155(0x929)][_0x449155(0x63f)]({'where':{'_id':_0x3ba026}},this[_0x449155(0x664)][_0x449155(0x60f)]),_0xa712d6=_0x2f0691?_0x2f0691[_0x449155(0x932)]:null;try{let _0x11b4fe=(await this[_0x449155(0x78a)]({'numbers':[_0x3ba026]}))?.[_0x449155(0x76c)](),_0x87b151=(await this[_0x449155(0x4a1)](_0x3ba026,null,!0x1))[_0x449155(0x761)][_0x449155(0x36f)],_0x1a5365=await this[_0x449155(0x640)](_0x11b4fe?.[_0x449155(0x461)]),_0x4282a3=await this[_0x449155(0x69d)](_0x11b4fe?.[_0x449155(0x461)]),_0x1be9e2=(await this[_0x449155(0x4a1)](_0x3ba026,null,!0x1))[_0x449155(0x761)]['name'],_0x38768e=await this[_0x449155(0x402)][_0x449155(0x617)][_0x449155(0x63f)]({'where':{'_id':_0x3ba026}},this[_0x449155(0x664)]['wuid']),_0x1ee4ef={'imagechat':_0x87b151,'contactname':_0xa712d6||null,'pushName':_0x1be9e2,'status':_0x1a5365?.[_0x449155(0x8aa)],'isBusiness':_0x4282a3[_0x449155(0x608)],'email':_0x4282a3?.['email'],'description':_0x4282a3?.[_0x449155(0x464)],'website':_0x4282a3?.['website']?.['shift'](),'lastcache':Date[_0x449155(0x37f)](),'imported':!_0x38768e},_0x5b940c=await this[_0x449155(0x402)][_0x449155(0x617)]['updateOne']({'where':{'_id':_0x3ba026}},_0x1ee4ef,this[_0x449155(0x664)]['wuid']),_0x1f10ac={'owner':this[_0x449155(0x664)]['wuid'],'_id':_0x3ba026,'profilePictureUrl':_0x87b151,'status':_0x1a5365?.[_0x449155(0x8aa)]};return this[_0x449155(0x402)]['contact'][_0x449155(0x3fd)]([_0x1f10ac],this[_0x449155(0x664)]['wuid']),_0x5b940c&&q(this[_0x449155(0x8ba)],_0x449155(0x28b),{'chat':_0x5b940c}),{'wuid':_0x11b4fe?.[_0x449155(0x461)]||_0x3ba026,'name':_0x11b4fe?.[_0x449155(0x8b9)],'pushName':_0x1be9e2,'numberExists':_0x11b4fe?.[_0x449155(0x8f2)],'picture':_0x87b151,'status':_0x1a5365?.[_0x449155(0x8aa)],'isBusiness':_0x4282a3[_0x449155(0x608)],'email':_0x4282a3?.[_0x449155(0x619)],'description':_0x4282a3?.[_0x449155(0x464)],'website':_0x4282a3?.[_0x449155(0x777)]?.[_0x449155(0x76c)]()};}catch(_0x12bea1){return this[_0x449155(0x7a2)][_0x449155(0x2c2)]('Error\x20fetching\x20and\x20updating\x20profile:\x20'+(_0x12bea1 instanceof Error?_0x12bea1[_0x449155(0x923)]:JSON['stringify'](_0x12bea1,null,0x2))),{};}}async[a0_0x20331d(0x69d)](_0x34fc19){const _0x6ec6e8=a0_0x20331d;this['logger'][_0x6ec6e8(0x7a9)](this[_0x6ec6e8(0x8ba)]+'\x20('+this['instance'][_0x6ec6e8(0x60f)]+_0x6ec6e8(0x914));try{let _0x27ac98=_0x34fc19?this['createJid'](_0x34fc19):this[_0x6ec6e8(0x664)][_0x6ec6e8(0x60f)],_0x313330=await this['client'][_0x6ec6e8(0x45d)](_0x27ac98);return this[_0x6ec6e8(0x7a2)][_0x6ec6e8(0x7a9)](this[_0x6ec6e8(0x8ba)]+'\x20('+this['instance'][_0x6ec6e8(0x60f)]+_0x6ec6e8(0x50a)),_0x313330?(this[_0x6ec6e8(0x7a2)][_0x6ec6e8(0x7a9)](this['instanceName']+'\x20('+this[_0x6ec6e8(0x664)][_0x6ec6e8(0x60f)]+_0x6ec6e8(0x6b6)),{'isBusiness':!0x0,..._0x313330}):{'isBusiness':!0x1,'message':'Not\x20is\x20business\x20profile',...(await this['whatsappNumber']({'numbers':[_0x27ac98]}))?.[_0x6ec6e8(0x76c)]()};}catch(_0x5bac4f){let _0x34cd35=_0x6ec6e8(0x419),_0x56b6fa=_0x5bac4f instanceof Error?_0x5bac4f[_0x6ec6e8(0x923)]:typeof _0x5bac4f==_0x6ec6e8(0x4bd)?JSON[_0x6ec6e8(0x5f3)](_0x5bac4f):_0x5bac4f,_0x4dc9ed=_0x34cd35+':\x20'+_0x56b6fa;throw this[_0x6ec6e8(0x7a2)]['error'](this[_0x6ec6e8(0x8ba)]+'\x20('+this[_0x6ec6e8(0x664)][_0x6ec6e8(0x60f)]+'):\x20'+_0x4dc9ed),new x(_0x4dc9ed);}}async[a0_0x20331d(0x640)](_0xabdf64){const _0x1407aa=a0_0x20331d;let _0x56efe9=this[_0x1407aa(0x205)](_0xabdf64);try{return{'wuid':_0x56efe9,'status':(await this['client']['fetchStatus'](_0x56efe9))[0x0]?.['status']};}catch{return{'wuid':_0x56efe9,'status':null};}}async['updateProfileName'](_0x3c8423){const _0x1519d8=a0_0x20331d;try{return await this[_0x1519d8(0x8a4)][_0x1519d8(0x692)](_0x3c8423),{'update':_0x1519d8(0x1ed)};}catch(_0x297385){let _0x15f235=_0x1519d8(0x68c),_0x7f0acf=_0x297385 instanceof Error?_0x297385[_0x1519d8(0x923)]:typeof _0x297385==_0x1519d8(0x4bd)?JSON[_0x1519d8(0x5f3)](_0x297385):_0x297385,_0x34fb0d=_0x15f235+':\x20'+_0x7f0acf;throw this[_0x1519d8(0x7a2)][_0x1519d8(0x2c2)](this[_0x1519d8(0x8ba)]+'\x20('+this['instance'][_0x1519d8(0x60f)]+_0x1519d8(0x51c)+_0x34fb0d),new x(_0x34fb0d);}}async[a0_0x20331d(0x90b)](_0x2e72ca){const _0x996816=a0_0x20331d;try{return await this[_0x996816(0x8a4)]['updateProfileStatus'](_0x2e72ca),{'update':'success'};}catch(_0x105c57){let _0x407be2='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus',_0x343e69=_0x105c57 instanceof Error?_0x105c57[_0x996816(0x923)]:typeof _0x105c57==_0x996816(0x4bd)?JSON[_0x996816(0x5f3)](_0x105c57):_0x105c57,_0x55b4e4=_0x407be2+':\x20'+_0x343e69;throw this[_0x996816(0x7a2)]['error'](this[_0x996816(0x8ba)]+'\x20('+this[_0x996816(0x664)][_0x996816(0x60f)]+_0x996816(0x51c)+_0x55b4e4),new x(_0x55b4e4);}}async[a0_0x20331d(0x4bf)](_0x108c15){const _0x10b380=a0_0x20331d;try{let _0x573db1;if((0x0,L[_0x10b380(0x58b)])(_0x108c15)){let _0x28bcbd=new Date()[_0x10b380(0x276)](),_0x218376=_0x108c15+'?timestamp='+_0x28bcbd;_0x573db1=(await te[_0x10b380(0x42b)][_0x10b380(0x51d)](_0x218376,{'responseType':'arraybuffer'}))[_0x10b380(0x311)];}else{if((0x0,L['isBase64'])(_0x108c15))_0x573db1=Buffer[_0x10b380(0x654)](_0x108c15,_0x10b380(0x588));else throw new m(_0x10b380(0x354));}return await this[_0x10b380(0x8a4)][_0x10b380(0x4bf)](this['instance'][_0x10b380(0x60f)],_0x573db1),{'update':_0x10b380(0x1ed)};}catch(_0x195296){let _0x3636e6='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture',_0x307a44=_0x195296 instanceof Error?_0x195296['message']:typeof _0x195296=='object'?JSON[_0x10b380(0x5f3)](_0x195296):_0x195296,_0x51e06a=_0x3636e6+':\x20'+_0x307a44;throw this[_0x10b380(0x7a2)]['error'](this['instanceName']+'\x20('+this[_0x10b380(0x664)][_0x10b380(0x60f)]+'):\x20'+_0x51e06a),new x(_0x51e06a);}}async[a0_0x20331d(0x5a3)](){const _0x12d40d=a0_0x20331d;try{return await this[_0x12d40d(0x8a4)][_0x12d40d(0x5a3)](this[_0x12d40d(0x664)][_0x12d40d(0x60f)]),{'update':_0x12d40d(0x1ed)};}catch(_0x19e88c){let _0x3e6187=_0x12d40d(0x62e),_0x43368f=_0x19e88c instanceof Error?_0x19e88c['message']:typeof _0x19e88c==_0x12d40d(0x4bd)?JSON[_0x12d40d(0x5f3)](_0x19e88c):_0x19e88c,_0x5602b7=_0x3e6187+':\x20'+_0x43368f;throw this[_0x12d40d(0x7a2)]['error'](this[_0x12d40d(0x8ba)]+'\x20('+this[_0x12d40d(0x664)][_0x12d40d(0x60f)]+_0x12d40d(0x51c)+_0x5602b7),new x(_0x5602b7);}}async['createGroup'](_0x4f2900){const _0x4fef19=a0_0x20331d;try{let _0x4cb4f3=(await this[_0x4fef19(0x78a)]({'numbers':_0x4f2900['participants']}))[_0x4fef19(0x625)](_0x2bcc09=>_0x2bcc09['exists'])[_0x4fef19(0x41b)](_0x2086bc=>_0x2086bc[_0x4fef19(0x461)]),{id:_0x54297d}=await this['client'][_0x4fef19(0x7d6)](_0x4f2900[_0x4fef19(0x605)],_0x4cb4f3);_0x4f2900?.[_0x4fef19(0x464)]&&await this[_0x4fef19(0x8a4)][_0x4fef19(0x6cc)](_0x54297d,_0x4f2900[_0x4fef19(0x464)]);let _0x1d8659=await this[_0x4fef19(0x8a4)][_0x4fef19(0x5a7)](_0x54297d);return _0x1d8659[_0x4fef19(0x1f6)]=[],{'metadata':_0x1d8659};}catch(_0xcb4260){let _0x5dc1be=_0x4fef19(0x7bf),_0x5049aa=_0xcb4260 instanceof Error?_0xcb4260['message']:typeof _0xcb4260==_0x4fef19(0x4bd)?JSON[_0x4fef19(0x5f3)](_0xcb4260):_0xcb4260,_0x4d9244=_0x5dc1be+':\x20'+_0x5049aa;throw this[_0x4fef19(0x7a2)][_0x4fef19(0x2c2)](this[_0x4fef19(0x8ba)]+'\x20('+this[_0x4fef19(0x664)][_0x4fef19(0x60f)]+'):\x20'+_0x4d9244),new x(_0x4d9244);}}async[a0_0x20331d(0x23d)](_0x148bfc){const _0x54e6a9=a0_0x20331d;try{if(_0x148bfc[_0x54e6a9(0x6a3)]===!0x0&&await this['client']['groupSettingUpdate'](_0x148bfc[_0x54e6a9(0x545)],_0x54e6a9(0x8f0)),_0x148bfc[_0x54e6a9(0x6a3)]===!0x1&&await this['client'][_0x54e6a9(0x4e5)](_0x148bfc[_0x54e6a9(0x545)],_0x54e6a9(0x8d8)),_0x148bfc[_0x54e6a9(0x72d)]===!0x0&&await this['client'][_0x54e6a9(0x4e5)](_0x148bfc[_0x54e6a9(0x545)],_0x54e6a9(0x6e9)),_0x148bfc['announce']===!0x1&&await this['client'][_0x54e6a9(0x4e5)](_0x148bfc[_0x54e6a9(0x545)],_0x54e6a9(0x41d)),_0x148bfc['memberAddMode']===!0x0&&await this[_0x54e6a9(0x8a4)][_0x54e6a9(0x780)](_0x148bfc[_0x54e6a9(0x545)],_0x54e6a9(0x525)),_0x148bfc[_0x54e6a9(0x1f0)]===!0x1&&await this['client']['groupMemberAddMode'](_0x148bfc[_0x54e6a9(0x545)],_0x54e6a9(0x2d6)),_0x148bfc['joinApprovalMode']===!0x0&&await this[_0x54e6a9(0x8a4)][_0x54e6a9(0x3aa)](_0x148bfc[_0x54e6a9(0x545)],'on'),_0x148bfc[_0x54e6a9(0x4be)]===!0x1&&await this[_0x54e6a9(0x8a4)][_0x54e6a9(0x3aa)](_0x148bfc[_0x54e6a9(0x545)],'off'),typeof _0x148bfc[_0x54e6a9(0x5d4)]<'u'&&_0x148bfc['expiration']!==null&&await this[_0x54e6a9(0x8a4)][_0x54e6a9(0x730)](_0x148bfc[_0x54e6a9(0x545)],_0x148bfc[_0x54e6a9(0x5d4)]),_0x148bfc[_0x54e6a9(0x8b9)]&&await this['client'][_0x54e6a9(0x2a8)](_0x148bfc[_0x54e6a9(0x545)],_0x148bfc[_0x54e6a9(0x8b9)]),_0x148bfc[_0x54e6a9(0x464)]&&await this['client'][_0x54e6a9(0x6cc)](_0x148bfc['groupJid'],_0x148bfc[_0x54e6a9(0x464)]),_0x148bfc[_0x54e6a9(0x801)]){let _0x511dfd;if((0x0,L['isURL'])(_0x148bfc[_0x54e6a9(0x801)])){let _0x10b729=new Date()['getTime'](),_0x4af2ee=_0x148bfc[_0x54e6a9(0x801)]+_0x54e6a9(0x8fc)+_0x10b729;_0x511dfd=(await te[_0x54e6a9(0x42b)][_0x54e6a9(0x51d)](_0x4af2ee,{'responseType':_0x54e6a9(0x361)}))[_0x54e6a9(0x311)];}else{if((0x0,L[_0x54e6a9(0x88e)])(_0x148bfc[_0x54e6a9(0x801)]))_0x511dfd=Buffer[_0x54e6a9(0x654)](_0x148bfc['image'],_0x54e6a9(0x588));else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}await this[_0x54e6a9(0x8a4)]['updateProfilePicture'](_0x148bfc[_0x54e6a9(0x545)],_0x511dfd);}return await this[_0x54e6a9(0x8c6)]({'groupJid':_0x148bfc[_0x54e6a9(0x545)]});}catch(_0x222da8){let _0x6b2372='Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting',_0x19bb61=_0x222da8 instanceof Error?_0x222da8['message']:typeof _0x222da8=='object'?JSON['stringify'](_0x222da8):_0x222da8,_0x5b5561=_0x6b2372+':\x20'+_0x19bb61;throw this[_0x54e6a9(0x7a2)][_0x54e6a9(0x2c2)](this['instanceName']+'\x20('+this[_0x54e6a9(0x664)][_0x54e6a9(0x60f)]+_0x54e6a9(0x51c)+_0x5b5561),new x(_0x5b5561);}}async[a0_0x20331d(0x74f)](_0x1a4d9b){const _0x24d39=a0_0x20331d;try{if(_0x1a4d9b[_0x24d39(0x2db)]===_0x24d39(0x2bd)||_0x1a4d9b[_0x24d39(0x2db)]===_0x24d39(0x4de)){let _0x1c102f=_0x1a4d9b[_0x24d39(0x38f)][_0x24d39(0x41b)](_0x300eea=>this[_0x24d39(0x205)](_0x300eea));await this[_0x24d39(0x8a4)][_0x24d39(0x7be)](_0x1a4d9b['groupJid'],_0x1c102f,_0x1a4d9b['action']);}else{if(_0x1a4d9b['action']===_0x24d39(0x783)){let _0xdc687d=(await this[_0x24d39(0x78a)]({'numbers':_0x1a4d9b['participants']}))[_0x24d39(0x625)](_0x465577=>_0x465577[_0x24d39(0x8f2)])[_0x24d39(0x41b)](_0x354f56=>this[_0x24d39(0x205)](_0x354f56[_0x24d39(0x461)]));if(_0xdc687d['length']===0x0)throw new m(_0x24d39(0x40c));await this['client'][_0x24d39(0x386)](_0x1a4d9b[_0x24d39(0x545)],_0xdc687d,_0x24d39(0x783));}else{let _0xdfe2e4=_0x1a4d9b[_0x24d39(0x38f)]['map'](_0x5ac016=>this['createJid'](_0x5ac016));await this[_0x24d39(0x8a4)][_0x24d39(0x386)](_0x1a4d9b['groupJid'],_0xdfe2e4,_0x1a4d9b[_0x24d39(0x2db)]);}}return await this[_0x24d39(0x8c6)]({'groupJid':_0x1a4d9b[_0x24d39(0x545)]});}catch(_0x5dfa06){let _0x2aff40='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant',_0x211f5d=_0x5dfa06 instanceof Error?_0x5dfa06['message']:typeof _0x5dfa06=='object'?JSON[_0x24d39(0x5f3)](_0x5dfa06):_0x5dfa06,_0x57fdc2=_0x2aff40+':\x20'+_0x211f5d;throw this[_0x24d39(0x7a2)][_0x24d39(0x2c2)](this[_0x24d39(0x8ba)]+'\x20('+this[_0x24d39(0x664)]['wuid']+'):\x20'+_0x57fdc2),new m(_0x57fdc2);}}async[a0_0x20331d(0x4f9)](_0x1d6f63){const _0x4fbfb6=a0_0x20331d;try{return await this['client'][_0x4fbfb6(0x4f9)](_0x1d6f63[_0x4fbfb6(0x1e3)]);}catch(_0x5d229d){let _0x1e39ca=_0x4fbfb6(0x64f),_0x2a0965=_0x5d229d instanceof Error?_0x5d229d[_0x4fbfb6(0x923)]:typeof _0x5d229d==_0x4fbfb6(0x4bd)?JSON[_0x4fbfb6(0x5f3)](_0x5d229d):_0x5d229d,_0x13536f=_0x1e39ca+':\x20'+_0x2a0965;throw this[_0x4fbfb6(0x7a2)][_0x4fbfb6(0x2c2)](this['instanceName']+'\x20('+this['instance'][_0x4fbfb6(0x60f)]+_0x4fbfb6(0x51c)+_0x13536f),new m(_0x13536f);}}async[a0_0x20331d(0x8c6)](_0x392c6e,_0x1dd47c=a0_0x20331d(0x828)){const _0x2fad18=a0_0x20331d;try{let _0x2da705=await this['repository']['chat'][_0x2fad18(0x63f)]({'where':{'_id':_0x392c6e[_0x2fad18(0x545)]}},this['instance']['wuid']),_0x4ba33c=_0x2da705?_0x2da705[_0x2fad18(0x3c9)]:null,_0x3f57d0=0x18*0x3c*0x3c*0x3e8;if(!_0x4ba33c||_0x4ba33c[_0x2fad18(0x6d2)]&&Date['now']()-_0x4ba33c[_0x2fad18(0x6d2)]>_0x3f57d0){let _0x1c8619=await this['client']['groupMetadata'](_0x392c6e[_0x2fad18(0x545)]);if(_0x1c8619['subjectTime']=_0x1c8619?.['subjectTime']&&_0x1c8619[_0x2fad18(0x2c1)]['toString']()[_0x2fad18(0x786)]<0xd?_0x1c8619?.[_0x2fad18(0x2c1)]*0x3e8:_0x1c8619?.['subjectTime']||null,_0x1c8619[_0x2fad18(0x3bf)]=_0x1c8619?.['creation']&&_0x1c8619['creation'][_0x2fad18(0x27d)]()['length']<0xd?_0x1c8619?.[_0x2fad18(0x3bf)]*0x3e8:_0x1c8619?.[_0x2fad18(0x3bf)]||null,_0x4ba33c={..._0x1c8619,'lastUpdate':Date['now']()},!_0x1c8619)return;}let _0x3d2a39=_0x4ba33c[_0x2fad18(0x38f)][_0x2fad18(0x270)](_0x29b014=>_0x29b014['id']===this['instance'][_0x2fad18(0x60f)]+_0x2fad18(0x6c2)&&_0x29b014[_0x2fad18(0x463)]!=null);!_0x4ba33c[_0x2fad18(0x1e3)]&&_0x3d2a39&&(_0x4ba33c['inviteCode']=(await this[_0x2fad18(0x1e3)](_0x392c6e,!0x1))[_0x2fad18(0x616)]);let _0x260893=(!_0x4ba33c[_0x2fad18(0x72d)]||_0x3d2a39)&&(!_0x4ba33c[_0x2fad18(0x67c)]||_0x4ba33c['isCommunity']&&_0x4ba33c[_0x2fad18(0x826)]&&_0x3d2a39);_0x4ba33c[_0x2fad18(0x86c)]=_0x3d2a39,_0x4ba33c['canSendMessage']=_0x260893;let _0x3ea9e5=[];if(_0x3d2a39&&_0x4ba33c['joinApprovalMode'])try{_0x3ea9e5=await this[_0x2fad18(0x8a4)][_0x2fad18(0x3b4)](_0x392c6e[_0x2fad18(0x545)]),_0x4ba33c[_0x2fad18(0x653)]=Date[_0x2fad18(0x37f)]();}catch(_0xf78809){this[_0x2fad18(0x7a2)][_0x2fad18(0x7a9)](this['instanceName']+'\x20('+this[_0x2fad18(0x664)][_0x2fad18(0x60f)]+'):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20'+_0x392c6e['groupJid']+':\x20'+(_0xf78809 instanceof Error?_0xf78809[_0x2fad18(0x923)]:JSON[_0x2fad18(0x5f3)](_0xf78809,null,0x2)));}try{_0x4ba33c[_0x2fad18(0x801)]=(await this[_0x2fad18(0x4a1)](_0x392c6e[_0x2fad18(0x545)],null,!0x0))[_0x2fad18(0x761)][_0x2fad18(0x36f)];}catch(_0x154d01){this['logger'][_0x2fad18(0x7a9)](this[_0x2fad18(0x8ba)]+'\x20('+this['instance'][_0x2fad18(0x60f)]+_0x2fad18(0x61d)+_0x392c6e['groupJid']+':\x20'+(_0x154d01 instanceof Error?_0x154d01['message']:JSON['stringify'](_0x154d01,null,0x2)));}let _0x17fd86=_0x4ba33c[_0x2fad18(0x38f)][_0x2fad18(0x41b)](_0xd8c281=>_0xd8c281['id']),_0x199907=_0x3ea9e5[_0x2fad18(0x41b)](_0x162a1f=>_0x162a1f[_0x2fad18(0x461)]),_0x2e5997=await this['repository'][_0x2fad18(0x65d)][_0x2fad18(0x639)]([..._0x17fd86,..._0x199907]);_0x4ba33c[_0x2fad18(0x38f)]=_0x4ba33c['participants'][_0x2fad18(0x41b)](_0x5d48f2=>{const _0x51680b=_0x2fad18;let _0x27640a=_0x2e5997['find'](_0x3d782f=>_0x3d782f['_id']===_0x5d48f2['id']);return{'id':_0x5d48f2['id'],'isAdmin':[_0x51680b(0x463),_0x51680b(0x744)][_0x51680b(0x8eb)](_0x5d48f2[_0x51680b(0x463)]),'admin':_0x5d48f2['admin'],'pushName':_0x27640a?.[_0x51680b(0x8b9)],'profilePictureUrl':_0x27640a?.[_0x51680b(0x36f)]};}),_0x4ba33c[_0x2fad18(0x1f6)]=_0x3ea9e5[_0x2fad18(0x41b)](_0x581e8d=>{const _0x32c3bc=_0x2fad18;let _0x1f631a=_0x2e5997['find'](_0x1224f3=>_0x1224f3[_0x32c3bc(0x53e)]===_0x581e8d[_0x32c3bc(0x461)]);return{'id':_0x581e8d[_0x32c3bc(0x461)],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x1f631a?.[_0x32c3bc(0x8b9)],'profilePictureUrl':_0x1f631a?.['pictureUrl'],'request_method':_0x581e8d[_0x32c3bc(0x329)],'request_time':_0x581e8d[_0x32c3bc(0x716)]};});let _0x22d9fb=await this[_0x2fad18(0x402)][_0x2fad18(0x617)][_0x2fad18(0x2d5)]({'where':{'_id':_0x392c6e[_0x2fad18(0x545)]}},{'imagechat':_0x4ba33c['image'],'name':_0x4ba33c[_0x2fad18(0x605)],'lastcache':Date[_0x2fad18(0x37f)](),'groupdata':_0x4ba33c},this['instance'][_0x2fad18(0x60f)]);return q(this[_0x2fad18(0x8ba)],_0x2fad18(0x28b),{'chat':_0x22d9fb}),{'metadata':_0x4ba33c};}catch(_0x52266a){if(_0x1dd47c===_0x2fad18(0x7e5))return;throw new J('Error\x20fetching\x20group',_0x52266a[_0x2fad18(0x923)][_0x2fad18(0x27d)]());}}async['findGroups'](){const _0x2b72d9=a0_0x20331d;try{this['logger']['info'](_0x2b72d9(0x3cf));let _0x18ca29=Date[_0x2b72d9(0x37f)](),_0x33fe99=0x3*0x3c*0x3c*0x3e8;return _0x18ca29-this['lastRealGroupsFetch']>_0x33fe99&&(this[_0x2b72d9(0x561)](),this[_0x2b72d9(0x6db)]=_0x18ca29),(await this[_0x2b72d9(0x402)][_0x2b72d9(0x617)][_0x2b72d9(0x78e)]({'where':{'group':!0x0}},this[_0x2b72d9(0x664)]['wuid']))[_0x2b72d9(0x41b)](_0x4e7b3b=>({..._0x4e7b3b[_0x2b72d9(0x3c9)],'groupJid':_0x4e7b3b?.[_0x2b72d9(0x53e)],'participants':_0x4e7b3b?.[_0x2b72d9(0x3c9)]?.[_0x2b72d9(0x38f)]||[],'awaitingApproval':_0x4e7b3b?.[_0x2b72d9(0x3c9)]?.[_0x2b72d9(0x1f6)]||[],'image':_0x4e7b3b?.[_0x2b72d9(0x7b8)]}));}catch(_0x34f9ee){let _0x4cd84c='Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups',_0x57a60e=_0x34f9ee instanceof Error?_0x34f9ee[_0x2b72d9(0x923)]:typeof _0x34f9ee==_0x2b72d9(0x4bd)?JSON[_0x2b72d9(0x5f3)](_0x34f9ee):_0x34f9ee,_0x186c64=_0x4cd84c+':\x20'+_0x57a60e;throw this[_0x2b72d9(0x7a2)][_0x2b72d9(0x2c2)](this[_0x2b72d9(0x8ba)]+'\x20('+this[_0x2b72d9(0x664)][_0x2b72d9(0x60f)]+_0x2b72d9(0x51c)+_0x186c64),new J(_0x186c64);}}async[a0_0x20331d(0x561)](){const _0x1e54e7=a0_0x20331d;try{this[_0x1e54e7(0x7a2)][_0x1e54e7(0x7f7)](_0x1e54e7(0x1fa));let _0xe7c514=[],_0x1df927=await this['client'][_0x1e54e7(0x818)](),_0x2de740=Object[_0x1e54e7(0x610)](_0x1df927),_0x1044bd=_0x2de740[_0x1e54e7(0x625)](_0x3da795=>(0x0,w['isJidGroup'])(_0x3da795?.['id']))[_0x1e54e7(0x41b)](async _0x479448=>{const _0x16e7f0=_0x1e54e7;try{return await this[_0x16e7f0(0x8a4)]['profilePictureUrl'](_0x479448['id'],_0x16e7f0(0x770));}catch(_0x15b36c){return this[_0x16e7f0(0x7a2)][_0x16e7f0(0x7a9)](this[_0x16e7f0(0x8ba)]+'\x20('+this['instance'][_0x16e7f0(0x60f)]+'):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20'+_0x479448['id']+':\x20'+(_0x15b36c instanceof Error?_0x15b36c[_0x16e7f0(0x923)]:JSON['stringify'](_0x15b36c,null,0x2))),null;}}),_0x1c1119=await Promise['all'](_0x1044bd);for(let _0x16fefb=0x0;_0x16fefb<_0x2de740[_0x1e54e7(0x786)];_0x16fefb++){let _0x1cff72=_0x2de740[_0x16fefb];(0x0,w[_0x1e54e7(0x776)])(_0x1cff72?.['id'])&&(_0xe7c514[_0x1e54e7(0x4e8)]({'groupJid':_0x1cff72?.['id'],'subject':_0x1cff72?.['subject'],'subjectOwner':_0x1cff72?.['subjectOwner']?.[_0x1e54e7(0x382)]('@')[0x0],'subjectTime':_0x1cff72?.['subjectTime'],'creation':_0x1cff72?.[_0x1e54e7(0x3bf)],'size':_0x1cff72?.[_0x1e54e7(0x38f)]?.[_0x1e54e7(0x786)],'owner':_0x1cff72?.[_0x1e54e7(0x63b)]?.[_0x1e54e7(0x382)]('@')[0x0],'desc':_0x1cff72?.[_0x1e54e7(0x5cf)],'restrict':_0x1cff72?.[_0x1e54e7(0x6a3)],'announce':_0x1cff72?.[_0x1e54e7(0x72d)],'image':_0x1c1119[_0x16fefb],'isCommunity':_0x1cff72?.['isCommunity'],'joinApprovalMode':_0x1cff72?.['joinApprovalMode'],'memberCanAddParticipant':_0x1cff72?.[_0x1e54e7(0x1f0)],'participants':_0x1cff72?.['participants'],'descOwner':_0x1cff72?.[_0x1e54e7(0x6ab)],'descId':_0x1cff72?.[_0x1e54e7(0x208)],'memberAddMode':_0x1cff72?.['memberAddMode'],'isCommunityAnnounce':_0x1cff72?.[_0x1e54e7(0x826)],'ephemeralDuration':_0x1cff72?.[_0x1e54e7(0x5ea)]||0x0,'author':_0x1cff72?.[_0x1e54e7(0x422)]}),this['updateChatGroupData'](_0x2de740[_0x16fefb]));}return _0xe7c514;}catch(_0x17f00a){let _0x4d4723=_0x1e54e7(0x787),_0x411104=_0x17f00a instanceof Error?_0x17f00a[_0x1e54e7(0x923)]:typeof _0x17f00a=='object'?JSON['stringify'](_0x17f00a):_0x17f00a,_0x5d8f55=_0x4d4723+':\x20'+_0x411104;throw this[_0x1e54e7(0x7a2)][_0x1e54e7(0x2c2)](this['instanceName']+'\x20('+this[_0x1e54e7(0x664)][_0x1e54e7(0x60f)]+_0x1e54e7(0x51c)+_0x5d8f55),new J(_0x5d8f55);}}async['updateChatGroupData'](_0x31bbc8){const _0x4816ea=a0_0x20331d;let _0x4c3ddd=await this['repository']['chat'][_0x4816ea(0x63f)]({'where':{'_id':_0x31bbc8['id']}},this['instance']['wuid']);_0x31bbc8['subjectTime']=_0x31bbc8?.[_0x4816ea(0x2c1)]&&_0x31bbc8['subjectTime'][_0x4816ea(0x27d)]()[_0x4816ea(0x786)]<0xd?_0x31bbc8?.['subjectTime']*0x3e8:_0x31bbc8?.[_0x4816ea(0x2c1)]||null,_0x31bbc8['creation']=_0x31bbc8?.[_0x4816ea(0x3bf)]&&_0x31bbc8[_0x4816ea(0x3bf)][_0x4816ea(0x27d)]()['length']<0xd?_0x31bbc8?.[_0x4816ea(0x3bf)]*0x3e8:_0x31bbc8?.[_0x4816ea(0x3bf)]||null;let _0x4fc67f=_0x4c3ddd?.[_0x4816ea(0x3c9)]?.[_0x4816ea(0x1f6)]||[],_0x3d4e32=_0x4c3ddd?.[_0x4816ea(0x3c9)]?.['lastFetchAwaitingApproval'],_0x5c6565=_0x31bbc8[_0x4816ea(0x38f)]['map'](_0x5f07ba=>{const _0x2b9052=_0x4816ea;let _0x2a5e75=_0x4c3ddd?.[_0x2b9052(0x3c9)]?.[_0x2b9052(0x38f)][_0x2b9052(0x691)](_0x4ea355=>_0x4ea355['id']===_0x5f07ba['id']);return{..._0x5f07ba,'isAdmin':[_0x2b9052(0x463),_0x2b9052(0x744)]['includes'](_0x5f07ba['admin']),'admin':_0x5f07ba[_0x2b9052(0x463)],'name':_0x2a5e75?.['name']||_0x5f07ba[_0x2b9052(0x8b9)],'imgUrl':_0x2a5e75?.[_0x2b9052(0x720)]||_0x5f07ba[_0x2b9052(0x720)]};}),_0x39025b=_0x5c6565[_0x4816ea(0x270)](_0x32eee2=>_0x32eee2['id']===this[_0x4816ea(0x664)][_0x4816ea(0x60f)]+_0x4816ea(0x6c2)&&_0x32eee2['isAdmin']),_0x14a979=(!_0x31bbc8['announce']||_0x39025b)&&(!_0x31bbc8[_0x4816ea(0x67c)]||_0x31bbc8[_0x4816ea(0x67c)]&&_0x31bbc8[_0x4816ea(0x826)]&&_0x39025b),_0x1d26f6={..._0x31bbc8,'participants':_0x5c6565,'awaitingApproval':_0x4fc67f,'lastFetchAwaitingApproval':_0x3d4e32,'isAdmin':_0x39025b,'canSendMessage':_0x14a979,'lastUpdate':Date[_0x4816ea(0x37f)]()};await this[_0x4816ea(0x402)]['chat'][_0x4816ea(0x2d5)]({'where':{'_id':_0x31bbc8['id']}},{'name':_0x31bbc8[_0x4816ea(0x605)],'group':!0x0,'groupdata':_0x1d26f6,'lastcache':Date[_0x4816ea(0x37f)]()},this['instance'][_0x4816ea(0x60f)]),q(this['instanceName'],_0x4816ea(0x28b),{'chat':_0x31bbc8});}async['updateGroupWebhook'](_0x1bde34){const _0x486c93=a0_0x20331d;let _0x416177=await this[_0x486c93(0x402)][_0x486c93(0x617)]['findOne']({'where':{'_id':_0x1bde34['id']}},this['instance'][_0x486c93(0x60f)]);_0x1bde34[_0x486c93(0x2c1)]=_0x1bde34?.[_0x486c93(0x2c1)]&&_0x1bde34[_0x486c93(0x2c1)]['toString']()[_0x486c93(0x786)]<0xd?_0x1bde34?.['subjectTime']*0x3e8:_0x1bde34?.[_0x486c93(0x2c1)]||null,_0x1bde34['creation']=_0x1bde34?.[_0x486c93(0x3bf)]&&_0x1bde34[_0x486c93(0x3bf)][_0x486c93(0x27d)]()[_0x486c93(0x786)]<0xd?_0x1bde34?.[_0x486c93(0x3bf)]*0x3e8:_0x1bde34?.[_0x486c93(0x3bf)]||null,_0x1bde34[_0x486c93(0x1e3)]&&(_0x1bde34['inviteCode']=_0x486c93(0x591)+_0x1bde34['inviteCode']);let _0x3e2975=_0x416177?.[_0x486c93(0x3c9)]?{..._0x416177['groupdata']}:{};Object[_0x486c93(0x4db)](_0x1bde34)[_0x486c93(0x22b)](_0x5acb0d=>{_0x5acb0d!=='id'&&(_0x3e2975[_0x5acb0d]=_0x1bde34[_0x5acb0d]);});let _0x2bef9e=_0x3e2975[_0x486c93(0x38f)]?.[_0x486c93(0x270)](_0x13fbfa=>_0x13fbfa['id']===this['instance']['wuid']+'@s.whatsapp.net'&&_0x13fbfa['isAdmin'])||!0x1;_0x3e2975['isAdmin']=_0x2bef9e;let _0x2bf6ac=(!_0x3e2975['announce']||_0x2bef9e)&&(!_0x3e2975[_0x486c93(0x67c)]||_0x3e2975[_0x486c93(0x67c)]&&_0x3e2975[_0x486c93(0x826)]&&_0x2bef9e);_0x3e2975[_0x486c93(0x495)]=_0x2bf6ac;let _0x24bb8c={'group':!0x0,'groupdata':_0x3e2975};_0x1bde34[_0x486c93(0x605)]&&(_0x24bb8c[_0x486c93(0x8b9)]=_0x1bde34[_0x486c93(0x605)]),await this['repository'][_0x486c93(0x617)][_0x486c93(0x2d5)]({'where':{'_id':_0x1bde34['id']}},_0x24bb8c,this['instance'][_0x486c93(0x60f)],{'upsert':!0x0}),q(this[_0x486c93(0x8ba)],'chats',{'chat':_0x24bb8c});}async['updateGroupParticipantsWebhook'](_0x5efe3d){const _0xec9d34=a0_0x20331d;let _0x37c874=await this[_0xec9d34(0x402)][_0xec9d34(0x617)][_0xec9d34(0x63f)]({'where':{'_id':_0x5efe3d['id']}},this[_0xec9d34(0x664)][_0xec9d34(0x60f)]);if(!_0x37c874||!_0x37c874['groupdata']){this['logger'][_0xec9d34(0x7f7)](this[_0xec9d34(0x8ba)]+'\x20('+this[_0xec9d34(0x664)][_0xec9d34(0x60f)]+_0xec9d34(0x877)+_0x5efe3d['id']);return;}let _0x36691c=await this['repository'][_0xec9d34(0x65d)]['findManyByIds'](_0x5efe3d[_0xec9d34(0x38f)]),_0x34e525=[..._0x37c874[_0xec9d34(0x3c9)]?.[_0xec9d34(0x38f)]];switch(_0x5efe3d[_0xec9d34(0x2db)]){case'add':let _0x2bacf9=_0x36691c[_0xec9d34(0x41b)](_0x482f09=>({'id':_0x482f09[_0xec9d34(0x53e)],'isAdmin':!0x1,'name':_0x482f09['name'],'imgUrl':_0x482f09[_0xec9d34(0x36f)]}));_0x34e525=[..._0x34e525,..._0x2bacf9];break;case'remove':_0x34e525=_0x34e525[_0xec9d34(0x625)](_0x105035=>!_0x5efe3d[_0xec9d34(0x38f)][_0xec9d34(0x8eb)](_0x105035['id']));break;case'promote':case'demote':_0x34e525=_0x34e525[_0xec9d34(0x41b)](_0x2ffd77=>_0x5efe3d['participants'][_0xec9d34(0x8eb)](_0x2ffd77['id'])?{..._0x2ffd77,'isAdmin':_0x5efe3d[_0xec9d34(0x2db)]===_0xec9d34(0x5a4)}:_0x2ffd77);break;}let _0x145b05=_0x34e525[_0xec9d34(0x786)],_0x16f207=_0x34e525[_0xec9d34(0x270)](_0x461393=>_0x461393['id']===this[_0xec9d34(0x664)][_0xec9d34(0x60f)]+'@s.whatsapp.net'),_0xfa7ecd=_0x16f207&&_0x34e525[_0xec9d34(0x270)](_0x189640=>_0x189640['id']===this['instance'][_0xec9d34(0x60f)]+_0xec9d34(0x6c2)&&_0x189640[_0xec9d34(0x86c)]),_0x44b405=_0x16f207&&(!_0x37c874[_0xec9d34(0x3c9)][_0xec9d34(0x72d)]||_0xfa7ecd)&&(!_0x37c874[_0xec9d34(0x3c9)][_0xec9d34(0x67c)]||_0x37c874['groupdata']['isCommunity']&&_0xfa7ecd);await this[_0xec9d34(0x402)][_0xec9d34(0x617)]['updateOne']({'where':{'_id':_0x5efe3d['id']}},{'groupdata':{..._0x37c874['groupdata'],'participants':_0x34e525,'size':_0x145b05,'isAdmin':_0xfa7ecd,'canSendMessage':_0x44b405}},this[_0xec9d34(0x664)][_0xec9d34(0x60f)]),this[_0xec9d34(0x7a2)][_0xec9d34(0x7f7)](this['instanceName']+'\x20('+this[_0xec9d34(0x664)][_0xec9d34(0x60f)]+'):\x20Grupo\x20'+_0x5efe3d['id']+_0xec9d34(0x861)+_0x5efe3d[_0xec9d34(0x2db)]+_0xec9d34(0x38c)+_0x145b05+_0xec9d34(0x20e)+_0xfa7ecd+_0xec9d34(0x6f8)+_0x44b405);}async[a0_0x20331d(0x1e3)](_0x20297d,_0x382458=!0x0){const _0x20d1da=a0_0x20331d;try{let _0x18d101=await this[_0x20d1da(0x8a4)][_0x20d1da(0x895)](_0x20297d[_0x20d1da(0x545)]),_0x139dd5={'groupdata.inviteCode':_0x20d1da(0x591)+_0x18d101};if(_0x382458){let _0x25380c=await this['repository'][_0x20d1da(0x617)]['updateOne']({'where':{'_id':_0x20297d[_0x20d1da(0x545)]}},_0x139dd5,this[_0x20d1da(0x664)][_0x20d1da(0x60f)]);}return{'inviteUrl':_0x20d1da(0x591)+_0x18d101,'inviteCode':_0x18d101};}catch(_0x1aff66){let _0x2e9f9e=_0x20d1da(0x343),_0x372385=_0x1aff66 instanceof Error?_0x1aff66['message']:typeof _0x1aff66==_0x20d1da(0x4bd)?JSON[_0x20d1da(0x5f3)](_0x1aff66):_0x1aff66,_0x1e32b3=_0x2e9f9e+':\x20'+_0x372385;throw this[_0x20d1da(0x7a2)][_0x20d1da(0x2c2)](this[_0x20d1da(0x8ba)]+'\x20('+this[_0x20d1da(0x664)][_0x20d1da(0x60f)]+'):\x20'+_0x1e32b3),new J(_0x1e32b3);}}async[a0_0x20331d(0x823)](_0x4e652e){const _0x3660a1=a0_0x20331d;try{let _0x1cbbe1=await this[_0x3660a1(0x8a4)]['groupRevokeInvite'](_0x4e652e[_0x3660a1(0x545)]);return{'revoked':!0x0,'inviteUrl':'https://chat.whatsapp.com/'+_0x1cbbe1,'inviteCode':_0x1cbbe1};}catch(_0x340c66){let _0x48e7de=_0x3660a1(0x901),_0x4e94b3=_0x340c66 instanceof Error?_0x340c66[_0x3660a1(0x923)]:typeof _0x340c66=='object'?JSON['stringify'](_0x340c66):_0x340c66,_0xb836a=_0x48e7de+':\x20'+_0x4e94b3;throw this['logger'][_0x3660a1(0x2c2)](this[_0x3660a1(0x8ba)]+'\x20('+this['instance'][_0x3660a1(0x60f)]+_0x3660a1(0x51c)+_0xb836a),new J(_0xb836a);}}async[a0_0x20331d(0x732)](_0xbf5e66){const _0x6d5f13=a0_0x20331d;try{if((0x0,L[_0x6d5f13(0x58b)])(_0xbf5e66['inviteCode']))var _0x1bc7ad=_0xbf5e66[_0x6d5f13(0x1e3)]['split']('/')[0x3];else var _0x1bc7ad=_0xbf5e66['inviteCode'];let _0x3d6d53=await this[_0x6d5f13(0x8a4)]['groupAcceptInvite'](_0x1bc7ad);return this[_0x6d5f13(0x7a2)][_0x6d5f13(0x7a9)](this[_0x6d5f13(0x8ba)]+'\x20('+this[_0x6d5f13(0x664)][_0x6d5f13(0x60f)]+_0x6d5f13(0x51c)+_0x3d6d53),{'join':!0x0,'inviteCode':_0x1bc7ad,'groupJid':_0x3d6d53};}catch(_0x3186fe){let _0x5a8096='Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url',_0x383fec=_0x3186fe instanceof Error?_0x3186fe[_0x6d5f13(0x923)]:typeof _0x3186fe=='object'?JSON['stringify'](_0x3186fe):_0x3186fe,_0x45fd6d=_0x5a8096+':\x20'+_0x383fec;throw this['logger'][_0x6d5f13(0x2c2)](this[_0x6d5f13(0x8ba)]+'\x20('+this['instance'][_0x6d5f13(0x60f)]+_0x6d5f13(0x51c)+_0x45fd6d),new J(_0x45fd6d);}}async[a0_0x20331d(0x79c)](_0x1841eb){const _0x26cb50=a0_0x20331d;try{return{'participants':(await this[_0x26cb50(0x402)][_0x26cb50(0x617)][_0x26cb50(0x63f)]({'where':{'_id':_0x1841eb[_0x26cb50(0x545)]}},this['instance'][_0x26cb50(0x60f)]))[_0x26cb50(0x3c9)][_0x26cb50(0x38f)]};}catch(_0x1f1051){let _0x4bc8ed=_0x26cb50(0x592),_0xd745c7=_0x1f1051 instanceof Error?_0x1f1051[_0x26cb50(0x923)]:typeof _0x1f1051=='object'?JSON[_0x26cb50(0x5f3)](_0x1f1051):_0x1f1051,_0x4e9510=_0x4bc8ed+':\x20'+_0xd745c7;throw this[_0x26cb50(0x7a2)][_0x26cb50(0x2c2)](this[_0x26cb50(0x8ba)]+'\x20('+this[_0x26cb50(0x664)]['wuid']+_0x26cb50(0x51c)+_0x4e9510),new J(_0x4e9510);}}async['leaveGroup'](_0x4b63a7){const _0x1859d9=a0_0x20331d;try{return await this[_0x1859d9(0x8a4)][_0x1859d9(0x6c0)](_0x4b63a7[_0x1859d9(0x545)]),{'groupJid':_0x4b63a7[_0x1859d9(0x545)],'leave':!0x0};}catch(_0x5d7127){let _0x1d93b7=_0x1859d9(0x4ee),_0x2c6378=_0x5d7127 instanceof Error?_0x5d7127['message']:typeof _0x5d7127==_0x1859d9(0x4bd)?JSON[_0x1859d9(0x5f3)](_0x5d7127):_0x5d7127,_0x10f876=_0x1d93b7+':\x20'+_0x2c6378;throw this[_0x1859d9(0x7a2)][_0x1859d9(0x2c2)](this[_0x1859d9(0x8ba)]+'\x20('+this[_0x1859d9(0x664)][_0x1859d9(0x60f)]+_0x1859d9(0x51c)+_0x10f876),new m(_0x10f876);}}async[a0_0x20331d(0x283)](_0x339080){const _0x6f92b7=a0_0x20331d;return await this[_0x6f92b7(0x7a3)](_0x339080[_0x6f92b7(0x6f9)],{'poll':{'name':_0x339080[_0x6f92b7(0x283)]?.[_0x6f92b7(0x8b9)],'selectableCount':_0x339080['pollMessage'][_0x6f92b7(0x77a)],'values':_0x339080['pollMessage'][_0x6f92b7(0x610)]}},_0x339080?.[_0x6f92b7(0x5c1)]);}async[a0_0x20331d(0x57c)](_0x4425f8){const _0x3d99bb=a0_0x20331d;return await this[_0x3d99bb(0x7a3)](_0x4425f8[_0x3d99bb(0x6f9)],{'listMessage':{'title':_0x4425f8[_0x3d99bb(0x57c)][_0x3d99bb(0x416)],'description':_0x4425f8['listMessage'][_0x3d99bb(0x464)],'buttonText':_0x4425f8[_0x3d99bb(0x57c)]?.['buttonText'],'footerText':_0x4425f8[_0x3d99bb(0x57c)]?.[_0x3d99bb(0x504)],'sections':_0x4425f8[_0x3d99bb(0x57c)]['sections'],'listType':0x2}},_0x4425f8?.[_0x3d99bb(0x5c1)]);}async[a0_0x20331d(0x817)](_0x5d194d){const _0x25ed6b=a0_0x20331d;let _0x23d31c;if(_0x5d194d[_0x25ed6b(0x817)][_0x25ed6b(0x32e)]===_0x25ed6b(0x41e)){let _0x25b5f8=_0x5d194d[_0x25ed6b(0x817)][_0x25ed6b(0x4e1)][_0x25ed6b(0x3ee)]('\x0a'),_0x577009='',_0x9b0ef4='';_0x25b5f8!==-0x1?(_0x577009=_0x5d194d[_0x25ed6b(0x817)][_0x25ed6b(0x4e1)]['substring'](0x0,_0x25b5f8)[_0x25ed6b(0x291)](),_0x9b0ef4=_0x5d194d[_0x25ed6b(0x817)][_0x25ed6b(0x4e1)]['substring'](_0x25b5f8+0x1)):_0x9b0ef4=_0x5d194d['menuMessage']['text'];let _0x40b7d5=_0x5d194d[_0x25ed6b(0x817)]['choices'][_0x25ed6b(0x625)](_0x4e5477=>_0x4e5477[_0x25ed6b(0x291)]()!==''),_0x1b56a8=this[_0x25ed6b(0x23b)](_0x40b7d5);_0x23d31c={'listMessage':{'title':_0x577009,'description':_0x9b0ef4,'buttonText':_0x5d194d[_0x25ed6b(0x817)]['buttonText']||'Selecione','footerText':_0x5d194d[_0x25ed6b(0x817)][_0x25ed6b(0x504)],'sections':_0x1b56a8,'listType':0x2}};}else{if(_0x5d194d[_0x25ed6b(0x817)]['type']===_0x25ed6b(0x266)){let _0x156036=_0x5d194d[_0x25ed6b(0x817)][_0x25ed6b(0x871)]['filter'](_0x7749f3=>!(_0x7749f3[_0x25ed6b(0x359)]('[')&&_0x7749f3['endsWith'](']'))&&_0x7749f3[_0x25ed6b(0x291)]()!=='')[_0x25ed6b(0x41b)](_0x3c7b69=>_0x3c7b69[_0x25ed6b(0x382)]('\x0a')[0x0]);_0x23d31c={'poll':{'name':_0x5d194d[_0x25ed6b(0x817)][_0x25ed6b(0x4e1)],'selectableCount':_0x5d194d['menuMessage'][_0x25ed6b(0x77a)]||0x1,'values':_0x156036}};}}return await this['sendMessageWithTyping'](_0x5d194d['number'],_0x23d31c,_0x5d194d?.[_0x25ed6b(0x5c1)]);}['createSectionsFromValues'](_0x475bd4){const _0x33b63e=a0_0x20331d;let _0x4b8a00=[],_0x239f79={'rows':[]};return _0x475bd4[_0x33b63e(0x22b)](_0x5c7e93=>{const _0x112315=_0x33b63e;if(_0x5c7e93[_0x112315(0x359)]('[')&&_0x5c7e93['endsWith'](']'))_0x239f79[_0x112315(0x7d3)][_0x112315(0x786)]>0x0&&_0x4b8a00[_0x112315(0x4e8)](_0x239f79),_0x239f79={'title':_0x5c7e93['slice'](0x1,-0x1),'rows':[]};else{let _0x4282c5=_0x5c7e93['split']('\x0a')['map'](_0x1897d7=>_0x1897d7[_0x112315(0x291)]()),_0x300201=_0x4282c5[0x0],_0x4d16d8=_0x4282c5[0x1]||null,_0x29b86c=_0x4282c5[0x2]||_0x300201;_0x239f79[_0x112315(0x7d3)][_0x112315(0x4e8)]({'title':_0x300201,'description':_0x4d16d8,'rowId':_0x29b86c});}}),_0x239f79[_0x33b63e(0x7d3)]['length']>0x0&&_0x4b8a00[_0x33b63e(0x4e8)](_0x239f79),_0x4b8a00;}async['updateMessage'](_0x4f1c79,_0x292b0d){const _0x497d28=a0_0x20331d;if(await this[_0x497d28(0x378)](_0x4f1c79,!0x0)){let _0x4029a4={'where':{'_id':_0x4f1c79['id']}},_0x5566e6={'status':[_0x292b0d['status']][0x0]};try{let _0x1862a4=await this['repository']['message'][_0x497d28(0x3fd)](_0x4029a4,_0x5566e6,this[_0x497d28(0x664)]['wuid']);_0x1862a4&&q(this[_0x497d28(0x8ba)],_0x497d28(0x92e),{'message':_0x1862a4});}catch{}}}[a0_0x20331d(0x869)](_0x3a7937){const _0x4a75ef=a0_0x20331d;let _0x2630a3=[];return _0x3a7937[_0x4a75ef(0x22b)](_0x34be28=>{const _0x5b3b38=_0x4a75ef;_0x34be28[_0x5b3b38(0x416)]&&_0x2630a3[_0x5b3b38(0x4e8)]('['+_0x34be28[_0x5b3b38(0x416)]+']'),_0x34be28['rows'][_0x5b3b38(0x22b)](_0x561396=>{const _0x1f687f=_0x5b3b38;_0x2630a3[_0x1f687f(0x4e8)](_0x561396['title']);});}),_0x2630a3[_0x4a75ef(0x6ca)]('|');}[a0_0x20331d(0x905)](_0x267939){const _0xf28be1=a0_0x20331d;let _0x5561fd=_0x267939[_0xf28be1(0x759)](/\\n/g,'\x0a')[_0xf28be1(0x382)]('\x0a')[_0xf28be1(0x625)](_0x28d940=>_0x28d940[_0xf28be1(0x8eb)]('TEL')||_0x28d940[_0xf28be1(0x8eb)](_0xf28be1(0x2b9))),_0x307886='';return _0x5561fd['forEach'](_0x181458=>{const _0xa73a1c=_0xf28be1;let _0xec61ca=/TEL(?:.*):(.+)/,_0x116113=/EMAIL(?:.*):(.+)/,_0x2f2eaf=_0x181458[_0xa73a1c(0x325)](_0xec61ca),_0x181b93=_0x181458[_0xa73a1c(0x325)](_0x116113);if(_0x2f2eaf){let _0x5aac62=_0x2f2eaf[0x1][_0xa73a1c(0x759)](/-| |\+|\(|\)/g,'')[_0xa73a1c(0x291)]();_0x307886+='Telefone:\x20'+_0x5aac62+'\x0a';}else{if(_0x181b93){let _0x4eea45=_0x181b93[0x1]['trim']();_0x307886+=_0xa73a1c(0x38d)+_0x4eea45+'\x0a';}}}),_0x307886['trim']();}async[a0_0x20331d(0x804)](_0x463202,_0x715530,_0x3bff58,_0x26c4d1=null){const _0x343ec3=a0_0x20331d;if(_0x463202[_0x343ec3(0x56c)])try{let _0x1e8a87=_0x715530['key'][_0x343ec3(0x3eb)][_0x343ec3(0x759)](/:\d{1,2}@/g,'@'),_0xd8e4f8=_0x715530['key']['fromMe'],_0x2a58bd=_0x1e8a87[_0x343ec3(0x3ea)](_0x343ec3(0x5dd)),_0xcbb197=_0x715530[_0x343ec3(0x292)]?.['replace'](/:\d{1,2}@/g,'@')||'',_0x432e72=_0x715530[_0x343ec3(0x539)]?.[_0x343ec3(0x4e1)]||_0x715530[_0x343ec3(0x539)]?.['caption']||_0x715530[_0x343ec3(0x539)]?.['vote']||_0x715530[_0x343ec3(0x539)]?.['name']||'',_0x43f14b={'_id':_0x715530[_0x343ec3(0x53e)],'remoteJid':_0xd8e4f8?this['instance'][_0x343ec3(0x60f)]:_0x2a58bd?_0xcbb197:_0x1e8a87,'pushName':_0xd8e4f8?this['instance'][_0x343ec3(0x76e)]||'Eu':_0x715530[_0x343ec3(0x932)],'text':_0x432e72,'type':_0x715530[_0x343ec3(0x72e)],'when':_0x715530[_0x343ec3(0x627)]||Date[_0x343ec3(0x37f)]()};_0x26c4d1||(_0x26c4d1=await this['repository']['chat'][_0x343ec3(0x63f)]({'where':{'_id':_0x1e8a87}},this[_0x343ec3(0x664)][_0x343ec3(0x60f)]));let _0x27d672=_0x26c4d1?_0xd8e4f8?_0x26c4d1[_0x343ec3(0x906)]:(_0x26c4d1[_0x343ec3(0x906)]||0x0)+0x1:_0xd8e4f8?0x0:0x1,_0x6e21ad={'lastmsg':_0x715530[_0x343ec3(0x627)]||Date[_0x343ec3(0x37f)](),'ephemeralExpiration':_0x715530[_0x343ec3(0x5d4)],'lastMessage':_0x43f14b,'unreadcount':_0x27d672,..._0xd8e4f8||_0x2a58bd?{}:{'name':_0x715530[_0x343ec3(0x932)]},..._0x2a58bd?{'group':_0x2a58bd}:{},...!_0xd8e4f8&&!_0x2a58bd&&_0x715530[_0x343ec3(0x6ba)]?{'imagechat':_0x715530[_0x343ec3(0x6ba)]}:{}};if(!_0x2a58bd&&(!_0x26c4d1?.[_0x343ec3(0x766)]||!_0x26c4d1[_0x343ec3(0x766)]['nome'])&&_0x715530[_0x343ec3(0x932)]&&!_0xd8e4f8&&(_0x6e21ad={..._0x6e21ad,'leadInfo.nome':_0x715530['pushName']}),_0x26c4d1?.[_0x343ec3(0x766)][_0x343ec3(0x820)]||(_0x6e21ad={..._0x6e21ad,'leadInfo.etiquetas':[]}),_0x26c4d1?.['leadInfo']['customFields']||(_0x6e21ad={..._0x6e21ad,'leadInfo.customFields':[]}),_0x26c4d1?.[_0x343ec3(0x766)]['tags']||(_0x6e21ad={..._0x6e21ad,'leadInfo.tags':[]}),_0x26c4d1&&_0x26c4d1?.[_0x343ec3(0x60d)]){let _0x4f4458=await this[_0x343ec3(0x402)][_0x343ec3(0x47b)][_0x343ec3(0x691)]({'where':{}},this[_0x343ec3(0x664)][_0x343ec3(0x60f)]),_0x4e04bd=new Set(_0x4f4458[_0x343ec3(0x41b)](_0x5e2e7b=>_0x5e2e7b[_0x343ec3(0x53e)])),_0x3f8603=(_0x26c4d1[_0x343ec3(0x766)]?.[_0x343ec3(0x820)]||[])[_0x343ec3(0x625)](_0x1969df=>_0x4e04bd[_0x343ec3(0x718)](_0x1969df));_0x6e21ad={..._0x6e21ad,'imported':!0x1,'leadInfo.etiquetas':_0x3f8603};for(let _0x4bc6df of _0x3f8603)await this['AddChatLabel'](_0x4bc6df,_0x1e8a87);}if(!this[_0x343ec3(0x246)]['flows'][_0x343ec3(0x691)](_0x1a587e=>_0x1a587e['startCommand']&&_0x432e72[_0x343ec3(0x8eb)](_0x1a587e[_0x343ec3(0x769)]))&&_0x3bff58===_0x343ec3(0x204)&&_0xd8e4f8&&this[_0x343ec3(0x246)]?.[_0x343ec3(0x2b6)][_0x343ec3(0x349)]&&_0x432e72['trim']()!==this[_0x343ec3(0x246)]?.[_0x343ec3(0x2b6)][_0x343ec3(0x2ff)][_0x343ec3(0x291)]()){let _0x3ac88c=(this['AutomateSystem']?.[_0x343ec3(0x2b6)][_0x343ec3(0x50f)]||0x0)*0xea60,_0x4d4219=Date[_0x343ec3(0x37f)]()+_0x3ac88c;_0x26c4d1?.[_0x343ec3(0x766)]?.['desativadoFluxoAte']===0x0||(_0x6e21ad={..._0x6e21ad,'leadInfo.desativadoFluxoAte':_0x4d4219},this[_0x343ec3(0x7a2)][_0x343ec3(0x7a9)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20'+_0x4d4219+'.'));}if(_0x432e72[_0x343ec3(0x291)]()===this['AutomateSystem']?.[_0x343ec3(0x2b6)][_0x343ec3(0x2ff)][_0x343ec3(0x291)]()){this[_0x343ec3(0x7a2)][_0x343ec3(0x7a9)](this['instanceName']+'\x20('+this[_0x343ec3(0x664)][_0x343ec3(0x60f)]+_0x343ec3(0x868)+_0x432e72);let _0x478ef1=Date[_0x343ec3(0x37f)]();this['AutomateSystem']?.['flowConfig'][_0x343ec3(0x4e4)]===0x0?_0x6e21ad={..._0x6e21ad,'leadInfo.desativadoFluxoAte':_0x478ef1+0x7591f6200}:_0x6e21ad={..._0x6e21ad,'leadInfo.desativadoFluxoAte':_0x478ef1+this['AutomateSystem']?.[_0x343ec3(0x2b6)][_0x343ec3(0x4e4)]*0x3c*0x3e8};}if(_0x26c4d1=await this['repository'][_0x343ec3(0x617)]['updateOne']({'where':{'_id':_0x1e8a87}},_0x6e21ad,this[_0x343ec3(0x664)][_0x343ec3(0x60f)],{'new':!0x0,'upsert':!0x0}),_0x26c4d1)q(this[_0x343ec3(0x8ba)],'chats',{'chat':_0x26c4d1});else{this[_0x343ec3(0x7a2)]['error'](this[_0x343ec3(0x8ba)]+'\x20('+this[_0x343ec3(0x664)]['wuid']+_0x343ec3(0x83b));return;}if(_0xd8e4f8)return this[_0x343ec3(0x7a2)][_0x343ec3(0x7a9)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x343ec3(0x269)),null;if(!this[_0x343ec3(0x246)]?.[_0x343ec3(0x2b6)]['enabled'])return this[_0x343ec3(0x7a2)][_0x343ec3(0x7a9)](this[_0x343ec3(0x8ba)]+'\x20('+this['instance'][_0x343ec3(0x60f)]+_0x343ec3(0x527)),null;if(_0x26c4d1['_id'][_0x343ec3(0x8eb)](_0x343ec3(0x5dd))&&this[_0x343ec3(0x246)]?.['flowConfig'][_0x343ec3(0x297)]===!0x0)return this[_0x343ec3(0x7a2)]['verbose'](this[_0x343ec3(0x8ba)]+'\x20('+this[_0x343ec3(0x664)][_0x343ec3(0x60f)]+_0x343ec3(0x6e7)),null;if(_0x26c4d1[_0x343ec3(0x766)]){if(_0x26c4d1[_0x343ec3(0x766)]['desativadoFluxoAte']===0x0||_0x26c4d1[_0x343ec3(0x766)][_0x343ec3(0x48b)])return this[_0x343ec3(0x7a2)]['verbose'](this[_0x343ec3(0x8ba)]+'\x20('+this['instance'][_0x343ec3(0x60f)]+'):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20'+_0x1e8a87+_0x343ec3(0x642)),null;if(_0x26c4d1[_0x343ec3(0x766)][_0x343ec3(0x3e9)]>Date[_0x343ec3(0x37f)]()&&!_0x715530[_0x343ec3(0x539)]?.['vote'])return this[_0x343ec3(0x7a2)]['verbose'](this['instanceName']+'\x20('+this[_0x343ec3(0x664)][_0x343ec3(0x60f)]+_0x343ec3(0x3fb)+new Date(_0x26c4d1[_0x343ec3(0x766)]['desativadoFluxoAte'])[_0x343ec3(0x68a)]()+_0x343ec3(0x642)),null;}this[_0x343ec3(0x7a2)][_0x343ec3(0x7a9)](this[_0x343ec3(0x8ba)]+'\x20('+this[_0x343ec3(0x664)][_0x343ec3(0x60f)]+_0x343ec3(0x91a)),this['StartBot'](_0x715530,_0x3bff58);}catch(_0x212e1d){let _0x1ef408=_0x343ec3(0x234),_0x16837b=_0x212e1d instanceof Error?_0x212e1d['message']:typeof _0x212e1d==_0x343ec3(0x4bd)?JSON[_0x343ec3(0x5f3)](_0x212e1d):_0x212e1d,_0x1338c0=_0x1ef408+':\x20'+_0x16837b;return this[_0x343ec3(0x7a2)]['error'](this[_0x343ec3(0x8ba)]+'\x20('+this[_0x343ec3(0x664)][_0x343ec3(0x60f)]+'):\x20'+_0x1338c0),null;}}async[a0_0x20331d(0x831)](_0x2aeb07,_0x30bd98){const _0x408e83=a0_0x20331d;if(_0x30bd98[_0x408e83(0x56c)]){let _0x1e82ed=_0x2aeb07[_0x408e83(0x41b)](async _0x12f8ec=>{const _0x41db8a=_0x408e83;try{let _0x212359={'_id':_0x12f8ec[_0x41db8a(0x53e)],'owner':_0x12f8ec[_0x41db8a(0x63b)],'lastcache':0x0};if(Object[_0x41db8a(0x4db)](_0x12f8ec)[_0x41db8a(0x22b)](_0x4d9823=>{_0x12f8ec[_0x4d9823]!==null&&(_0x212359[_0x4d9823]=_0x12f8ec[_0x4d9823]);}),_0x212359[_0x41db8a(0x7b8)]===null&&(_0x212359['imagechat']=_0x41db8a(0x66b)),Object[_0x41db8a(0x4db)](_0x212359)[_0x41db8a(0x786)]>0x0)return await this['repository'][_0x41db8a(0x617)][_0x41db8a(0x2d5)]({'where':{'_id':_0x12f8ec[_0x41db8a(0x53e)]}},_0x212359,this[_0x41db8a(0x664)][_0x41db8a(0x60f)]);}catch(_0x5b0258){let _0x3f24a9=_0x41db8a(0x59d)+_0x12f8ec[_0x41db8a(0x53e)],_0x257123=_0x5b0258 instanceof Error?_0x5b0258[_0x41db8a(0x923)]:typeof _0x5b0258==_0x41db8a(0x4bd)?JSON[_0x41db8a(0x5f3)](_0x5b0258):_0x5b0258,_0x123066=_0x3f24a9+':\x20'+_0x257123;return this[_0x41db8a(0x7a2)][_0x41db8a(0x2c2)](this[_0x41db8a(0x8ba)]+'\x20('+this[_0x41db8a(0x664)][_0x41db8a(0x60f)]+_0x41db8a(0x51c)+_0x123066),null;}}),_0x333d7d=(await Promise[_0x408e83(0x2ea)](_0x1e82ed))[_0x408e83(0x625)](_0x5afd51=>_0x5afd51!==null)[_0x408e83(0x786)];this['logger'][_0x408e83(0x7a9)](this[_0x408e83(0x8ba)]+'\x20('+this[_0x408e83(0x664)][_0x408e83(0x60f)]+'):\x20'+_0x333d7d+'\x20chats\x20de\x20'+this[_0x408e83(0x664)]['wuid']+'\x20inseridos\x20no\x20banco\x20de\x20dados...');}}async[a0_0x20331d(0x7c0)](_0x3b0aa3){const _0x3d8528=a0_0x20331d;this['logger']['verbose'](this[_0x3d8528(0x8ba)]+'\x20('+this[_0x3d8528(0x664)]['wuid']+_0x3d8528(0x71b));let _0x84205={'readMessages':[{'remoteJid':_0x3b0aa3['chatLog'][_0x3d8528(0x90c)]['key']['remoteJid'],'fromMe':_0x3b0aa3[_0x3d8528(0x544)][_0x3d8528(0x90c)][_0x3d8528(0x2f3)][_0x3d8528(0x288)],'id':_0x3b0aa3[_0x3d8528(0x544)]['lastReceivedMessage']['key']['id']}]};await this[_0x3d8528(0x7e7)](_0x84205);}async[a0_0x20331d(0x423)](_0xc1c4b5,_0x53c0a5){const _0x4e5cc6=a0_0x20331d;try{let {key:_0x250721,message_normalized:_0x3c7e41}=_0xc1c4b5,_0x258334=_0x3c7e41,_0x575881=_0x3c7e41['text']||_0x3c7e41[_0x4e5cc6(0x312)]||_0x3c7e41[_0x4e5cc6(0x878)]||_0x3c7e41[_0x4e5cc6(0x8b9)]||'',_0x13d70a=_0x250721[_0x4e5cc6(0x3eb)],_0x2f3b7f=null,_0x4e7cbf=this[_0x4e5cc6(0x246)][_0x4e5cc6(0x550)]['find'](_0x413a81=>_0x413a81[_0x4e5cc6(0x769)]&&_0x575881[_0x4e5cc6(0x8eb)](_0x413a81['startCommand']));if(_0x4e7cbf&&_0x53c0a5===_0x4e5cc6(0x204)){let _0x270434=await this[_0x4e5cc6(0x402)][_0x4e5cc6(0x29c)][_0x4e5cc6(0x63f)]({'where':{'_id':_0x4e7cbf[_0x4e5cc6(0x53e)]}});if(this[_0x4e5cc6(0x7a2)]['verbose'](this[_0x4e5cc6(0x8ba)]+'\x20('+this[_0x4e5cc6(0x664)][_0x4e5cc6(0x60f)]+_0x4e5cc6(0x554)),_0x270434&&_0x270434[_0x4e5cc6(0x733)]?.[_0x4e5cc6(0x8eb)](this[_0x4e5cc6(0x664)][_0x4e5cc6(0x60f)]))_0x2f3b7f=await this[_0x4e5cc6(0x5e8)](_0x270434,_0x250721,_0x258334);else return this['logger'][_0x4e5cc6(0x7a9)](this[_0x4e5cc6(0x8ba)]+'\x20('+this[_0x4e5cc6(0x664)][_0x4e5cc6(0x60f)]+_0x4e5cc6(0x4f0)),null;}else this[_0x4e5cc6(0x7a2)][_0x4e5cc6(0x7a9)](this[_0x4e5cc6(0x8ba)]+'\x20('+this['instance'][_0x4e5cc6(0x60f)]+'):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand');if(_0x2f3b7f=await this[_0x4e5cc6(0x531)](_0x13d70a,_0x258334),_0x2f3b7f){this['logger']['verbose'](this[_0x4e5cc6(0x8ba)]+'\x20('+this[_0x4e5cc6(0x664)]['wuid']+'):\x20Encontrou\x20conversa\x20no\x20startBot:\x20'),!_0x250721[_0x4e5cc6(0x288)]&&_0x2f3b7f[_0x4e5cc6(0x5b5)]&&this[_0x4e5cc6(0x7c0)](_0x2f3b7f);let _0x98fc97=await this['NextBlock'](_0x2f3b7f);_0x98fc97&&await this[_0x4e5cc6(0x33c)](_0x2f3b7f,_0x98fc97);}}catch(_0x572f80){this[_0x4e5cc6(0x7a2)][_0x4e5cc6(0x2c2)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20'+(_0x572f80 instanceof Error?_0x572f80['message']:JSON[_0x4e5cc6(0x5f3)](_0x572f80,null,0x2)));}}['flattenObject'](_0x364d09,_0x1ee8bb='',_0x598653={}){const _0x3d7a1c=a0_0x20331d;return typeof _0x364d09!=_0x3d7a1c(0x4bd)||_0x364d09===null?(_0x1ee8bb&&(_0x598653[_0x1ee8bb]=_0x364d09),_0x598653):(Object[_0x3d7a1c(0x458)](_0x364d09)[_0x3d7a1c(0x22b)](([_0x17695e,_0x297c6b])=>{const _0x1cc8e2=_0x3d7a1c;let _0x1e9e68=_0x1ee8bb?_0x1ee8bb+'.'+_0x17695e:'_'+_0x17695e;Array[_0x1cc8e2(0x3f2)](_0x297c6b)?_0x297c6b[_0x1cc8e2(0x22b)]((_0x1b812c,_0x323175)=>{const _0xcf8401=_0x1cc8e2;this[_0xcf8401(0x737)](_0x1b812c,_0x1e9e68+'['+_0x323175+']',_0x598653);}):typeof _0x297c6b==_0x1cc8e2(0x4bd)&&_0x297c6b!==null?this[_0x1cc8e2(0x737)](_0x297c6b,_0x1e9e68,_0x598653):_0x598653[_0x1e9e68]=String(_0x297c6b);}),_0x598653);}[a0_0x20331d(0x76b)](_0x3a91fd){const _0x47a03e=a0_0x20331d;let _0x4faa2f={};for(let _0x3bc2db of _0x3a91fd)typeof _0x3bc2db[_0x47a03e(0x8b9)]=='string'&&typeof _0x3bc2db[_0x47a03e(0x3c3)]==_0x47a03e(0x6f2)&&(_0x4faa2f[_0x3bc2db['name']]=_0x3bc2db[_0x47a03e(0x3c3)]);return _0x4faa2f;}async['NextBlock'](_0x2ac36e){const _0x2d2257=a0_0x20331d;if(!this['AutomateSystem']?.['flowConfig'][_0x2d2257(0x349)]||_0x2ac36e[_0x2d2257(0x8aa)]!==_0x2d2257(0x29f)&&_0x2ac36e[_0x2d2257(0x471)]==='')return null;let _0x2ce31e=_0x2ac36e[_0x2d2257(0x544)][_0x2d2257(0x7b7)]||_0x2d2257(0x48a);typeof _0x2ac36e[_0x2d2257(0x544)][_0x2d2257(0x1fc)]>'u'&&(_0x2ac36e['chatLog']['lastCondition']=!0x0);let _0x4a2641=_0x2ac36e[_0x2d2257(0x544)][_0x2d2257(0x1fc)];this[_0x2d2257(0x7a2)][_0x2d2257(0x7a9)](this[_0x2d2257(0x8ba)]+'\x20('+this['instance'][_0x2d2257(0x60f)]+'):\x20lastBlockId:\x20'+_0x2ce31e+_0x2d2257(0x501)+_0x4a2641);let _0x16bb2b=_0x2ce31e===_0x2d2257(0x48a)?_0x2ac36e['blocks']['find'](_0x28800b=>_0x28800b['type']===_0x2d2257(0x48a)):_0x2ac36e[_0x2d2257(0x210)][_0x2d2257(0x691)](_0x322335=>_0x322335['_id'][_0x2d2257(0x27d)]()===_0x2ce31e['toString']());if(!_0x16bb2b)return this[_0x2d2257(0x7a2)][_0x2d2257(0x2c2)](this['instanceName']+'\x20('+this[_0x2d2257(0x664)][_0x2d2257(0x60f)]+_0x2d2257(0x515)+_0x2ce31e),null;let _0x5cc3a5={'_pushName':_0x2ac36e?.[_0x2d2257(0x544)]?.[_0x2d2257(0x90c)]?.['pushName']||'','_sender':this['instance']['wuid']||'',..._0x2ac36e[_0x2d2257(0x544)][_0x2d2257(0x64e)]},_0xee6d0d=null;if(_0x2ac36e[_0x2d2257(0x471)]){let _0x28f997=_0x2ac36e[_0x2d2257(0x544)][_0x2d2257(0x90c)][_0x2d2257(0x878)],_0x717ef9=_0x2ac36e[_0x2d2257(0x43d)][_0x2d2257(0x691)](_0x18b939=>_0x18b939[_0x2d2257(0x69c)]===_0x28f997);if(_0x717ef9){let _0x4560a2=_0x717ef9['next_groupId'];if(_0xee6d0d=_0x2ac36e[_0x2d2257(0x210)]['find'](_0x408fad=>_0x408fad[_0x2d2257(0x6e5)]===_0x4560a2&&_0x408fad[_0x2d2257(0x1e4)]===0x1),_0x16bb2b[_0x2d2257(0x700)][_0x2d2257(0x635)]){let _0x4306d4={'id':_0x2ac36e[_0x2d2257(0x471)],'remoteJid':_0x2ac36e[_0x2d2257(0x3eb)],'fromMe':!0x0};await this['deleteMessage'](_0x4306d4);}if(_0x16bb2b['uazapi']['pollOnReplyDelete']&&_0x16bb2b[_0x2d2257(0x700)][_0x2d2257(0x629)]&&_0x16bb2b['uazapi'][_0x2d2257(0x4b8)]==='poll'){let _0x13ed28={'number':_0x2ac36e[_0x2d2257(0x3eb)],'options':{'delay':0x0},'textMessage':{'text':_0x2d2257(0x49b)+_0x2ac36e[_0x2d2257(0x223)]+_0x2d2257(0x8f6)+_0x28f997}};await this[_0x2d2257(0x807)](_0x13ed28);}_0x2ac36e[_0x2d2257(0x8aa)]=_0x2d2257(0x29f),_0x2ac36e[_0x2d2257(0x471)]='',_0x2ac36e[_0x2d2257(0x223)]='',_0x2ac36e[_0x2d2257(0x43d)]=[];}else{this[_0x2d2257(0x7a2)][_0x2d2257(0x7a9)](this[_0x2d2257(0x8ba)]+'\x20('+this[_0x2d2257(0x664)]['wuid']+_0x2d2257(0x286));let _0x34f42e={'activatedCount':_0x2ac36e[_0x2d2257(0x544)]['blockLogs'][_0x2d2257(0x625)](_0x43c5a6=>String(_0x43c5a6['blockId'])===String(_0x2ce31e))[_0x2d2257(0x786)],'moreLogs':['Não\x20respondeu\x20com\x20a\x20enquete.']};if(_0x16bb2b[_0x2d2257(0x700)][_0x2d2257(0x2e5)]){let _0x7f8a79={'number':_0x2ac36e[_0x2d2257(0x3eb)],'options':{'delay':0x0},'textMessage':{'text':_0x16bb2b['uazapi'][_0x2d2257(0x2e5)]}};await this[_0x2d2257(0x807)](_0x7f8a79);}if(_0x16bb2b[_0x2d2257(0x69b)]!==void 0x0&&_0x34f42e[_0x2d2257(0x78d)]>=_0x16bb2b['maxActives']){let _0x426eb3=Date[_0x2d2257(0x37f)](),_0x2ce7d2=_0x16bb2b[_0x2d2257(0x4b1)]??0xa;isNaN(_0x2ce7d2)&&(_0x2ce7d2=0xa);let _0x11fc75=_0x426eb3+_0x2ce7d2*0x3c*0x3e8;_0x34f42e[_0x2d2257(0x2d1)]=_0x11fc75,_0x34f42e[_0x2d2257(0x6c5)][_0x2d2257(0x4e8)](_0x2d2257(0x620)),this[_0x2d2257(0x58c)](_0x2ac36e,_0x11fc75),_0x2ac36e[_0x2d2257(0x471)]='',_0x2ac36e[_0x2d2257(0x223)]='',_0x2ac36e[_0x2d2257(0x43d)]=[];}return this['updateConversation'](_0x2ac36e,_0x16bb2b,_0x34f42e,!0x0),null;}}if(_0x4a2641&&_0x16bb2b['next_groupId']&&!_0x2ac36e['waitingMenu_id']){let _0x423ad7=_0x2ac36e[_0x2d2257(0x210)][_0x2d2257(0x625)](_0x3cf1b1=>_0x3cf1b1[_0x2d2257(0x6e5)][_0x2d2257(0x27d)]()===_0x16bb2b[_0x2d2257(0x46d)][_0x2d2257(0x27d)]())[_0x2d2257(0x4b4)]((_0x4c447c,_0x2c5151)=>_0x4c447c[_0x2d2257(0x1e4)]-_0x2c5151[_0x2d2257(0x1e4)]);_0x423ad7[_0x2d2257(0x786)]>0x0&&(_0xee6d0d=_0x423ad7[0x0]);}if(!_0xee6d0d){let _0x1b972a=_0x16bb2b['groupId'],_0x1c03d8=_0x2ac36e[_0x2d2257(0x210)][_0x2d2257(0x625)](_0x5341c5=>_0x5341c5['groupId']===_0x1b972a&&_0x5341c5['order']>_0x16bb2b['order'])[_0x2d2257(0x4b4)]((_0x3a7e5f,_0x31605e)=>_0x3a7e5f['order']-_0x31605e[_0x2d2257(0x1e4)]);_0x1c03d8[_0x2d2257(0x786)]>0x0&&(_0xee6d0d=_0x1c03d8[0x0]);}if(!_0xee6d0d)return _0x2ac36e[_0x2d2257(0x8aa)]='closed',null;_0x2ac36e[_0x2d2257(0x544)]['realVariables']=_0x5cc3a5;let _0x3134b5=JSON[_0x2d2257(0x79b)](JSON[_0x2d2257(0x5f3)](_0xee6d0d));return this[_0x2d2257(0x4c0)](_0x3134b5,_0x2ac36e[_0x2d2257(0x544)]['realVariables']),_0x2ac36e[_0x2d2257(0x544)]['lastBlockId']=_0x3134b5['_id'],_0x2ac36e[_0x2d2257(0x544)][_0x2d2257(0x1fc)]=!0x0,_0x3134b5;}['replaceVariables'](_0x4105cb,_0x25595a){const _0x2aacd2=a0_0x20331d;return _0x4105cb[_0x2aacd2(0x759)](/\{\{([^}]+)\}\}/g,(_0x1df5d8,_0x5255de)=>_0x25595a[_0x5255de]||'');}['replaceVariablesInObject'](_0x99f49c,_0x58e508){const _0x588694=a0_0x20331d;for(let _0x269125 in _0x99f49c)typeof _0x99f49c[_0x269125]==_0x588694(0x6f2)?_0x99f49c[_0x269125]=this['replaceVariables'](_0x99f49c[_0x269125],_0x58e508):typeof _0x99f49c[_0x269125]==_0x588694(0x4bd)&&this['replaceVariablesInObject'](_0x99f49c[_0x269125],_0x58e508);}async[a0_0x20331d(0x7b0)](_0x353f4c,_0x152877){const _0x4e740a=a0_0x20331d;let _0x3aed4c=_0x152877['_id'];if(_0x353f4c[_0x4e740a(0x544)]&&_0x353f4c[_0x4e740a(0x544)]['blockLogs']){let _0x52ffc9=_0x353f4c[_0x4e740a(0x544)][_0x4e740a(0x8e3)][_0x4e740a(0x625)](_0x4ebbbe=>String(_0x4ebbbe['blockId'])===String(_0x3aed4c))[_0x4e740a(0x7d8)]();if(_0x52ffc9&&_0x52ffc9[_0x4e740a(0x2c2)]&&_0x152877[_0x4e740a(0x377)])return _0x353f4c['status']=_0x4e740a(0x7b4),await this[_0x4e740a(0x2b0)](_0x353f4c),null;}if(_0x152877[_0x4e740a(0x32e)]===_0x4e740a(0x700)&&_0x152877['uazapi'][_0x4e740a(0x344)]===_0x4e740a(0x6bc)&&_0x353f4c[_0x4e740a(0x471)])return _0x353f4c[_0x4e740a(0x544)]['lastBlockId']=_0x3aed4c,await this[_0x4e740a(0x2b0)](_0x353f4c),null;let _0x39683b=await this[_0x4e740a(0x6de)](_0x353f4c);if(_0x353f4c[_0x4e740a(0x544)]&&_0x353f4c[_0x4e740a(0x544)][_0x4e740a(0x8e3)]){let _0x27d4be=_0x353f4c[_0x4e740a(0x544)][_0x4e740a(0x8e3)][_0x4e740a(0x625)](_0x45b1ac=>String(_0x45b1ac[_0x4e740a(0x29e)])===String(_0x3aed4c))[_0x4e740a(0x786)];if(_0x152877[_0x4e740a(0x69b)]!==void 0x0&&_0x27d4be>=_0x152877[_0x4e740a(0x69b)]){let _0xaa5cc0=Date[_0x4e740a(0x37f)](),_0x10c1d0=_0x152877[_0x4e740a(0x4b1)]??0xa;isNaN(_0x10c1d0)&&(_0x10c1d0=0xa);let _0x4647d4=_0xaa5cc0+_0x10c1d0*0x3c*0x3e8,_0x223122={'newStoppedUntil':_0x4647d4};return this['updateStopChat'](_0x353f4c,_0x4647d4),this[_0x4e740a(0x87e)](_0x353f4c,_0x152877,_0x223122,!0x0),null;}}_0x39683b&&_0x39683b[_0x4e740a(0x32e)]!==_0x4e740a(0x84d)&&await this[_0x4e740a(0x33c)](_0x353f4c,_0x39683b),_0x39683b||await this[_0x4e740a(0x2b0)](_0x353f4c),_0x39683b&&_0x39683b['type']===_0x4e740a(0x84d)&&(_0x353f4c[_0x4e740a(0x544)][_0x4e740a(0x7b7)]=_0x3aed4c,await this[_0x4e740a(0x2b0)](_0x353f4c));}async[a0_0x20331d(0x33c)](_0xb58ebe,_0x5e1587){const _0x382a06=a0_0x20331d;try{let _0x1d856e=_0x5e1587[_0x382a06(0x32e)];this['logger'][_0x382a06(0x7a9)](this[_0x382a06(0x8ba)]+'\x20('+this[_0x382a06(0x664)][_0x382a06(0x60f)]+_0x382a06(0x45b)+_0x1d856e);let _0x249f9d={'uazapi':()=>this[_0x382a06(0x70f)](_0xb58ebe,_0x5e1587),'save':()=>this[_0x382a06(0x816)](_0xb58ebe,_0x5e1587),'stop':()=>this[_0x382a06(0x2ff)](_0xb58ebe,_0x5e1587),'condition':()=>this[_0x382a06(0x1fe)](_0xb58ebe,_0x5e1587),'varedit':()=>this[_0x382a06(0x856)](_0xb58ebe,_0x5e1587),'apirequest':()=>this[_0x382a06(0x267)](_0xb58ebe,_0x5e1587),'goToFlow':()=>this['processgoToFlow'](_0xb58ebe,_0x5e1587),'scheduleFlow':()=>this[_0x382a06(0x586)](_0xb58ebe,_0x5e1587),'awaitSeconds':()=>this[_0x382a06(0x456)](_0xb58ebe,_0x5e1587),'clearVariables':()=>this[_0x382a06(0x26d)](_0xb58ebe,_0x5e1587)}[_0x1d856e];_0x249f9d&&await _0x249f9d();}catch(_0x2571ad){this['logger']['error'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x382a06(0x86f)+(_0x2571ad instanceof Error?_0x2571ad[_0x382a06(0x923)]:JSON[_0x382a06(0x5f3)](_0x2571ad,null,0x2)));}}async['processawaitSeconds'](_0x13d9b8,_0x4dcdcc){const _0x3bfa3b=a0_0x20331d;if(this[_0x3bfa3b(0x7a2)][_0x3bfa3b(0x7a9)](this['instanceName']+'\x20('+this[_0x3bfa3b(0x664)][_0x3bfa3b(0x60f)]+_0x3bfa3b(0x594)),!_0x13d9b8||!_0x4dcdcc)return this['logger'][_0x3bfa3b(0x2c2)](this[_0x3bfa3b(0x8ba)]+'\x20('+this[_0x3bfa3b(0x664)][_0x3bfa3b(0x60f)]+_0x3bfa3b(0x773)),null;let _0x361560=+_0x4dcdcc[_0x3bfa3b(0x6bd)];isNaN(_0x361560)&&(_0x361560=0x0),_0x361560=Math['min'](_0x361560,0x3c),await(0x0,w['delay'])(_0x361560*0x3e8);let _0x348d0e={'moreLogs':[_0x3bfa3b(0x5f5)+_0x361560+_0x3bfa3b(0x6c4)]};return await this[_0x3bfa3b(0x87e)](_0x13d9b8,_0x4dcdcc,_0x348d0e),_0x361560;}async['processclearVariables'](_0xcee43d,_0x16397a){const _0x133ee5=a0_0x20331d;if(this['logger'][_0x133ee5(0x7a9)](this[_0x133ee5(0x8ba)]+'\x20('+this['instance'][_0x133ee5(0x60f)]+_0x133ee5(0x227)),!_0xcee43d||!_0x16397a)return this[_0x133ee5(0x7a2)]['error'](this[_0x133ee5(0x8ba)]+'\x20('+this['instance'][_0x133ee5(0x60f)]+_0x133ee5(0x773)),null;let _0x57790b=[];if(_0x16397a[_0x133ee5(0x3a6)][_0x133ee5(0x291)]()==='[all]'){let _0x5c0cfd=['_sender','_pushName',_0x133ee5(0x209),_0x133ee5(0x568),'_remoteJid','_id',_0x133ee5(0x71e)];_0x57790b=Object[_0x133ee5(0x4db)](_0xcee43d[_0x133ee5(0x544)][_0x133ee5(0x64e)])[_0x133ee5(0x625)](_0x21309b=>_0x21309b['startsWith']('_')&&!_0x5c0cfd[_0x133ee5(0x8eb)](_0x21309b));}else _0x57790b=_0x16397a[_0x133ee5(0x3a6)][_0x133ee5(0x382)]('|')[_0x133ee5(0x41b)](_0x258e06=>(_0x258e06=_0x258e06[_0x133ee5(0x759)](/[{}]/g,'')[_0x133ee5(0x291)](),_0x258e06['startsWith']('_')?_0x258e06:'_'+_0x258e06));let _0x319aeb=[];_0x57790b[_0x133ee5(0x22b)](_0x1b3515=>{const _0x355e31=_0x133ee5;_0x1b3515 in _0xcee43d['chatLog'][_0x355e31(0x64e)]&&(delete _0xcee43d[_0x355e31(0x544)][_0x355e31(0x64e)][_0x1b3515],_0x319aeb[_0x355e31(0x4e8)](_0x1b3515));}),_0x319aeb[_0x133ee5(0x786)]>0x0?this[_0x133ee5(0x7a2)]['verbose'](this[_0x133ee5(0x8ba)]+'\x20('+this['instance'][_0x133ee5(0x60f)]+_0x133ee5(0x865)+_0x319aeb[_0x133ee5(0x6ca)](',\x20')):this[_0x133ee5(0x7a2)][_0x133ee5(0x7a9)](this[_0x133ee5(0x8ba)]+'\x20('+this['instance'][_0x133ee5(0x60f)]+_0x133ee5(0x8cd));let _0x1d3d1f={'moreLogs':['Removidas\x20as\x20variáveis:\x20'+_0x319aeb[_0x133ee5(0x6ca)](',\x20')]};return await this['updateConversation'](_0xcee43d,_0x16397a,_0x1d3d1f),null;}async[a0_0x20331d(0x586)](_0x4153a1,_0x17cc61){const _0x36bd61=a0_0x20331d;if(this[_0x36bd61(0x7a2)]['verbose'](this[_0x36bd61(0x8ba)]+'\x20('+this[_0x36bd61(0x664)][_0x36bd61(0x60f)]+_0x36bd61(0x202)),!_0x4153a1||!_0x17cc61)return this[_0x36bd61(0x7a2)][_0x36bd61(0x2c2)](this[_0x36bd61(0x8ba)]+'\x20('+this[_0x36bd61(0x664)][_0x36bd61(0x60f)]+_0x36bd61(0x773)),null;let _0x57ca33=_0x4153a1[_0x36bd61(0x3eb)];_0x17cc61[_0x36bd61(0x5bd)][_0x36bd61(0x3eb)]&&_0x17cc61[_0x36bd61(0x5bd)][_0x36bd61(0x3eb)]['trim']()!==''&&(_0x57ca33=_0x17cc61[_0x36bd61(0x700)][_0x36bd61(0x3eb)]['trim']());let _0x5c5ae1=_0x17cc61[_0x36bd61(0x5bd)][_0x36bd61(0x3e4)]*0xea60,_0x11325f=Date[_0x36bd61(0x37f)]()+_0x5c5ae1,_0x3a7d06={'status':'scheduled','info':_0x36bd61(0x337)+_0x4153a1['name'],'remoteJids':[_0x57ca33],'when':_0x11325f,'delaySecMin':0x0,'delaySecMax':0x0,'type':'flow','flowName':_0x17cc61[_0x36bd61(0x5bd)][_0x36bd61(0x249)]};this['editScheduleMessage'](_0x3a7d06);let _0x49a0bd=await this[_0x36bd61(0x6de)](_0x4153a1);_0x49a0bd&&await this[_0x36bd61(0x33c)](_0x4153a1,_0x49a0bd);}async[a0_0x20331d(0x8cf)](_0x2e8db2,_0x9c782b){const _0x4e3748=a0_0x20331d;if(this['logger'][_0x4e3748(0x7a9)](this[_0x4e3748(0x8ba)]+'\x20('+this[_0x4e3748(0x664)][_0x4e3748(0x60f)]+_0x4e3748(0x5ae)),!_0x2e8db2||!_0x9c782b)return this[_0x4e3748(0x7a2)]['error'](this['instanceName']+'\x20('+this[_0x4e3748(0x664)][_0x4e3748(0x60f)]+_0x4e3748(0x773)),null;await this[_0x4e3748(0x87e)](_0x2e8db2,_0x9c782b,{},!0x0,!0x0);let _0x1e3faf=_0x9c782b[_0x4e3748(0x719)];_0x2e8db2=await this['createConversationforgoToFlow'](_0x1e3faf,_0x2e8db2[_0x4e3748(0x3eb)],_0x2e8db2[_0x4e3748(0x544)][_0x4e3748(0x64e)]);let _0x1782e7=await this[_0x4e3748(0x6de)](_0x2e8db2);_0x1782e7&&await this['processblock'](_0x2e8db2,_0x1782e7);}async[a0_0x20331d(0x73e)](_0xfbe986,_0x118744,_0x1eb3ee){const _0x51336c=a0_0x20331d;this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x51336c(0x664)][_0x51336c(0x60f)]+'):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]');try{let _0x2ac6ae=this[_0x51336c(0x246)][_0x51336c(0x550)][_0x51336c(0x691)](_0xf66cd6=>_0xf66cd6[_0x51336c(0x53e)]===_0xfbe986);_0x2ac6ae||this['logger']['error'](this['instanceName']+'\x20('+this[_0x51336c(0x664)]['wuid']+_0x51336c(0x332)+_0xfbe986+'\x27\x20não\x20encontrado\x20na\x20memória');let _0x26d49f=await this[_0x51336c(0x402)][_0x51336c(0x29c)][_0x51336c(0x63f)]({'where':{'_id':_0x2ac6ae[_0x51336c(0x53e)]}});if(!_0x26d49f||!_0x26d49f[_0x51336c(0x733)]?.[_0x51336c(0x8eb)](this[_0x51336c(0x664)]['wuid']))throw this[_0x51336c(0x7a2)][_0x51336c(0x2c2)](this['instanceName']+'\x20('+this['instance'][_0x51336c(0x60f)]+'):\x20Flow\x20\x27'+_0xfbe986+_0x51336c(0x57a)),new m('Flow\x20\x27'+_0xfbe986+_0x51336c(0x57a));let _0x17eeaf=require(_0x51336c(0x8d4))[_0x51336c(0x920)],_0x4e9a5a=Date[_0x51336c(0x37f)](),_0x3475b1=_0x51336c(0x48a),_0x505e1f={},_0x58af1b={},_0x6a7e4d=this[_0x51336c(0x246)][_0x51336c(0x550)][_0x51336c(0x691)](_0x438c47=>_0x438c47['_id']===_0x26d49f['_id']?.['toString']()),_0x1b7613=_0x6a7e4d?.[_0x51336c(0x3fc)]??_0x26d49f[_0x51336c(0x3fc)]??0x0,_0x4100c3=_0x6a7e4d?.[_0x51336c(0x5b5)]??_0x26d49f[_0x51336c(0x5b5)]??!0x1,_0x1621b3={'flowId':_0x2ac6ae[_0x51336c(0x53e)],'readMessages':_0x2ac6ae[_0x51336c(0x5b5)],..._0x26d49f,'chatLog':null},_0x3e5aab={'lastReceivedMessage':_0x505e1f,'lastSendMessage':_0x58af1b,'lastBlockId':_0x3475b1,'lastCondition':!0x0,'realVariables':_0x1eb3ee};_0x1621b3[_0x51336c(0x544)]=_0x3e5aab,_0x1621b3[_0x51336c(0x544)][_0x51336c(0x64e)]={..._0x1eb3ee},delete _0x1621b3[_0x51336c(0x53e)],_0x1621b3[_0x51336c(0x53e)]=new _0x17eeaf(),_0x1621b3['lastInteraction']=_0x4e9a5a,_0x1621b3[_0x51336c(0x8aa)]='open',_0x1621b3[_0x51336c(0x3eb)]=_0x118744,_0x1621b3['minutesToClose']=_0x1b7613,_0x1621b3[_0x51336c(0x5b5)]=_0x4100c3;let _0x4b8f09=await this[_0x51336c(0x402)][_0x51336c(0x444)][_0x51336c(0x2d5)](_0x1621b3[_0x51336c(0x53e)],_0x1621b3,this[_0x51336c(0x664)][_0x51336c(0x60f)]);return this['logger']['verbose'](this[_0x51336c(0x8ba)]+'\x20('+this['instance'][_0x51336c(0x60f)]+_0x51336c(0x42a)),_0x4b8f09?_0x1621b3:null;}catch(_0x2183d1){let _0x1157c2=_0x51336c(0x211),_0x15b57b=_0x2183d1 instanceof Error?_0x2183d1[_0x51336c(0x923)]:typeof _0x2183d1==_0x51336c(0x4bd)?JSON['stringify'](_0x2183d1):_0x2183d1,_0x328e24=_0x1157c2+':\x20'+_0x15b57b;throw this[_0x51336c(0x7a2)][_0x51336c(0x2c2)](this[_0x51336c(0x8ba)]+'\x20('+this[_0x51336c(0x664)]['wuid']+'):\x20'+_0x328e24),new m(_0x328e24);}}async[a0_0x20331d(0x267)](_0x4514df,_0x118e9c){const _0x15ae74=a0_0x20331d;let _0xb3bf8e,_0x417535;try{let _0x555b58=_0x118e9c['apirequest'];if(!_0x555b58||!_0x555b58[_0x15ae74(0x562)]||!_0x555b58[_0x15ae74(0x393)])throw new Error('Falta\x20informação\x20para\x20a\x20chamada\x20API');let _0x35cc95;([_0x15ae74(0x75f),'https://api.openai.com/v1/images/generations',_0x15ae74(0x385)]['some'](_0x4cf233=>_0x555b58[_0x15ae74(0x562)][_0x15ae74(0x8eb)](_0x4cf233))||_0x555b58['requestFile'])&&(_0x35cc95='arraybuffer');let _0x3b3f3b='\u205f',_0x5a3211;try{_0x5a3211=JSON['parse'](_0x555b58['bodyString'][_0x15ae74(0x759)](new RegExp(_0x3b3f3b,'g'),''));}catch(_0x1bf485){throw _0x1bf485;}let _0x4c3df9={'method':_0x555b58[_0x15ae74(0x393)],'url':_0x555b58[_0x15ae74(0x562)],'headers':_0x555b58['header']||{},..._0x555b58['method'][_0x15ae74(0x5ad)]()!==_0x15ae74(0x839)&&_0x555b58[_0x15ae74(0x7b6)]?{'data':JSON[_0x15ae74(0x79b)](_0x555b58['bodyString'][_0x15ae74(0x759)](new RegExp(_0x3b3f3b,'g'),''))}:{},..._0x35cc95&&{'responseType':_0x35cc95}},_0x2de412=await(0x0,te[_0x15ae74(0x42b)])(_0x4c3df9),_0xb97e87=_0x2de412[_0x15ae74(0x8b8)]['content-type'];if(_0xb97e87&&_0xb97e87[_0x15ae74(0x8eb)](_0x15ae74(0x723))||typeof _0x2de412[_0x15ae74(0x311)]==_0x15ae74(0x6f2)){if(typeof _0x2de412['data']==_0x15ae74(0x6f2)){let _0x11f8be=_0x2de412['data'][_0x15ae74(0x759)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')['trim']();try{_0xb3bf8e=JSON['parse'](_0x11f8be);}catch(_0x399508){this['logger'][_0x15ae74(0x2c2)]('Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20'+_0x399508[_0x15ae74(0x923)]),_0xb3bf8e={'_apiResponse':_0x2de412[_0x15ae74(0x311)]};}}else _0xb3bf8e=_0x2de412[_0x15ae74(0x311)];let _0x54c5ca=_0x4514df[_0x15ae74(0x544)][_0x15ae74(0x64e)],_0x22fa0b=this[_0x15ae74(0x737)](_0xb3bf8e);return Object[_0x15ae74(0x2df)](_0x54c5ca,_0x22fa0b),_0x4514df[_0x15ae74(0x544)]['realVariables']=_0x54c5ca,_0x417535={'error':!0x1,'apiResponse':_0xb3bf8e},this['updateConversation'](_0x4514df,_0x118e9c,_0x417535),_0xb3bf8e;}if(_0xb97e87&&(_0xb97e87[_0x15ae74(0x8eb)]('application/octet-stream')||_0xb97e87[_0x15ae74(0x8eb)]('image')||_0xb97e87[_0x15ae74(0x8eb)]('audio')||_0xb97e87[_0x15ae74(0x8eb)](_0x15ae74(0x775)))){this['logger']['verbose'](this[_0x15ae74(0x8ba)]+'\x20('+this['instance']['wuid']+'):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20'+_0xb97e87);let _0x32a1e2=(0x0,X['v4'])(),_0x13955c='',_0x52e288={'image/jpeg':_0x15ae74(0x57e),'image/png':_0x15ae74(0x2eb),'image/gif':'.gif','image/webp':_0x15ae74(0x55f),'image/svg+xml':_0x15ae74(0x2e7),'audio/mpeg':_0x15ae74(0x643),'audio/ogg':_0x15ae74(0x5c5),'audio/wav':_0x15ae74(0x75a),'video/mp4':_0x15ae74(0x7c5),'video/webm':_0x15ae74(0x4a6),'video/ogg':'.ogv','text/plain':_0x15ae74(0x28d),'application/pdf':'.pdf','application/msword':_0x15ae74(0x49d),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':'.docx','application/vnd.ms-excel':_0x15ae74(0x251),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x15ae74(0x4cb),'application/vnd.ms-powerpoint':'.ppt','application/vnd.openxmlformats-officedocument.presentationml.presentation':_0x15ae74(0x429)};_0x52e288[_0xb97e87]?(_0x13955c=_0x52e288[_0xb97e87],this[_0x15ae74(0x7a2)][_0x15ae74(0x7a9)](this[_0x15ae74(0x8ba)]+'\x20('+this['instance']['wuid']+_0x15ae74(0x7a0)+_0x13955c)):(_0x13955c=_0x15ae74(0x64b),this[_0x15ae74(0x7a2)][_0x15ae74(0x7a9)](this[_0x15ae74(0x8ba)]+'\x20('+this[_0x15ae74(0x664)][_0x15ae74(0x60f)]+_0x15ae74(0x6b3)+_0x13955c)),_0x32a1e2+=_0x13955c,this[_0x15ae74(0x7a2)]['verbose'](this['instanceName']+'\x20('+this[_0x15ae74(0x664)]['wuid']+'):\x20Nome\x20do\x20arquivo\x20gerado:\x20'+_0x32a1e2);let _0x2cfad3=this[_0x15ae74(0x373)][_0x15ae74(0x51d)](_0x15ae74(0x763))[_0x15ae74(0x8ac)];if(!_0x2cfad3){let _0x589aec=this['configService'][_0x15ae74(0x51d)](_0x15ae74(0x53d));_0x2cfad3=_0x15ae74(0x398)+(_0x589aec&&_0x589aec['FULLCHAIN'][_0x15ae74(0x382)]('/')[0x4]);}let _0x516bf8=Buffer['from'](_0x2de412['data']);await this['saveMediaToFile'](_0x516bf8,_0x32a1e2);let _0x497435='/media/'+_0x32a1e2;_0x497435=''+_0x2cfad3+_0x497435,_0xb3bf8e={'fileUrl':_0x497435},_0x4514df[_0x15ae74(0x544)][_0x15ae74(0x64e)][_0x15ae74(0x7e4)]=_0x497435;let _0x1f5662=_0x4514df[_0x15ae74(0x544)][_0x15ae74(0x64e)],_0x179ef0=this[_0x15ae74(0x737)](_0xb3bf8e);return Object[_0x15ae74(0x2df)](_0x1f5662,_0x179ef0),_0x4514df[_0x15ae74(0x544)][_0x15ae74(0x64e)]=_0x1f5662,_0x417535={'error':!0x1,'apiResponse':{'fileUrl':_0x497435}},this[_0x15ae74(0x87e)](_0x4514df,_0x118e9c,_0x417535),_0xb3bf8e;}}catch(_0x227eb4){this[_0x15ae74(0x7a2)][_0x15ae74(0x2c2)](_0x15ae74(0x2d7)+_0x227eb4[_0x15ae74(0x923)]),_0x227eb4[_0x15ae74(0x60e)]&&(_0xb3bf8e=_0x227eb4['response'][_0x15ae74(0x311)]);let _0x4924df=_0x4514df[_0x15ae74(0x544)][_0x15ae74(0x64e)],_0x5517e4=this['flattenObject'](_0xb3bf8e);return Object[_0x15ae74(0x2df)](_0x4924df,_0x5517e4),_0x4514df[_0x15ae74(0x544)][_0x15ae74(0x64e)]=_0x4924df,_0x417535={'error':!0x0,'errorLog':_0x227eb4['toString'](),'apiResponse':_0xb3bf8e},this[_0x15ae74(0x87e)](_0x4514df,_0x118e9c,_0x417535),{'success':!0x1};}}[a0_0x20331d(0x2a7)](_0x4a513d,_0x5c4473){const _0x1ec9d5=a0_0x20331d;let _0x19c296=_0x549acd=>{const _0x21aa9a=a0_0xae02;let _0x72de47=_0x549acd['replace'](/[^0-9.,-]/g,'')[_0x21aa9a(0x759)](',','.'),_0x504538=parseFloat(_0x72de47);return isNaN(_0x504538)?null:_0x504538;},_0x35bce6=_0x5c4473['firstValue'],_0x1a7a4e=_0x5c4473['secondValue'];typeof _0x35bce6==_0x1ec9d5(0x6f2)&&(_0x35bce6=this[_0x1ec9d5(0x593)](_0x35bce6,_0x4a513d['chatLog'][_0x1ec9d5(0x64e)])??''),typeof _0x1a7a4e==_0x1ec9d5(0x6f2)&&(_0x1a7a4e=this['replaceVariables'](_0x1a7a4e,_0x4a513d[_0x1ec9d5(0x544)][_0x1ec9d5(0x64e)])??'');let _0x3abe97=null;if(!_0x5c4473[_0x1ec9d5(0x8a5)])return null;switch(this[_0x1ec9d5(0x7a2)]['verbose'](this['instanceName']+'\x20('+this[_0x1ec9d5(0x664)]['wuid']+_0x1ec9d5(0x6f5)+_0x35bce6),this[_0x1ec9d5(0x7a2)]['verbose'](this['instanceName']+'\x20('+this[_0x1ec9d5(0x664)][_0x1ec9d5(0x60f)]+_0x1ec9d5(0x8d5)+_0x1a7a4e),_0x5c4473[_0x1ec9d5(0x8a5)]){case'+':case'-':case'*':case'/':let _0xf8a1bb=_0x19c296(_0x35bce6||'0'),_0x5a0304=_0x19c296(_0x1a7a4e||'0');if(_0xf8a1bb===null)return null;switch(_0x5c4473['editOperator']){case'+':_0x3abe97=_0xf8a1bb+(_0x5a0304??0x0);break;case'-':_0x3abe97=_0xf8a1bb-(_0x5a0304??0x0);break;case'*':_0x3abe97=_0xf8a1bb*(_0x5a0304??0x1);break;case'/':_0x5a0304!==0x0&&(_0x3abe97=_0xf8a1bb/(_0x5a0304??0x1));break;}break;case _0x1ec9d5(0x403):case'findAndReplaceRegex':let _0x2d9164=_0x1a7a4e,_0x523a35=_0x5c4473[_0x1ec9d5(0x4b9)];if(typeof _0x523a35=='string'&&(_0x523a35=this[_0x1ec9d5(0x593)](_0x523a35,_0x4a513d[_0x1ec9d5(0x544)][_0x1ec9d5(0x64e)])??''),_0x2d9164&&_0x523a35!==void 0x0){let _0x300449=_0x5c4473[_0x1ec9d5(0x8a5)]===_0x1ec9d5(0x403)?new RegExp(_0x2d9164['replace'](/[-\/\\^$*+?.()|[\]{}]/g,_0x1ec9d5(0x728)),'g'):new RegExp(_0x2d9164,'g');_0x3abe97=_0x35bce6[_0x1ec9d5(0x759)](_0x300449,_0x523a35);}else console['warn'](_0x1ec9d5(0x31a));break;case _0x1ec9d5(0x7cf):_0x3abe97=_0x1a7a4e;break;case'extractRegex':let _0x2cd1c0=_0x35bce6[_0x1ec9d5(0x325)](new RegExp(_0x1a7a4e||''));_0x3abe97=_0x2cd1c0?_0x2cd1c0[0x0]:'';break;case _0x1ec9d5(0x894):_0x3abe97=_0x35bce6[_0x1ec9d5(0x394)](0x0,parseInt(_0x1a7a4e||'0'));break;case'truncatedtoEnd':let _0x4f7152=parseInt(_0x1a7a4e||'0');_0x3abe97=_0x35bce6[_0x1ec9d5(0x394)](_0x35bce6[_0x1ec9d5(0x786)]-_0x4f7152);break;case _0x1ec9d5(0x44c):let _0x497841=_0x19c296(_0x35bce6),_0x42a4ff=parseInt(_0x1a7a4e||'0');_0x42a4ff=Math[_0x1ec9d5(0x2d2)](_0x42a4ff),_0x497841!==null?_0x3abe97=_0x497841[_0x1ec9d5(0x68a)](_0x1ec9d5(0x6b8),{'minimumFractionDigits':_0x42a4ff,'maximumFractionDigits':_0x42a4ff}):(console[_0x1ec9d5(0x365)](_0x1ec9d5(0x4da)+_0x35bce6),_0x3abe97=null);break;case _0x1ec9d5(0x8b6):let _0x1c427e=_0x19c296(_0x35bce6);_0x1c427e!==null?_0x3abe97=_0x1c427e[_0x1ec9d5(0x68a)](_0x1ec9d5(0x6b8),{'style':'currency','currency':_0x1ec9d5(0x891)}):(console[_0x1ec9d5(0x365)](_0x1ec9d5(0x848)+_0x35bce6),_0x3abe97=null);break;case'upperCase':_0x3abe97=_0x35bce6[_0x1ec9d5(0x5ad)]();break;case _0x1ec9d5(0x7b5):_0x3abe97=_0x35bce6['toLowerCase']();break;case _0x1ec9d5(0x88d):_0x3abe97=_0x35bce6[_0x1ec9d5(0x382)]('\x20')[_0x1ec9d5(0x41b)](_0x38bc8b=>_0x38bc8b[_0x1ec9d5(0x5a8)](0x0)[_0x1ec9d5(0x5ad)]()+_0x38bc8b[_0x1ec9d5(0x394)](0x1)[_0x1ec9d5(0x6a5)]())[_0x1ec9d5(0x6ca)]('\x20');break;case _0x1ec9d5(0x3a8):_0x3abe97=_0x35bce6[_0x1ec9d5(0x291)]();break;default:_0x3abe97=_0x35bce6;}return _0x3abe97!==null?_0x3abe97[_0x1ec9d5(0x27d)]():null;}async[a0_0x20331d(0x856)](_0x33bf8f,_0xcb1236){const _0x18dac5=a0_0x20331d;try{let _0x1e4d3a=_0x33bf8f['varedits']?.[_0x18dac5(0x625)](_0x2d04eb=>_0x2d04eb[_0x18dac5(0x29e)]===_0xcb1236[_0x18dac5(0x53e)]?.[_0x18dac5(0x27d)]())||[],_0x24f7a2=_0xcb1236[_0x18dac5(0x752)],_0x2fea18=null,_0x2e848b=[],_0x5c25f4=_0x33bf8f[_0x18dac5(0x544)][_0x18dac5(0x64e)][_0x24f7a2];_0x2e848b[_0x18dac5(0x4e8)]('Valor\x20inicial:\x20\x22'+_0x5c25f4+'\x22');for(let _0x282198 of _0x1e4d3a){_0x282198['firstValue']=_0x5c25f4,_0x2fea18=_0x282198['firstValue'];let _0x284179;try{_0x284179=this[_0x18dac5(0x2a7)](_0x33bf8f,_0x282198);}catch(_0x493f40){this[_0x18dac5(0x7a2)][_0x18dac5(0x2c2)](_0x18dac5(0x569)+_0x493f40['message']);continue;}if(_0x284179!==null){let _0x11e0ac=_0x18dac5(0x23f)+_0x282198[_0x18dac5(0x8a5)]+'\x22',_0x1eae37=[_0x18dac5(0x8b6),'upperCase',_0x18dac5(0x7b5),'capitalizedWords',_0x18dac5(0x3a8)];_0x282198['editOperator']===_0x18dac5(0x403)||_0x282198['editOperator']===_0x18dac5(0x2c3)?_0x11e0ac+=_0x18dac5(0x85b)+_0x282198[_0x18dac5(0x22a)]+_0x18dac5(0x2c0)+_0x282198['replaceValue']+'\x22':!_0x1eae37['includes'](_0x282198[_0x18dac5(0x8a5)])&&_0x282198[_0x18dac5(0x22a)]!==null&&_0x282198['secondValue']!==void 0x0&&(_0x11e0ac+=_0x18dac5(0x6cf)+_0x282198[_0x18dac5(0x22a)]+'\x22'),_0x11e0ac+=',\x20resultado:\x20'+_0x284179+'.',_0x2e848b[_0x18dac5(0x4e8)](_0x11e0ac);}_0x284179!==null&&(_0x5c25f4=_0x284179);}if(_0x33bf8f[_0x18dac5(0x544)][_0x18dac5(0x64e)]&&_0xcb1236[_0x18dac5(0x752)]){_0x33bf8f[_0x18dac5(0x544)][_0x18dac5(0x64e)][_0xcb1236[_0x18dac5(0x752)]]=_0x5c25f4;let _0x2a0c89={'variable':_0xcb1236[_0x18dac5(0x752)],'oldValue':_0x2fea18,'newValue':_0x5c25f4,'moreLogs':_0x2e848b};try{this[_0x18dac5(0x87e)](_0x33bf8f,_0xcb1236,_0x2a0c89);}catch(_0x4f1a3a){this[_0x18dac5(0x7a2)][_0x18dac5(0x2c2)](_0x18dac5(0x3ba)+_0x4f1a3a[_0x18dac5(0x923)]);}}return _0x24f7a2;}catch(_0x5b3833){return this[_0x18dac5(0x7a2)][_0x18dac5(0x2c2)]('Erro\x20inesperado\x20em\x20processvaredits:\x20'+_0x5b3833[_0x18dac5(0x923)]),null;}}async['processConditions'](_0x4b25d8,_0xce447f){const _0x58503a=a0_0x20331d;try{let _0x48072e=[],_0x37e40e=_0x4b25d8[_0x58503a(0x56a)][_0x58503a(0x625)](_0x4d229e=>_0x4d229e[_0x58503a(0x29e)]===_0xce447f[_0x58503a(0x53e)]['toString']()),_0x10247b=null,_0x2e331c=!0x1;for(let _0x889eaf of _0x37e40e){let _0x416da0=this['evaluateCondition'](_0x4b25d8,_0x889eaf);_0x48072e[_0x58503a(0x4e8)](_0x58503a(0x75c)+_0x889eaf[_0x58503a(0x3c8)]+_0x58503a(0x2e1)+_0x889eaf[_0x58503a(0x890)]+',\x20Segundo\x20Valor:\x20'+_0x889eaf['secondValue']+_0x58503a(0x247)+_0x416da0),_0x10247b===null?_0x10247b=_0x416da0:_0x889eaf[_0x58503a(0x7f3)]===_0x58503a(0x1f1)?(_0x10247b=_0x10247b&&_0x416da0,_0x416da0||(_0x2e331c=!0x0)):_0x889eaf[_0x58503a(0x7f3)]==='or'&&(_0x2e331c||(_0x10247b=_0x10247b||_0x416da0));}_0x10247b===null&&(_0x10247b=!0x0);let _0xf2660d={'moreLogs':_0x48072e};_0x4b25d8[_0x58503a(0x544)][_0x58503a(0x1fc)]=_0x10247b,await this[_0x58503a(0x87e)](_0x4b25d8,_0xce447f,_0xf2660d);}catch(_0x55d20e){this[_0x58503a(0x7a2)]['error'](this[_0x58503a(0x8ba)]+'\x20('+this[_0x58503a(0x664)]['wuid']+_0x58503a(0x75e)+(_0x55d20e instanceof Error?_0x55d20e['message']:JSON[_0x58503a(0x5f3)](_0x55d20e,null,0x2)));}}[a0_0x20331d(0x5cc)](_0x3048f5,_0x23c6ba){const _0x1a1283=a0_0x20331d;let _0x37a9f9=_0x23c6ba[_0x1a1283(0x3c8)],_0x500bdd=_0x23c6ba[_0x1a1283(0x22a)];typeof _0x37a9f9==_0x1a1283(0x6f2)&&(_0x37a9f9=this[_0x1a1283(0x593)](_0x37a9f9,_0x3048f5[_0x1a1283(0x544)][_0x1a1283(0x64e)])??''),typeof _0x500bdd=='string'&&(_0x500bdd=this[_0x1a1283(0x593)](_0x500bdd,_0x3048f5[_0x1a1283(0x544)][_0x1a1283(0x64e)])??'');try{switch(_0x23c6ba['expression']){case _0x1a1283(0x86a):return _0x37a9f9===_0x500bdd;case'notEqual':return _0x37a9f9!==_0x500bdd;case _0x1a1283(0x466):return this[_0x1a1283(0x466)](_0x37a9f9,_0x500bdd);case'notContains':return!this[_0x1a1283(0x466)](_0x37a9f9,_0x500bdd);case _0x1a1283(0x1fd):return parseFloat(_0x37a9f9)>parseFloat(_0x500bdd);case _0x1a1283(0x4f5):return parseFloat(_0x37a9f9)<parseFloat(_0x500bdd);case'notEmpty':return _0x37a9f9!=='';case _0x1a1283(0x1fb):return _0x37a9f9==='';case _0x1a1283(0x4e7):return new RegExp(_0x500bdd)['test'](_0x37a9f9);case _0x1a1283(0x3ae):return!new RegExp(_0x500bdd)['test'](_0x37a9f9);default:return!0x1;}}catch(_0x56bd56){return this['logger']['error'](_0x1a1283(0x4a8)+_0x56bd56),!0x1;}}[a0_0x20331d(0x466)](_0x39a14e,_0x31be0c){const _0x2ad599=a0_0x20331d;if(_0x39a14e===_0x31be0c&&/^\d+$/[_0x2ad599(0x248)](_0x39a14e))return!0x0;if(this[_0x2ad599(0x428)](_0x39a14e)&&/^\d+$/[_0x2ad599(0x248)](_0x31be0c)){let _0x46f486=_0x39a14e['split'](',')[_0x2ad599(0x41b)](_0x57ee4b=>parseInt(_0x57ee4b[_0x2ad599(0x291)]())),_0x2d1470=parseInt(_0x31be0c);return _0x46f486['includes'](_0x2d1470);}return _0x39a14e[_0x2ad599(0x8eb)](_0x31be0c);}['isListOfNumbers'](_0x10ac05){return/^\d+(,\d+)*$/['test'](_0x10ac05);}[a0_0x20331d(0x48d)](_0x5eb2d8){const _0x1cfc59=a0_0x20331d;let _0xdec10a=!0x0,_0x5d32c2=null;for(let _0x54b6ea of _0x5eb2d8){let _0x4c6f0a=this[_0x1cfc59(0x4e0)](_0x54b6ea);if(_0x5d32c2==='or'&&_0x4c6f0a){_0xdec10a=!0x0;break;}if(_0x5d32c2===_0x1cfc59(0x1f1)&&!_0x4c6f0a){_0xdec10a=!0x1;break;}_0x5d32c2=_0x54b6ea[_0x1cfc59(0x7f3)];}return _0xdec10a;}[a0_0x20331d(0x4e0)](_0x4aa2f9){const _0x151164=a0_0x20331d;let _0x397872=_0x4aa2f9[_0x151164(0x3c8)],_0x33d1b8=_0x4aa2f9[_0x151164(0x22a)];try{switch(_0x4aa2f9[_0x151164(0x890)]){case _0x151164(0x86a):return String(_0x397872)===String(_0x33d1b8);case _0x151164(0x72f):return String(_0x397872)!==String(_0x33d1b8);case _0x151164(0x466):return String(_0x397872)['includes'](String(_0x33d1b8));case _0x151164(0x7d4):return!String(_0x397872)[_0x151164(0x8eb)](String(_0x33d1b8));case'greater':return parseFloat(String(_0x397872))>parseFloat(String(_0x33d1b8));case _0x151164(0x4f5):return parseFloat(String(_0x397872))<parseFloat(String(_0x33d1b8));case'notEmpty':return String(_0x397872)!=='';case _0x151164(0x1fb):return String(_0x397872)==='';case _0x151164(0x4e7):return new RegExp(String(_0x33d1b8))[_0x151164(0x248)](String(_0x397872));case'notMatchRegex':return!new RegExp(String(_0x33d1b8))['test'](String(_0x397872));default:return!0x1;}}catch(_0x34d1a0){return this['logger']['error']('Erro\x20ao\x20avaliar\x20a\x20condição:\x20'+_0x34d1a0),!0x1;}}async[a0_0x20331d(0x816)](_0x15329e,_0x594e38){const _0x568b91=a0_0x20331d;if(this[_0x568b91(0x7a2)][_0x568b91(0x7a9)](this[_0x568b91(0x8ba)]+'\x20('+this['instance']['wuid']+'):\x20Entrou\x20na\x20função\x20saveReply'),!_0x15329e||!_0x594e38)return this[_0x568b91(0x7a2)]['error'](this[_0x568b91(0x8ba)]+'\x20('+this[_0x568b91(0x664)][_0x568b91(0x60f)]+_0x568b91(0x773)),null;let _0x12a153=_0x15329e['chatLog']['lastReceivedMessage'][_0x568b91(0x2f3)]['id'];this[_0x568b91(0x7a2)][_0x568b91(0x7a9)](this['instanceName']+'\x20('+this[_0x568b91(0x664)][_0x568b91(0x60f)]+_0x568b91(0x797)+_0x12a153);let _0x2896f5={'key':{'id':_0x12a153}},_0x3fee70=_0x594e38[_0x568b91(0x752)];_0x15329e['chatLog'][_0x568b91(0x64e)]['_'+_0x3fee70+_0x568b91(0x8b1)]=null,_0x15329e[_0x568b91(0x544)][_0x568b91(0x64e)]['_'+_0x3fee70+_0x568b91(0x4c6)]=null,_0x15329e['chatLog']['realVariables']['_'+_0x3fee70+_0x568b91(0x48e)]=null,_0x15329e[_0x568b91(0x544)]['realVariables']['_'+_0x3fee70+_0x568b91(0x72c)]=_0x15329e[_0x568b91(0x544)][_0x568b91(0x90c)]['type'];try{let _0x33151e=await this[_0x568b91(0x82d)](_0x2896f5);this[_0x568b91(0x7a2)][_0x568b91(0x7a9)](this[_0x568b91(0x8ba)]+'\x20('+this[_0x568b91(0x664)][_0x568b91(0x60f)]+_0x568b91(0x23c)),_0x15329e[_0x568b91(0x544)][_0x568b91(0x64e)]['_'+_0x3fee70+_0x568b91(0x2fc)]=_0x33151e[_0x568b91(0x7e4)],_0x15329e['chatLog']['realVariables']['_'+_0x3fee70+_0x568b91(0x4c6)]=_0x33151e['mimetype'];let _0xd2ddd5=_0x33151e[_0x568b91(0x893)]['match'](/\/(\w+)$/),_0x4c1472=_0xd2ddd5?_0xd2ddd5[0x1]:null;_0x15329e[_0x568b91(0x544)][_0x568b91(0x64e)]['_'+_0x3fee70+'.extension']=_0x4c1472,this[_0x568b91(0x7a2)]['verbose'](this[_0x568b91(0x8ba)]+'\x20('+this['instance'][_0x568b91(0x60f)]+'):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27'+_0x3fee70+'\x27.');}catch(_0xec87e){this[_0x568b91(0x7a2)][_0x568b91(0x2c2)](this['instanceName']+'\x20('+this['instance'][_0x568b91(0x60f)]+_0x568b91(0x933)+_0xec87e[_0x568b91(0x923)]);}let _0x33e27e=_0x15329e[_0x568b91(0x544)][_0x568b91(0x90c)][_0x568b91(0x4e1)]||_0x15329e['chatLog'][_0x568b91(0x90c)][_0x568b91(0x312)]||_0x15329e[_0x568b91(0x544)][_0x568b91(0x90c)][_0x568b91(0x878)];try{_0x15329e[_0x568b91(0x544)][_0x568b91(0x64e)]||(_0x15329e[_0x568b91(0x544)]['realVariables']={});let _0x1e1bfe=_0x15329e[_0x568b91(0x544)][_0x568b91(0x64e)][_0x3fee70];_0x15329e[_0x568b91(0x544)]['realVariables'][_0x3fee70]=_0x33e27e;let _0x46a6cc={'variable':_0x3fee70,'oldValue':_0x1e1bfe,'newValue':_0x33e27e};this[_0x568b91(0x87e)](_0x15329e,_0x594e38,_0x46a6cc),this[_0x568b91(0x7a2)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x568b91(0x89e));}catch(_0x201a7d){let _0x4ebe49={'error':!0x0,'errorLog':_0x201a7d['toString']()};return this[_0x568b91(0x87e)](_0x15329e,_0x594e38,_0x4ebe49),this[_0x568b91(0x7a2)][_0x568b91(0x2c2)](this[_0x568b91(0x8ba)]+'\x20('+this['instance'][_0x568b91(0x60f)]+_0x568b91(0x784)+(_0x201a7d instanceof Error?_0x201a7d[_0x568b91(0x923)]:JSON[_0x568b91(0x5f3)](_0x201a7d,null,0x2))),null;}}async[a0_0x20331d(0x2ff)](_0x391713,_0x5b051c){const _0x4c2ba0=a0_0x20331d;if(this[_0x4c2ba0(0x7a2)][_0x4c2ba0(0x7a9)](this[_0x4c2ba0(0x8ba)]+'\x20('+this[_0x4c2ba0(0x664)][_0x4c2ba0(0x60f)]+_0x4c2ba0(0x812)),!_0x391713||!_0x5b051c)return this['logger'][_0x4c2ba0(0x2c2)](this[_0x4c2ba0(0x8ba)]+'\x20('+this[_0x4c2ba0(0x664)][_0x4c2ba0(0x60f)]+_0x4c2ba0(0x773)),null;let _0x4ab2a9=Date[_0x4c2ba0(0x37f)](),_0x4d28ec=parseInt(_0x5b051c['stopMinutes'],0xa);if(isNaN(_0x4d28ec))return this[_0x4c2ba0(0x7a2)][_0x4c2ba0(0x2c2)](this[_0x4c2ba0(0x8ba)]+'\x20('+this[_0x4c2ba0(0x664)][_0x4c2ba0(0x60f)]+_0x4c2ba0(0x646)),null;let _0xcfb1a1={'newStoppedUntil':_0x4ab2a9+_0x4d28ec*0x3c*0x3e8};return await this[_0x4c2ba0(0x87e)](_0x391713,_0x5b051c,_0xcfb1a1,!0x0),null;}async['processUazapi'](_0x16ce13,_0x10795d){const _0x5ba5fb=a0_0x20331d;try{switch(_0x10795d[_0x5ba5fb(0x700)][_0x5ba5fb(0x344)]){case _0x5ba5fb(0x7bb):await this[_0x5ba5fb(0x8fd)](_0x16ce13,_0x10795d);break;case _0x5ba5fb(0x52e):await this[_0x5ba5fb(0x3cd)](_0x16ce13,_0x10795d);break;case _0x5ba5fb(0x46e):await this[_0x5ba5fb(0x7d5)](_0x16ce13,_0x10795d);break;case _0x5ba5fb(0x5b6):await this['uazapiSendAudio'](_0x16ce13,_0x10795d);break;case _0x5ba5fb(0x886):await this[_0x5ba5fb(0x7de)](_0x16ce13,_0x10795d);break;case'sendPoll':await this[_0x5ba5fb(0x7ac)](_0x16ce13,_0x10795d);break;case _0x5ba5fb(0x5ca):await this[_0x5ba5fb(0x7ac)](_0x16ce13,_0x10795d);break;case _0x5ba5fb(0x509):await this[_0x5ba5fb(0x819)](_0x16ce13,_0x10795d);break;default:this['logger'][_0x5ba5fb(0x2c2)](this[_0x5ba5fb(0x8ba)]+'\x20('+this[_0x5ba5fb(0x664)][_0x5ba5fb(0x60f)]+_0x5ba5fb(0x42c)+_0x10795d[_0x5ba5fb(0x700)][_0x5ba5fb(0x344)]);}}catch(_0x42d3ca){this[_0x5ba5fb(0x7a2)][_0x5ba5fb(0x2c2)](this[_0x5ba5fb(0x8ba)]+'\x20('+this[_0x5ba5fb(0x664)][_0x5ba5fb(0x60f)]+_0x5ba5fb(0x8ea)+(_0x42d3ca instanceof Error?_0x42d3ca[_0x5ba5fb(0x923)]:JSON[_0x5ba5fb(0x5f3)](_0x42d3ca,null,0x2)));}}async[a0_0x20331d(0x87e)](_0x3ea2f4,_0x5c8a75,_0x25b5c4,_0x53344b=!0x1,_0x16b7cb=!0x1){const _0x4e98ef=a0_0x20331d;_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x8e3)]||(_0x3ea2f4['chatLog'][_0x4e98ef(0x8e3)]=[]);let _0x1b0684=(_0x3ea2f4['chatLog'][_0x4e98ef(0x8e3)]?.[_0x4e98ef(0x786)]??0x0)+0x1,_0x4dd36f=_0x3ea2f4[_0x4e98ef(0x544)]['blockLogs'][_0x4e98ef(0x625)](_0x1f6506=>String(_0x1f6506[_0x4e98ef(0x29e)])===String(_0x5c8a75[_0x4e98ef(0x53e)]))['length']+0x1,_0x5d61e3=_0x25b5c4?.[_0x4e98ef(0x255)]??Date[_0x4e98ef(0x37f)](),_0x3d1caf=_0x25b5c4?.['error']?_0x25b5c4[_0x4e98ef(0x280)]??_0x25b5c4['error'][_0x4e98ef(0x27d)]():void 0x0,_0x10efec={'onTime':_0x5d61e3,'blockId':_0x5c8a75[_0x4e98ef(0x53e)],'order':_0x1b0684,'activatedCount':_0x4dd36f,'error':_0x25b5c4?.[_0x4e98ef(0x2c2)]??!0x1,'messageId':_0x25b5c4?.['messageId'],'apiResponse':_0x25b5c4?.[_0x4e98ef(0x68b)],'apiResponseString':_0x25b5c4?.[_0x4e98ef(0x68b)]?JSON[_0x4e98ef(0x5f3)](_0x25b5c4?.[_0x4e98ef(0x68b)]):void 0x0,'variable':_0x25b5c4?.[_0x4e98ef(0x8cb)],'oldValue':_0x25b5c4?.[_0x4e98ef(0x1f9)],'newValue':_0x25b5c4?.[_0x4e98ef(0x236)],'newStoppedUntil':_0x25b5c4?.[_0x4e98ef(0x2d1)],'moreLogs':_0x25b5c4?.[_0x4e98ef(0x6c5)],'errorLog':_0x3d1caf};if(_0x25b5c4[_0x4e98ef(0x6c5)]&&_0x25b5c4[_0x4e98ef(0x6c5)][_0x4e98ef(0x786)]>0x0){let _0x159814=_0x25b5c4['moreLogs'][_0x4e98ef(0x41b)](_0x33b3b1=>this[_0x4e98ef(0x3b1)](_0x33b3b1,_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x64e)]));_0x10efec[_0x4e98ef(0x6c5)]=_0x159814;}if(_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x64e)]||(_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x64e)]={}),_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x64e)]['_activatedCount']=String(_0x4dd36f),_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x64e)][_0x4e98ef(0x209)]=String(_0x25b5c4['error']??!0x1),_0x3ea2f4[_0x4e98ef(0x544)]['blockLogs'][_0x4e98ef(0x4e8)](_0x10efec),_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x64e)]['telefone']&&_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x64e)][_0x4e98ef(0x51e)]!==_0x3ea2f4[_0x4e98ef(0x3eb)]){let _0x4c8b79=(await this['whatsappNumber']({'numbers':[_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x64e)][_0x4e98ef(0x51e)]]}))[0x0][_0x4e98ef(0x461)];_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x64e)]['telefone']=_0x4c8b79,_0x3ea2f4[_0x4e98ef(0x3eb)]=_0x4c8b79;try{let _0x380316={'_id':{'$ne':_0x3ea2f4[_0x4e98ef(0x53e)]},'remoteJid':_0x4c8b79,'status':_0x4e98ef(0x29f)},_0x2a04f4={'status':'closed'};await this['repository'][_0x4e98ef(0x444)][_0x4e98ef(0x36d)](_0x380316,_0x2a04f4,this[_0x4e98ef(0x664)]['wuid']),this['logger'][_0x4e98ef(0x7a9)](this[_0x4e98ef(0x8ba)]+'\x20('+this[_0x4e98ef(0x664)][_0x4e98ef(0x60f)]+_0x4e98ef(0x7ef));}catch(_0x59acdc){this['logger'][_0x4e98ef(0x2c2)](this['instanceName']+'\x20('+this[_0x4e98ef(0x664)][_0x4e98ef(0x60f)]+_0x4e98ef(0x6eb)+_0x59acdc['message']);}try{let _0x41b75d=_0x3ea2f4['chatLog']['realVariables'],_0x54107c=await this[_0x4e98ef(0x46a)](_0x4c8b79),_0x10e477={..._0x41b75d,..._0x54107c,'_remoteJid':_0x4c8b79};_0x3ea2f4['chatLog'][_0x4e98ef(0x64e)]=_0x10e477;}catch(_0x222281){this[_0x4e98ef(0x7a2)][_0x4e98ef(0x2c2)](this[_0x4e98ef(0x8ba)]+'\x20('+this[_0x4e98ef(0x664)]['wuid']+_0x4e98ef(0x6da)+_0x222281[_0x4e98ef(0x923)]);}}_0x3ea2f4['chatLog']['lastBlockId']=_0x5c8a75['_id'][_0x4e98ef(0x27d)](),_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x60c)]&&(_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x60c)]=_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x60c)]),_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x90c)]&&(_0x3ea2f4['chatLog'][_0x4e98ef(0x90c)]=_0x3ea2f4['chatLog'][_0x4e98ef(0x90c)]),_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x1fc)]&&(_0x3ea2f4[_0x4e98ef(0x544)][_0x4e98ef(0x1fc)]=_0x3ea2f4['chatLog'][_0x4e98ef(0x1fc)]),_0x16b7cb&&(_0x3ea2f4[_0x4e98ef(0x8aa)]=_0x4e98ef(0x7b4)),_0x53344b?this['saveConversationToDatabase'](_0x3ea2f4):this[_0x4e98ef(0x7b0)](_0x3ea2f4,_0x5c8a75);}[a0_0x20331d(0x3b1)](_0x2e0e6f,_0x28449c){const _0x37845e=a0_0x20331d;return _0x2e0e6f[_0x37845e(0x759)](/\{\{([^}]+)\}\}/g,(_0x357b60,_0x2ea286)=>_0x28449c[_0x2ea286]?'{{'+_0x2ea286+'}}\x20->\x20\x22'+_0x28449c[_0x2ea286]+'\x22':'{{'+_0x2ea286+_0x37845e(0x69a));}async['saveConversationToDatabase'](_0xf700b2){const _0x5b62e3=a0_0x20331d;try{let _0x32dfac=Object[_0x5b62e3(0x458)](_0xf700b2[_0x5b62e3(0x544)][_0x5b62e3(0x64e)])[_0x5b62e3(0x41b)](([_0x14adad,_0x5b89f0])=>({'name':_0x14adad,'value':_0x5b89f0})),_0x2f876b={'status':_0xf700b2[_0x5b62e3(0x8aa)],'remoteJid':_0xf700b2['remoteJid'],'blocks':_0xf700b2[_0x5b62e3(0x210)],'waitingMenu_id':_0xf700b2[_0x5b62e3(0x471)],'waitingMenu_text':_0xf700b2['waitingMenu_text'],'waitingMenu_replyOptions':_0xf700b2[_0x5b62e3(0x43d)],'chatLog':{'lastBlockId':_0xf700b2[_0x5b62e3(0x544)]['lastBlockId'],'lastSendMessage':_0xf700b2[_0x5b62e3(0x544)][_0x5b62e3(0x60c)],'lastReceivedMessage':_0xf700b2[_0x5b62e3(0x544)]['lastReceivedMessage'],'lastCondition':_0xf700b2[_0x5b62e3(0x544)][_0x5b62e3(0x1fc)],'chatVariables':_0x32dfac,'realVariables':_0xf700b2[_0x5b62e3(0x544)][_0x5b62e3(0x64e)],'blockLogs':_0xf700b2['chatLog'][_0x5b62e3(0x8e3)]}},_0x553835=await this[_0x5b62e3(0x402)][_0x5b62e3(0x444)][_0x5b62e3(0x2d5)](_0xf700b2['_id'],_0x2f876b,this[_0x5b62e3(0x664)][_0x5b62e3(0x60f)]);if(_0x553835){this[_0x5b62e3(0x7a2)][_0x5b62e3(0x7a9)](this[_0x5b62e3(0x8ba)]+'\x20('+this[_0x5b62e3(0x664)][_0x5b62e3(0x60f)]+_0x5b62e3(0x771)+_0x553835[_0x5b62e3(0x53e)]);try{let _0x307f79=['nome',_0x5b62e3(0x928),_0x5b62e3(0x619),_0x5b62e3(0x506),_0x5b62e3(0x8aa),_0x5b62e3(0x2d0),_0x5b62e3(0x6d3),_0x5b62e3(0x931),_0x5b62e3(0x820),_0x5b62e3(0x48b)];if(!this[_0x5b62e3(0x246)]&&(await this[_0x5b62e3(0x3df)](),!this[_0x5b62e3(0x246)]))throw new Error(_0x5b62e3(0x20c));let _0x2bc057=this[_0x5b62e3(0x246)]?.[_0x5b62e3(0x6fb)]['map'](_0x3bc38c=>_0x3bc38c[_0x5b62e3(0x8b9)]),_0x18b011={};Object[_0x5b62e3(0x458)](_0xf700b2[_0x5b62e3(0x544)][_0x5b62e3(0x64e)])[_0x5b62e3(0x22b)](([_0x22ec5e,_0x1e7710])=>{const _0x2d0f16=_0x5b62e3;_0x307f79['includes'](_0x22ec5e)&&(_0x22ec5e===_0x2d0f16(0x931)&&typeof _0x1e7710=='string'?_0x18b011[_0x22ec5e]=_0x1e7710['split'](',')[_0x2d0f16(0x41b)](_0x5e62b8=>_0x5e62b8[_0x2d0f16(0x291)]())[_0x2d0f16(0x625)](_0x76e512=>_0x76e512!==''):_0x22ec5e===_0x2d0f16(0x820)&&typeof _0x1e7710==_0x2d0f16(0x6f2)?_0x18b011[_0x22ec5e]=_0x1e7710[_0x2d0f16(0x382)](',')[_0x2d0f16(0x41b)](_0x355d52=>_0x355d52[_0x2d0f16(0x291)]())['filter'](_0x589d8b=>_0x589d8b!==''):_0x18b011[_0x22ec5e]=_0x1e7710);});let _0x568c4d=_0xf700b2[_0x5b62e3(0x544)][_0x5b62e3(0x8e3)][_0xf700b2['chatLog'][_0x5b62e3(0x8e3)]['length']-0x1];if(_0x568c4d){let _0x24ebee=_0x568c4d[_0x5b62e3(0x2d1)];_0x24ebee!==void 0x0&&(_0x18b011[_0x5b62e3(0x3e9)]=_0x24ebee[_0x5b62e3(0x27d)]());}let _0x4406bf=_0x32dfac[_0x5b62e3(0x625)](_0x37d434=>_0x2bc057[_0x5b62e3(0x8eb)](_0x37d434['name']));this[_0x5b62e3(0x7a2)][_0x5b62e3(0x7a9)](this[_0x5b62e3(0x8ba)]+'\x20('+this['instance'][_0x5b62e3(0x60f)]+_0x5b62e3(0x919)),this[_0x5b62e3(0x7a2)][_0x5b62e3(0x7a9)](_0x18b011),this[_0x5b62e3(0x7a2)][_0x5b62e3(0x7a9)](this[_0x5b62e3(0x8ba)]+'\x20('+this[_0x5b62e3(0x664)][_0x5b62e3(0x60f)]+_0x5b62e3(0x5af)),this[_0x5b62e3(0x7a2)]['verbose'](_0x4406bf);let _0x5082d8=_0x4406bf[_0x5b62e3(0x41b)](_0x5c2b65=>{const _0x5dcf3f=_0x5b62e3;let _0x5f01d4=this[_0x5dcf3f(0x246)]?.[_0x5dcf3f(0x6fb)]['find'](_0x254d0e=>_0x254d0e['name']===_0x5c2b65[_0x5dcf3f(0x8b9)]);if(!_0x5f01d4)throw new Error(_0x5dcf3f(0x30c)+_0x5c2b65[_0x5dcf3f(0x8b9)]);return{'_id':_0x5f01d4['_id'],'value':_0x5c2b65[_0x5dcf3f(0x3c3)]};});this[_0x5b62e3(0x7a2)]['verbose'](this[_0x5b62e3(0x8ba)]+'\x20('+this['instance']['wuid']+'):\x20transformedCustomFieldVariables'),this[_0x5b62e3(0x7a2)][_0x5b62e3(0x7a9)](_0x5082d8),await this[_0x5b62e3(0x2ca)](_0xf700b2['remoteJid'],_0x18b011,_0x5082d8);}catch(_0x7b6e9b){this[_0x5b62e3(0x7a2)][_0x5b62e3(0x2c2)](this['instanceName']+'\x20('+this[_0x5b62e3(0x664)][_0x5b62e3(0x60f)]+_0x5b62e3(0x582)+(_0x7b6e9b instanceof Error?_0x7b6e9b[_0x5b62e3(0x923)]:JSON[_0x5b62e3(0x5f3)](_0x7b6e9b,null,0x2)));}}else this[_0x5b62e3(0x7a2)]['error'](this['instanceName']+'\x20('+this[_0x5b62e3(0x664)][_0x5b62e3(0x60f)]+'):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida');}catch(_0x2caf1b){this[_0x5b62e3(0x7a2)][_0x5b62e3(0x2c2)](this[_0x5b62e3(0x8ba)]+'\x20('+this['instance'][_0x5b62e3(0x60f)]+_0x5b62e3(0x2b5)+(_0x2caf1b instanceof Error?_0x2caf1b['message']:JSON['stringify'](_0x2caf1b,null,0x2)));}}async[a0_0x20331d(0x2ca)](_0x111b3e,_0x4c7c22,_0x4f6c51){const _0x33a6fb=a0_0x20331d;try{let _0x419983={'leadInfo.leadnome':_0x4c7c22[_0x33a6fb(0x798)],'leadInfo.nomecompleto':_0x4c7c22['nomecompleto'],'leadInfo.email':_0x4c7c22[_0x33a6fb(0x619)],'leadInfo.cpf':_0x4c7c22[_0x33a6fb(0x506)],'leadInfo.status':_0x4c7c22['status'],'leadInfo.notas':_0x4c7c22['notas'],'leadInfo.responsavelid':_0x4c7c22[_0x33a6fb(0x6d3)],'leadInfo.tags':_0x4c7c22[_0x33a6fb(0x931)],'leadInfo.etiquetas':_0x4c7c22[_0x33a6fb(0x820)],'leadInfo.customFields':_0x4f6c51,'leadInfo.atendimentoAberto':_0x4c7c22[_0x33a6fb(0x48b)]},_0x5c85de=await this[_0x33a6fb(0x402)][_0x33a6fb(0x617)][_0x33a6fb(0x63f)]({'where':{'_id':_0x111b3e}},this['instance'][_0x33a6fb(0x60f)]);if(!_0x5c85de)return'chat\x20não\x20encontrado';let _0x40e1d4=new Set(_0x5c85de['leadInfo'][_0x33a6fb(0x820)]||[]),_0x56ee68=new Set(_0x4c7c22[_0x33a6fb(0x820)]||[]),_0x3295b2=await this[_0x33a6fb(0x402)][_0x33a6fb(0x47b)][_0x33a6fb(0x691)]({'where':{}},this['instance'][_0x33a6fb(0x60f)]),_0x2277c0=new Set(_0x3295b2['map'](_0x4da44a=>_0x4da44a[_0x33a6fb(0x53e)])),_0x45112f=[..._0x56ee68][_0x33a6fb(0x625)](_0x4300ff=>!_0x40e1d4[_0x33a6fb(0x718)](_0x4300ff)&&_0x2277c0[_0x33a6fb(0x718)](_0x4300ff)),_0x5d966c=[..._0x40e1d4][_0x33a6fb(0x625)](_0x4d0a65=>!_0x56ee68[_0x33a6fb(0x718)](_0x4d0a65));for(let _0x55d7a8 of _0x45112f)await this[_0x33a6fb(0x54a)](_0x55d7a8,_0x5c85de[_0x33a6fb(0x53e)]),_0x40e1d4[_0x33a6fb(0x783)](_0x55d7a8);for(let _0x181be3 of _0x5d966c)await this[_0x33a6fb(0x58a)](_0x181be3,_0x5c85de['_id']),_0x40e1d4[_0x33a6fb(0x65e)](_0x181be3);if(_0x33a6fb(0x3e9)in _0x4c7c22){let _0x61028e=_0x4c7c22[_0x33a6fb(0x3e9)];_0x419983[_0x33a6fb(0x5c2)]=_0x61028e?Number(_0x61028e):null;}if(_0x33a6fb(0x48b)in _0x4c7c22){let _0x1e0edc=_0x4c7c22['atendimentoAberto'][_0x33a6fb(0x6a5)]();_0x419983[_0x33a6fb(0x4b0)]=_0x1e0edc==='true'||_0x1e0edc==='1'||_0x1e0edc==='yes'||_0x1e0edc==='sim';}let _0x1ce1c7=await this[_0x33a6fb(0x402)]['chat']['updateOne']({'where':{'_id':_0x111b3e}},_0x419983,this[_0x33a6fb(0x664)][_0x33a6fb(0x60f)]);_0x1ce1c7?(this[_0x33a6fb(0x7a2)]['verbose'](this[_0x33a6fb(0x8ba)]+'\x20('+this['instance']['wuid']+_0x33a6fb(0x704)+_0x1ce1c7[_0x33a6fb(0x53e)]),q(this[_0x33a6fb(0x8ba)],_0x33a6fb(0x28b),{'chat':_0x1ce1c7})):this[_0x33a6fb(0x7a2)][_0x33a6fb(0x2c2)](this[_0x33a6fb(0x8ba)]+'\x20('+this[_0x33a6fb(0x664)][_0x33a6fb(0x60f)]+'):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD');}catch(_0x15bd5d){this[_0x33a6fb(0x7a2)][_0x33a6fb(0x2c2)](this['instanceName']+'\x20('+this[_0x33a6fb(0x664)][_0x33a6fb(0x60f)]+_0x33a6fb(0x898)+(_0x15bd5d instanceof Error?_0x15bd5d[_0x33a6fb(0x923)]:JSON[_0x33a6fb(0x5f3)](_0x15bd5d,null,0x2)));}}async[a0_0x20331d(0x58c)](_0x3f99be,_0x3853c8){const _0x59bcad=a0_0x20331d;this[_0x59bcad(0x7a2)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x59bcad(0x54e)+_0x3853c8);try{let _0x52f74a=await this[_0x59bcad(0x402)][_0x59bcad(0x617)][_0x59bcad(0x2d5)]({'where':{'_id':_0x3f99be[_0x59bcad(0x3eb)]}},{'leadInfo.desativadoFluxoAte':_0x3853c8},this[_0x59bcad(0x664)]['wuid']);this['logger'][_0x59bcad(0x7a9)](this[_0x59bcad(0x8ba)]+'\x20('+this[_0x59bcad(0x664)][_0x59bcad(0x60f)]+_0x59bcad(0x6f3)+_0x3f99be[_0x59bcad(0x53e)]),this['logger'][_0x59bcad(0x7a9)](this['instanceName']+'\x20('+this[_0x59bcad(0x664)][_0x59bcad(0x60f)]+'):\x20atualização\x20chat:\x20'+JSON[_0x59bcad(0x5f3)](_0x52f74a,null,0x2)),_0x52f74a&&q(this[_0x59bcad(0x8ba)],_0x59bcad(0x28b),{'chat':_0x52f74a});}catch(_0x4052b9){this['logger']['error'](this[_0x59bcad(0x8ba)]+'\x20('+this['instance'][_0x59bcad(0x60f)]+'):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20'+(_0x4052b9 instanceof Error?_0x4052b9[_0x59bcad(0x923)]:JSON['stringify'](_0x4052b9,null,0x2)));}}async[a0_0x20331d(0x442)](_0x51193e){const _0x1fe298=a0_0x20331d;try{this[_0x1fe298(0x7a2)][_0x1fe298(0x7a9)](this[_0x1fe298(0x8ba)]+'\x20('+this[_0x1fe298(0x664)][_0x1fe298(0x60f)]+_0x1fe298(0x634));let _0x228b84=_0x51193e['replace'](/\D/g,''),_0x2d67a6=this[_0x1fe298(0x246)][_0x1fe298(0x550)][_0x1fe298(0x691)](_0x53d143=>_0x53d143[_0x1fe298(0x232)]===_0x228b84);if(_0x2d67a6||(this[_0x1fe298(0x7a2)]['verbose'](this[_0x1fe298(0x8ba)]+'\x20('+this[_0x1fe298(0x664)][_0x1fe298(0x60f)]+_0x1fe298(0x512)),_0x2d67a6=this[_0x1fe298(0x246)][_0x1fe298(0x550)]['find'](_0x3f8d3b=>_0x3f8d3b[_0x1fe298(0x42b)]===!0x0)),!_0x2d67a6)return this[_0x1fe298(0x7a2)]['verbose'](this[_0x1fe298(0x8ba)]+'\x20('+this['instance'][_0x1fe298(0x60f)]+'):\x20Não\x20achou\x20nenhum\x20flow'),null;let _0x4e06ac=await this['repository'][_0x1fe298(0x29c)]['findOne']({'where':{'_id':_0x2d67a6['_id']}});if(!_0x4e06ac||!_0x4e06ac[_0x1fe298(0x733)]?.[_0x1fe298(0x8eb)](this[_0x1fe298(0x664)][_0x1fe298(0x60f)]))throw this[_0x1fe298(0x7a2)][_0x1fe298(0x2c2)](this[_0x1fe298(0x8ba)]+'\x20('+this[_0x1fe298(0x664)]['wuid']+'):\x20Flow\x20\x27'+_0x4e06ac[_0x1fe298(0x53e)]+_0x1fe298(0x57a)),new m(_0x1fe298(0x724)+_0x4e06ac[_0x1fe298(0x53e)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');return _0x4e06ac;}catch(_0x5ad7eb){return this[_0x1fe298(0x7a2)][_0x1fe298(0x2c2)](this[_0x1fe298(0x8ba)]+'\x20('+this[_0x1fe298(0x664)][_0x1fe298(0x60f)]+_0x1fe298(0x859)+(_0x5ad7eb instanceof Error?_0x5ad7eb[_0x1fe298(0x923)]:JSON['stringify'](_0x5ad7eb,null,0x2))),null;}}async[a0_0x20331d(0x531)](_0x3f105e,_0x5433db){const _0x52f982=a0_0x20331d;try{let _0x2db9f4=!!_0x5433db[_0x52f982(0x878)],_0x56aa39=_0x5433db['quoted'],_0x11bbbb=null;if(this[_0x52f982(0x7a2)][_0x52f982(0x7a9)](this['instanceName']+'\x20('+this[_0x52f982(0x664)]['wuid']+_0x52f982(0x43e)+_0x2db9f4+'\x20quoted:\x20'+_0x56aa39),_0x2db9f4){this['logger']['verbose'](this[_0x52f982(0x8ba)]+'\x20('+this['instance']['wuid']+_0x52f982(0x540));let _0x255499={'where':{'remoteJid':_0x3f105e,'waitingMenu_id':_0x56aa39}};if(_0x11bbbb=await this[_0x52f982(0x402)][_0x52f982(0x444)][_0x52f982(0x63f)](_0x255499,this[_0x52f982(0x664)][_0x52f982(0x60f)]),!_0x11bbbb)return this[_0x52f982(0x7a2)][_0x52f982(0x7a9)](this[_0x52f982(0x8ba)]+'\x20('+this[_0x52f982(0x664)]['wuid']+_0x52f982(0x5e6)),null;let _0x292c06=Date['now'](),_0x40cebe=_0x11bbbb?.[_0x52f982(0x3fc)]||0x0,_0x1b25a4=_0x292c06-_0x40cebe*0x3c*0x3e8;if(_0x11bbbb[_0x52f982(0x8f8)]<_0x1b25a4){this[_0x52f982(0x7a2)][_0x52f982(0x7a9)](this[_0x52f982(0x8ba)]+'\x20('+this['instance'][_0x52f982(0x60f)]+_0x52f982(0x20f));let _0x9005b6={'number':_0x11bbbb[_0x52f982(0x3eb)],'options':{'delay':0x0},'textMessage':{'text':_0x11bbbb[_0x52f982(0x7ab)]}};await this['textMessage'](_0x9005b6);let _0x46c814={'status':_0x52f982(0x7b4),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x52f982(0x402)]['flowConversation'][_0x52f982(0x2d5)](_0x11bbbb[_0x52f982(0x53e)],_0x46c814,this[_0x52f982(0x664)][_0x52f982(0x60f)]),null;}return _0x11bbbb['lastInteraction']=Date[_0x52f982(0x37f)](),_0x11bbbb[_0x52f982(0x544)][_0x52f982(0x90c)]=_0x5433db,_0x11bbbb;}else{this['logger'][_0x52f982(0x7a9)](this['instanceName']+'\x20('+this[_0x52f982(0x664)][_0x52f982(0x60f)]+_0x52f982(0x51c)+this[_0x52f982(0x664)][_0x52f982(0x60f)]+_0x52f982(0x4eb)),this[_0x52f982(0x7a2)][_0x52f982(0x7a9)](this[_0x52f982(0x8ba)]+'\x20('+this['instance'][_0x52f982(0x60f)]+_0x52f982(0x902));let _0x261e88={'where':{'remoteJid':_0x3f105e,'status':_0x52f982(0x29f)}};if(_0x11bbbb=await this['repository'][_0x52f982(0x444)][_0x52f982(0x63f)](_0x261e88,this[_0x52f982(0x664)][_0x52f982(0x60f)]),!_0x11bbbb){let _0x3e3351=await this['findFlow'](_0x3f105e);if(_0x3e3351&&(_0x11bbbb=await this['createNewConversation'](_0x3e3351,_0x5433db['key'],_0x5433db)),!_0x11bbbb)return null;}let _0x21394c=Date[_0x52f982(0x37f)](),_0x440816=_0x11bbbb?.[_0x52f982(0x3fc)]||0x0,_0x3ded36=_0x21394c-_0x440816*0x3c*0x3e8;if(this[_0x52f982(0x7a2)]['verbose'](this[_0x52f982(0x8ba)]+'\x20('+this[_0x52f982(0x664)][_0x52f982(0x60f)]+_0x52f982(0x445)+_0x21394c+_0x52f982(0x5e9)+_0x440816+_0x52f982(0x5fd)+_0x3ded36),this[_0x52f982(0x7a2)]['verbose'](this['instanceName']+'\x20('+this[_0x52f982(0x664)][_0x52f982(0x60f)]+_0x52f982(0x7f9)),this['logger']['verbose'](this[_0x52f982(0x8ba)]+'\x20('+this[_0x52f982(0x664)]['wuid']+_0x52f982(0x688)+_0x11bbbb['lastInteraction']),this[_0x52f982(0x7a2)][_0x52f982(0x7a9)](this[_0x52f982(0x8ba)]+'\x20('+this[_0x52f982(0x664)][_0x52f982(0x60f)]+'):\x20expirationTime:\x20'+_0x3ded36),_0x11bbbb['lastInteraction']<_0x3ded36){this['logger'][_0x52f982(0x7a9)](this[_0x52f982(0x8ba)]+'\x20('+this['instance'][_0x52f982(0x60f)]+_0x52f982(0x448));let _0x44720b=await this[_0x52f982(0x442)](_0x3f105e);if(_0x44720b===null)return null;_0x11bbbb&&await this[_0x52f982(0x402)][_0x52f982(0x444)][_0x52f982(0x2d5)](_0x11bbbb['_id'],{'status':_0x52f982(0x7b4)},this[_0x52f982(0x664)]['wuid']),_0x11bbbb=await this[_0x52f982(0x5e8)](_0x44720b,_0x5433db['key'],_0x5433db);}return _0x11bbbb['lastInteraction']=_0x21394c,_0x11bbbb[_0x52f982(0x544)][_0x52f982(0x90c)]=_0x5433db,_0x11bbbb;}}catch(_0x4fd8ac){return this[_0x52f982(0x7a2)][_0x52f982(0x2c2)](this[_0x52f982(0x8ba)]+'\x20('+this[_0x52f982(0x664)][_0x52f982(0x60f)]+_0x52f982(0x90d)+(_0x4fd8ac instanceof Error?_0x4fd8ac[_0x52f982(0x923)]:JSON[_0x52f982(0x5f3)](_0x4fd8ac,null,0x2))),null;}}async[a0_0x20331d(0x5e8)](_0x2c353a,_0xe9e6f3,_0x4a772b){const _0x72ad02=a0_0x20331d;this[_0x72ad02(0x7a2)][_0x72ad02(0x7a9)](this[_0x72ad02(0x8ba)]+'\x20('+this[_0x72ad02(0x664)][_0x72ad02(0x60f)]+_0x72ad02(0x7fe));try{let _0x1e788d=require(_0x72ad02(0x8d4))[_0x72ad02(0x920)],_0x8d4f8b=Date[_0x72ad02(0x37f)](),_0x29f629=_0x72ad02(0x48a),_0x313d54=_0xe9e6f3[_0x72ad02(0x288)]?null:_0x4a772b,_0x4a3550=_0xe9e6f3['fromMe']?_0x4a772b:null,_0x5b76bf=_0xe9e6f3['remoteJid'],_0xe437a0=this[_0x72ad02(0x246)]['flows'][_0x72ad02(0x691)](_0x442e31=>_0x442e31[_0x72ad02(0x53e)]===_0x2c353a[_0x72ad02(0x53e)]?.[_0x72ad02(0x27d)]()),_0x3d67c1=_0xe437a0?.['minutesToClose']??_0x2c353a[_0x72ad02(0x3fc)]??0x0,_0x498618=_0xe437a0?.[_0x72ad02(0x5b5)]??_0x2c353a[_0x72ad02(0x5b5)]??!0x1;await this[_0x72ad02(0x927)](_0x5b76bf);let _0x5c6770={'flowId':_0x2c353a['_id'],..._0x2c353a,'chatLog':null},_0x2159fe=await this['variablesToObject'](_0x5c6770['variables']),_0x389b8b=await this['getVariablesChat'](_0x5b76bf),_0x1bd6b2={..._0x2159fe,..._0x389b8b,'_remoteJid':_0x5b76bf},_0x17725d={'lastReceivedMessage':_0x313d54,'lastSendMessage':_0x4a3550,'lastBlockId':_0x29f629,'lastCondition':!0x0,'realVariables':_0x1bd6b2};_0x5c6770[_0x72ad02(0x544)]=_0x17725d,delete _0x5c6770['_id'],_0x5c6770[_0x72ad02(0x53e)]=new _0x1e788d(),_0x5c6770[_0x72ad02(0x8f8)]=_0x8d4f8b,_0x5c6770['status']=_0x72ad02(0x29f),_0x5c6770[_0x72ad02(0x3eb)]=_0x5b76bf,_0x5c6770[_0x72ad02(0x3fc)]=_0x3d67c1,_0x5c6770[_0x72ad02(0x5b5)]=_0x498618;let _0x5800b2=await this['repository']['flowConversation']['updateOne'](_0x5c6770[_0x72ad02(0x53e)],_0x5c6770,this['instance']['wuid']);return this[_0x72ad02(0x7a2)][_0x72ad02(0x7a9)](this[_0x72ad02(0x8ba)]+'\x20('+this[_0x72ad02(0x664)][_0x72ad02(0x60f)]+_0x72ad02(0x42a)),_0x5800b2?_0x5c6770:null;}catch(_0x1437a8){return this['logger'][_0x72ad02(0x2c2)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x72ad02(0x4d3)+(_0x1437a8 instanceof Error?_0x1437a8[_0x72ad02(0x923)]:JSON[_0x72ad02(0x5f3)](_0x1437a8,null,0x2))),_0x1437a8;}}async[a0_0x20331d(0x8fd)](_0x18ee6c,_0x345ede){const _0x38cddc=a0_0x20331d;let _0x252077=_0x18ee6c[_0x38cddc(0x3eb)];_0x345ede[_0x38cddc(0x700)]['remoteJid']&&_0x345ede[_0x38cddc(0x700)][_0x38cddc(0x3eb)][_0x38cddc(0x291)]()!==''&&(_0x252077=_0x345ede['uazapi'][_0x38cddc(0x3eb)]['trim']()),this['logger'][_0x38cddc(0x7a9)](this[_0x38cddc(0x8ba)]+'\x20('+this[_0x38cddc(0x664)][_0x38cddc(0x60f)]+'):\x20Enviando\x20texto');let _0x3bacb2={'number':_0x252077,'options':{'delay':_0x345ede[_0x38cddc(0x700)][_0x38cddc(0x7b3)],'linkPreview':_0x345ede['uazapi']['linkPreview']},'textMessage':{'text':_0x345ede[_0x38cddc(0x700)]['text']}};try{let _0x328d72=await this[_0x38cddc(0x807)](_0x3bacb2);if(_0x328d72){let _0x2a0c23={'_id':_0x328d72[_0x38cddc(0x2f3)]['id'],'_fromMe':_0x328d72['key']['fromMe'],'_remoteJid':_0x328d72['key']['remoteJid']},_0x36a614=(0x0,w[_0x38cddc(0x27f)])(_0x328d72[_0x38cddc(0x923)]),_0x27803b=(0x0,w[_0x38cddc(0x2a3)])(_0x36a614);_0x18ee6c['chatLog'][_0x38cddc(0x7b7)]=_0x345ede['_id'][_0x38cddc(0x27d)]();let {message_normalized:_0x41071e}=this[_0x38cddc(0x6ce)](_0x36a614,_0x27803b,null);_0x18ee6c[_0x38cddc(0x544)][_0x38cddc(0x60c)]=await _0x41071e;let _0x26e821={'messageId':_0x328d72[_0x38cddc(0x2f3)]['id']},_0xb8e7a8=_0x18ee6c['chatLog']['realVariables'];Object[_0x38cddc(0x2df)](_0xb8e7a8,_0x2a0c23),_0x18ee6c[_0x38cddc(0x544)][_0x38cddc(0x64e)]=_0xb8e7a8,this[_0x38cddc(0x87e)](_0x18ee6c,_0x345ede,_0x26e821);}else{let _0x51be9f={'error':!0x0};this[_0x38cddc(0x87e)](_0x18ee6c,_0x345ede,_0x51be9f),this[_0x38cddc(0x7a2)][_0x38cddc(0x2c2)](this[_0x38cddc(0x8ba)]+'\x20('+this[_0x38cddc(0x664)][_0x38cddc(0x60f)]+_0x38cddc(0x7e3));}}catch(_0x2dbcda){let _0x5e3241={'error':!0x0,'errorLog':_0x2dbcda[_0x38cddc(0x27d)]()};this['updateConversation'](_0x18ee6c,_0x345ede,_0x5e3241),this[_0x38cddc(0x7a2)][_0x38cddc(0x2c2)](this[_0x38cddc(0x8ba)]+'\x20('+this[_0x38cddc(0x664)]['wuid']+_0x38cddc(0x87c)+(_0x2dbcda instanceof Error?_0x2dbcda[_0x38cddc(0x923)]:JSON['stringify'](_0x2dbcda,null,0x2)));}}async['uazapiSendMedia'](_0x14b43d,_0x38d2e3){const _0x1ac155=a0_0x20331d;let _0x371f71=_0x14b43d['remoteJid'];_0x38d2e3[_0x1ac155(0x700)][_0x1ac155(0x3eb)]&&_0x38d2e3[_0x1ac155(0x700)]['remoteJid'][_0x1ac155(0x291)]()!==''&&(_0x371f71=_0x38d2e3[_0x1ac155(0x700)]['remoteJid'][_0x1ac155(0x291)]()),this[_0x1ac155(0x7a2)]['verbose'](this[_0x1ac155(0x8ba)]+'\x20('+this[_0x1ac155(0x664)][_0x1ac155(0x60f)]+_0x1ac155(0x7eb));let _0x4c2dbc={'number':_0x371f71,'options':{'delay':_0x38d2e3[_0x1ac155(0x700)]['delay'],'linkPreview':_0x38d2e3['uazapi'][_0x1ac155(0x73b)]},'mediaMessage':{'mediatype':_0x38d2e3[_0x1ac155(0x700)][_0x1ac155(0x57f)],'caption':_0x38d2e3[_0x1ac155(0x700)][_0x1ac155(0x312)],'media':_0x38d2e3[_0x1ac155(0x700)][_0x1ac155(0x4ad)],'fileName':_0x38d2e3[_0x1ac155(0x700)]['fileName']}};try{let _0x204d42=await this[_0x1ac155(0x682)](_0x4c2dbc);if(_0x204d42){let _0x448fbc={'_id':_0x204d42[_0x1ac155(0x2f3)]['id'],'_fromMe':_0x204d42[_0x1ac155(0x2f3)][_0x1ac155(0x288)],'_remoteJid':_0x204d42[_0x1ac155(0x2f3)][_0x1ac155(0x3eb)]},_0x292ca4=(0x0,w[_0x1ac155(0x27f)])(_0x204d42[_0x1ac155(0x923)]),_0x47df18=(0x0,w[_0x1ac155(0x2a3)])(_0x292ca4);_0x14b43d['chatLog'][_0x1ac155(0x7b7)]=_0x38d2e3['_id']['toString']();let {message_normalized:_0x117bc4}=this[_0x1ac155(0x6ce)](_0x292ca4,_0x47df18,null);_0x14b43d[_0x1ac155(0x544)][_0x1ac155(0x60c)]=await _0x117bc4;let _0x59f4d0={'messageId':_0x204d42[_0x1ac155(0x2f3)]['id']},_0x58ba6e=_0x14b43d[_0x1ac155(0x544)]['realVariables'];Object[_0x1ac155(0x2df)](_0x58ba6e,_0x448fbc),_0x14b43d[_0x1ac155(0x544)][_0x1ac155(0x64e)]=_0x58ba6e,this[_0x1ac155(0x87e)](_0x14b43d,_0x38d2e3,_0x59f4d0);}else{let _0x138631={'error':!0x0};this[_0x1ac155(0x87e)](_0x14b43d,_0x38d2e3,_0x138631),this[_0x1ac155(0x7a2)][_0x1ac155(0x2c2)](this[_0x1ac155(0x8ba)]+'\x20('+this[_0x1ac155(0x664)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.');}}catch(_0x522dd4){let _0x348bfa={'error':!0x0,'errorLog':_0x522dd4[_0x1ac155(0x27d)]()};this['updateConversation'](_0x14b43d,_0x38d2e3,_0x348bfa),this[_0x1ac155(0x7a2)]['error'](this[_0x1ac155(0x8ba)]+'\x20('+this[_0x1ac155(0x664)]['wuid']+_0x1ac155(0x8c7)+(_0x522dd4 instanceof Error?_0x522dd4[_0x1ac155(0x923)]:JSON['stringify'](_0x522dd4,null,0x2)));}}async[a0_0x20331d(0x7d5)](_0x4d0f1f,_0x3e5d09){const _0xd4af2d=a0_0x20331d;let _0x3ce400=_0x4d0f1f[_0xd4af2d(0x3eb)];_0x3e5d09[_0xd4af2d(0x700)]['remoteJid']&&_0x3e5d09[_0xd4af2d(0x700)][_0xd4af2d(0x3eb)][_0xd4af2d(0x291)]()!==''&&(_0x3ce400=_0x3e5d09[_0xd4af2d(0x700)][_0xd4af2d(0x3eb)]['trim']()),this['logger'][_0xd4af2d(0x7a9)](this[_0xd4af2d(0x8ba)]+'\x20('+this[_0xd4af2d(0x664)]['wuid']+_0xd4af2d(0x3b5));let _0x1746ea={'number':_0x3ce400,'options':{'delay':_0x3e5d09[_0xd4af2d(0x700)]['delay']},'locationMessage':{'name':_0x3e5d09[_0xd4af2d(0x700)][_0xd4af2d(0x8b9)],'address':_0x3e5d09[_0xd4af2d(0x700)][_0xd4af2d(0x574)],'latitude':_0x3e5d09['uazapi'][_0xd4af2d(0x213)],'longitude':_0x3e5d09[_0xd4af2d(0x700)]['longitude']}};try{let _0x17b682=await this[_0xd4af2d(0x6dd)](_0x1746ea);if(_0x17b682){let _0x1cb055={'_id':_0x17b682[_0xd4af2d(0x2f3)]['id'],'_fromMe':_0x17b682[_0xd4af2d(0x2f3)][_0xd4af2d(0x288)],'_remoteJid':_0x17b682[_0xd4af2d(0x2f3)][_0xd4af2d(0x3eb)]},_0x589dc3=(0x0,w[_0xd4af2d(0x27f)])(_0x17b682[_0xd4af2d(0x923)]),_0x5567f0=(0x0,w['getContentType'])(_0x589dc3);_0x4d0f1f[_0xd4af2d(0x544)][_0xd4af2d(0x7b7)]=_0x3e5d09[_0xd4af2d(0x53e)][_0xd4af2d(0x27d)]();let {message_normalized:_0x3c94af}=this['normalizeMessage'](_0x589dc3,_0x5567f0,null);_0x4d0f1f[_0xd4af2d(0x544)][_0xd4af2d(0x60c)]=await _0x3c94af;let _0x3bbbba={'messageId':_0x17b682[_0xd4af2d(0x2f3)]['id']},_0x20fcb3=_0x4d0f1f[_0xd4af2d(0x544)]['realVariables'];Object[_0xd4af2d(0x2df)](_0x20fcb3,_0x1cb055),_0x4d0f1f[_0xd4af2d(0x544)][_0xd4af2d(0x64e)]=_0x20fcb3,this['updateConversation'](_0x4d0f1f,_0x3e5d09,_0x3bbbba);}else{let _0x21d1be={'error':!0x0};this['updateConversation'](_0x4d0f1f,_0x3e5d09,_0x21d1be),this[_0xd4af2d(0x7a2)][_0xd4af2d(0x2c2)](this[_0xd4af2d(0x8ba)]+'\x20('+this[_0xd4af2d(0x664)][_0xd4af2d(0x60f)]+_0xd4af2d(0x90f));}}catch(_0x1d7b00){let _0x3e4ccf={'error':!0x0,'errorLog':_0x1d7b00[_0xd4af2d(0x27d)]()};this[_0xd4af2d(0x87e)](_0x4d0f1f,_0x3e5d09,_0x3e4ccf),this['logger'][_0xd4af2d(0x2c2)](this[_0xd4af2d(0x8ba)]+'\x20('+this[_0xd4af2d(0x664)][_0xd4af2d(0x60f)]+_0xd4af2d(0x356)+(_0x1d7b00 instanceof Error?_0x1d7b00[_0xd4af2d(0x923)]:JSON['stringify'](_0x1d7b00,null,0x2)));}}async['uazapiSendAudio'](_0x4e4b1c,_0xf41591){const _0x530a58=a0_0x20331d;let _0x200764=_0x4e4b1c[_0x530a58(0x3eb)];_0xf41591[_0x530a58(0x700)]['remoteJid']&&_0xf41591[_0x530a58(0x700)]['remoteJid']['trim']()!==''&&(_0x200764=_0xf41591[_0x530a58(0x700)][_0x530a58(0x3eb)][_0x530a58(0x291)]()),this[_0x530a58(0x7a2)][_0x530a58(0x7a9)](this[_0x530a58(0x8ba)]+'\x20('+this['instance'][_0x530a58(0x60f)]+'):\x20Enviando\x20áudio');let _0x3f5a25={'number':_0x200764,'options':{'delay':_0xf41591['uazapi'][_0x530a58(0x7b3)]},'audioMessage':{'audio':_0xf41591[_0x530a58(0x700)]['audio']}};try{let _0xe3a7a1=await this['audioWhatsapp'](_0x3f5a25);if(_0xe3a7a1){let _0x5e645d={'_id':_0xe3a7a1[_0x530a58(0x2f3)]['id'],'_fromMe':_0xe3a7a1[_0x530a58(0x2f3)][_0x530a58(0x288)],'_remoteJid':_0xe3a7a1[_0x530a58(0x2f3)][_0x530a58(0x3eb)]},_0x331c81=(0x0,w['normalizeMessageContent'])(_0xe3a7a1[_0x530a58(0x923)]),_0x9e0d13=(0x0,w[_0x530a58(0x2a3)])(_0x331c81);_0x4e4b1c[_0x530a58(0x544)]['lastBlockId']=_0xf41591['_id']['toString']();let {message_normalized:_0x4cb684}=this[_0x530a58(0x6ce)](_0x331c81,_0x9e0d13,null);_0x4e4b1c[_0x530a58(0x544)][_0x530a58(0x60c)]=await _0x4cb684;let _0x2cf734={'messageId':_0xe3a7a1[_0x530a58(0x2f3)]['id']},_0x3984c3=_0x4e4b1c[_0x530a58(0x544)][_0x530a58(0x64e)];Object[_0x530a58(0x2df)](_0x3984c3,_0x5e645d),_0x4e4b1c[_0x530a58(0x544)]['realVariables']=_0x3984c3,this['updateConversation'](_0x4e4b1c,_0xf41591,_0x2cf734);}else{let _0x210595={'error':!0x0};this['updateConversation'](_0x4e4b1c,_0xf41591,_0x210595),this['logger'][_0x530a58(0x2c2)](this['instanceName']+'\x20('+this[_0x530a58(0x664)][_0x530a58(0x60f)]+_0x530a58(0x5f9));}}catch(_0x3d4abf){let _0x43d3e5={'error':!0x0,'errorLog':_0x3d4abf[_0x530a58(0x27d)]()};this[_0x530a58(0x87e)](_0x4e4b1c,_0xf41591,_0x43d3e5),this[_0x530a58(0x7a2)][_0x530a58(0x2c2)](this[_0x530a58(0x8ba)]+'\x20('+this[_0x530a58(0x664)][_0x530a58(0x60f)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20'+(_0x3d4abf instanceof Error?_0x3d4abf[_0x530a58(0x923)]:JSON[_0x530a58(0x5f3)](_0x3d4abf,null,0x2)));}}async[a0_0x20331d(0x7de)](_0x3e04eb,_0x3f7555){const _0x6afc9a=a0_0x20331d;let _0x3bcd82=_0x3e04eb[_0x6afc9a(0x3eb)];_0x3f7555[_0x6afc9a(0x700)][_0x6afc9a(0x3eb)]&&_0x3f7555[_0x6afc9a(0x700)]['remoteJid'][_0x6afc9a(0x291)]()!==''&&(_0x3bcd82=_0x3f7555[_0x6afc9a(0x700)]['remoteJid'][_0x6afc9a(0x291)]()),this[_0x6afc9a(0x7a2)][_0x6afc9a(0x7a9)](this[_0x6afc9a(0x8ba)]+'\x20('+this[_0x6afc9a(0x664)]['wuid']+'):\x20Enviando\x20contato');let _0x38794c={'number':_0x3bcd82,'options':{'delay':_0x3f7555[_0x6afc9a(0x700)]['delay']},'contactMessage':[{'fullName':_0x3f7555[_0x6afc9a(0x700)][_0x6afc9a(0x3ec)],'phoneNumber':_0x3f7555[_0x6afc9a(0x700)][_0x6afc9a(0x623)]}]};try{let _0x3a1caa=await this[_0x6afc9a(0x821)](_0x38794c);if(_0x3a1caa){let _0x26e400={'_id':_0x3a1caa[_0x6afc9a(0x2f3)]['id'],'_fromMe':_0x3a1caa[_0x6afc9a(0x2f3)][_0x6afc9a(0x288)],'_remoteJid':_0x3a1caa['key']['remoteJid']},_0x122dc8=(0x0,w[_0x6afc9a(0x27f)])(_0x3a1caa[_0x6afc9a(0x923)]),_0xe318ab=(0x0,w[_0x6afc9a(0x2a3)])(_0x122dc8);_0x3e04eb[_0x6afc9a(0x544)][_0x6afc9a(0x7b7)]=_0x3f7555[_0x6afc9a(0x53e)][_0x6afc9a(0x27d)]();let {message_normalized:_0x16fb18}=this[_0x6afc9a(0x6ce)](_0x122dc8,_0xe318ab,null);_0x3e04eb['chatLog'][_0x6afc9a(0x60c)]=await _0x16fb18;let _0x239941={'messageId':_0x3a1caa[_0x6afc9a(0x2f3)]['id']},_0x35c841=_0x3e04eb[_0x6afc9a(0x544)][_0x6afc9a(0x64e)];Object['assign'](_0x35c841,_0x26e400),_0x3e04eb['chatLog']['realVariables']=_0x35c841,this['updateConversation'](_0x3e04eb,_0x3f7555,_0x239941);}else{let _0x4ca503={'error':!0x0};this[_0x6afc9a(0x87e)](_0x3e04eb,_0x3f7555,_0x4ca503),this['logger'][_0x6afc9a(0x2c2)](this['instanceName']+'\x20('+this['instance'][_0x6afc9a(0x60f)]+_0x6afc9a(0x33f));}}catch(_0x21b25e){let _0x1fc797={'error':!0x0,'errorLog':_0x21b25e[_0x6afc9a(0x27d)]()};this[_0x6afc9a(0x87e)](_0x3e04eb,_0x3f7555,_0x1fc797),this[_0x6afc9a(0x7a2)]['error'](this[_0x6afc9a(0x8ba)]+'\x20('+this[_0x6afc9a(0x664)][_0x6afc9a(0x60f)]+_0x6afc9a(0x645)+(_0x21b25e instanceof Error?_0x21b25e[_0x6afc9a(0x923)]:JSON[_0x6afc9a(0x5f3)](_0x21b25e,null,0x2)));}}[a0_0x20331d(0x238)](_0x22c417,_0x3351b8){const _0x5cb33e=a0_0x20331d;for(let _0x43d990 of _0x22c417)_0x43d990['option']&&(_0x43d990['option']=this[_0x5cb33e(0x593)](_0x43d990['option'],_0x3351b8)),_0x43d990['optionDescription']&&(_0x43d990[_0x5cb33e(0x2ba)]=this['replaceVariables'](_0x43d990[_0x5cb33e(0x2ba)],_0x3351b8));}async[a0_0x20331d(0x7ac)](_0x2624c0,_0x1d6ba5){const _0x43a34a=a0_0x20331d;let _0x477002=_0x2624c0['remoteJid'];_0x1d6ba5[_0x43a34a(0x700)][_0x43a34a(0x3eb)]&&_0x1d6ba5[_0x43a34a(0x700)][_0x43a34a(0x3eb)][_0x43a34a(0x291)]()!==''&&(_0x477002=_0x1d6ba5['uazapi'][_0x43a34a(0x3eb)][_0x43a34a(0x291)]()),this['logger'][_0x43a34a(0x7a9)](this[_0x43a34a(0x8ba)]+'\x20('+this[_0x43a34a(0x664)][_0x43a34a(0x60f)]+_0x43a34a(0x84b));let _0x341d6e=_0x2624c0[_0x43a34a(0x35d)][_0x43a34a(0x625)](_0x4510e7=>_0x4510e7[_0x43a34a(0x29e)]===_0x1d6ba5[_0x43a34a(0x53e)])[_0x43a34a(0x4b4)]((_0x505418,_0x2cc4e3)=>_0x505418[_0x43a34a(0x1e4)]-_0x2cc4e3[_0x43a34a(0x1e4)]);this[_0x43a34a(0x238)](_0x341d6e,_0x2624c0[_0x43a34a(0x544)][_0x43a34a(0x64e)]);let _0x17db24=_0x341d6e[_0x43a34a(0x41b)](_0x2dc13a=>_0x2dc13a[_0x43a34a(0x69c)]),_0xc057f={'number':_0x477002,'menuMessage':{'type':_0x1d6ba5[_0x43a34a(0x700)][_0x43a34a(0x4b8)]||'poll','text':_0x1d6ba5[_0x43a34a(0x700)][_0x43a34a(0x4e1)]||_0x1d6ba5[_0x43a34a(0x700)][_0x43a34a(0x8b9)],'footerText':_0x1d6ba5[_0x43a34a(0x700)]['footerText'],'buttonText':_0x1d6ba5[_0x43a34a(0x700)][_0x43a34a(0x357)],'selectableCount':0x1,'choices':_0x17db24},'options':{'delay':_0x1d6ba5[_0x43a34a(0x700)][_0x43a34a(0x7b3)]}};try{let _0x26df90=await this[_0x43a34a(0x817)](_0xc057f);if(_0x26df90){let _0x5d366a={'_id':_0x26df90[_0x43a34a(0x2f3)]['id'],'_fromMe':_0x26df90[_0x43a34a(0x2f3)][_0x43a34a(0x288)],'_remoteJid':_0x26df90[_0x43a34a(0x2f3)][_0x43a34a(0x3eb)]};_0x1d6ba5[_0x43a34a(0x700)]['menuIgnoreNonVotes']===!0x0&&(_0x2624c0[_0x43a34a(0x8aa)]=_0x43a34a(0x239),this[_0x43a34a(0x7a2)]['verbose'](this[_0x43a34a(0x8ba)]+'\x20('+this['instance']['wuid']+_0x43a34a(0x686)+_0x2624c0[_0x43a34a(0x8aa)])),this['logger'][_0x43a34a(0x7a9)](this[_0x43a34a(0x8ba)]+'\x20('+this[_0x43a34a(0x664)][_0x43a34a(0x60f)]+_0x43a34a(0x542)+(_0x1d6ba5[_0x43a34a(0x700)][_0x43a34a(0x8b9)]||_0x1d6ba5['uazapi'][_0x43a34a(0x4e1)])),_0x2624c0[_0x43a34a(0x471)]=_0x26df90[_0x43a34a(0x2f3)]['id'],_0x2624c0[_0x43a34a(0x223)]=_0x1d6ba5[_0x43a34a(0x700)][_0x43a34a(0x8b9)]||_0x1d6ba5[_0x43a34a(0x700)][_0x43a34a(0x4e1)],_0x2624c0[_0x43a34a(0x43d)]=_0x341d6e,_0x1d6ba5[_0x43a34a(0x700)][_0x43a34a(0x56f)]&&(_0x2624c0['waitingMenu_ExpiredMessage']=_0x1d6ba5[_0x43a34a(0x700)]['menuExpiredMessage']),this[_0x43a34a(0x7a2)][_0x43a34a(0x7a9)](this[_0x43a34a(0x8ba)]+'\x20('+this[_0x43a34a(0x664)][_0x43a34a(0x60f)]+'):\x20conversation.waitingMenu_name'+_0x2624c0[_0x43a34a(0x223)]);let _0x240974=(0x0,w[_0x43a34a(0x27f)])(_0x26df90[_0x43a34a(0x923)]),_0x386f4d=(0x0,w[_0x43a34a(0x2a3)])(_0x240974);_0x2624c0[_0x43a34a(0x544)][_0x43a34a(0x7b7)]=_0x1d6ba5['_id'][_0x43a34a(0x27d)]();let {message_normalized:_0x2572f6}=this[_0x43a34a(0x6ce)](_0x240974,_0x386f4d,null);_0x2624c0['chatLog']['lastSendMessage']=await _0x2572f6;let _0x33ddea={'messageId':_0x26df90['key']['id']},_0x2e1f67=_0x2624c0[_0x43a34a(0x544)][_0x43a34a(0x64e)];Object[_0x43a34a(0x2df)](_0x2e1f67,_0x5d366a),_0x2624c0[_0x43a34a(0x544)][_0x43a34a(0x64e)]=_0x2e1f67,this[_0x43a34a(0x87e)](_0x2624c0,_0x1d6ba5,_0x33ddea);}else{let _0x551f1a={'error':!0x0};this[_0x43a34a(0x87e)](_0x2624c0,_0x1d6ba5,_0x551f1a),this[_0x43a34a(0x7a2)][_0x43a34a(0x2c2)](this[_0x43a34a(0x8ba)]+'\x20('+this['instance'][_0x43a34a(0x60f)]+_0x43a34a(0x410));}}catch(_0x3fb01d){let _0x1a4a81={'error':!0x0,'errorLog':_0x3fb01d instanceof Error?_0x3fb01d[_0x43a34a(0x923)]:JSON['stringify'](_0x3fb01d,null,0x2)};this[_0x43a34a(0x87e)](_0x2624c0,_0x1d6ba5,_0x1a4a81),this[_0x43a34a(0x7a2)][_0x43a34a(0x2c2)](this[_0x43a34a(0x8ba)]+'\x20('+this[_0x43a34a(0x664)][_0x43a34a(0x60f)]+_0x43a34a(0x2e8)+(_0x3fb01d instanceof Error?_0x3fb01d[_0x43a34a(0x923)]:JSON[_0x43a34a(0x5f3)](_0x3fb01d,null,0x2)));}}async[a0_0x20331d(0x819)](_0x514b40,_0x27037f){const _0xbcddd9=a0_0x20331d;this[_0xbcddd9(0x7a2)][_0xbcddd9(0x7a9)](this['instanceName']+'\x20('+this[_0xbcddd9(0x664)]['wuid']+'):\x20Deletando\x20mensagem');let _0x13738f=_0x514b40[_0xbcddd9(0x544)][_0xbcddd9(0x8e3)][_0xbcddd9(0x691)](_0x352d0d=>_0x352d0d['blockId'][_0xbcddd9(0x27d)]()===_0x27037f[_0xbcddd9(0x700)][_0xbcddd9(0x29e)][_0xbcddd9(0x27d)]()),_0x32f243={'id':_0x13738f[_0xbcddd9(0x92a)],'remoteJid':_0x13738f['remoteJid'],'fromMe':_0x13738f[_0xbcddd9(0x288)]};try{let _0x417123=await this[_0xbcddd9(0x509)](_0x32f243);if(_0x417123){let _0x455f2a=(0x0,w['normalizeMessageContent'])(_0x417123[_0xbcddd9(0x923)]),_0x3fe3c1=(0x0,w['getContentType'])(_0x455f2a);_0x514b40[_0xbcddd9(0x544)][_0xbcddd9(0x7b7)]=_0x27037f[_0xbcddd9(0x53e)][_0xbcddd9(0x27d)]();let {message_normalized:_0x246248}=this[_0xbcddd9(0x6ce)](_0x455f2a,_0x3fe3c1,null);_0x514b40['chatLog'][_0xbcddd9(0x60c)]=await _0x246248;let _0x58e504={};this[_0xbcddd9(0x87e)](_0x514b40,_0x27037f,_0x58e504);}else{let _0x1e2631={'error':!0x0};this[_0xbcddd9(0x87e)](_0x514b40,_0x27037f,_0x1e2631),this[_0xbcddd9(0x7a2)][_0xbcddd9(0x2c2)](this[_0xbcddd9(0x8ba)]+'\x20('+this[_0xbcddd9(0x664)]['wuid']+'):\x20Falha\x20ao\x20deletar\x20mensagem.');}}catch(_0x1d9f2b){let _0x173993={'error':!0x0,'errorLog':_0x1d9f2b instanceof Error?_0x1d9f2b[_0xbcddd9(0x923)]:JSON[_0xbcddd9(0x5f3)](_0x1d9f2b,null,0x2)};this[_0xbcddd9(0x87e)](_0x514b40,_0x27037f,_0x173993),this['logger'][_0xbcddd9(0x2c2)](this[_0xbcddd9(0x8ba)]+'\x20('+this[_0xbcddd9(0x664)]['wuid']+_0xbcddd9(0x34b)+(_0x1d9f2b instanceof Error?_0x1d9f2b[_0xbcddd9(0x923)]:JSON['stringify'](_0x1d9f2b,null,0x2)));}}async['createFlow'](_0x23bea9,_0xfe656d){const _0x1ea965=a0_0x20331d;if(_0x23bea9[_0x1ea965(0x8b9)]||(_0x23bea9[_0x1ea965(0x8b9)]=(0x0,X['v4'])()),_0xfe656d!==Oi&&_0x23bea9?.[_0x1ea965(0x77b)])throw new m('Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global');if('_id'in _0x23bea9&&_0x1ea965(0x63b)in _0x23bea9)return this[_0x1ea965(0x613)](_0x23bea9[_0x1ea965(0x63b)],_0x23bea9[_0x1ea965(0x53e)]);this[_0x1ea965(0x7a2)][_0x1ea965(0x7a9)](this[_0x1ea965(0x8ba)]+'\x20('+this[_0x1ea965(0x664)][_0x1ea965(0x60f)]+_0x1ea965(0x5a9));let _0x1d103a=this[_0x1ea965(0x4c8)](_0x23bea9['name']),_0x62b52e=new fe[(_0x1ea965(0x83f))]['ObjectId'](),_0x4b4214={'_id':_0x62b52e,'default':!0x0,'title':_0x1ea965(0x49e),'x':0x0,'y':0x0},_0x47e9a0={'_id':new fe['Types']['ObjectId'](),'order':0x1,'groupId':_0x62b52e['toString'](),'type':_0x1ea965(0x48a)},_0x395592=this['instance']['wuid'],_0xaf4da2={'_id':(0x0,X['v4'])(),'owner':_0x395592,'name':_0x1d103a,'whoCanEdit':[_0x395592],'whoCanUse':[_0x395592],'groups':[_0x4b4214],'blocks':[_0x47e9a0],..._0x23bea9};try{let _0x376b0d=await this['repository'][_0x1ea965(0x29c)][_0x1ea965(0x314)](_0xaf4da2);return await this[_0x1ea965(0x2f9)](),_0x376b0d;}catch(_0x31d834){let _0x4aa2de='Erro\x20ao\x20criar\x20fluxo',_0x2419d3=_0x31d834 instanceof Error?_0x31d834[_0x1ea965(0x923)]:typeof _0x31d834==_0x1ea965(0x4bd)?JSON[_0x1ea965(0x5f3)](_0x31d834):_0x31d834,_0x190243=_0x4aa2de+':\x20'+_0x2419d3;throw this[_0x1ea965(0x7a2)][_0x1ea965(0x2c2)](this[_0x1ea965(0x8ba)]+'\x20('+this[_0x1ea965(0x664)][_0x1ea965(0x60f)]+_0x1ea965(0x51c)+_0x190243),new m(_0x190243);}}async[a0_0x20331d(0x613)](_0x41c36c,_0x1ee81f){const _0x4eb238=a0_0x20331d;try{this[_0x4eb238(0x7a2)][_0x4eb238(0x7a9)](this[_0x4eb238(0x8ba)]+'\x20('+this[_0x4eb238(0x664)][_0x4eb238(0x60f)]+_0x4eb238(0x7ed));let _0xe3a060=await this[_0x4eb238(0x402)]['flow'][_0x4eb238(0x63f)]({'where':{'_id':_0x1ee81f,'owner':_0x41c36c}});if(!_0xe3a060)throw new m(_0x4eb238(0x5d3));if(_0xe3a060[_0x4eb238(0x575)]===!0x1&&!_0xe3a060['globalShow'])throw new m('Esse\x20fluxo\x20não\x20permite\x20importação.');let _0x136599=new Set(_0xe3a060['whoCanUse']??[]);_0x136599[_0x4eb238(0x783)](this[_0x4eb238(0x664)][_0x4eb238(0x60f)]);let _0x3e6d3b=await this[_0x4eb238(0x402)][_0x4eb238(0x29c)][_0x4eb238(0x2d5)](_0x1ee81f,{..._0xe3a060,'whoCanUse':Array[_0x4eb238(0x654)](_0x136599)});return await this[_0x4eb238(0x2f9)](),_0x3e6d3b;}catch(_0x16789d){let _0x48549f=_0x4eb238(0x6b5),_0x3bdf04=_0x16789d instanceof Error?_0x16789d[_0x4eb238(0x923)]:typeof _0x16789d=='object'?JSON[_0x4eb238(0x5f3)](_0x16789d):_0x16789d,_0x3d12d9=_0x48549f+':\x20'+_0x3bdf04;throw this['logger'][_0x4eb238(0x2c2)](this['instanceName']+'\x20('+this[_0x4eb238(0x664)]['wuid']+_0x4eb238(0x51c)+_0x3d12d9),new m(_0x3d12d9);}}[a0_0x20331d(0x4c8)](_0x4efd4b){const _0x4568ab=a0_0x20331d;let _0x3de8e7=_0x4efd4b,_0x3c9ef7=0x1;for(;this[_0x4568ab(0x246)][_0x4568ab(0x550)][_0x4568ab(0x270)](_0x3e0ed2=>_0x3e0ed2['name']===_0x3de8e7);)_0x3c9ef7++,_0x3de8e7=_0x4efd4b+'\x20('+_0x3c9ef7+')';return _0x3de8e7;}async[a0_0x20331d(0x250)](_0x58d092){const _0x48cdf2=a0_0x20331d;try{if(this[_0x48cdf2(0x7a2)]['verbose'](this[_0x48cdf2(0x8ba)]+'\x20('+this[_0x48cdf2(0x664)][_0x48cdf2(0x60f)]+_0x48cdf2(0x538)+_0x58d092[_0x48cdf2(0x53e)]+_0x48cdf2(0x7c7)+_0x58d092[_0x48cdf2(0x30f)]),!this[_0x48cdf2(0x246)][_0x48cdf2(0x550)]['find'](_0x28b1f5=>_0x28b1f5[_0x48cdf2(0x53e)]===_0x58d092['_id']))throw this[_0x48cdf2(0x7a2)][_0x48cdf2(0x7a9)](this['instanceName']+'\x20('+this[_0x48cdf2(0x664)][_0x48cdf2(0x60f)]+_0x48cdf2(0x3c0)+_0x58d092[_0x48cdf2(0x53e)]+_0x48cdf2(0x3e7)),new m(_0x48cdf2(0x341));let _0x269648=await this['repository'][_0x48cdf2(0x29c)]['findOne']({'where':{'_id':_0x58d092[_0x48cdf2(0x53e)]}});if(!_0x269648)throw new m(_0x48cdf2(0x3f3));if(this[_0x48cdf2(0x664)]['wuid']===_0x269648[_0x48cdf2(0x63b)]){this[_0x48cdf2(0x7a2)]['verbose'](this[_0x48cdf2(0x8ba)]+'\x20('+this[_0x48cdf2(0x664)]['wuid']+_0x48cdf2(0x47f)+_0x58d092[_0x48cdf2(0x53e)]+_0x48cdf2(0x50e));let _0x2505f6=await this[_0x48cdf2(0x402)][_0x48cdf2(0x29c)]['deleteOne']({'where':{'_id':_0x58d092[_0x48cdf2(0x53e)]}});return await this[_0x48cdf2(0x2f9)](),_0x2505f6;}return this[_0x48cdf2(0x7a2)][_0x48cdf2(0x7a9)](this[_0x48cdf2(0x8ba)]+'\x20('+this[_0x48cdf2(0x664)][_0x48cdf2(0x60f)]+_0x48cdf2(0x756)+this['instance'][_0x48cdf2(0x60f)]+_0x48cdf2(0x626)+_0x58d092['_id']+_0x48cdf2(0x580)),_0x269648['whoCanUse']=(_0x269648[_0x48cdf2(0x733)]??[])[_0x48cdf2(0x625)](_0x2a7244=>_0x2a7244!==this['instance'][_0x48cdf2(0x60f)]),_0x269648[_0x48cdf2(0x215)]=(_0x269648[_0x48cdf2(0x215)]??[])[_0x48cdf2(0x625)](_0x59818d=>_0x59818d!==this['instance'][_0x48cdf2(0x60f)]),_0x269648[_0x48cdf2(0x215)][_0x48cdf2(0x786)]===0x0&&_0x269648[_0x48cdf2(0x733)][_0x48cdf2(0x786)]>0x0&&(_0x269648[_0x48cdf2(0x215)][_0x48cdf2(0x4e8)](_0x269648[_0x48cdf2(0x733)][0x0]),this[_0x48cdf2(0x7a2)][_0x48cdf2(0x7a9)](this[_0x48cdf2(0x8ba)]+'\x20('+this[_0x48cdf2(0x664)][_0x48cdf2(0x60f)]+'):\x20Adicionando\x20\x27'+_0x269648[_0x48cdf2(0x733)][0x0]+_0x48cdf2(0x452)+_0x58d092['_id']+_0x48cdf2(0x580))),await this[_0x48cdf2(0x402)][_0x48cdf2(0x29c)][_0x48cdf2(0x2d5)](_0x269648[_0x48cdf2(0x53e)],_0x269648),await this['synchronizeAndMapFlows'](),{'message':_0x48cdf2(0x78f)+_0x58d092[_0x48cdf2(0x8b9)]+_0x48cdf2(0x7aa)};}catch(_0x3737e4){return this[_0x48cdf2(0x7a2)][_0x48cdf2(0x2c2)](this[_0x48cdf2(0x8ba)]+'\x20('+this[_0x48cdf2(0x664)]['wuid']+_0x48cdf2(0x483)+(_0x3737e4 instanceof Error?_0x3737e4[_0x48cdf2(0x923)]:JSON[_0x48cdf2(0x5f3)](_0x3737e4,null,0x2))),{'message':_0x48cdf2(0x2b7)+(_0x3737e4 instanceof Error?_0x3737e4[_0x48cdf2(0x923)]:JSON[_0x48cdf2(0x5f3)](_0x3737e4,null,0x2))};}}async[a0_0x20331d(0x585)](_0x5cd0b1){const _0x4deab1=a0_0x20331d;try{if(this[_0x4deab1(0x7a2)][_0x4deab1(0x7f7)](this[_0x4deab1(0x8ba)]+'\x20('+this[_0x4deab1(0x664)][_0x4deab1(0x60f)]+'):\x20Buscando\x20flow,\x20id:\x20'+_0x5cd0b1),!this[_0x4deab1(0x246)]&&(await this[_0x4deab1(0x3df)](),!this[_0x4deab1(0x246)]))return null;let _0x596b16=await this[_0x4deab1(0x402)]['flow'][_0x4deab1(0x63f)]({'where':{'_id':_0x5cd0b1}});if(!_0x596b16)throw new m(_0x4deab1(0x225)+_0x5cd0b1+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.');if(!(_0x596b16[_0x4deab1(0x77b)]||_0x596b16[_0x4deab1(0x733)]?.[_0x4deab1(0x8eb)](this[_0x4deab1(0x664)][_0x4deab1(0x60f)])))throw new m(_0x4deab1(0x7e6)+name+'\x27');_0x596b16[_0x4deab1(0x77b)]&&!_0x596b16[_0x4deab1(0x733)]?.[_0x4deab1(0x8eb)](this[_0x4deab1(0x664)]['wuid'])&&(_0x596b16[_0x4deab1(0x733)]=[..._0x596b16[_0x4deab1(0x733)]??[],this[_0x4deab1(0x664)][_0x4deab1(0x60f)]],await this[_0x4deab1(0x402)]['flow'][_0x4deab1(0x2d5)](_0x596b16[_0x4deab1(0x53e)],_0x596b16),this[_0x4deab1(0x2f9)]());let _0x3df50a=this[_0x4deab1(0x246)]?.[_0x4deab1(0x6fb)][_0x4deab1(0x41b)](_0x2cda0c=>_0x2cda0c[_0x4deab1(0x8b9)]),_0x33fbdf=[_0x4deab1(0x798),_0x4deab1(0x928),'email',_0x4deab1(0x506),_0x4deab1(0x8aa),'notas',_0x4deab1(0x6d3),_0x4deab1(0x931),_0x4deab1(0x820),'telefone',_0x4deab1(0x48b)];_0x596b16[_0x4deab1(0x5e3)]=_0x596b16[_0x4deab1(0x5e3)]['filter'](_0x4a947e=>!(_0x4a947e[_0x4deab1(0x228)]===_0x4deab1(0x766)||_0x4a947e[_0x4deab1(0x766)])),_0x33fbdf['forEach'](_0x3cc7ed=>{const _0x418a64=_0x4deab1;_0x596b16[_0x418a64(0x5e3)]['push']({'folder':'leadInfo','name':_0x3cc7ed,'value':'','doc':'','leadInfo':!0x0});}),_0x3df50a['forEach'](_0x4ef9a5=>{const _0xdc1ad=_0x4deab1;let _0x5813c5=_0x596b16['variables'][_0xdc1ad(0x63e)](_0x3471b2=>_0x3471b2[_0xdc1ad(0x8b9)]===_0x4ef9a5);_0x5813c5===-0x1?_0x596b16[_0xdc1ad(0x5e3)][_0xdc1ad(0x4e8)]({'folder':_0xdc1ad(0x766),'name':_0x4ef9a5,'value':'','doc':'','leadInfo':!0x0}):(_0x596b16[_0xdc1ad(0x5e3)][_0x5813c5][_0xdc1ad(0x228)]=_0xdc1ad(0x766),_0x596b16[_0xdc1ad(0x5e3)][_0x5813c5][_0xdc1ad(0x766)]=!0x0);}),_0x596b16[_0x4deab1(0x210)]&&_0x596b16[_0x4deab1(0x210)][_0x4deab1(0x786)]>0x0&&_0x596b16[_0x4deab1(0x210)][_0x4deab1(0x22b)](_0x35d18d=>{const _0x253440=_0x4deab1;_0x35d18d['groupId']&&_0x35d18d[_0x253440(0x46d)]&&_0x35d18d['groupId']===_0x35d18d[_0x253440(0x46d)]&&(_0x35d18d[_0x253440(0x46d)]=null);});let _0x567a58=await this[_0x4deab1(0x402)][_0x4deab1(0x29c)]['updateOne'](_0x596b16['_id'],_0x596b16);if(!_0x567a58)throw new Error(_0x4deab1(0x695));return _0x567a58;}catch(_0x420df0){let _0x1de6de=_0x4deab1(0x8ab),_0x4b1695=_0x420df0 instanceof Error?_0x420df0[_0x4deab1(0x923)]:typeof _0x420df0==_0x4deab1(0x4bd)?JSON[_0x4deab1(0x5f3)](_0x420df0):_0x420df0,_0x13172f=_0x1de6de+':\x20'+_0x4b1695;throw this[_0x4deab1(0x7a2)][_0x4deab1(0x2c2)](this[_0x4deab1(0x8ba)]+'\x20('+this[_0x4deab1(0x664)][_0x4deab1(0x60f)]+'):\x20'+_0x13172f),new m(_0x13172f);}}async[a0_0x20331d(0x2e6)](){const _0x269b29=a0_0x20331d;try{this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x269b29(0x664)][_0x269b29(0x60f)]+_0x269b29(0x532)),await this['synchronizeAndMapFlows']();let _0x156977=await this[_0x269b29(0x402)][_0x269b29(0x29c)]['findAll']({'where':{'globalShow':!0x0}});return[...this[_0x269b29(0x246)][_0x269b29(0x550)],..._0x156977];}catch(_0x590b35){return this[_0x269b29(0x7a2)]['error'](this[_0x269b29(0x8ba)]+'\x20('+this['instance'][_0x269b29(0x60f)]+'):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20'+(_0x590b35 instanceof Error?_0x590b35[_0x269b29(0x923)]:JSON[_0x269b29(0x5f3)](_0x590b35,null,0x2))),{'message':_0x269b29(0x596)+(_0x590b35 instanceof Error?_0x590b35[_0x269b29(0x923)]:String(_0x590b35))};}}async[a0_0x20331d(0x84e)](_0x5059de,_0x146c91){const _0x4148cd=a0_0x20331d;try{this[_0x4148cd(0x7a2)][_0x4148cd(0x7a9)](this[_0x4148cd(0x8ba)]+'\x20('+this['instance'][_0x4148cd(0x60f)]+'):\x20Alterando\x20fluxo...');let _0x1a2279=this[_0x4148cd(0x246)]['flows'][_0x4148cd(0x691)](_0x43a8be=>_0x43a8be[_0x4148cd(0x53e)]===_0x5059de[_0x4148cd(0x53e)]);if(!_0x1a2279)throw this[_0x4148cd(0x7a2)]['verbose'](this[_0x4148cd(0x8ba)]+'\x20('+this[_0x4148cd(0x664)][_0x4148cd(0x60f)]+_0x4148cd(0x3c0)+_0x5059de[_0x4148cd(0x53e)]+'\x27\x20não\x20encontrado'),new m(_0x4148cd(0x341));let _0x2e5d7f=await this['repository'][_0x4148cd(0x29c)][_0x4148cd(0x63f)]({'where':{'_id':_0x5059de['_id']}});if(!_0x2e5d7f||!_0x2e5d7f[_0x4148cd(0x733)]?.[_0x4148cd(0x8eb)](this['instance'][_0x4148cd(0x60f)]))throw this[_0x4148cd(0x7a2)][_0x4148cd(0x2c2)](this[_0x4148cd(0x8ba)]+'\x20('+this[_0x4148cd(0x664)][_0x4148cd(0x60f)]+_0x4148cd(0x332)+_0x5059de[_0x4148cd(0x53e)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x4148cd(0x724)+_0x5059de['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x2adb44=this[_0x4148cd(0x246)][_0x4148cd(0x550)][_0x4148cd(0x63e)](_0x3855a9=>_0x3855a9[_0x4148cd(0x53e)]===_0x1a2279[_0x4148cd(0x53e)]);if(_0x2adb44!==-0x1){let _0x2e9caf=this['AutomateSystem'][_0x4148cd(0x550)][_0x2adb44];if(_0x2e9caf[_0x4148cd(0x8b9)]=_0x5059de[_0x4148cd(0x8b9)]??_0x2e9caf['name'],_0x2e9caf[_0x4148cd(0x42b)]=_0x5059de[_0x4148cd(0x42b)]??_0x2e9caf[_0x4148cd(0x42b)],_0x2e9caf[_0x4148cd(0x232)]=_0x5059de[_0x4148cd(0x232)]??_0x2e9caf[_0x4148cd(0x232)],_0x2e9caf[_0x4148cd(0x769)]=_0x5059de[_0x4148cd(0x26e)]??_0x2e9caf[_0x4148cd(0x769)],_0x2e9caf[_0x4148cd(0x3fc)]=_0x5059de['minutesToClose']??_0x2e9caf[_0x4148cd(0x3fc)],_0x2e9caf['readMessages']=_0x5059de['readMessages']??_0x2e9caf[_0x4148cd(0x5b5)],_0x5059de[_0x4148cd(0x42b)]&&this[_0x4148cd(0x246)][_0x4148cd(0x550)][_0x4148cd(0x22b)]((_0x43f64f,_0x392552)=>{const _0x517ea9=_0x4148cd;_0x392552!==_0x2adb44&&(_0x43f64f[_0x517ea9(0x42b)]=!0x1);}),this[_0x4148cd(0x246)][_0x4148cd(0x550)][_0x2adb44]=_0x2e9caf,!await this['repository'][_0x4148cd(0x91d)][_0x4148cd(0x3fd)]({'flows':this['AutomateSystem'][_0x4148cd(0x550)]},this[_0x4148cd(0x664)]['wuid']))throw new m('Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.');}let _0x36e88e=[_0x4148cd(0x30f),'startID',_0x4148cd(0x69e),_0x4148cd(0x224)];for(let _0x3c4779 of _0x36e88e)delete _0x5059de[_0x3c4779];if(_0x2e5d7f['whoCanEdit']?.[_0x4148cd(0x8eb)](this[_0x4148cd(0x664)][_0x4148cd(0x60f)])||(_0x5059de={'_id':_0x5059de[_0x4148cd(0x53e)]}),_0x146c91!==Oi&&_0x5059de?.[_0x4148cd(0x77b)]&&!_0x2e5d7f?.[_0x4148cd(0x77b)])throw new m(_0x4148cd(0x80e));let _0x1b2440=new Set(_0x5059de[_0x4148cd(0x215)]??_0x2e5d7f[_0x4148cd(0x215)]);_0x1b2440[_0x4148cd(0x783)](_0x2e5d7f[_0x4148cd(0x63b)]);let _0x415b8c=new Set(_0x5059de[_0x4148cd(0x733)]??_0x2e5d7f[_0x4148cd(0x733)]??[]);_0x1b2440['forEach'](_0x3d65b6=>_0x415b8c[_0x4148cd(0x783)](_0x3d65b6)),_0x415b8c['add'](_0x2e5d7f[_0x4148cd(0x63b)]),this[_0x4148cd(0x7a2)]['verbose'](this[_0x4148cd(0x8ba)]+'\x20('+this[_0x4148cd(0x664)][_0x4148cd(0x60f)]+_0x4148cd(0x7f2)+Array['from'](_0x1b2440)),this[_0x4148cd(0x7a2)][_0x4148cd(0x7a9)](this[_0x4148cd(0x8ba)]+'\x20('+this['instance'][_0x4148cd(0x60f)]+_0x4148cd(0x782)+Array[_0x4148cd(0x654)](_0x415b8c));let _0x2eb34a=await this[_0x4148cd(0x480)](Array[_0x4148cd(0x654)](_0x415b8c)),_0x1a3e7d=Array[_0x4148cd(0x654)](_0x1b2440)[_0x4148cd(0x625)](_0x232c5f=>_0x2eb34a['includes'](_0x232c5f)),_0x292ed8=Array[_0x4148cd(0x654)](_0x415b8c)['filter'](_0x44a721=>_0x2eb34a[_0x4148cd(0x8eb)](_0x44a721));this['logger'][_0x4148cd(0x7a9)](this[_0x4148cd(0x8ba)]+'\x20('+this[_0x4148cd(0x664)]['wuid']+_0x4148cd(0x683)+_0x1a3e7d),this[_0x4148cd(0x7a2)][_0x4148cd(0x7a9)](this[_0x4148cd(0x8ba)]+'\x20('+this[_0x4148cd(0x664)]['wuid']+_0x4148cd(0x559)+_0x292ed8);let _0x1f9ecb={..._0x2e5d7f,..._0x5059de,'whoCanEdit':_0x1a3e7d,'whoCanUse':_0x292ed8},_0x1b760e=await this[_0x4148cd(0x402)][_0x4148cd(0x29c)][_0x4148cd(0x2d5)](_0x2e5d7f[_0x4148cd(0x53e)],_0x1f9ecb);return await this[_0x4148cd(0x2f9)](),_0x1b760e;}catch(_0xd6e3e3){let _0x6fa120=_0x4148cd(0x59b),_0x5b39d0=_0xd6e3e3 instanceof Error?_0xd6e3e3[_0x4148cd(0x923)]:typeof _0xd6e3e3==_0x4148cd(0x4bd)?JSON[_0x4148cd(0x5f3)](_0xd6e3e3):_0xd6e3e3,_0x490ca3=_0x6fa120+':\x20'+_0x5b39d0;throw this[_0x4148cd(0x7a2)][_0x4148cd(0x2c2)](this[_0x4148cd(0x8ba)]+'\x20('+this[_0x4148cd(0x664)]['wuid']+_0x4148cd(0x51c)+_0x490ca3),new m(_0x490ca3);}}async[a0_0x20331d(0x480)](_0x209ea9){const _0x715097=a0_0x20331d;let _0x2eea0e={'numbers':_0x209ea9};return(await this[_0x715097(0x78a)](_0x2eea0e))[_0x715097(0x625)](_0x10d0b1=>_0x10d0b1[_0x715097(0x8f2)])['map'](_0x566395=>_0x566395[_0x715097(0x461)])[_0x715097(0x41b)](_0x46607b=>this['extractPhoneNumber'](_0x46607b));}[a0_0x20331d(0x669)](_0x268261){const _0x873ea9=a0_0x20331d;let _0x3090b5=_0x268261[_0x873ea9(0x325)](/\d+/);return _0x3090b5?_0x3090b5[0x0]:'';}async[a0_0x20331d(0x670)](_0x187526){const _0x501dbe=a0_0x20331d;try{if(this[_0x501dbe(0x7a2)][_0x501dbe(0x7a9)](this[_0x501dbe(0x8ba)]+'\x20('+this['instance'][_0x501dbe(0x60f)]+_0x501dbe(0x731)),!this['AutomateSystem'][_0x501dbe(0x550)]['find'](_0x4a5aa9=>_0x4a5aa9['_id']===_0x187526[_0x501dbe(0x53e)]))throw this['logger'][_0x501dbe(0x7a9)](this[_0x501dbe(0x8ba)]+'\x20('+this[_0x501dbe(0x664)][_0x501dbe(0x60f)]+_0x501dbe(0x3c0)+_0x187526['_id']+'\x27\x20não\x20encontrado'),new m(_0x501dbe(0x341));let _0x37a5a0=await this['repository'][_0x501dbe(0x29c)][_0x501dbe(0x63f)]({'where':{'_id':_0x187526['_id']}});if(!_0x37a5a0||!_0x37a5a0['whoCanUse']?.[_0x501dbe(0x8eb)](this[_0x501dbe(0x664)][_0x501dbe(0x60f)]))throw this[_0x501dbe(0x7a2)][_0x501dbe(0x2c2)](this[_0x501dbe(0x8ba)]+'\x20('+this[_0x501dbe(0x664)][_0x501dbe(0x60f)]+_0x501dbe(0x332)+_0x187526['_id']+_0x501dbe(0x57a)),new m(_0x501dbe(0x724)+_0x187526[_0x501dbe(0x53e)]+_0x501dbe(0x57a));if(!_0x37a5a0[_0x501dbe(0x215)]?.[_0x501dbe(0x8eb)](this[_0x501dbe(0x664)]['wuid']))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let {block:_0x2d711f}=_0x187526;_0x2d711f?.['copy']?this[_0x501dbe(0x5e7)](_0x37a5a0,_0x187526):_0x2d711f?.[_0x501dbe(0x65e)]?this[_0x501dbe(0x614)](_0x37a5a0,_0x187526):_0x2d711f['_id']?await this[_0x501dbe(0x4a9)](_0x37a5a0,_0x187526):this['addBlock'](_0x37a5a0,_0x187526);let _0x2cb3b3=await this['repository'][_0x501dbe(0x29c)][_0x501dbe(0x2d5)](_0x37a5a0[_0x501dbe(0x53e)],_0x37a5a0);if(!_0x2cb3b3)throw new Error(_0x501dbe(0x695));return _0x2cb3b3;}catch(_0x1faaeb){this['throwAndLogError'](_0x501dbe(0x8bf)+_0x1faaeb[_0x501dbe(0x923)]);}}async[a0_0x20331d(0x5e7)](_0xf0df00,_0x482a78){const _0x3cf5c3=a0_0x20331d;let _0x36fb98=_0x482a78[_0x3cf5c3(0x7a8)]['_id'],_0x5d6cbb=_0xf0df00[_0x3cf5c3(0x210)][_0x3cf5c3(0x691)](_0x121444=>_0x121444[_0x3cf5c3(0x53e)][_0x3cf5c3(0x27d)]()===_0x36fb98);if(!_0x5d6cbb){this[_0x3cf5c3(0x7a2)][_0x3cf5c3(0x2c2)](this[_0x3cf5c3(0x8ba)]+'\x20('+this['instance']['wuid']+_0x3cf5c3(0x4c4)+_0x36fb98+_0x3cf5c3(0x3c1));return;}this['logger'][_0x3cf5c3(0x7a9)](this[_0x3cf5c3(0x8ba)]+'\x20('+this[_0x3cf5c3(0x664)][_0x3cf5c3(0x60f)]+_0x3cf5c3(0x8ec)+JSON['stringify'](_0x5d6cbb));let _0x5cf7d6=JSON['parse'](JSON[_0x3cf5c3(0x5f3)](_0x5d6cbb));_0x5cf7d6[_0x3cf5c3(0x53e)]=new fe[(_0x3cf5c3(0x42b))][(_0x3cf5c3(0x83f))][(_0x3cf5c3(0x920))](),this[_0x3cf5c3(0x7a2)]['verbose'](this[_0x3cf5c3(0x8ba)]+'\x20('+this[_0x3cf5c3(0x664)][_0x3cf5c3(0x60f)]+_0x3cf5c3(0x714)+JSON[_0x3cf5c3(0x5f3)](_0x5cf7d6)),_0xf0df00['blocks'][_0x3cf5c3(0x4e8)](_0x5cf7d6),this['reorderBlocks'](_0xf0df00['blocks'],_0x5cf7d6[_0x3cf5c3(0x6e5)]);}[a0_0x20331d(0x3a5)](_0x2dfbc7){const _0x146098=a0_0x20331d;throw this[_0x146098(0x7a2)]['error'](this[_0x146098(0x8ba)]+'\x20('+this[_0x146098(0x664)]['wuid']+_0x146098(0x51c)+_0x2dfbc7),new m(_0x2dfbc7);}[a0_0x20331d(0x614)](_0x54d301,_0x2be600){const _0x4cbd5b=a0_0x20331d;let {block:_0x21e615}=_0x2be600;if(_0x21e615[_0x4cbd5b(0x32e)]===_0x4cbd5b(0x48a)){this[_0x4cbd5b(0x3a5)](_0x4cbd5b(0x415));return;}if(!_0x21e615[_0x4cbd5b(0x53e)]){this[_0x4cbd5b(0x3a5)]('blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco');return;}let _0x411585=_0x54d301['blocks'][_0x4cbd5b(0x691)](_0x20489d=>_0x20489d[_0x4cbd5b(0x53e)][_0x4cbd5b(0x27d)]()===_0x2be600['block'][_0x4cbd5b(0x53e)]['toString']());if(!_0x411585){this[_0x4cbd5b(0x3a5)](_0x4cbd5b(0x3b9)+_0x21e615[_0x4cbd5b(0x53e)]+_0x4cbd5b(0x425));return;}_0x54d301['blocks']=_0x54d301[_0x4cbd5b(0x210)][_0x4cbd5b(0x625)](_0x19c568=>_0x19c568[_0x4cbd5b(0x53e)][_0x4cbd5b(0x27d)]()!==_0x2be600[_0x4cbd5b(0x7a8)][_0x4cbd5b(0x53e)][_0x4cbd5b(0x27d)]()),_0x54d301[_0x4cbd5b(0x56a)]=_0x54d301[_0x4cbd5b(0x56a)][_0x4cbd5b(0x625)](_0x1ef5e4=>_0x1ef5e4[_0x4cbd5b(0x29e)]!==_0x21e615[_0x4cbd5b(0x53e)]['toString']()),_0x54d301['varedits']=_0x54d301[_0x4cbd5b(0x322)]['filter'](_0x407788=>_0x407788[_0x4cbd5b(0x29e)]!==_0x21e615[_0x4cbd5b(0x53e)][_0x4cbd5b(0x27d)]()),_0x54d301[_0x4cbd5b(0x35d)]=_0x54d301[_0x4cbd5b(0x35d)][_0x4cbd5b(0x625)](_0x5bd6c0=>_0x5bd6c0[_0x4cbd5b(0x29e)]!==_0x21e615[_0x4cbd5b(0x53e)][_0x4cbd5b(0x27d)]()),this['reorderBlocks'](_0x54d301['blocks'],_0x411585[_0x4cbd5b(0x6e5)]);}async['updateBlock'](_0x58c8a6,_0x275686){const _0xe66eb4=a0_0x20331d;let _0xe6c352=_0x58c8a6[_0xe66eb4(0x210)]['findIndex'](_0x4ce751=>_0x4ce751['_id']['toString']()===_0x275686['block'][_0xe66eb4(0x53e)]['toString']());if(this[_0xe66eb4(0x7a2)][_0xe66eb4(0x7a9)](this[_0xe66eb4(0x8ba)]+'\x20('+this[_0xe66eb4(0x664)][_0xe66eb4(0x60f)]+'):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:'+_0xe6c352),_0xe6c352===-0x1){this[_0xe66eb4(0x7a2)][_0xe66eb4(0x7a9)](_0xe66eb4(0x3b9)+_0x275686['block'][_0xe66eb4(0x53e)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}if(_0x58c8a6['blocks'][_0xe6c352][_0xe66eb4(0x32e)]==='start'){let _0x204628=Object['keys'](_0x275686[_0xe66eb4(0x7a8)]);if(_0x204628[_0xe66eb4(0x786)]>0x2||_0x204628[_0xe66eb4(0x786)]===0x2&&!_0x204628[_0xe66eb4(0x8eb)](_0xe66eb4(0x46d))){this[_0xe66eb4(0x3a5)]('Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão');return;}}let _0x24c8bf=_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x6e5)];for(let _0x330841 in _0x275686[_0xe66eb4(0x7a8)])_0x275686[_0xe66eb4(0x7a8)][_0xe66eb4(0x36c)](_0x330841)&&(_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0x330841]=_0x275686['block'][_0x330841]);if(this[_0xe66eb4(0x7a2)][_0xe66eb4(0x7a9)](this['instanceName']+'\x20('+this[_0xe66eb4(0x664)][_0xe66eb4(0x60f)]+_0xe66eb4(0x372)+JSON[_0xe66eb4(0x5f3)](_0x58c8a6['blocks'][_0xe6c352])),_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352]['apirequest']&&_0xe66eb4(0x55b)in _0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x583)]){this[_0xe66eb4(0x7a2)]['verbose'](this[_0xe66eb4(0x8ba)]+'\x20('+this['instance'][_0xe66eb4(0x60f)]+_0xe66eb4(0x2c6));let _0x26b35e=JSON[_0xe66eb4(0x5f3)](_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x583)][_0xe66eb4(0x55b)],null,0x1);_0x26b35e[_0xe66eb4(0x786)]>0x2&&(_0x26b35e=_0x26b35e[_0xe66eb4(0x5d1)](0x1,_0x26b35e[_0xe66eb4(0x786)]-0x1)[_0xe66eb4(0x291)]()),_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x583)][_0xe66eb4(0x5e2)]=_0x26b35e;}if(_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x583)]&&_0xe66eb4(0x3b2)in _0x58c8a6['blocks'][_0xe6c352][_0xe66eb4(0x583)]&&!(_0xe66eb4(0x7b6)in _0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x583)])){this['logger'][_0xe66eb4(0x7a9)](this[_0xe66eb4(0x8ba)]+'\x20('+this[_0xe66eb4(0x664)][_0xe66eb4(0x60f)]+_0xe66eb4(0x712)),_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x583)][_0xe66eb4(0x59f)]=!0x1;let _0x1df83b=JSON[_0xe66eb4(0x5f3)](_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x583)][_0xe66eb4(0x3b2)],null,0x2);_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352]['apirequest'][_0xe66eb4(0x7b6)]=_0x1df83b;}if(_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x583)]&&_0xe66eb4(0x7b6)in _0x58c8a6['blocks'][_0xe6c352]['apirequest']){_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x583)]['bodyStringErrorParse']=!0x1;let _0x110765=_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x583)][_0xe66eb4(0x7b6)],_0x550ed2=this[_0xe66eb4(0x67e)](_0x110765);_0x58c8a6['blocks'][_0xe6c352][_0xe66eb4(0x583)][_0xe66eb4(0x7b6)]=_0x550ed2[_0xe66eb4(0x2c9)],_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x583)]['bodyStringErrorParse']=_0x550ed2[_0xe66eb4(0x2c2)];}let _0x97285e=_0x58c8a6[_0xe66eb4(0x210)][_0xe6c352][_0xe66eb4(0x6e5)];_0x24c8bf!==_0x97285e?(this[_0xe66eb4(0x68d)](_0x58c8a6[_0xe66eb4(0x210)],_0x24c8bf),this[_0xe66eb4(0x68d)](_0x58c8a6[_0xe66eb4(0x210)],_0x97285e)):this[_0xe66eb4(0x68d)](_0x58c8a6['blocks'],_0x24c8bf);}[a0_0x20331d(0x67e)](_0x598dbd){const _0x31e6c7=a0_0x20331d;let _0x4afb6a='\u205f',_0x5a618c=!0x1,_0xaff568='';for(let _0x31dc17=0x0;_0x31dc17<_0x598dbd[_0x31e6c7(0x786)];_0x31dc17++){let _0x5d6a65=_0x598dbd[_0x31dc17];_0x5d6a65==='\x22'&&(_0x31dc17===0x0||_0x598dbd[_0x31dc17-0x1]!=='\x5c')&&(_0x5a618c=!_0x5a618c),!(!_0x5a618c&&(_0x5d6a65==='\x0a'||_0x5d6a65==='\x20'||_0x5d6a65===_0x4afb6a))&&(_0xaff568+=_0x5d6a65);}let _0x46f3cc={},_0x30b170=9876543210.1234,_0x5a0e41=_0xaff568[_0x31e6c7(0x759)](/\{\{([^}]+)\}\}/g,_0xe2371f=>{let _0x49abec=_0xe2371f,_0xa4614b=''+_0x30b170;return _0x46f3cc[_0xa4614b]=_0x49abec,_0x30b170+=0.0001,_0xa4614b;}),_0x512039='',_0x17219a=!0x1;try{let _0x153bc9=JSON[_0x31e6c7(0x79b)](_0x5a0e41);_0x512039=JSON[_0x31e6c7(0x5f3)](_0x153bc9,null,0x2),_0x512039=_0x512039[_0x31e6c7(0x759)](/\n( +)/g,(_0x5218cb,_0x4f930f)=>{const _0xd9f2a9=_0x31e6c7;let _0xe27b2b=_0x4f930f['length'];return'\x0a'+_0x4afb6a[_0xd9f2a9(0x41c)](_0xe27b2b*0x2);}),_0x512039=_0x512039[_0x31e6c7(0x759)](/(\d{10,}\.\d+)/g,_0x5e62b5=>_0x46f3cc[_0x5e62b5]||_0x5e62b5);}catch(_0xd766ba){this[_0x31e6c7(0x7a2)][_0x31e6c7(0x2c2)](_0x31e6c7(0x5b8)+_0xd766ba),_0x512039=_0x598dbd,_0x17219a=!0x0;}return{'result':_0x512039,'error':_0x17219a};}[a0_0x20331d(0x369)](_0x50d32f,_0x4a87aa){const _0x5e23fc=a0_0x20331d;if(_0x4a87aa[_0x5e23fc(0x7a8)]['type']==='start'){this['throwAndLogError'](_0x5e23fc(0x3f0));return;}if(_0x4a87aa[_0x5e23fc(0x7a8)]['apirequest']&&_0x5e23fc(0x55b)in _0x4a87aa[_0x5e23fc(0x7a8)]['apirequest']){this[_0x5e23fc(0x7a2)][_0x5e23fc(0x7a9)](this[_0x5e23fc(0x8ba)]+'\x20('+this[_0x5e23fc(0x664)][_0x5e23fc(0x60f)]+_0x5e23fc(0x2c6));let _0x1622a9=JSON['stringify'](_0x4a87aa[_0x5e23fc(0x7a8)]['apirequest'][_0x5e23fc(0x55b)],null,0x1);_0x1622a9['length']>0x2&&(_0x1622a9=_0x1622a9['substring'](0x1,_0x1622a9[_0x5e23fc(0x786)]-0x1)[_0x5e23fc(0x291)]()),_0x4a87aa['block']['apirequest'][_0x5e23fc(0x5e2)]=_0x1622a9;}_0x4a87aa[_0x5e23fc(0x7a8)][_0x5e23fc(0x583)]&&_0x5e23fc(0x3b2)in _0x4a87aa['block']['apirequest']&&(this[_0x5e23fc(0x7a2)][_0x5e23fc(0x7a9)](this[_0x5e23fc(0x8ba)]+'\x20('+this[_0x5e23fc(0x664)][_0x5e23fc(0x60f)]+_0x5e23fc(0x712)),_0x4a87aa[_0x5e23fc(0x7a8)][_0x5e23fc(0x583)]['bodyString']=JSON[_0x5e23fc(0x5f3)](_0x4a87aa[_0x5e23fc(0x7a8)][_0x5e23fc(0x583)][_0x5e23fc(0x3b2)],null,0x1)[_0x5e23fc(0x291)]()),_0x50d32f[_0x5e23fc(0x210)][_0x5e23fc(0x4e8)](_0x4a87aa[_0x5e23fc(0x7a8)]),this[_0x5e23fc(0x68d)](_0x50d32f[_0x5e23fc(0x210)],_0x4a87aa[_0x5e23fc(0x7a8)]['groupId']);}[a0_0x20331d(0x68d)](_0x53f3ae,_0x287b0e){const _0x3f035b=a0_0x20331d;let _0x3e26bc=_0x53f3ae[_0x3f035b(0x625)](_0x340c99=>_0x340c99[_0x3f035b(0x6e5)]===_0x287b0e);_0x3e26bc[_0x3f035b(0x4b4)]((_0x2cbf92,_0x114162)=>_0x2cbf92['order']-_0x114162[_0x3f035b(0x1e4)]),_0x3e26bc[_0x3f035b(0x22b)]((_0x31fba8,_0x435dc3)=>_0x31fba8[_0x3f035b(0x1e4)]=_0x435dc3+0x1);}async[a0_0x20331d(0x62c)](_0x45801b){const _0x1431f2=a0_0x20331d;try{if(this[_0x1431f2(0x7a2)][_0x1431f2(0x7a9)](this[_0x1431f2(0x8ba)]+'\x20('+this['instance'][_0x1431f2(0x60f)]+_0x1431f2(0x8d6)),!_0x45801b||!_0x45801b[_0x1431f2(0x6a0)]){this[_0x1431f2(0x3a5)](_0x1431f2(0x38e));return;}if(!this[_0x1431f2(0x246)][_0x1431f2(0x550)][_0x1431f2(0x691)](_0x589155=>_0x589155[_0x1431f2(0x53e)]===_0x45801b[_0x1431f2(0x53e)]))throw this[_0x1431f2(0x7a2)]['verbose'](this[_0x1431f2(0x8ba)]+'\x20('+this['instance'][_0x1431f2(0x60f)]+_0x1431f2(0x3c0)+_0x45801b[_0x1431f2(0x53e)]+_0x1431f2(0x3e7)),new m(_0x1431f2(0x341));let _0x175b8b=await this[_0x1431f2(0x402)][_0x1431f2(0x29c)][_0x1431f2(0x63f)]({'where':{'_id':_0x45801b['_id']}});if(!_0x175b8b||!_0x175b8b[_0x1431f2(0x733)]?.['includes'](this[_0x1431f2(0x664)]['wuid']))throw this['logger'][_0x1431f2(0x2c2)](this[_0x1431f2(0x8ba)]+'\x20('+this[_0x1431f2(0x664)][_0x1431f2(0x60f)]+_0x1431f2(0x332)+_0x45801b[_0x1431f2(0x53e)]+_0x1431f2(0x57a)),new m(_0x1431f2(0x724)+_0x45801b['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x175b8b[_0x1431f2(0x215)]?.['includes'](this[_0x1431f2(0x664)]['wuid']))throw new m(_0x1431f2(0x5ff));let {replyOption:_0x4fbdab}=_0x45801b;_0x4fbdab?.[_0x1431f2(0x65e)]?(this['deleteReplyOption'](_0x175b8b,_0x45801b),this[_0x1431f2(0x5b0)](_0x175b8b['replyOptions'],_0x45801b['replyOption'][_0x1431f2(0x29e)])):_0x4fbdab[_0x1431f2(0x53e)]?(await this[_0x1431f2(0x3af)](_0x175b8b,_0x45801b),this[_0x1431f2(0x5b0)](_0x175b8b['replyOptions'],_0x45801b[_0x1431f2(0x6a0)][_0x1431f2(0x29e)])):(this[_0x1431f2(0x6e4)](_0x175b8b,_0x45801b),this[_0x1431f2(0x5b0)](_0x175b8b[_0x1431f2(0x35d)],_0x45801b['replyOption'][_0x1431f2(0x29e)]));let _0x1e0276=await this[_0x1431f2(0x402)][_0x1431f2(0x29c)][_0x1431f2(0x2d5)](_0x175b8b[_0x1431f2(0x53e)],_0x175b8b);if(!_0x1e0276)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x1e0276;}catch(_0x11c3a5){this[_0x1431f2(0x3a5)]('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0x11c3a5);}}[a0_0x20331d(0x5b0)](_0x3dcfa0,_0x5f184f){const _0x2d25d3=a0_0x20331d;_0x3dcfa0[_0x2d25d3(0x22b)](_0x470f6a=>{const _0x14aa2f=_0x2d25d3;_0x470f6a[_0x14aa2f(0x29e)]===_0x5f184f&&_0x470f6a['order']===void 0x0&&(_0x470f6a[_0x14aa2f(0x1e4)]=0x270f);});let _0x1994a8=_0x3dcfa0[_0x2d25d3(0x625)](_0x346beb=>_0x346beb[_0x2d25d3(0x29e)]===_0x5f184f);_0x1994a8[_0x2d25d3(0x4b4)]((_0x5851b8,_0x1594b1)=>_0x5851b8[_0x2d25d3(0x1e4)]-_0x1594b1['order']),_0x1994a8['forEach']((_0x30189b,_0xbbbf33)=>{const _0x1d2554=_0x2d25d3;_0x30189b[_0x1d2554(0x1e4)]=_0xbbbf33+0x1;}),_0x3dcfa0['forEach'](_0x3f9dc2=>{const _0x59bdfb=_0x2d25d3;if(_0x3f9dc2[_0x59bdfb(0x29e)]===_0x5f184f){let _0x1eba65=_0x1994a8[_0x59bdfb(0x691)](_0x303795=>_0x303795[_0x59bdfb(0x53e)]&&_0x3f9dc2[_0x59bdfb(0x53e)]&&_0x303795['_id']['toString']()===_0x3f9dc2[_0x59bdfb(0x53e)][_0x59bdfb(0x27d)]());_0x1eba65&&(_0x3f9dc2['order']=_0x1eba65[_0x59bdfb(0x1e4)]);}});}[a0_0x20331d(0x746)](_0x4cd537,_0x359d1a){const _0x58c67d=a0_0x20331d;let {replyOption:_0x378073}=_0x359d1a;if(!_0x378073[_0x58c67d(0x53e)]){this[_0x58c67d(0x3a5)](_0x58c67d(0x8c8));return;}if(!_0x4cd537[_0x58c67d(0x35d)][_0x58c67d(0x691)](_0x25e95a=>_0x25e95a[_0x58c67d(0x53e)][_0x58c67d(0x27d)]()===_0x359d1a[_0x58c67d(0x6a0)][_0x58c67d(0x53e)][_0x58c67d(0x27d)]())){this[_0x58c67d(0x3a5)](_0x58c67d(0x2aa)+_0x378073[_0x58c67d(0x53e)]+_0x58c67d(0x425));return;}_0x4cd537[_0x58c67d(0x35d)]=_0x4cd537[_0x58c67d(0x35d)][_0x58c67d(0x625)](_0x4b1237=>_0x4b1237[_0x58c67d(0x53e)][_0x58c67d(0x27d)]()!==_0x359d1a['replyOption'][_0x58c67d(0x53e)][_0x58c67d(0x27d)]());}async[a0_0x20331d(0x3af)](_0x3a5741,_0x579449){const _0x577812=a0_0x20331d;let _0x368e0e=_0x3a5741[_0x577812(0x35d)][_0x577812(0x63e)](_0x2403e8=>_0x2403e8[_0x577812(0x53e)][_0x577812(0x27d)]()===_0x579449['replyOption'][_0x577812(0x53e)][_0x577812(0x27d)]());if(_0x368e0e===-0x1){this['throwAndLogError'](_0x577812(0x2aa)+_0x579449[_0x577812(0x6a0)][_0x577812(0x53e)]+_0x577812(0x375));return;}for(let _0x558b37 in _0x579449['replyOption'])_0x579449[_0x577812(0x6a0)]['hasOwnProperty'](_0x558b37)&&(_0x3a5741[_0x577812(0x35d)][_0x368e0e][_0x558b37]=_0x579449[_0x577812(0x6a0)][_0x558b37]);}[a0_0x20331d(0x6e4)](_0x26088a,_0x468e17){const _0x1285a4=a0_0x20331d;_0x26088a[_0x1285a4(0x35d)][_0x1285a4(0x4e8)](_0x468e17['replyOption']);}async['editFlowGroup'](_0xdb7524){const _0x25a009=a0_0x20331d;this[_0x25a009(0x7a2)]['verbose'](this[_0x25a009(0x8ba)]+'\x20('+this[_0x25a009(0x664)]['wuid']+_0x25a009(0x912)+JSON[_0x25a009(0x5f3)](_0xdb7524,null,0x2));try{if(this[_0x25a009(0x7a2)][_0x25a009(0x7a9)](this['instanceName']+'\x20('+this[_0x25a009(0x664)][_0x25a009(0x60f)]+_0x25a009(0x8dc)),!this[_0x25a009(0x246)][_0x25a009(0x550)]['find'](_0x4f6d58=>_0x4f6d58[_0x25a009(0x53e)]===_0xdb7524[_0x25a009(0x53e)]))throw this[_0x25a009(0x7a2)]['verbose'](this[_0x25a009(0x8ba)]+'\x20('+this[_0x25a009(0x664)][_0x25a009(0x60f)]+_0x25a009(0x3c0)+_0xdb7524['_id']+_0x25a009(0x3e7)),new m(_0x25a009(0x341));let _0x2ee21d=await this[_0x25a009(0x402)][_0x25a009(0x29c)][_0x25a009(0x63f)]({'where':{'_id':_0xdb7524[_0x25a009(0x53e)]}});if(!_0x2ee21d||!_0x2ee21d['whoCanUse']?.['includes'](this['instance'][_0x25a009(0x60f)]))throw this[_0x25a009(0x7a2)][_0x25a009(0x2c2)](this[_0x25a009(0x8ba)]+'\x20('+this[_0x25a009(0x664)][_0x25a009(0x60f)]+_0x25a009(0x332)+_0xdb7524[_0x25a009(0x53e)]+_0x25a009(0x57a)),new m('Flow\x20\x27'+_0xdb7524[_0x25a009(0x53e)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x2ee21d[_0x25a009(0x215)]?.[_0x25a009(0x8eb)](this[_0x25a009(0x664)]['wuid']))throw new m(_0x25a009(0x5ff));if(_0xdb7524[_0x25a009(0x507)]&&_0xdb7524[_0x25a009(0x507)]?.[_0x25a009(0x65e)]===!0x0){if(this[_0x25a009(0x7a2)]['verbose'](this[_0x25a009(0x8ba)]+'\x20('+this[_0x25a009(0x664)]['wuid']+_0x25a009(0x701)),_0xdb7524[_0x25a009(0x507)]['default']===!0x0)return{'message':_0x25a009(0x76a)};if(_0x2ee21d[_0x25a009(0x210)][_0x25a009(0x270)](_0x4fc407=>_0x4fc407[_0x25a009(0x6e5)][_0x25a009(0x27d)]()===_0xdb7524[_0x25a009(0x507)][_0x25a009(0x53e)]))return this[_0x25a009(0x7a2)][_0x25a009(0x7a9)](this[_0x25a009(0x8ba)]+'\x20('+this['instance'][_0x25a009(0x60f)]+'):\x20tem\x20blocks'),{'message':_0x25a009(0x7dd)};_0x2ee21d[_0x25a009(0x3a1)]=_0x2ee21d['groups'][_0x25a009(0x625)](_0x527471=>_0x527471[_0x25a009(0x53e)][_0x25a009(0x27d)]()!==_0xdb7524[_0x25a009(0x507)][_0x25a009(0x53e)]);}else{if(_0xdb7524[_0x25a009(0x507)]){if(_0xdb7524[_0x25a009(0x507)][_0x25a009(0x42b)]===!0x0)return{'message':_0x25a009(0x566)};if(_0xdb7524[_0x25a009(0x507)][_0x25a009(0x53e)]){let _0x209546=_0x2ee21d[_0x25a009(0x3a1)][_0x25a009(0x691)](_0x33b456=>_0x33b456['_id'][_0x25a009(0x27d)]()===_0xdb7524[_0x25a009(0x507)][_0x25a009(0x53e)]);_0x209546&&(_0xdb7524[_0x25a009(0x507)]['x']<0x0&&(_0xdb7524[_0x25a009(0x507)]['x']=0x0),_0xdb7524[_0x25a009(0x507)]['y']<0x0&&(_0xdb7524[_0x25a009(0x507)]['y']=0x0),Object['assign'](_0x209546,_0xdb7524[_0x25a009(0x507)]));}else _0x2ee21d['groups'][_0x25a009(0x4e8)](_0xdb7524[_0x25a009(0x507)]);}}let _0x60c6b8=await this['repository'][_0x25a009(0x29c)][_0x25a009(0x2d5)](_0x2ee21d[_0x25a009(0x53e)],_0x2ee21d);if(!_0x60c6b8)throw new Error(_0x25a009(0x695));return _0x60c6b8;}catch(_0x3dfa30){let _0x37a6e8=_0x25a009(0x358),_0x5929ed=_0x3dfa30 instanceof Error?_0x3dfa30[_0x25a009(0x923)]:typeof _0x3dfa30==_0x25a009(0x4bd)?JSON[_0x25a009(0x5f3)](_0x3dfa30):_0x3dfa30,_0x2a5f9b=_0x37a6e8+':\x20'+_0x5929ed;throw this[_0x25a009(0x7a2)][_0x25a009(0x2c2)](this[_0x25a009(0x8ba)]+'\x20('+this['instance']['wuid']+_0x25a009(0x51c)+_0x2a5f9b),new m(_0x2a5f9b);}}async[a0_0x20331d(0x570)](_0x24d435){const _0x135b5f=a0_0x20331d;try{if(this[_0x135b5f(0x7a2)][_0x135b5f(0x7a9)](this[_0x135b5f(0x8ba)]+'\x20('+this[_0x135b5f(0x664)][_0x135b5f(0x60f)]+_0x135b5f(0x46b)),!this['AutomateSystem'][_0x135b5f(0x550)][_0x135b5f(0x691)](_0x37704a=>_0x37704a[_0x135b5f(0x53e)]===_0x24d435['_id']))throw this[_0x135b5f(0x7a2)][_0x135b5f(0x7a9)](this['instanceName']+'\x20('+this[_0x135b5f(0x664)][_0x135b5f(0x60f)]+_0x135b5f(0x3c0)+_0x24d435['_id']+'\x27\x20não\x20encontrado'),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x4d611a=await this[_0x135b5f(0x402)][_0x135b5f(0x29c)][_0x135b5f(0x63f)]({'where':{'_id':_0x24d435['_id']}});if(!_0x4d611a||!_0x4d611a[_0x135b5f(0x733)]?.[_0x135b5f(0x8eb)](this[_0x135b5f(0x664)]['wuid']))throw this[_0x135b5f(0x7a2)][_0x135b5f(0x2c2)](this[_0x135b5f(0x8ba)]+'\x20('+this['instance'][_0x135b5f(0x60f)]+_0x135b5f(0x332)+_0x24d435[_0x135b5f(0x53e)]+_0x135b5f(0x57a)),new m(_0x135b5f(0x724)+_0x24d435[_0x135b5f(0x53e)]+_0x135b5f(0x57a));if(!_0x4d611a[_0x135b5f(0x215)]?.['includes'](this['instance'][_0x135b5f(0x60f)]))throw new m(_0x135b5f(0x5ff));let _0x52caeb=!0x1;if(_0x24d435['condition']?.['delete']===!0x0)_0x4d611a[_0x135b5f(0x56a)]=_0x4d611a[_0x135b5f(0x56a)][_0x135b5f(0x625)](_0x5843f6=>_0x5843f6&&_0x24d435[_0x135b5f(0x1ec)]&&_0x5843f6[_0x135b5f(0x53e)]&&_0x24d435['condition'][_0x135b5f(0x53e)]&&_0x5843f6['_id'][_0x135b5f(0x27d)]()!==_0x24d435['condition'][_0x135b5f(0x53e)][_0x135b5f(0x27d)]()),_0x52caeb=!0x0;else{let _0xdcf440=_0x4d611a[_0x135b5f(0x56a)][_0x135b5f(0x691)](_0x420b8d=>_0x420b8d&&_0x24d435['condition']&&_0x420b8d['_id']&&_0x24d435['condition'][_0x135b5f(0x53e)]&&_0x420b8d[_0x135b5f(0x53e)][_0x135b5f(0x27d)]()===_0x24d435[_0x135b5f(0x1ec)][_0x135b5f(0x53e)]['toString']());_0xdcf440?(_0x52caeb=_0xdcf440[_0x135b5f(0x1e4)]!==_0x24d435['condition'][_0x135b5f(0x1e4)],Object[_0x135b5f(0x2df)](_0xdcf440,_0x24d435['condition'])):(_0x4d611a[_0x135b5f(0x56a)][_0x135b5f(0x4e8)](_0x24d435['condition']),_0x52caeb=!0x0);}if(_0x52caeb){_0x4d611a[_0x135b5f(0x56a)]['sort']((_0x29a3eb,_0x2bdaf8)=>_0x29a3eb[_0x135b5f(0x1e4)]>_0x2bdaf8['order']?0x1:_0x2bdaf8[_0x135b5f(0x1e4)]>_0x29a3eb['order']?-0x1:0x0);for(let _0x22b592=0x0;_0x22b592<_0x4d611a['conditions'][_0x135b5f(0x786)];_0x22b592++)_0x4d611a[_0x135b5f(0x56a)][_0x22b592]['order']=_0x22b592+0x1;_0x4d611a['conditions']['length']>0x0&&(_0x4d611a[_0x135b5f(0x56a)][0x0][_0x135b5f(0x7f3)]='and');}let _0x8d014b=await this[_0x135b5f(0x402)][_0x135b5f(0x29c)][_0x135b5f(0x2d5)](_0x4d611a[_0x135b5f(0x53e)],_0x4d611a);if(!_0x8d014b)throw new Error(_0x135b5f(0x695));return _0x8d014b;}catch(_0x365a29){let _0x29915d=_0x135b5f(0x633),_0x4f0790=_0x365a29 instanceof Error?_0x365a29[_0x135b5f(0x923)]:typeof _0x365a29==_0x135b5f(0x4bd)?JSON[_0x135b5f(0x5f3)](_0x365a29):_0x365a29,_0x3ac7d9=_0x29915d+':\x20'+_0x4f0790;throw this[_0x135b5f(0x7a2)][_0x135b5f(0x2c2)](this['instanceName']+'\x20('+this[_0x135b5f(0x664)][_0x135b5f(0x60f)]+_0x135b5f(0x51c)+_0x3ac7d9),new m(_0x3ac7d9);}}async[a0_0x20331d(0x257)](_0x2f5774){const _0x4d6734=a0_0x20331d;try{if(this['logger']['verbose'](this[_0x4d6734(0x8ba)]+'\x20('+this[_0x4d6734(0x664)]['wuid']+_0x4d6734(0x5fe)),!this[_0x4d6734(0x246)][_0x4d6734(0x550)][_0x4d6734(0x691)](_0x164475=>_0x164475[_0x4d6734(0x53e)]===_0x2f5774[_0x4d6734(0x53e)]))throw this[_0x4d6734(0x7a2)][_0x4d6734(0x7a9)](this['instanceName']+'\x20('+this[_0x4d6734(0x664)]['wuid']+'):\x20Fluxo\x20\x27'+_0x2f5774[_0x4d6734(0x53e)]+_0x4d6734(0x3e7)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x5a32a8=await this[_0x4d6734(0x402)][_0x4d6734(0x29c)]['findOne']({'where':{'_id':_0x2f5774[_0x4d6734(0x53e)]}});if(!_0x5a32a8||!_0x5a32a8[_0x4d6734(0x733)]?.[_0x4d6734(0x8eb)](this['instance'][_0x4d6734(0x60f)]))throw this['logger'][_0x4d6734(0x2c2)](this['instanceName']+'\x20('+this[_0x4d6734(0x664)][_0x4d6734(0x60f)]+_0x4d6734(0x332)+_0x2f5774[_0x4d6734(0x53e)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x4d6734(0x724)+_0x2f5774[_0x4d6734(0x53e)]+_0x4d6734(0x57a));if(!_0x5a32a8[_0x4d6734(0x215)]?.['includes'](this[_0x4d6734(0x664)]['wuid']))throw new m(_0x4d6734(0x5ff));let _0x11111b=!0x1;if(_0x2f5774[_0x4d6734(0x92f)]?.['delete']===!0x0)_0x5a32a8[_0x4d6734(0x322)]=_0x5a32a8[_0x4d6734(0x322)][_0x4d6734(0x625)](_0x3c5c31=>_0x3c5c31&&_0x2f5774[_0x4d6734(0x92f)]&&_0x3c5c31[_0x4d6734(0x53e)]&&_0x2f5774[_0x4d6734(0x92f)][_0x4d6734(0x53e)]&&_0x3c5c31[_0x4d6734(0x53e)][_0x4d6734(0x27d)]()!==_0x2f5774['varedit'][_0x4d6734(0x53e)]['toString']()),_0x11111b=!0x0;else{let _0x572c4b=_0x5a32a8[_0x4d6734(0x322)][_0x4d6734(0x691)](_0x43f24d=>_0x43f24d&&_0x2f5774[_0x4d6734(0x92f)]&&_0x43f24d[_0x4d6734(0x53e)]&&_0x2f5774[_0x4d6734(0x92f)][_0x4d6734(0x53e)]&&_0x43f24d[_0x4d6734(0x53e)][_0x4d6734(0x27d)]()===_0x2f5774['varedit'][_0x4d6734(0x53e)][_0x4d6734(0x27d)]());_0x572c4b?(_0x11111b=_0x572c4b['order']!==_0x2f5774[_0x4d6734(0x92f)][_0x4d6734(0x1e4)],Object[_0x4d6734(0x2df)](_0x572c4b,_0x2f5774[_0x4d6734(0x92f)])):(_0x5a32a8[_0x4d6734(0x322)][_0x4d6734(0x4e8)](_0x2f5774[_0x4d6734(0x92f)]),_0x11111b=!0x0);}if(_0x11111b){_0x5a32a8[_0x4d6734(0x322)][_0x4d6734(0x4b4)]((_0x4105e8,_0x514f21)=>_0x4105e8[_0x4d6734(0x1e4)]>_0x514f21[_0x4d6734(0x1e4)]?0x1:_0x514f21['order']>_0x4105e8['order']?-0x1:0x0);for(let _0xb1a6da=0x0;_0xb1a6da<_0x5a32a8['varedits'][_0x4d6734(0x786)];_0xb1a6da++)_0x5a32a8[_0x4d6734(0x322)][_0xb1a6da][_0x4d6734(0x1e4)]=_0xb1a6da+0x1;}let _0x427705=await this[_0x4d6734(0x402)][_0x4d6734(0x29c)]['updateOne'](_0x5a32a8[_0x4d6734(0x53e)],_0x5a32a8);if(!_0x427705)throw new Error(_0x4d6734(0x695));return _0x427705;}catch(_0x52f266){let _0x216729=_0x4d6734(0x633),_0x45d04a=_0x52f266 instanceof Error?_0x52f266[_0x4d6734(0x923)]:typeof _0x52f266==_0x4d6734(0x4bd)?JSON['stringify'](_0x52f266):_0x52f266,_0xbf620b=_0x216729+':\x20'+_0x45d04a;throw this['logger']['error'](this[_0x4d6734(0x8ba)]+'\x20('+this['instance']['wuid']+_0x4d6734(0x51c)+_0xbf620b),new m(_0xbf620b);}}async[a0_0x20331d(0x4e3)](_0x5c11e1){const _0x46fd3b=a0_0x20331d;try{if(this['logger'][_0x46fd3b(0x7a9)](this[_0x46fd3b(0x8ba)]+'\x20('+this[_0x46fd3b(0x664)][_0x46fd3b(0x60f)]+'):\x20Editando\x20variável\x20do\x20fluxo...'),!this[_0x46fd3b(0x246)][_0x46fd3b(0x550)][_0x46fd3b(0x691)](_0x5b51ba=>_0x5b51ba[_0x46fd3b(0x53e)]===_0x5c11e1['_id']))throw this[_0x46fd3b(0x7a2)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x46fd3b(0x60f)]+'):\x20Fluxo\x20\x27'+_0x5c11e1[_0x46fd3b(0x53e)]+'\x27\x20não\x20encontrado'),new m(_0x46fd3b(0x341));let _0x5089b3=await this[_0x46fd3b(0x402)][_0x46fd3b(0x29c)]['findOne']({'where':{'_id':_0x5c11e1[_0x46fd3b(0x53e)]}});if(!_0x5089b3||!_0x5089b3[_0x46fd3b(0x733)]?.[_0x46fd3b(0x8eb)](this[_0x46fd3b(0x664)][_0x46fd3b(0x60f)]))throw this[_0x46fd3b(0x7a2)][_0x46fd3b(0x2c2)](this[_0x46fd3b(0x8ba)]+'\x20('+this['instance'][_0x46fd3b(0x60f)]+_0x46fd3b(0x332)+_0x5c11e1[_0x46fd3b(0x53e)]+_0x46fd3b(0x57a)),new m('Flow\x20\x27'+_0x5c11e1['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x5089b3['whoCanEdit']?.[_0x46fd3b(0x8eb)](this[_0x46fd3b(0x664)][_0x46fd3b(0x60f)]))throw new m(_0x46fd3b(0x5ff));_0x5c11e1[_0x46fd3b(0x8cb)][_0x46fd3b(0x8b9)]=_0x5c11e1['variable']['name'][_0x46fd3b(0x291)](),_0x5c11e1[_0x46fd3b(0x8cb)][_0x46fd3b(0x8b9)][_0x46fd3b(0x359)]('_')&&(_0x5c11e1[_0x46fd3b(0x8cb)][_0x46fd3b(0x8b9)]=_0x5c11e1['variable'][_0x46fd3b(0x8b9)][_0x46fd3b(0x5d1)](0x1)),_0x5c11e1[_0x46fd3b(0x8cb)][_0x46fd3b(0x8b9)]=_0x5c11e1['variable'][_0x46fd3b(0x8b9)]['trim']();let _0x12ad2f=_0x5089b3[_0x46fd3b(0x5e3)]['find'](_0x5041f1=>_0x5041f1[_0x46fd3b(0x8b9)]===_0x5c11e1['variable'][_0x46fd3b(0x8b9)]);if(_0x12ad2f?.[_0x46fd3b(0x766)]===!0x0)throw new Error(_0x46fd3b(0x274));if(_0x5c11e1[_0x46fd3b(0x8cb)]?.[_0x46fd3b(0x65e)]===!0x0){if(!_0x12ad2f)return{'message':_0x46fd3b(0x824)};_0x5089b3[_0x46fd3b(0x5e3)]=_0x5089b3[_0x46fd3b(0x5e3)]['filter'](_0x23129e=>_0x23129e[_0x46fd3b(0x8b9)]!==_0x5c11e1[_0x46fd3b(0x8cb)][_0x46fd3b(0x8b9)]);}else _0x12ad2f?Object['assign'](_0x12ad2f,_0x5c11e1[_0x46fd3b(0x8cb)]):_0x5089b3[_0x46fd3b(0x5e3)][_0x46fd3b(0x4e8)](_0x5c11e1[_0x46fd3b(0x8cb)]);let _0x3879a8=await this['repository'][_0x46fd3b(0x29c)]['updateOne'](_0x5089b3['_id'],_0x5089b3);if(!_0x3879a8)throw new Error(_0x46fd3b(0x695));return _0x3879a8;}catch(_0x8808e7){let _0x2aaa78=_0x46fd3b(0x34a),_0x210fa2=_0x8808e7 instanceof Error?_0x8808e7['message']:typeof _0x8808e7==_0x46fd3b(0x4bd)?JSON['stringify'](_0x8808e7):_0x8808e7,_0x48b828=_0x2aaa78+':\x20'+_0x210fa2;throw this[_0x46fd3b(0x7a2)][_0x46fd3b(0x2c2)](this[_0x46fd3b(0x8ba)]+'\x20('+this['instance']['wuid']+_0x46fd3b(0x51c)+_0x48b828),new m(_0x48b828);}}async[a0_0x20331d(0x5d7)](_0x365281){const _0x3a12a4=a0_0x20331d;let _0x2154a3=null;try{if(!this[_0x3a12a4(0x246)]?.[_0x3a12a4(0x2b6)][_0x3a12a4(0x349)])throw new m('Fluxos\x20não\x20estão\x20ativados');this[_0x3a12a4(0x7a2)]['verbose'](this[_0x3a12a4(0x8ba)]+'\x20('+this['instance'][_0x3a12a4(0x60f)]+_0x3a12a4(0x77c));let _0x5e0805=(await this['whatsappNumber']({'numbers':[_0x365281[_0x3a12a4(0x3eb)]]}))[0x0];if(!_0x5e0805[_0x3a12a4(0x8f2)]&&!(0x0,w['isJidGroup'])(_0x5e0805[_0x3a12a4(0x461)])&&!_0x5e0805[_0x3a12a4(0x461)]['includes'](_0x3a12a4(0x3b3)))throw _0x2154a3=JSON[_0x3a12a4(0x5f3)](_0x5e0805,null,0x2),new m(_0x5e0805);let _0x16e8c1;if(_0x365281[_0x3a12a4(0x8b9)][_0x3a12a4(0x786)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x3a12a4(0x248)](_0x365281[_0x3a12a4(0x8b9)])?_0x16e8c1=this['AutomateSystem'][_0x3a12a4(0x550)][_0x3a12a4(0x691)](_0x309214=>_0x309214[_0x3a12a4(0x53e)]===_0x365281['name']):_0x16e8c1=this[_0x3a12a4(0x246)][_0x3a12a4(0x550)]['find'](_0x1a46d7=>_0x1a46d7[_0x3a12a4(0x8b9)]===_0x365281[_0x3a12a4(0x8b9)]),!_0x16e8c1)throw this[_0x3a12a4(0x7a2)][_0x3a12a4(0x7a9)](this[_0x3a12a4(0x8ba)]+'\x20('+this[_0x3a12a4(0x664)]['wuid']+_0x3a12a4(0x3c0)+_0x365281[_0x3a12a4(0x8b9)]+_0x3a12a4(0x3e7)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x35dd50=await this['repository']['flow'][_0x3a12a4(0x63f)]({'where':{'_id':_0x16e8c1['_id']}});if(!_0x35dd50||!_0x35dd50[_0x3a12a4(0x733)]?.['includes'](this[_0x3a12a4(0x664)][_0x3a12a4(0x60f)]))throw this[_0x3a12a4(0x7a2)][_0x3a12a4(0x2c2)](this[_0x3a12a4(0x8ba)]+'\x20('+this[_0x3a12a4(0x664)]['wuid']+_0x3a12a4(0x332)+_0x16e8c1[_0x3a12a4(0x53e)]+_0x3a12a4(0x57a)),_0x2154a3=_0x3a12a4(0x724)+_0x16e8c1[_0x3a12a4(0x53e)]+_0x3a12a4(0x57a),new m(_0x2154a3);let _0x201c64=await this[_0x3a12a4(0x331)](_0x35dd50,_0x5e0805['jid'],_0x365281[_0x3a12a4(0x54f)]);if(_0x201c64){this['logger']['verbose'](this[_0x3a12a4(0x8ba)]+'\x20('+this[_0x3a12a4(0x664)]['wuid']+_0x3a12a4(0x7a6));let _0x2976a2=await this[_0x3a12a4(0x6de)](_0x201c64);return _0x2976a2&&await this[_0x3a12a4(0x33c)](_0x201c64,_0x2976a2),{'message':_0x3a12a4(0x3d1)+_0x365281['remoteJid']};}}catch(_0x307c23){if(this['logger'][_0x3a12a4(0x2c2)](this[_0x3a12a4(0x8ba)]+'\x20('+this[_0x3a12a4(0x664)][_0x3a12a4(0x60f)]+'):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20'+(_0x307c23 instanceof Error?_0x307c23[_0x3a12a4(0x923)]:JSON['stringify'](_0x307c23,null,0x2))),_0x2154a3=_0x307c23 instanceof Error?_0x307c23[_0x3a12a4(0x923)]:JSON[_0x3a12a4(0x5f3)](_0x307c23,null,0x2),_0x2154a3)throw new m(_0x3a12a4(0x55c)+_0x2154a3);}}async[a0_0x20331d(0x3a7)](_0x47a912,_0x4d38a5,_0x1b9aa0){const _0x2035e6=a0_0x20331d;let _0x132631=null;try{if(!this[_0x2035e6(0x246)]?.[_0x2035e6(0x2b6)]['enabled'])throw new m(_0x2035e6(0x493));if(this[_0x2035e6(0x7a2)][_0x2035e6(0x7a9)](this[_0x2035e6(0x8ba)]+'\x20('+this['instance'][_0x2035e6(0x60f)]+_0x2035e6(0x77c)),_0x4d38a5){let _0x215bd9=(await this['whatsappNumber']({'numbers':[_0x4d38a5]}))[0x0];if(!_0x215bd9[_0x2035e6(0x8f2)]&&!(0x0,w[_0x2035e6(0x776)])(_0x215bd9[_0x2035e6(0x461)])&&!_0x215bd9[_0x2035e6(0x461)]['includes'](_0x2035e6(0x3b3)))throw _0x132631=JSON['stringify'](_0x215bd9,null,0x2),new m(_0x215bd9);_0x4d38a5=_0x215bd9[_0x2035e6(0x461)];}else _0x4d38a5||(_0x4d38a5=(0x0,X['v4'])());let _0x352885=await this[_0x2035e6(0x402)]['flow'][_0x2035e6(0x63f)]({'where':{'_id':_0x47a912}});if(!_0x352885||!_0x352885[_0x2035e6(0x733)]?.[_0x2035e6(0x8eb)](this['instance'][_0x2035e6(0x60f)]))throw this[_0x2035e6(0x7a2)][_0x2035e6(0x2c2)](this[_0x2035e6(0x8ba)]+'\x20('+this[_0x2035e6(0x664)][_0x2035e6(0x60f)]+_0x2035e6(0x332)+_0x47a912+_0x2035e6(0x57a)),new m(_0x2035e6(0x724)+_0x47a912+_0x2035e6(0x57a));let _0x560c1a=await this['createConversationforStartFlow'](_0x352885,_0x4d38a5,null);if(_0x560c1a){this[_0x2035e6(0x7a2)][_0x2035e6(0x7a9)](this['instanceName']+'\x20('+this['instance'][_0x2035e6(0x60f)]+_0x2035e6(0x2a2));let _0x6c7968;if(_0x1b9aa0){let _0x306a13=_0x560c1a['chatLog'][_0x2035e6(0x64e)],_0x5504f4=this['flattenObject'](_0x1b9aa0);Object[_0x2035e6(0x2df)](_0x306a13,_0x5504f4),_0x560c1a[_0x2035e6(0x544)][_0x2035e6(0x64e)]=_0x306a13,_0x6c7968={'error':!0x1,'apiResponse':_0x1b9aa0};}let _0x5ef172=await this[_0x2035e6(0x6de)](_0x560c1a);return _0x5ef172&&await this[_0x2035e6(0x33c)](_0x560c1a,_0x5ef172),{'message':_0x2035e6(0x638)};}}catch(_0x27a43c){if(this['logger'][_0x2035e6(0x2c2)](this[_0x2035e6(0x8ba)]+'\x20('+this[_0x2035e6(0x664)][_0x2035e6(0x60f)]+_0x2035e6(0x2a5)+(_0x27a43c instanceof Error?_0x27a43c[_0x2035e6(0x923)]:JSON[_0x2035e6(0x5f3)](_0x27a43c,null,0x2))),_0x132631=_0x27a43c instanceof Error?_0x27a43c[_0x2035e6(0x923)]:JSON['stringify'](_0x27a43c,null,0x2),_0x132631)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x132631);}}async[a0_0x20331d(0x927)](_0x361f99){const _0x22e673=a0_0x20331d;try{let _0x112bea={'remoteJid':_0x361f99,'status':'open'},_0x5c476c={'status':_0x22e673(0x7b4)},_0x593a23=await this[_0x22e673(0x402)]['flowConversation']['updateMany'](_0x112bea,_0x5c476c,this[_0x22e673(0x664)][_0x22e673(0x60f)]);return this['logger'][_0x22e673(0x7a9)](this[_0x22e673(0x8ba)]+'\x20('+this[_0x22e673(0x664)][_0x22e673(0x60f)]+'):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.'),_0x593a23;}catch(_0x3648af){throw this[_0x22e673(0x7a2)][_0x22e673(0x2c2)](this[_0x22e673(0x8ba)]+'\x20('+this[_0x22e673(0x664)][_0x22e673(0x60f)]+_0x22e673(0x6eb)+_0x3648af[_0x22e673(0x923)]),_0x3648af;}}async['createConversationforStartFlow'](_0xd88877,_0x264605,_0x1ab971){const _0x4f7d9d=a0_0x20331d;this[_0x4f7d9d(0x7a2)][_0x4f7d9d(0x7a9)](this[_0x4f7d9d(0x8ba)]+'\x20('+this[_0x4f7d9d(0x664)][_0x4f7d9d(0x60f)]+'):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]'),await this['closeExistingConversations'](_0x264605);try{let _0x563c82=require(_0x4f7d9d(0x8d4))[_0x4f7d9d(0x920)],_0x4e43e7=Date[_0x4f7d9d(0x37f)](),_0x45d33b='start',_0x47929e={},_0x42a1ab={},_0x53f989=this[_0x4f7d9d(0x246)][_0x4f7d9d(0x550)][_0x4f7d9d(0x691)](_0x2ba8ff=>_0x2ba8ff[_0x4f7d9d(0x53e)]===_0xd88877[_0x4f7d9d(0x53e)]?.[_0x4f7d9d(0x27d)]()),_0x277891=_0x53f989?.[_0x4f7d9d(0x3fc)]??_0xd88877[_0x4f7d9d(0x3fc)]??0x0,_0x318485=_0x53f989?.[_0x4f7d9d(0x5b5)]??_0xd88877[_0x4f7d9d(0x5b5)]??!0x1,_0x3e26cd={'flowId':_0xd88877['_id'],..._0xd88877,'chatLog':null},_0x396904=await this[_0x4f7d9d(0x76b)](_0x3e26cd[_0x4f7d9d(0x5e3)]),_0x4eec57=await this[_0x4f7d9d(0x46a)](_0x264605),_0x4d20dc={..._0x396904,..._0x4eec57,'_remoteJid':_0x264605},_0x1cc914={'lastReceivedMessage':_0x47929e,'lastSendMessage':_0x42a1ab,'lastBlockId':_0x45d33b,'lastCondition':!0x0,'realVariables':_0x4d20dc};_0x3e26cd['chatLog']=_0x1cc914,_0x3e26cd[_0x4f7d9d(0x544)][_0x4f7d9d(0x64e)]={..._0x4d20dc,..._0x1ab971},delete _0x3e26cd[_0x4f7d9d(0x53e)],_0x3e26cd[_0x4f7d9d(0x53e)]=new _0x563c82(),_0x3e26cd[_0x4f7d9d(0x8f8)]=_0x4e43e7,_0x3e26cd[_0x4f7d9d(0x8aa)]='open',_0x3e26cd['remoteJid']=_0x264605,_0x3e26cd['minutesToClose']=_0x277891,_0x3e26cd['readMessages']=_0x318485,_0x3e26cd[_0x4f7d9d(0x53e)]=_0xd88877[_0x4f7d9d(0x53e)];let _0x381d2d=await this[_0x4f7d9d(0x402)]['flowConversation'][_0x4f7d9d(0x2d5)](_0x3e26cd[_0x4f7d9d(0x53e)],_0x3e26cd,this['instance'][_0x4f7d9d(0x60f)]);return this[_0x4f7d9d(0x7a2)][_0x4f7d9d(0x7a9)](this['instanceName']+'\x20('+this[_0x4f7d9d(0x664)][_0x4f7d9d(0x60f)]+_0x4f7d9d(0x42a)),_0x381d2d?_0x3e26cd:null;}catch(_0xf19ef0){let _0x52b3d6=_0x4f7d9d(0x211),_0x112ad5=_0xf19ef0 instanceof Error?_0xf19ef0[_0x4f7d9d(0x923)]:typeof _0xf19ef0==_0x4f7d9d(0x4bd)?JSON[_0x4f7d9d(0x5f3)](_0xf19ef0):_0xf19ef0,_0x157319=_0x52b3d6+':\x20'+_0x112ad5;throw this[_0x4f7d9d(0x7a2)][_0x4f7d9d(0x2c2)](this[_0x4f7d9d(0x8ba)]+'\x20('+this['instance']['wuid']+_0x4f7d9d(0x51c)+_0x157319),new m(_0x157319);}}async[a0_0x20331d(0x441)](_0x4709dd){const _0x43d7da=a0_0x20331d;try{this[_0x43d7da(0x7a2)][_0x43d7da(0x7a9)](this[_0x43d7da(0x8ba)]+'\x20('+this[_0x43d7da(0x664)]['wuid']+'):\x20Buscando\x20conversa...'),this[_0x43d7da(0x7a2)][_0x43d7da(0x7a9)](this[_0x43d7da(0x8ba)]+'\x20('+this[_0x43d7da(0x664)][_0x43d7da(0x60f)]+_0x43d7da(0x2fe)+_0x4709dd);let _0x3045c0={'where':{'_id':_0x4709dd}};return await this[_0x43d7da(0x402)][_0x43d7da(0x444)]['findOne'](_0x3045c0,this[_0x43d7da(0x664)][_0x43d7da(0x60f)]);}catch(_0x1e9b38){let _0x481226=_0x43d7da(0x6d4),_0x804925=_0x1e9b38 instanceof Error?_0x1e9b38[_0x43d7da(0x923)]:typeof _0x1e9b38=='object'?JSON[_0x43d7da(0x5f3)](_0x1e9b38):_0x1e9b38,_0x34d534=_0x481226+':\x20'+_0x804925;throw this['logger'][_0x43d7da(0x2c2)](this[_0x43d7da(0x8ba)]+'\x20('+this[_0x43d7da(0x664)][_0x43d7da(0x60f)]+_0x43d7da(0x51c)+_0x34d534),new m(_0x34d534);}}async[a0_0x20331d(0x578)](_0x37ae64){const _0x2ca921=a0_0x20331d;try{return this[_0x2ca921(0x7a2)][_0x2ca921(0x7a9)](this['instanceName']+'\x20('+this[_0x2ca921(0x664)][_0x2ca921(0x60f)]+_0x2ca921(0x473)),await this[_0x2ca921(0x402)][_0x2ca921(0x444)]['find'](_0x37ae64,this[_0x2ca921(0x664)][_0x2ca921(0x60f)]);}catch(_0x100863){let _0x125d10=_0x2ca921(0x317),_0x36f811=_0x100863 instanceof Error?_0x100863[_0x2ca921(0x923)]:typeof _0x100863==_0x2ca921(0x4bd)?JSON['stringify'](_0x100863):_0x100863,_0x285e8f=_0x125d10+':\x20'+_0x36f811;throw this[_0x2ca921(0x7a2)][_0x2ca921(0x2c2)](this[_0x2ca921(0x8ba)]+'\x20('+this[_0x2ca921(0x664)][_0x2ca921(0x60f)]+_0x2ca921(0x51c)+_0x285e8f),new m(_0x285e8f);}}async[a0_0x20331d(0x27e)](_0x50c15c){const _0xd9ea9d=a0_0x20331d;try{return this[_0xd9ea9d(0x7a2)][_0xd9ea9d(0x7a9)](this['instanceName']+'\x20('+this[_0xd9ea9d(0x664)][_0xd9ea9d(0x60f)]+_0xd9ea9d(0x4b3)),this[_0xd9ea9d(0x7a2)][_0xd9ea9d(0x7a9)](this['instanceName']+'\x20('+this[_0xd9ea9d(0x664)]['wuid']+'):\x20Query\x20params:'+_0x50c15c),(await this[_0xd9ea9d(0x402)][_0xd9ea9d(0x444)][_0xd9ea9d(0x24c)]({'where':{'_id':_0x50c15c[_0xd9ea9d(0x53e)]}},this[_0xd9ea9d(0x664)][_0xd9ea9d(0x60f)]))[_0xd9ea9d(0x557)]===0x0?{'message':_0xd9ea9d(0x7b1)}:{'message':_0xd9ea9d(0x802)};}catch(_0x9445da){let _0x579e04=_0xd9ea9d(0x6ff),_0x2858e5=_0x9445da instanceof Error?_0x9445da[_0xd9ea9d(0x923)]:typeof _0x9445da==_0xd9ea9d(0x4bd)?JSON[_0xd9ea9d(0x5f3)](_0x9445da):_0x9445da,_0x2d3536=_0x579e04+':\x20'+_0x2858e5;throw this[_0xd9ea9d(0x7a2)][_0xd9ea9d(0x2c2)](this['instanceName']+'\x20('+this['instance'][_0xd9ea9d(0x60f)]+_0xd9ea9d(0x51c)+_0x2d3536),new m(_0x2d3536);}}async[a0_0x20331d(0x85d)](_0x98d136){const _0x4cfb1a=a0_0x20331d;try{let {_id:_0x4966ee,chatLog:_0x19aa3e,status:_0x193488}=_0x98d136;if(!_0x4966ee)return{'message':_0x4cfb1a(0x3d3)};let _0x3079f0={};if(_0x193488!==void 0x0&&(_0x3079f0[_0x4cfb1a(0x8aa)]=_0x193488),Object['keys'](_0x3079f0)['length']===0x0)return{'message':'Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.'};let _0x593b49=await this['repository'][_0x4cfb1a(0x444)][_0x4cfb1a(0x2d5)](_0x4966ee,_0x3079f0,this[_0x4cfb1a(0x664)][_0x4cfb1a(0x60f)]);return _0x593b49||{'message':_0x4cfb1a(0x85e)};}catch(_0x58ae67){let _0x13e44c=_0x4cfb1a(0x5a2),_0x2bdb9d=_0x58ae67 instanceof Error?_0x58ae67[_0x4cfb1a(0x923)]:typeof _0x58ae67==_0x4cfb1a(0x4bd)?JSON[_0x4cfb1a(0x5f3)](_0x58ae67):_0x58ae67,_0x53e06a=_0x13e44c+':\x20'+_0x2bdb9d;throw this[_0x4cfb1a(0x7a2)]['error'](this[_0x4cfb1a(0x8ba)]+'\x20('+this['instance']['wuid']+_0x4cfb1a(0x51c)+_0x53e06a),new m(_0x53e06a);}}async[a0_0x20331d(0x71f)](_0x3db571){const _0x516fd8=a0_0x20331d;try{_0x3db571[_0x516fd8(0x53e)]=this[_0x516fd8(0x205)](_0x3db571[_0x516fd8(0x53e)]);let _0x1c154b=await this[_0x516fd8(0x402)][_0x516fd8(0x617)][_0x516fd8(0x63f)]({'where':{'_id':_0x3db571[_0x516fd8(0x53e)]}},this['instance'][_0x516fd8(0x60f)]);if(!_0x1c154b)throw new m(_0x516fd8(0x648));let {_id:_0x5a99ff,leadInfo:_0x4f5f01}=_0x3db571;if(!_0x5a99ff)throw new Error(_0x516fd8(0x755));if(_0x3db571[_0x516fd8(0x65e)]==='all')return await this['deleteChat'](_0x3db571[_0x516fd8(0x53e)]),await this['repository'][_0x516fd8(0x617)][_0x516fd8(0x65e)]({'where':{'_id':_0x3db571[_0x516fd8(0x53e)]}},this['instance'][_0x516fd8(0x60f)]),await this[_0x516fd8(0x402)][_0x516fd8(0x923)][_0x516fd8(0x65e)]({'where':{'key':{'remoteJid':_0x3db571[_0x516fd8(0x53e)]}}},this['instance'][_0x516fd8(0x60f)]),_0x3db571=await this[_0x516fd8(0x402)][_0x516fd8(0x617)]['updateOne']({'where':{'_id':_0x3db571[_0x516fd8(0x53e)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x516fd8(0x664)]['wuid']),q(this[_0x516fd8(0x8ba)],_0x516fd8(0x28b),{'chat':_0x3db571}),{'message':_0x516fd8(0x597)};if(_0x3db571[_0x516fd8(0x65e)]==='messages')return await this[_0x516fd8(0x402)][_0x516fd8(0x923)][_0x516fd8(0x65e)]({'where':{'key':{'remoteJid':_0x3db571[_0x516fd8(0x53e)]}}},this[_0x516fd8(0x664)][_0x516fd8(0x60f)]),_0x3db571=await this[_0x516fd8(0x402)][_0x516fd8(0x617)][_0x516fd8(0x2d5)]({'where':{'_id':_0x3db571[_0x516fd8(0x53e)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x516fd8(0x664)][_0x516fd8(0x60f)]),q(this[_0x516fd8(0x8ba)],'chats',{'chat':_0x3db571}),{'message':_0x516fd8(0x602)};let _0xdeeed3=(_0x4f2791,_0x512486,_0x525e4f)=>{const _0x3dbc0e=_0x516fd8;_0x4f2791&&_0x525e4f[_0x3dbc0e(0x22b)](_0x28d34d=>{const _0x1d5554=_0x3dbc0e;_0x4f2791[_0x28d34d]!==void 0x0&&(_0x512486[_0x1d5554(0x5bb)+_0x28d34d]=_0x4f2791[_0x28d34d]);});},_0x516300={};if(_0x516fd8(0x60a)in _0x3db571&&(this[_0x516fd8(0x7a2)][_0x516fd8(0x7a9)](this[_0x516fd8(0x8ba)]+'\x20('+this[_0x516fd8(0x664)][_0x516fd8(0x60f)]+_0x516fd8(0x7b2)+_0x3db571[_0x516fd8(0x53e)]),_0x3db571[_0x516fd8(0x60a)]=_0x3db571[_0x516fd8(0x60a)]===0x0?null:-0x1,await this[_0x516fd8(0x8a4)]['chatModify']({'mute':_0x3db571[_0x516fd8(0x60a)]},_0x3db571[_0x516fd8(0x53e)]),_0x516300[_0x516fd8(0x60a)]=Number(_0x3db571[_0x516fd8(0x60a)])),_0x4f5f01&&(_0xdeeed3(_0x4f5f01,_0x516300,[_0x516fd8(0x798),_0x516fd8(0x928),_0x516fd8(0x619),_0x516fd8(0x506),_0x516fd8(0x8aa),'notas',_0x516fd8(0x931),'atendimentoAberto',_0x516fd8(0x6d3),_0x516fd8(0x820),_0x516fd8(0x3e9)]),Array[_0x516fd8(0x3f2)](_0x4f5f01['customFields'])&&(_0x516300[_0x516fd8(0x71d)]=_0x4f5f01[_0x516fd8(0x6fb)][_0x516fd8(0x41b)](_0x4defa6=>({'_id':_0x4defa6[_0x516fd8(0x53e)],'value':_0x4defa6[_0x516fd8(0x3c3)]}))),_0x3db571[_0x516fd8(0x766)][_0x516fd8(0x820)]!==void 0x0)){let _0x4abd7b=await this[_0x516fd8(0x402)]['label']['find']({'where':{}},this[_0x516fd8(0x664)][_0x516fd8(0x60f)]),_0x2c7060=new Set(_0x3db571[_0x516fd8(0x766)][_0x516fd8(0x820)]||[]),_0x23d57c=new Set(_0x3db571[_0x516fd8(0x766)]['etiquetas']),_0xde15ee=new Set(_0x4abd7b[_0x516fd8(0x41b)](_0x5133ad=>_0x5133ad['_id'])),_0x262ed4=[..._0x23d57c][_0x516fd8(0x625)](_0x2be070=>!_0x2c7060[_0x516fd8(0x718)](_0x2be070)&&_0xde15ee[_0x516fd8(0x718)](_0x2be070)),_0x27ba75=[..._0x2c7060][_0x516fd8(0x625)](_0x275924=>!_0x23d57c[_0x516fd8(0x718)](_0x275924));if(_0x516300[_0x516fd8(0x437)]=[..._0x2c7060],_0x1c154b&&!_0x1c154b['imported']){for(let _0xaf62de of _0x262ed4)await this[_0x516fd8(0x54a)](_0xaf62de,_0x3db571[_0x516fd8(0x53e)]),_0x2c7060[_0x516fd8(0x783)](_0xaf62de);for(let _0x2a6634 of _0x27ba75)await this[_0x516fd8(0x58a)](_0x2a6634,_0x3db571[_0x516fd8(0x53e)]),_0x2c7060['delete'](_0x2a6634);}}if(_0x3db571[_0x516fd8(0x906)]!==void 0x0&&(_0x516300[_0x516fd8(0x906)]=Number(_0x3db571[_0x516fd8(0x906)])),Object['keys'](_0x516300)['length']===0x0)throw new Error('Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.');let _0x5cb2ee=await this[_0x516fd8(0x402)][_0x516fd8(0x617)][_0x516fd8(0x2d5)]({'where':{'_id':_0x3db571[_0x516fd8(0x53e)]}},_0x516300,this[_0x516fd8(0x664)]['wuid']);return _0x5cb2ee&&q(this[_0x516fd8(0x8ba)],'chats',{'chat':_0x5cb2ee}),_0x5cb2ee?(this[_0x516fd8(0x7a2)][_0x516fd8(0x7a9)](this[_0x516fd8(0x8ba)]+'\x20('+this[_0x516fd8(0x664)]['wuid']+_0x516fd8(0x51c)+JSON[_0x516fd8(0x5f3)](_0x5cb2ee,null,0x2)),_0x5cb2ee):{'message':'Nenhum\x20chat\x20encontrado\x20para\x20editar.'};}catch(_0x175196){let _0x19bde3=_0x516fd8(0x457),_0xc8ec8d=_0x175196 instanceof Error?_0x175196[_0x516fd8(0x923)]:typeof _0x175196==_0x516fd8(0x4bd)?JSON[_0x516fd8(0x5f3)](_0x175196):_0x175196,_0x2af2bd=_0x19bde3+':\x20'+_0xc8ec8d;throw this['logger'][_0x516fd8(0x2c2)](this['instanceName']+'\x20('+this[_0x516fd8(0x664)][_0x516fd8(0x60f)]+_0x516fd8(0x51c)+_0x2af2bd),new m(_0x2af2bd);}}async['AddChatLabel'](_0x569917,_0x31add0){const _0x392b0e=a0_0x20331d;try{await this[_0x392b0e(0x8a4)][_0x392b0e(0x5c3)](_0x31add0,_0x569917),this[_0x392b0e(0x7a2)][_0x392b0e(0x7f7)](this[_0x392b0e(0x8ba)]+'\x20('+this[_0x392b0e(0x664)][_0x392b0e(0x60f)]+_0x392b0e(0x519)+_0x569917+_0x392b0e(0x6bf)+_0x31add0+_0x392b0e(0x739));}catch(_0x58cedf){this[_0x392b0e(0x7a2)][_0x392b0e(0x2c2)](_0x392b0e(0x21a)+_0x569917+_0x392b0e(0x508)+_0x31add0+':\x20'+_0x58cedf);}}async[a0_0x20331d(0x58a)](_0x558723,_0x1e1b04){const _0x3ac8d6=a0_0x20331d;try{await this[_0x3ac8d6(0x8a4)][_0x3ac8d6(0x3d0)](_0x1e1b04,_0x558723),this[_0x3ac8d6(0x7a2)][_0x3ac8d6(0x7f7)](this['instanceName']+'\x20('+this[_0x3ac8d6(0x664)]['wuid']+_0x3ac8d6(0x519)+_0x558723+_0x3ac8d6(0x7a5)+_0x1e1b04+_0x3ac8d6(0x739));}catch(_0x1469d0){this[_0x3ac8d6(0x7a2)]['error'](_0x3ac8d6(0x698)+_0x558723+'\x20do\x20chat\x20'+_0x1e1b04+':\x20'+_0x1469d0);}}async[a0_0x20331d(0x440)](_0x47b54b){const _0x3ae493=a0_0x20331d;try{let _0x8c5860=await this['repository'][_0x3ae493(0x91d)]['findOrCreate'](this[_0x3ae493(0x664)][_0x3ae493(0x60f)]),_0x3ebe9c=_0x47b54b[_0x3ae493(0x53e)]?_0x8c5860[_0x3ae493(0x319)][_0x3ae493(0x63e)](_0x4c5f69=>_0x4c5f69[_0x3ae493(0x53e)]===_0x47b54b[_0x3ae493(0x53e)]):-0x1;if(_0x47b54b[_0x3ae493(0x65e)]&&_0x3ebe9c>-0x1)_0x8c5860[_0x3ae493(0x319)]['splice'](_0x3ebe9c,0x1);else{if(_0x3ebe9c>-0x1){let _0x49b228=_0x8c5860[_0x3ae493(0x319)][_0x3ebe9c];_0x47b54b[_0x3ae493(0x31c)]&&(_0x49b228[_0x3ae493(0x31c)]=_0x47b54b['fone']),_0x47b54b[_0x3ae493(0x8b9)]&&(_0x49b228[_0x3ae493(0x8b9)]=_0x47b54b[_0x3ae493(0x8b9)]),_0x47b54b['email']&&(_0x49b228[_0x3ae493(0x619)]=_0x47b54b[_0x3ae493(0x619)]),_0x47b54b['role']&&(_0x49b228[_0x3ae493(0x2a6)]=_0x47b54b['role']);}else _0x8c5860[_0x3ae493(0x319)]['push']({'_id':_0x47b54b[_0x3ae493(0x53e)]||new fe[(_0x3ae493(0x42b))]['Types']['ObjectId']()['toString'](),'fone':_0x47b54b[_0x3ae493(0x31c)],'name':_0x47b54b[_0x3ae493(0x8b9)],'email':_0x47b54b['email'],'role':_0x47b54b[_0x3ae493(0x2a6)]});}let _0x3acc67={'agents':_0x8c5860[_0x3ae493(0x319)]},_0x236049=await this[_0x3ae493(0x402)][_0x3ae493(0x91d)]['update'](_0x3acc67,this[_0x3ae493(0x664)]['wuid']);return this['AutomateSystem']=_0x236049,this[_0x3ae493(0x7a2)]['verbose'](this[_0x3ae493(0x8ba)]+'\x20('+this[_0x3ae493(0x664)]['wuid']+_0x3ae493(0x6c8)),this[_0x3ae493(0x7a2)][_0x3ae493(0x7a9)](this[_0x3ae493(0x8ba)]+'\x20('+this['instance']['wuid']+'):\x20'+this[_0x3ae493(0x246)]),_0x236049;}catch(_0x3f1184){let _0xb9d99d='Erro\x20ao\x20editar\x20agentes',_0x33fa42=_0x3f1184 instanceof Error?_0x3f1184[_0x3ae493(0x923)]:typeof _0x3f1184==_0x3ae493(0x4bd)?JSON['stringify'](_0x3f1184):_0x3f1184,_0x434993=_0xb9d99d+':\x20'+_0x33fa42;throw this[_0x3ae493(0x7a2)]['error'](this[_0x3ae493(0x8ba)]+'\x20('+this[_0x3ae493(0x664)][_0x3ae493(0x60f)]+_0x3ae493(0x51c)+_0x434993),new m(_0x434993);}}async[a0_0x20331d(0x615)](_0x2b3cc2){const _0x1ca737=a0_0x20331d;try{let _0x40eec2=await this['repository'][_0x1ca737(0x91d)]['findOrCreate'](this[_0x1ca737(0x664)][_0x1ca737(0x60f)]),_0x3bb1fd=_0x2b3cc2['_id']?_0x40eec2[_0x1ca737(0x6fb)][_0x1ca737(0x63e)](_0x28ee36=>_0x28ee36['_id']===_0x2b3cc2[_0x1ca737(0x53e)]):-0x1,_0x5bd011=!0x1,_0x2d139c=_0x40eec2[_0x1ca737(0x6fb)][_0x1ca737(0x270)](_0x1dccd3=>_0x1dccd3[_0x1ca737(0x1e4)]===_0x2b3cc2['order']);if(_0x2b3cc2[_0x1ca737(0x65e)]&&_0x3bb1fd>-0x1)_0x40eec2[_0x1ca737(0x6fb)][_0x1ca737(0x496)](_0x3bb1fd,0x1),_0x5bd011=!0x0;else{if(_0x3bb1fd>-0x1){if(_0x40eec2['customFields'][_0x1ca737(0x270)](_0x269eea=>_0x269eea['name']===_0x2b3cc2[_0x1ca737(0x8b9)]&&_0x269eea[_0x1ca737(0x53e)]!==_0x2b3cc2[_0x1ca737(0x53e)]))throw new Error(_0x1ca737(0x587));let _0x299a5a=_0x40eec2[_0x1ca737(0x6fb)][_0x3bb1fd];_0x2b3cc2[_0x1ca737(0x1e4)]&&(_0x2d139c||!Number[_0x1ca737(0x4a7)](_0x2b3cc2[_0x1ca737(0x1e4)]))&&(_0x299a5a[_0x1ca737(0x1e4)]=_0x2b3cc2[_0x1ca737(0x1e4)],_0x5bd011=!0x0),_0x2b3cc2[_0x1ca737(0x8b9)]&&(_0x299a5a[_0x1ca737(0x8b9)]=_0x2b3cc2['name']);}else{if(_0x40eec2[_0x1ca737(0x6fb)][_0x1ca737(0x270)](_0x11968f=>_0x11968f['name']===_0x2b3cc2[_0x1ca737(0x8b9)]&&_0x11968f[_0x1ca737(0x53e)]!==_0x2b3cc2['_id']))throw new Error(_0x1ca737(0x587));_0x40eec2[_0x1ca737(0x6fb)]['push']({'_id':_0x2b3cc2[_0x1ca737(0x53e)]||new fe[(_0x1ca737(0x42b))][(_0x1ca737(0x83f))]['ObjectId']()['toString'](),'order':_0x2b3cc2[_0x1ca737(0x1e4)],'name':_0x2b3cc2['name']}),_0x5bd011=!0x0;}}if(_0x5bd011){_0x40eec2[_0x1ca737(0x6fb)][_0x1ca737(0x4b4)]((_0x272dc8,_0x39bec1)=>_0x272dc8[_0x1ca737(0x1e4)]>_0x39bec1[_0x1ca737(0x1e4)]?0x1:_0x39bec1['order']>_0x272dc8[_0x1ca737(0x1e4)]?-0x1:0x0);for(let _0x1df1d8=0x0;_0x1df1d8<_0x40eec2[_0x1ca737(0x6fb)][_0x1ca737(0x786)];_0x1df1d8++)_0x40eec2[_0x1ca737(0x6fb)][_0x1df1d8][_0x1ca737(0x1e4)]=_0x1df1d8+0x1;}let _0x39d920=await this[_0x1ca737(0x402)]['automateSystem'][_0x1ca737(0x3fd)](_0x40eec2,this['instance'][_0x1ca737(0x60f)]);return this['AutomateSystem']=_0x39d920,this[_0x1ca737(0x7a2)][_0x1ca737(0x7a9)](this[_0x1ca737(0x8ba)]+'\x20('+this[_0x1ca737(0x664)][_0x1ca737(0x60f)]+_0x1ca737(0x547)),this[_0x1ca737(0x7a2)][_0x1ca737(0x7a9)](this[_0x1ca737(0x8ba)]+'\x20('+this[_0x1ca737(0x664)][_0x1ca737(0x60f)]+'):\x20'+this[_0x1ca737(0x246)]),_0x39d920;}catch(_0x129434){let _0x3bf204='Erro\x20ao\x20tentar\x20updateCustomFields',_0x3ee67a=_0x129434 instanceof Error?_0x129434[_0x1ca737(0x923)]:typeof _0x129434=='object'?JSON[_0x1ca737(0x5f3)](_0x129434):_0x129434,_0x177f00=_0x3bf204+':\x20'+_0x3ee67a;throw this[_0x1ca737(0x7a2)][_0x1ca737(0x2c2)](this[_0x1ca737(0x8ba)]+'\x20('+this[_0x1ca737(0x664)]['wuid']+_0x1ca737(0x51c)+_0x177f00),new m(_0x177f00);}}async['updateAutoCompleteMessages'](_0x53b809){const _0x4e8937=a0_0x20331d;try{let _0x54aabd=await this[_0x4e8937(0x402)][_0x4e8937(0x91d)]['findOrCreate'](this[_0x4e8937(0x664)][_0x4e8937(0x60f)]),_0x29c461=_0x54aabd?.[_0x4e8937(0x8c5)]?.[_0x4e8937(0x63e)](_0x5c3b8d=>_0x5c3b8d[_0x4e8937(0x53e)]===_0x53b809?.[_0x4e8937(0x53e)]);if(_0x53b809?.[_0x4e8937(0x65e)])_0x29c461>-0x1&&_0x54aabd?.[_0x4e8937(0x8c5)]?.[_0x4e8937(0x496)](_0x29c461,0x1);else{if(_0x29c461>-0x1){let _0x363ed2=_0x54aabd['autoCompleteMessages'][_0x29c461];_0x363ed2[_0x4e8937(0x1e4)]=_0x53b809?.[_0x4e8937(0x1e4)]||_0x363ed2[_0x4e8937(0x1e4)],_0x363ed2[_0x4e8937(0x344)]=_0x53b809?.[_0x4e8937(0x344)]||_0x363ed2[_0x4e8937(0x344)],_0x363ed2['message']=_0x53b809?.[_0x4e8937(0x923)]||_0x363ed2['message'];}else{let _0x54ff94={'_id':_0x53b809?.[_0x4e8937(0x53e)]||new fe[(_0x4e8937(0x42b))][(_0x4e8937(0x83f))]['ObjectId']()['toString'](),'order':_0x53b809?.[_0x4e8937(0x1e4)],'command':_0x53b809?.[_0x4e8937(0x344)],'message':_0x53b809?.[_0x4e8937(0x923)]};_0x54aabd?.['autoCompleteMessages']?.[_0x4e8937(0x4e8)](_0x54ff94);}}_0x54aabd?.[_0x4e8937(0x8c5)]?.[_0x4e8937(0x4b4)]((_0x1fda31,_0x53c43e)=>_0x1fda31[_0x4e8937(0x1e4)]-_0x53c43e[_0x4e8937(0x1e4)]);let _0x22978c=await this[_0x4e8937(0x402)][_0x4e8937(0x91d)][_0x4e8937(0x3fd)](_0x54aabd,this[_0x4e8937(0x664)][_0x4e8937(0x60f)]);return this[_0x4e8937(0x246)]=_0x22978c,this[_0x4e8937(0x7a2)][_0x4e8937(0x7a9)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4e8937(0x547)),_0x22978c;}catch(_0x52b94f){let _0x4307cd=_0x4e8937(0x87a),_0x46169a=_0x52b94f instanceof Error?_0x52b94f[_0x4e8937(0x923)]:typeof _0x52b94f==_0x4e8937(0x4bd)?JSON[_0x4e8937(0x5f3)](_0x52b94f):_0x52b94f,_0x1d6521=_0x4307cd+':\x20'+_0x46169a;throw this['logger'][_0x4e8937(0x2c2)](this[_0x4e8937(0x8ba)]+'\x20('+this['instance']['wuid']+'):\x20'+_0x1d6521),new m(_0x1d6521);}}async[a0_0x20331d(0x82e)](_0x45feb8){const _0x31f2ce=a0_0x20331d;try{let _0x3af15c=await this[_0x31f2ce(0x402)][_0x31f2ce(0x91d)][_0x31f2ce(0x81c)](this['instance'][_0x31f2ce(0x60f)]);if(!_0x3af15c)throw new Error(_0x31f2ce(0x3c6));let _0x49d627={'_id':_0x3af15c[_0x31f2ce(0x53e)],'flowConfig':{'enabled':_0x45feb8[_0x31f2ce(0x349)]??_0x3af15c[_0x31f2ce(0x2b6)]['enabled'],'ignoreGroups':_0x45feb8[_0x31f2ce(0x297)]??_0x3af15c['flowConfig'][_0x31f2ce(0x297)],'stopConversation':_0x45feb8[_0x31f2ce(0x2ff)]['trim']()??_0x3af15c[_0x31f2ce(0x2b6)]['stopConversation'][_0x31f2ce(0x291)](),'stopMinutes':_0x45feb8[_0x31f2ce(0x4e4)]??_0x3af15c[_0x31f2ce(0x2b6)][_0x31f2ce(0x4e4)],'stopWhenYouSendMsg':_0x45feb8[_0x31f2ce(0x50f)]??_0x3af15c[_0x31f2ce(0x2b6)][_0x31f2ce(0x50f)]}},_0x5b02b6=await this[_0x31f2ce(0x402)][_0x31f2ce(0x91d)]['update'](_0x49d627,this[_0x31f2ce(0x664)][_0x31f2ce(0x60f)]);return this['AutomateSystem']=_0x5b02b6,this[_0x31f2ce(0x7a2)][_0x31f2ce(0x7a9)](this['instanceName']+'\x20('+this[_0x31f2ce(0x664)][_0x31f2ce(0x60f)]+_0x31f2ce(0x6c8)),this[_0x31f2ce(0x7a2)][_0x31f2ce(0x7a9)](this['instanceName']+'\x20('+this[_0x31f2ce(0x664)]['wuid']+_0x31f2ce(0x51c)+this['AutomateSystem']),setTimeout(()=>this[_0x31f2ce(0x835)](),0x7d0),_0x5b02b6;}catch(_0x59a5c3){let _0x1faf8a='Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos',_0x18ea80=_0x59a5c3 instanceof Error?_0x59a5c3['message']:typeof _0x59a5c3==_0x31f2ce(0x4bd)?JSON['stringify'](_0x59a5c3):_0x59a5c3,_0x19b9ec=_0x1faf8a+':\x20'+_0x18ea80;throw this[_0x31f2ce(0x7a2)]['error'](this[_0x31f2ce(0x8ba)]+'\x20('+this[_0x31f2ce(0x664)]['wuid']+_0x31f2ce(0x51c)+_0x19b9ec),new m(_0x19b9ec);}}async[a0_0x20331d(0x3df)](){const _0x2b28f0=a0_0x20331d;try{let _0x5a85d4=await this[_0x2b28f0(0x402)]['automateSystem'][_0x2b28f0(0x81c)](this[_0x2b28f0(0x664)][_0x2b28f0(0x60f)]);return this[_0x2b28f0(0x246)]=_0x5a85d4,_0x5a85d4;}catch(_0x4eb8af){let _0x2d535a=_0x2b28f0(0x6ec),_0x311232=_0x4eb8af instanceof Error?_0x4eb8af['message']:typeof _0x4eb8af==_0x2b28f0(0x4bd)?JSON[_0x2b28f0(0x5f3)](_0x4eb8af):_0x4eb8af,_0xa17c49=_0x2d535a+':\x20'+_0x311232;throw this[_0x2b28f0(0x7a2)][_0x2b28f0(0x2c2)](this[_0x2b28f0(0x8ba)]+'\x20('+this['instance'][_0x2b28f0(0x60f)]+_0x2b28f0(0x51c)+_0xa17c49),new m(_0xa17c49);}}async['setRestartTimeout'](){const _0x35311e=a0_0x20331d;await this['restartMutex'][_0x35311e(0x830)](async()=>{const _0x5c73a=_0x35311e;this[_0x5c73a(0x664)][_0x5c73a(0x352)][_0x5c73a(0x796)]&&clearTimeout(this[_0x5c73a(0x664)][_0x5c73a(0x352)][_0x5c73a(0x796)]),this[_0x5c73a(0x664)][_0x5c73a(0x352)]['timeout']=setTimeout(()=>{this['checkAndRestartProcess']();},0x2*0x3c*0x3e8+0x14*0x3e8);});}async['checkAndRestartProcess'](){const _0x413ffa=a0_0x20331d;Date[_0x413ffa(0x37f)]()-this[_0x413ffa(0x664)]['ScheduleMessage'][_0x413ffa(0x7f1)]>=0x1d4c0&&(this[_0x413ffa(0x7a2)][_0x413ffa(0x7a9)](this[_0x413ffa(0x8ba)]+'\x20('+this[_0x413ffa(0x664)]['wuid']+_0x413ffa(0x81d)),this[_0x413ffa(0x664)][_0x413ffa(0x352)][_0x413ffa(0x4df)]=null,this[_0x413ffa(0x664)]['ScheduleMessage'][_0x413ffa(0x7f1)]=0x0,this[_0x413ffa(0x664)][_0x413ffa(0x352)]['delayMessage']=0x0,this['processUUID']=null,await this['scheduleNextCheck']());}async[a0_0x20331d(0x835)](){const _0x5c4b46=a0_0x20331d;await this[_0x5c4b46(0x70d)][_0x5c4b46(0x830)](async()=>{const _0x9460ef=_0x5c4b46;let _0x3da917=!0x1;this[_0x9460ef(0x5ab)]=[],this[_0x9460ef(0x7fa)]=(0x0,X['v4'])(),await this[_0x9460ef(0x852)]();let _0xc69a58=()=>{const _0x4b67bf=_0x9460ef;this[_0x4b67bf(0x7a2)][_0x4b67bf(0x365)](this[_0x4b67bf(0x8ba)]+'\x20('+this[_0x4b67bf(0x664)]['wuid']+_0x4b67bf(0x741)+this[_0x4b67bf(0x664)][_0x4b67bf(0x352)][_0x4b67bf(0x4df)]?.['_id']+_0x4b67bf(0x503));},_0x51d8a0=async()=>{const _0x1357b9=_0x9460ef;this['logger']['warn'](this[_0x1357b9(0x8ba)]+'\x20('+this['instance'][_0x1357b9(0x60f)]+_0x1357b9(0x4a2));let _0x37c303=new Date(Date[_0x1357b9(0x37f)]()-0xc*0x3c*0x3c*0x3e8),_0x4b3494={'where':{'status':{'$in':[_0x1357b9(0x229),_0x1357b9(0x774)]},'$or':[{'when':{'$lte':new Date(),'$gte':_0x37c303}},{'when':0x0}]}},_0x147166=await this[_0x1357b9(0x402)][_0x1357b9(0x35b)][_0x1357b9(0x691)](_0x4b3494,this[_0x1357b9(0x664)]['wuid']);return this[_0x1357b9(0x7a2)][_0x1357b9(0x365)](this['instanceName']+'\x20('+this[_0x1357b9(0x664)][_0x1357b9(0x60f)]+_0x1357b9(0x24b)+_0x147166[_0x1357b9(0x786)]),_0x147166;},_0x2cfa29=()=>this[_0x9460ef(0x5ab)][_0x9460ef(0x786)]===0x0?null:this[_0x9460ef(0x5ab)]['reduce']((_0x1c6327,_0x2d446f)=>(_0x1c6327[_0x9460ef(0x1e4)]??Number[_0x9460ef(0x72a)])<(_0x2d446f[_0x9460ef(0x1e4)]??Number['MAX_SAFE_INTEGER'])?_0x1c6327:_0x2d446f,this[_0x9460ef(0x5ab)][0x0]),_0x24595b=async _0x3a5a54=>{const _0x283783=_0x9460ef;let _0x561925=Math[_0x283783(0x60b)](Math[_0x283783(0x636)]()*0x1389)+0xbb8;for(let _0x2b1d3b of _0x3a5a54){let _0x6c82fc={'_id':_0x2b1d3b[_0x283783(0x53e)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x283783(0x37f)]()-0x2710}}]},_0x31feb9={'startSend':Date[_0x283783(0x37f)](),'processUUID':this[_0x283783(0x7fa)],'status':_0x283783(0x774)};if(!await this[_0x283783(0x402)][_0x283783(0x35b)]['updateOne'](_0x6c82fc,_0x31feb9,this['instance']['wuid']))return;if(!this['instance'][_0x283783(0x352)][_0x283783(0x397)]){this[_0x283783(0x7a2)][_0x283783(0x365)](this[_0x283783(0x8ba)]+'\x20('+this[_0x283783(0x664)][_0x283783(0x60f)]+_0x283783(0x7c2));break;}for(this[_0x283783(0x5ab)]=_0x2b1d3b['messages'][_0x283783(0x625)](_0x48e310=>!_0x48e310[_0x283783(0x2b8)]);this['pendingMessages'][_0x283783(0x786)]>0x0||!_0x3da917;){await this[_0x283783(0x498)]();let _0x2b7c41=_0x2cfa29();if(!_0x2b7c41){_0x3da917=!0x0;break;}let _0x4cab36=_0x2b1d3b[_0x283783(0x92e)]['find'](_0x20dba4=>_0x20dba4['_id']===_0x2b7c41[_0x283783(0x53e)]);if(!_0x4cab36){_0x3da917=!0x0;break;}if(this[_0x283783(0x664)][_0x283783(0x352)][_0x283783(0x7f1)]=Date['now'](),_0x4cab36[_0x283783(0x2b8)]){this['logger'][_0x283783(0x365)](this[_0x283783(0x8ba)]+'\x20('+this[_0x283783(0x664)][_0x283783(0x60f)]+_0x283783(0x4a4)+_0x4cab36[_0x283783(0x3eb)]+_0x283783(0x853)),this[_0x283783(0x5ab)]=this['pendingMessages']['filter'](_0x3e6858=>_0x3e6858[_0x283783(0x53e)]!==_0x4cab36[_0x283783(0x53e)]);continue;}if(!this[_0x283783(0x664)]['ScheduleMessage'][_0x283783(0x397)]){this[_0x283783(0x7a2)][_0x283783(0x365)](this['instanceName']+'\x20('+this[_0x283783(0x664)][_0x283783(0x60f)]+_0x283783(0x91b));break;}if(!this[_0x283783(0x664)][_0x283783(0x352)][_0x283783(0x4df)]){this[_0x283783(0x7a2)]['warn'](this[_0x283783(0x8ba)]+'\x20('+this['instance'][_0x283783(0x60f)]+_0x283783(0x510)+_0x2b1d3b['_id']+'\x20foi\x20interrompido\x20pelo\x20usuário.');break;}if(_0x4cab36[_0x283783(0x32e)]===_0x283783(0x29c)&&!this['AutomateSystem']?.[_0x283783(0x2b6)][_0x283783(0x349)]){this[_0x283783(0x7a2)][_0x283783(0x2c2)](this['instanceName']+'\x20('+this[_0x283783(0x664)]['wuid']+_0x283783(0x4fe));break;}let _0x370ae0={'idControl':_0x4cab36[_0x283783(0x53e)],'remoteJid':_0x4cab36[_0x283783(0x3eb)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date['now']()},_0x155b48=null;try{this[_0x283783(0x7a2)][_0x283783(0x365)](this[_0x283783(0x8ba)]+'\x20('+this['instance'][_0x283783(0x60f)]+_0x283783(0x3a0)+_0x4cab36['remoteJid']);let _0x1a4c49=await this['SendScheduleMessage'](_0x4cab36[_0x283783(0x3eb)],_0x4cab36);_0x370ae0[_0x283783(0x2c2)]=_0x1a4c49[_0x283783(0x2c2)],_0x370ae0['id']=_0x1a4c49['error']?null:_0x1a4c49['id'],_0x370ae0['error_log']=_0x1a4c49[_0x283783(0x2c2)]?_0x1a4c49[_0x283783(0x6b2)]?_0x1a4c49[_0x283783(0x6b2)]['toString']():'':null;let _0x381889=_0x2b1d3b['messages']['findIndex'](_0x38ae05=>_0x38ae05['_id']===_0x4cab36[_0x283783(0x53e)]);_0x381889!==-0x1&&(_0x2b1d3b['messages'][_0x381889][_0x283783(0x2b8)]=!0x0);let _0x3a0e14={'$push':{'messagesSend':_0x370ae0},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x1977b1=[{'elem._id':_0x4cab36['_id']}];if(this[_0x283783(0x7a2)][_0x283783(0x365)](this[_0x283783(0x8ba)]+'\x20('+this[_0x283783(0x664)][_0x283783(0x60f)]+_0x283783(0x310)+_0x4cab36['_id']),_0x155b48=await this['repository']['scheduleMessage']['updateOne']({'_id':_0x2b1d3b['_id']},_0x3a0e14,this['instance'][_0x283783(0x60f)],{'arrayFilters':_0x1977b1}),_0x1a4c49['error']){this[_0x283783(0x7a2)][_0x283783(0x2c2)](this[_0x283783(0x8ba)]+'\x20('+this[_0x283783(0x664)][_0x283783(0x60f)]+'):\x20Erro\x20ao\x20enviar\x20mensagem:\x20'+_0x1a4c49[_0x283783(0x6b2)]);continue;}let _0x57721b=this['getDelay'](_0x2b1d3b[_0x283783(0x25b)],_0x2b1d3b[_0x283783(0x73c)]);await this[_0x283783(0x7bc)](_0x57721b);}catch(_0x5589cb){this['logger']['error'](this['instanceName']+'\x20('+this[_0x283783(0x664)][_0x283783(0x60f)]+_0x283783(0x806)+_0x4cab36[_0x283783(0x3eb)]+':\x20'+(_0x5589cb instanceof Error?_0x5589cb[_0x283783(0x923)]:JSON[_0x283783(0x5f3)](_0x5589cb,null,0x2))),_0x370ae0[_0x283783(0x2c2)]=!0x0,_0x370ae0[_0x283783(0x5aa)]=_0x5589cb['message'];let _0x1aae61=_0x2b1d3b['messages'][_0x283783(0x63e)](_0x1f010f=>_0x1f010f['_id']===_0x4cab36['_id']);_0x1aae61!==-0x1&&(_0x2b1d3b[_0x283783(0x92e)][_0x1aae61][_0x283783(0x2b8)]=!0x0);let _0xc9cd26={'$push':{'messagesSend':_0x370ae0},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x5f884b=[{'elem._id':_0x4cab36[_0x283783(0x53e)]}];this[_0x283783(0x7a2)][_0x283783(0x365)](this[_0x283783(0x8ba)]+'\x20('+this[_0x283783(0x664)]['wuid']+_0x283783(0x231)+_0x4cab36[_0x283783(0x53e)]),_0x155b48=await this['repository'][_0x283783(0x35b)][_0x283783(0x2d5)]({'_id':_0x2b1d3b[_0x283783(0x53e)]},_0xc9cd26,this[_0x283783(0x664)][_0x283783(0x60f)],{'arrayFilters':_0x5f884b});}finally{if(_0x155b48&&_0x155b48[_0x283783(0x8aa)]===_0x283783(0x74c)){this[_0x283783(0x7a2)]['warn'](this['instanceName']+'\x20('+this[_0x283783(0x664)]['wuid']+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0x4cab36[_0x283783(0x53e)]+_0x283783(0x268));break;}let _0x5bb7b9=_0x155b48['messages'][_0x283783(0x691)](_0x5755d3=>_0x5755d3['_id']===_0x4cab36[_0x283783(0x53e)]);if(_0x5bb7b9&&!_0x5bb7b9[_0x283783(0x2b8)]){let _0x51d85f={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x1465ad=[{'elem._id':_0x4cab36[_0x283783(0x53e)]}];await this['repository'][_0x283783(0x35b)]['updateOne']({'_id':_0x155b48[_0x283783(0x53e)]},_0x51d85f,this[_0x283783(0x664)][_0x283783(0x60f)],{'arrayFilters':_0x1465ad});}if(this[_0x283783(0x5ab)]=_0x155b48[_0x283783(0x92e)]['filter'](_0x360f49=>!_0x360f49['triedToSend']),_0x3da917=this[_0x283783(0x5ab)][_0x283783(0x786)]===0x0,_0x155b48[_0x283783(0x7fa)]!==this[_0x283783(0x7fa)]){this['logger']['warn'](this[_0x283783(0x8ba)]+'\x20('+this[_0x283783(0x664)]['wuid']+_0x283783(0x328));return;}this['instance'][_0x283783(0x352)]['processingGroup']=_0x155b48;}}this['pendingMessages']=[];let _0x1cca39=await this[_0x283783(0x402)][_0x283783(0x35b)][_0x283783(0x677)](_0x2b1d3b[_0x283783(0x53e)],this[_0x283783(0x664)][_0x283783(0x60f)]);if(_0x3da917=_0x1cca39['messages'][_0x283783(0x8e6)](_0x3161b0=>_0x3161b0[_0x283783(0x2b8)]),_0x3da917&&_0x1cca39[_0x283783(0x8aa)]!=='stopped'){let _0x32b362={'$set':{'status':_0x283783(0x571)}};await this['repository']['scheduleMessage'][_0x283783(0x697)](_0x1cca39[_0x283783(0x53e)],_0x32b362,this[_0x283783(0x664)][_0x283783(0x60f)]);}await new Promise(_0x3589c1=>setTimeout(_0x3589c1,_0x561925)),global['gc']?global['gc']():console[_0x283783(0x365)](_0x283783(0x92b));}this[_0x283783(0x7fa)]=null;},_0x2e40e4=async()=>{const _0x2a4794=_0x9460ef;let _0x3df8ce=new Date(Date['now']()-0x2932e00),_0x14013c={'where':{'status':_0x2a4794(0x229),'$or':[{'when':{'$lte':new Date(),'$gte':_0x3df8ce}},{'when':0x0}]}},_0x1d659b=await this[_0x2a4794(0x402)][_0x2a4794(0x35b)][_0x2a4794(0x63f)](_0x14013c,this['instance'][_0x2a4794(0x60f)]);_0x1d659b&&_0x1d659b[_0x2a4794(0x5ee)]-Date[_0x2a4794(0x37f)]()<=0x6ddd00?this['instance']['ScheduleMessage'][_0x2a4794(0x5f1)]=_0x1d659b[_0x2a4794(0x5ee)]-Date['now']():this[_0x2a4794(0x664)][_0x2a4794(0x352)][_0x2a4794(0x5f1)]=(0x3c+Math[_0x2a4794(0x60b)](Math[_0x2a4794(0x636)]()*0x3c))*0x3c*0x3e8,this[_0x2a4794(0x664)][_0x2a4794(0x352)][_0x2a4794(0x5f1)]=Math[_0x2a4794(0x6d5)](this['instance'][_0x2a4794(0x352)][_0x2a4794(0x5f1)],0x1*0x2*0x3e8);let _0x1cb3b7=Math[_0x2a4794(0x2ee)](this[_0x2a4794(0x664)]['ScheduleMessage'][_0x2a4794(0x5f1)]/0xea60);if(_0x1d659b){let _0x1e1cdf=new Date(_0x1d659b[_0x2a4794(0x5ee)])['toLocaleString']();this[_0x2a4794(0x7a2)][_0x2a4794(0x365)](this[_0x2a4794(0x8ba)]+'\x20('+this[_0x2a4794(0x664)][_0x2a4794(0x60f)]+'):\x20encontrado\x20próxima\x20mensagem\x20para\x20'+_0x1e1cdf+',\x20fará\x20nova\x20verificação\x20em\x20'+_0x1cb3b7+_0x2a4794(0x8d0));}else this[_0x2a4794(0x7a2)][_0x2a4794(0x365)](this[_0x2a4794(0x8ba)]+'\x20('+this[_0x2a4794(0x664)][_0x2a4794(0x60f)]+'):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20'+_0x1cb3b7+_0x2a4794(0x8d0));setTimeout(()=>this[_0x2a4794(0x835)](),this['instance']['ScheduleMessage'][_0x2a4794(0x5f1)]);};if(this[_0x9460ef(0x664)][_0x9460ef(0x352)][_0x9460ef(0x4df)]){await this[_0x9460ef(0x498)](),_0xc69a58();return;}if(!this[_0x9460ef(0x664)][_0x9460ef(0x352)][_0x9460ef(0x397)]){this['logger']['warn'](this[_0x9460ef(0x8ba)]+'\x20('+this[_0x9460ef(0x664)][_0x9460ef(0x60f)]+_0x9460ef(0x876)),this['instance'][_0x9460ef(0x352)][_0x9460ef(0x4df)]=null,this['instance'][_0x9460ef(0x352)][_0x9460ef(0x7f1)]=0x0,this[_0x9460ef(0x664)]['ScheduleMessage'][_0x9460ef(0x5f1)]=0x0;return;}try{let _0x5f21a5=await _0x51d8a0();_0x5f21a5['length']===0x0?this['logger'][_0x9460ef(0x365)](this['instanceName']+'\x20('+this[_0x9460ef(0x664)][_0x9460ef(0x60f)]+'):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.'):(this[_0x9460ef(0x664)][_0x9460ef(0x352)][_0x9460ef(0x4df)]=_0x5f21a5[0x0],await _0x24595b(_0x5f21a5)),await _0x2e40e4(),this[_0x9460ef(0x664)][_0x9460ef(0x352)][_0x9460ef(0x4df)]=null;}catch(_0x4fdcfc){this[_0x9460ef(0x7a2)]['error']('Error\x20in\x20scheduleNextCheck:\x20'+(_0x4fdcfc instanceof Error?_0x4fdcfc['message']:JSON[_0x9460ef(0x5f3)](_0x4fdcfc,null,0x2)));}});}['getDelay'](_0x4e0258,_0x1aef47){const _0x52fdea=a0_0x20331d;return _0x4e0258=Math['max'](0.5,_0x4e0258),_0x1aef47=Math[_0x52fdea(0x841)](Math[_0x52fdea(0x6d5)](0x3,_0x1aef47),0x78),Math['floor'](Math[_0x52fdea(0x636)]()*(_0x1aef47-_0x4e0258+0x1)+_0x4e0258)*0x3e8;}[a0_0x20331d(0x7bc)](_0x13a144){return new Promise(_0x1cc62c=>setTimeout(_0x1cc62c,_0x13a144));}async[a0_0x20331d(0x46a)](_0x1dc013){const _0x53325a=a0_0x20331d;if(!this[_0x53325a(0x246)]&&(await this[_0x53325a(0x3df)](),!this[_0x53325a(0x246)]))return null;_0x1dc013=this[_0x53325a(0x205)](_0x1dc013);let _0x43caea=await this[_0x53325a(0x402)][_0x53325a(0x617)][_0x53325a(0x63f)]({'where':{'_id':_0x1dc013}},this[_0x53325a(0x664)][_0x53325a(0x60f)]),_0x28fc2c={};if(_0x43caea&&_0x43caea[_0x53325a(0x766)]){let _0x2109f5=_0x43caea['leadInfo'];typeof _0x2109f5[_0x53325a(0x798)]==_0x53325a(0x6f2)&&(_0x28fc2c['nome']=_0x2109f5[_0x53325a(0x798)]),typeof _0x2109f5[_0x53325a(0x928)]=='string'&&(_0x28fc2c['nomecompleto']=_0x2109f5[_0x53325a(0x928)]),typeof _0x2109f5[_0x53325a(0x619)]=='string'&&(_0x28fc2c['email']=_0x2109f5[_0x53325a(0x619)]),typeof _0x2109f5[_0x53325a(0x506)]=='string'&&(_0x28fc2c[_0x53325a(0x506)]=_0x2109f5['cpf']),typeof _0x2109f5[_0x53325a(0x8aa)]==_0x53325a(0x6f2)&&(_0x28fc2c[_0x53325a(0x8aa)]=_0x2109f5[_0x53325a(0x8aa)]),typeof _0x2109f5[_0x53325a(0x2d0)]==_0x53325a(0x6f2)&&(_0x28fc2c['notas']=_0x2109f5[_0x53325a(0x2d0)]),typeof _0x2109f5[_0x53325a(0x6d3)]==_0x53325a(0x6f2)&&(_0x28fc2c[_0x53325a(0x6d3)]=_0x2109f5[_0x53325a(0x6d3)]),Array[_0x53325a(0x3f2)](_0x2109f5[_0x53325a(0x931)])&&(_0x28fc2c[_0x53325a(0x931)]=_0x2109f5['tags']['join'](',\x20')),Array['isArray'](_0x2109f5[_0x53325a(0x820)])&&(_0x28fc2c['etiquetas']=_0x2109f5[_0x53325a(0x820)][_0x53325a(0x6ca)](',\x20'));}return _0x43caea&&_0x43caea[_0x53325a(0x766)]&&_0x43caea[_0x53325a(0x766)][_0x53325a(0x6fb)]&&_0x43caea['leadInfo'][_0x53325a(0x6fb)][_0x53325a(0x22b)](_0x257201=>{const _0x8d23bb=_0x53325a;let _0x587b7a=this['AutomateSystem']?.['customFields'][_0x8d23bb(0x691)](_0xa6c33c=>_0xa6c33c[_0x8d23bb(0x53e)]===_0x257201[_0x8d23bb(0x53e)]);_0x587b7a&&(_0x28fc2c[_0x587b7a['name']]=_0x257201[_0x8d23bb(0x3c3)]);}),_0x28fc2c;}async['replaceVariablesChat'](_0x20a087,_0x1f7010){const _0x34bf1d=a0_0x20331d;try{let _0x40e885=await this[_0x34bf1d(0x46a)](_0x1f7010);return this[_0x34bf1d(0x593)](_0x20a087,_0x40e885);}catch(_0x2a6b42){return this['logger'][_0x34bf1d(0x2c2)](_0x34bf1d(0x499)+_0x1f7010+':\x20'+_0x2a6b42),_0x20a087;}}async[a0_0x20331d(0x852)](){const _0x2a78d5=a0_0x20331d;let _0x326c12=async(_0x150213,_0x2d9076)=>{const _0x2d5733=a0_0xae02;let _0x453ff6=(await this[_0x2d5733(0x402)][_0x2d5733(0x35b)][_0x2d5733(0x691)]({'where':{'type':_0x150213}},this['instance'][_0x2d5733(0x60f)]))[_0x2d5733(0x41b)](async _0x2957ea=>{const _0x5bb3e9=_0x2d5733;let _0xc20127=_0x2d9076(_0x2957ea),_0x24e564=_0x4f087=>/^\d+$/[_0x5bb3e9(0x248)](_0x4f087),_0xef8105=_0x2957ea[_0x5bb3e9(0x46c)]['filter'](_0x2cd1cc=>_0x2cd1cc[_0x5bb3e9(0x3ea)]('@s.whatsapp.net')?_0x2cd1cc['length']>0x19:_0x2cd1cc[_0x5bb3e9(0x3ea)](_0x5bb3e9(0x5dd))?_0x2cd1cc[_0x5bb3e9(0x786)]>0xf:_0x24e564(_0x2cd1cc)?_0x2cd1cc['length']>=0xb:!0x1)[_0x5bb3e9(0x41b)](_0x1c37af=>({'_id':(0x0,X['v4'])(),'idSchedule':_0x2957ea[_0x5bb3e9(0x53e)],'type':_0xc20127,'remoteJid':_0x1c37af,'flow':_0x2957ea[_0x5bb3e9(0x249)],'text':_0x2957ea['message']?.[_0x5bb3e9(0x4e1)],'delay':_0x2957ea[_0x5bb3e9(0x923)]?.[_0x5bb3e9(0x7b3)],'urlOrBase64':_0x2957ea['message']?.[_0x5bb3e9(0x4ae)],'linkPreview':_0x2957ea[_0x5bb3e9(0x923)]?.[_0x5bb3e9(0x73b)],'fileName':_0x2957ea[_0x5bb3e9(0x923)]?.[_0x5bb3e9(0x7ad)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x5bb3e9(0x402)][_0x5bb3e9(0x35b)][_0x5bb3e9(0x697)](_0x2957ea[_0x5bb3e9(0x53e)],{'$set':{'messages':_0xef8105},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x5bb3e9(0x664)][_0x5bb3e9(0x60f)]);}catch(_0xb7895f){console[_0x5bb3e9(0x2c2)]('Erro\x20ao\x20atualizar\x20agendamento\x20'+_0x2957ea[_0x5bb3e9(0x53e)]+':',_0xb7895f);}});await Promise['all'](_0x453ff6);};await _0x326c12(_0x2a78d5(0x4e1),_0x3a453c=>_0x2a78d5(0x4e1)),await _0x326c12(_0x2a78d5(0x4ad),_0x476656=>_0x476656[_0x2a78d5(0x923)]?.[_0x2a78d5(0x57f)]||_0x2a78d5(0x4ad)),await _0x326c12(_0x2a78d5(0x481),_0x5f5082=>_0x2a78d5(0x481)),await _0x326c12(_0x2a78d5(0x29c),_0x2bb3bf=>_0x2a78d5(0x29c)),await _0x326c12(_0x2a78d5(0x801),_0x23afd7=>_0x2a78d5(0x801)),await _0x326c12(_0x2a78d5(0x775),_0x3d8fde=>'video'),await _0x326c12(_0x2a78d5(0x8e2),_0x270c39=>'document'),this[_0x2a78d5(0x7a2)][_0x2a78d5(0x365)](this[_0x2a78d5(0x8ba)]+'\x20('+this[_0x2a78d5(0x664)][_0x2a78d5(0x60f)]+'):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!');}async['editScheduleMessage'](_0x12346e){const _0x1c1b52=a0_0x20331d;try{if(this['logger']['warn'](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Editando/criando\x20grupo\x20de\x20mensagens...'),_0x12346e[_0x1c1b52(0x53e)]||(_0x12346e[_0x1c1b52(0x53e)]=(0x0,X['v4'])()),this[_0x1c1b52(0x664)][_0x1c1b52(0x352)][_0x1c1b52(0x4df)]?.[_0x1c1b52(0x53e)]===_0x12346e['_id']?.[_0x1c1b52(0x27d)]()&&_0x12346e[_0x1c1b52(0x8aa)]!=='stopped')throw new Error(_0x1c1b52(0x31e));if(_0x12346e[_0x1c1b52(0x65e)]&&_0x12346e[_0x1c1b52(0x53e)]){let _0x25f6a1=await this[_0x1c1b52(0x402)][_0x1c1b52(0x35b)][_0x1c1b52(0x24c)](_0x12346e[_0x1c1b52(0x53e)],this[_0x1c1b52(0x664)][_0x1c1b52(0x60f)]);return setTimeout(()=>this[_0x1c1b52(0x835)](),0x7d0),_0x25f6a1;}let _0x15bf8c=null;if(_0x12346e[_0x1c1b52(0x53e)]&&(_0x15bf8c=await this[_0x1c1b52(0x402)][_0x1c1b52(0x35b)]['findById'](_0x12346e[_0x1c1b52(0x53e)],this[_0x1c1b52(0x664)][_0x1c1b52(0x60f)])),_0x15bf8c){let {_id:_0x32e7ff,owner:_0x382290,messages:_0x46234a,..._0x37a5a5}=_0x12346e;if(_0x46234a){let _0x42dd18=_0x46234a[_0x1c1b52(0x625)](_0x2ab24a=>!_0x2ab24a[_0x1c1b52(0x53e)]),_0x1fd7f1=_0x46234a[_0x1c1b52(0x625)](_0x5b48f1=>_0x5b48f1[_0x1c1b52(0x53e)]&&!_0x5b48f1[_0x1c1b52(0x65e)]),_0x3dfb9b=_0x46234a[_0x1c1b52(0x625)](_0x3e8f41=>_0x3e8f41[_0x1c1b52(0x53e)]&&_0x3e8f41['delete']);if(_0x42dd18[_0x1c1b52(0x786)]>0x0&&await this[_0x1c1b52(0x765)](_0x12346e[_0x1c1b52(0x53e)],_0x42dd18),_0x1fd7f1['length']>0x0&&await this[_0x1c1b52(0x850)]({'_id':_0x12346e[_0x1c1b52(0x53e)],'messages':_0x1fd7f1}),_0x3dfb9b[_0x1c1b52(0x786)]>0x0){let _0x4d4179=_0x3dfb9b[_0x1c1b52(0x41b)](_0x173cbb=>({'updateOne':{'filter':{'_id':_0x12346e['_id']},'update':{'$pull':{'messages':{'_id':_0x173cbb[_0x1c1b52(0x53e)]}}}}}));await this['repository'][_0x1c1b52(0x35b)][_0x1c1b52(0x641)](_0x4d4179,this[_0x1c1b52(0x664)][_0x1c1b52(0x60f)]);}}let _0xb08e1d={'$set':{..._0x37a5a5,'status':_0x12346e[_0x1c1b52(0x8aa)]||_0x15bf8c[_0x1c1b52(0x8aa)]}},_0x31d0b7=await this['repository'][_0x1c1b52(0x35b)]['updateOneById'](_0x12346e[_0x1c1b52(0x53e)],_0xb08e1d,this[_0x1c1b52(0x664)][_0x1c1b52(0x60f)]);return _0x31d0b7&&(this[_0x1c1b52(0x86b)](_0x31d0b7['messages']),await this[_0x1c1b52(0x402)][_0x1c1b52(0x35b)][_0x1c1b52(0x697)](_0x31d0b7[_0x1c1b52(0x53e)],{'$set':{'messages':_0x31d0b7[_0x1c1b52(0x92e)]}},this[_0x1c1b52(0x664)][_0x1c1b52(0x60f)])),setTimeout(()=>this[_0x1c1b52(0x835)](),0x7d0),await this[_0x1c1b52(0x852)](),_0x31d0b7;}else{_0x12346e['owner']=this[_0x1c1b52(0x664)][_0x1c1b52(0x60f)],_0x12346e[_0x1c1b52(0x92e)]&&_0x12346e['messages'][_0x1c1b52(0x22b)](_0x32f992=>{const _0xd51d1e=_0x1c1b52;_0x32f992[_0xd51d1e(0x53e)]||(_0x32f992[_0xd51d1e(0x53e)]=(0x0,X['v4'])()),_0x32f992[_0xd51d1e(0x39f)]||(_0x32f992['idSchedule']=_0x12346e[_0xd51d1e(0x53e)]),delete _0x32f992['triedToSend'];});let _0x2538b8=await this[_0x1c1b52(0x402)]['scheduleMessage']['createAndSave'](_0x12346e,this[_0x1c1b52(0x664)]['wuid']);return _0x2538b8&&(this['reorderMessages'](_0x2538b8['messages']),await this['repository'][_0x1c1b52(0x35b)][_0x1c1b52(0x697)](_0x2538b8[_0x1c1b52(0x53e)],{'$set':{'messages':_0x2538b8[_0x1c1b52(0x92e)]}},this[_0x1c1b52(0x664)][_0x1c1b52(0x60f)])),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x2538b8;}}catch(_0x49e3ab){let _0x197a79=_0x1c1b52(0x367),_0x2787ef=_0x49e3ab instanceof Error?_0x49e3ab[_0x1c1b52(0x923)]:typeof _0x49e3ab==_0x1c1b52(0x4bd)?JSON[_0x1c1b52(0x5f3)](_0x49e3ab):_0x49e3ab,_0x19c9ed=_0x197a79+':\x20'+_0x2787ef;throw this[_0x1c1b52(0x7a2)][_0x1c1b52(0x2c2)](this[_0x1c1b52(0x8ba)]+'\x20('+this[_0x1c1b52(0x664)][_0x1c1b52(0x60f)]+'):\x20'+_0x19c9ed),new m(_0x19c9ed);}}async[a0_0x20331d(0x765)](_0x59c18e,_0x442ad1){const _0x574c15=a0_0x20331d;try{this['logger'][_0x574c15(0x7a9)](this[_0x574c15(0x8ba)]+'\x20('+this[_0x574c15(0x664)][_0x574c15(0x60f)]+_0x574c15(0x530)),_0x442ad1[_0x574c15(0x22b)](_0x3dd032=>{const _0x546d6b=_0x574c15;_0x3dd032[_0x546d6b(0x53e)]||(_0x3dd032[_0x546d6b(0x53e)]=(0x0,X['v4'])()),_0x3dd032[_0x546d6b(0x39f)]||(_0x3dd032[_0x546d6b(0x39f)]=_0x59c18e),delete _0x3dd032[_0x546d6b(0x2b8)];});let _0x56f91b={'$push':{'messages':{'$each':_0x442ad1}}},_0x5cb8cc=await this['repository'][_0x574c15(0x35b)][_0x574c15(0x697)](_0x59c18e,_0x56f91b,this['instance'][_0x574c15(0x60f)]);return _0x5cb8cc&&(this['reorderMessages'](_0x5cb8cc[_0x574c15(0x92e)]),await this[_0x574c15(0x402)][_0x574c15(0x35b)]['updateOneById'](_0x5cb8cc[_0x574c15(0x53e)],{'$set':{'messages':_0x5cb8cc[_0x574c15(0x92e)]}},this['instance'][_0x574c15(0x60f)])),_0x5cb8cc;}catch(_0x434c86){let _0xd795be=_0x574c15(0x83c),_0x5bc78d=_0x434c86 instanceof Error?_0x434c86[_0x574c15(0x923)]:typeof _0x434c86==_0x574c15(0x4bd)?JSON[_0x574c15(0x5f3)](_0x434c86):_0x434c86,_0x4f7a1b=_0xd795be+':\x20'+_0x5bc78d;throw this['logger'][_0x574c15(0x2c2)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x574c15(0x51c)+_0x4f7a1b),new m(_0x4f7a1b);}}async[a0_0x20331d(0x850)](_0x35cd8f){const _0xd2255d=a0_0x20331d;try{if(this['logger']['verbose'](this[_0xd2255d(0x8ba)]+'\x20('+this[_0xd2255d(0x664)][_0xd2255d(0x60f)]+_0xd2255d(0x742)),!_0x35cd8f[_0xd2255d(0x53e)]||!_0x35cd8f[_0xd2255d(0x92e)])throw new Error(_0xd2255d(0x4d8));let _0x4a297b=_0x35cd8f[_0xd2255d(0x53e)],_0x5c2bc5=_0x35cd8f[_0xd2255d(0x92e)],_0x551bea=_0x5c2bc5[_0xd2255d(0x625)](_0x56f451=>!_0x56f451[_0xd2255d(0x65e)])[_0xd2255d(0x41b)](_0x9c05b6=>{const _0x1b6b1a=_0xd2255d;let _0x38b83e=_0x9c05b6[_0x1b6b1a(0x53e)];if(!_0x38b83e)throw new Error(_0x1b6b1a(0x529));return _0x9c05b6[_0x1b6b1a(0x39f)]||(_0x9c05b6['idSchedule']=_0x4a297b),delete _0x9c05b6[_0x1b6b1a(0x2b8)],{'updateOne':{'filter':{'_id':_0x4a297b,'messages._id':_0x38b83e},'update':{'$set':{'messages.$[elem]':_0x9c05b6}},'arrayFilters':[{'elem._id':_0x38b83e}]}};}),_0x44b01d=_0x5c2bc5[_0xd2255d(0x625)](_0x4072c4=>_0x4072c4[_0xd2255d(0x65e)])['map'](_0x14ffc9=>{const _0x5cfdc0=_0xd2255d;let _0x19a0c7=_0x14ffc9[_0x5cfdc0(0x53e)];if(!_0x19a0c7)throw new Error(_0x5cfdc0(0x88a));return{'updateOne':{'filter':{'_id':_0x4a297b},'update':{'$pull':{'messages':{'_id':_0x19a0c7}}}}};}),_0x3d7d68=[..._0x551bea,..._0x44b01d],_0x2adb60=await this[_0xd2255d(0x402)][_0xd2255d(0x35b)][_0xd2255d(0x641)](_0x3d7d68,this[_0xd2255d(0x664)]['wuid']),_0x5c2af4=await this[_0xd2255d(0x402)][_0xd2255d(0x35b)]['findById'](_0x4a297b,this['instance'][_0xd2255d(0x60f)]);return _0x5c2af4&&(this[_0xd2255d(0x86b)](_0x5c2af4['messages']),await this['repository'][_0xd2255d(0x35b)][_0xd2255d(0x697)](_0x5c2af4[_0xd2255d(0x53e)],{'$set':{'messages':_0x5c2af4[_0xd2255d(0x92e)]}},this[_0xd2255d(0x664)][_0xd2255d(0x60f)])),_0x5c2af4;}catch(_0x542726){let _0x2899f3='Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo',_0x1cf965=_0x542726 instanceof Error?_0x542726[_0xd2255d(0x923)]:typeof _0x542726==_0xd2255d(0x4bd)?JSON[_0xd2255d(0x5f3)](_0x542726):_0x542726,_0x747b2b=_0x2899f3+':\x20'+_0x1cf965;throw this[_0xd2255d(0x7a2)][_0xd2255d(0x2c2)](this[_0xd2255d(0x8ba)]+'\x20('+this[_0xd2255d(0x664)][_0xd2255d(0x60f)]+'):\x20'+_0x747b2b),new m(_0x747b2b);}}async[a0_0x20331d(0x537)](){const _0x5415cd=a0_0x20331d;try{let _0x435808={'status':'done'},_0x2a4ed9=await this[_0x5415cd(0x402)]['scheduleMessage'][_0x5415cd(0x45c)](_0x435808,this['instance'][_0x5415cd(0x60f)]);if(!_0x2a4ed9[_0x5415cd(0x2c2)])this[_0x5415cd(0x7a2)][_0x5415cd(0x7a9)](this[_0x5415cd(0x8ba)]+'\x20('+this[_0x5415cd(0x664)]['wuid']+_0x5415cd(0x6fa));else throw new Error(_0x2a4ed9[_0x5415cd(0x2c2)]['message']||_0x5415cd(0x6e2));return this[_0x5415cd(0x1e7)]();}catch(_0x4031d4){let _0x1bc1e7=_0x5415cd(0x522),_0x5e1785=_0x4031d4 instanceof Error?_0x4031d4['message']:typeof _0x4031d4==_0x5415cd(0x4bd)?JSON[_0x5415cd(0x5f3)](_0x4031d4):_0x4031d4,_0x5539a5=_0x1bc1e7+':\x20'+_0x5e1785;throw this[_0x5415cd(0x7a2)][_0x5415cd(0x2c2)](this['instanceName']+'\x20('+this['instance'][_0x5415cd(0x60f)]+_0x5415cd(0x51c)+_0x5539a5),new m(_0x5539a5);}}async[a0_0x20331d(0x1e7)](){const _0x4987e1=a0_0x20331d;try{return await this[_0x4987e1(0x402)]['scheduleMessage']['find']({'where':{}},this[_0x4987e1(0x664)]['wuid']);}catch(_0x54d88f){let _0x368598='Erro\x20ao\x20buscar\x20Schedule\x20Messages',_0x134d72=_0x54d88f instanceof Error?_0x54d88f[_0x4987e1(0x923)]:typeof _0x54d88f==_0x4987e1(0x4bd)?JSON[_0x4987e1(0x5f3)](_0x54d88f):_0x54d88f,_0x2d7666=_0x368598+':\x20'+_0x134d72;throw this[_0x4987e1(0x7a2)]['error'](this[_0x4987e1(0x8ba)]+'\x20('+this[_0x4987e1(0x664)][_0x4987e1(0x60f)]+_0x4987e1(0x51c)+_0x2d7666),new m(_0x2d7666);}}['reorderMessages'](_0x108d71){const _0xdbf45b=a0_0x20331d;_0x108d71[_0xdbf45b(0x4b4)]((_0x9022df,_0x3bb0db)=>_0x9022df['order']-_0x3bb0db[_0xdbf45b(0x1e4)]),_0x108d71[_0xdbf45b(0x22b)]((_0x3d8f52,_0x4f9b89)=>{const _0x58b472=_0xdbf45b;_0x3d8f52[_0x58b472(0x1e4)]=_0x4f9b89+0x1;});}async['SendScheduleMessage'](_0x481069,_0x3f22d8){const _0x598b9f=a0_0x20331d;try{if(!_0x3f22d8)return this[_0x598b9f(0x7a2)]['error'](this[_0x598b9f(0x8ba)]+'\x20('+this['instance'][_0x598b9f(0x60f)]+_0x598b9f(0x281)),{'error':!0x0,'detail':'Nenhuma\x20mensagem\x20encontrada\x20para\x20envio'};if(_0x3f22d8[_0x598b9f(0x32e)]===_0x598b9f(0x29c)&&!this['AutomateSystem']?.[_0x598b9f(0x2b6)][_0x598b9f(0x349)])return this[_0x598b9f(0x7a2)]['error'](this[_0x598b9f(0x8ba)]+'\x20('+this[_0x598b9f(0x664)][_0x598b9f(0x60f)]+_0x598b9f(0x303)),{'error':!0x0,'detail':_0x598b9f(0x493)};switch(_0x3f22d8['type']){case _0x598b9f(0x4e1):return await this['scheduleSendText'](_0x3f22d8,_0x481069);case _0x598b9f(0x775):case'image':case'document':return await this[_0x598b9f(0x689)](_0x3f22d8,_0x481069);case _0x598b9f(0x481):return await this[_0x598b9f(0x20a)](_0x3f22d8,_0x481069);case _0x598b9f(0x29c):let _0x19855d=new Ke();return _0x19855d[_0x598b9f(0x8b9)]=_0x3f22d8[_0x598b9f(0x29c)],_0x19855d[_0x598b9f(0x3eb)]=_0x481069,await this[_0x598b9f(0x5d7)](_0x19855d);default:return this['logger'][_0x598b9f(0x2c2)](this[_0x598b9f(0x8ba)]+'\x20('+this[_0x598b9f(0x664)][_0x598b9f(0x60f)]+_0x598b9f(0x42c)+_0x3f22d8[_0x598b9f(0x32e)]),{'error':!0x0,'detail':_0x598b9f(0x271)};}}catch(_0x5129e7){return this['logger'][_0x598b9f(0x2c2)](this[_0x598b9f(0x8ba)]+'\x20('+this[_0x598b9f(0x664)][_0x598b9f(0x60f)]+'):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20'+(_0x5129e7 instanceof Error?_0x5129e7[_0x598b9f(0x923)]:JSON[_0x598b9f(0x5f3)](_0x5129e7,null,0x2))),{'error':!0x0,'detail':_0x5129e7[_0x598b9f(0x923)]};}}async['scheduleSendText'](_0x1b680d,_0x14e7b7){const _0x300766=a0_0x20331d;if(this[_0x300766(0x7a2)][_0x300766(0x7a9)](this[_0x300766(0x8ba)]+'\x20('+this[_0x300766(0x664)][_0x300766(0x60f)]+_0x300766(0x4af)+_0x14e7b7+'\x27'),!_0x1b680d['text']||_0x1b680d[_0x300766(0x4e1)][_0x300766(0x786)]===0x0)return{'error':!0x0,'detail':'sem\x20texto\x20na\x20mensagem'};let _0x116989=await this['replaceVariablesChat'](_0x1b680d['text'],_0x14e7b7),_0x1c4723={'number':_0x14e7b7,'options':{'delay':_0x1b680d['delay'],'linkPreview':_0x1b680d['linkPreview']},'textMessage':{'text':_0x116989}},_0x27eae3=null;try{let _0x2e223d=await this['textMessage'](_0x1c4723);if(_0x2e223d&&_0x2e223d[_0x300766(0x8aa)])return{'error':!0x1,'id':_0x2e223d[_0x300766(0x2f3)]['id']};_0x27eae3=JSON[_0x300766(0x5f3)](_0x2e223d),this['logger'][_0x300766(0x7a9)](this[_0x300766(0x8ba)]+'\x20('+this[_0x300766(0x664)]['wuid']+_0x300766(0x51c)+_0x27eae3);}catch(_0xe4979b){this['logger']['error'](this[_0x300766(0x8ba)]+'\x20('+this[_0x300766(0x664)][_0x300766(0x60f)]+_0x300766(0x7d1)+(_0xe4979b instanceof Error?_0xe4979b[_0x300766(0x923)]:JSON[_0x300766(0x5f3)](_0xe4979b,null,0x2))),_0x27eae3=_0xe4979b['message'];}if(_0x27eae3)return{'error':!0x0,'detail':(typeof _0x27eae3=='object'?JSON[_0x300766(0x5f3)](_0x27eae3,null,0x2):_0x27eae3)[_0x300766(0x759)](/[\[\]{}\n]/g,'\x20')[_0x300766(0x759)](/  +/g,'\x20')};}async[a0_0x20331d(0x689)](_0x1f6e37,_0x1ca1b){const _0x4119ef=a0_0x20331d;this['logger']['verbose'](this[_0x4119ef(0x8ba)]+'\x20('+this['instance'][_0x4119ef(0x60f)]+_0x4119ef(0x2d8)+_0x1ca1b+'\x27');let _0x5b5007;_0x1f6e37[_0x4119ef(0x4e1)]&&_0x1f6e37[_0x4119ef(0x4e1)]['length']>0x0&&(_0x5b5007=await this[_0x4119ef(0x468)](_0x1f6e37[_0x4119ef(0x4e1)],_0x1ca1b));let _0x9a170c={'number':_0x1ca1b,'options':{'delay':_0x1f6e37[_0x4119ef(0x7b3)],'linkPreview':_0x1f6e37[_0x4119ef(0x73b)]},'mediaMessage':{'mediatype':_0x1f6e37['type'],'caption':_0x5b5007,'media':_0x1f6e37[_0x4119ef(0x4ae)]}},_0x53362b=null;try{let _0x17c500=await this['mediaMessage'](_0x9a170c);if(_0x17c500&&_0x17c500[_0x4119ef(0x8aa)])return{'error':!0x1,'id':_0x17c500['key']['id']};_0x53362b=JSON[_0x4119ef(0x5f3)](_0x17c500),this[_0x4119ef(0x7a2)][_0x4119ef(0x7a9)](this['instanceName']+'\x20('+this[_0x4119ef(0x664)][_0x4119ef(0x60f)]+_0x4119ef(0x51c)+_0x53362b);}catch(_0x4a4a53){this[_0x4119ef(0x7a2)][_0x4119ef(0x2c2)](this[_0x4119ef(0x8ba)]+'\x20('+this[_0x4119ef(0x664)][_0x4119ef(0x60f)]+_0x4119ef(0x41a)+(_0x4a4a53 instanceof Error?_0x4a4a53[_0x4119ef(0x923)]:JSON[_0x4119ef(0x5f3)](_0x4a4a53,null,0x2))),_0x53362b=_0x4a4a53[_0x4119ef(0x923)];}if(_0x53362b)return{'error':!0x0,'detail':(typeof _0x53362b==_0x4119ef(0x4bd)?JSON[_0x4119ef(0x5f3)](_0x53362b,null,0x2):_0x53362b)[_0x4119ef(0x759)](/[\[\]{}\n]/g,'\x20')[_0x4119ef(0x759)](/  +/g,'\x20')};}async[a0_0x20331d(0x20a)](_0xdf5ec1,_0x1dce81){const _0xe051f0=a0_0x20331d;this['logger'][_0xe051f0(0x7a9)](this[_0xe051f0(0x8ba)]+'\x20('+this[_0xe051f0(0x664)][_0xe051f0(0x60f)]+_0xe051f0(0x345)+_0x1dce81+'\x27');let _0x340ed4={'number':_0x1dce81,'options':{'delay':_0xdf5ec1[_0xe051f0(0x7b3)]},'audioMessage':{'audio':_0xdf5ec1['urlOrBase64']}},_0x5e6af7=null;try{let _0x404fc0=await this[_0xe051f0(0x226)](_0x340ed4);if(_0x404fc0&&_0x404fc0[_0xe051f0(0x8aa)])return{'error':!0x1,'id':_0x404fc0[_0xe051f0(0x2f3)]['id']};_0x5e6af7=JSON[_0xe051f0(0x5f3)](_0x404fc0),this[_0xe051f0(0x7a2)][_0xe051f0(0x7a9)](this[_0xe051f0(0x8ba)]+'\x20('+this['instance']['wuid']+_0xe051f0(0x51c)+_0x5e6af7);}catch(_0x5c4bb8){this[_0xe051f0(0x7a2)]['error'](this['instanceName']+'\x20('+this['instance']['wuid']+_0xe051f0(0x1e2)+(_0x5c4bb8 instanceof Error?_0x5c4bb8['message']:JSON[_0xe051f0(0x5f3)](_0x5c4bb8,null,0x2))),_0x5e6af7=_0x5c4bb8['message'];}if(_0x5e6af7)return{'error':!0x0,'detail':(typeof _0x5e6af7==_0xe051f0(0x4bd)?JSON[_0xe051f0(0x5f3)](_0x5e6af7,null,0x2):_0x5e6af7)[_0xe051f0(0x759)](/[\[\]{}\n]/g,'\x20')[_0xe051f0(0x759)](/  +/g,'\x20')};}async['groupDesc'](_0x58a080){const _0x1cd9e0=a0_0x20331d;try{return await this['client'][_0x1cd9e0(0x6cc)](_0x58a080['groupJid'],_0x58a080[_0x1cd9e0(0x464)]),{'update':'success'};}catch(_0x47a869){let _0x2f3a4d=_0x1cd9e0(0x476),_0x44f05c=_0x47a869 instanceof Error?_0x47a869[_0x1cd9e0(0x923)]:typeof _0x47a869=='object'?JSON[_0x1cd9e0(0x5f3)](_0x47a869):_0x47a869,_0x1a22e4=_0x2f3a4d+':\x20'+_0x44f05c;throw this[_0x1cd9e0(0x7a2)]['error'](this[_0x1cd9e0(0x8ba)]+'\x20('+this['instance']['wuid']+_0x1cd9e0(0x51c)+_0x1a22e4),new x(_0x1a22e4);}}async[a0_0x20331d(0x22d)](_0x504046){const _0x2d49f0=a0_0x20331d;try{return await this[_0x2d49f0(0x8a4)][_0x2d49f0(0x2a8)](_0x504046[_0x2d49f0(0x545)],_0x504046[_0x2d49f0(0x8b9)]),{'update':_0x2d49f0(0x1ed)};}catch(_0x34ab98){let _0x1ab91a=_0x2d49f0(0x598),_0x40b765=_0x34ab98 instanceof Error?_0x34ab98['message']:typeof _0x34ab98==_0x2d49f0(0x4bd)?JSON[_0x2d49f0(0x5f3)](_0x34ab98):_0x34ab98,_0x5a6387=_0x1ab91a+':\x20'+_0x40b765;throw this[_0x2d49f0(0x7a2)][_0x2d49f0(0x2c2)](this[_0x2d49f0(0x8ba)]+'\x20('+this[_0x2d49f0(0x664)]['wuid']+_0x2d49f0(0x51c)+_0x5a6387),new x(_0x5a6387);}}async[a0_0x20331d(0x630)](_0x3ea5a0){const _0x11fc30=a0_0x20331d;try{let _0x4cbb6f=await this[_0x11fc30(0x8a4)][_0x11fc30(0x730)](_0x3ea5a0[_0x11fc30(0x545)],_0x3ea5a0[_0x11fc30(0x5d4)]);return{'success':!0x0};}catch(_0x42ebc7){let _0xfbf4cd=_0x11fc30(0x665),_0x175b7a=_0x42ebc7 instanceof Error?_0x42ebc7['message']:typeof _0x42ebc7==_0x11fc30(0x4bd)?JSON[_0x11fc30(0x5f3)](_0x42ebc7):_0x42ebc7,_0x4b3167=_0xfbf4cd+':\x20'+_0x175b7a;throw this[_0x11fc30(0x7a2)][_0x11fc30(0x2c2)](this[_0x11fc30(0x8ba)]+'\x20('+this[_0x11fc30(0x664)][_0x11fc30(0x60f)]+_0x11fc30(0x51c)+_0x4b3167),new x(_0x4b3167);}}async[a0_0x20331d(0x33b)](_0x4a30ec){const _0x4e1b98=a0_0x20331d;try{return await this[_0x4e1b98(0x8a4)][_0x4e1b98(0x4e5)](_0x4a30ec[_0x4e1b98(0x545)],_0x4a30ec['setting']),{'update':'success'};}catch(_0x3afe52){let _0x41cf36=_0x4e1b98(0x21f),_0x170805=_0x3afe52 instanceof Error?_0x3afe52[_0x4e1b98(0x923)]:typeof _0x3afe52==_0x4e1b98(0x4bd)?JSON[_0x4e1b98(0x5f3)](_0x3afe52):_0x3afe52,_0x1c94ca=_0x41cf36+':\x20'+_0x170805;throw this['logger'][_0x4e1b98(0x2c2)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4e1b98(0x51c)+_0x1c94ca),new x(_0x1c94ca);}}async['updateGroupPicture'](_0x10289b){const _0x3d64ed=a0_0x20331d;try{let _0x40b7cd;if((0x0,L[_0x3d64ed(0x58b)])(_0x10289b[_0x3d64ed(0x801)])){let _0x44737a=new Date()['getTime'](),_0xbdc18a=_0x10289b[_0x3d64ed(0x801)]+'?timestamp='+_0x44737a;_0x40b7cd=(await te[_0x3d64ed(0x42b)]['get'](_0xbdc18a,{'responseType':_0x3d64ed(0x361)}))[_0x3d64ed(0x311)];}else{if((0x0,L['isBase64'])(_0x10289b[_0x3d64ed(0x801)]))_0x40b7cd=Buffer['from'](_0x10289b[_0x3d64ed(0x801)],'base64');else throw new m(_0x3d64ed(0x354));}return await this[_0x3d64ed(0x8a4)][_0x3d64ed(0x4bf)](_0x10289b[_0x3d64ed(0x545)],_0x40b7cd),{'update':_0x3d64ed(0x1ed)};}catch(_0x5688bd){let _0x3e28a3='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture',_0x1e5a22=_0x5688bd instanceof Error?_0x5688bd[_0x3d64ed(0x923)]:typeof _0x5688bd==_0x3d64ed(0x4bd)?JSON[_0x3d64ed(0x5f3)](_0x5688bd):_0x5688bd,_0x2a61c0=_0x3e28a3+':\x20'+_0x1e5a22;throw this['logger'][_0x3d64ed(0x2c2)](this['instanceName']+'\x20('+this[_0x3d64ed(0x664)][_0x3d64ed(0x60f)]+_0x3d64ed(0x51c)+_0x2a61c0),new x(_0x2a61c0);}}},Bt=class u{constructor(_0x176a8c,_0x204854,_0x40c80f){const _0x233c28=a0_0x20331d;this[_0x233c28(0x2f6)]=_0x176a8c,this[_0x233c28(0x373)]=_0x204854,this[_0x233c28(0x402)]=_0x40c80f,this['db']={},this['redis']={},this['logger']=new $(u[_0x233c28(0x8b9)]),this['waInstances']={},(this[_0x233c28(0x8cc)](),this['noConnection'](),Object[_0x233c28(0x2df)](this['db'],_0x204854[_0x233c28(0x51d)](_0x233c28(0x8c2))),Object[_0x233c28(0x2df)](this[_0x233c28(0x6af)],_0x204854[_0x233c28(0x51d)]('REDIS')),this[_0x233c28(0x840)]=this['db'][_0x233c28(0x56c)]?this[_0x233c28(0x402)]['dbServer']?.['db'](this['db'][_0x233c28(0x8e5)]['DB_PREFIX_NAME']+_0x233c28(0x26f)):void 0x0,this[_0x233c28(0x371)]=this[_0x233c28(0x6af)][_0x233c28(0x56c)]?new ge(this['redis']):void 0x0);}async['instanceInfo'](_0x277bd2){const _0x5a9b9a=a0_0x20331d;if(_0x277bd2&&!this['waInstances'][_0x277bd2])throw new J(_0x5a9b9a(0x3ed)+_0x277bd2+_0x5a9b9a(0x431));let _0xadd37b=[];for await(let [_0x34ee1a,_0x58edcc]of Object[_0x5a9b9a(0x458)](this[_0x5a9b9a(0x77f)]))if(_0x58edcc&&_0x58edcc[_0x5a9b9a(0x62d)][_0x5a9b9a(0x52d)]===_0x5a9b9a(0x29f)){let _0x1ca514=await this[_0x5a9b9a(0x402)][_0x5a9b9a(0x4e2)][_0x5a9b9a(0x691)](_0x34ee1a);_0xadd37b['push']({'instance':{'instanceName':_0x34ee1a,'apikey':_0x1ca514[_0x5a9b9a(0x450)],'owner':_0x58edcc[_0x5a9b9a(0x60f)],'profileName':await _0x58edcc[_0x5a9b9a(0x4f3)]()||_0x5a9b9a(0x29d),'profilePictureUrl':_0x58edcc['profilePictureUrl']}});}return _0xadd37b[_0x5a9b9a(0x691)](_0x4c665c=>_0x4c665c['instance'][_0x5a9b9a(0x8ba)]===_0x277bd2)??_0xadd37b;}async['cleaningUp'](_0x485e9c){const _0x2f13b8=a0_0x20331d;if(this['db']['ENABLED']&&(await this[_0x2f13b8(0x402)][_0x2f13b8(0x81a)][_0x2f13b8(0x4a5)](),(await this[_0x2f13b8(0x840)][_0x2f13b8(0x30b)]())[_0x2f13b8(0x786)]>0x0&&await this[_0x2f13b8(0x840)][_0x2f13b8(0x622)](_0x485e9c)),this[_0x2f13b8(0x6af)][_0x2f13b8(0x56c)]){this['cache'][_0x2f13b8(0x8f9)]=_0x485e9c,await this[_0x2f13b8(0x371)][_0x2f13b8(0x21e)]();return;}}async['loadInstance'](){const _0x212c84=a0_0x20331d;await this[_0x212c84(0x6fd)]();let _0x196f70=async _0x2fd3ce=>{const _0x102bb8=_0x212c84;let _0x3f47c3=new Re(this[_0x102bb8(0x373)],this['eventEmitter'],this['repository']);_0x3f47c3[_0x102bb8(0x8ba)]=_0x2fd3ce,await _0x3f47c3[_0x102bb8(0x6a2)](),this[_0x102bb8(0x77f)][_0x2fd3ce]=_0x3f47c3;};try{if(this[_0x212c84(0x6af)][_0x212c84(0x56c)]){let _0x3a7fb5=await this['cache'][_0x212c84(0x579)]();_0x3a7fb5?.[_0x212c84(0x786)]>0x0&&_0x3a7fb5[_0x212c84(0x22b)](async _0x378408=>await _0x196f70(_0x378408['split'](':')[0x1]));return;}if(this['db'][_0x212c84(0x56c)]){await this[_0x212c84(0x402)][_0x212c84(0x81a)]['connect']();let _0x13f429=await this[_0x212c84(0x840)][_0x212c84(0x30b)]();_0x13f429[_0x212c84(0x786)]>0x0&&_0x13f429[_0x212c84(0x22b)](async _0x383152=>await _0x196f70(_0x383152[_0x212c84(0x350)]['replace'](/^[\w-]+\./,'')));return;}}catch(_0x1b9b3e){this['logger'][_0x212c84(0x2c2)](_0x1b9b3e);}}async['cleanDisconnectedInstances'](){const _0x163afd=a0_0x20331d;try{let _0x425d6e=await this[_0x163afd(0x402)]['auth'][_0x163afd(0x4ff)]({'online':!0x1});for(let _0x4ae85e of _0x425d6e){let _0x58f2e6=_0x4ae85e[_0x163afd(0x53e)];await re[_0x163afd(0x5a5)](K,_0x58f2e6);}console['log'](_0x163afd(0x8df)+_0x425d6e[_0x163afd(0x786)]);let _0x4e2e37={'online':!0x1},_0x3554ff=await this[_0x163afd(0x402)][_0x163afd(0x4e2)]['deleteMany'](_0x4e2e37);console[_0x163afd(0x834)](_0x163afd(0x3fa)+_0x3554ff['insertCount']);}catch(_0x1b4e71){console[_0x163afd(0x2c2)](_0x163afd(0x4dd),_0x1b4e71);}}async[a0_0x20331d(0x6fd)](){const _0x336551=a0_0x20331d;try{let _0x1e7803={'online':!0x1},_0x50b419={'online':!0x1,'lastDisconnect':Date['now']()},_0x2209c3=await this[_0x336551(0x402)][_0x336551(0x4e2)][_0x336551(0x379)](_0x1e7803,_0x50b419);await this[_0x336551(0x2dc)]();}catch(_0x18b0da){console['error'](_0x336551(0x676),_0x18b0da);}}['removeInstance'](){const _0x556a38=a0_0x20331d;this[_0x556a38(0x2f6)]['on'](_0x556a38(0x4d5),async _0xef0d82=>{const _0x234ce4=_0x556a38;try{this[_0x234ce4(0x77f)][_0xef0d82]=void 0x0;}catch{}try{this[_0x234ce4(0x655)](_0xef0d82);}finally{this['logger'][_0x234ce4(0x365)](_0x234ce4(0x3ed)+_0xef0d82+'\x22\x20-\x20REMOVED');}});}[a0_0x20331d(0x5d0)](){const _0x1456bf=a0_0x20331d;this[_0x1456bf(0x2f6)]['on'](_0x1456bf(0x32d),async _0x341058=>{const _0x36b937=_0x1456bf;try{this[_0x36b937(0x77f)][_0x341058]=void 0x0;}catch{}try{this[_0x36b937(0x655)](_0x341058);}finally{this['logger'][_0x36b937(0x365)](_0x36b937(0x3ed)+_0x341058+'\x22\x20-\x20NOT\x20CONNECTION');}});}},Wt=class extends _{[a0_0x20331d(0x418)](_0x539242){return ia(_0x539242);}async[a0_0x20331d(0x477)](_0x2d1a74){const _0x4bf91f=a0_0x20331d;if(_0x2d1a74[_0x4bf91f(0x786)]!==0x0)try{return{'insertCount':(await this[_0x4bf91f(0x418)](_0x2d1a74[0x0][_0x4bf91f(0x63b)])[_0x4bf91f(0x323)]([..._0x2d1a74]))[_0x4bf91f(0x786)]};}catch(_0x21d768){return _0x21d768;}}async[a0_0x20331d(0x691)](_0x34b14b,_0x1bd3a0){const _0x12fdb2=a0_0x20331d;try{let _0x357625=this[_0x12fdb2(0x418)](_0x1bd3a0),_0x278f60=A(_0x34b14b[_0x12fdb2(0x656)]);return await _0x357625['find'](_0x278f60)['sort']({'lastmsg':-0x1})['limit'](_0x34b14b?.[_0x12fdb2(0x7ce)]??0x0)[_0x12fdb2(0x4cf)]();}catch{return[];}}async[a0_0x20331d(0x78e)](_0xb7d7cf,_0x24889a){const _0x194d49=a0_0x20331d;try{let _0xed0304=this['getChatModelForOwner'](_0x24889a),_0x1641a7=A(_0xb7d7cf[_0x194d49(0x656)]);return _0x1641a7[_0x194d49(0x618)]={'$ne':[]},await _0xed0304[_0x194d49(0x691)](_0x1641a7)[_0x194d49(0x4b4)]({'lastmsg':-0x1})[_0x194d49(0x7ce)](_0xb7d7cf?.[_0x194d49(0x7ce)]??0x0)[_0x194d49(0x4cf)]();}catch{return[];}}async['delete'](_0x137712,_0x55a244){const _0x3656b5=a0_0x20331d;try{return{'deletedCount':(await this['getChatModelForOwner'](_0x55a244)['deleteMany']({..._0x137712[_0x3656b5(0x656)]}))[_0x3656b5(0x557)]};}catch(_0x1dbcd3){return{'error':_0x1dbcd3?.['toString']()};}}async[a0_0x20331d(0x321)](_0x1f4071,_0x3e4a7d){const _0x2d44fd=a0_0x20331d;try{return await this['getChatModelForOwner'](_0x3e4a7d)[_0x2d44fd(0x45c)]({..._0x1f4071[_0x2d44fd(0x656)]}),[];}catch(_0x24f12b){return{'error':_0x24f12b?.[_0x2d44fd(0x27d)]()};}}async[a0_0x20331d(0x63f)](_0x49893b,_0x4ba674){const _0x346f5b=a0_0x20331d;try{let _0x1d08d4=this[_0x346f5b(0x418)](_0x4ba674),_0x142a2f=A(_0x49893b[_0x346f5b(0x656)]);return await _0x1d08d4[_0x346f5b(0x63f)](_0x142a2f)[_0x346f5b(0x4cf)]();}catch{return null;}}async['updateOne'](_0x274804,_0x2ef613,_0x57a755,_0x339822,_0x33c7fc='$set'){const _0x526960=a0_0x20331d;try{let _0x318669={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x339822},_0x21771c=this[_0x526960(0x418)](_0x57a755),_0x10ce3f=A(_0x274804['where']);Object[_0x526960(0x4db)](_0x2ef613)[_0x526960(0x22b)](_0x29c137=>{_0x2ef613[_0x29c137]==null&&delete _0x2ef613[_0x29c137];});let _0x140833={};return _0x140833[_0x33c7fc]=_0x2ef613,await _0x21771c[_0x526960(0x858)](_0x10ce3f,_0x140833,_0x318669);}catch(_0x3d1a69){return console[_0x526960(0x2c2)](_0x3d1a69),null;}}async[a0_0x20331d(0x36d)](_0x34e1b4){const _0xf08cbc=a0_0x20331d;try{let _0xd5f6af=this[_0xf08cbc(0x418)](_0x34e1b4[0x0]['query'][_0xf08cbc(0x656)][_0xf08cbc(0x63b)]),_0x4f2cf6=_0x34e1b4[_0xf08cbc(0x41b)](_0x38d6cb=>({'updateOne':{'filter':{..._0x38d6cb['query']['where']},'update':{'$set':_0x38d6cb[_0xf08cbc(0x3fd)]},'upsert':!0x0}})),_0x29e963=await _0xd5f6af[_0xf08cbc(0x641)](_0x4f2cf6);return _0x29e963['modifiedCount']+_0x29e963['upsertedCount'];}catch(_0x24c75d){return console[_0xf08cbc(0x2c2)](_0x24c75d),0x0;}}async[a0_0x20331d(0x51b)](_0x2b011f){const _0x1a62f1=a0_0x20331d;try{let _0x24252c={'group_isCommunity':'','group_announce':'','group_size':''},_0x4b5c5a={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x127652={'$unset':_0x24252c};return(await this[_0x1a62f1(0x418)](_0x2b011f)[_0x1a62f1(0x36d)](_0x4b5c5a,_0x127652))[_0x1a62f1(0x42f)];}catch(_0x2d0f5e){return console[_0x1a62f1(0x2c2)](_0x1a62f1(0x374),_0x2d0f5e),0x0;}}async[a0_0x20331d(0x4ab)](_0x57b35c){const _0x25cfd5=a0_0x20331d;try{let _0x34971d=this[_0x25cfd5(0x418)](_0x57b35c),_0x2e4460={'leadInfo.etiquetas':{'$exists':!0x1}},_0x24ec2a={'$set':{'leadInfo.etiquetas':[]}};return(await _0x34971d[_0x25cfd5(0x36d)](_0x2e4460,_0x24ec2a))[_0x25cfd5(0x42f)];}catch(_0x619bb2){return console[_0x25cfd5(0x2c2)](_0x619bb2),0x0;}}async[a0_0x20331d(0x1ea)](_0x6ac697){const _0x42747c=a0_0x20331d;try{let _0x5b1b2f=this[_0x42747c(0x418)](_0x6ac697),_0x1be958={'leadInfo.tags':{'$exists':!0x1}},_0x266d0e={'$set':{'leadInfo.tags':[]}};return(await _0x5b1b2f[_0x42747c(0x36d)](_0x1be958,_0x266d0e))[_0x42747c(0x42f)];}catch(_0x4a6123){return console[_0x42747c(0x2c2)](_0x4a6123),0x0;}}async['updateMissingCustomFields'](_0x409722){const _0xf0dbd0=a0_0x20331d;try{let _0x4fb78a=this['getChatModelForOwner'](_0x409722),_0x1b5b52={'leadInfo.customFields':{'$exists':!0x1}},_0x4f73a5={'$set':{'leadInfo.customFields':[]}};return(await _0x4fb78a[_0xf0dbd0(0x36d)](_0x1b5b52,_0x4f73a5))[_0xf0dbd0(0x42f)];}catch(_0x516bbc){return console[_0xf0dbd0(0x2c2)](_0x516bbc),0x0;}}async['insertMany'](_0x3ae174,_0x3ba9d5){const _0x5cf892=a0_0x20331d;if(!Array[_0x5cf892(0x3f2)](_0x3ae174)||_0x3ae174[_0x5cf892(0x786)]===0x0)throw new Error('Nenhum\x20chat\x20fornecido\x20para\x20inserção.');try{return(await this[_0x5cf892(0x418)](_0x3ba9d5)[_0x5cf892(0x323)](_0x3ae174))[_0x5cf892(0x786)];}catch(_0x5f375e){throw console['error'](_0x5cf892(0x829),_0x5f375e),_0x5f375e;}}async[a0_0x20331d(0x336)](_0x5f21eb,_0x5959f9){const _0x19e1f7=a0_0x20331d;try{await this[_0x19e1f7(0x418)](_0x5959f9)[_0x19e1f7(0x24c)]({'_id':_0x5f21eb});}catch(_0x42b95b){throw console[_0x19e1f7(0x2c2)](_0x19e1f7(0x768),_0x42b95b),_0x42b95b;}}},zt=class extends _{constructor(_0x422d04,_0xf34f0c,_0x3a696c){const _0x34fdd2=a0_0x20331d;super(_0xf34f0c),this[_0x34fdd2(0x836)]=_0x422d04,this[_0x34fdd2(0x373)]=_0xf34f0c,this[_0x34fdd2(0x5b3)]=_0x3a696c;}async[a0_0x20331d(0x477)](_0x3d7982){const _0x38a81c=a0_0x20331d;if(_0x3d7982['length']!==0x0)try{return{'insertCount':(await this[_0x38a81c(0x836)][_0x38a81c(0x323)]([..._0x3d7982]))[_0x38a81c(0x786)]};}catch(_0x59298a){return _0x59298a;}}async[a0_0x20331d(0x3fd)](_0x185f3d,_0x3e0858){const _0x4f08f6=a0_0x20331d;try{let _0x5a52bc=A(_0x185f3d['where']);return{'updatedCount':(await this[_0x4f08f6(0x836)][_0x4f08f6(0x36d)](_0x5a52bc,{'$set':_0x3e0858}))['modifiedCount']};}catch(_0x4d843a){return console[_0x4f08f6(0x2c2)](_0x4f08f6(0x8f3),_0x4d843a),{'error':_0x4d843a[_0x4f08f6(0x27d)]()};}}async['findManyByIds'](_0x51ee9a){const _0x2bfd52=a0_0x20331d;try{let _0x4c250b={'_id':{'$in':_0x51ee9a}};return await this[_0x2bfd52(0x836)][_0x2bfd52(0x691)](_0x4c250b)[_0x2bfd52(0x4cf)]();}catch(_0x4cdc1){return console[_0x2bfd52(0x2c2)](_0x2bfd52(0x8ca),_0x4cdc1),[];}}async['delete'](_0x42b232){const _0x3972cc=a0_0x20331d;try{return{'deletedCount':(await this[_0x3972cc(0x836)][_0x3972cc(0x45c)]({..._0x42b232[_0x3972cc(0x656)]}))[_0x3972cc(0x557)]};}catch(_0xe2e09d){return{'error':_0xe2e09d?.[_0x3972cc(0x27d)]()};}}async[a0_0x20331d(0x691)](_0x3622c6){const _0x53a78d=a0_0x20331d;try{let _0x31570a=A(_0x3622c6[_0x53a78d(0x656)]);return await this[_0x53a78d(0x836)][_0x53a78d(0x691)](_0x31570a)[_0x53a78d(0x7ce)](_0x3622c6?.[_0x53a78d(0x7ce)]??0x0)[_0x53a78d(0x4cf)]();}catch{return[];}}async['findOne'](_0x291e8c){const _0x5589ce=a0_0x20331d;try{let _0x1c6020=A(_0x291e8c[_0x5589ce(0x656)]);return await this['cacheContactModel'][_0x5589ce(0x63f)](_0x1c6020)[_0x5589ce(0x4cf)]();}catch{return null;}}},Ht=class extends _{['getLabelModelForOwner'](_0x27fef1){return $a(_0x27fef1);}async[a0_0x20331d(0x2d5)](_0x4258a2,_0x3b672d,_0x5c9cd7,_0x57e4f2){const _0x2f8312=a0_0x20331d;try{let _0x56dafd={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x57e4f2},_0x243030=this[_0x2f8312(0x298)](_0x5c9cd7),_0x172d52=A(_0x4258a2[_0x2f8312(0x656)]);return await _0x243030[_0x2f8312(0x858)](_0x172d52,{'$set':_0x3b672d},_0x56dafd);}catch(_0x486fc6){return console[_0x2f8312(0x2c2)](_0x486fc6),null;}}async[a0_0x20331d(0x691)](_0x28c651,_0x31771a){const _0x943e49=a0_0x20331d;try{let _0x58386c=this['getLabelModelForOwner'](_0x31771a),_0x210587=A(_0x28c651[_0x943e49(0x656)]);return await _0x58386c['find'](_0x210587);}catch(_0x84060e){console[_0x943e49(0x2c2)](_0x84060e);}}async['delete'](_0x3f8814,_0x3e87f5){const _0x4fa066=a0_0x20331d;try{let _0x46c8bd=this[_0x4fa066(0x298)](_0x3e87f5),_0x4785f3=A(_0x3f8814[_0x4fa066(0x656)]);await _0x46c8bd[_0x4fa066(0x45c)](_0x4785f3);}catch(_0x446d93){console['error'](_0x446d93);}}async[a0_0x20331d(0x321)](_0x1dd65e){const _0x38d7d4=a0_0x20331d;try{return await this['getLabelModelForOwner'](_0x1dd65e)[_0x38d7d4(0x2cd)][_0x38d7d4(0x789)](),{'success':!0x0};}catch(_0x59d656){return console[_0x38d7d4(0x2c2)](_0x59d656),{'success':!0x1,'error':_0x59d656};}}},Kt=class{constructor(_0xab531){this['waMonitor']=_0xab531;}async[a0_0x20331d(0x71f)]({instanceName:_0x4c9a5a},_0x1d076e){const _0x2539e9=a0_0x20331d;return await this[_0x2539e9(0x866)][_0x2539e9(0x77f)][_0x4c9a5a]['editChat'](_0x1d076e);}async[a0_0x20331d(0x78a)]({instanceName:_0x319a47},_0x2dbd7e){const _0x1f3293=a0_0x20331d;return await this[_0x1f3293(0x866)]['waInstances'][_0x319a47][_0x1f3293(0x78a)](_0x2dbd7e);}async[a0_0x20331d(0x825)]({instanceName:_0x398b83},_0x369bc9){const _0x3170f5=a0_0x20331d;return await this[_0x3170f5(0x866)]['waInstances'][_0x398b83][_0x3170f5(0x825)](_0x369bc9);}async[a0_0x20331d(0x1f5)]({instanceName:_0x42e991},_0xb9e87a){const _0x2b9c3a=a0_0x20331d;return await this[_0x2b9c3a(0x866)][_0x2b9c3a(0x77f)][_0x42e991][_0x2b9c3a(0x7e7)](_0xb9e87a);}async['archiveChat']({instanceName:_0x3f51b5},_0x263521){const _0x14f447=a0_0x20331d;return await this[_0x14f447(0x866)]['waInstances'][_0x3f51b5]['archiveChat'](_0x263521);}async[a0_0x20331d(0x509)]({instanceName:_0xc91068},_0xfd250a){const _0xa6bde5=a0_0x20331d;return await this['waMonitor'][_0xa6bde5(0x77f)][_0xc91068][_0xa6bde5(0x509)](_0xfd250a);}async[a0_0x20331d(0x26b)]({instanceName:_0x417d10},_0x215b61){const _0x5ee981=a0_0x20331d;return await this[_0x5ee981(0x866)]['waInstances'][_0x417d10][_0x5ee981(0x7db)](_0x215b61['number']);}async['fetchProfile']({instanceName:_0x26ff97},_0x7d8a78){const _0x2bb05b=a0_0x20331d;return await this[_0x2bb05b(0x866)][_0x2bb05b(0x77f)][_0x26ff97][_0x2bb05b(0x514)](_0x7d8a78[_0x2bb05b(0x6f9)]);}async[a0_0x20331d(0x661)]({instanceName:_0x34d2bf},_0x39cdd2){const _0x3b218b=a0_0x20331d;return await this['waMonitor'][_0x3b218b(0x77f)][_0x34d2bf][_0x3b218b(0x661)](_0x39cdd2);}async[a0_0x20331d(0x815)]({instanceName:_0x5422a7},_0xe7e584){const _0x541186=a0_0x20331d;return await this[_0x541186(0x866)]['waInstances'][_0x5422a7][_0x541186(0x815)](_0xe7e584);}async[a0_0x20331d(0x82d)]({instanceName:_0x5d2f9e},_0x2b4ebc){const _0x315f8b=a0_0x20331d;return await this[_0x315f8b(0x866)][_0x315f8b(0x77f)][_0x5d2f9e][_0x315f8b(0x82d)](_0x2b4ebc);}async[a0_0x20331d(0x2b3)]({instanceName:_0x1724e9},_0x4614ce){const _0x2ea703=a0_0x20331d;return await this['waMonitor'][_0x2ea703(0x77f)][_0x1724e9][_0x2ea703(0x2b3)](_0x4614ce);}async[a0_0x20331d(0x584)]({instanceName:_0x54840a}){const _0x302a91=a0_0x20331d;return await this['waMonitor']['waInstances'][_0x54840a][_0x302a91(0x584)]();}async['fetchChats']({instanceName:_0x1b2a4f}){const _0x72e0ea=a0_0x20331d;return await this['waMonitor'][_0x72e0ea(0x77f)][_0x1b2a4f][_0x72e0ea(0x370)]();}async[a0_0x20331d(0x2bb)]({instanceName:_0x3aae11}){const _0x5217c5=a0_0x20331d;return await this[_0x5217c5(0x866)][_0x5217c5(0x77f)][_0x3aae11][_0x5217c5(0x2bb)]();}async['updatePrivacySettings']({instanceName:_0x263339},_0x538662){const _0x2ebeea=a0_0x20331d;return await this[_0x2ebeea(0x866)]['waInstances'][_0x263339]['updatePrivacySettings'](_0x538662);}async[a0_0x20331d(0x69d)]({instanceName:_0x1c4ddf},_0x21ba3b){const _0x1d82c6=a0_0x20331d;return await this[_0x1d82c6(0x866)][_0x1d82c6(0x77f)][_0x1c4ddf][_0x1d82c6(0x69d)](_0x21ba3b[_0x1d82c6(0x6f9)]);}async[a0_0x20331d(0x692)]({instanceName:_0x1f868b},_0x254f57){const _0x7ed69d=a0_0x20331d;return await this[_0x7ed69d(0x866)][_0x7ed69d(0x77f)][_0x1f868b]['updateProfileName'](_0x254f57[_0x7ed69d(0x8b9)]);}async[a0_0x20331d(0x90b)]({instanceName:_0x47591c},_0x266465){const _0x5a1dcf=a0_0x20331d;return await this[_0x5a1dcf(0x866)][_0x5a1dcf(0x77f)][_0x47591c]['updateProfileStatus'](_0x266465['status']);}async[a0_0x20331d(0x4bf)]({instanceName:_0x5704f6},_0x552760){const _0x13caff=a0_0x20331d;return await this[_0x13caff(0x866)][_0x13caff(0x77f)][_0x5704f6][_0x13caff(0x4bf)](_0x552760[_0x13caff(0x678)]);}async[a0_0x20331d(0x5a3)]({instanceName:_0x4ec800},_0x281179){const _0x49e1d6=a0_0x20331d;return await this[_0x49e1d6(0x866)][_0x49e1d6(0x77f)][_0x4ec800]['removeProfilePicture']();}},Qt=require(a0_0x20331d(0x3ac)),Yt=class u{constructor(_0x50f5ab,_0x3adee8,_0x1085f6,_0x15d175,_0x4ccfe6){const _0xe75ce4=a0_0x20331d;this[_0xe75ce4(0x866)]=_0x50f5ab,this[_0xe75ce4(0x373)]=_0x3adee8,this[_0xe75ce4(0x402)]=_0x1085f6,this['eventEmitter']=_0x15d175,this[_0xe75ce4(0x21b)]=_0x4ccfe6,this['logger']=new $(u[_0xe75ce4(0x8b9)]);}async[a0_0x20331d(0x451)]({instanceName:_0x161e52,apikey:_0x132fe1,number:_0x2ffc50,proxy:_0x58c851=!0x0}){const _0x4748f4=a0_0x20331d;try{let _0x57351f=new Re(this['configService'],this[_0x4748f4(0x2f6)],this[_0x4748f4(0x402)]);_0x57351f[_0x4748f4(0x8ba)]=_0x161e52,this[_0x4748f4(0x866)][_0x4748f4(0x77f)][_0x57351f[_0x4748f4(0x8ba)]]=_0x57351f;let _0x3c25fc={};_0x132fe1?(await this[_0x4748f4(0x402)][_0x4748f4(0x4e2)][_0x4748f4(0x260)]({'apikey':_0x132fe1},_0x161e52),_0x3c25fc[_0x4748f4(0x450)]=_0x132fe1):_0x3c25fc=await this['authService'][_0x4748f4(0x668)]({'instanceName':_0x57351f[_0x4748f4(0x8ba)]});let _0xae9720;if(_0x2ffc50){if(_0xae9720=await this[_0x4748f4(0x4d4)](_0x2ffc50),_0xae9720[_0x4748f4(0x2c2)])throw new x(_0xae9720[_0x4748f4(0x2c2)]['toString']());_0x2ffc50=_0xae9720[_0x4748f4(0x6f9)];}let _0x3740d1;return await _0x57351f[_0x4748f4(0x6a2)](_0x2ffc50),await(0x0,Qt['delay'])(0xfa0),_0x2ffc50&&await(0x0,Qt[_0x4748f4(0x7b3)])(0xbb8),_0x3740d1=_0x57351f[_0x4748f4(0x5cd)],{'instance':{'instanceName':_0x57351f[_0x4748f4(0x8ba)],'status':_0x4748f4(0x6a8)},'hash':_0x3c25fc,'qrcode':_0x3740d1};}catch(_0x1318b3){throw this[_0x4748f4(0x7a2)]['error'](_0x1318b3),_0x1318b3;}}async[a0_0x20331d(0x381)]({instanceName:_0x47b1a5,number:_0x5ef66c=null}){const _0x378b52=a0_0x20331d;try{let _0x5b1021=this[_0x378b52(0x866)]['waInstances'][_0x47b1a5];switch(_0x5b1021?.[_0x378b52(0x62d)]?.[_0x378b52(0x52d)]){case _0x378b52(0x8fe):return await _0x5b1021[_0x378b52(0x6a2)](_0x5ef66c),await(0x0,Qt['delay'])(0x7d0),_0x5b1021['qrCode'];case'connecting':return _0x5b1021['qrCode'];default:return await this[_0x378b52(0x5a0)]({'instanceName':_0x47b1a5});}}catch(_0x5258c2){this[_0x378b52(0x7a2)][_0x378b52(0x834)](_0x5258c2);}}async['connectionState']({instanceName:_0x1517af}){const _0x4742ab=a0_0x20331d;let _0x1e7857=this[_0x4742ab(0x866)][_0x4742ab(0x77f)][_0x1517af][_0x4742ab(0x62d)],_0x19b293=null;_0x1e7857[_0x4742ab(0x52d)]===_0x4742ab(0x29f)&&_0x1517af&&(_0x19b293=await this[_0x4742ab(0x866)][_0x4742ab(0x67f)](_0x1517af));let _0x4098dc=null;return _0x1e7857[_0x4742ab(0x52d)]===_0x4742ab(0x396)&&_0x1517af&&(_0x4098dc=this[_0x4742ab(0x866)]['waInstances'][_0x1517af][_0x4742ab(0x5cd)]),{'instance':_0x1517af,'connectionStatus':_0x1e7857,'instanceInfo':_0x19b293,'qrcode':_0x4098dc};}async[a0_0x20331d(0x4d4)](_0x312d0e){const _0x2b586f=a0_0x20331d;_0x312d0e=_0x312d0e[_0x2b586f(0x759)](/\D/g,'');let _0x5a85fe=Object[_0x2b586f(0x4db)](this['waMonitor']['waInstances'])['filter'](_0x422c2d=>{const _0x4c8f0f=_0x2b586f;let _0x15a497=this['waMonitor'][_0x4c8f0f(0x77f)][_0x422c2d];return _0x15a497&&_0x15a497[_0x4c8f0f(0x62d)]&&_0x15a497[_0x4c8f0f(0x62d)][_0x4c8f0f(0x52d)]===_0x4c8f0f(0x29f);});if(_0x5a85fe['length']===0x0)return{'number':this[_0x2b586f(0x7f4)](_0x312d0e)};let _0x4cec2d=Math[_0x2b586f(0x60b)](Math[_0x2b586f(0x636)]()*_0x5a85fe[_0x2b586f(0x786)]),_0x5bd476=_0x5a85fe[_0x4cec2d];try{let _0x2bd868=(await this[_0x2b586f(0x866)]['waInstances'][_0x5bd476][_0x2b586f(0x78a)]({'numbers':[_0x312d0e]}))[_0x2b586f(0x76c)]();return _0x2bd868['exists']?{'number':_0x2bd868[_0x2b586f(0x461)][_0x2b586f(0x759)](_0x2b586f(0x6c2),'')}:{'number':_0x312d0e,'error':'Número\x20não\x20possui\x20WhatsApp.'};}catch(_0x34a0ff){return this[_0x2b586f(0x7a2)][_0x2b586f(0x2c2)]('Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:'+_0x34a0ff),{'number':_0x312d0e,'error':'Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.'};}}[a0_0x20331d(0x7f4)](_0x542a82){const _0x5290af=a0_0x20331d;let _0x37f1e6=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x5290af(0x318)](_0x542a82);if(_0x37f1e6&&_0x37f1e6[0x1]==='55'){let _0x46e9f2=_0x37f1e6[0x2],_0x275dda=_0x37f1e6[0x3],_0x49f92e=_0x37f1e6[0x4];if(parseInt(_0x46e9f2)>=0x1f&&_0x275dda==='9')return _0x37f1e6[0x1]+_0x46e9f2+_0x49f92e;}return _0x542a82;}async[a0_0x20331d(0x600)]({instanceName:_0x750bcd}){const _0x4b2271=a0_0x20331d;try{return this[_0x4b2271(0x866)][_0x4b2271(0x77f)][_0x750bcd]?.[_0x4b2271(0x8a4)]?.['ws']?.['close'](),{'status':_0x4b2271(0x922),'error':!0x1,'response':{'message':'Instance\x20restarted'}};}catch(_0x404c63){this[_0x4b2271(0x7a2)][_0x4b2271(0x2c2)](_0x404c63);}}async[a0_0x20331d(0x875)]({instanceName:_0x6b756a}){const _0x34bd24=a0_0x20331d;return _0x6b756a?this[_0x34bd24(0x866)]['instanceInfo'](_0x6b756a):this[_0x34bd24(0x866)][_0x34bd24(0x67f)]();}async[a0_0x20331d(0x534)]({instanceName:_0x240140}){const _0x533e57=a0_0x20331d;try{return await this[_0x533e57(0x866)][_0x533e57(0x77f)][_0x240140]?.[_0x533e57(0x8a4)]?.[_0x533e57(0x534)](_0x533e57(0x606)+_0x240140),{'error':!0x1,'message':_0x533e57(0x7f6)};}catch(_0x3a04b2){throw new x(_0x3a04b2[_0x533e57(0x27d)]());}}async[a0_0x20331d(0x729)]({instanceName:_0x5c1082}){const _0x4e9532=a0_0x20331d;if((await this['connectionState']({'instanceName':_0x5c1082}))[_0x4e9532(0x62d)][_0x4e9532(0x52d)]==='open')throw new m([_0x4e9532(0x5b9),_0x4e9532(0x218)]);try{return delete this['waMonitor'][_0x4e9532(0x77f)][_0x5c1082],{'error':!0x1,'message':_0x4e9532(0x8d7)};}catch(_0x41dceb){throw new m(_0x41dceb['toString']());}}},ne=require(a0_0x20331d(0x39e)),Xt=class{constructor(_0x385c66){const _0x4b8405=a0_0x20331d;this[_0x4b8405(0x866)]=_0x385c66;}async[a0_0x20331d(0x7bb)]({instanceName:_0x176833},_0x21166a){const _0x374992=a0_0x20331d;return await this[_0x374992(0x866)][_0x374992(0x77f)][_0x176833][_0x374992(0x807)](_0x21166a);}async[a0_0x20331d(0x5ca)]({instanceName:_0x4c1ae3},_0x5230b2){const _0x69bb87=a0_0x20331d;return await this[_0x69bb87(0x866)][_0x69bb87(0x77f)][_0x4c1ae3]['menuMessage'](_0x5230b2);}async[a0_0x20331d(0x52e)]({instanceName:_0x3fd7b7},_0x3a79bd){const _0x1d7f35=a0_0x20331d;if((0x0,ne['isBase64'])(_0x3a79bd?.[_0x1d7f35(0x682)]?.[_0x1d7f35(0x4ad)])&&!_0x3a79bd?.[_0x1d7f35(0x682)]?.['fileName'])throw new m(_0x1d7f35(0x420));if((0x0,ne[_0x1d7f35(0x58b)])(_0x3a79bd?.['mediaMessage']?.['media'])||(0x0,ne[_0x1d7f35(0x88e)])(_0x3a79bd?.[_0x1d7f35(0x682)]?.[_0x1d7f35(0x4ad)]))return await this[_0x1d7f35(0x866)][_0x1d7f35(0x77f)][_0x3fd7b7][_0x1d7f35(0x682)](_0x3a79bd);throw new m(_0x1d7f35(0x85c));}async[a0_0x20331d(0x1ee)]({instanceName:_0x5086f0},_0x36e238){const _0x35aecc=a0_0x20331d;if((0x0,ne[_0x35aecc(0x58b)])(_0x36e238['stickerMessage'][_0x35aecc(0x801)])||(0x0,ne[_0x35aecc(0x88e)])(_0x36e238[_0x35aecc(0x693)][_0x35aecc(0x801)]))return await this[_0x35aecc(0x866)][_0x35aecc(0x77f)][_0x5086f0][_0x35aecc(0x56b)](_0x36e238);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async['sendWhatsAppAudio']({instanceName:_0x342a9f},_0x166ff6){const _0x34cb7c=a0_0x20331d;if((0x0,ne[_0x34cb7c(0x58b)])(_0x166ff6[_0x34cb7c(0x8c4)][_0x34cb7c(0x481)])||(0x0,ne['isBase64'])(_0x166ff6[_0x34cb7c(0x8c4)]['audio']))return await this[_0x34cb7c(0x866)]['waInstances'][_0x342a9f][_0x34cb7c(0x226)](_0x166ff6);throw new m(_0x34cb7c(0x85c));}async['sendButtons']({instanceName:_0xfb55df},_0x488261){const _0x1cc47a=a0_0x20331d;if((0x0,ne[_0x1cc47a(0x88e)])(_0x488261[_0x1cc47a(0x4ba)][_0x1cc47a(0x682)]?.[_0x1cc47a(0x4ad)])&&!_0x488261[_0x1cc47a(0x4ba)][_0x1cc47a(0x682)]?.[_0x1cc47a(0x7ad)])throw new m('For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.');return await this[_0x1cc47a(0x866)][_0x1cc47a(0x77f)][_0xfb55df][_0x1cc47a(0x4ba)](_0x488261);}async['sendLocation']({instanceName:_0x54f607},_0x147930){const _0x50ec47=a0_0x20331d;return await this[_0x50ec47(0x866)]['waInstances'][_0x54f607]['locationMessage'](_0x147930);}async[a0_0x20331d(0x6bc)]({instanceName:_0x467a0a},_0x548503){const _0x496a9c=a0_0x20331d;return await this[_0x496a9c(0x866)][_0x496a9c(0x77f)][_0x467a0a][_0x496a9c(0x283)](_0x548503);}async[a0_0x20331d(0x7d9)]({instanceName:_0xb2ec40},_0x2e0492){const _0x4cbd28=a0_0x20331d;return await this[_0x4cbd28(0x866)][_0x4cbd28(0x77f)][_0xb2ec40][_0x4cbd28(0x57c)](_0x2e0492);}async[a0_0x20331d(0x886)]({instanceName:_0x35d143},_0x7fbe01){const _0x2d4af8=a0_0x20331d;return await this[_0x2d4af8(0x866)][_0x2d4af8(0x77f)][_0x35d143][_0x2d4af8(0x821)](_0x7fbe01);}async['sendReaction']({instanceName:_0x376ea4},_0x403a06){const _0x20ba43=a0_0x20331d;if(!_0x403a06[_0x20ba43(0x813)][_0x20ba43(0x8bc)]['match'](/[^\(\)\w\sà-ú"-\+]+/))throw new m(_0x20ba43(0x1e9));return await this[_0x20ba43(0x866)]['waInstances'][_0x376ea4]['reactionMessage'](_0x403a06);}async[a0_0x20331d(0x491)]({instanceName:_0x19db57},_0x39ce11){const _0x35b226=a0_0x20331d;return await this[_0x35b226(0x866)][_0x35b226(0x77f)][_0x19db57][_0x35b226(0x45e)](_0x39ce11);}},Fi=require(a0_0x20331d(0x2e0)),Js=require('uuid'),Zt=class u{constructor(_0x22272b,_0x2a9e13,_0x17a8d5){const _0x4460de=a0_0x20331d;this['configService']=_0x22272b,this[_0x4460de(0x866)]=_0x2a9e13,this[_0x4460de(0x402)]=_0x17a8d5,this[_0x4460de(0x7a2)]=new $(u[_0x4460de(0x8b9)]);}async[a0_0x20331d(0x832)](_0x224be6){const _0x24b7e0=a0_0x20331d;let _0x2b4877=this[_0x24b7e0(0x373)]['get']('AUTHENTICATION')['JWT'],_0x3e9244=(0x0,Fi[_0x24b7e0(0x5d6)])({'instanceName':_0x224be6[_0x24b7e0(0x8ba)],'apiName':nt,'tokenId':(0x0,Js['v4'])()},_0x2b4877[_0x24b7e0(0x35c)],{'expiresIn':_0x2b4877['EXPIRIN_IN'],'encoding':_0x24b7e0(0x73a),'subject':_0x24b7e0(0x6a7)}),_0x110c44=await this[_0x24b7e0(0x402)][_0x24b7e0(0x4e2)][_0x24b7e0(0x260)]({'jwt':_0x3e9244},_0x224be6[_0x24b7e0(0x8ba)]);if(_0x110c44[_0x24b7e0(0x2c2)])throw this['logger'][_0x24b7e0(0x2c2)]({'localError':u[_0x24b7e0(0x8b9)]+_0x24b7e0(0x779),'error':_0x110c44['error']}),new m(_0x24b7e0(0x22c),_0x110c44[_0x24b7e0(0x2c2)]?.[_0x24b7e0(0x27d)]());return{'jwt':_0x3e9244};}async[a0_0x20331d(0x450)](_0x19d65f){const _0x56ab1a=a0_0x20331d;let _0x518286=(0x0,Js['v4'])()[_0x56ab1a(0x5ad)](),_0x214b9f=await this['repository'][_0x56ab1a(0x4e2)][_0x56ab1a(0x260)]({'apikey':_0x518286},_0x19d65f[_0x56ab1a(0x8ba)]);if(_0x214b9f[_0x56ab1a(0x2c2)])throw this[_0x56ab1a(0x7a2)][_0x56ab1a(0x2c2)]({'localError':u[_0x56ab1a(0x8b9)]+'.jwt','error':_0x214b9f[_0x56ab1a(0x2c2)]}),new m(_0x56ab1a(0x22c),_0x214b9f[_0x56ab1a(0x2c2)]?.[_0x56ab1a(0x27d)]());return{'apikey':_0x518286};}async[a0_0x20331d(0x668)](_0x406ce7){const _0xd8c310=a0_0x20331d;let _0x379574=this[_0xd8c310(0x373)][_0xd8c310(0x51d)](_0xd8c310(0x63d));return await this[_0x379574['TYPE']](_0x406ce7);}},es=class{constructor(_0x5b80a4){const _0x29c19e=a0_0x20331d;this[_0x29c19e(0x866)]=_0x5b80a4;}async[a0_0x20331d(0x48c)](_0x4c7e79,_0x56424a){const _0x35cca1=a0_0x20331d;return await this[_0x35cca1(0x866)][_0x35cca1(0x77f)][_0x4c7e79['instanceName']][_0x35cca1(0x48c)](_0x56424a);}async['updateGroupPicture'](_0x1f7023,_0x34b6d6){const _0x19fb17=a0_0x20331d;return await this[_0x19fb17(0x866)][_0x19fb17(0x77f)][_0x1f7023[_0x19fb17(0x8ba)]]['updateGroupPicture'](_0x34b6d6);}async[a0_0x20331d(0x3b8)](_0x208fad,_0x5657a2){const _0x3c9ffb=a0_0x20331d;return await this[_0x3c9ffb(0x866)][_0x3c9ffb(0x77f)][_0x208fad['instanceName']]['groupDesc'](_0x5657a2);}async[a0_0x20331d(0x22d)](_0x6e1c1c,_0x4fa985){const _0x2d2094=a0_0x20331d;return await this[_0x2d2094(0x866)][_0x2d2094(0x77f)][_0x6e1c1c['instanceName']]['groupName'](_0x4fa985);}async['groupBetterSetting'](_0xa64c28,_0x346918){const _0x545cc6=a0_0x20331d;return await this[_0x545cc6(0x866)][_0x545cc6(0x77f)][_0xa64c28['instanceName']][_0x545cc6(0x23d)](_0x346918);}async[a0_0x20331d(0x33b)](_0x806ba2,_0x1b8fc8){const _0x3380df=a0_0x20331d;return await this['waMonitor'][_0x3380df(0x77f)][_0x806ba2[_0x3380df(0x8ba)]][_0x3380df(0x33b)](_0x1b8fc8);}async['findGroupInfo'](_0x3836c2,_0x4fbbf4){const _0x56912d=a0_0x20331d;return await this['waMonitor'][_0x56912d(0x77f)][_0x3836c2[_0x56912d(0x8ba)]]['findGroup'](_0x4fbbf4);}async[a0_0x20331d(0x44e)](_0x10b24f){const _0x5e52d5=a0_0x20331d;return await this['waMonitor'][_0x5e52d5(0x77f)][_0x10b24f[_0x5e52d5(0x8ba)]][_0x5e52d5(0x44e)]();}async['inviteCode'](_0x1117c8,_0x59b56d){const _0x1b01d3=a0_0x20331d;return await this[_0x1b01d3(0x866)][_0x1b01d3(0x77f)][_0x1117c8['instanceName']][_0x1b01d3(0x1e3)](_0x59b56d);}async[a0_0x20331d(0x732)](_0x451736,_0xf29130){const _0x258272=a0_0x20331d;return await this[_0x258272(0x866)]['waInstances'][_0x451736['instanceName']]['joinGroup'](_0xf29130);}async[a0_0x20331d(0x4f9)](_0x13e713,_0x2b68de){const _0x5b5adc=a0_0x20331d;return await this[_0x5b5adc(0x866)][_0x5b5adc(0x77f)][_0x13e713[_0x5b5adc(0x8ba)]][_0x5b5adc(0x4f9)](_0x2b68de);}async[a0_0x20331d(0x823)](_0x41550f,_0x4c1940){const _0x5de0ea=a0_0x20331d;return await this[_0x5de0ea(0x866)][_0x5de0ea(0x77f)][_0x41550f[_0x5de0ea(0x8ba)]]['revokeInviteCode'](_0x4c1940);}async['findParticipants'](_0x2be0fb,_0x24b9f5){const _0x39a141=a0_0x20331d;return await this[_0x39a141(0x866)][_0x39a141(0x77f)][_0x2be0fb[_0x39a141(0x8ba)]][_0x39a141(0x79c)](_0x24b9f5);}async[a0_0x20331d(0x4dc)](_0x242049,_0x294ee5){const _0x5c6593=a0_0x20331d;return await this[_0x5c6593(0x866)][_0x5c6593(0x77f)][_0x242049[_0x5c6593(0x8ba)]]['updateGParticipant'](_0x294ee5);}async[a0_0x20331d(0x630)](_0xb38557,_0x2ba08c){const _0x41adc4=a0_0x20331d;return await this['waMonitor'][_0x41adc4(0x77f)][_0xb38557['instanceName']]['toggleEphemeral'](_0x2ba08c);}async[a0_0x20331d(0x7ec)](_0x490606,_0x4c9a42){const _0x5e3db1=a0_0x20331d;return await this['waMonitor'][_0x5e3db1(0x77f)][_0x490606['instanceName']][_0x5e3db1(0x7ec)](_0x4c9a42);}},ts=class{constructor(_0x3839bd){const _0x387c72=a0_0x20331d;this[_0x387c72(0x866)]=_0x3839bd;}[a0_0x20331d(0x260)](_0x49f89a,_0x4aea97){const _0x46a1e6=a0_0x20331d;return this['waMonitor'][_0x46a1e6(0x77f)][_0x49f89a[_0x46a1e6(0x8ba)]][_0x46a1e6(0x6ed)](_0x4aea97);}async['find'](_0x1552d5){const _0xa72914=a0_0x20331d;try{return await this[_0xa72914(0x866)]['waInstances'][_0x1552d5['instanceName']][_0xa72914(0x242)]();}catch{return{'enabled':null,'url':''};}}},Bp=new $(a0_0x20331d(0x6b1)),ss=class{constructor(_0x477d38){const _0x278052=a0_0x20331d;this[_0x278052(0x866)]=_0x477d38;}async['editScheduleMessage'](_0x4ca5f2,_0x2a7905){const _0xa8a30=a0_0x20331d;return await this['waMonitor']['waInstances'][_0x4ca5f2[_0xa8a30(0x8ba)]][_0xa8a30(0x65f)](_0x2a7905);}async[a0_0x20331d(0x1e7)](_0x317f09){const _0x230e92=a0_0x20331d;return await this['waMonitor'][_0x230e92(0x77f)][_0x317f09[_0x230e92(0x8ba)]][_0x230e92(0x1e7)]();}async[a0_0x20331d(0x537)](_0x35f728){const _0x3bccb4=a0_0x20331d;return await this[_0x3bccb4(0x866)][_0x3bccb4(0x77f)][_0x35f728[_0x3bccb4(0x8ba)]][_0x3bccb4(0x537)]();}async[a0_0x20331d(0x3df)](_0x154696){const _0x19c8a9=a0_0x20331d;return await this[_0x19c8a9(0x866)]['waInstances'][_0x154696[_0x19c8a9(0x8ba)]]['getAutomateSystem']();}async['updateAgent'](_0x851740,_0x52a23e){const _0x39f21f=a0_0x20331d;return await this[_0x39f21f(0x866)][_0x39f21f(0x77f)][_0x851740[_0x39f21f(0x8ba)]][_0x39f21f(0x440)](_0x52a23e);}async[a0_0x20331d(0x615)](_0xc84130,_0x571dd3){const _0x41db23=a0_0x20331d;return await this[_0x41db23(0x866)][_0x41db23(0x77f)][_0xc84130[_0x41db23(0x8ba)]][_0x41db23(0x615)](_0x571dd3);}async[a0_0x20331d(0x703)](_0x57f876,_0x81db72){const _0x25cc35=a0_0x20331d;return await this[_0x25cc35(0x866)]['waInstances'][_0x57f876[_0x25cc35(0x8ba)]][_0x25cc35(0x703)](_0x81db72);}async[a0_0x20331d(0x82e)](_0x89c9f2,_0x4fb2e3){const _0x234495=a0_0x20331d;return await this[_0x234495(0x866)][_0x234495(0x77f)][_0x89c9f2[_0x234495(0x8ba)]][_0x234495(0x82e)](_0x4fb2e3);}async[a0_0x20331d(0x5d7)](_0x14d191,_0x2144ad){const _0x44ab4e=a0_0x20331d;return await this['waMonitor'][_0x44ab4e(0x77f)][_0x14d191[_0x44ab4e(0x8ba)]][_0x44ab4e(0x5d7)](_0x2144ad);}async[a0_0x20331d(0x3a7)](_0x50f759,_0x4f3e51,_0x367032,_0x1ac5a9){const _0x3f2134=a0_0x20331d;return await this[_0x3f2134(0x866)][_0x3f2134(0x77f)][_0x50f759][_0x3f2134(0x3a7)](_0x4f3e51,_0x367032,_0x1ac5a9);}async['getConversation'](_0x4a0e7c,_0xd6bb90){const _0x38a5ac=a0_0x20331d;return await this[_0x38a5ac(0x866)]['waInstances'][_0x4a0e7c[_0x38a5ac(0x8ba)]][_0x38a5ac(0x441)](_0xd6bb90);}async[a0_0x20331d(0x578)](_0x37ee15,_0x462416){const _0x271441=a0_0x20331d;return await this[_0x271441(0x866)]['waInstances'][_0x37ee15['instanceName']]['fetchConversation'](_0x462416);}async[a0_0x20331d(0x85d)](_0x8cc465,_0x427b4c){const _0x3b76ca=a0_0x20331d;return await this[_0x3b76ca(0x866)][_0x3b76ca(0x77f)][_0x8cc465[_0x3b76ca(0x8ba)]][_0x3b76ca(0x85d)](_0x427b4c);}async[a0_0x20331d(0x27e)](_0x4a1c96,_0x46f556){const _0x2ba2b1=a0_0x20331d;return await this['waMonitor'][_0x2ba2b1(0x77f)][_0x4a1c96[_0x2ba2b1(0x8ba)]]['deleteConversation'](_0x46f556);}async['getFlow'](_0x2ea2fb,_0x1133da){const _0x2c662c=a0_0x20331d;return await this[_0x2c662c(0x866)][_0x2c662c(0x77f)][_0x2ea2fb[_0x2c662c(0x8ba)]]['getFlow'](_0x1133da['_id']);}async[a0_0x20331d(0x37e)](_0x535dae,_0x1b6550,_0x115d59){const _0x52c531=a0_0x20331d;return await this['waMonitor']['waInstances'][_0x535dae[_0x52c531(0x8ba)]][_0x52c531(0x37e)](_0x1b6550,_0x115d59);}async[a0_0x20331d(0x84e)](_0x3874a4,_0xa61432,_0x47a3ff){const _0x58c913=a0_0x20331d;return await this[_0x58c913(0x866)]['waInstances'][_0x3874a4[_0x58c913(0x8ba)]][_0x58c913(0x84e)](_0xa61432,_0x47a3ff);}async['editFlowBlock'](_0x2e119c,_0x306b32){const _0x310045=a0_0x20331d;return await this[_0x310045(0x866)]['waInstances'][_0x2e119c[_0x310045(0x8ba)]]['editFlowBlock'](_0x306b32);}async['editFlowReply'](_0x4e1546,_0x340cee){const _0x218367=a0_0x20331d;return await this[_0x218367(0x866)][_0x218367(0x77f)][_0x4e1546[_0x218367(0x8ba)]]['editFlowReply'](_0x340cee);}async[a0_0x20331d(0x7c8)](_0xd39acd,_0x3fb22a){const _0x4372cd=a0_0x20331d;return await this['waMonitor'][_0x4372cd(0x77f)][_0xd39acd['instanceName']][_0x4372cd(0x7c8)](_0x3fb22a);}async[a0_0x20331d(0x570)](_0x19fef3,_0x4ddcff){const _0x587ff4=a0_0x20331d;return await this[_0x587ff4(0x866)][_0x587ff4(0x77f)][_0x19fef3[_0x587ff4(0x8ba)]][_0x587ff4(0x570)](_0x4ddcff);}async[a0_0x20331d(0x257)](_0x14b263,_0x570852){const _0x4f8cfe=a0_0x20331d;return await this[_0x4f8cfe(0x866)][_0x4f8cfe(0x77f)][_0x14b263[_0x4f8cfe(0x8ba)]][_0x4f8cfe(0x257)](_0x570852);}async[a0_0x20331d(0x4e3)](_0x2a7408,_0x4dc9ae){const _0x38f455=a0_0x20331d;return await this['waMonitor'][_0x38f455(0x77f)][_0x2a7408[_0x38f455(0x8ba)]][_0x38f455(0x4e3)](_0x4dc9ae);}async[a0_0x20331d(0x250)](_0x3b7023,_0x31c1cf){const _0x4f5f99=a0_0x20331d;return await this[_0x4f5f99(0x866)][_0x4f5f99(0x77f)][_0x3b7023[_0x4f5f99(0x8ba)]][_0x4f5f99(0x250)](_0x31c1cf);}async[a0_0x20331d(0x2e6)](_0x4baa79){const _0x3e766b=a0_0x20331d;return await this[_0x3e766b(0x866)][_0x3e766b(0x77f)][_0x4baa79[_0x3e766b(0x8ba)]]['allFlows']();}},as=class{constructor(_0x1259d4){this['webhookService']=_0x1259d4;}async['createWebhook'](_0x54b185,_0x39e3de){const _0x1cf4b2=a0_0x20331d;return this['webhookService'][_0x1cf4b2(0x260)](_0x54b185,_0x39e3de);}async['findWebhook'](_0x232c77){const _0x427514=a0_0x20331d;return this[_0x427514(0x45a)]['find'](_0x232c77);}},is=class extends _{constructor(_0x20baf0,_0x4dc712){const _0x6ca4e8=a0_0x20331d;super(_0x4dc712),this[_0x6ca4e8(0x4ed)]=_0x20baf0,this[_0x6ca4e8(0x373)]=_0x4dc712;}async['create'](_0x4f1407,_0x58f3ff){const _0x1d24ff=a0_0x20331d;try{return this[_0x1d24ff(0x407)][_0x1d24ff(0x56c)]?{'insertCount':(await this['webhookModel'][_0x1d24ff(0x34f)]({'_id':_0x58f3ff},{..._0x4f1407},{'upsert':!0x0}))[_0x1d24ff(0x42f)]}:{'insertCount':0x1};}catch(_0x299e6c){return _0x299e6c;}}async[a0_0x20331d(0x65e)](_0x2c7713){const _0x29b6e8=a0_0x20331d;try{if(this[_0x29b6e8(0x407)][_0x29b6e8(0x56c)]){await this[_0x29b6e8(0x4ed)][_0x29b6e8(0x24c)]({'_id':_0x2c7713});return;}}catch(_0x128261){return{'error':_0x128261};}}async[a0_0x20331d(0x691)](_0x20ae30){const _0x4eedfa=a0_0x20331d;try{if(this['dbSettings']['ENABLED'])return await this[_0x4eedfa(0x4ed)][_0x4eedfa(0x63f)]({'_id':_0x20ae30});}catch{return{};}}},os=class extends _{constructor(_0x1955d3,_0x5b9b46){const _0x31b35d=a0_0x20331d;super(_0x5b9b46),this[_0x31b35d(0x43c)]=_0x1955d3,this['configService']=_0x5b9b46,this[_0x31b35d(0x4e2)]=_0x5b9b46[_0x31b35d(0x51d)](_0x31b35d(0x63d));}async[a0_0x20331d(0x260)](_0x1358b0,_0xa0fe68){const _0x45d39c=a0_0x20331d;try{if(this[_0x45d39c(0x407)][_0x45d39c(0x56c)])return{'insertCount':(await this['authModel'][_0x45d39c(0x2d5)]({'_id':_0xa0fe68},{'$set':{..._0x1358b0}},{'upsert':!0x0}))[_0x45d39c(0x42f)]};}catch(_0x228afa){return{'error':_0x228afa};}}async['updateAll'](_0x555565,_0x4444a3){const _0x1227a4=a0_0x20331d;try{if(this['dbSettings'][_0x1227a4(0x56c)])return{'insertCount':(await this[_0x1227a4(0x43c)]['updateMany'](_0x555565,{'$set':_0x4444a3},{'upsert':!0x1}))['modifiedCount']};throw new Error(_0x1227a4(0x2ec));}catch(_0x1f7664){return{'error':_0x1f7664};}}async[a0_0x20331d(0x45c)](_0x3cf1d7){const _0x418f58=a0_0x20331d;try{if(this[_0x418f58(0x407)]['ENABLED'])return{'insertCount':(await this[_0x418f58(0x43c)][_0x418f58(0x45c)](_0x3cf1d7))[_0x418f58(0x557)]};throw new Error(_0x418f58(0x413));}catch(_0x3e148b){return{'error':_0x3e148b};}}async[a0_0x20331d(0x65e)](_0x5ef889){const _0x28e547=a0_0x20331d;try{if(this[_0x28e547(0x407)][_0x28e547(0x56c)]){await this[_0x28e547(0x43c)]['deleteOne']({'_id':_0x5ef889});return;}}catch(_0x415e40){return{'error':_0x415e40};}}async['find'](_0x30d4dd){const _0x164927=a0_0x20331d;try{if(this['dbSettings'][_0x164927(0x56c)])return await this[_0x164927(0x43c)][_0x164927(0x63f)]({'_id':_0x30d4dd});}catch{return{};}}async[a0_0x20331d(0x7c9)](){const _0x4c7866=a0_0x20331d;try{if(this[_0x4c7866(0x407)][_0x4c7866(0x56c)])return await this[_0x4c7866(0x43c)][_0x4c7866(0x691)]();}catch{return[];}}async[a0_0x20331d(0x4ff)](_0x129ce8){const _0x1432d5=a0_0x20331d;try{if(this[_0x1432d5(0x407)][_0x1432d5(0x56c)])return await this[_0x1432d5(0x43c)][_0x1432d5(0x691)](_0x129ce8);}catch{return[];}}},rs=class extends _{async[a0_0x20331d(0x24c)](_0x548f39){const _0x1a9304=a0_0x20331d;try{let _0x5ab841=A(_0x548f39['where']);return{'deletedCount':(await Ee[_0x1a9304(0x24c)](_0x5ab841))[_0x1a9304(0x557)]};}catch(_0x479330){return{'error':_0x479330?.[_0x1a9304(0x27d)]()};}}async['updateOne'](_0x52bead,_0xe128ac){const _0x55094b=a0_0x20331d;try{let _0x2ae5ce=await Ee[_0x55094b(0x677)](_0x52bead);return _0x2ae5ce?(Object['assign'](_0x2ae5ce,_0xe128ac),await _0x2ae5ce[_0x55094b(0x84d)]()):(console[_0x55094b(0x2c2)](_0x55094b(0x555),_0x52bead),null);}catch(_0x2fef6c){return console[_0x55094b(0x2c2)](_0x55094b(0x604),_0x2fef6c),null;}}async['createAndSave'](_0x42c346){const _0x365689=a0_0x20331d;try{return await new Ee(_0x42c346)[_0x365689(0x84d)]();}catch(_0x37a6c5){return console[_0x365689(0x2c2)](_0x365689(0x453),_0x37a6c5),null;}}async[a0_0x20331d(0x7c9)](_0x39d09b){const _0x5a2786=a0_0x20331d;try{let _0x505cff=_0x39d09b[_0x5a2786(0x656)]??{};return await Ee[_0x5a2786(0x691)](_0x505cff)[_0x5a2786(0x7ce)](_0x39d09b[_0x5a2786(0x7ce)]??0x0)[_0x5a2786(0x4cf)]();}catch(_0x779c4b){return console[_0x5a2786(0x2c2)](_0x5a2786(0x500),_0x779c4b),[];}}async[a0_0x20331d(0x63f)](_0x1b11f6){const _0x5e34ae=a0_0x20331d;try{let _0x5b005d=A(_0x1b11f6[_0x5e34ae(0x656)]);return await Ee['findOne'](_0x5b005d)[_0x5e34ae(0x4cf)]();}catch{return null;}}},ns=class extends _{[a0_0x20331d(0x546)](_0x5f16a3){return Ea(_0x5f16a3);}async[a0_0x20331d(0x477)](_0x3ccc07){const _0x19d656=a0_0x20331d;if(_0x3ccc07['length']!==0x0)try{return{'insertCount':(await this[_0x19d656(0x546)](_0x3ccc07[0x0]['owner'])[_0x19d656(0x323)]([..._0x3ccc07]))[_0x19d656(0x786)]};}catch(_0x200d45){return _0x200d45;}}async['delete'](_0x2381d8,_0xefe7db){const _0x379fe9=a0_0x20331d;try{let _0x484f2e=this[_0x379fe9(0x546)](_0xefe7db),_0x480802=A(_0x2381d8['where']);return{'deletedCount':(await _0x484f2e['deleteMany'](_0x480802))['deletedCount']};}catch(_0x68a274){return{'error':_0x68a274?.[_0x379fe9(0x27d)]()};}}async[a0_0x20331d(0x24c)](_0x41146b,_0x173452){const _0x37ec61=a0_0x20331d;try{let _0x82f4ff=this[_0x37ec61(0x546)](_0x173452),_0x365ab9=A(_0x41146b[_0x37ec61(0x656)]);return{'deletedCount':(await _0x82f4ff['deleteOne'](_0x365ab9))[_0x37ec61(0x557)]};}catch(_0x1d7ed9){return{'error':_0x1d7ed9?.[_0x37ec61(0x27d)]()};}}async[a0_0x20331d(0x3fd)](_0x3e2668,_0x1c9512){const _0x3e2b2c=a0_0x20331d;try{if(_0x3e2668[_0x3e2b2c(0x786)]===0x0)return;let _0x22a6eb=this['getConversationModelForOwner'](_0x1c9512),_0x57b96c=_0x3e2668['map'](_0x5afa32=>({'updateOne':{'filter':{'name':_0x5afa32[_0x3e2b2c(0x8b9)],'owner':_0x1c9512},'update':{..._0x5afa32}}})),{modifiedCount:_0x5291fc}=await _0x22a6eb['bulkWrite'](_0x57b96c);return{'insertCount':_0x5291fc};}catch{return;}}async[a0_0x20331d(0x36d)](_0x68dee5,_0x42c723,_0x54776e){const _0x4f11ca=a0_0x20331d;try{return{'modifiedCount':(await this['getConversationModelForOwner'](_0x54776e)[_0x4f11ca(0x36d)](_0x68dee5,{'$set':_0x42c723})[_0x4f11ca(0x318)]())[_0x4f11ca(0x42f)]};}catch(_0x498a22){return console[_0x4f11ca(0x2c2)](_0x4f11ca(0x5fb),_0x498a22),{'error':_0x498a22};}}async[a0_0x20331d(0x2d5)](_0x3ff46a,_0x523fcb,_0xd99a80){const _0xe7227c=a0_0x20331d;try{return await this[_0xe7227c(0x546)](_0xd99a80)[_0xe7227c(0x858)]({'_id':_0x3ff46a},{'$set':_0x523fcb},{'new':!0x0,'upsert':!0x0})['lean']();}catch(_0x4b109a){return console[_0xe7227c(0x2c2)](_0x4b109a),null;}}async[a0_0x20331d(0x691)](_0x1ce015,_0x3841b4){const _0x59eaf8=a0_0x20331d;try{return await this[_0x59eaf8(0x546)](_0x3841b4)['find'](_0x1ce015)[_0x59eaf8(0x4b4)]({'lastInteraction':-0x1})['lean']();}catch{return[];}}async[a0_0x20331d(0x63f)](_0x459e68,_0x502eea){const _0x375d16=a0_0x20331d;try{return await this['getConversationModelForOwner'](_0x502eea)['findOne']({..._0x459e68[_0x375d16(0x656)]})['lean']();}catch{return null;}}async[a0_0x20331d(0x321)](_0x288f81){const _0x11ccc7=a0_0x20331d;try{return await this[_0x11ccc7(0x546)](_0x288f81)[_0x11ccc7(0x2cd)][_0x11ccc7(0x789)](),{'success':!0x0};}catch(_0x5cc5f7){return console[_0x11ccc7(0x2c2)](_0x5cc5f7),{'success':!0x1,'error':_0x5cc5f7};}}},cs=class extends _{['getScheduleMessageModelForOwner'](_0x4ea90d){return va(_0x4ea90d);}async['bulkWrite'](_0x42c9e0,_0x506b9f){const _0x2c3325=a0_0x20331d;try{return await this[_0x2c3325(0x259)](_0x506b9f)[_0x2c3325(0x641)](_0x42c9e0);}catch(_0x402ac3){return console[_0x2c3325(0x2c2)](_0x2c3325(0x2ab),_0x402ac3),null;}}async[a0_0x20331d(0x314)](_0x4f60cd,_0x5174d1){const _0x2bf552=a0_0x20331d;try{let _0x9dfd71=this[_0x2bf552(0x259)](_0x5174d1);return await new _0x9dfd71(_0x4f60cd)[_0x2bf552(0x84d)]();}catch(_0x2102b8){return console[_0x2bf552(0x2c2)](_0x2bf552(0x278),_0x2102b8),null;}}async[a0_0x20331d(0x24c)](_0xd784c8,_0x34f4a7){const _0x985347=a0_0x20331d;try{return await this['getScheduleMessageModelForOwner'](_0x34f4a7)[_0x985347(0x28e)](_0xd784c8),{};}catch(_0x289362){return{'error':_0x289362?.[_0x985347(0x27d)]()};}}async[a0_0x20331d(0x2d5)](_0x1d6c72,_0x539fa5,_0x5ac549,_0x39a105={}){const _0x323a61=a0_0x20331d;try{return await this['getScheduleMessageModelForOwner'](_0x5ac549)[_0x323a61(0x858)](_0x1d6c72,_0x539fa5,{..._0x39a105,'new':!0x0})[_0x323a61(0x4cf)]();}catch(_0x3d8664){return console['error']('Erro\x20ao\x20atualizar\x20uma\x20mensagem:',_0x3d8664),null;}}async[a0_0x20331d(0x697)](_0x3079c2,_0x30addf,_0xd8461){const _0x215ed1=a0_0x20331d;try{return await this[_0x215ed1(0x259)](_0xd8461)[_0x215ed1(0x58d)](_0x3079c2,_0x30addf,{'new':!0x0})[_0x215ed1(0x4cf)]();}catch(_0x31cea6){return console['error'](_0x215ed1(0x6e6),_0x31cea6),null;}}async[a0_0x20331d(0x691)](_0x5dc332,_0x3155a6){const _0x1becf9=a0_0x20331d;try{return await this[_0x1becf9(0x259)](_0x3155a6)[_0x1becf9(0x691)](_0x5dc332[_0x1becf9(0x656)])[_0x1becf9(0x7ce)](_0x5dc332?.[_0x1becf9(0x7ce)]??0x0)[_0x1becf9(0x4b4)]({'when':0x1})['lean']();}catch{return[];}}async['findOne'](_0x2034e1,_0x4db73b){const _0x223b1e=a0_0x20331d;try{return await this[_0x223b1e(0x259)](_0x4db73b)[_0x223b1e(0x63f)](_0x2034e1[_0x223b1e(0x656)])[_0x223b1e(0x4b4)]({'when':0x1})[_0x223b1e(0x4cf)]();}catch{return null;}}async[a0_0x20331d(0x677)](_0x1a85ac,_0x431d54){const _0x30a75f=a0_0x20331d;try{return await this[_0x30a75f(0x259)](_0x431d54)[_0x30a75f(0x677)](_0x1a85ac)[_0x30a75f(0x4cf)]();}catch{return null;}}async[a0_0x20331d(0x45c)](_0x5a01db,_0x35a243){const _0x5723f3=a0_0x20331d;try{return{'deletedCount':(await this[_0x5723f3(0x259)](_0x35a243)[_0x5723f3(0x45c)](_0x5a01db))[_0x5723f3(0x557)]};}catch(_0x22a83f){return console['error'](_0x5723f3(0x70a),_0x22a83f),{'error':_0x22a83f};}}async[a0_0x20331d(0x321)](_0x5bdabc){const _0x32b792=a0_0x20331d;try{return await this[_0x32b792(0x259)](_0x5bdabc)[_0x32b792(0x2cd)][_0x32b792(0x789)](),{'success':!0x0};}catch(_0x1e7bc0){return console['error'](_0x1e7bc0),{'success':!0x1,'error':_0x1e7bc0};}}},ls=class extends _{async[a0_0x20331d(0x3fd)](_0x35447a,_0xefe5f4){const _0x522bf5=a0_0x20331d;try{if(this['dbSettings'][_0x522bf5(0x56c)])return await Te['findOneAndUpdate']({'_id':_0xefe5f4},{'$set':_0x35447a},{'new':!0x0});}catch(_0x5a31bd){throw console[_0x522bf5(0x2c2)](_0x522bf5(0x6a1),_0x5a31bd),_0x5a31bd;}}async[a0_0x20331d(0x81c)](_0x4ad483){const _0x251a96=a0_0x20331d;try{let _0x861a43=await Te[_0x251a96(0x677)](_0x4ad483);return _0x861a43?_0x861a43['autoCompleteMessages']||(_0x861a43[_0x251a96(0x8c5)]=[],await _0x861a43['save']()):(_0x861a43=new Te({'_id':_0x4ad483,'autoCompleteMessages':[]}),await _0x861a43[_0x251a96(0x84d)]()),_0x861a43;}catch(_0x46d126){return _0x46d126[_0x251a96(0x79f)]===0x2af8&&_0x46d126['keyPattern']&&_0x46d126[_0x251a96(0x5fa)]['autoCompleteMessages.command']?(console[_0x251a96(0x2c2)](_0x251a96(0x2ef)),await Te[_0x251a96(0x2cd)][_0x251a96(0x82a)](_0x251a96(0x59c)),null):(console['error'](_0x251a96(0x511),_0x46d126),null);}}},Vo=new $(a0_0x20331d(0x882)),Go=new Xe(b),Bo=new Wt(b),Wo=new lt(b),zo=new zt(ca,b),Ho=new is(fa,b),Ko=new os(ha,b),Qo=new $e(He,b),Yo=new rs(b),Xo=new Ht(b),Zo=new ns(b),er=new cs(b),tr=new ls(b),we=new Qe(Go,Bo,Wo,zo,Ho,Ko,Qo,Yo,Zo,Xo,er,tr,R?.[a0_0x20331d(0x4ce)]()),z=new Bt(fs,b,we),sr=new Zt(b,z,we),ar=new ts(z),Is=new as(ar),T=new ss(z),he=new Yt(z,b,we,fs,sr),H=new Xt(z),k=new Kt(z),V=new es(z);function a0_0x26a0(){const _0x1bcb5b=['Router','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.','cacheInstanceRepository','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','capitalizedWords','isBase64','URL\x20não\x20disponível','expression','BRL','REDIS','mimetype','truncatedto','groupInviteCode','DisconnectReason','getMIMEType','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','MESSAGES_UPDATE','https://v6.ident.me','compression','/wa-message-update','0123456789ABCDEF','):\x20Conversa\x20atualizada\x20em\x20memória','Type\x20is\x20required','this.reconnectAttempts:\x20','getAllData','):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','Erro\x20ao\x20arquivar\x20chat','client','editOperator','Instância\x20não\x20encontrada.','format','\x20and\x20data:','Logger','status','Erro\x20ao\x20buscar\x20o\x20fluxo','URL','defineProperty','express','Message','DATABASE_CONNECTION_PASSWORD','.fileUrl','/automate','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','messages.update','fromObject','toBRL','loadInstance','headers','name','instanceName','findGroupInfo','reaction','getUpdate','All_Instances_Config','Erro\x20ao\x20editar\x20o\x20bloco:\x20','none','getMessageModelForOwner','DATABASE','FULLCHAIN','audioMessage','autoCompleteMessages','findGroup','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','_Chats','Error\x20finding\x20many\x20contacts:','variable','removeInstance','):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção','The\x20global\x20api\x20key\x20must\x20be\x20set','processgoToFlow','\x20minutos','cleanStore','LOG','):including\x20timestamp\x20in\x20url:\x20','mongodb','):\x20newSecondValue\x20após\x20replaceVariables:','):\x20Editando\x20replyOption...','Instance\x20deleted','unlocked','#ffae04','/*.json','redisEnv','):\x20Editando\x20grupo\x20do\x20fluxo...','request\x20received\x20in\x20editFlowgroup','createIPv6','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','Variáveis\x20não\x20encontradas:','mongoose','document','blockLogs','valid','CONNECTION','every','isValidAndUniqueIPv6','conversation','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','includes','):\x20Bloco\x20original\x20para\x20cópia:\x20','#9ba6ff','useMultiFileAuthState','qrcode','locked','Last\x20message\x20not\x20found\x20for\x20number:\x20','exists','Error\x20updating\x20cache\x20contact:','):\x20teve\x20mudanças\x20chat.muteEndTime:\x20','Content\x20is\x20required','\x0a*Você\x20respondeu*:\x0a','width','lastInteraction','reference','arrayUnique','\x1b[33m%s\x1b[0m','?timestamp=','uazapiSendText','close','stdout','removeData','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','):\x20Procurando\x20conversa','\x20:\x20','stateConnection','formatVCard','unreadcount','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','uncaughtException','pm2\x20flush','/media','updateProfileStatus','lastReceivedMessage','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','STORE_CONTACTS','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','CONTACTS_UPDATE','ChatModel','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','envYaml','):Fetching\x20business\x20profile','longitude','spawn','messages.upsert','#9ab6c1','):\x20leadInfoVariables','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','SINGLE_SELECT','automateSystem','*\x0a\x0a','request\x20received\x20in\x20editFlowvariable','ObjectId','API_KEY','SUCCESS','message','static','$addToSet','reconnectTimestamps','closeExistingConversations','nomecompleto','contact','messageId','Garbage\x20collection\x20não\x20está\x20disponível.','https','createServer','messages','varedit','Contacts\x20not\x20found','tags','pushName','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20','AUTHENTICATION_JWT_SECRET','\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','inviteCode','order','documentMessage','boolean','getScheduleMessage','getHours','\x22reaction\x22\x20must\x20be\x20an\x20emoji','updateMissingTags','flush','condition','success','sendSticker','groupValidate','memberAddMode','and','Deleted\x20','delayChatLabel','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','readMessage','awaitingApproval','height','AUTHENTICATION_JWT_EXPIRIN_IN','oldValue','Retornando\x20grupos\x20SEM\x20cache','empty','lastCondition','greater','processConditions','contacts','\x1b[33m','\x20segundos\x20antes\x20de\x20reconectar...','):\x20Entrou\x20na\x20função\x20scheduleFlow','#dfaef0','MESSAGES_UPSERT','createJid','generateRandomIPv6','\x1b[40m','descId','_error','scheduleSendAudio',']\x20(','AutomateSystem\x20não\x20foi\x20inicializado','binary',',\x20isAdmin:\x20','):\x20Conversa\x20está\x20expirada\x20-\x20voto','blocks','Erro\x20ao\x20copiar\x20o\x20documento','#ff9484','latitude','toNumber','whoCanEdit','):Audio\x20processed','CHATS_UPDATE','The\x20instance\x20needs\x20to\x20be\x20disconnected','toFile','Erro\x20ao\x20adicionar\x20label\x20','authService','post','SERVER_ACK','delAll','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','Instance\x20Key\x20from\x20DB:','/instance','chats.update','waitingMenu_text','shareOwners','Fluxo\x20id\x20\x27','audioWhatsapp','):\x20Entrou\x20na\x20função\x20clearVariables','folder','scheduled','secondValue','forEach','Authentication\x20error','groupName','pino','setUpdate','496364pbsIvN','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','testingWith','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','Erro\x20na\x20função\x20updateChatWithMessage:\x20','#d8e651','newValue','CREDENTIALS','replaceVariablesInReplyOptions','waitingForReplyMenu','uuid','createSectionsFromValues','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','groupBetterSetting','/wa-contacts','Operador:\x20\x22','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','PASSWORD','findWebhook','\x20-y','pollCreationMessage','DELIVERY_ACK','AutomateSystem',',\x20Resultado:\x20','test','flowName','LOG_LEVEL','):\x20Mensagens\x20prontas\x20para\x20envio\x20encontradas:\x20','deleteOne','routerPath','Instance\x20ID:','groupadd','deleteFlow','.xls','SSL_CONF_PRIVKEY','console','$pull','onTime','Limpando\x20logs\x20do\x20PM2...','editFlowVaredit','261569kMukCD','getScheduleMessageModelForOwner','createHash','delaySecMin','updateMessage','lastMessage','CONECTADO\x20À\x20UAZAPI','\x1b[46m','create','):Converted\x20image\x20deleted','IPv6\x20Prefix\x20detected:\x20','testIPv6','array','):Sending\x20audio\x20whatsapp','poll','processApiRequest','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','fetchProfilePicture','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','processclearVariables','startCommandWord','-instances','some','Comando\x20desconhecido','writeFile','statusJidList','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','):Output\x20path:\x20','getTime','/exit','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','labelId','delayChatLabel_MAX_RETRIES','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp','messaging-history.set','toString','deleteConversation','normalizeMessageContent','errorLog','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','CORS','pollMessage','editflowreply',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','fromMe','errors','vcard','chats','importChatsAntigo','.txt','findByIdAndDelete','Conexão\x20estabelecida','pollCreationMessageKey','trim','participant','end','exit','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','put','ignoreGroups','getLabelModelForOwner','listResponseMessage','readData','/chat','flow','not\x20loaded','blockId','open','axios','allflows','):\x20Criou\x20conversa\x20no\x20startFlowWebhook','getContentType','listen','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','role','applyvaredit','groupUpdateSubject','toArray','ReplyOption\x20com\x20ID\x20','Erro\x20ao\x20executar\x20bulkWrite:','6380171ryahkw','sendMessageAck','getContactModelForOwner','setting','saveConversationToDatabase','http://checkip.dyndns.org','long','fetchMessages','_Messages','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','flowConfig','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','triedToSend','EMAIL','optionDescription','fetchPrivacySettings','ip\x20-6\x20addr\x20add\x20','approve','protocolMessage','instance.','\x22,\x20valor\x20a\x20substituir:\x20\x22','subjectTime','error','findAndReplaceRegex','Falhou\x20ao\x20encontrar\x20chat\x20','$dbName','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','status.instance','findContacts','result','saveChatVariables','whatsappNumbers','ContactsAndGroups','collection','URL:','STORE_CLEANING_TERMINAL','notas','newStoppedUntil','abs','):\x20enviado\x20para\x20[','model','updateOne','admin_add','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','):\x20\x27Enviando\x20mídia\x20para\x20\x27','groups.upsert','flushHeaders','action','cleanDisconnectedInstances','\x1b[42m','The\x20property\x20cannot\x20be\x20empty','assign','jsonwebtoken',',\x20Comparador:\x20','docker','):Notifying\x20clients\x20for\x20chat:\x20','connection.update','pollErrorMessage','allFlows','.svg','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','send.message','all','.png','Database\x20is\x20not\x20enabled','Error\x20in\x20chatModify\x20for\x20number\x20','round','Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...','no-cache','convertToWebP','updateReadReceiptsPrivacy','key','\x1b[47m','__esModule','eventEmitter','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','):\x20[messages.upsert]\x20group\x20ignored','synchronizeAndMapFlows','RECONNECT_TIME_FRAME','/instance/delete','.url','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','):\x20Query\x20params:\x20','stopConversation','PRESENCE_UPDATE','cachedData-whatsapp','getDevice','):\x20Fluxos\x20não\x20estão\x20ativados','bateu\x20events','File\x20written\x20to\x20path:\x20','CONTACTS_UPSERT','downloads','#92ceac','FlowRouter','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','collections','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','LOG_COLOR','):Delete\x20chat','global','):\x20Atualizando\x20status\x20da\x20mensagem\x20','data','caption','updateGroupPicture','createAndSave','proto','contacts.update','Erro\x20ao\x20buscar\x20conversas','exec','agents','Valor\x20de\x20find\x20ou\x20replace\x20ausente','/wa-qrcode','fone','Parando\x20aplicação,\x20atualização\x20recebida','Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.','\x1b[1m\x1b[37m','findGroupInfos','deleteAll','varedits','insertMany','messages.set','match','notify','ON\x20-\x20dbName:\x20','):\x20Envio\x20interrompido\x20devido\x20a\x20UUID\x20de\x20processo\x20não\x20corresponder.','request_method','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','https://github.com/uazapi/uazapi.git','#b4ebff','no.connection','type','\x20minutos\x20verificará\x20novas\x20mensagens','prototype','createConversationforStartFlow','):\x20Flow\x20\x27','METHODS','ff:fe','selectedOptions','deleteChat','Fluxo\x20agendado\x20pelo\x20fluxo\x20','processPollUpdateMessage','sendPresenceUpdate','node-cache','groupSetting','processblock','https://uazapi-plugin.bubbleapps.io/','Novo\x20IP\x20criado:\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.',',\x20received\x20','Fluxo\x20não\x20encontrado\x20na\x20memória.','):Image\x20is\x20base64','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','command','):\x20\x27Enviando\x20audio\x20para\x20\x27','verifiedName','presence','CacheContacts\x20database\x20connection\x20closed.','enabled','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','licenca','user','replaceOne','namespace','Unauthorized','ScheduleMessage','DARK','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','editflowvariable','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','buttonText','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','startsWith','app-state-sync-key','scheduleMessage','SECRET','replyOptions','AutomateFunctions','CORS_CREDENTIALS','prepareWAMessageMedia','arraybuffer','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','!cmd_','saveMediaToFile','warn','groupHandler','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','displayName','addBlock','write','pow','hasOwnProperty','updateMany','):\x20Chat\x20','pictureUrl','fetchChats','cache','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','configService','Error\x20removing\x20unused\x20chat\x20fields:','\x20não\x20encontrado\x20para\x20atualização.','node-mime-types','stopIfLastReturnedError','getMessage','updateAll','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','validate','./.git/config','GROUP_PARTICIPANTS_UPDATE','createFlow','now','50mb','connectToWhatsappController','split','\x20mensagens\x20de\x20','composing','https://api.elevenlabs.io/v1/text-to-speech/','groupParticipantsUpdate','):\x20teve\x20mudanças\x20chat.archived:\x20','STORE_MESSAGE','MESSAGES_SET','quoted','\x1b[0m',',\x20Novo\x20tamanho:\x20','E-mail:\x20','Data\x20inválida\x20fornecida','participants','/:instanceName','writeData','Missing\x20global\x20api\x20key','method','slice','username','connecting','isConnected','https://','retrySendMessage','Erro\x20ao\x20normalizar\x20a\x20mensagem:','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','last_update','):\x20ev.flush\x20realizado','class-validator','idSchedule','):\x20Enviando\x20mensagem\x20para\x20','groups','LICENSE_INVALID','dayjs','text/event-stream','throwAndLogError','clearVariables','startFlowWebhook','trimmed','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','groupJoinApprovalMode','QRCODE_UPDATED','@whiskeysockets/baileys','label_jid','notMatchRegex','updateReplyOption','app','replaceVariablesLogs','body','@broadcast','groupRequestParticipantsList','):\x20Enviando\x20localização','Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...','loggedOut','groupDesc','Bloco\x20com\x20ID\x20','Erro\x20ao\x20atualizar\x20conversa:\x20','sendCommand','fileLength','bearer','API\x20Key\x20inválida.','creation','):\x20Fluxo\x20\x27','\x20não\x20encontrado\x20para\x20cópia','Erro\x20ao\x20importar\x20chats','value','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','downloadMediaMessage','Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.','):Image\x20created','firstValue','groupdata','true','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','startID','uazapiSendMedia','eventHandler','Retornando\x20grupos\x20COM\x20cache','removeChatLabel','Flow\x20iniciado\x20com\x20','env.KEY\x20!==\x20key','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','request\x20received\x20in\x20editFlow','Tentando\x20reconectar...','messageHandle','sendDataWebhook','express-async-errors','.TEL;waid=','chatHandle','updateStatusPrivacy','unknown\x20operation\x20type\x20[','TEXT','Subdomínio\x20extraído\x20do\x20caminho\x20SSL:','getAutomateSystem','Chat\x20com\x20ID\x20','util','js-yaml','senderKeyDistributionMessage','timeInMinutes','PRIVKEY','updatePrivacySettings','\x27\x20não\x20encontrado','formatStatusMessage','desativadoFluxoAte','endsWith','remoteJid','fullName','Instance\x20\x22','indexOf','?authSource=admin&readPreference=primary&directConnection=true','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','crypto','isArray','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','archived','Module\x20-\x20ON','CHATS_SET','Parando\x20aplicação...','group-participants.update','ERROR','Instâncias\x20removidas:\x20','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','minutesToClose','update','667954ozWSDA','stack','addresss','Group\x20not\x20found','repository','findAndReplace','PRODUCT_LIST','\x1b[30m','/media/','dbSettings','segundos','statusCode','Enter\x20a\x20value\x20in\x20milliseconds','Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','Nenhum\x20participante\x20válido\x20encontrado.','hex','oldToken','findChats','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','^\x5cd+([-]\x5cd+)*@g.us$','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','[AUTH]\x20Database\x20is\x20not\x20enabled','stderr','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','title','call','getChatModelForOwner','Falha\x20ao\x20processar\x20fetchBusinessProfile','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','map','repeat','not_announcement','list','\x1b[33m\x1b[1m','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','\x0aFN:','author','StartBot','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','\x20não\x20encontrado','myAppStateKeyId','joinGroupValidate','isListOfNumbers','.pptx','):\x20Conversa\x20inserida\x20com\x20sucesso.','default','):\x20Comando\x20desconhecido:\x20','Erro\x20ao\x20alterar\x20privacidade','messageSecret','modifiedCount','\x1b[44m','\x22\x20not\x20found','):\x20Limpando\x20AutomateSystem','creds.json','CLEANING_INTERVAL','removed','output','leadInfo.etiquetas','unlinkSync','/instance/connect','waUploadToServer','connectionClosed','authModel','waitingMenu_replyOptions','):\x20isVote:\x20','parseInt','updateAgent','getConversation','findFlow','setHeader','flowConversation','):\x20Current\x20Time:\x20','convertedOptions','chatModify','):\x20Conversa\x20está\x20expirada','msgRetryCounterCache','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','\x1b[37m','toBrazilianNumberFormat','Database\x20connection\x20closed.','findGroups','1980795yvTCYA','apikey','createInstance','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','Cache-Control','DELETED','processawaitSeconds','Erro\x20ao\x20editar\x20o\x20chat','entries','/events','webhookService','):\x20Going\x20to\x20','deleteMany','getBusinessProfile','statusMessage','Error\x20writing\x20file:\x20','updateParticipant','jid','beforeExit','admin','description','public','contains','archiveChat','replaceVariablesChat','request\x20received\x20in\x20deleteDoneMessages','getVariablesChat','):\x20Editando\x20condição\x20do\x20fluxo...','remoteJids','next_groupId','sendLocation','contentText','interval\x20não\x20é\x20um\x20número','waitingMenu_id','buffer','):\x20Buscando\x20conversas...','DD/MM\x20HH:mm:ss','CONTACTS_SET','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc','insert','JWT','createOrUpdate','Stack\x20trace:','label','\x1b[32m%s\x1b[0m','userDevicesCache','remove','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','getValidWhatsAppNumbers','audio','Read\x20messages','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','false','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','sendButtons','Last\x20message\x20not\x20found','ConversationModel','Connection','start','atendimentoAberto','createGroup','processConditionsTest','.extension','Error\x20removing\x20IPv6\x20address:\x20','PENDING','sendStatus','mediaKey','Fluxos\x20não\x20estão\x20ativados','DATABASE_CONNECTION_USER','canSendMessage','splice','):\x20updateResult:','setRestartTimeout','Erro\x20ao\x20substituir\x20variáveis\x20para\x20','removeIPv6','*Pergunta*:\x20\x0a','[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache','.doc','Início','router','!stop','findAndUpdateCacheContact','):\x20Procurando\x20mensagens\x20para\x20envio','convertaudio','):\x20Mensagem\x20já\x20enviada\x20para\x20','connect','.webm','isInteger','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','updateBlock','size','updateMissingEtiquetas','context','media','urlOrBase64','):\x20\x27Enviando\x20texto\x20para\x20\x27','leadInfo.atendimentoAberto','stopMinutesMaxActives','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','):\x20Deletando\x20conversa...','sort','convertaudioMP3','restart','path','menuType','replaceValue','buttonMessage','documentWithCaptionMessage','\x1b[41m','object','joinApprovalMode','updateProfilePicture','replaceVariablesInObject','undefined','pollUpdateMessage','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','):\x20Bloco\x20com\x20ID\x20','HOST','.mimetype','#00a1f2','getUniqueFlowName','#000000','mentions','.xlsx','Safari','view\x20engine','getClient','lean','#d3a91f','cors','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','verifyWhatsAppNumber','remove.instance','presence.update','loadWebhook','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','loadEnv','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','keys','updateGParticipate','Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:','reject','processingGroup','evaluateConditionTest','text','auth','editFlowVariable','stopMinutes','groupSettingUpdate','Request\x20Body:','matchRegex','push','data:\x20','Rótulo\x20inválido\x20ou\x20sem\x20ID.','\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','IPv6\x20address\x20configured:\x20','webhookModel','Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup','chats.delete','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo','HeaderType','/instance/fetchInstances','getProfileName','rowId','less','profile','readFileSync','Connection\x20closed\x20for\x20instance:\x20','groupGetInviteInfo','ButtonsMessage','inet6','Subdomínio\x20extraído\x20da\x20URL:','contextInfo','):\x20Tentativa\x20de\x20iniciar\x20fluxo,\x20mas\x20os\x20fluxos\x20não\x20estão\x20ativados.','findMany','Erro\x20ao\x20buscar\x20fluxos:',',\x20lastCondition:\x20','/wa-chats','\x20saindo\x20da\x20função','footerText','unavailable','cpf','group','\x20ao\x20chat\x20','deleteMessage','):Trying\x20to\x20get\x20business\x20profile','paused','flowPrefixCommand','utf-8','\x27\x20do\x20banco\x20de\x20dados...','stopWhenYouSendMsg','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','labels.edit','fetchProfile','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','editflowcondition','6imeWYk','):\x20Limpando\x20delayMessage','):\x20Label\x20','URI','removeUnusedChatFields','):\x20','get','telefone','networkInterface','ListType','contactsArrayMessage','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','urlencoded','all_member_add','^\x5cd+','):\x20Flow\x20desativado','@redis/client','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.','reconnectAttempts','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','@ffmpeg-installer/ffmpeg','state','sendMedia','\x5cd+','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','findConversation','):\x20Buscando\x20todos\x20os\x20fluxos...','use','logout','vir','Subdomínio\x20não\x20encontrado','deleteDoneMessages','):\x20\x27Deletando\x20fluxo,\x20id:\x20','message_normalized','request\x20received\x20in\x20deleteFlow','privacySettings','local_map','SSL_CONF','_id','Subdomínio\x20final:','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','/message','):\x20nextBlock.uazapi.name','CHATS_DELETE','chatLog','groupJid','getConversationModelForOwner','):\x20debug\x20alterando\x20this.AutomateSystem','sha256','updateGroupsAddPrivacy','AddChatLabel','\x1b[36m','ini','badSession','):\x20atualização\x20chat:\x20','changeVariables','flows','updateOnlinePrivacy','query','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:',',\x20qrcodeCount:\x20','deletedCount','Rótulo\x20deletado:\x27,\x20','):\x20whoCanUse\x20after\x20validation:\x20','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','header','Erro\x20ao\x20iniciar\x20fluxo:\x20','recebido\x20de','/wa-connection-update','.webp','PROXY','findRealGroups','url','_Contacts','mentioned','$set','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','12932064KeZgbW','_activedCount','Erro\x20ao\x20aplicar\x20varedit:\x20','conditions','mediaSticker','ENABLED','extractMessageContent','temp-','menuExpiredMessage','editFlowCondition','done','request\x20body:\x20','eventemitter2','address','shareFlow','):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20','Validate','fetchConversation','instanceKeys','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','hGet','listMessage','item','.jpg','mediatype','\x27...','encoding','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','apirequest','fetchLabels','getFlow','processScheduleFlow','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','base64','params','RemoveChatLabel','isURL','updateStopChat','findByIdAndUpdate','numbers','basename','localWebhook','https://chat.whatsapp.com/','Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants','replaceVariables','):\x20Entrou\x20na\x20função\x20processawaitSeconds','Button\x20IDs\x20cannot\x20be\x20repeated.','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName','\x1b[31m%s\x1b[0m','proxy:\x20','Erro\x20ao\x20alterar\x20fluxo','autoCompleteMessages.command_1','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','allContacts','bodyStringErrorParse','connectionState','deleted','Erro\x20ao\x20editar\x20a\x20conversa','removeProfilePicture','promote','removeIPv6ById','\x20}\x0a','groupMetadata','charAt','):\x20Criando\x20fluxo...','error_log','pendingMessages','organization','toUpperCase','):\x20Entrou\x20na\x20função\x20goToFlow','):\x20customFieldVariables','reorderReplyOptions','PORT','apiName','dbConnection','/clients-info','readMessages','sendAudio','reviver','Error\x20parsing\x20JSON:','Deletion\x20failed','\x1b[1m','leadInfo.','getLastMessage','scheduleFlow','cwd','ListMessage','authState','options','leadInfo.desativadoFluxoAte','addChatLabel','status@broadcast','.ogg','#fe9dfe','Type\x20not\x20found','audio/ogg;\x20codecs=opus','#9568cf','sendMenu','HH:mm:ss','evaluateCondition','qrCode','/startFlow/:instance/:startID','desc','noConnection','substring','PLAYED','Nenhum\x20fluxo\x20correspondente\x20encontrado.','expiration','_ScheduleMessages','sign','startFlow','connectionUpdate','SERVER_OFFLINE','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','SEND_MESSAGE','@g.us','The\x20','release','exports','):Image\x20path:\x20','headerString','variables','variablesNotFound','StatusJidList\x20is\x20required','):\x20não\x20encontrou','copyBlock','createNewConversation',',\x20Minutes\x20to\x20Close:\x20','ephemeralDuration','IPv6\x20addresses\x20detected:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20','findMessages','when','DEBUG','existsSync','delayMessage','ip\x20-6\x20addr\x20show\x20dev\x20','stringify','dbClient','Pausado\x20por\x20','catch','chats.set','flowStopMinutes','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','keyPattern','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','videoMessage',',\x20Expiration\x20Time:\x20','):\x20Editando\x20edição\x20do\x20fluxo...','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','restartInstance','unreadCount','Mensagens\x20deletadas\x20com\x20sucesso.','webhook','Erro\x20ao\x20atualizar\x20o\x20fluxo:','subject','Log\x20out\x20instance:\x20','Falha\x20ao\x20processar\x20a\x20solicitação','isBusiness','buttonId','muteEndTime','floor','lastSendMessage','imported','response','wuid','values','g.us','qrcode.updated','AddUserFlow','deleteBlock','updateCustomFields','inviteUrl','chat','groupdata.participants','email','getOwnPropertyDescriptor','prepareMediaMessage','getflow','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','\x20minutos...','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','END:VCARD','dropCollection','phoneNumber','available','filter','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','messageTimestamp','):Image\x20converted\x20to\x20WebP','pollMessageOnDelete','_FlowHistorico','):Error\x20in\x20converting\x20audio','editFlowReply','connectionStatus','Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture','Forbidden','toggleEphemeral','Partes\x20do\x20domínio:','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','):\x20Buscando\x20flow...','pollOnReplyDelete','random','isLong','Flow\x20iniciado','findManyByIds','Not\x20allowed\x20by\x20CORS','owner','EMAIL:','AUTHENTICATION','findIndex','findOne','getStatus','bulkWrite',',\x20saindo.','.mp3','\x0aitem','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','restartMutex','Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo','jpegThumbnail','createClient','.error','GROUPS_UPSERT','DATABASE_CONNECTION_HOST','realVariables','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo','chatId','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','Número:\x20','lastFetchAwaitingApproval','from','cleaningUp','where','isValidIPv6Config','Erro\x20ao\x20encerrar\x20a\x20API','contactHandle','ORG:','dataValidate','hDel','cacheContact','delete','editScheduleMessage','\x20minutos.\x20Será\x20às\x20','updatePresence','SSL_CONF_FULLCHAIN','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','instance','Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral','archive','DB_PREFIX_NAME','generateHash','extractPhoneNumber','json','Imagem\x20não\x20encontrada','CHATS_UPSERT','sendMessage','1941295ulxgHN','editflowgroup','editFlowBlock','error\x20get\x20vote','/wa-presence','env','SERVER_URL','request\x20received\x20in\x20fetchConversation','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','findById','picture','):\x20error:\x20','stanzaId','/group','isCommunity','mkdirSync','beautifyWithPlaceholders','instanceInfo','_Labels','WebhookGlobal','mediaMessage','):\x20whoCanEdit\x20after\x20validation:\x20','Detalhes\x20do\x20erro:','Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20','):\x20conversation.status:\x20','AUTHENTICATION_TYPE','):\x20conversation.lastInteraction:\x20','scheduleSendMedia','toLocaleString','apiResponse','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName','reorderBlocks','The\x20\x22','load','statSync','find','updateProfileName','stickerMessage','/create','Erro\x20ao\x20atualizar\x20o\x20flow.','Schema','updateOneById','Erro\x20ao\x20remover\x20label\x20','GUARD','}}\x20->\x20valor\x20não\x20encontrado','maxActives','option','fetchBusinessProfile','sharePass','storePath','replyOption','Erro\x20ao\x20atualizar\x20AutomateSystem:','connectToWhatsapp','restrict','\x20horas\x20e\x20','toLowerCase','http','g-t','created','mongodb://','process','descOwner','birthtime','request\x20received\x20in\x20createFlow','optionName','redis','Valor\x20da\x20URL\x20recuperada:','FlowController','detail','):\x20Usando\x20extensão\x20padrão:\x20','\x1b[30m%s\x1b[0m','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','):Business\x20profile\x20fetched',',\x20pairCode:\x20','pt-BR','unhandledRejection','profilePictureUrl','instancias:\x20','sendPoll','awaitSeconds','rm\x20-rf\x20','\x20adicionado\x20ao\x20chat\x20','groupLeave','\x20-\x20ON:\x20','@s.whatsapp.net','sendReaction','\x20segundos','moreLogs','backgroundColor','):Desconectado,\x20parando\x20execução.','):\x20alterando\x20this.AutomateSystem','sendWhatsAppAudio','join','SERVER_PORT','groupUpdateDescription','convert','normalizeMessage',',\x20valor\x20passado:\x20\x22','instances','readreceipts','lastUpdate','responsavelid','Erro\x20ao\x20buscar\x20a\x20conversa','max','ContactModel','STORE_CHATS','hSet','deviceSentMessage','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','lastRealGroupsFetch','request\x20received\x20in\x20getConversation','locationMessage','NextBlock','/wa-groups','setContext','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','INFO','addReplyOption','groupId','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','):\x20Ignoring\x20group\x20messages.','conversationTimestamp','announcement','Bad\x20Request','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','setWebhook','redirect','createConnection','debug','editedMessage','string','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','remote\x20\x22origin\x22','):\x20newFirstValue\x20após\x20replaceVariables:','/wa-message','/config',',\x20canSendMessage:\x20','number','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','customFields','):Audio\x20converted\x20and\x20stored\x20in\x20cache','InstancesAlterarTodas','originalUrl','Erro\x20ao\x20deletar\x20a\x20conversa','uazapi','):\x20delete\x20=\x20true','emit','updateAutoCompleteMessages','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','events','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','https://ipv6.jsonip.com','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','Erro\x20ao\x20deletar\x20mensagens:','enumerable','#56ccb4','checkMutex','request\x20received\x20in\x20starFlow','processUazapi','messageContextInfo','hGetAll','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','IP\x20mismatch:\x20configured\x20','):\x20Bloco\x20copiado:\x20','getPrototypeOf','request_time','):\x20this.client.authState.creds?.myAppStateKeyId:\x20','has','goToFlow','presenceSubscribe','):\x20Ler\x20mensagem','):\x20[messages.update]\x20group\x20ignored','leadInfo.customFields','_fromMe','editChat','imgUrl','updateLastSeenPrivacy','Background\x20color\x20is\x20required','application/json','Flow\x20\x27','USER','connectedClient','request\x20received\x20in\x20scheduleMessage','\x5c$&','deleteInstance','MAX_SAFE_INTEGER','READ','.type','announce','messageType','notEqual','groupToggleEphemeral','):\x20Editando\x20bloco...','joinGroup','whoCanUse','\x20inseridas\x20no\x20banco\x20de\x20dados...','contacts.upsert','refused','flattenObject','PREFIX_KEY','\x20com\x20sucesso.','utf8','linkPreview','delaySecMax','importChatsBatch','createConversationforgoToFlow','online','writeFileSync','):\x20this.processingGroup._id:\x20','):\x20Editando\x20mensagens\x20no\x20grupo...','URL\x20completa:','superadmin','gifPlayback','deleteReplyOption','buttons','Atualização:\x20','VERBOSE','content-type','readdirSync','stopped','isRunning','redis://127.0.0.1:6379','updateGParticipant','authentication','https://api64.ipify.org?format=json','saveVariable','Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage','delayChatLabel_RETRY_DELAY_MS','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','):\x20Removendo\x20\x27','REDIS_PREFIX_KEY','\x20depois\x20','replace','.wav','padStart','Primeiro\x20Valor:\x20','imageMessage','):\x20Error\x20processing\x20conditions:\x20','https://api.openai.com/v1/audio/speech','#ffc5c7','cachedContact','detectIPv6PrefixAndInterface','SERVER','\x22\x20cannot\x20be\x20empty','addMessagesToGroup','leadInfo','#01d0e2','Erro\x20ao\x20deletar\x20chat:','startCommand','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','variablesToObject','shift','request\x20received\x20in\x20getAutomateSystem','profileName','IPv6\x20address\x20removed:\x20','preview','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','Instance\x20Name:','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','sending','video','isJidGroup','website','findLabels','.jwt','selectableCount','globalShow','):\x20Iniciando\x20bot...','content','Mac\x20OS','waInstances','groupMemberAddMode','IP\x20confirmed:\x20','):\x20whoCanUse\x20before\x20validation:\x20','add','):\x20Erro\x20durante\x20a\x20atualização:\x20','.\x20Aguardando\x20','length','Falha\x20ao\x20processar\x20a\x20solicitação\x20findRealGroups','randomMac','drop','whatsappNumber','initAuthCreds','CONNECTION_UPDATE','activatedCount','findGroupsEspecial','Fluxo\x20\x27','fetchProfilePictureUrl','qrcode-terminal','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','Invalid\x20format','replacer','/instance/create','timeout','):\x20mediaMessageInfoId\x20:\x20','nome','flowIgnoreGroups','Erro\x20ao\x20iniciar\x20o\x20fluxo.','parse','findParticipants','):\x20sender\x20=\x20number:\x20','silent','code','):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','request\x20received\x20in\x20deleteConversation','logger','sendMessageWithTyping','\x0a{\x20instance:\x20','\x20removido\x20do\x20chat\x20','):\x20Criou\x20conversa\x20no\x20startFlow','webhookMap','block','verbose','\x27\x20removido\x20do\x20AutomateSystem.','waitingMenu_ExpiredMessage','uazapiSendMenu','fileName','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','ephemeralExpiration','goNextblock','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20','delay','closed','lowerCase','bodyString','lastBlockId','imagechat','AUTHENTICATION_API_KEY','updateMissingCustomFields','sendText','sleep','dark','groupRequestParticipantsUpdate','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','readMessageBot','https://api.ipify.org?format=json','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','updateMediaMessage','updateGroupWebhook','.mp4','isJidBroadcast',',\x20global:\x20','editFlowGroup','findAll','Error\x20testing\x20IP\x20with\x20','set','EXPIRIN_IN','STATUS_INSTANCE','limit','setNewValue','pre','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','async-mutex','rows','notContains','uazapiSendLocation','groupCreate','everyOne','pop','sendList','padEnd','profilePicture','/64\x20dev\x20','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','uazapiSendContact','This\x20name\x20','Erro\x20de\x20atualização:\x20','groups.update','Internal\x20Server\x20Error','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','fileUrl','inner','Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27','markMessageAsRead','\x1b[34m%s\x1b[0m','Db\x20Connection','ChatRouter','):\x20Enviando\x20mídia','leaveGroup','):\x20Criando\x20fluxo\x20compartilhado...','listType','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','resetReconnectionVariables','lastSend','):\x20whoCanEdit\x20before\x20validation:\x20','OrAnd','formatBRNumber','ephemeralMessage','Instance\x20logged\x20out','info','last','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','processUUID','Mutex','WARN','Network\x20Interface\x20detected:\x20','):\x20Criando\x20nova\x20conversa[createNewConversation]','Close\x20connection','pairingCode','image','Conversa\x20deletada\x20com\x20sucesso.','recording','updateChatWithMessage','match_last_seen','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','textMessage','cacheInstanceModel','ids','\x1b[32m','color','ipv6Prefix','font','Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.','TYPE','pollCreationMessageV2','send','):\x20Entrou\x20na\x20função\x20stop','reactionMessage','views','fetchContacts','saveTextReply','menuMessage','groupFetchAllParticipating','uazapiDeleteMessage','dbServer','Button\x20texts\x20cannot\x20be\x20repeated','findOrCreate','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','\x1b[36m%s\x1b[0m','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','etiquetas','contactMessage','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','revokeInviteCode','Variável\x20não\x20encontrada!','importChats','isCommunityAnnounce','Error\x20while\x20deleting\x20message\x20for\x20everyone','out','Erro\x20ao\x20inserir\x20chats:','dropIndex','toDataURL','generate','getBase64FromMediaMessage','updateFlowConfig','DOCKER_ENV','runExclusive','upsertChats','jwt','-whatsapp-api','log','scheduleNextCheck','cacheContactModel','integer','request\x20received\x20in\x20updateAgent','GET','envProcess','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','BufferJSON','deleteImportedChat','Types','dbInstance','min','pollCreationMessageV3','#ffffff','Not\x20Found','Font\x20is\x20required','count','request\x20received\x20in\x20editConversation','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','/instance/connectionState','contact_blacklist','):\x20Enviando\x20enquete','getMinutes','save','editFlow','CORS_METHODS','editMessagesInGroup','https://uazapi-plugin.bubbleapps.io/?url=','transformScheduledMessagesByType','.\x20Pulando.','creds','GROUPS_UPDATE','processvaredits','cachedContacts-whatsapp','findOneAndUpdate','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','del',',\x20valor\x20a\x20encontrar:\x20\x22','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','editConversation','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','ex:\x20\x22groupJid=120362@g.us\x22','Configuração\x20SSL\x20recuperada:','\x20atualizado\x20com\x20sucesso.\x20Ação:\x20','instanceName\x20not\x20provided.','labels.association','endSession','):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20','waMonitor','chats.upsert','):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20','sectionsToString','equal','reorderMessages','isAdmin','\x1b[31m','--------------------------------------','):\x20Error\x20processing\x20the\x20block:\x20','AppStateSyncKeyData','choices','groups_ignore','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','sections','fetchInstances','):\x20Parar\x20função\x20pois\x20não\x20está\x20conectado','):\x20\x27Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x27,\x20','vote','defineAuthState','Erro\x20ao\x20tentar\x20autoCompleteMessages','finish','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','ip\x20-br\x20link\x20show','updateConversation','https://jsonip.com','):Processing\x20audio','configureIPv6','WA\x20MODULE','digest','XX:XX:XX:XX:XX:XX','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','sendContact','KEY','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body'];a0_0x26a0=function(){return _0x1bcb5b;};return a0_0x26a0();}Vo[a0_0x20331d(0x7f7)](a0_0x20331d(0x3f5));var cg=require(a0_0x20331d(0x3d8)),qs=require('fs'),Ui=I(require(a0_0x20331d(0x92c))),ji=I(require(a0_0x20331d(0x6a6))),je=class u{static #e;static set[a0_0x20331d(0x3b0)](_0x42cae5){this.#e=_0x42cae5;}static get['https'](){const _0x464f6f=a0_0x20331d;let {FULLCHAIN:_0x32d948,PRIVKEY:_0xdcbea4}=b[_0x464f6f(0x51d)]('SSL_CONF');return Ui[_0x464f6f(0x92d)]({'cert':(0x0,qs[_0x464f6f(0x4f7)])(_0x32d948),'key':(0x0,qs[_0x464f6f(0x4f7)])(_0xdcbea4)},u.#e);}static get[a0_0x20331d(0x6a6)](){return ji['createServer'](u.#e);}},Je=I(require('fs')),Wi=I(require(a0_0x20331d(0x54c))),qe=I(require(a0_0x20331d(0x2a0))),ds=I(require('path')),us=require('child_process');function ir(){const _0x43856f=a0_0x20331d;z[_0x43856f(0x8b7)]();let _0x4bc484=ds[_0x43856f(0x42b)][_0x43856f(0x6ca)](__dirname,_0x43856f(0x307));Bi(_0x4bc484);}var Bi=_0x3446d0=>{const _0x1ae9b1=a0_0x20331d;let _0x4a889f=Je[_0x1ae9b1(0x42b)][_0x1ae9b1(0x74b)](_0x3446d0),_0x6a8f59=0xc*0x3c*0x3c*0x3e8,_0x3fd194=0x2*0x3c*0x3c*0x3e8,_0x2aa278=new Date()[_0x1ae9b1(0x276)]();_0x4a889f['forEach'](_0x1b0558=>{const _0x1d59db=_0x1ae9b1;let _0x2a4bbb=ds[_0x1d59db(0x42b)][_0x1d59db(0x6ca)](_0x3446d0,_0x1b0558),_0x1cfb13=Je[_0x1d59db(0x42b)][_0x1d59db(0x690)](_0x2a4bbb)[_0x1d59db(0x6ac)][_0x1d59db(0x276)]();_0x2aa278-_0x1cfb13>_0x6a8f59&&(Je[_0x1d59db(0x42b)][_0x1d59db(0x438)](_0x2a4bbb),console['log'](_0x1d59db(0x1f2)+_0x1b0558));}),setTimeout(()=>Bi(_0x3446d0),_0x3fd194);};function or(){const _0x533138=a0_0x20331d;let _0x1df5e9=new $(_0x533138(0x763)),_0x3c804d=(0x0,be[_0x533138(0x42b)])();_0x3c804d[_0x533138(0x533)]((0x0,Gi['default'])({'origin'(_0x54acda,_0x4759ad){const _0x45e05a=_0x533138;let {ORIGIN:_0x543af2}=b[_0x45e05a(0x51d)]('CORS');return _0x54acda||(_0x54acda='*'),_0x543af2[_0x45e05a(0x3ee)]('*')!==-0x1||_0x543af2[_0x45e05a(0x3ee)](_0x54acda)!==-0x1?_0x4759ad(null,!0x0):_0x4759ad(new Error(_0x45e05a(0x63a)));},'methods':[...b[_0x533138(0x51d)](_0x533138(0x282))[_0x533138(0x333)]],'credentials':b[_0x533138(0x51d)]('CORS')[_0x533138(0x237)]}),(0x0,be[_0x533138(0x524)])({'extended':!0x0,'limit':_0x533138(0x380)}),(0x0,be[_0x533138(0x66a)])({'limit':'50mb'})),_0x3c804d[_0x533138(0x533)]((_0x3aab76,_0x351808,_0x105702)=>{const _0x476946=_0x533138;_0x3aab76[_0x476946(0x4b7)]['startsWith'](_0x476946(0x459))?_0x105702():(0x0,Vi[_0x476946(0x42b)])()(_0x3aab76,_0x351808,_0x105702);}),_0x3c804d['set'](_0x533138(0x4cd),'hbs'),_0x3c804d[_0x533138(0x7cb)](_0x533138(0x814),(0x0,Gs[_0x533138(0x6ca)])(ue,_0x533138(0x814))),_0x3c804d[_0x533138(0x533)](be[_0x533138(0x42b)]['static']((0x0,Gs['join'])(ue,_0x533138(0x465)))),_0x3c804d['use']((_0x379272,_0xc5a171,_0x1f88ad)=>{const _0x1bb890=_0x533138;let _0x1d586c=_0xc5a171[_0x1bb890(0x811)];_0xc5a171[_0x1bb890(0x811)]=function(_0x9cfa8c){const _0x819b89=_0x1bb890;if(_0x379272['query'][_0x819b89(0x6cd)]===_0x819b89(0x3ca)||_0x379272[_0x819b89(0x8b8)][_0x819b89(0x700)]===_0x819b89(0x3ca)){let _0xac7742=JSON[_0x819b89(0x79b)](_0x9cfa8c);_0x9cfa8c=JSON[_0x819b89(0x5f3)](_0x512ceb(_0xac7742));}return _0x1d586c['apply'](_0xc5a171,[_0x9cfa8c]);},_0x1f88ad();}),_0x3c804d[_0x533138(0x533)]('/',Le),_0x3c804d[_0x533138(0x533)]((_0xd4799e,_0xa5d36d,_0x243446,_0x6e7810)=>{const _0x27dfe5=_0x533138;if(_0xd4799e)return _0x243446['status'](_0xd4799e['status']||0x1f4)[_0x27dfe5(0x66a)](_0xd4799e);},(_0x41ec1c,_0x500089,_0x48b943)=>{const _0x500054=_0x533138;let {method:_0x4bc16b,url:_0x52318d}=_0x41ec1c;_0x500089['status'](0x194)[_0x500054(0x66a)]({'status':0x194,'message':'Cannot\x20'+_0x4bc16b[_0x500054(0x5ad)]()+'\x20'+_0x52318d,'error':_0x500054(0x844)}),_0x48b943();});let _0x512ceb=(_0x570d8c,_0x2e7c93='_p_')=>{const _0x4ad9d8=_0x533138;let _0x4b8959=(_0x23eb0e,_0x3e3bfb=null,_0x131276=!0x1)=>{const _0x316e8b=a0_0xae02;let _0x10a55b={};return Object[_0x316e8b(0x4db)](_0x23eb0e)[_0x316e8b(0x22b)](_0x10745f=>{const _0x1bef69=_0x316e8b;let _0x4b8ca5=_0x23eb0e[_0x10745f],_0x5410df=''+_0x2e7c93+_0x10745f;_0x3e3bfb&&!_0x131276&&(_0x5410df=_0x3e3bfb+'.'+_0x10745f),!_0x4b8ca5&&_0x4b8ca5!==0x0&&_0x4b8ca5!==!0x1||typeof _0x4b8ca5>'u'?_0x10a55b[_0x5410df]=null:typeof _0x4b8ca5!='object'&&!Array['isArray'](_0x4b8ca5)?_0x10a55b[_0x5410df]=_0x4b8ca5:typeof _0x4b8ca5==_0x1bef69(0x4bd)&&!Array[_0x1bef69(0x3f2)](_0x4b8ca5)?_0x10a55b=Object[_0x1bef69(0x2df)](_0x10a55b,_0x4b8959(_0x4b8ca5,_0x5410df)):Array[_0x1bef69(0x3f2)](_0x4b8ca5)&&(typeof _0x4b8ca5[0x0]=='object'?(_0x10a55b[_0x5410df]=[],_0x4b8ca5[_0x1bef69(0x22b)](_0x306281=>{const _0x25046c=_0x1bef69;_0x10a55b[_0x5410df][_0x25046c(0x4e8)](_0x4b8959(_0x306281,_0x5410df,!0x0));})):_0x10a55b[_0x5410df]=_0x4b8ca5);}),_0x10a55b;};return Array[_0x4ad9d8(0x3f2)](_0x570d8c)?_0x570d8c[_0x4ad9d8(0x41b)](_0x77dec3=>_0x4b8959(_0x77dec3)):typeof _0x570d8c==_0x4ad9d8(0x4bd)&&_0x570d8c!==null?_0x4b8959(_0x570d8c):{};},_0xbfc1ba=b[_0x533138(0x51d)](_0x533138(0x763));je[_0x533138(0x3b0)]=_0x3c804d;let _0x3fe91b=je[_0xbfc1ba[_0x533138(0x80f)]],_0x342bbc=_0x533138(0x34c);_0x3fe91b[_0x533138(0x2a4)](_0xbfc1ba[_0x533138(0x5b1)],()=>{const _0x1d0005=_0x533138;_0x1df5e9['log'](_0x342bbc),_0x1df5e9['log'](_0xbfc1ba[_0x1d0005(0x80f)]['toUpperCase']()+_0x1d0005(0x6c1)+_0xbfc1ba[_0x1d0005(0x5b1)]);}),ir(),sa();}var rr=a0_0x20331d(0x32b),nr=ds['default'][a0_0x20331d(0x6ca)](__dirname,a0_0x20331d(0x37c)),Ae=null;function cr(){return new Promise((_0x137601,_0x5b6124)=>{const _0x5e9890=a0_0xae02;Je[_0x5e9890(0x42b)]['readFile'](nr,'utf-8',(_0x462639,_0x1f4732)=>{const _0x5751e7=_0x5e9890;if(_0x462639){Ae=_0x462639,_0x137601();return;}Wi[_0x5751e7(0x42b)][_0x5751e7(0x79b)](_0x1f4732)[_0x5751e7(0x6f4)]['url']===rr?(Ae=null,_0x137601()):(Ae=new Error('uazapi\x20não\x20está\x20instalado\x20pelo\x20git'),_0x137601());});});}async function lr(){const _0x5d2d0b=a0_0x20331d;try{await cr(),await Bs();}catch(_0x6f746c){console[_0x5d2d0b(0x2c2)](_0x5d2d0b(0x4b2)+_0x6f746c),process[_0x5d2d0b(0x294)](0x1);}}lr();async function zi(){const _0x5b553f=a0_0x20331d;let _0x170193;try{_0x170193=(await qe[_0x5b553f(0x42b)]['get'](_0x5b553f(0x87f)))[_0x5b553f(0x311)]['ip'];}catch(_0x3305c6){console[_0x5b553f(0x2c2)](_0x3305c6);try{_0x170193=(await qe['default'][_0x5b553f(0x51d)](_0x5b553f(0x7c1)))[_0x5b553f(0x311)]['ip'];}catch(_0x12efa3){console[_0x5b553f(0x2c2)](_0x12efa3);try{_0x170193=(await qe[_0x5b553f(0x42b)]['get'](_0x5b553f(0x2b1)))['data']['match'](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x36a824){return console[_0x5b553f(0x2c2)](_0x36a824),!0x1;}}}return _0x170193;}function a0_0xae02(_0x4c06c5,_0x25b71c){const _0x26a075=a0_0x26a0();return a0_0xae02=function(_0xae0215,_0x52edd1){_0xae0215=_0xae0215-0x1e1;let _0x54f85d=_0x26a075[_0xae0215];return _0x54f85d;},a0_0xae02(_0x4c06c5,_0x25b71c);}var Ji=0x0;async function ur(){const _0x10df92=a0_0x20331d;let _0x1d992f=await new ge(b[_0x10df92(0x51d)](_0x10df92(0x892)))[_0x10df92(0x579)]();return console[_0x10df92(0x834)](_0x10df92(0x6bb),_0x1d992f[_0x10df92(0x786)]),_0x1d992f[_0x10df92(0x786)];}function dr(_0x196c23){const _0xe4104b=a0_0x20331d;let _0xd82480=_0x196c23[_0xe4104b(0x51d)]('SERVER')[_0xe4104b(0x8ac)],_0x194e38=_0x196c23[_0xe4104b(0x51d)](_0xe4104b(0x53d));console[_0xe4104b(0x834)](_0xe4104b(0x6b0),_0xd82480),console[_0xe4104b(0x834)](_0xe4104b(0x860),_0x194e38);let _0x21588c='',_0x37d080=_0xd82480||'';if(_0xd82480){let _0x85e5b1=_0xd82480[_0xe4104b(0x325)](/\/\/(.*?)\./);console['log']('Resultado\x20da\x20correspondência\x20de\x20URL:',_0x85e5b1),_0x85e5b1&&_0x85e5b1[0x1]&&(_0x21588c=_0x85e5b1[0x1],console[_0xe4104b(0x834)](_0xe4104b(0x4fc),_0x21588c));}if(!_0x21588c&&_0x194e38&&_0x194e38[_0xe4104b(0x8c3)]){let _0x33107e=_0x194e38['FULLCHAIN'][_0xe4104b(0x382)]('/');console[_0xe4104b(0x834)]('Partes\x20do\x20caminho\x20FULLCHAIN:',_0x33107e);let _0x163394=_0x33107e[_0x33107e[_0xe4104b(0x786)]-0x2];if(console[_0xe4104b(0x834)](_0xe4104b(0x81f),_0x163394),_0x163394){let _0x49aac7=_0x163394[_0xe4104b(0x382)]('.');console[_0xe4104b(0x834)](_0xe4104b(0x631),_0x49aac7),_0x49aac7[_0xe4104b(0x786)]>0x2&&(_0x21588c=_0x49aac7[0x0],console[_0xe4104b(0x834)](_0xe4104b(0x3de),_0x21588c),_0x37d080=''+_0x163394);}}return{'subdomain':_0x21588c||_0xe4104b(0x536),'fullURL':_0x37d080||_0xe4104b(0x88f)};}var {subdomain:K,fullURL:Ws}=dr(b);console[a0_0x20331d(0x834)](a0_0x20331d(0x53f),K),console[a0_0x20331d(0x834)](a0_0x20331d(0x743),Ws);async function pr(){const _0x5b1db4=a0_0x20331d;let _0x5031b5=b['get'](_0x5b1db4(0x892)),_0x2a5f4d=b[_0x5b1db4(0x51d)](_0x5b1db4(0x63d))['API_KEY'][_0x5b1db4(0x887)],_0x32f0c1=b[_0x5b1db4(0x51d)](_0x5b1db4(0x53d)),_0x54d094=await zi(),_0xf71952=b['get'](_0x5b1db4(0x763))[_0x5b1db4(0x5b1)],_0x27fe46=Ws;try{let _0xa439f2={'ip':_0x54d094||null,'redis_enable':_0x5031b5?.['ENABLED']||null,'apikey':_0x2a5f4d||null,'ssl':_0x32f0c1?.[_0x5b1db4(0x3e5)]||null,'lastupdate':Hi||null,'port':_0xf71952||null,'gitInstallError':Ae?.[_0x5b1db4(0x923)]||null,'url':_0x27fe46||null,'subdomain':K};if(console[_0x5b1db4(0x834)]('ip:\x20',_0xa439f2['ip']),_0x5031b5&&_0x5031b5[_0x5b1db4(0x56c)]){let _0x1971be=await ur();_0xa439f2['instanceCount']=_0x1971be||null;}for(let _0x1b2a2e in _0xa439f2)_0xa439f2[_0x5b1db4(0x36c)](_0x1b2a2e)&&_0x1b2a2e!=='ip'&&(_0xa439f2[_0x1b2a2e]=JSON['stringify'](_0xa439f2[_0x1b2a2e]));return(await qe[_0x5b1db4(0x42b)][_0x5b1db4(0x21c)]('https://uazapi.bubbleapps.io/api/1.1/wf/verificar/',_0xa439f2))[_0x5b1db4(0x311)];}catch(_0x1b53a8){return console[_0x5b1db4(0x2c2)](_0x1b53a8),!0x1;}}var Vs=!0x1,Hi=0x25e,hr=0x3,qi=0x1b7740;async function Bs(){const _0xeed5ec=a0_0x20331d;let _0x9a6d49='fora\x20do\x20git';Ae===null&&(_0x9a6d49=await zi());let _0xd06280=await pr();if(_0xd06280){if(_0xd06280[_0xeed5ec(0x60e)][_0xeed5ec(0x34d)]===!0x0){Ae===null&&_0xd06280['response'][_0xeed5ec(0x39c)]-Hi>0x0&&await gr(),Vs||(Vs=!0x0,or());let _0x8c62d3=0x24*0x3c*0x3c,_0x49931c=_0xd06280[_0xeed5ec(0x60e)][_0xeed5ec(0x408)]>_0x8c62d3?_0x8c62d3:_0xd06280[_0xeed5ec(0x60e)][_0xeed5ec(0x408)],_0x3b4b0a=Number(_0x49931c);if(isNaN(_0x3b4b0a)){console[_0xeed5ec(0x2c2)](_0xeed5ec(0x470));return;}let _0x294791=Math[_0xeed5ec(0x60b)](_0x3b4b0a/0xe10),_0x518c0e=Math[_0xeed5ec(0x60b)](_0x3b4b0a%0xe10/0x3c),_0x51aa7e=new Date(Date[_0xeed5ec(0x37f)]()+_0x3b4b0a*0x3e8);setTimeout(Bs,_0x3b4b0a*0x3e8);let _0x5047f3=_0x2c116e=>_0x2c116e[_0xeed5ec(0x27d)]()['padStart'](0x2,'0'),_0x1cf24f='Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20'+_0x5047f3(_0x294791)+_0xeed5ec(0x6a4)+_0x5047f3(_0x518c0e)+_0xeed5ec(0x660)+_0x5047f3(_0x51aa7e[_0xeed5ec(0x1e8)]())+':'+_0x5047f3(_0x51aa7e[_0xeed5ec(0x84c)]())+'.';console['log'](_0x1cf24f);}else return console[_0xeed5ec(0x834)](_0xeed5ec(0x26c)),Vs&&(console[_0xeed5ec(0x834)](_0xeed5ec(0x233)),process[_0xeed5ec(0x294)]()),_0xeed5ec(0x3a2);}else{if(Ji++,Ji<hr)console['log']('Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20'+qi/0xea60+_0xeed5ec(0x61e)),setTimeout(Bs,qi);else return console['error']('Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.'),_0xeed5ec(0x5d9);}}async function gr(){const _0x35e417=a0_0x20331d;console[_0x35e417(0x834)](_0x35e417(0x31d)),console[_0x35e417(0x834)](_0x35e417(0x256)),(0x0,us[_0x35e417(0x916)])(_0x35e417(0x909),{'shell':!0x0})['on'](_0x35e417(0x8fe),_0x1794f3=>{const _0x5d8f1f=_0x35e417;_0x1794f3!==0x0?console[_0x5d8f1f(0x2c2)](_0x5d8f1f(0x61f)):(console[_0x5d8f1f(0x834)](_0x5d8f1f(0x553)),console['log'](_0x5d8f1f(0x3b6)),(0x0,us[_0x5d8f1f(0x916)])('rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys',{'shell':!0x0})['on'](_0x5d8f1f(0x8fe),_0x57793d=>{const _0x12d6ca=_0x5d8f1f;if(_0x57793d!==0x0)console['error'](_0x12d6ca(0x8e9));else{console['log']('Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.');let _0x506308=(0x0,us[_0x12d6ca(0x916)])(_0x12d6ca(0x3a9),{'shell':!0x0});_0x506308[_0x12d6ca(0x8ff)]['on']('data',_0x4a6263=>{const _0x16da81=_0x12d6ca;console[_0x16da81(0x834)](_0x16da81(0x748)+_0x4a6263);}),_0x506308[_0x12d6ca(0x414)]['on']('data',_0x514153=>{const _0x519c2f=_0x12d6ca;console['error'](_0x519c2f(0x7e0)+_0x514153);}),_0x506308['on'](_0x12d6ca(0x294),_0x47d532=>{const _0x1392a9=_0x12d6ca;_0x47d532!==0x0?console[_0x1392a9(0x2c2)](_0x1392a9(0x37a)+_0x47d532):console[_0x1392a9(0x834)]('Sistema\x20atualizado\x20com\x20sucesso!'),console['log'](_0x1392a9(0x3f7)),setTimeout(()=>process[_0x1392a9(0x294)](),0x2710);});}}));});}0x0&&(module[a0_0x20331d(0x5e0)]={'fullURL':fullURL,'subdomain':subdomain});