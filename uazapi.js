const a0_0x3cfc7d=a0_0x1146;(function(_0x4e4f0d,_0x5856a1){const _0x366097=a0_0x1146,_0x4af866=_0x4e4f0d();while(!![]){try{const _0x2b6143=-parseInt(_0x366097(0x283))/0x1*(-parseInt(_0x366097(0x67d))/0x2)+parseInt(_0x366097(0x79b))/0x3*(-parseInt(_0x366097(0x7b1))/0x4)+parseInt(_0x366097(0x265))/0x5*(-parseInt(_0x366097(0x528))/0x6)+parseInt(_0x366097(0x56a))/0x7*(parseInt(_0x366097(0x28d))/0x8)+parseInt(_0x366097(0x780))/0x9*(parseInt(_0x366097(0x714))/0xa)+parseInt(_0x366097(0x2ac))/0xb*(-parseInt(_0x366097(0x470))/0xc)+-parseInt(_0x366097(0x2b9))/0xd;if(_0x2b6143===_0x5856a1)break;else _0x4af866['push'](_0x4af866['shift']());}catch(_0x31ad95){_0x4af866['push'](_0x4af866['shift']());}}}(a0_0x3da4,0xce621));var Wi=Object[a0_0x3cfc7d(0x19b)],Ve=Object['defineProperty'],zi=Object['getOwnPropertyDescriptor'],Hi=Object[a0_0x3cfc7d(0x100)],Ki=Object['getPrototypeOf'],Qi=Object[a0_0x3cfc7d(0x3f5)][a0_0x3cfc7d(0x6b9)],Yi=(_0xd748d8,_0xa77e)=>{for(var _0x299983 in _0xa77e)Ve(_0xd748d8,_0x299983,{'get':_0xa77e[_0x299983],'enumerable':!0x0});},Bs=(_0x378814,_0x17ee77,_0x1f357e,_0x4320ff)=>{const _0x35b9a1=a0_0x3cfc7d;if(_0x17ee77&&typeof _0x17ee77=='object'||typeof _0x17ee77==_0x35b9a1(0x115)){for(let _0xe17133 of Hi(_0x17ee77))!Qi[_0x35b9a1(0x767)](_0x378814,_0xe17133)&&_0xe17133!==_0x1f357e&&Ve(_0x378814,_0xe17133,{'get':()=>_0x17ee77[_0xe17133],'enumerable':!(_0x4320ff=zi(_0x17ee77,_0xe17133))||_0x4320ff[_0x35b9a1(0x660)]});}return _0x378814;},I=(_0x3ef6ec,_0x316a0e,_0x29e5aa)=>(_0x29e5aa=_0x3ef6ec!=null?Wi(Ki(_0x3ef6ec)):{},Bs(_0x316a0e||!_0x3ef6ec||!_0x3ef6ec['__esModule']?Ve(_0x29e5aa,a0_0x3cfc7d(0x879),{'value':_0x3ef6ec,'enumerable':!0x0}):_0x29e5aa,_0x3ef6ec)),Xi=_0x34217b=>Bs(Ve({},'__esModule',{'value':!0x0}),_0x34217b),gr={};Yi(gr,{'fullURL':()=>Gs,'subdomain':()=>he}),module['exports']=Xi(gr);var Ui=I(require('compression')),zs=require('fs'),Hs=require(a0_0x3cfc7d(0x198)),Ks=require(a0_0x3cfc7d(0x304)),Ge=require(a0_0x3cfc7d(0x304)),ne=process['cwd'](),be=(0x0,Ge['join'])(ne,'instances'),Ws=(0x0,Ge['join'])(ne,'src'),fn=(0x0,Ge[a0_0x3cfc7d(0x149)])(ne,a0_0x3cfc7d(0x7eb),a0_0x3cfc7d(0x1cf)),us=class{constructor(){const _0xb8997d=a0_0x3cfc7d;this[_0xb8997d(0x5b0)]();}['get'](_0x4c7f1a){const _0x12cbd3=a0_0x3cfc7d;return this[_0x12cbd3(0x574)][_0x4c7f1a];}['loadEnv'](){const _0x152d5b=a0_0x3cfc7d;this['env']=process[_0x152d5b(0x574)]?.[_0x152d5b(0x35f)]!==_0x152d5b(0x16a)?this[_0x152d5b(0x1db)]():this[_0x152d5b(0x491)](),process[_0x152d5b(0x574)]?.[_0x152d5b(0x35f)]===_0x152d5b(0x16a)&&(this['env'][_0x152d5b(0x10b)][_0x152d5b(0x11a)]=_0x152d5b(0x338),this[_0x152d5b(0x574)]['SERVER'][_0x152d5b(0x107)]=Number[_0x152d5b(0x728)](process[_0x152d5b(0x574)]?.['SERVER_PORT']??_0x152d5b(0x7ba)));}[a0_0x3cfc7d(0x1db)](){const _0xb70bfb=a0_0x3cfc7d;return(0x0,Hs['load'])((0x0,zs[_0xb70bfb(0x5bb)])((0x0,Ks[_0xb70bfb(0x149)])(Ws,'../env.yml'),{'encoding':_0xb70bfb(0x85b)}));}[a0_0x3cfc7d(0x491)](){const _0x12641a=a0_0x3cfc7d;return{'SERVER':{'TYPE':process['env'][_0x12641a(0x380)],'PORT':Number[_0x12641a(0x728)](process[_0x12641a(0x574)][_0x12641a(0x655)]),'URL':process[_0x12641a(0x574)][_0x12641a(0x6cc)]},'CORS':{'ORIGIN':process[_0x12641a(0x574)][_0x12641a(0x2f1)][_0x12641a(0x407)](','),'METHODS':process[_0x12641a(0x574)]['CORS_METHODS'][_0x12641a(0x407)](','),'CREDENTIALS':process[_0x12641a(0x574)]?.[_0x12641a(0x53b)]===_0x12641a(0x16a)},'SSL_CONF':{'PRIVKEY':process[_0x12641a(0x574)]?.[_0x12641a(0x38d)],'FULLCHAIN':process['env']?.[_0x12641a(0x336)]},'STORE':{'CLEANING_INTERVAL':Number[_0x12641a(0x63f)](process[_0x12641a(0x574)]?.[_0x12641a(0x453)])?Number['parseInt'](process[_0x12641a(0x574)][_0x12641a(0x453)]):void 0x0,'MESSAGES':process[_0x12641a(0x574)]?.[_0x12641a(0x3fd)]===_0x12641a(0x16a),'CONTACTS':process[_0x12641a(0x574)]?.[_0x12641a(0x2a6)]===_0x12641a(0x16a),'CHATS':process['env']?.[_0x12641a(0x69a)]==='true'},'DATABASE':{'CONNECTION':{'HOST':process[_0x12641a(0x574)]?.[_0x12641a(0x3f4)],'PORT':Number[_0x12641a(0x728)](process[_0x12641a(0x574)]?.[_0x12641a(0x3f4)]),'USER':process[_0x12641a(0x574)][_0x12641a(0x7bc)],'PASSWORD':process[_0x12641a(0x574)]['DATABASE_CONNECTION_PASSWORD'],'URI':process[_0x12641a(0x574)][_0x12641a(0x24c)],'DB_PREFIX_NAME':process[_0x12641a(0x574)][_0x12641a(0x12a)]},'ENABLED':process[_0x12641a(0x574)]?.[_0x12641a(0x734)]==='true'},'REDIS':{'ENABLED':process[_0x12641a(0x574)]?.[_0x12641a(0x70c)]==='true','URI':process[_0x12641a(0x574)]['REDIS_URI']||_0x12641a(0x196),'PREFIX_KEY':process[_0x12641a(0x574)][_0x12641a(0x330)]||_0x12641a(0x76c)},'LOG':{'LEVEL':process['env']?.[_0x12641a(0x405)][_0x12641a(0x407)](','),'COLOR':process[_0x12641a(0x574)]?.[_0x12641a(0x870)]===_0x12641a(0x16a)},'PROXY':process[_0x12641a(0x574)]?.['PROXY']===_0x12641a(0x16a),'AUTHENTICATION':{'TYPE':process[_0x12641a(0x574)][_0x12641a(0x41e)],'API_KEY':{'KEY':process[_0x12641a(0x574)][_0x12641a(0x836)]},'JWT':{'EXPIRIN_IN':Number[_0x12641a(0x63f)](process[_0x12641a(0x574)]?.[_0x12641a(0x65d)])?Number[_0x12641a(0x728)](process[_0x12641a(0x574)]['AUTHENTICATION_JWT_EXPIRIN_IN']):0xe10,'SECRET':process['env'][_0x12641a(0x2a3)]}}};}},S=new us(),ji=I(require(a0_0x3cfc7d(0x1af))),we=I(require(a0_0x3cfc7d(0x18e))),Vs=require('path'),ds=I(require(a0_0x3cfc7d(0x6b8))),ps=(_0x252cdf=>(_0x252cdf[a0_0x3cfc7d(0x216)]=a0_0x3cfc7d(0x564),_0x252cdf['INFO']=a0_0x3cfc7d(0x362),_0x252cdf[a0_0x3cfc7d(0x2d8)]='\x1b[33m',_0x252cdf[a0_0x3cfc7d(0x2ab)]='\x1b[31m',_0x252cdf[a0_0x3cfc7d(0x5cb)]=a0_0x3cfc7d(0x484),_0x252cdf[a0_0x3cfc7d(0x5b3)]='\x1b[37m',_0x252cdf[a0_0x3cfc7d(0x437)]='\x1b[30m',_0x252cdf))(ps||{}),Qs=(_0x61f34=>(_0x61f34['LOG']=a0_0x3cfc7d(0x1f9),_0x61f34['DARK']=a0_0x3cfc7d(0x1b8),_0x61f34[a0_0x3cfc7d(0x63c)]=a0_0x3cfc7d(0x817),_0x61f34[a0_0x3cfc7d(0x2d8)]=a0_0x3cfc7d(0x403),_0x61f34[a0_0x3cfc7d(0x2ab)]=a0_0x3cfc7d(0x1a9),_0x61f34[a0_0x3cfc7d(0x5cb)]=a0_0x3cfc7d(0x2aa),_0x61f34[a0_0x3cfc7d(0x5b3)]='\x1b[37m%s\x1b[0m',_0x61f34))(Qs||{}),Ys=(_0xc97082=>(_0xc97082[a0_0x3cfc7d(0x216)]='LOG',_0xc97082[a0_0x3cfc7d(0x2d8)]=a0_0x3cfc7d(0x2d8),_0xc97082[a0_0x3cfc7d(0x63c)]=a0_0x3cfc7d(0x63c),_0xc97082[a0_0x3cfc7d(0x437)]=a0_0x3cfc7d(0x437),_0xc97082[a0_0x3cfc7d(0x2ab)]=a0_0x3cfc7d(0x2ab),_0xc97082['DEBUG']=a0_0x3cfc7d(0x5cb),_0xc97082['VERBOSE']=a0_0x3cfc7d(0x5b3),_0xc97082))(Ys||{}),Xs=(_0x49e23c=>(_0x49e23c[a0_0x3cfc7d(0x216)]='\x1b[42m',_0x49e23c[a0_0x3cfc7d(0x63c)]=a0_0x3cfc7d(0x7f5),_0x49e23c[a0_0x3cfc7d(0x2d8)]=a0_0x3cfc7d(0x2f6),_0x49e23c[a0_0x3cfc7d(0x437)]='\x1b[40m',_0x49e23c[a0_0x3cfc7d(0x2ab)]='\x1b[41m',_0x49e23c[a0_0x3cfc7d(0x5cb)]=a0_0x3cfc7d(0x419),_0x49e23c[a0_0x3cfc7d(0x5b3)]=a0_0x3cfc7d(0x7cc),_0x49e23c))(Xs||{}),$=class{constructor(_0x501369=a0_0x3cfc7d(0x164)){const _0x386736=a0_0x3cfc7d;this[_0x386736(0x62d)]=_0x501369,this[_0x386736(0x497)]=S;}['setContext'](_0x433ed3){this['context']=_0x433ed3;}['console'](_0x57c52c,_0x4b7b1e){const _0x4e00bc=a0_0x3cfc7d;let _0x36c4cf=[];this[_0x4e00bc(0x497)][_0x4e00bc(0x840)](_0x4e00bc(0x216))[_0x4e00bc(0x220)][_0x4e00bc(0x455)](_0x1d4453=>_0x36c4cf[_0x4e00bc(0x7b9)](Ys[_0x1d4453]));let _0xf10d60=typeof _0x57c52c;_0x36c4cf[_0x4e00bc(0x1ec)](_0x4b7b1e)&&(S['get']('LOG')['COLOR']?(console['log'](_0x4e00bc(0x4ab)+Qs[_0x4b7b1e],'\x1b[1m\x1b[37m',(0x0,ds[_0x4e00bc(0x879)])()[_0x4e00bc(0x88a)](_0x4e00bc(0x13a)),_0x4e00bc(0x552),ps[_0x4b7b1e]+Xs[_0x4b7b1e]+_0x4e00bc(0x4ab),_0x4b7b1e+_0x4e00bc(0x459),_0x4e00bc(0x6ad),this[_0x4e00bc(0x62d)]+'\x1b[0m',ps[_0x4b7b1e],_0xf10d60!==_0x4e00bc(0x54e)?_0x57c52c:'',_0x4e00bc(0x552)),_0xf10d60==='object'&&console[_0x4e00bc(0x547)](_0x57c52c,'\x0a')):console[_0x4e00bc(0x547)]((0x0,ds[_0x4e00bc(0x879)])()['format'](_0x4e00bc(0x4f1)),_0x4b7b1e+'\x20',''+this[_0x4e00bc(0x62d)],_0x57c52c));}[a0_0x3cfc7d(0x547)](_0x2291a1){const _0x5f5679=a0_0x3cfc7d;this[_0x5f5679(0x28c)](_0x2291a1,_0x5f5679(0x216));}[a0_0x3cfc7d(0x743)](_0x4de3ba){const _0x4ee473=a0_0x3cfc7d;this['console'](_0x4de3ba,_0x4ee473(0x63c));}[a0_0x3cfc7d(0x7e0)](_0x912557){const _0x416a73=a0_0x3cfc7d;this[_0x416a73(0x28c)](_0x912557,'WARN');}[a0_0x3cfc7d(0x3c6)](_0x908b22){const _0x4a38fa=a0_0x3cfc7d;this[_0x4a38fa(0x28c)](_0x908b22,_0x4a38fa(0x2ab));}[a0_0x3cfc7d(0x4e1)](_0x2809da){const _0x220048=a0_0x3cfc7d;this[_0x220048(0x28c)](_0x2809da,_0x220048(0x5b3));}[a0_0x3cfc7d(0x88e)](_0xb5d75c){const _0x9fe008=a0_0x3cfc7d;this[_0x9fe008(0x28c)](_0xb5d75c,'DEBUG');}[a0_0x3cfc7d(0x236)](_0x44bcf8){const _0x40d0f3=a0_0x3cfc7d;this[_0x40d0f3(0x28c)](_0x44bcf8,_0x40d0f3(0x437));}};function Zs(){const _0x212b0=a0_0x3cfc7d;process['on'](_0x212b0(0x146),(_0x1cfc12,_0x535fad)=>{const _0x1fb8cb=_0x212b0;new $(_0x1fb8cb(0x146))[_0x1fb8cb(0x3c6)]({'origin':_0x535fad,'stderr':process[_0x1fb8cb(0x15e)]['fd'],'error':_0x1cfc12});}),process['on'](_0x212b0(0x4ba),(_0x24f020,_0x1bb592)=>{const _0x18be39=_0x212b0;new $(_0x18be39(0x4ba))[_0x18be39(0x3c6)]({'origin':_0x1bb592,'stderr':process[_0x18be39(0x15e)]['fd'],'error':_0x24f020});});}var ea=I(require('eventemitter2')),hs=new ea[(a0_0x3cfc7d(0x879))]({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Se=require(a0_0x3cfc7d(0x514)),Ae=I(require('mongoose')),Be=new $(a0_0x3cfc7d(0x32c)),L=S[a0_0x3cfc7d(0x840)](a0_0x3cfc7d(0x621)),T=L[a0_0x3cfc7d(0x78c)]?L[a0_0x3cfc7d(0x46f)][a0_0x3cfc7d(0x2a4)]?Ae['default'][a0_0x3cfc7d(0x1b1)](L[a0_0x3cfc7d(0x46f)][a0_0x3cfc7d(0x2a4)],{'dbName':L[a0_0x3cfc7d(0x46f)][a0_0x3cfc7d(0x1bc)]+a0_0x3cfc7d(0x43e)}):Ae['default'][a0_0x3cfc7d(0x1b1)](a0_0x3cfc7d(0x5e7)+L[a0_0x3cfc7d(0x46f)]['HOST']+':'+L['CONNECTION'][a0_0x3cfc7d(0x107)]+'?authSource=admin&readPreference=primary&directConnection=true',{'user':L[a0_0x3cfc7d(0x46f)][a0_0x3cfc7d(0x7dc)],'pass':L['CONNECTION'][a0_0x3cfc7d(0x7a6)],'dbName':L[a0_0x3cfc7d(0x46f)][a0_0x3cfc7d(0x1bc)]+'-whatsapp-api'}):null;L[a0_0x3cfc7d(0x78c)]&&Be[a0_0x3cfc7d(0x743)](a0_0x3cfc7d(0x342)+T[a0_0x3cfc7d(0x538)]);var Y=L[a0_0x3cfc7d(0x78c)]?L[a0_0x3cfc7d(0x46f)][a0_0x3cfc7d(0x2a4)]?Ae[a0_0x3cfc7d(0x879)]['createConnection'](L[a0_0x3cfc7d(0x46f)][a0_0x3cfc7d(0x2a4)],{'dbName':a0_0x3cfc7d(0x650)}):Ae['default'][a0_0x3cfc7d(0x1b1)]('mongodb://'+L['CONNECTION'][a0_0x3cfc7d(0x280)]+':'+L[a0_0x3cfc7d(0x46f)]['PORT']+a0_0x3cfc7d(0x712),{'user':L[a0_0x3cfc7d(0x46f)][a0_0x3cfc7d(0x7dc)],'pass':L[a0_0x3cfc7d(0x46f)][a0_0x3cfc7d(0x7a6)],'dbName':'cachedContacts-whatsapp'}):null;Y&&Be[a0_0x3cfc7d(0x743)](a0_0x3cfc7d(0x342)+Y[a0_0x3cfc7d(0x538)]),process['on'](a0_0x3cfc7d(0x183),()=>{const _0x1b5cea=a0_0x3cfc7d;T&&T[_0x1b5cea(0x35b)](()=>{const _0x2cea37=_0x1b5cea;Be[_0x2cea37(0x743)](_0x2cea37(0x702));}),Y&&Y[_0x1b5cea(0x35b)](()=>{const _0x479f54=_0x1b5cea;Be[_0x479f54(0x743)]('CacheContacts\x20database\x20connection\x20closed.');});});var Zi=new Se['Schema']({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),eo=new Se[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),to=new Se['Schema']({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),so=new Se[(a0_0x3cfc7d(0x3e4))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[Zi],'default':[]}},{'_id':!0x1}),ao=new Se[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':so,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':eo},'groupdata':{'type':to,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),ta=_0x3dd975=>{const _0x22001a=a0_0x3cfc7d;let _0x348870='z_'+_0x3dd975+_0x22001a(0x357);return T?.['model'](_0x22001a(0x337),ao,_0x348870);},sa=require(a0_0x3cfc7d(0x514)),io=new sa['Schema']({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),aa=_0x2349fd=>{const _0x192cb8=a0_0x3cfc7d;let _0x5d6074='z_'+_0x2349fd+'_Contacts';return T?.[_0x192cb8(0x4c7)](_0x192cb8(0x4b2),io,_0x5d6074);},ia=require(a0_0x3cfc7d(0x514)),gs=class{},oo=new ia[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),oa=Y?.['model'](gs['name'],oo,a0_0x3cfc7d(0x52e)),ra=require(a0_0x3cfc7d(0x514)),ms=class{},ro=new ra[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),We=Y?.[a0_0x3cfc7d(0x4c7)](ms['name'],ro,a0_0x3cfc7d(0x4d2)),ws=require('mongoose'),fs=class{},no=new ws[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),co=new ws[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),na=Y?.[a0_0x3cfc7d(0x4c7)](fs['name'],co,'messagesLogs'),ca=_0x52e86d=>{const _0x1bd459=a0_0x3cfc7d;let _0x2ff045='z_'+_0x52e86d+_0x1bd459(0x4e5);return T?.[_0x1bd459(0x4c7)](_0x1bd459(0x7d6),no,_0x2ff045);},la=require('mongoose'),ys=class{},lo=new la[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),ua=T?.[a0_0x3cfc7d(0x4c7)](ys[a0_0x3cfc7d(0x75b)],lo,a0_0x3cfc7d(0x178)),da=require('mongoose'),bs=class{},pa=new da['Schema']({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});pa[a0_0x3cfc7d(0x826)](a0_0x3cfc7d(0x565),function(_0x110e7b){const _0x12ccf0=a0_0x3cfc7d;delete this['flowActive'],delete this[_0x12ccf0(0x586)],delete this[_0x12ccf0(0x6c0)],delete this[_0x12ccf0(0x263)],delete this['flowStopMinutes'],_0x110e7b();});var ha=T?.[a0_0x3cfc7d(0x4c7)](bs['name'],pa,a0_0x3cfc7d(0x4af)),P=require(a0_0x3cfc7d(0x514)),Ss=require('uuid'),ze=class{},Ms=class{},ma=new P[(a0_0x3cfc7d(0x3e4))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Cs=new P[(a0_0x3cfc7d(0x3e4))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),uo=new P[(a0_0x3cfc7d(0x3e4))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':'list'},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x3cfc7d(0x10d)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x3cfc7d(0x88d)},'pollErrorMessage':{'type':String,'default':a0_0x3cfc7d(0x400)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),fa=new P[(a0_0x3cfc7d(0x3e4))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),po=new P[(a0_0x3cfc7d(0x3e4))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),ho=new P[(a0_0x3cfc7d(0x3e4))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Es=new P[(a0_0x3cfc7d(0x3e4))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),go=new P[(a0_0x3cfc7d(0x3e4))]({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),wa=new P[(a0_0x3cfc7d(0x3e4))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':uo},'apirequest':po,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':go,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),ya=new P[(a0_0x3cfc7d(0x3e4))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),ba=new P[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[Es],'blocks':[wa],'groups':[ma],'conditions':[fa],'varedits':[ya],'replyOptions':{'type':[Cs],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x345941=a0_0x3cfc7d;return _0x345941(0x74c)+Math[_0x345941(0x6eb)]()['toString'](0x24)[_0x345941(0x1ae)](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':'false'},'startID':{'type':String,'default':()=>(0x0,Ss['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ss['v4'])()},'shareOwners':{'type':[String],'default':[]}});ba[a0_0x3cfc7d(0x826)]('findOneAndUpdate',function(_0x4a6231){const _0x2bd02e=a0_0x3cfc7d;let _0x16e728=this[_0x2bd02e(0x32a)]();if(_0x16e728&&typeof _0x16e728==_0x2bd02e(0x54e)&&_0x2bd02e(0x5ad)in _0x16e728){let _0xdf32fb=_0x16e728['$set'];if(_0xdf32fb){let _0x49054a=new Set(),_0x35b5f0=new Set(_0xdf32fb['variables']?.[_0x2bd02e(0x733)](_0x3c2dda=>_0x3c2dda[_0x2bd02e(0x75b)])),_0x500de6=JSON[_0x2bd02e(0x238)](_0xdf32fb),_0x122bf6=/{{(?!_)([^}]*)}}/g,_0x41610d;for(;(_0x41610d=_0x122bf6['exec'](_0x500de6))!==null;)_0x35b5f0[_0x2bd02e(0x114)](_0x41610d[0x1])||_0x49054a[_0x2bd02e(0x199)](_0x41610d[0x1]);_0x49054a[_0x2bd02e(0x856)]>0x0?(console['warn'](_0x2bd02e(0x7dd),Array['from'](_0x49054a)),_0xdf32fb['variablesNotFound']=Array['from'](_0x49054a)):_0xdf32fb[_0x2bd02e(0x7a1)]=[],this[_0x2bd02e(0x417)]({'$set':_0xdf32fb});}}_0x4a6231();});var Me=T?.[a0_0x3cfc7d(0x4c7)](Ms['name'],ba,'allFlows'),mo=new P[(a0_0x3cfc7d(0x3e4))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[Es],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[ho]},{'_id':!0x1}),fo=new P[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[Es],'blocks':[wa],'groups':[ma],'conditions':[fa],'varedits':[ya],'replyOptions':{'type':[Cs],'default':[]},'chatLog':mo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x3cfc7d(0x19a)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x3cfc7d(0x88d)},'waitingMenu_replyOptions':{'type':[Cs],'default':[]}}),Sa=_0x390f25=>{const _0x32c192=a0_0x3cfc7d;let _0x4b6eeb='z_'+_0x390f25+_0x32c192(0x521);return T?.['model'](_0x32c192(0x43a),fo,_0x4b6eeb);},wo=new P['Schema']({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),ga=new P['Schema']({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),yo=new P[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[ga],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x3cfc7d(0x14f)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[wo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':ga,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ma=_0x3045bc=>{const _0x178356=a0_0x3cfc7d;let _0x505bc3='z_'+_0x3045bc+_0x178356(0x569);return T?.['model'](_0x178356(0x189),yo,_0x505bc3);},vs=class{},bo=new P[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),So=new P[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Mo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Co=new P[(a0_0x3cfc7d(0x3e4))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':a0_0x3cfc7d(0x450)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),vo=new P[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),Eo=new P[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[vo]},'customFields':{'type':[Mo]},'flowConfig':{'type':Co,'default':{}},'flows':{'type':[So],'default':[]},'autoCompleteMessages':{'type':[bo],'default':[]}}),Te=T?.['model'](vs[a0_0x3cfc7d(0x75b)],Eo,a0_0x3cfc7d(0x37f)),Ca=require('mongoose'),No=new Ca['Schema']({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),va=_0x549a80=>{const _0x4d376d=a0_0x3cfc7d;let _0x50156='z_'+_0x549a80+_0x4d376d(0x34c);return T?.['model']('LabelModel',No,_0x50156);},O=class{constructor(_0x374330){const _0x9ca9e1=a0_0x3cfc7d;this[_0x9ca9e1(0x235)]=_0x374330[_0x9ca9e1(0x840)](_0x9ca9e1(0x621));}};function A(_0x598840){const _0x5c546=a0_0x3cfc7d;let _0x119474={};for(let [_0x5bfd86,_0x22f3a9]of Object[_0x5c546(0x2b7)](_0x598840))if(typeof _0x22f3a9=='object'&&!Array[_0x5c546(0x2f5)](_0x22f3a9)){for(let [_0x308097,_0x1d6877]of Object[_0x5c546(0x2b7)](_0x22f3a9))_0x119474[_0x5bfd86+'.'+_0x308097]=_0x1d6877;}else _0x119474[_0x5bfd86]=_0x22f3a9;return _0x119474;}var He=class{constructor(_0x15c64e,_0x3f4473,_0x236ede,_0x43dc27,_0x1fa58b,_0x472507,_0x454b68,_0xfd3987,_0x26427d,_0x3f2e95,_0x441a8b,_0x384ce0,_0x742b9a,_0x2b9c47){const _0x2726ce=a0_0x3cfc7d;this['message']=_0x15c64e,this[_0x2726ce(0x52b)]=_0x3f4473,this[_0x2726ce(0x447)]=_0x236ede,this[_0x2726ce(0x770)]=_0x43dc27,this[_0x2726ce(0x4bf)]=_0x1fa58b,this[_0x2726ce(0x4af)]=_0x472507,this[_0x2726ce(0x1cf)]=_0x454b68,this['instance']=_0xfd3987,this[_0x2726ce(0x2dc)]=_0x26427d,this[_0x2726ce(0x86b)]=_0x3f2e95,this[_0x2726ce(0x1d3)]=_0x441a8b,this[_0x2726ce(0x86c)]=_0x384ce0,this[_0x2726ce(0x730)]=_0x742b9a,this[_0x2726ce(0x47e)]=_0x2b9c47;}get['dbServer'](){const _0x119e63=a0_0x3cfc7d;return this[_0x119e63(0x47e)];}},Ke=class{},Qe=class extends O{[a0_0x3cfc7d(0x4e6)](_0xb45166){return ca(_0xb45166);}async['insert'](_0x44c98d,_0xf0852d){const _0x23faa3=a0_0x3cfc7d;if(_0x44c98d[_0x23faa3(0x11c)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x23faa3(0x4e6)](_0xf0852d)['insertMany']([..._0x44c98d]))[_0x23faa3(0x11c)]};}catch(_0x2073be){return _0x2073be;}}async[a0_0x3cfc7d(0x1c4)](_0x309431,_0x2d418a){const _0x4a05df=a0_0x3cfc7d;try{let _0x1a4080=this['getMessageModelForOwner'](_0x2d418a),_0x47556a=A(_0x309431['where']);return await _0x1a4080['find'](_0x47556a)[_0x4a05df(0x476)]({'messageTimestamp':-0x1})['limit'](_0x309431?.[_0x4a05df(0x1bf)]??0x0)['lean']();}catch{return[];}}async[a0_0x3cfc7d(0x7fb)](_0x5f4d31,_0x3a392b){const _0x4853de=a0_0x3cfc7d;try{let _0x4eedc0=this[_0x4853de(0x4e6)](_0x3a392b),_0x14d223=A(_0x5f4d31[_0x4853de(0x851)]);await _0x4eedc0[_0x4853de(0x892)](_0x14d223);}catch(_0x526907){console[_0x4853de(0x3c6)](_0x526907);}}async[a0_0x3cfc7d(0x3f8)](_0x10f2d9,_0x336683,_0x305b52){const _0x14e0fc=a0_0x3cfc7d;try{let _0x4f788f=this[_0x14e0fc(0x4e6)](_0x305b52),_0x2a1471=A(_0x10f2d9[_0x14e0fc(0x851)]);return await _0x4f788f[_0x14e0fc(0x5c3)](_0x2a1471,{'$set':_0x336683},{'new':!0x0});}catch(_0xb5bc4c){throw console[_0x14e0fc(0x3c6)](_0xb5bc4c),_0xb5bc4c;}}async['insertMany'](_0x5767ee,_0x147c50){const _0x5440bc=a0_0x3cfc7d;if(_0x5767ee[_0x5440bc(0x11c)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x5440bc(0x4e6)](_0x147c50)['insertMany']([..._0x5767ee]))['length']};}catch(_0x2d3df4){return console['log']('ERROR:\x20',_0x2d3df4),_0x2d3df4;}}async[a0_0x3cfc7d(0x18c)](_0x2d378f){const _0x58ac12=a0_0x3cfc7d;try{return await this[_0x58ac12(0x4e6)](_0x2d378f)['collection'][_0x58ac12(0x814)](),{'success':!0x0};}catch(_0x3c5ae2){return console[_0x58ac12(0x3c6)](_0x3c5ae2),{'success':!0x1,'error':_0x3c5ae2};}}},Ds=I(require('@ffmpeg-installer/ffmpeg')),w=I(require(a0_0x3cfc7d(0x28b))),Fe=require('fs'),j=I(require(a0_0x3cfc7d(0x304))),K=I(require(a0_0x3cfc7d(0x4a0))),Ti=require(a0_0x3cfc7d(0x791)),Ii=I(require('qrcode')),_i=I(require(a0_0x3cfc7d(0x62a))),Ea=[a0_0x3cfc7d(0x7bb),a0_0x3cfc7d(0x748),'audioMessage','videoMessage',a0_0x3cfc7d(0x485)],Na=[a0_0x3cfc7d(0x3d9),a0_0x3cfc7d(0x517),a0_0x3cfc7d(0x3a9),a0_0x3cfc7d(0x10a)],ks=require('os'),Ft=I(require(a0_0x3cfc7d(0x5fe))),Ue=require(a0_0x3cfc7d(0x41d)),Oi=require(a0_0x3cfc7d(0x2b4)),pe=I(require('mongoose')),J=require('class-validator'),ce=class{constructor(_0x9f5ef6,_0x5dd091,_0x2d606d){const _0x54760e=a0_0x3cfc7d;this['jid']=_0x9f5ef6,this[_0x54760e(0x78a)]=_0x5dd091,this['name']=_0x2d606d;}},Ye=class{},Xe=class{},Ie=class{},Ze=class{},et=class{},Ce=class{},tt=class{},st=class{},at=class{},it=class{},xt=I(require(a0_0x3cfc7d(0x18e))),$a=require('fs'),Ra=require(a0_0x3cfc7d(0x304));async function _e(_0x4479b2){const _0x48dca5=a0_0x3cfc7d;let _0xd46483=G[_0x48dca5(0x7f6)][_0x4479b2];if(L[_0x48dca5(0x78c)]){let _0x3c9285=T[_0x48dca5(0x81d)]()['db'](L[_0x48dca5(0x46f)][_0x48dca5(0x1bc)]+'-instances')[_0x48dca5(0x86d)](_0x4479b2);return _0xd46483||(await _0x3c9285[_0x48dca5(0x1c4)]({})[_0x48dca5(0x71d)]())[_0x48dca5(0x11c)]>0x0;}return _0xd46483||(0x0,$a[_0x48dca5(0x6a9)])((0x0,Ra[_0x48dca5(0x149)])(be,_0x4479b2));}async function Aa(_0x3daee7,_0x3d1872,_0x165a47){const _0x49eda2=a0_0x3cfc7d;if(_0x3daee7['originalUrl'][_0x49eda2(0x1ec)](_0x49eda2(0x69d))||_0x3daee7[_0x49eda2(0x404)][_0x49eda2(0x1ec)](_0x49eda2(0x4da))||_0x3daee7[_0x49eda2(0x404)]['includes'](_0x49eda2(0x7fe))||_0x3daee7[_0x49eda2(0x404)][_0x49eda2(0x1ec)](_0x49eda2(0x339))||_0x3daee7['originalUrl'][_0x49eda2(0x1ec)](_0x49eda2(0x732))||_0x3daee7[_0x49eda2(0x404)][_0x49eda2(0x1ec)]('/instance/connectionState')||_0x3daee7[_0x49eda2(0x404)][_0x49eda2(0x1ec)](_0x49eda2(0x52a)))return _0x165a47();let _0x5f3f6b=_0x3daee7[_0x49eda2(0x396)];if(!_0x5f3f6b?.[_0x49eda2(0x1c7)])throw new m('instanceName\x20not\x20provided.');if(!await _e(_0x5f3f6b['instanceName']))throw new U(_0x49eda2(0x379)+_0x5f3f6b['instanceName']+_0x49eda2(0x16b));_0x165a47();}async function Ta(_0x372e90,_0x18597b,_0x2fa3c){const _0x432e08=a0_0x3cfc7d;if(_0x372e90[_0x432e08(0x404)]['includes'](_0x432e08(0x69d))){let _0x3d4680=_0x372e90[_0x432e08(0x46e)];if(await _e(_0x3d4680[_0x432e08(0x1c7)]))throw new X(_0x432e08(0x66d)+_0x3d4680[_0x432e08(0x1c7)]+_0x432e08(0x61f));G['waInstances'][_0x3d4680[_0x432e08(0x1c7)]]&&delete G['waInstances'][_0x3d4680['instanceName']];}_0x2fa3c();}var Ia=require(a0_0x3cfc7d(0x1be)),_a=I(require(a0_0x3cfc7d(0x6df))),ot=a0_0x3cfc7d(0x76c),Ro=new $(a0_0x3cfc7d(0x5d6));async function Ao(_0x524676,_0x149ed8,_0x26b6eb){const _0x4e81bb=a0_0x3cfc7d;let _0x435db5=_0x524676[_0x4e81bb(0x840)](_0x4e81bb(0x763));if(_0x435db5&&S[_0x4e81bb(0x840)]('AUTHENTICATION')[_0x4e81bb(0x55e)][_0x4e81bb(0x41f)]!==_0x435db5)throw new se();if(S[_0x4e81bb(0x840)](_0x4e81bb(0x768))[_0x4e81bb(0x55e)][_0x4e81bb(0x41f)]===_0x435db5)return _0x26b6eb();if((_0x524676['originalUrl'][_0x4e81bb(0x1ec)](_0x4e81bb(0x69d))||_0x524676[_0x4e81bb(0x404)][_0x4e81bb(0x1ec)]('/instance/fetchInstances'))&&!_0x435db5)throw new X(_0x4e81bb(0x2ef),'The\x20global\x20api\x20key\x20must\x20be\x20set');let _0x417823=S['get'](_0x4e81bb(0x768))[_0x4e81bb(0xfc)];try{let [_0x597022,_0x54dc5a]=_0x524676[_0x4e81bb(0x840)](_0x4e81bb(0x19e))['split']('\x20');if(_0x597022[_0x4e81bb(0x784)]()!==_0x4e81bb(0x190))throw new se();if(!(0x0,Ia[_0x4e81bb(0x84f)])(_0x54dc5a))throw new se();let _0xb5fdfa=_0x524676[_0x4e81bb(0x396)],_0xf4e724=_a[_0x4e81bb(0x879)][_0x4e81bb(0x5c1)](_0x54dc5a,_0x417823[_0x4e81bb(0x852)],{'ignoreExpiration':_0x417823['EXPIRIN_IN']===0x0});if(_0xb5fdfa['instanceName']!==_0xf4e724['instanceName']||ot!==_0xf4e724[_0x4e81bb(0x260)])throw new se();return _0x26b6eb();}catch(_0x2f6edc){throw Ro['error'](_0x2f6edc),new se();}}async function To(_0x522d8f,_0x13d0a6,_0x43d7f4){const _0x38c17a=a0_0x3cfc7d;let _0x5a068e=S[_0x38c17a(0x840)](_0x38c17a(0x768))[_0x38c17a(0x55e)],_0x4fecfe=_0x522d8f['get'](_0x38c17a(0x763));if(_0x5a068e[_0x38c17a(0x41f)]===_0x4fecfe)return _0x43d7f4();if(_0x522d8f[_0x38c17a(0x404)]['includes'](_0x38c17a(0x69d))){let _0x464c7c=xa,_0x5cf771=_0x522d8f[_0x38c17a(0x46e)][_0x38c17a(0x1c7)];if(_0x464c7c&&_0x5cf771['toLowerCase']()[_0x38c17a(0x80e)](_0x464c7c['toLowerCase']()))return _0x43d7f4();if(!_0x4fecfe)throw new X(_0x38c17a(0x2ef),'The\x20global\x20api\x20key\x20must\x20be\x20set');}if(_0x522d8f[_0x38c17a(0x404)][_0x38c17a(0x1ec)](_0x38c17a(0x4da))&&!_0x4fecfe)throw new X(_0x38c17a(0x2ef),_0x38c17a(0x1f7));if(_0x522d8f[_0x38c17a(0x404)][_0x38c17a(0x1ec)](_0x38c17a(0x7fe))&&!_0x4fecfe)throw new X('Missing\x20global\x20api\x20key',_0x38c17a(0x1f7));if(_0x522d8f[_0x38c17a(0x404)][_0x38c17a(0x1ec)]('/config')&&!_0x4fecfe)throw new X(_0x38c17a(0x2ef),_0x38c17a(0x1f7));try{let _0x30f38d=_0x522d8f['params'],_0x503243=await me[_0x38c17a(0x1cf)][_0x38c17a(0x1c4)](_0x30f38d[_0x38c17a(0x1c7)]);if(_0x503243&&_0x503243[_0x38c17a(0x763)]===_0x4fecfe)return _0x43d7f4();}catch{}throw new se();}var Oa={'jwt':Ao,'apikey':To},pi=require(a0_0x3cfc7d(0x18e)),C=require(a0_0x3cfc7d(0x791)),v=(..._0x447158)=>{const _0x43da85=a0_0x3cfc7d;let _0x3197d4={};return _0x447158[_0x43da85(0x455)](_0x3d81d1=>_0x3197d4[_0x3d81d1]={'minLength':0x1,'description':'The\x20\x22'+_0x3d81d1+_0x43da85(0x555)}),{'if':{'propertyNames':{'enum':[..._0x447158]}},'then':{'properties':_0x3197d4}};},E={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'instanceName':{'type':'string'}},...v('instanceName')},Tc={'$id':(0x0,C['v4'])(),'type':'object','properties':{'oldToken':{'type':a0_0x3cfc7d(0x3f6)}},'required':['oldToken'],...v(a0_0x3cfc7d(0x80b))},Ic={'properties':{'key':{'type':a0_0x3cfc7d(0x54e),'properties':{'id':{'type':a0_0x3cfc7d(0x3f6)},'remoteJid':{'type':a0_0x3cfc7d(0x3f6)},'fromMe':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]}},'required':['id',a0_0x3cfc7d(0x6d9),'fromMe'],...v('id',a0_0x3cfc7d(0x6d9))},'message':{'type':a0_0x3cfc7d(0x54e)}}},ae={'properties':{'delay':{'type':'integer','description':a0_0x3cfc7d(0x195)},'presence':{'type':'string','enum':['unavailable',a0_0x3cfc7d(0x5a1),a0_0x3cfc7d(0x7d1),a0_0x3cfc7d(0x2c2),a0_0x3cfc7d(0x31f)]}}},Z={'type':'string','description':'Invalid\x20format'},Pa={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'number':{...Z},'options':{...ae},'textMessage':{'type':a0_0x3cfc7d(0x54e),'properties':{'text':{'type':a0_0x3cfc7d(0x3f6)}},'required':['text'],...v(a0_0x3cfc7d(0x2c7))}},'required':[a0_0x3cfc7d(0x39a),a0_0x3cfc7d(0x162)]},Da={'type':a0_0x3cfc7d(0x3f6),'pattern':'^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','description':a0_0x3cfc7d(0x585)},_c={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'number':{...Da},'options':{...ae},'textMessage':{'type':a0_0x3cfc7d(0x54e),'properties':{'text':{'type':a0_0x3cfc7d(0x3f6)}},'required':[a0_0x3cfc7d(0x2c7)],...v('text')}},'required':[a0_0x3cfc7d(0x39a),a0_0x3cfc7d(0x162)]},Oc={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Da},'options':{...ae},'mediaMessage':{'type':a0_0x3cfc7d(0x54e),'properties':{'mediatype':{'type':a0_0x3cfc7d(0x3f6),'enum':[a0_0x3cfc7d(0x5f6),'document',a0_0x3cfc7d(0x816),a0_0x3cfc7d(0x873)]},'media':{'type':a0_0x3cfc7d(0x3f6)},'fileName':{'type':'string'},'caption':{'type':a0_0x3cfc7d(0x3f6)}},'required':[a0_0x3cfc7d(0x865),a0_0x3cfc7d(0x835)],...v(a0_0x3cfc7d(0x40b),a0_0x3cfc7d(0x444),a0_0x3cfc7d(0x835))}},'required':[a0_0x3cfc7d(0x319),a0_0x3cfc7d(0x162)]},ka={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'number':{...Z},'options':{...ae},'stickerMessage':{'type':a0_0x3cfc7d(0x54e),'properties':{'image':{'type':a0_0x3cfc7d(0x3f6)}},'required':[a0_0x3cfc7d(0x5f6)],...v(a0_0x3cfc7d(0x5f6))}},'required':[a0_0x3cfc7d(0x485),a0_0x3cfc7d(0x162)]},La={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'statusMessage':{'type':a0_0x3cfc7d(0x54e),'properties':{'type':{'type':'string','enum':['text',a0_0x3cfc7d(0x5f6),a0_0x3cfc7d(0x873),a0_0x3cfc7d(0x816)]},'content':{'type':a0_0x3cfc7d(0x3f6)},'caption':{'type':'string'},'backgroundColor':{'type':a0_0x3cfc7d(0x3f6)},'font':{'type':a0_0x3cfc7d(0x6ba),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3cfc7d(0x3f6),'pattern':'^\x5cd+','description':a0_0x3cfc7d(0x744)}},'allContacts':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]}},'required':[a0_0x3cfc7d(0x77b),'content'],...v('type','content')}},'required':[a0_0x3cfc7d(0x63d)]},Fa={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x3cfc7d(0x3f6),'enum':['image',a0_0x3cfc7d(0x4cd),a0_0x3cfc7d(0x816),a0_0x3cfc7d(0x873)]},'media':{'type':a0_0x3cfc7d(0x3f6)},'fileName':{'type':a0_0x3cfc7d(0x3f6)},'caption':{'type':a0_0x3cfc7d(0x3f6)}},'required':[a0_0x3cfc7d(0x865),a0_0x3cfc7d(0x835)],...v(a0_0x3cfc7d(0x40b),'caption',a0_0x3cfc7d(0x835))}},'required':[a0_0x3cfc7d(0x319),a0_0x3cfc7d(0x162)]},Ua={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'number':{...Z},'options':{...ae},'audioMessage':{'type':'object','properties':{'audio':{'type':a0_0x3cfc7d(0x3f6)}},'required':['audio'],...v(a0_0x3cfc7d(0x873))}},'required':['audioMessage',a0_0x3cfc7d(0x162)]},ja={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'number':{...Z},'pollMessage':{'type':'object','properties':{'name':{'type':a0_0x3cfc7d(0x3f6)},'selectableCount':{'type':'number'},'values':{'type':a0_0x3cfc7d(0x717),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x3cfc7d(0x75b),a0_0x3cfc7d(0x6d7),a0_0x3cfc7d(0x291)],...v('name',a0_0x3cfc7d(0x6d7),a0_0x3cfc7d(0x291))}},'required':[a0_0x3cfc7d(0x162),a0_0x3cfc7d(0x181)]},Ja={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'number':{...Z},'menuMessage':{'type':a0_0x3cfc7d(0x54e),'properties':{'text':{'type':a0_0x3cfc7d(0x3f6)},'choices':{'type':a0_0x3cfc7d(0x717),'uniqueItems':!0x0}},'required':[a0_0x3cfc7d(0x2c7),a0_0x3cfc7d(0x703)],...v('text',a0_0x3cfc7d(0x703))}},'required':[a0_0x3cfc7d(0x162),a0_0x3cfc7d(0x175)]},qa={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'number':{...Z},'options':{...ae},'locationMessage':{'type':a0_0x3cfc7d(0x54e),'properties':{'latitude':{'type':a0_0x3cfc7d(0x162)},'longitude':{'type':a0_0x3cfc7d(0x162)},'name':{'type':a0_0x3cfc7d(0x3f6)},'address':{'type':a0_0x3cfc7d(0x3f6)}},'required':[a0_0x3cfc7d(0x83a),'longitude'],...v(a0_0x3cfc7d(0x75b),a0_0x3cfc7d(0x4ed))}},'required':[a0_0x3cfc7d(0x162),a0_0x3cfc7d(0x5b8)]},Va={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'number':{...Z},'options':{...ae},'listMessage':{'type':'object','properties':{'title':{'type':a0_0x3cfc7d(0x3f6)},'description':{'type':a0_0x3cfc7d(0x3f6)},'footerText':{'type':a0_0x3cfc7d(0x3f6)},'buttonText':{'type':a0_0x3cfc7d(0x3f6)},'sections':{'type':a0_0x3cfc7d(0x717),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3cfc7d(0x54e),'properties':{'title':{'type':a0_0x3cfc7d(0x3f6)},'rows':{'type':a0_0x3cfc7d(0x717),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3cfc7d(0x54e),'properties':{'title':{'type':'string'},'description':{'type':a0_0x3cfc7d(0x3f6)},'rowId':{'type':a0_0x3cfc7d(0x3f6)}},'required':[a0_0x3cfc7d(0x486),'rowId'],...v(a0_0x3cfc7d(0x486),a0_0x3cfc7d(0x76d))}}},'required':['title',a0_0x3cfc7d(0x57a)],...v('title')}}},'required':[a0_0x3cfc7d(0x486),a0_0x3cfc7d(0x2c0),'buttonText',a0_0x3cfc7d(0x608)],...v(a0_0x3cfc7d(0x486),a0_0x3cfc7d(0x2c0),a0_0x3cfc7d(0x27e),a0_0x3cfc7d(0x75a))}},'required':[a0_0x3cfc7d(0x162),'listMessage']},Ga={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ae},'contactMessage':{'type':a0_0x3cfc7d(0x717),'items':{'type':a0_0x3cfc7d(0x54e),'properties':{'fullName':{'type':a0_0x3cfc7d(0x3f6)},'phoneNumber':{'type':a0_0x3cfc7d(0x3f6),'minLength':0xa}},'required':[a0_0x3cfc7d(0x409),a0_0x3cfc7d(0x2c6)],...v(a0_0x3cfc7d(0x409))},'minItems':0x1,'uniqueItems':!0x0}},'required':['number',a0_0x3cfc7d(0x3c5)]},Ba={'$id':(0x0,C['v4'])(),'type':'object','properties':{'reactionMessage':{'type':'object','properties':{'key':{'type':a0_0x3cfc7d(0x54e),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x3cfc7d(0x3f6)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id',a0_0x3cfc7d(0x6d9),a0_0x3cfc7d(0x562)],...v('id','remoteJid')},'reaction':{'type':a0_0x3cfc7d(0x3f6)}},'required':['key',a0_0x3cfc7d(0x779)],...v(a0_0x3cfc7d(0x779))}},'required':[a0_0x3cfc7d(0x6d2)]},Wa={'$id':(0x0,C['v4'])(),'type':'object','properties':{'numbers':{'type':a0_0x3cfc7d(0x717),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3cfc7d(0x3f6),'pattern':a0_0x3cfc7d(0x7a8),'description':'\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}}},za={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'readMessages':{'type':a0_0x3cfc7d(0x717),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x3cfc7d(0x3f6)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x3cfc7d(0x3f6)}},'required':['id','fromMe',a0_0x3cfc7d(0x6d9)],...v('id',a0_0x3cfc7d(0x6d9))}}},'required':[a0_0x3cfc7d(0x463)]},Ha={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'privacySettings':{'type':a0_0x3cfc7d(0x54e),'properties':{'readreceipts':{'type':a0_0x3cfc7d(0x3f6),'enum':['all',a0_0x3cfc7d(0x188)]},'profile':{'type':a0_0x3cfc7d(0x3f6),'enum':[a0_0x3cfc7d(0x35a),a0_0x3cfc7d(0x505),a0_0x3cfc7d(0x872),a0_0x3cfc7d(0x188)]},'status':{'type':a0_0x3cfc7d(0x3f6),'enum':[a0_0x3cfc7d(0x35a),a0_0x3cfc7d(0x505),a0_0x3cfc7d(0x872),a0_0x3cfc7d(0x188)]},'online':{'type':'string','enum':[a0_0x3cfc7d(0x35a),a0_0x3cfc7d(0x5c7)]},'last':{'type':a0_0x3cfc7d(0x3f6),'enum':[a0_0x3cfc7d(0x35a),a0_0x3cfc7d(0x505),a0_0x3cfc7d(0x872),a0_0x3cfc7d(0x188)]},'groupadd':{'type':a0_0x3cfc7d(0x3f6),'enum':[a0_0x3cfc7d(0x35a),a0_0x3cfc7d(0x505),a0_0x3cfc7d(0x872),'none']}},'required':[a0_0x3cfc7d(0x2a7),a0_0x3cfc7d(0x3dd),a0_0x3cfc7d(0x204),'online',a0_0x3cfc7d(0x2ff),a0_0x3cfc7d(0x131)],...v(a0_0x3cfc7d(0x2a7),'profile','status',a0_0x3cfc7d(0x34f),a0_0x3cfc7d(0x2ff),a0_0x3cfc7d(0x131))}},'required':['privacySettings']},Ka={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'lastMessage':{'type':a0_0x3cfc7d(0x54e),'properties':{'key':{'type':'object','properties':{'id':{'type':a0_0x3cfc7d(0x3f6)},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]}},'required':['id','fromMe',a0_0x3cfc7d(0x6d9)],...v('id',a0_0x3cfc7d(0x6d9))},'messageTimestamp':{'type':a0_0x3cfc7d(0x6ba),'minLength':0x1}},'required':[a0_0x3cfc7d(0x1e4)],...v(a0_0x3cfc7d(0x2bb))},'archive':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x3cfc7d(0x6f0),a0_0x3cfc7d(0x573)]},Qa={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'id':{'type':a0_0x3cfc7d(0x3f6)},'fromMe':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x3cfc7d(0x3f6)},'participant':{'type':a0_0x3cfc7d(0x3f6)}},'required':['id',a0_0x3cfc7d(0x562),a0_0x3cfc7d(0x6d9)],...v('id',a0_0x3cfc7d(0x6d9),'participant')},Ya={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'where':{'type':'object','properties':{'_id':{'type':'string','minLength':0x1},'pushName':{'type':a0_0x3cfc7d(0x3f6),'minLength':0x1},'id':{'type':a0_0x3cfc7d(0x3f6),'minLength':0x1}},...v('_id','id',a0_0x3cfc7d(0x7b2))}}},Xa={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'name':{'type':a0_0x3cfc7d(0x3f6)}},...v(a0_0x3cfc7d(0x75b))},Za={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'status':{'type':a0_0x3cfc7d(0x3f6)}},...v(a0_0x3cfc7d(0x204))},Oe={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'number':{'type':a0_0x3cfc7d(0x3f6)},'picture':{'type':a0_0x3cfc7d(0x3f6)}}},ei={'type':a0_0x3cfc7d(0x54e),'properties':{'wuid':{'type':a0_0x3cfc7d(0x3f6)},'name':{'type':a0_0x3cfc7d(0x3f6)},'picture':{'type':a0_0x3cfc7d(0x3f6)},'status':{'type':'string'},'isBusiness':{'type':a0_0x3cfc7d(0x3ac)}}},ti={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'where':{'type':a0_0x3cfc7d(0x54e),'properties':{'_id':{'type':a0_0x3cfc7d(0x3f6),'minLength':0x1},'key':{'type':a0_0x3cfc7d(0x54e),'if':{'propertyNames':{'enum':[a0_0x3cfc7d(0x562),'remoteJid','id']}},'then':{'properties':{'remoteJid':{'type':a0_0x3cfc7d(0x3f6),'minLength':0x1,'description':a0_0x3cfc7d(0x688)},'id':{'type':a0_0x3cfc7d(0x3f6),'minLength':0x1,'description':a0_0x3cfc7d(0x688)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x3cfc7d(0x54e)}},...v(a0_0x3cfc7d(0x7b5))},'limit':{'type':'integer'}}},xc={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'where':{'type':a0_0x3cfc7d(0x54e),'properties':{'_id':{'type':a0_0x3cfc7d(0x3f6)},'remoteJid':{'type':a0_0x3cfc7d(0x3f6)},'id':{'type':a0_0x3cfc7d(0x3f6)},'fromMe':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x3cfc7d(0x3f6)},'status':{'type':a0_0x3cfc7d(0x3f6),'enum':[a0_0x3cfc7d(0x2ab),'PENDING',a0_0x3cfc7d(0x473),a0_0x3cfc7d(0x33e),a0_0x3cfc7d(0x69f),'PLAYED']}},...v(a0_0x3cfc7d(0x7b5),a0_0x3cfc7d(0x6d9),'id',a0_0x3cfc7d(0x204))},'limit':{'type':a0_0x3cfc7d(0x6ba)}}},si={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'number':{...Z},'presence':{'type':a0_0x3cfc7d(0x3f6),'enum':[a0_0x3cfc7d(0x293),a0_0x3cfc7d(0x5a1),'composing',a0_0x3cfc7d(0x2c2),a0_0x3cfc7d(0x31f)]}},'required':[a0_0x3cfc7d(0x797),'number']},ai={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'subject':{'type':a0_0x3cfc7d(0x3f6)},'description':{'type':a0_0x3cfc7d(0x3f6)},'profilePicture':{'type':a0_0x3cfc7d(0x3f6)},'participants':{'type':a0_0x3cfc7d(0x717),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3cfc7d(0x3f6),'minLength':0xa,'pattern':a0_0x3cfc7d(0x640),'description':'\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}},'required':[a0_0x3cfc7d(0x507),a0_0x3cfc7d(0x365)],...v('subject','description',a0_0x3cfc7d(0x1e6))},xe={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'groupJid':{'type':a0_0x3cfc7d(0x3f6),'pattern':'^\x5cd+([-]\x5cd+)*@g.us$'}},'required':[a0_0x3cfc7d(0x669)],...v(a0_0x3cfc7d(0x669))},ii={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'groupJid':{'type':a0_0x3cfc7d(0x3f6)},'action':{'type':a0_0x3cfc7d(0x3f6),'enum':[a0_0x3cfc7d(0x199),a0_0x3cfc7d(0x2d5),a0_0x3cfc7d(0x7ff),'demote','reject',a0_0x3cfc7d(0x4cc)]},'participants':{'type':a0_0x3cfc7d(0x717),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':a0_0x3cfc7d(0x640),'description':a0_0x3cfc7d(0x2ad)}}},'required':[a0_0x3cfc7d(0x669),'action',a0_0x3cfc7d(0x365)],...v(a0_0x3cfc7d(0x669),'action')},oi={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'groupJid':{'type':'string'},'expiration':{'type':a0_0x3cfc7d(0x162),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':['groupJid',a0_0x3cfc7d(0x571)],...v(a0_0x3cfc7d(0x669),a0_0x3cfc7d(0x571))},ri={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'groupJid':{'type':'string'},'image':{'type':a0_0x3cfc7d(0x3f6)}},'required':[a0_0x3cfc7d(0x669),a0_0x3cfc7d(0x5f6)],...v(a0_0x3cfc7d(0x669),a0_0x3cfc7d(0x5f6))},ni={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'groupJid':{'type':a0_0x3cfc7d(0x3f6)},'description':{'type':a0_0x3cfc7d(0x3f6)}},'required':['groupJid',a0_0x3cfc7d(0x2c0)],...v(a0_0x3cfc7d(0x669),a0_0x3cfc7d(0x2c0))},ci={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'groupJid':{'type':a0_0x3cfc7d(0x3f6)},'name':{'type':a0_0x3cfc7d(0x3f6)}},'required':['groupJid',a0_0x3cfc7d(0x75b)],...v(a0_0x3cfc7d(0x669),a0_0x3cfc7d(0x75b))},li={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'groupJid':{'type':'string'},'setting':{'type':'string','enum':['announcement','not_announcement','unlocked','locked']}},'required':[a0_0x3cfc7d(0x669),'setting'],...v(a0_0x3cfc7d(0x669),a0_0x3cfc7d(0x685))},ui={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':a0_0x3cfc7d(0x3f6)},'restrict':{'type':a0_0x3cfc7d(0x3ac)},'announce':{'type':a0_0x3cfc7d(0x3ac)},'memberAddMode':{'type':a0_0x3cfc7d(0x3ac)},'joinApprovalMode':{'type':a0_0x3cfc7d(0x3ac)},'expiration':{'type':'integer','enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x3cfc7d(0x3f6)},'description':{'type':'string'},'image':{'type':a0_0x3cfc7d(0x3f6)}}},Ns={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'inviteCode':{'type':a0_0x3cfc7d(0x3f6)}},'required':['inviteCode'],...v(a0_0x3cfc7d(0x286))},di={'$id':(0x0,C['v4'])(),'type':'object','properties':{'url':{'type':a0_0x3cfc7d(0x3f6)},'enabled':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]}},'required':[a0_0x3cfc7d(0x855),a0_0x3cfc7d(0x119)]},Pc={'$id':(0x0,C['v4'])(),'type':a0_0x3cfc7d(0x54e),'properties':{'local_map':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x3cfc7d(0x3ac),'enum':[!0x0,!0x1]}},'required':[a0_0x3cfc7d(0x3fc),a0_0x3cfc7d(0x761),a0_0x3cfc7d(0x150),a0_0x3cfc7d(0x3d6),a0_0x3cfc7d(0x333),a0_0x3cfc7d(0x22f),a0_0x3cfc7d(0x6b3),a0_0x3cfc7d(0x328),a0_0x3cfc7d(0x50a),'CONTACTS_UPDATE',a0_0x3cfc7d(0x24a),a0_0x3cfc7d(0x599),'CHATS_UPSERT',a0_0x3cfc7d(0x2d4),a0_0x3cfc7d(0x1fe),a0_0x3cfc7d(0x458),a0_0x3cfc7d(0x847),a0_0x3cfc7d(0x3eb),'GROUP_PARTICIPANTS_UPDATE'],...v('local_map','STATUS_INSTANCE','QRCODE_UPDATED','MESSAGES_SET',a0_0x3cfc7d(0x333),a0_0x3cfc7d(0x22f),a0_0x3cfc7d(0x6b3),'CONTACTS_SET',a0_0x3cfc7d(0x50a),a0_0x3cfc7d(0x753),a0_0x3cfc7d(0x24a),'CHATS_SET','CHATS_UPSERT','CHATS_UPDATE',a0_0x3cfc7d(0x1fe),a0_0x3cfc7d(0x458),a0_0x3cfc7d(0x847),a0_0x3cfc7d(0x3eb),a0_0x3cfc7d(0x697))},rt=class{},nt=class extends O{['getContactModelForOwner'](_0x58c0d4){return aa(_0x58c0d4);}async[a0_0x3cfc7d(0x6d6)](_0x54e309){const _0x1a33b7=a0_0x3cfc7d;if(_0x54e309[_0x1a33b7(0x11c)]!==0x0)try{return{'insertCount':(await this[_0x1a33b7(0x2f7)](_0x54e309[0x0][_0x1a33b7(0x6a6)])[_0x1a33b7(0x756)]([..._0x54e309]))[_0x1a33b7(0x11c)]};}catch(_0x4181ae){return _0x4181ae;}}async['delete'](_0x4817fd,_0x1cfb8f){const _0x5386eb=a0_0x3cfc7d;try{return{'deletedCount':(await this['getContactModelForOwner'](_0x1cfb8f)[_0x5386eb(0x892)]({..._0x4817fd[_0x5386eb(0x851)]}))[_0x5386eb(0x55c)]};}catch(_0x4b7d58){return{'error':_0x4b7d58?.['toString']()};}}async['update'](_0x1c383b,_0x452b40){const _0x2e8228=a0_0x3cfc7d;try{if(_0x1c383b[_0x2e8228(0x11c)]===0x0)return;let _0x3095b8=this['getContactModelForOwner'](_0x452b40),_0x39acf4=_0x1c383b['map'](_0x13c44e=>({'updateOne':{'filter':{'_id':_0x13c44e['_id'],'owner':_0x452b40},'update':{..._0x13c44e}}})),{modifiedCount:_0x31c2e4}=await _0x3095b8['bulkWrite'](_0x39acf4);return{'insertCount':_0x31c2e4};}catch{return;}}async[a0_0x3cfc7d(0x1c4)](_0x4a78cf,_0x13fb49){const _0x57ab89=a0_0x3cfc7d;try{let _0x3ccfec=this[_0x57ab89(0x2f7)](_0x13fb49),_0x377b50=A(_0x4a78cf[_0x57ab89(0x851)]);return await _0x3ccfec[_0x57ab89(0x1c4)](_0x377b50)['limit'](_0x4a78cf?.['limit']??0x0)[_0x57ab89(0x6cd)]();}catch{return[];}}async[a0_0x3cfc7d(0x36a)](_0x2fd301,_0x285cab){const _0x3c1f00=a0_0x3cfc7d;try{let _0x2c434b=this[_0x3c1f00(0x2f7)](_0x285cab),_0xb4026e=A(_0x2fd301['where']);return await _0x2c434b[_0x3c1f00(0x36a)](_0xb4026e)[_0x3c1f00(0x6cd)]();}catch{return null;}}async['deleteAll'](_0x2cd1ca){const _0x475bc0=a0_0x3cfc7d;try{return await this[_0x475bc0(0x2f7)](_0x2cd1ca)['collection'][_0x475bc0(0x814)](),{'success':!0x0};}catch(_0x15ebe1){return console['error'](_0x15ebe1),{'success':!0x1,'error':_0x15ebe1};}}},ct=require(a0_0x3cfc7d(0x56d)),Vc=require(a0_0x3cfc7d(0x4f6)),$s=new $(a0_0x3cfc7d(0x3e1)),V=class{[a0_0x3cfc7d(0x6a1)](_0x1fd689,_0x3768c8=!0x0){let _0x1a088c='/'+_0x1fd689;return _0x3768c8&&(_0x1a088c+='/:instanceName'),_0x1a088c;}async['dataValidate'](_0x2180a3){const _0x20553e=a0_0x3cfc7d;let {request:_0x1fc745,schema:_0x23e9fe,ClassRef:_0x283413,execute:_0x322837}=_0x2180a3,_0x2d6251=new _0x283413(),_0x4c60d7=_0x1fc745[_0x20553e(0x46e)],_0xade784=_0x1fc745[_0x20553e(0x396)];_0x1fc745?.['query']&&Object[_0x20553e(0x1a4)](_0x1fc745[_0x20553e(0x72c)])[_0x20553e(0x11c)]>0x0&&Object[_0x20553e(0x442)](_0xade784,_0x1fc745[_0x20553e(0x72c)]),_0x1fc745[_0x20553e(0x404)][_0x20553e(0x1ec)](_0x20553e(0x69d))&&Object['assign'](_0xade784,_0x4c60d7),Object[_0x20553e(0x442)](_0x2d6251,_0x4c60d7);let _0x3eb890=_0x23e9fe?(0x0,ct[_0x20553e(0x269)])(_0x2d6251,_0x23e9fe):{'valid':!0x0,'errors':[]};if(!_0x3eb890[_0x20553e(0x863)]){let _0x4db998=_0x3eb890[_0x20553e(0x674)]['map'](({property:_0x470d91,stack:_0x1b6a68,schema:_0x3eecb8})=>{const _0x5a6ef7=_0x20553e;let _0x1dc0e5;return _0x3eecb8[_0x5a6ef7(0x2c0)]?_0x1dc0e5=_0x3eecb8[_0x5a6ef7(0x2c0)]:_0x1dc0e5=_0x1b6a68[_0x5a6ef7(0x5e0)](_0x5a6ef7(0x287),''),{'property':_0x470d91['replace'](_0x5a6ef7(0x287),''),'message':_0x1dc0e5};});throw $s[_0x20553e(0x3c6)]([..._0x4db998]),new m(..._0x4db998);}return await _0x322837(_0xade784,_0x2d6251);}async[a0_0x3cfc7d(0x359)](_0x4527fd){const _0x168276=a0_0x3cfc7d;let {request:_0x4ef503,ClassRef:_0xbb46ca,schema:_0x5888e1,execute:_0x517136}=_0x4527fd,_0x2876f1=_0x4ef503[_0x168276(0x72c)];if(!_0x2876f1?.['groupJid'])throw new m(_0x168276(0x887),_0x168276(0x1b7));let _0x3d1a4e=_0x4ef503[_0x168276(0x396)],_0x4f106e=_0x4ef503['body'],_0x5db2e9=new _0xbb46ca();Object['assign'](_0x4f106e,_0x2876f1),Object['assign'](_0x5db2e9,_0x4f106e);let _0x4ac302=(0x0,ct['validate'])(_0x5db2e9,_0x5888e1);if(!_0x4ac302[_0x168276(0x863)]){let _0x5058de=_0x4ac302[_0x168276(0x674)][_0x168276(0x733)](({property:_0x155c5a,stack:_0x18d8ec,schema:_0x18bd96})=>{const _0x586cc6=_0x168276;let _0x1b525c;return _0x18bd96[_0x586cc6(0x2c0)]?_0x1b525c=_0x18bd96[_0x586cc6(0x2c0)]:_0x1b525c=_0x18d8ec['replace'](_0x586cc6(0x287),''),{'property':_0x155c5a['replace'](_0x586cc6(0x287),''),'message':_0x1b525c};});throw $s[_0x168276(0x3c6)]([..._0x5058de]),new m(..._0x5058de);}return await _0x517136(_0x3d1a4e,_0x5db2e9);}async['joinGroupValidate'](_0x221be9){const _0x53fb25=a0_0x3cfc7d;let {request:_0x52acd8,ClassRef:_0x1acbaf,schema:_0x5eaaae,execute:_0x376d70}=_0x221be9,_0x4c0517=_0x52acd8['body'];if(!_0x4c0517?.['inviteCode'])throw new m(_0x53fb25(0x1aa),_0x53fb25(0x6fc));let _0x118ffc=_0x52acd8['params'],_0x289a9d=_0x52acd8[_0x53fb25(0x46e)],_0x91a8c8=new _0x1acbaf();Object[_0x53fb25(0x442)](_0x289a9d,_0x4c0517),Object[_0x53fb25(0x442)](_0x91a8c8,_0x289a9d);let _0x336d82=(0x0,ct[_0x53fb25(0x269)])(_0x91a8c8,_0x5eaaae);if(!_0x336d82[_0x53fb25(0x863)]){let _0x1b4606=_0x336d82[_0x53fb25(0x674)][_0x53fb25(0x733)](({property:_0x130703,stack:_0x32facd,schema:_0x48851c})=>{const _0x5eac97=_0x53fb25;let _0x33f455;return _0x48851c['description']?_0x33f455=_0x48851c[_0x5eac97(0x2c0)]:_0x33f455=_0x32facd[_0x5eac97(0x5e0)](_0x5eac97(0x287),''),{'property':_0x130703['replace'](_0x5eac97(0x287),''),'message':_0x33f455};});throw $s['error']([..._0x1b4606]),new m(..._0x1b4606);}return await _0x376d70(_0x118ffc,_0x91a8c8);}},M=class{},il=new $(a0_0x3cfc7d(0x2b8)),lt=class extends V{constructor(..._0x1e97df){const _0x197452=a0_0x3cfc7d;super(),this[_0x197452(0x556)]=(0x0,pi[_0x197452(0x6d8)])(),this[_0x197452(0x556)][_0x197452(0x3c3)](this['routerPath']('updatePresence'),..._0x1e97df,async(_0x1001b4,_0x72568b)=>{const _0x512c4d=_0x197452;let _0x4c0510=await this[_0x512c4d(0x690)]({'request':_0x1001b4,'schema':si,'ClassRef':Ye,'execute':(_0x47e891,_0x4ff0c9)=>D[_0x512c4d(0x4bc)](_0x47e891,_0x4ff0c9)});return _0x72568b[_0x512c4d(0x204)](0xc9)['json'](_0x4c0510);})[_0x197452(0x3c3)](this[_0x197452(0x6a1)](_0x197452(0x25b)),..._0x1e97df,async(_0x72ad5f,_0x5e9868)=>{const _0x39ec1e=_0x197452;let _0x31df40=await this[_0x39ec1e(0x690)]({'request':_0x72ad5f,'schema':Wa,'ClassRef':Xe,'execute':(_0x16e19c,_0x391e01)=>D[_0x39ec1e(0x434)](_0x16e19c,_0x391e01)});return _0x5e9868[_0x39ec1e(0x204)](0xc9)[_0x39ec1e(0x7be)](_0x31df40);})[_0x197452(0x3c3)](this['routerPath'](_0x197452(0x53f)),..._0x1e97df,async(_0x5ab82e,_0x5d0ef2)=>{const _0x585a4d=_0x197452;let _0x3afc2e=await this[_0x585a4d(0x690)]({'request':_0x5ab82e,'schema':E,'ClassRef':M,'execute':(_0x31a4a5,_0x4c8d64)=>D[_0x585a4d(0x53f)](_0x31a4a5,_0x4c8d64)});return _0x5d0ef2['status'](0xc9)[_0x585a4d(0x7be)](_0x3afc2e);})[_0x197452(0x611)](this[_0x197452(0x6a1)](_0x197452(0x66f)),..._0x1e97df,async(_0x3427b8,_0x1cdb90)=>{const _0x3aee78=_0x197452;let _0x7ea8d8=await this['dataValidate']({'request':_0x3427b8,'schema':za,'ClassRef':tt,'execute':(_0x4d0997,_0x59d218)=>D[_0x3aee78(0x1ac)](_0x4d0997,_0x59d218)});return _0x1cdb90[_0x3aee78(0x204)](0xc9)[_0x3aee78(0x7be)](_0x7ea8d8);})['put'](this[_0x197452(0x6a1)](_0x197452(0x803)),..._0x1e97df,async(_0x432765,_0x1420d2)=>{const _0xd2a34f=_0x197452;let _0x26a53c=await this[_0xd2a34f(0x690)]({'request':_0x432765,'schema':Ka,'ClassRef':st,'execute':(_0x1a3a30,_0x1d2dc2)=>D[_0xd2a34f(0x803)](_0x1a3a30,_0x1d2dc2)});return _0x1420d2[_0xd2a34f(0x204)](0xc9)[_0xd2a34f(0x7be)](_0x26a53c);})[_0x197452(0x7fb)](this[_0x197452(0x6a1)](_0x197452(0x148)),..._0x1e97df,async(_0x1ad3fb,_0x29ae00)=>{const _0x35b7de=_0x197452;let _0x2099cd=await this[_0x35b7de(0x690)]({'request':_0x1ad3fb,'schema':Qa,'ClassRef':it,'execute':(_0x18e18b,_0x6ec068)=>D['deleteMessage'](_0x18e18b,_0x6ec068)});return _0x29ae00['status'](0xc9)[_0x35b7de(0x7be)](_0x2099cd);})[_0x197452(0x3c3)](this[_0x197452(0x6a1)](_0x197452(0x433)),..._0x1e97df,async(_0x144e16,_0x422125)=>{const _0x5078a4=_0x197452;let _0x457571=await this[_0x5078a4(0x690)]({'request':_0x144e16,'schema':Oe,'ClassRef':Ie,'execute':(_0x30ce3b,_0x17b36d)=>D['fetchProfilePicture'](_0x30ce3b,_0x17b36d)});return _0x422125[_0x5078a4(0x204)](0xc8)[_0x5078a4(0x7be)](_0x457571);})[_0x197452(0x3c3)](this[_0x197452(0x6a1)](_0x197452(0x45b)),..._0x1e97df,async(_0xf9b98,_0x34c140)=>{const _0x2c6b23=_0x197452;let _0x44eeef=await this[_0x2c6b23(0x690)]({'request':_0xf9b98,'schema':ei,'ClassRef':Ie,'execute':(_0x13eba9,_0x579e2c)=>D[_0x2c6b23(0x45b)](_0x13eba9,_0x579e2c)});return _0x34c140[_0x2c6b23(0x204)](0xc8)['json'](_0x44eeef);})[_0x197452(0x3c3)](this[_0x197452(0x6a1)](_0x197452(0x28e)),..._0x1e97df,async(_0x10e45c,_0x29882b)=>{const _0x39f387=_0x197452;let _0x3c1669=await this[_0x39f387(0x690)]({'request':_0x10e45c,'schema':Ya,'ClassRef':rt,'execute':(_0x2d1905,_0x56bfe7)=>D[_0x39f387(0x623)](_0x2d1905,_0x56bfe7)});return _0x29882b[_0x39f387(0x204)](0xc8)[_0x39f387(0x7be)](_0x3c1669);})[_0x197452(0x3c3)](this['routerPath'](_0x197452(0x224)),..._0x1e97df,async(_0x3c2cf1,_0x54760f)=>{const _0x521314=_0x197452;let _0x4ab249=await this[_0x521314(0x690)]({'request':_0x3c2cf1,'schema':null,'ClassRef':Object,'execute':(_0x46b35d,_0x4c2cfc)=>D[_0x521314(0x224)](_0x46b35d,_0x4c2cfc)});return _0x54760f[_0x521314(0x204)](0xc9)[_0x521314(0x7be)](_0x4ab249);})[_0x197452(0x3c3)](this[_0x197452(0x6a1)](_0x197452(0x5b6)),..._0x1e97df,async(_0x4a4f07,_0x196062)=>{const _0x546f4c=_0x197452;let _0x50f62f=await this[_0x546f4c(0x690)]({'request':_0x4a4f07,'schema':ti,'ClassRef':Ke,'execute':(_0xd349bd,_0x2a95b3)=>D['fetchMessages'](_0xd349bd,_0x2a95b3)});return _0x196062['status'](0xc8)['json'](_0x50f62f);})['get'](this['routerPath']('findChats'),..._0x1e97df,async(_0x250109,_0x3f125c)=>{const _0x2cf2ec=_0x197452;let _0x4949f4=await this[_0x2cf2ec(0x690)]({'request':_0x250109,'schema':null,'ClassRef':M,'execute':_0xca33c5=>D[_0x2cf2ec(0x307)](_0xca33c5)});return _0x3f125c[_0x2cf2ec(0x204)](0xc8)[_0x2cf2ec(0x7be)](_0x4949f4);})[_0x197452(0x840)](this[_0x197452(0x6a1)](_0x197452(0x28a)),..._0x1e97df,async(_0x227d58,_0x25ee52)=>{const _0x47de76=_0x197452;let _0x22c1e8=await this[_0x47de76(0x690)]({'request':_0x227d58,'schema':null,'ClassRef':M,'execute':_0x20c4cd=>D[_0x47de76(0x4ff)](_0x20c4cd)});return _0x25ee52[_0x47de76(0x204)](0xc8)['json'](_0x22c1e8);})[_0x197452(0x611)](this[_0x197452(0x6a1)](_0x197452(0x3c0)),..._0x1e97df,async(_0x5e342d,_0x5b766c)=>{const _0x570fcd=_0x197452;let _0x2bc0d6=await this['dataValidate']({'request':_0x5e342d,'schema':null,'ClassRef':Array,'execute':(_0x4fcf07,_0x357366)=>D[_0x570fcd(0x3c0)](_0x4fcf07,_0x357366)});return _0x5b766c[_0x570fcd(0x204)](0xc8)['json'](_0x2bc0d6);})['get'](this[_0x197452(0x6a1)](_0x197452(0x384)),..._0x1e97df,async(_0x3deecf,_0x457154)=>{const _0x45a6af=_0x197452;let _0x26a76c=await this[_0x45a6af(0x690)]({'request':_0x3deecf,'schema':null,'ClassRef':M,'execute':_0x2ce271=>D[_0x45a6af(0x384)](_0x2ce271)});return _0x457154[_0x45a6af(0x204)](0xc8)[_0x45a6af(0x7be)](_0x26a76c);})[_0x197452(0x611)](this[_0x197452(0x6a1)]('updatePrivacySettings'),..._0x1e97df,async(_0x15a960,_0x1141f1)=>{const _0x3ff3d8=_0x197452;let _0x474e16=await this['dataValidate']({'request':_0x15a960,'schema':Ha,'ClassRef':at,'execute':(_0x5022f5,_0x3759f7)=>D[_0x3ff3d8(0x6e3)](_0x5022f5,_0x3759f7)});return _0x1141f1[_0x3ff3d8(0x204)](0xc9)[_0x3ff3d8(0x7be)](_0x474e16);})[_0x197452(0x3c3)](this[_0x197452(0x6a1)](_0x197452(0x2b3)),..._0x1e97df,async(_0x41733f,_0x5ea6bb)=>{const _0x4ae1b1=_0x197452;let _0x279f89=await this[_0x4ae1b1(0x690)]({'request':_0x41733f,'schema':Oe,'ClassRef':Ce,'execute':(_0x3474a5,_0x1df7c7)=>D[_0x4ae1b1(0x2b3)](_0x3474a5,_0x1df7c7)});return _0x5ea6bb[_0x4ae1b1(0x204)](0xc8)[_0x4ae1b1(0x7be)](_0x279f89);})[_0x197452(0x3c3)](this[_0x197452(0x6a1)](_0x197452(0x54c)),..._0x1e97df,async(_0x5c4287,_0x2097e4)=>{const _0x31845e=_0x197452;let _0x1844dd=await this['dataValidate']({'request':_0x5c4287,'schema':Xa,'ClassRef':Ze,'execute':(_0x2f8950,_0x21a747)=>D[_0x31845e(0x54c)](_0x2f8950,_0x21a747)});return _0x2097e4['status'](0xc8)[_0x31845e(0x7be)](_0x1844dd);})[_0x197452(0x3c3)](this[_0x197452(0x6a1)](_0x197452(0x6a2)),..._0x1e97df,async(_0x2ea8e8,_0x284f7a)=>{const _0x5066c6=_0x197452;let _0x1aa1db=await this['dataValidate']({'request':_0x2ea8e8,'schema':Za,'ClassRef':et,'execute':(_0x1e72e9,_0x28c416)=>D[_0x5066c6(0x6a2)](_0x1e72e9,_0x28c416)});return _0x284f7a[_0x5066c6(0x204)](0xc8)[_0x5066c6(0x7be)](_0x1aa1db);})['put'](this[_0x197452(0x6a1)](_0x197452(0x7de)),..._0x1e97df,async(_0x49a24a,_0x1159c3)=>{const _0x1b1043=_0x197452;let _0x552138=await this[_0x1b1043(0x690)]({'request':_0x49a24a,'schema':Oe,'ClassRef':Ce,'execute':(_0x214550,_0x1f7a24)=>D['updateProfilePicture'](_0x214550,_0x1f7a24)});return _0x1159c3[_0x1b1043(0x204)](0xc8)[_0x1b1043(0x7be)](_0x552138);})[_0x197452(0x7fb)](this[_0x197452(0x6a1)]('removeProfilePicture'),..._0x1e97df,async(_0x1df55c,_0xa033e0)=>{const _0x4122c8=_0x197452;let _0x4d8462=await this[_0x4122c8(0x690)]({'request':_0x1df55c,'schema':Oe,'ClassRef':Ce,'execute':(_0x2d9b21,_0x3f5474)=>D[_0x4122c8(0x591)](_0x2d9b21,_0x3f5474)});return _0xa033e0['status'](0xc8)[_0x4122c8(0x7be)](_0x4d8462);});}},hi=require(a0_0x3cfc7d(0x18e)),ut=class{},dt=class{},pt=class{},ht=class{},gt=class{},mt=class{},ee=class{},Pe=class{},ft=class extends ee{},wt=class extends ee{},yt=class extends V{constructor(..._0x13b894){const _0x605fcd=a0_0x3cfc7d;super(),this['router']=(0x0,hi['Router'])(),this[_0x605fcd(0x556)]['post'](this['routerPath'](_0x605fcd(0x19b)),..._0x13b894,async(_0x20b7ae,_0x25f590)=>{const _0x5e5a82=_0x605fcd;let _0x19dba9=await this[_0x5e5a82(0x690)]({'request':_0x20b7ae,'schema':ai,'ClassRef':ut,'execute':(_0x26d506,_0x2ad6ba)=>q['createGroup'](_0x26d506,_0x2ad6ba)});_0x25f590[_0x5e5a82(0x204)](0xc9)['json'](_0x19dba9);})['put'](this[_0x605fcd(0x6a1)](_0x605fcd(0x4f7)),..._0x13b894,async(_0x447ead,_0x3aec5c)=>{const _0x17a161=_0x605fcd;let _0x3e4ad5=await this[_0x17a161(0x359)]({'request':_0x447ead,'schema':ri,'ClassRef':dt,'execute':(_0x1f8580,_0x1b6b28)=>q[_0x17a161(0x4f7)](_0x1f8580,_0x1b6b28)});_0x3aec5c[_0x17a161(0x204)](0xc9)['json'](_0x3e4ad5);})[_0x605fcd(0x611)](this[_0x605fcd(0x6a1)](_0x605fcd(0x154)),..._0x13b894,async(_0x4d872b,_0x22c56d)=>{const _0x340fe6=_0x605fcd;let _0x208c7d=await this[_0x340fe6(0x359)]({'request':_0x4d872b,'schema':ni,'ClassRef':pt,'execute':(_0x2a3719,_0xd8fc86)=>q['groupDesc'](_0x2a3719,_0xd8fc86)});_0x22c56d[_0x340fe6(0x204)](0xc9)[_0x340fe6(0x7be)](_0x208c7d);})[_0x605fcd(0x611)](this[_0x605fcd(0x6a1)](_0x605fcd(0x5f4)),..._0x13b894,async(_0x46ebc3,_0xcbee54)=>{const _0x289baf=_0x605fcd;let _0x5dd534=await this[_0x289baf(0x359)]({'request':_0x46ebc3,'schema':ci,'ClassRef':ht,'execute':(_0x57616b,_0x1289fa)=>q[_0x289baf(0x5f4)](_0x57616b,_0x1289fa)});_0xcbee54['status'](0xc9)[_0x289baf(0x7be)](_0x5dd534);})[_0x605fcd(0x611)](this[_0x605fcd(0x6a1)](_0x605fcd(0x818)),..._0x13b894,async(_0x3c527c,_0x11f580)=>{const _0x105261=_0x605fcd;let _0x11cb49=await this['groupValidate']({'request':_0x3c527c,'schema':ui,'ClassRef':mt,'execute':(_0x447332,_0x28b5c3)=>q[_0x105261(0x818)](_0x447332,_0x28b5c3)});_0x11f580[_0x105261(0x204)](0xc9)['json'](_0x11cb49);})[_0x605fcd(0x611)](this[_0x605fcd(0x6a1)]('groupSetting'),..._0x13b894,async(_0xbc5c21,_0x49b249)=>{const _0x4b2e9c=_0x605fcd;let _0x3eaa74=await this[_0x4b2e9c(0x359)]({'request':_0xbc5c21,'schema':li,'ClassRef':gt,'execute':(_0x112165,_0x43c85f)=>q[_0x4b2e9c(0x5ac)](_0x112165,_0x43c85f)});_0x49b249['status'](0xc9)['json'](_0x3eaa74);})[_0x605fcd(0x611)](this[_0x605fcd(0x6a1)](_0x605fcd(0x5b1)),..._0x13b894,async(_0xab04d9,_0x47430d)=>{const _0x501c87=_0x605fcd;let _0x50d620=await this[_0x501c87(0x359)]({'request':_0xab04d9,'schema':oi,'ClassRef':wt,'execute':(_0x3f323e,_0x1df719)=>q[_0x501c87(0x5b1)](_0x3f323e,_0x1df719)});_0x47430d[_0x501c87(0x204)](0xc9)[_0x501c87(0x7be)](_0x50d620);})[_0x605fcd(0x840)](this['routerPath']('findGroupInfos'),..._0x13b894,async(_0x466985,_0x2e4da4)=>{const _0x22de9b=_0x605fcd;let _0x3c31ee=await this[_0x22de9b(0x359)]({'request':_0x466985,'schema':xe,'ClassRef':ee,'execute':(_0xad46ea,_0x1dc860)=>q[_0x22de9b(0x7c6)](_0xad46ea,_0x1dc860)});_0x2e4da4[_0x22de9b(0x204)](0xc8)[_0x22de9b(0x7be)](_0x3c31ee);})[_0x605fcd(0x840)](this['routerPath']('findGroups'),..._0x13b894,async(_0x4888cd,_0x4f0880)=>{const _0x5aef78=_0x605fcd;let _0x242d4c=await this[_0x5aef78(0x690)]({'request':_0x4888cd,'schema':E,'ClassRef':M,'execute':_0x10f3a1=>q['findGroups'](_0x10f3a1)});_0x4f0880[_0x5aef78(0x204)](0xc8)[_0x5aef78(0x7be)](_0x242d4c);})[_0x605fcd(0x840)](this[_0x605fcd(0x6a1)](_0x605fcd(0x365)),..._0x13b894,async(_0xa86537,_0x153527)=>{const _0x4b2425=_0x605fcd;let _0x5b3c44=await this[_0x4b2425(0x359)]({'request':_0xa86537,'schema':xe,'ClassRef':ee,'execute':(_0x49cc7a,_0x1112a6)=>q[_0x4b2425(0x2f3)](_0x49cc7a,_0x1112a6)});_0x153527[_0x4b2425(0x204)](0xc8)[_0x4b2425(0x7be)](_0x5b3c44);})['get'](this['routerPath'](_0x605fcd(0x286)),..._0x13b894,async(_0x384a58,_0x405b22)=>{const _0x3162aa=_0x605fcd;let _0x2f1dc7=await this[_0x3162aa(0x359)]({'request':_0x384a58,'schema':xe,'ClassRef':ee,'execute':(_0x560129,_0x33df68)=>q[_0x3162aa(0x286)](_0x560129,_0x33df68)});_0x405b22[_0x3162aa(0x204)](0xc8)['json'](_0x2f1dc7);})[_0x605fcd(0x3c3)](this[_0x605fcd(0x6a1)](_0x605fcd(0x587)),..._0x13b894,async(_0x27e5ba,_0xbfd6cc)=>{const _0x23f7fd=_0x605fcd;let _0x3cc642=await this['joinGroupValidate']({'request':_0x27e5ba,'schema':Ns,'ClassRef':Pe,'execute':(_0xaa78dd,_0xe947bc)=>q[_0x23f7fd(0x15b)](_0xaa78dd,_0xe947bc)});_0xbfd6cc[_0x23f7fd(0x204)](0xc9)['json'](_0x3cc642);})[_0x605fcd(0x611)](this[_0x605fcd(0x6a1)](_0x605fcd(0x542)),..._0x13b894,async(_0xea15bb,_0x37a1da)=>{const _0x332ef6=_0x605fcd;let _0x3f9e77=await this[_0x332ef6(0x546)]({'request':_0xea15bb,'schema':Ns,'ClassRef':Pe,'execute':(_0x32db80,_0x43542f)=>q['joinGroup'](_0x32db80,_0x43542f)});_0x37a1da['status'](0xc9)[_0x332ef6(0x7be)](_0x3f9e77);})[_0x605fcd(0x611)](this[_0x605fcd(0x6a1)](_0x605fcd(0x2df)),..._0x13b894,async(_0x80bfd4,_0x50757e)=>{const _0x4c0dcb=_0x605fcd;let _0x42c649=await this[_0x4c0dcb(0x359)]({'request':_0x80bfd4,'schema':xe,'ClassRef':ee,'execute':(_0x518dc9,_0x33c5cc)=>q[_0x4c0dcb(0x2df)](_0x518dc9,_0x33c5cc)});_0x50757e[_0x4c0dcb(0x204)](0xc9)[_0x4c0dcb(0x7be)](_0x42c649);})[_0x605fcd(0x611)](this[_0x605fcd(0x6a1)](_0x605fcd(0x469)),..._0x13b894,async(_0x2a65f2,_0x45f5c2)=>{const _0x21f0fa=_0x605fcd;let _0x46831b=await this['groupValidate']({'request':_0x2a65f2,'schema':ii,'ClassRef':ft,'execute':(_0x4e34f7,_0x5f4f5a)=>q[_0x21f0fa(0x1de)](_0x4e34f7,_0x5f4f5a)});_0x45f5c2[_0x21f0fa(0x204)](0xc9)[_0x21f0fa(0x7be)](_0x46831b);})[_0x605fcd(0x7fb)](this[_0x605fcd(0x6a1)](_0x605fcd(0x638)),..._0x13b894,async(_0x5c8aed,_0x281145)=>{const _0x2ddc6a=_0x605fcd;let _0x5271d3=await this['groupValidate']({'request':_0x5c8aed,'schema':{},'ClassRef':ee,'execute':(_0x3686e6,_0x39b599)=>q[_0x2ddc6a(0x638)](_0x3686e6,_0x39b599)});_0x281145[_0x2ddc6a(0x204)](0xc8)['json'](_0x5271d3);});}},gi=require('express'),bt=class extends V{constructor(_0x4c8e02,..._0x3fe1ec){const _0x2d88d=a0_0x3cfc7d;super(),this['configService']=_0x4c8e02,this[_0x2d88d(0x556)]=(0x0,gi[_0x2d88d(0x6d8)])();let _0x338153=_0x4c8e02['get'](_0x2d88d(0x768));this[_0x2d88d(0x556)][_0x2d88d(0x3c3)]('/create',..._0x3fe1ec,async(_0x3ea8fb,_0x5a00d5)=>{const _0x31fd9a=_0x2d88d;let {instanceName:_0x19fed8,apikey:_0x41ba5f,number:_0x3b3c19}=_0x3ea8fb[_0x31fd9a(0x46e)],_0x3a932e=await le[_0x31fd9a(0x30f)]({'instanceName':_0x19fed8,'apikey':_0x41ba5f,'number':_0x3b3c19});return _0x5a00d5['status'](0xc9)['json'](_0x3a932e);})[_0x2d88d(0x611)](this[_0x2d88d(0x6a1)]('restart'),..._0x3fe1ec,async(_0x5d854d,_0x563bfc)=>{const _0x2177b4=_0x2d88d;let _0x1c58ed=await this['dataValidate']({'request':_0x5d854d,'schema':E,'ClassRef':M,'execute':_0x1c6f51=>le[_0x2177b4(0x71f)](_0x1c6f51)});return _0x563bfc[_0x2177b4(0x204)](0xc8)[_0x2177b4(0x7be)](_0x1c58ed);})[_0x2d88d(0x840)](this[_0x2d88d(0x6a1)](_0x2d88d(0x242)),..._0x3fe1ec,async(_0x3aff5d,_0x22ea88)=>{const _0x1c5668=_0x2d88d;let _0x1764d2=await this[_0x1c5668(0x690)]({'request':_0x3aff5d,'schema':E,'ClassRef':M,'execute':_0xe8f5e1=>le[_0x1c5668(0x5dd)](_0xe8f5e1)});return _0x22ea88[_0x1c5668(0x204)](0xc8)[_0x1c5668(0x7be)](_0x1764d2);})['get'](this[_0x2d88d(0x6a1)](_0x2d88d(0x537)),..._0x3fe1ec,async(_0x500dca,_0x158ef0)=>{let _0x58b6fe=await this['dataValidate']({'request':_0x500dca,'schema':E,'ClassRef':M,'execute':_0x4e7f17=>le['connectionState'](_0x4e7f17)});return _0x158ef0['status'](0xc8)['json'](_0x58b6fe);})[_0x2d88d(0x840)](this[_0x2d88d(0x6a1)](_0x2d88d(0x3b0),!0x1),..._0x3fe1ec,async(_0x5dcc79,_0x16642b)=>{const _0xa5a97f=_0x2d88d;let _0x219457=await this[_0xa5a97f(0x690)]({'request':_0x5dcc79,'schema':null,'ClassRef':M,'execute':_0x2bca79=>le[_0xa5a97f(0x3b0)](_0x2bca79)});return _0x16642b[_0xa5a97f(0x204)](0xc8)[_0xa5a97f(0x7be)](_0x219457);})[_0x2d88d(0x7fb)](this[_0x2d88d(0x6a1)](_0x2d88d(0x144)),..._0x3fe1ec,async(_0x2e383e,_0x133da1)=>{const _0x584460=_0x2d88d;let _0x5dd8c3=await this[_0x584460(0x690)]({'request':_0x2e383e,'schema':E,'ClassRef':M,'execute':_0x22e854=>le['logout'](_0x22e854)});return _0x133da1['status'](0xc8)[_0x584460(0x7be)](_0x5dd8c3);})[_0x2d88d(0x7fb)](this[_0x2d88d(0x6a1)](_0x2d88d(0x7fb)),..._0x3fe1ec,async(_0x3c07d3,_0x63e03e)=>{const _0x41d473=_0x2d88d;let _0x1d9fb9=await this[_0x41d473(0x690)]({'request':_0x3c07d3,'schema':E,'ClassRef':M,'execute':_0x2292f6=>le[_0x41d473(0x786)](_0x2292f6)});return _0x63e03e[_0x41d473(0x204)](0xc8)['json'](_0x1d9fb9);});}},mi=require(a0_0x3cfc7d(0x18e)),Rs=class{},H=class extends Rs{},St=class extends H{},Mt=class extends H{},Ct=class extends H{},vt=class extends H{},De=class extends H{},Et=class extends H{},Nt=class extends H{},$t=class extends H{},Rt=class extends H{},At=class{},Tt=class extends V{constructor(..._0x203f0b){const _0x2ee0f5=a0_0x3cfc7d;super(),this[_0x2ee0f5(0x556)]=(0x0,mi[_0x2ee0f5(0x6d8)])(),this[_0x2ee0f5(0x556)][_0x2ee0f5(0x3c3)](this[_0x2ee0f5(0x6a1)](_0x2ee0f5(0x5ee)),..._0x203f0b,async(_0x5af860,_0x2a2d9c)=>{const _0x2171a6=_0x2ee0f5;let _0x525571=await this[_0x2171a6(0x690)]({'request':_0x5af860,'schema':Pa,'ClassRef':St,'execute':(_0x3cf41d,_0xffb508)=>B[_0x2171a6(0x5ee)](_0x3cf41d,_0xffb508)});return _0x2a2d9c[_0x2171a6(0x204)](0xc9)[_0x2171a6(0x7be)](_0x525571);})[_0x2ee0f5(0x3c3)](this['routerPath'](_0x2ee0f5(0x2e6)),..._0x203f0b,async(_0x3e90d8,_0x318950)=>{const _0xc0a940=_0x2ee0f5;let _0x27a5b6=await this[_0xc0a940(0x690)]({'request':_0x3e90d8,'schema':Fa,'ClassRef':De,'execute':(_0x51556b,_0x2cbaab)=>B['sendMedia'](_0x51556b,_0x2cbaab)});return _0x318950[_0xc0a940(0x204)](0xc9)[_0xc0a940(0x7be)](_0x27a5b6);})['post'](this['routerPath'](_0x2ee0f5(0x54d)),..._0x203f0b,async(_0x275abb,_0x5a1950)=>{const _0x2cd671=_0x2ee0f5;let _0x1a04f9=await this[_0x2cd671(0x690)]({'request':_0x275abb,'schema':Ja,'ClassRef':vt,'execute':(_0x31a686,_0xae6132)=>B[_0x2cd671(0x54d)](_0x31a686,_0xae6132)});return _0x5a1950[_0x2cd671(0x204)](0xc9)[_0x2cd671(0x7be)](_0x1a04f9);})['post'](this[_0x2ee0f5(0x6a1)](_0x2ee0f5(0x141)),..._0x203f0b,async(_0x18ee35,_0x4ad267)=>{const _0x4a340a=_0x2ee0f5;let _0x427860=await this[_0x4a340a(0x690)]({'request':_0x18ee35,'schema':Ua,'ClassRef':De,'execute':(_0x110737,_0x3c3d46)=>B[_0x4a340a(0x141)](_0x110737,_0x3c3d46)});return _0x4ad267[_0x4a340a(0x204)](0xc9)[_0x4a340a(0x7be)](_0x427860);})[_0x2ee0f5(0x3c3)](this[_0x2ee0f5(0x6a1)](_0x2ee0f5(0x634)),..._0x203f0b,async(_0x5e6985,_0x16f448)=>{const _0x45c4ac=_0x2ee0f5;let _0x1d141e=await this['dataValidate']({'request':_0x5e6985,'schema':qa,'ClassRef':Nt,'execute':(_0x7a0a40,_0x245fd5)=>B[_0x45c4ac(0x634)](_0x7a0a40,_0x245fd5)});return _0x16f448['status'](0xc9)[_0x45c4ac(0x7be)](_0x1d141e);})[_0x2ee0f5(0x3c3)](this[_0x2ee0f5(0x6a1)]('sendList'),..._0x203f0b,async(_0x2a9d21,_0x3ec1cd)=>{const _0x542a3f=_0x2ee0f5;let _0x1dc625=await this['dataValidate']({'request':_0x2a9d21,'schema':Va,'ClassRef':$t,'execute':(_0xc4c4b2,_0x477c1f)=>B[_0x542a3f(0x2e9)](_0xc4c4b2,_0x477c1f)});return _0x3ec1cd[_0x542a3f(0x204)](0xc9)[_0x542a3f(0x7be)](_0x1dc625);})[_0x2ee0f5(0x3c3)](this[_0x2ee0f5(0x6a1)](_0x2ee0f5(0x50d)),..._0x203f0b,async(_0xb35c74,_0x111823)=>{const _0x282f22=_0x2ee0f5;let _0x222638=await this[_0x282f22(0x690)]({'request':_0xb35c74,'schema':Ga,'ClassRef':Rt,'execute':(_0x1b2349,_0x2bf68b)=>B[_0x282f22(0x50d)](_0x1b2349,_0x2bf68b)});return _0x111823['status'](0xc9)['json'](_0x222638);})[_0x2ee0f5(0x3c3)](this[_0x2ee0f5(0x6a1)]('sendReaction'),..._0x203f0b,async(_0x368e33,_0x225af9)=>{const _0x26f4ec=_0x2ee0f5;let _0x2e6a68=await this[_0x26f4ec(0x690)]({'request':_0x368e33,'schema':Ba,'ClassRef':At,'execute':(_0x404244,_0x23c51b)=>B[_0x26f4ec(0x7e5)](_0x404244,_0x23c51b)});return _0x225af9[_0x26f4ec(0x204)](0xc9)['json'](_0x2e6a68);})[_0x2ee0f5(0x3c3)](this['routerPath'](_0x2ee0f5(0x67a)),..._0x203f0b,async(_0x5a0fd1,_0xc37b8b)=>{const _0xcb10f4=_0x2ee0f5;let _0x3f22f6=await this[_0xcb10f4(0x690)]({'request':_0x5a0fd1,'schema':ja,'ClassRef':Ct,'execute':(_0x36f83e,_0x3dbafa)=>B['sendPoll'](_0x36f83e,_0x3dbafa)});return _0xc37b8b[_0xcb10f4(0x204)](0xc9)[_0xcb10f4(0x7be)](_0x3f22f6);})[_0x2ee0f5(0x3c3)](this[_0x2ee0f5(0x6a1)](_0x2ee0f5(0x15a)),..._0x203f0b,async(_0x446067,_0x6cebc)=>{const _0x146a1e=_0x2ee0f5;let _0x48c49d=await this[_0x146a1e(0x690)]({'request':_0x446067,'schema':La,'ClassRef':Mt,'execute':(_0x6d50f7,_0x343bf2)=>B['sendStatus'](_0x6d50f7,_0x343bf2)});return _0x6cebc['status'](0xc9)[_0x146a1e(0x7be)](_0x48c49d);})[_0x2ee0f5(0x3c3)](this[_0x2ee0f5(0x6a1)](_0x2ee0f5(0x34d)),..._0x203f0b,async(_0x37a2f4,_0x117b2d)=>{const _0x627c07=_0x2ee0f5;let _0x57d7ac=await this[_0x627c07(0x690)]({'request':_0x37a2f4,'schema':ka,'ClassRef':Et,'execute':(_0x40abf8,_0x4fd6f4)=>B[_0x627c07(0x34d)](_0x40abf8,_0x4fd6f4)});return _0x117b2d[_0x627c07(0x204)](0xc9)[_0x627c07(0x7be)](_0x57d7ac);});}},fi=require('express'),It=class{},_t=class extends V{constructor(..._0x3e550b){const _0x1b5373=a0_0x3cfc7d;super(),this[_0x1b5373(0x556)]=(0x0,fi['Router'])(),this[_0x1b5373(0x556)][_0x1b5373(0x3c3)](this[_0x1b5373(0x6a1)](_0x1b5373(0x735)),..._0x3e550b,async(_0x2e6fc1,_0x30aa67)=>{const _0x6fab90=_0x1b5373;let _0xa8e30b=await this[_0x6fab90(0x690)]({'request':_0x2e6fc1,'schema':di,'ClassRef':It,'execute':(_0x4740f5,_0xd4dcc0)=>As['createWebhook'](_0x4740f5,_0xd4dcc0)});_0x30aa67['status'](0xc9)[_0x6fab90(0x7be)](_0xa8e30b);})[_0x1b5373(0x840)](this[_0x1b5373(0x6a1)](_0x1b5373(0x1c4)),..._0x3e550b,async(_0x32aba4,_0x5ad049)=>{const _0x4a6ae8=_0x1b5373;let _0x3b446f=await this[_0x4a6ae8(0x690)]({'request':_0x32aba4,'schema':E,'ClassRef':M,'execute':_0x7d7ac=>As[_0x4a6ae8(0x4a9)](_0x7d7ac)});_0x5ad049['status'](0xc8)['json'](_0x3b446f);});}},wi=require('express'),y=new $(a0_0x3cfc7d(0x7bd)),Ot=class extends V{constructor(..._0x462b6f){const _0xa843a3=a0_0x3cfc7d;super(),this[_0xa843a3(0x556)]=(0x0,wi[_0xa843a3(0x6d8)])(),this[_0xa843a3(0x556)][_0xa843a3(0x3c3)](this['routerPath'](_0xa843a3(0x86c)),..._0x462b6f,async(_0xebcf1b,_0x4aed5e)=>{const _0x23caf7=_0xa843a3;let _0x4596ec=_0xebcf1b['body'];y[_0x23caf7(0x4e1)]('request\x20received\x20in\x20scheduleMessage'),y[_0x23caf7(0x4e1)](_0x23caf7(0x42a)),y['verbose'](_0xebcf1b[_0x23caf7(0x46e)]);let _0x298c4a=await this[_0x23caf7(0x690)]({'request':_0xebcf1b,'schema':E,'ClassRef':M,'execute':_0x2147f7=>_[_0x23caf7(0x138)](_0x2147f7,_0x4596ec)});_0x4aed5e['status'](0xc8)[_0x23caf7(0x7be)](_0x298c4a);})[_0xa843a3(0x840)](this[_0xa843a3(0x6a1)](_0xa843a3(0x86c)),..._0x462b6f,async(_0x2be794,_0x29bc89)=>{const _0x35d75e=_0xa843a3;let _0x5345c7=await this[_0x35d75e(0x690)]({'request':_0x2be794,'schema':E,'ClassRef':M,'execute':_0x2696b2=>_[_0x35d75e(0x29f)](_0x2696b2)});_0x29bc89[_0x35d75e(0x204)](0xc8)[_0x35d75e(0x7be)](_0x5345c7);})[_0xa843a3(0x7fb)](this[_0xa843a3(0x6a1)]('deleteDoneMessages'),..._0x462b6f,async(_0x4062f7,_0x49d85a)=>{const _0x146879=_0xa843a3;y[_0x146879(0x4e1)](_0x146879(0x6c1));let _0x27f150=await this[_0x146879(0x690)]({'request':_0x4062f7,'schema':E,'ClassRef':M,'execute':_0x47b2bf=>_[_0x146879(0x322)](_0x47b2bf)});_0x49d85a['status'](0xc8)[_0x146879(0x7be)](_0x27f150);})[_0xa843a3(0x7fb)](this[_0xa843a3(0x6a1)]('deleteAllMessages'),..._0x462b6f,async(_0x4a7f09,_0x34a3c8)=>{const _0xc0e96d=_0xa843a3;y[_0xc0e96d(0x4e1)]('request\x20received\x20in\x20deleteAllMessages');let _0x21cf20=await this[_0xc0e96d(0x690)]({'request':_0x4a7f09,'schema':E,'ClassRef':M,'execute':_0x276b28=>_[_0xc0e96d(0x16d)](_0x276b28)});_0x34a3c8[_0xc0e96d(0x204)](0xc8)[_0xc0e96d(0x7be)](_0x21cf20);})[_0xa843a3(0x3c3)](this['routerPath']('startFlow'),..._0x462b6f,async(_0x3154a4,_0x46893f)=>{const _0x33fd6e=_0xa843a3;let _0x2820c5=_0x3154a4[_0x33fd6e(0x46e)];y[_0x33fd6e(0x4e1)](_0x33fd6e(0x57d)),y[_0x33fd6e(0x4e1)](_0x33fd6e(0x42a)),y[_0x33fd6e(0x4e1)](_0x3154a4['body']);let _0x4ca8e2=await this[_0x33fd6e(0x690)]({'request':_0x3154a4,'schema':E,'ClassRef':M,'execute':_0x187f4e=>_[_0x33fd6e(0x868)](_0x187f4e,_0x2820c5)});_0x46893f[_0x33fd6e(0x204)](0xc8)[_0x33fd6e(0x7be)](_0x4ca8e2);})['get'](this[_0xa843a3(0x6a1)](_0xa843a3(0x85d)),..._0x462b6f,async(_0x3b4d0a,_0x45f080)=>{const _0x4d6d71=_0xa843a3;y[_0x4d6d71(0x4e1)]('request\x20received\x20in\x20getAutomateSystem');let _0x4a9773=await this[_0x4d6d71(0x690)]({'request':_0x3b4d0a,'schema':E,'ClassRef':M,'execute':_0x2fc988=>_['getAutomateSystem'](_0x2fc988)});_0x45f080[_0x4d6d71(0x204)](0xc8)[_0x4d6d71(0x7be)](_0x4a9773);})[_0xa843a3(0x840)](this[_0xa843a3(0x6a1)](_0xa843a3(0x241)),..._0x462b6f,async(_0x274848,_0x3e5143)=>{const _0x521a4a=_0xa843a3;y[_0x521a4a(0x4e1)](_0x521a4a(0x394));let _0x191f0e=await this[_0x521a4a(0x690)]({'request':_0x274848,'schema':E,'ClassRef':M,'execute':_0x3c2136=>_[_0x521a4a(0x85d)](_0x3c2136)});_0x3e5143[_0x521a4a(0x204)](0xc8)[_0x521a4a(0x7be)](_0x191f0e);})['post'](this['routerPath'](_0xa843a3(0x2b1)),..._0x462b6f,async(_0x31604d,_0x1f328a)=>{const _0xa268ea=_0xa843a3;let _0x4a6f5d=_0x31604d[_0xa268ea(0x46e)];y[_0xa268ea(0x4e1)]('request\x20received\x20in\x20updateAgent'),y[_0xa268ea(0x4e1)]('request\x20body:\x20'),y['verbose'](_0x31604d['body']);let _0x125757=await this[_0xa268ea(0x690)]({'request':_0x31604d,'schema':E,'ClassRef':M,'execute':_0x56dbdc=>_[_0xa268ea(0x2b1)](_0x56dbdc,_0x4a6f5d)});_0x1f328a[_0xa268ea(0x204)](0xc8)[_0xa268ea(0x7be)](_0x125757);})[_0xa843a3(0x3c3)](this[_0xa843a3(0x6a1)](_0xa843a3(0x68e)),..._0x462b6f,async(_0x3ae934,_0x4fb6c7)=>{const _0x4b9ea7=_0xa843a3;let _0x151817=_0x3ae934[_0x4b9ea7(0x46e)];y[_0x4b9ea7(0x4e1)](_0x4b9ea7(0x74a)),y[_0x4b9ea7(0x4e1)](_0x4b9ea7(0x42a)),y[_0x4b9ea7(0x4e1)](_0x3ae934['body']);let _0x1ee28d=await this[_0x4b9ea7(0x690)]({'request':_0x3ae934,'schema':E,'ClassRef':M,'execute':_0x49f58a=>_[_0x4b9ea7(0x68e)](_0x49f58a,_0x151817)});_0x4fb6c7[_0x4b9ea7(0x204)](0xc8)[_0x4b9ea7(0x7be)](_0x1ee28d);})[_0xa843a3(0x3c3)](this[_0xa843a3(0x6a1)](_0xa843a3(0x22b)),..._0x462b6f,async(_0x3c35eb,_0x1f774e)=>{const _0x14181a=_0xa843a3;let _0x142c6e=_0x3c35eb['body'];y[_0x14181a(0x4e1)](_0x14181a(0x5f8)),y[_0x14181a(0x4e1)]('request\x20body:\x20'),y[_0x14181a(0x4e1)](_0x3c35eb['body']);let _0x4c718e=await this[_0x14181a(0x690)]({'request':_0x3c35eb,'schema':E,'ClassRef':M,'execute':_0x427492=>_[_0x14181a(0x22b)](_0x427492,_0x142c6e)});_0x1f774e[_0x14181a(0x204)](0xc8)[_0x14181a(0x7be)](_0x4c718e);})[_0xa843a3(0x3c3)](this['routerPath'](_0xa843a3(0xff)),..._0x462b6f,async(_0x2bd89f,_0x2d662b)=>{const _0x57d7b4=_0xa843a3;let _0x48f146=_0x2bd89f[_0x57d7b4(0x46e)];y[_0x57d7b4(0x4e1)]('request\x20received\x20in\x20updateFlowConfig'),y['verbose']('request\x20body:\x20'),y['verbose'](_0x2bd89f['body']);let _0x945e97=await this['dataValidate']({'request':_0x2bd89f,'schema':E,'ClassRef':M,'execute':_0x3a6d3c=>_[_0x57d7b4(0xff)](_0x3a6d3c,_0x48f146)});_0x2d662b[_0x57d7b4(0x204)](0xc8)['json'](_0x945e97);})[_0xa843a3(0x3c3)](this[_0xa843a3(0x6a1)](_0xa843a3(0x168)),..._0x462b6f,async(_0x52b11f,_0x404241)=>{const _0x173776=_0xa843a3;let _0x5467f0=_0x52b11f[_0x173776(0x46e)];y[_0x173776(0x4e1)](_0x173776(0x594)),y[_0x173776(0x4e1)](_0x173776(0x42a)),y['verbose'](_0x52b11f[_0x173776(0x46e)]);let _0x5b337d=await this[_0x173776(0x690)]({'request':_0x52b11f,'schema':E,'ClassRef':M,'execute':_0x7ce75c=>_['getConversation'](_0x7ce75c,_0x5467f0)});_0x404241[_0x173776(0x204)](0xc8)[_0x173776(0x7be)](_0x5b337d);})['post'](this[_0xa843a3(0x6a1)]('fetchConversation'),..._0x462b6f,async(_0xcb05fb,_0x3a5e82)=>{const _0x27a3c5=_0xa843a3;let _0x35e8ce=_0xcb05fb[_0x27a3c5(0x46e)];y[_0x27a3c5(0x4e1)](_0x27a3c5(0x88b)),y[_0x27a3c5(0x4e1)]('request\x20body:\x20'),y[_0x27a3c5(0x4e1)](_0xcb05fb[_0x27a3c5(0x46e)]);let _0x584d22=await this[_0x27a3c5(0x690)]({'request':_0xcb05fb,'schema':E,'ClassRef':M,'execute':_0xcdafc6=>_['fetchConversation'](_0xcdafc6,_0x35e8ce)});_0x3a5e82[_0x27a3c5(0x204)](0xc8)[_0x27a3c5(0x7be)](_0x584d22);})[_0xa843a3(0x3c3)](this['routerPath'](_0xa843a3(0x3c2)),..._0x462b6f,async(_0x2ad962,_0x4d16e0)=>{const _0x8b978=_0xa843a3;let _0x44bd94=_0x2ad962[_0x8b978(0x46e)];y[_0x8b978(0x4e1)](_0x8b978(0x4f3)),y[_0x8b978(0x4e1)]('request\x20body:\x20'),y['verbose'](_0x2ad962[_0x8b978(0x46e)]);let _0x2f46f6=await this[_0x8b978(0x690)]({'request':_0x2ad962,'schema':E,'ClassRef':M,'execute':_0x5e4806=>_[_0x8b978(0x3c2)](_0x5e4806,_0x44bd94)});_0x4d16e0[_0x8b978(0x204)](0xc8)[_0x8b978(0x7be)](_0x2f46f6);})[_0xa843a3(0x7fb)](this[_0xa843a3(0x6a1)]('deleteConversation'),..._0x462b6f,async(_0x50cb83,_0x1040a1)=>{const _0x3a0a85=_0xa843a3;let _0x13b195=_0x50cb83[_0x3a0a85(0x46e)];y[_0x3a0a85(0x4e1)](_0x3a0a85(0x4c4)),y[_0x3a0a85(0x4e1)]('request\x20body:\x20'),y[_0x3a0a85(0x4e1)](_0x50cb83[_0x3a0a85(0x46e)]);let _0x7dbfc4=await this[_0x3a0a85(0x690)]({'request':_0x50cb83,'schema':E,'ClassRef':M,'execute':_0x261b7c=>_[_0x3a0a85(0x881)](_0x261b7c,_0x13b195)});_0x1040a1['status'](0xc8)[_0x3a0a85(0x7be)](_0x7dbfc4);})[_0xa843a3(0x3c3)](this[_0xa843a3(0x6a1)](_0xa843a3(0x4b7)),..._0x462b6f,async(_0x312675,_0x42f216)=>{const _0x5726f0=_0xa843a3;let _0x4d314e=_0x312675[_0x5726f0(0x46e)],_0x17ccce=_0x312675[_0x5726f0(0x4fe)]['apikey'];y[_0x5726f0(0x4e1)](_0x5726f0(0x62b)),y[_0x5726f0(0x4e1)]('request\x20body:\x20'),y['verbose'](_0x312675[_0x5726f0(0x46e)]);let _0x3390ed=await this[_0x5726f0(0x690)]({'request':_0x312675,'schema':E,'ClassRef':M,'execute':_0x4da7d2=>_['createFlow'](_0x4da7d2,_0x4d314e,_0x17ccce)});_0x42f216[_0x5726f0(0x204)](0xc8)[_0x5726f0(0x7be)](_0x3390ed);})['post'](this[_0xa843a3(0x6a1)](_0xa843a3(0x318)),..._0x462b6f,async(_0x2cf3be,_0x52969a)=>{const _0x55a847=_0xa843a3;let _0x94aaea=_0x2cf3be[_0x55a847(0x46e)],_0x2695b4=_0x2cf3be['headers'][_0x55a847(0x763)];y[_0x55a847(0x4e1)](_0x55a847(0x471)),y['verbose'](_0x55a847(0x42a)),y[_0x55a847(0x4e1)](_0x2cf3be[_0x55a847(0x46e)]),delete _0x94aaea['blocks'],delete _0x94aaea[_0x55a847(0x1e8)],delete _0x94aaea[_0x55a847(0x1a6)],delete _0x94aaea[_0x55a847(0x51a)];let _0xe36b46=await this[_0x55a847(0x690)]({'request':_0x2cf3be,'schema':E,'ClassRef':M,'execute':_0x2701ee=>_[_0x55a847(0x116)](_0x2701ee,_0x94aaea,_0x2695b4)});_0x52969a[_0x55a847(0x204)](0xc8)[_0x55a847(0x7be)](_0xe36b46);})['post'](this[_0xa843a3(0x6a1)](_0xa843a3(0x6f2)),..._0x462b6f,async(_0x353dcb,_0x2c8739)=>{const _0x579f82=_0xa843a3;let _0x3aae74=_0x353dcb[_0x579f82(0x46e)];y[_0x579f82(0x4e1)](_0x579f82(0x471)),y[_0x579f82(0x4e1)](_0x579f82(0x42a)),y[_0x579f82(0x4e1)](_0x353dcb[_0x579f82(0x46e)]);let _0x4d807f=await this['dataValidate']({'request':_0x353dcb,'schema':E,'ClassRef':M,'execute':_0x2ec916=>_[_0x579f82(0x878)](_0x2ec916,_0x3aae74)});_0x2c8739[_0x579f82(0x204)](0xc8)[_0x579f82(0x7be)](_0x4d807f);})[_0xa843a3(0x3c3)](this['routerPath'](_0xa843a3(0x5a4)),..._0x462b6f,async(_0x2fad24,_0x3a3247)=>{const _0x4612d2=_0xa843a3;let _0x55acb4=_0x2fad24['body'];y[_0x4612d2(0x4e1)]('request\x20received\x20in\x20editFlow'),y[_0x4612d2(0x4e1)](_0x4612d2(0x42a)),y[_0x4612d2(0x4e1)](_0x2fad24['body']);let _0x53a54e=await this[_0x4612d2(0x690)]({'request':_0x2fad24,'schema':E,'ClassRef':M,'execute':_0x49e96b=>_[_0x4612d2(0x2d1)](_0x49e96b,_0x55acb4)});_0x3a3247[_0x4612d2(0x204)](0xc8)[_0x4612d2(0x7be)](_0x53a54e);})[_0xa843a3(0x3c3)](this[_0xa843a3(0x6a1)](_0xa843a3(0x5dc)),..._0x462b6f,async(_0xad962d,_0x198e64)=>{const _0x564de7=_0xa843a3;let _0x48af0c=_0xad962d[_0x564de7(0x46e)];y[_0x564de7(0x4e1)](_0x564de7(0x471)),y['verbose'](_0x564de7(0x42a)),y[_0x564de7(0x4e1)](_0xad962d[_0x564de7(0x46e)]);let _0xac957a=await this['dataValidate']({'request':_0xad962d,'schema':E,'ClassRef':M,'execute':_0x16abda=>_[_0x564de7(0x5ef)](_0x16abda,_0x48af0c)});_0x198e64['status'](0xc8)['json'](_0xac957a);})[_0xa843a3(0x3c3)](this[_0xa843a3(0x6a1)](_0xa843a3(0x597)),..._0x462b6f,async(_0x11358d,_0x4bd23f)=>{const _0xd2c103=_0xa843a3;let _0x189ce8=_0x11358d[_0xd2c103(0x46e)];y['verbose']('request\x20received\x20in\x20editFlowgroup'),y[_0xd2c103(0x4e1)]('request\x20body:\x20'),y[_0xd2c103(0x4e1)](_0x11358d[_0xd2c103(0x46e)]);let _0x28d785=await this[_0xd2c103(0x690)]({'request':_0x11358d,'schema':E,'ClassRef':M,'execute':_0xc92f18=>_[_0xd2c103(0x72a)](_0xc92f18,_0x189ce8)});_0x4bd23f[_0xd2c103(0x204)](0xc8)[_0xd2c103(0x7be)](_0x28d785);})['post'](this[_0xa843a3(0x6a1)](_0xa843a3(0x25d)),..._0x462b6f,async(_0x495abc,_0x5e611f)=>{const _0x52a2e4=_0xa843a3;let _0x451281=_0x495abc[_0x52a2e4(0x46e)];y[_0x52a2e4(0x4e1)](_0x52a2e4(0x604)),y[_0x52a2e4(0x4e1)](_0x52a2e4(0x42a)),y[_0x52a2e4(0x4e1)](_0x495abc[_0x52a2e4(0x46e)]);let _0x424334=await this[_0x52a2e4(0x690)]({'request':_0x495abc,'schema':E,'ClassRef':M,'execute':_0xface4b=>_[_0x52a2e4(0x7a2)](_0xface4b,_0x451281)});_0x5e611f[_0x52a2e4(0x204)](0xc8)[_0x52a2e4(0x7be)](_0x424334);})[_0xa843a3(0x3c3)](this[_0xa843a3(0x6a1)](_0xa843a3(0x6e1)),..._0x462b6f,async(_0x2e379f,_0x134513)=>{const _0x401cab=_0xa843a3;let _0x1d88e5=_0x2e379f[_0x401cab(0x46e)];y[_0x401cab(0x4e1)](_0x401cab(0x36d)),y['verbose']('request\x20body:\x20'),y[_0x401cab(0x4e1)](_0x2e379f[_0x401cab(0x46e)]);let _0x401c72=await this[_0x401cab(0x690)]({'request':_0x2e379f,'schema':E,'ClassRef':M,'execute':_0x3a47e7=>_[_0x401cab(0x42e)](_0x3a47e7,_0x1d88e5)});_0x134513['status'](0xc8)['json'](_0x401c72);})[_0xa843a3(0x3c3)](this[_0xa843a3(0x6a1)]('getflow'),..._0x462b6f,async(_0x9ea9c8,_0x1d6696)=>{const _0x5c605f=_0xa843a3;let _0x3e4a04=_0x9ea9c8[_0x5c605f(0x46e)];y['verbose'](_0x5c605f(0x78b)),y['verbose'](_0x5c605f(0x42a)),y[_0x5c605f(0x4e1)](_0x9ea9c8[_0x5c605f(0x46e)]);let _0x57f3e4=await this[_0x5c605f(0x690)]({'request':_0x9ea9c8,'schema':E,'ClassRef':M,'execute':_0xeb95a0=>_[_0x5c605f(0x31e)](_0xeb95a0,_0x3e4a04)});_0x1d6696['status'](0xc8)[_0x5c605f(0x7be)](_0x57f3e4);})[_0xa843a3(0x7fb)](this['routerPath'](_0xa843a3(0x742)),..._0x462b6f,async(_0x4eb95b,_0x46b1aa)=>{const _0x138936=_0xa843a3;let _0x3f7598=_0x4eb95b[_0x138936(0x46e)];y['verbose']('request\x20received\x20in\x20deleteFlow'),y[_0x138936(0x4e1)](_0x138936(0x42a)),y[_0x138936(0x4e1)](_0x4eb95b[_0x138936(0x46e)]);let _0x200cb9=await this[_0x138936(0x690)]({'request':_0x4eb95b,'schema':E,'ClassRef':M,'execute':_0x4a2587=>_[_0x138936(0x1b4)](_0x4a2587,_0x3f7598)});_0x46b1aa['status'](0xc8)[_0x138936(0x7be)](_0x200cb9);})['get'](this[_0xa843a3(0x6a1)](_0xa843a3(0x179)),..._0x462b6f,async(_0x82aeb9,_0x10b25f)=>{const _0x49064b=_0xa843a3;y[_0x49064b(0x4e1)](_0x49064b(0x5c2));let _0x3fffa9=await this[_0x49064b(0x690)]({'request':_0x82aeb9,'schema':E,'ClassRef':M,'execute':_0x5e40ea=>_[_0x49064b(0x76a)](_0x5e40ea)});_0x10b25f[_0x49064b(0x204)](0xc8)[_0x49064b(0x7be)](_0x3fffa9);});}},Mi=I(require('path')),te={};function yi(_0x51a9ba,_0xe6fe2d,_0x307634,_0x773654){te[_0x51a9ba]||(te[_0x51a9ba]={}),te[_0x51a9ba][_0xe6fe2d]={'id':_0xe6fe2d,'response':_0x307634,'events':_0x773654};}function bi(_0xe64472,_0x16fe26){!te[_0xe64472]||!te[_0xe64472][_0x16fe26]||delete te[_0xe64472][_0x16fe26];}function F(_0x497c21,_0x2689e1,_0x1b2bef){const _0x33bd27=a0_0x3cfc7d;if(!te[_0x497c21])return;let _0x379752=_0x33bd27(0x79c)+JSON[_0x33bd27(0x238)](_0x1b2bef)+'\x0a\x0a';Object[_0x33bd27(0x291)](te[_0x497c21])[_0x33bd27(0x455)](_0x41cb44=>{const _0x4aff50=_0x33bd27;_0x41cb44[_0x4aff50(0x416)]['includes'](_0x2689e1)&&_0x41cb44[_0x4aff50(0x340)][_0x4aff50(0x21d)](_0x379752);});}function Si(){const _0x167c94=a0_0x3cfc7d;let _0x33ce8d={};for(let _0x2282c1 in te)_0x33ce8d[_0x2282c1]=Object['values'](te[_0x2282c1])[_0x167c94(0x733)](_0x2774c8=>({'id':_0x2774c8['id'],'events':_0x2774c8[_0x167c94(0x416)]}));return _0x33ce8d;}var Ci=require(a0_0x3cfc7d(0x791)),Is=require(a0_0x3cfc7d(0x514)),Ts=class{},Io=new Is['Schema']({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),_o=new Is[(a0_0x3cfc7d(0x3e4))]({'_id':{'type':String,'default':'config'},'WebhookGlobal':{'type':Io},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),ve=T?.['model'](Ts[a0_0x3cfc7d(0x75b)],_o,'All_Instances_Config'),Oo=Mi[a0_0x3cfc7d(0x879)][a0_0x3cfc7d(0x149)](__dirname,a0_0x3cfc7d(0x3e3)),ke=(0x0,xt['Router'])(),xo=S[a0_0x3cfc7d(0x840)](a0_0x3cfc7d(0x768))[a0_0x3cfc7d(0x11a)],ie=[Aa,Ta,Oa[xo]];ke[a0_0x3cfc7d(0x616)](a0_0x3cfc7d(0x7b7),xt['default']['static'](Oo))[a0_0x3cfc7d(0x840)](a0_0x3cfc7d(0x700),async(_0x2970cc,_0x551b77)=>{const _0x3cb9ea=a0_0x3cfc7d;console[_0x3cb9ea(0x547)](_0x3cb9ea(0x501));let _0x2d1be4=_0x2970cc[_0x3cb9ea(0x396)]['instance'],_0x5b1c5b=(_0x2970cc[_0x3cb9ea(0x72c)][_0x3cb9ea(0x416)]||'')[_0x3cb9ea(0x407)](','),_0x40b9b8=(0x0,Ci['v4'])();console[_0x3cb9ea(0x547)]('Instance\x20ID:',_0x2d1be4),console[_0x3cb9ea(0x547)](_0x3cb9ea(0x59b),_0x5b1c5b);let _0x4254a1=S['get'](_0x3cb9ea(0x768))[_0x3cb9ea(0x55e)],_0x1e3982=_0x2970cc[_0x3cb9ea(0x72c)][_0x3cb9ea(0x763)];if(console[_0x3cb9ea(0x547)](_0x3cb9ea(0x389),_0x1e3982),_0x4254a1[_0x3cb9ea(0x41f)]!==_0x1e3982){console['log'](_0x3cb9ea(0x63e));try{let _0x72ff9=await me[_0x3cb9ea(0x1cf)][_0x3cb9ea(0x1c4)](_0x2d1be4);if(console[_0x3cb9ea(0x547)](_0x3cb9ea(0x5c5),_0x72ff9),!_0x72ff9||_0x72ff9[_0x3cb9ea(0x763)]!==_0x1e3982)return console[_0x3cb9ea(0x547)](_0x3cb9ea(0x2d7)),_0x551b77[_0x3cb9ea(0x204)](0x191)[_0x3cb9ea(0x26d)](_0x3cb9ea(0x117));}catch(_0x3df810){return console[_0x3cb9ea(0x3c6)](_0x3cb9ea(0x5e9),_0x3df810),_0x551b77[_0x3cb9ea(0x204)](0x191)[_0x3cb9ea(0x26d)](_0x3cb9ea(0x177));}}if(!await _e(_0x2d1be4))return _0x551b77[_0x3cb9ea(0x204)](0x194)[_0x3cb9ea(0x26d)](_0x3cb9ea(0x13e));_0x551b77[_0x3cb9ea(0x5de)](_0x3cb9ea(0x368),'text/event-stream'),_0x551b77['setHeader'](_0x3cb9ea(0x653),_0x3cb9ea(0x4ce)),_0x551b77[_0x3cb9ea(0x5de)]('Connection','keep-alive'),_0x551b77[_0x3cb9ea(0x539)]();let _0x335771=_0x3cb9ea(0x79c)+JSON[_0x3cb9ea(0x238)]({'info':_0x3cb9ea(0x255)})+'\x0a\x0a';_0x551b77[_0x3cb9ea(0x21d)](_0x335771),yi(_0x2d1be4,_0x40b9b8,_0x551b77,_0x5b1c5b),_0x2970cc['on']('close',()=>{const _0x3d461c=_0x3cb9ea;console[_0x3d461c(0x547)](_0x3d461c(0x2de)+_0x2d1be4),bi(_0x2d1be4,_0x40b9b8);});}),ke[a0_0x3cfc7d(0x3c3)](a0_0x3cfc7d(0x47c),async(_0x15a7dd,_0xa0c1d9)=>{const _0x11a009=a0_0x3cfc7d;console['log'](_0x11a009(0x246));let _0x30037f=_0x15a7dd[_0x11a009(0x396)][_0x11a009(0x3d0)],_0x1edb7a=_0x15a7dd[_0x11a009(0x396)][_0x11a009(0x24f)],_0x28eaab=_0x15a7dd[_0x11a009(0x72c)][_0x11a009(0x6d9)]||'',_0x325561=_0x15a7dd['body'];console['log']('Instance\x20Name:',_0x30037f),console['log']('StartID:',_0x1edb7a),console[_0x11a009(0x547)](_0x11a009(0x156),_0x28eaab),console['log'](_0x11a009(0x595),_0x325561);try{if(!await _e(_0x30037f))return _0xa0c1d9[_0x11a009(0x204)](0x194)[_0x11a009(0x26d)](_0x11a009(0x13e));let _0x5e41a0=await _[_0x11a009(0x601)](_0x30037f,_0x1edb7a,_0x28eaab,_0x325561);_0xa0c1d9[_0x11a009(0x26d)](_0x5e41a0);}catch(_0x3843d9){console['error'](_0x3843d9),_0xa0c1d9[_0x11a009(0x204)](0x1f4)[_0x11a009(0x26d)](_0x11a009(0x43c));}}),ke['get']('/clients-info',(_0x5f10f2,_0x362abd)=>{let _0x2688b1=Si();_0x362abd['json'](_0x2688b1);})['get']('/',(_0x1a3405,_0x57a52e)=>{const _0x4a5b81=a0_0x3cfc7d;let _0x4cb60e=S[_0x4a5b81(0x840)](_0x4a5b81(0x10b))[_0x4a5b81(0x7a5)];if(_0x4cb60e){let _0x49a7de=encodeURIComponent(''+_0x4cb60e);_0x57a52e[_0x4a5b81(0x5ff)](_0x4a5b81(0x31d)+_0x49a7de);return;}let _0x1e2a9d=S[_0x4a5b81(0x840)](_0x4a5b81(0x424)),_0xf330a0=_0x1e2a9d&&_0x1e2a9d[_0x4a5b81(0x81f)][_0x4a5b81(0x407)]('/')[0x4];if(_0xf330a0){let _0x324c08=encodeURIComponent('https://'+_0xf330a0);_0x57a52e[_0x4a5b81(0x5ff)]('https://uazapi-plugin.bubbleapps.io/?url='+_0x324c08);}else _0x57a52e[_0x4a5b81(0x5ff)](_0x4a5b81(0x641));})[a0_0x3cfc7d(0x611)]('/exit',...ie,async(_0x1810f5,_0x309b03)=>{const _0x359b9e=a0_0x3cfc7d;try{console[_0x359b9e(0x547)](_0x359b9e(0x6ec)),_0x309b03[_0x359b9e(0x204)](0xc8)['json']({'message':_0x359b9e(0x83f)}),_0x309b03['on']('finish',()=>process[_0x359b9e(0x284)](0x0));}catch(_0x1e4fc6){console[_0x359b9e(0x3c6)]('Erro\x20ao\x20tentar\x20encerrar\x20a\x20API',_0x1e4fc6),_0x309b03[_0x359b9e(0x204)](0x1f4)['json']({'message':_0x359b9e(0x18d)});}})[a0_0x3cfc7d(0x611)]('/config',...ie,async(_0x325673,_0x43de75)=>{const _0x42246a=a0_0x3cfc7d;try{let _0x843644=_0x325673[_0x42246a(0x46e)];await ve[_0x42246a(0x104)]({},{'$set':_0x843644},{'upsert':!0x0});let _0x4308a2=await ve[_0x42246a(0x36a)]();_0x43de75[_0x42246a(0x7be)](_0x4308a2);}catch(_0x23f0b1){_0x43de75[_0x42246a(0x204)](0x190)[_0x42246a(0x26d)](_0x23f0b1[_0x42246a(0x70f)]);}})[a0_0x3cfc7d(0x840)](a0_0x3cfc7d(0x339),...ie,async(_0x4c21f6,_0x10e702)=>{const _0x587273=a0_0x3cfc7d;try{let _0x4500ca=await ve[_0x587273(0x36a)]();if(!_0x4500ca)return _0x10e702[_0x587273(0x7be)]({});_0x10e702['json'](_0x4500ca);}catch(_0xdfdf74){_0x10e702[_0x587273(0x204)](0x1f4)[_0x587273(0x26d)](_0xdfdf74[_0x587273(0x70f)]);}})[a0_0x3cfc7d(0x616)](a0_0x3cfc7d(0x47f),new bt(S,...ie)[a0_0x3cfc7d(0x556)])['use'](a0_0x3cfc7d(0x49b),new Tt(...ie)[a0_0x3cfc7d(0x556)])[a0_0x3cfc7d(0x616)](a0_0x3cfc7d(0x75d),new lt(...ie)[a0_0x3cfc7d(0x556)])['use'](a0_0x3cfc7d(0x6af),new yt(...ie)['router'])[a0_0x3cfc7d(0x616)]('/webhook',new _t(...ie)[a0_0x3cfc7d(0x556)])['use'](a0_0x3cfc7d(0x122),new Ot(...ie)[a0_0x3cfc7d(0x556)]);var m=class{constructor(..._0x54a44f){const _0x242555=a0_0x3cfc7d;throw{'status':0x190,'error':_0x242555(0x775),'message':_0x54a44f['length']>0x0?_0x54a44f:void 0x0};}},se=class{constructor(..._0x486205){const _0x4ac393=a0_0x3cfc7d;throw{'status':0x191,'error':'Unauthorized','message':_0x486205[_0x4ac393(0x11c)]>0x0?_0x486205:void 0x0};}},X=class{constructor(..._0x93180){const _0x49faa7=a0_0x3cfc7d;throw{'status':0x193,'error':'Forbidden','message':_0x93180[_0x49faa7(0x11c)]>0x0?_0x93180:void 0x0};}},U=class{constructor(..._0x194a2a){const _0x2e8f00=a0_0x3cfc7d;throw{'status':0x194,'error':_0x2e8f00(0x584),'message':_0x194a2a['length']>0x0?_0x194a2a:void 0x0};}},x=class{constructor(..._0x251694){const _0x120d41=a0_0x3cfc7d;throw{'status':0x1f4,'error':'Internal\x20Server\x20Error','message':_0x251694[_0x120d41(0x11c)]>0x0?_0x251694:void 0x0};}},fe=require('@whiskeysockets/baileys');async function _s(_0x171bf9){const _0x2c7bb3=a0_0x3cfc7d;let _0x516720=new $(_s['name']),_0x4cfebe=T['getClient'](),_0x2356b1=_0x4cfebe['db'](S[_0x2c7bb3(0x840)](_0x2c7bb3(0x621))[_0x2c7bb3(0x46f)][_0x2c7bb3(0x1bc)]+_0x2c7bb3(0x22d))[_0x2c7bb3(0x86d)](_0x171bf9),_0x16a27e=async(_0x4b8aaa,_0x54e56a)=>{const _0x1138b8=_0x2c7bb3;try{return await _0x4cfebe[_0x1138b8(0x242)](),await _0x2356b1['replaceOne']({'_id':_0x54e56a},JSON[_0x1138b8(0x675)](JSON[_0x1138b8(0x238)](_0x4b8aaa,fe[_0x1138b8(0x2a1)]['replacer'])),{'upsert':!0x0});}catch{}},_0x39122a=async _0x196575=>{const _0x371caa=_0x2c7bb3;try{await _0x4cfebe['connect']();let _0x25b61a=await _0x2356b1['findOne']({'_id':_0x196575}),_0x1db83e=JSON[_0x371caa(0x238)](_0x25b61a);return JSON[_0x371caa(0x675)](_0x1db83e,fe[_0x371caa(0x2a1)][_0x371caa(0x10c)]);}catch{}},_0xed324d=async _0x83672d=>{const _0xb0ab4f=_0x2c7bb3;try{return await _0x4cfebe[_0xb0ab4f(0x242)](),await _0x2356b1['deleteOne']({'_id':_0x83672d});}catch{}},_0x277501=await _0x39122a(_0x2c7bb3(0x1f8))||(0x0,fe[_0x2c7bb3(0x82f)])();return{'state':{'creds':_0x277501,'keys':{'get':async(_0x571ec2,_0x256561)=>{const _0x18b9a8=_0x2c7bb3;let _0x3168cd={};return await Promise['all'](_0x256561[_0x18b9a8(0x733)](async _0x157f91=>{const _0x3b211f=_0x18b9a8;let _0x100012=await _0x39122a(_0x571ec2+'-'+_0x157f91);_0x571ec2===_0x3b211f(0x36b)&&_0x100012&&(_0x100012=fe[_0x3b211f(0x7ab)][_0x3b211f(0x1d1)][_0x3b211f(0x64c)][_0x3b211f(0x3cc)](_0x100012)),_0x3168cd[_0x157f91]=_0x100012;})),_0x3168cd;},'set':async _0x3b7942=>{const _0x518fbc=_0x2c7bb3;let _0x41dd8c=[];for(let _0x2ec572 in _0x3b7942)for(let _0x3718cd in _0x3b7942[_0x2ec572]){let _0x3ece6f=_0x3b7942[_0x2ec572][_0x3718cd],_0x4cde0f=_0x2ec572+'-'+_0x3718cd;_0x41dd8c['push'](_0x3ece6f?_0x16a27e(_0x3ece6f,_0x4cde0f):_0xed324d(_0x4cde0f));}await Promise[_0x518fbc(0x35a)](_0x41dd8c);}}},'saveCreds':async()=>_0x16a27e(_0x277501,_0x2c7bb3(0x1f8))};}var Ls=I(require(a0_0x3cfc7d(0x6f4))),Fs=I(require(a0_0x3cfc7d(0x420))),kt=require('@whiskeysockets/baileys'),vi=require(a0_0x3cfc7d(0x5ba)),Dt=require('@whiskeysockets/baileys'),Pt;function Po(_0x439bc0){const _0x1c8405=a0_0x3cfc7d;return Pt||(Pt=(0x0,vi['createClient'])({'url':_0x439bc0[_0x1c8405(0x2a4)]}),Pt[_0x1c8405(0x242)]()),Pt;}var ue=class u{constructor(_0x1dca4e,_0x15d424){const _0x5b4ae8=a0_0x3cfc7d;this[_0x5b4ae8(0x262)]=_0x1dca4e,this[_0x5b4ae8(0x1c7)]=_0x15d424,this[_0x5b4ae8(0x478)]=new $(u[_0x5b4ae8(0x75b)]),this[_0x5b4ae8(0x495)]=Po(_0x1dca4e);}set['reference'](_0x372d0f){const _0x25fdf5=a0_0x3cfc7d;this[_0x25fdf5(0x1c7)]=_0x372d0f;}async['instanceKeys'](){const _0x29ae88=a0_0x3cfc7d;try{return await this['client'][_0x29ae88(0x7cb)]([_0x29ae88(0x1a4),this['redisEnv'][_0x29ae88(0x60f)]+':*']);}catch(_0x48d615){this['logger'][_0x29ae88(0x3c6)](_0x48d615);}}async[a0_0x3cfc7d(0x13d)](_0x46da1c,_0x1ead59){const _0x2fb648=a0_0x3cfc7d;try{let _0x4a1381=JSON[_0x2fb648(0x238)](_0x1ead59,Dt[_0x2fb648(0x2a1)][_0x2fb648(0x152)]);return await this[_0x2fb648(0x495)][_0x2fb648(0x725)](this[_0x2fb648(0x262)][_0x2fb648(0x60f)]+':'+this[_0x2fb648(0x1c7)],_0x46da1c,_0x4a1381);}catch(_0x18d2c4){this[_0x2fb648(0x478)][_0x2fb648(0x3c6)](_0x18d2c4);}}async['getAllData'](){const _0x1cefa6=a0_0x3cfc7d;try{let _0x272adc=await this['client']['hGetAll'](this[_0x1cefa6(0x262)][_0x1cefa6(0x60f)]+':'+this['instanceName']);if(_0x272adc){for(let _0x36fcd6 in _0x272adc)Object[_0x1cefa6(0x3f5)][_0x1cefa6(0x6b9)][_0x1cefa6(0x767)](_0x272adc,_0x36fcd6)&&(_0x272adc[_0x36fcd6]=JSON[_0x1cefa6(0x675)](_0x272adc[_0x36fcd6],Dt[_0x1cefa6(0x2a1)][_0x1cefa6(0x10c)]));return _0x272adc;}}catch(_0x5765d9){this['logger']['error'](_0x5765d9);}}async[a0_0x3cfc7d(0x217)](_0x466e77){const _0x37068c=a0_0x3cfc7d;try{let _0x510637=await this['client']['hGet'](this[_0x37068c(0x262)]['PREFIX_KEY']+':'+this[_0x37068c(0x1c7)],_0x466e77);if(_0x510637)return JSON[_0x37068c(0x675)](_0x510637,Dt['BufferJSON']['reviver']);}catch(_0x4cdd0a){this[_0x37068c(0x478)][_0x37068c(0x3c6)](_0x4cdd0a);}}async[a0_0x3cfc7d(0x438)](_0x31e45d){const _0x15d4b5=a0_0x3cfc7d;try{return await this[_0x15d4b5(0x495)][_0x15d4b5(0x2cd)](this[_0x15d4b5(0x262)]['PREFIX_KEY']+':'+this[_0x15d4b5(0x1c7)],_0x31e45d);}catch(_0x5328fb){this[_0x15d4b5(0x478)][_0x15d4b5(0x3c6)](_0x5328fb);}}async['delAll'](_0x2e777a){const _0x4e1555=a0_0x3cfc7d;try{return await this['client'][_0x4e1555(0x4f4)](_0x2e777a||this[_0x4e1555(0x262)][_0x4e1555(0x60f)]+':'+this[_0x4e1555(0x1c7)]);}catch(_0x27b16a){this[_0x4e1555(0x478)][_0x4e1555(0x3c6)](_0x27b16a);}}};async function Os(_0x431f4c,_0x2252a7){const _0x3f0d5e=a0_0x3cfc7d;let _0x57b724=new $(Os[_0x3f0d5e(0x75b)]),_0x5948ce=new ue(_0x431f4c,_0x2252a7),_0x4df1f7=async(_0x316ec7,_0xcf2523)=>{const _0x380fdd=_0x3f0d5e;try{return await _0x5948ce[_0x380fdd(0x13d)](_0xcf2523,_0x316ec7);}catch(_0x252839){return _0x57b724[_0x380fdd(0x3c6)]({'localError':_0x380fdd(0x13d),'error':_0x252839});}},_0x450729=async _0x43c8d6=>{const _0x3636d3=_0x3f0d5e;try{return await _0x5948ce[_0x3636d3(0x217)](_0x43c8d6);}catch(_0x4b5fb9){_0x57b724[_0x3636d3(0x3c6)]({'readData':_0x3636d3(0x13d),'error':_0x4b5fb9});return;}},_0x6872b9=async _0x2d85ed=>{const _0x3780fd=_0x3f0d5e;try{return await _0x5948ce[_0x3780fd(0x438)](_0x2d85ed);}catch(_0x55bb6e){_0x57b724['error']({'readData':_0x3780fd(0x438),'error':_0x55bb6e});}},_0x223e63=await _0x450729(_0x3f0d5e(0x1f8))||(0x0,kt['initAuthCreds'])();return{'state':{'creds':_0x223e63,'keys':{'get':async(_0x517a8c,_0x5ae663)=>{const _0x34d0d3=_0x3f0d5e;let _0x350423={};return await Promise[_0x34d0d3(0x35a)](_0x5ae663[_0x34d0d3(0x733)](async _0x412d3d=>{const _0x5edf04=_0x34d0d3;let _0x1822d4=await _0x450729(_0x517a8c+'-'+_0x412d3d);_0x517a8c==='app-state-sync-key'&&_0x1822d4&&(_0x1822d4=kt[_0x5edf04(0x7ab)][_0x5edf04(0x1d1)][_0x5edf04(0x64c)]['fromObject'](_0x1822d4)),_0x350423[_0x412d3d]=_0x1822d4;})),_0x350423;},'set':async _0x5de2ac=>{const _0x2ad89b=_0x3f0d5e;let _0x26728e=[];for(let _0x54d1aa in _0x5de2ac)for(let _0x5658b1 in _0x5de2ac[_0x54d1aa]){let _0x2ef0b8=_0x5de2ac[_0x54d1aa][_0x5658b1],_0x31fd0a=_0x54d1aa+'-'+_0x5658b1;_0x26728e[_0x2ad89b(0x7b9)](_0x2ef0b8?await _0x4df1f7(_0x2ef0b8,_0x31fd0a):await _0x6872b9(_0x31fd0a));}await Promise[_0x2ad89b(0x35a)](_0x26728e);}}},'saveCreds':async()=>await _0x4df1f7(_0x223e63,_0x3f0d5e(0x1f8))};}var k=I(require('fs')),Q=require('uuid'),Ut=I(require(a0_0x3cfc7d(0x739))),oe=require(a0_0x3cfc7d(0x26f)),Ei=require(a0_0x3cfc7d(0x41d)),Ni=require(a0_0x3cfc7d(0x45e)),$i=I(require(a0_0x3cfc7d(0x4a0))),Ee=class extends O{constructor(_0x449a5b,_0x160553,_0x3fe0e8){const _0x4f0099=a0_0x3cfc7d;super(_0x160553),this['cacheInstanceModel']=_0x449a5b,this[_0x4f0099(0x497)]=_0x160553,this[_0x4f0099(0x78e)]=_0x3fe0e8;}async[a0_0x3cfc7d(0x1d8)](_0x10a7b1,_0xe99e69){const _0x2148e8=a0_0x3cfc7d;try{if(this[_0x2148e8(0x235)][_0x2148e8(0x78c)]){console[_0x2148e8(0x547)](_0x2148e8(0x588)+_0xe99e69+_0x2148e8(0x813),_0x10a7b1);let _0x207928=await this[_0x2148e8(0x6db)]['findOneAndUpdate']({'_id':_0xe99e69},{'$set':_0x10a7b1},{'new':!0x0,'upsert':!0x0});return console[_0x2148e8(0x547)](_0x2148e8(0x7c8),_0x207928),_0x207928;}}catch(_0x5bc787){throw console['error'](_0x2148e8(0x1a8),_0x5bc787),_0x5bc787;}return null;}async[a0_0x3cfc7d(0x3a4)](_0x1c1506){const _0x5151ad=a0_0x3cfc7d;try{let _0x39082a=A(_0x1c1506[_0x5151ad(0x851)]);return{'deletedCount':(await this[_0x5151ad(0x6db)][_0x5151ad(0x3a4)](_0x39082a))[_0x5151ad(0x55c)]};}catch(_0x51a294){return{'error':_0x51a294?.[_0x5151ad(0x885)]()};}}async[a0_0x3cfc7d(0x36a)](_0xedec0){const _0x62fe4b=a0_0x3cfc7d;try{let _0x27c662=A(_0xedec0[_0x62fe4b(0x851)]);return await this[_0x62fe4b(0x6db)]['findOne'](_0x27c662)[_0x62fe4b(0x6cd)]();}catch{return null;}}},Ne=(0x0,Ni[a0_0x3cfc7d(0x708)])(Ei[a0_0x3cfc7d(0x73d)]),xs=0x1f4,Do=S[a0_0x3cfc7d(0x840)](a0_0x3cfc7d(0x5af)),Ps=class{constructor(){const _0x3870b7=a0_0x3cfc7d;this[_0x3870b7(0x301)]=new Ee(We,S),(!this['ipv6Prefix']||!this[_0x3870b7(0x624)])&&Do&&this['detectIPv6PrefixAndInterface']()[_0x3870b7(0x17c)](async()=>{const _0x1cb296=_0x3870b7;console[_0x1cb296(0x547)]('IPv6\x20Prefix\x20detected:\x20'+this[_0x1cb296(0x822)]),console['log'](_0x1cb296(0x1d4)+this[_0x1cb296(0x624)]),await this[_0x1cb296(0x323)]();let _0x137235=await this[_0x1cb296(0x2eb)]();console[_0x1cb296(0x547)](_0x1cb296(0x160)+_0x137235);})[_0x3870b7(0x6fb)](_0x248827=>{const _0x474a9e=_0x3870b7;console[_0x474a9e(0x3c6)](_0x474a9e(0x1eb)+_0x248827[_0x474a9e(0x70f)]);});}async[a0_0x3cfc7d(0x323)](){const _0x23a13c=a0_0x3cfc7d;let _0x1aad01=await this['listIPv6Addresses']();if(console[_0x23a13c(0x547)](_0x23a13c(0x1ff)+_0x1aad01[_0x23a13c(0x11c)]),_0x1aad01['length']>xs){let _0x581428=_0x1aad01[_0x23a13c(0x1ae)](xs);for(let _0xa4f3dc of _0x581428)console[_0x23a13c(0x547)](_0x23a13c(0x6bb)+_0xa4f3dc),await this[_0x23a13c(0x334)](_0xa4f3dc);console[_0x23a13c(0x547)]('Removed\x20'+_0x581428['length']+_0x23a13c(0x807));}else console[_0x23a13c(0x547)](_0x23a13c(0x4b4));}async[a0_0x3cfc7d(0x363)](){const _0x8aab43=a0_0x3cfc7d;try{let {stdout:_0x462294}=await Ne(_0x8aab43(0x27b));return _0x462294[_0x8aab43(0x407)]('\x0a')[_0x8aab43(0x56c)](_0x993c48=>_0x993c48[_0x8aab43(0x1ec)](_0x8aab43(0x6e2))&&_0x993c48['includes'](_0x8aab43(0x3a0)))[_0x8aab43(0x733)](_0x59114a=>_0x59114a[_0x8aab43(0x151)](/inet6\s+([a-fA-F0-9:]+)\//)?.[0x1])[_0x8aab43(0x56c)](Boolean);}catch(_0x1e34ae){return console[_0x8aab43(0x3c6)](_0x8aab43(0x60d)+_0x1e34ae[_0x8aab43(0x70f)]),[];}}async[a0_0x3cfc7d(0x2eb)](){const _0x590fc1=a0_0x3cfc7d;try{let {stdout:_0x22cd00}=await Ne(_0x590fc1(0x76e)),_0x130f4e=parseInt(_0x22cd00[_0x590fc1(0x1d2)](),0xa);return console[_0x590fc1(0x547)]('Total\x20de\x20endereços\x20IPv6\x20globais:\x20'+_0x130f4e),_0x130f4e;}catch(_0x1fac45){return console[_0x590fc1(0x3c6)](_0x590fc1(0x3df)+_0x1fac45[_0x590fc1(0x70f)]),0x0;}}async[a0_0x3cfc7d(0x334)](_0x700c5){const _0x344001=a0_0x3cfc7d;try{await Ne(_0x344001(0x3ee)+_0x700c5+'/64\x20dev\x20'+this[_0x344001(0x624)]),console['log']('IPv6\x20address\x20removed:\x20'+_0x700c5);}catch(_0x212b39){console[_0x344001(0x3c6)](_0x344001(0x315)+_0x212b39[_0x344001(0x70f)]);}}async['detectIPv6PrefixAndInterface'](){const _0x3a89e8=a0_0x3cfc7d;try{let {stdout:_0x2665ca}=await Ne('ip\x20-br\x20link\x20show');console['log']('Network\x20interfaces\x20detected:\x20'+_0x2665ca);let _0x26b93c=_0x2665ca['split']('\x0a')[_0x3a89e8(0x733)](_0x1be64b=>_0x1be64b[_0x3a89e8(0x407)]('\x20')[0x0])[_0x3a89e8(0x56c)](_0x3cdca0=>!_0x3cdca0[_0x3a89e8(0x1ec)]('lo')&&!_0x3cdca0[_0x3a89e8(0x1ec)]('docker')&&!_0x3cdca0['includes'](_0x3a89e8(0x652))&&!_0x3cdca0[_0x3a89e8(0x1ec)]('wl')&&!_0x3cdca0[_0x3a89e8(0x1ec)]('@'));if(console[_0x3a89e8(0x547)]('Filtered\x20network\x20interfaces:\x20'+_0x26b93c),_0x26b93c[_0x3a89e8(0x11c)]===0x0)throw new Error('No\x20suitable\x20network\x20interface\x20found');this[_0x3a89e8(0x624)]=_0x26b93c[0x0];let {stdout:_0x46a2d1}=await Ne(_0x3a89e8(0x113)+this['networkInterface']);console[_0x3a89e8(0x547)]('IPv6\x20addresses\x20detected:\x20'+_0x46a2d1);let _0x44deaa=_0x46a2d1[_0x3a89e8(0x407)]('\x0a')[_0x3a89e8(0x1c4)](_0x173c2e=>_0x173c2e[_0x3a89e8(0x1ec)]('inet6')&&_0x173c2e['includes'](_0x3a89e8(0x3a0)));if(!_0x44deaa)throw new Error(_0x3a89e8(0x61b));let _0x2fce36=_0x44deaa['match'](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x2fce36)throw new Error(_0x3a89e8(0x523));let [_0x1e5cd3,_0x127d79,_0x3862df]=_0x2fce36,_0x394965=Math['floor'](Number(_0x3862df)/0x10),_0x4da838=Number(_0x3862df)%0x10,_0x702ecb=_0x127d79[_0x3a89e8(0x407)](':')['slice'](0x0,_0x394965)[_0x3a89e8(0x149)](':');if(_0x4da838>0x0){let _0x129629=_0x127d79[_0x3a89e8(0x407)](':')[_0x394965],_0x35938b=0xffff<<0x10-_0x4da838&0xffff,_0x1088b9=(parseInt(_0x129629,0x10)&_0x35938b)['toString'](0x10)['padStart'](0x4,'0');_0x702ecb+=':'+_0x1088b9;}this[_0x3a89e8(0x822)]=_0x702ecb+':';}catch(_0x43659e){console[_0x3a89e8(0x3c6)](_0x3a89e8(0x11e),_0x43659e);}}async[a0_0x3cfc7d(0x24e)](_0x1762a1){const _0x16ee2c=a0_0x3cfc7d;let _0xf0cca4=_0x16ee2c(0x82b)+_0x1762a1+_0x16ee2c(0x757)+this[_0x16ee2c(0x624)];try{await Ne(_0xf0cca4),console['log']('IPv6\x20address\x20configured:\x20'+_0x1762a1);}catch(_0x4c519c){console['error']('Error\x20adding\x20IPv6\x20address:\x20'+_0x4c519c);}}[a0_0x3cfc7d(0x867)](){const _0xdce04=a0_0x3cfc7d;return _0xdce04(0x360)[_0xdce04(0x5e0)](/X/g,()=>_0xdce04(0x530)[_0xdce04(0x694)](Math['floor'](Math['random']()*0x10)));}['ip6eui'](_0x546f1e,_0x148f51){const _0x54499e=a0_0x3cfc7d;let _0x1bdcb9=_0x148f51[_0x54499e(0x407)](':');return _0x1bdcb9[0x0]=(parseInt(_0x1bdcb9[0x0],0x10)^0x2)[_0x54499e(0x885)](0x10)[_0x54499e(0x7a7)](0x2,'0'),''+_0x546f1e+_0x1bdcb9[0x0]+_0x1bdcb9[0x1]+':'+_0x1bdcb9[0x2]+_0x54499e(0x696)+_0x1bdcb9[0x3]+':'+_0x1bdcb9[0x4]+_0x1bdcb9[0x5];}[a0_0x3cfc7d(0x23e)](){const _0x30f4d3=a0_0x3cfc7d;let _0x5d4bb2=this[_0x30f4d3(0x822)];_0x5d4bb2[_0x30f4d3(0x14b)](':')||(_0x5d4bb2+=':');let _0x5210eb=this[_0x30f4d3(0x867)]();return this[_0x30f4d3(0x395)](_0x5d4bb2,_0x5210eb);}['isValidIPv6Config'](_0x23269e){const _0x2715b4=a0_0x3cfc7d;return new RegExp(_0x2715b4(0x82d))['test'](_0x23269e);}async[a0_0x3cfc7d(0x52c)](_0x3f6510){const _0x337e13=a0_0x3cfc7d;let _0x5142be=[{'url':_0x337e13(0x30a),'parse':_0x594049=>_0x594049['ip']},{'url':_0x337e13(0x52d),'parse':_0x235dc8=>_0x235dc8['ip']},{'url':_0x337e13(0x720),'parse':_0x4b7063=>_0x4b7063['trim']()},{'url':_0x337e13(0x3f7),'parse':_0x2e6821=>_0x2e6821[_0x337e13(0x1d2)]()}],_0xcea90e=_0x5142be[Math[_0x337e13(0x532)](Math[_0x337e13(0x6eb)]()*_0x5142be['length'])];try{let _0x5cdcdd=await $i['default'][_0x337e13(0x840)](_0xcea90e[_0x337e13(0x855)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x3f6510}}),_0x4216b4=_0xcea90e[_0x337e13(0x675)](_0x5cdcdd[_0x337e13(0x877)]);return _0x4216b4[_0x337e13(0x784)]()===_0x3f6510['toLowerCase']()?(console[_0x337e13(0x547)](_0x337e13(0x87d)+_0x3f6510),!0x0):(console['error'](_0x337e13(0x4b5)+_0x3f6510+_0x337e13(0x2b2)+_0x4216b4),!0x1);}catch(_0x17d6da){return console['error'](_0x337e13(0x4d0)+_0xcea90e[_0x337e13(0x855)]+':\x20'+_0x17d6da[_0x337e13(0x70f)]),!0x1;}}async['createIPv6'](_0x5ad24e,_0xc5ecd2){const _0x2facbc=a0_0x3cfc7d;if(!this[_0x2facbc(0x822)]||!this[_0x2facbc(0x624)])return console[_0x2facbc(0x3c6)](_0x2facbc(0x3b7)),null;let _0x539533=await this[_0x2facbc(0x363)]();if(_0x539533[_0x2facbc(0x11c)]>=xs){let _0xec67ec=_0x539533[Math[_0x2facbc(0x532)](Math[_0x2facbc(0x6eb)]()*_0x539533[_0x2facbc(0x11c)])];return console[_0x2facbc(0x547)](_0x2facbc(0x25f)+_0xec67ec),_0xec67ec;}let _0x5f3745;do _0x5f3745=this['generateRandomIPv6'](),console[_0x2facbc(0x547)](_0x2facbc(0x6a7)+_0x5f3745);while(!this['isValidIPv6Config'](_0x5f3745));await this['configureIPv6'](_0x5f3745),console[_0x2facbc(0x547)](_0x2facbc(0x614)+_0x5f3745);let _0x31f42d={'_id':_0x5ad24e+'-'+_0xc5ecd2,'ip':_0x5f3745},_0x2c048a=await this[_0x2facbc(0x301)][_0x2facbc(0x1d8)](_0x31f42d,_0x31f42d[_0x2facbc(0x7b5)]);return console['log'](_0x2facbc(0x2e8)+_0x2c048a),_0x5f3745;}},ko=new Ps(),Le=ko,Us=a0_0x3cfc7d(0x5be),xi,de=null,xa=null,Lo=0x3,Fo=null,Ri=S[a0_0x3cfc7d(0x840)](a0_0x3cfc7d(0x768))[a0_0x3cfc7d(0x55e)][a0_0x3cfc7d(0x41f)],Ai=S[a0_0x3cfc7d(0x840)]('PROXY');async function Uo(){const _0x575e54=a0_0x3cfc7d;let _0x36339f=await ve['findOne']();de=_0x36339f?.[_0x575e54(0x3d5)]??null,Fo=_0x36339f?.[_0x575e54(0x7c1)]??null,Us=_0x36339f?.[_0x575e54(0x3e7)]??_0x575e54(0x5be),xi=_0x36339f?.[_0x575e54(0x657)]??he??_0x575e54(0x76c);}async function jo(){await Uo();}jo();var Lt={},$e=class u{constructor(_0x2922ef,_0x4cdaf1,_0xed079c){const _0x5cf35f=a0_0x3cfc7d;this[_0x5cf35f(0x497)]=_0x2922ef,this[_0x5cf35f(0x282)]=_0x4cdaf1,this[_0x5cf35f(0x67f)]=_0xed079c,this['processedMessagesCache']={},this[_0x5cf35f(0x37f)]=null,this['logger']=new $(u[_0x5cf35f(0x75b)]),this[_0x5cf35f(0x3d0)]={},this['localWebhook']={},this[_0x5cf35f(0x36e)]={'state':_0x5cf35f(0x35b)},this['storePath']=(0x0,j[_0x5cf35f(0x149)])(ne,_0x5cf35f(0x3e3)),this[_0x5cf35f(0x551)]=new Fs[(_0x5cf35f(0x879))](),this[_0x5cf35f(0x5ec)]=new Fs[(_0x5cf35f(0x879))](),this[_0x5cf35f(0x659)]=!0x1,this[_0x5cf35f(0x4a1)]={'status.instance':_0x5cf35f(0x7af),'connection.update':_0x5cf35f(0x7af),'qrcode.updated':'/wa-qrcode','messages.upsert':'/wa-message','send.message':_0x5cf35f(0x19f),'messages.update':_0x5cf35f(0x4ad),'group.upsert':'/wa-groups','group.update':_0x5cf35f(0x828),'group-participants.update':_0x5cf35f(0x828),'messages.set':_0x5cf35f(0x41a),'contacts.set':_0x5cf35f(0x6de),'contacts.upsert':_0x5cf35f(0x6de),'contacts.update':_0x5cf35f(0x6de),'presence.update':_0x5cf35f(0x798),'chats.set':_0x5cf35f(0x3b5),'chats.update':'/wa-chats','chats.upsert':'/wa-chats','chats.delete':_0x5cf35f(0x3b5)},this[_0x5cf35f(0x206)]=0x0,this[_0x5cf35f(0x68a)]=[],this[_0x5cf35f(0x253)]=0xea60,this[_0x5cf35f(0x48f)]=!0x1,this[_0x5cf35f(0x22c)]={'chats.upsert':async(_0x36b14b,_0x576ef2)=>{const _0x2e94c5=_0x5cf35f;let _0x5e6e28=[];for await(let _0x57a92b of _0x36b14b)_0x5e6e28[_0x2e94c5(0x7b9)]({'_id':_0x57a92b['id'],'owner':this[_0x2e94c5(0x3d0)]['wuid'],'group':_0x57a92b['id'][_0x2e94c5(0x14b)]('@g.us'),'name':_0x57a92b['name']||_0x57a92b['displayName']||null,'contactname':null,'lastmsg':_0x57a92b[_0x2e94c5(0x84b)]&&_0x57a92b['conversationTimestamp'][_0x2e94c5(0x885)]()[_0x2e94c5(0x11c)]<0xd?_0x57a92b['conversationTimestamp']*0x3e8:_0x57a92b[_0x2e94c5(0x84b)]||null,'archived':_0x57a92b[_0x2e94c5(0x364)]||!0x1,'unreadcount':_0x57a92b[_0x2e94c5(0x567)]||0x0,'ephemeralExpiration':_0x57a92b['ephemeralExpiration']||0x0});this[_0x2e94c5(0x2dd)](_0x2e94c5(0x86e),_0x5e6e28);},'chats.update':async(_0x530bb8,_0x519eeb)=>{const _0x5c2da1=_0x5cf35f;for(let _0x161b9c of _0x530bb8){let _0x4d3b87={'_id':_0x161b9c['id'],'owner':this['instance'][_0x5c2da1(0x4ae)],'archived':_0x161b9c[_0x5c2da1(0x364)],'muteEndTime':_0x161b9c[_0x5c2da1(0x5f2)],'ephemeralExpiration':_0x161b9c[_0x5c2da1(0x4db)]},_0x4eaaf9=!0x1,_0x487b42={};_0x4d3b87['archived']!=null&&(this[_0x5c2da1(0x478)][_0x5c2da1(0x4e1)](this[_0x5c2da1(0x1c7)]+'\x20('+this[_0x5c2da1(0x3d0)][_0x5c2da1(0x4ae)]+'):\x20teve\x20mudanças\x20chat.archived:\x20'+_0x161b9c['id']+_0x5c2da1(0x4dd)+_0x161b9c[_0x5c2da1(0x364)]),_0x4eaaf9=!0x0,_0x487b42[_0x5c2da1(0x364)]=_0x161b9c['archived']),'muteEndTime'in _0x161b9c&&(this[_0x5c2da1(0x478)][_0x5c2da1(0x4e1)](this['instanceName']+'\x20('+this[_0x5c2da1(0x3d0)][_0x5c2da1(0x4ae)]+_0x5c2da1(0x76b)+_0x161b9c['id']+_0x5c2da1(0x4dd)+(_0x161b9c[_0x5c2da1(0x5f2)]??'0')),_0x4eaaf9=!0x0,_0x487b42[_0x5c2da1(0x5f2)]=_0x161b9c['muteEndTime']??0x0),_0x5c2da1(0x4db)in _0x161b9c&&(this[_0x5c2da1(0x478)][_0x5c2da1(0x4e1)](this['instanceName']+'\x20('+this[_0x5c2da1(0x3d0)][_0x5c2da1(0x4ae)]+_0x5c2da1(0x30b)+_0x161b9c['id']+_0x5c2da1(0x4dd)+(_0x161b9c[_0x5c2da1(0x4db)]!==void 0x0?_0x161b9c[_0x5c2da1(0x4db)]:'undefined')),_0x487b42[_0x5c2da1(0x4db)]=_0x161b9c['ephemeralExpiration']===null?0x0:_0x161b9c[_0x5c2da1(0x4db)],_0x4eaaf9=!0x0);let _0x3f943e;_0x4eaaf9&&(_0x3f943e=await this['repository'][_0x5c2da1(0x52b)][_0x5c2da1(0x104)]({'where':{'_id':_0x161b9c['id']}},_0x487b42,this[_0x5c2da1(0x3d0)][_0x5c2da1(0x4ae)])),_0x3f943e&&F(this[_0x5c2da1(0x1c7)],_0x5c2da1(0x2cb),{'chat':_0x3f943e});}},'chats.delete':async _0x135a14=>{const _0x47fbd4=_0x5cf35f;for(let _0xfd1dd9 of _0x135a14)if(_0xfd1dd9[_0x47fbd4(0x14b)](_0x47fbd4(0x2a5))){await this['repository'][_0x47fbd4(0x52b)][_0x47fbd4(0x7fb)]({'where':{'_id':_0xfd1dd9}},this[_0x47fbd4(0x3d0)][_0x47fbd4(0x4ae)]);let _0x1d8f9b={'where':{'key':{'remoteJid':_0xfd1dd9}}};await this['repository'][_0x47fbd4(0x70f)][_0x47fbd4(0x7fb)](_0x1d8f9b,this[_0x47fbd4(0x3d0)][_0x47fbd4(0x4ae)]);}else{await this[_0x47fbd4(0x67f)][_0x47fbd4(0x52b)]['updateOne']({'where':{'_id':_0xfd1dd9}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x47fbd4(0x3d0)]['wuid']);let _0x1852c8={'where':{'key':{'remoteJid':_0xfd1dd9}}};await this[_0x47fbd4(0x67f)][_0x47fbd4(0x70f)]['delete'](_0x1852c8,this[_0x47fbd4(0x3d0)][_0x47fbd4(0x4ae)]);}this[_0x47fbd4(0x2dd)](_0x47fbd4(0x135),[..._0x135a14]);}},this['contactHandle']={'contacts.upsert':async(_0x147641,_0x431581)=>{const _0x17454f=_0x5cf35f;let _0x733cb4=await this[_0x17454f(0x67f)][_0x17454f(0x447)][_0x17454f(0x1c4)]({'where':{}},this[_0x17454f(0x3d0)][_0x17454f(0x4ae)]),_0x1a69ab=[];for await(let _0x2f0728 of _0x147641)_0x733cb4[_0x17454f(0x1c4)](_0x1ab875=>_0x1ab875[_0x17454f(0x7b5)]===_0x2f0728['id'])||_0x1a69ab['push']({'_id':_0x2f0728['id'],'pushName':_0x2f0728?.[_0x17454f(0x75b)]||_0x2f0728?.[_0x17454f(0x1b3)],'owner':this[_0x17454f(0x3d0)][_0x17454f(0x4ae)]});this[_0x17454f(0x2dd)](_0x17454f(0x4a2),_0x1a69ab),await this[_0x17454f(0x67f)][_0x17454f(0x447)][_0x17454f(0x6d6)](_0x1a69ab);},'contacts.update':async(_0x35d4d5,_0x175dcd)=>{const _0x2337cd=_0x5cf35f;let _0x49e732=[];for await(let _0x426433 of _0x35d4d5)_0x49e732[_0x2337cd(0x7b9)]({'_id':_0x426433['id'],'pushName':_0x426433?.[_0x2337cd(0x75b)]??_0x426433?.['verifiedName'],'owner':this[_0x2337cd(0x3d0)][_0x2337cd(0x4ae)]});this[_0x2337cd(0x2dd)](_0x2337cd(0x524),_0x49e732);}},this[_0x5cf35f(0x76f)]={'messaging-history.set':async({messages:_0x4dcb4,chats:_0xed2561,isLatest:_0xbf1182},_0x32ada6)=>{const _0x242f3b=_0x5cf35f;if(_0xbf1182){setTimeout(()=>{const _0x35f030=a0_0x1146;this[_0x35f030(0x3d0)]['HistoryProcessed']=!0x0,console[_0x35f030(0x547)]('HistoryProcessed\x20definido\x20como\x20true\x20após\x202\x20minutos.');},0x1d4c0);let _0x4045fb=await Promise['all'](_0xed2561[_0x242f3b(0x733)](async _0x296520=>({'_id':_0x296520['id'],'owner':this[_0x242f3b(0x3d0)][_0x242f3b(0x4ae)],'group':_0x296520['id'][_0x242f3b(0x14b)]('@g.us'),'name':_0x296520[_0x242f3b(0x75b)]||_0x296520[_0x242f3b(0x871)]||_0x296520[_0x242f3b(0x460)]||null,'contactname':null,'lastmsg':_0x296520[_0x242f3b(0x84b)]&&_0x296520['conversationTimestamp'][_0x242f3b(0x885)]()[_0x242f3b(0x11c)]<0xd?_0x296520['conversationTimestamp']*0x3e8:_0x296520[_0x242f3b(0x84b)]||null,'archived':_0x296520[_0x242f3b(0x364)]||!0x1,'unreadcount':_0x296520[_0x242f3b(0x567)]||0x0,'ephemeralExpiration':_0x296520[_0x242f3b(0x4db)]||0x0,'muteEndTime':_0x296520[_0x242f3b(0x5f2)]||0x0})));this[_0x242f3b(0x2dd)](_0x242f3b(0x515),_0x4045fb),await this[_0x242f3b(0x32f)](_0x4045fb,_0x32ada6);}let _0x474f17=[],_0x5303d2=Date[_0x242f3b(0x6aa)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0xa3774c]of Object['entries'](_0x4dcb4)){if(_0xa3774c[_0x242f3b(0x70f)]?.['protocolMessage']||_0xa3774c['message']?.[_0x242f3b(0x824)]||!_0xa3774c[_0x242f3b(0x70f)]||_0xa3774c[_0x242f3b(0x1e4)][_0x242f3b(0x6d9)]===_0x242f3b(0x498)||(Ls[_0x242f3b(0x879)][_0x242f3b(0x124)](_0xa3774c?.[_0x242f3b(0x2bb)])&&(_0xa3774c[_0x242f3b(0x2bb)]=_0xa3774c[_0x242f3b(0x2bb)]?.[_0x242f3b(0x2fa)]()),_0xa3774c[_0x242f3b(0x2bb)]&&_0xa3774c[_0x242f3b(0x2bb)][_0x242f3b(0x885)]()['length']<0xd&&(_0xa3774c['messageTimestamp']=_0xa3774c[_0x242f3b(0x2bb)]*0x3e8),_0xa3774c[_0x242f3b(0x2bb)]<_0x5303d2))continue;let _0x4219a9=(0x0,w[_0x242f3b(0x161)])(_0xa3774c[_0x242f3b(0x70f)]),_0x119452=(0x0,w[_0x242f3b(0x3ae)])(_0x4219a9),{message_normalized:_0x104af6}=this[_0x242f3b(0x5ca)](_0x4219a9,_0x119452,null);Object['keys'](_0x104af6)[_0x242f3b(0x11c)]>0x0&&_0x474f17['push']({'_id':_0xa3774c['key']['id'],'key':_0xa3774c[_0x242f3b(0x1e4)],'pushName':_0xa3774c[_0x242f3b(0x7b2)],'participant':_0xa3774c[_0x242f3b(0x87c)],'message':_0x4219a9,'messageType':_0x119452,'message_normalized':{'key':_0xa3774c['key'],'pushName':_0xa3774c[_0x242f3b(0x7b2)],'messageTimestamp':_0xa3774c['messageTimestamp'],..._0x104af6},'messageTimestamp':_0xa3774c[_0x242f3b(0x2bb)],'owner':this[_0x242f3b(0x3d0)][_0x242f3b(0x4ae)]});}_0x32ada6[_0x242f3b(0x78c)]&&_0x474f17[_0x242f3b(0x11c)]>0x0&&(this[_0x242f3b(0x478)][_0x242f3b(0x4e1)](this[_0x242f3b(0x1c7)]+'\x20('+this[_0x242f3b(0x3d0)][_0x242f3b(0x4ae)]+'):\x20'+_0x474f17[_0x242f3b(0x11c)]+_0x242f3b(0x7d9)+this[_0x242f3b(0x3d0)]['wuid']+_0x242f3b(0x684)),await this[_0x242f3b(0x67f)][_0x242f3b(0x70f)]['insert']([..._0x474f17],this['instance'][_0x242f3b(0x4ae)]));let _0x19b0d6=Date['now']()-0xa*0x3c*0x3e8;for(let _0x2e86f1 of _0x474f17)if(this[_0x242f3b(0x3d0)][_0x242f3b(0x415)]&&_0x2e86f1[_0x242f3b(0x2bb)]>=_0x19b0d6){if(this[_0x242f3b(0x42b)](this[_0x242f3b(0x3d0)][_0x242f3b(0x4ae)],_0x2e86f1[_0x242f3b(0x7b5)])){this['logger'][_0x242f3b(0x4e1)](this[_0x242f3b(0x1c7)]+'\x20('+this[_0x242f3b(0x3d0)][_0x242f3b(0x4ae)]+_0x242f3b(0x2cc)+_0x2e86f1[_0x242f3b(0x7b5)]+')');continue;}this[_0x242f3b(0x3ed)](this[_0x242f3b(0x3d0)]['wuid'],_0x2e86f1['_id']),this[_0x242f3b(0x2dd)](_0x242f3b(0x1e0),_0x2e86f1);}else this[_0x242f3b(0x2dd)](_0x242f3b(0x86f),_0x2e86f1);_0x4dcb4=void 0x0;},'messages.upsert':async({messages:_0x919d1,type:_0x51bfc0},_0x1cf182)=>{const _0xd4a609=_0x5cf35f;for(let _0x5240ab of _0x919d1){if(this[_0xd4a609(0x288)]?.[_0xd4a609(0x74b)]&&_0x5240ab['key'][_0xd4a609(0x6d9)][_0xd4a609(0x1ec)](_0xd4a609(0x2a5))){this[_0xd4a609(0x478)][_0xd4a609(0x4e1)](this[_0xd4a609(0x1c7)]+'\x20('+this[_0xd4a609(0x3d0)][_0xd4a609(0x4ae)]+_0xd4a609(0x390));continue;}if(_0x5240ab[_0xd4a609(0x1e4)][_0xd4a609(0x6d9)][_0xd4a609(0x1ec)](_0xd4a609(0x559))||_0x5240ab['key']['remoteJid']===_0xd4a609(0x498))continue;if(_0x5240ab[_0xd4a609(0x687)]&&_0x5240ab[_0xd4a609(0x687)][0x0]===_0xd4a609(0x439)){console['error'](_0xd4a609(0x489)),await this[_0xd4a609(0x72d)](_0x5240ab),Lt[_0x5240ab[_0xd4a609(0x1e4)]['id']]=_0x5240ab,this[_0xd4a609(0x5e4)](_0x5240ab,0x0);continue;}if(_0x51bfc0!==_0xd4a609(0x2ce)||!_0x5240ab?.['message']||_0x5240ab[_0xd4a609(0x70f)]?.['protocolMessage']||_0x5240ab['message']?.[_0xd4a609(0x824)])continue;let _0x4a17b5=null,_0x3db991=null;if(Lt[_0x5240ab['key']['id']]&&(console[_0xd4a609(0x3c6)]('[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache'),await this[_0xd4a609(0x67f)][_0xd4a609(0x4bf)][_0xd4a609(0x7fb)]({'where':{'_id':_0x5240ab[_0xd4a609(0x1e4)]['id']}}),delete Lt[_0x5240ab[_0xd4a609(0x1e4)]['id']]),this[_0xd4a609(0x42b)](this['instance'][_0xd4a609(0x4ae)],_0x5240ab[_0xd4a609(0x1e4)]['id'])){this[_0xd4a609(0x478)][_0xd4a609(0x4e1)](this[_0xd4a609(0x1c7)]+'\x20('+this[_0xd4a609(0x3d0)][_0xd4a609(0x4ae)]+_0xd4a609(0x33f));continue;}this[_0xd4a609(0x3ed)](this['instance'][_0xd4a609(0x4ae)],_0x5240ab[_0xd4a609(0x1e4)]['id']);try{_0x4a17b5=await this['processPollUpdateMessage'](_0x5240ab),_0x3db991=_0x4a17b5?_0x4a17b5[_0xd4a609(0x149)](','):null;}catch(_0x17b0ef){this[_0xd4a609(0x478)][_0xd4a609(0x4e1)](this['instanceName']+'\x20('+this[_0xd4a609(0x3d0)][_0xd4a609(0x4ae)]+_0xd4a609(0x71a)+(_0x17b0ef instanceof Error?_0x17b0ef[_0xd4a609(0x70f)]:JSON[_0xd4a609(0x238)](_0x17b0ef,null,0x2))),_0x3db991=_0xd4a609(0x329);}this['client'][_0xd4a609(0x56e)]('unavailable'),Ls[_0xd4a609(0x879)][_0xd4a609(0x124)](_0x5240ab[_0xd4a609(0x2bb)])&&(_0x5240ab['messageTimestamp']=_0x5240ab[_0xd4a609(0x2bb)]?.[_0xd4a609(0x2fa)]()),_0x5240ab['messageTimestamp']&&_0x5240ab[_0xd4a609(0x2bb)][_0xd4a609(0x885)]()[_0xd4a609(0x11c)]<0xd&&(_0x5240ab[_0xd4a609(0x2bb)]=_0x5240ab[_0xd4a609(0x2bb)]*0x3e8);let _0xf44a4f=_0x5240ab[_0xd4a609(0x70f)],_0x5791af=(0x0,w[_0xd4a609(0x161)])(_0xf44a4f),_0x2e32ac=(0x0,w[_0xd4a609(0x3ae)])(_0x5791af),{messageContent:_0x20fcfd,message_normalized:_0x49f1d2}=this[_0xd4a609(0x5ca)](_0x5791af,_0x2e32ac,_0x3db991);if(_0x2e32ac==='protocolMessage'&&_0x20fcfd?.[_0xd4a609(0x60c)]&&(_0x2e32ac=_0xd4a609(0x60c)),_0x2e32ac===_0xd4a609(0x82a)&&_0x5240ab[_0xd4a609(0x1e4)]['fromMe'])continue;let _0xf968db,_0x5e60d2=_0x5240ab['key'][_0xd4a609(0x6d9)][_0xd4a609(0x14b)](_0xd4a609(0x2a5));if(_0x5240ab['key'][_0xd4a609(0x562)])_0xf968db=this[_0xd4a609(0x3d0)][_0xd4a609(0x2ae)];else{let _0x310ba7=_0x5e60d2?_0x5240ab[_0xd4a609(0x1e4)][_0xd4a609(0x87c)]:_0x5240ab[_0xd4a609(0x1e4)][_0xd4a609(0x6d9)];_0xf968db=(await this['findAndUpdateCacheContact'](_0x310ba7,_0x5240ab['pushName'],!0x1))[_0xd4a609(0x5cc)][_0xd4a609(0x3b4)];}let _0x35c02b={'_id':_0x5240ab['key']['id'],'key':_0x5240ab[_0xd4a609(0x1e4)],'isGroup':_0x5e60d2,'profilePictureUrl':_0xf968db,'pushName':_0x5240ab[_0xd4a609(0x7b2)],'message':_0x5791af,'messageType':_0x2e32ac,'message_normalized':{'key':_0x5240ab[_0xd4a609(0x1e4)],'pushName':_0x5240ab[_0xd4a609(0x7b2)],'messageTimestamp':_0x5240ab[_0xd4a609(0x2bb)],'source':(0x0,w[_0xd4a609(0x522)])(_0x5240ab['key']['id']),..._0x49f1d2},'messageTimestamp':_0x5240ab[_0xd4a609(0x2bb)],'owner':this['instance'][_0xd4a609(0x4ae)],'source':(0x0,w['getDevice'])(_0x5240ab[_0xd4a609(0x1e4)]['id']),'expiration':_0x20fcfd?.[_0xd4a609(0x3e8)]?.['expiration']||0x0};if(!_0x20fcfd){if(_0x2e32ac===_0xd4a609(0x21b))return;this[_0xd4a609(0x478)][_0xd4a609(0x3c6)](_0xd4a609(0x643)),this['logger'][_0xd4a609(0x3c6)](_0x35c02b);}if(_0x49f1d2[_0xd4a609(0x2c7)]===_0xd4a609(0x630)){console[_0xd4a609(0x3c6)](_0xd4a609(0x7ac)),await this[_0xd4a609(0x72d)](_0x5240ab);continue;}this[_0xd4a609(0x478)][_0xd4a609(0x547)](this[_0xd4a609(0x1c7)]+'\x20('+this['instance']['wuid']+_0xd4a609(0x71a)+(_0x35c02b['key']?.[_0xd4a609(0x562)]?'enviado\x20para':_0xd4a609(0x560))+'\x20['+_0x35c02b[_0xd4a609(0x1e4)]?.[_0xd4a609(0x6d9)]['replace'](_0xd4a609(0x10f),'')+_0xd4a609(0x239)+_0x35c02b[_0xd4a609(0x60e)]+')'),_0x35c02b['message_normalized']?.[_0xd4a609(0x2c7)]&&this[_0xd4a609(0x478)][_0xd4a609(0x547)](_0x5240ab[_0xd4a609(0x1e4)]['id']+':\x20'+_0x35c02b[_0xd4a609(0x6cf)]?.['text']),await this['repository']['message']['insert']([_0x35c02b],this[_0xd4a609(0x3d0)][_0xd4a609(0x4ae)]),this[_0xd4a609(0x2dd)](_0xd4a609(0x1e0),_0x35c02b),F(this[_0xd4a609(0x1c7)],_0xd4a609(0x30c),{'message':_0x35c02b}),_0x5240ab[_0xd4a609(0x1e4)]['remoteJid']!==_0xd4a609(0x498)&&await this['updateChatWithMessage'](_0x1cf182,_0x35c02b,_0xd4a609(0x22f));}},'messages.update':async(_0x6b0fb8,_0x2ff39d)=>{const _0x10a5d1=_0x5cf35f;let _0x36faa4={0x0:_0x10a5d1(0x2ab),0x1:'PENDING',0x2:'SERVER_ACK',0x3:_0x10a5d1(0x33e),0x4:_0x10a5d1(0x69f),0x5:_0x10a5d1(0x132)};for await(let {key:_0x1734d0,update:_0x3a9d0c}of _0x6b0fb8){if(this[_0x10a5d1(0x288)]?.[_0x10a5d1(0x74b)]&&_0x1734d0['remoteJid'][_0x10a5d1(0x1ec)](_0x10a5d1(0x2a5))){this[_0x10a5d1(0x478)][_0x10a5d1(0x4e1)](this['instanceName']+'\x20('+this['instance'][_0x10a5d1(0x4ae)]+_0x10a5d1(0x752));return;}if(_0x1734d0[_0x10a5d1(0x6d9)]!==_0x10a5d1(0x498)){let _0x4fe268=Date[_0x10a5d1(0x6aa)](),_0xfae32;_0x3a9d0c[_0x10a5d1(0x70f)]===null&&_0x3a9d0c[_0x10a5d1(0x204)]===void 0x0?_0xfae32=_0x10a5d1(0x558):_0xfae32=_0x36faa4[_0x3a9d0c[_0x10a5d1(0x204)]];let _0x5650cc=_0x1734d0['remoteJid']['replace'](/:\d{1,2}@/g,'@'),_0x53a296={..._0x1734d0,'remoteJid':_0x5650cc,'status':_0xfae32,'datetime':_0x4fe268,'owner':this[_0x10a5d1(0x3d0)][_0x10a5d1(0x4ae)]};this[_0x10a5d1(0x2dd)](_0x10a5d1(0x45a),_0x53a296),await this[_0x10a5d1(0x4b3)](_0x1734d0,_0x53a296);}}},'labels.association':async({type:_0x362ff5,association:_0x47e720})=>{const _0xd59baf=_0x5cf35f;if(_0x47e720['type']===_0xd59baf(0x663)){let _0x471f5b,_0x5d663e=0x0;for(;!_0x471f5b&&_0x5d663e<this[_0xd59baf(0x820)];)_0x471f5b=await this[_0xd59baf(0x67f)][_0xd59baf(0x52b)][_0xd59baf(0x36a)]({'where':{'_id':_0x47e720[_0xd59baf(0x834)]}},this[_0xd59baf(0x3d0)][_0xd59baf(0x4ae)]),_0x471f5b||(_0x5d663e++,this[_0xd59baf(0x478)][_0xd59baf(0x743)](this['instanceName']+'\x20('+this[_0xd59baf(0x3d0)][_0xd59baf(0x4ae)]+_0xd59baf(0x137)+_0x47e720['chatId']+_0xd59baf(0x2fc)+this['delayChatLabel_RETRY_DELAY_MS']+_0xd59baf(0x66e)+_0x5d663e+'/'+this[_0xd59baf(0x820)]+')'),await this[_0xd59baf(0x721)](this['delayChatLabel_RETRY_DELAY_MS']));if(!_0x471f5b){this[_0xd59baf(0x478)]['error'](_0xd59baf(0x2f9)+_0x47e720[_0xd59baf(0x834)]+_0xd59baf(0x5a6)+this[_0xd59baf(0x820)]+_0xd59baf(0x5b2));return;}switch(_0x362ff5){case _0xd59baf(0x199):console[_0xd59baf(0x547)](_0x47e720),await this[_0xd59baf(0x67f)][_0xd59baf(0x52b)][_0xd59baf(0x104)]({'where':{'_id':_0x47e720[_0xd59baf(0x834)]}},{'leadInfo.etiquetas':_0x47e720[_0xd59baf(0x644)]},this[_0xd59baf(0x3d0)]['wuid'],void 0x0,_0xd59baf(0x59a));break;case'remove':console[_0xd59baf(0x547)](_0x47e720),await this['repository'][_0xd59baf(0x52b)]['updateOne']({'where':{'_id':_0x47e720[_0xd59baf(0x834)]}},{'leadInfo.etiquetas':_0x47e720[_0xd59baf(0x644)]},this['instance'][_0xd59baf(0x4ae)],void 0x0,_0xd59baf(0x17e));break;default:this[_0xd59baf(0x478)]['error'](_0xd59baf(0x88f)+_0x362ff5+']');}}},'labels.edit':async _0x3fac5a=>{const _0x11f685=_0x5cf35f;if(!_0x3fac5a||!_0x3fac5a['id']){this[_0x11f685(0x478)][_0x11f685(0x3c6)]('Rótulo\x20inválido\x20ou\x20sem\x20ID.');return;}if(!_0x3fac5a[_0x11f685(0x592)]){let _0xe78e89=[_0x11f685(0x1bd),_0x11f685(0x410),_0x11f685(0x227),_0x11f685(0x264),_0x11f685(0x153),'#56ccb4','#fe9dfe','#d3a91f','#6f7bcf','#d8e651','#01d0e2','#ffc5c7',_0x11f685(0x544),_0x11f685(0x549),_0x11f685(0x5e8),'#83e421','#ffae04',_0x11f685(0x4fd),'#9ba6ff',_0x11f685(0x6f8)],_0x31b570;typeof _0x3fac5a[_0x11f685(0x51b)]==_0x11f685(0x162)&&_0x3fac5a[_0x11f685(0x51b)]>=0x0&&_0x3fac5a[_0x11f685(0x51b)]<_0xe78e89[_0x11f685(0x11c)]?_0x31b570=_0xe78e89[_0x3fac5a[_0x11f685(0x51b)]]:(this[_0x11f685(0x478)][_0x11f685(0x3c6)](_0x11f685(0x3ce)+_0x3fac5a[_0x11f685(0x51b)]),_0x31b570=_0x11f685(0x218));let _0x13c984={'_id':_0x3fac5a['id'],'colorHex':_0x31b570,'color':_0x3fac5a?.[_0x11f685(0x51b)],'name':_0x3fac5a?.[_0x11f685(0x75b)],'owner':this[_0x11f685(0x3d0)][_0x11f685(0x4ae)]};await this[_0x11f685(0x67f)][_0x11f685(0x1d3)][_0x11f685(0x104)]({'where':{'_id':_0x3fac5a['id']}},_0x13c984,this[_0x11f685(0x3d0)]['wuid']),this[_0x11f685(0x478)][_0x11f685(0x743)](this[_0x11f685(0x1c7)]+'\x20('+this[_0x11f685(0x3d0)][_0x11f685(0x4ae)]+_0x11f685(0x7a3)+_0x3fac5a);}_0x3fac5a['deleted']&&(await this[_0x11f685(0x67f)][_0x11f685(0x1d3)][_0x11f685(0x7fb)]({'where':{'_id':_0x3fac5a['id']}},this[_0x11f685(0x3d0)][_0x11f685(0x4ae)]),this[_0x11f685(0x478)][_0x11f685(0x743)](_0x11f685(0x740)+_0x3fac5a['id']));}},this[_0x5cf35f(0x3e2)]={'groups.upsert':async _0x211897=>{const _0x35fee8=_0x5cf35f;this['localWebhook']?.[_0x35fee8(0x74b)]||this[_0x35fee8(0x2dd)](_0x35fee8(0x627),_0x211897);for(let _0x31823d of _0x211897)await this[_0x35fee8(0x6e6)](_0x31823d);},'groups.update':async _0x261e93=>{const _0x5da959=_0x5cf35f;this['localWebhook']?.[_0x5da959(0x74b)]||this[_0x5da959(0x2dd)](_0x5da959(0x6a0),_0x261e93);for(let _0xee8f60 of _0x261e93)await this[_0x5da959(0x6e6)](_0xee8f60);},'group-participants.update':async _0x5aa041=>{const _0x258ffd=_0x5cf35f;this[_0x258ffd(0x288)]?.[_0x258ffd(0x74b)]||this[_0x258ffd(0x2dd)](_0x258ffd(0x50e),_0x5aa041),await this[_0x258ffd(0x4e2)](_0x5aa041);}},this[_0x5cf35f(0x820)]=0x5,this['delayChatLabel_RETRY_DELAY_MS']=0x1388,this[_0x5cf35f(0x890)]=0x0,this[_0x5cf35f(0x490)]=async _0x25db18=>{const _0x582c13=_0x5cf35f;if(_0x25db18[_0x582c13(0x70f)]?.['pollUpdateMessage']){let _0x39f30c=await this['getMessage'](_0x25db18[_0x582c13(0x70f)]['pollUpdateMessage'][_0x582c13(0x7cd)],!0x0);if(_0x39f30c){let _0x1520c9=_0x39f30c[_0x582c13(0x1e4)][_0x582c13(0x562)]?this['instance'][_0x582c13(0x4ae)]+_0x582c13(0x10f):_0x39f30c[_0x582c13(0x1e4)][_0x582c13(0x87c)]||_0x39f30c['key'][_0x582c13(0x6d9)],_0x33b603=_0x39f30c['key']['id'],_0x3d0433=_0x39f30c[_0x582c13(0x70f)],_0x39d078=Buffer[_0x582c13(0x6c7)](_0x3d0433[_0x582c13(0x367)][_0x582c13(0x43f)][_0x582c13(0x885)](_0x582c13(0x7e3)),_0x582c13(0x7e3)),_0x5d0f62=(0x0,w[_0x582c13(0x6e4)])(_0x25db18[_0x582c13(0x70f)][_0x582c13(0x58d)][_0x582c13(0x1a1)],{'pollCreatorJid':_0x1520c9,'pollMsgId':_0x33b603,'pollEncKey':_0x39d078,'voterJid':_0x25db18['key']['fromMe']?this[_0x582c13(0x3d0)]['wuid']+_0x582c13(0x10f):_0x25db18[_0x582c13(0x1e4)]['remoteJid']['endsWith'](_0x582c13(0x477))?_0x25db18[_0x582c13(0x1e4)]['participant']:_0x25db18[_0x582c13(0x1e4)]['remoteJid']}),_0xea7c68=[],_0x11b1d9=_0x5d0f62[_0x582c13(0x25a)][_0x582c13(0x733)](_0xd8f653=>Buffer[_0x582c13(0x6c7)](_0xd8f653)[_0x582c13(0x885)](_0x582c13(0x7e3)));for(let {optionName:_0x1420e9}of _0x3d0433[_0x582c13(0x570)]?.['options']||_0x3d0433['pollCreationMessageV3']?.[_0x582c13(0x1e9)]||_0x3d0433[_0x582c13(0x21a)]?.['options'])_0x11b1d9['indexOf']((0x0,w[_0x582c13(0x3bb)])(Buffer[_0x582c13(0x6c7)](_0x1420e9))[_0x582c13(0x885)](_0x582c13(0x7e3)))>-0x1&&_0xea7c68[_0x582c13(0x7b9)](_0x1420e9);return _0xea7c68;}}return null;},this[_0x5cf35f(0x5ca)]=(_0xc2b876,_0x281d48,_0x5c6c0a)=>{const _0x415768=_0x5cf35f;try{let _0x16e16d=_0xc2b876?(0x0,w[_0x415768(0x456)])(_0xc2b876)[_0x281d48]:void 0x0,_0x5d7da7={},_0x4119ac=null,_0x14f580=null,_0x55f816=null,_0xd59cf2=null;_0x281d48===_0x415768(0x225)&&_0x16e16d?.[_0x415768(0x60c)]&&(_0x281d48=(0x0,w[_0x415768(0x3ae)])(_0x16e16d[_0x415768(0x60c)]),_0x4119ac=_0xc2b876['protocolMessage'][_0x415768(0x1e4)]['id'],_0x16e16d=_0xc2b876[_0x415768(0x225)][_0x415768(0x60c)][_0x281d48]),_0xc2b876[_0x281d48]?.[_0x415768(0x3e8)]?.[_0x415768(0x12d)]&&_0xc2b876[_0x281d48]?.[_0x415768(0x3e8)]?.[_0x415768(0x754)]&&(_0x14f580=_0xc2b876[_0x281d48][_0x415768(0x3e8)][_0x415768(0x12d)]),_0xc2b876[_0x415768(0x6d2)]&&(_0x55f816=_0xc2b876[_0x415768(0x6d2)][_0x415768(0x1e4)]['id']);let _0x2d69b9;if(_0x16e16d&&typeof _0x16e16d=='object'&&_0x415768(0x7cd)in _0x16e16d&&({pollCreationMessageKey:_0x2d69b9}=_0x16e16d),_0x281d48===_0x415768(0x570)||_0x281d48==='pollCreationMessageV2'||_0x281d48===_0x415768(0x13c)){let _0x2a3a5c=_0x16e16d[_0x415768(0x1e9)][_0x415768(0x733)](_0x5a0cdf=>_0x5a0cdf[_0x415768(0x112)])['join']('|');_0x5d7da7[_0x415768(0x646)]=_0x2a3a5c;}if(_0x281d48===_0x415768(0x82a)){let _0x2ad509=_0x16e16d[_0x415768(0x799)]['buttons'][_0x415768(0x733)](_0x2e7a1f=>JSON[_0x415768(0x675)](_0x2e7a1f[_0x415768(0x53e)])[_0x415768(0x668)])[_0x415768(0x149)]('|');_0x5d7da7['convertedOptions']=_0x2ad509;}_0x281d48===_0x415768(0x170)&&(_0x5d7da7[_0x415768(0x157)]=_0x16e16d?.['singleSelectReply']?.[_0x415768(0x22e)]);let _0x31340f='';if(_0x16e16d&&(_0x31340f+=_0x16e16d[_0x415768(0x75b)]?_0x16e16d['name']:'',_0x31340f+=_0x16e16d[_0x415768(0x444)]?'\x20'+_0x16e16d[_0x415768(0x444)]:'',_0x31340f+=_0x16e16d['conversation']?'\x20'+_0x16e16d[_0x415768(0x21b)]:'',_0x31340f+=_0x16e16d[_0x415768(0x871)]?'\x20'+_0x16e16d[_0x415768(0x871)]:'',_0x281d48!==_0x415768(0x23f)&&(_0x31340f+=_0x16e16d[_0x415768(0x46e)]?.[_0x415768(0x2c7)]?'\x20'+_0x16e16d['body'][_0x415768(0x2c7)]:''),_0x31340f+=_0x16e16d?.[_0x415768(0x7ef)]?.[_0x415768(0x2c7)]?'\x20'+_0x16e16d?.['footer']?.[_0x415768(0x2c7)]:''),_0x281d48===_0x415768(0x36c)){_0x31340f=(_0x16e16d[_0x415768(0x486)]||'')+'\x0a'+(_0x16e16d['description']||'')+'\x0a'+(_0x16e16d[_0x415768(0x75a)]||'');let _0x707e3d=this[_0x415768(0x393)](_0x16e16d[_0x415768(0x608)]);_0x5d7da7[_0x415768(0x646)]=_0x707e3d;}if(_0x281d48===_0x415768(0x170)&&(_0x5c6c0a=_0x16e16d[_0x415768(0x486)],_0xd59cf2=_0x16e16d?.[_0x415768(0x1ab)]?.['selectedRowId']),_0x281d48===_0x415768(0x23f)){let _0x16080c=_0x16e16d?.['nativeFlowResponseMessage'];_0x16080c&&_0x16080c[_0x415768(0x75b)]===_0x415768(0x5e1)&&(_0xd59cf2=JSON[_0x415768(0x675)](_0x16080c[_0x415768(0x561)])['id']),_0x5c6c0a=_0x16e16d?.[_0x415768(0x46e)]?.[_0x415768(0x2c7)];}if(_0x281d48===_0x415768(0x431)&&(_0x5c6c0a=_0x16e16d?.['selectedDisplayText'],_0xd59cf2=_0x16e16d?.[_0x415768(0x20a)]),_0x281d48===_0x415768(0x245)&&(_0x5c6c0a=_0x16e16d?.[_0x415768(0x16e)],_0xd59cf2=_0x16e16d?.[_0x415768(0x1cc)]),_0x16e16d&&_0x16e16d[_0x415768(0x467)]){let _0x44a21f=this[_0x415768(0x366)](JSON[_0x415768(0x238)](_0x16e16d[_0x415768(0x467)],null,0x2));_0x31340f=_0x31340f+'\x0a'+_0x44a21f;}if(_0x16e16d){let {selectedButtonId:_0x170cb4,nativeFlowResponseMessage:_0x4b8421,selectedId:_0x10105f,selectedDisplayText:_0x5388c0,selectedIndex:_0x5d3a0a,body:_0x467378,nativeFlowMessage:_0x3e8db9,singleSelectReply:_0x3fce0c,sections:_0xcf4c3d,listType:_0x147f7d,displayName:_0x181fbc,vcard:_0x11ec06,contactVcard:_0x53d0c7,name:_0x19e475,caption:_0x181198,conversation:_0x2e9d9a,pollCreationMessageKey:_0x3c672d,footerText:_0x3e2e45,contentText:_0x593e98,pageCount:_0x50f4ba,headerType:_0xca9710,isAvatar:_0x543564,isAnimated:_0x409d99,fallbackLc:_0x6e7af0,fallbackLg:_0x4e2be6,namespace:_0x41b0f4,elementName:_0xaf6e4b,localizableParams:_0x47c9c4,viewOnce:_0x5b8a54,height:_0x4868f9,width:_0x5722df,key:_0x3ff3af,firstScanLength:_0x4b5d2a,firstScanSidecar:_0x149751,gifPlayback:_0x53dbd1,gifAttribution:_0x47e8c0,midQualityFileSha256:_0x5d8184,scansSidecar:_0x4211ec,streamingSidecar:_0x515a0d,thumbnailHeight:_0x426306,thumbnailWidth:_0x5c4bea,thumbnailEncSha256:_0x5b9881,thumbnailDirectPath:_0x23c249,canonicalUrl:_0x42dd37,matchedText:_0x36a482,previewType:_0x4f28fe,thumbnailSha256:_0x210deb,deviceListMetadataVersion:_0x1b5347,inviteLinkGroupTypeV2:_0x26d3c4,interactiveAnnotations:_0x153cdc,scanLengths:_0x47ac40,jpegThumbnail:_0x59d688,url:_0x4febca,mediaKeyTimestamp:_0x10b311,waveform:_0x57d12f,stickerSentTs:_0x53b843,firstFrameLength:_0x570b3b,fileEncSha256:_0x3cb887,contextInfo:_0x1f6a16,firstFrameSidecar:_0x5cbf76,directPath:_0x4ae257,fileSha256:_0x4daf8f,mediaKey:_0x2ce1b4,senderTimestampMs:_0x310d7b,..._0x3b5734}=_0x16e16d;(_0x281d48===_0x415768(0x36c)||_0x281d48===_0x415768(0x170))&&(delete _0x3b5734[_0x415768(0x486)],delete _0x3b5734[_0x415768(0x2c0)]),typeof _0x16e16d=='string'?_0x5d7da7={'text':_0x16e16d,'type':_0x281d48||'conversation',..._0x4119ac&&{'edited':_0x4119ac},..._0x14f580&&{'quoted':_0x14f580},..._0x55f816&&{'reaction':_0x55f816}}:_0x5d7da7={'text':_0x31340f,..._0x3b5734,..._0x281d48===_0x415768(0x58d)?{'poll_id':_0x16e16d['pollCreationMessageKey']['id'],'quoted':_0x16e16d[_0x415768(0x7cd)]['id'],'vote':_0x5c6c0a}:{},..._0x281d48===_0x415768(0x170)?{'buttonOrList_id':_0xd59cf2,'vote':_0x5c6c0a}:{},..._0x281d48==='interactiveResponseMessage'?{'buttonOrList_id':_0xd59cf2,'vote':_0x5c6c0a}:{},..._0x281d48===_0x415768(0x431)?{'buttonOrList_id':_0xd59cf2,'vote':_0x5c6c0a}:{},..._0x281d48===_0x415768(0x245)?{'buttonOrList_id':_0xd59cf2,'vote':_0x5c6c0a}:{},'type':_0x281d48,..._0x4119ac&&{'edited':_0x4119ac},..._0x14f580&&{'quoted':_0x14f580},..._0x55f816&&{'reaction':_0x55f816},...(_0x281d48===_0x415768(0x570)||_0x281d48===_0x415768(0x21a)||_0x281d48===_0x415768(0x13c)||_0x281d48===_0x415768(0x36c)||_0x281d48===_0x415768(0x82a))&&{'convertedOptions':_0x5d7da7[_0x415768(0x646)]}};}return{'messageType':_0x281d48,'messageContent':_0x16e16d,'message_normalized':_0x5d7da7};}catch(_0x4cb5f6){return this[_0x415768(0x478)][_0x415768(0x3c6)]('Erro\x20ao\x20normalizar\x20a\x20mensagem:'+_0x4cb5f6),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this['pendingMessages']=[],(this[_0x5cf35f(0x2a9)](),this[_0x5cf35f(0x557)](),this['instance']['HistoryProcessed']=!0x0,this[_0x5cf35f(0x3d0)][_0x5cf35f(0x1bb)]={'count':0x0},this[_0x5cf35f(0x3d0)][_0x5cf35f(0x69e)]={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}['addToProcessedMessages'](_0x69608a,_0x8ed7a5){const _0x3b6fd6=a0_0x3cfc7d;this[_0x3b6fd6(0x1dd)][_0x69608a]||(this[_0x3b6fd6(0x1dd)][_0x69608a]=new Set()),this[_0x3b6fd6(0x1dd)][_0x69608a][_0x3b6fd6(0x199)](_0x8ed7a5),setTimeout(()=>this['processedMessagesCache'][_0x69608a]['delete'](_0x8ed7a5),0x2710);}[a0_0x3cfc7d(0x42b)](_0x41d7a7,_0x28c0fd){const _0x3447c2=a0_0x3cfc7d;return this[_0x3447c2(0x1dd)][_0x41d7a7]?.[_0x3447c2(0x114)](_0x28c0fd)??!0x1;}set[a0_0x3cfc7d(0x1c7)](_0x16f8ba){const _0x34e78a=a0_0x3cfc7d;if(!_0x16f8ba){this[_0x34e78a(0x3d0)][_0x34e78a(0x75b)]=(0x0,Ti['v4'])();return;}this['instance'][_0x34e78a(0x75b)]=_0x16f8ba,this['sendDataWebhook'](_0x34e78a(0x186),{'instance':this[_0x34e78a(0x3d0)]['name'],'status':'created'});}get[a0_0x3cfc7d(0x1c7)](){const _0x38a974=a0_0x3cfc7d;return this[_0x38a974(0x3d0)][_0x38a974(0x75b)];}get[a0_0x3cfc7d(0x4ae)](){const _0x5e75e4=a0_0x3cfc7d;return this[_0x5e75e4(0x3d0)][_0x5e75e4(0x4ae)];}async[a0_0x3cfc7d(0x5fc)](){const _0x264387=a0_0x3cfc7d;let _0x2c5d79=this[_0x264387(0x495)][_0x264387(0x145)]?.[_0x264387(0x75b)]??this[_0x264387(0x495)][_0x264387(0x145)]?.[_0x264387(0x1b3)];if(!_0x2c5d79){if(this[_0x264387(0x497)][_0x264387(0x840)](_0x264387(0x621))[_0x264387(0x78c)]){let _0x3d8ed2=await T[_0x264387(0x81d)]()['db'](this[_0x264387(0x497)][_0x264387(0x840)](_0x264387(0x621))['CONNECTION'][_0x264387(0x1bc)]+'-instances')[_0x264387(0x86d)](this[_0x264387(0x1c7)])[_0x264387(0x36a)]({'_id':_0x264387(0x1f8)});if(_0x3d8ed2){let _0x39d5a3=JSON[_0x264387(0x675)](JSON[_0x264387(0x238)](_0x3d8ed2),w[_0x264387(0x2a1)][_0x264387(0x10c)]);_0x2c5d79=_0x39d5a3['me']?.['name']||_0x39d5a3['me']?.[_0x264387(0x1b3)];}}else{if((0x0,Fe['existsSync'])((0x0,j[_0x264387(0x149)])(be,this[_0x264387(0x1c7)],'creds.json'))){let _0x279413=JSON[_0x264387(0x675)]((0x0,Fe['readFileSync'])((0x0,j[_0x264387(0x149)])(be,this[_0x264387(0x1c7)],'creds.json'),{'encoding':_0x264387(0x85b)}));_0x2c5d79=_0x279413['me']?.[_0x264387(0x75b)]||_0x279413['me']?.['verifiedName'];}}}return _0x2c5d79;}get[a0_0x3cfc7d(0x2ae)](){const _0x1cb3be=a0_0x3cfc7d;return this['instance'][_0x1cb3be(0x2ae)];}async[a0_0x3cfc7d(0x1ce)](){const _0x4a2557=a0_0x3cfc7d;let _0x4069f4=this[_0x4a2557(0x3d0)][_0x4a2557(0x4ae)]+_0x4a2557(0x10f);try{await this[_0x4a2557(0x495)][_0x4a2557(0x5c6)](_0x4069f4)?this[_0x4a2557(0x3d0)][_0x4a2557(0x4c3)]=!0x0:this[_0x4a2557(0x3d0)][_0x4a2557(0x4c3)]=!0x1;}catch{this[_0x4a2557(0x3d0)][_0x4a2557(0x4c3)]=!0x1;}return this['logger'][_0x4a2557(0x743)](this[_0x4a2557(0x1c7)]+'\x20('+this[_0x4a2557(0x3d0)][_0x4a2557(0x4ae)]+_0x4a2557(0x772)+this['instance'][_0x4a2557(0x4c3)]),this['instance'][_0x4a2557(0x4c3)];}get[a0_0x3cfc7d(0x862)](){const _0x2c307a=a0_0x3cfc7d;return this['instance'][_0x2c307a(0x415)]=!0x1,this['instance']['qrcode']?.[_0x2c307a(0x693)]?{'pairingCode':this[_0x2c307a(0x3d0)][_0x2c307a(0x1bb)]?.[_0x2c307a(0x693)]}:{'code':this[_0x2c307a(0x3d0)][_0x2c307a(0x1bb)]?.[_0x2c307a(0x169)],'base64':this[_0x2c307a(0x3d0)][_0x2c307a(0x1bb)]?.[_0x2c307a(0x622)]};}async['loadWebhook'](){const _0x6d8727=a0_0x3cfc7d;let _0x571037=await this[_0x6d8727(0x67f)][_0x6d8727(0x4af)][_0x6d8727(0x1c4)](this[_0x6d8727(0x1c7)]);this['localWebhook'][_0x6d8727(0x855)]=_0x571037?.['url'],this[_0x6d8727(0x288)][_0x6d8727(0x119)]=_0x571037?.[_0x6d8727(0x119)],this[_0x6d8727(0x288)][_0x6d8727(0x3fc)]=_0x571037?.['local_map'],this[_0x6d8727(0x288)][_0x6d8727(0x761)]=_0x571037?.['STATUS_INSTANCE'],this['localWebhook'][_0x6d8727(0x150)]=_0x571037?.[_0x6d8727(0x150)],this[_0x6d8727(0x288)][_0x6d8727(0x6b3)]=_0x571037?.['SEND_MESSAGE'],this[_0x6d8727(0x288)]['MESSAGES_UPSERT']=_0x571037?.[_0x6d8727(0x22f)],this['localWebhook'][_0x6d8727(0x333)]=_0x571037?.[_0x6d8727(0x333)],this['localWebhook'][_0x6d8727(0x847)]=_0x571037?.[_0x6d8727(0x847)],this[_0x6d8727(0x288)]['GROUPS_UPDATE']=_0x571037?.['GROUPS_UPDATE'],this[_0x6d8727(0x288)][_0x6d8727(0x697)]=_0x571037?.[_0x6d8727(0x697)],this['localWebhook'][_0x6d8727(0x599)]=_0x571037?.['CHATS_SET'],this[_0x6d8727(0x288)]['CHATS_UPSERT']=_0x571037?.[_0x6d8727(0x58a)],this[_0x6d8727(0x288)][_0x6d8727(0x2d4)]=_0x571037?.[_0x6d8727(0x2d4)],this[_0x6d8727(0x288)][_0x6d8727(0x1fe)]=_0x571037?.[_0x6d8727(0x1fe)],this['localWebhook'][_0x6d8727(0x328)]=_0x571037?.[_0x6d8727(0x328)],this['localWebhook'][_0x6d8727(0x50a)]=_0x571037?.[_0x6d8727(0x50a)],this[_0x6d8727(0x288)][_0x6d8727(0x753)]=_0x571037?.[_0x6d8727(0x753)],this[_0x6d8727(0x288)][_0x6d8727(0x24a)]=_0x571037?.['PRESENCE_UPDATE'],this[_0x6d8727(0x288)][_0x6d8727(0x3d6)]=_0x571037?.[_0x6d8727(0x3d6)],this['localWebhook']['CONNECTION_UPDATE']=_0x571037?.['CONNECTION_UPDATE'],this[_0x6d8727(0x288)]['groups_ignore']=_0x571037?.[_0x6d8727(0x74b)];}async[a0_0x3cfc7d(0x13f)](_0x1c9d48){const _0x1596cf=a0_0x3cfc7d;let _0x1f7a7c=['_id',_0x1596cf(0x855),_0x1596cf(0x119),'local_map','STATUS_INSTANCE',_0x1596cf(0x150),_0x1596cf(0x333),_0x1596cf(0x22f),'SEND_MESSAGE',_0x1596cf(0x847),_0x1596cf(0x3eb),_0x1596cf(0x697),_0x1596cf(0x599),_0x1596cf(0x58a),'CHATS_UPDATE',_0x1596cf(0x1fe),_0x1596cf(0x328),_0x1596cf(0x50a),_0x1596cf(0x753),_0x1596cf(0x24a),_0x1596cf(0x3d6),'CONNECTION_UPDATE',_0x1596cf(0x74b)],_0x58065a={};return _0x1f7a7c[_0x1596cf(0x455)](_0x56a5ca=>{_0x1c9d48[_0x56a5ca]!==void 0x0&&(_0x58065a[_0x56a5ca]=_0x1c9d48[_0x56a5ca]);}),_0x58065a[_0x1596cf(0x855)]&&(_0x58065a[_0x1596cf(0x855)]=_0x58065a[_0x1596cf(0x855)][_0x1596cf(0x1d2)]()),await this[_0x1596cf(0x67f)][_0x1596cf(0x4af)][_0x1596cf(0x19b)](_0x58065a,this[_0x1596cf(0x1c7)]),Object[_0x1596cf(0x442)](this[_0x1596cf(0x288)],_0x58065a),await this[_0x1596cf(0x67f)][_0x1596cf(0x4af)][_0x1596cf(0x1c4)](this['instanceName']);}async['findWebhook'](){const _0x52b653=a0_0x3cfc7d;return await this[_0x52b653(0x67f)][_0x52b653(0x4af)][_0x52b653(0x1c4)](this[_0x52b653(0x1c7)]);}async['sendDataWebhook'](_0x1ab80d,_0x4834d8){const _0x4f0bbf=a0_0x3cfc7d;let _0x4a5419=_0x1ab80d['replace'](/[\.-]/gm,'_')[_0x4f0bbf(0x593)](),_0x41201e=this[_0x4f0bbf(0x288)][_0x4f0bbf(0x119)]&&(0x0,J[_0x4f0bbf(0x344)])(this['localWebhook'][_0x4f0bbf(0x855)])?this[_0x4f0bbf(0x288)][_0x4f0bbf(0x855)]+(this[_0x4f0bbf(0x288)]['local_map']?this[_0x4f0bbf(0x4a1)][_0x1ab80d]:''):null,_0x34b7b3=this[_0x4f0bbf(0x288)][_0x4a5419],_0x2cec78=de&&de[_0x4f0bbf(0x119)]&&(0x0,J[_0x4f0bbf(0x344)])(de[_0x4f0bbf(0x855)])?de['url']+(de['local_map']?this[_0x4f0bbf(0x4a1)][_0x1ab80d]:''):null,_0x5a9279=de?de[_0x4a5419]:null;if(_0x34b7b3&&_0x41201e)try{await K[_0x4f0bbf(0x879)][_0x4f0bbf(0x19b)]({'baseURL':_0x41201e})[_0x4f0bbf(0x3c3)]('',{'event':_0x1ab80d,'instance':this['instance']['name'],'apikey':this[_0x4f0bbf(0x3d0)][_0x4f0bbf(0x763)],'data':_0x4834d8}),this[_0x4f0bbf(0x478)][_0x4f0bbf(0x547)](this[_0x4f0bbf(0x1c7)]+'\x20('+this[_0x4f0bbf(0x3d0)][_0x4f0bbf(0x4ae)]+'):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0x1ab80d+':\x20'+_0x41201e);}catch{this[_0x4f0bbf(0x478)][_0x4f0bbf(0x3c6)](this[_0x4f0bbf(0x1c7)]+'\x20('+this[_0x4f0bbf(0x3d0)][_0x4f0bbf(0x4ae)]+_0x4f0bbf(0x572)+_0x1ab80d+':\x20'+_0x41201e);}if(_0x5a9279&&_0x2cec78)try{await K[_0x4f0bbf(0x879)][_0x4f0bbf(0x19b)]({'baseURL':_0x2cec78})['post']('',{'event':_0x1ab80d,'instance':this[_0x4f0bbf(0x3d0)][_0x4f0bbf(0x75b)],'apikey':this[_0x4f0bbf(0x3d0)][_0x4f0bbf(0x763)],'data':_0x4834d8}),this[_0x4f0bbf(0x478)][_0x4f0bbf(0x547)](this[_0x4f0bbf(0x1c7)]+'\x20('+this[_0x4f0bbf(0x3d0)][_0x4f0bbf(0x4ae)]+_0x4f0bbf(0x139)+_0x1ab80d+':\x20'+_0x2cec78);}catch{this[_0x4f0bbf(0x478)]['error'](this[_0x4f0bbf(0x1c7)]+'\x20('+this[_0x4f0bbf(0x3d0)]['wuid']+_0x4f0bbf(0x2bd)+_0x1ab80d+':\x20'+_0x2cec78);}}async[a0_0x3cfc7d(0x605)]({qr:_0x3349ae,connection:_0x1906ce,lastDisconnect:_0xc0c8ba}){const _0x53bb5e=a0_0x3cfc7d;if(_0x3349ae){if(this[_0x53bb5e(0x3d0)][_0x53bb5e(0x1bb)][_0x53bb5e(0x2f8)]===Lo)return this[_0x53bb5e(0x2dd)]('qrcode.updated',{'message':_0x53bb5e(0x876),'statusCode':w['DisconnectReason'][_0x53bb5e(0x214)]}),this[_0x53bb5e(0x36e)]={'state':'refused','statusReason':w['DisconnectReason'][_0x53bb5e(0x386)]},this[_0x53bb5e(0x2dd)](_0x53bb5e(0x430),{'instance':this['instance'][_0x53bb5e(0x75b)],...this[_0x53bb5e(0x36e)]}),this[_0x53bb5e(0x2dd)](_0x53bb5e(0x186),{'instance':this[_0x53bb5e(0x3d0)][_0x53bb5e(0x75b)],'status':'removed'}),this['repository'][_0x53bb5e(0x1cf)]['delete'](this[_0x53bb5e(0x3d0)][_0x53bb5e(0x75b)]),this['endSession']=!0x0,this[_0x53bb5e(0x282)][_0x53bb5e(0x1d5)](_0x53bb5e(0x85a),this['instance'][_0x53bb5e(0x75b)]);this[_0x53bb5e(0x3d0)][_0x53bb5e(0x1bb)][_0x53bb5e(0x2f8)]++;let _0x3a8aba={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x53bb5e(0x70b),'dark':'#000000'}};Ii[_0x53bb5e(0x879)]['toDataURL'](_0x3349ae,_0x3a8aba,(_0x45953f,_0x513a80)=>{const _0x37f347=_0x53bb5e;if(_0x45953f){this['logger'][_0x37f347(0x3c6)](this[_0x37f347(0x1c7)]+'\x20('+this[_0x37f347(0x3d0)][_0x37f347(0x4ae)]+_0x37f347(0x1ba)+(_0x45953f instanceof Error?_0x45953f['message']:JSON[_0x37f347(0x238)](_0x45953f,null,0x2)));return;}this[_0x37f347(0x3d0)][_0x37f347(0x1bb)]['base64']=_0x513a80,this[_0x37f347(0x3d0)][_0x37f347(0x1bb)][_0x37f347(0x169)]=_0x3349ae,!this[_0x37f347(0x2c6)]&&this['sendDataWebhook'](_0x37f347(0x580),{'qrcode':{'instance':this[_0x37f347(0x3d0)][_0x37f347(0x75b)],'pairingCode':this[_0x37f347(0x3d0)][_0x37f347(0x1bb)][_0x37f347(0x693)],'code':_0x3349ae,'base64':_0x513a80}});}),this[_0x53bb5e(0x2c6)]?this['instance']['qrcode'][_0x53bb5e(0x693)]||(await(0x0,w[_0x53bb5e(0x21c)])(0x7d0),this[_0x53bb5e(0x3d0)][_0x53bb5e(0x1bb)][_0x53bb5e(0x693)]=await this['client'][_0x53bb5e(0x494)](this['phoneNumber'])):this['instance'][_0x53bb5e(0x1bb)]['pairingCode']=null,_i['default'][_0x53bb5e(0x56f)](_0x3349ae,{'small':!0x0},_0x433157=>this[_0x53bb5e(0x478)][_0x53bb5e(0x547)](_0x53bb5e(0x4c1)+this[_0x53bb5e(0x3d0)][_0x53bb5e(0x75b)]+_0x53bb5e(0x406)+this[_0x53bb5e(0x3d0)]['qrcode'][_0x53bb5e(0x2f8)]+_0x53bb5e(0x5ce)+this[_0x53bb5e(0x3d0)][_0x53bb5e(0x1bb)][_0x53bb5e(0x693)]+_0x53bb5e(0x710)+_0x433157));}if(_0x1906ce&&(this[_0x53bb5e(0x36e)]={'state':_0x1906ce,'statusReason':_0xc0c8ba?.[_0x53bb5e(0x3c6)]?.[_0x53bb5e(0x18b)]?.[_0x53bb5e(0x3ba)]??0xc8},this[_0x53bb5e(0x2dd)](_0x53bb5e(0x430),{'instance':this[_0x53bb5e(0x3d0)]['name'],...this[_0x53bb5e(0x36e)]})),_0x1906ce===_0x53bb5e(0x35b)){if(_0xc0c8ba[_0x53bb5e(0x3c6)]?.[_0x53bb5e(0x18b)]?.['statusCode']!==w[_0x53bb5e(0x311)][_0x53bb5e(0x88c)]&&(this[_0x53bb5e(0x206)]<0x21||this['instance']['ScheduleMessage'][_0x53bb5e(0x6d5)])){this['reconnectAttempts']++,this[_0x53bb5e(0x68a)]['push'](Date['now']()),this['reconnectTimestamps']=this['reconnectTimestamps'][_0x53bb5e(0x56c)](_0x7e77f7=>Date['now']()-_0x7e77f7<this['RECONNECT_TIME_FRAME']);let _0x270607=this[_0x53bb5e(0x206)]<=0x1?0x0:Math[_0x53bb5e(0x7d2)](Math['pow'](0x2,this[_0x53bb5e(0x206)]-0x1)*0x3e8,0x493e0);console[_0x53bb5e(0x547)](this[_0x53bb5e(0x1c7)]+'\x20Tentativa\x20de\x20reconexão\x20'+this[_0x53bb5e(0x206)]+'.\x20Aguardando\x20'+_0x270607/0x3e8+_0x53bb5e(0x2e7)),await new Promise(_0x2559b6=>setTimeout(_0x2559b6,_0x270607)),console[_0x53bb5e(0x547)](_0x53bb5e(0x327)),await this[_0x53bb5e(0x3db)]();}else{this[_0x53bb5e(0x2dd)]('status.instance',{'instance':this[_0x53bb5e(0x3d0)][_0x53bb5e(0x75b)],'status':_0x53bb5e(0x5d2)}),this[_0x53bb5e(0x3d0)][_0x53bb5e(0x69e)]['isConnected']=!0x1,this[_0x53bb5e(0x67f)]['webhook'][_0x53bb5e(0x7fb)](this[_0x53bb5e(0x1c7)]),this['repository'][_0x53bb5e(0x1cf)][_0x53bb5e(0x19b)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x53bb5e(0x6aa)]()},this[_0x53bb5e(0x3d0)][_0x53bb5e(0x75b)]);try{this[_0x53bb5e(0x478)][_0x53bb5e(0x4e1)](this[_0x53bb5e(0x1c7)]+'\x20('+this[_0x53bb5e(0x3d0)][_0x53bb5e(0x4ae)]+_0x53bb5e(0x6f7));let _0x20a5dc=await this['repository']['message'][_0x53bb5e(0x18c)](this[_0x53bb5e(0x3d0)][_0x53bb5e(0x4ae)]);_0x20a5dc[_0x53bb5e(0x20f)]?this['logger'][_0x53bb5e(0x4e1)](this[_0x53bb5e(0x1c7)]+'\x20('+this[_0x53bb5e(0x3d0)][_0x53bb5e(0x4ae)]+_0x53bb5e(0x488)):this[_0x53bb5e(0x478)][_0x53bb5e(0x3c6)]('Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20'+_0x20a5dc[_0x53bb5e(0x3c6)]);}catch(_0x115206){this[_0x53bb5e(0x478)][_0x53bb5e(0x3c6)](_0x53bb5e(0x1a2)+_0x115206['message']);}this[_0x53bb5e(0x3d0)][_0x53bb5e(0x69e)][_0x53bb5e(0x6dd)]!==null&&(this['logger'][_0x53bb5e(0x4e1)](this[_0x53bb5e(0x1c7)]+'\x20('+this[_0x53bb5e(0x3d0)]['wuid']+_0x53bb5e(0x6ab)),clearInterval(this[_0x53bb5e(0x3d0)][_0x53bb5e(0x69e)]['delayMessage']),this[_0x53bb5e(0x3d0)][_0x53bb5e(0x69e)][_0x53bb5e(0x6dd)]=null),this[_0x53bb5e(0x478)][_0x53bb5e(0x4e1)](this[_0x53bb5e(0x1c7)]+'\x20('+this[_0x53bb5e(0x3d0)]['wuid']+_0x53bb5e(0x4fc)),this[_0x53bb5e(0x37f)]=null,this[_0x53bb5e(0x282)][_0x53bb5e(0x1d5)](_0x53bb5e(0x60a),this[_0x53bb5e(0x3d0)][_0x53bb5e(0x75b)],_0x53bb5e(0x809)),this[_0x53bb5e(0x495)]?.['ws']?.['close'](),this[_0x53bb5e(0x495)]['end'](new Error('Close\x20connection'));}}if(_0x1906ce===_0x53bb5e(0x19a)){this[_0x53bb5e(0x478)]['warn'](this['instanceName']+'\x20('+this[_0x53bb5e(0x3d0)][_0x53bb5e(0x4ae)]+_0x53bb5e(0x860)+this[_0x53bb5e(0x495)][_0x53bb5e(0x5ab)][_0x53bb5e(0x1f8)]?.[_0x53bb5e(0x812)]),this[_0x53bb5e(0x495)][_0x53bb5e(0x5ab)][_0x53bb5e(0x1f8)]?.[_0x53bb5e(0x812)]||(this[_0x53bb5e(0x478)]['warn'](this[_0x53bb5e(0x1c7)]+'\x20('+this[_0x53bb5e(0x3d0)][_0x53bb5e(0x4ae)]+_0x53bb5e(0x51d)),this[_0x53bb5e(0x495)]['ev'][_0x53bb5e(0x3d4)]()),this['resetReconnectionVariables'],this[_0x53bb5e(0x3d0)][_0x53bb5e(0x4ae)]=this[_0x53bb5e(0x495)][_0x53bb5e(0x145)]['id']['replace'](/:\d+/,'')['replace'](_0x53bb5e(0x10f),''),this[_0x53bb5e(0x3d0)][_0x53bb5e(0x2ae)]=(await this[_0x53bb5e(0x1e6)](this[_0x53bb5e(0x3d0)]['wuid']+_0x53bb5e(0x10f)))[_0x53bb5e(0x2ae)],this[_0x53bb5e(0x67f)][_0x53bb5e(0x1cf)]['create']({'online':!0x0,'owner':this['instance']['wuid'],'lastDisconnect':null},this[_0x53bb5e(0x3d0)][_0x53bb5e(0x75b)]);let _0x2e92a9='Número:\x20'+this['instance']['wuid'],_0x21ce6b=0x28,_0xbd758c=Math[_0x53bb5e(0x532)]((_0x21ce6b-_0x2e92a9[_0x53bb5e(0x11c)])/0x2),_0xb27c2d='\x20'[_0x53bb5e(0x26c)](_0xbd758c),_0x32d7f5=_0x53bb5e(0x25c),_0x183f83=_0x53bb5e(0x3bc)+this[_0x53bb5e(0x3d0)][_0x53bb5e(0x75b)],_0x94c21e=(''+_0xb27c2d+_0x2e92a9+_0xb27c2d)[_0x53bb5e(0x2c1)](_0x21ce6b,'\x20'),_0x6c2c66=(''+_0xb27c2d+_0x32d7f5+_0xb27c2d)[_0x53bb5e(0x2c1)](_0x21ce6b,'\x20'),_0x5c12cc=(''+_0xb27c2d+_0x183f83+_0xb27c2d)[_0x53bb5e(0x2c1)](_0x21ce6b,'\x20'),_0x2627ac=Math['max'](_0x94c21e[_0x53bb5e(0x11c)],_0x6c2c66[_0x53bb5e(0x11c)],_0x5c12cc[_0x53bb5e(0x11c)]),_0xc6a46c=_0x94c21e[_0x53bb5e(0x2c1)](_0x2627ac,'\x20'),_0x2bb65a=_0x6c2c66[_0x53bb5e(0x2c1)](_0x2627ac,'\x20'),_0x521686=_0x5c12cc[_0x53bb5e(0x2c1)](_0x2627ac,'\x20');this[_0x53bb5e(0x478)]['info']((_0x53bb5e(0x2a8)+'─'['repeat'](_0x2627ac)+_0x53bb5e(0x19d)+_0x2bb65a+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0x521686+_0x53bb5e(0x23d)+_0xc6a46c+_0x53bb5e(0x49a)+'─'[_0x53bb5e(0x26c)](_0x2627ac)+'┘')[_0x53bb5e(0x5e0)](/^ +/gm,'\x20\x20')),this[_0x53bb5e(0x7ce)](),this['instance']['ScheduleMessage'][_0x53bb5e(0x6d5)]=!0x0;}}['resetReconnectionVariables'](){const _0x3e6e42=a0_0x3cfc7d;this[_0x3e6e42(0x206)]=0x0,this['reconnectTimestamps']=[];}async['getMessage'](_0x53f855,_0x46a07f=!0x1){const _0x16ad4e=a0_0x3cfc7d;try{let _0x3ccb00=await this[_0x16ad4e(0x67f)][_0x16ad4e(0x70f)][_0x16ad4e(0x1c4)]({'where':{'_id':_0x53f855['id']}},this[_0x16ad4e(0x3d0)][_0x16ad4e(0x4ae)]);return _0x46a07f?_0x3ccb00[0x0]:_0x3ccb00[0x0][_0x16ad4e(0x70f)];}catch{return{'conversation':''};}}[a0_0x3cfc7d(0x2a9)](){const _0x50c1dc=a0_0x3cfc7d;let _0x4a546f=this['configService']['get'](_0x50c1dc(0x12c)),_0x15e6cb=this[_0x50c1dc(0x497)][_0x50c1dc(0x840)]('DATABASE');_0x4a546f?.['CLEANING_INTERVAL']&&!_0x15e6cb[_0x50c1dc(0x78c)]&&setInterval(()=>{const _0x19057e=_0x50c1dc;try{for(let [_0x4e22e2,_0x216fc7]of Object[_0x19057e(0x2b7)](_0x4a546f))_0x216fc7===!0x0&&(0x0,Ue['execSync'])('rm\x20-rf\x20'+(0x0,j['join'])(this[_0x19057e(0x531)],_0x4e22e2[_0x19057e(0x784)](),this[_0x19057e(0x3d0)][_0x19057e(0x4ae)])+_0x19057e(0x4ee));}catch{}},(_0x4a546f?.['CLEANING_INTERVAL']??0xe10)*0x3e8);}async[a0_0x3cfc7d(0x2e0)](){const _0x3eaada=a0_0x3cfc7d;let _0x1ef8e8=this['configService']['get']('DATABASE'),_0x5b652d=this['configService'][_0x3eaada(0x840)](_0x3eaada(0x335));return _0x5b652d?.[_0x3eaada(0x78c)]?await Os(_0x5b652d,this['instance']['name']):_0x1ef8e8[_0x3eaada(0x78c)]?await _s(this[_0x3eaada(0x3d0)][_0x3eaada(0x75b)]):await(0x0,w[_0x3eaada(0x155)])((0x0,j[_0x3eaada(0x149)])(be,this[_0x3eaada(0x3d0)][_0x3eaada(0x75b)]));}async[a0_0x3cfc7d(0x7ce)](){const _0x3a44aa=a0_0x3cfc7d;let _0x3155a5=()=>Math[_0x3a44aa(0x532)](Math[_0x3a44aa(0x6eb)]()*0x4e21)+0x7d0,_0x14afd8=async()=>{const _0x503e4f=_0x3a44aa;if(!this[_0x503e4f(0x3d0)]['ScheduleMessage'][_0x503e4f(0x6d5)]){this[_0x503e4f(0x478)][_0x503e4f(0x4e1)](this[_0x503e4f(0x1c7)]+'\x20('+this[_0x503e4f(0x3d0)][_0x503e4f(0x4ae)]+'):Desconectado,\x20parando\x20execução.'),this['isRunning']=!0x1;return;}if(this[_0x503e4f(0x3d0)][_0x503e4f(0x4ae)]&&this[_0x503e4f(0x37f)]&&this['instance'][_0x503e4f(0x69e)][_0x503e4f(0x6dd)]!==null&&this[_0x503e4f(0x3d0)][_0x503e4f(0x69e)][_0x503e4f(0x6dd)]!==void 0x0){let _0x278037=Math[_0x503e4f(0x331)](this[_0x503e4f(0x3d0)][_0x503e4f(0x69e)]['delayMessage']/0xea60);this[_0x503e4f(0x478)][_0x503e4f(0x4e1)](this[_0x503e4f(0x1c7)]+'\x20('+this[_0x503e4f(0x3d0)][_0x503e4f(0x4ae)]+_0x503e4f(0x695)+_0x278037+'\x20minutos\x20verificará\x20novas\x20mensagens'),this[_0x503e4f(0x48f)]=!0x1;return;}else this[_0x503e4f(0x3d0)][_0x503e4f(0x4ae)]&&(this['logger']['verbose'](this[_0x503e4f(0x1c7)]+'\x20('+this['instance'][_0x503e4f(0x4ae)]+_0x503e4f(0x110)),this[_0x503e4f(0x37f)]||(await this[_0x503e4f(0x85d)](),this[_0x503e4f(0x349)](),this[_0x503e4f(0x4b9)]()),(this['instance'][_0x503e4f(0x69e)][_0x503e4f(0x6dd)]===null||this['instance'][_0x503e4f(0x69e)][_0x503e4f(0x6dd)]===void 0x0)&&await this[_0x503e4f(0x3d1)]());if(this[_0x503e4f(0x48f)]){let _0x8dd333=_0x3155a5();this[_0x503e4f(0x478)][_0x503e4f(0x4e1)](this[_0x503e4f(0x1c7)]+_0x503e4f(0x5f9)+_0x8dd333/0x3e8+_0x503e4f(0x600)),setTimeout(_0x14afd8,_0x8dd333);}};if(this[_0x3a44aa(0x48f)])return;this[_0x3a44aa(0x48f)]=!0x0;let _0x123ae9=_0x3155a5();setTimeout(_0x14afd8,_0x123ae9);}async[a0_0x3cfc7d(0x4b9)](){const _0x571616=a0_0x3cfc7d;let _0x642c26=this['instance']['wuid'];try{let _0x373a45=await this[_0x571616(0x67f)][_0x571616(0x2dc)][_0x571616(0x256)]({'where':{'$or':[{'owner':_0x642c26},{'whoCanUse':{'$in':[_0x642c26]}},{'shareOwners':{'$in':[_0x642c26]}}]}}),_0x59b46d=new Map(this[_0x571616(0x37f)]['flows'][_0x571616(0x733)](_0x4a1c53=>[_0x4a1c53[_0x571616(0x7b5)],_0x4a1c53])),_0x4bdf23=_0x373a45[_0x571616(0x733)](_0xba7e9c=>{const _0x3bdec6=_0x571616;let _0x38ef80=_0x59b46d[_0x3bdec6(0x840)](_0xba7e9c['_id']?.[_0x3bdec6(0x885)]());return{'_id':_0xba7e9c['_id']?.[_0x3bdec6(0x885)](),'name':_0x38ef80?.[_0x3bdec6(0x75b)]??_0xba7e9c['name'],'default':_0x38ef80?.[_0x3bdec6(0x879)]??_0xba7e9c[_0x3bdec6(0x879)]??!0x1,'startCommand':_0x38ef80?.[_0x3bdec6(0x864)]??_0xba7e9c[_0x3bdec6(0x5a8)],'minutesToClose':_0x38ef80?.[_0x3bdec6(0x5f0)]??_0xba7e9c['minutesToClose']??0xa,'readMessages':_0x38ef80?.[_0x3bdec6(0x463)]??_0xba7e9c['readMessages']??!0x1,'testingWith':_0x38ef80?.[_0x3bdec6(0x278)]??_0xba7e9c['testingWith'],'canEdit':_0xba7e9c[_0x3bdec6(0x6a6)]===_0x642c26||(_0xba7e9c['whoCanEdit']??[])[_0x3bdec6(0x1ec)](_0x642c26),'usersCount':(_0xba7e9c[_0x3bdec6(0x823)]??[])[_0x3bdec6(0x11c)]??0x0};}),_0x1334a3=!0x1;_0x4bdf23['forEach'](_0x2ba7d8=>{const _0x79cf13=_0x571616;_0x2ba7d8[_0x79cf13(0x879)]&&(_0x1334a3?_0x2ba7d8[_0x79cf13(0x879)]=!0x1:_0x1334a3=!0x0);}),this[_0x571616(0x37f)]['flows']=_0x4bdf23;let _0x512014={'flows':_0x4bdf23};return await this['repository'][_0x571616(0x730)]['update'](_0x512014,_0x642c26),this['logger'][_0x571616(0x4e1)](this[_0x571616(0x1c7)]+'\x20('+_0x642c26+'):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.'),_0x4bdf23['length'];}catch(_0x352ffe){return this[_0x571616(0x478)][_0x571616(0x3c6)](this[_0x571616(0x1c7)]+'\x20('+_0x642c26+_0x571616(0x7ca)+(_0x352ffe instanceof Error?_0x352ffe[_0x571616(0x70f)]:JSON['stringify'](_0x352ffe,null,0x2))),{'message':_0x571616(0x683)+(_0x352ffe instanceof Error?_0x352ffe[_0x571616(0x70f)]:JSON[_0x571616(0x238)](_0x352ffe,null,0x2))};}}async['connectToWhatsapp'](_0x54510d){const _0x238bf3=a0_0x3cfc7d;try{let _0xcda733=await this[_0x238bf3(0x67f)][_0x238bf3(0x3d0)][_0x238bf3(0x36a)]({'where':{'_id':he+'-'+this['instanceName']}}),_0xc19ab9,_0x39e808=!Le[_0x238bf3(0x822)]||!Le['networkInterface'];console[_0x238bf3(0x547)](_0x238bf3(0x7c5)),console[_0x238bf3(0x547)](_0x238bf3(0x677),Ai),console[_0x238bf3(0x547)](_0x238bf3(0x788),this['reconnectAttempts']),console[_0x238bf3(0x547)]('--------------------------------------'),Ai&&!_0x39e808&&(this[_0x238bf3(0x206)]<0x4||!this[_0x238bf3(0x206)]?_0xcda733&&_0xcda733['ip']?(_0xc19ab9=_0xcda733['ip'],console['log']('Usando\x20IP\x20existente:\x20'+_0xc19ab9)):(_0xc19ab9=await Le['createIPv6'](he,this['instance'][_0x238bf3(0x75b)]),_0xc19ab9?(console[_0x238bf3(0x547)](_0x238bf3(0x45d)+_0xc19ab9),await(0x0,w['delay'])(0x7d0)):console[_0x238bf3(0x3c6)]('Falha\x20ao\x20criar\x20IPv6.')):this[_0x238bf3(0x206)]<0x6&&(console[_0x238bf3(0x547)]('IPv6\x20recriado\x20após\x20falhas\x20de\x20reconexão.'),_0xc19ab9=await Le['createIPv6'](he,this[_0x238bf3(0x3d0)][_0x238bf3(0x75b)]),_0xc19ab9?(console['log'](_0x238bf3(0x45d)+_0xc19ab9),await(0x0,w[_0x238bf3(0x21c)])(0x7d0)):console[_0x238bf3(0x3c6)](_0x238bf3(0x7d7)))),this[_0x238bf3(0x5f7)](),this[_0x238bf3(0x3d0)][_0x238bf3(0x763)]=(await this[_0x238bf3(0x67f)]['auth'][_0x238bf3(0x1c4)](this[_0x238bf3(0x3d0)][_0x238bf3(0x75b)]))[_0x238bf3(0x763)],this[_0x238bf3(0x3d0)][_0x238bf3(0x5ab)]=await this['defineAuthState']();let _0x46f1e4=[xi,Us,(0x0,ks[_0x238bf3(0x548)])()],_0x504d57={'localAddress':_0xc19ab9,'auth':{'creds':this['instance']['authState']['state']['creds'],'keys':(0x0,w[_0x238bf3(0x664)])(this[_0x238bf3(0x3d0)][_0x238bf3(0x5ab)]['state']['keys'],(0x0,Ft[_0x238bf3(0x879)])({'level':_0x238bf3(0x3c6)}))},'logger':(0x0,Ft[_0x238bf3(0x879)])({'level':_0x238bf3(0x3c6)}),'printQRInTerminal':!0x1,'browser':_0x54510d?['Mac\x20OS',Us,(0x0,ks[_0x238bf3(0x548)])()]:_0x46f1e4,'version':[0x2,0xbb8,0x3c8d6c7b],'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x4aa1df=>{const _0x18c6f2=_0x238bf3;let _0x4fc51c=this[_0x18c6f2(0x288)]?.['groups_ignore']&&(0x0,w['isJidGroup'])(_0x4aa1df);return(0x0,w['isJidBroadcast'])(_0x4aa1df)||_0x4fc51c;},'msgRetryCounterCache':this[_0x238bf3(0x551)],'getMessage':async _0x12df58=>await this['getMessage'](_0x12df58),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x238bf3(0x5ec)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0xfd1a26){const _0x17da0f=_0x238bf3;return _0xfd1a26[_0x17da0f(0x6d0)]?.[_0x17da0f(0x70f)]?.[_0x17da0f(0x36c)]?.['listType']===w['proto']['Message']['ListMessage']['ListType'][_0x17da0f(0x290)]&&(_0xfd1a26=JSON[_0x17da0f(0x675)](JSON[_0x17da0f(0x238)](_0xfd1a26)),_0xfd1a26[_0x17da0f(0x6d0)][_0x17da0f(0x70f)][_0x17da0f(0x36c)]['listType']=w['proto'][_0x17da0f(0x1d1)][_0x17da0f(0x84d)][_0x17da0f(0x7e8)][_0x17da0f(0x1ea)]),_0xfd1a26[_0x17da0f(0x36c)]?.['listType']==w[_0x17da0f(0x7ab)][_0x17da0f(0x1d1)]['ListMessage'][_0x17da0f(0x7e8)][_0x17da0f(0x290)]&&(_0xfd1a26=JSON[_0x17da0f(0x675)](JSON['stringify'](_0xfd1a26)),_0xfd1a26[_0x17da0f(0x36c)]['listType']=w[_0x17da0f(0x7ab)]['Message'][_0x17da0f(0x84d)][_0x17da0f(0x7e8)][_0x17da0f(0x1ea)]),_0xfd1a26;}};return this[_0x238bf3(0x659)]=!0x1,this[_0x238bf3(0x495)]=(0x0,w[_0x238bf3(0x879)])(_0x504d57),this[_0x238bf3(0x563)](),this[_0x238bf3(0x2c6)]=_0x54510d,this['client'];}catch(_0x527787){let _0x1488f2='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp',_0x4a8bf3=_0x527787 instanceof Error?_0x527787[_0x238bf3(0x70f)]:typeof _0x527787==_0x238bf3(0x54e)?JSON['stringify'](_0x527787):_0x527787,_0x14275a=_0x1488f2+':\x20'+_0x4a8bf3;throw this[_0x238bf3(0x478)][_0x238bf3(0x3c6)](this[_0x238bf3(0x1c7)]+'\x20('+this[_0x238bf3(0x3d0)][_0x238bf3(0x4ae)]+'):\x20'+_0x14275a),console[_0x238bf3(0x3c6)](_0x238bf3(0x583),_0x527787),_0x527787 instanceof Error&&console['error'](_0x238bf3(0x398),_0x527787[_0x238bf3(0x1c5)]),new x(_0x14275a);}}['eventHandler'](){const _0x1b627a=a0_0x3cfc7d;this[_0x1b627a(0x495)]['ev'][_0x1b627a(0x221)](_0x33d9db=>{const _0x2d5e3e=_0x1b627a;if(!this[_0x2d5e3e(0x659)]){let _0x2e61bd=this[_0x2d5e3e(0x497)][_0x2d5e3e(0x840)](_0x2d5e3e(0x621));if(_0x33d9db[_0x2d5e3e(0x1c0)]){let _0x5f25ed=_0x33d9db[_0x2d5e3e(0x1c0)];this[_0x2d5e3e(0x76f)][_0x2d5e3e(0x1c0)](_0x5f25ed);}if(_0x33d9db[_0x2d5e3e(0x412)]){let _0x597002=_0x33d9db['labels.association'];this['messageHandle'][_0x2d5e3e(0x412)](_0x597002);}if(_0x33d9db[_0x2d5e3e(0x430)]&&this[_0x2d5e3e(0x605)](_0x33d9db[_0x2d5e3e(0x430)]),_0x33d9db[_0x2d5e3e(0x680)]&&this[_0x2d5e3e(0x3d0)][_0x2d5e3e(0x5ab)][_0x2d5e3e(0x888)](),_0x33d9db['messaging-history.set']){let _0x343206=_0x33d9db[_0x2d5e3e(0x44e)];this['messageHandle'][_0x2d5e3e(0x44e)](_0x343206,_0x2e61bd);}if(_0x33d9db[_0x2d5e3e(0x1e0)]){let _0xe13364=_0x33d9db[_0x2d5e3e(0x1e0)];this['messageHandle'][_0x2d5e3e(0x1e0)](_0xe13364,_0x2e61bd);}if(_0x33d9db[_0x2d5e3e(0x45a)]){let _0x64db5a=_0x33d9db[_0x2d5e3e(0x45a)];this['messageHandle'][_0x2d5e3e(0x45a)](_0x64db5a,_0x2e61bd);}if(_0x33d9db[_0x2d5e3e(0x6b4)]){let _0x22b655=_0x33d9db[_0x2d5e3e(0x6b4)];if(this[_0x2d5e3e(0x288)]?.['groups_ignore']&&_0x22b655['id']['includes'](_0x2d5e3e(0x2a5)))return;this[_0x2d5e3e(0x2dd)](_0x2d5e3e(0x6b4),_0x22b655);}if(_0x33d9db[_0x2d5e3e(0x627)]){let _0x4cffe8=_0x33d9db['groups.upsert'];this[_0x2d5e3e(0x3e2)][_0x2d5e3e(0x627)](_0x4cffe8);}if(_0x33d9db[_0x2d5e3e(0x6a0)]){let _0x44ce00=_0x33d9db['groups.update'];this[_0x2d5e3e(0x3e2)][_0x2d5e3e(0x6a0)](_0x44ce00);}if(_0x33d9db['group-participants.update']){let _0x2c5450=_0x33d9db[_0x2d5e3e(0x50e)];this[_0x2d5e3e(0x3e2)]['group-participants.update'](_0x2c5450);}if(_0x33d9db[_0x2d5e3e(0x86e)]){let _0x3031c1=_0x33d9db[_0x2d5e3e(0x86e)];this[_0x2d5e3e(0x22c)]['chats.upsert'](_0x3031c1,_0x2e61bd);}if(_0x33d9db['chats.update']){let _0x3045ca=_0x33d9db[_0x2d5e3e(0x383)];this[_0x2d5e3e(0x22c)]['chats.update'](_0x3045ca,_0x2e61bd);}if(_0x33d9db[_0x2d5e3e(0x135)]){let _0x507256=_0x33d9db[_0x2d5e3e(0x135)];this[_0x2d5e3e(0x22c)]['chats.delete'](_0x507256);}if(_0x33d9db[_0x2d5e3e(0x4a2)]){let _0x225de5=_0x33d9db[_0x2d5e3e(0x4a2)];this[_0x2d5e3e(0x6f1)][_0x2d5e3e(0x4a2)](_0x225de5,_0x2e61bd);}if(_0x33d9db[_0x2d5e3e(0x524)]){let _0x3ca94d=_0x33d9db[_0x2d5e3e(0x524)];this[_0x2d5e3e(0x6f1)]['contacts.update'](_0x3ca94d,_0x2e61bd);}}});}async[a0_0x3cfc7d(0x5e4)](_0x35d203,_0x2840dc){const _0x3453d4=a0_0x3cfc7d;if(_0x2840dc>=0xa){console[_0x3453d4(0x3c6)](this[_0x3453d4(0x1c7)]+'\x20('+this['instance'][_0x3453d4(0x4ae)]+_0x3453d4(0x382)),delete Lt[_0x35d203[_0x3453d4(0x1e4)]['id']];return;}try{console[_0x3453d4(0x3c6)](this['instanceName']+'\x20('+this['instance'][_0x3453d4(0x4ae)]+'):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20'+(_0x2840dc+0x1)),await this[_0x3453d4(0x495)]['sendMessageAck'](JSON[_0x3453d4(0x675)](_0x35d203[_0x3453d4(0x687)][0x1],w[_0x3453d4(0x2a1)][_0x3453d4(0x10c)])),console[_0x3453d4(0x3c6)](_0x3453d4(0x7c7));}catch(_0x14e1eb){console[_0x3453d4(0x3c6)](this['instanceName']+'\x20('+this['instance'][_0x3453d4(0x4ae)]+'):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20'+_0x14e1eb),setTimeout(()=>this[_0x3453d4(0x5e4)](_0x35d203,_0x2840dc+0x1),Math['pow'](0x2,_0x2840dc)*0x3e8);}}async[a0_0x3cfc7d(0x72d)](_0x4bd01c){const _0x4cec35=a0_0x3cfc7d;let _0x49a578=_0x4bd01c[_0x4cec35(0x1e4)][_0x4cec35(0x6d9)][_0x4cec35(0x14b)]('@g.us'),_0x2bcaa6;if(_0x4bd01c[_0x4cec35(0x1e4)][_0x4cec35(0x562)])_0x2bcaa6=this[_0x4cec35(0x3d0)][_0x4cec35(0x2ae)];else{let _0xed7af6=_0x49a578?_0x4bd01c['key'][_0x4cec35(0x87c)]:_0x4bd01c[_0x4cec35(0x1e4)][_0x4cec35(0x6d9)];_0x2bcaa6=(await this['findAndUpdateCacheContact'](_0xed7af6,_0x4bd01c['pushName'],!0x1))[_0x4cec35(0x5cc)][_0x4cec35(0x3b4)];}_0x4bd01c[_0x4cec35(0x2bb)]&&_0x4bd01c['messageTimestamp'][_0x4cec35(0x885)]()[_0x4cec35(0x11c)]<0xd&&(_0x4bd01c[_0x4cec35(0x2bb)]=_0x4bd01c['messageTimestamp']*0x3e8);let _0xe732da={'_id':_0x4bd01c['key']['id'],'key':_0x4bd01c[_0x4cec35(0x1e4)],'isGroup':_0x49a578,'profilePictureUrl':_0x2bcaa6,'pushName':_0x4bd01c[_0x4cec35(0x7b2)],'message':{'text':'Mensagem\x20perdida,\x20não\x20foi\x20possível\x20descriptografá-la,\x20abra\x20o\x20WhatsApp\x20no\x20seu\x20celular\x20para\x20visualizá-la'},'messageType':_0x4cec35(0x3c6),'message_normalized':{'key':_0x4bd01c[_0x4cec35(0x1e4)],'pushName':_0x4bd01c[_0x4cec35(0x7b2)],'messageTimestamp':_0x4bd01c[_0x4cec35(0x2bb)],'source':(0x0,w[_0x4cec35(0x522)])(_0x4bd01c['key']['id']),'text':_0x4cec35(0x5d7)},'messageTimestamp':_0x4bd01c[_0x4cec35(0x2bb)],'owner':this['instance'][_0x4cec35(0x4ae)],'source':(0x0,w[_0x4cec35(0x522)])(_0x4bd01c[_0x4cec35(0x1e4)]['id'])};this[_0x4cec35(0x478)][_0x4cec35(0x3c6)](this[_0x4cec35(0x1c7)]+'\x20('+this[_0x4cec35(0x3d0)][_0x4cec35(0x4ae)]+'):\x20'+(_0xe732da[_0x4cec35(0x1e4)]?.[_0x4cec35(0x562)]?_0x4cec35(0x250):_0x4cec35(0x560))+'\x20['+_0xe732da[_0x4cec35(0x1e4)]?.[_0x4cec35(0x6d9)]['replace'](_0x4cec35(0x10f),'')+']\x20('+_0xe732da[_0x4cec35(0x60e)]+')'),_0xe732da[_0x4cec35(0x6cf)]?.['text']&&this['logger'][_0x4cec35(0x3c6)](_0x4bd01c[_0x4cec35(0x1e4)]['id']+':\x20'+_0xe732da[_0x4cec35(0x6cf)]?.[_0x4cec35(0x2c7)]),await this[_0x4cec35(0x67f)][_0x4cec35(0x70f)][_0x4cec35(0x6d6)]([_0xe732da],this[_0x4cec35(0x3d0)][_0x4cec35(0x4ae)]),await this['repository'][_0x4cec35(0x4bf)]['insert']([_0xe732da]),this[_0x4cec35(0x2dd)](_0x4cec35(0x1e0),_0xe732da),F(this[_0x4cec35(0x1c7)],_0x4cec35(0x30c),{'message':_0xe732da});}['delayChatLabel'](_0x2a2d14){return new Promise(_0x1db0b2=>setTimeout(_0x1db0b2,_0x2a2d14));}[a0_0x3cfc7d(0x15d)](_0x5a3f43){const _0x3c0298=a0_0x3cfc7d;_0x5a3f43=_0x5a3f43[_0x3c0298(0x5e0)](/\D/g,'');let _0x4046e8=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x3c0298(0x73d)](_0x5a3f43);if(_0x4046e8&&_0x4046e8[0x1]==='55'){let _0x27bc28=_0x4046e8[0x2],_0x1d6e67=_0x4046e8[0x3],_0x45dd2c=_0x4046e8[0x4];if(parseInt(_0x27bc28)>=0x1f&&_0x1d6e67==='9')return _0x4046e8[0x1]+_0x27bc28+_0x45dd2c;}return _0x5a3f43;}[a0_0x3cfc7d(0x81c)](_0xf5ac0e){const _0x2b7855=a0_0x3cfc7d;return _0xf5ac0e['includes'](_0x2b7855(0x2a5))||_0xf5ac0e[_0x2b7855(0x1ec)](_0x2b7855(0x10f))||_0xf5ac0e[_0x2b7855(0x1ec)](_0x2b7855(0x65b))?_0xf5ac0e:(_0xf5ac0e=_0xf5ac0e?.['replace'](/\s/g,'')[_0x2b7855(0x5e0)](/\+/g,'')[_0x2b7855(0x5e0)](/\(/g,'')[_0x2b7855(0x5e0)](/\)/g,'')[_0x2b7855(0x407)](/\:/)[0x0][_0x2b7855(0x407)]('@')[0x0],_0xf5ac0e[_0x2b7855(0x11c)]>=0x12?(_0xf5ac0e=_0xf5ac0e['replace'](/[^\d-]/g,''),_0xf5ac0e+_0x2b7855(0x2a5)):(_0xf5ac0e=_0xf5ac0e['replace'](/\D/g,''),_0xf5ac0e+_0x2b7855(0x10f)));}async['updatePresence'](_0x4bb44f){const _0x49ca13=a0_0x3cfc7d;let _0x28f7a7=(await this[_0x49ca13(0x434)]({'numbers':[_0x4bb44f[_0x49ca13(0x162)]]}))[0x0];if(!_0x28f7a7[_0x49ca13(0x78a)]&&!(0x0,w[_0x49ca13(0x6e5)])(_0x28f7a7[_0x49ca13(0x69c)])&&!_0x28f7a7[_0x49ca13(0x69c)][_0x49ca13(0x1ec)](_0x49ca13(0x65b)))throw new m(_0x28f7a7);let _0x15618f=_0x28f7a7[_0x49ca13(0x69c)];try{return await this[_0x49ca13(0x495)]['presenceSubscribe'](_0x15618f),await this[_0x49ca13(0x495)]['sendPresenceUpdate'](_0x4bb44f[_0x49ca13(0x797)],_0x15618f),{'status':0xc8,'presence':_0x4bb44f[_0x49ca13(0x797)]};}catch(_0x3018e5){let _0x409e1d=_0x49ca13(0x249),_0x2807b6=_0x3018e5 instanceof Error?_0x3018e5[_0x49ca13(0x70f)]:typeof _0x3018e5=='object'?JSON[_0x49ca13(0x238)](_0x3018e5):_0x3018e5,_0x53e990=_0x409e1d+':\x20'+_0x2807b6;throw this['logger'][_0x49ca13(0x3c6)](this[_0x49ca13(0x1c7)]+'\x20('+this['instance'][_0x49ca13(0x4ae)]+_0x49ca13(0x71a)+_0x53e990),new m(_0x53e990);}}async[a0_0x3cfc7d(0x7da)](_0x1d4fca,_0x27b522,_0x3d27b5,_0x5f1a48=!0x0){const _0x217d74=a0_0x3cfc7d;let _0x50f0f4=await this[_0x217d74(0x67f)]['cacheContact'][_0x217d74(0x36a)]({'where':{'_id':_0x1d4fca}});if(!_0x50f0f4&&!_0x5f1a48)return;let _0x309e80={'lastUpdate':Date[_0x217d74(0x6aa)]()};if(_0x3d27b5||!_0x50f0f4?.['lastUpdate']||Date[_0x217d74(0x6aa)]()-_0x50f0f4[_0x217d74(0x6ed)]>0x18*0x3c*0x3c*0x3e8)try{let _0x22b5a6=(await this['profilePicture'](_0x1d4fca))[_0x217d74(0x2ae)];_0x309e80[_0x217d74(0x3b4)]=_0x22b5a6;}catch(_0x21952a){let _0x15570e='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact',_0xeff5ee=_0x21952a instanceof Error?_0x21952a[_0x217d74(0x70f)]:typeof _0x21952a==_0x217d74(0x54e)?JSON[_0x217d74(0x238)](_0x21952a):_0x21952a,_0x4bc7cc=_0x15570e+':\x20'+_0xeff5ee;throw this[_0x217d74(0x478)]['error'](this[_0x217d74(0x1c7)]+'\x20('+this[_0x217d74(0x3d0)]['wuid']+_0x217d74(0x71a)+_0x4bc7cc),new m(_0x4bc7cc);}return _0x27b522&&_0x50f0f4?.[_0x217d74(0x75b)]!==_0x27b522&&(_0x309e80['name']=_0x27b522),Object[_0x217d74(0x1a4)](_0x309e80)[_0x217d74(0x11c)]>0x1&&(_0x50f0f4?await this[_0x217d74(0x67f)][_0x217d74(0x770)][_0x217d74(0x3f8)]({'where':{'_id':_0x1d4fca}},_0x309e80):await this[_0x217d74(0x67f)][_0x217d74(0x770)]['insert']([{'_id':_0x1d4fca,..._0x309e80}]),_0x50f0f4={..._0x50f0f4,..._0x309e80}),{'cachedContact':_0x50f0f4};}async[a0_0x3cfc7d(0x1e6)](_0x27313e){const _0x41a96c=a0_0x3cfc7d;let _0x3f9c76=this[_0x41a96c(0x81c)](_0x27313e);try{return{'wuid':_0x3f9c76,'profilePictureUrl':await this['client'][_0x41a96c(0x2ae)](_0x3f9c76,'image')};}catch{return{'wuid':_0x3f9c76,'profilePictureUrl':null};}}async['sendMessageWithRetry'](_0x2193ea,_0x23d6e6,_0x28d7f9){const _0x3d6d17=a0_0x3cfc7d;let _0xe6ef1c=0x0;for(;_0xe6ef1c<0x5;)try{return await this['sendMessageWithTyping'](_0x2193ea,_0x23d6e6,_0x28d7f9);}catch(_0x50e14c){if(_0xe6ef1c++,_0x50e14c instanceof Error&&_0x50e14c[_0x3d6d17(0x70f)]===_0x3d6d17(0x857)){if(_0xe6ef1c>=0x5)throw new m(_0x3d6d17(0x244)+_0x50e14c['message']);this[_0x3d6d17(0x478)][_0x3d6d17(0x7e0)]('Tentativa\x20'+_0xe6ef1c+_0x3d6d17(0x613)+_0x50e14c[_0x3d6d17(0x70f)]+_0x3d6d17(0x200)+0x1388/0x3e8+'\x20segundos...'),await new Promise(_0x5949ed=>setTimeout(_0x5949ed,0x1388));}else throw new m(_0x50e14c[_0x3d6d17(0x70f)]);}}async[a0_0x3cfc7d(0x234)](_0x2457b2,_0xd2efd9,_0x1f4b66){const _0x37e75f=a0_0x3cfc7d;let _0x41f17f;try{let _0x15a378=(await this['whatsappNumber']({'numbers':[_0x2457b2]}))?.[_0x37e75f(0x428)]();if(!_0x15a378[_0x37e75f(0x78a)]&&!(0x0,w[_0x37e75f(0x6e5)])(_0x15a378['jid'])&&!_0x15a378['jid'][_0x37e75f(0x1ec)](_0x37e75f(0x65b)))throw new m(_0x15a378);_0x41f17f=_0x15a378[_0x37e75f(0x69c)];}catch(_0x47df8b){_0x41f17f=_0x2457b2,this[_0x37e75f(0x478)][_0x37e75f(0x7e0)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x37e75f(0x14a)+_0x47df8b[_0x37e75f(0x70f)]),this[_0x37e75f(0x478)][_0x37e75f(0x7e0)](this['instanceName']+'\x20('+this[_0x37e75f(0x3d0)][_0x37e75f(0x4ae)]+_0x37e75f(0x3c8)+_0x41f17f);}try{if(_0x41f17f||(_0x41f17f=_0x2457b2,this[_0x37e75f(0x478)][_0x37e75f(0x7e0)](this[_0x37e75f(0x1c7)]+'\x20('+this[_0x37e75f(0x3d0)][_0x37e75f(0x4ae)]+_0x37e75f(0x85c)+_0x41f17f)),_0x1f4b66||(_0x1f4b66={}),_0x1f4b66?.[_0x37e75f(0x21c)]){await this[_0x37e75f(0x495)][_0x37e75f(0x3fe)](_0x41f17f),await this[_0x37e75f(0x495)]['sendPresenceUpdate'](_0x1f4b66?.[_0x37e75f(0x797)]??_0x37e75f(0x7d1),_0x41f17f);let _0x1d8b98=Math['min'](_0x1f4b66[_0x37e75f(0x21c)],0x2710);await(0x0,w['delay'])(_0x1d8b98),await this[_0x37e75f(0x495)]['sendPresenceUpdate'](_0x37e75f(0x31f),_0x41f17f);}let _0x3d9234=_0x1f4b66?.[_0x37e75f(0x4ac)]!=!0x1?void 0x0:!0x1,_0x4039c8;if(_0x1f4b66?.['quoted']){let _0x5876d6=_0x1f4b66?.['quoted'],_0x151f32=_0x5876d6?.[_0x37e75f(0x70f)]?_0x5876d6:await this[_0x37e75f(0x446)](_0x5876d6[_0x37e75f(0x1e4)],!0x0);_0x151f32&&(_0x4039c8=_0x151f32);}let _0x585446=await this['repository']['chat']['findOne']({'where':{'_id':_0x41f17f}},this[_0x37e75f(0x3d0)][_0x37e75f(0x4ae)]),_0x2f9e1a,_0x23b0f9=null;if((0x0,w[_0x37e75f(0x6e5)])(_0x41f17f))try{if(_0x23b0f9=_0x585446['groupdata'],!_0x23b0f9)throw new U(_0x37e75f(0x187));if(!_0x23b0f9[_0x37e75f(0x5fb)])throw new m(_0x37e75f(0x2e3));_0x1f4b66?.[_0x37e75f(0x347)]&&(_0x1f4b66[_0x37e75f(0x347)]?.[_0x37e75f(0x7b3)]?_0x2f9e1a=_0x23b0f9[_0x37e75f(0x365)]['map'](_0x31c00e=>_0x31c00e['id']):_0x1f4b66[_0x37e75f(0x347)]?.[_0x37e75f(0x240)]?.['length']&&(_0x2f9e1a=_0x1f4b66[_0x37e75f(0x347)][_0x37e75f(0x240)][_0x37e75f(0x733)](_0x21b56=>{const _0x19508e=_0x37e75f;let _0x6881b0=this[_0x19508e(0x81c)](_0x21b56);return(0x0,w[_0x19508e(0x6e5)])(_0x6881b0)?null:_0x6881b0;})));}catch(_0x7bef1d){throw _0x7bef1d instanceof U?new U(_0x37e75f(0x187)):_0x7bef1d instanceof m?new m(_0x37e75f(0x2e3)):new Error(_0x37e75f(0x35c));}let _0x3217d6=await((async()=>{const _0x290bf8=_0x37e75f;let _0x1a11bb={'quoted':_0x4039c8,'ephemeralExpiration':_0x585446?.[_0x290bf8(0x4db)]??0x0};if(!_0xd2efd9[_0x290bf8(0x873)]&&!_0xd2efd9[_0x290bf8(0x1f2)]&&!_0xd2efd9['sticker']&&!_0xd2efd9[_0x290bf8(0x21b)]&&_0x41f17f!==_0x290bf8(0x498)&&_0xd2efd9[_0x290bf8(0x6d2)])return await this[_0x290bf8(0x495)][_0x290bf8(0x6e9)](_0x41f17f,{'react':{'text':_0xd2efd9[_0x290bf8(0x6d2)][_0x290bf8(0x2c7)],'key':_0xd2efd9[_0x290bf8(0x6d2)][_0x290bf8(0x1e4)]}},_0x1a11bb);if(_0xd2efd9[_0x290bf8(0x21b)]){let _0x41c9f4=_0xd2efd9[_0x290bf8(0x21b)];return _0x1f4b66?.[_0x290bf8(0x1f1)]&&(_0x41c9f4=await this[_0x290bf8(0x509)](_0x41c9f4,_0x41f17f)),await this[_0x290bf8(0x495)]['sendMessage'](_0x41f17f,{'text':_0x41c9f4,'mentions':_0x2f9e1a,'linkPreview':_0x3d9234},_0x1a11bb);}return!_0xd2efd9[_0x290bf8(0x873)]&&!_0xd2efd9['poll']&&_0x41f17f!=_0x290bf8(0x498)?await this[_0x290bf8(0x495)][_0x290bf8(0x6e9)](_0x41f17f,{'forward':{'key':{'remoteJid':this[_0x290bf8(0x3d0)][_0x290bf8(0x4ae)],'fromMe':!0x0},'message':_0xd2efd9},'mentions':_0x2f9e1a},_0x1a11bb):_0x41f17f==='status@broadcast'?await this[_0x290bf8(0x495)][_0x290bf8(0x6e9)](_0x41f17f,_0xd2efd9['status'][_0x290bf8(0x81a)],{'backgroundColor':_0xd2efd9['status'][_0x290bf8(0x123)][_0x290bf8(0x64f)],'font':_0xd2efd9[_0x290bf8(0x204)][_0x290bf8(0x123)][_0x290bf8(0x276)],'statusJidList':_0xd2efd9[_0x290bf8(0x204)][_0x290bf8(0x123)][_0x290bf8(0x731)]}):await this[_0x290bf8(0x495)]['sendMessage'](_0x41f17f,_0xd2efd9,_0x1a11bb);})()),_0x45beef=(0x0,w[_0x37e75f(0x161)])(_0x3217d6['message']),_0x3098ac=(0x0,w[_0x37e75f(0x3ae)])(_0x45beef),{message_normalized:_0x1732be}=this[_0x37e75f(0x5ca)](_0x45beef,_0x3098ac,null),_0x178f45={'_id':_0x3217d6[_0x37e75f(0x1e4)]['id'],'key':_0x3217d6[_0x37e75f(0x1e4)],'pushName':_0x3217d6[_0x37e75f(0x7b2)],'isGroup':_0x3217d6[_0x37e75f(0x1e4)][_0x37e75f(0x6d9)][_0x37e75f(0x14b)](_0x37e75f(0x2a5)),'profilePictureUrl':this[_0x37e75f(0x3d0)][_0x37e75f(0x2ae)],'message':_0x45beef,'messageType':_0x3098ac,'message_normalized':{'key':_0x3217d6[_0x37e75f(0x1e4)],'pushName':_0x3217d6['pushName'],'messageTimestamp':_0x3217d6[_0x37e75f(0x2bb)]&&_0x3217d6[_0x37e75f(0x2bb)][_0x37e75f(0x885)]()[_0x37e75f(0x11c)]<0xd?_0x3217d6['messageTimestamp']*0x3e8:_0x3217d6[_0x37e75f(0x2bb)]||null,'source':(0x0,w[_0x37e75f(0x522)])(_0x3217d6[_0x37e75f(0x1e4)]['id']),..._0x1732be},'messageTimestamp':_0x3217d6[_0x37e75f(0x2bb)]&&_0x3217d6[_0x37e75f(0x2bb)]['toString']()[_0x37e75f(0x11c)]<0xd?_0x3217d6[_0x37e75f(0x2bb)]*0x3e8:_0x3217d6[_0x37e75f(0x2bb)]||null,'owner':this['instance'][_0x37e75f(0x4ae)],'source':(0x0,w[_0x37e75f(0x522)])(_0x3217d6[_0x37e75f(0x1e4)]['id'])};return this[_0x37e75f(0x478)][_0x37e75f(0x7e0)](this[_0x37e75f(0x1c7)]+'\x20('+this[_0x37e75f(0x3d0)][_0x37e75f(0x4ae)]+_0x37e75f(0x4f5)+_0x178f45[_0x37e75f(0x1e4)]?.[_0x37e75f(0x6d9)][_0x37e75f(0x5e0)](_0x37e75f(0x10f),'')+_0x37e75f(0x239)+_0x178f45[_0x37e75f(0x60e)]+')'),_0x178f45[_0x37e75f(0x6cf)]?.['text']&&this[_0x37e75f(0x478)][_0x37e75f(0x7e0)](_0x178f45[_0x37e75f(0x6cf)]?.[_0x37e75f(0x2c7)]),this['sendDataWebhook'](_0x37e75f(0x4f8),_0x178f45),F(this[_0x37e75f(0x1c7)],_0x37e75f(0x30c),{'message':_0x178f45}),this['updateChatWithMessage'](this[_0x37e75f(0x497)]['get'](_0x37e75f(0x621)),_0x178f45,_0x37e75f(0x6b3),_0x585446),await this[_0x37e75f(0x67f)][_0x37e75f(0x70f)][_0x37e75f(0x6d6)]([_0x178f45],this['instance']['wuid']),_0x3217d6;}catch(_0xdd50f7){let _0x5e8483=_0x37e75f(0x5a3)+_0x41f17f,_0x20e290=_0xdd50f7 instanceof Error?_0xdd50f7[_0x37e75f(0x70f)]:typeof _0xdd50f7=='object'?JSON[_0x37e75f(0x238)](_0xdd50f7):_0xdd50f7,_0xb90f32=_0x5e8483+':\x20'+_0x20e290;throw this['logger'][_0x37e75f(0x3c6)](this['instanceName']+'\x20('+this[_0x37e75f(0x3d0)][_0x37e75f(0x4ae)]+_0x37e75f(0x71a)+_0xb90f32),new m(_0xb90f32);}}async[a0_0x3cfc7d(0x194)](_0x45a5db,_0x2da050,_0x83600a){const _0x20d865=a0_0x3cfc7d;let _0x35fabf=this[_0x20d865(0x81c)](_0x45a5db),_0x17e6fa=(await this[_0x20d865(0x434)]({'numbers':[_0x35fabf]}))[0x0];if(!_0x17e6fa[_0x20d865(0x78a)]&&!(0x0,w['isJidGroup'])(_0x17e6fa[_0x20d865(0x69c)]))throw new m(_0x17e6fa);let _0x141787=(0x0,w[_0x20d865(0x6e5)])(_0x35fabf)?_0x35fabf:_0x17e6fa['jid'];if((0x0,w['isJidGroup'])(_0x141787))try{await this['client'][_0x20d865(0x129)](_0x141787);}catch{throw new m(_0x20d865(0x27d));}try{_0x83600a?.[_0x20d865(0x21c)]&&(await this['client'][_0x20d865(0x3fe)](_0x141787),await this['client'][_0x20d865(0x56e)](_0x83600a?.[_0x20d865(0x797)]??'composing',_0x35fabf),await(0x0,w[_0x20d865(0x21c)])(_0x83600a[_0x20d865(0x21c)]),await this['client'][_0x20d865(0x56e)](_0x20d865(0x31f),_0x141787));let _0x527266=await((async()=>{const _0x449153=_0x20d865;let _0x140e61,_0x2be35f='3EB0'+(0x0,oe[_0x449153(0x5eb)])(0x12)['toString'](_0x449153(0x7e3))['toUpperCase'](),_0x5b720d=(0x0,w[_0x449153(0x519)])(_0x141787,_0x2da050,{'timestamp':new Date(),'userJid':this[_0x449153(0x3d0)][_0x449153(0x4ae)],'messageId':_0x2be35f,'quoted':_0x140e61}),_0x19389a=await this[_0x449153(0x495)][_0x449153(0x1c1)](_0x141787,_0x5b720d['message'],{'messageId':_0x2be35f});_0x5b720d[_0x449153(0x1e4)]={'id':_0x19389a,'remoteJid':_0x35fabf,'participant':(0x0,w[_0x449153(0x461)])(_0x35fabf)?void 0x0:_0x35fabf,'fromMe':!0x0};for(let [_0x213e8a,_0x4a66be]of Object[_0x449153(0x2b7)](_0x5b720d))(!_0x4a66be||Array['isArray'](_0x4a66be)&&_0x4a66be[_0x449153(0x11c)]===0x0)&&delete _0x5b720d[_0x213e8a];return this[_0x449153(0x495)]['ev'][_0x449153(0x1d5)](_0x449153(0x1e0),{'messages':[_0x5b720d],'type':_0x449153(0x2ce)}),_0x5b720d;})()),_0x46088c=await this['repository'][_0x20d865(0x52b)]['findOne']({'where':{'_id':_0x141787}},this[_0x20d865(0x3d0)]['wuid']),_0x390fd0=(0x0,w[_0x20d865(0x161)])(_0x527266[_0x20d865(0x70f)]),_0x339091=(0x0,w[_0x20d865(0x3ae)])(_0x390fd0),{message_normalized:_0x5c7737}=this[_0x20d865(0x5ca)](_0x390fd0,_0x339091,null),_0x1a308c={'_id':_0x527266[_0x20d865(0x1e4)]['id'],'key':_0x527266[_0x20d865(0x1e4)],'pushName':_0x527266[_0x20d865(0x7b2)],'isGroup':_0x527266['key'][_0x20d865(0x6d9)][_0x20d865(0x14b)](_0x20d865(0x2a5)),'profilePictureUrl':this[_0x20d865(0x3d0)]['profilePictureUrl'],'message':_0x390fd0,'messageType':_0x339091,'message_normalized':{'key':_0x527266[_0x20d865(0x1e4)],'pushName':_0x527266['pushName'],'messageTimestamp':_0x527266['messageTimestamp']&&_0x527266['messageTimestamp']['toString']()[_0x20d865(0x11c)]<0xd?_0x527266[_0x20d865(0x2bb)]*0x3e8:_0x527266[_0x20d865(0x2bb)]||null,'source':(0x0,w[_0x20d865(0x522)])(_0x527266[_0x20d865(0x1e4)]['id']),..._0x5c7737},'messageTimestamp':_0x527266[_0x20d865(0x2bb)]&&_0x527266[_0x20d865(0x2bb)][_0x20d865(0x885)]()[_0x20d865(0x11c)]<0xd?_0x527266['messageTimestamp']*0x3e8:_0x527266[_0x20d865(0x2bb)]||null,'owner':this['instance']['wuid'],'source':(0x0,w[_0x20d865(0x522)])(_0x527266[_0x20d865(0x1e4)]['id'])};return this[_0x20d865(0x478)][_0x20d865(0x7e0)](this[_0x20d865(0x1c7)]+'\x20('+this[_0x20d865(0x3d0)][_0x20d865(0x4ae)]+_0x20d865(0x4f5)+_0x1a308c[_0x20d865(0x1e4)]?.[_0x20d865(0x6d9)][_0x20d865(0x5e0)](_0x20d865(0x10f),'')+_0x20d865(0x239)+_0x1a308c[_0x20d865(0x60e)]+')'),_0x1a308c['message_normalized']?.[_0x20d865(0x2c7)]&&this[_0x20d865(0x478)]['warn'](_0x1a308c[_0x20d865(0x6cf)]?.[_0x20d865(0x2c7)]),this[_0x20d865(0x2dd)](_0x20d865(0x4f8),_0x1a308c),F(this['instanceName'],_0x20d865(0x30c),{'message':_0x1a308c}),this[_0x20d865(0x2f0)](this['configService'][_0x20d865(0x840)](_0x20d865(0x621)),_0x1a308c,_0x20d865(0x6b3),_0x46088c),await this[_0x20d865(0x67f)][_0x20d865(0x70f)][_0x20d865(0x6d6)]([_0x1a308c],this['instance']['wuid']),_0x527266;}catch(_0x468254){throw this[_0x20d865(0x478)][_0x20d865(0x3c6)](_0x468254),new m(_0x468254[_0x20d865(0x885)]());}}get[a0_0x3cfc7d(0x1ed)](){return this['stateConnection'];}async[a0_0x3cfc7d(0x39a)](_0x1f18df){const _0x472207=a0_0x3cfc7d;return await this[_0x472207(0x845)](_0x1f18df[_0x472207(0x162)],{'conversation':_0x1f18df[_0x472207(0x39a)][_0x472207(0x2c7)]},_0x1f18df?.[_0x472207(0x1e9)]);}async[a0_0x3cfc7d(0x5e5)](_0x325fe1){const _0x8505e7=a0_0x3cfc7d;if(!_0x325fe1[_0x8505e7(0x77b)])throw new m('Type\x20is\x20required');if(!_0x325fe1['content'])throw new m('Content\x20is\x20required');if(_0x325fe1[_0x8505e7(0x493)]){let _0xdd08cb=await this['repository'][_0x8505e7(0x447)]['find']({'where':{}},this[_0x8505e7(0x3d0)]['wuid']);if(!_0xdd08cb[_0x8505e7(0x11c)])throw new m(_0x8505e7(0x332));_0x325fe1['statusJidList']=_0xdd08cb[_0x8505e7(0x56c)](_0x247c59=>_0x247c59['pushName'])[_0x8505e7(0x733)](_0x7ad67f=>_0x7ad67f[_0x8505e7(0x7b5)]);}if(!_0x325fe1[_0x8505e7(0x731)]?.[_0x8505e7(0x11c)]&&!_0x325fe1[_0x8505e7(0x493)])throw new m('StatusJidList\x20is\x20required');if(_0x325fe1[_0x8505e7(0x77b)]===_0x8505e7(0x2c7)){if(!_0x325fe1[_0x8505e7(0x64f)])throw new m(_0x8505e7(0x4c8));if(!_0x325fe1[_0x8505e7(0x276)])throw new m(_0x8505e7(0x5d9));return{'content':{'text':_0x325fe1['content']},'option':{'backgroundColor':_0x325fe1[_0x8505e7(0x64f)],'font':_0x325fe1[_0x8505e7(0x276)],'statusJidList':_0x325fe1[_0x8505e7(0x731)]}};}if(_0x325fe1['type']==='image')return{'content':{'image':{'url':_0x325fe1[_0x8505e7(0x81a)]},'caption':_0x325fe1[_0x8505e7(0x444)]},'option':{'statusJidList':_0x325fe1[_0x8505e7(0x731)]}};if(_0x325fe1['type']===_0x8505e7(0x816))return{'content':{'video':{'url':_0x325fe1[_0x8505e7(0x81a)]},'caption':_0x325fe1[_0x8505e7(0x444)]},'option':{'statusJidList':_0x325fe1[_0x8505e7(0x731)]}};if(_0x325fe1[_0x8505e7(0x77b)]==='audio'){this['logger']['verbose'](this[_0x8505e7(0x1c7)]+'\x20('+this[_0x8505e7(0x3d0)][_0x8505e7(0x4ae)]+_0x8505e7(0x33d)),this['logger'][_0x8505e7(0x4e1)](this[_0x8505e7(0x1c7)]+'\x20('+this[_0x8505e7(0x3d0)][_0x8505e7(0x4ae)]+'):Processing\x20audio');let _0x16a0eb=await this['convertaudio'](_0x325fe1['content']);if(typeof _0x16a0eb==_0x8505e7(0x3f6)){this[_0x8505e7(0x478)]['verbose'](this[_0x8505e7(0x1c7)]+'\x20('+this[_0x8505e7(0x3d0)][_0x8505e7(0x4ae)]+_0x8505e7(0x303));let _0x56e897=k[_0x8505e7(0x5bb)](_0x16a0eb)[_0x8505e7(0x885)](_0x8505e7(0x622));return{'content':{'audio':Buffer[_0x8505e7(0x6c7)](_0x56e897,_0x8505e7(0x622)),'ptt':!0x0,'mimetype':_0x8505e7(0x5fa)},'option':{'statusJidList':_0x325fe1[_0x8505e7(0x731)]}};}else throw new x(_0x16a0eb);}throw new m(_0x8505e7(0x392));}async[a0_0x3cfc7d(0x63d)](_0x4d42c3){const _0x556f5a=a0_0x3cfc7d;return await this[_0x556f5a(0x845)]('status@broadcast',{'status':await this[_0x556f5a(0x5e5)](_0x4d42c3[_0x556f5a(0x63d)])});}async['prepareMediaMessage'](_0x29cf36){const _0x34bac2=a0_0x3cfc7d;try{let _0x161842=await(0x0,w[_0x34bac2(0x526)])({[_0x29cf36['mediatype']]:(0x0,J[_0x34bac2(0x344)])(_0x29cf36['media'])?{'url':_0x29cf36['media']}:Buffer[_0x34bac2(0x6c7)](_0x29cf36['media'],_0x34bac2(0x622))},{'upload':this[_0x34bac2(0x495)][_0x34bac2(0x65a)]}),_0x37c90b=_0x29cf36[_0x34bac2(0x865)]+_0x34bac2(0x1d1);if(_0x29cf36[_0x34bac2(0x865)]===_0x34bac2(0x4cd)&&!_0x29cf36[_0x34bac2(0x40b)]){let _0x2f724d=new RegExp(/.*\/(.+?)\./)['exec'](_0x29cf36[_0x34bac2(0x835)]);_0x29cf36[_0x34bac2(0x40b)]=_0x2f724d?_0x2f724d[0x1]:null;}let _0x32a226;return(0x0,J[_0x34bac2(0x344)])(_0x29cf36[_0x34bac2(0x835)])?_0x32a226=(await K['default']['get'](_0x29cf36[_0x34bac2(0x835)],{'responseType':_0x34bac2(0x37c)}))[_0x34bac2(0x4fe)]['content-type']:_0x32a226=(0x0,Oi['getMIMEType'])(_0x29cf36[_0x34bac2(0x40b)]),_0x161842[_0x37c90b][_0x34bac2(0x444)]=_0x29cf36?.[_0x34bac2(0x444)],_0x161842[_0x37c90b]['mimetype']=_0x32a226,_0x161842[_0x37c90b][_0x34bac2(0x40b)]=_0x29cf36[_0x34bac2(0x40b)],_0x29cf36[_0x34bac2(0x865)]===_0x34bac2(0x816)&&(_0x161842[_0x37c90b][_0x34bac2(0x7ad)]=Uint8Array[_0x34bac2(0x6c7)]((0x0,Fe[_0x34bac2(0x5bb)])((0x0,j[_0x34bac2(0x149)])(process[_0x34bac2(0x83b)](),_0x34bac2(0x7e9)))),_0x161842[_0x37c90b]['gifPlayback']=!0x1),(0x0,w[_0x34bac2(0x519)])('',{[_0x37c90b]:{..._0x161842[_0x37c90b]}},{'userJid':this[_0x34bac2(0x3d0)][_0x34bac2(0x4ae)]});}catch(_0x3b44fc){let _0xf2ff1a=_0x34bac2(0x5c4),_0x33c881=_0x3b44fc instanceof Error?_0x3b44fc['message']:typeof _0x3b44fc=='object'?JSON[_0x34bac2(0x238)](_0x3b44fc):_0x3b44fc,_0x5974e0=_0xf2ff1a+':\x20'+_0x33c881;throw this['logger'][_0x34bac2(0x3c6)](this['instanceName']+'\x20('+this[_0x34bac2(0x3d0)][_0x34bac2(0x4ae)]+_0x34bac2(0x71a)+_0x5974e0),new x(_0x5974e0);}}async['mediaMessage'](_0x16d71d){const _0x5cd52f=a0_0x3cfc7d;let _0x1c48a2=0x0;for(;_0x1c48a2<0x5;)try{let _0x43afd5=await this[_0x5cd52f(0x77d)](_0x16d71d[_0x5cd52f(0x319)]);return await this[_0x5cd52f(0x845)](_0x16d71d[_0x5cd52f(0x162)],{..._0x43afd5[_0x5cd52f(0x70f)]},_0x16d71d?.[_0x5cd52f(0x1e9)]);}catch(_0xdf0eb3){if(_0x1c48a2++,_0xdf0eb3 instanceof Error&&_0xdf0eb3[_0x5cd52f(0x70f)]===_0x5cd52f(0x857)){if(_0x1c48a2>=0x5)throw new m(_0x5cd52f(0x2be)+_0xdf0eb3[_0x5cd52f(0x70f)]);this[_0x5cd52f(0x478)]['warn'](_0x5cd52f(0x716)+_0x1c48a2+_0x5cd52f(0x272)+_0xdf0eb3[_0x5cd52f(0x70f)]+_0x5cd52f(0x200)+0x1388/0x3e8+_0x5cd52f(0x7fa)),await new Promise(_0x17e1fb=>setTimeout(_0x17e1fb,0x1388));}else throw new m(_0xdf0eb3[_0x5cd52f(0x70f)]);}}async[a0_0x3cfc7d(0x6ef)](_0x135d60,_0x321b48){const _0x599038=a0_0x3cfc7d;try{this[_0x599038(0x478)]['verbose'](this['instanceName']+'\x20('+this[_0x599038(0x3d0)][_0x599038(0x4ae)]+_0x599038(0x3ea));let _0x4bf2be,_0x36f9c4=_0x321b48+'-'+new Date()[_0x599038(0x64e)]();this[_0x599038(0x478)][_0x599038(0x4e1)](this[_0x599038(0x1c7)]+'\x20('+this[_0x599038(0x3d0)][_0x599038(0x4ae)]+'):Hash\x20to\x20image\x20name:\x20'+_0x36f9c4);let _0x385da6=''+(0x0,j[_0x599038(0x149)])(this[_0x599038(0x531)],_0x36f9c4+'.webp');if(this[_0x599038(0x478)][_0x599038(0x4e1)](this['instanceName']+'\x20('+this[_0x599038(0x3d0)][_0x599038(0x4ae)]+_0x599038(0x32b)+_0x385da6),(0x0,J[_0x599038(0x320)])(_0x135d60)){this[_0x599038(0x478)][_0x599038(0x4e1)](this[_0x599038(0x1c7)]+'\x20('+this[_0x599038(0x3d0)]['wuid']+_0x599038(0x1ca));let _0x432c78=_0x135d60['replace'](/^data:image\/(jpeg|png|gif);base64,/,''),_0x144ec8=Buffer[_0x599038(0x6c7)](_0x432c78,_0x599038(0x622));_0x4bf2be=''+(0x0,j['join'])(this[_0x599038(0x531)],_0x599038(0x7fc)+_0x36f9c4+_0x599038(0x464)),this[_0x599038(0x478)][_0x599038(0x4e1)](this['instanceName']+'\x20('+this['instance'][_0x599038(0x4ae)]+'):Image\x20path:\x20'+_0x4bf2be),await(0x0,Ut[_0x599038(0x879)])(_0x144ec8)[_0x599038(0x77f)](_0x4bf2be),this['logger']['verbose'](this[_0x599038(0x1c7)]+'\x20('+this[_0x599038(0x3d0)][_0x599038(0x4ae)]+_0x599038(0x79e));}else{this['logger'][_0x599038(0x4e1)](this['instanceName']+'\x20('+this[_0x599038(0x3d0)]['wuid']+'):Image\x20is\x20url');let _0x53ed2c=new Date()[_0x599038(0x64e)](),_0x401b5e=_0x135d60+_0x599038(0x727)+_0x53ed2c;this[_0x599038(0x478)]['verbose'](this[_0x599038(0x1c7)]+'\x20('+this['instance'][_0x599038(0x4ae)]+_0x599038(0x209)+_0x401b5e);let _0x4038f9=await K[_0x599038(0x879)][_0x599038(0x840)](_0x401b5e,{'responseType':_0x599038(0x37c)});this[_0x599038(0x478)][_0x599038(0x4e1)](this[_0x599038(0x1c7)]+'\x20('+this[_0x599038(0x3d0)][_0x599038(0x4ae)]+_0x599038(0x64d));let _0xc0fd93=Buffer[_0x599038(0x6c7)](_0x4038f9[_0x599038(0x877)],_0x599038(0x3ff));_0x4bf2be=''+(0x0,j['join'])(this[_0x599038(0x531)],_0x599038(0x7fc)+_0x36f9c4+_0x599038(0x464)),this[_0x599038(0x478)][_0x599038(0x4e1)](this['instanceName']+'\x20('+this['instance'][_0x599038(0x4ae)]+_0x599038(0x58b)+_0x4bf2be),await(0x0,Ut[_0x599038(0x879)])(_0xc0fd93)[_0x599038(0x77f)](_0x4bf2be),this[_0x599038(0x478)][_0x599038(0x4e1)](this[_0x599038(0x1c7)]+'\x20('+this[_0x599038(0x3d0)][_0x599038(0x4ae)]+'):Image\x20created');}return await(0x0,Ut[_0x599038(0x879)])(_0x4bf2be)['webp']()[_0x599038(0x77f)](_0x385da6),this[_0x599038(0x478)][_0x599038(0x4e1)](this[_0x599038(0x1c7)]+'\x20('+this[_0x599038(0x3d0)]['wuid']+'):Image\x20converted\x20to\x20WebP'),k[_0x599038(0x81e)](_0x4bf2be),this['logger']['verbose'](this[_0x599038(0x1c7)]+'\x20('+this[_0x599038(0x3d0)][_0x599038(0x4ae)]+_0x599038(0x833)),_0x385da6;}catch(_0x2193ba){let _0x236359='Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP',_0x248a45=_0x2193ba instanceof Error?_0x2193ba[_0x599038(0x70f)]:typeof _0x2193ba==_0x599038(0x54e)?JSON['stringify'](_0x2193ba):_0x2193ba,_0x44a07a=_0x236359+':\x20'+_0x248a45;this[_0x599038(0x478)][_0x599038(0x3c6)](this[_0x599038(0x1c7)]+'\x20('+this[_0x599038(0x3d0)]['wuid']+_0x599038(0x71a)+_0x44a07a);}}async['mediaSticker'](_0x23ad7a){const _0xc552ac=a0_0x3cfc7d;let _0x5ac884=await this[_0xc552ac(0x6ef)](_0x23ad7a[_0xc552ac(0x485)][_0xc552ac(0x5f6)],_0x23ad7a[_0xc552ac(0x162)]),_0x15cfa9=await this[_0xc552ac(0x845)](_0x23ad7a[_0xc552ac(0x162)],{'sticker':{'url':_0x5ac884}},_0x23ad7a?.[_0xc552ac(0x1e9)]);return k['unlinkSync'](_0x5ac884),this[_0xc552ac(0x478)]['verbose'](this[_0xc552ac(0x1c7)]+'\x20('+this[_0xc552ac(0x3d0)][_0xc552ac(0x4ae)]+_0xc552ac(0x26e)),_0x15cfa9;}async[a0_0x3cfc7d(0x53d)](_0x4fd0ab){const _0x36dcfa=a0_0x3cfc7d;if(this[_0x36dcfa(0x478)]['verbose'](this[_0x36dcfa(0x1c7)]+'\x20('+this[_0x36dcfa(0x3d0)][_0x36dcfa(0x4ae)]+'):Sending\x20audio\x20whatsapp'),!_0x4fd0ab['options']?.[_0x36dcfa(0x2ba)]&&_0x4fd0ab[_0x36dcfa(0x1e9)]?.[_0x36dcfa(0x2ba)]!==!0x1&&(_0x4fd0ab[_0x36dcfa(0x1e9)][_0x36dcfa(0x2ba)]=!0x0),_0x4fd0ab[_0x36dcfa(0x1e9)]?.[_0x36dcfa(0x2ba)]){let _0x16e56a=await this[_0x36dcfa(0x637)](_0x4fd0ab[_0x36dcfa(0x15c)][_0x36dcfa(0x873)]);if(typeof _0x16e56a==_0x36dcfa(0x3f6)){let _0x3f1ae3=k[_0x36dcfa(0x5bb)](_0x16e56a)[_0x36dcfa(0x885)]('base64');return this[_0x36dcfa(0x845)](_0x4fd0ab[_0x36dcfa(0x162)],{'audio':Buffer[_0x36dcfa(0x6c7)](_0x3f1ae3,_0x36dcfa(0x622)),'ptt':!0x0,'mimetype':_0x36dcfa(0x5da)},{'presence':_0x36dcfa(0x2c2),'delay':_0x4fd0ab?.['options']?.['delay']});}else throw new x(_0x16e56a);}return await this['sendMessageWithRetry'](_0x4fd0ab[_0x36dcfa(0x162)],{'audio':(0x0,J[_0x36dcfa(0x344)])(_0x4fd0ab[_0x36dcfa(0x15c)][_0x36dcfa(0x873)])?{'url':_0x4fd0ab[_0x36dcfa(0x15c)][_0x36dcfa(0x873)]}:Buffer[_0x36dcfa(0x6c7)](_0x4fd0ab[_0x36dcfa(0x15c)][_0x36dcfa(0x873)],_0x36dcfa(0x622)),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':_0x36dcfa(0x2c2),'delay':_0x4fd0ab?.[_0x36dcfa(0x1e9)]?.['delay']});}async[a0_0x3cfc7d(0x637)](_0x2facd7){const _0x356969=a0_0x3cfc7d;this[_0x356969(0x478)][_0x356969(0x4e1)](this[_0x356969(0x1c7)]+'\x20('+this[_0x356969(0x3d0)][_0x356969(0x4ae)]+'):Processing\x20audio');let _0x215bcc=(0x0,J[_0x356969(0x344)])(_0x2facd7)?(0x0,oe[_0x356969(0x582)])(_0x356969(0x3bb))[_0x356969(0x3f8)](_0x2facd7)[_0x356969(0x111)]('hex'):(0x0,oe[_0x356969(0x582)])(_0x356969(0x3bb))[_0x356969(0x3f8)](_0x2facd7)[_0x356969(0x111)](_0x356969(0x7e3)),_0x28269f=''+(0x0,j[_0x356969(0x149)])(this['storePath'],_0x215bcc+'.ogg');if(k['existsSync'](_0x28269f))return this[_0x356969(0x478)][_0x356969(0x4e1)](this[_0x356969(0x1c7)]+'\x20('+this[_0x356969(0x3d0)]['wuid']+_0x356969(0x5d0)),_0x28269f;let _0x368e38=''+(0x0,j[_0x356969(0x149)])(this[_0x356969(0x531)],_0x356969(0x7fc)+(0x0,Q['v4'])()+'.mp3');if((0x0,J[_0x356969(0x344)])(_0x2facd7)){let _0x2ea724=new Date()[_0x356969(0x64e)](),_0x120095=_0x2facd7+_0x356969(0x727)+_0x2ea724,_0x98482f=await K[_0x356969(0x879)][_0x356969(0x840)](_0x120095,{'responseType':_0x356969(0x37c)});k[_0x356969(0x87e)](_0x368e38,_0x98482f['data']);}else{let _0x3e2d4a=Buffer['from'](_0x2facd7,'base64');k[_0x356969(0x87e)](_0x368e38,_0x3e2d4a);}return new Promise((_0x114373,_0x486b9f)=>{const _0x2d912e=_0x356969;(0x0,Ue['exec'])(Ds['default']['path']+_0x2d912e(0x612)+_0x368e38+_0x2d912e(0x39c)+_0x28269f+_0x2d912e(0x78d),_0x4c4b03=>{const _0x13192a=_0x2d912e;if(k[_0x13192a(0x81e)](_0x368e38),_0x4c4b03){this['logger'][_0x13192a(0x4e1)](this[_0x13192a(0x1c7)]+'\x20('+this['instance']['wuid']+_0x13192a(0x738)),_0x486b9f(_0x4c4b03);return;}this[_0x13192a(0x478)][_0x13192a(0x4e1)](this[_0x13192a(0x1c7)]+'\x20('+this[_0x13192a(0x3d0)]['wuid']+_0x13192a(0x58c)),_0x114373(_0x28269f);});});}async['convertaudioMP3'](_0x354da8){const _0x58fe35=a0_0x3cfc7d;this[_0x58fe35(0x478)][_0x58fe35(0x4e1)](this[_0x58fe35(0x1c7)]+'\x20('+this[_0x58fe35(0x3d0)][_0x58fe35(0x4ae)]+'):Processing\x20audio');let _0x34df63=(0x0,oe['createHash'])(_0x58fe35(0x3bb))[_0x58fe35(0x3f8)](_0x354da8)[_0x58fe35(0x111)](_0x58fe35(0x7e3)),_0x4e492d=''+(0x0,j[_0x58fe35(0x149)])(this[_0x58fe35(0x531)],_0x34df63+'.mp3');if(k['existsSync'](_0x4e492d))return this[_0x58fe35(0x478)][_0x58fe35(0x4e1)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x58fe35(0x5d0)),j['default'][_0x58fe35(0x1ad)](_0x4e492d);let _0x5714a0=''+(0x0,j['join'])(this[_0x58fe35(0x531)],_0x58fe35(0x7fc)+_0x34df63+_0x58fe35(0x5fd));if((0x0,J[_0x58fe35(0x344)])(_0x354da8)){let _0xed660a=new Date()[_0x58fe35(0x64e)](),_0x78ba59=_0x354da8+_0x58fe35(0x727)+_0xed660a,_0x368b23=await K[_0x58fe35(0x879)][_0x58fe35(0x840)](_0x78ba59,{'responseType':'arraybuffer'});k[_0x58fe35(0x87e)](_0x5714a0,_0x368b23[_0x58fe35(0x877)]);}else{let _0x19768e=Buffer[_0x58fe35(0x6c7)](_0x354da8,_0x58fe35(0x622));k[_0x58fe35(0x87e)](_0x5714a0,_0x19768e);}return new Promise((_0x21d96c,_0x3769bb)=>{const _0x18094b=_0x58fe35;(0x0,Ue[_0x18094b(0x73d)])(Ds[_0x18094b(0x879)][_0x18094b(0x304)]+_0x18094b(0x612)+_0x5714a0+_0x18094b(0x7f8)+_0x4e492d+_0x18094b(0x78d),_0x3431f0=>{const _0x109504=_0x18094b;if(k[_0x109504(0x81e)](_0x5714a0),_0x3431f0){this[_0x109504(0x478)][_0x109504(0x4e1)](this[_0x109504(0x1c7)]+'\x20('+this[_0x109504(0x3d0)][_0x109504(0x4ae)]+_0x109504(0x738)),_0x3769bb(_0x3431f0);return;}this[_0x109504(0x478)][_0x109504(0x4e1)](this[_0x109504(0x1c7)]+'\x20('+this['instance'][_0x109504(0x4ae)]+'):Audio\x20converted\x20and\x20stored\x20in\x20cache'),_0x21d96c(j[_0x109504(0x879)][_0x109504(0x1ad)](_0x4e492d));});});}async[a0_0x3cfc7d(0x418)](_0x352e60){const _0x5de8dc=a0_0x3cfc7d;console[_0x5de8dc(0x547)](_0x5de8dc(0x208),_0x352e60);let _0x3faef4;try{_0x352e60[_0x5de8dc(0x418)]?.[_0x5de8dc(0x4a8)]&&(_0x3faef4=await this['prepareMediaMessage']({'mediatype':_0x5de8dc(0x5f6),'media':_0x352e60['buttonMessage'][_0x5de8dc(0x4a8)]}));}catch(_0x52b952){throw console[_0x5de8dc(0x3c6)](_0x5de8dc(0x745),_0x52b952),new Error('Failed\x20to\x20prepare\x20media\x20message');}try{let _0x236e05={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':'*Teste\x20de\x20Título*\x0a\x0aDescrição\x20de\x20Teste\x0a'},'footer':{'text':'Rodapé\x20de\x20Teste'},'header':((()=>{const _0x45a074=_0x5de8dc;if(_0x3faef4?.[_0x45a074(0x70f)]?.[_0x45a074(0x7bb)])return{'hasMediaAttachment':!!_0x3faef4[_0x45a074(0x70f)][_0x45a074(0x7bb)],'imageMessage':_0x3faef4['message'][_0x45a074(0x7bb)]};})()),'nativeFlowMessage':{'buttons':[{'name':_0x5de8dc(0x29c),'buttonParamsJson':JSON[_0x5de8dc(0x238)]({'display_text':_0x5de8dc(0x163),'id':'1'})},{'name':_0x5de8dc(0x29c),'buttonParamsJson':JSON[_0x5de8dc(0x238)]({'display_text':_0x5de8dc(0x6e8),'id':'2'})}],'messageParamsJson':JSON[_0x5de8dc(0x238)]({'from':_0x5de8dc(0x4e7),'templateId':_0x5de8dc(0x61c)+(0x0,oe[_0x5de8dc(0x5eb)])(0x12)['toString']('hex')[_0x5de8dc(0x593)]()})}}}}};return await this['sendMessageWithTypingButtons'](_0x352e60[_0x5de8dc(0x162)],_0x236e05,_0x352e60?.[_0x5de8dc(0x1e9)]);}catch(_0x6a3d10){throw console[_0x5de8dc(0x3c6)](_0x5de8dc(0x5a0),_0x6a3d10),new Error(_0x5de8dc(0x859));}}async[a0_0x3cfc7d(0x5b8)](_0x11a795){const _0x428bec=a0_0x3cfc7d;return await this['sendMessageWithRetry'](_0x11a795[_0x428bec(0x162)],{'locationMessage':{'degreesLatitude':_0x11a795[_0x428bec(0x5b8)][_0x428bec(0x83a)],'degreesLongitude':_0x11a795[_0x428bec(0x5b8)][_0x428bec(0x3a6)],'name':_0x11a795[_0x428bec(0x5b8)]?.[_0x428bec(0x75b)],'address':_0x11a795[_0x428bec(0x5b8)]?.[_0x428bec(0x370)]}},_0x11a795?.[_0x428bec(0x1e9)]);}async[a0_0x3cfc7d(0x3c5)](_0x1f9f5c){const _0x3f3b35=a0_0x3cfc7d;let _0xba2627={},_0x4add0e=async _0x516b72=>{const _0x4f746a=a0_0x1146;let _0x35245f=_0x4f746a(0x796)+_0x516b72[_0x4f746a(0x409)]+_0x4f746a(0x237)+_0x516b72[_0x4f746a(0x409)]+'\x0a';_0x516b72[_0x4f746a(0x70a)]&&(_0x35245f+=_0x4f746a(0x6ea)+_0x516b72['organization']+';\x0a'),_0x516b72[_0x4f746a(0x4d8)]&&(_0x35245f+=_0x4f746a(0x40f)+_0x516b72[_0x4f746a(0x4d8)]+'\x0a'),_0x516b72[_0x4f746a(0x855)]&&(_0x35245f+=_0x4f746a(0x673)+_0x516b72[_0x4f746a(0x855)]+'\x0a');let _0x3bac51='',_0x1cdd67=0x1;if(_0x516b72[_0x4f746a(0x2c6)]){let _0xfcdc76=_0x516b72[_0x4f746a(0x2c6)][_0x4f746a(0x407)]('|');for(let _0x3be61d of _0xfcdc76){let _0x5b0155=await this[_0x4f746a(0x434)]({'numbers':[_0x3be61d]}),_0x48cafe=(_0x5b0155['length']>0x0?_0x5b0155[0x0]['jid']:this[_0x4f746a(0x81c)](_0x3be61d))[_0x4f746a(0x5e0)](_0x4f746a(0x10f),'');_0x3bac51+='item'+_0x1cdd67+'.TEL;waid='+_0x48cafe+':'+_0x3be61d+_0x4f746a(0x49f)+_0x1cdd67+_0x4f746a(0x7f0),_0x1cdd67++;}}return _0x35245f+=_0x3bac51+_0x4f746a(0x1d7),_0x35245f;};return _0x1f9f5c[_0x3f3b35(0x3c5)]['length']===0x1?_0xba2627[_0x3f3b35(0x3c5)]={'displayName':_0x1f9f5c[_0x3f3b35(0x3c5)][0x0][_0x3f3b35(0x409)],'vcard':await _0x4add0e(_0x1f9f5c[_0x3f3b35(0x3c5)][0x0])}:_0xba2627[_0x3f3b35(0x7c2)]={'displayName':_0x1f9f5c[_0x3f3b35(0x3c5)][_0x3f3b35(0x11c)]+_0x3f3b35(0x2d9),'contacts':await Promise[_0x3f3b35(0x35a)](_0x1f9f5c[_0x3f3b35(0x3c5)]['map'](async _0x194ee9=>({'displayName':_0x194ee9[_0x3f3b35(0x409)],'vcard':await _0x4add0e(_0x194ee9)})))},await this[_0x3f3b35(0x845)](_0x1f9f5c[_0x3f3b35(0x162)],{..._0xba2627},_0x1f9f5c?.[_0x3f3b35(0x1e9)]);}async['reactionMessage'](_0x10d5bf){const _0x43cd3a=a0_0x3cfc7d;return await this['sendMessageWithRetry'](_0x10d5bf[_0x43cd3a(0x6d2)][_0x43cd3a(0x1e4)]['remoteJid'],{'reactionMessage':{'key':_0x10d5bf[_0x43cd3a(0x6d2)]['key'],'text':_0x10d5bf[_0x43cd3a(0x6d2)][_0x43cd3a(0x779)]}});}async['whatsappNumber'](_0x23d123){const _0x21d61f=a0_0x3cfc7d;let _0x3091bf=[];for await(let _0x226445 of _0x23d123[_0x21d61f(0x4cb)]){let _0x2b6deb=this[_0x21d61f(0x81c)](_0x226445),_0x1f5755=!0x1;try{if((0x0,w[_0x21d61f(0x6e5)])(_0x2b6deb)){let _0x4919e0=(await this['repository'][_0x21d61f(0x52b)][_0x21d61f(0x36a)]({'where':{'_id':_0x2b6deb}},this['instance'][_0x21d61f(0x4ae)]))[_0x21d61f(0x483)];_0x4919e0?(_0x1f5755=!0x0,_0x3091bf[_0x21d61f(0x7b9)](new ce(_0x4919e0['id'],_0x1f5755,_0x4919e0?.[_0x21d61f(0x507)]))):(_0x4919e0=await this[_0x21d61f(0x6f3)]({'groupJid':_0x2b6deb},'inner'),_0x3091bf[_0x21d61f(0x7b9)](new ce(_0x4919e0['id'],!!_0x4919e0?.['id'],_0x4919e0?.[_0x21d61f(0x507)])));}else{if(_0x2b6deb[_0x21d61f(0x1ec)](_0x21d61f(0x65b)))_0x3091bf[_0x21d61f(0x7b9)](new ce(_0x2b6deb,!0x0));else{let _0x1de0c8=(await this[_0x21d61f(0x495)]['onWhatsApp'](_0x2b6deb))[0x0];_0x3091bf[_0x21d61f(0x7b9)](new ce(_0x1de0c8['jid'],_0x1de0c8[_0x21d61f(0x78a)]));}}}catch{(0x0,w['isJidGroup'])(_0x2b6deb)||await this[_0x21d61f(0x201)](_0x2b6deb),_0x3091bf['push'](new ce(_0x226445,!0x1));}}return _0x3091bf;}async[a0_0x3cfc7d(0x201)](_0x2f4975){const _0x26b3e9=a0_0x3cfc7d;try{await this[_0x26b3e9(0x67f)]['chat']['findOne']({'where':{'_id':_0x2f4975,'imported':!0x0}},this[_0x26b3e9(0x3d0)][_0x26b3e9(0x4ae)])&&(await this['repository'][_0x26b3e9(0x52b)][_0x26b3e9(0x373)](_0x2f4975,this['instance']['wuid']),this['logger']['info'](_0x26b3e9(0x7bf)+_0x2f4975+_0x26b3e9(0x3c1)));}catch(_0x4752e6){let _0x165a6f=_0x26b3e9(0x324),_0x548f8a=_0x4752e6 instanceof Error?_0x4752e6[_0x26b3e9(0x70f)]:typeof _0x4752e6==_0x26b3e9(0x54e)?JSON[_0x26b3e9(0x238)](_0x4752e6):_0x4752e6,_0x35f98f=_0x165a6f+':\x20'+_0x548f8a;this['logger'][_0x26b3e9(0x3c6)](this[_0x26b3e9(0x1c7)]+'\x20('+this['instance'][_0x26b3e9(0x4ae)]+'):\x20'+_0x35f98f);}}async[a0_0x3cfc7d(0x66f)](_0x2fc4ee){const _0x3cb979=a0_0x3cfc7d;try{let _0x445f56=_0x2fc4ee[_0x3cb979(0x463)][_0x3cb979(0x56c)](_0x23b5a5=>(0x0,w[_0x3cb979(0x6e5)])(_0x23b5a5[_0x3cb979(0x6d9)])||(0x0,w[_0x3cb979(0x461)])(_0x23b5a5[_0x3cb979(0x6d9)]))['map'](_0x1d171c=>({'remoteJid':_0x1d171c[_0x3cb979(0x6d9)],'fromMe':_0x1d171c[_0x3cb979(0x562)],'id':_0x1d171c['id']}));await this[_0x3cb979(0x495)]['readMessages'](_0x445f56);let _0x1ce284=_0x445f56[_0x3cb979(0x733)](_0x361bbc=>this[_0x3cb979(0x4b3)](_0x361bbc,{'status':_0x3cb979(0x69f),'owner':this[_0x3cb979(0x3d0)][_0x3cb979(0x4ae)]})),_0x366e19=_0x445f56['map'](_0x124821=>this[_0x3cb979(0x67f)][_0x3cb979(0x52b)]['updateOne']({'where':{'_id':_0x124821['remoteJid']}},{'unreadcount':0x0},this[_0x3cb979(0x3d0)][_0x3cb979(0x4ae)])),[_0x4925bf,_0x1b2ced]=await Promise[_0x3cb979(0x35a)]([Promise[_0x3cb979(0x35a)](_0x1ce284),Promise[_0x3cb979(0x35a)](_0x366e19)]);return _0x1b2ced[_0x3cb979(0x56c)](_0x1b7a1a=>_0x1b7a1a!==null)[_0x3cb979(0x455)](_0x1b1131=>{const _0x431337=_0x3cb979;F(this[_0x431337(0x1c7)],_0x431337(0x2cb),{'chat':_0x1b1131});}),{'message':_0x3cb979(0x3fb),'read':_0x3cb979(0x20f)};}catch(_0x587fc){let _0x4752f3=_0x3cb979(0x297),_0x5591b6=_0x587fc instanceof Error?_0x587fc['message']:typeof _0x587fc=='object'?JSON[_0x3cb979(0x238)](_0x587fc):_0x587fc,_0x5f2d03=_0x4752f3+':\x20'+_0x5591b6;throw this[_0x3cb979(0x478)][_0x3cb979(0x3c6)](this[_0x3cb979(0x1c7)]+'\x20('+this[_0x3cb979(0x3d0)]['wuid']+_0x3cb979(0x71a)+_0x5f2d03),new x(_0x5f2d03);}}async[a0_0x3cfc7d(0x838)](_0x47a6d3){const _0x1f631a=a0_0x3cfc7d;let _0x2da436={'where':{'key':{'remoteJid':_0x47a6d3}},'limit':0x1},_0x3ce6f5=await this[_0x1f631a(0x773)](_0x2da436);return _0x3ce6f5||(this[_0x1f631a(0x478)][_0x1f631a(0x3c6)](_0x1f631a(0x3c9)+_0x47a6d3),null);}async[a0_0x3cfc7d(0x803)](_0x59f90e){const _0xd0b7bc=a0_0x3cfc7d;this[_0xd0b7bc(0x478)][_0xd0b7bc(0x4e1)](this[_0xd0b7bc(0x1c7)]+'\x20('+this[_0xd0b7bc(0x3d0)][_0xd0b7bc(0x4ae)]+_0xd0b7bc(0x17b));try{let _0x3f0930=_0x59f90e[_0xd0b7bc(0x6f0)],_0xe07635=_0x59f90e[_0xd0b7bc(0x52b)];if(!_0x3f0930&&_0xe07635?_0x3f0930=await this[_0xd0b7bc(0x838)](_0xe07635):(_0x3f0930=_0x59f90e['lastMessage'],_0x3f0930['messageTimestamp']=_0x3f0930?.[_0xd0b7bc(0x2bb)]??Date['now'](),_0xe07635=_0x3f0930?.[_0xd0b7bc(0x1e4)]?.[_0xd0b7bc(0x6d9)]),!_0x3f0930||Object[_0xd0b7bc(0x1a4)](_0x3f0930)['length']===0x0)throw new U(_0xd0b7bc(0x295));this[_0xd0b7bc(0x478)]['verbose'](this[_0xd0b7bc(0x1c7)]+'\x20('+this[_0xd0b7bc(0x3d0)][_0xd0b7bc(0x4ae)]+_0xd0b7bc(0x2f2)+_0xe07635);try{await this[_0xd0b7bc(0x495)][_0xd0b7bc(0x106)]({'archive':_0x59f90e['archive'],'lastMessages':[_0x3f0930]},this[_0xd0b7bc(0x81c)](_0xe07635));}catch(_0x20bbfa){let _0x2eb2f4='Error\x20in\x20chatModify\x20for\x20number\x20'+_0xe07635,_0x385cf9=_0x20bbfa instanceof Error?_0x20bbfa[_0xd0b7bc(0x70f)]:typeof _0x20bbfa==_0xd0b7bc(0x54e)?JSON['stringify'](_0x20bbfa):_0x20bbfa,_0x570304=_0x2eb2f4+':\x20'+_0x385cf9;this[_0xd0b7bc(0x478)][_0xd0b7bc(0x3c6)](this[_0xd0b7bc(0x1c7)]+'\x20('+this[_0xd0b7bc(0x3d0)][_0xd0b7bc(0x4ae)]+_0xd0b7bc(0x71a)+_0x570304);}this['logger']['verbose'](this[_0xd0b7bc(0x1c7)]+'\x20('+this['instance'][_0xd0b7bc(0x4ae)]+'):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20'+_0xe07635);let _0x4e007f=await this['repository'][_0xd0b7bc(0x52b)]['updateOne']({'where':{'_id':_0x3f0930?.['key']?.[_0xd0b7bc(0x6d9)]}},{'archived':_0x59f90e[_0xd0b7bc(0x573)]},this['instance'][_0xd0b7bc(0x4ae)]);return _0x4e007f?(this[_0xd0b7bc(0x478)][_0xd0b7bc(0x4e1)](this[_0xd0b7bc(0x1c7)]+'\x20('+this[_0xd0b7bc(0x3d0)]['wuid']+_0xd0b7bc(0x7d0)+JSON[_0xd0b7bc(0x238)](_0x4e007f)),F(this['instanceName'],_0xd0b7bc(0x2cb),{'chat':_0x4e007f})):this[_0xd0b7bc(0x478)][_0xd0b7bc(0x3c6)](this[_0xd0b7bc(0x1c7)]+'\x20('+this[_0xd0b7bc(0x3d0)][_0xd0b7bc(0x4ae)]+_0xd0b7bc(0x64b)+_0xe07635),{'chatId':_0xe07635,'archived':_0x59f90e[_0xd0b7bc(0x573)]};}catch(_0x59f3e1){let _0x4ab787='Erro\x20ao\x20arquivar\x20chat',_0x3d6d48=_0x59f3e1 instanceof Error?_0x59f3e1['message']:typeof _0x59f3e1=='object'?JSON[_0xd0b7bc(0x238)](_0x59f3e1):_0x59f3e1,_0x27df98=_0x4ab787+':\x20'+_0x3d6d48;throw this['logger']['error'](this[_0xd0b7bc(0x1c7)]+'\x20('+this[_0xd0b7bc(0x3d0)]['wuid']+'):\x20'+_0x27df98),new x(_0x27df98);}}async[a0_0x3cfc7d(0x373)](_0x2af040){const _0x129561=a0_0x3cfc7d;this[_0x129561(0x478)][_0x129561(0x4e1)](this[_0x129561(0x1c7)]+'\x20('+this[_0x129561(0x3d0)][_0x129561(0x4ae)]+_0x129561(0x48a));try{let _0x50ba46=await this[_0x129561(0x838)](_0x2af040);if(!_0x50ba46||Object[_0x129561(0x1a4)](_0x50ba46)[_0x129561(0x11c)]===0x0)throw new U('Last\x20message\x20not\x20found');let _0x2bfa07=_0x50ba46[0x0];this[_0x129561(0x478)][_0x129561(0x4e1)](this[_0x129561(0x1c7)]+'\x20('+this[_0x129561(0x3d0)][_0x129561(0x4ae)]+'):Delete\x20chat\x20in\x20client\x20for\x20number:\x20'+_0x2af040);try{await this[_0x129561(0x495)][_0x129561(0x106)]({'delete':!0x0,'lastMessages':[{'key':_0x2bfa07[_0x129561(0x1e4)],'messageTimestamp':_0x2bfa07[_0x129561(0x2bb)]}]},this['createJid'](_0x2af040));}catch(_0x281f8e){this['logger'][_0x129561(0x3c6)]('Error\x20in\x20chatModify\x20for\x20number\x20'+_0x2af040+':\x20'+_0x281f8e[_0x129561(0x885)]());}this['logger']['verbose'](this[_0x129561(0x1c7)]+'\x20('+this[_0x129561(0x3d0)][_0x129561(0x4ae)]+_0x129561(0x429)+_0x2af040);return;}catch(_0xcd966c){throw this['logger']['error'](this['instanceName']+'\x20('+this['instance'][_0x129561(0x4ae)]+_0x129561(0x666)+_0xcd966c[_0x129561(0x885)]()),new x({'archived':!0x1,'message':[_0x129561(0x24b),_0xcd966c[_0x129561(0x885)]()]});}}async['deleteMessage'](_0x4d4b5f){const _0x50dafc=a0_0x3cfc7d;try{let _0x20a00a=await this['client'][_0x50dafc(0x6e9)](_0x4d4b5f['remoteJid'],{'delete':_0x4d4b5f});try{let _0x1beb6d=await this[_0x50dafc(0x4b3)](_0x4d4b5f,{'status':'DELETED','owner':this['instance']['wuid']});this[_0x50dafc(0x478)][_0x50dafc(0x4e1)](this[_0x50dafc(0x1c7)]+'\x20('+this[_0x50dafc(0x3d0)][_0x50dafc(0x4ae)]+_0x50dafc(0x38f)+_0x1beb6d);}catch(_0x1e7c96){this[_0x50dafc(0x478)][_0x50dafc(0x3c6)]('Error\x20updating\x20message\x20status:'+_0x1e7c96);}return _0x20a00a;}catch(_0x3a2eb7){throw new x('Error\x20while\x20deleting\x20message\x20for\x20everyone',_0x3a2eb7?.[_0x50dafc(0x885)]());}}async[a0_0x3cfc7d(0x224)](_0x143e8d){const _0x3af47e=a0_0x3cfc7d;try{let _0x3c7116=_0x143e8d?.[_0x3af47e(0x70f)]?_0x143e8d:await this[_0x3af47e(0x446)](_0x143e8d[_0x3af47e(0x1e4)],!0x0);for(let _0x467207 of Na)_0x3c7116[_0x3af47e(0x70f)][_0x467207]&&(_0x3c7116[_0x3af47e(0x70f)]=_0x3c7116[_0x3af47e(0x70f)][_0x467207]['message']);let _0x5f33a5,_0x2195ce;for(let _0x195071 of Ea)if(_0x5f33a5=_0x3c7116['message'][_0x195071],_0x5f33a5){_0x2195ce=_0x195071;break;}if(!_0x5f33a5)throw'The\x20message\x20is\x20not\x20of\x20the\x20media\x20type';typeof _0x5f33a5['mediaKey']==_0x3af47e(0x54e)&&(_0x3c7116[_0x3af47e(0x70f)]=JSON[_0x3af47e(0x675)](JSON[_0x3af47e(0x238)](_0x3c7116['message'])));let _0x6ebde8=await(0x0,w[_0x3af47e(0x65f)])({'key':_0x3c7116?.['key'],'message':_0x3c7116?.[_0x3af47e(0x70f)]},_0x3af47e(0x3aa),{},{'logger':(0x0,Ft['default'])({'level':_0x3af47e(0x11b)}),'reuploadRequest':this['client'][_0x3af47e(0x48c)]});if(!(_0x6ebde8 instanceof Buffer))throw new Error('Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.');let _0x3e6627=this[_0x3af47e(0x497)][_0x3af47e(0x840)](_0x3af47e(0x621)),_0x27a40c,_0xe5387f;if(_0x5f33a5[_0x3af47e(0x40b)])_0x27a40c=_0x5f33a5[_0x3af47e(0x40b)];else{let _0xd2bce6=_0x5f33a5[_0x3af47e(0x1cd)]?.[_0x3af47e(0x151)](/\/(\w+)/),_0x1d2495=_0xd2bce6?_0xd2bce6[0x1]:null;if(!_0x1d2495)throw new Error(_0x3af47e(0x202));_0x27a40c=(0x0,Q['v4'])()+'.'+_0x1d2495;}_0x2195ce===_0x3af47e(0x15c)?_0xe5387f=_0x3af47e(0x371)+await this['convertaudioMP3'](_0x6ebde8[_0x3af47e(0x885)](_0x3af47e(0x622))):(await this[_0x3af47e(0x222)](_0x6ebde8,_0x27a40c),_0xe5387f=_0x3af47e(0x371)+_0x27a40c);let _0x21c576=this[_0x3af47e(0x497)][_0x3af47e(0x840)](_0x3af47e(0x10b))[_0x3af47e(0x7a5)];if(!_0x21c576){let _0x5729e6=this['configService'][_0x3af47e(0x840)](_0x3af47e(0x424));_0x21c576=_0x3af47e(0x750)+(_0x5729e6&&_0x5729e6[_0x3af47e(0x81f)][_0x3af47e(0x407)]('/')[0x4]);}_0xe5387f=''+_0x21c576+_0xe5387f;let _0x442222=0xc*0x3c*0x3c*0x3e8,_0xc3d485={'where':{'_id':_0x3c7116['key']['id']}},_0x3044bd={'message_normalized.fileUrl':_0xe5387f,'message_normalized.expires_fileUrl':Date[_0x3af47e(0x6aa)]()+_0x442222};try{let _0x27cd26=await this[_0x3af47e(0x67f)][_0x3af47e(0x70f)][_0x3af47e(0x3f8)](_0xc3d485,_0x3044bd,this[_0x3af47e(0x3d0)][_0x3af47e(0x4ae)]);_0x27cd26&&F(this[_0x3af47e(0x1c7)],_0x3af47e(0x30c),{'message':_0x27cd26});}catch(_0xf67b3f){let _0x333abd='Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage',_0x36de0c=_0xf67b3f instanceof Error?_0xf67b3f[_0x3af47e(0x70f)]:typeof _0xf67b3f==_0x3af47e(0x54e)?JSON[_0x3af47e(0x238)](_0xf67b3f):_0xf67b3f,_0xe65fd7=_0x333abd+':\x20'+_0x36de0c;this['logger'][_0x3af47e(0x3c6)](this[_0x3af47e(0x1c7)]+'\x20('+this[_0x3af47e(0x3d0)]['wuid']+_0x3af47e(0x71a)+_0xe65fd7);}return{'mediaType':_0x2195ce,'fileName':_0x5f33a5[_0x3af47e(0x40b)],'caption':_0x5f33a5['caption'],'size':{'fileLength':_0x5f33a5['fileLength'],'height':_0x5f33a5[_0x3af47e(0x848)],'width':_0x5f33a5[_0x3af47e(0x540)]},'mimetype':_0x5f33a5['mimetype'],'base64':_0x6ebde8['toString'](_0x3af47e(0x622)),'fileUrl':_0xe5387f,'expires_fileUrl':Date[_0x3af47e(0x6aa)]()+_0x442222};}catch(_0x367766){let _0x52e66d='Falha\x20ao\x20processar\x20a\x20solicitação',_0x31675e=_0x367766 instanceof Error?_0x367766[_0x3af47e(0x70f)]:typeof _0x367766==_0x3af47e(0x54e)?JSON[_0x3af47e(0x238)](_0x367766):_0x367766,_0xbe6dec=_0x52e66d+':\x20'+_0x31675e;throw this[_0x3af47e(0x478)][_0x3af47e(0x3c6)](this[_0x3af47e(0x1c7)]+'\x20('+this['instance'][_0x3af47e(0x4ae)]+_0x3af47e(0x71a)+_0xbe6dec),new m(_0xbe6dec);}}async[a0_0x3cfc7d(0x222)](_0x1478e9,_0x105080){const _0x24c946=a0_0x3cfc7d;let _0x8e3ab=j[_0x24c946(0x879)][_0x24c946(0x149)](__dirname,_0x24c946(0x3e3));k[_0x24c946(0x6a9)](_0x8e3ab)||k['mkdirSync'](_0x8e3ab,{'recursive':!0x0});let _0x542bdf=j[_0x24c946(0x879)]['join'](_0x8e3ab,_0x105080);return new Promise((_0x5b9981,_0x44093c)=>{k['writeFile'](_0x542bdf,_0x1478e9,_0x352885=>{const _0x5e235e=a0_0x1146;_0x352885?(this[_0x5e235e(0x478)]['error'](_0x5e235e(0x802)+(_0x352885 instanceof Error?_0x352885[_0x5e235e(0x70f)]:JSON[_0x5e235e(0x238)](_0x352885,null,0x2))),_0x44093c(_0x352885)):(this[_0x5e235e(0x478)][_0x5e235e(0x547)](_0x5e235e(0x378)+_0x542bdf),_0x5b9981(_0x542bdf));});});}async[a0_0x3cfc7d(0x623)](_0x2af569){const _0x47b0a9=a0_0x3cfc7d;return await this[_0x47b0a9(0x67f)][_0x47b0a9(0x447)][_0x47b0a9(0x1c4)](_0x2af569,this[_0x47b0a9(0x3d0)][_0x47b0a9(0x4ae)]);}async[a0_0x3cfc7d(0x4ff)](){const _0x1ef7d5=a0_0x3cfc7d;return await this[_0x1ef7d5(0x67f)][_0x1ef7d5(0x1d3)][_0x1ef7d5(0x1c4)]({'where':{}},this[_0x1ef7d5(0x3d0)]['wuid']);}async['fetchMessages'](_0x5ed38e){const _0x451f39=a0_0x3cfc7d;return await this[_0x451f39(0x67f)][_0x451f39(0x70f)]['find'](_0x5ed38e,this[_0x451f39(0x3d0)][_0x451f39(0x4ae)]);}async[a0_0x3cfc7d(0x307)](){const _0x2946db=a0_0x3cfc7d;return this[_0x2946db(0x67f)]['chat'][_0x2946db(0x777)](this[_0x2946db(0x3d0)][_0x2946db(0x4ae)]),this[_0x2946db(0x67f)][_0x2946db(0x52b)][_0x2946db(0x72b)](this[_0x2946db(0x3d0)][_0x2946db(0x4ae)]),this[_0x2946db(0x67f)][_0x2946db(0x52b)]['updateMissingTags'](this[_0x2946db(0x3d0)][_0x2946db(0x4ae)]),this[_0x2946db(0x67f)][_0x2946db(0x52b)]['updateMissingCustomFields'](this[_0x2946db(0x3d0)][_0x2946db(0x4ae)]),await this[_0x2946db(0x67f)]['chat']['find']({'where':{}},this[_0x2946db(0x3d0)][_0x2946db(0x4ae)]);}async[a0_0x3cfc7d(0x5e3)](_0x15ca18){const _0x4b6f2d=a0_0x3cfc7d;try{if(!Array[_0x4b6f2d(0x2f5)](_0x15ca18)||_0x15ca18[_0x4b6f2d(0x11c)]===0x0)throw new Error(_0x4b6f2d(0x42d));let _0x236f7f=[],_0x3671da=[];for(let _0x572d4c of _0x15ca18){if(_0x572d4c[_0x4b6f2d(0x7b5)])_0x572d4c[_0x4b6f2d(0x7b5)]=this['createJid'](_0x572d4c['_id']);else continue;await this[_0x4b6f2d(0x67f)][_0x4b6f2d(0x52b)][_0x4b6f2d(0x36a)]({'where':{'_id':_0x572d4c[_0x4b6f2d(0x7b5)]}},this[_0x4b6f2d(0x3d0)][_0x4b6f2d(0x4ae)])?_0x3671da['push']({'_id':_0x572d4c[_0x4b6f2d(0x7b5)],'leadInfo':_0x572d4c[_0x4b6f2d(0x6ac)],'owner':this[_0x4b6f2d(0x3d0)]['wuid']}):_0x236f7f['push']({'_id':_0x572d4c['_id'],'owner':this[_0x4b6f2d(0x3d0)]['wuid'],'leadInfo':_0x572d4c[_0x4b6f2d(0x6ac)],'imported':!0x0});}return _0x3671da['length']>0x0&&await this[_0x4b6f2d(0x67f)][_0x4b6f2d(0x52b)]['updateMany'](_0x3671da[_0x4b6f2d(0x733)](_0x7169a7=>({'query':{'where':{'_id':_0x7169a7['_id'],'owner':this[_0x4b6f2d(0x3d0)][_0x4b6f2d(0x4ae)]}},'update':_0x7169a7}))),_0x236f7f[_0x4b6f2d(0x11c)]>0x0&&await this[_0x4b6f2d(0x67f)]['chat']['insertMany'](_0x236f7f,this[_0x4b6f2d(0x3d0)]['wuid']),{'updated':_0x3671da[_0x4b6f2d(0x11c)],'inserted':_0x236f7f[_0x4b6f2d(0x11c)]};}catch(_0x5bbd7e){let _0x171fdc='Erro\x20ao\x20importar\x20chats',_0x445007=_0x5bbd7e instanceof Error?_0x5bbd7e['message']:typeof _0x5bbd7e==_0x4b6f2d(0x54e)?JSON[_0x4b6f2d(0x238)](_0x5bbd7e):_0x5bbd7e,_0x144caa=_0x171fdc+':\x20'+_0x445007;throw this['logger'][_0x4b6f2d(0x3c6)](this[_0x4b6f2d(0x1c7)]+'\x20('+this[_0x4b6f2d(0x3d0)][_0x4b6f2d(0x4ae)]+_0x4b6f2d(0x71a)+_0x144caa),new m(_0x144caa);}}async[a0_0x3cfc7d(0x3c0)](_0x2d787a){const _0xc9eecf=a0_0x3cfc7d;try{if(!Array[_0xc9eecf(0x2f5)](_0x2d787a)||_0x2d787a['length']===0x0)throw new Error('Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.');let _0x29473e=0x64,_0x1b07a8=0x0;for(let _0x3ec034=0x0;_0x3ec034<_0x2d787a['length'];_0x3ec034+=_0x29473e){let _0x1ded7b=_0x2d787a[_0xc9eecf(0x1ae)](_0x3ec034,_0x3ec034+_0x29473e),{updated:_0x34f4a6}=await this[_0xc9eecf(0x80a)](_0x1ded7b);_0x1b07a8+=_0x34f4a6;}return{'updated':_0x1b07a8};}catch(_0x41829f){let _0x3aec35=_0xc9eecf(0x7b6),_0x5de42f=_0x41829f instanceof Error?_0x41829f[_0xc9eecf(0x70f)]:typeof _0x41829f==_0xc9eecf(0x54e)?JSON[_0xc9eecf(0x238)](_0x41829f):_0x41829f,_0x1c053d=_0x3aec35+':\x20'+_0x5de42f;throw this[_0xc9eecf(0x478)][_0xc9eecf(0x3c6)](this[_0xc9eecf(0x1c7)]+'\x20('+this['instance'][_0xc9eecf(0x4ae)]+_0xc9eecf(0x71a)+_0x1c053d),new m(_0x1c053d);}}async[a0_0x3cfc7d(0x80a)](_0x2d64f5){const _0x34cc41=a0_0x3cfc7d;try{let _0xb6f41d=await this[_0x34cc41(0x67f)][_0x34cc41(0x1d3)][_0x34cc41(0x1c4)]({'where':{}},this['instance'][_0x34cc41(0x4ae)]),_0x5072ae=new Set(_0xb6f41d['map'](_0x50325b=>_0x50325b['_id'])),_0x47991d=[],_0x3c04a4=[];for(let _0x280447 of _0x2d64f5){if(!_0x280447['_id'])continue;_0x280447[_0x34cc41(0x7b5)]=this[_0x34cc41(0x81c)](_0x280447[_0x34cc41(0x7b5)]);let _0x5e73cc=await this[_0x34cc41(0x67f)][_0x34cc41(0x52b)][_0x34cc41(0x36a)]({'where':{'_id':_0x280447['_id']}},this[_0x34cc41(0x3d0)][_0x34cc41(0x4ae)]),_0xff0a0={};if(Object[_0x34cc41(0x2b7)](_0x280447[_0x34cc41(0x6ac)])[_0x34cc41(0x455)](([_0xb77a21,_0x417f50])=>{const _0x5a427a=_0x34cc41;_0xff0a0[_0x5a427a(0x377)+_0xb77a21]=_0x417f50;}),_0x5e73cc&&!_0x5e73cc[_0x34cc41(0x210)]){let _0x191c2f=(_0x280447['leadInfo'][_0x34cc41(0x2c4)]||[])['filter'](_0x199cdd=>_0x5072ae[_0x34cc41(0x114)](_0x199cdd)),_0x5381a6=new Set(_0x5e73cc[_0x34cc41(0x6ac)][_0x34cc41(0x2c4)]||[]),_0x137109=_0x191c2f[_0x34cc41(0x56c)](_0x3186ab=>!_0x5381a6['has'](_0x3186ab)),_0x30f81b=[..._0x5381a6][_0x34cc41(0x56c)](_0x149d1c=>!_0x191c2f[_0x34cc41(0x1ec)](_0x149d1c));_0x3c04a4['push'](..._0x137109['map'](_0x607e9=>this['AddChatLabel'](_0x607e9,_0x280447['_id']))),_0x3c04a4[_0x34cc41(0x7b9)](..._0x30f81b[_0x34cc41(0x733)](_0x34e4cf=>this['RemoveChatLabel'](_0x34e4cf,_0x280447[_0x34cc41(0x7b5)]))),_0x280447[_0x34cc41(0x6ac)][_0x34cc41(0x2c4)]=_0x191c2f,_0x47991d['push']({'query':{'where':{'_id':_0x280447[_0x34cc41(0x7b5)],'owner':this[_0x34cc41(0x3d0)][_0x34cc41(0x4ae)]}},'update':_0xff0a0});}else _0xff0a0[_0x34cc41(0x210)]=!0x0,_0x47991d[_0x34cc41(0x7b9)]({'query':{'where':{'_id':_0x280447[_0x34cc41(0x7b5)],'owner':this['instance']['wuid']}},'update':_0xff0a0});}let _0xff5521=await this[_0x34cc41(0x67f)][_0x34cc41(0x52b)][_0x34cc41(0x609)](_0x47991d);return await Promise[_0x34cc41(0x35a)](_0x3c04a4),{'updated':_0xff5521};}catch(_0x586f6b){let _0x293df4=_0x34cc41(0x7b6),_0x568efa=_0x586f6b instanceof Error?_0x586f6b[_0x34cc41(0x70f)]:typeof _0x586f6b=='object'?JSON[_0x34cc41(0x238)](_0x586f6b):_0x586f6b,_0x5e8dc4=_0x293df4+':\x20'+_0x568efa;throw this['logger'][_0x34cc41(0x3c6)](this[_0x34cc41(0x1c7)]+'\x20('+this[_0x34cc41(0x3d0)][_0x34cc41(0x4ae)]+_0x34cc41(0x71a)+_0x5e8dc4),new m(_0x5e8dc4);}}async[a0_0x3cfc7d(0x384)](){return await this['client']['fetchPrivacySettings']();}async['updatePrivacySettings'](_0x1f3f6a){const _0x2731d9=a0_0x3cfc7d;try{return await this[_0x2731d9(0x495)][_0x2731d9(0x352)](_0x1f3f6a[_0x2731d9(0x3b8)][_0x2731d9(0x2a7)]),await this[_0x2731d9(0x495)][_0x2731d9(0x496)](_0x1f3f6a['privacySettings'][_0x2731d9(0x3dd)]),await this[_0x2731d9(0x495)][_0x2731d9(0x620)](_0x1f3f6a['privacySettings']['status']),await this[_0x2731d9(0x495)][_0x2731d9(0x294)](_0x1f3f6a[_0x2731d9(0x3b8)]['online']),await this[_0x2731d9(0x495)]['updateLastSeenPrivacy'](_0x1f3f6a[_0x2731d9(0x3b8)]['last']),await this[_0x2731d9(0x495)]['updateGroupsAddPrivacy'](_0x1f3f6a[_0x2731d9(0x3b8)][_0x2731d9(0x131)]),this[_0x2731d9(0x495)]?.['ws']?.['close'](),{'update':_0x2731d9(0x20f),'data':{'readreceipts':_0x1f3f6a['privacySettings'][_0x2731d9(0x2a7)],'profile':_0x1f3f6a[_0x2731d9(0x3b8)][_0x2731d9(0x3dd)],'status':_0x1f3f6a[_0x2731d9(0x3b8)][_0x2731d9(0x204)],'online':_0x1f3f6a['privacySettings'][_0x2731d9(0x34f)],'last':_0x1f3f6a[_0x2731d9(0x3b8)][_0x2731d9(0x2ff)],'groupadd':_0x1f3f6a[_0x2731d9(0x3b8)][_0x2731d9(0x131)]}};}catch(_0x2a0fd8){let _0x2f83b3=_0x2731d9(0x443),_0x260bd3=_0x2a0fd8 instanceof Error?_0x2a0fd8[_0x2731d9(0x70f)]:typeof _0x2a0fd8=='object'?JSON[_0x2731d9(0x238)](_0x2a0fd8):_0x2a0fd8,_0x2a2547=_0x2f83b3+':\x20'+_0x260bd3;throw this[_0x2731d9(0x478)]['error'](this[_0x2731d9(0x1c7)]+'\x20('+this[_0x2731d9(0x3d0)][_0x2731d9(0x4ae)]+'):\x20'+_0x2a2547),new m(_0x2a2547);}}async[a0_0x3cfc7d(0x45b)](_0x4762b9){const _0x1327cd=a0_0x3cfc7d;let _0x935804=(_0x4762b9?this['createJid'](_0x4762b9):this[_0x1327cd(0x495)]?.[_0x1327cd(0x145)]?.['id'])[_0x1327cd(0x5e0)](/:\d{1,2}@/g,'@');this[_0x1327cd(0x478)][_0x1327cd(0x4e1)](this[_0x1327cd(0x1c7)]+'\x20('+this[_0x1327cd(0x3d0)]['wuid']+_0x1327cd(0x127)+_0x935804);let _0x3f6dd9=await this[_0x1327cd(0x67f)][_0x1327cd(0x447)][_0x1327cd(0x36a)]({'where':{'_id':_0x935804}},this['instance'][_0x1327cd(0x4ae)]),_0x2a9028=_0x3f6dd9?_0x3f6dd9[_0x1327cd(0x7b2)]:null;try{let _0x5dce71=(await this[_0x1327cd(0x434)]({'numbers':[_0x935804]}))?.['shift'](),_0x22ba6b=(await this[_0x1327cd(0x7da)](_0x935804,null,!0x1))[_0x1327cd(0x5cc)]['pictureUrl'],_0x5e4c16=await this[_0x1327cd(0x38c)](_0x5dce71?.[_0x1327cd(0x69c)]),_0x59b371=await this[_0x1327cd(0x2b3)](_0x5dce71?.[_0x1327cd(0x69c)]),_0x2ce5a5=(await this[_0x1327cd(0x7da)](_0x935804,null,!0x1))['cachedContact'][_0x1327cd(0x75b)],_0x5947c4=await this[_0x1327cd(0x67f)][_0x1327cd(0x52b)][_0x1327cd(0x36a)]({'where':{'_id':_0x935804}},this[_0x1327cd(0x3d0)]['wuid']),_0x1bdee8={'imagechat':_0x22ba6b,'contactname':_0x2a9028||null,'pushName':_0x2ce5a5,'status':_0x5e4c16?.[_0x1327cd(0x204)],'isBusiness':_0x59b371[_0x1327cd(0x4c3)],'email':_0x59b371?.[_0x1327cd(0x4d8)],'description':_0x59b371?.['description'],'website':_0x59b371?.[_0x1327cd(0x4d9)]?.[_0x1327cd(0x428)](),'lastcache':Date[_0x1327cd(0x6aa)](),'imported':!_0x5947c4},_0x572221=await this[_0x1327cd(0x67f)][_0x1327cd(0x52b)][_0x1327cd(0x104)]({'where':{'_id':_0x935804}},_0x1bdee8,this[_0x1327cd(0x3d0)][_0x1327cd(0x4ae)]),_0x2d21d3={'owner':this[_0x1327cd(0x3d0)][_0x1327cd(0x4ae)],'_id':_0x935804,'profilePictureUrl':_0x22ba6b,'status':_0x5e4c16?.[_0x1327cd(0x204)]};return this[_0x1327cd(0x67f)][_0x1327cd(0x447)][_0x1327cd(0x3f8)]([_0x2d21d3],this[_0x1327cd(0x3d0)][_0x1327cd(0x4ae)]),_0x572221&&F(this[_0x1327cd(0x1c7)],_0x1327cd(0x2cb),{'chat':_0x572221}),{'wuid':_0x5dce71?.[_0x1327cd(0x69c)]||_0x935804,'name':_0x5dce71?.[_0x1327cd(0x75b)],'pushName':_0x2ce5a5,'numberExists':_0x5dce71?.[_0x1327cd(0x78a)],'picture':_0x22ba6b,'status':_0x5e4c16?.['status'],'isBusiness':_0x59b371[_0x1327cd(0x4c3)],'email':_0x59b371?.[_0x1327cd(0x4d8)],'description':_0x59b371?.['description'],'website':_0x59b371?.[_0x1327cd(0x4d9)]?.['shift']()};}catch(_0x3bdbc4){return this['logger'][_0x1327cd(0x3c6)](_0x1327cd(0x75e)+(_0x3bdbc4 instanceof Error?_0x3bdbc4[_0x1327cd(0x70f)]:JSON[_0x1327cd(0x238)](_0x3bdbc4,null,0x2))),{};}}async[a0_0x3cfc7d(0x2b3)](_0x2b58ba){const _0x803ccc=a0_0x3cfc7d;this[_0x803ccc(0x478)][_0x803ccc(0x4e1)](this[_0x803ccc(0x1c7)]+'\x20('+this[_0x803ccc(0x3d0)][_0x803ccc(0x4ae)]+_0x803ccc(0x387));try{let _0x602898=_0x2b58ba?this[_0x803ccc(0x81c)](_0x2b58ba):this[_0x803ccc(0x3d0)][_0x803ccc(0x4ae)],_0x1a498e=await this['client']['getBusinessProfile'](_0x602898);return this[_0x803ccc(0x478)][_0x803ccc(0x4e1)](this[_0x803ccc(0x1c7)]+'\x20('+this[_0x803ccc(0x3d0)]['wuid']+_0x803ccc(0x193)),_0x1a498e?(this[_0x803ccc(0x478)][_0x803ccc(0x4e1)](this[_0x803ccc(0x1c7)]+'\x20('+this['instance'][_0x803ccc(0x4ae)]+_0x803ccc(0x479)),{'isBusiness':!0x0,..._0x1a498e}):{'isBusiness':!0x1,'message':_0x803ccc(0x20b),...(await this[_0x803ccc(0x434)]({'numbers':[_0x602898]}))?.[_0x803ccc(0x428)]()};}catch(_0x2f8dfe){let _0xd96ba0=_0x803ccc(0x527),_0x347ead=_0x2f8dfe instanceof Error?_0x2f8dfe[_0x803ccc(0x70f)]:typeof _0x2f8dfe=='object'?JSON['stringify'](_0x2f8dfe):_0x2f8dfe,_0x51ed9b=_0xd96ba0+':\x20'+_0x347ead;throw this['logger']['error'](this['instanceName']+'\x20('+this['instance'][_0x803ccc(0x4ae)]+'):\x20'+_0x51ed9b),new x(_0x51ed9b);}}async['getStatus'](_0x5a10ba){const _0x590d07=a0_0x3cfc7d;let _0xa817f=this['createJid'](_0x5a10ba);try{return{'wuid':_0xa817f,'status':(await this[_0x590d07(0x495)][_0x590d07(0x3c7)](_0xa817f))[0x0]?.[_0x590d07(0x204)]};}catch{return{'wuid':_0xa817f,'status':null};}}async[a0_0x3cfc7d(0x54c)](_0x2c5907){const _0x17425d=a0_0x3cfc7d;try{return await this['client'][_0x17425d(0x54c)](_0x2c5907),{'update':_0x17425d(0x20f)};}catch(_0x56aee6){let _0x581f8f=_0x17425d(0x568),_0x1065de=_0x56aee6 instanceof Error?_0x56aee6[_0x17425d(0x70f)]:typeof _0x56aee6==_0x17425d(0x54e)?JSON[_0x17425d(0x238)](_0x56aee6):_0x56aee6,_0x11b539=_0x581f8f+':\x20'+_0x1065de;throw this['logger'][_0x17425d(0x3c6)](this[_0x17425d(0x1c7)]+'\x20('+this[_0x17425d(0x3d0)][_0x17425d(0x4ae)]+_0x17425d(0x71a)+_0x11b539),new x(_0x11b539);}}async['updateProfileStatus'](_0x4ad73b){const _0x444282=a0_0x3cfc7d;try{return await this['client'][_0x444282(0x6a2)](_0x4ad73b),{'update':_0x444282(0x20f)};}catch(_0x29a01f){let _0xc8ca73=_0x444282(0x180),_0x3f967d=_0x29a01f instanceof Error?_0x29a01f[_0x444282(0x70f)]:typeof _0x29a01f=='object'?JSON[_0x444282(0x238)](_0x29a01f):_0x29a01f,_0xc8fbec=_0xc8ca73+':\x20'+_0x3f967d;throw this[_0x444282(0x478)][_0x444282(0x3c6)](this[_0x444282(0x1c7)]+'\x20('+this[_0x444282(0x3d0)]['wuid']+_0x444282(0x71a)+_0xc8fbec),new x(_0xc8fbec);}}async['updateProfilePicture'](_0x18a430){const _0x4cb945=a0_0x3cfc7d;try{let _0x1e5ea6;if((0x0,J[_0x4cb945(0x344)])(_0x18a430)){let _0x4acbcc=new Date()[_0x4cb945(0x64e)](),_0x33757e=_0x18a430+_0x4cb945(0x727)+_0x4acbcc;_0x1e5ea6=(await K[_0x4cb945(0x879)]['get'](_0x33757e,{'responseType':_0x4cb945(0x37c)}))[_0x4cb945(0x877)];}else{if((0x0,J[_0x4cb945(0x320)])(_0x18a430))_0x1e5ea6=Buffer['from'](_0x18a430,'base64');else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this[_0x4cb945(0x495)][_0x4cb945(0x7de)](this['instance']['wuid'],_0x1e5ea6),{'update':_0x4cb945(0x20f)};}catch(_0x596422){let _0x142312=_0x4cb945(0x2da),_0x124993=_0x596422 instanceof Error?_0x596422['message']:typeof _0x596422=='object'?JSON[_0x4cb945(0x238)](_0x596422):_0x596422,_0x2fa372=_0x142312+':\x20'+_0x124993;throw this[_0x4cb945(0x478)]['error'](this['instanceName']+'\x20('+this[_0x4cb945(0x3d0)]['wuid']+'):\x20'+_0x2fa372),new x(_0x2fa372);}}async[a0_0x3cfc7d(0x591)](){const _0x232aef=a0_0x3cfc7d;try{return await this[_0x232aef(0x495)][_0x232aef(0x591)](this[_0x232aef(0x3d0)][_0x232aef(0x4ae)]),{'update':_0x232aef(0x20f)};}catch(_0x2c8ea7){let _0x384cce=_0x232aef(0x232),_0x55351f=_0x2c8ea7 instanceof Error?_0x2c8ea7[_0x232aef(0x70f)]:typeof _0x2c8ea7==_0x232aef(0x54e)?JSON[_0x232aef(0x238)](_0x2c8ea7):_0x2c8ea7,_0x3f43bd=_0x384cce+':\x20'+_0x55351f;throw this[_0x232aef(0x478)][_0x232aef(0x3c6)](this[_0x232aef(0x1c7)]+'\x20('+this[_0x232aef(0x3d0)][_0x232aef(0x4ae)]+_0x232aef(0x71a)+_0x3f43bd),new x(_0x3f43bd);}}async[a0_0x3cfc7d(0x535)](_0x29c87d){const _0x3222c6=a0_0x3cfc7d;try{let _0x5c8871=(await this[_0x3222c6(0x434)]({'numbers':_0x29c87d[_0x3222c6(0x365)]}))[_0x3222c6(0x56c)](_0x1cbc9c=>_0x1cbc9c['exists'])[_0x3222c6(0x733)](_0x5d2995=>_0x5d2995[_0x3222c6(0x69c)]),{id:_0x4199ee}=await this[_0x3222c6(0x495)]['groupCreate'](_0x29c87d[_0x3222c6(0x507)],_0x5c8871);_0x29c87d?.[_0x3222c6(0x2c0)]&&await this[_0x3222c6(0x495)][_0x3222c6(0x79d)](_0x4199ee,_0x29c87d[_0x3222c6(0x2c0)]);let _0x49a551=await this['client'][_0x3222c6(0x129)](_0x4199ee);return _0x49a551[_0x3222c6(0x402)]=[],await this[_0x3222c6(0x3e0)](_0x49a551),{'metadata':_0x49a551};}catch(_0x1faea7){let _0x53fdca=_0x3222c6(0x4fb),_0x2d7e95=_0x1faea7 instanceof Error?_0x1faea7[_0x3222c6(0x70f)]:typeof _0x1faea7==_0x3222c6(0x54e)?JSON[_0x3222c6(0x238)](_0x1faea7):_0x1faea7,_0x1cf1cb=_0x53fdca+':\x20'+_0x2d7e95;throw this[_0x3222c6(0x478)][_0x3222c6(0x3c6)](this[_0x3222c6(0x1c7)]+'\x20('+this['instance'][_0x3222c6(0x4ae)]+_0x3222c6(0x71a)+_0x1cf1cb),new x(_0x1cf1cb);}}async['groupBetterSetting'](_0x315eea){const _0x42fb64=a0_0x3cfc7d;try{if(_0x315eea[_0x42fb64(0x50b)]===!0x0&&await this[_0x42fb64(0x495)]['groupSettingUpdate'](_0x315eea[_0x42fb64(0x669)],'locked'),_0x315eea[_0x42fb64(0x50b)]===!0x1&&await this[_0x42fb64(0x495)]['groupSettingUpdate'](_0x315eea[_0x42fb64(0x669)],'unlocked'),_0x315eea[_0x42fb64(0x226)]===!0x0&&await this['client'][_0x42fb64(0x11f)](_0x315eea['groupJid'],_0x42fb64(0x3e9)),_0x315eea[_0x42fb64(0x226)]===!0x1&&await this[_0x42fb64(0x495)][_0x42fb64(0x11f)](_0x315eea[_0x42fb64(0x669)],_0x42fb64(0x3ef)),_0x315eea[_0x42fb64(0x771)]===!0x0&&await this[_0x42fb64(0x495)][_0x42fb64(0x1e7)](_0x315eea[_0x42fb64(0x669)],_0x42fb64(0x325)),_0x315eea['memberAddMode']===!0x1&&await this['client'][_0x42fb64(0x1e7)](_0x315eea['groupJid'],_0x42fb64(0x647)),_0x315eea[_0x42fb64(0x63a)]===!0x0&&await this[_0x42fb64(0x495)][_0x42fb64(0x142)](_0x315eea[_0x42fb64(0x669)],'on'),_0x315eea['joinApprovalMode']===!0x1&&await this[_0x42fb64(0x495)][_0x42fb64(0x142)](_0x315eea[_0x42fb64(0x669)],_0x42fb64(0x22a)),typeof _0x315eea['expiration']<'u'&&_0x315eea[_0x42fb64(0x571)]!==null&&await this[_0x42fb64(0x495)][_0x42fb64(0x80d)](_0x315eea[_0x42fb64(0x669)],_0x315eea[_0x42fb64(0x571)]),_0x315eea[_0x42fb64(0x75b)]&&await this['client'][_0x42fb64(0x13b)](_0x315eea[_0x42fb64(0x669)],_0x315eea['name']),_0x315eea['description']&&await this[_0x42fb64(0x495)][_0x42fb64(0x79d)](_0x315eea[_0x42fb64(0x669)],_0x315eea['description']),_0x315eea['image']){let _0x35d993;if((0x0,J[_0x42fb64(0x344)])(_0x315eea[_0x42fb64(0x5f6)])){let _0x2e7d0e=new Date()[_0x42fb64(0x64e)](),_0x19e1d8=_0x315eea[_0x42fb64(0x5f6)]+'?timestamp='+_0x2e7d0e;_0x35d993=(await K['default'][_0x42fb64(0x840)](_0x19e1d8,{'responseType':_0x42fb64(0x37c)}))[_0x42fb64(0x877)];}else{if((0x0,J[_0x42fb64(0x320)])(_0x315eea[_0x42fb64(0x5f6)]))_0x35d993=Buffer[_0x42fb64(0x6c7)](_0x315eea[_0x42fb64(0x5f6)],_0x42fb64(0x622));else throw new m(_0x42fb64(0x718));}await this['client'][_0x42fb64(0x7de)](_0x315eea['groupJid'],_0x35d993);}return await this['findGroup']({'groupJid':_0x315eea[_0x42fb64(0x669)]});}catch(_0x3244fe){let _0x5d4296=_0x42fb64(0x77c),_0x35933e=_0x3244fe instanceof Error?_0x3244fe[_0x42fb64(0x70f)]:typeof _0x3244fe==_0x42fb64(0x54e)?JSON[_0x42fb64(0x238)](_0x3244fe):_0x3244fe,_0x4c38b9=_0x5d4296+':\x20'+_0x35933e;throw this[_0x42fb64(0x478)][_0x42fb64(0x3c6)](this['instanceName']+'\x20('+this[_0x42fb64(0x3d0)][_0x42fb64(0x4ae)]+'):\x20'+_0x4c38b9),new x(_0x4c38b9);}}async[a0_0x3cfc7d(0x454)](_0x134822){const _0x5e2c4e=a0_0x3cfc7d;try{let _0x35f01d=_0x134822[_0x5e2c4e(0x365)][_0x5e2c4e(0x733)](_0x4be01c=>this[_0x5e2c4e(0x81c)](_0x4be01c));if(_0x134822[_0x5e2c4e(0x4a3)]===_0x5e2c4e(0x4cc)||_0x134822['action']==='reject')await this[_0x5e2c4e(0x495)][_0x5e2c4e(0x4aa)](_0x134822[_0x5e2c4e(0x669)],_0x35f01d,_0x134822[_0x5e2c4e(0x4a3)]);else{if(_0x134822[_0x5e2c4e(0x4a3)]===_0x5e2c4e(0x199)){let _0x3a7595=(await this[_0x5e2c4e(0x434)]({'numbers':_0x134822[_0x5e2c4e(0x365)]}))[_0x5e2c4e(0x56c)](_0x399b80=>_0x399b80[_0x5e2c4e(0x78a)])['map'](_0x4ae6e4=>this[_0x5e2c4e(0x81c)](_0x4ae6e4['jid']));if(_0x3a7595[_0x5e2c4e(0x11c)]===0x0)throw new m(_0x5e2c4e(0x729));await this[_0x5e2c4e(0x495)][_0x5e2c4e(0x51f)](_0x134822[_0x5e2c4e(0x669)],_0x3a7595,_0x5e2c4e(0x199));}else await this[_0x5e2c4e(0x495)]['groupParticipantsUpdate'](_0x134822['groupJid'],_0x35f01d,_0x134822[_0x5e2c4e(0x4a3)]);}return await this[_0x5e2c4e(0x6f3)]({'groupJid':_0x134822[_0x5e2c4e(0x669)]});}catch(_0xd2981){let _0x49604b=_0x5e2c4e(0x40c),_0x4b012c=_0xd2981 instanceof Error?_0xd2981[_0x5e2c4e(0x70f)]:typeof _0xd2981==_0x5e2c4e(0x54e)?JSON[_0x5e2c4e(0x238)](_0xd2981):_0xd2981,_0x48e52b=_0x49604b+':\x20'+_0x4b012c;throw this[_0x5e2c4e(0x478)]['error'](this['instanceName']+'\x20('+this[_0x5e2c4e(0x3d0)]['wuid']+_0x5e2c4e(0x71a)+_0x48e52b),new m(_0x48e52b);}}async['groupGetInviteInfo'](_0x21130e){const _0x35b20a=a0_0x3cfc7d;try{return await this[_0x35b20a(0x495)][_0x35b20a(0x15b)](_0x21130e[_0x35b20a(0x286)]);}catch(_0x36ea48){let _0x452b4a='Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo',_0x14655b=_0x36ea48 instanceof Error?_0x36ea48['message']:typeof _0x36ea48==_0x35b20a(0x54e)?JSON[_0x35b20a(0x238)](_0x36ea48):_0x36ea48,_0x6edec7=_0x452b4a+':\x20'+_0x14655b;throw this[_0x35b20a(0x478)][_0x35b20a(0x3c6)](this['instanceName']+'\x20('+this['instance'][_0x35b20a(0x4ae)]+'):\x20'+_0x6edec7),new m(_0x6edec7);}}async[a0_0x3cfc7d(0x6f3)](_0x66c4b1,_0x5682ff=a0_0x3cfc7d(0x26a)){const _0x59de90=a0_0x3cfc7d;try{let _0x12afdc=await this[_0x59de90(0x67f)][_0x59de90(0x52b)][_0x59de90(0x36a)]({'where':{'_id':_0x66c4b1[_0x59de90(0x669)]}},this[_0x59de90(0x3d0)][_0x59de90(0x4ae)]),_0x1275c4=_0x12afdc?_0x12afdc[_0x59de90(0x483)]:null,_0x5b00ec=0x18*0x3c*0x3c*0x3e8;if(!_0x1275c4||_0x1275c4[_0x59de90(0x6ed)]&&Date[_0x59de90(0x6aa)]()-_0x1275c4[_0x59de90(0x6ed)]>_0x5b00ec){let _0x4c9132=await this[_0x59de90(0x495)][_0x59de90(0x129)](_0x66c4b1[_0x59de90(0x669)]);if(_0x4c9132['subjectTime']=_0x4c9132?.[_0x59de90(0x6cb)]&&_0x4c9132[_0x59de90(0x6cb)][_0x59de90(0x885)]()[_0x59de90(0x11c)]<0xd?_0x4c9132?.[_0x59de90(0x6cb)]*0x3e8:_0x4c9132?.[_0x59de90(0x6cb)]||null,_0x4c9132[_0x59de90(0x510)]=_0x4c9132?.['creation']&&_0x4c9132[_0x59de90(0x510)][_0x59de90(0x885)]()['length']<0xd?_0x4c9132?.[_0x59de90(0x510)]*0x3e8:_0x4c9132?.[_0x59de90(0x510)]||null,_0x1275c4={..._0x4c9132,'lastUpdate':Date['now']()},!_0x4c9132)return;}let _0x278855=_0x1275c4[_0x59de90(0x365)]?.[_0x59de90(0x4d3)](_0x529c6e=>_0x529c6e['id']===this[_0x59de90(0x3d0)][_0x59de90(0x4ae)]+_0x59de90(0x10f)&&_0x529c6e[_0x59de90(0x4d6)]!=null)||!0x1;!_0x1275c4[_0x59de90(0x286)]&&_0x278855&&(_0x1275c4[_0x59de90(0x286)]=(await this['inviteCode'](_0x66c4b1,!0x1))[_0x59de90(0x719)]);let _0x3113e3=(!_0x1275c4[_0x59de90(0x226)]||_0x278855)&&(!_0x1275c4[_0x59de90(0x118)]||_0x278855);_0x1275c4[_0x59de90(0x17d)]=_0x278855,_0x1275c4[_0x59de90(0x5fb)]=_0x3113e3;let _0x48d9ce=[];if(_0x278855&&_0x1275c4[_0x59de90(0x63a)])try{_0x48d9ce=await this[_0x59de90(0x495)][_0x59de90(0x769)](_0x66c4b1[_0x59de90(0x669)]),_0x1275c4[_0x59de90(0x606)]=Date[_0x59de90(0x6aa)]();}catch(_0x103dc6){this['logger'][_0x59de90(0x4e1)](this[_0x59de90(0x1c7)]+'\x20('+this[_0x59de90(0x3d0)][_0x59de90(0x4ae)]+'):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20'+_0x66c4b1[_0x59de90(0x669)]+':\x20'+(_0x103dc6 instanceof Error?_0x103dc6[_0x59de90(0x70f)]:JSON[_0x59de90(0x238)](_0x103dc6,null,0x2)));}try{_0x1275c4[_0x59de90(0x5f6)]=(await this['findAndUpdateCacheContact'](_0x66c4b1[_0x59de90(0x669)],null,!0x0))['cachedContact'][_0x59de90(0x3b4)];}catch(_0x54b9ff){this[_0x59de90(0x478)][_0x59de90(0x4e1)](this['instanceName']+'\x20('+this[_0x59de90(0x3d0)][_0x59de90(0x4ae)]+_0x59de90(0x3e6)+_0x66c4b1[_0x59de90(0x669)]+':\x20'+(_0x54b9ff instanceof Error?_0x54b9ff[_0x59de90(0x70f)]:JSON[_0x59de90(0x238)](_0x54b9ff,null,0x2)));}let _0x344da5=_0x1275c4[_0x59de90(0x365)][_0x59de90(0x733)](_0x3c0e0f=>_0x3c0e0f['id']),_0x419b31=_0x48d9ce['map'](_0x538b3a=>_0x538b3a[_0x59de90(0x69c)]),_0x59e9d9=await this[_0x59de90(0x67f)][_0x59de90(0x770)][_0x59de90(0x41c)]([..._0x344da5,..._0x419b31]);_0x1275c4[_0x59de90(0x365)]=_0x1275c4[_0x59de90(0x365)][_0x59de90(0x733)](_0x1caf17=>{const _0xe959c3=_0x59de90;let _0x4373e4=_0x59e9d9['find'](_0x59aa55=>_0x59aa55['_id']===_0x1caf17['id']);return{'id':_0x1caf17['id'],'isAdmin':[_0xe959c3(0x4d6),_0xe959c3(0x884)][_0xe959c3(0x1ec)](_0x1caf17[_0xe959c3(0x4d6)]),'admin':_0x1caf17[_0xe959c3(0x4d6)],'pushName':_0x4373e4?.[_0xe959c3(0x75b)],'profilePictureUrl':_0x4373e4?.[_0xe959c3(0x3b4)]};}),_0x1275c4[_0x59de90(0x402)]=_0x48d9ce['map'](_0x32c9ba=>{const _0x11685a=_0x59de90;let _0x53aa7f=_0x59e9d9[_0x11685a(0x1c4)](_0x57f23b=>_0x57f23b[_0x11685a(0x7b5)]===_0x32c9ba['jid']);return{'id':_0x32c9ba['jid'],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x53aa7f?.[_0x11685a(0x75b)],'profilePictureUrl':_0x53aa7f?.['pictureUrl'],'request_method':_0x32c9ba['request_method'],'request_time':_0x32c9ba[_0x11685a(0x388)]};});let _0x34124e=await this[_0x59de90(0x67f)][_0x59de90(0x52b)][_0x59de90(0x104)]({'where':{'_id':_0x66c4b1[_0x59de90(0x669)]}},{'imagechat':_0x1275c4[_0x59de90(0x5f6)],'name':_0x1275c4['subject'],'lastcache':Date[_0x59de90(0x6aa)](),'groupdata':_0x1275c4},this['instance'][_0x59de90(0x4ae)]);return F(this[_0x59de90(0x1c7)],_0x59de90(0x2cb),{'chat':_0x34124e}),{'metadata':_0x1275c4};}catch(_0x28a5b4){if(_0x5682ff===_0x59de90(0x809))return;throw new U(_0x59de90(0x29e),_0x28a5b4['message'][_0x59de90(0x885)]());}}async[a0_0x3cfc7d(0x14d)](){const _0x4a92e0=a0_0x3cfc7d;try{this[_0x4a92e0(0x478)][_0x4a92e0(0x743)](_0x4a92e0(0x5c9));let _0x209d46=Date['now'](),_0x514e97=0x3*0x3c*0x3c*0x3e8;return _0x209d46-this['lastRealGroupsFetch']>_0x514e97&&(this[_0x4a92e0(0x349)](),this[_0x4a92e0(0x890)]=_0x209d46),(await this['repository']['chat']['findGroupsEspecial']({'where':{'group':!0x0}},this[_0x4a92e0(0x3d0)][_0x4a92e0(0x4ae)]))[_0x4a92e0(0x733)](_0x4eac96=>({..._0x4eac96[_0x4a92e0(0x483)],'groupJid':_0x4eac96?.[_0x4a92e0(0x7b5)],'participants':_0x4eac96?.['groupdata']?.[_0x4a92e0(0x365)]||[],'awaitingApproval':_0x4eac96?.['groupdata']?.[_0x4a92e0(0x402)]||[],'image':_0x4eac96?.[_0x4a92e0(0x25e)]}));}catch(_0x1adffe){let _0x25586b=_0x4a92e0(0x4c5),_0x56c1df=_0x1adffe instanceof Error?_0x1adffe[_0x4a92e0(0x70f)]:typeof _0x1adffe==_0x4a92e0(0x54e)?JSON[_0x4a92e0(0x238)](_0x1adffe):_0x1adffe,_0x3bd17d=_0x25586b+':\x20'+_0x56c1df;throw this['logger'][_0x4a92e0(0x3c6)](this['instanceName']+'\x20('+this[_0x4a92e0(0x3d0)]['wuid']+_0x4a92e0(0x71a)+_0x3bd17d),new U(_0x3bd17d);}}async['findRealGroups'](){const _0x112b31=a0_0x3cfc7d;try{this['logger'][_0x112b31(0x743)]('Retornando\x20grupos\x20SEM\x20cache');let _0x4b4150=[],_0x18a54e=await this[_0x112b31(0x495)]['groupFetchAllParticipating'](),_0x38181e=Object[_0x112b31(0x291)](_0x18a54e);for(let _0x561302=0x0;_0x561302<_0x38181e[_0x112b31(0x11c)];_0x561302++){let _0xacecee=_0x38181e[_0x561302];(0x0,w['isJidGroup'])(_0xacecee?.['id'])&&(_0x4b4150[_0x112b31(0x7b9)]({'groupJid':_0xacecee?.['id'],'subject':_0xacecee?.[_0x112b31(0x507)],'subjectOwner':_0xacecee?.[_0x112b31(0x626)]?.[_0x112b31(0x407)]('@')[0x0],'subjectTime':_0xacecee?.[_0x112b31(0x6cb)],'creation':_0xacecee?.[_0x112b31(0x510)],'size':_0xacecee?.[_0x112b31(0x365)]?.[_0x112b31(0x11c)],'owner':_0xacecee?.[_0x112b31(0x6a6)]?.[_0x112b31(0x407)]('@')[0x0],'desc':_0xacecee?.[_0x112b31(0x806)],'restrict':_0xacecee?.[_0x112b31(0x50b)],'announce':_0xacecee?.[_0x112b31(0x226)],'image':null,'isCommunity':_0xacecee?.[_0x112b31(0x118)],'joinApprovalMode':_0xacecee?.[_0x112b31(0x63a)],'memberCanAddParticipant':_0xacecee?.['memberAddMode'],'participants':_0xacecee?.[_0x112b31(0x365)],'descOwner':_0xacecee?.[_0x112b31(0x75f)],'descId':_0xacecee?.['descId'],'memberAddMode':_0xacecee?.[_0x112b31(0x771)],'isCommunityAnnounce':_0xacecee?.[_0x112b31(0x701)],'ephemeralDuration':_0xacecee?.[_0x112b31(0x4bb)]||0x0,'author':_0xacecee?.[_0x112b31(0x2e5)]}),this[_0x112b31(0x3e0)](_0x38181e[_0x561302]));}return _0x4b4150;}catch(_0x34833b){let _0x590000='Falha\x20ao\x20processar\x20a\x20solicitação\x20findRealGroups',_0x3e0fbc=_0x34833b instanceof Error?_0x34833b[_0x112b31(0x70f)]:typeof _0x34833b=='object'?JSON[_0x112b31(0x238)](_0x34833b):_0x34833b,_0x39fcad=_0x590000+':\x20'+_0x3e0fbc;throw this[_0x112b31(0x478)]['error'](this[_0x112b31(0x1c7)]+'\x20('+this[_0x112b31(0x3d0)][_0x112b31(0x4ae)]+'):\x20'+_0x39fcad),new U(_0x39fcad);}}async[a0_0x3cfc7d(0x3e0)](_0x32c856){const _0x2ac1b0=a0_0x3cfc7d;let _0x3905bb=await this[_0x2ac1b0(0x67f)][_0x2ac1b0(0x52b)][_0x2ac1b0(0x36a)]({'where':{'_id':_0x32c856['id']}},this[_0x2ac1b0(0x3d0)][_0x2ac1b0(0x4ae)]);if(_0x32c856[_0x2ac1b0(0x6cb)]=_0x32c856?.[_0x2ac1b0(0x6cb)]&&_0x32c856[_0x2ac1b0(0x6cb)][_0x2ac1b0(0x885)]()[_0x2ac1b0(0x11c)]<0xd?_0x32c856?.[_0x2ac1b0(0x6cb)]*0x3e8:_0x32c856?.[_0x2ac1b0(0x6cb)]||null,_0x32c856['creation']=_0x32c856?.[_0x2ac1b0(0x510)]&&_0x32c856[_0x2ac1b0(0x510)]['toString']()[_0x2ac1b0(0x11c)]<0xd?_0x32c856?.[_0x2ac1b0(0x510)]*0x3e8:_0x32c856?.[_0x2ac1b0(0x510)]||null,!_0x32c856[_0x2ac1b0(0x5f6)])try{_0x32c856['image']=await this[_0x2ac1b0(0x495)][_0x2ac1b0(0x2ae)](_0x32c856['id'],_0x2ac1b0(0x1a7));}catch(_0x31249f){this[_0x2ac1b0(0x478)][_0x2ac1b0(0x4e1)](this[_0x2ac1b0(0x1c7)]+'\x20('+this[_0x2ac1b0(0x3d0)][_0x2ac1b0(0x4ae)]+_0x2ac1b0(0x3e6)+_0x32c856['id']+':\x20'+(_0x31249f instanceof Error?_0x31249f[_0x2ac1b0(0x70f)]:JSON[_0x2ac1b0(0x238)](_0x31249f,null,0x2)));}let _0x854072=_0x32c856[_0x2ac1b0(0x365)][_0x2ac1b0(0x733)](_0x39c304=>{const _0x1a8b19=_0x2ac1b0;let _0x46ce9d=_0x3905bb?.[_0x1a8b19(0x483)]?.['participants'][_0x1a8b19(0x1c4)](_0x543bc0=>_0x543bc0['id']===_0x39c304['id']);return{..._0x39c304,'isAdmin':['admin',_0x1a8b19(0x884)][_0x1a8b19(0x1ec)](_0x39c304[_0x1a8b19(0x4d6)]),'admin':_0x39c304[_0x1a8b19(0x4d6)],'name':_0x46ce9d?.['name']||_0x39c304[_0x1a8b19(0x75b)],'imgUrl':_0x46ce9d?.[_0x1a8b19(0x472)]||_0x39c304[_0x1a8b19(0x472)]};}),_0xc685f2=_0x854072[_0x2ac1b0(0x4d3)](_0xc0ad5e=>_0xc0ad5e['id']===this[_0x2ac1b0(0x3d0)][_0x2ac1b0(0x4ae)]+_0x2ac1b0(0x10f)&&_0xc0ad5e[_0x2ac1b0(0x4d6)]!=null)||!0x1,_0x58aa7f=(!_0x32c856[_0x2ac1b0(0x226)]||_0xc685f2)&&(!_0x32c856[_0x2ac1b0(0x118)]||_0xc685f2),_0x1476e5={..._0x32c856,'participants':_0x854072,'awaitingApproval':_0x3905bb?.['groupdata']?.[_0x2ac1b0(0x402)]||[],'lastFetchAwaitingApproval':_0x3905bb?.[_0x2ac1b0(0x483)]?.[_0x2ac1b0(0x606)],'isAdmin':_0xc685f2,'canSendMessage':_0x58aa7f,'lastUpdate':Date[_0x2ac1b0(0x6aa)]()};await this['repository'][_0x2ac1b0(0x52b)][_0x2ac1b0(0x104)]({'where':{'_id':_0x32c856['id']}},{'imagechat':_0x32c856[_0x2ac1b0(0x5f6)],'name':_0x32c856[_0x2ac1b0(0x507)],'group':!0x0,'groupdata':_0x1476e5,'lastcache':Date[_0x2ac1b0(0x6aa)]()},this['instance'][_0x2ac1b0(0x4ae)]),F(this[_0x2ac1b0(0x1c7)],'chats',{'chat':_0x32c856});}async['updateGroupWebhook'](_0x54efad){const _0x304c37=a0_0x3cfc7d;let _0x38955c=await this['repository'][_0x304c37(0x52b)][_0x304c37(0x36a)]({'where':{'_id':_0x54efad['id']}},this['instance']['wuid']);_0x54efad[_0x304c37(0x6cb)]=_0x54efad?.[_0x304c37(0x6cb)]&&_0x54efad[_0x304c37(0x6cb)][_0x304c37(0x885)]()[_0x304c37(0x11c)]<0xd?_0x54efad?.[_0x304c37(0x6cb)]*0x3e8:_0x54efad?.[_0x304c37(0x6cb)]||null,_0x54efad[_0x304c37(0x510)]=_0x54efad?.[_0x304c37(0x510)]&&_0x54efad[_0x304c37(0x510)][_0x304c37(0x885)]()[_0x304c37(0x11c)]<0xd?_0x54efad?.['creation']*0x3e8:_0x54efad?.[_0x304c37(0x510)]||null,_0x54efad[_0x304c37(0x286)]&&(_0x54efad['inviteCode']=_0x304c37(0x275)+_0x54efad[_0x304c37(0x286)]);let _0x2750cc=_0x38955c?.[_0x304c37(0x483)]?{..._0x38955c[_0x304c37(0x483)]}:{};Object['keys'](_0x54efad)[_0x304c37(0x455)](_0x364283=>{_0x364283!=='id'&&(_0x2750cc[_0x364283]=_0x54efad[_0x364283]);});let _0x593fb5=_0x2750cc[_0x304c37(0x365)]?.[_0x304c37(0x4d3)](_0x4ce0a5=>_0x4ce0a5['id']===this[_0x304c37(0x3d0)]['wuid']+_0x304c37(0x10f)&&_0x4ce0a5[_0x304c37(0x4d6)]!=null)||!0x1;_0x2750cc[_0x304c37(0x17d)]=_0x593fb5;let _0x1f9126=(!_0x2750cc[_0x304c37(0x226)]||_0x593fb5)&&(!_0x2750cc[_0x304c37(0x118)]||_0x593fb5);_0x2750cc[_0x304c37(0x5fb)]=_0x1f9126;let _0x180f02={'group':!0x0,'groupdata':_0x2750cc};_0x54efad[_0x304c37(0x507)]&&(_0x180f02[_0x304c37(0x75b)]=_0x54efad[_0x304c37(0x507)]),await this[_0x304c37(0x67f)][_0x304c37(0x52b)][_0x304c37(0x104)]({'where':{'_id':_0x54efad['id']}},_0x180f02,this[_0x304c37(0x3d0)][_0x304c37(0x4ae)],{'upsert':!0x0}),F(this['instanceName'],_0x304c37(0x2cb),{'chat':_0x180f02});}async['updateGroupParticipantsWebhook'](_0x185270){const _0x16fd8c=a0_0x3cfc7d;let _0x27edfd=await this['repository']['chat'][_0x16fd8c(0x36a)]({'where':{'_id':_0x185270['id']}},this[_0x16fd8c(0x3d0)][_0x16fd8c(0x4ae)]);if(!_0x27edfd||!_0x27edfd['groupdata']){this['logger'][_0x16fd8c(0x743)](this[_0x16fd8c(0x1c7)]+'\x20('+this[_0x16fd8c(0x3d0)][_0x16fd8c(0x4ae)]+'):\x20Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x20'+_0x185270['id']);return;}let _0x3436d5=await this[_0x16fd8c(0x67f)][_0x16fd8c(0x770)]['findManyByIds'](_0x185270['participants']),_0x22e39b=[..._0x27edfd[_0x16fd8c(0x483)]?.[_0x16fd8c(0x365)]];switch(_0x185270['action']){case _0x16fd8c(0x199):_0x3436d5[_0x16fd8c(0x733)](_0x1b5945=>({'id':_0x1b5945['_id'],'isAdmin':!0x1,'name':_0x1b5945[_0x16fd8c(0x75b)],'imgUrl':_0x1b5945[_0x16fd8c(0x3b4)]}))[_0x16fd8c(0x455)](_0x4ef4c7=>{const _0x29c060=_0x16fd8c;_0x22e39b[_0x29c060(0x4d3)](_0x1a6edb=>_0x1a6edb['id']===_0x4ef4c7['id'])||(_0x22e39b[_0x29c060(0x7b9)](_0x4ef4c7),this[_0x29c060(0x478)][_0x29c060(0x743)](_0x29c060(0x305)+JSON['stringify'](_0x4ef4c7)));});break;case _0x16fd8c(0x2d5):_0x22e39b=_0x22e39b[_0x16fd8c(0x56c)](_0x41d97f=>!_0x185270[_0x16fd8c(0x365)][_0x16fd8c(0x1ec)](_0x41d97f['id']));break;case'promote':_0x22e39b=_0x22e39b[_0x16fd8c(0x733)](_0x145408=>_0x185270[_0x16fd8c(0x365)][_0x16fd8c(0x1ec)](_0x145408['id'])?{..._0x145408,'isAdmin':!0x0,'admin':_0x16fd8c(0x4d6)}:_0x145408);break;case _0x16fd8c(0x36f):_0x22e39b=_0x22e39b[_0x16fd8c(0x733)](_0x5a65db=>_0x185270[_0x16fd8c(0x365)][_0x16fd8c(0x1ec)](_0x5a65db['id'])?{..._0x5a65db,'isAdmin':!0x1,'admin':null}:_0x5a65db);break;}let _0x55ddb8=_0x22e39b[_0x16fd8c(0x11c)],_0x6eaeeb=_0x22e39b[_0x16fd8c(0x4d3)](_0x3d42a1=>_0x3d42a1['id']===this[_0x16fd8c(0x3d0)][_0x16fd8c(0x4ae)]+_0x16fd8c(0x10f)),_0x1f650a=_0x6eaeeb&&_0x22e39b[_0x16fd8c(0x4d3)](_0xb0588a=>_0xb0588a['id']===this[_0x16fd8c(0x3d0)][_0x16fd8c(0x4ae)]+_0x16fd8c(0x10f)&&_0xb0588a[_0x16fd8c(0x4d6)]!=null)||!0x1,_0x48ae7a=_0x6eaeeb&&(!_0x27edfd['groupdata'][_0x16fd8c(0x226)]||_0x1f650a)&&(!_0x27edfd[_0x16fd8c(0x483)][_0x16fd8c(0x118)]||_0x1f650a);await this['repository'][_0x16fd8c(0x52b)][_0x16fd8c(0x104)]({'where':{'_id':_0x185270['id']}},{'groupdata':{..._0x27edfd['groupdata'],'participants':_0x22e39b,'size':_0x55ddb8,'isAdmin':_0x1f650a,'canSendMessage':_0x48ae7a}},this[_0x16fd8c(0x3d0)][_0x16fd8c(0x4ae)]),this['logger'][_0x16fd8c(0x743)](this[_0x16fd8c(0x1c7)]+'\x20('+this[_0x16fd8c(0x3d0)][_0x16fd8c(0x4ae)]+_0x16fd8c(0x2b5)+_0x185270['id']+_0x16fd8c(0x883)+_0x185270['action']+_0x16fd8c(0x83d)+_0x55ddb8+',\x20isAdmin:\x20'+_0x1f650a+_0x16fd8c(0x667)+_0x48ae7a);}async['inviteCode'](_0x5ede0f,_0x1668ee=!0x0){const _0x373969=a0_0x3cfc7d;try{let _0x2ffe07=await this[_0x373969(0x495)][_0x373969(0x31c)](_0x5ede0f['groupJid']),_0x256163={'groupdata.inviteCode':'https://chat.whatsapp.com/'+_0x2ffe07};if(_0x1668ee){let _0x505029=await this[_0x373969(0x67f)][_0x373969(0x52b)][_0x373969(0x104)]({'where':{'_id':_0x5ede0f[_0x373969(0x669)]}},_0x256163,this[_0x373969(0x3d0)][_0x373969(0x4ae)]);}return{'inviteUrl':_0x373969(0x275)+_0x2ffe07,'inviteCode':_0x2ffe07};}catch(_0x2821dc){let _0x3e9b84=_0x373969(0x102),_0x4906bf=_0x2821dc instanceof Error?_0x2821dc[_0x373969(0x70f)]:typeof _0x2821dc==_0x373969(0x54e)?JSON[_0x373969(0x238)](_0x2821dc):_0x2821dc,_0x39f199=_0x3e9b84+':\x20'+_0x4906bf;throw this[_0x373969(0x478)][_0x373969(0x3c6)](this[_0x373969(0x1c7)]+'\x20('+this[_0x373969(0x3d0)]['wuid']+_0x373969(0x71a)+_0x39f199),new U(_0x39f199);}}async[a0_0x3cfc7d(0x2df)](_0x59119e){const _0x5e8608=a0_0x3cfc7d;try{let _0x469f94=await this[_0x5e8608(0x495)]['groupRevokeInvite'](_0x59119e['groupJid']);return{'revoked':!0x0,'inviteUrl':_0x5e8608(0x275)+_0x469f94,'inviteCode':_0x469f94};}catch(_0x1d6916){let _0x4f544e=_0x5e8608(0x618),_0x5a616d=_0x1d6916 instanceof Error?_0x1d6916['message']:typeof _0x1d6916==_0x5e8608(0x54e)?JSON['stringify'](_0x1d6916):_0x1d6916,_0xe94208=_0x4f544e+':\x20'+_0x5a616d;throw this[_0x5e8608(0x478)][_0x5e8608(0x3c6)](this[_0x5e8608(0x1c7)]+'\x20('+this['instance'][_0x5e8608(0x4ae)]+_0x5e8608(0x71a)+_0xe94208),new U(_0xe94208);}}async[a0_0x3cfc7d(0x542)](_0x3e00a3){const _0x4ef74d=a0_0x3cfc7d;try{if((0x0,J[_0x4ef74d(0x344)])(_0x3e00a3['inviteCode']))var _0x1029b2=_0x3e00a3['inviteCode'][_0x4ef74d(0x407)]('/')[0x3];else var _0x1029b2=_0x3e00a3['inviteCode'];let _0x514a2b=await this[_0x4ef74d(0x495)][_0x4ef74d(0x5e2)](_0x1029b2);return this[_0x4ef74d(0x478)][_0x4ef74d(0x4e1)](this[_0x4ef74d(0x1c7)]+'\x20('+this['instance']['wuid']+'):\x20'+_0x514a2b),{'join':!0x0,'inviteCode':_0x1029b2,'groupJid':_0x514a2b};}catch(_0x4bfa42){let _0x24fec7=_0x4ef74d(0x5f3),_0x2ba4fd=_0x4bfa42 instanceof Error?_0x4bfa42[_0x4ef74d(0x70f)]:typeof _0x4bfa42==_0x4ef74d(0x54e)?JSON[_0x4ef74d(0x238)](_0x4bfa42):_0x4bfa42,_0x366c62=_0x24fec7+':\x20'+_0x2ba4fd;throw this['logger'][_0x4ef74d(0x3c6)](this[_0x4ef74d(0x1c7)]+'\x20('+this[_0x4ef74d(0x3d0)][_0x4ef74d(0x4ae)]+_0x4ef74d(0x71a)+_0x366c62),new U(_0x366c62);}}async[a0_0x3cfc7d(0x2f3)](_0x12099f){const _0x1c7f7a=a0_0x3cfc7d;try{return{'participants':(await this[_0x1c7f7a(0x67f)][_0x1c7f7a(0x52b)][_0x1c7f7a(0x36a)]({'where':{'_id':_0x12099f[_0x1c7f7a(0x669)]}},this[_0x1c7f7a(0x3d0)][_0x1c7f7a(0x4ae)]))[_0x1c7f7a(0x483)]['participants']};}catch(_0x599e4e){let _0x38db56=_0x1c7f7a(0x128),_0x1d3bd4=_0x599e4e instanceof Error?_0x599e4e['message']:typeof _0x599e4e==_0x1c7f7a(0x54e)?JSON[_0x1c7f7a(0x238)](_0x599e4e):_0x599e4e,_0x2434c7=_0x38db56+':\x20'+_0x1d3bd4;throw this[_0x1c7f7a(0x478)][_0x1c7f7a(0x3c6)](this[_0x1c7f7a(0x1c7)]+'\x20('+this[_0x1c7f7a(0x3d0)][_0x1c7f7a(0x4ae)]+_0x1c7f7a(0x71a)+_0x2434c7),new U(_0x2434c7);}}async['leaveGroup'](_0x26cea0){const _0x2a2631=a0_0x3cfc7d;try{return await this['client']['groupLeave'](_0x26cea0[_0x2a2631(0x669)]),{'groupJid':_0x26cea0[_0x2a2631(0x669)],'leave':!0x0};}catch(_0x252ad7){let _0x43b4c2=_0x2a2631(0x121),_0x56effb=_0x252ad7 instanceof Error?_0x252ad7['message']:typeof _0x252ad7==_0x2a2631(0x54e)?JSON[_0x2a2631(0x238)](_0x252ad7):_0x252ad7,_0x55203f=_0x43b4c2+':\x20'+_0x56effb;throw this[_0x2a2631(0x478)][_0x2a2631(0x3c6)](this[_0x2a2631(0x1c7)]+'\x20('+this[_0x2a2631(0x3d0)]['wuid']+'):\x20'+_0x55203f),new m(_0x55203f);}}async['pollMessage'](_0x1e532e){const _0x35e322=a0_0x3cfc7d;return await this[_0x35e322(0x234)](_0x1e532e['number'],{'poll':{'name':_0x1e532e[_0x35e322(0x181)]?.[_0x35e322(0x75b)],'selectableCount':_0x1e532e[_0x35e322(0x181)]['selectableCount'],'values':_0x1e532e['pollMessage']['values']}},_0x1e532e?.[_0x35e322(0x1e9)]);}async[a0_0x3cfc7d(0x36c)](_0x4099b7){const _0x21a208=a0_0x3cfc7d;return await this[_0x21a208(0x234)](_0x4099b7['number'],{'listMessage':{'title':_0x4099b7[_0x21a208(0x36c)][_0x21a208(0x486)],'description':_0x4099b7[_0x21a208(0x36c)][_0x21a208(0x2c0)],'buttonText':_0x4099b7['listMessage']?.['buttonText'],'footerText':_0x4099b7['listMessage']?.[_0x21a208(0x75a)],'sections':_0x4099b7['listMessage'][_0x21a208(0x608)],'listType':0x2}},_0x4099b7?.[_0x21a208(0x1e9)]);}async[a0_0x3cfc7d(0x175)](_0x32d44d){const _0x3b9535=a0_0x3cfc7d;this['instance'][_0x3b9535(0x4c3)]===void 0x0&&await this[_0x3b9535(0x1ce)]();let _0x34ec44;if(_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x77b)]===_0x3b9535(0x39f)||_0x32d44d[_0x3b9535(0x175)]['type']===_0x3b9535(0x790)){let _0x2b7a3d=_0x32d44d['menuMessage'][_0x3b9535(0x2c7)][_0x3b9535(0x29b)]('\x0a'),_0x37937b='',_0x4b8e11='';_0x2b7a3d!==-0x1?(_0x37937b=_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x2c7)][_0x3b9535(0x59f)](0x0,_0x2b7a3d)[_0x3b9535(0x1d2)](),_0x4b8e11=_0x32d44d['menuMessage']['text'][_0x3b9535(0x59f)](_0x2b7a3d+0x1)):_0x4b8e11=_0x32d44d[_0x3b9535(0x175)]['text'];let _0x3e5c7d=_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x703)]['filter'](_0x463849=>_0x463849['trim']()!==''),_0x5769b8=this[_0x3b9535(0xfd)](_0x3e5c7d);_0x34ec44={'listMessage':{'title':_0x37937b,'description':_0x4b8e11,'buttonText':_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x27e)]||_0x3b9535(0x10d),'footerText':_0x32d44d['menuMessage']['footerText'],'sections':_0x5769b8,'listType':0x2}};}else{if(_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x77b)]==='poll'){let _0xc66874=_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x703)]['filter'](_0x4a2fb5=>!(_0x4a2fb5[_0x3b9535(0x80e)]('[')&&_0x4a2fb5['endsWith'](']'))&&_0x4a2fb5[_0x3b9535(0x1d2)]()!=='')[_0x3b9535(0x733)](_0x37f616=>_0x37f616['split']('\x0a')[0x0]);for(;_0xc66874[_0x3b9535(0x11c)]<0x2;)_0xc66874[_0x3b9535(0x7b9)]('Opção\x20Falsa\x20'+(_0xc66874[_0x3b9535(0x11c)]+0x1));_0x34ec44={'poll':{'name':_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x2c7)],'selectableCount':_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x6d7)]||0x1,'values':_0xc66874}};}else{if(_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x77b)]===_0x3b9535(0x2c9)){let _0x11986d=this[_0x3b9535(0x474)](_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x703)][_0x3b9535(0x56c)](_0x351310=>!(_0x351310[_0x3b9535(0x80e)]('[')&&_0x351310[_0x3b9535(0x14b)](']'))));return _0x34ec44={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x2c7)]},'footer':_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x75a)]?{'text':_0x32d44d[_0x3b9535(0x175)]['footerText']}:void 0x0,'nativeFlowMessage':{'buttons':_0x11986d,'messageParamsJson':JSON['stringify']({'from':_0x3b9535(0x4e7),'templateId':_0x3b9535(0x61c)+(0x0,oe[_0x3b9535(0x5eb)])(0x12)['toString'](_0x3b9535(0x7e3))[_0x3b9535(0x593)]()})}}}}},await this['sendMessageWithTypingButtons'](_0x32d44d[_0x3b9535(0x162)],_0x34ec44,_0x32d44d?.['options']);}else{if(_0x32d44d[_0x3b9535(0x175)]['type']===_0x3b9535(0x292)){let _0x867cf9=this[_0x3b9535(0x6e7)](_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x703)]);return _0x34ec44={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x2c7)]},'footer':_0x32d44d[_0x3b9535(0x175)][_0x3b9535(0x75a)]?{'text':_0x32d44d['menuMessage']['footerText']}:void 0x0,'nativeFlowMessage':{'buttons':_0x867cf9,'messageParamsJson':JSON[_0x3b9535(0x238)]({'from':_0x3b9535(0x4e7),'templateId':'3EB0'+(0x0,oe[_0x3b9535(0x5eb)])(0x12)['toString']('hex')[_0x3b9535(0x593)]()})}}}}},await this[_0x3b9535(0x194)](_0x32d44d[_0x3b9535(0x162)],_0x34ec44,_0x32d44d?.['options']);}}}}return await this[_0x3b9535(0x234)](_0x32d44d[_0x3b9535(0x162)],_0x34ec44,_0x32d44d?.[_0x3b9535(0x1e9)]);}[a0_0x3cfc7d(0x474)](_0x134327){const _0x3f5c73=a0_0x3cfc7d;return _0x134327[_0x3f5c73(0x733)](_0x407205=>{const _0x12d2b9=_0x3f5c73;let _0x1d708d=_0x407205[_0x12d2b9(0x407)]('\x0a')[_0x12d2b9(0x733)](_0x1d447a=>_0x1d447a[_0x12d2b9(0x1d2)]()),_0x5f2cd2=_0x1d708d[0x0],_0x2fa448=_0x1d708d[0x1]||_0x5f2cd2,_0x4f68b9=_0x2fa448[_0x12d2b9(0x80e)](_0x12d2b9(0x338))?_0x12d2b9(0x4e3):'quick_reply';return{'name':_0x4f68b9,'buttonParamsJson':JSON['stringify']({'display_text':_0x5f2cd2,'id':_0x4f68b9===_0x12d2b9(0x29c)?_0x2fa448:void 0x0,'url':_0x4f68b9==='cta_url'?_0x2fa448:void 0x0})};});}[a0_0x3cfc7d(0x6e7)](_0x46da43){const _0xad1191=a0_0x3cfc7d;let _0x295111=[],_0x2129f0={'title':'','rows':[]};return _0x46da43[_0xad1191(0x455)](_0x17bcdb=>{const _0x5badc5=_0xad1191;if(_0x17bcdb['startsWith']('[')&&_0x17bcdb[_0x5badc5(0x14b)](']'))_0x2129f0[_0x5badc5(0x57a)][_0x5badc5(0x11c)]>0x0&&_0x295111[_0x5badc5(0x7b9)](_0x2129f0),_0x2129f0={'title':_0x17bcdb[_0x5badc5(0x1ae)](0x1,-0x1),'rows':[]};else{let _0x3519a7=_0x17bcdb['split']('\x0a')[_0x5badc5(0x733)](_0x539abb=>_0x539abb[_0x5badc5(0x1d2)]()),_0x519ca7=_0x3519a7[0x0],_0x42e38d=_0x3519a7[0x1]?_0x3519a7[0x1]:void 0x0,_0x21eb05=_0x3519a7[0x2]||_0x519ca7;_0x2129f0['rows']['push']({'title':_0x519ca7,'description':_0x42e38d,'id':_0x21eb05});}}),_0x2129f0[_0xad1191(0x57a)]['length']>0x0&&_0x295111[_0xad1191(0x7b9)](_0x2129f0),[{'name':'single_select','buttonParamsJson':JSON[_0xad1191(0x238)]({'title':_0xad1191(0x54f),'sections':_0x295111})}];}[a0_0x3cfc7d(0xfd)](_0x29ae18){const _0x429d95=a0_0x3cfc7d;let _0x3cc00f=[],_0x2c2705={'rows':[]};return _0x29ae18[_0x429d95(0x455)](_0x14827e=>{const _0x2902da=_0x429d95;if(_0x14827e[_0x2902da(0x80e)]('[')&&_0x14827e[_0x2902da(0x14b)](']'))_0x2c2705[_0x2902da(0x57a)]['length']>0x0&&_0x3cc00f['push'](_0x2c2705),_0x2c2705={'title':_0x14827e['slice'](0x1,-0x1),'rows':[]};else{let _0x1e3f36=_0x14827e[_0x2902da(0x407)]('\x0a')['map'](_0x241cf6=>_0x241cf6[_0x2902da(0x1d2)]()),_0x53a643=_0x1e3f36[0x0],_0x47e646=_0x1e3f36[0x1]||null,_0x3a57b7=_0x1e3f36[0x2]||_0x53a643;_0x2c2705[_0x2902da(0x57a)][_0x2902da(0x7b9)]({'title':_0x53a643,'description':_0x47e646,'rowId':_0x3a57b7});}}),_0x2c2705[_0x429d95(0x57a)]['length']>0x0&&_0x3cc00f[_0x429d95(0x7b9)](_0x2c2705),_0x3cc00f;}async[a0_0x3cfc7d(0x4b3)](_0x43c83e,_0x5ea8f4){const _0x23d637=a0_0x3cfc7d;if(await this['getMessage'](_0x43c83e,!0x0)){let _0x21f459={'where':{'_id':_0x43c83e['id']}},_0x55c926={'status':[_0x5ea8f4[_0x23d637(0x204)]][0x0]};try{let _0x251e70=await this[_0x23d637(0x67f)][_0x23d637(0x70f)][_0x23d637(0x3f8)](_0x21f459,_0x55c926,this[_0x23d637(0x3d0)][_0x23d637(0x4ae)]);_0x251e70&&F(this['instanceName'],_0x23d637(0x30c),{'message':_0x251e70});}catch{}}}[a0_0x3cfc7d(0x393)](_0x3691aa){const _0x77b272=a0_0x3cfc7d;let _0x5c8483=[];return _0x3691aa[_0x77b272(0x455)](_0x3f8a8d=>{const _0x1b7026=_0x77b272;_0x3f8a8d[_0x1b7026(0x486)]&&_0x5c8483[_0x1b7026(0x7b9)]('['+_0x3f8a8d[_0x1b7026(0x486)]+']'),_0x3f8a8d[_0x1b7026(0x57a)]['forEach'](_0x221a1b=>{const _0xf199ea=_0x1b7026;_0x5c8483[_0xf199ea(0x7b9)](_0x221a1b['title']);});}),_0x5c8483['join']('|');}[a0_0x3cfc7d(0x366)](_0x40bd00){const _0x3d8f98=a0_0x3cfc7d;let _0x1d6680=_0x40bd00[_0x3d8f98(0x5e0)](/\\n/g,'\x0a')['split']('\x0a')['filter'](_0x30a9c2=>_0x30a9c2['includes'](_0x3d8f98(0x4d4))||_0x30a9c2[_0x3d8f98(0x1ec)](_0x3d8f98(0x846))),_0x43bf9f='';return _0x1d6680[_0x3d8f98(0x455)](_0xb4ae91=>{const _0x2587d4=_0x3d8f98;let _0x309ec2=/TEL(?:.*):(.+)/,_0xb4e825=/EMAIL(?:.*):(.+)/,_0x53d93f=_0xb4ae91['match'](_0x309ec2),_0x51aae7=_0xb4ae91[_0x2587d4(0x151)](_0xb4e825);if(_0x53d93f){let _0x37847d=_0x53d93f[0x1][_0x2587d4(0x5e0)](/-| |\+|\(|\)/g,'')[_0x2587d4(0x1d2)]();_0x43bf9f+=_0x2587d4(0x73b)+_0x37847d+'\x0a';}else{if(_0x51aae7){let _0x4af5f1=_0x51aae7[0x1][_0x2587d4(0x1d2)]();_0x43bf9f+=_0x2587d4(0x353)+_0x4af5f1+'\x0a';}}}),_0x43bf9f[_0x3d8f98(0x1d2)]();}async[a0_0x3cfc7d(0x2f0)](_0x39f2bf,_0x20bda4,_0x673a50,_0x3f9533=null){const _0x4e1e14=a0_0x3cfc7d;if(_0x39f2bf[_0x4e1e14(0x78c)])try{let _0xf17af=_0x20bda4[_0x4e1e14(0x1e4)][_0x4e1e14(0x6d9)][_0x4e1e14(0x5e0)](/:\d{1,2}@/g,'@'),_0x323b57=_0x20bda4[_0x4e1e14(0x1e4)]['fromMe'],_0x30d564=_0xf17af['endsWith'](_0x4e1e14(0x2a5)),_0x37e3e6=_0x20bda4[_0x4e1e14(0x87c)]?.['replace'](/:\d{1,2}@/g,'@')||'',_0x4f8574=_0x20bda4[_0x4e1e14(0x6cf)]?.['text']||_0x20bda4['message_normalized']?.[_0x4e1e14(0x444)]||_0x20bda4[_0x4e1e14(0x6cf)]?.['vote']||_0x20bda4[_0x4e1e14(0x6cf)]?.['name']||'',_0x27c802={'_id':_0x20bda4[_0x4e1e14(0x7b5)],'remoteJid':_0x323b57?this[_0x4e1e14(0x3d0)]['wuid']:_0x30d564?_0x37e3e6:_0xf17af,'pushName':_0x323b57?this['instance']['profileName']||'Eu':_0x20bda4[_0x4e1e14(0x7b2)],'text':_0x4f8574,'type':_0x20bda4[_0x4e1e14(0x60e)],'when':_0x20bda4['messageTimestamp']||Date['now']()};_0x3f9533||(_0x3f9533=await this[_0x4e1e14(0x67f)]['chat']['findOne']({'where':{'_id':_0xf17af}},this[_0x4e1e14(0x3d0)][_0x4e1e14(0x4ae)]));let _0x1406e7=_0x323b57?0x0:_0x3f9533?(_0x3f9533[_0x4e1e14(0x1d0)]||0x0)+0x1:0x1,_0x13da0e={'lastmsg':_0x20bda4[_0x4e1e14(0x2bb)]||Date[_0x4e1e14(0x6aa)](),'ephemeralExpiration':_0x20bda4[_0x4e1e14(0x571)],'lastMessage':_0x27c802,'unreadcount':_0x1406e7,..._0x323b57||_0x30d564?{}:{'name':_0x20bda4[_0x4e1e14(0x7b2)]},..._0x30d564?{'group':_0x30d564}:{},...!_0x323b57&&!_0x30d564&&_0x20bda4[_0x4e1e14(0x2ae)]?{'imagechat':_0x20bda4['profilePictureUrl']}:{}};if(!_0x30d564&&(!_0x3f9533?.[_0x4e1e14(0x6ac)]||!_0x3f9533[_0x4e1e14(0x6ac)][_0x4e1e14(0x73a)])&&_0x20bda4[_0x4e1e14(0x7b2)]&&!_0x323b57&&(_0x13da0e={..._0x13da0e,'leadInfo.nome':_0x20bda4[_0x4e1e14(0x7b2)]}),_0x3f9533?.['leadInfo'][_0x4e1e14(0x2c4)]||(_0x13da0e={..._0x13da0e,'leadInfo.etiquetas':[]}),_0x3f9533?.[_0x4e1e14(0x6ac)][_0x4e1e14(0x516)]||(_0x13da0e={..._0x13da0e,'leadInfo.customFields':[]}),_0x3f9533?.[_0x4e1e14(0x6ac)][_0x4e1e14(0x5bd)]||(_0x13da0e={..._0x13da0e,'leadInfo.tags':[]}),_0x3f9533&&_0x3f9533?.[_0x4e1e14(0x210)]){let _0x116e20=await this[_0x4e1e14(0x67f)][_0x4e1e14(0x1d3)][_0x4e1e14(0x1c4)]({'where':{}},this[_0x4e1e14(0x3d0)]['wuid']),_0x8e9c30=new Set(_0x116e20['map'](_0x4607ad=>_0x4607ad[_0x4e1e14(0x7b5)])),_0x880904=(_0x3f9533[_0x4e1e14(0x6ac)]?.['etiquetas']||[])['filter'](_0x10573a=>_0x8e9c30['has'](_0x10573a));_0x13da0e={..._0x13da0e,'imported':!0x1,'leadInfo.etiquetas':_0x880904};for(let _0x2fe6c7 of _0x880904)await this['AddChatLabel'](_0x2fe6c7,_0xf17af);}if(!this[_0x4e1e14(0x37f)]['flows'][_0x4e1e14(0x1c4)](_0x54fbce=>_0x54fbce['startCommand']&&_0x4f8574['includes'](_0x54fbce['startCommand']))&&_0x673a50==='MESSAGES_UPSERT'&&_0x323b57&&this['AutomateSystem']?.[_0x4e1e14(0x55d)][_0x4e1e14(0x119)]&&_0x4f8574[_0x4e1e14(0x1d2)]()!==this['AutomateSystem']?.[_0x4e1e14(0x55d)][_0x4e1e14(0x7ae)][_0x4e1e14(0x1d2)]()){let _0x75a864=(this['AutomateSystem']?.['flowConfig'][_0x4e1e14(0x176)]||0x0)*0xea60,_0x46e60a=Date[_0x4e1e14(0x6aa)]()+_0x75a864;_0x3f9533?.['leadInfo']?.['desativadoFluxoAte']===0x0||(_0x13da0e={..._0x13da0e,'leadInfo.desativadoFluxoAte':_0x46e60a},this[_0x4e1e14(0x478)][_0x4e1e14(0x4e1)](this['instanceName']+'\x20('+this[_0x4e1e14(0x3d0)][_0x4e1e14(0x4ae)]+'):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20'+_0x46e60a+'.'));}if(_0x4f8574[_0x4e1e14(0x1d2)]()===this[_0x4e1e14(0x37f)]?.['flowConfig'][_0x4e1e14(0x7ae)][_0x4e1e14(0x1d2)]()){this['logger']['verbose'](this[_0x4e1e14(0x1c7)]+'\x20('+this[_0x4e1e14(0x3d0)][_0x4e1e14(0x4ae)]+'):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20'+_0x4f8574);let _0x3a5aee=Date[_0x4e1e14(0x6aa)]();this[_0x4e1e14(0x37f)]?.[_0x4e1e14(0x55d)][_0x4e1e14(0x341)]===0x0?_0x13da0e={..._0x13da0e,'leadInfo.desativadoFluxoAte':_0x3a5aee+0x7591f6200}:_0x13da0e={..._0x13da0e,'leadInfo.desativadoFluxoAte':_0x3a5aee+this[_0x4e1e14(0x37f)]?.[_0x4e1e14(0x55d)][_0x4e1e14(0x341)]*0x3c*0x3e8};}if(_0x3f9533=await this['repository'][_0x4e1e14(0x52b)][_0x4e1e14(0x104)]({'where':{'_id':_0xf17af}},_0x13da0e,this[_0x4e1e14(0x3d0)]['wuid'],{'new':!0x0,'upsert':!0x0}),_0x3f9533)F(this[_0x4e1e14(0x1c7)],_0x4e1e14(0x2cb),{'chat':_0x3f9533});else{this[_0x4e1e14(0x478)][_0x4e1e14(0x3c6)](this[_0x4e1e14(0x1c7)]+'\x20('+this[_0x4e1e14(0x3d0)]['wuid']+_0x4e1e14(0x577));return;}if(_0x323b57)return this[_0x4e1e14(0x478)][_0x4e1e14(0x4e1)](this['instanceName']+'\x20('+this[_0x4e1e14(0x3d0)][_0x4e1e14(0x4ae)]+_0x4e1e14(0x73e)),null;if(!this[_0x4e1e14(0x37f)]?.[_0x4e1e14(0x55d)][_0x4e1e14(0x119)])return this[_0x4e1e14(0x478)][_0x4e1e14(0x4e1)](this[_0x4e1e14(0x1c7)]+'\x20('+this[_0x4e1e14(0x3d0)][_0x4e1e14(0x4ae)]+_0x4e1e14(0x566)),null;if(_0x3f9533['_id'][_0x4e1e14(0x1ec)]('@g.us')&&this['AutomateSystem']?.[_0x4e1e14(0x55d)][_0x4e1e14(0x576)]===!0x0)return this[_0x4e1e14(0x478)]['verbose'](this['instanceName']+'\x20('+this[_0x4e1e14(0x3d0)]['wuid']+_0x4e1e14(0x3a7)),null;if(_0x3f9533[_0x4e1e14(0x6ac)]){if(_0x3f9533[_0x4e1e14(0x6ac)][_0x4e1e14(0x1ee)]===0x0||_0x3f9533[_0x4e1e14(0x6ac)][_0x4e1e14(0x15f)])return this[_0x4e1e14(0x478)]['verbose'](this[_0x4e1e14(0x1c7)]+'\x20('+this[_0x4e1e14(0x3d0)][_0x4e1e14(0x4ae)]+_0x4e1e14(0x40e)+_0xf17af+_0x4e1e14(0x709)),null;if(_0x3f9533[_0x4e1e14(0x6ac)][_0x4e1e14(0x1ee)]>Date[_0x4e1e14(0x6aa)]()&&!_0x20bda4[_0x4e1e14(0x6cf)]?.['vote'])return this[_0x4e1e14(0x478)]['verbose'](this['instanceName']+'\x20('+this[_0x4e1e14(0x3d0)][_0x4e1e14(0x4ae)]+_0x4e1e14(0x6fa)+new Date(_0x3f9533['leadInfo'][_0x4e1e14(0x1ee)])[_0x4e1e14(0x3e5)]()+_0x4e1e14(0x709)),null;}this[_0x4e1e14(0x478)][_0x4e1e14(0x4e1)](this[_0x4e1e14(0x1c7)]+'\x20('+this['instance']['wuid']+_0x4e1e14(0x6a3)),this[_0x4e1e14(0x5e6)](_0x20bda4,_0x673a50);}catch(_0x5df107){let _0x2940e4=_0x4e1e14(0x4c2),_0x9c4729=_0x5df107 instanceof Error?_0x5df107[_0x4e1e14(0x70f)]:typeof _0x5df107==_0x4e1e14(0x54e)?JSON['stringify'](_0x5df107):_0x5df107,_0x20e5b7=_0x2940e4+':\x20'+_0x9c4729;return this[_0x4e1e14(0x478)][_0x4e1e14(0x3c6)](this['instanceName']+'\x20('+this[_0x4e1e14(0x3d0)]['wuid']+_0x4e1e14(0x71a)+_0x20e5b7),null;}}async[a0_0x3cfc7d(0x32f)](_0x2ac1f2,_0x968b3f){const _0x627a6d=a0_0x3cfc7d;if(_0x968b3f[_0x627a6d(0x78c)]){let _0x312dc1=_0x2ac1f2[_0x627a6d(0x733)](async _0x157708=>{const _0xda6d8a=_0x627a6d;try{let _0x24218e={'_id':_0x157708[_0xda6d8a(0x7b5)],'owner':_0x157708[_0xda6d8a(0x6a6)],'lastcache':0x0};if(Object[_0xda6d8a(0x1a4)](_0x157708)[_0xda6d8a(0x455)](_0x4d97a3=>{_0x157708[_0x4d97a3]!==null&&(_0x24218e[_0x4d97a3]=_0x157708[_0x4d97a3]);}),_0x24218e[_0xda6d8a(0x25e)]===null&&(_0x24218e[_0xda6d8a(0x25e)]=_0xda6d8a(0x77e)),Object[_0xda6d8a(0x1a4)](_0x24218e)[_0xda6d8a(0x11c)]>0x0)return await this[_0xda6d8a(0x67f)][_0xda6d8a(0x52b)][_0xda6d8a(0x104)]({'where':{'_id':_0x157708['_id']}},_0x24218e,this[_0xda6d8a(0x3d0)][_0xda6d8a(0x4ae)]);}catch(_0x2b7f8c){let _0x1f9989=_0xda6d8a(0x785)+_0x157708[_0xda6d8a(0x7b5)],_0x43a648=_0x2b7f8c instanceof Error?_0x2b7f8c['message']:typeof _0x2b7f8c==_0xda6d8a(0x54e)?JSON['stringify'](_0x2b7f8c):_0x2b7f8c,_0x141067=_0x1f9989+':\x20'+_0x43a648;return this[_0xda6d8a(0x478)][_0xda6d8a(0x3c6)](this[_0xda6d8a(0x1c7)]+'\x20('+this[_0xda6d8a(0x3d0)][_0xda6d8a(0x4ae)]+_0xda6d8a(0x71a)+_0x141067),null;}}),_0x3e98c2=(await Promise[_0x627a6d(0x35a)](_0x312dc1))[_0x627a6d(0x56c)](_0x30c9cf=>_0x30c9cf!==null)[_0x627a6d(0x11c)];this[_0x627a6d(0x478)]['verbose'](this['instanceName']+'\x20('+this[_0x627a6d(0x3d0)]['wuid']+_0x627a6d(0x71a)+_0x3e98c2+_0x627a6d(0x78f)+this[_0x627a6d(0x3d0)]['wuid']+_0x627a6d(0x44d));}}async[a0_0x3cfc7d(0x298)](_0x3b0320){const _0x13b9c7=a0_0x3cfc7d;this['logger'][_0x13b9c7(0x4e1)](this['instanceName']+'\x20('+this[_0x13b9c7(0x3d0)][_0x13b9c7(0x4ae)]+'):\x20Ler\x20mensagem');let _0x5a3401={'readMessages':[{'remoteJid':_0x3b0320[_0x13b9c7(0x69b)][_0x13b9c7(0x654)][_0x13b9c7(0x1e4)][_0x13b9c7(0x6d9)],'fromMe':_0x3b0320[_0x13b9c7(0x69b)]['lastReceivedMessage'][_0x13b9c7(0x1e4)][_0x13b9c7(0x562)],'id':_0x3b0320[_0x13b9c7(0x69b)][_0x13b9c7(0x654)]['key']['id']}]};await this['markMessageAsRead'](_0x5a3401);}async[a0_0x3cfc7d(0x5e6)](_0x57bbbf,_0x428822){const _0x14e864=a0_0x3cfc7d;try{let {key:_0x59b0e2,message_normalized:_0x2183cf}=_0x57bbbf,_0x3837e6=_0x2183cf,_0x1f0a01=_0x2183cf[_0x14e864(0x2c7)]||_0x2183cf['caption']||_0x2183cf[_0x14e864(0x1a1)]||_0x2183cf[_0x14e864(0x75b)]||'',_0x5f09bf=_0x59b0e2['remoteJid'],_0x158143=null,_0x374fe5=this[_0x14e864(0x37f)][_0x14e864(0x3dc)]['find'](_0x44a4ad=>_0x44a4ad[_0x14e864(0x864)]&&_0x1f0a01['includes'](_0x44a4ad[_0x14e864(0x864)]));if(_0x374fe5&&_0x428822===_0x14e864(0x22f)){let _0x1b8646=await this[_0x14e864(0x67f)][_0x14e864(0x2dc)][_0x14e864(0x36a)]({'where':{'_id':_0x374fe5[_0x14e864(0x7b5)]}});if(this[_0x14e864(0x478)][_0x14e864(0x4e1)](this['instanceName']+'\x20('+this[_0x14e864(0x3d0)][_0x14e864(0x4ae)]+_0x14e864(0x778)),_0x1b8646&&_0x1b8646[_0x14e864(0x24d)]?.[_0x14e864(0x1ec)](this[_0x14e864(0x3d0)]['wuid']))_0x158143=await this[_0x14e864(0x886)](_0x1b8646,_0x59b0e2,_0x3837e6);else return this[_0x14e864(0x478)]['verbose'](this[_0x14e864(0x1c7)]+'\x20('+this[_0x14e864(0x3d0)][_0x14e864(0x4ae)]+_0x14e864(0x23a)),null;}else this[_0x14e864(0x478)][_0x14e864(0x4e1)](this[_0x14e864(0x1c7)]+'\x20('+this[_0x14e864(0x3d0)][_0x14e864(0x4ae)]+_0x14e864(0x3cd));if(_0x158143=await this[_0x14e864(0x37e)](_0x5f09bf,_0x3837e6),_0x158143){this[_0x14e864(0x478)][_0x14e864(0x4e1)](this[_0x14e864(0x1c7)]+'\x20('+this[_0x14e864(0x3d0)][_0x14e864(0x4ae)]+_0x14e864(0x628)),!_0x59b0e2[_0x14e864(0x562)]&&_0x158143[_0x14e864(0x463)]&&this['readMessageBot'](_0x158143);let _0x1dd03b=await this[_0x14e864(0x55a)](_0x158143);_0x1dd03b&&await this['processblock'](_0x158143,_0x1dd03b);}}catch(_0x370d4f){this['logger']['error'](this[_0x14e864(0x1c7)]+'\x20('+this[_0x14e864(0x3d0)][_0x14e864(0x4ae)]+_0x14e864(0x321)+(_0x370d4f instanceof Error?_0x370d4f[_0x14e864(0x70f)]:JSON[_0x14e864(0x238)](_0x370d4f,null,0x2)));}}[a0_0x3cfc7d(0x839)](_0x2f73e9,_0x12cac1='',_0x3dda4f={}){const _0x361149=a0_0x3cfc7d;return typeof _0x2f73e9!=_0x361149(0x54e)||_0x2f73e9===null?(_0x12cac1&&(_0x3dda4f[_0x12cac1]=_0x2f73e9),_0x3dda4f):(Object[_0x361149(0x2b7)](_0x2f73e9)[_0x361149(0x455)](([_0x88676f,_0x614287])=>{const _0xba5073=_0x361149;let _0x5d5ad1=_0x12cac1?_0x12cac1+'.'+_0x88676f:'_'+_0x88676f;Array[_0xba5073(0x2f5)](_0x614287)?_0x614287[_0xba5073(0x455)]((_0x1f02b6,_0x48fb42)=>{this['flattenObject'](_0x1f02b6,_0x5d5ad1+'['+_0x48fb42+']',_0x3dda4f);}):typeof _0x614287==_0xba5073(0x54e)&&_0x614287!==null?this[_0xba5073(0x839)](_0x614287,_0x5d5ad1,_0x3dda4f):_0x3dda4f[_0x5d5ad1]=String(_0x614287);}),_0x3dda4f);}['variablesToObject'](_0xf8efbd){const _0x510bdc=a0_0x3cfc7d;let _0x59a930={};for(let _0x1c606c of _0xf8efbd)typeof _0x1c606c['name']==_0x510bdc(0x3f6)&&typeof _0x1c606c[_0x510bdc(0x46c)]==_0x510bdc(0x3f6)&&(_0x59a930[_0x1c606c[_0x510bdc(0x75b)]]=_0x1c606c['value']);return _0x59a930;}async['NextBlock'](_0xdc5be){const _0x14660c=a0_0x3cfc7d;if(!this['AutomateSystem']?.[_0x14660c(0x55d)][_0x14660c(0x119)]||_0xdc5be['status']!=='open'&&_0xdc5be[_0x14660c(0x391)]==='')return null;let _0x35677d=_0xdc5be[_0x14660c(0x69b)]['lastBlockId']||_0x14660c(0x4e4);typeof _0xdc5be[_0x14660c(0x69b)][_0x14660c(0x853)]>'u'&&(_0xdc5be[_0x14660c(0x69b)]['lastCondition']=!0x0);let _0xcf9f66=_0xdc5be[_0x14660c(0x69b)][_0x14660c(0x853)];this[_0x14660c(0x478)]['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x14660c(0x85f)+_0x35677d+_0x14660c(0x212)+_0xcf9f66);let _0x167042=_0x35677d===_0x14660c(0x4e4)?_0xdc5be['blocks'][_0x14660c(0x1c4)](_0x2fed48=>_0x2fed48[_0x14660c(0x77b)]===_0x14660c(0x4e4)):_0xdc5be[_0x14660c(0x2e4)][_0x14660c(0x1c4)](_0x8b3b68=>_0x8b3b68[_0x14660c(0x7b5)][_0x14660c(0x885)]()===_0x35677d['toString']());if(!_0x167042)return this[_0x14660c(0x478)][_0x14660c(0x3c6)](this[_0x14660c(0x1c7)]+'\x20('+this[_0x14660c(0x3d0)][_0x14660c(0x4ae)]+_0x14660c(0x642)+_0x35677d),null;let _0x422829={'_pushName':_0xdc5be?.['chatLog']?.[_0x14660c(0x654)]?.[_0x14660c(0x7b2)]||'','_sender':this[_0x14660c(0x3d0)][_0x14660c(0x4ae)]||'',..._0xdc5be[_0x14660c(0x69b)][_0x14660c(0x481)]},_0x54c97e=new Date();_0x422829['_day']=_0x54c97e[_0x14660c(0x5d3)](),_0x422829[_0x14660c(0x793)]=_0x54c97e[_0x14660c(0x231)]()+0x1,_0x422829[_0x14660c(0x67b)]=_0x54c97e['getFullYear'](),_0x422829['_hour']=_0x54c97e['getHours'](),_0x422829[_0x14660c(0x1f0)]=_0x54c97e['getMinutes'](),_0x422829['_second']=_0x54c97e[_0x14660c(0x74d)]();let _0x5bc3a2=null;if(_0xdc5be['waitingMenu_id']){let _0x11a3ae=_0xdc5be['chatLog'][_0x14660c(0x654)][_0x14660c(0x1a1)],_0x23baac=_0xdc5be['waitingMenu_replyOptions'][_0x14660c(0x1c4)](_0x2fc05f=>_0x2fc05f['option']===_0x11a3ae);if(_0x23baac){let _0x9041f1=_0x23baac[_0x14660c(0x27f)];if(_0x5bc3a2=_0xdc5be[_0x14660c(0x2e4)]['find'](_0x441b31=>_0x441b31[_0x14660c(0x724)]===_0x9041f1&&_0x441b31[_0x14660c(0x451)]===0x1),_0x167042[_0x14660c(0x76c)][_0x14660c(0x81b)]){let _0xea0d27={'id':_0xdc5be[_0x14660c(0x391)],'remoteJid':_0xdc5be['remoteJid'],'fromMe':!0x0};await this[_0x14660c(0x726)](_0xea0d27);}if(_0x167042[_0x14660c(0x76c)][_0x14660c(0x81b)]&&_0x167042['uazapi']['pollMessageOnDelete']&&_0x167042['uazapi'][_0x14660c(0x2c3)]===_0x14660c(0x1f2)){let _0x3f5702={'number':_0xdc5be['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x14660c(0x783)+_0xdc5be[_0x14660c(0x617)]+'\x0a*Você\x20respondeu*:\x0a'+_0x11a3ae}};await this[_0x14660c(0x39a)](_0x3f5702);}_0x422829[_0x14660c(0x4a5)]=_0x11a3ae,_0xdc5be[_0x14660c(0x204)]=_0x14660c(0x19a),_0xdc5be[_0x14660c(0x391)]='',_0xdc5be[_0x14660c(0x617)]='',_0xdc5be[_0x14660c(0x6d3)]=[];}else{this[_0x14660c(0x478)][_0x14660c(0x4e1)](this['instanceName']+'\x20('+this[_0x14660c(0x3d0)][_0x14660c(0x4ae)]+'):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um');let _0x499dc2={'activatedCount':_0xdc5be[_0x14660c(0x69b)][_0x14660c(0x223)]['filter'](_0x863a63=>String(_0x863a63[_0x14660c(0x440)])===String(_0x35677d))[_0x14660c(0x11c)],'moreLogs':[_0x14660c(0x21e)]};if(_0x167042['uazapi'][_0x14660c(0x5aa)]){let _0x5d1c2e={'number':_0xdc5be[_0x14660c(0x6d9)],'options':{'delay':0x0},'textMessage':{'text':_0x167042[_0x14660c(0x76c)][_0x14660c(0x5aa)]}};await this['textMessage'](_0x5d1c2e);}if(_0x167042[_0x14660c(0x468)]!==void 0x0&&_0x499dc2[_0x14660c(0x3b9)]>=_0x167042[_0x14660c(0x468)]){let _0x4971b9=Date[_0x14660c(0x6aa)](),_0x2f9736=_0x167042[_0x14660c(0x869)]??0xa;isNaN(_0x2f9736)&&(_0x2f9736=0xa);let _0x3a463b=_0x4971b9+_0x2f9736*0x3c*0x3e8;_0x499dc2['newStoppedUntil']=_0x3a463b,_0x499dc2['moreLogs'][_0x14660c(0x7b9)]('Atingido\x20interações\x20máximas,\x20parando\x20fluxo'),this[_0x14660c(0x6be)](_0xdc5be,_0x3a463b),_0xdc5be['waitingMenu_id']='',_0xdc5be[_0x14660c(0x617)]='',_0xdc5be[_0x14660c(0x6d3)]=[];}return this[_0x14660c(0x2fe)](_0xdc5be,_0x167042,_0x499dc2,!0x0),null;}}if(_0xcf9f66&&_0x167042[_0x14660c(0x27f)]&&!_0xdc5be[_0x14660c(0x391)]){let _0x16bb38=_0xdc5be[_0x14660c(0x2e4)]['filter'](_0x1ae04c=>_0x1ae04c['groupId'][_0x14660c(0x885)]()===_0x167042[_0x14660c(0x27f)][_0x14660c(0x885)]())[_0x14660c(0x476)]((_0x11e71e,_0x150a62)=>_0x11e71e[_0x14660c(0x451)]-_0x150a62[_0x14660c(0x451)]);_0x16bb38[_0x14660c(0x11c)]>0x0&&(_0x5bc3a2=_0x16bb38[0x0]);}if(!_0x5bc3a2){let _0x15ce78=_0x167042[_0x14660c(0x724)],_0x36ba01=_0xdc5be[_0x14660c(0x2e4)][_0x14660c(0x56c)](_0x3c447e=>_0x3c447e['groupId']===_0x15ce78&&_0x3c447e[_0x14660c(0x451)]>_0x167042[_0x14660c(0x451)])[_0x14660c(0x476)]((_0x15a940,_0x2734aa)=>_0x15a940[_0x14660c(0x451)]-_0x2734aa[_0x14660c(0x451)]);_0x36ba01[_0x14660c(0x11c)]>0x0&&(_0x5bc3a2=_0x36ba01[0x0]);}if(!_0x5bc3a2)return _0xdc5be['status']=_0x14660c(0x831),null;_0xdc5be[_0x14660c(0x69b)][_0x14660c(0x481)]=_0x422829;let _0x146b89=JSON['parse'](JSON[_0x14660c(0x238)](_0x5bc3a2));return this['replaceVariablesInObject'](_0x146b89,_0xdc5be[_0x14660c(0x69b)][_0x14660c(0x481)]),_0xdc5be[_0x14660c(0x69b)][_0x14660c(0x33b)]=_0x146b89[_0x14660c(0x7b5)],_0xdc5be[_0x14660c(0x69b)][_0x14660c(0x853)]=!0x0,_0x146b89;}[a0_0x3cfc7d(0x844)](_0xb5beb,_0x3ea91f){const _0x3f018a=a0_0x3cfc7d;return _0xb5beb[_0x3f018a(0x5e0)](/\{\{([^}]+)\}\}/g,(_0x56a9b3,_0x5730e5)=>_0x3ea91f[_0x5730e5]||'');}[a0_0x3cfc7d(0x134)](_0x23a726,_0x45748e){const _0x225a4d=a0_0x3cfc7d;for(let _0x4a77aa in _0x23a726)typeof _0x23a726[_0x4a77aa]==_0x225a4d(0x3f6)?_0x23a726[_0x4a77aa]=this['replaceVariables'](_0x23a726[_0x4a77aa],_0x45748e):typeof _0x23a726[_0x4a77aa]==_0x225a4d(0x54e)&&this['replaceVariablesInObject'](_0x23a726[_0x4a77aa],_0x45748e);}async['goNextblock'](_0x4f9c5a,_0x2396e5){const _0x58b217=a0_0x3cfc7d;let _0x4022bb=_0x2396e5[_0x58b217(0x7b5)];if(_0x4f9c5a[_0x58b217(0x69b)]&&_0x4f9c5a[_0x58b217(0x69b)][_0x58b217(0x223)]){let _0x59cce4=_0x4f9c5a[_0x58b217(0x69b)][_0x58b217(0x223)][_0x58b217(0x56c)](_0x1969a2=>String(_0x1969a2[_0x58b217(0x440)])===String(_0x4022bb))[_0x58b217(0x314)]();if(_0x59cce4&&_0x59cce4[_0x58b217(0x3c6)]&&_0x2396e5[_0x58b217(0x4f0)])return _0x4f9c5a[_0x58b217(0x204)]='closed',await this[_0x58b217(0x541)](_0x4f9c5a),null;}if(_0x2396e5['type']===_0x58b217(0x76c)&&_0x2396e5[_0x58b217(0x76c)][_0x58b217(0x35e)]==='sendPoll'&&_0x4f9c5a[_0x58b217(0x391)])return _0x4f9c5a[_0x58b217(0x69b)][_0x58b217(0x33b)]=_0x4022bb,await this[_0x58b217(0x541)](_0x4f9c5a),null;let _0x3213b1=await this['NextBlock'](_0x4f9c5a);if(_0x4f9c5a[_0x58b217(0x69b)]&&_0x4f9c5a[_0x58b217(0x69b)]['blockLogs']){let _0x37ea8f=_0x4f9c5a[_0x58b217(0x69b)][_0x58b217(0x223)][_0x58b217(0x56c)](_0x26a732=>String(_0x26a732[_0x58b217(0x440)])===String(_0x4022bb))[_0x58b217(0x11c)];if(_0x2396e5['maxActives']!==void 0x0&&_0x37ea8f>=_0x2396e5[_0x58b217(0x468)]){let _0x4b4288=Date[_0x58b217(0x6aa)](),_0x4dc774=_0x2396e5[_0x58b217(0x869)]??0xa;isNaN(_0x4dc774)&&(_0x4dc774=0xa);let _0x275f59=_0x4b4288+_0x4dc774*0x3c*0x3e8,_0x58563a={'newStoppedUntil':_0x275f59};return this[_0x58b217(0x6be)](_0x4f9c5a,_0x275f59),this[_0x58b217(0x2fe)](_0x4f9c5a,_0x2396e5,_0x58563a,!0x0),null;}}_0x3213b1&&_0x3213b1[_0x58b217(0x77b)]!==_0x58b217(0x565)&&await this[_0x58b217(0x545)](_0x4f9c5a,_0x3213b1),_0x3213b1||await this['saveConversationToDatabase'](_0x4f9c5a),_0x3213b1&&_0x3213b1['type']===_0x58b217(0x565)&&(_0x4f9c5a['chatLog'][_0x58b217(0x33b)]=_0x4022bb,await this[_0x58b217(0x541)](_0x4f9c5a));}async[a0_0x3cfc7d(0x545)](_0x284362,_0x28169b){const _0x26baeb=a0_0x3cfc7d;try{let _0x247e69=_0x28169b[_0x26baeb(0x77b)];this[_0x26baeb(0x478)]['verbose'](this['instanceName']+'\x20('+this[_0x26baeb(0x3d0)][_0x26baeb(0x4ae)]+_0x26baeb(0x34a)+_0x247e69);let _0x5e726e={'uazapi':()=>this[_0x26baeb(0x891)](_0x284362,_0x28169b),'save':()=>this[_0x26baeb(0x2af)](_0x284362,_0x28169b),'stop':()=>this[_0x26baeb(0x7ae)](_0x284362,_0x28169b),'condition':()=>this[_0x26baeb(0x2f4)](_0x284362,_0x28169b),'varedit':()=>this[_0x26baeb(0x37b)](_0x284362,_0x28169b),'apirequest':()=>this[_0x26baeb(0x805)](_0x284362,_0x28169b),'goToFlow':()=>this[_0x26baeb(0x794)](_0x284362,_0x28169b),'scheduleFlow':()=>this['processScheduleFlow'](_0x284362,_0x28169b),'awaitSeconds':()=>this[_0x26baeb(0x53a)](_0x284362,_0x28169b),'clearVariables':()=>this[_0x26baeb(0x875)](_0x284362,_0x28169b)}[_0x247e69];_0x5e726e&&await _0x5e726e();}catch(_0x2e43fd){this['logger'][_0x26baeb(0x3c6)](this[_0x26baeb(0x1c7)]+'\x20('+this[_0x26baeb(0x3d0)][_0x26baeb(0x4ae)]+_0x26baeb(0x6b2)+(_0x2e43fd instanceof Error?_0x2e43fd['message']:JSON['stringify'](_0x2e43fd,null,0x2)));}}async[a0_0x3cfc7d(0x53a)](_0x1e7e0b,_0x13e00b){const _0x545845=a0_0x3cfc7d;if(this[_0x545845(0x478)][_0x545845(0x4e1)](this[_0x545845(0x1c7)]+'\x20('+this[_0x545845(0x3d0)][_0x545845(0x4ae)]+_0x545845(0x47a)),!_0x1e7e0b||!_0x13e00b)return this[_0x545845(0x478)][_0x545845(0x3c6)](this[_0x545845(0x1c7)]+'\x20('+this['instance'][_0x545845(0x4ae)]+_0x545845(0x63b)),null;let _0x3982aa=+_0x13e00b['awaitSeconds'];isNaN(_0x3982aa)&&(_0x3982aa=0x0),_0x3982aa=Math[_0x545845(0x7d2)](_0x3982aa,0x3c),await(0x0,w[_0x545845(0x21c)])(_0x3982aa*0x3e8);let _0x50071e={'moreLogs':['Pausado\x20por\x20'+_0x3982aa+'\x20segundos']};return await this[_0x545845(0x2fe)](_0x1e7e0b,_0x13e00b,_0x50071e),_0x3982aa;}async[a0_0x3cfc7d(0x875)](_0x524a73,_0x121816){const _0x264762=a0_0x3cfc7d;if(this['logger'][_0x264762(0x4e1)](this[_0x264762(0x1c7)]+'\x20('+this[_0x264762(0x3d0)][_0x264762(0x4ae)]+_0x264762(0x5b9)),!_0x524a73||!_0x121816)return this[_0x264762(0x478)][_0x264762(0x3c6)](this[_0x264762(0x1c7)]+'\x20('+this[_0x264762(0x3d0)][_0x264762(0x4ae)]+_0x264762(0x63b)),null;let _0x422050=[];if(_0x121816[_0x264762(0x369)][_0x264762(0x1d2)]()===_0x264762(0x101)){let _0x3c37d5=[_0x264762(0x12b),_0x264762(0x191),_0x264762(0x108),_0x264762(0x6fe),'_remoteJid','_id',_0x264762(0x302)];_0x422050=Object[_0x264762(0x1a4)](_0x524a73['chatLog'][_0x264762(0x481)])[_0x264762(0x56c)](_0x5a2430=>_0x5a2430['startsWith']('_')&&!_0x3c37d5[_0x264762(0x1ec)](_0x5a2430));}else _0x422050=_0x121816['clearVariables'][_0x264762(0x407)]('|')[_0x264762(0x733)](_0x4de8ed=>(_0x4de8ed=_0x4de8ed[_0x264762(0x5e0)](/[{}]/g,'')[_0x264762(0x1d2)](),_0x4de8ed['startsWith']('_')?_0x4de8ed:'_'+_0x4de8ed));let _0x25aa13=[];_0x422050[_0x264762(0x455)](_0x16d122=>{const _0x5e2b93=_0x264762;_0x16d122 in _0x524a73[_0x5e2b93(0x69b)][_0x5e2b93(0x481)]&&(delete _0x524a73[_0x5e2b93(0x69b)]['realVariables'][_0x16d122],_0x25aa13[_0x5e2b93(0x7b9)](_0x16d122));}),_0x25aa13[_0x264762(0x11c)]>0x0?this[_0x264762(0x478)][_0x264762(0x4e1)](this[_0x264762(0x1c7)]+'\x20('+this[_0x264762(0x3d0)][_0x264762(0x4ae)]+_0x264762(0x615)+_0x25aa13[_0x264762(0x149)](',\x20')):this[_0x264762(0x478)]['verbose'](this[_0x264762(0x1c7)]+'\x20('+this['instance'][_0x264762(0x4ae)]+_0x264762(0x67e));let _0x5e1cce={'moreLogs':['Removidas\x20as\x20variáveis:\x20'+_0x25aa13[_0x264762(0x149)](',\x20')]};return await this[_0x264762(0x2fe)](_0x524a73,_0x121816,_0x5e1cce),null;}async[a0_0x3cfc7d(0x6b7)](_0x3a374c,_0x5a29ca){const _0x512b7b=a0_0x3cfc7d;if(this[_0x512b7b(0x478)][_0x512b7b(0x4e1)](this[_0x512b7b(0x1c7)]+'\x20('+this[_0x512b7b(0x3d0)][_0x512b7b(0x4ae)]+_0x512b7b(0x5ea)),!_0x3a374c||!_0x5a29ca)return this[_0x512b7b(0x478)][_0x512b7b(0x3c6)](this[_0x512b7b(0x1c7)]+'\x20('+this['instance'][_0x512b7b(0x4ae)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x141575=_0x3a374c[_0x512b7b(0x6d9)];_0x5a29ca[_0x512b7b(0x648)]['remoteJid']&&_0x5a29ca[_0x512b7b(0x648)]['remoteJid'][_0x512b7b(0x1d2)]()!==''&&(_0x141575=_0x5a29ca[_0x512b7b(0x76c)][_0x512b7b(0x6d9)][_0x512b7b(0x1d2)]());let _0x63d5b9=_0x5a29ca[_0x512b7b(0x648)][_0x512b7b(0x804)]*0xea60,_0x5ddb4b=Date[_0x512b7b(0x6aa)]()+_0x63d5b9,_0x3ce803={'status':_0x512b7b(0x14f),'info':_0x512b7b(0x610)+_0x3a374c[_0x512b7b(0x75b)],'remoteJids':[_0x141575],'when':_0x5ddb4b,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x512b7b(0x2dc),'flowName':_0x5a29ca[_0x512b7b(0x648)][_0x512b7b(0x45c)]};this['editScheduleMessage'](_0x3ce803);let _0x5c7a62=await this[_0x512b7b(0x55a)](_0x3a374c);_0x5c7a62&&await this['processblock'](_0x3a374c,_0x5c7a62);}async[a0_0x3cfc7d(0x794)](_0x16b06f,_0x318369){const _0xe30c1f=a0_0x3cfc7d;if(this['logger']['verbose'](this['instanceName']+'\x20('+this[_0xe30c1f(0x3d0)][_0xe30c1f(0x4ae)]+_0xe30c1f(0x649)),!_0x16b06f||!_0x318369)return this[_0xe30c1f(0x478)][_0xe30c1f(0x3c6)](this[_0xe30c1f(0x1c7)]+'\x20('+this['instance'][_0xe30c1f(0x4ae)]+_0xe30c1f(0x63b)),null;await this[_0xe30c1f(0x2fe)](_0x16b06f,_0x318369,{},!0x0,!0x0);let _0x1d39df=_0x318369['goToFlow'];_0x16b06f=await this[_0xe30c1f(0x889)](_0x1d39df,_0x16b06f['remoteJid'],_0x16b06f[_0xe30c1f(0x69b)][_0xe30c1f(0x481)]);let _0x2714b3=await this[_0xe30c1f(0x55a)](_0x16b06f);_0x2714b3&&await this[_0xe30c1f(0x545)](_0x16b06f,_0x2714b3);}async['createConversationforgoToFlow'](_0x56bdc5,_0x3cca0f,_0x22a9ec){const _0x55c888=a0_0x3cfc7d;this['logger'][_0x55c888(0x4e1)](this[_0x55c888(0x1c7)]+'\x20('+this[_0x55c888(0x3d0)]['wuid']+'):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]');try{let _0x1fa1cc=this[_0x55c888(0x37f)][_0x55c888(0x3dc)][_0x55c888(0x1c4)](_0x4664cd=>_0x4664cd[_0x55c888(0x7b5)]===_0x56bdc5);_0x1fa1cc||this['logger'][_0x55c888(0x3c6)](this[_0x55c888(0x1c7)]+'\x20('+this[_0x55c888(0x3d0)]['wuid']+'):\x20Flow\x20\x27'+_0x56bdc5+_0x55c888(0x273));let _0x4fb256=await this[_0x55c888(0x67f)]['flow'][_0x55c888(0x36a)]({'where':{'_id':_0x1fa1cc['_id']}});if(!_0x4fb256||!_0x4fb256[_0x55c888(0x24d)]?.[_0x55c888(0x1ec)](this[_0x55c888(0x3d0)][_0x55c888(0x4ae)]))throw this['logger']['error'](this[_0x55c888(0x1c7)]+'\x20('+this[_0x55c888(0x3d0)][_0x55c888(0x4ae)]+_0x55c888(0x462)+_0x56bdc5+_0x55c888(0x5d1)),new m(_0x55c888(0x203)+_0x56bdc5+_0x55c888(0x5d1));let _0x2b45f8=require(_0x55c888(0x506))[_0x55c888(0x810)],_0x832137=Date[_0x55c888(0x6aa)](),_0x5a9430=_0x55c888(0x4e4),_0x17d734={},_0x143079={},_0x59e9bd=this[_0x55c888(0x37f)][_0x55c888(0x3dc)][_0x55c888(0x1c4)](_0x5d5dc0=>_0x5d5dc0[_0x55c888(0x7b5)]===_0x4fb256[_0x55c888(0x7b5)]?.[_0x55c888(0x885)]()),_0x2862f9=_0x59e9bd?.[_0x55c888(0x5f0)]??_0x4fb256[_0x55c888(0x5f0)]??0x0,_0x2e2156=_0x59e9bd?.[_0x55c888(0x463)]??_0x4fb256['readMessages']??!0x1,_0x5b1c96={'flowId':_0x1fa1cc[_0x55c888(0x7b5)],'readMessages':_0x1fa1cc[_0x55c888(0x463)],..._0x4fb256,'chatLog':null},_0xdd125b={'lastReceivedMessage':_0x17d734,'lastSendMessage':_0x143079,'lastBlockId':_0x5a9430,'lastCondition':!0x0,'realVariables':_0x22a9ec};_0x5b1c96[_0x55c888(0x69b)]=_0xdd125b,_0x5b1c96['chatLog'][_0x55c888(0x481)]={..._0x22a9ec},delete _0x5b1c96['_id'],_0x5b1c96[_0x55c888(0x7b5)]=new _0x2b45f8(),_0x5b1c96['lastInteraction']=_0x832137,_0x5b1c96[_0x55c888(0x204)]=_0x55c888(0x19a),_0x5b1c96[_0x55c888(0x6d9)]=_0x3cca0f,_0x5b1c96[_0x55c888(0x5f0)]=_0x2862f9,_0x5b1c96[_0x55c888(0x463)]=_0x2e2156;let _0x29d7fe=await this['repository'][_0x55c888(0x86b)]['updateOne'](_0x5b1c96[_0x55c888(0x7b5)],_0x5b1c96,this[_0x55c888(0x3d0)][_0x55c888(0x4ae)]);return this[_0x55c888(0x478)][_0x55c888(0x4e1)](this[_0x55c888(0x1c7)]+'\x20('+this[_0x55c888(0x3d0)][_0x55c888(0x4ae)]+_0x55c888(0x3bf)),_0x29d7fe?_0x5b1c96:null;}catch(_0x3033d9){let _0x1f4cb1=_0x55c888(0x3a3),_0x39f52f=_0x3033d9 instanceof Error?_0x3033d9[_0x55c888(0x70f)]:typeof _0x3033d9=='object'?JSON['stringify'](_0x3033d9):_0x3033d9,_0x313a15=_0x1f4cb1+':\x20'+_0x39f52f;throw this[_0x55c888(0x478)][_0x55c888(0x3c6)](this['instanceName']+'\x20('+this[_0x55c888(0x3d0)]['wuid']+'):\x20'+_0x313a15),new m(_0x313a15);}}async[a0_0x3cfc7d(0x805)](_0x20b6e5,_0x21adcc){const _0x49a82d=a0_0x3cfc7d;let _0x31619e,_0xe297de;try{let _0x5ed070=_0x21adcc[_0x49a82d(0x4e9)];if(!_0x5ed070||!_0x5ed070[_0x49a82d(0x855)]||!_0x5ed070[_0x49a82d(0x4d5)])throw new Error(_0x49a82d(0x5df));let _0x40d914;([_0x49a82d(0x578),_0x49a82d(0x1ef),'https://api.elevenlabs.io/v1/text-to-speech/'][_0x49a82d(0x4d3)](_0x5cd5a8=>_0x5ed070[_0x49a82d(0x855)]['includes'](_0x5cd5a8))||_0x5ed070['requestFile'])&&(_0x40d914='arraybuffer');let _0x3946d1='\u205f',_0x1501be;try{_0x1501be=JSON['parse'](_0x5ed070[_0x49a82d(0x1a0)][_0x49a82d(0x5e0)](new RegExp(_0x3946d1,'g'),''));}catch(_0x4fe4c5){throw _0x4fe4c5;}let _0x195927={'method':_0x5ed070[_0x49a82d(0x4d5)],'url':_0x5ed070[_0x49a82d(0x855)],'headers':_0x5ed070[_0x49a82d(0x1f6)]||{},..._0x5ed070[_0x49a82d(0x4d5)][_0x49a82d(0x593)]()!==_0x49a82d(0x713)&&_0x5ed070[_0x49a82d(0x1a0)]?{'data':JSON[_0x49a82d(0x675)](_0x5ed070['bodyString'][_0x49a82d(0x5e0)](new RegExp(_0x3946d1,'g'),''))}:{},..._0x40d914&&{'responseType':_0x40d914}},_0x25b9f2=await(0x0,K[_0x49a82d(0x879)])(_0x195927),_0x35984f=_0x25b9f2[_0x49a82d(0x4fe)][_0x49a82d(0x243)];if(_0x35984f&&_0x35984f[_0x49a82d(0x1ec)](_0x49a82d(0x109))||typeof _0x25b9f2['data']==_0x49a82d(0x3f6)){if(typeof _0x25b9f2[_0x49a82d(0x877)]=='string'){let _0x1abd19=_0x25b9f2[_0x49a82d(0x877)][_0x49a82d(0x5e0)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x49a82d(0x1d2)]();try{_0x31619e=JSON[_0x49a82d(0x675)](_0x1abd19);}catch(_0x348071){this[_0x49a82d(0x478)][_0x49a82d(0x3c6)](_0x49a82d(0x7ec)+_0x348071[_0x49a82d(0x70f)]),_0x31619e={'_apiResponse':_0x25b9f2['data']};}}else _0x31619e=_0x25b9f2[_0x49a82d(0x877)];let _0x745add=_0x20b6e5[_0x49a82d(0x69b)][_0x49a82d(0x481)],_0xee67ff=this[_0x49a82d(0x839)](_0x31619e);return Object['assign'](_0x745add,_0xee67ff),_0x20b6e5[_0x49a82d(0x69b)][_0x49a82d(0x481)]=_0x745add,_0xe297de={'error':!0x1,'apiResponse':_0x31619e},this[_0x49a82d(0x2fe)](_0x20b6e5,_0x21adcc,_0xe297de),_0x31619e;}if(_0x35984f&&(_0x35984f[_0x49a82d(0x1ec)]('application/octet-stream')||_0x35984f[_0x49a82d(0x1ec)](_0x49a82d(0x5f6))||_0x35984f[_0x49a82d(0x1ec)](_0x49a82d(0x873))||_0x35984f[_0x49a82d(0x1ec)](_0x49a82d(0x816)))){this[_0x49a82d(0x478)]['verbose'](this[_0x49a82d(0x1c7)]+'\x20('+this[_0x49a82d(0x3d0)]['wuid']+_0x49a82d(0x811)+_0x35984f);let _0x4f9160=(0x0,Q['v4'])(),_0x3ba50d='',_0x48e696={'image/jpeg':_0x49a82d(0x5cf),'image/png':_0x49a82d(0x464),'image/gif':_0x49a82d(0x12f),'image/webp':_0x49a82d(0x1e3),'image/svg+xml':_0x49a82d(0x80c),'audio/mpeg':_0x49a82d(0x61e),'audio/ogg':_0x49a82d(0x5fd),'audio/wav':'.wav','video/mp4':_0x49a82d(0x880),'video/webm':'.webm','video/ogg':_0x49a82d(0x87a),'text/plain':'.txt','application/pdf':'.pdf','application/msword':_0x49a82d(0x1c9),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x49a82d(0x281),'application/vnd.ms-excel':_0x49a82d(0x40d),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x49a82d(0x423),'application/vnd.ms-powerpoint':_0x49a82d(0x6f5),'application/vnd.openxmlformats-officedocument.presentationml.presentation':_0x49a82d(0x837)};_0x48e696[_0x35984f]?(_0x3ba50d=_0x48e696[_0x35984f],this[_0x49a82d(0x478)][_0x49a82d(0x4e1)](this['instanceName']+'\x20('+this[_0x49a82d(0x3d0)][_0x49a82d(0x4ae)]+'):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20'+_0x3ba50d)):(_0x3ba50d=_0x49a82d(0x4f2),this[_0x49a82d(0x478)][_0x49a82d(0x4e1)](this['instanceName']+'\x20('+this[_0x49a82d(0x3d0)]['wuid']+_0x49a82d(0x41b)+_0x3ba50d)),_0x4f9160+=_0x3ba50d,this['logger'][_0x49a82d(0x4e1)](this[_0x49a82d(0x1c7)]+'\x20('+this['instance'][_0x49a82d(0x4ae)]+_0x49a82d(0x385)+_0x4f9160);let _0x485820=this[_0x49a82d(0x497)][_0x49a82d(0x840)]('SERVER')[_0x49a82d(0x7a5)];if(!_0x485820){let _0x4fd9e1=this[_0x49a82d(0x497)]['get'](_0x49a82d(0x424));_0x485820=_0x49a82d(0x750)+(_0x4fd9e1&&_0x4fd9e1[_0x49a82d(0x81f)]['split']('/')[0x4]);}let _0x4c79d0=Buffer[_0x49a82d(0x6c7)](_0x25b9f2[_0x49a82d(0x877)]);await this[_0x49a82d(0x222)](_0x4c79d0,_0x4f9160);let _0x1bc1b1=_0x49a82d(0x371)+_0x4f9160;_0x1bc1b1=''+_0x485820+_0x1bc1b1,_0x31619e={'fileUrl':_0x1bc1b1},_0x20b6e5[_0x49a82d(0x69b)]['realVariables'][_0x49a82d(0x401)]=_0x1bc1b1;let _0x30c9ca=_0x20b6e5[_0x49a82d(0x69b)]['realVariables'],_0x2be4dd=this['flattenObject'](_0x31619e);return Object['assign'](_0x30c9ca,_0x2be4dd),_0x20b6e5[_0x49a82d(0x69b)][_0x49a82d(0x481)]=_0x30c9ca,_0xe297de={'error':!0x1,'apiResponse':{'fileUrl':_0x1bc1b1}},this[_0x49a82d(0x2fe)](_0x20b6e5,_0x21adcc,_0xe297de),_0x31619e;}}catch(_0x187727){this[_0x49a82d(0x478)][_0x49a82d(0x3c6)](_0x49a82d(0x197)+_0x187727[_0x49a82d(0x70f)]),_0x187727[_0x49a82d(0x340)]&&(_0x31619e=_0x187727[_0x49a82d(0x340)][_0x49a82d(0x877)]);let _0x1267c8=_0x20b6e5[_0x49a82d(0x69b)][_0x49a82d(0x481)],_0x28c6e2=this[_0x49a82d(0x839)](_0x31619e);return Object['assign'](_0x1267c8,_0x28c6e2),_0x20b6e5[_0x49a82d(0x69b)]['realVariables']=_0x1267c8,_0xe297de={'error':!0x0,'errorLog':_0x187727[_0x49a82d(0x885)](),'apiResponse':_0x31619e},this[_0x49a82d(0x2fe)](_0x20b6e5,_0x21adcc,_0xe297de),{'success':!0x1};}}[a0_0x3cfc7d(0x27c)](_0x1e52a4,_0xc24947){const _0x32c6dc=a0_0x3cfc7d;let _0x2a3ff8=_0x3554ee=>{const _0x20cc99=a0_0x1146;let _0x48cf42=_0x3554ee[_0x20cc99(0x5e0)](/[^0-9.,-]/g,'')['replace'](',','.'),_0x5a5dee=parseFloat(_0x48cf42);return isNaN(_0x5a5dee)?null:_0x5a5dee;},_0x51e27d=_0xc24947[_0x32c6dc(0x6ff)],_0x48df9b=_0xc24947[_0x32c6dc(0x358)];typeof _0x51e27d==_0x32c6dc(0x3f6)&&(_0x51e27d=this['replaceVariables'](_0x51e27d,_0x1e52a4[_0x32c6dc(0x69b)]['realVariables'])??''),typeof _0x48df9b==_0x32c6dc(0x3f6)&&(_0x48df9b=this[_0x32c6dc(0x844)](_0x48df9b,_0x1e52a4[_0x32c6dc(0x69b)][_0x32c6dc(0x481)])??'');let _0x2081e1=null;if(!_0xc24947['editOperator'])return null;switch(this[_0x32c6dc(0x478)]['verbose'](this['instanceName']+'\x20('+this[_0x32c6dc(0x3d0)][_0x32c6dc(0x4ae)]+_0x32c6dc(0x1fb)+_0x51e27d),this[_0x32c6dc(0x478)][_0x32c6dc(0x4e1)](this[_0x32c6dc(0x1c7)]+'\x20('+this['instance'][_0x32c6dc(0x4ae)]+'):\x20newSecondValue\x20após\x20replaceVariables:'+_0x48df9b),_0xc24947[_0x32c6dc(0x5ed)]){case'+':case'-':case'*':case'/':let _0x2a7129=_0x2a3ff8(_0x51e27d||'0'),_0x5c543c=_0x2a3ff8(_0x48df9b||'0');if(_0x2a7129===null)return null;switch(_0xc24947[_0x32c6dc(0x5ed)]){case'+':_0x2081e1=_0x2a7129+(_0x5c543c??0x0);break;case'-':_0x2081e1=_0x2a7129-(_0x5c543c??0x0);break;case'*':_0x2081e1=_0x2a7129*(_0x5c543c??0x1);break;case'/':_0x5c543c!==0x0&&(_0x2081e1=_0x2a7129/(_0x5c543c??0x1));break;}break;case'findAndReplace':case _0x32c6dc(0x57e):let _0x1b2d7d=_0x48df9b,_0x1b7a08=_0xc24947[_0x32c6dc(0x3f1)];if(typeof _0x1b7a08==_0x32c6dc(0x3f6)&&(_0x1b7a08=this[_0x32c6dc(0x844)](_0x1b7a08,_0x1e52a4[_0x32c6dc(0x69b)][_0x32c6dc(0x481)])??''),_0x1b2d7d&&_0x1b7a08!==void 0x0){let _0x2ed15b=_0xc24947[_0x32c6dc(0x5ed)]===_0x32c6dc(0x4eb)?new RegExp(_0x1b2d7d[_0x32c6dc(0x5e0)](/[-\/\\^$*+?.()|[\]{}]/g,'\x5c$&'),'g'):new RegExp(_0x1b2d7d,'g');_0x2081e1=_0x51e27d['replace'](_0x2ed15b,_0x1b7a08);}else console[_0x32c6dc(0x7e0)](_0x32c6dc(0x6da));break;case _0x32c6dc(0x480):_0x2081e1=_0x48df9b;break;case _0x32c6dc(0x120):let _0x1c4826=_0x51e27d[_0x32c6dc(0x151)](new RegExp(_0x48df9b||''));_0x2081e1=_0x1c4826?_0x1c4826[0x0]:'';break;case _0x32c6dc(0x140):_0x2081e1=_0x51e27d[_0x32c6dc(0x1ae)](0x0,parseInt(_0x48df9b||'0'));break;case'truncatedtoEnd':let _0x1d7629=parseInt(_0x48df9b||'0');_0x2081e1=_0x51e27d[_0x32c6dc(0x1ae)](_0x51e27d[_0x32c6dc(0x11c)]-_0x1d7629);break;case _0x32c6dc(0x6a8):let _0x4db1e7=_0x2a3ff8(_0x51e27d),_0xc31814=parseInt(_0x48df9b||'0');_0xc31814=Math[_0x32c6dc(0x760)](_0xc31814),_0x4db1e7!==null?_0x2081e1=_0x4db1e7[_0x32c6dc(0x3e5)](_0x32c6dc(0x46b),{'minimumFractionDigits':_0xc31814,'maximumFractionDigits':_0xc31814}):(console['warn'](_0x32c6dc(0x75c)+_0x51e27d),_0x2081e1=null);break;case _0x32c6dc(0x39e):let _0x34cffe=_0x2a3ff8(_0x51e27d);_0x34cffe!==null?_0x2081e1=_0x34cffe[_0x32c6dc(0x3e5)]('pt-BR',{'style':_0x32c6dc(0x6c8),'currency':_0x32c6dc(0x861)}):(console[_0x32c6dc(0x7e0)]('Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20'+_0x51e27d),_0x2081e1=null);break;case _0x32c6dc(0x2a0):_0x2081e1=_0x51e27d[_0x32c6dc(0x593)]();break;case _0x32c6dc(0x83c):_0x2081e1=_0x51e27d[_0x32c6dc(0x784)]();break;case _0x32c6dc(0x762):_0x2081e1=_0x51e27d[_0x32c6dc(0x407)]('\x20')[_0x32c6dc(0x733)](_0x47755b=>_0x47755b[_0x32c6dc(0x694)](0x0)[_0x32c6dc(0x593)]()+_0x47755b[_0x32c6dc(0x1ae)](0x1)['toLowerCase']())['join']('\x20');break;case _0x32c6dc(0x4a6):_0x2081e1=JSON[_0x32c6dc(0x238)](_0x51e27d);break;case _0x32c6dc(0x31b):_0x2081e1=_0x51e27d[_0x32c6dc(0x1d2)]();break;default:_0x2081e1=_0x51e27d;}return _0x2081e1!==null?_0x2081e1[_0x32c6dc(0x885)]():null;}async[a0_0x3cfc7d(0x37b)](_0x190406,_0x13aae9){const _0x466407=a0_0x3cfc7d;try{let _0x275ce3=_0x190406[_0x466407(0x7c9)]?.[_0x466407(0x56c)](_0x251c54=>_0x251c54[_0x466407(0x440)]===_0x13aae9[_0x466407(0x7b5)]?.[_0x466407(0x885)]())||[],_0x2a4d9e=_0x13aae9[_0x466407(0x4d7)],_0x424bb9=null,_0x3e9e5e=[],_0x43145e=_0x190406[_0x466407(0x69b)]['realVariables'][_0x2a4d9e];_0x3e9e5e[_0x466407(0x7b9)]('Valor\x20inicial:\x20\x22'+_0x43145e+'\x22');for(let _0x25a3f4 of _0x275ce3){_0x25a3f4['firstValue']=_0x43145e,_0x424bb9=_0x25a3f4['firstValue'];let _0x2573fc;try{_0x2573fc=this[_0x466407(0x27c)](_0x190406,_0x25a3f4);}catch(_0x5f28b2){this[_0x466407(0x478)]['error'](_0x466407(0x65e)+_0x5f28b2[_0x466407(0x70f)]);continue;}if(_0x2573fc!==null){let _0x3ae57e=_0x466407(0x7db)+_0x25a3f4['editOperator']+'\x22',_0x528418=[_0x466407(0x39e),_0x466407(0x2a0),'lowerCase','capitalizedWords',_0x466407(0x31b)];_0x25a3f4[_0x466407(0x5ed)]==='findAndReplace'||_0x25a3f4[_0x466407(0x5ed)]===_0x466407(0x57e)?_0x3ae57e+=_0x466407(0x42c)+_0x25a3f4['secondValue']+'\x22,\x20valor\x20a\x20substituir:\x20\x22'+_0x25a3f4['replaceValue']+'\x22':!_0x528418[_0x466407(0x1ec)](_0x25a3f4['editOperator'])&&_0x25a3f4['secondValue']!==null&&_0x25a3f4[_0x466407(0x358)]!==void 0x0&&(_0x3ae57e+=_0x466407(0x285)+_0x25a3f4[_0x466407(0x358)]+'\x22'),_0x3ae57e+=',\x20resultado:\x20'+_0x2573fc+'.',_0x3e9e5e['push'](_0x3ae57e);}_0x2573fc!==null&&(_0x43145e=_0x2573fc);}if(_0x190406['chatLog'][_0x466407(0x481)]&&_0x13aae9[_0x466407(0x4d7)]){_0x190406[_0x466407(0x69b)][_0x466407(0x481)][_0x13aae9[_0x466407(0x4d7)]]=_0x43145e;let _0x56e85e={'variable':_0x13aae9[_0x466407(0x4d7)],'oldValue':_0x424bb9,'newValue':_0x43145e,'moreLogs':_0x3e9e5e};try{this['updateConversation'](_0x190406,_0x13aae9,_0x56e85e);}catch(_0x2f3fdf){this['logger'][_0x466407(0x3c6)](_0x466407(0x6c5)+_0x2f3fdf[_0x466407(0x70f)]);}}return _0x2a4d9e;}catch(_0x3b28f8){return this[_0x466407(0x478)][_0x466407(0x3c6)]('Erro\x20inesperado\x20em\x20processvaredits:\x20'+_0x3b28f8[_0x466407(0x70f)]),null;}}async[a0_0x3cfc7d(0x2f4)](_0x25dd0d,_0x2a80a3){const _0x11f198=a0_0x3cfc7d;try{let _0x1d6c9f=[],_0x513d60=_0x25dd0d[_0x11f198(0x51a)]['filter'](_0x156482=>_0x156482['blockId']===_0x2a80a3[_0x11f198(0x7b5)][_0x11f198(0x885)]()),_0x44fd9c=null,_0x218f6b=!0x1;for(let _0x127687 of _0x513d60){let _0x44df48=this['evaluateCondition'](_0x25dd0d,_0x127687);_0x1d6c9f[_0x11f198(0x7b9)](_0x11f198(0x7e1)+_0x127687[_0x11f198(0x6ff)]+',\x20Comparador:\x20'+_0x127687[_0x11f198(0x525)]+_0x11f198(0x502)+_0x127687[_0x11f198(0x358)]+_0x11f198(0x2bc)+_0x44df48),_0x44fd9c===null?_0x44fd9c=_0x44df48:_0x127687['OrAnd']===_0x11f198(0x85e)?(_0x44fd9c=_0x44fd9c&&_0x44df48,_0x44df48||(_0x218f6b=!0x0)):_0x127687[_0x11f198(0x764)]==='or'&&(_0x218f6b||(_0x44fd9c=_0x44fd9c||_0x44df48));}_0x44fd9c===null&&(_0x44fd9c=!0x0);let _0x3633c0={'moreLogs':_0x1d6c9f};_0x25dd0d[_0x11f198(0x69b)][_0x11f198(0x853)]=_0x44fd9c,await this[_0x11f198(0x2fe)](_0x25dd0d,_0x2a80a3,_0x3633c0);}catch(_0x2943db){this[_0x11f198(0x478)][_0x11f198(0x3c6)](this[_0x11f198(0x1c7)]+'\x20('+this['instance'][_0x11f198(0x4ae)]+_0x11f198(0x3cf)+(_0x2943db instanceof Error?_0x2943db[_0x11f198(0x70f)]:JSON[_0x11f198(0x238)](_0x2943db,null,0x2)));}}[a0_0x3cfc7d(0x631)](_0x1d64ff,_0x4486c7){const _0x4a7240=a0_0x3cfc7d;let _0x2aba5e=_0x4486c7[_0x4a7240(0x6ff)],_0x86fa90=_0x4486c7[_0x4a7240(0x358)];typeof _0x2aba5e=='string'&&(_0x2aba5e=this[_0x4a7240(0x844)](_0x2aba5e,_0x1d64ff[_0x4a7240(0x69b)][_0x4a7240(0x481)])??''),typeof _0x86fa90==_0x4a7240(0x3f6)&&(_0x86fa90=this['replaceVariables'](_0x86fa90,_0x1d64ff['chatLog'][_0x4a7240(0x481)])??'');try{switch(_0x4486c7[_0x4a7240(0x525)]){case _0x4a7240(0x2ed):return _0x2aba5e===_0x86fa90;case'notEqual':return _0x2aba5e!==_0x86fa90;case _0x4a7240(0x51c):return this[_0x4a7240(0x51c)](_0x2aba5e,_0x86fa90);case'notContains':return!this[_0x4a7240(0x51c)](_0x2aba5e,_0x86fa90);case _0x4a7240(0x230):return parseFloat(_0x2aba5e)>parseFloat(_0x86fa90);case _0x4a7240(0x7b4):return parseFloat(_0x2aba5e)<parseFloat(_0x86fa90);case _0x4a7240(0x671):return _0x2aba5e!=='';case'empty':return _0x2aba5e==='';case _0x4a7240(0x2d2):return new RegExp(_0x86fa90)[_0x4a7240(0x3bd)](_0x2aba5e);case _0x4a7240(0x4dc):return!new RegExp(_0x86fa90)[_0x4a7240(0x3bd)](_0x2aba5e);default:return!0x1;}}catch(_0x4f8763){return this[_0x4a7240(0x478)][_0x4a7240(0x3c6)]('Erro\x20ao\x20avaliar\x20a\x20condição:\x20'+_0x4f8763),!0x1;}}[a0_0x3cfc7d(0x51c)](_0x16452e,_0x3002c1){const _0x41913b=a0_0x3cfc7d;if(_0x16452e===_0x3002c1&&/^\d+$/[_0x41913b(0x3bd)](_0x16452e))return!0x0;if(this[_0x41913b(0x625)](_0x16452e)&&/^\d+$/[_0x41913b(0x3bd)](_0x3002c1)){let _0x7672f=_0x16452e[_0x41913b(0x407)](',')[_0x41913b(0x733)](_0xd266bc=>parseInt(_0xd266bc[_0x41913b(0x1d2)]())),_0x563359=parseInt(_0x3002c1);return _0x7672f[_0x41913b(0x1ec)](_0x563359);}return _0x16452e[_0x41913b(0x1ec)](_0x3002c1);}[a0_0x3cfc7d(0x625)](_0x57dd17){return/^\d+(,\d+)*$/['test'](_0x57dd17);}['processConditionsTest'](_0x1ab8c9){const _0x3d4fa9=a0_0x3cfc7d;let _0x9e585d=!0x0,_0x3c6cae=null;for(let _0x3521b2 of _0x1ab8c9){let _0xc19d06=this[_0x3d4fa9(0x73c)](_0x3521b2);if(_0x3c6cae==='or'&&_0xc19d06){_0x9e585d=!0x0;break;}if(_0x3c6cae===_0x3d4fa9(0x85e)&&!_0xc19d06){_0x9e585d=!0x1;break;}_0x3c6cae=_0x3521b2[_0x3d4fa9(0x764)];}return _0x9e585d;}[a0_0x3cfc7d(0x73c)](_0x3f71c7){const _0x5cc4f2=a0_0x3cfc7d;let _0x303805=_0x3f71c7[_0x5cc4f2(0x6ff)],_0x1a9169=_0x3f71c7['secondValue'];try{switch(_0x3f71c7[_0x5cc4f2(0x525)]){case _0x5cc4f2(0x2ed):return String(_0x303805)===String(_0x1a9169);case _0x5cc4f2(0x699):return String(_0x303805)!==String(_0x1a9169);case _0x5cc4f2(0x51c):return String(_0x303805)['includes'](String(_0x1a9169));case _0x5cc4f2(0x7b8):return!String(_0x303805)[_0x5cc4f2(0x1ec)](String(_0x1a9169));case'greater':return parseFloat(String(_0x303805))>parseFloat(String(_0x1a9169));case _0x5cc4f2(0x7b4):return parseFloat(String(_0x303805))<parseFloat(String(_0x1a9169));case'notEmpty':return String(_0x303805)!=='';case _0x5cc4f2(0x449):return String(_0x303805)==='';case _0x5cc4f2(0x2d2):return new RegExp(String(_0x1a9169))[_0x5cc4f2(0x3bd)](String(_0x303805));case _0x5cc4f2(0x4dc):return!new RegExp(String(_0x1a9169))[_0x5cc4f2(0x3bd)](String(_0x303805));default:return!0x1;}}catch(_0x307a95){return this[_0x5cc4f2(0x478)][_0x5cc4f2(0x3c6)](_0x5cc4f2(0x520)+_0x307a95),!0x1;}}async[a0_0x3cfc7d(0x2af)](_0x2b2774,_0x5752b5){const _0x5bd50c=a0_0x3cfc7d;if(this[_0x5bd50c(0x478)][_0x5bd50c(0x4e1)](this[_0x5bd50c(0x1c7)]+'\x20('+this[_0x5bd50c(0x3d0)]['wuid']+_0x5bd50c(0x4c0)),!_0x2b2774||!_0x5752b5)return this['logger'][_0x5bd50c(0x3c6)](this[_0x5bd50c(0x1c7)]+'\x20('+this[_0x5bd50c(0x3d0)][_0x5bd50c(0x4ae)]+_0x5bd50c(0x63b)),null;let _0x8956ca=_0x2b2774[_0x5bd50c(0x69b)][_0x5bd50c(0x654)]['key']['id'];this[_0x5bd50c(0x478)][_0x5bd50c(0x4e1)](this[_0x5bd50c(0x1c7)]+'\x20('+this[_0x5bd50c(0x3d0)][_0x5bd50c(0x4ae)]+'):\x20mediaMessageInfoId\x20:\x20'+_0x8956ca);let _0x2d09e0={'key':{'id':_0x8956ca}},_0x53516d=_0x5752b5[_0x5bd50c(0x4d7)];_0x2b2774[_0x5bd50c(0x69b)][_0x5bd50c(0x481)]['_'+_0x53516d+'.fileUrl']=null,_0x2b2774[_0x5bd50c(0x69b)]['realVariables']['_'+_0x53516d+_0x5bd50c(0x843)]=null,_0x2b2774['chatLog'][_0x5bd50c(0x481)]['_'+_0x53516d+_0x5bd50c(0x174)]=null,_0x2b2774[_0x5bd50c(0x69b)][_0x5bd50c(0x481)]['_'+_0x53516d+'.type']=_0x2b2774[_0x5bd50c(0x69b)]['lastReceivedMessage'][_0x5bd50c(0x77b)];try{let _0x562485=await this['getBase64FromMediaMessage'](_0x2d09e0);this[_0x5bd50c(0x478)]['verbose'](this['instanceName']+'\x20('+this[_0x5bd50c(0x3d0)]['wuid']+_0x5bd50c(0x34e)),_0x2b2774['chatLog'][_0x5bd50c(0x481)]['_'+_0x53516d+'.url']=_0x562485[_0x5bd50c(0x401)],_0x2b2774[_0x5bd50c(0x69b)][_0x5bd50c(0x481)]['_'+_0x53516d+_0x5bd50c(0x843)]=_0x562485[_0x5bd50c(0x1cd)];let _0x148686=_0x562485[_0x5bd50c(0x1cd)][_0x5bd50c(0x151)](/\/(\w+)$/),_0xd28123=_0x148686?_0x148686[0x1]:null;_0x2b2774[_0x5bd50c(0x69b)][_0x5bd50c(0x481)]['_'+_0x53516d+'.extension']=_0xd28123,this[_0x5bd50c(0x478)][_0x5bd50c(0x4e1)](this[_0x5bd50c(0x1c7)]+'\x20('+this['instance'][_0x5bd50c(0x4ae)]+_0x5bd50c(0x185)+_0x53516d+'\x27.');}catch(_0x137d2f){this['logger']['error'](this[_0x5bd50c(0x1c7)]+'\x20('+this['instance'][_0x5bd50c(0x4ae)]+'):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20'+_0x137d2f[_0x5bd50c(0x70f)]);}let _0x58d65f=_0x2b2774[_0x5bd50c(0x69b)]['lastReceivedMessage'][_0x5bd50c(0x2c7)]||_0x2b2774[_0x5bd50c(0x69b)]['lastReceivedMessage'][_0x5bd50c(0x444)]||_0x2b2774[_0x5bd50c(0x69b)]['lastReceivedMessage'][_0x5bd50c(0x1a1)];try{_0x2b2774[_0x5bd50c(0x69b)][_0x5bd50c(0x481)]||(_0x2b2774[_0x5bd50c(0x69b)][_0x5bd50c(0x481)]={});let _0x353ea6=_0x2b2774[_0x5bd50c(0x69b)][_0x5bd50c(0x481)][_0x53516d];_0x2b2774['chatLog']['realVariables'][_0x53516d]=_0x58d65f;let _0x1d4190={'variable':_0x53516d,'oldValue':_0x353ea6,'newValue':_0x58d65f};this[_0x5bd50c(0x2fe)](_0x2b2774,_0x5752b5,_0x1d4190),this['logger'][_0x5bd50c(0x4e1)](this[_0x5bd50c(0x1c7)]+'\x20('+this[_0x5bd50c(0x3d0)][_0x5bd50c(0x4ae)]+_0x5bd50c(0x83e));}catch(_0x2882c1){let _0x2c53db={'error':!0x0,'errorLog':_0x2882c1[_0x5bd50c(0x885)]()};return this[_0x5bd50c(0x2fe)](_0x2b2774,_0x5752b5,_0x2c53db),this['logger'][_0x5bd50c(0x3c6)](this[_0x5bd50c(0x1c7)]+'\x20('+this['instance'][_0x5bd50c(0x4ae)]+'):\x20Erro\x20durante\x20a\x20atualização:\x20'+(_0x2882c1 instanceof Error?_0x2882c1['message']:JSON['stringify'](_0x2882c1,null,0x2))),null;}}async['stopConversation'](_0x2586a3,_0x2bea31){const _0x2cc007=a0_0x3cfc7d;if(this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x2cc007(0x3d0)][_0x2cc007(0x4ae)]+_0x2cc007(0x682)),!_0x2586a3||!_0x2bea31)return this[_0x2cc007(0x478)][_0x2cc007(0x3c6)](this['instanceName']+'\x20('+this[_0x2cc007(0x3d0)][_0x2cc007(0x4ae)]+_0x2cc007(0x63b)),null;let _0x35aa7b=Date[_0x2cc007(0x6aa)](),_0x5324d1=parseInt(_0x2bea31[_0x2cc007(0x341)],0xa);if(isNaN(_0x5324d1))return this[_0x2cc007(0x478)]['error'](this[_0x2cc007(0x1c7)]+'\x20('+this[_0x2cc007(0x3d0)][_0x2cc007(0x4ae)]+_0x2cc007(0x2db)),null;let _0x3c555d={'newStoppedUntil':_0x35aa7b+_0x5324d1*0x3c*0x3e8};return await this[_0x2cc007(0x2fe)](_0x2586a3,_0x2bea31,_0x3c555d,!0x0),null;}async['processUazapi'](_0x20810e,_0x49299a){const _0x30daba=a0_0x3cfc7d;try{switch(_0x49299a[_0x30daba(0x76c)][_0x30daba(0x35e)]){case _0x30daba(0x5ee):await this['uazapiSendText'](_0x20810e,_0x49299a);break;case'sendMedia':await this[_0x30daba(0xfe)](_0x20810e,_0x49299a);break;case _0x30daba(0x634):await this['uazapiSendLocation'](_0x20810e,_0x49299a);break;case'sendAudio':await this['uazapiSendAudio'](_0x20810e,_0x49299a);break;case _0x30daba(0x50d):await this[_0x30daba(0x4cf)](_0x20810e,_0x49299a);break;case _0x30daba(0x67a):await this[_0x30daba(0x432)](_0x20810e,_0x49299a);break;case _0x30daba(0x54d):await this[_0x30daba(0x432)](_0x20810e,_0x49299a);break;case _0x30daba(0x726):await this['uazapiDeleteMessage'](_0x20810e,_0x49299a);break;default:this[_0x30daba(0x478)][_0x30daba(0x3c6)](this[_0x30daba(0x1c7)]+'\x20('+this['instance'][_0x30daba(0x4ae)]+_0x30daba(0x534)+_0x49299a[_0x30daba(0x76c)][_0x30daba(0x35e)]);}}catch(_0x4982b2){this[_0x30daba(0x478)][_0x30daba(0x3c6)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x30daba(0x2d6)+(_0x4982b2 instanceof Error?_0x4982b2[_0x30daba(0x70f)]:JSON['stringify'](_0x4982b2,null,0x2)));}}async[a0_0x3cfc7d(0x2fe)](_0x4762a7,_0x41f3d9,_0x44abd6,_0x28b96d=!0x1,_0x2074b7=!0x1){const _0x29b502=a0_0x3cfc7d;_0x4762a7[_0x29b502(0x69b)][_0x29b502(0x223)]||(_0x4762a7[_0x29b502(0x69b)][_0x29b502(0x223)]=[]);let _0x233e4b=(_0x4762a7[_0x29b502(0x69b)]['blockLogs']?.['length']??0x0)+0x1,_0x414ba2=_0x4762a7[_0x29b502(0x69b)][_0x29b502(0x223)]['filter'](_0x5212d5=>String(_0x5212d5[_0x29b502(0x440)])===String(_0x41f3d9[_0x29b502(0x7b5)]))['length']+0x1,_0x461dfb=_0x44abd6?.[_0x29b502(0x536)]??Date[_0x29b502(0x6aa)](),_0x403e47=_0x44abd6?.[_0x29b502(0x3c6)]?_0x44abd6[_0x29b502(0x782)]??_0x44abd6['error']['toString']():void 0x0,_0x31e297={'onTime':_0x461dfb,'blockId':_0x41f3d9['_id'],'order':_0x233e4b,'activatedCount':_0x414ba2,'error':_0x44abd6?.[_0x29b502(0x3c6)]??!0x1,'messageId':_0x44abd6?.['messageId'],'apiResponse':_0x44abd6?.['apiResponse'],'apiResponseString':_0x44abd6?.[_0x29b502(0x755)]?JSON[_0x29b502(0x238)](_0x44abd6?.[_0x29b502(0x755)]):void 0x0,'variable':_0x44abd6?.[_0x29b502(0x747)],'oldValue':_0x44abd6?.[_0x29b502(0x312)],'newValue':_0x44abd6?.['newValue'],'newStoppedUntil':_0x44abd6?.[_0x29b502(0x254)],'moreLogs':_0x44abd6?.[_0x29b502(0x882)],'errorLog':_0x403e47};if(_0x44abd6[_0x29b502(0x882)]&&_0x44abd6[_0x29b502(0x882)][_0x29b502(0x11c)]>0x0){let _0x3ad08e=_0x44abd6[_0x29b502(0x882)][_0x29b502(0x733)](_0x583f7b=>this[_0x29b502(0x147)](_0x583f7b,_0x4762a7[_0x29b502(0x69b)][_0x29b502(0x481)]));_0x31e297[_0x29b502(0x882)]=_0x3ad08e;}if(_0x4762a7[_0x29b502(0x69b)]['realVariables']||(_0x4762a7[_0x29b502(0x69b)][_0x29b502(0x481)]={}),_0x4762a7['chatLog'][_0x29b502(0x481)]['_activatedCount']=String(_0x414ba2),_0x4762a7[_0x29b502(0x69b)][_0x29b502(0x481)][_0x29b502(0x108)]=String(_0x44abd6[_0x29b502(0x3c6)]??!0x1),_0x4762a7['chatLog'][_0x29b502(0x223)][_0x29b502(0x7b9)](_0x31e297),_0x4762a7[_0x29b502(0x69b)]['realVariables'][_0x29b502(0x167)]&&_0x4762a7[_0x29b502(0x69b)]['realVariables']['telefone']!==_0x4762a7[_0x29b502(0x6d9)]){let _0x2f402c=(await this['whatsappNumber']({'numbers':[_0x4762a7[_0x29b502(0x69b)]['realVariables'][_0x29b502(0x167)]]}))[0x0][_0x29b502(0x69c)];_0x4762a7[_0x29b502(0x69b)]['realVariables'][_0x29b502(0x167)]=_0x2f402c,_0x4762a7['remoteJid']=_0x2f402c;try{let _0x5561b8={'_id':{'$ne':_0x4762a7[_0x29b502(0x7b5)]},'remoteJid':_0x2f402c,'status':'open'},_0x3de913={'status':_0x29b502(0x831)};await this['repository'][_0x29b502(0x86b)][_0x29b502(0x609)](_0x5561b8,_0x3de913,this[_0x29b502(0x3d0)][_0x29b502(0x4ae)]),this[_0x29b502(0x478)][_0x29b502(0x4e1)](this[_0x29b502(0x1c7)]+'\x20('+this[_0x29b502(0x3d0)][_0x29b502(0x4ae)]+_0x29b502(0x1d9));}catch(_0x4a515e){this[_0x29b502(0x478)]['error'](this[_0x29b502(0x1c7)]+'\x20('+this['instance'][_0x29b502(0x4ae)]+_0x29b502(0x61a)+_0x4a515e[_0x29b502(0x70f)]);}try{let _0x4b958d=_0x4762a7['chatLog']['realVariables'],_0x43dad3=await this['getVariablesChat'](_0x2f402c),_0x5bbb60={..._0x4b958d,..._0x43dad3,'_remoteJid':_0x2f402c};_0x4762a7[_0x29b502(0x69b)]['realVariables']=_0x5bbb60;}catch(_0x4cdd8e){this[_0x29b502(0x478)][_0x29b502(0x3c6)](this[_0x29b502(0x1c7)]+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20'+_0x4cdd8e[_0x29b502(0x70f)]);}}_0x4762a7[_0x29b502(0x69b)]['lastBlockId']=_0x41f3d9['_id'][_0x29b502(0x885)](),_0x4762a7[_0x29b502(0x69b)]['lastSendMessage']&&(_0x4762a7[_0x29b502(0x69b)][_0x29b502(0x4bd)]=_0x4762a7[_0x29b502(0x69b)]['lastSendMessage']),_0x4762a7['chatLog']['lastReceivedMessage']&&(_0x4762a7['chatLog'][_0x29b502(0x654)]=_0x4762a7['chatLog'][_0x29b502(0x654)]),_0x4762a7['chatLog'][_0x29b502(0x853)]&&(_0x4762a7[_0x29b502(0x69b)][_0x29b502(0x853)]=_0x4762a7[_0x29b502(0x69b)][_0x29b502(0x853)]),_0x2074b7&&(_0x4762a7[_0x29b502(0x204)]=_0x29b502(0x831)),_0x28b96d?this[_0x29b502(0x541)](_0x4762a7):this[_0x29b502(0x854)](_0x4762a7,_0x41f3d9);}[a0_0x3cfc7d(0x147)](_0x50676b,_0x4ff1ac){const _0x2da04f=a0_0x3cfc7d;return _0x50676b['replace'](/\{\{([^}]+)\}\}/g,(_0x2391d6,_0x5ba8f0)=>_0x4ff1ac[_0x5ba8f0]?'{{'+_0x5ba8f0+'}}\x20->\x20\x22'+_0x4ff1ac[_0x5ba8f0]+'\x22':'{{'+_0x5ba8f0+_0x2da04f(0x508));}async[a0_0x3cfc7d(0x541)](_0x4b0b96){const _0x6d9573=a0_0x3cfc7d;try{let _0x46afa1=Object[_0x6d9573(0x2b7)](_0x4b0b96[_0x6d9573(0x69b)][_0x6d9573(0x481)])[_0x6d9573(0x733)](([_0x359990,_0x5e915d])=>({'name':_0x359990,'value':_0x5e915d})),_0x4b50f5={'status':_0x4b0b96['status'],'remoteJid':_0x4b0b96[_0x6d9573(0x6d9)],'blocks':_0x4b0b96[_0x6d9573(0x2e4)],'waitingMenu_id':_0x4b0b96[_0x6d9573(0x391)],'waitingMenu_text':_0x4b0b96[_0x6d9573(0x617)],'waitingMenu_replyOptions':_0x4b0b96[_0x6d9573(0x6d3)],'chatLog':{'lastBlockId':_0x4b0b96['chatLog']['lastBlockId'],'lastSendMessage':_0x4b0b96[_0x6d9573(0x69b)]['lastSendMessage'],'lastReceivedMessage':_0x4b0b96['chatLog']['lastReceivedMessage'],'lastCondition':_0x4b0b96[_0x6d9573(0x69b)][_0x6d9573(0x853)],'chatVariables':_0x46afa1,'realVariables':_0x4b0b96[_0x6d9573(0x69b)][_0x6d9573(0x481)],'blockLogs':_0x4b0b96[_0x6d9573(0x69b)][_0x6d9573(0x223)]}},_0x497315=await this[_0x6d9573(0x67f)][_0x6d9573(0x86b)]['updateOne'](_0x4b0b96[_0x6d9573(0x7b5)],_0x4b50f5,this[_0x6d9573(0x3d0)][_0x6d9573(0x4ae)]);if(_0x497315){this[_0x6d9573(0x478)][_0x6d9573(0x4e1)](this[_0x6d9573(0x1c7)]+'\x20('+this[_0x6d9573(0x3d0)]['wuid']+_0x6d9573(0x28f)+_0x497315['_id']);try{let _0x431773=[_0x6d9573(0x73a),_0x6d9573(0x57b),_0x6d9573(0x4d8),_0x6d9573(0x651),_0x6d9573(0x204),_0x6d9573(0x229),_0x6d9573(0x7f7),'tags',_0x6d9573(0x2c4),'atendimentoAberto'];if(!this[_0x6d9573(0x37f)]&&(await this[_0x6d9573(0x85d)](),!this[_0x6d9573(0x37f)]))throw new Error('AutomateSystem\x20não\x20foi\x20inicializado');let _0x43f1f2=this[_0x6d9573(0x37f)]?.['customFields'][_0x6d9573(0x733)](_0x3ec110=>_0x3ec110[_0x6d9573(0x75b)]),_0x4d0ccc={};Object[_0x6d9573(0x2b7)](_0x4b0b96['chatLog'][_0x6d9573(0x481)])[_0x6d9573(0x455)](([_0x139da0,_0x9976ad])=>{const _0x288eba=_0x6d9573;_0x431773[_0x288eba(0x1ec)](_0x139da0)&&(_0x139da0===_0x288eba(0x5bd)&&typeof _0x9976ad==_0x288eba(0x3f6)?_0x4d0ccc[_0x139da0]=_0x9976ad[_0x288eba(0x407)](',')[_0x288eba(0x733)](_0x2ddb5d=>_0x2ddb5d[_0x288eba(0x1d2)]())[_0x288eba(0x56c)](_0x19275d=>_0x19275d!==''):_0x139da0===_0x288eba(0x2c4)&&typeof _0x9976ad==_0x288eba(0x3f6)?_0x4d0ccc[_0x139da0]=_0x9976ad[_0x288eba(0x407)](',')[_0x288eba(0x733)](_0x2f6ea2=>_0x2f6ea2[_0x288eba(0x1d2)]())['filter'](_0x361ef1=>_0x361ef1!==''):_0x4d0ccc[_0x139da0]=_0x9976ad);});let _0x2bd3ca=_0x4b0b96['chatLog']['blockLogs'][_0x4b0b96[_0x6d9573(0x69b)][_0x6d9573(0x223)][_0x6d9573(0x11c)]-0x1];if(_0x2bd3ca){let _0x1f7575=_0x2bd3ca[_0x6d9573(0x254)];_0x1f7575!==void 0x0&&(_0x4d0ccc[_0x6d9573(0x1ee)]=_0x1f7575[_0x6d9573(0x885)]());}let _0xfb994f=_0x46afa1['filter'](_0x4eabe8=>_0x43f1f2[_0x6d9573(0x1ec)](_0x4eabe8['name']));this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x6d9573(0x3d0)]['wuid']+_0x6d9573(0x741)),this[_0x6d9573(0x478)][_0x6d9573(0x4e1)](_0x4d0ccc),this[_0x6d9573(0x478)][_0x6d9573(0x4e1)](this[_0x6d9573(0x1c7)]+'\x20('+this[_0x6d9573(0x3d0)][_0x6d9573(0x4ae)]+_0x6d9573(0x158)),this[_0x6d9573(0x478)][_0x6d9573(0x4e1)](_0xfb994f);let _0xcd11a5=_0xfb994f[_0x6d9573(0x733)](_0x41b9d8=>{const _0x242058=_0x6d9573;let _0x2a251=this[_0x242058(0x37f)]?.['customFields'][_0x242058(0x1c4)](_0x2d8cf9=>_0x2d8cf9[_0x242058(0x75b)]===_0x41b9d8[_0x242058(0x75b)]);if(!_0x2a251)throw new Error(_0x242058(0x50c)+_0x41b9d8[_0x242058(0x75b)]);return{'_id':_0x2a251['_id'],'value':_0x41b9d8['value']};});this[_0x6d9573(0x478)][_0x6d9573(0x4e1)](this[_0x6d9573(0x1c7)]+'\x20('+this[_0x6d9573(0x3d0)][_0x6d9573(0x4ae)]+_0x6d9573(0x38b)),this['logger'][_0x6d9573(0x4e1)](_0xcd11a5),await this['saveChatVariables'](_0x4b0b96[_0x6d9573(0x6d9)],_0x4d0ccc,_0xcd11a5);}catch(_0xf544ad){this[_0x6d9573(0x478)]['error'](this[_0x6d9573(0x1c7)]+'\x20('+this[_0x6d9573(0x3d0)][_0x6d9573(0x4ae)]+_0x6d9573(0x7d5)+(_0xf544ad instanceof Error?_0xf544ad['message']:JSON['stringify'](_0xf544ad,null,0x2)));}}else this[_0x6d9573(0x478)][_0x6d9573(0x3c6)](this[_0x6d9573(0x1c7)]+'\x20('+this[_0x6d9573(0x3d0)][_0x6d9573(0x4ae)]+_0x6d9573(0x7d8));}catch(_0x457e86){this[_0x6d9573(0x478)]['error'](this[_0x6d9573(0x1c7)]+'\x20('+this[_0x6d9573(0x3d0)][_0x6d9573(0x4ae)]+_0x6d9573(0x62e)+(_0x457e86 instanceof Error?_0x457e86[_0x6d9573(0x70f)]:JSON[_0x6d9573(0x238)](_0x457e86,null,0x2)));}}async[a0_0x3cfc7d(0x2ca)](_0x2c4fc4,_0x1f619a,_0x23c033){const _0xfb361=a0_0x3cfc7d;try{let _0x3ccf23={'leadInfo.leadnome':_0x1f619a[_0xfb361(0x73a)],'leadInfo.nomecompleto':_0x1f619a[_0xfb361(0x57b)],'leadInfo.email':_0x1f619a['email'],'leadInfo.cpf':_0x1f619a['cpf'],'leadInfo.status':_0x1f619a[_0xfb361(0x204)],'leadInfo.notas':_0x1f619a[_0xfb361(0x229)],'leadInfo.responsavelid':_0x1f619a[_0xfb361(0x7f7)],'leadInfo.tags':_0x1f619a[_0xfb361(0x5bd)],'leadInfo.etiquetas':_0x1f619a[_0xfb361(0x2c4)],'leadInfo.customFields':_0x23c033,'leadInfo.atendimentoAberto':_0x1f619a[_0xfb361(0x15f)]},_0x1e44b7=await this[_0xfb361(0x67f)][_0xfb361(0x52b)][_0xfb361(0x36a)]({'where':{'_id':_0x2c4fc4}},this[_0xfb361(0x3d0)][_0xfb361(0x4ae)]);if(!_0x1e44b7)return _0xfb361(0x66c);let _0xeebb37=new Set(_0x1e44b7[_0xfb361(0x6ac)][_0xfb361(0x2c4)]||[]),_0x59efa5=new Set(_0x1f619a[_0xfb361(0x2c4)]||[]),_0x255dfb=await this[_0xfb361(0x67f)][_0xfb361(0x1d3)][_0xfb361(0x1c4)]({'where':{}},this[_0xfb361(0x3d0)]['wuid']),_0x116de0=new Set(_0x255dfb[_0xfb361(0x733)](_0x4c9bc0=>_0x4c9bc0[_0xfb361(0x7b5)])),_0x43f8e2=[..._0x59efa5]['filter'](_0xbb47e4=>!_0xeebb37['has'](_0xbb47e4)&&_0x116de0['has'](_0xbb47e4)),_0x3bb739=[..._0xeebb37][_0xfb361(0x56c)](_0x5752b1=>!_0x59efa5['has'](_0x5752b1));for(let _0x460516 of _0x43f8e2)await this[_0xfb361(0x513)](_0x460516,_0x1e44b7['_id']),_0xeebb37[_0xfb361(0x199)](_0x460516);for(let _0x275b48 of _0x3bb739)await this['RemoveChatLabel'](_0x275b48,_0x1e44b7[_0xfb361(0x7b5)]),_0xeebb37[_0xfb361(0x7fb)](_0x275b48);if(_0xfb361(0x1ee)in _0x1f619a){let _0x5ec69a=_0x1f619a[_0xfb361(0x1ee)];_0x3ccf23[_0xfb361(0x70d)]=_0x5ec69a?Number(_0x5ec69a):null;}if(_0xfb361(0x15f)in _0x1f619a){let _0x5a93ee=_0x1f619a[_0xfb361(0x15f)][_0xfb361(0x784)]();_0x3ccf23[_0xfb361(0x1c3)]=_0x5a93ee==='true'||_0x5a93ee==='1'||_0x5a93ee==='yes'||_0x5a93ee==='sim';}let _0x27290c=await this[_0xfb361(0x67f)][_0xfb361(0x52b)][_0xfb361(0x104)]({'where':{'_id':_0x2c4fc4}},_0x3ccf23,this[_0xfb361(0x3d0)][_0xfb361(0x4ae)]);_0x27290c?(this[_0xfb361(0x478)][_0xfb361(0x4e1)](this[_0xfb361(0x1c7)]+'\x20('+this[_0xfb361(0x3d0)]['wuid']+_0xfb361(0x635)+_0x27290c[_0xfb361(0x7b5)]),F(this[_0xfb361(0x1c7)],_0xfb361(0x2cb),{'chat':_0x27290c})):this[_0xfb361(0x478)][_0xfb361(0x3c6)](this[_0xfb361(0x1c7)]+'\x20('+this[_0xfb361(0x3d0)][_0xfb361(0x4ae)]+_0xfb361(0x5cd));}catch(_0x48905a){this[_0xfb361(0x478)][_0xfb361(0x3c6)](this[_0xfb361(0x1c7)]+'\x20('+this[_0xfb361(0x3d0)][_0xfb361(0x4ae)]+_0xfb361(0x4a7)+(_0x48905a instanceof Error?_0x48905a[_0xfb361(0x70f)]:JSON[_0xfb361(0x238)](_0x48905a,null,0x2)));}}async[a0_0x3cfc7d(0x6be)](_0x5eee62,_0x17913e){const _0x45f0b6=a0_0x3cfc7d;this[_0x45f0b6(0x478)][_0x45f0b6(0x4e1)](this[_0x45f0b6(0x1c7)]+'\x20('+this[_0x45f0b6(0x3d0)]['wuid']+_0x45f0b6(0x7d4)+_0x17913e);try{let _0x5c4970=await this['repository']['chat'][_0x45f0b6(0x104)]({'where':{'_id':_0x5eee62[_0x45f0b6(0x6d9)]}},{'leadInfo.desativadoFluxoAte':_0x17913e},this[_0x45f0b6(0x3d0)][_0x45f0b6(0x4ae)]);this[_0x45f0b6(0x478)][_0x45f0b6(0x4e1)](this['instanceName']+'\x20('+this[_0x45f0b6(0x3d0)][_0x45f0b6(0x4ae)]+_0x45f0b6(0x6f6)+_0x5eee62[_0x45f0b6(0x7b5)]),this['logger'][_0x45f0b6(0x4e1)](this[_0x45f0b6(0x1c7)]+'\x20('+this['instance'][_0x45f0b6(0x4ae)]+_0x45f0b6(0x7d4)+JSON[_0x45f0b6(0x238)](_0x5c4970,null,0x2)),_0x5c4970&&F(this[_0x45f0b6(0x1c7)],_0x45f0b6(0x2cb),{'chat':_0x5c4970});}catch(_0x29be5a){this[_0x45f0b6(0x478)][_0x45f0b6(0x3c6)](this['instanceName']+'\x20('+this[_0x45f0b6(0x3d0)][_0x45f0b6(0x4ae)]+_0x45f0b6(0x49e)+(_0x29be5a instanceof Error?_0x29be5a[_0x45f0b6(0x70f)]:JSON[_0x45f0b6(0x238)](_0x29be5a,null,0x2)));}}async['findFlow'](_0x2d989e){const _0x268e46=a0_0x3cfc7d;try{this[_0x268e46(0x478)][_0x268e46(0x4e1)](this[_0x268e46(0x1c7)]+'\x20('+this[_0x268e46(0x3d0)]['wuid']+_0x268e46(0x49c));let _0xe3b012=_0x2d989e['replace'](/\D/g,''),_0x55ba4c=this[_0x268e46(0x37f)][_0x268e46(0x3dc)]['find'](_0x15c372=>_0x15c372[_0x268e46(0x278)]===_0xe3b012);if(_0x55ba4c||(this['logger'][_0x268e46(0x4e1)](this['instanceName']+'\x20('+this[_0x268e46(0x3d0)][_0x268e46(0x4ae)]+_0x268e46(0x5b5)),_0x55ba4c=this['AutomateSystem']['flows'][_0x268e46(0x1c4)](_0x504e6b=>_0x504e6b['default']===!0x0)),!_0x55ba4c)return this[_0x268e46(0x478)][_0x268e46(0x4e1)](this[_0x268e46(0x1c7)]+'\x20('+this['instance'][_0x268e46(0x4ae)]+'):\x20Não\x20achou\x20nenhum\x20flow'),null;let _0x236534=await this[_0x268e46(0x67f)]['flow'][_0x268e46(0x36a)]({'where':{'_id':_0x55ba4c['_id']}});if(!_0x236534||!_0x236534[_0x268e46(0x24d)]?.[_0x268e46(0x1ec)](this[_0x268e46(0x3d0)][_0x268e46(0x4ae)]))throw this['logger'][_0x268e46(0x3c6)](this[_0x268e46(0x1c7)]+'\x20('+this['instance'][_0x268e46(0x4ae)]+'):\x20Flow\x20\x27'+_0x236534[_0x268e46(0x7b5)]+_0x268e46(0x5d1)),new m('Flow\x20\x27'+_0x236534[_0x268e46(0x7b5)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');return _0x236534;}catch(_0x13fed7){return this[_0x268e46(0x478)]['error'](this[_0x268e46(0x1c7)]+'\x20('+this[_0x268e46(0x3d0)][_0x268e46(0x4ae)]+'):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20'+(_0x13fed7 instanceof Error?_0x13fed7[_0x268e46(0x70f)]:JSON[_0x268e46(0x238)](_0x13fed7,null,0x2))),null;}}async['findConversation'](_0x3a9360,_0x269efb){const _0x12706e=a0_0x3cfc7d;try{let _0x3b01f2=!!_0x269efb['vote'],_0x330854=_0x269efb[_0x12706e(0x3da)],_0x490685=null;if(this[_0x12706e(0x478)][_0x12706e(0x4e1)](this['instanceName']+'\x20('+this[_0x12706e(0x3d0)][_0x12706e(0x4ae)]+_0x12706e(0x1cb)+_0x3b01f2+_0x12706e(0x356)+_0x330854),_0x3b01f2){this[_0x12706e(0x478)][_0x12706e(0x4e1)](this[_0x12706e(0x1c7)]+'\x20('+this['instance'][_0x12706e(0x4ae)]+_0x12706e(0x736));let _0x57d1da={'where':{'remoteJid':_0x3a9360,'waitingMenu_id':_0x330854}};if(_0x490685=await this[_0x12706e(0x67f)][_0x12706e(0x86b)]['findOne'](_0x57d1da,this[_0x12706e(0x3d0)][_0x12706e(0x4ae)]),!_0x490685)return this[_0x12706e(0x478)][_0x12706e(0x4e1)](this[_0x12706e(0x1c7)]+'\x20('+this['instance'][_0x12706e(0x4ae)]+'):\x20não\x20encontrou'),null;let _0x183bc3=Date[_0x12706e(0x6aa)](),_0x5e89fd=_0x490685?.[_0x12706e(0x5f0)]||0x0,_0x266bd6=_0x183bc3-_0x5e89fd*0x3c*0x3e8;if(_0x490685[_0x12706e(0x7a9)]<_0x266bd6){this[_0x12706e(0x478)][_0x12706e(0x4e1)](this[_0x12706e(0x1c7)]+'\x20('+this[_0x12706e(0x3d0)]['wuid']+_0x12706e(0x411));let _0x1d3807={'number':_0x490685[_0x12706e(0x6d9)],'options':{'delay':0x0},'textMessage':{'text':_0x490685['waitingMenu_ExpiredMessage']}};await this[_0x12706e(0x39a)](_0x1d3807);let _0x1f35ad={'status':_0x12706e(0x831),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x12706e(0x67f)][_0x12706e(0x86b)][_0x12706e(0x104)](_0x490685[_0x12706e(0x7b5)],_0x1f35ad,this[_0x12706e(0x3d0)]['wuid']),null;}return _0x490685[_0x12706e(0x7a9)]=Date[_0x12706e(0x6aa)](),_0x490685[_0x12706e(0x69b)][_0x12706e(0x654)]=_0x269efb,_0x490685;}else{this[_0x12706e(0x478)][_0x12706e(0x4e1)](this[_0x12706e(0x1c7)]+'\x20('+this[_0x12706e(0x3d0)]['wuid']+_0x12706e(0x71a)+this[_0x12706e(0x3d0)][_0x12706e(0x4ae)]+_0x12706e(0x271)),this[_0x12706e(0x478)]['verbose'](this[_0x12706e(0x1c7)]+'\x20('+this[_0x12706e(0x3d0)][_0x12706e(0x4ae)]+_0x12706e(0x425));let _0x288fda={'where':{'remoteJid':_0x3a9360,'status':_0x12706e(0x19a)}};if(_0x490685=await this[_0x12706e(0x67f)][_0x12706e(0x86b)][_0x12706e(0x36a)](_0x288fda,this['instance']['wuid']),!_0x490685){let _0x3c98c7=await this[_0x12706e(0x259)](_0x3a9360);if(_0x3c98c7&&(_0x490685=await this['createNewConversation'](_0x3c98c7,_0x269efb[_0x12706e(0x1e4)],_0x269efb)),!_0x490685)return null;}let _0x19425d=Date[_0x12706e(0x6aa)](),_0x257124=_0x490685?.[_0x12706e(0x5f0)]||0x0,_0x23ef5b=_0x19425d-_0x257124*0x3c*0x3e8;if(this[_0x12706e(0x478)]['verbose'](this[_0x12706e(0x1c7)]+'\x20('+this['instance'][_0x12706e(0x4ae)]+_0x12706e(0x795)+_0x19425d+_0x12706e(0x79a)+_0x257124+_0x12706e(0x1a3)+_0x23ef5b),this[_0x12706e(0x478)]['verbose'](this[_0x12706e(0x1c7)]+'\x20('+this['instance'][_0x12706e(0x4ae)]+_0x12706e(0x2e1)),this[_0x12706e(0x478)][_0x12706e(0x4e1)](this['instanceName']+'\x20('+this[_0x12706e(0x3d0)][_0x12706e(0x4ae)]+_0x12706e(0x20d)+_0x490685[_0x12706e(0x7a9)]),this[_0x12706e(0x478)]['verbose'](this[_0x12706e(0x1c7)]+'\x20('+this[_0x12706e(0x3d0)][_0x12706e(0x4ae)]+_0x12706e(0x38a)+_0x23ef5b),_0x490685[_0x12706e(0x7a9)]<_0x23ef5b){this[_0x12706e(0x478)][_0x12706e(0x4e1)](this[_0x12706e(0x1c7)]+'\x20('+this[_0x12706e(0x3d0)][_0x12706e(0x4ae)]+_0x12706e(0x2ec));let _0x2e5bf5=await this[_0x12706e(0x259)](_0x3a9360);if(_0x2e5bf5===null)return null;_0x490685&&await this['repository'][_0x12706e(0x86b)][_0x12706e(0x104)](_0x490685[_0x12706e(0x7b5)],{'status':_0x12706e(0x831)},this[_0x12706e(0x3d0)][_0x12706e(0x4ae)]),_0x490685=await this[_0x12706e(0x886)](_0x2e5bf5,_0x269efb[_0x12706e(0x1e4)],_0x269efb);}return _0x490685[_0x12706e(0x7a9)]=_0x19425d,_0x490685[_0x12706e(0x69b)][_0x12706e(0x654)]=_0x269efb,_0x490685;}}catch(_0x1ab6ee){return this[_0x12706e(0x478)]['error'](this[_0x12706e(0x1c7)]+'\x20('+this['instance'][_0x12706e(0x4ae)]+'):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20'+(_0x1ab6ee instanceof Error?_0x1ab6ee[_0x12706e(0x70f)]:JSON[_0x12706e(0x238)](_0x1ab6ee,null,0x2))),null;}}async['createNewConversation'](_0x399b23,_0x7df997,_0x16e624){const _0x235764=a0_0x3cfc7d;this[_0x235764(0x478)][_0x235764(0x4e1)](this[_0x235764(0x1c7)]+'\x20('+this[_0x235764(0x3d0)][_0x235764(0x4ae)]+_0x235764(0x7b0));try{let _0x52cea5=require(_0x235764(0x506))[_0x235764(0x810)],_0xef1a89=Date['now'](),_0x244934=_0x235764(0x4e4),_0x356d93=_0x7df997[_0x235764(0x562)]?null:_0x16e624,_0x4ddfb4=_0x7df997['fromMe']?_0x16e624:null,_0x5e32d1=_0x7df997['remoteJid'],_0x5d53ed=this[_0x235764(0x37f)][_0x235764(0x3dc)]['find'](_0x1acd91=>_0x1acd91[_0x235764(0x7b5)]===_0x399b23[_0x235764(0x7b5)]?.[_0x235764(0x885)]()),_0x17e240=_0x5d53ed?.[_0x235764(0x5f0)]??_0x399b23['minutesToClose']??0x0,_0x14f451=_0x5d53ed?.[_0x235764(0x463)]??_0x399b23['readMessages']??!0x1;await this[_0x235764(0x1df)](_0x5e32d1);let _0x147637={'flowId':_0x399b23['_id'],..._0x399b23,'chatLog':null},_0x33a738=await this[_0x235764(0x33c)](_0x147637[_0x235764(0x1e8)]),_0x19d18a=await this[_0x235764(0x529)](_0x5e32d1),_0x394600={..._0x33a738,..._0x19d18a,'_remoteJid':_0x5e32d1},_0xc8ff4a={'lastReceivedMessage':_0x356d93,'lastSendMessage':_0x4ddfb4,'lastBlockId':_0x244934,'lastCondition':!0x0,'realVariables':_0x394600};_0x147637['chatLog']=_0xc8ff4a,delete _0x147637[_0x235764(0x7b5)],_0x147637[_0x235764(0x7b5)]=new _0x52cea5(),_0x147637[_0x235764(0x7a9)]=_0xef1a89,_0x147637[_0x235764(0x204)]='open',_0x147637[_0x235764(0x6d9)]=_0x5e32d1,_0x147637[_0x235764(0x5f0)]=_0x17e240,_0x147637[_0x235764(0x463)]=_0x14f451;let _0x528ded=await this[_0x235764(0x67f)][_0x235764(0x86b)]['updateOne'](_0x147637[_0x235764(0x7b5)],_0x147637,this[_0x235764(0x3d0)][_0x235764(0x4ae)]);return this[_0x235764(0x478)][_0x235764(0x4e1)](this[_0x235764(0x1c7)]+'\x20('+this[_0x235764(0x3d0)][_0x235764(0x4ae)]+_0x235764(0x3bf)),_0x528ded?_0x147637:null;}catch(_0x3c326b){return this['logger'][_0x235764(0x3c6)](this[_0x235764(0x1c7)]+'\x20('+this[_0x235764(0x3d0)]['wuid']+_0x235764(0x6b0)+(_0x3c326b instanceof Error?_0x3c326b[_0x235764(0x70f)]:JSON['stringify'](_0x3c326b,null,0x2))),_0x3c326b;}}async[a0_0x3cfc7d(0x72f)](_0x9d595a,_0x3bd80a){const _0x174682=a0_0x3cfc7d;let _0x370a10=_0x9d595a[_0x174682(0x6d9)];_0x3bd80a[_0x174682(0x76c)]['remoteJid']&&_0x3bd80a[_0x174682(0x76c)][_0x174682(0x6d9)]['trim']()!==''&&(_0x370a10=_0x3bd80a['uazapi'][_0x174682(0x6d9)]['trim']()),this[_0x174682(0x478)][_0x174682(0x4e1)](this[_0x174682(0x1c7)]+'\x20('+this[_0x174682(0x3d0)][_0x174682(0x4ae)]+_0x174682(0x7ee));let _0x369621={'number':_0x370a10,'options':{'delay':_0x3bd80a[_0x174682(0x76c)][_0x174682(0x21c)],'linkPreview':_0x3bd80a[_0x174682(0x76c)][_0x174682(0x4ac)]},'textMessage':{'text':_0x3bd80a['uazapi'][_0x174682(0x2c7)]}};try{let _0xf6c6a9=await this[_0x174682(0x39a)](_0x369621);if(_0xf6c6a9){let _0x216836={'_id':_0xf6c6a9[_0x174682(0x1e4)]['id'],'_fromMe':_0xf6c6a9[_0x174682(0x1e4)][_0x174682(0x562)],'_remoteJid':_0xf6c6a9[_0x174682(0x1e4)][_0x174682(0x6d9)]},_0x36b0ae=(0x0,w[_0x174682(0x161)])(_0xf6c6a9[_0x174682(0x70f)]),_0x3d4090=(0x0,w[_0x174682(0x3ae)])(_0x36b0ae);_0x9d595a[_0x174682(0x69b)][_0x174682(0x33b)]=_0x3bd80a[_0x174682(0x7b5)]['toString']();let {message_normalized:_0x500288}=this[_0x174682(0x5ca)](_0x36b0ae,_0x3d4090,null);_0x9d595a[_0x174682(0x69b)]['lastSendMessage']=await _0x500288;let _0x2aa3aa={'messageId':_0xf6c6a9['key']['id']},_0x3d503b=_0x9d595a[_0x174682(0x69b)][_0x174682(0x481)];Object[_0x174682(0x442)](_0x3d503b,_0x216836),_0x9d595a[_0x174682(0x69b)]['realVariables']=_0x3d503b,this[_0x174682(0x2fe)](_0x9d595a,_0x3bd80a,_0x2aa3aa);}else{let _0xaf8b62={'error':!0x0};this[_0x174682(0x2fe)](_0x9d595a,_0x3bd80a,_0xaf8b62),this[_0x174682(0x478)][_0x174682(0x3c6)](this[_0x174682(0x1c7)]+'\x20('+this['instance'][_0x174682(0x4ae)]+_0x174682(0x759));}}catch(_0x443177){let _0x148be9={'error':!0x0,'errorLog':_0x443177['toString']()};this[_0x174682(0x2fe)](_0x9d595a,_0x3bd80a,_0x148be9),this[_0x174682(0x478)]['error'](this['instanceName']+'\x20('+this[_0x174682(0x3d0)][_0x174682(0x4ae)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20'+(_0x443177 instanceof Error?_0x443177[_0x174682(0x70f)]:JSON[_0x174682(0x238)](_0x443177,null,0x2)));}}async[a0_0x3cfc7d(0xfe)](_0xbbe6c6,_0x2f800d){const _0x22815e=a0_0x3cfc7d;let _0x4118f7=_0xbbe6c6[_0x22815e(0x6d9)];_0x2f800d[_0x22815e(0x76c)][_0x22815e(0x6d9)]&&_0x2f800d['uazapi'][_0x22815e(0x6d9)][_0x22815e(0x1d2)]()!==''&&(_0x4118f7=_0x2f800d[_0x22815e(0x76c)][_0x22815e(0x6d9)][_0x22815e(0x1d2)]()),this[_0x22815e(0x478)][_0x22815e(0x4e1)](this['instanceName']+'\x20('+this[_0x22815e(0x3d0)]['wuid']+'):\x20Enviando\x20mídia');let _0x265202={'number':_0x4118f7,'options':{'delay':_0x2f800d['uazapi'][_0x22815e(0x21c)],'linkPreview':_0x2f800d['uazapi'][_0x22815e(0x4ac)]},'mediaMessage':{'mediatype':_0x2f800d['uazapi']['mediatype'],'caption':_0x2f800d[_0x22815e(0x76c)][_0x22815e(0x444)],'media':_0x2f800d[_0x22815e(0x76c)][_0x22815e(0x835)],'fileName':_0x2f800d['uazapi'][_0x22815e(0x40b)]}};try{let _0x2ebe9f=await this[_0x22815e(0x319)](_0x265202);if(_0x2ebe9f){let _0x1ac2db={'_id':_0x2ebe9f[_0x22815e(0x1e4)]['id'],'_fromMe':_0x2ebe9f[_0x22815e(0x1e4)][_0x22815e(0x562)],'_remoteJid':_0x2ebe9f[_0x22815e(0x1e4)][_0x22815e(0x6d9)]},_0x554227=(0x0,w[_0x22815e(0x161)])(_0x2ebe9f[_0x22815e(0x70f)]),_0x35d3a5=(0x0,w[_0x22815e(0x3ae)])(_0x554227);_0xbbe6c6['chatLog'][_0x22815e(0x33b)]=_0x2f800d[_0x22815e(0x7b5)][_0x22815e(0x885)]();let {message_normalized:_0x4eb871}=this[_0x22815e(0x5ca)](_0x554227,_0x35d3a5,null);_0xbbe6c6[_0x22815e(0x69b)][_0x22815e(0x4bd)]=await _0x4eb871;let _0x15fb55={'messageId':_0x2ebe9f[_0x22815e(0x1e4)]['id']},_0x28e373=_0xbbe6c6[_0x22815e(0x69b)]['realVariables'];Object[_0x22815e(0x442)](_0x28e373,_0x1ac2db),_0xbbe6c6[_0x22815e(0x69b)][_0x22815e(0x481)]=_0x28e373,this[_0x22815e(0x2fe)](_0xbbe6c6,_0x2f800d,_0x15fb55);}else{let _0x39e67b={'error':!0x0};this[_0x22815e(0x2fe)](_0xbbe6c6,_0x2f800d,_0x39e67b),this[_0x22815e(0x478)][_0x22815e(0x3c6)](this[_0x22815e(0x1c7)]+'\x20('+this[_0x22815e(0x3d0)][_0x22815e(0x4ae)]+_0x22815e(0x65c));}}catch(_0x540a5a){let _0x98a4a={'error':!0x0,'errorLog':_0x540a5a[_0x22815e(0x885)]()};this[_0x22815e(0x2fe)](_0xbbe6c6,_0x2f800d,_0x98a4a),this[_0x22815e(0x478)][_0x22815e(0x3c6)](this['instanceName']+'\x20('+this[_0x22815e(0x3d0)][_0x22815e(0x4ae)]+_0x22815e(0x6bf)+(_0x540a5a instanceof Error?_0x540a5a[_0x22815e(0x70f)]:JSON[_0x22815e(0x238)](_0x540a5a,null,0x2)));}}async[a0_0x3cfc7d(0x26b)](_0x4aa141,_0x1c1695){const _0x2bdb35=a0_0x3cfc7d;let _0x1e08fd=_0x4aa141['remoteJid'];_0x1c1695[_0x2bdb35(0x76c)][_0x2bdb35(0x6d9)]&&_0x1c1695[_0x2bdb35(0x76c)]['remoteJid'][_0x2bdb35(0x1d2)]()!==''&&(_0x1e08fd=_0x1c1695['uazapi']['remoteJid'][_0x2bdb35(0x1d2)]()),this[_0x2bdb35(0x478)][_0x2bdb35(0x4e1)](this[_0x2bdb35(0x1c7)]+'\x20('+this['instance'][_0x2bdb35(0x4ae)]+'):\x20Enviando\x20localização');let _0x9973c6={'number':_0x1e08fd,'options':{'delay':_0x1c1695[_0x2bdb35(0x76c)][_0x2bdb35(0x21c)]},'locationMessage':{'name':_0x1c1695['uazapi']['name'],'address':_0x1c1695[_0x2bdb35(0x76c)][_0x2bdb35(0x370)],'latitude':_0x1c1695['uazapi']['latitude'],'longitude':_0x1c1695[_0x2bdb35(0x76c)][_0x2bdb35(0x3a6)]}};try{let _0x4315fb=await this[_0x2bdb35(0x5b8)](_0x9973c6);if(_0x4315fb){let _0x58ec64={'_id':_0x4315fb[_0x2bdb35(0x1e4)]['id'],'_fromMe':_0x4315fb[_0x2bdb35(0x1e4)][_0x2bdb35(0x562)],'_remoteJid':_0x4315fb[_0x2bdb35(0x1e4)][_0x2bdb35(0x6d9)]},_0x41722c=(0x0,w[_0x2bdb35(0x161)])(_0x4315fb[_0x2bdb35(0x70f)]),_0x3d5217=(0x0,w[_0x2bdb35(0x3ae)])(_0x41722c);_0x4aa141[_0x2bdb35(0x69b)][_0x2bdb35(0x33b)]=_0x1c1695['_id']['toString']();let {message_normalized:_0x42d9fa}=this[_0x2bdb35(0x5ca)](_0x41722c,_0x3d5217,null);_0x4aa141[_0x2bdb35(0x69b)][_0x2bdb35(0x4bd)]=await _0x42d9fa;let _0x4f8d6f={'messageId':_0x4315fb[_0x2bdb35(0x1e4)]['id']},_0x47d7f1=_0x4aa141[_0x2bdb35(0x69b)][_0x2bdb35(0x481)];Object['assign'](_0x47d7f1,_0x58ec64),_0x4aa141[_0x2bdb35(0x69b)]['realVariables']=_0x47d7f1,this[_0x2bdb35(0x2fe)](_0x4aa141,_0x1c1695,_0x4f8d6f);}else{let _0x578a20={'error':!0x0};this['updateConversation'](_0x4aa141,_0x1c1695,_0x578a20),this[_0x2bdb35(0x478)]['error'](this['instanceName']+'\x20('+this[_0x2bdb35(0x3d0)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.');}}catch(_0x44b1ba){let _0x2a13ed={'error':!0x0,'errorLog':_0x44b1ba['toString']()};this[_0x2bdb35(0x2fe)](_0x4aa141,_0x1c1695,_0x2a13ed),this[_0x2bdb35(0x478)][_0x2bdb35(0x3c6)](this['instanceName']+'\x20('+this['instance'][_0x2bdb35(0x4ae)]+_0x2bdb35(0x6d1)+(_0x44b1ba instanceof Error?_0x44b1ba['message']:JSON[_0x2bdb35(0x238)](_0x44b1ba,null,0x2)));}}async[a0_0x3cfc7d(0x29d)](_0x4b9bd5,_0x5a50ab){const _0x2aeea5=a0_0x3cfc7d;let _0x346a5d=_0x4b9bd5['remoteJid'];_0x5a50ab[_0x2aeea5(0x76c)][_0x2aeea5(0x6d9)]&&_0x5a50ab[_0x2aeea5(0x76c)]['remoteJid'][_0x2aeea5(0x1d2)]()!==''&&(_0x346a5d=_0x5a50ab[_0x2aeea5(0x76c)][_0x2aeea5(0x6d9)][_0x2aeea5(0x1d2)]()),this[_0x2aeea5(0x478)][_0x2aeea5(0x4e1)](this[_0x2aeea5(0x1c7)]+'\x20('+this[_0x2aeea5(0x3d0)]['wuid']+'):\x20Enviando\x20áudio');let _0x10463c={'number':_0x346a5d,'options':{'delay':_0x5a50ab['uazapi']['delay']},'audioMessage':{'audio':_0x5a50ab[_0x2aeea5(0x76c)][_0x2aeea5(0x873)]}};try{let _0x3cc8b8=await this[_0x2aeea5(0x53d)](_0x10463c);if(_0x3cc8b8){let _0x15031a={'_id':_0x3cc8b8[_0x2aeea5(0x1e4)]['id'],'_fromMe':_0x3cc8b8[_0x2aeea5(0x1e4)][_0x2aeea5(0x562)],'_remoteJid':_0x3cc8b8[_0x2aeea5(0x1e4)][_0x2aeea5(0x6d9)]},_0x340a42=(0x0,w['normalizeMessageContent'])(_0x3cc8b8[_0x2aeea5(0x70f)]),_0x12d63b=(0x0,w[_0x2aeea5(0x3ae)])(_0x340a42);_0x4b9bd5[_0x2aeea5(0x69b)]['lastBlockId']=_0x5a50ab[_0x2aeea5(0x7b5)]['toString']();let {message_normalized:_0x209949}=this['normalizeMessage'](_0x340a42,_0x12d63b,null);_0x4b9bd5['chatLog'][_0x2aeea5(0x4bd)]=await _0x209949;let _0x211e51={'messageId':_0x3cc8b8[_0x2aeea5(0x1e4)]['id']},_0x5104d3=_0x4b9bd5['chatLog'][_0x2aeea5(0x481)];Object[_0x2aeea5(0x442)](_0x5104d3,_0x15031a),_0x4b9bd5[_0x2aeea5(0x69b)][_0x2aeea5(0x481)]=_0x5104d3,this['updateConversation'](_0x4b9bd5,_0x5a50ab,_0x211e51);}else{let _0x360c5a={'error':!0x0};this[_0x2aeea5(0x2fe)](_0x4b9bd5,_0x5a50ab,_0x360c5a),this['logger'][_0x2aeea5(0x3c6)](this[_0x2aeea5(0x1c7)]+'\x20('+this[_0x2aeea5(0x3d0)][_0x2aeea5(0x4ae)]+_0x2aeea5(0x6bc));}}catch(_0x1fd8b2){let _0x4baaea={'error':!0x0,'errorLog':_0x1fd8b2[_0x2aeea5(0x885)]()};this[_0x2aeea5(0x2fe)](_0x4b9bd5,_0x5a50ab,_0x4baaea),this['logger'][_0x2aeea5(0x3c6)](this[_0x2aeea5(0x1c7)]+'\x20('+this[_0x2aeea5(0x3d0)][_0x2aeea5(0x4ae)]+_0x2aeea5(0x550)+(_0x1fd8b2 instanceof Error?_0x1fd8b2[_0x2aeea5(0x70f)]:JSON[_0x2aeea5(0x238)](_0x1fd8b2,null,0x2)));}}async[a0_0x3cfc7d(0x4cf)](_0x23579c,_0x30f1ab){const _0xed0ca4=a0_0x3cfc7d;let _0x15a9a8=_0x23579c[_0xed0ca4(0x6d9)];_0x30f1ab['uazapi'][_0xed0ca4(0x6d9)]&&_0x30f1ab[_0xed0ca4(0x76c)][_0xed0ca4(0x6d9)][_0xed0ca4(0x1d2)]()!==''&&(_0x15a9a8=_0x30f1ab[_0xed0ca4(0x76c)]['remoteJid'][_0xed0ca4(0x1d2)]()),this['logger'][_0xed0ca4(0x4e1)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Enviando\x20contato');let _0x333d8d={'number':_0x15a9a8,'options':{'delay':_0x30f1ab['uazapi'][_0xed0ca4(0x21c)]},'contactMessage':[{'fullName':_0x30f1ab['uazapi']['fullName'],'phoneNumber':_0x30f1ab[_0xed0ca4(0x76c)][_0xed0ca4(0x2c6)]}]};try{let _0x1cf5bc=await this[_0xed0ca4(0x3c5)](_0x333d8d);if(_0x1cf5bc){let _0x205cb1={'_id':_0x1cf5bc[_0xed0ca4(0x1e4)]['id'],'_fromMe':_0x1cf5bc[_0xed0ca4(0x1e4)][_0xed0ca4(0x562)],'_remoteJid':_0x1cf5bc[_0xed0ca4(0x1e4)]['remoteJid']},_0x8ef379=(0x0,w[_0xed0ca4(0x161)])(_0x1cf5bc['message']),_0x5e7c29=(0x0,w[_0xed0ca4(0x3ae)])(_0x8ef379);_0x23579c['chatLog'][_0xed0ca4(0x33b)]=_0x30f1ab[_0xed0ca4(0x7b5)][_0xed0ca4(0x885)]();let {message_normalized:_0x28174f}=this[_0xed0ca4(0x5ca)](_0x8ef379,_0x5e7c29,null);_0x23579c[_0xed0ca4(0x69b)]['lastSendMessage']=await _0x28174f;let _0x230d03={'messageId':_0x1cf5bc[_0xed0ca4(0x1e4)]['id']},_0x16ad5f=_0x23579c[_0xed0ca4(0x69b)][_0xed0ca4(0x481)];Object[_0xed0ca4(0x442)](_0x16ad5f,_0x205cb1),_0x23579c[_0xed0ca4(0x69b)][_0xed0ca4(0x481)]=_0x16ad5f,this[_0xed0ca4(0x2fe)](_0x23579c,_0x30f1ab,_0x230d03);}else{let _0x4e447d={'error':!0x0};this[_0xed0ca4(0x2fe)](_0x23579c,_0x30f1ab,_0x4e447d),this[_0xed0ca4(0x478)][_0xed0ca4(0x3c6)](this['instanceName']+'\x20('+this[_0xed0ca4(0x3d0)]['wuid']+_0xed0ca4(0x345));}}catch(_0x16661f){let _0x3d2d0c={'error':!0x0,'errorLog':_0x16661f['toString']()};this[_0xed0ca4(0x2fe)](_0x23579c,_0x30f1ab,_0x3d2d0c),this[_0xed0ca4(0x478)][_0xed0ca4(0x3c6)](this[_0xed0ca4(0x1c7)]+'\x20('+this[_0xed0ca4(0x3d0)]['wuid']+_0xed0ca4(0x143)+(_0x16661f instanceof Error?_0x16661f[_0xed0ca4(0x70f)]:JSON[_0xed0ca4(0x238)](_0x16661f,null,0x2)));}}['replaceVariablesInReplyOptions'](_0x539cf2,_0x11fb1e){const _0x34f93f=a0_0x3cfc7d;for(let _0x282d3c of _0x539cf2)_0x282d3c['option']&&(_0x282d3c[_0x34f93f(0x123)]=this[_0x34f93f(0x844)](_0x282d3c[_0x34f93f(0x123)],_0x11fb1e)),_0x282d3c[_0x34f93f(0x46d)]&&(_0x282d3c[_0x34f93f(0x46d)]=this[_0x34f93f(0x844)](_0x282d3c[_0x34f93f(0x46d)],_0x11fb1e));}async[a0_0x3cfc7d(0x432)](_0x2292ff,_0x3bfc61){const _0x53aa20=a0_0x3cfc7d;let _0x533a50=_0x2292ff[_0x53aa20(0x6d9)];_0x3bfc61[_0x53aa20(0x76c)][_0x53aa20(0x6d9)]&&_0x3bfc61[_0x53aa20(0x76c)][_0x53aa20(0x6d9)][_0x53aa20(0x1d2)]()!==''&&(_0x533a50=_0x3bfc61[_0x53aa20(0x76c)]['remoteJid'][_0x53aa20(0x1d2)]()),this[_0x53aa20(0x478)][_0x53aa20(0x4e1)](this[_0x53aa20(0x1c7)]+'\x20('+this['instance']['wuid']+'):\x20Enviando\x20enquete');let _0x4681ad=_0x2292ff[_0x53aa20(0x866)][_0x53aa20(0x56c)](_0x52de79=>_0x52de79[_0x53aa20(0x440)]===_0x3bfc61[_0x53aa20(0x7b5)])[_0x53aa20(0x476)]((_0x5974cd,_0x7654f)=>_0x5974cd[_0x53aa20(0x451)]-_0x7654f[_0x53aa20(0x451)]);this['replaceVariablesInReplyOptions'](_0x4681ad,_0x2292ff[_0x53aa20(0x69b)]['realVariables']);let _0x5c68ba=_0x4681ad[_0x53aa20(0x733)](_0x4d17bf=>_0x4d17bf[_0x53aa20(0x123)]),_0x1d9fd9={'number':_0x533a50,'menuMessage':{'type':_0x3bfc61[_0x53aa20(0x76c)][_0x53aa20(0x2c3)]||_0x53aa20(0x1f2),'text':_0x3bfc61['uazapi'][_0x53aa20(0x2c7)]||_0x3bfc61['uazapi'][_0x53aa20(0x75b)],'footerText':_0x3bfc61['uazapi'][_0x53aa20(0x75a)],'buttonText':_0x3bfc61[_0x53aa20(0x76c)][_0x53aa20(0x27e)],'selectableCount':0x1,'choices':_0x5c68ba},'options':{'delay':_0x3bfc61[_0x53aa20(0x76c)][_0x53aa20(0x21c)]}};try{let _0x1207bc=await this[_0x53aa20(0x175)](_0x1d9fd9);if(_0x1207bc){let _0x3197fa={'_id':_0x1207bc[_0x53aa20(0x1e4)]['id'],'_fromMe':_0x1207bc[_0x53aa20(0x1e4)][_0x53aa20(0x562)],'_remoteJid':_0x1207bc['key'][_0x53aa20(0x6d9)]};_0x3bfc61[_0x53aa20(0x76c)][_0x53aa20(0x579)]===!0x0&&(_0x2292ff[_0x53aa20(0x204)]=_0x53aa20(0x11d),this['logger']['verbose'](this[_0x53aa20(0x1c7)]+'\x20('+this[_0x53aa20(0x3d0)][_0x53aa20(0x4ae)]+_0x53aa20(0x792)+_0x2292ff['status'])),this['logger'][_0x53aa20(0x4e1)](this[_0x53aa20(0x1c7)]+'\x20('+this[_0x53aa20(0x3d0)][_0x53aa20(0x4ae)]+_0x53aa20(0x346)+(_0x3bfc61[_0x53aa20(0x76c)]['name']||_0x3bfc61['uazapi']['text'])),_0x2292ff[_0x53aa20(0x391)]=_0x1207bc[_0x53aa20(0x1e4)]['id'],_0x2292ff[_0x53aa20(0x617)]=_0x3bfc61[_0x53aa20(0x76c)][_0x53aa20(0x75b)]||_0x3bfc61['uazapi'][_0x53aa20(0x2c7)],_0x2292ff[_0x53aa20(0x6d3)]=_0x4681ad,_0x3bfc61[_0x53aa20(0x76c)][_0x53aa20(0x639)]&&(_0x2292ff['waitingMenu_ExpiredMessage']=_0x3bfc61['uazapi'][_0x53aa20(0x639)]),this[_0x53aa20(0x478)]['verbose'](this[_0x53aa20(0x1c7)]+'\x20('+this[_0x53aa20(0x3d0)][_0x53aa20(0x4ae)]+_0x53aa20(0x18a)+_0x2292ff['waitingMenu_text']);let _0x29c930=(0x0,w[_0x53aa20(0x161)])(_0x1207bc[_0x53aa20(0x70f)]),_0x1334db=(0x0,w[_0x53aa20(0x3ae)])(_0x29c930);_0x2292ff[_0x53aa20(0x69b)][_0x53aa20(0x33b)]=_0x3bfc61[_0x53aa20(0x7b5)][_0x53aa20(0x885)]();let {message_normalized:_0x20d5b2}=this[_0x53aa20(0x5ca)](_0x29c930,_0x1334db,null);_0x2292ff[_0x53aa20(0x69b)][_0x53aa20(0x4bd)]=await _0x20d5b2;let _0x4b6a1d={'messageId':_0x1207bc[_0x53aa20(0x1e4)]['id']},_0x13a776=_0x2292ff[_0x53aa20(0x69b)]['realVariables'];Object[_0x53aa20(0x442)](_0x13a776,_0x3197fa),_0x2292ff[_0x53aa20(0x69b)][_0x53aa20(0x481)]=_0x13a776,this[_0x53aa20(0x2fe)](_0x2292ff,_0x3bfc61,_0x4b6a1d);}else{let _0x14efc2={'error':!0x0};this[_0x53aa20(0x2fe)](_0x2292ff,_0x3bfc61,_0x14efc2),this[_0x53aa20(0x478)]['error'](this['instanceName']+'\x20('+this[_0x53aa20(0x3d0)]['wuid']+_0x53aa20(0x252));}}catch(_0x2c9e26){let _0x177891={'error':!0x0,'errorLog':_0x2c9e26 instanceof Error?_0x2c9e26[_0x53aa20(0x70f)]:JSON[_0x53aa20(0x238)](_0x2c9e26,null,0x2)};this[_0x53aa20(0x2fe)](_0x2292ff,_0x3bfc61,_0x177891),this['logger']['error'](this[_0x53aa20(0x1c7)]+'\x20('+this['instance'][_0x53aa20(0x4ae)]+_0x53aa20(0x125)+(_0x2c9e26 instanceof Error?_0x2c9e26[_0x53aa20(0x70f)]:JSON['stringify'](_0x2c9e26,null,0x2)));}}async[a0_0x3cfc7d(0x512)](_0xe49fd3,_0xe729a0){const _0x7a874=a0_0x3cfc7d;this['logger'][_0x7a874(0x4e1)](this[_0x7a874(0x1c7)]+'\x20('+this['instance'][_0x7a874(0x4ae)]+_0x7a874(0x51e));let _0x15ac81=_0xe49fd3[_0x7a874(0x69b)][_0x7a874(0x223)][_0x7a874(0x1c4)](_0xf95893=>_0xf95893[_0x7a874(0x440)][_0x7a874(0x885)]()===_0xe729a0[_0x7a874(0x76c)][_0x7a874(0x440)]['toString']()),_0x2b4da6={'id':_0x15ac81[_0x7a874(0x308)],'remoteJid':_0x15ac81[_0x7a874(0x6d9)],'fromMe':_0x15ac81['fromMe']};try{let _0x22c67c=await this[_0x7a874(0x726)](_0x2b4da6);if(_0x22c67c){let _0x4395cc=(0x0,w[_0x7a874(0x161)])(_0x22c67c['message']),_0x629a90=(0x0,w['getContentType'])(_0x4395cc);_0xe49fd3['chatLog'][_0x7a874(0x33b)]=_0xe729a0['_id']['toString']();let {message_normalized:_0x28d1c1}=this[_0x7a874(0x5ca)](_0x4395cc,_0x629a90,null);_0xe49fd3[_0x7a874(0x69b)]['lastSendMessage']=await _0x28d1c1;let _0x30fdfa={};this[_0x7a874(0x2fe)](_0xe49fd3,_0xe729a0,_0x30fdfa);}else{let _0x2eaece={'error':!0x0};this[_0x7a874(0x2fe)](_0xe49fd3,_0xe729a0,_0x2eaece),this['logger'][_0x7a874(0x3c6)](this['instanceName']+'\x20('+this[_0x7a874(0x3d0)]['wuid']+'):\x20Falha\x20ao\x20deletar\x20mensagem.');}}catch(_0x28d0d9){let _0x53c60b={'error':!0x0,'errorLog':_0x28d0d9 instanceof Error?_0x28d0d9[_0x7a874(0x70f)]:JSON['stringify'](_0x28d0d9,null,0x2)};this[_0x7a874(0x2fe)](_0xe49fd3,_0xe729a0,_0x53c60b),this[_0x7a874(0x478)][_0x7a874(0x3c6)](this[_0x7a874(0x1c7)]+'\x20('+this[_0x7a874(0x3d0)]['wuid']+_0x7a874(0x827)+(_0x28d0d9 instanceof Error?_0x28d0d9[_0x7a874(0x70f)]:JSON[_0x7a874(0x238)](_0x28d0d9,null,0x2)));}}async[a0_0x3cfc7d(0x23c)](_0x19648d,_0x47e44b){const _0x31be51=a0_0x3cfc7d;if(_0x19648d[_0x31be51(0x75b)]||(_0x19648d[_0x31be51(0x75b)]=(0x0,Q['v4'])()),_0x47e44b!==Ri&&_0x19648d?.[_0x31be51(0x722)])throw new m(_0x31be51(0x2bf));if('_id'in _0x19648d&&'owner'in _0x19648d)return this[_0x31be51(0x6c3)](_0x19648d[_0x31be51(0x6a6)],_0x19648d[_0x31be51(0x7b5)]);this[_0x31be51(0x478)][_0x31be51(0x4e1)](this[_0x31be51(0x1c7)]+'\x20('+this[_0x31be51(0x3d0)]['wuid']+'):\x20Criando\x20fluxo...');let _0x1cb6dd=this['getUniqueFlowName'](_0x19648d[_0x31be51(0x75b)]),_0x5d7029=new pe[(_0x31be51(0x84e))][(_0x31be51(0x810))](),_0xd46de8={'_id':_0x5d7029,'default':!0x0,'title':_0x31be51(0x7e6),'x':0x0,'y':0x0},_0x11ee58={'_id':new pe[(_0x31be51(0x84e))][(_0x31be51(0x810))](),'order':0x1,'groupId':_0x5d7029[_0x31be51(0x885)](),'type':'start'},_0x3eb0db=this[_0x31be51(0x3d0)]['wuid'],_0xf55fd1={'_id':(0x0,Q['v4'])(),'owner':_0x3eb0db,'name':_0x1cb6dd,'whoCanEdit':[_0x3eb0db],'whoCanUse':[_0x3eb0db],'groups':[_0xd46de8],'blocks':[_0x11ee58],..._0x19648d};try{let _0x213a68=await this[_0x31be51(0x67f)][_0x31be51(0x2dc)][_0x31be51(0x850)](_0xf55fd1);return await this[_0x31be51(0x4b9)](),_0x213a68;}catch(_0x290812){let _0x84478=_0x31be51(0x3c4),_0x4ba972=_0x290812 instanceof Error?_0x290812[_0x31be51(0x70f)]:typeof _0x290812==_0x31be51(0x54e)?JSON[_0x31be51(0x238)](_0x290812):_0x290812,_0x449ba4=_0x84478+':\x20'+_0x4ba972;throw this[_0x31be51(0x478)][_0x31be51(0x3c6)](this[_0x31be51(0x1c7)]+'\x20('+this['instance'][_0x31be51(0x4ae)]+_0x31be51(0x71a)+_0x449ba4),new m(_0x449ba4);}}async[a0_0x3cfc7d(0x6c3)](_0x5d8bcd,_0x3d4b12){const _0x36957c=a0_0x3cfc7d;try{this[_0x36957c(0x478)]['verbose'](this[_0x36957c(0x1c7)]+'\x20('+this['instance'][_0x36957c(0x4ae)]+_0x36957c(0x376));let _0x745ef=await this[_0x36957c(0x67f)][_0x36957c(0x2dc)][_0x36957c(0x36a)]({'where':{'_id':_0x3d4b12,'owner':_0x5d8bcd}});if(!_0x745ef)throw new m(_0x36957c(0x500));if(_0x745ef[_0x36957c(0x219)]===!0x1&&!_0x745ef['globalShow'])throw new m(_0x36957c(0x1fc));let _0x11eb22=new Set(_0x745ef[_0x36957c(0x24d)]??[]);_0x11eb22[_0x36957c(0x199)](this[_0x36957c(0x3d0)][_0x36957c(0x4ae)]);let _0x144c15=await this[_0x36957c(0x67f)][_0x36957c(0x2dc)]['updateOne'](_0x3d4b12,{..._0x745ef,'whoCanUse':Array[_0x36957c(0x6c7)](_0x11eb22)});return await this[_0x36957c(0x4b9)](),_0x144c15;}catch(_0x5ebc87){let _0x45418d=_0x36957c(0x661),_0x4e4af1=_0x5ebc87 instanceof Error?_0x5ebc87['message']:typeof _0x5ebc87==_0x36957c(0x54e)?JSON[_0x36957c(0x238)](_0x5ebc87):_0x5ebc87,_0x5a352b=_0x45418d+':\x20'+_0x4e4af1;throw this['logger'][_0x36957c(0x3c6)](this[_0x36957c(0x1c7)]+'\x20('+this[_0x36957c(0x3d0)][_0x36957c(0x4ae)]+_0x36957c(0x71a)+_0x5a352b),new m(_0x5a352b);}}[a0_0x3cfc7d(0x268)](_0xdacd8){const _0x17e348=a0_0x3cfc7d;let _0x137ff1=_0xdacd8,_0x4b99a3=0x1;for(;this['AutomateSystem'][_0x17e348(0x3dc)][_0x17e348(0x4d3)](_0x4b854b=>_0x4b854b['name']===_0x137ff1);)_0x4b99a3++,_0x137ff1=_0xdacd8+'\x20('+_0x4b99a3+')';return _0x137ff1;}async[a0_0x3cfc7d(0x1b4)](_0x557600){const _0x1a86b3=a0_0x3cfc7d;try{if(this[_0x1a86b3(0x478)]['verbose'](this[_0x1a86b3(0x1c7)]+'\x20('+this[_0x1a86b3(0x3d0)][_0x1a86b3(0x4ae)]+_0x1a86b3(0x55f)+_0x557600['_id']+_0x1a86b3(0x47b)+_0x557600[_0x1a86b3(0x3a0)]),!this[_0x1a86b3(0x37f)][_0x1a86b3(0x3dc)][_0x1a86b3(0x1c4)](_0x16f07e=>_0x16f07e[_0x1a86b3(0x7b5)]===_0x557600[_0x1a86b3(0x7b5)]))throw this[_0x1a86b3(0x478)][_0x1a86b3(0x4e1)](this[_0x1a86b3(0x1c7)]+'\x20('+this[_0x1a86b3(0x3d0)][_0x1a86b3(0x4ae)]+'):\x20Fluxo\x20\x27'+_0x557600['_id']+_0x1a86b3(0x35d)),new m(_0x1a86b3(0x749));let _0x49fdaa=await this[_0x1a86b3(0x67f)]['flow'][_0x1a86b3(0x36a)]({'where':{'_id':_0x557600[_0x1a86b3(0x7b5)]}});if(!_0x49fdaa)throw new m(_0x1a86b3(0x6a5));if(this[_0x1a86b3(0x3d0)][_0x1a86b3(0x4ae)]===_0x49fdaa['owner']){this[_0x1a86b3(0x478)][_0x1a86b3(0x4e1)](this[_0x1a86b3(0x1c7)]+'\x20('+this[_0x1a86b3(0x3d0)]['wuid']+_0x1a86b3(0x277)+_0x557600[_0x1a86b3(0x7b5)]+_0x1a86b3(0x3f9));let _0x40f224=await this[_0x1a86b3(0x67f)][_0x1a86b3(0x2dc)][_0x1a86b3(0x3a4)]({'where':{'_id':_0x557600[_0x1a86b3(0x7b5)]}});return await this[_0x1a86b3(0x4b9)](),_0x40f224;}return this[_0x1a86b3(0x478)]['verbose'](this[_0x1a86b3(0x1c7)]+'\x20('+this[_0x1a86b3(0x3d0)]['wuid']+_0x1a86b3(0x452)+this['instance'][_0x1a86b3(0x4ae)]+_0x1a86b3(0x465)+_0x557600['_id']+_0x1a86b3(0x832)),_0x49fdaa[_0x1a86b3(0x24d)]=(_0x49fdaa[_0x1a86b3(0x24d)]??[])[_0x1a86b3(0x56c)](_0x2b7684=>_0x2b7684!==this[_0x1a86b3(0x3d0)]['wuid']),_0x49fdaa[_0x1a86b3(0x849)]=(_0x49fdaa[_0x1a86b3(0x849)]??[])[_0x1a86b3(0x56c)](_0x2a9bf3=>_0x2a9bf3!==this['instance'][_0x1a86b3(0x4ae)]),_0x49fdaa[_0x1a86b3(0x849)]['length']===0x0&&_0x49fdaa[_0x1a86b3(0x24d)][_0x1a86b3(0x11c)]>0x0&&(_0x49fdaa[_0x1a86b3(0x849)][_0x1a86b3(0x7b9)](_0x49fdaa[_0x1a86b3(0x24d)][0x0]),this[_0x1a86b3(0x478)][_0x1a86b3(0x4e1)](this['instanceName']+'\x20('+this[_0x1a86b3(0x3d0)][_0x1a86b3(0x4ae)]+_0x1a86b3(0x7a4)+_0x49fdaa[_0x1a86b3(0x24d)][0x0]+_0x1a86b3(0x632)+_0x557600[_0x1a86b3(0x7b5)]+_0x1a86b3(0x832))),await this[_0x1a86b3(0x67f)][_0x1a86b3(0x2dc)]['updateOne'](_0x49fdaa[_0x1a86b3(0x7b5)],_0x49fdaa),await this[_0x1a86b3(0x4b9)](),{'message':_0x1a86b3(0x1b2)+_0x557600['name']+'\x27\x20removido\x20do\x20AutomateSystem.'};}catch(_0x5cb58d){return this[_0x1a86b3(0x478)][_0x1a86b3(0x3c6)](this[_0x1a86b3(0x1c7)]+'\x20('+this[_0x1a86b3(0x3d0)]['wuid']+_0x1a86b3(0x57f)+(_0x5cb58d instanceof Error?_0x5cb58d[_0x1a86b3(0x70f)]:JSON['stringify'](_0x5cb58d,null,0x2))),{'message':'Erro\x20ao\x20deletar\x20o\x20fluxo:\x20'+(_0x5cb58d instanceof Error?_0x5cb58d[_0x1a86b3(0x70f)]:JSON[_0x1a86b3(0x238)](_0x5cb58d,null,0x2))};}}async['getFlow'](_0x473b60){const _0x18bbb8=a0_0x3cfc7d;try{if(this[_0x18bbb8(0x478)][_0x18bbb8(0x743)](this[_0x18bbb8(0x1c7)]+'\x20('+this['instance'][_0x18bbb8(0x4ae)]+'):\x20Buscando\x20flow,\x20id:\x20'+_0x473b60),!this[_0x18bbb8(0x37f)]&&(await this[_0x18bbb8(0x85d)](),!this[_0x18bbb8(0x37f)]))return null;let _0x1e2693=await this[_0x18bbb8(0x67f)][_0x18bbb8(0x2dc)][_0x18bbb8(0x36a)]({'where':{'_id':_0x473b60}});if(!_0x1e2693)throw new m(_0x18bbb8(0x7e7)+_0x473b60+_0x18bbb8(0x4d1));if(!(_0x1e2693[_0x18bbb8(0x722)]||_0x1e2693['whoCanUse']?.[_0x18bbb8(0x1ec)](this[_0x18bbb8(0x3d0)]['wuid'])))throw new m(_0x18bbb8(0x676)+name+'\x27');_0x1e2693[_0x18bbb8(0x722)]&&!_0x1e2693[_0x18bbb8(0x24d)]?.[_0x18bbb8(0x1ec)](this[_0x18bbb8(0x3d0)][_0x18bbb8(0x4ae)])&&(_0x1e2693[_0x18bbb8(0x24d)]=[..._0x1e2693['whoCanUse']??[],this[_0x18bbb8(0x3d0)][_0x18bbb8(0x4ae)]],await this[_0x18bbb8(0x67f)][_0x18bbb8(0x2dc)][_0x18bbb8(0x104)](_0x1e2693[_0x18bbb8(0x7b5)],_0x1e2693),this[_0x18bbb8(0x4b9)]());let _0x1663d3=this[_0x18bbb8(0x37f)]?.['customFields'][_0x18bbb8(0x733)](_0x464d78=>_0x464d78[_0x18bbb8(0x75b)]),_0x3670db=[_0x18bbb8(0x73a),_0x18bbb8(0x57b),_0x18bbb8(0x4d8),_0x18bbb8(0x651),_0x18bbb8(0x204),_0x18bbb8(0x229),'responsavelid','tags',_0x18bbb8(0x2c4),_0x18bbb8(0x167),_0x18bbb8(0x15f)];_0x1e2693[_0x18bbb8(0x1e8)]=_0x1e2693['variables'][_0x18bbb8(0x56c)](_0xe2a6d9=>!(_0xe2a6d9[_0x18bbb8(0x37a)]===_0x18bbb8(0x6ac)||_0xe2a6d9[_0x18bbb8(0x6ac)])),_0x3670db[_0x18bbb8(0x455)](_0x2354fd=>{const _0x8aef42=_0x18bbb8;_0x1e2693[_0x8aef42(0x1e8)]['push']({'folder':_0x8aef42(0x6ac),'name':_0x2354fd,'value':'','doc':'','leadInfo':!0x0});}),_0x1663d3[_0x18bbb8(0x455)](_0x1639b6=>{const _0x37d473=_0x18bbb8;let _0x329a6c=_0x1e2693['variables']['findIndex'](_0x435c11=>_0x435c11['name']===_0x1639b6);_0x329a6c===-0x1?_0x1e2693['variables'][_0x37d473(0x7b9)]({'folder':_0x37d473(0x6ac),'name':_0x1639b6,'value':'','doc':'','leadInfo':!0x0}):(_0x1e2693[_0x37d473(0x1e8)][_0x329a6c][_0x37d473(0x37a)]=_0x37d473(0x6ac),_0x1e2693['variables'][_0x329a6c]['leadInfo']=!0x0);}),_0x1e2693[_0x18bbb8(0x2e4)]&&_0x1e2693[_0x18bbb8(0x2e4)][_0x18bbb8(0x11c)]>0x0&&_0x1e2693[_0x18bbb8(0x2e4)]['forEach'](_0xe9fe6a=>{const _0x3857c6=_0x18bbb8;_0xe9fe6a[_0x3857c6(0x724)]&&_0xe9fe6a['next_groupId']&&_0xe9fe6a[_0x3857c6(0x724)]===_0xe9fe6a['next_groupId']&&(_0xe9fe6a[_0x3857c6(0x27f)]=null);});let _0xffaa81=await this['repository'][_0x18bbb8(0x2dc)][_0x18bbb8(0x104)](_0x1e2693[_0x18bbb8(0x7b5)],_0x1e2693);if(!_0xffaa81)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0xffaa81;}catch(_0x10f72a){let _0x123ffc=_0x18bbb8(0x62c),_0x173bcd=_0x10f72a instanceof Error?_0x10f72a[_0x18bbb8(0x70f)]:typeof _0x10f72a==_0x18bbb8(0x54e)?JSON[_0x18bbb8(0x238)](_0x10f72a):_0x10f72a,_0x26e5ec=_0x123ffc+':\x20'+_0x173bcd;throw this['logger'][_0x18bbb8(0x3c6)](this[_0x18bbb8(0x1c7)]+'\x20('+this['instance'][_0x18bbb8(0x4ae)]+_0x18bbb8(0x71a)+_0x26e5ec),new m(_0x26e5ec);}}async[a0_0x3cfc7d(0x76a)](){const _0x49c25a=a0_0x3cfc7d;try{this['logger'][_0x49c25a(0x4e1)](this[_0x49c25a(0x1c7)]+'\x20('+this[_0x49c25a(0x3d0)][_0x49c25a(0x4ae)]+_0x49c25a(0x4b6)),await this[_0x49c25a(0x4b9)]();let _0x39c8f7=await this['repository'][_0x49c25a(0x2dc)][_0x49c25a(0x256)]({'where':{'globalShow':!0x0}});return[...this[_0x49c25a(0x37f)]['flows'],..._0x39c8f7];}catch(_0x65bde5){return this[_0x49c25a(0x478)]['error'](this[_0x49c25a(0x1c7)]+'\x20('+this[_0x49c25a(0x3d0)][_0x49c25a(0x4ae)]+_0x49c25a(0x1b9)+(_0x65bde5 instanceof Error?_0x65bde5['message']:JSON[_0x49c25a(0x238)](_0x65bde5,null,0x2))),{'message':'Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20'+(_0x65bde5 instanceof Error?_0x65bde5[_0x49c25a(0x70f)]:String(_0x65bde5))};}}async[a0_0x3cfc7d(0x116)](_0x5e51e8,_0x4339f3){const _0x2b3349=a0_0x3cfc7d;try{this[_0x2b3349(0x478)]['verbose'](this['instanceName']+'\x20('+this[_0x2b3349(0x3d0)][_0x2b3349(0x4ae)]+'):\x20Alterando\x20fluxo...');let _0x4e3d00=this[_0x2b3349(0x37f)][_0x2b3349(0x3dc)][_0x2b3349(0x1c4)](_0x52d73d=>_0x52d73d[_0x2b3349(0x7b5)]===_0x5e51e8[_0x2b3349(0x7b5)]);if(!_0x4e3d00)throw this[_0x2b3349(0x478)]['verbose'](this[_0x2b3349(0x1c7)]+'\x20('+this[_0x2b3349(0x3d0)][_0x2b3349(0x4ae)]+_0x2b3349(0x3f2)+_0x5e51e8[_0x2b3349(0x7b5)]+_0x2b3349(0x35d)),new m(_0x2b3349(0x749));let _0x32ddc4=await this[_0x2b3349(0x67f)][_0x2b3349(0x2dc)][_0x2b3349(0x36a)]({'where':{'_id':_0x5e51e8['_id']}});if(!_0x32ddc4||!_0x32ddc4['whoCanUse']?.[_0x2b3349(0x1ec)](this[_0x2b3349(0x3d0)][_0x2b3349(0x4ae)]))throw this[_0x2b3349(0x478)][_0x2b3349(0x3c6)](this[_0x2b3349(0x1c7)]+'\x20('+this[_0x2b3349(0x3d0)][_0x2b3349(0x4ae)]+_0x2b3349(0x462)+_0x5e51e8[_0x2b3349(0x7b5)]+_0x2b3349(0x5d1)),new m(_0x2b3349(0x203)+_0x5e51e8['_id']+_0x2b3349(0x5d1));let _0x2edbbc=this[_0x2b3349(0x37f)][_0x2b3349(0x3dc)][_0x2b3349(0x2d0)](_0x191b75=>_0x191b75[_0x2b3349(0x7b5)]===_0x4e3d00[_0x2b3349(0x7b5)]);if(_0x2edbbc!==-0x1){let _0x22cace=this[_0x2b3349(0x37f)][_0x2b3349(0x3dc)][_0x2edbbc];if(_0x22cace[_0x2b3349(0x75b)]=_0x5e51e8[_0x2b3349(0x75b)]??_0x22cace['name'],_0x22cace['default']=_0x5e51e8[_0x2b3349(0x879)]??_0x22cace[_0x2b3349(0x879)],_0x22cace[_0x2b3349(0x278)]=_0x5e51e8[_0x2b3349(0x278)]??_0x22cace[_0x2b3349(0x278)],_0x22cace['startCommand']=_0x5e51e8['startCommandWord']??_0x22cace[_0x2b3349(0x864)],_0x22cace['minutesToClose']=_0x5e51e8[_0x2b3349(0x5f0)]??_0x22cace[_0x2b3349(0x5f0)],_0x22cace['readMessages']=_0x5e51e8[_0x2b3349(0x463)]??_0x22cace['readMessages'],_0x5e51e8[_0x2b3349(0x879)]&&this['AutomateSystem']['flows']['forEach']((_0x37b7c5,_0x246aef)=>{const _0x21ba16=_0x2b3349;_0x246aef!==_0x2edbbc&&(_0x37b7c5[_0x21ba16(0x879)]=!0x1);}),this[_0x2b3349(0x37f)][_0x2b3349(0x3dc)][_0x2edbbc]=_0x22cace,!await this[_0x2b3349(0x67f)][_0x2b3349(0x730)][_0x2b3349(0x3f8)]({'flows':this[_0x2b3349(0x37f)][_0x2b3349(0x3dc)]},this[_0x2b3349(0x3d0)][_0x2b3349(0x4ae)]))throw new m(_0x2b3349(0x39b));}let _0x4a6e91=[_0x2b3349(0x3a0),_0x2b3349(0x24f),_0x2b3349(0x71e),_0x2b3349(0x823)];for(let _0x205bf0 of _0x4a6e91)delete _0x5e51e8[_0x205bf0];if(_0x32ddc4[_0x2b3349(0x849)]?.[_0x2b3349(0x1ec)](this[_0x2b3349(0x3d0)][_0x2b3349(0x4ae)])||(_0x5e51e8={'_id':_0x5e51e8[_0x2b3349(0x7b5)]}),_0x4339f3!==Ri&&_0x5e51e8?.[_0x2b3349(0x722)]&&!_0x32ddc4?.[_0x2b3349(0x722)])throw new m('Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.');let _0xe032e9=new Set(_0x5e51e8[_0x2b3349(0x849)]??_0x32ddc4[_0x2b3349(0x849)]);_0xe032e9[_0x2b3349(0x199)](_0x32ddc4[_0x2b3349(0x6a6)]);let _0x36b9cb=new Set(_0x5e51e8[_0x2b3349(0x24d)]??_0x32ddc4[_0x2b3349(0x24d)]??[]);_0xe032e9[_0x2b3349(0x455)](_0x2c2482=>_0x36b9cb[_0x2b3349(0x199)](_0x2c2482)),_0x36b9cb['add'](_0x32ddc4[_0x2b3349(0x6a6)]),this[_0x2b3349(0x478)][_0x2b3349(0x4e1)](this[_0x2b3349(0x1c7)]+'\x20('+this[_0x2b3349(0x3d0)]['wuid']+'):\x20whoCanEdit\x20before\x20validation:\x20'+Array[_0x2b3349(0x6c7)](_0xe032e9)),this['logger'][_0x2b3349(0x4e1)](this[_0x2b3349(0x1c7)]+'\x20('+this[_0x2b3349(0x3d0)][_0x2b3349(0x4ae)]+_0x2b3349(0x44c)+Array[_0x2b3349(0x6c7)](_0x36b9cb));let _0x1ec43f=await this['getValidWhatsAppNumbers'](Array['from'](_0x36b9cb)),_0xaa0114=Array[_0x2b3349(0x6c7)](_0xe032e9)[_0x2b3349(0x56c)](_0x369b40=>_0x1ec43f[_0x2b3349(0x1ec)](_0x369b40)),_0x31fbe5=Array[_0x2b3349(0x6c7)](_0x36b9cb)[_0x2b3349(0x56c)](_0xb899c8=>_0x1ec43f[_0x2b3349(0x1ec)](_0xb899c8));this[_0x2b3349(0x478)]['verbose'](this[_0x2b3349(0x1c7)]+'\x20('+this[_0x2b3349(0x3d0)][_0x2b3349(0x4ae)]+'):\x20whoCanEdit\x20after\x20validation:\x20'+_0xaa0114),this[_0x2b3349(0x478)][_0x2b3349(0x4e1)](this[_0x2b3349(0x1c7)]+'\x20('+this[_0x2b3349(0x3d0)]['wuid']+_0x2b3349(0x105)+_0x31fbe5);let _0x4bc5df={..._0x32ddc4,..._0x5e51e8,'whoCanEdit':_0xaa0114,'whoCanUse':_0x31fbe5},_0x31cdd1=await this[_0x2b3349(0x67f)]['flow'][_0x2b3349(0x104)](_0x32ddc4['_id'],_0x4bc5df);return await this[_0x2b3349(0x4b9)](),_0x31cdd1;}catch(_0x57283a){let _0x15ba24=_0x2b3349(0x317),_0x2fbd70=_0x57283a instanceof Error?_0x57283a[_0x2b3349(0x70f)]:typeof _0x57283a=='object'?JSON[_0x2b3349(0x238)](_0x57283a):_0x57283a,_0x49af2f=_0x15ba24+':\x20'+_0x2fbd70;throw this[_0x2b3349(0x478)]['error'](this[_0x2b3349(0x1c7)]+'\x20('+this['instance']['wuid']+_0x2b3349(0x71a)+_0x49af2f),new m(_0x49af2f);}}async['getValidWhatsAppNumbers'](_0x251144){const _0x15ff5e=a0_0x3cfc7d;let _0x1ffbdb={'numbers':_0x251144};return(await this[_0x15ff5e(0x434)](_0x1ffbdb))[_0x15ff5e(0x56c)](_0x319dbf=>_0x319dbf[_0x15ff5e(0x78a)])[_0x15ff5e(0x733)](_0x2cee3a=>_0x2cee3a['jid'])['map'](_0xd0ab8f=>this[_0x15ff5e(0x4ec)](_0xd0ab8f));}['extractPhoneNumber'](_0x582528){const _0xe5d156=a0_0x3cfc7d;let _0x4ef216=_0x582528[_0xe5d156(0x151)](/\d+/);return _0x4ef216?_0x4ef216[0x0]:'';}async['editFlowBlock'](_0x31f057){const _0x4070a0=a0_0x3cfc7d;try{if(this[_0x4070a0(0x478)]['verbose'](this[_0x4070a0(0x1c7)]+'\x20('+this[_0x4070a0(0x3d0)][_0x4070a0(0x4ae)]+_0x4070a0(0x858)),!this[_0x4070a0(0x37f)][_0x4070a0(0x3dc)]['find'](_0x25959b=>_0x25959b[_0x4070a0(0x7b5)]===_0x31f057[_0x4070a0(0x7b5)]))throw this[_0x4070a0(0x478)]['verbose'](this[_0x4070a0(0x1c7)]+'\x20('+this[_0x4070a0(0x3d0)]['wuid']+_0x4070a0(0x3f2)+_0x31f057[_0x4070a0(0x7b5)]+'\x27\x20não\x20encontrado'),new m(_0x4070a0(0x749));let _0x80ff7d=await this['repository'][_0x4070a0(0x2dc)][_0x4070a0(0x36a)]({'where':{'_id':_0x31f057[_0x4070a0(0x7b5)]}});if(!_0x80ff7d||!_0x80ff7d[_0x4070a0(0x24d)]?.['includes'](this[_0x4070a0(0x3d0)]['wuid']))throw this[_0x4070a0(0x478)][_0x4070a0(0x3c6)](this[_0x4070a0(0x1c7)]+'\x20('+this[_0x4070a0(0x3d0)][_0x4070a0(0x4ae)]+_0x4070a0(0x462)+_0x31f057[_0x4070a0(0x7b5)]+_0x4070a0(0x5d1)),new m(_0x4070a0(0x203)+_0x31f057[_0x4070a0(0x7b5)]+_0x4070a0(0x5d1));if(!_0x80ff7d[_0x4070a0(0x849)]?.[_0x4070a0(0x1ec)](this[_0x4070a0(0x3d0)][_0x4070a0(0x4ae)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let {block:_0x41cf82}=_0x31f057;_0x41cf82?.[_0x4070a0(0x554)]?this[_0x4070a0(0x457)](_0x80ff7d,_0x31f057):_0x41cf82?.[_0x4070a0(0x7fb)]?this[_0x4070a0(0x136)](_0x80ff7d,_0x31f057):_0x41cf82[_0x4070a0(0x7b5)]?await this[_0x4070a0(0x533)](_0x80ff7d,_0x31f057):this[_0x4070a0(0x421)](_0x80ff7d,_0x31f057);let _0x15cd32=await this[_0x4070a0(0x67f)][_0x4070a0(0x2dc)][_0x4070a0(0x104)](_0x80ff7d[_0x4070a0(0x7b5)],_0x80ff7d);if(!_0x15cd32)throw new Error(_0x4070a0(0x59c));return _0x15cd32;}catch(_0x2d0dd0){this[_0x4070a0(0x656)](_0x4070a0(0x5ae)+_0x2d0dd0['message']);}}async['copyBlock'](_0x1eda60,_0x34bc59){const _0x15515c=a0_0x3cfc7d;let _0x5a5a1c=_0x34bc59[_0x15515c(0x6ce)][_0x15515c(0x7b5)],_0x51eb6c=_0x1eda60[_0x15515c(0x2e4)]['find'](_0x4275f1=>_0x4275f1['_id'][_0x15515c(0x885)]()===_0x5a5a1c);if(!_0x51eb6c){this[_0x15515c(0x478)][_0x15515c(0x3c6)](this[_0x15515c(0x1c7)]+'\x20('+this[_0x15515c(0x3d0)][_0x15515c(0x4ae)]+_0x15515c(0x6e0)+_0x5a5a1c+_0x15515c(0x3de));return;}this['logger'][_0x15515c(0x4e1)](this[_0x15515c(0x1c7)]+'\x20('+this['instance']['wuid']+_0x15515c(0x7f1)+JSON[_0x15515c(0x238)](_0x51eb6c));let _0x2a4ae1=JSON[_0x15515c(0x675)](JSON['stringify'](_0x51eb6c));_0x2a4ae1[_0x15515c(0x7b5)]=new pe[(_0x15515c(0x879))]['Types'][(_0x15515c(0x810))](),this[_0x15515c(0x478)][_0x15515c(0x4e1)](this[_0x15515c(0x1c7)]+'\x20('+this[_0x15515c(0x3d0)][_0x15515c(0x4ae)]+_0x15515c(0x553)+JSON[_0x15515c(0x238)](_0x2a4ae1)),_0x1eda60[_0x15515c(0x2e4)][_0x15515c(0x7b9)](_0x2a4ae1),this[_0x15515c(0x68b)](_0x1eda60['blocks'],_0x2a4ae1[_0x15515c(0x724)]);}[a0_0x3cfc7d(0x656)](_0x53e463){const _0x3b1760=a0_0x3cfc7d;throw this[_0x3b1760(0x478)][_0x3b1760(0x3c6)](this[_0x3b1760(0x1c7)]+'\x20('+this[_0x3b1760(0x3d0)][_0x3b1760(0x4ae)]+_0x3b1760(0x71a)+_0x53e463),new m(_0x53e463);}[a0_0x3cfc7d(0x136)](_0x58c4ac,_0x2a23d1){const _0x558549=a0_0x3cfc7d;let {block:_0x5533d9}=_0x2a23d1;if(_0x5533d9[_0x558549(0x77b)]===_0x558549(0x4e4)){this['throwAndLogError'](_0x558549(0x1c2));return;}if(!_0x5533d9[_0x558549(0x7b5)]){this['throwAndLogError'](_0x558549(0x2b6));return;}let _0x24bfec=_0x58c4ac[_0x558549(0x2e4)][_0x558549(0x1c4)](_0x49fb69=>_0x49fb69[_0x558549(0x7b5)][_0x558549(0x885)]()===_0x2a23d1[_0x558549(0x6ce)][_0x558549(0x7b5)][_0x558549(0x885)]());if(!_0x24bfec){this[_0x558549(0x656)]('Bloco\x20com\x20ID\x20'+_0x5533d9[_0x558549(0x7b5)]+_0x558549(0x261));return;}_0x58c4ac[_0x558549(0x2e4)]=_0x58c4ac[_0x558549(0x2e4)][_0x558549(0x56c)](_0x38ee76=>_0x38ee76['_id'][_0x558549(0x885)]()!==_0x2a23d1[_0x558549(0x6ce)][_0x558549(0x7b5)][_0x558549(0x885)]()),_0x58c4ac[_0x558549(0x51a)]=_0x58c4ac[_0x558549(0x51a)]['filter'](_0x43f40d=>_0x43f40d[_0x558549(0x440)]!==_0x5533d9[_0x558549(0x7b5)][_0x558549(0x885)]()),_0x58c4ac[_0x558549(0x7c9)]=_0x58c4ac['varedits'][_0x558549(0x56c)](_0x54be7e=>_0x54be7e[_0x558549(0x440)]!==_0x5533d9[_0x558549(0x7b5)]['toString']()),_0x58c4ac['replyOptions']=_0x58c4ac[_0x558549(0x866)][_0x558549(0x56c)](_0x4fecba=>_0x4fecba[_0x558549(0x440)]!==_0x5533d9[_0x558549(0x7b5)][_0x558549(0x885)]()),this[_0x558549(0x68b)](_0x58c4ac[_0x558549(0x2e4)],_0x24bfec[_0x558549(0x724)]);}async[a0_0x3cfc7d(0x533)](_0xe582f,_0x359d1d){const _0x4df9c9=a0_0x3cfc7d;let _0x87152d=_0xe582f['blocks']['findIndex'](_0x156520=>_0x156520['_id']['toString']()===_0x359d1d['block'][_0x4df9c9(0x7b5)][_0x4df9c9(0x885)]());if(this[_0x4df9c9(0x478)][_0x4df9c9(0x4e1)](this['instanceName']+'\x20('+this['instance'][_0x4df9c9(0x4ae)]+_0x4df9c9(0x422)+_0x87152d),_0x87152d===-0x1){this['logger'][_0x4df9c9(0x4e1)](_0x4df9c9(0x4e0)+_0x359d1d[_0x4df9c9(0x6ce)][_0x4df9c9(0x7b5)]+_0x4df9c9(0x7e2));return;}if(_0xe582f[_0x4df9c9(0x2e4)][_0x87152d]['type']===_0x4df9c9(0x4e4)){let _0x54a8b1=Object[_0x4df9c9(0x1a4)](_0x359d1d[_0x4df9c9(0x6ce)]);if(_0x54a8b1[_0x4df9c9(0x11c)]>0x2||_0x54a8b1['length']===0x2&&!_0x54a8b1[_0x4df9c9(0x1ec)](_0x4df9c9(0x27f))){this[_0x4df9c9(0x656)](_0x4df9c9(0x7a0));return;}}let _0x202190=_0xe582f[_0x4df9c9(0x2e4)][_0x87152d][_0x4df9c9(0x724)];for(let _0x1da485 in _0x359d1d[_0x4df9c9(0x6ce)])_0x359d1d[_0x4df9c9(0x6ce)]['hasOwnProperty'](_0x1da485)&&(_0xe582f[_0x4df9c9(0x2e4)][_0x87152d][_0x1da485]=_0x359d1d[_0x4df9c9(0x6ce)][_0x1da485]);if(this[_0x4df9c9(0x478)][_0x4df9c9(0x4e1)](this['instanceName']+'\x20('+this['instance'][_0x4df9c9(0x4ae)]+_0x4df9c9(0x2ee)+JSON[_0x4df9c9(0x238)](_0xe582f[_0x4df9c9(0x2e4)][_0x87152d])),_0xe582f['blocks'][_0x87152d][_0x4df9c9(0x4e9)]&&_0x4df9c9(0x1f6)in _0xe582f[_0x4df9c9(0x2e4)][_0x87152d]['apirequest']){this[_0x4df9c9(0x478)][_0x4df9c9(0x4e1)](this[_0x4df9c9(0x1c7)]+'\x20('+this[_0x4df9c9(0x3d0)]['wuid']+'):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString');let _0x5e11f8=JSON[_0x4df9c9(0x238)](_0xe582f[_0x4df9c9(0x2e4)][_0x87152d][_0x4df9c9(0x4e9)][_0x4df9c9(0x1f6)],null,0x1);_0x5e11f8['length']>0x2&&(_0x5e11f8=_0x5e11f8[_0x4df9c9(0x59f)](0x1,_0x5e11f8[_0x4df9c9(0x11c)]-0x1)[_0x4df9c9(0x1d2)]()),_0xe582f[_0x4df9c9(0x2e4)][_0x87152d][_0x4df9c9(0x4e9)][_0x4df9c9(0x3d8)]=_0x5e11f8;}if(_0xe582f[_0x4df9c9(0x2e4)][_0x87152d]['apirequest']&&_0x4df9c9(0x46e)in _0xe582f['blocks'][_0x87152d][_0x4df9c9(0x4e9)]&&!(_0x4df9c9(0x1a0)in _0xe582f[_0x4df9c9(0x2e4)][_0x87152d][_0x4df9c9(0x4e9)])){this[_0x4df9c9(0x478)][_0x4df9c9(0x4e1)](this[_0x4df9c9(0x1c7)]+'\x20('+this[_0x4df9c9(0x3d0)][_0x4df9c9(0x4ae)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString'),_0xe582f[_0x4df9c9(0x2e4)][_0x87152d][_0x4df9c9(0x4e9)][_0x4df9c9(0x7fd)]=!0x1;let _0x2972d1=JSON['stringify'](_0xe582f['blocks'][_0x87152d][_0x4df9c9(0x4e9)]['body'],null,0x2);_0xe582f[_0x4df9c9(0x2e4)][_0x87152d]['apirequest'][_0x4df9c9(0x1a0)]=_0x2972d1;}if(_0xe582f[_0x4df9c9(0x2e4)][_0x87152d]['apirequest']&&_0x4df9c9(0x1a0)in _0xe582f[_0x4df9c9(0x2e4)][_0x87152d][_0x4df9c9(0x4e9)]){_0xe582f['blocks'][_0x87152d][_0x4df9c9(0x4e9)][_0x4df9c9(0x7fd)]=!0x1;let _0x3242dc=_0xe582f['blocks'][_0x87152d][_0x4df9c9(0x4e9)][_0x4df9c9(0x1a0)],_0x4f17cc=this[_0x4df9c9(0x211)](_0x3242dc);_0xe582f[_0x4df9c9(0x2e4)][_0x87152d][_0x4df9c9(0x4e9)][_0x4df9c9(0x1a0)]=_0x4f17cc[_0x4df9c9(0x1c6)],_0xe582f[_0x4df9c9(0x2e4)][_0x87152d][_0x4df9c9(0x4e9)][_0x4df9c9(0x7fd)]=_0x4f17cc[_0x4df9c9(0x3c6)];}let _0x34c5ed=_0xe582f[_0x4df9c9(0x2e4)][_0x87152d]['groupId'];_0x202190!==_0x34c5ed?(this['reorderBlocks'](_0xe582f[_0x4df9c9(0x2e4)],_0x202190),this[_0x4df9c9(0x68b)](_0xe582f[_0x4df9c9(0x2e4)],_0x34c5ed)):this[_0x4df9c9(0x68b)](_0xe582f[_0x4df9c9(0x2e4)],_0x202190);}[a0_0x3cfc7d(0x211)](_0x40bba1){const _0x4a0faf=a0_0x3cfc7d;let _0x1343ab='\u205f',_0x1c3f36=!0x1,_0x282453='';for(let _0x77dccd=0x0;_0x77dccd<_0x40bba1['length'];_0x77dccd++){let _0xe78bcd=_0x40bba1[_0x77dccd];_0xe78bcd==='\x22'&&(_0x77dccd===0x0||_0x40bba1[_0x77dccd-0x1]!=='\x5c')&&(_0x1c3f36=!_0x1c3f36),!(!_0x1c3f36&&(_0xe78bcd==='\x0a'||_0xe78bcd==='\x20'||_0xe78bcd===_0x1343ab))&&(_0x282453+=_0xe78bcd);}let _0x17f344={},_0x547a2d=9876543210.1234,_0x30074f=_0x282453[_0x4a0faf(0x5e0)](/\{\{([^}]+)\}\}/g,_0x5cc1c6=>{let _0x39a8cd=_0x5cc1c6,_0x3e8df8=''+_0x547a2d;return _0x17f344[_0x3e8df8]=_0x39a8cd,_0x547a2d+=0.0001,_0x3e8df8;}),_0x95589f='',_0x19a941=!0x1;try{let _0x2caa10=JSON['parse'](_0x30074f);_0x95589f=JSON[_0x4a0faf(0x238)](_0x2caa10,null,0x2),_0x95589f=_0x95589f['replace'](/\n( +)/g,(_0x56d3fb,_0xdb5245)=>{const _0x444f37=_0x4a0faf;let _0x488f93=_0xdb5245[_0x444f37(0x11c)];return'\x0a'+_0x1343ab[_0x444f37(0x26c)](_0x488f93*0x2);}),_0x95589f=_0x95589f['replace'](/(\d{10,}\.\d+)/g,_0x47dd66=>_0x17f344[_0x47dd66]||_0x47dd66);}catch(_0x3839d6){this[_0x4a0faf(0x478)]['error'](_0x4a0faf(0x2fd)+_0x3839d6),_0x95589f=_0x40bba1,_0x19a941=!0x0;}return{'result':_0x95589f,'error':_0x19a941};}[a0_0x3cfc7d(0x421)](_0x204998,_0x4da776){const _0x5414a1=a0_0x3cfc7d;if(_0x4da776[_0x5414a1(0x6ce)][_0x5414a1(0x77b)]===_0x5414a1(0x4e4)){this[_0x5414a1(0x656)](_0x5414a1(0x1fd));return;}if(_0x4da776[_0x5414a1(0x6ce)][_0x5414a1(0x4e9)]&&_0x5414a1(0x1f6)in _0x4da776[_0x5414a1(0x6ce)]['apirequest']){this[_0x5414a1(0x478)][_0x5414a1(0x4e1)](this['instanceName']+'\x20('+this[_0x5414a1(0x3d0)]['wuid']+_0x5414a1(0x16f));let _0x53aa16=JSON[_0x5414a1(0x238)](_0x4da776[_0x5414a1(0x6ce)][_0x5414a1(0x4e9)][_0x5414a1(0x1f6)],null,0x1);_0x53aa16['length']>0x2&&(_0x53aa16=_0x53aa16[_0x5414a1(0x59f)](0x1,_0x53aa16[_0x5414a1(0x11c)]-0x1)[_0x5414a1(0x1d2)]()),_0x4da776[_0x5414a1(0x6ce)][_0x5414a1(0x4e9)][_0x5414a1(0x3d8)]=_0x53aa16;}_0x4da776[_0x5414a1(0x6ce)][_0x5414a1(0x4e9)]&&_0x5414a1(0x46e)in _0x4da776[_0x5414a1(0x6ce)][_0x5414a1(0x4e9)]&&(this[_0x5414a1(0x478)][_0x5414a1(0x4e1)](this[_0x5414a1(0x1c7)]+'\x20('+this[_0x5414a1(0x3d0)][_0x5414a1(0x4ae)]+_0x5414a1(0x874)),_0x4da776['block'][_0x5414a1(0x4e9)][_0x5414a1(0x1a0)]=JSON['stringify'](_0x4da776['block'][_0x5414a1(0x4e9)][_0x5414a1(0x46e)],null,0x1)[_0x5414a1(0x1d2)]()),_0x204998[_0x5414a1(0x2e4)]['push'](_0x4da776[_0x5414a1(0x6ce)]),this[_0x5414a1(0x68b)](_0x204998[_0x5414a1(0x2e4)],_0x4da776[_0x5414a1(0x6ce)][_0x5414a1(0x724)]);}[a0_0x3cfc7d(0x68b)](_0x2eec8c,_0x499e63){const _0xec4f61=a0_0x3cfc7d;let _0x3f6ea3=_0x2eec8c[_0xec4f61(0x56c)](_0x58656c=>_0x58656c[_0xec4f61(0x724)]===_0x499e63);_0x3f6ea3['sort']((_0x140f67,_0x4fb2fa)=>_0x140f67[_0xec4f61(0x451)]-_0x4fb2fa[_0xec4f61(0x451)]),_0x3f6ea3[_0xec4f61(0x455)]((_0x21758d,_0x11ce0e)=>_0x21758d[_0xec4f61(0x451)]=_0x11ce0e+0x1);}async[a0_0x3cfc7d(0x2d1)](_0xd587be){const _0xbe1f1d=a0_0x3cfc7d;try{if(this[_0xbe1f1d(0x478)][_0xbe1f1d(0x4e1)](this[_0xbe1f1d(0x1c7)]+'\x20('+this['instance'][_0xbe1f1d(0x4ae)]+_0xbe1f1d(0x166)),!_0xd587be||!_0xd587be[_0xbe1f1d(0x7f3)]){this[_0xbe1f1d(0x656)](_0xbe1f1d(0x6ca));return;}if(!this[_0xbe1f1d(0x37f)][_0xbe1f1d(0x3dc)]['find'](_0x114806=>_0x114806[_0xbe1f1d(0x7b5)]===_0xd587be[_0xbe1f1d(0x7b5)]))throw this[_0xbe1f1d(0x478)][_0xbe1f1d(0x4e1)](this[_0xbe1f1d(0x1c7)]+'\x20('+this[_0xbe1f1d(0x3d0)][_0xbe1f1d(0x4ae)]+_0xbe1f1d(0x3f2)+_0xd587be[_0xbe1f1d(0x7b5)]+'\x27\x20não\x20encontrado'),new m(_0xbe1f1d(0x749));let _0x2156c8=await this[_0xbe1f1d(0x67f)][_0xbe1f1d(0x2dc)][_0xbe1f1d(0x36a)]({'where':{'_id':_0xd587be[_0xbe1f1d(0x7b5)]}});if(!_0x2156c8||!_0x2156c8['whoCanUse']?.[_0xbe1f1d(0x1ec)](this[_0xbe1f1d(0x3d0)][_0xbe1f1d(0x4ae)]))throw this[_0xbe1f1d(0x478)]['error'](this[_0xbe1f1d(0x1c7)]+'\x20('+this[_0xbe1f1d(0x3d0)][_0xbe1f1d(0x4ae)]+_0xbe1f1d(0x462)+_0xd587be[_0xbe1f1d(0x7b5)]+_0xbe1f1d(0x5d1)),new m(_0xbe1f1d(0x203)+_0xd587be[_0xbe1f1d(0x7b5)]+_0xbe1f1d(0x5d1));if(!_0x2156c8[_0xbe1f1d(0x849)]?.[_0xbe1f1d(0x1ec)](this['instance'][_0xbe1f1d(0x4ae)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let {replyOption:_0x4d8a66}=_0xd587be;_0x4d8a66?.[_0xbe1f1d(0x7fb)]?(this['deleteReplyOption'](_0x2156c8,_0xd587be),this[_0xbe1f1d(0x7e4)](_0x2156c8[_0xbe1f1d(0x866)],_0xd587be[_0xbe1f1d(0x7f3)][_0xbe1f1d(0x440)])):_0x4d8a66[_0xbe1f1d(0x7b5)]?(await this['updateReplyOption'](_0x2156c8,_0xd587be),this['reorderReplyOptions'](_0x2156c8[_0xbe1f1d(0x866)],_0xd587be[_0xbe1f1d(0x7f3)]['blockId'])):(this['addReplyOption'](_0x2156c8,_0xd587be),this['reorderReplyOptions'](_0x2156c8['replyOptions'],_0xd587be[_0xbe1f1d(0x7f3)][_0xbe1f1d(0x440)]));let _0x480e55=await this[_0xbe1f1d(0x67f)]['flow']['updateOne'](_0x2156c8[_0xbe1f1d(0x7b5)],_0x2156c8);if(!_0x480e55)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x480e55;}catch(_0x3dfbc7){this['throwAndLogError'](_0xbe1f1d(0x3d2)+_0x3dfbc7);}}[a0_0x3cfc7d(0x7e4)](_0x2bc4c2,_0x32dac3){const _0x8920b2=a0_0x3cfc7d;_0x2bc4c2[_0x8920b2(0x455)](_0x4cc7e4=>{const _0x49502b=_0x8920b2;_0x4cc7e4[_0x49502b(0x440)]===_0x32dac3&&_0x4cc7e4[_0x49502b(0x451)]===void 0x0&&(_0x4cc7e4['order']=0x270f);});let _0x426dd1=_0x2bc4c2['filter'](_0x516916=>_0x516916[_0x8920b2(0x440)]===_0x32dac3);_0x426dd1[_0x8920b2(0x476)]((_0x3069c5,_0x16907a)=>_0x3069c5[_0x8920b2(0x451)]-_0x16907a[_0x8920b2(0x451)]),_0x426dd1[_0x8920b2(0x455)]((_0x12c87c,_0x1efb09)=>{const _0x53246e=_0x8920b2;_0x12c87c[_0x53246e(0x451)]=_0x1efb09+0x1;}),_0x2bc4c2['forEach'](_0x7385c0=>{const _0x355fbd=_0x8920b2;if(_0x7385c0[_0x355fbd(0x440)]===_0x32dac3){let _0x4f8417=_0x426dd1[_0x355fbd(0x1c4)](_0x466e45=>_0x466e45[_0x355fbd(0x7b5)]&&_0x7385c0[_0x355fbd(0x7b5)]&&_0x466e45[_0x355fbd(0x7b5)][_0x355fbd(0x885)]()===_0x7385c0['_id'][_0x355fbd(0x885)]());_0x4f8417&&(_0x7385c0['order']=_0x4f8417['order']);}});}[a0_0x3cfc7d(0x3b2)](_0x138258,_0x2b9ba6){const _0x3e2268=a0_0x3cfc7d;let {replyOption:_0x4fb91f}=_0x2b9ba6;if(!_0x4fb91f['_id']){this['throwAndLogError'](_0x3e2268(0x6b5));return;}if(!_0x138258[_0x3e2268(0x866)]['find'](_0x5d8843=>_0x5d8843[_0x3e2268(0x7b5)][_0x3e2268(0x885)]()===_0x2b9ba6['replyOption'][_0x3e2268(0x7b5)][_0x3e2268(0x885)]())){this[_0x3e2268(0x656)](_0x3e2268(0x67c)+_0x4fb91f[_0x3e2268(0x7b5)]+_0x3e2268(0x261));return;}_0x138258[_0x3e2268(0x866)]=_0x138258[_0x3e2268(0x866)][_0x3e2268(0x56c)](_0x374609=>_0x374609[_0x3e2268(0x7b5)][_0x3e2268(0x885)]()!==_0x2b9ba6[_0x3e2268(0x7f3)][_0x3e2268(0x7b5)][_0x3e2268(0x885)]());}async[a0_0x3cfc7d(0x7f4)](_0x388dbc,_0x6a4b44){const _0x2adfb6=a0_0x3cfc7d;let _0x1c26ed=_0x388dbc['replyOptions'][_0x2adfb6(0x2d0)](_0x3b64c7=>_0x3b64c7[_0x2adfb6(0x7b5)][_0x2adfb6(0x885)]()===_0x6a4b44['replyOption'][_0x2adfb6(0x7b5)][_0x2adfb6(0x885)]());if(_0x1c26ed===-0x1){this[_0x2adfb6(0x656)](_0x2adfb6(0x67c)+_0x6a4b44['replyOption'][_0x2adfb6(0x7b5)]+_0x2adfb6(0x7e2));return;}for(let _0x5b976d in _0x6a4b44[_0x2adfb6(0x7f3)])_0x6a4b44[_0x2adfb6(0x7f3)]['hasOwnProperty'](_0x5b976d)&&(_0x388dbc[_0x2adfb6(0x866)][_0x1c26ed][_0x5b976d]=_0x6a4b44[_0x2adfb6(0x7f3)][_0x5b976d]);}[a0_0x3cfc7d(0x70e)](_0x2efdaa,_0x468aa2){const _0x283bb9=a0_0x3cfc7d;_0x2efdaa[_0x283bb9(0x866)][_0x283bb9(0x7b9)](_0x468aa2[_0x283bb9(0x7f3)]);}async[a0_0x3cfc7d(0x72a)](_0x4f3ed7){const _0x15aacf=a0_0x3cfc7d;this['logger']['verbose'](this[_0x15aacf(0x1c7)]+'\x20('+this[_0x15aacf(0x3d0)]['wuid']+_0x15aacf(0x4fa)+JSON['stringify'](_0x4f3ed7,null,0x2));try{if(this['logger'][_0x15aacf(0x4e1)](this[_0x15aacf(0x1c7)]+'\x20('+this['instance'][_0x15aacf(0x4ae)]+_0x15aacf(0x800)),!this[_0x15aacf(0x37f)][_0x15aacf(0x3dc)][_0x15aacf(0x1c4)](_0x234577=>_0x234577[_0x15aacf(0x7b5)]===_0x4f3ed7['_id']))throw this[_0x15aacf(0x478)][_0x15aacf(0x4e1)](this[_0x15aacf(0x1c7)]+'\x20('+this['instance'][_0x15aacf(0x4ae)]+_0x15aacf(0x3f2)+_0x4f3ed7['_id']+_0x15aacf(0x35d)),new m(_0x15aacf(0x749));let _0x3e19fc=await this[_0x15aacf(0x67f)][_0x15aacf(0x2dc)][_0x15aacf(0x36a)]({'where':{'_id':_0x4f3ed7[_0x15aacf(0x7b5)]}});if(!_0x3e19fc||!_0x3e19fc[_0x15aacf(0x24d)]?.['includes'](this[_0x15aacf(0x3d0)][_0x15aacf(0x4ae)]))throw this[_0x15aacf(0x478)][_0x15aacf(0x3c6)](this[_0x15aacf(0x1c7)]+'\x20('+this[_0x15aacf(0x3d0)][_0x15aacf(0x4ae)]+_0x15aacf(0x462)+_0x4f3ed7[_0x15aacf(0x7b5)]+_0x15aacf(0x5d1)),new m('Flow\x20\x27'+_0x4f3ed7[_0x15aacf(0x7b5)]+_0x15aacf(0x5d1));if(!_0x3e19fc[_0x15aacf(0x849)]?.[_0x15aacf(0x1ec)](this[_0x15aacf(0x3d0)][_0x15aacf(0x4ae)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');if(_0x4f3ed7['group']&&_0x4f3ed7['group']?.[_0x15aacf(0x7fb)]===!0x0){if(this[_0x15aacf(0x478)][_0x15aacf(0x4e1)](this[_0x15aacf(0x1c7)]+'\x20('+this[_0x15aacf(0x3d0)]['wuid']+'):\x20delete\x20=\x20true'),_0x4f3ed7[_0x15aacf(0x42f)][_0x15aacf(0x879)]===!0x0)return{'message':'Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão'};if(_0x3e19fc[_0x15aacf(0x2e4)][_0x15aacf(0x4d3)](_0x1a1e7c=>_0x1a1e7c[_0x15aacf(0x724)][_0x15aacf(0x885)]()===_0x4f3ed7[_0x15aacf(0x42f)][_0x15aacf(0x7b5)]))return this[_0x15aacf(0x478)][_0x15aacf(0x4e1)](this[_0x15aacf(0x1c7)]+'\x20('+this[_0x15aacf(0x3d0)][_0x15aacf(0x4ae)]+_0x15aacf(0x427)),{'message':'Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.'};_0x3e19fc[_0x15aacf(0x1a6)]=_0x3e19fc[_0x15aacf(0x1a6)][_0x15aacf(0x56c)](_0x592435=>_0x592435[_0x15aacf(0x7b5)][_0x15aacf(0x885)]()!==_0x4f3ed7['group'][_0x15aacf(0x7b5)]);}else{if(_0x4f3ed7['group']){if(_0x4f3ed7[_0x15aacf(0x42f)][_0x15aacf(0x879)]===!0x0)return{'message':'Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão'};if(_0x4f3ed7[_0x15aacf(0x42f)][_0x15aacf(0x7b5)]){let _0x8c5d53=_0x3e19fc[_0x15aacf(0x1a6)][_0x15aacf(0x1c4)](_0x180d2a=>_0x180d2a['_id']['toString']()===_0x4f3ed7[_0x15aacf(0x42f)][_0x15aacf(0x7b5)]);_0x8c5d53&&(_0x4f3ed7[_0x15aacf(0x42f)]['x']<0x0&&(_0x4f3ed7[_0x15aacf(0x42f)]['x']=0x0),_0x4f3ed7[_0x15aacf(0x42f)]['y']<0x0&&(_0x4f3ed7[_0x15aacf(0x42f)]['y']=0x0),Object[_0x15aacf(0x442)](_0x8c5d53,_0x4f3ed7[_0x15aacf(0x42f)]));}else _0x3e19fc[_0x15aacf(0x1a6)][_0x15aacf(0x7b9)](_0x4f3ed7[_0x15aacf(0x42f)]);}}let _0xa77d1c=await this['repository'][_0x15aacf(0x2dc)][_0x15aacf(0x104)](_0x3e19fc[_0x15aacf(0x7b5)],_0x3e19fc);if(!_0xa77d1c)throw new Error(_0x15aacf(0x59c));return _0xa77d1c;}catch(_0x147d4e){let _0x4d5e45=_0x15aacf(0x662),_0x26d1b6=_0x147d4e instanceof Error?_0x147d4e[_0x15aacf(0x70f)]:typeof _0x147d4e==_0x15aacf(0x54e)?JSON['stringify'](_0x147d4e):_0x147d4e,_0x33f6f4=_0x4d5e45+':\x20'+_0x26d1b6;throw this[_0x15aacf(0x478)][_0x15aacf(0x3c6)](this[_0x15aacf(0x1c7)]+'\x20('+this[_0x15aacf(0x3d0)][_0x15aacf(0x4ae)]+_0x15aacf(0x71a)+_0x33f6f4),new m(_0x33f6f4);}}async[a0_0x3cfc7d(0x7a2)](_0x269a1e){const _0x1e6ef4=a0_0x3cfc7d;try{if(this[_0x1e6ef4(0x478)]['verbose'](this['instanceName']+'\x20('+this[_0x1e6ef4(0x3d0)]['wuid']+_0x1e6ef4(0x80f)),!this['AutomateSystem'][_0x1e6ef4(0x3dc)][_0x1e6ef4(0x1c4)](_0x415728=>_0x415728[_0x1e6ef4(0x7b5)]===_0x269a1e[_0x1e6ef4(0x7b5)]))throw this[_0x1e6ef4(0x478)]['verbose'](this[_0x1e6ef4(0x1c7)]+'\x20('+this[_0x1e6ef4(0x3d0)][_0x1e6ef4(0x4ae)]+_0x1e6ef4(0x3f2)+_0x269a1e['_id']+'\x27\x20não\x20encontrado'),new m(_0x1e6ef4(0x749));let _0x1423a0=await this[_0x1e6ef4(0x67f)][_0x1e6ef4(0x2dc)][_0x1e6ef4(0x36a)]({'where':{'_id':_0x269a1e[_0x1e6ef4(0x7b5)]}});if(!_0x1423a0||!_0x1423a0['whoCanUse']?.[_0x1e6ef4(0x1ec)](this[_0x1e6ef4(0x3d0)][_0x1e6ef4(0x4ae)]))throw this[_0x1e6ef4(0x478)][_0x1e6ef4(0x3c6)](this[_0x1e6ef4(0x1c7)]+'\x20('+this[_0x1e6ef4(0x3d0)][_0x1e6ef4(0x4ae)]+_0x1e6ef4(0x462)+_0x269a1e[_0x1e6ef4(0x7b5)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x1e6ef4(0x203)+_0x269a1e[_0x1e6ef4(0x7b5)]+_0x1e6ef4(0x5d1));if(!_0x1423a0[_0x1e6ef4(0x849)]?.['includes'](this[_0x1e6ef4(0x3d0)][_0x1e6ef4(0x4ae)]))throw new m(_0x1e6ef4(0x4c6));let _0x30f4f9=!0x1;if(_0x269a1e[_0x1e6ef4(0x45f)]?.['delete']===!0x0)_0x1423a0[_0x1e6ef4(0x51a)]=_0x1423a0[_0x1e6ef4(0x51a)][_0x1e6ef4(0x56c)](_0x5c65ce=>_0x5c65ce&&_0x269a1e[_0x1e6ef4(0x45f)]&&_0x5c65ce[_0x1e6ef4(0x7b5)]&&_0x269a1e['condition']['_id']&&_0x5c65ce[_0x1e6ef4(0x7b5)][_0x1e6ef4(0x885)]()!==_0x269a1e[_0x1e6ef4(0x45f)]['_id']['toString']()),_0x30f4f9=!0x0;else{let _0x550e18=_0x1423a0[_0x1e6ef4(0x51a)][_0x1e6ef4(0x1c4)](_0x3fcb88=>_0x3fcb88&&_0x269a1e['condition']&&_0x3fcb88[_0x1e6ef4(0x7b5)]&&_0x269a1e[_0x1e6ef4(0x45f)][_0x1e6ef4(0x7b5)]&&_0x3fcb88['_id'][_0x1e6ef4(0x885)]()===_0x269a1e[_0x1e6ef4(0x45f)]['_id']['toString']());_0x550e18?(_0x30f4f9=_0x550e18[_0x1e6ef4(0x451)]!==_0x269a1e[_0x1e6ef4(0x45f)][_0x1e6ef4(0x451)],Object[_0x1e6ef4(0x442)](_0x550e18,_0x269a1e[_0x1e6ef4(0x45f)])):(_0x1423a0[_0x1e6ef4(0x51a)]['push'](_0x269a1e[_0x1e6ef4(0x45f)]),_0x30f4f9=!0x0);}if(_0x30f4f9){_0x1423a0[_0x1e6ef4(0x51a)]['sort']((_0x7d31cb,_0x3386f6)=>_0x7d31cb[_0x1e6ef4(0x451)]>_0x3386f6[_0x1e6ef4(0x451)]?0x1:_0x3386f6[_0x1e6ef4(0x451)]>_0x7d31cb[_0x1e6ef4(0x451)]?-0x1:0x0);for(let _0x41563d=0x0;_0x41563d<_0x1423a0[_0x1e6ef4(0x51a)]['length'];_0x41563d++)_0x1423a0[_0x1e6ef4(0x51a)][_0x41563d][_0x1e6ef4(0x451)]=_0x41563d+0x1;_0x1423a0['conditions'][_0x1e6ef4(0x11c)]>0x0&&(_0x1423a0[_0x1e6ef4(0x51a)][0x0][_0x1e6ef4(0x764)]=_0x1e6ef4(0x85e));}let _0xec5eec=await this['repository']['flow'][_0x1e6ef4(0x104)](_0x1423a0[_0x1e6ef4(0x7b5)],_0x1423a0);if(!_0xec5eec)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0xec5eec;}catch(_0x2b578c){let _0x51ea40=_0x1e6ef4(0x19c),_0xde158=_0x2b578c instanceof Error?_0x2b578c[_0x1e6ef4(0x70f)]:typeof _0x2b578c==_0x1e6ef4(0x54e)?JSON[_0x1e6ef4(0x238)](_0x2b578c):_0x2b578c,_0x5f310e=_0x51ea40+':\x20'+_0xde158;throw this[_0x1e6ef4(0x478)][_0x1e6ef4(0x3c6)](this[_0x1e6ef4(0x1c7)]+'\x20('+this[_0x1e6ef4(0x3d0)]['wuid']+'):\x20'+_0x5f310e),new m(_0x5f310e);}}async[a0_0x3cfc7d(0x5ef)](_0x2a8459){const _0x1c175b=a0_0x3cfc7d;try{if(this[_0x1c175b(0x478)]['verbose'](this[_0x1c175b(0x1c7)]+'\x20('+this[_0x1c175b(0x3d0)]['wuid']+_0x1c175b(0x1a5)),!this['AutomateSystem'][_0x1c175b(0x3dc)]['find'](_0x73d6b9=>_0x73d6b9[_0x1c175b(0x7b5)]===_0x2a8459[_0x1c175b(0x7b5)]))throw this[_0x1c175b(0x478)]['verbose'](this[_0x1c175b(0x1c7)]+'\x20('+this[_0x1c175b(0x3d0)][_0x1c175b(0x4ae)]+_0x1c175b(0x3f2)+_0x2a8459[_0x1c175b(0x7b5)]+_0x1c175b(0x35d)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x2d3b6a=await this['repository'][_0x1c175b(0x2dc)][_0x1c175b(0x36a)]({'where':{'_id':_0x2a8459['_id']}});if(!_0x2d3b6a||!_0x2d3b6a[_0x1c175b(0x24d)]?.['includes'](this['instance']['wuid']))throw this[_0x1c175b(0x478)][_0x1c175b(0x3c6)](this[_0x1c175b(0x1c7)]+'\x20('+this['instance'][_0x1c175b(0x4ae)]+_0x1c175b(0x462)+_0x2a8459[_0x1c175b(0x7b5)]+_0x1c175b(0x5d1)),new m(_0x1c175b(0x203)+_0x2a8459['_id']+_0x1c175b(0x5d1));if(!_0x2d3b6a[_0x1c175b(0x849)]?.[_0x1c175b(0x1ec)](this[_0x1c175b(0x3d0)][_0x1c175b(0x4ae)]))throw new m(_0x1c175b(0x4c6));let _0x386ad3=!0x1;if(_0x2a8459[_0x1c175b(0x7c0)]?.['delete']===!0x0)_0x2d3b6a[_0x1c175b(0x7c9)]=_0x2d3b6a[_0x1c175b(0x7c9)][_0x1c175b(0x56c)](_0xdaad57=>_0xdaad57&&_0x2a8459[_0x1c175b(0x7c0)]&&_0xdaad57[_0x1c175b(0x7b5)]&&_0x2a8459['varedit']['_id']&&_0xdaad57[_0x1c175b(0x7b5)]['toString']()!==_0x2a8459[_0x1c175b(0x7c0)]['_id'][_0x1c175b(0x885)]()),_0x386ad3=!0x0;else{let _0x4ef119=_0x2d3b6a[_0x1c175b(0x7c9)][_0x1c175b(0x1c4)](_0x1aa4bc=>_0x1aa4bc&&_0x2a8459[_0x1c175b(0x7c0)]&&_0x1aa4bc[_0x1c175b(0x7b5)]&&_0x2a8459[_0x1c175b(0x7c0)][_0x1c175b(0x7b5)]&&_0x1aa4bc['_id'][_0x1c175b(0x885)]()===_0x2a8459[_0x1c175b(0x7c0)][_0x1c175b(0x7b5)][_0x1c175b(0x885)]());_0x4ef119?(_0x386ad3=_0x4ef119[_0x1c175b(0x451)]!==_0x2a8459[_0x1c175b(0x7c0)][_0x1c175b(0x451)],Object[_0x1c175b(0x442)](_0x4ef119,_0x2a8459[_0x1c175b(0x7c0)])):(_0x2d3b6a[_0x1c175b(0x7c9)][_0x1c175b(0x7b9)](_0x2a8459['varedit']),_0x386ad3=!0x0);}if(_0x386ad3){_0x2d3b6a[_0x1c175b(0x7c9)][_0x1c175b(0x476)]((_0xffa964,_0x27fa4a)=>_0xffa964[_0x1c175b(0x451)]>_0x27fa4a[_0x1c175b(0x451)]?0x1:_0x27fa4a['order']>_0xffa964[_0x1c175b(0x451)]?-0x1:0x0);for(let _0x3c8099=0x0;_0x3c8099<_0x2d3b6a[_0x1c175b(0x7c9)]['length'];_0x3c8099++)_0x2d3b6a[_0x1c175b(0x7c9)][_0x3c8099]['order']=_0x3c8099+0x1;}let _0x53e1b9=await this['repository'][_0x1c175b(0x2dc)]['updateOne'](_0x2d3b6a[_0x1c175b(0x7b5)],_0x2d3b6a);if(!_0x53e1b9)throw new Error(_0x1c175b(0x59c));return _0x53e1b9;}catch(_0x2bb1a3){let _0x4c819b=_0x1c175b(0x19c),_0x219ef9=_0x2bb1a3 instanceof Error?_0x2bb1a3[_0x1c175b(0x70f)]:typeof _0x2bb1a3=='object'?JSON[_0x1c175b(0x238)](_0x2bb1a3):_0x2bb1a3,_0x546fd0=_0x4c819b+':\x20'+_0x219ef9;throw this[_0x1c175b(0x478)][_0x1c175b(0x3c6)](this[_0x1c175b(0x1c7)]+'\x20('+this[_0x1c175b(0x3d0)][_0x1c175b(0x4ae)]+_0x1c175b(0x71a)+_0x546fd0),new m(_0x546fd0);}}async[a0_0x3cfc7d(0x42e)](_0xe825a1){const _0x368f63=a0_0x3cfc7d;try{if(this[_0x368f63(0x478)]['verbose'](this[_0x368f63(0x1c7)]+'\x20('+this[_0x368f63(0x3d0)][_0x368f63(0x4ae)]+_0x368f63(0x54b)),!this['AutomateSystem'][_0x368f63(0x3dc)]['find'](_0x2cb315=>_0x2cb315[_0x368f63(0x7b5)]===_0xe825a1['_id']))throw this[_0x368f63(0x478)][_0x368f63(0x4e1)](this[_0x368f63(0x1c7)]+'\x20('+this[_0x368f63(0x3d0)]['wuid']+_0x368f63(0x3f2)+_0xe825a1['_id']+'\x27\x20não\x20encontrado'),new m(_0x368f63(0x749));let _0x269116=await this[_0x368f63(0x67f)]['flow'][_0x368f63(0x36a)]({'where':{'_id':_0xe825a1['_id']}});if(!_0x269116||!_0x269116['whoCanUse']?.['includes'](this[_0x368f63(0x3d0)]['wuid']))throw this[_0x368f63(0x478)][_0x368f63(0x3c6)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x368f63(0x462)+_0xe825a1[_0x368f63(0x7b5)]+_0x368f63(0x5d1)),new m(_0x368f63(0x203)+_0xe825a1[_0x368f63(0x7b5)]+_0x368f63(0x5d1));if(!_0x269116[_0x368f63(0x849)]?.[_0x368f63(0x1ec)](this[_0x368f63(0x3d0)]['wuid']))throw new m(_0x368f63(0x4c6));_0xe825a1['variable'][_0x368f63(0x75b)]=_0xe825a1[_0x368f63(0x747)]['name'][_0x368f63(0x1d2)](),_0xe825a1[_0x368f63(0x747)][_0x368f63(0x75b)]['startsWith']('_')&&(_0xe825a1[_0x368f63(0x747)][_0x368f63(0x75b)]=_0xe825a1[_0x368f63(0x747)]['name']['substring'](0x1)),_0xe825a1['variable'][_0x368f63(0x75b)]=_0xe825a1['variable'][_0x368f63(0x75b)][_0x368f63(0x1d2)]();let _0xc7d74a=_0x269116[_0x368f63(0x1e8)]['find'](_0x52ebb9=>_0x52ebb9[_0x368f63(0x75b)]===_0xe825a1[_0x368f63(0x747)][_0x368f63(0x75b)]);if(_0xc7d74a?.[_0x368f63(0x6ac)]===!0x0)throw new Error('Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.');if(_0xe825a1[_0x368f63(0x747)]?.['delete']===!0x0){if(!_0xc7d74a)return{'message':_0x368f63(0x23b)};_0x269116[_0x368f63(0x1e8)]=_0x269116[_0x368f63(0x1e8)][_0x368f63(0x56c)](_0x33b787=>_0x33b787['name']!==_0xe825a1[_0x368f63(0x747)][_0x368f63(0x75b)]);}else _0xc7d74a?Object[_0x368f63(0x442)](_0xc7d74a,_0xe825a1['variable']):_0x269116['variables'][_0x368f63(0x7b9)](_0xe825a1[_0x368f63(0x747)]);let _0x313877=await this[_0x368f63(0x67f)][_0x368f63(0x2dc)][_0x368f63(0x104)](_0x269116['_id'],_0x269116);if(!_0x313877)throw new Error('Erro\x20ao\x20atualizar\x20o\x20flow.');return _0x313877;}catch(_0x37a192){let _0x405c86='Erro\x20ao\x20editar\x20variável\x20do\x20fluxo',_0x246222=_0x37a192 instanceof Error?_0x37a192[_0x368f63(0x70f)]:typeof _0x37a192==_0x368f63(0x54e)?JSON[_0x368f63(0x238)](_0x37a192):_0x37a192,_0x3592d7=_0x405c86+':\x20'+_0x246222;throw this[_0x368f63(0x478)]['error'](this[_0x368f63(0x1c7)]+'\x20('+this['instance'][_0x368f63(0x4ae)]+_0x368f63(0x71a)+_0x3592d7),new m(_0x3592d7);}}async[a0_0x3cfc7d(0x868)](_0x52fa99){const _0x50d5ec=a0_0x3cfc7d;let _0x2a42ab=null;try{if(!this[_0x50d5ec(0x37f)]?.[_0x50d5ec(0x55d)][_0x50d5ec(0x119)])throw new m(_0x50d5ec(0x58f));this['logger'][_0x50d5ec(0x4e1)](this[_0x50d5ec(0x1c7)]+'\x20('+this[_0x50d5ec(0x3d0)]['wuid']+_0x50d5ec(0x361));let _0x596ba9=(await this['whatsappNumber']({'numbers':[_0x52fa99[_0x50d5ec(0x6d9)]]}))[0x0];if(!_0x596ba9[_0x50d5ec(0x78a)]&&!(0x0,w[_0x50d5ec(0x6e5)])(_0x596ba9[_0x50d5ec(0x69c)])&&!_0x596ba9[_0x50d5ec(0x69c)][_0x50d5ec(0x1ec)]('@broadcast'))throw _0x2a42ab=JSON[_0x50d5ec(0x238)](_0x596ba9,null,0x2),new m(_0x596ba9);let _0x509ba8;if(_0x52fa99[_0x50d5ec(0x75b)][_0x50d5ec(0x11c)]===0x24&&/^[0-9a-fA-F-]{36}$/[_0x50d5ec(0x3bd)](_0x52fa99[_0x50d5ec(0x75b)])?_0x509ba8=this[_0x50d5ec(0x37f)][_0x50d5ec(0x3dc)]['find'](_0x492dbd=>_0x492dbd[_0x50d5ec(0x7b5)]===_0x52fa99[_0x50d5ec(0x75b)]):_0x509ba8=this[_0x50d5ec(0x37f)][_0x50d5ec(0x3dc)][_0x50d5ec(0x1c4)](_0x59c860=>_0x59c860[_0x50d5ec(0x75b)]===_0x52fa99[_0x50d5ec(0x75b)]),!_0x509ba8)throw this['logger'][_0x50d5ec(0x4e1)](this[_0x50d5ec(0x1c7)]+'\x20('+this[_0x50d5ec(0x3d0)][_0x50d5ec(0x4ae)]+_0x50d5ec(0x3f2)+_0x52fa99[_0x50d5ec(0x75b)]+_0x50d5ec(0x35d)),new m(_0x50d5ec(0x749));let _0x401ef2=await this['repository'][_0x50d5ec(0x2dc)][_0x50d5ec(0x36a)]({'where':{'_id':_0x509ba8[_0x50d5ec(0x7b5)]}});if(!_0x401ef2||!_0x401ef2['whoCanUse']?.['includes'](this[_0x50d5ec(0x3d0)]['wuid']))throw this[_0x50d5ec(0x478)][_0x50d5ec(0x3c6)](this[_0x50d5ec(0x1c7)]+'\x20('+this['instance']['wuid']+_0x50d5ec(0x462)+_0x509ba8['_id']+_0x50d5ec(0x5d1)),_0x2a42ab=_0x50d5ec(0x203)+_0x509ba8[_0x50d5ec(0x7b5)]+_0x50d5ec(0x5d1),new m(_0x2a42ab);let _0x133099=await this[_0x50d5ec(0x7c4)](_0x401ef2,_0x596ba9['jid'],_0x52fa99[_0x50d5ec(0x1f1)]);if(_0x133099){this[_0x50d5ec(0x478)][_0x50d5ec(0x4e1)](this[_0x50d5ec(0x1c7)]+'\x20('+this[_0x50d5ec(0x3d0)][_0x50d5ec(0x4ae)]+_0x50d5ec(0x171));let _0x4750f4=await this[_0x50d5ec(0x55a)](_0x133099);return _0x4750f4&&await this[_0x50d5ec(0x545)](_0x133099,_0x4750f4),{'message':_0x50d5ec(0x499)+_0x52fa99['remoteJid']};}}catch(_0x45b53e){if(this[_0x50d5ec(0x478)]['error'](this[_0x50d5ec(0x1c7)]+'\x20('+this[_0x50d5ec(0x3d0)][_0x50d5ec(0x4ae)]+_0x50d5ec(0x82c)+(_0x45b53e instanceof Error?_0x45b53e[_0x50d5ec(0x70f)]:JSON[_0x50d5ec(0x238)](_0x45b53e,null,0x2))),_0x2a42ab=_0x45b53e instanceof Error?_0x45b53e[_0x50d5ec(0x70f)]:JSON[_0x50d5ec(0x238)](_0x45b53e,null,0x2),_0x2a42ab)throw new m(_0x50d5ec(0x247)+_0x2a42ab);}}async['startFlowWebhook'](_0x195f1c,_0x291a59,_0x379b61){const _0x446047=a0_0x3cfc7d;let _0x4a6b99=null;try{if(!this[_0x446047(0x37f)]?.[_0x446047(0x55d)][_0x446047(0x119)])throw new m('Fluxos\x20não\x20estão\x20ativados');if(this['logger'][_0x446047(0x4e1)](this[_0x446047(0x1c7)]+'\x20('+this[_0x446047(0x3d0)][_0x446047(0x4ae)]+_0x446047(0x361)),_0x291a59){let _0x30a055=(await this['whatsappNumber']({'numbers':[_0x291a59]}))[0x0];if(!_0x30a055[_0x446047(0x78a)]&&!(0x0,w[_0x446047(0x6e5)])(_0x30a055[_0x446047(0x69c)])&&!_0x30a055['jid']['includes'](_0x446047(0x65b)))throw _0x4a6b99=JSON[_0x446047(0x238)](_0x30a055,null,0x2),new m(_0x30a055);_0x291a59=_0x30a055[_0x446047(0x69c)];}else _0x291a59||(_0x291a59=(0x0,Q['v4'])());let _0x3ab15e=await this['repository']['flow'][_0x446047(0x36a)]({'where':{'_id':_0x195f1c}});if(!_0x3ab15e||!_0x3ab15e[_0x446047(0x24d)]?.[_0x446047(0x1ec)](this['instance']['wuid']))throw this['logger'][_0x446047(0x3c6)](this[_0x446047(0x1c7)]+'\x20('+this['instance'][_0x446047(0x4ae)]+_0x446047(0x462)+_0x195f1c+_0x446047(0x5d1)),new m(_0x446047(0x203)+_0x195f1c+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x4bd728=await this[_0x446047(0x7c4)](_0x3ab15e,_0x291a59,null);if(_0x4bd728){this[_0x446047(0x478)][_0x446047(0x4e1)](this[_0x446047(0x1c7)]+'\x20('+this['instance'][_0x446047(0x4ae)]+_0x446047(0x3fa));let _0x41f382;if(_0x379b61){let _0x4f2ad4=_0x4bd728[_0x446047(0x69b)][_0x446047(0x481)],_0x195b04=this[_0x446047(0x839)](_0x379b61);Object['assign'](_0x4f2ad4,_0x195b04),_0x4bd728[_0x446047(0x69b)][_0x446047(0x481)]=_0x4f2ad4,_0x41f382={'error':!0x1,'apiResponse':_0x379b61};}let _0xfecdab=await this[_0x446047(0x55a)](_0x4bd728);return _0xfecdab&&await this[_0x446047(0x545)](_0x4bd728,_0xfecdab),{'message':_0x446047(0x6d4)};}}catch(_0x4fbeb4){if(this[_0x446047(0x478)][_0x446047(0x3c6)](this[_0x446047(0x1c7)]+'\x20('+this[_0x446047(0x3d0)][_0x446047(0x4ae)]+_0x446047(0x82c)+(_0x4fbeb4 instanceof Error?_0x4fbeb4[_0x446047(0x70f)]:JSON[_0x446047(0x238)](_0x4fbeb4,null,0x2))),_0x4a6b99=_0x4fbeb4 instanceof Error?_0x4fbeb4[_0x446047(0x70f)]:JSON[_0x446047(0x238)](_0x4fbeb4,null,0x2),_0x4a6b99)throw new m(_0x446047(0x247)+_0x4a6b99);}}async['closeExistingConversations'](_0x420717){const _0x4b96ee=a0_0x3cfc7d;try{let _0xe348b3={'remoteJid':_0x420717,'status':_0x4b96ee(0x19a)},_0x19dc6c={'status':_0x4b96ee(0x831)},_0x11d339=await this[_0x4b96ee(0x67f)]['flowConversation'][_0x4b96ee(0x609)](_0xe348b3,_0x19dc6c,this[_0x4b96ee(0x3d0)][_0x4b96ee(0x4ae)]);return this[_0x4b96ee(0x478)]['verbose'](this[_0x4b96ee(0x1c7)]+'\x20('+this['instance'][_0x4b96ee(0x4ae)]+_0x4b96ee(0x1d9)),_0x11d339;}catch(_0x4b5479){throw this['logger'][_0x4b96ee(0x3c6)](this['instanceName']+'\x20('+this['instance'][_0x4b96ee(0x4ae)]+_0x4b96ee(0x61a)+_0x4b5479[_0x4b96ee(0x70f)]),_0x4b5479;}}async[a0_0x3cfc7d(0x7c4)](_0x50c9aa,_0x330a39,_0x4aefed){const _0x3a6b92=a0_0x3cfc7d;this[_0x3a6b92(0x478)][_0x3a6b92(0x4e1)](this[_0x3a6b92(0x1c7)]+'\x20('+this[_0x3a6b92(0x3d0)][_0x3a6b92(0x4ae)]+_0x3a6b92(0x581)),await this[_0x3a6b92(0x1df)](_0x330a39);try{let _0x4073a0=require('mongodb')[_0x3a6b92(0x810)],_0xa65d17=Date[_0x3a6b92(0x6aa)](),_0x3af8b3=_0x3a6b92(0x4e4),_0x4e432c={},_0x500e33={},_0x3ab055=this['AutomateSystem'][_0x3a6b92(0x3dc)][_0x3a6b92(0x1c4)](_0x2d4bf6=>_0x2d4bf6[_0x3a6b92(0x7b5)]===_0x50c9aa[_0x3a6b92(0x7b5)]?.[_0x3a6b92(0x885)]()),_0x58807c=_0x3ab055?.[_0x3a6b92(0x5f0)]??_0x50c9aa[_0x3a6b92(0x5f0)]??0x0,_0xc124d3=_0x3ab055?.[_0x3a6b92(0x463)]??_0x50c9aa['readMessages']??!0x1,_0x1267bd={'flowId':_0x50c9aa[_0x3a6b92(0x7b5)],..._0x50c9aa,'chatLog':null},_0x2f622d=await this[_0x3a6b92(0x33c)](_0x1267bd['variables']),_0x2e9c2e=await this[_0x3a6b92(0x529)](_0x330a39),_0x5351c1={..._0x2f622d,..._0x2e9c2e,'_remoteJid':_0x330a39},_0x4ea227={'lastReceivedMessage':_0x4e432c,'lastSendMessage':_0x500e33,'lastBlockId':_0x3af8b3,'lastCondition':!0x0,'realVariables':_0x5351c1};_0x1267bd[_0x3a6b92(0x69b)]=_0x4ea227,_0x1267bd['chatLog'][_0x3a6b92(0x481)]={..._0x5351c1,..._0x4aefed},delete _0x1267bd['_id'],_0x1267bd[_0x3a6b92(0x7b5)]=new _0x4073a0(),_0x1267bd[_0x3a6b92(0x7a9)]=_0xa65d17,_0x1267bd['status']=_0x3a6b92(0x19a),_0x1267bd['remoteJid']=_0x330a39,_0x1267bd['minutesToClose']=_0x58807c,_0x1267bd[_0x3a6b92(0x463)]=_0xc124d3,_0x1267bd['_id']=_0x50c9aa['_id'];let _0x2c59fd=await this[_0x3a6b92(0x67f)][_0x3a6b92(0x86b)][_0x3a6b92(0x104)](_0x1267bd['_id'],_0x1267bd,this['instance']['wuid']);return this[_0x3a6b92(0x478)]['verbose'](this[_0x3a6b92(0x1c7)]+'\x20('+this[_0x3a6b92(0x3d0)]['wuid']+_0x3a6b92(0x3bf)),_0x2c59fd?_0x1267bd:null;}catch(_0x3101db){let _0x4ace2b=_0x3a6b92(0x3a3),_0x934e1a=_0x3101db instanceof Error?_0x3101db[_0x3a6b92(0x70f)]:typeof _0x3101db==_0x3a6b92(0x54e)?JSON[_0x3a6b92(0x238)](_0x3101db):_0x3101db,_0xb958ba=_0x4ace2b+':\x20'+_0x934e1a;throw this[_0x3a6b92(0x478)][_0x3a6b92(0x3c6)](this[_0x3a6b92(0x1c7)]+'\x20('+this[_0x3a6b92(0x3d0)][_0x3a6b92(0x4ae)]+'):\x20'+_0xb958ba),new m(_0xb958ba);}}async[a0_0x3cfc7d(0x168)](_0x4e67e){const _0x5a3766=a0_0x3cfc7d;try{this[_0x5a3766(0x478)][_0x5a3766(0x4e1)](this[_0x5a3766(0x1c7)]+'\x20('+this[_0x5a3766(0x3d0)]['wuid']+_0x5a3766(0x266)),this[_0x5a3766(0x478)][_0x5a3766(0x4e1)](this[_0x5a3766(0x1c7)]+'\x20('+this['instance']['wuid']+'):\x20Query\x20params:\x20'+_0x4e67e);let _0x3a6db9={'where':{'_id':_0x4e67e}};return await this['repository'][_0x5a3766(0x86b)][_0x5a3766(0x36a)](_0x3a6db9,this[_0x5a3766(0x3d0)]['wuid']);}catch(_0x5308d0){let _0x3c500a=_0x5a3766(0x3ec),_0x916a38=_0x5308d0 instanceof Error?_0x5308d0[_0x5a3766(0x70f)]:typeof _0x5308d0==_0x5a3766(0x54e)?JSON['stringify'](_0x5308d0):_0x5308d0,_0x49cf5f=_0x3c500a+':\x20'+_0x916a38;throw this['logger'][_0x5a3766(0x3c6)](this[_0x5a3766(0x1c7)]+'\x20('+this[_0x5a3766(0x3d0)][_0x5a3766(0x4ae)]+_0x5a3766(0x71a)+_0x49cf5f),new m(_0x49cf5f);}}async[a0_0x3cfc7d(0x7c3)](_0x44793d){const _0x37cae9=a0_0x3cfc7d;try{return this[_0x37cae9(0x478)][_0x37cae9(0x4e1)](this[_0x37cae9(0x1c7)]+'\x20('+this[_0x37cae9(0x3d0)]['wuid']+_0x37cae9(0x397)),await this[_0x37cae9(0x67f)][_0x37cae9(0x86b)]['find'](_0x44793d,this[_0x37cae9(0x3d0)][_0x37cae9(0x4ae)]);}catch(_0xfed25d){let _0x1b30af='Erro\x20ao\x20buscar\x20conversas',_0x54b0a1=_0xfed25d instanceof Error?_0xfed25d['message']:typeof _0xfed25d==_0x37cae9(0x54e)?JSON[_0x37cae9(0x238)](_0xfed25d):_0xfed25d,_0x2b1182=_0x1b30af+':\x20'+_0x54b0a1;throw this[_0x37cae9(0x478)]['error'](this[_0x37cae9(0x1c7)]+'\x20('+this[_0x37cae9(0x3d0)]['wuid']+_0x37cae9(0x71a)+_0x2b1182),new m(_0x2b1182);}}async[a0_0x3cfc7d(0x881)](_0xf3d266){const _0x5055b3=a0_0x3cfc7d;try{return this[_0x5055b3(0x478)][_0x5055b3(0x4e1)](this[_0x5055b3(0x1c7)]+'\x20('+this[_0x5055b3(0x3d0)][_0x5055b3(0x4ae)]+_0x5055b3(0x74f)),this['logger'][_0x5055b3(0x4e1)](this[_0x5055b3(0x1c7)]+'\x20('+this[_0x5055b3(0x3d0)][_0x5055b3(0x4ae)]+'):\x20Query\x20params:'+_0xf3d266),(await this[_0x5055b3(0x67f)][_0x5055b3(0x86b)][_0x5055b3(0x3a4)]({'where':{'_id':_0xf3d266[_0x5055b3(0x7b5)]}},this[_0x5055b3(0x3d0)][_0x5055b3(0x4ae)]))[_0x5055b3(0x55c)]===0x0?{'message':_0x5055b3(0x4de)}:{'message':'Conversa\x20deletada\x20com\x20sucesso.'};}catch(_0xf87f71){let _0x48eecb='Erro\x20ao\x20deletar\x20a\x20conversa',_0x9f58ef=_0xf87f71 instanceof Error?_0xf87f71['message']:typeof _0xf87f71==_0x5055b3(0x54e)?JSON['stringify'](_0xf87f71):_0xf87f71,_0x8c7d32=_0x48eecb+':\x20'+_0x9f58ef;throw this[_0x5055b3(0x478)][_0x5055b3(0x3c6)](this[_0x5055b3(0x1c7)]+'\x20('+this[_0x5055b3(0x3d0)]['wuid']+'):\x20'+_0x8c7d32),new m(_0x8c7d32);}}async['editConversation'](_0x1810fc){const _0x4d8006=a0_0x3cfc7d;try{let {_id:_0x113bf7,chatLog:_0x270b66,status:_0x5f3314}=_0x1810fc;if(!_0x113bf7)return{'message':'O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.'};let _0xe2564c={};if(_0x5f3314!==void 0x0&&(_0xe2564c[_0x4d8006(0x204)]=_0x5f3314),Object[_0x4d8006(0x1a4)](_0xe2564c)[_0x4d8006(0x11c)]===0x0)return{'message':_0x4d8006(0x18f)};let _0x1c393f=await this[_0x4d8006(0x67f)]['flowConversation']['updateOne'](_0x113bf7,_0xe2564c,this[_0x4d8006(0x3d0)]['wuid']);return _0x1c393f||{'message':_0x4d8006(0x7ed)};}catch(_0x42c872){let _0x4721a3=_0x4d8006(0x636),_0x4a46b6=_0x42c872 instanceof Error?_0x42c872['message']:typeof _0x42c872==_0x4d8006(0x54e)?JSON[_0x4d8006(0x238)](_0x42c872):_0x42c872,_0x312b84=_0x4721a3+':\x20'+_0x4a46b6;throw this[_0x4d8006(0x478)][_0x4d8006(0x3c6)](this['instanceName']+'\x20('+this[_0x4d8006(0x3d0)]['wuid']+_0x4d8006(0x71a)+_0x312b84),new m(_0x312b84);}}async[a0_0x3cfc7d(0x53f)](_0x35f06b){const _0x4da48b=a0_0x3cfc7d;try{_0x35f06b[_0x4da48b(0x7b5)]=this['createJid'](_0x35f06b[_0x4da48b(0x7b5)]);let _0x4472e5=await this[_0x4da48b(0x67f)][_0x4da48b(0x52b)][_0x4da48b(0x36a)]({'where':{'_id':_0x35f06b[_0x4da48b(0x7b5)]}},this[_0x4da48b(0x3d0)][_0x4da48b(0x4ae)]);if(!_0x4472e5)throw new m(_0x4da48b(0x6b6));let {_id:_0x257756,leadInfo:_0xee8e56}=_0x35f06b;if(!_0x257756)throw new Error('O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.');if(_0x35f06b[_0x4da48b(0x7fb)]===_0x4da48b(0x35a))return await this[_0x4da48b(0x373)](_0x35f06b[_0x4da48b(0x7b5)]),await this[_0x4da48b(0x67f)]['chat'][_0x4da48b(0x7fb)]({'where':{'_id':_0x35f06b[_0x4da48b(0x7b5)]}},this[_0x4da48b(0x3d0)][_0x4da48b(0x4ae)]),await this[_0x4da48b(0x67f)][_0x4da48b(0x70f)][_0x4da48b(0x7fb)]({'where':{'key':{'remoteJid':_0x35f06b[_0x4da48b(0x7b5)]}}},this[_0x4da48b(0x3d0)][_0x4da48b(0x4ae)]),_0x35f06b=await this[_0x4da48b(0x67f)]['chat'][_0x4da48b(0x104)]({'where':{'_id':_0x35f06b[_0x4da48b(0x7b5)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x4da48b(0x3d0)][_0x4da48b(0x4ae)]),F(this[_0x4da48b(0x1c7)],'chats',{'chat':_0x35f06b}),{'message':_0x4da48b(0x692)};if(_0x35f06b['delete']==='messages')return await this[_0x4da48b(0x67f)][_0x4da48b(0x70f)][_0x4da48b(0x7fb)]({'where':{'key':{'remoteJid':_0x35f06b[_0x4da48b(0x7b5)]}}},this[_0x4da48b(0x3d0)][_0x4da48b(0x4ae)]),_0x35f06b=await this['repository'][_0x4da48b(0x52b)][_0x4da48b(0x104)]({'where':{'_id':_0x35f06b['_id']}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x4da48b(0x3d0)]['wuid']),F(this['instanceName'],'chats',{'chat':_0x35f06b}),{'message':'Mensagens\x20deletadas\x20com\x20sucesso.'};let _0x286cea=(_0x288b3d,_0x401991,_0x58ed8b)=>{const _0x3d61e0=_0x4da48b;_0x288b3d&&_0x58ed8b[_0x3d61e0(0x455)](_0xccb9e5=>{const _0x2eec25=_0x3d61e0;_0x288b3d[_0xccb9e5]!==void 0x0&&(_0x401991[_0x2eec25(0x377)+_0xccb9e5]=_0x288b3d[_0xccb9e5]);});},_0x1dad81={};if(_0x4da48b(0x5f2)in _0x35f06b&&(this['logger'][_0x4da48b(0x4e1)](this[_0x4da48b(0x1c7)]+'\x20('+this[_0x4da48b(0x3d0)][_0x4da48b(0x4ae)]+_0x4da48b(0x723)+_0x35f06b[_0x4da48b(0x7b5)]),_0x35f06b[_0x4da48b(0x5f2)]=_0x35f06b[_0x4da48b(0x5f2)]===0x0?null:-0x1,await this[_0x4da48b(0x495)][_0x4da48b(0x106)]({'mute':_0x35f06b[_0x4da48b(0x5f2)]},_0x35f06b[_0x4da48b(0x7b5)]),_0x1dad81[_0x4da48b(0x5f2)]=Number(_0x35f06b[_0x4da48b(0x5f2)])),_0xee8e56&&(_0x286cea(_0xee8e56,_0x1dad81,[_0x4da48b(0x73a),'nomecompleto','email',_0x4da48b(0x651),_0x4da48b(0x204),'notas','tags',_0x4da48b(0x15f),_0x4da48b(0x7f7),_0x4da48b(0x2c4),_0x4da48b(0x1ee)]),Array[_0x4da48b(0x2f5)](_0xee8e56[_0x4da48b(0x516)])&&(_0x1dad81['leadInfo.customFields']=_0xee8e56['customFields'][_0x4da48b(0x733)](_0x1e52d6=>({'_id':_0x1e52d6['_id'],'value':_0x1e52d6[_0x4da48b(0x46c)]}))),_0x35f06b[_0x4da48b(0x6ac)]['etiquetas']!==void 0x0)){let _0x580b7d=await this[_0x4da48b(0x67f)][_0x4da48b(0x1d3)]['find']({'where':{}},this[_0x4da48b(0x3d0)][_0x4da48b(0x4ae)]),_0x560693=new Set(_0x35f06b[_0x4da48b(0x6ac)]['etiquetas']||[]),_0x49753b=new Set(_0x35f06b['leadInfo'][_0x4da48b(0x2c4)]),_0x28339e=new Set(_0x580b7d['map'](_0x4a8fa5=>_0x4a8fa5[_0x4da48b(0x7b5)])),_0x1ba0a8=[..._0x49753b]['filter'](_0x180c7f=>!_0x560693['has'](_0x180c7f)&&_0x28339e[_0x4da48b(0x114)](_0x180c7f)),_0x3eae8a=[..._0x560693][_0x4da48b(0x56c)](_0x40ec16=>!_0x49753b[_0x4da48b(0x114)](_0x40ec16));if(_0x1dad81[_0x4da48b(0x3b3)]=[..._0x560693],_0x4472e5&&!_0x4472e5[_0x4da48b(0x210)]){for(let _0x28f986 of _0x1ba0a8)await this[_0x4da48b(0x513)](_0x28f986,_0x35f06b[_0x4da48b(0x7b5)]),_0x560693['add'](_0x28f986);for(let _0x5bc677 of _0x3eae8a)await this[_0x4da48b(0x165)](_0x5bc677,_0x35f06b['_id']),_0x560693[_0x4da48b(0x7fb)](_0x5bc677);}}if(_0x35f06b[_0x4da48b(0x1d0)]!==void 0x0&&(_0x1dad81[_0x4da48b(0x1d0)]=Number(_0x35f06b[_0x4da48b(0x1d0)])),Object[_0x4da48b(0x1a4)](_0x1dad81)['length']===0x0)throw new Error(_0x4da48b(0x18f));let _0x2eb5fb=await this[_0x4da48b(0x67f)]['chat'][_0x4da48b(0x104)]({'where':{'_id':_0x35f06b[_0x4da48b(0x7b5)]}},_0x1dad81,this[_0x4da48b(0x3d0)][_0x4da48b(0x4ae)]);return _0x2eb5fb&&F(this['instanceName'],_0x4da48b(0x2cb),{'chat':_0x2eb5fb}),_0x2eb5fb?(this[_0x4da48b(0x478)][_0x4da48b(0x4e1)](this['instanceName']+'\x20('+this['instance'][_0x4da48b(0x4ae)]+_0x4da48b(0x71a)+JSON[_0x4da48b(0x238)](_0x2eb5fb,null,0x2)),_0x2eb5fb):{'message':_0x4da48b(0x372)};}catch(_0x180b40){let _0x5b132b=_0x4da48b(0x354),_0x4dc6c6=_0x180b40 instanceof Error?_0x180b40[_0x4da48b(0x70f)]:typeof _0x180b40==_0x4da48b(0x54e)?JSON['stringify'](_0x180b40):_0x180b40,_0x380ab6=_0x5b132b+':\x20'+_0x4dc6c6;throw this['logger'][_0x4da48b(0x3c6)](this['instanceName']+'\x20('+this[_0x4da48b(0x3d0)][_0x4da48b(0x4ae)]+'):\x20'+_0x380ab6),new m(_0x380ab6);}}async[a0_0x3cfc7d(0x513)](_0x79e545,_0x23f4cd){const _0x4a3ace=a0_0x3cfc7d;try{await this['client'][_0x4a3ace(0x60b)](_0x23f4cd,_0x79e545),this['logger'][_0x4a3ace(0x743)](this[_0x4a3ace(0x1c7)]+'\x20('+this[_0x4a3ace(0x3d0)][_0x4a3ace(0x4ae)]+_0x4a3ace(0x4f9)+_0x79e545+_0x4a3ace(0x711)+_0x23f4cd+_0x4a3ace(0x7ea));}catch(_0x55cb6b){this[_0x4a3ace(0x478)]['error']('Erro\x20ao\x20adicionar\x20label\x20'+_0x79e545+'\x20ao\x20chat\x20'+_0x23f4cd+':\x20'+_0x55cb6b);}}async[a0_0x3cfc7d(0x165)](_0x4db4d0,_0x8e7826){const _0x112e00=a0_0x3cfc7d;try{await this[_0x112e00(0x495)][_0x112e00(0x706)](_0x8e7826,_0x4db4d0),this[_0x112e00(0x478)][_0x112e00(0x743)](this[_0x112e00(0x1c7)]+'\x20('+this[_0x112e00(0x3d0)][_0x112e00(0x4ae)]+_0x112e00(0x4f9)+_0x4db4d0+_0x112e00(0x2c8)+_0x8e7826+_0x112e00(0x7ea));}catch(_0x4042cf){this[_0x112e00(0x478)]['error']('Erro\x20ao\x20remover\x20label\x20'+_0x4db4d0+_0x112e00(0x71c)+_0x8e7826+':\x20'+_0x4042cf);}}async[a0_0x3cfc7d(0x2b1)](_0x2f2c0d){const _0x594b7e=a0_0x3cfc7d;try{let _0x5289d7=await this[_0x594b7e(0x67f)][_0x594b7e(0x730)][_0x594b7e(0x37d)](this['instance'][_0x594b7e(0x4ae)]),_0x225dff=_0x2f2c0d[_0x594b7e(0x7b5)]?_0x5289d7[_0x594b7e(0x413)][_0x594b7e(0x2d0)](_0x212558=>_0x212558[_0x594b7e(0x7b5)]===_0x2f2c0d[_0x594b7e(0x7b5)]):-0x1;if(_0x2f2c0d['delete']&&_0x225dff>-0x1)_0x5289d7[_0x594b7e(0x413)][_0x594b7e(0x313)](_0x225dff,0x1);else{if(_0x225dff>-0x1){let _0x16411b=_0x5289d7[_0x594b7e(0x413)][_0x225dff];_0x2f2c0d[_0x594b7e(0x6a4)]&&(_0x16411b[_0x594b7e(0x6a4)]=_0x2f2c0d[_0x594b7e(0x6a4)]),_0x2f2c0d[_0x594b7e(0x75b)]&&(_0x16411b['name']=_0x2f2c0d['name']),_0x2f2c0d[_0x594b7e(0x4d8)]&&(_0x16411b['email']=_0x2f2c0d[_0x594b7e(0x4d8)]),_0x2f2c0d[_0x594b7e(0x4df)]&&(_0x16411b[_0x594b7e(0x4df)]=_0x2f2c0d[_0x594b7e(0x4df)]);}else _0x5289d7['agents'][_0x594b7e(0x7b9)]({'_id':_0x2f2c0d[_0x594b7e(0x7b5)]||new pe[(_0x594b7e(0x879))][(_0x594b7e(0x84e))][(_0x594b7e(0x810))]()[_0x594b7e(0x885)](),'fone':_0x2f2c0d[_0x594b7e(0x6a4)],'name':_0x2f2c0d['name'],'email':_0x2f2c0d[_0x594b7e(0x4d8)],'role':_0x2f2c0d[_0x594b7e(0x4df)]});}let _0x26d2da={'agents':_0x5289d7[_0x594b7e(0x413)]},_0x5d8d24=await this[_0x594b7e(0x67f)][_0x594b7e(0x730)]['update'](_0x26d2da,this[_0x594b7e(0x3d0)][_0x594b7e(0x4ae)]);return this[_0x594b7e(0x37f)]=_0x5d8d24,this['logger']['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x594b7e(0x781)),this[_0x594b7e(0x478)][_0x594b7e(0x4e1)](this['instanceName']+'\x20('+this[_0x594b7e(0x3d0)][_0x594b7e(0x4ae)]+'):\x20'+this['AutomateSystem']),_0x5d8d24;}catch(_0x57643d){let _0x4b25eb='Erro\x20ao\x20editar\x20agentes',_0x436e47=_0x57643d instanceof Error?_0x57643d[_0x594b7e(0x70f)]:typeof _0x57643d=='object'?JSON[_0x594b7e(0x238)](_0x57643d):_0x57643d,_0x2ef2cb=_0x4b25eb+':\x20'+_0x436e47;throw this[_0x594b7e(0x478)][_0x594b7e(0x3c6)](this[_0x594b7e(0x1c7)]+'\x20('+this[_0x594b7e(0x3d0)][_0x594b7e(0x4ae)]+_0x594b7e(0x71a)+_0x2ef2cb),new m(_0x2ef2cb);}}async[a0_0x3cfc7d(0x68e)](_0x2ef2d9){const _0x3c9206=a0_0x3cfc7d;try{let _0xd92e58=await this['repository']['automateSystem'][_0x3c9206(0x37d)](this[_0x3c9206(0x3d0)][_0x3c9206(0x4ae)]),_0x321b55=_0x2ef2d9['_id']?_0xd92e58['customFields'][_0x3c9206(0x2d0)](_0x14d079=>_0x14d079[_0x3c9206(0x7b5)]===_0x2ef2d9[_0x3c9206(0x7b5)]):-0x1,_0x2ed8a2=!0x1,_0x348d1b=_0xd92e58[_0x3c9206(0x516)]['some'](_0x5c1b0c=>_0x5c1b0c[_0x3c9206(0x451)]===_0x2ef2d9[_0x3c9206(0x451)]);if(_0x2ef2d9[_0x3c9206(0x7fb)]&&_0x321b55>-0x1)_0xd92e58[_0x3c9206(0x516)]['splice'](_0x321b55,0x1),_0x2ed8a2=!0x0;else{if(_0x321b55>-0x1){if(_0xd92e58[_0x3c9206(0x516)]['some'](_0x5dec54=>_0x5dec54['name']===_0x2ef2d9[_0x3c9206(0x75b)]&&_0x5dec54[_0x3c9206(0x7b5)]!==_0x2ef2d9['_id']))throw new Error(_0x3c9206(0x7f2));let _0x4bed35=_0xd92e58[_0x3c9206(0x516)][_0x321b55];_0x2ef2d9[_0x3c9206(0x451)]&&(_0x348d1b||!Number[_0x3c9206(0x63f)](_0x2ef2d9['order']))&&(_0x4bed35['order']=_0x2ef2d9[_0x3c9206(0x451)],_0x2ed8a2=!0x0),_0x2ef2d9[_0x3c9206(0x75b)]&&(_0x4bed35[_0x3c9206(0x75b)]=_0x2ef2d9[_0x3c9206(0x75b)]);}else{if(_0xd92e58[_0x3c9206(0x516)][_0x3c9206(0x4d3)](_0x4ed4ab=>_0x4ed4ab[_0x3c9206(0x75b)]===_0x2ef2d9[_0x3c9206(0x75b)]&&_0x4ed4ab[_0x3c9206(0x7b5)]!==_0x2ef2d9[_0x3c9206(0x7b5)]))throw new Error('Nome\x20do\x20campo\x20personalizado\x20já\x20existe.');_0xd92e58['customFields'][_0x3c9206(0x7b9)]({'_id':_0x2ef2d9[_0x3c9206(0x7b5)]||new pe[(_0x3c9206(0x879))][(_0x3c9206(0x84e))][(_0x3c9206(0x810))]()['toString'](),'order':_0x2ef2d9[_0x3c9206(0x451)],'name':_0x2ef2d9['name']}),_0x2ed8a2=!0x0;}}if(_0x2ed8a2){_0xd92e58[_0x3c9206(0x516)][_0x3c9206(0x476)]((_0x3eeffe,_0x31d681)=>_0x3eeffe[_0x3c9206(0x451)]>_0x31d681[_0x3c9206(0x451)]?0x1:_0x31d681['order']>_0x3eeffe[_0x3c9206(0x451)]?-0x1:0x0);for(let _0x48fe97=0x0;_0x48fe97<_0xd92e58[_0x3c9206(0x516)]['length'];_0x48fe97++)_0xd92e58[_0x3c9206(0x516)][_0x48fe97][_0x3c9206(0x451)]=_0x48fe97+0x1;}let _0x2e5b96=await this[_0x3c9206(0x67f)][_0x3c9206(0x730)][_0x3c9206(0x3f8)](_0xd92e58,this['instance'][_0x3c9206(0x4ae)]);return this[_0x3c9206(0x37f)]=_0x2e5b96,this[_0x3c9206(0x478)][_0x3c9206(0x4e1)](this['instanceName']+'\x20('+this['instance'][_0x3c9206(0x4ae)]+'):\x20debug\x20alterando\x20this.AutomateSystem'),this[_0x3c9206(0x478)]['verbose'](this[_0x3c9206(0x1c7)]+'\x20('+this[_0x3c9206(0x3d0)][_0x3c9206(0x4ae)]+'):\x20'+this[_0x3c9206(0x37f)]),_0x2e5b96;}catch(_0x49a249){let _0x4de105=_0x3c9206(0x6ae),_0x55f231=_0x49a249 instanceof Error?_0x49a249[_0x3c9206(0x70f)]:typeof _0x49a249==_0x3c9206(0x54e)?JSON[_0x3c9206(0x238)](_0x49a249):_0x49a249,_0xed6e5a=_0x4de105+':\x20'+_0x55f231;throw this['logger'][_0x3c9206(0x3c6)](this['instanceName']+'\x20('+this['instance'][_0x3c9206(0x4ae)]+'):\x20'+_0xed6e5a),new m(_0xed6e5a);}}async['updateAutoCompleteMessages'](_0x333b77){const _0x1a171c=a0_0x3cfc7d;try{let _0x5357d6=await this[_0x1a171c(0x67f)][_0x1a171c(0x730)][_0x1a171c(0x37d)](this['instance']['wuid']),_0x6c470f=_0x5357d6?.[_0x1a171c(0x21f)]?.['findIndex'](_0x53e34b=>_0x53e34b[_0x1a171c(0x7b5)]===_0x333b77?.['_id']);if(_0x333b77?.[_0x1a171c(0x7fb)])_0x6c470f>-0x1&&_0x5357d6?.[_0x1a171c(0x21f)]?.[_0x1a171c(0x313)](_0x6c470f,0x1);else{if(_0x6c470f>-0x1){let _0x4ccf53=_0x5357d6[_0x1a171c(0x21f)][_0x6c470f];_0x4ccf53[_0x1a171c(0x451)]=_0x333b77?.[_0x1a171c(0x451)]||_0x4ccf53[_0x1a171c(0x451)],_0x4ccf53[_0x1a171c(0x35e)]=_0x333b77?.[_0x1a171c(0x35e)]||_0x4ccf53[_0x1a171c(0x35e)],_0x4ccf53[_0x1a171c(0x70f)]=_0x333b77?.['message']||_0x4ccf53[_0x1a171c(0x70f)];}else{let _0x235cd1={'_id':_0x333b77?.['_id']||new pe[(_0x1a171c(0x879))][(_0x1a171c(0x84e))]['ObjectId']()[_0x1a171c(0x885)](),'order':_0x333b77?.['order'],'command':_0x333b77?.[_0x1a171c(0x35e)],'message':_0x333b77?.[_0x1a171c(0x70f)]};_0x5357d6?.[_0x1a171c(0x21f)]?.['push'](_0x235cd1);}}_0x5357d6?.['autoCompleteMessages']?.[_0x1a171c(0x476)]((_0x33713a,_0x52a583)=>_0x33713a[_0x1a171c(0x451)]-_0x52a583[_0x1a171c(0x451)]);let _0x598ba2=await this[_0x1a171c(0x67f)][_0x1a171c(0x730)]['update'](_0x5357d6,this[_0x1a171c(0x3d0)][_0x1a171c(0x4ae)]);return this['AutomateSystem']=_0x598ba2,this[_0x1a171c(0x478)][_0x1a171c(0x4e1)](this['instanceName']+'\x20('+this[_0x1a171c(0x3d0)][_0x1a171c(0x4ae)]+_0x1a171c(0x375)),_0x598ba2;}catch(_0x4f233d){let _0x493264='Erro\x20ao\x20tentar\x20autoCompleteMessages',_0x57750e=_0x4f233d instanceof Error?_0x4f233d[_0x1a171c(0x70f)]:typeof _0x4f233d==_0x1a171c(0x54e)?JSON[_0x1a171c(0x238)](_0x4f233d):_0x4f233d,_0x4fc422=_0x493264+':\x20'+_0x57750e;throw this[_0x1a171c(0x478)]['error'](this[_0x1a171c(0x1c7)]+'\x20('+this['instance']['wuid']+_0x1a171c(0x71a)+_0x4fc422),new m(_0x4fc422);}}async[a0_0x3cfc7d(0xff)](_0x179647){const _0x11ce0a=a0_0x3cfc7d;try{let _0x262e67=await this[_0x11ce0a(0x67f)][_0x11ce0a(0x730)]['findOrCreate'](this[_0x11ce0a(0x3d0)]['wuid']);if(!_0x262e67)throw new Error('Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.');let _0x235af8={'_id':_0x262e67[_0x11ce0a(0x7b5)],'flowConfig':{'enabled':_0x179647[_0x11ce0a(0x119)]??_0x262e67[_0x11ce0a(0x55d)][_0x11ce0a(0x119)],'ignoreGroups':_0x179647[_0x11ce0a(0x576)]??_0x262e67[_0x11ce0a(0x55d)][_0x11ce0a(0x576)],'stopConversation':_0x179647[_0x11ce0a(0x7ae)][_0x11ce0a(0x1d2)]()??_0x262e67[_0x11ce0a(0x55d)][_0x11ce0a(0x7ae)][_0x11ce0a(0x1d2)](),'stopMinutes':_0x179647['stopMinutes']??_0x262e67['flowConfig'][_0x11ce0a(0x341)],'stopWhenYouSendMsg':_0x179647[_0x11ce0a(0x176)]??_0x262e67[_0x11ce0a(0x55d)][_0x11ce0a(0x176)]}},_0xf8545e=await this[_0x11ce0a(0x67f)][_0x11ce0a(0x730)]['update'](_0x235af8,this[_0x11ce0a(0x3d0)][_0x11ce0a(0x4ae)]);return this['AutomateSystem']=_0xf8545e,this[_0x11ce0a(0x478)][_0x11ce0a(0x4e1)](this[_0x11ce0a(0x1c7)]+'\x20('+this[_0x11ce0a(0x3d0)][_0x11ce0a(0x4ae)]+_0x11ce0a(0x781)),this[_0x11ce0a(0x478)][_0x11ce0a(0x4e1)](this[_0x11ce0a(0x1c7)]+'\x20('+this['instance'][_0x11ce0a(0x4ae)]+_0x11ce0a(0x71a)+this[_0x11ce0a(0x37f)]),setTimeout(()=>this[_0x11ce0a(0x3d1)](),0x7d0),_0xf8545e;}catch(_0x1f7b1c){let _0x39d461=_0x11ce0a(0x5f1),_0x441632=_0x1f7b1c instanceof Error?_0x1f7b1c[_0x11ce0a(0x70f)]:typeof _0x1f7b1c=='object'?JSON['stringify'](_0x1f7b1c):_0x1f7b1c,_0x5db5a0=_0x39d461+':\x20'+_0x441632;throw this[_0x11ce0a(0x478)][_0x11ce0a(0x3c6)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x11ce0a(0x71a)+_0x5db5a0),new m(_0x5db5a0);}}async[a0_0x3cfc7d(0x85d)](){const _0x152ba9=a0_0x3cfc7d;try{let _0x584125=await this[_0x152ba9(0x67f)][_0x152ba9(0x730)][_0x152ba9(0x37d)](this[_0x152ba9(0x3d0)][_0x152ba9(0x4ae)]);return this['AutomateSystem']=_0x584125,_0x584125;}catch(_0x25f4d3){let _0x297920='Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem',_0x4c7270=_0x25f4d3 instanceof Error?_0x25f4d3[_0x152ba9(0x70f)]:typeof _0x25f4d3==_0x152ba9(0x54e)?JSON[_0x152ba9(0x238)](_0x25f4d3):_0x25f4d3,_0x356cf2=_0x297920+':\x20'+_0x4c7270;throw this['logger']['error'](this[_0x152ba9(0x1c7)]+'\x20('+this[_0x152ba9(0x3d0)][_0x152ba9(0x4ae)]+_0x152ba9(0x71a)+_0x356cf2),new m(_0x356cf2);}}async[a0_0x3cfc7d(0x557)](){const _0x423931=a0_0x3cfc7d;let _0x38a960=(await import(_0x423931(0x79f)))[_0x423931(0x879)];this[_0x423931(0x5a2)]=new _0x38a960({'concurrency':0x1});}async[a0_0x3cfc7d(0x5bc)](){const _0x4841f6=a0_0x3cfc7d;this['instance']['ScheduleMessage']['timeout']&&clearTimeout(this['instance'][_0x4841f6(0x69e)][_0x4841f6(0x665)]),this[_0x4841f6(0x3d0)][_0x4841f6(0x69e)][_0x4841f6(0x665)]=setTimeout(()=>{const _0x559543=_0x4841f6;this[_0x559543(0x830)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async[a0_0x3cfc7d(0x830)](){const _0x59deb3=a0_0x3cfc7d;let _0x2255b2=this['instance'][_0x59deb3(0x69e)]['lastSend'];(_0x2255b2===0x0||_0x2255b2===null||Date[_0x59deb3(0x6aa)]()-_0x2255b2>=0x1d4c0)&&(this['logger'][_0x59deb3(0x4e1)](this[_0x59deb3(0x1c7)]+'\x20('+this[_0x59deb3(0x3d0)][_0x59deb3(0x4ae)]+_0x59deb3(0x6ee)),this[_0x59deb3(0x3d0)][_0x59deb3(0x69e)][_0x59deb3(0x5d4)]=null,this[_0x59deb3(0x3d0)][_0x59deb3(0x69e)]['lastSend']=0x0,this[_0x59deb3(0x3d0)][_0x59deb3(0x69e)][_0x59deb3(0x6dd)]=0x0,await this['scheduleNextCheck']());}async[a0_0x3cfc7d(0x3d1)](){const _0x46cbfb=a0_0x3cfc7d;this[_0x46cbfb(0x478)][_0x46cbfb(0x7e0)](this[_0x46cbfb(0x1c7)]+'\x20('+this[_0x46cbfb(0x3d0)][_0x46cbfb(0x4ae)]+_0x46cbfb(0x248)),await this[_0x46cbfb(0x2ea)]();let _0x5f268f=await this['getReadyToSendMessages']();_0x5f268f[_0x46cbfb(0x11c)]>0x0&&(setTimeout(()=>this[_0x46cbfb(0x830)](),0x14*0x3e8),this[_0x46cbfb(0x478)][_0x46cbfb(0x7e0)](this[_0x46cbfb(0x1c7)]+'\x20('+this[_0x46cbfb(0x3d0)][_0x46cbfb(0x4ae)]+_0x46cbfb(0x5d5)),this[_0x46cbfb(0x5a2)][_0x46cbfb(0x316)](),this[_0x46cbfb(0x5a2)][_0x46cbfb(0x199)](()=>this[_0x46cbfb(0x46a)](_0x5f268f)));let _0x125e2d={'where':{'status':_0x46cbfb(0x14f),'when':{'$gt':Date[_0x46cbfb(0x6aa)]()}}},_0x40dbbc=await this['repository'][_0x46cbfb(0x86c)][_0x46cbfb(0x36a)](_0x125e2d,this[_0x46cbfb(0x3d0)][_0x46cbfb(0x4ae)]);_0x40dbbc&&_0x40dbbc['when']-Date[_0x46cbfb(0x6aa)]()<=0x6ddd00?this[_0x46cbfb(0x3d0)]['ScheduleMessage'][_0x46cbfb(0x6dd)]=_0x40dbbc[_0x46cbfb(0x184)]-Date[_0x46cbfb(0x6aa)]():this[_0x46cbfb(0x3d0)][_0x46cbfb(0x69e)][_0x46cbfb(0x6dd)]=(0x3c+Math[_0x46cbfb(0x532)](Math[_0x46cbfb(0x6eb)]()*0x3c))*0x3c*0x3e8,this[_0x46cbfb(0x3d0)][_0x46cbfb(0x69e)][_0x46cbfb(0x6dd)]=Math[_0x46cbfb(0x448)](this[_0x46cbfb(0x3d0)][_0x46cbfb(0x69e)][_0x46cbfb(0x6dd)],0x1*0x2*0x3e8);let _0x37cc9d=Math[_0x46cbfb(0x331)](this[_0x46cbfb(0x3d0)][_0x46cbfb(0x69e)][_0x46cbfb(0x6dd)]/0xea60);if(_0x40dbbc){let _0x58de78=new Date(_0x40dbbc[_0x46cbfb(0x184)])[_0x46cbfb(0x3e5)]();this[_0x46cbfb(0x478)][_0x46cbfb(0x7e0)](this['instanceName']+'\x20('+this[_0x46cbfb(0x3d0)][_0x46cbfb(0x4ae)]+_0x46cbfb(0x842)+_0x58de78+',\x20fará\x20nova\x20verificação\x20em\x20'+_0x37cc9d+_0x46cbfb(0x10e));}else this[_0x46cbfb(0x478)]['warn'](this[_0x46cbfb(0x1c7)]+'\x20('+this['instance']['wuid']+_0x46cbfb(0x1da)+_0x37cc9d+_0x46cbfb(0x10e));setTimeout(()=>{this['scheduleNextCheck']();},this['instance'][_0x46cbfb(0x69e)]['delayMessage']);}async['getReadyToSendMessages'](){const _0x4a80a1=a0_0x3cfc7d;this[_0x4a80a1(0x478)][_0x4a80a1(0x7e0)](this[_0x4a80a1(0x1c7)]+'\x20('+this[_0x4a80a1(0x3d0)][_0x4a80a1(0x4ae)]+_0x4a80a1(0x55b));let _0x524d49=Date[_0x4a80a1(0x6aa)]()-0xc*0x3c*0x3c*0x3e8,_0x51da6c={'where':{'status':{'$in':[_0x4a80a1(0x14f),_0x4a80a1(0x787)]},'$or':[{'when':{'$lte':Date[_0x4a80a1(0x6aa)](),'$gte':_0x524d49}},{'when':0x0}]}},_0x2f9481=await this[_0x4a80a1(0x67f)]['scheduleMessage'][_0x4a80a1(0x1c4)](_0x51da6c,this[_0x4a80a1(0x3d0)]['wuid']);return this['logger'][_0x4a80a1(0x7e0)](this[_0x4a80a1(0x1c7)]+'\x20('+this[_0x4a80a1(0x3d0)]['wuid']+_0x4a80a1(0x84a)+_0x2f9481[_0x4a80a1(0x11c)]),_0x2f9481;}async[a0_0x3cfc7d(0x46a)](_0x3de88a){const _0xfc37d6=a0_0x3cfc7d;this[_0xfc37d6(0x478)]['warn'](this['instanceName']+'\x20('+this[_0xfc37d6(0x3d0)][_0xfc37d6(0x4ae)]+'):\x20Iniciando\x20processReadyMessages');let _0x2a1ca1=0x3*0x3e8,_0x1db6cc=0x8*0x3e8,_0x439f29=Math['floor'](Math[_0xfc37d6(0x6eb)]()*(_0x1db6cc-_0x2a1ca1+0x1))+_0x2a1ca1,_0x2e10fa=()=>this['pendingMessages']['length']===0x0?null:this['pendingMessages'][_0xfc37d6(0x5b7)]((_0x723a8d,_0x4de889)=>(_0x723a8d[_0xfc37d6(0x451)]??Number[_0xfc37d6(0x5a5)])<(_0x4de889[_0xfc37d6(0x451)]??Number['MAX_SAFE_INTEGER'])?_0x723a8d:_0x4de889,this[_0xfc37d6(0x575)][0x0]);_0x3de88a=await this[_0xfc37d6(0x518)]();for(let _0x4e8d42 of _0x3de88a){await this[_0xfc37d6(0x5bc)]();let _0x58d870=0x3*0x3e8,_0x55c66a={'_id':_0x4e8d42[_0xfc37d6(0x7b5)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0xfc37d6(0x6aa)]()-_0x58d870}}]},_0x2b2de1={'startSend':Date['now'](),'status':_0xfc37d6(0x787)},_0x327e07=await this[_0xfc37d6(0x67f)][_0xfc37d6(0x86c)][_0xfc37d6(0x104)](_0x55c66a,_0x2b2de1,this[_0xfc37d6(0x3d0)]['wuid']);if(this[_0xfc37d6(0x575)]=_0x327e07[_0xfc37d6(0x30c)][_0xfc37d6(0x56c)](_0x55b591=>!_0x55b591[_0xfc37d6(0x14e)]),!_0x327e07){setTimeout(()=>this[_0xfc37d6(0x830)](),0xa*0x3e8);continue;}if(this[_0xfc37d6(0x3d0)][_0xfc37d6(0x69e)][_0xfc37d6(0x5d4)]=_0x327e07,!this[_0xfc37d6(0x3d0)][_0xfc37d6(0x69e)][_0xfc37d6(0x6d5)]){this[_0xfc37d6(0x478)]['warn'](this['instanceName']+'\x20('+this['instance']['wuid']+_0xfc37d6(0x821));break;}for(;this['pendingMessages'][_0xfc37d6(0x11c)]>0x0;){await this['setRestartTimeout']();let _0x32753f=_0x2e10fa();if(!_0x32753f)break;let _0xce1dab=_0x4e8d42['messages'][_0xfc37d6(0x1c4)](_0x5d4c18=>_0x5d4c18[_0xfc37d6(0x7b5)]===_0x32753f[_0xfc37d6(0x7b5)]);if(!_0xce1dab)break;if(this[_0xfc37d6(0x3d0)]['ScheduleMessage'][_0xfc37d6(0x6c4)]=Date['now'](),_0xce1dab['triedToSend']){this[_0xfc37d6(0x478)][_0xfc37d6(0x7e0)](this['instanceName']+'\x20('+this[_0xfc37d6(0x3d0)]['wuid']+_0xfc37d6(0x16c)+_0xce1dab[_0xfc37d6(0x6d9)]+_0xfc37d6(0x3d3)),this[_0xfc37d6(0x575)]=this[_0xfc37d6(0x575)][_0xfc37d6(0x56c)](_0x3df8e5=>_0x3df8e5[_0xfc37d6(0x7b5)]!==_0xce1dab[_0xfc37d6(0x7b5)]);continue;}if(!this[_0xfc37d6(0x3d0)]['ScheduleMessage'][_0xfc37d6(0x6d5)]){this[_0xfc37d6(0x478)][_0xfc37d6(0x7e0)](this[_0xfc37d6(0x1c7)]+'\x20('+this[_0xfc37d6(0x3d0)]['wuid']+_0xfc37d6(0x50f));break;}if(!this[_0xfc37d6(0x3d0)][_0xfc37d6(0x69e)][_0xfc37d6(0x5d4)]){this[_0xfc37d6(0x478)]['warn'](this[_0xfc37d6(0x1c7)]+'\x20('+this['instance'][_0xfc37d6(0x4ae)]+_0xfc37d6(0x5a9)+_0x4e8d42['_id']+_0xfc37d6(0x279));break;}let _0x2b0ca1={'idControl':_0xce1dab[_0xfc37d6(0x7b5)],'remoteJid':_0xce1dab[_0xfc37d6(0x6d9)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date[_0xfc37d6(0x6aa)]()},_0x4e7e46=null;try{this[_0xfc37d6(0x478)]['warn'](this[_0xfc37d6(0x1c7)]+'\x20('+this[_0xfc37d6(0x3d0)][_0xfc37d6(0x4ae)]+_0xfc37d6(0x49d)+_0xce1dab[_0xfc37d6(0x6d9)]);let _0x24a40f=await Promise[_0xfc37d6(0x159)]([this['SendScheduleMessage'](_0xce1dab[_0xfc37d6(0x6d9)],_0xce1dab),this[_0xfc37d6(0x658)](0x78*0x3e8)]);_0x2b0ca1['error']=_0x24a40f[_0xfc37d6(0x3c6)],_0x2b0ca1['id']=_0x24a40f[_0xfc37d6(0x3c6)]?null:_0x24a40f['id'],_0x2b0ca1[_0xfc37d6(0x1c8)]=_0x24a40f[_0xfc37d6(0x3c6)]?_0x24a40f[_0xfc37d6(0x2e2)]?_0x24a40f[_0xfc37d6(0x2e2)]['toString']():'':null;let _0x4cbdf2=_0x4e8d42[_0xfc37d6(0x30c)][_0xfc37d6(0x2d0)](_0x30119f=>_0x30119f[_0xfc37d6(0x7b5)]===_0xce1dab[_0xfc37d6(0x7b5)]);_0x4cbdf2!==-0x1&&(_0x4e8d42[_0xfc37d6(0x30c)][_0x4cbdf2][_0xfc37d6(0x14e)]=!0x0);let _0x39d264={'$push':{'messagesSend':_0x2b0ca1},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x5a8047=[{'elem._id':_0xce1dab['_id']}];if(this[_0xfc37d6(0x478)]['warn'](this[_0xfc37d6(0x1c7)]+'\x20('+this[_0xfc37d6(0x3d0)][_0xfc37d6(0x4ae)]+'):\x20Atualizando\x20status\x20da\x20mensagem\x20'+_0xce1dab[_0xfc37d6(0x7b5)]),_0x4e7e46=await this[_0xfc37d6(0x67f)][_0xfc37d6(0x86c)]['updateOne']({'_id':_0x4e8d42[_0xfc37d6(0x7b5)]},_0x39d264,this['instance']['wuid'],{'arrayFilters':_0x5a8047}),_0x24a40f[_0xfc37d6(0x3c6)]){this['logger'][_0xfc37d6(0x3c6)](this['instanceName']+'\x20('+this[_0xfc37d6(0x3d0)]['wuid']+_0xfc37d6(0x58e)+_0x24a40f[_0xfc37d6(0x2e2)]);continue;}let _0x34bb3c=this[_0xfc37d6(0x2a2)](_0x4e8d42[_0xfc37d6(0x670)],_0x4e8d42['delaySecMax']);await this[_0xfc37d6(0x350)](_0x34bb3c);}catch(_0x283678){this['logger']['error'](this[_0xfc37d6(0x1c7)]+'\x20('+this[_0xfc37d6(0x3d0)][_0xfc37d6(0x4ae)]+_0xfc37d6(0x381)+_0xce1dab[_0xfc37d6(0x6d9)]+':\x20'+(_0x283678 instanceof Error?_0x283678[_0xfc37d6(0x70f)]:JSON['stringify'](_0x283678,null,0x2))),_0x2b0ca1[_0xfc37d6(0x3c6)]=!0x0,_0x2b0ca1[_0xfc37d6(0x1c8)]=_0x283678[_0xfc37d6(0x70f)];let _0x4c43ae=_0x4e8d42['messages'][_0xfc37d6(0x2d0)](_0x40be8a=>_0x40be8a[_0xfc37d6(0x7b5)]===_0xce1dab[_0xfc37d6(0x7b5)]);_0x4c43ae!==-0x1&&(_0x4e8d42[_0xfc37d6(0x30c)][_0x4c43ae]['triedToSend']=!0x0);let _0x2ba7be={'$push':{'messagesSend':_0x2b0ca1},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x48ff43=[{'elem._id':_0xce1dab[_0xfc37d6(0x7b5)]}];this[_0xfc37d6(0x478)][_0xfc37d6(0x7e0)](this[_0xfc37d6(0x1c7)]+'\x20('+this[_0xfc37d6(0x3d0)][_0xfc37d6(0x4ae)]+_0xfc37d6(0x3f3)+_0xce1dab[_0xfc37d6(0x7b5)]),_0x4e7e46=await this[_0xfc37d6(0x67f)]['scheduleMessage'][_0xfc37d6(0x104)]({'_id':_0x4e8d42[_0xfc37d6(0x7b5)]},_0x2ba7be,this[_0xfc37d6(0x3d0)][_0xfc37d6(0x4ae)],{'arrayFilters':_0x48ff43});}finally{if(_0x4e7e46&&_0x4e7e46[_0xfc37d6(0x204)]===_0xfc37d6(0x77a)){this[_0xfc37d6(0x478)][_0xfc37d6(0x7e0)](this['instanceName']+'\x20('+this['instance'][_0xfc37d6(0x4ae)]+_0xfc37d6(0x5a9)+_0xce1dab[_0xfc37d6(0x7b5)]+_0xfc37d6(0x6f9));break;}let _0x7329a2=_0x4e7e46['messages'][_0xfc37d6(0x1c4)](_0x566e8c=>_0x566e8c[_0xfc37d6(0x7b5)]===_0xce1dab['_id']);if(_0x7329a2&&!_0x7329a2[_0xfc37d6(0x14e)]){let _0xd115be={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x19365b=[{'elem._id':_0xce1dab[_0xfc37d6(0x7b5)]}];await this['repository'][_0xfc37d6(0x86c)][_0xfc37d6(0x104)]({'_id':_0x4e7e46[_0xfc37d6(0x7b5)]},_0xd115be,this[_0xfc37d6(0x3d0)][_0xfc37d6(0x4ae)],{'arrayFilters':_0x19365b});}if(this[_0xfc37d6(0x575)]=_0x4e7e46[_0xfc37d6(0x30c)]['filter'](_0x580f49=>!_0x580f49['triedToSend']),!this[_0xfc37d6(0x3d0)][_0xfc37d6(0x69e)]['processingGroup']){await this['setRestartTimeout'](),this['logger'][_0xfc37d6(0x7e0)](this['instanceName']+'\x20('+this[_0xfc37d6(0x3d0)][_0xfc37d6(0x4ae)]+_0xfc37d6(0x5a9)+_0x4e8d42['_id']+_0xfc37d6(0x279));break;}}}this[_0xfc37d6(0x575)]=[];let _0x29430d=await this['repository'][_0xfc37d6(0x86c)][_0xfc37d6(0x7df)](_0x4e8d42[_0xfc37d6(0x7b5)],this[_0xfc37d6(0x3d0)][_0xfc37d6(0x4ae)]);if(_0x29430d[_0xfc37d6(0x30c)][_0xfc37d6(0x414)](_0x27b2c8=>_0x27b2c8[_0xfc37d6(0x14e)])&&_0x29430d[_0xfc37d6(0x204)]!==_0xfc37d6(0x77a)){let _0x909ad5={'$set':{'status':_0xfc37d6(0x48e)}};await this['repository'][_0xfc37d6(0x86c)][_0xfc37d6(0x48d)](_0x29430d[_0xfc37d6(0x7b5)],_0x909ad5,this['instance'][_0xfc37d6(0x4ae)]);}await new Promise(_0x5482d7=>setTimeout(_0x5482d7,_0x439f29)),global['gc']?global['gc']():console[_0xfc37d6(0x7e0)](_0xfc37d6(0x274));}}[a0_0x3cfc7d(0x658)](_0x1655df){const _0x586942=a0_0x3cfc7d;return new Promise((_0x123d00,_0x505d32)=>setTimeout(()=>_0x505d32(new Error(_0x586942(0x32d))),_0x1655df));}[a0_0x3cfc7d(0x2a2)](_0x4dd7cb,_0x5e6528){const _0x2a2593=a0_0x3cfc7d;return _0x4dd7cb=Math[_0x2a2593(0x448)](0.5,_0x4dd7cb),_0x5e6528=Math[_0x2a2593(0x7d2)](Math['max'](0x3,_0x5e6528),0x78),Math[_0x2a2593(0x532)](Math[_0x2a2593(0x6eb)]()*(_0x5e6528-_0x4dd7cb+0x1)+_0x4dd7cb)*0x3e8;}[a0_0x3cfc7d(0x350)](_0x2eca6a){return new Promise(_0x5d589d=>setTimeout(_0x5d589d,_0x2eca6a));}async[a0_0x3cfc7d(0x529)](_0xadd0fe){const _0x376732=a0_0x3cfc7d;if(!this[_0x376732(0x37f)]&&(await this['getAutomateSystem'](),!this[_0x376732(0x37f)]))return null;_0xadd0fe=this[_0x376732(0x81c)](_0xadd0fe);let _0x3ec45e=await this[_0x376732(0x67f)][_0x376732(0x52b)][_0x376732(0x36a)]({'where':{'_id':_0xadd0fe}},this[_0x376732(0x3d0)][_0x376732(0x4ae)]),_0x199cb2={};if(_0x3ec45e&&_0x3ec45e[_0x376732(0x6ac)]){let _0x282c00=_0x3ec45e[_0x376732(0x6ac)];typeof _0x282c00['nome']==_0x376732(0x3f6)&&(_0x199cb2['nome']=_0x282c00[_0x376732(0x73a)]),typeof _0x282c00[_0x376732(0x57b)]==_0x376732(0x3f6)&&(_0x199cb2[_0x376732(0x57b)]=_0x282c00[_0x376732(0x57b)]),typeof _0x282c00['email']==_0x376732(0x3f6)&&(_0x199cb2[_0x376732(0x4d8)]=_0x282c00[_0x376732(0x4d8)]),typeof _0x282c00[_0x376732(0x651)]==_0x376732(0x3f6)&&(_0x199cb2[_0x376732(0x651)]=_0x282c00[_0x376732(0x651)]),typeof _0x282c00[_0x376732(0x204)]==_0x376732(0x3f6)&&(_0x199cb2[_0x376732(0x204)]=_0x282c00[_0x376732(0x204)]),typeof _0x282c00[_0x376732(0x229)]==_0x376732(0x3f6)&&(_0x199cb2[_0x376732(0x229)]=_0x282c00[_0x376732(0x229)]),typeof _0x282c00[_0x376732(0x7f7)]==_0x376732(0x3f6)&&(_0x199cb2[_0x376732(0x7f7)]=_0x282c00[_0x376732(0x7f7)]),Array['isArray'](_0x282c00[_0x376732(0x5bd)])&&(_0x199cb2['tags']=_0x282c00[_0x376732(0x5bd)][_0x376732(0x149)](',\x20')),Array['isArray'](_0x282c00[_0x376732(0x2c4)])&&(_0x199cb2[_0x376732(0x2c4)]=_0x282c00[_0x376732(0x2c4)][_0x376732(0x149)](',\x20'));}return _0x3ec45e&&_0x3ec45e['leadInfo']&&_0x3ec45e[_0x376732(0x6ac)][_0x376732(0x516)]&&_0x3ec45e['leadInfo']['customFields']['forEach'](_0x482560=>{const _0x110fe3=_0x376732;let _0x2af9ea=this['AutomateSystem']?.[_0x110fe3(0x516)]['find'](_0x2d5d1c=>_0x2d5d1c[_0x110fe3(0x7b5)]===_0x482560[_0x110fe3(0x7b5)]);_0x2af9ea&&(_0x199cb2[_0x2af9ea[_0x110fe3(0x75b)]]=_0x482560[_0x110fe3(0x46c)]);}),_0x199cb2;}async[a0_0x3cfc7d(0x509)](_0x433d51,_0x483aa9){const _0x2defab=a0_0x3cfc7d;try{let _0x4b0900=await this[_0x2defab(0x529)](_0x483aa9);return this[_0x2defab(0x844)](_0x433d51,_0x4b0900);}catch(_0x260a27){return this[_0x2defab(0x478)][_0x2defab(0x3c6)](_0x2defab(0x1d6)+_0x483aa9+':\x20'+_0x260a27),_0x433d51;}}async['transformScheduledMessagesByType'](){const _0x2c169d=a0_0x3cfc7d;let _0xd36380=async(_0x10615f,_0x290337)=>{const _0x4d981b=a0_0x1146;let _0x245808=(await this['repository'][_0x4d981b(0x86c)][_0x4d981b(0x1c4)]({'where':{'type':_0x10615f}},this[_0x4d981b(0x3d0)]['wuid']))['map'](async _0x45ce26=>{const _0xeb6796=_0x4d981b;let _0x53175c=_0x290337(_0x45ce26),_0x1f1215=_0x1de96c=>/^\d+$/[_0xeb6796(0x3bd)](_0x1de96c),_0x2beaa3=_0x45ce26[_0xeb6796(0x44a)]['filter'](_0x2de882=>_0x2de882[_0xeb6796(0x14b)](_0xeb6796(0x10f))?_0x2de882[_0xeb6796(0x11c)]>0x19:_0x2de882[_0xeb6796(0x14b)](_0xeb6796(0x2a5))?_0x2de882['length']>0xf:_0x1f1215(_0x2de882)?_0x2de882[_0xeb6796(0x11c)]>=0xb:!0x1)[_0xeb6796(0x733)](_0x193df5=>({'_id':(0x0,Q['v4'])(),'idSchedule':_0x45ce26['_id'],'type':_0x53175c,'remoteJid':_0x193df5,'flow':_0x45ce26['flowName'],'text':_0x45ce26[_0xeb6796(0x70f)]?.['text'],'delay':_0x45ce26[_0xeb6796(0x70f)]?.[_0xeb6796(0x21c)],'urlOrBase64':_0x45ce26[_0xeb6796(0x70f)]?.[_0xeb6796(0x257)],'linkPreview':_0x45ce26[_0xeb6796(0x70f)]?.[_0xeb6796(0x4ac)],'fileName':_0x45ce26[_0xeb6796(0x70f)]?.[_0xeb6796(0x40b)],'triedToSend':!0x1,'messagesSend':[]}));try{await this['repository'][_0xeb6796(0x86c)][_0xeb6796(0x48d)](_0x45ce26['_id'],{'$set':{'messages':_0x2beaa3},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0xeb6796(0x3d0)][_0xeb6796(0x4ae)]);}catch(_0x15eac8){console['error'](_0xeb6796(0x82e)+_0x45ce26[_0xeb6796(0x7b5)]+':',_0x15eac8);}});await Promise[_0x4d981b(0x35a)](_0x245808);};await _0xd36380(_0x2c169d(0x2c7),_0x1967d7=>'text'),await _0xd36380(_0x2c169d(0x835),_0x1de87f=>_0x1de87f[_0x2c169d(0x70f)]?.[_0x2c169d(0x865)]||_0x2c169d(0x835)),await _0xd36380(_0x2c169d(0x873),_0x1e3b25=>_0x2c169d(0x873)),await _0xd36380('flow',_0x1fe8b5=>_0x2c169d(0x2dc)),await _0xd36380('image',_0x238c8f=>_0x2c169d(0x5f6)),await _0xd36380(_0x2c169d(0x816),_0x31d6b4=>'video'),await _0xd36380(_0x2c169d(0x4cd),_0x848c1e=>_0x2c169d(0x4cd)),this[_0x2c169d(0x478)]['warn'](this[_0x2c169d(0x1c7)]+'\x20('+this[_0x2c169d(0x3d0)][_0x2c169d(0x4ae)]+'):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!');}async[a0_0x3cfc7d(0x138)](_0x14735c){const _0x1db34e=a0_0x3cfc7d;try{if(this[_0x1db34e(0x478)][_0x1db34e(0x7e0)](this[_0x1db34e(0x1c7)]+'\x20('+this[_0x1db34e(0x3d0)][_0x1db34e(0x4ae)]+'):\x20Editando/criando\x20grupo\x20de\x20mensagens...'),_0x14735c[_0x1db34e(0x7b5)]||(_0x14735c[_0x1db34e(0x7b5)]=(0x0,Q['v4'])()),this[_0x1db34e(0x3d0)]['ScheduleMessage'][_0x1db34e(0x5d4)]?.[_0x1db34e(0x7b5)]===_0x14735c['_id']?.[_0x1db34e(0x885)]()){if(_0x14735c[_0x1db34e(0x204)]===_0x1db34e(0x77a))this[_0x1db34e(0x3d0)][_0x1db34e(0x69e)]['processingGroup']=null;else throw new Error(_0x1db34e(0x34b));}if(_0x14735c['delete']&&_0x14735c[_0x1db34e(0x7b5)]){let _0x8ef28b=await this[_0x1db34e(0x67f)]['scheduleMessage'][_0x1db34e(0x3a4)](_0x14735c[_0x1db34e(0x7b5)],this[_0x1db34e(0x3d0)][_0x1db34e(0x4ae)]);return setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x8ef28b;}let _0x1a8db7=null;if(_0x14735c[_0x1db34e(0x7b5)]&&(_0x1a8db7=await this[_0x1db34e(0x67f)]['scheduleMessage']['findById'](_0x14735c['_id'],this['instance']['wuid'])),_0x1a8db7){let {_id:_0x36f487,owner:_0x483d0e,messages:_0x1104bf,..._0x269844}=_0x14735c;if(_0x1104bf){let _0x11ae18=_0x1104bf['filter'](_0x1532ae=>!_0x1532ae[_0x1db34e(0x7b5)]),_0x1c9b1d=_0x1104bf[_0x1db34e(0x56c)](_0x3763db=>_0x3763db[_0x1db34e(0x7b5)]&&!_0x3763db[_0x1db34e(0x7fb)]),_0x46701f=_0x1104bf[_0x1db34e(0x56c)](_0x490a66=>_0x490a66['_id']&&_0x490a66[_0x1db34e(0x7fb)]);if(_0x11ae18[_0x1db34e(0x11c)]>0x0&&await this['addMessagesToGroup'](_0x14735c['_id'],_0x11ae18),_0x1c9b1d[_0x1db34e(0x11c)]>0x0&&await this[_0x1db34e(0x482)]({'_id':_0x14735c[_0x1db34e(0x7b5)],'messages':_0x1c9b1d}),_0x46701f['length']>0x0){let _0xe99c95=_0x46701f[_0x1db34e(0x733)](_0x3120b6=>({'updateOne':{'filter':{'_id':_0x14735c[_0x1db34e(0x7b5)]},'update':{'$pull':{'messages':{'_id':_0x3120b6[_0x1db34e(0x7b5)]}}}}}));await this['repository'][_0x1db34e(0x86c)]['bulkWrite'](_0xe99c95,this[_0x1db34e(0x3d0)][_0x1db34e(0x4ae)]);}}let _0x1c83ee={'$set':{..._0x269844,'status':_0x14735c['status']||_0x1a8db7[_0x1db34e(0x204)]}},_0xd38ecf=await this[_0x1db34e(0x67f)][_0x1db34e(0x86c)][_0x1db34e(0x48d)](_0x14735c[_0x1db34e(0x7b5)],_0x1c83ee,this[_0x1db34e(0x3d0)][_0x1db34e(0x4ae)]);return _0xd38ecf&&(this[_0x1db34e(0x475)](_0xd38ecf['messages']),await this[_0x1db34e(0x67f)][_0x1db34e(0x86c)]['updateOneById'](_0xd38ecf[_0x1db34e(0x7b5)],{'$set':{'messages':_0xd38ecf['messages']}},this[_0x1db34e(0x3d0)][_0x1db34e(0x4ae)])),setTimeout(()=>this[_0x1db34e(0x3d1)](),0x7d0),await this[_0x1db34e(0x2ea)](),_0xd38ecf;}else{_0x14735c[_0x1db34e(0x6a6)]=this[_0x1db34e(0x3d0)][_0x1db34e(0x4ae)],_0x14735c[_0x1db34e(0x30c)]&&_0x14735c[_0x1db34e(0x30c)][_0x1db34e(0x455)](_0x2375d8=>{const _0x5c31f4=_0x1db34e;_0x2375d8[_0x5c31f4(0x7b5)]||(_0x2375d8['_id']=(0x0,Q['v4'])()),_0x2375d8[_0x5c31f4(0x30e)]||(_0x2375d8[_0x5c31f4(0x30e)]=_0x14735c[_0x5c31f4(0x7b5)]),delete _0x2375d8[_0x5c31f4(0x14e)];});let _0x53739a=await this[_0x1db34e(0x67f)][_0x1db34e(0x86c)][_0x1db34e(0x850)](_0x14735c,this[_0x1db34e(0x3d0)][_0x1db34e(0x4ae)]);return _0x53739a&&(this[_0x1db34e(0x475)](_0x53739a[_0x1db34e(0x30c)]),await this[_0x1db34e(0x67f)][_0x1db34e(0x86c)][_0x1db34e(0x48d)](_0x53739a[_0x1db34e(0x7b5)],{'$set':{'messages':_0x53739a[_0x1db34e(0x30c)]}},this[_0x1db34e(0x3d0)][_0x1db34e(0x4ae)])),setTimeout(()=>this[_0x1db34e(0x3d1)](),0x7d0),_0x53739a;}}catch(_0x1e191f){let _0x8b358d=_0x1db34e(0x4b1),_0x4eb456=_0x1e191f instanceof Error?_0x1e191f['message']:typeof _0x1e191f==_0x1db34e(0x54e)?JSON[_0x1db34e(0x238)](_0x1e191f):_0x1e191f,_0x1f849f=_0x8b358d+':\x20'+_0x4eb456;throw this[_0x1db34e(0x478)][_0x1db34e(0x3c6)](this[_0x1db34e(0x1c7)]+'\x20('+this[_0x1db34e(0x3d0)][_0x1db34e(0x4ae)]+_0x1db34e(0x71a)+_0x1f849f),new m(_0x1f849f);}}async[a0_0x3cfc7d(0x306)](_0x375fd0,_0x4e90b3){const _0x4e5f3f=a0_0x3cfc7d;try{this[_0x4e5f3f(0x478)][_0x4e5f3f(0x4e1)](this[_0x4e5f3f(0x1c7)]+'\x20('+this[_0x4e5f3f(0x3d0)][_0x4e5f3f(0x4ae)]+_0x4e5f3f(0x17f)),_0x4e90b3['forEach'](_0x1955ae=>{const _0x2f61de=_0x4e5f3f;_0x1955ae[_0x2f61de(0x7b5)]||(_0x1955ae[_0x2f61de(0x7b5)]=(0x0,Q['v4'])()),_0x1955ae['idSchedule']||(_0x1955ae['idSchedule']=_0x375fd0),delete _0x1955ae['triedToSend'];});let _0x3fbf6d={'$push':{'messages':{'$each':_0x4e90b3}}},_0x106905=await this[_0x4e5f3f(0x67f)][_0x4e5f3f(0x86c)][_0x4e5f3f(0x48d)](_0x375fd0,_0x3fbf6d,this[_0x4e5f3f(0x3d0)][_0x4e5f3f(0x4ae)]);return _0x106905&&(this[_0x4e5f3f(0x475)](_0x106905['messages']),await this[_0x4e5f3f(0x67f)][_0x4e5f3f(0x86c)][_0x4e5f3f(0x48d)](_0x106905[_0x4e5f3f(0x7b5)],{'$set':{'messages':_0x106905[_0x4e5f3f(0x30c)]}},this['instance'][_0x4e5f3f(0x4ae)])),_0x106905;}catch(_0x408406){let _0x601303=_0x4e5f3f(0x52f),_0x35f5d5=_0x408406 instanceof Error?_0x408406[_0x4e5f3f(0x70f)]:typeof _0x408406==_0x4e5f3f(0x54e)?JSON[_0x4e5f3f(0x238)](_0x408406):_0x408406,_0x80fabc=_0x601303+':\x20'+_0x35f5d5;throw this[_0x4e5f3f(0x478)][_0x4e5f3f(0x3c6)](this[_0x4e5f3f(0x1c7)]+'\x20('+this[_0x4e5f3f(0x3d0)]['wuid']+_0x4e5f3f(0x71a)+_0x80fabc),new m(_0x80fabc);}}async[a0_0x3cfc7d(0x482)](_0x30c293){const _0x2a3011=a0_0x3cfc7d;try{if(this[_0x2a3011(0x478)][_0x2a3011(0x4e1)](this['instanceName']+'\x20('+this[_0x2a3011(0x3d0)]['wuid']+'):\x20Editando\x20mensagens\x20no\x20grupo...'),!_0x30c293['_id']||!_0x30c293[_0x2a3011(0x30c)])throw new Error(_0x2a3011(0x737));let _0x4c7c06=_0x30c293[_0x2a3011(0x7b5)],_0x212d47=_0x30c293[_0x2a3011(0x30c)],_0x2df3f9=_0x212d47[_0x2a3011(0x56c)](_0x2e1e59=>!_0x2e1e59[_0x2a3011(0x7fb)])[_0x2a3011(0x733)](_0x5e8b84=>{const _0x3a35d7=_0x2a3011;let _0x261728=_0x5e8b84[_0x3a35d7(0x7b5)];if(!_0x261728)throw new Error(_0x3a35d7(0x1b6));return _0x5e8b84[_0x3a35d7(0x30e)]||(_0x5e8b84[_0x3a35d7(0x30e)]=_0x4c7c06),delete _0x5e8b84[_0x3a35d7(0x14e)],{'updateOne':{'filter':{'_id':_0x4c7c06,'messages._id':_0x261728},'update':{'$set':{'messages.$[elem]':_0x5e8b84}},'arrayFilters':[{'elem._id':_0x261728}]}};}),_0x51e58d=_0x212d47[_0x2a3011(0x56c)](_0x509f4f=>_0x509f4f[_0x2a3011(0x7fb)])['map'](_0x3797f4=>{let _0x2e04f7=_0x3797f4['_id'];if(!_0x2e04f7)throw new Error('Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.');return{'updateOne':{'filter':{'_id':_0x4c7c06},'update':{'$pull':{'messages':{'_id':_0x2e04f7}}}}};}),_0x501fcb=[..._0x2df3f9,..._0x51e58d],_0x295ed7=await this['repository']['scheduleMessage'][_0x2a3011(0x815)](_0x501fcb,this[_0x2a3011(0x3d0)][_0x2a3011(0x4ae)]),_0x124567=await this['repository'][_0x2a3011(0x86c)][_0x2a3011(0x7df)](_0x4c7c06,this[_0x2a3011(0x3d0)][_0x2a3011(0x4ae)]);return _0x124567&&(this[_0x2a3011(0x475)](_0x124567[_0x2a3011(0x30c)]),await this[_0x2a3011(0x67f)][_0x2a3011(0x86c)]['updateOneById'](_0x124567[_0x2a3011(0x7b5)],{'$set':{'messages':_0x124567[_0x2a3011(0x30c)]}},this['instance'][_0x2a3011(0x4ae)])),_0x124567;}catch(_0xe94530){let _0x3c6681=_0x2a3011(0x56b),_0x1aba2f=_0xe94530 instanceof Error?_0xe94530[_0x2a3011(0x70f)]:typeof _0xe94530==_0x2a3011(0x54e)?JSON[_0x2a3011(0x238)](_0xe94530):_0xe94530,_0x4ea5a9=_0x3c6681+':\x20'+_0x1aba2f;throw this[_0x2a3011(0x478)][_0x2a3011(0x3c6)](this['instanceName']+'\x20('+this[_0x2a3011(0x3d0)][_0x2a3011(0x4ae)]+_0x2a3011(0x71a)+_0x4ea5a9),new m(_0x4ea5a9);}}async[a0_0x3cfc7d(0x322)](){const _0x505d71=a0_0x3cfc7d;try{let _0x1ff34d={'status':_0x505d71(0x48e)},_0x37849b=await this[_0x505d71(0x67f)][_0x505d71(0x86c)][_0x505d71(0x892)](_0x1ff34d,this['instance']['wuid']);if(!_0x37849b['error'])this[_0x505d71(0x478)][_0x505d71(0x4e1)](this['instanceName']+'\x20('+this[_0x505d71(0x3d0)]['wuid']+_0x505d71(0x5c0));else throw new Error(_0x37849b[_0x505d71(0x3c6)][_0x505d71(0x70f)]||'Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens');return this[_0x505d71(0x29f)]();}catch(_0x1763a9){let _0x566e7a=_0x505d71(0x436),_0x35997e=_0x1763a9 instanceof Error?_0x1763a9[_0x505d71(0x70f)]:typeof _0x1763a9==_0x505d71(0x54e)?JSON[_0x505d71(0x238)](_0x1763a9):_0x1763a9,_0x1aa074=_0x566e7a+':\x20'+_0x35997e;throw this[_0x505d71(0x478)][_0x505d71(0x3c6)](this[_0x505d71(0x1c7)]+'\x20('+this['instance'][_0x505d71(0x4ae)]+_0x505d71(0x71a)+_0x1aa074),new m(_0x1aa074);}}async[a0_0x3cfc7d(0x16d)](){const _0x14bd14=a0_0x3cfc7d;try{this['instance']['ScheduleMessage'][_0x14bd14(0x6d5)]=!0x1,this[_0x14bd14(0x3d0)]['ScheduleMessage'][_0x14bd14(0x5d4)]=null,this[_0x14bd14(0x5a2)]&&this[_0x14bd14(0x5a2)]['clear'](),this['logger'][_0x14bd14(0x4e1)](this['instanceName']+'\x20('+this[_0x14bd14(0x3d0)][_0x14bd14(0x4ae)]+_0x14bd14(0x426)),await new Promise(_0x3b4326=>setTimeout(_0x3b4326,0x1388)),this[_0x14bd14(0x478)][_0x14bd14(0x4e1)](this[_0x14bd14(0x1c7)]+'\x20('+this[_0x14bd14(0x3d0)]['wuid']+'):\x20Iniciando\x20processo\x20de\x20deleção...');let _0x3b7670=await this[_0x14bd14(0x67f)]['scheduleMessage']['deleteMany']({},this[_0x14bd14(0x3d0)][_0x14bd14(0x4ae)]);if(!_0x3b7670[_0x14bd14(0x3c6)])this['logger'][_0x14bd14(0x4e1)](this[_0x14bd14(0x1c7)]+'\x20('+this[_0x14bd14(0x3d0)][_0x14bd14(0x4ae)]+'):\x20Todos\x20os\x20grupos\x20de\x20mensagens\x20foram\x20deletados\x20com\x20sucesso.'),this[_0x14bd14(0x478)]['verbose'](this[_0x14bd14(0x1c7)]+'\x20('+this[_0x14bd14(0x3d0)][_0x14bd14(0x4ae)]+_0x14bd14(0x1dc)),await new Promise(_0x421724=>setTimeout(_0x421724,0x1388)),this['instance']['ScheduleMessage']['isConnected']=!0x0,this[_0x14bd14(0x478)][_0x14bd14(0x4e1)](this[_0x14bd14(0x1c7)]+'\x20('+this[_0x14bd14(0x3d0)][_0x14bd14(0x4ae)]+_0x14bd14(0x59d)),this['scheduleNextCheck']();else throw new Error(_0x3b7670[_0x14bd14(0x3c6)][_0x14bd14(0x70f)]||_0x14bd14(0x66b));return this[_0x14bd14(0x29f)]();}catch(_0x1ff693){let _0x30931b=_0x14bd14(0x73f),_0x63379c=_0x1ff693 instanceof Error?_0x1ff693[_0x14bd14(0x70f)]:typeof _0x1ff693==_0x14bd14(0x54e)?JSON[_0x14bd14(0x238)](_0x1ff693):_0x1ff693,_0x561497=_0x30931b+':\x20'+_0x63379c;throw this[_0x14bd14(0x478)][_0x14bd14(0x3c6)](this[_0x14bd14(0x1c7)]+'\x20('+this[_0x14bd14(0x3d0)]['wuid']+_0x14bd14(0x71a)+_0x561497),new m(_0x561497);}}async[a0_0x3cfc7d(0x29f)](){const _0x2dd7bc=a0_0x3cfc7d;try{return await this[_0x2dd7bc(0x67f)][_0x2dd7bc(0x86c)][_0x2dd7bc(0x1c4)]({'where':{}},this[_0x2dd7bc(0x3d0)][_0x2dd7bc(0x4ae)]);}catch(_0xc4d76b){let _0x4d0df1=_0x2dd7bc(0x2cf),_0x287d4e=_0xc4d76b instanceof Error?_0xc4d76b[_0x2dd7bc(0x70f)]:typeof _0xc4d76b==_0x2dd7bc(0x54e)?JSON[_0x2dd7bc(0x238)](_0xc4d76b):_0xc4d76b,_0x1788f7=_0x4d0df1+':\x20'+_0x287d4e;throw this[_0x2dd7bc(0x478)][_0x2dd7bc(0x3c6)](this['instanceName']+'\x20('+this[_0x2dd7bc(0x3d0)]['wuid']+_0x2dd7bc(0x71a)+_0x1788f7),new m(_0x1788f7);}}[a0_0x3cfc7d(0x475)](_0x4f8b9f){const _0x105d4a=a0_0x3cfc7d;_0x4f8b9f[_0x105d4a(0x476)]((_0x5cacc5,_0x1a2088)=>_0x5cacc5[_0x105d4a(0x451)]-_0x1a2088[_0x105d4a(0x451)]),_0x4f8b9f[_0x105d4a(0x455)]((_0x38af36,_0x57c48b)=>{const _0x379267=_0x105d4a;_0x38af36[_0x379267(0x451)]=_0x57c48b+0x1;});}async['SendScheduleMessage'](_0x29e8f5,_0x22d3ed){const _0x23fe28=a0_0x3cfc7d;try{if(!_0x22d3ed)return this[_0x23fe28(0x478)]['error'](this[_0x23fe28(0x1c7)]+'\x20('+this[_0x23fe28(0x3d0)]['wuid']+_0x23fe28(0x64a)),{'error':!0x0,'detail':_0x23fe28(0x686)};if(_0x22d3ed['type']==='flow'&&!this[_0x23fe28(0x37f)]?.[_0x23fe28(0x55d)][_0x23fe28(0x119)])return this['logger'][_0x23fe28(0x3c6)](this[_0x23fe28(0x1c7)]+'\x20('+this[_0x23fe28(0x3d0)][_0x23fe28(0x4ae)]+'):\x20Fluxos\x20não\x20estão\x20ativados'),{'error':!0x0,'detail':_0x23fe28(0x58f)};switch(_0x22d3ed[_0x23fe28(0x77b)]){case _0x23fe28(0x2c7):return await this[_0x23fe28(0x374)](_0x22d3ed,_0x29e8f5);case _0x23fe28(0x816):case _0x23fe28(0x5f6):case _0x23fe28(0x4cd):return await this[_0x23fe28(0x679)](_0x22d3ed,_0x29e8f5);case _0x23fe28(0x873):return await this[_0x23fe28(0x7aa)](_0x22d3ed,_0x29e8f5);case _0x23fe28(0x2dc):let _0x4a216a=new ze();return _0x4a216a[_0x23fe28(0x75b)]=_0x22d3ed[_0x23fe28(0x2dc)],_0x4a216a[_0x23fe28(0x6d9)]=_0x29e8f5,await this[_0x23fe28(0x868)](_0x4a216a);default:return this[_0x23fe28(0x478)][_0x23fe28(0x3c6)](this[_0x23fe28(0x1c7)]+'\x20('+this[_0x23fe28(0x3d0)][_0x23fe28(0x4ae)]+_0x23fe28(0x534)+_0x22d3ed[_0x23fe28(0x77b)]),{'error':!0x0,'detail':'Comando\x20desconhecido'};}}catch(_0x53cad6){return this[_0x23fe28(0x478)][_0x23fe28(0x3c6)](this['instanceName']+'\x20('+this[_0x23fe28(0x3d0)][_0x23fe28(0x4ae)]+_0x23fe28(0x299)+(_0x53cad6 instanceof Error?_0x53cad6['message']:JSON[_0x23fe28(0x238)](_0x53cad6,null,0x2))),{'error':!0x0,'detail':_0x53cad6['message']};}}async['scheduleSendText'](_0x44f2e3,_0x50ce47){const _0x35a312=a0_0x3cfc7d;if(this[_0x35a312(0x478)]['verbose'](this[_0x35a312(0x1c7)]+'\x20('+this['instance'][_0x35a312(0x4ae)]+_0x35a312(0x39d)+_0x50ce47+'\x27'),!_0x44f2e3[_0x35a312(0x2c7)]||_0x44f2e3[_0x35a312(0x2c7)][_0x35a312(0x11c)]===0x0)return{'error':!0x0,'detail':_0x35a312(0x503)};let _0xc5d25c=await this[_0x35a312(0x509)](_0x44f2e3['text'],_0x50ce47),_0x197fb4={'number':_0x50ce47,'options':{'delay':_0x44f2e3[_0x35a312(0x21c)],'linkPreview':_0x44f2e3[_0x35a312(0x4ac)]},'textMessage':{'text':_0xc5d25c}},_0x14066b=null;try{let _0x12b155=await this[_0x35a312(0x39a)](_0x197fb4);if(_0x12b155&&_0x12b155['status'])return{'error':!0x1,'id':_0x12b155[_0x35a312(0x1e4)]['id']};_0x14066b=JSON[_0x35a312(0x238)](_0x12b155),this[_0x35a312(0x478)][_0x35a312(0x4e1)](this[_0x35a312(0x1c7)]+'\x20('+this[_0x35a312(0x3d0)]['wuid']+_0x35a312(0x71a)+_0x14066b);}catch(_0x490064){this['logger'][_0x35a312(0x3c6)](this[_0x35a312(0x1c7)]+'\x20('+this[_0x35a312(0x3d0)][_0x35a312(0x4ae)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20'+(_0x490064 instanceof Error?_0x490064[_0x35a312(0x70f)]:JSON[_0x35a312(0x238)](_0x490064,null,0x2))),_0x14066b=_0x490064[_0x35a312(0x70f)];}if(_0x14066b)return{'error':!0x0,'detail':(typeof _0x14066b==_0x35a312(0x54e)?JSON[_0x35a312(0x238)](_0x14066b,null,0x2):_0x14066b)[_0x35a312(0x5e0)](/[\[\]{}\n]/g,'\x20')['replace'](/  +/g,'\x20')};}async[a0_0x3cfc7d(0x679)](_0x207030,_0x1bf02b){const _0xf402a3=a0_0x3cfc7d;this[_0xf402a3(0x478)]['verbose'](this[_0xf402a3(0x1c7)]+'\x20('+this[_0xf402a3(0x3d0)][_0xf402a3(0x4ae)]+'):\x20\x27Enviando\x20mídia\x20para\x20\x27'+_0x1bf02b+'\x27');let _0x3a30d9;_0x207030[_0xf402a3(0x2c7)]&&_0x207030[_0xf402a3(0x2c7)][_0xf402a3(0x11c)]>0x0&&(_0x3a30d9=await this[_0xf402a3(0x509)](_0x207030[_0xf402a3(0x2c7)],_0x1bf02b));let _0x5edd11={'number':_0x1bf02b,'options':{'delay':_0x207030[_0xf402a3(0x21c)],'linkPreview':_0x207030[_0xf402a3(0x4ac)]},'mediaMessage':{'mediatype':_0x207030[_0xf402a3(0x77b)],'caption':_0x3a30d9,'media':_0x207030[_0xf402a3(0x257)]}},_0xca57e1=null;try{let _0x5cd1dd=await this['mediaMessage'](_0x5edd11);if(_0x5cd1dd&&_0x5cd1dd[_0xf402a3(0x204)])return{'error':!0x1,'id':_0x5cd1dd[_0xf402a3(0x1e4)]['id']};_0xca57e1=JSON[_0xf402a3(0x238)](_0x5cd1dd),this[_0xf402a3(0x478)][_0xf402a3(0x4e1)](this[_0xf402a3(0x1c7)]+'\x20('+this[_0xf402a3(0x3d0)]['wuid']+_0xf402a3(0x71a)+_0xca57e1);}catch(_0xba93d1){this[_0xf402a3(0x478)][_0xf402a3(0x3c6)](this[_0xf402a3(0x1c7)]+'\x20('+this[_0xf402a3(0x3d0)][_0xf402a3(0x4ae)]+'):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20'+(_0xba93d1 instanceof Error?_0xba93d1[_0xf402a3(0x70f)]:JSON[_0xf402a3(0x238)](_0xba93d1,null,0x2))),_0xca57e1=_0xba93d1[_0xf402a3(0x70f)];}if(_0xca57e1)return{'error':!0x0,'detail':(typeof _0xca57e1==_0xf402a3(0x54e)?JSON[_0xf402a3(0x238)](_0xca57e1,null,0x2):_0xca57e1)[_0xf402a3(0x5e0)](/[\[\]{}\n]/g,'\x20')[_0xf402a3(0x5e0)](/  +/g,'\x20')};}async[a0_0x3cfc7d(0x7aa)](_0x502413,_0x30eae1){const _0x5bbce2=a0_0x3cfc7d;this[_0x5bbce2(0x478)][_0x5bbce2(0x4e1)](this[_0x5bbce2(0x1c7)]+'\x20('+this[_0x5bbce2(0x3d0)]['wuid']+'):\x20\x27Enviando\x20audio\x20para\x20\x27'+_0x30eae1+'\x27');let _0x1d727b={'number':_0x30eae1,'options':{'delay':_0x502413['delay']},'audioMessage':{'audio':_0x502413[_0x5bbce2(0x257)]}},_0x81b1db=null;try{let _0x10dddf=await this['audioWhatsapp'](_0x1d727b);if(_0x10dddf&&_0x10dddf[_0x5bbce2(0x204)])return{'error':!0x1,'id':_0x10dddf[_0x5bbce2(0x1e4)]['id']};_0x81b1db=JSON[_0x5bbce2(0x238)](_0x10dddf),this[_0x5bbce2(0x478)]['verbose'](this[_0x5bbce2(0x1c7)]+'\x20('+this[_0x5bbce2(0x3d0)][_0x5bbce2(0x4ae)]+_0x5bbce2(0x71a)+_0x81b1db);}catch(_0x5bb2ac){this['logger']['error'](this['instanceName']+'\x20('+this[_0x5bbce2(0x3d0)][_0x5bbce2(0x4ae)]+_0x5bbce2(0x87f)+(_0x5bb2ac instanceof Error?_0x5bb2ac[_0x5bbce2(0x70f)]:JSON['stringify'](_0x5bb2ac,null,0x2))),_0x81b1db=_0x5bb2ac[_0x5bbce2(0x70f)];}if(_0x81b1db)return{'error':!0x0,'detail':(typeof _0x81b1db==_0x5bbce2(0x54e)?JSON['stringify'](_0x81b1db,null,0x2):_0x81b1db)['replace'](/[\[\]{}\n]/g,'\x20')[_0x5bbce2(0x5e0)](/  +/g,'\x20')};}async[a0_0x3cfc7d(0x154)](_0x5aa4f3){const _0xe98b02=a0_0x3cfc7d;try{return await this['client'][_0xe98b02(0x79d)](_0x5aa4f3[_0xe98b02(0x669)],_0x5aa4f3[_0xe98b02(0x2c0)]),{'update':_0xe98b02(0x20f)};}catch(_0x5b98ce){let _0x2c907d=_0xe98b02(0x6bd),_0x35407c=_0x5b98ce instanceof Error?_0x5b98ce[_0xe98b02(0x70f)]:typeof _0x5b98ce=='object'?JSON[_0xe98b02(0x238)](_0x5b98ce):_0x5b98ce,_0x29365b=_0x2c907d+':\x20'+_0x35407c;throw this[_0xe98b02(0x478)][_0xe98b02(0x3c6)](this['instanceName']+'\x20('+this['instance']['wuid']+_0xe98b02(0x71a)+_0x29365b),new x(_0x29365b);}}async[a0_0x3cfc7d(0x5f4)](_0x4d7cd0){const _0x4de2d6=a0_0x3cfc7d;try{return await this['client'][_0x4de2d6(0x13b)](_0x4d7cd0[_0x4de2d6(0x669)],_0x4d7cd0['name']),{'update':_0x4de2d6(0x20f)};}catch(_0x314f2b){let _0x4cf3e5=_0x4de2d6(0x4e8),_0x117794=_0x314f2b instanceof Error?_0x314f2b['message']:typeof _0x314f2b=='object'?JSON[_0x4de2d6(0x238)](_0x314f2b):_0x314f2b,_0x5900de=_0x4cf3e5+':\x20'+_0x117794;throw this['logger'][_0x4de2d6(0x3c6)](this['instanceName']+'\x20('+this[_0x4de2d6(0x3d0)][_0x4de2d6(0x4ae)]+_0x4de2d6(0x71a)+_0x5900de),new x(_0x5900de);}}async[a0_0x3cfc7d(0x5b1)](_0x11abb3){const _0x2bff85=a0_0x3cfc7d;try{let _0x50a6ce=await this[_0x2bff85(0x495)][_0x2bff85(0x80d)](_0x11abb3['groupJid'],_0x11abb3['expiration']);return{'success':!0x0};}catch(_0x19835d){let _0x4afbc7='Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral',_0x56d07f=_0x19835d instanceof Error?_0x19835d[_0x2bff85(0x70f)]:typeof _0x19835d==_0x2bff85(0x54e)?JSON['stringify'](_0x19835d):_0x19835d,_0x1826c9=_0x4afbc7+':\x20'+_0x56d07f;throw this[_0x2bff85(0x478)][_0x2bff85(0x3c6)](this[_0x2bff85(0x1c7)]+'\x20('+this[_0x2bff85(0x3d0)][_0x2bff85(0x4ae)]+_0x2bff85(0x71a)+_0x1826c9),new x(_0x1826c9);}}async['groupSetting'](_0x28d9f2){const _0x2e1d5d=a0_0x3cfc7d;try{return await this[_0x2e1d5d(0x495)][_0x2e1d5d(0x11f)](_0x28d9f2[_0x2e1d5d(0x669)],_0x28d9f2[_0x2e1d5d(0x685)]),{'update':_0x2e1d5d(0x20f)};}catch(_0x24239f){let _0x449c43=_0x2e1d5d(0x48b),_0x2ef87c=_0x24239f instanceof Error?_0x24239f[_0x2e1d5d(0x70f)]:typeof _0x24239f=='object'?JSON['stringify'](_0x24239f):_0x24239f,_0x54dda8=_0x449c43+':\x20'+_0x2ef87c;throw this['logger']['error'](this[_0x2e1d5d(0x1c7)]+'\x20('+this[_0x2e1d5d(0x3d0)][_0x2e1d5d(0x4ae)]+_0x2e1d5d(0x71a)+_0x54dda8),new x(_0x54dda8);}}async['updateGroupPicture'](_0x13ce62){const _0x22103c=a0_0x3cfc7d;try{let _0x3bec79;if((0x0,J[_0x22103c(0x344)])(_0x13ce62[_0x22103c(0x5f6)])){let _0x2fccce=new Date()[_0x22103c(0x64e)](),_0x22ab3a=_0x13ce62[_0x22103c(0x5f6)]+'?timestamp='+_0x2fccce;_0x3bec79=(await K[_0x22103c(0x879)][_0x22103c(0x840)](_0x22ab3a,{'responseType':_0x22103c(0x37c)}))['data'];}else{if((0x0,J[_0x22103c(0x320)])(_0x13ce62[_0x22103c(0x5f6)]))_0x3bec79=Buffer[_0x22103c(0x6c7)](_0x13ce62[_0x22103c(0x5f6)],_0x22103c(0x622));else throw new m(_0x22103c(0x718));}return await this[_0x22103c(0x495)][_0x22103c(0x7de)](_0x13ce62[_0x22103c(0x669)],_0x3bec79),{'update':_0x22103c(0x20f)};}catch(_0x4dad31){let _0x1de8bd=_0x22103c(0x607),_0x520b22=_0x4dad31 instanceof Error?_0x4dad31[_0x22103c(0x70f)]:typeof _0x4dad31==_0x22103c(0x54e)?JSON[_0x22103c(0x238)](_0x4dad31):_0x4dad31,_0x948bdd=_0x1de8bd+':\x20'+_0x520b22;throw this['logger'][_0x22103c(0x3c6)](this[_0x22103c(0x1c7)]+'\x20('+this[_0x22103c(0x3d0)][_0x22103c(0x4ae)]+_0x22103c(0x71a)+_0x948bdd),new x(_0x948bdd);}}},jt=class u{constructor(_0x47cc05,_0x118e98,_0x301339){const _0x38dada=a0_0x3cfc7d;this['eventEmitter']=_0x47cc05,this[_0x38dada(0x497)]=_0x118e98,this[_0x38dada(0x67f)]=_0x301339,this['db']={},this['redis']={},this[_0x38dada(0x478)]=new $(u[_0x38dada(0x75b)]),this[_0x38dada(0x7f6)]={},(this['removeInstance'](),this[_0x38dada(0x829)](),Object[_0x38dada(0x442)](this['db'],_0x118e98[_0x38dada(0x840)](_0x38dada(0x621))),Object[_0x38dada(0x442)](this[_0x38dada(0x678)],_0x118e98['get'](_0x38dada(0x335))),this[_0x38dada(0x4c9)]=this['db']['ENABLED']?this[_0x38dada(0x67f)][_0x38dada(0x596)]?.['db'](this['db']['CONNECTION'][_0x38dada(0x1bc)]+_0x38dada(0x22d)):void 0x0,this[_0x38dada(0x355)]=this[_0x38dada(0x678)][_0x38dada(0x78c)]?new ue(this[_0x38dada(0x678)]):void 0x0);}async['instanceInfo'](_0x4ec71e){const _0x53399f=a0_0x3cfc7d;if(_0x4ec71e&&!this[_0x53399f(0x7f6)][_0x4ec71e])throw new U(_0x53399f(0x2d3)+_0x4ec71e+_0x53399f(0x2fb));let _0x291a4e=[];for await(let [_0xb1b656,_0x5c7280]of Object['entries'](this[_0x53399f(0x7f6)]))if(_0x5c7280&&_0x5c7280[_0x53399f(0x1ed)][_0x53399f(0x672)]===_0x53399f(0x19a)){let _0x8a290f=await this[_0x53399f(0x67f)]['auth'][_0x53399f(0x1c4)](_0xb1b656);_0x291a4e['push']({'instance':{'instanceName':_0xb1b656,'apikey':_0x8a290f[_0x53399f(0x763)],'owner':_0x5c7280[_0x53399f(0x4ae)],'profileName':await _0x5c7280[_0x53399f(0x5fc)]()||_0x53399f(0x633),'profilePictureUrl':_0x5c7280[_0x53399f(0x2ae)]}});}return _0x291a4e[_0x53399f(0x1c4)](_0x28ee97=>_0x28ee97[_0x53399f(0x3d0)]['instanceName']===_0x4ec71e)??_0x291a4e;}async[a0_0x3cfc7d(0x59e)](_0x3e9b7f){const _0x402a56=a0_0x3cfc7d;if(this['db'][_0x402a56(0x78c)]&&(await this[_0x402a56(0x67f)]['dbServer'][_0x402a56(0x242)](),(await this['dbInstance']['collections']())[_0x402a56(0x11c)]>0x0&&await this[_0x402a56(0x4c9)][_0x402a56(0x47d)](_0x3e9b7f)),this['redis'][_0x402a56(0x78c)]){this[_0x402a56(0x355)]['reference']=_0x3e9b7f,await this[_0x402a56(0x355)][_0x402a56(0x4a4)]();return;}}async[a0_0x3cfc7d(0x1fa)](){const _0x2bed3f=a0_0x3cfc7d;await this[_0x2bed3f(0x57c)]();let _0x2d3d11=async _0x5d5781=>{const _0x1f0207=_0x2bed3f;let _0x522b1d=new $e(this[_0x1f0207(0x497)],this[_0x1f0207(0x282)],this[_0x1f0207(0x67f)]);_0x522b1d[_0x1f0207(0x1c7)]=_0x5d5781,await _0x522b1d[_0x1f0207(0x3db)](),this[_0x1f0207(0x7f6)][_0x5d5781]=_0x522b1d;};try{if(this[_0x2bed3f(0x678)]['ENABLED']){let _0x112c91=await this[_0x2bed3f(0x355)][_0x2bed3f(0x645)]();_0x112c91?.[_0x2bed3f(0x11c)]>0x0&&_0x112c91['forEach'](async _0xb0368=>await _0x2d3d11(_0xb0368[_0x2bed3f(0x407)](':')[0x1]));return;}if(this['db'][_0x2bed3f(0x78c)]){await this[_0x2bed3f(0x67f)][_0x2bed3f(0x596)][_0x2bed3f(0x242)]();let _0x4f2eca=await this[_0x2bed3f(0x4c9)][_0x2bed3f(0x590)]();_0x4f2eca[_0x2bed3f(0x11c)]>0x0&&_0x4f2eca[_0x2bed3f(0x455)](async _0x37c7d8=>await _0x2d3d11(_0x37c7d8[_0x2bed3f(0x5db)][_0x2bed3f(0x5e0)](/^[\w-]+\./,'')));return;}}catch(_0x407bf0){this[_0x2bed3f(0x478)]['error'](_0x407bf0);}}async[a0_0x3cfc7d(0x3a5)](){const _0x18a507=a0_0x3cfc7d;try{let _0x40e6d7=await this[_0x18a507(0x67f)][_0x18a507(0x1cf)][_0x18a507(0x6c6)]({'online':!0x1});console['log'](_0x18a507(0x251)+_0x40e6d7[_0x18a507(0x11c)]);let _0x18882f={'online':!0x1},_0x5ecadf=await this['repository'][_0x18a507(0x1cf)][_0x18a507(0x892)](_0x18882f);console[_0x18a507(0x547)](_0x18a507(0x74e)+_0x5ecadf[_0x18a507(0x7cf)]);}catch(_0x1c4211){console[_0x18a507(0x3c6)]('Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:',_0x1c4211);}}async['InstancesAlterarTodas'](){const _0x1cb284=a0_0x3cfc7d;try{let _0x110875={'online':!0x1},_0x3eaea3={'online':!0x1,'lastDisconnect':Date[_0x1cb284(0x6aa)]()},_0x509271=await this[_0x1cb284(0x67f)][_0x1cb284(0x1cf)][_0x1cb284(0x691)](_0x110875,_0x3eaea3);await this['cleanDisconnectedInstances']();}catch(_0x10028c){console[_0x1cb284(0x3c6)]('Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:',_0x10028c);}}['removeInstance'](){const _0x105a38=a0_0x3cfc7d;this['eventEmitter']['on'](_0x105a38(0x60a),async _0xbee2d0=>{const _0x526277=_0x105a38;try{this[_0x526277(0x7f6)][_0xbee2d0]=void 0x0;}catch{}try{this[_0x526277(0x59e)](_0xbee2d0);}finally{this['logger'][_0x526277(0x7e0)](_0x526277(0x2d3)+_0xbee2d0+_0x526277(0x6fd));}});}['noConnection'](){const _0xe433aa=a0_0x3cfc7d;this[_0xe433aa(0x282)]['on'](_0xe433aa(0x85a),async _0x5ba308=>{const _0xeb1f37=_0xe433aa;try{this[_0xeb1f37(0x7f6)][_0x5ba308]=void 0x0;}catch{}try{this[_0xeb1f37(0x59e)](_0x5ba308);}finally{this['logger'][_0xeb1f37(0x7e0)]('Instance\x20\x22'+_0x5ba308+_0xeb1f37(0x12e));}});}},Jt=class extends O{['getChatModelForOwner'](_0x583682){return ta(_0x583682);}async[a0_0x3cfc7d(0x6d6)](_0x5002af){const _0x43689b=a0_0x3cfc7d;if(_0x5002af['length']!==0x0)try{return{'insertCount':(await this[_0x43689b(0x54a)](_0x5002af[0x0]['owner'])[_0x43689b(0x756)]([..._0x5002af]))[_0x43689b(0x11c)]};}catch(_0x340625){return _0x340625;}}async[a0_0x3cfc7d(0x1c4)](_0xecc987,_0x2d6f2a){const _0x10e30a=a0_0x3cfc7d;try{let _0x3ccd16=this[_0x10e30a(0x54a)](_0x2d6f2a),_0x53a909=A(_0xecc987[_0x10e30a(0x851)]);return await _0x3ccd16['find'](_0x53a909)[_0x10e30a(0x476)]({'lastmsg':-0x1})[_0x10e30a(0x1bf)](_0xecc987?.['limit']??0x0)[_0x10e30a(0x6cd)]();}catch{return[];}}async[a0_0x3cfc7d(0x766)](_0x155098,_0x177e81){const _0x3a60d3=a0_0x3cfc7d;try{let _0x38c357=this['getChatModelForOwner'](_0x177e81),_0x27b395=A(_0x155098['where']);return _0x27b395[_0x3a60d3(0x619)]={'$ne':[]},await _0x38c357['find'](_0x27b395)[_0x3a60d3(0x476)]({'lastmsg':-0x1})[_0x3a60d3(0x1bf)](_0x155098?.[_0x3a60d3(0x1bf)]??0x0)[_0x3a60d3(0x6cd)]();}catch{return[];}}async['delete'](_0x3a8ad3,_0x33d72d){const _0x4d1a8b=a0_0x3cfc7d;try{return{'deletedCount':(await this[_0x4d1a8b(0x54a)](_0x33d72d)['deleteMany']({..._0x3a8ad3['where']}))[_0x4d1a8b(0x55c)]};}catch(_0x1ca102){return{'error':_0x1ca102?.[_0x4d1a8b(0x885)]()};}}async['deleteAll'](_0x5790e3,_0x5b9e6e){const _0x1a7bef=a0_0x3cfc7d;try{return await this['getChatModelForOwner'](_0x5b9e6e)[_0x1a7bef(0x892)]({..._0x5790e3['where']}),[];}catch(_0x170fa9){return{'error':_0x170fa9?.[_0x1a7bef(0x885)]()};}}async[a0_0x3cfc7d(0x36a)](_0x5986dc,_0x48a692){const _0x175e3b=a0_0x3cfc7d;try{let _0x67dd3c=this['getChatModelForOwner'](_0x48a692),_0x22a7ab=A(_0x5986dc['where']);return await _0x67dd3c[_0x175e3b(0x36a)](_0x22a7ab)[_0x175e3b(0x6cd)]();}catch{return null;}}async[a0_0x3cfc7d(0x104)](_0x4b5da8,_0x3091ee,_0x42467f,_0x42ca44,_0x4f16ec=a0_0x3cfc7d(0x5ad)){const _0x4aae19=a0_0x3cfc7d;try{let _0x75b7cf={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x42ca44},_0xe557b5=this['getChatModelForOwner'](_0x42467f),_0x471191=A(_0x4b5da8['where']);Object[_0x4aae19(0x1a4)](_0x3091ee)[_0x4aae19(0x455)](_0x151469=>{_0x3091ee[_0x151469]==null&&delete _0x3091ee[_0x151469];});let _0x3445a7={};return _0x3445a7[_0x4f16ec]=_0x3091ee,await _0xe557b5[_0x4aae19(0x5c3)](_0x471191,_0x3445a7,_0x75b7cf);}catch(_0x3e32db){return console[_0x4aae19(0x3c6)](_0x3e32db),null;}}async[a0_0x3cfc7d(0x609)](_0x303e59){const _0x2aecf=a0_0x3cfc7d;try{let _0x2b48c3=this[_0x2aecf(0x54a)](_0x303e59[0x0][_0x2aecf(0x72c)][_0x2aecf(0x851)][_0x2aecf(0x6a6)]),_0x3b5bd1=_0x303e59[_0x2aecf(0x733)](_0x45806a=>({'updateOne':{'filter':{..._0x45806a[_0x2aecf(0x72c)]['where']},'update':{'$set':_0x45806a[_0x2aecf(0x3f8)]},'upsert':!0x0}})),_0x40dea0=await _0x2b48c3[_0x2aecf(0x815)](_0x3b5bd1);return _0x40dea0['modifiedCount']+_0x40dea0['upsertedCount'];}catch(_0x4403ba){return console['error'](_0x4403ba),0x0;}}async[a0_0x3cfc7d(0x777)](_0x8062f4){const _0x378e87=a0_0x3cfc7d;try{let _0x4bde6c={'group_isCommunity':'','group_announce':'','group_size':''},_0x3a7dbb={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x37866f={'$unset':_0x4bde6c};return(await this['getChatModelForOwner'](_0x8062f4)['updateMany'](_0x3a7dbb,_0x37866f))[_0x378e87(0x228)];}catch(_0x5c6417){return console[_0x378e87(0x3c6)](_0x378e87(0x681),_0x5c6417),0x0;}}async[a0_0x3cfc7d(0x72b)](_0x228b17){const _0x4263c1=a0_0x3cfc7d;try{let _0x36c9eb=this[_0x4263c1(0x54a)](_0x228b17),_0x3ee757={'leadInfo.etiquetas':{'$exists':!0x1}},_0x524322={'$set':{'leadInfo.etiquetas':[]}};return(await _0x36c9eb[_0x4263c1(0x609)](_0x3ee757,_0x524322))['modifiedCount'];}catch(_0x1e03b8){return console[_0x4263c1(0x3c6)](_0x1e03b8),0x0;}}async['updateMissingTags'](_0x31381a){const _0x15b52c=a0_0x3cfc7d;try{let _0x477880=this[_0x15b52c(0x54a)](_0x31381a),_0x5e3446={'leadInfo.tags':{'$exists':!0x1}},_0x50b066={'$set':{'leadInfo.tags':[]}};return(await _0x477880[_0x15b52c(0x609)](_0x5e3446,_0x50b066))[_0x15b52c(0x228)];}catch(_0x6b813d){return console['error'](_0x6b813d),0x0;}}async[a0_0x3cfc7d(0x68d)](_0x5c3688){const _0x513763=a0_0x3cfc7d;try{let _0x2cb97e=this[_0x513763(0x54a)](_0x5c3688),_0x43240b={'leadInfo.customFields':{'$exists':!0x1}},_0x105988={'$set':{'leadInfo.customFields':[]}};return(await _0x2cb97e['updateMany'](_0x43240b,_0x105988))[_0x513763(0x228)];}catch(_0x1b632b){return console[_0x513763(0x3c6)](_0x1b632b),0x0;}}async[a0_0x3cfc7d(0x756)](_0x3735e7,_0x5a980d){const _0x23388d=a0_0x3cfc7d;if(!Array[_0x23388d(0x2f5)](_0x3735e7)||_0x3735e7[_0x23388d(0x11c)]===0x0)throw new Error(_0x23388d(0x841));try{return(await this[_0x23388d(0x54a)](_0x5a980d)[_0x23388d(0x756)](_0x3735e7))[_0x23388d(0x11c)];}catch(_0x1d3ab9){throw console[_0x23388d(0x3c6)]('Erro\x20ao\x20inserir\x20chats:',_0x1d3ab9),_0x1d3ab9;}}async[a0_0x3cfc7d(0x373)](_0x291705,_0x51f70d){const _0x52c3a5=a0_0x3cfc7d;try{await this[_0x52c3a5(0x54a)](_0x51f70d)['deleteOne']({'_id':_0x291705});}catch(_0x29f9ad){throw console[_0x52c3a5(0x3c6)](_0x52c3a5(0x192),_0x29f9ad),_0x29f9ad;}}},qt=class extends O{constructor(_0x1d7477,_0x1c8e04,_0x71d05f){const _0x2b532a=a0_0x3cfc7d;super(_0x1c8e04),this[_0x2b532a(0x435)]=_0x1d7477,this[_0x2b532a(0x497)]=_0x1c8e04,this[_0x2b532a(0x78e)]=_0x71d05f;}async[a0_0x3cfc7d(0x6d6)](_0x3e256d){const _0x2c4306=a0_0x3cfc7d;if(_0x3e256d['length']!==0x0)try{return{'insertCount':(await this[_0x2c4306(0x435)][_0x2c4306(0x756)]([..._0x3e256d]))[_0x2c4306(0x11c)]};}catch(_0x4d3fa5){return _0x4d3fa5;}}async[a0_0x3cfc7d(0x3f8)](_0x39b263,_0x4c2f84){const _0x105dba=a0_0x3cfc7d;try{let _0x48bd3e=A(_0x39b263[_0x105dba(0x851)]);return{'updatedCount':(await this[_0x105dba(0x435)][_0x105dba(0x609)](_0x48bd3e,{'$set':_0x4c2f84}))[_0x105dba(0x228)]};}catch(_0x27f65d){return console[_0x105dba(0x3c6)](_0x105dba(0x746),_0x27f65d),{'error':_0x27f65d[_0x105dba(0x885)]()};}}async[a0_0x3cfc7d(0x41c)](_0x3d76ec){const _0xb7bf68=a0_0x3cfc7d;try{let _0x2b4666={'_id':{'$in':_0x3d76ec}};return await this[_0xb7bf68(0x435)][_0xb7bf68(0x1c4)](_0x2b4666)[_0xb7bf68(0x6cd)]();}catch(_0x5823d9){return console[_0xb7bf68(0x3c6)](_0xb7bf68(0x801),_0x5823d9),[];}}async['delete'](_0x150364){const _0x89dddd=a0_0x3cfc7d;try{return{'deletedCount':(await this[_0x89dddd(0x435)]['deleteMany']({..._0x150364[_0x89dddd(0x851)]}))[_0x89dddd(0x55c)]};}catch(_0x10898f){return{'error':_0x10898f?.[_0x89dddd(0x885)]()};}}async[a0_0x3cfc7d(0x1c4)](_0x35d16f){const _0x575340=a0_0x3cfc7d;try{let _0x4dded7=A(_0x35d16f[_0x575340(0x851)]);return await this['cacheContactModel'][_0x575340(0x1c4)](_0x4dded7)[_0x575340(0x1bf)](_0x35d16f?.['limit']??0x0)['lean']();}catch{return[];}}async[a0_0x3cfc7d(0x36a)](_0x14d4c4){const _0xa93ca=a0_0x3cfc7d;try{let _0x48c56b=A(_0x14d4c4['where']);return await this['cacheContactModel']['findOne'](_0x48c56b)[_0xa93ca(0x6cd)]();}catch{return null;}}},Vt=class extends O{constructor(_0x387264,_0x54ee6a,_0x4bcb5b){const _0x283eef=a0_0x3cfc7d;super(_0x54ee6a),this[_0x283eef(0x14c)]=_0x387264,this[_0x283eef(0x497)]=_0x54ee6a,this[_0x283eef(0x78e)]=_0x4bcb5b;}async[a0_0x3cfc7d(0x6d6)](_0x1cee35){const _0x167e89=a0_0x3cfc7d;if(_0x1cee35[_0x167e89(0x11c)]!==0x0)try{return{'insertCount':(await this[_0x167e89(0x14c)][_0x167e89(0x756)]([..._0x1cee35]))[_0x167e89(0x11c)]};}catch(_0x16bf9b){return _0x16bf9b;}}async[a0_0x3cfc7d(0x3f8)](_0x2decbc,_0x7b00b9){const _0x382492=a0_0x3cfc7d;try{let _0x25dd0f=A(_0x2decbc[_0x382492(0x851)]);return{'updatedCount':(await this['messageLogsModel']['updateMany'](_0x25dd0f,{'$set':_0x7b00b9}))[_0x382492(0x228)]};}catch(_0x5133ac){return console[_0x382492(0x3c6)](_0x382492(0x746),_0x5133ac),{'error':_0x5133ac[_0x382492(0x885)]()};}}async[a0_0x3cfc7d(0x7fb)](_0xd33a40){const _0xeb9502=a0_0x3cfc7d;try{return{'deletedCount':(await this[_0xeb9502(0x14c)][_0xeb9502(0x892)]({..._0xd33a40[_0xeb9502(0x851)]}))[_0xeb9502(0x55c)]};}catch(_0x535634){return{'error':_0x535634?.['toString']()};}}async[a0_0x3cfc7d(0x36a)](_0x470fd7){const _0x72c319=a0_0x3cfc7d;try{let _0x54ec7a=A(_0x470fd7[_0x72c319(0x851)]);return await this['messageLogsModel'][_0x72c319(0x36a)](_0x54ec7a)[_0x72c319(0x6cd)]();}catch{return null;}}},Gt=class extends O{[a0_0x3cfc7d(0x1e2)](_0x1db174){return va(_0x1db174);}async['updateOne'](_0x4531cb,_0x21bf98,_0x34e2e3,_0x4302f3){const _0x21653a=a0_0x3cfc7d;try{let _0x1c1f55={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x4302f3},_0x366a6b=this[_0x21653a(0x1e2)](_0x34e2e3),_0x4d68bf=A(_0x4531cb[_0x21653a(0x851)]);return await _0x366a6b[_0x21653a(0x5c3)](_0x4d68bf,{'$set':_0x21bf98},_0x1c1f55);}catch(_0x13704e){return console['error'](_0x13704e),null;}}async[a0_0x3cfc7d(0x1c4)](_0x3912e5,_0x590a97){const _0x4291f9=a0_0x3cfc7d;try{let _0x5ccc89=this[_0x4291f9(0x1e2)](_0x590a97),_0x3210ad=A(_0x3912e5[_0x4291f9(0x851)]);return await _0x5ccc89[_0x4291f9(0x1c4)](_0x3210ad);}catch(_0x27b548){console[_0x4291f9(0x3c6)](_0x27b548);}}async[a0_0x3cfc7d(0x7fb)](_0xde486e,_0x4507ab){const _0x129312=a0_0x3cfc7d;try{let _0x51596b=this['getLabelModelForOwner'](_0x4507ab),_0x198a90=A(_0xde486e[_0x129312(0x851)]);await _0x51596b[_0x129312(0x892)](_0x198a90);}catch(_0x23728a){console[_0x129312(0x3c6)](_0x23728a);}}async['deleteAll'](_0x1a1d79){const _0xc61af4=a0_0x3cfc7d;try{return await this[_0xc61af4(0x1e2)](_0x1a1d79)[_0xc61af4(0x86d)][_0xc61af4(0x814)](),{'success':!0x0};}catch(_0x44d384){return console['error'](_0x44d384),{'success':!0x1,'error':_0x44d384};}}},Bt=class{constructor(_0x4d1ad4){const _0x280261=a0_0x3cfc7d;this[_0x280261(0x3a2)]=_0x4d1ad4;}async['editChat']({instanceName:_0x536e5e},_0x52f68f){const _0x1e658c=a0_0x3cfc7d;return await this[_0x1e658c(0x3a2)][_0x1e658c(0x7f6)][_0x536e5e][_0x1e658c(0x53f)](_0x52f68f);}async[a0_0x3cfc7d(0x434)]({instanceName:_0x3109ea},_0x6a2246){const _0x4c273e=a0_0x3cfc7d;return await this[_0x4c273e(0x3a2)]['waInstances'][_0x3109ea][_0x4c273e(0x434)](_0x6a2246);}async[a0_0x3cfc7d(0x3c0)]({instanceName:_0x32ad6d},_0x3530fb){const _0x5882b3=a0_0x3cfc7d;return await this[_0x5882b3(0x3a2)]['waInstances'][_0x32ad6d][_0x5882b3(0x3c0)](_0x3530fb);}async[a0_0x3cfc7d(0x1ac)]({instanceName:_0x2000ac},_0x5b455f){const _0x1f096c=a0_0x3cfc7d;return await this['waMonitor']['waInstances'][_0x2000ac][_0x1f096c(0x66f)](_0x5b455f);}async[a0_0x3cfc7d(0x803)]({instanceName:_0x29f6f3},_0x50ac72){const _0x1c0147=a0_0x3cfc7d;return await this[_0x1c0147(0x3a2)][_0x1c0147(0x7f6)][_0x29f6f3][_0x1c0147(0x803)](_0x50ac72);}async[a0_0x3cfc7d(0x726)]({instanceName:_0x18b555},_0x4f4e54){const _0x4257a7=a0_0x3cfc7d;return await this['waMonitor'][_0x4257a7(0x7f6)][_0x18b555][_0x4257a7(0x726)](_0x4f4e54);}async[a0_0x3cfc7d(0x808)]({instanceName:_0x26ca9d},_0x50cbe3){const _0x1a5867=a0_0x3cfc7d;return await this[_0x1a5867(0x3a2)][_0x1a5867(0x7f6)][_0x26ca9d][_0x1a5867(0x1e6)](_0x50cbe3[_0x1a5867(0x162)]);}async[a0_0x3cfc7d(0x45b)]({instanceName:_0x1ab208},_0x5fd9bf){const _0x589956=a0_0x3cfc7d;return await this[_0x589956(0x3a2)][_0x589956(0x7f6)][_0x1ab208][_0x589956(0x45b)](_0x5fd9bf[_0x589956(0x162)]);}async[a0_0x3cfc7d(0x4bc)]({instanceName:_0x5567f6},_0x2fd685){const _0x2d99d0=a0_0x3cfc7d;return await this[_0x2d99d0(0x3a2)][_0x2d99d0(0x7f6)][_0x5567f6][_0x2d99d0(0x4bc)](_0x2fd685);}async[a0_0x3cfc7d(0x623)]({instanceName:_0x2fc947},_0x31f64a){const _0x5885de=a0_0x3cfc7d;return await this[_0x5885de(0x3a2)][_0x5885de(0x7f6)][_0x2fc947]['fetchContacts'](_0x31f64a);}async[a0_0x3cfc7d(0x224)]({instanceName:_0x27cedc},_0x502ae7){const _0x50dddb=a0_0x3cfc7d;return await this[_0x50dddb(0x3a2)]['waInstances'][_0x27cedc]['getBase64FromMediaMessage'](_0x502ae7);}async[a0_0x3cfc7d(0x773)]({instanceName:_0x295903},_0x4c15d6){const _0x530dd3=a0_0x3cfc7d;return await this[_0x530dd3(0x3a2)]['waInstances'][_0x295903][_0x530dd3(0x773)](_0x4c15d6);}async['fetchLabels']({instanceName:_0x5b7c03}){const _0x13ee9b=a0_0x3cfc7d;return await this['waMonitor'][_0x13ee9b(0x7f6)][_0x5b7c03][_0x13ee9b(0x4ff)]();}async[a0_0x3cfc7d(0x307)]({instanceName:_0x2ff969}){const _0x1a27cb=a0_0x3cfc7d;return await this[_0x1a27cb(0x3a2)][_0x1a27cb(0x7f6)][_0x2ff969][_0x1a27cb(0x307)]();}async['fetchPrivacySettings']({instanceName:_0xfc94ae}){const _0x5587b1=a0_0x3cfc7d;return await this[_0x5587b1(0x3a2)][_0x5587b1(0x7f6)][_0xfc94ae][_0x5587b1(0x384)]();}async[a0_0x3cfc7d(0x6e3)]({instanceName:_0x3ac7ba},_0x43b4be){const _0x301f12=a0_0x3cfc7d;return await this[_0x301f12(0x3a2)][_0x301f12(0x7f6)][_0x3ac7ba]['updatePrivacySettings'](_0x43b4be);}async[a0_0x3cfc7d(0x2b3)]({instanceName:_0x1b3471},_0x28114f){const _0x58a4aa=a0_0x3cfc7d;return await this[_0x58a4aa(0x3a2)][_0x58a4aa(0x7f6)][_0x1b3471]['fetchBusinessProfile'](_0x28114f[_0x58a4aa(0x162)]);}async[a0_0x3cfc7d(0x54c)]({instanceName:_0x501660},_0x148e69){const _0xd489ee=a0_0x3cfc7d;return await this[_0xd489ee(0x3a2)][_0xd489ee(0x7f6)][_0x501660][_0xd489ee(0x54c)](_0x148e69[_0xd489ee(0x75b)]);}async[a0_0x3cfc7d(0x6a2)]({instanceName:_0x35a5a4},_0xd9392e){const _0x3ac4e0=a0_0x3cfc7d;return await this['waMonitor']['waInstances'][_0x35a5a4][_0x3ac4e0(0x6a2)](_0xd9392e[_0x3ac4e0(0x204)]);}async['updateProfilePicture']({instanceName:_0x5d8c6f},_0x19d395){const _0x595830=a0_0x3cfc7d;return await this[_0x595830(0x3a2)][_0x595830(0x7f6)][_0x5d8c6f]['updateProfilePicture'](_0x19d395['picture']);}async[a0_0x3cfc7d(0x591)]({instanceName:_0x249c44},_0x7e6f97){const _0x5d8f41=a0_0x3cfc7d;return await this[_0x5d8f41(0x3a2)][_0x5d8f41(0x7f6)][_0x249c44]['removeProfilePicture']();}},Wt=require(a0_0x3cfc7d(0x28b)),zt=class u{constructor(_0x2f8477,_0xaee3ef,_0x19a39a,_0x334045,_0x3011d3){const _0x20a2d7=a0_0x3cfc7d;this['waMonitor']=_0x2f8477,this[_0x20a2d7(0x497)]=_0xaee3ef,this['repository']=_0x19a39a,this['eventEmitter']=_0x334045,this[_0x20a2d7(0x3ab)]=_0x3011d3,this['logger']=new $(u[_0x20a2d7(0x75b)]);}async[a0_0x3cfc7d(0x30f)]({instanceName:_0xc6c62d,apikey:_0x56e1b3,number:_0x55273d,proxy:_0x2752fa=!0x0}){const _0x4aa504=a0_0x3cfc7d;try{let _0x407bb2=new $e(this[_0x4aa504(0x497)],this['eventEmitter'],this[_0x4aa504(0x67f)]);_0x407bb2[_0x4aa504(0x1c7)]=_0xc6c62d,this[_0x4aa504(0x3a2)]['waInstances'][_0x407bb2['instanceName']]=_0x407bb2;let _0x367541={};_0x56e1b3?(await this[_0x4aa504(0x67f)][_0x4aa504(0x1cf)][_0x4aa504(0x19b)]({'apikey':_0x56e1b3},_0xc6c62d),_0x367541[_0x4aa504(0x763)]=_0x56e1b3):_0x367541=await this[_0x4aa504(0x3ab)][_0x4aa504(0x689)]({'instanceName':_0x407bb2[_0x4aa504(0x1c7)]});let _0x35a56a;if(_0x55273d){if(_0x35a56a=await this[_0x4aa504(0x543)](_0x55273d),_0x35a56a[_0x4aa504(0x3c6)])throw new x(_0x35a56a[_0x4aa504(0x3c6)][_0x4aa504(0x885)]());_0x55273d=_0x35a56a[_0x4aa504(0x162)];}let _0x2697bf;return await _0x407bb2[_0x4aa504(0x3db)](_0x55273d),await(0x0,Wt[_0x4aa504(0x21c)])(0xfa0),_0x55273d&&await(0x0,Wt[_0x4aa504(0x21c)])(0xbb8),_0x2697bf=_0x407bb2['qrCode'],{'instance':{'instanceName':_0x407bb2['instanceName'],'status':_0x4aa504(0x68f)},'hash':_0x367541,'qrcode':_0x2697bf};}catch(_0x5bbc40){throw this[_0x4aa504(0x478)]['error'](_0x5bbc40),_0x5bbc40;}}async['connectToWhatsappController']({instanceName:_0x5af723,number:_0x243ef5=null}){const _0x1c057d=a0_0x3cfc7d;try{let _0x5ec57e=this[_0x1c057d(0x3a2)][_0x1c057d(0x7f6)][_0x5af723];switch(_0x5ec57e?.[_0x1c057d(0x1ed)]?.[_0x1c057d(0x672)]){case'close':return await _0x5ec57e['connectToWhatsapp'](_0x243ef5),await(0x0,Wt['delay'])(0x7d0),_0x5ec57e[_0x1c057d(0x862)];case _0x1c057d(0x789):return _0x5ec57e[_0x1c057d(0x862)];default:return await this[_0x1c057d(0x537)]({'instanceName':_0x5af723});}}catch(_0x4ae036){this[_0x1c057d(0x478)][_0x1c057d(0x547)](_0x4ae036);}}async[a0_0x3cfc7d(0x537)]({instanceName:_0x599828}){const _0x177040=a0_0x3cfc7d;let _0xb2f90e=this[_0x177040(0x3a2)][_0x177040(0x7f6)][_0x599828]['connectionStatus'],_0x36b6c6=null;_0xb2f90e[_0x177040(0x672)]===_0x177040(0x19a)&&_0x599828&&(_0x36b6c6=await this[_0x177040(0x3a2)][_0x177040(0x504)](_0x599828));let _0x2b70ac=null;return _0xb2f90e[_0x177040(0x672)]==='connecting'&&_0x599828&&(_0x2b70ac=this['waMonitor'][_0x177040(0x7f6)][_0x599828][_0x177040(0x862)]),{'instance':_0x599828,'connectionStatus':_0xb2f90e,'instanceInfo':_0x36b6c6,'qrcode':_0x2b70ac};}async[a0_0x3cfc7d(0x543)](_0x3f9e24){const _0x242fb4=a0_0x3cfc7d;_0x3f9e24=_0x3f9e24['replace'](/\D/g,'');let _0x1150a0=Object[_0x242fb4(0x1a4)](this['waMonitor']['waInstances'])['filter'](_0x583547=>{const _0x1548cd=_0x242fb4;let _0x4fa6dd=this[_0x1548cd(0x3a2)][_0x1548cd(0x7f6)][_0x583547];return _0x4fa6dd&&_0x4fa6dd[_0x1548cd(0x1ed)]&&_0x4fa6dd[_0x1548cd(0x1ed)]['state']===_0x1548cd(0x19a);});if(_0x1150a0[_0x242fb4(0x11c)]===0x0)return{'number':this[_0x242fb4(0x15d)](_0x3f9e24)};let _0xa6ffd=Math[_0x242fb4(0x532)](Math[_0x242fb4(0x6eb)]()*_0x1150a0['length']),_0x43d0c1=_0x1150a0[_0xa6ffd];try{let _0xd2553e=(await this[_0x242fb4(0x3a2)]['waInstances'][_0x43d0c1][_0x242fb4(0x434)]({'numbers':[_0x3f9e24]}))[_0x242fb4(0x428)]();return _0xd2553e[_0x242fb4(0x78a)]?{'number':_0xd2553e[_0x242fb4(0x69c)][_0x242fb4(0x5e0)](_0x242fb4(0x10f),'')}:{'number':_0x3f9e24,'error':_0x242fb4(0x213)};}catch(_0x83c882){return this[_0x242fb4(0x478)][_0x242fb4(0x3c6)]('Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:'+_0x83c882),{'number':_0x3f9e24,'error':_0x242fb4(0x6c2)};}}[a0_0x3cfc7d(0x15d)](_0xa9e344){const _0x63039a=a0_0x3cfc7d;let _0x11136=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x63039a(0x73d)](_0xa9e344);if(_0x11136&&_0x11136[0x1]==='55'){let _0x3276da=_0x11136[0x2],_0x29ea6b=_0x11136[0x3],_0x192a60=_0x11136[0x4];if(parseInt(_0x3276da)>=0x1f&&_0x29ea6b==='9')return _0x11136[0x1]+_0x3276da+_0x192a60;}return _0xa9e344;}async['restartInstance']({instanceName:_0x54bc73}){const _0x5f7396=a0_0x3cfc7d;try{return this[_0x5f7396(0x3a2)]['waInstances'][_0x54bc73]?.[_0x5f7396(0x495)]?.['ws']?.[_0x5f7396(0x35b)](),{'status':_0x5f7396(0x7d3),'error':!0x1,'response':{'message':_0x5f7396(0x33a)}};}catch(_0x459398){this[_0x5f7396(0x478)][_0x5f7396(0x3c6)](_0x459398);}}async[a0_0x3cfc7d(0x3b0)]({instanceName:_0x2d0e48}){const _0x583441=a0_0x3cfc7d;return _0x2d0e48?this[_0x583441(0x3a2)]['instanceInfo'](_0x2d0e48):this['waMonitor'][_0x583441(0x504)]();}async['logout']({instanceName:_0x5ed089}){const _0x1fecb3=a0_0x3cfc7d;try{return await this[_0x1fecb3(0x3a2)]['waInstances'][_0x5ed089]?.['client']?.[_0x1fecb3(0x144)](_0x1fecb3(0x698)+_0x5ed089),{'error':!0x1,'message':'Instance\x20logged\x20out'};}catch(_0x5cb8ab){throw new x(_0x5cb8ab[_0x1fecb3(0x885)]());}}async[a0_0x3cfc7d(0x786)]({instanceName:_0x2a64a2}){const _0x28d641=a0_0x3cfc7d;if((await this['connectionState']({'instanceName':_0x2a64a2}))[_0x28d641(0x1ed)][_0x28d641(0x672)]==='open')throw new m([_0x28d641(0x1b0),_0x28d641(0x215)]);try{return delete this[_0x28d641(0x3a2)][_0x28d641(0x7f6)][_0x2a64a2],{'error':!0x1,'message':'Instance\x20deleted'};}catch(_0x324933){throw new m(_0x324933[_0x28d641(0x885)]());}}},re=require('class-validator'),Ht=class{constructor(_0xe13625){const _0x2bd6aa=a0_0x3cfc7d;this[_0x2bd6aa(0x3a2)]=_0xe13625;}async[a0_0x3cfc7d(0x5ee)]({instanceName:_0x14188d},_0xb2bc57){const _0x560b73=a0_0x3cfc7d;return await this['waMonitor'][_0x560b73(0x7f6)][_0x14188d]['textMessage'](_0xb2bc57);}async[a0_0x3cfc7d(0x54d)]({instanceName:_0x1d83ec},_0xae1638){const _0x146c6e=a0_0x3cfc7d;return await this[_0x146c6e(0x3a2)][_0x146c6e(0x7f6)][_0x1d83ec][_0x146c6e(0x175)](_0xae1638);}async[a0_0x3cfc7d(0x2e6)]({instanceName:_0x1e7d68},_0x1c04db){const _0x1da047=a0_0x3cfc7d;if((0x0,re['isBase64'])(_0x1c04db?.['mediaMessage']?.['media'])&&!_0x1c04db?.[_0x1da047(0x319)]?.[_0x1da047(0x40b)])throw new m('For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.');if((0x0,re[_0x1da047(0x344)])(_0x1c04db?.['mediaMessage']?.[_0x1da047(0x835)])||(0x0,re['isBase64'])(_0x1c04db?.[_0x1da047(0x319)]?.[_0x1da047(0x835)]))return await this[_0x1da047(0x3a2)][_0x1da047(0x7f6)][_0x1e7d68][_0x1da047(0x319)](_0x1c04db);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x3cfc7d(0x34d)]({instanceName:_0x12ff8c},_0x282875){const _0x47161a=a0_0x3cfc7d;if((0x0,re['isURL'])(_0x282875['stickerMessage'][_0x47161a(0x5f6)])||(0x0,re[_0x47161a(0x320)])(_0x282875[_0x47161a(0x485)]['image']))return await this[_0x47161a(0x3a2)][_0x47161a(0x7f6)][_0x12ff8c][_0x47161a(0x1e1)](_0x282875);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x3cfc7d(0x141)]({instanceName:_0x5ca4bb},_0x4786a5){const _0xf4f078=a0_0x3cfc7d;if((0x0,re['isURL'])(_0x4786a5[_0xf4f078(0x15c)][_0xf4f078(0x873)])||(0x0,re['isBase64'])(_0x4786a5['audioMessage'][_0xf4f078(0x873)]))return await this['waMonitor'][_0xf4f078(0x7f6)][_0x5ca4bb]['audioWhatsapp'](_0x4786a5);throw new m(_0xf4f078(0x43d));}async[a0_0x3cfc7d(0x40a)]({instanceName:_0x5a2f72},_0x53e907){const _0x38e8c6=a0_0x3cfc7d;return await this['waMonitor']['waInstances'][_0x5a2f72][_0x38e8c6(0x418)](_0x53e907);}async[a0_0x3cfc7d(0x634)]({instanceName:_0x360b71},_0x151a28){const _0x849a7a=a0_0x3cfc7d;return await this[_0x849a7a(0x3a2)][_0x849a7a(0x7f6)][_0x360b71][_0x849a7a(0x5b8)](_0x151a28);}async['sendPoll']({instanceName:_0x1d3d35},_0x2aec02){const _0x525464=a0_0x3cfc7d;return await this[_0x525464(0x3a2)][_0x525464(0x7f6)][_0x1d3d35][_0x525464(0x181)](_0x2aec02);}async[a0_0x3cfc7d(0x2e9)]({instanceName:_0x3e6836},_0x317a41){const _0x230c88=a0_0x3cfc7d;return await this[_0x230c88(0x3a2)][_0x230c88(0x7f6)][_0x3e6836][_0x230c88(0x36c)](_0x317a41);}async[a0_0x3cfc7d(0x50d)]({instanceName:_0x1eda09},_0xca8daa){const _0x3f7327=a0_0x3cfc7d;return await this[_0x3f7327(0x3a2)]['waInstances'][_0x1eda09]['contactMessage'](_0xca8daa);}async['sendReaction']({instanceName:_0xb1a0ef},_0x454c8c){const _0x2fbf60=a0_0x3cfc7d;if(!_0x454c8c[_0x2fbf60(0x6d2)][_0x2fbf60(0x779)][_0x2fbf60(0x151)](/[^\(\)\w\sà-ú"-\+]+/))throw new m('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this[_0x2fbf60(0x3a2)][_0x2fbf60(0x7f6)][_0xb1a0ef][_0x2fbf60(0x6d2)](_0x454c8c);}async[a0_0x3cfc7d(0x15a)]({instanceName:_0x942819},_0x598bf7){const _0x5d0066=a0_0x3cfc7d;return await this['waMonitor'][_0x5d0066(0x7f6)][_0x942819]['statusMessage'](_0x598bf7);}},Pi=require(a0_0x3cfc7d(0x6df)),js=require('uuid'),Kt=class u{constructor(_0x1fc03a,_0x4bce59,_0x19816a){const _0x2d9dd2=a0_0x3cfc7d;this[_0x2d9dd2(0x497)]=_0x1fc03a,this[_0x2d9dd2(0x3a2)]=_0x4bce59,this['repository']=_0x19816a,this[_0x2d9dd2(0x478)]=new $(u[_0x2d9dd2(0x75b)]);}async[a0_0x3cfc7d(0x3d7)](_0x266b57){const _0x3a87c1=a0_0x3cfc7d;let _0x5e5d44=this[_0x3a87c1(0x497)][_0x3a87c1(0x840)]('AUTHENTICATION')[_0x3a87c1(0xfc)],_0x5f320d=(0x0,Pi[_0x3a87c1(0x589)])({'instanceName':_0x266b57[_0x3a87c1(0x1c7)],'apiName':ot,'tokenId':(0x0,js['v4'])()},_0x5e5d44['SECRET'],{'expiresIn':_0x5e5d44['EXPIRIN_IN'],'encoding':_0x3a87c1(0x3f0),'subject':'g-t'}),_0x471646=await this[_0x3a87c1(0x67f)][_0x3a87c1(0x1cf)][_0x3a87c1(0x19b)]({'jwt':_0x5f320d},_0x266b57[_0x3a87c1(0x1c7)]);if(_0x471646[_0x3a87c1(0x3c6)])throw this[_0x3a87c1(0x478)]['error']({'localError':u[_0x3a87c1(0x75b)]+_0x3a87c1(0x61d),'error':_0x471646[_0x3a87c1(0x3c6)]}),new m(_0x3a87c1(0x466),_0x471646['error']?.[_0x3a87c1(0x885)]());return{'jwt':_0x5f320d};}async[a0_0x3cfc7d(0x763)](_0xb7ad9e){const _0x2502e1=a0_0x3cfc7d;let _0x399c47=(0x0,js['v4'])()[_0x2502e1(0x593)](),_0x940b5d=await this['repository'][_0x2502e1(0x1cf)]['create']({'apikey':_0x399c47},_0xb7ad9e[_0x2502e1(0x1c7)]);if(_0x940b5d['error'])throw this[_0x2502e1(0x478)][_0x2502e1(0x3c6)]({'localError':u[_0x2502e1(0x75b)]+_0x2502e1(0x61d),'error':_0x940b5d['error']}),new m(_0x2502e1(0x466),_0x940b5d['error']?.[_0x2502e1(0x885)]());return{'apikey':_0x399c47};}async[a0_0x3cfc7d(0x689)](_0x547e7b){const _0x134568=a0_0x3cfc7d;let _0x56d3de=this[_0x134568(0x497)]['get']('AUTHENTICATION');return await this[_0x56d3de[_0x134568(0x11a)]](_0x547e7b);}},Qt=class{constructor(_0x395de7){const _0xc121b5=a0_0x3cfc7d;this[_0xc121b5(0x3a2)]=_0x395de7;}async[a0_0x3cfc7d(0x535)](_0x16c03d,_0x3406fe){const _0x42afd3=a0_0x3cfc7d;return await this[_0x42afd3(0x3a2)][_0x42afd3(0x7f6)][_0x16c03d[_0x42afd3(0x1c7)]][_0x42afd3(0x535)](_0x3406fe);}async[a0_0x3cfc7d(0x4f7)](_0x195629,_0x2bcfe6){const _0x17d3e6=a0_0x3cfc7d;return await this[_0x17d3e6(0x3a2)]['waInstances'][_0x195629[_0x17d3e6(0x1c7)]][_0x17d3e6(0x4f7)](_0x2bcfe6);}async['groupDesc'](_0x279762,_0x1ebc7f){const _0x384fbe=a0_0x3cfc7d;return await this[_0x384fbe(0x3a2)][_0x384fbe(0x7f6)][_0x279762[_0x384fbe(0x1c7)]][_0x384fbe(0x154)](_0x1ebc7f);}async[a0_0x3cfc7d(0x5f4)](_0x5cda15,_0x2c0467){const _0x14299d=a0_0x3cfc7d;return await this[_0x14299d(0x3a2)][_0x14299d(0x7f6)][_0x5cda15[_0x14299d(0x1c7)]][_0x14299d(0x5f4)](_0x2c0467);}async[a0_0x3cfc7d(0x818)](_0x235037,_0x2fe388){const _0x4e384b=a0_0x3cfc7d;return await this[_0x4e384b(0x3a2)]['waInstances'][_0x235037['instanceName']][_0x4e384b(0x818)](_0x2fe388);}async[a0_0x3cfc7d(0x5ac)](_0xd32192,_0x35fffc){const _0x469eb1=a0_0x3cfc7d;return await this['waMonitor'][_0x469eb1(0x7f6)][_0xd32192[_0x469eb1(0x1c7)]][_0x469eb1(0x5ac)](_0x35fffc);}async['findGroupInfo'](_0x3703ca,_0x2f194f){const _0x48a654=a0_0x3cfc7d;return await this[_0x48a654(0x3a2)][_0x48a654(0x7f6)][_0x3703ca[_0x48a654(0x1c7)]][_0x48a654(0x6f3)](_0x2f194f);}async[a0_0x3cfc7d(0x14d)](_0x3d4bc9){const _0x695cff=a0_0x3cfc7d;return await this[_0x695cff(0x3a2)][_0x695cff(0x7f6)][_0x3d4bc9[_0x695cff(0x1c7)]][_0x695cff(0x14d)]();}async[a0_0x3cfc7d(0x286)](_0x509f0b,_0x24c0e0){const _0x2a1a05=a0_0x3cfc7d;return await this[_0x2a1a05(0x3a2)]['waInstances'][_0x509f0b[_0x2a1a05(0x1c7)]][_0x2a1a05(0x286)](_0x24c0e0);}async[a0_0x3cfc7d(0x542)](_0x5320ae,_0x4a95ed){const _0x2b1614=a0_0x3cfc7d;return await this[_0x2b1614(0x3a2)]['waInstances'][_0x5320ae['instanceName']][_0x2b1614(0x542)](_0x4a95ed);}async['groupGetInviteInfo'](_0x435037,_0x4a124e){const _0x9986da=a0_0x3cfc7d;return await this['waMonitor'][_0x9986da(0x7f6)][_0x435037['instanceName']][_0x9986da(0x15b)](_0x4a124e);}async[a0_0x3cfc7d(0x2df)](_0x851722,_0x21d66e){const _0x50af1e=a0_0x3cfc7d;return await this[_0x50af1e(0x3a2)]['waInstances'][_0x851722[_0x50af1e(0x1c7)]][_0x50af1e(0x2df)](_0x21d66e);}async[a0_0x3cfc7d(0x2f3)](_0x417b68,_0x33125b){const _0x956dcb=a0_0x3cfc7d;return await this[_0x956dcb(0x3a2)]['waInstances'][_0x417b68[_0x956dcb(0x1c7)]][_0x956dcb(0x2f3)](_0x33125b);}async[a0_0x3cfc7d(0x1de)](_0x249ce9,_0x3f33af){const _0x2f6a12=a0_0x3cfc7d;return await this[_0x2f6a12(0x3a2)][_0x2f6a12(0x7f6)][_0x249ce9[_0x2f6a12(0x1c7)]][_0x2f6a12(0x454)](_0x3f33af);}async[a0_0x3cfc7d(0x5b1)](_0x339599,_0x20fbdd){const _0x36b16e=a0_0x3cfc7d;return await this[_0x36b16e(0x3a2)][_0x36b16e(0x7f6)][_0x339599[_0x36b16e(0x1c7)]][_0x36b16e(0x5b1)](_0x20fbdd);}async[a0_0x3cfc7d(0x638)](_0x1e0241,_0x7589f){const _0x3b421c=a0_0x3cfc7d;return await this[_0x3b421c(0x3a2)]['waInstances'][_0x1e0241[_0x3b421c(0x1c7)]][_0x3b421c(0x638)](_0x7589f);}},Yt=class{constructor(_0x5e083f){const _0xc6930=a0_0x3cfc7d;this[_0xc6930(0x3a2)]=_0x5e083f;}[a0_0x3cfc7d(0x19b)](_0x542297,_0x4b3230){const _0x4e2868=a0_0x3cfc7d;return this['waMonitor'][_0x4e2868(0x7f6)][_0x542297['instanceName']]['setWebhook'](_0x4b3230);}async[a0_0x3cfc7d(0x1c4)](_0x242805){const _0x308075=a0_0x3cfc7d;try{return await this['waMonitor'][_0x308075(0x7f6)][_0x242805[_0x308075(0x1c7)]][_0x308075(0x4a9)]();}catch{return{'enabled':null,'url':''};}}},ch=new $(a0_0x3cfc7d(0x4ea)),Xt=class{constructor(_0x57e6a5){const _0x2b04c6=a0_0x3cfc7d;this[_0x2b04c6(0x3a2)]=_0x57e6a5;}async['editScheduleMessage'](_0x28a3a7,_0xc681f4){const _0x35b7d7=a0_0x3cfc7d;return await this[_0x35b7d7(0x3a2)][_0x35b7d7(0x7f6)][_0x28a3a7[_0x35b7d7(0x1c7)]][_0x35b7d7(0x138)](_0xc681f4);}async[a0_0x3cfc7d(0x29f)](_0x5b317a){const _0x1de437=a0_0x3cfc7d;return await this[_0x1de437(0x3a2)][_0x1de437(0x7f6)][_0x5b317a[_0x1de437(0x1c7)]][_0x1de437(0x29f)]();}async['deleteDoneMessages'](_0x43a566){const _0x2d7218=a0_0x3cfc7d;return await this[_0x2d7218(0x3a2)][_0x2d7218(0x7f6)][_0x43a566[_0x2d7218(0x1c7)]][_0x2d7218(0x322)]();}async[a0_0x3cfc7d(0x16d)](_0x1129bc){const _0x4dd6cc=a0_0x3cfc7d;return await this['waMonitor']['waInstances'][_0x1129bc['instanceName']][_0x4dd6cc(0x16d)]();}async[a0_0x3cfc7d(0x85d)](_0x9f63a0){const _0x48db0e=a0_0x3cfc7d;return await this[_0x48db0e(0x3a2)]['waInstances'][_0x9f63a0[_0x48db0e(0x1c7)]][_0x48db0e(0x85d)]();}async[a0_0x3cfc7d(0x2b1)](_0x356e73,_0x217511){const _0x52c1bb=a0_0x3cfc7d;return await this['waMonitor'][_0x52c1bb(0x7f6)][_0x356e73[_0x52c1bb(0x1c7)]][_0x52c1bb(0x2b1)](_0x217511);}async['updateCustomFields'](_0x5b9686,_0x201617){const _0x166585=a0_0x3cfc7d;return await this[_0x166585(0x3a2)]['waInstances'][_0x5b9686[_0x166585(0x1c7)]][_0x166585(0x68e)](_0x201617);}async['updateAutoCompleteMessages'](_0x1d8dee,_0x4fd3af){const _0x5d48c8=a0_0x3cfc7d;return await this[_0x5d48c8(0x3a2)]['waInstances'][_0x1d8dee['instanceName']]['updateAutoCompleteMessages'](_0x4fd3af);}async[a0_0x3cfc7d(0xff)](_0x2f04f2,_0x536e06){const _0x542ada=a0_0x3cfc7d;return await this[_0x542ada(0x3a2)][_0x542ada(0x7f6)][_0x2f04f2[_0x542ada(0x1c7)]][_0x542ada(0xff)](_0x536e06);}async[a0_0x3cfc7d(0x868)](_0x46c3a3,_0x4384fa){const _0x27560c=a0_0x3cfc7d;return await this['waMonitor'][_0x27560c(0x7f6)][_0x46c3a3['instanceName']]['startFlow'](_0x4384fa);}async[a0_0x3cfc7d(0x601)](_0x5aba51,_0x5f007d,_0x27ccbb,_0x1095b6){const _0xa798a4=a0_0x3cfc7d;return await this[_0xa798a4(0x3a2)][_0xa798a4(0x7f6)][_0x5aba51][_0xa798a4(0x601)](_0x5f007d,_0x27ccbb,_0x1095b6);}async['getConversation'](_0x1da5e0,_0x28818d){const _0x8800b7=a0_0x3cfc7d;return await this[_0x8800b7(0x3a2)]['waInstances'][_0x1da5e0[_0x8800b7(0x1c7)]]['getConversation'](_0x28818d);}async['fetchConversation'](_0x3f5f47,_0x295b85){const _0x37b68d=a0_0x3cfc7d;return await this[_0x37b68d(0x3a2)][_0x37b68d(0x7f6)][_0x3f5f47['instanceName']][_0x37b68d(0x7c3)](_0x295b85);}async['editConversation'](_0x579d69,_0x172c84){const _0x455151=a0_0x3cfc7d;return await this[_0x455151(0x3a2)][_0x455151(0x7f6)][_0x579d69['instanceName']][_0x455151(0x3c2)](_0x172c84);}async[a0_0x3cfc7d(0x881)](_0x335815,_0x825fd){const _0x518565=a0_0x3cfc7d;return await this['waMonitor'][_0x518565(0x7f6)][_0x335815['instanceName']][_0x518565(0x881)](_0x825fd);}async[a0_0x3cfc7d(0x31e)](_0x14ac94,_0x55743c){const _0x1e8b2a=a0_0x3cfc7d;return await this[_0x1e8b2a(0x3a2)]['waInstances'][_0x14ac94[_0x1e8b2a(0x1c7)]][_0x1e8b2a(0x31e)](_0x55743c[_0x1e8b2a(0x7b5)]);}async['createFlow'](_0x107a2b,_0x1d3587,_0x1cf6ff){const _0xd2d6f6=a0_0x3cfc7d;return await this['waMonitor'][_0xd2d6f6(0x7f6)][_0x107a2b[_0xd2d6f6(0x1c7)]][_0xd2d6f6(0x23c)](_0x1d3587,_0x1cf6ff);}async['editFlow'](_0x4ab6bc,_0x10587b,_0x210f0e){const _0x51378c=a0_0x3cfc7d;return await this['waMonitor'][_0x51378c(0x7f6)][_0x4ab6bc[_0x51378c(0x1c7)]][_0x51378c(0x116)](_0x10587b,_0x210f0e);}async[a0_0x3cfc7d(0x878)](_0x599e8e,_0x519f73){const _0x221dd2=a0_0x3cfc7d;return await this[_0x221dd2(0x3a2)][_0x221dd2(0x7f6)][_0x599e8e[_0x221dd2(0x1c7)]][_0x221dd2(0x878)](_0x519f73);}async[a0_0x3cfc7d(0x2d1)](_0x2c3f61,_0x4b2eae){const _0x23ba22=a0_0x3cfc7d;return await this['waMonitor'][_0x23ba22(0x7f6)][_0x2c3f61[_0x23ba22(0x1c7)]][_0x23ba22(0x2d1)](_0x4b2eae);}async['editFlowGroup'](_0x1d0a86,_0x2fd6ec){const _0xea5c09=a0_0x3cfc7d;return await this['waMonitor'][_0xea5c09(0x7f6)][_0x1d0a86['instanceName']][_0xea5c09(0x72a)](_0x2fd6ec);}async[a0_0x3cfc7d(0x7a2)](_0x580d89,_0x1da25f){const _0x2464f3=a0_0x3cfc7d;return await this[_0x2464f3(0x3a2)][_0x2464f3(0x7f6)][_0x580d89[_0x2464f3(0x1c7)]][_0x2464f3(0x7a2)](_0x1da25f);}async[a0_0x3cfc7d(0x5ef)](_0xf61230,_0x4039c1){const _0x526213=a0_0x3cfc7d;return await this[_0x526213(0x3a2)][_0x526213(0x7f6)][_0xf61230['instanceName']][_0x526213(0x5ef)](_0x4039c1);}async[a0_0x3cfc7d(0x42e)](_0x3862e5,_0x4cad7c){const _0x41949d=a0_0x3cfc7d;return await this[_0x41949d(0x3a2)]['waInstances'][_0x3862e5[_0x41949d(0x1c7)]][_0x41949d(0x42e)](_0x4cad7c);}async[a0_0x3cfc7d(0x1b4)](_0x2be9ba,_0x18d756){const _0x58bf81=a0_0x3cfc7d;return await this[_0x58bf81(0x3a2)][_0x58bf81(0x7f6)][_0x2be9ba[_0x58bf81(0x1c7)]]['deleteFlow'](_0x18d756);}async[a0_0x3cfc7d(0x76a)](_0x9285e6){const _0x2f79fb=a0_0x3cfc7d;return await this[_0x2f79fb(0x3a2)][_0x2f79fb(0x7f6)][_0x9285e6[_0x2f79fb(0x1c7)]][_0x2f79fb(0x76a)]();}},Zt=class{constructor(_0x22372b){const _0x2e45b4=a0_0x3cfc7d;this[_0x2e45b4(0x103)]=_0x22372b;}async[a0_0x3cfc7d(0x300)](_0x38eafe,_0x5e3486){const _0x2fa3dc=a0_0x3cfc7d;return this['webhookService'][_0x2fa3dc(0x19b)](_0x38eafe,_0x5e3486);}async[a0_0x3cfc7d(0x4a9)](_0x3ca062){return this['webhookService']['find'](_0x3ca062);}},es=class extends O{constructor(_0xf69e98,_0x22e7ff){const _0xf8a1de=a0_0x3cfc7d;super(_0x22e7ff),this[_0xf8a1de(0x715)]=_0xf69e98,this[_0xf8a1de(0x497)]=_0x22e7ff;}async[a0_0x3cfc7d(0x19b)](_0x39d9bd,_0x549fea){const _0x55ea19=a0_0x3cfc7d;try{return this[_0x55ea19(0x235)]['ENABLED']?{'insertCount':(await this[_0x55ea19(0x715)][_0x55ea19(0x1b5)]({'_id':_0x549fea},{..._0x39d9bd},{'upsert':!0x0}))[_0x55ea19(0x228)]}:{'insertCount':0x1};}catch(_0x33505f){return _0x33505f;}}async['delete'](_0x11a9a8){const _0x5948b2=a0_0x3cfc7d;try{if(this['dbSettings'][_0x5948b2(0x78c)]){await this[_0x5948b2(0x715)][_0x5948b2(0x3a4)]({'_id':_0x11a9a8});return;}}catch(_0x27bb12){return{'error':_0x27bb12};}}async[a0_0x3cfc7d(0x1c4)](_0x28834d){const _0xccc1d0=a0_0x3cfc7d;try{if(this[_0xccc1d0(0x235)][_0xccc1d0(0x78c)])return await this['webhookModel'][_0xccc1d0(0x36a)]({'_id':_0x28834d});}catch{return{};}}},ts=class extends O{constructor(_0x18060d,_0x5ce3e9){const _0x2363ef=a0_0x3cfc7d;super(_0x5ce3e9),this[_0x2363ef(0x602)]=_0x18060d,this[_0x2363ef(0x497)]=_0x5ce3e9,this[_0x2363ef(0x1cf)]=_0x5ce3e9[_0x2363ef(0x840)](_0x2363ef(0x768));}async[a0_0x3cfc7d(0x19b)](_0x18b79d,_0x2b4387){const _0x1c0b79=a0_0x3cfc7d;try{if(this[_0x1c0b79(0x235)][_0x1c0b79(0x78c)])return{'insertCount':(await this[_0x1c0b79(0x602)]['updateOne']({'_id':_0x2b4387},{'$set':{..._0x18b79d}},{'upsert':!0x0}))['modifiedCount']};}catch(_0x40cc08){return{'error':_0x40cc08};}}async[a0_0x3cfc7d(0x691)](_0x2a3d0d,_0x3b12c8){const _0x49cc2b=a0_0x3cfc7d;try{if(this['dbSettings'][_0x49cc2b(0x78c)])return{'insertCount':(await this['authModel']['updateMany'](_0x2a3d0d,{'$set':_0x3b12c8},{'upsert':!0x1}))[_0x49cc2b(0x228)]};throw new Error(_0x49cc2b(0x4b8));}catch(_0x1bd8dc){return{'error':_0x1bd8dc};}}async[a0_0x3cfc7d(0x892)](_0x1dcd7b){const _0x492542=a0_0x3cfc7d;try{if(this['dbSettings'][_0x492542(0x78c)])return{'insertCount':(await this[_0x492542(0x602)]['deleteMany'](_0x1dcd7b))[_0x492542(0x55c)]};throw new Error(_0x492542(0x270));}catch(_0x15c4b1){return{'error':_0x15c4b1};}}async[a0_0x3cfc7d(0x7fb)](_0x48d6d5){const _0x2d6d46=a0_0x3cfc7d;try{if(this[_0x2d6d46(0x235)][_0x2d6d46(0x78c)]){await this[_0x2d6d46(0x602)]['deleteOne']({'_id':_0x48d6d5});return;}}catch(_0x4970c8){return{'error':_0x4970c8};}}async[a0_0x3cfc7d(0x1c4)](_0x3be1d5){const _0x13985a=a0_0x3cfc7d;try{if(this['dbSettings'][_0x13985a(0x78c)])return await this[_0x13985a(0x602)][_0x13985a(0x36a)]({'_id':_0x3be1d5});}catch{return{};}}async[a0_0x3cfc7d(0x256)](){const _0x5042b7=a0_0x3cfc7d;try{if(this[_0x5042b7(0x235)][_0x5042b7(0x78c)])return await this['authModel'][_0x5042b7(0x1c4)]();}catch{return[];}}async[a0_0x3cfc7d(0x6c6)](_0x28b368){const _0x3a6217=a0_0x3cfc7d;try{if(this['dbSettings'][_0x3a6217(0x78c)])return await this[_0x3a6217(0x602)][_0x3a6217(0x1c4)](_0x28b368);}catch{return[];}}},ss=class extends O{async['deleteOne'](_0x15ee57){const _0x3e6cb8=a0_0x3cfc7d;try{let _0x2a6150=A(_0x15ee57[_0x3e6cb8(0x851)]);return{'deletedCount':(await Me[_0x3e6cb8(0x3a4)](_0x2a6150))[_0x3e6cb8(0x55c)]};}catch(_0x2b4aca){return{'error':_0x2b4aca?.[_0x3e6cb8(0x885)]()};}}async[a0_0x3cfc7d(0x104)](_0x108203,_0x4b25e8){const _0x22fe4d=a0_0x3cfc7d;try{let _0x571a80=await Me['findById'](_0x108203);return _0x571a80?(Object['assign'](_0x571a80,_0x4b25e8),await _0x571a80[_0x22fe4d(0x565)]()):(console['error'](_0x22fe4d(0x205),_0x108203),null);}catch(_0x2dffb4){return console[_0x22fe4d(0x3c6)](_0x22fe4d(0x3be),_0x2dffb4),null;}}async[a0_0x3cfc7d(0x850)](_0xf794f3){const _0x370771=a0_0x3cfc7d;try{return await new Me(_0xf794f3)[_0x370771(0x565)]();}catch(_0x4aac68){return console[_0x370771(0x3c6)](_0x370771(0x20e),_0x4aac68),null;}}async[a0_0x3cfc7d(0x256)](_0x2c4c46){const _0x1ee380=a0_0x3cfc7d;try{let _0x59956e=_0x2c4c46[_0x1ee380(0x851)]??{};return await Me[_0x1ee380(0x1c4)](_0x59956e)[_0x1ee380(0x1bf)](_0x2c4c46[_0x1ee380(0x1bf)]??0x0)[_0x1ee380(0x6cd)]();}catch(_0x7efa9c){return console['error'](_0x1ee380(0x4be),_0x7efa9c),[];}}async[a0_0x3cfc7d(0x36a)](_0x11a4e7){const _0x89193a=a0_0x3cfc7d;try{let _0x38d247=A(_0x11a4e7[_0x89193a(0x851)]);return await Me[_0x89193a(0x36a)](_0x38d247)[_0x89193a(0x6cd)]();}catch{return null;}}},as=class extends O{[a0_0x3cfc7d(0x87b)](_0x4c0ca4){return Sa(_0x4c0ca4);}async[a0_0x3cfc7d(0x6d6)](_0x55402b){const _0x5b5269=a0_0x3cfc7d;if(_0x55402b['length']!==0x0)try{return{'insertCount':(await this[_0x5b5269(0x87b)](_0x55402b[0x0][_0x5b5269(0x6a6)])[_0x5b5269(0x756)]([..._0x55402b]))[_0x5b5269(0x11c)]};}catch(_0x2bf477){return _0x2bf477;}}async[a0_0x3cfc7d(0x7fb)](_0x193bfb,_0x274ae5){const _0x5d43aa=a0_0x3cfc7d;try{let _0x173a0b=this[_0x5d43aa(0x87b)](_0x274ae5),_0x5f13c5=A(_0x193bfb[_0x5d43aa(0x851)]);return{'deletedCount':(await _0x173a0b[_0x5d43aa(0x892)](_0x5f13c5))[_0x5d43aa(0x55c)]};}catch(_0x4760ba){return{'error':_0x4760ba?.['toString']()};}}async[a0_0x3cfc7d(0x3a4)](_0x3cbe08,_0x308ccc){const _0x410dbe=a0_0x3cfc7d;try{let _0x3a92f4=this[_0x410dbe(0x87b)](_0x308ccc),_0x1bbe94=A(_0x3cbe08[_0x410dbe(0x851)]);return{'deletedCount':(await _0x3a92f4[_0x410dbe(0x3a4)](_0x1bbe94))[_0x410dbe(0x55c)]};}catch(_0x587144){return{'error':_0x587144?.['toString']()};}}async[a0_0x3cfc7d(0x3f8)](_0x399507,_0x4a9a07){const _0x406278=a0_0x3cfc7d;try{if(_0x399507[_0x406278(0x11c)]===0x0)return;let _0x30c64d=this[_0x406278(0x87b)](_0x4a9a07),_0x2d5fbd=_0x399507[_0x406278(0x733)](_0x5cde31=>({'updateOne':{'filter':{'name':_0x5cde31[_0x406278(0x75b)],'owner':_0x4a9a07},'update':{..._0x5cde31}}})),{modifiedCount:_0x5eeec1}=await _0x30c64d[_0x406278(0x815)](_0x2d5fbd);return{'insertCount':_0x5eeec1};}catch{return;}}async[a0_0x3cfc7d(0x609)](_0x410f7a,_0x4e6961,_0x3b6759){const _0x28c7c0=a0_0x3cfc7d;try{return{'modifiedCount':(await this[_0x28c7c0(0x87b)](_0x3b6759)[_0x28c7c0(0x609)](_0x410f7a,{'$set':_0x4e6961})['exec']())[_0x28c7c0(0x228)]};}catch(_0x5dea57){return console[_0x28c7c0(0x3c6)](_0x28c7c0(0x4ef),_0x5dea57),{'error':_0x5dea57};}}async[a0_0x3cfc7d(0x104)](_0x493ac6,_0x48bee1,_0x583ac1){const _0xf8b0dc=a0_0x3cfc7d;try{return await this[_0xf8b0dc(0x87b)](_0x583ac1)[_0xf8b0dc(0x5c3)]({'_id':_0x493ac6},{'$set':_0x48bee1},{'new':!0x0,'upsert':!0x0})[_0xf8b0dc(0x6cd)]();}catch(_0x393b3a){return console[_0xf8b0dc(0x3c6)](_0x393b3a),null;}}async[a0_0x3cfc7d(0x1c4)](_0x14964e,_0xd0ed){const _0x166b14=a0_0x3cfc7d;try{return await this[_0x166b14(0x87b)](_0xd0ed)[_0x166b14(0x1c4)](_0x14964e)[_0x166b14(0x476)]({'lastInteraction':-0x1})[_0x166b14(0x6cd)]();}catch{return[];}}async[a0_0x3cfc7d(0x36a)](_0xaf02df,_0x565756){const _0x295f7b=a0_0x3cfc7d;try{return await this[_0x295f7b(0x87b)](_0x565756)[_0x295f7b(0x36a)]({..._0xaf02df[_0x295f7b(0x851)]})[_0x295f7b(0x6cd)]();}catch{return null;}}async[a0_0x3cfc7d(0x18c)](_0xf7e4f5){const _0x4713e1=a0_0x3cfc7d;try{return await this[_0x4713e1(0x87b)](_0xf7e4f5)[_0x4713e1(0x86d)]['drop'](),{'success':!0x0};}catch(_0x169cca){return console[_0x4713e1(0x3c6)](_0x169cca),{'success':!0x1,'error':_0x169cca};}}},is=class extends O{[a0_0x3cfc7d(0x66a)](_0x10e3aa){return Ma(_0x10e3aa);}async[a0_0x3cfc7d(0x815)](_0x163215,_0x29978b){const _0x589da6=a0_0x3cfc7d;try{return await this[_0x589da6(0x66a)](_0x29978b)[_0x589da6(0x815)](_0x163215);}catch(_0xf72eae){return console['error'](_0x589da6(0x765),_0xf72eae),null;}}async[a0_0x3cfc7d(0x850)](_0x4431e2,_0x11107e){const _0xe30cc8=a0_0x3cfc7d;try{let _0x4196f6=this[_0xe30cc8(0x66a)](_0x11107e);return await new _0x4196f6(_0x4431e2)[_0xe30cc8(0x565)]();}catch(_0x2a7477){return console[_0xe30cc8(0x3c6)](_0xe30cc8(0x32e),_0x2a7477),null;}}async[a0_0x3cfc7d(0x3a4)](_0x53f33f,_0x4d5544){const _0x55dd5b=a0_0x3cfc7d;try{return await this['getScheduleMessageModelForOwner'](_0x4d5544)[_0x55dd5b(0x2c5)](_0x53f33f),{};}catch(_0x2b7d42){return{'error':_0x2b7d42?.[_0x55dd5b(0x885)]()};}}async['updateOne'](_0x465ff3,_0x1cbb37,_0x40bf7a,_0x53d688={}){const _0x865228=a0_0x3cfc7d;try{return await this[_0x865228(0x66a)](_0x40bf7a)[_0x865228(0x5c3)](_0x465ff3,_0x1cbb37,{..._0x53d688,'new':!0x0})['lean']();}catch(_0x4a5203){return console[_0x865228(0x3c6)](_0x865228(0x326),_0x4a5203),null;}}async['updateOneById'](_0x55564c,_0x3e1aa5,_0xffd173){const _0xf1c513=a0_0x3cfc7d;try{return await this[_0xf1c513(0x66a)](_0xffd173)[_0xf1c513(0x343)](_0x55564c,_0x3e1aa5,{'new':!0x0})['lean']();}catch(_0x1293aa){return console[_0xf1c513(0x3c6)]('Erro\x20ao\x20atualizar\x20uma\x20mensagem:',_0x1293aa),null;}}async['find'](_0x13b0db,_0x4b3881){const _0x4bb96c=a0_0x3cfc7d;try{return await this[_0x4bb96c(0x66a)](_0x4b3881)[_0x4bb96c(0x1c4)](_0x13b0db[_0x4bb96c(0x851)])[_0x4bb96c(0x1bf)](_0x13b0db?.[_0x4bb96c(0x1bf)]??0x0)['sort']({'when':0x1})[_0x4bb96c(0x6cd)]();}catch{return[];}}async[a0_0x3cfc7d(0x36a)](_0x542f34,_0x1a580e){const _0x538116=a0_0x3cfc7d;try{return await this[_0x538116(0x66a)](_0x1a580e)[_0x538116(0x36a)](_0x542f34[_0x538116(0x851)])[_0x538116(0x476)]({'when':0x1})[_0x538116(0x6cd)]();}catch{return null;}}async[a0_0x3cfc7d(0x7df)](_0x105c74,_0x4231b5){const _0x5d435f=a0_0x3cfc7d;try{return await this[_0x5d435f(0x66a)](_0x4231b5)[_0x5d435f(0x7df)](_0x105c74)[_0x5d435f(0x6cd)]();}catch{return null;}}async['deleteMany'](_0x4e99c8,_0x133050){const _0x10b5bb=a0_0x3cfc7d;try{return{'deletedCount':(await this[_0x10b5bb(0x66a)](_0x133050)[_0x10b5bb(0x892)](_0x4e99c8))['deletedCount']};}catch(_0x1dba9f){return console[_0x10b5bb(0x3c6)](_0x10b5bb(0x68c),_0x1dba9f),{'error':_0x1dba9f};}}async[a0_0x3cfc7d(0x18c)](_0x1894e9){const _0x24f1cf=a0_0x3cfc7d;try{return await this[_0x24f1cf(0x66a)](_0x1894e9)[_0x24f1cf(0x86d)]['drop'](),{'success':!0x0};}catch(_0x1b0877){return console['error'](_0x1b0877),{'success':!0x1,'error':_0x1b0877};}}},os=class extends O{async['update'](_0x4f178d,_0x2c319b){const _0x108273=a0_0x3cfc7d;try{if(this[_0x108273(0x235)]['ENABLED'])return await Te[_0x108273(0x5c3)]({'_id':_0x2c319b},{'$set':_0x4f178d},{'new':!0x0});}catch(_0x56e5c4){throw console[_0x108273(0x3c6)]('Erro\x20ao\x20atualizar\x20AutomateSystem:',_0x56e5c4),_0x56e5c4;}}async[a0_0x3cfc7d(0x37d)](_0x26c8f3){const _0x19b5d5=a0_0x3cfc7d;try{let _0x4020a9=await Te[_0x19b5d5(0x7df)](_0x26c8f3);return _0x4020a9?_0x4020a9[_0x19b5d5(0x21f)]||(_0x4020a9[_0x19b5d5(0x21f)]=[],await _0x4020a9[_0x19b5d5(0x565)]()):(_0x4020a9=new Te({'_id':_0x26c8f3,'autoCompleteMessages':[]}),await _0x4020a9[_0x19b5d5(0x565)]()),_0x4020a9;}catch(_0x4ff904){return _0x4ff904['code']===0x2af8&&_0x4ff904['keyPattern']&&_0x4ff904[_0x19b5d5(0x399)][_0x19b5d5(0x71b)]?(console[_0x19b5d5(0x3c6)](_0x19b5d5(0x5f5)),await Te['collection'][_0x19b5d5(0x3ca)]('autoCompleteMessages.command_1'),null):(console[_0x19b5d5(0x3c6)](_0x19b5d5(0x29a),_0x4ff904),null);}}},Jo=new $(a0_0x3cfc7d(0x267)),qo=new Qe(S),Vo=new Jt(S),Go=new nt(S),Bo=new qt(oa,S),Wo=new Vt(na,S),zo=new es(ha,S),Ho=new ts(ua,S),Ko=new Ee(We,S),Qo=new ss(S),Yo=new Gt(S),Xo=new as(S),Zo=new is(S),er=new os(S),me=new He(qo,Vo,Go,Bo,Wo,zo,Ho,Ko,Qo,Xo,Yo,Zo,er,T?.[a0_0x3cfc7d(0x81d)]()),G=new jt(hs,S,me),tr=new Kt(S,G,me),sr=new Yt(G),As=new Zt(sr),_=new Xt(G),le=new zt(G,S,me,hs,tr),B=new Ht(G),D=new Bt(G),q=new Qt(G);Jo[a0_0x3cfc7d(0x743)](a0_0x3cfc7d(0x751));var $g=require('express-async-errors'),Js=require('fs'),Di=I(require(a0_0x3cfc7d(0x825))),ki=I(require(a0_0x3cfc7d(0x338))),je=class u{static #e;static set['app'](_0x5e3c9e){this.#e=_0x5e3c9e;}static get[a0_0x3cfc7d(0x825)](){const _0x135ca3=a0_0x3cfc7d;let {FULLCHAIN:_0x33a948,PRIVKEY:_0x45542b}=S[_0x135ca3(0x840)](_0x135ca3(0x424));return Di[_0x135ca3(0x3af)]({'cert':(0x0,Js[_0x135ca3(0x5bb)])(_0x33a948),'key':(0x0,Js[_0x135ca3(0x5bb)])(_0x45542b)},u.#e);}static get['http'](){const _0x2a04cc=a0_0x3cfc7d;return ki[_0x2a04cc(0x3af)](u.#e);}},Je=I(require('fs')),qi=I(require('ini')),qe=I(require(a0_0x3cfc7d(0x4a0))),ns=I(require(a0_0x3cfc7d(0x304))),rs=require(a0_0x3cfc7d(0x41d));function ar(){const _0x518198=a0_0x3cfc7d;G[_0x518198(0x1fa)]();let _0x5df775=ns[_0x518198(0x879)]['join'](__dirname,_0x518198(0x3e3));Ji(_0x5df775);}var Ji=_0x2dde4a=>{const _0x491894=a0_0x3cfc7d;let _0x1ab3b6=Je[_0x491894(0x879)]['readdirSync'](_0x2dde4a),_0x3947a1=0xc*0x3c*0x3c*0x3e8,_0x46dec1=0x2*0x3c*0x3c*0x3e8,_0x5f3829=new Date()['getTime']();_0x1ab3b6['forEach'](_0x5ea78e=>{const _0xe7c34d=_0x491894;let _0x29e50a=ns['default']['join'](_0x2dde4a,_0x5ea78e),_0x42b70c=Je['default'][_0xe7c34d(0x4ca)](_0x29e50a)['birthtime'][_0xe7c34d(0x64e)]();_0x5f3829-_0x42b70c>_0x3947a1&&(Je[_0xe7c34d(0x879)]['unlinkSync'](_0x29e50a),console['log']('Deleted\x20'+_0x5ea78e));}),setTimeout(()=>Ji(_0x2dde4a),_0x46dec1);};function ir(){const _0x4a6b88=a0_0x3cfc7d;let _0x24b6cc=new $(_0x4a6b88(0x10b)),_0x3cb6e5=(0x0,we['default'])();_0x3cb6e5[_0x4a6b88(0x616)]((0x0,ji[_0x4a6b88(0x879)])({'origin'(_0x5ed0d8,_0x16e0f8){const _0x34049a=_0x4a6b88;let {ORIGIN:_0x4f0026}=S[_0x34049a(0x840)]('CORS');return _0x5ed0d8||(_0x5ed0d8='*'),_0x4f0026[_0x34049a(0x29b)]('*')!==-0x1||_0x4f0026[_0x34049a(0x29b)](_0x5ed0d8)!==-0x1?_0x16e0f8(null,!0x0):_0x16e0f8(new Error(_0x34049a(0x1f5)));},'methods':[...S[_0x4a6b88(0x840)](_0x4a6b88(0x3ad))[_0x4a6b88(0x5b4)]],'credentials':S[_0x4a6b88(0x840)](_0x4a6b88(0x3ad))[_0x4a6b88(0x603)]}),(0x0,we[_0x4a6b88(0x3b1)])({'extended':!0x0,'limit':_0x4a6b88(0x1f4)}),(0x0,we[_0x4a6b88(0x7be)])({'limit':_0x4a6b88(0x1f4)})),_0x3cb6e5['use']((_0x12829c,_0x3a424d,_0x592a3c)=>{const _0x67e456=_0x4a6b88;_0x12829c[_0x67e456(0x304)][_0x67e456(0x80e)](_0x67e456(0x758))?_0x592a3c():(0x0,Ui[_0x67e456(0x879)])()(_0x12829c,_0x3a424d,_0x592a3c);}),_0x3cb6e5[_0x4a6b88(0x735)]('view\x20engine','hbs'),_0x3cb6e5[_0x4a6b88(0x735)](_0x4a6b88(0x5bf),(0x0,Vs[_0x4a6b88(0x149)])(ne,_0x4a6b88(0x5bf))),_0x3cb6e5[_0x4a6b88(0x616)](we[_0x4a6b88(0x879)][_0x4a6b88(0x30d)]((0x0,Vs[_0x4a6b88(0x149)])(ne,_0x4a6b88(0x3a1)))),_0x3cb6e5[_0x4a6b88(0x616)]((_0x45247b,_0x595603,_0x5732dc)=>{const _0x95443=_0x4a6b88;let _0x3d3d1e=_0x595603[_0x95443(0x26d)];_0x595603[_0x95443(0x26d)]=function(_0x3ae1a0){const _0x54276a=_0x95443;if(_0x45247b['query'][_0x54276a(0x5c8)]===_0x54276a(0x16a)||_0x45247b[_0x54276a(0x4fe)][_0x54276a(0x76c)]===_0x54276a(0x16a)){let _0xb94836=JSON['parse'](_0x3ae1a0);_0x3ae1a0=JSON[_0x54276a(0x238)](_0x5a4506(_0xb94836));}return _0x3d3d1e[_0x54276a(0x173)](_0x595603,[_0x3ae1a0]);},_0x5732dc();}),_0x3cb6e5['use']('/',ke),_0x3cb6e5['use']((_0x14ee6e,_0x2f3006,_0x112f22,_0x169c0f)=>{const _0x9cf038=_0x4a6b88;if(_0x14ee6e)return _0x112f22[_0x9cf038(0x204)](_0x14ee6e[_0x9cf038(0x204)]||0x1f4)[_0x9cf038(0x7be)](_0x14ee6e);},(_0x547d49,_0xc3e57b,_0x5a248e)=>{const _0x404486=_0x4a6b88;let {method:_0x537ac6,url:_0x15ea0e}=_0x547d49;_0xc3e57b[_0x404486(0x204)](0x194)[_0x404486(0x7be)]({'status':0x194,'message':_0x404486(0x774)+_0x537ac6[_0x404486(0x593)]()+'\x20'+_0x15ea0e,'error':_0x404486(0x584)}),_0x5a248e();});let _0x5a4506=(_0x1a9eae,_0x1bdb10='_p_')=>{const _0x37c44e=_0x4a6b88;let _0x22b7dc=(_0x2ba8b4,_0x8f7cde=null,_0x13cf1a=!0x1)=>{const _0x38f0d8=a0_0x1146;let _0x5ba279={};return Object['keys'](_0x2ba8b4)[_0x38f0d8(0x455)](_0x49d8d7=>{const _0x12f661=_0x38f0d8;let _0x15c2b8=_0x2ba8b4[_0x49d8d7],_0x5d5836=''+_0x1bdb10+_0x49d8d7;_0x8f7cde&&!_0x13cf1a&&(_0x5d5836=_0x8f7cde+'.'+_0x49d8d7),!_0x15c2b8&&_0x15c2b8!==0x0&&_0x15c2b8!==!0x1||typeof _0x15c2b8>'u'?_0x5ba279[_0x5d5836]=null:typeof _0x15c2b8!=_0x12f661(0x54e)&&!Array[_0x12f661(0x2f5)](_0x15c2b8)?_0x5ba279[_0x5d5836]=_0x15c2b8:typeof _0x15c2b8==_0x12f661(0x54e)&&!Array[_0x12f661(0x2f5)](_0x15c2b8)?_0x5ba279=Object['assign'](_0x5ba279,_0x22b7dc(_0x15c2b8,_0x5d5836)):Array[_0x12f661(0x2f5)](_0x15c2b8)&&(typeof _0x15c2b8[0x0]==_0x12f661(0x54e)?(_0x5ba279[_0x5d5836]=[],_0x15c2b8[_0x12f661(0x455)](_0x675034=>{const _0x332e2d=_0x12f661;_0x5ba279[_0x5d5836][_0x332e2d(0x7b9)](_0x22b7dc(_0x675034,_0x5d5836,!0x0));})):_0x5ba279[_0x5d5836]=_0x15c2b8);}),_0x5ba279;};return Array[_0x37c44e(0x2f5)](_0x1a9eae)?_0x1a9eae[_0x37c44e(0x733)](_0x2c5a99=>_0x22b7dc(_0x2c5a99)):typeof _0x1a9eae==_0x37c44e(0x54e)&&_0x1a9eae!==null?_0x22b7dc(_0x1a9eae):{};},_0x22c1d4=S[_0x4a6b88(0x840)]('SERVER');je['app']=_0x3cb6e5;let _0x5bf5d3=je[_0x22c1d4[_0x4a6b88(0x11a)]],_0x1f04dc=_0x4a6b88(0x492);_0x5bf5d3[_0x4a6b88(0x38e)](_0x22c1d4[_0x4a6b88(0x107)],()=>{const _0x22ded8=_0x4a6b88;_0x24b6cc[_0x22ded8(0x547)](_0x1f04dc),_0x24b6cc[_0x22ded8(0x547)](_0x22c1d4[_0x22ded8(0x11a)]['toUpperCase']()+_0x22ded8(0x86a)+_0x22c1d4['PORT']);}),ar(),Zs();}var or=a0_0x3cfc7d(0x3b6),rr=ns[a0_0x3cfc7d(0x879)]['join'](__dirname,a0_0x3cfc7d(0x4b0)),Re=null;function nr(){return new Promise((_0x4a59a8,_0x3c35ab)=>{const _0x35c7db=a0_0x1146;Je[_0x35c7db(0x879)][_0x35c7db(0x207)](rr,'utf-8',(_0x295bae,_0x10f4cf)=>{const _0x4a96ab=_0x35c7db;if(_0x295bae){Re=_0x295bae,_0x4a59a8();return;}qi[_0x4a96ab(0x879)][_0x4a96ab(0x675)](_0x10f4cf)[_0x4a96ab(0x6b1)][_0x4a96ab(0x855)]===or?(Re=null,_0x4a59a8()):(Re=new Error(_0x4a96ab(0x3cb)),_0x4a59a8());});});}async function cr(){const _0x2413b2=a0_0x3cfc7d;try{await nr(),await Bi();}catch(_0x298c70){console[_0x2413b2(0x3c6)]('Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20'+_0x298c70),process['exit'](0x1);}}function a0_0x1146(_0xda313b,_0x2c0a48){const _0x3da407=a0_0x3da4();return a0_0x1146=function(_0x11462e,_0x37caa4){_0x11462e=_0x11462e-0xfc;let _0x3fd58e=_0x3da407[_0x11462e];return _0x3fd58e;},a0_0x1146(_0xda313b,_0x2c0a48);}function a0_0x3da4(){const _0x1e4c5e=['ip\x20-6\x20addr\x20add\x20','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$','Erro\x20ao\x20atualizar\x20agendamento\x20','initAuthCreds','checkAndRestartProcess','closed','\x27...','):Temp\x20image\x20deleted','chatId','media','AUTHENTICATION_API_KEY','.pptx','getLastMessage','flattenObject','latitude','cwd','lowerCase',',\x20Novo\x20tamanho:\x20','):\x20Conversa\x20atualizada\x20em\x20memória','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','get','Nenhum\x20chat\x20fornecido\x20para\x20inserção.','):\x20Encontrado\x20próxima\x20mensagem\x20para\x20','.mimetype','replaceVariables','sendMessageWithRetry','EMAIL','GROUPS_UPSERT','height','whoCanEdit','):\x20Mensagens\x20PRONTAS\x20para\x20envio\x20encontradas:\x20','conversationTimestamp','segundos','ListMessage','Types','isJWT','createAndSave','where','SECRET','lastCondition','goNextblock','url','size','Connection\x20Closed','):\x20Editando\x20bloco...','Failed\x20to\x20send\x20buttons\x20message','no.connection','utf-8','):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20','getAutomateSystem','and','):\x20lastBlockId:\x20','):\x20this.client.authState.creds?.myAppStateKeyId:\x20','BRL','qrCode','valid','startCommand','mediatype','replyOptions','randomMac','startFlow','stopMinutesMaxActives','\x20-\x20ON:\x20','flowConversation','scheduleMessage','collection','chats.upsert','messages.set','LOG_COLOR','displayName','contact_blacklist','audio','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','processclearVariables','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','data','editFlowBlock','default','.ogv','getConversationModelForOwner','participant','IP\x20confirmed:\x20','writeFileSync','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','.mp4','deleteConversation','moreLogs','\x20atualizado\x20com\x20sucesso.\x20Ação:\x20','superadmin','toString','createNewConversation','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','saveCreds','createConversationforgoToFlow','format','request\x20received\x20in\x20fetchConversation','loggedOut','Esse\x20fluxo\x20expirou','debug','unknown\x20operation\x20type\x20[','lastRealGroupsFetch','processUazapi','deleteMany','JWT','createSectionsFromValues','uazapiSendMedia','updateFlowConfig','getOwnPropertyNames','[all]','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','webhookService','updateOne','):\x20whoCanUse\x20after\x20validation:\x20','chatModify','PORT','_error','application/json','viewOnceMessageV2','SERVER','reviver','Selecione','\x20minutos','@s.whatsapp.net','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','digest','optionName','ip\x20-6\x20addr\x20show\x20dev\x20','has','function','editFlow','API\x20Key\x20inválida.','isCommunity','enabled','TYPE','silent','length','waitingForReplyMenu','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','groupSettingUpdate','extractRegex','Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup','/automate','option','isLong','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','\x20horas\x20e\x20','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants','groupMetadata','DATABASE_CONNECTION_DB_PREFIX_NAME','_sender','STORE','stanzaId','\x22\x20-\x20NOT\x20CONNECTION','.gif','licenca','groupadd','PLAYED','Subdomínio\x20não\x20encontrado','replaceVariablesInObject','chats.delete','deleteBlock','):\x20Chat\x20','editScheduleMessage','):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','DD/MM\x20HH:mm:ss','groupUpdateSubject','pollCreationMessageV3','writeData','Instância\x20não\x20encontrada.','setWebhook','truncatedto','sendWhatsAppAudio','groupJoinApprovalMode','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','logout','user','uncaughtException','replaceVariablesLogs','deleteMessageForEveryone','join','):\x20error:\x20','endsWith','messageLogsModel','findGroups','triedToSend','scheduled','QRCODE_UPDATED','match','replacer','#9ab6c1','groupDesc','useMultiFileAuthState','RemoteJid:','buttonOrList_id','):\x20customFieldVariables','race','sendStatus','groupGetInviteInfo','audioMessage','formatBRNumber','stderr','atendimentoAberto','Total\x20de\x20endereços\x20IPv6\x20após\x20a\x20limpeza:\x20','normalizeMessageContent','number','Botão\x201','Logger','RemoveChatLabel','):\x20Editando\x20replyOption...','telefone','getConversation','code','true','\x20instance\x20does\x20not\x20exist','):\x20Mensagem\x20já\x20enviada\x20para\x20','deleteAllMessages','selectedDisplayText','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','listResponseMessage','):\x20Criou\x20conversa\x20no\x20startFlow','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','apply','.extension','menuMessage','stopWhenYouSendMsg','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','authentication','allflows','Valor\x20da\x20URL\x20recuperada:','):Archiving\x20chat','then','isAdmin','$pull','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus','pollMessage','http://checkip.dyndns.org','beforeExit','when','):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27','status.instance','Grupo\x20não\x20encontrado','none','ScheduleMessageModel','):\x20conversation.waitingMenu_name','output','deleteAll','Erro\x20ao\x20encerrar\x20a\x20API','express','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','bearer','_pushName','Erro\x20ao\x20deletar\x20chat:','):Trying\x20to\x20get\x20business\x20profile','sendMessageWithTypingButtons','Enter\x20a\x20value\x20in\x20milliseconds','redis://127.0.0.1:6379','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','js-yaml','add','open','create','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','authorization','/wa-message','bodyString','vote','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20',',\x20Expiration\x20Time:\x20','keys','):\x20Editando\x20edição\x20do\x20fluxo...','groups','preview','Erro\x20ao\x20atualizar\x20cacheInstance:','\x1b[31m%s\x1b[0m','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','singleSelectReply','readMessage','basename','slice','cors','Deletion\x20failed','createConnection','Fluxo\x20\x27','verifiedName','deleteFlow','replaceOne','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.','ex:\x20\x22groupJid=120362@g.us\x22','\x1b[30m%s\x1b[0m','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','qrcode','DB_PREFIX_NAME','#ff9484','class-validator','limit','labels.edit','relayMessage','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','leadInfo.atendimentoAberto','find','stack','result','instanceName','error_log','.doc','):Image\x20is\x20base64','):\x20isVote:\x20','selectedButtonId','mimetype','isBusinessInstance','auth','unreadcount','Message','trim','label','Network\x20Interface\x20detected:\x20','emit','Erro\x20ao\x20substituir\x20variáveis\x20para\x20','END:VCARD','createOrUpdate','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','):\x20Não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','envYaml','):\x20Aguardando\x205\x20segundos\x20antes\x20de\x20reconectar...','processedMessagesCache','updateGParticipate','closeExistingConversations','messages.upsert','mediaSticker','getLabelModelForOwner','.webp','key','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','profilePicture','groupMemberAddMode','variables','options','SINGLE_SELECT','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20','includes','connectionStatus','desativadoFluxoAte','https://api.openai.com/v1/images/generations','_minute','changeVariables','poll','ip:\x20','50mb','Not\x20allowed\x20by\x20CORS','header','The\x20global\x20api\x20key\x20must\x20be\x20set','creds','\x1b[32m%s\x1b[0m','loadInstance','):\x20newFirstValue\x20após\x20replaceVariables:','Esse\x20fluxo\x20não\x20permite\x20importação.','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','CHATS_DELETE','Total\x20IPv6\x20addresses\x20detected:\x20','.\x20Tentando\x20novamente\x20em\x20','deleteImportedChat','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','Flow\x20\x27','status','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:','reconnectAttempts','readFile','[service]\x20request\x20received\x20in\x20sendButtons','):including\x20timestamp\x20in\x20url:\x20','selectedId','Not\x20is\x20business\x20profile','stdout','):\x20conversation.lastInteraction:\x20','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','success','imported','beautifyWithPlaceholders',',\x20lastCondition:\x20','Número\x20não\x20possui\x20WhatsApp.','badSession','The\x20instance\x20needs\x20to\x20be\x20disconnected','LOG','readData','#000000','shareFlow','pollCreationMessageV2','conversation','delay','write','Não\x20respondeu\x20com\x20a\x20enquete.','autoCompleteMessages','LEVEL','process','saveMediaToFile','blockLogs','getBase64FromMediaMessage','protocolMessage','announce','#fed428','modifiedCount','notas','off','updateAutoCompleteMessages','chatHandle','-instances','selectedRowId','MESSAGES_UPSERT','greater','getMonth','Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture','Parando\x20aplicação,\x20atualização\x20recebida','sendMessageWithTyping','dbSettings','dark','\x0aFN:','stringify',']\x20(','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo','Variável\x20não\x20encontrada!','createFlow','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','generateRandomIPv6','interactiveResponseMessage','mentioned','getTicketSystem','connect','content-type','Falha\x20após\x205\x20tentativas:\x20','buttonsResponseMessage','iniciando\x20fluxo\x20router','Erro\x20ao\x20iniciar\x20fluxo:\x20','):\x20Procurando\x20mensagens\x20para\x20envio','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence','PRESENCE_UPDATE','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','DATABASE_CONNECTION_URI','whoCanUse','configureIPv6','startID','enviado\x20para','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','RECONNECT_TIME_FRAME','newStoppedUntil','Conexão\x20estabelecida','findAll','urlOrBase64','Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.','findFlow','selectedOptions','whatsappNumbers','CONECTADO\x20À\x20UAZAPI','editflowcondition','imagechat','Reusing\x20existing\x20IPv6:\x20','apiName','\x20não\x20encontrado','redisEnv','flowStopConversation','#dfaef0','805045KPEjub','):\x20Buscando\x20conversa...','WA\x20MODULE','getUniqueFlowName','validate','out','uazapiSendLocation','repeat','send','):Converted\x20image\x20deleted','crypto','[AUTH]\x20Database\x20is\x20not\x20enabled','\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','/5\x20de\x20preparar\x20mídia\x20falhou:\x20','\x27\x20não\x20encontrado\x20na\x20memória','Garbage\x20collection\x20não\x20está\x20disponível.','https://chat.whatsapp.com/','font','):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27','testingWith','\x20foi\x20interrompido\x20pelo\x20usuário.','https://api.ipify.org?format=json','ip\x20-6\x20addr\x20show\x20scope\x20global','applyvaredit','Group\x20not\x20found','buttonText','next_groupId','HOST','.docx','eventEmitter','1504819xvHaAW','exit',',\x20valor\x20passado:\x20\x22','inviteCode','instance.','localWebhook','interval\x20não\x20é\x20um\x20número','findLabels','@whiskeysockets/baileys','console','2979312AzxsDy','findContacts','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','PRODUCT_LIST','values','list3','unavailable','updateOnlinePrivacy','Last\x20message\x20not\x20found','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','readMessageBot','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','indexOf','quick_reply','uazapiSendAudio','Error\x20fetching\x20group','getScheduleMessage','upperCase','BufferJSON','getDelay','AUTHENTICATION_JWT_SECRET','URI','@g.us','STORE_CONTACTS','readreceipts','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','cleanStore','\x1b[36m%s\x1b[0m','ERROR','11QRTQzL','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','profilePictureUrl','saveTextReply','Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...','updateAgent',',\x20received\x20','fetchBusinessProfile','node-mime-types','):\x20Grupo\x20','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','entries','ChatRouter','2950805vAeqea','encoding','messageTimestamp',',\x20Resultado:\x20','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','Falha\x20ao\x20preparar\x20a\x20mensagem\x20de\x20mídia\x20após\x205\x20tentativas:\x20','Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global','description','padEnd','recording','menuType','etiquetas','findByIdAndDelete','phoneNumber','text','\x20removido\x20do\x20chat\x20','button','saveChatVariables','chats','):\x20[messaging-history.set]\x20mensagem\x20duplicada\x20ignorada\x20(ID:\x20','hDel','notify','Erro\x20ao\x20buscar\x20Schedule\x20Messages','findIndex','editFlowReply','matchRegex','Instance\x20\x22','CHATS_UPDATE','remove','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','WARN','\x20contacts','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','flow','sendDataWebhook','Connection\x20closed\x20for\x20instance:\x20','revokeInviteCode','defineAuthState','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','detail','Sem\x20permissão\x20para\x20enviar\x20para\x20esse\x20grupo','blocks','author','sendMedia','\x20segundos\x20antes\x20de\x20reconectar...','Cache\x20instance\x20update\x20result:\x20','sendList','transformScheduledMessagesByType','countIPv6Addresses','):\x20Conversa\x20está\x20expirada','equal','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','Missing\x20global\x20api\x20key','updateChatWithMessage','CORS_ORIGIN','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','findParticipants','processConditions','isArray','\x1b[43m','getContactModelForOwner','count','Falhou\x20ao\x20encontrar\x20chat\x20','toNumber','\x22\x20not\x20found','\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','Error\x20parsing\x20JSON:','updateConversation','last','createWebhook','cacheInstanceRepository','_fromMe','):Audio\x20processed','path','Adicionando\x20novo\x20participante:\x20','addMessagesToGroup','fetchChats','messageId','Subdomínio\x20final:','https://ipv6.jsonip.com','):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20','messages','static','idSchedule','createInstance','Resultado\x20da\x20correspondência\x20de\x20URL:','DisconnectReason','oldValue','splice','pop','Error\x20removing\x20IPv6\x20address:\x20','clear','Erro\x20ao\x20alterar\x20fluxo','editflow','mediaMessage','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','trimmed','groupInviteCode','https://uazapi-plugin.bubbleapps.io/?url=','getFlow','paused','isBase64','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','deleteDoneMessages','cleanupExcessiveIPs','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','all_member_add','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','Tentando\x20reconectar...','CONTACTS_SET','error\x20get\x20vote','getUpdate','):Output\x20path:\x20','Db\x20Connection','Timeout\x20exceeded','Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:','upsertChats','REDIS_PREFIX_KEY','round','Contacts\x20not\x20found','MESSAGES_UPDATE','removeIPv6','REDIS','SSL_CONF_FULLCHAIN','ChatModel','http','/config','Instance\x20restarted','lastBlockId','variablesToObject','):Type\x20defined\x20as\x20audio','DELIVERY_ACK','):\x20[messages.upsert]\x20mensagem\x20duplicada\x20ignorada','response','stopMinutes','ON\x20-\x20dbName:\x20','findByIdAndUpdate','isURL','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','):\x20nextBlock.uazapi.name','mentions','\x20minutos.\x20Será\x20às\x20','findRealGroups','):\x20Going\x20to\x20','Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.','_Labels','sendSticker','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','online','sleep','URL\x20completa:','updateReadReceiptsPrivacy','E-mail:\x20','Erro\x20ao\x20editar\x20o\x20chat','cache','\x20quoted:\x20','_Chats','secondValue','groupValidate','all','close','Erro\x20desconhecido\x20ao\x20tentar\x20enviar\x20mensagem\x20para\x20o\x20grupo','\x27\x20não\x20encontrado','command','DOCKER_ENV','XX:XX:XX:XX:XX:XX','):\x20Iniciando\x20bot...','\x1b[34m','listIPv6Addresses','archived','participants','formatVCard','messageContextInfo','Content-Type','clearVariables','findOne','app-state-sync-key','listMessage','request\x20received\x20in\x20editFlowvariable','stateConnection','demote','address','/media/','Nenhum\x20chat\x20encontrado\x20para\x20editar.','deleteChat','scheduleSendText','):\x20debug\x20alterando\x20this.AutomateSystem','):\x20Criando\x20fluxo\x20compartilhado...','leadInfo.','File\x20written\x20to\x20path:\x20','The\x20','folder','processvaredits','arraybuffer','findOrCreate','findConversation','AutomateSystem','SERVER_TYPE','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar','chats.update','fetchPrivacySettings','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','connectionClosed','):Fetching\x20business\x20profile','request_time','API\x20Key\x20from\x20Request:','):\x20expirationTime:\x20','):\x20transformedCustomFieldVariables','getStatus','SSL_CONF_PRIVKEY','listen','):\x20updateResult:','):\x20[messages.upsert]\x20group\x20ignored','waitingMenu_id','Type\x20not\x20found','sectionsToString','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','ip6eui','params','):\x20Buscando\x20conversas...','Stack\x20trace:','keyPattern','textMessage','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','):\x20\x27Enviando\x20texto\x20para\x20\x27','toBRL','list','global','public','waMonitor','Erro\x20ao\x20copiar\x20o\x20documento','deleteOne','cleanDisconnectedInstances','longitude','):\x20Ignoring\x20group\x20messages.','getHours','viewOnceMessage','buffer','authService','boolean','CORS','getContentType','createServer','fetchInstances','urlencoded','deleteReplyOption','leadInfo.etiquetas','pictureUrl','/wa-chats','https://github.com/uazapi/uazapi.git','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','privacySettings','activatedCount','statusCode','sha256','Instância:\x20','test','Erro\x20ao\x20atualizar\x20o\x20fluxo:','):\x20Conversa\x20inserida\x20com\x20sucesso.','importChats','\x20foi\x20removido\x20por\x20não\x20ser\x20válido.','editConversation','post','Erro\x20ao\x20criar\x20fluxo','contactMessage','error','fetchStatus','):\x20sender\x20=\x20number:\x20','Last\x20message\x20not\x20found\x20for\x20number:\x20','dropIndex','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','fromObject','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20','):\x20Error\x20processing\x20conditions:\x20','instance','scheduleNextCheck','Erro\x20ao\x20editar\x20o\x20replyOption:\x20','.\x20Pulando.','flush','WebhookGlobal','MESSAGES_SET','jwt','headerString','ephemeralMessage','quoted','connectToWhatsapp','flows','profile','\x20não\x20encontrado\x20para\x20cópia','Error\x20fetching\x20IPv6\x20count:\x20','updateChatGroupData','Validate','groupHandler','downloads','Schema','toLocaleString','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','connectedClient','contextInfo','announcement','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','GROUPS_UPDATE','Erro\x20ao\x20buscar\x20a\x20conversa','addToProcessedMessages','ip\x20-6\x20addr\x20del\x20','not_announcement','utf8','replaceValue','):\x20Fluxo\x20\x27','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','DATABASE_CONNECTION_HOST','prototype','string','https://v6.ident.me','update','\x27\x20do\x20banco\x20de\x20dados...','):\x20Criou\x20conversa\x20no\x20startFlowWebhook','Read\x20messages','local_map','STORE_MESSAGE','presenceSubscribe','binary','Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','fileUrl','awaitingApproval','\x1b[33m%s\x1b[0m','originalUrl','LOG_LEVEL',',\x20qrcodeCount:\x20','split','\x20minutos...','fullName','sendButtons','fileName','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant','.xls','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','EMAIL:','#64c4ff','):\x20Conversa\x20está\x20expirada\x20-\x20voto','labels.association','agents','every','HistoryProcessed','events','setUpdate','buttonMessage','\x1b[46m','/wa-all-message','):\x20Usando\x20extensão\x20padrão:\x20','findManyByIds','child_process','AUTHENTICATION_TYPE','KEY','node-cache','addBlock','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','.xlsx','SSL_CONF','):\x20Procurando\x20conversa','):\x20Aguardando\x205\x20segundos\x20para\x20garantir\x20interrupção\x20completa...','):\x20tem\x20blocks','shift','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','request\x20body:\x20','isMessageProcessed',',\x20valor\x20a\x20encontrar:\x20\x22','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','editFlowVariable','group','connection.update','templateButtonReplyMessage','uazapiSendMenu','fetchProfilePictureUrl','whatsappNumber','cacheContactModel','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','DARK','removeData','Message\x20absent\x20from\x20node','ConversationModel','Configuração\x20SSL\x20recuperada:','Erro\x20ao\x20iniciar\x20o\x20fluxo.','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','-whatsapp-api','messageSecret','blockId','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','assign','Erro\x20ao\x20alterar\x20privacidade','caption','URL\x20não\x20disponível','getMessage','contact','max','empty','remoteJids','exports','):\x20whoCanUse\x20before\x20validation:\x20','\x20inseridos\x20no\x20banco\x20de\x20dados...','messaging-history.set','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','!stop','order','):\x20Removendo\x20\x27','STORE_CLEANING_TERMINAL','updateGParticipant','forEach','extractMessageContent','copyBlock','CONNECTION_UPDATE','\x20\x1b[0m','messages.update','fetchProfile','flowName','Novo\x20IP\x20criado:\x20','util','condition','username','isJidUser','):\x20Flow\x20\x27','readMessages','.png','\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27','Authentication\x20error','vcard','maxActives','updateParticipant','processReadyMessages','pt-BR','value','optionDescription','body','CONNECTION','15070884pYuKsr','request\x20received\x20in\x20editFlow','imgUrl','SERVER_ACK','createButtonsFromValues','reorderMessages','sort','g.us','logger','):Business\x20profile\x20fetched','):\x20Entrou\x20na\x20função\x20processawaitSeconds',',\x20global:\x20','/startFlow/:instance/:startID','dropCollection','dbClient','/instance','setNewValue','realVariables','editMessagesInGroup','groupdata','\x1b[36m','stickerMessage','title','fora\x20do\x20git','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','):Delete\x20chat','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','updateMediaMessage','updateOneById','done','isRunning','processPollUpdateMessage','envProcess','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','allContacts','requestPairingCode','client','updateProfilePicturePrivacy','configService','status@broadcast','Flow\x20iniciado\x20com\x20','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','/message','):\x20Buscando\x20flow...','):\x20Enviando\x20mensagem\x20para\x20','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','\x0aitem','axios','webhookMap','contacts.upsert','action','delAll','_lastVote','convertToString','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','thumbnailUrl','findWebhook','groupRequestParticipantsUpdate','\x1b[1m','linkPreview','/wa-message-update','wuid','webhook','./.git/config','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','ContactModel','updateMessage','No\x20excess\x20IPv6\x20addresses\x20to\x20remove.','IP\x20mismatch:\x20configured\x20','):\x20Buscando\x20todos\x20os\x20fluxos...','createflow','Database\x20is\x20not\x20enabled','synchronizeAndMapFlows','unhandledRejection','ephemeralDuration','updatePresence','lastSendMessage','Erro\x20ao\x20buscar\x20fluxos:','messageLogs','):\x20Entrou\x20na\x20função\x20saveReply','\x0a{\x20instance:\x20','Erro\x20na\x20função\x20updateChatWithMessage:\x20','isBusiness','request\x20received\x20in\x20deleteConversation','Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','model','Background\x20color\x20is\x20required','dbInstance','statSync','numbers','approve','document','no-cache','uazapiSendContact','Error\x20testing\x20IP\x20with\x20','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','instances','some','TEL','method','admin','saveVariable','email','website','/instance/fetchInstances','ephemeralExpiration','notMatchRegex','\x20:\x20','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','role','Bloco\x20com\x20ID\x20','verbose','updateGroupParticipantsWebhook','cta_url','start','_Messages','getMessageModelForOwner','api','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName','apirequest','FlowController','findAndReplace','extractPhoneNumber','addresss','/*.json','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','stopIfLastReturnedError','HH:mm:ss','.error','request\x20received\x20in\x20editConversation','del','):\x20enviado\x20para\x20[','express-async-errors','updateGroupPicture','send.message','):\x20Label\x20','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','):\x20Limpando\x20AutomateSystem','#b4ebff','headers','fetchLabels','Nenhum\x20fluxo\x20correspondente\x20encontrado.','bateu\x20events',',\x20Segundo\x20Valor:\x20','sem\x20texto\x20na\x20mensagem','instanceInfo','contacts','mongodb','subject','}}\x20->\x20valor\x20não\x20encontrado','replaceVariablesChat','CONTACTS_UPSERT','restrict','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','sendContact','group-participants.update','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','creation','instanceCount','uazapiDeleteMessage','AddChatLabel','mongoose','chats.set','customFields','documentWithCaptionMessage','getReadyToSendMessages','generateWAMessageFromContent','conditions','color','contains','):\x20ev.flush\x20realizado','):\x20Deletando\x20mensagem','groupParticipantsUpdate','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','_FlowHistorico','getDevice','Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address','contacts.update','expression','prepareWAMessageMedia','Falha\x20ao\x20processar\x20fetchBusinessProfile','30oyXDHE','getVariablesChat','/instance/delete','chat','testIPv6','https://api64.ipify.org?format=json','ContactsAndGroups','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','0123456789ABCDEF','storePath','floor','updateBlock','):\x20Comando\x20desconhecido:\x20','createGroup','onTime','connectionState','$dbName','flushHeaders','processawaitSeconds','CORS_CREDENTIALS','https://jsonip.com','audioWhatsapp','buttonParamsJson','editChat','width','saveConversationToDatabase','joinGroup','verifyWhatsAppNumber','#92ceac','processblock','joinGroupValidate','log','release','#f64847','getChatModelForOwner','):\x20Editando\x20variável\x20do\x20fluxo...','updateProfileName','sendMenu','object','Selecione\x20uma\x20opção','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20','msgRetryCounterCache','\x1b[0m','):\x20Bloco\x20copiado:\x20','copy','\x22\x20cannot\x20be\x20empty','router','initializeQueue','DELETED','@newsletter','NextBlock','):\x20Procurando\x20PRONTAS\x20mensagens\x20para\x20envio','deletedCount','flowConfig','API_KEY','):\x20\x27Deletando\x20fluxo,\x20id:\x20','recebido\x20de','paramsJson','fromMe','eventHandler','\x1b[32m','save','):\x20Flow\x20desativado','unreadCount','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName','_ScheduleMessages','7hekIeA','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','filter','jsonschema','sendPresenceUpdate','generate','pollCreationMessage','expiration','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','archive','env','pendingMessages','ignoreGroups','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','https://api.openai.com/v1/audio/speech','menuIgnoreNonVotes','rows','nomecompleto','InstancesAlterarTodas','request\x20received\x20in\x20starFlow','findAndReplaceRegex','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','qrcode.updated','):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]','createHash','Detalhes\x20do\x20erro:','Not\x20Found','Invalid\x20format','flowIgnoreGroups','inviteCodeDetails','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','sign','CHATS_UPSERT','):Image\x20path:\x20','):Audio\x20converted\x20and\x20stored\x20in\x20cache','pollUpdateMessage','):\x20Erro\x20ao\x20enviar\x20mensagem:\x20','Fluxos\x20não\x20estão\x20ativados','collections','removeProfilePicture','deleted','toUpperCase','request\x20received\x20in\x20getConversation','Request\x20Body:','dbServer','editflowgroup','Parando\x20aplicação...','CHATS_SET','$addToSet','Subscribed\x20Events:','Erro\x20ao\x20atualizar\x20o\x20flow.','):\x20Reconectando\x20serviço\x20de\x20mensagens\x20após\x20limpeza.','cleaningUp','substring','Error\x20in\x20buttonsMessage\x20function:','available','queue','Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20','editflowreply','MAX_SAFE_INTEGER','\x20depois\x20','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','startCommandWord','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','pollErrorMessage','authState','groupSetting','$set','Erro\x20ao\x20editar\x20o\x20bloco:\x20','PROXY','loadEnv','toggleEphemeral','\x20tentativas.','VERBOSE','METHODS','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','findMessages','reduce','locationMessage','):\x20Entrou\x20na\x20função\x20clearVariables','@redis/client','readFileSync','setRestartTimeout','tags','Safari','views','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','verify','request\x20received\x20in\x20allFlows','findOneAndUpdate','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage','Instance\x20Key\x20from\x20DB:','getBusinessProfile','match_last_seen','convert','Retornando\x20grupos\x20COM\x20cache','normalizeMessage','DEBUG','cachedContact','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD',',\x20pairCode:\x20','.jpg','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','removed','getDate','processingGroup','):\x20Há\x20mensagens\x20prontas,\x20limpando\x20e\x20adicionando\x20à\x20fila','GUARD','Mensagem\x20perdida,\x20não\x20foi\x20possível\x20descriptografá-la,\x20abra\x20o\x20WhatsApp\x20no\x20seu\x20celular\x20para\x20visualizá-la','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','Font\x20is\x20required','audio/ogg;\x20codecs=opus','namespace','editflowvaredit','connectToWhatsappController','setHeader','Falta\x20informação\x20para\x20a\x20chamada\x20API','replace','menu_options','groupAcceptInvite','importChatsAntigo','retrySendMessage','formatStatusMessage','StartBot','mongodb://','#00a1f2','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','):\x20Entrou\x20na\x20função\x20scheduleFlow','randomBytes','userDevicesCache','editOperator','sendText','editFlowVaredit','minutesToClose','Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos','muteEndTime','Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url','groupName','Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...','image','loadWebhook','request\x20received\x20in\x20updateAutoCompleteMessages',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','audio/ogg','canSendMessage','getProfileName','.ogg','pino','redirect','\x20segundos','startFlowWebhook','authModel','CREDENTIALS','request\x20received\x20in\x20editFlowcondition','connectionUpdate','lastFetchAwaitingApproval','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture','sections','updateMany','remove.instance','addChatLabel','editedMessage','Error\x20fetching\x20IPv6\x20addresses:\x20','messageType','PREFIX_KEY','Fluxo\x20agendado\x20pelo\x20fluxo\x20','put','\x20-i\x20','/5\x20falhou:\x20','Configured\x20new\x20IPv6:\x20','):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20','use','waitingMenu_text','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','groupdata.participants','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','3EB0','.jwt','.mp3','\x20is\x20already\x20in\x20use.','updateStatusPrivacy','DATABASE','base64','fetchContacts','networkInterface','isListOfNumbers','subjectOwner','groups.upsert','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','instancias:\x20','qrcode-terminal','request\x20received\x20in\x20createFlow','Erro\x20ao\x20buscar\x20o\x20fluxo','context','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','${Message\x20absent\x20from\x20node}','evaluateCondition','\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27','not\x20loaded','sendLocation','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','Erro\x20ao\x20editar\x20a\x20conversa','convertaudio','leaveGroup','menuExpiredMessage','joinApprovalMode','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','INFO','statusMessage','env.KEY\x20!==\x20key','isInteger','\x5cd+','https://uazapi-plugin.bubbleapps.io/','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','Mensagem\x20não\x20suportada','labelId','instanceKeys','convertedOptions','admin_add','scheduleFlow','):\x20Entrou\x20na\x20função\x20goToFlow','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','AppStateSyncKeyData','):Getting\x20image\x20from\x20url','getTime','backgroundColor','cachedData-whatsapp','cpf','vir','Cache-Control','lastReceivedMessage','SERVER_PORT','throwAndLogError','connectedName','timeoutPromise','endSession','waUploadToServer','@broadcast','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','AUTHENTICATION_JWT_EXPIRIN_IN','Erro\x20ao\x20aplicar\x20varedit:\x20','downloadMediaMessage','enumerable','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','label_jid','makeCacheableSignalKeyStore','timeout','):Error\x20occurred\x20while\x20archiving\x20chat:\x20',',\x20canSendMessage:\x20','display_text','groupJid','getScheduleMessageModelForOwner','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','chat\x20não\x20encontrado','This\x20name\x20','ms\x20(tentativa\x20','markMessageAsRead','delaySecMin','notEmpty','state','URL:','errors','parse','Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27','proxy:\x20','redis','scheduleSendMedia','sendPoll','_year','ReplyOption\x20com\x20ID\x20','2atsbAj','):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção','repository','creds.update','Error\x20removing\x20unused\x20chat\x20fields:','):\x20Entrou\x20na\x20função\x20stop','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','\x20inseridas\x20no\x20banco\x20de\x20dados...','setting','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','messageStubParameters','The\x20property\x20cannot\x20be\x20empty','generateHash','reconnectTimestamps','reorderBlocks','Erro\x20ao\x20deletar\x20mensagens:','updateMissingCustomFields','updateCustomFields','created','dataValidate','updateAll','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','pairingCode','charAt','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20','ff:fe','GROUP_PARTICIPANTS_UPDATE','Log\x20out\x20instance:\x20','notEqual','STORE_CHATS','chatLog','jid','/instance/create','ScheduleMessage','READ','groups.update','routerPath','updateProfileStatus','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','fone','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','owner','Generated\x20IPv6:\x20','toBrazilianNumberFormat','existsSync','now','):\x20Limpando\x20delayMessage','leadInfo','\x1b[33m\x1b[1m','Erro\x20ao\x20tentar\x20updateCustomFields','/group','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','remote\x20\x22origin\x22','):\x20Error\x20processing\x20the\x20block:\x20','SEND_MESSAGE','presence.update','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo','processScheduleFlow','dayjs','hasOwnProperty','integer','Removing\x20excess\x20IPv6\x20address:\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc','updateStopChat','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','flowPrefixCommand','request\x20received\x20in\x20deleteDoneMessages','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.','AddUserFlow','lastSend','Erro\x20ao\x20atualizar\x20conversa:\x20','findMany','from','currency','Partes\x20do\x20caminho\x20FULLCHAIN:','Data\x20inválida\x20fornecida','subjectTime','SERVER_URL','lean','block','message_normalized','deviceSentMessage','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','reactionMessage','waitingMenu_replyOptions','Flow\x20iniciado','isConnected','insert','selectableCount','Router','remoteJid','Valor\x20de\x20find\x20ou\x20replace\x20ausente','cacheInstanceModel','Reiniciando\x20a\x20aplicação...','delayMessage','/wa-contacts','jsonwebtoken','):\x20Bloco\x20com\x20ID\x20','editflowvariable','inet6','updatePrivacySettings','decryptPollVote','isJidGroup','updateGroupWebhook','createButtonSectionsFromValues','Botão\x202','sendMessage','ORG:','random','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','lastUpdate','):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.','convertToWebP','lastMessage','contactHandle','editflowblock','findGroup','long','.ppt','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','#9568cf','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','catch','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','\x22\x20-\x20REMOVED','_activedCount','firstValue','/events/:instance','isCommunityAnnounce','Database\x20connection\x20closed.','choices','getMinutes','spawn','removeChatLabel','Subdomínio\x20extraído\x20da\x20URL:','promisify',',\x20saindo.','organization','#ffffff','REDIS_ENABLED','leadInfo.desativadoFluxoAte','addReplyOption','message','\x20}\x0a','\x20adicionado\x20ao\x20chat\x20','?authSource=admin&readPreference=primary&directConnection=true','GET','5434660qPFqYi','webhookModel','Tentativa\x20','array','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','inviteUrl','):\x20','autoCompleteMessages.command','\x20do\x20chat\x20','toArray','sharePass','restartInstance','https://ifconfig.me/ip','delayChatLabel','globalShow','):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20','groupId','hSet','deleteMessage','?timestamp=','parseInt','Nenhum\x20participante\x20válido\x20encontrado.','editFlowGroup','updateMissingEtiquetas','query','fakeReceived','last_update','uazapiSendText','automateSystem','statusJidList','/instance/connect','map','DATABASE_ENABLED','set','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','):Error\x20in\x20converting\x20audio','sharp','nome','Telefone:\x20','evaluateConditionTest','exec','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens','Rótulo\x20deletado:\x27,\x20','):\x20leadInfoVariables','deleteflow','info','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','Error\x20in\x20prepareMediaMessage:','Error\x20updating\x20cache\x20contact:','variable','documentMessage','Fluxo\x20não\x20encontrado\x20na\x20memória.','request\x20received\x20in\x20updateCustomFields','groups_ignore','!cmd_','getSeconds','Instâncias\x20removidas:\x20','):\x20Deletando\x20conversa...','https://','Module\x20-\x20ON','):\x20[messages.update]\x20group\x20ignored','CONTACTS_UPDATE','quotedMessage','apiResponse','insertMany','/64\x20dev\x20','/events','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','footerText','name','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','/chat','Error\x20fetching\x20and\x20updating\x20profile:\x20','descOwner','abs','STATUS_INSTANCE','capitalizedWords','apikey','OrAnd','Erro\x20ao\x20executar\x20bulkWrite:','findGroupsEspecial','call','AUTHENTICATION','groupRequestParticipantsList','allFlows','):\x20teve\x20mudanças\x20chat.muteEndTime:\x20','uazapi','rowId','ip\x20-6\x20addr\x20show\x20scope\x20global\x20|\x20grep\x20-c\x20inet6','messageHandle','cacheContact','memberAddMode','):\x20Instancia\x20isBusiness:\x20','fetchMessages','Cannot\x20','Bad\x20Request','SERVER_OFFLINE','removeUnusedChatFields','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','reaction','stopped','type','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting','prepareMediaMessage','Imagem\x20não\x20encontrada','toFile','27QGNbPl','):\x20alterando\x20this.AutomateSystem','errorLog','*Pergunta*:\x20\x0a','toLowerCase','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','deleteInstance','sending','this.reconnectAttempts:\x20','connecting','exists','request\x20received\x20in\x20getFlow','ENABLED','\x20-y','dbConnection','\x20chats\x20de\x20','list2','uuid','):\x20conversation.status:\x20','_month','processgoToFlow','):\x20Current\x20Time:\x20','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','presence','/wa-presence','nativeFlowMessage',',\x20Minutes\x20to\x20Close:\x20','374349gbzeuY','data:\x20','groupUpdateDescription','):Image\x20created','p-queue','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','variablesNotFound','editFlowCondition','):\x20Rótulo\x20atualizado:\x20','):\x20Adicionando\x20\x27','URL','PASSWORD','padStart','^\x5cd+','lastInteraction','scheduleSendAudio','proto','[TESTE\x20RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','jpegThumbnail','stopConversation','/wa-connection-update','):\x20Criando\x20nova\x20conversa[createNewConversation]','12nSUpgo','pushName','everyOne','less','_id','Erro\x20ao\x20importar\x20chats','/media','notContains','push','8080','imageMessage','DATABASE_CONNECTION_USER','FlowRouter','json','Chat\x20com\x20ID\x20','varedit','DaysToDelete','contactsArrayMessage','fetchConversation','createConversationforStartFlow','--------------------------------------','findGroupInfo','[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso','Database\x20update\x20result:','varedits','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','sendCommand','\x1b[47m','pollCreationMessageKey','AutomateFunctions','insertCount','):Notifying\x20clients\x20for\x20chat:\x20','composing','min','SUCCESS','):\x20atualização\x20chat:\x20','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','MessageModel','Falha\x20ao\x20recriar\x20IPv6.','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','\x20mensagens\x20de\x20','findAndUpdateCacheContact','Operador:\x20\x22','USER','Variáveis\x20não\x20encontradas:','updateProfilePicture','findById','warn','Primeiro\x20Valor:\x20','\x20não\x20encontrado\x20para\x20atualização.','hex','reorderReplyOptions','sendReaction','Início','Fluxo\x20id\x20\x27','ListType','video-cover.png','\x20com\x20sucesso.','store','Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','):\x20Enviando\x20texto','footer','.X-ABLabel:Celular\x0a','):\x20Bloco\x20original\x20para\x20cópia:\x20','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','replyOption','updateReplyOption','\x1b[44m','waInstances','responsavelid','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','Atualização:\x20','\x20segundos...','delete','temp-','bodyStringErrorParse','/exit','promote','):\x20Editando\x20grupo\x20do\x20fluxo...','Error\x20finding\x20many\x20contacts:','Error\x20writing\x20file:\x20','archiveChat','timeInMinutes','processApiRequest','desc','\x20excess\x20IPv6\x20addresses.','fetchProfilePicture','inner','importChatsBatch','oldToken','.svg','groupToggleEphemeral','startsWith','):\x20Editando\x20condição\x20do\x20fluxo...','ObjectId','):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20','myAppStateKeyId','\x20and\x20data:','drop','bulkWrite','video','\x1b[34m%s\x1b[0m','groupBetterSetting','PRIVKEY','content','pollOnReplyDelete','createJid','getClient','unlinkSync','FULLCHAIN','delayChatLabel_MAX_RETRIES','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','ipv6Prefix','shareOwners','senderKeyDistributionMessage','https','pre','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','/wa-groups','noConnection','interactiveMessage'];a0_0x3da4=function(){return _0x1e4c5e;};return a0_0x3da4();}cr();async function Vi(){const _0x1a9d12=a0_0x3cfc7d;let _0x4cb182;try{_0x4cb182=(await qe[_0x1a9d12(0x879)][_0x1a9d12(0x840)](_0x1a9d12(0x53c)))[_0x1a9d12(0x877)]['ip'];}catch(_0x21facf){console[_0x1a9d12(0x3c6)](_0x21facf);try{_0x4cb182=(await qe['default'][_0x1a9d12(0x840)](_0x1a9d12(0x27a)))[_0x1a9d12(0x877)]['ip'];}catch(_0x593318){console[_0x1a9d12(0x3c6)](_0x593318);try{_0x4cb182=(await qe[_0x1a9d12(0x879)][_0x1a9d12(0x840)](_0x1a9d12(0x182)))[_0x1a9d12(0x877)][_0x1a9d12(0x151)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x1065d7){return console[_0x1a9d12(0x3c6)](_0x1065d7),!0x1;}}}return _0x4cb182;}var Li=0x0;async function lr(){const _0x29b53d=a0_0x3cfc7d;let _0x86186d=await new ue(S[_0x29b53d(0x840)](_0x29b53d(0x335)))[_0x29b53d(0x645)]();return console[_0x29b53d(0x547)](_0x29b53d(0x629),_0x86186d[_0x29b53d(0x11c)]),_0x86186d['length'];}function ur(_0x3404c4){const _0x17df22=a0_0x3cfc7d;let _0x87a4e2=_0x3404c4['get'](_0x17df22(0x10b))[_0x17df22(0x7a5)],_0x32a6df=_0x3404c4[_0x17df22(0x840)](_0x17df22(0x424));console['log'](_0x17df22(0x17a),_0x87a4e2),console[_0x17df22(0x547)](_0x17df22(0x43b),_0x32a6df);let _0x376669='',_0x527230=_0x87a4e2||'';if(_0x87a4e2){let _0x39753d=_0x87a4e2['match'](/\/\/(.*?)\./);console[_0x17df22(0x547)](_0x17df22(0x310),_0x39753d),_0x39753d&&_0x39753d[0x1]&&(_0x376669=_0x39753d[0x1],console[_0x17df22(0x547)](_0x17df22(0x707),_0x376669));}if(!_0x376669&&_0x32a6df&&_0x32a6df[_0x17df22(0x81f)]){let _0x4fc843=_0x32a6df['FULLCHAIN'][_0x17df22(0x407)]('/');console[_0x17df22(0x547)](_0x17df22(0x6c9),_0x4fc843);let _0x297ce3=_0x4fc843[_0x4fc843[_0x17df22(0x11c)]-0x2];if(console[_0x17df22(0x547)](_0x17df22(0x296),_0x297ce3),_0x297ce3){let _0x38f7cd=_0x297ce3[_0x17df22(0x407)]('.');console[_0x17df22(0x547)]('Partes\x20do\x20domínio:',_0x38f7cd),_0x38f7cd['length']>0x2&&(_0x376669=_0x38f7cd[0x0],console[_0x17df22(0x547)]('Subdomínio\x20extraído\x20do\x20caminho\x20SSL:',_0x376669),_0x527230=''+_0x297ce3);}}return{'subdomain':_0x376669||_0x17df22(0x133),'fullURL':_0x527230||_0x17df22(0x445)};}var {subdomain:he,fullURL:Gs}=ur(S);console['log'](a0_0x3cfc7d(0x309),he),console[a0_0x3cfc7d(0x547)](a0_0x3cfc7d(0x351),Gs);async function dr(){const _0x299ea3=a0_0x3cfc7d;let _0x1c04d3=S['get']('REDIS'),_0x35dd18=S[_0x299ea3(0x840)](_0x299ea3(0x768))[_0x299ea3(0x55e)]['KEY'],_0x3a7f35=S[_0x299ea3(0x840)](_0x299ea3(0x424)),_0x351415=await Vi(),_0x34e0b8=S[_0x299ea3(0x840)](_0x299ea3(0x10b))[_0x299ea3(0x107)],_0x4ba4c1=Gs;try{let _0x51decc={'ip':_0x351415||null,'redis_enable':_0x1c04d3?.[_0x299ea3(0x78c)]||null,'apikey':_0x35dd18||null,'ssl':_0x3a7f35?.[_0x299ea3(0x819)]||null,'lastupdate':Gi||null,'port':_0x34e0b8||null,'gitInstallError':Re?.[_0x299ea3(0x70f)]||null,'url':_0x4ba4c1||null,'subdomain':he};if(console[_0x299ea3(0x547)](_0x299ea3(0x1f3),_0x51decc['ip']),_0x1c04d3&&_0x1c04d3[_0x299ea3(0x78c)]){let _0x47c111=await lr();_0x51decc[_0x299ea3(0x511)]=_0x47c111||null;}for(let _0x4de018 in _0x51decc)_0x51decc['hasOwnProperty'](_0x4de018)&&_0x4de018!=='ip'&&(_0x51decc[_0x4de018]=JSON[_0x299ea3(0x238)](_0x51decc[_0x4de018]));return(await qe[_0x299ea3(0x879)][_0x299ea3(0x3c3)](_0x299ea3(0x5d8),_0x51decc))['data'];}catch(_0x1a11a8){return console[_0x299ea3(0x3c6)](_0x1a11a8),!0x1;}}var qs=!0x1,Gi=0x283,pr=0x3,Fi=0x1b7740;async function Bi(){const _0x1f7128=a0_0x3cfc7d;let _0x5391ad=_0x1f7128(0x487);Re===null&&(_0x5391ad=await Vi());let _0x166654=await dr();if(_0x166654){if(_0x166654[_0x1f7128(0x340)][_0x1f7128(0x130)]===!0x0){Re===null&&_0x166654[_0x1f7128(0x340)][_0x1f7128(0x72e)]-Gi>0x0&&await hr(),qs||(qs=!0x0,ir());let _0x42254d=0x24*0x3c*0x3c,_0x1881ba=_0x166654[_0x1f7128(0x340)]['segundos']>_0x42254d?_0x42254d:_0x166654[_0x1f7128(0x340)][_0x1f7128(0x84c)],_0x29bd7a=Number(_0x1881ba);if(isNaN(_0x29bd7a)){console['error'](_0x1f7128(0x289));return;}let _0x1eab12=Math[_0x1f7128(0x532)](_0x29bd7a/0xe10),_0x43272a=Math['floor'](_0x29bd7a%0xe10/0x3c),_0x465282=new Date(Date[_0x1f7128(0x6aa)]()+_0x29bd7a*0x3e8);setTimeout(()=>{const _0x1fcb62=_0x1f7128;console[_0x1fcb62(0x547)](_0x1fcb62(0x6dc)),process[_0x1fcb62(0x284)](0x0);},_0x29bd7a*0x3e8);let _0x288bf2=_0x3cc57d=>_0x3cc57d[_0x1f7128(0x885)]()[_0x1f7128(0x7a7)](0x2,'0'),_0x10b012='Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20'+_0x288bf2(_0x1eab12)+_0x1f7128(0x126)+_0x288bf2(_0x43272a)+_0x1f7128(0x348)+_0x288bf2(_0x465282[_0x1f7128(0x3a8)]())+':'+_0x288bf2(_0x465282[_0x1f7128(0x704)]())+'.';console[_0x1f7128(0x547)](_0x10b012);}else return console['log'](_0x1f7128(0x5a7)),qs&&(console[_0x1f7128(0x547)](_0x1f7128(0x1e5)),process[_0x1f7128(0x284)]()),'LICENSE_INVALID';}else{if(Li++,Li<pr)console['log'](_0x1f7128(0x44f)+Fi/0xea60+_0x1f7128(0x408)),setTimeout(Bi,Fi);else return console[_0x1f7128(0x3c6)](_0x1f7128(0x31a)),_0x1f7128(0x776);}}async function hr(){const _0x14dda0=a0_0x3cfc7d;console[_0x14dda0(0x547)](_0x14dda0(0x233)),console[_0x14dda0(0x547)]('Limpando\x20logs\x20do\x20PM2...'),(0x0,rs[_0x14dda0(0x705)])('pm2\x20flush',{'shell':!0x0})['on'](_0x14dda0(0x35b),_0xcebfc=>{const _0x1e9316=_0x14dda0;_0xcebfc!==0x0?console['error'](_0x1e9316(0x172)):(console['log'](_0x1e9316(0x441)),console[_0x1e9316(0x547)](_0x1e9316(0x2b0)),(0x0,rs[_0x1e9316(0x705)])(_0x1e9316(0x62f),{'shell':!0x0})['on'](_0x1e9316(0x35b),_0x5a9fd4=>{const _0x2fb016=_0x1e9316;if(_0x5a9fd4!==0x0)console[_0x2fb016(0x3c6)]('Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.');else{console[_0x2fb016(0x547)](_0x2fb016(0x258));let _0x3613bc=(0x0,rs['spawn'])('git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm',{'shell':!0x0});_0x3613bc[_0x2fb016(0x20c)]['on'](_0x2fb016(0x877),_0x57d650=>{const _0x186b0e=_0x2fb016;console[_0x186b0e(0x547)](_0x186b0e(0x7f9)+_0x57d650);}),_0x3613bc[_0x2fb016(0x15e)]['on'](_0x2fb016(0x877),_0x3636a5=>{const _0x3f63d1=_0x2fb016;console[_0x3f63d1(0x3c6)]('Erro\x20de\x20atualização:\x20'+_0x3636a5);}),_0x3613bc['on']('exit',_0x5f044d=>{const _0x239f50=_0x2fb016;_0x5f044d!==0x0?console[_0x239f50(0x3c6)]('Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20'+_0x5f044d):console[_0x239f50(0x547)]('Sistema\x20atualizado\x20com\x20sucesso!'),console[_0x239f50(0x547)](_0x239f50(0x598)),setTimeout(()=>process[_0x239f50(0x284)](),0x2710);});}}));});}0x0&&(module[a0_0x3cfc7d(0x44b)]={'fullURL':fullURL,'subdomain':subdomain});