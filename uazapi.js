const a0_0x5a2dd1=a0_0x5d83;(function(_0x208278,_0x1527f3){const _0x2f643e=a0_0x5d83,_0xbac86f=_0x208278();while(!![]){try{const _0x40b650=parseInt(_0x2f643e(0x639))/0x1*(-parseInt(_0x2f643e(0x65a))/0x2)+parseInt(_0x2f643e(0x3ca))/0x3+parseInt(_0x2f643e(0x59f))/0x4*(-parseInt(_0x2f643e(0x392))/0x5)+parseInt(_0x2f643e(0x4be))/0x6*(parseInt(_0x2f643e(0x14e))/0x7)+-parseInt(_0x2f643e(0x610))/0x8*(parseInt(_0x2f643e(0x627))/0x9)+-parseInt(_0x2f643e(0x343))/0xa+-parseInt(_0x2f643e(0x114))/0xb*(-parseInt(_0x2f643e(0x1f5))/0xc);if(_0x40b650===_0x1527f3)break;else _0xbac86f['push'](_0xbac86f['shift']());}catch(_0x4b2048){_0xbac86f['push'](_0xbac86f['shift']());}}}(a0_0x9a7c,0x99f0b));var Uo=Object[a0_0x5a2dd1(0x57c)],Bs=Object['defineProperty'],Vo=Object[a0_0x5a2dd1(0x32a)],jo=Object[a0_0x5a2dd1(0x22f)],Bo=Object[a0_0x5a2dd1(0x652)],Fo=Object[a0_0x5a2dd1(0x399)][a0_0x5a2dd1(0x158)],Jo=(_0x3e4ab3,_0x5c6a25,_0x4c1ad1,_0x256ede)=>{const _0x378cf9=a0_0x5a2dd1;if(_0x5c6a25&&typeof _0x5c6a25==_0x378cf9(0x645)||typeof _0x5c6a25==_0x378cf9(0x188)){for(let _0x4717ec of jo(_0x5c6a25))!Fo[_0x378cf9(0x219)](_0x3e4ab3,_0x4717ec)&&_0x4717ec!==_0x4c1ad1&&Bs(_0x3e4ab3,_0x4717ec,{'get':()=>_0x5c6a25[_0x4717ec],'enumerable':!(_0x256ede=Vo(_0x5c6a25,_0x4717ec))||_0x256ede[_0x378cf9(0x217)]});}return _0x3e4ab3;},T=(_0x1f7e88,_0x18ab73,_0x4a15fc)=>(_0x4a15fc=_0x1f7e88!=null?Uo(Bo(_0x1f7e88)):{},Jo(_0x18ab73||!_0x1f7e88||!_0x1f7e88[a0_0x5a2dd1(0x113)]?Bs(_0x4a15fc,a0_0x5a2dd1(0x5fb),{'value':_0x1f7e88,'enumerable':!0x0}):_0x4a15fc,_0x1f7e88)),Do=T(require(a0_0x5a2dd1(0x56b))),Js=require('fs'),Gs=require('js-yaml'),qs=require(a0_0x5a2dd1(0x2b8)),Ue=require('path'),Y=process[a0_0x5a2dd1(0x413)](),j=(0x0,Ue['join'])(Y,a0_0x5a2dd1(0x69a)),Fs=(0x0,Ue[a0_0x5a2dd1(0x295)])(Y,a0_0x5a2dd1(0x26a)),es=(0x0,Ue[a0_0x5a2dd1(0x295)])(Y,a0_0x5a2dd1(0x49e),a0_0x5a2dd1(0x64e)),Ws=require(a0_0x5a2dd1(0x56f)),ts=class{constructor(){const _0x4d90da=a0_0x5a2dd1;this[_0x4d90da(0x65d)]();}[a0_0x5a2dd1(0x5c2)](_0x42182a){return this['env'][_0x42182a];}[a0_0x5a2dd1(0x65d)](){const _0x4d789f=a0_0x5a2dd1;this[_0x4d789f(0x1bc)]=process[_0x4d789f(0x1bc)]?.[_0x4d789f(0x6c9)]!==_0x4d789f(0x2b2)?this[_0x4d789f(0x4d6)]():this[_0x4d789f(0x3fc)](),this[_0x4d789f(0x1bc)][_0x4d789f(0x17d)]=process[_0x4d789f(0x1bc)]?.['NODE_ENV']==='PROD',process[_0x4d789f(0x1bc)]?.[_0x4d789f(0x6c9)]===_0x4d789f(0x2b2)&&(this[_0x4d789f(0x1bc)]['SERVER'][_0x4d789f(0x1af)]=_0x4d789f(0x5a0),this[_0x4d789f(0x1bc)][_0x4d789f(0x6b6)][_0x4d789f(0x483)]=Number[_0x4d789f(0x5ea)](process[_0x4d789f(0x1bc)]?.['SERVER_PORT']??_0x4d789f(0x6c1)));}[a0_0x5a2dd1(0x4d6)](){const _0x427dc5=a0_0x5a2dd1;return(0x0,Gs['load'])((0x0,Js[_0x427dc5(0x3f8)])((0x0,qs[_0x427dc5(0x295)])(Fs,_0x427dc5(0x13b)),{'encoding':_0x427dc5(0x48c)}));}[a0_0x5a2dd1(0x3fc)](){const _0x45fdd5=a0_0x5a2dd1;return{'SERVER':{'TYPE':process[_0x45fdd5(0x1bc)]['SERVER_TYPE'],'PORT':Number[_0x45fdd5(0x5ea)](process[_0x45fdd5(0x1bc)][_0x45fdd5(0x470)])},'CORS':{'ORIGIN':process['env']['CORS_ORIGIN'][_0x45fdd5(0x60f)](','),'METHODS':process[_0x45fdd5(0x1bc)][_0x45fdd5(0x420)][_0x45fdd5(0x60f)](','),'CREDENTIALS':process[_0x45fdd5(0x1bc)]?.['CORS_CREDENTIALS']===_0x45fdd5(0x2b2)},'SSL_CONF':{'PRIVKEY':process['env']?.[_0x45fdd5(0x5ad)],'FULLCHAIN':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x4e8)]},'STORE':{'CLEANING_INTERVAL':Number[_0x45fdd5(0x383)](process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x566)])?Number[_0x45fdd5(0x5ea)](process[_0x45fdd5(0x1bc)][_0x45fdd5(0x566)]):void 0x0,'MESSAGES':process['env']?.[_0x45fdd5(0x5d2)]===_0x45fdd5(0x2b2),'CONTACTS':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x5e5)]===_0x45fdd5(0x2b2),'CHATS':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x4da)]===_0x45fdd5(0x2b2)},'DATABASE':{'CONNECTION':{'HOST':process['env']?.[_0x45fdd5(0x200)],'PORT':Number['parseInt'](process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x200)]),'USER':process['env']['DATABASE_CONNECTION_USER'],'PASSWORD':process[_0x45fdd5(0x1bc)][_0x45fdd5(0x338)],'URI':process['env']['DATABASE_CONNECTION_URI'],'DB_PREFIX_NAME':process[_0x45fdd5(0x1bc)][_0x45fdd5(0x1c2)]},'ENABLED':process[_0x45fdd5(0x1bc)]?.['DATABASE_ENABLED']===_0x45fdd5(0x2b2)},'REDIS':{'ENABLED':process[_0x45fdd5(0x1bc)]?.['REDIS_ENABLED']==='true','URI':process['env'][_0x45fdd5(0x5c9)],'PREFIX_KEY':process[_0x45fdd5(0x1bc)]['REDIS_PREFIX_KEY']},'LOG':{'LEVEL':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x4b9)][_0x45fdd5(0x60f)](','),'COLOR':process['env']?.[_0x45fdd5(0x230)]===_0x45fdd5(0x2b2)},'DEL_INSTANCE':(0x0,Ws[_0x45fdd5(0x19b)])(process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x455)])?process[_0x45fdd5(0x1bc)][_0x45fdd5(0x455)]===_0x45fdd5(0x2b2):Number[_0x45fdd5(0x5ea)](process['env'][_0x45fdd5(0x455)])||!0x1,'WEBHOOK':{'WEBHOOK_MAP':process['env'][_0x45fdd5(0x345)]?process[_0x45fdd5(0x1bc)][_0x45fdd5(0x345)]==='true':!0x1,'GLOBAL':{'URL':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x63c)],'ENABLED':process['env']?.[_0x45fdd5(0x339)]==='true'},'EVENTS':{'STATUS_INSTANCE':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x17f)]===_0x45fdd5(0x2b2),'QRCODE_UPDATED':process['env']?.[_0x45fdd5(0x1a9)]===_0x45fdd5(0x2b2),'MESSAGES_SET':process['env']?.['WEBHOOK_EVENTS_MESSAGES_SET']===_0x45fdd5(0x2b2),'MESSAGES_UPSERT':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x4b0)]==='true','MESSAGES_UPDATE':process[_0x45fdd5(0x1bc)]?.['WEBHOOK_EVENTS_MESSAGES_UPDATE']===_0x45fdd5(0x2b2),'SEND_MESSAGE':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x486)]==='true','CONTACTS_SET':process['env']?.[_0x45fdd5(0x6c3)]===_0x45fdd5(0x2b2),'CONTACTS_UPDATE':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x3ec)]==='true','CONTACTS_UPSERT':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x695)]===_0x45fdd5(0x2b2),'PRESENCE_UPDATE':process[_0x45fdd5(0x1bc)]?.['WEBHOOK_EVENTS_PRESENCE_UPDATE']===_0x45fdd5(0x2b2),'CHATS_SET':process['env']?.[_0x45fdd5(0x2be)]===_0x45fdd5(0x2b2),'CHATS_UPDATE':process[_0x45fdd5(0x1bc)]?.['WEBHOOK_EVENTS_CHATS_UPDATE']===_0x45fdd5(0x2b2),'CHATS_UPSERT':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x3f9)]===_0x45fdd5(0x2b2),'CHATS_DELETE':process[_0x45fdd5(0x1bc)]?.['WEBHOOK_EVENTS_CHATS_DELETE']===_0x45fdd5(0x2b2),'CONNECTION_UPDATE':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x1eb)]===_0x45fdd5(0x2b2),'GROUPS_UPSERT':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x6b9)]==='true','GROUP_UPDATE':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x28e)]===_0x45fdd5(0x2b2),'GROUP_PARTICIPANTS_UPDATE':process['env']?.['WEBHOOK_EVENTS_GROUP_PARTICIPANTS_UPDATE']==='true','NEW_JWT_TOKEN':process['env']?.[_0x45fdd5(0x3ef)]==='true'}},'CONFIG_SESSION_PHONE':{'CLIENT':process['env']?.[_0x45fdd5(0x3f7)]||_0x45fdd5(0x3b7),'NAME':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x37b)]||_0x45fdd5(0x1f0)},'QRCODE':{'LIMIT':Number[_0x45fdd5(0x5ea)](process[_0x45fdd5(0x1bc)][_0x45fdd5(0x452)])||0x5},'TRIAL_AD':process['env']?.['TRIAL_AD'],'TRIAL_INSTANCE_NAME':process['env']?.[_0x45fdd5(0x18b)],'AUTOUPDATE':process['env']?.['AUTOUPDATE']==='true','PHONE':process[_0x45fdd5(0x1bc)]?.[_0x45fdd5(0x61b)],'AUTHENTICATION':{'TYPE':process[_0x45fdd5(0x1bc)]['AUTHENTICATION_TYPE'],'API_KEY':{'KEY':process[_0x45fdd5(0x1bc)][_0x45fdd5(0x11b)]},'JWT':{'EXPIRIN_IN':Number[_0x45fdd5(0x383)](process[_0x45fdd5(0x1bc)]?.['AUTHENTICATION_JWT_EXPIRIN_IN'])?Number['parseInt'](process['env'][_0x45fdd5(0x1e3)]):0xe10,'SECRET':process[_0x45fdd5(0x1bc)][_0x45fdd5(0x2aa)]}}};}},y=new ts(),Po=T(require('cors')),me=T(require(a0_0x5a2dd1(0x1d7))),ks=require(a0_0x5a2dd1(0x2b8)),ss=T(require(a0_0x5a2dd1(0x183))),as=(_0x5bf6ff=>(_0x5bf6ff[a0_0x5a2dd1(0x62f)]='\x1b[32m',_0x5bf6ff['INFO']=a0_0x5a2dd1(0x43d),_0x5bf6ff[a0_0x5a2dd1(0x152)]=a0_0x5a2dd1(0x42e),_0x5bf6ff[a0_0x5a2dd1(0x1d5)]=a0_0x5a2dd1(0x533),_0x5bf6ff['DEBUG']=a0_0x5a2dd1(0x2b4),_0x5bf6ff[a0_0x5a2dd1(0x35f)]=a0_0x5a2dd1(0x301),_0x5bf6ff[a0_0x5a2dd1(0x5ec)]='\x1b[30m',_0x5bf6ff))(as||{}),Hs=(_0x15dfa7=>(_0x15dfa7[a0_0x5a2dd1(0x62f)]=a0_0x5a2dd1(0x380),_0x15dfa7['DARK']=a0_0x5a2dd1(0x571),_0x15dfa7[a0_0x5a2dd1(0x111)]=a0_0x5a2dd1(0x340),_0x15dfa7[a0_0x5a2dd1(0x152)]=a0_0x5a2dd1(0x3b1),_0x15dfa7['ERROR']='\x1b[31m%s\x1b[0m',_0x15dfa7[a0_0x5a2dd1(0x54b)]=a0_0x5a2dd1(0x2d1),_0x15dfa7['VERBOSE']=a0_0x5a2dd1(0x2f3),_0x15dfa7))(Hs||{}),Ks=(_0x584a06=>(_0x584a06[a0_0x5a2dd1(0x62f)]=a0_0x5a2dd1(0x62f),_0x584a06[a0_0x5a2dd1(0x152)]='WARN',_0x584a06['INFO']=a0_0x5a2dd1(0x111),_0x584a06[a0_0x5a2dd1(0x5ec)]=a0_0x5a2dd1(0x5ec),_0x584a06[a0_0x5a2dd1(0x1d5)]='ERROR',_0x584a06[a0_0x5a2dd1(0x54b)]=a0_0x5a2dd1(0x54b),_0x584a06[a0_0x5a2dd1(0x35f)]=a0_0x5a2dd1(0x35f),_0x584a06))(Ks||{}),zs=(_0x33f0e0=>(_0x33f0e0['LOG']=a0_0x5a2dd1(0x13c),_0x33f0e0[a0_0x5a2dd1(0x111)]=a0_0x5a2dd1(0x45c),_0x33f0e0[a0_0x5a2dd1(0x152)]=a0_0x5a2dd1(0x135),_0x33f0e0['DARK']=a0_0x5a2dd1(0x323),_0x33f0e0['ERROR']=a0_0x5a2dd1(0x115),_0x33f0e0['DEBUG']='\x1b[46m',_0x33f0e0[a0_0x5a2dd1(0x35f)]='\x1b[47m',_0x33f0e0))(zs||{}),C=class{constructor(_0x57e8b8=a0_0x5a2dd1(0x21b)){const _0xd2ed02=a0_0x5a2dd1;this[_0xd2ed02(0x454)]=_0x57e8b8,this[_0xd2ed02(0x2a2)]=y;}[a0_0x5a2dd1(0xfc)](_0x587a6c){const _0x294e44=a0_0x5a2dd1;this[_0x294e44(0x454)]=_0x587a6c;}[a0_0x5a2dd1(0x1e8)](_0x2b9e40,_0x126461){const _0x4371b4=a0_0x5a2dd1;let _0x1a12de=[];this[_0x4371b4(0x2a2)][_0x4371b4(0x5c2)](_0x4371b4(0x62f))[_0x4371b4(0x5b1)][_0x4371b4(0x1b3)](_0x22105c=>_0x1a12de[_0x4371b4(0x125)](Ks[_0x22105c]));let _0x21d938=typeof _0x2b9e40;_0x1a12de['includes'](_0x126461)&&(y[_0x4371b4(0x5c2)](_0x4371b4(0x62f))['COLOR']?(console[_0x4371b4(0x6aa)]('\x1b[1m'+Hs[_0x126461],_0x4371b4(0x3b9),(0x0,ss['default'])()[_0x4371b4(0x2b5)]('DD/MM\x20HH:mm:ss'),_0x4371b4(0x65c),as[_0x126461]+zs[_0x126461]+_0x4371b4(0x1db),_0x126461+_0x4371b4(0x1c9),_0x4371b4(0x68a),this['context']+_0x4371b4(0x65c),as[_0x126461],_0x21d938!==_0x4371b4(0x645)?_0x2b9e40:'',_0x4371b4(0x65c)),_0x21d938===_0x4371b4(0x645)&&console['log'](_0x2b9e40,'\x0a')):console[_0x4371b4(0x6aa)]((0x0,ss[_0x4371b4(0x5fb)])()['format'](_0x4371b4(0x60d)),_0x126461+'\x20',''+this[_0x4371b4(0x454)],_0x2b9e40));}['log'](_0x5b05ac){const _0x32d9b3=a0_0x5a2dd1;this[_0x32d9b3(0x1e8)](_0x5b05ac,_0x32d9b3(0x62f));}[a0_0x5a2dd1(0x698)](_0x4b49b7){const _0x3311a4=a0_0x5a2dd1;this[_0x3311a4(0x1e8)](_0x4b49b7,_0x3311a4(0x111));}[a0_0x5a2dd1(0x214)](_0x4256af){const _0x5c6629=a0_0x5a2dd1;this['console'](_0x4256af,_0x5c6629(0x152));}[a0_0x5a2dd1(0x4a6)](_0x3ce183){const _0x104947=a0_0x5a2dd1;this[_0x104947(0x1e8)](_0x3ce183,'ERROR');}[a0_0x5a2dd1(0x400)](_0x2bd6fd){const _0x40279e=a0_0x5a2dd1;this[_0x40279e(0x1e8)](_0x2bd6fd,_0x40279e(0x35f));}[a0_0x5a2dd1(0x2fb)](_0x362e13){const _0x130f4d=a0_0x5a2dd1;this[_0x130f4d(0x1e8)](_0x362e13,_0x130f4d(0x54b));}['dark'](_0x3435e0){const _0x18d72a=a0_0x5a2dd1;this[_0x18d72a(0x1e8)](_0x3435e0,'DARK');}};function Qs(){const _0x1e5e05=a0_0x5a2dd1;process['on']('uncaughtException',(_0x17fb0c,_0x352c8f)=>{const _0x6d4477=a0_0x5d83;new C(_0x6d4477(0x18e))['error']({'origin':_0x352c8f,'stderr':process[_0x6d4477(0x655)]['fd'],'error':_0x17fb0c});}),process['on'](_0x1e5e05(0x50e),(_0x413dec,_0x485575)=>{const _0x4e9431=_0x1e5e05;new C(_0x4e9431(0x50e))['error']({'origin':_0x485575,'stderr':process['stderr']['fd'],'error':_0x413dec});});}var Ys=T(require(a0_0x5a2dd1(0x498))),os=new Ys['default']({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),le=require(a0_0x5a2dd1(0x2b8)),he=require('fs'),is=require(a0_0x5a2dd1(0x2b8)),B=class{constructor(_0xf0e5da){const _0x354431=a0_0x5a2dd1;this['storePath']=(0x0,is[_0x354431(0x295)])(Y,_0x354431(0x49e)),this[_0x354431(0x26d)]=_0x2c9437=>{const _0x2e2c51=_0x354431;(0x0,he[_0x2e2c51(0x3e7)])(_0x2c9437[_0x2e2c51(0x2b8)])||(0x0,he[_0x2e2c51(0x4b7)])(_0x2c9437[_0x2e2c51(0x2b8)],{'recursive':!0x0});try{return(0x0,he[_0x2e2c51(0x2c0)])((0x0,is[_0x2e2c51(0x295)])(_0x2c9437['path'],_0x2c9437['fileName']+_0x2e2c51(0xec)),JSON[_0x2e2c51(0x561)]({..._0x2c9437[_0x2e2c51(0x31e)]}),{'encoding':'utf-8'}),{'message':'create\x20-\x20success'};}finally{_0x2c9437[_0x2e2c51(0x31e)]=void 0x0;}},this[_0x354431(0x3f1)]=_0xf0e5da[_0x354431(0x5c2)](_0x354431(0x1e4));}[a0_0x5a2dd1(0x2a7)](_0x21ec95,_0x4813f2=!0x1){throw new Error('Method\x20not\x20implemented.');}['find'](_0x542cb3){throw new Error('Method\x20not\x20implemented.');}['delete'](_0x2b9846,_0x4eebf6){const _0x45dde3=a0_0x5a2dd1;throw new Error(_0x45dde3(0x53d));}},oe=require('fs'),Ve=class{},je=class extends B{constructor(_0x4e297b,_0x4991f1){const _0x1d4b15=a0_0x5a2dd1;super(_0x4991f1),this[_0x1d4b15(0x2a9)]=_0x4e297b,this['configService']=_0x4991f1;}async[a0_0x5a2dd1(0x2a7)](_0x186d64,_0x32078e=!0x1){const _0x3e6069=a0_0x5a2dd1;if(_0x186d64[_0x3e6069(0x1c0)]!==0x0)try{return this[_0x3e6069(0x3f1)]['ENABLED']&&_0x32078e?{'insertCount':(await this['messageModel'][_0x3e6069(0x628)]([..._0x186d64]))[_0x3e6069(0x1c0)]}:_0x32078e?(_0x186d64[_0x3e6069(0x1b3)](_0x105983=>this[_0x3e6069(0x26d)]({'path':(0x0,le[_0x3e6069(0x295)])(this['storePath'],_0x3e6069(0x2d4),_0x105983[_0x3e6069(0x53e)]),'fileName':_0x105983[_0x3e6069(0x3a9)]['id'],'data':_0x105983})),{'insertCount':_0x186d64[_0x3e6069(0x1c0)]}):{'insertCount':0x0};}catch(_0x437ff5){return console[_0x3e6069(0x6aa)](_0x3e6069(0x680),_0x437ff5),_0x437ff5;}finally{_0x186d64=void 0x0;}}async[a0_0x5a2dd1(0x40e)](_0x31590e){const _0x53686a=a0_0x5a2dd1;try{if(this[_0x53686a(0x3f1)][_0x53686a(0x159)]){if(_0x31590e?.[_0x53686a(0x16d)]?.[_0x53686a(0x3a9)]){for(let [_0x487dc6,_0x5b5e04]of Object[_0x53686a(0x28c)](_0x31590e['where'][_0x53686a(0x3a9)]))_0x31590e[_0x53686a(0x16d)][_0x53686a(0x482)+_0x487dc6]=_0x5b5e04;delete _0x31590e?.[_0x53686a(0x16d)]?.[_0x53686a(0x3a9)];}return await this[_0x53686a(0x2a9)][_0x53686a(0x40e)]({..._0x31590e['where']})[_0x53686a(0x389)]({'messageTimestamp':-0x1})['limit'](_0x31590e?.['limit']??0x0);}let _0x4bb183=[];if(_0x31590e?.[_0x53686a(0x16d)]?.['key']?.['id'])_0x4bb183[_0x53686a(0x125)](JSON[_0x53686a(0x26b)]((0x0,oe['readFileSync'])((0x0,le[_0x53686a(0x295)])(this[_0x53686a(0x2b1)],'messages',_0x31590e[_0x53686a(0x16d)][_0x53686a(0x53e)],_0x31590e[_0x53686a(0x16d)][_0x53686a(0x3a9)]['id']+_0x53686a(0xec)),{'encoding':_0x53686a(0x48c)})));else{let _0x470242=(0x0,oe[_0x53686a(0x6ad)])((0x0,le[_0x53686a(0x295)])(this[_0x53686a(0x2b1)],'messages',_0x31590e[_0x53686a(0x16d)][_0x53686a(0x53e)]),{'encoding':_0x53686a(0x48c)});for await(let _0x35d6c1 of _0x470242)_0x35d6c1['isFile']()&&_0x4bb183[_0x53686a(0x125)](JSON[_0x53686a(0x26b)]((0x0,oe['readFileSync'])((0x0,le[_0x53686a(0x295)])(this[_0x53686a(0x2b1)],'messages',_0x31590e[_0x53686a(0x16d)]['owner'],_0x35d6c1[_0x53686a(0x67e)]),{'encoding':'utf-8'})));}return _0x4bb183[_0x53686a(0x389)]((_0x50e589,_0x545e19)=>_0x545e19[_0x53686a(0x503)]-_0x50e589[_0x53686a(0x503)])['splice'](0x0,_0x31590e?.[_0x53686a(0x16b)]??_0x4bb183[_0x53686a(0x1c0)]);}catch{return[];}}async['delete'](_0x4b0a31){const _0x471d02=a0_0x5a2dd1;try{if(this[_0x471d02(0x3f1)]['ENABLED'])await this[_0x471d02(0x2a9)][_0x471d02(0xfa)]({..._0x4b0a31['where']});else{let {owner:_0x26e276}=_0x4b0a31[_0x471d02(0x16d)];(0x0,oe['readdirSync'])((0x0,le['join'])(this[_0x471d02(0x2b1)],'messages',_0x26e276))[_0x471d02(0x1b3)](_0x2d1eea=>{const _0x416dea=_0x471d02;let _0x2b7959=(0x0,le[_0x416dea(0x295)])(this['storePath'],_0x416dea(0x2d4),_0x26e276,_0x2d1eea);(0x0,oe['unlinkSync'])(_0x2b7959);});}}catch(_0xe54470){console[_0x471d02(0x4a6)](_0xe54470);}}async[a0_0x5a2dd1(0x6b8)](_0x47123a,_0x46a2c2){const _0x5d85d9=a0_0x5a2dd1;try{let _0x900504=null;if(this[_0x5d85d9(0x3f1)]['ENABLED'])return _0x900504=await this[_0x5d85d9(0x2a9)][_0x5d85d9(0x233)]({..._0x47123a[_0x5d85d9(0x16d)]},{'$set':_0x46a2c2},{'new':!0x0}),_0x900504;}catch(_0x46ba57){throw console[_0x5d85d9(0x4a6)](_0x46ba57),_0x46ba57;}}async[a0_0x5a2dd1(0x628)](_0x4564b4,_0x55aed7=!0x1){const _0x2043d0=a0_0x5a2dd1;if(_0x4564b4[_0x2043d0(0x1c0)]!==0x0)try{return this[_0x2043d0(0x3f1)][_0x2043d0(0x159)]&&_0x55aed7?{'insertCount':(await this[_0x2043d0(0x2a9)][_0x2043d0(0x628)]([..._0x4564b4]))[_0x2043d0(0x1c0)]}:_0x55aed7?(_0x4564b4[_0x2043d0(0x1b3)](_0x5e81b4=>this['writeStore']({'path':(0x0,le[_0x2043d0(0x295)])(this[_0x2043d0(0x2b1)],'messages',_0x5e81b4[_0x2043d0(0x53e)]),'fileName':_0x5e81b4[_0x2043d0(0x3a9)]['id'],'data':_0x5e81b4})),{'insertCount':_0x4564b4[_0x2043d0(0x1c0)]}):{'insertCount':0x0};}catch(_0x20bab1){return console['log'](_0x2043d0(0x680),_0x20bab1),_0x20bab1;}finally{_0x4564b4=void 0x0;}}},se=require('fs'),uo=T(require('@ffmpeg-installer/ffmpeg')),w=T(require('@whiskeysockets/baileys')),_e=require('fs'),$=T(require(a0_0x5a2dd1(0x2b8))),ue=T(require(a0_0x5a2dd1(0x25b))),po=require(a0_0x5a2dd1(0x3ff)),go=T(require(a0_0x5a2dd1(0x3c4))),mo=T(require('qrcode-terminal')),Xs=[a0_0x5a2dd1(0x43c),a0_0x5a2dd1(0x102),a0_0x5a2dd1(0x61f),a0_0x5a2dd1(0x3a6),a0_0x5a2dd1(0x47c)],Zs=[a0_0x5a2dd1(0x40b),a0_0x5a2dd1(0x51f),a0_0x5a2dd1(0x325),a0_0x5a2dd1(0x4a2)],ho=require('os'),kt=T(require(a0_0x5a2dd1(0x30b))),Vt=require(a0_0x5a2dd1(0x259)),Ns=require(a0_0x5a2dd1(0x649)),Be=require(a0_0x5a2dd1(0x353)),rs=T(require(a0_0x5a2dd1(0x353))),ea=new C(a0_0x5a2dd1(0x305)),q=y['get'](a0_0x5a2dd1(0x1e4)),M=q[a0_0x5a2dd1(0x159)]?q[a0_0x5a2dd1(0x661)][a0_0x5a2dd1(0x349)]?rs[a0_0x5a2dd1(0x5fb)][a0_0x5a2dd1(0x57b)](q[a0_0x5a2dd1(0x661)][a0_0x5a2dd1(0x349)],{'dbName':q[a0_0x5a2dd1(0x661)][a0_0x5a2dd1(0x524)]+a0_0x5a2dd1(0x57d)}):rs[a0_0x5a2dd1(0x5fb)][a0_0x5a2dd1(0x57b)](a0_0x5a2dd1(0x5bc)+q['CONNECTION']['HOST']+':'+q[a0_0x5a2dd1(0x661)][a0_0x5a2dd1(0x483)]+a0_0x5a2dd1(0x2fc),{'user':q[a0_0x5a2dd1(0x661)][a0_0x5a2dd1(0x3e6)],'pass':q[a0_0x5a2dd1(0x661)][a0_0x5a2dd1(0x4ea)],'dbName':q[a0_0x5a2dd1(0x661)][a0_0x5a2dd1(0x524)]+a0_0x5a2dd1(0x57d)}):null;function a0_0x9a7c(){const _0x121c4c=['):\x20Ler\x20mensagem','pollOnReplyDelete','The\x20instance\x20needs\x20to\x20be\x20disconnected','groupToggleEphemeral','Cache-Control','header','default',',\x20Resultado:\x20','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','updatePresence','Hash\x20to\x20image\x20name:\x20','slice','restrict','video','toLocaleString','):\x20Flow\x20não\x20encontrado','STORE','group','logger','toBrazilianNumberFormat','caption','editFlowCondition','varedits','blocks','HH:mm:ss','selectedOptions','split','8376lJLQLS','minutesToClose','checkAndUpdateChats','pollCreationMessageV3','processConditionsTest','blockId','isJidGroup','reaction','):\x20Entrou\x20na\x20função\x20stop','):\x20teve\x20mudanças\x20chat.displayName:\x20','desc','PHONE','keep-alive','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','hDel','audioMessage','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','Instance\x20logged\x20out','getAutomateSystem','enabled','Primeiro\x20Valor:\x20','image','padEnd','4689XzilKm','insertMany','view\x20engine','processUazapi','toDataURL','ios','newStoppedUntil','instanceName\x20not\x20provided.','LOG','oldToken','activatedCount','instance','):\x20Não\x20achou\x20nenhum\x20flow','notas','SSL_CONF','poll_id','scheduled','buttonMessage','6223xvRama','EMAIL','groupValidate','WEBHOOK_GLOBAL_URL','Error\x20change\x20group\x20name','):\x20Buscando\x20todos\x20os\x20fluxos...','delayMessage','SERVER_OFFLINE','max','):\x20Iniciando\x20bot...','saveVariable','poll','object','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','creds','\x0aitem','node-mime-types','):\x20Flow\x20desativado','pollMessageOnDelete','variable','request\x20received\x20in\x20deleteDoneMessages','auth','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','sections','getPrototypeOf','DisconnectReason','isFile','stderr','ids','updateBlock','Instance\x20deleted','chats.delete','240ZqhHCg','Imagem\x20não\x20encontrada','\x1b[0m','loadEnv','Unknown\x20message\x20type\x20encountered','Font\x20is\x20required','toNumber','CONNECTION','sendPoll','toFile','send.message','use','sticker','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','\x22\x20cannot\x20be\x20empty','instanceKeys','editFlowBlock','fetchProfile','render','editflowblock','This\x20name\x20','request\x20received\x20in\x20getFlow','Erro\x20ao\x20editar\x20o\x20bloco:\x20','error_log','chats','):\x20Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20schedule\x20message:\x20','Temp\x20audio\x20deleted','url','request\x20received\x20in\x20editConversation','sendAudio','capitalizedWords','request\x20received\x20in\x20scheduleMessage','connecting','eventEmitter','):\x20Dados\x20recebidos\x20no\x20editFlowGroup:','\x20mensagens\x20de\x20','name','PLAYED','ERROR:\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20','online','post','):\x20Erro\x20ao\x20deletar\x20mensagens\x20com\x20status\x20\x22done\x22:','\x20não\x20encontrado','Type\x20defined\x20as\x20audio','pushName','groupId','\x1b[33m\x1b[1m','blockLogs','flowPrefixCommand','mongodb','statusMessage','leadInfo.customFields','/events','editChat','fetchInstances','filter','updateMany','WEBHOOK_EVENTS_CONTACTS_UPSERT','sharp','updateMessage','info','updateConversation','instances','Instance\x20\x22','Connection\x20closed\x20for\x20instance:\x20','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','variablesToObject','exit','}}\x20->\x20valor\x20não\x20encontrado','Getting\x20image\x20from\x20url','unreadcount','upsertChats','messageSecret','replaceOne','):\x20Enviando\x20áudio','BRL','public','noConnection','log','CONNECTION_UPDATE','LIMIT','opendirSync','/wa-message','Flow\x20already\x20exists','-version','HeaderType','#ffffff','express-async-errors','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','wuid','SERVER','The\x20property\x20cannot\x20be\x20empty','update','WEBHOOK_EVENTS_GROUPS_UPSERT','Error\x20update\x20group\x20picture','waMonitor','trim','updateProfileStatus','contacts.update','/refreshToken','Erro\x20ao\x20encerrar\x20a\x20API','8080','connect','WEBHOOK_EVENTS_CONTACTS_SET','^\x5cd+','setHeader','client','Erro\x20ao\x20aplicar\x20varedit:\x20','/automate','DOCKER_ENV','50mb','fetchLatestBaileysVersion','request\x20received\x20in\x20fetchConversation','unavailable','paused','match','.json','backgroundColor','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20áudio:','arraybuffer','_p_',',\x20qrcodeCount:\x20','\x22,\x20valor\x20a\x20substituir:\x20\x22','messageId','\x20horas\x20e\x20','\x0aFN:','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','goNextblock','updateGParticipant','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','deleteMany','The\x20\x22','setContext','groupUpdateDescription','userDevicesCache','archived','buttons','protocolMessage','documentMessage','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20','repository','findParticipants','convertedOptions','inner','Próxima\x20verificação\x20em\x20','messages.update','redis','notMatchRegex','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','saveAPI','updatePrivacySettings','replacer','getBase64FromMediaMessage','INFO','):\x20Conversa\x20atualizada\x20em\x20memória','__esModule','1364AFjgnN','\x1b[41m','findById','readFile','moreLogs','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','File\x20written\x20to\x20path:\x20','AUTHENTICATION_API_KEY','array','no-cache','groupFetchAllParticipating','integer','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','jsonwebtoken','readData','NEW_JWT_TOKEN','Unable\x20to\x20leave\x20the\x20group','push','getTicketSystem','longitude','Conversa\x20deletada\x20com\x20sucesso.','connectionStatus','):\x20Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20','Erro\x20ao\x20iniciar\x20fluxo:\x20','waitingPoll_replyOptions','):\x20Edit\x20schedule\x20message...','fetchProfilePicture','API_KEY','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.','Erro\x20na\x20migração:','error\x20get\x20vote','substring','\x1b[43m','Temp\x20image\x20deleted','toArray','RECONNECT_TIME_FRAME','json','Valor\x20inicial:\x20\x22','../env.yml','\x1b[42m','):\x20Erro\x20ao\x20tentar\x20updateCustomFields:\x20','.\x20Pulando.','chatLog','):\x20Going\x20to\x20','):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20e\x20não\x20é\x20a\x20stopConversation.\x20Saindo\x20da\x20função.','prefixCommand','headerString','.mp4','processingScheduleMessageId','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','Type\x20not\x20found','formatStatusMessage','request\x20received\x20in\x20updateFlowConfig','getLastMessage','):\x20Erro\x20durante\x20a\x20atualização:\x20','isArray','):\x20Enviando\x20enquete','3289426CYIMic','lastMessage','rowId','Error\x20removing\x20profile\x20picture','WARN','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','groupLeave','Image\x20is\x20url','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','available','hasOwnProperty','ENABLED','createConversationforgoToFlow','groups_ignore','Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','saveConversationToDatabase',',\x20Comparador:\x20','request\x20received\x20in\x20deleteConversation','replaceValue',',\x20Segundo\x20Valor:\x20','Data\x20inválida\x20fornecida','replyOptions','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','stdout','Revoke\x20error','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','done','groups','/clients-info','limit','findAndReplace','where','notify','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','/instance/fetchInstances','):\x20newFirstValue\x20após\x20replaceVariables:','allContacts','fileLength','mentioned','sendMessageWithTyping','Image\x20created','sem\x20texto\x20na\x20mensagem','sendStatus','Type\x20is\x20required','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','string','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','PRODUCTION','new.jwt','WEBHOOK_EVENTS_STATUS_INSTANCE','SECRET','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','truncatedto','dayjs','user','extractRegex','start','then','function','^\x5cd+[\x5c.@\x5cw-]+','test','TRIAL_INSTANCE_NAME','trimmed','Atingido\x20interações\x20máximas,\x20parando\x20fluxo','uncaughtException','apikey','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','truncatedtoEnd','groupInviteCode','not\x20loaded','TEXT','groupMetadata','updateFlowConfig','sendList','sendMedia','\x20minutos...','QRCODE_UPDATED','isBooleanString','Falta\x20informação\x20para\x20a\x20chamada\x20API','message','getContentType','lowerCase','Group\x20not\x20found','reactionMessage','addresss','desativadoFluxoAte','number','Falha\x20ao\x20deletar\x20contatos:','NextBlock','sendDataWebhook','createNewConversation','WEBHOOK_EVENTS_QRCODE_UPDATED','messagesSend','responsavelid','sendSticker','statusCode','MESSAGES_UPSERT','TYPE','creds.json','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','uazapiSendContact','forEach','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','dbClient','createFlow','agents','convert','):\x20Campos\x20a\x20serem\x20atualizados:','lastBlockId','env','updateGroupsAddPrivacy','flowname:\x20','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','length','sendMessage','DATABASE_CONNECTION_DB_PREFIX_NAME','deleteInstance','messages.upsert','reconnectTimestamps','Erro\x20ao\x20editar\x20o\x20chat:\x20','getRandomText','redisCache','\x20\x1b[0m','groupSetting','isRunning','Erro\x20ao\x20buscar\x20conversas:\x20','ON\x20-\x20dbName:\x20','stopConversation','statusJidList','next_groupId','Error\x20fetching\x20and\x20updating\x20profile:\x20','-instances','https://api.ipify.org?format=json','lastInteraction','ERROR','updateAgent','express','removeProfilePicture','*Pergunta*:\x20\x0a','groupUpdateSubject','\x1b[1m','setting','Converting\x20image\x20to\x20WebP\x20to\x20sticker','):\x20Conversa\x20inserida\x20com\x20sucesso.','cleaningUp','CONECTADO\x20À\x20UAZAPI','validate','hex','AUTHENTICATION_JWT_EXPIRIN_IN','DATABASE','uazapiDeleteMessage','write','addBlock','console','isDirectory','EVENTS','WEBHOOK_EVENTS_CONNECTION_UPDATE','joinGroupValidate',',\x20lastCondition:\x20','last_update','createServer','chrome','):\x20Editando\x20grupo\x20do\x20fluxo...','replaceVariablesInObject','closed','reorderBlocks','239268CDAslK','Instance\x20ID:','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','lastCondition','created','bulkWrite','\x20messages.update.','contact','put','values','DATABASE_CONNECTION_HOST','chatModel','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP:','groupadd','Flow\x20iniciado\x20com\x20','findGroupInfos','announcement','FlowRouter','):\x20Erro\x20ao\x20criar\x20fluxo\x20','description','connectionUpdate','sleep','waUploadToServer','):\x20Procurando\x20conversa','CLEANING_INTERVAL','originalUrl','webhook','shift','round','query','warn','leaveGroup','quoted','enumerable','chatHandle','call','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','Logger','!stop','success','LICENSE_INVALID','contactname','reviver','saveTextReply','FULLCHAIN','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','https://chat.whatsapp.com/','SUCCESS','notContains','subjectTime','assign','group-participants.update','_id','updateReplyOption','flowStopConversation','contacts.upsert','):\x20Criando\x20fluxo...','getOwnPropertyNames','LOG_COLOR','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','joinGroup','findOneAndUpdate','NO_IP','realVariables','pollCreationMessageKey','stanzaId','CREDENTIALS','fetchStatus','prepareMediaMessage','processPollUpdateMessage','sendPresenceUpdate','listMessage','\x20install\x20output:\x20','newName','lastSendMessage','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','saveCreds','):\x20Deletando\x20mensagem','method','.sendDataWebhook-global','deleteOne','Converted\x20audio\x20deleted','long','routerPath','Forbidden','arrayUnique','/wa-chats','Invalid\x20format','Erro:','dataValidate','}}\x20->\x20\x22','uazapiSendText','unlinkSync','spawn','close','Variável\x20não\x20encontrada!','recording','title','Business\x20profile\x20fetched','child_process','textMessage','axios','audio/ogg;\x20codecs=opus','Content-Type','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','scheduleSendMedia','false','normalizeMessage','hbs','getHours','END:VCARD','writeData','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','picture','authService','replace','src','parse','/wa-groups','writeStore','groupJid','remove','notEqual','local_map','tags','contextInfo','findStatusMessage','initAuthCreds','fromObject','createGroup','output','scheduleSendText','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','isBase64','saveMediaToFile','contentText','updateChatWithMessage','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20','status@broadcast','instanceName','splice','mediatype','role','removed','greater','floor','pollMessage','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo\x20','flowStopMinutes','encoding','entries','Authentication\x20error','WEBHOOK_EVENTS_GROUPS_UPDATE','):\x20expirationTime:\x20','imagechat','utf8','GROUP_PARTICIPANTS_UPDATE','OrAnd','Operador:\x20\x22','join','markMessageAsRead','mediaMessage','):\x20Query\x20params:','scheduleNextCheck','updateStopChat','Audio\x20converted\x20to\x20mp4','flattenObject','messageContextInfo','\x5c$&','stopMinutes','/wa-message-update','verify','configService','Erro\x20inesperado\x20em\x20processvaredits:\x20','):\x20Enviando\x20texto','generateWAMessageFromContent','licenca','insert','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','messageModel','AUTHENTICATION_JWT_SECRET','getDelay','getScheduleMessage','editConversation','qrcode.updated','buttonId','):\x20Erro\x20ao\x20buscar\x20conversas\x20','storePath','true','throwAndLogError','\x1b[36m','format','):\x20Erro\x20ao\x20editar\x20a\x20conversa:\x20','logout','path','CLIENT','DELETED','subject','MESSAGES_UPDATE','):\x20customFieldVariables','WEBHOOK_EVENTS_CHATS_SET','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','writeFileSync','$set','sendText','connectToWhatsapp','The\x20instance\x20is\x20already\x20connected','request\x20body:\x20','presence.update','model','deleteMessageForEveryone','):\x20tem\x20blocks','Hash\x20to\x20audio\x20name:\x20','):\x20Criou\x20conversa\x20no\x20startFlow:','webp','out','Router','pollCreationMessageV2','):\x20Conversas\x20encontradas:','\x1b[36m%s\x1b[0m','apiName','item','messages','pop','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','cleanStore','lastReceivedMessage','\x20chats\x20de\x20','findIndex','messageUpModel','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','Subscribed\x20Events:','dbInstance','Erro\x20ao\x20editar\x20agentes:\x20','Não\x20respondeu\x20com\x20a\x20enquete.','formatBRNumber','match_last_seen','Validate','findGroups','fetchContacts','):\x20Editando\x20variável\x20do\x20fluxo...','editFlowVariable','API\x20Key\x20from\x20Request:','Error\x20updating\x20setting','processvaredits','readreceipts','prepareWAMessageMedia','closeExistingConversations','fetchConversation','chat','Error\x20updating\x20profile\x20name','request\x20received\x20in\x20editFlowvariable','whatsappNumbers','\x1b[37m%s\x1b[0m','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','No\x20join\x20group\x20invite\x20code\x20or\x20url','views','remoteJid','Instance\x20restarted','StartBot','debug','?authSource=admin&readPreference=primary&directConnection=true','):\x20delete\x20=\x20true','audio','):\x20leadInfoVariables','jpegThumbnail','\x1b[37m','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','mimetype','\x20is\x20already\x20in\x20use.','Db\x20Connection','expiration','secondValue','uazapiSendMedia','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','):\x20Erro\x20ao\x20editar\x20agentes:\x20','pino','pollErrorMessage','/wa-qrcode','PRESENCE_UPDATE','@g.us','errors','./.git/config','g.us','redirect','hostname','findWebhook','folder','\x20inseridos\x20no\x20banco\x20de\x20dados...','allflows','errorLog','Not\x20Found','Schema','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','performBulkUpdate','data','contactHandle','):\x20Enviando\x20contato','dropCollection','Archiving\x20chat','\x1b[40m','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','viewOnceMessage','locked','groupAcceptInvite','PRIVKEY','del','getOwnPropertyDescriptor','delInstanceTime','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','option','authModel','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','keys','editflowgroup','/media/','^\x5cd+([-]\x5cd+)*@g.us$','Atualização:\x20','CORS','):\x20nextBlock.uazapi.name','updateStatusPrivacy','DATABASE_CONNECTION_PASSWORD','WEBHOOK_GLOBAL_ENABLED','Connection','type','request\x20received\x20in\x20starFlow','bateu\x20events','latitude','errno','\x1b[34m%s\x1b[0m','resetReconnectionVariables','archive','10619180qneszQ','getConversation','WEBHOOK_MAP','applyvaredit','Flow\x20não\x20encontrado','removeInstance','URI','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','saveChatVariables','findOne','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','webhookModel','@whiskeysockets/baileys','request\x20received\x20in\x20editFlow','badSession','EMAIL:','mongoose','sha256','Getting\x20profile\x20info','announce','urlencoded','getStatus','equal','organization','Desconectado,\x20parando\x20execução.','Full\x20file\x20path:','scheduleMessage','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','VERBOSE','Instance\x20Key\x20from\x20DB:','):\x20Editando\x20condição\x20do\x20fluxo...','processgoToFlow','eventHandler','allFlows','presence','newValue','Parando\x20aplicação,\x20atualização\x20recebida','pollUpdateMessage','.jwt','Valor\x20de\x20find\x20ou\x20replace\x20ausente','contactMessage','Close\x20connection','.sendDataWebhook-local','exists','readMessages','):\x20Erro\x20ao\x20buscar\x20a\x20conversa\x20','editedMessage','replaceVariables','leadInfo','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','mentions','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','collections','composing','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','):\x20Enviando\x20localização','CONFIG_SESSION_PHONE_NAME','Error\x20change\x20group\x20description','updateProfilePicturePrivacy','startsWith','updateCustomFields','\x1b[32m%s\x1b[0m','toggleEphemeral','updateProfilePicture','isInteger','Button\x20IDs\x20cannot\x20be\x20repeated.','updateGroupPicture','Module\x20-\x20ON','chatModify','endSession','sort','restartInstance','locationMessage','authState','defineAuthState','namespace','unreadCount','):\x20conversation.waitingPollname','editflowvariable','765OaGJbx','leadInfo.desativadoFluxoAte','removeData','editOperator','makeCacheableSignalKeyStore','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','from','prototype','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','request\x20received\x20in\x20editFlowcondition','Media\x20folder\x20path:','/*.json','not_announcement','webhookMap','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','fetchMessages','dbServer','generateHash','android','videoMessage','isJidUser','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.','key','no.connection','FlowController','\x20-y','/instance/create','uazapiSendAudio','fileName','createJid','\x1b[33m%s\x1b[0m','Background\x20color\x20is\x20required','/chat','Por\x20favor,\x20responda\x20à\x20última\x20enquete\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','@s.whatsapp.net','CONTACTS_SET','uazapi','groups.update','\x1b[1m\x1b[37m','stack','):\x20Error\x20processing\x20the\x20block:\x20','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','privacySettings','):\x20Editando\x20replyOption...','redisEnv','random','\x20minutos\x20verificará\x20novas\x20mensagens','Initial\x20__dirname:','writeFile','qrcode','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','Error\x20fetching\x20group','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','Processing\x20audio','):\x20Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20','1459068EKiuWu','data:\x20','displayName','app-state-sync-key','delInstanceFiles','variablesNotFound','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','Número:\x20','authorization','connection.update','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco',',\x20valor\x20passado:\x20\x22','profilePicture','Error\x20updating\x20message\x20status:','chats.upsert','mediaKey','\x20minutos.\x20Será\x20às\x20','nextBlock:','ORG:','group\x20ignored','instance.','createflow','Audio\x20is\x20base64','findMessages','https://jsonip.com','replyOption','when','):\x20teve\x20mudanças\x20chat.archived:\x20','USER','existsSync','response','rmSync','):\x20não\x20encontrou','conditions','WEBHOOK_EVENTS_CONTACTS_UPDATE','deleteMessage','whatsappNumber','WEBHOOK_EVENTS_NEW_JWT_TOKEN','downloadMediaMessage','dbSettings','fetchBusinessProfile','none','all','):\x20Procurando\x20mensagens\x20para\x20envio','execSync','CONFIG_SESSION_PHONE_CLIENT','readFileSync','WEBHOOK_EVENTS_CHATS_UPSERT','boolean','code','envProcess','getVariablesChat','fone','uuid','verbose','base64','\x20install\x20error:\x20','The\x20global\x20api\x20key\x20must\x20be\x20set','media','release','_activatedCount','Erro\x20ao\x20deletar\x20a\x20conversa:\x20','env.KEY\x20!==\x20key','ObjectId','https://','ephemeralMessage','includes','less','find','tokenId','waInstances','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','process','cwd','refreshToken','getFlow','_error','getProfileName','.mp3','website','toString','uazapiSendLocation','\x20saindo\x20da\x20função','senderKeyDistributionMessage','sudo\x20apt\x20install\x20-y\x20redis-server','delay','CORS_METHODS','conversationTimestamp','getClient','subjectOwner','scheduleSendAudio','\x20contacts','replaceVariablesLogs','msgRetryCounterCache','isURL','last','groupDesc','lean','jsonschema','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','\x1b[33m','block','.webp','\x0a{\x20instance:\x20','Output\x20audio\x20path:\x20','contact_blacklist','KEY','contactModel','editflowcondition','):\x20atualização\x20chat:\x20','vcard','isJWT','remoteJidsRemaining','useMultiFileAuthState','imageMessage','\x1b[34m','footerText','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','Sending\x20audio\x20whatsapp','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','flowConversation','lastmsg','PREFIX_KEY','editflowvaredit','):\x20Criada\x20conversa\x20nova\x20(gotoflow)','.ogg','waitingPoll_id','CHATS_DELETE','hGetAll','save','ignoreGroups','NAME','value','\x22\x20-\x20REMOVED','document','pt-BR','QRCODE_LIMIT','request\x20received\x20in\x20getConversation','context','DEL_INSTANCE','nomecompleto','URL','editFlowReply','):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20usuário\x20e\x20contém\x20palavras\x20para\x20pausar\x20o\x20fluxo','messaging-history.set','waMonit','\x1b[44m','createWebhook','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','localWebhook','WA\x20MODULE','stopMinutesMaxActives','addReplyOption','@broadcast','groupParticipantsUpdate','não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','order','processblock','now','Converted\x20image\x20deleted',',\x20Minutes\x20to\x20Close:\x20','sudo\x20apt\x20install\x20-y\x20ffmpeg','audioWhatsapp','deleteFlow','fromMe','findConversation','SERVER_PORT','sending','Error\x20updating\x20participants','binary','endsWith','*\x0a\x0a','fetchPrivacySettings','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20','CHATS_UPSERT','jid','jwt','CONFIG_SESSION_PHONE','stickerMessage','fetchProfilePictureUrl','GROUPS_UPSERT','REDIS','):\x20Deletados\x20','chats.update','key.','PORT','ip:\x20','Temp\x20audio\x20path:\x20','WEBHOOK_EVENTS_SEND_MESSAGE','AutomateSystem\x20não\x20foi\x20inicializado','demote','Original\x20filename:','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','connectionState','utf-8','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','scheduleMessages','buttonText','Read\x20messages','ReplyOption\x20com\x20ID\x20','segundos','deleteBlock','flowConfig','downloads','action','eventemitter2','\x20minutos','):\x20','messageUpdate','message-up','valid','store','updateReadReceiptsPrivacy','/wa-contacts','variables','viewOnceMessageV2','Deletion\x20failed','and','Invalid\x20\x22oldToken\x22','error','expression','authentication','loadWebhook','count','Error\x20in\x20markMessageAsRead:','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','READ','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','sendButtons','WEBHOOK_EVENTS_MESSAGES_UPSERT','Bloco\x20com\x20ID\x20','Not\x20is\x20business\x20profile','maxActives','_doc','router','EXPIRIN_IN','mkdirSync','Unauthorized','LOG_LEVEL','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','body','):\x20isVote','editflowreply','6uhNVde','Profile\x20not\x20found','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','Image\x20path:\x20','git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm','/events/:instance','$dbName','\x20não\x20encontrado\x20para\x20atualização.','toLowerCase','getDevice','Erro\x20de\x20atualização:\x20','):\x20Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20','qrCode','Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','archiveChat','ffmpeg','map','updateLastSeenPrivacy','webhookService','editflow','apply','revokeInviteCode','):\x20Buscando\x20conversas...','No\x20invite\x20code','envYaml','evaluateCondition','--version','):\x20Deletando\x20fluxo...','STORE_CHATS','exec','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:','waitingPoll_name','refused','presenceSubscribe','phoneNumber','Nenhum\x20chat\x20encontrado\x20para\x20editar.','startFlow','request\x20received\x20in\x20updateAgent','):\x20Enviando\x20mídia','pollCreationMessage','findByIdAndDelete','remove.instance','SSL_CONF_FULLCHAIN','content','PASSWORD','profile','findChats','optionDescription','STATUS_INSTANCE','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','decryptPollVote','participant','params','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','remoteJids','fetchProfile2','No\x20participants','Media\x20folder\x20does\x20not\x20exist,\x20creating\x20folder...','width',',\x20resultado:\x20','contacts','messageHandle','\x20-i\x20','/:instanceName','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','!cmd_','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','findFlow','messageTimestamp','The\x20','):\x20this.processingScheduleMessageId:\x20','METHODS','editScheduleMessage','http://checkip.dyndns.org','\x20instance\x20does\x20not\x20exist','status','numbers','reference','createClient','unhandledRejection','notEmpty','\x20foi\x20interrompido\x20pelo\x20usuário.','MESSAGES_SET','height','sendReaction','lastSend','):\x20Conversa\x20está\x20expirada','Contacts\x20not\x20found','apirequest','address','text','firstValue','):\x20Tentando\x20deletar\x20todas\x20mensagens\x20updates...','size','reconnectAttempts','varedit','documentWithCaptionMessage','collection','rm\x20-rf\x20','Falha\x20ao\x20deletar\x20mensagens:','):\x20Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','DB_PREFIX_NAME','participants','DELIVERY_ACK','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','updateParticipant','restart','connected','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','Types','send','contactsArrayMessage','indexOf','processApiRequest','static','\x1b[31m','Content\x20is\x20required','AutomateSystem','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','SEND_MESSAGE','everyOne','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:','\x20}\x0a','Message','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','Method\x20not\x20implemented.','owner','empty','\x20inseridas\x20no\x20banco\x20de\x20dados...','open','listen','editFlowVaredit','GROUPS_UPDATE','instanceInfo','getMIMEType','rows','readMessageBot','web','Já\x20existe\x20fluxo\x20com\x20esse\x20nome','DEBUG','nome','fetchStatusMessage','Parando\x20aplicação...','):\x20teve\x20mudanças\x20chat.name:\x20','font','Erro\x20ao\x20criar\x20o\x20fluxo:\x20','):\x20debug\x20alterando\x20this.AutomateSystem','JWT','emit','\x22\x20not\x20found','status.instance','conversation','condition','SERVER_ACK','vote','has','groupCreate','):\x20Erro\x20ao\x20deletar\x20a\x20conversa\x20','add','uazapiSendPoll','URL:','stringify','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','CHATS_UPDATE','AUTHENTICATION','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','STORE_CLEANING_TERMINAL','/exit','set','?timestamp=','onWhatsApp','compression','CHATS_SET','sendLocation','Last\x20message\x20not\x20found','class-validator','delete','\x1b[30m%s\x1b[0m','SendScheduleMessage','editFlow','/webhook','temp-','evaluateConditionTest','replaceVariablesInReplyOptions','unlocked','redis-server','):\x20Error\x20processing\x20conditions:\x20','createConnection','create','-whatsapp-api','WEBHOOK','formatVCard','isLong','sendWhatsAppAudio','some','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','email','Não\x20foi\x20possível\x20obter\x20o\x20endereço\x20IP,\x20interrompendo\x20a\x20aplicação.','state','readMessage','AutomateFunctions','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','/wa-connection-update','convertaudio','fetchChats','ex:\x20\x22groupJid=120362@g.us\x22','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','CONTACTS_UPSERT','findByIdAndUpdate','setWebhook','hGet','groupName','Missing\x20global\x20api\x20key','fullName','pre','toBRL','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','sendContact','buffer','stateConnection','atendimentoAberto','deleteConversation','events','11608xUUMwr','http','Error\x20writing\x20file:\x20','replaceVariablesChat','):\x20Deletando\x20conversa...','isBusiness','metadata','readdirSync','):\x20Buscando\x20conversa...','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','getTime','deletedCount','Error\x20updating\x20profile\x20picture','\x20segundos','SSL_CONF_PRIVKEY','apiResponse','createConversationforStartFlow','Deleted\x20','LEVEL','proto','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','app','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','AUTOUPDATE','updateGParticipate','customFields','updateOne','groups.upsert','cpf','mongodb://','delAll','promote','flushHeaders','):\x20conversation.lastInteraction:\x20','):\x20Mensagens\x20com\x20status\x20\x22done\x22\x20deletadas\x20com\x20sucesso.','get','isConnected','Mensagem\x20não\x20suportada','convertToWebP','BufferJSON','groupHandler','https','REDIS_URI','):\x20Editando\x20bloco...','video-cover.png','options','selectableCount','g-t','Erro\x20ao\x20buscar\x20conversa:\x20','Error\x20in\x20scheduleNextCheck:\x20','inviteCode','STORE_MESSAGE','loadInstance','changeVariables','abs','):\x20Criando\x20nova\x20conversa','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','CONTACTS_UPDATE','bodyString','MAX_RECONNECT_ATTEMPTS','updateProfileName','@redis/client','birthtime','#000000','sendCommand','):\x20Current\x20Time:\x20','sign','modifiedCount','command','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','STORE_CONTACTS','profilePictureUrl','deleteDoneMessages','):\x20transformedCustomFieldVariables','):\x20Mensagem\x20já\x20enviada\x20para\x20','parseInt','Getting\x20audio\x20from\x20url','DARK','flowIgnoreGroups','toUpperCase','):\x20Erro\x20ao\x20editar\x20o\x20chat:\x20','Falha\x20ao\x20deletar\x20mensagens\x20antigas:','getMessage','editFlowGroup','verifiedName','.png'];a0_0x9a7c=function(){return _0x121c4c;};return a0_0x9a7c();}q[a0_0x5a2dd1(0x159)]&&ea['info'](a0_0x5a2dd1(0x1cd)+M[a0_0x5a2dd1(0x4c4)]);async function Go(){const _0x301389=a0_0x5a2dd1;await I[_0x301389(0x694)]({'leadInfo.tags':{'$exists':!0x1}},{'$set':{'leadInfo.tags':[]}}),await I[_0x301389(0x694)]({'leadInfo.customFields':{'$exists':!0x1}},{'$set':{'leadInfo.customFields':[]}}),await I[_0x301389(0x694)]({},{'$unset':{'lastUpdate':0x1,'lastMsgUpdate':0x1}});}M?.['on'](a0_0x5a2dd1(0x52a),()=>{const _0x28c2ba=a0_0x5a2dd1;I&&Go()['catch'](_0x3d3f06=>ea[_0x28c2ba(0x4a6)](_0x28c2ba(0x132)+_0x3d3f06));});var ns=class{},qo=new Be[(a0_0x5a2dd1(0x31b))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),Wo=new Be[(a0_0x5a2dd1(0x31b))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[qo],'default':[]},'statusLead':{'type':String},'note':{'type':String},'disableFlowsUntil':{'type':Number},'serviceOpen':{'type':Boolean},'assignedTo':{'type':String}},{'_id':!0x1}),Ho=new Be['Schema']({'_id':{'type':String,'_id':!0x0},'id':{'type':String,'required':!0x0,'minlength':0x1},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':Wo,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'group_size':{'type':Number},'group_announce':{'type':Boolean},'lastUpdate':{'type':Number},'lastMsgUpdate':{'type':Number}}),I=M?.[a0_0x5a2dd1(0x2c7)](ns['name'],Ho,a0_0x5a2dd1(0x672)),ta=require(a0_0x5a2dd1(0x353)),cs=class{},Ko=new ta[(a0_0x5a2dd1(0x31b))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'id':{'type':String,'required':!0x0,'minlength':0x1},'profilePictureUrl':{'type':String,'minlength':0x1},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),Fe=M?.[a0_0x5a2dd1(0x2c7)](cs[a0_0x5a2dd1(0x67e)],Ko,a0_0x5a2dd1(0x4fa)),O=require('mongoose'),sa=new O[(a0_0x5a2dd1(0x31b))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),ls=new O[(a0_0x5a2dd1(0x31b))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),zo=new O[(a0_0x5a2dd1(0x31b))]({'command':{'type':String},'text':{'type':String},'delay':{'type':Number},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'pollErrorMessage':{'type':String,'default':a0_0x5a2dd1(0x3b4)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),aa=new O[(a0_0x5a2dd1(0x31b))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),oa=new O[(a0_0x5a2dd1(0x31b))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String}},{'_id':!0x1}),Qo=new O[(a0_0x5a2dd1(0x31b))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),ia=new O[(a0_0x5a2dd1(0x31b))]({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':zo},'apirequest':oa,'stopMinutes':{'type':String},'goToFlow':{'type':String},'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa}}),hs=new O[(a0_0x5a2dd1(0x31b))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),ra=new O[(a0_0x5a2dd1(0x31b))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),us=class{},na=new O[(a0_0x5a2dd1(0x31b))]({'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'readMessages':{'type':Boolean,'default':!0x1},'testingWith':{'type':String},'startCommandWord':{'type':String,'default':function(){const _0x214673=a0_0x5a2dd1;return _0x214673(0x500)+Math['random']()[_0x214673(0x41a)](0x24)[_0x214673(0x600)](0x2,0x7);},'required':!0x1,'minlength':0x5},'variables':[hs],'variablesNotFound':{'type':[String]},'blocks':[ia],'groups':[sa],'conditions':[aa],'varedits':[ra],'replyOptions':{'type':[ls],'default':[]}});na[a0_0x5a2dd1(0x596)](a0_0x5a2dd1(0x44b),function(_0x30b0bb){const _0x5755fe=a0_0x5a2dd1;let _0x5cf37d=new Set(),_0x17ea2a=new Set(this['variables']?.[_0x5755fe(0x4ce)](_0x34bb98=>_0x34bb98[_0x5755fe(0x67e)])),_0x23b1ec=JSON[_0x5755fe(0x561)](this),_0x369a53=/{{(?!_)([^}]*)}}/g,_0x144ea0;for(;(_0x144ea0=_0x369a53[_0x5755fe(0x4db)](_0x23b1ec))!==null;)_0x17ea2a[_0x5755fe(0x55b)](_0x144ea0[0x1])||_0x5cf37d[_0x5755fe(0x55e)](_0x144ea0[0x1]);_0x5cf37d[_0x5755fe(0x51c)]>0x0?(console[_0x5755fe(0x214)]('Variáveis\x20não\x20encontradas:',Array['from'](_0x5cf37d)),this['variablesNotFound']=Array[_0x5755fe(0x398)](_0x5cf37d)):this[_0x5755fe(0x3cf)]=[],_0x30b0bb();});var D=M?.['model'](us[a0_0x5a2dd1(0x67e)],na,'flow'),Yo=new O[(a0_0x5a2dd1(0x31b))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[hs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[Qo]},{'_id':!0x1}),ds=class{},Xo=new O[(a0_0x5a2dd1(0x31b))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[hs],'blocks':[ia],'groups':[sa],'conditions':[aa],'varedits':[ra],'replyOptions':{'type':[ls],'default':[]},'chatLog':Yo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x5a2dd1(0x541)},'waitingPoll_id':{'type':String},'waitingPoll_name':{'type':String},'waitingPoll_replyOptions':{'type':[ls],'default':[]}}),F=M?.['model'](ds[a0_0x5a2dd1(0x67e)],Xo,a0_0x5a2dd1(0x442)),ps=class{},Zo=new O[(a0_0x5a2dd1(0x31b))]({'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'mediatype':{'type':String},'fileName':{'type':String}},{'_id':!0x1}),ei=new O[(a0_0x5a2dd1(0x31b))]({'owner':{'type':String},'status':{'type':String,'default':a0_0x5a2dd1(0x637)},'info':{'type':String},'type':{'type':String},'flowName':{'type':String},'message':{'type':Zo,'default':{}},'remoteJids':{'type':[String],'default':[]},'when':{'type':Number},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'messagesSend':{'type':[Object],'default':[]},'remoteJidsRemaining':{'type':[String],'default':[]},'startSend':{'type':Number}}),U=M?.['model'](ps[a0_0x5a2dd1(0x67e)],ei,a0_0x5a2dd1(0x48f)),gs=class{},ti=new O['Schema']({'name':{'type':String},'requests':[oa],'owner':{'type':String}}),en=M?.[a0_0x5a2dd1(0x2c7)](gs[a0_0x5a2dd1(0x67e)],ti,a0_0x5a2dd1(0x10d)),ms=class{},si=new O[(a0_0x5a2dd1(0x31b))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),ai=new O[(a0_0x5a2dd1(0x31b))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'},'stopConversation':{'type':String,'default':'!stop'},'stopMinutes':{'type':Number,'default':0x14}},{'_id':!0x1}),oi=new O[(a0_0x5a2dd1(0x31b))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),ii=new O[(a0_0x5a2dd1(0x31b))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[oi]},'customFields':{'type':[si]},'flowConfig':{'type':ai,'default':{}}}),ie=M?.[a0_0x5a2dd1(0x2c7)](ms[a0_0x5a2dd1(0x67e)],ii,a0_0x5a2dd1(0x535)),be=T(require(a0_0x5a2dd1(0x353))),k=require(a0_0x5a2dd1(0x56f)),fe=class{constructor(_0x1de7dd,_0x49a1cc,_0x2ae5cd){const _0x2075dc=a0_0x5a2dd1;this['jid']=_0x1de7dd,this[_0x2075dc(0x36e)]=_0x49a1cc,this['name']=_0x2ae5cd;}},Je=class{},Ge=class{},Ce=class{},qe=class{},We=class{},we=class{},He=class{},Ke=class{},ze=class{},Qe=class{},Pt=T(require(a0_0x5a2dd1(0x1d7))),ca=require('fs'),la=require(a0_0x5a2dd1(0x2b8));async function Ye(_0x265a8c){const _0x61617b=a0_0x5a2dd1;let _0x24d9d9=J[_0x61617b(0x410)][_0x265a8c];if(q[_0x61617b(0x159)]){let _0x50e3e6=M[_0x61617b(0x422)]()['db'](q['CONNECTION'][_0x61617b(0x524)]+_0x61617b(0x1d2))[_0x61617b(0x520)](_0x265a8c);return _0x24d9d9||(await _0x50e3e6['find']({})[_0x61617b(0x137)]())[_0x61617b(0x1c0)]>0x0;}return _0x24d9d9||(0x0,ca[_0x61617b(0x3e7)])((0x0,la[_0x61617b(0x295)])(j,_0x265a8c));}async function fs(_0x312a30,_0x49f510,_0x42c8f5){const _0x3712f7=a0_0x5a2dd1;if(_0x312a30[_0x3712f7(0x20f)]['includes'](_0x3712f7(0x3ad))||_0x312a30['originalUrl'][_0x3712f7(0x40c)](_0x3712f7(0x170))||_0x312a30[_0x3712f7(0x20f)][_0x3712f7(0x40c)](_0x3712f7(0x567)))return _0x42c8f5();let _0x422315=_0x312a30[_0x3712f7(0x4f2)];if(!_0x422315?.[_0x3712f7(0x281)])throw new g(_0x3712f7(0x62e));if(!await Ye(_0x422315[_0x3712f7(0x281)]))throw new x(_0x3712f7(0x504)+_0x422315[_0x3712f7(0x281)]+_0x3712f7(0x509));_0x42c8f5();}async function ua(_0xeaa174,_0x81889d,_0x1fa022){const _0x4202d1=a0_0x5a2dd1;if(_0xeaa174[_0x4202d1(0x20f)][_0x4202d1(0x40c)]('/instance/create')){let _0x20cba5=_0xeaa174[_0x4202d1(0x4bb)];if(await Ye(_0x20cba5[_0x4202d1(0x281)]))throw new re(_0x4202d1(0x66e)+_0x20cba5[_0x4202d1(0x281)]+_0x4202d1(0x304));J[_0x4202d1(0x410)][_0x20cba5[_0x4202d1(0x281)]]&&delete J[_0x4202d1(0x410)][_0x20cba5[_0x4202d1(0x281)]];}_0x1fa022();}var da=require(a0_0x5a2dd1(0x56f)),pa=T(require(a0_0x5a2dd1(0x121))),Xe=a0_0x5a2dd1(0x3b7),ni=new C('GUARD');async function ci(_0x65995c,_0x42d678,_0x2343fe){const _0x152ba5=a0_0x5a2dd1;let _0x551b46=_0x65995c[_0x152ba5(0x5c2)](_0x152ba5(0x18f));if(_0x551b46&&y[_0x152ba5(0x5c2)]('AUTHENTICATION')[_0x152ba5(0x12f)][_0x152ba5(0x434)]!==_0x551b46)throw new ne();if(y['get'](_0x152ba5(0x564))[_0x152ba5(0x12f)][_0x152ba5(0x434)]===_0x551b46)return _0x2343fe();if((_0x65995c[_0x152ba5(0x20f)][_0x152ba5(0x40c)]('/instance/create')||_0x65995c[_0x152ba5(0x20f)][_0x152ba5(0x40c)](_0x152ba5(0x170)))&&!_0x551b46)throw new re(_0x152ba5(0x594),_0x152ba5(0x403));let _0x45173e=y[_0x152ba5(0x5c2)](_0x152ba5(0x564))[_0x152ba5(0x553)];try{let [_0x298799,_0x312f48]=_0x65995c['get'](_0x152ba5(0x3d2))['split']('\x20');if(_0x298799[_0x152ba5(0x4c6)]()!=='bearer')throw new ne();if(!(0x0,da[_0x152ba5(0x439)])(_0x312f48))throw new ne();let _0x3d026f=_0x65995c['params'],_0x208b71=pa[_0x152ba5(0x5fb)][_0x152ba5(0x2a1)](_0x312f48,_0x45173e[_0x152ba5(0x180)],{'ignoreExpiration':_0x45173e[_0x152ba5(0x4b6)]===0x0});if(_0x3d026f[_0x152ba5(0x281)]!==_0x208b71[_0x152ba5(0x281)]||Xe!==_0x208b71[_0x152ba5(0x2d2)])throw new ne();return _0x2343fe();}catch(_0x21c58d){throw ni[_0x152ba5(0x4a6)](_0x21c58d),new ne();}}async function li(_0x3b0227,_0x26cc81,_0x1fa06e){const _0x4c9e1a=a0_0x5a2dd1;let _0x109c7e=y[_0x4c9e1a(0x5c2)]('AUTHENTICATION')[_0x4c9e1a(0x12f)],_0x27e333=_0x3b0227[_0x4c9e1a(0x5c2)]('apikey');if(_0x109c7e[_0x4c9e1a(0x434)]===_0x27e333)return _0x1fa06e();if(_0x3b0227[_0x4c9e1a(0x20f)]['includes'](_0x4c9e1a(0x3ad))){let _0xbe68c8=y['get'](_0x4c9e1a(0x18b)),_0x2fba12=_0x3b0227[_0x4c9e1a(0x4bb)][_0x4c9e1a(0x281)];if(_0xbe68c8&&_0x2fba12[_0x4c9e1a(0x4c6)]()[_0x4c9e1a(0x37e)](_0xbe68c8[_0x4c9e1a(0x4c6)]()))return _0x1fa06e();if(!_0x27e333)throw new re('Missing\x20global\x20api\x20key',_0x4c9e1a(0x403));}if(_0x3b0227[_0x4c9e1a(0x20f)]['includes'](_0x4c9e1a(0x170))&&!_0x27e333)throw new re(_0x4c9e1a(0x594),_0x4c9e1a(0x403));if(_0x3b0227[_0x4c9e1a(0x20f)][_0x4c9e1a(0x40c)](_0x4c9e1a(0x567))&&!_0x27e333)throw new re('Missing\x20global\x20api\x20key',_0x4c9e1a(0x403));try{let _0x5179fa=_0x3b0227[_0x4c9e1a(0x4f2)];if((await de['auth'][_0x4c9e1a(0x40e)](_0x5179fa[_0x4c9e1a(0x281)]))[_0x4c9e1a(0x18f)]===_0x27e333)return _0x1fa06e();}catch{}throw new ne();}var ga={'jwt':ci,'apikey':li},Ka=require(a0_0x5a2dd1(0x1d7)),E=require('uuid'),S=(..._0x170b5f)=>{const _0x6f9584=a0_0x5a2dd1;let _0x584dcd={};return _0x170b5f[_0x6f9584(0x1b3)](_0x49e600=>_0x584dcd[_0x49e600]={'minLength':0x1,'description':_0x6f9584(0xfb)+_0x49e600+_0x6f9584(0x668)}),{'if':{'propertyNames':{'enum':[..._0x170b5f]}},'then':{'properties':_0x584dcd}};},v={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'instanceName':{'type':a0_0x5a2dd1(0x17b)}},...S(a0_0x5a2dd1(0x281))},ma={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'oldToken':{'type':a0_0x5a2dd1(0x17b)}},'required':[a0_0x5a2dd1(0x630)],...S('oldToken')},wn={'properties':{'key':{'type':a0_0x5a2dd1(0x645),'properties':{'id':{'type':'string'},'remoteJid':{'type':a0_0x5a2dd1(0x17b)},'fromMe':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]}},'required':['id',a0_0x5a2dd1(0x2f8),'fromMe'],...S('id',a0_0x5a2dd1(0x2f8))},'message':{'type':'object'}}},X={'properties':{'delay':{'type':'integer','description':'Enter\x20a\x20value\x20in\x20milliseconds'},'presence':{'type':a0_0x5a2dd1(0x17b),'enum':[a0_0x5a2dd1(0xe9),a0_0x5a2dd1(0x157),a0_0x5a2dd1(0x378),a0_0x5a2dd1(0x256),a0_0x5a2dd1(0xea)]}}},Z={'type':'string','pattern':a0_0x5a2dd1(0x189),'description':a0_0x5a2dd1(0x24d)},ha={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'number':{...Z},'options':{...X},'textMessage':{'type':'object','properties':{'text':{'type':a0_0x5a2dd1(0x17b)}},'required':['text'],...S(a0_0x5a2dd1(0x519))}},'required':['textMessage',a0_0x5a2dd1(0x1a4)]},fa={'type':a0_0x5a2dd1(0x17b),'pattern':a0_0x5a2dd1(0x53c),'description':a0_0x5a2dd1(0x24d)},yn={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'number':{...fa},'options':{...X},'textMessage':{'type':a0_0x5a2dd1(0x645),'properties':{'text':{'type':a0_0x5a2dd1(0x17b)}},'required':['text'],...S('text')}},'required':['textMessage',a0_0x5a2dd1(0x1a4)]},bn={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'number':{...fa},'options':{...X},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':'string','enum':[a0_0x5a2dd1(0x625),'document','video',a0_0x5a2dd1(0x2fe)]},'media':{'type':'string'},'fileName':{'type':a0_0x5a2dd1(0x17b)},'caption':{'type':a0_0x5a2dd1(0x17b)}},'required':[a0_0x5a2dd1(0x283),a0_0x5a2dd1(0x404)],...S(a0_0x5a2dd1(0x3af),a0_0x5a2dd1(0x609),'media')}},'required':[a0_0x5a2dd1(0x297),a0_0x5a2dd1(0x1a4)]},wa={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'number':{...Z},'options':{...X},'stickerMessage':{'type':'object','properties':{'image':{'type':a0_0x5a2dd1(0x17b)}},'required':[a0_0x5a2dd1(0x625)],...S(a0_0x5a2dd1(0x625))}},'required':[a0_0x5a2dd1(0x47c),a0_0x5a2dd1(0x1a4)]},ya={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'statusMessage':{'type':a0_0x5a2dd1(0x645),'properties':{'type':{'type':a0_0x5a2dd1(0x17b),'enum':[a0_0x5a2dd1(0x519),'image',a0_0x5a2dd1(0x2fe),'video']},'content':{'type':a0_0x5a2dd1(0x17b)},'caption':{'type':'string'},'backgroundColor':{'type':'string'},'font':{'type':'integer','minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x5a2dd1(0x11c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5a2dd1(0x17b),'pattern':a0_0x5a2dd1(0x6c4),'description':a0_0x5a2dd1(0x3d0)}},'allContacts':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]}},'required':['type','content'],...S('type',a0_0x5a2dd1(0x4e9))}},'required':['statusMessage']},ba={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'number':{...Z},'options':{...X},'mediaMessage':{'type':a0_0x5a2dd1(0x645),'properties':{'mediatype':{'type':'string','enum':[a0_0x5a2dd1(0x625),'document',a0_0x5a2dd1(0x602),a0_0x5a2dd1(0x2fe)]},'media':{'type':'string'},'fileName':{'type':'string'},'caption':{'type':a0_0x5a2dd1(0x17b)}},'required':[a0_0x5a2dd1(0x283),a0_0x5a2dd1(0x404)],...S(a0_0x5a2dd1(0x3af),a0_0x5a2dd1(0x609),a0_0x5a2dd1(0x404))}},'required':[a0_0x5a2dd1(0x297),a0_0x5a2dd1(0x1a4)]},Sa={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'number':{...Z},'options':{...X},'audioMessage':{'type':a0_0x5a2dd1(0x645),'properties':{'audio':{'type':a0_0x5a2dd1(0x17b)}},'required':[a0_0x5a2dd1(0x2fe)],...S('audio')}},'required':['audioMessage','number']},Ea={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'number':{...Z},'pollMessage':{'type':'object','properties':{'name':{'type':'string'},'selectableCount':{'type':a0_0x5a2dd1(0x1a4)},'values':{'type':'array','minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x5a2dd1(0x67e),a0_0x5a2dd1(0x5cd),'values'],...S('name',a0_0x5a2dd1(0x5cd),'values')}},'required':[a0_0x5a2dd1(0x1a4),a0_0x5a2dd1(0x288)]},va={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...X},'buttonMessage':{'type':a0_0x5a2dd1(0x645),'properties':{'title':{'type':a0_0x5a2dd1(0x17b)},'description':{'type':'string'},'footerText':{'type':a0_0x5a2dd1(0x17b)},'buttons':{'type':a0_0x5a2dd1(0x11c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5a2dd1(0x645),'properties':{'buttonText':{'type':a0_0x5a2dd1(0x17b)},'buttonId':{'type':a0_0x5a2dd1(0x17b)}},'required':['buttonText','buttonId'],...S(a0_0x5a2dd1(0x490),a0_0x5a2dd1(0x2af))}},'mediaMessage':{'type':a0_0x5a2dd1(0x645),'properties':{'media':{'type':a0_0x5a2dd1(0x17b)},'fileName':{'type':a0_0x5a2dd1(0x17b)},'mediatype':{'type':a0_0x5a2dd1(0x17b),'enum':[a0_0x5a2dd1(0x625),a0_0x5a2dd1(0x450),a0_0x5a2dd1(0x602)]}},'required':[a0_0x5a2dd1(0x404),'mediatype'],...S('media','fileName')}},'required':['title','buttons'],...S(a0_0x5a2dd1(0x257),a0_0x5a2dd1(0x209))}},'required':[a0_0x5a2dd1(0x1a4),a0_0x5a2dd1(0x638)]},Na={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...X},'locationMessage':{'type':'object','properties':{'latitude':{'type':a0_0x5a2dd1(0x1a4)},'longitude':{'type':a0_0x5a2dd1(0x1a4)},'name':{'type':a0_0x5a2dd1(0x17b)},'address':{'type':'string'}},'required':['latitude',a0_0x5a2dd1(0x127)],...S(a0_0x5a2dd1(0x67e),a0_0x5a2dd1(0x1a2))}},'required':[a0_0x5a2dd1(0x1a4),'locationMessage']},Ca={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'number':{...Z},'options':{...X},'listMessage':{'type':a0_0x5a2dd1(0x645),'properties':{'title':{'type':a0_0x5a2dd1(0x17b)},'description':{'type':a0_0x5a2dd1(0x17b)},'footerText':{'type':a0_0x5a2dd1(0x17b)},'buttonText':{'type':'string'},'sections':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5a2dd1(0x645),'properties':{'title':{'type':a0_0x5a2dd1(0x17b)},'rows':{'type':a0_0x5a2dd1(0x11c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5a2dd1(0x645),'properties':{'title':{'type':'string'},'description':{'type':a0_0x5a2dd1(0x17b)},'rowId':{'type':a0_0x5a2dd1(0x17b)}},'required':[a0_0x5a2dd1(0x257),a0_0x5a2dd1(0x209),a0_0x5a2dd1(0x150)],...S(a0_0x5a2dd1(0x257),a0_0x5a2dd1(0x209),'rowId')}}},'required':[a0_0x5a2dd1(0x257),a0_0x5a2dd1(0x547)],...S(a0_0x5a2dd1(0x257))}}},'required':[a0_0x5a2dd1(0x257),a0_0x5a2dd1(0x209),a0_0x5a2dd1(0x490),a0_0x5a2dd1(0x651)],...S(a0_0x5a2dd1(0x257),a0_0x5a2dd1(0x209),'buttonText',a0_0x5a2dd1(0x43e))}},'required':['number',a0_0x5a2dd1(0x23d)]},Ta={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'number':{...Z},'options':{...X},'contactMessage':{'type':'array','items':{'type':a0_0x5a2dd1(0x645),'properties':{'fullName':{'type':a0_0x5a2dd1(0x17b)},'phoneNumber':{'type':a0_0x5a2dd1(0x17b),'minLength':0xa}},'required':['fullName',a0_0x5a2dd1(0x4e0)],...S(a0_0x5a2dd1(0x595))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x5a2dd1(0x1a4),a0_0x5a2dd1(0x36b)]},Ma={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'reactionMessage':{'type':'object','properties':{'key':{'type':a0_0x5a2dd1(0x645),'properties':{'id':{'type':a0_0x5a2dd1(0x17b)},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]}},'required':['id',a0_0x5a2dd1(0x2f8),a0_0x5a2dd1(0x46e)],...S('id','remoteJid')},'reaction':{'type':a0_0x5a2dd1(0x17b)}},'required':[a0_0x5a2dd1(0x3a9),a0_0x5a2dd1(0x617)],...S(a0_0x5a2dd1(0x617))}},'required':[a0_0x5a2dd1(0x1a1)]},Ra={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'numbers':{'type':a0_0x5a2dd1(0x11c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':a0_0x5a2dd1(0x6c4),'description':'\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}}},Aa={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'readMessages':{'type':a0_0x5a2dd1(0x11c),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x5a2dd1(0x17b)},'fromMe':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x5a2dd1(0x17b)}},'required':['id','fromMe',a0_0x5a2dd1(0x2f8)],...S('id',a0_0x5a2dd1(0x2f8))}}},'required':[a0_0x5a2dd1(0x36f)]},Ia={'$id':(0x0,E['v4'])(),'type':'object','properties':{'privacySettings':{'type':'object','properties':{'readreceipts':{'type':a0_0x5a2dd1(0x17b),'enum':[a0_0x5a2dd1(0x3f4),a0_0x5a2dd1(0x3f3)]},'profile':{'type':'string','enum':[a0_0x5a2dd1(0x3f4),a0_0x5a2dd1(0x4fa),a0_0x5a2dd1(0x433),a0_0x5a2dd1(0x3f3)]},'status':{'type':'string','enum':[a0_0x5a2dd1(0x3f4),a0_0x5a2dd1(0x4fa),a0_0x5a2dd1(0x433),a0_0x5a2dd1(0x3f3)]},'online':{'type':a0_0x5a2dd1(0x17b),'enum':[a0_0x5a2dd1(0x3f4),a0_0x5a2dd1(0x2e2)]},'last':{'type':a0_0x5a2dd1(0x17b),'enum':['all',a0_0x5a2dd1(0x4fa),a0_0x5a2dd1(0x433),a0_0x5a2dd1(0x3f3)]},'groupadd':{'type':a0_0x5a2dd1(0x17b),'enum':[a0_0x5a2dd1(0x3f4),a0_0x5a2dd1(0x4fa),a0_0x5a2dd1(0x433),a0_0x5a2dd1(0x3f3)]}},'required':[a0_0x5a2dd1(0x2eb),a0_0x5a2dd1(0x4eb),a0_0x5a2dd1(0x50a),'online',a0_0x5a2dd1(0x429),'groupadd'],...S(a0_0x5a2dd1(0x2eb),a0_0x5a2dd1(0x4eb),a0_0x5a2dd1(0x50a),a0_0x5a2dd1(0x683),'last',a0_0x5a2dd1(0x203))}},'required':[a0_0x5a2dd1(0x3bd)]},Da={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'lastMessage':{'type':'object','properties':{'key':{'type':a0_0x5a2dd1(0x645),'properties':{'id':{'type':a0_0x5a2dd1(0x17b)},'remoteJid':{'type':a0_0x5a2dd1(0x17b)},'fromMe':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]}},'required':['id',a0_0x5a2dd1(0x46e),a0_0x5a2dd1(0x2f8)],...S('id','remoteJid')},'messageTimestamp':{'type':'integer','minLength':0x1}},'required':[a0_0x5a2dd1(0x3a9)],...S(a0_0x5a2dd1(0x503))},'archive':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]}},'required':['lastMessage','archive']},Pa={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'id':{'type':a0_0x5a2dd1(0x17b)},'fromMe':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x5a2dd1(0x17b)},'participant':{'type':'string'}},'required':['id','fromMe',a0_0x5a2dd1(0x2f8)],...S('id',a0_0x5a2dd1(0x2f8),a0_0x5a2dd1(0x4f1))},Oa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'where':{'type':a0_0x5a2dd1(0x645),'properties':{'_id':{'type':'string','minLength':0x1},'pushName':{'type':'string','minLength':0x1},'id':{'type':'string','minLength':0x1}},...S(a0_0x5a2dd1(0x22a),'id',a0_0x5a2dd1(0x688))}}},_a={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'name':{'type':a0_0x5a2dd1(0x17b)}},...S('name')},xa={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'status':{'type':a0_0x5a2dd1(0x17b)}},...S('status')},Te={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{'type':a0_0x5a2dd1(0x17b)},'picture':{'type':a0_0x5a2dd1(0x17b)}}},$a={'type':'object','properties':{'wuid':{'type':'string'},'name':{'type':a0_0x5a2dd1(0x17b)},'picture':{'type':a0_0x5a2dd1(0x17b)},'status':{'type':a0_0x5a2dd1(0x17b)},'isBusiness':{'type':a0_0x5a2dd1(0x3fa)}}},ka={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'where':{'type':a0_0x5a2dd1(0x645),'properties':{'_id':{'type':a0_0x5a2dd1(0x17b),'minLength':0x1},'key':{'type':a0_0x5a2dd1(0x645),'if':{'propertyNames':{'enum':[a0_0x5a2dd1(0x46e),a0_0x5a2dd1(0x2f8),'id']}},'then':{'properties':{'remoteJid':{'type':a0_0x5a2dd1(0x17b),'minLength':0x1,'description':a0_0x5a2dd1(0x6b7)},'id':{'type':a0_0x5a2dd1(0x17b),'minLength':0x1,'description':'The\x20property\x20cannot\x20be\x20empty'},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x5a2dd1(0x645)}},...S('_id')},'limit':{'type':a0_0x5a2dd1(0x11f)}}},La={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'where':{'type':a0_0x5a2dd1(0x645),'properties':{'_id':{'type':a0_0x5a2dd1(0x17b)},'remoteJid':{'type':'string'},'id':{'type':a0_0x5a2dd1(0x17b)},'fromMe':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'participant':{'type':a0_0x5a2dd1(0x17b)},'status':{'type':'string','enum':['ERROR','PENDING',a0_0x5a2dd1(0x559),a0_0x5a2dd1(0x526),'READ',a0_0x5a2dd1(0x67f)]}},...S(a0_0x5a2dd1(0x22a),a0_0x5a2dd1(0x2f8),'id','status')},'limit':{'type':a0_0x5a2dd1(0x11f)}}},Ua={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'number':{...Z},'presence':{'type':'string','enum':[a0_0x5a2dd1(0xe9),a0_0x5a2dd1(0x157),a0_0x5a2dd1(0x378),'recording',a0_0x5a2dd1(0xea)]}},'required':[a0_0x5a2dd1(0x365),a0_0x5a2dd1(0x1a4)]},Va={'$id':(0x0,E['v4'])(),'type':'object','properties':{'subject':{'type':a0_0x5a2dd1(0x17b)},'description':{'type':'string'},'profilePicture':{'type':a0_0x5a2dd1(0x17b)},'participants':{'type':a0_0x5a2dd1(0x11c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5a2dd1(0x17b),'minLength':0xa,'pattern':'\x5cd+','description':a0_0x5a2dd1(0x1b5)}}},'required':[a0_0x5a2dd1(0x2bb),a0_0x5a2dd1(0x525)],...S(a0_0x5a2dd1(0x2bb),a0_0x5a2dd1(0x209),a0_0x5a2dd1(0x3d6))},Me={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'groupJid':{'type':a0_0x5a2dd1(0x17b),'pattern':a0_0x5a2dd1(0x333)}},'required':['groupJid'],...S(a0_0x5a2dd1(0x26e))},ja={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'groupJid':{'type':a0_0x5a2dd1(0x17b)},'action':{'type':a0_0x5a2dd1(0x17b),'enum':[a0_0x5a2dd1(0x55e),a0_0x5a2dd1(0x26f),a0_0x5a2dd1(0x5be),a0_0x5a2dd1(0x488)]},'participants':{'type':a0_0x5a2dd1(0x11c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x5a2dd1(0x17b),'minLength':0xa,'pattern':'\x5cd+','description':a0_0x5a2dd1(0x1b5)}}},'required':[a0_0x5a2dd1(0x26e),a0_0x5a2dd1(0x497),a0_0x5a2dd1(0x525)],...S('groupJid',a0_0x5a2dd1(0x497))},Ba={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'groupJid':{'type':'string'},'expiration':{'type':'number','enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':['groupJid','expiration'],...S(a0_0x5a2dd1(0x26e),a0_0x5a2dd1(0x306))},Fa={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'image':{'type':a0_0x5a2dd1(0x17b)}},'required':[a0_0x5a2dd1(0x26e),a0_0x5a2dd1(0x625)],...S(a0_0x5a2dd1(0x26e),a0_0x5a2dd1(0x625))},Ja={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'groupJid':{'type':'string'},'description':{'type':a0_0x5a2dd1(0x17b)}},'required':[a0_0x5a2dd1(0x26e),a0_0x5a2dd1(0x209)],...S(a0_0x5a2dd1(0x26e),a0_0x5a2dd1(0x209))},Ga={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'groupJid':{'type':'string'},'name':{'type':'string'}},'required':[a0_0x5a2dd1(0x26e),a0_0x5a2dd1(0x67e)],...S(a0_0x5a2dd1(0x26e),'name')},qa={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'groupJid':{'type':a0_0x5a2dd1(0x17b)},'setting':{'type':'string','enum':[a0_0x5a2dd1(0x206),a0_0x5a2dd1(0x39f),a0_0x5a2dd1(0x578),a0_0x5a2dd1(0x326)]}},'required':['groupJid',a0_0x5a2dd1(0x1dc)],...S(a0_0x5a2dd1(0x26e),a0_0x5a2dd1(0x1dc))},Wa={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'inviteCode':{'type':a0_0x5a2dd1(0x17b)}},'required':[a0_0x5a2dd1(0x5d1)],...S(a0_0x5a2dd1(0x5d1))},Ha={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'url':{'type':a0_0x5a2dd1(0x17b)},'enabled':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]}},'required':[a0_0x5a2dd1(0x675),a0_0x5a2dd1(0x623)]},Sn={'$id':(0x0,E['v4'])(),'type':a0_0x5a2dd1(0x645),'properties':{'local_map':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':'boolean','enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x5a2dd1(0x3fa),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]}},'required':[a0_0x5a2dd1(0x271),a0_0x5a2dd1(0x4ee),a0_0x5a2dd1(0x19a),a0_0x5a2dd1(0x511),'MESSAGES_UPDATE',a0_0x5a2dd1(0x1ae),'SEND_MESSAGE','CONTACTS_SET',a0_0x5a2dd1(0x58f),a0_0x5a2dd1(0x5d8),a0_0x5a2dd1(0x30e),a0_0x5a2dd1(0x56c),a0_0x5a2dd1(0x478),'CHATS_UPDATE',a0_0x5a2dd1(0x449),a0_0x5a2dd1(0x6ab),a0_0x5a2dd1(0x47e),a0_0x5a2dd1(0x544),a0_0x5a2dd1(0x292)],...S(a0_0x5a2dd1(0x271),a0_0x5a2dd1(0x4ee),a0_0x5a2dd1(0x19a),a0_0x5a2dd1(0x511),'MESSAGES_UPDATE',a0_0x5a2dd1(0x1ae),'SEND_MESSAGE',a0_0x5a2dd1(0x3b6),a0_0x5a2dd1(0x58f),'CONTACTS_UPDATE','PRESENCE_UPDATE',a0_0x5a2dd1(0x56c),a0_0x5a2dd1(0x478),a0_0x5a2dd1(0x563),a0_0x5a2dd1(0x449),a0_0x5a2dd1(0x6ab),a0_0x5a2dd1(0x47e),a0_0x5a2dd1(0x544),a0_0x5a2dd1(0x292))},Ae=require('fs'),Re=require(a0_0x5a2dd1(0x2b8)),Ze=class{},et=class extends B{constructor(_0x2caa32,_0x4260dc){const _0x471a3e=a0_0x5a2dd1;super(_0x4260dc),this['contactModel']=_0x2caa32,this[_0x471a3e(0x2a2)]=_0x4260dc;}async[a0_0x5a2dd1(0x2a7)](_0x1c1f3a,_0x509004=!0x1){const _0x30d034=a0_0x5a2dd1;if(_0x1c1f3a['length']!==0x0)try{return this[_0x30d034(0x3f1)][_0x30d034(0x159)]&&_0x509004?{'insertCount':(await this['contactModel'][_0x30d034(0x628)]([..._0x1c1f3a]))[_0x30d034(0x1c0)]}:(_0x1c1f3a[_0x30d034(0x1b3)](_0x188f0c=>{const _0x326b59=_0x30d034;this[_0x326b59(0x26d)]({'path':(0x0,Re[_0x326b59(0x295)])(this[_0x326b59(0x2b1)],_0x326b59(0x4fa),_0x188f0c['owner']),'fileName':_0x188f0c['id'],'data':_0x188f0c});}),{'insertCount':_0x1c1f3a['length']});}catch(_0x24dd22){return _0x24dd22;}finally{_0x1c1f3a=void 0x0;}}async['delete'](_0x55a8d7){const _0x254d03=a0_0x5a2dd1;try{return this['dbSettings'][_0x254d03(0x159)]?await this[_0x254d03(0x435)][_0x254d03(0xfa)]({..._0x55a8d7['where']}):{'deleted':{'contact':_0x55a8d7[_0x254d03(0x16d)]['id']}};}catch(_0x4991e7){return{'error':_0x4991e7?.[_0x254d03(0x41a)]()};}}async['update'](_0x2a5a1b,_0x2a8fdc){const _0xee5f85=a0_0x5a2dd1;try{if(_0x2a5a1b[_0xee5f85(0x1c0)]===0x0)return;if(this[_0xee5f85(0x3f1)][_0xee5f85(0x159)]){let _0x11cf30=_0x2a5a1b['map'](_0x4d2ce0=>({'updateOne':{'filter':{'id':_0x4d2ce0['id'],'owner':_0x2a8fdc},'update':{..._0x4d2ce0}}})),{nModified:_0xc1e984}=await this[_0xee5f85(0x435)][_0xee5f85(0x1fb)](_0x11cf30);return{'insertCount':_0xc1e984};}}catch{return;}}async[a0_0x5a2dd1(0x40e)](_0x4c8b70){const _0xd928e1=a0_0x5a2dd1;try{if(this[_0xd928e1(0x3f1)][_0xd928e1(0x159)])return await this[_0xd928e1(0x435)][_0xd928e1(0x40e)]({'owner':_0x4c8b70['where'][_0xd928e1(0x53e)]})['limit'](_0x4c8b70?.[_0xd928e1(0x16b)]??0x0)[_0xd928e1(0x42b)]();let _0x7495bf=[];if(_0x4c8b70?.['where']?.['id'])_0x7495bf[_0xd928e1(0x125)](JSON['parse']((0x0,Ae[_0xd928e1(0x3f8)])((0x0,Re[_0xd928e1(0x295)])(this[_0xd928e1(0x2b1)],_0xd928e1(0x4fa),_0x4c8b70[_0xd928e1(0x16d)]['owner'],_0x4c8b70[_0xd928e1(0x16d)]['id']+_0xd928e1(0xec)),{'encoding':'utf-8'})));else{let _0x39ed90=(0x0,Ae['opendirSync'])((0x0,Re[_0xd928e1(0x295)])(this[_0xd928e1(0x2b1)],_0xd928e1(0x4fa),_0x4c8b70[_0xd928e1(0x16d)][_0xd928e1(0x53e)]),{'encoding':'utf-8'});for await(let _0x1b06ee of _0x39ed90)_0x1b06ee[_0xd928e1(0x654)]()&&_0x7495bf[_0xd928e1(0x125)](JSON[_0xd928e1(0x26b)]((0x0,Ae['readFileSync'])((0x0,Re[_0xd928e1(0x295)])(this[_0xd928e1(0x2b1)],_0xd928e1(0x4fa),_0x4c8b70['where'][_0xd928e1(0x53e)],_0x1b06ee[_0xd928e1(0x67e)]),{'encoding':_0xd928e1(0x48c)})));}return _0x7495bf;}catch{return[];}}},tt=require(a0_0x5a2dd1(0x42c)),Mn=require(a0_0x5a2dd1(0x6b3)),ws=new C(a0_0x5a2dd1(0x2e3)),L=class{constructor(){}[a0_0x5a2dd1(0x249)](_0x11848a,_0x25aacb=!0x0){const _0x12d883=a0_0x5a2dd1;let _0x18f7ec='/'+_0x11848a;return _0x25aacb&&(_0x18f7ec+=_0x12d883(0x4fd)),_0x18f7ec;}async[a0_0x5a2dd1(0x24f)](_0x58ca87){const _0x48f1cb=a0_0x5a2dd1;let {request:_0x5a6e02,schema:_0x27264e,ClassRef:_0x4c6a43,execute:_0x13bd2d}=_0x58ca87,_0x3d6f69=new _0x4c6a43(),_0x32db14=_0x5a6e02[_0x48f1cb(0x4bb)],_0x525a6e=_0x5a6e02[_0x48f1cb(0x4f2)];_0x5a6e02?.['query']&&Object[_0x48f1cb(0x330)](_0x5a6e02[_0x48f1cb(0x213)])[_0x48f1cb(0x1c0)]>0x0&&Object[_0x48f1cb(0x228)](_0x525a6e,_0x5a6e02[_0x48f1cb(0x213)]),_0x5a6e02[_0x48f1cb(0x20f)][_0x48f1cb(0x40c)](_0x48f1cb(0x3ad))&&Object[_0x48f1cb(0x228)](_0x525a6e,_0x32db14),Object[_0x48f1cb(0x228)](_0x3d6f69,_0x32db14);let _0x38f2bc=_0x27264e?(0x0,tt['validate'])(_0x3d6f69,_0x27264e):{'valid':!0x0,'errors':[]};if(!_0x38f2bc[_0x48f1cb(0x49d)]){let _0x2b1133=_0x38f2bc[_0x48f1cb(0x310)][_0x48f1cb(0x4ce)](({property:_0x4a37b3,stack:_0x54782c,schema:_0x134352})=>{const _0x1d57cb=_0x48f1cb;let _0x2aee6b;return _0x134352[_0x1d57cb(0x209)]?_0x2aee6b=_0x134352[_0x1d57cb(0x209)]:_0x2aee6b=_0x54782c[_0x1d57cb(0x269)](_0x1d57cb(0x3de),''),{'property':_0x4a37b3[_0x1d57cb(0x269)](_0x1d57cb(0x3de),''),'message':_0x2aee6b};});throw ws[_0x48f1cb(0x4a6)]([..._0x2b1133]),new g(..._0x2b1133);}return await _0x13bd2d(_0x525a6e,_0x3d6f69);}async[a0_0x5a2dd1(0x63b)](_0x225536){const _0x42e2a3=a0_0x5a2dd1;let {request:_0x861642,ClassRef:_0x33dbef,schema:_0x17d684,execute:_0x5194d6}=_0x225536,_0x42e458=_0x861642[_0x42e2a3(0x213)];if(!_0x42e458?.['groupJid'])throw new g(_0x42e2a3(0x1f8),_0x42e2a3(0x58d));let _0x5a86b9=_0x861642[_0x42e2a3(0x4f2)],_0x27404a=_0x861642[_0x42e2a3(0x4bb)],_0x2ce017=new _0x33dbef();Object[_0x42e2a3(0x228)](_0x27404a,_0x42e458),Object[_0x42e2a3(0x228)](_0x2ce017,_0x27404a);let _0x2a821b=(0x0,tt[_0x42e2a3(0x1e1)])(_0x2ce017,_0x17d684);if(!_0x2a821b['valid']){let _0x4db584=_0x2a821b['errors'][_0x42e2a3(0x4ce)](({property:_0x306764,stack:_0x587a88,schema:_0x5739b8})=>{const _0x9d8f82=_0x42e2a3;let _0x64175f;return _0x5739b8[_0x9d8f82(0x209)]?_0x64175f=_0x5739b8[_0x9d8f82(0x209)]:_0x64175f=_0x587a88[_0x9d8f82(0x269)](_0x9d8f82(0x3de),''),{'property':_0x306764[_0x9d8f82(0x269)](_0x9d8f82(0x3de),''),'message':_0x64175f};});throw ws['error']([..._0x4db584]),new g(..._0x4db584);}return await _0x5194d6(_0x5a86b9,_0x2ce017);}async['joinGroupValidate'](_0x5c5cd1){const _0x59f019=a0_0x5a2dd1;let {request:_0x2172e2,ClassRef:_0x4b0754,schema:_0x23e6d6,execute:_0x3866b6}=_0x5c5cd1,_0x3b4e06=_0x2172e2[_0x59f019(0x4bb)];if(!_0x3b4e06?.[_0x59f019(0x5d1)])throw new g('The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body',_0x59f019(0x374));let _0xfba7b7=_0x2172e2[_0x59f019(0x4f2)],_0x24f181=_0x2172e2[_0x59f019(0x4bb)],_0x27f564=new _0x4b0754();Object['assign'](_0x24f181,_0x3b4e06),Object[_0x59f019(0x228)](_0x27f564,_0x24f181);let _0xd9984c=(0x0,tt[_0x59f019(0x1e1)])(_0x27f564,_0x23e6d6);if(!_0xd9984c[_0x59f019(0x49d)]){let _0x7ba839=_0xd9984c[_0x59f019(0x310)][_0x59f019(0x4ce)](({property:_0x44b7d8,stack:_0x35def4,schema:_0x151a21})=>{const _0x4587f7=_0x59f019;let _0x458f44;return _0x151a21[_0x4587f7(0x209)]?_0x458f44=_0x151a21[_0x4587f7(0x209)]:_0x458f44=_0x35def4[_0x4587f7(0x269)](_0x4587f7(0x3de),''),{'property':_0x44b7d8[_0x4587f7(0x269)](_0x4587f7(0x3de),''),'message':_0x458f44};});throw ws['error']([..._0x7ba839]),new g(..._0x7ba839);}return await _0x3866b6(_0xfba7b7,_0x27f564);}},Ie=require('path'),De=require('fs'),st=class{},at=class extends B{constructor(_0x285759,_0x505995){const _0x4bbf1d=a0_0x5a2dd1;super(_0x505995),this[_0x4bbf1d(0x2db)]=_0x285759,this[_0x4bbf1d(0x2a2)]=_0x505995;}async['insert'](_0x3b8d58,_0x390e57){const _0x38d751=a0_0x5a2dd1;if(_0x3b8d58['length']!==0x0)try{if(this[_0x38d751(0x3f1)]['ENABLED']&&_0x390e57)return{'insertCount':(await this[_0x38d751(0x2db)]['insertMany']([..._0x3b8d58]))[_0x38d751(0x1c0)]};_0x3b8d58[_0x38d751(0x1b3)](_0x121875=>{const _0x32d5e9=_0x38d751;this[_0x32d5e9(0x26d)]({'path':(0x0,Ie[_0x32d5e9(0x295)])(this[_0x32d5e9(0x2b1)],_0x32d5e9(0x49c),_0x121875[_0x32d5e9(0x53e)]),'fileName':_0x121875['id'],'data':_0x121875});});}catch(_0x2d2500){return _0x2d2500;}}async[a0_0x5a2dd1(0x40e)](_0x3f5221){const _0x49d014=a0_0x5a2dd1;try{if(this[_0x49d014(0x3f1)]['ENABLED'])return await this[_0x49d014(0x2db)]['find']({..._0x3f5221[_0x49d014(0x16d)]})['sort']({'datetime':-0x1})['limit'](_0x3f5221?.['limit']??0x0);let _0x26ecea=[];if(_0x3f5221?.[_0x49d014(0x16d)]?.['id'])_0x26ecea[_0x49d014(0x125)](JSON[_0x49d014(0x26b)]((0x0,De[_0x49d014(0x3f8)])((0x0,Ie['join'])(this[_0x49d014(0x2b1)],'message-up',_0x3f5221[_0x49d014(0x16d)][_0x49d014(0x53e)],_0x3f5221[_0x49d014(0x16d)]['id']+_0x49d014(0xec)),{'encoding':_0x49d014(0x48c)})));else{let _0x540d0f=(0x0,De[_0x49d014(0x6ad)])((0x0,Ie['join'])(this[_0x49d014(0x2b1)],_0x49d014(0x49c),_0x3f5221['where'][_0x49d014(0x53e)]),{'encoding':_0x49d014(0x48c)});for await(let _0x34cec1 of _0x540d0f)_0x34cec1[_0x49d014(0x654)]()&&_0x26ecea['push'](JSON[_0x49d014(0x26b)]((0x0,De['readFileSync'])((0x0,Ie[_0x49d014(0x295)])(this[_0x49d014(0x2b1)],_0x49d014(0x49c),_0x3f5221[_0x49d014(0x16d)][_0x49d014(0x53e)],_0x34cec1[_0x49d014(0x67e)]),{'encoding':_0x49d014(0x48c)})));}return _0x26ecea[_0x49d014(0x389)]((_0x71998e,_0x29ea9d)=>_0x29ea9d['datetime']-_0x71998e['datetime'])[_0x49d014(0x282)](0x0,_0x3f5221?.[_0x49d014(0x16b)]??_0x26ecea[_0x49d014(0x1c0)]);}catch{return[];}}async[a0_0x5a2dd1(0x570)](_0x216665){const _0x161a10=a0_0x5a2dd1;try{if(this['dbSettings'][_0x161a10(0x159)])return await this[_0x161a10(0x2db)][_0x161a10(0xfa)]({..._0x216665[_0x161a10(0x16d)]});}catch(_0x3b7acd){return console[_0x161a10(0x4a6)](_0x161a10(0x522),_0x3b7acd),_0x3b7acd;}}},b=class{},ot=class extends L{constructor(..._0x30c124){const _0x4928ea=a0_0x5a2dd1;super(),this[_0x4928ea(0x4b5)]=(0x0,Ka['Router'])(),this[_0x4928ea(0x4b5)]['post'](this['routerPath'](_0x4928ea(0x5fe)),..._0x30c124,async(_0x5db741,_0x15370e)=>{const _0x9089a3=_0x4928ea;let _0x1c4b4d=await this[_0x9089a3(0x24f)]({'request':_0x5db741,'schema':Ua,'ClassRef':Je,'execute':(_0x518bff,_0x184022)=>P['updatePresence'](_0x518bff,_0x184022)});return _0x15370e[_0x9089a3(0x50a)](0xc9)[_0x9089a3(0x139)](_0x1c4b4d);})[_0x4928ea(0x684)](this[_0x4928ea(0x249)](_0x4928ea(0x2f2)),..._0x30c124,async(_0x4031fe,_0x4f9065)=>{const _0x1b2b88=_0x4928ea;let _0x2e1be8=await this[_0x1b2b88(0x24f)]({'request':_0x4031fe,'schema':Ra,'ClassRef':Ge,'execute':(_0x15ad8d,_0x3d1069)=>P[_0x1b2b88(0x3ee)](_0x15ad8d,_0x3d1069)});return _0x4f9065['status'](0xc9)[_0x1b2b88(0x139)](_0x2e1be8);})[_0x4928ea(0x684)](this[_0x4928ea(0x249)]('editChat'),..._0x30c124,async(_0x595640,_0x5496e9)=>{const _0x4418d8=_0x4928ea;let _0x3b2149=await this[_0x4418d8(0x24f)]({'request':_0x595640,'schema':v,'ClassRef':b,'execute':(_0x266365,_0x1c4a61)=>P[_0x4418d8(0x691)](_0x266365,_0x1c4a61)});return _0x5496e9['status'](0xc9)[_0x4418d8(0x139)](_0x3b2149);})['put'](this[_0x4928ea(0x249)](_0x4928ea(0x296)),..._0x30c124,async(_0x2d995f,_0x1c8100)=>{const _0x53bafe=_0x4928ea;let _0x17bf88=await this[_0x53bafe(0x24f)]({'request':_0x2d995f,'schema':Aa,'ClassRef':He,'execute':(_0x23c3a2,_0x147517)=>P['readMessage'](_0x23c3a2,_0x147517)});return _0x1c8100['status'](0xc9)['json'](_0x17bf88);})[_0x4928ea(0x1fe)](this[_0x4928ea(0x249)]('archiveChat'),..._0x30c124,async(_0x58be76,_0x56afca)=>{const _0xaf5b5b=_0x4928ea;let _0x3caf41=await this[_0xaf5b5b(0x24f)]({'request':_0x58be76,'schema':Da,'ClassRef':Ke,'execute':(_0x43df9e,_0x577d40)=>P[_0xaf5b5b(0x4cc)](_0x43df9e,_0x577d40)});return _0x56afca[_0xaf5b5b(0x50a)](0xc9)[_0xaf5b5b(0x139)](_0x3caf41);})[_0x4928ea(0x570)](this[_0x4928ea(0x249)](_0x4928ea(0x2c8)),..._0x30c124,async(_0x4fb546,_0x5923ac)=>{const _0x5a7cc0=_0x4928ea;let _0x3b550b=await this[_0x5a7cc0(0x24f)]({'request':_0x4fb546,'schema':Pa,'ClassRef':Qe,'execute':(_0x1d0cf2,_0x11e81d)=>P['deleteMessage'](_0x1d0cf2,_0x11e81d)});return _0x5923ac['status'](0xc9)['json'](_0x3b550b);})['post'](this[_0x4928ea(0x249)](_0x4928ea(0x47d)),..._0x30c124,async(_0x1bef26,_0x3a3341)=>{const _0xf8f187=_0x4928ea;let _0x419d6c=await this[_0xf8f187(0x24f)]({'request':_0x1bef26,'schema':Te,'ClassRef':Ce,'execute':(_0x167099,_0x4b2305)=>P[_0xf8f187(0x12e)](_0x167099,_0x4b2305)});return _0x3a3341[_0xf8f187(0x50a)](0xc8)['json'](_0x419d6c);})['post'](this[_0x4928ea(0x249)]('fetchProfile'),..._0x30c124,async(_0x22fb21,_0x154012)=>{const _0x2eda03=_0x4928ea;let _0x5aaa0d=await this[_0x2eda03(0x24f)]({'request':_0x22fb21,'schema':$a,'ClassRef':Ce,'execute':(_0x2f2d31,_0x2a1bef)=>P[_0x2eda03(0x66b)](_0x2f2d31,_0x2a1bef)});return _0x154012[_0x2eda03(0x50a)](0xc8)[_0x2eda03(0x139)](_0x5aaa0d);})[_0x4928ea(0x684)](this[_0x4928ea(0x249)]('findContacts'),..._0x30c124,async(_0x1058a2,_0x460798)=>{const _0x4626a6=_0x4928ea;let _0x4666c5=await this['dataValidate']({'request':_0x1058a2,'schema':Oa,'ClassRef':Ze,'execute':(_0x365880,_0x716950)=>P['fetchContacts'](_0x365880,_0x716950)});return _0x460798[_0x4626a6(0x50a)](0xc8)['json'](_0x4666c5);})[_0x4928ea(0x684)](this[_0x4928ea(0x249)](_0x4928ea(0x110)),..._0x30c124,async(_0x31a117,_0xd56aa2)=>{const _0x37c583=_0x4928ea;let _0x3c51c3=await this[_0x37c583(0x24f)]({'request':_0x31a117,'schema':null,'ClassRef':Object,'execute':(_0x5d85ae,_0x5f5053)=>P['getBase64FromMediaMessage'](_0x5d85ae,_0x5f5053)});return _0xd56aa2[_0x37c583(0x50a)](0xc9)['json'](_0x3c51c3);})[_0x4928ea(0x684)](this['routerPath'](_0x4928ea(0x3e1)),..._0x30c124,async(_0x4709ec,_0x55088a)=>{const _0x4e4bbe=_0x4928ea;let _0x4a7016=await this[_0x4e4bbe(0x24f)]({'request':_0x4709ec,'schema':ka,'ClassRef':Ve,'execute':(_0x74bb32,_0x2fe771)=>P[_0x4e4bbe(0x3a2)](_0x74bb32,_0x2fe771)});return _0x55088a[_0x4e4bbe(0x50a)](0xc8)['json'](_0x4a7016);})[_0x4928ea(0x684)](this['routerPath'](_0x4928ea(0x274)),..._0x30c124,async(_0x161a75,_0x4258fb)=>{const _0x2d018a=_0x4928ea;let _0x30374c=await this['dataValidate']({'request':_0x161a75,'schema':La,'ClassRef':st,'execute':(_0x10ab7c,_0x1271fb)=>P['fetchStatusMessage'](_0x10ab7c,_0x1271fb)});return _0x4258fb[_0x2d018a(0x50a)](0xc8)[_0x2d018a(0x139)](_0x30374c);})[_0x4928ea(0x5c2)](this[_0x4928ea(0x249)](_0x4928ea(0x4ec)),..._0x30c124,async(_0x1cef49,_0x5033fd)=>{const _0x3dc4d5=_0x4928ea;let _0x7c2ce9=await this['dataValidate']({'request':_0x1cef49,'schema':null,'ClassRef':b,'execute':_0x2d24e0=>P[_0x3dc4d5(0x58c)](_0x2d24e0)});return _0x5033fd['status'](0xc8)[_0x3dc4d5(0x139)](_0x7c2ce9);})[_0x4928ea(0x5c2)](this[_0x4928ea(0x249)](_0x4928ea(0x476)),..._0x30c124,async(_0x54fed5,_0x7d8187)=>{const _0x579e60=_0x4928ea;let _0x29187c=await this[_0x579e60(0x24f)]({'request':_0x54fed5,'schema':null,'ClassRef':b,'execute':_0x5e764d=>P[_0x579e60(0x476)](_0x5e764d)});return _0x7d8187[_0x579e60(0x50a)](0xc8)[_0x579e60(0x139)](_0x29187c);})[_0x4928ea(0x1fe)](this[_0x4928ea(0x249)](_0x4928ea(0x10e)),..._0x30c124,async(_0x470649,_0x521b7d)=>{const _0x1085ba=_0x4928ea;let _0xd1bd2f=await this[_0x1085ba(0x24f)]({'request':_0x470649,'schema':Ia,'ClassRef':ze,'execute':(_0x2c4dd9,_0x2f0e2a)=>P[_0x1085ba(0x10e)](_0x2c4dd9,_0x2f0e2a)});return _0x521b7d[_0x1085ba(0x50a)](0xc9)[_0x1085ba(0x139)](_0xd1bd2f);})['post'](this['routerPath'](_0x4928ea(0x3f2)),..._0x30c124,async(_0x37446e,_0x52f8be)=>{const _0x1daa76=_0x4928ea;let _0x2d7290=await this[_0x1daa76(0x24f)]({'request':_0x37446e,'schema':Te,'ClassRef':we,'execute':(_0x3a5aa9,_0x2ffb7c)=>P['fetchBusinessProfile'](_0x3a5aa9,_0x2ffb7c)});return _0x52f8be['status'](0xc8)[_0x1daa76(0x139)](_0x2d7290);})[_0x4928ea(0x684)](this[_0x4928ea(0x249)](_0x4928ea(0x5db)),..._0x30c124,async(_0x4c89db,_0x327c69)=>{const _0x467daf=_0x4928ea;let _0x328038=await this[_0x467daf(0x24f)]({'request':_0x4c89db,'schema':_a,'ClassRef':qe,'execute':(_0x3ad728,_0x1d9cc8)=>P[_0x467daf(0x5db)](_0x3ad728,_0x1d9cc8)});return _0x327c69[_0x467daf(0x50a)](0xc8)[_0x467daf(0x139)](_0x328038);})['post'](this['routerPath'](_0x4928ea(0x6bd)),..._0x30c124,async(_0x28e0d2,_0x3ca5f1)=>{const _0x1ee6d0=_0x4928ea;let _0x36dae0=await this[_0x1ee6d0(0x24f)]({'request':_0x28e0d2,'schema':xa,'ClassRef':We,'execute':(_0x1e7774,_0x31aace)=>P[_0x1ee6d0(0x6bd)](_0x1e7774,_0x31aace)});return _0x3ca5f1[_0x1ee6d0(0x50a)](0xc8)[_0x1ee6d0(0x139)](_0x36dae0);})[_0x4928ea(0x1fe)](this[_0x4928ea(0x249)](_0x4928ea(0x382)),..._0x30c124,async(_0xb8dafe,_0x5786b5)=>{const _0x1f996a=_0x4928ea;let _0x5b42cc=await this[_0x1f996a(0x24f)]({'request':_0xb8dafe,'schema':Te,'ClassRef':we,'execute':(_0x16641e,_0x282012)=>P[_0x1f996a(0x382)](_0x16641e,_0x282012)});return _0x5786b5[_0x1f996a(0x50a)](0xc8)[_0x1f996a(0x139)](_0x5b42cc);})[_0x4928ea(0x570)](this[_0x4928ea(0x249)]('removeProfilePicture'),..._0x30c124,async(_0x337e5e,_0x26ab43)=>{const _0x13d91c=_0x4928ea;let _0x27cafa=await this[_0x13d91c(0x24f)]({'request':_0x337e5e,'schema':Te,'ClassRef':we,'execute':(_0x5dc7b0,_0x45edb1)=>P[_0x13d91c(0x1d8)](_0x5dc7b0,_0x45edb1)});return _0x26ab43[_0x13d91c(0x50a)](0xc8)[_0x13d91c(0x139)](_0x27cafa);});}},za=require(a0_0x5a2dd1(0x1d7)),it=class{},rt=class{},nt=class{},ct=class{},lt=class{},ee=class{},ut=class{},dt=class extends ee{},pt=class extends ee{},gt=class extends L{constructor(..._0x5bb823){const _0x54478a=a0_0x5a2dd1;super(),this['router']=(0x0,za[_0x54478a(0x2ce)])(),this[_0x54478a(0x4b5)][_0x54478a(0x684)](this[_0x54478a(0x249)]('create'),..._0x5bb823,async(_0xb35961,_0x48b52f)=>{const _0x188374=_0x54478a;let _0x33e0c5=await this[_0x188374(0x24f)]({'request':_0xb35961,'schema':Va,'ClassRef':it,'execute':(_0x604378,_0x3b4877)=>V[_0x188374(0x277)](_0x604378,_0x3b4877)});_0x48b52f[_0x188374(0x50a)](0xc9)[_0x188374(0x139)](_0x33e0c5);})[_0x54478a(0x1fe)](this[_0x54478a(0x249)](_0x54478a(0x385)),..._0x5bb823,async(_0x1e4dc9,_0x4adb3d)=>{const _0x49efd0=_0x54478a;let _0x3bbe09=await this['groupValidate']({'request':_0x1e4dc9,'schema':Fa,'ClassRef':rt,'execute':(_0xcb36ee,_0x459e4f)=>V[_0x49efd0(0x385)](_0xcb36ee,_0x459e4f)});_0x4adb3d['status'](0xc9)[_0x49efd0(0x139)](_0x3bbe09);})[_0x54478a(0x1fe)](this['routerPath'](_0x54478a(0x42a)),..._0x5bb823,async(_0x3bdfc9,_0x518cc2)=>{const _0x132592=_0x54478a;let _0x327f66=await this[_0x132592(0x63b)]({'request':_0x3bdfc9,'schema':Ja,'ClassRef':nt,'execute':(_0x165c1b,_0x27eba)=>V[_0x132592(0x42a)](_0x165c1b,_0x27eba)});_0x518cc2[_0x132592(0x50a)](0xc9)[_0x132592(0x139)](_0x327f66);})[_0x54478a(0x1fe)](this['routerPath'](_0x54478a(0x593)),..._0x5bb823,async(_0x27c478,_0x2ce5a5)=>{const _0x14e0de=_0x54478a;let _0x342037=await this['groupValidate']({'request':_0x27c478,'schema':Ga,'ClassRef':ct,'execute':(_0x1c5a2c,_0x41ba4c)=>V[_0x14e0de(0x593)](_0x1c5a2c,_0x41ba4c)});_0x2ce5a5[_0x14e0de(0x50a)](0xc9)[_0x14e0de(0x139)](_0x342037);})['put'](this['routerPath'](_0x54478a(0x1ca)),..._0x5bb823,async(_0x4d886e,_0x49b51f)=>{const _0x4c7eaf=_0x54478a;let _0x318a7b=await this[_0x4c7eaf(0x63b)]({'request':_0x4d886e,'schema':qa,'ClassRef':lt,'execute':(_0x101032,_0x49b4b1)=>V[_0x4c7eaf(0x1ca)](_0x101032,_0x49b4b1)});_0x49b51f[_0x4c7eaf(0x50a)](0xc9)['json'](_0x318a7b);})[_0x54478a(0x1fe)](this[_0x54478a(0x249)](_0x54478a(0x381)),..._0x5bb823,async(_0xb31481,_0x6ebc15)=>{const _0x2077e9=_0x54478a;let _0xa6fec9=await this[_0x2077e9(0x63b)]({'request':_0xb31481,'schema':Ba,'ClassRef':pt,'execute':(_0x260dfc,_0x220990)=>V[_0x2077e9(0x381)](_0x260dfc,_0x220990)});_0x6ebc15[_0x2077e9(0x50a)](0xc9)[_0x2077e9(0x139)](_0xa6fec9);})[_0x54478a(0x5c2)](this[_0x54478a(0x249)](_0x54478a(0x205)),..._0x5bb823,async(_0x4b698b,_0x206e67)=>{const _0x5d56ef=_0x54478a;let _0x1c5436=await this['groupValidate']({'request':_0x4b698b,'schema':Me,'ClassRef':ee,'execute':(_0x5e3385,_0xbe9702)=>V['findGroupInfo'](_0x5e3385,_0xbe9702)});_0x206e67[_0x5d56ef(0x50a)](0xc8)[_0x5d56ef(0x139)](_0x1c5436);})[_0x54478a(0x5c2)](this[_0x54478a(0x249)](_0x54478a(0x2e4)),..._0x5bb823,async(_0xa8f7c7,_0x8cb8b5)=>{const _0x13331c=_0x54478a;let _0x480639=await this[_0x13331c(0x24f)]({'request':_0xa8f7c7,'schema':v,'ClassRef':b,'execute':_0x47396e=>V['findGroups'](_0x47396e)});_0x8cb8b5[_0x13331c(0x50a)](0xc8)[_0x13331c(0x139)](_0x480639);})[_0x54478a(0x5c2)](this[_0x54478a(0x249)](_0x54478a(0x525)),..._0x5bb823,async(_0x54a7fb,_0x11d765)=>{const _0x5b87df=_0x54478a;let _0x3c4066=await this[_0x5b87df(0x63b)]({'request':_0x54a7fb,'schema':Me,'ClassRef':ee,'execute':(_0x4d4e4b,_0xbe6cfe)=>V[_0x5b87df(0x105)](_0x4d4e4b,_0xbe6cfe)});_0x11d765[_0x5b87df(0x50a)](0xc8)[_0x5b87df(0x139)](_0x3c4066);})[_0x54478a(0x5c2)](this[_0x54478a(0x249)](_0x54478a(0x5d1)),..._0x5bb823,async(_0x3d3fd1,_0x5ccf42)=>{const _0x4675b3=_0x54478a;let _0x46b21c=await this[_0x4675b3(0x63b)]({'request':_0x3d3fd1,'schema':Me,'ClassRef':ee,'execute':(_0x1624b3,_0x21308f)=>V['inviteCode'](_0x1624b3,_0x21308f)});_0x5ccf42[_0x4675b3(0x50a)](0xc8)['json'](_0x46b21c);})[_0x54478a(0x1fe)](this[_0x54478a(0x249)](_0x54478a(0x232)),..._0x5bb823,async(_0xeb5c2,_0x21bc68)=>{const _0x110c33=_0x54478a;let _0x22e7e4=await this[_0x110c33(0x1ec)]({'request':_0xeb5c2,'schema':Wa,'ClassRef':ut,'execute':(_0x8a1110,_0x344385)=>V['joinGroup'](_0x8a1110,_0x344385)});_0x21bc68[_0x110c33(0x50a)](0xc9)['json'](_0x22e7e4);})[_0x54478a(0x1fe)](this['routerPath'](_0x54478a(0x4d3)),..._0x5bb823,async(_0x390476,_0x3d6588)=>{const _0x41202b=_0x54478a;let _0x3e5d48=await this['groupValidate']({'request':_0x390476,'schema':Me,'ClassRef':ee,'execute':(_0x5780b7,_0x5ea334)=>V[_0x41202b(0x4d3)](_0x5780b7,_0x5ea334)});_0x3d6588['status'](0xc9)[_0x41202b(0x139)](_0x3e5d48);})[_0x54478a(0x1fe)](this[_0x54478a(0x249)](_0x54478a(0x528)),..._0x5bb823,async(_0x347788,_0x12ff6b)=>{const _0x3bc4f2=_0x54478a;let _0x423e23=await this[_0x3bc4f2(0x63b)]({'request':_0x347788,'schema':ja,'ClassRef':dt,'execute':(_0x18cd63,_0x2d4145)=>V[_0x3bc4f2(0x5b7)](_0x18cd63,_0x2d4145)});_0x12ff6b[_0x3bc4f2(0x50a)](0xc9)['json'](_0x423e23);})[_0x54478a(0x570)](this[_0x54478a(0x249)]('leaveGroup'),..._0x5bb823,async(_0xc78dcf,_0x55af38)=>{const _0x5f3b11=_0x54478a;let _0x3f9fec=await this['groupValidate']({'request':_0xc78dcf,'schema':{},'ClassRef':ee,'execute':(_0x19a736,_0x123cca)=>V[_0x5f3b11(0x215)](_0x19a736,_0x123cca)});_0x55af38['status'](0xc8)['json'](_0x3f9fec);});}},Xa=require(a0_0x5a2dd1(0x1d7)),Pe=require('jsonwebtoken'),ys=require(a0_0x5a2dd1(0x3ff)),Qa=require(a0_0x5a2dd1(0x56f)),Ya=T(require(a0_0x5a2dd1(0x25b))),mt=class{},ht=class c{constructor(_0x3d52a3,_0x5d844e,_0x4ff08a){const _0x1bd59b=a0_0x5a2dd1;this['configService']=_0x3d52a3,this[_0x1bd59b(0x6bb)]=_0x5d844e,this[_0x1bd59b(0x104)]=_0x4ff08a,this[_0x1bd59b(0x607)]=new C(c['name']);}async[a0_0x5a2dd1(0x47a)](_0x34a7ba){const _0x4db17d=a0_0x5a2dd1;let _0x1f2bca=this[_0x4db17d(0x2a2)]['get'](_0x4db17d(0x564))[_0x4db17d(0x553)],_0x3c17c0=(0x0,Pe[_0x4db17d(0x5e1)])({'instanceName':_0x34a7ba[_0x4db17d(0x281)],'apiName':Xe,'tokenId':(0x0,ys['v4'])()},_0x1f2bca[_0x4db17d(0x180)],{'expiresIn':_0x1f2bca[_0x4db17d(0x4b6)],'encoding':_0x4db17d(0x291),'subject':_0x4db17d(0x5ce)}),_0x117115=await this[_0x4db17d(0x104)][_0x4db17d(0x64e)][_0x4db17d(0x57c)]({'jwt':_0x3c17c0},_0x34a7ba[_0x4db17d(0x281)]);if(_0x117115[_0x4db17d(0x4a6)])throw this[_0x4db17d(0x607)][_0x4db17d(0x4a6)]({'localError':c[_0x4db17d(0x67e)]+_0x4db17d(0x369),'error':_0x117115[_0x4db17d(0x4a6)]}),new g('Authentication\x20error',_0x117115[_0x4db17d(0x4a6)]?.[_0x4db17d(0x41a)]());return{'jwt':_0x3c17c0};}async['apikey'](_0x25e8ac){const _0x44b047=a0_0x5a2dd1;let _0x25d467=(0x0,ys['v4'])()[_0x44b047(0x5ee)](),_0x5e6b99=await this[_0x44b047(0x104)][_0x44b047(0x64e)][_0x44b047(0x57c)]({'apikey':_0x25d467},_0x25e8ac[_0x44b047(0x281)]);if(_0x5e6b99[_0x44b047(0x4a6)])throw this[_0x44b047(0x607)][_0x44b047(0x4a6)]({'localError':c['name']+_0x44b047(0x369),'error':_0x5e6b99['error']}),new g(_0x44b047(0x28d),_0x5e6b99[_0x44b047(0x4a6)]?.[_0x44b047(0x41a)]());return{'apikey':_0x25d467};}async[a0_0x5a2dd1(0x3a4)](_0x5b8424){const _0x57faa8=a0_0x5a2dd1;let _0x3fca7a=this['configService'][_0x57faa8(0x5c2)]('AUTHENTICATION');return await this[_0x3fca7a[_0x57faa8(0x1af)]](_0x5b8424);}async[a0_0x5a2dd1(0x414)]({oldToken:_0x326642}){const _0x420b6=a0_0x5a2dd1;if(!(0x0,Qa[_0x420b6(0x439)])(_0x326642))throw new g(_0x420b6(0x4a5));try{let _0x439e51=this[_0x420b6(0x2a2)][_0x420b6(0x5c2)](_0x420b6(0x564))[_0x420b6(0x553)],_0x5da1ab=(0x0,Pe['verify'])(_0x326642,_0x439e51[_0x420b6(0x180)],{'ignoreExpiration':!0x0}),_0x43c9ae=await this[_0x420b6(0x104)]['auth'][_0x420b6(0x40e)](_0x5da1ab['instanceName']),_0x19c0eb=(0x0,Pe[_0x420b6(0x2a1)])(_0x43c9ae[_0x420b6(0x47a)],_0x439e51[_0x420b6(0x180)],{'ignoreExpiration':!0x0});if(_0x5da1ab[_0x420b6(0x40f)]!==_0x19c0eb[_0x420b6(0x40f)])throw new g(_0x420b6(0x4a5));let _0x5af086={'jwt':(await this[_0x420b6(0x47a)]({'instanceName':_0x5da1ab[_0x420b6(0x281)]}))['jwt'],'instanceName':_0x5da1ab[_0x420b6(0x281)]};try{let _0x4d6913=await this['repository'][_0x420b6(0x210)][_0x420b6(0x40e)](_0x5da1ab[_0x420b6(0x281)]);_0x4d6913?.[_0x420b6(0x623)]&&this[_0x420b6(0x2a2)]['get'](_0x420b6(0x57e))[_0x420b6(0x1ea)][_0x420b6(0x123)]&&await Ya[_0x420b6(0x5fb)][_0x420b6(0x57c)]({'baseURL':_0x4d6913[_0x420b6(0x675)]})['post']('',{'event':_0x420b6(0x17e),'instance':_0x5da1ab[_0x420b6(0x281)],'data':_0x5af086},{'params':{'owner':this['waMonitor'][_0x420b6(0x410)][_0x5da1ab[_0x420b6(0x281)]]['wuid']}});}catch(_0x41b633){this['logger'][_0x420b6(0x4a6)](_0x41b633);}return _0x5af086;}catch(_0xea15ae){throw this[_0x420b6(0x607)][_0x420b6(0x4a6)]({'localError':c[_0x420b6(0x67e)]+'.refreshToken','error':_0xea15ae}),new g(_0x420b6(0x4a5));}}},ft=class extends L{constructor(_0x3dbe44,..._0x15a3cb){const _0x252045=a0_0x5a2dd1;super(),this[_0x252045(0x2a2)]=_0x3dbe44,this['router']=(0x0,Xa['Router'])();let _0x451be3=_0x3dbe44[_0x252045(0x5c2)](_0x252045(0x564));this['router']['post']('/create',..._0x15a3cb,async(_0x2bdae9,_0xa61f73)=>{const _0x3650e0=_0x252045;let {instanceName:_0x1f69c3,apikey:_0x3c5089}=_0x2bdae9[_0x3650e0(0x4bb)],_0x524358=await ce['createInstance']({'instanceName':_0x1f69c3,'apikey':_0x3c5089});return _0xa61f73[_0x3650e0(0x50a)](0xc9)[_0x3650e0(0x139)](_0x524358);})[_0x252045(0x1fe)](this[_0x252045(0x249)](_0x252045(0x529)),..._0x15a3cb,async(_0x5d020b,_0x20b398)=>{const _0x6b0050=_0x252045;let _0xaeddf=await this[_0x6b0050(0x24f)]({'request':_0x5d020b,'schema':v,'ClassRef':b,'execute':_0x46ab0c=>ce['restartInstance'](_0x46ab0c)});return _0x20b398[_0x6b0050(0x50a)](0xc8)[_0x6b0050(0x139)](_0xaeddf);})[_0x252045(0x5c2)](this[_0x252045(0x249)](_0x252045(0x6c2)),..._0x15a3cb,async(_0xcbf5ea,_0x4621f7)=>{const _0x433ce8=_0x252045;let _0x44a0ef=await this[_0x433ce8(0x24f)]({'request':_0xcbf5ea,'schema':v,'ClassRef':b,'execute':_0x567391=>ce[_0x433ce8(0x2c3)](_0x567391)});return _0x4621f7[_0x433ce8(0x50a)](0xc8)[_0x433ce8(0x139)](_0x44a0ef);})[_0x252045(0x5c2)](this['routerPath'](_0x252045(0x48b)),..._0x15a3cb,async(_0x9f6cbe,_0x31ac41)=>{const _0x28bbc0=_0x252045;let _0x3feb98=await this[_0x28bbc0(0x24f)]({'request':_0x9f6cbe,'schema':v,'ClassRef':b,'execute':_0x16af02=>ce[_0x28bbc0(0x48b)](_0x16af02)});return _0x31ac41[_0x28bbc0(0x50a)](0xc8)['json'](_0x3feb98);})[_0x252045(0x5c2)](this['routerPath']('fetchInstances',!0x1),..._0x15a3cb,async(_0x5692a1,_0x5bb995)=>{const _0x5b651e=_0x252045;let _0x14e889=await this[_0x5b651e(0x24f)]({'request':_0x5692a1,'schema':null,'ClassRef':b,'execute':_0x2f2b0e=>ce[_0x5b651e(0x692)](_0x2f2b0e)});return _0x5bb995[_0x5b651e(0x50a)](0xc8)['json'](_0x14e889);})[_0x252045(0x570)](this[_0x252045(0x249)](_0x252045(0x2b7)),..._0x15a3cb,async(_0x315eb5,_0x3743a0)=>{const _0x35a53c=_0x252045;let _0x220333=await this[_0x35a53c(0x24f)]({'request':_0x315eb5,'schema':v,'ClassRef':b,'execute':_0x415b71=>ce[_0x35a53c(0x2b7)](_0x415b71)});return _0x3743a0[_0x35a53c(0x50a)](0xc8)['json'](_0x220333);})[_0x252045(0x570)](this[_0x252045(0x249)](_0x252045(0x570)),..._0x15a3cb,async(_0x34a9b5,_0x1c0f21)=>{const _0x47ddac=_0x252045;let _0x25c355=await this[_0x47ddac(0x24f)]({'request':_0x34a9b5,'schema':v,'ClassRef':b,'execute':_0x495d0a=>ce[_0x47ddac(0x1c3)](_0x495d0a)});return _0x1c0f21[_0x47ddac(0x50a)](0xc8)[_0x47ddac(0x139)](_0x25c355);}),_0x451be3[_0x252045(0x1af)]==='jwt'&&this[_0x252045(0x4b5)]['put'](_0x252045(0x6bf),async(_0x670c3d,_0x5e087d)=>{const _0x5be708=_0x252045;let _0x979b36=await this[_0x5be708(0x24f)]({'request':_0x670c3d,'schema':ma,'ClassRef':mt,'execute':(_0x292977,_0x420750)=>ce[_0x5be708(0x414)](_0x292977,_0x420750)});return _0x5e087d[_0x5be708(0x50a)](0xc9)[_0x5be708(0x139)](_0x979b36);});}},Za=require(a0_0x5a2dd1(0x1d7)),bs=class{},z=class extends bs{},wt=class extends z{},yt=class extends z{},bt=class extends z{},Oe=class extends z{},St=class extends z{},Et=class extends z{},vt=class extends z{},Nt=class extends z{},Ct=class extends z{},Tt=class{},Mt=class extends L{constructor(..._0x4dfb59){const _0x19b6ec=a0_0x5a2dd1;super(),this[_0x19b6ec(0x4b5)]=(0x0,Za[_0x19b6ec(0x2ce)])(),this[_0x19b6ec(0x4b5)]['post'](this['routerPath'](_0x19b6ec(0x2c2)),..._0x4dfb59,async(_0x1314d5,_0x18fecc)=>{const _0x5eb95a=_0x19b6ec;let _0x297e70=await this[_0x5eb95a(0x24f)]({'request':_0x1314d5,'schema':ha,'ClassRef':wt,'execute':(_0x573b3d,_0x39a317)=>K[_0x5eb95a(0x2c2)](_0x573b3d,_0x39a317)});return _0x18fecc['status'](0xc9)[_0x5eb95a(0x139)](_0x297e70);})[_0x19b6ec(0x684)](this['routerPath'](_0x19b6ec(0x198)),..._0x4dfb59,async(_0x42f150,_0x45328c)=>{const _0x4b0636=_0x19b6ec;let _0xe6e8d0=await this[_0x4b0636(0x24f)]({'request':_0x42f150,'schema':ba,'ClassRef':Oe,'execute':(_0x3455d4,_0x50a26f)=>K['sendMedia'](_0x3455d4,_0x50a26f)});return _0x45328c[_0x4b0636(0x50a)](0xc9)[_0x4b0636(0x139)](_0xe6e8d0);})[_0x19b6ec(0x684)](this[_0x19b6ec(0x249)](_0x19b6ec(0x581)),..._0x4dfb59,async(_0x4abdd3,_0x4f21f2)=>{const _0x1f2dd4=_0x19b6ec;let _0x332d84=await this[_0x1f2dd4(0x24f)]({'request':_0x4abdd3,'schema':Sa,'ClassRef':Oe,'execute':(_0x3413eb,_0x59e1e2)=>K['sendWhatsAppAudio'](_0x3413eb,_0x59e1e2)});return _0x4f21f2[_0x1f2dd4(0x50a)](0xc9)[_0x1f2dd4(0x139)](_0x332d84);})[_0x19b6ec(0x684)](this[_0x19b6ec(0x249)](_0x19b6ec(0x4af)),..._0x4dfb59,async(_0xffe70d,_0xa577bd)=>{const _0x389e72=_0x19b6ec;let _0x517a85=await this['dataValidate']({'request':_0xffe70d,'schema':va,'ClassRef':Et,'execute':(_0x3b60d5,_0xa5cd45)=>K[_0x389e72(0x4af)](_0x3b60d5,_0xa5cd45)});return _0xa577bd[_0x389e72(0x50a)](0xc9)[_0x389e72(0x139)](_0x517a85);})[_0x19b6ec(0x684)](this[_0x19b6ec(0x249)](_0x19b6ec(0x56d)),..._0x4dfb59,async(_0x5727a7,_0x173619)=>{const _0x554495=_0x19b6ec;let _0x458275=await this[_0x554495(0x24f)]({'request':_0x5727a7,'schema':Na,'ClassRef':vt,'execute':(_0x554d12,_0x2052b3)=>K[_0x554495(0x56d)](_0x554d12,_0x2052b3)});return _0x173619[_0x554495(0x50a)](0xc9)[_0x554495(0x139)](_0x458275);})[_0x19b6ec(0x684)](this[_0x19b6ec(0x249)](_0x19b6ec(0x197)),..._0x4dfb59,async(_0x54536a,_0x1083f4)=>{const _0x43d6ee=_0x19b6ec;let _0x4570cf=await this[_0x43d6ee(0x24f)]({'request':_0x54536a,'schema':Ca,'ClassRef':Nt,'execute':(_0x23822e,_0x5cf9fe)=>K[_0x43d6ee(0x197)](_0x23822e,_0x5cf9fe)});return _0x1083f4[_0x43d6ee(0x50a)](0xc9)[_0x43d6ee(0x139)](_0x4570cf);})[_0x19b6ec(0x684)](this[_0x19b6ec(0x249)](_0x19b6ec(0x599)),..._0x4dfb59,async(_0x56b45a,_0x8ac6d3)=>{const _0x1933b7=_0x19b6ec;let _0xed6c7d=await this[_0x1933b7(0x24f)]({'request':_0x56b45a,'schema':Ta,'ClassRef':Ct,'execute':(_0x24d2b0,_0x1540d6)=>K[_0x1933b7(0x599)](_0x24d2b0,_0x1540d6)});return _0x8ac6d3['status'](0xc9)[_0x1933b7(0x139)](_0xed6c7d);})[_0x19b6ec(0x684)](this[_0x19b6ec(0x249)]('sendReaction'),..._0x4dfb59,async(_0x2b6b35,_0x3dc06a)=>{const _0x2dd179=_0x19b6ec;let _0x119803=await this[_0x2dd179(0x24f)]({'request':_0x2b6b35,'schema':Ma,'ClassRef':Tt,'execute':(_0x3c5c1d,_0x5a1c51)=>K['sendReaction'](_0x3c5c1d,_0x5a1c51)});return _0x3dc06a[_0x2dd179(0x50a)](0xc9)['json'](_0x119803);})[_0x19b6ec(0x684)](this[_0x19b6ec(0x249)](_0x19b6ec(0x662)),..._0x4dfb59,async(_0x4b6c8c,_0x18ebf9)=>{const _0x1a3c61=_0x19b6ec;let _0x16770b=await this[_0x1a3c61(0x24f)]({'request':_0x4b6c8c,'schema':Ea,'ClassRef':bt,'execute':(_0x29fc69,_0x2258dd)=>K[_0x1a3c61(0x662)](_0x29fc69,_0x2258dd)});return _0x18ebf9[_0x1a3c61(0x50a)](0xc9)[_0x1a3c61(0x139)](_0x16770b);})[_0x19b6ec(0x684)](this[_0x19b6ec(0x249)](_0x19b6ec(0x178)),..._0x4dfb59,async(_0x3dbb43,_0x27444f)=>{const _0x32bc6d=_0x19b6ec;let _0x5c3849=await this[_0x32bc6d(0x24f)]({'request':_0x3dbb43,'schema':ya,'ClassRef':yt,'execute':(_0x712db,_0x17ed56)=>K[_0x32bc6d(0x178)](_0x712db,_0x17ed56)});return _0x27444f['status'](0xc9)[_0x32bc6d(0x139)](_0x5c3849);})[_0x19b6ec(0x684)](this['routerPath'](_0x19b6ec(0x1ac)),..._0x4dfb59,async(_0x3f551a,_0xf34086)=>{const _0x9822f9=_0x19b6ec;let _0x3085b6=await this[_0x9822f9(0x24f)]({'request':_0x3f551a,'schema':wa,'ClassRef':St,'execute':(_0x31fa66,_0x5a21b3)=>K['sendSticker'](_0x31fa66,_0x5a21b3)});return _0xf34086['status'](0xc9)['json'](_0x3085b6);});}},eo=require(a0_0x5a2dd1(0x1d7)),Rt=class extends L{constructor(..._0xbc2ec){const _0x12340f=a0_0x5a2dd1;super(),this[_0x12340f(0x4b5)]=(0x0,eo['Router'])(),this[_0x12340f(0x4b5)]['get'](this[_0x12340f(0x249)](_0x12340f(0x3c4)),..._0xbc2ec,(_0x50abbf,_0x2d8b39)=>to['qrcode'](_0x50abbf,_0x2d8b39));}},so=require('express'),At=class{},It=class extends L{constructor(..._0x4ec2a1){const _0x315bc5=a0_0x5a2dd1;super(),this[_0x315bc5(0x4b5)]=(0x0,so[_0x315bc5(0x2ce)])(),this[_0x315bc5(0x4b5)][_0x315bc5(0x684)](this['routerPath'](_0x315bc5(0x568)),..._0x4ec2a1,async(_0x3ab364,_0x5b4e86)=>{const _0xa4a1e3=_0x315bc5;let _0x13cddc=await this[_0xa4a1e3(0x24f)]({'request':_0x3ab364,'schema':Ha,'ClassRef':At,'execute':(_0x498689,_0x55f93a)=>Ss['createWebhook'](_0x498689,_0x55f93a)});_0x5b4e86['status'](0xc9)['json'](_0x13cddc);})['get'](this['routerPath']('find'),..._0x4ec2a1,async(_0x5e69e8,_0x3ddb75)=>{const _0x3c0f1e=_0x315bc5;let _0x3127d8=await this[_0x3c0f1e(0x24f)]({'request':_0x5e69e8,'schema':v,'ClassRef':b,'execute':_0x392346=>Ss[_0x3c0f1e(0x315)](_0x392346)});_0x3ddb75[_0x3c0f1e(0x50a)](0xc8)[_0x3c0f1e(0x139)](_0x3127d8);});}},ao=require('express'),f=new C(a0_0x5a2dd1(0x207)),Dt=class extends L{constructor(..._0xf923e1){const _0x270f93=a0_0x5a2dd1;super(),this['router']=(0x0,ao['Router'])(),this[_0x270f93(0x4b5)]['post'](this[_0x270f93(0x249)]('scheduleMessage'),..._0xf923e1,async(_0x3bd096,_0x27b1f4)=>{const _0x4677ed=_0x270f93;let _0x181dc7=_0x3bd096['body'];f[_0x4677ed(0x400)](_0x4677ed(0x679)),f['verbose'](_0x4677ed(0x2c5)),f['verbose'](_0x3bd096[_0x4677ed(0x4bb)]);let _0x5bfd4e=await this[_0x4677ed(0x24f)]({'request':_0x3bd096,'schema':v,'ClassRef':b,'execute':_0x37f0f7=>R['editScheduleMessage'](_0x37f0f7,_0x181dc7)});_0x27b1f4[_0x4677ed(0x50a)](0xc8)[_0x4677ed(0x139)](_0x5bfd4e);})['get'](this[_0x270f93(0x249)](_0x270f93(0x35d)),..._0xf923e1,async(_0x4d4a37,_0xb0ed62)=>{const _0x2ac7da=_0x270f93;let _0x78f7ab=await this['dataValidate']({'request':_0x4d4a37,'schema':v,'ClassRef':b,'execute':_0x29a957=>R['getScheduleMessage'](_0x29a957)});_0xb0ed62[_0x2ac7da(0x50a)](0xc8)[_0x2ac7da(0x139)](_0x78f7ab);})[_0x270f93(0x570)](this['routerPath'](_0x270f93(0x5e7)),..._0xf923e1,async(_0x26eb20,_0x74f6a7)=>{const _0x40a326=_0x270f93;f[_0x40a326(0x400)](_0x40a326(0x64d));let _0x20dc01=await this[_0x40a326(0x24f)]({'request':_0x26eb20,'schema':v,'ClassRef':b,'execute':_0xa7e040=>R[_0x40a326(0x5e7)](_0xa7e040)});_0x74f6a7['status'](0xc8)[_0x40a326(0x139)](_0x20dc01);})[_0x270f93(0x684)](this[_0x270f93(0x249)](_0x270f93(0x4e2)),..._0xf923e1,async(_0x3fd548,_0x20b756)=>{const _0x1db107=_0x270f93;let _0x57d8de=_0x3fd548['body'];f[_0x1db107(0x400)](_0x1db107(0x33c)),f[_0x1db107(0x400)](_0x1db107(0x2c5)),f[_0x1db107(0x400)](_0x3fd548[_0x1db107(0x4bb)]);let _0x129e6c=await this[_0x1db107(0x24f)]({'request':_0x3fd548,'schema':v,'ClassRef':b,'execute':_0x522cb3=>R['startFlow'](_0x522cb3,_0x57d8de)});_0x20b756['status'](0xc8)[_0x1db107(0x139)](_0x129e6c);})[_0x270f93(0x5c2)](this['routerPath'](_0x270f93(0x622)),..._0xf923e1,async(_0x1ae848,_0x2455c2)=>{const _0x286a0d=_0x270f93;f[_0x286a0d(0x400)]('request\x20received\x20in\x20getAutomateSystem');let _0x3b2c48=await this['dataValidate']({'request':_0x1ae848,'schema':v,'ClassRef':b,'execute':_0x1be813=>R[_0x286a0d(0x622)](_0x1be813)});_0x2455c2[_0x286a0d(0x50a)](0xc8)[_0x286a0d(0x139)](_0x3b2c48);})[_0x270f93(0x5c2)](this['routerPath'](_0x270f93(0x126)),..._0xf923e1,async(_0x2febbc,_0x447488)=>{const _0x5dd157=_0x270f93;f[_0x5dd157(0x400)]('request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem');let _0x4f2b59=await this[_0x5dd157(0x24f)]({'request':_0x2febbc,'schema':v,'ClassRef':b,'execute':_0x5c281d=>R[_0x5dd157(0x622)](_0x5c281d)});_0x447488[_0x5dd157(0x50a)](0xc8)[_0x5dd157(0x139)](_0x4f2b59);})[_0x270f93(0x684)](this[_0x270f93(0x249)](_0x270f93(0x1d6)),..._0xf923e1,async(_0x48da40,_0x2354fb)=>{const _0x29b28e=_0x270f93;let _0x406cdb=_0x48da40[_0x29b28e(0x4bb)];f[_0x29b28e(0x400)](_0x29b28e(0x4e3)),f[_0x29b28e(0x400)](_0x29b28e(0x2c5)),f[_0x29b28e(0x400)](_0x48da40[_0x29b28e(0x4bb)]);let _0x20f16f=await this['dataValidate']({'request':_0x48da40,'schema':v,'ClassRef':b,'execute':_0x361699=>R[_0x29b28e(0x1d6)](_0x361699,_0x406cdb)});_0x2354fb[_0x29b28e(0x50a)](0xc8)['json'](_0x20f16f);})[_0x270f93(0x684)](this[_0x270f93(0x249)]('updateCustomFields'),..._0xf923e1,async(_0x348484,_0x3dd346)=>{const _0x3e4be5=_0x270f93;let _0x1ca1d1=_0x348484['body'];f[_0x3e4be5(0x400)]('request\x20received\x20in\x20updateCustomFields'),f[_0x3e4be5(0x400)]('request\x20body:\x20'),f[_0x3e4be5(0x400)](_0x348484[_0x3e4be5(0x4bb)]);let _0x523f34=await this['dataValidate']({'request':_0x348484,'schema':v,'ClassRef':b,'execute':_0x524b99=>R[_0x3e4be5(0x37f)](_0x524b99,_0x1ca1d1)});_0x3dd346[_0x3e4be5(0x50a)](0xc8)[_0x3e4be5(0x139)](_0x523f34);})['post'](this[_0x270f93(0x249)](_0x270f93(0x196)),..._0xf923e1,async(_0x2e28dd,_0x6653e8)=>{const _0x5f4f0f=_0x270f93;let _0x30b59e=_0x2e28dd[_0x5f4f0f(0x4bb)];f[_0x5f4f0f(0x400)](_0x5f4f0f(0x149)),f['verbose'](_0x5f4f0f(0x2c5)),f[_0x5f4f0f(0x400)](_0x2e28dd[_0x5f4f0f(0x4bb)]);let _0x1fb51a=await this['dataValidate']({'request':_0x2e28dd,'schema':v,'ClassRef':b,'execute':_0x2972fd=>R[_0x5f4f0f(0x196)](_0x2972fd,_0x30b59e)});_0x6653e8[_0x5f4f0f(0x50a)](0xc8)[_0x5f4f0f(0x139)](_0x1fb51a);})[_0x270f93(0x684)](this[_0x270f93(0x249)](_0x270f93(0x344)),..._0xf923e1,async(_0x3dea89,_0x497b8f)=>{const _0x2818bf=_0x270f93;let _0x4554d4=_0x3dea89['body'];f[_0x2818bf(0x400)](_0x2818bf(0x453)),f['verbose'](_0x2818bf(0x2c5)),f['verbose'](_0x3dea89['body']);let _0x38ef9e=await this[_0x2818bf(0x24f)]({'request':_0x3dea89,'schema':v,'ClassRef':b,'execute':_0x3b15b8=>R[_0x2818bf(0x344)](_0x3b15b8,_0x4554d4)});_0x497b8f['status'](0xc8)['json'](_0x38ef9e);})[_0x270f93(0x684)](this[_0x270f93(0x249)](_0x270f93(0x2ee)),..._0xf923e1,async(_0x3c57ef,_0x58af7f)=>{const _0x255c91=_0x270f93;let _0x3ffe35=_0x3c57ef[_0x255c91(0x4bb)];f[_0x255c91(0x400)](_0x255c91(0x6cc)),f[_0x255c91(0x400)](_0x255c91(0x2c5)),f[_0x255c91(0x400)](_0x3c57ef[_0x255c91(0x4bb)]);let _0x5ec341=await this[_0x255c91(0x24f)]({'request':_0x3c57ef,'schema':v,'ClassRef':b,'execute':_0x115caf=>R['fetchConversation'](_0x115caf,_0x3ffe35)});_0x58af7f['status'](0xc8)[_0x255c91(0x139)](_0x5ec341);})[_0x270f93(0x684)](this['routerPath']('editConversation'),..._0xf923e1,async(_0x4dbc5b,_0x583f48)=>{const _0x249778=_0x270f93;let _0x3a20d8=_0x4dbc5b[_0x249778(0x4bb)];f[_0x249778(0x400)](_0x249778(0x676)),f[_0x249778(0x400)](_0x249778(0x2c5)),f[_0x249778(0x400)](_0x4dbc5b['body']);let _0x5684fa=await this['dataValidate']({'request':_0x4dbc5b,'schema':v,'ClassRef':b,'execute':_0x5753b7=>R[_0x249778(0x2ad)](_0x5753b7,_0x3a20d8)});_0x583f48[_0x249778(0x50a)](0xc8)[_0x249778(0x139)](_0x5684fa);})[_0x270f93(0x570)](this[_0x270f93(0x249)]('deleteConversation'),..._0xf923e1,async(_0x10b025,_0x872cec)=>{const _0x2a41c7=_0x270f93;let _0x5ee09c=_0x10b025['body'];f['verbose'](_0x2a41c7(0x15f)),f[_0x2a41c7(0x400)](_0x2a41c7(0x2c5)),f['verbose'](_0x10b025[_0x2a41c7(0x4bb)]);let _0x52cb49=await this[_0x2a41c7(0x24f)]({'request':_0x10b025,'schema':v,'ClassRef':b,'execute':_0x322a94=>R[_0x2a41c7(0x59d)](_0x322a94,_0x5ee09c)});_0x872cec['status'](0xc8)['json'](_0x52cb49);})[_0x270f93(0x684)](this[_0x270f93(0x249)](_0x270f93(0x3df)),..._0xf923e1,async(_0x1002d5,_0x68f590)=>{const _0x21ef06=_0x270f93;let _0x49395f=_0x1002d5[_0x21ef06(0x4bb)];f[_0x21ef06(0x400)]('request\x20received\x20in\x20createFlow'),f['verbose'](_0x21ef06(0x2c5)),f[_0x21ef06(0x400)](_0x1002d5[_0x21ef06(0x4bb)]);let _0x5d3462=await this['dataValidate']({'request':_0x1002d5,'schema':v,'ClassRef':b,'execute':_0x5f3d0a=>R[_0x21ef06(0x1b7)](_0x5f3d0a,_0x49395f)});_0x68f590[_0x21ef06(0x50a)](0xc8)['json'](_0x5d3462);})[_0x270f93(0x684)](this[_0x270f93(0x249)](_0x270f93(0x4d1)),..._0xf923e1,async(_0x483a9d,_0x16c8ee)=>{const _0x8d6818=_0x270f93;let _0xb65a82=_0x483a9d[_0x8d6818(0x4bb)];f[_0x8d6818(0x400)](_0x8d6818(0x350)),f['verbose']('request\x20body:\x20'),f[_0x8d6818(0x400)](_0x483a9d['body']),delete _0xb65a82[_0x8d6818(0x60c)],delete _0xb65a82[_0x8d6818(0x4a1)],delete _0xb65a82[_0x8d6818(0x169)],delete _0xb65a82[_0x8d6818(0x3eb)];let _0x1293ae=await this[_0x8d6818(0x24f)]({'request':_0x483a9d,'schema':v,'ClassRef':b,'execute':_0x1e6683=>R['editFlow'](_0x1e6683,_0xb65a82)});_0x16c8ee[_0x8d6818(0x50a)](0xc8)[_0x8d6818(0x139)](_0x1293ae);})[_0x270f93(0x684)](this[_0x270f93(0x249)](_0x270f93(0x66d)),..._0xf923e1,async(_0x1fb9d0,_0x5a7c5b)=>{const _0x446ddd=_0x270f93;let _0x1b3388=_0x1fb9d0[_0x446ddd(0x4bb)];f[_0x446ddd(0x400)](_0x446ddd(0x350)),f[_0x446ddd(0x400)](_0x446ddd(0x2c5)),f[_0x446ddd(0x400)](_0x1fb9d0['body']);let _0x2ae9c3=await this[_0x446ddd(0x24f)]({'request':_0x1fb9d0,'schema':v,'ClassRef':b,'execute':_0x4510f5=>R['editFlowBlock'](_0x4510f5,_0x1b3388)});_0x5a7c5b[_0x446ddd(0x50a)](0xc8)['json'](_0x2ae9c3);})[_0x270f93(0x684)](this['routerPath'](_0x270f93(0x4bd)),..._0xf923e1,async(_0x94b1dd,_0x40fbff)=>{const _0x2fcc86=_0x270f93;let _0x3b8e49=_0x94b1dd['body'];f['verbose'](_0x2fcc86(0x350)),f[_0x2fcc86(0x400)](_0x2fcc86(0x2c5)),f['verbose'](_0x94b1dd[_0x2fcc86(0x4bb)]);let _0x121a3f=await this['dataValidate']({'request':_0x94b1dd,'schema':v,'ClassRef':b,'execute':_0x159357=>R[_0x2fcc86(0x458)](_0x159357,_0x3b8e49)});_0x40fbff['status'](0xc8)[_0x2fcc86(0x139)](_0x121a3f);})[_0x270f93(0x684)](this['routerPath'](_0x270f93(0x445)),..._0xf923e1,async(_0x1b446f,_0x3bfeb5)=>{const _0x353b82=_0x270f93;let _0x10f19f=_0x1b446f['body'];f[_0x353b82(0x400)](_0x353b82(0x350)),f['verbose'](_0x353b82(0x2c5)),f[_0x353b82(0x400)](_0x1b446f[_0x353b82(0x4bb)]);let _0x5b29f4=await this[_0x353b82(0x24f)]({'request':_0x1b446f,'schema':v,'ClassRef':b,'execute':_0x2a5e37=>R[_0x353b82(0x543)](_0x2a5e37,_0x10f19f)});_0x3bfeb5['status'](0xc8)['json'](_0x5b29f4);})[_0x270f93(0x684)](this[_0x270f93(0x249)](_0x270f93(0x331)),..._0xf923e1,async(_0x56d40e,_0x221572)=>{const _0x4c7cd3=_0x270f93;let _0x34577c=_0x56d40e['body'];f[_0x4c7cd3(0x400)]('request\x20received\x20in\x20editFlowgroup'),f['verbose'](_0x4c7cd3(0x2c5)),f[_0x4c7cd3(0x400)](_0x56d40e[_0x4c7cd3(0x4bb)]);let _0x516328=await this[_0x4c7cd3(0x24f)]({'request':_0x56d40e,'schema':v,'ClassRef':b,'execute':_0x3ac7e7=>R[_0x4c7cd3(0x5f2)](_0x3ac7e7,_0x34577c)});_0x221572[_0x4c7cd3(0x50a)](0xc8)['json'](_0x516328);})[_0x270f93(0x684)](this[_0x270f93(0x249)](_0x270f93(0x436)),..._0xf923e1,async(_0x145667,_0x4a7861)=>{const _0x129002=_0x270f93;let _0x441384=_0x145667[_0x129002(0x4bb)];f[_0x129002(0x400)](_0x129002(0x39c)),f[_0x129002(0x400)](_0x129002(0x2c5)),f[_0x129002(0x400)](_0x145667[_0x129002(0x4bb)]);let _0x2352f7=await this[_0x129002(0x24f)]({'request':_0x145667,'schema':v,'ClassRef':b,'execute':_0x28e091=>R[_0x129002(0x60a)](_0x28e091,_0x441384)});_0x4a7861[_0x129002(0x50a)](0xc8)[_0x129002(0x139)](_0x2352f7);})[_0x270f93(0x684)](this[_0x270f93(0x249)](_0x270f93(0x391)),..._0xf923e1,async(_0x98b229,_0x2c419b)=>{const _0x13d9c4=_0x270f93;let _0x3dc962=_0x98b229[_0x13d9c4(0x4bb)];f['verbose'](_0x13d9c4(0x2f1)),f[_0x13d9c4(0x400)](_0x13d9c4(0x2c5)),f[_0x13d9c4(0x400)](_0x98b229[_0x13d9c4(0x4bb)]);let _0x382205=await this[_0x13d9c4(0x24f)]({'request':_0x98b229,'schema':v,'ClassRef':b,'execute':_0x4ed8c3=>R[_0x13d9c4(0x2e7)](_0x4ed8c3,_0x3dc962)});_0x2c419b[_0x13d9c4(0x50a)](0xc8)[_0x13d9c4(0x139)](_0x382205);})[_0x270f93(0x684)](this[_0x270f93(0x249)]('getflow'),..._0xf923e1,async(_0x17beab,_0x56862e)=>{const _0xa29d12=_0x270f93;let _0x99aef9=_0x17beab[_0xa29d12(0x4bb)];f[_0xa29d12(0x400)](_0xa29d12(0x66f)),f[_0xa29d12(0x400)](_0xa29d12(0x2c5)),f[_0xa29d12(0x400)](_0x17beab[_0xa29d12(0x4bb)]);let _0x267485=await this[_0xa29d12(0x24f)]({'request':_0x17beab,'schema':v,'ClassRef':b,'execute':_0x5e186a=>R[_0xa29d12(0x415)](_0x5e186a,_0x99aef9)});_0x56862e[_0xa29d12(0x50a)](0xc8)['json'](_0x267485);})['delete'](this[_0x270f93(0x249)]('deleteflow'),..._0xf923e1,async(_0x10c52c,_0x322fcd)=>{const _0x239c44=_0x270f93;let _0x7c040f=_0x10c52c[_0x239c44(0x4bb)];f[_0x239c44(0x400)]('request\x20received\x20in\x20createFlow'),f['verbose'](_0x239c44(0x2c5)),f[_0x239c44(0x400)](_0x10c52c[_0x239c44(0x4bb)]);let _0x25089b=await this[_0x239c44(0x24f)]({'request':_0x10c52c,'schema':v,'ClassRef':b,'execute':_0x18283d=>R[_0x239c44(0x46d)](_0x18283d,_0x7c040f)});_0x322fcd['status'](0xc8)[_0x239c44(0x139)](_0x25089b);})['get'](this[_0x270f93(0x249)](_0x270f93(0x318)),..._0xf923e1,async(_0x19ed12,_0x487717)=>{const _0x153542=_0x270f93;f[_0x153542(0x400)]('request\x20received\x20in\x20allFlows');let _0x2e6c1c=await this[_0x153542(0x24f)]({'request':_0x19ed12,'schema':v,'ClassRef':b,'execute':_0x575879=>R[_0x153542(0x364)](_0x575879)});_0x487717[_0x153542(0x50a)](0xc8)[_0x153542(0x139)](_0x2e6c1c);});}},no=T(require(a0_0x5a2dd1(0x2b8))),te={};function oo(_0x5d351b,_0x16b297,_0x513f1c,_0x40315a){te[_0x5d351b]||(te[_0x5d351b]={}),te[_0x5d351b][_0x16b297]={'id':_0x16b297,'response':_0x513f1c,'events':_0x40315a};}function io(_0x3dac45,_0x25cc7e){!te[_0x3dac45]||!te[_0x3dac45][_0x25cc7e]||delete te[_0x3dac45][_0x25cc7e];}function G(_0x269fcb,_0x46d87a,_0x2b094e){const _0x4edc25=a0_0x5a2dd1;if(!te[_0x269fcb])return;let _0x45ce01=_0x4edc25(0x3cb)+JSON['stringify'](_0x2b094e)+'\x0a\x0a';Object[_0x4edc25(0x1ff)](te[_0x269fcb])[_0x4edc25(0x1b3)](_0x3778a3=>{const _0x11b7b7=_0x4edc25;_0x3778a3[_0x11b7b7(0x59e)][_0x11b7b7(0x40c)](_0x46d87a)&&_0x3778a3[_0x11b7b7(0x3e8)][_0x11b7b7(0x1e6)](_0x45ce01);});}function ro(){const _0x50e3aa=a0_0x5a2dd1;let _0x580654={};for(let _0x4d6546 in te)_0x580654[_0x4d6546]=Object[_0x50e3aa(0x1ff)](te[_0x4d6546])[_0x50e3aa(0x4ce)](_0x507acc=>({'id':_0x507acc['id'],'events':_0x507acc['events']}));return _0x580654;}var co=require(a0_0x5a2dd1(0x3ff)),ui=no[a0_0x5a2dd1(0x5fb)][a0_0x5a2dd1(0x295)](__dirname,a0_0x5a2dd1(0x496)),Ot=(0x0,Pt[a0_0x5a2dd1(0x2ce)])(),di=y['get'](a0_0x5a2dd1(0x564))['TYPE'],pe=[fs,ua,ga[di]];Ot[a0_0x5a2dd1(0x665)]('/media',Pt['default'][a0_0x5a2dd1(0x532)](ui))[a0_0x5a2dd1(0x5c2)](a0_0x5a2dd1(0x4c3),async(_0x384eee,_0x22c7d1)=>{const _0x32a436=a0_0x5a2dd1;console['log'](_0x32a436(0x33d));let _0x239ccb=_0x384eee[_0x32a436(0x4f2)]['instance'],_0x36c087=(_0x384eee[_0x32a436(0x213)][_0x32a436(0x59e)]||'')[_0x32a436(0x60f)](','),_0x46ff7d=(0x0,co['v4'])();console[_0x32a436(0x6aa)](_0x32a436(0x1f6),_0x239ccb),console[_0x32a436(0x6aa)](_0x32a436(0x2dd),_0x36c087);let _0x217221=y[_0x32a436(0x5c2)](_0x32a436(0x564))[_0x32a436(0x12f)],_0x29b194=_0x384eee[_0x32a436(0x213)]['apikey'];if(console[_0x32a436(0x6aa)](_0x32a436(0x2e8),_0x29b194),_0x217221['KEY']!==_0x29b194){console[_0x32a436(0x6aa)](_0x32a436(0x408));try{let _0x507994=await de[_0x32a436(0x64e)][_0x32a436(0x40e)](_0x239ccb);if(console['log'](_0x32a436(0x360),_0x507994),!_0x507994||_0x507994[_0x32a436(0x18f)]!==_0x29b194)return console[_0x32a436(0x6aa)]('API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!'),_0x22c7d1[_0x32a436(0x50a)](0x191)[_0x32a436(0x52e)]('API\x20Key\x20inválida.');}catch(_0x41641a){return console[_0x32a436(0x4a6)](_0x32a436(0x4ae),_0x41641a),_0x22c7d1['status'](0x191)['send'](_0x32a436(0x32f));}}if(!await Ye(_0x239ccb))return _0x22c7d1[_0x32a436(0x50a)](0x194)[_0x32a436(0x52e)]('Instância\x20não\x20encontrada.');_0x22c7d1[_0x32a436(0x6c5)](_0x32a436(0x25d),'text/event-stream'),_0x22c7d1[_0x32a436(0x6c5)](_0x32a436(0x5f9),_0x32a436(0x11d)),_0x22c7d1[_0x32a436(0x6c5)](_0x32a436(0x33a),_0x32a436(0x61c)),_0x22c7d1[_0x32a436(0x5bf)]();let _0x493e3a='data:\x20'+JSON[_0x32a436(0x561)]({'info':'Conexão\x20estabelecida'})+'\x0a\x0a';_0x22c7d1[_0x32a436(0x1e6)](_0x493e3a),oo(_0x239ccb,_0x46ff7d,_0x22c7d1,_0x36c087),_0x384eee['on'](_0x32a436(0x254),()=>{const _0x1ba8b1=_0x32a436;console[_0x1ba8b1(0x6aa)](_0x1ba8b1(0x69c)+_0x239ccb),io(_0x239ccb,_0x46ff7d);});}),Ot['get'](a0_0x5a2dd1(0x16a),(_0x4a381c,_0x1003d8)=>{let _0x4bc876=ro();_0x1003d8['json'](_0x4bc876);})[a0_0x5a2dd1(0x5c2)]('/',(_0x2d3a02,_0x203944)=>{const _0xd1ba7a=a0_0x5a2dd1;let _0x410016=y['get'](_0xd1ba7a(0x635)),_0x1640d6=_0x410016&&_0x410016[_0xd1ba7a(0x222)]['split']('/')[0x4];if(_0x1640d6){let _0x5e8461=encodeURIComponent(_0xd1ba7a(0x40a)+_0x1640d6);_0x203944['redirect']('https://uazapi-plugin.bubbleapps.io/?url='+_0x5e8461);}else _0x203944[_0xd1ba7a(0x313)]('https://uazapi-plugin.bubbleapps.io/');})[a0_0x5a2dd1(0x1fe)](a0_0x5a2dd1(0x567),...pe,async(_0x49d460,_0x49d03e)=>{const _0x239172=a0_0x5a2dd1;try{console[_0x239172(0x6aa)](_0x239172(0x589)),_0x49d03e[_0x239172(0x50a)](0xc8)[_0x239172(0x139)]({'message':'API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos'}),_0x49d03e['on']('finish',()=>process[_0x239172(0x69f)](0x0));}catch(_0x51c844){console['error'](_0x239172(0x527),_0x51c844),_0x49d03e[_0x239172(0x50a)](0x1f4)[_0x239172(0x139)]({'message':_0x239172(0x6c0)});}})[a0_0x5a2dd1(0x665)]('/instance',new ft(y,...pe)['router'],new Rt(fs)[a0_0x5a2dd1(0x4b5)])['use']('/message',new Mt(...pe)[a0_0x5a2dd1(0x4b5)])['use'](a0_0x5a2dd1(0x3b3),new ot(...pe)[a0_0x5a2dd1(0x4b5)])[a0_0x5a2dd1(0x665)]('/group',new gt(...pe)[a0_0x5a2dd1(0x4b5)])[a0_0x5a2dd1(0x665)](a0_0x5a2dd1(0x574),new It(...pe)[a0_0x5a2dd1(0x4b5)])['use'](a0_0x5a2dd1(0x6c8),new Dt(...pe)['router']);var g=class{constructor(..._0xb16ee8){const _0x12e107=a0_0x5a2dd1;throw{'status':0x190,'error':'Bad\x20Request','message':_0xb16ee8[_0x12e107(0x1c0)]>0x0?_0xb16ee8:void 0x0};}},ne=class{constructor(..._0x472671){const _0x5849eb=a0_0x5a2dd1;throw{'status':0x191,'error':_0x5849eb(0x4b8),'message':_0x472671[_0x5849eb(0x1c0)]>0x0?_0x472671:void 0x0};}},re=class{constructor(..._0x13506e){const _0x306ee0=a0_0x5a2dd1;throw{'status':0x193,'error':_0x306ee0(0x24a),'message':_0x13506e[_0x306ee0(0x1c0)]>0x0?_0x13506e:void 0x0};}},x=class{constructor(..._0x1b475c){const _0xc636da=a0_0x5a2dd1;throw{'status':0x194,'error':_0xc636da(0x31a),'message':_0x1b475c[_0xc636da(0x1c0)]>0x0?_0x1b475c:void 0x0};}},A=class{constructor(..._0x46d3de){const _0x24839e=a0_0x5a2dd1;throw{'status':0x1f4,'error':'Internal\x20Server\x20Error','message':_0x46d3de[_0x24839e(0x1c0)]>0x0?_0x46d3de:void 0x0};}},ge=require(a0_0x5a2dd1(0x34f));async function Es(_0x12532c){const _0x29edee=a0_0x5a2dd1;let _0xebe27e=new C(Es[_0x29edee(0x67e)]),_0x2a9d1c=M[_0x29edee(0x422)](),_0x2e4c8d=_0x2a9d1c['db'](y['get'](_0x29edee(0x1e4))[_0x29edee(0x661)][_0x29edee(0x524)]+'-instances')[_0x29edee(0x520)](_0x12532c),_0x30ebc3=async(_0x8d8741,_0x13e9b3)=>{const _0x5a0b3e=_0x29edee;try{return await _0x2a9d1c['connect'](),await _0x2e4c8d[_0x5a0b3e(0x6a5)]({'_id':_0x13e9b3},JSON[_0x5a0b3e(0x26b)](JSON[_0x5a0b3e(0x561)](_0x8d8741,ge[_0x5a0b3e(0x5c6)]['replacer'])),{'upsert':!0x0});}catch{}},_0x58dee3=async _0x521fb8=>{const _0x7e5c61=_0x29edee;try{await _0x2a9d1c[_0x7e5c61(0x6c2)]();let _0xa148e=await _0x2e4c8d['findOne']({'_id':_0x521fb8}),_0x67f8ea=JSON[_0x7e5c61(0x561)](_0xa148e);return JSON[_0x7e5c61(0x26b)](_0x67f8ea,ge[_0x7e5c61(0x5c6)][_0x7e5c61(0x220)]);}catch{}},_0x3418e5=async _0x12a4de=>{const _0x38425b=_0x29edee;try{return await _0x2a9d1c[_0x38425b(0x6c2)](),await _0x2e4c8d[_0x38425b(0x246)]({'_id':_0x12a4de});}catch{}},_0x243a42=await _0x58dee3(_0x29edee(0x647))||(0x0,ge['initAuthCreds'])();return{'state':{'creds':_0x243a42,'keys':{'get':async(_0x3e0809,_0x8e60e1)=>{const _0x29e6f5=_0x29edee;let _0x34ecf9={};return await Promise[_0x29e6f5(0x3f4)](_0x8e60e1[_0x29e6f5(0x4ce)](async _0x31e82e=>{const _0x3b71e8=_0x29e6f5;let _0x1df9a5=await _0x58dee3(_0x3e0809+'-'+_0x31e82e);_0x3e0809===_0x3b71e8(0x3cd)&&_0x1df9a5&&(_0x1df9a5=ge[_0x3b71e8(0x5b2)][_0x3b71e8(0x53b)]['AppStateSyncKeyData'][_0x3b71e8(0x276)](_0x1df9a5)),_0x34ecf9[_0x31e82e]=_0x1df9a5;})),_0x34ecf9;},'set':async _0x1764fd=>{const _0x15e8f9=_0x29edee;let _0xd551cb=[];for(let _0x100dc5 in _0x1764fd)for(let _0x4fc7d0 in _0x1764fd[_0x100dc5]){let _0xc987f1=_0x1764fd[_0x100dc5][_0x4fc7d0],_0x283e52=_0x100dc5+'-'+_0x4fc7d0;_0xd551cb[_0x15e8f9(0x125)](_0xc987f1?_0x30ebc3(_0xc987f1,_0x283e52):_0x3418e5(_0x283e52));}await Promise[_0x15e8f9(0x3f4)](_0xd551cb);}}},'saveCreds':async()=>_0x30ebc3(_0x243a42,_0x29edee(0x647))};}var Cs=T(require(a0_0x5a2dd1(0x248))),Ts=T(require('node-cache')),$t=require(a0_0x5a2dd1(0x34f)),lo=require(a0_0x5a2dd1(0x5dc)),xt=require(a0_0x5a2dd1(0x34f)),_t;function a0_0x5d83(_0x1fc3a1,_0x379180){const _0x9a7cbe=a0_0x9a7c();return a0_0x5d83=function(_0x5d8388,_0x51a15b){_0x5d8388=_0x5d8388-0xe9;let _0xd45784=_0x9a7cbe[_0x5d8388];return _0xd45784;},a0_0x5d83(_0x1fc3a1,_0x379180);}function pi(_0x9fb7c6){const _0x3336d2=a0_0x5a2dd1;return _t||(_t=(0x0,lo[_0x3336d2(0x50d)])({'url':_0x9fb7c6[_0x3336d2(0x349)]}),_t[_0x3336d2(0x6c2)]()),_t;}var ye=class c{constructor(_0x353d28,_0x325e0c){const _0x3c8caa=a0_0x5a2dd1;this['redisEnv']=_0x353d28,this[_0x3c8caa(0x281)]=_0x325e0c,this[_0x3c8caa(0x607)]=new C(c[_0x3c8caa(0x67e)]),this[_0x3c8caa(0x6c6)]=pi(_0x353d28);}set[a0_0x5a2dd1(0x50c)](_0x304c92){const _0x27177d=a0_0x5a2dd1;this[_0x27177d(0x281)]=_0x304c92;}async[a0_0x5a2dd1(0x669)](){const _0x44027e=a0_0x5a2dd1;try{return await this[_0x44027e(0x6c6)][_0x44027e(0x5df)](['keys',this['redisEnv'][_0x44027e(0x444)]+':*']);}catch(_0x37dcfc){this[_0x44027e(0x607)][_0x44027e(0x4a6)](_0x37dcfc);}}async['writeData'](_0x453389,_0x61f904){const _0x3f0a67=a0_0x5a2dd1;try{let _0x165f0f=JSON['stringify'](_0x61f904,xt[_0x3f0a67(0x5c6)][_0x3f0a67(0x10f)]);return await this[_0x3f0a67(0x6c6)]['hSet'](this[_0x3f0a67(0x3bf)]['PREFIX_KEY']+':'+this[_0x3f0a67(0x281)],_0x453389,_0x165f0f);}catch(_0x3bb8bd){this[_0x3f0a67(0x607)][_0x3f0a67(0x4a6)](_0x3bb8bd);}}async['getAllData'](){const _0x59a255=a0_0x5a2dd1;try{let _0x427ba3=await this[_0x59a255(0x6c6)][_0x59a255(0x44a)](this['redisEnv'][_0x59a255(0x444)]+':'+this[_0x59a255(0x281)]);if(_0x427ba3){for(let _0x4e88b0 in _0x427ba3)Object[_0x59a255(0x399)][_0x59a255(0x158)][_0x59a255(0x219)](_0x427ba3,_0x4e88b0)&&(_0x427ba3[_0x4e88b0]=JSON[_0x59a255(0x26b)](_0x427ba3[_0x4e88b0],xt[_0x59a255(0x5c6)][_0x59a255(0x220)]));return _0x427ba3;}}catch(_0x2dddd7){this[_0x59a255(0x607)]['error'](_0x2dddd7);}}async['readData'](_0x1ea8b8){const _0x2ac78b=a0_0x5a2dd1;try{let _0x15fd83=await this[_0x2ac78b(0x6c6)][_0x2ac78b(0x592)](this[_0x2ac78b(0x3bf)][_0x2ac78b(0x444)]+':'+this[_0x2ac78b(0x281)],_0x1ea8b8);if(_0x15fd83)return JSON[_0x2ac78b(0x26b)](_0x15fd83,xt[_0x2ac78b(0x5c6)][_0x2ac78b(0x220)]);}catch(_0x2db8f0){this[_0x2ac78b(0x607)][_0x2ac78b(0x4a6)](_0x2db8f0);}}async[a0_0x5a2dd1(0x394)](_0x4e265c){const _0x3d4acf=a0_0x5a2dd1;try{return await this['client'][_0x3d4acf(0x61e)](this[_0x3d4acf(0x3bf)]['PREFIX_KEY']+':'+this['instanceName'],_0x4e265c);}catch(_0x35ee29){this[_0x3d4acf(0x607)][_0x3d4acf(0x4a6)](_0x35ee29);}}async[a0_0x5a2dd1(0x5bd)](_0x31598e){const _0xf6322c=a0_0x5a2dd1;try{return await this[_0xf6322c(0x6c6)][_0xf6322c(0x329)](_0x31598e||this['redisEnv']['PREFIX_KEY']+':'+this[_0xf6322c(0x281)]);}catch(_0x5a5ea2){this['logger'][_0xf6322c(0x4a6)](_0x5a5ea2);}}};async function vs(_0x2315f7,_0x43585c){const _0x571e47=a0_0x5a2dd1;let _0x562dd9=new C(vs['name']),_0x2a6f4b=new ye(_0x2315f7,_0x43585c),_0x3fc7c6=async(_0x33b564,_0x267b0a)=>{const _0x56aed3=a0_0x5d83;try{return await _0x2a6f4b[_0x56aed3(0x265)](_0x267b0a,_0x33b564);}catch(_0x102ade){return _0x562dd9[_0x56aed3(0x4a6)]({'localError':_0x56aed3(0x265),'error':_0x102ade});}},_0x4af5b2=async _0x11f7c5=>{const _0x1d3159=a0_0x5d83;try{return await _0x2a6f4b[_0x1d3159(0x122)](_0x11f7c5);}catch(_0xa88193){_0x562dd9[_0x1d3159(0x4a6)]({'readData':'writeData','error':_0xa88193});return;}},_0x43a73e=async _0x18be6f=>{const _0xe2e402=a0_0x5d83;try{return await _0x2a6f4b['removeData'](_0x18be6f);}catch(_0x2fb9c6){_0x562dd9[_0xe2e402(0x4a6)]({'readData':_0xe2e402(0x394),'error':_0x2fb9c6});}},_0x33c9f7=await _0x4af5b2('creds')||(0x0,$t[_0x571e47(0x275)])();return{'state':{'creds':_0x33c9f7,'keys':{'get':async(_0xb1bb92,_0x4a60e7)=>{const _0x36c067=_0x571e47;let _0x598f09={};return await Promise[_0x36c067(0x3f4)](_0x4a60e7['map'](async _0x63092d=>{const _0xcb170c=_0x36c067;let _0x290189=await _0x4af5b2(_0xb1bb92+'-'+_0x63092d);_0xb1bb92===_0xcb170c(0x3cd)&&_0x290189&&(_0x290189=$t[_0xcb170c(0x5b2)]['Message']['AppStateSyncKeyData'][_0xcb170c(0x276)](_0x290189)),_0x598f09[_0x63092d]=_0x290189;})),_0x598f09;},'set':async _0xc3c784=>{const _0x419420=_0x571e47;let _0x5f203e=[];for(let _0x46a1e1 in _0xc3c784)for(let _0x12febb in _0xc3c784[_0x46a1e1]){let _0x352261=_0xc3c784[_0x46a1e1][_0x12febb],_0x193443=_0x46a1e1+'-'+_0x12febb;_0x5f203e[_0x419420(0x125)](_0x352261?await _0x3fc7c6(_0x352261,_0x193443):await _0x43a73e(_0x193443));}await Promise[_0x419420(0x3f4)](_0x5f203e);}}},'saveCreds':async()=>await _0x3fc7c6(_0x33c9f7,_0x571e47(0x647))};}var _=T(require('fs')),Lt=require(a0_0x5a2dd1(0x3ff)),Ut=T(require(a0_0x5a2dd1(0x696)));function W(_0x39fedc){const _0x480e30=a0_0x5a2dd1;if(_0x39fedc[_0x480e30(0x325)]||_0x39fedc[_0x480e30(0x4a2)]){let _0x4f66a5=_0x39fedc[_0x480e30(0x325)]?_0x39fedc[_0x480e30(0x325)][_0x480e30(0x19d)]:_0x39fedc['viewOnceMessageV2'][_0x480e30(0x19d)];return(0x0,w[_0x480e30(0x19e)])(_0x4f66a5);}return _0x39fedc['pollCreationMessageV3']?_0x480e30(0x613):_0x39fedc['pollCreationMessageV2']?_0x480e30(0x2cf):(0x0,w[_0x480e30(0x19e)])(_0x39fedc);}var Se=class c{constructor(_0x4bc69e,_0x57c755,_0x4f4ea5){const _0x3af0f1=a0_0x5a2dd1;this[_0x3af0f1(0x2a2)]=_0x4bc69e,this[_0x3af0f1(0x67b)]=_0x57c755,this['repository']=_0x4f4ea5,this[_0x3af0f1(0x535)]=null,this[_0x3af0f1(0x607)]=new C(c[_0x3af0f1(0x67e)]),this[_0x3af0f1(0x632)]={},this['localWebhook']={},this['stateConnection']={'state':'close'},this[_0x3af0f1(0x2b1)]=(0x0,$['join'])(Y,_0x3af0f1(0x496)),this[_0x3af0f1(0x427)]=new Ts[(_0x3af0f1(0x5fb))](),this[_0x3af0f1(0xfe)]=new Ts['default'](),this['endSession']=!0x1,this[_0x3af0f1(0x3a0)]={'status.instance':_0x3af0f1(0x58a),'qrcode.updated':_0x3af0f1(0x30d),'messages.upsert':_0x3af0f1(0x6ae),'messages.update':_0x3af0f1(0x2a0),'send.message':_0x3af0f1(0x6ae),'group.upsert':_0x3af0f1(0x26c),'group.update':_0x3af0f1(0x26c),'group-participants.update':_0x3af0f1(0x26c),'connection.update':_0x3af0f1(0x58a),'messages.set':_0x3af0f1(0x6ae),'contacts.set':_0x3af0f1(0x4a0),'contacts.upsert':_0x3af0f1(0x4a0),'contacts.update':'/wa-contacts','presence.update':'/wa-presence','chats.set':_0x3af0f1(0x24c),'chats.update':_0x3af0f1(0x24c),'chats.upsert':_0x3af0f1(0x24c),'chats.delete':_0x3af0f1(0x24c)},this[_0x3af0f1(0x51d)]=0x0,this[_0x3af0f1(0x1c5)]=[],this[_0x3af0f1(0x5da)]=0xf,this[_0x3af0f1(0x138)]=0x7530,this[_0x3af0f1(0x1cb)]=!0x1,this[_0x3af0f1(0x218)]={'chats.upsert':async(_0x2541e5,_0x1b18bd)=>{const _0x2f143c=_0x3af0f1;let _0x3a0413=await this[_0x2f143c(0x104)][_0x2f143c(0x2ef)]['find']({'where':{'owner':this[_0x2f143c(0x632)]['wuid']}}),_0x25f82a=[];for await(let _0x34e520 of _0x2541e5)_0x3a0413[_0x2f143c(0x40e)](_0x3d7589=>_0x3d7589['id']===_0x34e520['id'])||_0x25f82a[_0x2f143c(0x125)]({'id':_0x34e520['id'],'owner':this[_0x2f143c(0x632)][_0x2f143c(0x6b5)],'group':_0x34e520['id'][_0x2f143c(0x474)](_0x2f143c(0x30f)),'name':_0x34e520[_0x2f143c(0x67e)]||_0x34e520[_0x2f143c(0x3cc)]||null,'contactname':null,'lastmsg':_0x34e520['conversationTimestamp']&&_0x34e520['conversationTimestamp'][_0x2f143c(0x41a)]()['length']<0xd?_0x34e520[_0x2f143c(0x421)]*0x3e8:_0x34e520[_0x2f143c(0x421)]||null,'archived':_0x34e520[_0x2f143c(0xff)]||!0x1,'unreadcount':_0x34e520['unreadCount']||0x0});await this[_0x2f143c(0x1a7)](_0x2f143c(0x3d8),_0x25f82a);},'chats.update':async(_0x2d0b9e,_0x5ae673)=>{const _0xbc4cfd=_0x3af0f1;for(let _0x34b762 of _0x2d0b9e){let _0x4dfd3d={'id':_0x34b762['id'],'owner':this[_0xbc4cfd(0x632)][_0xbc4cfd(0x6b5)],'group':_0x34b762['id']['endsWith'](_0xbc4cfd(0x30f)),'name':_0x34b762[_0xbc4cfd(0x67e)]||_0x34b762['displayName'],'archived':_0x34b762[_0xbc4cfd(0xff)]},_0x3d2650=!0x1,_0x5b79d1={'id':_0x34b762['id'],'owner':this[_0xbc4cfd(0x632)][_0xbc4cfd(0x6b5)]},_0xa16a14={};_0x4dfd3d['archived']!=null&&(this['logger'][_0xbc4cfd(0x400)](this['instanceName']+'\x20('+this[_0xbc4cfd(0x632)][_0xbc4cfd(0x6b5)]+_0xbc4cfd(0x3e5)+_0x34b762[_0xbc4cfd(0xff)]),_0x3d2650=!0x0,_0xa16a14[_0xbc4cfd(0xff)]=_0x34b762['archived']),_0x34b762['name']!=null&&(this[_0xbc4cfd(0x607)][_0xbc4cfd(0x400)](this[_0xbc4cfd(0x281)]+'\x20('+this['instance'][_0xbc4cfd(0x6b5)]+_0xbc4cfd(0x54f)+_0x34b762[_0xbc4cfd(0x67e)]),_0x3d2650=!0x0,_0xa16a14['name']=_0x34b762[_0xbc4cfd(0x67e)]),_0x34b762[_0xbc4cfd(0x3cc)]!=null&&(this[_0xbc4cfd(0x607)][_0xbc4cfd(0x400)](this[_0xbc4cfd(0x281)]+'\x20('+this[_0xbc4cfd(0x632)][_0xbc4cfd(0x6b5)]+_0xbc4cfd(0x619)+_0x34b762[_0xbc4cfd(0x3cc)]),_0x3d2650=!0x0,_0xa16a14[_0xbc4cfd(0x67e)]=_0x34b762[_0xbc4cfd(0x3cc)]);let _0x40074a;_0x3d2650&&_0x5ae673['ENABLED']&&(_0x40074a=await I[_0xbc4cfd(0x233)](_0x5b79d1,{'$set':_0xa16a14},{'new':!0x0})),_0x40074a&&G(this[_0xbc4cfd(0x281)],_0xbc4cfd(0x672),{'chat':_0x40074a});}},'chats.delete':async _0x6b1f9a=>{const _0x1005b6=_0x3af0f1;await this[_0x1005b6(0x1a7)](_0x1005b6(0x659),[..._0x6b1f9a]);}},this[_0x3af0f1(0x31f)]={'contacts.upsert':async(_0x40f033,_0x23b378)=>{const _0x1c03ec=_0x3af0f1;let _0x1d8b27=await this['repository'][_0x1c03ec(0x1fd)][_0x1c03ec(0x40e)]({'where':{'owner':this[_0x1c03ec(0x632)]['wuid']}}),_0x2ea256=[];for await(let _0x42744a of _0x40f033)_0x1d8b27[_0x1c03ec(0x40e)](_0x45897a=>_0x45897a['id']===_0x42744a['id'])||_0x2ea256['push']({'id':_0x42744a['id'],'pushName':_0x42744a?.['name']||_0x42744a?.[_0x1c03ec(0x5f3)],'owner':this[_0x1c03ec(0x632)]['wuid']});await this['sendDataWebhook']('contacts.upsert',_0x2ea256),await this[_0x1c03ec(0x104)][_0x1c03ec(0x1fd)][_0x1c03ec(0x2a7)](_0x2ea256,_0x23b378[_0x1c03ec(0x159)]),await this[_0x1c03ec(0x612)](),await this[_0x1c03ec(0x612)](),await this[_0x1c03ec(0x612)]();},'contacts.update':async(_0x2f4da3,_0x13ab4c)=>{const _0x5a06ea=_0x3af0f1;let _0x7d27dd=[];for await(let _0x1b53df of _0x2f4da3)_0x7d27dd[_0x5a06ea(0x125)]({'id':_0x1b53df['id'],'pushName':_0x1b53df?.[_0x5a06ea(0x67e)]??_0x1b53df?.[_0x5a06ea(0x5f3)],'owner':this[_0x5a06ea(0x632)][_0x5a06ea(0x6b5)]});await this['sendDataWebhook'](_0x5a06ea(0x6be),_0x7d27dd);}},this[_0x3af0f1(0x4fb)]={'messaging-history.set':async({messages:_0x54e1fd,chats:_0x250aed,isLatest:_0x47518b},_0x1cf588)=>{const _0x3a393a=_0x3af0f1;if(_0x47518b){let _0xab54a5=await Promise[_0x3a393a(0x3f4)](_0x250aed[_0x3a393a(0x4ce)](async _0x3eb9e8=>({'id':_0x3eb9e8['id'],'owner':this[_0x3a393a(0x632)][_0x3a393a(0x6b5)],'group':_0x3eb9e8['id']['endsWith'](_0x3a393a(0x30f)),'name':_0x3eb9e8['name']||_0x3eb9e8[_0x3a393a(0x3cc)]||null,'contactname':null,'lastmsg':_0x3eb9e8['conversationTimestamp']&&_0x3eb9e8['conversationTimestamp']['toString']()[_0x3a393a(0x1c0)]<0xd?_0x3eb9e8[_0x3a393a(0x421)]*0x3e8:_0x3eb9e8[_0x3a393a(0x421)]||null,'archived':_0x3eb9e8[_0x3a393a(0xff)]||!0x1,'unreadcount':_0x3eb9e8[_0x3a393a(0x38f)]||0x0})));await this[_0x3a393a(0x1a7)]('chats.set',_0xab54a5),await this[_0x3a393a(0x6a3)](_0xab54a5,_0x1cf588),await this[_0x3a393a(0x612)]();}let _0x14ff30=[],_0x2f3601=Date[_0x3a393a(0x468)]()-0x7*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x336976]of Object[_0x3a393a(0x28c)](_0x54e1fd)){if(_0x336976[_0x3a393a(0x19d)]?.[_0x3a393a(0x101)]||_0x336976['message']?.[_0x3a393a(0x41d)]||!_0x336976[_0x3a393a(0x19d)]||_0x336976[_0x3a393a(0x3a9)][_0x3a393a(0x2f8)]===_0x3a393a(0x280)||(Cs[_0x3a393a(0x5fb)][_0x3a393a(0x580)](_0x336976?.[_0x3a393a(0x503)])&&(_0x336976[_0x3a393a(0x503)]=_0x336976[_0x3a393a(0x503)]?.['toNumber']()),_0x336976[_0x3a393a(0x503)]&&_0x336976['messageTimestamp']['toString']()['length']<0xd&&(_0x336976[_0x3a393a(0x503)]=_0x336976[_0x3a393a(0x503)]*0x3e8),_0x336976['messageTimestamp']<_0x2f3601))continue;let {message_normalized:_0x4805a2}=this[_0x3a393a(0x261)](_0x336976[_0x3a393a(0x19d)],W(_0x336976[_0x3a393a(0x19d)]),null);_0x14ff30[_0x3a393a(0x125)]({'key':_0x336976['key'],'pushName':_0x336976[_0x3a393a(0x688)],'participant':_0x336976[_0x3a393a(0x4f1)],'message':{..._0x336976[_0x3a393a(0x19d)]},'messageType':W(_0x336976[_0x3a393a(0x19d)]),'message_normalized':{'key':_0x336976[_0x3a393a(0x3a9)],'pushName':_0x336976[_0x3a393a(0x688)],'messageTimestamp':_0x336976[_0x3a393a(0x503)],..._0x4805a2},'messageTimestamp':_0x336976[_0x3a393a(0x503)],'owner':this[_0x3a393a(0x632)][_0x3a393a(0x6b5)]});}_0x1cf588[_0x3a393a(0x159)]&&_0x14ff30['length']>0x0&&(this['logger']['verbose'](this[_0x3a393a(0x281)]+'\x20('+this[_0x3a393a(0x632)][_0x3a393a(0x6b5)]+_0x3a393a(0x49a)+_0x14ff30[_0x3a393a(0x1c0)]+_0x3a393a(0x67d)+this[_0x3a393a(0x632)][_0x3a393a(0x6b5)]+_0x3a393a(0x540)),await this['repository'][_0x3a393a(0x19d)]['insert']([..._0x14ff30],_0x1cf588[_0x3a393a(0x159)])),this[_0x3a393a(0x1a7)]('messages.set',[..._0x14ff30]),_0x54e1fd=void 0x0;},'messages.upsert':async({messages:_0x154580,type:_0x4886f9},_0x351d5e)=>{const _0x8ebe02=_0x3af0f1;let _0x388519=_0x154580[0x0];if(_0x4886f9!==_0x8ebe02(0x16e)||!_0x388519?.[_0x8ebe02(0x19d)]||_0x388519[_0x8ebe02(0x19d)]?.[_0x8ebe02(0x101)]||_0x388519[_0x8ebe02(0x19d)][_0x8ebe02(0x41d)]||_0x388519['key']['remoteJid']===_0x8ebe02(0x280))return;let _0x2c6c52=null,_0x3a799b=null;try{_0x2c6c52=await this[_0x8ebe02(0x23b)](_0x388519),_0x3a799b=_0x2c6c52?_0x2c6c52['join'](','):null;}catch(_0x364948){this[_0x8ebe02(0x607)][_0x8ebe02(0x400)](this[_0x8ebe02(0x281)]+'\x20('+this[_0x8ebe02(0x632)][_0x8ebe02(0x6b5)]+_0x8ebe02(0x49a)+_0x364948['message']),_0x3a799b=_0x8ebe02(0x133);}if(this[_0x8ebe02(0x6c6)][_0x8ebe02(0x23c)](_0x8ebe02(0xe9)),Cs['default']['isLong'](_0x388519[_0x8ebe02(0x503)])&&(_0x388519[_0x8ebe02(0x503)]=_0x388519[_0x8ebe02(0x503)]?.[_0x8ebe02(0x660)]()),this[_0x8ebe02(0x45f)]?.['groups_ignore']&&_0x388519[_0x8ebe02(0x3a9)][_0x8ebe02(0x2f8)]['includes'](_0x8ebe02(0x30f))){this['logger'][_0x8ebe02(0x400)]('group\x20ignored');return;}_0x388519[_0x8ebe02(0x503)]&&_0x388519[_0x8ebe02(0x503)]['toString']()[_0x8ebe02(0x1c0)]<0xd&&(_0x388519[_0x8ebe02(0x503)]=_0x388519['messageTimestamp']*0x3e8);let _0x4d81b7=_0x388519['message'],{messageContent:_0x4604ec,message_normalized:_0x3a7c40}=this['normalizeMessage'](_0x4d81b7,W(_0x388519[_0x8ebe02(0x19d)]),_0x3a799b);_0x4604ec||console[_0x8ebe02(0x4a6)](_0x8ebe02(0x5c4));let _0x417559={'key':_0x388519[_0x8ebe02(0x3a9)],'pushName':_0x388519[_0x8ebe02(0x688)],'message':{..._0x388519[_0x8ebe02(0x19d)]},'messageType':W(_0x388519[_0x8ebe02(0x19d)]),'message_normalized':{'key':_0x388519[_0x8ebe02(0x3a9)],'pushName':_0x388519['pushName'],'messageTimestamp':_0x388519[_0x8ebe02(0x503)],'source':(0x0,w['getDevice'])(_0x388519[_0x8ebe02(0x3a9)]['id']),..._0x3a7c40},'messageTimestamp':_0x388519[_0x8ebe02(0x503)],'owner':this['instance'][_0x8ebe02(0x6b5)]};this['logger'][_0x8ebe02(0x6aa)](_0x417559),await this[_0x8ebe02(0x104)][_0x8ebe02(0x19d)][_0x8ebe02(0x2a7)]([_0x417559],_0x351d5e['ENABLED']),await this['sendDataWebhook'](_0x8ebe02(0x1c4),_0x417559),G(this[_0x8ebe02(0x281)],_0x8ebe02(0x2d4),{'message':_0x417559}),_0x388519[_0x8ebe02(0x3a9)][_0x8ebe02(0x2f8)]!=='status@broadcast'&&await this[_0x8ebe02(0x27e)](_0x351d5e,_0x417559,_0x8ebe02(0x1ae));},'messages.update':async(_0x995068,_0x23568c)=>{const _0x16ec59=_0x3af0f1;let _0x303cc1={0x0:_0x16ec59(0x1d5),0x1:'PENDING',0x2:_0x16ec59(0x559),0x3:_0x16ec59(0x526),0x4:'READ',0x5:'PLAYED'};for await(let {key:_0x4f6876,update:_0x1792f9}of _0x995068){if(this[_0x16ec59(0x45f)]?.[_0x16ec59(0x15b)]&&_0x4f6876[_0x16ec59(0x2f8)][_0x16ec59(0x40c)](_0x16ec59(0x30f))){this[_0x16ec59(0x607)]['verbose'](_0x16ec59(0x3dd));return;}if(_0x4f6876[_0x16ec59(0x2f8)]!=='status@broadcast'){let _0x46d177=Date[_0x16ec59(0x468)](),_0x5a1e9f;_0x1792f9[_0x16ec59(0x19d)]===null&&_0x1792f9[_0x16ec59(0x50a)]===void 0x0?_0x5a1e9f='DELETED':_0x5a1e9f=_0x303cc1[_0x1792f9[_0x16ec59(0x50a)]];let _0x519688=_0x4f6876[_0x16ec59(0x2f8)][_0x16ec59(0x269)](/:\d{1,2}@/g,'@'),_0x1bf3df={..._0x4f6876,'remoteJid':_0x519688,'status':_0x5a1e9f,'datetime':_0x46d177,'owner':this[_0x16ec59(0x632)]['wuid']};await this[_0x16ec59(0x1a7)](_0x16ec59(0x109),_0x1bf3df),await this['repository'][_0x16ec59(0x49b)][_0x16ec59(0x2a7)]([_0x1bf3df],_0x23568c[_0x16ec59(0x159)]),await this['updateMessage'](_0x4f6876,_0x519688,_0x1bf3df);}}}},this['groupHandler']={'groups.upsert':_0x579784=>{const _0x4b1421=_0x3af0f1;this['sendDataWebhook'](_0x4b1421(0x5ba),_0x579784);},'groups.update':_0x3e4d5f=>{const _0x35e415=_0x3af0f1;this[_0x35e415(0x1a7)](_0x35e415(0x3b8),_0x3e4d5f);},'group-participants.update':_0x39f70a=>{const _0xd034f0=_0x3af0f1;this[_0xd034f0(0x1a7)]('group-participants.update',_0x39f70a);}},this[_0x3af0f1(0x23b)]=async _0x3af945=>{const _0x11f8f1=_0x3af0f1;if(_0x3af945[_0x11f8f1(0x19d)]?.[_0x11f8f1(0x368)]){let _0x11e7e4=await this[_0x11f8f1(0x5f1)](_0x3af945[_0x11f8f1(0x19d)][_0x11f8f1(0x368)][_0x11f8f1(0x236)],!0x0);if(_0x11e7e4){let _0x3aaccd=_0x11e7e4[_0x11f8f1(0x3a9)]['fromMe']?this[_0x11f8f1(0x632)][_0x11f8f1(0x6b5)]+'@s.whatsapp.net':_0x11e7e4['key']['participant']||_0x11e7e4[_0x11f8f1(0x3a9)]['remoteJid'],_0x58274e=_0x11e7e4['key']['id'],_0xd23af7=_0x11e7e4['message'],_0x4d58c7=Buffer[_0x11f8f1(0x398)](_0xd23af7[_0x11f8f1(0x29d)][_0x11f8f1(0x6a4)][_0x11f8f1(0x41a)]('hex'),'hex'),_0xd98ac9=(0x0,w[_0x11f8f1(0x4f0)])(_0x3af945[_0x11f8f1(0x19d)][_0x11f8f1(0x368)][_0x11f8f1(0x55a)],{'pollCreatorJid':_0x3aaccd,'pollMsgId':_0x58274e,'pollEncKey':_0x4d58c7,'voterJid':_0x3af945[_0x11f8f1(0x3a9)][_0x11f8f1(0x46e)]?this['instance'][_0x11f8f1(0x6b5)]+_0x11f8f1(0x3b5):_0x3af945[_0x11f8f1(0x3a9)][_0x11f8f1(0x2f8)][_0x11f8f1(0x474)](_0x11f8f1(0x312))?_0x3af945[_0x11f8f1(0x3a9)]['participant']:_0x3af945[_0x11f8f1(0x3a9)][_0x11f8f1(0x2f8)]}),_0x2e56f0=[],_0x1d6c9e=_0xd98ac9[_0x11f8f1(0x60e)][_0x11f8f1(0x4ce)](_0x3f1eff=>Buffer['from'](_0x3f1eff)[_0x11f8f1(0x41a)]('hex'));for(let {optionName:_0x239b2c}of _0xd23af7[_0x11f8f1(0x4e5)]?.['options']||_0xd23af7[_0x11f8f1(0x613)]?.[_0x11f8f1(0x5cc)]||_0xd23af7[_0x11f8f1(0x2cf)]?.[_0x11f8f1(0x5cc)])_0x1d6c9e[_0x11f8f1(0x530)]((0x0,w[_0x11f8f1(0x354)])(Buffer[_0x11f8f1(0x398)](_0x239b2c))[_0x11f8f1(0x41a)](_0x11f8f1(0x1e2)))>-0x1&&_0x2e56f0[_0x11f8f1(0x125)](_0x239b2c);return _0x2e56f0;}}return null;},this[_0x3af0f1(0x261)]=(_0x193d90,_0xa68e81,_0x3425f4)=>{const _0x5e2389=_0x3af0f1;let _0x589238=_0xa68e81?_0x193d90[_0xa68e81]:void 0x0,_0x36cd4a={},_0x424a05=null,_0x22f6f8=null,_0x2bb3a7=null;if(_0x193d90[_0x5e2389(0x4a2)]?_0x589238=_0x193d90['viewOnceMessageV2'][_0x5e2389(0x19d)][_0xa68e81]:_0x193d90[_0x5e2389(0x325)]?_0x589238=_0x193d90['viewOnceMessage']['message'][_0xa68e81]:_0x193d90[_0x5e2389(0x40b)]?_0x589238=_0x193d90[_0x5e2389(0x40b)][_0x5e2389(0x19d)][_0xa68e81]:_0x193d90[_0x5e2389(0x371)]?.[_0x5e2389(0x19d)]?.[_0x5e2389(0x101)]?.[_0x5e2389(0x371)]?(_0x424a05=_0x193d90[_0x5e2389(0x371)]['message'][_0x5e2389(0x101)][_0x5e2389(0x3a9)]['id'],_0x193d90[_0x5e2389(0x371)]['message'][_0x5e2389(0x101)][_0x5e2389(0x371)][_0x5e2389(0x557)]?_0x589238=_0x193d90[_0x5e2389(0x371)]['message'][_0x5e2389(0x101)][_0x5e2389(0x371)][_0x5e2389(0x557)]:_0x193d90[_0x5e2389(0x371)][_0x5e2389(0x19d)]['protocolMessage'][_0x5e2389(0x371)][_0x5e2389(0x43c)]?_0x589238=_0x193d90[_0x5e2389(0x371)][_0x5e2389(0x19d)][_0x5e2389(0x101)]['editedMessage'][_0x5e2389(0x43c)]['caption']:_0x193d90['editedMessage']['message'][_0x5e2389(0x101)][_0x5e2389(0x371)][_0x5e2389(0x3a6)]?_0x589238=_0x193d90[_0x5e2389(0x371)]['message'][_0x5e2389(0x101)][_0x5e2389(0x371)][_0x5e2389(0x3a6)]['caption']:_0x193d90[_0x5e2389(0x371)][_0x5e2389(0x19d)]['protocolMessage'][_0x5e2389(0x371)][_0x5e2389(0x51f)]?_0x589238=_0x193d90[_0x5e2389(0x371)]['message']['protocolMessage']['editedMessage']['documentWithCaptionMessage'][_0x5e2389(0x19d)][_0x5e2389(0x102)][_0x5e2389(0x609)]:_0x589238=_0x193d90[_0x5e2389(0x371)][_0x5e2389(0x19d)][_0x5e2389(0x101)][_0x5e2389(0x371)]):_0x589238=_0x193d90[_0xa68e81],!_0xa68e81||!_0x589238){console[_0x5e2389(0x4a6)](_0x5e2389(0x65e),_0x193d90);return;}_0x193d90[_0xa68e81]?.[_0x5e2389(0x273)]?.[_0x5e2389(0x237)]&&_0x193d90[_0xa68e81]?.[_0x5e2389(0x273)]?.['quotedMessage']&&(_0x22f6f8=_0x193d90[_0xa68e81][_0x5e2389(0x273)][_0x5e2389(0x237)]),_0x193d90[_0x5e2389(0x1a1)]&&(_0x2bb3a7=_0x193d90['reactionMessage'][_0x5e2389(0x3a9)]['id']);let _0x192d32;if(_0x589238&&typeof _0x589238==_0x5e2389(0x645)&&_0x5e2389(0x236)in _0x589238&&({pollCreationMessageKey:_0x192d32}=_0x589238),_0xa68e81===_0x5e2389(0x51f)){let _0x58b333=_0x589238?.['message']?.[_0x5e2389(0x102)];_0x58b333&&(_0x589238=_0x58b333);}if(_0xa68e81===_0x5e2389(0x4e5)||_0xa68e81===_0x5e2389(0x2cf)||_0xa68e81===_0x5e2389(0x613)){let _0x3eb47b=_0x589238['options']['map'](_0x586369=>_0x586369['optionName'])['join']('|');_0x36cd4a['convertedOptions']=_0x3eb47b;}let _0x48a0ae=_0x589238[_0x5e2389(0x67e)]||_0x589238[_0x5e2389(0x609)]||_0x589238[_0x5e2389(0x557)]||_0x589238['displayName'];if(_0x589238[_0x5e2389(0x438)]){let _0x1d55ec=this[_0x5e2389(0x57f)](JSON['stringify'](_0x589238[_0x5e2389(0x438)],null,0x2));_0x48a0ae=_0x48a0ae+'\x0a'+_0x1d55ec;}if(_0x589238){let {displayName:_0x260304,vcard:_0x7c6954,contactVcard:_0x18a249,name:_0xb93a04,caption:_0x41c448,conversation:_0x19c018,pollCreationMessageKey:_0x45229e,footerText:_0x272fec,contentText:_0x37d1d5,pageCount:_0x2a388b,headerType:_0x5216bb,isAvatar:_0x2e8a51,isAnimated:_0x5c1e0,fallbackLc:_0x6453fe,fallbackLg:_0x5c842b,namespace:_0x3bb517,elementName:_0x5db5bc,localizableParams:_0x498da8,viewOnce:_0xf569d7,height:_0x29b5ee,width:_0x44c239,key:_0x26956b,firstScanLength:_0x4a8d68,firstScanSidecar:_0x381d25,gifPlayback:_0x482ec9,gifAttribution:_0x566b23,midQualityFileSha256:_0x2dda18,scansSidecar:_0x461e29,streamingSidecar:_0x8b5336,thumbnailHeight:_0x23c480,thumbnailWidth:_0x3947ef,thumbnailEncSha256:_0x12ad33,thumbnailDirectPath:_0x5097d8,canonicalUrl:_0x5eb32d,matchedText:_0x38e259,previewType:_0x7ad061,thumbnailSha256:_0x2739a5,deviceListMetadataVersion:_0x7ab1bd,inviteLinkGroupTypeV2:_0x4a0e85,interactiveAnnotations:_0x120a1c,scanLengths:_0x375093,jpegThumbnail:_0x2ada2e,url:_0x107a69,mediaKeyTimestamp:_0x2c7224,waveform:_0x63aa50,stickerSentTs:_0x560165,firstFrameLength:_0x30f040,fileEncSha256:_0x2675ee,contextInfo:_0x237dfd,firstFrameSidecar:_0x37c3d1,directPath:_0x35a916,fileSha256:_0x5b6884,mediaKey:_0x504b94,senderTimestampMs:_0x51e065,..._0x453579}=_0x589238;typeof _0x589238==_0x5e2389(0x17b)?_0x36cd4a={'text':_0x589238,'type':_0xa68e81||_0x5e2389(0x557),..._0x424a05&&{'edited':_0x424a05},..._0x22f6f8&&{'quoted':_0x22f6f8},..._0x2bb3a7&&{'reaction':_0x2bb3a7}}:_0x36cd4a={'text':_0x48a0ae,..._0x453579,..._0xa68e81==='pollUpdateMessage'?{'poll_id':_0x589238['pollCreationMessageKey']['id'],'vote':_0x3425f4}:{},'type':_0xa68e81,..._0x424a05&&{'edited':_0x424a05},..._0x22f6f8&&{'quoted':_0x22f6f8},..._0x2bb3a7&&{'reaction':_0x2bb3a7},...(_0xa68e81===_0x5e2389(0x4e5)||_0xa68e81==='pollCreationMessageV2'||_0xa68e81===_0x5e2389(0x613))&&{'convertedOptions':_0x36cd4a[_0x5e2389(0x106)]}};}return{'messageType':_0xa68e81,'messageContent':_0x589238,'message_normalized':_0x36cd4a};},this['processingScheduleMessageId']=null,this[_0x3af0f1(0x514)]=0x0,(this['cleanStore'](),this[_0x3af0f1(0x632)][_0x3af0f1(0x3c4)]={'count':0x0});}set[a0_0x5a2dd1(0x281)](_0x123fe2){const _0x505dc4=a0_0x5a2dd1;if(!_0x123fe2){this[_0x505dc4(0x632)][_0x505dc4(0x67e)]=(0x0,po['v4'])();return;}this['instance'][_0x505dc4(0x67e)]=_0x123fe2,this[_0x505dc4(0x1a7)](_0x505dc4(0x556),{'instance':this['instance']['name'],'status':'created'});}get[a0_0x5a2dd1(0x281)](){const _0x22a85e=a0_0x5a2dd1;return this['instance'][_0x22a85e(0x67e)];}get[a0_0x5a2dd1(0x6b5)](){const _0xb11234=a0_0x5a2dd1;return this[_0xb11234(0x632)][_0xb11234(0x6b5)];}async['getProfileName'](){const _0x5b4696=a0_0x5a2dd1;let _0x1fb261=this['client']['user']?.['name']??this[_0x5b4696(0x6c6)]['user']?.['verifiedName'];if(!_0x1fb261){if(this[_0x5b4696(0x2a2)][_0x5b4696(0x5c2)](_0x5b4696(0x1e4))['ENABLED']){let _0x58d561=await M[_0x5b4696(0x422)]()['db'](this[_0x5b4696(0x2a2)][_0x5b4696(0x5c2)](_0x5b4696(0x1e4))[_0x5b4696(0x661)]['DB_PREFIX_NAME']+_0x5b4696(0x1d2))[_0x5b4696(0x520)](this[_0x5b4696(0x281)])[_0x5b4696(0x34c)]({'_id':'creds'});if(_0x58d561){let _0x514d5b=JSON[_0x5b4696(0x26b)](JSON[_0x5b4696(0x561)](_0x58d561),w[_0x5b4696(0x5c6)][_0x5b4696(0x220)]);_0x1fb261=_0x514d5b['me']?.[_0x5b4696(0x67e)]||_0x514d5b['me']?.[_0x5b4696(0x5f3)];}}else{if((0x0,_e[_0x5b4696(0x3e7)])((0x0,$[_0x5b4696(0x295)])(j,this['instanceName'],_0x5b4696(0x1b0)))){let _0x3fbc51=JSON[_0x5b4696(0x26b)]((0x0,_e[_0x5b4696(0x3f8)])((0x0,$[_0x5b4696(0x295)])(j,this['instanceName'],_0x5b4696(0x1b0)),{'encoding':_0x5b4696(0x48c)}));_0x1fb261=_0x3fbc51['me']?.['name']||_0x3fbc51['me']?.[_0x5b4696(0x5f3)];}}}return _0x1fb261;}get['profilePictureUrl'](){const _0x16ec7d=a0_0x5a2dd1;return this[_0x16ec7d(0x632)][_0x16ec7d(0x5e6)];}get[a0_0x5a2dd1(0x4ca)](){const _0x52dce7=a0_0x5a2dd1;return{'code':this[_0x52dce7(0x632)]['qrcode']?.[_0x52dce7(0x3fb)],'base64':this['instance'][_0x52dce7(0x3c4)]?.[_0x52dce7(0x401)]};}async['loadWebhook'](){const _0x674f91=a0_0x5a2dd1;let _0x4cb24b=await this['repository'][_0x674f91(0x210)][_0x674f91(0x40e)](this[_0x674f91(0x281)]);this[_0x674f91(0x45f)]['url']=_0x4cb24b?.[_0x674f91(0x675)],this[_0x674f91(0x45f)][_0x674f91(0x623)]=_0x4cb24b?.[_0x674f91(0x623)],this['localWebhook'][_0x674f91(0x271)]=_0x4cb24b?.[_0x674f91(0x271)],this[_0x674f91(0x45f)][_0x674f91(0x4ee)]=_0x4cb24b?.[_0x674f91(0x4ee)],this[_0x674f91(0x45f)][_0x674f91(0x19a)]=_0x4cb24b?.['QRCODE_UPDATED'],this['localWebhook']['SEND_MESSAGE']=_0x4cb24b?.['SEND_MESSAGE'],this[_0x674f91(0x45f)][_0x674f91(0x1ae)]=_0x4cb24b?.[_0x674f91(0x1ae)],this[_0x674f91(0x45f)][_0x674f91(0x2bc)]=_0x4cb24b?.[_0x674f91(0x2bc)],this[_0x674f91(0x45f)][_0x674f91(0x47e)]=_0x4cb24b?.[_0x674f91(0x47e)],this[_0x674f91(0x45f)][_0x674f91(0x544)]=_0x4cb24b?.[_0x674f91(0x544)],this[_0x674f91(0x45f)][_0x674f91(0x292)]=_0x4cb24b?.[_0x674f91(0x292)],this['localWebhook'][_0x674f91(0x56c)]=_0x4cb24b?.['CHATS_SET'],this[_0x674f91(0x45f)][_0x674f91(0x478)]=_0x4cb24b?.[_0x674f91(0x478)],this[_0x674f91(0x45f)][_0x674f91(0x563)]=_0x4cb24b?.[_0x674f91(0x563)],this[_0x674f91(0x45f)][_0x674f91(0x449)]=_0x4cb24b?.[_0x674f91(0x449)],this[_0x674f91(0x45f)]['CONTACTS_SET']=_0x4cb24b?.[_0x674f91(0x3b6)],this[_0x674f91(0x45f)]['CONTACTS_UPSERT']=_0x4cb24b?.['CONTACTS_UPSERT'],this[_0x674f91(0x45f)][_0x674f91(0x5d8)]=_0x4cb24b?.[_0x674f91(0x5d8)],this['localWebhook'][_0x674f91(0x30e)]=_0x4cb24b?.[_0x674f91(0x30e)],this[_0x674f91(0x45f)][_0x674f91(0x511)]=_0x4cb24b?.['MESSAGES_SET'],this[_0x674f91(0x45f)][_0x674f91(0x6ab)]=_0x4cb24b?.[_0x674f91(0x6ab)],this[_0x674f91(0x45f)][_0x674f91(0x15b)]=_0x4cb24b?.[_0x674f91(0x15b)];}async[a0_0x5a2dd1(0x591)](_0x452bb7){const _0x176141=a0_0x5a2dd1;let _0x5b1b51=[_0x176141(0x22a),'url',_0x176141(0x623),_0x176141(0x271),_0x176141(0x4ee),_0x176141(0x19a),_0x176141(0x2bc),'MESSAGES_UPSERT','SEND_MESSAGE',_0x176141(0x47e),'GROUPS_UPDATE',_0x176141(0x292),_0x176141(0x56c),'CHATS_UPSERT','CHATS_UPDATE','CHATS_DELETE',_0x176141(0x3b6),'CONTACTS_UPSERT','CONTACTS_UPDATE','PRESENCE_UPDATE',_0x176141(0x511),_0x176141(0x6ab),_0x176141(0x15b)],_0x563af5={};return _0x5b1b51['forEach'](_0x414422=>{_0x452bb7[_0x414422]!==void 0x0&&(_0x563af5[_0x414422]=_0x452bb7[_0x414422]);}),await this[_0x176141(0x104)]['webhook'][_0x176141(0x57c)](_0x563af5,this['instanceName']),Object[_0x176141(0x228)](this[_0x176141(0x45f)],_0x563af5),await this[_0x176141(0x104)][_0x176141(0x210)][_0x176141(0x40e)](this[_0x176141(0x281)]);}async['findWebhook'](){const _0x2c0a0f=a0_0x5a2dd1;return await this['repository'][_0x2c0a0f(0x210)]['find'](this[_0x2c0a0f(0x281)]);}async['sendDataWebhook'](_0xa152a,_0x3805e4){const _0x35eccd=a0_0x5a2dd1;let _0x2444d1=this[_0x35eccd(0x2a2)][_0x35eccd(0x5c2)]('WEBHOOK'),_0x2d751d=_0xa152a[_0x35eccd(0x269)](/[\.-]/gm,'_')['toUpperCase'](),_0x1e13a4=this[_0x35eccd(0x45f)][_0x35eccd(0x623)]&&(0x0,k['isURL'])(this[_0x35eccd(0x45f)][_0x35eccd(0x675)])?this['localWebhook'][_0x35eccd(0x675)]+(this[_0x35eccd(0x45f)][_0x35eccd(0x271)]?this['webhookMap'][_0xa152a]:''):null,_0x53246d=_0x2444d1?.['GLOBAL'],_0x409f5f=_0x53246d&&_0x53246d?.['ENABLED']&&(0x0,k[_0x35eccd(0x428)])(_0x53246d[_0x35eccd(0x457)])?_0x53246d[_0x35eccd(0x457)]+(_0x2444d1[_0x35eccd(0x345)]?this[_0x35eccd(0x3a0)][_0xa152a]:''):null,_0x720a81=this[_0x35eccd(0x45f)][_0x2d751d],_0x2ef0b9=_0x2444d1?.['EVENTS']?.[_0x2d751d];if(_0x720a81&&_0x1e13a4)try{await ue['default'][_0x35eccd(0x57c)]({'baseURL':_0x1e13a4})['post']('',{'event':_0xa152a,'instance':this[_0x35eccd(0x632)][_0x35eccd(0x67e)],'data':_0x3805e4}),this['logger'][_0x35eccd(0x6aa)]('Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0xa152a+':\x20'+_0x1e13a4);}catch(_0x228fb7){this[_0x35eccd(0x607)][_0x35eccd(0x4a6)](this['instanceName']+'\x20('+this[_0x35eccd(0x632)][_0x35eccd(0x6b5)]+_0x35eccd(0x49a)+{'local':c['name']+_0x35eccd(0x36d),'message':_0x228fb7?.['message'],'hostName':_0x228fb7?.[_0x35eccd(0x314)],'syscall':_0x228fb7?.['syscall'],'code':_0x228fb7?.[_0x35eccd(0x3fb)],'error':_0x228fb7?.[_0x35eccd(0x33f)],'stack':_0x228fb7?.[_0x35eccd(0x3ba)],'name':_0x228fb7?.[_0x35eccd(0x67e)]});}if(_0x2ef0b9&&_0x409f5f)try{await ue[_0x35eccd(0x5fb)][_0x35eccd(0x57c)]({'baseURL':_0x409f5f})[_0x35eccd(0x684)]('',{'event':_0xa152a,'instance':this[_0x35eccd(0x632)][_0x35eccd(0x67e)],'data':_0x3805e4}),this['logger'][_0x35eccd(0x6aa)](_0x35eccd(0x15c)+_0xa152a+':\x20'+_0x409f5f);}catch(_0x275a2f){this[_0x35eccd(0x607)]['error'](this[_0x35eccd(0x281)]+'\x20('+this[_0x35eccd(0x632)][_0x35eccd(0x6b5)]+_0x35eccd(0x49a)+{'local':c[_0x35eccd(0x67e)]+_0x35eccd(0x245),'message':_0x275a2f?.[_0x35eccd(0x19d)],'hostName':_0x275a2f?.['hostname'],'syscall':_0x275a2f?.['syscall'],'code':_0x275a2f?.['code'],'error':_0x275a2f?.[_0x35eccd(0x33f)],'stack':_0x275a2f?.[_0x35eccd(0x3ba)],'name':_0x275a2f?.[_0x35eccd(0x67e)]});}}async[a0_0x5a2dd1(0x20a)]({qr:_0x1b81a1,connection:_0x349e2e,lastDisconnect:_0x378783}){const _0x198b7b=a0_0x5a2dd1;if(_0x1b81a1){if(this['instance'][_0x198b7b(0x3c4)][_0x198b7b(0x4aa)]===this['configService'][_0x198b7b(0x5c2)]('QRCODE')[_0x198b7b(0x6ac)])return this[_0x198b7b(0x1a7)](_0x198b7b(0x2ae),{'message':_0x198b7b(0x39b),'statusCode':w[_0x198b7b(0x653)][_0x198b7b(0x351)]}),this[_0x198b7b(0x1a7)]('connection.update',{'instance':this['instance'][_0x198b7b(0x67e)],'state':_0x198b7b(0x4de),'statusReason':w[_0x198b7b(0x653)]['connectionClosed']}),this[_0x198b7b(0x1a7)]('status.instance',{'instance':this['instance'][_0x198b7b(0x67e)],'status':_0x198b7b(0x285)}),this['endSession']=!0x0,this[_0x198b7b(0x67b)]['emit'](_0x198b7b(0x3aa),this[_0x198b7b(0x632)][_0x198b7b(0x67e)]);this[_0x198b7b(0x632)][_0x198b7b(0x3c4)][_0x198b7b(0x4aa)]++;let _0x188ae7={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x198b7b(0x6b2),'dark':_0x198b7b(0x5de)}};go[_0x198b7b(0x5fb)][_0x198b7b(0x62b)](_0x1b81a1,_0x188ae7,(_0x549c93,_0x3fcf2d)=>{const _0x1f3cd5=_0x198b7b;if(_0x549c93){this[_0x1f3cd5(0x607)][_0x1f3cd5(0x4a6)](this[_0x1f3cd5(0x281)]+'\x20('+this[_0x1f3cd5(0x632)][_0x1f3cd5(0x6b5)]+_0x1f3cd5(0x324)+_0x549c93['toString']());return;}this[_0x1f3cd5(0x632)][_0x1f3cd5(0x3c4)][_0x1f3cd5(0x401)]=_0x3fcf2d,this[_0x1f3cd5(0x632)][_0x1f3cd5(0x3c4)][_0x1f3cd5(0x3fb)]=_0x1b81a1,this['sendDataWebhook'](_0x1f3cd5(0x2ae),{'qrcode':{'instance':this[_0x1f3cd5(0x632)]['name'],'code':_0x1b81a1,'base64':_0x3fcf2d}});}),mo[_0x198b7b(0x5fb)]['generate'](_0x1b81a1,{'small':!0x0},_0x420fd3=>this[_0x198b7b(0x607)][_0x198b7b(0x6aa)](_0x198b7b(0x431)+this[_0x198b7b(0x632)][_0x198b7b(0x67e)]+_0x198b7b(0xf1)+this['instance'][_0x198b7b(0x3c4)][_0x198b7b(0x4aa)]+_0x198b7b(0x53a)+_0x420fd3));}if(_0x349e2e&&(this[_0x198b7b(0x59b)]={'state':_0x349e2e,'statusReason':_0x378783?.[_0x198b7b(0x4a6)]?.[_0x198b7b(0x278)]?.[_0x198b7b(0x1ad)]??0xc8},this[_0x198b7b(0x1a7)]('connection.update',{'instance':this[_0x198b7b(0x632)][_0x198b7b(0x67e)],...this['stateConnection']})),_0x349e2e===_0x198b7b(0x254)){if(this[_0x198b7b(0x51d)]++,this[_0x198b7b(0x1c5)]['push'](Date[_0x198b7b(0x468)]()),this[_0x198b7b(0x1c5)]=this['reconnectTimestamps'][_0x198b7b(0x693)](_0x2580c9=>Date[_0x198b7b(0x468)]()-_0x2580c9<this['RECONNECT_TIME_FRAME']),_0x378783[_0x198b7b(0x4a6)]?.[_0x198b7b(0x278)]?.[_0x198b7b(0x1ad)]!==w[_0x198b7b(0x653)]['loggedOut']&&this[_0x198b7b(0x1c5)][_0x198b7b(0x1c0)]<=this[_0x198b7b(0x5da)])await this['connectToWhatsapp']();else{this[_0x198b7b(0x1a7)]('status.instance',{'instance':this[_0x198b7b(0x632)][_0x198b7b(0x67e)],'status':_0x198b7b(0x285)}),this[_0x198b7b(0x5c3)]=!0x1;try{this[_0x198b7b(0x607)][_0x198b7b(0x400)](this['instanceName']+'\x20('+this[_0x198b7b(0x632)][_0x198b7b(0x6b5)]+_0x198b7b(0x51b));let _0x58321d={'where':{'owner':this['instance'][_0x198b7b(0x6b5)]}},_0x223347=(await this[_0x198b7b(0x104)][_0x198b7b(0x49b)][_0x198b7b(0x40e)](_0x58321d))[_0x198b7b(0x1c0)];await this[_0x198b7b(0x104)][_0x198b7b(0x49b)][_0x198b7b(0x570)](_0x58321d),this['logger'][_0x198b7b(0x400)](this[_0x198b7b(0x281)]+'\x20('+this[_0x198b7b(0x632)]['wuid']+_0x198b7b(0x480)+_0x223347+_0x198b7b(0x1fc));}catch(_0x4374ab){console['error']('Falha\x20ao\x20deletar\x20mensagens\x20updates:',_0x4374ab);}try{this[_0x198b7b(0x607)][_0x198b7b(0x400)](this[_0x198b7b(0x281)]+'\x20('+this[_0x198b7b(0x632)][_0x198b7b(0x6b5)]+_0x198b7b(0x27a));let _0x19ea83={'where':{'owner':this[_0x198b7b(0x632)][_0x198b7b(0x6b5)]}},_0x2ac635=(await this[_0x198b7b(0x104)][_0x198b7b(0x19d)][_0x198b7b(0x40e)](_0x19ea83))['length'];await this[_0x198b7b(0x104)][_0x198b7b(0x19d)]['delete'](_0x19ea83),this[_0x198b7b(0x607)]['verbose'](this['instanceName']+'\x20('+this[_0x198b7b(0x632)][_0x198b7b(0x6b5)]+_0x198b7b(0x480)+_0x2ac635+'\x20messages.');}catch(_0x3d7faf){console[_0x198b7b(0x4a6)](_0x198b7b(0x5f0),_0x3d7faf);}try{this['logger']['verbose'](this[_0x198b7b(0x281)]+'\x20('+this[_0x198b7b(0x632)][_0x198b7b(0x6b5)]+'):\x20Tentando\x20deletar\x20todas\x20os\x20contatos...');let _0x5a6f99={'where':{'owner':this['instance'][_0x198b7b(0x6b5)]}},_0x4247f2=(await this[_0x198b7b(0x104)][_0x198b7b(0x1fd)][_0x198b7b(0x40e)](_0x5a6f99))['length'];await this[_0x198b7b(0x104)][_0x198b7b(0x1fd)]['delete'](_0x5a6f99),this[_0x198b7b(0x607)][_0x198b7b(0x400)](this[_0x198b7b(0x281)]+'\x20('+this[_0x198b7b(0x632)][_0x198b7b(0x6b5)]+_0x198b7b(0x480)+_0x4247f2+'\x20contatos.');}catch(_0x11140a){console[_0x198b7b(0x4a6)](_0x198b7b(0x1a5),_0x11140a);}this[_0x198b7b(0x63f)]!==null&&(this['logger']['verbose'](this[_0x198b7b(0x281)]+'\x20('+this[_0x198b7b(0x632)][_0x198b7b(0x6b5)]+'):\x20Limpando\x20delayMessage'),clearInterval(this['delayMessage']),this[_0x198b7b(0x63f)]=null),this[_0x198b7b(0x607)][_0x198b7b(0x400)](this['instanceName']+'\x20('+this['instance']['wuid']+'):\x20Limpando\x20AutomateSystem'),this[_0x198b7b(0x535)]=null,this[_0x198b7b(0x67b)][_0x198b7b(0x554)](_0x198b7b(0x4e7),this[_0x198b7b(0x632)][_0x198b7b(0x67e)],_0x198b7b(0x107)),this[_0x198b7b(0x6c6)]?.['ws']?.[_0x198b7b(0x254)](),this['client']['end'](new Error(_0x198b7b(0x36c)));}}if(_0x349e2e===_0x198b7b(0x541)){this[_0x198b7b(0x341)],this[_0x198b7b(0x632)][_0x198b7b(0x6b5)]=this[_0x198b7b(0x6c6)][_0x198b7b(0x184)]['id']['replace'](/:\d+/,'')[_0x198b7b(0x269)](_0x198b7b(0x3b5),''),this['instance'][_0x198b7b(0x5e6)]=(await this[_0x198b7b(0x3d6)](this[_0x198b7b(0x632)][_0x198b7b(0x6b5)]+_0x198b7b(0x3b5)))[_0x198b7b(0x5e6)];let _0x587a81=_0x198b7b(0x3d1)+this['instance']['wuid'],_0x30baa2=0x28,_0x3c8a29=Math[_0x198b7b(0x287)]((_0x30baa2-_0x587a81[_0x198b7b(0x1c0)])/0x2),_0x168a72='\x20'['repeat'](_0x3c8a29),_0x5ef172=_0x198b7b(0x1e0),_0x19aade='Instância:\x20'+this[_0x198b7b(0x632)][_0x198b7b(0x67e)],_0x3c96be=(''+_0x168a72+_0x587a81+_0x168a72)[_0x198b7b(0x626)](_0x30baa2,'\x20'),_0x38822e=(''+_0x168a72+_0x5ef172+_0x168a72)['padEnd'](_0x30baa2,'\x20'),_0x4722fb=(''+_0x168a72+_0x19aade+_0x168a72)['padEnd'](_0x30baa2,'\x20'),_0x5adcc0=Math['max'](_0x3c96be[_0x198b7b(0x1c0)],_0x38822e[_0x198b7b(0x1c0)],_0x4722fb[_0x198b7b(0x1c0)]),_0x369718=_0x3c96be['padEnd'](_0x5adcc0,'\x20'),_0x4d6884=_0x38822e[_0x198b7b(0x626)](_0x5adcc0,'\x20'),_0x3b8ce0=_0x4722fb['padEnd'](_0x5adcc0,'\x20');this[_0x198b7b(0x607)][_0x198b7b(0x698)]((_0x198b7b(0x17c)+'─'['repeat'](_0x5adcc0)+_0x198b7b(0x156)+_0x4d6884+_0x198b7b(0x241)+_0x3b8ce0+_0x198b7b(0x241)+_0x369718+_0x198b7b(0x536)+'─'['repeat'](_0x5adcc0)+'┘')[_0x198b7b(0x269)](/^ +/gm,'\x20\x20')),this['AutomateFunctions'](),this[_0x198b7b(0x5c3)]=!0x0;}}['resetReconnectionVariables'](){const _0x4e57fb=a0_0x5a2dd1;this[_0x4e57fb(0x51d)]=0x0,this[_0x4e57fb(0x1c5)]=[];}async[a0_0x5a2dd1(0x5f1)](_0x3d59ee,_0x57d9e2=!0x1){const _0x464276=a0_0x5a2dd1;try{let _0x55d2eb=await this['repository'][_0x464276(0x19d)][_0x464276(0x40e)]({'where':{'owner':this[_0x464276(0x632)]['wuid'],'key':{'id':_0x3d59ee['id']}}});return _0x57d9e2?_0x55d2eb[0x0]:_0x55d2eb[0x0][_0x464276(0x19d)];}catch{return{'conversation':''};}}[a0_0x5a2dd1(0x2d7)](){const _0x1688e6=a0_0x5a2dd1;let _0x348cb0=this['configService']['get'](_0x1688e6(0x605)),_0x2f40ce=this['configService'][_0x1688e6(0x5c2)](_0x1688e6(0x1e4));_0x348cb0?.[_0x1688e6(0x20e)]&&!_0x2f40ce['ENABLED']&&setInterval(()=>{const _0x2a0340=_0x1688e6;try{for(let [_0x26fe3c,_0x3439f7]of Object[_0x2a0340(0x28c)](_0x348cb0))_0x3439f7===!0x0&&(0x0,Vt[_0x2a0340(0x3f6)])(_0x2a0340(0x521)+(0x0,$['join'])(this[_0x2a0340(0x2b1)],_0x26fe3c['toLowerCase'](),this[_0x2a0340(0x632)][_0x2a0340(0x6b5)])+_0x2a0340(0x39e));}catch{}},(_0x348cb0?.[_0x1688e6(0x20e)]??0xe10)*0x3e8);}async[a0_0x5a2dd1(0x38d)](){const _0x645215=a0_0x5a2dd1;let _0x10a215=this[_0x645215(0x2a2)]['get'](_0x645215(0x1e4)),_0x37cf37=this[_0x645215(0x2a2)][_0x645215(0x5c2)]('REDIS');return _0x37cf37?.[_0x645215(0x159)]?await vs(_0x37cf37,this[_0x645215(0x632)][_0x645215(0x67e)]):_0x10a215['ENABLED']?await Es(this['instance'][_0x645215(0x67e)]):await(0x0,w[_0x645215(0x43b)])((0x0,$[_0x645215(0x295)])(j,this[_0x645215(0x632)][_0x645215(0x67e)]));}async[a0_0x5a2dd1(0x588)](){const _0x93bd0=a0_0x5a2dd1;let _0x1b85fd=()=>Math['floor'](Math[_0x93bd0(0x3c0)]()*0x2711)+0x7d0,_0x4770cc=async()=>{const _0x32a78d=_0x93bd0;if(!this[_0x32a78d(0x5c3)]){this[_0x32a78d(0x607)][_0x32a78d(0x400)](_0x32a78d(0x35b)),this[_0x32a78d(0x1cb)]=!0x1;return;}if(this[_0x32a78d(0x632)]['wuid']&&this['AutomateSystem']&&this[_0x32a78d(0x63f)]!==null&&this[_0x32a78d(0x63f)]!==void 0x0){let _0x2fd491=Math[_0x32a78d(0x212)](this[_0x32a78d(0x63f)]/0xea60);this[_0x32a78d(0x607)][_0x32a78d(0x400)](this['instanceName']+'\x20('+this['instance'][_0x32a78d(0x6b5)]+_0x32a78d(0x2f4)+_0x2fd491+_0x32a78d(0x3c1)),this['isRunning']=!0x1;return;}else this[_0x32a78d(0x632)][_0x32a78d(0x6b5)]&&(this[_0x32a78d(0x607)][_0x32a78d(0x400)](this[_0x32a78d(0x281)]+'\x20('+this['instance'][_0x32a78d(0x6b5)]+_0x32a78d(0x4c0)),this['AutomateSystem']||await this[_0x32a78d(0x622)](),(this[_0x32a78d(0x63f)]===null||this[_0x32a78d(0x63f)]===void 0x0)&&await this[_0x32a78d(0x299)]());if(this[_0x32a78d(0x1cb)]){let _0x27294c=_0x1b85fd();this[_0x32a78d(0x607)]['verbose'](this[_0x32a78d(0x281)]+':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20'+_0x27294c/0x3e8+_0x32a78d(0x5ac)),setTimeout(_0x4770cc,_0x27294c);}};if(this[_0x93bd0(0x1cb)])return;this['isRunning']=!0x0;let _0x2b7c84=_0x1b85fd();setTimeout(_0x4770cc,_0x2b7c84);}async[a0_0x5a2dd1(0x2c3)](){const _0x4dd07e=a0_0x5a2dd1;try{this[_0x4dd07e(0x4a9)](),this['instance'][_0x4dd07e(0x38c)]=await this['defineAuthState']();let {version:_0x329d26}=await(0x0,w[_0x4dd07e(0x6cb)])(),_0x87e2a6=this[_0x4dd07e(0x2a2)][_0x4dd07e(0x5c2)](_0x4dd07e(0x47b)),_0x442dba=[_0x87e2a6[_0x4dd07e(0x2b9)],_0x87e2a6[_0x4dd07e(0x44d)],(0x0,ho[_0x4dd07e(0x405)])()],_0xd81640={'auth':{'creds':this[_0x4dd07e(0x632)][_0x4dd07e(0x38c)][_0x4dd07e(0x586)][_0x4dd07e(0x647)],'keys':(0x0,w[_0x4dd07e(0x396)])(this['instance'][_0x4dd07e(0x38c)][_0x4dd07e(0x586)][_0x4dd07e(0x330)],(0x0,kt['default'])({'level':_0x4dd07e(0x4a6)}))},'logger':(0x0,kt[_0x4dd07e(0x5fb)])({'level':'error'}),'printQRInTerminal':!0x1,'browser':_0x442dba,'version':_0x329d26,'connectTimeoutMs':0xea60,'qrTimeout':0x9c40,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'msgRetryCounterCache':this[_0x4dd07e(0x427)],'getMessage':async _0x3dd7df=>await this[_0x4dd07e(0x5f1)](_0x3dd7df),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x0,'userDevicesCache':this[_0x4dd07e(0xfe)],'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa},'patchMessageBeforeSending':_0x481f64=>(!!(_0x481f64['buttonsMessage']||_0x481f64[_0x4dd07e(0x23d)])&&(_0x481f64={'viewOnceMessageV2':{'message':{'messageContextInfo':{'deviceListMetadataVersion':0x2,'deviceListMetadata':{}},..._0x481f64}}}),_0x481f64)};return this['endSession']=!0x1,this[_0x4dd07e(0x6c6)]=(0x0,w[_0x4dd07e(0x5fb)])(_0xd81640),this[_0x4dd07e(0x363)](),this[_0x4dd07e(0x6c6)];}catch(_0x1fcd30){throw this[_0x4dd07e(0x607)][_0x4dd07e(0x4a6)](this['instanceName']+'\x20('+this[_0x4dd07e(0x632)][_0x4dd07e(0x6b5)]+_0x4dd07e(0x49a)+_0x1fcd30),new A(_0x1fcd30?.[_0x4dd07e(0x41a)]());}}[a0_0x5a2dd1(0x363)](){const _0x468dfd=a0_0x5a2dd1;this['client']['ev'][_0x468dfd(0x412)](_0x585964=>{const _0xa53b46=_0x468dfd;if(!this[_0xa53b46(0x388)]){let _0x1722fb=this[_0xa53b46(0x2a2)][_0xa53b46(0x5c2)]('DATABASE');if(_0x585964[_0xa53b46(0x3d3)]&&this[_0xa53b46(0x20a)](_0x585964['connection.update']),_0x585964['creds.update']&&this[_0xa53b46(0x632)][_0xa53b46(0x38c)][_0xa53b46(0x242)](),_0x585964['messaging-history.set']){let _0x2c02b2=_0x585964[_0xa53b46(0x45a)];this[_0xa53b46(0x4fb)]['messaging-history.set'](_0x2c02b2,_0x1722fb);}if(_0x585964['messages.upsert']){let _0x869c00=_0x585964[_0xa53b46(0x1c4)];this[_0xa53b46(0x4fb)][_0xa53b46(0x1c4)](_0x869c00,_0x1722fb);}if(_0x585964[_0xa53b46(0x109)]){let _0x3884df=_0x585964['messages.update'];this[_0xa53b46(0x4fb)][_0xa53b46(0x109)](_0x3884df,_0x1722fb);}if(_0x585964[_0xa53b46(0x2c6)]){let _0x266a92=_0x585964[_0xa53b46(0x2c6)];if(this[_0xa53b46(0x45f)]?.[_0xa53b46(0x15b)]&&_0x266a92['id']['includes'](_0xa53b46(0x30f)))return;this['sendDataWebhook'](_0xa53b46(0x2c6),_0x266a92);}if(!this[_0xa53b46(0x45f)]?.[_0xa53b46(0x15b)]){if(_0x585964[_0xa53b46(0x5ba)]){let _0x290456=_0x585964['groups.upsert'];this[_0xa53b46(0x5c7)][_0xa53b46(0x5ba)](_0x290456);}if(_0x585964[_0xa53b46(0x3b8)]){let _0x36f5ee=_0x585964[_0xa53b46(0x3b8)];this['groupHandler'][_0xa53b46(0x3b8)](_0x36f5ee);}if(_0x585964['group-participants.update']){let _0x484022=_0x585964['group-participants.update'];this[_0xa53b46(0x5c7)][_0xa53b46(0x229)](_0x484022);}}if(_0x585964['chats.upsert']){let _0x58e332=_0x585964[_0xa53b46(0x3d8)];this[_0xa53b46(0x218)]['chats.upsert'](_0x58e332,_0x1722fb);}if(_0x585964[_0xa53b46(0x481)]){let _0x31f831=_0x585964[_0xa53b46(0x481)];this[_0xa53b46(0x218)][_0xa53b46(0x481)](_0x31f831,_0x1722fb);}if(_0x585964[_0xa53b46(0x659)]){let _0x4a2e5=_0x585964[_0xa53b46(0x659)];this[_0xa53b46(0x218)][_0xa53b46(0x659)](_0x4a2e5);}if(_0x585964[_0xa53b46(0x22d)]){let _0x3b273a=_0x585964[_0xa53b46(0x22d)];this[_0xa53b46(0x31f)][_0xa53b46(0x22d)](_0x3b273a,_0x1722fb);}if(_0x585964[_0xa53b46(0x6be)]){let _0x3fec4b=_0x585964['contacts.update'];this[_0xa53b46(0x31f)][_0xa53b46(0x6be)](_0x3fec4b,_0x1722fb);}}});}[a0_0x5a2dd1(0x2e1)](_0x372435){let _0x5ab2d9=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)['exec'](_0x372435);if(_0x5ab2d9&&_0x5ab2d9[0x1]==='55'){let _0x30b31e=_0x5ab2d9[0x2],_0x3f41a2=_0x5ab2d9[0x3],_0x5bfd84=_0x5ab2d9[0x4];if(_0x30b31e>='31'&&_0x3f41a2==='9')return _0x5ab2d9[0x1]+_0x30b31e+_0x5bfd84;}return _0x372435;}[a0_0x5a2dd1(0x3b0)](_0x359979){const _0x172eec=a0_0x5a2dd1;return _0x359979[_0x172eec(0x40c)](_0x172eec(0x30f))||_0x359979['includes'](_0x172eec(0x3b5))||_0x359979[_0x172eec(0x40c)](_0x172eec(0x463))?_0x359979:(_0x359979=_0x359979?.['replace'](/\s/g,'')[_0x172eec(0x269)](/\+/g,'')[_0x172eec(0x269)](/\(/g,'')['replace'](/\)/g,'')[_0x172eec(0x60f)](/\:/)[0x0][_0x172eec(0x60f)]('@')[0x0],_0x359979[_0x172eec(0x1c0)]>=0x12?(_0x359979=_0x359979[_0x172eec(0x269)](/[^\d-]/g,''),_0x359979+_0x172eec(0x30f)):(_0x359979=_0x359979[_0x172eec(0x269)](/\D/g,''),this['formatBRNumber'](_0x359979)+'@s.whatsapp.net'));}async[a0_0x5a2dd1(0x5fe)](_0x13e2d5){const _0x289988=a0_0x5a2dd1;let _0x13f3dd=this['createJid'](_0x13e2d5['number']),_0x786a4=(await this[_0x289988(0x3ee)]({'numbers':[_0x13f3dd]}))[0x0];if(!_0x786a4[_0x289988(0x36e)]&&!(0x0,w[_0x289988(0x616)])(_0x786a4[_0x289988(0x479)]))throw new g(_0x786a4);let _0x1dfc70=(0x0,w[_0x289988(0x616)])(_0x13f3dd)?_0x13f3dd:_0x786a4[_0x289988(0x479)];if((0x0,w[_0x289988(0x616)])(_0x1dfc70))try{await this[_0x289988(0x6c6)][_0x289988(0x195)](_0x1dfc70);}catch{throw new x(_0x289988(0x1a0));}try{return await this[_0x289988(0x6c6)][_0x289988(0x4df)](_0x1dfc70),await this['client'][_0x289988(0x23c)](_0x13e2d5[_0x289988(0x365)],_0x13f3dd),{'status':0xc8,'presence':_0x13e2d5[_0x289988(0x365)]};}catch(_0x3d7379){throw new g(_0x3d7379[_0x289988(0x41a)]());}}async[a0_0x5a2dd1(0x3d6)](_0x327fd3){const _0x68892d=a0_0x5a2dd1;let _0x5219be=this[_0x68892d(0x3b0)](_0x327fd3);try{return{'wuid':_0x5219be,'profilePictureUrl':await this[_0x68892d(0x6c6)][_0x68892d(0x5e6)](_0x5219be,_0x68892d(0x625))};}catch{return{'wuid':_0x5219be,'profilePictureUrl':null};}}async[a0_0x5a2dd1(0x175)](_0x4a192a,_0x1d29f0,_0x1a2db7){const _0x15c440=a0_0x5a2dd1;let _0x55bbd9=(await this[_0x15c440(0x3ee)]({'numbers':[_0x4a192a]}))[0x0];if(!_0x55bbd9[_0x15c440(0x36e)]&&!(0x0,w[_0x15c440(0x616)])(_0x55bbd9[_0x15c440(0x479)])&&!_0x55bbd9[_0x15c440(0x479)][_0x15c440(0x40c)](_0x15c440(0x463)))throw new g(_0x55bbd9);let _0x353bb9=_0x55bbd9[_0x15c440(0x479)];try{_0x1a2db7?.[_0x15c440(0x41f)]&&(await this[_0x15c440(0x6c6)][_0x15c440(0x4df)](_0x353bb9),await this[_0x15c440(0x6c6)][_0x15c440(0x23c)](_0x1a2db7?.[_0x15c440(0x365)]??_0x15c440(0x378),_0x353bb9),await(0x0,w['delay'])(_0x1a2db7[_0x15c440(0x41f)]),await this['client'][_0x15c440(0x23c)](_0x15c440(0xea),_0x353bb9));let _0x48a43e=_0x1a2db7?.['linkPreview']!=!0x1?void 0x0:!0x1,_0x2d372a;if(_0x1a2db7?.[_0x15c440(0x216)]){let _0x43a18e=_0x1a2db7?.[_0x15c440(0x216)],_0x2184eb=_0x43a18e?.[_0x15c440(0x19d)]?_0x43a18e:await this[_0x15c440(0x5f1)](_0x43a18e['key'],!0x0);if(!_0x2184eb)throw'Message\x20not\x20found';_0x2d372a=_0x2184eb;}let _0x296741;if((0x0,w[_0x15c440(0x616)])(_0x353bb9))try{let _0xf29052=await this[_0x15c440(0x6c6)]['groupMetadata'](_0x353bb9);if(!_0xf29052)throw new x(_0x15c440(0x1a0));_0x1a2db7?.['mentions']&&(_0x1a2db7['mentions']?.[_0x15c440(0x538)]?_0x296741=_0xf29052['participants']['map'](_0x5b7243=>_0x5b7243['id']):_0x1a2db7['mentions']?.[_0x15c440(0x174)]?.[_0x15c440(0x1c0)]&&(_0x296741=_0x1a2db7[_0x15c440(0x375)]['mentioned'][_0x15c440(0x4ce)](_0x20e49b=>{const _0x57628b=_0x15c440;let _0x4ad511=this[_0x57628b(0x3b0)](_0x20e49b);return(0x0,w[_0x57628b(0x616)])(_0x4ad511)?null:_0x4ad511;})));}catch{throw new x('Group\x20not\x20found');}let _0x39fcc9=await((async()=>{const _0x351143=_0x15c440;let _0x521157={'quoted':_0x2d372a};if(!_0x1d29f0['audio']&&!_0x1d29f0[_0x351143(0x644)]&&!_0x1d29f0[_0x351143(0x666)]&&!_0x1d29f0[_0x351143(0x557)]&&_0x353bb9!=='status@broadcast'&&!_0x1d29f0['audio'])return await this['client']['sendMessage'](_0x353bb9,{'forward':{'key':{'remoteJid':this[_0x351143(0x632)][_0x351143(0x6b5)],'fromMe':!0x0},'message':_0x1d29f0},'mentions':_0x296741},_0x521157);if(_0x1d29f0[_0x351143(0x557)]){let _0x4d6023=_0x1d29f0[_0x351143(0x557)];return _0x1a2db7?.[_0x351143(0x5d4)]&&(_0x4d6023=await this['replaceVariablesChat'](_0x4d6023,_0x353bb9)),await this['client'][_0x351143(0x1c1)](_0x353bb9,{'text':_0x4d6023,'mentions':_0x296741,'linkPreview':_0x48a43e},_0x521157);}return _0x353bb9===_0x351143(0x280)?await this[_0x351143(0x6c6)]['sendMessage'](_0x353bb9,_0x1d29f0['status']['content'],{'backgroundColor':_0x1d29f0[_0x351143(0x50a)]['option'][_0x351143(0xed)],'font':_0x1d29f0[_0x351143(0x50a)][_0x351143(0x32d)][_0x351143(0x550)],'statusJidList':_0x1d29f0['status']['option'][_0x351143(0x1cf)]}):await this[_0x351143(0x6c6)][_0x351143(0x1c1)](_0x353bb9,_0x1d29f0,_0x521157);})()),{message_normalized:_0x4f543e}=this['normalizeMessage'](_0x39fcc9[_0x15c440(0x19d)],W(_0x39fcc9[_0x15c440(0x19d)]),null),_0x52b4d0={'key':_0x39fcc9[_0x15c440(0x3a9)],'pushName':_0x39fcc9[_0x15c440(0x688)],'message':{..._0x39fcc9[_0x15c440(0x19d)]},'messageType':W(_0x39fcc9['message']),'message_normalized':{'key':_0x39fcc9[_0x15c440(0x3a9)],'pushName':_0x39fcc9['pushName'],'messageTimestamp':_0x39fcc9[_0x15c440(0x503)]&&_0x39fcc9['messageTimestamp'][_0x15c440(0x41a)]()[_0x15c440(0x1c0)]<0xd?_0x39fcc9[_0x15c440(0x503)]*0x3e8:_0x39fcc9['messageTimestamp']||null,'source':(0x0,w[_0x15c440(0x4c7)])(_0x39fcc9['key']['id']),..._0x4f543e},'messageTimestamp':_0x39fcc9['messageTimestamp']&&_0x39fcc9[_0x15c440(0x503)]['toString']()[_0x15c440(0x1c0)]<0xd?_0x39fcc9[_0x15c440(0x503)]*0x3e8:_0x39fcc9['messageTimestamp']||null,'owner':this[_0x15c440(0x632)][_0x15c440(0x6b5)],'source':(0x0,w[_0x15c440(0x4c7)])(_0x39fcc9[_0x15c440(0x3a9)]['id'])};return this['logger'][_0x15c440(0x6aa)](_0x52b4d0),await this['sendDataWebhook'](_0x15c440(0x664),_0x52b4d0),G(this[_0x15c440(0x281)],_0x15c440(0x2d4),{'message':_0x52b4d0}),this[_0x15c440(0x27e)](this[_0x15c440(0x2a2)][_0x15c440(0x5c2)](_0x15c440(0x1e4)),_0x52b4d0,_0x15c440(0x537)),await this[_0x15c440(0x104)]['message']['insert']([_0x52b4d0],this['configService'][_0x15c440(0x5c2)]('DATABASE')['ENABLED']),_0x39fcc9;}catch(_0x176de9){throw this[_0x15c440(0x607)][_0x15c440(0x4a6)](this['instanceName']+'\x20('+this[_0x15c440(0x632)][_0x15c440(0x6b5)]+'):\x20'+_0x176de9[_0x15c440(0x41a)]()),new g(_0x176de9[_0x15c440(0x41a)]());}}get['connectionStatus'](){return this['stateConnection'];}async[a0_0x5a2dd1(0x25a)](_0x4c1b0a){const _0x5665e6=a0_0x5a2dd1;let _0x15d2c2=this[_0x5665e6(0x2a2)][_0x5665e6(0x5c2)]('TRIAL_AD'),_0x5b3635=this['configService'][_0x5665e6(0x5c2)](_0x5665e6(0x18b));return _0x5b3635&&this['instanceName'][_0x5665e6(0x4c6)]()[_0x5665e6(0x40c)](_0x5b3635['toLowerCase']())&&(_0x4c1b0a['textMessage'][_0x5665e6(0x519)]+='\x0a\x0a'+_0x15d2c2),await this['sendMessageWithTyping'](_0x4c1b0a['number'],{'conversation':_0x4c1b0a[_0x5665e6(0x25a)][_0x5665e6(0x519)]},_0x4c1b0a?.[_0x5665e6(0x5cc)]);}async[a0_0x5a2dd1(0x148)](_0x34e832){const _0x5771bb=a0_0x5a2dd1;if(!_0x34e832[_0x5771bb(0x33b)])throw new g(_0x5771bb(0x179));if(!_0x34e832[_0x5771bb(0x4e9)])throw new g(_0x5771bb(0x534));if(_0x34e832[_0x5771bb(0x172)]){let _0x591d80=await this[_0x5771bb(0x104)][_0x5771bb(0x1fd)][_0x5771bb(0x40e)]({'where':{'owner':this['instance'][_0x5771bb(0x6b5)]}});if(!_0x591d80[_0x5771bb(0x1c0)])throw new g(_0x5771bb(0x516));_0x34e832['statusJidList']=_0x591d80[_0x5771bb(0x693)](_0x1b0058=>_0x1b0058[_0x5771bb(0x688)])['map'](_0x3777f6=>_0x3777f6['id']);}if(!_0x34e832[_0x5771bb(0x1cf)]?.[_0x5771bb(0x1c0)]&&!_0x34e832[_0x5771bb(0x172)])throw new g('StatusJidList\x20is\x20required');if(_0x34e832[_0x5771bb(0x33b)]==='text'){if(!_0x34e832[_0x5771bb(0xed)])throw new g(_0x5771bb(0x3b2));if(!_0x34e832[_0x5771bb(0x550)])throw new g(_0x5771bb(0x65f));return{'content':{'text':_0x34e832[_0x5771bb(0x4e9)]},'option':{'backgroundColor':_0x34e832['backgroundColor'],'font':_0x34e832[_0x5771bb(0x550)],'statusJidList':_0x34e832[_0x5771bb(0x1cf)]}};}if(_0x34e832[_0x5771bb(0x33b)]===_0x5771bb(0x625))return{'content':{'image':{'url':_0x34e832[_0x5771bb(0x4e9)]},'caption':_0x34e832[_0x5771bb(0x609)]},'option':{'statusJidList':_0x34e832[_0x5771bb(0x1cf)]}};if(_0x34e832[_0x5771bb(0x33b)]===_0x5771bb(0x602))return{'content':{'video':{'url':_0x34e832['content']},'caption':_0x34e832[_0x5771bb(0x609)]},'option':{'statusJidList':_0x34e832['statusJidList']}};if(_0x34e832[_0x5771bb(0x33b)]===_0x5771bb(0x2fe)){this[_0x5771bb(0x607)][_0x5771bb(0x400)](_0x5771bb(0x687)),this[_0x5771bb(0x607)][_0x5771bb(0x400)](_0x5771bb(0x3c8));let _0x19d917=await this[_0x5771bb(0x58b)](_0x34e832['content']);if(typeof _0x19d917=='string'){this[_0x5771bb(0x607)][_0x5771bb(0x400)]('Audio\x20processed');let _0x18db25=_[_0x5771bb(0x3f8)](_0x19d917)['toString']('base64'),_0x4536b6={'content':{'audio':Buffer[_0x5771bb(0x398)](_0x18db25,_0x5771bb(0x401)),'ptt':!0x0,'mimetype':'audio/mp4'},'option':{'statusJidList':_0x34e832[_0x5771bb(0x1cf)]}};return _[_0x5771bb(0x252)](_0x19d917),_0x4536b6;}else throw new A(_0x19d917);}throw new g(_0x5771bb(0x147));}async[a0_0x5a2dd1(0x68e)](_0x2014b1){const _0x37d20c=a0_0x5a2dd1;return await this[_0x37d20c(0x175)](_0x37d20c(0x280),{'status':await this['formatStatusMessage'](_0x2014b1[_0x37d20c(0x68e)])});}async[a0_0x5a2dd1(0x23a)](_0x1bb2df){const _0x260bb8=a0_0x5a2dd1;try{let _0x1a02d1=await(0x0,w[_0x260bb8(0x2ec)])({[_0x1bb2df[_0x260bb8(0x283)]]:(0x0,k[_0x260bb8(0x428)])(_0x1bb2df[_0x260bb8(0x404)])?{'url':_0x1bb2df['media']}:Buffer['from'](_0x1bb2df['media'],_0x260bb8(0x401))},{'upload':this['client'][_0x260bb8(0x20c)]}),_0x147cec=_0x1bb2df[_0x260bb8(0x283)]+_0x260bb8(0x53b);if(_0x1bb2df[_0x260bb8(0x283)]===_0x260bb8(0x450)&&!_0x1bb2df['fileName']){let _0x3011d6=new RegExp(/.*\/(.+?)\./)[_0x260bb8(0x4db)](_0x1bb2df[_0x260bb8(0x404)]);_0x1bb2df[_0x260bb8(0x3af)]=_0x3011d6[0x1];}let _0x4ee8a6;(0x0,k[_0x260bb8(0x428)])(_0x1bb2df['media'])?_0x4ee8a6=(0x0,Ns[_0x260bb8(0x546)])(_0x1bb2df[_0x260bb8(0x404)]):_0x4ee8a6=(0x0,Ns['getMIMEType'])(_0x1bb2df['fileName']);let _0x461936=this[_0x260bb8(0x2a2)]['get']('TRIAL_AD'),_0x277f71=this[_0x260bb8(0x2a2)][_0x260bb8(0x5c2)](_0x260bb8(0x18b));return _0x277f71&&this['instanceName'][_0x260bb8(0x4c6)]()[_0x260bb8(0x40c)](_0x277f71[_0x260bb8(0x4c6)]())&&(_0x1bb2df[_0x260bb8(0x609)]+='\x0a\x0a'+_0x461936),_0x1a02d1[_0x147cec]['caption']=_0x1bb2df?.[_0x260bb8(0x609)],_0x1a02d1[_0x147cec][_0x260bb8(0x303)]=_0x4ee8a6,_0x1a02d1[_0x147cec][_0x260bb8(0x3af)]=_0x1bb2df['fileName'],_0x1bb2df[_0x260bb8(0x283)]===_0x260bb8(0x602)&&(_0x1a02d1[_0x147cec][_0x260bb8(0x300)]=Uint8Array[_0x260bb8(0x398)]((0x0,_e[_0x260bb8(0x3f8)])((0x0,$[_0x260bb8(0x295)])(process['cwd'](),_0x260bb8(0x5cb)))),_0x1a02d1[_0x147cec]['gifPlayback']=!0x1),(0x0,w[_0x260bb8(0x2a5)])('',{[_0x147cec]:{..._0x1a02d1[_0x147cec]}},{'userJid':this[_0x260bb8(0x632)]['wuid']});}catch(_0x477ede){throw this[_0x260bb8(0x607)]['error'](this[_0x260bb8(0x281)]+'\x20('+this[_0x260bb8(0x632)][_0x260bb8(0x6b5)]+_0x260bb8(0x49a)+_0x477ede),new A(_0x477ede?.[_0x260bb8(0x41a)]()||_0x477ede);}}async[a0_0x5a2dd1(0x297)](_0x59b3a6){const _0x1d44c7=a0_0x5a2dd1;let _0x3a248c=await this['prepareMediaMessage'](_0x59b3a6['mediaMessage']);return await this[_0x1d44c7(0x175)](_0x59b3a6[_0x1d44c7(0x1a4)],{..._0x3a248c[_0x1d44c7(0x19d)]},_0x59b3a6?.[_0x1d44c7(0x5cc)]);}async[a0_0x5a2dd1(0x5c5)](_0x36425d,_0x144850){const _0x3f8ed8=a0_0x5a2dd1;try{this['logger'][_0x3f8ed8(0x400)](_0x3f8ed8(0x1dd));let _0x4f2c3d,_0x1735d8=_0x144850+'-'+new Date()[_0x3f8ed8(0x5a9)]();this[_0x3f8ed8(0x607)][_0x3f8ed8(0x400)](_0x3f8ed8(0x5ff)+_0x1735d8);let _0x381f31=''+(0x0,$[_0x3f8ed8(0x295)])(this[_0x3f8ed8(0x2b1)],_0x1735d8+_0x3f8ed8(0x430));if(this[_0x3f8ed8(0x607)]['verbose']('Output\x20path:\x20'+_0x381f31),(0x0,k[_0x3f8ed8(0x27b)])(_0x36425d)){this[_0x3f8ed8(0x607)][_0x3f8ed8(0x400)]('Image\x20is\x20base64');let _0x540962=_0x36425d[_0x3f8ed8(0x269)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x577d15=Buffer[_0x3f8ed8(0x398)](_0x540962,_0x3f8ed8(0x401));_0x4f2c3d=''+(0x0,$[_0x3f8ed8(0x295)])(this[_0x3f8ed8(0x2b1)],_0x3f8ed8(0x575)+_0x1735d8+_0x3f8ed8(0x5f4)),this[_0x3f8ed8(0x607)][_0x3f8ed8(0x400)](_0x3f8ed8(0x4c1)+_0x4f2c3d),await(0x0,Ut[_0x3f8ed8(0x5fb)])(_0x577d15)[_0x3f8ed8(0x663)](_0x4f2c3d),this[_0x3f8ed8(0x607)]['verbose'](_0x3f8ed8(0x176));}else{this[_0x3f8ed8(0x607)][_0x3f8ed8(0x400)](_0x3f8ed8(0x155));let _0x540a1c=new Date()[_0x3f8ed8(0x5a9)](),_0x2a97c0=_0x36425d+_0x3f8ed8(0x569)+_0x540a1c;this[_0x3f8ed8(0x607)][_0x3f8ed8(0x400)]('including\x20timestamp\x20in\x20url:\x20'+_0x2a97c0);let _0xc6704c=await ue[_0x3f8ed8(0x5fb)][_0x3f8ed8(0x5c2)](_0x2a97c0,{'responseType':'arraybuffer'});this[_0x3f8ed8(0x607)]['verbose'](_0x3f8ed8(0x6a1));let _0x124c47=Buffer[_0x3f8ed8(0x398)](_0xc6704c['data'],_0x3f8ed8(0x473));_0x4f2c3d=''+(0x0,$['join'])(this['storePath'],_0x3f8ed8(0x575)+_0x1735d8+_0x3f8ed8(0x5f4)),this['logger']['verbose'](_0x3f8ed8(0x4c1)+_0x4f2c3d),await(0x0,Ut[_0x3f8ed8(0x5fb)])(_0x124c47)[_0x3f8ed8(0x663)](_0x4f2c3d),this[_0x3f8ed8(0x607)][_0x3f8ed8(0x400)]('Image\x20created');}return await(0x0,Ut[_0x3f8ed8(0x5fb)])(_0x4f2c3d)[_0x3f8ed8(0x2cc)]()[_0x3f8ed8(0x663)](_0x381f31),this[_0x3f8ed8(0x607)][_0x3f8ed8(0x400)]('Image\x20converted\x20to\x20WebP'),_[_0x3f8ed8(0x252)](_0x4f2c3d),this['logger']['verbose'](_0x3f8ed8(0x136)),_0x381f31;}catch(_0x240674){console[_0x3f8ed8(0x4a6)](_0x3f8ed8(0x202),_0x240674);}}async['mediaSticker'](_0x105dc9){const _0x3c41fa=a0_0x5a2dd1;let _0x50996c=await this[_0x3c41fa(0x5c5)](_0x105dc9[_0x3c41fa(0x47c)]['image'],_0x105dc9[_0x3c41fa(0x1a4)]),_0x4e4105=await this['sendMessageWithTyping'](_0x105dc9[_0x3c41fa(0x1a4)],{'sticker':{'url':_0x50996c}},_0x105dc9?.[_0x3c41fa(0x5cc)]);return _[_0x3c41fa(0x252)](_0x50996c),this[_0x3c41fa(0x607)]['verbose'](_0x3c41fa(0x469)),_0x4e4105;}async[a0_0x5a2dd1(0x46c)](_0x469140){const _0x19cb3b=a0_0x5a2dd1;if(this[_0x19cb3b(0x607)][_0x19cb3b(0x400)](_0x19cb3b(0x440)),!_0x469140[_0x19cb3b(0x5cc)]?.[_0x19cb3b(0x28b)]&&_0x469140[_0x19cb3b(0x5cc)]?.[_0x19cb3b(0x28b)]!==!0x1&&(_0x469140[_0x19cb3b(0x5cc)][_0x19cb3b(0x28b)]=!0x0),_0x469140[_0x19cb3b(0x5cc)]?.['encoding']){let _0x40a1f1=await this[_0x19cb3b(0x58b)](_0x469140[_0x19cb3b(0x61f)][_0x19cb3b(0x2fe)]);if(typeof _0x40a1f1==_0x19cb3b(0x17b)){let _0x39779e=_[_0x19cb3b(0x3f8)](_0x40a1f1)['toString'](_0x19cb3b(0x401)),_0x5f5192=this['sendMessageWithTyping'](_0x469140[_0x19cb3b(0x1a4)],{'audio':Buffer['from'](_0x39779e,'base64'),'ptt':!0x0,'mimetype':'audio/mp4'},{'presence':_0x19cb3b(0x256),'delay':_0x469140?.[_0x19cb3b(0x5cc)]?.['delay']});return _[_0x19cb3b(0x252)](_0x40a1f1),this[_0x19cb3b(0x607)][_0x19cb3b(0x400)](_0x19cb3b(0x247)),_0x5f5192;}else throw new A(_0x40a1f1);}return await this[_0x19cb3b(0x175)](_0x469140[_0x19cb3b(0x1a4)],{'audio':(0x0,k['isURL'])(_0x469140[_0x19cb3b(0x61f)][_0x19cb3b(0x2fe)])?{'url':_0x469140[_0x19cb3b(0x61f)][_0x19cb3b(0x2fe)]}:Buffer['from'](_0x469140['audioMessage'][_0x19cb3b(0x2fe)],_0x19cb3b(0x401)),'ptt':!0x0,'mimetype':_0x19cb3b(0x25c)},{'presence':_0x19cb3b(0x256),'delay':_0x469140?.[_0x19cb3b(0x5cc)]?.[_0x19cb3b(0x41f)]});}async[a0_0x5a2dd1(0x58b)](_0x1607e2){const _0x1978b2=a0_0x5a2dd1;this[_0x1978b2(0x607)][_0x1978b2(0x400)](_0x1978b2(0x3c8));let _0x31dbd9,_0x4a1b2b,_0x278498=(0x0,Lt['v4'])();if(this[_0x1978b2(0x607)][_0x1978b2(0x400)](_0x1978b2(0x2ca)+_0x278498),(0x0,k[_0x1978b2(0x428)])(_0x1607e2)){this[_0x1978b2(0x607)][_0x1978b2(0x400)]('Audio\x20is\x20url'),_0x4a1b2b=''+(0x0,$[_0x1978b2(0x295)])(this[_0x1978b2(0x2b1)],_0x278498+_0x1978b2(0x144)),_0x31dbd9=''+(0x0,$[_0x1978b2(0x295)])(this[_0x1978b2(0x2b1)],'temp-'+_0x278498+_0x1978b2(0x418)),this['logger'][_0x1978b2(0x400)](_0x1978b2(0x432)+_0x4a1b2b),this[_0x1978b2(0x607)][_0x1978b2(0x400)](_0x1978b2(0x485)+_0x31dbd9);let _0xdde94a=new Date()[_0x1978b2(0x5a9)](),_0x498bf3=_0x1607e2+_0x1978b2(0x569)+_0xdde94a;this[_0x1978b2(0x607)]['verbose']('Including\x20timestamp\x20in\x20url:\x20'+_0x498bf3);let _0x5589af=await ue[_0x1978b2(0x5fb)]['get'](_0x498bf3,{'responseType':_0x1978b2(0xef)});this[_0x1978b2(0x607)][_0x1978b2(0x400)](_0x1978b2(0x5eb)),_[_0x1978b2(0x2c0)](_0x31dbd9,_0x5589af[_0x1978b2(0x31e)]);}else{this[_0x1978b2(0x607)][_0x1978b2(0x400)](_0x1978b2(0x3e0)),_0x4a1b2b=''+(0x0,$[_0x1978b2(0x295)])(this[_0x1978b2(0x2b1)],_0x278498+_0x1978b2(0x144)),_0x31dbd9=''+(0x0,$[_0x1978b2(0x295)])(this[_0x1978b2(0x2b1)],_0x1978b2(0x575)+_0x278498+_0x1978b2(0x418)),this[_0x1978b2(0x607)][_0x1978b2(0x400)](_0x1978b2(0x432)+_0x4a1b2b),this[_0x1978b2(0x607)][_0x1978b2(0x400)](_0x1978b2(0x485)+_0x31dbd9);let _0x525971=Buffer[_0x1978b2(0x398)](_0x1607e2,'base64');_[_0x1978b2(0x2c0)](_0x31dbd9,_0x525971),this['logger'][_0x1978b2(0x400)]('Temp\x20audio\x20created');}return this[_0x1978b2(0x607)]['verbose']('Converting\x20audio\x20to\x20mp4'),new Promise((_0x4cc6d8,_0x539402)=>{const _0x3bf24c=_0x1978b2;(0x0,Vt[_0x3bf24c(0x4db)])(uo[_0x3bf24c(0x5fb)]['path']+_0x3bf24c(0x4fc)+_0x31dbd9+'\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-f\x20ipod\x20'+_0x4a1b2b+_0x3bf24c(0x3ac),_0x346c2e=>{const _0x9d8f69=_0x3bf24c;_[_0x9d8f69(0x252)](_0x31dbd9),this['logger'][_0x9d8f69(0x400)](_0x9d8f69(0x674)),_0x346c2e&&_0x539402(_0x346c2e),this[_0x9d8f69(0x607)][_0x9d8f69(0x400)](_0x9d8f69(0x29b)),_0x4cc6d8(_0x4a1b2b);});});}async[a0_0x5a2dd1(0x638)](_0x52ede4){const _0x15cb96=a0_0x5a2dd1;let _0x5bf9f2={},_0x4b4755=_0x15cb96(0x194);if(_0x52ede4[_0x15cb96(0x638)]?.[_0x15cb96(0x297)]){_0x4b4755=_0x52ede4['buttonMessage']['mediaMessage']?.[_0x15cb96(0x283)][_0x15cb96(0x5ee)]()??_0x15cb96(0x194),_0x5bf9f2[_0x15cb96(0x3d9)]=_0x4b4755[_0x15cb96(0x4c6)]()+_0x15cb96(0x53b);let _0x18e12d=await this[_0x15cb96(0x23a)](_0x52ede4[_0x15cb96(0x638)]['mediaMessage']);_0x5bf9f2['message']=_0x18e12d['message'][_0x5bf9f2[_0x15cb96(0x3d9)]],_0x5bf9f2['contentText']='*'+_0x52ede4[_0x15cb96(0x638)][_0x15cb96(0x257)]+_0x15cb96(0x475)+_0x52ede4[_0x15cb96(0x638)][_0x15cb96(0x209)];}let _0x28a154={'text':_0x52ede4[_0x15cb96(0x638)][_0x15cb96(0x100)][_0x15cb96(0x4ce)](_0x262360=>_0x262360[_0x15cb96(0x490)]),'ids':_0x52ede4[_0x15cb96(0x638)][_0x15cb96(0x100)][_0x15cb96(0x4ce)](_0x330b4a=>_0x330b4a[_0x15cb96(0x2af)])};if(!(0x0,k[_0x15cb96(0x24b)])(_0x28a154[_0x15cb96(0x519)])||!(0x0,k[_0x15cb96(0x24b)])(_0x28a154[_0x15cb96(0x656)]))throw new g('Button\x20texts\x20cannot\x20be\x20repeated',_0x15cb96(0x384));return await this['sendMessageWithTyping'](_0x52ede4[_0x15cb96(0x1a4)],{'buttonsMessage':{'text':_0x5bf9f2?.['mediaKey']?void 0x0:_0x52ede4[_0x15cb96(0x638)]['title'],'contentText':_0x5bf9f2?.[_0x15cb96(0x27d)]??_0x52ede4[_0x15cb96(0x638)][_0x15cb96(0x209)],'footerText':_0x52ede4[_0x15cb96(0x638)]?.[_0x15cb96(0x43e)],'buttons':_0x52ede4[_0x15cb96(0x638)][_0x15cb96(0x100)][_0x15cb96(0x4ce)](_0x5e6aaf=>({'buttonText':{'displayText':_0x5e6aaf[_0x15cb96(0x490)]},'buttonId':_0x5e6aaf[_0x15cb96(0x2af)],'type':0x1})),'headerType':w[_0x15cb96(0x5b2)][_0x15cb96(0x53b)]['ButtonsMessage'][_0x15cb96(0x6b1)][_0x4b4755],[_0x5bf9f2?.[_0x15cb96(0x3d9)]]:_0x5bf9f2?.[_0x15cb96(0x19d)]}},_0x52ede4?.[_0x15cb96(0x5cc)]);}async['locationMessage'](_0xee2426){const _0x37b9a4=a0_0x5a2dd1;return await this[_0x37b9a4(0x175)](_0xee2426[_0x37b9a4(0x1a4)],{'locationMessage':{'degreesLatitude':_0xee2426['locationMessage'][_0x37b9a4(0x33e)],'degreesLongitude':_0xee2426['locationMessage'][_0x37b9a4(0x127)],'name':_0xee2426['locationMessage']?.[_0x37b9a4(0x67e)],'address':_0xee2426['locationMessage']?.[_0x37b9a4(0x518)]}},_0xee2426?.[_0x37b9a4(0x5cc)]);}async[a0_0x5a2dd1(0x23d)](_0x590373){const _0x29d7d2=a0_0x5a2dd1;return await this[_0x29d7d2(0x175)](_0x590373[_0x29d7d2(0x1a4)],{'listMessage':{'title':_0x590373['listMessage'][_0x29d7d2(0x257)],'description':_0x590373[_0x29d7d2(0x23d)]['description'],'buttonText':_0x590373[_0x29d7d2(0x23d)]?.['buttonText'],'footerText':_0x590373[_0x29d7d2(0x23d)]?.[_0x29d7d2(0x43e)],'sections':_0x590373[_0x29d7d2(0x23d)][_0x29d7d2(0x651)],'listType':0x1}},_0x590373?.[_0x29d7d2(0x5cc)]);}async[a0_0x5a2dd1(0x36b)](_0x389407){const _0xdcbc09=a0_0x5a2dd1;let _0x88871b={},_0x5b21f7=_0xaa1027=>{const _0x253b9f=a0_0x5d83;let _0x389dde=_0x253b9f(0x5b5)+_0xaa1027[_0x253b9f(0x595)]+_0x253b9f(0xf5)+_0xaa1027[_0x253b9f(0x595)]+'\x0a';_0xaa1027[_0x253b9f(0x35a)]&&(_0x389dde+=_0x253b9f(0x3dc)+_0xaa1027['organization']+';\x0a'),_0xaa1027[_0x253b9f(0x584)]&&(_0x389dde+=_0x253b9f(0x352)+_0xaa1027[_0x253b9f(0x584)]+'\x0a'),_0xaa1027[_0x253b9f(0x675)]&&(_0x389dde+=_0x253b9f(0x560)+_0xaa1027[_0x253b9f(0x675)]+'\x0a');let _0x48d23a='';return _0xaa1027[_0x253b9f(0x4e0)]&&_0xaa1027['phoneNumber'][_0x253b9f(0x60f)]('|')[_0x253b9f(0x1b3)]((_0x4d2d4a,_0x2ca27a)=>{const _0x532d86=_0x253b9f;let _0x2f7a01=this[_0x532d86(0x3b0)](_0x4d2d4a)[_0x532d86(0x269)](_0x532d86(0x3b5),'');_0x48d23a+=_0x532d86(0x2d3)+(_0x2ca27a+0x1)+'.TEL;waid='+_0x2f7a01+':'+_0x4d2d4a+_0x532d86(0x648)+(_0x2ca27a+0x1)+'.X-ABLabel:Celular\x0a';}),_0x389dde+=_0x48d23a+_0x253b9f(0x264),_0x389dde;};return _0x389407['contactMessage']['length']===0x1?_0x88871b[_0xdcbc09(0x36b)]={'displayName':_0x389407[_0xdcbc09(0x36b)][0x0][_0xdcbc09(0x595)],'vcard':_0x5b21f7(_0x389407[_0xdcbc09(0x36b)][0x0])}:_0x88871b[_0xdcbc09(0x52f)]={'displayName':_0x389407[_0xdcbc09(0x36b)][_0xdcbc09(0x1c0)]+_0xdcbc09(0x425),'contacts':_0x389407['contactMessage']['map'](_0x96d1b0=>({'displayName':_0x96d1b0['fullName'],'vcard':_0x5b21f7(_0x96d1b0)}))},await this[_0xdcbc09(0x175)](_0x389407[_0xdcbc09(0x1a4)],{..._0x88871b},_0x389407?.[_0xdcbc09(0x5cc)]);}async[a0_0x5a2dd1(0x1a1)](_0x3bf6ef){const _0x45c2dd=a0_0x5a2dd1;return await this[_0x45c2dd(0x175)](_0x3bf6ef[_0x45c2dd(0x1a1)][_0x45c2dd(0x3a9)]['remoteJid'],{'reactionMessage':{'key':_0x3bf6ef['reactionMessage'][_0x45c2dd(0x3a9)],'text':_0x3bf6ef[_0x45c2dd(0x1a1)]['reaction']}});}async['whatsappNumber'](_0x218a08){const _0x1ea119=a0_0x5a2dd1;let _0xbf0399=[];for await(let _0x5254eb of _0x218a08[_0x1ea119(0x50b)]){let _0x35135d=this[_0x1ea119(0x3b0)](_0x5254eb);if((0x0,w[_0x1ea119(0x616)])(_0x35135d)){let _0x44c1c7=await this['findGroup']({'groupJid':_0x35135d},_0x1ea119(0x107));_0xbf0399['push'](new fe(_0x44c1c7[_0x1ea119(0x5a5)]['id'],!!_0x44c1c7?.[_0x1ea119(0x5a5)]['id'],_0x44c1c7?.[_0x1ea119(0x5a5)][_0x1ea119(0x2bb)]));}else try{let _0x5df0f8=(await this[_0x1ea119(0x6c6)][_0x1ea119(0x56a)](_0x35135d))[0x0];_0xbf0399[_0x1ea119(0x125)](new fe(_0x5df0f8['jid'],_0x5df0f8[_0x1ea119(0x36e)]));}catch{_0xbf0399[_0x1ea119(0x125)](new fe(_0x5254eb,!0x1));}}return _0xbf0399;}async[a0_0x5a2dd1(0x296)](_0x194d25){const _0x1198b2=a0_0x5a2dd1;try{let _0xc22859=_0x194d25[_0x1198b2(0x36f)]['filter'](_0x4a9326=>(0x0,w[_0x1198b2(0x616)])(_0x4a9326[_0x1198b2(0x2f8)])||(0x0,w[_0x1198b2(0x3a7)])(_0x4a9326[_0x1198b2(0x2f8)]))[_0x1198b2(0x4ce)](_0x3c5ee9=>({'remoteJid':_0x3c5ee9[_0x1198b2(0x2f8)],'fromMe':_0x3c5ee9[_0x1198b2(0x46e)],'id':_0x3c5ee9['id']}));await this[_0x1198b2(0x6c6)][_0x1198b2(0x36f)](_0xc22859);let _0x3c7c01=_0xc22859[_0x1198b2(0x4ce)](_0x13dc38=>this[_0x1198b2(0x697)](_0x13dc38,_0x13dc38[_0x1198b2(0x2f8)],{'status':_0x1198b2(0x4ad),'owner':this['instance']['wuid']})),_0x159cb4=_0xc22859[_0x1198b2(0x4ce)](_0x1390c0=>I[_0x1198b2(0x233)]({'id':_0x1390c0[_0x1198b2(0x2f8)],'owner':this[_0x1198b2(0x632)]['wuid']},{'$set':{'unreadcount':0x0}},{'new':!0x0})),[_0x4f158e,_0x4bc7f2]=await Promise[_0x1198b2(0x3f4)]([Promise[_0x1198b2(0x3f4)](_0x3c7c01),Promise['all'](_0x159cb4)]);return _0x4bc7f2[_0x1198b2(0x693)](_0x189109=>_0x189109!==null)[_0x1198b2(0x1b3)](_0x3b3bec=>{const _0x30be38=_0x1198b2;G(this[_0x30be38(0x281)],'chats',{'chat':_0x3b3bec});}),{'message':_0x1198b2(0x491),'read':_0x1198b2(0x21d)};}catch(_0x50e811){throw console[_0x1198b2(0x4a6)](_0x1198b2(0x4ab),_0x50e811),new A('Read\x20messages\x20fail',_0x50e811['toString']());}}async[a0_0x5a2dd1(0x14a)](_0x362b6d){const _0x2d7c8a=a0_0x5a2dd1;let _0x2a794f=await this[_0x2d7c8a(0x3a2)]({'where':{'key':{'remoteJid':_0x362b6d},'owner':this[_0x2d7c8a(0x632)][_0x2d7c8a(0x67e)]}}),_0xee55de=_0x2a794f[_0x2d7c8a(0x2d5)]();for(let _0x45f0d6 of _0x2a794f)_0x45f0d6[_0x2d7c8a(0x503)]>=_0xee55de['messageTimestamp']&&(_0xee55de=_0x45f0d6);return _0xee55de;}async[a0_0x5a2dd1(0x4cc)](_0x19ac72){const _0x2257ab=a0_0x5a2dd1;this['logger'][_0x2257ab(0x400)](_0x2257ab(0x322));try{let _0x20cba3=_0x19ac72['lastMessage'],_0x2162ea=_0x19ac72[_0x2257ab(0x2ef)];if(!_0x20cba3&&_0x2162ea?_0x20cba3=await this[_0x2257ab(0x14a)](_0x2162ea):(_0x20cba3=_0x19ac72[_0x2257ab(0x14f)],_0x20cba3[_0x2257ab(0x503)]=_0x20cba3?.['messageTimestamp']??Date[_0x2257ab(0x468)](),_0x2162ea=_0x20cba3?.[_0x2257ab(0x3a9)]?.[_0x2257ab(0x2f8)]),!_0x20cba3||Object[_0x2257ab(0x330)](_0x20cba3)[_0x2257ab(0x1c0)]===0x0)throw new x(_0x2257ab(0x56e));await this['client'][_0x2257ab(0x387)]({'archive':_0x19ac72[_0x2257ab(0x342)],'lastMessages':[_0x20cba3]},this[_0x2257ab(0x3b0)](_0x2162ea));let _0x297eab=await I[_0x2257ab(0x233)]({'id':_0x20cba3?.['key']?.[_0x2257ab(0x2f8)],'owner':this[_0x2257ab(0x632)][_0x2257ab(0x6b5)]},{'$set':{'archived':_0x19ac72[_0x2257ab(0x342)]}},{'new':!0x0});return _0x297eab&&G(this['instanceName'],'chats',{'chat':_0x297eab}),{'chatId':_0x2162ea,'archived':_0x19ac72['archive']};}catch(_0xdc1143){throw new A({'archived':!0x1,'message':[_0x2257ab(0xf9),_0xdc1143[_0x2257ab(0x41a)]()]});}}async[a0_0x5a2dd1(0x3ed)](_0x4c6484){const _0x5999f3=a0_0x5a2dd1;try{let _0x3d613f=await this['client']['sendMessage'](_0x4c6484['remoteJid'],{'delete':_0x4c6484});try{let _0xacd43f=await this['updateMessage'](_0x4c6484,_0x4c6484[_0x5999f3(0x2f8)],{'status':_0x5999f3(0x2ba),'owner':this[_0x5999f3(0x632)][_0x5999f3(0x6b5)]});this['logger']['verbose'](this[_0x5999f3(0x281)]+'\x20('+this['instance'][_0x5999f3(0x6b5)]+'):\x20updateResult:'+_0xacd43f);}catch(_0x422dbb){console[_0x5999f3(0x4a6)](_0x5999f3(0x3d7),_0x422dbb);}return _0x3d613f;}catch(_0x3801eb){throw new A('Error\x20while\x20deleting\x20message\x20for\x20everyone',_0x3801eb?.[_0x5999f3(0x41a)]());}}async['getBase64FromMediaMessage'](_0x33a818){const _0x4a023a=a0_0x5a2dd1;try{let _0x326117=_0x33a818?.[_0x4a023a(0x19d)]?_0x33a818:await this[_0x4a023a(0x5f1)](_0x33a818[_0x4a023a(0x3a9)],!0x0);for(let _0x1c3c31 of Zs)_0x326117[_0x4a023a(0x19d)][_0x1c3c31]&&(_0x326117[_0x4a023a(0x19d)]=_0x326117[_0x4a023a(0x19d)][_0x1c3c31][_0x4a023a(0x19d)]);let _0x23f1f5,_0x314a45;for(let _0x4520ac of Xs)if(_0x23f1f5=_0x326117[_0x4a023a(0x19d)][_0x4520ac],_0x23f1f5){_0x314a45=_0x4520ac;break;}if(!_0x23f1f5)throw _0x4a023a(0x223);typeof _0x23f1f5[_0x4a023a(0x3d9)]==_0x4a023a(0x645)&&(_0x326117['message']=JSON[_0x4a023a(0x26b)](JSON[_0x4a023a(0x561)](_0x326117[_0x4a023a(0x19d)])));let _0x2ede8f=await(0x0,w[_0x4a023a(0x3f0)])({'key':_0x326117?.['key'],'message':_0x326117?.['message']},_0x4a023a(0x59a),{},{'logger':(0x0,kt['default'])({'level':'error'}),'reuploadRequest':this['client']['updateMediaMessage']});if(!(_0x2ede8f instanceof Buffer))throw new Error(_0x4a023a(0x411));let _0x5204e0=this[_0x4a023a(0x2a2)]['get'](_0x4a023a(0x1e4)),_0x563452,_0x3d8946;if(_0x23f1f5[_0x4a023a(0x3af)])_0x563452=_0x23f1f5[_0x4a023a(0x3af)];else{let _0x1dc5d2=_0x23f1f5['mimetype']?.[_0x4a023a(0xeb)](/\/(\w+)/),_0x4662b5=_0x1dc5d2?_0x1dc5d2[0x1]:null;if(!_0x4662b5)throw new Error(_0x4a023a(0x167));_0x563452=(0x0,Lt['v4'])()+'.'+_0x4662b5;}_0x314a45===_0x4a023a(0x61f)&&_0x23f1f5[_0x4a023a(0x303)]==='audio/ogg'?(_0x563452=(0x0,Lt['v4'])()+_0x4a023a(0x447),_0x3d8946=_0x4a023a(0x332)+await this['convertaudio'](_0x2ede8f['toString']('base64'))):(await this['saveMediaToFile'](_0x2ede8f,_0x563452),_0x3d8946=_0x4a023a(0x332)+_0x563452);let _0x25bc67=this['configService'][_0x4a023a(0x5c2)](_0x4a023a(0x635)),_0x2b0768=this[_0x4a023a(0x2a2)][_0x4a023a(0x5c2)](_0x4a023a(0x6b6))[_0x4a023a(0x483)],_0x38b614=_0x25bc67&&_0x25bc67[_0x4a023a(0x222)][_0x4a023a(0x60f)]('/')[0x4];_0x2b0768===0x1bb&&(_0x3d8946=''+(_0x4a023a(0x40a)+_0x38b614)+_0x3d8946);let _0xae3d02=0xc*0x3c*0x3c*0x3e8;if(_0x5204e0[_0x4a023a(0x159)]){let _0x4dcbfd={'where':{'key':{'id':_0x326117[_0x4a023a(0x3a9)]['id'],'remoteJid':_0x326117[_0x4a023a(0x3a9)]['remoteJid'],'fromMe':_0x326117[_0x4a023a(0x3a9)]['fromMe']},'owner':this[_0x4a023a(0x632)][_0x4a023a(0x6b5)]}};_0x326117[_0x4a023a(0x3a9)][_0x4a023a(0x2f8)][_0x4a023a(0x474)](_0x4a023a(0x30f))&&(_0x4dcbfd[_0x4a023a(0x16d)][_0x4a023a(0x3a9)]['participant']=_0x326117[_0x4a023a(0x3a9)][_0x4a023a(0x4f1)]);let _0x367aa5={'message_normalized.fileUrl':_0x3d8946,'message_normalized.expires_fileUrl':Date['now']()+_0xae3d02};try{let _0x2da330=await this[_0x4a023a(0x104)]['message'][_0x4a023a(0x6b8)](_0x4dcbfd,_0x367aa5);_0x2da330&&G(this[_0x4a023a(0x281)],'messages',{'message':_0x2da330});}catch{}}return{'mediaType':_0x314a45,'fileName':_0x23f1f5[_0x4a023a(0x3af)],'caption':_0x23f1f5[_0x4a023a(0x609)],'size':{'fileLength':_0x23f1f5[_0x4a023a(0x173)],'height':_0x23f1f5[_0x4a023a(0x512)],'width':_0x23f1f5[_0x4a023a(0x4f8)]},'mimetype':_0x23f1f5[_0x4a023a(0x303)],'base64':_0x2ede8f[_0x4a023a(0x41a)](_0x4a023a(0x401)),'fileUrl':_0x3d8946,'expires_fileUrl':Date[_0x4a023a(0x468)]()+_0xae3d02};}catch(_0x5e855d){throw this[_0x4a023a(0x607)][_0x4a023a(0x4a6)](this[_0x4a023a(0x281)]+'\x20('+this[_0x4a023a(0x632)]['wuid']+_0x4a023a(0x49a)+_0x5e855d),new g(_0x5e855d[_0x4a023a(0x41a)]());}}async[a0_0x5a2dd1(0x27c)](_0x57f4d4,_0x567e29){const _0x391e8e=a0_0x5a2dd1;console['log'](_0x391e8e(0x3c2),__dirname),console[_0x391e8e(0x6aa)](_0x391e8e(0x489),_0x567e29);let _0x439762=$[_0x391e8e(0x5fb)][_0x391e8e(0x295)](__dirname,'downloads');console[_0x391e8e(0x6aa)](_0x391e8e(0x39d),_0x439762),_['existsSync'](_0x439762)||(this[_0x391e8e(0x607)][_0x391e8e(0x6aa)](_0x391e8e(0x4f7)),_[_0x391e8e(0x4b7)](_0x439762,{'recursive':!0x0}));let _0x17d156=$[_0x391e8e(0x5fb)][_0x391e8e(0x295)](_0x439762,_0x567e29);return console[_0x391e8e(0x6aa)](_0x391e8e(0x35c),_0x17d156),new Promise((_0x923d8d,_0x38623f)=>{const _0x5bfd3e=_0x391e8e;_[_0x5bfd3e(0x3c3)](_0x17d156,_0x57f4d4,_0x136dd0=>{const _0x287a89=_0x5bfd3e;_0x136dd0?(this[_0x287a89(0x607)][_0x287a89(0x4a6)](_0x287a89(0x5a1)+_0x136dd0['message']),_0x38623f(_0x136dd0)):(this[_0x287a89(0x607)]['log'](_0x287a89(0x11a)+_0x17d156),_0x923d8d(_0x17d156));});});}async[a0_0x5a2dd1(0x2e5)](_0x399889){const _0x7779c7=a0_0x5a2dd1;return _0x399889?.[_0x7779c7(0x16d)]?_0x399889[_0x7779c7(0x16d)][_0x7779c7(0x53e)]=this[_0x7779c7(0x632)][_0x7779c7(0x6b5)]:_0x399889={'where':{'owner':this[_0x7779c7(0x632)]['wuid']}},await this[_0x7779c7(0x104)][_0x7779c7(0x1fd)][_0x7779c7(0x40e)](_0x399889);}async[a0_0x5a2dd1(0x3a2)](_0x1204d6){const _0x459f53=a0_0x5a2dd1;return _0x1204d6?.['where']?_0x1204d6[_0x459f53(0x16d)][_0x459f53(0x53e)]=this[_0x459f53(0x632)]['wuid']:_0x1204d6={'where':{'owner':this[_0x459f53(0x632)]['wuid']},'limit':_0x1204d6?.[_0x459f53(0x16b)]},await this[_0x459f53(0x104)][_0x459f53(0x19d)]['find'](_0x1204d6);}async[a0_0x5a2dd1(0x54d)](_0x242549){const _0x5abf35=a0_0x5a2dd1;return _0x242549?.[_0x5abf35(0x16d)]?_0x242549[_0x5abf35(0x16d)]['owner']=this[_0x5abf35(0x632)]['wuid']:_0x242549={'where':{'owner':this[_0x5abf35(0x632)][_0x5abf35(0x6b5)]},'limit':_0x242549?.[_0x5abf35(0x16b)]},await this[_0x5abf35(0x104)][_0x5abf35(0x49b)]['find'](_0x242549);}async['fetchChats'](){const _0x140af3=a0_0x5a2dd1;return await this[_0x140af3(0x104)][_0x140af3(0x2ef)][_0x140af3(0x40e)]({'where':{'owner':this[_0x140af3(0x632)][_0x140af3(0x6b5)]}});}async[a0_0x5a2dd1(0x476)](){const _0x3546e4=a0_0x5a2dd1;return await this['client'][_0x3546e4(0x476)]();}async[a0_0x5a2dd1(0x10e)](_0x52e1ed){const _0x282a4e=a0_0x5a2dd1;try{return await this[_0x282a4e(0x6c6)][_0x282a4e(0x49f)](_0x52e1ed[_0x282a4e(0x3bd)][_0x282a4e(0x2eb)]),await this['client'][_0x282a4e(0x37d)](_0x52e1ed[_0x282a4e(0x3bd)][_0x282a4e(0x4eb)]),await this['client'][_0x282a4e(0x337)](_0x52e1ed[_0x282a4e(0x3bd)]['status']),await this[_0x282a4e(0x6c6)]['updateOnlinePrivacy'](_0x52e1ed[_0x282a4e(0x3bd)][_0x282a4e(0x683)]),await this[_0x282a4e(0x6c6)][_0x282a4e(0x4cf)](_0x52e1ed[_0x282a4e(0x3bd)]['last']),await this['client'][_0x282a4e(0x1bd)](_0x52e1ed['privacySettings'][_0x282a4e(0x203)]),this['client']?.['ws']?.[_0x282a4e(0x254)](),{'update':_0x282a4e(0x21d),'data':{'readreceipts':_0x52e1ed['privacySettings'][_0x282a4e(0x2eb)],'profile':_0x52e1ed[_0x282a4e(0x3bd)][_0x282a4e(0x4eb)],'status':_0x52e1ed[_0x282a4e(0x3bd)][_0x282a4e(0x50a)],'online':_0x52e1ed[_0x282a4e(0x3bd)][_0x282a4e(0x683)],'last':_0x52e1ed[_0x282a4e(0x3bd)]['last'],'groupadd':_0x52e1ed['privacySettings'][_0x282a4e(0x203)]}};}catch(_0x959d32){throw new A('Error\x20updating\x20privacy\x20settings',_0x959d32['toString']());}}async[a0_0x5a2dd1(0x4f5)](_0x257bf2){const _0x501df3=a0_0x5a2dd1;let _0x331523=_0x257bf2?this['createJid'](_0x257bf2):this[_0x501df3(0x6c6)]?.[_0x501df3(0x184)]?.['id'];this['logger'][_0x501df3(0x400)]('Getting\x20profile\x20with\x20jid:\x20'+_0x331523);try{if(this[_0x501df3(0x607)]['verbose'](_0x501df3(0x355)),_0x257bf2){let _0x11da64=(await this[_0x501df3(0x3ee)]({'numbers':[_0x331523]}))?.[_0x501df3(0x211)](),_0x5efcfc=await this['profilePicture'](_0x11da64?.[_0x501df3(0x479)]),_0x3f94a9=await this['getStatus'](_0x11da64?.[_0x501df3(0x479)]),_0x5815de=await this['fetchBusinessProfile'](_0x11da64?.['jid']);return{'wuid':_0x11da64?.[_0x501df3(0x479)]||_0x331523,'name':_0x11da64?.[_0x501df3(0x67e)],'numberExists':_0x11da64?.['exists'],'picture':_0x5efcfc?.[_0x501df3(0x5e6)],'status':_0x3f94a9?.[_0x501df3(0x50a)],'isBusiness':_0x5815de[_0x501df3(0x5a4)],'email':_0x5815de?.['email'],'description':_0x5815de?.['description'],'website':_0x5815de?.[_0x501df3(0x419)]?.[_0x501df3(0x211)]()};}}catch{return this['logger'][_0x501df3(0x400)](_0x501df3(0x4bf)),{'wuid':_0x331523,'name':null,'picture':null,'status':null,'os':null,'isBusiness':!0x1};}}async[a0_0x5a2dd1(0x66b)](_0x3942f7){const _0x508a64=a0_0x5a2dd1;let _0x5bd3dc=_0x3942f7?this[_0x508a64(0x3b0)](_0x3942f7):this[_0x508a64(0x6c6)]?.[_0x508a64(0x184)]?.['id'];this[_0x508a64(0x607)][_0x508a64(0x400)](_0x508a64(0x4cb)+_0x5bd3dc);let _0x111815=await Fe[_0x508a64(0x34c)]({'id':_0x5bd3dc}),_0x3e81fa=_0x111815?_0x111815[_0x508a64(0x688)]:null;try{let _0x2442aa=(await this[_0x508a64(0x3ee)]({'numbers':[_0x5bd3dc]}))?.['shift'](),_0x2cdad9=await this[_0x508a64(0x3d6)](_0x2442aa?.[_0x508a64(0x479)]),_0x34aa45=await this['getStatus'](_0x2442aa?.[_0x508a64(0x479)]),_0x38ad1a=await this[_0x508a64(0x3f2)](_0x2442aa?.[_0x508a64(0x479)]),_0x13d054={'imagechat':_0x2cdad9?.[_0x508a64(0x5e6)],'contactname':_0x3e81fa||null,'status':_0x34aa45?.[_0x508a64(0x50a)],'isBusiness':_0x38ad1a[_0x508a64(0x5a4)],'email':_0x38ad1a?.['email'],'description':_0x38ad1a?.['description'],'website':_0x38ad1a?.['website']?.[_0x508a64(0x211)](),'lastcache':Date[_0x508a64(0x468)]()},_0x57c654=await I[_0x508a64(0x233)]({'id':_0x5bd3dc,'owner':this[_0x508a64(0x632)]['wuid']},{'$set':_0x13d054,'$setOnInsert':{'name':_0x2442aa?.[_0x508a64(0x67e)]||null}},{'upsert':!0x0,'new':!0x0}),_0x2dcd90={'owner':this[_0x508a64(0x632)][_0x508a64(0x6b5)],'id':_0x5bd3dc,'profilePictureUrl':_0x2cdad9?.['profilePictureUrl'],'status':_0x34aa45?.[_0x508a64(0x50a)]};return this[_0x508a64(0x104)][_0x508a64(0x1fd)][_0x508a64(0x6b8)]([_0x2dcd90],this[_0x508a64(0x632)][_0x508a64(0x6b5)]),_0x57c654&&G(this['instanceName'],'chats',{'chat':_0x57c654}),{'wuid':_0x2442aa?.[_0x508a64(0x479)]||_0x5bd3dc,'name':_0x2442aa?.[_0x508a64(0x67e)],'numberExists':_0x2442aa?.[_0x508a64(0x36e)],'picture':_0x2cdad9?.[_0x508a64(0x5e6)],'status':_0x34aa45?.[_0x508a64(0x50a)],'isBusiness':_0x38ad1a[_0x508a64(0x5a4)],'email':_0x38ad1a?.[_0x508a64(0x584)],'description':_0x38ad1a?.['description'],'website':_0x38ad1a?.[_0x508a64(0x419)]?.['shift']()};}catch(_0xd5c9f4){return this['logger'][_0x508a64(0x4a6)](_0x508a64(0x1d1)+_0xd5c9f4),{};}}async['fetchBusinessProfile'](_0x1e2aec){const _0x4cf067=a0_0x5a2dd1;this[_0x4cf067(0x607)]['verbose']('Fetching\x20business\x20profile');try{let _0x574d45=_0x1e2aec?this[_0x4cf067(0x3b0)](_0x1e2aec):this['instance'][_0x4cf067(0x6b5)],_0x36f685=await this[_0x4cf067(0x6c6)]['getBusinessProfile'](_0x574d45);return this['logger'][_0x4cf067(0x400)]('Trying\x20to\x20get\x20business\x20profile'),_0x36f685?(this['logger'][_0x4cf067(0x400)](_0x4cf067(0x258)),{'isBusiness':!0x0,..._0x36f685}):{'isBusiness':!0x1,'message':_0x4cf067(0x4b2),...(await this['whatsappNumber']({'numbers':[_0x574d45]}))?.[_0x4cf067(0x211)]()};}catch(_0x1063aa){throw new A(_0x4cf067(0x2f0),_0x1063aa[_0x4cf067(0x41a)]());}}async[a0_0x5a2dd1(0x358)](_0x130344){const _0xb8963c=a0_0x5a2dd1;let _0x310586=this['createJid'](_0x130344);try{return{'wuid':_0x310586,'status':(await this[_0xb8963c(0x6c6)][_0xb8963c(0x239)](_0x310586))?.[_0xb8963c(0x50a)]};}catch{return{'wuid':_0x310586,'status':null};}}async[a0_0x5a2dd1(0x5db)](_0x4dc5c6){const _0x3b033d=a0_0x5a2dd1;try{return await this['client'][_0x3b033d(0x5db)](_0x4dc5c6),{'update':_0x3b033d(0x21d)};}catch(_0x26d76b){throw new A('Error\x20updating\x20profile\x20name',_0x26d76b[_0x3b033d(0x41a)]());}}async[a0_0x5a2dd1(0x6bd)](_0x20bee2){const _0x988c5e=a0_0x5a2dd1;try{return await this['client'][_0x988c5e(0x6bd)](_0x20bee2),{'update':'success'};}catch(_0x555eec){throw new A('Error\x20updating\x20profile\x20status',_0x555eec[_0x988c5e(0x41a)]());}}async[a0_0x5a2dd1(0x382)](_0x3427a7){const _0x1115e8=a0_0x5a2dd1;try{let _0x2510db;if((0x0,k[_0x1115e8(0x428)])(_0x3427a7)){let _0x840000=new Date()['getTime'](),_0x229bbd=_0x3427a7+_0x1115e8(0x569)+_0x840000;_0x2510db=(await ue['default'][_0x1115e8(0x5c2)](_0x229bbd,{'responseType':_0x1115e8(0xef)}))[_0x1115e8(0x31e)];}else{if((0x0,k[_0x1115e8(0x27b)])(_0x3427a7))_0x2510db=Buffer[_0x1115e8(0x398)](_0x3427a7,'base64');else throw new g(_0x1115e8(0x16f));}return await this[_0x1115e8(0x6c6)][_0x1115e8(0x382)](this[_0x1115e8(0x632)][_0x1115e8(0x6b5)],_0x2510db),{'update':_0x1115e8(0x21d)};}catch(_0xf13d14){throw new A(_0x1115e8(0x5ab),_0xf13d14[_0x1115e8(0x41a)]());}}async[a0_0x5a2dd1(0x1d8)](){const _0x4e4deb=a0_0x5a2dd1;try{return await this['client'][_0x4e4deb(0x1d8)](this[_0x4e4deb(0x632)][_0x4e4deb(0x6b5)]),{'update':_0x4e4deb(0x21d)};}catch(_0x10575e){throw new A(_0x4e4deb(0x151),_0x10575e[_0x4e4deb(0x41a)]());}}async[a0_0x5a2dd1(0x277)](_0x1919c6){const _0x2fe199=a0_0x5a2dd1;try{let _0x3e06bf=_0x1919c6[_0x2fe199(0x525)][_0x2fe199(0x4ce)](_0x28294f=>this[_0x2fe199(0x3b0)](_0x28294f)),{id:_0x21b48c}=await this[_0x2fe199(0x6c6)][_0x2fe199(0x55c)](_0x1919c6[_0x2fe199(0x2bb)],_0x3e06bf);return _0x1919c6?.[_0x2fe199(0x209)]&&await this[_0x2fe199(0x6c6)][_0x2fe199(0xfd)](_0x21b48c,_0x1919c6[_0x2fe199(0x209)]),{'metadata':await this[_0x2fe199(0x6c6)][_0x2fe199(0x195)](_0x21b48c)};}catch(_0x446090){throw this[_0x2fe199(0x607)][_0x2fe199(0x4a6)](this[_0x2fe199(0x281)]+'\x20('+this[_0x2fe199(0x632)][_0x2fe199(0x6b5)]+_0x2fe199(0x49a)+_0x446090),new A('Error\x20creating\x20group',_0x446090[_0x2fe199(0x41a)]());}}async[a0_0x5a2dd1(0x385)](_0x669048){const _0x31e5d7=a0_0x5a2dd1;try{let _0x51e543;if((0x0,k['isURL'])(_0x669048[_0x31e5d7(0x625)])){let _0x4b02e0=new Date()[_0x31e5d7(0x5a9)](),_0x41d966=_0x669048[_0x31e5d7(0x625)]+'?timestamp='+_0x4b02e0;_0x51e543=(await ue[_0x31e5d7(0x5fb)]['get'](_0x41d966,{'responseType':_0x31e5d7(0xef)}))[_0x31e5d7(0x31e)];}else{if((0x0,k[_0x31e5d7(0x27b)])(_0x669048[_0x31e5d7(0x625)]))_0x51e543=Buffer[_0x31e5d7(0x398)](_0x669048[_0x31e5d7(0x625)],_0x31e5d7(0x401));else throw new g(_0x31e5d7(0x16f));}return await this[_0x31e5d7(0x6c6)][_0x31e5d7(0x382)](_0x669048[_0x31e5d7(0x26e)],_0x51e543),{'update':'success'};}catch(_0x214c46){throw new A(_0x31e5d7(0x6ba),_0x214c46[_0x31e5d7(0x41a)]());}}async['findGroup'](_0x80ee4e,_0x2e35eb=a0_0x5a2dd1(0x2cd)){const _0x5b91c9=a0_0x5a2dd1;try{let _0x3aa98b=await this[_0x5b91c9(0x6c6)][_0x5b91c9(0x195)](_0x80ee4e['groupJid']),_0x4dcbb3=null;try{_0x4dcbb3=(await this['profilePicture'](_0x80ee4e[_0x5b91c9(0x26e)]))[_0x5b91c9(0x5e6)];}catch(_0x36620b){this[_0x5b91c9(0x607)]['verbose'](this[_0x5b91c9(0x281)]+'\x20('+this[_0x5b91c9(0x632)][_0x5b91c9(0x6b5)]+_0x5b91c9(0x646)+_0x80ee4e[_0x5b91c9(0x26e)]+':\x20'+_0x36620b['toString']());}let _0x176a72=await I['findOneAndUpdate']({'id':_0x80ee4e[_0x5b91c9(0x26e)],'owner':this[_0x5b91c9(0x632)]['wuid']},{'$set':{'imagechat':_0x4dcbb3,'name':_0x3aa98b[_0x5b91c9(0x2bb)],'group_size':_0x3aa98b[_0x5b91c9(0x51c)],'group_announce':_0x3aa98b[_0x5b91c9(0x356)],'lastcache':Date[_0x5b91c9(0x468)]()}},{'new':!0x0,'upsert':!0x0});return _0x176a72&&G(this['instanceName'],'chats',{'chat':_0x176a72}),{'metadata':_0x3aa98b,'image':_0x4dcbb3};}catch(_0x549c32){if(_0x2e35eb===_0x5b91c9(0x107))return;throw new x(_0x5b91c9(0x3c6),_0x549c32[_0x5b91c9(0x41a)]());}}async[a0_0x5a2dd1(0x42a)](_0x12e284){const _0x113f22=a0_0x5a2dd1;try{return await this[_0x113f22(0x6c6)]['groupUpdateDescription'](_0x12e284[_0x113f22(0x26e)],_0x12e284[_0x113f22(0x209)]),{'update':_0x113f22(0x21d)};}catch(_0x453e27){throw new A(_0x113f22(0x37c),_0x453e27[_0x113f22(0x41a)]());}}async[a0_0x5a2dd1(0x593)](_0x4b3853){const _0x2dd381=a0_0x5a2dd1;try{return await this['client'][_0x2dd381(0x1da)](_0x4b3853[_0x2dd381(0x26e)],_0x4b3853['name']),{'update':_0x2dd381(0x21d)};}catch(_0x1a02f7){throw new A(_0x2dd381(0x63d),_0x1a02f7[_0x2dd381(0x41a)]());}}async[a0_0x5a2dd1(0x1ca)](_0x3afc54){const _0x77884a=a0_0x5a2dd1;try{return await this[_0x77884a(0x6c6)]['groupSettingUpdate'](_0x3afc54[_0x77884a(0x26e)],_0x3afc54['setting']),{'update':_0x77884a(0x21d)};}catch(_0x231c63){throw new A('Error\x20change\x20group\x20setting',_0x231c63['toString']());}}async[a0_0x5a2dd1(0x2e4)](){const _0x585e81=a0_0x5a2dd1;try{let _0x4eb4cf=[],_0x5a423b=await this[_0x585e81(0x6c6)][_0x585e81(0x11e)](),_0x51d46c=Object['values'](_0x5a423b),_0x212961=_0x51d46c[_0x585e81(0x693)](_0x45d3ca=>(0x0,w[_0x585e81(0x616)])(_0x45d3ca?.['id']))[_0x585e81(0x4ce)](async _0x3b395e=>{const _0x13f920=_0x585e81;try{return await this[_0x13f920(0x6c6)]['profilePictureUrl'](_0x3b395e['id'],'preview');}catch(_0x3264c1){return this[_0x13f920(0x607)]['verbose'](this[_0x13f920(0x281)]+'\x20('+this[_0x13f920(0x632)][_0x13f920(0x6b5)]+_0x13f920(0x646)+_0x3b395e['id']+':\x20'+_0x3264c1[_0x13f920(0x41a)]()),null;}}),_0x364ec4=await Promise[_0x585e81(0x3f4)](_0x212961);for(let _0x4f2cfd=0x0;_0x4f2cfd<_0x51d46c[_0x585e81(0x1c0)];_0x4f2cfd++){let _0x212ad9=_0x51d46c[_0x4f2cfd];(0x0,w['isJidGroup'])(_0x212ad9?.['id'])&&_0x4eb4cf['push']({'groupJid':_0x212ad9?.['id'],'subject':_0x212ad9?.[_0x585e81(0x2bb)],'subjectOwner':_0x212ad9?.[_0x585e81(0x423)]?.[_0x585e81(0x60f)]('@')[0x0],'subjectTime':_0x212ad9?.[_0x585e81(0x227)],'size':_0x212ad9?.[_0x585e81(0x525)]?.['length'],'owner':_0x212ad9?.[_0x585e81(0x53e)]?.['split']('@')[0x0],'creation':_0x212ad9?.['creation'],'desc':_0x212ad9?.[_0x585e81(0x61a)],'restrict':_0x212ad9?.[_0x585e81(0x601)],'announce':_0x212ad9?.[_0x585e81(0x356)],'image':_0x364ec4[_0x4f2cfd]});}return _0x4eb4cf;}catch(_0x56ea24){throw new x('Error\x20fetching\x20group',_0x56ea24[_0x585e81(0x41a)]());}}async[a0_0x5a2dd1(0x5d1)](_0x3ff7d0){const _0x4f19cb=a0_0x5a2dd1;try{let _0x2eaba4=await this[_0x4f19cb(0x6c6)][_0x4f19cb(0x192)](_0x3ff7d0['groupJid']);return{'inviteUrl':_0x4f19cb(0x224)+_0x2eaba4,'inviteCode':_0x2eaba4};}catch(_0x538c05){throw new x(_0x4f19cb(0x4d5),_0x538c05['toString']());}}async[a0_0x5a2dd1(0x4d3)](_0x4e97f2){const _0x3224b2=a0_0x5a2dd1;try{let _0xf5ba5a=await this['client']['groupRevokeInvite'](_0x4e97f2['groupJid']);return{'revoked':!0x0,'inviteUrl':_0x3224b2(0x224)+_0xf5ba5a,'inviteCode':_0xf5ba5a};}catch(_0x15ab88){throw new x(_0x3224b2(0x166),_0x15ab88['toString']());}}async[a0_0x5a2dd1(0x232)](_0x5027dd){const _0x2db864=a0_0x5a2dd1;try{if((0x0,k[_0x2db864(0x428)])(_0x5027dd[_0x2db864(0x5d1)]))var _0x179c22=_0x5027dd[_0x2db864(0x5d1)][_0x2db864(0x60f)]('/')[0x3];else var _0x179c22=_0x5027dd['inviteCode'];let _0x32f8c7=await this['client'][_0x2db864(0x327)](_0x179c22);return this[_0x2db864(0x607)][_0x2db864(0x400)](this[_0x2db864(0x281)]+'\x20('+this[_0x2db864(0x632)][_0x2db864(0x6b5)]+_0x2db864(0x49a)+_0x32f8c7),{'join':!0x0,'inviteCode':_0x179c22,'groupJid':_0x32f8c7};}catch(_0x250f0b){throw new x(_0x2db864(0x2f6),_0x250f0b[_0x2db864(0x41a)]());}}async[a0_0x5a2dd1(0x105)](_0x13ec09){const _0x513ea9=a0_0x5a2dd1;try{return{'participants':(await this['client'][_0x513ea9(0x195)](_0x13ec09[_0x513ea9(0x26e)]))[_0x513ea9(0x525)]};}catch(_0x3a9377){throw new x(_0x513ea9(0x4f6),_0x3a9377[_0x513ea9(0x41a)]());}}async[a0_0x5a2dd1(0xf8)](_0xa86218){const _0x41e774=a0_0x5a2dd1;try{let _0x6845cc=_0xa86218[_0x41e774(0x525)][_0x41e774(0x4ce)](_0x4769df=>this[_0x41e774(0x3b0)](_0x4769df));return{'updateParticipants':await this['client'][_0x41e774(0x464)](_0xa86218['groupJid'],_0x6845cc,_0xa86218[_0x41e774(0x497)])};}catch(_0x201de0){throw new g(_0x41e774(0x472),_0x201de0[_0x41e774(0x41a)]());}}async[a0_0x5a2dd1(0x381)](_0x34e099){const _0x59ec50=a0_0x5a2dd1;try{let _0x1d980f=await this[_0x59ec50(0x6c6)][_0x59ec50(0x5f8)](_0x34e099[_0x59ec50(0x26e)],_0x34e099[_0x59ec50(0x306)]);return{'success':!0x0};}catch(_0x5a5130){throw new g(_0x59ec50(0x2e9),_0x5a5130[_0x59ec50(0x41a)]());}}async['leaveGroup'](_0x198898){const _0x370c64=a0_0x5a2dd1;try{return await this[_0x370c64(0x6c6)][_0x370c64(0x154)](_0x198898['groupJid']),{'groupJid':_0x198898[_0x370c64(0x26e)],'leave':!0x0};}catch(_0x25cd96){throw new g(_0x370c64(0x124),_0x25cd96[_0x370c64(0x41a)]());}}async['pollMessage'](_0x113b1f){const _0x425d2f=a0_0x5a2dd1;return await this[_0x425d2f(0x175)](_0x113b1f[_0x425d2f(0x1a4)],{'poll':{'name':_0x113b1f['pollMessage']?.[_0x425d2f(0x67e)],'selectableCount':_0x113b1f[_0x425d2f(0x288)][_0x425d2f(0x5cd)],'values':_0x113b1f[_0x425d2f(0x288)][_0x425d2f(0x1ff)]}},_0x113b1f?.['options']);}async['updateMessage'](_0x2671f5,_0xbe1c9,_0x425c86){const _0x27c105=a0_0x5a2dd1;if(await this['getMessage'](_0x2671f5,!0x0)){let _0x5f0ec5={'where':{'key':{'id':_0x2671f5['id'],'remoteJid':_0xbe1c9,'fromMe':_0x2671f5[_0x27c105(0x46e)]},'owner':this['instance'][_0x27c105(0x6b5)]}},_0x11e081={'status':[_0x425c86[_0x27c105(0x50a)]][0x0]};try{let _0x3b229c=await this[_0x27c105(0x104)][_0x27c105(0x19d)][_0x27c105(0x6b8)](_0x5f0ec5,_0x11e081);_0x3b229c&&G(this['instanceName'],_0x27c105(0x2d4),{'message':_0x3b229c});}catch{}}}['formatVCard'](_0x20dde2){const _0x2cc44b=a0_0x5a2dd1;let _0x1e9ca1=_0x20dde2['replace'](/\\n/g,'\x0a')[_0x2cc44b(0x60f)]('\x0a')['filter'](_0x255785=>_0x255785[_0x2cc44b(0x40c)]('TEL')||_0x255785[_0x2cc44b(0x40c)](_0x2cc44b(0x63a))),_0x373838='';return _0x1e9ca1[_0x2cc44b(0x1b3)](_0x439ea7=>{const _0x292689=_0x2cc44b;let _0x34f51e=/TEL(?:.*):(.+)/,_0x3dabe3=/EMAIL(?:.*):(.+)/,_0x448fed=_0x439ea7['match'](_0x34f51e),_0x5815bb=_0x439ea7[_0x292689(0xeb)](_0x3dabe3);if(_0x448fed){let _0x2b0450=_0x448fed[0x1][_0x292689(0x269)](/-| |\+|\(|\)/g,'')[_0x292689(0x6bc)]();_0x373838+='Telefone:\x20'+_0x2b0450+'\x0a';}else{if(_0x5815bb){let _0x312b4a=_0x5815bb[0x1][_0x292689(0x6bc)]();_0x373838+='E-mail:\x20'+_0x312b4a+'\x0a';}}}),_0x373838[_0x2cc44b(0x6bc)]();}async[a0_0x5a2dd1(0x27e)](_0x14798d,_0x7c7c8a,_0x461046){const _0x3987ed=a0_0x5a2dd1;let _0x1bb304=_0x7c7c8a['key'][_0x3987ed(0x2f8)],_0xcdd03c=_0x7c7c8a['key'][_0x3987ed(0x46e)],_0xacf4b6=_0x1bb304[_0x3987ed(0x474)](_0x3987ed(0x30f));if(!_0x14798d[_0x3987ed(0x159)])return;let _0x19947a={'$set':{..._0xcdd03c?{'unreadcount':0x0,'lastmsg':_0x7c7c8a[_0x3987ed(0x503)]||Date[_0x3987ed(0x468)]()}:{'lastmsg':_0x7c7c8a['messageTimestamp']||Date[_0x3987ed(0x468)]()},..._0xcdd03c||_0xacf4b6?{}:{'name':_0x7c7c8a['pushName']}},'$setOnInsert':{'group':_0xacf4b6,'leadInfo.tags':[],'leadInfo.customFields':[],...!_0xcdd03c&&!_0xacf4b6?{'leadInfo.nome':_0x7c7c8a[_0x3987ed(0x688)]}:{}},..._0xcdd03c?{}:{'$inc':{'unreadcount':0x1}}},_0x322ed3={'new':!0x0,'upsert':!0x0,'setDefaultsOnInsert':!0x0},_0x50d161=await I['findOneAndUpdate']({'id':_0x1bb304,'owner':this['instance'][_0x3987ed(0x6b5)]},_0x19947a,_0x322ed3);if(_0x50d161?(!_0xacf4b6&&(!_0x50d161[_0x3987ed(0x373)]||!_0x50d161[_0x3987ed(0x373)]['nome'])&&_0x7c7c8a['pushName']&&!_0xcdd03c&&(_0x19947a={'$set':{'leadInfo.nome':_0x7c7c8a[_0x3987ed(0x688)]}},_0x50d161=await I[_0x3987ed(0x233)]({'id':_0x1bb304,'owner':this[_0x3987ed(0x632)]['wuid']},_0x19947a,_0x322ed3)),G(this[_0x3987ed(0x281)],_0x3987ed(0x672),{'chat':_0x50d161})):this[_0x3987ed(0x607)][_0x3987ed(0x4a6)](this[_0x3987ed(0x281)]+'\x20('+this[_0x3987ed(0x632)][_0x3987ed(0x6b5)]+_0x3987ed(0x146)),!this[_0x3987ed(0x535)]?.[_0x3987ed(0x495)][_0x3987ed(0x623)])return this[_0x3987ed(0x607)][_0x3987ed(0x400)](this[_0x3987ed(0x281)]+'\x20('+this[_0x3987ed(0x632)][_0x3987ed(0x6b5)]+_0x3987ed(0x64a)),null;if(_0x50d161['id'][_0x3987ed(0x40c)](_0x3987ed(0x30f))&&this['AutomateSystem']?.[_0x3987ed(0x495)][_0x3987ed(0x44c)]===!0x0)return this['logger'][_0x3987ed(0x400)](this[_0x3987ed(0x281)]+'\x20('+this['instance'][_0x3987ed(0x6b5)]+'):\x20Ignoring\x20group\x20messages.'),null;if(_0x50d161[_0x3987ed(0x373)]){if(_0x50d161['leadInfo'][_0x3987ed(0x1a3)]===0x0||_0x50d161[_0x3987ed(0x373)][_0x3987ed(0x59c)])return this['logger'][_0x3987ed(0x400)](this['instanceName']+'\x20('+this[_0x3987ed(0x632)][_0x3987ed(0x6b5)]+_0x3987ed(0x2d6)+_0x1bb304+',\x20saindo.'),null;if(_0x50d161[_0x3987ed(0x373)][_0x3987ed(0x1a3)]>Date[_0x3987ed(0x468)]())return this[_0x3987ed(0x607)][_0x3987ed(0x400)](this[_0x3987ed(0x281)]+'\x20('+this[_0x3987ed(0x632)][_0x3987ed(0x6b5)]+'):\x20Está\x20configurado\x20para\x20parar\x20até\x20'+new Date(_0x50d161[_0x3987ed(0x373)]['desativadoFluxoAte'])[_0x3987ed(0x603)]()+',\x20saindo.'),null;}this['logger'][_0x3987ed(0x400)](this[_0x3987ed(0x281)]+'\x20('+this[_0x3987ed(0x632)][_0x3987ed(0x6b5)]+_0x3987ed(0x48d)),this[_0x3987ed(0x2fa)](_0x461046,_0x7c7c8a,this[_0x3987ed(0x632)]['wuid']);}async[a0_0x5a2dd1(0x612)](){const _0x27ff79=a0_0x5a2dd1;let _0x56ae79=await this[_0x27ff79(0x104)][_0x27ff79(0x1fd)][_0x27ff79(0x40e)]({'where':{'owner':this[_0x27ff79(0x632)][_0x27ff79(0x6b5)]}}),_0x208c84=0x0,_0x1cf9c3=[];for(let _0xc4e73d of _0x56ae79)_0x1cf9c3[_0x27ff79(0x125)]({'updateOne':{'filter':{'id':_0xc4e73d['id'],'owner':this['instance'][_0x27ff79(0x6b5)]},'update':{'$set':{'contactname':_0xc4e73d[_0x27ff79(0x688)]}}}}),_0x1cf9c3[_0x27ff79(0x1c0)]===0x1f4&&(_0x208c84+=await this[_0x27ff79(0x31d)](_0x1cf9c3),_0x1cf9c3=[]);_0x1cf9c3['length']>0x0&&(_0x208c84+=await this[_0x27ff79(0x31d)](_0x1cf9c3)),this[_0x27ff79(0x607)][_0x27ff79(0x400)](this[_0x27ff79(0x281)]+'\x20('+this['instance'][_0x27ff79(0x6b5)]+'):\x20'+_0x208c84+_0x27ff79(0x2d9)+this[_0x27ff79(0x632)][_0x27ff79(0x6b5)]+'\x20foram\x20adicionados\x20\x22contactname\x22\x20');}async[a0_0x5a2dd1(0x31d)](_0x5a5eea){return(await I['bulkWrite'](_0x5a5eea))['modifiedCount'];}async[a0_0x5a2dd1(0x6a3)](_0x9ef4ae,_0x39a24e){const _0x3580e1=a0_0x5a2dd1;if(_0x39a24e[_0x3580e1(0x159)]){let _0x2a4704=_0x9ef4ae[_0x3580e1(0x4ce)](async _0x206b03=>{const _0x44d655=_0x3580e1;try{let _0x1c72ef={'$set':{'id':_0x206b03['id'],'owner':_0x206b03[_0x44d655(0x53e)],'lastcache':0x0}};if(_0x206b03['group']!==null&&(_0x1c72ef[_0x44d655(0x2c1)]['group']=_0x206b03[_0x44d655(0x606)]),_0x206b03[_0x44d655(0x67e)]!==null&&(_0x1c72ef[_0x44d655(0x2c1)][_0x44d655(0x67e)]=_0x206b03[_0x44d655(0x67e)]),_0x206b03[_0x44d655(0x21f)]!==null&&(_0x1c72ef[_0x44d655(0x2c1)][_0x44d655(0x21f)]=_0x206b03[_0x44d655(0x21f)]),_0x206b03[_0x44d655(0x290)]!==null&&(_0x1c72ef[_0x44d655(0x2c1)]['imagechat']=_0x206b03[_0x44d655(0x290)]),_0x206b03[_0x44d655(0x290)]===null&&(_0x1c72ef[_0x44d655(0x2c1)][_0x44d655(0x290)]=_0x44d655(0x65b)),_0x206b03[_0x44d655(0x443)]!==null&&(_0x1c72ef[_0x44d655(0x2c1)][_0x44d655(0x443)]=_0x206b03['lastmsg']),_0x206b03[_0x44d655(0xff)]!==null&&(_0x1c72ef[_0x44d655(0x2c1)][_0x44d655(0xff)]=_0x206b03[_0x44d655(0xff)]),_0x206b03['unreadcount']!==null&&(_0x1c72ef[_0x44d655(0x2c1)][_0x44d655(0x6a2)]=_0x206b03[_0x44d655(0x6a2)]),Object[_0x44d655(0x330)](_0x1c72ef[_0x44d655(0x2c1)])['length']>0x0)return await I[_0x44d655(0x233)]({'id':_0x206b03['id'],'owner':_0x206b03[_0x44d655(0x53e)]},_0x1c72ef,{'new':!0x0,'upsert':!0x0});}catch(_0x8fde51){return console['error'](_0x44d655(0x5e4)+_0x206b03['id']+':',_0x8fde51),null;}}),_0x2cd777=(await Promise[_0x3580e1(0x3f4)](_0x2a4704))[_0x3580e1(0x693)](_0x116afa=>_0x116afa!==null)[_0x3580e1(0x1c0)];this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x3580e1(0x6b5)]+_0x3580e1(0x49a)+_0x2cd777+_0x3580e1(0x2d9)+this[_0x3580e1(0x632)][_0x3580e1(0x6b5)]+_0x3580e1(0x317));}}async[a0_0x5a2dd1(0x548)](_0x50171c){const _0x3d4042=a0_0x5a2dd1;this[_0x3d4042(0x607)]['verbose'](this[_0x3d4042(0x281)]+'\x20('+this['instance'][_0x3d4042(0x6b5)]+_0x3d4042(0x5f5));let _0x3b9576={'readMessages':[{'remoteJid':_0x50171c[_0x3d4042(0x13f)][_0x3d4042(0x2d8)][_0x3d4042(0x3a9)]['remoteJid'],'fromMe':_0x50171c[_0x3d4042(0x13f)]['lastReceivedMessage']['key']['fromMe'],'id':_0x50171c[_0x3d4042(0x13f)][_0x3d4042(0x2d8)][_0x3d4042(0x3a9)]['id']}]};await this[_0x3d4042(0x296)](_0x3b9576);}async[a0_0x5a2dd1(0x2fa)](_0x1e8ee5,_0x39e6f7,_0x194710){const _0x512840=a0_0x5a2dd1;try{let {key:_0x2739cc,message_normalized:_0x311d6c}=_0x39e6f7,_0x292702=_0x311d6c,_0x4601d9=_0x311d6c[_0x512840(0x519)]||_0x311d6c[_0x512840(0x609)]||_0x311d6c[_0x512840(0x55a)]||_0x311d6c[_0x512840(0x67e)],_0x18325c=_0x2739cc[_0x512840(0x2f8)],_0xb794f3;if(_0x292702[_0x512840(0x3a9)][_0x512840(0x46e)]&&_0x4601d9['trim']()!==this[_0x512840(0x535)]?.[_0x512840(0x495)][_0x512840(0x1ce)][_0x512840(0x6bc)]())return this[_0x512840(0x607)][_0x512840(0x400)](this[_0x512840(0x281)]+'\x20('+this[_0x512840(0x632)][_0x512840(0x6b5)]+_0x512840(0x141)),null;if(_0x292702[_0x512840(0x3a9)][_0x512840(0x46e)]&&_0x4601d9[_0x512840(0x6bc)]()===this[_0x512840(0x535)]?.[_0x512840(0x495)][_0x512840(0x1ce)]['trim']()){this[_0x512840(0x607)][_0x512840(0x400)](this[_0x512840(0x281)]+'\x20('+this[_0x512840(0x632)]['wuid']+_0x512840(0x459));let _0x3ac555=await F[_0x512840(0x40e)]({'owner':_0x194710,'remoteJid':_0x18325c,'status':_0x512840(0x541)});this[_0x512840(0x607)][_0x512840(0x400)](this[_0x512840(0x281)]+'\x20('+this[_0x512840(0x632)]['wuid']+_0x512840(0x2d0)+_0x3ac555);let _0x3c7ce1=Date[_0x512840(0x468)](),_0x31dc03;return this[_0x512840(0x535)]?.['flowConfig'][_0x512840(0x29f)]===0x0?_0x31dc03={'stoppedUntil':_0x3c7ce1+0x7591f6200}:_0x31dc03={'stoppedUntil':_0x3c7ce1+this[_0x512840(0x535)]?.['flowConfig'][_0x512840(0x29f)]*0x3c*0x3e8},this[_0x512840(0x607)][_0x512840(0x400)](this[_0x512840(0x281)]+'\x20('+this['instance'][_0x512840(0x6b5)]+_0x512840(0x1ba)+_0x31dc03),this[_0x512840(0x29a)](_0xb794f3,_0x31dc03['stoppedUntil']),null;}if(_0x4601d9&&_0x4601d9['startsWith'](this['AutomateSystem']?.[_0x512840(0x495)][_0x512840(0x142)])&&_0x4601d9[_0x512840(0x1c0)]>0x4){let _0x1f2f5e=await D[_0x512840(0x34c)]({'owner':_0x194710,'startCommandWord':_0x4601d9});if(this[_0x512840(0x607)][_0x512840(0x400)](this[_0x512840(0x281)]+'\x20('+this[_0x512840(0x632)]['wuid']+_0x512840(0x4f3)),_0x1f2f5e)_0xb794f3=await this['createNewConversation'](_0x1f2f5e,_0x292702[_0x512840(0x3a9)],_0x292702);else return this['logger'][_0x512840(0x400)](this['instanceName']+'\x20('+this[_0x512840(0x632)]['wuid']+_0x512840(0x5a8)),null;}else _0xb794f3=await this[_0x512840(0x46f)](_0x194710,_0x18325c,_0x292702);if(_0xb794f3){this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x512840(0x632)]['wuid']+_0x512840(0x69d)),!_0x2739cc['fromMe']&&_0xb794f3['readMessages']&&this[_0x512840(0x548)](_0xb794f3);let _0x193a47=await this[_0x512840(0x1a6)](_0xb794f3);_0x193a47&&await this['processblock'](_0xb794f3,_0x193a47,_0xb794f3[_0x512840(0x2f8)]);}}catch(_0x2c7741){this[_0x512840(0x607)][_0x512840(0x4a6)](this[_0x512840(0x281)]+'\x20('+this[_0x512840(0x632)]['wuid']+'):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20'+_0x2c7741);}}[a0_0x5a2dd1(0x29c)](_0x47edd8,_0xaf607b='',_0x585d6c={},_0xcb31e3=!0x0){const _0x3d7c7a=a0_0x5a2dd1;for(let _0x4393af in _0x47edd8){let _0x1d4cb5=_0xcb31e3?'_'+_0x4393af:''+_0xaf607b+_0x4393af;typeof _0x47edd8[_0x4393af]=='object'&&_0x47edd8[_0x4393af]!==null?this[_0x3d7c7a(0x29c)](_0x47edd8[_0x4393af],_0x1d4cb5+'.',_0x585d6c,!0x1):_0x585d6c[_0x1d4cb5]=String(_0x47edd8[_0x4393af]);}return _0x585d6c;}[a0_0x5a2dd1(0x69e)](_0x3a91cf){const _0x30530a=a0_0x5a2dd1;let _0x3f7126={};for(let _0x1e3ad1 of _0x3a91cf)typeof _0x1e3ad1[_0x30530a(0x67e)]=='string'&&typeof _0x1e3ad1['value']==_0x30530a(0x17b)&&(_0x3f7126[_0x1e3ad1[_0x30530a(0x67e)]]=_0x1e3ad1[_0x30530a(0x44e)]);return _0x3f7126;}async[a0_0x5a2dd1(0x1a6)](_0x48020e){const _0x275295=a0_0x5a2dd1;if(!this['AutomateSystem']?.['flowConfig'][_0x275295(0x623)]||_0x48020e['status']!==_0x275295(0x541)&&_0x48020e[_0x275295(0x448)]==='')return null;let _0x4194b4=_0x48020e[_0x275295(0x13f)][_0x275295(0x1bb)]||_0x275295(0x186);typeof _0x48020e[_0x275295(0x13f)]['lastCondition']>'u'&&(_0x48020e[_0x275295(0x13f)][_0x275295(0x1f9)]=!0x0);let _0x4921de=_0x48020e[_0x275295(0x13f)][_0x275295(0x1f9)];this[_0x275295(0x607)][_0x275295(0x400)](this[_0x275295(0x281)]+'\x20('+this[_0x275295(0x632)][_0x275295(0x6b5)]+'):\x20lastBlockId:\x20'+_0x4194b4+_0x275295(0x1ed)+_0x4921de);let _0x1b1a25=_0x4194b4===_0x275295(0x186)?_0x48020e[_0x275295(0x60c)][_0x275295(0x40e)](_0x4f00d0=>_0x4f00d0[_0x275295(0x33b)]===_0x275295(0x186)):_0x48020e[_0x275295(0x60c)][_0x275295(0x40e)](_0x5bc554=>_0x5bc554['_id'][_0x275295(0x41a)]()===_0x4194b4[_0x275295(0x41a)]());if(!_0x1b1a25)return this[_0x275295(0x607)][_0x275295(0x4a6)](this[_0x275295(0x281)]+'\x20('+this[_0x275295(0x632)][_0x275295(0x6b5)]+_0x275295(0x682)+_0x4194b4),null;let _0x58356d={'_pushName':_0x48020e[_0x275295(0x13f)]['lastReceivedMessage']['pushName'],..._0x48020e[_0x275295(0x13f)][_0x275295(0x235)]},_0x4ca2c2=null;if(_0x48020e['waitingPoll_id']){let _0x1f1fea=_0x48020e[_0x275295(0x13f)][_0x275295(0x2d8)][_0x275295(0x55a)],_0x445125=_0x48020e[_0x275295(0x12c)][_0x275295(0x40e)](_0x17d249=>_0x17d249[_0x275295(0x32d)]===_0x1f1fea);if(_0x445125){let _0x31de50=_0x445125[_0x275295(0x1d0)];if(_0x4ca2c2=_0x48020e[_0x275295(0x60c)][_0x275295(0x40e)](_0x1629ca=>_0x1629ca['groupId']===_0x31de50&&_0x1629ca[_0x275295(0x466)]===0x1),_0x1b1a25[_0x275295(0x3b7)][_0x275295(0x5f6)]){let _0x2ac387={'id':_0x48020e['waitingPoll_id'],'remoteJid':_0x48020e['remoteJid'],'fromMe':!0x0};await this[_0x275295(0x3ed)](_0x2ac387);}if(_0x1b1a25[_0x275295(0x3b7)][_0x275295(0x5f6)]&&_0x1b1a25[_0x275295(0x3b7)][_0x275295(0x64b)]){let _0x3b6283={'number':_0x48020e[_0x275295(0x2f8)],'options':{'delay':0x0},'textMessage':{'text':_0x275295(0x1d9)+_0x48020e[_0x275295(0x4dd)]+'\x0a*Você\x20respondeu*:\x0a'+_0x1f1fea}};await this['textMessage'](_0x3b6283);}_0x48020e[_0x275295(0x50a)]='open',_0x48020e[_0x275295(0x448)]='',_0x48020e[_0x275295(0x4dd)]='',_0x48020e['waitingPoll_replyOptions']=[];}else{this[_0x275295(0x607)][_0x275295(0x400)](this[_0x275295(0x281)]+'\x20('+this[_0x275295(0x632)][_0x275295(0x6b5)]+'):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um');let _0x190261={'activatedCount':_0x48020e[_0x275295(0x13f)]['blockLogs'][_0x275295(0x693)](_0x12f871=>String(_0x12f871[_0x275295(0x615)])===String(_0x4194b4))[_0x275295(0x1c0)],'moreLogs':[_0x275295(0x2e0)]};if(_0x1b1a25['uazapi'][_0x275295(0x30c)]){let _0x433d02={'number':_0x48020e[_0x275295(0x2f8)],'options':{'delay':0x0},'textMessage':{'text':_0x1b1a25[_0x275295(0x3b7)]['pollErrorMessage']}};await this[_0x275295(0x25a)](_0x433d02);}if(_0x1b1a25[_0x275295(0x4b3)]!==void 0x0&&_0x190261[_0x275295(0x631)]>=_0x1b1a25['maxActives']){let _0x441975=Date[_0x275295(0x468)](),_0x822b58=_0x1b1a25['stopMinutesMaxActives']??0xa;isNaN(_0x822b58)&&(_0x822b58=0xa);let _0xb4e00e=_0x441975+_0x822b58*0x3c*0x3e8;_0x190261['newStoppedUntil']=_0xb4e00e,_0x190261[_0x275295(0x118)][_0x275295(0x125)](_0x275295(0x18d)),this['updateStopChat'](_0x48020e,_0xb4e00e),_0x48020e[_0x275295(0x448)]='',_0x48020e['waitingPoll_name']='',_0x48020e[_0x275295(0x12c)]=[];}return this[_0x275295(0x699)](_0x48020e,_0x1b1a25,_0x190261,!0x0),null;}}if(_0x4921de&&_0x1b1a25[_0x275295(0x1d0)]&&!_0x48020e[_0x275295(0x448)]){let _0xb935c0=_0x48020e[_0x275295(0x60c)]['filter'](_0x43ee9d=>_0x43ee9d[_0x275295(0x689)][_0x275295(0x41a)]()===_0x1b1a25[_0x275295(0x1d0)][_0x275295(0x41a)]())[_0x275295(0x389)]((_0x4893bb,_0x392c53)=>_0x4893bb[_0x275295(0x466)]-_0x392c53[_0x275295(0x466)]);_0xb935c0[_0x275295(0x1c0)]>0x0&&(_0x4ca2c2=_0xb935c0[0x0]);}if(!_0x4ca2c2){let _0x165fb9=_0x1b1a25[_0x275295(0x689)],_0x164735=_0x48020e[_0x275295(0x60c)][_0x275295(0x693)](_0x490f0a=>_0x490f0a[_0x275295(0x689)]===_0x165fb9&&_0x490f0a['order']>_0x1b1a25[_0x275295(0x466)])[_0x275295(0x389)]((_0x355a0f,_0x9682e4)=>_0x355a0f[_0x275295(0x466)]-_0x9682e4[_0x275295(0x466)]);_0x164735[_0x275295(0x1c0)]>0x0&&(_0x4ca2c2=_0x164735[0x0]);}if(!_0x4ca2c2)return _0x48020e[_0x275295(0x50a)]=_0x275295(0x1f3),null;_0x48020e[_0x275295(0x13f)]['realVariables']=_0x58356d;let _0x43592=JSON[_0x275295(0x26b)](JSON[_0x275295(0x561)](_0x4ca2c2));return this[_0x275295(0x1f2)](_0x43592,_0x48020e['chatLog'][_0x275295(0x235)]),_0x48020e[_0x275295(0x13f)][_0x275295(0x1bb)]=_0x43592[_0x275295(0x22a)],_0x48020e[_0x275295(0x13f)][_0x275295(0x1f9)]=!0x0,_0x43592;}[a0_0x5a2dd1(0x372)](_0x585745,_0x3bc30c){return _0x585745['replace'](/\{\{([^}]+)\}\}/g,(_0x253569,_0x3f4171)=>_0x3bc30c[_0x3f4171]||'');}[a0_0x5a2dd1(0x1f2)](_0x37a786,_0x240c43){const _0x2fae19=a0_0x5a2dd1;for(let _0x5d3ada in _0x37a786)typeof _0x37a786[_0x5d3ada]==_0x2fae19(0x17b)?_0x37a786[_0x5d3ada]=this[_0x2fae19(0x372)](_0x37a786[_0x5d3ada],_0x240c43):typeof _0x37a786[_0x5d3ada]=='object'&&this[_0x2fae19(0x1f2)](_0x37a786[_0x5d3ada],_0x240c43);}async['goNextblock'](_0x3fb7a7,_0x2c578b){const _0x36d74d=a0_0x5a2dd1;let _0x562cbd=_0x2c578b[_0x36d74d(0x22a)];if(_0x3fb7a7[_0x36d74d(0x13f)]&&_0x3fb7a7['chatLog']['blockLogs']){let _0x3fbe9c=_0x3fb7a7[_0x36d74d(0x13f)][_0x36d74d(0x68b)]['filter'](_0x29f1fa=>String(_0x29f1fa['blockId'])===String(_0x562cbd))[_0x36d74d(0x2d5)]();if(_0x3fbe9c&&_0x3fbe9c['error']&&_0x2c578b['stopIfLastReturnedError'])return _0x3fb7a7[_0x36d74d(0x50a)]=_0x36d74d(0x1f3),await this[_0x36d74d(0x15d)](_0x3fb7a7),null;}if(_0x2c578b[_0x36d74d(0x33b)]===_0x36d74d(0x3b7)&&_0x2c578b[_0x36d74d(0x3b7)][_0x36d74d(0x5e3)]===_0x36d74d(0x662)&&_0x3fb7a7[_0x36d74d(0x448)])return _0x3fb7a7[_0x36d74d(0x13f)]['lastBlockId']=_0x562cbd,await this[_0x36d74d(0x15d)](_0x3fb7a7),null;let _0xf1bec9=await this[_0x36d74d(0x1a6)](_0x3fb7a7);if(_0x3fb7a7[_0x36d74d(0x13f)]&&_0x3fb7a7[_0x36d74d(0x13f)]['blockLogs']){let _0x14f299=_0x3fb7a7[_0x36d74d(0x13f)][_0x36d74d(0x68b)][_0x36d74d(0x693)](_0x45bb29=>String(_0x45bb29[_0x36d74d(0x615)])===String(_0x562cbd))[_0x36d74d(0x1c0)];if(_0x2c578b['maxActives']!==void 0x0&&_0x14f299>=_0x2c578b['maxActives']){let _0x2096bd=Date[_0x36d74d(0x468)](),_0x405e2a=_0x2c578b[_0x36d74d(0x461)]??0xa;isNaN(_0x405e2a)&&(_0x405e2a=0xa);let _0x278cfb=_0x2096bd+_0x405e2a*0x3c*0x3e8,_0x444690={'newStoppedUntil':_0x278cfb};return this['updateStopChat'](_0x3fb7a7,_0x278cfb),this['updateConversation'](_0x3fb7a7,_0x2c578b,_0x444690,!0x0),null;}}_0xf1bec9&&_0xf1bec9['type']!==_0x36d74d(0x44b)&&await this[_0x36d74d(0x467)](_0x3fb7a7,_0xf1bec9,_0x3fb7a7[_0x36d74d(0x2f8)]),_0xf1bec9||await this['saveConversationToDatabase'](_0x3fb7a7),_0xf1bec9&&_0xf1bec9['type']===_0x36d74d(0x44b)&&(_0x3fb7a7['chatLog'][_0x36d74d(0x1bb)]=_0x562cbd,await this[_0x36d74d(0x15d)](_0x3fb7a7));}async['processblock'](_0x4c5a3a,_0x1cd4b2,_0x2c053d){const _0x361fcb=a0_0x5a2dd1;try{let _0x3d90c3=_0x1cd4b2[_0x361fcb(0x33b)];this[_0x361fcb(0x607)][_0x361fcb(0x400)](this[_0x361fcb(0x281)]+'\x20('+this[_0x361fcb(0x632)][_0x361fcb(0x6b5)]+_0x361fcb(0x140)+_0x3d90c3);let _0x2e0ba5={'uazapi':()=>this[_0x361fcb(0x62a)](_0x4c5a3a,_0x1cd4b2,_0x2c053d),'save':()=>this[_0x361fcb(0x221)](_0x4c5a3a,_0x1cd4b2),'stop':()=>this[_0x361fcb(0x1ce)](_0x4c5a3a,_0x1cd4b2),'condition':()=>this['processConditions'](_0x4c5a3a,_0x1cd4b2),'varedit':()=>this[_0x361fcb(0x2ea)](_0x4c5a3a,_0x1cd4b2),'apirequest':()=>this[_0x361fcb(0x531)](_0x4c5a3a,_0x1cd4b2),'goToFlow':()=>this[_0x361fcb(0x362)](_0x4c5a3a,_0x1cd4b2)}[_0x3d90c3];_0x2e0ba5&&await _0x2e0ba5();}catch(_0x430406){this[_0x361fcb(0x607)]['error'](this[_0x361fcb(0x281)]+'\x20('+this[_0x361fcb(0x632)]['wuid']+_0x361fcb(0x3bb)+_0x430406);}}async[a0_0x5a2dd1(0x362)](_0x5b6584,_0x182776){const _0x5238ff=a0_0x5a2dd1;if(this[_0x5238ff(0x607)]['verbose'](this['instanceName']+'\x20('+this[_0x5238ff(0x632)]['wuid']+'):\x20Entrou\x20na\x20função\x20goToFlow'),!_0x5b6584||!_0x182776)return this[_0x5238ff(0x607)]['error'](this[_0x5238ff(0x281)]+'\x20('+this[_0x5238ff(0x632)][_0x5238ff(0x6b5)]+_0x5238ff(0x1bf)),null;await this[_0x5238ff(0x699)](_0x5b6584,_0x182776,{},!0x0,!0x0),console[_0x5238ff(0x6aa)](_0x5238ff(0x3db)),console[_0x5238ff(0x6aa)](_0x182776);let _0x138bca=_0x182776['goToFlow'];console[_0x5238ff(0x6aa)](_0x5238ff(0x1be),_0x138bca),_0x5b6584=await this[_0x5238ff(0x15a)](_0x138bca,_0x5b6584[_0x5238ff(0x2f8)],_0x5b6584[_0x5238ff(0x13f)][_0x5238ff(0x235)]),this['logger'][_0x5238ff(0x400)](this[_0x5238ff(0x281)]+'\x20('+this[_0x5238ff(0x632)][_0x5238ff(0x6b5)]+_0x5238ff(0x446));let _0x55a13f=await this['NextBlock'](_0x5b6584);_0x55a13f&&await this[_0x5238ff(0x467)](_0x5b6584,_0x55a13f,_0x5b6584[_0x5238ff(0x2f8)]);}async['createConversationforgoToFlow'](_0x5dae3e,_0x3459b8,_0x5563d4){const _0xb54f00=a0_0x5a2dd1;this[_0xb54f00(0x607)][_0xb54f00(0x400)](this[_0xb54f00(0x281)]+'\x20('+this['instance'][_0xb54f00(0x6b5)]+_0xb54f00(0x5d6));try{if(_0x5dae3e=await D[_0xb54f00(0x34c)]({'owner':this[_0xb54f00(0x632)]['wuid'],'name':_0x5dae3e}),!_0x5dae3e)return this[_0xb54f00(0x607)][_0xb54f00(0x4a6)](this[_0xb54f00(0x281)]+'\x20('+this['instance'][_0xb54f00(0x6b5)]+_0xb54f00(0x604)),null;let _0x531033=require(_0xb54f00(0x68d))[_0xb54f00(0x409)],_0x29accd=Date[_0xb54f00(0x468)](),_0xfe8ec0=_0xb54f00(0x186),_0x1ab700={},_0x32b217={},_0xf884d9={..._0x5dae3e['_doc'],'chatLog':null},_0x3d39da={'lastReceivedMessage':_0x1ab700,'lastSendMessage':_0x32b217,'lastBlockId':_0xfe8ec0,'lastCondition':!0x0,'realVariables':_0x5563d4};_0xf884d9[_0xb54f00(0x13f)]=_0x3d39da,_0xf884d9[_0xb54f00(0x13f)][_0xb54f00(0x235)]={..._0x5563d4},delete _0xf884d9[_0xb54f00(0x22a)],_0xf884d9[_0xb54f00(0x22a)]=new _0x531033(),_0xf884d9['lastInteraction']=_0x29accd,_0xf884d9[_0xb54f00(0x50a)]='open',_0xf884d9[_0xb54f00(0x2f8)]=_0x3459b8;let _0x3c65f0=await F[_0xb54f00(0x57c)](_0xf884d9);return this[_0xb54f00(0x607)][_0xb54f00(0x400)](this[_0xb54f00(0x281)]+'\x20('+this['instance'][_0xb54f00(0x6b5)]+_0xb54f00(0x1de)),_0x3c65f0?_0xf884d9:null;}catch(_0x516457){throw this[_0xb54f00(0x607)]['error'](this['instanceName']+'\x20('+this[_0xb54f00(0x632)][_0xb54f00(0x6b5)]+_0xb54f00(0x39a)+_0x516457),new g(_0x516457[_0xb54f00(0x19d)]);}}async[a0_0x5a2dd1(0x531)](_0x55ab29,_0x528785){const _0x381a43=a0_0x5a2dd1;let _0x3b38d5,_0x21f65b;try{let _0x278035=_0x528785[_0x381a43(0x517)];if(!_0x278035||!_0x278035['url']||!_0x278035[_0x381a43(0x244)])throw new Error(_0x381a43(0x19c));let _0x4b9807={'method':_0x278035['method'],'url':_0x278035[_0x381a43(0x675)],'headers':_0x278035[_0x381a43(0x5fa)]||{},'data':_0x278035[_0x381a43(0x4bb)]||{}};_0x3b38d5=(await(0x0,ue[_0x381a43(0x5fb)])(_0x4b9807))[_0x381a43(0x31e)];let _0x2738ad=_0x55ab29[_0x381a43(0x13f)][_0x381a43(0x235)],_0x579e2e=this[_0x381a43(0x29c)](_0x3b38d5);return Object[_0x381a43(0x228)](_0x2738ad,_0x579e2e),_0x55ab29[_0x381a43(0x13f)][_0x381a43(0x235)]=_0x2738ad,_0x21f65b={'error':!0x1,'apiResponse':_0x3b38d5},this[_0x381a43(0x699)](_0x55ab29,_0x528785,_0x21f65b),_0x3b38d5;}catch(_0x49a13e){console[_0x381a43(0x4a6)]('Erro\x20ao\x20processar\x20a\x20chamada\x20API:',_0x49a13e),_0x49a13e[_0x381a43(0x3e8)]&&(_0x3b38d5=_0x49a13e[_0x381a43(0x3e8)][_0x381a43(0x31e)]);let _0x38d469=_0x55ab29['chatLog'][_0x381a43(0x235)],_0x30e1c4=this[_0x381a43(0x29c)](_0x3b38d5);return Object['assign'](_0x38d469,_0x30e1c4),_0x55ab29[_0x381a43(0x13f)][_0x381a43(0x235)]=_0x38d469,_0x21f65b={'error':!0x0,'errorLog':_0x49a13e[_0x381a43(0x41a)](),'apiResponse':_0x3b38d5},this[_0x381a43(0x699)](_0x55ab29,_0x528785,_0x21f65b),{'success':!0x1};}}[a0_0x5a2dd1(0x346)](_0x514b19,_0x378083){const _0x3d51b4=a0_0x5a2dd1;let _0x970182=_0x15ff3c=>{const _0x2fdd4b=a0_0x5d83;let _0x44a781=_0x15ff3c['replace'](/[^0-9.,-]/g,'')[_0x2fdd4b(0x269)](',','.'),_0x51e76d=parseFloat(_0x44a781);return isNaN(_0x51e76d)?null:_0x51e76d;},_0x2274a1=_0x378083[_0x3d51b4(0x51a)],_0x24ef30=_0x378083[_0x3d51b4(0x307)];typeof _0x2274a1==_0x3d51b4(0x17b)&&(_0x2274a1=this[_0x3d51b4(0x372)](_0x2274a1,_0x514b19['chatLog'][_0x3d51b4(0x235)])??''),typeof _0x24ef30==_0x3d51b4(0x17b)&&(_0x24ef30=this[_0x3d51b4(0x372)](_0x24ef30,_0x514b19['chatLog']['realVariables'])??'');let _0x4f1620=null;if(!_0x2274a1||!_0x378083[_0x3d51b4(0x395)])return null;switch(this[_0x3d51b4(0x607)][_0x3d51b4(0x400)](this[_0x3d51b4(0x281)]+'\x20('+this[_0x3d51b4(0x632)][_0x3d51b4(0x6b5)]+_0x3d51b4(0x171)+_0x2274a1),this[_0x3d51b4(0x607)]['verbose'](this[_0x3d51b4(0x281)]+'\x20('+this[_0x3d51b4(0x632)][_0x3d51b4(0x6b5)]+'):\x20newSecondValue\x20após\x20replaceVariables:'+_0x24ef30),_0x378083[_0x3d51b4(0x395)]){case'+':case'-':case'*':case'/':let _0x2e2492=_0x970182(_0x2274a1),_0x30fa6b=_0x970182(_0x24ef30||'0');if(_0x2e2492===null)return null;switch(_0x378083[_0x3d51b4(0x395)]){case'+':_0x4f1620=_0x2e2492+(_0x30fa6b??0x0);break;case'-':_0x4f1620=_0x2e2492-(_0x30fa6b??0x0);break;case'*':_0x4f1620=_0x2e2492*(_0x30fa6b??0x1);break;case'/':_0x30fa6b!==0x0&&(_0x4f1620=_0x2e2492/(_0x30fa6b??0x1));break;}break;case _0x3d51b4(0x16c):case'findAndReplaceRegex':let _0x132ad4=_0x24ef30,_0x39dda5=_0x378083['replaceValue'];if(typeof _0x39dda5==_0x3d51b4(0x17b)&&(_0x39dda5=this[_0x3d51b4(0x372)](_0x39dda5,_0x514b19[_0x3d51b4(0x13f)]['realVariables'])??''),_0x132ad4&&_0x39dda5!==void 0x0){let _0x434a94=_0x378083['editOperator']===_0x3d51b4(0x16c)?new RegExp(_0x132ad4[_0x3d51b4(0x269)](/[-\/\\^$*+?.()|[\]{}]/g,_0x3d51b4(0x29e)),'g'):new RegExp(_0x132ad4,'g');_0x4f1620=_0x2274a1[_0x3d51b4(0x269)](_0x434a94,_0x39dda5);}else console['warn'](_0x3d51b4(0x36a));break;case'setNewValue':_0x4f1620=_0x24ef30;break;case _0x3d51b4(0x185):let _0x33435b=_0x2274a1[_0x3d51b4(0xeb)](new RegExp(_0x24ef30||''));_0x4f1620=_0x33435b?_0x33435b[0x0]:'';break;case _0x3d51b4(0x182):_0x4f1620=_0x2274a1['slice'](0x0,parseInt(_0x24ef30||'0'));break;case _0x3d51b4(0x191):let _0xcc9c90=parseInt(_0x24ef30||'0');_0x4f1620=_0x2274a1[_0x3d51b4(0x600)](_0x2274a1[_0x3d51b4(0x1c0)]-_0xcc9c90);break;case _0x3d51b4(0x608):let _0x3bbd03=_0x970182(_0x2274a1),_0x251226=parseInt(_0x24ef30||'0');_0x251226=Math[_0x3d51b4(0x5d5)](_0x251226),_0x3bbd03!==null?_0x4f1620=_0x3bbd03['toLocaleString'](_0x3d51b4(0x451),{'minimumFractionDigits':_0x251226,'maximumFractionDigits':_0x251226}):(console[_0x3d51b4(0x214)]('Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20'+_0x2274a1),_0x4f1620=null);break;case'toBRL':let _0x100e45=_0x970182(_0x2274a1);_0x100e45!==null?_0x4f1620=_0x100e45[_0x3d51b4(0x603)](_0x3d51b4(0x451),{'style':'currency','currency':_0x3d51b4(0x6a7)}):(console[_0x3d51b4(0x214)](_0x3d51b4(0x4ba)+_0x2274a1),_0x4f1620=null);break;case'upperCase':_0x4f1620=_0x2274a1[_0x3d51b4(0x5ee)]();break;case _0x3d51b4(0x19f):_0x4f1620=_0x2274a1['toLowerCase']();break;case _0x3d51b4(0x678):_0x4f1620=_0x2274a1[_0x3d51b4(0x60f)]('\x20')[_0x3d51b4(0x4ce)](_0x2203e5=>_0x2203e5['charAt'](0x0)['toUpperCase']()+_0x2203e5[_0x3d51b4(0x600)](0x1)['toLowerCase']())[_0x3d51b4(0x295)]('\x20');break;case _0x3d51b4(0x18c):_0x4f1620=_0x2274a1['trim']();break;default:_0x4f1620=_0x2274a1;}return _0x4f1620!==null?_0x4f1620['toString']():null;}async[a0_0x5a2dd1(0x2ea)](_0x5ef41e,_0x29703b){const _0x259192=a0_0x5a2dd1;try{let _0xdca74a=_0x5ef41e['varedits']?.[_0x259192(0x693)](_0x431399=>_0x431399[_0x259192(0x615)]===_0x29703b['_id']?.[_0x259192(0x41a)]())||[],_0x59e655=_0x29703b[_0x259192(0x643)],_0x583a96=null,_0x48dd05=[],_0x2f7e6b=_0x5ef41e[_0x259192(0x13f)][_0x259192(0x235)][_0x59e655];_0x48dd05[_0x259192(0x125)](_0x259192(0x13a)+_0x2f7e6b+'\x22');for(let _0x48f775 of _0xdca74a){_0x48f775[_0x259192(0x51a)]=_0x2f7e6b,_0x583a96=_0x48f775['firstValue'];let _0x1c0b81;try{_0x1c0b81=this[_0x259192(0x346)](_0x5ef41e,_0x48f775);}catch(_0x164209){console['error'](_0x259192(0x6c7)+_0x164209[_0x259192(0x19d)]);continue;}if(_0x1c0b81!==null){let _0x144567=_0x259192(0x294)+_0x48f775['editOperator']+'\x22',_0x47bf90=[_0x259192(0x597),'upperCase','lowerCase',_0x259192(0x678),_0x259192(0x18c)];_0x48f775[_0x259192(0x395)]==='findAndReplace'||_0x48f775['editOperator']==='findAndReplaceRegex'?_0x144567+=',\x20valor\x20a\x20encontrar:\x20\x22'+_0x48f775[_0x259192(0x307)]+_0x259192(0xf2)+_0x48f775[_0x259192(0x160)]+'\x22':!_0x47bf90['includes'](_0x48f775[_0x259192(0x395)])&&_0x48f775['secondValue']!==null&&_0x48f775[_0x259192(0x307)]!==void 0x0&&(_0x144567+=_0x259192(0x3d5)+_0x48f775[_0x259192(0x307)]+'\x22'),_0x144567+=_0x259192(0x4f9)+_0x1c0b81+'.',_0x48dd05[_0x259192(0x125)](_0x144567);}_0x1c0b81!==null&&(_0x2f7e6b=_0x1c0b81);}if(_0x5ef41e[_0x259192(0x13f)][_0x259192(0x235)]&&_0x29703b[_0x259192(0x643)]){_0x5ef41e[_0x259192(0x13f)][_0x259192(0x235)][_0x29703b[_0x259192(0x643)]]=_0x2f7e6b;let _0x2b34c0={'variable':_0x29703b[_0x259192(0x643)],'oldValue':_0x583a96,'newValue':_0x2f7e6b,'moreLogs':_0x48dd05};try{this['updateConversation'](_0x5ef41e,_0x29703b,_0x2b34c0);}catch(_0xf0126d){console[_0x259192(0x4a6)]('Erro\x20ao\x20atualizar\x20conversa:\x20'+_0xf0126d[_0x259192(0x19d)]);}}return _0x59e655;}catch(_0x1c8bae){return console['error'](_0x259192(0x2a3)+_0x1c8bae[_0x259192(0x19d)]),null;}}async['processConditions'](_0x298f4e,_0x2ff77e){const _0x36dc2b=a0_0x5a2dd1;try{let _0x3a8048=[],_0x5af5a4=_0x298f4e[_0x36dc2b(0x3eb)][_0x36dc2b(0x693)](_0x34923b=>_0x34923b[_0x36dc2b(0x615)]===_0x2ff77e[_0x36dc2b(0x22a)][_0x36dc2b(0x41a)]()),_0x101166=null,_0x378aa0=!0x1;for(let _0x18ff51 of _0x5af5a4){let _0x7461c3=this[_0x36dc2b(0x4d7)](_0x298f4e,_0x18ff51);_0x3a8048['push'](_0x36dc2b(0x624)+_0x18ff51['firstValue']+_0x36dc2b(0x15e)+_0x18ff51[_0x36dc2b(0x4a7)]+_0x36dc2b(0x161)+_0x18ff51[_0x36dc2b(0x307)]+_0x36dc2b(0x5fc)+_0x7461c3),_0x101166===null?_0x101166=_0x7461c3:_0x18ff51['OrAnd']===_0x36dc2b(0x4a4)?(_0x101166=_0x101166&&_0x7461c3,_0x7461c3||(_0x378aa0=!0x0)):_0x18ff51[_0x36dc2b(0x293)]==='or'&&(_0x378aa0||(_0x101166=_0x101166||_0x7461c3));}_0x101166===null&&(_0x101166=!0x0);let _0x485631={'moreLogs':_0x3a8048};_0x298f4e[_0x36dc2b(0x13f)]['lastCondition']=_0x101166,await this[_0x36dc2b(0x699)](_0x298f4e,_0x2ff77e,_0x485631);}catch(_0x3891d4){this[_0x36dc2b(0x607)]['error'](this['instanceName']+'\x20('+this[_0x36dc2b(0x632)][_0x36dc2b(0x6b5)]+_0x36dc2b(0x57a)+_0x3891d4);}}[a0_0x5a2dd1(0x4d7)](_0x3f0375,_0x45d56f){const _0x5c116a=a0_0x5a2dd1;let _0x139afc=_0x45d56f['firstValue'],_0x11ed48=_0x45d56f['secondValue'];typeof _0x139afc==_0x5c116a(0x17b)&&(_0x139afc=this[_0x5c116a(0x372)](_0x139afc,_0x3f0375[_0x5c116a(0x13f)][_0x5c116a(0x235)])??''),typeof _0x11ed48=='string'&&(_0x11ed48=this[_0x5c116a(0x372)](_0x11ed48,_0x3f0375['chatLog']['realVariables'])??'');try{switch(_0x45d56f['expression']){case _0x5c116a(0x359):return _0x139afc===_0x11ed48;case'notEqual':return _0x139afc!==_0x11ed48;case'contains':return _0x139afc[_0x5c116a(0x40c)](_0x11ed48);case _0x5c116a(0x226):return!_0x139afc[_0x5c116a(0x40c)](_0x11ed48);case _0x5c116a(0x286):return parseFloat(_0x139afc)>parseFloat(_0x11ed48);case'less':return parseFloat(_0x139afc)<parseFloat(_0x11ed48);case _0x5c116a(0x50f):return _0x139afc!=='';case _0x5c116a(0x53f):return _0x139afc==='';case'matchRegex':return new RegExp(_0x11ed48)['test'](_0x139afc);case _0x5c116a(0x10b):return!new RegExp(_0x11ed48)[_0x5c116a(0x18a)](_0x139afc);default:return!0x1;}}catch(_0x5c46d6){return console['error'](_0x5c116a(0x34d)+_0x5c46d6),!0x1;}}[a0_0x5a2dd1(0x614)](_0x251857){const _0x4abf92=a0_0x5a2dd1;let _0x1adf02=!0x0,_0x45d309=null;for(let _0x28bdaa of _0x251857){let _0x55d439=this['evaluateConditionTest'](_0x28bdaa);if(_0x45d309==='or'&&_0x55d439){_0x1adf02=!0x0;break;}if(_0x45d309===_0x4abf92(0x4a4)&&!_0x55d439){_0x1adf02=!0x1;break;}_0x45d309=_0x28bdaa['OrAnd'];}return _0x1adf02;}[a0_0x5a2dd1(0x576)](_0x4aa135){const _0x4fc70a=a0_0x5a2dd1;let _0x2b3b15=_0x4aa135[_0x4fc70a(0x51a)],_0x3710a6=_0x4aa135[_0x4fc70a(0x307)];try{switch(_0x4aa135['expression']){case _0x4fc70a(0x359):return String(_0x2b3b15)===String(_0x3710a6);case _0x4fc70a(0x270):return String(_0x2b3b15)!==String(_0x3710a6);case'contains':return String(_0x2b3b15)[_0x4fc70a(0x40c)](String(_0x3710a6));case'notContains':return!String(_0x2b3b15)[_0x4fc70a(0x40c)](String(_0x3710a6));case _0x4fc70a(0x286):return parseFloat(String(_0x2b3b15))>parseFloat(String(_0x3710a6));case _0x4fc70a(0x40d):return parseFloat(String(_0x2b3b15))<parseFloat(String(_0x3710a6));case _0x4fc70a(0x50f):return String(_0x2b3b15)!=='';case _0x4fc70a(0x53f):return String(_0x2b3b15)==='';case'matchRegex':return new RegExp(String(_0x3710a6))[_0x4fc70a(0x18a)](String(_0x2b3b15));case'notMatchRegex':return!new RegExp(String(_0x3710a6))[_0x4fc70a(0x18a)](String(_0x2b3b15));default:return!0x1;}}catch(_0x4b68db){return console['error']('Erro\x20ao\x20avaliar\x20a\x20condição:\x20'+_0x4b68db),!0x1;}}async[a0_0x5a2dd1(0x221)](_0x486702,_0x2349be){const _0x5b8734=a0_0x5a2dd1;if(this[_0x5b8734(0x607)]['verbose'](this[_0x5b8734(0x281)]+'\x20('+this[_0x5b8734(0x632)]['wuid']+'):\x20Entrou\x20na\x20função\x20saveReply'),!_0x486702||!_0x2349be)return this['logger'][_0x5b8734(0x4a6)](this[_0x5b8734(0x281)]+'\x20('+this['instance']['wuid']+_0x5b8734(0x1bf)),null;let _0x43bd47=_0x2349be[_0x5b8734(0x643)],_0x2d6589=_0x486702[_0x5b8734(0x13f)]['lastReceivedMessage']['text']||_0x486702[_0x5b8734(0x13f)][_0x5b8734(0x2d8)][_0x5b8734(0x609)]||_0x486702[_0x5b8734(0x13f)][_0x5b8734(0x2d8)][_0x5b8734(0x55a)];try{_0x486702['chatLog'][_0x5b8734(0x235)]||(_0x486702[_0x5b8734(0x13f)][_0x5b8734(0x235)]={});let _0xc9db4a=_0x486702[_0x5b8734(0x13f)][_0x5b8734(0x235)][_0x43bd47];_0x486702['chatLog']['realVariables'][_0x43bd47]=_0x2d6589;let _0x1a0b44={'variable':_0x43bd47,'oldValue':_0xc9db4a,'newValue':_0x2d6589};this['updateConversation'](_0x486702,_0x2349be,_0x1a0b44),this[_0x5b8734(0x607)]['verbose'](this[_0x5b8734(0x281)]+'\x20('+this[_0x5b8734(0x632)][_0x5b8734(0x6b5)]+_0x5b8734(0x112));}catch(_0x5eb71d){let _0x30167a={'error':!0x0,'errorLog':_0x5eb71d[_0x5b8734(0x41a)]()};return this[_0x5b8734(0x699)](_0x486702,_0x2349be,_0x30167a),this[_0x5b8734(0x607)][_0x5b8734(0x4a6)](this[_0x5b8734(0x281)]+'\x20('+this[_0x5b8734(0x632)]['wuid']+_0x5b8734(0x14b)+_0x5eb71d[_0x5b8734(0x19d)]),null;}}async[a0_0x5a2dd1(0x1ce)](_0x22c8b6,_0x49452f){const _0x1577b7=a0_0x5a2dd1;if(this[_0x1577b7(0x607)]['verbose'](this[_0x1577b7(0x281)]+'\x20('+this[_0x1577b7(0x632)]['wuid']+_0x1577b7(0x618)),!_0x22c8b6||!_0x49452f)return this[_0x1577b7(0x607)][_0x1577b7(0x4a6)](this[_0x1577b7(0x281)]+'\x20('+this[_0x1577b7(0x632)]['wuid']+_0x1577b7(0x1bf)),null;let _0x1ae778=Date['now'](),_0x155009=parseInt(_0x49452f[_0x1577b7(0x29f)],0xa);if(isNaN(_0x155009))return this[_0x1577b7(0x607)][_0x1577b7(0x4a6)](this['instanceName']+'\x20('+this[_0x1577b7(0x632)][_0x1577b7(0x6b5)]+_0x1577b7(0x1f7)),null;let _0x25b2db={'newStoppedUntil':_0x1ae778+_0x155009*0x3c*0x3e8};return await this[_0x1577b7(0x699)](_0x22c8b6,_0x49452f,_0x25b2db,!0x0),null;}async[a0_0x5a2dd1(0x62a)](_0x3496c2,_0x5ae9be,_0x55aa29){const _0x315b7c=a0_0x5a2dd1;try{switch(_0x5ae9be[_0x315b7c(0x3b7)][_0x315b7c(0x5e3)]){case _0x315b7c(0x2c2):await this[_0x315b7c(0x251)](_0x3496c2,_0x5ae9be,_0x55aa29);break;case _0x315b7c(0x198):await this['uazapiSendMedia'](_0x3496c2,_0x5ae9be,_0x55aa29);break;case'sendLocation':await this[_0x315b7c(0x41b)](_0x3496c2,_0x5ae9be,_0x55aa29);break;case _0x315b7c(0x677):await this['uazapiSendAudio'](_0x3496c2,_0x5ae9be,_0x55aa29);break;case _0x315b7c(0x599):await this[_0x315b7c(0x1b2)](_0x3496c2,_0x5ae9be,_0x55aa29);break;case _0x315b7c(0x662):await this[_0x315b7c(0x55f)](_0x3496c2,_0x5ae9be,_0x55aa29);break;case _0x315b7c(0x3ed):await this[_0x315b7c(0x1e5)](_0x3496c2,_0x5ae9be,_0x55aa29);break;default:this[_0x315b7c(0x607)][_0x315b7c(0x4a6)](this[_0x315b7c(0x281)]+'\x20('+this['instance'][_0x315b7c(0x6b5)]+'):\x20Comando\x20desconhecido:\x20'+_0x5ae9be[_0x315b7c(0x3b7)][_0x315b7c(0x5e3)]);}}catch(_0x53fab7){this[_0x315b7c(0x607)][_0x315b7c(0x4a6)](this['instanceName']+'\x20('+this[_0x315b7c(0x632)][_0x315b7c(0x6b5)]+_0x315b7c(0x231)+_0x53fab7);}}async[a0_0x5a2dd1(0x699)](_0x2e8728,_0x1b15e7,_0x1f7437,_0x8fb47d=!0x1,_0x2d9941=!0x1){const _0x72fc5e=a0_0x5a2dd1;_0x2e8728[_0x72fc5e(0x13f)][_0x72fc5e(0x68b)]||(_0x2e8728[_0x72fc5e(0x13f)]['blockLogs']=[]);let _0x191014=(_0x2e8728[_0x72fc5e(0x13f)][_0x72fc5e(0x68b)]?.[_0x72fc5e(0x1c0)]??0x0)+0x1,_0x339501=_0x2e8728[_0x72fc5e(0x13f)]['blockLogs']['filter'](_0xa0fe84=>String(_0xa0fe84[_0x72fc5e(0x615)])===String(_0x1b15e7['_id']))['length']+0x1,_0x1744d4=_0x1f7437?.['onTime']??Date['now'](),_0x50180a=_0x1f7437?.[_0x72fc5e(0x4a6)]?_0x1f7437[_0x72fc5e(0x319)]??_0x1f7437[_0x72fc5e(0x4a6)][_0x72fc5e(0x41a)]():void 0x0,_0x21a209={'onTime':_0x1744d4,'blockId':_0x1b15e7[_0x72fc5e(0x22a)],'order':_0x191014,'activatedCount':_0x339501,'error':_0x1f7437?.['error']??!0x1,'messageId':_0x1f7437?.[_0x72fc5e(0xf3)],'apiResponse':_0x1f7437?.[_0x72fc5e(0x5ae)],'apiResponseString':_0x1f7437?.[_0x72fc5e(0x5ae)]?JSON[_0x72fc5e(0x561)](_0x1f7437?.[_0x72fc5e(0x5ae)]):void 0x0,'variable':_0x1f7437?.[_0x72fc5e(0x64c)],'oldValue':_0x1f7437?.['oldValue'],'newValue':_0x1f7437?.[_0x72fc5e(0x366)],'newStoppedUntil':_0x1f7437?.['newStoppedUntil'],'moreLogs':_0x1f7437?.[_0x72fc5e(0x118)],'errorLog':_0x50180a};if(_0x1f7437[_0x72fc5e(0x118)]&&_0x1f7437[_0x72fc5e(0x118)]['length']>0x0){let _0x83498e=_0x1f7437[_0x72fc5e(0x118)][_0x72fc5e(0x4ce)](_0x35a6f1=>this[_0x72fc5e(0x426)](_0x35a6f1,_0x2e8728[_0x72fc5e(0x13f)][_0x72fc5e(0x235)]));_0x21a209['moreLogs']=_0x83498e;}_0x2e8728[_0x72fc5e(0x13f)]['realVariables']||(_0x2e8728['chatLog'][_0x72fc5e(0x235)]={}),_0x2e8728['chatLog']['realVariables'][_0x72fc5e(0x406)]=String(_0x339501),_0x2e8728[_0x72fc5e(0x13f)][_0x72fc5e(0x235)][_0x72fc5e(0x416)]=String(_0x1f7437['error']??!0x1),_0x2e8728['chatLog'][_0x72fc5e(0x68b)]['push'](_0x21a209),_0x2e8728[_0x72fc5e(0x13f)][_0x72fc5e(0x1bb)]=_0x1b15e7[_0x72fc5e(0x22a)][_0x72fc5e(0x41a)](),_0x2e8728['chatLog'][_0x72fc5e(0x240)]&&(_0x2e8728[_0x72fc5e(0x13f)][_0x72fc5e(0x240)]=_0x2e8728[_0x72fc5e(0x13f)][_0x72fc5e(0x240)]),_0x2e8728['chatLog']['lastReceivedMessage']&&(_0x2e8728[_0x72fc5e(0x13f)][_0x72fc5e(0x2d8)]=_0x2e8728['chatLog'][_0x72fc5e(0x2d8)]),_0x2e8728[_0x72fc5e(0x13f)][_0x72fc5e(0x1f9)]&&(_0x2e8728[_0x72fc5e(0x13f)][_0x72fc5e(0x1f9)]=_0x2e8728[_0x72fc5e(0x13f)][_0x72fc5e(0x1f9)]),_0x2d9941&&(_0x2e8728[_0x72fc5e(0x50a)]='closed'),_0x8fb47d?this[_0x72fc5e(0x15d)](_0x2e8728):this[_0x72fc5e(0xf7)](_0x2e8728,_0x1b15e7);}[a0_0x5a2dd1(0x426)](_0x4ff7fd,_0x582807){const _0x27a011=a0_0x5a2dd1;return _0x4ff7fd[_0x27a011(0x269)](/\{\{([^}]+)\}\}/g,(_0x5958ad,_0x39b76e)=>_0x582807[_0x39b76e]?'{{'+_0x39b76e+_0x27a011(0x250)+_0x582807[_0x39b76e]+'\x22':'{{'+_0x39b76e+_0x27a011(0x6a0));}async[a0_0x5a2dd1(0x15d)](_0x14f0d7){const _0x22307e=a0_0x5a2dd1;try{let _0x505a42=Object['entries'](_0x14f0d7[_0x22307e(0x13f)][_0x22307e(0x235)])[_0x22307e(0x4ce)](([_0x339256,_0x28d027])=>({'name':_0x339256,'value':_0x28d027})),_0x54853c=await F[_0x22307e(0x233)]({'_id':_0x14f0d7['_id']},{'$set':{'chatLog.lastBlockId':_0x14f0d7[_0x22307e(0x13f)]['lastBlockId'],'blocks':_0x14f0d7[_0x22307e(0x60c)],'chatLog.lastSendMessage':_0x14f0d7[_0x22307e(0x13f)][_0x22307e(0x240)],'chatLog.lastReceivedMessage':_0x14f0d7['chatLog'][_0x22307e(0x2d8)],'chatLog.lastCondition':_0x14f0d7[_0x22307e(0x13f)][_0x22307e(0x1f9)],'chatLog.chatVariables':_0x505a42,'chatLog.realVariables':_0x14f0d7['chatLog'][_0x22307e(0x235)],'status':_0x14f0d7['status'],'chatLog.blockLogs':_0x14f0d7[_0x22307e(0x13f)][_0x22307e(0x68b)],'waitingPoll_id':_0x14f0d7[_0x22307e(0x448)],'waitingPoll_name':_0x14f0d7[_0x22307e(0x4dd)],'waitingPoll_replyOptions':_0x14f0d7[_0x22307e(0x12c)]}},{'new':!0x0});if(_0x54853c){this[_0x22307e(0x607)][_0x22307e(0x400)](this[_0x22307e(0x281)]+'\x20('+this[_0x22307e(0x632)][_0x22307e(0x6b5)]+_0x22307e(0x120)+_0x54853c[_0x22307e(0x22a)]);try{let _0x282c49=[_0x22307e(0x54c),'nomecompleto',_0x22307e(0x584),_0x22307e(0x5bb),'status',_0x22307e(0x634),_0x22307e(0x1ab),_0x22307e(0x272)];if(!this[_0x22307e(0x535)]&&(await this[_0x22307e(0x622)](),!this[_0x22307e(0x535)]))throw new Error(_0x22307e(0x487));let _0x2f951a=this['AutomateSystem']?.[_0x22307e(0x5b8)][_0x22307e(0x4ce)](_0x3a306f=>_0x3a306f['name']),_0x3ef4c9={};Object['entries'](_0x14f0d7['chatLog'][_0x22307e(0x235)])[_0x22307e(0x1b3)](([_0x35dc3c,_0x4aabca])=>{const _0x491522=_0x22307e;_0x282c49[_0x491522(0x40c)](_0x35dc3c)&&(_0x35dc3c===_0x491522(0x272)&&typeof _0x4aabca==_0x491522(0x17b)?_0x3ef4c9[_0x35dc3c]=_0x4aabca[_0x491522(0x60f)](',')['map'](_0x7a5142=>_0x7a5142[_0x491522(0x6bc)]())[_0x491522(0x693)](_0x37e540=>_0x37e540!==''):_0x3ef4c9[_0x35dc3c]=_0x4aabca);});let _0x26e1b6=_0x14f0d7[_0x22307e(0x13f)][_0x22307e(0x68b)][_0x14f0d7[_0x22307e(0x13f)][_0x22307e(0x68b)]['length']-0x1];if(_0x26e1b6){let _0x21a6c6=_0x26e1b6[_0x22307e(0x62d)];_0x21a6c6!==void 0x0&&(_0x3ef4c9[_0x22307e(0x1a3)]=_0x21a6c6[_0x22307e(0x41a)]());}let _0x3bcc38=_0x505a42[_0x22307e(0x693)](_0x2a41ed=>_0x2f951a['includes'](_0x2a41ed[_0x22307e(0x67e)]));this[_0x22307e(0x607)][_0x22307e(0x400)](this[_0x22307e(0x281)]+'\x20('+this[_0x22307e(0x632)][_0x22307e(0x6b5)]+_0x22307e(0x2ff)),this[_0x22307e(0x607)][_0x22307e(0x400)](_0x3ef4c9),this[_0x22307e(0x607)][_0x22307e(0x400)](this[_0x22307e(0x281)]+'\x20('+this[_0x22307e(0x632)][_0x22307e(0x6b5)]+_0x22307e(0x2bd)),this[_0x22307e(0x607)][_0x22307e(0x400)](_0x3bcc38);let _0x7ee3a5=_0x3bcc38[_0x22307e(0x4ce)](_0x19676c=>{const _0x40a64f=_0x22307e;let _0x26c776=this[_0x40a64f(0x535)]?.[_0x40a64f(0x5b8)]['find'](_0x12f0bb=>_0x12f0bb['name']===_0x19676c[_0x40a64f(0x67e)]);if(!_0x26c776)throw new Error(_0x40a64f(0x6b4)+_0x19676c[_0x40a64f(0x67e)]);return{'_id':_0x26c776[_0x40a64f(0x22a)],'value':_0x19676c[_0x40a64f(0x44e)]};});this[_0x22307e(0x607)]['verbose'](this[_0x22307e(0x281)]+'\x20('+this[_0x22307e(0x632)]['wuid']+_0x22307e(0x5e8)),this[_0x22307e(0x607)][_0x22307e(0x400)](_0x7ee3a5),await this[_0x22307e(0x34b)](_0x14f0d7[_0x22307e(0x2f8)],_0x3ef4c9,_0x7ee3a5);}catch(_0x2d4e9c){this[_0x22307e(0x607)]['error'](this[_0x22307e(0x281)]+'\x20('+this[_0x22307e(0x632)][_0x22307e(0x6b5)]+_0x22307e(0x397)+JSON['stringify'](_0x2d4e9c));}}else this[_0x22307e(0x607)][_0x22307e(0x4a6)](this['instanceName']+'\x20('+this[_0x22307e(0x632)][_0x22307e(0x6b5)]+_0x22307e(0x1b1));}catch(_0x6070b3){this['logger'][_0x22307e(0x4a6)](this[_0x22307e(0x281)]+'\x20('+this[_0x22307e(0x632)][_0x22307e(0x6b5)]+_0x22307e(0x2dc)+JSON[_0x22307e(0x561)](_0x6070b3));}}async[a0_0x5a2dd1(0x34b)](_0x536d70,_0x37a8c6,_0x115dc8){const _0x38dcb6=a0_0x5a2dd1;try{let _0x9d5c0={'leadInfo.leadnome':_0x37a8c6['nome'],'leadInfo.nomecompleto':_0x37a8c6[_0x38dcb6(0x456)],'leadInfo.email':_0x37a8c6[_0x38dcb6(0x584)],'leadInfo.cpf':_0x37a8c6[_0x38dcb6(0x5bb)],'leadInfo.status':_0x37a8c6[_0x38dcb6(0x50a)],'leadInfo.notas':_0x37a8c6['notas'],'leadInfo.responsavelid':_0x37a8c6[_0x38dcb6(0x1ab)],'leadInfo.tags':_0x37a8c6[_0x38dcb6(0x272)],'leadInfo.customFields':_0x115dc8};if('desativadoFluxoAte'in _0x37a8c6){let _0xda639b=_0x37a8c6[_0x38dcb6(0x1a3)];_0x9d5c0[_0x38dcb6(0x393)]=_0xda639b?Number(_0xda639b):null;}let _0x21dbb7=await I[_0x38dcb6(0x233)]({'id':_0x536d70,'owner':this['instance'][_0x38dcb6(0x6b5)]},{'$set':_0x9d5c0},{'new':!0x0,'upsert':!0x0});_0x21dbb7?(this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x38dcb6(0x6b5)]+'):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20'+_0x21dbb7[_0x38dcb6(0x22a)]),G(this[_0x38dcb6(0x281)],_0x38dcb6(0x672),{'chat':_0x21dbb7})):this[_0x38dcb6(0x607)][_0x38dcb6(0x4a6)](this[_0x38dcb6(0x281)]+'\x20('+this[_0x38dcb6(0x632)][_0x38dcb6(0x6b5)]+_0x38dcb6(0x5b3));}catch(_0x5053c1){this[_0x38dcb6(0x607)][_0x38dcb6(0x4a6)](this['instanceName']+'\x20('+this[_0x38dcb6(0x632)][_0x38dcb6(0x6b5)]+_0x38dcb6(0x61d)+_0x5053c1);}}async[a0_0x5a2dd1(0x29a)](_0x5df6a0,_0x8e9a80){const _0x13795e=a0_0x5a2dd1;this['logger'][_0x13795e(0x400)](this[_0x13795e(0x281)]+'\x20('+this[_0x13795e(0x632)]['wuid']+_0x13795e(0x437)+_0x8e9a80);try{let _0x12a9b9=await I[_0x13795e(0x233)]({'id':_0x5df6a0[_0x13795e(0x2f8)],'owner':_0x5df6a0['owner']},{'$set':{'leadInfo.desativadoFluxoAte':_0x8e9a80}},{'new':!0x0});this[_0x13795e(0x607)][_0x13795e(0x400)](this[_0x13795e(0x281)]+'\x20('+this['instance'][_0x13795e(0x6b5)]+_0x13795e(0x190)+_0x5df6a0[_0x13795e(0x22a)]),this[_0x13795e(0x607)][_0x13795e(0x400)](this[_0x13795e(0x281)]+'\x20('+this[_0x13795e(0x632)][_0x13795e(0x6b5)]+_0x13795e(0x437)+JSON[_0x13795e(0x561)](_0x12a9b9,null,0x2)),_0x12a9b9&&G(this[_0x13795e(0x281)],'chats',{'chat':_0x12a9b9});}catch(_0x2c72b5){this[_0x13795e(0x607)][_0x13795e(0x4a6)](this[_0x13795e(0x281)]+'\x20('+this[_0x13795e(0x632)]['wuid']+_0x13795e(0x31c)+JSON[_0x13795e(0x561)](_0x2c72b5));}}async['findFlow'](_0x1ff2b1,_0x54ed71){const _0x53abba=a0_0x5a2dd1;try{this[_0x53abba(0x607)][_0x53abba(0x400)](this[_0x53abba(0x281)]+'\x20('+this[_0x53abba(0x632)]['wuid']+'):\x20Buscando\x20flow...');let _0x5ae7b6=_0x54ed71[_0x53abba(0x269)](/\D/g,''),_0x111fde=await D[_0x53abba(0x34c)]({'owner':_0x1ff2b1,'testingWith':_0x5ae7b6});return _0x111fde||(this[_0x53abba(0x607)]['verbose'](this[_0x53abba(0x281)]+'\x20('+this[_0x53abba(0x632)]['wuid']+_0x53abba(0x119)),_0x111fde=await D['findOne']({'owner':_0x1ff2b1,'default':!0x0})),_0x111fde||(this['logger'][_0x53abba(0x400)](this[_0x53abba(0x281)]+'\x20('+this['instance'][_0x53abba(0x6b5)]+_0x53abba(0x633)),null);}catch(_0x2fc51e){return this[_0x53abba(0x607)][_0x53abba(0x4a6)](this[_0x53abba(0x281)]+'\x20('+this[_0x53abba(0x632)][_0x53abba(0x6b5)]+_0x53abba(0x5fd)+_0x2fc51e),null;}}async[a0_0x5a2dd1(0x46f)](_0x523f4e,_0x26f878,_0x5a941e){const _0x4a0a2b=a0_0x5a2dd1;try{let _0x86274b=!!_0x5a941e[_0x4a0a2b(0x55a)],_0x29de3e=_0x5a941e[_0x4a0a2b(0x636)],_0x5773d5=null;if(this[_0x4a0a2b(0x607)][_0x4a0a2b(0x400)](this[_0x4a0a2b(0x281)]+'\x20('+this[_0x4a0a2b(0x632)][_0x4a0a2b(0x6b5)]+_0x4a0a2b(0x4bc)+_0x86274b+_0x4a0a2b(0x636)+_0x29de3e),_0x86274b)return this[_0x4a0a2b(0x607)][_0x4a0a2b(0x400)](this[_0x4a0a2b(0x281)]+'\x20('+this[_0x4a0a2b(0x632)][_0x4a0a2b(0x6b5)]+'):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto'),_0x5773d5=await F[_0x4a0a2b(0x34c)]({'owner':_0x523f4e,'remoteJid':_0x26f878,'waitingPoll_id':_0x29de3e}),_0x5773d5?(_0x5773d5[_0x4a0a2b(0x1d4)]=Date[_0x4a0a2b(0x468)](),_0x5773d5[_0x4a0a2b(0x13f)][_0x4a0a2b(0x2d8)]=_0x5a941e,_0x5773d5):(this[_0x4a0a2b(0x607)][_0x4a0a2b(0x400)](this[_0x4a0a2b(0x281)]+'\x20('+this[_0x4a0a2b(0x632)][_0x4a0a2b(0x6b5)]+_0x4a0a2b(0x3ea)),null);{if(this[_0x4a0a2b(0x607)][_0x4a0a2b(0x400)](this[_0x4a0a2b(0x281)]+'\x20('+this['instance'][_0x4a0a2b(0x6b5)]+_0x4a0a2b(0x49a)+this[_0x4a0a2b(0x632)][_0x4a0a2b(0x6b5)]+_0x4a0a2b(0x465)),this[_0x4a0a2b(0x607)][_0x4a0a2b(0x400)](this[_0x4a0a2b(0x281)]+'\x20('+this[_0x4a0a2b(0x632)]['wuid']+_0x4a0a2b(0x20d)),_0x5773d5=await F[_0x4a0a2b(0x34c)]({'owner':_0x523f4e,'remoteJid':_0x26f878,'status':_0x4a0a2b(0x541)}),!_0x5773d5){let _0x172e81=await this[_0x4a0a2b(0x502)](_0x523f4e,_0x26f878);if(_0x172e81&&(_0x5773d5=await this[_0x4a0a2b(0x1a8)](_0x172e81,_0x5a941e[_0x4a0a2b(0x3a9)],_0x5a941e)),!_0x5773d5)return null;}let _0x40905e=Date[_0x4a0a2b(0x468)](),_0x1a7815=_0x5773d5?.[_0x4a0a2b(0x611)]||0x0,_0x154637=_0x40905e-_0x1a7815*0x3c*0x3e8;if(this['logger']['verbose'](this['instanceName']+'\x20('+this['instance']['wuid']+_0x4a0a2b(0x5e0)+_0x40905e+_0x4a0a2b(0x46a)+_0x1a7815+',\x20Expiration\x20Time:\x20'+_0x154637),this[_0x4a0a2b(0x607)]['verbose'](this[_0x4a0a2b(0x281)]+'\x20('+this[_0x4a0a2b(0x632)][_0x4a0a2b(0x6b5)]+_0x4a0a2b(0x309)),this[_0x4a0a2b(0x607)][_0x4a0a2b(0x400)](this[_0x4a0a2b(0x281)]+'\x20('+this[_0x4a0a2b(0x632)][_0x4a0a2b(0x6b5)]+_0x4a0a2b(0x5c0)+_0x5773d5['lastInteraction']),this['logger'][_0x4a0a2b(0x400)](this[_0x4a0a2b(0x281)]+'\x20('+this[_0x4a0a2b(0x632)][_0x4a0a2b(0x6b5)]+_0x4a0a2b(0x28f)+_0x154637),_0x5773d5[_0x4a0a2b(0x1d4)]<_0x154637){this[_0x4a0a2b(0x607)][_0x4a0a2b(0x400)](this[_0x4a0a2b(0x281)]+'\x20('+this[_0x4a0a2b(0x632)][_0x4a0a2b(0x6b5)]+_0x4a0a2b(0x515));let _0x328b26=await this['findFlow'](_0x523f4e,_0x26f878);if(_0x328b26===null)return null;_0x5773d5&&await F[_0x4a0a2b(0x5b9)]({'_id':_0x5773d5[_0x4a0a2b(0x22a)]},{'status':_0x4a0a2b(0x1f3)}),_0x5773d5=await this['createNewConversation'](_0x328b26,_0x5a941e[_0x4a0a2b(0x3a9)],_0x5a941e);}return _0x5773d5['lastInteraction']=_0x40905e,_0x5773d5[_0x4a0a2b(0x13f)][_0x4a0a2b(0x2d8)]=_0x5a941e,_0x5773d5;}}catch(_0x2372aa){return this[_0x4a0a2b(0x607)][_0x4a0a2b(0x4a6)](this['instanceName']+'\x20('+this[_0x4a0a2b(0x632)]['wuid']+_0x4a0a2b(0x4ef)+_0x2372aa),null;}}async[a0_0x5a2dd1(0x1a8)](_0x32eed5,_0x11facb,_0x5d5546){const _0x57ebb2=a0_0x5a2dd1;this['logger'][_0x57ebb2(0x400)](this[_0x57ebb2(0x281)]+'\x20('+this[_0x57ebb2(0x632)][_0x57ebb2(0x6b5)]+_0x57ebb2(0x5d6));try{let _0x38616f=require('mongodb')[_0x57ebb2(0x409)],_0x4e899d=Date['now'](),_0x31bfb7=_0x57ebb2(0x186),_0x2ece4f=_0x11facb[_0x57ebb2(0x46e)]?null:_0x5d5546,_0x174f4d=_0x11facb[_0x57ebb2(0x46e)]?_0x5d5546:null,_0x4e448b=_0x11facb[_0x57ebb2(0x2f8)];await this[_0x57ebb2(0x2ed)](_0x4e448b);let _0xfc5a80={..._0x32eed5[_0x57ebb2(0x4b4)],'chatLog':null},_0x1edaac=await this['variablesToObject'](_0xfc5a80['variables']),_0xde3c67=await this[_0x57ebb2(0x3fd)](_0x4e448b),_0x7434c5={..._0x1edaac,..._0xde3c67,'_remoteJid':_0x4e448b},_0x534aa3={'lastReceivedMessage':_0x2ece4f,'lastSendMessage':_0x174f4d,'lastBlockId':_0x31bfb7,'lastCondition':!0x0,'realVariables':_0x7434c5};_0xfc5a80[_0x57ebb2(0x13f)]=_0x534aa3,delete _0xfc5a80[_0x57ebb2(0x22a)],_0xfc5a80[_0x57ebb2(0x22a)]=new _0x38616f(),_0xfc5a80[_0x57ebb2(0x1d4)]=_0x4e899d,_0xfc5a80[_0x57ebb2(0x50a)]=_0x57ebb2(0x541),_0xfc5a80[_0x57ebb2(0x2f8)]=_0x4e448b;let _0x38b120=await F[_0x57ebb2(0x57c)](_0xfc5a80);return this[_0x57ebb2(0x607)][_0x57ebb2(0x400)](this['instanceName']+'\x20('+this[_0x57ebb2(0x632)][_0x57ebb2(0x6b5)]+_0x57ebb2(0x1de)),_0x38b120?_0xfc5a80:null;}catch(_0x1b8163){return this[_0x57ebb2(0x607)][_0x57ebb2(0x4a6)](this[_0x57ebb2(0x281)]+'\x20('+this[_0x57ebb2(0x632)]['wuid']+_0x57ebb2(0x39a)+_0x1b8163),_0x1b8163;}}async[a0_0x5a2dd1(0x251)](_0x4a37e7,_0x46419d,_0x3df2a1){const _0x17aabb=a0_0x5a2dd1;this[_0x17aabb(0x607)]['verbose'](this[_0x17aabb(0x281)]+'\x20('+this[_0x17aabb(0x632)][_0x17aabb(0x6b5)]+_0x17aabb(0x2a4));let _0x4d5385={'number':_0x3df2a1,'options':{'delay':_0x46419d[_0x17aabb(0x3b7)][_0x17aabb(0x41f)]},'textMessage':{'text':_0x46419d[_0x17aabb(0x3b7)][_0x17aabb(0x519)]}};try{let _0x519c65=await this[_0x17aabb(0x25a)](_0x4d5385);if(_0x519c65){let _0x243c1a={'_id':_0x519c65[_0x17aabb(0x3a9)]['id'],'_fromMe':_0x519c65[_0x17aabb(0x3a9)][_0x17aabb(0x46e)],'_remoteJid':_0x519c65['key'][_0x17aabb(0x2f8)]};_0x4a37e7[_0x17aabb(0x13f)][_0x17aabb(0x1bb)]=_0x46419d[_0x17aabb(0x22a)][_0x17aabb(0x41a)]();let {message_normalized:_0x1a768c}=this['normalizeMessage'](_0x519c65[_0x17aabb(0x19d)],W(_0x519c65[_0x17aabb(0x19d)]),null);_0x4a37e7[_0x17aabb(0x13f)][_0x17aabb(0x240)]=await _0x1a768c;let _0x4a4f2a={'messageId':_0x519c65['key']['id']},_0x359815=_0x4a37e7[_0x17aabb(0x13f)][_0x17aabb(0x235)];Object[_0x17aabb(0x228)](_0x359815,_0x243c1a),_0x4a37e7[_0x17aabb(0x13f)][_0x17aabb(0x235)]=_0x359815,this[_0x17aabb(0x699)](_0x4a37e7,_0x46419d,_0x4a4f2a);}else{let _0x58abbc={'error':!0x0};this[_0x17aabb(0x699)](_0x4a37e7,_0x46419d,_0x58abbc),this[_0x17aabb(0x607)][_0x17aabb(0x4a6)](this[_0x17aabb(0x281)]+'\x20('+this[_0x17aabb(0x632)][_0x17aabb(0x6b5)]+_0x17aabb(0x562));}}catch(_0x2c2795){let _0xd6f40e={'error':!0x0,'errorLog':_0x2c2795[_0x17aabb(0x41a)]()};this[_0x17aabb(0x699)](_0x4a37e7,_0x46419d,_0xd6f40e),this[_0x17aabb(0x607)]['error'](this[_0x17aabb(0x281)]+'\x20('+this['instance']['wuid']+_0x17aabb(0x620)+_0x2c2795[_0x17aabb(0x41a)]());}}async[a0_0x5a2dd1(0x308)](_0x13d04b,_0x55c327,_0x42a8af){const _0x198fce=a0_0x5a2dd1;this['logger'][_0x198fce(0x400)](this[_0x198fce(0x281)]+'\x20('+this['instance'][_0x198fce(0x6b5)]+'):\x20Enviando\x20mídia');let _0x4f61a4={'number':_0x42a8af,'options':{'delay':_0x55c327['uazapi'][_0x198fce(0x41f)]},'mediaMessage':{'mediatype':_0x55c327['uazapi'][_0x198fce(0x283)],'caption':_0x55c327[_0x198fce(0x3b7)][_0x198fce(0x609)],'media':_0x55c327[_0x198fce(0x3b7)][_0x198fce(0x404)]}};try{let _0x44f10b=await this[_0x198fce(0x297)](_0x4f61a4);if(_0x44f10b){let _0x213424={'_id':_0x44f10b[_0x198fce(0x3a9)]['id'],'_fromMe':_0x44f10b[_0x198fce(0x3a9)][_0x198fce(0x46e)],'_remoteJid':_0x44f10b['key'][_0x198fce(0x2f8)]};_0x13d04b['chatLog']['lastBlockId']=_0x55c327[_0x198fce(0x22a)][_0x198fce(0x41a)]();let {message_normalized:_0x592e6d}=this['normalizeMessage'](_0x44f10b[_0x198fce(0x19d)],W(_0x44f10b[_0x198fce(0x19d)]),null);_0x13d04b['chatLog']['lastSendMessage']=await _0x592e6d;let _0x1e2784={'messageId':_0x44f10b[_0x198fce(0x3a9)]['id']},_0x2c61ee=_0x13d04b['chatLog'][_0x198fce(0x235)];Object[_0x198fce(0x228)](_0x2c61ee,_0x213424),_0x13d04b['chatLog'][_0x198fce(0x235)]=_0x2c61ee,this['updateConversation'](_0x13d04b,_0x55c327,_0x1e2784);}else{let _0x3064fa={'error':!0x0};this[_0x198fce(0x699)](_0x13d04b,_0x55c327,_0x3064fa),this[_0x198fce(0x607)][_0x198fce(0x4a6)](this[_0x198fce(0x281)]+'\x20('+this[_0x198fce(0x632)][_0x198fce(0x6b5)]+_0x198fce(0xf6));}}catch(_0x87098b){let _0x2cae13={'error':!0x0,'errorLog':_0x87098b[_0x198fce(0x41a)]()};this['updateConversation'](_0x13d04b,_0x55c327,_0x2cae13),this[_0x198fce(0x607)][_0x198fce(0x4a6)](this[_0x198fce(0x281)]+'\x20('+this[_0x198fce(0x632)][_0x198fce(0x6b5)]+_0x198fce(0x130)+_0x87098b[_0x198fce(0x41a)]());}}async[a0_0x5a2dd1(0x41b)](_0x163eb1,_0x3b5b70,_0x372cd6){const _0x5848c9=a0_0x5a2dd1;this[_0x5848c9(0x607)][_0x5848c9(0x400)](this['instanceName']+'\x20('+this[_0x5848c9(0x632)][_0x5848c9(0x6b5)]+_0x5848c9(0x37a));let _0x50fc67={'number':_0x372cd6,'options':{'delay':_0x3b5b70[_0x5848c9(0x3b7)][_0x5848c9(0x41f)]},'locationMessage':{'name':_0x3b5b70[_0x5848c9(0x3b7)][_0x5848c9(0x67e)],'address':_0x3b5b70[_0x5848c9(0x3b7)][_0x5848c9(0x518)],'latitude':_0x3b5b70[_0x5848c9(0x3b7)][_0x5848c9(0x33e)],'longitude':_0x3b5b70[_0x5848c9(0x3b7)][_0x5848c9(0x127)]}};try{let _0x5c351a=await this[_0x5848c9(0x38b)](_0x50fc67);if(_0x5c351a){let _0x5eb1f2={'_id':_0x5c351a[_0x5848c9(0x3a9)]['id'],'_fromMe':_0x5c351a[_0x5848c9(0x3a9)][_0x5848c9(0x46e)],'_remoteJid':_0x5c351a['key'][_0x5848c9(0x2f8)]};_0x163eb1['chatLog']['lastBlockId']=_0x3b5b70[_0x5848c9(0x22a)][_0x5848c9(0x41a)]();let {message_normalized:_0x45aa28}=this[_0x5848c9(0x261)](_0x5c351a[_0x5848c9(0x19d)],W(_0x5c351a[_0x5848c9(0x19d)]),null);_0x163eb1[_0x5848c9(0x13f)]['lastSendMessage']=await _0x45aa28;let _0x2014f1={'messageId':_0x5c351a['key']['id']},_0x22e6c9=_0x163eb1[_0x5848c9(0x13f)][_0x5848c9(0x235)];Object[_0x5848c9(0x228)](_0x22e6c9,_0x5eb1f2),_0x163eb1[_0x5848c9(0x13f)][_0x5848c9(0x235)]=_0x22e6c9,this['updateConversation'](_0x163eb1,_0x3b5b70,_0x2014f1);}else{let _0x3a5f36={'error':!0x0};this['updateConversation'](_0x163eb1,_0x3b5b70,_0x3a5f36),this[_0x5848c9(0x607)][_0x5848c9(0x4a6)](this[_0x5848c9(0x281)]+'\x20('+this[_0x5848c9(0x632)][_0x5848c9(0x6b5)]+_0x5848c9(0x681));}}catch(_0x30f759){let _0x34276a={'error':!0x0,'errorLog':_0x30f759[_0x5848c9(0x41a)]()};this[_0x5848c9(0x699)](_0x163eb1,_0x3b5b70,_0x34276a),this[_0x5848c9(0x607)][_0x5848c9(0x4a6)](this[_0x5848c9(0x281)]+'\x20('+this['instance'][_0x5848c9(0x6b5)]+_0x5848c9(0x5d7)+_0x30f759[_0x5848c9(0x41a)]());}}async[a0_0x5a2dd1(0x3ae)](_0x24d385,_0x3a61f8,_0x1f685d){const _0x2f81dc=a0_0x5a2dd1;this[_0x2f81dc(0x607)][_0x2f81dc(0x400)](this[_0x2f81dc(0x281)]+'\x20('+this['instance'][_0x2f81dc(0x6b5)]+_0x2f81dc(0x6a6));let _0x107e61={'number':_0x1f685d,'options':{'delay':_0x3a61f8['uazapi'][_0x2f81dc(0x41f)]},'audioMessage':{'audio':_0x3a61f8[_0x2f81dc(0x3b7)][_0x2f81dc(0x2fe)]}};try{let _0x5c63f4=await this[_0x2f81dc(0x46c)](_0x107e61);if(_0x5c63f4){let _0x2fdbe9={'_id':_0x5c63f4[_0x2f81dc(0x3a9)]['id'],'_fromMe':_0x5c63f4[_0x2f81dc(0x3a9)]['fromMe'],'_remoteJid':_0x5c63f4[_0x2f81dc(0x3a9)]['remoteJid']};_0x24d385['chatLog'][_0x2f81dc(0x1bb)]=_0x3a61f8[_0x2f81dc(0x22a)][_0x2f81dc(0x41a)]();let {message_normalized:_0x55a813}=this['normalizeMessage'](_0x5c63f4[_0x2f81dc(0x19d)],W(_0x5c63f4['message']),null);_0x24d385[_0x2f81dc(0x13f)]['lastSendMessage']=await _0x55a813;let _0x2b2be3={'messageId':_0x5c63f4['key']['id']},_0x16177f=_0x24d385[_0x2f81dc(0x13f)]['realVariables'];Object[_0x2f81dc(0x228)](_0x16177f,_0x2fdbe9),_0x24d385['chatLog'][_0x2f81dc(0x235)]=_0x16177f,this[_0x2f81dc(0x699)](_0x24d385,_0x3a61f8,_0x2b2be3);}else{let _0xb25ac={'error':!0x0};this[_0x2f81dc(0x699)](_0x24d385,_0x3a61f8,_0xb25ac),this['logger']['error'](this[_0x2f81dc(0x281)]+'\x20('+this[_0x2f81dc(0x632)]['wuid']+_0x2f81dc(0x3a8));}}catch(_0x16ed56){let _0x490286={'error':!0x0,'errorLog':_0x16ed56[_0x2f81dc(0x41a)]()};this[_0x2f81dc(0x699)](_0x24d385,_0x3a61f8,_0x490286),this[_0x2f81dc(0x607)]['error'](this['instanceName']+'\x20('+this[_0x2f81dc(0x632)][_0x2f81dc(0x6b5)]+_0x2f81dc(0x477)+_0x16ed56[_0x2f81dc(0x41a)]());}}async[a0_0x5a2dd1(0x1b2)](_0x476571,_0x1f8013,_0x16fc1d){const _0xb8c032=a0_0x5a2dd1;this[_0xb8c032(0x607)][_0xb8c032(0x400)](this[_0xb8c032(0x281)]+'\x20('+this['instance']['wuid']+_0xb8c032(0x320));let _0x1ae86={'number':_0x16fc1d,'options':{'delay':_0x1f8013[_0xb8c032(0x3b7)][_0xb8c032(0x41f)]},'contactMessage':[{'fullName':_0x1f8013[_0xb8c032(0x3b7)][_0xb8c032(0x595)],'phoneNumber':_0x1f8013[_0xb8c032(0x3b7)][_0xb8c032(0x4e0)]}]};try{let _0x197cff=await this['contactMessage'](_0x1ae86);if(_0x197cff){let _0x4ebad2={'_id':_0x197cff[_0xb8c032(0x3a9)]['id'],'_fromMe':_0x197cff[_0xb8c032(0x3a9)]['fromMe'],'_remoteJid':_0x197cff['key'][_0xb8c032(0x2f8)]};_0x476571[_0xb8c032(0x13f)][_0xb8c032(0x1bb)]=_0x1f8013['_id']['toString']();let {message_normalized:_0x3f9176}=this['normalizeMessage'](_0x197cff[_0xb8c032(0x19d)],W(_0x197cff[_0xb8c032(0x19d)]),null);_0x476571[_0xb8c032(0x13f)]['lastSendMessage']=await _0x3f9176;let _0x1ef183={'messageId':_0x197cff[_0xb8c032(0x3a9)]['id']},_0x5cbe08=_0x476571[_0xb8c032(0x13f)][_0xb8c032(0x235)];Object[_0xb8c032(0x228)](_0x5cbe08,_0x4ebad2),_0x476571[_0xb8c032(0x13f)]['realVariables']=_0x5cbe08,this[_0xb8c032(0x699)](_0x476571,_0x1f8013,_0x1ef183);}else{let _0x17a8ca={'error':!0x0};this[_0xb8c032(0x699)](_0x476571,_0x1f8013,_0x17a8ca),this['logger'][_0xb8c032(0x4a6)](this[_0xb8c032(0x281)]+'\x20('+this[_0xb8c032(0x632)][_0xb8c032(0x6b5)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.');}}catch(_0x1ed1ac){let _0x29bd93={'error':!0x0,'errorLog':_0x1ed1ac[_0xb8c032(0x41a)]()};this[_0xb8c032(0x699)](_0x476571,_0x1f8013,_0x29bd93),this[_0xb8c032(0x607)]['error'](this[_0xb8c032(0x281)]+'\x20('+this[_0xb8c032(0x632)][_0xb8c032(0x6b5)]+_0xb8c032(0x164)+_0x1ed1ac[_0xb8c032(0x41a)]());}}[a0_0x5a2dd1(0x577)](_0x2791b2,_0x32db31){const _0xd18454=a0_0x5a2dd1;for(let _0x181a34 of _0x2791b2)_0x181a34[_0xd18454(0x32d)]&&(_0x181a34[_0xd18454(0x32d)]=this[_0xd18454(0x372)](_0x181a34[_0xd18454(0x32d)],_0x32db31)),_0x181a34['optionDescription']&&(_0x181a34[_0xd18454(0x4ed)]=this[_0xd18454(0x372)](_0x181a34[_0xd18454(0x4ed)],_0x32db31));}async['uazapiSendPoll'](_0x15f7b5,_0x4d355a,_0x2c35bd){const _0x53d5cb=a0_0x5a2dd1;this['logger'][_0x53d5cb(0x400)](this[_0x53d5cb(0x281)]+'\x20('+this[_0x53d5cb(0x632)][_0x53d5cb(0x6b5)]+_0x53d5cb(0x14d));let _0x208b55=_0x15f7b5['replyOptions'][_0x53d5cb(0x693)](_0x1cc04a=>_0x1cc04a[_0x53d5cb(0x615)]===_0x4d355a[_0x53d5cb(0x22a)]);this['replaceVariablesInReplyOptions'](_0x208b55,_0x15f7b5[_0x53d5cb(0x13f)][_0x53d5cb(0x235)]);let _0x56d258=_0x208b55[_0x53d5cb(0x4ce)](_0x29c61f=>_0x29c61f['option']),_0x5b1af0={'number':_0x2c35bd,'options':{'delay':_0x4d355a['uazapi'][_0x53d5cb(0x41f)]},'pollMessage':{'name':_0x4d355a['uazapi'][_0x53d5cb(0x67e)],'selectableCount':0x1,'values':_0x56d258}};try{let _0x7da7=await this[_0x53d5cb(0x288)](_0x5b1af0);if(_0x7da7){let _0x50a740={'_id':_0x7da7[_0x53d5cb(0x3a9)]['id'],'_fromMe':_0x7da7[_0x53d5cb(0x3a9)][_0x53d5cb(0x46e)],'_remoteJid':_0x7da7['key'][_0x53d5cb(0x2f8)]};this['logger']['verbose'](this[_0x53d5cb(0x281)]+'\x20('+this[_0x53d5cb(0x632)]['wuid']+_0x53d5cb(0x336)+_0x4d355a[_0x53d5cb(0x3b7)][_0x53d5cb(0x67e)]),_0x15f7b5['waitingPoll_id']=_0x7da7[_0x53d5cb(0x3a9)]['id'],_0x15f7b5[_0x53d5cb(0x4dd)]=_0x4d355a[_0x53d5cb(0x3b7)]['name'],_0x15f7b5[_0x53d5cb(0x12c)]=_0x208b55,this[_0x53d5cb(0x607)][_0x53d5cb(0x400)](this['instanceName']+'\x20('+this[_0x53d5cb(0x632)]['wuid']+_0x53d5cb(0x390)+_0x15f7b5[_0x53d5cb(0x4dd)]),_0x15f7b5[_0x53d5cb(0x13f)][_0x53d5cb(0x1bb)]=_0x4d355a[_0x53d5cb(0x22a)][_0x53d5cb(0x41a)]();let {message_normalized:_0x7cbf84}=this[_0x53d5cb(0x261)](_0x7da7[_0x53d5cb(0x19d)],W(_0x7da7[_0x53d5cb(0x19d)]),null);_0x15f7b5[_0x53d5cb(0x13f)][_0x53d5cb(0x240)]=await _0x7cbf84;let _0x40f5e3={'messageId':_0x7da7[_0x53d5cb(0x3a9)]['id']},_0x3da6bb=_0x15f7b5[_0x53d5cb(0x13f)][_0x53d5cb(0x235)];Object['assign'](_0x3da6bb,_0x50a740),_0x15f7b5['chatLog'][_0x53d5cb(0x235)]=_0x3da6bb,this[_0x53d5cb(0x699)](_0x15f7b5,_0x4d355a,_0x40f5e3);}else{let _0x4d8eb7={'error':!0x0};this[_0x53d5cb(0x699)](_0x15f7b5,_0x4d355a,_0x4d8eb7),this[_0x53d5cb(0x607)][_0x53d5cb(0x4a6)](this[_0x53d5cb(0x281)]+'\x20('+this[_0x53d5cb(0x632)][_0x53d5cb(0x6b5)]+_0x53d5cb(0x42d));}}catch(_0x55fca3){let _0x48fa6d={'error':!0x0,'errorLog':_0x55fca3['toString']()};this[_0x53d5cb(0x699)](_0x15f7b5,_0x4d355a,_0x48fa6d),this['logger']['error'](this[_0x53d5cb(0x281)]+'\x20('+this['instance'][_0x53d5cb(0x6b5)]+_0x53d5cb(0x52c)+_0x55fca3['toString']());}}async['uazapiDeleteMessage'](_0x53b16d,_0x2ab21c,_0x15c029){const _0x1fb64b=a0_0x5a2dd1;this['logger'][_0x1fb64b(0x400)](this[_0x1fb64b(0x281)]+'\x20('+this[_0x1fb64b(0x632)][_0x1fb64b(0x6b5)]+_0x1fb64b(0x243));let _0x372d87=_0x53b16d[_0x1fb64b(0x13f)][_0x1fb64b(0x68b)][_0x1fb64b(0x40e)](_0x211efb=>_0x211efb['blockId'][_0x1fb64b(0x41a)]()===_0x2ab21c['uazapi'][_0x1fb64b(0x615)]['toString']()),_0x3c0c7a={'id':_0x372d87[_0x1fb64b(0xf3)],'remoteJid':_0x372d87[_0x1fb64b(0x2f8)],'fromMe':_0x372d87['fromMe']};try{let _0x680ecd=await this[_0x1fb64b(0x3ed)](_0x3c0c7a);if(_0x680ecd){_0x53b16d[_0x1fb64b(0x13f)]['lastBlockId']=_0x2ab21c['_id']['toString']();let {message_normalized:_0x121254}=this['normalizeMessage'](_0x680ecd[_0x1fb64b(0x19d)],W(_0x680ecd[_0x1fb64b(0x19d)]),null);_0x53b16d[_0x1fb64b(0x13f)][_0x1fb64b(0x240)]=await _0x121254;let _0x9d9293={};this[_0x1fb64b(0x699)](_0x53b16d,_0x2ab21c,_0x9d9293);}else{let _0x170c7d={'error':!0x0};this[_0x1fb64b(0x699)](_0x53b16d,_0x2ab21c,_0x170c7d),this[_0x1fb64b(0x607)][_0x1fb64b(0x4a6)](this['instanceName']+'\x20('+this[_0x1fb64b(0x632)]['wuid']+'):\x20Falha\x20ao\x20deletar\x20mensagem.');}}catch(_0x2f723c){let _0x574463={'error':!0x0,'errorLog':_0x2f723c['toString']()};this[_0x1fb64b(0x699)](_0x53b16d,_0x2ab21c,_0x574463),this[_0x1fb64b(0x607)][_0x1fb64b(0x4a6)](this[_0x1fb64b(0x281)]+'\x20('+this['instance'][_0x1fb64b(0x6b5)]+_0x1fb64b(0x35e)+_0x2f723c['toString']());}}async[a0_0x5a2dd1(0x1b7)](_0x65d491){const _0x305b4e=a0_0x5a2dd1;try{if(this[_0x305b4e(0x607)][_0x305b4e(0x400)](this[_0x305b4e(0x281)]+'\x20('+this[_0x305b4e(0x632)][_0x305b4e(0x6b5)]+_0x305b4e(0x22e)),await D[_0x305b4e(0x34c)]({'owner':this[_0x305b4e(0x632)][_0x305b4e(0x6b5)],'name':_0x65d491[_0x305b4e(0x67e)]}))return{'message':_0x305b4e(0x6af)};_0x65d491[_0x305b4e(0x5fb)]===!0x0&&await D[_0x305b4e(0x694)]({'owner':this[_0x305b4e(0x632)][_0x305b4e(0x6b5)]},{'default':!0x1});let _0x36d183=new be[(_0x305b4e(0x52d))][(_0x305b4e(0x409))](),_0x72d83c={'_id':_0x36d183,'default':!0x0,'title':'Início','x':0x0,'y':0x0},_0x1dacfc={'_id':new be[(_0x305b4e(0x52d))][(_0x305b4e(0x409))](),'order':0x1,'groupId':_0x36d183[_0x305b4e(0x41a)](),'type':_0x305b4e(0x186)};return await D[_0x305b4e(0x57c)]({'owner':this[_0x305b4e(0x632)][_0x305b4e(0x6b5)],'name':_0x65d491[_0x305b4e(0x67e)],'groups':[_0x72d83c],'blocks':[_0x1dacfc],..._0x65d491});}catch(_0x2b4bd2){throw this[_0x305b4e(0x607)]['error'](this[_0x305b4e(0x281)]+'\x20('+this[_0x305b4e(0x632)][_0x305b4e(0x6b5)]+_0x305b4e(0x208)+_0x2b4bd2),new g(_0x305b4e(0x551)+_0x2b4bd2);}}async[a0_0x5a2dd1(0x46d)](_0x197b7c){const _0x2f113d=a0_0x5a2dd1;try{return this['logger'][_0x2f113d(0x400)](this[_0x2f113d(0x281)]+'\x20('+this[_0x2f113d(0x632)]['wuid']+_0x2f113d(0x4d9)),await D[_0x2f113d(0x246)]({'owner':this[_0x2f113d(0x632)][_0x2f113d(0x6b5)],'name':_0x197b7c});}catch(_0x5d28a6){return this[_0x2f113d(0x607)][_0x2f113d(0x4a6)](this['instanceName']+'\x20('+this[_0x2f113d(0x632)][_0x2f113d(0x6b5)]+_0x2f113d(0x2bf)+_0x5d28a6),{'message':'Erro\x20ao\x20deletar\x20o\x20fluxo:\x20'+_0x5d28a6};}}async['getFlow'](_0x2dfcc1){const _0x1d759b=a0_0x5a2dd1;try{this['logger'][_0x1d759b(0x400)](this[_0x1d759b(0x281)]+'\x20('+this[_0x1d759b(0x632)]['wuid']+'):\x20Buscando\x20flow...');let _0x279df8=await D[_0x1d759b(0x34c)]({'owner':this[_0x1d759b(0x632)]['wuid'],'name':_0x2dfcc1});if(!_0x279df8)throw new Error(_0x1d759b(0x347));if(!this[_0x1d759b(0x535)]&&(await this[_0x1d759b(0x622)](),!this[_0x1d759b(0x535)]))return null;let _0x487504=this[_0x1d759b(0x535)]?.['customFields'][_0x1d759b(0x4ce)](_0x5eaf6c=>_0x5eaf6c['name']),_0x76e9e3=[_0x1d759b(0x54c),_0x1d759b(0x456),_0x1d759b(0x584),'cpf',_0x1d759b(0x50a),_0x1d759b(0x634),_0x1d759b(0x1ab),_0x1d759b(0x272)];return _0x279df8[_0x1d759b(0x4a1)]=_0x279df8[_0x1d759b(0x4a1)]['filter'](_0x2f3f00=>!(_0x2f3f00[_0x1d759b(0x316)]==='leadInfo'||_0x2f3f00[_0x1d759b(0x373)])),_0x76e9e3[_0x1d759b(0x1b3)](_0x5927c6=>{const _0x595b0e=_0x1d759b;_0x279df8[_0x595b0e(0x4a1)][_0x595b0e(0x125)]({'folder':_0x595b0e(0x373),'name':_0x5927c6,'value':'','doc':'','leadInfo':!0x0});}),_0x487504[_0x1d759b(0x1b3)](_0x43453f=>{const _0x465f7e=_0x1d759b;let _0x4ca61a=_0x279df8[_0x465f7e(0x4a1)]['findIndex'](_0x4e579f=>_0x4e579f['name']===_0x43453f);_0x4ca61a===-0x1?_0x279df8[_0x465f7e(0x4a1)][_0x465f7e(0x125)]({'folder':_0x465f7e(0x373),'name':_0x43453f,'value':'','doc':'','leadInfo':!0x0}):(_0x279df8['variables'][_0x4ca61a]['folder']=_0x465f7e(0x373),_0x279df8[_0x465f7e(0x4a1)][_0x4ca61a][_0x465f7e(0x373)]=!0x0);}),_0x279df8[_0x1d759b(0x60c)]&&_0x279df8['blocks']['length']>0x0&&_0x279df8[_0x1d759b(0x60c)]['forEach'](_0x2f48c6=>{const _0x5e702b=_0x1d759b;_0x2f48c6[_0x5e702b(0x689)]&&_0x2f48c6[_0x5e702b(0x1d0)]&&_0x2f48c6[_0x5e702b(0x689)]===_0x2f48c6['next_groupId']&&(_0x2f48c6[_0x5e702b(0x1d0)]=null);}),await _0x279df8[_0x1d759b(0x44b)](),_0x279df8;}catch(_0x55fe7a){throw this[_0x1d759b(0x607)][_0x1d759b(0x4a6)](this['instanceName']+'\x20('+this[_0x1d759b(0x632)][_0x1d759b(0x6b5)]+_0x1d759b(0x289)+_0x55fe7a),new g(_0x1d759b(0x650)+_0x55fe7a);}}async[a0_0x5a2dd1(0x364)](){const _0x3dced3=a0_0x5a2dd1;try{return this['logger']['verbose'](this[_0x3dced3(0x281)]+'\x20('+this['instance'][_0x3dced3(0x6b5)]+_0x3dced3(0x63e)),await D['find']({'owner':this[_0x3dced3(0x632)][_0x3dced3(0x6b5)]});}catch(_0x173dc5){return this[_0x3dced3(0x607)][_0x3dced3(0x4a6)](this[_0x3dced3(0x281)]+'\x20('+this[_0x3dced3(0x632)]['wuid']+_0x3dced3(0x48e)+_0x173dc5),{'message':'Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20'+_0x173dc5};}}async[a0_0x5a2dd1(0x573)](_0x557a42){const _0x497d99=a0_0x5a2dd1;try{this['logger'][_0x497d99(0x400)](this[_0x497d99(0x281)]+'\x20('+this[_0x497d99(0x632)][_0x497d99(0x6b5)]+'):\x20Alterando\x20fluxo...');let _0x229c81=await D[_0x497d99(0x34c)]({'owner':this[_0x497d99(0x632)][_0x497d99(0x6b5)],'name':_0x557a42[_0x497d99(0x67e)]});if(!_0x229c81)return{'message':'Fluxo\x20não\x20encontrado'};if(_0x557a42['default']===!0x0&&await D[_0x497d99(0x694)]({'owner':this[_0x497d99(0x632)]['wuid']},{'default':!0x1}),_0x557a42[_0x497d99(0x23f)]){if(await D[_0x497d99(0x34c)]({'owner':this[_0x497d99(0x632)][_0x497d99(0x6b5)],'name':_0x557a42['newName']}))return{'message':_0x497d99(0x54a)};_0x557a42[_0x497d99(0x67e)]=_0x557a42[_0x497d99(0x23f)],delete _0x557a42[_0x497d99(0x23f)];}return await D[_0x497d99(0x590)](_0x229c81['_id'],{'$set':_0x557a42},{'new':!0x0});}catch(_0x373f68){throw this[_0x497d99(0x607)]['error'](this[_0x497d99(0x281)]+'\x20('+this[_0x497d99(0x632)][_0x497d99(0x6b5)]+'):\x20Erro\x20ao\x20alterar\x20fluxo:\x20'+_0x373f68),new g('Erro\x20ao\x20alterar\x20o\x20fluxo:\x20'+_0x373f68);}}async[a0_0x5a2dd1(0x66a)](_0x314ad5){const _0x4ca4a9=a0_0x5a2dd1;try{this[_0x4ca4a9(0x607)][_0x4ca4a9(0x400)](this[_0x4ca4a9(0x281)]+'\x20('+this[_0x4ca4a9(0x632)]['wuid']+_0x4ca4a9(0x5ca));let _0x43a4ee={'owner':this[_0x4ca4a9(0x632)][_0x4ca4a9(0x6b5)],'name':_0x314ad5[_0x4ca4a9(0x67e)]},_0x3ad384=await D['findOne'](_0x43a4ee);_0x3ad384||this[_0x4ca4a9(0x2b3)]('Flow\x20não\x20encontrado');let {block:_0x3769de}=_0x314ad5;return _0x3769de?.[_0x4ca4a9(0x570)]?this['deleteBlock'](_0x3ad384,_0x314ad5):_0x3769de['_id']?await this['updateBlock'](_0x3ad384,_0x314ad5):this['addBlock'](_0x3ad384,_0x314ad5),await _0x3ad384[_0x4ca4a9(0x44b)](),_0x3ad384;}catch(_0x22ce77){this[_0x4ca4a9(0x2b3)](_0x4ca4a9(0x670)+_0x22ce77);}}[a0_0x5a2dd1(0x2b3)](_0x147911){const _0x3ed3b3=a0_0x5a2dd1;throw this[_0x3ed3b3(0x607)][_0x3ed3b3(0x4a6)](this['instanceName']+'\x20('+this[_0x3ed3b3(0x632)][_0x3ed3b3(0x6b5)]+'):\x20'+_0x147911),new g(_0x147911);}[a0_0x5a2dd1(0x494)](_0x8b47c2,_0x3a6500){const _0x53dd75=a0_0x5a2dd1;let {block:_0x1523fd}=_0x3a6500;if(_0x1523fd[_0x53dd75(0x33b)]===_0x53dd75(0x186)){this[_0x53dd75(0x2b3)](_0x53dd75(0x25e));return;}if(!_0x1523fd['_id']){this[_0x53dd75(0x2b3)](_0x53dd75(0x3d4));return;}let _0x44ab5c=_0x8b47c2[_0x53dd75(0x60c)][_0x53dd75(0x40e)](_0x3cec55=>_0x3cec55['_id'][_0x53dd75(0x41a)]()===_0x3a6500['block'][_0x53dd75(0x22a)][_0x53dd75(0x41a)]());if(!_0x44ab5c){this[_0x53dd75(0x2b3)]('Bloco\x20com\x20ID\x20'+_0x1523fd[_0x53dd75(0x22a)]+_0x53dd75(0x686));return;}_0x8b47c2[_0x53dd75(0x60c)]=_0x8b47c2['blocks'][_0x53dd75(0x693)](_0x267510=>_0x267510[_0x53dd75(0x22a)][_0x53dd75(0x41a)]()!==_0x3a6500[_0x53dd75(0x42f)]['_id'][_0x53dd75(0x41a)]()),_0x8b47c2[_0x53dd75(0x3eb)]=_0x8b47c2[_0x53dd75(0x3eb)][_0x53dd75(0x693)](_0x56d0c4=>_0x56d0c4[_0x53dd75(0x615)]!==_0x1523fd[_0x53dd75(0x22a)][_0x53dd75(0x41a)]()),_0x8b47c2['varedits']=_0x8b47c2[_0x53dd75(0x60b)][_0x53dd75(0x693)](_0x2c0872=>_0x2c0872['blockId']!==_0x1523fd['_id'][_0x53dd75(0x41a)]()),_0x8b47c2[_0x53dd75(0x163)]=_0x8b47c2[_0x53dd75(0x163)][_0x53dd75(0x693)](_0x52f238=>_0x52f238['blockId']!==_0x1523fd[_0x53dd75(0x22a)][_0x53dd75(0x41a)]()),this[_0x53dd75(0x1f4)](_0x8b47c2[_0x53dd75(0x60c)],_0x44ab5c[_0x53dd75(0x689)]);}async[a0_0x5a2dd1(0x657)](_0x4c76aa,_0x1dfda5){const _0x27e3b9=a0_0x5a2dd1;let _0x200737=_0x4c76aa[_0x27e3b9(0x60c)][_0x27e3b9(0x2da)](_0x1344a1=>_0x1344a1[_0x27e3b9(0x22a)]['toString']()===_0x1dfda5[_0x27e3b9(0x42f)][_0x27e3b9(0x22a)][_0x27e3b9(0x41a)]());if(this[_0x27e3b9(0x607)][_0x27e3b9(0x400)](this[_0x27e3b9(0x281)]+'\x20('+this[_0x27e3b9(0x632)]['wuid']+_0x27e3b9(0x58e)+_0x200737),_0x200737===-0x1){this['logger'][_0x27e3b9(0x400)](_0x27e3b9(0x4b1)+_0x1dfda5[_0x27e3b9(0x42f)]['_id']+_0x27e3b9(0x4c5));return;}if(_0x4c76aa[_0x27e3b9(0x60c)][_0x200737]['type']===_0x27e3b9(0x186)){let _0x1b8ed1=Object['keys'](_0x1dfda5[_0x27e3b9(0x42f)]);if(_0x1b8ed1[_0x27e3b9(0x1c0)]>0x2||_0x1b8ed1['length']===0x2&&!_0x1b8ed1[_0x27e3b9(0x40c)]('next_groupId')){this['throwAndLogError']('Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão');return;}}let _0x2309f5=_0x4c76aa['blocks'][_0x200737][_0x27e3b9(0x689)];for(let _0x515a56 in _0x1dfda5[_0x27e3b9(0x42f)])_0x1dfda5[_0x27e3b9(0x42f)]['hasOwnProperty'](_0x515a56)&&(_0x4c76aa[_0x27e3b9(0x60c)][_0x200737][_0x515a56]=_0x1dfda5['block'][_0x515a56]);if(this[_0x27e3b9(0x607)][_0x27e3b9(0x400)](this['instanceName']+'\x20('+this[_0x27e3b9(0x632)]['wuid']+_0x27e3b9(0x10c)+JSON[_0x27e3b9(0x561)](_0x4c76aa[_0x27e3b9(0x60c)][_0x200737])),_0x4c76aa['blocks'][_0x200737][_0x27e3b9(0x517)]&&'header'in _0x4c76aa[_0x27e3b9(0x60c)][_0x200737][_0x27e3b9(0x517)]){this[_0x27e3b9(0x607)][_0x27e3b9(0x400)](this[_0x27e3b9(0x281)]+'\x20('+this['instance'][_0x27e3b9(0x6b5)]+'):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString');let _0x28a67d=JSON['stringify'](_0x4c76aa[_0x27e3b9(0x60c)][_0x200737][_0x27e3b9(0x517)][_0x27e3b9(0x5fa)],null,0x1);_0x28a67d['length']>0x2&&(_0x28a67d=_0x28a67d[_0x27e3b9(0x134)](0x1,_0x28a67d[_0x27e3b9(0x1c0)]-0x1)[_0x27e3b9(0x6bc)]()),_0x4c76aa[_0x27e3b9(0x60c)][_0x200737]['apirequest']['headerString']=_0x28a67d;}if(_0x4c76aa[_0x27e3b9(0x60c)][_0x200737][_0x27e3b9(0x517)]&&_0x27e3b9(0x4bb)in _0x4c76aa[_0x27e3b9(0x60c)][_0x200737]['apirequest']){this['logger']['verbose'](this[_0x27e3b9(0x281)]+'\x20('+this[_0x27e3b9(0x632)][_0x27e3b9(0x6b5)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString');let _0xfe142e=JSON[_0x27e3b9(0x561)](_0x4c76aa[_0x27e3b9(0x60c)][_0x200737][_0x27e3b9(0x517)][_0x27e3b9(0x4bb)],null,0x1);_0xfe142e[_0x27e3b9(0x1c0)]>0x2&&(_0xfe142e=_0xfe142e[_0x27e3b9(0x134)](0x1,_0xfe142e[_0x27e3b9(0x1c0)]-0x1)['trim']()),_0x4c76aa[_0x27e3b9(0x60c)][_0x200737][_0x27e3b9(0x517)][_0x27e3b9(0x5d9)]=_0xfe142e;}let _0x488295=_0x4c76aa[_0x27e3b9(0x60c)][_0x200737][_0x27e3b9(0x689)];_0x2309f5!==_0x488295?(this[_0x27e3b9(0x1f4)](_0x4c76aa[_0x27e3b9(0x60c)],_0x2309f5),this['reorderBlocks'](_0x4c76aa[_0x27e3b9(0x60c)],_0x488295)):this[_0x27e3b9(0x1f4)](_0x4c76aa[_0x27e3b9(0x60c)],_0x2309f5);}[a0_0x5a2dd1(0x1e7)](_0x2172a8,_0x5536e){const _0x15acdd=a0_0x5a2dd1;if(_0x5536e[_0x15acdd(0x42f)][_0x15acdd(0x33b)]==='start'){this[_0x15acdd(0x2b3)](_0x15acdd(0x598));return;}if(_0x5536e[_0x15acdd(0x42f)]['apirequest']&&_0x15acdd(0x5fa)in _0x5536e[_0x15acdd(0x42f)][_0x15acdd(0x517)]){this[_0x15acdd(0x607)][_0x15acdd(0x400)](this[_0x15acdd(0x281)]+'\x20('+this[_0x15acdd(0x632)]['wuid']+_0x15acdd(0x4ff));let _0x2fd595=JSON[_0x15acdd(0x561)](_0x5536e[_0x15acdd(0x42f)][_0x15acdd(0x517)]['header'],null,0x1);_0x2fd595[_0x15acdd(0x1c0)]>0x2&&(_0x2fd595=_0x2fd595[_0x15acdd(0x134)](0x1,_0x2fd595[_0x15acdd(0x1c0)]-0x1)[_0x15acdd(0x6bc)]()),_0x5536e['block'][_0x15acdd(0x517)][_0x15acdd(0x143)]=_0x2fd595;}_0x5536e['block'][_0x15acdd(0x517)]&&_0x15acdd(0x4bb)in _0x5536e[_0x15acdd(0x42f)][_0x15acdd(0x517)]&&(this['logger']['verbose'](this[_0x15acdd(0x281)]+'\x20('+this[_0x15acdd(0x632)][_0x15acdd(0x6b5)]+_0x15acdd(0x64f)),_0x5536e[_0x15acdd(0x42f)][_0x15acdd(0x517)]['bodyString']=JSON[_0x15acdd(0x561)](_0x5536e['block']['apirequest'][_0x15acdd(0x4bb)],null,0x1)[_0x15acdd(0x6bc)]()),_0x2172a8[_0x15acdd(0x60c)][_0x15acdd(0x125)](_0x5536e[_0x15acdd(0x42f)]),this[_0x15acdd(0x1f4)](_0x2172a8[_0x15acdd(0x60c)],_0x5536e[_0x15acdd(0x42f)][_0x15acdd(0x689)]);}[a0_0x5a2dd1(0x1f4)](_0x498bf7,_0x426baa){const _0x76efd3=a0_0x5a2dd1;let _0x748a03=_0x498bf7[_0x76efd3(0x693)](_0x23dfe5=>_0x23dfe5[_0x76efd3(0x689)]===_0x426baa);_0x748a03[_0x76efd3(0x389)]((_0x4c6a58,_0x451db0)=>_0x4c6a58[_0x76efd3(0x466)]-_0x451db0[_0x76efd3(0x466)]),_0x748a03[_0x76efd3(0x1b3)]((_0x22da4c,_0x50eb41)=>_0x22da4c[_0x76efd3(0x466)]=_0x50eb41+0x1);}async[a0_0x5a2dd1(0x458)](_0x8c6c40){const _0x290e18=a0_0x5a2dd1;try{if(this[_0x290e18(0x607)]['verbose'](this[_0x290e18(0x281)]+'\x20('+this[_0x290e18(0x632)][_0x290e18(0x6b5)]+_0x290e18(0x3be)),!_0x8c6c40||!_0x8c6c40[_0x290e18(0x3e3)]){this[_0x290e18(0x2b3)](_0x290e18(0x162));return;}let _0x42de9b={'owner':this[_0x290e18(0x632)][_0x290e18(0x6b5)],'name':_0x8c6c40['name']},_0x532c91=await D[_0x290e18(0x34c)](_0x42de9b);_0x532c91||this[_0x290e18(0x2b3)](_0x290e18(0x347));let {replyOption:_0x4130df}=_0x8c6c40;return _0x4130df?.['delete']?this['deleteReplyOption'](_0x532c91,_0x8c6c40):_0x4130df[_0x290e18(0x22a)]?await this[_0x290e18(0x22b)](_0x532c91,_0x8c6c40):this[_0x290e18(0x462)](_0x532c91,_0x8c6c40),await _0x532c91[_0x290e18(0x44b)](),_0x532c91;}catch(_0x2f5908){this[_0x290e18(0x2b3)]('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0x2f5908);}}['deleteReplyOption'](_0x150107,_0xa8217e){const _0x583ede=a0_0x5a2dd1;let {replyOption:_0x263956}=_0xa8217e;if(!_0x263956['_id']){this[_0x583ede(0x2b3)]('replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption');return;}if(!_0x150107[_0x583ede(0x163)]['find'](_0x3824a0=>_0x3824a0[_0x583ede(0x22a)][_0x583ede(0x41a)]()===_0xa8217e[_0x583ede(0x3e3)][_0x583ede(0x22a)][_0x583ede(0x41a)]())){this['throwAndLogError']('ReplyOption\x20com\x20ID\x20'+_0x263956[_0x583ede(0x22a)]+_0x583ede(0x686));return;}_0x150107[_0x583ede(0x163)]=_0x150107[_0x583ede(0x163)][_0x583ede(0x693)](_0x3d7cdd=>_0x3d7cdd[_0x583ede(0x22a)][_0x583ede(0x41a)]()!==_0xa8217e['replyOption'][_0x583ede(0x22a)][_0x583ede(0x41a)]());}async[a0_0x5a2dd1(0x22b)](_0x65a9de,_0x521286){const _0x3c3222=a0_0x5a2dd1;let _0x12a9fd=_0x65a9de[_0x3c3222(0x163)]['findIndex'](_0x5398ee=>_0x5398ee['_id'][_0x3c3222(0x41a)]()===_0x521286[_0x3c3222(0x3e3)][_0x3c3222(0x22a)][_0x3c3222(0x41a)]());if(_0x12a9fd===-0x1){this[_0x3c3222(0x2b3)](_0x3c3222(0x492)+_0x521286[_0x3c3222(0x3e3)][_0x3c3222(0x22a)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}for(let _0x57c33c in _0x521286[_0x3c3222(0x3e3)])_0x521286[_0x3c3222(0x3e3)][_0x3c3222(0x158)](_0x57c33c)&&(_0x65a9de[_0x3c3222(0x163)][_0x12a9fd][_0x57c33c]=_0x521286[_0x3c3222(0x3e3)][_0x57c33c]);}['addReplyOption'](_0x5a434b,_0x419298){const _0x986520=a0_0x5a2dd1;_0x5a434b[_0x986520(0x163)][_0x986520(0x125)](_0x419298[_0x986520(0x3e3)]);}async[a0_0x5a2dd1(0x5f2)](_0x306d09){const _0x50a670=a0_0x5a2dd1;this[_0x50a670(0x607)][_0x50a670(0x400)](this[_0x50a670(0x281)]+'\x20('+this[_0x50a670(0x632)][_0x50a670(0x6b5)]+_0x50a670(0x67c)+_0x306d09);try{this['logger'][_0x50a670(0x400)](this['instanceName']+'\x20('+this[_0x50a670(0x632)][_0x50a670(0x6b5)]+_0x50a670(0x1f1));let _0x552d83={'owner':this[_0x50a670(0x632)]['wuid'],'name':_0x306d09[_0x50a670(0x67e)]},_0x54c05e=await D['findOne'](_0x552d83);if(!_0x54c05e)throw new Error(_0x50a670(0x347));if(_0x306d09[_0x50a670(0x606)]&&_0x306d09[_0x50a670(0x606)]?.[_0x50a670(0x570)]===!0x0){if(this[_0x50a670(0x607)]['verbose'](this[_0x50a670(0x281)]+'\x20('+this[_0x50a670(0x632)][_0x50a670(0x6b5)]+_0x50a670(0x2fd)),_0x306d09[_0x50a670(0x606)]['default']===!0x0)return{'message':_0x50a670(0x52b)};if(_0x54c05e[_0x50a670(0x60c)]['some'](_0x4258cc=>_0x4258cc['groupId'][_0x50a670(0x41a)]()===_0x306d09[_0x50a670(0x606)][_0x50a670(0x22a)]))return this['logger'][_0x50a670(0x400)](this[_0x50a670(0x281)]+'\x20('+this['instance'][_0x50a670(0x6b5)]+_0x50a670(0x2c9)),{'message':'Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.'};_0x54c05e[_0x50a670(0x169)]=_0x54c05e[_0x50a670(0x169)][_0x50a670(0x693)](_0x4047cb=>_0x4047cb[_0x50a670(0x22a)][_0x50a670(0x41a)]()!==_0x306d09['group']['_id']);}else{if(_0x306d09['group']){if(_0x306d09['group'][_0x50a670(0x5fb)]===!0x0)return{'message':_0x50a670(0x667)};if(_0x306d09[_0x50a670(0x606)][_0x50a670(0x22a)]){let _0x33262d=_0x54c05e[_0x50a670(0x169)][_0x50a670(0x40e)](_0x30797c=>_0x30797c[_0x50a670(0x22a)][_0x50a670(0x41a)]()===_0x306d09['group'][_0x50a670(0x22a)]);_0x33262d&&(_0x306d09[_0x50a670(0x606)]['x']<0x0&&(_0x306d09['group']['x']=0x0),_0x306d09[_0x50a670(0x606)]['y']<0x0&&(_0x306d09['group']['y']=0x0),Object[_0x50a670(0x228)](_0x33262d,_0x306d09['group']));}else _0x54c05e[_0x50a670(0x169)][_0x50a670(0x125)](_0x306d09[_0x50a670(0x606)]);}}return await _0x54c05e[_0x50a670(0x44b)](),_0x54c05e;}catch(_0xf13bc0){throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x50a670(0x632)][_0x50a670(0x6b5)]+_0x50a670(0x3c9)+_0xf13bc0),new g('Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20'+_0xf13bc0);}}async[a0_0x5a2dd1(0x60a)](_0x1eb27f){const _0x9c0c39=a0_0x5a2dd1;try{this[_0x9c0c39(0x607)][_0x9c0c39(0x400)](this[_0x9c0c39(0x281)]+'\x20('+this[_0x9c0c39(0x632)][_0x9c0c39(0x6b5)]+_0x9c0c39(0x361));let _0x198e76={'owner':this[_0x9c0c39(0x632)]['wuid'],'name':_0x1eb27f[_0x9c0c39(0x67e)]},_0x5baf8d=await D['findOne'](_0x198e76);if(!_0x5baf8d)throw new Error(_0x9c0c39(0x347));let _0x5961b2=!0x1;if(_0x1eb27f[_0x9c0c39(0x558)]?.[_0x9c0c39(0x570)]===!0x0)_0x5baf8d[_0x9c0c39(0x3eb)]=_0x5baf8d['conditions']['filter'](_0x2b58f6=>_0x2b58f6&&_0x1eb27f['condition']&&_0x2b58f6[_0x9c0c39(0x22a)]&&_0x1eb27f[_0x9c0c39(0x558)][_0x9c0c39(0x22a)]&&_0x2b58f6[_0x9c0c39(0x22a)][_0x9c0c39(0x41a)]()!==_0x1eb27f['condition']['_id']['toString']()),_0x5961b2=!0x0;else{let _0x9be4eb=_0x5baf8d[_0x9c0c39(0x3eb)][_0x9c0c39(0x40e)](_0x57d7b2=>_0x57d7b2&&_0x1eb27f[_0x9c0c39(0x558)]&&_0x57d7b2[_0x9c0c39(0x22a)]&&_0x1eb27f[_0x9c0c39(0x558)][_0x9c0c39(0x22a)]&&_0x57d7b2[_0x9c0c39(0x22a)]['toString']()===_0x1eb27f['condition'][_0x9c0c39(0x22a)][_0x9c0c39(0x41a)]());_0x9be4eb?(_0x5961b2=_0x9be4eb[_0x9c0c39(0x466)]!==_0x1eb27f[_0x9c0c39(0x558)][_0x9c0c39(0x466)],Object[_0x9c0c39(0x228)](_0x9be4eb,_0x1eb27f['condition'])):(_0x5baf8d['conditions'][_0x9c0c39(0x125)](_0x1eb27f['condition']),_0x5961b2=!0x0);}if(_0x5961b2){_0x5baf8d['conditions'][_0x9c0c39(0x389)]((_0xae97f5,_0x4b3ee1)=>_0xae97f5[_0x9c0c39(0x466)]>_0x4b3ee1[_0x9c0c39(0x466)]?0x1:_0x4b3ee1['order']>_0xae97f5[_0x9c0c39(0x466)]?-0x1:0x0);for(let _0x3736c0=0x0;_0x3736c0<_0x5baf8d[_0x9c0c39(0x3eb)]['length'];_0x3736c0++)_0x5baf8d[_0x9c0c39(0x3eb)][_0x3736c0][_0x9c0c39(0x466)]=_0x3736c0+0x1;_0x5baf8d['conditions'][_0x9c0c39(0x1c0)]>0x0&&(_0x5baf8d[_0x9c0c39(0x3eb)][0x0][_0x9c0c39(0x293)]=_0x9c0c39(0x4a4));}return await _0x5baf8d[_0x9c0c39(0x44b)](),_0x5baf8d;}catch(_0x22294f){throw this[_0x9c0c39(0x607)][_0x9c0c39(0x4a6)](this['instanceName']+'\x20('+this[_0x9c0c39(0x632)]['wuid']+_0x9c0c39(0x523)+_0x22294f),new Error(_0x9c0c39(0x181)+_0x22294f);}}async['editFlowVaredit'](_0x266ab7){const _0x251760=a0_0x5a2dd1;try{this[_0x251760(0x607)][_0x251760(0x400)](this[_0x251760(0x281)]+'\x20('+this[_0x251760(0x632)][_0x251760(0x6b5)]+'):\x20Editando\x20edição\x20do\x20fluxo...');let _0x44a23e={'owner':this[_0x251760(0x632)]['wuid'],'name':_0x266ab7['name']},_0x107995=await D[_0x251760(0x34c)](_0x44a23e);if(!_0x107995)throw new Error('Flow\x20não\x20encontrado');let _0x4a180e=!0x1;if(_0x266ab7[_0x251760(0x51e)]?.[_0x251760(0x570)]===!0x0)_0x107995['varedits']=_0x107995[_0x251760(0x60b)][_0x251760(0x693)](_0x157cd7=>_0x157cd7&&_0x266ab7['varedit']&&_0x157cd7[_0x251760(0x22a)]&&_0x266ab7[_0x251760(0x51e)][_0x251760(0x22a)]&&_0x157cd7[_0x251760(0x22a)]['toString']()!==_0x266ab7['varedit'][_0x251760(0x22a)]['toString']()),_0x4a180e=!0x0;else{let _0x46355c=_0x107995['varedits'][_0x251760(0x40e)](_0xdbb96d=>_0xdbb96d&&_0x266ab7[_0x251760(0x51e)]&&_0xdbb96d['_id']&&_0x266ab7[_0x251760(0x51e)][_0x251760(0x22a)]&&_0xdbb96d['_id']['toString']()===_0x266ab7['varedit'][_0x251760(0x22a)][_0x251760(0x41a)]());_0x46355c?(_0x4a180e=_0x46355c[_0x251760(0x466)]!==_0x266ab7['varedit'][_0x251760(0x466)],Object[_0x251760(0x228)](_0x46355c,_0x266ab7[_0x251760(0x51e)])):(_0x107995[_0x251760(0x60b)][_0x251760(0x125)](_0x266ab7[_0x251760(0x51e)]),_0x4a180e=!0x0);}if(_0x4a180e){_0x107995[_0x251760(0x60b)][_0x251760(0x389)]((_0x3b6e90,_0x3c014c)=>_0x3b6e90[_0x251760(0x466)]>_0x3c014c[_0x251760(0x466)]?0x1:_0x3c014c[_0x251760(0x466)]>_0x3b6e90[_0x251760(0x466)]?-0x1:0x0);for(let _0x4e02dd=0x0;_0x4e02dd<_0x107995[_0x251760(0x60b)][_0x251760(0x1c0)];_0x4e02dd++)_0x107995[_0x251760(0x60b)][_0x4e02dd][_0x251760(0x466)]=_0x4e02dd+0x1;}return await _0x107995[_0x251760(0x44b)](),_0x107995;}catch(_0x4c4177){throw this['logger']['error'](this[_0x251760(0x281)]+'\x20('+this['instance'][_0x251760(0x6b5)]+_0x251760(0x523)+_0x4c4177),new g(_0x251760(0x181)+_0x4c4177);}}async[a0_0x5a2dd1(0x2e7)](_0xf9fd32){const _0x2b34b0=a0_0x5a2dd1;try{this[_0x2b34b0(0x607)]['verbose'](this[_0x2b34b0(0x281)]+'\x20('+this[_0x2b34b0(0x632)][_0x2b34b0(0x6b5)]+_0x2b34b0(0x2e6));let _0x5b22cb={'owner':this[_0x2b34b0(0x632)]['wuid'],'name':_0xf9fd32[_0x2b34b0(0x67e)]},_0x3fe399=await D['findOne'](_0x5b22cb);if(!_0x3fe399)throw new Error('Flow\x20não\x20encontrado');_0xf9fd32[_0x2b34b0(0x64c)][_0x2b34b0(0x67e)]=_0xf9fd32[_0x2b34b0(0x64c)][_0x2b34b0(0x67e)][_0x2b34b0(0x6bc)](),_0xf9fd32[_0x2b34b0(0x64c)]['name']['startsWith']('_')&&(_0xf9fd32[_0x2b34b0(0x64c)][_0x2b34b0(0x67e)]=_0xf9fd32[_0x2b34b0(0x64c)][_0x2b34b0(0x67e)][_0x2b34b0(0x134)](0x1)),_0xf9fd32[_0x2b34b0(0x64c)][_0x2b34b0(0x67e)]=_0xf9fd32[_0x2b34b0(0x64c)]['name'][_0x2b34b0(0x6bc)]();let _0x1e82e0=_0x3fe399[_0x2b34b0(0x4a1)][_0x2b34b0(0x40e)](_0x3dbe1d=>_0x3dbe1d[_0x2b34b0(0x67e)]===_0xf9fd32[_0x2b34b0(0x64c)][_0x2b34b0(0x67e)]);if(_0x1e82e0?.['leadInfo']===!0x0)throw new Error('Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.');if(_0xf9fd32[_0x2b34b0(0x64c)]?.[_0x2b34b0(0x570)]===!0x0){if(!_0x1e82e0)return{'message':_0x2b34b0(0x255)};_0x3fe399[_0x2b34b0(0x4a1)]=_0x3fe399['variables']['filter'](_0x5e336f=>_0x5e336f['name']!==_0xf9fd32[_0x2b34b0(0x64c)][_0x2b34b0(0x67e)]);}else _0x1e82e0?Object[_0x2b34b0(0x228)](_0x1e82e0,_0xf9fd32[_0x2b34b0(0x64c)]):_0x3fe399['variables'][_0x2b34b0(0x125)](_0xf9fd32[_0x2b34b0(0x64c)]);return await _0x3fe399[_0x2b34b0(0x44b)](),_0x3fe399;}catch(_0x599070){throw this[_0x2b34b0(0x607)][_0x2b34b0(0x4a6)](this[_0x2b34b0(0x281)]+'\x20('+this[_0x2b34b0(0x632)]['wuid']+_0x2b34b0(0x4c9)+_0x599070),new g(_0x2b34b0(0x103)+_0x599070);}}async[a0_0x5a2dd1(0x4e2)](_0x48d403){const _0x42adac=a0_0x5a2dd1;try{if(!this['AutomateSystem']?.[_0x42adac(0x495)][_0x42adac(0x623)])throw new g('Fluxos\x20não\x20estão\x20ativados');this[_0x42adac(0x607)][_0x42adac(0x400)](this['instanceName']+'\x20('+this['instance'][_0x42adac(0x6b5)]+_0x42adac(0x642));let _0x308cee=(await this[_0x42adac(0x3ee)]({'numbers':[_0x48d403[_0x42adac(0x2f8)]]}))[0x0];if(!_0x308cee[_0x42adac(0x36e)]&&!(0x0,w[_0x42adac(0x616)])(_0x308cee[_0x42adac(0x479)])&&!_0x308cee[_0x42adac(0x479)][_0x42adac(0x40c)](_0x42adac(0x463)))throw new g(_0x308cee);let _0x486014=await D[_0x42adac(0x34c)]({'owner':this['instance'][_0x42adac(0x6b5)],'name':_0x48d403[_0x42adac(0x67e)]});if(!_0x486014)return this[_0x42adac(0x607)][_0x42adac(0x4a6)](this['instanceName']+'\x20('+this[_0x42adac(0x632)][_0x42adac(0x6b5)]+'):\x20Flow\x20não\x20encontrado'),{'message':'Flow\x20não\x20encontrado'};let _0x3e3b65=await this[_0x42adac(0x5af)](_0x486014,_0x308cee[_0x42adac(0x479)],_0x48d403[_0x42adac(0x5d4)]);if(_0x3e3b65){this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x42adac(0x6b5)]+_0x42adac(0x2cb));let _0x420c35=await this[_0x42adac(0x1a6)](_0x3e3b65);return _0x420c35&&await this[_0x42adac(0x467)](_0x3e3b65,_0x420c35,_0x3e3b65['remoteJid']),{'message':_0x42adac(0x204)+_0x48d403[_0x42adac(0x2f8)]};}}catch(_0x1de94f){if(this['logger'][_0x42adac(0x4a6)](this[_0x42adac(0x281)]+'\x20('+this[_0x42adac(0x632)][_0x42adac(0x6b5)]+'):\x20Erro\x20ao\x20iniciar\x20fluxo\x20'+_0x1de94f),_0x1de94f&&_0x1de94f[_0x42adac(0x19d)]&&Array[_0x42adac(0x14c)](_0x1de94f['message'])&&_0x1de94f[_0x42adac(0x19d)][0x0]){let {jid:_0xe70e58,exists:_0x2af1c2}=_0x1de94f[_0x42adac(0x19d)][0x0];}throw new g(_0x42adac(0x12b)+_0x1de94f[_0x42adac(0x19d)]);}}async['closeExistingConversations'](_0x39094a){const _0x52d7be=a0_0x5a2dd1;let _0x2deb02=await F[_0x52d7be(0x694)]({'owner':this['instance'][_0x52d7be(0x6b5)],'remoteJid':_0x39094a,'status':_0x52d7be(0x541)},{'$set':{'status':_0x52d7be(0x1f3)}});return this[_0x52d7be(0x607)]['verbose'](this[_0x52d7be(0x281)]+'\x20('+this['instance'][_0x52d7be(0x6b5)]+_0x52d7be(0x302)),_0x2deb02;}async[a0_0x5a2dd1(0x5af)](_0x2d6dce,_0x432988,_0x204ae2){const _0x52ad49=a0_0x5a2dd1;this['logger'][_0x52ad49(0x400)](this[_0x52ad49(0x281)]+'\x20('+this[_0x52ad49(0x632)][_0x52ad49(0x6b5)]+_0x52ad49(0x5d6)),await this[_0x52ad49(0x2ed)](_0x432988);try{let _0x3c5c34=require(_0x52ad49(0x68d))[_0x52ad49(0x409)],_0xf3ee27=Date['now'](),_0x36d1b6='start',_0x3021c0={},_0x3f9267={},_0x7672d4={..._0x2d6dce['_doc'],'chatLog':null},_0x59a247=await this['variablesToObject'](_0x7672d4[_0x52ad49(0x4a1)]),_0x5b34bf=await this[_0x52ad49(0x3fd)](_0x432988),_0xb47476={..._0x59a247,..._0x5b34bf,'_remoteJid':_0x432988},_0x2dc250={'lastReceivedMessage':_0x3021c0,'lastSendMessage':_0x3f9267,'lastBlockId':_0x36d1b6,'lastCondition':!0x0,'realVariables':_0xb47476};_0x7672d4[_0x52ad49(0x13f)]=_0x2dc250,_0x7672d4[_0x52ad49(0x13f)][_0x52ad49(0x235)]={..._0xb47476,..._0x204ae2},delete _0x7672d4[_0x52ad49(0x22a)],_0x7672d4[_0x52ad49(0x22a)]=new _0x3c5c34(),_0x7672d4[_0x52ad49(0x1d4)]=_0xf3ee27,_0x7672d4[_0x52ad49(0x50a)]=_0x52ad49(0x541),_0x7672d4['remoteJid']=_0x432988;let _0x23d9fe=await F[_0x52ad49(0x57c)](_0x7672d4);return this[_0x52ad49(0x607)][_0x52ad49(0x400)](this['instanceName']+'\x20('+this[_0x52ad49(0x632)][_0x52ad49(0x6b5)]+_0x52ad49(0x1de)),_0x23d9fe?_0x7672d4:null;}catch(_0x4611e2){throw this[_0x52ad49(0x607)]['error'](this[_0x52ad49(0x281)]+'\x20('+this[_0x52ad49(0x632)][_0x52ad49(0x6b5)]+_0x52ad49(0x39a)+_0x4611e2),new g(_0x4611e2[_0x52ad49(0x19d)]);}}async[a0_0x5a2dd1(0x344)](_0x3e9b85){const _0x440654=a0_0x5a2dd1;try{return this['logger'][_0x440654(0x400)](this[_0x440654(0x281)]+'\x20('+this[_0x440654(0x632)][_0x440654(0x6b5)]+_0x440654(0x5a7)),this[_0x440654(0x607)][_0x440654(0x400)](this['instanceName']+'\x20('+this[_0x440654(0x632)]['wuid']+'):\x20Query\x20params:'+{'owner':this[_0x440654(0x632)]['wuid'],'_id':_0x3e9b85}),await F[_0x440654(0x34c)]({'owner':this['instance'][_0x440654(0x6b5)],'_id':_0x3e9b85});}catch(_0x3ee0a0){throw this[_0x440654(0x607)][_0x440654(0x4a6)](this[_0x440654(0x281)]+'\x20('+this['instance']['wuid']+_0x440654(0x370)+_0x3ee0a0),new g(_0x440654(0x5cf)+_0x3ee0a0[_0x440654(0x19d)]);}}async[a0_0x5a2dd1(0x2ee)](_0x412f2a,_0x2bba6e=0x64){const _0x11726d=a0_0x5a2dd1;try{this['logger'][_0x11726d(0x400)](this[_0x11726d(0x281)]+'\x20('+this['instance'][_0x11726d(0x6b5)]+_0x11726d(0x4d4));let _0x550e2d={..._0x412f2a,'owner':this[_0x11726d(0x632)]['wuid']};return this[_0x11726d(0x607)][_0x11726d(0x400)](_0x550e2d),await F['find'](_0x550e2d)['limit'](_0x2bba6e)['sort']({'lastInteraction':-0x1});}catch(_0x268532){throw this[_0x11726d(0x607)][_0x11726d(0x4a6)](this[_0x11726d(0x281)]+'\x20('+this[_0x11726d(0x632)]['wuid']+_0x11726d(0x2b0)+_0x268532),new g(_0x11726d(0x1cc)+_0x268532[_0x11726d(0x19d)]);}}async[a0_0x5a2dd1(0x59d)](_0x5594e4){const _0x15ddfb=a0_0x5a2dd1;try{return this[_0x15ddfb(0x607)][_0x15ddfb(0x400)](this['instanceName']+'\x20('+this['instance'][_0x15ddfb(0x6b5)]+_0x15ddfb(0x5a3)),this[_0x15ddfb(0x607)][_0x15ddfb(0x400)](this['instanceName']+'\x20('+this[_0x15ddfb(0x632)][_0x15ddfb(0x6b5)]+_0x15ddfb(0x298)+{'owner':this[_0x15ddfb(0x632)][_0x15ddfb(0x6b5)],'_id':_0x5594e4}),(await F['deleteOne']({'owner':this[_0x15ddfb(0x632)][_0x15ddfb(0x6b5)],'_id':_0x5594e4}))[_0x15ddfb(0x5aa)]===0x0?{'message':_0x15ddfb(0x153)}:{'message':_0x15ddfb(0x128)};}catch(_0x3230fb){throw this[_0x15ddfb(0x607)][_0x15ddfb(0x4a6)](this['instanceName']+'\x20('+this['instance'][_0x15ddfb(0x6b5)]+_0x15ddfb(0x55d)+_0x3230fb),new g(_0x15ddfb(0x407)+_0x3230fb['message']);}}async[a0_0x5a2dd1(0x2ad)](_0x393841){const _0x2f3da0=a0_0x5a2dd1;try{let {_id:_0x43fa27,chatLog:_0x250927,status:_0x566c2b}=_0x393841;if(!_0x43fa27)return{'message':_0x2f3da0(0x3c7)};let _0xad3ea4={};if(_0x566c2b!==void 0x0&&(_0xad3ea4[_0x2f3da0(0x50a)]=_0x566c2b),Object[_0x2f3da0(0x330)](_0xad3ea4)['length']===0x0)return{'message':_0x2f3da0(0x17a)};let _0x100c78=this[_0x2f3da0(0x632)][_0x2f3da0(0x6b5)],_0x152aa2=await F[_0x2f3da0(0x233)]({'_id':_0x43fa27,'owner':_0x100c78},{'$set':_0xad3ea4},{'new':!0x0});return _0x152aa2||{'message':_0x2f3da0(0x34a)};}catch(_0x3332e0){throw this[_0x2f3da0(0x607)][_0x2f3da0(0x4a6)](this['instanceName']+'\x20('+this[_0x2f3da0(0x632)][_0x2f3da0(0x6b5)]+_0x2f3da0(0x2b6)+_0x3332e0),new g('Erro\x20ao\x20editar\x20a\x20conversa:\x20'+_0x3332e0[_0x2f3da0(0x19d)]);}}async['editChat'](_0x3f8a60){const _0x139827=a0_0x5a2dd1;try{_0x3f8a60['id']=this[_0x139827(0x3b0)](_0x3f8a60['id']);let {id:_0x31608f,leadInfo:_0x2dd283}=_0x3f8a60;if(!_0x31608f)throw new Error(_0x139827(0x4ac));let _0x455ebe=(_0x304907,_0x3fea77,_0x1e3cca)=>{const _0x3a2198=_0x139827;_0x1e3cca[_0x3a2198(0x1b3)](_0x4c6c94=>{_0x304907[_0x4c6c94]!==void 0x0&&(_0x3fea77['leadInfo.'+_0x4c6c94]=_0x304907[_0x4c6c94]);});},_0x10df7c={};if(_0x455ebe(_0x2dd283,_0x10df7c,[_0x139827(0x54c),_0x139827(0x456),'email',_0x139827(0x5bb),_0x139827(0x50a),_0x139827(0x634),'tags',_0x139827(0x59c),'responsavelid']),Array[_0x139827(0x14c)](_0x2dd283[_0x139827(0x5b8)])&&(_0x10df7c[_0x139827(0x68f)]=_0x2dd283[_0x139827(0x5b8)]['map'](_0x4cd8d5=>({'_id':_0x4cd8d5[_0x139827(0x22a)],'value':_0x4cd8d5[_0x139827(0x44e)]}))),_0x3f8a60[_0x139827(0x373)]['desativadoFluxoAte']!==void 0x0&&(_0x10df7c[_0x139827(0x393)]=Number(_0x3f8a60['leadInfo'][_0x139827(0x1a3)])),_0x3f8a60[_0x139827(0x6a2)]!==void 0x0&&(_0x10df7c[_0x139827(0x6a2)]=Number(_0x3f8a60[_0x139827(0x6a2)])),Object['keys'](_0x10df7c)['length']===0x0)throw new Error('Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.');let _0x4175fd=this[_0x139827(0x632)][_0x139827(0x6b5)];if(!_0x4175fd)throw new Error('Tanto\x20id\x20quanto\x20owner\x20são\x20necessários\x20para\x20criar\x20ou\x20editar\x20um\x20chat.');if(!await I[_0x139827(0x34c)]({'id':_0x3f8a60['id'],'owner':_0x4175fd})){let _0xc4c05d=(await this[_0x139827(0x3ee)]({'numbers':[_0x3f8a60['id']]}))[0x0];if(!_0xc4c05d['exists']&&!(0x0,w[_0x139827(0x616)])(_0xc4c05d[_0x139827(0x479)])&&!_0xc4c05d['jid'][_0x139827(0x40c)](_0x139827(0x463)))throw new g(_0xc4c05d);_0x3f8a60['id']=_0xc4c05d[_0x139827(0x479)];}let _0x12f85c=await I[_0x139827(0x233)]({'id':_0x3f8a60['id'],'owner':_0x4175fd},{'$set':_0x10df7c},{'new':!0x0,'upsert':!0x0});return _0x12f85c&&G(this['instanceName'],_0x139827(0x672),{'chat':_0x12f85c}),_0x12f85c?(this[_0x139827(0x607)][_0x139827(0x400)](this[_0x139827(0x281)]+'\x20('+this[_0x139827(0x632)]['wuid']+_0x139827(0x49a)+_0x12f85c),_0x12f85c):{'message':_0x139827(0x4e1)};}catch(_0x4f0da1){throw this[_0x139827(0x607)][_0x139827(0x4a6)](this['instanceName']+'\x20('+this[_0x139827(0x632)]['wuid']+_0x139827(0x5ef)+_0x4f0da1),new g(_0x139827(0x1c6)+_0x4f0da1['message']);}}async[a0_0x5a2dd1(0x1d6)](_0xd30591){const _0x5a4c68=a0_0x5a2dd1;let _0x46f4fc=this[_0x5a4c68(0x632)][_0x5a4c68(0x6b5)];try{let _0x122159=await ie['findById'](_0x46f4fc);_0x122159||(_0x122159=new ie({'_id':_0x46f4fc}),await _0x122159[_0x5a4c68(0x44b)]());let _0x2422a3=_0xd30591[_0x5a4c68(0x22a)]?_0x122159['agents'][_0x5a4c68(0x2da)](_0xbbdb1a=>_0xbbdb1a[_0x5a4c68(0x22a)]===_0xd30591[_0x5a4c68(0x22a)]):-0x1;if(_0xd30591[_0x5a4c68(0x570)]&&_0x2422a3>-0x1)_0x122159['agents'][_0x5a4c68(0x282)](_0x2422a3,0x1);else{if(_0x2422a3>-0x1){let _0x5bcbaf=_0x122159[_0x5a4c68(0x1b8)][_0x2422a3];_0xd30591[_0x5a4c68(0x3fe)]&&(_0x5bcbaf['fone']=_0xd30591[_0x5a4c68(0x3fe)]),_0xd30591[_0x5a4c68(0x67e)]&&(_0x5bcbaf[_0x5a4c68(0x67e)]=_0xd30591['name']),_0xd30591[_0x5a4c68(0x584)]&&(_0x5bcbaf[_0x5a4c68(0x584)]=_0xd30591[_0x5a4c68(0x584)]),_0xd30591[_0x5a4c68(0x284)]&&(_0x5bcbaf[_0x5a4c68(0x284)]=_0xd30591['role']);}else _0x122159[_0x5a4c68(0x1b8)]['push']({'_id':_0xd30591[_0x5a4c68(0x22a)]||new be[(_0x5a4c68(0x5fb))][(_0x5a4c68(0x52d))]['ObjectId']()['toString'](),'fone':_0xd30591[_0x5a4c68(0x3fe)],'name':_0xd30591[_0x5a4c68(0x67e)],'email':_0xd30591['email'],'role':_0xd30591[_0x5a4c68(0x284)]});}let _0x303df3=await _0x122159[_0x5a4c68(0x44b)]();return this[_0x5a4c68(0x535)]=_0x303df3,this[_0x5a4c68(0x607)][_0x5a4c68(0x400)](this[_0x5a4c68(0x281)]+'\x20('+this[_0x5a4c68(0x632)]['wuid']+'):\x20alterando\x20this.AutomateSystem'),this[_0x5a4c68(0x607)][_0x5a4c68(0x400)](this[_0x5a4c68(0x281)]+'\x20('+this['instance']['wuid']+'):\x20'+this[_0x5a4c68(0x535)]),_0x303df3;}catch(_0x190c29){throw this[_0x5a4c68(0x607)][_0x5a4c68(0x4a6)](this[_0x5a4c68(0x281)]+'\x20('+this[_0x5a4c68(0x632)][_0x5a4c68(0x6b5)]+_0x5a4c68(0x30a)+_0x190c29),new g(_0x5a4c68(0x2df)+_0x190c29[_0x5a4c68(0x19d)]);}}async[a0_0x5a2dd1(0x37f)](_0x3c40d9){const _0x2fe7fe=a0_0x5a2dd1;let _0x2cbf77=this['instance'][_0x2fe7fe(0x6b5)];try{let _0x3c2517=await ie['findById'](_0x2cbf77);_0x3c2517||(_0x3c2517=new ie({'_id':_0x2cbf77}),await _0x3c2517[_0x2fe7fe(0x44b)]());let _0x4e0285=_0x3c40d9[_0x2fe7fe(0x22a)]?_0x3c2517[_0x2fe7fe(0x5b8)]['findIndex'](_0x401b4f=>_0x401b4f[_0x2fe7fe(0x22a)]===_0x3c40d9[_0x2fe7fe(0x22a)]):-0x1,_0x2fa066=!0x1,_0x28586c=_0x3c2517[_0x2fe7fe(0x5b8)][_0x2fe7fe(0x582)](_0x4cb721=>_0x4cb721[_0x2fe7fe(0x466)]===_0x3c40d9[_0x2fe7fe(0x466)]);if(_0x3c40d9[_0x2fe7fe(0x570)]&&_0x4e0285>-0x1)_0x3c2517[_0x2fe7fe(0x5b8)][_0x2fe7fe(0x282)](_0x4e0285,0x1),_0x2fa066=!0x0;else{if(_0x4e0285>-0x1){if(_0x3c2517['customFields']['some'](_0x445e9f=>_0x445e9f[_0x2fe7fe(0x67e)]===_0x3c40d9[_0x2fe7fe(0x67e)]&&_0x445e9f[_0x2fe7fe(0x22a)]!==_0x3c40d9[_0x2fe7fe(0x22a)]))throw new Error(_0x2fe7fe(0x379));let _0x4a82a1=_0x3c2517[_0x2fe7fe(0x5b8)][_0x4e0285];_0x3c40d9[_0x2fe7fe(0x466)]&&(_0x28586c||!Number['isInteger'](_0x3c40d9[_0x2fe7fe(0x466)]))&&(_0x4a82a1[_0x2fe7fe(0x466)]=_0x3c40d9['order'],_0x2fa066=!0x0),_0x3c40d9[_0x2fe7fe(0x67e)]&&(_0x4a82a1['name']=_0x3c40d9[_0x2fe7fe(0x67e)]);}else{if(_0x3c2517[_0x2fe7fe(0x5b8)]['some'](_0x2ea995=>_0x2ea995[_0x2fe7fe(0x67e)]===_0x3c40d9['name']&&_0x2ea995[_0x2fe7fe(0x22a)]!==_0x3c40d9[_0x2fe7fe(0x22a)]))throw new Error(_0x2fe7fe(0x379));_0x3c2517[_0x2fe7fe(0x5b8)][_0x2fe7fe(0x125)]({'_id':_0x3c40d9[_0x2fe7fe(0x22a)]||new be[(_0x2fe7fe(0x5fb))][(_0x2fe7fe(0x52d))]['ObjectId']()[_0x2fe7fe(0x41a)](),'order':_0x3c40d9['order'],'name':_0x3c40d9[_0x2fe7fe(0x67e)]}),_0x2fa066=!0x0;}}if(_0x2fa066){_0x3c2517['customFields'][_0x2fe7fe(0x389)]((_0x4ac040,_0x57bba8)=>_0x4ac040['order']>_0x57bba8['order']?0x1:_0x57bba8[_0x2fe7fe(0x466)]>_0x4ac040[_0x2fe7fe(0x466)]?-0x1:0x0);for(let _0x171b6a=0x0;_0x171b6a<_0x3c2517[_0x2fe7fe(0x5b8)][_0x2fe7fe(0x1c0)];_0x171b6a++)_0x3c2517['customFields'][_0x171b6a][_0x2fe7fe(0x466)]=_0x171b6a+0x1;}let _0x1d269b=await _0x3c2517[_0x2fe7fe(0x44b)]();return this[_0x2fe7fe(0x535)]=_0x1d269b,this[_0x2fe7fe(0x607)]['verbose'](this[_0x2fe7fe(0x281)]+'\x20('+this['instance'][_0x2fe7fe(0x6b5)]+_0x2fe7fe(0x552)),this[_0x2fe7fe(0x607)][_0x2fe7fe(0x400)](this[_0x2fe7fe(0x281)]+'\x20('+this[_0x2fe7fe(0x632)][_0x2fe7fe(0x6b5)]+_0x2fe7fe(0x49a)+this['AutomateSystem']),_0x1d269b;}catch(_0xc94a9d){throw this[_0x2fe7fe(0x607)][_0x2fe7fe(0x4a6)](this[_0x2fe7fe(0x281)]+'\x20('+this[_0x2fe7fe(0x632)][_0x2fe7fe(0x6b5)]+_0x2fe7fe(0x13d)+_0xc94a9d),new g('Erro\x20ao\x20tentar\x20updateCustomFields:\x20'+_0xc94a9d[_0x2fe7fe(0x19d)]);}}async[a0_0x5a2dd1(0x196)](_0xc80ae){const _0x1c8ccb=a0_0x5a2dd1;let _0x1558eb=this[_0x1c8ccb(0x632)][_0x1c8ccb(0x6b5)];try{let _0x11c3cf=await ie[_0x1c8ccb(0x116)](_0x1558eb);_0x11c3cf||(_0x11c3cf=new ie({'_id':_0x1558eb}),await _0x11c3cf[_0x1c8ccb(0x44b)]()),_0x11c3cf[_0x1c8ccb(0x495)]['enabled']=_0xc80ae?.[_0x1c8ccb(0x623)]!==void 0x0?_0xc80ae?.[_0x1c8ccb(0x623)]:_0x11c3cf['flowConfig'][_0x1c8ccb(0x623)],_0x11c3cf[_0x1c8ccb(0x495)][_0x1c8ccb(0x44c)]=_0xc80ae?.[_0x1c8ccb(0x44c)]!==void 0x0?_0xc80ae?.[_0x1c8ccb(0x44c)]:_0x11c3cf[_0x1c8ccb(0x495)]['ignoreGroups'],_0x11c3cf[_0x1c8ccb(0x495)][_0x1c8ccb(0x142)]=_0xc80ae?.['prefixCommand']??_0x11c3cf[_0x1c8ccb(0x495)]['prefixCommand'],_0x11c3cf['flowConfig'][_0x1c8ccb(0x1ce)]=_0xc80ae?.['stopConversation']??_0x11c3cf[_0x1c8ccb(0x495)][_0x1c8ccb(0x1ce)],_0x11c3cf['flowConfig']['stopMinutes']=_0xc80ae?.[_0x1c8ccb(0x29f)]??_0x11c3cf[_0x1c8ccb(0x495)][_0x1c8ccb(0x29f)];let _0x5a9eae=await _0x11c3cf[_0x1c8ccb(0x44b)]();return this[_0x1c8ccb(0x535)]=_0x5a9eae,this[_0x1c8ccb(0x607)][_0x1c8ccb(0x400)](this['instanceName']+'\x20('+this[_0x1c8ccb(0x632)][_0x1c8ccb(0x6b5)]+'):\x20alterando\x20this.AutomateSystem'),this[_0x1c8ccb(0x607)]['verbose'](this[_0x1c8ccb(0x281)]+'\x20('+this[_0x1c8ccb(0x632)]['wuid']+'):\x20'+this['AutomateSystem']),_0x5a9eae;}catch(_0xf392d8){throw this['logger'][_0x1c8ccb(0x4a6)](this[_0x1c8ccb(0x281)]+'\x20('+this[_0x1c8ccb(0x632)][_0x1c8ccb(0x6b5)]+_0x1c8ccb(0x30a)+_0xf392d8),new g(_0x1c8ccb(0x2df)+_0xf392d8[_0x1c8ccb(0x19d)]);}}async[a0_0x5a2dd1(0x622)](){const _0x41624e=a0_0x5a2dd1;let _0x33b891=this[_0x41624e(0x632)]['wuid'];try{let _0x4e22fd=await ie[_0x41624e(0x116)](_0x33b891);return _0x4e22fd||(_0x4e22fd=new ie({'_id':_0x33b891})),_0x4e22fd[_0x41624e(0x495)]=_0x4e22fd[_0x41624e(0x495)]||{},_0x4e22fd['flowConfig'][_0x41624e(0x623)]===void 0x0&&(_0x4e22fd[_0x41624e(0x495)][_0x41624e(0x623)]=!0x1),_0x4e22fd['flowConfig'][_0x41624e(0x44c)]===void 0x0&&(_0x4e22fd['flowConfig'][_0x41624e(0x44c)]=!0x0),_0x4e22fd[_0x41624e(0x495)]['prefixCommand']===void 0x0&&(_0x4e22fd[_0x41624e(0x495)]['prefixCommand']='!'),_0x4e22fd[_0x41624e(0x495)]['stopConversation']===void 0x0&&(_0x4e22fd[_0x41624e(0x495)]['stopConversation']=_0x41624e(0x21c)),_0x4e22fd[_0x41624e(0x495)]['stopMinutes']===void 0x0&&(_0x4e22fd[_0x41624e(0x495)][_0x41624e(0x29f)]=0x14),await _0x4e22fd['save'](),this[_0x41624e(0x535)]=_0x4e22fd,this[_0x41624e(0x607)]['verbose'](this[_0x41624e(0x281)]+'\x20('+this['instance'][_0x41624e(0x6b5)]+'):\x20Visualizando\x20AutomateSystem'),this[_0x41624e(0x607)]['verbose'](this[_0x41624e(0x535)]),_0x4e22fd;}catch(_0x23d84e){throw this[_0x41624e(0x607)][_0x41624e(0x4a6)](this[_0x41624e(0x281)]+'\x20('+this[_0x41624e(0x632)][_0x41624e(0x6b5)]+_0x41624e(0x12a)+_0x23d84e[_0x41624e(0x19d)]),new g(_0x41624e(0x27f)+_0x23d84e['message']);}}async[a0_0x5a2dd1(0x299)](){const _0x4a4dd0=a0_0x5a2dd1;let _0x26a931=()=>{const _0x5324a9=a0_0x5d83;this[_0x5324a9(0x607)][_0x5324a9(0x400)](this['instanceName']+'\x20('+this['instance'][_0x5324a9(0x6b5)]+_0x5324a9(0x505)+this[_0x5324a9(0x145)]+_0x5324a9(0x41c));},_0x20b74b=async()=>{const _0x38c26f=a0_0x5d83;this['logger'][_0x38c26f(0x400)](this[_0x38c26f(0x281)]+'\x20('+this[_0x38c26f(0x632)]['wuid']+_0x38c26f(0x3f5));let _0xd063b=Date[_0x38c26f(0x468)]()-0xc*0x3c*0x3c*0x3e8;return await U[_0x38c26f(0x40e)]({'owner':this[_0x38c26f(0x632)][_0x38c26f(0x6b5)],'status':{'$in':['scheduled',_0x38c26f(0x471)]},'$or':[{'when':{'$lte':Date['now'](),'$gte':_0xd063b}},{'when':0x0}]});},_0x4daabf=async _0x27df87=>{const _0x469823=a0_0x5d83;for(let _0x49526e of _0x27df87){if(!await U['findOneAndUpdate']({'_id':_0x49526e[_0x469823(0x22a)],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x469823(0x468)]()-0x1770}}]},{'$set':{'startSend':Date[_0x469823(0x468)]()}}))return;if(!this['isConnected']){this[_0x469823(0x607)]['verbose'](this['instanceName']+'\x20('+this[_0x469823(0x632)][_0x469823(0x6b5)]+_0x469823(0x43f));break;}(!_0x49526e['remoteJidsRemaining']||_0x49526e['remoteJidsRemaining'][_0x469823(0x1c0)]===0x0)&&(_0x49526e=await U[_0x469823(0x590)](_0x49526e[_0x469823(0x22a)],{'$set':{'status':_0x469823(0x471),'remoteJidsRemaining':[..._0x49526e[_0x469823(0x4f4)]]}},{'new':!0x0}));for(let _0x31b584 of _0x49526e[_0x469823(0x43a)]){if(this[_0x469823(0x514)]=Date[_0x469823(0x468)](),_0x49526e[_0x469823(0x1aa)]['some'](_0xf22b21=>_0xf22b21[_0x469823(0x2f8)]===_0x31b584)){this['logger'][_0x469823(0x400)](this[_0x469823(0x281)]+'\x20('+this[_0x469823(0x632)]['wuid']+_0x469823(0x5e9)+_0x31b584+_0x469823(0x13e));continue;}try{let _0x5c3cc8=await this[_0x469823(0x572)](_0x31b584,_0x49526e),_0x46084a={'remoteJid':_0x31b584,'error':_0x5c3cc8[_0x469823(0x4a6)],'id':_0x5c3cc8['id']||null,'error_log':_0x5c3cc8[_0x469823(0x671)]||null,'log_timestamp':Date[_0x469823(0x468)]()};if((await U[_0x469823(0x590)](_0x49526e[_0x469823(0x22a)],{'$push':{'messagesSend':_0x46084a},'$pull':{'remoteJidsRemaining':_0x31b584}},{'new':!0x0}))['status']==='stopped'){this[_0x469823(0x607)][_0x469823(0x400)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x469823(0x266)+_0x49526e[_0x469823(0x22a)]+_0x469823(0x583));break;}if(!this[_0x469823(0x5c3)]){this[_0x469823(0x607)][_0x469823(0x400)](this[_0x469823(0x281)]+'\x20('+this[_0x469823(0x632)][_0x469823(0x6b5)]+_0x469823(0x501));break;}if(!this[_0x469823(0x145)]){this['logger'][_0x469823(0x400)](this[_0x469823(0x281)]+'\x20('+this[_0x469823(0x632)][_0x469823(0x6b5)]+_0x469823(0x266)+_0x49526e['_id']+_0x469823(0x510));break;}let _0x44488e=this[_0x469823(0x2ab)](_0x49526e['delaySecMin'],_0x49526e['delaySecMax']);await this[_0x469823(0x20b)](_0x44488e);}catch(_0x2c1537){this[_0x469823(0x607)][_0x469823(0x4a6)](this[_0x469823(0x281)]+'\x20('+this[_0x469823(0x632)][_0x469823(0x6b5)]+_0x469823(0x565)+_0x31b584+':\x20'+_0x2c1537[_0x469823(0x19d)]);let _0x262d63={'remoteJid':_0x31b584,'status':'error','timestamp':Date[_0x469823(0x468)](),'error':_0x2c1537['message']};await U['findByIdAndUpdate'](_0x49526e[_0x469823(0x22a)],{'$push':{'messagesSend':_0x262d63},'$pull':{'remoteJidsRemaining':_0x31b584}},{'new':!0x0});}}let _0x301b49=await U[_0x469823(0x116)](_0x49526e[_0x469823(0x22a)]);_0x301b49[_0x469823(0x43a)][_0x469823(0x1c0)]===0x0&&_0x301b49['status']!=='stopped'&&await U['findByIdAndUpdate'](_0x49526e[_0x469823(0x22a)],{'$set':{'status':_0x469823(0x168)}},{'new':!0x0}),await new Promise(_0x5bc483=>setTimeout(_0x5bc483,0x1388));}},_0xe9729f=async()=>{const _0x3c50a1=a0_0x5d83;let _0x31a629=await U[_0x3c50a1(0x34c)]({'owner':this['instance'][_0x3c50a1(0x6b5)],'status':_0x3c50a1(0x637),'when':{'$gt':Date[_0x3c50a1(0x468)]()}})['sort']({'when':0x1});_0x31a629&&_0x31a629[_0x3c50a1(0x3e4)]-Date[_0x3c50a1(0x468)]()<=0x5265c00?this['delayMessage']=_0x31a629[_0x3c50a1(0x3e4)]-Date['now']():this[_0x3c50a1(0x63f)]=(0x3c+Math[_0x3c50a1(0x287)](Math[_0x3c50a1(0x3c0)]()*0x3c))*0x3c*0x3e8,this[_0x3c50a1(0x63f)]=Math[_0x3c50a1(0x641)](this[_0x3c50a1(0x63f)],0x7d0);let _0x4a46ea=Math[_0x3c50a1(0x212)](this[_0x3c50a1(0x63f)]/0xea60);if(_0x31a629){let _0x57d1a5=new Date(_0x31a629['when'])[_0x3c50a1(0x603)]();this['logger'][_0x3c50a1(0x400)](this['instanceName']+'\x20('+this[_0x3c50a1(0x632)]['wuid']+'):\x20encontrado\x20próxima\x20mensagem\x20para\x20'+_0x57d1a5+',\x20fará\x20nova\x20verificação\x20em\x20'+_0x4a46ea+_0x3c50a1(0x499));}else this['logger'][_0x3c50a1(0x400)](this['instanceName']+'\x20('+this[_0x3c50a1(0x632)][_0x3c50a1(0x6b5)]+_0x3c50a1(0x2f5)+_0x4a46ea+_0x3c50a1(0x499));setTimeout(()=>this[_0x3c50a1(0x299)](),this['delayMessage']);};if(this[_0x4a4dd0(0x145)]&&Date['now']()-this['lastSend']<0x1d4c0){_0x26a931();return;}try{let _0x1748fd=await _0x20b74b();_0x1748fd[_0x4a4dd0(0x1c0)]===0x0?this[_0x4a4dd0(0x607)][_0x4a4dd0(0x400)](this[_0x4a4dd0(0x281)]+'\x20('+this['instance'][_0x4a4dd0(0x6b5)]+_0x4a4dd0(0x131)):(this['processingScheduleMessageId']=_0x1748fd[0x0][_0x4a4dd0(0x22a)],await _0x4daabf(_0x1748fd)),await _0xe9729f(),this[_0x4a4dd0(0x145)]=null;}catch(_0x4c5826){this[_0x4a4dd0(0x607)]['error'](_0x4a4dd0(0x5d0)+_0x4c5826['message']);}}['getDelay'](_0x113383,_0x590a1c){const _0x523446=a0_0x5a2dd1;return _0x113383=Math[_0x523446(0x641)](0.5,_0x113383),_0x590a1c=Math[_0x523446(0x641)](0x3,_0x590a1c),Math[_0x523446(0x287)](Math[_0x523446(0x3c0)]()*(_0x590a1c-_0x113383+0x1)+_0x113383)*0x3e8;}[a0_0x5a2dd1(0x20b)](_0x42e9ed){return new Promise(_0x315ed0=>setTimeout(_0x315ed0,_0x42e9ed));}async[a0_0x5a2dd1(0x3fd)](_0x270366){const _0xd43c81=a0_0x5a2dd1;if(!this['AutomateSystem']&&(await this[_0xd43c81(0x622)](),!this['AutomateSystem']))return null;_0x270366=this['createJid'](_0x270366);let _0x4aa1db=await I[_0xd43c81(0x34c)]({'id':_0x270366,'owner':this['instance'][_0xd43c81(0x6b5)]}),_0x1e1ff9={};if(_0x4aa1db&&_0x4aa1db[_0xd43c81(0x373)]){let _0x395470=_0x4aa1db[_0xd43c81(0x373)];typeof _0x395470[_0xd43c81(0x54c)]=='string'&&(_0x1e1ff9['nome']=_0x395470[_0xd43c81(0x54c)]),typeof _0x395470[_0xd43c81(0x456)]=='string'&&(_0x1e1ff9[_0xd43c81(0x456)]=_0x395470['nomecompleto']),typeof _0x395470[_0xd43c81(0x584)]=='string'&&(_0x1e1ff9[_0xd43c81(0x584)]=_0x395470['email']),typeof _0x395470[_0xd43c81(0x5bb)]=='string'&&(_0x1e1ff9[_0xd43c81(0x5bb)]=_0x395470['cpf']),typeof _0x395470[_0xd43c81(0x50a)]==_0xd43c81(0x17b)&&(_0x1e1ff9[_0xd43c81(0x50a)]=_0x395470[_0xd43c81(0x50a)]),typeof _0x395470[_0xd43c81(0x634)]==_0xd43c81(0x17b)&&(_0x1e1ff9['notas']=_0x395470[_0xd43c81(0x634)]),typeof _0x395470[_0xd43c81(0x1ab)]==_0xd43c81(0x17b)&&(_0x1e1ff9[_0xd43c81(0x1ab)]=_0x395470[_0xd43c81(0x1ab)]),Array['isArray'](_0x395470[_0xd43c81(0x272)])&&(_0x1e1ff9['tags']=_0x395470[_0xd43c81(0x272)][_0xd43c81(0x295)](',\x20'));}return _0x4aa1db&&_0x4aa1db[_0xd43c81(0x373)]&&_0x4aa1db['leadInfo'][_0xd43c81(0x5b8)]&&_0x4aa1db['leadInfo'][_0xd43c81(0x5b8)][_0xd43c81(0x1b3)](_0x2ddc14=>{const _0x8a3fc4=_0xd43c81;let _0x2696cf=this[_0x8a3fc4(0x535)]?.['customFields'][_0x8a3fc4(0x40e)](_0x1e23b7=>_0x1e23b7[_0x8a3fc4(0x22a)]===_0x2ddc14[_0x8a3fc4(0x22a)]);_0x2696cf&&(_0x1e1ff9[_0x2696cf[_0x8a3fc4(0x67e)]]=_0x2ddc14[_0x8a3fc4(0x44e)]);}),_0x1e1ff9;}async[a0_0x5a2dd1(0x5a2)](_0x6111a,_0x5be25e){const _0x5d9595=a0_0x5a2dd1;let _0x2021dd=await this[_0x5d9595(0x3fd)](_0x5be25e);return this[_0x5d9595(0x372)](_0x6111a,_0x2021dd);}async[a0_0x5a2dd1(0x507)](_0x224699){const _0x53cb01=a0_0x5a2dd1;try{if(this['logger'][_0x53cb01(0x400)](this[_0x53cb01(0x281)]+'\x20('+this[_0x53cb01(0x632)]['wuid']+_0x53cb01(0x12d)),_0x224699[_0x53cb01(0x570)]&&_0x224699[_0x53cb01(0x22a)]){if(this['processingScheduleMessageId']===_0x224699['_id'][_0x53cb01(0x41a)]())throw new Error('Não\x20é\x20possível\x20excluir\x20uma\x20mensagem\x20que\x20está\x20atualmente\x20em\x20processamento.\x20Pause\x20primeiro\x20e\x20espere\x20em\x20torno\x20de\x2020\x20segundos\x20para\x20deletar');let _0x46e03f=await U[_0x53cb01(0x4e6)](_0x224699[_0x53cb01(0x22a)]);return setTimeout(()=>this[_0x53cb01(0x299)](),0x7d0),_0x46e03f;}let _0x276c78;if(_0x224699[_0x53cb01(0x22a)]&&(_0x276c78=await U[_0x53cb01(0x34c)]({'owner':this[_0x53cb01(0x632)][_0x53cb01(0x6b5)],'_id':_0x224699[_0x53cb01(0x22a)]})),_0x276c78){let _0x413cfe=_0x224699;this['processingScheduleMessageId']===_0x276c78[_0x53cb01(0x22a)][_0x53cb01(0x41a)]()&&(_0x413cfe={'status':_0x224699[_0x53cb01(0x50a)],'_id':_0x224699['_id']});let _0xb33f60=await U[_0x53cb01(0x590)](_0x276c78[_0x53cb01(0x22a)],{'$set':_0x413cfe},{'new':!0x0});return setTimeout(()=>this[_0x53cb01(0x299)](),0x7d0),_0xb33f60;}else{_0x224699[_0x53cb01(0x53e)]=this[_0x53cb01(0x632)][_0x53cb01(0x6b5)];let _0x3f8934=await new U(_0x224699)[_0x53cb01(0x44b)]();return setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x3f8934;}}catch(_0x31e23e){throw this[_0x53cb01(0x607)][_0x53cb01(0x4a6)](this['instanceName']+'\x20('+this[_0x53cb01(0x632)]['wuid']+_0x53cb01(0x673)+_0x31e23e),new g('Erro:'+_0x31e23e['message']);}}async[a0_0x5a2dd1(0x2ac)](){const _0x49bd7a=a0_0x5a2dd1;try{return await U[_0x49bd7a(0x40e)]({'owner':this['instance']['wuid']})[_0x49bd7a(0x389)]({'when':0x1});}catch(_0x5e6648){throw this[_0x49bd7a(0x607)][_0x49bd7a(0x4a6)](this[_0x49bd7a(0x281)]+'\x20('+this[_0x49bd7a(0x632)][_0x49bd7a(0x6b5)]+'):\x20Erro\x20ao\x20buscar\x20Schedule\x20Messages:'+_0x5e6648),new g(_0x49bd7a(0x24e)+_0x5e6648[_0x49bd7a(0x19d)]);}}async['deleteDoneMessages'](){const _0x2e71b1=a0_0x5a2dd1;try{return await U[_0x2e71b1(0xfa)]({'owner':this['instance'][_0x2e71b1(0x6b5)],'status':_0x2e71b1(0x168)}),this[_0x2e71b1(0x607)][_0x2e71b1(0x400)](this[_0x2e71b1(0x281)]+'\x20('+this[_0x2e71b1(0x632)][_0x2e71b1(0x6b5)]+_0x2e71b1(0x5c1)),this[_0x2e71b1(0x2ac)]();}catch(_0x375869){throw this[_0x2e71b1(0x607)][_0x2e71b1(0x4a6)](this[_0x2e71b1(0x281)]+'\x20('+this['instance'][_0x2e71b1(0x6b5)]+_0x2e71b1(0x685)+_0x375869),new g(_0x2e71b1(0x24e)+_0x375869[_0x2e71b1(0x19d)]);}}async[a0_0x5a2dd1(0x572)](_0xf7d61a,_0x67da73){const _0x338ca7=a0_0x5a2dd1;try{switch(_0x67da73[_0x338ca7(0x33b)]){case _0x338ca7(0x519):return await this[_0x338ca7(0x279)](_0x67da73,_0xf7d61a);case _0x338ca7(0x404):return await this['scheduleSendMedia'](_0x67da73,_0xf7d61a);case _0x338ca7(0x2fe):return await this['scheduleSendAudio'](_0x67da73,_0xf7d61a);default:return this['logger'][_0x338ca7(0x4a6)](this[_0x338ca7(0x281)]+'\x20('+this[_0x338ca7(0x632)]['wuid']+'):\x20Comando\x20desconhecido:\x20'+_0x67da73[_0x338ca7(0x33b)]),{'status':_0x338ca7(0x4a6),'detail':'Comando\x20desconhecido'};}}catch(_0x38e1c){return this[_0x338ca7(0x607)][_0x338ca7(0x4a6)](this[_0x338ca7(0x281)]+'\x20('+this[_0x338ca7(0x632)]['wuid']+_0x338ca7(0x3c5)+_0x38e1c),{'status':_0x338ca7(0x4a6),'detail':_0x38e1c['message']};}}['getRandomText'](_0x4d60e5){const _0x216c5a=a0_0x5a2dd1;let _0x1c305a=_0x4d60e5[_0x216c5a(0x60f)]('|'),_0x50f3c8=Math[_0x216c5a(0x287)](Math[_0x216c5a(0x3c0)]()*_0x1c305a['length']);return _0x1c305a[_0x50f3c8][_0x216c5a(0x6bc)]();}async[a0_0x5a2dd1(0x279)](_0x1a6182,_0x5da258){const _0x49e9f1=a0_0x5a2dd1;if(this[_0x49e9f1(0x607)][_0x49e9f1(0x400)](this[_0x49e9f1(0x281)]+'\x20('+this[_0x49e9f1(0x632)]['wuid']+_0x49e9f1(0x2a4)),!_0x1a6182[_0x49e9f1(0x19d)][_0x49e9f1(0x519)]||_0x1a6182['message'][_0x49e9f1(0x519)][_0x49e9f1(0x1c0)]===0x0)return{'error':!0x0,'error_log':_0x49e9f1(0x177)};let _0x51c37b=this[_0x49e9f1(0x1c7)](_0x1a6182['message']['text']),_0x5b094d=await this[_0x49e9f1(0x5a2)](_0x51c37b,_0x5da258),_0x2498af={'number':_0x5da258,'options':{'delay':_0x1a6182[_0x49e9f1(0x19d)][_0x49e9f1(0x41f)]},'textMessage':{'text':_0x5b094d}},_0x180dc6=null;try{let _0x39f841=await this[_0x49e9f1(0x25a)](_0x2498af);if(_0x39f841&&_0x39f841[_0x49e9f1(0x50a)])return{'error':!0x1,'id':_0x39f841[_0x49e9f1(0x3a9)]['id']};_0x180dc6=JSON[_0x49e9f1(0x561)](_0x39f841),this[_0x49e9f1(0x607)][_0x49e9f1(0x400)](this['instanceName']+'\x20('+this[_0x49e9f1(0x632)][_0x49e9f1(0x6b5)]+_0x49e9f1(0x49a)+_0x180dc6);}catch(_0x1c2e17){this['logger'][_0x49e9f1(0x4a6)](this[_0x49e9f1(0x281)]+'\x20('+this[_0x49e9f1(0x632)][_0x49e9f1(0x6b5)]+_0x49e9f1(0x539)+_0x1c2e17),_0x180dc6=_0x1c2e17[_0x49e9f1(0x19d)];}if(_0x180dc6)return{'error':!0x0,'error_log':(typeof _0x180dc6==_0x49e9f1(0x645)?JSON[_0x49e9f1(0x561)](_0x180dc6,null,0x2):_0x180dc6)['replace'](/[\[\]{}\n]/g,'\x20')[_0x49e9f1(0x269)](/  +/g,'\x20')};}async[a0_0x5a2dd1(0x25f)](_0x22d526,_0x4373b8){const _0x193390=a0_0x5a2dd1;this[_0x193390(0x607)][_0x193390(0x400)](this[_0x193390(0x281)]+'\x20('+this[_0x193390(0x632)][_0x193390(0x6b5)]+_0x193390(0x4e4));let _0x2e21cf;if(_0x22d526[_0x193390(0x19d)][_0x193390(0x519)]&&_0x22d526['message'][_0x193390(0x519)]['length']>0x0){let _0x791ac0=this[_0x193390(0x1c7)](_0x22d526[_0x193390(0x19d)]['text']);_0x2e21cf=await this[_0x193390(0x5a2)](_0x791ac0,_0x4373b8);}let _0x3be103={'number':_0x4373b8,'options':{'delay':_0x22d526['message'][_0x193390(0x41f)]},'mediaMessage':{'mediatype':_0x22d526['message']['mediatype'],'caption':_0x2e21cf,'media':_0x22d526[_0x193390(0x19d)]['urlOrBase64']}},_0x4ec767=null;try{let _0x15a58c=await this[_0x193390(0x297)](_0x3be103);if(_0x15a58c&&_0x15a58c[_0x193390(0x50a)])return{'error':!0x1,'id':_0x15a58c[_0x193390(0x3a9)]['id']};_0x4ec767=JSON[_0x193390(0x561)](_0x15a58c),this[_0x193390(0x607)][_0x193390(0x400)](this[_0x193390(0x281)]+'\x20('+this[_0x193390(0x632)][_0x193390(0x6b5)]+_0x193390(0x49a)+_0x4ec767);}catch(_0x2a9137){this[_0x193390(0x607)]['error'](this[_0x193390(0x281)]+'\x20('+this[_0x193390(0x632)]['wuid']+_0x193390(0x4dc)+_0x2a9137['message']),_0x4ec767=_0x2a9137[_0x193390(0x19d)];}if(_0x4ec767)return{'error':!0x0,'error_log':(typeof _0x4ec767==_0x193390(0x645)?JSON[_0x193390(0x561)](_0x4ec767,null,0x2):_0x4ec767)[_0x193390(0x269)](/[\[\]{}\n]/g,'\x20')[_0x193390(0x269)](/  +/g,'\x20')};}async[a0_0x5a2dd1(0x424)](_0x139f61,_0x24c2ce){const _0x2f7346=a0_0x5a2dd1;this[_0x2f7346(0x607)][_0x2f7346(0x400)](this[_0x2f7346(0x281)]+'\x20('+this[_0x2f7346(0x632)]['wuid']+_0x2f7346(0x6a6));let _0x156082={'number':_0x24c2ce,'options':{'delay':_0x139f61['message'][_0x2f7346(0x41f)]},'audioMessage':{'audio':_0x139f61[_0x2f7346(0x19d)]['urlOrBase64']}},_0x58551e=null;try{let _0x592c42=await this[_0x2f7346(0x46c)](_0x156082);if(_0x592c42&&_0x592c42[_0x2f7346(0x50a)])return{'error':!0x1,'id':_0x592c42[_0x2f7346(0x3a9)]['id']};_0x58551e=JSON[_0x2f7346(0x561)](_0x592c42),this[_0x2f7346(0x607)]['verbose'](this[_0x2f7346(0x281)]+'\x20('+this['instance'][_0x2f7346(0x6b5)]+_0x2f7346(0x49a)+_0x58551e);}catch(_0x41625a){this[_0x2f7346(0x607)][_0x2f7346(0x4a6)](this['instanceName']+'\x20('+this[_0x2f7346(0x632)][_0x2f7346(0x6b5)]+_0x2f7346(0xee)+_0x41625a),_0x58551e=_0x41625a['message'];}if(_0x58551e)return{'error':!0x0,'error_log':(typeof _0x58551e==_0x2f7346(0x645)?JSON[_0x2f7346(0x561)](_0x58551e,null,0x2):_0x58551e)[_0x2f7346(0x269)](/[\[\]{}\n]/g,'\x20')[_0x2f7346(0x269)](/  +/g,'\x20')};}},Ee=require(a0_0x5a2dd1(0x2b8)),jt=class c{constructor(_0x284822,_0x30b0b0,_0x134c13){const _0x3950da=a0_0x5a2dd1;this[_0x3950da(0x67b)]=_0x284822,this['configService']=_0x30b0b0,this[_0x3950da(0x104)]=_0x134c13,this['db']={},this[_0x3950da(0x10a)]={},this[_0x3950da(0x607)]=new C(c[_0x3950da(0x67e)]),this[_0x3950da(0x410)]={},(this[_0x3950da(0x348)](),this[_0x3950da(0x6a9)](),this[_0x3950da(0x3ce)](),Object[_0x3950da(0x228)](this['db'],_0x30b0b0[_0x3950da(0x5c2)](_0x3950da(0x1e4))),Object[_0x3950da(0x228)](this[_0x3950da(0x10a)],_0x30b0b0['get'](_0x3950da(0x47f))),this[_0x3950da(0x2de)]=this['db'][_0x3950da(0x159)]?this[_0x3950da(0x104)][_0x3950da(0x3a3)]?.['db'](this['db']['CONNECTION'][_0x3950da(0x524)]+_0x3950da(0x1d2)):void 0x0,this[_0x3950da(0x1c8)]=this[_0x3950da(0x10a)]['ENABLED']?new ye(this[_0x3950da(0x10a)]):void 0x0);}[a0_0x5a2dd1(0x32b)](_0x39c61e){const _0x8a55eb=a0_0x5a2dd1;let _0x51bf5a=this[_0x8a55eb(0x2a2)][_0x8a55eb(0x5c2)]('DEL_INSTANCE');typeof _0x51bf5a==_0x8a55eb(0x1a4)&&_0x51bf5a>0x0&&setTimeout(()=>{const _0x502b73=_0x8a55eb;this['waInstances'][_0x39c61e]?.[_0x502b73(0x129)]?.['state']!==_0x502b73(0x541)&&delete this['waInstances'][_0x39c61e];},0x3e8*0x3c*_0x51bf5a);}async['instanceInfo'](_0x2449dd){const _0x581f48=a0_0x5a2dd1;if(_0x2449dd&&!this['waInstances'][_0x2449dd])throw new x('Instance\x20\x22'+_0x2449dd+_0x581f48(0x555));let _0x1adf5e=[];for await(let [_0x2e7d58,_0x2daedf]of Object[_0x581f48(0x28c)](this['waInstances']))if(_0x2daedf&&_0x2daedf[_0x581f48(0x129)][_0x581f48(0x586)]===_0x581f48(0x541)){let _0x2236f1=await this['repository'][_0x581f48(0x64e)][_0x581f48(0x40e)](_0x2e7d58);_0x1adf5e[_0x581f48(0x125)]({'instance':{'instanceName':_0x2e7d58,'apikey':_0x2236f1[_0x581f48(0x18f)],'owner':_0x2daedf[_0x581f48(0x6b5)],'profileName':await _0x2daedf[_0x581f48(0x417)]()||_0x581f48(0x193),'profilePictureUrl':_0x2daedf['profilePictureUrl']}});}return _0x1adf5e['find'](_0x4bc3da=>_0x4bc3da[_0x581f48(0x632)]['instanceName']===_0x2449dd)??_0x1adf5e;}[a0_0x5a2dd1(0x3ce)](){setInterval(async()=>{const _0x13074b=a0_0x5d83;if(this['db'][_0x13074b(0x159)])(await this[_0x13074b(0x2de)][_0x13074b(0x377)]())[_0x13074b(0x1b3)](async _0x1cdef9=>{const _0x112eec=_0x13074b;let _0x3df4b9=_0x1cdef9[_0x112eec(0x38e)][_0x112eec(0x269)](/^[\w-]+./,'');await this[_0x112eec(0x2de)]['collection'](_0x3df4b9)[_0x112eec(0xfa)]({'$or':[{'_id':{'$regex':/^app.state.*/}},{'_id':{'$regex':/^session-.*/}}]});});else{let _0x10020b=(0x0,se['opendirSync'])(j,{'encoding':_0x13074b(0x48c)});for await(let _0x4d3a8f of _0x10020b)_0x4d3a8f[_0x13074b(0x1e9)]()&&(0x0,se[_0x13074b(0x5a6)])((0x0,Ee[_0x13074b(0x295)])(j,_0x4d3a8f[_0x13074b(0x67e)]),{'encoding':_0x13074b(0x48c)})['forEach'](async _0x530fcc=>{const _0x289a9f=_0x13074b;(_0x530fcc[_0x289a9f(0xeb)](/^app.state.*/)||_0x530fcc[_0x289a9f(0xeb)](/^session-.*/))&&(0x0,se[_0x289a9f(0x3e9)])((0x0,Ee[_0x289a9f(0x295)])(j,_0x4d3a8f['name'],_0x530fcc),{'recursive':!0x0,'force':!0x0});});}},0xe10*0x3e8*0x2);}async['cleaningUp'](_0x4d10fc){const _0x3f0390=a0_0x5a2dd1;this['db'][_0x3f0390(0x159)]&&(await this[_0x3f0390(0x104)][_0x3f0390(0x3a3)][_0x3f0390(0x6c2)](),(await this['dbInstance'][_0x3f0390(0x377)]())['length']>0x0&&await this['dbInstance'][_0x3f0390(0x321)](_0x4d10fc)),this[_0x3f0390(0x10a)]['ENABLED']&&(this['redisCache'][_0x3f0390(0x50c)]=_0x4d10fc,await this[_0x3f0390(0x1c8)][_0x3f0390(0x5bd)]()),!this['db'][_0x3f0390(0x159)]&&!this[_0x3f0390(0x10a)]['ENABLED']&&(0x0,se[_0x3f0390(0x3e9)])((0x0,Ee['join'])(j,_0x4d10fc),{'recursive':!0x0,'force':!0x0});}async['loadInstance'](){const _0x4c357d=a0_0x5a2dd1;let _0x549015=async _0x3388a0=>{const _0x3869e5=a0_0x5d83;let _0x4c446a=new Se(this['configService'],this[_0x3869e5(0x67b)],this['repository']);_0x4c446a['instanceName']=_0x3388a0,await _0x4c446a[_0x3869e5(0x2c3)](),this[_0x3869e5(0x410)][_0x3388a0]=_0x4c446a;};try{if(this[_0x4c357d(0x10a)][_0x4c357d(0x159)]){let _0x3aff79=await this[_0x4c357d(0x1c8)]['instanceKeys']();_0x3aff79?.['length']>0x0&&_0x3aff79['forEach'](async _0x4f6aba=>await _0x549015(_0x4f6aba[_0x4c357d(0x60f)](':')[0x1]));}if(this['db'][_0x4c357d(0x159)]){await this[_0x4c357d(0x104)][_0x4c357d(0x3a3)][_0x4c357d(0x6c2)]();let _0x27f587=await this[_0x4c357d(0x2de)]['collections']();_0x27f587['length']>0x0&&_0x27f587[_0x4c357d(0x1b3)](async _0x16bc94=>await _0x549015(_0x16bc94[_0x4c357d(0x38e)][_0x4c357d(0x269)](/^[\w-]+\./,'')));return;}let _0x1aea30=(0x0,se['opendirSync'])(j,{'encoding':_0x4c357d(0x48c)});for await(let _0x42f5f0 of _0x1aea30)if(_0x42f5f0[_0x4c357d(0x1e9)]()){if((0x0,se[_0x4c357d(0x5a6)])((0x0,Ee[_0x4c357d(0x295)])(j,_0x42f5f0[_0x4c357d(0x67e)]),{'encoding':'utf-8'})['length']===0x0){(0x0,se[_0x4c357d(0x3e9)])((0x0,Ee[_0x4c357d(0x295)])(j,_0x42f5f0[_0x4c357d(0x67e)]),{'recursive':!0x0,'force':!0x0});break;}await _0x549015(_0x42f5f0[_0x4c357d(0x67e)]);}}catch(_0x4bd994){this[_0x4c357d(0x607)][_0x4c357d(0x4a6)](_0x4bd994);}}[a0_0x5a2dd1(0x348)](){const _0x4619b8=a0_0x5a2dd1;this[_0x4619b8(0x67b)]['on'](_0x4619b8(0x4e7),async _0x571e89=>{const _0x556f2d=_0x4619b8;try{this[_0x556f2d(0x410)][_0x571e89]=void 0x0;}catch{}try{this['cleaningUp'](_0x571e89);}finally{this[_0x556f2d(0x607)][_0x556f2d(0x214)](_0x556f2d(0x69b)+_0x571e89+_0x556f2d(0x44f));}});}['noConnection'](){const _0x575e2c=a0_0x5a2dd1;this[_0x575e2c(0x67b)]['on'](_0x575e2c(0x3aa),async _0x181ad1=>{const _0x420eed=_0x575e2c;try{this[_0x420eed(0x410)][_0x181ad1]=void 0x0,this[_0x420eed(0x1df)](_0x181ad1);}catch(_0x1f2055){this[_0x420eed(0x607)][_0x420eed(0x4a6)]({'localError':'noConnection','warn':'Error\x20deleting\x20instance\x20from\x20memory.','error':_0x1f2055});}finally{this[_0x420eed(0x607)]['warn']('Instance\x20\x22'+_0x181ad1+'\x22\x20-\x20NOT\x20CONNECTION');}});}},xe=require(a0_0x5a2dd1(0x2b8)),ve=require('fs'),Bt=class extends B{constructor(_0x1bd8dc,_0x85dc11){const _0x5509f5=a0_0x5a2dd1;super(_0x85dc11),this[_0x5509f5(0x201)]=_0x1bd8dc,this['configService']=_0x85dc11;}async[a0_0x5a2dd1(0x2a7)](_0x506066,_0x159172=!0x1){const _0x2191d3=a0_0x5a2dd1;if(_0x506066[_0x2191d3(0x1c0)]!==0x0)try{return this[_0x2191d3(0x3f1)][_0x2191d3(0x159)]&&_0x159172?{'insertCount':(await this[_0x2191d3(0x201)][_0x2191d3(0x628)]([..._0x506066]))[_0x2191d3(0x1c0)]}:(_0x506066[_0x2191d3(0x1b3)](_0x59a2ce=>{const _0x185c00=_0x2191d3;this[_0x185c00(0x26d)]({'path':(0x0,xe[_0x185c00(0x295)])(this[_0x185c00(0x2b1)],_0x185c00(0x672),_0x59a2ce[_0x185c00(0x53e)]),'fileName':_0x59a2ce['id'],'data':_0x59a2ce});}),{'insertCount':_0x506066[_0x2191d3(0x1c0)]});}catch(_0x3f406c){return _0x3f406c;}finally{_0x506066=void 0x0;}}async[a0_0x5a2dd1(0x40e)](_0x56da8a){const _0x412b2f=a0_0x5a2dd1;try{if(this[_0x412b2f(0x3f1)][_0x412b2f(0x159)])return await this[_0x412b2f(0x201)]['find']({'owner':_0x56da8a[_0x412b2f(0x16d)]['owner']})[_0x412b2f(0x389)]({'lastmsg':-0x1})[_0x412b2f(0x16b)](_0x56da8a?.[_0x412b2f(0x16b)]??0x0)[_0x412b2f(0x42b)]();let _0x1ba27e=[],_0x224dd9=(0x0,ve[_0x412b2f(0x6ad)])((0x0,xe[_0x412b2f(0x295)])(this[_0x412b2f(0x2b1)],_0x412b2f(0x672),_0x56da8a['where'][_0x412b2f(0x53e)]));for await(let _0x102867 of _0x224dd9)_0x102867[_0x412b2f(0x654)]()&&_0x1ba27e[_0x412b2f(0x125)](JSON['parse']((0x0,ve['readFileSync'])((0x0,xe['join'])(this['storePath'],'chats',_0x56da8a[_0x412b2f(0x16d)][_0x412b2f(0x53e)],_0x102867[_0x412b2f(0x67e)]),{'encoding':_0x412b2f(0x48c)})));return _0x1ba27e;}catch{return[];}}async[a0_0x5a2dd1(0x570)](_0x31cdfe){const _0x325e18=a0_0x5a2dd1;try{return this[_0x325e18(0x3f1)][_0x325e18(0x159)]?await this[_0x325e18(0x201)]['deleteMany']({..._0x31cdfe[_0x325e18(0x16d)]}):((0x0,ve[_0x325e18(0x3e9)])((0x0,xe[_0x325e18(0x295)])(this['storePath'],_0x325e18(0x672),_0x31cdfe['where']['owner'],_0x31cdfe[_0x325e18(0x16d)]['id']+'.josn'),{'force':!0x0,'recursive':!0x0}),{'deleted':{'chatId':_0x31cdfe['where']['id']}});}catch(_0x3a03cd){return{'error':_0x3a03cd?.['toString']()};}}async['findOne'](_0x262a4e){const _0x17328a=a0_0x5a2dd1;try{if(this[_0x17328a(0x3f1)][_0x17328a(0x159)])return await this['chatModel'][_0x17328a(0x34c)]({'owner':_0x262a4e[_0x17328a(0x16d)][_0x17328a(0x53e)]})[_0x17328a(0x42b)]();}catch{return null;}}async['update'](_0x36dd96,_0x5ec222){const _0x5ddd40=a0_0x5a2dd1;try{this[_0x5ddd40(0x3f1)][_0x5ddd40(0x159)]&&await this[_0x5ddd40(0x201)][_0x5ddd40(0x5b9)]({..._0x36dd96['where']},{'$set':_0x5ec222});}catch(_0x829d87){console[_0x5ddd40(0x4a6)](_0x829d87);}}async[a0_0x5a2dd1(0x694)](_0x393591,_0x3e1be5){const _0x1eec67=a0_0x5a2dd1;try{if(this['dbSettings'][_0x1eec67(0x159)]){let _0x2b3442=_0x393591[_0x1eec67(0x4ce)]((_0x52ba77,_0x46899a)=>({'updateOne':{'filter':{..._0x52ba77[_0x1eec67(0x16d)]},'update':{'$set':_0x3e1be5[_0x46899a]}}}));await this[_0x1eec67(0x201)][_0x1eec67(0x1fb)](_0x2b3442);}}catch(_0x4c5a60){console[_0x1eec67(0x4a6)](_0x4c5a60);}}},Ft=class{constructor(_0x22a888){const _0x288bf8=a0_0x5a2dd1;this[_0x288bf8(0x6bb)]=_0x22a888;}async['editChat']({instanceName:_0x4cdf95},_0x15a527){const _0x4a29c8=a0_0x5a2dd1;return await this[_0x4a29c8(0x6bb)][_0x4a29c8(0x410)][_0x4cdf95][_0x4a29c8(0x691)](_0x15a527);}async[a0_0x5a2dd1(0x3ee)]({instanceName:_0x3ece5e},_0x177b9f){const _0x53e2bd=a0_0x5a2dd1;return await this[_0x53e2bd(0x6bb)][_0x53e2bd(0x410)][_0x3ece5e]['whatsappNumber'](_0x177b9f);}async[a0_0x5a2dd1(0x587)]({instanceName:_0xa4ed28},_0x2f8cde){const _0x5bdc21=a0_0x5a2dd1;return await this[_0x5bdc21(0x6bb)]['waInstances'][_0xa4ed28][_0x5bdc21(0x296)](_0x2f8cde);}async[a0_0x5a2dd1(0x4cc)]({instanceName:_0x1029dd},_0xdb2961){const _0x25369b=a0_0x5a2dd1;return await this[_0x25369b(0x6bb)][_0x25369b(0x410)][_0x1029dd][_0x25369b(0x4cc)](_0xdb2961);}async[a0_0x5a2dd1(0x3ed)]({instanceName:_0x4f9dda},_0x4125bb){const _0x236d65=a0_0x5a2dd1;return await this[_0x236d65(0x6bb)]['waInstances'][_0x4f9dda][_0x236d65(0x3ed)](_0x4125bb);}async[a0_0x5a2dd1(0x12e)]({instanceName:_0x3c7846},_0x163dbf){const _0x31a5c5=a0_0x5a2dd1;return await this[_0x31a5c5(0x6bb)][_0x31a5c5(0x410)][_0x3c7846][_0x31a5c5(0x3d6)](_0x163dbf[_0x31a5c5(0x1a4)]);}async[a0_0x5a2dd1(0x66b)]({instanceName:_0x2f7edf},_0x3ffdaf){const _0x13a76e=a0_0x5a2dd1;return await this[_0x13a76e(0x6bb)][_0x13a76e(0x410)][_0x2f7edf][_0x13a76e(0x66b)](_0x3ffdaf['number']);}async[a0_0x5a2dd1(0x5fe)]({instanceName:_0x3f53f8},_0x2eb0a2){const _0x5b4c35=a0_0x5a2dd1;return await this[_0x5b4c35(0x6bb)][_0x5b4c35(0x410)][_0x3f53f8][_0x5b4c35(0x5fe)](_0x2eb0a2);}async[a0_0x5a2dd1(0x2e5)]({instanceName:_0x27efa2},_0x28533e){const _0x3032da=a0_0x5a2dd1;return await this[_0x3032da(0x6bb)][_0x3032da(0x410)][_0x27efa2][_0x3032da(0x2e5)](_0x28533e);}async[a0_0x5a2dd1(0x110)]({instanceName:_0x1cc3c4},_0x5d1102){const _0x3c1fc5=a0_0x5a2dd1;return await this[_0x3c1fc5(0x6bb)][_0x3c1fc5(0x410)][_0x1cc3c4]['getBase64FromMediaMessage'](_0x5d1102);}async[a0_0x5a2dd1(0x3a2)]({instanceName:_0x368a86},_0x5e14ac){const _0x36b2e8=a0_0x5a2dd1;return await this['waMonitor'][_0x36b2e8(0x410)][_0x368a86][_0x36b2e8(0x3a2)](_0x5e14ac);}async[a0_0x5a2dd1(0x54d)]({instanceName:_0x2d8305},_0x3a4ef){const _0x4ac40f=a0_0x5a2dd1;return await this[_0x4ac40f(0x6bb)][_0x4ac40f(0x410)][_0x2d8305][_0x4ac40f(0x54d)](_0x3a4ef);}async['fetchChats']({instanceName:_0x3ae791}){const _0x4d1126=a0_0x5a2dd1;return await this[_0x4d1126(0x6bb)][_0x4d1126(0x410)][_0x3ae791][_0x4d1126(0x58c)]();}async[a0_0x5a2dd1(0x476)]({instanceName:_0x375695}){const _0x595fdf=a0_0x5a2dd1;return await this[_0x595fdf(0x6bb)][_0x595fdf(0x410)][_0x375695][_0x595fdf(0x476)]();}async[a0_0x5a2dd1(0x10e)]({instanceName:_0x29efb3},_0x2f9bbe){const _0x5b4cc2=a0_0x5a2dd1;return await this[_0x5b4cc2(0x6bb)]['waInstances'][_0x29efb3]['updatePrivacySettings'](_0x2f9bbe);}async[a0_0x5a2dd1(0x3f2)]({instanceName:_0x34686f},_0x43e412){const _0x2686e=a0_0x5a2dd1;return await this[_0x2686e(0x6bb)]['waInstances'][_0x34686f][_0x2686e(0x3f2)](_0x43e412[_0x2686e(0x1a4)]);}async['updateProfileName']({instanceName:_0x556225},_0x5c3fd5){const _0x126396=a0_0x5a2dd1;return await this[_0x126396(0x6bb)]['waInstances'][_0x556225][_0x126396(0x5db)](_0x5c3fd5[_0x126396(0x67e)]);}async[a0_0x5a2dd1(0x6bd)]({instanceName:_0xf0ac7f},_0x4de033){const _0x204b1c=a0_0x5a2dd1;return await this[_0x204b1c(0x6bb)]['waInstances'][_0xf0ac7f]['updateProfileStatus'](_0x4de033[_0x204b1c(0x50a)]);}async[a0_0x5a2dd1(0x382)]({instanceName:_0x2a8604},_0x59c9a3){const _0x3d6f50=a0_0x5a2dd1;return await this['waMonitor'][_0x3d6f50(0x410)][_0x2a8604][_0x3d6f50(0x382)](_0x59c9a3[_0x3d6f50(0x267)]);}async[a0_0x5a2dd1(0x1d8)]({instanceName:_0x109be7},_0x3726d0){const _0x3f8341=a0_0x5a2dd1;return await this[_0x3f8341(0x6bb)][_0x3f8341(0x410)][_0x109be7]['removeProfilePicture']();}},Ms=require(a0_0x5a2dd1(0x34f)),Jt=class c{constructor(_0x16e1f0,_0x4dc3f4,_0x223a00,_0x3fa8fa,_0x506a50){const _0xa986a0=a0_0x5a2dd1;this[_0xa986a0(0x6bb)]=_0x16e1f0,this['configService']=_0x4dc3f4,this[_0xa986a0(0x104)]=_0x223a00,this['eventEmitter']=_0x3fa8fa,this[_0xa986a0(0x268)]=_0x506a50,this[_0xa986a0(0x607)]=new C(c[_0xa986a0(0x67e)]);}async['createInstance']({instanceName:_0x16f82c,apikey:_0x53a6b9}){const _0x3f6d1f=a0_0x5a2dd1;let _0xac42d4=new Se(this['configService'],this[_0x3f6d1f(0x67b)],this['repository']);_0xac42d4[_0x3f6d1f(0x281)]=_0x16f82c,this[_0x3f6d1f(0x6bb)][_0x3f6d1f(0x410)][_0xac42d4['instanceName']]=_0xac42d4,this[_0x3f6d1f(0x6bb)][_0x3f6d1f(0x32b)](_0xac42d4[_0x3f6d1f(0x281)]);let _0xee8c7f={};_0x53a6b9?(await this[_0x3f6d1f(0x104)][_0x3f6d1f(0x64e)][_0x3f6d1f(0x57c)]({'apikey':_0x53a6b9},_0x16f82c),_0xee8c7f[_0x3f6d1f(0x18f)]=_0x53a6b9):_0xee8c7f=await this[_0x3f6d1f(0x268)][_0x3f6d1f(0x3a4)]({'instanceName':_0xac42d4['instanceName']});let _0x42e82f;return await _0xac42d4[_0x3f6d1f(0x2c3)](),await(0x0,Ms['delay'])(0x7d0),_0x42e82f=_0xac42d4[_0x3f6d1f(0x4ca)],{'instance':{'instanceName':_0xac42d4[_0x3f6d1f(0x281)],'status':_0x3f6d1f(0x1fa)},'hash':_0xee8c7f,'qrcode':_0x42e82f};}async['connectToWhatsapp']({instanceName:_0x5e875c}){const _0x24c62f=a0_0x5a2dd1;try{let _0x4e8d92=this[_0x24c62f(0x6bb)][_0x24c62f(0x410)][_0x5e875c];switch(_0x4e8d92[_0x24c62f(0x129)]?.[_0x24c62f(0x586)]){case _0x24c62f(0x254):return await _0x4e8d92[_0x24c62f(0x2c3)](),await(0x0,Ms[_0x24c62f(0x41f)])(0x7d0),_0x4e8d92[_0x24c62f(0x4ca)];case _0x24c62f(0x67a):return _0x4e8d92['qrCode'];default:return await this['connectionState']({'instanceName':_0x5e875c});}}catch(_0x135749){this[_0x24c62f(0x607)][_0x24c62f(0x6aa)](_0x135749);}}async[a0_0x5a2dd1(0x48b)]({instanceName:_0x444a2e}){const _0x32cb0c=a0_0x5a2dd1;let _0x2da196=this[_0x32cb0c(0x6bb)][_0x32cb0c(0x410)][_0x444a2e][_0x32cb0c(0x129)],_0x25e34f=null;_0x2da196[_0x32cb0c(0x586)]===_0x32cb0c(0x541)&&_0x444a2e&&(_0x25e34f=await this[_0x32cb0c(0x6bb)][_0x32cb0c(0x545)](_0x444a2e));let _0x522042=null;return _0x2da196['state']==='connecting'&&_0x444a2e&&(_0x522042=this[_0x32cb0c(0x6bb)][_0x32cb0c(0x410)][_0x444a2e][_0x32cb0c(0x4ca)]),{'instance':_0x444a2e,'connectionStatus':_0x2da196,'instanceInfo':_0x25e34f,'qrcode':_0x522042};}async[a0_0x5a2dd1(0x38a)]({instanceName:_0x41e121}){const _0x275b37=a0_0x5a2dd1;try{return this['waMonitor'][_0x275b37(0x410)][_0x41e121]?.[_0x275b37(0x6c6)]?.['ws']?.[_0x275b37(0x254)](),{'status':_0x275b37(0x225),'error':!0x1,'response':{'message':_0x275b37(0x2f9)}};}catch(_0x57b66f){this[_0x275b37(0x607)][_0x275b37(0x4a6)](_0x57b66f);}}async['fetchInstances']({instanceName:_0x51daef}){const _0xddc5ca=a0_0x5a2dd1;return _0x51daef?this['waMonitor'][_0xddc5ca(0x545)](_0x51daef):this['waMonitor']['instanceInfo']();}async[a0_0x5a2dd1(0x2b7)]({instanceName:_0x456c2f}){const _0x310004=a0_0x5a2dd1;try{return await this[_0x310004(0x6bb)]['waInstances'][_0x456c2f]?.[_0x310004(0x6c6)]?.[_0x310004(0x2b7)]('Log\x20out\x20instance:\x20'+_0x456c2f),{'error':!0x1,'message':_0x310004(0x621)};}catch(_0x2430f4){throw new A(_0x2430f4['toString']());}}async[a0_0x5a2dd1(0x1c3)]({instanceName:_0x1e99de}){const _0x2e6d28=a0_0x5a2dd1;if((await this[_0x2e6d28(0x48b)]({'instanceName':_0x1e99de}))[_0x2e6d28(0x129)]['state']===_0x2e6d28(0x541))throw new g([_0x2e6d28(0x4a3),_0x2e6d28(0x5f7)]);try{return delete this['waMonitor'][_0x2e6d28(0x410)][_0x1e99de],{'error':!0x1,'message':_0x2e6d28(0x658)};}catch(_0x33329b){throw new g(_0x33329b[_0x2e6d28(0x41a)]());}}async['refreshToken'](_0x143872,_0x1c9aaf){const _0x5115f0=a0_0x5a2dd1;return await this[_0x5115f0(0x268)][_0x5115f0(0x414)](_0x1c9aaf);}},ae=require('class-validator'),Gt=class{constructor(_0x210691){const _0xf7fbc1=a0_0x5a2dd1;this[_0xf7fbc1(0x6bb)]=_0x210691;}async[a0_0x5a2dd1(0x2c2)]({instanceName:_0x349b21},_0x342f5a){const _0x3ecf46=a0_0x5a2dd1;return await this['waMonitor'][_0x3ecf46(0x410)][_0x349b21][_0x3ecf46(0x25a)](_0x342f5a);}async['sendMedia']({instanceName:_0x3de5f1},_0x55ac6f){const _0x3e682b=a0_0x5a2dd1;if((0x0,ae[_0x3e682b(0x27b)])(_0x55ac6f?.[_0x3e682b(0x297)]?.[_0x3e682b(0x404)])&&!_0x55ac6f?.['mediaMessage']?.['fileName'])throw new g(_0x3e682b(0x4fe));if((0x0,ae[_0x3e682b(0x428)])(_0x55ac6f?.[_0x3e682b(0x297)]?.[_0x3e682b(0x404)])||(0x0,ae[_0x3e682b(0x27b)])(_0x55ac6f?.[_0x3e682b(0x297)]?.[_0x3e682b(0x404)]))return await this[_0x3e682b(0x6bb)]['waInstances'][_0x3de5f1]['mediaMessage'](_0x55ac6f);throw new g(_0x3e682b(0x376));}async[a0_0x5a2dd1(0x1ac)]({instanceName:_0x24770f},_0x474e6d){const _0x5edde4=a0_0x5a2dd1;if((0x0,ae['isURL'])(_0x474e6d[_0x5edde4(0x47c)][_0x5edde4(0x625)])||(0x0,ae[_0x5edde4(0x27b)])(_0x474e6d['stickerMessage'][_0x5edde4(0x625)]))return await this[_0x5edde4(0x6bb)][_0x5edde4(0x410)][_0x24770f]['mediaSticker'](_0x474e6d);throw new g(_0x5edde4(0x376));}async[a0_0x5a2dd1(0x581)]({instanceName:_0x21be67},_0x37dc00){const _0x2e597b=a0_0x5a2dd1;if((0x0,ae[_0x2e597b(0x428)])(_0x37dc00['audioMessage'][_0x2e597b(0x2fe)])||(0x0,ae[_0x2e597b(0x27b)])(_0x37dc00[_0x2e597b(0x61f)][_0x2e597b(0x2fe)]))return await this[_0x2e597b(0x6bb)][_0x2e597b(0x410)][_0x21be67][_0x2e597b(0x46c)](_0x37dc00);throw new g('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x5a2dd1(0x4af)]({instanceName:_0x50d552},_0x10684f){const _0x1e0d40=a0_0x5a2dd1;if((0x0,ae[_0x1e0d40(0x27b)])(_0x10684f[_0x1e0d40(0x638)][_0x1e0d40(0x297)]?.[_0x1e0d40(0x404)])&&!_0x10684f[_0x1e0d40(0x638)][_0x1e0d40(0x297)]?.['fileName'])throw new g(_0x1e0d40(0x4fe));return await this['waMonitor'][_0x1e0d40(0x410)][_0x50d552][_0x1e0d40(0x638)](_0x10684f);}async[a0_0x5a2dd1(0x56d)]({instanceName:_0x3367bf},_0x24cf85){const _0x4b17df=a0_0x5a2dd1;return await this['waMonitor'][_0x4b17df(0x410)][_0x3367bf][_0x4b17df(0x38b)](_0x24cf85);}async['sendPoll']({instanceName:_0x25cffa},_0x16e572){const _0x4da917=a0_0x5a2dd1;return await this[_0x4da917(0x6bb)][_0x4da917(0x410)][_0x25cffa][_0x4da917(0x288)](_0x16e572);}async['sendList']({instanceName:_0x4d88ca},_0x274ebd){const _0x9457c6=a0_0x5a2dd1;return await this[_0x9457c6(0x6bb)][_0x9457c6(0x410)][_0x4d88ca]['listMessage'](_0x274ebd);}async['sendContact']({instanceName:_0x1037a5},_0x140fef){const _0x29d9ce=a0_0x5a2dd1;return await this[_0x29d9ce(0x6bb)]['waInstances'][_0x1037a5]['contactMessage'](_0x140fef);}async[a0_0x5a2dd1(0x513)]({instanceName:_0x1c5592},_0x405d35){const _0x5d5427=a0_0x5a2dd1;if(!_0x405d35[_0x5d5427(0x1a1)]['reaction'][_0x5d5427(0xeb)](/[^\(\)\w\sà-ú"-\+]+/))throw new g('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this[_0x5d5427(0x6bb)][_0x5d5427(0x410)][_0x1c5592]['reactionMessage'](_0x405d35);}async[a0_0x5a2dd1(0x178)]({instanceName:_0x3c70cd},_0x3f83d3){const _0x497926=a0_0x5a2dd1;return await this[_0x497926(0x6bb)][_0x497926(0x410)][_0x3c70cd]['statusMessage'](_0x3f83d3);}},qt=class{constructor(_0x2a7f8f){this['waMonitor']=_0x2a7f8f;}async[a0_0x5a2dd1(0x277)](_0x5f0993,_0x1d5f72){const _0x455e18=a0_0x5a2dd1;return await this[_0x455e18(0x6bb)]['waInstances'][_0x5f0993['instanceName']][_0x455e18(0x277)](_0x1d5f72);}async[a0_0x5a2dd1(0x385)](_0x4359f7,_0x326cfe){const _0x1c0be8=a0_0x5a2dd1;return await this[_0x1c0be8(0x6bb)][_0x1c0be8(0x410)][_0x4359f7['instanceName']]['updateGroupPicture'](_0x326cfe);}async['groupDesc'](_0x37fa8a,_0x476333){const _0x5e5917=a0_0x5a2dd1;return await this[_0x5e5917(0x6bb)]['waInstances'][_0x37fa8a['instanceName']][_0x5e5917(0x42a)](_0x476333);}async[a0_0x5a2dd1(0x593)](_0xe199c2,_0x2d3e46){const _0xe2e90e=a0_0x5a2dd1;return await this[_0xe2e90e(0x6bb)]['waInstances'][_0xe199c2[_0xe2e90e(0x281)]]['groupName'](_0x2d3e46);}async[a0_0x5a2dd1(0x1ca)](_0x3ae051,_0x229b57){const _0x3bc923=a0_0x5a2dd1;return await this[_0x3bc923(0x6bb)][_0x3bc923(0x410)][_0x3ae051[_0x3bc923(0x281)]]['groupSetting'](_0x229b57);}async['findGroupInfo'](_0xe60c7b,_0x5b4cce){const _0x51c7d7=a0_0x5a2dd1;return await this[_0x51c7d7(0x6bb)][_0x51c7d7(0x410)][_0xe60c7b[_0x51c7d7(0x281)]]['findGroup'](_0x5b4cce);}async[a0_0x5a2dd1(0x2e4)](_0x3a3992){const _0x42869a=a0_0x5a2dd1;return await this[_0x42869a(0x6bb)][_0x42869a(0x410)][_0x3a3992[_0x42869a(0x281)]][_0x42869a(0x2e4)]();}async[a0_0x5a2dd1(0x5d1)](_0xa28fb7,_0x3784bf){const _0x5b68e3=a0_0x5a2dd1;return await this[_0x5b68e3(0x6bb)][_0x5b68e3(0x410)][_0xa28fb7[_0x5b68e3(0x281)]][_0x5b68e3(0x5d1)](_0x3784bf);}async['joinGroup'](_0x20edbd,_0x54525f){const _0x4e53c9=a0_0x5a2dd1;return await this[_0x4e53c9(0x6bb)][_0x4e53c9(0x410)][_0x20edbd[_0x4e53c9(0x281)]][_0x4e53c9(0x232)](_0x54525f);}async[a0_0x5a2dd1(0x4d3)](_0x3b587a,_0x262676){const _0x5b9e12=a0_0x5a2dd1;return await this[_0x5b9e12(0x6bb)][_0x5b9e12(0x410)][_0x3b587a[_0x5b9e12(0x281)]][_0x5b9e12(0x4d3)](_0x262676);}async[a0_0x5a2dd1(0x105)](_0x2bff61,_0x6bb59d){const _0x5a1d33=a0_0x5a2dd1;return await this[_0x5a1d33(0x6bb)][_0x5a1d33(0x410)][_0x2bff61[_0x5a1d33(0x281)]][_0x5a1d33(0x105)](_0x6bb59d);}async[a0_0x5a2dd1(0x5b7)](_0x3d7de6,_0x316039){const _0x5ce5da=a0_0x5a2dd1;return await this[_0x5ce5da(0x6bb)][_0x5ce5da(0x410)][_0x3d7de6[_0x5ce5da(0x281)]][_0x5ce5da(0xf8)](_0x316039);}async[a0_0x5a2dd1(0x381)](_0x319a13,_0x2c0964){const _0x9b2303=a0_0x5a2dd1;return await this[_0x9b2303(0x6bb)]['waInstances'][_0x319a13[_0x9b2303(0x281)]][_0x9b2303(0x381)](_0x2c0964);}async[a0_0x5a2dd1(0x215)](_0x9eb36b,_0x48911f){const _0x15829c=a0_0x5a2dd1;return await this[_0x15829c(0x6bb)][_0x15829c(0x410)][_0x9eb36b[_0x15829c(0x281)]]['leaveGroup'](_0x48911f);}},Wt=class{constructor(_0x5494c1,_0x10525c){const _0x4a40cb=a0_0x5a2dd1;this[_0x4a40cb(0x45b)]=_0x5494c1,this[_0x4a40cb(0x2a2)]=_0x10525c;}async[a0_0x5a2dd1(0x3c4)](_0xd5b948,_0x27bb6a){const _0x2c78dc=a0_0x5a2dd1;try{let _0x1c267b=_0xd5b948[_0x2c78dc(0x4f2)];if(this[_0x2c78dc(0x45b)]['waInstances'][_0x1c267b[_0x2c78dc(0x281)]][_0x2c78dc(0x129)][_0x2c78dc(0x586)]==='open')throw new g(_0x2c78dc(0x2c4));let _0x35c6e7=this[_0x2c78dc(0x2a2)]['get'](_0x2c78dc(0x564))['TYPE'];return _0x27bb6a[_0x2c78dc(0x50a)](0xc8)[_0x2c78dc(0x66c)](_0x2c78dc(0x3c4),{'type':_0x35c6e7,..._0x1c267b});}catch(_0x2358d4){console[_0x2c78dc(0x6aa)]('ERROR:\x20',_0x2358d4);}}},Ht=class{constructor(_0x4c4775){const _0xe83976=a0_0x5a2dd1;this[_0xe83976(0x6bb)]=_0x4c4775;}['create'](_0xd73177,_0xe01bae){const _0x30ffd8=a0_0x5a2dd1;return this['waMonitor'][_0x30ffd8(0x410)][_0xd73177[_0x30ffd8(0x281)]][_0x30ffd8(0x591)](_0xe01bae);}async[a0_0x5a2dd1(0x40e)](_0x59ec82){const _0x42619d=a0_0x5a2dd1;try{return await this['waMonitor'][_0x42619d(0x410)][_0x59ec82[_0x42619d(0x281)]][_0x42619d(0x315)]();}catch{return{'enabled':null,'url':''};}}},ld=new C(a0_0x5a2dd1(0x3ab)),Kt=class{constructor(_0x4750a6){const _0x1cedb1=a0_0x5a2dd1;this[_0x1cedb1(0x6bb)]=_0x4750a6;}async[a0_0x5a2dd1(0x507)](_0x935eea,_0x44788c){const _0x1a28fa=a0_0x5a2dd1;return await this['waMonitor'][_0x1a28fa(0x410)][_0x935eea['instanceName']][_0x1a28fa(0x507)](_0x44788c);}async[a0_0x5a2dd1(0x2ac)](_0x2213a4){const _0x5779c5=a0_0x5a2dd1;return await this[_0x5779c5(0x6bb)][_0x5779c5(0x410)][_0x2213a4[_0x5779c5(0x281)]]['getScheduleMessage']();}async[a0_0x5a2dd1(0x5e7)](_0x1f5466){const _0x244d01=a0_0x5a2dd1;return await this[_0x244d01(0x6bb)]['waInstances'][_0x1f5466[_0x244d01(0x281)]][_0x244d01(0x5e7)]();}async[a0_0x5a2dd1(0x622)](_0x387a5e){const _0x2ad94d=a0_0x5a2dd1;return await this[_0x2ad94d(0x6bb)]['waInstances'][_0x387a5e[_0x2ad94d(0x281)]][_0x2ad94d(0x622)]();}async[a0_0x5a2dd1(0x1d6)](_0x21a4e8,_0x4df75c){const _0x116306=a0_0x5a2dd1;return await this[_0x116306(0x6bb)][_0x116306(0x410)][_0x21a4e8['instanceName']][_0x116306(0x1d6)](_0x4df75c);}async[a0_0x5a2dd1(0x37f)](_0xf05447,_0x15a2e7){const _0x4440d8=a0_0x5a2dd1;return await this[_0x4440d8(0x6bb)][_0x4440d8(0x410)][_0xf05447['instanceName']][_0x4440d8(0x37f)](_0x15a2e7);}async[a0_0x5a2dd1(0x196)](_0xbc410d,_0x51e144){const _0x477d6e=a0_0x5a2dd1;return await this[_0x477d6e(0x6bb)][_0x477d6e(0x410)][_0xbc410d[_0x477d6e(0x281)]]['updateFlowConfig'](_0x51e144);}async[a0_0x5a2dd1(0x4e2)](_0x21ac0a,_0x501468){const _0x133678=a0_0x5a2dd1;return await this['waMonitor'][_0x133678(0x410)][_0x21ac0a[_0x133678(0x281)]]['startFlow'](_0x501468);}async[a0_0x5a2dd1(0x344)](_0x550888,_0x2403fd){const _0x20b3d1=a0_0x5a2dd1;return await this['waMonitor'][_0x20b3d1(0x410)][_0x550888['instanceName']][_0x20b3d1(0x344)](_0x2403fd);}async[a0_0x5a2dd1(0x2ee)](_0x2b3d2e,_0x24fa68){const _0x2af48a=a0_0x5a2dd1;return await this[_0x2af48a(0x6bb)][_0x2af48a(0x410)][_0x2b3d2e[_0x2af48a(0x281)]][_0x2af48a(0x2ee)](_0x24fa68);}async['editConversation'](_0x1e43d4,_0x857aa3){const _0xe9cdc4=a0_0x5a2dd1;return await this[_0xe9cdc4(0x6bb)][_0xe9cdc4(0x410)][_0x1e43d4['instanceName']][_0xe9cdc4(0x2ad)](_0x857aa3);}async[a0_0x5a2dd1(0x59d)](_0x4baa24,_0x3e3905){const _0x22cc21=a0_0x5a2dd1;return await this['waMonitor'][_0x22cc21(0x410)][_0x4baa24[_0x22cc21(0x281)]]['deleteConversation'](_0x3e3905);}async[a0_0x5a2dd1(0x415)](_0x44dbb4,_0x1676ca){const _0xbcd58e=a0_0x5a2dd1;return await this[_0xbcd58e(0x6bb)][_0xbcd58e(0x410)][_0x44dbb4[_0xbcd58e(0x281)]][_0xbcd58e(0x415)](_0x1676ca['name']);}async[a0_0x5a2dd1(0x1b7)](_0x22d8d0,_0x2ab5b7){const _0x49a115=a0_0x5a2dd1;return await this['waMonitor'][_0x49a115(0x410)][_0x22d8d0['instanceName']]['createFlow'](_0x2ab5b7);}async[a0_0x5a2dd1(0x573)](_0x135508,_0x5017c8){const _0x48e646=a0_0x5a2dd1;return await this[_0x48e646(0x6bb)][_0x48e646(0x410)][_0x135508[_0x48e646(0x281)]][_0x48e646(0x573)](_0x5017c8);}async[a0_0x5a2dd1(0x66a)](_0x232e24,_0x328919){const _0x2158bb=a0_0x5a2dd1;return await this['waMonitor'][_0x2158bb(0x410)][_0x232e24[_0x2158bb(0x281)]][_0x2158bb(0x66a)](_0x328919);}async[a0_0x5a2dd1(0x458)](_0x511447,_0x3aff7e){const _0x1c51ea=a0_0x5a2dd1;return await this['waMonitor'][_0x1c51ea(0x410)][_0x511447[_0x1c51ea(0x281)]][_0x1c51ea(0x458)](_0x3aff7e);}async[a0_0x5a2dd1(0x5f2)](_0x31dab,_0x3fe183){const _0x4545f3=a0_0x5a2dd1;return await this[_0x4545f3(0x6bb)][_0x4545f3(0x410)][_0x31dab[_0x4545f3(0x281)]][_0x4545f3(0x5f2)](_0x3fe183);}async[a0_0x5a2dd1(0x60a)](_0x470996,_0x235f6b){const _0x509a73=a0_0x5a2dd1;return await this[_0x509a73(0x6bb)][_0x509a73(0x410)][_0x470996['instanceName']][_0x509a73(0x60a)](_0x235f6b);}async[a0_0x5a2dd1(0x543)](_0x39d9b8,_0x23374f){const _0x5e3acf=a0_0x5a2dd1;return await this['waMonitor'][_0x5e3acf(0x410)][_0x39d9b8[_0x5e3acf(0x281)]]['editFlowVaredit'](_0x23374f);}async[a0_0x5a2dd1(0x2e7)](_0x2335cb,_0x1c1c16){const _0x55c198=a0_0x5a2dd1;return await this[_0x55c198(0x6bb)][_0x55c198(0x410)][_0x2335cb[_0x55c198(0x281)]][_0x55c198(0x2e7)](_0x1c1c16);}async[a0_0x5a2dd1(0x46d)](_0xebbc5d,_0xe4ac26){const _0x49011e=a0_0x5a2dd1;return await this[_0x49011e(0x6bb)][_0x49011e(0x410)][_0xebbc5d[_0x49011e(0x281)]][_0x49011e(0x46d)](_0xe4ac26['name']);}async[a0_0x5a2dd1(0x364)](_0x4acf57){const _0x2fac3c=a0_0x5a2dd1;return await this[_0x2fac3c(0x6bb)]['waInstances'][_0x4acf57[_0x2fac3c(0x281)]]['allFlows']();}},zt=class{constructor(_0x3526ad){const _0x41b0dc=a0_0x5a2dd1;this[_0x41b0dc(0x4d0)]=_0x3526ad;}async[a0_0x5a2dd1(0x45d)](_0x4f15e4,_0x4511cc){const _0x465921=a0_0x5a2dd1;return this[_0x465921(0x4d0)]['create'](_0x4f15e4,_0x4511cc);}async[a0_0x5a2dd1(0x315)](_0x56187a){const _0x144668=a0_0x5a2dd1;return this[_0x144668(0x4d0)][_0x144668(0x40e)](_0x56187a);}},Qt=class{constructor(_0x27442a,_0x2348f1,_0x3010a0,_0x54bc34,_0x4a8f27,_0x3df851,_0x2cef12){const _0x37d470=a0_0x5a2dd1;this[_0x37d470(0x19d)]=_0x27442a,this[_0x37d470(0x2ef)]=_0x2348f1,this['contact']=_0x3010a0,this[_0x37d470(0x49b)]=_0x54bc34,this['webhook']=_0x4a8f27,this[_0x37d470(0x64e)]=_0x3df851,this['dbClient']=_0x2cef12;}get[a0_0x5a2dd1(0x3a3)](){const _0x583f5c=a0_0x5a2dd1;return this[_0x583f5c(0x1b6)];}},Is=require(a0_0x5a2dd1(0x353)),Rs=class{},gi=new Is[(a0_0x5a2dd1(0x31b))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String,'minlength':0x3,'enum':[a0_0x5a2dd1(0x3a5),a0_0x5a2dd1(0x549),a0_0x5a2dd1(0x62c)]},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String}}),fo=M?.[a0_0x5a2dd1(0x2c7)](Rs[a0_0x5a2dd1(0x67e)],gi,a0_0x5a2dd1(0x2d4)),As=class{},mi=new Is['Schema']({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String,'required':!0x0,'min':0x1},'id':{'type':String,'required':!0x0,'min':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'min':0x1},'datetime':{'type':Number,'required':!0x0,'min':0x1},'status':{'type':String,'required':!0x0},'owner':{'type':String,'required':!0x0,'min':0x1}}),wo=M?.['model'](As[a0_0x5a2dd1(0x67e)],mi,'messageUpdate'),yo=require(a0_0x5a2dd1(0x353)),Ds=class{},hi=new yo[(a0_0x5a2dd1(0x31b))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1}}),bo=M?.['model'](Ds[a0_0x5a2dd1(0x67e)],hi,a0_0x5a2dd1(0x4a8)),So=require(a0_0x5a2dd1(0x353)),Ps=class{},Eo=new So[(a0_0x5a2dd1(0x31b))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});Eo[a0_0x5a2dd1(0x596)]('save',function(_0x5e29ad){const _0x46790e=a0_0x5a2dd1;delete this['flowActive'],delete this[_0x46790e(0x5ed)],delete this[_0x46790e(0x68c)],delete this[_0x46790e(0x22c)],delete this[_0x46790e(0x28a)],_0x5e29ad();});var vo=M?.[a0_0x5a2dd1(0x2c7)](Ps['name'],Eo,'webhook'),Os=require(a0_0x5a2dd1(0x2b8)),No=require('fs'),Yt=class extends B{constructor(_0xf01cb9,_0x3d07e5){const _0xd8d802=a0_0x5a2dd1;super(_0x3d07e5),this[_0xd8d802(0x34e)]=_0xf01cb9,this[_0xd8d802(0x2a2)]=_0x3d07e5;}async['create'](_0x16904e,_0x395e61){const _0x4e3620=a0_0x5a2dd1;try{return this[_0x4e3620(0x3f1)]['ENABLED']?{'insertCount':(await this['webhookModel']['replaceOne']({'_id':_0x395e61},{..._0x16904e},{'upsert':!0x0}))[_0x4e3620(0x5e2)]}:(this['writeStore']({'path':(0x0,Os[_0x4e3620(0x295)])(this[_0x4e3620(0x2b1)],_0x4e3620(0x210)),'fileName':_0x395e61,'data':_0x16904e}),{'insertCount':0x1});}catch(_0x57af68){return _0x57af68;}}async['find'](_0x50c82c){const _0x1c57da=a0_0x5a2dd1;try{return this[_0x1c57da(0x3f1)][_0x1c57da(0x159)]?await this[_0x1c57da(0x34e)][_0x1c57da(0x34c)]({'_id':_0x50c82c}):JSON[_0x1c57da(0x26b)]((0x0,No[_0x1c57da(0x3f8)])((0x0,Os[_0x1c57da(0x295)])(this[_0x1c57da(0x2b1)],_0x1c57da(0x210),_0x50c82c+'.json'),{'encoding':_0x1c57da(0x48c)}));}catch{return{};}}},_s=require(a0_0x5a2dd1(0x2b8)),Co=require('fs'),Xt=class extends B{constructor(_0x5d5203,_0x2ba708){const _0x26e73f=a0_0x5a2dd1;super(_0x2ba708),this[_0x26e73f(0x32e)]=_0x5d5203,this['configService']=_0x2ba708,this[_0x26e73f(0x64e)]=_0x2ba708[_0x26e73f(0x5c2)](_0x26e73f(0x564));}async[a0_0x5a2dd1(0x57c)](_0x276914,_0x49dfcc){const _0x4c43bc=a0_0x5a2dd1;try{return this[_0x4c43bc(0x3f1)][_0x4c43bc(0x159)]?{'insertCount':(await this[_0x4c43bc(0x32e)]['replaceOne']({'_id':_0x49dfcc},{..._0x276914},{'upsert':!0x0}))[_0x4c43bc(0x5e2)]}:(this['writeStore']({'path':(0x0,_s[_0x4c43bc(0x295)])(es,this[_0x4c43bc(0x64e)]['TYPE']),'fileName':_0x49dfcc,'data':_0x276914}),{'insertCount':0x1});}catch(_0x42fb65){return{'error':_0x42fb65};}}async[a0_0x5a2dd1(0x40e)](_0x58ac57){const _0x43b55c=a0_0x5a2dd1;try{return this[_0x43b55c(0x3f1)][_0x43b55c(0x159)]?await this[_0x43b55c(0x32e)][_0x43b55c(0x34c)]({'_id':_0x58ac57}):JSON[_0x43b55c(0x26b)]((0x0,Co[_0x43b55c(0x3f8)])((0x0,_s[_0x43b55c(0x295)])(es,this[_0x43b55c(0x64e)]['TYPE'],_0x58ac57+'.json'),{'encoding':'utf-8'}));}catch{return{};}}},fi=new C(a0_0x5a2dd1(0x460)),wi=new je(fo,y),yi=new Bt(I,y),bi=new et(Fe,y),Si=new at(wo,y),Ei=new Yt(vo,y),vi=new Xt(bo,y),de=new Qt(wi,yi,bi,Si,Ei,vi,M?.[a0_0x5a2dd1(0x422)]()),J=new jt(os,y,de),Ni=new ht(y,J,de),Ci=new Ht(J),Ss=new zt(Ci),R=new Kt(J),ce=new Jt(J,y,de,os,Ni),to=new Wt(J,y),K=new Gt(J),P=new Ft(J),V=new qt(J);fi['info'](a0_0x5a2dd1(0x386));var Sp=require('express-async-errors'),xs=require('fs'),To=T(require(a0_0x5a2dd1(0x5c8))),Mo=T(require(a0_0x5a2dd1(0x5a0))),$e=class c{static #e;static set[a0_0x5a2dd1(0x5b4)](_0x5d8c36){this.#e=_0x5d8c36;}static get[a0_0x5a2dd1(0x5c8)](){const _0x3722b6=a0_0x5a2dd1;let {FULLCHAIN:_0x5327de,PRIVKEY:_0x4eb02c}=y['get'](_0x3722b6(0x635));return To[_0x3722b6(0x1ef)]({'cert':(0x0,xs[_0x3722b6(0x3f8)])(_0x5327de),'key':(0x0,xs['readFileSync'])(_0x4eb02c)},c.#e);}static get[a0_0x5a2dd1(0x5a0)](){const _0xfebbfa=a0_0x5a2dd1;return Mo[_0xfebbfa(0x1ef)](c.#e);}},ke=T(require('fs')),_o=T(require('ini')),Le=T(require('axios')),Zt=T(require(a0_0x5a2dd1(0x2b8))),xo=require(a0_0x5a2dd1(0x259)),Vs=require(a0_0x5a2dd1(0x259));function Ti(){const _0x80257f=a0_0x5a2dd1;J[_0x80257f(0x5d3)]();let _0x23fd41=Zt['default'][_0x80257f(0x295)](__dirname,_0x80257f(0x496));Oo(_0x23fd41);}var Oo=_0x27e5d3=>{const _0x5837c5=a0_0x5a2dd1;let _0x674451=ke[_0x5837c5(0x5fb)][_0x5837c5(0x5a6)](_0x27e5d3),_0x431a61=0xc*0x3c*0x3c*0x3e8,_0x39ee01=0x2*0x3c*0x3c*0x3e8,_0x300349=new Date()[_0x5837c5(0x5a9)]();_0x674451[_0x5837c5(0x1b3)](_0x582930=>{const _0x32f343=_0x5837c5;let _0x2c5f24=Zt[_0x32f343(0x5fb)]['join'](_0x27e5d3,_0x582930),_0x17c8a3=ke[_0x32f343(0x5fb)]['statSync'](_0x2c5f24)[_0x32f343(0x5dd)][_0x32f343(0x5a9)]();_0x300349-_0x17c8a3>_0x431a61&&(ke[_0x32f343(0x5fb)]['unlinkSync'](_0x2c5f24),console['log'](_0x32f343(0x5b0)+_0x582930));}),setTimeout(()=>Oo(_0x27e5d3),_0x39ee01);};function Mi(){const _0x5dd8bb=a0_0x5a2dd1;let _0xbf030a=new C(_0x5dd8bb(0x6b6)),_0x178530=(0x0,me['default'])();_0x178530[_0x5dd8bb(0x665)]((0x0,Po[_0x5dd8bb(0x5fb)])({'origin'(_0x261254,_0x123e3d){const _0x51daca=_0x5dd8bb;let {ORIGIN:_0x1a5669}=y[_0x51daca(0x5c2)](_0x51daca(0x335));return _0x261254||(_0x261254='*'),_0x1a5669['indexOf']('*')!==-0x1||_0x1a5669[_0x51daca(0x530)](_0x261254)!==-0x1?_0x123e3d(null,!0x0):_0x123e3d(new Error('Not\x20allowed\x20by\x20CORS'));},'methods':[...y['get'](_0x5dd8bb(0x335))[_0x5dd8bb(0x506)]],'credentials':y['get']('CORS')[_0x5dd8bb(0x238)]}),(0x0,me[_0x5dd8bb(0x357)])({'extended':!0x0,'limit':_0x5dd8bb(0x6ca)}),(0x0,me[_0x5dd8bb(0x139)])({'limit':_0x5dd8bb(0x6ca)})),_0x178530[_0x5dd8bb(0x665)]((_0x486b82,_0x5c355a,_0x1a2392)=>{const _0x272e06=_0x5dd8bb;_0x486b82[_0x272e06(0x2b8)]['startsWith'](_0x272e06(0x690))?_0x1a2392():(0x0,Do[_0x272e06(0x5fb)])()(_0x486b82,_0x5c355a,_0x1a2392);}),_0x178530['set'](_0x5dd8bb(0x629),_0x5dd8bb(0x262)),_0x178530[_0x5dd8bb(0x568)](_0x5dd8bb(0x2f7),(0x0,ks[_0x5dd8bb(0x295)])(Y,_0x5dd8bb(0x2f7))),_0x178530['use'](me[_0x5dd8bb(0x5fb)][_0x5dd8bb(0x532)]((0x0,ks[_0x5dd8bb(0x295)])(Y,_0x5dd8bb(0x6a8)))),_0x178530[_0x5dd8bb(0x665)]((_0xe33fd4,_0x1574fe,_0x30bb3b)=>{const _0xeba331=_0x5dd8bb;let _0x41509f=_0x1574fe[_0xeba331(0x52e)];_0x1574fe[_0xeba331(0x52e)]=function(_0x2a8a58){const _0x4d3e13=_0xeba331;if(_0xe33fd4[_0x4d3e13(0x213)][_0x4d3e13(0x1b9)]==='true'||_0xe33fd4['headers'][_0x4d3e13(0x3b7)]===_0x4d3e13(0x2b2)){let _0x575ea8=JSON['parse'](_0x2a8a58);_0x2a8a58=JSON['stringify'](_0x3e1d8e(_0x575ea8));}return _0x41509f[_0x4d3e13(0x4d2)](_0x1574fe,[_0x2a8a58]);},_0x30bb3b();}),_0x178530['use']('/',Ot),_0x178530['use']((_0x583712,_0x4f119f,_0x4e9a0c,_0x16f078)=>{const _0x22b15f=_0x5dd8bb;if(_0x583712)return _0x4e9a0c[_0x22b15f(0x50a)](_0x583712[_0x22b15f(0x50a)]||0x1f4)[_0x22b15f(0x139)](_0x583712);},(_0x41d5e3,_0x534803,_0x4de341)=>{const _0x5394e3=_0x5dd8bb;let {method:_0x178df6,url:_0x5ad53f}=_0x41d5e3;_0x534803[_0x5394e3(0x50a)](0x194)[_0x5394e3(0x139)]({'status':0x194,'message':'Cannot\x20'+_0x178df6[_0x5394e3(0x5ee)]()+'\x20'+_0x5ad53f,'error':_0x5394e3(0x31a)}),_0x4de341();});let _0x3e1d8e=(_0xb21bdc,_0x850748=_0x5dd8bb(0xf0))=>{const _0xa0617e=_0x5dd8bb;let _0x2d5bbe=(_0x4f7144,_0x275ca8=null,_0x59be9e=!0x1)=>{const _0x1bd6d7=a0_0x5d83;let _0x80ee3c={};return Object[_0x1bd6d7(0x330)](_0x4f7144)[_0x1bd6d7(0x1b3)](_0x1021fa=>{const _0x3ae0f0=_0x1bd6d7;let _0x36443d=_0x4f7144[_0x1021fa],_0x1c4f74=''+_0x850748+_0x1021fa;_0x275ca8&&!_0x59be9e&&(_0x1c4f74=_0x275ca8+'.'+_0x1021fa),!_0x36443d&&_0x36443d!==0x0&&_0x36443d!==!0x1||typeof _0x36443d>'u'?_0x80ee3c[_0x1c4f74]=null:typeof _0x36443d!=_0x3ae0f0(0x645)&&!Array[_0x3ae0f0(0x14c)](_0x36443d)?_0x80ee3c[_0x1c4f74]=_0x36443d:typeof _0x36443d==_0x3ae0f0(0x645)&&!Array[_0x3ae0f0(0x14c)](_0x36443d)?_0x80ee3c=Object[_0x3ae0f0(0x228)](_0x80ee3c,_0x2d5bbe(_0x36443d,_0x1c4f74)):Array[_0x3ae0f0(0x14c)](_0x36443d)&&(typeof _0x36443d[0x0]==_0x3ae0f0(0x645)?(_0x80ee3c[_0x1c4f74]=[],_0x36443d[_0x3ae0f0(0x1b3)](_0x1dde87=>{_0x80ee3c[_0x1c4f74]['push'](_0x2d5bbe(_0x1dde87,_0x1c4f74,!0x0));})):_0x80ee3c[_0x1c4f74]=_0x36443d);}),_0x80ee3c;};return Array[_0xa0617e(0x14c)](_0xb21bdc)?_0xb21bdc[_0xa0617e(0x4ce)](_0x359682=>_0x2d5bbe(_0x359682)):typeof _0xb21bdc==_0xa0617e(0x645)&&_0xb21bdc!==null?_0x2d5bbe(_0xb21bdc):{};},_0x44a416=y[_0x5dd8bb(0x5c2)]('SERVER');$e[_0x5dd8bb(0x5b4)]=_0x178530;let _0x230544=$e[_0x44a416[_0x5dd8bb(0x1af)]],_0x1ec703=_0x5dd8bb(0x3bc);_0x230544[_0x5dd8bb(0x542)](_0x44a416[_0x5dd8bb(0x483)],()=>{const _0x3db06f=_0x5dd8bb;_0xbf030a[_0x3db06f(0x6aa)](_0x1ec703),_0xbf030a[_0x3db06f(0x6aa)](_0x44a416['TYPE'][_0x3db06f(0x5ee)]()+'\x20-\x20ON:\x20'+_0x44a416[_0x3db06f(0x483)]);}),Ti(),Qs();}function Ls(_0x3bf15f,_0x241a1f){return new Promise(_0x58951d=>{const _0x1c7a65=a0_0x5d83;(0x0,xo[_0x1c7a65(0x4db)])(_0x3bf15f+'\x20'+_0x241a1f,_0x24420b=>{_0x58951d(!_0x24420b);});});}function Ro(_0x1a5618,_0x509a74,_0x200d6e){return new Promise(_0x21ad13=>{const _0x2590bc=a0_0x5d83;Ls(_0x1a5618,_0x200d6e)[_0x2590bc(0x187)](_0x13f411=>{const _0x84ac7d=_0x2590bc;if(_0x13f411)_0x21ad13(!0x0);else{let [_0x2b25a5,..._0x22b208]=_0x509a74[_0x84ac7d(0x60f)]('\x20'),_0x4bac11=(0x0,Vs[_0x84ac7d(0x253)])(_0x2b25a5,_0x22b208,{'shell':!0x0});_0x4bac11['stdout']['on'](_0x84ac7d(0x31e),_0x31986f=>{const _0x2fe5d1=_0x84ac7d;console[_0x2fe5d1(0x6aa)](_0x1a5618+_0x2fe5d1(0x23e)+_0x31986f);}),_0x4bac11[_0x84ac7d(0x655)]['on'](_0x84ac7d(0x31e),_0xa46fd6=>{const _0x360642=_0x84ac7d;console['error'](_0x1a5618+_0x360642(0x402)+_0xa46fd6);}),_0x4bac11['on']('exit',_0x1cb2e3=>{const _0x1e1517=_0x84ac7d;_0x1cb2e3!==0x0?(console[_0x1e1517(0x4a6)]('Erro\x20ao\x20instalar\x20'+_0x1a5618+'.\x20Código\x20de\x20saída\x20'+_0x1cb2e3),_0x21ad13(!0x1)):_0x21ad13(!0x0);});}});});}var Ri='https://github.com/uazapi/uazapi.git',Ai=Zt['default'][a0_0x5a2dd1(0x295)](__dirname,a0_0x5a2dd1(0x311)),Ne=null;function Ii(){return new Promise((_0x2fcba2,_0x57d5d4)=>{const _0x3e1a78=a0_0x5d83;ke[_0x3e1a78(0x5fb)][_0x3e1a78(0x117)](Ai,_0x3e1a78(0x48c),(_0x534ddd,_0x240957)=>{const _0x282750=_0x3e1a78;if(_0x534ddd){Ne=_0x534ddd,_0x2fcba2();return;}_o[_0x282750(0x5fb)]['parse'](_0x240957)['remote\x20\x22origin\x22'][_0x282750(0x675)]===Ri?(Ne=null,_0x2fcba2()):(Ne=new Error(_0x282750(0x1b4)),_0x2fcba2());});});}async function Di(){const _0xb4c645=a0_0x5a2dd1;try{await Ii(),await Us();}catch(_0x26dde9){console['error'](_0xb4c645(0x32c)+_0x26dde9),process[_0xb4c645(0x69f)](0x1);}}Di();async function $o(){const _0x1180a4=a0_0x5a2dd1;let _0xcb83bc;try{_0xcb83bc=(await Le[_0x1180a4(0x5fb)][_0x1180a4(0x5c2)](_0x1180a4(0x3e2)))['data']['ip'];}catch(_0x16b1db){console[_0x1180a4(0x4a6)](_0x16b1db);try{_0xcb83bc=(await Le['default']['get'](_0x1180a4(0x1d3)))[_0x1180a4(0x31e)]['ip'];}catch(_0x4b993f){console[_0x1180a4(0x4a6)](_0x4b993f);try{_0xcb83bc=(await Le[_0x1180a4(0x5fb)][_0x1180a4(0x5c2)](_0x1180a4(0x508)))[_0x1180a4(0x31e)]['match'](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x213e6c){return console[_0x1180a4(0x4a6)](_0x213e6c),!0x1;}}}return _0xcb83bc;}async function Pi(){const _0x50aecc=a0_0x5a2dd1;Ne||(await Ro(_0x50aecc(0x579),_0x50aecc(0x41e),_0x50aecc(0x4d8)),await Ro('ffmpeg',_0x50aecc(0x46b),_0x50aecc(0x6b0)));}var Ao=0x0;async function Oi(){const _0x100eaa=a0_0x5a2dd1;Pi();let _0x1dc818=await Ls(_0x100eaa(0x579),_0x100eaa(0x4d8)),_0x4d49ad=await Ls(_0x100eaa(0x4cd),_0x100eaa(0x6b0)),_0x515584=y['get'](_0x100eaa(0x47f)),_0x4272bd=y['get'](_0x100eaa(0x5b6)),_0x1e8551=y[_0x100eaa(0x5c2)]('AUTHENTICATION')[_0x100eaa(0x12f)][_0x100eaa(0x434)],_0x3dd848=y[_0x100eaa(0x5c2)](_0x100eaa(0x635)),_0x57249d=await $o(),_0x418e2a=y['get'](_0x100eaa(0x6b6))[_0x100eaa(0x483)],_0x51b690=y[_0x100eaa(0x5c2)]('PHONE');try{let _0x28ae69={'ip':_0x57249d||null,'redis_instalado':_0x1dc818||null,'ffmpeg_instalado':_0x4d49ad||null,'redis_enable':_0x515584?.['ENABLED']||null,'autoupdate':_0x4272bd||null,'apikey':_0x1e8551||null,'ssl':_0x3dd848?.[_0x100eaa(0x328)]||null,'lastupdate':ko||null,'port':_0x418e2a||null,'phone':_0x51b690||null,'gitInstallError':Ne?.[_0x100eaa(0x19d)]||null};console[_0x100eaa(0x6aa)](_0x100eaa(0x484),_0x28ae69['ip']);for(let _0x399eb8 in _0x28ae69)_0x28ae69[_0x100eaa(0x158)](_0x399eb8)&&_0x399eb8!=='ip'&&(_0x28ae69[_0x399eb8]=JSON[_0x100eaa(0x561)](_0x28ae69[_0x399eb8]));return(await Le[_0x100eaa(0x5fb)][_0x100eaa(0x684)](_0x100eaa(0x2a8),_0x28ae69))[_0x100eaa(0x31e)];}catch(_0x48c1ab){return console[_0x100eaa(0x4a6)](_0x48c1ab),!0x1;}finally{}}var $s=!0x1,ko=0x20e,_i=0x3,Io=0x1b7740;async function Us(){const _0xf5d66a=a0_0x5a2dd1;if(!await $o())return console['error'](_0xf5d66a(0x585)),_0xf5d66a(0x234);let _0x218817=await Oi();if(_0x218817){if(_0x218817[_0xf5d66a(0x3e8)][_0xf5d66a(0x2a6)]===!0x0){let _0x305b5d=y[_0xf5d66a(0x5c2)]('AUTOUPDATE');Ne===null&&_0x305b5d!==_0xf5d66a(0x260)&&_0x218817[_0xf5d66a(0x3e8)][_0xf5d66a(0x1ee)]-ko>0x0&&await xi(),$s||($s=!0x0,Mi());}else return console[_0xf5d66a(0x6aa)](_0xf5d66a(0x45e)),$s&&(console[_0xf5d66a(0x6aa)](_0xf5d66a(0x441)),process[_0xf5d66a(0x69f)]()),_0xf5d66a(0x21e);let _0x186638=0x24*0x3c*0x3c,_0x286715=_0x218817[_0xf5d66a(0x3e8)][_0xf5d66a(0x493)]>_0x186638?_0x186638:_0x218817['response'][_0xf5d66a(0x493)],_0x3714d4=Number(_0x286715);if(isNaN(_0x3714d4)){console['error']('interval\x20não\x20é\x20um\x20número');return;}let _0x46370f=Math[_0xf5d66a(0x287)](_0x3714d4/0xe10),_0x5b83b5=Math['floor'](_0x3714d4%0xe10/0x3c),_0x395f9a=new Date(Date[_0xf5d66a(0x468)]()+_0x3714d4*0x3e8);setTimeout(Us,_0x3714d4*0x3e8);let _0x2b6523=_0xbf4db5=>_0xbf4db5['toString']()['padStart'](0x2,'0'),_0x445128=_0xf5d66a(0x108)+_0x2b6523(_0x46370f)+_0xf5d66a(0xf4)+_0x2b6523(_0x5b83b5)+_0xf5d66a(0x3da)+_0x2b6523(_0x395f9a[_0xf5d66a(0x263)]())+':'+_0x2b6523(_0x395f9a['getMinutes']());console[_0xf5d66a(0x6aa)](_0x445128);}else{if(Ao++,Ao<_i)console[_0xf5d66a(0x6aa)](_0xf5d66a(0x21a)+Io/0xea60+_0xf5d66a(0x199)),setTimeout(Us,Io);else return console['error'](_0xf5d66a(0x48a)),_0xf5d66a(0x640);}}async function xi(){const _0x2b3d7a=a0_0x5a2dd1;console['log'](_0x2b3d7a(0x367));let _0x17cb1b=(0x0,Vs[_0x2b3d7a(0x253)])(_0x2b3d7a(0x4c2),{'shell':!0x0});_0x17cb1b[_0x2b3d7a(0x165)]['on'](_0x2b3d7a(0x31e),_0xc279be=>{const _0x3c30ef=_0x2b3d7a;console['log'](_0x3c30ef(0x334)+_0xc279be);}),_0x17cb1b[_0x2b3d7a(0x655)]['on'](_0x2b3d7a(0x31e),_0x197601=>{const _0xc50656=_0x2b3d7a;console[_0xc50656(0x4a6)](_0xc50656(0x4c8)+_0x197601);}),_0x17cb1b['on'](_0x2b3d7a(0x69f),_0x18c009=>{const _0x8b1d47=_0x2b3d7a;_0x18c009!==0x0?console[_0x8b1d47(0x4a6)](_0x8b1d47(0x3a1)+_0x18c009):console[_0x8b1d47(0x6aa)]('Sistema\x20atualizado\x20com\x20sucesso!'),console['log'](_0x8b1d47(0x54e)),setTimeout(()=>process[_0x8b1d47(0x69f)](),0x2710);});}