const a0_0x3e22c7=a0_0x33a7;(function(_0x369315,_0x2fe1ee){const _0x5ac565=a0_0x33a7,_0x67e2df=_0x369315();while(!![]){try{const _0x245912=-parseInt(_0x5ac565(0x240))/0x1*(parseInt(_0x5ac565(0x591))/0x2)+parseInt(_0x5ac565(0x2e2))/0x3+-parseInt(_0x5ac565(0x449))/0x4*(parseInt(_0x5ac565(0x47f))/0x5)+parseInt(_0x5ac565(0x607))/0x6+parseInt(_0x5ac565(0x4f5))/0x7*(-parseInt(_0x5ac565(0x5d9))/0x8)+parseInt(_0x5ac565(0x59d))/0x9+-parseInt(_0x5ac565(0x183))/0xa;if(_0x245912===_0x2fe1ee)break;else _0x67e2df['push'](_0x67e2df['shift']());}catch(_0x267663){_0x67e2df['push'](_0x67e2df['shift']());}}}(a0_0x3537,0x98755));var Uo=Object[a0_0x3e22c7(0x516)],Bs=Object[a0_0x3e22c7(0x5c5)],Vo=Object[a0_0x3e22c7(0x278)],jo=Object[a0_0x3e22c7(0x6d4)],Bo=Object[a0_0x3e22c7(0x3df)],Fo=Object['prototype'][a0_0x3e22c7(0x4bd)],Jo=(_0x186ce4,_0x5ce8d9,_0x199498,_0x22d9d2)=>{const _0x279d08=a0_0x3e22c7;if(_0x5ce8d9&&typeof _0x5ce8d9=='object'||typeof _0x5ce8d9==_0x279d08(0x6c2)){for(let _0x55953e of jo(_0x5ce8d9))!Fo[_0x279d08(0x6e5)](_0x186ce4,_0x55953e)&&_0x55953e!==_0x199498&&Bs(_0x186ce4,_0x55953e,{'get':()=>_0x5ce8d9[_0x55953e],'enumerable':!(_0x22d9d2=Vo(_0x5ce8d9,_0x55953e))||_0x22d9d2[_0x279d08(0x1bb)]});}return _0x186ce4;},T=(_0x5610a0,_0x5483de,_0x48eab8)=>(_0x48eab8=_0x5610a0!=null?Uo(Bo(_0x5610a0)):{},Jo(_0x5483de||!_0x5610a0||!_0x5610a0[a0_0x3e22c7(0x448)]?Bs(_0x48eab8,a0_0x3e22c7(0x30c),{'value':_0x5610a0,'enumerable':!0x0}):_0x48eab8,_0x5610a0)),Do=T(require(a0_0x3e22c7(0x686))),Js=require('fs'),Gs=require(a0_0x3e22c7(0x218)),qs=require('path'),Ue=require(a0_0x3e22c7(0x3a2)),Y=process[a0_0x3e22c7(0x68b)](),j=(0x0,Ue[a0_0x3e22c7(0x72a)])(Y,a0_0x3e22c7(0x453)),Fs=(0x0,Ue[a0_0x3e22c7(0x72a)])(Y,a0_0x3e22c7(0x307)),es=(0x0,Ue[a0_0x3e22c7(0x72a)])(Y,a0_0x3e22c7(0x614),a0_0x3e22c7(0x378)),Ws=require(a0_0x3e22c7(0x3c1)),ts=class{constructor(){const _0x5a5adf=a0_0x3e22c7;this[_0x5a5adf(0x1d1)]();}['get'](_0x4ff3fa){const _0x4e170f=a0_0x3e22c7;return this[_0x4e170f(0x3e3)][_0x4ff3fa];}['loadEnv'](){const _0x31bf5b=a0_0x3e22c7;this[_0x31bf5b(0x3e3)]=process[_0x31bf5b(0x3e3)]?.['DOCKER_ENV']!==_0x31bf5b(0x30b)?this[_0x31bf5b(0x69e)]():this['envProcess'](),this[_0x31bf5b(0x3e3)][_0x31bf5b(0x3ba)]=process[_0x31bf5b(0x3e3)]?.['NODE_ENV']===_0x31bf5b(0x3b1),process['env']?.[_0x31bf5b(0x1b5)]==='true'&&(this[_0x31bf5b(0x3e3)][_0x31bf5b(0x511)]['TYPE']='http',this[_0x31bf5b(0x3e3)]['SERVER'][_0x31bf5b(0x3c0)]=Number[_0x31bf5b(0x532)](process[_0x31bf5b(0x3e3)]?.['SERVER_PORT']??_0x31bf5b(0x43f)));}[a0_0x3e22c7(0x69e)](){const _0x4b5b40=a0_0x3e22c7;return(0x0,Gs[_0x4b5b40(0x30a)])((0x0,Js[_0x4b5b40(0x1b3)])((0x0,qs[_0x4b5b40(0x72a)])(Fs,_0x4b5b40(0x14f)),{'encoding':_0x4b5b40(0x2b3)}));}['envProcess'](){const _0x1f7045=a0_0x3e22c7;return{'SERVER':{'TYPE':process['env'][_0x1f7045(0x310)],'PORT':Number[_0x1f7045(0x532)](process[_0x1f7045(0x3e3)][_0x1f7045(0x6a5)])},'CORS':{'ORIGIN':process[_0x1f7045(0x3e3)][_0x1f7045(0x557)][_0x1f7045(0x209)](','),'METHODS':process[_0x1f7045(0x3e3)][_0x1f7045(0x46a)]['split'](','),'CREDENTIALS':process['env']?.[_0x1f7045(0x650)]===_0x1f7045(0x30b)},'SSL_CONF':{'PRIVKEY':process['env']?.['SSL_CONF_PRIVKEY'],'FULLCHAIN':process['env']?.['SSL_CONF_FULLCHAIN']},'STORE':{'CLEANING_INTERVAL':Number[_0x1f7045(0x707)](process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x494)])?Number['parseInt'](process['env'][_0x1f7045(0x494)]):void 0x0,'MESSAGES':process['env']?.['STORE_MESSAGE']==='true','CONTACTS':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x170)]===_0x1f7045(0x30b),'CHATS':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x5b6)]==='true'},'DATABASE':{'CONNECTION':{'HOST':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x215)],'PORT':Number['parseInt'](process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x215)]),'USER':process[_0x1f7045(0x3e3)][_0x1f7045(0x371)],'PASSWORD':process[_0x1f7045(0x3e3)][_0x1f7045(0x70f)],'URI':process['env']['DATABASE_CONNECTION_URI'],'DB_PREFIX_NAME':process[_0x1f7045(0x3e3)]['DATABASE_CONNECTION_DB_PREFIX_NAME']},'ENABLED':process['env']?.[_0x1f7045(0x54c)]===_0x1f7045(0x30b)},'REDIS':{'ENABLED':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x1cb)]==='true','URI':process[_0x1f7045(0x3e3)]['REDIS_URI'],'PREFIX_KEY':process['env'][_0x1f7045(0x498)]},'LOG':{'LEVEL':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x315)][_0x1f7045(0x209)](','),'COLOR':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x257)]==='true'},'DEL_INSTANCE':(0x0,Ws[_0x1f7045(0x3a3)])(process['env']?.[_0x1f7045(0x5ee)])?process[_0x1f7045(0x3e3)][_0x1f7045(0x5ee)]===_0x1f7045(0x30b):Number[_0x1f7045(0x532)](process['env']['DEL_INSTANCE'])||!0x1,'WEBHOOK':{'WEBHOOK_MAP':process[_0x1f7045(0x3e3)][_0x1f7045(0x65b)]?process[_0x1f7045(0x3e3)][_0x1f7045(0x65b)]===_0x1f7045(0x30b):!0x1,'GLOBAL':{'URL':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x2e3)],'ENABLED':process[_0x1f7045(0x3e3)]?.['WEBHOOK_GLOBAL_ENABLED']===_0x1f7045(0x30b)},'EVENTS':{'STATUS_INSTANCE':process[_0x1f7045(0x3e3)]?.['WEBHOOK_EVENTS_STATUS_INSTANCE']==='true','QRCODE_UPDATED':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x6c0)]===_0x1f7045(0x30b),'MESSAGES_SET':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x256)]===_0x1f7045(0x30b),'MESSAGES_UPSERT':process['env']?.[_0x1f7045(0x32a)]===_0x1f7045(0x30b),'MESSAGES_UPDATE':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x4ed)]===_0x1f7045(0x30b),'SEND_MESSAGE':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x6be)]===_0x1f7045(0x30b),'CONTACTS_SET':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x181)]===_0x1f7045(0x30b),'CONTACTS_UPDATE':process['env']?.[_0x1f7045(0x677)]===_0x1f7045(0x30b),'CONTACTS_UPSERT':process['env']?.[_0x1f7045(0x2fa)]===_0x1f7045(0x30b),'PRESENCE_UPDATE':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x724)]===_0x1f7045(0x30b),'CHATS_SET':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x6bb)]==='true','CHATS_UPDATE':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x5a8)]===_0x1f7045(0x30b),'CHATS_UPSERT':process['env']?.['WEBHOOK_EVENTS_CHATS_UPSERT']===_0x1f7045(0x30b),'CHATS_DELETE':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x611)]===_0x1f7045(0x30b),'CONNECTION_UPDATE':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x55c)]==='true','GROUPS_UPSERT':process[_0x1f7045(0x3e3)]?.['WEBHOOK_EVENTS_GROUPS_UPSERT']===_0x1f7045(0x30b),'GROUP_UPDATE':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x3a0)]===_0x1f7045(0x30b),'GROUP_PARTICIPANTS_UPDATE':process[_0x1f7045(0x3e3)]?.['WEBHOOK_EVENTS_GROUP_PARTICIPANTS_UPDATE']===_0x1f7045(0x30b),'NEW_JWT_TOKEN':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x6d7)]===_0x1f7045(0x30b)}},'CONFIG_SESSION_PHONE':{'CLIENT':process[_0x1f7045(0x3e3)]?.['CONFIG_SESSION_PHONE_CLIENT']||_0x1f7045(0x584),'NAME':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x35a)]||_0x1f7045(0x55a)},'QRCODE':{'LIMIT':Number['parseInt'](process['env']['QRCODE_LIMIT'])||0x5},'TRIAL_AD':process[_0x1f7045(0x3e3)]?.['TRIAL_AD'],'TRIAL_INSTANCE_NAME':process['env']?.['TRIAL_INSTANCE_NAME'],'AUTOUPDATE':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x479)]==='true','PHONE':process[_0x1f7045(0x3e3)]?.[_0x1f7045(0x180)],'AUTHENTICATION':{'TYPE':process[_0x1f7045(0x3e3)][_0x1f7045(0x6e1)],'API_KEY':{'KEY':process[_0x1f7045(0x3e3)][_0x1f7045(0x463)]},'JWT':{'EXPIRIN_IN':Number['isInteger'](process[_0x1f7045(0x3e3)]?.['AUTHENTICATION_JWT_EXPIRIN_IN'])?Number[_0x1f7045(0x532)](process['env']['AUTHENTICATION_JWT_EXPIRIN_IN']):0xe10,'SECRET':process[_0x1f7045(0x3e3)][_0x1f7045(0x468)]}}};}},y=new ts(),Po=T(require(a0_0x3e22c7(0x4a3))),me=T(require(a0_0x3e22c7(0x3ed))),ks=require('path'),ss=T(require(a0_0x3e22c7(0x682))),as=(_0x4037f7=>(_0x4037f7['LOG']='\x1b[32m',_0x4037f7[a0_0x3e22c7(0x331)]='\x1b[34m',_0x4037f7['WARN']=a0_0x3e22c7(0x3cb),_0x4037f7['ERROR']=a0_0x3e22c7(0x24b),_0x4037f7[a0_0x3e22c7(0x447)]=a0_0x3e22c7(0x711),_0x4037f7['VERBOSE']=a0_0x3e22c7(0x235),_0x4037f7[a0_0x3e22c7(0x193)]=a0_0x3e22c7(0x338),_0x4037f7))(as||{}),Hs=(_0x1b8481=>(_0x1b8481['LOG']=a0_0x3e22c7(0x270),_0x1b8481[a0_0x3e22c7(0x193)]=a0_0x3e22c7(0x150),_0x1b8481[a0_0x3e22c7(0x331)]=a0_0x3e22c7(0x311),_0x1b8481[a0_0x3e22c7(0x27f)]=a0_0x3e22c7(0x25d),_0x1b8481[a0_0x3e22c7(0x3c3)]=a0_0x3e22c7(0x1b6),_0x1b8481['DEBUG']=a0_0x3e22c7(0x55d),_0x1b8481[a0_0x3e22c7(0x61e)]=a0_0x3e22c7(0x381),_0x1b8481))(Hs||{}),Ks=(_0x543dd1=>(_0x543dd1[a0_0x3e22c7(0x234)]='LOG',_0x543dd1[a0_0x3e22c7(0x27f)]=a0_0x3e22c7(0x27f),_0x543dd1['INFO']=a0_0x3e22c7(0x331),_0x543dd1[a0_0x3e22c7(0x193)]='DARK',_0x543dd1[a0_0x3e22c7(0x3c3)]='ERROR',_0x543dd1[a0_0x3e22c7(0x447)]=a0_0x3e22c7(0x447),_0x543dd1[a0_0x3e22c7(0x61e)]='VERBOSE',_0x543dd1))(Ks||{}),zs=(_0x5db71d=>(_0x5db71d[a0_0x3e22c7(0x234)]=a0_0x3e22c7(0x305),_0x5db71d[a0_0x3e22c7(0x331)]=a0_0x3e22c7(0x2ab),_0x5db71d[a0_0x3e22c7(0x27f)]=a0_0x3e22c7(0x4db),_0x5db71d[a0_0x3e22c7(0x193)]=a0_0x3e22c7(0x21e),_0x5db71d['ERROR']=a0_0x3e22c7(0x1a7),_0x5db71d[a0_0x3e22c7(0x447)]=a0_0x3e22c7(0x380),_0x5db71d['VERBOSE']='\x1b[47m',_0x5db71d))(zs||{}),C=class{constructor(_0x257ca6=a0_0x3e22c7(0x3f5)){const _0x4cd64f=a0_0x3e22c7;this[_0x4cd64f(0x1f7)]=_0x257ca6,this[_0x4cd64f(0x3e5)]=y;}[a0_0x3e22c7(0x233)](_0x53c0d1){const _0x1e951d=a0_0x3e22c7;this[_0x1e951d(0x1f7)]=_0x53c0d1;}[a0_0x3e22c7(0x53e)](_0x3b82b1,_0x5255d9){const _0x5244bd=a0_0x3e22c7;let _0x705e61=[];this[_0x5244bd(0x3e5)]['get'](_0x5244bd(0x234))[_0x5244bd(0x229)][_0x5244bd(0x4e9)](_0x186a9f=>_0x705e61[_0x5244bd(0x6a8)](Ks[_0x186a9f]));let _0x32e058=typeof _0x3b82b1;_0x705e61['includes'](_0x5255d9)&&(y[_0x5244bd(0x17f)](_0x5244bd(0x234))[_0x5244bd(0x2f2)]?(console[_0x5244bd(0x4b3)](_0x5244bd(0x4b8)+Hs[_0x5255d9],_0x5244bd(0x179),(0x0,ss['default'])()[_0x5244bd(0x4f6)](_0x5244bd(0x361)),_0x5244bd(0x64a),as[_0x5255d9]+zs[_0x5255d9]+_0x5244bd(0x4b8),_0x5255d9+'\x20\x1b[0m','\x1b[33m\x1b[1m',this[_0x5244bd(0x1f7)]+_0x5244bd(0x64a),as[_0x5255d9],_0x32e058!==_0x5244bd(0x245)?_0x3b82b1:'',_0x5244bd(0x64a)),_0x32e058===_0x5244bd(0x245)&&console[_0x5244bd(0x4b3)](_0x3b82b1,'\x0a')):console[_0x5244bd(0x4b3)]((0x0,ss[_0x5244bd(0x30c)])()[_0x5244bd(0x4f6)](_0x5244bd(0x646)),_0x5255d9+'\x20',''+this['context'],_0x3b82b1));}[a0_0x3e22c7(0x4b3)](_0x3b1ef9){const _0x401b46=a0_0x3e22c7;this[_0x401b46(0x53e)](_0x3b1ef9,_0x401b46(0x234));}[a0_0x3e22c7(0x60d)](_0x2b1d19){const _0x49d70a=a0_0x3e22c7;this[_0x49d70a(0x53e)](_0x2b1d19,_0x49d70a(0x331));}[a0_0x3e22c7(0x5b3)](_0x22748c){const _0x1a1cfd=a0_0x3e22c7;this[_0x1a1cfd(0x53e)](_0x22748c,_0x1a1cfd(0x27f));}[a0_0x3e22c7(0x41f)](_0x100d03){const _0xe5a2c6=a0_0x3e22c7;this[_0xe5a2c6(0x53e)](_0x100d03,_0xe5a2c6(0x3c3));}[a0_0x3e22c7(0x461)](_0x3def92){const _0x5cc672=a0_0x3e22c7;this[_0x5cc672(0x53e)](_0x3def92,_0x5cc672(0x61e));}['debug'](_0x2912d9){const _0x58702d=a0_0x3e22c7;this[_0x58702d(0x53e)](_0x2912d9,'DEBUG');}[a0_0x3e22c7(0x167)](_0x1915d2){const _0x495767=a0_0x3e22c7;this['console'](_0x1915d2,_0x495767(0x193));}};function Qs(){const _0x63af12=a0_0x3e22c7;process['on'](_0x63af12(0x38b),(_0x52e2f8,_0x28ca42)=>{const _0x15d0b8=_0x63af12;new C(_0x15d0b8(0x38b))[_0x15d0b8(0x41f)]({'origin':_0x28ca42,'stderr':process[_0x15d0b8(0x26f)]['fd'],'error':_0x52e2f8});}),process['on'](_0x63af12(0x4bf),(_0x190a58,_0x57e301)=>{const _0x2462f5=_0x63af12;new C(_0x2462f5(0x4bf))['error']({'origin':_0x57e301,'stderr':process[_0x2462f5(0x26f)]['fd'],'error':_0x190a58});});}var Ys=T(require(a0_0x3e22c7(0x53b))),os=new Ys['default']({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),le=require(a0_0x3e22c7(0x3a2)),he=require('fs'),is=require(a0_0x3e22c7(0x3a2)),B=class{constructor(_0x15d05a){const _0x439baf=a0_0x3e22c7;this[_0x439baf(0x669)]=(0x0,is[_0x439baf(0x72a)])(Y,_0x439baf(0x614)),this['writeStore']=_0x5ad965=>{const _0x450144=_0x439baf;(0x0,he[_0x450144(0x5c9)])(_0x5ad965['path'])||(0x0,he[_0x450144(0x51b)])(_0x5ad965[_0x450144(0x3a2)],{'recursive':!0x0});try{return(0x0,he[_0x450144(0x1ac)])((0x0,is[_0x450144(0x72a)])(_0x5ad965[_0x450144(0x3a2)],_0x5ad965[_0x450144(0x1df)]+_0x450144(0x5bf)),JSON[_0x450144(0x5af)]({..._0x5ad965[_0x450144(0x1d5)]}),{'encoding':_0x450144(0x2b3)}),{'message':_0x450144(0x365)};}finally{_0x5ad965['data']=void 0x0;}},this[_0x439baf(0x4a9)]=_0x15d05a[_0x439baf(0x17f)](_0x439baf(0x5f4));}[a0_0x3e22c7(0x680)](_0x37c7d9,_0x1e9bda=!0x1){const _0xccda=a0_0x3e22c7;throw new Error(_0xccda(0x351));}[a0_0x3e22c7(0x445)](_0x1219f4){const _0x1d6375=a0_0x3e22c7;throw new Error(_0x1d6375(0x351));}[a0_0x3e22c7(0x45d)](_0x373d7,_0x4d2610){const _0x1aad5f=a0_0x3e22c7;throw new Error(_0x1aad5f(0x351));}},oe=require('fs'),Ve=class{},je=class extends B{constructor(_0x162565,_0x56fa29){const _0x4a1005=a0_0x3e22c7;super(_0x56fa29),this[_0x4a1005(0x500)]=_0x162565,this[_0x4a1005(0x3e5)]=_0x56fa29;}async['insert'](_0x593002,_0x43d34d=!0x1){const _0x39856c=a0_0x3e22c7;if(_0x593002[_0x39856c(0x2d6)]!==0x0)try{return this[_0x39856c(0x4a9)][_0x39856c(0x5d8)]&&_0x43d34d?{'insertCount':(await this[_0x39856c(0x500)][_0x39856c(0x51e)]([..._0x593002]))[_0x39856c(0x2d6)]}:_0x43d34d?(_0x593002[_0x39856c(0x4e9)](_0x470c4c=>this[_0x39856c(0x253)]({'path':(0x0,le['join'])(this[_0x39856c(0x669)],'messages',_0x470c4c['owner']),'fileName':_0x470c4c['key']['id'],'data':_0x470c4c})),{'insertCount':_0x593002['length']}):{'insertCount':0x0};}catch(_0x4f3b6c){return console[_0x39856c(0x4b3)]('ERROR:\x20',_0x4f3b6c),_0x4f3b6c;}finally{_0x593002=void 0x0;}}async[a0_0x3e22c7(0x445)](_0x5db8c0){const _0x757488=a0_0x3e22c7;try{if(this[_0x757488(0x4a9)][_0x757488(0x5d8)]){if(_0x5db8c0?.['where']?.[_0x757488(0x657)]){for(let [_0xcda819,_0x2812dd]of Object['entries'](_0x5db8c0['where'][_0x757488(0x657)]))_0x5db8c0[_0x757488(0x3aa)][_0x757488(0x5fb)+_0xcda819]=_0x2812dd;delete _0x5db8c0?.[_0x757488(0x3aa)]?.[_0x757488(0x657)];}return await this[_0x757488(0x500)]['find']({..._0x5db8c0[_0x757488(0x3aa)]})['sort']({'messageTimestamp':-0x1})['limit'](_0x5db8c0?.[_0x757488(0x3f6)]??0x0);}let _0xd83c8e=[];if(_0x5db8c0?.[_0x757488(0x3aa)]?.[_0x757488(0x657)]?.['id'])_0xd83c8e['push'](JSON[_0x757488(0x251)]((0x0,oe['readFileSync'])((0x0,le[_0x757488(0x72a)])(this[_0x757488(0x669)],_0x757488(0x2d1),_0x5db8c0['where'][_0x757488(0x40b)],_0x5db8c0[_0x757488(0x3aa)][_0x757488(0x657)]['id']+_0x757488(0x5bf)),{'encoding':_0x757488(0x2b3)})));else{let _0x347ffc=(0x0,oe[_0x757488(0x5fc)])((0x0,le['join'])(this[_0x757488(0x669)],_0x757488(0x2d1),_0x5db8c0[_0x757488(0x3aa)][_0x757488(0x40b)]),{'encoding':_0x757488(0x2b3)});for await(let _0xeb1791 of _0x347ffc)_0xeb1791[_0x757488(0x1fa)]()&&_0xd83c8e['push'](JSON[_0x757488(0x251)]((0x0,oe[_0x757488(0x1b3)])((0x0,le['join'])(this[_0x757488(0x669)],_0x757488(0x2d1),_0x5db8c0[_0x757488(0x3aa)][_0x757488(0x40b)],_0xeb1791['name']),{'encoding':_0x757488(0x2b3)})));}return _0xd83c8e[_0x757488(0x24a)]((_0x16ead4,_0x3d64e0)=>_0x3d64e0[_0x757488(0x297)]-_0x16ead4['messageTimestamp'])[_0x757488(0x5b7)](0x0,_0x5db8c0?.['limit']??_0xd83c8e[_0x757488(0x2d6)]);}catch{return[];}}async[a0_0x3e22c7(0x45d)](_0x1f5696){const _0x6dc2fd=a0_0x3e22c7;try{if(this[_0x6dc2fd(0x4a9)]['ENABLED'])await this['messageModel'][_0x6dc2fd(0x49f)]({..._0x1f5696[_0x6dc2fd(0x3aa)]});else{let {owner:_0x120381}=_0x1f5696['where'];(0x0,oe[_0x6dc2fd(0x689)])((0x0,le['join'])(this[_0x6dc2fd(0x669)],_0x6dc2fd(0x2d1),_0x120381))[_0x6dc2fd(0x4e9)](_0x37af8e=>{const _0x54cf7c=_0x6dc2fd;let _0x1c8cec=(0x0,le[_0x54cf7c(0x72a)])(this[_0x54cf7c(0x669)],'messages',_0x120381,_0x37af8e);(0x0,oe[_0x54cf7c(0x6c7)])(_0x1c8cec);});}}catch(_0xed60a0){console[_0x6dc2fd(0x41f)](_0xed60a0);}}async[a0_0x3e22c7(0x64c)](_0x547c49,_0x36299e){const _0x31b1b9=a0_0x3e22c7;try{let _0x6e9675=null;if(this['dbSettings'][_0x31b1b9(0x5d8)])return _0x6e9675=await this['messageModel'][_0x31b1b9(0x2e8)]({..._0x547c49[_0x31b1b9(0x3aa)]},{'$set':_0x36299e},{'new':!0x0}),_0x6e9675;}catch(_0x2ecd76){throw console['error'](_0x2ecd76),_0x2ecd76;}}async[a0_0x3e22c7(0x51e)](_0x182cb2,_0x36b036=!0x1){const _0x504b12=a0_0x3e22c7;if(_0x182cb2['length']!==0x0)try{return this[_0x504b12(0x4a9)][_0x504b12(0x5d8)]&&_0x36b036?{'insertCount':(await this[_0x504b12(0x500)][_0x504b12(0x51e)]([..._0x182cb2]))[_0x504b12(0x2d6)]}:_0x36b036?(_0x182cb2[_0x504b12(0x4e9)](_0x24b27c=>this[_0x504b12(0x253)]({'path':(0x0,le[_0x504b12(0x72a)])(this['storePath'],'messages',_0x24b27c[_0x504b12(0x40b)]),'fileName':_0x24b27c[_0x504b12(0x657)]['id'],'data':_0x24b27c})),{'insertCount':_0x182cb2[_0x504b12(0x2d6)]}):{'insertCount':0x0};}catch(_0x466594){return console[_0x504b12(0x4b3)]('ERROR:\x20',_0x466594),_0x466594;}finally{_0x182cb2=void 0x0;}}},se=require('fs'),uo=T(require('@ffmpeg-installer/ffmpeg')),w=T(require(a0_0x3e22c7(0x27c))),_e=require('fs'),$=T(require(a0_0x3e22c7(0x3a2))),ue=T(require('axios')),po=require('uuid'),go=T(require(a0_0x3e22c7(0x67d))),mo=T(require('qrcode-terminal')),Xs=['imageMessage','documentMessage','audioMessage',a0_0x3e22c7(0x3b4),a0_0x3e22c7(0x4b9)],Zs=['ephemeralMessage',a0_0x3e22c7(0x519),a0_0x3e22c7(0x3ec),a0_0x3e22c7(0x214)],ho=require('os'),kt=T(require(a0_0x3e22c7(0x699))),Vt=require('child_process'),Ns=require(a0_0x3e22c7(0x6eb)),Be=require(a0_0x3e22c7(0x1c3)),rs=T(require(a0_0x3e22c7(0x1c3))),ea=new C(a0_0x3e22c7(0x3f3)),J=y[a0_0x3e22c7(0x17f)](a0_0x3e22c7(0x5f4)),M=J[a0_0x3e22c7(0x5d8)]?J[a0_0x3e22c7(0x61d)][a0_0x3e22c7(0x420)]?rs[a0_0x3e22c7(0x30c)][a0_0x3e22c7(0x2b4)](J['CONNECTION']['URI'],{'dbName':J[a0_0x3e22c7(0x61d)]['DB_PREFIX_NAME']+a0_0x3e22c7(0x5cf)}):rs[a0_0x3e22c7(0x30c)][a0_0x3e22c7(0x2b4)](a0_0x3e22c7(0x2dd)+J['CONNECTION'][a0_0x3e22c7(0x15b)]+':'+J[a0_0x3e22c7(0x61d)][a0_0x3e22c7(0x3c0)]+a0_0x3e22c7(0x703),{'user':J[a0_0x3e22c7(0x61d)][a0_0x3e22c7(0x348)],'pass':J[a0_0x3e22c7(0x61d)]['PASSWORD'],'dbName':J[a0_0x3e22c7(0x61d)]['DB_PREFIX_NAME']+a0_0x3e22c7(0x5cf)}):null;J[a0_0x3e22c7(0x5d8)]&&ea[a0_0x3e22c7(0x60d)]('ON\x20-\x20dbName:\x20'+M[a0_0x3e22c7(0x655)]);async function Go(){const _0x2a1fdf=a0_0x3e22c7;await D[_0x2a1fdf(0x390)]({'leadInfo.tags':{'$exists':!0x1}},{'$set':{'leadInfo.tags':[]}}),await D[_0x2a1fdf(0x390)]({'leadInfo.customFields':{'$exists':!0x1}},{'$set':{'leadInfo.customFields':[]}}),await D['updateMany']({},{'$unset':{'lastUpdate':0x1,'lastMsgUpdate':0x1}});}M?.['on'](a0_0x3e22c7(0x414),()=>{const _0xecc140=a0_0x3e22c7;D&&Go()[_0xecc140(0x437)](_0x2c9367=>ea[_0xecc140(0x41f)](_0xecc140(0x434)+_0x2c9367));});var ns=class{},qo=new Be[(a0_0x3e22c7(0x3f8))]({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),Wo=new Be[(a0_0x3e22c7(0x3f8))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[qo],'default':[]},'statusLead':{'type':String},'note':{'type':String},'disableFlowsUntil':{'type':Number},'serviceOpen':{'type':Boolean},'assignedTo':{'type':String}},{'_id':!0x1}),Ho=new Be[(a0_0x3e22c7(0x3f8))]({'_id':{'type':String,'_id':!0x0},'id':{'type':String,'required':!0x0,'minlength':0x1},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number},'unreadcount':{'type':Number},'lastcache':{'type':Number},'leadInfo':{'type':Wo,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'group_size':{'type':Number},'group_announce':{'type':Boolean},'lastUpdate':{'type':Number},'lastMsgUpdate':{'type':Number}}),D=M?.[a0_0x3e22c7(0x185)](ns[a0_0x3e22c7(0x3dc)],Ho,a0_0x3e22c7(0x509)),ta=require(a0_0x3e22c7(0x1c3)),cs=class{},Ko=new ta[(a0_0x3e22c7(0x3f8))]({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'id':{'type':String,'required':!0x0,'minlength':0x1},'profilePictureUrl':{'type':String,'minlength':0x1},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String}}),Fe=M?.[a0_0x3e22c7(0x185)](cs[a0_0x3e22c7(0x3dc)],Ko,a0_0x3e22c7(0x54a)),O=require(a0_0x3e22c7(0x1c3)),sa=new O[(a0_0x3e22c7(0x3f8))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),ls=new O[(a0_0x3e22c7(0x3f8))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),zo=new O[(a0_0x3e22c7(0x3f8))]({'command':{'type':String},'text':{'type':String},'delay':{'type':Number},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'pollErrorMessage':{'type':String,'default':a0_0x3e22c7(0x1e8)},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),aa=new O[(a0_0x3e22c7(0x3f8))]({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),oa=new O['Schema']({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String}},{'_id':!0x1}),Qo=new O[(a0_0x3e22c7(0x3f8))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),ia=new O['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':zo},'apirequest':oa,'stopMinutes':{'type':String},'goToFlow':{'type':String},'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa}}),hs=new O[(a0_0x3e22c7(0x3f8))]({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),ra=new O[(a0_0x3e22c7(0x3f8))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),us=class{},na=new O[(a0_0x3e22c7(0x3f8))]({'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'readMessages':{'type':Boolean,'default':!0x1},'testingWith':{'type':String},'startCommandWord':{'type':String,'default':function(){const _0x2c11e7=a0_0x3e22c7;return _0x2c11e7(0x670)+Math[_0x2c11e7(0x1be)]()[_0x2c11e7(0x63b)](0x24)[_0x2c11e7(0x6d1)](0x2,0x7);},'required':!0x1,'minlength':0x5},'variables':[hs],'variablesNotFound':{'type':[String]},'blocks':[ia],'groups':[sa],'conditions':[aa],'varedits':[ra],'replyOptions':{'type':[ls],'default':[]}});na[a0_0x3e22c7(0x232)](a0_0x3e22c7(0x2bb),function(_0x430dbf){const _0x4165c0=a0_0x3e22c7;let _0x2420d6=new Set(),_0x592ed9=new Set(this[_0x4165c0(0x324)]?.['map'](_0x10330b=>_0x10330b[_0x4165c0(0x3dc)])),_0x25d556=JSON[_0x4165c0(0x5af)](this),_0x3a99ef=/{{(?!_)([^}]*)}}/g,_0x504bc4;for(;(_0x504bc4=_0x3a99ef[_0x4165c0(0x46d)](_0x25d556))!==null;)_0x592ed9[_0x4165c0(0x640)](_0x504bc4[0x1])||_0x2420d6[_0x4165c0(0x3b8)](_0x504bc4[0x1]);_0x2420d6[_0x4165c0(0x684)]>0x0?(console['warn'](_0x4165c0(0x1e7),Array[_0x4165c0(0x244)](_0x2420d6)),this['variablesNotFound']=Array[_0x4165c0(0x244)](_0x2420d6)):this[_0x4165c0(0x382)]=[],_0x430dbf();});var I=M?.[a0_0x3e22c7(0x185)](us[a0_0x3e22c7(0x3dc)],na,'flow'),Yo=new O[(a0_0x3e22c7(0x3f8))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[hs],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[Qo]},{'_id':!0x1}),ds=class{},Xo=new O['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[hs],'blocks':[ia],'groups':[sa],'conditions':[aa],'varedits':[ra],'replyOptions':{'type':[ls],'default':[]},'chatLog':Yo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x3e22c7(0x1c1)},'waitingPoll_id':{'type':String},'waitingPoll_name':{'type':String},'waitingPoll_replyOptions':{'type':[ls],'default':[]}}),G=M?.[a0_0x3e22c7(0x185)](ds['name'],Xo,'flowConversation'),ps=class{},Zo=new O[(a0_0x3e22c7(0x3f8))]({'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'mediatype':{'type':String},'fileName':{'type':String}},{'_id':!0x1}),ei=new O[(a0_0x3e22c7(0x3f8))]({'owner':{'type':String},'status':{'type':String,'default':a0_0x3e22c7(0x1af)},'info':{'type':String},'type':{'type':String},'flowName':{'type':String},'message':{'type':Zo,'default':{}},'remoteJids':{'type':[String],'default':[]},'when':{'type':Number},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'messagesSend':{'type':[Object],'default':[]},'remoteJidsRemaining':{'type':[String],'default':[]},'startSend':{'type':Number}}),U=M?.[a0_0x3e22c7(0x185)](ps[a0_0x3e22c7(0x3dc)],ei,a0_0x3e22c7(0x674)),gs=class{},ti=new O[(a0_0x3e22c7(0x3f8))]({'name':{'type':String},'requests':[oa],'owner':{'type':String}}),en=M?.['model'](gs[a0_0x3e22c7(0x3dc)],ti,a0_0x3e22c7(0x31a)),ms=class{},si=new O[(a0_0x3e22c7(0x3f8))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),ai=new O[(a0_0x3e22c7(0x3f8))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'},'stopConversation':{'type':String,'default':a0_0x3e22c7(0x282)},'stopMinutes':{'type':Number,'default':0x14}},{'_id':!0x1}),oi=new O[(a0_0x3e22c7(0x3f8))]({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),ii=new O[(a0_0x3e22c7(0x3f8))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[oi]},'customFields':{'type':[si]},'flowConfig':{'type':ai,'default':{}}}),ie=M?.[a0_0x3e22c7(0x185)](ms[a0_0x3e22c7(0x3dc)],ii,a0_0x3e22c7(0x394)),be=T(require(a0_0x3e22c7(0x1c3))),k=require('class-validator'),fe=class{constructor(_0x4a1928,_0x4f0ef9,_0x3149ad){const _0x3e959e=a0_0x3e22c7;this[_0x3e959e(0x4d4)]=_0x4a1928,this[_0x3e959e(0x613)]=_0x4f0ef9,this[_0x3e959e(0x3dc)]=_0x3149ad;}},Je=class{},Ge=class{},Ce=class{},qe=class{},We=class{},we=class{},He=class{},Ke=class{},ze=class{},Qe=class{},Pt=T(require(a0_0x3e22c7(0x3ed))),ca=require('fs'),la=require('path');async function Ye(_0x4b6b3c){const _0x463aaa=a0_0x3e22c7;let _0x46f678=F[_0x463aaa(0x40a)][_0x4b6b3c];if(J[_0x463aaa(0x5d8)]){let _0x1c1ecb=M['getClient']()['db'](J[_0x463aaa(0x61d)][_0x463aaa(0x491)]+_0x463aaa(0x255))[_0x463aaa(0x246)](_0x4b6b3c);return _0x46f678||(await _0x1c1ecb[_0x463aaa(0x445)]({})[_0x463aaa(0x239)]())[_0x463aaa(0x2d6)]>0x0;}return _0x46f678||(0x0,ca[_0x463aaa(0x5c9)])((0x0,la[_0x463aaa(0x72a)])(j,_0x4b6b3c));}async function fs(_0x388754,_0x20ed9d,_0x28ed9b){const _0x5bbf77=a0_0x3e22c7;if(_0x388754[_0x5bbf77(0x561)]['includes'](_0x5bbf77(0x71b))||_0x388754[_0x5bbf77(0x561)][_0x5bbf77(0x457)]('/instance/fetchInstances')||_0x388754[_0x5bbf77(0x561)][_0x5bbf77(0x457)]('/exit'))return _0x28ed9b();let _0x4d5d77=_0x388754['params'];if(!_0x4d5d77?.[_0x5bbf77(0x202)])throw new g(_0x5bbf77(0x2d2));if(!await Ye(_0x4d5d77[_0x5bbf77(0x202)]))throw new x('The\x20'+_0x4d5d77['instanceName']+'\x20instance\x20does\x20not\x20exist');_0x28ed9b();}async function ua(_0x1fa7f9,_0x5a7d1b,_0x5eb44f){const _0x307caa=a0_0x3e22c7;if(_0x1fa7f9['originalUrl']['includes'](_0x307caa(0x71b))){let _0x23cc5e=_0x1fa7f9[_0x307caa(0x31f)];if(await Ye(_0x23cc5e['instanceName']))throw new re(_0x307caa(0x4de)+_0x23cc5e['instanceName']+'\x20is\x20already\x20in\x20use.');F[_0x307caa(0x40a)][_0x23cc5e[_0x307caa(0x202)]]&&delete F[_0x307caa(0x40a)][_0x23cc5e[_0x307caa(0x202)]];}_0x5eb44f();}function a0_0x33a7(_0x518dc0,_0x2b5195){const _0x353776=a0_0x3537();return a0_0x33a7=function(_0x33a796,_0x32da86){_0x33a796=_0x33a796-0x14f;let _0xaa04a6=_0x353776[_0x33a796];return _0xaa04a6;},a0_0x33a7(_0x518dc0,_0x2b5195);}var da=require('class-validator'),pa=T(require(a0_0x3e22c7(0x70b))),Xe=a0_0x3e22c7(0x584),ni=new C(a0_0x3e22c7(0x681));async function ci(_0x2af5aa,_0x4b9ff5,_0x26f03c){const _0x1cd574=a0_0x3e22c7;let _0xb54b80=_0x2af5aa[_0x1cd574(0x17f)](_0x1cd574(0x4d5));if(_0xb54b80&&y['get'](_0x1cd574(0x32f))[_0x1cd574(0x1b2)][_0x1cd574(0x48a)]!==_0xb54b80)throw new ne();if(y[_0x1cd574(0x17f)](_0x1cd574(0x32f))[_0x1cd574(0x1b2)][_0x1cd574(0x48a)]===_0xb54b80)return _0x26f03c();if((_0x2af5aa[_0x1cd574(0x561)]['includes'](_0x1cd574(0x71b))||_0x2af5aa[_0x1cd574(0x561)]['includes'](_0x1cd574(0x320)))&&!_0xb54b80)throw new re(_0x1cd574(0x489),'The\x20global\x20api\x20key\x20must\x20be\x20set');let _0x589987=y[_0x1cd574(0x17f)]('AUTHENTICATION')[_0x1cd574(0x5e3)];try{let [_0x23b914,_0xf698dd]=_0x2af5aa[_0x1cd574(0x17f)](_0x1cd574(0x175))[_0x1cd574(0x209)]('\x20');if(_0x23b914[_0x1cd574(0x67c)]()!==_0x1cd574(0x61f))throw new ne();if(!(0x0,da['isJWT'])(_0xf698dd))throw new ne();let _0x2edff2=_0x2af5aa[_0x1cd574(0x3e9)],_0x2a50ef=pa['default'][_0x1cd574(0x17a)](_0xf698dd,_0x589987[_0x1cd574(0x1c5)],{'ignoreExpiration':_0x589987[_0x1cd574(0x294)]===0x0});if(_0x2edff2[_0x1cd574(0x202)]!==_0x2a50ef['instanceName']||Xe!==_0x2a50ef[_0x1cd574(0x44b)])throw new ne();return _0x26f03c();}catch(_0x4274ce){throw ni[_0x1cd574(0x41f)](_0x4274ce),new ne();}}async function li(_0x59bff5,_0x566859,_0x1a8622){const _0x5dde6f=a0_0x3e22c7;let _0x1f701b=y[_0x5dde6f(0x17f)](_0x5dde6f(0x32f))[_0x5dde6f(0x1b2)],_0x1b6b70=_0x59bff5[_0x5dde6f(0x17f)](_0x5dde6f(0x4d5));if(_0x1f701b[_0x5dde6f(0x48a)]===_0x1b6b70)return _0x1a8622();if(_0x59bff5[_0x5dde6f(0x561)][_0x5dde6f(0x457)](_0x5dde6f(0x71b))){let _0x3e6a4f=y[_0x5dde6f(0x17f)](_0x5dde6f(0x683)),_0x5ccd91=_0x59bff5[_0x5dde6f(0x31f)][_0x5dde6f(0x202)];if(_0x3e6a4f&&_0x5ccd91[_0x5dde6f(0x67c)]()['startsWith'](_0x3e6a4f['toLowerCase']()))return _0x1a8622();if(!_0x1b6b70)throw new re('Missing\x20global\x20api\x20key',_0x5dde6f(0x719));}if(_0x59bff5[_0x5dde6f(0x561)][_0x5dde6f(0x457)](_0x5dde6f(0x320))&&!_0x1b6b70)throw new re(_0x5dde6f(0x489),_0x5dde6f(0x719));if(_0x59bff5[_0x5dde6f(0x561)][_0x5dde6f(0x457)](_0x5dde6f(0x41a))&&!_0x1b6b70)throw new re(_0x5dde6f(0x489),_0x5dde6f(0x719));try{let _0xe3b218=_0x59bff5[_0x5dde6f(0x3e9)];if((await de[_0x5dde6f(0x378)]['find'](_0xe3b218[_0x5dde6f(0x202)]))['apikey']===_0x1b6b70)return _0x1a8622();}catch{}throw new ne();}var ga={'jwt':ci,'apikey':li},Ka=require(a0_0x3e22c7(0x3ed)),E=require(a0_0x3e22c7(0x21c)),S=(..._0x654adb)=>{const _0x24de24=a0_0x3e22c7;let _0x2fe795={};return _0x654adb['forEach'](_0x2e136d=>_0x2fe795[_0x2e136d]={'minLength':0x1,'description':_0x24de24(0x350)+_0x2e136d+'\x22\x20cannot\x20be\x20empty'}),{'if':{'propertyNames':{'enum':[..._0x654adb]}},'then':{'properties':_0x2fe795}};},v={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'instanceName':{'type':a0_0x3e22c7(0x5cb)}},...S(a0_0x3e22c7(0x202))},ma={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'oldToken':{'type':'string'}},'required':[a0_0x3e22c7(0x698)],...S(a0_0x3e22c7(0x698))},wn={'properties':{'key':{'type':a0_0x3e22c7(0x245),'properties':{'id':{'type':a0_0x3e22c7(0x5cb)},'remoteJid':{'type':a0_0x3e22c7(0x5cb)},'fromMe':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]}},'required':['id','remoteJid','fromMe'],...S('id','remoteJid')},'message':{'type':a0_0x3e22c7(0x245)}}},X={'properties':{'delay':{'type':a0_0x3e22c7(0x46e),'description':'Enter\x20a\x20value\x20in\x20milliseconds'},'presence':{'type':a0_0x3e22c7(0x5cb),'enum':['unavailable',a0_0x3e22c7(0x4fd),a0_0x3e22c7(0x1c9),a0_0x3e22c7(0x503),a0_0x3e22c7(0x65e)]}}},Z={'type':a0_0x3e22c7(0x5cb),'pattern':a0_0x3e22c7(0x281),'description':a0_0x3e22c7(0x4a2)},ha={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'number':{...Z},'options':{...X},'textMessage':{'type':a0_0x3e22c7(0x245),'properties':{'text':{'type':a0_0x3e22c7(0x5cb)}},'required':[a0_0x3e22c7(0x5bc)],...S(a0_0x3e22c7(0x5bc))}},'required':[a0_0x3e22c7(0x658),'number']},fa={'type':a0_0x3e22c7(0x5cb),'pattern':a0_0x3e22c7(0x45a),'description':a0_0x3e22c7(0x4a2)},yn={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'number':{...fa},'options':{...X},'textMessage':{'type':'object','properties':{'text':{'type':'string'}},'required':['text'],...S(a0_0x3e22c7(0x5bc))}},'required':[a0_0x3e22c7(0x658),a0_0x3e22c7(0x357)]},bn={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'number':{...fa},'options':{...X},'mediaMessage':{'type':a0_0x3e22c7(0x245),'properties':{'mediatype':{'type':a0_0x3e22c7(0x5cb),'enum':[a0_0x3e22c7(0x293),a0_0x3e22c7(0x33d),a0_0x3e22c7(0x6ea),a0_0x3e22c7(0x4ee)]},'media':{'type':'string'},'fileName':{'type':a0_0x3e22c7(0x5cb)},'caption':{'type':a0_0x3e22c7(0x5cb)}},'required':['mediatype',a0_0x3e22c7(0x1c7)],...S(a0_0x3e22c7(0x1df),'caption',a0_0x3e22c7(0x1c7))}},'required':[a0_0x3e22c7(0x24d),a0_0x3e22c7(0x357)]},wa={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'number':{...Z},'options':{...X},'stickerMessage':{'type':'object','properties':{'image':{'type':a0_0x3e22c7(0x5cb)}},'required':[a0_0x3e22c7(0x293)],...S(a0_0x3e22c7(0x293))}},'required':[a0_0x3e22c7(0x4b9),a0_0x3e22c7(0x357)]},ya={'$id':(0x0,E['v4'])(),'type':'object','properties':{'statusMessage':{'type':'object','properties':{'type':{'type':a0_0x3e22c7(0x5cb),'enum':['text',a0_0x3e22c7(0x293),a0_0x3e22c7(0x4ee),a0_0x3e22c7(0x6ea)]},'content':{'type':a0_0x3e22c7(0x5cb)},'caption':{'type':'string'},'backgroundColor':{'type':a0_0x3e22c7(0x5cb)},'font':{'type':a0_0x3e22c7(0x46e),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x3e22c7(0x56c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','pattern':'^\x5cd+','description':'\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}},'allContacts':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]}},'required':['type',a0_0x3e22c7(0x2c0)],...S(a0_0x3e22c7(0x2e9),a0_0x3e22c7(0x2c0))}},'required':[a0_0x3e22c7(0x5fd)]},ba={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'number':{...Z},'options':{...X},'mediaMessage':{'type':a0_0x3e22c7(0x245),'properties':{'mediatype':{'type':a0_0x3e22c7(0x5cb),'enum':[a0_0x3e22c7(0x293),'document',a0_0x3e22c7(0x6ea),'audio']},'media':{'type':a0_0x3e22c7(0x5cb)},'fileName':{'type':a0_0x3e22c7(0x5cb)},'caption':{'type':a0_0x3e22c7(0x5cb)}},'required':[a0_0x3e22c7(0x64f),a0_0x3e22c7(0x1c7)],...S(a0_0x3e22c7(0x1df),a0_0x3e22c7(0x56a),a0_0x3e22c7(0x1c7))}},'required':['mediaMessage',a0_0x3e22c7(0x357)]},Sa={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'number':{...Z},'options':{...X},'audioMessage':{'type':a0_0x3e22c7(0x245),'properties':{'audio':{'type':a0_0x3e22c7(0x5cb)}},'required':['audio'],...S(a0_0x3e22c7(0x4ee))}},'required':['audioMessage',a0_0x3e22c7(0x357)]},Ea={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'number':{...Z},'pollMessage':{'type':a0_0x3e22c7(0x245),'properties':{'name':{'type':'string'},'selectableCount':{'type':a0_0x3e22c7(0x357)},'values':{'type':a0_0x3e22c7(0x56c),'minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x3e22c7(0x3dc),a0_0x3e22c7(0x213),'values'],...S(a0_0x3e22c7(0x3dc),a0_0x3e22c7(0x213),a0_0x3e22c7(0x2c8))}},'required':[a0_0x3e22c7(0x357),a0_0x3e22c7(0x4c9)]},va={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...X},'buttonMessage':{'type':a0_0x3e22c7(0x245),'properties':{'title':{'type':a0_0x3e22c7(0x5cb)},'description':{'type':a0_0x3e22c7(0x5cb)},'footerText':{'type':a0_0x3e22c7(0x5cb)},'buttons':{'type':a0_0x3e22c7(0x56c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'buttonText':{'type':a0_0x3e22c7(0x5cb)},'buttonId':{'type':a0_0x3e22c7(0x5cb)}},'required':['buttonText','buttonId'],...S(a0_0x3e22c7(0x2fc),'buttonId')}},'mediaMessage':{'type':a0_0x3e22c7(0x245),'properties':{'media':{'type':'string'},'fileName':{'type':'string'},'mediatype':{'type':a0_0x3e22c7(0x5cb),'enum':[a0_0x3e22c7(0x293),'document',a0_0x3e22c7(0x6ea)]}},'required':[a0_0x3e22c7(0x1c7),a0_0x3e22c7(0x64f)],...S(a0_0x3e22c7(0x1c7),a0_0x3e22c7(0x1df))}},'required':[a0_0x3e22c7(0x3b2),a0_0x3e22c7(0x60b)],...S(a0_0x3e22c7(0x3b2),a0_0x3e22c7(0x6d6))}},'required':[a0_0x3e22c7(0x357),a0_0x3e22c7(0x3f9)]},Na={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'number':{...Z},'options':{...X},'locationMessage':{'type':a0_0x3e22c7(0x245),'properties':{'latitude':{'type':a0_0x3e22c7(0x357)},'longitude':{'type':'number'},'name':{'type':a0_0x3e22c7(0x5cb)},'address':{'type':a0_0x3e22c7(0x5cb)}},'required':[a0_0x3e22c7(0x4a6),a0_0x3e22c7(0x5a6)],...S('name',a0_0x3e22c7(0x706))}},'required':[a0_0x3e22c7(0x357),a0_0x3e22c7(0x3a8)]},Ca={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'number':{...Z},'options':{...X},'listMessage':{'type':a0_0x3e22c7(0x245),'properties':{'title':{'type':a0_0x3e22c7(0x5cb)},'description':{'type':a0_0x3e22c7(0x5cb)},'footerText':{'type':a0_0x3e22c7(0x5cb)},'buttonText':{'type':'string'},'sections':{'type':a0_0x3e22c7(0x56c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3e22c7(0x245),'properties':{'title':{'type':a0_0x3e22c7(0x5cb)},'rows':{'type':a0_0x3e22c7(0x56c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':a0_0x3e22c7(0x5cb)},'description':{'type':a0_0x3e22c7(0x5cb)},'rowId':{'type':'string'}},'required':[a0_0x3e22c7(0x3b2),'description',a0_0x3e22c7(0x4ae)],...S('title',a0_0x3e22c7(0x6d6),a0_0x3e22c7(0x4ae))}}},'required':[a0_0x3e22c7(0x3b2),a0_0x3e22c7(0x471)],...S(a0_0x3e22c7(0x3b2))}}},'required':[a0_0x3e22c7(0x3b2),'description',a0_0x3e22c7(0x2fc),a0_0x3e22c7(0x6bc)],...S(a0_0x3e22c7(0x3b2),a0_0x3e22c7(0x6d6),a0_0x3e22c7(0x2fc),a0_0x3e22c7(0x2a5))}},'required':[a0_0x3e22c7(0x357),a0_0x3e22c7(0x220)]},Ta={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'number':{...Z},'options':{...X},'contactMessage':{'type':'array','items':{'type':a0_0x3e22c7(0x245),'properties':{'fullName':{'type':a0_0x3e22c7(0x5cb)},'phoneNumber':{'type':a0_0x3e22c7(0x5cb),'minLength':0xa}},'required':[a0_0x3e22c7(0x410),a0_0x3e22c7(0x587)],...S(a0_0x3e22c7(0x410))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x3e22c7(0x357),a0_0x3e22c7(0x326)]},Ma={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'reactionMessage':{'type':'object','properties':{'key':{'type':a0_0x3e22c7(0x245),'properties':{'id':{'type':a0_0x3e22c7(0x5cb)},'remoteJid':{'type':a0_0x3e22c7(0x5cb)},'fromMe':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]}},'required':['id',a0_0x3e22c7(0x2c2),a0_0x3e22c7(0x19f)],...S('id',a0_0x3e22c7(0x2c2))},'reaction':{'type':'string'}},'required':[a0_0x3e22c7(0x657),a0_0x3e22c7(0x2ec)],...S('reaction')}},'required':[a0_0x3e22c7(0x5c3)]},Ra={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'numbers':{'type':a0_0x3e22c7(0x56c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3e22c7(0x5cb),'pattern':a0_0x3e22c7(0x154),'description':'\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings'}}}},Aa={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'readMessages':{'type':a0_0x3e22c7(0x56c),'minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x3e22c7(0x5cb)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x3e22c7(0x5cb)}},'required':['id',a0_0x3e22c7(0x19f),'remoteJid'],...S('id',a0_0x3e22c7(0x2c2))}}},'required':['readMessages']},Ia={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'privacySettings':{'type':a0_0x3e22c7(0x245),'properties':{'readreceipts':{'type':a0_0x3e22c7(0x5cb),'enum':[a0_0x3e22c7(0x1b7),'none']},'profile':{'type':a0_0x3e22c7(0x5cb),'enum':[a0_0x3e22c7(0x1b7),a0_0x3e22c7(0x54a),'contact_blacklist',a0_0x3e22c7(0x23a)]},'status':{'type':a0_0x3e22c7(0x5cb),'enum':[a0_0x3e22c7(0x1b7),'contacts',a0_0x3e22c7(0x176),a0_0x3e22c7(0x23a)]},'online':{'type':a0_0x3e22c7(0x5cb),'enum':[a0_0x3e22c7(0x1b7),'match_last_seen']},'last':{'type':'string','enum':[a0_0x3e22c7(0x1b7),a0_0x3e22c7(0x54a),a0_0x3e22c7(0x176),a0_0x3e22c7(0x23a)]},'groupadd':{'type':a0_0x3e22c7(0x5cb),'enum':['all',a0_0x3e22c7(0x54a),'contact_blacklist',a0_0x3e22c7(0x23a)]}},'required':[a0_0x3e22c7(0x3be),a0_0x3e22c7(0x43a),a0_0x3e22c7(0x654),a0_0x3e22c7(0x230),a0_0x3e22c7(0x3e6),a0_0x3e22c7(0x372)],...S(a0_0x3e22c7(0x3be),'profile',a0_0x3e22c7(0x654),a0_0x3e22c7(0x230),a0_0x3e22c7(0x3e6),a0_0x3e22c7(0x372))}},'required':[a0_0x3e22c7(0x43d)]},Da={'$id':(0x0,E['v4'])(),'type':'object','properties':{'lastMessage':{'type':a0_0x3e22c7(0x245),'properties':{'key':{'type':a0_0x3e22c7(0x245),'properties':{'id':{'type':'string'},'remoteJid':{'type':'string'},'fromMe':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]}},'required':['id','fromMe','remoteJid'],...S('id',a0_0x3e22c7(0x2c2))},'messageTimestamp':{'type':a0_0x3e22c7(0x46e),'minLength':0x1}},'required':[a0_0x3e22c7(0x657)],...S('messageTimestamp')},'archive':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]}},'required':[a0_0x3e22c7(0x4fc),a0_0x3e22c7(0x3bd)]},Pa={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'id':{'type':a0_0x3e22c7(0x5cb)},'fromMe':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x3e22c7(0x5cb)},'participant':{'type':a0_0x3e22c7(0x5cb)}},'required':['id',a0_0x3e22c7(0x19f),'remoteJid'],...S('id',a0_0x3e22c7(0x2c2),a0_0x3e22c7(0x406))},Oa={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'where':{'type':a0_0x3e22c7(0x245),'properties':{'_id':{'type':a0_0x3e22c7(0x5cb),'minLength':0x1},'pushName':{'type':a0_0x3e22c7(0x5cb),'minLength':0x1},'id':{'type':a0_0x3e22c7(0x5cb),'minLength':0x1}},...S('_id','id',a0_0x3e22c7(0x441))}}},_a={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'name':{'type':a0_0x3e22c7(0x5cb)}},...S(a0_0x3e22c7(0x3dc))},xa={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'status':{'type':a0_0x3e22c7(0x5cb)}},...S('status')},Te={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'number':{'type':a0_0x3e22c7(0x5cb)},'picture':{'type':a0_0x3e22c7(0x5cb)}}},$a={'type':a0_0x3e22c7(0x245),'properties':{'wuid':{'type':a0_0x3e22c7(0x5cb)},'name':{'type':a0_0x3e22c7(0x5cb)},'picture':{'type':a0_0x3e22c7(0x5cb)},'status':{'type':a0_0x3e22c7(0x5cb)},'isBusiness':{'type':a0_0x3e22c7(0x18e)}}},ka={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'where':{'type':'object','properties':{'_id':{'type':'string','minLength':0x1},'key':{'type':a0_0x3e22c7(0x245),'if':{'propertyNames':{'enum':[a0_0x3e22c7(0x19f),a0_0x3e22c7(0x2c2),'id']}},'then':{'properties':{'remoteJid':{'type':'string','minLength':0x1,'description':a0_0x3e22c7(0x3c9)},'id':{'type':a0_0x3e22c7(0x5cb),'minLength':0x1,'description':'The\x20property\x20cannot\x20be\x20empty'},'fromMe':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]}}}},'message':{'type':a0_0x3e22c7(0x245)}},...S(a0_0x3e22c7(0x1fb))},'limit':{'type':'integer'}}},La={'$id':(0x0,E['v4'])(),'type':'object','properties':{'where':{'type':'object','properties':{'_id':{'type':a0_0x3e22c7(0x5cb)},'remoteJid':{'type':a0_0x3e22c7(0x5cb)},'id':{'type':a0_0x3e22c7(0x5cb)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]},'participant':{'type':'string'},'status':{'type':a0_0x3e22c7(0x5cb),'enum':[a0_0x3e22c7(0x3c3),'PENDING',a0_0x3e22c7(0x391),a0_0x3e22c7(0x668),a0_0x3e22c7(0x364),a0_0x3e22c7(0x53f)]}},...S(a0_0x3e22c7(0x1fb),'remoteJid','id',a0_0x3e22c7(0x654))},'limit':{'type':a0_0x3e22c7(0x46e)}}},Ua={'$id':(0x0,E['v4'])(),'type':'object','properties':{'number':{...Z},'presence':{'type':a0_0x3e22c7(0x5cb),'enum':[a0_0x3e22c7(0x6cf),a0_0x3e22c7(0x4fd),a0_0x3e22c7(0x1c9),a0_0x3e22c7(0x503),a0_0x3e22c7(0x65e)]}},'required':[a0_0x3e22c7(0x5a4),'number']},Va={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'subject':{'type':a0_0x3e22c7(0x5cb)},'description':{'type':a0_0x3e22c7(0x5cb)},'profilePicture':{'type':a0_0x3e22c7(0x5cb)},'participants':{'type':a0_0x3e22c7(0x56c),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x3e22c7(0x5cb),'minLength':0xa,'pattern':a0_0x3e22c7(0x6d0),'description':a0_0x3e22c7(0x367)}}},'required':['subject','participants'],...S(a0_0x3e22c7(0x204),a0_0x3e22c7(0x6d6),'profilePicture')},Me={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'groupJid':{'type':a0_0x3e22c7(0x5cb),'pattern':a0_0x3e22c7(0x258)}},'required':[a0_0x3e22c7(0x4e3)],...S(a0_0x3e22c7(0x4e3))},ja={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'groupJid':{'type':'string'},'action':{'type':a0_0x3e22c7(0x5cb),'enum':[a0_0x3e22c7(0x3b8),a0_0x3e22c7(0x353),a0_0x3e22c7(0x560),a0_0x3e22c7(0x45c)]},'participants':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':'\x5cd+','description':a0_0x3e22c7(0x367)}}},'required':[a0_0x3e22c7(0x4e3),a0_0x3e22c7(0x629),'participants'],...S(a0_0x3e22c7(0x4e3),a0_0x3e22c7(0x629))},Ba={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'groupJid':{'type':a0_0x3e22c7(0x5cb)},'expiration':{'type':a0_0x3e22c7(0x357),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':['groupJid','expiration'],...S(a0_0x3e22c7(0x4e3),a0_0x3e22c7(0x388))},Fa={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'groupJid':{'type':'string'},'image':{'type':a0_0x3e22c7(0x5cb)}},'required':['groupJid',a0_0x3e22c7(0x293)],...S('groupJid',a0_0x3e22c7(0x293))},Ja={'$id':(0x0,E['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'description':{'type':a0_0x3e22c7(0x5cb)}},'required':[a0_0x3e22c7(0x4e3),a0_0x3e22c7(0x6d6)],...S(a0_0x3e22c7(0x4e3),'description')},Ga={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'groupJid':{'type':a0_0x3e22c7(0x5cb)},'name':{'type':a0_0x3e22c7(0x5cb)}},'required':['groupJid','name'],...S(a0_0x3e22c7(0x4e3),a0_0x3e22c7(0x3dc))},qa={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'groupJid':{'type':a0_0x3e22c7(0x5cb)},'setting':{'type':a0_0x3e22c7(0x5cb),'enum':['announcement','not_announcement',a0_0x3e22c7(0x41d),a0_0x3e22c7(0x652)]}},'required':[a0_0x3e22c7(0x4e3),'setting'],...S('groupJid',a0_0x3e22c7(0x4c1))},Wa={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'inviteCode':{'type':a0_0x3e22c7(0x5cb)}},'required':[a0_0x3e22c7(0x455)],...S(a0_0x3e22c7(0x455))},Ha={'$id':(0x0,E['v4'])(),'type':a0_0x3e22c7(0x245),'properties':{'url':{'type':a0_0x3e22c7(0x5cb)},'enabled':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['url',a0_0x3e22c7(0x688)]},Sn={'$id':(0x0,E['v4'])(),'type':'object','properties':{'local_map':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':'boolean','enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x3e22c7(0x18e),'enum':[!0x0,!0x1]}},'required':['local_map','STATUS_INSTANCE','QRCODE_UPDATED',a0_0x3e22c7(0x4d3),a0_0x3e22c7(0x6c1),'MESSAGES_UPSERT',a0_0x3e22c7(0x1db),a0_0x3e22c7(0x38e),'CONTACTS_UPSERT','CONTACTS_UPDATE','PRESENCE_UPDATE',a0_0x3e22c7(0x363),a0_0x3e22c7(0x454),a0_0x3e22c7(0x28d),a0_0x3e22c7(0x641),a0_0x3e22c7(0x5d1),a0_0x3e22c7(0x164),'GROUPS_UPDATE',a0_0x3e22c7(0x429)],...S(a0_0x3e22c7(0x4af),'STATUS_INSTANCE',a0_0x3e22c7(0x152),a0_0x3e22c7(0x4d3),a0_0x3e22c7(0x6c1),a0_0x3e22c7(0x4cb),a0_0x3e22c7(0x1db),a0_0x3e22c7(0x38e),a0_0x3e22c7(0x538),a0_0x3e22c7(0x1f8),a0_0x3e22c7(0x5f6),a0_0x3e22c7(0x363),a0_0x3e22c7(0x454),'CHATS_UPDATE','CHATS_DELETE',a0_0x3e22c7(0x5d1),a0_0x3e22c7(0x164),'GROUPS_UPDATE',a0_0x3e22c7(0x429))},Ae=require('fs'),Re=require(a0_0x3e22c7(0x3a2)),Ze=class{},et=class extends B{constructor(_0x4c9d5d,_0xcb7062){const _0x2f8fc7=a0_0x3e22c7;super(_0xcb7062),this[_0x2f8fc7(0x3eb)]=_0x4c9d5d,this[_0x2f8fc7(0x3e5)]=_0xcb7062;}async[a0_0x3e22c7(0x680)](_0x4276b0,_0x59a0b5=!0x1){const _0xf56a09=a0_0x3e22c7;if(_0x4276b0[_0xf56a09(0x2d6)]!==0x0)try{return this[_0xf56a09(0x4a9)][_0xf56a09(0x5d8)]&&_0x59a0b5?{'insertCount':(await this[_0xf56a09(0x3eb)][_0xf56a09(0x51e)]([..._0x4276b0]))[_0xf56a09(0x2d6)]}:(_0x4276b0[_0xf56a09(0x4e9)](_0x2502a6=>{const _0x209c60=_0xf56a09;this[_0x209c60(0x253)]({'path':(0x0,Re[_0x209c60(0x72a)])(this['storePath'],'contacts',_0x2502a6[_0x209c60(0x40b)]),'fileName':_0x2502a6['id'],'data':_0x2502a6});}),{'insertCount':_0x4276b0['length']});}catch(_0x445692){return _0x445692;}finally{_0x4276b0=void 0x0;}}async[a0_0x3e22c7(0x45d)](_0x35ef6c){const _0x7e5b83=a0_0x3e22c7;try{return this[_0x7e5b83(0x4a9)]['ENABLED']?await this[_0x7e5b83(0x3eb)][_0x7e5b83(0x49f)]({..._0x35ef6c[_0x7e5b83(0x3aa)]}):{'deleted':{'contact':_0x35ef6c[_0x7e5b83(0x3aa)]['id']}};}catch(_0x146c43){return{'error':_0x146c43?.[_0x7e5b83(0x63b)]()};}}async[a0_0x3e22c7(0x64c)](_0x12d1bf,_0x19646c=!0x1){const _0x72bbdd=a0_0x3e22c7;try{if(_0x12d1bf['length']===0x0)return;if(this['dbSettings'][_0x72bbdd(0x5d8)]&&_0x19646c){let _0x2dd672=_0x12d1bf[_0x72bbdd(0x5a9)](_0x37eb9c=>({'updateOne':{'filter':{'id':_0x37eb9c['id']},'update':{..._0x37eb9c},'upsert':!0x0}})),{nModified:_0x21839c}=await this[_0x72bbdd(0x3eb)]['bulkWrite'](_0x2dd672);return{'insertCount':_0x21839c};}}catch{return;}}async[a0_0x3e22c7(0x445)](_0x7856cc){const _0x54c0d3=a0_0x3e22c7;try{if(this['dbSettings'][_0x54c0d3(0x5d8)])return await this[_0x54c0d3(0x3eb)][_0x54c0d3(0x445)]({..._0x7856cc[_0x54c0d3(0x3aa)]});let _0x121780=[];if(_0x7856cc?.[_0x54c0d3(0x3aa)]?.['id'])_0x121780[_0x54c0d3(0x6a8)](JSON[_0x54c0d3(0x251)]((0x0,Ae['readFileSync'])((0x0,Re[_0x54c0d3(0x72a)])(this[_0x54c0d3(0x669)],_0x54c0d3(0x54a),_0x7856cc[_0x54c0d3(0x3aa)][_0x54c0d3(0x40b)],_0x7856cc[_0x54c0d3(0x3aa)]['id']+_0x54c0d3(0x5bf)),{'encoding':_0x54c0d3(0x2b3)})));else{let _0x5413de=(0x0,Ae[_0x54c0d3(0x5fc)])((0x0,Re[_0x54c0d3(0x72a)])(this[_0x54c0d3(0x669)],_0x54c0d3(0x54a),_0x7856cc['where']['owner']),{'encoding':_0x54c0d3(0x2b3)});for await(let _0xe70efc of _0x5413de)_0xe70efc[_0x54c0d3(0x1fa)]()&&_0x121780[_0x54c0d3(0x6a8)](JSON[_0x54c0d3(0x251)]((0x0,Ae['readFileSync'])((0x0,Re['join'])(this[_0x54c0d3(0x669)],_0x54c0d3(0x54a),_0x7856cc[_0x54c0d3(0x3aa)][_0x54c0d3(0x40b)],_0xe70efc[_0x54c0d3(0x3dc)]),{'encoding':'utf-8'})));}return _0x121780;}catch{return[];}}},tt=require(a0_0x3e22c7(0x666)),Mn=require(a0_0x3e22c7(0x6ac)),ws=new C('Validate'),L=class{constructor(){}['routerPath'](_0x3d7606,_0x2adc05=!0x0){const _0x1381ad=a0_0x3e22c7;let _0x389630='/'+_0x3d7606;return _0x2adc05&&(_0x389630+=_0x1381ad(0x5f1)),_0x389630;}async[a0_0x3e22c7(0x671)](_0x4edaaf){const _0x5cbeff=a0_0x3e22c7;let {request:_0x116568,schema:_0x568747,ClassRef:_0x5925e7,execute:_0x56a8f4}=_0x4edaaf,_0x4eb8ac=new _0x5925e7(),_0x33651e=_0x116568[_0x5cbeff(0x31f)],_0x96877d=_0x116568[_0x5cbeff(0x3e9)];_0x116568?.[_0x5cbeff(0x6aa)]&&Object[_0x5cbeff(0x5d2)](_0x116568[_0x5cbeff(0x6aa)])['length']>0x0&&Object['assign'](_0x96877d,_0x116568[_0x5cbeff(0x6aa)]),_0x116568[_0x5cbeff(0x561)][_0x5cbeff(0x457)](_0x5cbeff(0x71b))&&Object[_0x5cbeff(0x472)](_0x96877d,_0x33651e),Object['assign'](_0x4eb8ac,_0x33651e);let _0x441066=_0x568747?(0x0,tt['validate'])(_0x4eb8ac,_0x568747):{'valid':!0x0,'errors':[]};if(!_0x441066['valid']){let _0x4916f3=_0x441066[_0x5cbeff(0x2fd)][_0x5cbeff(0x5a9)](({property:_0xe58357,stack:_0x2d16cd,schema:_0x32e499})=>{const _0x1ffa65=_0x5cbeff;let _0x2d6660;return _0x32e499[_0x1ffa65(0x6d6)]?_0x2d6660=_0x32e499[_0x1ffa65(0x6d6)]:_0x2d6660=_0x2d16cd['replace'](_0x1ffa65(0x27d),''),{'property':_0xe58357['replace'](_0x1ffa65(0x27d),''),'message':_0x2d6660};});throw ws[_0x5cbeff(0x41f)]([..._0x4916f3]),new g(..._0x4916f3);}return await _0x56a8f4(_0x96877d,_0x4eb8ac);}async['groupValidate'](_0x4b80d3){const _0x5eb6e1=a0_0x3e22c7;let {request:_0x17f8bd,ClassRef:_0x3f6138,schema:_0x3e532e,execute:_0x36ac70}=_0x4b80d3,_0x1a1250=_0x17f8bd[_0x5eb6e1(0x6aa)];if(!_0x1a1250?.[_0x5eb6e1(0x4e3)])throw new g('The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','ex:\x20\x22groupJid=120362@g.us\x22');let _0x3fc938=_0x17f8bd[_0x5eb6e1(0x3e9)],_0x4d8872=_0x17f8bd[_0x5eb6e1(0x31f)],_0x1b5cf3=new _0x3f6138();Object['assign'](_0x4d8872,_0x1a1250),Object[_0x5eb6e1(0x472)](_0x1b5cf3,_0x4d8872);let _0x33d3a5=(0x0,tt[_0x5eb6e1(0x228)])(_0x1b5cf3,_0x3e532e);if(!_0x33d3a5['valid']){let _0x1e269a=_0x33d3a5[_0x5eb6e1(0x2fd)][_0x5eb6e1(0x5a9)](({property:_0x6b5679,stack:_0x4176a1,schema:_0x1ea669})=>{const _0x178581=_0x5eb6e1;let _0x543022;return _0x1ea669[_0x178581(0x6d6)]?_0x543022=_0x1ea669[_0x178581(0x6d6)]:_0x543022=_0x4176a1['replace'](_0x178581(0x27d),''),{'property':_0x6b5679[_0x178581(0x5b0)]('instance.',''),'message':_0x543022};});throw ws[_0x5eb6e1(0x41f)]([..._0x1e269a]),new g(..._0x1e269a);}return await _0x36ac70(_0x3fc938,_0x1b5cf3);}async[a0_0x3e22c7(0x554)](_0x3aaf54){const _0x442739=a0_0x3e22c7;let {request:_0x129475,ClassRef:_0x103bcf,schema:_0x36b07f,execute:_0x533d5a}=_0x3aaf54,_0x520a25=_0x129475[_0x442739(0x31f)];if(!_0x520a25?.[_0x442739(0x455)])throw new g(_0x442739(0x632),_0x442739(0x3a5));let _0xa8d9d8=_0x129475[_0x442739(0x3e9)],_0x124538=_0x129475[_0x442739(0x31f)],_0x24e70e=new _0x103bcf();Object[_0x442739(0x472)](_0x124538,_0x520a25),Object[_0x442739(0x472)](_0x24e70e,_0x124538);let _0x4bc935=(0x0,tt[_0x442739(0x228)])(_0x24e70e,_0x36b07f);if(!_0x4bc935[_0x442739(0x203)]){let _0x440f33=_0x4bc935[_0x442739(0x2fd)][_0x442739(0x5a9)](({property:_0x2315be,stack:_0x284db6,schema:_0x472171})=>{const _0x3b4740=_0x442739;let _0xa13b53;return _0x472171[_0x3b4740(0x6d6)]?_0xa13b53=_0x472171['description']:_0xa13b53=_0x284db6['replace'](_0x3b4740(0x27d),''),{'property':_0x2315be[_0x3b4740(0x5b0)](_0x3b4740(0x27d),''),'message':_0xa13b53};});throw ws['error']([..._0x440f33]),new g(..._0x440f33);}return await _0x533d5a(_0xa8d9d8,_0x24e70e);}},Ie=require('path'),De=require('fs'),st=class{},at=class extends B{constructor(_0x2599e8,_0x48336a){const _0xa63011=a0_0x3e22c7;super(_0x48336a),this[_0xa63011(0x2ac)]=_0x2599e8,this[_0xa63011(0x3e5)]=_0x48336a;}async[a0_0x3e22c7(0x680)](_0x50b1f5,_0x4b2926){const _0x17e1d3=a0_0x3e22c7;if(_0x50b1f5[_0x17e1d3(0x2d6)]!==0x0)try{if(this[_0x17e1d3(0x4a9)][_0x17e1d3(0x5d8)]&&_0x4b2926)return{'insertCount':(await this[_0x17e1d3(0x2ac)][_0x17e1d3(0x51e)]([..._0x50b1f5]))[_0x17e1d3(0x2d6)]};_0x50b1f5[_0x17e1d3(0x4e9)](_0x5d5c41=>{const _0x59b2e=_0x17e1d3;this[_0x59b2e(0x253)]({'path':(0x0,Ie['join'])(this[_0x59b2e(0x669)],_0x59b2e(0x549),_0x5d5c41[_0x59b2e(0x40b)]),'fileName':_0x5d5c41['id'],'data':_0x5d5c41});});}catch(_0x378b75){return _0x378b75;}}async[a0_0x3e22c7(0x445)](_0x52dd9c){const _0x52ca73=a0_0x3e22c7;try{if(this[_0x52ca73(0x4a9)][_0x52ca73(0x5d8)])return await this['messageUpModel'][_0x52ca73(0x445)]({..._0x52dd9c[_0x52ca73(0x3aa)]})[_0x52ca73(0x24a)]({'datetime':-0x1})['limit'](_0x52dd9c?.['limit']??0x0);let _0x47c7b9=[];if(_0x52dd9c?.['where']?.['id'])_0x47c7b9[_0x52ca73(0x6a8)](JSON[_0x52ca73(0x251)]((0x0,De[_0x52ca73(0x1b3)])((0x0,Ie[_0x52ca73(0x72a)])(this['storePath'],'message-up',_0x52dd9c[_0x52ca73(0x3aa)][_0x52ca73(0x40b)],_0x52dd9c[_0x52ca73(0x3aa)]['id']+_0x52ca73(0x5bf)),{'encoding':'utf-8'})));else{let _0x55b685=(0x0,De[_0x52ca73(0x5fc)])((0x0,Ie[_0x52ca73(0x72a)])(this[_0x52ca73(0x669)],_0x52ca73(0x549),_0x52dd9c[_0x52ca73(0x3aa)][_0x52ca73(0x40b)]),{'encoding':_0x52ca73(0x2b3)});for await(let _0x335bfb of _0x55b685)_0x335bfb['isFile']()&&_0x47c7b9[_0x52ca73(0x6a8)](JSON[_0x52ca73(0x251)]((0x0,De[_0x52ca73(0x1b3)])((0x0,Ie['join'])(this[_0x52ca73(0x669)],'message-up',_0x52dd9c['where'][_0x52ca73(0x40b)],_0x335bfb['name']),{'encoding':_0x52ca73(0x2b3)})));}return _0x47c7b9['sort']((_0x596195,_0x3e71fd)=>_0x3e71fd['datetime']-_0x596195[_0x52ca73(0x69f)])['splice'](0x0,_0x52dd9c?.[_0x52ca73(0x3f6)]??_0x47c7b9[_0x52ca73(0x2d6)]);}catch{return[];}}async[a0_0x3e22c7(0x45d)](_0x504be6){const _0x4edba5=a0_0x3e22c7;try{if(this[_0x4edba5(0x4a9)][_0x4edba5(0x5d8)])return await this[_0x4edba5(0x2ac)][_0x4edba5(0x49f)]({..._0x504be6[_0x4edba5(0x3aa)]});}catch(_0x47df5a){return console[_0x4edba5(0x41f)]('Falha\x20ao\x20deletar\x20mensagens:',_0x47df5a),_0x47df5a;}}},b=class{},ot=class extends L{constructor(..._0x5003bb){const _0x3fe419=a0_0x3e22c7;super(),this[_0x3fe419(0x5d0)]=(0x0,Ka[_0x3fe419(0x19c)])(),this[_0x3fe419(0x5d0)][_0x3fe419(0x5c7)](this['routerPath'](_0x3fe419(0x4cd)),..._0x5003bb,async(_0x37e8f6,_0x22d7c3)=>{const _0x266f00=_0x3fe419;let _0x1f0bb4=await this[_0x266f00(0x671)]({'request':_0x37e8f6,'schema':Ua,'ClassRef':Je,'execute':(_0x247bec,_0x21ce66)=>P[_0x266f00(0x4cd)](_0x247bec,_0x21ce66)});return _0x22d7c3[_0x266f00(0x654)](0xc9)[_0x266f00(0x369)](_0x1f0bb4);})[_0x3fe419(0x5c7)](this['routerPath'](_0x3fe419(0x160)),..._0x5003bb,async(_0x15dbf3,_0x4dddd3)=>{const _0x5812c7=_0x3fe419;let _0x4069df=await this[_0x5812c7(0x671)]({'request':_0x15dbf3,'schema':Ra,'ClassRef':Ge,'execute':(_0x502002,_0x4c647a)=>P[_0x5812c7(0x248)](_0x502002,_0x4c647a)});return _0x4dddd3[_0x5812c7(0x654)](0xc9)[_0x5812c7(0x369)](_0x4069df);})['post'](this[_0x3fe419(0x4f2)](_0x3fe419(0x171)),..._0x5003bb,async(_0x5ebf86,_0x3fe68d)=>{const _0x26dd8d=_0x3fe419;let _0x57f270=await this[_0x26dd8d(0x671)]({'request':_0x5ebf86,'schema':v,'ClassRef':b,'execute':(_0x457a5a,_0x89932a)=>P['editChat'](_0x457a5a,_0x89932a)});return _0x3fe68d[_0x26dd8d(0x654)](0xc9)[_0x26dd8d(0x369)](_0x57f270);})['put'](this[_0x3fe419(0x4f2)](_0x3fe419(0x1f4)),..._0x5003bb,async(_0x3d3668,_0x1282b2)=>{const _0x82e68e=_0x3fe419;let _0x51fab2=await this['dataValidate']({'request':_0x3d3668,'schema':Aa,'ClassRef':He,'execute':(_0x50ab0a,_0x2800dc)=>P['readMessage'](_0x50ab0a,_0x2800dc)});return _0x1282b2['status'](0xc9)[_0x82e68e(0x369)](_0x51fab2);})[_0x3fe419(0x5c6)](this[_0x3fe419(0x4f2)](_0x3fe419(0x714)),..._0x5003bb,async(_0x603f65,_0x69f11f)=>{const _0x4a99e6=_0x3fe419;let _0x5dcf88=await this[_0x4a99e6(0x671)]({'request':_0x603f65,'schema':Da,'ClassRef':Ke,'execute':(_0x438d79,_0x5756a5)=>P[_0x4a99e6(0x714)](_0x438d79,_0x5756a5)});return _0x69f11f['status'](0xc9)[_0x4a99e6(0x369)](_0x5dcf88);})[_0x3fe419(0x45d)](this[_0x3fe419(0x4f2)](_0x3fe419(0x5ea)),..._0x5003bb,async(_0xd82e50,_0x4a5f0a)=>{const _0x15f933=_0x3fe419;let _0x2758bd=await this['dataValidate']({'request':_0xd82e50,'schema':Pa,'ClassRef':Qe,'execute':(_0x2589fc,_0x1d76d9)=>P[_0x15f933(0x6f4)](_0x2589fc,_0x1d76d9)});return _0x4a5f0a[_0x15f933(0x654)](0xc9)[_0x15f933(0x369)](_0x2758bd);})[_0x3fe419(0x5c7)](this[_0x3fe419(0x4f2)](_0x3fe419(0x62b)),..._0x5003bb,async(_0x56194d,_0x4cf6d9)=>{const _0x403187=_0x3fe419;let _0x40d59b=await this[_0x403187(0x671)]({'request':_0x56194d,'schema':Te,'ClassRef':Ce,'execute':(_0xb3d0c7,_0x4b02b6)=>P[_0x403187(0x4c8)](_0xb3d0c7,_0x4b02b6)});return _0x4cf6d9[_0x403187(0x654)](0xc8)[_0x403187(0x369)](_0x40d59b);})[_0x3fe419(0x5c7)](this[_0x3fe419(0x4f2)](_0x3fe419(0x450)),..._0x5003bb,async(_0x5e7146,_0x1a8c01)=>{const _0x22fe5b=_0x3fe419;let _0x4cb53e=await this[_0x22fe5b(0x671)]({'request':_0x5e7146,'schema':$a,'ClassRef':Ce,'execute':(_0x31a151,_0x5ccf8b)=>P[_0x22fe5b(0x450)](_0x31a151,_0x5ccf8b)});return _0x1a8c01[_0x22fe5b(0x654)](0xc8)[_0x22fe5b(0x369)](_0x4cb53e);})[_0x3fe419(0x5c7)](this[_0x3fe419(0x4f2)]('findContacts'),..._0x5003bb,async(_0x27223c,_0xb99f02)=>{const _0x1af534=_0x3fe419;let _0x42c0c5=await this[_0x1af534(0x671)]({'request':_0x27223c,'schema':Oa,'ClassRef':Ze,'execute':(_0x365b11,_0x13a0c3)=>P[_0x1af534(0x5d4)](_0x365b11,_0x13a0c3)});return _0xb99f02[_0x1af534(0x654)](0xc8)[_0x1af534(0x369)](_0x42c0c5);})[_0x3fe419(0x5c7)](this[_0x3fe419(0x4f2)](_0x3fe419(0x262)),..._0x5003bb,async(_0x110487,_0x3cad4a)=>{const _0x409450=_0x3fe419;let _0x28bb05=await this[_0x409450(0x671)]({'request':_0x110487,'schema':null,'ClassRef':Object,'execute':(_0x16f96e,_0x5180a5)=>P[_0x409450(0x262)](_0x16f96e,_0x5180a5)});return _0x3cad4a['status'](0xc9)[_0x409450(0x369)](_0x28bb05);})[_0x3fe419(0x5c7)](this[_0x3fe419(0x4f2)](_0x3fe419(0x1bd)),..._0x5003bb,async(_0x36983b,_0x572a83)=>{const _0x421ad9=_0x3fe419;let _0x5dbb59=await this['dataValidate']({'request':_0x36983b,'schema':ka,'ClassRef':Ve,'execute':(_0x15925e,_0x3c9e40)=>P[_0x421ad9(0x664)](_0x15925e,_0x3c9e40)});return _0x572a83[_0x421ad9(0x654)](0xc8)[_0x421ad9(0x369)](_0x5dbb59);})[_0x3fe419(0x5c7)](this['routerPath']('findStatusMessage'),..._0x5003bb,async(_0xb4d86e,_0x114761)=>{const _0x250400=_0x3fe419;let _0x5d9195=await this['dataValidate']({'request':_0xb4d86e,'schema':La,'ClassRef':st,'execute':(_0x2a759f,_0x243f97)=>P['fetchStatusMessage'](_0x2a759f,_0x243f97)});return _0x114761[_0x250400(0x654)](0xc8)[_0x250400(0x369)](_0x5d9195);})[_0x3fe419(0x17f)](this['routerPath']('findChats'),..._0x5003bb,async(_0x58109c,_0x57e751)=>{const _0x5e30b7=_0x3fe419;let _0x2b230a=await this[_0x5e30b7(0x671)]({'request':_0x58109c,'schema':null,'ClassRef':b,'execute':_0x32bb24=>P[_0x5e30b7(0x26a)](_0x32bb24)});return _0x57e751[_0x5e30b7(0x654)](0xc8)['json'](_0x2b230a);})[_0x3fe419(0x17f)](this[_0x3fe419(0x4f2)](_0x3fe419(0x328)),..._0x5003bb,async(_0x480c53,_0xb678ba)=>{const _0x45b0e7=_0x3fe419;let _0x585085=await this[_0x45b0e7(0x671)]({'request':_0x480c53,'schema':null,'ClassRef':b,'execute':_0x17f3f6=>P[_0x45b0e7(0x328)](_0x17f3f6)});return _0xb678ba[_0x45b0e7(0x654)](0xc8)[_0x45b0e7(0x369)](_0x585085);})[_0x3fe419(0x5c6)](this[_0x3fe419(0x4f2)](_0x3fe419(0x2a4)),..._0x5003bb,async(_0x14be02,_0x4a6c55)=>{const _0x1f1120=_0x3fe419;let _0x30427d=await this['dataValidate']({'request':_0x14be02,'schema':Ia,'ClassRef':ze,'execute':(_0x15b67c,_0x4d7ba6)=>P[_0x1f1120(0x2a4)](_0x15b67c,_0x4d7ba6)});return _0x4a6c55[_0x1f1120(0x654)](0xc9)[_0x1f1120(0x369)](_0x30427d);})['post'](this[_0x3fe419(0x4f2)](_0x3fe419(0x501)),..._0x5003bb,async(_0x5ccf4c,_0x2b4b5b)=>{const _0x2afed7=_0x3fe419;let _0x4904dd=await this['dataValidate']({'request':_0x5ccf4c,'schema':Te,'ClassRef':we,'execute':(_0x1b4264,_0x31cbc5)=>P[_0x2afed7(0x501)](_0x1b4264,_0x31cbc5)});return _0x2b4b5b[_0x2afed7(0x654)](0xc8)[_0x2afed7(0x369)](_0x4904dd);})[_0x3fe419(0x5c7)](this[_0x3fe419(0x4f2)]('updateProfileName'),..._0x5003bb,async(_0x1f616f,_0x2edfd1)=>{const _0x322e89=_0x3fe419;let _0x227926=await this[_0x322e89(0x671)]({'request':_0x1f616f,'schema':_a,'ClassRef':qe,'execute':(_0x50cf15,_0x3ad87b)=>P['updateProfileName'](_0x50cf15,_0x3ad87b)});return _0x2edfd1[_0x322e89(0x654)](0xc8)['json'](_0x227926);})[_0x3fe419(0x5c7)](this[_0x3fe419(0x4f2)](_0x3fe419(0x236)),..._0x5003bb,async(_0x16144e,_0xbf0761)=>{const _0x8f649d=_0x3fe419;let _0x1e9018=await this['dataValidate']({'request':_0x16144e,'schema':xa,'ClassRef':We,'execute':(_0x114c4c,_0xf2ad2b)=>P[_0x8f649d(0x236)](_0x114c4c,_0xf2ad2b)});return _0xbf0761[_0x8f649d(0x654)](0xc8)[_0x8f649d(0x369)](_0x1e9018);})['put'](this[_0x3fe419(0x4f2)](_0x3fe419(0x64d)),..._0x5003bb,async(_0x3f53fd,_0x1bd3fc)=>{const _0x3836c2=_0x3fe419;let _0xb0668f=await this[_0x3836c2(0x671)]({'request':_0x3f53fd,'schema':Te,'ClassRef':we,'execute':(_0x93beb1,_0x4f33dc)=>P[_0x3836c2(0x64d)](_0x93beb1,_0x4f33dc)});return _0x1bd3fc['status'](0xc8)['json'](_0xb0668f);})[_0x3fe419(0x45d)](this[_0x3fe419(0x4f2)](_0x3fe419(0x626)),..._0x5003bb,async(_0x943019,_0x25cdbd)=>{const _0x2ae265=_0x3fe419;let _0x3b85a3=await this[_0x2ae265(0x671)]({'request':_0x943019,'schema':Te,'ClassRef':we,'execute':(_0x3c67ce,_0x54c932)=>P[_0x2ae265(0x626)](_0x3c67ce,_0x54c932)});return _0x25cdbd[_0x2ae265(0x654)](0xc8)['json'](_0x3b85a3);});}},za=require(a0_0x3e22c7(0x3ed)),it=class{},rt=class{},nt=class{},ct=class{},lt=class{},ee=class{},ut=class{},dt=class extends ee{},pt=class extends ee{},gt=class extends L{constructor(..._0x1d1b51){const _0x4112af=a0_0x3e22c7;super(),this[_0x4112af(0x5d0)]=(0x0,za[_0x4112af(0x19c)])(),this['router'][_0x4112af(0x5c7)](this['routerPath'](_0x4112af(0x516)),..._0x1d1b51,async(_0x863d1a,_0x4e981f)=>{const _0x3b1f65=_0x4112af;let _0x95a20d=await this[_0x3b1f65(0x671)]({'request':_0x863d1a,'schema':Va,'ClassRef':it,'execute':(_0x19e0b2,_0x446866)=>V[_0x3b1f65(0x517)](_0x19e0b2,_0x446866)});_0x4e981f[_0x3b1f65(0x654)](0xc9)['json'](_0x95a20d);})[_0x4112af(0x5c6)](this[_0x4112af(0x4f2)](_0x4112af(0x26e)),..._0x1d1b51,async(_0x20a47f,_0x47dad4)=>{const _0x59e49f=_0x4112af;let _0x3949ee=await this[_0x59e49f(0x608)]({'request':_0x20a47f,'schema':Fa,'ClassRef':rt,'execute':(_0x3b76eb,_0x42af73)=>V[_0x59e49f(0x26e)](_0x3b76eb,_0x42af73)});_0x47dad4[_0x59e49f(0x654)](0xc9)[_0x59e49f(0x369)](_0x3949ee);})[_0x4112af(0x5c6)](this['routerPath'](_0x4112af(0x403)),..._0x1d1b51,async(_0x52967c,_0x4983bd)=>{const _0x21e812=_0x4112af;let _0x374719=await this[_0x21e812(0x608)]({'request':_0x52967c,'schema':Ja,'ClassRef':nt,'execute':(_0x47bf19,_0x599777)=>V['groupDesc'](_0x47bf19,_0x599777)});_0x4983bd[_0x21e812(0x654)](0xc9)[_0x21e812(0x369)](_0x374719);})[_0x4112af(0x5c6)](this['routerPath'](_0x4112af(0x1eb)),..._0x1d1b51,async(_0xb4665e,_0x2fde29)=>{const _0x2fe389=_0x4112af;let _0x159455=await this[_0x2fe389(0x608)]({'request':_0xb4665e,'schema':Ga,'ClassRef':ct,'execute':(_0x581952,_0x1d086f)=>V['groupName'](_0x581952,_0x1d086f)});_0x2fde29[_0x2fe389(0x654)](0xc9)[_0x2fe389(0x369)](_0x159455);})[_0x4112af(0x5c6)](this[_0x4112af(0x4f2)](_0x4112af(0x2c6)),..._0x1d1b51,async(_0x2a6354,_0x57d146)=>{const _0xdd3d88=_0x4112af;let _0x307ba8=await this['groupValidate']({'request':_0x2a6354,'schema':qa,'ClassRef':lt,'execute':(_0x357fc9,_0x534a45)=>V[_0xdd3d88(0x2c6)](_0x357fc9,_0x534a45)});_0x57d146['status'](0xc9)[_0xdd3d88(0x369)](_0x307ba8);})[_0x4112af(0x5c6)](this[_0x4112af(0x4f2)]('toggleEphemeral'),..._0x1d1b51,async(_0x1b0476,_0x23c0e3)=>{const _0x60df88=_0x4112af;let _0x37ecc8=await this[_0x60df88(0x608)]({'request':_0x1b0476,'schema':Ba,'ClassRef':pt,'execute':(_0x32f480,_0x49c818)=>V[_0x60df88(0x631)](_0x32f480,_0x49c818)});_0x23c0e3[_0x60df88(0x654)](0xc9)[_0x60df88(0x369)](_0x37ecc8);})[_0x4112af(0x17f)](this[_0x4112af(0x4f2)](_0x4112af(0x693)),..._0x1d1b51,async(_0x22f23e,_0xb92c25)=>{const _0x38002a=_0x4112af;let _0x5aef38=await this[_0x38002a(0x608)]({'request':_0x22f23e,'schema':Me,'ClassRef':ee,'execute':(_0x297468,_0x3af27e)=>V[_0x38002a(0x165)](_0x297468,_0x3af27e)});_0xb92c25[_0x38002a(0x654)](0xc8)['json'](_0x5aef38);})['get'](this['routerPath'](_0x4112af(0x692)),..._0x1d1b51,async(_0xd2f59,_0x49a53e)=>{const _0x4b0b6b=_0x4112af;let _0x48a657=await this[_0x4b0b6b(0x671)]({'request':_0xd2f59,'schema':v,'ClassRef':b,'execute':_0x478d1d=>V['findGroups'](_0x478d1d)});_0x49a53e[_0x4b0b6b(0x654)](0xc8)[_0x4b0b6b(0x369)](_0x48a657);})[_0x4112af(0x17f)](this[_0x4112af(0x4f2)](_0x4112af(0x6fd)),..._0x1d1b51,async(_0x571509,_0x2c3a1d)=>{const _0x223d5d=_0x4112af;let _0x192058=await this[_0x223d5d(0x608)]({'request':_0x571509,'schema':Me,'ClassRef':ee,'execute':(_0x4b28c7,_0x4239a8)=>V[_0x223d5d(0x521)](_0x4b28c7,_0x4239a8)});_0x2c3a1d[_0x223d5d(0x654)](0xc8)[_0x223d5d(0x369)](_0x192058);})[_0x4112af(0x17f)](this['routerPath']('inviteCode'),..._0x1d1b51,async(_0x43cf17,_0x4d013f)=>{const _0x17f228=_0x4112af;let _0x3ae105=await this[_0x17f228(0x608)]({'request':_0x43cf17,'schema':Me,'ClassRef':ee,'execute':(_0x4041b4,_0x2fd872)=>V[_0x17f228(0x455)](_0x4041b4,_0x2fd872)});_0x4d013f['status'](0xc8)[_0x17f228(0x369)](_0x3ae105);})[_0x4112af(0x5c6)](this['routerPath']('joinGroup'),..._0x1d1b51,async(_0x25bba9,_0x4effb0)=>{const _0x2cdf6c=_0x4112af;let _0x81cd51=await this['joinGroupValidate']({'request':_0x25bba9,'schema':Wa,'ClassRef':ut,'execute':(_0x3ccc19,_0xada76a)=>V[_0x2cdf6c(0x4ec)](_0x3ccc19,_0xada76a)});_0x4effb0[_0x2cdf6c(0x654)](0xc9)['json'](_0x81cd51);})[_0x4112af(0x5c6)](this[_0x4112af(0x4f2)](_0x4112af(0x4a0)),..._0x1d1b51,async(_0x2c610f,_0x56c92d)=>{const _0x468528=_0x4112af;let _0x303312=await this[_0x468528(0x608)]({'request':_0x2c610f,'schema':Me,'ClassRef':ee,'execute':(_0x1b7acc,_0x233960)=>V[_0x468528(0x4a0)](_0x1b7acc,_0x233960)});_0x56c92d['status'](0xc9)[_0x468528(0x369)](_0x303312);})[_0x4112af(0x5c6)](this[_0x4112af(0x4f2)](_0x4112af(0x466)),..._0x1d1b51,async(_0x3b40cc,_0x43492c)=>{const _0x4ca35f=_0x4112af;let _0x5779cd=await this[_0x4ca35f(0x608)]({'request':_0x3b40cc,'schema':ja,'ClassRef':dt,'execute':(_0x50ca53,_0x29c36d)=>V[_0x4ca35f(0x6b4)](_0x50ca53,_0x29c36d)});_0x43492c[_0x4ca35f(0x654)](0xc9)['json'](_0x5779cd);})[_0x4112af(0x45d)](this[_0x4112af(0x4f2)](_0x4112af(0x195)),..._0x1d1b51,async(_0x437349,_0x1cf7f1)=>{const _0x56e8cd=_0x4112af;let _0x5d8456=await this[_0x56e8cd(0x608)]({'request':_0x437349,'schema':{},'ClassRef':ee,'execute':(_0x547e5d,_0x36e71a)=>V[_0x56e8cd(0x195)](_0x547e5d,_0x36e71a)});_0x1cf7f1[_0x56e8cd(0x654)](0xc8)[_0x56e8cd(0x369)](_0x5d8456);});}},Xa=require('express'),Pe=require(a0_0x3e22c7(0x70b)),ys=require('uuid'),Qa=require(a0_0x3e22c7(0x3c1)),Ya=T(require(a0_0x3e22c7(0x354))),mt=class{},ht=class c{constructor(_0x3c03ff,_0x5d5e56,_0x5f50ba){const _0x58bd9b=a0_0x3e22c7;this['configService']=_0x3c03ff,this[_0x58bd9b(0x637)]=_0x5d5e56,this[_0x58bd9b(0x3da)]=_0x5f50ba,this[_0x58bd9b(0x187)]=new C(c[_0x58bd9b(0x3dc)]);}async[a0_0x3e22c7(0x46f)](_0x42a7f5){const _0x5a5b0f=a0_0x3e22c7;let _0x5e2da5=this[_0x5a5b0f(0x3e5)][_0x5a5b0f(0x17f)](_0x5a5b0f(0x32f))[_0x5a5b0f(0x5e3)],_0x10900c=(0x0,Pe[_0x5a5b0f(0x6c9)])({'instanceName':_0x42a7f5['instanceName'],'apiName':Xe,'tokenId':(0x0,ys['v4'])()},_0x5e2da5[_0x5a5b0f(0x1c5)],{'expiresIn':_0x5e2da5[_0x5a5b0f(0x294)],'encoding':_0x5a5b0f(0x512),'subject':_0x5a5b0f(0x4ad)}),_0x5cd3d6=await this[_0x5a5b0f(0x3da)][_0x5a5b0f(0x378)][_0x5a5b0f(0x516)]({'jwt':_0x10900c},_0x42a7f5[_0x5a5b0f(0x202)]);if(_0x5cd3d6[_0x5a5b0f(0x41f)])throw this[_0x5a5b0f(0x187)][_0x5a5b0f(0x41f)]({'localError':c[_0x5a5b0f(0x3dc)]+_0x5a5b0f(0x15c),'error':_0x5cd3d6[_0x5a5b0f(0x41f)]}),new g(_0x5a5b0f(0x6dd),_0x5cd3d6[_0x5a5b0f(0x41f)]?.[_0x5a5b0f(0x63b)]());return{'jwt':_0x10900c};}async[a0_0x3e22c7(0x4d5)](_0x162e1a){const _0x3e199c=a0_0x3e22c7;let _0x479bd1=(0x0,ys['v4'])()['toUpperCase'](),_0x276bb4=await this[_0x3e199c(0x3da)]['auth'][_0x3e199c(0x516)]({'apikey':_0x479bd1},_0x162e1a[_0x3e199c(0x202)]);if(_0x276bb4[_0x3e199c(0x41f)])throw this[_0x3e199c(0x187)][_0x3e199c(0x41f)]({'localError':c['name']+_0x3e199c(0x15c),'error':_0x276bb4['error']}),new g(_0x3e199c(0x6dd),_0x276bb4[_0x3e199c(0x41f)]?.[_0x3e199c(0x63b)]());return{'apikey':_0x479bd1};}async['generateHash'](_0x2375c4){const _0x5d360d=a0_0x3e22c7;let _0x4e98ad=this[_0x5d360d(0x3e5)]['get'](_0x5d360d(0x32f));return await this[_0x4e98ad[_0x5d360d(0x46b)]](_0x2375c4);}async[a0_0x3e22c7(0x3dd)]({oldToken:_0x1aa294}){const _0x3884e8=a0_0x3e22c7;if(!(0x0,Qa['isJWT'])(_0x1aa294))throw new g(_0x3884e8(0x70e));try{let _0x1fcc29=this[_0x3884e8(0x3e5)][_0x3884e8(0x17f)]('AUTHENTICATION')[_0x3884e8(0x5e3)],_0x4f664e=(0x0,Pe['verify'])(_0x1aa294,_0x1fcc29[_0x3884e8(0x1c5)],{'ignoreExpiration':!0x0}),_0x588a86=await this['repository'][_0x3884e8(0x378)]['find'](_0x4f664e[_0x3884e8(0x202)]),_0x471ae5=(0x0,Pe[_0x3884e8(0x17a)])(_0x588a86['jwt'],_0x1fcc29[_0x3884e8(0x1c5)],{'ignoreExpiration':!0x0});if(_0x4f664e[_0x3884e8(0x4d8)]!==_0x471ae5[_0x3884e8(0x4d8)])throw new g(_0x3884e8(0x70e));let _0x3d1afd={'jwt':(await this['jwt']({'instanceName':_0x4f664e['instanceName']}))[_0x3884e8(0x46f)],'instanceName':_0x4f664e[_0x3884e8(0x202)]};try{let _0x2cac29=await this[_0x3884e8(0x3da)]['webhook']['find'](_0x4f664e[_0x3884e8(0x202)]);_0x2cac29?.[_0x3884e8(0x688)]&&this[_0x3884e8(0x3e5)][_0x3884e8(0x17f)](_0x3884e8(0x6b5))[_0x3884e8(0x5c8)][_0x3884e8(0x529)]&&await Ya[_0x3884e8(0x30c)]['create']({'baseURL':_0x2cac29[_0x3884e8(0x72e)]})[_0x3884e8(0x5c7)]('',{'event':_0x3884e8(0x33b),'instance':_0x4f664e[_0x3884e8(0x202)],'data':_0x3d1afd},{'params':{'owner':this[_0x3884e8(0x637)][_0x3884e8(0x40a)][_0x4f664e[_0x3884e8(0x202)]][_0x3884e8(0x2e6)]}});}catch(_0x479f1a){this[_0x3884e8(0x187)]['error'](_0x479f1a);}return _0x3d1afd;}catch(_0x14d9d4){throw this[_0x3884e8(0x187)]['error']({'localError':c[_0x3884e8(0x3dc)]+'.refreshToken','error':_0x14d9d4}),new g(_0x3884e8(0x70e));}}},ft=class extends L{constructor(_0x30b96f,..._0xe84987){const _0x2b9291=a0_0x3e22c7;super(),this['configService']=_0x30b96f,this[_0x2b9291(0x5d0)]=(0x0,Xa[_0x2b9291(0x19c)])();let _0x24bc7e=_0x30b96f[_0x2b9291(0x17f)](_0x2b9291(0x32f));this[_0x2b9291(0x5d0)][_0x2b9291(0x5c7)](_0x2b9291(0x158),..._0xe84987,async(_0x14c38d,_0x568063)=>{const _0x5e685f=_0x2b9291;let {instanceName:_0xb30f71,apikey:_0x296a9f}=_0x14c38d['body'],_0x305bf6=await ce['createInstance']({'instanceName':_0xb30f71,'apikey':_0x296a9f});return _0x568063['status'](0xc9)[_0x5e685f(0x369)](_0x305bf6);})[_0x2b9291(0x5c6)](this[_0x2b9291(0x4f2)](_0x2b9291(0x504)),..._0xe84987,async(_0x423a31,_0x4d9425)=>{const _0x5bebe9=_0x2b9291;let _0x4683a1=await this['dataValidate']({'request':_0x423a31,'schema':v,'ClassRef':b,'execute':_0x176cbb=>ce['restartInstance'](_0x176cbb)});return _0x4d9425[_0x5bebe9(0x654)](0xc8)[_0x5bebe9(0x369)](_0x4683a1);})['get'](this[_0x2b9291(0x4f2)]('connect'),..._0xe84987,async(_0x244c94,_0x264509)=>{const _0xf52801=_0x2b9291;let _0x1a9383=await this['dataValidate']({'request':_0x244c94,'schema':v,'ClassRef':b,'execute':_0x5caeeb=>ce[_0xf52801(0x3bc)](_0x5caeeb)});return _0x264509[_0xf52801(0x654)](0xc8)[_0xf52801(0x369)](_0x1a9383);})[_0x2b9291(0x17f)](this[_0x2b9291(0x4f2)](_0x2b9291(0x508)),..._0xe84987,async(_0x1e6954,_0xd08d8)=>{const _0xaf7e92=_0x2b9291;let _0x39292f=await this[_0xaf7e92(0x671)]({'request':_0x1e6954,'schema':v,'ClassRef':b,'execute':_0x890d93=>ce[_0xaf7e92(0x508)](_0x890d93)});return _0xd08d8[_0xaf7e92(0x654)](0xc8)[_0xaf7e92(0x369)](_0x39292f);})[_0x2b9291(0x17f)](this[_0x2b9291(0x4f2)](_0x2b9291(0x6fc),!0x1),..._0xe84987,async(_0x1ac852,_0x395bb1)=>{const _0x3cc353=_0x2b9291;let _0x15f0d1=await this[_0x3cc353(0x671)]({'request':_0x1ac852,'schema':null,'ClassRef':b,'execute':_0xea575e=>ce[_0x3cc353(0x6fc)](_0xea575e)});return _0x395bb1[_0x3cc353(0x654)](0xc8)[_0x3cc353(0x369)](_0x15f0d1);})['delete'](this[_0x2b9291(0x4f2)](_0x2b9291(0x4f1)),..._0xe84987,async(_0x4a2d7a,_0x128743)=>{const _0x4bab31=_0x2b9291;let _0x12b721=await this[_0x4bab31(0x671)]({'request':_0x4a2d7a,'schema':v,'ClassRef':b,'execute':_0x104230=>ce[_0x4bab31(0x4f1)](_0x104230)});return _0x128743['status'](0xc8)[_0x4bab31(0x369)](_0x12b721);})[_0x2b9291(0x45d)](this['routerPath'](_0x2b9291(0x45d)),..._0xe84987,async(_0x3ca808,_0x556c13)=>{const _0x1bfc19=_0x2b9291;let _0x26ad7a=await this[_0x1bfc19(0x671)]({'request':_0x3ca808,'schema':v,'ClassRef':b,'execute':_0x23f955=>ce[_0x1bfc19(0x188)](_0x23f955)});return _0x556c13[_0x1bfc19(0x654)](0xc8)['json'](_0x26ad7a);}),_0x24bc7e[_0x2b9291(0x46b)]==='jwt'&&this['router'][_0x2b9291(0x5c6)]('/refreshToken',async(_0x123f65,_0x1f749c)=>{const _0x4a8358=_0x2b9291;let _0x157597=await this['dataValidate']({'request':_0x123f65,'schema':ma,'ClassRef':mt,'execute':(_0x38fa35,_0x483800)=>ce[_0x4a8358(0x3dd)](_0x38fa35,_0x483800)});return _0x1f749c['status'](0xc9)[_0x4a8358(0x369)](_0x157597);});}},Za=require(a0_0x3e22c7(0x3ed)),bs=class{},z=class extends bs{},wt=class extends z{},yt=class extends z{},bt=class extends z{},Oe=class extends z{},St=class extends z{},Et=class extends z{},vt=class extends z{},Nt=class extends z{},Ct=class extends z{},Tt=class{},Mt=class extends L{constructor(..._0x2e2baa){const _0x4338d8=a0_0x3e22c7;super(),this['router']=(0x0,Za[_0x4338d8(0x19c)])(),this[_0x4338d8(0x5d0)]['post'](this[_0x4338d8(0x4f2)](_0x4338d8(0x400)),..._0x2e2baa,async(_0x1d6ce0,_0x4fbe10)=>{const _0x231cae=_0x4338d8;let _0x4287b0=await this[_0x231cae(0x671)]({'request':_0x1d6ce0,'schema':ha,'ClassRef':wt,'execute':(_0x46819c,_0x403da4)=>K['sendText'](_0x46819c,_0x403da4)});return _0x4fbe10['status'](0xc9)[_0x231cae(0x369)](_0x4287b0);})[_0x4338d8(0x5c7)](this[_0x4338d8(0x4f2)](_0x4338d8(0x569)),..._0x2e2baa,async(_0xeb9870,_0x119e1d)=>{const _0x191651=_0x4338d8;let _0x3b8fea=await this[_0x191651(0x671)]({'request':_0xeb9870,'schema':ba,'ClassRef':Oe,'execute':(_0x686c65,_0xe4c611)=>K['sendMedia'](_0x686c65,_0xe4c611)});return _0x119e1d[_0x191651(0x654)](0xc9)[_0x191651(0x369)](_0x3b8fea);})['post'](this[_0x4338d8(0x4f2)](_0x4338d8(0x552)),..._0x2e2baa,async(_0x1780fb,_0x1587c0)=>{const _0x1b5200=_0x4338d8;let _0x2b3e69=await this['dataValidate']({'request':_0x1780fb,'schema':Sa,'ClassRef':Oe,'execute':(_0x50269c,_0x4ba05e)=>K['sendWhatsAppAudio'](_0x50269c,_0x4ba05e)});return _0x1587c0[_0x1b5200(0x654)](0xc9)[_0x1b5200(0x369)](_0x2b3e69);})['post'](this['routerPath'](_0x4338d8(0x17b)),..._0x2e2baa,async(_0x4bec1f,_0x475630)=>{const _0x35205b=_0x4338d8;let _0x18b543=await this[_0x35205b(0x671)]({'request':_0x4bec1f,'schema':va,'ClassRef':Et,'execute':(_0x841ce8,_0x368055)=>K[_0x35205b(0x17b)](_0x841ce8,_0x368055)});return _0x475630[_0x35205b(0x654)](0xc9)[_0x35205b(0x369)](_0x18b543);})[_0x4338d8(0x5c7)](this['routerPath'](_0x4338d8(0x565)),..._0x2e2baa,async(_0x3969f9,_0x2515a3)=>{const _0x4ef6cb=_0x4338d8;let _0x372110=await this[_0x4ef6cb(0x671)]({'request':_0x3969f9,'schema':Na,'ClassRef':vt,'execute':(_0x1f595a,_0x2ad920)=>K[_0x4ef6cb(0x565)](_0x1f595a,_0x2ad920)});return _0x2515a3[_0x4ef6cb(0x654)](0xc9)[_0x4ef6cb(0x369)](_0x372110);})[_0x4338d8(0x5c7)](this[_0x4338d8(0x4f2)]('sendList'),..._0x2e2baa,async(_0x2a8a7c,_0x159df6)=>{const _0x2c47f6=_0x4338d8;let _0x400bc7=await this[_0x2c47f6(0x671)]({'request':_0x2a8a7c,'schema':Ca,'ClassRef':Nt,'execute':(_0x5da004,_0x2bfc0f)=>K[_0x2c47f6(0x62d)](_0x5da004,_0x2bfc0f)});return _0x159df6[_0x2c47f6(0x654)](0xc9)[_0x2c47f6(0x369)](_0x400bc7);})['post'](this[_0x4338d8(0x4f2)](_0x4338d8(0x55f)),..._0x2e2baa,async(_0x25bef9,_0x322e31)=>{const _0x149ac0=_0x4338d8;let _0x5b093c=await this['dataValidate']({'request':_0x25bef9,'schema':Ta,'ClassRef':Ct,'execute':(_0x283ef9,_0x2cf7f6)=>K[_0x149ac0(0x55f)](_0x283ef9,_0x2cf7f6)});return _0x322e31[_0x149ac0(0x654)](0xc9)[_0x149ac0(0x369)](_0x5b093c);})[_0x4338d8(0x5c7)](this[_0x4338d8(0x4f2)](_0x4338d8(0x261)),..._0x2e2baa,async(_0x233a8f,_0x134667)=>{const _0x29c02b=_0x4338d8;let _0x4e00a0=await this['dataValidate']({'request':_0x233a8f,'schema':Ma,'ClassRef':Tt,'execute':(_0x147bb8,_0x269bc)=>K[_0x29c02b(0x261)](_0x147bb8,_0x269bc)});return _0x134667['status'](0xc9)['json'](_0x4e00a0);})[_0x4338d8(0x5c7)](this[_0x4338d8(0x4f2)]('sendPoll'),..._0x2e2baa,async(_0x2d910b,_0x50a66d)=>{const _0x509952=_0x4338d8;let _0x4d416e=await this[_0x509952(0x671)]({'request':_0x2d910b,'schema':Ea,'ClassRef':bt,'execute':(_0x4039a6,_0xce5d60)=>K[_0x509952(0x2b9)](_0x4039a6,_0xce5d60)});return _0x50a66d[_0x509952(0x654)](0xc9)['json'](_0x4d416e);})[_0x4338d8(0x5c7)](this[_0x4338d8(0x4f2)]('sendStatus'),..._0x2e2baa,async(_0xdb624a,_0x7e196e)=>{const _0xcc3e5d=_0x4338d8;let _0x19bb88=await this[_0xcc3e5d(0x671)]({'request':_0xdb624a,'schema':ya,'ClassRef':yt,'execute':(_0x50481d,_0x5a1667)=>K[_0xcc3e5d(0x35b)](_0x50481d,_0x5a1667)});return _0x7e196e[_0xcc3e5d(0x654)](0xc9)[_0xcc3e5d(0x369)](_0x19bb88);})[_0x4338d8(0x5c7)](this[_0x4338d8(0x4f2)]('sendSticker'),..._0x2e2baa,async(_0x2b3fef,_0x2d094e)=>{const _0x32d348=_0x4338d8;let _0x2a3331=await this[_0x32d348(0x671)]({'request':_0x2b3fef,'schema':wa,'ClassRef':St,'execute':(_0xa9d648,_0x163585)=>K['sendSticker'](_0xa9d648,_0x163585)});return _0x2d094e['status'](0xc9)[_0x32d348(0x369)](_0x2a3331);});}},eo=require(a0_0x3e22c7(0x3ed)),Rt=class extends L{constructor(..._0x252fd2){const _0x4b2e93=a0_0x3e22c7;super(),this[_0x4b2e93(0x5d0)]=(0x0,eo['Router'])(),this[_0x4b2e93(0x5d0)][_0x4b2e93(0x17f)](this[_0x4b2e93(0x4f2)]('qrcode'),..._0x252fd2,(_0x683e9c,_0x2cd498)=>to[_0x4b2e93(0x67d)](_0x683e9c,_0x2cd498));}},so=require(a0_0x3e22c7(0x3ed)),At=class{},It=class extends L{constructor(..._0x1f2782){const _0x4ad235=a0_0x3e22c7;super(),this[_0x4ad235(0x5d0)]=(0x0,so[_0x4ad235(0x19c)])(),this[_0x4ad235(0x5d0)]['post'](this[_0x4ad235(0x4f2)](_0x4ad235(0x4da)),..._0x1f2782,async(_0x69e9e0,_0x1f3112)=>{const _0x1ef94c=_0x4ad235;let _0x269216=await this[_0x1ef94c(0x671)]({'request':_0x69e9e0,'schema':Ha,'ClassRef':At,'execute':(_0x3cdf71,_0x4d37d1)=>Ss[_0x1ef94c(0x57d)](_0x3cdf71,_0x4d37d1)});_0x1f3112[_0x1ef94c(0x654)](0xc9)['json'](_0x269216);})['get'](this[_0x4ad235(0x4f2)](_0x4ad235(0x445)),..._0x1f2782,async(_0x3f55f7,_0x40d0c1)=>{const _0x486683=_0x4ad235;let _0x49b37b=await this[_0x486683(0x671)]({'request':_0x3f55f7,'schema':v,'ClassRef':b,'execute':_0x2d47c0=>Ss[_0x486683(0x173)](_0x2d47c0)});_0x40d0c1[_0x486683(0x654)](0xc8)['json'](_0x49b37b);});}},ao=require('express'),f=new C(a0_0x3e22c7(0x172)),Dt=class extends L{constructor(..._0x4cca97){const _0xf3ff15=a0_0x3e22c7;super(),this[_0xf3ff15(0x5d0)]=(0x0,ao[_0xf3ff15(0x19c)])(),this['router'][_0xf3ff15(0x5c7)](this['routerPath']('scheduleMessage'),..._0x4cca97,async(_0x4f79ff,_0x28030f)=>{const _0x3ac5eb=_0xf3ff15;let _0x5ee936=_0x4f79ff[_0x3ac5eb(0x31f)];f['verbose'](_0x3ac5eb(0x528)),f[_0x3ac5eb(0x461)](_0x3ac5eb(0x728)),f['verbose'](_0x4f79ff['body']);let _0x2a6591=await this['dataValidate']({'request':_0x4f79ff,'schema':v,'ClassRef':b,'execute':_0x1dca26=>R[_0x3ac5eb(0x2ca)](_0x1dca26,_0x5ee936)});_0x28030f[_0x3ac5eb(0x654)](0xc8)[_0x3ac5eb(0x369)](_0x2a6591);})['get'](this['routerPath'](_0xf3ff15(0x1cf)),..._0x4cca97,async(_0x1b1f38,_0x47329d)=>{const _0x110298=_0xf3ff15;let _0xcf95e=await this[_0x110298(0x671)]({'request':_0x1b1f38,'schema':v,'ClassRef':b,'execute':_0x56a437=>R['getScheduleMessage'](_0x56a437)});_0x47329d[_0x110298(0x654)](0xc8)['json'](_0xcf95e);})['delete'](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x199)),..._0x4cca97,async(_0x206f00,_0x588efb)=>{const _0x5ddf57=_0xf3ff15;f['verbose'](_0x5ddf57(0x622));let _0x5471a4=await this['dataValidate']({'request':_0x206f00,'schema':v,'ClassRef':b,'execute':_0x1cbfc9=>R[_0x5ddf57(0x199)](_0x1cbfc9)});_0x588efb[_0x5ddf57(0x654)](0xc8)[_0x5ddf57(0x369)](_0x5471a4);})['post'](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x5da)),..._0x4cca97,async(_0x48e7e3,_0x203cce)=>{const _0x35e09c=_0xf3ff15;let _0x114af1=_0x48e7e3[_0x35e09c(0x31f)];f['verbose'](_0x35e09c(0x6c4)),f[_0x35e09c(0x461)](_0x35e09c(0x728)),f[_0x35e09c(0x461)](_0x48e7e3['body']);let _0x5359d8=await this[_0x35e09c(0x671)]({'request':_0x48e7e3,'schema':v,'ClassRef':b,'execute':_0x44804f=>R[_0x35e09c(0x5da)](_0x44804f,_0x114af1)});_0x203cce[_0x35e09c(0x654)](0xc8)[_0x35e09c(0x369)](_0x5359d8);})[_0xf3ff15(0x17f)](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x66b)),..._0x4cca97,async(_0xa6979f,_0xfda8a9)=>{const _0x46cc98=_0xf3ff15;f[_0x46cc98(0x461)](_0x46cc98(0x15d));let _0x546ff1=await this[_0x46cc98(0x671)]({'request':_0xa6979f,'schema':v,'ClassRef':b,'execute':_0x435ec7=>R['getAutomateSystem'](_0x435ec7)});_0xfda8a9[_0x46cc98(0x654)](0xc8)[_0x46cc98(0x369)](_0x546ff1);})[_0xf3ff15(0x17f)](this[_0xf3ff15(0x4f2)]('getTicketSystem'),..._0x4cca97,async(_0x5a3c40,_0x19ec07)=>{const _0x47992e=_0xf3ff15;f[_0x47992e(0x461)](_0x47992e(0x52d));let _0x19942e=await this['dataValidate']({'request':_0x5a3c40,'schema':v,'ClassRef':b,'execute':_0x1e5c0e=>R[_0x47992e(0x66b)](_0x1e5c0e)});_0x19ec07[_0x47992e(0x654)](0xc8)[_0x47992e(0x369)](_0x19942e);})['post'](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x37b)),..._0x4cca97,async(_0x5e2c61,_0x56786c)=>{const _0x70dfe8=_0xf3ff15;let _0x121238=_0x5e2c61['body'];f[_0x70dfe8(0x461)](_0x70dfe8(0x368)),f['verbose'](_0x70dfe8(0x728)),f['verbose'](_0x5e2c61['body']);let _0xaed60d=await this['dataValidate']({'request':_0x5e2c61,'schema':v,'ClassRef':b,'execute':_0xc389b8=>R[_0x70dfe8(0x37b)](_0xc389b8,_0x121238)});_0x56786c[_0x70dfe8(0x654)](0xc8)[_0x70dfe8(0x369)](_0xaed60d);})[_0xf3ff15(0x5c7)](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x2ae)),..._0x4cca97,async(_0x50545d,_0x916729)=>{const _0x97b982=_0xf3ff15;let _0x5aa262=_0x50545d[_0x97b982(0x31f)];f[_0x97b982(0x461)](_0x97b982(0x712)),f['verbose'](_0x97b982(0x728)),f[_0x97b982(0x461)](_0x50545d[_0x97b982(0x31f)]);let _0x4ff663=await this[_0x97b982(0x671)]({'request':_0x50545d,'schema':v,'ClassRef':b,'execute':_0x58b1b6=>R[_0x97b982(0x2ae)](_0x58b1b6,_0x5aa262)});_0x916729[_0x97b982(0x654)](0xc8)[_0x97b982(0x369)](_0x4ff663);})[_0xf3ff15(0x5c7)](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x16e)),..._0x4cca97,async(_0x54e282,_0x34429e)=>{const _0x159c7e=_0xf3ff15;let _0x32976b=_0x54e282[_0x159c7e(0x31f)];f[_0x159c7e(0x461)](_0x159c7e(0x1ed)),f['verbose'](_0x159c7e(0x728)),f[_0x159c7e(0x461)](_0x54e282['body']);let _0x2dc718=await this[_0x159c7e(0x671)]({'request':_0x54e282,'schema':v,'ClassRef':b,'execute':_0x29779a=>R[_0x159c7e(0x16e)](_0x29779a,_0x32976b)});_0x34429e['status'](0xc8)['json'](_0x2dc718);})[_0xf3ff15(0x5c7)](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x4bc)),..._0x4cca97,async(_0x26bcc3,_0xf4386)=>{const _0x31a327=_0xf3ff15;let _0x4a4ea9=_0x26bcc3[_0x31a327(0x31f)];f[_0x31a327(0x461)](_0x31a327(0x298)),f[_0x31a327(0x461)](_0x31a327(0x728)),f['verbose'](_0x26bcc3[_0x31a327(0x31f)]);let _0x54048e=await this['dataValidate']({'request':_0x26bcc3,'schema':v,'ClassRef':b,'execute':_0x4ab782=>R[_0x31a327(0x4bc)](_0x4ab782,_0x4a4ea9)});_0xf4386[_0x31a327(0x654)](0xc8)[_0x31a327(0x369)](_0x54048e);})[_0xf3ff15(0x5c7)](this['routerPath'](_0xf3ff15(0x2b8)),..._0x4cca97,async(_0x2a085a,_0x149266)=>{const _0xc03cff=_0xf3ff15;let _0x4abcdb=_0x2a085a['body'];f['verbose']('request\x20received\x20in\x20fetchConversation'),f[_0xc03cff(0x461)](_0xc03cff(0x728)),f[_0xc03cff(0x461)](_0x2a085a[_0xc03cff(0x31f)]);let _0x95fa51=await this[_0xc03cff(0x671)]({'request':_0x2a085a,'schema':v,'ClassRef':b,'execute':_0x43ab91=>R[_0xc03cff(0x2b8)](_0x43ab91,_0x4abcdb)});_0x149266[_0xc03cff(0x654)](0xc8)['json'](_0x95fa51);})[_0xf3ff15(0x5c7)](this[_0xf3ff15(0x4f2)]('editConversation'),..._0x4cca97,async(_0x49f43a,_0x5ce738)=>{const _0xc0b48e=_0xf3ff15;let _0x3beb70=_0x49f43a['body'];f[_0xc0b48e(0x461)](_0xc0b48e(0x395)),f[_0xc0b48e(0x461)](_0xc0b48e(0x728)),f[_0xc0b48e(0x461)](_0x49f43a[_0xc0b48e(0x31f)]);let _0x111e9b=await this[_0xc0b48e(0x671)]({'request':_0x49f43a,'schema':v,'ClassRef':b,'execute':_0x39d1e6=>R[_0xc0b48e(0x169)](_0x39d1e6,_0x3beb70)});_0x5ce738[_0xc0b48e(0x654)](0xc8)[_0xc0b48e(0x369)](_0x111e9b);})[_0xf3ff15(0x45d)](this['routerPath']('deleteConversation'),..._0x4cca97,async(_0x21a333,_0x2af267)=>{const _0x39ac81=_0xf3ff15;let _0x4cab65=_0x21a333[_0x39ac81(0x31f)];f[_0x39ac81(0x461)](_0x39ac81(0x6e4)),f[_0x39ac81(0x461)]('request\x20body:\x20'),f[_0x39ac81(0x461)](_0x21a333[_0x39ac81(0x31f)]);let _0x594bee=await this[_0x39ac81(0x671)]({'request':_0x21a333,'schema':v,'ClassRef':b,'execute':_0x55047c=>R[_0x39ac81(0x550)](_0x55047c,_0x4cab65)});_0x2af267[_0x39ac81(0x654)](0xc8)[_0x39ac81(0x369)](_0x594bee);})['post'](this['routerPath']('createflow'),..._0x4cca97,async(_0x21c82c,_0x4e2260)=>{const _0x526469=_0xf3ff15;let _0x1c6965=_0x21c82c[_0x526469(0x31f)];f[_0x526469(0x461)](_0x526469(0x431)),f[_0x526469(0x461)]('request\x20body:\x20'),f[_0x526469(0x461)](_0x21c82c[_0x526469(0x31f)]);let _0x56421b=await this[_0x526469(0x671)]({'request':_0x21c82c,'schema':v,'ClassRef':b,'execute':_0x42f4c9=>R['createFlow'](_0x42f4c9,_0x1c6965)});_0x4e2260[_0x526469(0x654)](0xc8)['json'](_0x56421b);})[_0xf3ff15(0x5c7)](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x198)),..._0x4cca97,async(_0x5959ce,_0x197fbd)=>{const _0x5c0bda=_0xf3ff15;let _0x26d4fb=_0x5959ce['body'];f[_0x5c0bda(0x461)](_0x5c0bda(0x3fa)),f[_0x5c0bda(0x461)]('request\x20body:\x20'),f[_0x5c0bda(0x461)](_0x5959ce[_0x5c0bda(0x31f)]),delete _0x26d4fb[_0x5c0bda(0x4e6)],delete _0x26d4fb[_0x5c0bda(0x324)],delete _0x26d4fb[_0x5c0bda(0x3c5)],delete _0x26d4fb['conditions'];let _0x269d18=await this[_0x5c0bda(0x671)]({'request':_0x5959ce,'schema':v,'ClassRef':b,'execute':_0x2140b2=>R[_0x5c0bda(0x33e)](_0x2140b2,_0x26d4fb)});_0x197fbd[_0x5c0bda(0x654)](0xc8)[_0x5c0bda(0x369)](_0x269d18);})['post'](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x464)),..._0x4cca97,async(_0x38bc90,_0x5d73c1)=>{const _0x3d95c6=_0xf3ff15;let _0x448a6f=_0x38bc90[_0x3d95c6(0x31f)];f[_0x3d95c6(0x461)](_0x3d95c6(0x3fa)),f[_0x3d95c6(0x461)](_0x3d95c6(0x728)),f[_0x3d95c6(0x461)](_0x38bc90['body']);let _0x4101ec=await this[_0x3d95c6(0x671)]({'request':_0x38bc90,'schema':v,'ClassRef':b,'execute':_0x158dc8=>R[_0x3d95c6(0x5be)](_0x158dc8,_0x448a6f)});_0x5d73c1[_0x3d95c6(0x654)](0xc8)[_0x3d95c6(0x369)](_0x4101ec);})[_0xf3ff15(0x5c7)](this[_0xf3ff15(0x4f2)]('editflowreply'),..._0x4cca97,async(_0x32b28d,_0x4bd119)=>{const _0x606673=_0xf3ff15;let _0x4cc68d=_0x32b28d['body'];f['verbose'](_0x606673(0x3fa)),f[_0x606673(0x461)](_0x606673(0x728)),f['verbose'](_0x32b28d[_0x606673(0x31f)]);let _0x2f9da9=await this[_0x606673(0x671)]({'request':_0x32b28d,'schema':v,'ClassRef':b,'execute':_0x4e9b6f=>R['editFlowReply'](_0x4e9b6f,_0x4cc68d)});_0x4bd119['status'](0xc8)[_0x606673(0x369)](_0x2f9da9);})['post'](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x29e)),..._0x4cca97,async(_0x46c7a9,_0x272ae1)=>{const _0x5318e9=_0xf3ff15;let _0x1749c9=_0x46c7a9[_0x5318e9(0x31f)];f['verbose']('request\x20received\x20in\x20editFlow'),f[_0x5318e9(0x461)](_0x5318e9(0x728)),f[_0x5318e9(0x461)](_0x46c7a9['body']);let _0x3a5c63=await this[_0x5318e9(0x671)]({'request':_0x46c7a9,'schema':v,'ClassRef':b,'execute':_0x1b774c=>R[_0x5318e9(0x5ce)](_0x1b774c,_0x1749c9)});_0x272ae1[_0x5318e9(0x654)](0xc8)['json'](_0x3a5c63);})[_0xf3ff15(0x5c7)](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x3ce)),..._0x4cca97,async(_0x59cffd,_0x1cd4a2)=>{const _0x2c2e2e=_0xf3ff15;let _0x1f2095=_0x59cffd[_0x2c2e2e(0x31f)];f[_0x2c2e2e(0x461)](_0x2c2e2e(0x57c)),f[_0x2c2e2e(0x461)]('request\x20body:\x20'),f['verbose'](_0x59cffd[_0x2c2e2e(0x31f)]);let _0x5d3c86=await this[_0x2c2e2e(0x671)]({'request':_0x59cffd,'schema':v,'ClassRef':b,'execute':_0x41c8d4=>R[_0x2c2e2e(0x411)](_0x41c8d4,_0x1f2095)});_0x1cd4a2['status'](0xc8)[_0x2c2e2e(0x369)](_0x5d3c86);})[_0xf3ff15(0x5c7)](this[_0xf3ff15(0x4f2)]('editflowcondition'),..._0x4cca97,async(_0x57fc50,_0x16f533)=>{const _0x4e279e=_0xf3ff15;let _0x3e44d8=_0x57fc50['body'];f['verbose'](_0x4e279e(0x65c)),f[_0x4e279e(0x461)](_0x4e279e(0x728)),f[_0x4e279e(0x461)](_0x57fc50[_0x4e279e(0x31f)]);let _0x26c1d3=await this[_0x4e279e(0x671)]({'request':_0x57fc50,'schema':v,'ClassRef':b,'execute':_0x314219=>R[_0x4e279e(0x68d)](_0x314219,_0x3e44d8)});_0x16f533['status'](0xc8)[_0x4e279e(0x369)](_0x26c1d3);})['post'](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x207)),..._0x4cca97,async(_0x51fbd6,_0x163373)=>{const _0x46eb0b=_0xf3ff15;let _0x300d91=_0x51fbd6['body'];f[_0x46eb0b(0x461)](_0x46eb0b(0x69c)),f[_0x46eb0b(0x461)](_0x46eb0b(0x728)),f[_0x46eb0b(0x461)](_0x51fbd6['body']);let _0x2df1ed=await this[_0x46eb0b(0x671)]({'request':_0x51fbd6,'schema':v,'ClassRef':b,'execute':_0x4c1e92=>R[_0x46eb0b(0x427)](_0x4c1e92,_0x300d91)});_0x163373[_0x46eb0b(0x654)](0xc8)[_0x46eb0b(0x369)](_0x2df1ed);})[_0xf3ff15(0x5c7)](this['routerPath'](_0xf3ff15(0x1ea)),..._0x4cca97,async(_0x234fa7,_0x1fe19d)=>{const _0x2230a1=_0xf3ff15;let _0x506465=_0x234fa7[_0x2230a1(0x31f)];f[_0x2230a1(0x461)](_0x2230a1(0x178)),f[_0x2230a1(0x461)](_0x2230a1(0x728)),f[_0x2230a1(0x461)](_0x234fa7[_0x2230a1(0x31f)]);let _0x427f09=await this['dataValidate']({'request':_0x234fa7,'schema':v,'ClassRef':b,'execute':_0x4faeb1=>R[_0x2230a1(0x428)](_0x4faeb1,_0x506465)});_0x1fe19d[_0x2230a1(0x654)](0xc8)[_0x2230a1(0x369)](_0x427f09);})[_0xf3ff15(0x45d)](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x645)),..._0x4cca97,async(_0x2a2d62,_0x2a72dd)=>{const _0x555d92=_0xf3ff15;let _0x3855b7=_0x2a2d62['body'];f[_0x555d92(0x461)]('request\x20received\x20in\x20createFlow'),f[_0x555d92(0x461)](_0x555d92(0x728)),f[_0x555d92(0x461)](_0x2a2d62[_0x555d92(0x31f)]);let _0x446b39=await this[_0x555d92(0x671)]({'request':_0x2a2d62,'schema':v,'ClassRef':b,'execute':_0x224df6=>R[_0x555d92(0x50c)](_0x224df6,_0x3855b7)});_0x2a72dd[_0x555d92(0x654)](0xc8)[_0x555d92(0x369)](_0x446b39);})[_0xf3ff15(0x17f)](this[_0xf3ff15(0x4f2)](_0xf3ff15(0x659)),..._0x4cca97,async(_0x4a72e7,_0x3e8994)=>{const _0x356a6e=_0xf3ff15;f[_0x356a6e(0x461)](_0x356a6e(0x2dc));let _0x5e0870=await this[_0x356a6e(0x671)]({'request':_0x4a72e7,'schema':v,'ClassRef':b,'execute':_0x11ed3a=>R['allFlows'](_0x11ed3a)});_0x3e8994['status'](0xc8)['json'](_0x5e0870);});}},no=T(require('path')),te={};function oo(_0x460e92,_0x2e5448,_0x6a7fbc,_0x32611b){te[_0x460e92]||(te[_0x460e92]={}),te[_0x460e92][_0x2e5448]={'id':_0x2e5448,'response':_0x6a7fbc,'events':_0x32611b};}function a0_0x3537(){const _0x183d5a=['flowConfig','NO_IP','buttons','lowerCase','info',',\x20valor\x20a\x20encontrar:\x20\x22','some','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','WEBHOOK_EVENTS_CHATS_DELETE','REDIS','exists','store','toLocaleString','):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20usuário\x20e\x20contém\x20palavras\x20para\x20pausar\x20o\x20fluxo','defineAuthState','sendMessageWithTyping','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','@broadcast','lastBlockId','presence.update','CONNECTION','VERBOSE','bearer','expression','Início','request\x20received\x20in\x20deleteDoneMessages','send','static','isConnected','removeProfilePicture','):\x20Procurando\x20conversa','updateOne','action',',\x20Expiration\x20Time:\x20','fetchProfilePictureUrl','groups_ignore','sendList','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','mentioned','):\x20delete\x20=\x20true','toggleEphemeral','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','Operador:\x20\x22','):\x20Editando\x20grupo\x20do\x20fluxo...','findOne','):\x20Editando\x20replyOption...','waMonitor','STATUS_INSTANCE','downloadMediaMessage','):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...','toString','nomecompleto','Instance\x20\x22','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','has','CHATS_DELETE','addBlock','blockLogs','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','deleteflow','HH:mm:ss','-version','collections',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','\x1b[0m','getContentType','update','updateProfilePicture','):\x20conversation.waitingPollname','mediatype','CORS_CREDENTIALS','\x20inseridas\x20no\x20banco\x20de\x20dados...','locked','video-cover.png','status','$dbName','waitingPoll_replyOptions','key','textMessage','allflows','getBusinessProfile','WEBHOOK_MAP','request\x20received\x20in\x20editFlowcondition','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo\x20','paused','Media\x20folder\x20path:','toBrazilianNumberFormat','headerString','getStatus','Group\x20not\x20found','fetchMessages',',\x20Segundo\x20Valor:\x20','jsonschema','hostname','DELIVERY_ACK','storePath','toFile','getAutomateSystem','.mp3','website','entries','next_groupId','!cmd_','dataValidate','STORE','/instance','scheduleMessages','render','uazapiSendPoll','WEBHOOK_EVENTS_CONTACTS_UPDATE','getMessage','chats.upsert','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','newStoppedUntil','toLowerCase','qrcode','updateGroupsAddPrivacy','\x0aitem','insert','GUARD','dayjs','TRIAL_INSTANCE_NAME','size','env.KEY\x20!==\x20key','compression','createJid','enabled','readdirSync','getRandomText','cwd','ids','editFlowCondition','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','loadInstance','\x0a*Você\x20respondeu*:\x0a','TEL','findGroups','findGroupInfos','):\x20Editando\x20variável\x20do\x20fluxo...','webhook','evaluateConditionTest','sendAudio','oldToken','pino','https://uazapi-plugin.bubbleapps.io/?url=','Including\x20timestamp\x20in\x20url:\x20','request\x20received\x20in\x20editFlowvariable','test','envYaml','datetime','headers','SERVER_OFFLINE','proto','state','chatModel','SERVER_PORT','updateConversation','conditions','push','):\x20Conversa\x20inserida\x20com\x20sucesso.','query','quoted','express-async-errors','interval\x20não\x20é\x20um\x20número','pop','buttonId','conversation','Subscribed\x20Events:','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20','Erro\x20ao\x20tentar\x20updateCustomFields:\x20','updateGParticipate','WEBHOOK','):\x20Erro\x20ao\x20deletar\x20a\x20conversa\x20','For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.','generateWAMessageFromContent','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','groupParticipantsUpdate','WEBHOOK_EVENTS_CHATS_SET','sections','updateMessage','WEBHOOK_EVENTS_SEND_MESSAGE','sha256','WEBHOOK_EVENTS_QRCODE_UPDATED','MESSAGES_UPDATE','function','processPollUpdateMessage','request\x20received\x20in\x20starFlow','/events/:instance','getMIMEType','unlinkSync','):\x20Procurando\x20mensagens\x20para\x20envio','sign','deleteReplyOption','floor','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','Erro\x20ao\x20aplicar\x20varedit:\x20','DELETED','unavailable','\x5cd+','slice','$set','urlOrBase64','getOwnPropertyNames','webp','description','WEBHOOK_EVENTS_NEW_JWT_TOKEN','groupLeave','):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20','redirect','varedit','Error\x20in\x20scheduleNextCheck:\x20','Authentication\x20error','/wa-connection-update','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','editFlowReply','AUTHENTICATION_TYPE','_doc','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.','request\x20received\x20in\x20deleteConversation','call','chat','created','Erro\x20ao\x20buscar\x20conversas:\x20','http','video','node-mime-types','client','sticker','Erro\x20ao\x20atualizar\x20conversa:\x20','Conexão\x20estabelecida','send.message','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','ignoreGroups','Message\x20not\x20found','deleteMessage','/webhook','match','views','MAX_RECONNECT_ATTEMPTS','createFlow','Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','scheduleSendAudio','fetchInstances','participants','backgroundColor','findGroup','condition','groupToggleEphemeral','exit','?authSource=admin&readPreference=primary&directConnection=true','):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:','):\x20Erro\x20ao\x20alterar\x20fluxo:\x20','addresss','isInteger','messageId','item','user','jsonwebtoken','hex','hbs','Invalid\x20\x22oldToken\x22','DATABASE_CONNECTION_PASSWORD','chatLog','\x1b[36m','request\x20received\x20in\x20updateCustomFields','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','archiveChat','):\x20Criada\x20conversa\x20nova\x20(gotoflow)','Error\x20updating\x20participants','mongodb','isBase64','The\x20global\x20api\x20key\x20must\x20be\x20set','SendScheduleMessage','/instance/create','endsWith','checkAndUpdateChats','/wa-contacts','pollCreationMessageV3','Erro\x20ao\x20editar\x20o\x20bloco:\x20','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','writeFile','GLOBAL','WEBHOOK_EVENTS_PRESENCE_UPDATE','):\x20Criando\x20nova\x20conversa','blockId','getDevice','request\x20body:\x20','data:\x20','join','del','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','The\x20instance\x20is\x20already\x20connected','url','../env.yml','\x1b[30m%s\x1b[0m','waitingPoll_id','QRCODE_UPDATED','setWebhook','^\x5cd+','dbInstance','isJidUser','arraybuffer','/create','_activatedCount','newName','HOST','.jwt','request\x20received\x20in\x20getAutomateSystem','getScheduleMessage','isDirectory','whatsappNumbers','convertedOptions','Error\x20in\x20markMessageAsRead:','Content\x20is\x20required','GROUPS_UPSERT','findGroupInfo','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','dark','Error\x20updating\x20message\x20status:','editConversation','):\x20Erro\x20ao\x20editar\x20a\x20conversa:\x20','saveConversationToDatabase','hGet','):\x20Erro\x20ao\x20editar\x20agentes:\x20','updateFlowConfig','Audio\x20processed','STORE_CONTACTS','editChat','FlowRouter','findWebhook','view\x20engine','authorization','contact_blacklist','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','request\x20received\x20in\x20getFlow','\x1b[1m\x1b[37m','verify','sendButtons','formatBRNumber','including\x20timestamp\x20in\x20url:\x20','processApiRequest','get','PHONE','WEBHOOK_EVENTS_CONTACTS_SET','Instance\x20restarted','10554250lrFrAD','leadInfo','model','base64','logger','deleteInstance','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20','convertToWebP','):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20','Cannot\x20','boolean','addReplyOption','Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.','instanceKeys','lastCondition','DARK','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','leaveGroup','stateConnection','prototype','editflow','deleteDoneMessages','vote','Background\x20color\x20is\x20required','Router','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','groupHandler','fromMe','indexOf','onTime','close','50mb','padEnd','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','createNewConversation','\x1b[41m','}}\x20->\x20\x22','Falha\x20ao\x20deletar\x20mensagens\x20antigas:','buffer','readFile','writeFileSync','messageUpdate','Erro\x20ao\x20alterar\x20o\x20fluxo:\x20','scheduled','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','#000000','API_KEY','readFileSync','waMonit','DOCKER_ENV','\x1b[31m%s\x1b[0m','all','Image\x20path:\x20','role','dbServer','enumerable','order','findMessages','random','repeat','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','open','qrcode.updated','mongoose','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20','SECRET','findFlow','media','prepareWAMessageMedia','composing','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','REDIS_ENABLED','\x22\x20not\x20found','dropCollection','):\x20Going\x20to\x20','scheduleMessage','Unable\x20to\x20leave\x20the\x20group','loadEnv','creds.update','DisconnectReason','saveCreds','data','uazapiDeleteMessage','Fluxo\x20não\x20encontrado','flowStopMinutes','hSet','loadWebhook','SEND_MESSAGE','Type\x20defined\x20as\x20audio','webhookService','formatVCard','fileName','reviver','--version','findById','flowIgnoreGroups','):\x20Erro\x20ao\x20buscar\x20Schedule\x20Messages:','):\x20não\x20encontrou','activatedCount','Variáveis\x20não\x20encontradas:','Por\x20favor,\x20responda\x20à\x20última\x20enquete\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.','METHODS','getflow','groupName','contactHandle','request\x20received\x20in\x20updateFlowConfig','Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','not\x20loaded','message','no.connection','Instance\x20deleted','Read\x20messages\x20fail','markMessageAsRead','):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','context','CONTACTS_UPDATE','https','isFile','_id','createInstance','):\x20Limpando\x20AutomateSystem','/events','saveVariable','CLIENT','@s.whatsapp.net','instanceName','valid','subject','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','extractRegex','editflowvariable','Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão','split','convert','instanceInfo','dbClient','):\x20Edit\x20schedule\x20message...','varedits','):\x20Visualizando\x20AutomateSystem','Fetching\x20business\x20profile','replacer','equal','selectableCount','viewOnceMessageV2','DATABASE_CONNECTION_HOST','/automate','ephemeralMessage','js-yaml','getAllData','delAll','.josn','uuid','API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!','\x1b[40m','scheduleSendText','listMessage','readMessage','stdout','currency','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP:','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20áudio:','output','allContacts','validate','LEVEL','Getting\x20profile\x20with\x20jid:\x20','readMessageBot','AutomateSystem\x20não\x20foi\x20inicializado','\x20-i\x20','pollUpdateMessage','Types','online','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','pre','setContext','LOG','\x1b[37m','updateProfileStatus','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','updateProfileName','toArray','none','remove.instance','notas','https://uazapi.bubbleapps.io/api/1.1/wf/verificar/','toBRL','groups.update','2098pktDoO','processblock','isArray','Close\x20connection','from','object','collection','lastInteraction','whatsappNumber','chats.delete','sort','\x1b[31m','):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD','mediaMessage','notMatchRegex','apirequest','font','parse','Forbidden','writeStore','minutesToClose','-instances','WEBHOOK_EVENTS_MESSAGES_SET','LOG_COLOR','^\x5cd+([-]\x5cd+)*@g.us$','max','header','toDataURL','Getting\x20profile\x20info','\x1b[33m%s\x1b[0m','):\x20tem\x20blocks','pollCreationMessage','):\x20Erro\x20ao\x20editar\x20o\x20chat:\x20','sendReaction','getBase64FromMediaMessage','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','bulkWrite','errorLog','webhookMap','capitalizedWords','selectedOptions','pollCreationMessageKey','fetchChats','options','Archiving\x20chat','No\x20invite\x20code','updateGroupPicture','stderr','\x1b[32m%s\x1b[0m','authState','refused','response','):\x20Erro\x20ao\x20tentar\x20updateCustomFields:\x20','status@broadcast','count','O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.','getOwnPropertyDescriptor','Error\x20updating\x20profile\x20name','Error\x20creating\x20group','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.','@whiskeysockets/baileys','instance.','.\x20Pulando.','WARN','errno','^\x5cd+[\x5c.@\x5cw-]+','!stop','upperCase','connecting','\x20saindo\x20da\x20função','sending','SUCCESS','imagechat','creds','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','processingScheduleMessageId','CREDENTIALS','CHATS_UPDATE','isJidGroup','then','):\x20Editando\x20bloco...','variable','delay','image','EXPIRIN_IN','):\x20teve\x20mudanças\x20chat.archived:\x20','):\x20Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20','messageTimestamp','request\x20received\x20in\x20getConversation','Business\x20profile\x20fetched','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','chatHandle','notEmpty','code','editflowvaredit','atendimentoAberto','width','Font\x20is\x20required','hDel','Audio\x20is\x20base64','updatePrivacySettings','footerText','Internal\x20Server\x20Error','filter','):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot','\x20chats\x20de\x20','):\x20Criando\x20fluxo...','\x1b[44m','messageUpModel','apply','updateCustomFields','numbers','flowStopConversation','poll_id','\x22\x20-\x20NOT\x20CONNECTION','utf-8','createConnection','updateBlock','replaceValue','sendPresenceUpdate','fetchConversation','sendPoll','):\x20Conversas\x20encontradas:','save','generate','authModel','):\x20newFirstValue\x20após\x20replaceVariables:','creation','content','Trying\x20to\x20get\x20business\x20profile','remoteJid','less','Flow\x20não\x20encontrado','Converting\x20image\x20to\x20WebP\x20to\x20sticker','groupSetting','Erro:','values','Error\x20change\x20group\x20name','editScheduleMessage','desativadoFluxoAte','):\x20Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20','updateReadReceiptsPrivacy','false','email','remoteJids','messages','instanceName\x20not\x20provided.','sendCommand','Telefone:\x20','Erro\x20ao\x20deletar\x20a\x20conversa:\x20','length','subjectOwner','replaceVariablesLogs','mediaKey','error_log','newValue','request\x20received\x20in\x20allFlows','mongodb://','Message','editOperator','):\x20Query\x20params:','):\x20Erro\x20ao\x20buscar\x20conversas\x20','3583314rLoLYM','WEBHOOK_GLOBAL_URL','toUpperCase','\x20messages.update.','wuid','allFlows','findOneAndUpdate','type','/wa-message','authentication','reaction','app','*\x0a\x0a','Bloco\x20com\x20ID\x20','group-participants.update','fone','COLOR','Not\x20allowed\x20by\x20CORS','fetchStatusMessage','Erro\x20ao\x20criar\x20o\x20fluxo:\x20','\x20não\x20encontrado','greater','process','SSL_CONF','WEBHOOK_EVENTS_CONTACTS_UPSERT','createClient','buttonText','errors','Connection\x20closed\x20for\x20instance:\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','):\x20Erro\x20ao\x20iniciar\x20fluxo\x20','findByIdAndDelete','Error\x20while\x20deleting\x20message\x20for\x20everyone','getProfileName','):\x20Não\x20achou\x20nenhum\x20flow','\x1b[42m','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','src','finish','reconnectAttempts','load','true','default','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','replaceVariables','SERVER_TYPE','\x1b[34m%s\x1b[0m','):\x20Conversa\x20atualizada\x20em\x20memória','\x20foram\x20adicionados\x20\x22contactname\x22\x20','when','LOG_LEVEL','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','Instance\x20Key\x20from\x20DB:','last_update','start','saveAPI','AppStateSyncKeyData','updateOnlinePrivacy','groupId','presenceSubscribe','body','/instance/fetchInstances','Converted\x20audio\x20deleted','oldValue','secondValue','variables','restartInstance','contactMessage','Type\x20is\x20required','fetchPrivacySettings','groupUpdateDescription','WEBHOOK_EVENTS_MESSAGES_UPSERT','keep-alive','):\x20Enviando\x20texto','events','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','AUTHENTICATION','Deletion\x20failed','INFO','group',',\x20Resultado:\x20','protocolMessage','findIndex','round','contactname','\x1b[30m','):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:','maxActives','new.jwt','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','document','editFlow','BufferJSON','substring','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','TEXT','stopMinutes','Falta\x20informação\x20para\x20a\x20chamada\x20API','flowActive','):\x20Buscando\x20flow...','Fluxos\x20não\x20estão\x20ativados','USER','reorderBlocks','não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','method','replaceVariablesInReplyOptions','CORS','NAME','):\x20Enviando\x20mídia','The\x20\x22','Method\x20not\x20implemented.','formatStatusMessage','remove','axios','ios','\x20foi\x20interrompido\x20pelo\x20usuário.','number','Cache-Control','getClient','CONFIG_SESSION_PHONE_NAME','sendStatus','restrict','deleteOne','lastSend',',\x20saindo.','audio/mp4','DD/MM\x20HH:mm:ss','scheduleSendMedia','CHATS_SET','READ','create\x20-\x20success','delaySecMax','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','request\x20received\x20in\x20updateAgent','json','lastmsg','https://api.ipify.org?format=json','saveTextReply','responsavelid','FULLCHAIN','redisCache','audio/ogg','DATABASE_CONNECTION_USER','groupadd','@g.us','groups.upsert','authService','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20','Error\x20retrieving\x20instance\x20or\x20API\x20Key:','auth','isRunning','out','updateAgent','address','Parando\x20aplicação,\x20atualização\x20recebida','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:','):\x20Enviando\x20áudio','\x1b[46m','\x1b[37m%s\x1b[0m','variablesNotFound','updateLastSeenPrivacy','.png','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','error\x20get\x20vote','):\x20Error\x20processing\x20conditions:\x20','expiration','done','\x20install\x20error:\x20','uncaughtException','status.instance','groupMetadata','CONTACTS_SET','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','updateMany','SERVER_ACK','creds.json','readMessages','AutomateSystem','request\x20received\x20in\x20editConversation','modifiedCount','chats.set','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','.sendDataWebhook-local','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','?timestamp=','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20','LIMIT','useMultiFileAuthState','WEBHOOK_EVENTS_GROUPS_UPDATE','readData','path','isBooleanString','\x20minutos...','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','/wa-groups','groupSettingUpdate','locationMessage','API\x20Key\x20from\x20Request:','where','createConversationforStartFlow','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','notify','getTime','node-cache','connection.update','PROD','title','StartBot','videoMessage','padStart','Bad\x20Request','goToFlow','add','contacts.update','PRODUCTION','Error\x20fetching\x20and\x20updating\x20profile:\x20','connectToWhatsapp','archive','readreceipts','):\x20Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo:\x20','PORT','class-validator','Profile\x20not\x20found','ERROR','):\x20Ler\x20mensagem','groups','bodyString','profilePictureUrl','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','The\x20property\x20cannot\x20be\x20empty','evaluateCondition','\x1b[33m','notContains','lastReceivedMessage','editflowgroup','sem\x20texto\x20na\x20mensagem','pt-BR','Flow\x20already\x20exists','fetchProfile2','leadInfo.desativadoFluxoAte','Error\x20writing\x20file:\x20','sendMessage','and','getDelay','Processing\x20audio','emit','repository','stopConversation','name','refreshToken','):\x20atualização\x20chat:\x20','getPrototypeOf','HeaderType','uazapiSendAudio','empty','env','arrayUnique','configService','last','text/event-stream','https://jsonip.com','params','nome','contactModel','viewOnceMessage','express','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','.mp4','processvaredits','closed','replaceOne','Db\x20Connection','No\x20participants','Logger','limit','waUploadToServer','Schema','buttonMessage','request\x20received\x20in\x20editFlow','):\x20Entrou\x20na\x20função\x20saveReply','unreadcount','unreadCount','sudo\x20apt\x20install\x20-y\x20ffmpeg','mimetype','sendText','):\x20Campos\x20a\x20serem\x20atualizados:','urlencoded','groupDesc','webhookModel','NextBlock','participant','Getting\x20image\x20from\x20url','realVariables','messagesSend','waInstances','owner','command','URL','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','EMAIL:','fullName','editFlowGroup','\x20messages.','uazapiSendText','connected','groupAcceptInvite','Comando\x20desconhecido','lastSendMessage','replaceVariablesInObject','replyOptions','/exit','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','optionName','unlocked','cleaningUp','error','URI','trimmed','Audio\x20converted\x20to\x20mp4','listen','replaceVariablesChat','.sendDataWebhook-global','upsertChats','editFlowVariable','getFlow','GROUP_PARTICIPANTS_UPDATE','applyvaredit','findAndReplace','Image\x20is\x20url','):\x20Modified\x20Query:','findByIdAndUpdate','namespace','initAuthCreds','request\x20received\x20in\x20createFlow','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','updateChatWithMessage','Erro\x20na\x20migração:','):\x20nextBlock.uazapi.name','WA\x20MODULE','catch','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','editedMessage','profile','now','child_process','privacySettings','success','8080','}}\x20->\x20valor\x20não\x20encontrado','pushName','redisEnv','agents','scheduleNextCheck','find','):\x20Deletados\x20','DEBUG','__esModule','48oapzdV','):\x20Mensagem\x20já\x20enviada\x20para\x20','apiName','flowPrefixCommand','badSession','messages.set','TRIAL_AD','fetchProfile','delayMessage','):\x20Enviando\x20localização','instances','CHATS_UPSERT','inviteCode','stack','includes','poll','desc','^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','getMinutes','demote','delete','Error\x20fetching\x20group','Module\x20-\x20ON','):\x20não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','verbose','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','AUTHENTICATION_API_KEY','editflowblock','fetchLatestBaileysVersion','updateParticipant','vcard','AUTHENTICATION_JWT_SECRET','licenca','CORS_METHODS','TYPE','cleanStore','exec','integer','jwt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','rows','assign','imageMessage','API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.','ini','):\x20Criou\x20conversa\x20no\x20startFlow:','Erro\x20ao\x20iniciar\x20fluxo:\x20','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20','AUTOUPDATE','API\x20Key\x20inválida.','groupFetchAllParticipating','isURL','long','Data\x20inválida\x20fornecida','354925BABVWP','/media/','messageSecret','groupInviteCode','eventEmitter','uazapiSendMedia','audioWhatsapp','Error\x20updating\x20profile\x20status','):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20','\x20horas\x20e\x20','Missing\x20global\x20api\x20key','KEY','@redis/client','):\x20customFieldVariables','subjectTime','Temp\x20audio\x20deleted','leadInfo.','):\x20expirationTime:\x20','DB_PREFIX_NAME','optionDescription','toNumber','STORE_CLEANING_TERMINAL','):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20','announce','Not\x20is\x20business\x20profile','REDIS_PREFIX_KEY','uazapiSendContact','userDevicesCache','):\x20Mensagens\x20com\x20status\x20\x22done\x22\x20deletadas\x20com\x20sucesso.','):\x20Alterando\x20fluxo...','):\x20Tentando\x20deletar\x20todas\x20mensagens\x20updates...','documentMessage','deleteMany','revokeInviteCode','delInstanceTime','Invalid\x20format','cors','changeVariables','):\x20Flow\x20desativado','latitude','):\x20Dados\x20recebidos\x20no\x20editFlowGroup:','lean','dbSettings','trim','stopped','delaySecMin','g-t','rowId','local_map','ffmpeg','createConversationforgoToFlow','localWebhook','log','startsWith','isBusiness','messages.update','Converted\x20image\x20deleted','\x1b[1m','stickerMessage','saveChatVariables','charAt','getConversation','hasOwnProperty','messaging-history.set','unhandledRejection','Temp\x20audio\x20path:\x20','setting','Image\x20created','/wa-presence','onWhatsApp','/chat','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','metadata','fetchProfilePicture','pollMessage','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','MESSAGES_UPSERT','qrCode','updatePresence','):\x20Deletando\x20fluxo...','connect','reference','endSession','noConnection','MESSAGES_SET','jid','apikey','chats.update','getLastMessage','tokenId','):\x20Erro\x20ao\x20editar\x20variável\x20do\x20fluxo:\x20','set','\x1b[43m','fromObject','https://','This\x20name\x20','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','Flow\x20iniciado\x20com\x20','pollMessageOnDelete','reconnectTimestamps','groupJid','findConversation','Image\x20is\x20base64','blocks','firstValue','ReplyOption\x20com\x20ID\x20','forEach','\x20mensagens\x20de\x20','customFields','joinGroup','WEBHOOK_EVENTS_MESSAGES_UPDATE','audio','performBulkUpdate','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','logout','routerPath','Erro\x20ao\x20deletar\x20o\x20fluxo:\x20','removeData','67732byVNyi','format','contactsArrayMessage','goNextblock','stopMinutesMaxActives','replyOption','/wa-message-update','lastMessage','available','#ffffff','):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20','messageModel','fetchBusinessProfile','encoding','recording','restart','Not\x20Found','ObjectId','displayName','connectionState','chats','group\x20ignored','removeInstance','deleteFlow','sleep','.X-ABLabel:Celular\x0a','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','OrAnd','SERVER','utf8','matchRegex','contact','):\x20','create','createGroup','):\x20leadInfoVariables','documentWithCaptionMessage','birthtime','mkdirSync','web','convertaudio','insertMany','instance','connectionUpdate','findParticipants','Sending\x20audio\x20whatsapp','remoteJidsRemaining','/wa-chats','):\x20updateResult:','value','messageContextInfo','request\x20received\x20in\x20scheduleMessage','NEW_JWT_TOKEN','\x20contacts','Nenhum\x20chat\x20encontrado\x20para\x20editar.','Error\x20deleting\x20instance\x20from\x20memory.','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','Hash\x20to\x20audio\x20name:\x20','):\x20Buscando\x20conversas...','.TEL;waid=','resetReconnectionVariables','parseInt','contentText','):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20','):\x20encontrado\x20próxima\x20mensagem\x20para\x20','/media','AutomateFunctions','CONTACTS_UPSERT','temp-','Erro\x20ao\x20instalar\x20','eventemitter2','Converting\x20audio\x20to\x20mp4','connectionClosed','console','PLAYED','processConditions','):\x20Iniciando\x20bot...','removed','):\x20Falha\x20ao\x20deletar\x20mensagem:\x20','bateu\x20events','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','profilePicture','generateHash','Já\x20existe\x20fluxo\x20com\x20esse\x20nome','message-up','contacts','END:VCARD','DATABASE_ENABLED','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','):\x20Flow\x20não\x20encontrado','execSync','deleteConversation','ip:\x20','sendWhatsAppAudio','delInstanceFiles','joinGroupValidate','PREFIX_KEY','redis','CORS_ORIGIN','throwAndLogError','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','chrome','connectionStatus','WEBHOOK_EVENTS_CONNECTION_UPDATE','\x1b[36m%s\x1b[0m','Tanto\x20id\x20quanto\x20owner\x20são\x20necessários\x20para\x20criar\x20ou\x20editar\x20um\x20chat.','sendContact','promote','originalUrl','tags','Deleted\x20','):\x20Erro\x20durante\x20a\x20atualização:\x20','sendLocation','The\x20instance\x20needs\x20to\x20be\x20disconnected','prepareMediaMessage','findAndReplaceRegex','sendMedia','caption','groupUpdateSubject','array','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:','):\x20alterando\x20this.AutomateSystem',',\x20lastCondition:\x20','mentions','sendSticker','chatModify','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','saveMediaToFile','processgoToFlow','option','getVariablesChat','Não\x20é\x20possível\x20excluir\x20uma\x20mensagem\x20que\x20está\x20atualmente\x20em\x20processamento.\x20Pause\x20primeiro\x20e\x20espere\x20em\x20torno\x20de\x2020\x20segundos\x20para\x20deletar','):\x20Entrou\x20na\x20função\x20stop','http://checkip.dyndns.org','Full\x20file\x20path:','request\x20received\x20in\x20editFlowgroup','createWebhook','stanzaId','moreLogs','Conversa\x20deletada\x20com\x20sucesso.','\x20}\x0a','waitingPoll_name','contextInfo','uazapi','shift','isLong','phoneNumber','updateGParticipant','RECONNECT_TIME_FRAME','updateStopChat','):\x20Current\x20Time:\x20','statusJidList','\x20não\x20encontrado\x20para\x20atualização.','audio/ogg;\x20codecs=opus','):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20','g.us','196qXuLIA','_p_','sharp','inner','\x20minutos.\x20Será\x20às\x20','eventHandler','verifiedName','app-state-sync-key','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','deleteBlock','CLEANING_INTERVAL','Audio\x20is\x20url','7630956XERuky','Erro\x20de\x20atualização:\x20','segundos','senderKeyDistributionMessage','pollErrorMessage','flattenObject','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem:\x20','presence','archived','longitude','):\x20Ignoring\x20group\x20messages.','WEBHOOK_EVENTS_CHATS_UPDATE','map','prefixCommand','write','spawn','public','Revoke\x20error','stringify','replace','messages.upsert','getHours','warn','cpf','Type\x20not\x20found','STORE_CHATS','splice','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','mediaSticker',',\x20Comparador:\x20','syscall','text','leadInfo.customFields','editFlowBlock','.json','/group','):\x20lastBlockId:\x20','GROUPS_UPDATE','reactionMessage','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','defineProperty','put','post','EVENTS','existsSync','msgRetryCounterCache','string','sendDataWebhook','downloads','editFlowVaredit','-whatsapp-api','router','CONNECTION_UPDATE','keys','audioMessage','fetchContacts','):\x20isVote','notEqual','Original\x20filename:','ENABLED','16FjPKVz','startFlow','PRIVKEY','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','):\x20Conversa\x20está\x20expirada','):\x20Falha\x20ao\x20deletar\x20mensagem.','Output\x20path:\x20','stopIfLastReturnedError','messageHandle','writeData','JWT','Connection','rm\x20-rf\x20','groupCreate','processUazapi','apiResponse','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-f\x20ipod\x20','deleteMessageForEveryone','EMAIL','redis-server','rmSync','DEL_INSTANCE','Error\x20updating\x20privacy\x20settings','ERROR:\x20','/:instanceName','Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','makeCacheableSignalKeyStore','DATABASE','\x20minutos\x20verificará\x20novas\x20mensagens','PRESENCE_UPDATE','pollCreationMessageV2','setHeader','Erro\x20ao\x20editar\x20a\x20conversa:\x20','normalizeMessage','key.','opendirSync','statusMessage','use','Error\x20change\x20group\x20setting','block','variablesToObject','BRL','Atualização:\x20','conversationTimestamp','contacts.upsert','Valor\x20inicial:\x20\x22','4286088ffvahF','groupValidate'];a0_0x3537=function(){return _0x183d5a;};return a0_0x3537();}function io(_0x1cf3a4,_0x308a1a){!te[_0x1cf3a4]||!te[_0x1cf3a4][_0x308a1a]||delete te[_0x1cf3a4][_0x308a1a];}function q(_0x358753,_0x3289bb,_0x2eb8d4){const _0x5d8d49=a0_0x3e22c7;if(!te[_0x358753])return;let _0x103c08=_0x5d8d49(0x729)+JSON[_0x5d8d49(0x5af)](_0x2eb8d4)+'\x0a\x0a';Object[_0x5d8d49(0x2c8)](te[_0x358753])[_0x5d8d49(0x4e9)](_0xd08b9a=>{const _0x404db6=_0x5d8d49;_0xd08b9a[_0x404db6(0x32d)][_0x404db6(0x457)](_0x3289bb)&&_0xd08b9a[_0x404db6(0x273)][_0x404db6(0x5ab)](_0x103c08);});}function ro(){const _0x6cdbde=a0_0x3e22c7;let _0x1435d9={};for(let _0x9a601b in te)_0x1435d9[_0x9a601b]=Object['values'](te[_0x9a601b])[_0x6cdbde(0x5a9)](_0x273f06=>({'id':_0x273f06['id'],'events':_0x273f06['events']}));return _0x1435d9;}var co=require(a0_0x3e22c7(0x21c)),ui=no[a0_0x3e22c7(0x30c)][a0_0x3e22c7(0x72a)](__dirname,a0_0x3e22c7(0x5cd)),Ot=(0x0,Pt[a0_0x3e22c7(0x19c)])(),di=y[a0_0x3e22c7(0x17f)](a0_0x3e22c7(0x32f))[a0_0x3e22c7(0x46b)],pe=[fs,ua,ga[di]];Ot['use'](a0_0x3e22c7(0x536),Pt['default']['static'](ui))[a0_0x3e22c7(0x17f)](a0_0x3e22c7(0x6c5),async(_0x34502e,_0x3157bb)=>{const _0x54009f=a0_0x3e22c7;console[_0x54009f(0x4b3)](_0x54009f(0x544));let _0x5742de=_0x34502e[_0x54009f(0x3e9)][_0x54009f(0x51f)],_0x24a95f=(_0x34502e[_0x54009f(0x6aa)][_0x54009f(0x32d)]||'')[_0x54009f(0x209)](','),_0x529cf8=(0x0,co['v4'])();console[_0x54009f(0x4b3)]('Instance\x20ID:',_0x5742de),console['log'](_0x54009f(0x6b1),_0x24a95f);let _0x272031=y[_0x54009f(0x17f)]('AUTHENTICATION')[_0x54009f(0x1b2)],_0x441c75=_0x34502e['query']['apikey'];if(console[_0x54009f(0x4b3)](_0x54009f(0x3a9),_0x441c75),_0x272031[_0x54009f(0x48a)]!==_0x441c75){console[_0x54009f(0x4b3)](_0x54009f(0x685));try{let _0x2cbfb3=await de[_0x54009f(0x378)]['find'](_0x5742de);if(console[_0x54009f(0x4b3)](_0x54009f(0x317),_0x2cbfb3),!_0x2cbfb3||_0x2cbfb3[_0x54009f(0x4d5)]!==_0x441c75)return console['log'](_0x54009f(0x21d)),_0x3157bb[_0x54009f(0x654)](0x191)[_0x54009f(0x623)](_0x54009f(0x47a));}catch(_0xea005b){return console[_0x54009f(0x41f)](_0x54009f(0x377),_0xea005b),_0x3157bb[_0x54009f(0x654)](0x191)['send'](_0x54009f(0x474));}}if(!await Ye(_0x5742de))return _0x3157bb['status'](0x194)[_0x54009f(0x623)]('Instância\x20não\x20encontrada.');_0x3157bb[_0x54009f(0x5f8)]('Content-Type',_0x54009f(0x3e7)),_0x3157bb[_0x54009f(0x5f8)](_0x54009f(0x358),'no-cache'),_0x3157bb[_0x54009f(0x5f8)](_0x54009f(0x5e4),_0x54009f(0x32b)),_0x3157bb['flushHeaders']();let _0x3bfb75=_0x54009f(0x729)+JSON[_0x54009f(0x5af)]({'info':_0x54009f(0x6ef)})+'\x0a\x0a';_0x3157bb[_0x54009f(0x5ab)](_0x3bfb75),oo(_0x5742de,_0x529cf8,_0x3157bb,_0x24a95f),_0x34502e['on']('close',()=>{const _0x2efd2e=_0x54009f;console[_0x2efd2e(0x4b3)](_0x2efd2e(0x2fe)+_0x5742de),io(_0x5742de,_0x529cf8);});}),Ot[a0_0x3e22c7(0x17f)]('/clients-info',(_0x5946d6,_0x3e6fb0)=>{let _0xe82fbe=ro();_0x3e6fb0['json'](_0xe82fbe);})['get']('/',(_0x35c24c,_0xa7927d)=>{const _0x240dec=a0_0x3e22c7;let _0x1d6cd3=y[_0x240dec(0x17f)](_0x240dec(0x2f9)),_0x162768=_0x1d6cd3&&_0x1d6cd3[_0x240dec(0x36e)][_0x240dec(0x209)]('/')[0x4];if(_0x162768){let _0x27e0e5=encodeURIComponent(_0x240dec(0x4dd)+_0x162768);_0xa7927d['redirect'](_0x240dec(0x69a)+_0x27e0e5);}else _0xa7927d[_0x240dec(0x6da)]('https://uazapi-plugin.bubbleapps.io/');})[a0_0x3e22c7(0x5c6)](a0_0x3e22c7(0x41a),...pe,async(_0x189708,_0x59827c)=>{const _0x4e4767=a0_0x3e22c7;try{console['log'](_0x4e4767(0x644)),_0x59827c['status'](0xc8)[_0x4e4767(0x369)]({'message':_0x4e4767(0x5dc)}),_0x59827c['on'](_0x4e4767(0x308),()=>process[_0x4e4767(0x702)](0x0));}catch(_0x1b1227){console[_0x4e4767(0x41f)](_0x4e4767(0x6df),_0x1b1227),_0x59827c[_0x4e4767(0x654)](0x1f4)[_0x4e4767(0x369)]({'message':'Erro\x20ao\x20encerrar\x20a\x20API'});}})[a0_0x3e22c7(0x5fe)](a0_0x3e22c7(0x673),new ft(y,...pe)['router'],new Rt(fs)[a0_0x3e22c7(0x5d0)])[a0_0x3e22c7(0x5fe)]('/message',new Mt(...pe)[a0_0x3e22c7(0x5d0)])[a0_0x3e22c7(0x5fe)](a0_0x3e22c7(0x4c5),new ot(...pe)[a0_0x3e22c7(0x5d0)])[a0_0x3e22c7(0x5fe)](a0_0x3e22c7(0x5c0),new gt(...pe)[a0_0x3e22c7(0x5d0)])[a0_0x3e22c7(0x5fe)](a0_0x3e22c7(0x6f5),new It(...pe)[a0_0x3e22c7(0x5d0)])[a0_0x3e22c7(0x5fe)](a0_0x3e22c7(0x216),new Dt(...pe)[a0_0x3e22c7(0x5d0)]);var g=class{constructor(..._0x1a9b12){const _0x16b334=a0_0x3e22c7;throw{'status':0x190,'error':_0x16b334(0x3b6),'message':_0x1a9b12[_0x16b334(0x2d6)]>0x0?_0x1a9b12:void 0x0};}},ne=class{constructor(..._0xbd4dde){const _0x29da55=a0_0x3e22c7;throw{'status':0x191,'error':'Unauthorized','message':_0xbd4dde[_0x29da55(0x2d6)]>0x0?_0xbd4dde:void 0x0};}},re=class{constructor(..._0x1046c0){const _0x5615f1=a0_0x3e22c7;throw{'status':0x193,'error':_0x5615f1(0x252),'message':_0x1046c0[_0x5615f1(0x2d6)]>0x0?_0x1046c0:void 0x0};}},x=class{constructor(..._0x269310){const _0x57f214=a0_0x3e22c7;throw{'status':0x194,'error':'Not\x20Found','message':_0x269310[_0x57f214(0x2d6)]>0x0?_0x269310:void 0x0};}},A=class{constructor(..._0x1ee393){const _0x3b7cf4=a0_0x3e22c7;throw{'status':0x1f4,'error':_0x3b7cf4(0x2a6),'message':_0x1ee393[_0x3b7cf4(0x2d6)]>0x0?_0x1ee393:void 0x0};}},ge=require('@whiskeysockets/baileys');async function Es(_0x3a574e){const _0x39d7b1=a0_0x3e22c7;let _0x72a47c=new C(Es['name']),_0x4c72a4=M[_0x39d7b1(0x359)](),_0x4a473e=_0x4c72a4['db'](y[_0x39d7b1(0x17f)](_0x39d7b1(0x5f4))[_0x39d7b1(0x61d)]['DB_PREFIX_NAME']+'-instances')[_0x39d7b1(0x246)](_0x3a574e),_0x673732=async(_0x293cf0,_0x1ce81e)=>{const _0x52d3f8=_0x39d7b1;try{return await _0x4c72a4[_0x52d3f8(0x4cf)](),await _0x4a473e[_0x52d3f8(0x3f2)]({'_id':_0x1ce81e},JSON[_0x52d3f8(0x251)](JSON['stringify'](_0x293cf0,ge[_0x52d3f8(0x33f)][_0x52d3f8(0x211)])),{'upsert':!0x0});}catch{}},_0x34e01f=async _0x491fe9=>{const _0x1da6d9=_0x39d7b1;try{await _0x4c72a4[_0x1da6d9(0x4cf)]();let _0x574e4d=await _0x4a473e[_0x1da6d9(0x635)]({'_id':_0x491fe9}),_0x111cdb=JSON[_0x1da6d9(0x5af)](_0x574e4d);return JSON[_0x1da6d9(0x251)](_0x111cdb,ge[_0x1da6d9(0x33f)][_0x1da6d9(0x1e0)]);}catch{}},_0x121259=async _0x3c9afa=>{const _0x2f0ed1=_0x39d7b1;try{return await _0x4c72a4[_0x2f0ed1(0x4cf)](),await _0x4a473e['deleteOne']({'_id':_0x3c9afa});}catch{}},_0x503dcf=await _0x34e01f(_0x39d7b1(0x289))||(0x0,ge[_0x39d7b1(0x430)])();return{'state':{'creds':_0x503dcf,'keys':{'get':async(_0x2b4c5d,_0x5665f8)=>{const _0x2ebab0=_0x39d7b1;let _0x5e6473={};return await Promise[_0x2ebab0(0x1b7)](_0x5665f8[_0x2ebab0(0x5a9)](async _0x217ea8=>{const _0x327803=_0x2ebab0;let _0x416598=await _0x34e01f(_0x2b4c5d+'-'+_0x217ea8);_0x2b4c5d===_0x327803(0x598)&&_0x416598&&(_0x416598=ge[_0x327803(0x6a2)][_0x327803(0x2de)][_0x327803(0x31b)][_0x327803(0x4dc)](_0x416598)),_0x5e6473[_0x217ea8]=_0x416598;})),_0x5e6473;},'set':async _0x50a556=>{let _0x4ddb2a=[];for(let _0x2bdb8a in _0x50a556)for(let _0x2befee in _0x50a556[_0x2bdb8a]){let _0x58e032=_0x50a556[_0x2bdb8a][_0x2befee],_0x170d5f=_0x2bdb8a+'-'+_0x2befee;_0x4ddb2a['push'](_0x58e032?_0x673732(_0x58e032,_0x170d5f):_0x121259(_0x170d5f));}await Promise['all'](_0x4ddb2a);}}},'saveCreds':async()=>_0x673732(_0x503dcf,_0x39d7b1(0x289))};}var Cs=T(require(a0_0x3e22c7(0x47d))),Ts=T(require(a0_0x3e22c7(0x3af))),$t=require(a0_0x3e22c7(0x27c)),lo=require(a0_0x3e22c7(0x48b)),xt=require(a0_0x3e22c7(0x27c)),_t;function pi(_0xf18052){const _0x38eb9e=a0_0x3e22c7;return _t||(_t=(0x0,lo[_0x38eb9e(0x2fb)])({'url':_0xf18052[_0x38eb9e(0x420)]}),_t[_0x38eb9e(0x4cf)]()),_t;}var ye=class c{constructor(_0x432fc9,_0x2df1eb){const _0x54da08=a0_0x3e22c7;this[_0x54da08(0x442)]=_0x432fc9,this[_0x54da08(0x202)]=_0x2df1eb,this[_0x54da08(0x187)]=new C(c[_0x54da08(0x3dc)]),this['client']=pi(_0x432fc9);}set[a0_0x3e22c7(0x4d0)](_0x360e7a){this['instanceName']=_0x360e7a;}async[a0_0x3e22c7(0x191)](){const _0x4c54d5=a0_0x3e22c7;try{return await this['client'][_0x4c54d5(0x2d3)]([_0x4c54d5(0x5d2),this['redisEnv'][_0x4c54d5(0x555)]+':*']);}catch(_0xceea1){this[_0x4c54d5(0x187)]['error'](_0xceea1);}}async[a0_0x3e22c7(0x5e2)](_0x143d59,_0x2ecfb5){const _0x3bfddd=a0_0x3e22c7;try{let _0x95afc8=JSON['stringify'](_0x2ecfb5,xt['BufferJSON']['replacer']);return await this['client'][_0x3bfddd(0x1d9)](this[_0x3bfddd(0x442)]['PREFIX_KEY']+':'+this[_0x3bfddd(0x202)],_0x143d59,_0x95afc8);}catch(_0x4ff1eb){this['logger'][_0x3bfddd(0x41f)](_0x4ff1eb);}}async[a0_0x3e22c7(0x219)](){const _0x1b37d1=a0_0x3e22c7;try{let _0x28b95f=await this[_0x1b37d1(0x6ec)]['hGetAll'](this[_0x1b37d1(0x442)]['PREFIX_KEY']+':'+this[_0x1b37d1(0x202)]);if(_0x28b95f){for(let _0x3b2d57 in _0x28b95f)Object[_0x1b37d1(0x197)][_0x1b37d1(0x4bd)][_0x1b37d1(0x6e5)](_0x28b95f,_0x3b2d57)&&(_0x28b95f[_0x3b2d57]=JSON[_0x1b37d1(0x251)](_0x28b95f[_0x3b2d57],xt[_0x1b37d1(0x33f)][_0x1b37d1(0x1e0)]));return _0x28b95f;}}catch(_0x23ee90){this[_0x1b37d1(0x187)]['error'](_0x23ee90);}}async[a0_0x3e22c7(0x3a1)](_0x1d9d87){const _0x275f48=a0_0x3e22c7;try{let _0x1b3bab=await this[_0x275f48(0x6ec)][_0x275f48(0x16c)](this[_0x275f48(0x442)][_0x275f48(0x555)]+':'+this[_0x275f48(0x202)],_0x1d9d87);if(_0x1b3bab)return JSON[_0x275f48(0x251)](_0x1b3bab,xt[_0x275f48(0x33f)][_0x275f48(0x1e0)]);}catch(_0x901418){this[_0x275f48(0x187)][_0x275f48(0x41f)](_0x901418);}}async['removeData'](_0x28c255){const _0x16a483=a0_0x3e22c7;try{return await this[_0x16a483(0x6ec)][_0x16a483(0x2a2)](this['redisEnv'][_0x16a483(0x555)]+':'+this[_0x16a483(0x202)],_0x28c255);}catch(_0x1d8d42){this[_0x16a483(0x187)][_0x16a483(0x41f)](_0x1d8d42);}}async['delAll'](_0x8e3e55){const _0x24225a=a0_0x3e22c7;try{return await this['client'][_0x24225a(0x72b)](_0x8e3e55||this[_0x24225a(0x442)][_0x24225a(0x555)]+':'+this[_0x24225a(0x202)]);}catch(_0x5210a9){this[_0x24225a(0x187)]['error'](_0x5210a9);}}};async function vs(_0x3b2ec7,_0x4c21f1){const _0x1121c0=a0_0x3e22c7;let _0x1505a2=new C(vs[_0x1121c0(0x3dc)]),_0x21cd3c=new ye(_0x3b2ec7,_0x4c21f1),_0xe99af2=async(_0x2484e0,_0x439fc5)=>{const _0x4b34e5=_0x1121c0;try{return await _0x21cd3c[_0x4b34e5(0x5e2)](_0x439fc5,_0x2484e0);}catch(_0x11a9a4){return _0x1505a2['error']({'localError':_0x4b34e5(0x5e2),'error':_0x11a9a4});}},_0x1fa802=async _0x270e89=>{const _0x2ab7f4=_0x1121c0;try{return await _0x21cd3c['readData'](_0x270e89);}catch(_0x5371f0){_0x1505a2[_0x2ab7f4(0x41f)]({'readData':'writeData','error':_0x5371f0});return;}},_0x1f1a21=async _0x5c2b63=>{const _0x8941cd=_0x1121c0;try{return await _0x21cd3c[_0x8941cd(0x4f4)](_0x5c2b63);}catch(_0x14be2b){_0x1505a2[_0x8941cd(0x41f)]({'readData':_0x8941cd(0x4f4),'error':_0x14be2b});}},_0x4e6716=await _0x1fa802(_0x1121c0(0x289))||(0x0,$t[_0x1121c0(0x430)])();return{'state':{'creds':_0x4e6716,'keys':{'get':async(_0x189440,_0x3cd54e)=>{const _0x1f2a5c=_0x1121c0;let _0x15fbde={};return await Promise[_0x1f2a5c(0x1b7)](_0x3cd54e[_0x1f2a5c(0x5a9)](async _0x34804f=>{const _0x23f1e5=_0x1f2a5c;let _0x5d4da5=await _0x1fa802(_0x189440+'-'+_0x34804f);_0x189440===_0x23f1e5(0x598)&&_0x5d4da5&&(_0x5d4da5=$t['proto'][_0x23f1e5(0x2de)]['AppStateSyncKeyData']['fromObject'](_0x5d4da5)),_0x15fbde[_0x34804f]=_0x5d4da5;})),_0x15fbde;},'set':async _0x1fdb66=>{const _0xf86698=_0x1121c0;let _0x5cd533=[];for(let _0x312468 in _0x1fdb66)for(let _0x4b7515 in _0x1fdb66[_0x312468]){let _0x4dd2b2=_0x1fdb66[_0x312468][_0x4b7515],_0x25d29a=_0x312468+'-'+_0x4b7515;_0x5cd533[_0xf86698(0x6a8)](_0x4dd2b2?await _0xe99af2(_0x4dd2b2,_0x25d29a):await _0x1f1a21(_0x25d29a));}await Promise[_0xf86698(0x1b7)](_0x5cd533);}}},'saveCreds':async()=>await _0xe99af2(_0x4e6716,'creds')};}var _=T(require('fs')),Lt=require(a0_0x3e22c7(0x21c)),Ut=T(require(a0_0x3e22c7(0x593)));function W(_0x231b71){const _0x6a8aaa=a0_0x3e22c7;if(_0x231b71['viewOnceMessage']||_0x231b71[_0x6a8aaa(0x214)]){let _0x1012e6=_0x231b71[_0x6a8aaa(0x3ec)]?_0x231b71[_0x6a8aaa(0x3ec)]['message']:_0x231b71[_0x6a8aaa(0x214)]['message'];return(0x0,w[_0x6a8aaa(0x64b)])(_0x1012e6);}return _0x231b71[_0x6a8aaa(0x71f)]?_0x6a8aaa(0x71f):_0x231b71[_0x6a8aaa(0x5f7)]?'pollCreationMessageV2':(0x0,w[_0x6a8aaa(0x64b)])(_0x231b71);}var Se=class c{constructor(_0x1c1587,_0x6f3e81,_0x217f43){const _0x265e2c=a0_0x3e22c7;this[_0x265e2c(0x3e5)]=_0x1c1587,this['eventEmitter']=_0x6f3e81,this[_0x265e2c(0x3da)]=_0x217f43,this['AutomateSystem']=null,this[_0x265e2c(0x187)]=new C(c['name']),this[_0x265e2c(0x51f)]={},this[_0x265e2c(0x4b2)]={},this[_0x265e2c(0x196)]={'state':_0x265e2c(0x1a2)},this[_0x265e2c(0x669)]=(0x0,$[_0x265e2c(0x72a)])(Y,_0x265e2c(0x5cd)),this[_0x265e2c(0x5ca)]=new Ts[(_0x265e2c(0x30c))](),this[_0x265e2c(0x49a)]=new Ts[(_0x265e2c(0x30c))](),this['endSession']=!0x1,this[_0x265e2c(0x266)]={'status.instance':_0x265e2c(0x6de),'qrcode.updated':'/wa-qrcode','messages.upsert':'/wa-message','messages.update':_0x265e2c(0x4fb),'send.message':_0x265e2c(0x2ea),'group.upsert':'/wa-groups','group.update':_0x265e2c(0x3a6),'group-participants.update':'/wa-groups','connection.update':_0x265e2c(0x6de),'messages.set':_0x265e2c(0x2ea),'contacts.set':_0x265e2c(0x71e),'contacts.upsert':_0x265e2c(0x71e),'contacts.update':_0x265e2c(0x71e),'presence.update':_0x265e2c(0x4c3),'chats.set':_0x265e2c(0x524),'chats.update':_0x265e2c(0x524),'chats.upsert':_0x265e2c(0x524),'chats.delete':_0x265e2c(0x524)},this[_0x265e2c(0x309)]=0x0,this[_0x265e2c(0x4e2)]=[],this[_0x265e2c(0x6f8)]=0xf,this[_0x265e2c(0x589)]=0x7530,this[_0x265e2c(0x379)]=!0x1,this['chatHandle']={'chats.upsert':async(_0x4a6210,_0x231b9a)=>{const _0x4ec372=_0x265e2c;let _0x23fdfc=await this[_0x4ec372(0x3da)]['chat'][_0x4ec372(0x445)]({'where':{'owner':this['instance']['wuid']}}),_0x3a57d5=[];for await(let _0x33f886 of _0x4a6210)_0x23fdfc[_0x4ec372(0x445)](_0x5d544d=>_0x5d544d['id']===_0x33f886['id'])||_0x3a57d5[_0x4ec372(0x6a8)]({'id':_0x33f886['id'],'owner':this[_0x4ec372(0x51f)][_0x4ec372(0x2e6)],'group':_0x33f886['id'][_0x4ec372(0x71c)](_0x4ec372(0x373)),'name':_0x33f886[_0x4ec372(0x3dc)]||_0x33f886[_0x4ec372(0x507)]||null,'contactname':null,'lastmsg':_0x33f886[_0x4ec372(0x604)]&&_0x33f886[_0x4ec372(0x604)][_0x4ec372(0x63b)]()[_0x4ec372(0x2d6)]<0xd?_0x33f886['conversationTimestamp']*0x3e8:_0x33f886[_0x4ec372(0x604)]||null,'archived':_0x33f886['archived']||!0x1,'unreadcount':_0x33f886['unreadCount']||0x0});await this['sendDataWebhook']('chats.upsert',_0x3a57d5);},'chats.update':async(_0x26be13,_0x49476e)=>{const _0x66bf98=_0x265e2c;for(let _0x3235a1 of _0x26be13){let _0xa995b7={'id':_0x3235a1['id'],'owner':this[_0x66bf98(0x51f)]['wuid'],'group':_0x3235a1['id']['endsWith'](_0x66bf98(0x373)),'name':_0x3235a1[_0x66bf98(0x3dc)]||_0x3235a1[_0x66bf98(0x507)],'archived':_0x3235a1[_0x66bf98(0x5a5)]},_0x58073f=!0x1,_0x5c685a={'id':_0x3235a1['id'],'owner':this[_0x66bf98(0x51f)][_0x66bf98(0x2e6)]},_0x3f1b95={};_0xa995b7['archived']!=null&&(this[_0x66bf98(0x187)][_0x66bf98(0x461)](this[_0x66bf98(0x202)]+'\x20('+this['instance'][_0x66bf98(0x2e6)]+_0x66bf98(0x295)+_0x3235a1['archived']),_0x58073f=!0x0,_0x3f1b95[_0x66bf98(0x5a5)]=_0x3235a1[_0x66bf98(0x5a5)]),_0x3235a1[_0x66bf98(0x3dc)]!=null&&(this[_0x66bf98(0x187)]['verbose'](this[_0x66bf98(0x202)]+'\x20('+this[_0x66bf98(0x51f)]['wuid']+'):\x20teve\x20mudanças\x20chat.name:\x20'+_0x3235a1[_0x66bf98(0x3dc)]),_0x58073f=!0x0,_0x3f1b95[_0x66bf98(0x3dc)]=_0x3235a1[_0x66bf98(0x3dc)]),_0x3235a1[_0x66bf98(0x507)]!=null&&(this[_0x66bf98(0x187)][_0x66bf98(0x461)](this[_0x66bf98(0x202)]+'\x20('+this[_0x66bf98(0x51f)][_0x66bf98(0x2e6)]+'):\x20teve\x20mudanças\x20chat.displayName:\x20'+_0x3235a1[_0x66bf98(0x507)]),_0x58073f=!0x0,_0x3f1b95[_0x66bf98(0x3dc)]=_0x3235a1[_0x66bf98(0x507)]);let _0x74de5e;_0x58073f&&_0x49476e['ENABLED']&&(_0x74de5e=await D['findOneAndUpdate'](_0x5c685a,{'$set':_0x3f1b95},{'new':!0x0})),_0x74de5e&&q(this[_0x66bf98(0x202)],_0x66bf98(0x509),{'chat':_0x74de5e});}},'chats.delete':async _0x4ef0ba=>{const _0x119985=_0x265e2c;await this[_0x119985(0x5cc)](_0x119985(0x249),[..._0x4ef0ba]);}},this[_0x265e2c(0x1ec)]={'contacts.upsert':async(_0x48bf22,_0x1657b5)=>{const _0xaaece7=_0x265e2c;let _0x4fe524=await this[_0xaaece7(0x3da)][_0xaaece7(0x514)][_0xaaece7(0x445)]({'where':{'owner':this[_0xaaece7(0x51f)][_0xaaece7(0x2e6)]}}),_0x4017a1=[];for await(let _0x12b0a3 of _0x48bf22)_0x4fe524[_0xaaece7(0x445)](_0x42092b=>_0x42092b['id']===_0x12b0a3['id'])||_0x4017a1[_0xaaece7(0x6a8)]({'id':_0x12b0a3['id'],'pushName':_0x12b0a3?.[_0xaaece7(0x3dc)]||_0x12b0a3?.['verifiedName'],'owner':this[_0xaaece7(0x51f)][_0xaaece7(0x2e6)]});await this[_0xaaece7(0x5cc)](_0xaaece7(0x605),_0x4017a1),await this[_0xaaece7(0x3da)][_0xaaece7(0x514)][_0xaaece7(0x680)](_0x4017a1,_0x1657b5[_0xaaece7(0x5d8)]);let _0x1a59c4=[];for(let _0x57a1af of _0x4017a1){let [_0x4372b5,_0x4f9f58]=await Promise[_0xaaece7(0x1b7)]([this[_0xaaece7(0x546)](_0x57a1af['id']),(await this['getStatus'](_0x57a1af['id']))[_0xaaece7(0x654)]]);_0x1a59c4[_0xaaece7(0x6a8)]({..._0x57a1af,'profilePictureUrl':_0x4372b5['profilePictureUrl'],'status':_0x4f9f58});}await this[_0xaaece7(0x3da)]['contact'][_0xaaece7(0x64c)](_0x1a59c4,_0x1657b5['ENABLED']),await this[_0xaaece7(0x71d)]();},'contacts.update':async(_0xf66e2f,_0x308bd2)=>{const _0x340e15=_0x265e2c;let _0x37a52b=[];for await(let _0x523bde of _0xf66e2f)_0x37a52b[_0x340e15(0x6a8)]({'id':_0x523bde['id'],'pushName':_0x523bde?.[_0x340e15(0x3dc)]??_0x523bde?.[_0x340e15(0x597)],'profilePictureUrl':(await this[_0x340e15(0x546)](_0x523bde['id']))['profilePictureUrl'],'owner':this['instance'][_0x340e15(0x2e6)]});await this[_0x340e15(0x5cc)]('contacts.update',_0x37a52b);}},this[_0x265e2c(0x5e1)]={'messaging-history.set':async({messages:_0x1c973e,chats:_0x5475de,isLatest:_0x3e8f1c},_0x35ce1c)=>{const _0x5b6ebc=_0x265e2c;if(_0x3e8f1c){let _0x4d2aa0=await Promise[_0x5b6ebc(0x1b7)](_0x5475de[_0x5b6ebc(0x5a9)](async _0x2f1f62=>({'id':_0x2f1f62['id'],'owner':this['instance']['wuid'],'group':_0x2f1f62['id'][_0x5b6ebc(0x71c)](_0x5b6ebc(0x373)),'name':_0x2f1f62[_0x5b6ebc(0x3dc)]||_0x2f1f62[_0x5b6ebc(0x507)]||null,'contactname':null,'imagechat':(await this['profilePicture'](_0x2f1f62['id']))[_0x5b6ebc(0x3c7)],'lastmsg':_0x2f1f62[_0x5b6ebc(0x604)]&&_0x2f1f62[_0x5b6ebc(0x604)]['toString']()[_0x5b6ebc(0x2d6)]<0xd?_0x2f1f62['conversationTimestamp']*0x3e8:_0x2f1f62[_0x5b6ebc(0x604)]||null,'archived':_0x2f1f62[_0x5b6ebc(0x5a5)]||!0x1,'unreadcount':_0x2f1f62[_0x5b6ebc(0x3fd)]||0x0})));await this[_0x5b6ebc(0x5cc)](_0x5b6ebc(0x397),_0x4d2aa0),await this[_0x5b6ebc(0x426)](_0x4d2aa0,_0x35ce1c),await this['checkAndUpdateChats']();}let _0x5ca830=[],_0x5b05d6=Date[_0x5b6ebc(0x43b)]()-0x7*0x18*0x3c*0x3c*0x3e8;for await(let [,_0x4edec6]of Object[_0x5b6ebc(0x66e)](_0x1c973e)){if(_0x4edec6['message']?.[_0x5b6ebc(0x334)]||_0x4edec6[_0x5b6ebc(0x1f0)]?.[_0x5b6ebc(0x5a0)]||!_0x4edec6[_0x5b6ebc(0x1f0)]||_0x4edec6[_0x5b6ebc(0x657)][_0x5b6ebc(0x2c2)]===_0x5b6ebc(0x275)||(Cs['default'][_0x5b6ebc(0x586)](_0x4edec6?.['messageTimestamp'])&&(_0x4edec6[_0x5b6ebc(0x297)]=_0x4edec6[_0x5b6ebc(0x297)]?.[_0x5b6ebc(0x493)]()),_0x4edec6[_0x5b6ebc(0x297)]&&_0x4edec6[_0x5b6ebc(0x297)][_0x5b6ebc(0x63b)]()[_0x5b6ebc(0x2d6)]<0xd&&(_0x4edec6[_0x5b6ebc(0x297)]=_0x4edec6[_0x5b6ebc(0x297)]*0x3e8),_0x4edec6['messageTimestamp']<_0x5b05d6))continue;let {message_normalized:_0x154df8}=this['normalizeMessage'](_0x4edec6[_0x5b6ebc(0x1f0)],W(_0x4edec6[_0x5b6ebc(0x1f0)]),null);_0x5ca830['push']({'key':_0x4edec6['key'],'pushName':_0x4edec6[_0x5b6ebc(0x441)],'participant':_0x4edec6[_0x5b6ebc(0x406)],'message':{..._0x4edec6[_0x5b6ebc(0x1f0)]},'messageType':W(_0x4edec6[_0x5b6ebc(0x1f0)]),'message_normalized':{'key':_0x4edec6[_0x5b6ebc(0x657)],'pushName':_0x4edec6['pushName'],'messageTimestamp':_0x4edec6[_0x5b6ebc(0x297)],..._0x154df8},'messageTimestamp':_0x4edec6[_0x5b6ebc(0x297)],'owner':this[_0x5b6ebc(0x51f)]['wuid']});}_0x35ce1c['ENABLED']&&_0x5ca830['length']>0x0&&(this[_0x5b6ebc(0x187)]['verbose'](this[_0x5b6ebc(0x202)]+'\x20('+this[_0x5b6ebc(0x51f)][_0x5b6ebc(0x2e6)]+'):\x20'+_0x5ca830[_0x5b6ebc(0x2d6)]+_0x5b6ebc(0x4ea)+this[_0x5b6ebc(0x51f)]['wuid']+_0x5b6ebc(0x651)),await this['repository'][_0x5b6ebc(0x1f0)][_0x5b6ebc(0x680)]([..._0x5ca830],_0x35ce1c[_0x5b6ebc(0x5d8)])),this['sendDataWebhook'](_0x5b6ebc(0x44e),[..._0x5ca830]),_0x1c973e=void 0x0;},'messages.upsert':async({messages:_0x1c4ca6,type:_0x5f5582},_0x5cacef)=>{const _0x417f7b=_0x265e2c;let _0xd973c=_0x1c4ca6[0x0];if(_0x5f5582!==_0x417f7b(0x3ad)||!_0xd973c?.[_0x417f7b(0x1f0)]||_0xd973c['message']?.[_0x417f7b(0x334)]||_0xd973c[_0x417f7b(0x1f0)][_0x417f7b(0x5a0)]||_0xd973c[_0x417f7b(0x657)][_0x417f7b(0x2c2)]===_0x417f7b(0x275))return;let _0x53f19a=null,_0x3e40f0=null;try{_0x53f19a=await this[_0x417f7b(0x6c3)](_0xd973c),_0x3e40f0=_0x53f19a?_0x53f19a[_0x417f7b(0x72a)](','):null;}catch(_0xfbc4ca){this['logger'][_0x417f7b(0x461)](this[_0x417f7b(0x202)]+'\x20('+this['instance'][_0x417f7b(0x2e6)]+_0x417f7b(0x515)+_0xfbc4ca[_0x417f7b(0x1f0)]),_0x3e40f0=_0x417f7b(0x386);}if(this[_0x417f7b(0x6ec)]['sendPresenceUpdate'](_0x417f7b(0x6cf)),Cs[_0x417f7b(0x30c)]['isLong'](_0xd973c[_0x417f7b(0x297)])&&(_0xd973c[_0x417f7b(0x297)]=_0xd973c[_0x417f7b(0x297)]?.[_0x417f7b(0x493)]()),this['localWebhook']?.[_0x417f7b(0x62c)]&&_0xd973c[_0x417f7b(0x657)][_0x417f7b(0x2c2)]['includes'](_0x417f7b(0x373))){this[_0x417f7b(0x187)][_0x417f7b(0x461)](_0x417f7b(0x50a));return;}_0xd973c[_0x417f7b(0x297)]&&_0xd973c['messageTimestamp'][_0x417f7b(0x63b)]()[_0x417f7b(0x2d6)]<0xd&&(_0xd973c[_0x417f7b(0x297)]=_0xd973c[_0x417f7b(0x297)]*0x3e8);let _0x3efec2=_0xd973c['message'],{messageContent:_0x370731,message_normalized:_0x5ad823}=this[_0x417f7b(0x5fa)](_0x3efec2,W(_0xd973c['message']),_0x3e40f0);_0x370731||console[_0x417f7b(0x41f)]('Mensagem\x20não\x20suportada');let _0x1b57e4={'key':_0xd973c[_0x417f7b(0x657)],'pushName':_0xd973c[_0x417f7b(0x441)],'message':{..._0xd973c[_0x417f7b(0x1f0)]},'messageType':W(_0xd973c[_0x417f7b(0x1f0)]),'message_normalized':{'key':_0xd973c['key'],'pushName':_0xd973c[_0x417f7b(0x441)],'messageTimestamp':_0xd973c['messageTimestamp'],'source':(0x0,w[_0x417f7b(0x727)])(_0xd973c[_0x417f7b(0x657)]['id']),..._0x5ad823},'messageTimestamp':_0xd973c['messageTimestamp'],'owner':this[_0x417f7b(0x51f)][_0x417f7b(0x2e6)]};this['logger'][_0x417f7b(0x4b3)](_0x1b57e4),await this[_0x417f7b(0x3da)]['message']['insert']([_0x1b57e4],_0x5cacef[_0x417f7b(0x5d8)]),await this[_0x417f7b(0x5cc)](_0x417f7b(0x5b1),_0x1b57e4),q(this[_0x417f7b(0x202)],_0x417f7b(0x2d1),{'message':_0x1b57e4}),_0xd973c[_0x417f7b(0x657)][_0x417f7b(0x2c2)]!==_0x417f7b(0x275)&&await this[_0x417f7b(0x433)](_0x5cacef,_0x1b57e4,_0x417f7b(0x4cb));},'messages.update':async(_0x995d51,_0x454d58)=>{const _0x1be2f2=_0x265e2c;let _0x3c561c={0x0:_0x1be2f2(0x3c3),0x1:'PENDING',0x2:_0x1be2f2(0x391),0x3:_0x1be2f2(0x668),0x4:_0x1be2f2(0x364),0x5:'PLAYED'};for await(let {key:_0x27428e,update:_0x377651}of _0x995d51){if(this[_0x1be2f2(0x4b2)]?.[_0x1be2f2(0x62c)]&&_0x27428e[_0x1be2f2(0x2c2)][_0x1be2f2(0x457)](_0x1be2f2(0x373))){this['logger']['verbose']('group\x20ignored');return;}if(_0x27428e[_0x1be2f2(0x2c2)]!=='status@broadcast'){let _0x364e02=Date[_0x1be2f2(0x43b)](),_0xeb6fff;_0x377651[_0x1be2f2(0x1f0)]===null&&_0x377651[_0x1be2f2(0x654)]===void 0x0?_0xeb6fff=_0x1be2f2(0x6ce):_0xeb6fff=_0x3c561c[_0x377651['status']];let _0x49a3f0=_0x27428e['remoteJid'][_0x1be2f2(0x5b0)](/:\d{1,2}@/g,'@'),_0x560baf={..._0x27428e,'remoteJid':_0x49a3f0,'status':_0xeb6fff,'datetime':_0x364e02,'owner':this[_0x1be2f2(0x51f)][_0x1be2f2(0x2e6)]};await this[_0x1be2f2(0x5cc)]('messages.update',_0x560baf),await this['repository'][_0x1be2f2(0x1ad)][_0x1be2f2(0x680)]([_0x560baf],_0x454d58['ENABLED']),await this[_0x1be2f2(0x6bd)](_0x27428e,_0x49a3f0,_0x560baf);}}}},this[_0x265e2c(0x19e)]={'groups.upsert':_0x259992=>{const _0x1d9498=_0x265e2c;this[_0x1d9498(0x5cc)](_0x1d9498(0x374),_0x259992);},'groups.update':_0x100cc0=>{const _0x53b4aa=_0x265e2c;this[_0x53b4aa(0x5cc)](_0x53b4aa(0x23f),_0x100cc0);},'group-participants.update':_0x57eb1b=>{const _0x5260c5=_0x265e2c;this[_0x5260c5(0x5cc)]('group-participants.update',_0x57eb1b);}},this[_0x265e2c(0x6c3)]=async _0x3b2a8c=>{const _0x1f3a2e=_0x265e2c;if(_0x3b2a8c[_0x1f3a2e(0x1f0)]?.[_0x1f3a2e(0x22e)]){let _0x2b8a69=await this[_0x1f3a2e(0x678)](_0x3b2a8c[_0x1f3a2e(0x1f0)][_0x1f3a2e(0x22e)][_0x1f3a2e(0x269)],!0x0);if(_0x2b8a69){let _0x3da483=_0x2b8a69[_0x1f3a2e(0x657)][_0x1f3a2e(0x19f)]?this[_0x1f3a2e(0x51f)][_0x1f3a2e(0x2e6)]+_0x1f3a2e(0x201):_0x2b8a69[_0x1f3a2e(0x657)][_0x1f3a2e(0x406)]||_0x2b8a69[_0x1f3a2e(0x657)][_0x1f3a2e(0x2c2)],_0x4984fb=_0x2b8a69[_0x1f3a2e(0x657)]['id'],_0x4f9249=_0x2b8a69[_0x1f3a2e(0x1f0)],_0x82e94=Buffer['from'](_0x4f9249[_0x1f3a2e(0x527)][_0x1f3a2e(0x481)][_0x1f3a2e(0x63b)](_0x1f3a2e(0x70c)),'hex'),_0x2d308c=(0x0,w['decryptPollVote'])(_0x3b2a8c['message'][_0x1f3a2e(0x22e)]['vote'],{'pollCreatorJid':_0x3da483,'pollMsgId':_0x4984fb,'pollEncKey':_0x82e94,'voterJid':_0x3b2a8c[_0x1f3a2e(0x657)][_0x1f3a2e(0x19f)]?this[_0x1f3a2e(0x51f)][_0x1f3a2e(0x2e6)]+_0x1f3a2e(0x201):_0x3b2a8c[_0x1f3a2e(0x657)][_0x1f3a2e(0x2c2)][_0x1f3a2e(0x71c)](_0x1f3a2e(0x590))?_0x3b2a8c['key'][_0x1f3a2e(0x406)]:_0x3b2a8c['key'][_0x1f3a2e(0x2c2)]}),_0x423599=[],_0x41e85b=_0x2d308c[_0x1f3a2e(0x268)]['map'](_0x586a4a=>Buffer[_0x1f3a2e(0x244)](_0x586a4a)['toString'](_0x1f3a2e(0x70c)));for(let {optionName:_0xbcf2c8}of _0x4f9249['pollCreationMessage']?.['options']||_0x4f9249[_0x1f3a2e(0x71f)]?.['options']||_0x4f9249['pollCreationMessageV2']?.[_0x1f3a2e(0x26b)])_0x41e85b['indexOf']((0x0,w[_0x1f3a2e(0x6bf)])(Buffer[_0x1f3a2e(0x244)](_0xbcf2c8))[_0x1f3a2e(0x63b)](_0x1f3a2e(0x70c)))>-0x1&&_0x423599[_0x1f3a2e(0x6a8)](_0xbcf2c8);return _0x423599;}}return null;},this[_0x265e2c(0x5fa)]=(_0x1f9da2,_0x1ffec1,_0x3b21e5)=>{const _0x28a53f=_0x265e2c;let _0x1fe583=_0x1ffec1?_0x1f9da2[_0x1ffec1]:void 0x0,_0x58a7a0={},_0x3d5b20=null,_0x3348ae=null,_0x1951cc=null;if(_0x1f9da2['viewOnceMessageV2']?_0x1fe583=_0x1f9da2[_0x28a53f(0x214)][_0x28a53f(0x1f0)][_0x1ffec1]:_0x1f9da2[_0x28a53f(0x3ec)]?_0x1fe583=_0x1f9da2[_0x28a53f(0x3ec)][_0x28a53f(0x1f0)][_0x1ffec1]:_0x1f9da2[_0x28a53f(0x217)]?_0x1fe583=_0x1f9da2[_0x28a53f(0x217)]['message'][_0x1ffec1]:_0x1f9da2[_0x28a53f(0x439)]?.[_0x28a53f(0x1f0)]?.[_0x28a53f(0x334)]?.['editedMessage']?(_0x3d5b20=_0x1f9da2[_0x28a53f(0x439)][_0x28a53f(0x1f0)][_0x28a53f(0x334)][_0x28a53f(0x657)]['id'],_0x1f9da2[_0x28a53f(0x439)]['message']['protocolMessage'][_0x28a53f(0x439)][_0x28a53f(0x6b0)]?_0x1fe583=_0x1f9da2[_0x28a53f(0x439)]['message']['protocolMessage'][_0x28a53f(0x439)]['conversation']:_0x1f9da2[_0x28a53f(0x439)][_0x28a53f(0x1f0)][_0x28a53f(0x334)][_0x28a53f(0x439)][_0x28a53f(0x473)]?_0x1fe583=_0x1f9da2[_0x28a53f(0x439)]['message'][_0x28a53f(0x334)][_0x28a53f(0x439)][_0x28a53f(0x473)][_0x28a53f(0x56a)]:_0x1f9da2[_0x28a53f(0x439)][_0x28a53f(0x1f0)][_0x28a53f(0x334)][_0x28a53f(0x439)][_0x28a53f(0x3b4)]?_0x1fe583=_0x1f9da2[_0x28a53f(0x439)][_0x28a53f(0x1f0)][_0x28a53f(0x334)][_0x28a53f(0x439)][_0x28a53f(0x3b4)]['caption']:_0x1f9da2[_0x28a53f(0x439)][_0x28a53f(0x1f0)][_0x28a53f(0x334)][_0x28a53f(0x439)][_0x28a53f(0x519)]?_0x1fe583=_0x1f9da2['editedMessage']['message'][_0x28a53f(0x334)][_0x28a53f(0x439)]['documentWithCaptionMessage']['message']['documentMessage'][_0x28a53f(0x56a)]:_0x1fe583=_0x1f9da2[_0x28a53f(0x439)][_0x28a53f(0x1f0)]['protocolMessage'][_0x28a53f(0x439)]):_0x1fe583=_0x1f9da2[_0x1ffec1],!_0x1ffec1||!_0x1fe583){console['error']('Unknown\x20message\x20type\x20encountered',_0x1f9da2);return;}_0x1f9da2[_0x1ffec1]?.[_0x28a53f(0x583)]?.['stanzaId']&&_0x1f9da2[_0x1ffec1]?.[_0x28a53f(0x583)]?.['quotedMessage']&&(_0x3348ae=_0x1f9da2[_0x1ffec1][_0x28a53f(0x583)][_0x28a53f(0x57e)]),_0x1f9da2['reactionMessage']&&(_0x1951cc=_0x1f9da2['reactionMessage'][_0x28a53f(0x657)]['id']);let _0x1bb82f;if(_0x1fe583&&typeof _0x1fe583==_0x28a53f(0x245)&&_0x28a53f(0x269)in _0x1fe583&&({pollCreationMessageKey:_0x1bb82f}=_0x1fe583),_0x1ffec1==='documentWithCaptionMessage'){let _0x53d1d5=_0x1fe583?.[_0x28a53f(0x1f0)]?.[_0x28a53f(0x49e)];_0x53d1d5&&(_0x1fe583=_0x53d1d5);}if(_0x1ffec1==='pollCreationMessage'||_0x1ffec1===_0x28a53f(0x5f7)||_0x1ffec1===_0x28a53f(0x71f)){let _0x2cbdd9=_0x1fe583[_0x28a53f(0x26b)][_0x28a53f(0x5a9)](_0x3673a9=>_0x3673a9[_0x28a53f(0x41c)])[_0x28a53f(0x72a)]('|');_0x58a7a0[_0x28a53f(0x161)]=_0x2cbdd9;}let _0x17bf2f=_0x1fe583[_0x28a53f(0x3dc)]||_0x1fe583[_0x28a53f(0x56a)]||_0x1fe583[_0x28a53f(0x6b0)]||_0x1fe583[_0x28a53f(0x507)];if(_0x1fe583['vcard']){let _0x287485=this['formatVCard'](JSON[_0x28a53f(0x5af)](_0x1fe583[_0x28a53f(0x467)],null,0x2));_0x17bf2f=_0x17bf2f+'\x0a'+_0x287485;}if(_0x1fe583){let {displayName:_0x28cd4e,vcard:_0x284bf4,contactVcard:_0x3648c9,name:_0x38f047,caption:_0xfc45e4,conversation:_0x44aaab,pollCreationMessageKey:_0x47ad0b,footerText:_0xf829af,contentText:_0x386f92,pageCount:_0x43bf9c,headerType:_0x59b7f5,isAvatar:_0x1cae43,isAnimated:_0x42c68d,fallbackLc:_0x33bf62,fallbackLg:_0x47b432,namespace:_0x4c136a,elementName:_0xe8e751,localizableParams:_0x4dc850,viewOnce:_0x5cd45b,height:_0x391d42,width:_0x393219,key:_0x2ee7fd,firstScanLength:_0x55cd3d,firstScanSidecar:_0x164613,gifPlayback:_0x2c5880,gifAttribution:_0x555078,midQualityFileSha256:_0x7240bf,scansSidecar:_0x284c2f,streamingSidecar:_0x4ade2b,thumbnailHeight:_0x216403,thumbnailWidth:_0x2e0ab2,thumbnailEncSha256:_0x3caa50,thumbnailDirectPath:_0x406550,canonicalUrl:_0x49741e,matchedText:_0x23cff9,previewType:_0x48101e,thumbnailSha256:_0x1c3012,deviceListMetadataVersion:_0x544c6c,inviteLinkGroupTypeV2:_0x54543a,interactiveAnnotations:_0x373c44,scanLengths:_0x2d625d,jpegThumbnail:_0x27a7fa,url:_0xdf15c5,mediaKeyTimestamp:_0x1850ae,waveform:_0x473c69,stickerSentTs:_0x27b769,firstFrameLength:_0x26b6b1,fileEncSha256:_0x38c56f,contextInfo:_0x1184e2,firstFrameSidecar:_0x4dbc63,directPath:_0x41fd44,fileSha256:_0x20c571,mediaKey:_0x5e4265,senderTimestampMs:_0x27ebec,..._0x24fe6d}=_0x1fe583;typeof _0x1fe583=='string'?_0x58a7a0={'text':_0x1fe583,'type':_0x1ffec1||_0x28a53f(0x6b0),..._0x3d5b20&&{'edited':_0x3d5b20},..._0x3348ae&&{'quoted':_0x3348ae},..._0x1951cc&&{'reaction':_0x1951cc}}:_0x58a7a0={'text':_0x17bf2f,..._0x24fe6d,..._0x1ffec1===_0x28a53f(0x22e)?{'poll_id':_0x1fe583['pollCreationMessageKey']['id'],'vote':_0x3b21e5}:{},'type':_0x1ffec1,..._0x3d5b20&&{'edited':_0x3d5b20},..._0x3348ae&&{'quoted':_0x3348ae},..._0x1951cc&&{'reaction':_0x1951cc},...(_0x1ffec1===_0x28a53f(0x25f)||_0x1ffec1===_0x28a53f(0x5f7)||_0x1ffec1===_0x28a53f(0x71f))&&{'convertedOptions':_0x58a7a0['convertedOptions']}};}return{'messageType':_0x1ffec1,'messageContent':_0x1fe583,'message_normalized':_0x58a7a0};},this[_0x265e2c(0x28b)]=null,this[_0x265e2c(0x35e)]=0x0,(this[_0x265e2c(0x46c)](),this['instance'][_0x265e2c(0x67d)]={'count':0x0});}set['instanceName'](_0x49877c){const _0x56b030=a0_0x3e22c7;if(!_0x49877c){this[_0x56b030(0x51f)]['name']=(0x0,po['v4'])();return;}this[_0x56b030(0x51f)][_0x56b030(0x3dc)]=_0x49877c,this[_0x56b030(0x5cc)](_0x56b030(0x38c),{'instance':this[_0x56b030(0x51f)][_0x56b030(0x3dc)],'status':'created'});}get[a0_0x3e22c7(0x202)](){const _0x6a2865=a0_0x3e22c7;return this[_0x6a2865(0x51f)][_0x6a2865(0x3dc)];}get[a0_0x3e22c7(0x2e6)](){const _0x1b5bb9=a0_0x3e22c7;return this[_0x1b5bb9(0x51f)][_0x1b5bb9(0x2e6)];}async[a0_0x3e22c7(0x303)](){const _0x532de4=a0_0x3e22c7;let _0x52f4c0=this['client'][_0x532de4(0x70a)]?.[_0x532de4(0x3dc)]??this[_0x532de4(0x6ec)][_0x532de4(0x70a)]?.[_0x532de4(0x597)];if(!_0x52f4c0){if(this[_0x532de4(0x3e5)][_0x532de4(0x17f)]('DATABASE')['ENABLED']){let _0x5baab8=await M['getClient']()['db'](this['configService']['get'](_0x532de4(0x5f4))['CONNECTION'][_0x532de4(0x491)]+'-instances')[_0x532de4(0x246)](this[_0x532de4(0x202)])[_0x532de4(0x635)]({'_id':_0x532de4(0x289)});if(_0x5baab8){let _0x166b55=JSON[_0x532de4(0x251)](JSON[_0x532de4(0x5af)](_0x5baab8),w[_0x532de4(0x33f)][_0x532de4(0x1e0)]);_0x52f4c0=_0x166b55['me']?.[_0x532de4(0x3dc)]||_0x166b55['me']?.[_0x532de4(0x597)];}}else{if((0x0,_e['existsSync'])((0x0,$['join'])(j,this[_0x532de4(0x202)],_0x532de4(0x392)))){let _0x199fd8=JSON['parse']((0x0,_e['readFileSync'])((0x0,$[_0x532de4(0x72a)])(j,this[_0x532de4(0x202)],'creds.json'),{'encoding':_0x532de4(0x2b3)}));_0x52f4c0=_0x199fd8['me']?.['name']||_0x199fd8['me']?.[_0x532de4(0x597)];}}}return _0x52f4c0;}get['profilePictureUrl'](){const _0x3484ca=a0_0x3e22c7;return this[_0x3484ca(0x51f)][_0x3484ca(0x3c7)];}get[a0_0x3e22c7(0x4cc)](){const _0x406fe0=a0_0x3e22c7;return{'code':this[_0x406fe0(0x51f)][_0x406fe0(0x67d)]?.['code'],'base64':this['instance']['qrcode']?.[_0x406fe0(0x186)]};}async[a0_0x3e22c7(0x1da)](){const _0x4270b8=a0_0x3e22c7;let _0x258ee3=await this['repository']['webhook'][_0x4270b8(0x445)](this[_0x4270b8(0x202)]);this[_0x4270b8(0x4b2)]['url']=_0x258ee3?.[_0x4270b8(0x72e)],this[_0x4270b8(0x4b2)][_0x4270b8(0x688)]=_0x258ee3?.[_0x4270b8(0x688)],this[_0x4270b8(0x4b2)]['local_map']=_0x258ee3?.[_0x4270b8(0x4af)],this[_0x4270b8(0x4b2)][_0x4270b8(0x638)]=_0x258ee3?.[_0x4270b8(0x638)],this[_0x4270b8(0x4b2)][_0x4270b8(0x152)]=_0x258ee3?.[_0x4270b8(0x152)],this['localWebhook'][_0x4270b8(0x1db)]=_0x258ee3?.[_0x4270b8(0x1db)],this[_0x4270b8(0x4b2)][_0x4270b8(0x4cb)]=_0x258ee3?.[_0x4270b8(0x4cb)],this[_0x4270b8(0x4b2)][_0x4270b8(0x6c1)]=_0x258ee3?.['MESSAGES_UPDATE'],this[_0x4270b8(0x4b2)]['GROUPS_UPSERT']=_0x258ee3?.['GROUPS_UPSERT'],this[_0x4270b8(0x4b2)][_0x4270b8(0x5c2)]=_0x258ee3?.['GROUPS_UPDATE'],this[_0x4270b8(0x4b2)][_0x4270b8(0x429)]=_0x258ee3?.[_0x4270b8(0x429)],this[_0x4270b8(0x4b2)][_0x4270b8(0x363)]=_0x258ee3?.['CHATS_SET'],this['localWebhook'][_0x4270b8(0x454)]=_0x258ee3?.['CHATS_UPSERT'],this[_0x4270b8(0x4b2)][_0x4270b8(0x28d)]=_0x258ee3?.[_0x4270b8(0x28d)],this[_0x4270b8(0x4b2)][_0x4270b8(0x641)]=_0x258ee3?.[_0x4270b8(0x641)],this[_0x4270b8(0x4b2)][_0x4270b8(0x38e)]=_0x258ee3?.[_0x4270b8(0x38e)],this[_0x4270b8(0x4b2)][_0x4270b8(0x538)]=_0x258ee3?.['CONTACTS_UPSERT'],this[_0x4270b8(0x4b2)][_0x4270b8(0x1f8)]=_0x258ee3?.[_0x4270b8(0x1f8)],this[_0x4270b8(0x4b2)][_0x4270b8(0x5f6)]=_0x258ee3?.[_0x4270b8(0x5f6)],this[_0x4270b8(0x4b2)][_0x4270b8(0x4d3)]=_0x258ee3?.[_0x4270b8(0x4d3)],this[_0x4270b8(0x4b2)][_0x4270b8(0x5d1)]=_0x258ee3?.[_0x4270b8(0x5d1)],this['localWebhook'][_0x4270b8(0x62c)]=_0x258ee3?.[_0x4270b8(0x62c)];}async[a0_0x3e22c7(0x153)](_0x343997){const _0x227c5d=a0_0x3e22c7;let _0x25768c=[_0x227c5d(0x1fb),'url','enabled',_0x227c5d(0x4af),_0x227c5d(0x638),_0x227c5d(0x152),_0x227c5d(0x6c1),_0x227c5d(0x4cb),_0x227c5d(0x1db),'GROUPS_UPSERT',_0x227c5d(0x5c2),'GROUP_PARTICIPANTS_UPDATE',_0x227c5d(0x363),_0x227c5d(0x454),_0x227c5d(0x28d),_0x227c5d(0x641),'CONTACTS_SET',_0x227c5d(0x538),'CONTACTS_UPDATE',_0x227c5d(0x5f6),_0x227c5d(0x4d3),_0x227c5d(0x5d1),_0x227c5d(0x62c)],_0x16e8fd={};return _0x25768c[_0x227c5d(0x4e9)](_0x240046=>{_0x343997[_0x240046]!==void 0x0&&(_0x16e8fd[_0x240046]=_0x343997[_0x240046]);}),await this[_0x227c5d(0x3da)][_0x227c5d(0x695)]['create'](_0x16e8fd,this[_0x227c5d(0x202)]),Object['assign'](this[_0x227c5d(0x4b2)],_0x16e8fd),await this['repository'][_0x227c5d(0x695)]['find'](this[_0x227c5d(0x202)]);}async[a0_0x3e22c7(0x173)](){const _0x40e29c=a0_0x3e22c7;return await this[_0x40e29c(0x3da)][_0x40e29c(0x695)]['find'](this[_0x40e29c(0x202)]);}async[a0_0x3e22c7(0x5cc)](_0x4a56b1,_0x277766){const _0x58c1a6=a0_0x3e22c7;let _0x4ed347=this[_0x58c1a6(0x3e5)][_0x58c1a6(0x17f)](_0x58c1a6(0x6b5)),_0x23c171=_0x4a56b1[_0x58c1a6(0x5b0)](/[\.-]/gm,'_')['toUpperCase'](),_0x40eb89=this[_0x58c1a6(0x4b2)][_0x58c1a6(0x688)]&&(0x0,k[_0x58c1a6(0x47c)])(this[_0x58c1a6(0x4b2)][_0x58c1a6(0x72e)])?this[_0x58c1a6(0x4b2)]['url']+(this[_0x58c1a6(0x4b2)][_0x58c1a6(0x4af)]?this[_0x58c1a6(0x266)][_0x4a56b1]:''):null,_0x862ad=_0x4ed347?.[_0x58c1a6(0x723)],_0x38122b=_0x862ad&&_0x862ad?.[_0x58c1a6(0x5d8)]&&(0x0,k[_0x58c1a6(0x47c)])(_0x862ad['URL'])?_0x862ad[_0x58c1a6(0x40d)]+(_0x4ed347[_0x58c1a6(0x65b)]?this['webhookMap'][_0x4a56b1]:''):null,_0x21656e=this[_0x58c1a6(0x4b2)][_0x23c171],_0x2c5246=_0x4ed347?.['EVENTS']?.[_0x23c171];if(_0x21656e&&_0x40eb89)try{await ue['default'][_0x58c1a6(0x516)]({'baseURL':_0x40eb89})[_0x58c1a6(0x5c7)]('',{'event':_0x4a56b1,'instance':this[_0x58c1a6(0x51f)]['name'],'data':_0x277766}),this['logger'][_0x58c1a6(0x4b3)]('Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0x4a56b1+':\x20'+_0x40eb89);}catch(_0x6019d4){this['logger'][_0x58c1a6(0x41f)](this[_0x58c1a6(0x202)]+'\x20('+this['instance'][_0x58c1a6(0x2e6)]+_0x58c1a6(0x515)+{'local':c[_0x58c1a6(0x3dc)]+_0x58c1a6(0x39a),'message':_0x6019d4?.[_0x58c1a6(0x1f0)],'hostName':_0x6019d4?.[_0x58c1a6(0x667)],'syscall':_0x6019d4?.[_0x58c1a6(0x5bb)],'code':_0x6019d4?.['code'],'error':_0x6019d4?.[_0x58c1a6(0x280)],'stack':_0x6019d4?.['stack'],'name':_0x6019d4?.['name']});}if(_0x2c5246&&_0x38122b)try{await ue[_0x58c1a6(0x30c)][_0x58c1a6(0x516)]({'baseURL':_0x38122b})['post']('',{'event':_0x4a56b1,'instance':this[_0x58c1a6(0x51f)][_0x58c1a6(0x3dc)],'data':_0x277766}),this['logger'][_0x58c1a6(0x4b3)](_0x58c1a6(0x1ee)+_0x4a56b1+':\x20'+_0x38122b);}catch(_0x5bb83c){this[_0x58c1a6(0x187)]['error'](this[_0x58c1a6(0x202)]+'\x20('+this['instance'][_0x58c1a6(0x2e6)]+'):\x20'+{'local':c['name']+_0x58c1a6(0x425),'message':_0x5bb83c?.[_0x58c1a6(0x1f0)],'hostName':_0x5bb83c?.[_0x58c1a6(0x667)],'syscall':_0x5bb83c?.[_0x58c1a6(0x5bb)],'code':_0x5bb83c?.[_0x58c1a6(0x29d)],'error':_0x5bb83c?.[_0x58c1a6(0x280)],'stack':_0x5bb83c?.[_0x58c1a6(0x456)],'name':_0x5bb83c?.[_0x58c1a6(0x3dc)]});}}async[a0_0x3e22c7(0x520)]({qr:_0x56a60a,connection:_0xbdb623,lastDisconnect:_0x51d759}){const _0x54200e=a0_0x3e22c7;if(_0x56a60a){if(this['instance'][_0x54200e(0x67d)][_0x54200e(0x276)]===this[_0x54200e(0x3e5)]['get']('QRCODE')[_0x54200e(0x39e)])return this['sendDataWebhook']('qrcode.updated',{'message':_0x54200e(0x1f6),'statusCode':w[_0x54200e(0x1d3)][_0x54200e(0x44d)]}),this[_0x54200e(0x5cc)](_0x54200e(0x3b0),{'instance':this['instance'][_0x54200e(0x3dc)],'state':_0x54200e(0x272),'statusReason':w[_0x54200e(0x1d3)][_0x54200e(0x53d)]}),this[_0x54200e(0x5cc)](_0x54200e(0x38c),{'instance':this[_0x54200e(0x51f)]['name'],'status':_0x54200e(0x542)}),this[_0x54200e(0x4d1)]=!0x0,this[_0x54200e(0x483)][_0x54200e(0x3d9)](_0x54200e(0x1f1),this[_0x54200e(0x51f)][_0x54200e(0x3dc)]);this[_0x54200e(0x51f)][_0x54200e(0x67d)][_0x54200e(0x276)]++;let _0xab680b={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x54200e(0x4fe),'dark':_0x54200e(0x1b1)}};go[_0x54200e(0x30c)][_0x54200e(0x25b)](_0x56a60a,_0xab680b,(_0x3a1a94,_0x34cf27)=>{const _0xb77315=_0x54200e;if(_0x3a1a94){this[_0xb77315(0x187)][_0xb77315(0x41f)](this[_0xb77315(0x202)]+'\x20('+this[_0xb77315(0x51f)][_0xb77315(0x2e6)]+_0xb77315(0x704)+_0x3a1a94['toString']());return;}this[_0xb77315(0x51f)][_0xb77315(0x67d)][_0xb77315(0x186)]=_0x34cf27,this['instance'][_0xb77315(0x67d)][_0xb77315(0x29d)]=_0x56a60a,this['sendDataWebhook'](_0xb77315(0x1c2),{'qrcode':{'instance':this['instance']['name'],'code':_0x56a60a,'base64':_0x34cf27}});}),mo['default'][_0x54200e(0x2bc)](_0x56a60a,{'small':!0x0},_0x37216a=>this[_0x54200e(0x187)][_0x54200e(0x4b3)]('\x0a{\x20instance:\x20'+this[_0x54200e(0x51f)][_0x54200e(0x3dc)]+',\x20qrcodeCount:\x20'+this[_0x54200e(0x51f)]['qrcode'][_0x54200e(0x276)]+_0x54200e(0x581)+_0x37216a));}if(_0xbdb623&&(this[_0x54200e(0x196)]={'state':_0xbdb623,'statusReason':_0x51d759?.['error']?.[_0x54200e(0x226)]?.['statusCode']??0xc8},this[_0x54200e(0x5cc)]('connection.update',{'instance':this['instance'][_0x54200e(0x3dc)],...this[_0x54200e(0x196)]})),_0xbdb623===_0x54200e(0x1a2)){if(this['reconnectAttempts']++,this['reconnectTimestamps'][_0x54200e(0x6a8)](Date[_0x54200e(0x43b)]()),this[_0x54200e(0x4e2)]=this[_0x54200e(0x4e2)][_0x54200e(0x2a7)](_0xf882f5=>Date[_0x54200e(0x43b)]()-_0xf882f5<this[_0x54200e(0x589)]),_0x51d759[_0x54200e(0x41f)]?.[_0x54200e(0x226)]?.['statusCode']!==w[_0x54200e(0x1d3)]['loggedOut']&&this[_0x54200e(0x4e2)][_0x54200e(0x2d6)]<=this[_0x54200e(0x6f8)])await this[_0x54200e(0x3bc)]();else{this[_0x54200e(0x5cc)](_0x54200e(0x38c),{'instance':this[_0x54200e(0x51f)]['name'],'status':'removed'}),this[_0x54200e(0x625)]=!0x1;try{this[_0x54200e(0x187)]['verbose'](this['instanceName']+'\x20('+this[_0x54200e(0x51f)]['wuid']+_0x54200e(0x49d));let _0x699aea={'where':{'owner':this[_0x54200e(0x51f)]['wuid']}},_0x1f5bd=(await this[_0x54200e(0x3da)][_0x54200e(0x1ad)][_0x54200e(0x445)](_0x699aea))[_0x54200e(0x2d6)];await this[_0x54200e(0x3da)][_0x54200e(0x1ad)][_0x54200e(0x45d)](_0x699aea),this[_0x54200e(0x187)][_0x54200e(0x461)](this[_0x54200e(0x202)]+'\x20('+this[_0x54200e(0x51f)]['wuid']+_0x54200e(0x446)+_0x1f5bd+_0x54200e(0x2e5));}catch(_0x5f3351){console['error']('Falha\x20ao\x20deletar\x20mensagens\x20updates:',_0x5f3351);}try{this[_0x54200e(0x187)]['verbose'](this[_0x54200e(0x202)]+'\x20('+this['instance'][_0x54200e(0x2e6)]+_0x54200e(0x1ca));let _0x36aeaa={'where':{'owner':this[_0x54200e(0x51f)][_0x54200e(0x2e6)]}},_0x3e7b70=(await this[_0x54200e(0x3da)][_0x54200e(0x1f0)]['find'](_0x36aeaa))[_0x54200e(0x2d6)];await this[_0x54200e(0x3da)]['message'][_0x54200e(0x45d)](_0x36aeaa),this['logger'][_0x54200e(0x461)](this[_0x54200e(0x202)]+'\x20('+this[_0x54200e(0x51f)][_0x54200e(0x2e6)]+_0x54200e(0x446)+_0x3e7b70+_0x54200e(0x412));}catch(_0x52f863){console[_0x54200e(0x41f)](_0x54200e(0x1a9),_0x52f863);}this[_0x54200e(0x451)]!==null&&(this[_0x54200e(0x187)]['verbose'](this['instanceName']+'\x20('+this[_0x54200e(0x51f)][_0x54200e(0x2e6)]+'):\x20Limpando\x20delayMessage'),clearInterval(this[_0x54200e(0x451)]),this[_0x54200e(0x451)]=null),this[_0x54200e(0x187)][_0x54200e(0x461)](this['instanceName']+'\x20('+this['instance'][_0x54200e(0x2e6)]+_0x54200e(0x1fd)),this[_0x54200e(0x394)]=null,this[_0x54200e(0x483)][_0x54200e(0x3d9)]('remove.instance',this[_0x54200e(0x51f)][_0x54200e(0x3dc)],_0x54200e(0x594)),this[_0x54200e(0x6ec)]?.['ws']?.[_0x54200e(0x1a2)](),this[_0x54200e(0x6ec)]['end'](new Error(_0x54200e(0x243)));}}if(_0xbdb623===_0x54200e(0x1c1)){this['resetReconnectionVariables'],this[_0x54200e(0x51f)][_0x54200e(0x2e6)]=this[_0x54200e(0x6ec)]['user']['id'][_0x54200e(0x5b0)](/:\d+/,'')[_0x54200e(0x5b0)]('@s.whatsapp.net',''),this[_0x54200e(0x51f)]['profilePictureUrl']=(await this['profilePicture'](this[_0x54200e(0x51f)][_0x54200e(0x2e6)]+_0x54200e(0x201)))[_0x54200e(0x3c7)];let _0x2f29b2='Número:\x20'+this[_0x54200e(0x51f)][_0x54200e(0x2e6)],_0x5b23b8=0x28,_0x264cd0=Math[_0x54200e(0x6cb)]((_0x5b23b8-_0x2f29b2[_0x54200e(0x2d6)])/0x2),_0x4e479c='\x20'[_0x54200e(0x1bf)](_0x264cd0),_0x316204='CONECTADO\x20À\x20UAZAPI',_0x3b9ee7='Instância:\x20'+this['instance'][_0x54200e(0x3dc)],_0x31ccf9=(''+_0x4e479c+_0x2f29b2+_0x4e479c)['padEnd'](_0x5b23b8,'\x20'),_0x568a88=(''+_0x4e479c+_0x316204+_0x4e479c)['padEnd'](_0x5b23b8,'\x20'),_0x4a5511=(''+_0x4e479c+_0x3b9ee7+_0x4e479c)['padEnd'](_0x5b23b8,'\x20'),_0x4078f9=Math['max'](_0x31ccf9[_0x54200e(0x2d6)],_0x568a88[_0x54200e(0x2d6)],_0x4a5511[_0x54200e(0x2d6)]),_0x4b8a6b=_0x31ccf9['padEnd'](_0x4078f9,'\x20'),_0x4180ff=_0x568a88[_0x54200e(0x1a4)](_0x4078f9,'\x20'),_0x1af4f0=_0x4a5511[_0x54200e(0x1a4)](_0x4078f9,'\x20');this[_0x54200e(0x187)]['info']((_0x54200e(0x470)+'─'['repeat'](_0x4078f9)+_0x54200e(0x1b0)+_0x4180ff+_0x54200e(0x38f)+_0x1af4f0+'│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│'+_0x4b8a6b+_0x54200e(0x33c)+'─'['repeat'](_0x4078f9)+'┘')[_0x54200e(0x5b0)](/^ +/gm,'\x20\x20')),this[_0x54200e(0x537)](),this[_0x54200e(0x625)]=!0x0;}}[a0_0x3e22c7(0x531)](){const _0x209a6e=a0_0x3e22c7;this['reconnectAttempts']=0x0,this[_0x209a6e(0x4e2)]=[];}async[a0_0x3e22c7(0x678)](_0xcae89d,_0xa3d831=!0x1){const _0x4fb817=a0_0x3e22c7;try{let _0x3066fb=await this[_0x4fb817(0x3da)][_0x4fb817(0x1f0)][_0x4fb817(0x445)]({'where':{'owner':this[_0x4fb817(0x51f)]['wuid'],'key':{'id':_0xcae89d['id']}}});return _0xa3d831?_0x3066fb[0x0]:_0x3066fb[0x0]['message'];}catch{return{'conversation':''};}}[a0_0x3e22c7(0x46c)](){const _0x55475e=a0_0x3e22c7;let _0x2fa155=this[_0x55475e(0x3e5)]['get'](_0x55475e(0x672)),_0x326dc8=this[_0x55475e(0x3e5)][_0x55475e(0x17f)](_0x55475e(0x5f4));_0x2fa155?.[_0x55475e(0x59b)]&&!_0x326dc8[_0x55475e(0x5d8)]&&setInterval(()=>{const _0x2f1d75=_0x55475e;try{for(let [_0x53b425,_0x17f91e]of Object['entries'](_0x2fa155))_0x17f91e===!0x0&&(0x0,Vt[_0x2f1d75(0x54f)])(_0x2f1d75(0x5e5)+(0x0,$['join'])(this[_0x2f1d75(0x669)],_0x53b425[_0x2f1d75(0x67c)](),this[_0x2f1d75(0x51f)][_0x2f1d75(0x2e6)])+'/*.json');}catch{}},(_0x2fa155?.[_0x55475e(0x59b)]??0xe10)*0x3e8);}async[a0_0x3e22c7(0x617)](){const _0x2bb915=a0_0x3e22c7;let _0x1fc889=this[_0x2bb915(0x3e5)][_0x2bb915(0x17f)](_0x2bb915(0x5f4)),_0x4b329d=this[_0x2bb915(0x3e5)][_0x2bb915(0x17f)]('REDIS');return _0x4b329d?.[_0x2bb915(0x5d8)]?await vs(_0x4b329d,this[_0x2bb915(0x51f)]['name']):_0x1fc889[_0x2bb915(0x5d8)]?await Es(this['instance'][_0x2bb915(0x3dc)]):await(0x0,w[_0x2bb915(0x39f)])((0x0,$[_0x2bb915(0x72a)])(j,this[_0x2bb915(0x51f)]['name']));}async[a0_0x3e22c7(0x537)](){const _0x581e2e=a0_0x3e22c7;let _0x39cdbd=()=>Math[_0x581e2e(0x6cb)](Math[_0x581e2e(0x1be)]()*0x2711)+0x7d0,_0x4d338e=async()=>{const _0x5019de=_0x581e2e;if(!this[_0x5019de(0x625)]){this[_0x5019de(0x187)][_0x5019de(0x461)]('Desconectado,\x20parando\x20execução.'),this[_0x5019de(0x379)]=!0x1;return;}if(this[_0x5019de(0x51f)][_0x5019de(0x2e6)]&&this[_0x5019de(0x394)]&&this[_0x5019de(0x451)]!==null&&this[_0x5019de(0x451)]!==void 0x0){let _0x33dbb9=Math[_0x5019de(0x336)](this['delayMessage']/0xea60);this[_0x5019de(0x187)][_0x5019de(0x461)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x5019de(0x39d)+_0x33dbb9+_0x5019de(0x5f5)),this['isRunning']=!0x1;return;}else this[_0x5019de(0x51f)][_0x5019de(0x2e6)]&&(this[_0x5019de(0x187)][_0x5019de(0x461)](this['instanceName']+'\x20('+this['instance'][_0x5019de(0x2e6)]+_0x5019de(0x63a)),this[_0x5019de(0x394)]||await this[_0x5019de(0x66b)](),(this[_0x5019de(0x451)]===null||this[_0x5019de(0x451)]===void 0x0)&&await this[_0x5019de(0x444)]());if(this[_0x5019de(0x379)]){let _0x55da86=_0x39cdbd();this[_0x5019de(0x187)][_0x5019de(0x461)](this[_0x5019de(0x202)]+_0x5019de(0x649)+_0x55da86/0x3e8+'\x20segundos'),setTimeout(_0x4d338e,_0x55da86);}};if(this[_0x581e2e(0x379)])return;this[_0x581e2e(0x379)]=!0x0;let _0x19f89d=_0x39cdbd();setTimeout(_0x4d338e,_0x19f89d);}async[a0_0x3e22c7(0x3bc)](){const _0x30e4fd=a0_0x3e22c7;try{this[_0x30e4fd(0x1da)](),this[_0x30e4fd(0x51f)][_0x30e4fd(0x271)]=await this[_0x30e4fd(0x617)]();let {version:_0x54f876}=await(0x0,w[_0x30e4fd(0x465)])(),_0x392838=this[_0x30e4fd(0x3e5)][_0x30e4fd(0x17f)]('CONFIG_SESSION_PHONE'),_0x119b8e=[_0x392838[_0x30e4fd(0x200)],_0x392838[_0x30e4fd(0x34e)],(0x0,ho['release'])()],_0x440429={'auth':{'creds':this[_0x30e4fd(0x51f)][_0x30e4fd(0x271)][_0x30e4fd(0x6a3)][_0x30e4fd(0x289)],'keys':(0x0,w[_0x30e4fd(0x5f3)])(this[_0x30e4fd(0x51f)][_0x30e4fd(0x271)]['state']['keys'],(0x0,kt['default'])({'level':_0x30e4fd(0x41f)}))},'logger':(0x0,kt['default'])({'level':_0x30e4fd(0x41f)}),'printQRInTerminal':!0x1,'browser':_0x119b8e,'version':_0x54f876,'connectTimeoutMs':0xea60,'qrTimeout':0x9c40,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'msgRetryCounterCache':this[_0x30e4fd(0x5ca)],'getMessage':async _0x46daf6=>await this[_0x30e4fd(0x678)](_0x46daf6),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x0,'userDevicesCache':this[_0x30e4fd(0x49a)],'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa},'patchMessageBeforeSending':_0x212f7c=>(!!(_0x212f7c['buttonsMessage']||_0x212f7c[_0x30e4fd(0x220)])&&(_0x212f7c={'viewOnceMessageV2':{'message':{'messageContextInfo':{'deviceListMetadataVersion':0x2,'deviceListMetadata':{}},..._0x212f7c}}}),_0x212f7c)};return this[_0x30e4fd(0x4d1)]=!0x1,this[_0x30e4fd(0x6ec)]=(0x0,w[_0x30e4fd(0x30c)])(_0x440429),this[_0x30e4fd(0x596)](),this[_0x30e4fd(0x6ec)];}catch(_0x4fe262){throw this[_0x30e4fd(0x187)]['error'](this[_0x30e4fd(0x202)]+'\x20('+this['instance']['wuid']+_0x30e4fd(0x515)+_0x4fe262),new A(_0x4fe262?.[_0x30e4fd(0x63b)]());}}[a0_0x3e22c7(0x596)](){const _0x1b8274=a0_0x3e22c7;this[_0x1b8274(0x6ec)]['ev'][_0x1b8274(0x2f8)](_0x1e1cab=>{const _0x49bba1=_0x1b8274;if(!this[_0x49bba1(0x4d1)]){let _0xcb821b=this[_0x49bba1(0x3e5)][_0x49bba1(0x17f)](_0x49bba1(0x5f4));if(_0x1e1cab['connection.update']&&this[_0x49bba1(0x520)](_0x1e1cab['connection.update']),_0x1e1cab[_0x49bba1(0x1d2)]&&this['instance']['authState'][_0x49bba1(0x1d4)](),_0x1e1cab[_0x49bba1(0x4be)]){let _0x2d6c78=_0x1e1cab[_0x49bba1(0x4be)];this[_0x49bba1(0x5e1)][_0x49bba1(0x4be)](_0x2d6c78,_0xcb821b);}if(_0x1e1cab[_0x49bba1(0x5b1)]){let _0x1d68d3=_0x1e1cab[_0x49bba1(0x5b1)];this[_0x49bba1(0x5e1)][_0x49bba1(0x5b1)](_0x1d68d3,_0xcb821b);}if(_0x1e1cab['messages.update']){let _0x455067=_0x1e1cab[_0x49bba1(0x4b6)];this[_0x49bba1(0x5e1)][_0x49bba1(0x4b6)](_0x455067,_0xcb821b);}if(_0x1e1cab[_0x49bba1(0x61c)]){let _0x3c7640=_0x1e1cab[_0x49bba1(0x61c)];if(this['localWebhook']?.[_0x49bba1(0x62c)]&&_0x3c7640['id'][_0x49bba1(0x457)]('@g.us'))return;this['sendDataWebhook'](_0x49bba1(0x61c),_0x3c7640);}if(!this[_0x49bba1(0x4b2)]?.[_0x49bba1(0x62c)]){if(_0x1e1cab[_0x49bba1(0x374)]){let _0x4cf7ea=_0x1e1cab[_0x49bba1(0x374)];this['groupHandler'][_0x49bba1(0x374)](_0x4cf7ea);}if(_0x1e1cab[_0x49bba1(0x23f)]){let _0x5d1f4a=_0x1e1cab['groups.update'];this[_0x49bba1(0x19e)][_0x49bba1(0x23f)](_0x5d1f4a);}if(_0x1e1cab[_0x49bba1(0x2f0)]){let _0x258d0e=_0x1e1cab[_0x49bba1(0x2f0)];this[_0x49bba1(0x19e)]['group-participants.update'](_0x258d0e);}}if(_0x1e1cab[_0x49bba1(0x679)]){let _0xe44e8b=_0x1e1cab[_0x49bba1(0x679)];this[_0x49bba1(0x29b)][_0x49bba1(0x679)](_0xe44e8b,_0xcb821b);}if(_0x1e1cab[_0x49bba1(0x4d6)]){let _0xcb6dd9=_0x1e1cab['chats.update'];this[_0x49bba1(0x29b)]['chats.update'](_0xcb6dd9,_0xcb821b);}if(_0x1e1cab[_0x49bba1(0x249)]){let _0x31881c=_0x1e1cab[_0x49bba1(0x249)];this[_0x49bba1(0x29b)][_0x49bba1(0x249)](_0x31881c);}if(_0x1e1cab['contacts.upsert']){let _0x41be2d=_0x1e1cab['contacts.upsert'];this[_0x49bba1(0x1ec)][_0x49bba1(0x605)](_0x41be2d,_0xcb821b);}if(_0x1e1cab[_0x49bba1(0x3b9)]){let _0x1d8afa=_0x1e1cab[_0x49bba1(0x3b9)];this[_0x49bba1(0x1ec)][_0x49bba1(0x3b9)](_0x1d8afa,_0xcb821b);}}});}[a0_0x3e22c7(0x17c)](_0xed360f){const _0x57d793=a0_0x3e22c7;let _0x2bbbdf=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)[_0x57d793(0x46d)](_0xed360f);if(_0x2bbbdf&&_0x2bbbdf[0x1]==='55'){let _0xe1c3f8=_0x2bbbdf[0x2],_0x1b1788=_0x2bbbdf[0x3],_0x435a85=_0x2bbbdf[0x4];if(_0xe1c3f8>='31'&&_0x1b1788==='9')return _0x2bbbdf[0x1]+_0xe1c3f8+_0x435a85;}return _0xed360f;}['createJid'](_0x1ccdc){const _0x34d61b=a0_0x3e22c7;return _0x1ccdc['includes'](_0x34d61b(0x373))||_0x1ccdc[_0x34d61b(0x457)]('@s.whatsapp.net')||_0x1ccdc[_0x34d61b(0x457)](_0x34d61b(0x61a))?_0x1ccdc:(_0x1ccdc=_0x1ccdc?.[_0x34d61b(0x5b0)](/\s/g,'')[_0x34d61b(0x5b0)](/\+/g,'')['replace'](/\(/g,'')[_0x34d61b(0x5b0)](/\)/g,'')[_0x34d61b(0x209)](/\:/)[0x0][_0x34d61b(0x209)]('@')[0x0],_0x1ccdc[_0x34d61b(0x2d6)]>=0x12?(_0x1ccdc=_0x1ccdc[_0x34d61b(0x5b0)](/[^\d-]/g,''),_0x1ccdc+_0x34d61b(0x373)):(_0x1ccdc=_0x1ccdc['replace'](/\D/g,''),this[_0x34d61b(0x17c)](_0x1ccdc)+_0x34d61b(0x201)));}async[a0_0x3e22c7(0x4cd)](_0x3ab2d9){const _0x1fa58f=a0_0x3e22c7;let _0xcef49b=this[_0x1fa58f(0x687)](_0x3ab2d9[_0x1fa58f(0x357)]),_0x126d73=(await this[_0x1fa58f(0x248)]({'numbers':[_0xcef49b]}))[0x0];if(!_0x126d73['exists']&&!(0x0,w[_0x1fa58f(0x28e)])(_0x126d73[_0x1fa58f(0x4d4)]))throw new g(_0x126d73);let _0x6b5ebe=(0x0,w['isJidGroup'])(_0xcef49b)?_0xcef49b:_0x126d73['jid'];if((0x0,w[_0x1fa58f(0x28e)])(_0x6b5ebe))try{await this[_0x1fa58f(0x6ec)][_0x1fa58f(0x38d)](_0x6b5ebe);}catch{throw new x(_0x1fa58f(0x663));}try{return await this[_0x1fa58f(0x6ec)][_0x1fa58f(0x31e)](_0x6b5ebe),await this[_0x1fa58f(0x6ec)][_0x1fa58f(0x2b7)](_0x3ab2d9['presence'],_0xcef49b),{'status':0xc8,'presence':_0x3ab2d9[_0x1fa58f(0x5a4)]};}catch(_0x47f56e){throw new g(_0x47f56e[_0x1fa58f(0x63b)]());}}async[a0_0x3e22c7(0x546)](_0x14c281){const _0x14d2f4=a0_0x3e22c7;let _0x4e5747=this['createJid'](_0x14c281);try{return{'wuid':_0x4e5747,'profilePictureUrl':await this[_0x14d2f4(0x6ec)][_0x14d2f4(0x3c7)](_0x4e5747,_0x14d2f4(0x293))};}catch{return{'wuid':_0x4e5747,'profilePictureUrl':null};}}async[a0_0x3e22c7(0x618)](_0x57d250,_0x1ee496,_0x54bb03){const _0x2e1a05=a0_0x3e22c7;let _0x372075=(await this['whatsappNumber']({'numbers':[_0x57d250]}))[0x0];if(!_0x372075[_0x2e1a05(0x613)]&&!(0x0,w['isJidGroup'])(_0x372075[_0x2e1a05(0x4d4)])&&!_0x372075['jid']['includes'](_0x2e1a05(0x61a)))throw new g(_0x372075);let _0x3e0977=_0x372075[_0x2e1a05(0x4d4)];try{_0x54bb03?.['delay']&&(await this[_0x2e1a05(0x6ec)]['presenceSubscribe'](_0x3e0977),await this['client']['sendPresenceUpdate'](_0x54bb03?.[_0x2e1a05(0x5a4)]??_0x2e1a05(0x1c9),_0x3e0977),await(0x0,w[_0x2e1a05(0x292)])(_0x54bb03[_0x2e1a05(0x292)]),await this['client']['sendPresenceUpdate'](_0x2e1a05(0x65e),_0x3e0977));let _0x5a4303=_0x54bb03?.['linkPreview']!=!0x1?void 0x0:!0x1,_0x30bca9;if(_0x54bb03?.['quoted']){let _0xdf5caa=_0x54bb03?.[_0x2e1a05(0x6ab)],_0x1ca68b=_0xdf5caa?.[_0x2e1a05(0x1f0)]?_0xdf5caa:await this[_0x2e1a05(0x678)](_0xdf5caa[_0x2e1a05(0x657)],!0x0);if(!_0x1ca68b)throw _0x2e1a05(0x6f3);_0x30bca9=_0x1ca68b;}let _0x211fa8;if((0x0,w[_0x2e1a05(0x28e)])(_0x3e0977))try{let _0x4714ad=await this[_0x2e1a05(0x6ec)][_0x2e1a05(0x38d)](_0x3e0977);if(!_0x4714ad)throw new x(_0x2e1a05(0x663));_0x54bb03?.[_0x2e1a05(0x570)]&&(_0x54bb03['mentions']?.['everyOne']?_0x211fa8=_0x4714ad[_0x2e1a05(0x6fd)]['map'](_0xb1864e=>_0xb1864e['id']):_0x54bb03['mentions']?.[_0x2e1a05(0x62f)]?.[_0x2e1a05(0x2d6)]&&(_0x211fa8=_0x54bb03[_0x2e1a05(0x570)][_0x2e1a05(0x62f)]['map'](_0x28320a=>{const _0x5be1ba=_0x2e1a05;let _0x10c4d9=this[_0x5be1ba(0x687)](_0x28320a);return(0x0,w[_0x5be1ba(0x28e)])(_0x10c4d9)?null:_0x10c4d9;})));}catch{throw new x(_0x2e1a05(0x663));}let _0x5b7c91=await((async()=>{const _0x4b8612=_0x2e1a05;let _0x1987f7={'quoted':_0x30bca9};if(!_0x1ee496[_0x4b8612(0x4ee)]&&!_0x1ee496[_0x4b8612(0x458)]&&!_0x1ee496[_0x4b8612(0x6ed)]&&!_0x1ee496[_0x4b8612(0x6b0)]&&_0x3e0977!==_0x4b8612(0x275)&&!_0x1ee496[_0x4b8612(0x4ee)])return await this[_0x4b8612(0x6ec)]['sendMessage'](_0x3e0977,{'forward':{'key':{'remoteJid':this[_0x4b8612(0x51f)][_0x4b8612(0x2e6)],'fromMe':!0x0},'message':_0x1ee496},'mentions':_0x211fa8},_0x1987f7);if(_0x1ee496[_0x4b8612(0x6b0)]){let _0x2837cb=_0x1ee496[_0x4b8612(0x6b0)];return _0x54bb03?.[_0x4b8612(0x4a4)]&&(_0x2837cb=await this[_0x4b8612(0x424)](_0x2837cb,_0x3e0977)),await this['client'][_0x4b8612(0x3d5)](_0x3e0977,{'text':_0x2837cb,'mentions':_0x211fa8,'linkPreview':_0x5a4303},_0x1987f7);}return _0x3e0977==='status@broadcast'?await this['client'][_0x4b8612(0x3d5)](_0x3e0977,_0x1ee496[_0x4b8612(0x654)]['content'],{'backgroundColor':_0x1ee496[_0x4b8612(0x654)][_0x4b8612(0x576)][_0x4b8612(0x6fe)],'font':_0x1ee496[_0x4b8612(0x654)][_0x4b8612(0x576)][_0x4b8612(0x250)],'statusJidList':_0x1ee496[_0x4b8612(0x654)][_0x4b8612(0x576)][_0x4b8612(0x58c)]}):await this[_0x4b8612(0x6ec)][_0x4b8612(0x3d5)](_0x3e0977,_0x1ee496,_0x1987f7);})()),{message_normalized:_0x5e7cbe}=this[_0x2e1a05(0x5fa)](_0x5b7c91[_0x2e1a05(0x1f0)],W(_0x5b7c91['message']),null),_0x42c28f={'key':_0x5b7c91[_0x2e1a05(0x657)],'pushName':_0x5b7c91[_0x2e1a05(0x441)],'message':{..._0x5b7c91['message']},'messageType':W(_0x5b7c91[_0x2e1a05(0x1f0)]),'message_normalized':{'key':_0x5b7c91[_0x2e1a05(0x657)],'pushName':_0x5b7c91['pushName'],'messageTimestamp':_0x5b7c91[_0x2e1a05(0x297)]&&_0x5b7c91['messageTimestamp']['toString']()[_0x2e1a05(0x2d6)]<0xd?_0x5b7c91['messageTimestamp']*0x3e8:_0x5b7c91[_0x2e1a05(0x297)]||null,'source':(0x0,w[_0x2e1a05(0x727)])(_0x5b7c91[_0x2e1a05(0x657)]['id']),..._0x5e7cbe},'messageTimestamp':_0x5b7c91['messageTimestamp']&&_0x5b7c91[_0x2e1a05(0x297)][_0x2e1a05(0x63b)]()[_0x2e1a05(0x2d6)]<0xd?_0x5b7c91[_0x2e1a05(0x297)]*0x3e8:_0x5b7c91[_0x2e1a05(0x297)]||null,'owner':this[_0x2e1a05(0x51f)][_0x2e1a05(0x2e6)],'source':(0x0,w[_0x2e1a05(0x727)])(_0x5b7c91['key']['id'])};return this['logger'][_0x2e1a05(0x4b3)](_0x42c28f),await this[_0x2e1a05(0x5cc)](_0x2e1a05(0x6f0),_0x42c28f),q(this[_0x2e1a05(0x202)],_0x2e1a05(0x2d1),{'message':_0x42c28f}),this['updateChatWithMessage'](this['configService'][_0x2e1a05(0x17f)](_0x2e1a05(0x5f4)),_0x42c28f,_0x2e1a05(0x1db)),await this['repository'][_0x2e1a05(0x1f0)][_0x2e1a05(0x680)]([_0x42c28f],this['configService'][_0x2e1a05(0x17f)](_0x2e1a05(0x5f4))[_0x2e1a05(0x5d8)]),_0x5b7c91;}catch(_0x1a349c){throw this[_0x2e1a05(0x187)][_0x2e1a05(0x41f)](this[_0x2e1a05(0x202)]+'\x20('+this[_0x2e1a05(0x51f)]['wuid']+_0x2e1a05(0x515)+_0x1a349c[_0x2e1a05(0x63b)]()),new g(_0x1a349c['toString']());}}get['connectionStatus'](){const _0x3f2e94=a0_0x3e22c7;return this[_0x3f2e94(0x196)];}async[a0_0x3e22c7(0x658)](_0x429805){const _0x18e75c=a0_0x3e22c7;let _0x1be9cc=this[_0x18e75c(0x3e5)][_0x18e75c(0x17f)](_0x18e75c(0x44f)),_0x260ccf=this[_0x18e75c(0x3e5)][_0x18e75c(0x17f)]('TRIAL_INSTANCE_NAME');return _0x260ccf&&this[_0x18e75c(0x202)][_0x18e75c(0x67c)]()[_0x18e75c(0x457)](_0x260ccf[_0x18e75c(0x67c)]())&&(_0x429805['textMessage']['text']+='\x0a\x0a'+_0x1be9cc),await this['sendMessageWithTyping'](_0x429805[_0x18e75c(0x357)],{'conversation':_0x429805['textMessage']['text']},_0x429805?.[_0x18e75c(0x26b)]);}async[a0_0x3e22c7(0x352)](_0x2baacf){const _0x38442b=a0_0x3e22c7;if(!_0x2baacf['type'])throw new g(_0x38442b(0x327));if(!_0x2baacf[_0x38442b(0x2c0)])throw new g(_0x38442b(0x163));if(_0x2baacf[_0x38442b(0x227)]){let _0x15fe4c=await this[_0x38442b(0x3da)][_0x38442b(0x514)]['find']({'where':{'owner':this[_0x38442b(0x51f)]['wuid']}});if(!_0x15fe4c[_0x38442b(0x2d6)])throw new g('Contacts\x20not\x20found');_0x2baacf[_0x38442b(0x58c)]=_0x15fe4c[_0x38442b(0x2a7)](_0x3029af=>_0x3029af[_0x38442b(0x441)])['map'](_0x4d0f68=>_0x4d0f68['id']);}if(!_0x2baacf['statusJidList']?.[_0x38442b(0x2d6)]&&!_0x2baacf['allContacts'])throw new g('StatusJidList\x20is\x20required');if(_0x2baacf['type']===_0x38442b(0x5bc)){if(!_0x2baacf[_0x38442b(0x6fe)])throw new g(_0x38442b(0x19b));if(!_0x2baacf[_0x38442b(0x250)])throw new g(_0x38442b(0x2a1));return{'content':{'text':_0x2baacf['content']},'option':{'backgroundColor':_0x2baacf['backgroundColor'],'font':_0x2baacf[_0x38442b(0x250)],'statusJidList':_0x2baacf['statusJidList']}};}if(_0x2baacf[_0x38442b(0x2e9)]==='image')return{'content':{'image':{'url':_0x2baacf[_0x38442b(0x2c0)]},'caption':_0x2baacf[_0x38442b(0x56a)]},'option':{'statusJidList':_0x2baacf[_0x38442b(0x58c)]}};if(_0x2baacf['type']===_0x38442b(0x6ea))return{'content':{'video':{'url':_0x2baacf[_0x38442b(0x2c0)]},'caption':_0x2baacf[_0x38442b(0x56a)]},'option':{'statusJidList':_0x2baacf[_0x38442b(0x58c)]}};if(_0x2baacf[_0x38442b(0x2e9)]===_0x38442b(0x4ee)){this[_0x38442b(0x187)][_0x38442b(0x461)](_0x38442b(0x1dc)),this[_0x38442b(0x187)][_0x38442b(0x461)](_0x38442b(0x3d8));let _0x48dd9f=await this[_0x38442b(0x51d)](_0x2baacf['content']);if(typeof _0x48dd9f==_0x38442b(0x5cb)){this[_0x38442b(0x187)][_0x38442b(0x461)](_0x38442b(0x16f));let _0x2b2bb5=_[_0x38442b(0x1b3)](_0x48dd9f)[_0x38442b(0x63b)](_0x38442b(0x186)),_0x1c85b2={'content':{'audio':Buffer['from'](_0x2b2bb5,_0x38442b(0x186)),'ptt':!0x0,'mimetype':'audio/mp4'},'option':{'statusJidList':_0x2baacf['statusJidList']}};return _['unlinkSync'](_0x48dd9f),_0x1c85b2;}else throw new A(_0x48dd9f);}throw new g(_0x38442b(0x5b5));}async[a0_0x3e22c7(0x5fd)](_0xa8a599){const _0xb6d191=a0_0x3e22c7;return await this[_0xb6d191(0x618)](_0xb6d191(0x275),{'status':await this[_0xb6d191(0x352)](_0xa8a599[_0xb6d191(0x5fd)])});}async[a0_0x3e22c7(0x567)](_0x1e45c9){const _0x5f1499=a0_0x3e22c7;try{let _0x92d885=await(0x0,w[_0x5f1499(0x1c8)])({[_0x1e45c9['mediatype']]:(0x0,k['isURL'])(_0x1e45c9[_0x5f1499(0x1c7)])?{'url':_0x1e45c9['media']}:Buffer[_0x5f1499(0x244)](_0x1e45c9['media'],_0x5f1499(0x186))},{'upload':this[_0x5f1499(0x6ec)][_0x5f1499(0x3f7)]}),_0x412685=_0x1e45c9[_0x5f1499(0x64f)]+'Message';if(_0x1e45c9[_0x5f1499(0x64f)]===_0x5f1499(0x33d)&&!_0x1e45c9[_0x5f1499(0x1df)]){let _0x3d669c=new RegExp(/.*\/(.+?)\./)[_0x5f1499(0x46d)](_0x1e45c9[_0x5f1499(0x1c7)]);_0x1e45c9[_0x5f1499(0x1df)]=_0x3d669c[0x1];}let _0x3a46d4;(0x0,k[_0x5f1499(0x47c)])(_0x1e45c9[_0x5f1499(0x1c7)])?_0x3a46d4=(0x0,Ns[_0x5f1499(0x6c6)])(_0x1e45c9[_0x5f1499(0x1c7)]):_0x3a46d4=(0x0,Ns[_0x5f1499(0x6c6)])(_0x1e45c9['fileName']);let _0x1dbd51=this['configService']['get'](_0x5f1499(0x44f)),_0x4fdda5=this[_0x5f1499(0x3e5)][_0x5f1499(0x17f)](_0x5f1499(0x683));return _0x4fdda5&&this[_0x5f1499(0x202)]['toLowerCase']()[_0x5f1499(0x457)](_0x4fdda5['toLowerCase']())&&(_0x1e45c9['caption']+='\x0a\x0a'+_0x1dbd51),_0x92d885[_0x412685][_0x5f1499(0x56a)]=_0x1e45c9?.[_0x5f1499(0x56a)],_0x92d885[_0x412685][_0x5f1499(0x3ff)]=_0x3a46d4,_0x92d885[_0x412685][_0x5f1499(0x1df)]=_0x1e45c9[_0x5f1499(0x1df)],_0x1e45c9[_0x5f1499(0x64f)]===_0x5f1499(0x6ea)&&(_0x92d885[_0x412685]['jpegThumbnail']=Uint8Array[_0x5f1499(0x244)]((0x0,_e[_0x5f1499(0x1b3)])((0x0,$[_0x5f1499(0x72a)])(process[_0x5f1499(0x68b)](),_0x5f1499(0x653)))),_0x92d885[_0x412685]['gifPlayback']=!0x1),(0x0,w[_0x5f1499(0x6b8)])('',{[_0x412685]:{..._0x92d885[_0x412685]}},{'userJid':this[_0x5f1499(0x51f)][_0x5f1499(0x2e6)]});}catch(_0x7526b0){throw this[_0x5f1499(0x187)]['error'](this[_0x5f1499(0x202)]+'\x20('+this[_0x5f1499(0x51f)][_0x5f1499(0x2e6)]+_0x5f1499(0x515)+_0x7526b0),new A(_0x7526b0?.[_0x5f1499(0x63b)]()||_0x7526b0);}}async[a0_0x3e22c7(0x24d)](_0xe388d9){const _0x46e83e=a0_0x3e22c7;let _0x5eda7f=await this[_0x46e83e(0x567)](_0xe388d9[_0x46e83e(0x24d)]);return await this[_0x46e83e(0x618)](_0xe388d9[_0x46e83e(0x357)],{..._0x5eda7f[_0x46e83e(0x1f0)]},_0xe388d9?.[_0x46e83e(0x26b)]);}async['convertToWebP'](_0x32d1bb,_0x525b13){const _0x4e4c86=a0_0x3e22c7;try{this[_0x4e4c86(0x187)][_0x4e4c86(0x461)](_0x4e4c86(0x2c5));let _0x26214d,_0x3a03fa=_0x525b13+'-'+new Date()[_0x4e4c86(0x3ae)]();this[_0x4e4c86(0x187)][_0x4e4c86(0x461)]('Hash\x20to\x20image\x20name:\x20'+_0x3a03fa);let _0x18dddf=''+(0x0,$[_0x4e4c86(0x72a)])(this[_0x4e4c86(0x669)],_0x3a03fa+'.webp');if(this[_0x4e4c86(0x187)][_0x4e4c86(0x461)](_0x4e4c86(0x5df)+_0x18dddf),(0x0,k['isBase64'])(_0x32d1bb)){this[_0x4e4c86(0x187)][_0x4e4c86(0x461)](_0x4e4c86(0x4e5));let _0x48213c=_0x32d1bb[_0x4e4c86(0x5b0)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x2edaaa=Buffer[_0x4e4c86(0x244)](_0x48213c,'base64');_0x26214d=''+(0x0,$[_0x4e4c86(0x72a)])(this[_0x4e4c86(0x669)],'temp-'+_0x3a03fa+_0x4e4c86(0x384)),this[_0x4e4c86(0x187)]['verbose'](_0x4e4c86(0x1b8)+_0x26214d),await(0x0,Ut[_0x4e4c86(0x30c)])(_0x2edaaa)[_0x4e4c86(0x66a)](_0x26214d),this['logger'][_0x4e4c86(0x461)](_0x4e4c86(0x4c2));}else{this['logger'][_0x4e4c86(0x461)](_0x4e4c86(0x42c));let _0x2583b=new Date()[_0x4e4c86(0x3ae)](),_0x5ed018=_0x32d1bb+_0x4e4c86(0x39c)+_0x2583b;this[_0x4e4c86(0x187)][_0x4e4c86(0x461)](_0x4e4c86(0x17d)+_0x5ed018);let _0x2fc455=await ue[_0x4e4c86(0x30c)][_0x4e4c86(0x17f)](_0x5ed018,{'responseType':_0x4e4c86(0x157)});this[_0x4e4c86(0x187)][_0x4e4c86(0x461)](_0x4e4c86(0x407));let _0x34cb3e=Buffer[_0x4e4c86(0x244)](_0x2fc455[_0x4e4c86(0x1d5)],'binary');_0x26214d=''+(0x0,$['join'])(this[_0x4e4c86(0x669)],_0x4e4c86(0x539)+_0x3a03fa+_0x4e4c86(0x384)),this[_0x4e4c86(0x187)][_0x4e4c86(0x461)](_0x4e4c86(0x1b8)+_0x26214d),await(0x0,Ut[_0x4e4c86(0x30c)])(_0x34cb3e)['toFile'](_0x26214d),this[_0x4e4c86(0x187)][_0x4e4c86(0x461)]('Image\x20created');}return await(0x0,Ut['default'])(_0x26214d)[_0x4e4c86(0x6d5)]()[_0x4e4c86(0x66a)](_0x18dddf),this[_0x4e4c86(0x187)][_0x4e4c86(0x461)]('Image\x20converted\x20to\x20WebP'),_[_0x4e4c86(0x6c7)](_0x26214d),this[_0x4e4c86(0x187)][_0x4e4c86(0x461)]('Temp\x20image\x20deleted'),_0x18dddf;}catch(_0x577051){console[_0x4e4c86(0x41f)](_0x4e4c86(0x224),_0x577051);}}async[a0_0x3e22c7(0x5b9)](_0x2ad2f7){const _0x199611=a0_0x3e22c7;let _0xbca359=await this[_0x199611(0x18b)](_0x2ad2f7[_0x199611(0x4b9)][_0x199611(0x293)],_0x2ad2f7['number']),_0x32345b=await this[_0x199611(0x618)](_0x2ad2f7['number'],{'sticker':{'url':_0xbca359}},_0x2ad2f7?.[_0x199611(0x26b)]);return _[_0x199611(0x6c7)](_0xbca359),this[_0x199611(0x187)]['verbose'](_0x199611(0x4b7)),_0x32345b;}async[a0_0x3e22c7(0x485)](_0x56ad2e){const _0x313727=a0_0x3e22c7;if(this[_0x313727(0x187)][_0x313727(0x461)](_0x313727(0x522)),!_0x56ad2e[_0x313727(0x26b)]?.[_0x313727(0x502)]&&_0x56ad2e[_0x313727(0x26b)]?.[_0x313727(0x502)]!==!0x1&&(_0x56ad2e[_0x313727(0x26b)]['encoding']=!0x0),_0x56ad2e[_0x313727(0x26b)]?.[_0x313727(0x502)]){let _0x3964ca=await this[_0x313727(0x51d)](_0x56ad2e[_0x313727(0x5d3)][_0x313727(0x4ee)]);if(typeof _0x3964ca==_0x313727(0x5cb)){let _0x224d3c=_[_0x313727(0x1b3)](_0x3964ca)['toString'](_0x313727(0x186)),_0x4c3ea=this['sendMessageWithTyping'](_0x56ad2e[_0x313727(0x357)],{'audio':Buffer[_0x313727(0x244)](_0x224d3c,'base64'),'ptt':!0x0,'mimetype':_0x313727(0x360)},{'presence':_0x313727(0x503),'delay':_0x56ad2e?.[_0x313727(0x26b)]?.[_0x313727(0x292)]});return _[_0x313727(0x6c7)](_0x3964ca),this[_0x313727(0x187)]['verbose'](_0x313727(0x321)),_0x4c3ea;}else throw new A(_0x3964ca);}return await this[_0x313727(0x618)](_0x56ad2e[_0x313727(0x357)],{'audio':(0x0,k['isURL'])(_0x56ad2e[_0x313727(0x5d3)][_0x313727(0x4ee)])?{'url':_0x56ad2e[_0x313727(0x5d3)]['audio']}:Buffer[_0x313727(0x244)](_0x56ad2e[_0x313727(0x5d3)][_0x313727(0x4ee)],_0x313727(0x186)),'ptt':!0x0,'mimetype':_0x313727(0x58e)},{'presence':'recording','delay':_0x56ad2e?.['options']?.[_0x313727(0x292)]});}async[a0_0x3e22c7(0x51d)](_0x1533b6){const _0x5d1ee4=a0_0x3e22c7;this[_0x5d1ee4(0x187)]['verbose']('Processing\x20audio');let _0x5b4686,_0x2d8461,_0x4564c3=(0x0,Lt['v4'])();if(this[_0x5d1ee4(0x187)][_0x5d1ee4(0x461)](_0x5d1ee4(0x52e)+_0x4564c3),(0x0,k[_0x5d1ee4(0x47c)])(_0x1533b6)){this[_0x5d1ee4(0x187)][_0x5d1ee4(0x461)](_0x5d1ee4(0x59c)),_0x2d8461=''+(0x0,$[_0x5d1ee4(0x72a)])(this['storePath'],_0x4564c3+_0x5d1ee4(0x3ef)),_0x5b4686=''+(0x0,$[_0x5d1ee4(0x72a)])(this[_0x5d1ee4(0x669)],_0x5d1ee4(0x539)+_0x4564c3+_0x5d1ee4(0x66c)),this[_0x5d1ee4(0x187)]['verbose']('Output\x20audio\x20path:\x20'+_0x2d8461),this[_0x5d1ee4(0x187)][_0x5d1ee4(0x461)](_0x5d1ee4(0x4c0)+_0x5b4686);let _0x515c56=new Date()[_0x5d1ee4(0x3ae)](),_0x5e8aa5=_0x1533b6+'?timestamp='+_0x515c56;this[_0x5d1ee4(0x187)][_0x5d1ee4(0x461)](_0x5d1ee4(0x69b)+_0x5e8aa5);let _0x5e4c4e=await ue['default'][_0x5d1ee4(0x17f)](_0x5e8aa5,{'responseType':_0x5d1ee4(0x157)});this[_0x5d1ee4(0x187)][_0x5d1ee4(0x461)]('Getting\x20audio\x20from\x20url'),_[_0x5d1ee4(0x1ac)](_0x5b4686,_0x5e4c4e[_0x5d1ee4(0x1d5)]);}else{this[_0x5d1ee4(0x187)][_0x5d1ee4(0x461)](_0x5d1ee4(0x2a3)),_0x2d8461=''+(0x0,$[_0x5d1ee4(0x72a)])(this['storePath'],_0x4564c3+_0x5d1ee4(0x3ef)),_0x5b4686=''+(0x0,$[_0x5d1ee4(0x72a)])(this['storePath'],_0x5d1ee4(0x539)+_0x4564c3+_0x5d1ee4(0x66c)),this['logger'][_0x5d1ee4(0x461)]('Output\x20audio\x20path:\x20'+_0x2d8461),this[_0x5d1ee4(0x187)][_0x5d1ee4(0x461)]('Temp\x20audio\x20path:\x20'+_0x5b4686);let _0x12627e=Buffer[_0x5d1ee4(0x244)](_0x1533b6,'base64');_[_0x5d1ee4(0x1ac)](_0x5b4686,_0x12627e),this['logger'][_0x5d1ee4(0x461)]('Temp\x20audio\x20created');}return this[_0x5d1ee4(0x187)][_0x5d1ee4(0x461)](_0x5d1ee4(0x53c)),new Promise((_0x2eadc8,_0x258825)=>{const _0x1f804a=_0x5d1ee4;(0x0,Vt[_0x1f804a(0x46d)])(uo[_0x1f804a(0x30c)][_0x1f804a(0x3a2)]+_0x1f804a(0x22d)+_0x5b4686+_0x1f804a(0x5e9)+_0x2d8461+'\x20-y',_0x43cba6=>{const _0x252732=_0x1f804a;_['unlinkSync'](_0x5b4686),this[_0x252732(0x187)]['verbose'](_0x252732(0x48e)),_0x43cba6&&_0x258825(_0x43cba6),this[_0x252732(0x187)]['verbose'](_0x252732(0x422)),_0x2eadc8(_0x2d8461);});});}async['buttonMessage'](_0x31fd10){const _0x14a643=a0_0x3e22c7;let _0x3e2748={},_0x322849=_0x14a643(0x342);if(_0x31fd10['buttonMessage']?.[_0x14a643(0x24d)]){_0x322849=_0x31fd10['buttonMessage']['mediaMessage']?.['mediatype']['toUpperCase']()??_0x14a643(0x342),_0x3e2748['mediaKey']=_0x322849[_0x14a643(0x67c)]()+'Message';let _0x450854=await this['prepareMediaMessage'](_0x31fd10[_0x14a643(0x3f9)]['mediaMessage']);_0x3e2748[_0x14a643(0x1f0)]=_0x450854[_0x14a643(0x1f0)][_0x3e2748[_0x14a643(0x2d9)]],_0x3e2748['contentText']='*'+_0x31fd10[_0x14a643(0x3f9)]['title']+_0x14a643(0x2ee)+_0x31fd10[_0x14a643(0x3f9)]['description'];}let _0x473dc6={'text':_0x31fd10[_0x14a643(0x3f9)][_0x14a643(0x60b)][_0x14a643(0x5a9)](_0x5c1d70=>_0x5c1d70[_0x14a643(0x2fc)]),'ids':_0x31fd10[_0x14a643(0x3f9)][_0x14a643(0x60b)]['map'](_0x4602f6=>_0x4602f6[_0x14a643(0x6af)])};if(!(0x0,k[_0x14a643(0x3e4)])(_0x473dc6[_0x14a643(0x5bc)])||!(0x0,k['arrayUnique'])(_0x473dc6[_0x14a643(0x68c)]))throw new g('Button\x20texts\x20cannot\x20be\x20repeated','Button\x20IDs\x20cannot\x20be\x20repeated.');return await this[_0x14a643(0x618)](_0x31fd10[_0x14a643(0x357)],{'buttonsMessage':{'text':_0x3e2748?.[_0x14a643(0x2d9)]?void 0x0:_0x31fd10[_0x14a643(0x3f9)][_0x14a643(0x3b2)],'contentText':_0x3e2748?.[_0x14a643(0x533)]??_0x31fd10['buttonMessage'][_0x14a643(0x6d6)],'footerText':_0x31fd10[_0x14a643(0x3f9)]?.[_0x14a643(0x2a5)],'buttons':_0x31fd10[_0x14a643(0x3f9)][_0x14a643(0x60b)][_0x14a643(0x5a9)](_0x24c90a=>({'buttonText':{'displayText':_0x24c90a['buttonText']},'buttonId':_0x24c90a['buttonId'],'type':0x1})),'headerType':w['proto']['Message']['ButtonsMessage'][_0x14a643(0x3e0)][_0x322849],[_0x3e2748?.[_0x14a643(0x2d9)]]:_0x3e2748?.['message']}},_0x31fd10?.['options']);}async['locationMessage'](_0x136b9d){const _0x3fa0c7=a0_0x3e22c7;return await this['sendMessageWithTyping'](_0x136b9d['number'],{'locationMessage':{'degreesLatitude':_0x136b9d['locationMessage']['latitude'],'degreesLongitude':_0x136b9d[_0x3fa0c7(0x3a8)][_0x3fa0c7(0x5a6)],'name':_0x136b9d[_0x3fa0c7(0x3a8)]?.['name'],'address':_0x136b9d[_0x3fa0c7(0x3a8)]?.[_0x3fa0c7(0x37c)]}},_0x136b9d?.[_0x3fa0c7(0x26b)]);}async['listMessage'](_0x570012){const _0x5f3fd7=a0_0x3e22c7;return await this[_0x5f3fd7(0x618)](_0x570012[_0x5f3fd7(0x357)],{'listMessage':{'title':_0x570012[_0x5f3fd7(0x220)][_0x5f3fd7(0x3b2)],'description':_0x570012[_0x5f3fd7(0x220)][_0x5f3fd7(0x6d6)],'buttonText':_0x570012[_0x5f3fd7(0x220)]?.[_0x5f3fd7(0x2fc)],'footerText':_0x570012[_0x5f3fd7(0x220)]?.['footerText'],'sections':_0x570012[_0x5f3fd7(0x220)][_0x5f3fd7(0x6bc)],'listType':0x1}},_0x570012?.[_0x5f3fd7(0x26b)]);}async[a0_0x3e22c7(0x326)](_0x3a17b3){const _0x48d47b=a0_0x3e22c7;let _0x5781f0={},_0x560ded=_0x2c8127=>{const _0x3e1c60=a0_0x33a7;let _0x370d4b='BEGIN:VCARD\x0aVERSION:3.0\x0aN:'+_0x2c8127['fullName']+'\x0aFN:'+_0x2c8127[_0x3e1c60(0x410)]+'\x0a';_0x2c8127['organization']&&(_0x370d4b+='ORG:'+_0x2c8127['organization']+';\x0a'),_0x2c8127['email']&&(_0x370d4b+=_0x3e1c60(0x40f)+_0x2c8127[_0x3e1c60(0x2cf)]+'\x0a'),_0x2c8127[_0x3e1c60(0x72e)]&&(_0x370d4b+='URL:'+_0x2c8127['url']+'\x0a');let _0x30dfa2='';return _0x2c8127[_0x3e1c60(0x587)]&&_0x2c8127[_0x3e1c60(0x587)]['split']('|')[_0x3e1c60(0x4e9)]((_0x2f3583,_0x241596)=>{const _0x2eae2b=_0x3e1c60;let _0x53b0a8=this[_0x2eae2b(0x687)](_0x2f3583)['replace'](_0x2eae2b(0x201),'');_0x30dfa2+=_0x2eae2b(0x709)+(_0x241596+0x1)+_0x2eae2b(0x530)+_0x53b0a8+':'+_0x2f3583+_0x2eae2b(0x67f)+(_0x241596+0x1)+_0x2eae2b(0x50e);}),_0x370d4b+=_0x30dfa2+_0x3e1c60(0x54b),_0x370d4b;};return _0x3a17b3[_0x48d47b(0x326)][_0x48d47b(0x2d6)]===0x1?_0x5781f0[_0x48d47b(0x326)]={'displayName':_0x3a17b3[_0x48d47b(0x326)][0x0][_0x48d47b(0x410)],'vcard':_0x560ded(_0x3a17b3[_0x48d47b(0x326)][0x0])}:_0x5781f0[_0x48d47b(0x4f7)]={'displayName':_0x3a17b3[_0x48d47b(0x326)][_0x48d47b(0x2d6)]+_0x48d47b(0x52a),'contacts':_0x3a17b3[_0x48d47b(0x326)]['map'](_0x5c1ef1=>({'displayName':_0x5c1ef1['fullName'],'vcard':_0x560ded(_0x5c1ef1)}))},await this[_0x48d47b(0x618)](_0x3a17b3['number'],{..._0x5781f0},_0x3a17b3?.['options']);}async[a0_0x3e22c7(0x5c3)](_0x5be2d4){const _0x1c73dd=a0_0x3e22c7;return await this[_0x1c73dd(0x618)](_0x5be2d4[_0x1c73dd(0x5c3)][_0x1c73dd(0x657)][_0x1c73dd(0x2c2)],{'reactionMessage':{'key':_0x5be2d4['reactionMessage']['key'],'text':_0x5be2d4[_0x1c73dd(0x5c3)][_0x1c73dd(0x2ec)]}});}async[a0_0x3e22c7(0x248)](_0x12a594){const _0x5eb556=a0_0x3e22c7;let _0x1d0719=[];for await(let _0x3efb64 of _0x12a594[_0x5eb556(0x2af)]){let _0x5ef25c=this['createJid'](_0x3efb64);if((0x0,w[_0x5eb556(0x28e)])(_0x5ef25c)){let _0x185fdd=await this[_0x5eb556(0x6ff)]({'groupJid':_0x5ef25c},_0x5eb556(0x594));_0x1d0719[_0x5eb556(0x6a8)](new fe(_0x185fdd[_0x5eb556(0x4c7)]['id'],!!_0x185fdd?.[_0x5eb556(0x4c7)]['id'],_0x185fdd?.[_0x5eb556(0x4c7)][_0x5eb556(0x204)]));}else try{let _0x717388=(await this['client'][_0x5eb556(0x4c4)](_0x5ef25c))[0x0];_0x1d0719[_0x5eb556(0x6a8)](new fe(_0x717388[_0x5eb556(0x4d4)],_0x717388['exists']));}catch{_0x1d0719[_0x5eb556(0x6a8)](new fe(_0x3efb64,!0x1));}}return _0x1d0719;}async[a0_0x3e22c7(0x1f4)](_0x5dda13){const _0x318c3d=a0_0x3e22c7;try{let _0x3d9632=_0x5dda13[_0x318c3d(0x393)]['filter'](_0x127de7=>(0x0,w[_0x318c3d(0x28e)])(_0x127de7[_0x318c3d(0x2c2)])||(0x0,w[_0x318c3d(0x156)])(_0x127de7[_0x318c3d(0x2c2)]))['map'](_0x5e1ef7=>({'remoteJid':_0x5e1ef7[_0x318c3d(0x2c2)],'fromMe':_0x5e1ef7[_0x318c3d(0x19f)],'id':_0x5e1ef7['id']}));await this[_0x318c3d(0x6ec)][_0x318c3d(0x393)](_0x3d9632);let _0xc02176=_0x3d9632[_0x318c3d(0x5a9)](_0x5a041a=>this[_0x318c3d(0x6bd)](_0x5a041a,_0x5a041a[_0x318c3d(0x2c2)],{'status':_0x318c3d(0x364),'owner':this['instance']['wuid']})),_0x34af20=_0x3d9632[_0x318c3d(0x5a9)](_0x4ba159=>D[_0x318c3d(0x2e8)]({'id':_0x4ba159[_0x318c3d(0x2c2)],'owner':this[_0x318c3d(0x51f)]['wuid']},{'$set':{'unreadcount':0x0}},{'new':!0x0})),[_0x38e1c3,_0x5797f3]=await Promise[_0x318c3d(0x1b7)]([Promise[_0x318c3d(0x1b7)](_0xc02176),Promise[_0x318c3d(0x1b7)](_0x34af20)]);return _0x5797f3['filter'](_0x89b0c9=>_0x89b0c9!==null)['forEach'](_0x198181=>{const _0x4e025a=_0x318c3d;q(this[_0x4e025a(0x202)],_0x4e025a(0x509),{'chat':_0x198181});}),{'message':'Read\x20messages','read':'success'};}catch(_0x52ab23){throw console[_0x318c3d(0x41f)](_0x318c3d(0x162),_0x52ab23),new A(_0x318c3d(0x1f3),_0x52ab23['toString']());}}async[a0_0x3e22c7(0x4d7)](_0x517e4b){const _0x442005=a0_0x3e22c7;let _0x41b6e5=await this[_0x442005(0x664)]({'where':{'key':{'remoteJid':_0x517e4b},'owner':this[_0x442005(0x51f)][_0x442005(0x3dc)]}}),_0x349051=_0x41b6e5['pop']();for(let _0x3c1879 of _0x41b6e5)_0x3c1879[_0x442005(0x297)]>=_0x349051[_0x442005(0x297)]&&(_0x349051=_0x3c1879);return _0x349051;}async[a0_0x3e22c7(0x714)](_0xb793db){const _0x7fd590=a0_0x3e22c7;this[_0x7fd590(0x187)][_0x7fd590(0x461)](_0x7fd590(0x26c));try{let _0x2003c0=_0xb793db['lastMessage'],_0x1235ac=_0xb793db[_0x7fd590(0x6e6)];if(!_0x2003c0&&_0x1235ac?_0x2003c0=await this[_0x7fd590(0x4d7)](_0x1235ac):(_0x2003c0=_0xb793db[_0x7fd590(0x4fc)],_0x2003c0[_0x7fd590(0x297)]=_0x2003c0?.[_0x7fd590(0x297)]??Date[_0x7fd590(0x43b)](),_0x1235ac=_0x2003c0?.['key']?.[_0x7fd590(0x2c2)]),!_0x2003c0||Object[_0x7fd590(0x5d2)](_0x2003c0)[_0x7fd590(0x2d6)]===0x0)throw new x('Last\x20message\x20not\x20found');return await this[_0x7fd590(0x6ec)][_0x7fd590(0x572)]({'archive':_0xb793db[_0x7fd590(0x3bd)],'lastMessages':[_0x2003c0]},this['createJid'](_0x1235ac)),{'chatId':_0x1235ac,'archived':!0x0};}catch(_0xd44a78){throw new A({'archived':!0x1,'message':[_0x7fd590(0x166),_0xd44a78[_0x7fd590(0x63b)]()]});}}async['deleteMessage'](_0x2e4bb2){const _0x4dfd3a=a0_0x3e22c7;try{let _0x1fa41a=await this['client'][_0x4dfd3a(0x3d5)](_0x2e4bb2[_0x4dfd3a(0x2c2)],{'delete':_0x2e4bb2});try{let _0x397c38=await this[_0x4dfd3a(0x6bd)](_0x2e4bb2,_0x2e4bb2[_0x4dfd3a(0x2c2)],{'status':'DELETED','owner':this[_0x4dfd3a(0x51f)][_0x4dfd3a(0x2e6)]});this[_0x4dfd3a(0x187)][_0x4dfd3a(0x461)](this[_0x4dfd3a(0x202)]+'\x20('+this[_0x4dfd3a(0x51f)][_0x4dfd3a(0x2e6)]+_0x4dfd3a(0x525)+_0x397c38);}catch(_0x15a503){console[_0x4dfd3a(0x41f)](_0x4dfd3a(0x168),_0x15a503);}return _0x1fa41a;}catch(_0x58b076){throw new A(_0x4dfd3a(0x302),_0x58b076?.[_0x4dfd3a(0x63b)]());}}async['getBase64FromMediaMessage'](_0x38105d){const _0x442473=a0_0x3e22c7;try{let _0x13cc05=_0x38105d?.['message']?_0x38105d:await this[_0x442473(0x678)](_0x38105d[_0x442473(0x657)],!0x0);for(let _0xe0074e of Zs)_0x13cc05[_0x442473(0x1f0)][_0xe0074e]&&(_0x13cc05['message']=_0x13cc05[_0x442473(0x1f0)][_0xe0074e][_0x442473(0x1f0)]);let _0x61c1b5,_0x515e91;for(let _0x536da0 of Xs)if(_0x61c1b5=_0x13cc05[_0x442473(0x1f0)][_0x536da0],_0x61c1b5){_0x515e91=_0x536da0;break;}if(!_0x61c1b5)throw _0x442473(0x6b9);typeof _0x61c1b5[_0x442473(0x2d9)]==_0x442473(0x245)&&(_0x13cc05[_0x442473(0x1f0)]=JSON[_0x442473(0x251)](JSON[_0x442473(0x5af)](_0x13cc05[_0x442473(0x1f0)])));let _0x51578c=await(0x0,w[_0x442473(0x639)])({'key':_0x13cc05?.[_0x442473(0x657)],'message':_0x13cc05?.[_0x442473(0x1f0)]},_0x442473(0x1aa),{},{'logger':(0x0,kt[_0x442473(0x30c)])({'level':_0x442473(0x41f)}),'reuploadRequest':this['client']['updateMediaMessage']});if(!(_0x51578c instanceof Buffer))throw new Error(_0x442473(0x721));let _0xe35cf9=this[_0x442473(0x3e5)][_0x442473(0x17f)](_0x442473(0x5f4)),_0x5e9282,_0xce4182;if(_0x61c1b5['fileName'])_0x5e9282=_0x61c1b5[_0x442473(0x1df)];else{let _0x3f3892=_0x61c1b5['mimetype']?.[_0x442473(0x6f6)](/\/(\w+)/),_0x38bdb7=_0x3f3892?_0x3f3892[0x1]:null;if(!_0x38bdb7)throw new Error('File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message');_0x5e9282=(0x0,Lt['v4'])()+'.'+_0x38bdb7;}_0x515e91===_0x442473(0x5d3)&&_0x61c1b5[_0x442473(0x3ff)]===_0x442473(0x370)?(_0x5e9282=(0x0,Lt['v4'])()+'.ogg',_0xce4182=_0x442473(0x480)+await this[_0x442473(0x51d)](_0x51578c[_0x442473(0x63b)](_0x442473(0x186)))):(await this[_0x442473(0x574)](_0x51578c,_0x5e9282),_0xce4182=_0x442473(0x480)+_0x5e9282);let _0x10a887=this[_0x442473(0x3e5)][_0x442473(0x17f)](_0x442473(0x2f9)),_0x9df0bb=this[_0x442473(0x3e5)][_0x442473(0x17f)]('SERVER')['PORT'],_0x2f8cec=_0x10a887&&_0x10a887[_0x442473(0x36e)][_0x442473(0x209)]('/')[0x4];_0x9df0bb===0x1bb&&(_0xce4182=''+(_0x442473(0x4dd)+_0x2f8cec)+_0xce4182);let _0x2ccdfd=0xc*0x3c*0x3c*0x3e8;if(_0xe35cf9[_0x442473(0x5d8)]){let _0x4ace63={'where':{'key':{'id':_0x13cc05[_0x442473(0x657)]['id'],'remoteJid':_0x13cc05[_0x442473(0x657)][_0x442473(0x2c2)],'fromMe':_0x13cc05[_0x442473(0x657)]['fromMe']},'owner':this[_0x442473(0x51f)][_0x442473(0x2e6)]}};_0x13cc05[_0x442473(0x657)][_0x442473(0x2c2)][_0x442473(0x71c)](_0x442473(0x373))&&(_0x4ace63['where']['key'][_0x442473(0x406)]=_0x13cc05[_0x442473(0x657)]['participant']);let _0x153471={'message_normalized.fileUrl':_0xce4182,'message_normalized.expires_fileUrl':Date[_0x442473(0x43b)]()+_0x2ccdfd};try{let _0x2b07b1=await this[_0x442473(0x3da)][_0x442473(0x1f0)][_0x442473(0x64c)](_0x4ace63,_0x153471);_0x2b07b1&&q(this[_0x442473(0x202)],_0x442473(0x2d1),{'message':_0x2b07b1});}catch{}}return{'mediaType':_0x515e91,'fileName':_0x61c1b5['fileName'],'caption':_0x61c1b5[_0x442473(0x56a)],'size':{'fileLength':_0x61c1b5['fileLength'],'height':_0x61c1b5['height'],'width':_0x61c1b5[_0x442473(0x2a0)]},'mimetype':_0x61c1b5[_0x442473(0x3ff)],'base64':_0x51578c[_0x442473(0x63b)](_0x442473(0x186)),'fileUrl':_0xce4182,'expires_fileUrl':Date['now']()+_0x2ccdfd};}catch(_0x154d16){throw this[_0x442473(0x187)][_0x442473(0x41f)](this['instanceName']+'\x20('+this[_0x442473(0x51f)][_0x442473(0x2e6)]+_0x442473(0x515)+_0x154d16),new g(_0x154d16[_0x442473(0x63b)]());}}async[a0_0x3e22c7(0x574)](_0x52ccce,_0x20b99f){const _0x40ba7d=a0_0x3e22c7;console[_0x40ba7d(0x4b3)]('Initial\x20__dirname:',__dirname),console[_0x40ba7d(0x4b3)](_0x40ba7d(0x5d7),_0x20b99f);let _0x50a4c0=$['default']['join'](__dirname,_0x40ba7d(0x5cd));console[_0x40ba7d(0x4b3)](_0x40ba7d(0x65f),_0x50a4c0),_[_0x40ba7d(0x5c9)](_0x50a4c0)||(this['logger'][_0x40ba7d(0x4b3)]('Media\x20folder\x20does\x20not\x20exist,\x20creating\x20folder...'),_[_0x40ba7d(0x51b)](_0x50a4c0,{'recursive':!0x0}));let _0x1dbe9e=$[_0x40ba7d(0x30c)][_0x40ba7d(0x72a)](_0x50a4c0,_0x20b99f);return console[_0x40ba7d(0x4b3)](_0x40ba7d(0x57b),_0x1dbe9e),new Promise((_0x142119,_0xe83606)=>{const _0x529f18=_0x40ba7d;_[_0x529f18(0x722)](_0x1dbe9e,_0x52ccce,_0x2fd386=>{const _0x563b60=_0x529f18;_0x2fd386?(this[_0x563b60(0x187)][_0x563b60(0x41f)](_0x563b60(0x3d4)+_0x2fd386[_0x563b60(0x1f0)]),_0xe83606(_0x2fd386)):(this['logger'][_0x563b60(0x4b3)]('File\x20written\x20to\x20path:\x20'+_0x1dbe9e),_0x142119(_0x1dbe9e));});});}async[a0_0x3e22c7(0x5d4)](_0x4e655e){const _0xf19c58=a0_0x3e22c7;return _0x4e655e?.[_0xf19c58(0x3aa)]?_0x4e655e[_0xf19c58(0x3aa)]['owner']=this[_0xf19c58(0x51f)][_0xf19c58(0x2e6)]:_0x4e655e={'where':{'owner':this[_0xf19c58(0x51f)][_0xf19c58(0x2e6)]}},await this[_0xf19c58(0x3da)][_0xf19c58(0x514)]['find'](_0x4e655e);}async[a0_0x3e22c7(0x664)](_0xb88704){const _0x40dac6=a0_0x3e22c7;return _0xb88704?.[_0x40dac6(0x3aa)]?_0xb88704[_0x40dac6(0x3aa)][_0x40dac6(0x40b)]=this[_0x40dac6(0x51f)]['wuid']:_0xb88704={'where':{'owner':this[_0x40dac6(0x51f)][_0x40dac6(0x2e6)]},'limit':_0xb88704?.[_0x40dac6(0x3f6)]},await this[_0x40dac6(0x3da)]['message'][_0x40dac6(0x445)](_0xb88704);}async[a0_0x3e22c7(0x2f4)](_0x577159){const _0x57af66=a0_0x3e22c7;return _0x577159?.[_0x57af66(0x3aa)]?_0x577159['where']['owner']=this[_0x57af66(0x51f)][_0x57af66(0x2e6)]:_0x577159={'where':{'owner':this['instance'][_0x57af66(0x2e6)]},'limit':_0x577159?.[_0x57af66(0x3f6)]},await this[_0x57af66(0x3da)][_0x57af66(0x1ad)][_0x57af66(0x445)](_0x577159);}async['fetchChats'](){const _0x4a47ca=a0_0x3e22c7;return await this[_0x4a47ca(0x3da)][_0x4a47ca(0x6e6)]['find']({'where':{'owner':this[_0x4a47ca(0x51f)][_0x4a47ca(0x2e6)]}});}async[a0_0x3e22c7(0x328)](){const _0x5346af=a0_0x3e22c7;return await this[_0x5346af(0x6ec)][_0x5346af(0x328)]();}async[a0_0x3e22c7(0x2a4)](_0x2803b0){const _0x2b853d=a0_0x3e22c7;try{return await this[_0x2b853d(0x6ec)][_0x2b853d(0x2cd)](_0x2803b0[_0x2b853d(0x43d)][_0x2b853d(0x3be)]),await this[_0x2b853d(0x6ec)]['updateProfilePicturePrivacy'](_0x2803b0['privacySettings']['profile']),await this[_0x2b853d(0x6ec)]['updateStatusPrivacy'](_0x2803b0[_0x2b853d(0x43d)][_0x2b853d(0x654)]),await this[_0x2b853d(0x6ec)][_0x2b853d(0x31c)](_0x2803b0['privacySettings'][_0x2b853d(0x230)]),await this['client'][_0x2b853d(0x383)](_0x2803b0[_0x2b853d(0x43d)][_0x2b853d(0x3e6)]),await this[_0x2b853d(0x6ec)][_0x2b853d(0x67e)](_0x2803b0[_0x2b853d(0x43d)][_0x2b853d(0x372)]),this[_0x2b853d(0x6ec)]?.['ws']?.[_0x2b853d(0x1a2)](),{'update':_0x2b853d(0x43e),'data':{'readreceipts':_0x2803b0[_0x2b853d(0x43d)][_0x2b853d(0x3be)],'profile':_0x2803b0[_0x2b853d(0x43d)][_0x2b853d(0x43a)],'status':_0x2803b0[_0x2b853d(0x43d)][_0x2b853d(0x654)],'online':_0x2803b0['privacySettings'][_0x2b853d(0x230)],'last':_0x2803b0[_0x2b853d(0x43d)][_0x2b853d(0x3e6)],'groupadd':_0x2803b0['privacySettings'][_0x2b853d(0x372)]}};}catch(_0x2805e5){throw new A(_0x2b853d(0x5ef),_0x2805e5[_0x2b853d(0x63b)]());}}async[a0_0x3e22c7(0x3d2)](_0x523f43){const _0x24ad1a=a0_0x3e22c7;let _0x2534c0=_0x523f43?this[_0x24ad1a(0x687)](_0x523f43):this[_0x24ad1a(0x6ec)]?.[_0x24ad1a(0x70a)]?.['id'];this[_0x24ad1a(0x187)][_0x24ad1a(0x461)](_0x24ad1a(0x22a)+_0x2534c0);try{if(this[_0x24ad1a(0x187)]['verbose'](_0x24ad1a(0x25c)),_0x523f43){let _0x445d66=(await this[_0x24ad1a(0x248)]({'numbers':[_0x2534c0]}))?.[_0x24ad1a(0x585)](),_0x3eb025=await this[_0x24ad1a(0x546)](_0x445d66?.[_0x24ad1a(0x4d4)]),_0x48055a=await this[_0x24ad1a(0x662)](_0x445d66?.['jid']),_0x4e6d84=await this[_0x24ad1a(0x501)](_0x445d66?.['jid']);return{'wuid':_0x445d66?.[_0x24ad1a(0x4d4)]||_0x2534c0,'name':_0x445d66?.['name'],'numberExists':_0x445d66?.['exists'],'picture':_0x3eb025?.['profilePictureUrl'],'status':_0x48055a?.['status'],'isBusiness':_0x4e6d84[_0x24ad1a(0x4b5)],'email':_0x4e6d84?.[_0x24ad1a(0x2cf)],'description':_0x4e6d84?.[_0x24ad1a(0x6d6)],'website':_0x4e6d84?.[_0x24ad1a(0x66d)]?.[_0x24ad1a(0x585)]()};}}catch{return this[_0x24ad1a(0x187)][_0x24ad1a(0x461)](_0x24ad1a(0x3c2)),{'wuid':_0x2534c0,'name':null,'picture':null,'status':null,'os':null,'isBusiness':!0x1};}}async['fetchProfile'](_0x3cbd40){const _0x52f549=a0_0x3e22c7;let _0x504ab9=_0x3cbd40?this[_0x52f549(0x687)](_0x3cbd40):this[_0x52f549(0x6ec)]?.[_0x52f549(0x70a)]?.['id'];this['logger'][_0x52f549(0x461)](_0x52f549(0x5f2)+_0x504ab9);let _0x2018bc=await Fe[_0x52f549(0x635)]({'id':_0x504ab9}),_0x3e7a66=_0x2018bc?_0x2018bc[_0x52f549(0x441)]:null;try{let _0x1762d8=(await this['whatsappNumber']({'numbers':[_0x504ab9]}))?.[_0x52f549(0x585)](),_0x5bdbeb=await this[_0x52f549(0x546)](_0x1762d8?.[_0x52f549(0x4d4)]),_0x493857=await this[_0x52f549(0x662)](_0x1762d8?.[_0x52f549(0x4d4)]),_0x18b2c5=await this[_0x52f549(0x501)](_0x1762d8?.['jid']),_0x96b8eb={'imagechat':_0x5bdbeb?.['profilePictureUrl'],'contactname':_0x3e7a66||null,'status':_0x493857?.[_0x52f549(0x654)],'isBusiness':_0x18b2c5[_0x52f549(0x4b5)],'email':_0x18b2c5?.[_0x52f549(0x2cf)],'description':_0x18b2c5?.[_0x52f549(0x6d6)],'website':_0x18b2c5?.[_0x52f549(0x66d)]?.['shift'](),'lastcache':Date['now']()},_0x1d78f2=await D[_0x52f549(0x2e8)]({'id':_0x504ab9,'owner':this[_0x52f549(0x51f)][_0x52f549(0x2e6)]},{'$set':_0x96b8eb,'$setOnInsert':{'name':_0x1762d8?.[_0x52f549(0x3dc)]||null}},{'upsert':!0x0,'new':!0x0});return _0x1d78f2&&q(this[_0x52f549(0x202)],_0x52f549(0x509),{'chat':_0x1d78f2}),_0x96b8eb;}catch(_0x388447){return this['logger'][_0x52f549(0x41f)](_0x52f549(0x3bb)+_0x388447),{};}}async['fetchBusinessProfile'](_0x21d5d9){const _0x284b0f=a0_0x3e22c7;this['logger']['verbose'](_0x284b0f(0x210));try{let _0x595edc=_0x21d5d9?this[_0x284b0f(0x687)](_0x21d5d9):this[_0x284b0f(0x51f)]['wuid'],_0x5d420f=await this['client'][_0x284b0f(0x65a)](_0x595edc);return this['logger'][_0x284b0f(0x461)](_0x284b0f(0x2c1)),_0x5d420f?(this[_0x284b0f(0x187)][_0x284b0f(0x461)](_0x284b0f(0x299)),{'isBusiness':!0x0,..._0x5d420f}):{'isBusiness':!0x1,'message':_0x284b0f(0x497),...(await this[_0x284b0f(0x248)]({'numbers':[_0x595edc]}))?.[_0x284b0f(0x585)]()};}catch(_0x80474c){throw new A(_0x284b0f(0x279),_0x80474c[_0x284b0f(0x63b)]());}}async[a0_0x3e22c7(0x662)](_0x1a1cf7){const _0xf96d66=a0_0x3e22c7;let _0x3066b8=this[_0xf96d66(0x687)](_0x1a1cf7);try{return{'wuid':_0x3066b8,'status':(await this[_0xf96d66(0x6ec)]['fetchStatus'](_0x3066b8))?.[_0xf96d66(0x654)]};}catch{return{'wuid':_0x3066b8,'status':null};}}async[a0_0x3e22c7(0x238)](_0x7f9936){const _0x179cc1=a0_0x3e22c7;try{return await this['client'][_0x179cc1(0x238)](_0x7f9936),{'update':'success'};}catch(_0x5a863e){throw new A(_0x179cc1(0x279),_0x5a863e[_0x179cc1(0x63b)]());}}async[a0_0x3e22c7(0x236)](_0x3ce030){const _0x273baa=a0_0x3e22c7;try{return await this[_0x273baa(0x6ec)]['updateProfileStatus'](_0x3ce030),{'update':_0x273baa(0x43e)};}catch(_0x4e4cf3){throw new A(_0x273baa(0x486),_0x4e4cf3[_0x273baa(0x63b)]());}}async['updateProfilePicture'](_0x474759){const _0x4996d8=a0_0x3e22c7;try{let _0x472e19;if((0x0,k[_0x4996d8(0x47c)])(_0x474759)){let _0x5d4e0d=new Date()[_0x4996d8(0x3ae)](),_0x5cd768=_0x474759+_0x4996d8(0x39c)+_0x5d4e0d;_0x472e19=(await ue[_0x4996d8(0x30c)][_0x4996d8(0x17f)](_0x5cd768,{'responseType':_0x4996d8(0x157)}))[_0x4996d8(0x1d5)];}else{if((0x0,k[_0x4996d8(0x718)])(_0x474759))_0x472e19=Buffer[_0x4996d8(0x244)](_0x474759,_0x4996d8(0x186));else throw new g('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this['client'][_0x4996d8(0x64d)](this['instance'][_0x4996d8(0x2e6)],_0x472e19),{'update':_0x4996d8(0x43e)};}catch(_0x318ec8){throw new A('Error\x20updating\x20profile\x20picture',_0x318ec8['toString']());}}async['removeProfilePicture'](){const _0x5907ce=a0_0x3e22c7;try{return await this[_0x5907ce(0x6ec)][_0x5907ce(0x626)](this[_0x5907ce(0x51f)][_0x5907ce(0x2e6)]),{'update':_0x5907ce(0x43e)};}catch(_0x23d90b){throw new A('Error\x20removing\x20profile\x20picture',_0x23d90b[_0x5907ce(0x63b)]());}}async[a0_0x3e22c7(0x517)](_0x407084){const _0x1371e1=a0_0x3e22c7;try{let _0x46e1a7=_0x407084[_0x1371e1(0x6fd)][_0x1371e1(0x5a9)](_0x1e8635=>this[_0x1371e1(0x687)](_0x1e8635)),{id:_0x37c268}=await this[_0x1371e1(0x6ec)][_0x1371e1(0x5e6)](_0x407084['subject'],_0x46e1a7);return _0x407084?.[_0x1371e1(0x6d6)]&&await this['client'][_0x1371e1(0x329)](_0x37c268,_0x407084['description']),{'metadata':await this[_0x1371e1(0x6ec)][_0x1371e1(0x38d)](_0x37c268)};}catch(_0x177470){throw this[_0x1371e1(0x187)]['error'](this['instanceName']+'\x20('+this[_0x1371e1(0x51f)][_0x1371e1(0x2e6)]+_0x1371e1(0x515)+_0x177470),new A(_0x1371e1(0x27a),_0x177470[_0x1371e1(0x63b)]());}}async[a0_0x3e22c7(0x26e)](_0xd62c93){const _0x5e6bd5=a0_0x3e22c7;try{let _0x52fcbd;if((0x0,k['isURL'])(_0xd62c93[_0x5e6bd5(0x293)])){let _0x43b2d9=new Date()[_0x5e6bd5(0x3ae)](),_0x7a3e1d=_0xd62c93[_0x5e6bd5(0x293)]+_0x5e6bd5(0x39c)+_0x43b2d9;_0x52fcbd=(await ue[_0x5e6bd5(0x30c)][_0x5e6bd5(0x17f)](_0x7a3e1d,{'responseType':'arraybuffer'}))[_0x5e6bd5(0x1d5)];}else{if((0x0,k[_0x5e6bd5(0x718)])(_0xd62c93['image']))_0x52fcbd=Buffer[_0x5e6bd5(0x244)](_0xd62c93[_0x5e6bd5(0x293)],_0x5e6bd5(0x186));else throw new g('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this[_0x5e6bd5(0x6ec)][_0x5e6bd5(0x64d)](_0xd62c93[_0x5e6bd5(0x4e3)],_0x52fcbd),{'update':_0x5e6bd5(0x43e)};}catch(_0x5c1dcc){throw new A('Error\x20update\x20group\x20picture',_0x5c1dcc[_0x5e6bd5(0x63b)]());}}async['findGroup'](_0x3804a6,_0x30b04b=a0_0x3e22c7(0x37a)){const _0x7359a6=a0_0x3e22c7;try{let _0x139f6d=await this[_0x7359a6(0x6ec)]['groupMetadata'](_0x3804a6['groupJid']),_0x48d282=null;try{_0x48d282=await this['client'][_0x7359a6(0x3c7)](_0x3804a6[_0x7359a6(0x4e3)],_0x7359a6(0x293));}catch(_0x597d5a){this[_0x7359a6(0x187)][_0x7359a6(0x461)](this[_0x7359a6(0x202)]+'\x20('+this[_0x7359a6(0x51f)][_0x7359a6(0x2e6)]+_0x7359a6(0x4df)+_0x3804a6[_0x7359a6(0x4e3)]+':\x20'+_0x597d5a['toString']());}let _0x6a5cd4=await D['findOneAndUpdate']({'id':_0x3804a6['groupJid'],'owner':this[_0x7359a6(0x51f)]['wuid']},{'$set':{'imagechat':_0x48d282,'name':_0x139f6d[_0x7359a6(0x204)],'group_size':_0x139f6d[_0x7359a6(0x684)],'group_announce':_0x139f6d['announce'],'lastcache':Date[_0x7359a6(0x43b)]()}},{'new':!0x0,'upsert':!0x0});return _0x6a5cd4&&q(this[_0x7359a6(0x202)],_0x7359a6(0x509),{'chat':_0x6a5cd4}),{'metadata':_0x139f6d,'image':_0x48d282};}catch(_0x399f79){if(_0x30b04b==='inner')return;throw new x('Error\x20fetching\x20group',_0x399f79['toString']());}}async[a0_0x3e22c7(0x403)](_0x511330){const _0x2a72c1=a0_0x3e22c7;try{return await this['client']['groupUpdateDescription'](_0x511330[_0x2a72c1(0x4e3)],_0x511330[_0x2a72c1(0x6d6)]),{'update':'success'};}catch(_0x340be3){throw new A('Error\x20change\x20group\x20description',_0x340be3['toString']());}}async[a0_0x3e22c7(0x1eb)](_0x387e38){const _0x4ed458=a0_0x3e22c7;try{return await this[_0x4ed458(0x6ec)][_0x4ed458(0x56b)](_0x387e38[_0x4ed458(0x4e3)],_0x387e38[_0x4ed458(0x3dc)]),{'update':_0x4ed458(0x43e)};}catch(_0x3a3914){throw new A(_0x4ed458(0x2c9),_0x3a3914['toString']());}}async[a0_0x3e22c7(0x2c6)](_0x5dd249){const _0x40fb5c=a0_0x3e22c7;try{return await this[_0x40fb5c(0x6ec)][_0x40fb5c(0x3a7)](_0x5dd249['groupJid'],_0x5dd249['setting']),{'update':'success'};}catch(_0x4b244f){throw new A(_0x40fb5c(0x5ff),_0x4b244f[_0x40fb5c(0x63b)]());}}async['findGroups'](){const _0x558ec2=a0_0x3e22c7;try{let _0x40bd09=[],_0x1647c3=await this[_0x558ec2(0x6ec)][_0x558ec2(0x47b)](),_0x2a396c=Object[_0x558ec2(0x2c8)](_0x1647c3),_0x126e67=_0x2a396c[_0x558ec2(0x2a7)](_0x50ab4d=>(0x0,w[_0x558ec2(0x28e)])(_0x50ab4d?.['id']))[_0x558ec2(0x5a9)](async _0x576c9b=>{const _0x4c2fe3=_0x558ec2;try{return await this[_0x4c2fe3(0x6ec)]['profilePictureUrl'](_0x576c9b['id'],_0x4c2fe3(0x293));}catch(_0x31341c){return this[_0x4c2fe3(0x187)]['verbose'](this[_0x4c2fe3(0x202)]+'\x20('+this[_0x4c2fe3(0x51f)]['wuid']+_0x4c2fe3(0x4df)+_0x576c9b['id']+':\x20'+_0x31341c['toString']()),null;}}),_0x3161e4=await Promise[_0x558ec2(0x1b7)](_0x126e67);for(let _0x1c0ae8=0x0;_0x1c0ae8<_0x2a396c['length'];_0x1c0ae8++){let _0x5ed6ab=_0x2a396c[_0x1c0ae8];(0x0,w[_0x558ec2(0x28e)])(_0x5ed6ab?.['id'])&&_0x40bd09[_0x558ec2(0x6a8)]({'groupJid':_0x5ed6ab?.['id'],'subject':_0x5ed6ab?.[_0x558ec2(0x204)],'subjectOwner':_0x5ed6ab?.[_0x558ec2(0x2d7)]?.[_0x558ec2(0x209)]('@')[0x0],'subjectTime':_0x5ed6ab?.[_0x558ec2(0x48d)],'size':_0x5ed6ab?.[_0x558ec2(0x6fd)]?.[_0x558ec2(0x2d6)],'owner':_0x5ed6ab?.[_0x558ec2(0x40b)]?.[_0x558ec2(0x209)]('@')[0x0],'creation':_0x5ed6ab?.[_0x558ec2(0x2bf)],'desc':_0x5ed6ab?.[_0x558ec2(0x459)],'restrict':_0x5ed6ab?.[_0x558ec2(0x35c)],'announce':_0x5ed6ab?.[_0x558ec2(0x496)],'image':_0x3161e4[_0x1c0ae8]});}return _0x40bd09;}catch(_0x21be66){throw new x(_0x558ec2(0x45e),_0x21be66['toString']());}}async['inviteCode'](_0x668ada){const _0x4f3e8f=a0_0x3e22c7;try{let _0x3b4b34=await this[_0x4f3e8f(0x6ec)][_0x4f3e8f(0x482)](_0x668ada[_0x4f3e8f(0x4e3)]);return{'inviteUrl':'https://chat.whatsapp.com/'+_0x3b4b34,'inviteCode':_0x3b4b34};}catch(_0x3feb5f){throw new x(_0x4f3e8f(0x26d),_0x3feb5f[_0x4f3e8f(0x63b)]());}}async[a0_0x3e22c7(0x4a0)](_0x41b9d4){const _0x5bcd39=a0_0x3e22c7;try{let _0x21e425=await this['client']['groupRevokeInvite'](_0x41b9d4[_0x5bcd39(0x4e3)]);return{'revoked':!0x0,'inviteUrl':'https://chat.whatsapp.com/'+_0x21e425,'inviteCode':_0x21e425};}catch(_0x24a35c){throw new x(_0x5bcd39(0x5ae),_0x24a35c[_0x5bcd39(0x63b)]());}}async['joinGroup'](_0x238f8e){const _0x104796=a0_0x3e22c7;try{if((0x0,k[_0x104796(0x47c)])(_0x238f8e[_0x104796(0x455)]))var _0x3b1b00=_0x238f8e[_0x104796(0x455)]['split']('/')[0x3];else var _0x3b1b00=_0x238f8e[_0x104796(0x455)];let _0x2f67fa=await this[_0x104796(0x6ec)][_0x104796(0x415)](_0x3b1b00);return this['logger'][_0x104796(0x461)](this['instanceName']+'\x20('+this[_0x104796(0x51f)][_0x104796(0x2e6)]+_0x104796(0x515)+_0x2f67fa),{'join':!0x0,'inviteCode':_0x3b1b00,'groupJid':_0x2f67fa};}catch(_0xd121e1){throw new x('No\x20join\x20group\x20invite\x20code\x20or\x20url',_0xd121e1[_0x104796(0x63b)]());}}async[a0_0x3e22c7(0x521)](_0x58258d){const _0x2c9f43=a0_0x3e22c7;try{return{'participants':(await this[_0x2c9f43(0x6ec)][_0x2c9f43(0x38d)](_0x58258d[_0x2c9f43(0x4e3)]))['participants']};}catch(_0x434a19){throw new x(_0x2c9f43(0x3f4),_0x434a19[_0x2c9f43(0x63b)]());}}async[a0_0x3e22c7(0x588)](_0x3505ea){const _0x45e614=a0_0x3e22c7;try{let _0x1c659f=_0x3505ea[_0x45e614(0x6fd)][_0x45e614(0x5a9)](_0x255ed6=>this['createJid'](_0x255ed6));return{'updateParticipants':await this[_0x45e614(0x6ec)][_0x45e614(0x6ba)](_0x3505ea[_0x45e614(0x4e3)],_0x1c659f,_0x3505ea[_0x45e614(0x629)])};}catch(_0x40de02){throw new g(_0x45e614(0x716),_0x40de02[_0x45e614(0x63b)]());}}async[a0_0x3e22c7(0x631)](_0x379cb4){const _0x75b552=a0_0x3e22c7;try{let _0x58b6ae=await this[_0x75b552(0x6ec)][_0x75b552(0x701)](_0x379cb4['groupJid'],_0x379cb4[_0x75b552(0x388)]);return{'success':!0x0};}catch(_0x1ad5c8){throw new g('Error\x20updating\x20setting',_0x1ad5c8['toString']());}}async[a0_0x3e22c7(0x195)](_0x2dd3a6){const _0x3dcfc6=a0_0x3e22c7;try{return await this['client'][_0x3dcfc6(0x6d8)](_0x2dd3a6[_0x3dcfc6(0x4e3)]),{'groupJid':_0x2dd3a6[_0x3dcfc6(0x4e3)],'leave':!0x0};}catch(_0x260673){throw new g(_0x3dcfc6(0x1d0),_0x260673['toString']());}}async['pollMessage'](_0x5ef27b){const _0x4ffee4=a0_0x3e22c7;return await this['sendMessageWithTyping'](_0x5ef27b[_0x4ffee4(0x357)],{'poll':{'name':_0x5ef27b[_0x4ffee4(0x4c9)]?.[_0x4ffee4(0x3dc)],'selectableCount':_0x5ef27b[_0x4ffee4(0x4c9)][_0x4ffee4(0x213)],'values':_0x5ef27b[_0x4ffee4(0x4c9)]['values']}},_0x5ef27b?.[_0x4ffee4(0x26b)]);}async[a0_0x3e22c7(0x6bd)](_0x486722,_0x25ae67,_0x3e36d6){const _0x277878=a0_0x3e22c7;if(await this['getMessage'](_0x486722,!0x0)){let _0xd9ab85={'where':{'key':{'id':_0x486722['id'],'remoteJid':_0x25ae67,'fromMe':_0x486722[_0x277878(0x19f)]},'owner':this[_0x277878(0x51f)][_0x277878(0x2e6)]}},_0x40f6f8={'status':[_0x3e36d6['status']][0x0]};try{let _0x2a9bba=await this['repository'][_0x277878(0x1f0)][_0x277878(0x64c)](_0xd9ab85,_0x40f6f8);_0x2a9bba&&q(this[_0x277878(0x202)],_0x277878(0x2d1),{'message':_0x2a9bba});}catch{}}}[a0_0x3e22c7(0x1de)](_0x2989bb){const _0x3ce2df=a0_0x3e22c7;let _0x37d154=_0x2989bb['replace'](/\\n/g,'\x0a')['split']('\x0a')[_0x3ce2df(0x2a7)](_0x14a0d8=>_0x14a0d8[_0x3ce2df(0x457)](_0x3ce2df(0x691))||_0x14a0d8[_0x3ce2df(0x457)](_0x3ce2df(0x5eb))),_0x39d0f2='';return _0x37d154['forEach'](_0x4b87fe=>{const _0xb5aee1=_0x3ce2df;let _0x1b79a5=/TEL(?:.*):(.+)/,_0x4af5eb=/EMAIL(?:.*):(.+)/,_0x39229f=_0x4b87fe[_0xb5aee1(0x6f6)](_0x1b79a5),_0x5de8e1=_0x4b87fe[_0xb5aee1(0x6f6)](_0x4af5eb);if(_0x39229f){let _0x39a4f4=_0x39229f[0x1][_0xb5aee1(0x5b0)](/-| |\+|\(|\)/g,'')[_0xb5aee1(0x4aa)]();_0x39d0f2+=_0xb5aee1(0x2d4)+_0x39a4f4+'\x0a';}else{if(_0x5de8e1){let _0x4dde2c=_0x5de8e1[0x1]['trim']();_0x39d0f2+='E-mail:\x20'+_0x4dde2c+'\x0a';}}}),_0x39d0f2['trim']();}async[a0_0x3e22c7(0x433)](_0x199bdf,_0x1cd507,_0xa46ca2){const _0x10599=a0_0x3e22c7;let _0x51e1e5=_0x1cd507[_0x10599(0x657)][_0x10599(0x2c2)],_0xe94fb4=_0x1cd507['key'][_0x10599(0x19f)],_0x18a1d3=_0x51e1e5[_0x10599(0x71c)](_0x10599(0x373));if(!_0x199bdf[_0x10599(0x5d8)])return;let _0x513cce={'$set':{..._0xe94fb4?{'unreadcount':0x0,'lastmsg':_0x1cd507[_0x10599(0x297)]||Date[_0x10599(0x43b)]()}:{'lastmsg':_0x1cd507[_0x10599(0x297)]||Date[_0x10599(0x43b)]()},..._0xe94fb4||_0x18a1d3?{}:{'name':_0x1cd507[_0x10599(0x441)]}},'$setOnInsert':{'group':_0x18a1d3,'leadInfo.tags':[],'leadInfo.customFields':[],...!_0xe94fb4&&!_0x18a1d3?{'leadInfo.nome':_0x1cd507[_0x10599(0x441)]}:{}},..._0xe94fb4?{}:{'$inc':{'unreadcount':0x1}}},_0x394a3d={'new':!0x0,'upsert':!0x0,'setDefaultsOnInsert':!0x0},_0x4e1b13=await D[_0x10599(0x2e8)]({'id':_0x51e1e5,'owner':this[_0x10599(0x51f)][_0x10599(0x2e6)]},_0x513cce,_0x394a3d);if(_0x4e1b13?(!_0x18a1d3&&(!_0x4e1b13[_0x10599(0x184)]||!_0x4e1b13[_0x10599(0x184)][_0x10599(0x3ea)])&&_0x1cd507[_0x10599(0x441)]&&!_0xe94fb4&&(_0x513cce={'$set':{'leadInfo.nome':_0x1cd507[_0x10599(0x441)]}},_0x4e1b13=await D['findOneAndUpdate']({'id':_0x51e1e5,'owner':this[_0x10599(0x51f)][_0x10599(0x2e6)]},_0x513cce,_0x394a3d)),q(this['instanceName'],'chats',{'chat':_0x4e1b13})):this[_0x10599(0x187)][_0x10599(0x41f)](this['instanceName']+'\x20('+this[_0x10599(0x51f)]['wuid']+_0x10599(0x6f1)),!this[_0x10599(0x394)]?.[_0x10599(0x609)][_0x10599(0x688)])return this['logger'][_0x10599(0x461)](this[_0x10599(0x202)]+'\x20('+this[_0x10599(0x51f)][_0x10599(0x2e6)]+_0x10599(0x4a5)),null;if(_0x4e1b13['id'][_0x10599(0x457)](_0x10599(0x373))&&this[_0x10599(0x394)]?.['flowConfig'][_0x10599(0x6f2)]===!0x0)return this[_0x10599(0x187)][_0x10599(0x461)](this[_0x10599(0x202)]+'\x20('+this[_0x10599(0x51f)][_0x10599(0x2e6)]+_0x10599(0x5a7)),null;if(_0x4e1b13['leadInfo']){if(_0x4e1b13['leadInfo'][_0x10599(0x2cb)]===0x0||_0x4e1b13[_0x10599(0x184)][_0x10599(0x29f)])return this[_0x10599(0x187)][_0x10599(0x461)](this['instanceName']+'\x20('+this[_0x10599(0x51f)]['wuid']+_0x10599(0x487)+_0x51e1e5+_0x10599(0x35f)),null;if(_0x4e1b13[_0x10599(0x184)]['desativadoFluxoAte']>Date[_0x10599(0x43b)]())return this[_0x10599(0x187)]['verbose'](this[_0x10599(0x202)]+'\x20('+this['instance'][_0x10599(0x2e6)]+_0x10599(0x6cc)+new Date(_0x4e1b13[_0x10599(0x184)]['desativadoFluxoAte'])[_0x10599(0x615)]()+',\x20saindo.'),null;}this[_0x10599(0x187)][_0x10599(0x461)](this[_0x10599(0x202)]+'\x20('+this[_0x10599(0x51f)][_0x10599(0x2e6)]+'):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações'),this[_0x10599(0x3b3)](_0xa46ca2,_0x1cd507,this[_0x10599(0x51f)][_0x10599(0x2e6)]);}async['checkAndUpdateChats'](){const _0x3a00d3=a0_0x3e22c7;let _0x113cc9=await this[_0x3a00d3(0x3da)][_0x3a00d3(0x514)]['find']({'where':{'owner':this[_0x3a00d3(0x51f)][_0x3a00d3(0x2e6)]}}),_0x4c18cb=0x0,_0x2eb382=[];for(let _0x5f2c91 of _0x113cc9)_0x2eb382[_0x3a00d3(0x6a8)]({'updateOne':{'filter':{'id':_0x5f2c91['id'],'owner':this[_0x3a00d3(0x51f)][_0x3a00d3(0x2e6)]},'update':{'$set':{'contactname':_0x5f2c91[_0x3a00d3(0x441)]}}}}),_0x2eb382[_0x3a00d3(0x2d6)]===0x1f4&&(_0x4c18cb+=await this[_0x3a00d3(0x4ef)](_0x2eb382),_0x2eb382=[]);_0x2eb382[_0x3a00d3(0x2d6)]>0x0&&(_0x4c18cb+=await this[_0x3a00d3(0x4ef)](_0x2eb382)),this['logger'][_0x3a00d3(0x461)](this[_0x3a00d3(0x202)]+'\x20('+this[_0x3a00d3(0x51f)][_0x3a00d3(0x2e6)]+_0x3a00d3(0x515)+_0x4c18cb+_0x3a00d3(0x2a9)+this[_0x3a00d3(0x51f)][_0x3a00d3(0x2e6)]+_0x3a00d3(0x313));}async[a0_0x3e22c7(0x4ef)](_0xc657bc){const _0x4c4b3f=a0_0x3e22c7;return(await D[_0x4c4b3f(0x264)](_0xc657bc))[_0x4c4b3f(0x396)];}async[a0_0x3e22c7(0x426)](_0xfa6ca5,_0xf2c37a){const _0x3da505=a0_0x3e22c7;if(_0xf2c37a[_0x3da505(0x5d8)]){let _0x2ef87e=_0xfa6ca5['map'](async _0x31f1a4=>{const _0x56c96a=_0x3da505;try{let _0x394a56={'$set':{'id':_0x31f1a4['id'],'owner':_0x31f1a4['owner'],'lastcache':0x0}};if(_0x31f1a4[_0x56c96a(0x332)]!==null&&(_0x394a56['$set'][_0x56c96a(0x332)]=_0x31f1a4[_0x56c96a(0x332)]),_0x31f1a4[_0x56c96a(0x3dc)]!==null&&(_0x394a56[_0x56c96a(0x6d2)][_0x56c96a(0x3dc)]=_0x31f1a4[_0x56c96a(0x3dc)]),_0x31f1a4['contactname']!==null&&(_0x394a56[_0x56c96a(0x6d2)][_0x56c96a(0x337)]=_0x31f1a4[_0x56c96a(0x337)]),_0x31f1a4[_0x56c96a(0x288)]!==null&&(_0x394a56[_0x56c96a(0x6d2)][_0x56c96a(0x288)]=_0x31f1a4['imagechat']),_0x31f1a4[_0x56c96a(0x288)]===null&&(_0x394a56[_0x56c96a(0x6d2)][_0x56c96a(0x288)]='Imagem\x20não\x20encontrada'),_0x31f1a4[_0x56c96a(0x36a)]!==null&&(_0x394a56[_0x56c96a(0x6d2)][_0x56c96a(0x36a)]=_0x31f1a4[_0x56c96a(0x36a)]),_0x31f1a4[_0x56c96a(0x5a5)]!==null&&(_0x394a56['$set']['archived']=_0x31f1a4[_0x56c96a(0x5a5)]),_0x31f1a4['unreadcount']!==null&&(_0x394a56[_0x56c96a(0x6d2)][_0x56c96a(0x3fc)]=_0x31f1a4[_0x56c96a(0x3fc)]),Object[_0x56c96a(0x5d2)](_0x394a56[_0x56c96a(0x6d2)])[_0x56c96a(0x2d6)]>0x0)return await D[_0x56c96a(0x2e8)]({'id':_0x31f1a4['id'],'owner':_0x31f1a4[_0x56c96a(0x40b)]},_0x394a56,{'new':!0x0,'upsert':!0x0});}catch(_0x5d8224){return console['error']('Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20'+_0x31f1a4['id']+':',_0x5d8224),null;}}),_0x20d368=(await Promise[_0x3da505(0x1b7)](_0x2ef87e))[_0x3da505(0x2a7)](_0x2e1eb6=>_0x2e1eb6!==null)['length'];this[_0x3da505(0x187)][_0x3da505(0x461)](this[_0x3da505(0x202)]+'\x20('+this['instance'][_0x3da505(0x2e6)]+_0x3da505(0x515)+_0x20d368+_0x3da505(0x2a9)+this['instance'][_0x3da505(0x2e6)]+'\x20inseridos\x20no\x20banco\x20de\x20dados...');}}async[a0_0x3e22c7(0x22b)](_0x8d78a2){const _0x429135=a0_0x3e22c7;this['logger'][_0x429135(0x461)](this[_0x429135(0x202)]+'\x20('+this[_0x429135(0x51f)]['wuid']+_0x429135(0x3c4));let _0x438d1c={'readMessages':[{'remoteJid':_0x8d78a2[_0x429135(0x710)][_0x429135(0x3cd)][_0x429135(0x657)][_0x429135(0x2c2)],'fromMe':_0x8d78a2[_0x429135(0x710)][_0x429135(0x3cd)][_0x429135(0x657)]['fromMe'],'id':_0x8d78a2['chatLog'][_0x429135(0x3cd)]['key']['id']}]};await this[_0x429135(0x1f4)](_0x438d1c);}async[a0_0x3e22c7(0x3b3)](_0x326baa,_0x4c39a3,_0x4c0555){const _0x4c512e=a0_0x3e22c7;try{let {key:_0x295bc2,message_normalized:_0x2ae08e}=_0x4c39a3,_0x4ff44b=_0x2ae08e,_0x3314d5=_0x2ae08e[_0x4c512e(0x5bc)]||_0x2ae08e[_0x4c512e(0x56a)]||_0x2ae08e['vote']||_0x2ae08e['name'],_0x915df9=_0x295bc2[_0x4c512e(0x2c2)],_0x22d295;if(_0x4ff44b[_0x4c512e(0x657)][_0x4c512e(0x19f)]&&_0x3314d5[_0x4c512e(0x4aa)]()!==this[_0x4c512e(0x394)]?.[_0x4c512e(0x609)][_0x4c512e(0x3db)][_0x4c512e(0x4aa)]())return this[_0x4c512e(0x187)]['verbose'](this[_0x4c512e(0x202)]+'\x20('+this[_0x4c512e(0x51f)][_0x4c512e(0x2e6)]+'):\x20A\x20mensagem\x20foi\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20e\x20não\x20é\x20a\x20stopConversation.\x20Saindo\x20da\x20função.'),null;if(_0x4ff44b[_0x4c512e(0x657)][_0x4c512e(0x19f)]&&_0x3314d5[_0x4c512e(0x4aa)]()===this[_0x4c512e(0x394)]?.[_0x4c512e(0x609)][_0x4c512e(0x3db)][_0x4c512e(0x4aa)]()){this[_0x4c512e(0x187)][_0x4c512e(0x461)](this[_0x4c512e(0x202)]+'\x20('+this['instance'][_0x4c512e(0x2e6)]+_0x4c512e(0x616));let _0x437837=await G['find']({'owner':_0x4c0555,'remoteJid':_0x915df9,'status':'open'});this[_0x4c512e(0x187)][_0x4c512e(0x461)](this['instanceName']+'\x20('+this['instance'][_0x4c512e(0x2e6)]+_0x4c512e(0x2ba)+_0x437837);let _0x39e9a8=Date[_0x4c512e(0x43b)](),_0x124112;return this[_0x4c512e(0x394)]?.[_0x4c512e(0x609)]['stopMinutes']===0x0?_0x124112={'stoppedUntil':_0x39e9a8+0x7591f6200}:_0x124112={'stoppedUntil':_0x39e9a8+this['AutomateSystem']?.['flowConfig']['stopMinutes']*0x3c*0x3e8},this[_0x4c512e(0x187)][_0x4c512e(0x461)](this[_0x4c512e(0x202)]+'\x20('+this['instance'][_0x4c512e(0x2e6)]+_0x4c512e(0x401)+_0x124112),this['updateStopChat'](_0x22d295,_0x124112['stoppedUntil']),null;}if(_0x3314d5&&_0x3314d5[_0x4c512e(0x4b4)](this[_0x4c512e(0x394)]?.[_0x4c512e(0x609)]['prefixCommand'])&&_0x3314d5[_0x4c512e(0x2d6)]>0x4){let _0x1affff=await I[_0x4c512e(0x635)]({'owner':_0x4c0555,'startCommandWord':_0x3314d5});if(this[_0x4c512e(0x187)][_0x4c512e(0x461)](this[_0x4c512e(0x202)]+'\x20('+this[_0x4c512e(0x51f)]['wuid']+'):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.'),_0x1affff)_0x22d295=await this[_0x4c512e(0x1a6)](_0x1affff,_0x4ff44b['key'],_0x4ff44b);else return this['logger'][_0x4c512e(0x461)](this[_0x4c512e(0x202)]+'\x20('+this['instance']['wuid']+_0x4c512e(0x573)),null;}else _0x22d295=await this[_0x4c512e(0x4e4)](_0x4c0555,_0x915df9,_0x4ff44b);if(_0x22d295){this[_0x4c512e(0x187)]['verbose'](this[_0x4c512e(0x202)]+'\x20('+this['instance'][_0x4c512e(0x2e6)]+_0x4c512e(0x610)),!_0x295bc2[_0x4c512e(0x19f)]&&_0x22d295[_0x4c512e(0x393)]&&this[_0x4c512e(0x22b)](_0x22d295);let _0x220957=await this[_0x4c512e(0x405)](_0x22d295);_0x220957&&await this[_0x4c512e(0x241)](_0x22d295,_0x220957,_0x22d295[_0x4c512e(0x2c2)]);}}catch(_0x5747ce){this['logger'][_0x4c512e(0x41f)](this[_0x4c512e(0x202)]+'\x20('+this['instance'][_0x4c512e(0x2e6)]+_0x4c512e(0x534)+_0x5747ce);}}[a0_0x3e22c7(0x5a2)](_0x521037,_0x2217a9='',_0x2ef271={},_0x40accb=!0x0){const _0x4c9bc3=a0_0x3e22c7;for(let _0xff4721 in _0x521037){let _0x58e546=_0x40accb?'_'+_0xff4721:''+_0x2217a9+_0xff4721;typeof _0x521037[_0xff4721]==_0x4c9bc3(0x245)&&_0x521037[_0xff4721]!==null?this[_0x4c9bc3(0x5a2)](_0x521037[_0xff4721],_0x58e546+'.',_0x2ef271,!0x1):_0x2ef271[_0x58e546]=_0x521037[_0xff4721];}return _0x2ef271;}['variablesToObject'](_0x3f9cb7){const _0x60f578=a0_0x3e22c7;let _0x56ae9d={};for(let _0x2315c6 of _0x3f9cb7)typeof _0x2315c6[_0x60f578(0x3dc)]==_0x60f578(0x5cb)&&typeof _0x2315c6[_0x60f578(0x526)]=='string'&&(_0x56ae9d[_0x2315c6[_0x60f578(0x3dc)]]=_0x2315c6[_0x60f578(0x526)]);return _0x56ae9d;}async[a0_0x3e22c7(0x405)](_0x1a6aac){const _0x50e1c7=a0_0x3e22c7;if(!this[_0x50e1c7(0x394)]?.[_0x50e1c7(0x609)][_0x50e1c7(0x688)]||_0x1a6aac[_0x50e1c7(0x654)]!==_0x50e1c7(0x1c1)&&_0x1a6aac[_0x50e1c7(0x151)]==='')return null;let _0x4d41f5=_0x1a6aac['chatLog']['lastBlockId']||_0x50e1c7(0x319);typeof _0x1a6aac[_0x50e1c7(0x710)][_0x50e1c7(0x192)]>'u'&&(_0x1a6aac[_0x50e1c7(0x710)][_0x50e1c7(0x192)]=!0x0);let _0x192b22=_0x1a6aac['chatLog'][_0x50e1c7(0x192)];this[_0x50e1c7(0x187)][_0x50e1c7(0x461)](this['instanceName']+'\x20('+this[_0x50e1c7(0x51f)][_0x50e1c7(0x2e6)]+_0x50e1c7(0x5c1)+_0x4d41f5+_0x50e1c7(0x56f)+_0x192b22);let _0x3b9303=_0x4d41f5==='start'?_0x1a6aac['blocks'][_0x50e1c7(0x445)](_0x3729e5=>_0x3729e5[_0x50e1c7(0x2e9)]===_0x50e1c7(0x319)):_0x1a6aac['blocks']['find'](_0x22266f=>_0x22266f[_0x50e1c7(0x1fb)][_0x50e1c7(0x63b)]()===_0x4d41f5[_0x50e1c7(0x63b)]());if(!_0x3b9303)return this[_0x50e1c7(0x187)][_0x50e1c7(0x41f)](this[_0x50e1c7(0x202)]+'\x20('+this[_0x50e1c7(0x51f)][_0x50e1c7(0x2e6)]+'):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20'+_0x4d41f5),null;let _0x3adcbf={'_pushName':_0x1a6aac[_0x50e1c7(0x710)][_0x50e1c7(0x3cd)][_0x50e1c7(0x441)],..._0x1a6aac[_0x50e1c7(0x710)]['realVariables']},_0x234e1b=null;if(_0x1a6aac[_0x50e1c7(0x151)]){let _0x46ce09=_0x1a6aac['chatLog'][_0x50e1c7(0x3cd)][_0x50e1c7(0x19a)],_0x55e4a7=_0x1a6aac[_0x50e1c7(0x656)][_0x50e1c7(0x445)](_0x58dadd=>_0x58dadd[_0x50e1c7(0x576)]===_0x46ce09);if(_0x55e4a7){let _0x29e99d=_0x55e4a7[_0x50e1c7(0x66f)];if(_0x234e1b=_0x1a6aac[_0x50e1c7(0x4e6)]['find'](_0x3d29c4=>_0x3d29c4['groupId']===_0x29e99d&&_0x3d29c4[_0x50e1c7(0x1bc)]===0x1),_0x3b9303[_0x50e1c7(0x584)]['pollOnReplyDelete']){let _0xa12482={'id':_0x1a6aac[_0x50e1c7(0x151)],'remoteJid':_0x1a6aac[_0x50e1c7(0x2c2)],'fromMe':!0x0};await this[_0x50e1c7(0x6f4)](_0xa12482);}if(_0x3b9303[_0x50e1c7(0x584)]['pollOnReplyDelete']&&_0x3b9303[_0x50e1c7(0x584)][_0x50e1c7(0x4e1)]){let _0x54c0c9={'number':_0x1a6aac['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':'*Pergunta*:\x20\x0a'+_0x1a6aac[_0x50e1c7(0x582)]+_0x50e1c7(0x690)+_0x46ce09}};await this['textMessage'](_0x54c0c9);}_0x1a6aac[_0x50e1c7(0x654)]=_0x50e1c7(0x1c1),_0x1a6aac[_0x50e1c7(0x151)]='',_0x1a6aac['waitingPoll_name']='',_0x1a6aac[_0x50e1c7(0x656)]=[];}else{this[_0x50e1c7(0x187)][_0x50e1c7(0x461)](this['instanceName']+'\x20('+this[_0x50e1c7(0x51f)][_0x50e1c7(0x2e6)]+_0x50e1c7(0x54d));let _0x4200ae={'activatedCount':_0x1a6aac['chatLog'][_0x50e1c7(0x643)][_0x50e1c7(0x2a7)](_0x3487fd=>String(_0x3487fd['blockId'])===String(_0x4d41f5))[_0x50e1c7(0x2d6)],'moreLogs':['Não\x20respondeu\x20com\x20a\x20enquete.']};if(_0x3b9303['uazapi'][_0x50e1c7(0x5a1)]){let _0x889eb2={'number':_0x1a6aac['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x3b9303[_0x50e1c7(0x584)][_0x50e1c7(0x5a1)]}};await this['textMessage'](_0x889eb2);}if(_0x3b9303['maxActives']!==void 0x0&&_0x4200ae[_0x50e1c7(0x1e6)]>=_0x3b9303[_0x50e1c7(0x33a)]){let _0x218fca=Date[_0x50e1c7(0x43b)](),_0x581951=_0x3b9303[_0x50e1c7(0x4f9)]??0xa;isNaN(_0x581951)&&(_0x581951=0xa);let _0x24590b=_0x218fca+_0x581951*0x3c*0x3e8;_0x4200ae['newStoppedUntil']=_0x24590b,_0x4200ae[_0x50e1c7(0x57f)][_0x50e1c7(0x6a8)]('Atingido\x20interações\x20máximas,\x20parando\x20fluxo'),this[_0x50e1c7(0x58a)](_0x1a6aac,_0x24590b),_0x1a6aac[_0x50e1c7(0x151)]='',_0x1a6aac[_0x50e1c7(0x582)]='',_0x1a6aac['waitingPoll_replyOptions']=[];}return this['updateConversation'](_0x1a6aac,_0x3b9303,_0x4200ae,!0x0),null;}}if(_0x192b22&&_0x3b9303['next_groupId']&&!_0x1a6aac[_0x50e1c7(0x151)]){let _0x42b0f5=_0x1a6aac[_0x50e1c7(0x4e6)][_0x50e1c7(0x2a7)](_0x2d9a5c=>_0x2d9a5c[_0x50e1c7(0x31d)]['toString']()===_0x3b9303[_0x50e1c7(0x66f)]['toString']())[_0x50e1c7(0x24a)]((_0xf5d75,_0x2a3ca4)=>_0xf5d75['order']-_0x2a3ca4[_0x50e1c7(0x1bc)]);_0x42b0f5[_0x50e1c7(0x2d6)]>0x0&&(_0x234e1b=_0x42b0f5[0x0]);}if(!_0x234e1b){let _0x24a4c9=_0x3b9303['groupId'],_0x37301e=_0x1a6aac[_0x50e1c7(0x4e6)]['filter'](_0x21d929=>_0x21d929['groupId']===_0x24a4c9&&_0x21d929[_0x50e1c7(0x1bc)]>_0x3b9303['order'])[_0x50e1c7(0x24a)]((_0x5247f4,_0xd73058)=>_0x5247f4['order']-_0xd73058[_0x50e1c7(0x1bc)]);_0x37301e['length']>0x0&&(_0x234e1b=_0x37301e[0x0]);}if(!_0x234e1b)return _0x1a6aac[_0x50e1c7(0x654)]='closed',null;_0x1a6aac['chatLog']['realVariables']=_0x3adcbf;let _0x3bfea3=JSON[_0x50e1c7(0x251)](JSON[_0x50e1c7(0x5af)](_0x234e1b));return this[_0x50e1c7(0x418)](_0x3bfea3,_0x1a6aac[_0x50e1c7(0x710)][_0x50e1c7(0x408)]),_0x1a6aac['chatLog'][_0x50e1c7(0x61b)]=_0x3bfea3[_0x50e1c7(0x1fb)],_0x1a6aac[_0x50e1c7(0x710)][_0x50e1c7(0x192)]=!0x0,_0x3bfea3;}[a0_0x3e22c7(0x30f)](_0x1ebd76,_0x468e28){const _0x5bfda6=a0_0x3e22c7;return _0x1ebd76[_0x5bfda6(0x5b0)](/\{\{([^}]+)\}\}/g,(_0x4d7c9e,_0x28c851)=>_0x468e28[_0x28c851]||'');}[a0_0x3e22c7(0x418)](_0x21f13a,_0x51664b){const _0x5d97b6=a0_0x3e22c7;for(let _0x46b9bf in _0x21f13a)typeof _0x21f13a[_0x46b9bf]==_0x5d97b6(0x5cb)?_0x21f13a[_0x46b9bf]=this['replaceVariables'](_0x21f13a[_0x46b9bf],_0x51664b):typeof _0x21f13a[_0x46b9bf]=='object'&&this[_0x5d97b6(0x418)](_0x21f13a[_0x46b9bf],_0x51664b);}async['goNextblock'](_0x88ddeb,_0x433f9c){const _0x1b2d5a=a0_0x3e22c7;let _0x10eb45=_0x433f9c['_id'];if(_0x88ddeb['chatLog']&&_0x88ddeb[_0x1b2d5a(0x710)][_0x1b2d5a(0x643)]){let _0x1b9577=_0x88ddeb[_0x1b2d5a(0x710)][_0x1b2d5a(0x643)]['filter'](_0x594e0e=>String(_0x594e0e[_0x1b2d5a(0x726)])===String(_0x10eb45))[_0x1b2d5a(0x6ae)]();if(_0x1b9577&&_0x1b9577['error']&&_0x433f9c[_0x1b2d5a(0x5e0)])return _0x88ddeb['status']=_0x1b2d5a(0x3f1),await this[_0x1b2d5a(0x16b)](_0x88ddeb),null;}if(_0x433f9c[_0x1b2d5a(0x2e9)]===_0x1b2d5a(0x584)&&_0x433f9c[_0x1b2d5a(0x584)][_0x1b2d5a(0x40c)]===_0x1b2d5a(0x2b9)&&_0x88ddeb[_0x1b2d5a(0x151)])return _0x88ddeb[_0x1b2d5a(0x710)]['lastBlockId']=_0x10eb45,await this[_0x1b2d5a(0x16b)](_0x88ddeb),null;let _0x424982=await this[_0x1b2d5a(0x405)](_0x88ddeb);if(_0x88ddeb[_0x1b2d5a(0x710)]&&_0x88ddeb[_0x1b2d5a(0x710)][_0x1b2d5a(0x643)]){let _0x3691bf=_0x88ddeb[_0x1b2d5a(0x710)]['blockLogs'][_0x1b2d5a(0x2a7)](_0x1cac48=>String(_0x1cac48[_0x1b2d5a(0x726)])===String(_0x10eb45))['length'];if(_0x433f9c[_0x1b2d5a(0x33a)]!==void 0x0&&_0x3691bf>=_0x433f9c[_0x1b2d5a(0x33a)]){let _0x4de372=Date[_0x1b2d5a(0x43b)](),_0x3a54e8=_0x433f9c[_0x1b2d5a(0x4f9)]??0xa;isNaN(_0x3a54e8)&&(_0x3a54e8=0xa);let _0x16a2b0=_0x4de372+_0x3a54e8*0x3c*0x3e8,_0x3bcde3={'newStoppedUntil':_0x16a2b0};return this[_0x1b2d5a(0x58a)](_0x88ddeb,_0x16a2b0),this['updateConversation'](_0x88ddeb,_0x433f9c,_0x3bcde3,!0x0),null;}}_0x424982&&_0x424982[_0x1b2d5a(0x2e9)]!==_0x1b2d5a(0x2bb)&&await this[_0x1b2d5a(0x241)](_0x88ddeb,_0x424982,_0x88ddeb[_0x1b2d5a(0x2c2)]),_0x424982||await this[_0x1b2d5a(0x16b)](_0x88ddeb),_0x424982&&_0x424982[_0x1b2d5a(0x2e9)]===_0x1b2d5a(0x2bb)&&(_0x88ddeb[_0x1b2d5a(0x710)][_0x1b2d5a(0x61b)]=_0x10eb45,await this[_0x1b2d5a(0x16b)](_0x88ddeb));}async['processblock'](_0x432c6a,_0x578a78,_0xc4c016){const _0x5bdd26=a0_0x3e22c7;try{let _0x59e743=_0x578a78['type'];this[_0x5bdd26(0x187)]['verbose'](this[_0x5bdd26(0x202)]+'\x20('+this[_0x5bdd26(0x51f)][_0x5bdd26(0x2e6)]+_0x5bdd26(0x1ce)+_0x59e743);let _0x461039={'uazapi':()=>this[_0x5bdd26(0x5e7)](_0x432c6a,_0x578a78,_0xc4c016),'save':()=>this[_0x5bdd26(0x36c)](_0x432c6a,_0x578a78),'stop':()=>this[_0x5bdd26(0x3db)](_0x432c6a,_0x578a78),'condition':()=>this[_0x5bdd26(0x540)](_0x432c6a,_0x578a78),'varedit':()=>this[_0x5bdd26(0x3f0)](_0x432c6a,_0x578a78),'apirequest':()=>this[_0x5bdd26(0x17e)](_0x432c6a,_0x578a78),'goToFlow':()=>this['processgoToFlow'](_0x432c6a,_0x578a78)}[_0x59e743];_0x461039&&await _0x461039();}catch(_0x436605){this[_0x5bdd26(0x187)][_0x5bdd26(0x41f)](this['instanceName']+'\x20('+this[_0x5bdd26(0x51f)]['wuid']+'):\x20Error\x20processing\x20the\x20block:\x20'+_0x436605);}}async[a0_0x3e22c7(0x575)](_0x2b38ef,_0x700044){const _0x5ce512=a0_0x3e22c7;if(this['logger'][_0x5ce512(0x461)](this[_0x5ce512(0x202)]+'\x20('+this[_0x5ce512(0x51f)][_0x5ce512(0x2e6)]+'):\x20Entrou\x20na\x20função\x20goToFlow'),!_0x2b38ef||!_0x700044)return this[_0x5ce512(0x187)][_0x5ce512(0x41f)](this[_0x5ce512(0x202)]+'\x20('+this[_0x5ce512(0x51f)][_0x5ce512(0x2e6)]+_0x5ce512(0x19d)),null;await this['updateConversation'](_0x2b38ef,_0x700044,{},!0x0,!0x0),console['log']('nextBlock:'),console[_0x5ce512(0x4b3)](_0x700044);let _0x4bc14d=_0x700044[_0x5ce512(0x3b7)];console['log']('flowname:\x20',_0x4bc14d),_0x2b38ef=await this[_0x5ce512(0x4b1)](_0x4bc14d,_0x2b38ef[_0x5ce512(0x2c2)],_0x2b38ef[_0x5ce512(0x710)]['realVariables']),this[_0x5ce512(0x187)][_0x5ce512(0x461)](this[_0x5ce512(0x202)]+'\x20('+this['instance']['wuid']+_0x5ce512(0x715));let _0x3e3e51=await this[_0x5ce512(0x405)](_0x2b38ef);_0x3e3e51&&await this[_0x5ce512(0x241)](_0x2b38ef,_0x3e3e51,_0x2b38ef[_0x5ce512(0x2c2)]);}async[a0_0x3e22c7(0x4b1)](_0x54d368,_0x2748d1,_0x1fb8e5){const _0x1fcb16=a0_0x3e22c7;this[_0x1fcb16(0x187)][_0x1fcb16(0x461)](this[_0x1fcb16(0x202)]+'\x20('+this[_0x1fcb16(0x51f)]['wuid']+_0x1fcb16(0x725));try{if(_0x54d368=await I[_0x1fcb16(0x635)]({'owner':this[_0x1fcb16(0x51f)][_0x1fcb16(0x2e6)],'name':_0x54d368}),!_0x54d368)return this['logger'][_0x1fcb16(0x41f)](this['instanceName']+'\x20('+this[_0x1fcb16(0x51f)][_0x1fcb16(0x2e6)]+_0x1fcb16(0x54e)),null;let _0x5f4f15=require(_0x1fcb16(0x717))[_0x1fcb16(0x506)],_0x4da275=Date['now'](),_0x4e0b74=_0x1fcb16(0x319),_0x5d73ab={},_0x519725={},_0x10a40f={..._0x54d368[_0x1fcb16(0x6e2)],'chatLog':null},_0x4de7fb={'lastReceivedMessage':_0x5d73ab,'lastSendMessage':_0x519725,'lastBlockId':_0x4e0b74,'lastCondition':!0x0,'realVariables':_0x1fb8e5};_0x10a40f[_0x1fcb16(0x710)]=_0x4de7fb,_0x10a40f[_0x1fcb16(0x710)][_0x1fcb16(0x408)]={..._0x1fb8e5},delete _0x10a40f['_id'],_0x10a40f[_0x1fcb16(0x1fb)]=new _0x5f4f15(),_0x10a40f['lastInteraction']=_0x4da275,_0x10a40f['status']=_0x1fcb16(0x1c1),_0x10a40f['remoteJid']=_0x2748d1;let _0x1606e5=await G[_0x1fcb16(0x516)](_0x10a40f);return this['logger'][_0x1fcb16(0x461)](this['instanceName']+'\x20('+this[_0x1fcb16(0x51f)][_0x1fcb16(0x2e6)]+_0x1fcb16(0x6a9)),_0x1606e5?_0x10a40f:null;}catch(_0x13305b){throw this[_0x1fcb16(0x187)][_0x1fcb16(0x41f)](this[_0x1fcb16(0x202)]+'\x20('+this[_0x1fcb16(0x51f)][_0x1fcb16(0x2e6)]+_0x1fcb16(0x63f)+_0x13305b),new g(_0x13305b['message']);}}async[a0_0x3e22c7(0x17e)](_0x57cad,_0x2a6dfb){const _0x180978=a0_0x3e22c7;let _0x25db4d,_0x631faf;try{let _0x12b2ca=_0x2a6dfb[_0x180978(0x24f)];if(!_0x12b2ca||!_0x12b2ca[_0x180978(0x72e)]||!_0x12b2ca['method'])throw new Error(_0x180978(0x344));let _0x471443={'method':_0x12b2ca[_0x180978(0x34b)],'url':_0x12b2ca['url'],'headers':_0x12b2ca[_0x180978(0x25a)]||{},'data':_0x12b2ca[_0x180978(0x31f)]||{}};_0x25db4d=(await(0x0,ue[_0x180978(0x30c)])(_0x471443))['data'];let _0x257930=_0x57cad[_0x180978(0x710)]['realVariables'],_0x5b1a04=this['flattenObject'](_0x25db4d);return Object[_0x180978(0x472)](_0x257930,_0x5b1a04),_0x57cad[_0x180978(0x710)][_0x180978(0x408)]=_0x257930,_0x631faf={'error':!0x1,'apiResponse':_0x25db4d},this[_0x180978(0x6a6)](_0x57cad,_0x2a6dfb,_0x631faf),_0x25db4d;}catch(_0x1d9958){console[_0x180978(0x41f)](_0x180978(0x619),_0x1d9958),_0x1d9958['response']&&(_0x25db4d=_0x1d9958[_0x180978(0x273)][_0x180978(0x1d5)]);let _0x1336a1=_0x57cad[_0x180978(0x710)][_0x180978(0x408)],_0xd6978c=this['flattenObject'](_0x25db4d);return Object[_0x180978(0x472)](_0x1336a1,_0xd6978c),_0x57cad[_0x180978(0x710)][_0x180978(0x408)]=_0x1336a1,_0x631faf={'error':!0x0,'errorLog':_0x1d9958[_0x180978(0x63b)](),'apiResponse':_0x25db4d},this[_0x180978(0x6a6)](_0x57cad,_0x2a6dfb,_0x631faf),{'success':!0x1};}}[a0_0x3e22c7(0x42a)](_0x3955df,_0x350af0){const _0x4e261b=a0_0x3e22c7;let _0x18900f=_0x1b8712=>{const _0x3526ba=a0_0x33a7;let _0x302a46=_0x1b8712[_0x3526ba(0x5b0)](/[^0-9.,-]/g,'')[_0x3526ba(0x5b0)](',','.'),_0x1c2b92=parseFloat(_0x302a46);return isNaN(_0x1c2b92)?null:_0x1c2b92;},_0x12393b=_0x350af0['firstValue'],_0x1c8638=_0x350af0['secondValue'];typeof _0x12393b==_0x4e261b(0x5cb)&&(_0x12393b=this[_0x4e261b(0x30f)](_0x12393b,_0x3955df['chatLog'][_0x4e261b(0x408)])??''),typeof _0x1c8638==_0x4e261b(0x5cb)&&(_0x1c8638=this['replaceVariables'](_0x1c8638,_0x3955df[_0x4e261b(0x710)][_0x4e261b(0x408)])??'');let _0xabe099=null;if(!_0x12393b||!_0x350af0[_0x4e261b(0x2df)])return null;switch(this[_0x4e261b(0x187)][_0x4e261b(0x461)](this[_0x4e261b(0x202)]+'\x20('+this['instance'][_0x4e261b(0x2e6)]+_0x4e261b(0x2be)+_0x12393b),this[_0x4e261b(0x187)]['verbose'](this[_0x4e261b(0x202)]+'\x20('+this[_0x4e261b(0x51f)]['wuid']+'):\x20newSecondValue\x20após\x20replaceVariables:'+_0x1c8638),_0x350af0['editOperator']){case'+':case'-':case'*':case'/':let _0x418236=_0x18900f(_0x12393b),_0x1f7897=_0x18900f(_0x1c8638||'0');if(_0x418236===null)return null;switch(_0x350af0[_0x4e261b(0x2df)]){case'+':_0xabe099=_0x418236+(_0x1f7897??0x0);break;case'-':_0xabe099=_0x418236-(_0x1f7897??0x0);break;case'*':_0xabe099=_0x418236*(_0x1f7897??0x1);break;case'/':_0x1f7897!==0x0&&(_0xabe099=_0x418236/(_0x1f7897??0x1));break;}break;case _0x4e261b(0x42b):case _0x4e261b(0x568):let _0x40789d=_0x1c8638,_0x3d0c86=_0x350af0[_0x4e261b(0x2b6)];if(typeof _0x3d0c86=='string'&&(_0x3d0c86=this[_0x4e261b(0x30f)](_0x3d0c86,_0x3955df[_0x4e261b(0x710)][_0x4e261b(0x408)])??''),_0x40789d&&_0x3d0c86!==void 0x0){let _0x6a65d=_0x350af0['editOperator']===_0x4e261b(0x42b)?new RegExp(_0x40789d['replace'](/[-\/\\^$*+?.()|[\]{}]/g,'\x5c$&'),'g'):new RegExp(_0x40789d,'g');_0xabe099=_0x12393b[_0x4e261b(0x5b0)](_0x6a65d,_0x3d0c86);}else console[_0x4e261b(0x5b3)]('Valor\x20de\x20find\x20ou\x20replace\x20ausente');break;case'setNewValue':_0xabe099=_0x1c8638;break;case _0x4e261b(0x206):let _0x541fa3=_0x12393b[_0x4e261b(0x6f6)](new RegExp(_0x1c8638||''));_0xabe099=_0x541fa3?_0x541fa3[0x0]:'';break;case'truncatedto':_0xabe099=_0x12393b[_0x4e261b(0x6d1)](0x0,parseInt(_0x1c8638||'0'));break;case'truncatedtoEnd':let _0x4dfc19=parseInt(_0x1c8638||'0');_0xabe099=_0x12393b[_0x4e261b(0x6d1)](_0x12393b[_0x4e261b(0x2d6)]-_0x4dfc19);break;case _0x4e261b(0x660):let _0x2d915a=_0x18900f(_0x12393b),_0x17a7c2=parseInt(_0x1c8638||'0');_0x17a7c2=Math['abs'](_0x17a7c2),_0x2d915a!==null?_0xabe099=_0x2d915a['toLocaleString'](_0x4e261b(0x3d0),{'minimumFractionDigits':_0x17a7c2,'maximumFractionDigits':_0x17a7c2}):(console[_0x4e261b(0x5b3)](_0x4e261b(0x30e)+_0x12393b),_0xabe099=null);break;case'toBRL':let _0x5a2aba=_0x18900f(_0x12393b);_0x5a2aba!==null?_0xabe099=_0x5a2aba['toLocaleString'](_0x4e261b(0x3d0),{'style':_0x4e261b(0x223),'currency':_0x4e261b(0x602)}):(console['warn'](_0x4e261b(0x713)+_0x12393b),_0xabe099=null);break;case _0x4e261b(0x283):_0xabe099=_0x12393b[_0x4e261b(0x2e4)]();break;case'lowerCase':_0xabe099=_0x12393b[_0x4e261b(0x67c)]();break;case _0x4e261b(0x267):_0xabe099=_0x12393b[_0x4e261b(0x209)]('\x20')[_0x4e261b(0x5a9)](_0x5e6413=>_0x5e6413[_0x4e261b(0x4bb)](0x0)[_0x4e261b(0x2e4)]()+_0x5e6413[_0x4e261b(0x6d1)](0x1)[_0x4e261b(0x67c)]())[_0x4e261b(0x72a)]('\x20');break;case'trimmed':_0xabe099=_0x12393b[_0x4e261b(0x4aa)]();break;default:_0xabe099=_0x12393b;}return _0xabe099!==null?_0xabe099['toString']():null;}async[a0_0x3e22c7(0x3f0)](_0x2a2bf0,_0x456bed){const _0x4a69eb=a0_0x3e22c7;try{let _0x3031fa=_0x2a2bf0['varedits']?.[_0x4a69eb(0x2a7)](_0xc3452=>_0xc3452[_0x4a69eb(0x726)]===_0x456bed[_0x4a69eb(0x1fb)]?.[_0x4a69eb(0x63b)]())||[],_0x1965fd=_0x456bed[_0x4a69eb(0x1ff)],_0x4b56f1=null,_0x4d757f=[],_0x5ca761=_0x2a2bf0[_0x4a69eb(0x710)]['realVariables'][_0x1965fd];_0x4d757f['push'](_0x4a69eb(0x606)+_0x5ca761+'\x22');for(let _0xafa830 of _0x3031fa){_0xafa830[_0x4a69eb(0x4e7)]=_0x5ca761,_0x4b56f1=_0xafa830[_0x4a69eb(0x4e7)];let _0x4c1e87;try{_0x4c1e87=this['applyvaredit'](_0x2a2bf0,_0xafa830);}catch(_0x5986f7){console[_0x4a69eb(0x41f)](_0x4a69eb(0x6cd)+_0x5986f7[_0x4a69eb(0x1f0)]);continue;}if(_0x4c1e87!==null){let _0x108b19=_0x4a69eb(0x633)+_0xafa830[_0x4a69eb(0x2df)]+'\x22',_0x1af8ea=[_0x4a69eb(0x23e),_0x4a69eb(0x283),_0x4a69eb(0x60c),_0x4a69eb(0x267),_0x4a69eb(0x421)];_0xafa830['editOperator']===_0x4a69eb(0x42b)||_0xafa830[_0x4a69eb(0x2df)]===_0x4a69eb(0x568)?_0x108b19+=_0x4a69eb(0x60e)+_0xafa830['secondValue']+'\x22,\x20valor\x20a\x20substituir:\x20\x22'+_0xafa830[_0x4a69eb(0x2b6)]+'\x22':!_0x1af8ea[_0x4a69eb(0x457)](_0xafa830[_0x4a69eb(0x2df)])&&_0xafa830[_0x4a69eb(0x323)]!==null&&_0xafa830[_0x4a69eb(0x323)]!==void 0x0&&(_0x108b19+=',\x20valor\x20passado:\x20\x22'+_0xafa830['secondValue']+'\x22'),_0x108b19+=',\x20resultado:\x20'+_0x4c1e87+'.',_0x4d757f['push'](_0x108b19);}_0x4c1e87!==null&&(_0x5ca761=_0x4c1e87);}if(_0x2a2bf0['chatLog'][_0x4a69eb(0x408)]&&_0x456bed[_0x4a69eb(0x1ff)]){_0x2a2bf0[_0x4a69eb(0x710)][_0x4a69eb(0x408)][_0x456bed[_0x4a69eb(0x1ff)]]=_0x5ca761;let _0x58e6ab={'variable':_0x456bed[_0x4a69eb(0x1ff)],'oldValue':_0x4b56f1,'newValue':_0x5ca761,'moreLogs':_0x4d757f};try{this[_0x4a69eb(0x6a6)](_0x2a2bf0,_0x456bed,_0x58e6ab);}catch(_0x374afe){console['error'](_0x4a69eb(0x6ee)+_0x374afe[_0x4a69eb(0x1f0)]);}}return _0x1965fd;}catch(_0x3fa2ba){return console[_0x4a69eb(0x41f)]('Erro\x20inesperado\x20em\x20processvaredits:\x20'+_0x3fa2ba['message']),null;}}async['processConditions'](_0x5532db,_0x13d486){const _0x4dc2ca=a0_0x3e22c7;try{let _0x2f13d1=[],_0x36656b=_0x5532db[_0x4dc2ca(0x6a7)][_0x4dc2ca(0x2a7)](_0x2eb663=>_0x2eb663['blockId']===_0x13d486[_0x4dc2ca(0x1fb)][_0x4dc2ca(0x63b)]()),_0x34f388=null,_0x5d4edf=!0x1;for(let _0x34f6f4 of _0x36656b){let _0x406b2d=this['evaluateCondition'](_0x5532db,_0x34f6f4);_0x2f13d1[_0x4dc2ca(0x6a8)]('Primeiro\x20Valor:\x20'+_0x34f6f4['firstValue']+_0x4dc2ca(0x5ba)+_0x34f6f4[_0x4dc2ca(0x620)]+_0x4dc2ca(0x665)+_0x34f6f4['secondValue']+_0x4dc2ca(0x333)+_0x406b2d),_0x34f388===null?_0x34f388=_0x406b2d:_0x34f6f4['OrAnd']===_0x4dc2ca(0x3d6)?(_0x34f388=_0x34f388&&_0x406b2d,_0x406b2d||(_0x5d4edf=!0x0)):_0x34f6f4[_0x4dc2ca(0x510)]==='or'&&(_0x5d4edf||(_0x34f388=_0x34f388||_0x406b2d));}_0x34f388===null&&(_0x34f388=!0x0);let _0x18d3ba={'moreLogs':_0x2f13d1};_0x34f388?(_0x5532db[_0x4dc2ca(0x710)][_0x4dc2ca(0x192)]=!0x0,this['updateConversation'](_0x5532db,_0x13d486,_0x18d3ba)):(_0x5532db[_0x4dc2ca(0x710)][_0x4dc2ca(0x192)]=!0x1,this[_0x4dc2ca(0x6a6)](_0x5532db,_0x13d486,_0x18d3ba));}catch(_0x52bb50){this[_0x4dc2ca(0x187)][_0x4dc2ca(0x41f)](this['instanceName']+'\x20('+this[_0x4dc2ca(0x51f)][_0x4dc2ca(0x2e6)]+_0x4dc2ca(0x387)+_0x52bb50);}}[a0_0x3e22c7(0x3ca)](_0xe66888,_0xc59d01){const _0x18351e=a0_0x3e22c7;let _0x4a77e2=_0xc59d01[_0x18351e(0x4e7)],_0x450f13=_0xc59d01[_0x18351e(0x323)];typeof _0x4a77e2==_0x18351e(0x5cb)&&(_0x4a77e2=this[_0x18351e(0x30f)](_0x4a77e2,_0xe66888[_0x18351e(0x710)]['realVariables'])??''),typeof _0x450f13=='string'&&(_0x450f13=this[_0x18351e(0x30f)](_0x450f13,_0xe66888[_0x18351e(0x710)][_0x18351e(0x408)])??'');try{switch(_0xc59d01['expression']){case _0x18351e(0x212):return _0x4a77e2===_0x450f13;case _0x18351e(0x5d6):return _0x4a77e2!==_0x450f13;case'contains':return _0x4a77e2[_0x18351e(0x457)](_0x450f13);case'notContains':return!_0x4a77e2[_0x18351e(0x457)](_0x450f13);case _0x18351e(0x2f7):return parseFloat(_0x4a77e2)>parseFloat(_0x450f13);case _0x18351e(0x2c3):return parseFloat(_0x4a77e2)<parseFloat(_0x450f13);case _0x18351e(0x29c):return _0x4a77e2!=='';case _0x18351e(0x3e2):return _0x4a77e2==='';case _0x18351e(0x513):return new RegExp(_0x450f13)[_0x18351e(0x69d)](_0x4a77e2);case _0x18351e(0x24e):return!new RegExp(_0x450f13)['test'](_0x4a77e2);default:return!0x1;}}catch(_0x4b7811){return console['error'](_0x18351e(0x5c4)+_0x4b7811),!0x1;}}['processConditionsTest'](_0x319d02){const _0x52ff91=a0_0x3e22c7;let _0x5366a7=!0x0,_0x11c9f4=null;for(let _0x3ba266 of _0x319d02){let _0x38712e=this[_0x52ff91(0x696)](_0x3ba266);if(_0x11c9f4==='or'&&_0x38712e){_0x5366a7=!0x0;break;}if(_0x11c9f4===_0x52ff91(0x3d6)&&!_0x38712e){_0x5366a7=!0x1;break;}_0x11c9f4=_0x3ba266[_0x52ff91(0x510)];}return _0x5366a7;}[a0_0x3e22c7(0x696)](_0x4a655c){const _0x5bf9f1=a0_0x3e22c7;let _0x33e6cb=_0x4a655c[_0x5bf9f1(0x4e7)],_0x17d0f9=_0x4a655c['secondValue'];try{switch(_0x4a655c[_0x5bf9f1(0x620)]){case'equal':return String(_0x33e6cb)===String(_0x17d0f9);case'notEqual':return String(_0x33e6cb)!==String(_0x17d0f9);case'contains':return String(_0x33e6cb)[_0x5bf9f1(0x457)](String(_0x17d0f9));case _0x5bf9f1(0x3cc):return!String(_0x33e6cb)[_0x5bf9f1(0x457)](String(_0x17d0f9));case'greater':return parseFloat(String(_0x33e6cb))>parseFloat(String(_0x17d0f9));case _0x5bf9f1(0x2c3):return parseFloat(String(_0x33e6cb))<parseFloat(String(_0x17d0f9));case _0x5bf9f1(0x29c):return String(_0x33e6cb)!=='';case _0x5bf9f1(0x3e2):return String(_0x33e6cb)==='';case _0x5bf9f1(0x513):return new RegExp(String(_0x17d0f9))['test'](String(_0x33e6cb));case'notMatchRegex':return!new RegExp(String(_0x17d0f9))[_0x5bf9f1(0x69d)](String(_0x33e6cb));default:return!0x1;}}catch(_0x34295e){return console[_0x5bf9f1(0x41f)]('Erro\x20ao\x20avaliar\x20a\x20condição:\x20'+_0x34295e),!0x1;}}async[a0_0x3e22c7(0x36c)](_0x3a53b3,_0x7fc543){const _0x4b76ec=a0_0x3e22c7;if(this[_0x4b76ec(0x187)][_0x4b76ec(0x461)](this[_0x4b76ec(0x202)]+'\x20('+this[_0x4b76ec(0x51f)][_0x4b76ec(0x2e6)]+_0x4b76ec(0x3fb)),!_0x3a53b3||!_0x7fc543)return this[_0x4b76ec(0x187)][_0x4b76ec(0x41f)](this[_0x4b76ec(0x202)]+'\x20('+this['instance'][_0x4b76ec(0x2e6)]+_0x4b76ec(0x19d)),null;let _0xc4a34b=_0x7fc543[_0x4b76ec(0x1ff)],_0x5a0ef0=_0x3a53b3[_0x4b76ec(0x710)]['lastReceivedMessage'][_0x4b76ec(0x5bc)]||_0x3a53b3['chatLog'][_0x4b76ec(0x3cd)][_0x4b76ec(0x56a)]||_0x3a53b3[_0x4b76ec(0x710)][_0x4b76ec(0x3cd)]['vote'];try{_0x3a53b3[_0x4b76ec(0x710)]['realVariables']||(_0x3a53b3[_0x4b76ec(0x710)][_0x4b76ec(0x408)]={});let _0xbf0989=_0x3a53b3['chatLog'][_0x4b76ec(0x408)][_0xc4a34b];_0x3a53b3[_0x4b76ec(0x710)]['realVariables'][_0xc4a34b]=_0x5a0ef0;let _0x54232c={'variable':_0xc4a34b,'oldValue':_0xbf0989,'newValue':_0x5a0ef0};this[_0x4b76ec(0x6a6)](_0x3a53b3,_0x7fc543,_0x54232c),this[_0x4b76ec(0x187)]['verbose'](this[_0x4b76ec(0x202)]+'\x20('+this[_0x4b76ec(0x51f)]['wuid']+_0x4b76ec(0x312));}catch(_0x37e268){let _0xaba4f8={'error':!0x0,'errorLog':_0x37e268[_0x4b76ec(0x63b)]()};return this[_0x4b76ec(0x6a6)](_0x3a53b3,_0x7fc543,_0xaba4f8),this[_0x4b76ec(0x187)]['error'](this[_0x4b76ec(0x202)]+'\x20('+this['instance'][_0x4b76ec(0x2e6)]+_0x4b76ec(0x564)+_0x37e268['message']),null;}}async[a0_0x3e22c7(0x3db)](_0xdc24b,_0x40d2d5){const _0xc78ff6=a0_0x3e22c7;if(this[_0xc78ff6(0x187)][_0xc78ff6(0x461)](this[_0xc78ff6(0x202)]+'\x20('+this[_0xc78ff6(0x51f)]['wuid']+_0xc78ff6(0x579)),!_0xdc24b||!_0x40d2d5)return this['logger'][_0xc78ff6(0x41f)](this[_0xc78ff6(0x202)]+'\x20('+this[_0xc78ff6(0x51f)][_0xc78ff6(0x2e6)]+_0xc78ff6(0x19d)),null;let _0x340e4a=Date[_0xc78ff6(0x43b)](),_0xf14d81=parseInt(_0x40d2d5[_0xc78ff6(0x343)],0xa);if(isNaN(_0xf14d81))return this[_0xc78ff6(0x187)][_0xc78ff6(0x41f)](this[_0xc78ff6(0x202)]+'\x20('+this[_0xc78ff6(0x51f)][_0xc78ff6(0x2e6)]+_0xc78ff6(0x1f5)),null;let _0x26136d={'newStoppedUntil':_0x340e4a+_0xf14d81*0x3c*0x3e8};return await this[_0xc78ff6(0x6a6)](_0xdc24b,_0x40d2d5,_0x26136d,!0x0),null;}async[a0_0x3e22c7(0x5e7)](_0x450ed7,_0x35c915,_0x632486){const _0x3bb168=a0_0x3e22c7;try{switch(_0x35c915['uazapi'][_0x3bb168(0x40c)]){case _0x3bb168(0x400):await this['uazapiSendText'](_0x450ed7,_0x35c915,_0x632486);break;case'sendMedia':await this[_0x3bb168(0x484)](_0x450ed7,_0x35c915,_0x632486);break;case _0x3bb168(0x565):await this['uazapiSendLocation'](_0x450ed7,_0x35c915,_0x632486);break;case _0x3bb168(0x697):await this[_0x3bb168(0x3e1)](_0x450ed7,_0x35c915,_0x632486);break;case _0x3bb168(0x55f):await this['uazapiSendContact'](_0x450ed7,_0x35c915,_0x632486);break;case _0x3bb168(0x2b9):await this[_0x3bb168(0x676)](_0x450ed7,_0x35c915,_0x632486);break;case _0x3bb168(0x6f4):await this[_0x3bb168(0x1d6)](_0x450ed7,_0x35c915,_0x632486);break;default:this[_0x3bb168(0x187)][_0x3bb168(0x41f)](this[_0x3bb168(0x202)]+'\x20('+this[_0x3bb168(0x51f)]['wuid']+'):\x20Comando\x20desconhecido:\x20'+_0x35c915[_0x3bb168(0x584)]['command']);}}catch(_0x4d8d7c){this['logger']['error'](this[_0x3bb168(0x202)]+'\x20('+this[_0x3bb168(0x51f)]['wuid']+_0x3bb168(0x4ff)+_0x4d8d7c);}}async[a0_0x3e22c7(0x6a6)](_0x29a31f,_0x1d03b8,_0x32622f,_0x2411eb=!0x1,_0x4be766=!0x1){const _0x34e4e5=a0_0x3e22c7;_0x29a31f[_0x34e4e5(0x710)][_0x34e4e5(0x643)]||(_0x29a31f[_0x34e4e5(0x710)]['blockLogs']=[]);let _0x11a8a8=(_0x29a31f['chatLog']['blockLogs']?.[_0x34e4e5(0x2d6)]??0x0)+0x1,_0x17ea28=_0x29a31f['chatLog']['blockLogs'][_0x34e4e5(0x2a7)](_0x514266=>String(_0x514266[_0x34e4e5(0x726)])===String(_0x1d03b8[_0x34e4e5(0x1fb)]))[_0x34e4e5(0x2d6)]+0x1,_0x3b2dfb=_0x32622f?.[_0x34e4e5(0x1a1)]??Date[_0x34e4e5(0x43b)](),_0x2b6ad8=_0x32622f?.[_0x34e4e5(0x41f)]?_0x32622f[_0x34e4e5(0x265)]??_0x32622f['error']['toString']():void 0x0,_0x4388a4={'onTime':_0x3b2dfb,'blockId':_0x1d03b8[_0x34e4e5(0x1fb)],'order':_0x11a8a8,'activatedCount':_0x17ea28,'error':_0x32622f?.['error']??!0x1,'messageId':_0x32622f?.[_0x34e4e5(0x708)],'apiResponse':_0x32622f?.['apiResponse'],'apiResponseString':_0x32622f?.[_0x34e4e5(0x5e8)]?JSON[_0x34e4e5(0x5af)](_0x32622f?.[_0x34e4e5(0x5e8)]):void 0x0,'variable':_0x32622f?.['variable'],'oldValue':_0x32622f?.[_0x34e4e5(0x322)],'newValue':_0x32622f?.[_0x34e4e5(0x2db)],'newStoppedUntil':_0x32622f?.[_0x34e4e5(0x67b)],'moreLogs':_0x32622f?.['moreLogs'],'errorLog':_0x2b6ad8};if(_0x32622f[_0x34e4e5(0x57f)]&&_0x32622f[_0x34e4e5(0x57f)][_0x34e4e5(0x2d6)]>0x0){let _0xbe7dca=_0x32622f['moreLogs'][_0x34e4e5(0x5a9)](_0x3bc02e=>this['replaceVariablesLogs'](_0x3bc02e,_0x29a31f[_0x34e4e5(0x710)][_0x34e4e5(0x408)]));_0x4388a4[_0x34e4e5(0x57f)]=_0xbe7dca;}_0x29a31f[_0x34e4e5(0x710)][_0x34e4e5(0x408)]||(_0x29a31f['chatLog'][_0x34e4e5(0x408)]={}),_0x29a31f[_0x34e4e5(0x710)][_0x34e4e5(0x408)][_0x34e4e5(0x159)]=String(_0x17ea28),_0x29a31f[_0x34e4e5(0x710)]['realVariables']['_error']=String(_0x32622f[_0x34e4e5(0x41f)]??!0x1),_0x29a31f[_0x34e4e5(0x710)][_0x34e4e5(0x643)]['push'](_0x4388a4),_0x29a31f[_0x34e4e5(0x710)][_0x34e4e5(0x61b)]=_0x1d03b8[_0x34e4e5(0x1fb)][_0x34e4e5(0x63b)](),_0x29a31f[_0x34e4e5(0x710)][_0x34e4e5(0x417)]&&(_0x29a31f[_0x34e4e5(0x710)][_0x34e4e5(0x417)]=_0x29a31f['chatLog'][_0x34e4e5(0x417)]),_0x29a31f[_0x34e4e5(0x710)][_0x34e4e5(0x3cd)]&&(_0x29a31f['chatLog'][_0x34e4e5(0x3cd)]=_0x29a31f['chatLog']['lastReceivedMessage']),_0x29a31f[_0x34e4e5(0x710)]['lastCondition']&&(_0x29a31f[_0x34e4e5(0x710)][_0x34e4e5(0x192)]=_0x29a31f[_0x34e4e5(0x710)]['lastCondition']),_0x4be766&&(_0x29a31f[_0x34e4e5(0x654)]='closed'),_0x2411eb?this['saveConversationToDatabase'](_0x29a31f):this[_0x34e4e5(0x4f8)](_0x29a31f,_0x1d03b8);}[a0_0x3e22c7(0x2d8)](_0x46814e,_0x49c507){const _0x1450ed=a0_0x3e22c7;return _0x46814e[_0x1450ed(0x5b0)](/\{\{([^}]+)\}\}/g,(_0x270fef,_0x5f355b)=>_0x49c507[_0x5f355b]?'{{'+_0x5f355b+_0x1450ed(0x1a8)+_0x49c507[_0x5f355b]+'\x22':'{{'+_0x5f355b+_0x1450ed(0x440));}async[a0_0x3e22c7(0x16b)](_0x2fcf50){const _0x5031e2=a0_0x3e22c7;try{let _0x7e3b9=Object[_0x5031e2(0x66e)](_0x2fcf50[_0x5031e2(0x710)][_0x5031e2(0x408)])[_0x5031e2(0x5a9)](([_0x4f2030,_0x31c5d0])=>({'name':_0x4f2030,'value':_0x31c5d0})),_0x67de03=await G['findOneAndUpdate']({'_id':_0x2fcf50['_id']},{'$set':{'chatLog.lastBlockId':_0x2fcf50[_0x5031e2(0x710)][_0x5031e2(0x61b)],'blocks':_0x2fcf50[_0x5031e2(0x4e6)],'chatLog.lastSendMessage':_0x2fcf50[_0x5031e2(0x710)]['lastSendMessage'],'chatLog.lastReceivedMessage':_0x2fcf50[_0x5031e2(0x710)][_0x5031e2(0x3cd)],'chatLog.lastCondition':_0x2fcf50[_0x5031e2(0x710)]['lastCondition'],'chatLog.chatVariables':_0x7e3b9,'chatLog.realVariables':_0x2fcf50['chatLog'][_0x5031e2(0x408)],'status':_0x2fcf50[_0x5031e2(0x654)],'chatLog.blockLogs':_0x2fcf50['chatLog'][_0x5031e2(0x643)],'waitingPoll_id':_0x2fcf50[_0x5031e2(0x151)],'waitingPoll_name':_0x2fcf50[_0x5031e2(0x582)],'waitingPoll_replyOptions':_0x2fcf50['waitingPoll_replyOptions']}},{'new':!0x0});if(_0x67de03){this[_0x5031e2(0x187)][_0x5031e2(0x461)](this[_0x5031e2(0x202)]+'\x20('+this[_0x5031e2(0x51f)][_0x5031e2(0x2e6)]+_0x5031e2(0x4f0)+_0x67de03[_0x5031e2(0x1fb)]);try{let _0x57ec8c=[_0x5031e2(0x3ea),_0x5031e2(0x63c),'email',_0x5031e2(0x5b4),_0x5031e2(0x654),_0x5031e2(0x23c),_0x5031e2(0x36d),_0x5031e2(0x562)];if(!this[_0x5031e2(0x394)]&&(await this['getAutomateSystem'](),!this[_0x5031e2(0x394)]))throw new Error(_0x5031e2(0x22c));let _0x5e1eee=this[_0x5031e2(0x394)]?.[_0x5031e2(0x4eb)][_0x5031e2(0x5a9)](_0x2f78db=>_0x2f78db[_0x5031e2(0x3dc)]),_0x106e20={};Object[_0x5031e2(0x66e)](_0x2fcf50['chatLog'][_0x5031e2(0x408)])['forEach'](([_0x23a580,_0x5cf1ee])=>{const _0x47b183=_0x5031e2;_0x57ec8c[_0x47b183(0x457)](_0x23a580)&&(_0x23a580===_0x47b183(0x562)&&typeof _0x5cf1ee=='string'?_0x106e20[_0x23a580]=_0x5cf1ee['split'](',')[_0x47b183(0x5a9)](_0x5b06e3=>_0x5b06e3[_0x47b183(0x4aa)]())[_0x47b183(0x2a7)](_0x1f4792=>_0x1f4792!==''):_0x106e20[_0x23a580]=_0x5cf1ee);});let _0x52ea9f=_0x2fcf50[_0x5031e2(0x710)][_0x5031e2(0x643)][_0x2fcf50[_0x5031e2(0x710)][_0x5031e2(0x643)][_0x5031e2(0x2d6)]-0x1];if(_0x52ea9f){let _0x161edd=_0x52ea9f[_0x5031e2(0x67b)];_0x161edd!==void 0x0&&(_0x106e20['desativadoFluxoAte']=_0x161edd['toString']());}let _0x3cbb66=_0x7e3b9[_0x5031e2(0x2a7)](_0x105b52=>_0x5e1eee[_0x5031e2(0x457)](_0x105b52[_0x5031e2(0x3dc)]));this['logger'][_0x5031e2(0x461)](this[_0x5031e2(0x202)]+'\x20('+this['instance']['wuid']+_0x5031e2(0x518)),this[_0x5031e2(0x187)][_0x5031e2(0x461)](_0x106e20),this['logger'][_0x5031e2(0x461)](this[_0x5031e2(0x202)]+'\x20('+this['instance'][_0x5031e2(0x2e6)]+_0x5031e2(0x48c)),this[_0x5031e2(0x187)][_0x5031e2(0x461)](_0x3cbb66);let _0x5d9e66=_0x3cbb66[_0x5031e2(0x5a9)](_0x3fac1d=>{const _0x3e5fd6=_0x5031e2;let _0x5a7b56=this[_0x3e5fd6(0x394)]?.[_0x3e5fd6(0x4eb)]['find'](_0x105418=>_0x105418[_0x3e5fd6(0x3dc)]===_0x3fac1d['name']);if(!_0x5a7b56)throw new Error(_0x3e5fd6(0x432)+_0x3fac1d[_0x3e5fd6(0x3dc)]);return{'_id':_0x5a7b56['_id'],'value':_0x3fac1d['value']};});this[_0x5031e2(0x187)][_0x5031e2(0x461)](this['instanceName']+'\x20('+this[_0x5031e2(0x51f)][_0x5031e2(0x2e6)]+'):\x20transformedCustomFieldVariables'),this['logger'][_0x5031e2(0x461)](_0x5d9e66),await this['saveChatVariables'](_0x2fcf50['remoteJid'],_0x106e20,_0x5d9e66);}catch(_0x364b97){this[_0x5031e2(0x187)]['error'](this[_0x5031e2(0x202)]+'\x20('+this[_0x5031e2(0x51f)][_0x5031e2(0x2e6)]+_0x5031e2(0x72c)+JSON['stringify'](_0x364b97));}}else this[_0x5031e2(0x187)]['error'](this['instanceName']+'\x20('+this[_0x5031e2(0x51f)][_0x5031e2(0x2e6)]+_0x5031e2(0x398));}catch(_0x4a24cb){this[_0x5031e2(0x187)][_0x5031e2(0x41f)](this['instanceName']+'\x20('+this[_0x5031e2(0x51f)][_0x5031e2(0x2e6)]+_0x5031e2(0x3ac)+JSON[_0x5031e2(0x5af)](_0x4a24cb));}}async[a0_0x3e22c7(0x4ba)](_0x14a056,_0x3149ca,_0x27b7e4){const _0x4fa1fc=a0_0x3e22c7;try{let _0x3b8bf9={'leadInfo.leadnome':_0x3149ca['nome'],'leadInfo.nomecompleto':_0x3149ca[_0x4fa1fc(0x63c)],'leadInfo.email':_0x3149ca[_0x4fa1fc(0x2cf)],'leadInfo.cpf':_0x3149ca[_0x4fa1fc(0x5b4)],'leadInfo.status':_0x3149ca['status'],'leadInfo.notas':_0x3149ca['notas'],'leadInfo.responsavelid':_0x3149ca[_0x4fa1fc(0x36d)],'leadInfo.tags':_0x3149ca[_0x4fa1fc(0x562)],'leadInfo.customFields':_0x27b7e4};if(_0x4fa1fc(0x2cb)in _0x3149ca){let _0x1fd22f=_0x3149ca[_0x4fa1fc(0x2cb)];_0x3b8bf9['leadInfo.desativadoFluxoAte']=_0x1fd22f?Number(_0x1fd22f):null;}let _0x5df4d7=await D['findOneAndUpdate']({'id':_0x14a056,'owner':this['instance'][_0x4fa1fc(0x2e6)]},{'$set':_0x3b8bf9},{'new':!0x0,'upsert':!0x0});_0x5df4d7?(this['logger'][_0x4fa1fc(0x461)](this['instanceName']+'\x20('+this[_0x4fa1fc(0x51f)][_0x4fa1fc(0x2e6)]+_0x4fa1fc(0x39b)+_0x5df4d7[_0x4fa1fc(0x1fb)]),q(this['instanceName'],_0x4fa1fc(0x509),{'chat':_0x5df4d7})):this[_0x4fa1fc(0x187)][_0x4fa1fc(0x41f)](this['instanceName']+'\x20('+this['instance'][_0x4fa1fc(0x2e6)]+_0x4fa1fc(0x24c));}catch(_0x425037){this[_0x4fa1fc(0x187)][_0x4fa1fc(0x41f)](this[_0x4fa1fc(0x202)]+'\x20('+this['instance'][_0x4fa1fc(0x2e6)]+_0x4fa1fc(0x58f)+_0x425037);}}async[a0_0x3e22c7(0x58a)](_0x2f51bd,_0x37d6e2){const _0xa9bb18=a0_0x3e22c7;this[_0xa9bb18(0x187)][_0xa9bb18(0x461)](this[_0xa9bb18(0x202)]+'\x20('+this[_0xa9bb18(0x51f)][_0xa9bb18(0x2e6)]+_0xa9bb18(0x3de)+_0x37d6e2);try{let _0x4eafbd=await D['findOneAndUpdate']({'id':_0x2f51bd[_0xa9bb18(0x2c2)],'owner':_0x2f51bd[_0xa9bb18(0x40b)]},{'$set':{'leadInfo.desativadoFluxoAte':_0x37d6e2}},{'new':!0x0});this[_0xa9bb18(0x187)][_0xa9bb18(0x461)](this[_0xa9bb18(0x202)]+'\x20('+this[_0xa9bb18(0x51f)][_0xa9bb18(0x2e6)]+_0xa9bb18(0x495)+_0x2f51bd[_0xa9bb18(0x1fb)]),this[_0xa9bb18(0x187)]['verbose'](this['instanceName']+'\x20('+this[_0xa9bb18(0x51f)][_0xa9bb18(0x2e6)]+_0xa9bb18(0x3de)+JSON[_0xa9bb18(0x5af)](_0x4eafbd,null,0x2)),_0x4eafbd&&q(this['instanceName'],_0xa9bb18(0x509),{'chat':_0x4eafbd});}catch(_0x3698c3){this[_0xa9bb18(0x187)][_0xa9bb18(0x41f)](this['instanceName']+'\x20('+this[_0xa9bb18(0x51f)][_0xa9bb18(0x2e6)]+_0xa9bb18(0x18c)+JSON[_0xa9bb18(0x5af)](_0x3698c3));}}async[a0_0x3e22c7(0x1c6)](_0x3a93ec,_0x20a5a3){const _0x119d89=a0_0x3e22c7;try{this[_0x119d89(0x187)][_0x119d89(0x461)](this[_0x119d89(0x202)]+'\x20('+this[_0x119d89(0x51f)]['wuid']+_0x119d89(0x346));let _0x4b172e=_0x20a5a3[_0x119d89(0x5b0)](/\D/g,''),_0x27c110=await I[_0x119d89(0x635)]({'owner':_0x3a93ec,'testingWith':_0x4b172e});return _0x27c110||(this[_0x119d89(0x187)][_0x119d89(0x461)](this['instanceName']+'\x20('+this[_0x119d89(0x51f)][_0x119d89(0x2e6)]+'):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...'),_0x27c110=await I['findOne']({'owner':_0x3a93ec,'default':!0x0})),_0x27c110||(this[_0x119d89(0x187)][_0x119d89(0x461)](this[_0x119d89(0x202)]+'\x20('+this[_0x119d89(0x51f)][_0x119d89(0x2e6)]+_0x119d89(0x304)),null);}catch(_0x2934b1){return this[_0x119d89(0x187)]['error'](this[_0x119d89(0x202)]+'\x20('+this[_0x119d89(0x51f)][_0x119d89(0x2e6)]+_0x119d89(0x68e)+_0x2934b1),null;}}async[a0_0x3e22c7(0x4e4)](_0x39ca51,_0x50e440,_0x2d66ba){const _0x497c91=a0_0x3e22c7;try{let _0x3ce42b=!!_0x2d66ba[_0x497c91(0x19a)],_0x13e1e7=_0x2d66ba[_0x497c91(0x2b1)],_0x595df2=null;if(this[_0x497c91(0x187)]['verbose'](this[_0x497c91(0x202)]+'\x20('+this[_0x497c91(0x51f)]['wuid']+_0x497c91(0x5d5)+_0x3ce42b+_0x497c91(0x2b1)+_0x13e1e7),_0x3ce42b)return this[_0x497c91(0x187)][_0x497c91(0x461)](this[_0x497c91(0x202)]+'\x20('+this[_0x497c91(0x51f)][_0x497c91(0x2e6)]+_0x497c91(0x67a)),_0x595df2=await G[_0x497c91(0x635)]({'owner':_0x39ca51,'remoteJid':_0x50e440,'waitingPoll_id':_0x13e1e7}),_0x595df2?(_0x595df2[_0x497c91(0x247)]=Date[_0x497c91(0x43b)](),_0x595df2['chatLog'][_0x497c91(0x3cd)]=_0x2d66ba,_0x595df2):(this[_0x497c91(0x187)][_0x497c91(0x461)](this['instanceName']+'\x20('+this[_0x497c91(0x51f)]['wuid']+_0x497c91(0x1e5)),null);{if(this[_0x497c91(0x187)]['verbose'](this['instanceName']+'\x20('+this[_0x497c91(0x51f)][_0x497c91(0x2e6)]+'):\x20'+this['instance'][_0x497c91(0x2e6)]+_0x497c91(0x34a)),this[_0x497c91(0x187)]['verbose'](this[_0x497c91(0x202)]+'\x20('+this[_0x497c91(0x51f)][_0x497c91(0x2e6)]+_0x497c91(0x627)),_0x595df2=await G['findOne']({'owner':_0x39ca51,'remoteJid':_0x50e440,'status':_0x497c91(0x1c1)}),!_0x595df2){let _0x3de687=await this[_0x497c91(0x1c6)](_0x39ca51,_0x50e440);if(_0x3de687&&(_0x595df2=await this['createNewConversation'](_0x3de687,_0x2d66ba[_0x497c91(0x657)],_0x2d66ba)),!_0x595df2)return null;}let _0x482490=Date[_0x497c91(0x43b)](),_0x58c7dd=_0x595df2?.[_0x497c91(0x254)]||0x0,_0x3bfb82=_0x482490-_0x58c7dd*0x3c*0x3e8;if(this['logger'][_0x497c91(0x461)](this['instanceName']+'\x20('+this[_0x497c91(0x51f)][_0x497c91(0x2e6)]+_0x497c91(0x58b)+_0x482490+',\x20Minutes\x20to\x20Close:\x20'+_0x58c7dd+_0x497c91(0x62a)+_0x3bfb82),this[_0x497c91(0x187)][_0x497c91(0x461)](this[_0x497c91(0x202)]+'\x20('+this[_0x497c91(0x51f)][_0x497c91(0x2e6)]+_0x497c91(0x2a8)),this['logger'][_0x497c91(0x461)](this[_0x497c91(0x202)]+'\x20('+this[_0x497c91(0x51f)][_0x497c91(0x2e6)]+'):\x20conversation.lastInteraction:\x20'+_0x595df2[_0x497c91(0x247)]),this[_0x497c91(0x187)][_0x497c91(0x461)](this['instanceName']+'\x20('+this[_0x497c91(0x51f)]['wuid']+_0x497c91(0x490)+_0x3bfb82),_0x595df2[_0x497c91(0x247)]<_0x3bfb82){this[_0x497c91(0x187)][_0x497c91(0x461)](this[_0x497c91(0x202)]+'\x20('+this[_0x497c91(0x51f)]['wuid']+_0x497c91(0x5dd));let _0x3d088a=await this[_0x497c91(0x1c6)](_0x39ca51,_0x50e440);if(_0x3d088a===null)return null;_0x595df2&&await G[_0x497c91(0x628)]({'_id':_0x595df2['_id']},{'status':_0x497c91(0x3f1)}),_0x595df2=await this['createNewConversation'](_0x3d088a,_0x2d66ba['key'],_0x2d66ba);}return _0x595df2['lastInteraction']=_0x482490,_0x595df2[_0x497c91(0x710)][_0x497c91(0x3cd)]=_0x2d66ba,_0x595df2;}}catch(_0x267b1d){return this[_0x497c91(0x187)]['error'](this[_0x497c91(0x202)]+'\x20('+this[_0x497c91(0x51f)][_0x497c91(0x2e6)]+_0x497c91(0x18a)+_0x267b1d),null;}}async[a0_0x3e22c7(0x1a6)](_0x51f7a2,_0x5696fa,_0x2a6d45){const _0x558c49=a0_0x3e22c7;this[_0x558c49(0x187)][_0x558c49(0x461)](this[_0x558c49(0x202)]+'\x20('+this[_0x558c49(0x51f)]['wuid']+_0x558c49(0x725));try{let _0x2fb372=require('mongodb')[_0x558c49(0x506)],_0x59baff=Date[_0x558c49(0x43b)](),_0x55d961=_0x558c49(0x319),_0xa607c7=_0x5696fa[_0x558c49(0x19f)]?null:_0x2a6d45,_0x7c26f1=_0x5696fa[_0x558c49(0x19f)]?_0x2a6d45:null,_0x356028=_0x5696fa['remoteJid'],_0x485aa8={..._0x51f7a2[_0x558c49(0x6e2)],'chatLog':null},_0x2b313e=await this[_0x558c49(0x601)](_0x485aa8[_0x558c49(0x324)]),_0x475132=await this[_0x558c49(0x577)](_0x356028),_0x137cb5={..._0x2b313e,..._0x475132,'_remoteJid':_0x356028},_0x4f8c7a={'lastReceivedMessage':_0xa607c7,'lastSendMessage':_0x7c26f1,'lastBlockId':_0x55d961,'lastCondition':!0x0,'realVariables':_0x137cb5};_0x485aa8[_0x558c49(0x710)]=_0x4f8c7a,delete _0x485aa8['_id'],_0x485aa8[_0x558c49(0x1fb)]=new _0x2fb372(),_0x485aa8[_0x558c49(0x247)]=_0x59baff,_0x485aa8['status']=_0x558c49(0x1c1),_0x485aa8[_0x558c49(0x2c2)]=_0x356028;let _0x4621f8=await G['create'](_0x485aa8);return this[_0x558c49(0x187)]['verbose'](this[_0x558c49(0x202)]+'\x20('+this['instance'][_0x558c49(0x2e6)]+_0x558c49(0x6a9)),_0x4621f8?_0x485aa8:null;}catch(_0x2d5447){return this[_0x558c49(0x187)][_0x558c49(0x41f)](this[_0x558c49(0x202)]+'\x20('+this[_0x558c49(0x51f)][_0x558c49(0x2e6)]+'):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20'+_0x2d5447),_0x2d5447;}}async[a0_0x3e22c7(0x413)](_0x35aac3,_0x450a96,_0x34ec8b){const _0x13eb26=a0_0x3e22c7;this[_0x13eb26(0x187)][_0x13eb26(0x461)](this[_0x13eb26(0x202)]+'\x20('+this[_0x13eb26(0x51f)]['wuid']+_0x13eb26(0x32c));let _0x1cbf55={'number':_0x34ec8b,'options':{'delay':_0x450a96[_0x13eb26(0x584)][_0x13eb26(0x292)]},'textMessage':{'text':_0x450a96[_0x13eb26(0x584)][_0x13eb26(0x5bc)]}};try{let _0x2fff8b=await this[_0x13eb26(0x658)](_0x1cbf55);if(_0x2fff8b){let _0x3a6564={'_id':_0x2fff8b[_0x13eb26(0x657)]['id'],'_fromMe':_0x2fff8b[_0x13eb26(0x657)][_0x13eb26(0x19f)],'_remoteJid':_0x2fff8b['key'][_0x13eb26(0x2c2)]};_0x35aac3['chatLog'][_0x13eb26(0x61b)]=_0x450a96[_0x13eb26(0x1fb)][_0x13eb26(0x63b)]();let {message_normalized:_0x552d23}=this[_0x13eb26(0x5fa)](_0x2fff8b[_0x13eb26(0x1f0)],W(_0x2fff8b[_0x13eb26(0x1f0)]),null);_0x35aac3['chatLog'][_0x13eb26(0x417)]=await _0x552d23;let _0x17ef34={'messageId':_0x2fff8b[_0x13eb26(0x657)]['id']},_0x954f5c=_0x35aac3[_0x13eb26(0x710)][_0x13eb26(0x408)];Object[_0x13eb26(0x472)](_0x954f5c,_0x3a6564),_0x35aac3['chatLog']['realVariables']=_0x954f5c,this[_0x13eb26(0x6a6)](_0x35aac3,_0x450a96,_0x17ef34);}else{let _0xb3d506={'error':!0x0};this[_0x13eb26(0x6a6)](_0x35aac3,_0x450a96,_0xb3d506),this[_0x13eb26(0x187)][_0x13eb26(0x41f)](this['instanceName']+'\x20('+this[_0x13eb26(0x51f)]['wuid']+_0x13eb26(0x27b));}}catch(_0x5e837e){let _0x2ad307={'error':!0x0,'errorLog':_0x5e837e[_0x13eb26(0x63b)]()};this['updateConversation'](_0x35aac3,_0x450a96,_0x2ad307),this[_0x13eb26(0x187)][_0x13eb26(0x41f)](this[_0x13eb26(0x202)]+'\x20('+this[_0x13eb26(0x51f)]['wuid']+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20'+_0x5e837e[_0x13eb26(0x63b)]());}}async[a0_0x3e22c7(0x484)](_0x55439a,_0x2e4d0b,_0x1d19b2){const _0x384006=a0_0x3e22c7;this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x384006(0x51f)][_0x384006(0x2e6)]+_0x384006(0x34f));let _0x237efd={'number':_0x1d19b2,'options':{'delay':_0x2e4d0b[_0x384006(0x584)]['delay']},'mediaMessage':{'mediatype':_0x2e4d0b[_0x384006(0x584)][_0x384006(0x64f)],'caption':_0x2e4d0b['uazapi'][_0x384006(0x56a)],'media':_0x2e4d0b[_0x384006(0x584)][_0x384006(0x1c7)]}};try{let _0x27f8b5=await this[_0x384006(0x24d)](_0x237efd);if(_0x27f8b5){let _0x13bb25={'_id':_0x27f8b5['key']['id'],'_fromMe':_0x27f8b5[_0x384006(0x657)]['fromMe'],'_remoteJid':_0x27f8b5[_0x384006(0x657)]['remoteJid']};_0x55439a[_0x384006(0x710)]['lastBlockId']=_0x2e4d0b['_id'][_0x384006(0x63b)]();let {message_normalized:_0x180fff}=this[_0x384006(0x5fa)](_0x27f8b5[_0x384006(0x1f0)],W(_0x27f8b5['message']),null);_0x55439a['chatLog'][_0x384006(0x417)]=await _0x180fff;let _0x82dfaa={'messageId':_0x27f8b5[_0x384006(0x657)]['id']},_0x12f547=_0x55439a[_0x384006(0x710)][_0x384006(0x408)];Object[_0x384006(0x472)](_0x12f547,_0x13bb25),_0x55439a['chatLog'][_0x384006(0x408)]=_0x12f547,this[_0x384006(0x6a6)](_0x55439a,_0x2e4d0b,_0x82dfaa);}else{let _0x34c3f2={'error':!0x0};this[_0x384006(0x6a6)](_0x55439a,_0x2e4d0b,_0x34c3f2),this['logger'][_0x384006(0x41f)](this[_0x384006(0x202)]+'\x20('+this['instance']['wuid']+_0x384006(0x2ff));}}catch(_0x1b99c2){let _0x293ebe={'error':!0x0,'errorLog':_0x1b99c2['toString']()};this['updateConversation'](_0x55439a,_0x2e4d0b,_0x293ebe),this[_0x384006(0x187)][_0x384006(0x41f)](this['instanceName']+'\x20('+this[_0x384006(0x51f)][_0x384006(0x2e6)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20'+_0x1b99c2[_0x384006(0x63b)]());}}async['uazapiSendLocation'](_0x486c65,_0xea4d51,_0x238236){const _0x2a6996=a0_0x3e22c7;this['logger'][_0x2a6996(0x461)](this[_0x2a6996(0x202)]+'\x20('+this[_0x2a6996(0x51f)][_0x2a6996(0x2e6)]+_0x2a6996(0x452));let _0x42c879={'number':_0x238236,'options':{'delay':_0xea4d51[_0x2a6996(0x584)][_0x2a6996(0x292)]},'locationMessage':{'name':_0xea4d51['uazapi'][_0x2a6996(0x3dc)],'address':_0xea4d51[_0x2a6996(0x584)][_0x2a6996(0x37c)],'latitude':_0xea4d51[_0x2a6996(0x584)][_0x2a6996(0x4a6)],'longitude':_0xea4d51['uazapi'][_0x2a6996(0x5a6)]}};try{let _0xaafacb=await this[_0x2a6996(0x3a8)](_0x42c879);if(_0xaafacb){let _0x4e0050={'_id':_0xaafacb['key']['id'],'_fromMe':_0xaafacb[_0x2a6996(0x657)][_0x2a6996(0x19f)],'_remoteJid':_0xaafacb[_0x2a6996(0x657)][_0x2a6996(0x2c2)]};_0x486c65[_0x2a6996(0x710)][_0x2a6996(0x61b)]=_0xea4d51[_0x2a6996(0x1fb)][_0x2a6996(0x63b)]();let {message_normalized:_0x59c033}=this[_0x2a6996(0x5fa)](_0xaafacb[_0x2a6996(0x1f0)],W(_0xaafacb['message']),null);_0x486c65[_0x2a6996(0x710)][_0x2a6996(0x417)]=await _0x59c033;let _0x5f34b3={'messageId':_0xaafacb[_0x2a6996(0x657)]['id']},_0x1e9a3c=_0x486c65[_0x2a6996(0x710)][_0x2a6996(0x408)];Object[_0x2a6996(0x472)](_0x1e9a3c,_0x4e0050),_0x486c65[_0x2a6996(0x710)][_0x2a6996(0x408)]=_0x1e9a3c,this['updateConversation'](_0x486c65,_0xea4d51,_0x5f34b3);}else{let _0x1d70f3={'error':!0x0};this[_0x2a6996(0x6a6)](_0x486c65,_0xea4d51,_0x1d70f3),this['logger'][_0x2a6996(0x41f)](this[_0x2a6996(0x202)]+'\x20('+this[_0x2a6996(0x51f)][_0x2a6996(0x2e6)]+_0x2a6996(0x29a));}}catch(_0x17170d){let _0x550864={'error':!0x0,'errorLog':_0x17170d[_0x2a6996(0x63b)]()};this['updateConversation'](_0x486c65,_0xea4d51,_0x550864),this['logger'][_0x2a6996(0x41f)](this[_0x2a6996(0x202)]+'\x20('+this[_0x2a6996(0x51f)][_0x2a6996(0x2e6)]+_0x2a6996(0x478)+_0x17170d[_0x2a6996(0x63b)]());}}async[a0_0x3e22c7(0x3e1)](_0x497249,_0x143909,_0x2ae3de){const _0x44449a=a0_0x3e22c7;this[_0x44449a(0x187)]['verbose'](this[_0x44449a(0x202)]+'\x20('+this[_0x44449a(0x51f)]['wuid']+_0x44449a(0x37f));let _0x1ebb6a={'number':_0x2ae3de,'options':{'delay':_0x143909[_0x44449a(0x584)][_0x44449a(0x292)]},'audioMessage':{'audio':_0x143909[_0x44449a(0x584)]['audio']}};try{let _0x5efb92=await this[_0x44449a(0x485)](_0x1ebb6a);if(_0x5efb92){let _0x410ee8={'_id':_0x5efb92[_0x44449a(0x657)]['id'],'_fromMe':_0x5efb92[_0x44449a(0x657)][_0x44449a(0x19f)],'_remoteJid':_0x5efb92[_0x44449a(0x657)][_0x44449a(0x2c2)]};_0x497249[_0x44449a(0x710)][_0x44449a(0x61b)]=_0x143909['_id']['toString']();let {message_normalized:_0x10234b}=this[_0x44449a(0x5fa)](_0x5efb92[_0x44449a(0x1f0)],W(_0x5efb92[_0x44449a(0x1f0)]),null);_0x497249[_0x44449a(0x710)][_0x44449a(0x417)]=await _0x10234b;let _0x4dd1fb={'messageId':_0x5efb92[_0x44449a(0x657)]['id']},_0x3dfbab=_0x497249[_0x44449a(0x710)][_0x44449a(0x408)];Object[_0x44449a(0x472)](_0x3dfbab,_0x410ee8),_0x497249[_0x44449a(0x710)][_0x44449a(0x408)]=_0x3dfbab,this[_0x44449a(0x6a6)](_0x497249,_0x143909,_0x4dd1fb);}else{let _0x23eab3={'error':!0x0};this[_0x44449a(0x6a6)](_0x497249,_0x143909,_0x23eab3),this[_0x44449a(0x187)][_0x44449a(0x41f)](this[_0x44449a(0x202)]+'\x20('+this[_0x44449a(0x51f)][_0x44449a(0x2e6)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.');}}catch(_0xb48ea3){let _0x5e42d8={'error':!0x0,'errorLog':_0xb48ea3[_0x44449a(0x63b)]()};this[_0x44449a(0x6a6)](_0x497249,_0x143909,_0x5e42d8),this[_0x44449a(0x187)]['error'](this[_0x44449a(0x202)]+'\x20('+this[_0x44449a(0x51f)][_0x44449a(0x2e6)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20'+_0xb48ea3[_0x44449a(0x63b)]());}}async[a0_0x3e22c7(0x499)](_0x5110b6,_0x4575db,_0x1c637d){const _0x5bc328=a0_0x3e22c7;this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x5bc328(0x51f)]['wuid']+'):\x20Enviando\x20contato');let _0x23e328={'number':_0x1c637d,'options':{'delay':_0x4575db[_0x5bc328(0x584)][_0x5bc328(0x292)]},'contactMessage':[{'fullName':_0x4575db['uazapi'][_0x5bc328(0x410)],'phoneNumber':_0x4575db['uazapi'][_0x5bc328(0x587)]}]};try{let _0x48a84f=await this[_0x5bc328(0x326)](_0x23e328);if(_0x48a84f){let _0x5bd525={'_id':_0x48a84f['key']['id'],'_fromMe':_0x48a84f[_0x5bc328(0x657)][_0x5bc328(0x19f)],'_remoteJid':_0x48a84f['key'][_0x5bc328(0x2c2)]};_0x5110b6[_0x5bc328(0x710)][_0x5bc328(0x61b)]=_0x4575db[_0x5bc328(0x1fb)][_0x5bc328(0x63b)]();let {message_normalized:_0x18ad3d}=this[_0x5bc328(0x5fa)](_0x48a84f[_0x5bc328(0x1f0)],W(_0x48a84f[_0x5bc328(0x1f0)]),null);_0x5110b6['chatLog'][_0x5bc328(0x417)]=await _0x18ad3d;let _0x56450f={'messageId':_0x48a84f[_0x5bc328(0x657)]['id']},_0x1b1320=_0x5110b6['chatLog']['realVariables'];Object[_0x5bc328(0x472)](_0x1b1320,_0x5bd525),_0x5110b6[_0x5bc328(0x710)]['realVariables']=_0x1b1320,this['updateConversation'](_0x5110b6,_0x4575db,_0x56450f);}else{let _0x28ef9a={'error':!0x0};this['updateConversation'](_0x5110b6,_0x4575db,_0x28ef9a),this[_0x5bc328(0x187)][_0x5bc328(0x41f)](this[_0x5bc328(0x202)]+'\x20('+this[_0x5bc328(0x51f)][_0x5bc328(0x2e6)]+_0x5bc328(0x6e3));}}catch(_0x206b16){let _0x26cad7={'error':!0x0,'errorLog':_0x206b16['toString']()};this['updateConversation'](_0x5110b6,_0x4575db,_0x26cad7),this[_0x5bc328(0x187)][_0x5bc328(0x41f)](this[_0x5bc328(0x202)]+'\x20('+this[_0x5bc328(0x51f)][_0x5bc328(0x2e6)]+_0x5bc328(0x28a)+_0x206b16[_0x5bc328(0x63b)]());}}[a0_0x3e22c7(0x34c)](_0x3b69ac,_0x380b72){const _0x108d85=a0_0x3e22c7;for(let _0x563fb3 of _0x3b69ac)_0x563fb3[_0x108d85(0x576)]&&(_0x563fb3[_0x108d85(0x576)]=this[_0x108d85(0x30f)](_0x563fb3['option'],_0x380b72)),_0x563fb3[_0x108d85(0x492)]&&(_0x563fb3['optionDescription']=this[_0x108d85(0x30f)](_0x563fb3['optionDescription'],_0x380b72));}async[a0_0x3e22c7(0x676)](_0xb37b94,_0x43846c,_0x5b5692){const _0x10a040=a0_0x3e22c7;this[_0x10a040(0x187)][_0x10a040(0x461)](this[_0x10a040(0x202)]+'\x20('+this[_0x10a040(0x51f)][_0x10a040(0x2e6)]+'):\x20Enviando\x20enquete');let _0x20b615=_0xb37b94[_0x10a040(0x419)][_0x10a040(0x2a7)](_0xe39c28=>_0xe39c28[_0x10a040(0x726)]===_0x43846c[_0x10a040(0x1fb)]);this[_0x10a040(0x34c)](_0x20b615,_0xb37b94[_0x10a040(0x710)][_0x10a040(0x408)]);let _0x44b937=_0x20b615[_0x10a040(0x5a9)](_0x33d631=>_0x33d631[_0x10a040(0x576)]),_0x8cfdf3={'number':_0x5b5692,'options':{'delay':_0x43846c['uazapi'][_0x10a040(0x292)]},'pollMessage':{'name':_0x43846c['uazapi']['name'],'selectableCount':0x1,'values':_0x44b937}};try{let _0x157ae4=await this[_0x10a040(0x4c9)](_0x8cfdf3);if(_0x157ae4){let _0x2ae442={'_id':_0x157ae4[_0x10a040(0x657)]['id'],'_fromMe':_0x157ae4[_0x10a040(0x657)][_0x10a040(0x19f)],'_remoteJid':_0x157ae4[_0x10a040(0x657)][_0x10a040(0x2c2)]};this[_0x10a040(0x187)][_0x10a040(0x461)](this[_0x10a040(0x202)]+'\x20('+this[_0x10a040(0x51f)]['wuid']+_0x10a040(0x435)+_0x43846c[_0x10a040(0x584)][_0x10a040(0x3dc)]),_0xb37b94[_0x10a040(0x151)]=_0x157ae4['key']['id'],_0xb37b94[_0x10a040(0x582)]=_0x43846c['uazapi']['name'],_0xb37b94[_0x10a040(0x656)]=_0x20b615,this['logger'][_0x10a040(0x461)](this['instanceName']+'\x20('+this[_0x10a040(0x51f)][_0x10a040(0x2e6)]+_0x10a040(0x64e)+_0xb37b94[_0x10a040(0x582)]),_0xb37b94[_0x10a040(0x710)][_0x10a040(0x61b)]=_0x43846c[_0x10a040(0x1fb)][_0x10a040(0x63b)]();let {message_normalized:_0x5e5eb6}=this[_0x10a040(0x5fa)](_0x157ae4[_0x10a040(0x1f0)],W(_0x157ae4[_0x10a040(0x1f0)]),null);_0xb37b94[_0x10a040(0x710)]['lastSendMessage']=await _0x5e5eb6;let _0x374c44={'messageId':_0x157ae4['key']['id']},_0x449654=_0xb37b94[_0x10a040(0x710)][_0x10a040(0x408)];Object[_0x10a040(0x472)](_0x449654,_0x2ae442),_0xb37b94[_0x10a040(0x710)][_0x10a040(0x408)]=_0x449654,this[_0x10a040(0x6a6)](_0xb37b94,_0x43846c,_0x374c44);}else{let _0x4cd95b={'error':!0x0};this['updateConversation'](_0xb37b94,_0x43846c,_0x4cd95b),this[_0x10a040(0x187)][_0x10a040(0x41f)](this[_0x10a040(0x202)]+'\x20('+this[_0x10a040(0x51f)][_0x10a040(0x2e6)]+_0x10a040(0x41b));}}catch(_0x5ad0e0){let _0x37f726={'error':!0x0,'errorLog':_0x5ad0e0['toString']()};this[_0x10a040(0x6a6)](_0xb37b94,_0x43846c,_0x37f726),this[_0x10a040(0x187)][_0x10a040(0x41f)](this[_0x10a040(0x202)]+'\x20('+this['instance'][_0x10a040(0x2e6)]+_0x10a040(0x6b2)+_0x5ad0e0[_0x10a040(0x63b)]());}}async[a0_0x3e22c7(0x1d6)](_0x550257,_0x2c4968,_0x16208c){const _0x3935e5=a0_0x3e22c7;this[_0x3935e5(0x187)][_0x3935e5(0x461)](this[_0x3935e5(0x202)]+'\x20('+this[_0x3935e5(0x51f)][_0x3935e5(0x2e6)]+'):\x20Deletando\x20mensagem');let _0x18ca14=_0x550257['chatLog']['blockLogs']['find'](_0x24dc89=>_0x24dc89[_0x3935e5(0x726)]['toString']()===_0x2c4968['uazapi'][_0x3935e5(0x726)]['toString']()),_0x5cfb14={'id':_0x18ca14['messageId'],'remoteJid':_0x18ca14[_0x3935e5(0x2c2)],'fromMe':_0x18ca14['fromMe']};try{let _0x80a8d9=await this[_0x3935e5(0x6f4)](_0x5cfb14);if(_0x80a8d9){_0x550257[_0x3935e5(0x710)][_0x3935e5(0x61b)]=_0x2c4968[_0x3935e5(0x1fb)]['toString']();let {message_normalized:_0x2088d2}=this[_0x3935e5(0x5fa)](_0x80a8d9[_0x3935e5(0x1f0)],W(_0x80a8d9[_0x3935e5(0x1f0)]),null);_0x550257[_0x3935e5(0x710)]['lastSendMessage']=await _0x2088d2;let _0x4b608b={};this[_0x3935e5(0x6a6)](_0x550257,_0x2c4968,_0x4b608b);}else{let _0x4cba28={'error':!0x0};this[_0x3935e5(0x6a6)](_0x550257,_0x2c4968,_0x4cba28),this[_0x3935e5(0x187)]['error'](this['instanceName']+'\x20('+this[_0x3935e5(0x51f)][_0x3935e5(0x2e6)]+_0x3935e5(0x5de));}}catch(_0x56b77c){let _0x4e8dfd={'error':!0x0,'errorLog':_0x56b77c['toString']()};this[_0x3935e5(0x6a6)](_0x550257,_0x2c4968,_0x4e8dfd),this[_0x3935e5(0x187)][_0x3935e5(0x41f)](this['instanceName']+'\x20('+this[_0x3935e5(0x51f)]['wuid']+_0x3935e5(0x543)+_0x56b77c[_0x3935e5(0x63b)]());}}async[a0_0x3e22c7(0x6f9)](_0x42bca9){const _0x521f99=a0_0x3e22c7;try{if(this[_0x521f99(0x187)][_0x521f99(0x461)](this[_0x521f99(0x202)]+'\x20('+this[_0x521f99(0x51f)][_0x521f99(0x2e6)]+_0x521f99(0x2aa)),await I[_0x521f99(0x635)]({'owner':this[_0x521f99(0x51f)][_0x521f99(0x2e6)],'name':_0x42bca9[_0x521f99(0x3dc)]}))return{'message':_0x521f99(0x3d1)};_0x42bca9['default']===!0x0&&await I['updateMany']({'owner':this[_0x521f99(0x51f)][_0x521f99(0x2e6)]},{'default':!0x1});let _0x46021c=new be[(_0x521f99(0x22f))][(_0x521f99(0x506))](),_0x57d54d={'_id':_0x46021c,'default':!0x0,'title':_0x521f99(0x621),'x':0x0,'y':0x0},_0x603f79={'_id':new be[(_0x521f99(0x22f))]['ObjectId'](),'order':0x1,'groupId':_0x46021c[_0x521f99(0x63b)](),'type':_0x521f99(0x319)};return await I[_0x521f99(0x516)]({'owner':this['instance'][_0x521f99(0x2e6)],'name':_0x42bca9[_0x521f99(0x3dc)],'groups':[_0x57d54d],'blocks':[_0x603f79],..._0x42bca9});}catch(_0x5990df){throw this['logger']['error'](this[_0x521f99(0x202)]+'\x20('+this[_0x521f99(0x51f)][_0x521f99(0x2e6)]+'):\x20Erro\x20ao\x20criar\x20fluxo\x20'+_0x5990df),new g(_0x521f99(0x2f5)+_0x5990df);}}async[a0_0x3e22c7(0x50c)](_0x5110ee){const _0x3f8799=a0_0x3e22c7;try{return this[_0x3f8799(0x187)][_0x3f8799(0x461)](this['instanceName']+'\x20('+this[_0x3f8799(0x51f)][_0x3f8799(0x2e6)]+_0x3f8799(0x4ce)),await I[_0x3f8799(0x35d)]({'owner':this[_0x3f8799(0x51f)][_0x3f8799(0x2e6)],'name':_0x5110ee});}catch(_0x563ae3){return this[_0x3f8799(0x187)][_0x3f8799(0x41f)](this[_0x3f8799(0x202)]+'\x20('+this[_0x3f8799(0x51f)]['wuid']+_0x3f8799(0x559)+_0x563ae3),{'message':_0x3f8799(0x4f3)+_0x563ae3};}}async[a0_0x3e22c7(0x428)](_0x159c9b){const _0x13c8e0=a0_0x3e22c7;try{this[_0x13c8e0(0x187)][_0x13c8e0(0x461)](this['instanceName']+'\x20('+this['instance'][_0x13c8e0(0x2e6)]+'):\x20Buscando\x20flow...');let _0xeb7ac3=await I[_0x13c8e0(0x635)]({'owner':this[_0x13c8e0(0x51f)][_0x13c8e0(0x2e6)],'name':_0x159c9b});if(!_0xeb7ac3)throw new Error('Flow\x20não\x20encontrado');if(!this['AutomateSystem']&&(await this[_0x13c8e0(0x66b)](),!this[_0x13c8e0(0x394)]))return null;let _0x253144=this[_0x13c8e0(0x394)]?.['customFields'][_0x13c8e0(0x5a9)](_0x179cfd=>_0x179cfd['name']),_0x35a9a4=[_0x13c8e0(0x3ea),_0x13c8e0(0x63c),_0x13c8e0(0x2cf),_0x13c8e0(0x5b4),'status',_0x13c8e0(0x23c),_0x13c8e0(0x36d),_0x13c8e0(0x562)];return _0xeb7ac3[_0x13c8e0(0x324)]=_0xeb7ac3[_0x13c8e0(0x324)][_0x13c8e0(0x2a7)](_0x357628=>!_0x35a9a4[_0x13c8e0(0x457)](_0x357628['name'])),_0x35a9a4[_0x13c8e0(0x4e9)](_0x38253b=>{const _0x320d88=_0x13c8e0;_0xeb7ac3[_0x320d88(0x324)][_0x320d88(0x6a8)]({'folder':_0x320d88(0x184),'name':_0x38253b,'value':'','doc':'','leadInfo':!0x0});}),_0xeb7ac3[_0x13c8e0(0x324)]=_0xeb7ac3[_0x13c8e0(0x324)][_0x13c8e0(0x2a7)](_0x2948a6=>!_0x253144[_0x13c8e0(0x457)](_0x2948a6['name'])),_0x253144[_0x13c8e0(0x4e9)](_0x473be7=>{const _0x5290b3=_0x13c8e0;_0xeb7ac3[_0x5290b3(0x324)]['some'](_0xf8c1db=>_0xf8c1db[_0x5290b3(0x3dc)]===_0x473be7&&_0xf8c1db[_0x5290b3(0x184)]===!0x0)||_0xeb7ac3[_0x5290b3(0x324)]['push']({'folder':_0x5290b3(0x184),'name':_0x473be7,'value':'','doc':'','leadInfo':!0x0});}),await _0xeb7ac3['save'](),_0xeb7ac3;}catch(_0x2aef39){throw this['logger']['error'](this[_0x13c8e0(0x202)]+'\x20('+this[_0x13c8e0(0x51f)][_0x13c8e0(0x2e6)]+_0x13c8e0(0x65d)+_0x2aef39),new g(_0x13c8e0(0x6fa)+_0x2aef39);}}async['allFlows'](){const _0x3bb17a=a0_0x3e22c7;try{return this['logger'][_0x3bb17a(0x461)](this[_0x3bb17a(0x202)]+'\x20('+this[_0x3bb17a(0x51f)][_0x3bb17a(0x2e6)]+'):\x20Buscando\x20todos\x20os\x20fluxos...'),await I[_0x3bb17a(0x445)]({'owner':this[_0x3bb17a(0x51f)][_0x3bb17a(0x2e6)]});}catch(_0x4a9700){return this[_0x3bb17a(0x187)][_0x3bb17a(0x41f)](this[_0x3bb17a(0x202)]+'\x20('+this[_0x3bb17a(0x51f)]['wuid']+_0x3bb17a(0x545)+_0x4a9700),{'message':'Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20'+_0x4a9700};}}async[a0_0x3e22c7(0x33e)](_0x1236c0){const _0x5ea01e=a0_0x3e22c7;try{this[_0x5ea01e(0x187)]['verbose'](this[_0x5ea01e(0x202)]+'\x20('+this['instance'][_0x5ea01e(0x2e6)]+_0x5ea01e(0x49c));let _0x5c66cd=await I['findOne']({'owner':this[_0x5ea01e(0x51f)]['wuid'],'name':_0x1236c0['name']});if(!_0x5c66cd)return{'message':_0x5ea01e(0x1d7)};if(_0x1236c0[_0x5ea01e(0x30c)]===!0x0&&await I[_0x5ea01e(0x390)]({'owner':this['instance'][_0x5ea01e(0x2e6)]},{'default':!0x1}),_0x1236c0[_0x5ea01e(0x15a)]){if(await I[_0x5ea01e(0x635)]({'owner':this['instance'][_0x5ea01e(0x2e6)],'name':_0x1236c0['newName']}))return{'message':_0x5ea01e(0x548)};_0x1236c0[_0x5ea01e(0x3dc)]=_0x1236c0[_0x5ea01e(0x15a)],delete _0x1236c0[_0x5ea01e(0x15a)];}return await I['findByIdAndUpdate'](_0x5c66cd[_0x5ea01e(0x1fb)],{'$set':_0x1236c0},{'new':!0x0});}catch(_0x942c36){throw this[_0x5ea01e(0x187)][_0x5ea01e(0x41f)](this[_0x5ea01e(0x202)]+'\x20('+this['instance'][_0x5ea01e(0x2e6)]+_0x5ea01e(0x705)+_0x942c36),new g(_0x5ea01e(0x1ae)+_0x942c36);}}async['editFlowBlock'](_0x32fcb1){const _0x17ae24=a0_0x3e22c7;try{this[_0x17ae24(0x187)][_0x17ae24(0x461)](this['instanceName']+'\x20('+this[_0x17ae24(0x51f)][_0x17ae24(0x2e6)]+_0x17ae24(0x290));let _0x2d019a={'owner':this[_0x17ae24(0x51f)][_0x17ae24(0x2e6)],'name':_0x32fcb1[_0x17ae24(0x3dc)]},_0x4bd016=await I[_0x17ae24(0x635)](_0x2d019a);_0x4bd016||this[_0x17ae24(0x558)](_0x17ae24(0x2c4));let {block:_0x54d32b}=_0x32fcb1;return _0x54d32b?.[_0x17ae24(0x45d)]?this[_0x17ae24(0x59a)](_0x4bd016,_0x32fcb1):_0x54d32b[_0x17ae24(0x1fb)]?await this[_0x17ae24(0x2b5)](_0x4bd016,_0x32fcb1):this[_0x17ae24(0x642)](_0x4bd016,_0x32fcb1),await _0x4bd016[_0x17ae24(0x2bb)](),_0x4bd016;}catch(_0x32fb5c){this[_0x17ae24(0x558)](_0x17ae24(0x720)+_0x32fb5c);}}[a0_0x3e22c7(0x558)](_0x3d6dd7){const _0x37b1d3=a0_0x3e22c7;throw this['logger'][_0x37b1d3(0x41f)](this[_0x37b1d3(0x202)]+'\x20('+this['instance']['wuid']+_0x37b1d3(0x515)+_0x3d6dd7),new g(_0x3d6dd7);}[a0_0x3e22c7(0x59a)](_0x481a0a,_0x28954e){const _0x15950b=a0_0x3e22c7;let {block:_0x58b388}=_0x28954e;if(_0x58b388['type']==='start'){this[_0x15950b(0x558)](_0x15950b(0x194));return;}if(!_0x58b388[_0x15950b(0x1fb)]){this[_0x15950b(0x558)](_0x15950b(0x237));return;}let _0x3e6a98=_0x481a0a[_0x15950b(0x4e6)][_0x15950b(0x445)](_0x170813=>_0x170813['_id'][_0x15950b(0x63b)]()===_0x28954e[_0x15950b(0x600)]['_id']['toString']());if(!_0x3e6a98){this[_0x15950b(0x558)]('Bloco\x20com\x20ID\x20'+_0x58b388[_0x15950b(0x1fb)]+_0x15950b(0x2f6));return;}_0x481a0a[_0x15950b(0x4e6)]=_0x481a0a[_0x15950b(0x4e6)]['filter'](_0x3cf9a8=>_0x3cf9a8[_0x15950b(0x1fb)]['toString']()!==_0x28954e['block'][_0x15950b(0x1fb)][_0x15950b(0x63b)]()),_0x481a0a['conditions']=_0x481a0a[_0x15950b(0x6a7)]['filter'](_0x40416a=>_0x40416a[_0x15950b(0x726)]!==_0x58b388[_0x15950b(0x1fb)][_0x15950b(0x63b)]()),_0x481a0a['varedits']=_0x481a0a[_0x15950b(0x20e)][_0x15950b(0x2a7)](_0x3c8752=>_0x3c8752[_0x15950b(0x726)]!==_0x58b388[_0x15950b(0x1fb)][_0x15950b(0x63b)]()),_0x481a0a['replyOptions']=_0x481a0a['replyOptions'][_0x15950b(0x2a7)](_0x1548ca=>_0x1548ca[_0x15950b(0x726)]!==_0x58b388[_0x15950b(0x1fb)][_0x15950b(0x63b)]()),this[_0x15950b(0x349)](_0x481a0a[_0x15950b(0x4e6)],_0x3e6a98[_0x15950b(0x31d)]);}async[a0_0x3e22c7(0x2b5)](_0x20e603,_0x5170c5){const _0xd2d518=a0_0x3e22c7;let _0x54961e=_0x20e603['blocks'][_0xd2d518(0x335)](_0x113527=>_0x113527[_0xd2d518(0x1fb)]['toString']()===_0x5170c5[_0xd2d518(0x600)][_0xd2d518(0x1fb)]['toString']());if(this['logger'][_0xd2d518(0x461)](this[_0xd2d518(0x202)]+'\x20('+this[_0xd2d518(0x51f)][_0xd2d518(0x2e6)]+_0xd2d518(0x339)+_0x54961e),_0x54961e===-0x1){this[_0xd2d518(0x187)][_0xd2d518(0x461)](_0xd2d518(0x2ef)+_0x5170c5[_0xd2d518(0x600)][_0xd2d518(0x1fb)]+'\x20não\x20encontrado\x20para\x20atualização.');return;}if(_0x20e603['blocks'][_0x54961e][_0xd2d518(0x2e9)]===_0xd2d518(0x319)){let _0x30e92a=Object[_0xd2d518(0x5d2)](_0x5170c5['block']);if(_0x30e92a[_0xd2d518(0x2d6)]>0x2||_0x30e92a[_0xd2d518(0x2d6)]===0x2&&!_0x30e92a[_0xd2d518(0x457)]('next_groupId')){this[_0xd2d518(0x558)](_0xd2d518(0x438));return;}}let _0x145665=_0x20e603[_0xd2d518(0x4e6)][_0x54961e][_0xd2d518(0x31d)];for(let _0x468776 in _0x5170c5[_0xd2d518(0x600)])_0x5170c5[_0xd2d518(0x600)][_0xd2d518(0x4bd)](_0x468776)&&(_0x20e603[_0xd2d518(0x4e6)][_0x54961e][_0x468776]=_0x5170c5['block'][_0x468776]);if(this[_0xd2d518(0x187)][_0xd2d518(0x461)](this[_0xd2d518(0x202)]+'\x20('+this[_0xd2d518(0x51f)][_0xd2d518(0x2e6)]+_0xd2d518(0x263)+JSON[_0xd2d518(0x5af)](_0x20e603[_0xd2d518(0x4e6)][_0x54961e])),_0x20e603[_0xd2d518(0x4e6)][_0x54961e][_0xd2d518(0x24f)]&&_0xd2d518(0x25a)in _0x20e603[_0xd2d518(0x4e6)][_0x54961e]['apirequest']){this[_0xd2d518(0x187)][_0xd2d518(0x461)](this[_0xd2d518(0x202)]+'\x20('+this['instance'][_0xd2d518(0x2e6)]+_0xd2d518(0x231));let _0x383a5e=JSON[_0xd2d518(0x5af)](_0x20e603[_0xd2d518(0x4e6)][_0x54961e][_0xd2d518(0x24f)]['header'],null,0x1);_0x383a5e[_0xd2d518(0x2d6)]>0x2&&(_0x383a5e=_0x383a5e[_0xd2d518(0x340)](0x1,_0x383a5e[_0xd2d518(0x2d6)]-0x1)[_0xd2d518(0x4aa)]()),_0x20e603[_0xd2d518(0x4e6)][_0x54961e]['apirequest'][_0xd2d518(0x661)]=_0x383a5e;}if(_0x20e603[_0xd2d518(0x4e6)][_0x54961e][_0xd2d518(0x24f)]&&_0xd2d518(0x31f)in _0x20e603['blocks'][_0x54961e][_0xd2d518(0x24f)]){this[_0xd2d518(0x187)][_0xd2d518(0x461)](this[_0xd2d518(0x202)]+'\x20('+this[_0xd2d518(0x51f)][_0xd2d518(0x2e6)]+'):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString');let _0x3a3158=JSON[_0xd2d518(0x5af)](_0x20e603[_0xd2d518(0x4e6)][_0x54961e][_0xd2d518(0x24f)][_0xd2d518(0x31f)],null,0x1);_0x3a3158[_0xd2d518(0x2d6)]>0x2&&(_0x3a3158=_0x3a3158[_0xd2d518(0x340)](0x1,_0x3a3158[_0xd2d518(0x2d6)]-0x1)['trim']()),_0x20e603[_0xd2d518(0x4e6)][_0x54961e][_0xd2d518(0x24f)][_0xd2d518(0x3c6)]=_0x3a3158;}let _0x449e8e=_0x20e603[_0xd2d518(0x4e6)][_0x54961e][_0xd2d518(0x31d)];_0x145665!==_0x449e8e?(this[_0xd2d518(0x349)](_0x20e603['blocks'],_0x145665),this[_0xd2d518(0x349)](_0x20e603['blocks'],_0x449e8e)):this['reorderBlocks'](_0x20e603[_0xd2d518(0x4e6)],_0x145665);}[a0_0x3e22c7(0x642)](_0x435ce4,_0xae5f82){const _0xb51e0b=a0_0x3e22c7;if(_0xae5f82['block']['type']===_0xb51e0b(0x319)){this[_0xb51e0b(0x558)](_0xb51e0b(0x208));return;}if(_0xae5f82[_0xb51e0b(0x600)]['apirequest']&&'header'in _0xae5f82['block']['apirequest']){this[_0xb51e0b(0x187)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0xb51e0b(0x2e6)]+'):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString');let _0x15c5f4=JSON[_0xb51e0b(0x5af)](_0xae5f82[_0xb51e0b(0x600)][_0xb51e0b(0x24f)][_0xb51e0b(0x25a)],null,0x1);_0x15c5f4[_0xb51e0b(0x2d6)]>0x2&&(_0x15c5f4=_0x15c5f4[_0xb51e0b(0x340)](0x1,_0x15c5f4[_0xb51e0b(0x2d6)]-0x1)['trim']()),_0xae5f82['block']['apirequest']['headerString']=_0x15c5f4;}_0xae5f82[_0xb51e0b(0x600)][_0xb51e0b(0x24f)]&&_0xb51e0b(0x31f)in _0xae5f82[_0xb51e0b(0x600)][_0xb51e0b(0x24f)]&&(this[_0xb51e0b(0x187)][_0xb51e0b(0x461)](this[_0xb51e0b(0x202)]+'\x20('+this[_0xb51e0b(0x51f)][_0xb51e0b(0x2e6)]+_0xb51e0b(0x399)),_0xae5f82[_0xb51e0b(0x600)]['apirequest'][_0xb51e0b(0x3c6)]=JSON['stringify'](_0xae5f82['block'][_0xb51e0b(0x24f)][_0xb51e0b(0x31f)],null,0x1)[_0xb51e0b(0x4aa)]()),_0x435ce4[_0xb51e0b(0x4e6)][_0xb51e0b(0x6a8)](_0xae5f82[_0xb51e0b(0x600)]),this[_0xb51e0b(0x349)](_0x435ce4[_0xb51e0b(0x4e6)],_0xae5f82[_0xb51e0b(0x600)]['groupId']);}[a0_0x3e22c7(0x349)](_0x1d42cb,_0x33b603){const _0x4f1d70=a0_0x3e22c7;let _0x1ce146=_0x1d42cb[_0x4f1d70(0x2a7)](_0x89fa7a=>_0x89fa7a[_0x4f1d70(0x31d)]===_0x33b603);_0x1ce146[_0x4f1d70(0x24a)]((_0x3628e0,_0x522773)=>_0x3628e0[_0x4f1d70(0x1bc)]-_0x522773[_0x4f1d70(0x1bc)]),_0x1ce146[_0x4f1d70(0x4e9)]((_0x564a18,_0x11a431)=>_0x564a18[_0x4f1d70(0x1bc)]=_0x11a431+0x1);}async[a0_0x3e22c7(0x6e0)](_0x28daa0){const _0xf6a7f1=a0_0x3e22c7;try{if(this[_0xf6a7f1(0x187)]['verbose'](this[_0xf6a7f1(0x202)]+'\x20('+this[_0xf6a7f1(0x51f)][_0xf6a7f1(0x2e6)]+_0xf6a7f1(0x636)),!_0x28daa0||!_0x28daa0[_0xf6a7f1(0x4fa)]){this[_0xf6a7f1(0x558)](_0xf6a7f1(0x47e));return;}let _0x3b882e={'owner':this[_0xf6a7f1(0x51f)][_0xf6a7f1(0x2e6)],'name':_0x28daa0[_0xf6a7f1(0x3dc)]},_0x1135a8=await I['findOne'](_0x3b882e);_0x1135a8||this[_0xf6a7f1(0x558)]('Flow\x20não\x20encontrado');let {replyOption:_0x17f437}=_0x28daa0;return _0x17f437?.[_0xf6a7f1(0x45d)]?this[_0xf6a7f1(0x6ca)](_0x1135a8,_0x28daa0):_0x17f437[_0xf6a7f1(0x1fb)]?await this['updateReplyOption'](_0x1135a8,_0x28daa0):this[_0xf6a7f1(0x18f)](_0x1135a8,_0x28daa0),await _0x1135a8['save'](),_0x1135a8;}catch(_0x40f0b4){this[_0xf6a7f1(0x558)]('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0x40f0b4);}}[a0_0x3e22c7(0x6ca)](_0x4aa054,_0xd6bba5){const _0x5c5ad6=a0_0x3e22c7;let {replyOption:_0x4f26c8}=_0xd6bba5;if(!_0x4f26c8[_0x5c5ad6(0x1fb)]){this[_0x5c5ad6(0x558)](_0x5c5ad6(0x50f));return;}if(!_0x4aa054[_0x5c5ad6(0x419)][_0x5c5ad6(0x445)](_0x411ae2=>_0x411ae2[_0x5c5ad6(0x1fb)][_0x5c5ad6(0x63b)]()===_0xd6bba5[_0x5c5ad6(0x4fa)][_0x5c5ad6(0x1fb)][_0x5c5ad6(0x63b)]())){this[_0x5c5ad6(0x558)](_0x5c5ad6(0x4e8)+_0x4f26c8['_id']+_0x5c5ad6(0x2f6));return;}_0x4aa054[_0x5c5ad6(0x419)]=_0x4aa054['replyOptions'][_0x5c5ad6(0x2a7)](_0x2cb605=>_0x2cb605[_0x5c5ad6(0x1fb)][_0x5c5ad6(0x63b)]()!==_0xd6bba5['replyOption'][_0x5c5ad6(0x1fb)][_0x5c5ad6(0x63b)]());}async['updateReplyOption'](_0x40bb31,_0x3584b1){const _0x149f37=a0_0x3e22c7;let _0x4b44af=_0x40bb31[_0x149f37(0x419)][_0x149f37(0x335)](_0x14cae1=>_0x14cae1[_0x149f37(0x1fb)][_0x149f37(0x63b)]()===_0x3584b1[_0x149f37(0x4fa)][_0x149f37(0x1fb)][_0x149f37(0x63b)]());if(_0x4b44af===-0x1){this[_0x149f37(0x558)]('ReplyOption\x20com\x20ID\x20'+_0x3584b1[_0x149f37(0x4fa)][_0x149f37(0x1fb)]+_0x149f37(0x58d));return;}for(let _0x281bdb in _0x3584b1['replyOption'])_0x3584b1[_0x149f37(0x4fa)]['hasOwnProperty'](_0x281bdb)&&(_0x40bb31[_0x149f37(0x419)][_0x4b44af][_0x281bdb]=_0x3584b1[_0x149f37(0x4fa)][_0x281bdb]);}[a0_0x3e22c7(0x18f)](_0x28a49d,_0x4d965c){const _0x396023=a0_0x3e22c7;_0x28a49d[_0x396023(0x419)][_0x396023(0x6a8)](_0x4d965c['replyOption']);}async[a0_0x3e22c7(0x411)](_0x483a46){const _0x150bce=a0_0x3e22c7;this[_0x150bce(0x187)]['verbose'](this['instanceName']+'\x20('+this[_0x150bce(0x51f)][_0x150bce(0x2e6)]+_0x150bce(0x4a7)+_0x483a46);try{this['logger']['verbose'](this[_0x150bce(0x202)]+'\x20('+this['instance']['wuid']+_0x150bce(0x634));let _0x2bbd8d={'owner':this[_0x150bce(0x51f)][_0x150bce(0x2e6)],'name':_0x483a46[_0x150bce(0x3dc)]},_0x237503=await I[_0x150bce(0x635)](_0x2bbd8d);if(!_0x237503)throw new Error(_0x150bce(0x2c4));if(_0x483a46['group']&&_0x483a46[_0x150bce(0x332)]?.[_0x150bce(0x45d)]===!0x0){if(this[_0x150bce(0x187)][_0x150bce(0x461)](this[_0x150bce(0x202)]+'\x20('+this[_0x150bce(0x51f)][_0x150bce(0x2e6)]+_0x150bce(0x630)),_0x483a46['group'][_0x150bce(0x30c)]===!0x0)return{'message':_0x150bce(0x5b8)};if(_0x237503[_0x150bce(0x4e6)][_0x150bce(0x60f)](_0x139227=>_0x139227['groupId'][_0x150bce(0x63b)]()===_0x483a46[_0x150bce(0x332)][_0x150bce(0x1fb)]))return this['logger'][_0x150bce(0x461)](this[_0x150bce(0x202)]+'\x20('+this['instance'][_0x150bce(0x2e6)]+_0x150bce(0x25e)),{'message':_0x150bce(0x190)};_0x237503[_0x150bce(0x3c5)]=_0x237503[_0x150bce(0x3c5)][_0x150bce(0x2a7)](_0x9d1667=>_0x9d1667['_id'][_0x150bce(0x63b)]()!==_0x483a46[_0x150bce(0x332)][_0x150bce(0x1fb)]);}else{if(_0x483a46[_0x150bce(0x332)]){if(_0x483a46['group'][_0x150bce(0x30c)]===!0x0)return{'message':_0x150bce(0x62e)};if(_0x483a46['group'][_0x150bce(0x1fb)]){let _0x157ad1=_0x237503[_0x150bce(0x3c5)][_0x150bce(0x445)](_0xb44369=>_0xb44369[_0x150bce(0x1fb)]['toString']()===_0x483a46[_0x150bce(0x332)][_0x150bce(0x1fb)]);_0x157ad1&&(_0x483a46[_0x150bce(0x332)]['x']<0x0&&(_0x483a46[_0x150bce(0x332)]['x']=0x0),_0x483a46[_0x150bce(0x332)]['y']<0x0&&(_0x483a46[_0x150bce(0x332)]['y']=0x0),Object[_0x150bce(0x472)](_0x157ad1,_0x483a46[_0x150bce(0x332)]));}else _0x237503[_0x150bce(0x3c5)]['push'](_0x483a46[_0x150bce(0x332)]);}}return await _0x237503[_0x150bce(0x2bb)](),_0x237503;}catch(_0x10b8d6){throw this[_0x150bce(0x187)][_0x150bce(0x41f)](this['instanceName']+'\x20('+this['instance'][_0x150bce(0x2e6)]+_0x150bce(0x3bf)+_0x10b8d6),new g(_0x150bce(0x1c4)+_0x10b8d6);}}async['editFlowCondition'](_0x483fab){const _0x42f828=a0_0x3e22c7;try{this[_0x42f828(0x187)][_0x42f828(0x461)](this[_0x42f828(0x202)]+'\x20('+this['instance']['wuid']+'):\x20Editando\x20condição\x20do\x20fluxo...');let _0x1ff877={'owner':this[_0x42f828(0x51f)]['wuid'],'name':_0x483fab[_0x42f828(0x3dc)]},_0x334494=await I[_0x42f828(0x635)](_0x1ff877);if(!_0x334494)throw new Error(_0x42f828(0x2c4));let _0x2a4398=!0x1;if(_0x483fab[_0x42f828(0x700)]?.[_0x42f828(0x45d)]===!0x0)_0x334494['conditions']=_0x334494['conditions'][_0x42f828(0x2a7)](_0x4c9aff=>_0x4c9aff&&_0x483fab[_0x42f828(0x700)]&&_0x4c9aff[_0x42f828(0x1fb)]&&_0x483fab[_0x42f828(0x700)][_0x42f828(0x1fb)]&&_0x4c9aff[_0x42f828(0x1fb)][_0x42f828(0x63b)]()!==_0x483fab[_0x42f828(0x700)][_0x42f828(0x1fb)][_0x42f828(0x63b)]()),_0x2a4398=!0x0;else{let _0x465e6a=_0x334494[_0x42f828(0x6a7)]['find'](_0x394420=>_0x394420&&_0x483fab[_0x42f828(0x700)]&&_0x394420[_0x42f828(0x1fb)]&&_0x483fab[_0x42f828(0x700)][_0x42f828(0x1fb)]&&_0x394420['_id'][_0x42f828(0x63b)]()===_0x483fab['condition'][_0x42f828(0x1fb)][_0x42f828(0x63b)]());_0x465e6a?(_0x2a4398=_0x465e6a[_0x42f828(0x1bc)]!==_0x483fab[_0x42f828(0x700)][_0x42f828(0x1bc)],Object[_0x42f828(0x472)](_0x465e6a,_0x483fab[_0x42f828(0x700)])):(_0x334494[_0x42f828(0x6a7)][_0x42f828(0x6a8)](_0x483fab[_0x42f828(0x700)]),_0x2a4398=!0x0);}if(_0x2a4398){_0x334494[_0x42f828(0x6a7)][_0x42f828(0x24a)]((_0x5105d6,_0x533154)=>_0x5105d6[_0x42f828(0x1bc)]>_0x533154[_0x42f828(0x1bc)]?0x1:_0x533154[_0x42f828(0x1bc)]>_0x5105d6[_0x42f828(0x1bc)]?-0x1:0x0);for(let _0x3b13c3=0x0;_0x3b13c3<_0x334494[_0x42f828(0x6a7)][_0x42f828(0x2d6)];_0x3b13c3++)_0x334494['conditions'][_0x3b13c3][_0x42f828(0x1bc)]=_0x3b13c3+0x1;_0x334494[_0x42f828(0x6a7)][_0x42f828(0x2d6)]>0x0&&(_0x334494[_0x42f828(0x6a7)][0x0][_0x42f828(0x510)]=_0x42f828(0x3d6));}return await _0x334494[_0x42f828(0x2bb)](),_0x334494;}catch(_0x5590fc){throw this['logger'][_0x42f828(0x41f)](this[_0x42f828(0x202)]+'\x20('+this[_0x42f828(0x51f)][_0x42f828(0x2e6)]+'):\x20Erro\x20ao\x20editar\x20condição\x20do\x20fluxo:\x20'+_0x5590fc),new Error(_0x42f828(0x177)+_0x5590fc);}}async['editFlowVaredit'](_0x63baab){const _0x4a54e9=a0_0x3e22c7;try{this['logger'][_0x4a54e9(0x461)](this[_0x4a54e9(0x202)]+'\x20('+this[_0x4a54e9(0x51f)][_0x4a54e9(0x2e6)]+'):\x20Editando\x20edição\x20do\x20fluxo...');let _0x423f78={'owner':this[_0x4a54e9(0x51f)][_0x4a54e9(0x2e6)],'name':_0x63baab[_0x4a54e9(0x3dc)]},_0x3f3bae=await I[_0x4a54e9(0x635)](_0x423f78);if(!_0x3f3bae)throw new Error(_0x4a54e9(0x2c4));let _0x11c9c=!0x1;if(_0x63baab['varedit']?.['delete']===!0x0)_0x3f3bae[_0x4a54e9(0x20e)]=_0x3f3bae[_0x4a54e9(0x20e)][_0x4a54e9(0x2a7)](_0x5609c2=>_0x5609c2&&_0x63baab[_0x4a54e9(0x6db)]&&_0x5609c2[_0x4a54e9(0x1fb)]&&_0x63baab['varedit'][_0x4a54e9(0x1fb)]&&_0x5609c2['_id'][_0x4a54e9(0x63b)]()!==_0x63baab['varedit'][_0x4a54e9(0x1fb)][_0x4a54e9(0x63b)]()),_0x11c9c=!0x0;else{let _0xba507b=_0x3f3bae[_0x4a54e9(0x20e)]['find'](_0xaf9bda=>_0xaf9bda&&_0x63baab[_0x4a54e9(0x6db)]&&_0xaf9bda[_0x4a54e9(0x1fb)]&&_0x63baab[_0x4a54e9(0x6db)]['_id']&&_0xaf9bda['_id'][_0x4a54e9(0x63b)]()===_0x63baab[_0x4a54e9(0x6db)][_0x4a54e9(0x1fb)][_0x4a54e9(0x63b)]());_0xba507b?(_0x11c9c=_0xba507b['order']!==_0x63baab['varedit'][_0x4a54e9(0x1bc)],Object[_0x4a54e9(0x472)](_0xba507b,_0x63baab[_0x4a54e9(0x6db)])):(_0x3f3bae[_0x4a54e9(0x20e)][_0x4a54e9(0x6a8)](_0x63baab[_0x4a54e9(0x6db)]),_0x11c9c=!0x0);}if(_0x11c9c){_0x3f3bae[_0x4a54e9(0x20e)][_0x4a54e9(0x24a)]((_0x12dd41,_0x1e0cad)=>_0x12dd41[_0x4a54e9(0x1bc)]>_0x1e0cad['order']?0x1:_0x1e0cad[_0x4a54e9(0x1bc)]>_0x12dd41[_0x4a54e9(0x1bc)]?-0x1:0x0);for(let _0x2868e8=0x0;_0x2868e8<_0x3f3bae[_0x4a54e9(0x20e)]['length'];_0x2868e8++)_0x3f3bae[_0x4a54e9(0x20e)][_0x2868e8][_0x4a54e9(0x1bc)]=_0x2868e8+0x1;}return await _0x3f3bae[_0x4a54e9(0x2bb)](),_0x3f3bae;}catch(_0x5b0d0c){throw this['logger']['error'](this[_0x4a54e9(0x202)]+'\x20('+this['instance'][_0x4a54e9(0x2e6)]+_0x4a54e9(0x296)+_0x5b0d0c),new g(_0x4a54e9(0x177)+_0x5b0d0c);}}async['editFlowVariable'](_0x50007d){const _0x178752=a0_0x3e22c7;try{this[_0x178752(0x187)][_0x178752(0x461)](this[_0x178752(0x202)]+'\x20('+this[_0x178752(0x51f)]['wuid']+_0x178752(0x694));let _0x378ad3={'owner':this[_0x178752(0x51f)][_0x178752(0x2e6)],'name':_0x50007d['name']},_0x1ccd0b=await I['findOne'](_0x378ad3);if(!_0x1ccd0b)throw new Error(_0x178752(0x2c4));_0x50007d['variable']['name']=_0x50007d[_0x178752(0x291)][_0x178752(0x3dc)][_0x178752(0x4aa)](),_0x50007d[_0x178752(0x291)][_0x178752(0x3dc)]['startsWith']('_')&&(_0x50007d[_0x178752(0x291)]['name']=_0x50007d[_0x178752(0x291)][_0x178752(0x3dc)][_0x178752(0x340)](0x1)),_0x50007d[_0x178752(0x291)]['name']=_0x50007d[_0x178752(0x291)][_0x178752(0x3dc)][_0x178752(0x4aa)]();let _0x4cc527=_0x1ccd0b['variables']['find'](_0x3ba543=>_0x3ba543[_0x178752(0x3dc)]===_0x50007d[_0x178752(0x291)][_0x178752(0x3dc)]);if(_0x4cc527?.[_0x178752(0x184)]===!0x0)throw new Error(_0x178752(0x189));if(_0x50007d[_0x178752(0x291)]?.[_0x178752(0x45d)]===!0x0){if(!_0x4cc527)return{'message':'Variável\x20não\x20encontrada!'};_0x1ccd0b[_0x178752(0x324)]=_0x1ccd0b[_0x178752(0x324)][_0x178752(0x2a7)](_0x191d1c=>_0x191d1c[_0x178752(0x3dc)]!==_0x50007d['variable'][_0x178752(0x3dc)]);}else _0x4cc527?Object[_0x178752(0x472)](_0x4cc527,_0x50007d['variable']):_0x1ccd0b[_0x178752(0x324)][_0x178752(0x6a8)](_0x50007d[_0x178752(0x291)]);return await _0x1ccd0b[_0x178752(0x2bb)](),_0x1ccd0b;}catch(_0x13e054){throw this[_0x178752(0x187)][_0x178752(0x41f)](this[_0x178752(0x202)]+'\x20('+this['instance'][_0x178752(0x2e6)]+_0x178752(0x4d9)+_0x13e054),new g(_0x178752(0x376)+_0x13e054);}}async['startFlow'](_0x270bdd){const _0x53dab8=a0_0x3e22c7;try{if(!this[_0x53dab8(0x394)]?.[_0x53dab8(0x609)][_0x53dab8(0x688)])throw new g(_0x53dab8(0x347));this['logger']['verbose'](this[_0x53dab8(0x202)]+'\x20('+this['instance'][_0x53dab8(0x2e6)]+_0x53dab8(0x541));let _0x5c6189=(await this[_0x53dab8(0x248)]({'numbers':[_0x270bdd[_0x53dab8(0x2c2)]]}))[0x0];if(!_0x5c6189[_0x53dab8(0x613)]&&!(0x0,w[_0x53dab8(0x28e)])(_0x5c6189[_0x53dab8(0x4d4)])&&!_0x5c6189['jid'][_0x53dab8(0x457)](_0x53dab8(0x61a)))throw new g(_0x5c6189);let _0x305b1d=await I[_0x53dab8(0x635)]({'owner':this['instance'][_0x53dab8(0x2e6)],'name':_0x270bdd[_0x53dab8(0x3dc)]});if(!_0x305b1d)return this[_0x53dab8(0x187)][_0x53dab8(0x41f)](this[_0x53dab8(0x202)]+'\x20('+this['instance']['wuid']+_0x53dab8(0x54e)),{'message':_0x53dab8(0x2c4)};let _0x2cb1f4=await this[_0x53dab8(0x3ab)](_0x305b1d,_0x5c6189['jid'],_0x270bdd[_0x53dab8(0x4a4)]);if(_0x2cb1f4){this['logger'][_0x53dab8(0x461)](this[_0x53dab8(0x202)]+'\x20('+this[_0x53dab8(0x51f)][_0x53dab8(0x2e6)]+_0x53dab8(0x476));let _0x2af8fe=await this[_0x53dab8(0x405)](_0x2cb1f4);return _0x2af8fe&&await this[_0x53dab8(0x241)](_0x2cb1f4,_0x2af8fe,_0x2cb1f4[_0x53dab8(0x2c2)]),{'message':_0x53dab8(0x4e0)+_0x270bdd[_0x53dab8(0x2c2)]};}}catch(_0x5f5be3){if(this[_0x53dab8(0x187)][_0x53dab8(0x41f)](this[_0x53dab8(0x202)]+'\x20('+this[_0x53dab8(0x51f)][_0x53dab8(0x2e6)]+_0x53dab8(0x300)+_0x5f5be3),_0x5f5be3&&_0x5f5be3[_0x53dab8(0x1f0)]&&Array[_0x53dab8(0x242)](_0x5f5be3['message'])&&_0x5f5be3[_0x53dab8(0x1f0)][0x0]){let {jid:_0x318057,exists:_0x54b206}=_0x5f5be3[_0x53dab8(0x1f0)][0x0];}throw new g(_0x53dab8(0x477)+_0x5f5be3[_0x53dab8(0x1f0)]);}}async['createConversationforStartFlow'](_0x574ff6,_0x16ca85,_0x133ff2){const _0x2f7597=a0_0x3e22c7;this[_0x2f7597(0x187)][_0x2f7597(0x461)](this[_0x2f7597(0x202)]+'\x20('+this[_0x2f7597(0x51f)][_0x2f7597(0x2e6)]+_0x2f7597(0x725));try{let _0x12f0a9=require(_0x2f7597(0x717))['ObjectId'],_0x3fcac8=Date[_0x2f7597(0x43b)](),_0x255b39=_0x2f7597(0x319),_0x550f8a={},_0x277def={},_0x4461d5={..._0x574ff6['_doc'],'chatLog':null},_0x149e00=await this[_0x2f7597(0x601)](_0x4461d5['variables']),_0x2f11de=await this[_0x2f7597(0x577)](_0x16ca85),_0x5c4fa9={..._0x149e00,..._0x2f11de},_0x3d82e1={'lastReceivedMessage':_0x550f8a,'lastSendMessage':_0x277def,'lastBlockId':_0x255b39,'lastCondition':!0x0,'realVariables':_0x5c4fa9};_0x4461d5[_0x2f7597(0x710)]=_0x3d82e1,_0x4461d5[_0x2f7597(0x710)][_0x2f7597(0x408)]={..._0x5c4fa9,..._0x133ff2},delete _0x4461d5[_0x2f7597(0x1fb)],_0x4461d5[_0x2f7597(0x1fb)]=new _0x12f0a9(),_0x4461d5[_0x2f7597(0x247)]=_0x3fcac8,_0x4461d5[_0x2f7597(0x654)]='open',_0x4461d5['remoteJid']=_0x16ca85;let _0x40e151=await G[_0x2f7597(0x516)](_0x4461d5);return this[_0x2f7597(0x187)][_0x2f7597(0x461)](this[_0x2f7597(0x202)]+'\x20('+this[_0x2f7597(0x51f)][_0x2f7597(0x2e6)]+_0x2f7597(0x6a9)),_0x40e151?_0x4461d5:null;}catch(_0x4a29b8){throw this['logger'][_0x2f7597(0x41f)](this[_0x2f7597(0x202)]+'\x20('+this[_0x2f7597(0x51f)]['wuid']+'):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20'+_0x4a29b8),new g(_0x4a29b8[_0x2f7597(0x1f0)]);}}async['getConversation'](_0x441aef){const _0x4e8717=a0_0x3e22c7;try{return this[_0x4e8717(0x187)][_0x4e8717(0x461)](this[_0x4e8717(0x202)]+'\x20('+this[_0x4e8717(0x51f)][_0x4e8717(0x2e6)]+'):\x20Buscando\x20conversa...'),this['logger'][_0x4e8717(0x461)](this[_0x4e8717(0x202)]+'\x20('+this[_0x4e8717(0x51f)]['wuid']+_0x4e8717(0x2e0)+{'owner':this[_0x4e8717(0x51f)][_0x4e8717(0x2e6)],'_id':_0x441aef}),await G[_0x4e8717(0x635)]({'owner':this[_0x4e8717(0x51f)][_0x4e8717(0x2e6)],'_id':_0x441aef});}catch(_0x5d0913){throw this[_0x4e8717(0x187)][_0x4e8717(0x41f)](this['instanceName']+'\x20('+this[_0x4e8717(0x51f)][_0x4e8717(0x2e6)]+'):\x20Erro\x20ao\x20buscar\x20a\x20conversa\x20'+_0x5d0913),new g('Erro\x20ao\x20buscar\x20conversa:\x20'+_0x5d0913[_0x4e8717(0x1f0)]);}}async[a0_0x3e22c7(0x2b8)](_0x2a72c7,_0x46e2b9=0x64){const _0x4b9715=a0_0x3e22c7;try{this[_0x4b9715(0x187)][_0x4b9715(0x461)](this[_0x4b9715(0x202)]+'\x20('+this['instance'][_0x4b9715(0x2e6)]+_0x4b9715(0x52f));let _0xc2692={..._0x2a72c7,'owner':this[_0x4b9715(0x51f)][_0x4b9715(0x2e6)]};return this[_0x4b9715(0x187)][_0x4b9715(0x461)](this[_0x4b9715(0x202)]+'\x20('+this['instance'][_0x4b9715(0x2e6)]+_0x4b9715(0x42d)+_0xc2692),await G[_0x4b9715(0x445)](_0xc2692)[_0x4b9715(0x3f6)](_0x46e2b9)['sort']({'lastInteraction':-0x1});}catch(_0x194616){throw this[_0x4b9715(0x187)][_0x4b9715(0x41f)](this[_0x4b9715(0x202)]+'\x20('+this[_0x4b9715(0x51f)]['wuid']+_0x4b9715(0x2e1)+_0x194616),new g(_0x4b9715(0x6e8)+_0x194616[_0x4b9715(0x1f0)]);}}async[a0_0x3e22c7(0x550)](_0x44d7e5){const _0xe71daa=a0_0x3e22c7;try{return this[_0xe71daa(0x187)]['verbose'](this[_0xe71daa(0x202)]+'\x20('+this[_0xe71daa(0x51f)][_0xe71daa(0x2e6)]+'):\x20Deletando\x20conversa...'),this[_0xe71daa(0x187)]['verbose'](this[_0xe71daa(0x202)]+'\x20('+this[_0xe71daa(0x51f)][_0xe71daa(0x2e6)]+_0xe71daa(0x2e0)+{'owner':this['instance'][_0xe71daa(0x2e6)],'_id':_0x44d7e5}),(await G[_0xe71daa(0x35d)]({'owner':this[_0xe71daa(0x51f)][_0xe71daa(0x2e6)],'_id':_0x44d7e5}))['deletedCount']===0x0?{'message':_0xe71daa(0x1c0)}:{'message':_0xe71daa(0x580)};}catch(_0x17efd6){throw this[_0xe71daa(0x187)][_0xe71daa(0x41f)](this[_0xe71daa(0x202)]+'\x20('+this[_0xe71daa(0x51f)]['wuid']+_0xe71daa(0x6b6)+_0x17efd6),new g(_0xe71daa(0x2d5)+_0x17efd6['message']);}}async[a0_0x3e22c7(0x169)](_0x1010f7){const _0xb79982=a0_0x3e22c7;try{let {_id:_0x100957,chatLog:_0x1eeec4,status:_0xcbe617}=_0x1010f7;if(!_0x100957)return{'message':_0xb79982(0x4ca)};let _0x566ebd={};if(_0xcbe617!==void 0x0&&(_0x566ebd[_0xb79982(0x654)]=_0xcbe617),Object['keys'](_0x566ebd)['length']===0x0)return{'message':'Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.'};let _0x405f3c=this[_0xb79982(0x51f)][_0xb79982(0x2e6)],_0x783f94=await G[_0xb79982(0x2e8)]({'_id':_0x100957,'owner':_0x405f3c},{'$set':_0x566ebd},{'new':!0x0});return _0x783f94||{'message':'Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.'};}catch(_0x262ff4){throw this['logger'][_0xb79982(0x41f)](this[_0xb79982(0x202)]+'\x20('+this[_0xb79982(0x51f)]['wuid']+_0xb79982(0x16a)+_0x262ff4),new g(_0xb79982(0x5f9)+_0x262ff4[_0xb79982(0x1f0)]);}}async[a0_0x3e22c7(0x171)](_0x1da3e6){const _0x561e83=a0_0x3e22c7;try{_0x1da3e6['id']=this[_0x561e83(0x687)](_0x1da3e6['id']);let {id:_0x58b8cb,leadInfo:_0x29d17a}=_0x1da3e6;if(!_0x58b8cb)throw new Error(_0x561e83(0x277));let _0x4cbeb8=(_0x228cc7,_0x507b5e,_0x1e175d)=>{const _0x3a338d=_0x561e83;_0x1e175d[_0x3a338d(0x4e9)](_0x3566ab=>{const _0x1de82a=_0x3a338d;_0x228cc7[_0x3566ab]!==void 0x0&&(_0x507b5e[_0x1de82a(0x48f)+_0x3566ab]=_0x228cc7[_0x3566ab]);});},_0x30112f={};if(_0x4cbeb8(_0x29d17a,_0x30112f,[_0x561e83(0x3ea),_0x561e83(0x63c),_0x561e83(0x2cf),'cpf',_0x561e83(0x654),_0x561e83(0x23c),_0x561e83(0x562),_0x561e83(0x29f),_0x561e83(0x36d)]),Array[_0x561e83(0x242)](_0x29d17a[_0x561e83(0x4eb)])&&(_0x30112f[_0x561e83(0x5bd)]=_0x29d17a[_0x561e83(0x4eb)][_0x561e83(0x5a9)](_0x5db499=>({'_id':_0x5db499[_0x561e83(0x1fb)],'value':_0x5db499[_0x561e83(0x526)]}))),_0x1da3e6[_0x561e83(0x184)][_0x561e83(0x2cb)]!==void 0x0&&(_0x30112f[_0x561e83(0x3d3)]=Number(_0x1da3e6[_0x561e83(0x184)][_0x561e83(0x2cb)])),_0x1da3e6[_0x561e83(0x3fc)]!==void 0x0&&(_0x30112f[_0x561e83(0x3fc)]=Number(_0x1da3e6['unreadcount'])),Object[_0x561e83(0x5d2)](_0x30112f)[_0x561e83(0x2d6)]===0x0)throw new Error(_0x561e83(0x63e));let _0x49fe21=this['instance']['wuid'];if(!_0x49fe21)throw new Error(_0x561e83(0x55e));if(!await D['findOne']({'id':_0x1da3e6['id'],'owner':_0x49fe21})){let _0x7fdde3=(await this['whatsappNumber']({'numbers':[_0x1da3e6['id']]}))[0x0];if(!_0x7fdde3[_0x561e83(0x613)]&&!(0x0,w[_0x561e83(0x28e)])(_0x7fdde3[_0x561e83(0x4d4)])&&!_0x7fdde3['jid'][_0x561e83(0x457)](_0x561e83(0x61a)))throw new g(_0x7fdde3);_0x1da3e6['id']=_0x7fdde3[_0x561e83(0x4d4)];}let _0x385ec2=await D['findOneAndUpdate']({'id':_0x1da3e6['id'],'owner':_0x49fe21},{'$set':_0x30112f},{'new':!0x0,'upsert':!0x0});return _0x385ec2&&q(this['instanceName'],'chats',{'chat':_0x385ec2}),_0x385ec2?(this[_0x561e83(0x187)]['verbose'](this[_0x561e83(0x202)]+'\x20('+this[_0x561e83(0x51f)][_0x561e83(0x2e6)]+'):\x20'+_0x385ec2),_0x385ec2):{'message':_0x561e83(0x52b)};}catch(_0x4237f3){throw this[_0x561e83(0x187)][_0x561e83(0x41f)](this[_0x561e83(0x202)]+'\x20('+this[_0x561e83(0x51f)][_0x561e83(0x2e6)]+_0x561e83(0x260)+_0x4237f3),new g('Erro\x20ao\x20editar\x20o\x20chat:\x20'+_0x4237f3[_0x561e83(0x1f0)]);}}async[a0_0x3e22c7(0x37b)](_0x163997){const _0x2eb8ad=a0_0x3e22c7;let _0x28164d=this['instance'][_0x2eb8ad(0x2e6)];try{let _0x4c2a13=await ie[_0x2eb8ad(0x1e2)](_0x28164d);_0x4c2a13||(_0x4c2a13=new ie({'_id':_0x28164d}),await _0x4c2a13[_0x2eb8ad(0x2bb)]());let _0x4a7fad=_0x163997[_0x2eb8ad(0x1fb)]?_0x4c2a13[_0x2eb8ad(0x443)]['findIndex'](_0x30d508=>_0x30d508[_0x2eb8ad(0x1fb)]===_0x163997['_id']):-0x1;if(_0x163997[_0x2eb8ad(0x45d)]&&_0x4a7fad>-0x1)_0x4c2a13[_0x2eb8ad(0x443)][_0x2eb8ad(0x5b7)](_0x4a7fad,0x1);else{if(_0x4a7fad>-0x1){let _0x52e0a6=_0x4c2a13[_0x2eb8ad(0x443)][_0x4a7fad];_0x163997[_0x2eb8ad(0x2f1)]&&(_0x52e0a6[_0x2eb8ad(0x2f1)]=_0x163997[_0x2eb8ad(0x2f1)]),_0x163997[_0x2eb8ad(0x3dc)]&&(_0x52e0a6[_0x2eb8ad(0x3dc)]=_0x163997[_0x2eb8ad(0x3dc)]),_0x163997[_0x2eb8ad(0x2cf)]&&(_0x52e0a6['email']=_0x163997['email']),_0x163997[_0x2eb8ad(0x1b9)]&&(_0x52e0a6[_0x2eb8ad(0x1b9)]=_0x163997[_0x2eb8ad(0x1b9)]);}else _0x4c2a13[_0x2eb8ad(0x443)][_0x2eb8ad(0x6a8)]({'_id':_0x163997[_0x2eb8ad(0x1fb)]||new be[(_0x2eb8ad(0x30c))]['Types'][(_0x2eb8ad(0x506))]()[_0x2eb8ad(0x63b)](),'fone':_0x163997[_0x2eb8ad(0x2f1)],'name':_0x163997['name'],'email':_0x163997[_0x2eb8ad(0x2cf)],'role':_0x163997[_0x2eb8ad(0x1b9)]});}let _0x13b4dc=await _0x4c2a13[_0x2eb8ad(0x2bb)]();return this[_0x2eb8ad(0x394)]=_0x13b4dc,this[_0x2eb8ad(0x187)][_0x2eb8ad(0x461)](this['instanceName']+'\x20('+this['instance'][_0x2eb8ad(0x2e6)]+_0x2eb8ad(0x56e)),this[_0x2eb8ad(0x187)][_0x2eb8ad(0x461)](this[_0x2eb8ad(0x202)]+'\x20('+this[_0x2eb8ad(0x51f)][_0x2eb8ad(0x2e6)]+_0x2eb8ad(0x515)+this['AutomateSystem']),_0x13b4dc;}catch(_0x360b7a){throw this[_0x2eb8ad(0x187)][_0x2eb8ad(0x41f)](this['instanceName']+'\x20('+this[_0x2eb8ad(0x51f)][_0x2eb8ad(0x2e6)]+_0x2eb8ad(0x16d)+_0x360b7a),new g('Erro\x20ao\x20editar\x20agentes:\x20'+_0x360b7a[_0x2eb8ad(0x1f0)]);}}async[a0_0x3e22c7(0x2ae)](_0x1cead2){const _0x29a642=a0_0x3e22c7;let _0x799bc4=this[_0x29a642(0x51f)][_0x29a642(0x2e6)];try{let _0x258d49=await ie['findById'](_0x799bc4);_0x258d49||(_0x258d49=new ie({'_id':_0x799bc4}),await _0x258d49['save']());let _0x2d3c5f=_0x1cead2[_0x29a642(0x1fb)]?_0x258d49[_0x29a642(0x4eb)][_0x29a642(0x335)](_0x35982a=>_0x35982a[_0x29a642(0x1fb)]===_0x1cead2[_0x29a642(0x1fb)]):-0x1,_0x52299f=!0x1,_0x23035b=_0x258d49[_0x29a642(0x4eb)]['some'](_0xf69bc6=>_0xf69bc6['order']===_0x1cead2[_0x29a642(0x1bc)]);if(_0x1cead2[_0x29a642(0x45d)]&&_0x2d3c5f>-0x1)_0x258d49['customFields'][_0x29a642(0x5b7)](_0x2d3c5f,0x1),_0x52299f=!0x0;else{if(_0x2d3c5f>-0x1){if(_0x258d49[_0x29a642(0x4eb)]['some'](_0xcfeaee=>_0xcfeaee[_0x29a642(0x3dc)]===_0x1cead2['name']&&_0xcfeaee[_0x29a642(0x1fb)]!==_0x1cead2['_id']))throw new Error(_0x29a642(0x40e));let _0x4486f8=_0x258d49[_0x29a642(0x4eb)][_0x2d3c5f];_0x1cead2[_0x29a642(0x1bc)]&&(_0x23035b||!Number['isInteger'](_0x1cead2[_0x29a642(0x1bc)]))&&(_0x4486f8['order']=_0x1cead2[_0x29a642(0x1bc)],_0x52299f=!0x0),_0x1cead2[_0x29a642(0x3dc)]&&(_0x4486f8[_0x29a642(0x3dc)]=_0x1cead2['name']);}else{if(_0x258d49[_0x29a642(0x4eb)]['some'](_0x1d9054=>_0x1d9054[_0x29a642(0x3dc)]===_0x1cead2[_0x29a642(0x3dc)]&&_0x1d9054[_0x29a642(0x1fb)]!==_0x1cead2[_0x29a642(0x1fb)]))throw new Error(_0x29a642(0x40e));_0x258d49[_0x29a642(0x4eb)][_0x29a642(0x6a8)]({'_id':_0x1cead2['_id']||new be[(_0x29a642(0x30c))][(_0x29a642(0x22f))][(_0x29a642(0x506))]()['toString'](),'order':_0x1cead2[_0x29a642(0x1bc)],'name':_0x1cead2['name']}),_0x52299f=!0x0;}}if(_0x52299f){_0x258d49[_0x29a642(0x4eb)][_0x29a642(0x24a)]((_0x8df269,_0x30cf55)=>_0x8df269[_0x29a642(0x1bc)]>_0x30cf55['order']?0x1:_0x30cf55[_0x29a642(0x1bc)]>_0x8df269['order']?-0x1:0x0);for(let _0x3d0942=0x0;_0x3d0942<_0x258d49['customFields'][_0x29a642(0x2d6)];_0x3d0942++)_0x258d49[_0x29a642(0x4eb)][_0x3d0942][_0x29a642(0x1bc)]=_0x3d0942+0x1;}let _0x17ecab=await _0x258d49[_0x29a642(0x2bb)]();return this['AutomateSystem']=_0x17ecab,this[_0x29a642(0x187)][_0x29a642(0x461)](this[_0x29a642(0x202)]+'\x20('+this['instance'][_0x29a642(0x2e6)]+'):\x20debug\x20alterando\x20this.AutomateSystem'),this['logger']['verbose'](this[_0x29a642(0x202)]+'\x20('+this['instance'][_0x29a642(0x2e6)]+'):\x20'+this[_0x29a642(0x394)]),_0x17ecab;}catch(_0x335a54){throw this[_0x29a642(0x187)][_0x29a642(0x41f)](this[_0x29a642(0x202)]+'\x20('+this['instance'][_0x29a642(0x2e6)]+_0x29a642(0x274)+_0x335a54),new g(_0x29a642(0x6b3)+_0x335a54[_0x29a642(0x1f0)]);}}async['updateFlowConfig'](_0x12f65b){const _0x22977d=a0_0x3e22c7;let _0x4794d2=this[_0x22977d(0x51f)][_0x22977d(0x2e6)];try{let _0xb643c8=await ie[_0x22977d(0x1e2)](_0x4794d2);_0xb643c8||(_0xb643c8=new ie({'_id':_0x4794d2}),await _0xb643c8[_0x22977d(0x2bb)]()),_0xb643c8['flowConfig'][_0x22977d(0x688)]=_0x12f65b?.[_0x22977d(0x688)]!==void 0x0?_0x12f65b?.[_0x22977d(0x688)]:_0xb643c8[_0x22977d(0x609)][_0x22977d(0x688)],_0xb643c8['flowConfig'][_0x22977d(0x6f2)]=_0x12f65b?.[_0x22977d(0x6f2)]!==void 0x0?_0x12f65b?.[_0x22977d(0x6f2)]:_0xb643c8[_0x22977d(0x609)]['ignoreGroups'],_0xb643c8[_0x22977d(0x609)][_0x22977d(0x5aa)]=_0x12f65b?.[_0x22977d(0x5aa)]??_0xb643c8[_0x22977d(0x609)][_0x22977d(0x5aa)],_0xb643c8[_0x22977d(0x609)][_0x22977d(0x3db)]=_0x12f65b?.[_0x22977d(0x3db)]??_0xb643c8[_0x22977d(0x609)][_0x22977d(0x3db)],_0xb643c8[_0x22977d(0x609)][_0x22977d(0x343)]=_0x12f65b?.['stopMinutes']??_0xb643c8['flowConfig'][_0x22977d(0x343)];let _0x2ed794=await _0xb643c8[_0x22977d(0x2bb)]();return this[_0x22977d(0x394)]=_0x2ed794,this['logger'][_0x22977d(0x461)](this[_0x22977d(0x202)]+'\x20('+this[_0x22977d(0x51f)][_0x22977d(0x2e6)]+_0x22977d(0x56e)),this[_0x22977d(0x187)][_0x22977d(0x461)](this[_0x22977d(0x202)]+'\x20('+this[_0x22977d(0x51f)][_0x22977d(0x2e6)]+'):\x20'+this['AutomateSystem']),_0x2ed794;}catch(_0x5d614f){throw this[_0x22977d(0x187)]['error'](this[_0x22977d(0x202)]+'\x20('+this[_0x22977d(0x51f)]['wuid']+_0x22977d(0x16d)+_0x5d614f),new g('Erro\x20ao\x20editar\x20agentes:\x20'+_0x5d614f['message']);}}async[a0_0x3e22c7(0x66b)](){const _0x414961=a0_0x3e22c7;let _0x22a431=this['instance'][_0x414961(0x2e6)];try{let _0x9569b8=await ie[_0x414961(0x1e2)](_0x22a431);return _0x9569b8||(_0x9569b8=new ie({'_id':_0x22a431})),_0x9569b8[_0x414961(0x609)]=_0x9569b8['flowConfig']||{},_0x9569b8[_0x414961(0x609)][_0x414961(0x688)]===void 0x0&&(_0x9569b8[_0x414961(0x609)]['enabled']=!0x1),_0x9569b8[_0x414961(0x609)][_0x414961(0x6f2)]===void 0x0&&(_0x9569b8['flowConfig'][_0x414961(0x6f2)]=!0x0),_0x9569b8[_0x414961(0x609)]['prefixCommand']===void 0x0&&(_0x9569b8[_0x414961(0x609)][_0x414961(0x5aa)]='!'),_0x9569b8[_0x414961(0x609)][_0x414961(0x3db)]===void 0x0&&(_0x9569b8[_0x414961(0x609)][_0x414961(0x3db)]='!stop'),_0x9569b8[_0x414961(0x609)][_0x414961(0x343)]===void 0x0&&(_0x9569b8[_0x414961(0x609)]['stopMinutes']=0x14),await _0x9569b8[_0x414961(0x2bb)](),this[_0x414961(0x394)]=_0x9569b8,this[_0x414961(0x187)]['verbose'](this[_0x414961(0x202)]+'\x20('+this['instance'][_0x414961(0x2e6)]+_0x414961(0x20f)),this[_0x414961(0x187)]['verbose'](this[_0x414961(0x394)]),_0x9569b8;}catch(_0xc5955a){throw this[_0x414961(0x187)]['error'](this['instanceName']+'\x20('+this[_0x414961(0x51f)][_0x414961(0x2e6)]+_0x414961(0x2cc)+_0xc5955a[_0x414961(0x1f0)]),new g(_0x414961(0x5a3)+_0xc5955a[_0x414961(0x1f0)]);}}async['scheduleNextCheck'](){const _0x14f1e4=a0_0x3e22c7;let _0x492cc5=()=>{const _0x546e59=a0_0x33a7;this[_0x546e59(0x187)]['verbose'](this[_0x546e59(0x202)]+'\x20('+this['instance'][_0x546e59(0x2e6)]+'):\x20this.processingScheduleMessageId:\x20'+this[_0x546e59(0x28b)]+_0x546e59(0x285));},_0x4aafc9=async()=>{const _0x11bb6d=a0_0x33a7;this[_0x11bb6d(0x187)][_0x11bb6d(0x461)](this[_0x11bb6d(0x202)]+'\x20('+this[_0x11bb6d(0x51f)][_0x11bb6d(0x2e6)]+_0x11bb6d(0x6c8));let _0x30291a=Date['now']()-0xc*0x3c*0x3c*0x3e8;return await U[_0x11bb6d(0x445)]({'owner':this['instance']['wuid'],'status':{'$in':[_0x11bb6d(0x1af),'sending']},'$or':[{'when':{'$lte':Date[_0x11bb6d(0x43b)](),'$gte':_0x30291a}},{'when':0x0}]});},_0x16d0d8=async _0x458df5=>{const _0x44b473=a0_0x33a7;for(let _0xbc6eed of _0x458df5){if(!await U['findOneAndUpdate']({'_id':_0xbc6eed['_id'],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date[_0x44b473(0x43b)]()-0x1770}}]},{'$set':{'startSend':Date[_0x44b473(0x43b)]()}}))return;if(!this['isConnected']){this[_0x44b473(0x187)][_0x44b473(0x461)](this['instanceName']+'\x20('+this[_0x44b473(0x51f)]['wuid']+_0x44b473(0x462));break;}(!_0xbc6eed['remoteJidsRemaining']||_0xbc6eed[_0x44b473(0x523)]['length']===0x0)&&(_0xbc6eed=await U['findByIdAndUpdate'](_0xbc6eed['_id'],{'$set':{'status':_0x44b473(0x286),'remoteJidsRemaining':[..._0xbc6eed[_0x44b473(0x2d0)]]}},{'new':!0x0}));for(let _0x25ca26 of _0xbc6eed[_0x44b473(0x523)]){if(this[_0x44b473(0x35e)]=Date['now'](),_0xbc6eed[_0x44b473(0x409)][_0x44b473(0x60f)](_0x56c1c0=>_0x56c1c0[_0x44b473(0x2c2)]===_0x25ca26)){this[_0x44b473(0x187)][_0x44b473(0x461)](this[_0x44b473(0x202)]+'\x20('+this[_0x44b473(0x51f)][_0x44b473(0x2e6)]+_0x44b473(0x44a)+_0x25ca26+_0x44b473(0x27e));continue;}try{let _0x337d25=await this['SendScheduleMessage'](_0x25ca26,_0xbc6eed),_0x6ad645={'remoteJid':_0x25ca26,'error':_0x337d25['error'],'id':_0x337d25['id']||null,'error_log':_0x337d25[_0x44b473(0x2da)]||null,'log_timestamp':Date[_0x44b473(0x43b)]()};if((await U['findByIdAndUpdate'](_0xbc6eed[_0x44b473(0x1fb)],{'$push':{'messagesSend':_0x6ad645},'$pull':{'remoteJidsRemaining':_0x25ca26}},{'new':!0x0}))[_0x44b473(0x654)]===_0x44b473(0x4ab)){this[_0x44b473(0x187)][_0x44b473(0x461)](this['instanceName']+'\x20('+this[_0x44b473(0x51f)]['wuid']+_0x44b473(0x341)+_0xbc6eed[_0x44b473(0x1fb)]+_0x44b473(0x1a5));break;}if(!this[_0x44b473(0x625)]){this[_0x44b473(0x187)]['verbose'](this[_0x44b473(0x202)]+'\x20('+this[_0x44b473(0x51f)][_0x44b473(0x2e6)]+_0x44b473(0x316));break;}if(!this[_0x44b473(0x28b)]){this[_0x44b473(0x187)]['verbose'](this[_0x44b473(0x202)]+'\x20('+this[_0x44b473(0x51f)][_0x44b473(0x2e6)]+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0xbc6eed['_id']+_0x44b473(0x356));break;}let _0x3db77b=this[_0x44b473(0x3d7)](_0xbc6eed[_0x44b473(0x4ac)],_0xbc6eed[_0x44b473(0x366)]);await this[_0x44b473(0x50d)](_0x3db77b);}catch(_0x4ecc0d){this[_0x44b473(0x187)][_0x44b473(0x41f)](this[_0x44b473(0x202)]+'\x20('+this[_0x44b473(0x51f)][_0x44b473(0x2e6)]+_0x44b473(0x3c8)+_0x25ca26+':\x20'+_0x4ecc0d['message']);let _0x3955e6={'remoteJid':_0x25ca26,'status':_0x44b473(0x41f),'timestamp':Date[_0x44b473(0x43b)](),'error':_0x4ecc0d['message']};await U[_0x44b473(0x42e)](_0xbc6eed[_0x44b473(0x1fb)],{'$push':{'messagesSend':_0x3955e6},'$pull':{'remoteJidsRemaining':_0x25ca26}},{'new':!0x0});}}let _0x1c4861=await U[_0x44b473(0x1e2)](_0xbc6eed[_0x44b473(0x1fb)]);_0x1c4861[_0x44b473(0x523)][_0x44b473(0x2d6)]===0x0&&_0x1c4861['status']!==_0x44b473(0x4ab)&&await U['findByIdAndUpdate'](_0xbc6eed[_0x44b473(0x1fb)],{'$set':{'status':_0x44b473(0x389)}},{'new':!0x0}),await new Promise(_0x549081=>setTimeout(_0x549081,0x1388));}},_0x15b303=async()=>{const _0xa64d5c=a0_0x33a7;let _0x568067=await U[_0xa64d5c(0x635)]({'owner':this[_0xa64d5c(0x51f)]['wuid'],'status':_0xa64d5c(0x1af),'when':{'$gt':Date[_0xa64d5c(0x43b)]()}})[_0xa64d5c(0x24a)]({'when':0x1});_0x568067&&_0x568067[_0xa64d5c(0x314)]-Date['now']()<=0x5265c00?this['delayMessage']=_0x568067[_0xa64d5c(0x314)]-Date['now']():this[_0xa64d5c(0x451)]=(0x3c+Math['floor'](Math['random']()*0x3c))*0x3c*0x3e8,this[_0xa64d5c(0x451)]=Math[_0xa64d5c(0x259)](this[_0xa64d5c(0x451)],0x7d0);let _0x32d79a=Math[_0xa64d5c(0x336)](this[_0xa64d5c(0x451)]/0xea60);if(_0x568067){let _0x464269=new Date(_0x568067[_0xa64d5c(0x314)])[_0xa64d5c(0x615)]();this[_0xa64d5c(0x187)][_0xa64d5c(0x461)](this[_0xa64d5c(0x202)]+'\x20('+this['instance']['wuid']+_0xa64d5c(0x535)+_0x464269+',\x20fará\x20nova\x20verificação\x20em\x20'+_0x32d79a+'\x20minutos');}else this['logger']['verbose'](this[_0xa64d5c(0x202)]+'\x20('+this[_0xa64d5c(0x51f)][_0xa64d5c(0x2e6)]+_0xa64d5c(0x460)+_0x32d79a+'\x20minutos');setTimeout(()=>this[_0xa64d5c(0x444)](),this[_0xa64d5c(0x451)]);};if(this[_0x14f1e4(0x28b)]&&Date[_0x14f1e4(0x43b)]()-this[_0x14f1e4(0x35e)]<0x1d4c0){_0x492cc5();return;}try{let _0xa994d8=await _0x4aafc9();_0xa994d8[_0x14f1e4(0x2d6)]===0x0?this[_0x14f1e4(0x187)][_0x14f1e4(0x461)](this[_0x14f1e4(0x202)]+'\x20('+this[_0x14f1e4(0x51f)][_0x14f1e4(0x2e6)]+'):\x20Nenhuma\x20mensagem\x20pronta\x20para\x20enviar.'):(this[_0x14f1e4(0x28b)]=_0xa994d8[0x0]['_id'],await _0x16d0d8(_0xa994d8)),await _0x15b303(),this[_0x14f1e4(0x28b)]=null;}catch(_0xc07e02){this[_0x14f1e4(0x187)][_0x14f1e4(0x41f)](_0x14f1e4(0x6dc)+_0xc07e02[_0x14f1e4(0x1f0)]);}}[a0_0x3e22c7(0x3d7)](_0x14ddec,_0x17964a){const _0x234e2b=a0_0x3e22c7;return _0x14ddec=Math[_0x234e2b(0x259)](0.5,_0x14ddec),_0x17964a=Math['max'](0x3,_0x17964a),Math[_0x234e2b(0x6cb)](Math[_0x234e2b(0x1be)]()*(_0x17964a-_0x14ddec+0x1)+_0x14ddec)*0x3e8;}[a0_0x3e22c7(0x50d)](_0x4b7fbc){return new Promise(_0x22397b=>setTimeout(_0x22397b,_0x4b7fbc));}async[a0_0x3e22c7(0x577)](_0x113f90){const _0xdf9799=a0_0x3e22c7;if(!this[_0xdf9799(0x394)]&&(await this[_0xdf9799(0x66b)](),!this[_0xdf9799(0x394)]))return null;_0x113f90=this[_0xdf9799(0x687)](_0x113f90);let _0x242861=await D['findOne']({'id':_0x113f90,'owner':this['instance'][_0xdf9799(0x2e6)]}),_0x4c9cac={};if(_0x242861&&_0x242861['leadInfo']){let _0x29444c=_0x242861['leadInfo'];typeof _0x29444c[_0xdf9799(0x3ea)]==_0xdf9799(0x5cb)&&(_0x4c9cac[_0xdf9799(0x3ea)]=_0x29444c['nome']),typeof _0x29444c['nomecompleto']==_0xdf9799(0x5cb)&&(_0x4c9cac['nomecompleto']=_0x29444c[_0xdf9799(0x63c)]),typeof _0x29444c[_0xdf9799(0x2cf)]==_0xdf9799(0x5cb)&&(_0x4c9cac['email']=_0x29444c['email']),typeof _0x29444c[_0xdf9799(0x5b4)]=='string'&&(_0x4c9cac[_0xdf9799(0x5b4)]=_0x29444c['cpf']),typeof _0x29444c[_0xdf9799(0x654)]==_0xdf9799(0x5cb)&&(_0x4c9cac['status']=_0x29444c[_0xdf9799(0x654)]),typeof _0x29444c['notas']==_0xdf9799(0x5cb)&&(_0x4c9cac[_0xdf9799(0x23c)]=_0x29444c[_0xdf9799(0x23c)]),typeof _0x29444c['responsavelid']==_0xdf9799(0x5cb)&&(_0x4c9cac[_0xdf9799(0x36d)]=_0x29444c[_0xdf9799(0x36d)]),Array['isArray'](_0x29444c[_0xdf9799(0x562)])&&(_0x4c9cac['tags']=_0x29444c[_0xdf9799(0x562)]['join'](',\x20'));}return _0x242861&&_0x242861[_0xdf9799(0x184)]&&_0x242861[_0xdf9799(0x184)]['customFields']&&_0x242861[_0xdf9799(0x184)][_0xdf9799(0x4eb)][_0xdf9799(0x4e9)](_0x33c90a=>{const _0x1c1d2a=_0xdf9799;let _0x3c39fc=this[_0x1c1d2a(0x394)]?.[_0x1c1d2a(0x4eb)][_0x1c1d2a(0x445)](_0x4cb109=>_0x4cb109[_0x1c1d2a(0x1fb)]===_0x33c90a[_0x1c1d2a(0x1fb)]);_0x3c39fc&&(_0x4c9cac[_0x3c39fc[_0x1c1d2a(0x3dc)]]=_0x33c90a[_0x1c1d2a(0x526)]);}),_0x4c9cac;}async[a0_0x3e22c7(0x424)](_0x55f439,_0x4fb049){const _0x411a65=a0_0x3e22c7;let _0x4e05e0=await this[_0x411a65(0x577)](_0x4fb049);return this[_0x411a65(0x30f)](_0x55f439,_0x4e05e0);}async[a0_0x3e22c7(0x2ca)](_0x45338c){const _0x3a7986=a0_0x3e22c7;try{if(this[_0x3a7986(0x187)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x3a7986(0x2e6)]+_0x3a7986(0x20d)),_0x45338c[_0x3a7986(0x45d)]&&_0x45338c[_0x3a7986(0x1fb)]){if(this[_0x3a7986(0x28b)]===_0x45338c[_0x3a7986(0x1fb)][_0x3a7986(0x63b)]())throw new Error(_0x3a7986(0x578));let _0x52a84c=await U[_0x3a7986(0x301)](_0x45338c[_0x3a7986(0x1fb)]);return setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x52a84c;}let _0x3f7069;if(_0x45338c[_0x3a7986(0x1fb)]&&(_0x3f7069=await U['findOne']({'owner':this[_0x3a7986(0x51f)][_0x3a7986(0x2e6)],'_id':_0x45338c['_id']})),_0x3f7069){let _0x18a9eb=_0x45338c;this['processingScheduleMessageId']===_0x3f7069[_0x3a7986(0x1fb)][_0x3a7986(0x63b)]()&&(_0x18a9eb={'status':_0x45338c[_0x3a7986(0x654)],'_id':_0x45338c[_0x3a7986(0x1fb)]});let _0x2694b2=await U[_0x3a7986(0x42e)](_0x3f7069['_id'],{'$set':_0x18a9eb},{'new':!0x0});return setTimeout(()=>this[_0x3a7986(0x444)](),0x7d0),_0x2694b2;}else{_0x45338c['owner']=this['instance'][_0x3a7986(0x2e6)];let _0x37a0b7=await new U(_0x45338c)['save']();return setTimeout(()=>this[_0x3a7986(0x444)](),0x7d0),_0x37a0b7;}}catch(_0x2cea7e){throw this[_0x3a7986(0x187)]['error'](this[_0x3a7986(0x202)]+'\x20('+this['instance'][_0x3a7986(0x2e6)]+'):\x20Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20schedule\x20message:\x20'+_0x2cea7e),new g('Erro:'+_0x2cea7e[_0x3a7986(0x1f0)]);}}async['getScheduleMessage'](){const _0x53c085=a0_0x3e22c7;try{return await U['find']({'owner':this[_0x53c085(0x51f)][_0x53c085(0x2e6)]})['sort']({'when':0x1});}catch(_0x34a459){throw this[_0x53c085(0x187)]['error'](this[_0x53c085(0x202)]+'\x20('+this['instance']['wuid']+_0x53c085(0x1e4)+_0x34a459),new g(_0x53c085(0x2c7)+_0x34a459['message']);}}async[a0_0x3e22c7(0x199)](){const _0x20d22=a0_0x3e22c7;try{return await U['deleteMany']({'owner':this['instance'][_0x20d22(0x2e6)],'status':_0x20d22(0x389)}),this[_0x20d22(0x187)][_0x20d22(0x461)](this['instanceName']+'\x20('+this['instance'][_0x20d22(0x2e6)]+_0x20d22(0x49b)),this['getScheduleMessage']();}catch(_0x14535f){throw this[_0x20d22(0x187)][_0x20d22(0x41f)](this[_0x20d22(0x202)]+'\x20('+this[_0x20d22(0x51f)][_0x20d22(0x2e6)]+'):\x20Erro\x20ao\x20deletar\x20mensagens\x20com\x20status\x20\x22done\x22:'+_0x14535f),new g(_0x20d22(0x2c7)+_0x14535f[_0x20d22(0x1f0)]);}}async[a0_0x3e22c7(0x71a)](_0x2cec78,_0x3d342d){const _0x540ead=a0_0x3e22c7;try{switch(_0x3d342d[_0x540ead(0x2e9)]){case _0x540ead(0x5bc):return await this[_0x540ead(0x21f)](_0x3d342d,_0x2cec78);case _0x540ead(0x1c7):return await this[_0x540ead(0x362)](_0x3d342d,_0x2cec78);case _0x540ead(0x4ee):return await this[_0x540ead(0x6fb)](_0x3d342d,_0x2cec78);default:return this[_0x540ead(0x187)][_0x540ead(0x41f)](this[_0x540ead(0x202)]+'\x20('+this['instance'][_0x540ead(0x2e6)]+'):\x20Comando\x20desconhecido:\x20'+_0x3d342d[_0x540ead(0x2e9)]),{'status':'error','detail':_0x540ead(0x416)};}}catch(_0x44f40b){return this[_0x540ead(0x187)]['error'](this['instanceName']+'\x20('+this['instance'][_0x540ead(0x2e6)]+_0x540ead(0x6d9)+_0x44f40b),{'status':_0x540ead(0x41f),'detail':_0x44f40b[_0x540ead(0x1f0)]};}}[a0_0x3e22c7(0x68a)](_0x3ece61){const _0x56aa04=a0_0x3e22c7;let _0x21ee34=_0x3ece61['split']('|'),_0x542389=Math['floor'](Math[_0x56aa04(0x1be)]()*_0x21ee34['length']);return _0x21ee34[_0x542389]['trim']();}async[a0_0x3e22c7(0x21f)](_0x1aaf11,_0x1735bf){const _0x34fb3a=a0_0x3e22c7;if(this[_0x34fb3a(0x187)][_0x34fb3a(0x461)](this[_0x34fb3a(0x202)]+'\x20('+this[_0x34fb3a(0x51f)][_0x34fb3a(0x2e6)]+'):\x20Enviando\x20texto'),!_0x1aaf11[_0x34fb3a(0x1f0)][_0x34fb3a(0x5bc)]||_0x1aaf11[_0x34fb3a(0x1f0)][_0x34fb3a(0x5bc)][_0x34fb3a(0x2d6)]===0x0)return{'error':!0x0,'error_log':_0x34fb3a(0x3cf)};let _0x568477=this[_0x34fb3a(0x68a)](_0x1aaf11[_0x34fb3a(0x1f0)]['text']),_0x7b28d7=await this['replaceVariablesChat'](_0x568477,_0x1735bf),_0x429831={'number':_0x1735bf,'options':{'delay':_0x1aaf11[_0x34fb3a(0x1f0)][_0x34fb3a(0x292)]},'textMessage':{'text':_0x7b28d7}},_0x24da12=null;try{let _0x114523=await this[_0x34fb3a(0x658)](_0x429831);if(_0x114523&&_0x114523['status'])return{'error':!0x1,'id':_0x114523[_0x34fb3a(0x657)]['id']};_0x24da12=JSON[_0x34fb3a(0x5af)](_0x114523),this['logger'][_0x34fb3a(0x461)](this[_0x34fb3a(0x202)]+'\x20('+this[_0x34fb3a(0x51f)][_0x34fb3a(0x2e6)]+_0x34fb3a(0x515)+_0x24da12);}catch(_0x3f8ea4){this[_0x34fb3a(0x187)]['error'](this[_0x34fb3a(0x202)]+'\x20('+this['instance'][_0x34fb3a(0x2e6)]+_0x34fb3a(0x37e)+_0x3f8ea4),_0x24da12=_0x3f8ea4[_0x34fb3a(0x1f0)];}if(_0x24da12)return{'error':!0x0,'error_log':(typeof _0x24da12==_0x34fb3a(0x245)?JSON[_0x34fb3a(0x5af)](_0x24da12,null,0x2):_0x24da12)[_0x34fb3a(0x5b0)](/[\[\]{}\n]/g,'\x20')[_0x34fb3a(0x5b0)](/  +/g,'\x20')};}async[a0_0x3e22c7(0x362)](_0xe2adfc,_0x29bf42){const _0x523116=a0_0x3e22c7;this[_0x523116(0x187)][_0x523116(0x461)](this['instanceName']+'\x20('+this['instance'][_0x523116(0x2e6)]+_0x523116(0x34f));let _0x35c690;if(_0xe2adfc[_0x523116(0x1f0)][_0x523116(0x5bc)]&&_0xe2adfc['message']['text']['length']>0x0){let _0x6afe8a=this[_0x523116(0x68a)](_0xe2adfc[_0x523116(0x1f0)][_0x523116(0x5bc)]);_0x35c690=await this[_0x523116(0x424)](_0x6afe8a,_0x29bf42);}let _0x615d8d={'number':_0x29bf42,'options':{'delay':_0xe2adfc[_0x523116(0x1f0)]['delay']},'mediaMessage':{'mediatype':_0xe2adfc[_0x523116(0x1f0)][_0x523116(0x64f)],'caption':_0x35c690,'media':_0xe2adfc[_0x523116(0x1f0)]['urlOrBase64']}},_0x34a3b5=null;try{let _0xa72eac=await this[_0x523116(0x24d)](_0x615d8d);if(_0xa72eac&&_0xa72eac['status'])return{'error':!0x1,'id':_0xa72eac['key']['id']};_0x34a3b5=JSON['stringify'](_0xa72eac),this[_0x523116(0x187)][_0x523116(0x461)](this['instanceName']+'\x20('+this[_0x523116(0x51f)][_0x523116(0x2e6)]+_0x523116(0x515)+_0x34a3b5);}catch(_0x5bce7d){this['logger'][_0x523116(0x41f)](this[_0x523116(0x202)]+'\x20('+this[_0x523116(0x51f)]['wuid']+_0x523116(0x56d)+_0x5bce7d['message']),_0x34a3b5=_0x5bce7d[_0x523116(0x1f0)];}if(_0x34a3b5)return{'error':!0x0,'error_log':(typeof _0x34a3b5==_0x523116(0x245)?JSON['stringify'](_0x34a3b5,null,0x2):_0x34a3b5)[_0x523116(0x5b0)](/[\[\]{}\n]/g,'\x20')[_0x523116(0x5b0)](/  +/g,'\x20')};}async[a0_0x3e22c7(0x6fb)](_0x1f5353,_0x37fa58){const _0xaf6c4=a0_0x3e22c7;this[_0xaf6c4(0x187)]['verbose'](this[_0xaf6c4(0x202)]+'\x20('+this[_0xaf6c4(0x51f)][_0xaf6c4(0x2e6)]+_0xaf6c4(0x37f));let _0x5c24bf={'number':_0x37fa58,'options':{'delay':_0x1f5353['message'][_0xaf6c4(0x292)]},'audioMessage':{'audio':_0x1f5353[_0xaf6c4(0x1f0)][_0xaf6c4(0x6d3)]}},_0x69b0ea=null;try{let _0x43e774=await this[_0xaf6c4(0x485)](_0x5c24bf);if(_0x43e774&&_0x43e774[_0xaf6c4(0x654)])return{'error':!0x1,'id':_0x43e774[_0xaf6c4(0x657)]['id']};_0x69b0ea=JSON[_0xaf6c4(0x5af)](_0x43e774),this[_0xaf6c4(0x187)]['verbose'](this[_0xaf6c4(0x202)]+'\x20('+this[_0xaf6c4(0x51f)]['wuid']+_0xaf6c4(0x515)+_0x69b0ea);}catch(_0x3ec009){this[_0xaf6c4(0x187)][_0xaf6c4(0x41f)](this[_0xaf6c4(0x202)]+'\x20('+this[_0xaf6c4(0x51f)][_0xaf6c4(0x2e6)]+_0xaf6c4(0x225)+_0x3ec009),_0x69b0ea=_0x3ec009['message'];}if(_0x69b0ea)return{'error':!0x0,'error_log':(typeof _0x69b0ea=='object'?JSON[_0xaf6c4(0x5af)](_0x69b0ea,null,0x2):_0x69b0ea)['replace'](/[\[\]{}\n]/g,'\x20')[_0xaf6c4(0x5b0)](/  +/g,'\x20')};}},Ee=require(a0_0x3e22c7(0x3a2)),jt=class c{constructor(_0x4c36cd,_0x3aba7c,_0x1f28e9){const _0x10755a=a0_0x3e22c7;this[_0x10755a(0x483)]=_0x4c36cd,this[_0x10755a(0x3e5)]=_0x3aba7c,this[_0x10755a(0x3da)]=_0x1f28e9,this['db']={},this[_0x10755a(0x556)]={},this[_0x10755a(0x187)]=new C(c['name']),this[_0x10755a(0x40a)]={},(this['removeInstance'](),this[_0x10755a(0x4d2)](),this[_0x10755a(0x553)](),Object[_0x10755a(0x472)](this['db'],_0x3aba7c[_0x10755a(0x17f)](_0x10755a(0x5f4))),Object['assign'](this[_0x10755a(0x556)],_0x3aba7c[_0x10755a(0x17f)](_0x10755a(0x612))),this['dbInstance']=this['db'][_0x10755a(0x5d8)]?this[_0x10755a(0x3da)][_0x10755a(0x1ba)]?.['db'](this['db'][_0x10755a(0x61d)]['DB_PREFIX_NAME']+'-instances'):void 0x0,this[_0x10755a(0x36f)]=this['redis'][_0x10755a(0x5d8)]?new ye(this[_0x10755a(0x556)]):void 0x0);}[a0_0x3e22c7(0x4a1)](_0x330400){const _0x5e16ce=a0_0x3e22c7;let _0x5ca2c0=this[_0x5e16ce(0x3e5)][_0x5e16ce(0x17f)](_0x5e16ce(0x5ee));typeof _0x5ca2c0==_0x5e16ce(0x357)&&_0x5ca2c0>0x0&&setTimeout(()=>{const _0x3045c9=_0x5e16ce;this[_0x3045c9(0x40a)][_0x330400]?.['connectionStatus']?.[_0x3045c9(0x6a3)]!==_0x3045c9(0x1c1)&&delete this[_0x3045c9(0x40a)][_0x330400];},0x3e8*0x3c*_0x5ca2c0);}async['instanceInfo'](_0x564ff0){const _0x294f8f=a0_0x3e22c7;if(_0x564ff0&&!this['waInstances'][_0x564ff0])throw new x('Instance\x20\x22'+_0x564ff0+_0x294f8f(0x1cc));let _0x12e0eb=[];for await(let [_0x3894e1,_0x198946]of Object[_0x294f8f(0x66e)](this[_0x294f8f(0x40a)]))if(_0x198946&&_0x198946[_0x294f8f(0x55b)][_0x294f8f(0x6a3)]===_0x294f8f(0x1c1)){let _0x8a9b2b=await this[_0x294f8f(0x3da)]['auth'][_0x294f8f(0x445)](_0x3894e1);_0x12e0eb[_0x294f8f(0x6a8)]({'instance':{'instanceName':_0x3894e1,'apikey':_0x8a9b2b[_0x294f8f(0x4d5)],'owner':_0x198946[_0x294f8f(0x2e6)],'profileName':await _0x198946['getProfileName']()||_0x294f8f(0x1ef),'profilePictureUrl':_0x198946[_0x294f8f(0x3c7)]}});}return _0x12e0eb[_0x294f8f(0x445)](_0x3f9d4d=>_0x3f9d4d[_0x294f8f(0x51f)]['instanceName']===_0x564ff0)??_0x12e0eb;}['delInstanceFiles'](){setInterval(async()=>{const _0xd31519=a0_0x33a7;if(this['db'][_0xd31519(0x5d8)])(await this[_0xd31519(0x155)][_0xd31519(0x648)]())[_0xd31519(0x4e9)](async _0x575213=>{const _0x48b22f=_0xd31519;let _0x3eee5d=_0x575213[_0x48b22f(0x42f)]['replace'](/^[\w-]+./,'');await this[_0x48b22f(0x155)][_0x48b22f(0x246)](_0x3eee5d)[_0x48b22f(0x49f)]({'$or':[{'_id':{'$regex':/^app.state.*/}},{'_id':{'$regex':/^session-.*/}}]});});else{let _0x434f12=(0x0,se['opendirSync'])(j,{'encoding':_0xd31519(0x2b3)});for await(let _0x35be6b of _0x434f12)_0x35be6b['isDirectory']()&&(0x0,se[_0xd31519(0x689)])((0x0,Ee[_0xd31519(0x72a)])(j,_0x35be6b['name']),{'encoding':_0xd31519(0x2b3)})[_0xd31519(0x4e9)](async _0x498637=>{const _0xe266cd=_0xd31519;(_0x498637[_0xe266cd(0x6f6)](/^app.state.*/)||_0x498637['match'](/^session-.*/))&&(0x0,se[_0xe266cd(0x5ed)])((0x0,Ee[_0xe266cd(0x72a)])(j,_0x35be6b[_0xe266cd(0x3dc)],_0x498637),{'recursive':!0x0,'force':!0x0});});}},0xe10*0x3e8*0x2);}async['cleaningUp'](_0x320ffc){const _0x1237cd=a0_0x3e22c7;this['db'][_0x1237cd(0x5d8)]&&(await this[_0x1237cd(0x3da)]['dbServer'][_0x1237cd(0x4cf)](),(await this[_0x1237cd(0x155)][_0x1237cd(0x648)]())[_0x1237cd(0x2d6)]>0x0&&await this['dbInstance'][_0x1237cd(0x1cd)](_0x320ffc)),this[_0x1237cd(0x556)][_0x1237cd(0x5d8)]&&(this[_0x1237cd(0x36f)][_0x1237cd(0x4d0)]=_0x320ffc,await this[_0x1237cd(0x36f)][_0x1237cd(0x21a)]()),!this['db'][_0x1237cd(0x5d8)]&&!this[_0x1237cd(0x556)]['ENABLED']&&(0x0,se[_0x1237cd(0x5ed)])((0x0,Ee[_0x1237cd(0x72a)])(j,_0x320ffc),{'recursive':!0x0,'force':!0x0});}async[a0_0x3e22c7(0x68f)](){const _0x4b95d0=a0_0x3e22c7;let _0x23c36f=async _0x138a1e=>{const _0x22ca5c=a0_0x33a7;let _0x4f5d0a=new Se(this[_0x22ca5c(0x3e5)],this['eventEmitter'],this[_0x22ca5c(0x3da)]);_0x4f5d0a[_0x22ca5c(0x202)]=_0x138a1e,await _0x4f5d0a[_0x22ca5c(0x3bc)](),this[_0x22ca5c(0x40a)][_0x138a1e]=_0x4f5d0a;};try{if(this[_0x4b95d0(0x556)][_0x4b95d0(0x5d8)]){let _0x5790ba=await this[_0x4b95d0(0x36f)][_0x4b95d0(0x191)]();_0x5790ba?.[_0x4b95d0(0x2d6)]>0x0&&_0x5790ba[_0x4b95d0(0x4e9)](async _0x4eb677=>await _0x23c36f(_0x4eb677[_0x4b95d0(0x209)](':')[0x1]));}if(this['db'][_0x4b95d0(0x5d8)]){await this[_0x4b95d0(0x3da)]['dbServer'][_0x4b95d0(0x4cf)]();let _0x34d517=await this['dbInstance']['collections']();_0x34d517[_0x4b95d0(0x2d6)]>0x0&&_0x34d517[_0x4b95d0(0x4e9)](async _0x353da2=>await _0x23c36f(_0x353da2[_0x4b95d0(0x42f)][_0x4b95d0(0x5b0)](/^[\w-]+\./,'')));return;}let _0x58fa36=(0x0,se['opendirSync'])(j,{'encoding':_0x4b95d0(0x2b3)});for await(let _0x447690 of _0x58fa36)if(_0x447690[_0x4b95d0(0x15f)]()){if((0x0,se[_0x4b95d0(0x689)])((0x0,Ee[_0x4b95d0(0x72a)])(j,_0x447690['name']),{'encoding':_0x4b95d0(0x2b3)})[_0x4b95d0(0x2d6)]===0x0){(0x0,se[_0x4b95d0(0x5ed)])((0x0,Ee[_0x4b95d0(0x72a)])(j,_0x447690[_0x4b95d0(0x3dc)]),{'recursive':!0x0,'force':!0x0});break;}await _0x23c36f(_0x447690[_0x4b95d0(0x3dc)]);}}catch(_0x26a2bf){this[_0x4b95d0(0x187)]['error'](_0x26a2bf);}}[a0_0x3e22c7(0x50b)](){const _0x46e1e6=a0_0x3e22c7;this['eventEmitter']['on'](_0x46e1e6(0x23b),async _0x2c25c6=>{const _0x56007d=_0x46e1e6;try{this[_0x56007d(0x40a)][_0x2c25c6]=void 0x0;}catch{}try{this['cleaningUp'](_0x2c25c6);}finally{this[_0x56007d(0x187)][_0x56007d(0x5b3)](_0x56007d(0x63d)+_0x2c25c6+'\x22\x20-\x20REMOVED');}});}[a0_0x3e22c7(0x4d2)](){const _0x4a7183=a0_0x3e22c7;this[_0x4a7183(0x483)]['on'](_0x4a7183(0x1f1),async _0x520aad=>{const _0x519eff=_0x4a7183;try{this[_0x519eff(0x40a)][_0x520aad]=void 0x0,this[_0x519eff(0x41e)](_0x520aad);}catch(_0x3d449a){this['logger'][_0x519eff(0x41f)]({'localError':_0x519eff(0x4d2),'warn':_0x519eff(0x52c),'error':_0x3d449a});}finally{this[_0x519eff(0x187)][_0x519eff(0x5b3)](_0x519eff(0x63d)+_0x520aad+_0x519eff(0x2b2));}});}},xe=require(a0_0x3e22c7(0x3a2)),ve=require('fs'),Bt=class extends B{constructor(_0x5a31b8,_0x252dc8){const _0x582b62=a0_0x3e22c7;super(_0x252dc8),this['chatModel']=_0x5a31b8,this[_0x582b62(0x3e5)]=_0x252dc8;}async['insert'](_0x103667,_0x15b054=!0x1){const _0x55bc76=a0_0x3e22c7;if(_0x103667[_0x55bc76(0x2d6)]!==0x0)try{return this[_0x55bc76(0x4a9)][_0x55bc76(0x5d8)]&&_0x15b054?{'insertCount':(await this[_0x55bc76(0x6a4)][_0x55bc76(0x51e)]([..._0x103667]))[_0x55bc76(0x2d6)]}:(_0x103667['forEach'](_0x543b50=>{const _0x10f7d8=_0x55bc76;this['writeStore']({'path':(0x0,xe[_0x10f7d8(0x72a)])(this[_0x10f7d8(0x669)],'chats',_0x543b50[_0x10f7d8(0x40b)]),'fileName':_0x543b50['id'],'data':_0x543b50});}),{'insertCount':_0x103667[_0x55bc76(0x2d6)]});}catch(_0x2f708f){return _0x2f708f;}finally{_0x103667=void 0x0;}}async[a0_0x3e22c7(0x445)](_0x43fcb7){const _0x324bc8=a0_0x3e22c7;try{if(this['dbSettings']['ENABLED'])return await this[_0x324bc8(0x6a4)][_0x324bc8(0x445)]({'owner':_0x43fcb7[_0x324bc8(0x3aa)]['owner']})['sort']({'lastmsg':-0x1})[_0x324bc8(0x3f6)](_0x43fcb7?.[_0x324bc8(0x3f6)]??0x0)[_0x324bc8(0x4a8)]();let _0x34c7aa=[],_0x40a4cb=(0x0,ve[_0x324bc8(0x5fc)])((0x0,xe[_0x324bc8(0x72a)])(this[_0x324bc8(0x669)],_0x324bc8(0x509),_0x43fcb7['where']['owner']));for await(let _0x180633 of _0x40a4cb)_0x180633[_0x324bc8(0x1fa)]()&&_0x34c7aa['push'](JSON[_0x324bc8(0x251)]((0x0,ve['readFileSync'])((0x0,xe[_0x324bc8(0x72a)])(this['storePath'],_0x324bc8(0x509),_0x43fcb7[_0x324bc8(0x3aa)][_0x324bc8(0x40b)],_0x180633['name']),{'encoding':_0x324bc8(0x2b3)})));return _0x34c7aa;}catch{return[];}}async[a0_0x3e22c7(0x45d)](_0x29f279){const _0x2bcc84=a0_0x3e22c7;try{return this[_0x2bcc84(0x4a9)][_0x2bcc84(0x5d8)]?await this[_0x2bcc84(0x6a4)][_0x2bcc84(0x49f)]({..._0x29f279[_0x2bcc84(0x3aa)]}):((0x0,ve[_0x2bcc84(0x5ed)])((0x0,xe[_0x2bcc84(0x72a)])(this['storePath'],_0x2bcc84(0x509),_0x29f279['where']['owner'],_0x29f279[_0x2bcc84(0x3aa)]['id']+_0x2bcc84(0x21b)),{'force':!0x0,'recursive':!0x0}),{'deleted':{'chatId':_0x29f279[_0x2bcc84(0x3aa)]['id']}});}catch(_0x4a129b){return{'error':_0x4a129b?.[_0x2bcc84(0x63b)]()};}}async[a0_0x3e22c7(0x635)](_0x4b7882){const _0x2730be=a0_0x3e22c7;try{if(this[_0x2730be(0x4a9)][_0x2730be(0x5d8)])return await this[_0x2730be(0x6a4)][_0x2730be(0x635)]({'owner':_0x4b7882[_0x2730be(0x3aa)][_0x2730be(0x40b)]})['lean']();}catch{return null;}}async[a0_0x3e22c7(0x64c)](_0x4186ac,_0x368eef){const _0xe3f3da=a0_0x3e22c7;try{this[_0xe3f3da(0x4a9)][_0xe3f3da(0x5d8)]&&await this[_0xe3f3da(0x6a4)][_0xe3f3da(0x628)]({..._0x4186ac[_0xe3f3da(0x3aa)]},{'$set':_0x368eef});}catch(_0x5ecdd0){console[_0xe3f3da(0x41f)](_0x5ecdd0);}}async[a0_0x3e22c7(0x390)](_0x216d98,_0x23d4f8){const _0x393e6e=a0_0x3e22c7;try{if(this[_0x393e6e(0x4a9)][_0x393e6e(0x5d8)]){let _0x2fd0be=_0x216d98[_0x393e6e(0x5a9)]((_0x7aeb87,_0x539071)=>({'updateOne':{'filter':{..._0x7aeb87[_0x393e6e(0x3aa)]},'update':{'$set':_0x23d4f8[_0x539071]}}}));await this['chatModel'][_0x393e6e(0x264)](_0x2fd0be);}}catch(_0x4cddd7){console[_0x393e6e(0x41f)](_0x4cddd7);}}},Ft=class{constructor(_0x372e7b){const _0x122fe4=a0_0x3e22c7;this[_0x122fe4(0x637)]=_0x372e7b;}async[a0_0x3e22c7(0x171)]({instanceName:_0x3cb058},_0x4ffe0f){return await this['waMonitor']['waInstances'][_0x3cb058]['editChat'](_0x4ffe0f);}async['whatsappNumber']({instanceName:_0x12b710},_0xb5096d){const _0xf7db85=a0_0x3e22c7;return await this[_0xf7db85(0x637)][_0xf7db85(0x40a)][_0x12b710][_0xf7db85(0x248)](_0xb5096d);}async[a0_0x3e22c7(0x221)]({instanceName:_0x2e6714},_0x3da64d){const _0x2f9ab4=a0_0x3e22c7;return await this['waMonitor'][_0x2f9ab4(0x40a)][_0x2e6714][_0x2f9ab4(0x1f4)](_0x3da64d);}async[a0_0x3e22c7(0x714)]({instanceName:_0x4e1fd0},_0x104d19){const _0x599ae0=a0_0x3e22c7;return await this[_0x599ae0(0x637)][_0x599ae0(0x40a)][_0x4e1fd0][_0x599ae0(0x714)](_0x104d19);}async[a0_0x3e22c7(0x6f4)]({instanceName:_0x2032d0},_0x140f45){const _0x2c2c90=a0_0x3e22c7;return await this[_0x2c2c90(0x637)][_0x2c2c90(0x40a)][_0x2032d0][_0x2c2c90(0x6f4)](_0x140f45);}async[a0_0x3e22c7(0x4c8)]({instanceName:_0x5a7dd4},_0x58e817){const _0x482a2e=a0_0x3e22c7;return await this[_0x482a2e(0x637)][_0x482a2e(0x40a)][_0x5a7dd4][_0x482a2e(0x546)](_0x58e817[_0x482a2e(0x357)]);}async[a0_0x3e22c7(0x450)]({instanceName:_0x3faec9},_0x32a81f){const _0x38cdde=a0_0x3e22c7;return await this[_0x38cdde(0x637)][_0x38cdde(0x40a)][_0x3faec9]['fetchProfile'](_0x32a81f[_0x38cdde(0x357)]);}async[a0_0x3e22c7(0x4cd)]({instanceName:_0xe0457e},_0x590fd2){const _0x41554c=a0_0x3e22c7;return await this['waMonitor'][_0x41554c(0x40a)][_0xe0457e][_0x41554c(0x4cd)](_0x590fd2);}async[a0_0x3e22c7(0x5d4)]({instanceName:_0xe4a35a},_0x32fd4e){const _0x5cdc73=a0_0x3e22c7;return await this[_0x5cdc73(0x637)]['waInstances'][_0xe4a35a][_0x5cdc73(0x5d4)](_0x32fd4e);}async[a0_0x3e22c7(0x262)]({instanceName:_0x5d5d88},_0xdf1047){const _0x427e8f=a0_0x3e22c7;return await this['waMonitor'][_0x427e8f(0x40a)][_0x5d5d88][_0x427e8f(0x262)](_0xdf1047);}async['fetchMessages']({instanceName:_0x5eb04d},_0x5eb1c3){const _0x1a6803=a0_0x3e22c7;return await this[_0x1a6803(0x637)][_0x1a6803(0x40a)][_0x5eb04d][_0x1a6803(0x664)](_0x5eb1c3);}async[a0_0x3e22c7(0x2f4)]({instanceName:_0x375c93},_0x5606a5){const _0x311fa4=a0_0x3e22c7;return await this['waMonitor'][_0x311fa4(0x40a)][_0x375c93]['fetchStatusMessage'](_0x5606a5);}async[a0_0x3e22c7(0x26a)]({instanceName:_0x1ea8e8}){const _0x15d6a9=a0_0x3e22c7;return await this[_0x15d6a9(0x637)][_0x15d6a9(0x40a)][_0x1ea8e8][_0x15d6a9(0x26a)]();}async['fetchPrivacySettings']({instanceName:_0x8a381a}){const _0x5add7d=a0_0x3e22c7;return await this['waMonitor'][_0x5add7d(0x40a)][_0x8a381a][_0x5add7d(0x328)]();}async['updatePrivacySettings']({instanceName:_0x5100fd},_0x6da9cc){const _0x46ce4f=a0_0x3e22c7;return await this[_0x46ce4f(0x637)][_0x46ce4f(0x40a)][_0x5100fd][_0x46ce4f(0x2a4)](_0x6da9cc);}async[a0_0x3e22c7(0x501)]({instanceName:_0x557a54},_0x106769){const _0x5a3982=a0_0x3e22c7;return await this[_0x5a3982(0x637)][_0x5a3982(0x40a)][_0x557a54]['fetchBusinessProfile'](_0x106769[_0x5a3982(0x357)]);}async[a0_0x3e22c7(0x238)]({instanceName:_0x34b404},_0x2cbfc4){const _0x52bc46=a0_0x3e22c7;return await this['waMonitor'][_0x52bc46(0x40a)][_0x34b404][_0x52bc46(0x238)](_0x2cbfc4['name']);}async[a0_0x3e22c7(0x236)]({instanceName:_0x2d7ee2},_0x2b6697){const _0x3e6899=a0_0x3e22c7;return await this['waMonitor'][_0x3e6899(0x40a)][_0x2d7ee2][_0x3e6899(0x236)](_0x2b6697[_0x3e6899(0x654)]);}async[a0_0x3e22c7(0x64d)]({instanceName:_0x51e62a},_0x478d97){const _0x17172f=a0_0x3e22c7;return await this['waMonitor'][_0x17172f(0x40a)][_0x51e62a][_0x17172f(0x64d)](_0x478d97['picture']);}async[a0_0x3e22c7(0x626)]({instanceName:_0x19c648},_0x567568){const _0xda8678=a0_0x3e22c7;return await this['waMonitor'][_0xda8678(0x40a)][_0x19c648]['removeProfilePicture']();}},Ms=require(a0_0x3e22c7(0x27c)),Jt=class c{constructor(_0x5b3cc0,_0x1b1d52,_0x154014,_0x181f04,_0x313473){const _0x7015b=a0_0x3e22c7;this[_0x7015b(0x637)]=_0x5b3cc0,this['configService']=_0x1b1d52,this['repository']=_0x154014,this[_0x7015b(0x483)]=_0x181f04,this['authService']=_0x313473,this[_0x7015b(0x187)]=new C(c['name']);}async[a0_0x3e22c7(0x1fc)]({instanceName:_0x2997ee,apikey:_0x157139}){const _0x317c71=a0_0x3e22c7;let _0x501187=new Se(this['configService'],this[_0x317c71(0x483)],this[_0x317c71(0x3da)]);_0x501187['instanceName']=_0x2997ee,this[_0x317c71(0x637)][_0x317c71(0x40a)][_0x501187['instanceName']]=_0x501187,this['waMonitor']['delInstanceTime'](_0x501187[_0x317c71(0x202)]);let _0x1c763c={};_0x157139?(await this[_0x317c71(0x3da)]['auth'][_0x317c71(0x516)]({'apikey':_0x157139},_0x2997ee),_0x1c763c[_0x317c71(0x4d5)]=_0x157139):_0x1c763c=await this[_0x317c71(0x375)][_0x317c71(0x547)]({'instanceName':_0x501187[_0x317c71(0x202)]});let _0x544a7d;return await _0x501187[_0x317c71(0x3bc)](),await(0x0,Ms[_0x317c71(0x292)])(0x7d0),_0x544a7d=_0x501187['qrCode'],{'instance':{'instanceName':_0x501187[_0x317c71(0x202)],'status':_0x317c71(0x6e7)},'hash':_0x1c763c,'qrcode':_0x544a7d};}async['connectToWhatsapp']({instanceName:_0x35e88b}){const _0x1e3e40=a0_0x3e22c7;try{let _0x96e2dc=this[_0x1e3e40(0x637)][_0x1e3e40(0x40a)][_0x35e88b];switch(_0x96e2dc[_0x1e3e40(0x55b)]?.[_0x1e3e40(0x6a3)]){case _0x1e3e40(0x1a2):return await _0x96e2dc[_0x1e3e40(0x3bc)](),await(0x0,Ms[_0x1e3e40(0x292)])(0x7d0),_0x96e2dc[_0x1e3e40(0x4cc)];case'connecting':return _0x96e2dc[_0x1e3e40(0x4cc)];default:return await this[_0x1e3e40(0x508)]({'instanceName':_0x35e88b});}}catch(_0xcb1800){this['logger']['log'](_0xcb1800);}}async[a0_0x3e22c7(0x508)]({instanceName:_0x924d66}){const _0x16d363=a0_0x3e22c7;let _0x157500=this[_0x16d363(0x637)][_0x16d363(0x40a)][_0x924d66][_0x16d363(0x55b)],_0x5bb141=null;_0x157500['state']==='open'&&_0x924d66&&(_0x5bb141=await this['waMonitor'][_0x16d363(0x20b)](_0x924d66));let _0x4e5d39=null;return _0x157500['state']===_0x16d363(0x284)&&_0x924d66&&(_0x4e5d39=this[_0x16d363(0x637)]['waInstances'][_0x924d66]['qrCode']),{'instance':_0x924d66,'connectionStatus':_0x157500,'instanceInfo':_0x5bb141,'qrcode':_0x4e5d39};}async[a0_0x3e22c7(0x325)]({instanceName:_0x1edafc}){const _0x4a0a4e=a0_0x3e22c7;try{return this[_0x4a0a4e(0x637)][_0x4a0a4e(0x40a)][_0x1edafc]?.['client']?.['ws']?.[_0x4a0a4e(0x1a2)](),{'status':_0x4a0a4e(0x287),'error':!0x1,'response':{'message':_0x4a0a4e(0x182)}};}catch(_0x5f26ed){this[_0x4a0a4e(0x187)][_0x4a0a4e(0x41f)](_0x5f26ed);}}async[a0_0x3e22c7(0x6fc)]({instanceName:_0x4ac1a7}){const _0x36f62f=a0_0x3e22c7;return _0x4ac1a7?this[_0x36f62f(0x637)][_0x36f62f(0x20b)](_0x4ac1a7):this['waMonitor'][_0x36f62f(0x20b)]();}async[a0_0x3e22c7(0x4f1)]({instanceName:_0x38d70c}){const _0x51df99=a0_0x3e22c7;try{return await this[_0x51df99(0x637)][_0x51df99(0x40a)][_0x38d70c]?.[_0x51df99(0x6ec)]?.[_0x51df99(0x4f1)]('Log\x20out\x20instance:\x20'+_0x38d70c),{'error':!0x1,'message':'Instance\x20logged\x20out'};}catch(_0x5ac05e){throw new A(_0x5ac05e[_0x51df99(0x63b)]());}}async[a0_0x3e22c7(0x188)]({instanceName:_0x292ff2}){const _0x27258b=a0_0x3e22c7;if((await this[_0x27258b(0x508)]({'instanceName':_0x292ff2}))[_0x27258b(0x55b)][_0x27258b(0x6a3)]===_0x27258b(0x1c1))throw new g([_0x27258b(0x330),_0x27258b(0x566)]);try{return delete this['waMonitor'][_0x27258b(0x40a)][_0x292ff2],{'error':!0x1,'message':_0x27258b(0x1f2)};}catch(_0xaa81bf){throw new g(_0xaa81bf[_0x27258b(0x63b)]());}}async[a0_0x3e22c7(0x3dd)](_0x4e5711,_0xbf972c){const _0xf2c69e=a0_0x3e22c7;return await this['authService'][_0xf2c69e(0x3dd)](_0xbf972c);}},ae=require(a0_0x3e22c7(0x3c1)),Gt=class{constructor(_0x495b8c){this['waMonitor']=_0x495b8c;}async[a0_0x3e22c7(0x400)]({instanceName:_0x5075b8},_0x3eff86){const _0x4a7ede=a0_0x3e22c7;return await this[_0x4a7ede(0x637)][_0x4a7ede(0x40a)][_0x5075b8]['textMessage'](_0x3eff86);}async[a0_0x3e22c7(0x569)]({instanceName:_0x4289bb},_0x23d197){const _0x3034ef=a0_0x3e22c7;if((0x0,ae['isBase64'])(_0x23d197?.[_0x3034ef(0x24d)]?.[_0x3034ef(0x1c7)])&&!_0x23d197?.[_0x3034ef(0x24d)]?.[_0x3034ef(0x1df)])throw new g('For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.');if((0x0,ae[_0x3034ef(0x47c)])(_0x23d197?.['mediaMessage']?.[_0x3034ef(0x1c7)])||(0x0,ae[_0x3034ef(0x718)])(_0x23d197?.[_0x3034ef(0x24d)]?.[_0x3034ef(0x1c7)]))return await this[_0x3034ef(0x637)][_0x3034ef(0x40a)][_0x4289bb][_0x3034ef(0x24d)](_0x23d197);throw new g(_0x3034ef(0x599));}async[a0_0x3e22c7(0x571)]({instanceName:_0x13c6f5},_0x288761){const _0x416e70=a0_0x3e22c7;if((0x0,ae[_0x416e70(0x47c)])(_0x288761[_0x416e70(0x4b9)][_0x416e70(0x293)])||(0x0,ae[_0x416e70(0x718)])(_0x288761[_0x416e70(0x4b9)][_0x416e70(0x293)]))return await this[_0x416e70(0x637)]['waInstances'][_0x13c6f5][_0x416e70(0x5b9)](_0x288761);throw new g(_0x416e70(0x599));}async[a0_0x3e22c7(0x552)]({instanceName:_0x4b31ad},_0x56fd29){const _0xca7482=a0_0x3e22c7;if((0x0,ae['isURL'])(_0x56fd29[_0xca7482(0x5d3)][_0xca7482(0x4ee)])||(0x0,ae[_0xca7482(0x718)])(_0x56fd29['audioMessage'][_0xca7482(0x4ee)]))return await this['waMonitor'][_0xca7482(0x40a)][_0x4b31ad][_0xca7482(0x485)](_0x56fd29);throw new g(_0xca7482(0x599));}async[a0_0x3e22c7(0x17b)]({instanceName:_0x3ed00c},_0xa17ff8){const _0x15c659=a0_0x3e22c7;if((0x0,ae[_0x15c659(0x718)])(_0xa17ff8['buttonMessage'][_0x15c659(0x24d)]?.[_0x15c659(0x1c7)])&&!_0xa17ff8[_0x15c659(0x3f9)]['mediaMessage']?.[_0x15c659(0x1df)])throw new g(_0x15c659(0x6b7));return await this[_0x15c659(0x637)][_0x15c659(0x40a)][_0x3ed00c]['buttonMessage'](_0xa17ff8);}async[a0_0x3e22c7(0x565)]({instanceName:_0x3a998f},_0x523292){const _0x93d63f=a0_0x3e22c7;return await this['waMonitor'][_0x93d63f(0x40a)][_0x3a998f][_0x93d63f(0x3a8)](_0x523292);}async[a0_0x3e22c7(0x2b9)]({instanceName:_0x268725},_0x16382b){const _0x3ce39e=a0_0x3e22c7;return await this['waMonitor'][_0x3ce39e(0x40a)][_0x268725][_0x3ce39e(0x4c9)](_0x16382b);}async[a0_0x3e22c7(0x62d)]({instanceName:_0x60d177},_0x536e47){const _0x351367=a0_0x3e22c7;return await this[_0x351367(0x637)]['waInstances'][_0x60d177][_0x351367(0x220)](_0x536e47);}async[a0_0x3e22c7(0x55f)]({instanceName:_0x2bae88},_0x53f2f1){const _0xa11647=a0_0x3e22c7;return await this['waMonitor'][_0xa11647(0x40a)][_0x2bae88][_0xa11647(0x326)](_0x53f2f1);}async[a0_0x3e22c7(0x261)]({instanceName:_0x3a0255},_0x9e64ab){const _0x81814f=a0_0x3e22c7;if(!_0x9e64ab[_0x81814f(0x5c3)][_0x81814f(0x2ec)][_0x81814f(0x6f6)](/[^\(\)\w\sà-ú"-\+]+/))throw new g('\x22reaction\x22\x20must\x20be\x20an\x20emoji');return await this['waMonitor'][_0x81814f(0x40a)][_0x3a0255][_0x81814f(0x5c3)](_0x9e64ab);}async[a0_0x3e22c7(0x35b)]({instanceName:_0x226568},_0x436526){const _0x1ae42a=a0_0x3e22c7;return await this[_0x1ae42a(0x637)][_0x1ae42a(0x40a)][_0x226568][_0x1ae42a(0x5fd)](_0x436526);}},qt=class{constructor(_0x1a81bd){const _0x2dacaa=a0_0x3e22c7;this[_0x2dacaa(0x637)]=_0x1a81bd;}async[a0_0x3e22c7(0x517)](_0x48dc76,_0x3ac763){const _0x2c766f=a0_0x3e22c7;return await this['waMonitor'][_0x2c766f(0x40a)][_0x48dc76[_0x2c766f(0x202)]][_0x2c766f(0x517)](_0x3ac763);}async['updateGroupPicture'](_0x4d5cce,_0x3fbb8f){const _0x52da21=a0_0x3e22c7;return await this[_0x52da21(0x637)][_0x52da21(0x40a)][_0x4d5cce[_0x52da21(0x202)]]['updateGroupPicture'](_0x3fbb8f);}async['groupDesc'](_0x49db39,_0x479e5c){const _0x12bff5=a0_0x3e22c7;return await this[_0x12bff5(0x637)][_0x12bff5(0x40a)][_0x49db39[_0x12bff5(0x202)]][_0x12bff5(0x403)](_0x479e5c);}async[a0_0x3e22c7(0x1eb)](_0x57814f,_0x494b98){const _0x3fec24=a0_0x3e22c7;return await this[_0x3fec24(0x637)][_0x3fec24(0x40a)][_0x57814f['instanceName']]['groupName'](_0x494b98);}async[a0_0x3e22c7(0x2c6)](_0x52bfa0,_0x19b23e){const _0x2fef1e=a0_0x3e22c7;return await this['waMonitor'][_0x2fef1e(0x40a)][_0x52bfa0[_0x2fef1e(0x202)]]['groupSetting'](_0x19b23e);}async[a0_0x3e22c7(0x165)](_0x2b117c,_0x174a69){const _0x2b68b0=a0_0x3e22c7;return await this[_0x2b68b0(0x637)][_0x2b68b0(0x40a)][_0x2b117c[_0x2b68b0(0x202)]][_0x2b68b0(0x6ff)](_0x174a69);}async[a0_0x3e22c7(0x692)](_0x2590d0){const _0x2ce014=a0_0x3e22c7;return await this[_0x2ce014(0x637)][_0x2ce014(0x40a)][_0x2590d0[_0x2ce014(0x202)]][_0x2ce014(0x692)]();}async[a0_0x3e22c7(0x455)](_0x16eccb,_0x3ae37d){const _0x1923e7=a0_0x3e22c7;return await this['waMonitor'][_0x1923e7(0x40a)][_0x16eccb[_0x1923e7(0x202)]][_0x1923e7(0x455)](_0x3ae37d);}async[a0_0x3e22c7(0x4ec)](_0x4c5619,_0x2c5c9b){const _0x552bd9=a0_0x3e22c7;return await this['waMonitor'][_0x552bd9(0x40a)][_0x4c5619[_0x552bd9(0x202)]][_0x552bd9(0x4ec)](_0x2c5c9b);}async[a0_0x3e22c7(0x4a0)](_0xfa8b9c,_0x4065a1){const _0x15ac1b=a0_0x3e22c7;return await this[_0x15ac1b(0x637)][_0x15ac1b(0x40a)][_0xfa8b9c['instanceName']][_0x15ac1b(0x4a0)](_0x4065a1);}async['findParticipants'](_0x17eb29,_0x2c39ea){const _0x2a32f5=a0_0x3e22c7;return await this[_0x2a32f5(0x637)][_0x2a32f5(0x40a)][_0x17eb29[_0x2a32f5(0x202)]][_0x2a32f5(0x521)](_0x2c39ea);}async[a0_0x3e22c7(0x6b4)](_0x32c85c,_0x460f2b){const _0x16527e=a0_0x3e22c7;return await this[_0x16527e(0x637)][_0x16527e(0x40a)][_0x32c85c[_0x16527e(0x202)]]['updateGParticipant'](_0x460f2b);}async['toggleEphemeral'](_0x4fa152,_0x38ffb4){const _0x5c3e97=a0_0x3e22c7;return await this['waMonitor']['waInstances'][_0x4fa152[_0x5c3e97(0x202)]][_0x5c3e97(0x631)](_0x38ffb4);}async[a0_0x3e22c7(0x195)](_0x4d59af,_0x54c193){const _0x25a722=a0_0x3e22c7;return await this[_0x25a722(0x637)][_0x25a722(0x40a)][_0x4d59af[_0x25a722(0x202)]][_0x25a722(0x195)](_0x54c193);}},Wt=class{constructor(_0x467e70,_0x361f13){const _0x2df7eb=a0_0x3e22c7;this[_0x2df7eb(0x1b4)]=_0x467e70,this[_0x2df7eb(0x3e5)]=_0x361f13;}async[a0_0x3e22c7(0x67d)](_0x58e1b5,_0x42369e){const _0x13ed34=a0_0x3e22c7;try{let _0x4b1211=_0x58e1b5['params'];if(this[_0x13ed34(0x1b4)]['waInstances'][_0x4b1211[_0x13ed34(0x202)]][_0x13ed34(0x55b)][_0x13ed34(0x6a3)]==='open')throw new g(_0x13ed34(0x72d));let _0x2d0979=this[_0x13ed34(0x3e5)]['get'](_0x13ed34(0x32f))['TYPE'];return _0x42369e['status'](0xc8)[_0x13ed34(0x675)](_0x13ed34(0x67d),{'type':_0x2d0979,..._0x4b1211});}catch(_0x7668b9){console[_0x13ed34(0x4b3)](_0x13ed34(0x5f0),_0x7668b9);}}},Ht=class{constructor(_0x4a1a1c){const _0xb7d1ae=a0_0x3e22c7;this[_0xb7d1ae(0x637)]=_0x4a1a1c;}[a0_0x3e22c7(0x516)](_0x379746,_0x460cfe){const _0x7e228b=a0_0x3e22c7;return this[_0x7e228b(0x637)][_0x7e228b(0x40a)][_0x379746[_0x7e228b(0x202)]][_0x7e228b(0x153)](_0x460cfe);}async[a0_0x3e22c7(0x445)](_0x2383df){const _0x580586=a0_0x3e22c7;try{return await this[_0x580586(0x637)][_0x580586(0x40a)][_0x2383df['instanceName']][_0x580586(0x173)]();}catch{return{'enabled':null,'url':''};}}},ld=new C('FlowController'),Kt=class{constructor(_0x578fbc){const _0x612959=a0_0x3e22c7;this[_0x612959(0x637)]=_0x578fbc;}async[a0_0x3e22c7(0x2ca)](_0x15684d,_0x1a4216){const _0x35055f=a0_0x3e22c7;return await this[_0x35055f(0x637)][_0x35055f(0x40a)][_0x15684d[_0x35055f(0x202)]][_0x35055f(0x2ca)](_0x1a4216);}async[a0_0x3e22c7(0x15e)](_0x2ea4a3){const _0x2d1df0=a0_0x3e22c7;return await this[_0x2d1df0(0x637)][_0x2d1df0(0x40a)][_0x2ea4a3[_0x2d1df0(0x202)]][_0x2d1df0(0x15e)]();}async['deleteDoneMessages'](_0x549076){const _0x141336=a0_0x3e22c7;return await this[_0x141336(0x637)][_0x141336(0x40a)][_0x549076[_0x141336(0x202)]]['deleteDoneMessages']();}async[a0_0x3e22c7(0x66b)](_0x31b144){const _0x2347d9=a0_0x3e22c7;return await this[_0x2347d9(0x637)]['waInstances'][_0x31b144[_0x2347d9(0x202)]][_0x2347d9(0x66b)]();}async[a0_0x3e22c7(0x37b)](_0x3dd2b2,_0x5b3369){const _0x256f99=a0_0x3e22c7;return await this[_0x256f99(0x637)][_0x256f99(0x40a)][_0x3dd2b2['instanceName']][_0x256f99(0x37b)](_0x5b3369);}async['updateCustomFields'](_0x382175,_0x10e0c3){const _0x2a268e=a0_0x3e22c7;return await this[_0x2a268e(0x637)][_0x2a268e(0x40a)][_0x382175[_0x2a268e(0x202)]][_0x2a268e(0x2ae)](_0x10e0c3);}async['updateFlowConfig'](_0x597797,_0x5d9283){const _0x55b6a2=a0_0x3e22c7;return await this[_0x55b6a2(0x637)][_0x55b6a2(0x40a)][_0x597797['instanceName']][_0x55b6a2(0x16e)](_0x5d9283);}async[a0_0x3e22c7(0x5da)](_0x5aed9e,_0x16fbef){const _0x107d03=a0_0x3e22c7;return await this[_0x107d03(0x637)][_0x107d03(0x40a)][_0x5aed9e[_0x107d03(0x202)]][_0x107d03(0x5da)](_0x16fbef);}async[a0_0x3e22c7(0x4bc)](_0x2777b0,_0x3ed800){const _0x5e0e74=a0_0x3e22c7;return await this['waMonitor'][_0x5e0e74(0x40a)][_0x2777b0[_0x5e0e74(0x202)]][_0x5e0e74(0x4bc)](_0x3ed800);}async[a0_0x3e22c7(0x2b8)](_0x119afe,_0x51faea){const _0x57b023=a0_0x3e22c7;return await this[_0x57b023(0x637)][_0x57b023(0x40a)][_0x119afe[_0x57b023(0x202)]][_0x57b023(0x2b8)](_0x51faea);}async['editConversation'](_0x4f6651,_0xa9df7c){const _0x58b1f6=a0_0x3e22c7;return await this[_0x58b1f6(0x637)][_0x58b1f6(0x40a)][_0x4f6651['instanceName']]['editConversation'](_0xa9df7c);}async[a0_0x3e22c7(0x550)](_0x5821f4,_0x39bde7){const _0x4cedaa=a0_0x3e22c7;return await this[_0x4cedaa(0x637)][_0x4cedaa(0x40a)][_0x5821f4['instanceName']]['deleteConversation'](_0x39bde7);}async[a0_0x3e22c7(0x428)](_0x57f8ad,_0x1f390a){const _0x6ee115=a0_0x3e22c7;return await this['waMonitor'][_0x6ee115(0x40a)][_0x57f8ad[_0x6ee115(0x202)]][_0x6ee115(0x428)](_0x1f390a[_0x6ee115(0x3dc)]);}async[a0_0x3e22c7(0x6f9)](_0x333bde,_0x15df11){const _0x695eb=a0_0x3e22c7;return await this['waMonitor']['waInstances'][_0x333bde[_0x695eb(0x202)]]['createFlow'](_0x15df11);}async['editFlow'](_0x570bac,_0x148b3f){const _0x3e017c=a0_0x3e22c7;return await this[_0x3e017c(0x637)][_0x3e017c(0x40a)][_0x570bac[_0x3e017c(0x202)]][_0x3e017c(0x33e)](_0x148b3f);}async[a0_0x3e22c7(0x5be)](_0x50da82,_0x4d9d28){const _0x16974a=a0_0x3e22c7;return await this[_0x16974a(0x637)]['waInstances'][_0x50da82['instanceName']][_0x16974a(0x5be)](_0x4d9d28);}async[a0_0x3e22c7(0x6e0)](_0x4fdf5f,_0x43ae74){const _0x4639ce=a0_0x3e22c7;return await this[_0x4639ce(0x637)][_0x4639ce(0x40a)][_0x4fdf5f['instanceName']]['editFlowReply'](_0x43ae74);}async[a0_0x3e22c7(0x411)](_0xf63e8b,_0x575f65){const _0x4cdde2=a0_0x3e22c7;return await this[_0x4cdde2(0x637)][_0x4cdde2(0x40a)][_0xf63e8b[_0x4cdde2(0x202)]][_0x4cdde2(0x411)](_0x575f65);}async[a0_0x3e22c7(0x68d)](_0x2e858a,_0x4475c4){const _0x3e31fe=a0_0x3e22c7;return await this[_0x3e31fe(0x637)][_0x3e31fe(0x40a)][_0x2e858a[_0x3e31fe(0x202)]][_0x3e31fe(0x68d)](_0x4475c4);}async['editFlowVaredit'](_0x15cb51,_0x42ca6d){const _0x5f1b11=a0_0x3e22c7;return await this[_0x5f1b11(0x637)][_0x5f1b11(0x40a)][_0x15cb51[_0x5f1b11(0x202)]][_0x5f1b11(0x5ce)](_0x42ca6d);}async[a0_0x3e22c7(0x427)](_0x53e9e6,_0xfd1736){const _0xb37655=a0_0x3e22c7;return await this[_0xb37655(0x637)][_0xb37655(0x40a)][_0x53e9e6[_0xb37655(0x202)]][_0xb37655(0x427)](_0xfd1736);}async['deleteFlow'](_0x4abbc7,_0x2dc4bd){const _0x4d98e1=a0_0x3e22c7;return await this[_0x4d98e1(0x637)]['waInstances'][_0x4abbc7[_0x4d98e1(0x202)]][_0x4d98e1(0x50c)](_0x2dc4bd[_0x4d98e1(0x3dc)]);}async[a0_0x3e22c7(0x2e7)](_0xa38676){const _0x503886=a0_0x3e22c7;return await this['waMonitor'][_0x503886(0x40a)][_0xa38676[_0x503886(0x202)]]['allFlows']();}},zt=class{constructor(_0x20904b){const _0x5a5dde=a0_0x3e22c7;this[_0x5a5dde(0x1dd)]=_0x20904b;}async[a0_0x3e22c7(0x57d)](_0x3697d8,_0x230a54){return this['webhookService']['create'](_0x3697d8,_0x230a54);}async[a0_0x3e22c7(0x173)](_0x17dafa){const _0x413224=a0_0x3e22c7;return this[_0x413224(0x1dd)][_0x413224(0x445)](_0x17dafa);}},Qt=class{constructor(_0x5e2036,_0x15adab,_0x1ed364,_0x19d072,_0x622f5c,_0x574a60,_0x269437){const _0x49a9ae=a0_0x3e22c7;this[_0x49a9ae(0x1f0)]=_0x5e2036,this[_0x49a9ae(0x6e6)]=_0x15adab,this[_0x49a9ae(0x514)]=_0x1ed364,this[_0x49a9ae(0x1ad)]=_0x19d072,this[_0x49a9ae(0x695)]=_0x622f5c,this[_0x49a9ae(0x378)]=_0x574a60,this[_0x49a9ae(0x20c)]=_0x269437;}get[a0_0x3e22c7(0x1ba)](){const _0x13ddd9=a0_0x3e22c7;return this[_0x13ddd9(0x20c)];}},Is=require(a0_0x3e22c7(0x1c3)),Rs=class{},gi=new Is['Schema']({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String,'minlength':0x3,'enum':['android',a0_0x3e22c7(0x51c),a0_0x3e22c7(0x355)]},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String}}),fo=M?.['model'](Rs[a0_0x3e22c7(0x3dc)],gi,'messages'),As=class{},mi=new Is[(a0_0x3e22c7(0x3f8))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String,'required':!0x0,'min':0x1},'id':{'type':String,'required':!0x0,'min':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'min':0x1},'datetime':{'type':Number,'required':!0x0,'min':0x1},'status':{'type':String,'required':!0x0},'owner':{'type':String,'required':!0x0,'min':0x1}}),wo=M?.[a0_0x3e22c7(0x185)](As[a0_0x3e22c7(0x3dc)],mi,a0_0x3e22c7(0x1ad)),yo=require(a0_0x3e22c7(0x1c3)),Ds=class{},hi=new yo[(a0_0x3e22c7(0x3f8))]({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1}}),bo=M?.['model'](Ds[a0_0x3e22c7(0x3dc)],hi,a0_0x3e22c7(0x2eb)),So=require(a0_0x3e22c7(0x1c3)),Ps=class{},Eo=new So[(a0_0x3e22c7(0x3f8))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});Eo[a0_0x3e22c7(0x232)](a0_0x3e22c7(0x2bb),function(_0x26e5fd){const _0x2a41bc=a0_0x3e22c7;delete this[_0x2a41bc(0x345)],delete this[_0x2a41bc(0x1e3)],delete this[_0x2a41bc(0x44c)],delete this[_0x2a41bc(0x2b0)],delete this[_0x2a41bc(0x1d8)],_0x26e5fd();});var vo=M?.[a0_0x3e22c7(0x185)](Ps['name'],Eo,'webhook'),Os=require(a0_0x3e22c7(0x3a2)),No=require('fs'),Yt=class extends B{constructor(_0x19ced9,_0x3d15fe){const _0x39ce28=a0_0x3e22c7;super(_0x3d15fe),this[_0x39ce28(0x404)]=_0x19ced9,this[_0x39ce28(0x3e5)]=_0x3d15fe;}async['create'](_0x46c8a5,_0x4fd453){const _0x3aca89=a0_0x3e22c7;try{return this[_0x3aca89(0x4a9)][_0x3aca89(0x5d8)]?{'insertCount':(await this[_0x3aca89(0x404)][_0x3aca89(0x3f2)]({'_id':_0x4fd453},{..._0x46c8a5},{'upsert':!0x0}))[_0x3aca89(0x396)]}:(this[_0x3aca89(0x253)]({'path':(0x0,Os[_0x3aca89(0x72a)])(this[_0x3aca89(0x669)],_0x3aca89(0x695)),'fileName':_0x4fd453,'data':_0x46c8a5}),{'insertCount':0x1});}catch(_0x421183){return _0x421183;}}async[a0_0x3e22c7(0x445)](_0x3c022c){const _0x42abdb=a0_0x3e22c7;try{return this['dbSettings']['ENABLED']?await this[_0x42abdb(0x404)][_0x42abdb(0x635)]({'_id':_0x3c022c}):JSON[_0x42abdb(0x251)]((0x0,No[_0x42abdb(0x1b3)])((0x0,Os[_0x42abdb(0x72a)])(this[_0x42abdb(0x669)],_0x42abdb(0x695),_0x3c022c+_0x42abdb(0x5bf)),{'encoding':_0x42abdb(0x2b3)}));}catch{return{};}}},_s=require(a0_0x3e22c7(0x3a2)),Co=require('fs'),Xt=class extends B{constructor(_0x41d09b,_0x56b3af){const _0x3a8627=a0_0x3e22c7;super(_0x56b3af),this[_0x3a8627(0x2bd)]=_0x41d09b,this[_0x3a8627(0x3e5)]=_0x56b3af,this[_0x3a8627(0x378)]=_0x56b3af[_0x3a8627(0x17f)](_0x3a8627(0x32f));}async[a0_0x3e22c7(0x516)](_0xff0023,_0x181677){const _0x1b6e53=a0_0x3e22c7;try{return this['dbSettings']['ENABLED']?{'insertCount':(await this[_0x1b6e53(0x2bd)][_0x1b6e53(0x3f2)]({'_id':_0x181677},{..._0xff0023},{'upsert':!0x0}))[_0x1b6e53(0x396)]}:(this[_0x1b6e53(0x253)]({'path':(0x0,_s[_0x1b6e53(0x72a)])(es,this[_0x1b6e53(0x378)]['TYPE']),'fileName':_0x181677,'data':_0xff0023}),{'insertCount':0x1});}catch(_0x54914d){return{'error':_0x54914d};}}async[a0_0x3e22c7(0x445)](_0x447b4d){const _0x1f2a16=a0_0x3e22c7;try{return this['dbSettings']['ENABLED']?await this[_0x1f2a16(0x2bd)]['findOne']({'_id':_0x447b4d}):JSON[_0x1f2a16(0x251)]((0x0,Co['readFileSync'])((0x0,_s[_0x1f2a16(0x72a)])(es,this[_0x1f2a16(0x378)][_0x1f2a16(0x46b)],_0x447b4d+_0x1f2a16(0x5bf)),{'encoding':_0x1f2a16(0x2b3)}));}catch{return{};}}},fi=new C(a0_0x3e22c7(0x436)),wi=new je(fo,y),yi=new Bt(D,y),bi=new et(Fe,y),Si=new at(wo,y),Ei=new Yt(vo,y),vi=new Xt(bo,y),de=new Qt(wi,yi,bi,Si,Ei,vi,M?.['getClient']()),F=new jt(os,y,de),Ni=new ht(y,F,de),Ci=new Ht(F),Ss=new zt(Ci),R=new Kt(F),ce=new Jt(F,y,de,os,Ni),to=new Wt(F,y),K=new Gt(F),P=new Ft(F),V=new qt(F);fi[a0_0x3e22c7(0x60d)](a0_0x3e22c7(0x45f));var Sp=require('express-async-errors'),xs=require('fs'),To=T(require('https')),Mo=T(require('http')),$e=class c{static #e;static set[a0_0x3e22c7(0x2ed)](_0x342afa){this.#e=_0x342afa;}static get[a0_0x3e22c7(0x1f9)](){const _0x23e7c1=a0_0x3e22c7;let {FULLCHAIN:_0x42be6b,PRIVKEY:_0x15f7bf}=y[_0x23e7c1(0x17f)](_0x23e7c1(0x2f9));return To['createServer']({'cert':(0x0,xs['readFileSync'])(_0x42be6b),'key':(0x0,xs[_0x23e7c1(0x1b3)])(_0x15f7bf)},c.#e);}static get[a0_0x3e22c7(0x6e9)](){return Mo['createServer'](c.#e);}},ke=T(require('fs')),_o=T(require(a0_0x3e22c7(0x475))),Le=T(require(a0_0x3e22c7(0x354))),Zt=T(require(a0_0x3e22c7(0x3a2))),xo=require(a0_0x3e22c7(0x43c)),Vs=require(a0_0x3e22c7(0x43c));function Ti(){const _0x28d78a=a0_0x3e22c7;F[_0x28d78a(0x68f)]();let _0x5d92d1=Zt[_0x28d78a(0x30c)]['join'](__dirname,_0x28d78a(0x5cd));Oo(_0x5d92d1);}var Oo=_0x285709=>{const _0x459111=a0_0x3e22c7;let _0x426fca=ke[_0x459111(0x30c)]['readdirSync'](_0x285709),_0xce79c2=0xc*0x3c*0x3c*0x3e8,_0x3a7940=0x2*0x3c*0x3c*0x3e8,_0x85f011=new Date()[_0x459111(0x3ae)]();_0x426fca[_0x459111(0x4e9)](_0x219e70=>{const _0x2e0b03=_0x459111;let _0x11859d=Zt[_0x2e0b03(0x30c)][_0x2e0b03(0x72a)](_0x285709,_0x219e70),_0x10f7e0=ke['default']['statSync'](_0x11859d)[_0x2e0b03(0x51a)][_0x2e0b03(0x3ae)]();_0x85f011-_0x10f7e0>_0xce79c2&&(ke[_0x2e0b03(0x30c)][_0x2e0b03(0x6c7)](_0x11859d),console[_0x2e0b03(0x4b3)](_0x2e0b03(0x563)+_0x219e70));}),setTimeout(()=>Oo(_0x285709),_0x3a7940);};function Mi(){const _0x1a4aa2=a0_0x3e22c7;let _0xb651dd=new C(_0x1a4aa2(0x511)),_0x4dad45=(0x0,me['default'])();_0x4dad45[_0x1a4aa2(0x5fe)]((0x0,Po[_0x1a4aa2(0x30c)])({'origin'(_0x574194,_0x3e1d32){const _0x2ee739=_0x1a4aa2;let {ORIGIN:_0x3202c3}=y[_0x2ee739(0x17f)](_0x2ee739(0x34d));return _0x574194||(_0x574194='*'),_0x3202c3['indexOf']('*')!==-0x1||_0x3202c3[_0x2ee739(0x1a0)](_0x574194)!==-0x1?_0x3e1d32(null,!0x0):_0x3e1d32(new Error(_0x2ee739(0x2f3)));},'methods':[...y[_0x1a4aa2(0x17f)]('CORS')[_0x1a4aa2(0x1e9)]],'credentials':y['get'](_0x1a4aa2(0x34d))[_0x1a4aa2(0x28c)]}),(0x0,me[_0x1a4aa2(0x402)])({'extended':!0x0,'limit':_0x1a4aa2(0x1a3)}),(0x0,me[_0x1a4aa2(0x369)])({'limit':_0x1a4aa2(0x1a3)})),_0x4dad45['use']((_0x1fdfaa,_0x2da50f,_0x31360d)=>{const _0x246dc5=_0x1a4aa2;_0x1fdfaa['path'][_0x246dc5(0x4b4)](_0x246dc5(0x1fe))?_0x31360d():(0x0,Do[_0x246dc5(0x30c)])()(_0x1fdfaa,_0x2da50f,_0x31360d);}),_0x4dad45[_0x1a4aa2(0x4da)](_0x1a4aa2(0x174),_0x1a4aa2(0x70d)),_0x4dad45[_0x1a4aa2(0x4da)](_0x1a4aa2(0x6f7),(0x0,ks[_0x1a4aa2(0x72a)])(Y,_0x1a4aa2(0x6f7))),_0x4dad45[_0x1a4aa2(0x5fe)](me[_0x1a4aa2(0x30c)][_0x1a4aa2(0x624)]((0x0,ks[_0x1a4aa2(0x72a)])(Y,_0x1a4aa2(0x5ad)))),_0x4dad45['use']((_0x5f2401,_0x584ffc,_0x464434)=>{const _0x4305a8=_0x1a4aa2;let _0x2f8ee1=_0x584ffc[_0x4305a8(0x623)];_0x584ffc['send']=function(_0x28693f){const _0x1e5aee=_0x4305a8;if(_0x5f2401[_0x1e5aee(0x6aa)][_0x1e5aee(0x20a)]==='true'||_0x5f2401[_0x1e5aee(0x6a0)]['uazapi']===_0x1e5aee(0x30b)){let _0x4f87f5=JSON[_0x1e5aee(0x251)](_0x28693f);_0x28693f=JSON[_0x1e5aee(0x5af)](_0x3770a6(_0x4f87f5));}return _0x2f8ee1[_0x1e5aee(0x2ad)](_0x584ffc,[_0x28693f]);},_0x464434();}),_0x4dad45[_0x1a4aa2(0x5fe)]('/',Ot),_0x4dad45[_0x1a4aa2(0x5fe)]((_0x141543,_0x33af32,_0x1cb49f,_0x4c6a1c)=>{const _0x565086=_0x1a4aa2;if(_0x141543)return _0x1cb49f[_0x565086(0x654)](_0x141543['status']||0x1f4)[_0x565086(0x369)](_0x141543);},(_0x501e8a,_0x286199,_0x296588)=>{const _0x46e1d8=_0x1a4aa2;let {method:_0x445590,url:_0x452ff0}=_0x501e8a;_0x286199[_0x46e1d8(0x654)](0x194)[_0x46e1d8(0x369)]({'status':0x194,'message':_0x46e1d8(0x18d)+_0x445590[_0x46e1d8(0x2e4)]()+'\x20'+_0x452ff0,'error':_0x46e1d8(0x505)}),_0x296588();});let _0x3770a6=(_0x4b0f51,_0x10ab1c=_0x1a4aa2(0x592))=>{const _0x3a4fd2=_0x1a4aa2;let _0x1752d7=(_0x3f7d3e,_0xbd34d7=null,_0x4fe838=!0x1)=>{const _0x33b630=a0_0x33a7;let _0x55fea5={};return Object[_0x33b630(0x5d2)](_0x3f7d3e)[_0x33b630(0x4e9)](_0x5b8bd5=>{const _0xbddbd=_0x33b630;let _0x1bfa41=_0x3f7d3e[_0x5b8bd5],_0x43ed3a=''+_0x10ab1c+_0x5b8bd5;_0xbd34d7&&!_0x4fe838&&(_0x43ed3a=_0xbd34d7+'.'+_0x5b8bd5),!_0x1bfa41&&_0x1bfa41!==0x0&&_0x1bfa41!==!0x1||typeof _0x1bfa41>'u'?_0x55fea5[_0x43ed3a]=null:typeof _0x1bfa41!=_0xbddbd(0x245)&&!Array['isArray'](_0x1bfa41)?_0x55fea5[_0x43ed3a]=_0x1bfa41:typeof _0x1bfa41==_0xbddbd(0x245)&&!Array[_0xbddbd(0x242)](_0x1bfa41)?_0x55fea5=Object['assign'](_0x55fea5,_0x1752d7(_0x1bfa41,_0x43ed3a)):Array['isArray'](_0x1bfa41)&&(typeof _0x1bfa41[0x0]==_0xbddbd(0x245)?(_0x55fea5[_0x43ed3a]=[],_0x1bfa41[_0xbddbd(0x4e9)](_0x2c3669=>{const _0x53feba=_0xbddbd;_0x55fea5[_0x43ed3a][_0x53feba(0x6a8)](_0x1752d7(_0x2c3669,_0x43ed3a,!0x0));})):_0x55fea5[_0x43ed3a]=_0x1bfa41);}),_0x55fea5;};return Array['isArray'](_0x4b0f51)?_0x4b0f51['map'](_0x6ab77d=>_0x1752d7(_0x6ab77d)):typeof _0x4b0f51==_0x3a4fd2(0x245)&&_0x4b0f51!==null?_0x1752d7(_0x4b0f51):{};},_0x28c836=y[_0x1a4aa2(0x17f)](_0x1a4aa2(0x511));$e[_0x1a4aa2(0x2ed)]=_0x4dad45;let _0x269397=$e[_0x28c836[_0x1a4aa2(0x46b)]],_0x3cfbe2=_0x1a4aa2(0x205);_0x269397[_0x1a4aa2(0x423)](_0x28c836[_0x1a4aa2(0x3c0)],()=>{const _0x14422f=_0x1a4aa2;_0xb651dd['log'](_0x3cfbe2),_0xb651dd[_0x14422f(0x4b3)](_0x28c836['TYPE'][_0x14422f(0x2e4)]()+'\x20-\x20ON:\x20'+_0x28c836['PORT']);}),Ti(),Qs();}function Ls(_0x3460ff,_0x400152){return new Promise(_0x860f87=>{const _0x1dff2c=a0_0x33a7;(0x0,xo[_0x1dff2c(0x46d)])(_0x3460ff+'\x20'+_0x400152,_0x133b8e=>{_0x860f87(!_0x133b8e);});});}function Ro(_0x5e6ba0,_0x4b4a6e,_0x3ad3e9){return new Promise(_0x33f10d=>{const _0x464aeb=a0_0x33a7;Ls(_0x5e6ba0,_0x3ad3e9)[_0x464aeb(0x28f)](_0x29f9c9=>{const _0x6eadec=_0x464aeb;if(_0x29f9c9)_0x33f10d(!0x0);else{let [_0x19dc8b,..._0x36d1bf]=_0x4b4a6e['split']('\x20'),_0x4bc0c5=(0x0,Vs[_0x6eadec(0x5ac)])(_0x19dc8b,_0x36d1bf,{'shell':!0x0});_0x4bc0c5[_0x6eadec(0x222)]['on'](_0x6eadec(0x1d5),_0x16e855=>{const _0x50b9fb=_0x6eadec;console[_0x50b9fb(0x4b3)](_0x5e6ba0+'\x20install\x20output:\x20'+_0x16e855);}),_0x4bc0c5[_0x6eadec(0x26f)]['on'](_0x6eadec(0x1d5),_0x225273=>{const _0x193987=_0x6eadec;console[_0x193987(0x41f)](_0x5e6ba0+_0x193987(0x38a)+_0x225273);}),_0x4bc0c5['on']('exit',_0x1a0a57=>{const _0x4305a6=_0x6eadec;_0x1a0a57!==0x0?(console[_0x4305a6(0x41f)](_0x4305a6(0x53a)+_0x5e6ba0+'.\x20Código\x20de\x20saída\x20'+_0x1a0a57),_0x33f10d(!0x1)):_0x33f10d(!0x0);});}});});}var Ri='https://github.com/uazapi/uazapi.git',Ai=Zt[a0_0x3e22c7(0x30c)][a0_0x3e22c7(0x72a)](__dirname,'./.git/config'),Ne=null;function Ii(){return new Promise((_0x13eada,_0x477cf0)=>{const _0x4f0b93=a0_0x33a7;ke[_0x4f0b93(0x30c)][_0x4f0b93(0x1ab)](Ai,_0x4f0b93(0x2b3),(_0x17cc0c,_0x5b754b)=>{const _0x92da11=_0x4f0b93;if(_0x17cc0c){Ne=_0x17cc0c,_0x13eada();return;}_o[_0x92da11(0x30c)][_0x92da11(0x251)](_0x5b754b)['remote\x20\x22origin\x22'][_0x92da11(0x72e)]===Ri?(Ne=null,_0x13eada()):(Ne=new Error(_0x92da11(0x3ee)),_0x13eada());});});}async function Di(){const _0x43b3ee=a0_0x3e22c7;try{await Ii(),await Us();}catch(_0x1cc128){console[_0x43b3ee(0x41f)]('Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20'+_0x1cc128),process[_0x43b3ee(0x702)](0x1);}}Di();async function $o(){const _0x203ff9=a0_0x3e22c7;let _0x1690c0;try{_0x1690c0=(await Le[_0x203ff9(0x30c)][_0x203ff9(0x17f)](_0x203ff9(0x3e8)))[_0x203ff9(0x1d5)]['ip'];}catch(_0x214954){console[_0x203ff9(0x41f)](_0x214954);try{_0x1690c0=(await Le[_0x203ff9(0x30c)]['get'](_0x203ff9(0x36b)))[_0x203ff9(0x1d5)]['ip'];}catch(_0x350209){console[_0x203ff9(0x41f)](_0x350209);try{_0x1690c0=(await Le['default'][_0x203ff9(0x17f)](_0x203ff9(0x57a)))[_0x203ff9(0x1d5)][_0x203ff9(0x6f6)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0xc568c0){return console[_0x203ff9(0x41f)](_0xc568c0),!0x1;}}}return _0x1690c0;}async function Pi(){const _0x3ff684=a0_0x3e22c7;Ne||(await Ro(_0x3ff684(0x5ec),'sudo\x20apt\x20install\x20-y\x20redis-server',_0x3ff684(0x1e1)),await Ro('ffmpeg',_0x3ff684(0x3fe),_0x3ff684(0x647)));}var Ao=0x0;async function Oi(){const _0x1b97ad=a0_0x3e22c7;Pi();let _0x5a6fc1=await Ls(_0x1b97ad(0x5ec),_0x1b97ad(0x1e1)),_0x32ec0d=await Ls(_0x1b97ad(0x4b0),_0x1b97ad(0x647)),_0x183381=y[_0x1b97ad(0x17f)](_0x1b97ad(0x612)),_0x4c5f3=y[_0x1b97ad(0x17f)]('AUTOUPDATE'),_0xdf0bd4=y['get'](_0x1b97ad(0x32f))[_0x1b97ad(0x1b2)]['KEY'],_0x4ac419=y[_0x1b97ad(0x17f)](_0x1b97ad(0x2f9)),_0x445a7a=await $o(),_0x2fb1c0=y[_0x1b97ad(0x17f)](_0x1b97ad(0x511))['PORT'],_0x1b79a3=y[_0x1b97ad(0x17f)](_0x1b97ad(0x180));try{let _0x2483a0={'ip':_0x445a7a||null,'redis_instalado':_0x5a6fc1||null,'ffmpeg_instalado':_0x32ec0d||null,'redis_enable':_0x183381?.[_0x1b97ad(0x5d8)]||null,'autoupdate':_0x4c5f3||null,'apikey':_0xdf0bd4||null,'ssl':_0x4ac419?.[_0x1b97ad(0x5db)]||null,'lastupdate':ko||null,'port':_0x2fb1c0||null,'phone':_0x1b79a3||null,'gitInstallError':Ne?.[_0x1b97ad(0x1f0)]||null};console[_0x1b97ad(0x4b3)](_0x1b97ad(0x551),_0x2483a0['ip']);for(let _0x5e0599 in _0x2483a0)_0x2483a0['hasOwnProperty'](_0x5e0599)&&_0x5e0599!=='ip'&&(_0x2483a0[_0x5e0599]=JSON['stringify'](_0x2483a0[_0x5e0599]));return(await Le[_0x1b97ad(0x30c)][_0x1b97ad(0x5c7)](_0x1b97ad(0x23d),_0x2483a0))[_0x1b97ad(0x1d5)];}catch(_0x2a0a17){return console[_0x1b97ad(0x41f)](_0x2a0a17),!0x1;}finally{}}var $s=!0x1,ko=0x209,_i=0x3,Io=0x1b7740;async function Us(){const _0x4e3548=a0_0x3e22c7;if(!await $o())return console[_0x4e3548(0x41f)]('Não\x20foi\x20possível\x20obter\x20o\x20endereço\x20IP,\x20interrompendo\x20a\x20aplicação.'),_0x4e3548(0x60a);let _0x1070af=await Oi();if(_0x1070af){if(_0x1070af[_0x4e3548(0x273)][_0x4e3548(0x469)]===!0x0){let _0x1f1e61=y['get'](_0x4e3548(0x479));Ne===null&&_0x1f1e61!==_0x4e3548(0x2ce)&&_0x1070af[_0x4e3548(0x273)][_0x4e3548(0x318)]-ko>0x0&&await xi(),$s||($s=!0x0,Mi());}else return console[_0x4e3548(0x4b3)](_0x4e3548(0x30d)),$s&&(console[_0x4e3548(0x4b3)](_0x4e3548(0x32e)),process[_0x4e3548(0x702)]()),'LICENSE_INVALID';let _0x3fd50e=0x24*0x3c*0x3c,_0x85df3e=_0x1070af['response'][_0x4e3548(0x59f)]>_0x3fd50e?_0x3fd50e:_0x1070af[_0x4e3548(0x273)]['segundos'],_0x567f48=Number(_0x85df3e);if(isNaN(_0x567f48)){console[_0x4e3548(0x41f)](_0x4e3548(0x6ad));return;}let _0x3f1ce9=Math['floor'](_0x567f48/0xe10),_0x4b7e86=Math[_0x4e3548(0x6cb)](_0x567f48%0xe10/0x3c),_0x46d6f6=new Date(Date[_0x4e3548(0x43b)]()+_0x567f48*0x3e8);setTimeout(Us,_0x567f48*0x3e8);let _0x3d074e=_0xbfed1c=>_0xbfed1c[_0x4e3548(0x63b)]()[_0x4e3548(0x3b5)](0x2,'0'),_0x39309d='Próxima\x20verificação\x20em\x20'+_0x3d074e(_0x3f1ce9)+_0x4e3548(0x488)+_0x3d074e(_0x4b7e86)+_0x4e3548(0x595)+_0x3d074e(_0x46d6f6[_0x4e3548(0x5b2)]())+':'+_0x3d074e(_0x46d6f6[_0x4e3548(0x45b)]());console[_0x4e3548(0x4b3)](_0x39309d);}else{if(Ao++,Ao<_i)console[_0x4e3548(0x4b3)](_0x4e3548(0x306)+Io/0xea60+_0x4e3548(0x3a4)),setTimeout(Us,Io);else return console[_0x4e3548(0x41f)](_0x4e3548(0x385)),_0x4e3548(0x6a1);}}async function xi(){const _0x4a1972=a0_0x3e22c7;console[_0x4a1972(0x4b3)](_0x4a1972(0x37d));let _0x47d105=(0x0,Vs['spawn'])('git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm',{'shell':!0x0});_0x47d105[_0x4a1972(0x222)]['on'](_0x4a1972(0x1d5),_0x1e429f=>{const _0x30a596=_0x4a1972;console[_0x30a596(0x4b3)](_0x30a596(0x603)+_0x1e429f);}),_0x47d105[_0x4a1972(0x26f)]['on'](_0x4a1972(0x1d5),_0x3428d6=>{const _0x31490f=_0x4a1972;console[_0x31490f(0x41f)](_0x31490f(0x59e)+_0x3428d6);}),_0x47d105['on'](_0x4a1972(0x702),_0x588532=>{const _0x131cc3=_0x4a1972;_0x588532!==0x0?console[_0x131cc3(0x41f)](_0x131cc3(0x4c6)+_0x588532):console[_0x131cc3(0x4b3)]('Sistema\x20atualizado\x20com\x20sucesso!'),console[_0x131cc3(0x4b3)]('Parando\x20aplicação...'),setTimeout(()=>process[_0x131cc3(0x702)](),0x2710);});}