const a0_0x1df5a5=a0_0x5a64;(function(_0x29571a,_0x2f2825){const _0x5acfae=a0_0x5a64,_0x271bfa=_0x29571a();while(!![]){try{const _0x37d205=parseInt(_0x5acfae(0x40a))/0x1*(-parseInt(_0x5acfae(0x7c1))/0x2)+-parseInt(_0x5acfae(0x1e7))/0x3+-parseInt(_0x5acfae(0x7eb))/0x4*(parseInt(_0x5acfae(0x444))/0x5)+parseInt(_0x5acfae(0x5ad))/0x6+parseInt(_0x5acfae(0x5e9))/0x7+-parseInt(_0x5acfae(0x3b5))/0x8+parseInt(_0x5acfae(0x8ce))/0x9*(parseInt(_0x5acfae(0x509))/0xa);if(_0x37d205===_0x2f2825)break;else _0x271bfa['push'](_0x271bfa['shift']());}catch(_0x56f602){_0x271bfa['push'](_0x271bfa['shift']());}}}(a0_0x161d,0x677e1));var Wi=Object[a0_0x1df5a5(0x38e)],Ve=Object[a0_0x1df5a5(0x4eb)],zi=Object[a0_0x1df5a5(0x5c5)],Hi=Object[a0_0x1df5a5(0x245)],Ki=Object[a0_0x1df5a5(0x77f)],Qi=Object[a0_0x1df5a5(0x741)][a0_0x1df5a5(0x6ac)],Yi=(_0x1b145c,_0x436df7)=>{for(var _0xa7a20 in _0x436df7)Ve(_0x1b145c,_0xa7a20,{'get':_0x436df7[_0xa7a20],'enumerable':!0x0});},Bs=(_0x394ab7,_0x3b80f2,_0x33a344,_0x116feb)=>{const _0x105bdb=a0_0x1df5a5;if(_0x3b80f2&&typeof _0x3b80f2==_0x105bdb(0x1b3)||typeof _0x3b80f2==_0x105bdb(0x405)){for(let _0x1c4e0d of Hi(_0x3b80f2))!Qi['call'](_0x394ab7,_0x1c4e0d)&&_0x1c4e0d!==_0x33a344&&Ve(_0x394ab7,_0x1c4e0d,{'get':()=>_0x3b80f2[_0x1c4e0d],'enumerable':!(_0x116feb=zi(_0x3b80f2,_0x1c4e0d))||_0x116feb['enumerable']});}return _0x394ab7;},I=(_0x4389ea,_0x53bb98,_0x57ea19)=>(_0x57ea19=_0x4389ea!=null?Wi(Ki(_0x4389ea)):{},Bs(_0x53bb98||!_0x4389ea||!_0x4389ea[a0_0x1df5a5(0x64a)]?Ve(_0x57ea19,a0_0x1df5a5(0x686),{'value':_0x4389ea,'enumerable':!0x0}):_0x57ea19,_0x4389ea)),Xi=_0x55f486=>Bs(Ve({},'__esModule',{'value':!0x0}),_0x55f486),gr={};Yi(gr,{'fullURL':()=>Gs,'subdomain':()=>se}),module['exports']=Xi(gr);var Ui=I(require(a0_0x1df5a5(0x330))),zs=require('fs'),Hs=require(a0_0x1df5a5(0x4de)),Ks=require(a0_0x1df5a5(0x2e2)),Ge=require('path'),ce=process['cwd'](),Se=(0x0,Ge[a0_0x1df5a5(0x4bc)])(ce,a0_0x1df5a5(0x8a3)),Ws=(0x0,Ge[a0_0x1df5a5(0x4bc)])(ce,a0_0x1df5a5(0x4ad)),fn=(0x0,Ge[a0_0x1df5a5(0x4bc)])(ce,'store',a0_0x1df5a5(0x575)),us=class{constructor(){this['loadEnv']();}['get'](_0x50329e){const _0x1b88a3=a0_0x1df5a5;return this[_0x1b88a3(0x57b)][_0x50329e];}[a0_0x1df5a5(0x1ea)](){const _0x370e62=a0_0x1df5a5;this[_0x370e62(0x57b)]=process[_0x370e62(0x57b)]?.['DOCKER_ENV']!==_0x370e62(0x8d4)?this[_0x370e62(0x669)]():this['envProcess'](),process[_0x370e62(0x57b)]?.[_0x370e62(0x321)]===_0x370e62(0x8d4)&&(this[_0x370e62(0x57b)]['SERVER'][_0x370e62(0x4f0)]=_0x370e62(0x31a),this[_0x370e62(0x57b)][_0x370e62(0x3f7)][_0x370e62(0x43d)]=Number[_0x370e62(0x59a)](process[_0x370e62(0x57b)]?.[_0x370e62(0x956)]??_0x370e62(0x43a)));}[a0_0x1df5a5(0x669)](){const _0x1b0504=a0_0x1df5a5;return(0x0,Hs['load'])((0x0,zs['readFileSync'])((0x0,Ks[_0x1b0504(0x4bc)])(Ws,_0x1b0504(0x25c)),{'encoding':_0x1b0504(0x4ee)}));}[a0_0x1df5a5(0x529)](){const _0x383953=a0_0x1df5a5;return{'SERVER':{'TYPE':process[_0x383953(0x57b)][_0x383953(0x92d)],'PORT':Number[_0x383953(0x59a)](process[_0x383953(0x57b)][_0x383953(0x956)]),'URL':process[_0x383953(0x57b)][_0x383953(0x903)]},'CORS':{'ORIGIN':process[_0x383953(0x57b)][_0x383953(0x472)][_0x383953(0x709)](','),'METHODS':process['env'][_0x383953(0x83e)][_0x383953(0x709)](','),'CREDENTIALS':process[_0x383953(0x57b)]?.[_0x383953(0x338)]===_0x383953(0x8d4)},'SSL_CONF':{'PRIVKEY':process[_0x383953(0x57b)]?.[_0x383953(0x4d5)],'FULLCHAIN':process['env']?.[_0x383953(0x81f)]},'STORE':{'CLEANING_INTERVAL':Number[_0x383953(0x59b)](process[_0x383953(0x57b)]?.['STORE_CLEANING_TERMINAL'])?Number[_0x383953(0x59a)](process[_0x383953(0x57b)][_0x383953(0x753)]):void 0x0,'MESSAGES':process['env']?.[_0x383953(0x57d)]===_0x383953(0x8d4),'CONTACTS':process['env']?.['STORE_CONTACTS']===_0x383953(0x8d4),'CHATS':process['env']?.['STORE_CHATS']==='true'},'DATABASE':{'CONNECTION':{'HOST':process[_0x383953(0x57b)]?.['DATABASE_CONNECTION_HOST'],'PORT':Number[_0x383953(0x59a)](process[_0x383953(0x57b)]?.[_0x383953(0x83a)]),'USER':process[_0x383953(0x57b)][_0x383953(0x28f)],'PASSWORD':process['env'][_0x383953(0x8ab)],'URI':process[_0x383953(0x57b)]['DATABASE_CONNECTION_URI'],'DB_PREFIX_NAME':process[_0x383953(0x57b)][_0x383953(0x2e5)]},'ENABLED':process[_0x383953(0x57b)]?.['DATABASE_ENABLED']===_0x383953(0x8d4)},'REDIS':{'ENABLED':process['env']?.[_0x383953(0x674)]==='true','URI':process['env'][_0x383953(0x54b)]||'redis://127.0.0.1:6379','PREFIX_KEY':process[_0x383953(0x57b)]['REDIS_PREFIX_KEY']||_0x383953(0x3b6)},'LOG':{'LEVEL':process[_0x383953(0x57b)]?.['LOG_LEVEL'][_0x383953(0x709)](','),'COLOR':process[_0x383953(0x57b)]?.[_0x383953(0x773)]===_0x383953(0x8d4)},'PROXY':process[_0x383953(0x57b)]?.[_0x383953(0x46d)]===_0x383953(0x8d4),'AUTHENTICATION':{'TYPE':process[_0x383953(0x57b)][_0x383953(0x84f)],'API_KEY':{'KEY':process[_0x383953(0x57b)][_0x383953(0x8bb)]},'JWT':{'EXPIRIN_IN':Number[_0x383953(0x59b)](process[_0x383953(0x57b)]?.[_0x383953(0x5ec)])?Number[_0x383953(0x59a)](process[_0x383953(0x57b)]['AUTHENTICATION_JWT_EXPIRIN_IN']):0xe10,'SECRET':process['env'][_0x383953(0x323)]}}};}},S=new us(),ji=I(require(a0_0x1df5a5(0x5c9))),ye=I(require('express')),Vs=require('path'),ds=I(require(a0_0x1df5a5(0x8f0))),ps=(_0x2353e5=>(_0x2353e5[a0_0x1df5a5(0x882)]=a0_0x1df5a5(0x45a),_0x2353e5[a0_0x1df5a5(0x459)]=a0_0x1df5a5(0x86b),_0x2353e5['WARN']=a0_0x1df5a5(0x658),_0x2353e5[a0_0x1df5a5(0x608)]=a0_0x1df5a5(0x382),_0x2353e5[a0_0x1df5a5(0x7a4)]='\x1b[36m',_0x2353e5[a0_0x1df5a5(0x920)]=a0_0x1df5a5(0x66b),_0x2353e5[a0_0x1df5a5(0x591)]='\x1b[30m',_0x2353e5))(ps||{}),Qs=(_0x1f070b=>(_0x1f070b[a0_0x1df5a5(0x882)]=a0_0x1df5a5(0x24e),_0x1f070b[a0_0x1df5a5(0x591)]=a0_0x1df5a5(0x76a),_0x1f070b[a0_0x1df5a5(0x459)]=a0_0x1df5a5(0x49a),_0x1f070b[a0_0x1df5a5(0x31b)]=a0_0x1df5a5(0x350),_0x1f070b[a0_0x1df5a5(0x608)]=a0_0x1df5a5(0x677),_0x1f070b[a0_0x1df5a5(0x7a4)]=a0_0x1df5a5(0x6e9),_0x1f070b[a0_0x1df5a5(0x920)]=a0_0x1df5a5(0x770),_0x1f070b))(Qs||{}),Ys=(_0x546cc2=>(_0x546cc2[a0_0x1df5a5(0x882)]=a0_0x1df5a5(0x882),_0x546cc2[a0_0x1df5a5(0x31b)]=a0_0x1df5a5(0x31b),_0x546cc2[a0_0x1df5a5(0x459)]=a0_0x1df5a5(0x459),_0x546cc2[a0_0x1df5a5(0x591)]=a0_0x1df5a5(0x591),_0x546cc2[a0_0x1df5a5(0x608)]=a0_0x1df5a5(0x608),_0x546cc2[a0_0x1df5a5(0x7a4)]='DEBUG',_0x546cc2[a0_0x1df5a5(0x920)]=a0_0x1df5a5(0x920),_0x546cc2))(Ys||{}),Xs=(_0x1da671=>(_0x1da671[a0_0x1df5a5(0x882)]=a0_0x1df5a5(0x473),_0x1da671['INFO']=a0_0x1df5a5(0x217),_0x1da671[a0_0x1df5a5(0x31b)]=a0_0x1df5a5(0x2bb),_0x1da671['DARK']=a0_0x1df5a5(0x3fa),_0x1da671[a0_0x1df5a5(0x608)]='\x1b[41m',_0x1da671[a0_0x1df5a5(0x7a4)]=a0_0x1df5a5(0x2f3),_0x1da671[a0_0x1df5a5(0x920)]=a0_0x1df5a5(0x7bc),_0x1da671))(Xs||{}),$=class{constructor(_0x468055=a0_0x1df5a5(0x3b0)){this['context']=_0x468055,this['configService']=S;}[a0_0x1df5a5(0x7c4)](_0x59ffe7){const _0x5b6563=a0_0x1df5a5;this[_0x5b6563(0x821)]=_0x59ffe7;}[a0_0x1df5a5(0x71e)](_0x377c86,_0x3bb292){const _0x12001b=a0_0x1df5a5;let _0x2a68ba=[];this[_0x12001b(0x4e6)][_0x12001b(0x3be)](_0x12001b(0x882))[_0x12001b(0x7d7)][_0x12001b(0x504)](_0x683206=>_0x2a68ba[_0x12001b(0x6cd)](Ys[_0x683206]));let _0x11ac58=typeof _0x377c86;_0x2a68ba[_0x12001b(0x5f2)](_0x3bb292)&&(S[_0x12001b(0x3be)](_0x12001b(0x882))['COLOR']?(console['log'](_0x12001b(0x39a)+Qs[_0x3bb292],_0x12001b(0x2f5),(0x0,ds[_0x12001b(0x686)])()[_0x12001b(0x358)](_0x12001b(0x2ee)),_0x12001b(0x229),ps[_0x3bb292]+Xs[_0x3bb292]+_0x12001b(0x39a),_0x3bb292+_0x12001b(0x721),_0x12001b(0x29d),this[_0x12001b(0x821)]+'\x1b[0m',ps[_0x3bb292],_0x11ac58!==_0x12001b(0x1b3)?_0x377c86:'','\x1b[0m'),_0x11ac58===_0x12001b(0x1b3)&&console[_0x12001b(0x485)](_0x377c86,'\x0a')):console[_0x12001b(0x485)]((0x0,ds[_0x12001b(0x686)])()['format'](_0x12001b(0x1aa)),_0x3bb292+'\x20',''+this[_0x12001b(0x821)],_0x377c86));}[a0_0x1df5a5(0x485)](_0x44d973){const _0x31adaa=a0_0x1df5a5;this[_0x31adaa(0x71e)](_0x44d973,_0x31adaa(0x882));}[a0_0x1df5a5(0x4f4)](_0x3873cc){const _0x4486c4=a0_0x1df5a5;this[_0x4486c4(0x71e)](_0x3873cc,_0x4486c4(0x459));}[a0_0x1df5a5(0x8c0)](_0x3bb463){const _0x2b595e=a0_0x1df5a5;this[_0x2b595e(0x71e)](_0x3bb463,'WARN');}[a0_0x1df5a5(0x398)](_0x4ac751){const _0x14a74e=a0_0x1df5a5;this[_0x14a74e(0x71e)](_0x4ac751,_0x14a74e(0x608));}['verbose'](_0x11a6dd){const _0x1a962a=a0_0x1df5a5;this['console'](_0x11a6dd,_0x1a962a(0x920));}[a0_0x1df5a5(0x29f)](_0x4bb9b9){const _0x54d2f4=a0_0x1df5a5;this[_0x54d2f4(0x71e)](_0x4bb9b9,_0x54d2f4(0x7a4));}[a0_0x1df5a5(0x5e5)](_0x4254b3){const _0xa74050=a0_0x1df5a5;this['console'](_0x4254b3,_0xa74050(0x591));}};function Zs(){process['on']('uncaughtException',(_0x4892f4,_0x1ef867)=>{const _0xab51d7=a0_0x5a64;new $('uncaughtException')[_0xab51d7(0x398)]({'origin':_0x1ef867,'stderr':process['stderr']['fd'],'error':_0x4892f4});}),process['on']('unhandledRejection',(_0x270b61,_0x1a107d)=>{const _0x578d33=a0_0x5a64;new $(_0x578d33(0x92c))['error']({'origin':_0x1a107d,'stderr':process[_0x578d33(0x4be)]['fd'],'error':_0x270b61});});}var ea=I(require(a0_0x1df5a5(0x626))),hs=new ea['default']({'delimiter':'.','newListener':!0x1,'ignoreErrors':!0x1}),Me=require('mongoose'),Te=I(require('mongoose')),Be=new $(a0_0x1df5a5(0x479)),L=S['get']('DATABASE'),T=L[a0_0x1df5a5(0x765)]?L['CONNECTION'][a0_0x1df5a5(0x6d2)]?Te['default'][a0_0x1df5a5(0x823)](L[a0_0x1df5a5(0x3b3)]['URI'],{'dbName':L[a0_0x1df5a5(0x3b3)]['DB_PREFIX_NAME']+'-whatsapp-api'}):Te['default'][a0_0x1df5a5(0x823)](a0_0x1df5a5(0x931)+L[a0_0x1df5a5(0x3b3)][a0_0x1df5a5(0x460)]+':'+L[a0_0x1df5a5(0x3b3)][a0_0x1df5a5(0x43d)]+a0_0x1df5a5(0x42e),{'user':L[a0_0x1df5a5(0x3b3)][a0_0x1df5a5(0x284)],'pass':L['CONNECTION'][a0_0x1df5a5(0x7ab)],'dbName':L[a0_0x1df5a5(0x3b3)][a0_0x1df5a5(0x389)]+a0_0x1df5a5(0x4ef)}):null;L[a0_0x1df5a5(0x765)]&&Be['info'](a0_0x1df5a5(0x530)+T['$dbName']);var Y=L[a0_0x1df5a5(0x765)]?L[a0_0x1df5a5(0x3b3)][a0_0x1df5a5(0x6d2)]?Te['default']['createConnection'](L[a0_0x1df5a5(0x3b3)][a0_0x1df5a5(0x6d2)],{'dbName':a0_0x1df5a5(0x4c1)}):Te['default'][a0_0x1df5a5(0x823)](a0_0x1df5a5(0x931)+L[a0_0x1df5a5(0x3b3)][a0_0x1df5a5(0x460)]+':'+L[a0_0x1df5a5(0x3b3)][a0_0x1df5a5(0x43d)]+'?authSource=admin&readPreference=primary&directConnection=true',{'user':L['CONNECTION'][a0_0x1df5a5(0x284)],'pass':L['CONNECTION'][a0_0x1df5a5(0x7ab)],'dbName':a0_0x1df5a5(0x774)}):null;Y&&Be[a0_0x1df5a5(0x4f4)](a0_0x1df5a5(0x530)+Y[a0_0x1df5a5(0x5cd)]),process['on']('beforeExit',()=>{const _0x2aa0b0=a0_0x1df5a5;T&&T[_0x2aa0b0(0x261)](()=>{const _0x3bf3c3=_0x2aa0b0;Be[_0x3bf3c3(0x4f4)](_0x3bf3c3(0x375));}),Y&&Y[_0x2aa0b0(0x261)](()=>{const _0x11e7ee=_0x2aa0b0;Be[_0x11e7ee(0x4f4)]('CacheContacts\x20database\x20connection\x20closed.');});});var Zi=new Me['Schema']({'_id':{'type':String,'_id':!0x0},'value':{'type':String}}),eo=new Me[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'_id':!0x0},'remoteJid':{'type':String},'pushName':{'type':String},'text':{'type':String},'type':{'type':String},'when':{'type':Number}}),to=new Me[(a0_0x1df5a5(0x469))]({'id':{'type':String},'owner':{'type':String},'subject':{'type':String},'subjectOwner':{'type':String},'subjectTime':{'type':Number},'creation':{'type':Number},'desc':{'type':String},'descOwner':{'type':String},'descId':{'type':String},'restrict':{'type':Boolean},'announce':{'type':Boolean},'memberAddMode':{'type':Boolean},'joinApprovalMode':{'type':Boolean},'isCommunity':{'type':Boolean},'isCommunityAnnounce':{'type':Boolean},'size':{'type':Number},'participants':{'type':[Object],'default':[]},'ephemeralDuration':{'type':Number},'author':{'type':String},'inviteCode':{'type':String},'image':{'type':String},'lastUpdate':{'type':Number},'isAdmin':{'type':Boolean},'canSendMessage':{'type':Boolean},'awaitingApproval':{'type':[Object],'default':[]},'lastFetchAwaitingApproval':{'type':Number}},{'_id':!0x1}),so=new Me[(a0_0x1df5a5(0x469))]({'nome':{'type':String},'nomecompleto':{'type':String},'email':{'type':String},'cpf':{'type':String},'status':{'type':String},'notas':{'type':String},'tags':{'type':[String],'default':[]},'etiquetas':{'type':[String],'default':[]},'desativadoFluxoAte':{'type':Number},'atendimentoAberto':{'type':Boolean},'responsavelid':{'type':String},'customFields':{'type':[Zi],'default':[]}},{'_id':!0x1}),ao=new Me[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'group':{'type':Boolean,'default':!0x1},'archived':{'type':Boolean,'default':!0x1},'name':{'type':String},'imagechat':{'type':String},'lastmsg':{'type':Number,'default':0x0},'unreadcount':{'type':Number,'default':0x0},'lastcache':{'type':Number,'default':0x0},'leadInfo':{'type':so,'default':{}},'contactname':{'type':String},'status':{'type':String},'isBusiness':{'type':Boolean},'email':{'type':String},'description':{'type':String},'website':{'type':String},'imported':{'type':Boolean},'labels':{'type':[String],'default':[]},'ephemeralExpiration':{'type':Number},'muteEndTime':{'type':Number},'lastMessage':{'type':eo},'groupdata':{'type':to,'default':{}},'group_isCommunity':{'type':Boolean},'group_announce':{'type':Boolean},'group_size':{'type':Number}}),ta=_0xd40a34=>{const _0x4d2410=a0_0x1df5a5;let _0x4d7485='z_'+_0xd40a34+'_Chats';return T?.['model'](_0x4d2410(0x698),ao,_0x4d7485);},sa=require('mongoose'),io=new sa['Schema']({'_id':{'type':String,'_id':!0x0},'pushName':{'type':String,'minlength':0x1},'profilePictureUrl':{'type':String},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),aa=_0x1d88e2=>{const _0x12bac8=a0_0x1df5a5;let _0x324d49='z_'+_0x1d88e2+_0x12bac8(0x55d);return T?.[_0x12bac8(0x7c5)](_0x12bac8(0x441),io,_0x324d49);},ia=require(a0_0x1df5a5(0x4c9)),gs=class{},oo=new ia[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'pictureUrl':{'type':String},'lastUpdate':{'type':Number,'default':0x0}}),oa=Y?.[a0_0x1df5a5(0x7c5)](gs[a0_0x1df5a5(0x5d3)],oo,a0_0x1df5a5(0x628)),ra=require(a0_0x1df5a5(0x4c9)),ms=class{},ro=new ra[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'_id':!0x0},'ip':{'type':String}}),We=Y?.[a0_0x1df5a5(0x7c5)](ms['name'],ro,a0_0x1df5a5(0x8a3)),ws=require(a0_0x1df5a5(0x4c9)),fs=class{},no=new ws[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'_id':!0x0},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),co=new ws['Schema']({'_id':{'type':String},'key':{'id':{'type':String,'required':!0x0,'minlength':0x1},'remoteJid':{'type':String,'required':!0x0,'minlength':0x1},'fromMe':{'type':Boolean,'required':!0x0},'participant':{'type':String,'minlength':0x1}},'pushName':{'type':String},'isGroup':{'type':Boolean},'profilePictureUrl':{'type':String},'participant':{'type':String},'message':{'type':Object},'messageType':{'type':String},'message_normalized':{'type':Object},'source':{'type':String},'messageTimestamp':{'type':Number,'required':!0x0},'owner':{'type':String,'required':!0x0,'minlength':0x1},'status':{'type':String},'expiration':{'type':Number}}),na=Y?.[a0_0x1df5a5(0x7c5)](fs[a0_0x1df5a5(0x5d3)],co,'messagesLogs'),ca=_0x1cd878=>{const _0x479629=a0_0x1df5a5;let _0x53a971='z_'+_0x1cd878+_0x479629(0x38b);return T?.[_0x479629(0x7c5)](_0x479629(0x67a),no,_0x53a971);},la=require(a0_0x1df5a5(0x4c9)),ys=class{},lo=new la['Schema']({'_id':{'type':String,'_id':!0x0},'jwt':{'type':String,'minlength':0x1},'apikey':{'type':String,'minlength':0x1},'owner':{'type':String},'online':{'type':Boolean},'lastDisconnect':{'type':Number},'ip':{'type':String}}),ua=T?.['model'](ys[a0_0x1df5a5(0x5d3)],lo,a0_0x1df5a5(0x46f)),da=require('mongoose'),bs=class{},pa=new da[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'_id':!0x0},'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0},'groups_ignore':{'type':Boolean,'required':!0x0},'flowActive':{'type':Boolean},'flowIgnoreGroups':{'type':Boolean},'flowPrefixCommand':{'type':String,'maxlength':0x1},'flowStopConversation':{'type':String},'flowStopMinutes':{'type':Number}});pa[a0_0x1df5a5(0x2ce)](a0_0x1df5a5(0x67c),function(_0x6df62d){const _0x1dbdc1=a0_0x1df5a5;delete this[_0x1dbdc1(0x3e3)],delete this[_0x1dbdc1(0x491)],delete this['flowPrefixCommand'],delete this[_0x1dbdc1(0x910)],delete this[_0x1dbdc1(0x5f0)],_0x6df62d();});var ha=T?.['model'](bs[a0_0x1df5a5(0x5d3)],pa,a0_0x1df5a5(0x5fc)),P=require('mongoose'),Ss=require(a0_0x1df5a5(0x913)),ze=class{},Ms=class{},ma=new P[(a0_0x1df5a5(0x469))]({'title':{'type':String},'default':{'type':Boolean},'x':{'type':Number},'y':{'type':Number}}),Cs=new P[(a0_0x1df5a5(0x469))]({'order':{'type':Number},'blockId':{'type':String,'required':!0x0},'option':{'type':String},'optionDescription':{'type':String},'next_groupId':{'type':String}}),uo=new P[(a0_0x1df5a5(0x469))]({'command':{'type':String},'remoteJid':{'type':String},'text':{'type':String},'delay':{'type':Number},'linkPreview':{'type':Boolean},'audio':{'type':String},'mediatype':{'type':String},'fileName':{'type':String},'caption':{'type':String},'media':{'type':String},'name':{'type':String},'address':{'type':String},'latitude':{'type':Number},'longitude':{'type':Number},'fullName':{'type':String},'phoneNumber':{'type':String},'blockId':{'type':String},'menuType':{'type':String,'default':a0_0x1df5a5(0x877)},'footerText':{'type':String},'buttonText':{'type':String,'default':a0_0x1df5a5(0x685)},'menuIgnoreNonVotes':{'type':Boolean,'default':!0x1},'menuExpiredMessage':{'type':String,'default':a0_0x1df5a5(0x884)},'pollErrorMessage':{'type':String,'default':'Por\x20favor,\x20responda\x20à\x20última\x20mensagem\x20enviada,\x20selecionando\x20sua\x20resposta\x20entre\x20as\x20opções\x20disponíveis,\x20sem\x20digitar\x20sua\x20resposta.'},'pollOnReplyDelete':{'type':Boolean,'default':!0x0},'pollMessageOnDelete':{'type':Boolean,'default':!0x0}},{'_id':!0x1}),fa=new P['Schema']({'order':{'type':Number,'required':!0x0},'OrAnd':{'type':String,'required':!0x0},'blockId':{'type':String,'required':!0x0},'firstValue':{'type':String,'required':!0x0},'expression':{'type':String,'required':!0x0},'secondValue':{'type':String}}),po=new P[(a0_0x1df5a5(0x469))]({'name':{'type':String},'url':{'type':String},'method':{'type':String},'header':{'type':Object,'_id':!0x1},'headerString':{'type':String},'body':{'type':Object,'_id':!0x1},'bodyString':{'type':String},'requestFile':{'type':Boolean},'bodyStringErrorParse':{'type':Boolean}},{'_id':!0x1}),ho=new P[(a0_0x1df5a5(0x469))]({'blockId':{'type':String},'order':{'type':Number},'onTime':{'type':Number},'activatedCount':{'type':Number},'error':{'type':Boolean},'errorLog':{'type':String},'messageId':{'type':String},'remoteJid':{'type':String},'fromMe':{'type':Boolean},'apiResponse':{'type':Object,'_id':!0x1},'apiResponseString':{'type':String},'variable':{'type':String},'oldValue':{'type':String},'newValue':{'type':String},'newStoppedUntil':{'type':Number},'moreLogs':{'type':[String]}}),Es=new P['Schema']({'folder':{'type':String},'name':{'type':String,'required':!0x0},'value':{'type':String},'doc':{'type':String},'leadInfo':{'type':Boolean}},{'_id':!0x1}),go=new P['Schema']({'flowName':{'type':String},'timeInMinutes':{'type':Number},'remoteJid':{'type':String}}),wa=new P['Schema']({'order':{'type':Number},'groupId':{'type':String,'required':!0x0},'type':{'type':String,'required':!0x0},'saveVariable':{'type':String},'next_groupId':{'type':String},'uazapi':{'type':uo},'apirequest':po,'stopMinutes':{'type':String},'goToFlow':{'type':String},'scheduleFlow':go,'stopIfLastReturnedError':{'type':Boolean},'maxActives':{'type':Number,'default':0x5},'stopMinutesMaxActives':{'type':Number,'default':0xa},'name':{'type':String},'doc':{'type':String},'awaitSeconds':{'type':String},'clearVariables':{'type':String}}),ya=new P[(a0_0x1df5a5(0x469))]({'firstValue':{'type':String},'order':{'type':Number},'editOperator':{'type':String},'secondValue':{'type':String},'replaceValue':{'type':String},'blockId':{'type':String,'required':!0x0}}),ba=new P['Schema']({'_id':{'type':String,'_id':!0x0},'owner':{'type':String,'required':!0x0},'shareFlow':{'type':Boolean,'default':!0x0},'globalShow':{'type':Boolean,'default':!0x1},'whoCanEdit':{'type':[String],'default':[]},'whoCanUse':{'type':[String],'default':[]},'variables':[Es],'blocks':[wa],'groups':[ma],'conditions':[fa],'varedits':[ya],'replyOptions':{'type':[Cs],'default':[]},'name':{'type':String},'testingWith':{'type':String},'default':{'type':Boolean,'default':!0x1},'readMessages':{'type':Boolean,'default':!0x1},'minutesToClose':{'type':Number,'default':0xa},'startCommandWord':{'type':String,'default':function(){const _0x3c35f9=a0_0x1df5a5;return _0x3c35f9(0x25b)+Math[_0x3c35f9(0x5ba)]()[_0x3c35f9(0x641)](0x24)['slice'](0x2,0x7);},'required':!0x1,'minlength':0x5},'global':{'type':String,'default':'false'},'startID':{'type':String,'default':()=>(0x0,Ss['v4'])()},'sharePass':{'type':String,'default':()=>(0x0,Ss['v4'])()},'shareOwners':{'type':[String],'default':[]}});ba[a0_0x1df5a5(0x2ce)]('findOneAndUpdate',function(_0x39e70a){const _0xb5d6c6=a0_0x1df5a5;let _0x1171d8=this[_0xb5d6c6(0x242)]();if(_0x1171d8&&typeof _0x1171d8==_0xb5d6c6(0x1b3)&&_0xb5d6c6(0x592)in _0x1171d8){let _0x38cf76=_0x1171d8['$set'];if(_0x38cf76){let _0x1985f6=new Set(),_0x21c849=new Set(_0x38cf76['variables']?.[_0xb5d6c6(0x948)](_0xf570c2=>_0xf570c2['name'])),_0x327369=JSON[_0xb5d6c6(0x28d)](_0x38cf76),_0x2c8c94=/{{(?!_)([^}]*)}}/g,_0x470e92;for(;(_0x470e92=_0x2c8c94[_0xb5d6c6(0x1cc)](_0x327369))!==null;)_0x21c849[_0xb5d6c6(0x664)](_0x470e92[0x1])||_0x1985f6['add'](_0x470e92[0x1]);_0x1985f6[_0xb5d6c6(0x673)]>0x0?(console[_0xb5d6c6(0x8c0)](_0xb5d6c6(0x81c),Array[_0xb5d6c6(0x439)](_0x1985f6)),_0x38cf76[_0xb5d6c6(0x468)]=Array[_0xb5d6c6(0x439)](_0x1985f6)):_0x38cf76[_0xb5d6c6(0x468)]=[],this['setUpdate']({'$set':_0x38cf76});}}_0x39e70a();});var Ce=T?.['model'](Ms['name'],ba,a0_0x1df5a5(0x21e)),mo=new P[(a0_0x1df5a5(0x469))]({'realVariables':{'type':Object,'_id':!0x1},'chatVariables':[Es],'lastReceivedMessage':{'type':Object,'_id':!0x1},'lastSendMessage':{'type':Object,'_id':!0x1},'lastCondition':{'type':Boolean},'lastBlockId':{'type':String},'blockLogs':[ho]},{'_id':!0x1}),fo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'flowId':{'type':String},'owner':{'type':String,'required':!0x0},'name':{'type':String,'required':!0x0},'sharePass':{'type':String},'default':{'type':Boolean,'required':!0x0},'minutesToClose':{'type':Number,'required':!0x0},'readMessages':{'type':Boolean,'required':!0x0},'testingWith':{'type':String,'required':!0x1},'startCommandWord':{'type':String,'required':!0x0,'minlength':0x5},'variables':[Es],'blocks':[wa],'groups':[ma],'conditions':[fa],'varedits':[ya],'replyOptions':{'type':[Cs],'default':[]},'chatLog':mo,'remoteJid':{'type':String},'lastInteraction':{'type':Number},'status':{'type':String,'default':a0_0x1df5a5(0x20b)},'waitingMenu_id':{'type':String},'waitingMenu_text':{'type':String},'waitingMenu_ExpiredMessage':{'type':String,'default':a0_0x1df5a5(0x884)},'waitingMenu_replyOptions':{'type':[Cs],'default':[]}}),Sa=_0x540d40=>{const _0x442fed=a0_0x1df5a5;let _0x2c62e2='z_'+_0x540d40+_0x442fed(0x29c);return T?.['model'](_0x442fed(0x595),fo,_0x2c62e2);},wo=new P[(a0_0x1df5a5(0x469))]({'idControl':{'type':String},'remoteJid':{'type':String},'error':{'type':Boolean},'id':{'type':String},'error_log':{'type':String},'log_timestamp':{'type':Number}},{'_id':!0x1}),ga=new P[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'id':!0x0},'idSchedule':{'type':String},'remoteJid':{'type':String},'order':{'type':Number},'type':{'type':String},'flow':{'type':String},'text':{'type':String},'delay':{'type':Number},'urlOrBase64':{'type':String},'linkPreview':{'type':Boolean},'fileName':{'type':String},'triedToSend':{'type':Boolean},'mediatype':{'type':String}}),yo=new P[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'_id':!0x0},'messages':{'type':[ga],'default':[]},'info':{'type':String},'when':{'type':Number},'status':{'type':String,'default':a0_0x1df5a5(0x333)},'delaySecMin':{'type':Number},'delaySecMax':{'type':Number},'owner':{'type':String},'messagesSend':{'type':[wo],'default':[]},'startSend':{'type':Number},'processUUID':{'type':String},'flowName':{'type':String},'remoteJidsRemaining':{'type':[String],'default':[]},'message':{'type':ga,'default':{}},'remoteJids':{'type':[String],'default':[]},'type':{'type':String}}),Ma=_0x482f7e=>{const _0x2694af=a0_0x1df5a5;let _0x4dfb17='z_'+_0x482f7e+'_ScheduleMessages';return T?.['model'](_0x2694af(0x792),yo,_0x4dfb17);},vs=class{},bo=new P[(a0_0x1df5a5(0x469))]({'_id':{'type':String},'order':{'type':Number},'command':{'type':String},'message':{'type':String}}),So=new P[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'_id':!0x0},'name':{'type':String},'startCommand':{'type':String},'default':{'type':Boolean},'minutesToClose':{'type':Number},'readMessages':{'type':Boolean},'testingWith':{'type':String},'canEdit':{'type':Boolean}}),Mo=new P[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'_id':!0x0},'order':{'type':Number},'name':{'type':String}}),Co=new P[(a0_0x1df5a5(0x469))]({'enabled':{'type':Boolean,'default':!0x1},'ignoreGroups':{'type':Boolean,'default':!0x0},'stopConversation':{'type':String,'default':a0_0x1df5a5(0x7e1)},'stopMinutes':{'type':Number,'default':0x14},'stopWhenYouSendMsg':{'type':Number,'default':0xa},'prefixCommand':{'type':String,'maxlength':0x1,'default':'!'}},{'_id':!0x1}),vo=new P['Schema']({'_id':{'type':String,'_id':!0x0},'fone':{'type':String},'name':{'type':String},'email':{'type':String},'role':{'type':String}}),Eo=new P[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'_id':!0x0},'agents':{'type':[vo]},'customFields':{'type':[Mo]},'flowConfig':{'type':Co,'default':{}},'flows':{'type':[So],'default':[]},'autoCompleteMessages':{'type':[bo],'default':[]}}),Ie=T?.['model'](vs[a0_0x1df5a5(0x5d3)],Eo,a0_0x1df5a5(0x48e)),Ca=require(a0_0x1df5a5(0x4c9)),No=new Ca[(a0_0x1df5a5(0x469))]({'_id':{'type':String},'name':{'type':String},'colorHex':{'type':String},'color':{'type':Number},'owner':{'type':String,'required':!0x0}}),va=_0x2b164d=>{const _0x4d59d4=a0_0x1df5a5;let _0x286963='z_'+_0x2b164d+_0x4d59d4(0x94c);return T?.['model']('LabelModel',No,_0x286963);},_=class{constructor(_0x2d7674){const _0xfea5a1=a0_0x1df5a5;this['dbSettings']=_0x2d7674[_0xfea5a1(0x3be)]('DATABASE');}};function A(_0x5e4601){const _0x247f6b=a0_0x1df5a5;let _0x2ce35c={};for(let [_0x591df6,_0x5de233]of Object['entries'](_0x5e4601))if(typeof _0x5de233==_0x247f6b(0x1b3)&&!Array['isArray'](_0x5de233)){for(let [_0x57beb6,_0x1429c8]of Object[_0x247f6b(0x8da)](_0x5de233))_0x2ce35c[_0x591df6+'.'+_0x57beb6]=_0x1429c8;}else _0x2ce35c[_0x591df6]=_0x5de233;return _0x2ce35c;}var He=class{constructor(_0x5bacae,_0x30814a,_0x49357b,_0x79fe55,_0x272daa,_0x2188cb,_0x5762b1,_0xe716f1,_0x453e8b,_0xe0f232,_0x148e83,_0x517041,_0x24dbb5,_0x1eef04){const _0x5c65a5=a0_0x1df5a5;this[_0x5c65a5(0x6c9)]=_0x5bacae,this[_0x5c65a5(0x947)]=_0x30814a,this[_0x5c65a5(0x572)]=_0x49357b,this[_0x5c65a5(0x78b)]=_0x79fe55,this[_0x5c65a5(0x272)]=_0x272daa,this['webhook']=_0x2188cb,this[_0x5c65a5(0x575)]=_0x5762b1,this[_0x5c65a5(0x921)]=_0xe716f1,this[_0x5c65a5(0x461)]=_0x453e8b,this[_0x5c65a5(0x557)]=_0xe0f232,this[_0x5c65a5(0x749)]=_0x148e83,this['scheduleMessage']=_0x517041,this[_0x5c65a5(0x8bd)]=_0x24dbb5,this['dbClient']=_0x1eef04;}get[a0_0x1df5a5(0x4c8)](){const _0x3c9c6d=a0_0x1df5a5;return this[_0x3c9c6d(0x313)];}},Ke=class{},Qe=class extends _{[a0_0x1df5a5(0x7fc)](_0x531f63){return ca(_0x531f63);}async['insert'](_0x58839d,_0x1b6cd7){const _0x145539=a0_0x1df5a5;if(_0x58839d[_0x145539(0x303)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x145539(0x7fc)](_0x1b6cd7)[_0x145539(0x293)]([..._0x58839d]))[_0x145539(0x303)]};}catch(_0x3e281b){return _0x3e281b;}}async[a0_0x1df5a5(0x756)](_0x30518e,_0x14e620){const _0xb9480=a0_0x1df5a5;try{let _0xba9ce8=this[_0xb9480(0x7fc)](_0x14e620),_0x26ed88=A(_0x30518e['where']);return await _0xba9ce8['find'](_0x26ed88)[_0xb9480(0x766)]({'messageTimestamp':-0x1})[_0xb9480(0x8e1)](_0x30518e?.[_0xb9480(0x8e1)]??0x0)[_0xb9480(0x489)]();}catch{return[];}}async[a0_0x1df5a5(0x1be)](_0x22dd8f,_0x3c83f0){const _0x2bf4d8=a0_0x1df5a5;try{let _0x1796f9=this[_0x2bf4d8(0x7fc)](_0x3c83f0),_0x29ded5=A(_0x22dd8f[_0x2bf4d8(0x7e5)]);await _0x1796f9[_0x2bf4d8(0x315)](_0x29ded5);}catch(_0x5b66c4){console[_0x2bf4d8(0x398)](_0x5b66c4);}}async['update'](_0x523112,_0x367d4b,_0x1920ec){const _0x4e79f2=a0_0x1df5a5;try{let _0x1674cf=this[_0x4e79f2(0x7fc)](_0x1920ec),_0x307f77=A(_0x523112[_0x4e79f2(0x7e5)]);return await _0x1674cf[_0x4e79f2(0x600)](_0x307f77,{'$set':_0x367d4b},{'new':!0x0});}catch(_0x5eb6f8){throw console['error'](_0x5eb6f8),_0x5eb6f8;}}async['insertMany'](_0x3477e1,_0x434518){const _0x1a10cf=a0_0x1df5a5;if(_0x3477e1[_0x1a10cf(0x303)]===0x0)return{'insertCount':0x0};try{return{'insertCount':(await this[_0x1a10cf(0x7fc)](_0x434518)[_0x1a10cf(0x293)]([..._0x3477e1]))[_0x1a10cf(0x303)]};}catch(_0x2f32e3){return console['log'](_0x1a10cf(0x77e),_0x2f32e3),_0x2f32e3;}}async[a0_0x1df5a5(0x73b)](_0x2528f5){const _0x261999=a0_0x1df5a5;try{return await this[_0x261999(0x7fc)](_0x2528f5)[_0x261999(0x8dd)][_0x261999(0x552)](),{'success':!0x0};}catch(_0x401c07){return console[_0x261999(0x398)](_0x401c07),{'success':!0x1,'error':_0x401c07};}}},Ds=I(require(a0_0x1df5a5(0x566))),w=I(require(a0_0x1df5a5(0x7d3))),Fe=require('fs'),j=I(require(a0_0x1df5a5(0x2e2))),K=I(require('axios')),Ti=require(a0_0x1df5a5(0x913)),Ii=I(require(a0_0x1df5a5(0x950))),_i=I(require(a0_0x1df5a5(0x26f))),Ea=[a0_0x1df5a5(0x64e),a0_0x1df5a5(0x247),a0_0x1df5a5(0x48d),'videoMessage',a0_0x1df5a5(0x4bb)],Na=['ephemeralMessage','documentWithCaptionMessage','viewOnceMessage',a0_0x1df5a5(0x6b8)],ks=require('os'),Ft=I(require(a0_0x1df5a5(0x4db))),Ue=require(a0_0x1df5a5(0x2ea)),Oi=require(a0_0x1df5a5(0x1ba)),he=I(require(a0_0x1df5a5(0x4c9))),J=require(a0_0x1df5a5(0x345)),le=class{constructor(_0x450ebb,_0x236bd7,_0x101d22){const _0x17025b=a0_0x1df5a5;this[_0x17025b(0x83f)]=_0x450ebb,this['exists']=_0x236bd7,this[_0x17025b(0x5d3)]=_0x101d22;}},Ye=class{},Xe=class{},_e=class{},Ze=class{},et=class{},ve=class{},tt=class{},st=class{},at=class{},it=class{},xt=I(require(a0_0x1df5a5(0x6fb))),$a=require('fs'),Ra=require(a0_0x1df5a5(0x2e2));async function Oe(_0x4bd152){const _0x3a2823=a0_0x1df5a5;let _0x44d8cd=G['waInstances'][_0x4bd152];if(L['ENABLED']){let _0x306763=T[_0x3a2823(0x4c6)]()['db'](L[_0x3a2823(0x3b3)][_0x3a2823(0x389)]+_0x3a2823(0x84c))['collection'](_0x4bd152);return _0x44d8cd||(await _0x306763[_0x3a2823(0x756)]({})[_0x3a2823(0x8a9)]())['length']>0x0;}return _0x44d8cd||(0x0,$a[_0x3a2823(0x5a6)])((0x0,Ra[_0x3a2823(0x4bc)])(Se,_0x4bd152));}async function Aa(_0x103c70,_0x2f6875,_0x584a4b){const _0x506923=a0_0x1df5a5;if(_0x103c70[_0x506923(0x74e)]['includes'](_0x506923(0x42b))||_0x103c70[_0x506923(0x74e)][_0x506923(0x5f2)]('/instance/fetchInstances')||_0x103c70['originalUrl'][_0x506923(0x5f2)](_0x506923(0x1d7))||_0x103c70[_0x506923(0x74e)]['includes'](_0x506923(0x87e))||_0x103c70[_0x506923(0x74e)][_0x506923(0x5f2)](_0x506923(0x539))||_0x103c70[_0x506923(0x74e)][_0x506923(0x5f2)](_0x506923(0x1ee))||_0x103c70[_0x506923(0x74e)][_0x506923(0x5f2)]('/instance/delete'))return _0x584a4b();let _0x54dc57=_0x103c70['params'];if(!_0x54dc57?.['instanceName'])throw new m(_0x506923(0x6c5));if(!await Oe(_0x54dc57['instanceName']))throw new U(_0x506923(0x3a8)+_0x54dc57['instanceName']+'\x20instance\x20does\x20not\x20exist');_0x584a4b();}async function Ta(_0x47ee15,_0x4eabee,_0x1a7f5b){const _0x313971=a0_0x1df5a5;if(_0x47ee15[_0x313971(0x74e)][_0x313971(0x5f2)]('/instance/create')){let _0x4c336e=_0x47ee15['body'];if(await Oe(_0x4c336e[_0x313971(0x474)]))throw new X(_0x313971(0x5d5)+_0x4c336e[_0x313971(0x474)]+_0x313971(0x523));G[_0x313971(0x8f4)][_0x4c336e[_0x313971(0x474)]]&&delete G['waInstances'][_0x4c336e[_0x313971(0x474)]];}_0x1a7f5b();}var Ia=require('class-validator'),_a=I(require('jsonwebtoken')),ot=a0_0x1df5a5(0x3b6),Ro=new $(a0_0x1df5a5(0x68e));async function Ao(_0x2cd8f9,_0xdc2e04,_0x23faea){const _0x317df1=a0_0x1df5a5;let _0x380993=_0x2cd8f9[_0x317df1(0x3be)]('apikey');if(_0x380993&&S[_0x317df1(0x3be)](_0x317df1(0x6d5))[_0x317df1(0x901)][_0x317df1(0x59c)]!==_0x380993)throw new ae();if(S[_0x317df1(0x3be)](_0x317df1(0x6d5))[_0x317df1(0x901)][_0x317df1(0x59c)]===_0x380993)return _0x23faea();if((_0x2cd8f9[_0x317df1(0x74e)][_0x317df1(0x5f2)]('/instance/create')||_0x2cd8f9['originalUrl'][_0x317df1(0x5f2)](_0x317df1(0x69d)))&&!_0x380993)throw new X(_0x317df1(0x5fb),_0x317df1(0x637));let _0x173c29=S[_0x317df1(0x3be)]('AUTHENTICATION')['JWT'];try{let [_0x1f1342,_0x2f8bbd]=_0x2cd8f9[_0x317df1(0x3be)]('authorization')[_0x317df1(0x709)]('\x20');if(_0x1f1342[_0x317df1(0x6c2)]()!==_0x317df1(0x7e8))throw new ae();if(!(0x0,Ia[_0x317df1(0x873)])(_0x2f8bbd))throw new ae();let _0x364dbe=_0x2cd8f9[_0x317df1(0x570)],_0x322f37=_a['default'][_0x317df1(0x76f)](_0x2f8bbd,_0x173c29[_0x317df1(0x7dc)],{'ignoreExpiration':_0x173c29[_0x317df1(0x2a2)]===0x0});if(_0x364dbe[_0x317df1(0x474)]!==_0x322f37['instanceName']||ot!==_0x322f37[_0x317df1(0x453)])throw new ae();return _0x23faea();}catch(_0xfb077d){throw Ro[_0x317df1(0x398)](_0xfb077d),new ae();}}async function To(_0x3e8642,_0x233e3c,_0x257060){const _0x2898d6=a0_0x1df5a5;let _0x2f2324=S[_0x2898d6(0x3be)](_0x2898d6(0x6d5))['API_KEY'],_0x4378d7=_0x3e8642[_0x2898d6(0x3be)](_0x2898d6(0x829));if(_0x2f2324[_0x2898d6(0x59c)]===_0x4378d7)return _0x257060();if(_0x3e8642[_0x2898d6(0x74e)][_0x2898d6(0x5f2)](_0x2898d6(0x42b))){let _0x4a6399=xa,_0x553309=_0x3e8642[_0x2898d6(0x4a9)][_0x2898d6(0x474)];if(_0x4a6399&&_0x553309[_0x2898d6(0x6c2)]()[_0x2898d6(0x832)](_0x4a6399[_0x2898d6(0x6c2)]()))return _0x257060();if(!_0x4378d7)throw new X(_0x2898d6(0x5fb),_0x2898d6(0x637));}if(_0x3e8642['originalUrl']['includes'](_0x2898d6(0x69d))&&!_0x4378d7)throw new X(_0x2898d6(0x5fb),'The\x20global\x20api\x20key\x20must\x20be\x20set');if(_0x3e8642[_0x2898d6(0x74e)][_0x2898d6(0x5f2)](_0x2898d6(0x1d7))&&!_0x4378d7)throw new X(_0x2898d6(0x5fb),_0x2898d6(0x637));if(_0x3e8642[_0x2898d6(0x74e)][_0x2898d6(0x5f2)](_0x2898d6(0x87e))&&!_0x4378d7)throw new X(_0x2898d6(0x5fb),_0x2898d6(0x637));try{let _0x1d5680=_0x3e8642[_0x2898d6(0x570)],_0x36d6a6=await me[_0x2898d6(0x575)][_0x2898d6(0x756)](_0x1d5680[_0x2898d6(0x474)]);if(_0x36d6a6&&_0x36d6a6['apikey']===_0x4378d7)return _0x257060();}catch{}throw new ae();}var Oa={'jwt':Ao,'apikey':To},pi=require(a0_0x1df5a5(0x6fb)),C=require(a0_0x1df5a5(0x913)),v=(..._0x3946ff)=>{const _0x57f7cf=a0_0x1df5a5;let _0x5c8702={};return _0x3946ff['forEach'](_0x5551f1=>_0x5c8702[_0x5551f1]={'minLength':0x1,'description':_0x57f7cf(0x1f6)+_0x5551f1+'\x22\x20cannot\x20be\x20empty'}),{'if':{'propertyNames':{'enum':[..._0x3946ff]}},'then':{'properties':_0x5c8702}};},N={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'instanceName':{'type':a0_0x1df5a5(0x1d0)}},...v(a0_0x1df5a5(0x474))},Tc={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'oldToken':{'type':a0_0x1df5a5(0x1d0)}},'required':[a0_0x1df5a5(0x445)],...v(a0_0x1df5a5(0x445))},Ic={'properties':{'key':{'type':a0_0x1df5a5(0x1b3),'properties':{'id':{'type':a0_0x1df5a5(0x1d0)},'remoteJid':{'type':a0_0x1df5a5(0x1d0)},'fromMe':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]}},'required':['id',a0_0x1df5a5(0x788),a0_0x1df5a5(0x89a)],...v('id',a0_0x1df5a5(0x788))},'message':{'type':a0_0x1df5a5(0x1b3)}}},ie={'properties':{'delay':{'type':a0_0x1df5a5(0x7d6),'description':'Enter\x20a\x20value\x20in\x20milliseconds'},'presence':{'type':a0_0x1df5a5(0x1d0),'enum':[a0_0x1df5a5(0x75b),a0_0x1df5a5(0x498),a0_0x1df5a5(0x3e6),a0_0x1df5a5(0x46b),a0_0x1df5a5(0x212)]}}},Z={'type':a0_0x1df5a5(0x1d0),'description':a0_0x1df5a5(0x21f)},Pa={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ie},'textMessage':{'type':a0_0x1df5a5(0x1b3),'properties':{'text':{'type':a0_0x1df5a5(0x1d0)}},'required':['text'],...v('text')}},'required':[a0_0x1df5a5(0x2ab),'number']},Da={'type':a0_0x1df5a5(0x1d0),'pattern':'^[a-zA-Z0-9]+@[a-zA-Z0-9]+$','description':a0_0x1df5a5(0x21f)},_c={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Da},'options':{...ie},'textMessage':{'type':a0_0x1df5a5(0x1b3),'properties':{'text':{'type':a0_0x1df5a5(0x1d0)}},'required':[a0_0x1df5a5(0x5b9)],...v(a0_0x1df5a5(0x5b9))}},'required':[a0_0x1df5a5(0x2ab),a0_0x1df5a5(0x737)]},Oc={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Da},'options':{...ie},'mediaMessage':{'type':a0_0x1df5a5(0x1b3),'properties':{'mediatype':{'type':'string','enum':[a0_0x1df5a5(0x6aa),a0_0x1df5a5(0x288),a0_0x1df5a5(0x207),a0_0x1df5a5(0x892)]},'media':{'type':'string'},'fileName':{'type':'string'},'caption':{'type':'string'}},'required':[a0_0x1df5a5(0x52f),a0_0x1df5a5(0x516)],...v(a0_0x1df5a5(0x616),a0_0x1df5a5(0x4a2),a0_0x1df5a5(0x516))}},'required':['mediaMessage','number']},ka={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'number':{...Z},'options':{...ie},'stickerMessage':{'type':a0_0x1df5a5(0x1b3),'properties':{'image':{'type':a0_0x1df5a5(0x1d0)}},'required':[a0_0x1df5a5(0x6aa)],...v(a0_0x1df5a5(0x6aa))}},'required':[a0_0x1df5a5(0x4bb),'number']},La={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'statusMessage':{'type':a0_0x1df5a5(0x1b3),'properties':{'type':{'type':a0_0x1df5a5(0x1d0),'enum':[a0_0x1df5a5(0x5b9),a0_0x1df5a5(0x6aa),a0_0x1df5a5(0x892),a0_0x1df5a5(0x207)]},'content':{'type':a0_0x1df5a5(0x1d0)},'caption':{'type':a0_0x1df5a5(0x1d0)},'backgroundColor':{'type':a0_0x1df5a5(0x1d0)},'font':{'type':a0_0x1df5a5(0x7d6),'minimum':0x0,'maximum':0x5},'statusJidList':{'type':a0_0x1df5a5(0x2b4),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x1df5a5(0x1d0),'pattern':'^\x5cd+','description':a0_0x1df5a5(0x5ca)}},'allContacts':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]}},'required':[a0_0x1df5a5(0x62b),a0_0x1df5a5(0x620)],...v('type',a0_0x1df5a5(0x620))}},'required':['statusMessage']},Fa={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'number':{...Z},'options':{...ie},'mediaMessage':{'type':'object','properties':{'mediatype':{'type':a0_0x1df5a5(0x1d0),'enum':[a0_0x1df5a5(0x6aa),a0_0x1df5a5(0x288),a0_0x1df5a5(0x207),a0_0x1df5a5(0x892)]},'media':{'type':'string'},'fileName':{'type':a0_0x1df5a5(0x1d0)},'caption':{'type':'string'}},'required':['mediatype',a0_0x1df5a5(0x516)],...v('fileName','caption','media')}},'required':[a0_0x1df5a5(0x269),a0_0x1df5a5(0x737)]},Ua={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'number':{...Z},'options':{...ie},'audioMessage':{'type':'object','properties':{'audio':{'type':a0_0x1df5a5(0x1d0)}},'required':[a0_0x1df5a5(0x892)],...v(a0_0x1df5a5(0x892))}},'required':['audioMessage','number']},ja={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'number':{...Z},'pollMessage':{'type':'object','properties':{'name':{'type':a0_0x1df5a5(0x1d0)},'selectableCount':{'type':a0_0x1df5a5(0x737)},'values':{'type':'array','minItems':0x2,'uniqueItems':!0x0}},'required':[a0_0x1df5a5(0x5d3),a0_0x1df5a5(0x41e),a0_0x1df5a5(0x6f6)],...v(a0_0x1df5a5(0x5d3),a0_0x1df5a5(0x41e),'values')}},'required':[a0_0x1df5a5(0x737),a0_0x1df5a5(0x62c)]},Ja={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Z},'menuMessage':{'type':'object','properties':{'text':{'type':'string'},'choices':{'type':'array','uniqueItems':!0x0}},'required':['text',a0_0x1df5a5(0x7dd)],...v(a0_0x1df5a5(0x5b9),'choices')}},'required':[a0_0x1df5a5(0x737),a0_0x1df5a5(0x1ec)]},qa={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'number':{...Z},'options':{...ie},'locationMessage':{'type':'object','properties':{'latitude':{'type':a0_0x1df5a5(0x737)},'longitude':{'type':a0_0x1df5a5(0x737)},'name':{'type':a0_0x1df5a5(0x1d0)},'address':{'type':a0_0x1df5a5(0x1d0)}},'required':['latitude',a0_0x1df5a5(0x586)],...v(a0_0x1df5a5(0x5d3),'addresss')}},'required':[a0_0x1df5a5(0x737),a0_0x1df5a5(0x87c)]},Va={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Z},'options':{...ie},'listMessage':{'type':'object','properties':{'title':{'type':'string'},'description':{'type':a0_0x1df5a5(0x1d0)},'footerText':{'type':a0_0x1df5a5(0x1d0)},'buttonText':{'type':a0_0x1df5a5(0x1d0)},'sections':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'type':'object','properties':{'title':{'type':'string'},'rows':{'type':a0_0x1df5a5(0x2b4),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x1df5a5(0x1b3),'properties':{'title':{'type':a0_0x1df5a5(0x1d0)},'description':{'type':a0_0x1df5a5(0x1d0)},'rowId':{'type':'string'}},'required':[a0_0x1df5a5(0x6eb),'rowId'],...v('title',a0_0x1df5a5(0x2b8))}}},'required':[a0_0x1df5a5(0x6eb),'rows'],...v(a0_0x1df5a5(0x6eb))}}},'required':['title',a0_0x1df5a5(0x8f3),a0_0x1df5a5(0x629),a0_0x1df5a5(0x5ee)],...v(a0_0x1df5a5(0x6eb),a0_0x1df5a5(0x8f3),a0_0x1df5a5(0x629),a0_0x1df5a5(0x90e))}},'required':[a0_0x1df5a5(0x737),'listMessage']},Ga={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'number':{...Z},'options':{...ie},'contactMessage':{'type':a0_0x1df5a5(0x2b4),'items':{'type':a0_0x1df5a5(0x1b3),'properties':{'fullName':{'type':a0_0x1df5a5(0x1d0)},'phoneNumber':{'type':a0_0x1df5a5(0x1d0),'minLength':0xa}},'required':[a0_0x1df5a5(0x3f0),'phoneNumber'],...v(a0_0x1df5a5(0x3f0))},'minItems':0x1,'uniqueItems':!0x0}},'required':[a0_0x1df5a5(0x737),'contactMessage']},Ba={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'reactionMessage':{'type':a0_0x1df5a5(0x1b3),'properties':{'key':{'type':a0_0x1df5a5(0x1b3),'properties':{'id':{'type':a0_0x1df5a5(0x1d0)},'remoteJid':{'type':a0_0x1df5a5(0x1d0)},'fromMe':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]}},'required':['id',a0_0x1df5a5(0x788),a0_0x1df5a5(0x89a)],...v('id',a0_0x1df5a5(0x788))},'reaction':{'type':a0_0x1df5a5(0x1d0)}},'required':['key','reaction'],...v(a0_0x1df5a5(0x3f6))}},'required':[a0_0x1df5a5(0x28b)]},Wa={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'numbers':{'type':a0_0x1df5a5(0x2b4),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x1df5a5(0x1d0),'pattern':'^\x5cd+','description':a0_0x1df5a5(0x365)}}}},za={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'readMessages':{'type':'array','minItems':0x1,'uniqueItems':!0x0,'items':{'properties':{'id':{'type':a0_0x1df5a5(0x1d0)},'fromMe':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'remoteJid':{'type':a0_0x1df5a5(0x1d0)}},'required':['id',a0_0x1df5a5(0x89a),a0_0x1df5a5(0x788)],...v('id','remoteJid')}}},'required':[a0_0x1df5a5(0x502)]},Ha={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'privacySettings':{'type':a0_0x1df5a5(0x1b3),'properties':{'readreceipts':{'type':a0_0x1df5a5(0x1d0),'enum':[a0_0x1df5a5(0x75e),a0_0x1df5a5(0x87d)]},'profile':{'type':a0_0x1df5a5(0x1d0),'enum':[a0_0x1df5a5(0x75e),a0_0x1df5a5(0x3f2),'contact_blacklist',a0_0x1df5a5(0x87d)]},'status':{'type':a0_0x1df5a5(0x1d0),'enum':['all',a0_0x1df5a5(0x3f2),a0_0x1df5a5(0x35f),'none']},'online':{'type':a0_0x1df5a5(0x1d0),'enum':[a0_0x1df5a5(0x75e),'match_last_seen']},'last':{'type':a0_0x1df5a5(0x1d0),'enum':['all','contacts',a0_0x1df5a5(0x35f),a0_0x1df5a5(0x87d)]},'groupadd':{'type':a0_0x1df5a5(0x1d0),'enum':[a0_0x1df5a5(0x75e),'contacts',a0_0x1df5a5(0x35f),a0_0x1df5a5(0x87d)]}},'required':[a0_0x1df5a5(0x642),a0_0x1df5a5(0x6c3),a0_0x1df5a5(0x781),a0_0x1df5a5(0x7b0),a0_0x1df5a5(0x420),a0_0x1df5a5(0x77b)],...v(a0_0x1df5a5(0x642),a0_0x1df5a5(0x6c3),a0_0x1df5a5(0x781),a0_0x1df5a5(0x7b0),a0_0x1df5a5(0x420),a0_0x1df5a5(0x77b))}},'required':[a0_0x1df5a5(0x6a6)]},Ka={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'lastMessage':{'type':a0_0x1df5a5(0x1b3),'properties':{'key':{'type':a0_0x1df5a5(0x1b3),'properties':{'id':{'type':a0_0x1df5a5(0x1d0)},'remoteJid':{'type':'string'},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}},'required':['id',a0_0x1df5a5(0x89a),a0_0x1df5a5(0x788)],...v('id',a0_0x1df5a5(0x788))},'messageTimestamp':{'type':a0_0x1df5a5(0x7d6),'minLength':0x1}},'required':[a0_0x1df5a5(0x440)],...v(a0_0x1df5a5(0x6f2))},'archive':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]}},'required':['lastMessage',a0_0x1df5a5(0x344)]},Qa={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'id':{'type':a0_0x1df5a5(0x1d0)},'fromMe':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'remoteJid':{'type':'string'},'participant':{'type':a0_0x1df5a5(0x1d0)}},'required':['id',a0_0x1df5a5(0x89a),a0_0x1df5a5(0x788)],...v('id',a0_0x1df5a5(0x788),'participant')},Ya={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'where':{'type':a0_0x1df5a5(0x1b3),'properties':{'_id':{'type':a0_0x1df5a5(0x1d0),'minLength':0x1},'pushName':{'type':'string','minLength':0x1},'id':{'type':a0_0x1df5a5(0x1d0),'minLength':0x1}},...v(a0_0x1df5a5(0x5da),'id',a0_0x1df5a5(0x91a))}}},Xa={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'name':{'type':'string'}},...v(a0_0x1df5a5(0x5d3))},Za={'$id':(0x0,C['v4'])(),'type':'object','properties':{'status':{'type':a0_0x1df5a5(0x1d0)}},...v(a0_0x1df5a5(0x781))},xe={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'number':{'type':a0_0x1df5a5(0x1d0)},'picture':{'type':a0_0x1df5a5(0x1d0)}}},ei={'type':a0_0x1df5a5(0x1b3),'properties':{'wuid':{'type':'string'},'name':{'type':a0_0x1df5a5(0x1d0)},'picture':{'type':a0_0x1df5a5(0x1d0)},'status':{'type':'string'},'isBusiness':{'type':'boolean'}}},ti={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'where':{'type':a0_0x1df5a5(0x1b3),'properties':{'_id':{'type':a0_0x1df5a5(0x1d0),'minLength':0x1},'key':{'type':a0_0x1df5a5(0x1b3),'if':{'propertyNames':{'enum':[a0_0x1df5a5(0x89a),'remoteJid','id']}},'then':{'properties':{'remoteJid':{'type':a0_0x1df5a5(0x1d0),'minLength':0x1,'description':a0_0x1df5a5(0x816)},'id':{'type':'string','minLength':0x1,'description':a0_0x1df5a5(0x816)},'fromMe':{'type':'boolean','enum':[!0x0,!0x1]}}}},'message':{'type':'object'}},...v('_id')},'limit':{'type':'integer'}}},xc={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'where':{'type':a0_0x1df5a5(0x1b3),'properties':{'_id':{'type':a0_0x1df5a5(0x1d0)},'remoteJid':{'type':'string'},'id':{'type':a0_0x1df5a5(0x1d0)},'fromMe':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'participant':{'type':'string'},'status':{'type':a0_0x1df5a5(0x1d0),'enum':['ERROR','PENDING',a0_0x1df5a5(0x6fa),a0_0x1df5a5(0x4b3),a0_0x1df5a5(0x307),a0_0x1df5a5(0x607)]}},...v(a0_0x1df5a5(0x5da),a0_0x1df5a5(0x788),'id',a0_0x1df5a5(0x781))},'limit':{'type':'integer'}}},si={'$id':(0x0,C['v4'])(),'type':'object','properties':{'number':{...Z},'presence':{'type':a0_0x1df5a5(0x1d0),'enum':[a0_0x1df5a5(0x75b),a0_0x1df5a5(0x498),a0_0x1df5a5(0x3e6),'recording','paused']}},'required':[a0_0x1df5a5(0x745),a0_0x1df5a5(0x737)]},ai={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'subject':{'type':a0_0x1df5a5(0x1d0)},'description':{'type':a0_0x1df5a5(0x1d0)},'profilePicture':{'type':'string'},'participants':{'type':a0_0x1df5a5(0x2b4),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':a0_0x1df5a5(0x1d0),'minLength':0xa,'pattern':'\x5cd+','description':a0_0x1df5a5(0x256)}}},'required':[a0_0x1df5a5(0x4af),a0_0x1df5a5(0x521)],...v(a0_0x1df5a5(0x4af),'description',a0_0x1df5a5(0x8e9))},Pe={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'groupJid':{'type':'string','pattern':a0_0x1df5a5(0x955)}},'required':[a0_0x1df5a5(0x56b)],...v(a0_0x1df5a5(0x56b))},ii={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'groupJid':{'type':'string'},'action':{'type':a0_0x1df5a5(0x1d0),'enum':[a0_0x1df5a5(0x94f),a0_0x1df5a5(0x51f),a0_0x1df5a5(0x2c4),a0_0x1df5a5(0x68d),a0_0x1df5a5(0x50e),a0_0x1df5a5(0x4cf)]},'participants':{'type':a0_0x1df5a5(0x2b4),'minItems':0x1,'uniqueItems':!0x0,'items':{'type':'string','minLength':0xa,'pattern':a0_0x1df5a5(0x7f7),'description':a0_0x1df5a5(0x256)}}},'required':[a0_0x1df5a5(0x56b),'action','participants'],...v(a0_0x1df5a5(0x56b),a0_0x1df5a5(0x6bb))},oi={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'groupJid':{'type':a0_0x1df5a5(0x1d0)},'expiration':{'type':a0_0x1df5a5(0x737),'enum':[0x0,0x15180,0x93a80,0x76a700]}},'required':[a0_0x1df5a5(0x56b),'expiration'],...v(a0_0x1df5a5(0x56b),'expiration')},ri={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'groupJid':{'type':'string'},'image':{'type':'string'}},'required':[a0_0x1df5a5(0x56b),a0_0x1df5a5(0x6aa)],...v(a0_0x1df5a5(0x56b),a0_0x1df5a5(0x6aa))},ni={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'groupJid':{'type':a0_0x1df5a5(0x1d0)},'description':{'type':a0_0x1df5a5(0x1d0)}},'required':[a0_0x1df5a5(0x56b),a0_0x1df5a5(0x8f3)],...v(a0_0x1df5a5(0x56b),a0_0x1df5a5(0x8f3))},ci={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'groupJid':{'type':'string'},'name':{'type':a0_0x1df5a5(0x1d0)}},'required':[a0_0x1df5a5(0x56b),a0_0x1df5a5(0x5d3)],...v(a0_0x1df5a5(0x56b),'name')},li={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'setting':{'type':'string','enum':[a0_0x1df5a5(0x3f9),a0_0x1df5a5(0x356),a0_0x1df5a5(0x4ac),a0_0x1df5a5(0x466)]}},'required':[a0_0x1df5a5(0x56b),a0_0x1df5a5(0x437)],...v(a0_0x1df5a5(0x56b),a0_0x1df5a5(0x437))},ui={'$id':(0x0,C['v4'])(),'type':'object','properties':{'groupJid':{'type':'string'},'restrict':{'type':'boolean'},'announce':{'type':'boolean'},'memberAddMode':{'type':'boolean'},'joinApprovalMode':{'type':a0_0x1df5a5(0x8c7)},'expiration':{'type':'integer','enum':[0x0,0x15180,0x93a80,0x76a700]},'name':{'type':a0_0x1df5a5(0x1d0)},'description':{'type':a0_0x1df5a5(0x1d0)},'image':{'type':a0_0x1df5a5(0x1d0)}}},Ns={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'inviteCode':{'type':a0_0x1df5a5(0x1d0)}},'required':['inviteCode'],...v(a0_0x1df5a5(0x536))},di={'$id':(0x0,C['v4'])(),'type':a0_0x1df5a5(0x1b3),'properties':{'url':{'type':'string'},'enabled':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]}},'required':[a0_0x1df5a5(0x376),a0_0x1df5a5(0x3eb)]},Pc={'$id':(0x0,C['v4'])(),'type':'object','properties':{'local_map':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'STATUS_INSTANCE':{'type':'boolean','enum':[!0x0,!0x1]},'QRCODE_UPDATED':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'MESSAGES_SET':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'MESSAGES_UPDATE':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'MESSAGES_UPSERT':{'type':'boolean','enum':[!0x0,!0x1]},'SEND_MESSAGE':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'CONTACTS_SET':{'type':'boolean','enum':[!0x0,!0x1]},'CONTACTS_UPSERT':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'CONTACTS_UPDATE':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'PRESENCE_UPDATE':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'CHATS_SET':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'CHATS_UPSERT':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'CHATS_UPDATE':{'type':'boolean','enum':[!0x0,!0x1]},'CHATS_DELETE':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'CONNECTION_UPDATE':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'GROUPS_UPSERT':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'GROUPS_UPDATE':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]},'GROUP_PARTICIPANTS_UPDATE':{'type':a0_0x1df5a5(0x8c7),'enum':[!0x0,!0x1]}},'required':[a0_0x1df5a5(0x69a),'STATUS_INSTANCE',a0_0x1df5a5(0x2cc),a0_0x1df5a5(0x7cd),'MESSAGES_UPDATE',a0_0x1df5a5(0x549),a0_0x1df5a5(0x66a),'CONTACTS_SET',a0_0x1df5a5(0x802),a0_0x1df5a5(0x705),a0_0x1df5a5(0x292),a0_0x1df5a5(0x726),'CHATS_UPSERT',a0_0x1df5a5(0x211),a0_0x1df5a5(0x904),a0_0x1df5a5(0x66d),a0_0x1df5a5(0x4ff),a0_0x1df5a5(0x5de),a0_0x1df5a5(0x760)],...v('local_map',a0_0x1df5a5(0x8f6),a0_0x1df5a5(0x2cc),a0_0x1df5a5(0x7cd),a0_0x1df5a5(0x1a9),a0_0x1df5a5(0x549),a0_0x1df5a5(0x66a),a0_0x1df5a5(0x861),a0_0x1df5a5(0x802),'CONTACTS_UPDATE','PRESENCE_UPDATE',a0_0x1df5a5(0x726),a0_0x1df5a5(0x661),a0_0x1df5a5(0x211),a0_0x1df5a5(0x904),'CONNECTION_UPDATE',a0_0x1df5a5(0x4ff),'GROUPS_UPDATE',a0_0x1df5a5(0x760))},rt=class{},nt=class extends _{[a0_0x1df5a5(0x1c5)](_0x590359){return aa(_0x590359);}async[a0_0x1df5a5(0x2de)](_0x2fe518){const _0x260b4b=a0_0x1df5a5;if(_0x2fe518[_0x260b4b(0x303)]!==0x0)try{return{'insertCount':(await this[_0x260b4b(0x1c5)](_0x2fe518[0x0][_0x260b4b(0x36f)])['insertMany']([..._0x2fe518]))[_0x260b4b(0x303)]};}catch(_0x2e5578){return _0x2e5578;}}async['delete'](_0x1920b6,_0x1fed79){const _0x3d0c05=a0_0x1df5a5;try{return{'deletedCount':(await this['getContactModelForOwner'](_0x1fed79)[_0x3d0c05(0x315)]({..._0x1920b6[_0x3d0c05(0x7e5)]}))[_0x3d0c05(0x408)]};}catch(_0x5814dd){return{'error':_0x5814dd?.[_0x3d0c05(0x641)]()};}}async[a0_0x1df5a5(0x62e)](_0x24ad33,_0x15cd25){const _0x53d9f8=a0_0x1df5a5;try{if(_0x24ad33['length']===0x0)return;let _0x31c62d=this[_0x53d9f8(0x1c5)](_0x15cd25),_0x52dff7=_0x24ad33[_0x53d9f8(0x948)](_0x49ce7e=>({'updateOne':{'filter':{'_id':_0x49ce7e[_0x53d9f8(0x5da)],'owner':_0x15cd25},'update':{..._0x49ce7e}}})),{modifiedCount:_0x17d00}=await _0x31c62d[_0x53d9f8(0x8d1)](_0x52dff7);return{'insertCount':_0x17d00};}catch{return;}}async['find'](_0x35f8a5,_0x53fe79){const _0xc37701=a0_0x1df5a5;try{let _0xc7d4ff=this[_0xc37701(0x1c5)](_0x53fe79),_0x2cf6cd=A(_0x35f8a5[_0xc37701(0x7e5)]);return await _0xc7d4ff['find'](_0x2cf6cd)[_0xc37701(0x8e1)](_0x35f8a5?.['limit']??0x0)[_0xc37701(0x489)]();}catch{return[];}}async[a0_0x1df5a5(0x694)](_0x2ee58e,_0x5dabf8){const _0x3e63c3=a0_0x1df5a5;try{let _0x343ae3=this[_0x3e63c3(0x1c5)](_0x5dabf8),_0x3f2407=A(_0x2ee58e['where']);return await _0x343ae3[_0x3e63c3(0x694)](_0x3f2407)[_0x3e63c3(0x489)]();}catch{return null;}}async[a0_0x1df5a5(0x73b)](_0x297fe4){const _0xd7ebfe=a0_0x1df5a5;try{return await this[_0xd7ebfe(0x1c5)](_0x297fe4)[_0xd7ebfe(0x8dd)][_0xd7ebfe(0x552)](),{'success':!0x0};}catch(_0x174397){return console['error'](_0x174397),{'success':!0x1,'error':_0x174397};}}},ct=require(a0_0x1df5a5(0x39b)),Vc=require('express-async-errors'),$s=new $(a0_0x1df5a5(0x53b)),V=class{[a0_0x1df5a5(0x597)](_0x42d25f,_0x1e195f=!0x0){const _0x9a935e=a0_0x1df5a5;let _0x4d87b0='/'+_0x42d25f;return _0x1e195f&&(_0x4d87b0+=_0x9a935e(0x527)),_0x4d87b0;}async[a0_0x1df5a5(0x83b)](_0x558564){const _0xeb1840=a0_0x1df5a5;let {request:_0x209b6b,schema:_0x44f6a2,ClassRef:_0x2629b6,execute:_0x52083e}=_0x558564,_0x732cff=new _0x2629b6(),_0x5deb99=_0x209b6b[_0xeb1840(0x4a9)],_0x5928c8=_0x209b6b[_0xeb1840(0x570)];_0x209b6b?.['query']&&Object[_0xeb1840(0x326)](_0x209b6b['query'])[_0xeb1840(0x303)]>0x0&&Object[_0xeb1840(0x503)](_0x5928c8,_0x209b6b[_0xeb1840(0x896)]),_0x209b6b[_0xeb1840(0x74e)][_0xeb1840(0x5f2)]('/instance/create')&&Object['assign'](_0x5928c8,_0x5deb99),Object[_0xeb1840(0x503)](_0x732cff,_0x5deb99);let _0x448b0f=_0x44f6a2?(0x0,ct[_0xeb1840(0x22a)])(_0x732cff,_0x44f6a2):{'valid':!0x0,'errors':[]};if(!_0x448b0f[_0xeb1840(0x50a)]){let _0x5067c4=_0x448b0f[_0xeb1840(0x87a)][_0xeb1840(0x948)](({property:_0x4733de,stack:_0x5c9857,schema:_0x350331})=>{const _0x1f721c=_0xeb1840;let _0x2a55c1;return _0x350331[_0x1f721c(0x8f3)]?_0x2a55c1=_0x350331['description']:_0x2a55c1=_0x5c9857[_0x1f721c(0x894)](_0x1f721c(0x7a1),''),{'property':_0x4733de['replace'](_0x1f721c(0x7a1),''),'message':_0x2a55c1};});throw $s['error']([..._0x5067c4]),new m(..._0x5067c4);}return await _0x52083e(_0x5928c8,_0x732cff);}async[a0_0x1df5a5(0x8b5)](_0x376ffd){const _0x10917d=a0_0x1df5a5;let {request:_0x51d14b,ClassRef:_0x458a33,schema:_0x2115bf,execute:_0x43c7c7}=_0x376ffd,_0x433518=_0x51d14b[_0x10917d(0x896)];if(!_0x433518?.[_0x10917d(0x56b)])throw new m(_0x10917d(0x7ba),_0x10917d(0x395));let _0x573109=_0x51d14b[_0x10917d(0x570)],_0x5bbf7c=_0x51d14b[_0x10917d(0x4a9)],_0x776ab=new _0x458a33();Object['assign'](_0x5bbf7c,_0x433518),Object[_0x10917d(0x503)](_0x776ab,_0x5bbf7c);let _0x498201=(0x0,ct[_0x10917d(0x22a)])(_0x776ab,_0x2115bf);if(!_0x498201[_0x10917d(0x50a)]){let _0x103ef3=_0x498201[_0x10917d(0x87a)][_0x10917d(0x948)](({property:_0x5d0b58,stack:_0x247ee5,schema:_0x31123a})=>{const _0x2c5b9d=_0x10917d;let _0x1dcc89;return _0x31123a['description']?_0x1dcc89=_0x31123a[_0x2c5b9d(0x8f3)]:_0x1dcc89=_0x247ee5['replace'](_0x2c5b9d(0x7a1),''),{'property':_0x5d0b58[_0x2c5b9d(0x894)](_0x2c5b9d(0x7a1),''),'message':_0x1dcc89};});throw $s[_0x10917d(0x398)]([..._0x103ef3]),new m(..._0x103ef3);}return await _0x43c7c7(_0x573109,_0x776ab);}async['joinGroupValidate'](_0x2c7954){const _0x33571f=a0_0x1df5a5;let {request:_0x3ed640,ClassRef:_0x4bdf5e,schema:_0x4b5182,execute:_0x504c23}=_0x2c7954,_0x2cef94=_0x3ed640[_0x33571f(0x4a9)];if(!_0x2cef94?.[_0x33571f(0x536)])throw new m(_0x33571f(0x5b1),_0x33571f(0x69f));let _0x5d31ed=_0x3ed640['params'],_0x1afd8d=_0x3ed640[_0x33571f(0x4a9)],_0x26f097=new _0x4bdf5e();Object[_0x33571f(0x503)](_0x1afd8d,_0x2cef94),Object[_0x33571f(0x503)](_0x26f097,_0x1afd8d);let _0x546f08=(0x0,ct[_0x33571f(0x22a)])(_0x26f097,_0x4b5182);if(!_0x546f08[_0x33571f(0x50a)]){let _0x509aef=_0x546f08['errors']['map'](({property:_0x50ca97,stack:_0x2e49ce,schema:_0xc4d324})=>{const _0x18e503=_0x33571f;let _0x1b9454;return _0xc4d324['description']?_0x1b9454=_0xc4d324[_0x18e503(0x8f3)]:_0x1b9454=_0x2e49ce[_0x18e503(0x894)](_0x18e503(0x7a1),''),{'property':_0x50ca97['replace'](_0x18e503(0x7a1),''),'message':_0x1b9454};});throw $s[_0x33571f(0x398)]([..._0x509aef]),new m(..._0x509aef);}return await _0x504c23(_0x5d31ed,_0x26f097);}},M=class{},il=new $('ChatRouter'),lt=class extends V{constructor(..._0x96d759){const _0x2f1af9=a0_0x1df5a5;super(),this[_0x2f1af9(0x5e8)]=(0x0,pi[_0x2f1af9(0x899)])(),this['router'][_0x2f1af9(0x880)](this['routerPath'](_0x2f1af9(0x7ef)),..._0x96d759,async(_0x37e44a,_0x54f8fe)=>{const _0xe3fba6=_0x2f1af9;let _0xd3c6e4=await this[_0xe3fba6(0x83b)]({'request':_0x37e44a,'schema':si,'ClassRef':Ye,'execute':(_0x15e0ac,_0x3f53a5)=>D[_0xe3fba6(0x7ef)](_0x15e0ac,_0x3f53a5)});return _0x54f8fe[_0xe3fba6(0x781)](0xc9)['json'](_0xd3c6e4);})[_0x2f1af9(0x880)](this[_0x2f1af9(0x597)](_0x2f1af9(0x1b7)),..._0x96d759,async(_0x59ceff,_0x5ddea9)=>{const _0x58f6db=_0x2f1af9;let _0x30d40e=await this[_0x58f6db(0x83b)]({'request':_0x59ceff,'schema':Wa,'ClassRef':Xe,'execute':(_0xfe5568,_0x36e6aa)=>D['whatsappNumber'](_0xfe5568,_0x36e6aa)});return _0x5ddea9[_0x58f6db(0x781)](0xc9)[_0x58f6db(0x6de)](_0x30d40e);})[_0x2f1af9(0x880)](this[_0x2f1af9(0x597)](_0x2f1af9(0x505)),..._0x96d759,async(_0x5ed4da,_0x541ee1)=>{const _0x8d9ccd=_0x2f1af9;let _0x281b82=await this[_0x8d9ccd(0x83b)]({'request':_0x5ed4da,'schema':N,'ClassRef':M,'execute':(_0x8d9c8,_0x5e8b36)=>D[_0x8d9ccd(0x505)](_0x8d9c8,_0x5e8b36)});return _0x541ee1[_0x8d9ccd(0x781)](0xc9)['json'](_0x281b82);})['put'](this[_0x2f1af9(0x597)](_0x2f1af9(0x8e6)),..._0x96d759,async(_0x35e98d,_0x22e4e6)=>{const _0x1ab17c=_0x2f1af9;let _0x136f96=await this[_0x1ab17c(0x83b)]({'request':_0x35e98d,'schema':za,'ClassRef':tt,'execute':(_0x8dd181,_0x5445a6)=>D[_0x1ab17c(0x500)](_0x8dd181,_0x5445a6)});return _0x22e4e6[_0x1ab17c(0x781)](0xc9)[_0x1ab17c(0x6de)](_0x136f96);})['put'](this[_0x2f1af9(0x597)](_0x2f1af9(0x754)),..._0x96d759,async(_0x2238a3,_0x51f038)=>{const _0x32b802=_0x2f1af9;let _0x3765ab=await this['dataValidate']({'request':_0x2238a3,'schema':Ka,'ClassRef':st,'execute':(_0x59c28a,_0x41e45a)=>D['archiveChat'](_0x59c28a,_0x41e45a)});return _0x51f038[_0x32b802(0x781)](0xc9)[_0x32b802(0x6de)](_0x3765ab);})['delete'](this[_0x2f1af9(0x597)](_0x2f1af9(0x2eb)),..._0x96d759,async(_0x419058,_0x395b7b)=>{const _0x2677d2=_0x2f1af9;let _0x526df6=await this[_0x2677d2(0x83b)]({'request':_0x419058,'schema':Qa,'ClassRef':it,'execute':(_0x24f55e,_0x5e20a4)=>D[_0x2677d2(0x56f)](_0x24f55e,_0x5e20a4)});return _0x395b7b[_0x2677d2(0x781)](0xc9)[_0x2677d2(0x6de)](_0x526df6);})[_0x2f1af9(0x880)](this[_0x2f1af9(0x597)](_0x2f1af9(0x1f9)),..._0x96d759,async(_0x476118,_0x334b32)=>{const _0x572dfb=_0x2f1af9;let _0xda1704=await this[_0x572dfb(0x83b)]({'request':_0x476118,'schema':xe,'ClassRef':_e,'execute':(_0x3ddf9b,_0x3fb3e2)=>D[_0x572dfb(0x27a)](_0x3ddf9b,_0x3fb3e2)});return _0x334b32['status'](0xc8)[_0x572dfb(0x6de)](_0xda1704);})[_0x2f1af9(0x880)](this['routerPath']('fetchProfile'),..._0x96d759,async(_0x461e45,_0x12c5e7)=>{const _0x36e397=_0x2f1af9;let _0xbdb8a7=await this[_0x36e397(0x83b)]({'request':_0x461e45,'schema':ei,'ClassRef':_e,'execute':(_0x3c79d5,_0x476b0d)=>D[_0x36e397(0x3d4)](_0x3c79d5,_0x476b0d)});return _0x12c5e7[_0x36e397(0x781)](0xc8)[_0x36e397(0x6de)](_0xbdb8a7);})[_0x2f1af9(0x880)](this[_0x2f1af9(0x597)]('findContacts'),..._0x96d759,async(_0x51d6e8,_0x524463)=>{const _0x4ebe97=_0x2f1af9;let _0x427bda=await this[_0x4ebe97(0x83b)]({'request':_0x51d6e8,'schema':Ya,'ClassRef':rt,'execute':(_0x41479c,_0x3bd6db)=>D[_0x4ebe97(0x58c)](_0x41479c,_0x3bd6db)});return _0x524463[_0x4ebe97(0x781)](0xc8)[_0x4ebe97(0x6de)](_0x427bda);})[_0x2f1af9(0x880)](this[_0x2f1af9(0x597)](_0x2f1af9(0x32f)),..._0x96d759,async(_0x30f17a,_0x31ca24)=>{const _0x1e8daa=_0x2f1af9;let _0x4de26c=await this[_0x1e8daa(0x83b)]({'request':_0x30f17a,'schema':null,'ClassRef':Object,'execute':(_0x1ad8c0,_0x315558)=>D['getBase64FromMediaMessage'](_0x1ad8c0,_0x315558)});return _0x31ca24[_0x1e8daa(0x781)](0xc9)[_0x1e8daa(0x6de)](_0x4de26c);})['post'](this[_0x2f1af9(0x597)](_0x2f1af9(0x63c)),..._0x96d759,async(_0x347f11,_0x3e48df)=>{const _0x54155b=_0x2f1af9;let _0x55e008=await this[_0x54155b(0x83b)]({'request':_0x347f11,'schema':ti,'ClassRef':Ke,'execute':(_0x2ea0c6,_0x21ba6e)=>D[_0x54155b(0x610)](_0x2ea0c6,_0x21ba6e)});return _0x3e48df[_0x54155b(0x781)](0xc8)[_0x54155b(0x6de)](_0x55e008);})[_0x2f1af9(0x3be)](this['routerPath'](_0x2f1af9(0x2df)),..._0x96d759,async(_0x51cc1d,_0x3d759f)=>{const _0xb26044=_0x2f1af9;let _0x53e62c=await this[_0xb26044(0x83b)]({'request':_0x51cc1d,'schema':null,'ClassRef':M,'execute':_0xe5863c=>D[_0xb26044(0x940)](_0xe5863c)});return _0x3d759f[_0xb26044(0x781)](0xc8)[_0xb26044(0x6de)](_0x53e62c);})[_0x2f1af9(0x3be)](this[_0x2f1af9(0x597)](_0x2f1af9(0x7bb)),..._0x96d759,async(_0x212399,_0xb31084)=>{const _0x406999=_0x2f1af9;let _0x101181=await this['dataValidate']({'request':_0x212399,'schema':null,'ClassRef':M,'execute':_0x152dbe=>D['fetchLabels'](_0x152dbe)});return _0xb31084[_0x406999(0x781)](0xc8)['json'](_0x101181);})[_0x2f1af9(0x403)](this[_0x2f1af9(0x597)](_0x2f1af9(0x655)),..._0x96d759,async(_0x2783b1,_0x2ec42a)=>{const _0x1f7eb2=_0x2f1af9;let _0x3dfccc=await this[_0x1f7eb2(0x83b)]({'request':_0x2783b1,'schema':null,'ClassRef':Array,'execute':(_0x47fdfa,_0x5352b1)=>D['importChats'](_0x47fdfa,_0x5352b1)});return _0x2ec42a[_0x1f7eb2(0x781)](0xc8)['json'](_0x3dfccc);})[_0x2f1af9(0x3be)](this[_0x2f1af9(0x597)](_0x2f1af9(0x537)),..._0x96d759,async(_0x50e83f,_0x44fa44)=>{const _0x334609=_0x2f1af9;let _0x2a0f5a=await this['dataValidate']({'request':_0x50e83f,'schema':null,'ClassRef':M,'execute':_0x384f79=>D[_0x334609(0x537)](_0x384f79)});return _0x44fa44['status'](0xc8)[_0x334609(0x6de)](_0x2a0f5a);})[_0x2f1af9(0x403)](this[_0x2f1af9(0x597)](_0x2f1af9(0x7fb)),..._0x96d759,async(_0x4aab9b,_0x6c61b2)=>{const _0x2b7816=_0x2f1af9;let _0x50838c=await this[_0x2b7816(0x83b)]({'request':_0x4aab9b,'schema':Ha,'ClassRef':at,'execute':(_0x3a8625,_0x1bec69)=>D['updatePrivacySettings'](_0x3a8625,_0x1bec69)});return _0x6c61b2[_0x2b7816(0x781)](0xc9)['json'](_0x50838c);})[_0x2f1af9(0x880)](this[_0x2f1af9(0x597)](_0x2f1af9(0x2a8)),..._0x96d759,async(_0x1fdc74,_0x346e8d)=>{const _0x3426d=_0x2f1af9;let _0x25ede6=await this[_0x3426d(0x83b)]({'request':_0x1fdc74,'schema':xe,'ClassRef':ve,'execute':(_0x3a1f61,_0x536c87)=>D['fetchBusinessProfile'](_0x3a1f61,_0x536c87)});return _0x346e8d[_0x3426d(0x781)](0xc8)[_0x3426d(0x6de)](_0x25ede6);})[_0x2f1af9(0x880)](this[_0x2f1af9(0x597)]('updateProfileName'),..._0x96d759,async(_0x5d4706,_0x2aa11f)=>{const _0xb9bb10=_0x2f1af9;let _0x3b0a2e=await this[_0xb9bb10(0x83b)]({'request':_0x5d4706,'schema':Xa,'ClassRef':Ze,'execute':(_0x1db3c9,_0x390d89)=>D['updateProfileName'](_0x1db3c9,_0x390d89)});return _0x2aa11f[_0xb9bb10(0x781)](0xc8)['json'](_0x3b0a2e);})['post'](this[_0x2f1af9(0x597)](_0x2f1af9(0x429)),..._0x96d759,async(_0x5be5a3,_0x10f9c5)=>{const _0x5c51d7=_0x2f1af9;let _0x480c94=await this['dataValidate']({'request':_0x5be5a3,'schema':Za,'ClassRef':et,'execute':(_0x5341a3,_0x2212f0)=>D[_0x5c51d7(0x429)](_0x5341a3,_0x2212f0)});return _0x10f9c5[_0x5c51d7(0x781)](0xc8)['json'](_0x480c94);})[_0x2f1af9(0x403)](this[_0x2f1af9(0x597)](_0x2f1af9(0x2ae)),..._0x96d759,async(_0x6f9f2f,_0x7fafbf)=>{const _0x5c8f3c=_0x2f1af9;let _0x531784=await this[_0x5c8f3c(0x83b)]({'request':_0x6f9f2f,'schema':xe,'ClassRef':ve,'execute':(_0x1b5e13,_0x5b21b8)=>D[_0x5c8f3c(0x2ae)](_0x1b5e13,_0x5b21b8)});return _0x7fafbf[_0x5c8f3c(0x781)](0xc8)['json'](_0x531784);})[_0x2f1af9(0x1be)](this[_0x2f1af9(0x597)](_0x2f1af9(0x471)),..._0x96d759,async(_0x32ed42,_0x47d566)=>{const _0x4e3885=_0x2f1af9;let _0x3cbc8e=await this[_0x4e3885(0x83b)]({'request':_0x32ed42,'schema':xe,'ClassRef':ve,'execute':(_0x2ae171,_0x5e4388)=>D[_0x4e3885(0x471)](_0x2ae171,_0x5e4388)});return _0x47d566[_0x4e3885(0x781)](0xc8)[_0x4e3885(0x6de)](_0x3cbc8e);});}},hi=require(a0_0x1df5a5(0x6fb)),ut=class{},dt=class{},pt=class{},ht=class{},gt=class{},mt=class{},ee=class{},De=class{},ft=class extends ee{},wt=class extends ee{},yt=class extends V{constructor(..._0x5f3b58){const _0x1c5b61=a0_0x1df5a5;super(),this[_0x1c5b61(0x5e8)]=(0x0,hi[_0x1c5b61(0x899)])(),this[_0x1c5b61(0x5e8)][_0x1c5b61(0x880)](this[_0x1c5b61(0x597)](_0x1c5b61(0x38e)),..._0x5f3b58,async(_0x329819,_0x176e7e)=>{const _0x2cd2ec=_0x1c5b61;let _0x596d80=await this[_0x2cd2ec(0x83b)]({'request':_0x329819,'schema':ai,'ClassRef':ut,'execute':(_0x391c5c,_0x1f9c19)=>q['createGroup'](_0x391c5c,_0x1f9c19)});_0x176e7e[_0x2cd2ec(0x781)](0xc9)[_0x2cd2ec(0x6de)](_0x596d80);})[_0x1c5b61(0x403)](this[_0x1c5b61(0x597)](_0x1c5b61(0x5e1)),..._0x5f3b58,async(_0x2a458f,_0x1e7079)=>{const _0x2f2809=_0x1c5b61;let _0x1d9d3e=await this['groupValidate']({'request':_0x2a458f,'schema':ri,'ClassRef':dt,'execute':(_0x4249cb,_0x51aa3a)=>q['updateGroupPicture'](_0x4249cb,_0x51aa3a)});_0x1e7079[_0x2f2809(0x781)](0xc9)[_0x2f2809(0x6de)](_0x1d9d3e);})[_0x1c5b61(0x403)](this['routerPath'](_0x1c5b61(0x6db)),..._0x5f3b58,async(_0x49a9a7,_0x23fe50)=>{const _0x36f4a5=_0x1c5b61;let _0x54a15d=await this[_0x36f4a5(0x8b5)]({'request':_0x49a9a7,'schema':ni,'ClassRef':pt,'execute':(_0x3226f6,_0x599aee)=>q[_0x36f4a5(0x6db)](_0x3226f6,_0x599aee)});_0x23fe50[_0x36f4a5(0x781)](0xc9)[_0x36f4a5(0x6de)](_0x54a15d);})['put'](this[_0x1c5b61(0x597)](_0x1c5b61(0x1cf)),..._0x5f3b58,async(_0x1456ae,_0x2b32cc)=>{const _0x34c575=_0x1c5b61;let _0x329593=await this['groupValidate']({'request':_0x1456ae,'schema':ci,'ClassRef':ht,'execute':(_0x57f020,_0xef9050)=>q[_0x34c575(0x1cf)](_0x57f020,_0xef9050)});_0x2b32cc[_0x34c575(0x781)](0xc9)['json'](_0x329593);})[_0x1c5b61(0x403)](this['routerPath'](_0x1c5b61(0x2d2)),..._0x5f3b58,async(_0x48a31d,_0x4d78d1)=>{const _0x302b2a=_0x1c5b61;let _0x26fe5b=await this[_0x302b2a(0x8b5)]({'request':_0x48a31d,'schema':ui,'ClassRef':mt,'execute':(_0x5f2c5e,_0x1fc307)=>q['groupBetterSetting'](_0x5f2c5e,_0x1fc307)});_0x4d78d1['status'](0xc9)[_0x302b2a(0x6de)](_0x26fe5b);})[_0x1c5b61(0x403)](this[_0x1c5b61(0x597)](_0x1c5b61(0x6c0)),..._0x5f3b58,async(_0x2f49fc,_0x343327)=>{const _0x444d5d=_0x1c5b61;let _0x59d2c5=await this[_0x444d5d(0x8b5)]({'request':_0x2f49fc,'schema':li,'ClassRef':gt,'execute':(_0x1ee49b,_0x3993e2)=>q[_0x444d5d(0x6c0)](_0x1ee49b,_0x3993e2)});_0x343327[_0x444d5d(0x781)](0xc9)[_0x444d5d(0x6de)](_0x59d2c5);})[_0x1c5b61(0x403)](this[_0x1c5b61(0x597)](_0x1c5b61(0x50d)),..._0x5f3b58,async(_0x12c572,_0x2e028c)=>{const _0x4c079d=_0x1c5b61;let _0x4efe07=await this[_0x4c079d(0x8b5)]({'request':_0x12c572,'schema':oi,'ClassRef':wt,'execute':(_0xcf58e9,_0x1b9458)=>q[_0x4c079d(0x50d)](_0xcf58e9,_0x1b9458)});_0x2e028c[_0x4c079d(0x781)](0xc9)[_0x4c079d(0x6de)](_0x4efe07);})[_0x1c5b61(0x3be)](this[_0x1c5b61(0x597)](_0x1c5b61(0x32a)),..._0x5f3b58,async(_0x4a0907,_0x4ffe41)=>{const _0x508eaa=_0x1c5b61;let _0x24e4b4=await this['groupValidate']({'request':_0x4a0907,'schema':Pe,'ClassRef':ee,'execute':(_0x4d7945,_0x57a35d)=>q[_0x508eaa(0x653)](_0x4d7945,_0x57a35d)});_0x4ffe41[_0x508eaa(0x781)](0xc8)[_0x508eaa(0x6de)](_0x24e4b4);})[_0x1c5b61(0x3be)](this[_0x1c5b61(0x597)](_0x1c5b61(0x4f6)),..._0x5f3b58,async(_0xbe8fd8,_0xa14f7d)=>{const _0x3a16b2=_0x1c5b61;let _0x2bcf03=await this['dataValidate']({'request':_0xbe8fd8,'schema':N,'ClassRef':M,'execute':_0x3c9435=>q['findGroups'](_0x3c9435)});_0xa14f7d[_0x3a16b2(0x781)](0xc8)[_0x3a16b2(0x6de)](_0x2bcf03);})['get'](this[_0x1c5b61(0x597)]('participants'),..._0x5f3b58,async(_0x209bd6,_0x377d92)=>{const _0x55157c=_0x1c5b61;let _0x25a922=await this[_0x55157c(0x8b5)]({'request':_0x209bd6,'schema':Pe,'ClassRef':ee,'execute':(_0x4c2140,_0xfc8df9)=>q[_0x55157c(0x3ff)](_0x4c2140,_0xfc8df9)});_0x377d92['status'](0xc8)[_0x55157c(0x6de)](_0x25a922);})[_0x1c5b61(0x3be)](this[_0x1c5b61(0x597)]('inviteCode'),..._0x5f3b58,async(_0x1ac116,_0x2801ee)=>{const _0x139d7c=_0x1c5b61;let _0xba8b98=await this['groupValidate']({'request':_0x1ac116,'schema':Pe,'ClassRef':ee,'execute':(_0x30112a,_0x3f8139)=>q[_0x139d7c(0x536)](_0x30112a,_0x3f8139)});_0x2801ee['status'](0xc8)['json'](_0xba8b98);})[_0x1c5b61(0x880)](this[_0x1c5b61(0x597)](_0x1c5b61(0x8a2)),..._0x5f3b58,async(_0x98d4c1,_0x1c4c9c)=>{const _0x35fd7c=_0x1c5b61;let _0x2831b7=await this[_0x35fd7c(0x6c6)]({'request':_0x98d4c1,'schema':Ns,'ClassRef':De,'execute':(_0x14aeb0,_0x3949a0)=>q[_0x35fd7c(0x810)](_0x14aeb0,_0x3949a0)});_0x1c4c9c[_0x35fd7c(0x781)](0xc9)[_0x35fd7c(0x6de)](_0x2831b7);})['put'](this[_0x1c5b61(0x597)]('joinGroup'),..._0x5f3b58,async(_0x58ee09,_0x56f23c)=>{const _0x4b980f=_0x1c5b61;let _0x9d1ca4=await this[_0x4b980f(0x6c6)]({'request':_0x58ee09,'schema':Ns,'ClassRef':De,'execute':(_0x4a96a6,_0x52daea)=>q[_0x4b980f(0x5a5)](_0x4a96a6,_0x52daea)});_0x56f23c[_0x4b980f(0x781)](0xc9)[_0x4b980f(0x6de)](_0x9d1ca4);})[_0x1c5b61(0x403)](this[_0x1c5b61(0x597)](_0x1c5b61(0x47b)),..._0x5f3b58,async(_0x2f9154,_0x228609)=>{const _0x4e0c0b=_0x1c5b61;let _0x77566d=await this[_0x4e0c0b(0x8b5)]({'request':_0x2f9154,'schema':Pe,'ClassRef':ee,'execute':(_0x30476b,_0x53e6f7)=>q[_0x4e0c0b(0x47b)](_0x30476b,_0x53e6f7)});_0x228609[_0x4e0c0b(0x781)](0xc9)[_0x4e0c0b(0x6de)](_0x77566d);})[_0x1c5b61(0x403)](this[_0x1c5b61(0x597)](_0x1c5b61(0x49e)),..._0x5f3b58,async(_0x1d3420,_0x4efb65)=>{const _0x50ca37=_0x1c5b61;let _0x478417=await this[_0x50ca37(0x8b5)]({'request':_0x1d3420,'schema':ii,'ClassRef':ft,'execute':(_0x830a94,_0x406f0d)=>q[_0x50ca37(0x225)](_0x830a94,_0x406f0d)});_0x4efb65[_0x50ca37(0x781)](0xc9)[_0x50ca37(0x6de)](_0x478417);})[_0x1c5b61(0x1be)](this[_0x1c5b61(0x597)](_0x1c5b61(0x2fa)),..._0x5f3b58,async(_0x3dd137,_0x58bda0)=>{const _0x15cfde=_0x1c5b61;let _0x994ca6=await this[_0x15cfde(0x8b5)]({'request':_0x3dd137,'schema':{},'ClassRef':ee,'execute':(_0x5af9b6,_0x451b56)=>q[_0x15cfde(0x2fa)](_0x5af9b6,_0x451b56)});_0x58bda0[_0x15cfde(0x781)](0xc8)[_0x15cfde(0x6de)](_0x994ca6);});}},gi=require(a0_0x1df5a5(0x6fb)),bt=class extends V{constructor(_0xcc0e77,..._0x5162de){const _0x26dc7f=a0_0x1df5a5;super(),this[_0x26dc7f(0x4e6)]=_0xcc0e77,this[_0x26dc7f(0x5e8)]=(0x0,gi[_0x26dc7f(0x899)])();let _0x1c00d3=_0xcc0e77[_0x26dc7f(0x3be)](_0x26dc7f(0x6d5));this['router'][_0x26dc7f(0x880)](_0x26dc7f(0x5d1),..._0x5162de,async(_0xd201bf,_0x400a21)=>{const _0x190b71=_0x26dc7f;let {instanceName:_0x9ac542,apikey:_0x220b2d,number:_0x5ae022}=_0xd201bf[_0x190b71(0x4a9)],_0x23ca48=await ue[_0x190b71(0x5c7)]({'instanceName':_0x9ac542,'apikey':_0x220b2d,'number':_0x5ae022});return _0x400a21[_0x190b71(0x781)](0xc9)[_0x190b71(0x6de)](_0x23ca48);})[_0x26dc7f(0x403)](this[_0x26dc7f(0x597)]('restart'),..._0x5162de,async(_0x75adef,_0x2ae15f)=>{const _0x189390=_0x26dc7f;let _0x18891d=await this[_0x189390(0x83b)]({'request':_0x75adef,'schema':N,'ClassRef':M,'execute':_0x490b1c=>ue['restartInstance'](_0x490b1c)});return _0x2ae15f[_0x189390(0x781)](0xc8)[_0x189390(0x6de)](_0x18891d);})[_0x26dc7f(0x3be)](this['routerPath'](_0x26dc7f(0x891)),..._0x5162de,async(_0x3b9064,_0x29df52)=>{const _0x41a8a2=_0x26dc7f;let _0x43b161=await this[_0x41a8a2(0x83b)]({'request':_0x3b9064,'schema':N,'ClassRef':M,'execute':_0x17a655=>ue[_0x41a8a2(0x2e9)](_0x17a655)});return _0x29df52[_0x41a8a2(0x781)](0xc8)[_0x41a8a2(0x6de)](_0x43b161);})[_0x26dc7f(0x3be)](this[_0x26dc7f(0x597)](_0x26dc7f(0x8af)),..._0x5162de,async(_0x1216b5,_0x2da69e)=>{const _0x2efbc4=_0x26dc7f;let _0x4df7d2=await this['dataValidate']({'request':_0x1216b5,'schema':N,'ClassRef':M,'execute':_0xa8ba=>ue[_0x2efbc4(0x8af)](_0xa8ba)});return _0x2da69e[_0x2efbc4(0x781)](0xc8)['json'](_0x4df7d2);})[_0x26dc7f(0x3be)](this[_0x26dc7f(0x597)](_0x26dc7f(0x7a8),!0x1),..._0x5162de,async(_0x5c62e8,_0x585222)=>{const _0x4d2944=_0x26dc7f;let _0x51173e=await this[_0x4d2944(0x83b)]({'request':_0x5c62e8,'schema':null,'ClassRef':M,'execute':_0x107e3c=>ue[_0x4d2944(0x7a8)](_0x107e3c)});return _0x585222[_0x4d2944(0x781)](0xc8)[_0x4d2944(0x6de)](_0x51173e);})[_0x26dc7f(0x1be)](this[_0x26dc7f(0x597)](_0x26dc7f(0x868)),..._0x5162de,async(_0x491376,_0xb559a5)=>{const _0x2ec6ab=_0x26dc7f;let _0x310bc9=await this[_0x2ec6ab(0x83b)]({'request':_0x491376,'schema':N,'ClassRef':M,'execute':_0x261dd8=>ue[_0x2ec6ab(0x868)](_0x261dd8)});return _0xb559a5[_0x2ec6ab(0x781)](0xc8)[_0x2ec6ab(0x6de)](_0x310bc9);})['delete'](this[_0x26dc7f(0x597)](_0x26dc7f(0x1be)),..._0x5162de,async(_0x43ad30,_0x4d55a0)=>{const _0x5aa739=_0x26dc7f;let _0x52f7f5=await this[_0x5aa739(0x83b)]({'request':_0x43ad30,'schema':N,'ClassRef':M,'execute':_0x45fd54=>ue[_0x5aa739(0x2c8)](_0x45fd54)});return _0x4d55a0[_0x5aa739(0x781)](0xc8)[_0x5aa739(0x6de)](_0x52f7f5);});}},mi=require(a0_0x1df5a5(0x6fb)),Rs=class{},H=class extends Rs{},St=class extends H{},Mt=class extends H{},Ct=class extends H{},vt=class extends H{},ke=class extends H{},Et=class extends H{},Nt=class extends H{},$t=class extends H{},Rt=class extends H{},At=class{},Tt=class extends V{constructor(..._0xfe869f){const _0x3bc567=a0_0x1df5a5;super(),this[_0x3bc567(0x5e8)]=(0x0,mi['Router'])(),this[_0x3bc567(0x5e8)][_0x3bc567(0x880)](this[_0x3bc567(0x597)]('sendText'),..._0xfe869f,async(_0x174a39,_0x5c15a0)=>{const _0x74b6d7=_0x3bc567;let _0x48fa71=await this[_0x74b6d7(0x83b)]({'request':_0x174a39,'schema':Pa,'ClassRef':St,'execute':(_0x1d24d9,_0x4a2c92)=>B['sendText'](_0x1d24d9,_0x4a2c92)});return _0x5c15a0['status'](0xc9)[_0x74b6d7(0x6de)](_0x48fa71);})[_0x3bc567(0x880)](this[_0x3bc567(0x597)](_0x3bc567(0x36d)),..._0xfe869f,async(_0x2a5625,_0x5bcf86)=>{const _0xf4ae27=_0x3bc567;let _0x4289c0=await this[_0xf4ae27(0x83b)]({'request':_0x2a5625,'schema':Fa,'ClassRef':ke,'execute':(_0xd18c42,_0x5561b4)=>B['sendMedia'](_0xd18c42,_0x5561b4)});return _0x5bcf86[_0xf4ae27(0x781)](0xc9)['json'](_0x4289c0);})[_0x3bc567(0x880)](this['routerPath'](_0x3bc567(0x28a)),..._0xfe869f,async(_0xb4ea50,_0x1803eb)=>{const _0x40b099=_0x3bc567;let _0x3ced0e=await this['dataValidate']({'request':_0xb4ea50,'schema':Ja,'ClassRef':vt,'execute':(_0x442cd9,_0x182409)=>B[_0x40b099(0x28a)](_0x442cd9,_0x182409)});return _0x1803eb['status'](0xc9)[_0x40b099(0x6de)](_0x3ced0e);})[_0x3bc567(0x880)](this[_0x3bc567(0x597)](_0x3bc567(0x47e)),..._0xfe869f,async(_0xa6a7d3,_0x3f78f8)=>{const _0x5af26a=_0x3bc567;let _0x559447=await this[_0x5af26a(0x83b)]({'request':_0xa6a7d3,'schema':Ua,'ClassRef':ke,'execute':(_0x1bc904,_0x73984e)=>B[_0x5af26a(0x47e)](_0x1bc904,_0x73984e)});return _0x3f78f8[_0x5af26a(0x781)](0xc9)['json'](_0x559447);})[_0x3bc567(0x880)](this[_0x3bc567(0x597)](_0x3bc567(0x776)),..._0xfe869f,async(_0x1df317,_0x17b562)=>{const _0x85cc6d=_0x3bc567;let _0x5c5b89=await this[_0x85cc6d(0x83b)]({'request':_0x1df317,'schema':qa,'ClassRef':Nt,'execute':(_0x25b93d,_0x2467ec)=>B[_0x85cc6d(0x776)](_0x25b93d,_0x2467ec)});return _0x17b562[_0x85cc6d(0x781)](0xc9)[_0x85cc6d(0x6de)](_0x5c5b89);})['post'](this[_0x3bc567(0x597)](_0x3bc567(0x5ff)),..._0xfe869f,async(_0x293d0a,_0x32591d)=>{const _0x4699f5=_0x3bc567;let _0x4e2a37=await this[_0x4699f5(0x83b)]({'request':_0x293d0a,'schema':Va,'ClassRef':$t,'execute':(_0x5920dd,_0x379d4d)=>B[_0x4699f5(0x5ff)](_0x5920dd,_0x379d4d)});return _0x32591d['status'](0xc9)[_0x4699f5(0x6de)](_0x4e2a37);})['post'](this[_0x3bc567(0x597)](_0x3bc567(0x2a4)),..._0xfe869f,async(_0x4b1c80,_0xafbe1)=>{const _0xd7782=_0x3bc567;let _0x43f133=await this[_0xd7782(0x83b)]({'request':_0x4b1c80,'schema':Ga,'ClassRef':Rt,'execute':(_0x4f630d,_0x14fb3a)=>B['sendContact'](_0x4f630d,_0x14fb3a)});return _0xafbe1[_0xd7782(0x781)](0xc9)[_0xd7782(0x6de)](_0x43f133);})[_0x3bc567(0x880)](this[_0x3bc567(0x597)](_0x3bc567(0x4d7)),..._0xfe869f,async(_0x4fa2c8,_0x28eb8b)=>{const _0x5a4b44=_0x3bc567;let _0x172d19=await this[_0x5a4b44(0x83b)]({'request':_0x4fa2c8,'schema':Ba,'ClassRef':At,'execute':(_0x3b3445,_0x362204)=>B['sendReaction'](_0x3b3445,_0x362204)});return _0x28eb8b['status'](0xc9)[_0x5a4b44(0x6de)](_0x172d19);})[_0x3bc567(0x880)](this[_0x3bc567(0x597)](_0x3bc567(0x60a)),..._0xfe869f,async(_0x59efe7,_0x540951)=>{const _0x5b25d8=_0x3bc567;let _0xdee2f0=await this[_0x5b25d8(0x83b)]({'request':_0x59efe7,'schema':ja,'ClassRef':Ct,'execute':(_0x3ea67e,_0x219576)=>B[_0x5b25d8(0x60a)](_0x3ea67e,_0x219576)});return _0x540951['status'](0xc9)[_0x5b25d8(0x6de)](_0xdee2f0);})[_0x3bc567(0x880)](this['routerPath'](_0x3bc567(0x930)),..._0xfe869f,async(_0x136892,_0x3df05e)=>{const _0x374688=_0x3bc567;let _0x161f61=await this[_0x374688(0x83b)]({'request':_0x136892,'schema':La,'ClassRef':Mt,'execute':(_0x3f0e1e,_0x21f558)=>B[_0x374688(0x930)](_0x3f0e1e,_0x21f558)});return _0x3df05e[_0x374688(0x781)](0xc9)[_0x374688(0x6de)](_0x161f61);})[_0x3bc567(0x880)](this[_0x3bc567(0x597)](_0x3bc567(0x3e5)),..._0xfe869f,async(_0x5adb0f,_0x2fbf48)=>{const _0x3699c4=_0x3bc567;let _0x178d6a=await this[_0x3699c4(0x83b)]({'request':_0x5adb0f,'schema':ka,'ClassRef':Et,'execute':(_0x33152c,_0x57fee8)=>B[_0x3699c4(0x3e5)](_0x33152c,_0x57fee8)});return _0x2fbf48[_0x3699c4(0x781)](0xc9)[_0x3699c4(0x6de)](_0x178d6a);});}},fi=require(a0_0x1df5a5(0x6fb)),It=class{},_t=class extends V{constructor(..._0x3e8a5c){const _0x269369=a0_0x1df5a5;super(),this[_0x269369(0x5e8)]=(0x0,fi[_0x269369(0x899)])(),this[_0x269369(0x5e8)][_0x269369(0x880)](this[_0x269369(0x597)](_0x269369(0x297)),..._0x3e8a5c,async(_0x14b53f,_0x1494f9)=>{const _0x51254f=_0x269369;let _0x83f072=await this[_0x51254f(0x83b)]({'request':_0x14b53f,'schema':di,'ClassRef':It,'execute':(_0xf63738,_0x20b4c9)=>As[_0x51254f(0x7d0)](_0xf63738,_0x20b4c9)});_0x1494f9[_0x51254f(0x781)](0xc9)[_0x51254f(0x6de)](_0x83f072);})['get'](this[_0x269369(0x597)]('find'),..._0x3e8a5c,async(_0x42b181,_0x376697)=>{const _0x52a206=_0x269369;let _0x337f36=await this[_0x52a206(0x83b)]({'request':_0x42b181,'schema':N,'ClassRef':M,'execute':_0xf60bf=>As[_0x52a206(0x57e)](_0xf60bf)});_0x376697[_0x52a206(0x781)](0xc8)[_0x52a206(0x6de)](_0x337f36);});}},wi=require(a0_0x1df5a5(0x6fb)),y=new $(a0_0x1df5a5(0x825)),Ot=class extends V{constructor(..._0x13a2a2){const _0x139f19=a0_0x1df5a5;super(),this[_0x139f19(0x5e8)]=(0x0,wi[_0x139f19(0x899)])(),this['router'][_0x139f19(0x880)](this[_0x139f19(0x597)]('scheduleMessage'),..._0x13a2a2,async(_0x3e47be,_0xc4ce1f)=>{const _0x47d481=_0x139f19;let _0x3ea986=_0x3e47be[_0x47d481(0x4a9)];y['verbose']('request\x20received\x20in\x20scheduleMessage'),y['verbose'](_0x47d481(0x4b9)),y[_0x47d481(0x3fb)](_0x3e47be[_0x47d481(0x4a9)]);let _0x3e3b29=await this[_0x47d481(0x83b)]({'request':_0x3e47be,'schema':N,'ClassRef':M,'execute':_0x32ef16=>O[_0x47d481(0x612)](_0x32ef16,_0x3ea986)});_0xc4ce1f[_0x47d481(0x781)](0xc8)[_0x47d481(0x6de)](_0x3e3b29);})['get'](this['routerPath']('scheduleMessage'),..._0x13a2a2,async(_0x1aa9dc,_0x5703d6)=>{const _0x5c14d3=_0x139f19;let _0x164de8=await this[_0x5c14d3(0x83b)]({'request':_0x1aa9dc,'schema':N,'ClassRef':M,'execute':_0x54ecf9=>O[_0x5c14d3(0x684)](_0x54ecf9)});_0x5703d6[_0x5c14d3(0x781)](0xc8)['json'](_0x164de8);})['delete'](this['routerPath'](_0x139f19(0x433)),..._0x13a2a2,async(_0x24607e,_0x2137fc)=>{const _0x35e0ae=_0x139f19;y['verbose']('request\x20received\x20in\x20deleteDoneMessages');let _0x5136e0=await this[_0x35e0ae(0x83b)]({'request':_0x24607e,'schema':N,'ClassRef':M,'execute':_0x5c5e05=>O[_0x35e0ae(0x433)](_0x5c5e05)});_0x2137fc[_0x35e0ae(0x781)](0xc8)[_0x35e0ae(0x6de)](_0x5136e0);})[_0x139f19(0x880)](this[_0x139f19(0x597)]('startFlow'),..._0x13a2a2,async(_0x1bf52f,_0x1838be)=>{const _0x378613=_0x139f19;let _0x22f82c=_0x1bf52f[_0x378613(0x4a9)];y[_0x378613(0x3fb)](_0x378613(0x544)),y[_0x378613(0x3fb)](_0x378613(0x4b9)),y['verbose'](_0x1bf52f[_0x378613(0x4a9)]);let _0x50094e=await this[_0x378613(0x83b)]({'request':_0x1bf52f,'schema':N,'ClassRef':M,'execute':_0x54670c=>O[_0x378613(0x710)](_0x54670c,_0x22f82c)});_0x1838be[_0x378613(0x781)](0xc8)['json'](_0x50094e);})[_0x139f19(0x3be)](this[_0x139f19(0x597)](_0x139f19(0x4d3)),..._0x13a2a2,async(_0x351edd,_0x2d0028)=>{const _0x4ef643=_0x139f19;y[_0x4ef643(0x3fb)]('request\x20received\x20in\x20getAutomateSystem');let _0x5d5210=await this[_0x4ef643(0x83b)]({'request':_0x351edd,'schema':N,'ClassRef':M,'execute':_0x827683=>O[_0x4ef643(0x4d3)](_0x827683)});_0x2d0028[_0x4ef643(0x781)](0xc8)[_0x4ef643(0x6de)](_0x5d5210);})[_0x139f19(0x3be)](this['routerPath'](_0x139f19(0x700)),..._0x13a2a2,async(_0xe27f36,_0x529e64)=>{const _0x46bfed=_0x139f19;y['verbose'](_0x46bfed(0x919));let _0x4a1048=await this[_0x46bfed(0x83b)]({'request':_0xe27f36,'schema':N,'ClassRef':M,'execute':_0x4d14ff=>O[_0x46bfed(0x4d3)](_0x4d14ff)});_0x529e64[_0x46bfed(0x781)](0xc8)[_0x46bfed(0x6de)](_0x4a1048);})[_0x139f19(0x880)](this[_0x139f19(0x597)](_0x139f19(0x649)),..._0x13a2a2,async(_0x222435,_0x2bf04e)=>{const _0x2e4154=_0x139f19;let _0x56bf6f=_0x222435[_0x2e4154(0x4a9)];y[_0x2e4154(0x3fb)](_0x2e4154(0x842)),y[_0x2e4154(0x3fb)](_0x2e4154(0x4b9)),y[_0x2e4154(0x3fb)](_0x222435[_0x2e4154(0x4a9)]);let _0x32fa89=await this[_0x2e4154(0x83b)]({'request':_0x222435,'schema':N,'ClassRef':M,'execute':_0x4f16ab=>O[_0x2e4154(0x649)](_0x4f16ab,_0x56bf6f)});_0x2bf04e[_0x2e4154(0x781)](0xc8)[_0x2e4154(0x6de)](_0x32fa89);})[_0x139f19(0x880)](this[_0x139f19(0x597)](_0x139f19(0x3ed)),..._0x13a2a2,async(_0x3b07be,_0x38ab3e)=>{const _0x16f1a3=_0x139f19;let _0x31a483=_0x3b07be[_0x16f1a3(0x4a9)];y['verbose'](_0x16f1a3(0x656)),y[_0x16f1a3(0x3fb)]('request\x20body:\x20'),y[_0x16f1a3(0x3fb)](_0x3b07be[_0x16f1a3(0x4a9)]);let _0x1dfc0b=await this['dataValidate']({'request':_0x3b07be,'schema':N,'ClassRef':M,'execute':_0x393709=>O[_0x16f1a3(0x3ed)](_0x393709,_0x31a483)});_0x38ab3e['status'](0xc8)[_0x16f1a3(0x6de)](_0x1dfc0b);})[_0x139f19(0x880)](this[_0x139f19(0x597)]('updateAutoCompleteMessages'),..._0x13a2a2,async(_0x1e6220,_0x5eeda0)=>{const _0x1a0586=_0x139f19;let _0x3d5abc=_0x1e6220[_0x1a0586(0x4a9)];y[_0x1a0586(0x3fb)](_0x1a0586(0x3ab)),y[_0x1a0586(0x3fb)](_0x1a0586(0x4b9)),y[_0x1a0586(0x3fb)](_0x1e6220[_0x1a0586(0x4a9)]);let _0x5ee6e1=await this['dataValidate']({'request':_0x1e6220,'schema':N,'ClassRef':M,'execute':_0x12badb=>O[_0x1a0586(0x89f)](_0x12badb,_0x3d5abc)});_0x5eeda0[_0x1a0586(0x781)](0xc8)[_0x1a0586(0x6de)](_0x5ee6e1);})[_0x139f19(0x880)](this[_0x139f19(0x597)]('updateFlowConfig'),..._0x13a2a2,async(_0x2057bf,_0x132b80)=>{const _0x4b8b09=_0x139f19;let _0x2a7192=_0x2057bf[_0x4b8b09(0x4a9)];y['verbose'](_0x4b8b09(0x253)),y[_0x4b8b09(0x3fb)](_0x4b8b09(0x4b9)),y[_0x4b8b09(0x3fb)](_0x2057bf[_0x4b8b09(0x4a9)]);let _0x49787a=await this[_0x4b8b09(0x83b)]({'request':_0x2057bf,'schema':N,'ClassRef':M,'execute':_0x51603f=>O[_0x4b8b09(0x37b)](_0x51603f,_0x2a7192)});_0x132b80[_0x4b8b09(0x781)](0xc8)[_0x4b8b09(0x6de)](_0x49787a);})['post'](this[_0x139f19(0x597)](_0x139f19(0x388)),..._0x13a2a2,async(_0x26d4c3,_0x3cb13b)=>{const _0x90cf92=_0x139f19;let _0x16a7d2=_0x26d4c3[_0x90cf92(0x4a9)];y[_0x90cf92(0x3fb)]('request\x20received\x20in\x20getConversation'),y[_0x90cf92(0x3fb)](_0x90cf92(0x4b9)),y[_0x90cf92(0x3fb)](_0x26d4c3[_0x90cf92(0x4a9)]);let _0xb02c35=await this[_0x90cf92(0x83b)]({'request':_0x26d4c3,'schema':N,'ClassRef':M,'execute':_0x58263b=>O[_0x90cf92(0x388)](_0x58263b,_0x16a7d2)});_0x3cb13b[_0x90cf92(0x781)](0xc8)[_0x90cf92(0x6de)](_0xb02c35);})[_0x139f19(0x880)](this[_0x139f19(0x597)](_0x139f19(0x310)),..._0x13a2a2,async(_0xa1dd58,_0x29f537)=>{const _0xd186c2=_0x139f19;let _0xfc74b5=_0xa1dd58[_0xd186c2(0x4a9)];y[_0xd186c2(0x3fb)]('request\x20received\x20in\x20fetchConversation'),y[_0xd186c2(0x3fb)]('request\x20body:\x20'),y['verbose'](_0xa1dd58[_0xd186c2(0x4a9)]);let _0x5a36a9=await this[_0xd186c2(0x83b)]({'request':_0xa1dd58,'schema':N,'ClassRef':M,'execute':_0x11ce0f=>O['fetchConversation'](_0x11ce0f,_0xfc74b5)});_0x29f537['status'](0xc8)['json'](_0x5a36a9);})[_0x139f19(0x880)](this[_0x139f19(0x597)](_0x139f19(0x872)),..._0x13a2a2,async(_0x162325,_0x329d1e)=>{const _0x158868=_0x139f19;let _0x2e8909=_0x162325['body'];y['verbose']('request\x20received\x20in\x20editConversation'),y[_0x158868(0x3fb)](_0x158868(0x4b9)),y[_0x158868(0x3fb)](_0x162325[_0x158868(0x4a9)]);let _0x56d2c3=await this[_0x158868(0x83b)]({'request':_0x162325,'schema':N,'ClassRef':M,'execute':_0x28c5bf=>O['editConversation'](_0x28c5bf,_0x2e8909)});_0x329d1e[_0x158868(0x781)](0xc8)[_0x158868(0x6de)](_0x56d2c3);})[_0x139f19(0x1be)](this[_0x139f19(0x597)](_0x139f19(0x79f)),..._0x13a2a2,async(_0xe7122b,_0x151ca0)=>{const _0x29eb7e=_0x139f19;let _0x2de52d=_0xe7122b[_0x29eb7e(0x4a9)];y['verbose']('request\x20received\x20in\x20deleteConversation'),y[_0x29eb7e(0x3fb)](_0x29eb7e(0x4b9)),y[_0x29eb7e(0x3fb)](_0xe7122b[_0x29eb7e(0x4a9)]);let _0x4e59ab=await this[_0x29eb7e(0x83b)]({'request':_0xe7122b,'schema':N,'ClassRef':M,'execute':_0x1bf0be=>O[_0x29eb7e(0x79f)](_0x1bf0be,_0x2de52d)});_0x151ca0[_0x29eb7e(0x781)](0xc8)[_0x29eb7e(0x6de)](_0x4e59ab);})[_0x139f19(0x880)](this['routerPath']('createflow'),..._0x13a2a2,async(_0x3d35c9,_0x19603f)=>{const _0x22c631=_0x139f19;let _0x24f324=_0x3d35c9[_0x22c631(0x4a9)],_0x44b71a=_0x3d35c9['headers'][_0x22c631(0x829)];y['verbose'](_0x22c631(0x5a0)),y[_0x22c631(0x3fb)](_0x22c631(0x4b9)),y[_0x22c631(0x3fb)](_0x3d35c9[_0x22c631(0x4a9)]);let _0x545673=await this['dataValidate']({'request':_0x3d35c9,'schema':N,'ClassRef':M,'execute':_0x194679=>O[_0x22c631(0x1f3)](_0x194679,_0x24f324,_0x44b71a)});_0x19603f[_0x22c631(0x781)](0xc8)[_0x22c631(0x6de)](_0x545673);})[_0x139f19(0x880)](this[_0x139f19(0x597)](_0x139f19(0x54a)),..._0x13a2a2,async(_0x15c632,_0x42c05e)=>{const _0xe8d479=_0x139f19;let _0x5b53de=_0x15c632[_0xe8d479(0x4a9)],_0x437206=_0x15c632[_0xe8d479(0x916)]['apikey'];y[_0xe8d479(0x3fb)](_0xe8d479(0x50f)),y[_0xe8d479(0x3fb)](_0xe8d479(0x4b9)),y[_0xe8d479(0x3fb)](_0x15c632['body']),delete _0x5b53de['blocks'],delete _0x5b53de[_0xe8d479(0x763)],delete _0x5b53de['groups'],delete _0x5b53de[_0xe8d479(0x888)];let _0x14e8de=await this[_0xe8d479(0x83b)]({'request':_0x15c632,'schema':N,'ClassRef':M,'execute':_0x5a27db=>O[_0xe8d479(0x203)](_0x5a27db,_0x5b53de,_0x437206)});_0x42c05e[_0xe8d479(0x781)](0xc8)[_0xe8d479(0x6de)](_0x14e8de);})['post'](this[_0x139f19(0x597)](_0x139f19(0x681)),..._0x13a2a2,async(_0x3d106b,_0x3733a1)=>{const _0x63c6f3=_0x139f19;let _0x211211=_0x3d106b[_0x63c6f3(0x4a9)];y[_0x63c6f3(0x3fb)](_0x63c6f3(0x50f)),y[_0x63c6f3(0x3fb)](_0x63c6f3(0x4b9)),y[_0x63c6f3(0x3fb)](_0x3d106b[_0x63c6f3(0x4a9)]);let _0x3148fd=await this[_0x63c6f3(0x83b)]({'request':_0x3d106b,'schema':N,'ClassRef':M,'execute':_0x36a1d1=>O[_0x63c6f3(0x2d4)](_0x36a1d1,_0x211211)});_0x3733a1['status'](0xc8)[_0x63c6f3(0x6de)](_0x3148fd);})[_0x139f19(0x880)](this['routerPath']('editflowreply'),..._0x13a2a2,async(_0x1fd4ce,_0x5c6fef)=>{const _0x366426=_0x139f19;let _0x82c6f5=_0x1fd4ce[_0x366426(0x4a9)];y['verbose'](_0x366426(0x50f)),y[_0x366426(0x3fb)](_0x366426(0x4b9)),y[_0x366426(0x3fb)](_0x1fd4ce[_0x366426(0x4a9)]);let _0x50e3f2=await this['dataValidate']({'request':_0x1fd4ce,'schema':N,'ClassRef':M,'execute':_0xc544b6=>O[_0x366426(0x4e3)](_0xc544b6,_0x82c6f5)});_0x5c6fef[_0x366426(0x781)](0xc8)[_0x366426(0x6de)](_0x50e3f2);})[_0x139f19(0x880)](this[_0x139f19(0x597)](_0x139f19(0x7cb)),..._0x13a2a2,async(_0x3e3305,_0x402f8a)=>{const _0x2e930b=_0x139f19;let _0x4a7cf7=_0x3e3305[_0x2e930b(0x4a9)];y[_0x2e930b(0x3fb)]('request\x20received\x20in\x20editFlow'),y[_0x2e930b(0x3fb)](_0x2e930b(0x4b9)),y[_0x2e930b(0x3fb)](_0x3e3305[_0x2e930b(0x4a9)]);let _0x1158b0=await this['dataValidate']({'request':_0x3e3305,'schema':N,'ClassRef':M,'execute':_0x1951df=>O[_0x2e930b(0x88a)](_0x1951df,_0x4a7cf7)});_0x402f8a[_0x2e930b(0x781)](0xc8)[_0x2e930b(0x6de)](_0x1158b0);})[_0x139f19(0x880)](this['routerPath'](_0x139f19(0x49c)),..._0x13a2a2,async(_0xf7ea14,_0x29d9fc)=>{const _0x4e5281=_0x139f19;let _0x6375a9=_0xf7ea14[_0x4e5281(0x4a9)];y[_0x4e5281(0x3fb)](_0x4e5281(0x495)),y[_0x4e5281(0x3fb)](_0x4e5281(0x4b9)),y[_0x4e5281(0x3fb)](_0xf7ea14[_0x4e5281(0x4a9)]);let _0x84f3a2=await this[_0x4e5281(0x83b)]({'request':_0xf7ea14,'schema':N,'ClassRef':M,'execute':_0x5d84ca=>O[_0x4e5281(0x881)](_0x5d84ca,_0x6375a9)});_0x29d9fc[_0x4e5281(0x781)](0xc8)[_0x4e5281(0x6de)](_0x84f3a2);})[_0x139f19(0x880)](this[_0x139f19(0x597)]('editflowcondition'),..._0x13a2a2,async(_0x339254,_0x288b49)=>{const _0x58ab0b=_0x139f19;let _0xbf2e20=_0x339254[_0x58ab0b(0x4a9)];y[_0x58ab0b(0x3fb)](_0x58ab0b(0x1b1)),y[_0x58ab0b(0x3fb)](_0x58ab0b(0x4b9)),y[_0x58ab0b(0x3fb)](_0x339254[_0x58ab0b(0x4a9)]);let _0x4d9367=await this[_0x58ab0b(0x83b)]({'request':_0x339254,'schema':N,'ClassRef':M,'execute':_0x58ff89=>O[_0x58ab0b(0x1e3)](_0x58ff89,_0xbf2e20)});_0x288b49[_0x58ab0b(0x781)](0xc8)[_0x58ab0b(0x6de)](_0x4d9367);})['post'](this[_0x139f19(0x597)](_0x139f19(0x957)),..._0x13a2a2,async(_0x5e8694,_0x3e5bb5)=>{const _0x1771d9=_0x139f19;let _0x2295ac=_0x5e8694[_0x1771d9(0x4a9)];y[_0x1771d9(0x3fb)]('request\x20received\x20in\x20editFlowvariable'),y[_0x1771d9(0x3fb)](_0x1771d9(0x4b9)),y[_0x1771d9(0x3fb)](_0x5e8694['body']);let _0x4d67d3=await this[_0x1771d9(0x83b)]({'request':_0x5e8694,'schema':N,'ClassRef':M,'execute':_0x4c3c93=>O[_0x1771d9(0x934)](_0x4c3c93,_0x2295ac)});_0x3e5bb5[_0x1771d9(0x781)](0xc8)[_0x1771d9(0x6de)](_0x4d67d3);})[_0x139f19(0x880)](this[_0x139f19(0x597)](_0x139f19(0x416)),..._0x13a2a2,async(_0x227f98,_0x267b4f)=>{const _0x4d16e9=_0x139f19;let _0x6bbaa5=_0x227f98['body'];y['verbose'](_0x4d16e9(0x777)),y[_0x4d16e9(0x3fb)]('request\x20body:\x20'),y[_0x4d16e9(0x3fb)](_0x227f98[_0x4d16e9(0x4a9)]);let _0x1e0b0f=await this[_0x4d16e9(0x83b)]({'request':_0x227f98,'schema':N,'ClassRef':M,'execute':_0x2809f3=>O[_0x4d16e9(0x496)](_0x2809f3,_0x6bbaa5)});_0x267b4f[_0x4d16e9(0x781)](0xc8)[_0x4d16e9(0x6de)](_0x1e0b0f);})[_0x139f19(0x1be)](this['routerPath'](_0x139f19(0x5a4)),..._0x13a2a2,async(_0x49c900,_0x4f5aeb)=>{const _0x38345e=_0x139f19;let _0x4765bd=_0x49c900['body'];y[_0x38345e(0x3fb)]('request\x20received\x20in\x20deleteFlow'),y[_0x38345e(0x3fb)]('request\x20body:\x20'),y[_0x38345e(0x3fb)](_0x49c900[_0x38345e(0x4a9)]);let _0x3ffbe6=await this[_0x38345e(0x83b)]({'request':_0x49c900,'schema':N,'ClassRef':M,'execute':_0x51fa3c=>O['deleteFlow'](_0x51fa3c,_0x4765bd)});_0x4f5aeb[_0x38345e(0x781)](0xc8)[_0x38345e(0x6de)](_0x3ffbe6);})['get'](this['routerPath'](_0x139f19(0x48c)),..._0x13a2a2,async(_0x5c7227,_0x1eb2aa)=>{const _0x431327=_0x139f19;y[_0x431327(0x3fb)]('request\x20received\x20in\x20allFlows');let _0x2e1fd3=await this[_0x431327(0x83b)]({'request':_0x5c7227,'schema':N,'ClassRef':M,'execute':_0x3e1fb4=>O[_0x431327(0x21e)](_0x3e1fb4)});_0x1eb2aa[_0x431327(0x781)](0xc8)['json'](_0x2e1fd3);});}},Mi=I(require(a0_0x1df5a5(0x2e2))),te={};function yi(_0x3363e9,_0x445952,_0x505be7,_0xfd6f34){te[_0x3363e9]||(te[_0x3363e9]={}),te[_0x3363e9][_0x445952]={'id':_0x445952,'response':_0x505be7,'events':_0xfd6f34};}function bi(_0x3464fa,_0x47e7db){!te[_0x3464fa]||!te[_0x3464fa][_0x47e7db]||delete te[_0x3464fa][_0x47e7db];}function F(_0x58446a,_0x54af6d,_0x9c09ea){const _0x47debb=a0_0x1df5a5;if(!te[_0x58446a])return;let _0x5ce281=_0x47debb(0x360)+JSON[_0x47debb(0x28d)](_0x9c09ea)+'\x0a\x0a';Object[_0x47debb(0x6f6)](te[_0x58446a])[_0x47debb(0x504)](_0x379ad9=>{const _0x27979a=_0x47debb;_0x379ad9[_0x27979a(0x8bc)][_0x27979a(0x5f2)](_0x54af6d)&&_0x379ad9[_0x27979a(0x3ec)][_0x27979a(0x64f)](_0x5ce281);});}function Si(){const _0x39e617=a0_0x1df5a5;let _0x97af7={};for(let _0xd29ed6 in te)_0x97af7[_0xd29ed6]=Object[_0x39e617(0x6f6)](te[_0xd29ed6])[_0x39e617(0x948)](_0x4caf39=>({'id':_0x4caf39['id'],'events':_0x4caf39[_0x39e617(0x8bc)]}));return _0x97af7;}var Ci=require('uuid'),Is=require('mongoose'),Ts=class{},Io=new Is[(a0_0x1df5a5(0x469))]({'url':{'type':String,'required':!0x0},'enabled':{'type':Boolean,'required':!0x0},'local_map':{'type':Boolean},'STATUS_INSTANCE':{'type':Boolean,'required':!0x0},'QRCODE_UPDATED':{'type':Boolean,'required':!0x0},'MESSAGES_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_UPSERT':{'type':Boolean,'required':!0x0},'SEND_MESSAGE':{'type':Boolean,'required':!0x0},'GROUPS_UPSERT':{'type':Boolean,'required':!0x0},'GROUPS_UPDATE':{'type':Boolean,'required':!0x0},'GROUP_PARTICIPANTS_UPDATE':{'type':Boolean,'required':!0x0},'CONNECTION_UPDATE':{'type':Boolean,'required':!0x0},'MESSAGES_SET':{'type':Boolean,'required':!0x0},'CONTACTS_SET':{'type':Boolean,'required':!0x0},'CONTACTS_UPSERT':{'type':Boolean,'required':!0x0},'CONTACTS_UPDATE':{'type':Boolean,'required':!0x0},'PRESENCE_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_SET':{'type':Boolean,'required':!0x0},'CHATS_UPSERT':{'type':Boolean,'required':!0x0},'CHATS_UPDATE':{'type':Boolean,'required':!0x0},'CHATS_DELETE':{'type':Boolean,'required':!0x0}},{'_id':!0x1}),_o=new Is[(a0_0x1df5a5(0x469))]({'_id':{'type':String,'default':a0_0x1df5a5(0x562)},'WebhookGlobal':{'type':Io},'connectedName':{'type':String},'connectedClient':{'type':String},'DaysToDelete':{'type':Number},'AllProxy':{'type':Boolean}}),Ee=T?.[a0_0x1df5a5(0x7c5)](Ts['name'],_o,a0_0x1df5a5(0x743)),Oo=Mi[a0_0x1df5a5(0x686)]['join'](__dirname,a0_0x1df5a5(0x93d)),Le=(0x0,xt[a0_0x1df5a5(0x899)])(),xo=S[a0_0x1df5a5(0x3be)](a0_0x1df5a5(0x6d5))[a0_0x1df5a5(0x4f0)],oe=[Aa,Ta,Oa[xo]];Le[a0_0x1df5a5(0x2c2)]('/media',xt[a0_0x1df5a5(0x686)]['static'](Oo))[a0_0x1df5a5(0x3be)](a0_0x1df5a5(0x215),async(_0x17e946,_0x138d66)=>{const _0x18d66d=a0_0x1df5a5;console[_0x18d66d(0x485)](_0x18d66d(0x369));let _0x3a3499=_0x17e946[_0x18d66d(0x570)][_0x18d66d(0x921)],_0x14b105=(_0x17e946[_0x18d66d(0x896)][_0x18d66d(0x8bc)]||'')[_0x18d66d(0x709)](','),_0x44c104=(0x0,Ci['v4'])();console['log']('Instance\x20ID:',_0x3a3499),console[_0x18d66d(0x485)]('Subscribed\x20Events:',_0x14b105);let _0x370d11=S[_0x18d66d(0x3be)](_0x18d66d(0x6d5))[_0x18d66d(0x901)],_0x53a3e9=_0x17e946[_0x18d66d(0x896)][_0x18d66d(0x829)];if(console[_0x18d66d(0x485)](_0x18d66d(0x876),_0x53a3e9),_0x370d11[_0x18d66d(0x59c)]!==_0x53a3e9){console[_0x18d66d(0x485)](_0x18d66d(0x8e4));try{let _0x5a042a=await me[_0x18d66d(0x575)][_0x18d66d(0x756)](_0x3a3499);if(console['log'](_0x18d66d(0x4dd),_0x5a042a),!_0x5a042a||_0x5a042a[_0x18d66d(0x829)]!==_0x53a3e9)return console[_0x18d66d(0x485)]('API\x20Key\x20mismatch\x20or\x20instance\x20not\x20found\x20in\x20DB!'),_0x138d66['status'](0x191)[_0x18d66d(0x748)](_0x18d66d(0x7f5));}catch(_0x1ed239){return console[_0x18d66d(0x398)]('Error\x20retrieving\x20instance\x20or\x20API\x20Key:',_0x1ed239),_0x138d66['status'](0x191)[_0x18d66d(0x748)]('API\x20Key\x20inválida\x20ou\x20instância\x20não\x20encontrada.');}}if(!await Oe(_0x3a3499))return _0x138d66['status'](0x194)[_0x18d66d(0x748)]('Instância\x20não\x20encontrada.');_0x138d66[_0x18d66d(0x224)](_0x18d66d(0x258),'text/event-stream'),_0x138d66[_0x18d66d(0x224)](_0x18d66d(0x53c),_0x18d66d(0x65e)),_0x138d66[_0x18d66d(0x224)]('Connection','keep-alive'),_0x138d66[_0x18d66d(0x86c)]();let _0x484bfd=_0x18d66d(0x360)+JSON[_0x18d66d(0x28d)]({'info':'Conexão\x20estabelecida'})+'\x0a\x0a';_0x138d66['write'](_0x484bfd),yi(_0x3a3499,_0x44c104,_0x138d66,_0x14b105),_0x17e946['on']('close',()=>{const _0x56a537=_0x18d66d;console[_0x56a537(0x485)](_0x56a537(0x5a7)+_0x3a3499),bi(_0x3a3499,_0x44c104);});}),Le['post'](a0_0x1df5a5(0x5e7),async(_0x23d1a6,_0x5bb400)=>{const _0x329a0f=a0_0x1df5a5;console[_0x329a0f(0x485)](_0x329a0f(0x1ad));let _0x367747=_0x23d1a6[_0x329a0f(0x570)]['instance'],_0x2482ac=_0x23d1a6[_0x329a0f(0x570)][_0x329a0f(0x422)],_0x4dbc9a=_0x23d1a6[_0x329a0f(0x896)]['remoteJid']||'',_0x43070c=_0x23d1a6['body'];console[_0x329a0f(0x485)]('Instance\x20Name:',_0x367747),console[_0x329a0f(0x485)](_0x329a0f(0x231),_0x2482ac),console[_0x329a0f(0x485)](_0x329a0f(0x301),_0x4dbc9a),console[_0x329a0f(0x485)](_0x329a0f(0x6a2),_0x43070c);try{if(!await Oe(_0x367747))return _0x5bb400[_0x329a0f(0x781)](0x194)[_0x329a0f(0x748)](_0x329a0f(0x67e));let _0x5b7d74=await O[_0x329a0f(0x1bb)](_0x367747,_0x2482ac,_0x4dbc9a,_0x43070c);_0x5bb400[_0x329a0f(0x748)](_0x5b7d74);}catch(_0x3fd4f8){console[_0x329a0f(0x398)](_0x3fd4f8),_0x5bb400['status'](0x1f4)[_0x329a0f(0x748)](_0x329a0f(0x332));}}),Le[a0_0x1df5a5(0x3be)](a0_0x1df5a5(0x79d),(_0x277bd1,_0x3e9034)=>{let _0x5bf320=Si();_0x3e9034['json'](_0x5bf320);})[a0_0x1df5a5(0x3be)]('/',(_0x3cf498,_0xcc661a)=>{const _0x2202f8=a0_0x1df5a5;let _0x5c08ea=S[_0x2202f8(0x3be)](_0x2202f8(0x3f7))[_0x2202f8(0x5d6)];if(_0x5c08ea){let _0x2b4617=encodeURIComponent(''+_0x5c08ea);_0xcc661a[_0x2202f8(0x4b1)](_0x2202f8(0x418)+_0x2b4617);return;}let _0xf5716c=S['get'](_0x2202f8(0x223)),_0x4d8bec=_0xf5716c&&_0xf5716c[_0x2202f8(0x3d3)][_0x2202f8(0x709)]('/')[0x4];if(_0x4d8bec){let _0x3644f2=encodeURIComponent(_0x2202f8(0x2c6)+_0x4d8bec);_0xcc661a[_0x2202f8(0x4b1)](_0x2202f8(0x418)+_0x3644f2);}else _0xcc661a[_0x2202f8(0x4b1)](_0x2202f8(0x1dc));})[a0_0x1df5a5(0x403)](a0_0x1df5a5(0x1d7),...oe,async(_0x15ab3e,_0x4c0618)=>{const _0x39db8d=a0_0x1df5a5;try{console[_0x39db8d(0x485)](_0x39db8d(0x1df)),_0x4c0618[_0x39db8d(0x781)](0xc8)[_0x39db8d(0x6de)]({'message':_0x39db8d(0x467)}),_0x4c0618['on']('finish',()=>process[_0x39db8d(0x4d4)](0x0));}catch(_0xc3127f){console['error'](_0x39db8d(0x3e0),_0xc3127f),_0x4c0618['status'](0x1f4)[_0x39db8d(0x6de)]({'message':_0x39db8d(0x51c)});}})['put'](a0_0x1df5a5(0x87e),...oe,async(_0x56fd58,_0xf4bcd6)=>{const _0x34a9ea=a0_0x1df5a5;try{let _0x433cdb=_0x56fd58[_0x34a9ea(0x4a9)];await Ee['updateOne']({},{'$set':_0x433cdb},{'upsert':!0x0});let _0x9ea3e=await Ee['findOne']();_0xf4bcd6[_0x34a9ea(0x6de)](_0x9ea3e);}catch(_0x3a8af9){_0xf4bcd6['status'](0x190)[_0x34a9ea(0x748)](_0x3a8af9[_0x34a9ea(0x6c9)]);}})[a0_0x1df5a5(0x3be)]('/config',...oe,async(_0x21f775,_0x2bff69)=>{const _0x10d81f=a0_0x1df5a5;try{let _0x351d51=await Ee['findOne']();if(!_0x351d51)return _0x2bff69[_0x10d81f(0x6de)]({});_0x2bff69[_0x10d81f(0x6de)](_0x351d51);}catch(_0x145923){_0x2bff69[_0x10d81f(0x781)](0x1f4)['send'](_0x145923[_0x10d81f(0x6c9)]);}})[a0_0x1df5a5(0x2c2)](a0_0x1df5a5(0x82b),new bt(S,...oe)[a0_0x1df5a5(0x5e8)])[a0_0x1df5a5(0x2c2)]('/message',new Tt(...oe)['router'])[a0_0x1df5a5(0x2c2)](a0_0x1df5a5(0x8de),new lt(...oe)[a0_0x1df5a5(0x5e8)])[a0_0x1df5a5(0x2c2)]('/group',new yt(...oe)[a0_0x1df5a5(0x5e8)])[a0_0x1df5a5(0x2c2)]('/webhook',new _t(...oe)[a0_0x1df5a5(0x5e8)])[a0_0x1df5a5(0x2c2)](a0_0x1df5a5(0x2ad),new Ot(...oe)[a0_0x1df5a5(0x5e8)]);var m=class{constructor(..._0x1189d4){const _0x40f948=a0_0x1df5a5;throw{'status':0x190,'error':'Bad\x20Request','message':_0x1189d4[_0x40f948(0x303)]>0x0?_0x1189d4:void 0x0};}},ae=class{constructor(..._0x116a72){const _0x2f0818=a0_0x1df5a5;throw{'status':0x191,'error':'Unauthorized','message':_0x116a72[_0x2f0818(0x303)]>0x0?_0x116a72:void 0x0};}},X=class{constructor(..._0x497d84){const _0x1e6c9f=a0_0x1df5a5;throw{'status':0x193,'error':_0x1e6c9f(0x4b0),'message':_0x497d84['length']>0x0?_0x497d84:void 0x0};}},U=class{constructor(..._0x4f5c3c){const _0xd2d77e=a0_0x1df5a5;throw{'status':0x194,'error':_0xd2d77e(0x5db),'message':_0x4f5c3c[_0xd2d77e(0x303)]>0x0?_0x4f5c3c:void 0x0};}},x=class{constructor(..._0x447502){const _0x1ff0cd=a0_0x1df5a5;throw{'status':0x1f4,'error':_0x1ff0cd(0x8e8),'message':_0x447502[_0x1ff0cd(0x303)]>0x0?_0x447502:void 0x0};}},fe=require(a0_0x1df5a5(0x7d3));async function _s(_0x9e3069){const _0x5c056a=a0_0x1df5a5;let _0x237492=new $(_s[_0x5c056a(0x5d3)]),_0x55bdc3=T[_0x5c056a(0x4c6)](),_0x10cafe=_0x55bdc3['db'](S[_0x5c056a(0x3be)]('DATABASE')[_0x5c056a(0x3b3)]['DB_PREFIX_NAME']+_0x5c056a(0x84c))[_0x5c056a(0x8dd)](_0x9e3069),_0x225b2d=async(_0x433a45,_0x1f5bc3)=>{const _0x11ee56=_0x5c056a;try{return await _0x55bdc3[_0x11ee56(0x891)](),await _0x10cafe[_0x11ee56(0x6ef)]({'_id':_0x1f5bc3},JSON[_0x11ee56(0x8a5)](JSON[_0x11ee56(0x28d)](_0x433a45,fe[_0x11ee56(0x4c0)][_0x11ee56(0x62a)])),{'upsert':!0x0});}catch{}},_0x1fe1d5=async _0x6bf615=>{const _0x11cb2b=_0x5c056a;try{await _0x55bdc3['connect']();let _0x1993a0=await _0x10cafe['findOne']({'_id':_0x6bf615}),_0x5eec0c=JSON[_0x11cb2b(0x28d)](_0x1993a0);return JSON[_0x11cb2b(0x8a5)](_0x5eec0c,fe[_0x11cb2b(0x4c0)][_0x11cb2b(0x4ab)]);}catch{}},_0x8f4801=async _0x2e0e31=>{const _0x16ee3a=_0x5c056a;try{return await _0x55bdc3[_0x16ee3a(0x891)](),await _0x10cafe[_0x16ee3a(0x4c7)]({'_id':_0x2e0e31});}catch{}},_0x1aaebe=await _0x1fe1d5('creds')||(0x0,fe[_0x5c056a(0x734)])();return{'state':{'creds':_0x1aaebe,'keys':{'get':async(_0x49e535,_0x1e9ae9)=>{const _0x2ff5d1=_0x5c056a;let _0x35911c={};return await Promise[_0x2ff5d1(0x75e)](_0x1e9ae9[_0x2ff5d1(0x948)](async _0x590965=>{const _0x152dcd=_0x2ff5d1;let _0x1b0d41=await _0x1fe1d5(_0x49e535+'-'+_0x590965);_0x49e535===_0x152dcd(0x5e3)&&_0x1b0d41&&(_0x1b0d41=fe[_0x152dcd(0x8ff)][_0x152dcd(0x69e)][_0x152dcd(0x942)][_0x152dcd(0x4f3)](_0x1b0d41)),_0x35911c[_0x590965]=_0x1b0d41;})),_0x35911c;},'set':async _0x2bc382=>{const _0x16b147=_0x5c056a;let _0x5cb439=[];for(let _0x8a3c38 in _0x2bc382)for(let _0x2496c9 in _0x2bc382[_0x8a3c38]){let _0x4bc3d5=_0x2bc382[_0x8a3c38][_0x2496c9],_0x59a1fa=_0x8a3c38+'-'+_0x2496c9;_0x5cb439[_0x16b147(0x6cd)](_0x4bc3d5?_0x225b2d(_0x4bc3d5,_0x59a1fa):_0x8f4801(_0x59a1fa));}await Promise['all'](_0x5cb439);}}},'saveCreds':async()=>_0x225b2d(_0x1aaebe,'creds')};}var Ls=I(require(a0_0x1df5a5(0x267))),Fs=I(require(a0_0x1df5a5(0x5ac))),kt=require(a0_0x1df5a5(0x7d3)),vi=require(a0_0x1df5a5(0x579)),Dt=require(a0_0x1df5a5(0x7d3)),Pt;function a0_0x5a64(_0x5c544a,_0x18883e){const _0x161d49=a0_0x161d();return a0_0x5a64=function(_0x5a644b,_0x37509b){_0x5a644b=_0x5a644b-0x1a7;let _0x23b555=_0x161d49[_0x5a644b];return _0x23b555;},a0_0x5a64(_0x5c544a,_0x18883e);}function Po(_0x2376e3){const _0x3b1a77=a0_0x1df5a5;return Pt||(Pt=(0x0,vi[_0x3b1a77(0x251)])({'url':_0x2376e3[_0x3b1a77(0x6d2)]}),Pt['connect']()),Pt;}var de=class u{constructor(_0x6b1bca,_0x51039c){const _0xbc284=a0_0x1df5a5;this['redisEnv']=_0x6b1bca,this[_0xbc284(0x474)]=_0x51039c,this[_0xbc284(0x755)]=new $(u[_0xbc284(0x5d3)]),this['client']=Po(_0x6b1bca);}set[a0_0x1df5a5(0x70d)](_0x37614b){const _0x44bcd0=a0_0x1df5a5;this[_0x44bcd0(0x474)]=_0x37614b;}async[a0_0x1df5a5(0x6d8)](){const _0x61982b=a0_0x1df5a5;try{return await this[_0x61982b(0x826)][_0x61982b(0x3c6)](['keys',this[_0x61982b(0x463)][_0x61982b(0x696)]+':*']);}catch(_0x5e1e41){this['logger'][_0x61982b(0x398)](_0x5e1e41);}}async['writeData'](_0x2066b5,_0x5be289){const _0x1a2df7=a0_0x1df5a5;try{let _0x125d22=JSON[_0x1a2df7(0x28d)](_0x5be289,Dt[_0x1a2df7(0x4c0)][_0x1a2df7(0x62a)]);return await this[_0x1a2df7(0x826)][_0x1a2df7(0x352)](this[_0x1a2df7(0x463)][_0x1a2df7(0x696)]+':'+this[_0x1a2df7(0x474)],_0x2066b5,_0x125d22);}catch(_0x3b7af4){this[_0x1a2df7(0x755)][_0x1a2df7(0x398)](_0x3b7af4);}}async[a0_0x1df5a5(0x82c)](){const _0x1c5f94=a0_0x1df5a5;try{let _0x472789=await this[_0x1c5f94(0x826)][_0x1c5f94(0x322)](this[_0x1c5f94(0x463)][_0x1c5f94(0x696)]+':'+this[_0x1c5f94(0x474)]);if(_0x472789){for(let _0x432b82 in _0x472789)Object[_0x1c5f94(0x741)][_0x1c5f94(0x6ac)][_0x1c5f94(0x4a6)](_0x472789,_0x432b82)&&(_0x472789[_0x432b82]=JSON[_0x1c5f94(0x8a5)](_0x472789[_0x432b82],Dt['BufferJSON'][_0x1c5f94(0x4ab)]));return _0x472789;}}catch(_0x519966){this['logger'][_0x1c5f94(0x398)](_0x519966);}}async['readData'](_0x68112a){const _0x1e9fbe=a0_0x1df5a5;try{let _0x46052e=await this[_0x1e9fbe(0x826)][_0x1e9fbe(0x841)](this[_0x1e9fbe(0x463)]['PREFIX_KEY']+':'+this[_0x1e9fbe(0x474)],_0x68112a);if(_0x46052e)return JSON[_0x1e9fbe(0x8a5)](_0x46052e,Dt[_0x1e9fbe(0x4c0)][_0x1e9fbe(0x4ab)]);}catch(_0x4bb145){this[_0x1e9fbe(0x755)][_0x1e9fbe(0x398)](_0x4bb145);}}async['removeData'](_0x4522c8){const _0x269cf1=a0_0x1df5a5;try{return await this[_0x269cf1(0x826)][_0x269cf1(0x6cf)](this[_0x269cf1(0x463)][_0x269cf1(0x696)]+':'+this['instanceName'],_0x4522c8);}catch(_0x24e938){this[_0x269cf1(0x755)][_0x269cf1(0x398)](_0x24e938);}}async['delAll'](_0xa6ab6){const _0x3f287f=a0_0x1df5a5;try{return await this['client'][_0x3f287f(0x1f4)](_0xa6ab6||this['redisEnv'][_0x3f287f(0x696)]+':'+this['instanceName']);}catch(_0x506f21){this[_0x3f287f(0x755)]['error'](_0x506f21);}}};async function Os(_0x12d207,_0x365664){const _0x208960=a0_0x1df5a5;let _0x22ec4e=new $(Os[_0x208960(0x5d3)]),_0x22e32a=new de(_0x12d207,_0x365664),_0x4d92d7=async(_0x147479,_0x3df7f7)=>{const _0x298615=_0x208960;try{return await _0x22e32a[_0x298615(0x513)](_0x3df7f7,_0x147479);}catch(_0x36bbba){return _0x22ec4e[_0x298615(0x398)]({'localError':'writeData','error':_0x36bbba});}},_0x39f78e=async _0xc28474=>{const _0x33ef66=_0x208960;try{return await _0x22e32a[_0x33ef66(0x3f1)](_0xc28474);}catch(_0x12c1fa){_0x22ec4e[_0x33ef66(0x398)]({'readData':_0x33ef66(0x513),'error':_0x12c1fa});return;}},_0xb4597d=async _0x1a147c=>{const _0x574fcc=_0x208960;try{return await _0x22e32a[_0x574fcc(0x63d)](_0x1a147c);}catch(_0x5c4369){_0x22ec4e[_0x574fcc(0x398)]({'readData':_0x574fcc(0x63d),'error':_0x5c4369});}},_0x4c0b40=await _0x39f78e(_0x208960(0x68b))||(0x0,kt['initAuthCreds'])();return{'state':{'creds':_0x4c0b40,'keys':{'get':async(_0x55a268,_0x5096f5)=>{const _0x2d1deb=_0x208960;let _0x3f4ef4={};return await Promise[_0x2d1deb(0x75e)](_0x5096f5[_0x2d1deb(0x948)](async _0x1c92fe=>{const _0x41859a=_0x2d1deb;let _0x2b7f69=await _0x39f78e(_0x55a268+'-'+_0x1c92fe);_0x55a268===_0x41859a(0x5e3)&&_0x2b7f69&&(_0x2b7f69=kt[_0x41859a(0x8ff)][_0x41859a(0x69e)][_0x41859a(0x942)]['fromObject'](_0x2b7f69)),_0x3f4ef4[_0x1c92fe]=_0x2b7f69;})),_0x3f4ef4;},'set':async _0x3f2645=>{const _0x176f41=_0x208960;let _0x92bf5c=[];for(let _0x56377e in _0x3f2645)for(let _0x3029fe in _0x3f2645[_0x56377e]){let _0x1f2ce4=_0x3f2645[_0x56377e][_0x3029fe],_0x4b9743=_0x56377e+'-'+_0x3029fe;_0x92bf5c[_0x176f41(0x6cd)](_0x1f2ce4?await _0x4d92d7(_0x1f2ce4,_0x4b9743):await _0xb4597d(_0x4b9743));}await Promise[_0x176f41(0x75e)](_0x92bf5c);}}},'saveCreds':async()=>await _0x4d92d7(_0x4c0b40,'creds')};}var k=I(require('fs')),Q=require(a0_0x1df5a5(0x913)),Ut=I(require('sharp')),re=require(a0_0x1df5a5(0x718)),Ei=require(a0_0x1df5a5(0x2ea)),Ni=require(a0_0x1df5a5(0x787)),$i=I(require(a0_0x1df5a5(0x383))),Ne=class extends _{constructor(_0x12a8e3,_0x2d0252,_0x55f843){const _0x4204dc=a0_0x1df5a5;super(_0x2d0252),this[_0x4204dc(0x4bd)]=_0x12a8e3,this[_0x4204dc(0x4e6)]=_0x2d0252,this[_0x4204dc(0x232)]=_0x55f843;}async[a0_0x1df5a5(0x1e6)](_0x350658,_0x217646){const _0x5f30f5=a0_0x1df5a5;try{if(this['dbSettings'][_0x5f30f5(0x765)]){console[_0x5f30f5(0x485)](_0x5f30f5(0x3ce)+_0x217646+'\x20and\x20data:',_0x350658);let _0x2a517e=await this[_0x5f30f5(0x4bd)][_0x5f30f5(0x600)]({'_id':_0x217646},{'$set':_0x350658},{'new':!0x0,'upsert':!0x0});return console[_0x5f30f5(0x485)]('Database\x20update\x20result:',_0x2a517e),_0x2a517e;}}catch(_0x2769ce){throw console['error'](_0x5f30f5(0x551),_0x2769ce),_0x2769ce;}return null;}async[a0_0x1df5a5(0x4c7)](_0x7da1b0){const _0x1507d9=a0_0x1df5a5;try{let _0x11502d=A(_0x7da1b0[_0x1507d9(0x7e5)]);return{'deletedCount':(await this[_0x1507d9(0x4bd)][_0x1507d9(0x4c7)](_0x11502d))[_0x1507d9(0x408)]};}catch(_0x4680a3){return{'error':_0x4680a3?.[_0x1507d9(0x641)]()};}}async['findOne'](_0x41bbd1){const _0x14523f=a0_0x1df5a5;try{let _0x360f82=A(_0x41bbd1[_0x14523f(0x7e5)]);return await this[_0x14523f(0x4bd)][_0x14523f(0x694)](_0x360f82)[_0x14523f(0x489)]();}catch{return null;}}},$e=(0x0,Ni[a0_0x1df5a5(0x436)])(Ei[a0_0x1df5a5(0x1cc)]),xs=0x1f4,Do=S[a0_0x1df5a5(0x3be)](a0_0x1df5a5(0x46d)),Ps=class{constructor(){const _0x42da79=a0_0x1df5a5;this['cacheInstanceRepository']=new Ne(We,S),(!this[_0x42da79(0x85e)]||!this[_0x42da79(0x75a)])&&Do&&this['detectIPv6PrefixAndInterface']()[_0x42da79(0x278)](async()=>{const _0x42683f=_0x42da79;console[_0x42683f(0x485)](_0x42683f(0x864)+this[_0x42683f(0x85e)]),console['log'](_0x42683f(0x71d)+this['networkInterface']),await this['cleanupExcessiveIPs']();let _0x53fcc1=await this['countIPv6Addresses']();console[_0x42683f(0x485)](_0x42683f(0x1a7)+_0x53fcc1);})[_0x42da79(0x845)](_0x34d6eb=>{const _0x57570c=_0x42da79;console[_0x57570c(0x398)]('Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:\x20'+_0x34d6eb[_0x57570c(0x6c9)]);});}async[a0_0x1df5a5(0x26e)](){const _0x11c3cc=a0_0x1df5a5;let _0x5365e4=await this[_0x11c3cc(0x49b)]();if(console[_0x11c3cc(0x485)]('Total\x20IPv6\x20addresses\x20detected:\x20'+_0x5365e4[_0x11c3cc(0x303)]),_0x5365e4[_0x11c3cc(0x303)]>xs){let _0x3b366d=_0x5365e4[_0x11c3cc(0x5c2)](xs);for(let _0x189772 of _0x3b366d)console[_0x11c3cc(0x485)](_0x11c3cc(0x621)+_0x189772),await this[_0x11c3cc(0x91b)](_0x189772);console[_0x11c3cc(0x485)](_0x11c3cc(0x41d)+_0x3b366d['length']+_0x11c3cc(0x72f));}else console[_0x11c3cc(0x485)]('No\x20excess\x20IPv6\x20addresses\x20to\x20remove.');}async[a0_0x1df5a5(0x49b)](){const _0x1be355=a0_0x1df5a5;try{let {stdout:_0x40326d}=await $e(_0x1be355(0x8d6));return _0x40326d['split']('\x0a')[_0x1be355(0x93c)](_0x555c2e=>_0x555c2e[_0x1be355(0x5f2)](_0x1be355(0x1d6))&&_0x555c2e[_0x1be355(0x5f2)](_0x1be355(0x3c1)))[_0x1be355(0x948)](_0x2f1a72=>_0x2f1a72[_0x1be355(0x3c5)](/inet6\s+([a-fA-F0-9:]+)\//)?.[0x1])[_0x1be355(0x93c)](Boolean);}catch(_0xee73df){return console['error']('Error\x20fetching\x20IPv6\x20addresses:\x20'+_0xee73df['message']),[];}}async[a0_0x1df5a5(0x268)](){const _0xf35965=a0_0x1df5a5;try{let {stdout:_0x97f66d}=await $e(_0xf35965(0x911)),_0x369349=parseInt(_0x97f66d[_0xf35965(0x30a)](),0xa);return console[_0xf35965(0x485)](_0xf35965(0x2be)+_0x369349),_0x369349;}catch(_0x42bc5f){return console[_0xf35965(0x398)](_0xf35965(0x27b)+_0x42bc5f[_0xf35965(0x6c9)]),0x0;}}async[a0_0x1df5a5(0x91b)](_0x24d5e8){const _0x4e1d62=a0_0x1df5a5;try{await $e(_0x4e1d62(0x82f)+_0x24d5e8+_0x4e1d62(0x390)+this[_0x4e1d62(0x75a)]),console['log'](_0x4e1d62(0x456)+_0x24d5e8);}catch(_0x2c832b){console[_0x4e1d62(0x398)](_0x4e1d62(0x3c3)+_0x2c832b[_0x4e1d62(0x6c9)]);}}async['detectIPv6PrefixAndInterface'](){const _0x30202b=a0_0x1df5a5;try{let {stdout:_0x3329b8}=await $e(_0x30202b(0x76b));console[_0x30202b(0x485)](_0x30202b(0x580)+_0x3329b8);let _0x3c7b41=_0x3329b8[_0x30202b(0x709)]('\x0a')[_0x30202b(0x948)](_0x3b6e26=>_0x3b6e26['split']('\x20')[0x0])[_0x30202b(0x93c)](_0x49509b=>!_0x49509b[_0x30202b(0x5f2)]('lo')&&!_0x49509b[_0x30202b(0x5f2)](_0x30202b(0x6b1))&&!_0x49509b['includes'](_0x30202b(0x7a6))&&!_0x49509b[_0x30202b(0x5f2)]('wl')&&!_0x49509b['includes']('@'));if(console[_0x30202b(0x485)](_0x30202b(0x6da)+_0x3c7b41),_0x3c7b41['length']===0x0)throw new Error(_0x30202b(0x5dd));this[_0x30202b(0x75a)]=_0x3c7b41[0x0];let {stdout:_0x283af9}=await $e(_0x30202b(0x4b6)+this['networkInterface']);console[_0x30202b(0x485)](_0x30202b(0x7e9)+_0x283af9);let _0x4fdea4=_0x283af9[_0x30202b(0x709)]('\x0a')['find'](_0x349735=>_0x349735['includes'](_0x30202b(0x1d6))&&_0x349735['includes'](_0x30202b(0x3c1)));if(!_0x4fdea4)throw new Error(_0x30202b(0x6ce));let _0x299486=_0x4fdea4[_0x30202b(0x3c5)](/inet6\s+([a-fA-F0-9:]+)\/(\d+)/);if(!_0x299486)throw new Error('Failed\x20to\x20parse\x20the\x20global\x20IPv6\x20address');let [_0x4fbe63,_0x36fb71,_0xcba6ba]=_0x299486,_0x3ce733=Math['floor'](Number(_0xcba6ba)/0x10),_0x16dba6=Number(_0xcba6ba)%0x10,_0x5126b1=_0x36fb71['split'](':')[_0x30202b(0x5c2)](0x0,_0x3ce733)[_0x30202b(0x4bc)](':');if(_0x16dba6>0x0){let _0x352ece=_0x36fb71['split'](':')[_0x3ce733],_0x38fb64=0xffff<<0x10-_0x16dba6&0xffff,_0x11ed26=(parseInt(_0x352ece,0x10)&_0x38fb64)[_0x30202b(0x641)](0x10)[_0x30202b(0x8a1)](0x4,'0');_0x5126b1+=':'+_0x11ed26;}this[_0x30202b(0x85e)]=_0x5126b1+':';}catch(_0x22ce45){console[_0x30202b(0x398)](_0x30202b(0x640),_0x22ce45);}}async[a0_0x1df5a5(0x3db)](_0x8e80c9){const _0x1e79ab=a0_0x1df5a5;let _0x496f7e=_0x1e79ab(0x6be)+_0x8e80c9+'/64\x20dev\x20'+this[_0x1e79ab(0x75a)];try{await $e(_0x496f7e),console['log'](_0x1e79ab(0x1c2)+_0x8e80c9);}catch(_0x1bdf25){console[_0x1e79ab(0x398)]('Error\x20adding\x20IPv6\x20address:\x20'+_0x1bdf25);}}[a0_0x1df5a5(0x24a)](){const _0x3c2926=a0_0x1df5a5;return _0x3c2926(0x4ba)[_0x3c2926(0x894)](/X/g,()=>_0x3c2926(0x596)[_0x3c2926(0x79b)](Math[_0x3c2926(0x346)](Math[_0x3c2926(0x5ba)]()*0x10)));}[a0_0x1df5a5(0x8be)](_0x22317a,_0x55a5ff){const _0x121025=a0_0x1df5a5;let _0x5115ac=_0x55a5ff['split'](':');return _0x5115ac[0x0]=(parseInt(_0x5115ac[0x0],0x10)^0x2)[_0x121025(0x641)](0x10)[_0x121025(0x8a1)](0x2,'0'),''+_0x22317a+_0x5115ac[0x0]+_0x5115ac[0x1]+':'+_0x5115ac[0x2]+_0x121025(0x2f6)+_0x5115ac[0x3]+':'+_0x5115ac[0x4]+_0x5115ac[0x5];}[a0_0x1df5a5(0x704)](){const _0x54f8ed=a0_0x1df5a5;let _0x47543b=this[_0x54f8ed(0x85e)];_0x47543b[_0x54f8ed(0x237)](':')||(_0x47543b+=':');let _0x10ce1=this[_0x54f8ed(0x24a)]();return this[_0x54f8ed(0x8be)](_0x47543b,_0x10ce1);}[a0_0x1df5a5(0x833)](_0x3e2dfc){const _0x538bcc=a0_0x1df5a5;return new RegExp(_0x538bcc(0x254))[_0x538bcc(0x8d2)](_0x3e2dfc);}async[a0_0x1df5a5(0x854)](_0x1cb371){const _0x4b894b=a0_0x1df5a5;let _0x157f56=[{'url':_0x4b894b(0x4b5),'parse':_0xb8f878=>_0xb8f878['ip']},{'url':_0x4b894b(0x51d),'parse':_0x3f6ad3=>_0x3f6ad3['ip']},{'url':_0x4b894b(0x4fd),'parse':_0x23315a=>_0x23315a[_0x4b894b(0x30a)]()},{'url':_0x4b894b(0x2b7),'parse':_0x4fb7c3=>_0x4fb7c3[_0x4b894b(0x30a)]()}],_0x18c2ea=_0x157f56[Math[_0x4b894b(0x346)](Math[_0x4b894b(0x5ba)]()*_0x157f56[_0x4b894b(0x303)])];try{let _0x37669a=await $i[_0x4b894b(0x686)]['get'](_0x18c2ea[_0x4b894b(0x376)],{'timeout':0x1388,'headers':{'X-Forwarded-For':_0x1cb371}}),_0x50b657=_0x18c2ea[_0x4b894b(0x8a5)](_0x37669a['data']);return _0x50b657[_0x4b894b(0x6c2)]()===_0x1cb371['toLowerCase']()?(console[_0x4b894b(0x485)](_0x4b894b(0x543)+_0x1cb371),!0x0):(console[_0x4b894b(0x398)](_0x4b894b(0x55c)+_0x1cb371+',\x20received\x20'+_0x50b657),!0x1);}catch(_0x55b649){return console[_0x4b894b(0x398)](_0x4b894b(0x7fd)+_0x18c2ea[_0x4b894b(0x376)]+':\x20'+_0x55b649['message']),!0x1;}}async[a0_0x1df5a5(0x729)](_0xbcb1f5,_0x76a904){const _0x519e82=a0_0x1df5a5;if(!this['ipv6Prefix']||!this[_0x519e82(0x75a)])return console['error'](_0x519e82(0x76d)),null;let _0x13e31d=await this['listIPv6Addresses']();if(_0x13e31d[_0x519e82(0x303)]>=xs){let _0x4ee126=_0x13e31d[Math[_0x519e82(0x346)](Math[_0x519e82(0x5ba)]()*_0x13e31d[_0x519e82(0x303)])];return console[_0x519e82(0x485)](_0x519e82(0x71c)+_0x4ee126),_0x4ee126;}let _0x244d2b;do _0x244d2b=this['generateRandomIPv6'](),console[_0x519e82(0x485)](_0x519e82(0x8c9)+_0x244d2b);while(!this[_0x519e82(0x833)](_0x244d2b));await this[_0x519e82(0x3db)](_0x244d2b),console['log'](_0x519e82(0x34e)+_0x244d2b);let _0x17121f={'_id':_0xbcb1f5+'-'+_0x76a904,'ip':_0x244d2b},_0xc69112=await this[_0x519e82(0x59f)][_0x519e82(0x1e6)](_0x17121f,_0x17121f[_0x519e82(0x5da)]);return console['log'](_0x519e82(0x1db)+_0xc69112),_0x244d2b;}},ko=new Ps(),we=ko,Us=a0_0x1df5a5(0x5f6),xi,pe=null,xa=null,Lo=0x3,Fo=null,Ri=S[a0_0x1df5a5(0x3be)](a0_0x1df5a5(0x6d5))['API_KEY'][a0_0x1df5a5(0x59c)],Ai=S['get'](a0_0x1df5a5(0x46d));async function Uo(){const _0x4c706d=a0_0x1df5a5;let _0x2abd6d=await Ee[_0x4c706d(0x694)]();pe=_0x2abd6d?.['WebhookGlobal']??null,Fo=_0x2abd6d?.['DaysToDelete']??null,Us=_0x2abd6d?.[_0x4c706d(0x908)]??_0x4c706d(0x5f6),xi=_0x2abd6d?.[_0x4c706d(0x362)]??se??_0x4c706d(0x3b6);}async function jo(){await Uo();}jo();function a0_0x161d(){const _0x5685d2=['entries','descId','):\x20Não\x20achou\x20nenhum\x20flow','collection','/chat','isMessageProcessed','ReplyOption\x20com\x20ID\x20','limit','flowName','makeCacheableSignalKeyStore','env.KEY\x20!==\x20key','Erro\x20ao\x20adicionar\x20mensagens\x20ao\x20grupo','markMessageAsRead','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','Internal\x20Server\x20Error','profilePicture','Chat\x20com\x20ID\x20','\x22\x20-\x20NOT\x20CONNECTION','):Updating\x20chat\x20in\x20repository\x20for\x20number:\x20','lastSend','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfilePicture','sendPresenceUpdate','dayjs','.xls','displayName','description','waInstances','ephemeralExpiration','STATUS_INSTANCE','METHODS','contactsArrayMessage','closeExistingConversations','temp-','secondValue','Limite\x20de\x20reconexão\x20de\x201\x20hora\x20atingido.\x20Parando\x20reconexões...','dbSettings','A\x20licença\x20não\x20é\x20válida,\x20interrompendo\x20a\x20aplicação.','proto','Message\x20absent\x20from\x20node','API_KEY','Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20exclusão.','SERVER_URL','CHATS_DELETE','groupRequestParticipantsList','):\x20conversation.lastInteraction:\x20','delayChatLabel_RETRY_DELAY_MS','connectedClient','code','\x27\x20não\x20encontrado\x20na\x20memória','groupParticipantsUpdate','realVariables','):\x20Flow\x20desativado','footerText','blocks','flowStopConversation','ip\x20-6\x20addr\x20show\x20scope\x20global\x20|\x20grep\x20-c\x20inet6','profilePictureUrl','uuid','.fileUrl','connectionStatus','headers','chats.set','interval\x20não\x20é\x20um\x20número','request\x20received\x20in\x20getTicketSystem\x20=\x20getAutomateSystem','pushName','removeIPv6','autoCompleteMessages','createGroup','):\x20','MAX_RECONNECT_DURATION','VERBOSE','instance','\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-acodec\x20libmp3lame\x20','requestPairingCode','sendText','cleanStore','Fluxo\x20\x27','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupBetterSetting','processScheduleFlow','):\x20Não\x20achou\x20flow\x20de\x20teste,\x20buscando\x20o\x20fluxo\x20padrão...','maxActives','):\x20sender\x20=\x20number:\x20','unhandledRejection','SERVER_TYPE','):\x20Going\x20to\x20','Fluxo\x20não\x20encontrado\x20na\x20memória.','sendStatus','mongodb://','sendAudio','ListType','editFlowVariable','):\x20Rótulo\x20atualizado:\x20','next_groupId','chats.upsert','Erro\x20ao\x20converter\x20a\x20imagem\x20para\x20WebP','copy','${Message\x20absent\x20from\x20node}','Nenhum\x20chat\x20encontrado\x20para\x20editar.','filter','downloads','Erro\x20ao\x20atualizar\x20uma\x20mensagem:','):\x20teve\x20mudanças\x20chat.ephemeralExpiration:\x20','fetchChats','):\x20Limpando\x20AutomateSystem','AppStateSyncKeyData','vote','Falha\x20ao\x20deletar\x20mensagens\x20antigas:\x20','restartInstance','extractRegex','chat','map','groups','findConversation','Reiniciando\x20a\x20aplicação...','_Labels','convertToString','interactiveResponseMessage','add','qrcode','#6f7bcf','statusJidList','DELETED','notEqual','^\x5cd+([-]\x5cd+)*@g.us$','SERVER_PORT','editflowvariable','Total\x20de\x20endereços\x20IPv6\x20após\x20a\x20limpeza:\x20','localWebhook','MESSAGES_UPDATE','HH:mm:ss','noConnection','saveChatVariables','iniciando\x20fluxo\x20router','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileStatus','.pptx','processawaitSeconds','request\x20received\x20in\x20editFlowcondition','):\x20[RETRY]:\x20Falha\x20ao\x20reenviar\x20a\x20mensagem:\x27,\x20','object','timeout',',\x20valor\x20passado:\x20\x22','isListOfNumbers','whatsappNumbers','deleteReplyOption','):\x20newSecondValue\x20após\x20replaceVariables:','node-mime-types','startFlowWebhook','Instância:\x20','video-cover.png','delete','Valor\x20da\x20URL\x20recuperada:','list3','agents','IPv6\x20address\x20configured:\x20','):\x20nextBlock.uazapi.name','E-mail:\x20','getContactModelForOwner','┐\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','_error','mediaSticker','selectedId','statusCode','resetReconnectionVariables','exec','#9ba6ff','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete.','groupName','string','vcard','round','race','pictureUrl','Fluxo\x20id\x20\x27','inet6','/exit','.gif','.ppt','messages','Cache\x20instance\x20update\x20result:\x20','https://uazapi-plugin.bubbleapps.io/','dbInstance','singleSelectReply','Encerrando\x20a\x20API\x20por\x20solicitação\x20via\x20rota\x20/exit','):\x20Entrou\x20na\x20função\x20processawaitSeconds','capitalizedWords','formatStatusMessage','editFlowCondition','):\x20Bloco\x20tem\x20apirequest.header,\x20adicionando\x20headerString','currency','createOrUpdate','983211SYywIV','request_time','):\x20Deletando\x20mensagem','loadEnv','useMultiFileAuthState','menuMessage','poll','/instance/connectionState','Erro\x20ao\x20copiar\x20o\x20documento','):\x20Buscando\x20flow,\x20id:\x20','Rótulo\x20deletado:\x27,\x20','pollOnReplyDelete','createFlow','del','_month','The\x20\x22','birthtime','\x20-y','fetchProfilePictureUrl','):\x20Fetching\x20and\x20updating\x20profile\x20with\x20jid:\x20','\x27\x20do\x20banco\x20de\x20dados...','Falha\x20após\x205\x20tentativas:\x20','replyOptionId\x20é\x20necessário\x20para\x20deletar\x20um\x20replyOption','uazapiSendMenu','\x0a\x20\x20\x20\x20\x20\x20\x20\x20┌','):\x20\x27Deletando\x20fluxo,\x20id:\x20','editMessagesInGroup','item','editFlow','updateBlock','):\x20Erro\x20durante\x20a\x20atualização:\x20','):\x20Criou\x20conversa\x20no\x20startFlow','video','Sistema\x20atualizado\x20com\x20sucesso!','flowConfig','):Error\x20in\x20converting\x20audio','open','sem\x20texto\x20na\x20mensagem','#9568cf','truncatedtoEnd','):\x20Erro\x20ao\x20fechar\x20conversas\x20existentes:\x20','updateMediaMessage','CHATS_UPDATE','paused','message_normalized','):Alterar\x20configuração\x20de\x20mudo\x20para\x20o\x20chat:\x20','/events/:instance','DATABASE','\x1b[44m','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupDesc','archived','\x27...','timeInMinutes','dropCollection','.mimetype','allFlows','Invalid\x20format','licenca','readFile','contactHandle','SSL_CONF','setHeader','updateGParticipate','):\x20Mensagem\x20manual\x20detectada.\x20Fluxo\x20pausado\x20até\x20','shareOwners','fileUrl','\x1b[0m','validate','):\x20Enviando\x20mensagem\x20para\x20','Timeout\x20exceeded','lowerCase','webhookService','Flow\x20iniciado\x20com\x20','author','StartID:','dbConnection','sendMessageWithTyping','IPv6\x20recriado\x20após\x20falhas\x20de\x20reconexão.','CLEANING_INTERVAL','):Converting\x20image\x20to\x20WebP\x20to\x20sticker','endsWith','\x20inseridas\x20no\x20banco\x20de\x20dados...','sendMessageWithTypingButtons','g.us','Error\x20in\x20chatModify\x20for\x20number\x20','):\x20A\x20atualização\x20no\x20BD\x20da\x20conversa\x20não\x20foi\x20bem\x20sucedida','CONECTADO\x20À\x20UAZAPI','):\x20Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos\x20','keyPattern','repeat','):Converted\x20image\x20deleted','getUpdate','):\x20ev.flush\x20realizado','deleted','getOwnPropertyNames','addChatLabel','documentMessage','Primeiro\x20Valor:\x20','convertToWebP','randomMac','):\x20this.client.authState.creds?.myAppStateKeyId:\x20','\x20segundos\x20antes\x20de\x20reconectar...','):Delete\x20chat\x20in\x20client\x20for\x20number:\x20','\x1b[32m%s\x1b[0m','equal','Falha\x20ao\x20recriar\x20IPv6.','createClient','nativeFlowResponseMessage','request\x20received\x20in\x20updateFlowConfig','^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$','CREDENTIALS','\x22participants\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','pairingCode','Content-Type','presenceSubscribe','):\x20Fluxo\x20\x27','!cmd_','../env.yml','presence.update','pollUpdateMessage','sendMessageWithRetry','):\x20Está\x20configurado\x20para\x20parar\x20até\x20','close','removed','footer','api','Erro\x20ao\x20atualizar\x20agendamento\x20','Valor\x20de\x20find\x20ou\x20replace\x20ausente','long','countIPv6Addresses','mediaMessage','statusMessage','STORE','updateReplyOption','\x22reaction\x22\x20must\x20be\x20an\x20emoji','cleanupExcessiveIPs','qrcode-terminal','Erro\x20ao\x20atualizar\x20conversa:\x20',',\x20qrcodeCount:\x20','messageLogs','modifiedCount','saveMediaToFile','subjectOwner','out',',\x20fará\x20nova\x20verificação\x20em\x20','then','groupUpdateSubject','fetchProfilePicture','Error\x20fetching\x20IPv6\x20count:\x20','reconnectAttempts','labels.edit','checkAndRestartProcess','apiResponse','sending','authState','timeoutPromise','uazapiDeleteMessage','USER','reorderMessages','messages.upsert','isCommunityAnnounce','document','emit','sendMenu','reactionMessage','*Pergunta*:\x20\x0a','stringify','autoCompleteMessages.command_1','DATABASE_CONNECTION_USER','):\x20Query\x20params:\x20','tags','PRESENCE_UPDATE','insertMany','sectionsToString','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização.','):Error\x20occurred\x20while\x20archiving\x20chat:\x20','set','desativadoFluxoAte','Erro\x20ao\x20criar\x20e\x20salvar\x20um\x20novo\x20fluxo:','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupGetInviteInfo','Não\x20foi\x20possível\x20conectar\x20ao\x20servidor\x20após\x20várias\x20tentativas,\x20encerrando\x20a\x20aplicação.','_FlowHistorico','\x1b[33m\x1b[1m','Início','debug','end','BEGIN:VCARD\x0aVERSION:3.0\x0aN:','EXPIRIN_IN','Rodapé\x20de\x20Teste','sendContact','proxy:\x20','findMany','optionName','fetchBusinessProfile','AddUserFlow','updateReadReceiptsPrivacy','textMessage','.\x20Aguardando\x20','/automate','updateProfilePicture','):\x20Erro\x20ao\x20obter\x20detalhes\x20da\x20mídia:\x20','desc','no.connection','CORS','Erro\x20ao\x20editar\x20variável\x20do\x20fluxo','array','#d3a91f','jwt','https://v6.ident.me','rowId','isCommunity','buttonOrList_id','\x1b[43m','eventHandler','selectedRowId','Total\x20de\x20endereços\x20IPv6\x20globais:\x20','g-t','stopMinutesMaxActives','views','use','user','promote','Falha\x20ao\x20preparar\x20a\x20mensagem\x20de\x20mídia\x20após\x205\x20tentativas:\x20','https://','.mp4','deleteInstance','\x20mensagens\x20de\x20','updateStopChat','Retornando\x20grupos\x20SEM\x20cache','QRCODE_UPDATED','.mp3','pre','messageSecret','):\x20Editando\x20variável\x20do\x20fluxo...','wuid','groupBetterSetting','p-queue','editFlowBlock','):\x20Limpando\x20delayMessage','/wa-contacts','):\x20Alterando\x20fluxo...','Partes\x20do\x20domínio:','@s.whatsapp.net','@newsletter','defineAuthState','Erro\x20ao\x20processar\x20a\x20chamada\x20API:','Erro\x20ao\x20tentar\x20autoCompleteMessages','insert','findChats','Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','generateHash','path','max','onTime','DATABASE_CONNECTION_DB_PREFIX_NAME','):\x20Procurando\x20conversa\x20que\x20esteja\x20esperando\x20voto','[AUTH]\x20Database\x20is\x20not\x20enabled','menu_options','connectToWhatsappController','child_process','deleteMessageForEveryone','onWhatsApp','scheduleSendMedia','DD/MM\x20HH:mm:ss','uazapiSendLocation','height','scheduleMessage','initializeQueue','\x1b[46m','Nenhuma\x20conversa\x20encontrada\x20para\x20deletar.','\x1b[1m\x1b[37m','ff:fe','padEnd','indexOf','sharePass','leaveGroup','):\x20newFirstValue\x20após\x20replaceVariables:','):\x20Entrou\x20na\x20função\x20stop','Erro\x20ao\x20editar\x20agentes','getProfileName','Stack\x20trace:','3EB0','RemoteJid:','trimmed','length','Operador:\x20\x22','importChatsBatch','):\x20Encontrado\x20próxima\x20mensagem\x20para\x20','READ','#64c4ff','Nenhum\x20chat\x20fornecido\x20para\x20inserção.','trim','Dados\x20inválidos\x20para\x20edição\x20de\x20mensagens\x20no\x20grupo.','stateConnection','groupId','replyOption','whoCanEdit','fetchConversation','):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos','An\x20error\x20occurred\x20while\x20archiving\x20the\x20chat.\x20Open\x20a\x20calling.','dbClient','selectedButtonId','deleteMany','):\x20Erro\x20ao\x20sincronizar\x20os\x20fluxos\x20','):\x20Conversa\x20atualizada\x20no\x20BD\x20com\x20sucesso.\x20ID:\x20','Falha\x20ao\x20processar\x20a\x20solicitação','success','http','WARN','mkdirSync','Erro\x20ao\x20definir\x20instâncias\x20como\x20desconectadas:','listType','#9ab6c1','getUniqueFlowName','DOCKER_ENV','hGetAll','AUTHENTICATION_JWT_SECRET','pollCreationMessageV2','arraybuffer','keys','authModel','Falha\x20ao\x20criar\x20IPv6.','):\x20Erro\x20ao\x20salvar\x20a\x20conversa\x20no\x20BD:\x20','findGroupInfos','):\x20Encontrou\x20conversa\x20no\x20startBot:\x20','):Image\x20is\x20url','):\x20Entrou\x20na\x20função\x20clearVariables','setNewValue','getBase64FromMediaMessage','compression','Falha\x20ao\x20processar\x20a\x20solicitação\x20findGroups','Erro\x20ao\x20iniciar\x20o\x20fluxo.','scheduled','delayChatLabel','cleanDisconnectedInstances','updateAll','Erro\x20ao\x20editar\x20a\x20conversa','CORS_CREDENTIALS','Erro\x20ao\x20atualizar/inserir\x20o\x20chat\x20','expiration','Fluxo\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','):\x20Iniciando\x20bot...','linkPreview','Error\x20parsing\x20JSON:','createNewConversation','getChatModelForOwner','):\x20Criando\x20fluxo...','):\x20Falha\x20ao\x20deletar\x20mensagem.','contextInfo','archive','class-validator','floor','messageContextInfo','Erro\x20ao\x20limpar\x20instâncias\x20desconectadas:','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto:\x20','rm\x20-f\x20package-lock.json\x20&&\x20rm\x20-rf\x20node_modules/@whiskeysockets/baileys','spawn','truncatedto','notMatchRegex','Configured\x20new\x20IPv6:\x20','normalizeMessageContent','\x1b[33m%s\x1b[0m','messages.set','hSet','Error\x20finding\x20many\x20contacts:','\x20foi\x20interrompido\x20pelo\x20usuário.','latitude','not_announcement','\x20minutos...','format','Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.','goNextblock','Erro\x20ao\x20verificar\x20e\x20atualizar\x20o\x20status\x20do\x20chat','):\x20Bloco\x20com\x20ID\x20','updateMissingEtiquetas','replaceVariablesInObject','contact_blacklist','data:\x20','Sem\x20permissão\x20para\x20enviar\x20para\x20esse\x20grupo','connectedName','uazapiSendContact','):\x20Conversa\x20está\x20expirada\x20-\x20voto','\x22numbers\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','END:VCARD','https://api.ipify.org?format=json','isConnected','bateu\x20events','Erro\x20ao\x20inserir\x20chats:','):\x20Enviando\x20localização','Erro\x20ao\x20criar\x20fluxo\x20compartilhado','sendMedia','Servidor\x20de\x20autenticação\x20offline.\x20Nova\x20tentativa\x20em\x20','owner','\x20não\x20encontrado\x20para\x20atualização.','updateGParticipant','.\x20Tentando\x20novamente\x20em\x20','delAll','apirequest','Database\x20connection\x20closed.','url','Erro\x20ao\x20atualizar\x20múltiplas\x20conversas:','nomecompleto','Cannot\x20','flattenObject','updateFlowConfig','updateGroupParticipantsWebhook','address',',\x20Novo\x20tamanho:\x20','_activatedCount','):\x20Entrou\x20na\x20função\x20goToFlow','endSession','\x1b[31m','axios','evaluateConditionTest','\x20-i\x20','RemoveChatLabel','sendButtons','getConversation','DB_PREFIX_NAME','admin','_Messages','Read\x20messages','uazapiSendAudio','create','delay','/64\x20dev\x20',',\x20canSendMessage:\x20','Garbage\x20collection\x20não\x20está\x20disponível.','):\x20Ignoring\x20group\x20messages.','):\x20\x27Enviando\x20texto\x20para\x20\x27','ex:\x20\x22groupJid=120362@g.us\x22','mentioned','inner','error','ObjectId','\x1b[1m','jsonschema','Esse\x20fluxo\x20não\x20permite\x20importação.','utf8','insertCount','processblock','):\x20Fluxos\x20sincronizados\x20e\x20mapeados\x20com\x20sucesso.','backgroundColor','chatHandle','Erro\x20ao\x20normalizar\x20a\x20mensagem:','.error','unreadcount','namespace','chats.update','The\x20','Logs\x20do\x20PM2\x20limpos\x20com\x20sucesso.','):\x20Transformação\x20de\x20mensagens\x20agendadas\x20concluída!','request\x20received\x20in\x20updateAutoCompleteMessages','Não\x20é\x20permitido\x20editar\x20uma\x20variável\x20com\x20leadInfo\x20definido\x20como\x20true.','picture','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20conectar\x20ao\x20whatsapp','start','Logger','qrCode','):\x20Removendo\x20\x27','CONNECTION','):\x20debug\x20alterando\x20this.AutomateSystem','2198920qCwBlP','uazapi','):\x20Conversas\x20existentes\x20marcadas\x20como\x20fechadas.','fetchLabels','\x0aFN:','GET','):\x20leadInfoVariables','exists','\x27\x20não\x20encontrado','get','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGroupPicture','startCommand','global','):\x20Grupo\x20','Error\x20removing\x20IPv6\x20address:\x20','):\x20Bloco\x20original\x20para\x20cópia:\x20','match','sendCommand','):\x20conversation.waitingMenu_name','/wa-message-update','send.message','$addToSet','Falha\x20ao\x20processar\x20a\x20solicitação\x20leaveGroup','loggedOut','replaceVariablesLogs','Creating\x20or\x20updating\x20instance\x20with\x20id:\x20','repository','synchronizeAndMapFlows','Tentativa\x20','Próxima\x20verificação\x20de\x20licença\x20e\x20se\x20tem\x20atualização\x20em\x20','FULLCHAIN','fetchProfile','delayMessage','loadWebhook','):Hash\x20to\x20image\x20name:\x20','[service]\x20request\x20received\x20in\x20sendButtons','Reconexão\x20ilimitada\x20pois\x20ScheduleMessage.isConnected.','labelId','configureIPv6','AutomateFunctions','):\x20Entrou\x20na\x20função\x20saveReply','msgRetryCounterCache','):\x20Há\x20mensagens\x20prontas,\x20limpando\x20e\x20adicionando\x20à\x20fila','Erro\x20ao\x20tentar\x20encerrar\x20a\x20API','getMinutes','50mb','flowActive','toUpperCase','sendSticker','composing','Instâncias\x20desconectadas\x20e\x20seus\x20IPv6\x20removidos:\x20','):\x20Ler\x20mensagem','):Notifying\x20clients\x20for\x20chat:\x20','#f64847','enabled','response','updateCustomFields','imported','cwd','fullName','readData','contacts','):\x20Erro\x20ao\x20criar\x20ou\x20atualizar\x20o\x20chat','pollCreationMessageKey','):Archiving\x20chat','reaction','SERVER','groupCreate','announcement','\x1b[40m','verbose','Instance\x20restarted','Não\x20é\x20permitido\x20deletar\x20o\x20bloco\x20padrão','Somente\x20é\x20permitido\x20editar\x20o\x20campo\x20next_groupId\x20do\x20bloco\x20padrão','findParticipants','Botão\x201','atendimentoAberto','):\x20condições\x20atendidas,\x20parando\x20verificação...\x20em\x20','put','):\x20Tentando\x20deletar\x20todas\x20as\x20mensagens...','function','):\x20Error\x20processing\x20conditions:\x20','):Getting\x20image\x20from\x20url','deletedCount','reconnectStartTime','6dBteVh','/wa-chats','interactiveMessage','.svg','):Image\x20is\x20base64','sha256','HistoryProcessed\x20definido\x20como\x20true\x20após\x202\x20minutos.','Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.','deleteBlock','./.git/config','messageType','loadInstance','getflow','everyOne','https://uazapi-plugin.bubbleapps.io/?url=','isBase64','groupSettingUpdate','_fromMe','Erro\x20ao\x20criar\x20fluxo','Removed\x20','selectableCount','width','last','\x20minutos.\x20Será\x20às\x20','startID','instanceCount','public','quotedMessage','/events','):\x20teve\x20mudanças\x20chat.muteEndTime:\x20','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20','updateProfileStatus','uazapi\x20não\x20está\x20instalado\x20pelo\x20git','/instance/create','group','upperCase','?authSource=admin&readPreference=primary&directConnection=true','Erro\x20ao\x20editar\x20condição\x20do\x20fluxo','\x20contacts','decryptPollVote','/*.json','deleteDoneMessages','processclearVariables','.X-ABLabel:Celular\x0a','promisify','setting','messaging-history.set','from','8080','unlinkSync','isLong','PORT','urlencoded','):\x20Tipo\x20de\x20conteúdo\x20identificado:\x20','key','ContactModel','buttonMessage','Regularize\x20sua\x20licença\x20no\x20site\x20https://uazapi.dev/','420twGimy','oldToken','):\x20tem\x20blocks','connection.update','Subdomínio\x20final:','webhookMap','verifiedName','prepareMediaMessage','):\x20Erro\x20ao\x20deletar\x20fluxo\x20','Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64','):\x20customFieldVariables','\x22,\x20valor\x20a\x20substituir:\x20\x22','leadInfo.','formatBRNumber','):\x20não\x20encontrou','apiName','readFileSync','TEL','IPv6\x20address\x20removed:\x20','EMAIL','jpegThumbnail','INFO','\x1b[32m','Last\x20message\x20not\x20found','):\x20Procurando\x20PRONTAS\x20mensagens\x20para\x20envio','Não\x20é\x20possível\x20editar\x20um\x20grupo\x20de\x20mensagens\x20que\x20está\x20em\x20processamento.',',\x20Expiration\x20Time:\x20','hex','HOST','flow','#b4ebff','redisEnv','):\x20Bloco\x20tem\x20apirequest.body,\x20adicionando\x20bodyString','Mac\x20OS','locked','API\x20encerrada\x20com\x20sucesso.\x20Ela\x20será\x20automaticamente\x20reiniciada\x20pelo\x20gerenciador\x20de\x20processos','variablesNotFound','Schema','editOperator','recording','PRIVKEY','PROXY','throwAndLogError','authentication','):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20','removeProfilePicture','CORS_ORIGIN','\x1b[42m','instanceName','):\x20Nenhuma\x20variável\x20especificada\x20foi\x20encontrada\x20para\x20remoção','):\x20Não\x20encontrado\x20próxima\x20mensagem,\x20fará\x20nova\x20verificação\x20em\x20','deviceSentMessage','):\x20Atualizando\x20status\x20da\x20mensagem\x20','Db\x20Connection','stdout','revokeInviteCode','Falha\x20ao\x20processar\x20a\x20solicitação\x20revokeInviteCode','role','sendWhatsAppAudio','count','http://checkip.dyndns.org','Chat\x20e\x20mensagens\x20deletadas\x20com\x20sucesso.','Erro\x20inesperado\x20em\x20processvaredits:\x20','groupHandler','):\x20Label\x20','log','connectionClosed','updateChatGroupData','method','lean','audioWhatsapp','createAndSave','allflows','audioMessage','AutomateSystem','Falha\x20ao\x20processar\x20a\x20solicitação\x20toggleEphemeral','protocolMessage','flowIgnoreGroups','mimetype','whatsappNumber','#fe9dfe','request\x20received\x20in\x20editFlowgroup','getFlow','pollErrorMessage','available','upsertChats','\x1b[34m%s\x1b[0m','listIPv6Addresses','editflowgroup','Instance\x20\x22','updateParticipant','Falha\x20ao\x20processar\x20a\x20solicitação\x20send_message,\x20numero:\x20','):\x20Todas\x20as\x20mensagens\x20deletadas\x20com\x20sucesso.','\x20removido\x20do\x20chat\x20','caption','_minute','Erro\x20ao\x20atualizar\x20AutomateSystem:','writeFileSync','call','blockLogs','detail','body','):\x20Query\x20params:','reviver','unlocked','src','content-type','subject','Forbidden','redirect','MAX_SAFE_INTEGER','DELIVERY_ACK','updateConversation','https://ipv6.jsonip.com','ip\x20-6\x20addr\x20show\x20dev\x20','globalShow','toLocaleString','request\x20body:\x20','XX:XX:XX:XX:XX:XX','stickerMessage','join','cacheInstanceModel','stderr','awaitingApproval','BufferJSON','cachedData-whatsapp','getLabelModelForOwner','.extension','reorderBlocks','lastCondition','getClient','deleteOne','dbServer','mongoose','findGroupsEspecial','Nome\x20do\x20campo\x20personalizado\x20já\x20existe.','Module\x20-\x20ON','scheduleNextCheck','request_method','approve','last_update','lastUpdate','toNumber','getAutomateSystem','exit','SSL_CONF_PRIVKEY','processvaredits','sendReaction','):\x20Editando\x20edição\x20do\x20fluxo...','isArray','activatedCount','pino','Failed\x20to\x20send\x20buttons\x20message','Instance\x20Key\x20from\x20DB:','js-yaml','processReadyMessages','StatusJidList\x20is\x20required','base64','Erro\x20de\x20duplicidade\x20no\x20índice\x20autoCompleteMessages.command\x20detectado,\x20removendo\x20índice...','editFlowReply','):Processing\x20audio','oldValue','configService','block','\x20não\x20é\x20um\x20voto\x20enviado\x20pelo\x20usuário','createServer','):\x20Grupos\x20de\x20mensagens\x20com\x20status\x20\x22done\x22\x20deletados\x20com\x20sucesso.','defineProperty','display_text',',\x20isAdmin:\x20','utf-8','-whatsapp-api','TYPE','_year','isBusinessInstance','fromObject','info','yes','findGroups',',\x20valor\x20a\x20encontrar:\x20\x22','waMonitor','variablesToObject','):\x20Flow\x20ativado\x20e\x20não\x20desativado\x20pelo\x20LeadInfo,\x20fazendo\x20outras\x20verificações','autoCompleteMessages.command','URL\x20não\x20disponível','https://ifconfig.me/ip','--------------------------------------','GROUPS_UPSERT','readMessage','):\x20Editando\x20condição\x20do\x20fluxo...','readMessages','assign','forEach','editChat','):\x20Iniciando\x20processReadyMessages','updateProfilePicturePrivacy','cleaningUp','1190kjTYQH','valid','_p_','_sender','toggleEphemeral','reject','request\x20received\x20in\x20editFlow','cache','recebido\x20de','Falha\x20ao\x20processar\x20a\x20solicitação\x20updateProfileName','writeData','Selecione\x20uma\x20opção','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupName','media','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','ini','shareFlow','updateMany','inviteUrl','Erro\x20ao\x20encerrar\x20a\x20API','https://api64.ipify.org?format=json','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand\x20ou\x20você\x20não\x20tem\x20permissão\x20para\x20usá-lo','remove','when','participants','updateOneById','\x20is\x20already\x20in\x20use.','Variável\x20não\x20encontrada!','File\x20name\x20and\x20mimetype\x20extension\x20are\x20not\x20defined\x20in\x20the\x20media\x20message','readMessageBot','/:instanceName','/wa-groups','envProcess','Não\x20é\x20permitido\x20adicionar\x20outro\x20grupo\x20padrão','Botão\x202','mediaKey','encoding','Quantidade\x20limite\x20de\x20QR\x20Codes\x20emitidos\x20alcançada,\x20crie\x20outra\x20instância...','mediatype','ON\x20-\x20dbName:\x20','buttons','findByIdAndDelete','admin_add','getValidWhatsAppNumbers','[TESTE\x20RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','inviteCode','fetchPrivacySettings','folder','/instance/connect','):\x20Envio\x20interrompido\x20devido\x20à\x20desconexão.','Validate','Cache-Control','pollCreationMessageV3','saveVariable','}}\x20->\x20valor\x20não\x20encontrado','):Output\x20path:\x20','OrAnd','groupToggleEphemeral','IP\x20confirmed:\x20','request\x20received\x20in\x20starFlow','leadInfo.desativadoFluxoAte','Erro\x20ao\x20marcar\x20mensagem\x20como\x20lida','Erro\x20desconhecido\x20ao\x20tentar\x20enviar\x20mensagem\x20para\x20o\x20grupo','Falha\x20ao\x20limpar\x20os\x20logs\x20do\x20PM2.','MESSAGES_UPSERT','editflow','REDIS_URI','status@broadcast','):\x20Procurando\x20conversa','):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20','replaceValue','conversationTimestamp','Erro\x20ao\x20atualizar\x20cacheInstance:','drop','etiquetas','connectionUpdate','.txt','buttonsResponseMessage','flowConversation','error_log','toBrazilianNumberFormat','#92ceac','created','IP\x20mismatch:\x20configured\x20','_Contacts','shift','deleteChat','numbers','data','config','Não\x20é\x20permitido\x20deletar\x20o\x20grupo\x20padrão','Erro\x20ao\x20buscar\x20o\x20fluxo','delaySecMin','@ffmpeg-installer/ffmpeg','saveTextReply','}}\x20->\x20\x22','collections','):\x20Nome\x20do\x20arquivo\x20gerado:\x20','groupJid','Erro\x20ao\x20atualizar\x20o\x20flow.','createConversationforgoToFlow','copyBlock','deleteMessage','params','/wa-qrcode','contact','stopMinutes','[RETRY]\x20-\x20mensagem\x20perdida\x20-\x20iniciar\x20recuperação','auth','result','reorderReplyOptions','getDevice','@redis/client','leadInfo','env','removeInstance','STORE_MESSAGE','findWebhook','Database\x20is\x20not\x20enabled','Network\x20interfaces\x20detected:\x20','instanceInfo','userDevicesCache',',\x20global:\x20','Flow\x20iniciado','Error\x20in\x20prepareMediaMessage:','longitude','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20mídia:\x20','replyOptions','replaceVariables','/wa-message','segundos','fetchContacts','notContains','\x5c$&','messageLogsModel','preview','DARK','$set','writeFile','imagechat','ConversationModel','0123456789ABCDEF','routerPath','optionDescription','getReadyToSendMessages','parseInt','isInteger','KEY','Type\x20not\x20found','Falha\x20ao\x20processar\x20a\x20solicitação\x20getBase64FromMediaMessage','cacheInstanceRepository','request\x20received\x20in\x20createFlow','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20prepareMediaMessage','lastInteraction','.docx','deleteflow','joinGroup','existsSync','Connection\x20closed\x20for\x20instance:\x20','findAndUpdateCacheContact','Erro\x20ao\x20arquivar\x20chat','eventEmitter','isJidBroadcast','node-cache','127626UYLsGX','customFields','getScheduleMessageModelForOwner','Erro\x20ao\x20alterar\x20fluxo','The\x20group\x20invite\x20code\x20needs\x20to\x20be\x20informed\x20in\x20the\x20body','/5\x20falhou:\x20','):\x20Erro\x20ao\x20enviar\x20mensagem\x20de\x20audio:\x20','Erro\x20ao\x20alterar,\x20criar\x20ou\x20excluir\x20grupo\x20de\x20mensagens','):\x20whoCanUse\x20after\x20validation:\x20','view\x20engine','createButtonsFromValues','.doc','text','random','Pausado\x20por\x20','Erro\x20ao\x20atualizar\x20o\x20AutomateSystem.','bodyString','restrict','#00a1f2','quick_reply','Erro\x20de\x20atualização:\x20','slice','Failed\x20to\x20prepare\x20media\x20message','listen','getOwnPropertyDescriptor','listMessage','createInstance','notas','cors','\x22statusJidList\x22\x20must\x20be\x20an\x20array\x20of\x20numeric\x20strings','pm2\x20flush','Nenhuma\x20conversa\x20encontrada\x20para\x20editar\x20ou\x20você\x20não\x20é\x20o\x20proprietário\x20da\x20conversa.','$dbName','):Desconectado,\x20parando\x20execução.',',\x20lastCondition:\x20','):\x20[messages.upsert]\x20mensagem\x20duplicada\x20ignorada','/create','processPollUpdateMessage','name','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp:','This\x20name\x20','URL','groupMemberAddMode','O\x20campo\x20_id\x20é\x20obrigatório\x20para\x20editar\x20uma\x20conversa.','Erro\x20ao\x20encontrar\x20ou\x20criar\x20AutomateSystem:','_id','Not\x20Found','greater','No\x20suitable\x20network\x20interface\x20found','GROUPS_UPDATE','website','enviado\x20para','updateGroupPicture','Fluxo\x20não\x20encontrado\x20para\x20o\x20ID:','app-state-sync-key','):\x20Mensagem\x20enviada\x20pelo\x20dono\x20do\x20bot,\x20saindo...','dark','button','/startFlow/:instance/:startID','router','4966871YsXbGy','contactMessage','Types','AUTHENTICATION_JWT_EXPIRIN_IN','all_member_add','sections','cachedContact','flowStopMinutes','getLastMessage','includes','notify','menuIgnoreNonVotes','digest','Safari','.ogv','):\x20alterando\x20this.AutomateSystem','updateMissingCustomFields','WA\x20MODULE','Missing\x20global\x20api\x20key','webhook','cta_url','/wa-connection-update','sendList','findOneAndUpdate','findByIdAndUpdate','):\x20Criando\x20nova\x20conversa[createConversationforgoToFlow]','):Failed\x20to\x20archive\x20chat\x20in\x20repository\x20for\x20number:\x20','HistoryProcessed','release','\x20adicionado\x20ao\x20chat\x20','PLAYED','ERROR','Erro\x20na\x20função\x20updateChatWithMessage:\x20','sendPoll','#d8e651','Erro\x20ao\x20deletar\x20grupos\x20de\x20mensagens\x20com\x20status\x20done/stopped','Mensagem\x20não\x20suportada','):\x20lastBlockId:\x20','extractMessageContent','fetchMessages','SINGLE_SELECT','editScheduleMessage','\x20:\x20','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo','#01d0e2','fileName','Expected\x20a\x20Buffer\x20but\x20received\x20a\x20Transform\x20or\x20other\x20type.','app','):\x20Condições\x20para\x20criar\x20uma\x20nova\x20conversa\x20com\x20base\x20em\x20um\x20fluxo\x20satisfeitas.','senderKeyDistributionMessage','varedits','ephemeralDuration','Falha\x20ao\x20deletar\x20a\x20coleção\x20de\x20mensagens:\x20','static','changeVariables','content','Removing\x20excess\x20IPv6\x20address:\x20','Para\x20marcar\x20esse\x20fluxo\x20como\x20visível\x20globalmente,\x20você\x20precisa\x20usar\x20a\x20apikey\x20Global.','):\x20Adicionando\x20\x27','\x20ao\x20chat\x20','status.instance','eventemitter2','waitingForReplyMenu','ContactsAndGroups','buttonText','replacer','type','pollMessage','getConversationModelForOwner','update','SERVER_OFFLINE','clearVariables','groupRevokeInvite','):\x20teve\x20mudanças\x20chat.archived:\x20','deleteFlow','#fed428','cpf','SendScheduleMessage','The\x20global\x20api\x20key\x20must\x20be\x20set','):Image\x20converted\x20to\x20WebP','menuExpiredMessage','#56ccb4','processUazapi','findMessages','removeData','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato:\x20','lastBlockId','Error\x20detecting\x20IPv6\x20prefix\x20and\x20interface:','toString','readreceipts','binary','Font\x20is\x20required','connectToWhatsapp','mongodb','ip:\x20','Erro\x20ao\x20buscar\x20ou\x20criar\x20automateSystem','updateAgent','__esModule','leadInfo.etiquetas','Chat\x20não\x20existe,\x20use\x20a\x20função\x20de\x20importar\x20para\x20criá-lo','chats','imageMessage','write','NextBlock','express-async-errors','findManyByIds','findGroupInfo','processConditionsTest','importChats','request\x20received\x20in\x20updateCustomFields','.pdf','\x1b[33m','Valor\x20inválido\x20para\x20formatação\x20brasileira:\x20','Deleted\x20','#ff9484','groupdata.participants','Authentication\x20error','no-cache','Erro\x20ao\x20verificar\x20o\x20número\x20no\x20WhatsApp.','toBRL','CHATS_UPSERT','isBusiness','group-participants.update','has','triedToSend','options','nativeFlowMessage','stopped','envYaml','SEND_MESSAGE','\x1b[37m','saveCreds','CONNECTION_UPDATE','updateOne','Telefone:\x20','https','addMessagesToGroup','https://api.elevenlabs.io/v1/text-to-speech/','size','REDIS_ENABLED','updateGroupWebhook','chatId','\x1b[31m%s\x1b[0m','uazapiSendMedia','):\x20Grupo\x20não\x20encontrado\x20ou\x20groupdata\x20não\x20definido:\x20','MessageModel','sign','save','authService','Instância\x20não\x20encontrada.','phoneNumber','memberAddMode','editflowblock','):\x20Buscando\x20flow...','):Sending\x20audio\x20whatsapp','getScheduleMessage','Selecione','default','):\x20Erro\x20ao\x20enviar\x20mensagens\x20para\x20','@broadcast','muteEndTime','verifyWhatsAppNumber','creds','blockId\x20é\x20necessário\x20para\x20deletar\x20um\x20bloco','demote','GUARD','updateChatWithMessage','Imagem\x20não\x20encontrada','ORG:','stopConversation','saveConversationToDatabase','findOne','Falha\x20ao\x20processar\x20a\x20solicitação\x20groupSetting','PREFIX_KEY','redis','ChatModel','getMessage','local_map','processConditions','updateLastSeenPrivacy','/instance/fetchInstances','Message','ex:\x20\x22H097Xo5VT8J9xjkbJZFhBr\x22\x20or\x20\x22https://chat.whatsapp.com/H097Xo5VT8J9xjkbJZFhBr\x22','rows','condition','Request\x20Body:','):\x20Criando\x20nova\x20conversa[createNewConversation]','groups.upsert','https://api.openai.com/v1/images/generations','privacySettings','Falta\x20informação\x20para\x20a\x20chamada\x20API','):\x20Erro\x20na\x20atualização\x20da\x20conversa\x20no\x20BD:\x20','.jwt','image','error\x20get\x20vote','hasOwnProperty','getMonth','isURL','connecting','responsavelid','docker','getVariablesChat','chatModify','\x20tentativas.','remote\x20\x22origin\x22','stopIfLastReturnedError','Falha\x20ao\x20remover\x20os\x20arquivos\x20necessários.','viewOnceMessageV2','File\x20written\x20to\x20path:\x20','):\x20Enviando\x20áudio','action','email','stopWhenYouSendMsg','ip\x20-6\x20addr\x20add\x20','):\x20Current\x20Time:\x20','groupSetting','LICENSE_INVALID','toLowerCase','profile','getContentType','instanceName\x20not\x20provided.','joinGroupValidate','\x20inseridos\x20no\x20banco\x20de\x20dados...','):\x20Error\x20processing\x20the\x20block:\x20','message','$pull','fakeReceived','):\x20Conversa\x20atualizada\x20em\x20memória','push','No\x20global\x20IPv6\x20address\x20found\x20on\x20the\x20network\x20interface','hDel','application/octet-stream','):\x20Buscando\x20todos\x20os\x20fluxos...','URI','testingWith','processingGroup','AUTHENTICATION','formatVCard','getTime','instanceKeys','Instâncias\x20removidas:\x20','Filtered\x20network\x20interfaces:\x20','groupDesc','processedMessagesCache','evaluateCondition','json','extractPhoneNumber','reduce','lastReceivedMessage','):\x20Extensão\x20do\x20arquivo\x20encontrada\x20nos\x20tipos\x20comuns:\x20','Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20findAndUpdateCacheContact','applyvaredit','.TEL;waid=','groups_ignore','sleep','):\x20Mensagens\x20PRONTAS\x20para\x20envio\x20encontradas:\x20','\x1b[36m%s\x1b[0m','Resultado\x20da\x20correspondência\x20de\x20URL:','title','groupMetadata','webp','pt-BR','replaceOne','editedMessage','\x20foi\x20interrompido\x20pelo\x20status\x20\x27stopped\x27.','messageTimestamp','transformScheduledMessagesByType','Configuração\x20SSL\x20recuperada:','scheduleFlow','values','Bloco\x20com\x20ID\x20','remove.instance','findAndReplace','SERVER_ACK','express','Parando\x20aplicação...','):\x20Deletando\x20conversa...','templateButtonReplyMessage','Parando\x20aplicação,\x20atualização\x20recebida','getTicketSystem','Erro\x20ao\x20buscar\x20a\x20conversa','groupdata','Contacts\x20not\x20found','generateRandomIPv6','CONTACTS_UPDATE','mentions','):Audio\x20converted\x20and\x20stored\x20in\x20cache','):\x20Entrou\x20na\x20função\x20scheduleFlow','split','waitingMenu_ExpiredMessage','updateMissingTags','variable','reference','):\x20Detalhes\x20da\x20mídia\x20obtidos\x20com\x20sucesso.','Close\x20connection','startFlow','.webp','expression','):\x20Erro\x20ao\x20enviar\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20','flows','\x20não\x20encontrado','FlowController','unreadCount','crypto','relayMessage','fileLength','processApiRequest','Reusing\x20existing\x20IPv6:\x20','Network\x20Interface\x20detected:\x20','console','organization','ListMessage','\x20\x1b[0m','this.reconnectAttempts:\x20','audio/ogg;\x20codecs=opus','findOrCreate','#ffffff','CHATS_SET','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20│','retrySendMessage','createIPv6','Não\x20foi\x20possível\x20encontrar\x20ou\x20criar\x20o\x20sistema\x20de\x20automação.','some','command','\x20-vn\x20-c:a\x20libopus\x20-ar\x2016000\x20-ac\x201\x20-b:a\x2018k\x20-f\x20ogg\x20','Nenhum\x20fluxo\x20correspondente\x20encontrado.','\x20excess\x20IPv6\x20addresses.','idSchedule','chatLog','value','superadmin','initAuthCreds','font','announce','number','refused','generateWAMessageFromContent','pollMessageOnDelete','deleteAll','.\x20Pulando.','findFlow','Last\x20message\x20not\x20found\x20for\x20number:\x20','):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20','telefone','prototype','getDelay','All_Instances_Config','firstValue','presence','):\x20Mensagem\x20já\x20enviada\x20para\x20','option','send','label','whoCanUse','.wav','):\x20mediaMessageInfoId\x20:\x20','listResponseMessage','originalUrl','):\x20Conversa\x20inserida\x20com\x20sucesso.',',\x20Segundo\x20Valor:\x20','order','):\x20atualização\x20chat:\x20','STORE_CLEANING_TERMINAL','archiveChat','logger','find','sendDataWebhook','Erro\x20ao\x20buscar\x20conversas','):\x20whoCanUse\x20before\x20validation:\x20','networkInterface','unavailable','createHash','groupLeave','all','findById','GROUP_PARTICIPANTS_UPDATE','findGroup','convert','variables','pendingMessages','ENABLED','sort','queue','Atualização:\x20','minutesToClose','\x1b[30m%s\x1b[0m','ip\x20-br\x20link\x20show','pop','IPv6\x20prefix\x20or\x20network\x20interface\x20not\x20detected.\x20Cannot\x20create\x20IPv6.','):\x20Bloco\x20a\x20ser\x20atualizado:\x20','verify','\x1b[37m%s\x1b[0m','Group\x20not\x20found','readdirSync','LOG_COLOR','cachedContacts-whatsapp','badSession','sendLocation','request\x20received\x20in\x20getFlow','\x20não\x20encontrado,\x20fazendo\x20nova\x20tentativa\x20em\x20','removeIPv6ById','):\x20Editando\x20mensagens\x20no\x20grupo...','groupadd','):\x20Loop\x20externo\x20interrompido\x20devido\x20à\x20flag\x20isConnected','bodyStringErrorParse','ERROR:\x20','getPrototypeOf','Erro\x20ao\x20deletar\x20mensagens:','status','):\x20Atualizando\x20status\x20de\x20erro\x20da\x20mensagem\x20','\x20horas\x20e\x20','findIndex','color','Erro\x20ao\x20substituir\x20variáveis\x20para\x20','util','remoteJid','joinApprovalMode','ms\x20(tentativa\x20','cacheContact','\x20do\x20chat\x20','PENDING','):\x20Erro\x20ao\x20juntar\x20variaveis\x20existentes:\x20','now','waitingMenu_replyOptions','\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64','ScheduleMessageModel','upsertedCount','Campo\x20personalizado\x20não\x20encontrado\x20para\x20o\x20nome\x20','):\x20Fluxos\x20não\x20estão\x20ativados','canSendMessage','):including\x20timestamp\x20in\x20url:\x20','convertaudioMP3','RECONNECT_TIME_FRAME','):\x20Dados\x20recebidos\x20no\x20editFlowGroup\x20data:\x20','charAt','audio/ogg','/clients-info','convertaudio','deleteConversation','Parte\x20do\x20domínio\x20do\x20caminho\x20FULLCHAIN:','instance.','):\x20Erro\x20ao\x20buscar\x20o\x20fluxo:\x20','Erro\x20ao\x20editar\x20mensagens\x20no\x20grupo','DEBUG','):\x20Instancia\x20isBusiness:\x20','vir','waitingMenu_text','fetchInstances','min','Erro\x20ao\x20editar\x20o\x20chat','PASSWORD','/media/','):\x20Usando\x20extensão\x20padrão:\x20','cacheContactModel','_second','online','InstancesAlterarTodas','Erro\x20ao\x20avaliar\x20a\x20condição:\x20','createJid','Valor\x20inicial:\x20\x22','Fluxos\x20não\x20estão\x20ativados','#83e421','delaySecMax','\x20segundos','findAll','The\x20group\x20id\x20needs\x20to\x20be\x20informed\x20in\x20the\x20query','findLabels','\x1b[47m','):\x20Erro\x20ao\x20copiar\x20o\x20documento:\x20','fone','less','getStatus','30540kZZeUv','undefined','):\x20Enviando\x20texto','setContext','model','REDIS','lastFetchAwaitingApproval','messages.update',',\x20saindo.','importChatsAntigo','editflowvaredit','isRunning','MESSAGES_SET','Background\x20color\x20is\x20required','):\x20Comando\x20desconhecido:\x20','createWebhook','findAndReplaceRegex','Erro\x20desconhecido\x20ao\x20deletar\x20grupos\x20de\x20mensagens','@whiskeysockets/baileys','sendMessage','deleteImportedChat','integer','LEVEL','StartBot','lastSendMessage','contacts.upsert','ignoreGroups','SECRET','choices','leadInfo.customFields','Detalhes\x20do\x20erro:','\x0a\x0a\x0a\x20\x20██╗░░░██╗░█████╗░███████╗░█████╗░██████╗░██╗\x0a\x20\x20██║░░░██║██╔══██╗╚════██║██╔══██╗██╔══██╗██║\x0a\x20\x20██║░░░██║███████║░░███╔═╝███████║██████╔╝██║\x0a\x20\x20██║░░░██║██╔══██║██╔══╝░░██╔══██║██╔═══╝░██║\x0a\x20\x20╚██████╔╝██║░░██║███████╗██║░░██║██║░░░░░██║\x0a\x20\x20░╚═════╝░╚═╝░░╚═╝╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚═╝\x0a\x20\x20\x0a\x20\x20uazapi\x20-\x20a\x20melhor\x20api\x20para\x20WhatsApp\x0a\x0a\x20\x20','!stop','imgUrl','pollCreationMessage','):Image\x20created','where','\x22\x20-\x20REMOVED','https://github.com/uazapi/uazapi.git','bearer','IPv6\x20addresses\x20detected:\x20','leadInfo.atendimentoAberto','21864CHFkin','headerString','myAppStateKeyId','splice','updatePresence','and','.type','):\x20[messages.update]\x20group\x20ignored','Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.','closed','API\x20Key\x20inválida.','nome','\x5cd+','removeUnusedChatFields','):\x20Chat\x20','https://api.openai.com/v1/audio/speech','updatePrivacySettings','getMessageModelForOwner','Error\x20testing\x20IP\x20with\x20','):\x20enviado\x20para\x20[','reconnectTimestamps','DisconnectReason','substring','CONTACTS_UPSERT','createConversationforStartFlow','webhookModel','empty','.ogg','convertedOptions','basename','Novo\x20IP\x20criado:\x20','remoteJids','https://chat.whatsapp.com/','):Image\x20path:\x20','):Audio\x20processed','flush','silent','groupGetInviteInfo','normalizeMessage','[\x20SYSTEM\x20-\x20UAZAPI\x20]\x20-\x20Mensagem\x20perdida,\x20não\x20foi\x20possível\x20descriptografá-la,\x20abra\x20o\x20WhatsApp\x20no\x20seu\x20celular\x20para\x20visualizá-la','storePath','PRODUCT_LIST','):\x20Buscando\x20conversas...','The\x20property\x20cannot\x20be\x20empty','.xlsx','?timestamp=','delayChatLabel_MAX_RETRIES','toFile','chats.delete','Variáveis\x20não\x20encontradas:','addBlock','setWebhook','SSL_CONF_FULLCHAIN','Erro\x20ao\x20sincronizar\x20os\x20fluxos:\x20','context','waUploadToServer','createConnection','AddChatLabel','FlowRouter','client','getBusinessProfile','rm\x20-rf\x20','apikey','header','/instance','getAllData','lastRealGroupsFetch','URL\x20completa:','ip\x20-6\x20addr\x20del\x20','):\x20não\x20é\x20um\x20voto\x20e\x20estava\x20esperando\x20por\x20um','Removidas\x20as\x20variáveis:\x20','startsWith','isValidIPv6Config','output','replaceVariablesChat','_pushName',':\x20Verificando\x20se\x20há\x20instance.wuid\x20e\x20AutomateSystem\x20em\x20','replaceVariablesInReplyOptions','participant','DATABASE_CONNECTION_HOST','dataValidate','groupAcceptInvite','):\x20Bloco\x20copiado:\x20','CORS_METHODS','jid','goToFlow','hGet','request\x20received\x20in\x20updateAgent','\x0a{\x20instance:\x20','Flow\x20\x27','catch','addToProcessedMessages','Grupo\x20não\x20encontrado','):Type\x20defined\x20as\x20audio','apply','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20mídia.','_activedCount','-instances','stack','Falha\x20ao\x20processar\x20a\x20solicitação\x20inviteCode','AUTHENTICATION_TYPE','randomBytes','selectedOptions','createSectionsFromValues','Erro\x20ao\x20iniciar\x20a\x20aplicação:\x20','testIPv6','newStoppedUntil','URL:','messageHandle','Falha\x20ao\x20processar\x20a\x20solicitação\x20createGroup','updateMessage','waitingMenu_id','state','):\x20Adicionando\x20mensagens\x20ao\x20grupo...','single_select','ipv6Prefix','urlOrBase64','Erro\x20ao\x20remover\x20label\x20','CONTACTS_SET','Instance\x20logged\x20out','stanzaId','IPv6\x20Prefix\x20detected:\x20','isJidGroup','moreLogs','done','logout','scheduleSendText','isAdmin','\x1b[34m','flushHeaders','groupUpdateDescription','allContacts','Erro\x20ao\x20atualizar\x20o\x20sistema.\x20Código\x20de\x20saída\x20','menuType','Error\x20updating\x20cache\x20contact:','editConversation','isJWT','contacts.update','gifPlayback','API\x20Key\x20from\x20Request:','list','#000000','messageStubParameters','errors','#dfaef0','locationMessage','none','/config','\x20depois\x20','post','editFlowGroup','LOG','thumbnailUrl','Esse\x20fluxo\x20expirou','groupInviteCode','execSync','Subdomínio\x20não\x20encontrado','conditions','):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio:\x20','editFlowVaredit','\x0a*Você\x20respondeu*:\x0a','.png','Not\x20is\x20business\x20profile','):\x20Erro\x20ao\x20buscar\x20participantes\x20que\x20querem\x20entrar\x20','notEmpty','subjectTime','connect','audio','\x20quoted:\x20','replace','groups.update','query','):Archiving\x20chat\x20in\x20client\x20for\x20number:\x20','_remoteJid','Router','fromMe','):\x20Editando/criando\x20grupo\x20de\x20mensagens...','Erro\x20ao\x20buscar\x20todos\x20os\x20fluxos:\x20','Partes\x20do\x20caminho\x20FULLCHAIN:','│\x0a\x20\x20\x20\x20\x20\x20\x20\x20└','updateAutoCompleteMessages','setRestartTimeout','padStart','inviteCodeDetails','instances','Número:\x20','parse','):\x20Não\x20foi\x20encontrado\x20fluxo\x20com\x20esse\x20startCommand','\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados.','sendMessageAck','toArray','creation','DATABASE_CONNECTION_PASSWORD','ScheduleMessage','varedit','The\x20instance\x20needs\x20to\x20be\x20disconnected','connectionState','):\x20Editando\x20bloco...','Erro\x20ao\x20importar\x20chats','):\x20A\x20mensagem\x20é\x20\x22stopConversation\x22\x20=\x20','SUCCESS','blockId','groupValidate','\x20com\x20sucesso.','updateProfileName','createButtonSectionsFromValues','getDate','\x20-\x20ON:\x20','AUTHENTICATION_API_KEY','events','automateSystem','ip6eui','contains','warn','creds.json','scheduleSendAudio','):Cached\x20audio\x20found,\x20returning\x20existing\x20file','The\x20message\x20is\x20not\x20of\x20the\x20media\x20type','):\x20Criando\x20fluxo\x20compartilhado...','list2','boolean','Retornando\x20grupos\x20COM\x20cache','Generated\x20IPv6:\x20','@g.us','Erro\x20ao\x20editar\x20grupo\x20do\x20fluxo','pow','\x0aitem','64017iDfNtb',']\x20(','):\x20Chat\x20atualizado\x20com\x20sucesso\x20no\x20BD.\x20ID:\x20','bulkWrite','test','):\x20Nenhuma\x20mensagem\x20encontrada\x20para\x20envio','true','addReplyOption','ip\x20-6\x20addr\x20show\x20scope\x20global','Connection\x20Closed','Valor\x20inválido\x20para\x20conversão\x20em\x20BRL:\x20','):\x20Flow\x20\x27'];a0_0x161d=function(){return _0x5685d2;};return a0_0x161d();}var Lt={},Re=class u{constructor(_0x3adf71,_0xe33869,_0x5b0a54){const _0x48f671=a0_0x1df5a5;this[_0x48f671(0x4e6)]=_0x3adf71,this[_0x48f671(0x5aa)]=_0xe33869,this['repository']=_0x5b0a54,this[_0x48f671(0x6dc)]={},this[_0x48f671(0x48e)]=null,this['logger']=new $(u['name']),this[_0x48f671(0x921)]={},this[_0x48f671(0x1a8)]={},this[_0x48f671(0x30c)]={'state':_0x48f671(0x261)},this['storePath']=(0x0,j['join'])(ce,_0x48f671(0x93d)),this[_0x48f671(0x3de)]=new Fs[(_0x48f671(0x686))](),this[_0x48f671(0x582)]=new Fs[(_0x48f671(0x686))](),this[_0x48f671(0x381)]=!0x1,this[_0x48f671(0x449)]={'status.instance':_0x48f671(0x5fe),'connection.update':_0x48f671(0x5fe),'qrcode.updated':_0x48f671(0x571),'messages.upsert':_0x48f671(0x58a),'send.message':'/wa-message','messages.update':_0x48f671(0x3c8),'group.upsert':_0x48f671(0x528),'group.update':_0x48f671(0x528),'group-participants.update':_0x48f671(0x528),'messages.set':'/wa-all-message','contacts.set':_0x48f671(0x2d6),'contacts.upsert':_0x48f671(0x2d6),'contacts.update':_0x48f671(0x2d6),'presence.update':'/wa-presence','chats.set':_0x48f671(0x40b),'chats.update':_0x48f671(0x40b),'chats.upsert':_0x48f671(0x40b),'chats.delete':_0x48f671(0x40b)},this[_0x48f671(0x91f)]=0x36ee80,this[_0x48f671(0x409)]=null,this[_0x48f671(0x27c)]=0x0,this[_0x48f671(0x7ff)]=[],this['RECONNECT_TIME_FRAME']=0xea60,this[_0x48f671(0x7cc)]=!0x1,this['chatHandle']={'chats.upsert':async(_0x3dd2d1,_0x136c0b)=>{const _0xb80363=_0x48f671;let _0x1814d9=[];for await(let _0x597856 of _0x3dd2d1)_0x1814d9['push']({'_id':_0x597856['id'],'owner':this['instance']['wuid'],'group':_0x597856['id'][_0xb80363(0x237)](_0xb80363(0x8ca)),'name':_0x597856[_0xb80363(0x5d3)]||_0x597856[_0xb80363(0x8f2)]||null,'contactname':null,'lastmsg':_0x597856[_0xb80363(0x550)]&&_0x597856['conversationTimestamp'][_0xb80363(0x641)]()[_0xb80363(0x303)]<0xd?_0x597856[_0xb80363(0x550)]*0x3e8:_0x597856[_0xb80363(0x550)]||null,'archived':_0x597856['archived']||!0x1,'unreadcount':_0x597856[_0xb80363(0x717)]||0x0,'ephemeralExpiration':_0x597856[_0xb80363(0x8f5)]||0x0});this[_0xb80363(0x757)](_0xb80363(0x937),_0x1814d9);},'chats.update':async(_0x3264d6,_0x3eb5ff)=>{const _0x21b43f=_0x48f671;for(let _0x57bb86 of _0x3264d6){let _0x15bc3a={'_id':_0x57bb86['id'],'owner':this[_0x21b43f(0x921)]['wuid'],'archived':_0x57bb86[_0x21b43f(0x219)],'muteEndTime':_0x57bb86['muteEndTime'],'ephemeralExpiration':_0x57bb86[_0x21b43f(0x8f5)]},_0x28b56f=!0x1,_0x21530e={};_0x15bc3a[_0x21b43f(0x219)]!=null&&(this['logger'][_0x21b43f(0x3fb)](this['instanceName']+'\x20('+this[_0x21b43f(0x921)][_0x21b43f(0x2d1)]+_0x21b43f(0x632)+_0x57bb86['id']+'\x20:\x20'+_0x57bb86[_0x21b43f(0x219)]),_0x28b56f=!0x0,_0x21530e[_0x21b43f(0x219)]=_0x57bb86[_0x21b43f(0x219)]),'muteEndTime'in _0x57bb86&&(this[_0x21b43f(0x755)][_0x21b43f(0x3fb)](this[_0x21b43f(0x474)]+'\x20('+this[_0x21b43f(0x921)][_0x21b43f(0x2d1)]+_0x21b43f(0x427)+_0x57bb86['id']+_0x21b43f(0x613)+(_0x57bb86[_0x21b43f(0x689)]??'0')),_0x28b56f=!0x0,_0x21530e['muteEndTime']=_0x57bb86[_0x21b43f(0x689)]??0x0),_0x21b43f(0x8f5)in _0x57bb86&&(this[_0x21b43f(0x755)][_0x21b43f(0x3fb)](this[_0x21b43f(0x474)]+'\x20('+this[_0x21b43f(0x921)]['wuid']+_0x21b43f(0x93f)+_0x57bb86['id']+'\x20:\x20'+(_0x57bb86[_0x21b43f(0x8f5)]!==void 0x0?_0x57bb86[_0x21b43f(0x8f5)]:_0x21b43f(0x7c2))),_0x21530e[_0x21b43f(0x8f5)]=_0x57bb86['ephemeralExpiration']===null?0x0:_0x57bb86[_0x21b43f(0x8f5)],_0x28b56f=!0x0);let _0x41463e;_0x28b56f&&(_0x41463e=await this[_0x21b43f(0x3cf)][_0x21b43f(0x947)]['updateOne']({'where':{'_id':_0x57bb86['id']}},_0x21530e,this[_0x21b43f(0x921)][_0x21b43f(0x2d1)])),_0x41463e&&F(this[_0x21b43f(0x474)],_0x21b43f(0x64d),{'chat':_0x41463e});}},'chats.delete':async _0x242365=>{const _0x47a297=_0x48f671;for(let _0x4f38e1 of _0x242365)if(_0x4f38e1[_0x47a297(0x237)]('@g.us')){await this[_0x47a297(0x3cf)][_0x47a297(0x947)][_0x47a297(0x1be)]({'where':{'_id':_0x4f38e1}},this[_0x47a297(0x921)][_0x47a297(0x2d1)]);let _0x1721e9={'where':{'key':{'remoteJid':_0x4f38e1}}};await this[_0x47a297(0x3cf)][_0x47a297(0x6c9)][_0x47a297(0x1be)](_0x1721e9,this[_0x47a297(0x921)]['wuid']);}else{await this[_0x47a297(0x3cf)][_0x47a297(0x947)][_0x47a297(0x66e)]({'where':{'_id':_0x4f38e1}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x47a297(0x921)][_0x47a297(0x2d1)]);let _0x53c738={'where':{'key':{'remoteJid':_0x4f38e1}}};await this['repository']['message']['delete'](_0x53c738,this['instance'][_0x47a297(0x2d1)]);}this[_0x47a297(0x757)](_0x47a297(0x81b),[..._0x242365]);}},this[_0x48f671(0x222)]={'contacts.upsert':async(_0x34debd,_0x90db9b)=>{const _0xbd3acc=_0x48f671;let _0x233ed4=await this[_0xbd3acc(0x3cf)][_0xbd3acc(0x572)][_0xbd3acc(0x756)]({'where':{}},this[_0xbd3acc(0x921)][_0xbd3acc(0x2d1)]),_0x1a88c9=[];for await(let _0x316a3a of _0x34debd)_0x233ed4[_0xbd3acc(0x756)](_0x34e8fa=>_0x34e8fa[_0xbd3acc(0x5da)]===_0x316a3a['id'])||_0x1a88c9[_0xbd3acc(0x6cd)]({'_id':_0x316a3a['id'],'pushName':_0x316a3a?.[_0xbd3acc(0x5d3)]||_0x316a3a?.[_0xbd3acc(0x44a)],'owner':this[_0xbd3acc(0x921)][_0xbd3acc(0x2d1)]});this[_0xbd3acc(0x757)](_0xbd3acc(0x7da),_0x1a88c9),await this[_0xbd3acc(0x3cf)][_0xbd3acc(0x572)][_0xbd3acc(0x2de)](_0x1a88c9);},'contacts.update':async(_0x591d18,_0x363838)=>{const _0x5964fd=_0x48f671;let _0x10d049=[];for await(let _0x2fa348 of _0x591d18)_0x10d049[_0x5964fd(0x6cd)]({'_id':_0x2fa348['id'],'pushName':_0x2fa348?.['name']??_0x2fa348?.['verifiedName'],'owner':this['instance']['wuid']});this[_0x5964fd(0x757)]('contacts.update',_0x10d049);}},this[_0x48f671(0x857)]={'messaging-history.set':async({messages:_0x575fb6,chats:_0x57950c,isLatest:_0x5d7dc9},_0x18a23a)=>{const _0x561687=_0x48f671;if(_0x5d7dc9){setTimeout(()=>{const _0x11cea5=a0_0x5a64;this[_0x11cea5(0x921)]['HistoryProcessed']=!0x0,console[_0x11cea5(0x485)](_0x11cea5(0x410));},0x1d4c0);let _0x465dcb=await Promise[_0x561687(0x75e)](_0x57950c['map'](async _0x432389=>({'_id':_0x432389['id'],'owner':this[_0x561687(0x921)][_0x561687(0x2d1)],'group':_0x432389['id'][_0x561687(0x237)](_0x561687(0x8ca)),'name':_0x432389[_0x561687(0x5d3)]||_0x432389['displayName']||_0x432389['username']||null,'contactname':null,'lastmsg':_0x432389['conversationTimestamp']&&_0x432389[_0x561687(0x550)][_0x561687(0x641)]()[_0x561687(0x303)]<0xd?_0x432389['conversationTimestamp']*0x3e8:_0x432389['conversationTimestamp']||null,'archived':_0x432389[_0x561687(0x219)]||!0x1,'unreadcount':_0x432389[_0x561687(0x717)]||0x0,'ephemeralExpiration':_0x432389[_0x561687(0x8f5)]||0x0,'muteEndTime':_0x432389[_0x561687(0x689)]||0x0})));this[_0x561687(0x757)](_0x561687(0x917),_0x465dcb),await this[_0x561687(0x499)](_0x465dcb,_0x18a23a);}let _0x3309d9=[],_0x2438b4=Date[_0x561687(0x78f)]()-0x1f*0x18*0x3c*0x3c*0x3e8;for await(let [,_0xf150ef]of Object['entries'](_0x575fb6)){if(_0xf150ef[_0x561687(0x6c9)]?.['protocolMessage']||_0xf150ef[_0x561687(0x6c9)]?.['senderKeyDistributionMessage']||!_0xf150ef[_0x561687(0x6c9)]||_0xf150ef[_0x561687(0x440)][_0x561687(0x788)]===_0x561687(0x54c)||(Ls[_0x561687(0x686)][_0x561687(0x43c)](_0xf150ef?.[_0x561687(0x6f2)])&&(_0xf150ef[_0x561687(0x6f2)]=_0xf150ef[_0x561687(0x6f2)]?.[_0x561687(0x4d2)]()),_0xf150ef[_0x561687(0x6f2)]&&_0xf150ef['messageTimestamp']['toString']()[_0x561687(0x303)]<0xd&&(_0xf150ef[_0x561687(0x6f2)]=_0xf150ef[_0x561687(0x6f2)]*0x3e8),_0xf150ef[_0x561687(0x6f2)]<_0x2438b4))continue;let _0x2dfa30=(0x0,w[_0x561687(0x34f)])(_0xf150ef[_0x561687(0x6c9)]),_0x3d7012=(0x0,w[_0x561687(0x6c4)])(_0x2dfa30),{message_normalized:_0x475d74}=this[_0x561687(0x811)](_0x2dfa30,_0x3d7012,null);Object['keys'](_0x475d74)[_0x561687(0x303)]>0x0&&_0x3309d9[_0x561687(0x6cd)]({'_id':_0xf150ef[_0x561687(0x440)]['id'],'key':_0xf150ef[_0x561687(0x440)],'pushName':_0xf150ef[_0x561687(0x91a)],'participant':_0xf150ef['participant'],'message':_0x2dfa30,'messageType':_0x3d7012,'message_normalized':{'key':_0xf150ef[_0x561687(0x440)],'pushName':_0xf150ef[_0x561687(0x91a)],'messageTimestamp':_0xf150ef[_0x561687(0x6f2)],..._0x475d74},'messageTimestamp':_0xf150ef[_0x561687(0x6f2)],'owner':this[_0x561687(0x921)]['wuid']});}if(_0x18a23a[_0x561687(0x765)]&&_0x3309d9[_0x561687(0x303)]>0x0&&(this[_0x561687(0x755)]['verbose'](this[_0x561687(0x474)]+'\x20('+this[_0x561687(0x921)][_0x561687(0x2d1)]+_0x561687(0x91e)+_0x3309d9[_0x561687(0x303)]+_0x561687(0x2c9)+this[_0x561687(0x921)][_0x561687(0x2d1)]+_0x561687(0x238)),await this[_0x561687(0x3cf)][_0x561687(0x6c9)][_0x561687(0x2de)]([..._0x3309d9],this[_0x561687(0x921)]['wuid'])),this['instance']['HistoryProcessed']){for(let _0x3bbcf0 of _0x3309d9)this['sendDataWebhook'](_0x561687(0x286),_0x3bbcf0);}else this['sendDataWebhook'](_0x561687(0x351),[..._0x3309d9]);_0x575fb6=void 0x0,_0x575fb6=void 0x0;},'messages.upsert':async({messages:_0x407d47,type:_0xcbcf1},_0x5f3df7)=>{const _0x267437=_0x48f671;for(let _0x4e145c of _0x407d47){if(this[_0x267437(0x1a8)]?.[_0x267437(0x6e6)]&&_0x4e145c[_0x267437(0x440)][_0x267437(0x788)][_0x267437(0x5f2)]('@g.us')){this[_0x267437(0x755)]['verbose'](this[_0x267437(0x474)]+'\x20('+this[_0x267437(0x921)]['wuid']+'):\x20[messages.upsert]\x20group\x20ignored');continue;}if(_0x4e145c[_0x267437(0x440)]['remoteJid'][_0x267437(0x5f2)](_0x267437(0x2da))||_0x4e145c[_0x267437(0x440)][_0x267437(0x788)]===_0x267437(0x54c))continue;if(_0x4e145c[_0x267437(0x879)]&&_0x4e145c[_0x267437(0x879)][0x0]===_0x267437(0x900)){console[_0x267437(0x398)](_0x267437(0x574)),await this[_0x267437(0x6cb)](_0x4e145c),Lt[_0x4e145c['key']['id']]=_0x4e145c,this[_0x267437(0x728)](_0x4e145c,0x0);continue;}if(_0xcbcf1!==_0x267437(0x5f3)||!_0x4e145c?.[_0x267437(0x6c9)]||_0x4e145c[_0x267437(0x6c9)]?.[_0x267437(0x490)]||_0x4e145c[_0x267437(0x6c9)]?.[_0x267437(0x61a)])continue;let _0x40a1f5=null,_0x16efa0=null;if(Lt[_0x4e145c[_0x267437(0x440)]['id']]&&(console[_0x267437(0x398)]('[RETRY]\x20-\x20mensagem\x20recuperada\x20do\x20cache'),await this['repository']['messageLogs']['delete']({'where':{'_id':_0x4e145c[_0x267437(0x440)]['id']}}),delete Lt[_0x4e145c[_0x267437(0x440)]['id']]),this[_0x267437(0x8df)](this[_0x267437(0x921)][_0x267437(0x2d1)],_0x4e145c[_0x267437(0x440)]['id'])){this[_0x267437(0x755)][_0x267437(0x3fb)](this[_0x267437(0x474)]+'\x20('+this['instance'][_0x267437(0x2d1)]+_0x267437(0x5d0));continue;}this[_0x267437(0x846)](this[_0x267437(0x921)][_0x267437(0x2d1)],_0x4e145c[_0x267437(0x440)]['id']);try{_0x40a1f5=await this[_0x267437(0x5d2)](_0x4e145c),_0x16efa0=_0x40a1f5?_0x40a1f5[_0x267437(0x4bc)](','):null;}catch(_0x1e6237){this[_0x267437(0x755)][_0x267437(0x3fb)](this[_0x267437(0x474)]+'\x20('+this['instance'][_0x267437(0x2d1)]+_0x267437(0x91e)+(_0x1e6237 instanceof Error?_0x1e6237[_0x267437(0x6c9)]:JSON[_0x267437(0x28d)](_0x1e6237,null,0x2))),_0x16efa0=_0x267437(0x6ab);}this[_0x267437(0x826)][_0x267437(0x8ef)](_0x267437(0x75b)),Ls[_0x267437(0x686)][_0x267437(0x43c)](_0x4e145c['messageTimestamp'])&&(_0x4e145c[_0x267437(0x6f2)]=_0x4e145c[_0x267437(0x6f2)]?.[_0x267437(0x4d2)]()),_0x4e145c['messageTimestamp']&&_0x4e145c[_0x267437(0x6f2)][_0x267437(0x641)]()[_0x267437(0x303)]<0xd&&(_0x4e145c[_0x267437(0x6f2)]=_0x4e145c[_0x267437(0x6f2)]*0x3e8);let _0x4da734=_0x4e145c[_0x267437(0x6c9)],_0x49a7ae=(0x0,w[_0x267437(0x34f)])(_0x4da734),_0x587c41=(0x0,w[_0x267437(0x6c4)])(_0x49a7ae),{messageContent:_0x15549b,message_normalized:_0x47baa5}=this[_0x267437(0x811)](_0x49a7ae,_0x587c41,_0x16efa0);if(_0x587c41===_0x267437(0x490)&&_0x15549b?.[_0x267437(0x6f0)]&&(_0x587c41=_0x267437(0x6f0)),_0x587c41==='interactiveMessage'&&_0x4e145c[_0x267437(0x440)][_0x267437(0x89a)])continue;let _0x37d9f6,_0x1b4a0b=_0x4e145c[_0x267437(0x440)][_0x267437(0x788)][_0x267437(0x237)](_0x267437(0x8ca));if(_0x4e145c[_0x267437(0x440)][_0x267437(0x89a)])_0x37d9f6=this[_0x267437(0x921)][_0x267437(0x912)];else{let _0x39910d=_0x1b4a0b?_0x4e145c[_0x267437(0x440)]['participant']:_0x4e145c[_0x267437(0x440)][_0x267437(0x788)];_0x37d9f6=(await this[_0x267437(0x5a8)](_0x39910d,_0x4e145c[_0x267437(0x91a)],!0x1))[_0x267437(0x5ef)]['pictureUrl'];}let _0x5ab833={'_id':_0x4e145c[_0x267437(0x440)]['id'],'key':_0x4e145c[_0x267437(0x440)],'isGroup':_0x1b4a0b,'profilePictureUrl':_0x37d9f6,'pushName':_0x4e145c[_0x267437(0x91a)],'message':_0x49a7ae,'messageType':_0x587c41,'message_normalized':{'key':_0x4e145c[_0x267437(0x440)],'pushName':_0x4e145c['pushName'],'messageTimestamp':_0x4e145c[_0x267437(0x6f2)],'source':(0x0,w[_0x267437(0x578)])(_0x4e145c[_0x267437(0x440)]['id']),..._0x47baa5},'messageTimestamp':_0x4e145c[_0x267437(0x6f2)],'owner':this[_0x267437(0x921)][_0x267437(0x2d1)],'source':(0x0,w[_0x267437(0x578)])(_0x4e145c[_0x267437(0x440)]['id']),'expiration':_0x15549b?.['contextInfo']?.[_0x267437(0x33a)]||0x0};if(_0x15549b||(this[_0x267437(0x755)][_0x267437(0x398)](_0x267437(0x60d)),this['logger'][_0x267437(0x398)](_0x5ab833)),_0x47baa5[_0x267437(0x5b9)]===_0x267437(0x93a)){console['error'](_0x267437(0x535)),await this[_0x267437(0x6cb)](_0x4e145c);continue;}this[_0x267437(0x755)][_0x267437(0x485)](this[_0x267437(0x474)]+'\x20('+this[_0x267437(0x921)]['wuid']+'):\x20'+(_0x5ab833[_0x267437(0x440)]?.[_0x267437(0x89a)]?_0x267437(0x5e0):_0x267437(0x511))+'\x20['+_0x5ab833[_0x267437(0x440)]?.[_0x267437(0x788)][_0x267437(0x894)](_0x267437(0x2d9),'')+']\x20('+_0x5ab833[_0x267437(0x414)]+')'),_0x5ab833['message_normalized']?.[_0x267437(0x5b9)]&&this['logger'][_0x267437(0x485)](_0x4e145c['key']['id']+':\x20'+_0x5ab833[_0x267437(0x213)]?.[_0x267437(0x5b9)]),await this[_0x267437(0x3cf)][_0x267437(0x6c9)][_0x267437(0x2de)]([_0x5ab833],this[_0x267437(0x921)][_0x267437(0x2d1)]),this[_0x267437(0x757)](_0x267437(0x286),_0x5ab833),F(this[_0x267437(0x474)],_0x267437(0x1da),{'message':_0x5ab833}),_0x4e145c['key'][_0x267437(0x788)]!=='status@broadcast'&&await this[_0x267437(0x68f)](_0x5f3df7,_0x5ab833,'MESSAGES_UPSERT');}},'messages.update':async(_0x2b6cf1,_0xd2c60)=>{const _0x476e05=_0x48f671;let _0x4f55b8={0x0:_0x476e05(0x608),0x1:_0x476e05(0x78d),0x2:'SERVER_ACK',0x3:_0x476e05(0x4b3),0x4:_0x476e05(0x307),0x5:_0x476e05(0x607)};for await(let {key:_0x2a60a2,update:_0x599224}of _0x2b6cf1){if(this['localWebhook']?.[_0x476e05(0x6e6)]&&_0x2a60a2[_0x476e05(0x788)][_0x476e05(0x5f2)](_0x476e05(0x8ca))){this[_0x476e05(0x755)][_0x476e05(0x3fb)](this[_0x476e05(0x474)]+'\x20('+this[_0x476e05(0x921)][_0x476e05(0x2d1)]+_0x476e05(0x7f2));return;}if(_0x2a60a2[_0x476e05(0x788)]!==_0x476e05(0x54c)){let _0x260e02=Date[_0x476e05(0x78f)](),_0x97f58f;_0x599224['message']===null&&_0x599224[_0x476e05(0x781)]===void 0x0?_0x97f58f=_0x476e05(0x953):_0x97f58f=_0x4f55b8[_0x599224[_0x476e05(0x781)]];let _0x112140=_0x2a60a2['remoteJid'][_0x476e05(0x894)](/:\d{1,2}@/g,'@'),_0x128104={..._0x2a60a2,'remoteJid':_0x112140,'status':_0x97f58f,'datetime':_0x260e02,'owner':this[_0x476e05(0x921)]['wuid']};this[_0x476e05(0x757)](_0x476e05(0x7c8),_0x128104),await this[_0x476e05(0x859)](_0x2a60a2,_0x128104);}}},'labels.association':async({type:_0x438218,association:_0x5337a})=>{const _0x22ba35=_0x48f671;if(_0x5337a[_0x22ba35(0x62b)]==='label_jid'){let _0x3844cc,_0x31b76c=0x0;for(;!_0x3844cc&&_0x31b76c<this['delayChatLabel_MAX_RETRIES'];)_0x3844cc=await this[_0x22ba35(0x3cf)][_0x22ba35(0x947)][_0x22ba35(0x694)]({'where':{'_id':_0x5337a[_0x22ba35(0x676)]}},this[_0x22ba35(0x921)][_0x22ba35(0x2d1)]),_0x3844cc||(_0x31b76c++,this[_0x22ba35(0x755)][_0x22ba35(0x4f4)](this[_0x22ba35(0x474)]+'\x20('+this['instance']['wuid']+_0x22ba35(0x7f9)+_0x5337a[_0x22ba35(0x676)]+_0x22ba35(0x778)+this['delayChatLabel_RETRY_DELAY_MS']+_0x22ba35(0x78a)+_0x31b76c+'/'+this[_0x22ba35(0x819)]+')'),await this['delayChatLabel'](this[_0x22ba35(0x907)]));if(!_0x3844cc){this[_0x22ba35(0x755)][_0x22ba35(0x398)]('Falhou\x20ao\x20encontrar\x20chat\x20'+_0x5337a[_0x22ba35(0x676)]+_0x22ba35(0x87f)+this['delayChatLabel_MAX_RETRIES']+_0x22ba35(0x6b4));return;}switch(_0x438218){case'add':console[_0x22ba35(0x485)](_0x5337a),await this[_0x22ba35(0x3cf)][_0x22ba35(0x947)][_0x22ba35(0x66e)]({'where':{'_id':_0x5337a[_0x22ba35(0x676)]}},{'leadInfo.etiquetas':_0x5337a[_0x22ba35(0x3da)]},this[_0x22ba35(0x921)][_0x22ba35(0x2d1)],void 0x0,_0x22ba35(0x3ca));break;case _0x22ba35(0x51f):console[_0x22ba35(0x485)](_0x5337a),await this['repository']['chat'][_0x22ba35(0x66e)]({'where':{'_id':_0x5337a[_0x22ba35(0x676)]}},{'leadInfo.etiquetas':_0x5337a['labelId']},this[_0x22ba35(0x921)]['wuid'],void 0x0,_0x22ba35(0x6ca));break;default:this['logger'][_0x22ba35(0x398)]('unknown\x20operation\x20type\x20['+_0x438218+']');}}},'labels.edit':async _0x1c144c=>{const _0x5e41a1=_0x48f671;if(!_0x1c144c||!_0x1c144c['id']){this[_0x5e41a1(0x755)][_0x5e41a1(0x398)]('Rótulo\x20inválido\x20ou\x20sem\x20ID.');return;}if(!_0x1c144c['deleted']){let _0x27de3e=[_0x5e41a1(0x65b),_0x5e41a1(0x308),_0x5e41a1(0x634),_0x5e41a1(0x87b),_0x5e41a1(0x31f),_0x5e41a1(0x63a),_0x5e41a1(0x494),_0x5e41a1(0x2b5),_0x5e41a1(0x951),_0x5e41a1(0x60b),_0x5e41a1(0x615),'#ffc5c7',_0x5e41a1(0x55a),_0x5e41a1(0x3ea),_0x5e41a1(0x5bf),_0x5e41a1(0x7b6),'#ffae04',_0x5e41a1(0x462),_0x5e41a1(0x1cd),_0x5e41a1(0x20d)],_0x1152ca;typeof _0x1c144c[_0x5e41a1(0x785)]==_0x5e41a1(0x737)&&_0x1c144c[_0x5e41a1(0x785)]>=0x0&&_0x1c144c['color']<_0x27de3e[_0x5e41a1(0x303)]?_0x1152ca=_0x27de3e[_0x1c144c[_0x5e41a1(0x785)]]:(this[_0x5e41a1(0x755)][_0x5e41a1(0x398)]('Número\x20da\x20cor\x20inválido\x20ou\x20fora\x20do\x20intervalo:\x20'+_0x1c144c[_0x5e41a1(0x785)]),_0x1152ca=_0x5e41a1(0x878));let _0x5b5f56={'_id':_0x1c144c['id'],'colorHex':_0x1152ca,'color':_0x1c144c?.[_0x5e41a1(0x785)],'name':_0x1c144c?.[_0x5e41a1(0x5d3)],'owner':this[_0x5e41a1(0x921)][_0x5e41a1(0x2d1)]};await this[_0x5e41a1(0x3cf)][_0x5e41a1(0x749)][_0x5e41a1(0x66e)]({'where':{'_id':_0x1c144c['id']}},_0x5b5f56,this[_0x5e41a1(0x921)][_0x5e41a1(0x2d1)]),this[_0x5e41a1(0x755)][_0x5e41a1(0x4f4)](this[_0x5e41a1(0x474)]+'\x20('+this[_0x5e41a1(0x921)][_0x5e41a1(0x2d1)]+_0x5e41a1(0x935)+_0x1c144c);}_0x1c144c[_0x5e41a1(0x244)]&&(await this[_0x5e41a1(0x3cf)]['label'][_0x5e41a1(0x1be)]({'where':{'_id':_0x1c144c['id']}},this[_0x5e41a1(0x921)][_0x5e41a1(0x2d1)]),this[_0x5e41a1(0x755)][_0x5e41a1(0x4f4)](_0x5e41a1(0x1f1)+_0x1c144c['id']));}},this['groupHandler']={'groups.upsert':async _0x12a26e=>{const _0x547840=_0x48f671;this[_0x547840(0x1a8)]?.[_0x547840(0x6e6)]||this[_0x547840(0x757)]('groups.upsert',_0x12a26e);for(let _0x331531 of _0x12a26e)await this['updateGroupWebhook'](_0x331531);},'groups.update':async _0x49fb40=>{const _0x414896=_0x48f671;this['localWebhook']?.[_0x414896(0x6e6)]||this[_0x414896(0x757)]('groups.update',_0x49fb40);for(let _0x3aaca8 of _0x49fb40)await this[_0x414896(0x675)](_0x3aaca8);},'group-participants.update':async _0x5dbbb0=>{const _0x510db5=_0x48f671;this[_0x510db5(0x1a8)]?.[_0x510db5(0x6e6)]||this[_0x510db5(0x757)](_0x510db5(0x663),_0x5dbbb0),await this[_0x510db5(0x37c)](_0x5dbbb0);}},this[_0x48f671(0x819)]=0x5,this['delayChatLabel_RETRY_DELAY_MS']=0x1388,this[_0x48f671(0x82d)]=0x0,this['processPollUpdateMessage']=async _0xf41c4b=>{const _0x10d4a4=_0x48f671;if(_0xf41c4b[_0x10d4a4(0x6c9)]?.[_0x10d4a4(0x25e)]){let _0x238e9a=await this[_0x10d4a4(0x699)](_0xf41c4b[_0x10d4a4(0x6c9)][_0x10d4a4(0x25e)][_0x10d4a4(0x3f4)],!0x0);if(_0x238e9a){let _0x46a9f6=_0x238e9a[_0x10d4a4(0x440)][_0x10d4a4(0x89a)]?this[_0x10d4a4(0x921)][_0x10d4a4(0x2d1)]+_0x10d4a4(0x2d9):_0x238e9a[_0x10d4a4(0x440)][_0x10d4a4(0x839)]||_0x238e9a[_0x10d4a4(0x440)][_0x10d4a4(0x788)],_0x3e3133=_0x238e9a['key']['id'],_0x3cd0b4=_0x238e9a[_0x10d4a4(0x6c9)],_0x19eb8f=Buffer[_0x10d4a4(0x439)](_0x3cd0b4[_0x10d4a4(0x347)][_0x10d4a4(0x2cf)][_0x10d4a4(0x641)]('hex'),_0x10d4a4(0x45f)),_0x163722=(0x0,w[_0x10d4a4(0x431)])(_0xf41c4b[_0x10d4a4(0x6c9)][_0x10d4a4(0x25e)][_0x10d4a4(0x943)],{'pollCreatorJid':_0x46a9f6,'pollMsgId':_0x3e3133,'pollEncKey':_0x19eb8f,'voterJid':_0xf41c4b['key'][_0x10d4a4(0x89a)]?this[_0x10d4a4(0x921)][_0x10d4a4(0x2d1)]+_0x10d4a4(0x2d9):_0xf41c4b[_0x10d4a4(0x440)]['remoteJid']['endsWith'](_0x10d4a4(0x23a))?_0xf41c4b[_0x10d4a4(0x440)][_0x10d4a4(0x839)]:_0xf41c4b['key'][_0x10d4a4(0x788)]}),_0x345d1a=[],_0x504396=_0x163722[_0x10d4a4(0x851)]['map'](_0x3314c0=>Buffer[_0x10d4a4(0x439)](_0x3314c0)[_0x10d4a4(0x641)](_0x10d4a4(0x45f)));for(let {optionName:_0x101352}of _0x3cd0b4[_0x10d4a4(0x7e3)]?.[_0x10d4a4(0x666)]||_0x3cd0b4['pollCreationMessageV3']?.[_0x10d4a4(0x666)]||_0x3cd0b4[_0x10d4a4(0x324)]?.[_0x10d4a4(0x666)])_0x504396[_0x10d4a4(0x2f8)]((0x0,w[_0x10d4a4(0x40f)])(Buffer['from'](_0x101352))[_0x10d4a4(0x641)](_0x10d4a4(0x45f)))>-0x1&&_0x345d1a['push'](_0x101352);return _0x345d1a;}}return null;},this[_0x48f671(0x811)]=(_0x1a3729,_0xd178e5,_0x63efc3)=>{const _0x234d3e=_0x48f671;try{let _0x30de50=_0x1a3729?(0x0,w[_0x234d3e(0x60f)])(_0x1a3729)[_0xd178e5]:void 0x0,_0x185a19={},_0x31e85c=null,_0x376fdc=null,_0x4d47dd=null,_0x43b758=null;_0xd178e5===_0x234d3e(0x490)&&_0x30de50?.[_0x234d3e(0x6f0)]&&(_0xd178e5=(0x0,w[_0x234d3e(0x6c4)])(_0x30de50[_0x234d3e(0x6f0)]),_0x31e85c=_0x1a3729[_0x234d3e(0x490)][_0x234d3e(0x440)]['id'],_0x30de50=_0x1a3729[_0x234d3e(0x490)]['editedMessage'][_0xd178e5]),_0x1a3729[_0xd178e5]?.['contextInfo']?.[_0x234d3e(0x863)]&&_0x1a3729[_0xd178e5]?.[_0x234d3e(0x343)]?.[_0x234d3e(0x425)]&&(_0x376fdc=_0x1a3729[_0xd178e5][_0x234d3e(0x343)]['stanzaId']),_0x1a3729[_0x234d3e(0x28b)]&&(_0x4d47dd=_0x1a3729[_0x234d3e(0x28b)]['key']['id']);let _0x2b799c;if(_0x30de50&&typeof _0x30de50==_0x234d3e(0x1b3)&&_0x234d3e(0x3f4)in _0x30de50&&({pollCreationMessageKey:_0x2b799c}=_0x30de50),_0xd178e5===_0x234d3e(0x7e3)||_0xd178e5===_0x234d3e(0x324)||_0xd178e5==='pollCreationMessageV3'){let _0x4e9067=_0x30de50['options'][_0x234d3e(0x948)](_0x5d8c3e=>_0x5d8c3e[_0x234d3e(0x2a7)])[_0x234d3e(0x4bc)]('|');_0x185a19[_0x234d3e(0x807)]=_0x4e9067;}if(_0xd178e5===_0x234d3e(0x40c)){let _0x42ac2e=_0x30de50[_0x234d3e(0x667)][_0x234d3e(0x531)]['map'](_0x5a3cfa=>JSON[_0x234d3e(0x8a5)](_0x5a3cfa['buttonParamsJson'])[_0x234d3e(0x4ec)])[_0x234d3e(0x4bc)]('|');_0x185a19[_0x234d3e(0x807)]=_0x42ac2e;}_0xd178e5==='listResponseMessage'&&(_0x185a19[_0x234d3e(0x2ba)]=_0x30de50?.[_0x234d3e(0x1de)]?.[_0x234d3e(0x2bd)]);let _0x25e99d='';if(_0x30de50&&(_0x25e99d+=_0x30de50[_0x234d3e(0x5d3)]?_0x30de50[_0x234d3e(0x5d3)]:'',_0x25e99d+=_0x30de50['caption']?'\x20'+_0x30de50[_0x234d3e(0x4a2)]:'',_0x25e99d+=_0x30de50['conversation']?'\x20'+_0x30de50['conversation']:'',_0x25e99d+=_0x30de50[_0x234d3e(0x8f2)]?'\x20'+_0x30de50[_0x234d3e(0x8f2)]:'',_0xd178e5!==_0x234d3e(0x94e)&&(_0x25e99d+=_0x30de50['body']?.[_0x234d3e(0x5b9)]?'\x20'+_0x30de50[_0x234d3e(0x4a9)]['text']:''),_0x25e99d+=_0x30de50?.[_0x234d3e(0x263)]?.[_0x234d3e(0x5b9)]?'\x20'+_0x30de50?.[_0x234d3e(0x263)]?.[_0x234d3e(0x5b9)]:''),_0xd178e5==='listMessage'){_0x25e99d=(_0x30de50[_0x234d3e(0x6eb)]||'')+'\x0a'+(_0x30de50['description']||'')+'\x0a'+(_0x30de50['footerText']||'');let _0x3e8f12=this[_0x234d3e(0x294)](_0x30de50[_0x234d3e(0x5ee)]);_0x185a19[_0x234d3e(0x807)]=_0x3e8f12;}if(_0xd178e5===_0x234d3e(0x74d)&&(_0x63efc3=_0x30de50[_0x234d3e(0x6eb)],_0x43b758=_0x30de50?.[_0x234d3e(0x1de)]?.[_0x234d3e(0x2bd)]),_0xd178e5==='interactiveResponseMessage'){let _0x386e2a=_0x30de50?.[_0x234d3e(0x252)];_0x386e2a&&_0x386e2a[_0x234d3e(0x5d3)]===_0x234d3e(0x2e8)&&(_0x43b758=JSON[_0x234d3e(0x8a5)](_0x386e2a['paramsJson'])['id']),_0x63efc3=_0x30de50?.[_0x234d3e(0x4a9)]?.['text'];}if(_0xd178e5===_0x234d3e(0x6fe)&&(_0x63efc3=_0x30de50?.['selectedDisplayText'],_0x43b758=_0x30de50?.[_0x234d3e(0x1c9)]),_0xd178e5==='buttonsResponseMessage'&&(_0x63efc3=_0x30de50?.['selectedDisplayText'],_0x43b758=_0x30de50?.[_0x234d3e(0x314)]),_0x30de50&&_0x30de50[_0x234d3e(0x1d1)]){let _0x92cc50=this[_0x234d3e(0x6d6)](JSON['stringify'](_0x30de50[_0x234d3e(0x1d1)],null,0x2));_0x25e99d=_0x25e99d+'\x0a'+_0x92cc50;}if(_0x30de50){let {selectedButtonId:_0x4cab39,nativeFlowResponseMessage:_0xf09353,selectedId:_0x58a10e,selectedDisplayText:_0x4200fe,selectedIndex:_0x4d4a11,body:_0xb8bbee,nativeFlowMessage:_0x505ef8,singleSelectReply:_0x1c413c,sections:_0x3bf0b1,listType:_0x4a3daf,displayName:_0x1bc733,vcard:_0x52a951,contactVcard:_0x12c83d,name:_0x34ddff,caption:_0x2feceb,conversation:_0xf1fd90,pollCreationMessageKey:_0xd843f4,footerText:_0x49e04f,contentText:_0x11eab3,pageCount:_0x5c22ee,headerType:_0x2111ac,isAvatar:_0x501ecc,isAnimated:_0x561e1b,fallbackLc:_0x234f57,fallbackLg:_0x4793ab,namespace:_0x2e2be3,elementName:_0xfa4c53,localizableParams:_0x431d84,viewOnce:_0x1dcada,height:_0x59c986,width:_0x1d4eb0,key:_0x3d5aec,firstScanLength:_0x36c372,firstScanSidecar:_0x35d887,gifPlayback:_0x5a2c52,gifAttribution:_0xd4395e,midQualityFileSha256:_0xdddda5,scansSidecar:_0x339e8b,streamingSidecar:_0x3232d4,thumbnailHeight:_0x400932,thumbnailWidth:_0x2e34e6,thumbnailEncSha256:_0x4034fd,thumbnailDirectPath:_0x9b2db8,canonicalUrl:_0x58bca5,matchedText:_0x567405,previewType:_0x4c21e8,thumbnailSha256:_0x526f0c,deviceListMetadataVersion:_0x1c753a,inviteLinkGroupTypeV2:_0x2d9d4c,interactiveAnnotations:_0x1b7c05,scanLengths:_0x1a2412,jpegThumbnail:_0x533b11,url:_0x27c6d9,mediaKeyTimestamp:_0x282a08,waveform:_0xd42330,stickerSentTs:_0x5ceaa7,firstFrameLength:_0x116531,fileEncSha256:_0x3934a8,contextInfo:_0xc3a7c5,firstFrameSidecar:_0x40b0dd,directPath:_0x2aa65b,fileSha256:_0x23d919,mediaKey:_0x3932eb,senderTimestampMs:_0x1c89b4,..._0x477cc7}=_0x30de50;(_0xd178e5===_0x234d3e(0x5c6)||_0xd178e5==='listResponseMessage')&&(delete _0x477cc7['title'],delete _0x477cc7[_0x234d3e(0x8f3)]),typeof _0x30de50==_0x234d3e(0x1d0)?_0x185a19={'text':_0x30de50,'type':_0xd178e5||'conversation',..._0x31e85c&&{'edited':_0x31e85c},..._0x376fdc&&{'quoted':_0x376fdc},..._0x4d47dd&&{'reaction':_0x4d47dd}}:_0x185a19={'text':_0x25e99d,..._0x477cc7,..._0xd178e5===_0x234d3e(0x25e)?{'poll_id':_0x30de50[_0x234d3e(0x3f4)]['id'],'quoted':_0x30de50['pollCreationMessageKey']['id'],'vote':_0x63efc3}:{},..._0xd178e5===_0x234d3e(0x74d)?{'buttonOrList_id':_0x43b758,'vote':_0x63efc3}:{},..._0xd178e5===_0x234d3e(0x94e)?{'buttonOrList_id':_0x43b758,'vote':_0x63efc3}:{},..._0xd178e5==='templateButtonReplyMessage'?{'buttonOrList_id':_0x43b758,'vote':_0x63efc3}:{},..._0xd178e5===_0x234d3e(0x556)?{'buttonOrList_id':_0x43b758,'vote':_0x63efc3}:{},'type':_0xd178e5,..._0x31e85c&&{'edited':_0x31e85c},..._0x376fdc&&{'quoted':_0x376fdc},..._0x4d47dd&&{'reaction':_0x4d47dd},...(_0xd178e5===_0x234d3e(0x7e3)||_0xd178e5==='pollCreationMessageV2'||_0xd178e5===_0x234d3e(0x53d)||_0xd178e5==='listMessage'||_0xd178e5===_0x234d3e(0x40c))&&{'convertedOptions':_0x185a19[_0x234d3e(0x807)]}};}return{'messageType':_0xd178e5,'messageContent':_0x30de50,'message_normalized':_0x185a19};}catch(_0x37fbbf){return this[_0x234d3e(0x755)][_0x234d3e(0x398)](_0x234d3e(0x3a3)+_0x37fbbf),{'messageType':null,'messageContent':null,'message_normalized':{'error':!0x0}};}},this[_0x48f671(0x764)]=[],(this[_0x48f671(0x925)](),this[_0x48f671(0x2f2)](),this[_0x48f671(0x921)][_0x48f671(0x604)]=!0x0,this[_0x48f671(0x921)][_0x48f671(0x950)]={'count':0x0},this[_0x48f671(0x921)][_0x48f671(0x8ac)]={'isConnected':!0x1,'delayMessage':null,'processingGroup':null,'lastSend':0x0,'timeout':null});}['addToProcessedMessages'](_0x3551a5,_0x2368f5){const _0xaeabb7=a0_0x1df5a5;this['processedMessagesCache'][_0x3551a5]||(this[_0xaeabb7(0x6dc)][_0x3551a5]=new Set()),this[_0xaeabb7(0x6dc)][_0x3551a5][_0xaeabb7(0x94f)](_0x2368f5),setTimeout(()=>this[_0xaeabb7(0x6dc)][_0x3551a5]['delete'](_0x2368f5),0x2710);}[a0_0x1df5a5(0x8df)](_0x54fb61,_0x11eaaa){const _0x3202fc=a0_0x1df5a5;return this[_0x3202fc(0x6dc)][_0x54fb61]?.[_0x3202fc(0x664)](_0x11eaaa)??!0x1;}set[a0_0x1df5a5(0x474)](_0x441380){const _0x9cbf26=a0_0x1df5a5;if(!_0x441380){this[_0x9cbf26(0x921)][_0x9cbf26(0x5d3)]=(0x0,Ti['v4'])();return;}this[_0x9cbf26(0x921)][_0x9cbf26(0x5d3)]=_0x441380,this['sendDataWebhook']('status.instance',{'instance':this[_0x9cbf26(0x921)]['name'],'status':_0x9cbf26(0x55b)});}get[a0_0x1df5a5(0x474)](){const _0x4811a3=a0_0x1df5a5;return this[_0x4811a3(0x921)][_0x4811a3(0x5d3)];}get[a0_0x1df5a5(0x2d1)](){const _0x47ec26=a0_0x1df5a5;return this[_0x47ec26(0x921)][_0x47ec26(0x2d1)];}async[a0_0x1df5a5(0x2fe)](){const _0x2105aa=a0_0x1df5a5;let _0x2a4236=this[_0x2105aa(0x826)][_0x2105aa(0x2c3)]?.[_0x2105aa(0x5d3)]??this['client'][_0x2105aa(0x2c3)]?.[_0x2105aa(0x44a)];if(!_0x2a4236){if(this[_0x2105aa(0x4e6)]['get'](_0x2105aa(0x216))[_0x2105aa(0x765)]){let _0x23e20d=await T[_0x2105aa(0x4c6)]()['db'](this['configService']['get']('DATABASE')[_0x2105aa(0x3b3)]['DB_PREFIX_NAME']+_0x2105aa(0x84c))[_0x2105aa(0x8dd)](this[_0x2105aa(0x474)])[_0x2105aa(0x694)]({'_id':_0x2105aa(0x68b)});if(_0x23e20d){let _0x3d85fb=JSON['parse'](JSON[_0x2105aa(0x28d)](_0x23e20d),w[_0x2105aa(0x4c0)]['reviver']);_0x2a4236=_0x3d85fb['me']?.[_0x2105aa(0x5d3)]||_0x3d85fb['me']?.[_0x2105aa(0x44a)];}}else{if((0x0,Fe[_0x2105aa(0x5a6)])((0x0,j[_0x2105aa(0x4bc)])(Se,this[_0x2105aa(0x474)],_0x2105aa(0x8c1)))){let _0xcf4014=JSON[_0x2105aa(0x8a5)]((0x0,Fe[_0x2105aa(0x454)])((0x0,j[_0x2105aa(0x4bc)])(Se,this[_0x2105aa(0x474)],_0x2105aa(0x8c1)),{'encoding':_0x2105aa(0x4ee)}));_0x2a4236=_0xcf4014['me']?.[_0x2105aa(0x5d3)]||_0xcf4014['me']?.[_0x2105aa(0x44a)];}}}return _0x2a4236;}get[a0_0x1df5a5(0x912)](){const _0x171d2e=a0_0x1df5a5;return this[_0x171d2e(0x921)]['profilePictureUrl'];}async[a0_0x1df5a5(0x4f2)](){const _0x257729=a0_0x1df5a5;let _0x55f767=this[_0x257729(0x921)][_0x257729(0x2d1)]+'@s.whatsapp.net';try{await this['client'][_0x257729(0x827)](_0x55f767)?this[_0x257729(0x921)][_0x257729(0x662)]=!0x0:this[_0x257729(0x921)][_0x257729(0x662)]=!0x1;}catch{this['instance'][_0x257729(0x662)]=!0x1;}return this[_0x257729(0x755)][_0x257729(0x4f4)](this[_0x257729(0x474)]+'\x20('+this['instance'][_0x257729(0x2d1)]+_0x257729(0x7a5)+this[_0x257729(0x921)][_0x257729(0x662)]),this[_0x257729(0x921)][_0x257729(0x662)];}get[a0_0x1df5a5(0x3b1)](){const _0x29ac81=a0_0x1df5a5;return this[_0x29ac81(0x921)][_0x29ac81(0x604)]=!0x1,this[_0x29ac81(0x921)][_0x29ac81(0x950)]?.[_0x29ac81(0x257)]?{'pairingCode':this[_0x29ac81(0x921)][_0x29ac81(0x950)]?.['pairingCode']}:{'code':this[_0x29ac81(0x921)][_0x29ac81(0x950)]?.[_0x29ac81(0x909)],'base64':this['instance'][_0x29ac81(0x950)]?.[_0x29ac81(0x4e1)]};}async['loadWebhook'](){const _0x1dc8a8=a0_0x1df5a5;let _0x460c47=await this[_0x1dc8a8(0x3cf)][_0x1dc8a8(0x5fc)][_0x1dc8a8(0x756)](this[_0x1dc8a8(0x474)]);this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x376)]=_0x460c47?.[_0x1dc8a8(0x376)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x3eb)]=_0x460c47?.[_0x1dc8a8(0x3eb)],this['localWebhook'][_0x1dc8a8(0x69a)]=_0x460c47?.[_0x1dc8a8(0x69a)],this['localWebhook'][_0x1dc8a8(0x8f6)]=_0x460c47?.[_0x1dc8a8(0x8f6)],this['localWebhook'][_0x1dc8a8(0x2cc)]=_0x460c47?.[_0x1dc8a8(0x2cc)],this['localWebhook']['SEND_MESSAGE']=_0x460c47?.['SEND_MESSAGE'],this[_0x1dc8a8(0x1a8)]['MESSAGES_UPSERT']=_0x460c47?.[_0x1dc8a8(0x549)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x1a9)]=_0x460c47?.[_0x1dc8a8(0x1a9)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x4ff)]=_0x460c47?.[_0x1dc8a8(0x4ff)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x5de)]=_0x460c47?.[_0x1dc8a8(0x5de)],this[_0x1dc8a8(0x1a8)]['GROUP_PARTICIPANTS_UPDATE']=_0x460c47?.[_0x1dc8a8(0x760)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x726)]=_0x460c47?.[_0x1dc8a8(0x726)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x661)]=_0x460c47?.[_0x1dc8a8(0x661)],this[_0x1dc8a8(0x1a8)]['CHATS_UPDATE']=_0x460c47?.[_0x1dc8a8(0x211)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x904)]=_0x460c47?.['CHATS_DELETE'],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x861)]=_0x460c47?.[_0x1dc8a8(0x861)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x802)]=_0x460c47?.[_0x1dc8a8(0x802)],this[_0x1dc8a8(0x1a8)]['CONTACTS_UPDATE']=_0x460c47?.[_0x1dc8a8(0x705)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x292)]=_0x460c47?.[_0x1dc8a8(0x292)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x7cd)]=_0x460c47?.[_0x1dc8a8(0x7cd)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x66d)]=_0x460c47?.[_0x1dc8a8(0x66d)],this[_0x1dc8a8(0x1a8)][_0x1dc8a8(0x6e6)]=_0x460c47?.[_0x1dc8a8(0x6e6)];}async[a0_0x1df5a5(0x81e)](_0x12324d){const _0x4c78f1=a0_0x1df5a5;let _0x40ea8d=['_id',_0x4c78f1(0x376),'enabled',_0x4c78f1(0x69a),_0x4c78f1(0x8f6),_0x4c78f1(0x2cc),_0x4c78f1(0x1a9),_0x4c78f1(0x549),'SEND_MESSAGE',_0x4c78f1(0x4ff),_0x4c78f1(0x5de),_0x4c78f1(0x760),_0x4c78f1(0x726),'CHATS_UPSERT',_0x4c78f1(0x211),_0x4c78f1(0x904),_0x4c78f1(0x861),'CONTACTS_UPSERT',_0x4c78f1(0x705),_0x4c78f1(0x292),'MESSAGES_SET',_0x4c78f1(0x66d),_0x4c78f1(0x6e6)],_0x573cae={};return _0x40ea8d['forEach'](_0x34cbcd=>{_0x12324d[_0x34cbcd]!==void 0x0&&(_0x573cae[_0x34cbcd]=_0x12324d[_0x34cbcd]);}),_0x573cae['url']&&(_0x573cae['url']=_0x573cae[_0x4c78f1(0x376)][_0x4c78f1(0x30a)]()),await this[_0x4c78f1(0x3cf)]['webhook'][_0x4c78f1(0x38e)](_0x573cae,this[_0x4c78f1(0x474)]),Object['assign'](this[_0x4c78f1(0x1a8)],_0x573cae),await this[_0x4c78f1(0x3cf)]['webhook']['find'](this[_0x4c78f1(0x474)]);}async[a0_0x1df5a5(0x57e)](){const _0x2adbf9=a0_0x1df5a5;return await this['repository'][_0x2adbf9(0x5fc)]['find'](this['instanceName']);}async['sendDataWebhook'](_0x32ef18,_0x1f372f){const _0x253255=a0_0x1df5a5;let _0x5d2940=_0x32ef18['replace'](/[\.-]/gm,'_')[_0x253255(0x3e4)](),_0x3c82c5=this[_0x253255(0x1a8)]['enabled']&&(0x0,J[_0x253255(0x6ae)])(this[_0x253255(0x1a8)][_0x253255(0x376)])?this['localWebhook'][_0x253255(0x376)]+(this[_0x253255(0x1a8)][_0x253255(0x69a)]?this[_0x253255(0x449)][_0x32ef18]:''):null,_0x2b3a64=this[_0x253255(0x1a8)][_0x5d2940],_0x21e9c1=pe&&pe[_0x253255(0x3eb)]&&(0x0,J[_0x253255(0x6ae)])(pe[_0x253255(0x376)])?pe[_0x253255(0x376)]+(pe[_0x253255(0x69a)]?this['webhookMap'][_0x32ef18]:''):null,_0x26f1eb=pe?pe[_0x5d2940]:null;if(_0x2b3a64&&_0x3c82c5)try{await K[_0x253255(0x686)][_0x253255(0x38e)]({'baseURL':_0x3c82c5})['post']('',{'event':_0x32ef18,'instance':this[_0x253255(0x921)][_0x253255(0x5d3)],'apikey':this[_0x253255(0x921)][_0x253255(0x829)],'data':_0x1f372f}),this[_0x253255(0x755)][_0x253255(0x485)](this[_0x253255(0x474)]+'\x20('+this[_0x253255(0x921)][_0x253255(0x2d1)]+'):\x20Enviado\x20para\x20webhook\x20local\x20para\x20o\x20evento\x20'+_0x32ef18+':\x20'+_0x3c82c5);}catch{this[_0x253255(0x755)][_0x253255(0x398)](this['instanceName']+'\x20('+this[_0x253255(0x921)][_0x253255(0x2d1)]+_0x253255(0x428)+_0x32ef18+':\x20'+_0x3c82c5);}if(_0x26f1eb&&_0x21e9c1)try{await K[_0x253255(0x686)][_0x253255(0x38e)]({'baseURL':_0x21e9c1})['post']('',{'event':_0x32ef18,'instance':this[_0x253255(0x921)][_0x253255(0x5d3)],'apikey':this['instance'][_0x253255(0x829)],'data':_0x1f372f}),this[_0x253255(0x755)][_0x253255(0x485)](this['instanceName']+'\x20('+this[_0x253255(0x921)]['wuid']+'):\x20Enviado\x20para\x20webhook\x20global\x20para\x20o\x20evento\x20'+_0x32ef18+':\x20'+_0x21e9c1);}catch{this[_0x253255(0x755)][_0x253255(0x398)](this[_0x253255(0x474)]+'\x20('+this[_0x253255(0x921)][_0x253255(0x2d1)]+_0x253255(0x713)+_0x32ef18+':\x20'+_0x21e9c1);}}async[a0_0x1df5a5(0x554)]({qr:_0x4535f2,connection:_0x1a66eb,lastDisconnect:_0x5846f9}){const _0x48c508=a0_0x1df5a5;if(_0x4535f2){if(this[_0x48c508(0x921)][_0x48c508(0x950)][_0x48c508(0x47f)]===Lo)return this['sendDataWebhook']('qrcode.updated',{'message':_0x48c508(0x52e),'statusCode':w[_0x48c508(0x800)][_0x48c508(0x775)]}),this[_0x48c508(0x30c)]={'state':_0x48c508(0x738),'statusReason':w[_0x48c508(0x800)][_0x48c508(0x486)]},this[_0x48c508(0x757)]('connection.update',{'instance':this[_0x48c508(0x921)][_0x48c508(0x5d3)],...this['stateConnection']}),this[_0x48c508(0x757)](_0x48c508(0x625),{'instance':this[_0x48c508(0x921)][_0x48c508(0x5d3)],'status':_0x48c508(0x262)}),this[_0x48c508(0x3cf)][_0x48c508(0x575)][_0x48c508(0x1be)](this[_0x48c508(0x921)][_0x48c508(0x5d3)]),this['endSession']=!0x0,this[_0x48c508(0x5aa)][_0x48c508(0x289)](_0x48c508(0x2b1),this['instance'][_0x48c508(0x5d3)]);this[_0x48c508(0x921)]['qrcode'][_0x48c508(0x47f)]++;let _0x4092ed={'margin':0x3,'scale':0x4,'errorCorrectionLevel':'H','color':{'light':_0x48c508(0x725),'dark':_0x48c508(0x878)}};Ii['default']['toDataURL'](_0x4535f2,_0x4092ed,(_0x7b7f0a,_0x5acb19)=>{const _0x3ac86c=_0x48c508;if(_0x7b7f0a){this[_0x3ac86c(0x755)]['error'](this[_0x3ac86c(0x474)]+'\x20('+this[_0x3ac86c(0x921)][_0x3ac86c(0x2d1)]+'):\x20Erro\x20ao\x20gerar\x20Qr\x20Code:'+(_0x7b7f0a instanceof Error?_0x7b7f0a[_0x3ac86c(0x6c9)]:JSON[_0x3ac86c(0x28d)](_0x7b7f0a,null,0x2)));return;}this[_0x3ac86c(0x921)][_0x3ac86c(0x950)][_0x3ac86c(0x4e1)]=_0x5acb19,this[_0x3ac86c(0x921)][_0x3ac86c(0x950)][_0x3ac86c(0x909)]=_0x4535f2,!this['phoneNumber']&&this['sendDataWebhook']('qrcode.updated',{'qrcode':{'instance':this[_0x3ac86c(0x921)][_0x3ac86c(0x5d3)],'pairingCode':this[_0x3ac86c(0x921)][_0x3ac86c(0x950)]['pairingCode'],'code':_0x4535f2,'base64':_0x5acb19}});}),this[_0x48c508(0x67f)]?this[_0x48c508(0x921)][_0x48c508(0x950)][_0x48c508(0x257)]||(await(0x0,w['delay'])(0x7d0),this[_0x48c508(0x921)][_0x48c508(0x950)][_0x48c508(0x257)]=await this[_0x48c508(0x826)][_0x48c508(0x923)](this[_0x48c508(0x67f)])):this['instance']['qrcode'][_0x48c508(0x257)]=null,_i[_0x48c508(0x686)]['generate'](_0x4535f2,{'small':!0x0},_0x40da8f=>this[_0x48c508(0x755)][_0x48c508(0x485)](_0x48c508(0x843)+this['instance'][_0x48c508(0x5d3)]+_0x48c508(0x271)+this[_0x48c508(0x921)][_0x48c508(0x950)][_0x48c508(0x47f)]+',\x20pairCode:\x20'+this['instance'][_0x48c508(0x950)][_0x48c508(0x257)]+'\x20}\x0a'+_0x40da8f));}if(_0x1a66eb&&(this[_0x48c508(0x30c)]={'state':_0x1a66eb,'statusReason':_0x5846f9?.[_0x48c508(0x398)]?.[_0x48c508(0x834)]?.[_0x48c508(0x1ca)]??0xc8},this[_0x48c508(0x757)](_0x48c508(0x447),{'instance':this[_0x48c508(0x921)][_0x48c508(0x5d3)],...this[_0x48c508(0x30c)]})),_0x1a66eb===_0x48c508(0x261)){if(_0x5846f9[_0x48c508(0x398)]?.[_0x48c508(0x834)]?.['statusCode']!==w[_0x48c508(0x800)][_0x48c508(0x3cc)]){if(this[_0x48c508(0x921)]['ScheduleMessage'][_0x48c508(0x368)]===!0x1){if(this[_0x48c508(0x409)]===null&&(this[_0x48c508(0x409)]=Date[_0x48c508(0x78f)]()),Date[_0x48c508(0x78f)]()-this['reconnectStartTime']>this[_0x48c508(0x91f)]){this[_0x48c508(0x755)][_0x48c508(0x398)](_0x48c508(0x8fc));return;}}else this['logger'][_0x48c508(0x4f4)](_0x48c508(0x3d9));this[_0x48c508(0x27c)]++,this[_0x48c508(0x7ff)][_0x48c508(0x6cd)](Date[_0x48c508(0x78f)]()),this['reconnectTimestamps']=this[_0x48c508(0x7ff)][_0x48c508(0x93c)](_0x5cbb94=>Date[_0x48c508(0x78f)]()-_0x5cbb94<this[_0x48c508(0x799)]);let _0x2a281a=this['reconnectAttempts']<=0x1?0x0:Math[_0x48c508(0x7a9)](Math['pow'](0x2,this['reconnectAttempts']-0x1)*0x3e8,0x493e0);console[_0x48c508(0x485)](this[_0x48c508(0x474)]+'\x20Tentativa\x20de\x20reconexão\x20'+this[_0x48c508(0x27c)]+_0x48c508(0x2ac)+_0x2a281a/0x3e8+_0x48c508(0x24c)),await new Promise(_0x3dc6fd=>setTimeout(_0x3dc6fd,_0x2a281a)),console[_0x48c508(0x485)]('Tentando\x20reconectar...'),await this[_0x48c508(0x645)]();}else{this['sendDataWebhook'](_0x48c508(0x625),{'instance':this['instance'][_0x48c508(0x5d3)],'status':_0x48c508(0x262)}),this[_0x48c508(0x921)][_0x48c508(0x8ac)][_0x48c508(0x368)]=!0x1,this[_0x48c508(0x3cf)][_0x48c508(0x5fc)]['delete'](this[_0x48c508(0x474)]),this[_0x48c508(0x3cf)]['auth'][_0x48c508(0x38e)]({'owner':'','online':!0x1,'lastDisconnect':Date[_0x48c508(0x78f)]()},this[_0x48c508(0x921)][_0x48c508(0x5d3)]);try{this[_0x48c508(0x755)][_0x48c508(0x3fb)](this[_0x48c508(0x474)]+'\x20('+this[_0x48c508(0x921)][_0x48c508(0x2d1)]+_0x48c508(0x404));let _0x44d6b9=await this['repository'][_0x48c508(0x6c9)][_0x48c508(0x73b)](this[_0x48c508(0x921)][_0x48c508(0x2d1)]);_0x44d6b9[_0x48c508(0x319)]?this[_0x48c508(0x755)]['verbose'](this['instanceName']+'\x20('+this[_0x48c508(0x921)][_0x48c508(0x2d1)]+_0x48c508(0x4a0)):this['logger'][_0x48c508(0x398)](_0x48c508(0x61d)+_0x44d6b9[_0x48c508(0x398)]);}catch(_0x5df84f){this[_0x48c508(0x755)][_0x48c508(0x398)](_0x48c508(0x944)+_0x5df84f[_0x48c508(0x6c9)]);}this[_0x48c508(0x921)][_0x48c508(0x8ac)][_0x48c508(0x3d5)]!==null&&(this[_0x48c508(0x755)]['verbose'](this[_0x48c508(0x474)]+'\x20('+this['instance'][_0x48c508(0x2d1)]+_0x48c508(0x2d5)),clearInterval(this[_0x48c508(0x921)][_0x48c508(0x8ac)][_0x48c508(0x3d5)]),this['instance'][_0x48c508(0x8ac)]['delayMessage']=null),this[_0x48c508(0x755)][_0x48c508(0x3fb)](this['instanceName']+'\x20('+this['instance'][_0x48c508(0x2d1)]+_0x48c508(0x941)),this[_0x48c508(0x48e)]=null,this[_0x48c508(0x5aa)][_0x48c508(0x289)]('remove.instance',this[_0x48c508(0x921)]['name'],_0x48c508(0x397)),this[_0x48c508(0x826)]?.['ws']?.[_0x48c508(0x261)](),this[_0x48c508(0x826)][_0x48c508(0x2a0)](new Error(_0x48c508(0x70f)));}}if(_0x1a66eb===_0x48c508(0x20b)){this[_0x48c508(0x755)][_0x48c508(0x8c0)](this[_0x48c508(0x474)]+'\x20('+this[_0x48c508(0x921)][_0x48c508(0x2d1)]+_0x48c508(0x24b)+this[_0x48c508(0x826)][_0x48c508(0x281)][_0x48c508(0x68b)]?.[_0x48c508(0x7ed)]),this[_0x48c508(0x826)][_0x48c508(0x281)][_0x48c508(0x68b)]?.[_0x48c508(0x7ed)]||(this[_0x48c508(0x755)][_0x48c508(0x8c0)](this['instanceName']+'\x20('+this[_0x48c508(0x921)][_0x48c508(0x2d1)]+_0x48c508(0x243)),this['client']['ev'][_0x48c508(0x80e)]()),this[_0x48c508(0x1cb)],this[_0x48c508(0x921)][_0x48c508(0x2d1)]=this[_0x48c508(0x826)][_0x48c508(0x2c3)]['id'][_0x48c508(0x894)](/:\d+/,'')[_0x48c508(0x894)](_0x48c508(0x2d9),''),this[_0x48c508(0x921)]['profilePictureUrl']=(await this[_0x48c508(0x8e9)](this[_0x48c508(0x921)][_0x48c508(0x2d1)]+_0x48c508(0x2d9)))[_0x48c508(0x912)],this[_0x48c508(0x3cf)][_0x48c508(0x575)]['create']({'online':!0x0,'owner':this[_0x48c508(0x921)][_0x48c508(0x2d1)],'lastDisconnect':null},this[_0x48c508(0x921)][_0x48c508(0x5d3)]);let _0x1dc8a5=_0x48c508(0x8a4)+this[_0x48c508(0x921)]['wuid'],_0x56feb4=0x28,_0x2b48af=Math[_0x48c508(0x346)]((_0x56feb4-_0x1dc8a5[_0x48c508(0x303)])/0x2),_0x5d9fc6='\x20'['repeat'](_0x2b48af),_0x5aa51a=_0x48c508(0x23d),_0x44bafd=_0x48c508(0x1bc)+this[_0x48c508(0x921)][_0x48c508(0x5d3)],_0x4b3d02=(''+_0x5d9fc6+_0x1dc8a5+_0x5d9fc6)[_0x48c508(0x2f7)](_0x56feb4,'\x20'),_0x27d0de=(''+_0x5d9fc6+_0x5aa51a+_0x5d9fc6)['padEnd'](_0x56feb4,'\x20'),_0x5eccd1=(''+_0x5d9fc6+_0x44bafd+_0x5d9fc6)[_0x48c508(0x2f7)](_0x56feb4,'\x20'),_0x1a7663=Math[_0x48c508(0x2e3)](_0x4b3d02[_0x48c508(0x303)],_0x27d0de[_0x48c508(0x303)],_0x5eccd1['length']),_0x13c816=_0x4b3d02[_0x48c508(0x2f7)](_0x1a7663,'\x20'),_0x43f46d=_0x27d0de[_0x48c508(0x2f7)](_0x1a7663,'\x20'),_0x196594=_0x5eccd1['padEnd'](_0x1a7663,'\x20');this[_0x48c508(0x755)][_0x48c508(0x4f4)]((_0x48c508(0x1ff)+'─'[_0x48c508(0x240)](_0x1a7663)+_0x48c508(0x1c6)+_0x43f46d+_0x48c508(0x727)+_0x196594+_0x48c508(0x727)+_0x13c816+_0x48c508(0x89e)+'─'[_0x48c508(0x240)](_0x1a7663)+'┘')[_0x48c508(0x894)](/^ +/gm,'\x20\x20')),this[_0x48c508(0x3dc)](),this[_0x48c508(0x921)][_0x48c508(0x8ac)][_0x48c508(0x368)]=!0x0;}}[a0_0x1df5a5(0x1cb)](){const _0x2b076b=a0_0x1df5a5;this['reconnectAttempts']=0x0,this[_0x2b076b(0x7ff)]=[];}async['getMessage'](_0x36dfdc,_0x52781e=!0x1){const _0x5f6e52=a0_0x1df5a5;try{let _0x14c375=await this[_0x5f6e52(0x3cf)][_0x5f6e52(0x6c9)]['find']({'where':{'_id':_0x36dfdc['id']}},this[_0x5f6e52(0x921)][_0x5f6e52(0x2d1)]);return _0x52781e?_0x14c375[0x0]:_0x14c375[0x0][_0x5f6e52(0x6c9)];}catch{return{'conversation':''};}}[a0_0x1df5a5(0x925)](){const _0x233e0a=a0_0x1df5a5;let _0x87afa3=this['configService']['get'](_0x233e0a(0x26b)),_0x78fdd4=this['configService'][_0x233e0a(0x3be)](_0x233e0a(0x216));_0x87afa3?.[_0x233e0a(0x235)]&&!_0x78fdd4[_0x233e0a(0x765)]&&setInterval(()=>{const _0x55cca5=_0x233e0a;try{for(let [_0x4ae753,_0x182ccd]of Object[_0x55cca5(0x8da)](_0x87afa3))_0x182ccd===!0x0&&(0x0,Ue[_0x55cca5(0x886)])(_0x55cca5(0x828)+(0x0,j[_0x55cca5(0x4bc)])(this[_0x55cca5(0x813)],_0x4ae753[_0x55cca5(0x6c2)](),this[_0x55cca5(0x921)][_0x55cca5(0x2d1)])+_0x55cca5(0x432));}catch{}},(_0x87afa3?.['CLEANING_INTERVAL']??0xe10)*0x3e8);}async[a0_0x1df5a5(0x2db)](){const _0x2e9273=a0_0x1df5a5;let _0x2bd655=this['configService'][_0x2e9273(0x3be)](_0x2e9273(0x216)),_0xa59284=this[_0x2e9273(0x4e6)][_0x2e9273(0x3be)]('REDIS');return _0xa59284?.[_0x2e9273(0x765)]?await Os(_0xa59284,this[_0x2e9273(0x921)][_0x2e9273(0x5d3)]):_0x2bd655[_0x2e9273(0x765)]?await _s(this[_0x2e9273(0x921)][_0x2e9273(0x5d3)]):await(0x0,w[_0x2e9273(0x1eb)])((0x0,j['join'])(Se,this[_0x2e9273(0x921)][_0x2e9273(0x5d3)]));}async['AutomateFunctions'](){const _0x2a4e1e=a0_0x1df5a5;let _0x3a4782=()=>Math['floor'](Math[_0x2a4e1e(0x5ba)]()*0x4e21)+0x7d0,_0x28ff6a=async()=>{const _0x2feed3=_0x2a4e1e;if(!this['instance']['ScheduleMessage']['isConnected']){this[_0x2feed3(0x755)][_0x2feed3(0x3fb)](this[_0x2feed3(0x474)]+'\x20('+this[_0x2feed3(0x921)][_0x2feed3(0x2d1)]+_0x2feed3(0x5ce)),this[_0x2feed3(0x7cc)]=!0x1;return;}if(this[_0x2feed3(0x921)][_0x2feed3(0x2d1)]&&this[_0x2feed3(0x48e)]&&this[_0x2feed3(0x921)]['ScheduleMessage'][_0x2feed3(0x3d5)]!==null&&this[_0x2feed3(0x921)][_0x2feed3(0x8ac)]['delayMessage']!==void 0x0){let _0x9a2931=Math[_0x2feed3(0x1d2)](this['instance'][_0x2feed3(0x8ac)][_0x2feed3(0x3d5)]/0xea60);this[_0x2feed3(0x755)][_0x2feed3(0x3fb)](this[_0x2feed3(0x474)]+'\x20('+this[_0x2feed3(0x921)][_0x2feed3(0x2d1)]+_0x2feed3(0x402)+_0x9a2931+'\x20minutos\x20verificará\x20novas\x20mensagens'),this['isRunning']=!0x1;return;}else this[_0x2feed3(0x921)][_0x2feed3(0x2d1)]&&(this[_0x2feed3(0x755)][_0x2feed3(0x3fb)](this['instanceName']+'\x20('+this[_0x2feed3(0x921)][_0x2feed3(0x2d1)]+'):\x20condições\x20não\x20totalmente\x20atendidas,\x20executando\x20AutomateFunctions...'),this[_0x2feed3(0x48e)]||(await this[_0x2feed3(0x4d3)](),this['findRealGroups'](),this[_0x2feed3(0x3d0)]()),(this[_0x2feed3(0x921)]['ScheduleMessage'][_0x2feed3(0x3d5)]===null||this[_0x2feed3(0x921)]['ScheduleMessage'][_0x2feed3(0x3d5)]===void 0x0)&&await this['scheduleNextCheck']());if(this['isRunning']){let _0x3db0c6=_0x3a4782();this[_0x2feed3(0x755)][_0x2feed3(0x3fb)](this[_0x2feed3(0x474)]+_0x2feed3(0x837)+_0x3db0c6/0x3e8+_0x2feed3(0x7b8)),setTimeout(_0x28ff6a,_0x3db0c6);}};if(this[_0x2a4e1e(0x7cc)])return;this['isRunning']=!0x0;let _0x168f77=_0x3a4782();setTimeout(_0x28ff6a,_0x168f77);}async[a0_0x1df5a5(0x3d0)](){const _0x2105a1=a0_0x1df5a5;let _0x554b87=this[_0x2105a1(0x921)][_0x2105a1(0x2d1)];try{let _0xba4b70=await this[_0x2105a1(0x3cf)][_0x2105a1(0x461)]['findAll']({'where':{'$or':[{'owner':_0x554b87},{'whoCanUse':{'$in':[_0x554b87]}},{'shareOwners':{'$in':[_0x554b87]}}]}}),_0x34e893=new Map(this[_0x2105a1(0x48e)][_0x2105a1(0x714)][_0x2105a1(0x948)](_0x498f95=>[_0x498f95[_0x2105a1(0x5da)],_0x498f95])),_0x4181c2=_0xba4b70[_0x2105a1(0x948)](_0x528050=>{const _0xafff30=_0x2105a1;let _0x264e70=_0x34e893[_0xafff30(0x3be)](_0x528050['_id']?.[_0xafff30(0x641)]());return{'_id':_0x528050[_0xafff30(0x5da)]?.[_0xafff30(0x641)](),'name':_0x264e70?.['name']??_0x528050[_0xafff30(0x5d3)],'default':_0x264e70?.[_0xafff30(0x686)]??_0x528050[_0xafff30(0x686)]??!0x1,'startCommand':_0x264e70?.[_0xafff30(0x3c0)]??_0x528050['startCommandWord'],'minutesToClose':_0x264e70?.[_0xafff30(0x769)]??_0x528050[_0xafff30(0x769)]??0xa,'readMessages':_0x264e70?.[_0xafff30(0x502)]??_0x528050[_0xafff30(0x502)]??!0x1,'testingWith':_0x264e70?.[_0xafff30(0x6d3)]??_0x528050[_0xafff30(0x6d3)],'canEdit':_0x528050['owner']===_0x554b87||(_0x528050[_0xafff30(0x30f)]??[])[_0xafff30(0x5f2)](_0x554b87),'usersCount':(_0x528050[_0xafff30(0x227)]??[])['length']??0x0};}),_0x4563b2=!0x1;_0x4181c2[_0x2105a1(0x504)](_0x27782b=>{const _0x43eb08=_0x2105a1;_0x27782b[_0x43eb08(0x686)]&&(_0x4563b2?_0x27782b['default']=!0x1:_0x4563b2=!0x0);}),this['AutomateSystem']['flows']=_0x4181c2;let _0x4f8ef0={'flows':_0x4181c2};return await this[_0x2105a1(0x3cf)]['automateSystem'][_0x2105a1(0x62e)](_0x4f8ef0,_0x554b87),this[_0x2105a1(0x755)]['verbose'](this[_0x2105a1(0x474)]+'\x20('+_0x554b87+_0x2105a1(0x3a0)),_0x4181c2[_0x2105a1(0x303)];}catch(_0x5a3165){return this[_0x2105a1(0x755)][_0x2105a1(0x398)](this[_0x2105a1(0x474)]+'\x20('+_0x554b87+_0x2105a1(0x316)+(_0x5a3165 instanceof Error?_0x5a3165[_0x2105a1(0x6c9)]:JSON['stringify'](_0x5a3165,null,0x2))),{'message':_0x2105a1(0x820)+(_0x5a3165 instanceof Error?_0x5a3165[_0x2105a1(0x6c9)]:JSON[_0x2105a1(0x28d)](_0x5a3165,null,0x2))};}}async[a0_0x1df5a5(0x645)](_0x9ee033){const _0x1d6c84=a0_0x1df5a5;try{let _0x485c77=await this[_0x1d6c84(0x3cf)][_0x1d6c84(0x921)][_0x1d6c84(0x694)]({'where':{'_id':se+'-'+this['instanceName']}}),_0x5359c2,_0x1b00fa=!we['ipv6Prefix']||!we[_0x1d6c84(0x75a)];console[_0x1d6c84(0x485)](_0x1d6c84(0x4fe)),console[_0x1d6c84(0x485)](_0x1d6c84(0x2a5),Ai),console[_0x1d6c84(0x485)](_0x1d6c84(0x722),this[_0x1d6c84(0x27c)]),console[_0x1d6c84(0x485)](_0x1d6c84(0x4fe)),Ai&&!_0x1b00fa&&(this['reconnectAttempts']<0x4||!this[_0x1d6c84(0x27c)]?_0x485c77&&_0x485c77['ip']?(_0x5359c2=_0x485c77['ip'],console[_0x1d6c84(0x485)]('Usando\x20IP\x20existente:\x20'+_0x5359c2)):(_0x5359c2=await we[_0x1d6c84(0x729)](se,this[_0x1d6c84(0x921)][_0x1d6c84(0x5d3)]),_0x5359c2?(console['log']('Novo\x20IP\x20criado:\x20'+_0x5359c2),await(0x0,w[_0x1d6c84(0x38f)])(0x7d0)):console['error'](_0x1d6c84(0x328))):this[_0x1d6c84(0x27c)]<0x6&&(console[_0x1d6c84(0x485)](_0x1d6c84(0x234)),_0x5359c2=await we[_0x1d6c84(0x729)](se,this[_0x1d6c84(0x921)]['name']),_0x5359c2?(console[_0x1d6c84(0x485)](_0x1d6c84(0x809)+_0x5359c2),await(0x0,w[_0x1d6c84(0x38f)])(0x7d0)):console['error'](_0x1d6c84(0x250)))),this[_0x1d6c84(0x3d6)](),this[_0x1d6c84(0x921)][_0x1d6c84(0x829)]=(await this[_0x1d6c84(0x3cf)]['auth'][_0x1d6c84(0x756)](this[_0x1d6c84(0x921)]['name']))[_0x1d6c84(0x829)],this[_0x1d6c84(0x921)][_0x1d6c84(0x281)]=await this[_0x1d6c84(0x2db)]();let _0x2a4d0a=[xi,Us,(0x0,ks[_0x1d6c84(0x605)])()],_0xa42c68={'localAddress':_0x5359c2,'auth':{'creds':this['instance'][_0x1d6c84(0x281)][_0x1d6c84(0x85b)]['creds'],'keys':(0x0,w[_0x1d6c84(0x8e3)])(this[_0x1d6c84(0x921)][_0x1d6c84(0x281)][_0x1d6c84(0x85b)][_0x1d6c84(0x326)],(0x0,Ft['default'])({'level':_0x1d6c84(0x398)}))},'logger':(0x0,Ft[_0x1d6c84(0x686)])({'level':'error'}),'printQRInTerminal':!0x1,'browser':_0x9ee033?[_0x1d6c84(0x465),Us,(0x0,ks[_0x1d6c84(0x605)])()]:_0x2a4d0a,'version':[0x2,0xbb8,0x3c8d6c7b],'maxMsgRetryCount':0xa,'retryRequestDelayMs':0x3e8,'fireInitQueries':!0x0,'keepAliveIntervalMs':0x7530,'connectTimeoutMs':0x4e20,'qrTimeout':0xafc8,'defaultQueryTimeoutMs':void 0x0,'emitOwnEvents':!0x1,'shouldIgnoreJid':_0x99e0ed=>{const _0x220884=_0x1d6c84;let _0x2688fb=this[_0x220884(0x1a8)]?.[_0x220884(0x6e6)]&&(0x0,w[_0x220884(0x865)])(_0x99e0ed);return(0x0,w[_0x220884(0x5ab)])(_0x99e0ed)||_0x2688fb;},'msgRetryCounterCache':this[_0x1d6c84(0x3de)],'getMessage':async _0x3740f5=>await this[_0x1d6c84(0x699)](_0x3740f5),'generateHighQualityLinkPreview':!0x0,'syncFullHistory':!0x1,'userDevicesCache':this[_0x1d6c84(0x582)],'transactionOpts':{'maxCommitRetries':0xa,'delayBetweenTriesMs':0xbb8},'patchMessageBeforeSending'(_0x4e6c7d){const _0xe007d4=_0x1d6c84;return _0x4e6c7d[_0xe007d4(0x477)]?.[_0xe007d4(0x6c9)]?.[_0xe007d4(0x5c6)]?.['listType']===w['proto']['Message'][_0xe007d4(0x720)][_0xe007d4(0x933)]['PRODUCT_LIST']&&(_0x4e6c7d=JSON[_0xe007d4(0x8a5)](JSON[_0xe007d4(0x28d)](_0x4e6c7d)),_0x4e6c7d['deviceSentMessage']['message'][_0xe007d4(0x5c6)][_0xe007d4(0x31e)]=w['proto'][_0xe007d4(0x69e)][_0xe007d4(0x720)][_0xe007d4(0x933)][_0xe007d4(0x611)]),_0x4e6c7d['listMessage']?.['listType']==w['proto']['Message'][_0xe007d4(0x720)][_0xe007d4(0x933)][_0xe007d4(0x814)]&&(_0x4e6c7d=JSON[_0xe007d4(0x8a5)](JSON[_0xe007d4(0x28d)](_0x4e6c7d)),_0x4e6c7d[_0xe007d4(0x5c6)]['listType']=w[_0xe007d4(0x8ff)]['Message']['ListMessage'][_0xe007d4(0x933)]['SINGLE_SELECT']),_0x4e6c7d;}};return this[_0x1d6c84(0x381)]=!0x1,this['client']=(0x0,w[_0x1d6c84(0x686)])(_0xa42c68),this[_0x1d6c84(0x2bc)](),this[_0x1d6c84(0x67f)]=_0x9ee033,this[_0x1d6c84(0x826)];}catch(_0xc07a17){let _0x24c43f=_0x1d6c84(0x3ae),_0x4a1e2e=_0xc07a17 instanceof Error?_0xc07a17[_0x1d6c84(0x6c9)]:typeof _0xc07a17==_0x1d6c84(0x1b3)?JSON[_0x1d6c84(0x28d)](_0xc07a17):_0xc07a17,_0x3b1859=_0x24c43f+':\x20'+_0x4a1e2e;throw this[_0x1d6c84(0x755)][_0x1d6c84(0x398)](this['instanceName']+'\x20('+this[_0x1d6c84(0x921)][_0x1d6c84(0x2d1)]+_0x1d6c84(0x91e)+_0x3b1859),console[_0x1d6c84(0x398)](_0x1d6c84(0x7df),_0xc07a17),_0xc07a17 instanceof Error&&console[_0x1d6c84(0x398)](_0x1d6c84(0x2ff),_0xc07a17[_0x1d6c84(0x84d)]),new x(_0x3b1859);}}['eventHandler'](){const _0x4dcc67=a0_0x1df5a5;this[_0x4dcc67(0x826)]['ev']['process'](_0x5383e4=>{const _0x5350c9=_0x4dcc67;if(!this['endSession']){let _0x3d5306=this[_0x5350c9(0x4e6)]['get'](_0x5350c9(0x216));if(_0x5383e4[_0x5350c9(0x27d)]){let _0x346cbc=_0x5383e4[_0x5350c9(0x27d)];this[_0x5350c9(0x857)][_0x5350c9(0x27d)](_0x346cbc);}if(_0x5383e4['labels.association']){let _0x38918d=_0x5383e4['labels.association'];this[_0x5350c9(0x857)]['labels.association'](_0x38918d);}if(_0x5383e4['connection.update']&&this['connectionUpdate'](_0x5383e4[_0x5350c9(0x447)]),_0x5383e4['creds.update']&&this[_0x5350c9(0x921)][_0x5350c9(0x281)][_0x5350c9(0x66c)](),_0x5383e4[_0x5350c9(0x438)]){let _0x4a9f19=_0x5383e4[_0x5350c9(0x438)];this['messageHandle'][_0x5350c9(0x438)](_0x4a9f19,_0x3d5306);}if(_0x5383e4[_0x5350c9(0x286)]){let _0x5c0e44=_0x5383e4[_0x5350c9(0x286)];this[_0x5350c9(0x857)]['messages.upsert'](_0x5c0e44,_0x3d5306);}if(_0x5383e4['messages.update']){let _0x24761e=_0x5383e4[_0x5350c9(0x7c8)];this[_0x5350c9(0x857)][_0x5350c9(0x7c8)](_0x24761e,_0x3d5306);}if(_0x5383e4[_0x5350c9(0x25d)]){let _0x27b44e=_0x5383e4[_0x5350c9(0x25d)];if(this[_0x5350c9(0x1a8)]?.[_0x5350c9(0x6e6)]&&_0x27b44e['id'][_0x5350c9(0x5f2)](_0x5350c9(0x8ca)))return;this['sendDataWebhook'](_0x5350c9(0x25d),_0x27b44e);}if(_0x5383e4[_0x5350c9(0x6a4)]){let _0xe7b7a=_0x5383e4[_0x5350c9(0x6a4)];this[_0x5350c9(0x483)]['groups.upsert'](_0xe7b7a);}if(_0x5383e4['groups.update']){let _0x273513=_0x5383e4['groups.update'];this['groupHandler'][_0x5350c9(0x895)](_0x273513);}if(_0x5383e4[_0x5350c9(0x663)]){let _0x298dd6=_0x5383e4[_0x5350c9(0x663)];this[_0x5350c9(0x483)][_0x5350c9(0x663)](_0x298dd6);}if(_0x5383e4[_0x5350c9(0x937)]){let _0x810afd=_0x5383e4[_0x5350c9(0x937)];this[_0x5350c9(0x3a2)]['chats.upsert'](_0x810afd,_0x3d5306);}if(_0x5383e4[_0x5350c9(0x3a7)]){let _0x414689=_0x5383e4[_0x5350c9(0x3a7)];this[_0x5350c9(0x3a2)][_0x5350c9(0x3a7)](_0x414689,_0x3d5306);}if(_0x5383e4['chats.delete']){let _0xb1fb6c=_0x5383e4['chats.delete'];this[_0x5350c9(0x3a2)][_0x5350c9(0x81b)](_0xb1fb6c);}if(_0x5383e4[_0x5350c9(0x7da)]){let _0x4a0d1f=_0x5383e4[_0x5350c9(0x7da)];this[_0x5350c9(0x222)][_0x5350c9(0x7da)](_0x4a0d1f,_0x3d5306);}if(_0x5383e4[_0x5350c9(0x874)]){let _0xd443ea=_0x5383e4[_0x5350c9(0x874)];this[_0x5350c9(0x222)][_0x5350c9(0x874)](_0xd443ea,_0x3d5306);}}});}async['retrySendMessage'](_0x1ccc4f,_0x5c9c35){const _0x1538fb=a0_0x1df5a5;if(_0x5c9c35>=0xa){console[_0x1538fb(0x398)](this[_0x1538fb(0x474)]+'\x20('+this['instance'][_0x1538fb(0x2d1)]+'):\x20[RETRY]:\x20Máximo\x20de\x20tentativas\x20alcançado,\x20desistindo\x20de\x20recuperar'),delete Lt[_0x1ccc4f[_0x1538fb(0x440)]['id']];return;}try{console[_0x1538fb(0x398)](this[_0x1538fb(0x474)]+'\x20('+this['instance']['wuid']+'):\x20\x20[RETRY]:\x20Tentando\x20reenviar\x20a\x20mensagem,\x20Tentativa:\x20'+(_0x5c9c35+0x1)),await this[_0x1538fb(0x826)][_0x1538fb(0x8a8)](JSON[_0x1538fb(0x8a5)](_0x1ccc4f[_0x1538fb(0x879)][0x1],w[_0x1538fb(0x4c0)][_0x1538fb(0x4ab)])),console[_0x1538fb(0x398)]('[RETRY]:\x20Mensagem\x20enviada\x20com\x20sucesso');}catch(_0x1e365f){console['error'](this['instanceName']+'\x20('+this[_0x1538fb(0x921)][_0x1538fb(0x2d1)]+_0x1538fb(0x1b2)+_0x1e365f),setTimeout(()=>this['retrySendMessage'](_0x1ccc4f,_0x5c9c35+0x1),Math[_0x1538fb(0x8cc)](0x2,_0x5c9c35)*0x3e8);}}async['fakeReceived'](_0x41abed){const _0x198f50=a0_0x1df5a5;let _0x246e6a=_0x41abed['key'][_0x198f50(0x788)]['endsWith']('@g.us'),_0x2f6f61;if(_0x41abed[_0x198f50(0x440)][_0x198f50(0x89a)])_0x2f6f61=this[_0x198f50(0x921)][_0x198f50(0x912)];else{let _0x5956c8=_0x246e6a?_0x41abed['key'][_0x198f50(0x839)]:_0x41abed['key'][_0x198f50(0x788)];_0x2f6f61=(await this[_0x198f50(0x5a8)](_0x5956c8,_0x41abed[_0x198f50(0x91a)],!0x1))[_0x198f50(0x5ef)][_0x198f50(0x1d4)];}_0x41abed[_0x198f50(0x6f2)]&&_0x41abed['messageTimestamp'][_0x198f50(0x641)]()[_0x198f50(0x303)]<0xd&&(_0x41abed[_0x198f50(0x6f2)]=_0x41abed[_0x198f50(0x6f2)]*0x3e8);let _0x3dac61={'_id':_0x41abed['key']['id'],'key':_0x41abed[_0x198f50(0x440)],'isGroup':_0x246e6a,'profilePictureUrl':_0x2f6f61,'pushName':_0x41abed['pushName'],'message':{'text':'[\x20SYSTEM\x20-\x20UAZAPI\x20]\x20-\x20Mensagem\x20perdida,\x20não\x20foi\x20possível\x20descriptografá-la,\x20abra\x20o\x20WhatsApp\x20no\x20seu\x20celular\x20para\x20visualizá-la'},'messageType':_0x198f50(0x398),'message_normalized':{'key':_0x41abed[_0x198f50(0x440)],'pushName':_0x41abed[_0x198f50(0x91a)],'messageTimestamp':_0x41abed['messageTimestamp'],'source':(0x0,w[_0x198f50(0x578)])(_0x41abed[_0x198f50(0x440)]['id']),'text':_0x198f50(0x812)},'messageTimestamp':_0x41abed['messageTimestamp'],'owner':this[_0x198f50(0x921)][_0x198f50(0x2d1)],'source':(0x0,w[_0x198f50(0x578)])(_0x41abed['key']['id'])};this[_0x198f50(0x755)][_0x198f50(0x398)](this[_0x198f50(0x474)]+'\x20('+this[_0x198f50(0x921)][_0x198f50(0x2d1)]+_0x198f50(0x91e)+(_0x3dac61[_0x198f50(0x440)]?.[_0x198f50(0x89a)]?'enviado\x20para':'recebido\x20de')+'\x20['+_0x3dac61[_0x198f50(0x440)]?.['remoteJid']['replace'](_0x198f50(0x2d9),'')+']\x20('+_0x3dac61[_0x198f50(0x414)]+')'),_0x3dac61['message_normalized']?.[_0x198f50(0x5b9)]&&this['logger'][_0x198f50(0x398)](_0x41abed[_0x198f50(0x440)]['id']+':\x20'+_0x3dac61[_0x198f50(0x213)]?.[_0x198f50(0x5b9)]),await this['repository'][_0x198f50(0x6c9)]['insert']([_0x3dac61],this['instance'][_0x198f50(0x2d1)]),await this[_0x198f50(0x3cf)][_0x198f50(0x272)][_0x198f50(0x2de)]([_0x3dac61]),this['sendDataWebhook'](_0x198f50(0x286),_0x3dac61),F(this[_0x198f50(0x474)],_0x198f50(0x1da),{'message':_0x3dac61});}[a0_0x1df5a5(0x334)](_0x2aaf81){return new Promise(_0x5c1d73=>setTimeout(_0x5c1d73,_0x2aaf81));}['formatBRNumber'](_0x29ef6f){const _0x333303=a0_0x1df5a5;_0x29ef6f=_0x29ef6f[_0x333303(0x894)](/\D/g,'');let _0x139d21=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)['exec'](_0x29ef6f);if(_0x139d21&&_0x139d21[0x1]==='55'){let _0x1fd273=_0x139d21[0x2],_0x373c49=_0x139d21[0x3],_0x3d88a7=_0x139d21[0x4];if(parseInt(_0x1fd273)>=0x1f&&_0x373c49==='9')return _0x139d21[0x1]+_0x1fd273+_0x3d88a7;}return _0x29ef6f;}[a0_0x1df5a5(0x7b3)](_0x596e2d){const _0x3886f4=a0_0x1df5a5;return _0x596e2d[_0x3886f4(0x5f2)](_0x3886f4(0x8ca))||_0x596e2d[_0x3886f4(0x5f2)](_0x3886f4(0x2d9))||_0x596e2d[_0x3886f4(0x5f2)]('@broadcast')?_0x596e2d:(_0x596e2d=_0x596e2d?.[_0x3886f4(0x894)](/\s/g,'')[_0x3886f4(0x894)](/\+/g,'')[_0x3886f4(0x894)](/\(/g,'')[_0x3886f4(0x894)](/\)/g,'')[_0x3886f4(0x709)](/\:/)[0x0][_0x3886f4(0x709)]('@')[0x0],_0x596e2d['length']>=0x12?(_0x596e2d=_0x596e2d['replace'](/[^\d-]/g,''),_0x596e2d+_0x3886f4(0x8ca)):(_0x596e2d=_0x596e2d[_0x3886f4(0x894)](/\D/g,''),_0x596e2d+_0x3886f4(0x2d9)));}async[a0_0x1df5a5(0x7ef)](_0x14bfef){const _0x191d0c=a0_0x1df5a5;let _0x1d7093=(await this[_0x191d0c(0x493)]({'numbers':[_0x14bfef[_0x191d0c(0x737)]]}))[0x0];if(!_0x1d7093[_0x191d0c(0x3bc)]&&!(0x0,w['isJidGroup'])(_0x1d7093[_0x191d0c(0x83f)])&&!_0x1d7093[_0x191d0c(0x83f)][_0x191d0c(0x5f2)](_0x191d0c(0x688)))throw new m(_0x1d7093);let _0x530ce2=_0x1d7093[_0x191d0c(0x83f)];try{return await this[_0x191d0c(0x826)][_0x191d0c(0x259)](_0x530ce2),await this[_0x191d0c(0x826)][_0x191d0c(0x8ef)](_0x14bfef[_0x191d0c(0x745)],_0x530ce2),{'status':0xc8,'presence':_0x14bfef['presence']};}catch(_0x1ee592){let _0x29b2bc='Falha\x20ao\x20processar\x20a\x20solicitação\x20de\x20updatePresence',_0x5a4428=_0x1ee592 instanceof Error?_0x1ee592[_0x191d0c(0x6c9)]:typeof _0x1ee592=='object'?JSON['stringify'](_0x1ee592):_0x1ee592,_0x1f64f7=_0x29b2bc+':\x20'+_0x5a4428;throw this[_0x191d0c(0x755)][_0x191d0c(0x398)](this[_0x191d0c(0x474)]+'\x20('+this[_0x191d0c(0x921)]['wuid']+_0x191d0c(0x91e)+_0x1f64f7),new m(_0x1f64f7);}}async[a0_0x1df5a5(0x5a8)](_0x487088,_0x584ad0,_0x22548d,_0x4b366f=!0x0){const _0x16c61b=a0_0x1df5a5;let _0x2eae7e=await this['repository'][_0x16c61b(0x78b)][_0x16c61b(0x694)]({'where':{'_id':_0x487088}});if(!_0x2eae7e&&!_0x4b366f)return;let _0x6ccf19={'lastUpdate':Date['now']()};if(_0x22548d||!_0x2eae7e?.[_0x16c61b(0x4d1)]||Date[_0x16c61b(0x78f)]()-_0x2eae7e[_0x16c61b(0x4d1)]>0x18*0x3c*0x3c*0x3e8)try{let _0xdc9bd=(await this[_0x16c61b(0x8e9)](_0x487088))[_0x16c61b(0x912)];_0x6ccf19[_0x16c61b(0x1d4)]=_0xdc9bd;}catch(_0x157eec){let _0x3265e3=_0x16c61b(0x6e3),_0x44ea93=_0x157eec instanceof Error?_0x157eec[_0x16c61b(0x6c9)]:typeof _0x157eec==_0x16c61b(0x1b3)?JSON[_0x16c61b(0x28d)](_0x157eec):_0x157eec,_0xf89835=_0x3265e3+':\x20'+_0x44ea93;throw this[_0x16c61b(0x755)][_0x16c61b(0x398)](this[_0x16c61b(0x474)]+'\x20('+this[_0x16c61b(0x921)][_0x16c61b(0x2d1)]+'):\x20'+_0xf89835),new m(_0xf89835);}return _0x584ad0&&_0x2eae7e?.[_0x16c61b(0x5d3)]!==_0x584ad0&&(_0x6ccf19['name']=_0x584ad0),Object[_0x16c61b(0x326)](_0x6ccf19)['length']>0x1&&(_0x2eae7e?await this[_0x16c61b(0x3cf)][_0x16c61b(0x78b)]['update']({'where':{'_id':_0x487088}},_0x6ccf19):await this[_0x16c61b(0x3cf)][_0x16c61b(0x78b)][_0x16c61b(0x2de)]([{'_id':_0x487088,..._0x6ccf19}]),_0x2eae7e={..._0x2eae7e,..._0x6ccf19}),{'cachedContact':_0x2eae7e};}async['profilePicture'](_0x1e28f6){const _0x46e375=a0_0x1df5a5;let _0x418937=this['createJid'](_0x1e28f6);try{return{'wuid':_0x418937,'profilePictureUrl':await this[_0x46e375(0x826)][_0x46e375(0x912)](_0x418937,_0x46e375(0x6aa))};}catch{return{'wuid':_0x418937,'profilePictureUrl':null};}}async['sendMessageWithRetry'](_0xc8cd08,_0x381257,_0x533de0){const _0x59d6f5=a0_0x1df5a5;let _0x2ed273=0x0;for(;_0x2ed273<0x5;)try{return await this[_0x59d6f5(0x233)](_0xc8cd08,_0x381257,_0x533de0);}catch(_0x5c74f1){if(_0x2ed273++,_0x5c74f1 instanceof Error&&_0x5c74f1[_0x59d6f5(0x6c9)]===_0x59d6f5(0x8d7)){if(_0x2ed273>=0x5)throw new m(_0x59d6f5(0x1fc)+_0x5c74f1['message']);this[_0x59d6f5(0x755)][_0x59d6f5(0x8c0)](_0x59d6f5(0x3d1)+_0x2ed273+_0x59d6f5(0x5b2)+_0x5c74f1['message']+_0x59d6f5(0x372)+0x1388/0x3e8+'\x20segundos...'),await new Promise(_0x22ce5c=>setTimeout(_0x22ce5c,0x1388));}else throw new m(_0x5c74f1['message']);}}async[a0_0x1df5a5(0x233)](_0xeb8784,_0x41d9a0,_0x42fd3c){const _0x4efc8e=a0_0x1df5a5;let _0x13d4f2;try{let _0x2c0649=(await this[_0x4efc8e(0x493)]({'numbers':[_0xeb8784]}))?.[_0x4efc8e(0x55e)]();if(!_0x2c0649[_0x4efc8e(0x3bc)]&&!(0x0,w['isJidGroup'])(_0x2c0649[_0x4efc8e(0x83f)])&&!_0x2c0649[_0x4efc8e(0x83f)][_0x4efc8e(0x5f2)](_0x4efc8e(0x688)))throw new m(_0x2c0649);_0x13d4f2=_0x2c0649[_0x4efc8e(0x83f)];}catch(_0x5ead7c){_0x13d4f2=_0xeb8784,this['logger'][_0x4efc8e(0x8c0)](this[_0x4efc8e(0x474)]+'\x20('+this[_0x4efc8e(0x921)][_0x4efc8e(0x2d1)]+'):\x20error:\x20'+_0x5ead7c[_0x4efc8e(0x6c9)]),this[_0x4efc8e(0x755)][_0x4efc8e(0x8c0)](this[_0x4efc8e(0x474)]+'\x20('+this[_0x4efc8e(0x921)][_0x4efc8e(0x2d1)]+_0x4efc8e(0x92b)+_0x13d4f2);}try{if(_0x13d4f2||(_0x13d4f2=_0xeb8784,this[_0x4efc8e(0x755)][_0x4efc8e(0x8c0)](this[_0x4efc8e(0x474)]+'\x20('+this['instance'][_0x4efc8e(0x2d1)]+'):\x20fora\x20do\x20catch\x20->\x20sender\x20=\x20number:\x20'+_0x13d4f2)),_0x42fd3c||(_0x42fd3c={}),_0x42fd3c?.['delay']){await this[_0x4efc8e(0x826)]['presenceSubscribe'](_0x13d4f2),await this[_0x4efc8e(0x826)][_0x4efc8e(0x8ef)](_0x42fd3c?.[_0x4efc8e(0x745)]??_0x4efc8e(0x3e6),_0x13d4f2);let _0x46b308=Math[_0x4efc8e(0x7a9)](_0x42fd3c[_0x4efc8e(0x38f)],0x2710);await(0x0,w[_0x4efc8e(0x38f)])(_0x46b308),await this[_0x4efc8e(0x826)][_0x4efc8e(0x8ef)](_0x4efc8e(0x212),_0x13d4f2);}let _0x350682=_0x42fd3c?.[_0x4efc8e(0x33d)]!=!0x1?void 0x0:!0x1,_0x4fed14;if(_0x42fd3c?.['quoted']){let _0x367b52=_0x42fd3c?.['quoted'],_0x544cb9=_0x367b52?.['message']?_0x367b52:await this[_0x4efc8e(0x699)](_0x367b52[_0x4efc8e(0x440)],!0x0);_0x544cb9&&(_0x4fed14=_0x544cb9);}let _0x4254a9=await this['repository'][_0x4efc8e(0x947)][_0x4efc8e(0x694)]({'where':{'_id':_0x13d4f2}},this[_0x4efc8e(0x921)]['wuid']),_0x5692aa,_0x1c1140=null;if((0x0,w[_0x4efc8e(0x865)])(_0x13d4f2))try{if(_0x1c1140=_0x4254a9[_0x4efc8e(0x702)],!_0x1c1140)throw new U('Grupo\x20não\x20encontrado');if(!_0x1c1140['canSendMessage'])throw new m(_0x4efc8e(0x361));_0x42fd3c?.[_0x4efc8e(0x706)]&&(_0x42fd3c[_0x4efc8e(0x706)]?.[_0x4efc8e(0x417)]?_0x5692aa=_0x1c1140[_0x4efc8e(0x521)][_0x4efc8e(0x948)](_0x904132=>_0x904132['id']):_0x42fd3c[_0x4efc8e(0x706)]?.[_0x4efc8e(0x396)]?.[_0x4efc8e(0x303)]&&(_0x5692aa=_0x42fd3c[_0x4efc8e(0x706)][_0x4efc8e(0x396)][_0x4efc8e(0x948)](_0x4f86bf=>{const _0x3f252a=_0x4efc8e;let _0x5dca72=this['createJid'](_0x4f86bf);return(0x0,w[_0x3f252a(0x865)])(_0x5dca72)?null:_0x5dca72;})));}catch(_0x2e07dc){throw _0x2e07dc instanceof U?new U(_0x4efc8e(0x847)):_0x2e07dc instanceof m?new m(_0x4efc8e(0x361)):new Error(_0x4efc8e(0x547));}let _0x868c89=await((async()=>{const _0x48827c=_0x4efc8e;let _0xce9aff={'quoted':_0x4fed14,'ephemeralExpiration':_0x4254a9?.[_0x48827c(0x8f5)]??0x0};if(!_0x41d9a0[_0x48827c(0x892)]&&!_0x41d9a0[_0x48827c(0x1ed)]&&!_0x41d9a0['sticker']&&!_0x41d9a0['conversation']&&_0x13d4f2!==_0x48827c(0x54c)&&_0x41d9a0['reactionMessage'])return await this[_0x48827c(0x826)]['sendMessage'](_0x13d4f2,{'react':{'text':_0x41d9a0[_0x48827c(0x28b)][_0x48827c(0x5b9)],'key':_0x41d9a0[_0x48827c(0x28b)][_0x48827c(0x440)]}},_0xce9aff);if(_0x41d9a0['conversation']){let _0x15559d=_0x41d9a0['conversation'];return _0x42fd3c?.[_0x48827c(0x61f)]&&(_0x15559d=await this[_0x48827c(0x835)](_0x15559d,_0x13d4f2)),await this[_0x48827c(0x826)][_0x48827c(0x7d4)](_0x13d4f2,{'text':_0x15559d,'mentions':_0x5692aa,'linkPreview':_0x350682},_0xce9aff);}return!_0x41d9a0['audio']&&!_0x41d9a0[_0x48827c(0x1ed)]&&_0x13d4f2!=_0x48827c(0x54c)?await this[_0x48827c(0x826)][_0x48827c(0x7d4)](_0x13d4f2,{'forward':{'key':{'remoteJid':this[_0x48827c(0x921)][_0x48827c(0x2d1)],'fromMe':!0x0},'message':_0x41d9a0},'mentions':_0x5692aa},_0xce9aff):_0x13d4f2==='status@broadcast'?await this[_0x48827c(0x826)][_0x48827c(0x7d4)](_0x13d4f2,_0x41d9a0['status'][_0x48827c(0x620)],{'backgroundColor':_0x41d9a0[_0x48827c(0x781)][_0x48827c(0x747)]['backgroundColor'],'font':_0x41d9a0[_0x48827c(0x781)][_0x48827c(0x747)]['font'],'statusJidList':_0x41d9a0[_0x48827c(0x781)][_0x48827c(0x747)][_0x48827c(0x952)]}):await this['client']['sendMessage'](_0x13d4f2,_0x41d9a0,_0xce9aff);})()),_0x4508b9=(0x0,w[_0x4efc8e(0x34f)])(_0x868c89[_0x4efc8e(0x6c9)]),_0x2ff4f4=(0x0,w['getContentType'])(_0x4508b9),{message_normalized:_0x5de79a}=this[_0x4efc8e(0x811)](_0x4508b9,_0x2ff4f4,null),_0x4b18f1={'_id':_0x868c89[_0x4efc8e(0x440)]['id'],'key':_0x868c89[_0x4efc8e(0x440)],'pushName':_0x868c89[_0x4efc8e(0x91a)],'isGroup':_0x868c89[_0x4efc8e(0x440)]['remoteJid'][_0x4efc8e(0x237)](_0x4efc8e(0x8ca)),'profilePictureUrl':this[_0x4efc8e(0x921)][_0x4efc8e(0x912)],'message':_0x4508b9,'messageType':_0x2ff4f4,'message_normalized':{'key':_0x868c89[_0x4efc8e(0x440)],'pushName':_0x868c89[_0x4efc8e(0x91a)],'messageTimestamp':_0x868c89[_0x4efc8e(0x6f2)]&&_0x868c89['messageTimestamp'][_0x4efc8e(0x641)]()['length']<0xd?_0x868c89['messageTimestamp']*0x3e8:_0x868c89[_0x4efc8e(0x6f2)]||null,'source':(0x0,w[_0x4efc8e(0x578)])(_0x868c89[_0x4efc8e(0x440)]['id']),..._0x5de79a},'messageTimestamp':_0x868c89[_0x4efc8e(0x6f2)]&&_0x868c89[_0x4efc8e(0x6f2)][_0x4efc8e(0x641)]()['length']<0xd?_0x868c89[_0x4efc8e(0x6f2)]*0x3e8:_0x868c89[_0x4efc8e(0x6f2)]||null,'owner':this[_0x4efc8e(0x921)][_0x4efc8e(0x2d1)],'source':(0x0,w['getDevice'])(_0x868c89[_0x4efc8e(0x440)]['id'])};return this[_0x4efc8e(0x755)][_0x4efc8e(0x8c0)](this[_0x4efc8e(0x474)]+'\x20('+this[_0x4efc8e(0x921)][_0x4efc8e(0x2d1)]+_0x4efc8e(0x7fe)+_0x4b18f1['key']?.[_0x4efc8e(0x788)][_0x4efc8e(0x894)](_0x4efc8e(0x2d9),'')+_0x4efc8e(0x8cf)+_0x4b18f1[_0x4efc8e(0x414)]+')'),_0x4b18f1[_0x4efc8e(0x213)]?.[_0x4efc8e(0x5b9)]&&this[_0x4efc8e(0x755)][_0x4efc8e(0x8c0)](_0x4b18f1['message_normalized']?.[_0x4efc8e(0x5b9)]),this['sendDataWebhook'](_0x4efc8e(0x3c9),_0x4b18f1),F(this[_0x4efc8e(0x474)],_0x4efc8e(0x1da),{'message':_0x4b18f1}),this[_0x4efc8e(0x68f)](this[_0x4efc8e(0x4e6)][_0x4efc8e(0x3be)](_0x4efc8e(0x216)),_0x4b18f1,_0x4efc8e(0x66a),_0x4254a9),await this[_0x4efc8e(0x3cf)][_0x4efc8e(0x6c9)][_0x4efc8e(0x2de)]([_0x4b18f1],this[_0x4efc8e(0x921)][_0x4efc8e(0x2d1)]),_0x868c89;}catch(_0x19b824){let _0x3ab7b8=_0x4efc8e(0x49f)+_0x13d4f2,_0x3abc68=_0x19b824 instanceof Error?_0x19b824[_0x4efc8e(0x6c9)]:typeof _0x19b824==_0x4efc8e(0x1b3)?JSON[_0x4efc8e(0x28d)](_0x19b824):_0x19b824,_0x4b1750=_0x3ab7b8+':\x20'+_0x3abc68;throw this[_0x4efc8e(0x755)]['error'](this['instanceName']+'\x20('+this[_0x4efc8e(0x921)]['wuid']+'):\x20'+_0x4b1750),new m(_0x4b1750);}}async['sendMessageWithTypingButtons'](_0x22b51d,_0x23ed24,_0xb9fbef){const _0x1e0ee0=a0_0x1df5a5;let _0x1937a8=this[_0x1e0ee0(0x7b3)](_0x22b51d),_0x278ade=(await this['whatsappNumber']({'numbers':[_0x1937a8]}))[0x0];if(!_0x278ade['exists']&&!(0x0,w[_0x1e0ee0(0x865)])(_0x278ade[_0x1e0ee0(0x83f)]))throw new m(_0x278ade);let _0x26fd35=(0x0,w['isJidGroup'])(_0x1937a8)?_0x1937a8:_0x278ade[_0x1e0ee0(0x83f)];if((0x0,w[_0x1e0ee0(0x865)])(_0x26fd35))try{await this[_0x1e0ee0(0x826)][_0x1e0ee0(0x6ec)](_0x26fd35);}catch{throw new m(_0x1e0ee0(0x771));}try{_0xb9fbef?.[_0x1e0ee0(0x38f)]&&(await this['client'][_0x1e0ee0(0x259)](_0x26fd35),await this[_0x1e0ee0(0x826)][_0x1e0ee0(0x8ef)](_0xb9fbef?.[_0x1e0ee0(0x745)]??'composing',_0x1937a8),await(0x0,w['delay'])(_0xb9fbef[_0x1e0ee0(0x38f)]),await this[_0x1e0ee0(0x826)][_0x1e0ee0(0x8ef)](_0x1e0ee0(0x212),_0x26fd35));let _0x5d5928=await((async()=>{const _0x5f0b8b=_0x1e0ee0;let _0x2780e0,_0x4c4260='3EB0'+(0x0,re[_0x5f0b8b(0x850)])(0x12)[_0x5f0b8b(0x641)](_0x5f0b8b(0x45f))['toUpperCase'](),_0xf1b51d=(0x0,w[_0x5f0b8b(0x739)])(_0x26fd35,_0x23ed24,{'timestamp':new Date(),'userJid':this[_0x5f0b8b(0x921)][_0x5f0b8b(0x2d1)],'messageId':_0x4c4260,'quoted':_0x2780e0}),_0x142cb1=await this[_0x5f0b8b(0x826)][_0x5f0b8b(0x719)](_0x26fd35,_0xf1b51d[_0x5f0b8b(0x6c9)],{'messageId':_0x4c4260});_0xf1b51d[_0x5f0b8b(0x440)]={'id':_0x142cb1,'remoteJid':_0x1937a8,'participant':(0x0,w['isJidUser'])(_0x1937a8)?void 0x0:_0x1937a8,'fromMe':!0x0};for(let [_0x53ebdf,_0x2eeee3]of Object[_0x5f0b8b(0x8da)](_0xf1b51d))(!_0x2eeee3||Array[_0x5f0b8b(0x4d9)](_0x2eeee3)&&_0x2eeee3['length']===0x0)&&delete _0xf1b51d[_0x53ebdf];return this['client']['ev']['emit'](_0x5f0b8b(0x286),{'messages':[_0xf1b51d],'type':_0x5f0b8b(0x5f3)}),_0xf1b51d;})()),_0x5a26d1=await this[_0x1e0ee0(0x3cf)][_0x1e0ee0(0x947)][_0x1e0ee0(0x694)]({'where':{'_id':_0x26fd35}},this[_0x1e0ee0(0x921)][_0x1e0ee0(0x2d1)]),_0x2b18da=(0x0,w[_0x1e0ee0(0x34f)])(_0x5d5928[_0x1e0ee0(0x6c9)]),_0x4a6035=(0x0,w[_0x1e0ee0(0x6c4)])(_0x2b18da),{message_normalized:_0x54dc33}=this['normalizeMessage'](_0x2b18da,_0x4a6035,null),_0x4d761b={'_id':_0x5d5928[_0x1e0ee0(0x440)]['id'],'key':_0x5d5928['key'],'pushName':_0x5d5928[_0x1e0ee0(0x91a)],'isGroup':_0x5d5928[_0x1e0ee0(0x440)][_0x1e0ee0(0x788)][_0x1e0ee0(0x237)](_0x1e0ee0(0x8ca)),'profilePictureUrl':this[_0x1e0ee0(0x921)][_0x1e0ee0(0x912)],'message':_0x2b18da,'messageType':_0x4a6035,'message_normalized':{'key':_0x5d5928['key'],'pushName':_0x5d5928['pushName'],'messageTimestamp':_0x5d5928[_0x1e0ee0(0x6f2)]&&_0x5d5928['messageTimestamp'][_0x1e0ee0(0x641)]()[_0x1e0ee0(0x303)]<0xd?_0x5d5928[_0x1e0ee0(0x6f2)]*0x3e8:_0x5d5928[_0x1e0ee0(0x6f2)]||null,'source':(0x0,w[_0x1e0ee0(0x578)])(_0x5d5928[_0x1e0ee0(0x440)]['id']),..._0x54dc33},'messageTimestamp':_0x5d5928[_0x1e0ee0(0x6f2)]&&_0x5d5928[_0x1e0ee0(0x6f2)][_0x1e0ee0(0x641)]()[_0x1e0ee0(0x303)]<0xd?_0x5d5928['messageTimestamp']*0x3e8:_0x5d5928[_0x1e0ee0(0x6f2)]||null,'owner':this[_0x1e0ee0(0x921)][_0x1e0ee0(0x2d1)],'source':(0x0,w[_0x1e0ee0(0x578)])(_0x5d5928[_0x1e0ee0(0x440)]['id'])};return this['logger'][_0x1e0ee0(0x8c0)](this['instanceName']+'\x20('+this[_0x1e0ee0(0x921)][_0x1e0ee0(0x2d1)]+_0x1e0ee0(0x7fe)+_0x4d761b['key']?.['remoteJid'][_0x1e0ee0(0x894)](_0x1e0ee0(0x2d9),'')+_0x1e0ee0(0x8cf)+_0x4d761b[_0x1e0ee0(0x414)]+')'),_0x4d761b[_0x1e0ee0(0x213)]?.[_0x1e0ee0(0x5b9)]&&this[_0x1e0ee0(0x755)][_0x1e0ee0(0x8c0)](_0x4d761b[_0x1e0ee0(0x213)]?.[_0x1e0ee0(0x5b9)]),this[_0x1e0ee0(0x757)]('send.message',_0x4d761b),F(this['instanceName'],_0x1e0ee0(0x1da),{'message':_0x4d761b}),this[_0x1e0ee0(0x68f)](this[_0x1e0ee0(0x4e6)]['get'](_0x1e0ee0(0x216)),_0x4d761b,_0x1e0ee0(0x66a),_0x5a26d1),await this[_0x1e0ee0(0x3cf)][_0x1e0ee0(0x6c9)][_0x1e0ee0(0x2de)]([_0x4d761b],this[_0x1e0ee0(0x921)]['wuid']),_0x5d5928;}catch(_0x16f8c3){throw this['logger'][_0x1e0ee0(0x398)](_0x16f8c3),new m(_0x16f8c3['toString']());}}get[a0_0x1df5a5(0x915)](){const _0x56a884=a0_0x1df5a5;return this[_0x56a884(0x30c)];}async[a0_0x1df5a5(0x2ab)](_0x298788){const _0x24ca52=a0_0x1df5a5;return await this[_0x24ca52(0x25f)](_0x298788[_0x24ca52(0x737)],{'conversation':_0x298788[_0x24ca52(0x2ab)][_0x24ca52(0x5b9)]},_0x298788?.[_0x24ca52(0x666)]);}async[a0_0x1df5a5(0x1e2)](_0x166f44){const _0x9852e4=a0_0x1df5a5;if(!_0x166f44[_0x9852e4(0x62b)])throw new m('Type\x20is\x20required');if(!_0x166f44[_0x9852e4(0x620)])throw new m('Content\x20is\x20required');if(_0x166f44['allContacts']){let _0x595271=await this[_0x9852e4(0x3cf)][_0x9852e4(0x572)][_0x9852e4(0x756)]({'where':{}},this[_0x9852e4(0x921)]['wuid']);if(!_0x595271['length'])throw new m(_0x9852e4(0x703));_0x166f44[_0x9852e4(0x952)]=_0x595271[_0x9852e4(0x93c)](_0x5d0426=>_0x5d0426[_0x9852e4(0x91a)])[_0x9852e4(0x948)](_0x10d4da=>_0x10d4da['_id']);}if(!_0x166f44[_0x9852e4(0x952)]?.['length']&&!_0x166f44[_0x9852e4(0x86e)])throw new m(_0x9852e4(0x4e0));if(_0x166f44['type']===_0x9852e4(0x5b9)){if(!_0x166f44[_0x9852e4(0x3a1)])throw new m(_0x9852e4(0x7ce));if(!_0x166f44['font'])throw new m(_0x9852e4(0x644));return{'content':{'text':_0x166f44['content']},'option':{'backgroundColor':_0x166f44[_0x9852e4(0x3a1)],'font':_0x166f44[_0x9852e4(0x735)],'statusJidList':_0x166f44['statusJidList']}};}if(_0x166f44[_0x9852e4(0x62b)]===_0x9852e4(0x6aa))return{'content':{'image':{'url':_0x166f44[_0x9852e4(0x620)]},'caption':_0x166f44[_0x9852e4(0x4a2)]},'option':{'statusJidList':_0x166f44['statusJidList']}};if(_0x166f44[_0x9852e4(0x62b)]===_0x9852e4(0x207))return{'content':{'video':{'url':_0x166f44['content']},'caption':_0x166f44[_0x9852e4(0x4a2)]},'option':{'statusJidList':_0x166f44[_0x9852e4(0x952)]}};if(_0x166f44['type']===_0x9852e4(0x892)){this[_0x9852e4(0x755)]['verbose'](this[_0x9852e4(0x474)]+'\x20('+this[_0x9852e4(0x921)][_0x9852e4(0x2d1)]+_0x9852e4(0x848)),this[_0x9852e4(0x755)][_0x9852e4(0x3fb)](this[_0x9852e4(0x474)]+'\x20('+this[_0x9852e4(0x921)]['wuid']+_0x9852e4(0x4e4));let _0xdd5a96=await this['convertaudio'](_0x166f44[_0x9852e4(0x620)]);if(typeof _0xdd5a96==_0x9852e4(0x1d0)){this[_0x9852e4(0x755)][_0x9852e4(0x3fb)](this['instanceName']+'\x20('+this[_0x9852e4(0x921)][_0x9852e4(0x2d1)]+_0x9852e4(0x80d));let _0x36f621=k['readFileSync'](_0xdd5a96)['toString']('base64');return{'content':{'audio':Buffer[_0x9852e4(0x439)](_0x36f621,_0x9852e4(0x4e1)),'ptt':!0x0,'mimetype':_0x9852e4(0x79c)},'option':{'statusJidList':_0x166f44['statusJidList']}};}else throw new x(_0xdd5a96);}throw new m(_0x9852e4(0x59d));}async[a0_0x1df5a5(0x26a)](_0x31042a){const _0x9aab2b=a0_0x1df5a5;return await this[_0x9aab2b(0x25f)](_0x9aab2b(0x54c),{'status':await this[_0x9aab2b(0x1e2)](_0x31042a[_0x9aab2b(0x26a)])});}async['prepareMediaMessage'](_0x17ebfd){const _0x4f8387=a0_0x1df5a5;try{let _0x508fb3=await(0x0,w['prepareWAMessageMedia'])({[_0x17ebfd[_0x4f8387(0x52f)]]:(0x0,J[_0x4f8387(0x6ae)])(_0x17ebfd['media'])?{'url':_0x17ebfd[_0x4f8387(0x516)]}:Buffer[_0x4f8387(0x439)](_0x17ebfd['media'],'base64')},{'upload':this[_0x4f8387(0x826)][_0x4f8387(0x822)]}),_0x1f8d1a=_0x17ebfd[_0x4f8387(0x52f)]+_0x4f8387(0x69e);if(_0x17ebfd[_0x4f8387(0x52f)]==='document'&&!_0x17ebfd[_0x4f8387(0x616)]){let _0x408774=new RegExp(/.*\/(.+?)\./)[_0x4f8387(0x1cc)](_0x17ebfd[_0x4f8387(0x516)]);_0x17ebfd['fileName']=_0x408774?_0x408774[0x1]:null;}let _0x1c3bbc;return(0x0,J['isURL'])(_0x17ebfd[_0x4f8387(0x516)])?_0x1c3bbc=(await K['default']['get'](_0x17ebfd[_0x4f8387(0x516)],{'responseType':'arraybuffer'}))['headers'][_0x4f8387(0x4ae)]:_0x1c3bbc=(0x0,Oi['getMIMEType'])(_0x17ebfd[_0x4f8387(0x616)]),_0x508fb3[_0x1f8d1a][_0x4f8387(0x4a2)]=_0x17ebfd?.[_0x4f8387(0x4a2)],_0x508fb3[_0x1f8d1a][_0x4f8387(0x492)]=_0x1c3bbc,_0x508fb3[_0x1f8d1a][_0x4f8387(0x616)]=_0x17ebfd[_0x4f8387(0x616)],_0x17ebfd[_0x4f8387(0x52f)]===_0x4f8387(0x207)&&(_0x508fb3[_0x1f8d1a][_0x4f8387(0x458)]=Uint8Array[_0x4f8387(0x439)]((0x0,Fe[_0x4f8387(0x454)])((0x0,j[_0x4f8387(0x4bc)])(process[_0x4f8387(0x3ef)](),_0x4f8387(0x1bd)))),_0x508fb3[_0x1f8d1a][_0x4f8387(0x875)]=!0x1),(0x0,w[_0x4f8387(0x739)])('',{[_0x1f8d1a]:{..._0x508fb3[_0x1f8d1a]}},{'userJid':this[_0x4f8387(0x921)][_0x4f8387(0x2d1)]});}catch(_0x34b6d8){let _0x1c7269=_0x4f8387(0x5a1),_0x2c83ce=_0x34b6d8 instanceof Error?_0x34b6d8[_0x4f8387(0x6c9)]:typeof _0x34b6d8==_0x4f8387(0x1b3)?JSON['stringify'](_0x34b6d8):_0x34b6d8,_0x20e352=_0x1c7269+':\x20'+_0x2c83ce;throw this[_0x4f8387(0x755)][_0x4f8387(0x398)](this[_0x4f8387(0x474)]+'\x20('+this['instance'][_0x4f8387(0x2d1)]+_0x4f8387(0x91e)+_0x20e352),new x(_0x20e352);}}async[a0_0x1df5a5(0x269)](_0x25e031){const _0x5f2016=a0_0x1df5a5;let _0x1b283e=0x0;for(;_0x1b283e<0x5;)try{let _0x50927d=await this[_0x5f2016(0x44b)](_0x25e031[_0x5f2016(0x269)]);return await this[_0x5f2016(0x25f)](_0x25e031['number'],{..._0x50927d['message']},_0x25e031?.[_0x5f2016(0x666)]);}catch(_0x4885a0){if(_0x1b283e++,_0x4885a0 instanceof Error&&_0x4885a0[_0x5f2016(0x6c9)]==='Connection\x20Closed'){if(_0x1b283e>=0x5)throw new m(_0x5f2016(0x2c5)+_0x4885a0[_0x5f2016(0x6c9)]);this[_0x5f2016(0x755)][_0x5f2016(0x8c0)](_0x5f2016(0x3d1)+_0x1b283e+'/5\x20de\x20preparar\x20mídia\x20falhou:\x20'+_0x4885a0[_0x5f2016(0x6c9)]+_0x5f2016(0x372)+0x1388/0x3e8+'\x20segundos...'),await new Promise(_0x4bab4f=>setTimeout(_0x4bab4f,0x1388));}else throw new m(_0x4885a0[_0x5f2016(0x6c9)]);}}async['convertToWebP'](_0x6cc9d9,_0x5792cc){const _0x502298=a0_0x1df5a5;try{this[_0x502298(0x755)][_0x502298(0x3fb)](this[_0x502298(0x474)]+'\x20('+this[_0x502298(0x921)][_0x502298(0x2d1)]+_0x502298(0x236));let _0x1605aa,_0x424a87=_0x5792cc+'-'+new Date()[_0x502298(0x6d7)]();this[_0x502298(0x755)][_0x502298(0x3fb)](this['instanceName']+'\x20('+this['instance'][_0x502298(0x2d1)]+_0x502298(0x3d7)+_0x424a87);let _0x4344b5=''+(0x0,j[_0x502298(0x4bc)])(this['storePath'],_0x424a87+_0x502298(0x711));if(this[_0x502298(0x755)][_0x502298(0x3fb)](this[_0x502298(0x474)]+'\x20('+this[_0x502298(0x921)][_0x502298(0x2d1)]+_0x502298(0x540)+_0x4344b5),(0x0,J[_0x502298(0x419)])(_0x6cc9d9)){this['logger'][_0x502298(0x3fb)](this[_0x502298(0x474)]+'\x20('+this[_0x502298(0x921)][_0x502298(0x2d1)]+_0x502298(0x40e));let _0x58e283=_0x6cc9d9[_0x502298(0x894)](/^data:image\/(jpeg|png|gif);base64,/,''),_0x3c9c69=Buffer['from'](_0x58e283,'base64');_0x1605aa=''+(0x0,j[_0x502298(0x4bc)])(this[_0x502298(0x813)],_0x502298(0x8fa)+_0x424a87+_0x502298(0x88c)),this['logger'][_0x502298(0x3fb)](this[_0x502298(0x474)]+'\x20('+this['instance'][_0x502298(0x2d1)]+'):Image\x20path:\x20'+_0x1605aa),await(0x0,Ut[_0x502298(0x686)])(_0x3c9c69)[_0x502298(0x81a)](_0x1605aa),this[_0x502298(0x755)][_0x502298(0x3fb)](this[_0x502298(0x474)]+'\x20('+this[_0x502298(0x921)][_0x502298(0x2d1)]+_0x502298(0x7e4));}else{this['logger'][_0x502298(0x3fb)](this[_0x502298(0x474)]+'\x20('+this['instance']['wuid']+_0x502298(0x32c));let _0xb535b4=new Date()[_0x502298(0x6d7)](),_0x79dd12=_0x6cc9d9+'?timestamp='+_0xb535b4;this[_0x502298(0x755)][_0x502298(0x3fb)](this[_0x502298(0x474)]+'\x20('+this[_0x502298(0x921)][_0x502298(0x2d1)]+_0x502298(0x797)+_0x79dd12);let _0x33e281=await K['default']['get'](_0x79dd12,{'responseType':_0x502298(0x325)});this[_0x502298(0x755)][_0x502298(0x3fb)](this[_0x502298(0x474)]+'\x20('+this[_0x502298(0x921)][_0x502298(0x2d1)]+_0x502298(0x407));let _0x291ca1=Buffer[_0x502298(0x439)](_0x33e281[_0x502298(0x561)],_0x502298(0x643));_0x1605aa=''+(0x0,j['join'])(this[_0x502298(0x813)],_0x502298(0x8fa)+_0x424a87+_0x502298(0x88c)),this[_0x502298(0x755)][_0x502298(0x3fb)](this[_0x502298(0x474)]+'\x20('+this[_0x502298(0x921)][_0x502298(0x2d1)]+_0x502298(0x80c)+_0x1605aa),await(0x0,Ut[_0x502298(0x686)])(_0x291ca1)['toFile'](_0x1605aa),this[_0x502298(0x755)]['verbose'](this[_0x502298(0x474)]+'\x20('+this[_0x502298(0x921)][_0x502298(0x2d1)]+_0x502298(0x7e4));}return await(0x0,Ut['default'])(_0x1605aa)[_0x502298(0x6ed)]()[_0x502298(0x81a)](_0x4344b5),this[_0x502298(0x755)][_0x502298(0x3fb)](this[_0x502298(0x474)]+'\x20('+this[_0x502298(0x921)][_0x502298(0x2d1)]+_0x502298(0x638)),k['unlinkSync'](_0x1605aa),this[_0x502298(0x755)][_0x502298(0x3fb)](this['instanceName']+'\x20('+this[_0x502298(0x921)][_0x502298(0x2d1)]+'):Temp\x20image\x20deleted'),_0x4344b5;}catch(_0x27a7f8){let _0xe0bb17=_0x502298(0x938),_0x283b88=_0x27a7f8 instanceof Error?_0x27a7f8['message']:typeof _0x27a7f8==_0x502298(0x1b3)?JSON[_0x502298(0x28d)](_0x27a7f8):_0x27a7f8,_0x324189=_0xe0bb17+':\x20'+_0x283b88;this[_0x502298(0x755)][_0x502298(0x398)](this[_0x502298(0x474)]+'\x20('+this[_0x502298(0x921)]['wuid']+_0x502298(0x91e)+_0x324189);}}async[a0_0x1df5a5(0x1c8)](_0x5c5db7){const _0xe638da=a0_0x1df5a5;let _0xcf3dfc=await this[_0xe638da(0x249)](_0x5c5db7[_0xe638da(0x4bb)][_0xe638da(0x6aa)],_0x5c5db7[_0xe638da(0x737)]),_0x59ca15=await this[_0xe638da(0x25f)](_0x5c5db7[_0xe638da(0x737)],{'sticker':{'url':_0xcf3dfc}},_0x5c5db7?.[_0xe638da(0x666)]);return k[_0xe638da(0x43b)](_0xcf3dfc),this[_0xe638da(0x755)]['verbose'](this[_0xe638da(0x474)]+'\x20('+this[_0xe638da(0x921)]['wuid']+_0xe638da(0x241)),_0x59ca15;}async[a0_0x1df5a5(0x48a)](_0x34bb7e){const _0x5e2eb2=a0_0x1df5a5;if(this[_0x5e2eb2(0x755)]['verbose'](this[_0x5e2eb2(0x474)]+'\x20('+this[_0x5e2eb2(0x921)]['wuid']+_0x5e2eb2(0x683)),!_0x34bb7e[_0x5e2eb2(0x666)]?.[_0x5e2eb2(0x52d)]&&_0x34bb7e[_0x5e2eb2(0x666)]?.[_0x5e2eb2(0x52d)]!==!0x1&&(_0x34bb7e[_0x5e2eb2(0x666)][_0x5e2eb2(0x52d)]=!0x0),_0x34bb7e[_0x5e2eb2(0x666)]?.['encoding']){let _0xac4e0e=await this['convertaudio'](_0x34bb7e[_0x5e2eb2(0x48d)][_0x5e2eb2(0x892)]);if(typeof _0xac4e0e=='string'){let _0x1f1e54=k['readFileSync'](_0xac4e0e)[_0x5e2eb2(0x641)]('base64');return this[_0x5e2eb2(0x25f)](_0x34bb7e[_0x5e2eb2(0x737)],{'audio':Buffer[_0x5e2eb2(0x439)](_0x1f1e54,_0x5e2eb2(0x4e1)),'ptt':!0x0,'mimetype':_0x5e2eb2(0x723)},{'presence':_0x5e2eb2(0x46b),'delay':_0x34bb7e?.[_0x5e2eb2(0x666)]?.['delay']});}else throw new x(_0xac4e0e);}return await this[_0x5e2eb2(0x25f)](_0x34bb7e[_0x5e2eb2(0x737)],{'audio':(0x0,J[_0x5e2eb2(0x6ae)])(_0x34bb7e[_0x5e2eb2(0x48d)]['audio'])?{'url':_0x34bb7e[_0x5e2eb2(0x48d)][_0x5e2eb2(0x892)]}:Buffer['from'](_0x34bb7e[_0x5e2eb2(0x48d)]['audio'],'base64'),'ptt':!0x0,'mimetype':'audio/ogg;\x20codecs=opus'},{'presence':_0x5e2eb2(0x46b),'delay':_0x34bb7e?.[_0x5e2eb2(0x666)]?.[_0x5e2eb2(0x38f)]});}async[a0_0x1df5a5(0x79e)](_0xeb9e95){const _0x3b2435=a0_0x1df5a5;this[_0x3b2435(0x755)][_0x3b2435(0x3fb)](this[_0x3b2435(0x474)]+'\x20('+this[_0x3b2435(0x921)][_0x3b2435(0x2d1)]+'):Processing\x20audio');let _0x62ac40=(0x0,J[_0x3b2435(0x6ae)])(_0xeb9e95)?(0x0,re[_0x3b2435(0x75c)])(_0x3b2435(0x40f))[_0x3b2435(0x62e)](_0xeb9e95)[_0x3b2435(0x5f5)]('hex'):(0x0,re[_0x3b2435(0x75c)])(_0x3b2435(0x40f))[_0x3b2435(0x62e)](_0xeb9e95)[_0x3b2435(0x5f5)](_0x3b2435(0x45f)),_0x532755=''+(0x0,j[_0x3b2435(0x4bc)])(this[_0x3b2435(0x813)],_0x62ac40+_0x3b2435(0x806));if(k[_0x3b2435(0x5a6)](_0x532755))return this[_0x3b2435(0x755)][_0x3b2435(0x3fb)](this[_0x3b2435(0x474)]+'\x20('+this['instance']['wuid']+_0x3b2435(0x8c3)),_0x532755;let _0x38b858=''+(0x0,j[_0x3b2435(0x4bc)])(this[_0x3b2435(0x813)],_0x3b2435(0x8fa)+(0x0,Q['v4'])()+'.mp3');if((0x0,J[_0x3b2435(0x6ae)])(_0xeb9e95)){let _0x10a96e=new Date()['getTime'](),_0x4b5264=_0xeb9e95+_0x3b2435(0x818)+_0x10a96e,_0x5cd4e1=await K[_0x3b2435(0x686)][_0x3b2435(0x3be)](_0x4b5264,{'responseType':_0x3b2435(0x325)});k['writeFileSync'](_0x38b858,_0x5cd4e1[_0x3b2435(0x561)]);}else{let _0xe0fe4b=Buffer[_0x3b2435(0x439)](_0xeb9e95,_0x3b2435(0x4e1));k[_0x3b2435(0x4a5)](_0x38b858,_0xe0fe4b);}return new Promise((_0x3ac59e,_0x1ffa74)=>{const _0xa1a630=_0x3b2435;(0x0,Ue[_0xa1a630(0x1cc)])(Ds[_0xa1a630(0x686)][_0xa1a630(0x2e2)]+_0xa1a630(0x385)+_0x38b858+_0xa1a630(0x72d)+_0x532755+'\x20-y',_0x1f11f6=>{const _0x1f729=_0xa1a630;if(k[_0x1f729(0x43b)](_0x38b858),_0x1f11f6){this[_0x1f729(0x755)]['verbose'](this[_0x1f729(0x474)]+'\x20('+this['instance'][_0x1f729(0x2d1)]+_0x1f729(0x20a)),_0x1ffa74(_0x1f11f6);return;}this[_0x1f729(0x755)][_0x1f729(0x3fb)](this['instanceName']+'\x20('+this[_0x1f729(0x921)][_0x1f729(0x2d1)]+_0x1f729(0x707)),_0x3ac59e(_0x532755);});});}async[a0_0x1df5a5(0x798)](_0x318f25){const _0x5b1dbe=a0_0x1df5a5;this[_0x5b1dbe(0x755)]['verbose'](this['instanceName']+'\x20('+this[_0x5b1dbe(0x921)][_0x5b1dbe(0x2d1)]+'):Processing\x20audio');let _0x2b839f=(0x0,re['createHash'])('sha256')[_0x5b1dbe(0x62e)](_0x318f25)[_0x5b1dbe(0x5f5)](_0x5b1dbe(0x45f)),_0x401f92=''+(0x0,j[_0x5b1dbe(0x4bc)])(this[_0x5b1dbe(0x813)],_0x2b839f+_0x5b1dbe(0x2cd));if(k['existsSync'](_0x401f92))return this['logger'][_0x5b1dbe(0x3fb)](this[_0x5b1dbe(0x474)]+'\x20('+this['instance'][_0x5b1dbe(0x2d1)]+_0x5b1dbe(0x8c3)),j[_0x5b1dbe(0x686)][_0x5b1dbe(0x808)](_0x401f92);let _0x128a73=''+(0x0,j[_0x5b1dbe(0x4bc)])(this[_0x5b1dbe(0x813)],'temp-'+_0x2b839f+'.ogg');if((0x0,J['isURL'])(_0x318f25)){let _0x242b25=new Date()[_0x5b1dbe(0x6d7)](),_0x379837=_0x318f25+_0x5b1dbe(0x818)+_0x242b25,_0x5119ca=await K[_0x5b1dbe(0x686)][_0x5b1dbe(0x3be)](_0x379837,{'responseType':_0x5b1dbe(0x325)});k[_0x5b1dbe(0x4a5)](_0x128a73,_0x5119ca[_0x5b1dbe(0x561)]);}else{let _0x1354b4=Buffer['from'](_0x318f25,'base64');k[_0x5b1dbe(0x4a5)](_0x128a73,_0x1354b4);}return new Promise((_0x47127a,_0x5241bf)=>{const _0x19f060=_0x5b1dbe;(0x0,Ue['exec'])(Ds[_0x19f060(0x686)][_0x19f060(0x2e2)]+'\x20-i\x20'+_0x128a73+_0x19f060(0x922)+_0x401f92+_0x19f060(0x1f8),_0x34f298=>{const _0x5150f4=_0x19f060;if(k[_0x5150f4(0x43b)](_0x128a73),_0x34f298){this[_0x5150f4(0x755)]['verbose'](this[_0x5150f4(0x474)]+'\x20('+this[_0x5150f4(0x921)][_0x5150f4(0x2d1)]+'):Error\x20in\x20converting\x20audio'),_0x5241bf(_0x34f298);return;}this['logger'][_0x5150f4(0x3fb)](this[_0x5150f4(0x474)]+'\x20('+this[_0x5150f4(0x921)][_0x5150f4(0x2d1)]+_0x5150f4(0x707)),_0x47127a(j[_0x5150f4(0x686)]['basename'](_0x401f92));});});}async['buttonMessage'](_0x5d5860){const _0x1d464b=a0_0x1df5a5;console[_0x1d464b(0x485)](_0x1d464b(0x3d8),_0x5d5860);let _0x50936a;try{_0x5d5860['buttonMessage']?.['thumbnailUrl']&&(_0x50936a=await this[_0x1d464b(0x44b)]({'mediatype':_0x1d464b(0x6aa),'media':_0x5d5860[_0x1d464b(0x442)][_0x1d464b(0x883)]}));}catch(_0x215888){throw console[_0x1d464b(0x398)](_0x1d464b(0x585),_0x215888),new Error(_0x1d464b(0x5c3));}try{let _0x488218={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':'*Teste\x20de\x20Título*\x0a\x0aDescrição\x20de\x20Teste\x0a'},'footer':{'text':_0x1d464b(0x2a3)},'header':((()=>{const _0x35160f=_0x1d464b;if(_0x50936a?.[_0x35160f(0x6c9)]?.['imageMessage'])return{'hasMediaAttachment':!!_0x50936a['message']['imageMessage'],'imageMessage':_0x50936a[_0x35160f(0x6c9)][_0x35160f(0x64e)]};})()),'nativeFlowMessage':{'buttons':[{'name':_0x1d464b(0x5c0),'buttonParamsJson':JSON[_0x1d464b(0x28d)]({'display_text':_0x1d464b(0x400),'id':'1'})},{'name':_0x1d464b(0x5c0),'buttonParamsJson':JSON['stringify']({'display_text':_0x1d464b(0x52b),'id':'2'})}],'messageParamsJson':JSON[_0x1d464b(0x28d)]({'from':_0x1d464b(0x264),'templateId':_0x1d464b(0x300)+(0x0,re[_0x1d464b(0x850)])(0x12)[_0x1d464b(0x641)]('hex')[_0x1d464b(0x3e4)]()})}}}}};return await this[_0x1d464b(0x239)](_0x5d5860[_0x1d464b(0x737)],_0x488218,_0x5d5860?.['options']);}catch(_0x55e47f){throw console[_0x1d464b(0x398)]('Error\x20in\x20buttonsMessage\x20function:',_0x55e47f),new Error(_0x1d464b(0x4dc));}}async[a0_0x1df5a5(0x87c)](_0x15de23){const _0xa2c75b=a0_0x1df5a5;return await this['sendMessageWithRetry'](_0x15de23[_0xa2c75b(0x737)],{'locationMessage':{'degreesLatitude':_0x15de23[_0xa2c75b(0x87c)][_0xa2c75b(0x355)],'degreesLongitude':_0x15de23[_0xa2c75b(0x87c)][_0xa2c75b(0x586)],'name':_0x15de23['locationMessage']?.[_0xa2c75b(0x5d3)],'address':_0x15de23['locationMessage']?.[_0xa2c75b(0x37d)]}},_0x15de23?.[_0xa2c75b(0x666)]);}async[a0_0x1df5a5(0x5ea)](_0x23ae07){const _0x22f6b6=a0_0x1df5a5;let _0x4f0260={},_0x193e8e=async _0x80f6d8=>{const _0x5eb8a5=a0_0x5a64;let _0x28a49a=_0x5eb8a5(0x2a1)+_0x80f6d8['fullName']+_0x5eb8a5(0x3b9)+_0x80f6d8[_0x5eb8a5(0x3f0)]+'\x0a';_0x80f6d8[_0x5eb8a5(0x71f)]&&(_0x28a49a+=_0x5eb8a5(0x691)+_0x80f6d8[_0x5eb8a5(0x71f)]+';\x0a'),_0x80f6d8[_0x5eb8a5(0x6bc)]&&(_0x28a49a+='EMAIL:'+_0x80f6d8[_0x5eb8a5(0x6bc)]+'\x0a'),_0x80f6d8[_0x5eb8a5(0x376)]&&(_0x28a49a+=_0x5eb8a5(0x856)+_0x80f6d8[_0x5eb8a5(0x376)]+'\x0a');let _0x1f80ea='',_0x4401a9=0x1;if(_0x80f6d8[_0x5eb8a5(0x67f)]){let _0x4dbdaa=_0x80f6d8[_0x5eb8a5(0x67f)][_0x5eb8a5(0x709)]('|');for(let _0x4929bb of _0x4dbdaa){let _0x38c9d2=await this['whatsappNumber']({'numbers':[_0x4929bb]}),_0xcc6020=(_0x38c9d2['length']>0x0?_0x38c9d2[0x0][_0x5eb8a5(0x83f)]:this[_0x5eb8a5(0x7b3)](_0x4929bb))[_0x5eb8a5(0x894)]('@s.whatsapp.net','');_0x1f80ea+=_0x5eb8a5(0x202)+_0x4401a9+_0x5eb8a5(0x6e5)+_0xcc6020+':'+_0x4929bb+_0x5eb8a5(0x8cd)+_0x4401a9+_0x5eb8a5(0x435),_0x4401a9++;}}return _0x28a49a+=_0x1f80ea+_0x5eb8a5(0x366),_0x28a49a;};return _0x23ae07[_0x22f6b6(0x5ea)]['length']===0x1?_0x4f0260[_0x22f6b6(0x5ea)]={'displayName':_0x23ae07[_0x22f6b6(0x5ea)][0x0]['fullName'],'vcard':await _0x193e8e(_0x23ae07[_0x22f6b6(0x5ea)][0x0])}:_0x4f0260[_0x22f6b6(0x8f8)]={'displayName':_0x23ae07[_0x22f6b6(0x5ea)]['length']+_0x22f6b6(0x430),'contacts':await Promise[_0x22f6b6(0x75e)](_0x23ae07[_0x22f6b6(0x5ea)]['map'](async _0xc057a5=>({'displayName':_0xc057a5['fullName'],'vcard':await _0x193e8e(_0xc057a5)})))},await this[_0x22f6b6(0x25f)](_0x23ae07[_0x22f6b6(0x737)],{..._0x4f0260},_0x23ae07?.[_0x22f6b6(0x666)]);}async['reactionMessage'](_0x2b3cb9){const _0x489130=a0_0x1df5a5;return await this['sendMessageWithRetry'](_0x2b3cb9['reactionMessage'][_0x489130(0x440)]['remoteJid'],{'reactionMessage':{'key':_0x2b3cb9[_0x489130(0x28b)][_0x489130(0x440)],'text':_0x2b3cb9[_0x489130(0x28b)][_0x489130(0x3f6)]}});}async[a0_0x1df5a5(0x493)](_0x2c0bd3){const _0x5b0519=a0_0x1df5a5;let _0x3eb1ce=[];for await(let _0x40b8eb of _0x2c0bd3[_0x5b0519(0x560)]){let _0x454cac=this[_0x5b0519(0x7b3)](_0x40b8eb),_0x42ca8b=!0x1;try{if((0x0,w['isJidGroup'])(_0x454cac)){let _0x3feee9=(await this['repository'][_0x5b0519(0x947)][_0x5b0519(0x694)]({'where':{'_id':_0x454cac}},this[_0x5b0519(0x921)][_0x5b0519(0x2d1)]))['groupdata'];_0x3feee9?(_0x42ca8b=!0x0,_0x3eb1ce[_0x5b0519(0x6cd)](new le(_0x3feee9['id'],_0x42ca8b,_0x3feee9?.[_0x5b0519(0x4af)]))):(_0x3feee9=await this['findGroup']({'groupJid':_0x454cac},_0x5b0519(0x397)),_0x3eb1ce[_0x5b0519(0x6cd)](new le(_0x3feee9['id'],!!_0x3feee9?.['id'],_0x3feee9?.[_0x5b0519(0x4af)])));}else{if(_0x454cac[_0x5b0519(0x5f2)](_0x5b0519(0x688)))_0x3eb1ce[_0x5b0519(0x6cd)](new le(_0x454cac,!0x0));else{let _0x182c16=(await this['client'][_0x5b0519(0x2ec)](_0x454cac))[0x0];_0x3eb1ce[_0x5b0519(0x6cd)](new le(_0x182c16[_0x5b0519(0x83f)],_0x182c16[_0x5b0519(0x3bc)]));}}}catch{(0x0,w[_0x5b0519(0x865)])(_0x454cac)||await this[_0x5b0519(0x7d5)](_0x454cac),_0x3eb1ce[_0x5b0519(0x6cd)](new le(_0x40b8eb,!0x1));}}return _0x3eb1ce;}async['deleteImportedChat'](_0x53431b){const _0x25c804=a0_0x1df5a5;try{await this[_0x25c804(0x3cf)]['chat'][_0x25c804(0x694)]({'where':{'_id':_0x53431b,'imported':!0x0}},this[_0x25c804(0x921)][_0x25c804(0x2d1)])&&(await this[_0x25c804(0x3cf)][_0x25c804(0x947)][_0x25c804(0x55f)](_0x53431b,this[_0x25c804(0x921)][_0x25c804(0x2d1)]),this[_0x25c804(0x755)]['info'](_0x25c804(0x8ea)+_0x53431b+'\x20foi\x20removido\x20por\x20não\x20ser\x20válido.'));}catch(_0x2a4093){let _0x54ec12=_0x25c804(0x35b),_0x3e03af=_0x2a4093 instanceof Error?_0x2a4093[_0x25c804(0x6c9)]:typeof _0x2a4093=='object'?JSON[_0x25c804(0x28d)](_0x2a4093):_0x2a4093,_0x589c0e=_0x54ec12+':\x20'+_0x3e03af;this['logger']['error'](this[_0x25c804(0x474)]+'\x20('+this[_0x25c804(0x921)]['wuid']+'):\x20'+_0x589c0e);}}async['markMessageAsRead'](_0xd3876d){const _0x350f22=a0_0x1df5a5;try{let _0x1e38de=_0xd3876d['readMessages']['filter'](_0x2097c0=>(0x0,w[_0x350f22(0x865)])(_0x2097c0[_0x350f22(0x788)])||(0x0,w['isJidUser'])(_0x2097c0['remoteJid']))['map'](_0xded874=>({'remoteJid':_0xded874[_0x350f22(0x788)],'fromMe':_0xded874[_0x350f22(0x89a)],'id':_0xded874['id']}));await this[_0x350f22(0x826)][_0x350f22(0x502)](_0x1e38de);let _0x344655=_0x1e38de['map'](_0x29e05d=>this['updateMessage'](_0x29e05d,{'status':_0x350f22(0x307),'owner':this[_0x350f22(0x921)][_0x350f22(0x2d1)]})),_0x206943=_0x1e38de[_0x350f22(0x948)](_0x20feaa=>this['repository']['chat'][_0x350f22(0x66e)]({'where':{'_id':_0x20feaa[_0x350f22(0x788)]}},{'unreadcount':0x0},this[_0x350f22(0x921)][_0x350f22(0x2d1)])),[_0x2f1361,_0x5377a6]=await Promise['all']([Promise[_0x350f22(0x75e)](_0x344655),Promise['all'](_0x206943)]);return _0x5377a6[_0x350f22(0x93c)](_0x43c7d0=>_0x43c7d0!==null)[_0x350f22(0x504)](_0x12c159=>{const _0x2c3cb5=_0x350f22;F(this[_0x2c3cb5(0x474)],'chats',{'chat':_0x12c159});}),{'message':_0x350f22(0x38c),'read':'success'};}catch(_0x3051ae){let _0x2a6b11=_0x350f22(0x546),_0x200489=_0x3051ae instanceof Error?_0x3051ae[_0x350f22(0x6c9)]:typeof _0x3051ae=='object'?JSON[_0x350f22(0x28d)](_0x3051ae):_0x3051ae,_0x33b78e=_0x2a6b11+':\x20'+_0x200489;throw this[_0x350f22(0x755)][_0x350f22(0x398)](this['instanceName']+'\x20('+this[_0x350f22(0x921)][_0x350f22(0x2d1)]+_0x350f22(0x91e)+_0x33b78e),new x(_0x33b78e);}}async['getLastMessage'](_0x22fd02){const _0x5402b8=a0_0x1df5a5;let _0x401ef6={'where':{'key':{'remoteJid':_0x22fd02}},'limit':0x1},_0x4515d8=await this['fetchMessages'](_0x401ef6);return _0x4515d8||(this[_0x5402b8(0x755)]['error'](_0x5402b8(0x73e)+_0x22fd02),null);}async[a0_0x1df5a5(0x754)](_0x44d7c3){const _0xd7c49f=a0_0x1df5a5;this[_0xd7c49f(0x755)][_0xd7c49f(0x3fb)](this[_0xd7c49f(0x474)]+'\x20('+this[_0xd7c49f(0x921)][_0xd7c49f(0x2d1)]+_0xd7c49f(0x3f5));try{let _0x4e5402=_0x44d7c3['lastMessage'],_0x1a0ef6=_0x44d7c3[_0xd7c49f(0x947)];if(!_0x4e5402&&_0x1a0ef6?_0x4e5402=await this['getLastMessage'](_0x1a0ef6):(_0x4e5402=_0x44d7c3['lastMessage'],_0x4e5402[_0xd7c49f(0x6f2)]=_0x4e5402?.['messageTimestamp']??Date[_0xd7c49f(0x78f)](),_0x1a0ef6=_0x4e5402?.[_0xd7c49f(0x440)]?.[_0xd7c49f(0x788)]),!_0x4e5402||Object[_0xd7c49f(0x326)](_0x4e5402)['length']===0x0)throw new U(_0xd7c49f(0x45b));this[_0xd7c49f(0x755)][_0xd7c49f(0x3fb)](this['instanceName']+'\x20('+this[_0xd7c49f(0x921)][_0xd7c49f(0x2d1)]+_0xd7c49f(0x897)+_0x1a0ef6);try{await this[_0xd7c49f(0x826)][_0xd7c49f(0x6b3)]({'archive':_0x44d7c3['archive'],'lastMessages':[_0x4e5402]},this[_0xd7c49f(0x7b3)](_0x1a0ef6));}catch(_0x3f3ad1){let _0x252575=_0xd7c49f(0x23b)+_0x1a0ef6,_0x2b4e9f=_0x3f3ad1 instanceof Error?_0x3f3ad1[_0xd7c49f(0x6c9)]:typeof _0x3f3ad1=='object'?JSON[_0xd7c49f(0x28d)](_0x3f3ad1):_0x3f3ad1,_0x34e9c8=_0x252575+':\x20'+_0x2b4e9f;this[_0xd7c49f(0x755)][_0xd7c49f(0x398)](this[_0xd7c49f(0x474)]+'\x20('+this[_0xd7c49f(0x921)][_0xd7c49f(0x2d1)]+'):\x20'+_0x34e9c8);}this[_0xd7c49f(0x755)][_0xd7c49f(0x3fb)](this[_0xd7c49f(0x474)]+'\x20('+this['instance'][_0xd7c49f(0x2d1)]+_0xd7c49f(0x8ec)+_0x1a0ef6);let _0x3fda1f=await this[_0xd7c49f(0x3cf)][_0xd7c49f(0x947)][_0xd7c49f(0x66e)]({'where':{'_id':_0x4e5402?.[_0xd7c49f(0x440)]?.[_0xd7c49f(0x788)]}},{'archived':_0x44d7c3[_0xd7c49f(0x344)]},this['instance'][_0xd7c49f(0x2d1)]);return _0x3fda1f?(this[_0xd7c49f(0x755)][_0xd7c49f(0x3fb)](this[_0xd7c49f(0x474)]+'\x20('+this[_0xd7c49f(0x921)]['wuid']+_0xd7c49f(0x3e9)+JSON[_0xd7c49f(0x28d)](_0x3fda1f)),F(this[_0xd7c49f(0x474)],'chats',{'chat':_0x3fda1f})):this[_0xd7c49f(0x755)][_0xd7c49f(0x398)](this['instanceName']+'\x20('+this[_0xd7c49f(0x921)][_0xd7c49f(0x2d1)]+_0xd7c49f(0x603)+_0x1a0ef6),{'chatId':_0x1a0ef6,'archived':_0x44d7c3[_0xd7c49f(0x344)]};}catch(_0x2d9724){let _0x182946=_0xd7c49f(0x5a9),_0x8679a8=_0x2d9724 instanceof Error?_0x2d9724[_0xd7c49f(0x6c9)]:typeof _0x2d9724=='object'?JSON[_0xd7c49f(0x28d)](_0x2d9724):_0x2d9724,_0x74ed03=_0x182946+':\x20'+_0x8679a8;throw this[_0xd7c49f(0x755)][_0xd7c49f(0x398)](this['instanceName']+'\x20('+this[_0xd7c49f(0x921)]['wuid']+_0xd7c49f(0x91e)+_0x74ed03),new x(_0x74ed03);}}async['deleteChat'](_0x56da89){const _0x511f52=a0_0x1df5a5;this[_0x511f52(0x755)]['verbose'](this[_0x511f52(0x474)]+'\x20('+this['instance'][_0x511f52(0x2d1)]+'):Delete\x20chat');try{let _0x270691=await this[_0x511f52(0x5f1)](_0x56da89);if(!_0x270691||Object[_0x511f52(0x326)](_0x270691)[_0x511f52(0x303)]===0x0)throw new U(_0x511f52(0x45b));let _0x5e72d3=_0x270691[0x0];this[_0x511f52(0x755)][_0x511f52(0x3fb)](this[_0x511f52(0x474)]+'\x20('+this[_0x511f52(0x921)][_0x511f52(0x2d1)]+_0x511f52(0x24d)+_0x56da89);try{await this[_0x511f52(0x826)]['chatModify']({'delete':!0x0,'lastMessages':[{'key':_0x5e72d3['key'],'messageTimestamp':_0x5e72d3[_0x511f52(0x6f2)]}]},this[_0x511f52(0x7b3)](_0x56da89));}catch(_0x5cb328){this[_0x511f52(0x755)]['error'](_0x511f52(0x23b)+_0x56da89+':\x20'+_0x5cb328[_0x511f52(0x641)]());}this[_0x511f52(0x755)][_0x511f52(0x3fb)](this[_0x511f52(0x474)]+'\x20('+this[_0x511f52(0x921)][_0x511f52(0x2d1)]+_0x511f52(0x8ec)+_0x56da89);return;}catch(_0x47dc81){throw this['logger'][_0x511f52(0x398)](this['instanceName']+'\x20('+this[_0x511f52(0x921)][_0x511f52(0x2d1)]+_0x511f52(0x296)+_0x47dc81['toString']()),new x({'archived':!0x1,'message':[_0x511f52(0x312),_0x47dc81[_0x511f52(0x641)]()]});}}async[a0_0x1df5a5(0x56f)](_0x397e2a){const _0x5c8c45=a0_0x1df5a5;try{let _0x54db92=await this[_0x5c8c45(0x826)][_0x5c8c45(0x7d4)](_0x397e2a['remoteJid'],{'delete':_0x397e2a});try{let _0x1dfc2b=await this[_0x5c8c45(0x859)](_0x397e2a,{'status':_0x5c8c45(0x953),'owner':this['instance'][_0x5c8c45(0x2d1)]});this[_0x5c8c45(0x755)][_0x5c8c45(0x3fb)](this[_0x5c8c45(0x474)]+'\x20('+this[_0x5c8c45(0x921)]['wuid']+'):\x20updateResult:'+_0x1dfc2b);}catch(_0x1f2fde){this['logger'][_0x5c8c45(0x398)]('Error\x20updating\x20message\x20status:'+_0x1f2fde);}return _0x54db92;}catch(_0x3f2365){throw new x('Error\x20while\x20deleting\x20message\x20for\x20everyone',_0x3f2365?.['toString']());}}async[a0_0x1df5a5(0x32f)](_0x5453da){const _0x51156c=a0_0x1df5a5;try{let _0x210662=_0x5453da?.[_0x51156c(0x6c9)]?_0x5453da:await this['getMessage'](_0x5453da[_0x51156c(0x440)],!0x0);for(let _0x2d1453 of Na)_0x210662[_0x51156c(0x6c9)][_0x2d1453]&&(_0x210662[_0x51156c(0x6c9)]=_0x210662[_0x51156c(0x6c9)][_0x2d1453][_0x51156c(0x6c9)]);let _0x8317cd,_0x210607;for(let _0x4b826c of Ea)if(_0x8317cd=_0x210662[_0x51156c(0x6c9)][_0x4b826c],_0x8317cd){_0x210607=_0x4b826c;break;}if(!_0x8317cd)throw _0x51156c(0x8c4);typeof _0x8317cd[_0x51156c(0x52c)]==_0x51156c(0x1b3)&&(_0x210662[_0x51156c(0x6c9)]=JSON['parse'](JSON[_0x51156c(0x28d)](_0x210662[_0x51156c(0x6c9)])));let _0xce7f6e=await(0x0,w['downloadMediaMessage'])({'key':_0x210662?.['key'],'message':_0x210662?.['message']},'buffer',{},{'logger':(0x0,Ft['default'])({'level':_0x51156c(0x80f)}),'reuploadRequest':this[_0x51156c(0x826)][_0x51156c(0x210)]});if(!(_0xce7f6e instanceof Buffer))throw new Error(_0x51156c(0x617));let _0x5cc81c=this[_0x51156c(0x4e6)][_0x51156c(0x3be)](_0x51156c(0x216)),_0x4283d1,_0x19e70e;if(_0x8317cd[_0x51156c(0x616)])_0x4283d1=_0x8317cd[_0x51156c(0x616)];else{let _0x4a64ef=_0x8317cd[_0x51156c(0x492)]?.['match'](/\/(\w+)/),_0x222d0f=_0x4a64ef?_0x4a64ef[0x1]:null;if(!_0x222d0f)throw new Error(_0x51156c(0x525));_0x4283d1=(0x0,Q['v4'])()+'.'+_0x222d0f;}_0x210607==='audioMessage'?_0x19e70e=_0x51156c(0x7ac)+await this[_0x51156c(0x798)](_0xce7f6e['toString'](_0x51156c(0x4e1))):(await this[_0x51156c(0x274)](_0xce7f6e,_0x4283d1),_0x19e70e=_0x51156c(0x7ac)+_0x4283d1);let _0x232b8e=this['configService']['get'](_0x51156c(0x3f7))['URL'];if(!_0x232b8e){let _0xd2f2ee=this[_0x51156c(0x4e6)][_0x51156c(0x3be)](_0x51156c(0x223));_0x232b8e=_0x51156c(0x2c6)+(_0xd2f2ee&&_0xd2f2ee[_0x51156c(0x3d3)][_0x51156c(0x709)]('/')[0x4]);}_0x19e70e=''+_0x232b8e+_0x19e70e;let _0x1509dd=0xc*0x3c*0x3c*0x3e8,_0x2f8a86={'where':{'_id':_0x210662['key']['id']}},_0x21d096={'message_normalized.fileUrl':_0x19e70e,'message_normalized.expires_fileUrl':Date['now']()+_0x1509dd};try{let _0x5c49fb=await this[_0x51156c(0x3cf)][_0x51156c(0x6c9)][_0x51156c(0x62e)](_0x2f8a86,_0x21d096,this[_0x51156c(0x921)][_0x51156c(0x2d1)]);_0x5c49fb&&F(this['instanceName'],'messages',{'message':_0x5c49fb});}catch(_0x1851e5){let _0xe01f5c=_0x51156c(0x59e),_0x5ec614=_0x1851e5 instanceof Error?_0x1851e5[_0x51156c(0x6c9)]:typeof _0x1851e5==_0x51156c(0x1b3)?JSON[_0x51156c(0x28d)](_0x1851e5):_0x1851e5,_0x226cd6=_0xe01f5c+':\x20'+_0x5ec614;this[_0x51156c(0x755)]['error'](this[_0x51156c(0x474)]+'\x20('+this[_0x51156c(0x921)][_0x51156c(0x2d1)]+_0x51156c(0x91e)+_0x226cd6);}return{'mediaType':_0x210607,'fileName':_0x8317cd[_0x51156c(0x616)],'caption':_0x8317cd[_0x51156c(0x4a2)],'size':{'fileLength':_0x8317cd[_0x51156c(0x71a)],'height':_0x8317cd[_0x51156c(0x2f0)],'width':_0x8317cd[_0x51156c(0x41f)]},'mimetype':_0x8317cd[_0x51156c(0x492)],'base64':_0xce7f6e['toString'](_0x51156c(0x4e1)),'fileUrl':_0x19e70e,'expires_fileUrl':Date[_0x51156c(0x78f)]()+_0x1509dd};}catch(_0x3d56e3){let _0x100e47=_0x51156c(0x318),_0x6db2d4=_0x3d56e3 instanceof Error?_0x3d56e3[_0x51156c(0x6c9)]:typeof _0x3d56e3==_0x51156c(0x1b3)?JSON[_0x51156c(0x28d)](_0x3d56e3):_0x3d56e3,_0x186619=_0x100e47+':\x20'+_0x6db2d4;throw this[_0x51156c(0x755)]['error'](this[_0x51156c(0x474)]+'\x20('+this['instance'][_0x51156c(0x2d1)]+_0x51156c(0x91e)+_0x186619),new m(_0x186619);}}async[a0_0x1df5a5(0x274)](_0x30f367,_0x4320a2){const _0x27a735=a0_0x1df5a5;let _0x4dd246=j[_0x27a735(0x686)]['join'](__dirname,'downloads');k[_0x27a735(0x5a6)](_0x4dd246)||k[_0x27a735(0x31c)](_0x4dd246,{'recursive':!0x0});let _0x401637=j['default'][_0x27a735(0x4bc)](_0x4dd246,_0x4320a2);return new Promise((_0x1b0d87,_0x24b494)=>{const _0x2bb70f=_0x27a735;k[_0x2bb70f(0x593)](_0x401637,_0x30f367,_0x2e9834=>{const _0xf17f13=_0x2bb70f;_0x2e9834?(this[_0xf17f13(0x755)][_0xf17f13(0x398)]('Error\x20writing\x20file:\x20'+(_0x2e9834 instanceof Error?_0x2e9834[_0xf17f13(0x6c9)]:JSON[_0xf17f13(0x28d)](_0x2e9834,null,0x2))),_0x24b494(_0x2e9834)):(this[_0xf17f13(0x755)][_0xf17f13(0x485)](_0xf17f13(0x6b9)+_0x401637),_0x1b0d87(_0x401637));});});}async['fetchContacts'](_0x5a27c2){const _0x24fcdc=a0_0x1df5a5;return await this[_0x24fcdc(0x3cf)]['contact']['find'](_0x5a27c2,this[_0x24fcdc(0x921)]['wuid']);}async[a0_0x1df5a5(0x3b8)](){const _0x5b38e4=a0_0x1df5a5;return await this[_0x5b38e4(0x3cf)][_0x5b38e4(0x749)][_0x5b38e4(0x756)]({'where':{}},this[_0x5b38e4(0x921)][_0x5b38e4(0x2d1)]);}async[a0_0x1df5a5(0x610)](_0x31a276){const _0x4077f5=a0_0x1df5a5;return await this['repository'][_0x4077f5(0x6c9)][_0x4077f5(0x756)](_0x31a276,this['instance'][_0x4077f5(0x2d1)]);}async[a0_0x1df5a5(0x940)](){const _0x4d2706=a0_0x1df5a5;return this[_0x4d2706(0x3cf)]['chat'][_0x4d2706(0x7f8)](this['instance'][_0x4d2706(0x2d1)]),this['repository'][_0x4d2706(0x947)]['updateMissingEtiquetas'](this['instance'][_0x4d2706(0x2d1)]),this[_0x4d2706(0x3cf)][_0x4d2706(0x947)][_0x4d2706(0x70b)](this[_0x4d2706(0x921)][_0x4d2706(0x2d1)]),this[_0x4d2706(0x3cf)][_0x4d2706(0x947)][_0x4d2706(0x5f9)](this[_0x4d2706(0x921)]['wuid']),await this[_0x4d2706(0x3cf)][_0x4d2706(0x947)][_0x4d2706(0x756)]({'where':{}},this[_0x4d2706(0x921)][_0x4d2706(0x2d1)]);}async[a0_0x1df5a5(0x7ca)](_0x12ad8d){const _0x23ff1e=a0_0x1df5a5;try{if(!Array[_0x23ff1e(0x4d9)](_0x12ad8d)||_0x12ad8d[_0x23ff1e(0x303)]===0x0)throw new Error('Input\x20deve\x20ser\x20um\x20array\x20não\x20vazio\x20de\x20chats.');let _0x2fcdbc=[],_0x28a7dd=[];for(let _0x241822 of _0x12ad8d){if(_0x241822['_id'])_0x241822[_0x23ff1e(0x5da)]=this['createJid'](_0x241822[_0x23ff1e(0x5da)]);else continue;await this['repository'][_0x23ff1e(0x947)][_0x23ff1e(0x694)]({'where':{'_id':_0x241822[_0x23ff1e(0x5da)]}},this[_0x23ff1e(0x921)][_0x23ff1e(0x2d1)])?_0x28a7dd[_0x23ff1e(0x6cd)]({'_id':_0x241822[_0x23ff1e(0x5da)],'leadInfo':_0x241822['leadInfo'],'owner':this[_0x23ff1e(0x921)][_0x23ff1e(0x2d1)]}):_0x2fcdbc[_0x23ff1e(0x6cd)]({'_id':_0x241822[_0x23ff1e(0x5da)],'owner':this[_0x23ff1e(0x921)]['wuid'],'leadInfo':_0x241822[_0x23ff1e(0x57a)],'imported':!0x0});}return _0x28a7dd[_0x23ff1e(0x303)]>0x0&&await this[_0x23ff1e(0x3cf)][_0x23ff1e(0x947)][_0x23ff1e(0x51a)](_0x28a7dd['map'](_0x4f31c5=>({'query':{'where':{'_id':_0x4f31c5[_0x23ff1e(0x5da)],'owner':this['instance']['wuid']}},'update':_0x4f31c5}))),_0x2fcdbc[_0x23ff1e(0x303)]>0x0&&await this[_0x23ff1e(0x3cf)][_0x23ff1e(0x947)][_0x23ff1e(0x293)](_0x2fcdbc,this['instance'][_0x23ff1e(0x2d1)]),{'updated':_0x28a7dd[_0x23ff1e(0x303)],'inserted':_0x2fcdbc[_0x23ff1e(0x303)]};}catch(_0x23115b){let _0x4dedc7=_0x23ff1e(0x8b1),_0x2d2fb7=_0x23115b instanceof Error?_0x23115b[_0x23ff1e(0x6c9)]:typeof _0x23115b==_0x23ff1e(0x1b3)?JSON[_0x23ff1e(0x28d)](_0x23115b):_0x23115b,_0x1f1877=_0x4dedc7+':\x20'+_0x2d2fb7;throw this['logger']['error'](this['instanceName']+'\x20('+this[_0x23ff1e(0x921)][_0x23ff1e(0x2d1)]+_0x23ff1e(0x91e)+_0x1f1877),new m(_0x1f1877);}}async[a0_0x1df5a5(0x655)](_0x2ffca1){const _0x20e228=a0_0x1df5a5;try{if(!Array['isArray'](_0x2ffca1)||_0x2ffca1[_0x20e228(0x303)]===0x0)throw new Error(_0x20e228(0x411));let _0x3cad27=0x64,_0x4ba186=0x0;for(let _0x187fd5=0x0;_0x187fd5<_0x2ffca1[_0x20e228(0x303)];_0x187fd5+=_0x3cad27){let _0x5b418d=_0x2ffca1[_0x20e228(0x5c2)](_0x187fd5,_0x187fd5+_0x3cad27),{updated:_0x3f58d4}=await this['importChatsBatch'](_0x5b418d);_0x4ba186+=_0x3f58d4;}return{'updated':_0x4ba186};}catch(_0x4f8592){let _0x23ef45='Erro\x20ao\x20importar\x20chats',_0x2dfec7=_0x4f8592 instanceof Error?_0x4f8592[_0x20e228(0x6c9)]:typeof _0x4f8592=='object'?JSON[_0x20e228(0x28d)](_0x4f8592):_0x4f8592,_0xc174ea=_0x23ef45+':\x20'+_0x2dfec7;throw this[_0x20e228(0x755)][_0x20e228(0x398)](this[_0x20e228(0x474)]+'\x20('+this[_0x20e228(0x921)][_0x20e228(0x2d1)]+_0x20e228(0x91e)+_0xc174ea),new m(_0xc174ea);}}async[a0_0x1df5a5(0x305)](_0x8487ea){const _0x3ffd93=a0_0x1df5a5;try{let _0x40d557=await this[_0x3ffd93(0x3cf)]['label'][_0x3ffd93(0x756)]({'where':{}},this['instance'][_0x3ffd93(0x2d1)]),_0x16cb3b=new Set(_0x40d557[_0x3ffd93(0x948)](_0x268d69=>_0x268d69[_0x3ffd93(0x5da)])),_0x45d5f0=[],_0x2ed549=[];for(let _0x2e99da of _0x8487ea){if(!_0x2e99da[_0x3ffd93(0x5da)])continue;_0x2e99da[_0x3ffd93(0x5da)]=this[_0x3ffd93(0x7b3)](_0x2e99da['_id']);let _0x4b8e3d=await this['repository'][_0x3ffd93(0x947)][_0x3ffd93(0x694)]({'where':{'_id':_0x2e99da[_0x3ffd93(0x5da)]}},this['instance'][_0x3ffd93(0x2d1)]),_0x4bb3a7={};if(Object[_0x3ffd93(0x8da)](_0x2e99da[_0x3ffd93(0x57a)])['forEach'](([_0x1af3a0,_0x58b710])=>{const _0x12b032=_0x3ffd93;_0x4bb3a7[_0x12b032(0x450)+_0x1af3a0]=_0x58b710;}),_0x4b8e3d&&!_0x4b8e3d[_0x3ffd93(0x3ee)]){let _0x3d7e1a=(_0x2e99da[_0x3ffd93(0x57a)][_0x3ffd93(0x553)]||[])[_0x3ffd93(0x93c)](_0x1bea7c=>_0x16cb3b[_0x3ffd93(0x664)](_0x1bea7c)),_0x13af3a=new Set(_0x4b8e3d[_0x3ffd93(0x57a)]['etiquetas']||[]),_0x190e11=_0x3d7e1a['filter'](_0x1d719e=>!_0x13af3a['has'](_0x1d719e)),_0x411742=[..._0x13af3a][_0x3ffd93(0x93c)](_0x2593b1=>!_0x3d7e1a[_0x3ffd93(0x5f2)](_0x2593b1));_0x2ed549['push'](..._0x190e11[_0x3ffd93(0x948)](_0x262615=>this[_0x3ffd93(0x824)](_0x262615,_0x2e99da[_0x3ffd93(0x5da)]))),_0x2ed549[_0x3ffd93(0x6cd)](..._0x411742[_0x3ffd93(0x948)](_0x1c0ab6=>this[_0x3ffd93(0x386)](_0x1c0ab6,_0x2e99da[_0x3ffd93(0x5da)]))),_0x2e99da[_0x3ffd93(0x57a)][_0x3ffd93(0x553)]=_0x3d7e1a,_0x45d5f0['push']({'query':{'where':{'_id':_0x2e99da[_0x3ffd93(0x5da)],'owner':this['instance'][_0x3ffd93(0x2d1)]}},'update':_0x4bb3a7});}else _0x4bb3a7[_0x3ffd93(0x3ee)]=!0x0,_0x45d5f0[_0x3ffd93(0x6cd)]({'query':{'where':{'_id':_0x2e99da[_0x3ffd93(0x5da)],'owner':this[_0x3ffd93(0x921)][_0x3ffd93(0x2d1)]}},'update':_0x4bb3a7});}let _0x3c0bd8=await this[_0x3ffd93(0x3cf)][_0x3ffd93(0x947)]['updateMany'](_0x45d5f0);return await Promise[_0x3ffd93(0x75e)](_0x2ed549),{'updated':_0x3c0bd8};}catch(_0x5b7157){let _0x90d050=_0x3ffd93(0x8b1),_0x1c3c5f=_0x5b7157 instanceof Error?_0x5b7157['message']:typeof _0x5b7157==_0x3ffd93(0x1b3)?JSON[_0x3ffd93(0x28d)](_0x5b7157):_0x5b7157,_0x1812b6=_0x90d050+':\x20'+_0x1c3c5f;throw this['logger'][_0x3ffd93(0x398)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x3ffd93(0x91e)+_0x1812b6),new m(_0x1812b6);}}async[a0_0x1df5a5(0x537)](){const _0xeb4d59=a0_0x1df5a5;return await this[_0xeb4d59(0x826)][_0xeb4d59(0x537)]();}async[a0_0x1df5a5(0x7fb)](_0xeb4e51){const _0x10e4c2=a0_0x1df5a5;try{return await this[_0x10e4c2(0x826)][_0x10e4c2(0x2aa)](_0xeb4e51[_0x10e4c2(0x6a6)][_0x10e4c2(0x642)]),await this[_0x10e4c2(0x826)][_0x10e4c2(0x507)](_0xeb4e51['privacySettings']['profile']),await this[_0x10e4c2(0x826)]['updateStatusPrivacy'](_0xeb4e51['privacySettings']['status']),await this[_0x10e4c2(0x826)]['updateOnlinePrivacy'](_0xeb4e51['privacySettings'][_0x10e4c2(0x7b0)]),await this[_0x10e4c2(0x826)][_0x10e4c2(0x69c)](_0xeb4e51[_0x10e4c2(0x6a6)]['last']),await this[_0x10e4c2(0x826)]['updateGroupsAddPrivacy'](_0xeb4e51[_0x10e4c2(0x6a6)][_0x10e4c2(0x77b)]),this[_0x10e4c2(0x826)]?.['ws']?.[_0x10e4c2(0x261)](),{'update':_0x10e4c2(0x319),'data':{'readreceipts':_0xeb4e51[_0x10e4c2(0x6a6)]['readreceipts'],'profile':_0xeb4e51[_0x10e4c2(0x6a6)][_0x10e4c2(0x6c3)],'status':_0xeb4e51[_0x10e4c2(0x6a6)][_0x10e4c2(0x781)],'online':_0xeb4e51[_0x10e4c2(0x6a6)][_0x10e4c2(0x7b0)],'last':_0xeb4e51[_0x10e4c2(0x6a6)]['last'],'groupadd':_0xeb4e51[_0x10e4c2(0x6a6)]['groupadd']}};}catch(_0x48ea7c){let _0xc39aed='Erro\x20ao\x20alterar\x20privacidade',_0x2fbd36=_0x48ea7c instanceof Error?_0x48ea7c[_0x10e4c2(0x6c9)]:typeof _0x48ea7c==_0x10e4c2(0x1b3)?JSON[_0x10e4c2(0x28d)](_0x48ea7c):_0x48ea7c,_0x50fd4f=_0xc39aed+':\x20'+_0x2fbd36;throw this[_0x10e4c2(0x755)][_0x10e4c2(0x398)](this['instanceName']+'\x20('+this[_0x10e4c2(0x921)][_0x10e4c2(0x2d1)]+_0x10e4c2(0x91e)+_0x50fd4f),new m(_0x50fd4f);}}async[a0_0x1df5a5(0x3d4)](_0x109c07){const _0x3ed0a6=a0_0x1df5a5;let _0x23bab1=(_0x109c07?this[_0x3ed0a6(0x7b3)](_0x109c07):this[_0x3ed0a6(0x826)]?.[_0x3ed0a6(0x2c3)]?.['id'])[_0x3ed0a6(0x894)](/:\d{1,2}@/g,'@');this['logger'][_0x3ed0a6(0x3fb)](this[_0x3ed0a6(0x474)]+'\x20('+this[_0x3ed0a6(0x921)]['wuid']+_0x3ed0a6(0x1fa)+_0x23bab1);let _0xa7f349=await this[_0x3ed0a6(0x3cf)]['contact'][_0x3ed0a6(0x694)]({'where':{'_id':_0x23bab1}},this[_0x3ed0a6(0x921)][_0x3ed0a6(0x2d1)]),_0x35b9d4=_0xa7f349?_0xa7f349[_0x3ed0a6(0x91a)]:null;try{let _0x10222f=(await this[_0x3ed0a6(0x493)]({'numbers':[_0x23bab1]}))?.['shift'](),_0x4cafc0=(await this[_0x3ed0a6(0x5a8)](_0x23bab1,null,!0x1))[_0x3ed0a6(0x5ef)][_0x3ed0a6(0x1d4)],_0x5a575d=await this[_0x3ed0a6(0x7c0)](_0x10222f?.[_0x3ed0a6(0x83f)]),_0x4dc9e7=await this[_0x3ed0a6(0x2a8)](_0x10222f?.['jid']),_0xacf7a9=(await this[_0x3ed0a6(0x5a8)](_0x23bab1,null,!0x1))['cachedContact'][_0x3ed0a6(0x5d3)],_0x474d0b=await this[_0x3ed0a6(0x3cf)][_0x3ed0a6(0x947)][_0x3ed0a6(0x694)]({'where':{'_id':_0x23bab1}},this[_0x3ed0a6(0x921)][_0x3ed0a6(0x2d1)]),_0x4edb0c={'imagechat':_0x4cafc0,'contactname':_0x35b9d4||null,'pushName':_0xacf7a9,'status':_0x5a575d?.[_0x3ed0a6(0x781)],'isBusiness':_0x4dc9e7[_0x3ed0a6(0x662)],'email':_0x4dc9e7?.[_0x3ed0a6(0x6bc)],'description':_0x4dc9e7?.['description'],'website':_0x4dc9e7?.[_0x3ed0a6(0x5df)]?.[_0x3ed0a6(0x55e)](),'lastcache':Date[_0x3ed0a6(0x78f)](),'imported':!_0x474d0b},_0x452ae4=await this[_0x3ed0a6(0x3cf)][_0x3ed0a6(0x947)]['updateOne']({'where':{'_id':_0x23bab1}},_0x4edb0c,this['instance'][_0x3ed0a6(0x2d1)]),_0x42eb33={'owner':this['instance'][_0x3ed0a6(0x2d1)],'_id':_0x23bab1,'profilePictureUrl':_0x4cafc0,'status':_0x5a575d?.['status']};return this[_0x3ed0a6(0x3cf)][_0x3ed0a6(0x572)][_0x3ed0a6(0x62e)]([_0x42eb33],this['instance'][_0x3ed0a6(0x2d1)]),_0x452ae4&&F(this['instanceName'],_0x3ed0a6(0x64d),{'chat':_0x452ae4}),{'wuid':_0x10222f?.[_0x3ed0a6(0x83f)]||_0x23bab1,'name':_0x10222f?.[_0x3ed0a6(0x5d3)],'pushName':_0xacf7a9,'numberExists':_0x10222f?.['exists'],'picture':_0x4cafc0,'status':_0x5a575d?.['status'],'isBusiness':_0x4dc9e7[_0x3ed0a6(0x662)],'email':_0x4dc9e7?.[_0x3ed0a6(0x6bc)],'description':_0x4dc9e7?.['description'],'website':_0x4dc9e7?.[_0x3ed0a6(0x5df)]?.[_0x3ed0a6(0x55e)]()};}catch(_0x59eba9){return this[_0x3ed0a6(0x755)]['error']('Error\x20fetching\x20and\x20updating\x20profile:\x20'+(_0x59eba9 instanceof Error?_0x59eba9[_0x3ed0a6(0x6c9)]:JSON[_0x3ed0a6(0x28d)](_0x59eba9,null,0x2))),{};}}async[a0_0x1df5a5(0x2a8)](_0x5d3ad8){const _0x1611e9=a0_0x1df5a5;this['logger'][_0x1611e9(0x3fb)](this['instanceName']+'\x20('+this['instance'][_0x1611e9(0x2d1)]+'):Fetching\x20business\x20profile');try{let _0x2bb7f5=_0x5d3ad8?this[_0x1611e9(0x7b3)](_0x5d3ad8):this[_0x1611e9(0x921)][_0x1611e9(0x2d1)],_0x52aad0=await this[_0x1611e9(0x826)]['getBusinessProfile'](_0x2bb7f5);return this['logger']['verbose'](this[_0x1611e9(0x474)]+'\x20('+this[_0x1611e9(0x921)][_0x1611e9(0x2d1)]+'):Trying\x20to\x20get\x20business\x20profile'),_0x52aad0?(this[_0x1611e9(0x755)][_0x1611e9(0x3fb)](this[_0x1611e9(0x474)]+'\x20('+this[_0x1611e9(0x921)]['wuid']+'):Business\x20profile\x20fetched'),{'isBusiness':!0x0,..._0x52aad0}):{'isBusiness':!0x1,'message':_0x1611e9(0x88d),...(await this[_0x1611e9(0x493)]({'numbers':[_0x2bb7f5]}))?.[_0x1611e9(0x55e)]()};}catch(_0x5537a8){let _0x4b3a15='Falha\x20ao\x20processar\x20fetchBusinessProfile',_0x35b5ea=_0x5537a8 instanceof Error?_0x5537a8['message']:typeof _0x5537a8=='object'?JSON['stringify'](_0x5537a8):_0x5537a8,_0x1b68ec=_0x4b3a15+':\x20'+_0x35b5ea;throw this[_0x1611e9(0x755)][_0x1611e9(0x398)](this['instanceName']+'\x20('+this[_0x1611e9(0x921)][_0x1611e9(0x2d1)]+_0x1611e9(0x91e)+_0x1b68ec),new x(_0x1b68ec);}}async[a0_0x1df5a5(0x7c0)](_0x3bcf7b){const _0x5f1756=a0_0x1df5a5;let _0x52e1fd=this[_0x5f1756(0x7b3)](_0x3bcf7b);try{return{'wuid':_0x52e1fd,'status':(await this['client']['fetchStatus'](_0x52e1fd))[0x0]?.[_0x5f1756(0x781)]};}catch{return{'wuid':_0x52e1fd,'status':null};}}async[a0_0x1df5a5(0x8b7)](_0x173212){const _0x52b261=a0_0x1df5a5;try{return await this['client']['updateProfileName'](_0x173212),{'update':_0x52b261(0x319)};}catch(_0x590b81){let _0x29e175=_0x52b261(0x512),_0x18f084=_0x590b81 instanceof Error?_0x590b81[_0x52b261(0x6c9)]:typeof _0x590b81==_0x52b261(0x1b3)?JSON[_0x52b261(0x28d)](_0x590b81):_0x590b81,_0x4c48c7=_0x29e175+':\x20'+_0x18f084;throw this[_0x52b261(0x755)][_0x52b261(0x398)](this[_0x52b261(0x474)]+'\x20('+this[_0x52b261(0x921)][_0x52b261(0x2d1)]+'):\x20'+_0x4c48c7),new x(_0x4c48c7);}}async['updateProfileStatus'](_0x2bfae5){const _0x54ce7a=a0_0x1df5a5;try{return await this[_0x54ce7a(0x826)][_0x54ce7a(0x429)](_0x2bfae5),{'update':'success'};}catch(_0x4af7ba){let _0x135690=_0x54ce7a(0x1ae),_0x54f499=_0x4af7ba instanceof Error?_0x4af7ba['message']:typeof _0x4af7ba==_0x54ce7a(0x1b3)?JSON[_0x54ce7a(0x28d)](_0x4af7ba):_0x4af7ba,_0x5bf641=_0x135690+':\x20'+_0x54f499;throw this[_0x54ce7a(0x755)][_0x54ce7a(0x398)](this[_0x54ce7a(0x474)]+'\x20('+this[_0x54ce7a(0x921)][_0x54ce7a(0x2d1)]+_0x54ce7a(0x91e)+_0x5bf641),new x(_0x5bf641);}}async[a0_0x1df5a5(0x2ae)](_0x3ced22){const _0x50e10a=a0_0x1df5a5;try{let _0x59053b;if((0x0,J[_0x50e10a(0x6ae)])(_0x3ced22)){let _0x574ee0=new Date()[_0x50e10a(0x6d7)](),_0x640c4=_0x3ced22+'?timestamp='+_0x574ee0;_0x59053b=(await K[_0x50e10a(0x686)]['get'](_0x640c4,{'responseType':_0x50e10a(0x325)}))[_0x50e10a(0x561)];}else{if((0x0,J['isBase64'])(_0x3ced22))_0x59053b=Buffer[_0x50e10a(0x439)](_0x3ced22,_0x50e10a(0x4e1));else throw new m(_0x50e10a(0x791));}return await this[_0x50e10a(0x826)][_0x50e10a(0x2ae)](this[_0x50e10a(0x921)][_0x50e10a(0x2d1)],_0x59053b),{'update':_0x50e10a(0x319)};}catch(_0x45ddc2){let _0x2fefff=_0x50e10a(0x8ee),_0xe3cea9=_0x45ddc2 instanceof Error?_0x45ddc2['message']:typeof _0x45ddc2==_0x50e10a(0x1b3)?JSON['stringify'](_0x45ddc2):_0x45ddc2,_0x599263=_0x2fefff+':\x20'+_0xe3cea9;throw this[_0x50e10a(0x755)][_0x50e10a(0x398)](this['instanceName']+'\x20('+this['instance'][_0x50e10a(0x2d1)]+_0x50e10a(0x91e)+_0x599263),new x(_0x599263);}}async[a0_0x1df5a5(0x471)](){const _0x502d47=a0_0x1df5a5;try{return await this[_0x502d47(0x826)][_0x502d47(0x471)](this[_0x502d47(0x921)]['wuid']),{'update':'success'};}catch(_0x122ced){let _0x1493f7='Falha\x20ao\x20processar\x20a\x20solicitação\x20removeProfilePicture',_0x3054be=_0x122ced instanceof Error?_0x122ced['message']:typeof _0x122ced==_0x502d47(0x1b3)?JSON[_0x502d47(0x28d)](_0x122ced):_0x122ced,_0x37cf86=_0x1493f7+':\x20'+_0x3054be;throw this[_0x502d47(0x755)][_0x502d47(0x398)](this[_0x502d47(0x474)]+'\x20('+this[_0x502d47(0x921)][_0x502d47(0x2d1)]+'):\x20'+_0x37cf86),new x(_0x37cf86);}}async[a0_0x1df5a5(0x91d)](_0x40c4a8){const _0x19d337=a0_0x1df5a5;try{let _0x1816f3=(await this[_0x19d337(0x493)]({'numbers':_0x40c4a8[_0x19d337(0x521)]}))['filter'](_0x49b2d7=>_0x49b2d7[_0x19d337(0x3bc)])[_0x19d337(0x948)](_0x3bcf83=>_0x3bcf83['jid']),{id:_0x47a4eb}=await this[_0x19d337(0x826)][_0x19d337(0x3f8)](_0x40c4a8['subject'],_0x1816f3);_0x40c4a8?.[_0x19d337(0x8f3)]&&await this['client'][_0x19d337(0x86d)](_0x47a4eb,_0x40c4a8[_0x19d337(0x8f3)]);let _0x27825a=await this[_0x19d337(0x826)][_0x19d337(0x6ec)](_0x47a4eb);return _0x27825a[_0x19d337(0x4bf)]=[],await this[_0x19d337(0x487)](_0x27825a),{'metadata':_0x27825a};}catch(_0x3ad114){let _0x29854c=_0x19d337(0x858),_0x10360a=_0x3ad114 instanceof Error?_0x3ad114['message']:typeof _0x3ad114=='object'?JSON[_0x19d337(0x28d)](_0x3ad114):_0x3ad114,_0x32491b=_0x29854c+':\x20'+_0x10360a;throw this[_0x19d337(0x755)][_0x19d337(0x398)](this[_0x19d337(0x474)]+'\x20('+this[_0x19d337(0x921)][_0x19d337(0x2d1)]+_0x19d337(0x91e)+_0x32491b),new x(_0x32491b);}}async[a0_0x1df5a5(0x2d2)](_0x59035c){const _0x1ade56=a0_0x1df5a5;try{if(_0x59035c[_0x1ade56(0x5be)]===!0x0&&await this[_0x1ade56(0x826)]['groupSettingUpdate'](_0x59035c[_0x1ade56(0x56b)],_0x1ade56(0x466)),_0x59035c[_0x1ade56(0x5be)]===!0x1&&await this[_0x1ade56(0x826)][_0x1ade56(0x41a)](_0x59035c['groupJid'],'unlocked'),_0x59035c[_0x1ade56(0x736)]===!0x0&&await this[_0x1ade56(0x826)]['groupSettingUpdate'](_0x59035c[_0x1ade56(0x56b)],_0x1ade56(0x3f9)),_0x59035c[_0x1ade56(0x736)]===!0x1&&await this[_0x1ade56(0x826)]['groupSettingUpdate'](_0x59035c[_0x1ade56(0x56b)],_0x1ade56(0x356)),_0x59035c[_0x1ade56(0x680)]===!0x0&&await this['client'][_0x1ade56(0x5d7)](_0x59035c[_0x1ade56(0x56b)],_0x1ade56(0x5ed)),_0x59035c[_0x1ade56(0x680)]===!0x1&&await this[_0x1ade56(0x826)][_0x1ade56(0x5d7)](_0x59035c[_0x1ade56(0x56b)],_0x1ade56(0x533)),_0x59035c['joinApprovalMode']===!0x0&&await this['client']['groupJoinApprovalMode'](_0x59035c['groupJid'],'on'),_0x59035c[_0x1ade56(0x789)]===!0x1&&await this[_0x1ade56(0x826)]['groupJoinApprovalMode'](_0x59035c[_0x1ade56(0x56b)],'off'),typeof _0x59035c[_0x1ade56(0x33a)]<'u'&&_0x59035c[_0x1ade56(0x33a)]!==null&&await this[_0x1ade56(0x826)]['groupToggleEphemeral'](_0x59035c[_0x1ade56(0x56b)],_0x59035c[_0x1ade56(0x33a)]),_0x59035c[_0x1ade56(0x5d3)]&&await this[_0x1ade56(0x826)][_0x1ade56(0x279)](_0x59035c[_0x1ade56(0x56b)],_0x59035c['name']),_0x59035c[_0x1ade56(0x8f3)]&&await this['client'][_0x1ade56(0x86d)](_0x59035c[_0x1ade56(0x56b)],_0x59035c[_0x1ade56(0x8f3)]),_0x59035c[_0x1ade56(0x6aa)]){let _0x3b7a1a;if((0x0,J[_0x1ade56(0x6ae)])(_0x59035c['image'])){let _0x37b8f5=new Date()['getTime'](),_0xc6cd26=_0x59035c[_0x1ade56(0x6aa)]+_0x1ade56(0x818)+_0x37b8f5;_0x3b7a1a=(await K[_0x1ade56(0x686)][_0x1ade56(0x3be)](_0xc6cd26,{'responseType':'arraybuffer'}))[_0x1ade56(0x561)];}else{if((0x0,J['isBase64'])(_0x59035c['image']))_0x3b7a1a=Buffer[_0x1ade56(0x439)](_0x59035c[_0x1ade56(0x6aa)],_0x1ade56(0x4e1));else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}await this[_0x1ade56(0x826)][_0x1ade56(0x2ae)](_0x59035c['groupJid'],_0x3b7a1a);}return await this[_0x1ade56(0x761)]({'groupJid':_0x59035c['groupJid']});}catch(_0x10b5a5){let _0x2ca67b=_0x1ade56(0x927),_0x1cd04a=_0x10b5a5 instanceof Error?_0x10b5a5[_0x1ade56(0x6c9)]:typeof _0x10b5a5=='object'?JSON[_0x1ade56(0x28d)](_0x10b5a5):_0x10b5a5,_0x32480c=_0x2ca67b+':\x20'+_0x1cd04a;throw this[_0x1ade56(0x755)][_0x1ade56(0x398)](this[_0x1ade56(0x474)]+'\x20('+this[_0x1ade56(0x921)][_0x1ade56(0x2d1)]+_0x1ade56(0x91e)+_0x32480c),new x(_0x32480c);}}async['updateGParticipant'](_0x840e45){const _0x547f47=a0_0x1df5a5;try{let _0x4f18f9=_0x840e45['participants'][_0x547f47(0x948)](_0xde9f52=>this[_0x547f47(0x7b3)](_0xde9f52));if(_0x840e45[_0x547f47(0x6bb)]===_0x547f47(0x4cf)||_0x840e45[_0x547f47(0x6bb)]===_0x547f47(0x50e))await this[_0x547f47(0x826)]['groupRequestParticipantsUpdate'](_0x840e45['groupJid'],_0x4f18f9,_0x840e45[_0x547f47(0x6bb)]);else{if(_0x840e45[_0x547f47(0x6bb)]===_0x547f47(0x94f)){let _0x23530d=(await this[_0x547f47(0x493)]({'numbers':_0x840e45[_0x547f47(0x521)]}))[_0x547f47(0x93c)](_0x54f00b=>_0x54f00b[_0x547f47(0x3bc)])[_0x547f47(0x948)](_0xa853=>this[_0x547f47(0x7b3)](_0xa853[_0x547f47(0x83f)]));if(_0x23530d['length']===0x0)throw new m('Nenhum\x20participante\x20válido\x20encontrado.');await this[_0x547f47(0x826)][_0x547f47(0x90b)](_0x840e45[_0x547f47(0x56b)],_0x23530d,_0x547f47(0x94f));}else await this[_0x547f47(0x826)][_0x547f47(0x90b)](_0x840e45[_0x547f47(0x56b)],_0x4f18f9,_0x840e45[_0x547f47(0x6bb)]);}return await this[_0x547f47(0x761)]({'groupJid':_0x840e45[_0x547f47(0x56b)]});}catch(_0x1e362a){let _0x483f95='Falha\x20ao\x20processar\x20a\x20solicitação\x20updateGParticipant',_0x3284cd=_0x1e362a instanceof Error?_0x1e362a[_0x547f47(0x6c9)]:typeof _0x1e362a==_0x547f47(0x1b3)?JSON[_0x547f47(0x28d)](_0x1e362a):_0x1e362a,_0x40e90a=_0x483f95+':\x20'+_0x3284cd;throw this[_0x547f47(0x755)][_0x547f47(0x398)](this[_0x547f47(0x474)]+'\x20('+this[_0x547f47(0x921)]['wuid']+_0x547f47(0x91e)+_0x40e90a),new m(_0x40e90a);}}async[a0_0x1df5a5(0x810)](_0x31e41){const _0x14f963=a0_0x1df5a5;try{return await this['client'][_0x14f963(0x810)](_0x31e41[_0x14f963(0x536)]);}catch(_0x44b3bc){let _0x15db9a=_0x14f963(0x29a),_0x15c53b=_0x44b3bc instanceof Error?_0x44b3bc[_0x14f963(0x6c9)]:typeof _0x44b3bc==_0x14f963(0x1b3)?JSON[_0x14f963(0x28d)](_0x44b3bc):_0x44b3bc,_0x1adf6a=_0x15db9a+':\x20'+_0x15c53b;throw this[_0x14f963(0x755)][_0x14f963(0x398)](this[_0x14f963(0x474)]+'\x20('+this['instance'][_0x14f963(0x2d1)]+_0x14f963(0x91e)+_0x1adf6a),new m(_0x1adf6a);}}async[a0_0x1df5a5(0x761)](_0x570ac0,_0xd869ad=a0_0x1df5a5(0x276)){const _0x22bbb5=a0_0x1df5a5;try{let _0x3979c1=await this[_0x22bbb5(0x3cf)][_0x22bbb5(0x947)][_0x22bbb5(0x694)]({'where':{'_id':_0x570ac0[_0x22bbb5(0x56b)]}},this[_0x22bbb5(0x921)][_0x22bbb5(0x2d1)]),_0x282084=_0x3979c1?_0x3979c1[_0x22bbb5(0x702)]:null,_0x3845e6=0x18*0x3c*0x3c*0x3e8;if(!_0x282084||_0x282084['lastUpdate']&&Date[_0x22bbb5(0x78f)]()-_0x282084[_0x22bbb5(0x4d1)]>_0x3845e6){let _0x38a8e1=await this[_0x22bbb5(0x826)][_0x22bbb5(0x6ec)](_0x570ac0[_0x22bbb5(0x56b)]);if(_0x38a8e1[_0x22bbb5(0x890)]=_0x38a8e1?.[_0x22bbb5(0x890)]&&_0x38a8e1[_0x22bbb5(0x890)][_0x22bbb5(0x641)]()[_0x22bbb5(0x303)]<0xd?_0x38a8e1?.[_0x22bbb5(0x890)]*0x3e8:_0x38a8e1?.[_0x22bbb5(0x890)]||null,_0x38a8e1['creation']=_0x38a8e1?.['creation']&&_0x38a8e1[_0x22bbb5(0x8aa)][_0x22bbb5(0x641)]()['length']<0xd?_0x38a8e1?.[_0x22bbb5(0x8aa)]*0x3e8:_0x38a8e1?.[_0x22bbb5(0x8aa)]||null,_0x282084={..._0x38a8e1,'lastUpdate':Date[_0x22bbb5(0x78f)]()},!_0x38a8e1)return;}let _0x4f7bd6=_0x282084[_0x22bbb5(0x521)]?.[_0x22bbb5(0x72b)](_0x24247f=>_0x24247f['id']===this['instance'][_0x22bbb5(0x2d1)]+'@s.whatsapp.net'&&_0x24247f[_0x22bbb5(0x38a)]!=null)||!0x1;!_0x282084[_0x22bbb5(0x536)]&&_0x4f7bd6&&(_0x282084[_0x22bbb5(0x536)]=(await this[_0x22bbb5(0x536)](_0x570ac0,!0x1))[_0x22bbb5(0x51b)]);let _0x10bd2b=(!_0x282084[_0x22bbb5(0x736)]||_0x4f7bd6)&&(!_0x282084[_0x22bbb5(0x2b9)]||_0x4f7bd6);_0x282084[_0x22bbb5(0x86a)]=_0x4f7bd6,_0x282084[_0x22bbb5(0x796)]=_0x10bd2b;let _0x4032c5=[];if(_0x4f7bd6&&_0x282084[_0x22bbb5(0x789)])try{_0x4032c5=await this[_0x22bbb5(0x826)][_0x22bbb5(0x905)](_0x570ac0[_0x22bbb5(0x56b)]),_0x282084[_0x22bbb5(0x7c7)]=Date['now']();}catch(_0x3df776){this[_0x22bbb5(0x755)][_0x22bbb5(0x3fb)](this['instanceName']+'\x20('+this[_0x22bbb5(0x921)]['wuid']+_0x22bbb5(0x88e)+_0x570ac0[_0x22bbb5(0x56b)]+':\x20'+(_0x3df776 instanceof Error?_0x3df776['message']:JSON[_0x22bbb5(0x28d)](_0x3df776,null,0x2)));}try{_0x282084[_0x22bbb5(0x6aa)]=(await this['findAndUpdateCacheContact'](_0x570ac0[_0x22bbb5(0x56b)],null,!0x0))[_0x22bbb5(0x5ef)][_0x22bbb5(0x1d4)];}catch(_0x2eb2f2){this[_0x22bbb5(0x755)][_0x22bbb5(0x3fb)](this[_0x22bbb5(0x474)]+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20buscar\x20a\x20imagem\x20do\x20grupo\x20'+_0x570ac0[_0x22bbb5(0x56b)]+':\x20'+(_0x2eb2f2 instanceof Error?_0x2eb2f2['message']:JSON[_0x22bbb5(0x28d)](_0x2eb2f2,null,0x2)));}let _0x28a69a=_0x282084[_0x22bbb5(0x521)]['map'](_0x20c89a=>_0x20c89a['id']),_0x20724a=_0x4032c5[_0x22bbb5(0x948)](_0x1e7b78=>_0x1e7b78[_0x22bbb5(0x83f)]),_0xc028a6=await this[_0x22bbb5(0x3cf)][_0x22bbb5(0x78b)][_0x22bbb5(0x652)]([..._0x28a69a,..._0x20724a]);_0x282084[_0x22bbb5(0x521)]=_0x282084[_0x22bbb5(0x521)][_0x22bbb5(0x948)](_0x4fc11f=>{const _0x3c429a=_0x22bbb5;let _0x5f9797=_0xc028a6[_0x3c429a(0x756)](_0x3869b0=>_0x3869b0['_id']===_0x4fc11f['id']);return{'id':_0x4fc11f['id'],'isAdmin':[_0x3c429a(0x38a),_0x3c429a(0x733)][_0x3c429a(0x5f2)](_0x4fc11f['admin']),'admin':_0x4fc11f[_0x3c429a(0x38a)],'pushName':_0x5f9797?.[_0x3c429a(0x5d3)],'profilePictureUrl':_0x5f9797?.[_0x3c429a(0x1d4)]};}),_0x282084[_0x22bbb5(0x4bf)]=_0x4032c5[_0x22bbb5(0x948)](_0x74d595=>{const _0x47edb4=_0x22bbb5;let _0x308a7e=_0xc028a6[_0x47edb4(0x756)](_0x351c02=>_0x351c02[_0x47edb4(0x5da)]===_0x74d595[_0x47edb4(0x83f)]);return{'id':_0x74d595['jid'],'awaitingApproval':!0x0,'isAdmin':!0x1,'pushName':_0x308a7e?.[_0x47edb4(0x5d3)],'profilePictureUrl':_0x308a7e?.[_0x47edb4(0x1d4)],'request_method':_0x74d595[_0x47edb4(0x4ce)],'request_time':_0x74d595[_0x47edb4(0x1e8)]};});let _0x5a143d=await this[_0x22bbb5(0x3cf)][_0x22bbb5(0x947)][_0x22bbb5(0x66e)]({'where':{'_id':_0x570ac0[_0x22bbb5(0x56b)]}},{'imagechat':_0x282084['image'],'name':_0x282084[_0x22bbb5(0x4af)],'lastcache':Date[_0x22bbb5(0x78f)](),'groupdata':_0x282084},this[_0x22bbb5(0x921)][_0x22bbb5(0x2d1)]);return F(this[_0x22bbb5(0x474)],'chats',{'chat':_0x5a143d}),{'metadata':_0x282084};}catch(_0x3657e8){if(_0xd869ad===_0x22bbb5(0x397))return;throw new U('Error\x20fetching\x20group',_0x3657e8[_0x22bbb5(0x6c9)][_0x22bbb5(0x641)]());}}async[a0_0x1df5a5(0x4f6)](){const _0x5d655d=a0_0x1df5a5;try{this[_0x5d655d(0x755)][_0x5d655d(0x4f4)](_0x5d655d(0x8c8));let _0x3c2e5b=Date[_0x5d655d(0x78f)](),_0x18d08b=0x3*0x3c*0x3c*0x3e8;return _0x3c2e5b-this[_0x5d655d(0x82d)]>_0x18d08b&&(this['findRealGroups'](),this[_0x5d655d(0x82d)]=_0x3c2e5b),(await this[_0x5d655d(0x3cf)][_0x5d655d(0x947)][_0x5d655d(0x4ca)]({'where':{'group':!0x0}},this['instance']['wuid']))['map'](_0x20585e=>({..._0x20585e[_0x5d655d(0x702)],'groupJid':_0x20585e?.[_0x5d655d(0x5da)],'participants':_0x20585e?.[_0x5d655d(0x702)]?.[_0x5d655d(0x521)]||[],'awaitingApproval':_0x20585e?.[_0x5d655d(0x702)]?.[_0x5d655d(0x4bf)]||[],'image':_0x20585e?.['imagechat']}));}catch(_0x1c96eb){let _0x67ace2=_0x5d655d(0x331),_0x3e5a4f=_0x1c96eb instanceof Error?_0x1c96eb['message']:typeof _0x1c96eb==_0x5d655d(0x1b3)?JSON[_0x5d655d(0x28d)](_0x1c96eb):_0x1c96eb,_0x26c888=_0x67ace2+':\x20'+_0x3e5a4f;throw this['logger'][_0x5d655d(0x398)](this[_0x5d655d(0x474)]+'\x20('+this[_0x5d655d(0x921)]['wuid']+_0x5d655d(0x91e)+_0x26c888),new U(_0x26c888);}}async['findRealGroups'](){const _0x58c8ef=a0_0x1df5a5;try{this[_0x58c8ef(0x755)]['info'](_0x58c8ef(0x2cb));let _0x27138e=[],_0x573564=await this[_0x58c8ef(0x826)]['groupFetchAllParticipating'](),_0xa28754=Object[_0x58c8ef(0x6f6)](_0x573564);for(let _0x67cccc=0x0;_0x67cccc<_0xa28754[_0x58c8ef(0x303)];_0x67cccc++){let _0x19b320=_0xa28754[_0x67cccc];(0x0,w[_0x58c8ef(0x865)])(_0x19b320?.['id'])&&(_0x27138e[_0x58c8ef(0x6cd)]({'groupJid':_0x19b320?.['id'],'subject':_0x19b320?.[_0x58c8ef(0x4af)],'subjectOwner':_0x19b320?.[_0x58c8ef(0x275)]?.[_0x58c8ef(0x709)]('@')[0x0],'subjectTime':_0x19b320?.['subjectTime'],'creation':_0x19b320?.[_0x58c8ef(0x8aa)],'size':_0x19b320?.['participants']?.['length'],'owner':_0x19b320?.['owner']?.['split']('@')[0x0],'desc':_0x19b320?.[_0x58c8ef(0x2b0)],'restrict':_0x19b320?.[_0x58c8ef(0x5be)],'announce':_0x19b320?.['announce'],'image':null,'isCommunity':_0x19b320?.['isCommunity'],'joinApprovalMode':_0x19b320?.[_0x58c8ef(0x789)],'memberCanAddParticipant':_0x19b320?.[_0x58c8ef(0x680)],'participants':_0x19b320?.[_0x58c8ef(0x521)],'descOwner':_0x19b320?.['descOwner'],'descId':_0x19b320?.[_0x58c8ef(0x8db)],'memberAddMode':_0x19b320?.[_0x58c8ef(0x680)],'isCommunityAnnounce':_0x19b320?.[_0x58c8ef(0x287)],'ephemeralDuration':_0x19b320?.[_0x58c8ef(0x61c)]||0x0,'author':_0x19b320?.[_0x58c8ef(0x230)]}),this[_0x58c8ef(0x487)](_0xa28754[_0x67cccc]));}return _0x27138e;}catch(_0x590f91){let _0x3c73b7='Falha\x20ao\x20processar\x20a\x20solicitação\x20findRealGroups',_0x49a090=_0x590f91 instanceof Error?_0x590f91[_0x58c8ef(0x6c9)]:typeof _0x590f91==_0x58c8ef(0x1b3)?JSON[_0x58c8ef(0x28d)](_0x590f91):_0x590f91,_0x82bacc=_0x3c73b7+':\x20'+_0x49a090;throw this[_0x58c8ef(0x755)][_0x58c8ef(0x398)](this['instanceName']+'\x20('+this[_0x58c8ef(0x921)][_0x58c8ef(0x2d1)]+_0x58c8ef(0x91e)+_0x82bacc),new U(_0x82bacc);}}async['updateChatGroupData'](_0x3d3fe7){const _0x4cb095=a0_0x1df5a5;let _0x29f0ae=await this['repository'][_0x4cb095(0x947)][_0x4cb095(0x694)]({'where':{'_id':_0x3d3fe7['id']}},this[_0x4cb095(0x921)][_0x4cb095(0x2d1)]);if(_0x3d3fe7[_0x4cb095(0x890)]=_0x3d3fe7?.[_0x4cb095(0x890)]&&_0x3d3fe7['subjectTime'][_0x4cb095(0x641)]()[_0x4cb095(0x303)]<0xd?_0x3d3fe7?.[_0x4cb095(0x890)]*0x3e8:_0x3d3fe7?.[_0x4cb095(0x890)]||null,_0x3d3fe7[_0x4cb095(0x8aa)]=_0x3d3fe7?.[_0x4cb095(0x8aa)]&&_0x3d3fe7[_0x4cb095(0x8aa)][_0x4cb095(0x641)]()[_0x4cb095(0x303)]<0xd?_0x3d3fe7?.[_0x4cb095(0x8aa)]*0x3e8:_0x3d3fe7?.[_0x4cb095(0x8aa)]||null,!_0x3d3fe7[_0x4cb095(0x6aa)])try{_0x3d3fe7[_0x4cb095(0x6aa)]=await this[_0x4cb095(0x826)][_0x4cb095(0x912)](_0x3d3fe7['id'],_0x4cb095(0x590));}catch(_0x481a9d){this[_0x4cb095(0x755)][_0x4cb095(0x3fb)](this[_0x4cb095(0x474)]+'\x20('+this['instance'][_0x4cb095(0x2d1)]+_0x4cb095(0x470)+_0x3d3fe7['id']+':\x20'+(_0x481a9d instanceof Error?_0x481a9d[_0x4cb095(0x6c9)]:JSON['stringify'](_0x481a9d,null,0x2)));}let _0x4db8d0=_0x3d3fe7[_0x4cb095(0x521)][_0x4cb095(0x948)](_0x9c9832=>{const _0x512924=_0x4cb095;let _0x1d628e=_0x29f0ae?.['groupdata']?.['participants']['find'](_0x46e04f=>_0x46e04f['id']===_0x9c9832['id']);return{..._0x9c9832,'isAdmin':[_0x512924(0x38a),'superadmin'][_0x512924(0x5f2)](_0x9c9832[_0x512924(0x38a)]),'admin':_0x9c9832[_0x512924(0x38a)],'name':_0x1d628e?.[_0x512924(0x5d3)]||_0x9c9832[_0x512924(0x5d3)],'imgUrl':_0x1d628e?.[_0x512924(0x7e2)]||_0x9c9832[_0x512924(0x7e2)]};}),_0x52bd47=_0x4db8d0[_0x4cb095(0x72b)](_0x191fab=>_0x191fab['id']===this[_0x4cb095(0x921)]['wuid']+_0x4cb095(0x2d9)&&_0x191fab['admin']!=null)||!0x1,_0x48fdd6=(!_0x3d3fe7['announce']||_0x52bd47)&&(!_0x3d3fe7[_0x4cb095(0x2b9)]||_0x52bd47),_0x29d227={..._0x3d3fe7,'participants':_0x4db8d0,'awaitingApproval':_0x29f0ae?.[_0x4cb095(0x702)]?.[_0x4cb095(0x4bf)]||[],'lastFetchAwaitingApproval':_0x29f0ae?.[_0x4cb095(0x702)]?.['lastFetchAwaitingApproval'],'isAdmin':_0x52bd47,'canSendMessage':_0x48fdd6,'lastUpdate':Date[_0x4cb095(0x78f)]()};await this[_0x4cb095(0x3cf)][_0x4cb095(0x947)]['updateOne']({'where':{'_id':_0x3d3fe7['id']}},{'imagechat':_0x3d3fe7[_0x4cb095(0x6aa)],'name':_0x3d3fe7[_0x4cb095(0x4af)],'group':!0x0,'groupdata':_0x29d227,'lastcache':Date[_0x4cb095(0x78f)]()},this[_0x4cb095(0x921)][_0x4cb095(0x2d1)]),F(this[_0x4cb095(0x474)],'chats',{'chat':_0x3d3fe7});}async[a0_0x1df5a5(0x675)](_0x14983d){const _0x542c20=a0_0x1df5a5;let _0x4ea0ef=await this[_0x542c20(0x3cf)][_0x542c20(0x947)][_0x542c20(0x694)]({'where':{'_id':_0x14983d['id']}},this[_0x542c20(0x921)]['wuid']);_0x14983d['subjectTime']=_0x14983d?.[_0x542c20(0x890)]&&_0x14983d[_0x542c20(0x890)][_0x542c20(0x641)]()['length']<0xd?_0x14983d?.[_0x542c20(0x890)]*0x3e8:_0x14983d?.[_0x542c20(0x890)]||null,_0x14983d[_0x542c20(0x8aa)]=_0x14983d?.[_0x542c20(0x8aa)]&&_0x14983d[_0x542c20(0x8aa)][_0x542c20(0x641)]()['length']<0xd?_0x14983d?.[_0x542c20(0x8aa)]*0x3e8:_0x14983d?.[_0x542c20(0x8aa)]||null,_0x14983d['inviteCode']&&(_0x14983d[_0x542c20(0x536)]=_0x542c20(0x80b)+_0x14983d[_0x542c20(0x536)]);let _0x5a5f04=_0x4ea0ef?.[_0x542c20(0x702)]?{..._0x4ea0ef[_0x542c20(0x702)]}:{};Object[_0x542c20(0x326)](_0x14983d)[_0x542c20(0x504)](_0x1ca3d2=>{_0x1ca3d2!=='id'&&(_0x5a5f04[_0x1ca3d2]=_0x14983d[_0x1ca3d2]);});let _0x5aa839=_0x5a5f04['participants']?.['some'](_0x39393b=>_0x39393b['id']===this[_0x542c20(0x921)][_0x542c20(0x2d1)]+_0x542c20(0x2d9)&&_0x39393b[_0x542c20(0x38a)]!=null)||!0x1;_0x5a5f04[_0x542c20(0x86a)]=_0x5aa839;let _0x493b8f=(!_0x5a5f04[_0x542c20(0x736)]||_0x5aa839)&&(!_0x5a5f04[_0x542c20(0x2b9)]||_0x5aa839);_0x5a5f04[_0x542c20(0x796)]=_0x493b8f;let _0x231cc6={'group':!0x0,'groupdata':_0x5a5f04};_0x14983d[_0x542c20(0x4af)]&&(_0x231cc6['name']=_0x14983d['subject']),await this['repository'][_0x542c20(0x947)][_0x542c20(0x66e)]({'where':{'_id':_0x14983d['id']}},_0x231cc6,this[_0x542c20(0x921)][_0x542c20(0x2d1)],{'upsert':!0x0}),F(this[_0x542c20(0x474)],_0x542c20(0x64d),{'chat':_0x231cc6});}async['updateGroupParticipantsWebhook'](_0x2c3041){const _0x5af148=a0_0x1df5a5;let _0x56a864=await this[_0x5af148(0x3cf)]['chat'][_0x5af148(0x694)]({'where':{'_id':_0x2c3041['id']}},this[_0x5af148(0x921)][_0x5af148(0x2d1)]);if(!_0x56a864||!_0x56a864[_0x5af148(0x702)]){this[_0x5af148(0x755)][_0x5af148(0x4f4)](this[_0x5af148(0x474)]+'\x20('+this[_0x5af148(0x921)]['wuid']+_0x5af148(0x679)+_0x2c3041['id']);return;}let _0xa9c9db=await this[_0x5af148(0x3cf)][_0x5af148(0x78b)][_0x5af148(0x652)](_0x2c3041[_0x5af148(0x521)]),_0x5726ca=[..._0x56a864[_0x5af148(0x702)]?.['participants']];switch(_0x2c3041[_0x5af148(0x6bb)]){case _0x5af148(0x94f):_0xa9c9db[_0x5af148(0x948)](_0x167c9d=>({'id':_0x167c9d[_0x5af148(0x5da)],'isAdmin':!0x1,'name':_0x167c9d[_0x5af148(0x5d3)],'imgUrl':_0x167c9d['pictureUrl']}))['forEach'](_0x5c6d51=>{const _0x5665b5=_0x5af148;_0x5726ca[_0x5665b5(0x72b)](_0x1ff930=>_0x1ff930['id']===_0x5c6d51['id'])||(_0x5726ca['push'](_0x5c6d51),this['logger']['info']('Adicionando\x20novo\x20participante:\x20'+JSON[_0x5665b5(0x28d)](_0x5c6d51)));});break;case _0x5af148(0x51f):_0x5726ca=_0x5726ca[_0x5af148(0x93c)](_0x54ff1c=>!_0x2c3041[_0x5af148(0x521)][_0x5af148(0x5f2)](_0x54ff1c['id']));break;case _0x5af148(0x2c4):_0x5726ca=_0x5726ca[_0x5af148(0x948)](_0x33b930=>_0x2c3041['participants']['includes'](_0x33b930['id'])?{..._0x33b930,'isAdmin':!0x0,'admin':_0x5af148(0x38a)}:_0x33b930);break;case _0x5af148(0x68d):_0x5726ca=_0x5726ca[_0x5af148(0x948)](_0xfc02e6=>_0x2c3041['participants']['includes'](_0xfc02e6['id'])?{..._0xfc02e6,'isAdmin':!0x1,'admin':null}:_0xfc02e6);break;}let _0xd79179=_0x5726ca[_0x5af148(0x303)],_0x222e2b=_0x5726ca['some'](_0x432805=>_0x432805['id']===this[_0x5af148(0x921)]['wuid']+_0x5af148(0x2d9)),_0x356621=_0x222e2b&&_0x5726ca[_0x5af148(0x72b)](_0x534d28=>_0x534d28['id']===this[_0x5af148(0x921)][_0x5af148(0x2d1)]+_0x5af148(0x2d9)&&_0x534d28[_0x5af148(0x38a)]!=null)||!0x1,_0x40bc67=_0x222e2b&&(!_0x56a864[_0x5af148(0x702)][_0x5af148(0x736)]||_0x356621)&&(!_0x56a864[_0x5af148(0x702)][_0x5af148(0x2b9)]||_0x356621);await this[_0x5af148(0x3cf)][_0x5af148(0x947)][_0x5af148(0x66e)]({'where':{'_id':_0x2c3041['id']}},{'groupdata':{..._0x56a864[_0x5af148(0x702)],'participants':_0x5726ca,'size':_0xd79179,'isAdmin':_0x356621,'canSendMessage':_0x40bc67}},this[_0x5af148(0x921)][_0x5af148(0x2d1)]),this[_0x5af148(0x755)][_0x5af148(0x4f4)](this[_0x5af148(0x474)]+'\x20('+this[_0x5af148(0x921)][_0x5af148(0x2d1)]+_0x5af148(0x3c2)+_0x2c3041['id']+'\x20atualizado\x20com\x20sucesso.\x20Ação:\x20'+_0x2c3041['action']+_0x5af148(0x37e)+_0xd79179+_0x5af148(0x4ed)+_0x356621+_0x5af148(0x391)+_0x40bc67);}async[a0_0x1df5a5(0x536)](_0x26bfc1,_0x3aa5b5=!0x0){const _0x4a68c2=a0_0x1df5a5;try{let _0x3223c3=await this['client'][_0x4a68c2(0x885)](_0x26bfc1[_0x4a68c2(0x56b)]),_0x41c838={'groupdata.inviteCode':_0x4a68c2(0x80b)+_0x3223c3};if(_0x3aa5b5){let _0x4f08de=await this[_0x4a68c2(0x3cf)][_0x4a68c2(0x947)][_0x4a68c2(0x66e)]({'where':{'_id':_0x26bfc1[_0x4a68c2(0x56b)]}},_0x41c838,this[_0x4a68c2(0x921)]['wuid']);}return{'inviteUrl':'https://chat.whatsapp.com/'+_0x3223c3,'inviteCode':_0x3223c3};}catch(_0x3d7f7d){let _0x18e466=_0x4a68c2(0x84e),_0x25611e=_0x3d7f7d instanceof Error?_0x3d7f7d[_0x4a68c2(0x6c9)]:typeof _0x3d7f7d==_0x4a68c2(0x1b3)?JSON['stringify'](_0x3d7f7d):_0x3d7f7d,_0x5ba889=_0x18e466+':\x20'+_0x25611e;throw this[_0x4a68c2(0x755)]['error'](this[_0x4a68c2(0x474)]+'\x20('+this[_0x4a68c2(0x921)]['wuid']+_0x4a68c2(0x91e)+_0x5ba889),new U(_0x5ba889);}}async[a0_0x1df5a5(0x47b)](_0x13d190){const _0xdb27e3=a0_0x1df5a5;try{let _0x939d6c=await this[_0xdb27e3(0x826)][_0xdb27e3(0x631)](_0x13d190['groupJid']);return{'revoked':!0x0,'inviteUrl':_0xdb27e3(0x80b)+_0x939d6c,'inviteCode':_0x939d6c};}catch(_0x36b9f0){let _0x39c5e5=_0xdb27e3(0x47c),_0x34f4c8=_0x36b9f0 instanceof Error?_0x36b9f0[_0xdb27e3(0x6c9)]:typeof _0x36b9f0=='object'?JSON[_0xdb27e3(0x28d)](_0x36b9f0):_0x36b9f0,_0x46cd78=_0x39c5e5+':\x20'+_0x34f4c8;throw this[_0xdb27e3(0x755)][_0xdb27e3(0x398)](this[_0xdb27e3(0x474)]+'\x20('+this['instance'][_0xdb27e3(0x2d1)]+'):\x20'+_0x46cd78),new U(_0x46cd78);}}async['joinGroup'](_0x104687){const _0x246e86=a0_0x1df5a5;try{if((0x0,J[_0x246e86(0x6ae)])(_0x104687['inviteCode']))var _0x24b921=_0x104687['inviteCode'][_0x246e86(0x709)]('/')[0x3];else var _0x24b921=_0x104687[_0x246e86(0x536)];let _0x56ea33=await this['client'][_0x246e86(0x83c)](_0x24b921);return this[_0x246e86(0x755)][_0x246e86(0x3fb)](this['instanceName']+'\x20('+this[_0x246e86(0x921)][_0x246e86(0x2d1)]+'):\x20'+_0x56ea33),{'join':!0x0,'inviteCode':_0x24b921,'groupJid':_0x56ea33};}catch(_0x1a709a){let _0x547db5='Falha\x20ao\x20processar\x20a\x20solicitação\x20-\x20No\x20join\x20group\x20invite\x20code\x20or\x20url',_0x4a90ba=_0x1a709a instanceof Error?_0x1a709a[_0x246e86(0x6c9)]:typeof _0x1a709a==_0x246e86(0x1b3)?JSON[_0x246e86(0x28d)](_0x1a709a):_0x1a709a,_0x5fb964=_0x547db5+':\x20'+_0x4a90ba;throw this[_0x246e86(0x755)][_0x246e86(0x398)](this[_0x246e86(0x474)]+'\x20('+this['instance']['wuid']+_0x246e86(0x91e)+_0x5fb964),new U(_0x5fb964);}}async[a0_0x1df5a5(0x3ff)](_0x583b52){const _0x2b1027=a0_0x1df5a5;try{return{'participants':(await this['repository'][_0x2b1027(0x947)]['findOne']({'where':{'_id':_0x583b52[_0x2b1027(0x56b)]}},this['instance'][_0x2b1027(0x2d1)]))[_0x2b1027(0x702)]['participants']};}catch(_0x3ac068){let _0x1c7a71='Falha\x20ao\x20processar\x20a\x20solicitação\x20findParticipants',_0xe514b6=_0x3ac068 instanceof Error?_0x3ac068['message']:typeof _0x3ac068=='object'?JSON[_0x2b1027(0x28d)](_0x3ac068):_0x3ac068,_0x45342d=_0x1c7a71+':\x20'+_0xe514b6;throw this[_0x2b1027(0x755)][_0x2b1027(0x398)](this[_0x2b1027(0x474)]+'\x20('+this['instance'][_0x2b1027(0x2d1)]+_0x2b1027(0x91e)+_0x45342d),new U(_0x45342d);}}async[a0_0x1df5a5(0x2fa)](_0x31e84e){const _0x5aea23=a0_0x1df5a5;try{return await this[_0x5aea23(0x826)][_0x5aea23(0x75d)](_0x31e84e[_0x5aea23(0x56b)]),{'groupJid':_0x31e84e[_0x5aea23(0x56b)],'leave':!0x0};}catch(_0x32f312){let _0xd26283=_0x5aea23(0x3cb),_0x5b978a=_0x32f312 instanceof Error?_0x32f312[_0x5aea23(0x6c9)]:typeof _0x32f312==_0x5aea23(0x1b3)?JSON[_0x5aea23(0x28d)](_0x32f312):_0x32f312,_0x5d3c60=_0xd26283+':\x20'+_0x5b978a;throw this[_0x5aea23(0x755)][_0x5aea23(0x398)](this[_0x5aea23(0x474)]+'\x20('+this[_0x5aea23(0x921)][_0x5aea23(0x2d1)]+_0x5aea23(0x91e)+_0x5d3c60),new m(_0x5d3c60);}}async[a0_0x1df5a5(0x62c)](_0x5319c7){const _0x28d7ba=a0_0x1df5a5;return await this[_0x28d7ba(0x233)](_0x5319c7[_0x28d7ba(0x737)],{'poll':{'name':_0x5319c7['pollMessage']?.[_0x28d7ba(0x5d3)],'selectableCount':_0x5319c7['pollMessage'][_0x28d7ba(0x41e)],'values':_0x5319c7[_0x28d7ba(0x62c)][_0x28d7ba(0x6f6)]}},_0x5319c7?.[_0x28d7ba(0x666)]);}async[a0_0x1df5a5(0x5c6)](_0x35fc83){const _0x415828=a0_0x1df5a5;return await this[_0x415828(0x233)](_0x35fc83[_0x415828(0x737)],{'listMessage':{'title':_0x35fc83[_0x415828(0x5c6)][_0x415828(0x6eb)],'description':_0x35fc83[_0x415828(0x5c6)][_0x415828(0x8f3)],'buttonText':_0x35fc83[_0x415828(0x5c6)]?.[_0x415828(0x629)],'footerText':_0x35fc83['listMessage']?.['footerText'],'sections':_0x35fc83[_0x415828(0x5c6)][_0x415828(0x5ee)],'listType':0x2}},_0x35fc83?.[_0x415828(0x666)]);}async[a0_0x1df5a5(0x1ec)](_0x15855a){const _0x378874=a0_0x1df5a5;this[_0x378874(0x921)][_0x378874(0x662)]===void 0x0&&await this[_0x378874(0x4f2)]();let _0x25f455;if(_0x15855a[_0x378874(0x1ec)][_0x378874(0x62b)]==='list'||_0x15855a[_0x378874(0x1ec)]['type']===_0x378874(0x8c6)){let _0x31cfbf=_0x15855a[_0x378874(0x1ec)]['text']['indexOf']('\x0a'),_0x3cf405='',_0x57ddb2='';_0x31cfbf!==-0x1?(_0x3cf405=_0x15855a[_0x378874(0x1ec)][_0x378874(0x5b9)][_0x378874(0x801)](0x0,_0x31cfbf)[_0x378874(0x30a)](),_0x57ddb2=_0x15855a['menuMessage']['text'][_0x378874(0x801)](_0x31cfbf+0x1)):_0x57ddb2=_0x15855a[_0x378874(0x1ec)][_0x378874(0x5b9)];let _0x5584b1=_0x15855a[_0x378874(0x1ec)][_0x378874(0x7dd)]['filter'](_0xaf86e6=>_0xaf86e6[_0x378874(0x30a)]()!==''),_0x58ef05=this[_0x378874(0x852)](_0x5584b1);_0x25f455={'listMessage':{'title':_0x3cf405,'description':_0x57ddb2,'buttonText':_0x15855a[_0x378874(0x1ec)][_0x378874(0x629)]||_0x378874(0x685),'footerText':_0x15855a[_0x378874(0x1ec)][_0x378874(0x90e)],'sections':_0x58ef05,'listType':0x2}};}else{if(_0x15855a['menuMessage'][_0x378874(0x62b)]===_0x378874(0x1ed)){let _0xf47c8b=_0x15855a['menuMessage']['choices'][_0x378874(0x93c)](_0x146824=>!(_0x146824['startsWith']('[')&&_0x146824[_0x378874(0x237)](']'))&&_0x146824['trim']()!=='')[_0x378874(0x948)](_0x130a12=>_0x130a12[_0x378874(0x709)]('\x0a')[0x0]);for(;_0xf47c8b[_0x378874(0x303)]<0x2;)_0xf47c8b[_0x378874(0x6cd)]('Opção\x20Falsa\x20'+(_0xf47c8b['length']+0x1));_0x25f455={'poll':{'name':_0x15855a['menuMessage'][_0x378874(0x5b9)],'selectableCount':_0x15855a[_0x378874(0x1ec)]['selectableCount']||0x1,'values':_0xf47c8b}};}else{if(_0x15855a[_0x378874(0x1ec)][_0x378874(0x62b)]===_0x378874(0x5e6)){let _0xa9bb0e=this[_0x378874(0x5b7)](_0x15855a[_0x378874(0x1ec)]['choices'][_0x378874(0x93c)](_0x35d17d=>!(_0x35d17d['startsWith']('[')&&_0x35d17d[_0x378874(0x237)](']'))));return _0x25f455={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x15855a[_0x378874(0x1ec)][_0x378874(0x5b9)]},'footer':_0x15855a[_0x378874(0x1ec)][_0x378874(0x90e)]?{'text':_0x15855a['menuMessage'][_0x378874(0x90e)]}:void 0x0,'nativeFlowMessage':{'buttons':_0xa9bb0e,'messageParamsJson':JSON[_0x378874(0x28d)]({'from':_0x378874(0x264),'templateId':_0x378874(0x300)+(0x0,re[_0x378874(0x850)])(0x12)['toString']('hex')[_0x378874(0x3e4)]()})}}}}},await this['sendMessageWithTypingButtons'](_0x15855a['number'],_0x25f455,_0x15855a?.[_0x378874(0x666)]);}else{if(_0x15855a['menuMessage'][_0x378874(0x62b)]===_0x378874(0x1c0)){let _0x3bd79d=this[_0x378874(0x8b8)](_0x15855a[_0x378874(0x1ec)][_0x378874(0x7dd)]);return _0x25f455={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadata':{},'deviceListMetadataVersion':0x2},'interactiveMessage':{'body':{'text':_0x15855a[_0x378874(0x1ec)]['text']},'footer':_0x15855a[_0x378874(0x1ec)][_0x378874(0x90e)]?{'text':_0x15855a[_0x378874(0x1ec)][_0x378874(0x90e)]}:void 0x0,'nativeFlowMessage':{'buttons':_0x3bd79d,'messageParamsJson':JSON[_0x378874(0x28d)]({'from':_0x378874(0x264),'templateId':_0x378874(0x300)+(0x0,re[_0x378874(0x850)])(0x12)[_0x378874(0x641)]('hex')[_0x378874(0x3e4)]()})}}}}},await this[_0x378874(0x239)](_0x15855a['number'],_0x25f455,_0x15855a?.['options']);}}}}return await this[_0x378874(0x233)](_0x15855a['number'],_0x25f455,_0x15855a?.[_0x378874(0x666)]);}[a0_0x1df5a5(0x5b7)](_0x1dc219){const _0x11ac77=a0_0x1df5a5;return _0x1dc219[_0x11ac77(0x948)](_0x1437aa=>{const _0xc83d77=_0x11ac77;let _0x3ab744=_0x1437aa[_0xc83d77(0x709)]('\x0a')[_0xc83d77(0x948)](_0x32a605=>_0x32a605[_0xc83d77(0x30a)]()),_0x126ef8=_0x3ab744[0x0],_0x1e3a67=_0x3ab744[0x1]||_0x126ef8,_0x35f7b9=_0x1e3a67[_0xc83d77(0x832)](_0xc83d77(0x31a))?_0xc83d77(0x5fd):'quick_reply';return{'name':_0x35f7b9,'buttonParamsJson':JSON[_0xc83d77(0x28d)]({'display_text':_0x126ef8,'id':_0x35f7b9==='quick_reply'?_0x1e3a67:void 0x0,'url':_0x35f7b9===_0xc83d77(0x5fd)?_0x1e3a67:void 0x0})};});}[a0_0x1df5a5(0x8b8)](_0x100da3){const _0x1dfe67=a0_0x1df5a5;let _0x4e497d=[],_0x11593a={'title':'','rows':[]};return _0x100da3[_0x1dfe67(0x504)](_0x3fe971=>{const _0x28e426=_0x1dfe67;if(_0x3fe971['startsWith']('[')&&_0x3fe971[_0x28e426(0x237)](']'))_0x11593a[_0x28e426(0x6a0)][_0x28e426(0x303)]>0x0&&_0x4e497d['push'](_0x11593a),_0x11593a={'title':_0x3fe971['slice'](0x1,-0x1),'rows':[]};else{let _0x533e31=_0x3fe971[_0x28e426(0x709)]('\x0a')[_0x28e426(0x948)](_0x5864e1=>_0x5864e1['trim']()),_0x4e9373=_0x533e31[0x0],_0x1f24b5=_0x533e31[0x1]?_0x533e31[0x1]:void 0x0,_0x1496a8=_0x533e31[0x2]||_0x4e9373;_0x11593a[_0x28e426(0x6a0)][_0x28e426(0x6cd)]({'title':_0x4e9373,'description':_0x1f24b5,'id':_0x1496a8});}}),_0x11593a['rows']['length']>0x0&&_0x4e497d[_0x1dfe67(0x6cd)](_0x11593a),[{'name':_0x1dfe67(0x85d),'buttonParamsJson':JSON[_0x1dfe67(0x28d)]({'title':_0x1dfe67(0x514),'sections':_0x4e497d})}];}[a0_0x1df5a5(0x852)](_0x4e90f8){const _0x406ed9=a0_0x1df5a5;let _0x4aa8f9=[],_0x3d2a75={'rows':[]};return _0x4e90f8['forEach'](_0x38df7f=>{const _0x396ff8=a0_0x5a64;if(_0x38df7f[_0x396ff8(0x832)]('[')&&_0x38df7f[_0x396ff8(0x237)](']'))_0x3d2a75[_0x396ff8(0x6a0)][_0x396ff8(0x303)]>0x0&&_0x4aa8f9[_0x396ff8(0x6cd)](_0x3d2a75),_0x3d2a75={'title':_0x38df7f[_0x396ff8(0x5c2)](0x1,-0x1),'rows':[]};else{let _0x487350=_0x38df7f[_0x396ff8(0x709)]('\x0a')[_0x396ff8(0x948)](_0x1a1a9c=>_0x1a1a9c[_0x396ff8(0x30a)]()),_0x74a999=_0x487350[0x0],_0x11fb95=_0x487350[0x1]||null,_0x67aeb6=_0x487350[0x2]||_0x74a999;_0x3d2a75[_0x396ff8(0x6a0)][_0x396ff8(0x6cd)]({'title':_0x74a999,'description':_0x11fb95,'rowId':_0x67aeb6});}}),_0x3d2a75[_0x406ed9(0x6a0)][_0x406ed9(0x303)]>0x0&&_0x4aa8f9[_0x406ed9(0x6cd)](_0x3d2a75),_0x4aa8f9;}async[a0_0x1df5a5(0x859)](_0x2a06bb,_0x11b254){const _0x177ce5=a0_0x1df5a5;if(await this[_0x177ce5(0x699)](_0x2a06bb,!0x0)){let _0xf7c8c3={'where':{'_id':_0x2a06bb['id']}},_0x5c75ef={'status':[_0x11b254[_0x177ce5(0x781)]][0x0]};try{let _0x4443f3=await this[_0x177ce5(0x3cf)][_0x177ce5(0x6c9)][_0x177ce5(0x62e)](_0xf7c8c3,_0x5c75ef,this[_0x177ce5(0x921)][_0x177ce5(0x2d1)]);_0x4443f3&&F(this[_0x177ce5(0x474)],'messages',{'message':_0x4443f3});}catch{}}}[a0_0x1df5a5(0x294)](_0x634173){const _0x2432cc=a0_0x1df5a5;let _0x27002c=[];return _0x634173[_0x2432cc(0x504)](_0x128e96=>{const _0x41f9fe=_0x2432cc;_0x128e96[_0x41f9fe(0x6eb)]&&_0x27002c[_0x41f9fe(0x6cd)]('['+_0x128e96[_0x41f9fe(0x6eb)]+']'),_0x128e96['rows']['forEach'](_0xc73ad1=>{const _0x4e1f1e=_0x41f9fe;_0x27002c[_0x4e1f1e(0x6cd)](_0xc73ad1[_0x4e1f1e(0x6eb)]);});}),_0x27002c[_0x2432cc(0x4bc)]('|');}['formatVCard'](_0x4ebb03){const _0x30c65d=a0_0x1df5a5;let _0x23e003=_0x4ebb03[_0x30c65d(0x894)](/\\n/g,'\x0a')[_0x30c65d(0x709)]('\x0a')[_0x30c65d(0x93c)](_0x50edd2=>_0x50edd2[_0x30c65d(0x5f2)](_0x30c65d(0x455))||_0x50edd2[_0x30c65d(0x5f2)](_0x30c65d(0x457))),_0x359cac='';return _0x23e003[_0x30c65d(0x504)](_0x1ec053=>{const _0x579231=_0x30c65d;let _0x2ad725=/TEL(?:.*):(.+)/,_0xb33e9f=/EMAIL(?:.*):(.+)/,_0x3db8db=_0x1ec053[_0x579231(0x3c5)](_0x2ad725),_0x5087d5=_0x1ec053[_0x579231(0x3c5)](_0xb33e9f);if(_0x3db8db){let _0x10bea7=_0x3db8db[0x1][_0x579231(0x894)](/-| |\+|\(|\)/g,'')[_0x579231(0x30a)]();_0x359cac+=_0x579231(0x66f)+_0x10bea7+'\x0a';}else{if(_0x5087d5){let _0x5ebe1a=_0x5087d5[0x1][_0x579231(0x30a)]();_0x359cac+=_0x579231(0x1c4)+_0x5ebe1a+'\x0a';}}}),_0x359cac['trim']();}async[a0_0x1df5a5(0x68f)](_0xff937b,_0x134838,_0x38e9d2,_0x3f6771=null){const _0x3271f7=a0_0x1df5a5;if(_0xff937b[_0x3271f7(0x765)])try{let _0x4b870c=_0x134838[_0x3271f7(0x440)][_0x3271f7(0x788)][_0x3271f7(0x894)](/:\d{1,2}@/g,'@'),_0x1ada37=_0x134838[_0x3271f7(0x440)][_0x3271f7(0x89a)],_0x3ee050=_0x4b870c['endsWith'](_0x3271f7(0x8ca)),_0x4a8471=_0x134838['participant']?.[_0x3271f7(0x894)](/:\d{1,2}@/g,'@')||'',_0x5d6724=_0x134838[_0x3271f7(0x213)]?.[_0x3271f7(0x5b9)]||_0x134838[_0x3271f7(0x213)]?.['caption']||_0x134838[_0x3271f7(0x213)]?.['vote']||_0x134838[_0x3271f7(0x213)]?.[_0x3271f7(0x5d3)]||'',_0x45ee27={'_id':_0x134838['_id'],'remoteJid':_0x1ada37?this['instance']['wuid']:_0x3ee050?_0x4a8471:_0x4b870c,'pushName':_0x1ada37?this['instance']['profileName']||'Eu':_0x134838[_0x3271f7(0x91a)],'text':_0x5d6724,'type':_0x134838[_0x3271f7(0x414)],'when':_0x134838[_0x3271f7(0x6f2)]||Date[_0x3271f7(0x78f)]()};_0x3f6771||(_0x3f6771=await this['repository'][_0x3271f7(0x947)]['findOne']({'where':{'_id':_0x4b870c}},this[_0x3271f7(0x921)]['wuid']));let _0x574be8=_0x1ada37?0x0:_0x3f6771?(_0x3f6771['unreadcount']||0x0)+0x1:0x1,_0x3bb918={'lastmsg':_0x134838[_0x3271f7(0x6f2)]||Date[_0x3271f7(0x78f)](),'ephemeralExpiration':_0x134838[_0x3271f7(0x33a)],'lastMessage':_0x45ee27,'unreadcount':_0x574be8,..._0x1ada37||_0x3ee050?{}:{'name':_0x134838['pushName']},..._0x3ee050?{'group':_0x3ee050}:{},...!_0x1ada37&&!_0x3ee050&&_0x134838[_0x3271f7(0x912)]?{'imagechat':_0x134838[_0x3271f7(0x912)]}:{}};if(!_0x3ee050&&(!_0x3f6771?.['leadInfo']||!_0x3f6771[_0x3271f7(0x57a)]['nome'])&&_0x134838['pushName']&&!_0x1ada37&&(_0x3bb918={..._0x3bb918,'leadInfo.nome':_0x134838['pushName']}),_0x3f6771?.['leadInfo'][_0x3271f7(0x553)]||(_0x3bb918={..._0x3bb918,'leadInfo.etiquetas':[]}),_0x3f6771?.[_0x3271f7(0x57a)][_0x3271f7(0x5ae)]||(_0x3bb918={..._0x3bb918,'leadInfo.customFields':[]}),_0x3f6771?.[_0x3271f7(0x57a)]['tags']||(_0x3bb918={..._0x3bb918,'leadInfo.tags':[]}),_0x3f6771&&_0x3f6771?.[_0x3271f7(0x3ee)]){let _0x87fb86=await this[_0x3271f7(0x3cf)][_0x3271f7(0x749)][_0x3271f7(0x756)]({'where':{}},this['instance']['wuid']),_0x9c866e=new Set(_0x87fb86[_0x3271f7(0x948)](_0x5dc8dc=>_0x5dc8dc[_0x3271f7(0x5da)])),_0x5c10b7=(_0x3f6771[_0x3271f7(0x57a)]?.[_0x3271f7(0x553)]||[])[_0x3271f7(0x93c)](_0x3b2d01=>_0x9c866e[_0x3271f7(0x664)](_0x3b2d01));_0x3bb918={..._0x3bb918,'imported':!0x1,'leadInfo.etiquetas':_0x5c10b7};for(let _0x5bf346 of _0x5c10b7)await this[_0x3271f7(0x824)](_0x5bf346,_0x4b870c);}if(!this['AutomateSystem'][_0x3271f7(0x714)][_0x3271f7(0x756)](_0x14355a=>_0x14355a[_0x3271f7(0x3c0)]&&_0x5d6724[_0x3271f7(0x5f2)](_0x14355a[_0x3271f7(0x3c0)]))&&_0x38e9d2===_0x3271f7(0x549)&&_0x1ada37&&this[_0x3271f7(0x48e)]?.[_0x3271f7(0x209)]['enabled']&&_0x5d6724[_0x3271f7(0x30a)]()!==this[_0x3271f7(0x48e)]?.['flowConfig'][_0x3271f7(0x692)]['trim']()){let _0x2134ec=(this[_0x3271f7(0x48e)]?.['flowConfig'][_0x3271f7(0x6bd)]||0x0)*0xea60,_0x3ba65f=Date[_0x3271f7(0x78f)]()+_0x2134ec;_0x3f6771?.[_0x3271f7(0x57a)]?.[_0x3271f7(0x298)]===0x0||(_0x3bb918={..._0x3bb918,'leadInfo.desativadoFluxoAte':_0x3ba65f},this[_0x3271f7(0x755)][_0x3271f7(0x3fb)](this['instanceName']+'\x20('+this[_0x3271f7(0x921)][_0x3271f7(0x2d1)]+_0x3271f7(0x226)+_0x3ba65f+'.'));}if(_0x5d6724[_0x3271f7(0x30a)]()===this[_0x3271f7(0x48e)]?.[_0x3271f7(0x209)][_0x3271f7(0x692)][_0x3271f7(0x30a)]()){this['logger'][_0x3271f7(0x3fb)](this['instanceName']+'\x20('+this[_0x3271f7(0x921)]['wuid']+_0x3271f7(0x8b2)+_0x5d6724);let _0xf72fb3=Date[_0x3271f7(0x78f)]();this[_0x3271f7(0x48e)]?.[_0x3271f7(0x209)][_0x3271f7(0x573)]===0x0?_0x3bb918={..._0x3bb918,'leadInfo.desativadoFluxoAte':_0xf72fb3+0x7591f6200}:_0x3bb918={..._0x3bb918,'leadInfo.desativadoFluxoAte':_0xf72fb3+this['AutomateSystem']?.[_0x3271f7(0x209)][_0x3271f7(0x573)]*0x3c*0x3e8};}if(_0x3f6771=await this[_0x3271f7(0x3cf)][_0x3271f7(0x947)][_0x3271f7(0x66e)]({'where':{'_id':_0x4b870c}},_0x3bb918,this['instance'][_0x3271f7(0x2d1)],{'new':!0x0,'upsert':!0x0}),_0x3f6771)F(this['instanceName'],_0x3271f7(0x64d),{'chat':_0x3f6771});else{this[_0x3271f7(0x755)][_0x3271f7(0x398)](this['instanceName']+'\x20('+this[_0x3271f7(0x921)]['wuid']+_0x3271f7(0x3f3));return;}if(_0x1ada37)return this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x3271f7(0x921)][_0x3271f7(0x2d1)]+_0x3271f7(0x5e4)),null;if(!this[_0x3271f7(0x48e)]?.[_0x3271f7(0x209)]['enabled'])return this['logger'][_0x3271f7(0x3fb)](this[_0x3271f7(0x474)]+'\x20('+this[_0x3271f7(0x921)][_0x3271f7(0x2d1)]+_0x3271f7(0x90d)),null;if(_0x3f6771[_0x3271f7(0x5da)][_0x3271f7(0x5f2)](_0x3271f7(0x8ca))&&this[_0x3271f7(0x48e)]?.['flowConfig']['ignoreGroups']===!0x0)return this['logger'][_0x3271f7(0x3fb)](this[_0x3271f7(0x474)]+'\x20('+this[_0x3271f7(0x921)][_0x3271f7(0x2d1)]+_0x3271f7(0x393)),null;if(_0x3f6771['leadInfo']){if(_0x3f6771[_0x3271f7(0x57a)][_0x3271f7(0x298)]===0x0||_0x3f6771[_0x3271f7(0x57a)]['atendimentoAberto'])return this[_0x3271f7(0x755)][_0x3271f7(0x3fb)](this[_0x3271f7(0x474)]+'\x20('+this['instance'][_0x3271f7(0x2d1)]+'):\x20Os\x20fluxos\x20estão\x20desativados\x20para\x20'+_0x4b870c+_0x3271f7(0x7c9)),null;if(_0x3f6771[_0x3271f7(0x57a)]['desativadoFluxoAte']>Date['now']()&&!_0x134838[_0x3271f7(0x213)]?.[_0x3271f7(0x943)])return this[_0x3271f7(0x755)][_0x3271f7(0x3fb)](this[_0x3271f7(0x474)]+'\x20('+this[_0x3271f7(0x921)][_0x3271f7(0x2d1)]+_0x3271f7(0x260)+new Date(_0x3f6771[_0x3271f7(0x57a)][_0x3271f7(0x298)])['toLocaleString']()+_0x3271f7(0x7c9)),null;}this['logger'][_0x3271f7(0x3fb)](this[_0x3271f7(0x474)]+'\x20('+this['instance'][_0x3271f7(0x2d1)]+_0x3271f7(0x4fa)),this[_0x3271f7(0x7d8)](_0x134838,_0x38e9d2);}catch(_0x4ddbc2){let _0x9ae15a=_0x3271f7(0x609),_0x1cfa2=_0x4ddbc2 instanceof Error?_0x4ddbc2[_0x3271f7(0x6c9)]:typeof _0x4ddbc2=='object'?JSON[_0x3271f7(0x28d)](_0x4ddbc2):_0x4ddbc2,_0x2c6d95=_0x9ae15a+':\x20'+_0x1cfa2;return this[_0x3271f7(0x755)][_0x3271f7(0x398)](this[_0x3271f7(0x474)]+'\x20('+this['instance'][_0x3271f7(0x2d1)]+_0x3271f7(0x91e)+_0x2c6d95),null;}}async[a0_0x1df5a5(0x499)](_0xa3876b,_0x509cd7){const _0x377544=a0_0x1df5a5;if(_0x509cd7['ENABLED']){let _0x3ce448=_0xa3876b[_0x377544(0x948)](async _0x334851=>{const _0x34a170=_0x377544;try{let _0x2d1628={'_id':_0x334851[_0x34a170(0x5da)],'owner':_0x334851[_0x34a170(0x36f)],'lastcache':0x0};if(Object['keys'](_0x334851)[_0x34a170(0x504)](_0x2d84ab=>{_0x334851[_0x2d84ab]!==null&&(_0x2d1628[_0x2d84ab]=_0x334851[_0x2d84ab]);}),_0x2d1628[_0x34a170(0x594)]===null&&(_0x2d1628[_0x34a170(0x594)]=_0x34a170(0x690)),Object['keys'](_0x2d1628)['length']>0x0)return await this[_0x34a170(0x3cf)][_0x34a170(0x947)]['updateOne']({'where':{'_id':_0x334851[_0x34a170(0x5da)]}},_0x2d1628,this[_0x34a170(0x921)][_0x34a170(0x2d1)]);}catch(_0x3c9058){let _0x2a4c58=_0x34a170(0x339)+_0x334851[_0x34a170(0x5da)],_0x145216=_0x3c9058 instanceof Error?_0x3c9058['message']:typeof _0x3c9058==_0x34a170(0x1b3)?JSON[_0x34a170(0x28d)](_0x3c9058):_0x3c9058,_0x1f1526=_0x2a4c58+':\x20'+_0x145216;return this['logger'][_0x34a170(0x398)](this['instanceName']+'\x20('+this[_0x34a170(0x921)]['wuid']+'):\x20'+_0x1f1526),null;}}),_0x25d134=(await Promise[_0x377544(0x75e)](_0x3ce448))[_0x377544(0x93c)](_0x480377=>_0x480377!==null)['length'];this[_0x377544(0x755)][_0x377544(0x3fb)](this['instanceName']+'\x20('+this[_0x377544(0x921)]['wuid']+_0x377544(0x91e)+_0x25d134+'\x20chats\x20de\x20'+this[_0x377544(0x921)][_0x377544(0x2d1)]+_0x377544(0x6c7));}}async[a0_0x1df5a5(0x526)](_0x285641){const _0x4cf492=a0_0x1df5a5;this[_0x4cf492(0x755)][_0x4cf492(0x3fb)](this[_0x4cf492(0x474)]+'\x20('+this[_0x4cf492(0x921)]['wuid']+_0x4cf492(0x3e8));let _0x48e2bb={'readMessages':[{'remoteJid':_0x285641['chatLog']['lastReceivedMessage'][_0x4cf492(0x440)][_0x4cf492(0x788)],'fromMe':_0x285641[_0x4cf492(0x731)][_0x4cf492(0x6e1)][_0x4cf492(0x440)]['fromMe'],'id':_0x285641[_0x4cf492(0x731)][_0x4cf492(0x6e1)][_0x4cf492(0x440)]['id']}]};await this['markMessageAsRead'](_0x48e2bb);}async[a0_0x1df5a5(0x7d8)](_0x201fc2,_0x4656fc){const _0x33ded1=a0_0x1df5a5;try{let {key:_0x48fc34,message_normalized:_0xf3ecf8}=_0x201fc2,_0x28b6ae=_0xf3ecf8,_0x21aa40=_0xf3ecf8[_0x33ded1(0x5b9)]||_0xf3ecf8[_0x33ded1(0x4a2)]||_0xf3ecf8[_0x33ded1(0x943)]||_0xf3ecf8[_0x33ded1(0x5d3)]||'',_0x5b659e=_0x48fc34[_0x33ded1(0x788)],_0x481aa1=null,_0x2d9eda=this[_0x33ded1(0x48e)][_0x33ded1(0x714)][_0x33ded1(0x756)](_0x4e4cbf=>_0x4e4cbf[_0x33ded1(0x3c0)]&&_0x21aa40[_0x33ded1(0x5f2)](_0x4e4cbf[_0x33ded1(0x3c0)]));if(_0x2d9eda&&_0x4656fc===_0x33ded1(0x549)){let _0x5f5b8f=await this[_0x33ded1(0x3cf)][_0x33ded1(0x461)][_0x33ded1(0x694)]({'where':{'_id':_0x2d9eda[_0x33ded1(0x5da)]}});if(this[_0x33ded1(0x755)][_0x33ded1(0x3fb)](this['instanceName']+'\x20('+this[_0x33ded1(0x921)][_0x33ded1(0x2d1)]+_0x33ded1(0x619)),_0x5f5b8f&&_0x5f5b8f['whoCanUse']?.[_0x33ded1(0x5f2)](this['instance']['wuid']))_0x481aa1=await this[_0x33ded1(0x33f)](_0x5f5b8f,_0x48fc34,_0x28b6ae);else return this[_0x33ded1(0x755)][_0x33ded1(0x3fb)](this[_0x33ded1(0x474)]+'\x20('+this[_0x33ded1(0x921)][_0x33ded1(0x2d1)]+_0x33ded1(0x51e)),null;}else this[_0x33ded1(0x755)]['verbose'](this[_0x33ded1(0x474)]+'\x20('+this['instance']['wuid']+_0x33ded1(0x8a6));if(_0x481aa1=await this[_0x33ded1(0x94a)](_0x5b659e,_0x28b6ae),_0x481aa1){this[_0x33ded1(0x755)][_0x33ded1(0x3fb)](this[_0x33ded1(0x474)]+'\x20('+this['instance'][_0x33ded1(0x2d1)]+_0x33ded1(0x32b)),!_0x48fc34[_0x33ded1(0x89a)]&&_0x481aa1['readMessages']&&this[_0x33ded1(0x526)](_0x481aa1);let _0x5cb194=await this[_0x33ded1(0x650)](_0x481aa1);_0x5cb194&&await this[_0x33ded1(0x39f)](_0x481aa1,_0x5cb194);}}catch(_0x28bf9b){this['logger'][_0x33ded1(0x398)](this[_0x33ded1(0x474)]+'\x20('+this[_0x33ded1(0x921)][_0x33ded1(0x2d1)]+'):\x20Ocorreu\x20um\x20erro\x20durante\x20o\x20processamento:\x20'+(_0x28bf9b instanceof Error?_0x28bf9b['message']:JSON['stringify'](_0x28bf9b,null,0x2)));}}[a0_0x1df5a5(0x37a)](_0x1744ab,_0x409d35='',_0x42f671={}){const _0x14f297=a0_0x1df5a5;return typeof _0x1744ab!=_0x14f297(0x1b3)||_0x1744ab===null?(_0x409d35&&(_0x42f671[_0x409d35]=_0x1744ab),_0x42f671):(Object[_0x14f297(0x8da)](_0x1744ab)[_0x14f297(0x504)](([_0x4fd265,_0x6243e5])=>{const _0x558ca7=_0x14f297;let _0x57b9e9=_0x409d35?_0x409d35+'.'+_0x4fd265:'_'+_0x4fd265;Array[_0x558ca7(0x4d9)](_0x6243e5)?_0x6243e5[_0x558ca7(0x504)]((_0x58e735,_0x11d1cd)=>{const _0x34cacf=_0x558ca7;this[_0x34cacf(0x37a)](_0x58e735,_0x57b9e9+'['+_0x11d1cd+']',_0x42f671);}):typeof _0x6243e5==_0x558ca7(0x1b3)&&_0x6243e5!==null?this[_0x558ca7(0x37a)](_0x6243e5,_0x57b9e9,_0x42f671):_0x42f671[_0x57b9e9]=String(_0x6243e5);}),_0x42f671);}[a0_0x1df5a5(0x4f9)](_0xec495){const _0x554849=a0_0x1df5a5;let _0x151612={};for(let _0x9c429a of _0xec495)typeof _0x9c429a[_0x554849(0x5d3)]==_0x554849(0x1d0)&&typeof _0x9c429a[_0x554849(0x732)]==_0x554849(0x1d0)&&(_0x151612[_0x9c429a[_0x554849(0x5d3)]]=_0x9c429a['value']);return _0x151612;}async['NextBlock'](_0x311d6d){const _0xd766ee=a0_0x1df5a5;if(!this['AutomateSystem']?.[_0xd766ee(0x209)][_0xd766ee(0x3eb)]||_0x311d6d['status']!==_0xd766ee(0x20b)&&_0x311d6d[_0xd766ee(0x85a)]==='')return null;let _0x135073=_0x311d6d[_0xd766ee(0x731)][_0xd766ee(0x63f)]||'start';typeof _0x311d6d[_0xd766ee(0x731)][_0xd766ee(0x4c5)]>'u'&&(_0x311d6d[_0xd766ee(0x731)][_0xd766ee(0x4c5)]=!0x0);let _0x3feec0=_0x311d6d['chatLog']['lastCondition'];this['logger'][_0xd766ee(0x3fb)](this[_0xd766ee(0x474)]+'\x20('+this[_0xd766ee(0x921)][_0xd766ee(0x2d1)]+_0xd766ee(0x60e)+_0x135073+_0xd766ee(0x5cf)+_0x3feec0);let _0x4ceec5=_0x135073===_0xd766ee(0x3af)?_0x311d6d['blocks'][_0xd766ee(0x756)](_0x377e19=>_0x377e19['type']==='start'):_0x311d6d[_0xd766ee(0x90f)][_0xd766ee(0x756)](_0x2f50f3=>_0x2f50f3[_0xd766ee(0x5da)][_0xd766ee(0x641)]()===_0x135073[_0xd766ee(0x641)]());if(!_0x4ceec5)return this[_0xd766ee(0x755)][_0xd766ee(0x398)](this['instanceName']+'\x20('+this[_0xd766ee(0x921)][_0xd766ee(0x2d1)]+'):\x20currentBlock\x20é\x20null.\x20Não\x20foi\x20possível\x20encontrar\x20um\x20bloco\x20correspondente\x20para\x20lastBlockId:\x20'+_0x135073),null;let _0xdf6064={'_pushName':_0x311d6d?.[_0xd766ee(0x731)]?.[_0xd766ee(0x6e1)]?.[_0xd766ee(0x91a)]||'','_sender':this[_0xd766ee(0x921)][_0xd766ee(0x2d1)]||'',..._0x311d6d['chatLog'][_0xd766ee(0x90c)]},_0x2679ee=new Date();_0xdf6064['_day']=_0x2679ee[_0xd766ee(0x8b9)](),_0xdf6064[_0xd766ee(0x1f5)]=_0x2679ee[_0xd766ee(0x6ad)]()+0x1,_0xdf6064[_0xd766ee(0x4f1)]=_0x2679ee['getFullYear'](),_0xdf6064['_hour']=_0x2679ee['getHours'](),_0xdf6064[_0xd766ee(0x4a3)]=_0x2679ee[_0xd766ee(0x3e1)](),_0xdf6064[_0xd766ee(0x7af)]=_0x2679ee['getSeconds']();let _0x34618c=null;if(_0x311d6d[_0xd766ee(0x85a)]){let _0x40bdb3=_0x311d6d[_0xd766ee(0x731)][_0xd766ee(0x6e1)][_0xd766ee(0x943)],_0x4fde87=_0x311d6d[_0xd766ee(0x790)]['find'](_0x20d058=>_0x20d058[_0xd766ee(0x747)]===_0x40bdb3);if(_0x4fde87){let _0x2527bf=_0x4fde87['next_groupId'];if(_0x34618c=_0x311d6d[_0xd766ee(0x90f)][_0xd766ee(0x756)](_0x30a4d2=>_0x30a4d2['groupId']===_0x2527bf&&_0x30a4d2[_0xd766ee(0x751)]===0x1),_0x4ceec5[_0xd766ee(0x3b6)]['pollOnReplyDelete']){let _0x20b29f={'id':_0x311d6d[_0xd766ee(0x85a)],'remoteJid':_0x311d6d[_0xd766ee(0x788)],'fromMe':!0x0};await this['deleteMessage'](_0x20b29f);}if(_0x4ceec5[_0xd766ee(0x3b6)][_0xd766ee(0x1f2)]&&_0x4ceec5[_0xd766ee(0x3b6)][_0xd766ee(0x73a)]&&_0x4ceec5[_0xd766ee(0x3b6)][_0xd766ee(0x870)]===_0xd766ee(0x1ed)){let _0x4e326e={'number':_0x311d6d[_0xd766ee(0x788)],'options':{'delay':0x0},'textMessage':{'text':_0xd766ee(0x28c)+_0x311d6d['waitingMenu_text']+_0xd766ee(0x88b)+_0x40bdb3}};await this[_0xd766ee(0x2ab)](_0x4e326e);}_0xdf6064['_lastVote']=_0x40bdb3,_0x311d6d['status']=_0xd766ee(0x20b),_0x311d6d['waitingMenu_id']='',_0x311d6d[_0xd766ee(0x7a7)]='',_0x311d6d['waitingMenu_replyOptions']=[];}else{this[_0xd766ee(0x755)][_0xd766ee(0x3fb)](this[_0xd766ee(0x474)]+'\x20('+this['instance'][_0xd766ee(0x2d1)]+_0xd766ee(0x830));let _0x3b5690={'activatedCount':_0x311d6d['chatLog'][_0xd766ee(0x4a7)]['filter'](_0x198d7b=>String(_0x198d7b[_0xd766ee(0x8b4)])===String(_0x135073))['length'],'moreLogs':['Não\x20respondeu\x20com\x20a\x20enquete.']};if(_0x4ceec5[_0xd766ee(0x3b6)][_0xd766ee(0x497)]){let _0x1a6d67={'number':_0x311d6d[_0xd766ee(0x788)],'options':{'delay':0x0},'textMessage':{'text':_0x4ceec5[_0xd766ee(0x3b6)][_0xd766ee(0x497)]}};await this[_0xd766ee(0x2ab)](_0x1a6d67);}if(_0x4ceec5['maxActives']!==void 0x0&&_0x3b5690[_0xd766ee(0x4da)]>=_0x4ceec5[_0xd766ee(0x92a)]){let _0x23bbae=Date[_0xd766ee(0x78f)](),_0x3cf32b=_0x4ceec5['stopMinutesMaxActives']??0xa;isNaN(_0x3cf32b)&&(_0x3cf32b=0xa);let _0x453e87=_0x23bbae+_0x3cf32b*0x3c*0x3e8;_0x3b5690[_0xd766ee(0x855)]=_0x453e87,_0x3b5690['moreLogs'][_0xd766ee(0x6cd)]('Atingido\x20interações\x20máximas,\x20parando\x20fluxo'),this[_0xd766ee(0x2ca)](_0x311d6d,_0x453e87),_0x311d6d[_0xd766ee(0x85a)]='',_0x311d6d['waitingMenu_text']='',_0x311d6d[_0xd766ee(0x790)]=[];}return this[_0xd766ee(0x4b4)](_0x311d6d,_0x4ceec5,_0x3b5690,!0x0),null;}}if(_0x3feec0&&_0x4ceec5[_0xd766ee(0x936)]&&!_0x311d6d[_0xd766ee(0x85a)]){let _0x1bfcc4=_0x311d6d[_0xd766ee(0x90f)][_0xd766ee(0x93c)](_0x2b733c=>_0x2b733c[_0xd766ee(0x30d)][_0xd766ee(0x641)]()===_0x4ceec5['next_groupId'][_0xd766ee(0x641)]())[_0xd766ee(0x766)]((_0x3d862c,_0x3874e6)=>_0x3d862c[_0xd766ee(0x751)]-_0x3874e6[_0xd766ee(0x751)]);_0x1bfcc4[_0xd766ee(0x303)]>0x0&&(_0x34618c=_0x1bfcc4[0x0]);}if(!_0x34618c){let _0x4a8567=_0x4ceec5[_0xd766ee(0x30d)],_0x4bc28c=_0x311d6d[_0xd766ee(0x90f)][_0xd766ee(0x93c)](_0x565711=>_0x565711[_0xd766ee(0x30d)]===_0x4a8567&&_0x565711['order']>_0x4ceec5[_0xd766ee(0x751)])[_0xd766ee(0x766)]((_0x3b3612,_0x3b7081)=>_0x3b3612[_0xd766ee(0x751)]-_0x3b7081[_0xd766ee(0x751)]);_0x4bc28c[_0xd766ee(0x303)]>0x0&&(_0x34618c=_0x4bc28c[0x0]);}if(!_0x34618c)return _0x311d6d[_0xd766ee(0x781)]=_0xd766ee(0x7f4),null;_0x311d6d['chatLog']['realVariables']=_0xdf6064;let _0x45e10b=JSON[_0xd766ee(0x8a5)](JSON['stringify'](_0x34618c));return this[_0xd766ee(0x35e)](_0x45e10b,_0x311d6d[_0xd766ee(0x731)][_0xd766ee(0x90c)]),_0x311d6d[_0xd766ee(0x731)][_0xd766ee(0x63f)]=_0x45e10b[_0xd766ee(0x5da)],_0x311d6d[_0xd766ee(0x731)]['lastCondition']=!0x0,_0x45e10b;}[a0_0x1df5a5(0x589)](_0x30d7d7,_0x10ec37){const _0x4798bb=a0_0x1df5a5;return _0x30d7d7[_0x4798bb(0x894)](/\{\{([^}]+)\}\}/g,(_0x492e32,_0x3cdcb4)=>_0x10ec37[_0x3cdcb4]||'');}[a0_0x1df5a5(0x35e)](_0x4d1c86,_0x50f3cb){const _0x5cddd9=a0_0x1df5a5;for(let _0x1ad76e in _0x4d1c86)typeof _0x4d1c86[_0x1ad76e]=='string'?_0x4d1c86[_0x1ad76e]=this[_0x5cddd9(0x589)](_0x4d1c86[_0x1ad76e],_0x50f3cb):typeof _0x4d1c86[_0x1ad76e]==_0x5cddd9(0x1b3)&&this[_0x5cddd9(0x35e)](_0x4d1c86[_0x1ad76e],_0x50f3cb);}async['goNextblock'](_0x53fa60,_0x108cdd){const _0x506dc8=a0_0x1df5a5;let _0x5b12e=_0x108cdd['_id'];if(_0x53fa60[_0x506dc8(0x731)]&&_0x53fa60['chatLog'][_0x506dc8(0x4a7)]){let _0x545721=_0x53fa60[_0x506dc8(0x731)][_0x506dc8(0x4a7)][_0x506dc8(0x93c)](_0x489fa9=>String(_0x489fa9[_0x506dc8(0x8b4)])===String(_0x5b12e))[_0x506dc8(0x76c)]();if(_0x545721&&_0x545721[_0x506dc8(0x398)]&&_0x108cdd[_0x506dc8(0x6b6)])return _0x53fa60[_0x506dc8(0x781)]='closed',await this[_0x506dc8(0x693)](_0x53fa60),null;}if(_0x108cdd[_0x506dc8(0x62b)]===_0x506dc8(0x3b6)&&_0x108cdd['uazapi'][_0x506dc8(0x72c)]===_0x506dc8(0x60a)&&_0x53fa60[_0x506dc8(0x85a)])return _0x53fa60[_0x506dc8(0x731)][_0x506dc8(0x63f)]=_0x5b12e,await this['saveConversationToDatabase'](_0x53fa60),null;let _0x3516fa=await this[_0x506dc8(0x650)](_0x53fa60);if(_0x53fa60[_0x506dc8(0x731)]&&_0x53fa60[_0x506dc8(0x731)][_0x506dc8(0x4a7)]){let _0x2cd287=_0x53fa60['chatLog'][_0x506dc8(0x4a7)][_0x506dc8(0x93c)](_0x54a9fa=>String(_0x54a9fa[_0x506dc8(0x8b4)])===String(_0x5b12e))['length'];if(_0x108cdd[_0x506dc8(0x92a)]!==void 0x0&&_0x2cd287>=_0x108cdd[_0x506dc8(0x92a)]){let _0x1dcd43=Date[_0x506dc8(0x78f)](),_0xe16241=_0x108cdd[_0x506dc8(0x2c0)]??0xa;isNaN(_0xe16241)&&(_0xe16241=0xa);let _0x4e2c70=_0x1dcd43+_0xe16241*0x3c*0x3e8,_0x305b72={'newStoppedUntil':_0x4e2c70};return this[_0x506dc8(0x2ca)](_0x53fa60,_0x4e2c70),this[_0x506dc8(0x4b4)](_0x53fa60,_0x108cdd,_0x305b72,!0x0),null;}}_0x3516fa&&_0x3516fa[_0x506dc8(0x62b)]!==_0x506dc8(0x67c)&&await this['processblock'](_0x53fa60,_0x3516fa),_0x3516fa||await this[_0x506dc8(0x693)](_0x53fa60),_0x3516fa&&_0x3516fa[_0x506dc8(0x62b)]===_0x506dc8(0x67c)&&(_0x53fa60['chatLog'][_0x506dc8(0x63f)]=_0x5b12e,await this[_0x506dc8(0x693)](_0x53fa60));}async[a0_0x1df5a5(0x39f)](_0x3826d4,_0x54fc75){const _0x295419=a0_0x1df5a5;try{let _0x2cc6f4=_0x54fc75[_0x295419(0x62b)];this[_0x295419(0x755)][_0x295419(0x3fb)](this[_0x295419(0x474)]+'\x20('+this[_0x295419(0x921)]['wuid']+_0x295419(0x92e)+_0x2cc6f4);let _0xd530cc={'uazapi':()=>this[_0x295419(0x63b)](_0x3826d4,_0x54fc75),'save':()=>this[_0x295419(0x567)](_0x3826d4,_0x54fc75),'stop':()=>this[_0x295419(0x692)](_0x3826d4,_0x54fc75),'condition':()=>this[_0x295419(0x69b)](_0x3826d4,_0x54fc75),'varedit':()=>this['processvaredits'](_0x3826d4,_0x54fc75),'apirequest':()=>this[_0x295419(0x71b)](_0x3826d4,_0x54fc75),'goToFlow':()=>this['processgoToFlow'](_0x3826d4,_0x54fc75),'scheduleFlow':()=>this[_0x295419(0x928)](_0x3826d4,_0x54fc75),'awaitSeconds':()=>this[_0x295419(0x1b0)](_0x3826d4,_0x54fc75),'clearVariables':()=>this[_0x295419(0x434)](_0x3826d4,_0x54fc75)}[_0x2cc6f4];_0xd530cc&&await _0xd530cc();}catch(_0x42207d){this[_0x295419(0x755)][_0x295419(0x398)](this['instanceName']+'\x20('+this[_0x295419(0x921)][_0x295419(0x2d1)]+_0x295419(0x6c8)+(_0x42207d instanceof Error?_0x42207d[_0x295419(0x6c9)]:JSON[_0x295419(0x28d)](_0x42207d,null,0x2)));}}async['processawaitSeconds'](_0x7cf066,_0x9469c5){const _0x51fca9=a0_0x1df5a5;if(this[_0x51fca9(0x755)]['verbose'](this['instanceName']+'\x20('+this[_0x51fca9(0x921)][_0x51fca9(0x2d1)]+_0x51fca9(0x1e0)),!_0x7cf066||!_0x9469c5)return this[_0x51fca9(0x755)][_0x51fca9(0x398)](this[_0x51fca9(0x474)]+'\x20('+this[_0x51fca9(0x921)][_0x51fca9(0x2d1)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0xac286b=+_0x9469c5['awaitSeconds'];isNaN(_0xac286b)&&(_0xac286b=0x0),_0xac286b=Math[_0x51fca9(0x7a9)](_0xac286b,0x3c),await(0x0,w['delay'])(_0xac286b*0x3e8);let _0x2c00b5={'moreLogs':[_0x51fca9(0x5bb)+_0xac286b+_0x51fca9(0x7b8)]};return await this[_0x51fca9(0x4b4)](_0x7cf066,_0x9469c5,_0x2c00b5),_0xac286b;}async[a0_0x1df5a5(0x434)](_0x4ed4d0,_0x5502b0){const _0x3f035d=a0_0x1df5a5;if(this[_0x3f035d(0x755)]['verbose'](this[_0x3f035d(0x474)]+'\x20('+this[_0x3f035d(0x921)][_0x3f035d(0x2d1)]+_0x3f035d(0x32d)),!_0x4ed4d0||!_0x5502b0)return this[_0x3f035d(0x755)]['error'](this[_0x3f035d(0x474)]+'\x20('+this[_0x3f035d(0x921)][_0x3f035d(0x2d1)]+_0x3f035d(0x311)),null;let _0x4f189d=[];if(_0x5502b0[_0x3f035d(0x630)]['trim']()==='[all]'){let _0x33a699=[_0x3f035d(0x50c),_0x3f035d(0x836),_0x3f035d(0x1c7),_0x3f035d(0x84b),_0x3f035d(0x898),_0x3f035d(0x5da),_0x3f035d(0x41b)];_0x4f189d=Object[_0x3f035d(0x326)](_0x4ed4d0[_0x3f035d(0x731)][_0x3f035d(0x90c)])[_0x3f035d(0x93c)](_0x23fd1a=>_0x23fd1a[_0x3f035d(0x832)]('_')&&!_0x33a699[_0x3f035d(0x5f2)](_0x23fd1a));}else _0x4f189d=_0x5502b0[_0x3f035d(0x630)][_0x3f035d(0x709)]('|')['map'](_0x3a77c5=>(_0x3a77c5=_0x3a77c5[_0x3f035d(0x894)](/[{}]/g,'')[_0x3f035d(0x30a)](),_0x3a77c5[_0x3f035d(0x832)]('_')?_0x3a77c5:'_'+_0x3a77c5));let _0x21fbca=[];_0x4f189d['forEach'](_0x58154b=>{const _0x25b78b=_0x3f035d;_0x58154b in _0x4ed4d0['chatLog']['realVariables']&&(delete _0x4ed4d0[_0x25b78b(0x731)]['realVariables'][_0x58154b],_0x21fbca[_0x25b78b(0x6cd)](_0x58154b));}),_0x21fbca['length']>0x0?this[_0x3f035d(0x755)][_0x3f035d(0x3fb)](this[_0x3f035d(0x474)]+'\x20('+this[_0x3f035d(0x921)][_0x3f035d(0x2d1)]+'):\x20Encontradas\x20e\x20removidas\x20as\x20variáveis:\x20'+_0x21fbca[_0x3f035d(0x4bc)](',\x20')):this[_0x3f035d(0x755)][_0x3f035d(0x3fb)](this[_0x3f035d(0x474)]+'\x20('+this[_0x3f035d(0x921)][_0x3f035d(0x2d1)]+_0x3f035d(0x475));let _0x1be55d={'moreLogs':[_0x3f035d(0x831)+_0x21fbca[_0x3f035d(0x4bc)](',\x20')]};return await this['updateConversation'](_0x4ed4d0,_0x5502b0,_0x1be55d),null;}async['processScheduleFlow'](_0x26fdd2,_0x11eb2e){const _0x184b2c=a0_0x1df5a5;if(this[_0x184b2c(0x755)]['verbose'](this[_0x184b2c(0x474)]+'\x20('+this[_0x184b2c(0x921)][_0x184b2c(0x2d1)]+_0x184b2c(0x708)),!_0x26fdd2||!_0x11eb2e)return this[_0x184b2c(0x755)][_0x184b2c(0x398)](this[_0x184b2c(0x474)]+'\x20('+this[_0x184b2c(0x921)][_0x184b2c(0x2d1)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x136247=_0x26fdd2[_0x184b2c(0x788)];_0x11eb2e[_0x184b2c(0x6f5)][_0x184b2c(0x788)]&&_0x11eb2e[_0x184b2c(0x6f5)][_0x184b2c(0x788)]['trim']()!==''&&(_0x136247=_0x11eb2e['uazapi'][_0x184b2c(0x788)][_0x184b2c(0x30a)]());let _0x359e65=_0x11eb2e[_0x184b2c(0x6f5)][_0x184b2c(0x21b)]*0xea60,_0x1972eb=Date[_0x184b2c(0x78f)]()+_0x359e65,_0x55f343={'status':_0x184b2c(0x333),'info':'Fluxo\x20agendado\x20pelo\x20fluxo\x20'+_0x26fdd2['name'],'remoteJids':[_0x136247],'when':_0x1972eb,'delaySecMin':0x0,'delaySecMax':0x0,'type':_0x184b2c(0x461),'flowName':_0x11eb2e[_0x184b2c(0x6f5)][_0x184b2c(0x8e2)]};this['editScheduleMessage'](_0x55f343);let _0x551315=await this[_0x184b2c(0x650)](_0x26fdd2);_0x551315&&await this[_0x184b2c(0x39f)](_0x26fdd2,_0x551315);}async['processgoToFlow'](_0x5c1c40,_0x4366ac){const _0x191b78=a0_0x1df5a5;if(this[_0x191b78(0x755)][_0x191b78(0x3fb)](this[_0x191b78(0x474)]+'\x20('+this[_0x191b78(0x921)][_0x191b78(0x2d1)]+_0x191b78(0x380)),!_0x5c1c40||!_0x4366ac)return this[_0x191b78(0x755)][_0x191b78(0x398)](this['instanceName']+'\x20('+this[_0x191b78(0x921)][_0x191b78(0x2d1)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;await this['updateConversation'](_0x5c1c40,_0x4366ac,{},!0x0,!0x0);let _0x5acc24=_0x4366ac[_0x191b78(0x840)];_0x5c1c40=await this[_0x191b78(0x56d)](_0x5acc24,_0x5c1c40[_0x191b78(0x788)],_0x5c1c40[_0x191b78(0x731)][_0x191b78(0x90c)]);let _0x356802=await this['NextBlock'](_0x5c1c40);_0x356802&&await this['processblock'](_0x5c1c40,_0x356802);}async[a0_0x1df5a5(0x56d)](_0x279ca2,_0x1c49b9,_0x51ec4c){const _0x4fcb15=a0_0x1df5a5;this[_0x4fcb15(0x755)][_0x4fcb15(0x3fb)](this['instanceName']+'\x20('+this[_0x4fcb15(0x921)]['wuid']+_0x4fcb15(0x602));try{let _0x14518a=this['AutomateSystem'][_0x4fcb15(0x714)][_0x4fcb15(0x756)](_0x493b52=>_0x493b52[_0x4fcb15(0x5da)]===_0x279ca2);_0x14518a||this[_0x4fcb15(0x755)][_0x4fcb15(0x398)](this[_0x4fcb15(0x474)]+'\x20('+this[_0x4fcb15(0x921)][_0x4fcb15(0x2d1)]+_0x4fcb15(0x8d9)+_0x279ca2+_0x4fcb15(0x90a));let _0x5809da=await this['repository'][_0x4fcb15(0x461)][_0x4fcb15(0x694)]({'where':{'_id':_0x14518a['_id']}});if(!_0x5809da||!_0x5809da[_0x4fcb15(0x74a)]?.[_0x4fcb15(0x5f2)](this[_0x4fcb15(0x921)][_0x4fcb15(0x2d1)]))throw this[_0x4fcb15(0x755)][_0x4fcb15(0x398)](this[_0x4fcb15(0x474)]+'\x20('+this[_0x4fcb15(0x921)]['wuid']+_0x4fcb15(0x8d9)+_0x279ca2+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m('Flow\x20\x27'+_0x279ca2+_0x4fcb15(0x614));let _0x1631d4=require(_0x4fcb15(0x646))[_0x4fcb15(0x399)],_0x1d6fe4=Date[_0x4fcb15(0x78f)](),_0x5e43bc='start',_0x37fc97={},_0x38b99c={},_0x42900c=this[_0x4fcb15(0x48e)][_0x4fcb15(0x714)][_0x4fcb15(0x756)](_0x3a3829=>_0x3a3829[_0x4fcb15(0x5da)]===_0x5809da[_0x4fcb15(0x5da)]?.['toString']()),_0x13e819=_0x42900c?.[_0x4fcb15(0x769)]??_0x5809da['minutesToClose']??0x0,_0x22fd1f=_0x42900c?.[_0x4fcb15(0x502)]??_0x5809da[_0x4fcb15(0x502)]??!0x1,_0xf790d3={'flowId':_0x14518a[_0x4fcb15(0x5da)],'readMessages':_0x14518a[_0x4fcb15(0x502)],..._0x5809da,'chatLog':null},_0x47cfb3={'lastReceivedMessage':_0x37fc97,'lastSendMessage':_0x38b99c,'lastBlockId':_0x5e43bc,'lastCondition':!0x0,'realVariables':_0x51ec4c};_0xf790d3[_0x4fcb15(0x731)]=_0x47cfb3,_0xf790d3[_0x4fcb15(0x731)][_0x4fcb15(0x90c)]={..._0x51ec4c},delete _0xf790d3[_0x4fcb15(0x5da)],_0xf790d3[_0x4fcb15(0x5da)]=new _0x1631d4(),_0xf790d3[_0x4fcb15(0x5a2)]=_0x1d6fe4,_0xf790d3[_0x4fcb15(0x781)]=_0x4fcb15(0x20b),_0xf790d3[_0x4fcb15(0x788)]=_0x1c49b9,_0xf790d3['minutesToClose']=_0x13e819,_0xf790d3[_0x4fcb15(0x502)]=_0x22fd1f;let _0x50f250=await this[_0x4fcb15(0x3cf)][_0x4fcb15(0x557)][_0x4fcb15(0x66e)](_0xf790d3[_0x4fcb15(0x5da)],_0xf790d3,this[_0x4fcb15(0x921)]['wuid']);return this[_0x4fcb15(0x755)][_0x4fcb15(0x3fb)](this[_0x4fcb15(0x474)]+'\x20('+this['instance'][_0x4fcb15(0x2d1)]+_0x4fcb15(0x74f)),_0x50f250?_0xf790d3:null;}catch(_0x34ceed){let _0x96d291=_0x4fcb15(0x1ef),_0x298b9a=_0x34ceed instanceof Error?_0x34ceed[_0x4fcb15(0x6c9)]:typeof _0x34ceed==_0x4fcb15(0x1b3)?JSON[_0x4fcb15(0x28d)](_0x34ceed):_0x34ceed,_0xaa000d=_0x96d291+':\x20'+_0x298b9a;throw this[_0x4fcb15(0x755)][_0x4fcb15(0x398)](this[_0x4fcb15(0x474)]+'\x20('+this[_0x4fcb15(0x921)][_0x4fcb15(0x2d1)]+_0x4fcb15(0x91e)+_0xaa000d),new m(_0xaa000d);}}async[a0_0x1df5a5(0x71b)](_0x2663ed,_0x54bf8f){const _0x32cdf2=a0_0x1df5a5;let _0x2e7685,_0x5f5414;try{let _0x714c65=_0x54bf8f[_0x32cdf2(0x374)];if(!_0x714c65||!_0x714c65[_0x32cdf2(0x376)]||!_0x714c65[_0x32cdf2(0x488)])throw new Error(_0x32cdf2(0x6a7));let _0x292c9c;([_0x32cdf2(0x7fa),_0x32cdf2(0x6a5),_0x32cdf2(0x672)][_0x32cdf2(0x72b)](_0x134e5c=>_0x714c65[_0x32cdf2(0x376)][_0x32cdf2(0x5f2)](_0x134e5c))||_0x714c65['requestFile'])&&(_0x292c9c=_0x32cdf2(0x325));let _0x1fede0='\u205f',_0x4e08bf;try{_0x4e08bf=JSON[_0x32cdf2(0x8a5)](_0x714c65[_0x32cdf2(0x5bd)]['replace'](new RegExp(_0x1fede0,'g'),''));}catch(_0x3cc834){throw _0x3cc834;}let _0x1ca00e={'method':_0x714c65[_0x32cdf2(0x488)],'url':_0x714c65['url'],'headers':_0x714c65['header']||{},..._0x714c65[_0x32cdf2(0x488)][_0x32cdf2(0x3e4)]()!==_0x32cdf2(0x3ba)&&_0x714c65[_0x32cdf2(0x5bd)]?{'data':JSON[_0x32cdf2(0x8a5)](_0x714c65[_0x32cdf2(0x5bd)][_0x32cdf2(0x894)](new RegExp(_0x1fede0,'g'),''))}:{},..._0x292c9c&&{'responseType':_0x292c9c}},_0x252cdc=await(0x0,K['default'])(_0x1ca00e),_0x25243a=_0x252cdc['headers'][_0x32cdf2(0x4ae)];if(_0x25243a&&_0x25243a[_0x32cdf2(0x5f2)]('application/json')||typeof _0x252cdc[_0x32cdf2(0x561)]=='string'){if(typeof _0x252cdc[_0x32cdf2(0x561)]==_0x32cdf2(0x1d0)){let _0x38d254=_0x252cdc[_0x32cdf2(0x561)][_0x32cdf2(0x894)](/[\u200B-\u200D\uFEFF\u00A0\u2060\u205F]/g,'')[_0x32cdf2(0x30a)]();try{_0x2e7685=JSON[_0x32cdf2(0x8a5)](_0x38d254);}catch(_0x550c40){this['logger'][_0x32cdf2(0x398)]('Erro\x20ao\x20fazer\x20parse\x20do\x20JSON:\x20'+_0x550c40[_0x32cdf2(0x6c9)]),_0x2e7685={'_apiResponse':_0x252cdc[_0x32cdf2(0x561)]};}}else _0x2e7685=_0x252cdc[_0x32cdf2(0x561)];let _0x2eb0b0=_0x2663ed['chatLog'][_0x32cdf2(0x90c)],_0x2c6625=this['flattenObject'](_0x2e7685);return Object[_0x32cdf2(0x503)](_0x2eb0b0,_0x2c6625),_0x2663ed[_0x32cdf2(0x731)]['realVariables']=_0x2eb0b0,_0x5f5414={'error':!0x1,'apiResponse':_0x2e7685},this[_0x32cdf2(0x4b4)](_0x2663ed,_0x54bf8f,_0x5f5414),_0x2e7685;}if(_0x25243a&&(_0x25243a['includes'](_0x32cdf2(0x6d0))||_0x25243a['includes']('image')||_0x25243a[_0x32cdf2(0x5f2)](_0x32cdf2(0x892))||_0x25243a[_0x32cdf2(0x5f2)](_0x32cdf2(0x207)))){this[_0x32cdf2(0x755)]['verbose'](this[_0x32cdf2(0x474)]+'\x20('+this[_0x32cdf2(0x921)][_0x32cdf2(0x2d1)]+_0x32cdf2(0x43f)+_0x25243a);let _0x52eee3=(0x0,Q['v4'])(),_0x4a28e0='',_0x2854aa={'image/jpeg':'.jpg','image/png':_0x32cdf2(0x88c),'image/gif':_0x32cdf2(0x1d8),'image/webp':_0x32cdf2(0x711),'image/svg+xml':_0x32cdf2(0x40d),'audio/mpeg':_0x32cdf2(0x2cd),'audio/ogg':_0x32cdf2(0x806),'audio/wav':_0x32cdf2(0x74b),'video/mp4':_0x32cdf2(0x2c7),'video/webm':'.webm','video/ogg':_0x32cdf2(0x5f7),'text/plain':_0x32cdf2(0x555),'application/pdf':_0x32cdf2(0x657),'application/msword':_0x32cdf2(0x5b8),'application/vnd.openxmlformats-officedocument.wordprocessingml.document':_0x32cdf2(0x5a3),'application/vnd.ms-excel':_0x32cdf2(0x8f1),'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':_0x32cdf2(0x817),'application/vnd.ms-powerpoint':_0x32cdf2(0x1d9),'application/vnd.openxmlformats-officedocument.presentationml.presentation':_0x32cdf2(0x1af)};_0x2854aa[_0x25243a]?(_0x4a28e0=_0x2854aa[_0x25243a],this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x32cdf2(0x921)][_0x32cdf2(0x2d1)]+_0x32cdf2(0x6e2)+_0x4a28e0)):(_0x4a28e0=_0x32cdf2(0x3a4),this[_0x32cdf2(0x755)][_0x32cdf2(0x3fb)](this[_0x32cdf2(0x474)]+'\x20('+this[_0x32cdf2(0x921)]['wuid']+_0x32cdf2(0x7ad)+_0x4a28e0)),_0x52eee3+=_0x4a28e0,this[_0x32cdf2(0x755)][_0x32cdf2(0x3fb)](this[_0x32cdf2(0x474)]+'\x20('+this['instance'][_0x32cdf2(0x2d1)]+_0x32cdf2(0x56a)+_0x52eee3);let _0x249082=this[_0x32cdf2(0x4e6)][_0x32cdf2(0x3be)](_0x32cdf2(0x3f7))[_0x32cdf2(0x5d6)];if(!_0x249082){let _0x326dfb=this[_0x32cdf2(0x4e6)][_0x32cdf2(0x3be)](_0x32cdf2(0x223));_0x249082=_0x32cdf2(0x2c6)+(_0x326dfb&&_0x326dfb['FULLCHAIN']['split']('/')[0x4]);}let _0x30ae68=Buffer[_0x32cdf2(0x439)](_0x252cdc[_0x32cdf2(0x561)]);await this['saveMediaToFile'](_0x30ae68,_0x52eee3);let _0x374669=_0x32cdf2(0x7ac)+_0x52eee3;_0x374669=''+_0x249082+_0x374669,_0x2e7685={'fileUrl':_0x374669},_0x2663ed[_0x32cdf2(0x731)][_0x32cdf2(0x90c)][_0x32cdf2(0x228)]=_0x374669;let _0x42860f=_0x2663ed[_0x32cdf2(0x731)][_0x32cdf2(0x90c)],_0x3fa6ed=this['flattenObject'](_0x2e7685);return Object[_0x32cdf2(0x503)](_0x42860f,_0x3fa6ed),_0x2663ed['chatLog'][_0x32cdf2(0x90c)]=_0x42860f,_0x5f5414={'error':!0x1,'apiResponse':{'fileUrl':_0x374669}},this[_0x32cdf2(0x4b4)](_0x2663ed,_0x54bf8f,_0x5f5414),_0x2e7685;}}catch(_0x2f1966){this['logger']['error'](_0x32cdf2(0x2dc)+_0x2f1966[_0x32cdf2(0x6c9)]),_0x2f1966[_0x32cdf2(0x3ec)]&&(_0x2e7685=_0x2f1966[_0x32cdf2(0x3ec)][_0x32cdf2(0x561)]);let _0xd5655a=_0x2663ed[_0x32cdf2(0x731)][_0x32cdf2(0x90c)],_0x4af882=this[_0x32cdf2(0x37a)](_0x2e7685);return Object['assign'](_0xd5655a,_0x4af882),_0x2663ed[_0x32cdf2(0x731)][_0x32cdf2(0x90c)]=_0xd5655a,_0x5f5414={'error':!0x0,'errorLog':_0x2f1966['toString'](),'apiResponse':_0x2e7685},this[_0x32cdf2(0x4b4)](_0x2663ed,_0x54bf8f,_0x5f5414),{'success':!0x1};}}[a0_0x1df5a5(0x6e4)](_0x42af43,_0x5df4b1){const _0x250b12=a0_0x1df5a5;let _0x335f47=_0x5e7271=>{const _0x1e6bf4=a0_0x5a64;let _0xc5bd4b=_0x5e7271[_0x1e6bf4(0x894)](/[^0-9.,-]/g,'')[_0x1e6bf4(0x894)](',','.'),_0xb19202=parseFloat(_0xc5bd4b);return isNaN(_0xb19202)?null:_0xb19202;},_0x51a48b=_0x5df4b1[_0x250b12(0x744)],_0x28a77f=_0x5df4b1[_0x250b12(0x8fb)];typeof _0x51a48b=='string'&&(_0x51a48b=this[_0x250b12(0x589)](_0x51a48b,_0x42af43[_0x250b12(0x731)][_0x250b12(0x90c)])??''),typeof _0x28a77f=='string'&&(_0x28a77f=this[_0x250b12(0x589)](_0x28a77f,_0x42af43[_0x250b12(0x731)][_0x250b12(0x90c)])??'');let _0x548ff6=null;if(!_0x5df4b1[_0x250b12(0x46a)])return null;switch(this['logger'][_0x250b12(0x3fb)](this[_0x250b12(0x474)]+'\x20('+this[_0x250b12(0x921)][_0x250b12(0x2d1)]+_0x250b12(0x2fb)+_0x51a48b),this[_0x250b12(0x755)][_0x250b12(0x3fb)](this[_0x250b12(0x474)]+'\x20('+this[_0x250b12(0x921)][_0x250b12(0x2d1)]+_0x250b12(0x1b9)+_0x28a77f),_0x5df4b1['editOperator']){case'+':case'-':case'*':case'/':let _0x36a2d4=_0x335f47(_0x51a48b||'0'),_0x4dbfdf=_0x335f47(_0x28a77f||'0');if(_0x36a2d4===null)return null;switch(_0x5df4b1[_0x250b12(0x46a)]){case'+':_0x548ff6=_0x36a2d4+(_0x4dbfdf??0x0);break;case'-':_0x548ff6=_0x36a2d4-(_0x4dbfdf??0x0);break;case'*':_0x548ff6=_0x36a2d4*(_0x4dbfdf??0x1);break;case'/':_0x4dbfdf!==0x0&&(_0x548ff6=_0x36a2d4/(_0x4dbfdf??0x1));break;}break;case _0x250b12(0x6f9):case _0x250b12(0x7d1):let _0x3dd0e6=_0x28a77f,_0x330768=_0x5df4b1[_0x250b12(0x54f)];if(typeof _0x330768==_0x250b12(0x1d0)&&(_0x330768=this[_0x250b12(0x589)](_0x330768,_0x42af43[_0x250b12(0x731)]['realVariables'])??''),_0x3dd0e6&&_0x330768!==void 0x0){let _0x3919e3=_0x5df4b1[_0x250b12(0x46a)]===_0x250b12(0x6f9)?new RegExp(_0x3dd0e6[_0x250b12(0x894)](/[-\/\\^$*+?.()|[\]{}]/g,_0x250b12(0x58e)),'g'):new RegExp(_0x3dd0e6,'g');_0x548ff6=_0x51a48b[_0x250b12(0x894)](_0x3919e3,_0x330768);}else console[_0x250b12(0x8c0)](_0x250b12(0x266));break;case _0x250b12(0x32e):_0x548ff6=_0x28a77f;break;case _0x250b12(0x946):let _0x435714=_0x51a48b[_0x250b12(0x3c5)](new RegExp(_0x28a77f||''));_0x548ff6=_0x435714?_0x435714[0x0]:'';break;case _0x250b12(0x34c):_0x548ff6=_0x51a48b[_0x250b12(0x5c2)](0x0,parseInt(_0x28a77f||'0'));break;case _0x250b12(0x20e):let _0x5c7ed5=parseInt(_0x28a77f||'0');_0x548ff6=_0x51a48b[_0x250b12(0x5c2)](_0x51a48b['length']-_0x5c7ed5);break;case _0x250b12(0x559):let _0x52232e=_0x335f47(_0x51a48b),_0x181677=parseInt(_0x28a77f||'0');_0x181677=Math['abs'](_0x181677),_0x52232e!==null?_0x548ff6=_0x52232e['toLocaleString']('pt-BR',{'minimumFractionDigits':_0x181677,'maximumFractionDigits':_0x181677}):(console[_0x250b12(0x8c0)](_0x250b12(0x659)+_0x51a48b),_0x548ff6=null);break;case'toBRL':let _0x21ffb9=_0x335f47(_0x51a48b);_0x21ffb9!==null?_0x548ff6=_0x21ffb9[_0x250b12(0x4b8)](_0x250b12(0x6ee),{'style':_0x250b12(0x1e5),'currency':'BRL'}):(console[_0x250b12(0x8c0)](_0x250b12(0x8d8)+_0x51a48b),_0x548ff6=null);break;case _0x250b12(0x42d):_0x548ff6=_0x51a48b['toUpperCase']();break;case _0x250b12(0x22d):_0x548ff6=_0x51a48b[_0x250b12(0x6c2)]();break;case _0x250b12(0x1e1):_0x548ff6=_0x51a48b['split']('\x20')[_0x250b12(0x948)](_0x4a8c2f=>_0x4a8c2f[_0x250b12(0x79b)](0x0)[_0x250b12(0x3e4)]()+_0x4a8c2f[_0x250b12(0x5c2)](0x1)['toLowerCase']())[_0x250b12(0x4bc)]('\x20');break;case _0x250b12(0x94d):_0x548ff6=JSON[_0x250b12(0x28d)](_0x51a48b);break;case _0x250b12(0x302):_0x548ff6=_0x51a48b[_0x250b12(0x30a)]();break;default:_0x548ff6=_0x51a48b;}return _0x548ff6!==null?_0x548ff6[_0x250b12(0x641)]():null;}async[a0_0x1df5a5(0x4d6)](_0x541489,_0x1dcd7e){const _0xd017ef=a0_0x1df5a5;try{let _0x521fe5=_0x541489[_0xd017ef(0x61b)]?.[_0xd017ef(0x93c)](_0x3600f4=>_0x3600f4[_0xd017ef(0x8b4)]===_0x1dcd7e['_id']?.[_0xd017ef(0x641)]())||[],_0x75b56e=_0x1dcd7e[_0xd017ef(0x53e)],_0x32a8de=null,_0x57f474=[],_0x3b22d8=_0x541489[_0xd017ef(0x731)][_0xd017ef(0x90c)][_0x75b56e];_0x57f474[_0xd017ef(0x6cd)](_0xd017ef(0x7b4)+_0x3b22d8+'\x22');for(let _0x4647bd of _0x521fe5){_0x4647bd[_0xd017ef(0x744)]=_0x3b22d8,_0x32a8de=_0x4647bd[_0xd017ef(0x744)];let _0x37bb53;try{_0x37bb53=this[_0xd017ef(0x6e4)](_0x541489,_0x4647bd);}catch(_0x202c0d){this[_0xd017ef(0x755)][_0xd017ef(0x398)]('Erro\x20ao\x20aplicar\x20varedit:\x20'+_0x202c0d[_0xd017ef(0x6c9)]);continue;}if(_0x37bb53!==null){let _0xcd20d6=_0xd017ef(0x304)+_0x4647bd[_0xd017ef(0x46a)]+'\x22',_0x452314=[_0xd017ef(0x660),_0xd017ef(0x42d),_0xd017ef(0x22d),_0xd017ef(0x1e1),_0xd017ef(0x302)];_0x4647bd[_0xd017ef(0x46a)]==='findAndReplace'||_0x4647bd[_0xd017ef(0x46a)]===_0xd017ef(0x7d1)?_0xcd20d6+=_0xd017ef(0x4f7)+_0x4647bd[_0xd017ef(0x8fb)]+_0xd017ef(0x44f)+_0x4647bd[_0xd017ef(0x54f)]+'\x22':!_0x452314[_0xd017ef(0x5f2)](_0x4647bd[_0xd017ef(0x46a)])&&_0x4647bd[_0xd017ef(0x8fb)]!==null&&_0x4647bd['secondValue']!==void 0x0&&(_0xcd20d6+=_0xd017ef(0x1b5)+_0x4647bd[_0xd017ef(0x8fb)]+'\x22'),_0xcd20d6+=',\x20resultado:\x20'+_0x37bb53+'.',_0x57f474[_0xd017ef(0x6cd)](_0xcd20d6);}_0x37bb53!==null&&(_0x3b22d8=_0x37bb53);}if(_0x541489[_0xd017ef(0x731)][_0xd017ef(0x90c)]&&_0x1dcd7e[_0xd017ef(0x53e)]){_0x541489['chatLog'][_0xd017ef(0x90c)][_0x1dcd7e[_0xd017ef(0x53e)]]=_0x3b22d8;let _0x540525={'variable':_0x1dcd7e[_0xd017ef(0x53e)],'oldValue':_0x32a8de,'newValue':_0x3b22d8,'moreLogs':_0x57f474};try{this[_0xd017ef(0x4b4)](_0x541489,_0x1dcd7e,_0x540525);}catch(_0x5cdff1){this[_0xd017ef(0x755)][_0xd017ef(0x398)](_0xd017ef(0x270)+_0x5cdff1['message']);}}return _0x75b56e;}catch(_0x13cc48){return this[_0xd017ef(0x755)][_0xd017ef(0x398)](_0xd017ef(0x482)+_0x13cc48['message']),null;}}async[a0_0x1df5a5(0x69b)](_0x3db3f3,_0x597aa4){const _0x232681=a0_0x1df5a5;try{let _0x5de7a6=[],_0x1b8d63=_0x3db3f3[_0x232681(0x888)]['filter'](_0x15bd31=>_0x15bd31[_0x232681(0x8b4)]===_0x597aa4[_0x232681(0x5da)][_0x232681(0x641)]()),_0x528a90=null,_0x4b391a=!0x1;for(let _0x2b8f1f of _0x1b8d63){let _0x5b46a6=this['evaluateCondition'](_0x3db3f3,_0x2b8f1f);_0x5de7a6[_0x232681(0x6cd)](_0x232681(0x248)+_0x2b8f1f[_0x232681(0x744)]+',\x20Comparador:\x20'+_0x2b8f1f[_0x232681(0x712)]+_0x232681(0x750)+_0x2b8f1f[_0x232681(0x8fb)]+',\x20Resultado:\x20'+_0x5b46a6),_0x528a90===null?_0x528a90=_0x5b46a6:_0x2b8f1f['OrAnd']==='and'?(_0x528a90=_0x528a90&&_0x5b46a6,_0x5b46a6||(_0x4b391a=!0x0)):_0x2b8f1f[_0x232681(0x541)]==='or'&&(_0x4b391a||(_0x528a90=_0x528a90||_0x5b46a6));}_0x528a90===null&&(_0x528a90=!0x0);let _0x3960cd={'moreLogs':_0x5de7a6};_0x3db3f3[_0x232681(0x731)][_0x232681(0x4c5)]=_0x528a90,await this['updateConversation'](_0x3db3f3,_0x597aa4,_0x3960cd);}catch(_0xc27baf){this[_0x232681(0x755)][_0x232681(0x398)](this[_0x232681(0x474)]+'\x20('+this['instance'][_0x232681(0x2d1)]+_0x232681(0x406)+(_0xc27baf instanceof Error?_0xc27baf[_0x232681(0x6c9)]:JSON[_0x232681(0x28d)](_0xc27baf,null,0x2)));}}[a0_0x1df5a5(0x6dd)](_0x4804a7,_0xb2530b){const _0x10a8c4=a0_0x1df5a5;let _0x555eec=_0xb2530b['firstValue'],_0x5d85c7=_0xb2530b['secondValue'];typeof _0x555eec==_0x10a8c4(0x1d0)&&(_0x555eec=this[_0x10a8c4(0x589)](_0x555eec,_0x4804a7[_0x10a8c4(0x731)][_0x10a8c4(0x90c)])??''),typeof _0x5d85c7==_0x10a8c4(0x1d0)&&(_0x5d85c7=this[_0x10a8c4(0x589)](_0x5d85c7,_0x4804a7[_0x10a8c4(0x731)]['realVariables'])??'');try{switch(_0xb2530b[_0x10a8c4(0x712)]){case _0x10a8c4(0x24f):return _0x555eec===_0x5d85c7;case _0x10a8c4(0x954):return _0x555eec!==_0x5d85c7;case _0x10a8c4(0x8bf):return this[_0x10a8c4(0x8bf)](_0x555eec,_0x5d85c7);case _0x10a8c4(0x58d):return!this['contains'](_0x555eec,_0x5d85c7);case _0x10a8c4(0x5dc):return parseFloat(_0x555eec)>parseFloat(_0x5d85c7);case _0x10a8c4(0x7bf):return parseFloat(_0x555eec)<parseFloat(_0x5d85c7);case'notEmpty':return _0x555eec!=='';case _0x10a8c4(0x805):return _0x555eec==='';case'matchRegex':return new RegExp(_0x5d85c7)[_0x10a8c4(0x8d2)](_0x555eec);case _0x10a8c4(0x34d):return!new RegExp(_0x5d85c7)[_0x10a8c4(0x8d2)](_0x555eec);default:return!0x1;}}catch(_0x1d4684){return this[_0x10a8c4(0x755)]['error'](_0x10a8c4(0x7b2)+_0x1d4684),!0x1;}}[a0_0x1df5a5(0x8bf)](_0x375f03,_0x6b203){const _0x445863=a0_0x1df5a5;if(_0x375f03===_0x6b203&&/^\d+$/['test'](_0x375f03))return!0x0;if(this[_0x445863(0x1b6)](_0x375f03)&&/^\d+$/[_0x445863(0x8d2)](_0x6b203)){let _0xbaf3ff=_0x375f03['split'](',')['map'](_0x55480b=>parseInt(_0x55480b['trim']())),_0x4782f7=parseInt(_0x6b203);return _0xbaf3ff['includes'](_0x4782f7);}return _0x375f03[_0x445863(0x5f2)](_0x6b203);}['isListOfNumbers'](_0x271226){const _0x4a6542=a0_0x1df5a5;return/^\d+(,\d+)*$/[_0x4a6542(0x8d2)](_0x271226);}[a0_0x1df5a5(0x654)](_0x1ea769){const _0x2389f2=a0_0x1df5a5;let _0x5aebef=!0x0,_0x2c5f2e=null;for(let _0x39210d of _0x1ea769){let _0x80afa=this[_0x2389f2(0x384)](_0x39210d);if(_0x2c5f2e==='or'&&_0x80afa){_0x5aebef=!0x0;break;}if(_0x2c5f2e===_0x2389f2(0x7f0)&&!_0x80afa){_0x5aebef=!0x1;break;}_0x2c5f2e=_0x39210d[_0x2389f2(0x541)];}return _0x5aebef;}[a0_0x1df5a5(0x384)](_0x520826){const _0x42a11f=a0_0x1df5a5;let _0x12da52=_0x520826[_0x42a11f(0x744)],_0x16ab86=_0x520826[_0x42a11f(0x8fb)];try{switch(_0x520826[_0x42a11f(0x712)]){case _0x42a11f(0x24f):return String(_0x12da52)===String(_0x16ab86);case _0x42a11f(0x954):return String(_0x12da52)!==String(_0x16ab86);case'contains':return String(_0x12da52)[_0x42a11f(0x5f2)](String(_0x16ab86));case _0x42a11f(0x58d):return!String(_0x12da52)[_0x42a11f(0x5f2)](String(_0x16ab86));case'greater':return parseFloat(String(_0x12da52))>parseFloat(String(_0x16ab86));case _0x42a11f(0x7bf):return parseFloat(String(_0x12da52))<parseFloat(String(_0x16ab86));case _0x42a11f(0x88f):return String(_0x12da52)!=='';case _0x42a11f(0x805):return String(_0x12da52)==='';case'matchRegex':return new RegExp(String(_0x16ab86))[_0x42a11f(0x8d2)](String(_0x12da52));case _0x42a11f(0x34d):return!new RegExp(String(_0x16ab86))[_0x42a11f(0x8d2)](String(_0x12da52));default:return!0x1;}}catch(_0x39d994){return this[_0x42a11f(0x755)][_0x42a11f(0x398)](_0x42a11f(0x7b2)+_0x39d994),!0x1;}}async[a0_0x1df5a5(0x567)](_0x4d558f,_0x1fd1a0){const _0x4e95f6=a0_0x1df5a5;if(this[_0x4e95f6(0x755)][_0x4e95f6(0x3fb)](this[_0x4e95f6(0x474)]+'\x20('+this[_0x4e95f6(0x921)]['wuid']+_0x4e95f6(0x3dd)),!_0x4d558f||!_0x1fd1a0)return this[_0x4e95f6(0x755)][_0x4e95f6(0x398)](this[_0x4e95f6(0x474)]+'\x20('+this[_0x4e95f6(0x921)]['wuid']+_0x4e95f6(0x311)),null;let _0x369e19=_0x4d558f[_0x4e95f6(0x731)][_0x4e95f6(0x6e1)][_0x4e95f6(0x440)]['id'];this['logger'][_0x4e95f6(0x3fb)](this['instanceName']+'\x20('+this['instance'][_0x4e95f6(0x2d1)]+_0x4e95f6(0x74c)+_0x369e19);let _0x5d5134={'key':{'id':_0x369e19}},_0x339be1=_0x1fd1a0[_0x4e95f6(0x53e)];_0x4d558f[_0x4e95f6(0x731)][_0x4e95f6(0x90c)]['_'+_0x339be1+_0x4e95f6(0x914)]=null,_0x4d558f[_0x4e95f6(0x731)][_0x4e95f6(0x90c)]['_'+_0x339be1+_0x4e95f6(0x21d)]=null,_0x4d558f[_0x4e95f6(0x731)][_0x4e95f6(0x90c)]['_'+_0x339be1+_0x4e95f6(0x4c3)]=null,_0x4d558f[_0x4e95f6(0x731)]['realVariables']['_'+_0x339be1+_0x4e95f6(0x7f1)]=_0x4d558f['chatLog'][_0x4e95f6(0x6e1)][_0x4e95f6(0x62b)];try{let _0x45e1cb=await this[_0x4e95f6(0x32f)](_0x5d5134);this['logger'][_0x4e95f6(0x3fb)](this[_0x4e95f6(0x474)]+'\x20('+this['instance'][_0x4e95f6(0x2d1)]+_0x4e95f6(0x70e)),_0x4d558f[_0x4e95f6(0x731)][_0x4e95f6(0x90c)]['_'+_0x339be1+'.url']=_0x45e1cb['fileUrl'],_0x4d558f[_0x4e95f6(0x731)][_0x4e95f6(0x90c)]['_'+_0x339be1+'.mimetype']=_0x45e1cb['mimetype'];let _0x108ad3=_0x45e1cb[_0x4e95f6(0x492)][_0x4e95f6(0x3c5)](/\/(\w+)$/),_0x53abf7=_0x108ad3?_0x108ad3[0x1]:null;_0x4d558f[_0x4e95f6(0x731)][_0x4e95f6(0x90c)]['_'+_0x339be1+_0x4e95f6(0x4c3)]=_0x53abf7,this[_0x4e95f6(0x755)][_0x4e95f6(0x3fb)](this[_0x4e95f6(0x474)]+'\x20('+this[_0x4e95f6(0x921)]['wuid']+'):\x20Detalhes\x20da\x20mídia\x20salvos\x20para\x20\x27'+_0x339be1+'\x27.');}catch(_0x4039eb){this['logger'][_0x4e95f6(0x398)](this[_0x4e95f6(0x474)]+'\x20('+this[_0x4e95f6(0x921)][_0x4e95f6(0x2d1)]+_0x4e95f6(0x2af)+_0x4039eb[_0x4e95f6(0x6c9)]);}let _0x131fca=_0x4d558f[_0x4e95f6(0x731)][_0x4e95f6(0x6e1)][_0x4e95f6(0x5b9)]||_0x4d558f['chatLog'][_0x4e95f6(0x6e1)]['caption']||_0x4d558f[_0x4e95f6(0x731)]['lastReceivedMessage'][_0x4e95f6(0x943)];try{_0x4d558f[_0x4e95f6(0x731)]['realVariables']||(_0x4d558f[_0x4e95f6(0x731)]['realVariables']={});let _0x51213a=_0x4d558f[_0x4e95f6(0x731)][_0x4e95f6(0x90c)][_0x339be1];_0x4d558f['chatLog']['realVariables'][_0x339be1]=_0x131fca;let _0x485f6d={'variable':_0x339be1,'oldValue':_0x51213a,'newValue':_0x131fca};this['updateConversation'](_0x4d558f,_0x1fd1a0,_0x485f6d),this[_0x4e95f6(0x755)][_0x4e95f6(0x3fb)](this[_0x4e95f6(0x474)]+'\x20('+this['instance'][_0x4e95f6(0x2d1)]+_0x4e95f6(0x6cc));}catch(_0x251120){let _0x5cbbf3={'error':!0x0,'errorLog':_0x251120[_0x4e95f6(0x641)]()};return this[_0x4e95f6(0x4b4)](_0x4d558f,_0x1fd1a0,_0x5cbbf3),this[_0x4e95f6(0x755)][_0x4e95f6(0x398)](this[_0x4e95f6(0x474)]+'\x20('+this['instance'][_0x4e95f6(0x2d1)]+_0x4e95f6(0x205)+(_0x251120 instanceof Error?_0x251120[_0x4e95f6(0x6c9)]:JSON[_0x4e95f6(0x28d)](_0x251120,null,0x2))),null;}}async[a0_0x1df5a5(0x692)](_0x57769b,_0x604ed0){const _0x3d2eb5=a0_0x1df5a5;if(this[_0x3d2eb5(0x755)][_0x3d2eb5(0x3fb)](this['instanceName']+'\x20('+this[_0x3d2eb5(0x921)][_0x3d2eb5(0x2d1)]+_0x3d2eb5(0x2fc)),!_0x57769b||!_0x604ed0)return this[_0x3d2eb5(0x755)][_0x3d2eb5(0x398)](this[_0x3d2eb5(0x474)]+'\x20('+this[_0x3d2eb5(0x921)][_0x3d2eb5(0x2d1)]+'):\x20Conversa\x20ou\x20próximo\x20bloco\x20não\x20fornecidos'),null;let _0x32571a=Date[_0x3d2eb5(0x78f)](),_0x2f78b4=parseInt(_0x604ed0[_0x3d2eb5(0x573)],0xa);if(isNaN(_0x2f78b4))return this['logger'][_0x3d2eb5(0x398)](this['instanceName']+'\x20('+this['instance'][_0x3d2eb5(0x2d1)]+'):\x20Falha\x20ao\x20converter\x20stopMinutes\x20para\x20um\x20número'),null;let _0x4ea5e7={'newStoppedUntil':_0x32571a+_0x2f78b4*0x3c*0x3e8};return await this[_0x3d2eb5(0x4b4)](_0x57769b,_0x604ed0,_0x4ea5e7,!0x0),null;}async[a0_0x1df5a5(0x63b)](_0x1f0b49,_0x5b89d1){const _0x3f0db9=a0_0x1df5a5;try{switch(_0x5b89d1[_0x3f0db9(0x3b6)][_0x3f0db9(0x72c)]){case _0x3f0db9(0x924):await this['uazapiSendText'](_0x1f0b49,_0x5b89d1);break;case _0x3f0db9(0x36d):await this[_0x3f0db9(0x678)](_0x1f0b49,_0x5b89d1);break;case _0x3f0db9(0x776):await this[_0x3f0db9(0x2ef)](_0x1f0b49,_0x5b89d1);break;case _0x3f0db9(0x932):await this['uazapiSendAudio'](_0x1f0b49,_0x5b89d1);break;case _0x3f0db9(0x2a4):await this['uazapiSendContact'](_0x1f0b49,_0x5b89d1);break;case'sendPoll':await this[_0x3f0db9(0x1fe)](_0x1f0b49,_0x5b89d1);break;case _0x3f0db9(0x28a):await this[_0x3f0db9(0x1fe)](_0x1f0b49,_0x5b89d1);break;case _0x3f0db9(0x56f):await this['uazapiDeleteMessage'](_0x1f0b49,_0x5b89d1);break;default:this[_0x3f0db9(0x755)]['error'](this[_0x3f0db9(0x474)]+'\x20('+this['instance'][_0x3f0db9(0x2d1)]+_0x3f0db9(0x7cf)+_0x5b89d1[_0x3f0db9(0x3b6)][_0x3f0db9(0x72c)]);}}catch(_0x2a63ae){this[_0x3f0db9(0x755)]['error'](this[_0x3f0db9(0x474)]+'\x20('+this['instance']['wuid']+'):\x20Erro\x20ao\x20processar\x20o\x20bloco:\x20'+(_0x2a63ae instanceof Error?_0x2a63ae[_0x3f0db9(0x6c9)]:JSON['stringify'](_0x2a63ae,null,0x2)));}}async['updateConversation'](_0x292fbc,_0x2a67df,_0x5c1322,_0x36fe81=!0x1,_0x4c6df3=!0x1){const _0x5e50f8=a0_0x1df5a5;_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x4a7)]||(_0x292fbc['chatLog'][_0x5e50f8(0x4a7)]=[]);let _0x5db0b3=(_0x292fbc['chatLog'][_0x5e50f8(0x4a7)]?.[_0x5e50f8(0x303)]??0x0)+0x1,_0x1c503d=_0x292fbc['chatLog'][_0x5e50f8(0x4a7)][_0x5e50f8(0x93c)](_0x34bc0b=>String(_0x34bc0b[_0x5e50f8(0x8b4)])===String(_0x2a67df['_id']))['length']+0x1,_0x5b192d=_0x5c1322?.[_0x5e50f8(0x2e4)]??Date[_0x5e50f8(0x78f)](),_0x9a0b35=_0x5c1322?.['error']?_0x5c1322['errorLog']??_0x5c1322[_0x5e50f8(0x398)][_0x5e50f8(0x641)]():void 0x0,_0x135e09={'onTime':_0x5b192d,'blockId':_0x2a67df[_0x5e50f8(0x5da)],'order':_0x5db0b3,'activatedCount':_0x1c503d,'error':_0x5c1322?.[_0x5e50f8(0x398)]??!0x1,'messageId':_0x5c1322?.['messageId'],'apiResponse':_0x5c1322?.[_0x5e50f8(0x27f)],'apiResponseString':_0x5c1322?.[_0x5e50f8(0x27f)]?JSON['stringify'](_0x5c1322?.[_0x5e50f8(0x27f)]):void 0x0,'variable':_0x5c1322?.[_0x5e50f8(0x70c)],'oldValue':_0x5c1322?.[_0x5e50f8(0x4e5)],'newValue':_0x5c1322?.['newValue'],'newStoppedUntil':_0x5c1322?.[_0x5e50f8(0x855)],'moreLogs':_0x5c1322?.[_0x5e50f8(0x866)],'errorLog':_0x9a0b35};if(_0x5c1322[_0x5e50f8(0x866)]&&_0x5c1322[_0x5e50f8(0x866)][_0x5e50f8(0x303)]>0x0){let _0x5edaa0=_0x5c1322['moreLogs'][_0x5e50f8(0x948)](_0x1d8232=>this['replaceVariablesLogs'](_0x1d8232,_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x90c)]));_0x135e09[_0x5e50f8(0x866)]=_0x5edaa0;}if(_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x90c)]||(_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x90c)]={}),_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x90c)][_0x5e50f8(0x37f)]=String(_0x1c503d),_0x292fbc[_0x5e50f8(0x731)]['realVariables'][_0x5e50f8(0x1c7)]=String(_0x5c1322[_0x5e50f8(0x398)]??!0x1),_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x4a7)][_0x5e50f8(0x6cd)](_0x135e09),_0x292fbc['chatLog']['realVariables'][_0x5e50f8(0x740)]&&_0x292fbc['chatLog']['realVariables']['telefone']!==_0x292fbc['remoteJid']){let _0x37935c=(await this[_0x5e50f8(0x493)]({'numbers':[_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x90c)][_0x5e50f8(0x740)]]}))[0x0][_0x5e50f8(0x83f)];_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x90c)]['telefone']=_0x37935c,_0x292fbc[_0x5e50f8(0x788)]=_0x37935c;try{let _0x3dadc6={'_id':{'$ne':_0x292fbc[_0x5e50f8(0x5da)]},'remoteJid':_0x37935c,'status':'open'},_0x1a5271={'status':_0x5e50f8(0x7f4)};await this[_0x5e50f8(0x3cf)][_0x5e50f8(0x557)]['updateMany'](_0x3dadc6,_0x1a5271,this[_0x5e50f8(0x921)][_0x5e50f8(0x2d1)]),this['logger'][_0x5e50f8(0x3fb)](this[_0x5e50f8(0x474)]+'\x20('+this[_0x5e50f8(0x921)][_0x5e50f8(0x2d1)]+_0x5e50f8(0x3b7));}catch(_0x21bbca){this[_0x5e50f8(0x755)][_0x5e50f8(0x398)](this[_0x5e50f8(0x474)]+'\x20('+this['instance'][_0x5e50f8(0x2d1)]+_0x5e50f8(0x20f)+_0x21bbca[_0x5e50f8(0x6c9)]);}try{let _0x35303e=_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x90c)],_0xb06fed=await this['getVariablesChat'](_0x37935c),_0x22a3d6={..._0x35303e,..._0xb06fed,'_remoteJid':_0x37935c};_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x90c)]=_0x22a3d6;}catch(_0x4e7035){this[_0x5e50f8(0x755)][_0x5e50f8(0x398)](this['instanceName']+'\x20('+this[_0x5e50f8(0x921)]['wuid']+_0x5e50f8(0x78e)+_0x4e7035['message']);}}_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x63f)]=_0x2a67df['_id'][_0x5e50f8(0x641)](),_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x7d9)]&&(_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x7d9)]=_0x292fbc[_0x5e50f8(0x731)]['lastSendMessage']),_0x292fbc[_0x5e50f8(0x731)]['lastReceivedMessage']&&(_0x292fbc[_0x5e50f8(0x731)]['lastReceivedMessage']=_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x6e1)]),_0x292fbc['chatLog']['lastCondition']&&(_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x4c5)]=_0x292fbc[_0x5e50f8(0x731)][_0x5e50f8(0x4c5)]),_0x4c6df3&&(_0x292fbc[_0x5e50f8(0x781)]=_0x5e50f8(0x7f4)),_0x36fe81?this[_0x5e50f8(0x693)](_0x292fbc):this[_0x5e50f8(0x35a)](_0x292fbc,_0x2a67df);}[a0_0x1df5a5(0x3cd)](_0x5ce843,_0x5d0491){const _0x9df321=a0_0x1df5a5;return _0x5ce843[_0x9df321(0x894)](/\{\{([^}]+)\}\}/g,(_0x54fd63,_0x43b141)=>_0x5d0491[_0x43b141]?'{{'+_0x43b141+_0x9df321(0x568)+_0x5d0491[_0x43b141]+'\x22':'{{'+_0x43b141+_0x9df321(0x53f));}async['saveConversationToDatabase'](_0x225e5c){const _0x21aa03=a0_0x1df5a5;try{let _0x207203=Object[_0x21aa03(0x8da)](_0x225e5c[_0x21aa03(0x731)][_0x21aa03(0x90c)])['map'](([_0x4bcad5,_0x1081e2])=>({'name':_0x4bcad5,'value':_0x1081e2})),_0x5c3701={'status':_0x225e5c['status'],'remoteJid':_0x225e5c['remoteJid'],'blocks':_0x225e5c[_0x21aa03(0x90f)],'waitingMenu_id':_0x225e5c['waitingMenu_id'],'waitingMenu_text':_0x225e5c[_0x21aa03(0x7a7)],'waitingMenu_replyOptions':_0x225e5c[_0x21aa03(0x790)],'chatLog':{'lastBlockId':_0x225e5c[_0x21aa03(0x731)][_0x21aa03(0x63f)],'lastSendMessage':_0x225e5c[_0x21aa03(0x731)]['lastSendMessage'],'lastReceivedMessage':_0x225e5c[_0x21aa03(0x731)][_0x21aa03(0x6e1)],'lastCondition':_0x225e5c[_0x21aa03(0x731)][_0x21aa03(0x4c5)],'chatVariables':_0x207203,'realVariables':_0x225e5c['chatLog'][_0x21aa03(0x90c)],'blockLogs':_0x225e5c[_0x21aa03(0x731)]['blockLogs']}},_0x44ecd0=await this[_0x21aa03(0x3cf)][_0x21aa03(0x557)][_0x21aa03(0x66e)](_0x225e5c[_0x21aa03(0x5da)],_0x5c3701,this[_0x21aa03(0x921)]['wuid']);if(_0x44ecd0){this['logger'][_0x21aa03(0x3fb)](this[_0x21aa03(0x474)]+'\x20('+this[_0x21aa03(0x921)][_0x21aa03(0x2d1)]+_0x21aa03(0x317)+_0x44ecd0['_id']);try{let _0x3e697d=[_0x21aa03(0x7f6),'nomecompleto',_0x21aa03(0x6bc),'cpf',_0x21aa03(0x781),_0x21aa03(0x5c8),_0x21aa03(0x6b0),_0x21aa03(0x291),_0x21aa03(0x553),_0x21aa03(0x401)];if(!this[_0x21aa03(0x48e)]&&(await this['getAutomateSystem'](),!this[_0x21aa03(0x48e)]))throw new Error('AutomateSystem\x20não\x20foi\x20inicializado');let _0x7f99fc=this[_0x21aa03(0x48e)]?.[_0x21aa03(0x5ae)][_0x21aa03(0x948)](_0x436b5d=>_0x436b5d[_0x21aa03(0x5d3)]),_0x30a5f9={};Object[_0x21aa03(0x8da)](_0x225e5c[_0x21aa03(0x731)][_0x21aa03(0x90c)])[_0x21aa03(0x504)](([_0xb5b920,_0x38bb5d])=>{const _0x3670b1=_0x21aa03;_0x3e697d[_0x3670b1(0x5f2)](_0xb5b920)&&(_0xb5b920===_0x3670b1(0x291)&&typeof _0x38bb5d==_0x3670b1(0x1d0)?_0x30a5f9[_0xb5b920]=_0x38bb5d['split'](',')[_0x3670b1(0x948)](_0x171483=>_0x171483[_0x3670b1(0x30a)]())[_0x3670b1(0x93c)](_0xb81a2=>_0xb81a2!==''):_0xb5b920===_0x3670b1(0x553)&&typeof _0x38bb5d==_0x3670b1(0x1d0)?_0x30a5f9[_0xb5b920]=_0x38bb5d[_0x3670b1(0x709)](',')['map'](_0x3f10a2=>_0x3f10a2[_0x3670b1(0x30a)]())[_0x3670b1(0x93c)](_0x5f4f67=>_0x5f4f67!==''):_0x30a5f9[_0xb5b920]=_0x38bb5d);});let _0x109c36=_0x225e5c[_0x21aa03(0x731)][_0x21aa03(0x4a7)][_0x225e5c[_0x21aa03(0x731)][_0x21aa03(0x4a7)][_0x21aa03(0x303)]-0x1];if(_0x109c36){let _0xc892c3=_0x109c36[_0x21aa03(0x855)];_0xc892c3!==void 0x0&&(_0x30a5f9[_0x21aa03(0x298)]=_0xc892c3[_0x21aa03(0x641)]());}let _0x44af79=_0x207203[_0x21aa03(0x93c)](_0x25e46f=>_0x7f99fc[_0x21aa03(0x5f2)](_0x25e46f['name']));this[_0x21aa03(0x755)][_0x21aa03(0x3fb)](this['instanceName']+'\x20('+this[_0x21aa03(0x921)][_0x21aa03(0x2d1)]+_0x21aa03(0x3bb)),this['logger'][_0x21aa03(0x3fb)](_0x30a5f9),this[_0x21aa03(0x755)][_0x21aa03(0x3fb)](this[_0x21aa03(0x474)]+'\x20('+this[_0x21aa03(0x921)][_0x21aa03(0x2d1)]+_0x21aa03(0x44e)),this[_0x21aa03(0x755)][_0x21aa03(0x3fb)](_0x44af79);let _0xa1bd50=_0x44af79[_0x21aa03(0x948)](_0x441c17=>{const _0x26a06a=_0x21aa03;let _0x316601=this[_0x26a06a(0x48e)]?.[_0x26a06a(0x5ae)][_0x26a06a(0x756)](_0x18de8b=>_0x18de8b[_0x26a06a(0x5d3)]===_0x441c17[_0x26a06a(0x5d3)]);if(!_0x316601)throw new Error(_0x26a06a(0x794)+_0x441c17[_0x26a06a(0x5d3)]);return{'_id':_0x316601[_0x26a06a(0x5da)],'value':_0x441c17[_0x26a06a(0x732)]};});this[_0x21aa03(0x755)][_0x21aa03(0x3fb)](this['instanceName']+'\x20('+this[_0x21aa03(0x921)][_0x21aa03(0x2d1)]+'):\x20transformedCustomFieldVariables'),this[_0x21aa03(0x755)][_0x21aa03(0x3fb)](_0xa1bd50),await this[_0x21aa03(0x1ac)](_0x225e5c[_0x21aa03(0x788)],_0x30a5f9,_0xa1bd50);}catch(_0x527401){this[_0x21aa03(0x755)]['error'](this[_0x21aa03(0x474)]+'\x20('+this['instance'][_0x21aa03(0x2d1)]+_0x21aa03(0x329)+(_0x527401 instanceof Error?_0x527401['message']:JSON['stringify'](_0x527401,null,0x2)));}}else this['logger'][_0x21aa03(0x398)](this[_0x21aa03(0x474)]+'\x20('+this[_0x21aa03(0x921)][_0x21aa03(0x2d1)]+_0x21aa03(0x23c));}catch(_0x37b032){this[_0x21aa03(0x755)]['error'](this[_0x21aa03(0x474)]+'\x20('+this[_0x21aa03(0x921)]['wuid']+_0x21aa03(0x6a8)+(_0x37b032 instanceof Error?_0x37b032[_0x21aa03(0x6c9)]:JSON[_0x21aa03(0x28d)](_0x37b032,null,0x2)));}}async['saveChatVariables'](_0x5daf86,_0x838669,_0x5945b8){const _0x343e7d=a0_0x1df5a5;try{let _0x336067={'leadInfo.leadnome':_0x838669['nome'],'leadInfo.nomecompleto':_0x838669[_0x343e7d(0x378)],'leadInfo.email':_0x838669[_0x343e7d(0x6bc)],'leadInfo.cpf':_0x838669[_0x343e7d(0x635)],'leadInfo.status':_0x838669[_0x343e7d(0x781)],'leadInfo.notas':_0x838669[_0x343e7d(0x5c8)],'leadInfo.responsavelid':_0x838669[_0x343e7d(0x6b0)],'leadInfo.tags':_0x838669[_0x343e7d(0x291)],'leadInfo.etiquetas':_0x838669[_0x343e7d(0x553)],'leadInfo.customFields':_0x5945b8,'leadInfo.atendimentoAberto':_0x838669[_0x343e7d(0x401)]},_0x5259ec=await this[_0x343e7d(0x3cf)][_0x343e7d(0x947)][_0x343e7d(0x694)]({'where':{'_id':_0x5daf86}},this[_0x343e7d(0x921)][_0x343e7d(0x2d1)]);if(!_0x5259ec)return'chat\x20não\x20encontrado';let _0x56dd53=new Set(_0x5259ec[_0x343e7d(0x57a)][_0x343e7d(0x553)]||[]),_0x1b0cf5=new Set(_0x838669['etiquetas']||[]),_0x1ffa36=await this[_0x343e7d(0x3cf)][_0x343e7d(0x749)][_0x343e7d(0x756)]({'where':{}},this[_0x343e7d(0x921)][_0x343e7d(0x2d1)]),_0x1feeb8=new Set(_0x1ffa36[_0x343e7d(0x948)](_0x1132fd=>_0x1132fd['_id'])),_0x359715=[..._0x1b0cf5]['filter'](_0x36f3c8=>!_0x56dd53['has'](_0x36f3c8)&&_0x1feeb8['has'](_0x36f3c8)),_0x1e40be=[..._0x56dd53][_0x343e7d(0x93c)](_0x3d97e2=>!_0x1b0cf5[_0x343e7d(0x664)](_0x3d97e2));for(let _0x39dc20 of _0x359715)await this['AddChatLabel'](_0x39dc20,_0x5259ec[_0x343e7d(0x5da)]),_0x56dd53['add'](_0x39dc20);for(let _0x2233b8 of _0x1e40be)await this[_0x343e7d(0x386)](_0x2233b8,_0x5259ec['_id']),_0x56dd53[_0x343e7d(0x1be)](_0x2233b8);if(_0x343e7d(0x298)in _0x838669){let _0x31feab=_0x838669[_0x343e7d(0x298)];_0x336067[_0x343e7d(0x545)]=_0x31feab?Number(_0x31feab):null;}if(_0x343e7d(0x401)in _0x838669){let _0x5a7842=_0x838669[_0x343e7d(0x401)][_0x343e7d(0x6c2)]();_0x336067[_0x343e7d(0x7ea)]=_0x5a7842===_0x343e7d(0x8d4)||_0x5a7842==='1'||_0x5a7842===_0x343e7d(0x4f5)||_0x5a7842==='sim';}let _0x9c9b9c=await this[_0x343e7d(0x3cf)][_0x343e7d(0x947)]['updateOne']({'where':{'_id':_0x5daf86}},_0x336067,this['instance'][_0x343e7d(0x2d1)]);_0x9c9b9c?(this[_0x343e7d(0x755)][_0x343e7d(0x3fb)](this['instanceName']+'\x20('+this[_0x343e7d(0x921)][_0x343e7d(0x2d1)]+_0x343e7d(0x8d0)+_0x9c9b9c[_0x343e7d(0x5da)]),F(this[_0x343e7d(0x474)],_0x343e7d(0x64d),{'chat':_0x9c9b9c})):this[_0x343e7d(0x755)][_0x343e7d(0x398)](this['instanceName']+'\x20('+this[_0x343e7d(0x921)][_0x343e7d(0x2d1)]+'):\x20Falha\x20ao\x20atualizar\x20as\x20variáveis\x20do\x20chat\x20no\x20BD');}catch(_0x21ede7){this[_0x343e7d(0x755)][_0x343e7d(0x398)](this[_0x343e7d(0x474)]+'\x20('+this[_0x343e7d(0x921)][_0x343e7d(0x2d1)]+'):\x20Erro\x20ao\x20salvar\x20variáveis\x20do\x20chat\x20no\x20BD:\x20'+(_0x21ede7 instanceof Error?_0x21ede7[_0x343e7d(0x6c9)]:JSON['stringify'](_0x21ede7,null,0x2)));}}async[a0_0x1df5a5(0x2ca)](_0x4996e4,_0x2bd34b){const _0x1929ff=a0_0x1df5a5;this[_0x1929ff(0x755)][_0x1929ff(0x3fb)](this[_0x1929ff(0x474)]+'\x20('+this[_0x1929ff(0x921)][_0x1929ff(0x2d1)]+'):\x20atualização\x20chat:\x20'+_0x2bd34b);try{let _0x403217=await this[_0x1929ff(0x3cf)][_0x1929ff(0x947)][_0x1929ff(0x66e)]({'where':{'_id':_0x4996e4[_0x1929ff(0x788)]}},{'leadInfo.desativadoFluxoAte':_0x2bd34b},this[_0x1929ff(0x921)][_0x1929ff(0x2d1)]);this[_0x1929ff(0x755)][_0x1929ff(0x3fb)](this[_0x1929ff(0x474)]+'\x20('+this[_0x1929ff(0x921)][_0x1929ff(0x2d1)]+'):\x20Chat\x20atualizado\x20com\x20sucesso\x20para\x20conversation\x20ID:\x20'+_0x4996e4[_0x1929ff(0x5da)]),this[_0x1929ff(0x755)][_0x1929ff(0x3fb)](this[_0x1929ff(0x474)]+'\x20('+this['instance'][_0x1929ff(0x2d1)]+_0x1929ff(0x752)+JSON['stringify'](_0x403217,null,0x2)),_0x403217&&F(this[_0x1929ff(0x474)],_0x1929ff(0x64d),{'chat':_0x403217});}catch(_0x336843){this[_0x1929ff(0x755)]['error'](this['instanceName']+'\x20('+this[_0x1929ff(0x921)][_0x1929ff(0x2d1)]+'):\x20Erro\x20ao\x20atualizar\x20o\x20chat:\x20'+(_0x336843 instanceof Error?_0x336843[_0x1929ff(0x6c9)]:JSON[_0x1929ff(0x28d)](_0x336843,null,0x2)));}}async[a0_0x1df5a5(0x73d)](_0x5ce7cc){const _0x523e1a=a0_0x1df5a5;try{this[_0x523e1a(0x755)][_0x523e1a(0x3fb)](this[_0x523e1a(0x474)]+'\x20('+this[_0x523e1a(0x921)][_0x523e1a(0x2d1)]+_0x523e1a(0x682));let _0x4f1ded=_0x5ce7cc[_0x523e1a(0x894)](/\D/g,''),_0x3f6097=this[_0x523e1a(0x48e)]['flows'][_0x523e1a(0x756)](_0x507222=>_0x507222['testingWith']===_0x4f1ded);if(_0x3f6097||(this['logger']['verbose'](this[_0x523e1a(0x474)]+'\x20('+this[_0x523e1a(0x921)]['wuid']+_0x523e1a(0x929)),_0x3f6097=this['AutomateSystem']['flows'][_0x523e1a(0x756)](_0x4a6d69=>_0x4a6d69[_0x523e1a(0x686)]===!0x0)),!_0x3f6097)return this[_0x523e1a(0x755)]['verbose'](this['instanceName']+'\x20('+this[_0x523e1a(0x921)]['wuid']+_0x523e1a(0x8dc)),null;let _0x5c88de=await this[_0x523e1a(0x3cf)][_0x523e1a(0x461)][_0x523e1a(0x694)]({'where':{'_id':_0x3f6097['_id']}});if(!_0x5c88de||!_0x5c88de[_0x523e1a(0x74a)]?.[_0x523e1a(0x5f2)](this[_0x523e1a(0x921)][_0x523e1a(0x2d1)]))throw this[_0x523e1a(0x755)]['error'](this[_0x523e1a(0x474)]+'\x20('+this[_0x523e1a(0x921)][_0x523e1a(0x2d1)]+_0x523e1a(0x8d9)+_0x5c88de['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x523e1a(0x844)+_0x5c88de[_0x523e1a(0x5da)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');return _0x5c88de;}catch(_0x2f4ae9){return this['logger'][_0x523e1a(0x398)](this['instanceName']+'\x20('+this[_0x523e1a(0x921)][_0x523e1a(0x2d1)]+_0x523e1a(0x7a2)+(_0x2f4ae9 instanceof Error?_0x2f4ae9[_0x523e1a(0x6c9)]:JSON[_0x523e1a(0x28d)](_0x2f4ae9,null,0x2))),null;}}async[a0_0x1df5a5(0x94a)](_0x26045f,_0x52befa){const _0x3e657b=a0_0x1df5a5;try{let _0xd33c84=!!_0x52befa[_0x3e657b(0x943)],_0x28c3ef=_0x52befa['quoted'],_0x415cee=null;if(this[_0x3e657b(0x755)]['verbose'](this[_0x3e657b(0x474)]+'\x20('+this['instance'][_0x3e657b(0x2d1)]+'):\x20isVote:\x20'+_0xd33c84+_0x3e657b(0x893)+_0x28c3ef),_0xd33c84){this[_0x3e657b(0x755)][_0x3e657b(0x3fb)](this[_0x3e657b(0x474)]+'\x20('+this['instance']['wuid']+_0x3e657b(0x2e6));let _0x545323={'where':{'remoteJid':_0x26045f,'waitingMenu_id':_0x28c3ef}};if(_0x415cee=await this['repository'][_0x3e657b(0x557)]['findOne'](_0x545323,this['instance']['wuid']),!_0x415cee)return this['logger'][_0x3e657b(0x3fb)](this[_0x3e657b(0x474)]+'\x20('+this['instance'][_0x3e657b(0x2d1)]+_0x3e657b(0x452)),null;let _0x21478a=Date[_0x3e657b(0x78f)](),_0x237cc6=_0x415cee?.['minutesToClose']||0x0,_0x1cfe8c=_0x21478a-_0x237cc6*0x3c*0x3e8;if(_0x415cee[_0x3e657b(0x5a2)]<_0x1cfe8c){this[_0x3e657b(0x755)]['verbose'](this['instanceName']+'\x20('+this['instance'][_0x3e657b(0x2d1)]+_0x3e657b(0x364));let _0x179b2d={'number':_0x415cee['remoteJid'],'options':{'delay':0x0},'textMessage':{'text':_0x415cee[_0x3e657b(0x70a)]}};await this[_0x3e657b(0x2ab)](_0x179b2d);let _0xe2c44f={'status':_0x3e657b(0x7f4),'waitingMenu_id':'','waitingMenu_text':'','waitingMenu_replyOptions':[]};return await this[_0x3e657b(0x3cf)][_0x3e657b(0x557)]['updateOne'](_0x415cee['_id'],_0xe2c44f,this[_0x3e657b(0x921)]['wuid']),null;}return _0x415cee[_0x3e657b(0x5a2)]=Date['now'](),_0x415cee[_0x3e657b(0x731)][_0x3e657b(0x6e1)]=_0x52befa,_0x415cee;}else{this['logger'][_0x3e657b(0x3fb)](this[_0x3e657b(0x474)]+'\x20('+this[_0x3e657b(0x921)][_0x3e657b(0x2d1)]+_0x3e657b(0x91e)+this[_0x3e657b(0x921)][_0x3e657b(0x2d1)]+_0x3e657b(0x4e8)),this[_0x3e657b(0x755)][_0x3e657b(0x3fb)](this[_0x3e657b(0x474)]+'\x20('+this['instance'][_0x3e657b(0x2d1)]+_0x3e657b(0x54d));let _0x27337b={'where':{'remoteJid':_0x26045f,'status':_0x3e657b(0x20b)}};if(_0x415cee=await this[_0x3e657b(0x3cf)][_0x3e657b(0x557)][_0x3e657b(0x694)](_0x27337b,this[_0x3e657b(0x921)][_0x3e657b(0x2d1)]),!_0x415cee){let _0x55c24f=await this[_0x3e657b(0x73d)](_0x26045f);if(_0x55c24f&&(_0x415cee=await this[_0x3e657b(0x33f)](_0x55c24f,_0x52befa[_0x3e657b(0x440)],_0x52befa)),!_0x415cee)return null;}let _0x54bcc9=Date['now'](),_0x182a39=_0x415cee?.[_0x3e657b(0x769)]||0x0,_0x4adf11=_0x54bcc9-_0x182a39*0x3c*0x3e8;if(this[_0x3e657b(0x755)][_0x3e657b(0x3fb)](this[_0x3e657b(0x474)]+'\x20('+this['instance'][_0x3e657b(0x2d1)]+_0x3e657b(0x6bf)+_0x54bcc9+',\x20Minutes\x20to\x20Close:\x20'+_0x182a39+_0x3e657b(0x45e)+_0x4adf11),this[_0x3e657b(0x755)][_0x3e657b(0x3fb)](this[_0x3e657b(0x474)]+'\x20('+this[_0x3e657b(0x921)][_0x3e657b(0x2d1)]+'):\x20A\x20mensagem\x20não\x20foi\x20enviada\x20pelo\x20bot'),this[_0x3e657b(0x755)][_0x3e657b(0x3fb)](this[_0x3e657b(0x474)]+'\x20('+this[_0x3e657b(0x921)][_0x3e657b(0x2d1)]+_0x3e657b(0x906)+_0x415cee[_0x3e657b(0x5a2)]),this[_0x3e657b(0x755)]['verbose'](this[_0x3e657b(0x474)]+'\x20('+this[_0x3e657b(0x921)][_0x3e657b(0x2d1)]+'):\x20expirationTime:\x20'+_0x4adf11),_0x415cee[_0x3e657b(0x5a2)]<_0x4adf11){this[_0x3e657b(0x755)][_0x3e657b(0x3fb)](this[_0x3e657b(0x474)]+'\x20('+this['instance'][_0x3e657b(0x2d1)]+'):\x20Conversa\x20está\x20expirada');let _0x331088=await this[_0x3e657b(0x73d)](_0x26045f);if(_0x331088===null)return null;_0x415cee&&await this[_0x3e657b(0x3cf)][_0x3e657b(0x557)]['updateOne'](_0x415cee[_0x3e657b(0x5da)],{'status':_0x3e657b(0x7f4)},this['instance'][_0x3e657b(0x2d1)]),_0x415cee=await this[_0x3e657b(0x33f)](_0x331088,_0x52befa[_0x3e657b(0x440)],_0x52befa);}return _0x415cee[_0x3e657b(0x5a2)]=_0x54bcc9,_0x415cee[_0x3e657b(0x731)][_0x3e657b(0x6e1)]=_0x52befa,_0x415cee;}}catch(_0x1c53d4){return this['logger'][_0x3e657b(0x398)](this[_0x3e657b(0x474)]+'\x20('+this[_0x3e657b(0x921)][_0x3e657b(0x2d1)]+'):\x20Erro\x20ao\x20pesquisar\x20a\x20conversa:\x20'+(_0x1c53d4 instanceof Error?_0x1c53d4['message']:JSON[_0x3e657b(0x28d)](_0x1c53d4,null,0x2))),null;}}async[a0_0x1df5a5(0x33f)](_0x48f975,_0x1e4225,_0x477ae0){const _0x419757=a0_0x1df5a5;this['logger'][_0x419757(0x3fb)](this[_0x419757(0x474)]+'\x20('+this[_0x419757(0x921)]['wuid']+_0x419757(0x6a3));try{let _0x4beb90=require(_0x419757(0x646))[_0x419757(0x399)],_0xdb2702=Date['now'](),_0x12b0af=_0x419757(0x3af),_0x7d81a4=_0x1e4225[_0x419757(0x89a)]?null:_0x477ae0,_0x5a9e45=_0x1e4225[_0x419757(0x89a)]?_0x477ae0:null,_0x3474ce=_0x1e4225[_0x419757(0x788)],_0x1950e8=this[_0x419757(0x48e)][_0x419757(0x714)]['find'](_0x2a44a2=>_0x2a44a2[_0x419757(0x5da)]===_0x48f975[_0x419757(0x5da)]?.['toString']()),_0x415ead=_0x1950e8?.[_0x419757(0x769)]??_0x48f975[_0x419757(0x769)]??0x0,_0x2dfca9=_0x1950e8?.[_0x419757(0x502)]??_0x48f975['readMessages']??!0x1;await this[_0x419757(0x8f9)](_0x3474ce);let _0x305ecb={'flowId':_0x48f975[_0x419757(0x5da)],..._0x48f975,'chatLog':null},_0x5235ac=await this[_0x419757(0x4f9)](_0x305ecb[_0x419757(0x763)]),_0x162c0e=await this[_0x419757(0x6b2)](_0x3474ce),_0x5ddcc2={..._0x5235ac,..._0x162c0e,'_remoteJid':_0x3474ce},_0x5a66a5={'lastReceivedMessage':_0x7d81a4,'lastSendMessage':_0x5a9e45,'lastBlockId':_0x12b0af,'lastCondition':!0x0,'realVariables':_0x5ddcc2};_0x305ecb['chatLog']=_0x5a66a5,delete _0x305ecb[_0x419757(0x5da)],_0x305ecb['_id']=new _0x4beb90(),_0x305ecb[_0x419757(0x5a2)]=_0xdb2702,_0x305ecb[_0x419757(0x781)]=_0x419757(0x20b),_0x305ecb['remoteJid']=_0x3474ce,_0x305ecb[_0x419757(0x769)]=_0x415ead,_0x305ecb[_0x419757(0x502)]=_0x2dfca9;let _0xb6f6fa=await this[_0x419757(0x3cf)][_0x419757(0x557)]['updateOne'](_0x305ecb[_0x419757(0x5da)],_0x305ecb,this[_0x419757(0x921)][_0x419757(0x2d1)]);return this[_0x419757(0x755)]['verbose'](this[_0x419757(0x474)]+'\x20('+this[_0x419757(0x921)][_0x419757(0x2d1)]+_0x419757(0x74f)),_0xb6f6fa?_0x305ecb:null;}catch(_0x371550){return this[_0x419757(0x755)][_0x419757(0x398)](this[_0x419757(0x474)]+'\x20('+this[_0x419757(0x921)][_0x419757(0x2d1)]+_0x419757(0x7bd)+(_0x371550 instanceof Error?_0x371550[_0x419757(0x6c9)]:JSON[_0x419757(0x28d)](_0x371550,null,0x2))),_0x371550;}}async['uazapiSendText'](_0x30594a,_0x3ba584){const _0x4ea515=a0_0x1df5a5;let _0x52fe01=_0x30594a[_0x4ea515(0x788)];_0x3ba584[_0x4ea515(0x3b6)][_0x4ea515(0x788)]&&_0x3ba584[_0x4ea515(0x3b6)]['remoteJid']['trim']()!==''&&(_0x52fe01=_0x3ba584['uazapi'][_0x4ea515(0x788)]['trim']()),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x4ea515(0x921)][_0x4ea515(0x2d1)]+_0x4ea515(0x7c3));let _0x4aa5f4={'number':_0x52fe01,'options':{'delay':_0x3ba584[_0x4ea515(0x3b6)][_0x4ea515(0x38f)],'linkPreview':_0x3ba584[_0x4ea515(0x3b6)]['linkPreview']},'textMessage':{'text':_0x3ba584[_0x4ea515(0x3b6)][_0x4ea515(0x5b9)]}};try{let _0x59aad5=await this['textMessage'](_0x4aa5f4);if(_0x59aad5){let _0x2f0b12={'_id':_0x59aad5['key']['id'],'_fromMe':_0x59aad5[_0x4ea515(0x440)][_0x4ea515(0x89a)],'_remoteJid':_0x59aad5[_0x4ea515(0x440)]['remoteJid']},_0x58e390=(0x0,w[_0x4ea515(0x34f)])(_0x59aad5[_0x4ea515(0x6c9)]),_0x35af74=(0x0,w[_0x4ea515(0x6c4)])(_0x58e390);_0x30594a[_0x4ea515(0x731)][_0x4ea515(0x63f)]=_0x3ba584[_0x4ea515(0x5da)][_0x4ea515(0x641)]();let {message_normalized:_0x4af108}=this[_0x4ea515(0x811)](_0x58e390,_0x35af74,null);_0x30594a['chatLog']['lastSendMessage']=await _0x4af108;let _0x18c521={'messageId':_0x59aad5[_0x4ea515(0x440)]['id']},_0x16324e=_0x30594a[_0x4ea515(0x731)][_0x4ea515(0x90c)];Object['assign'](_0x16324e,_0x2f0b12),_0x30594a[_0x4ea515(0x731)][_0x4ea515(0x90c)]=_0x16324e,this[_0x4ea515(0x4b4)](_0x30594a,_0x3ba584,_0x18c521);}else{let _0x30ebc7={'error':!0x0};this[_0x4ea515(0x4b4)](_0x30594a,_0x3ba584,_0x30ebc7),this['logger'][_0x4ea515(0x398)](this[_0x4ea515(0x474)]+'\x20('+this['instance'][_0x4ea515(0x2d1)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20texto.');}}catch(_0x1ed0d2){let _0x176cb4={'error':!0x0,'errorLog':_0x1ed0d2[_0x4ea515(0x641)]()};this[_0x4ea515(0x4b4)](_0x30594a,_0x3ba584,_0x176cb4),this[_0x4ea515(0x755)][_0x4ea515(0x398)](this[_0x4ea515(0x474)]+'\x20('+this['instance'][_0x4ea515(0x2d1)]+_0x4ea515(0x349)+(_0x1ed0d2 instanceof Error?_0x1ed0d2['message']:JSON['stringify'](_0x1ed0d2,null,0x2)));}}async[a0_0x1df5a5(0x678)](_0x1e49ff,_0x3b292f){const _0x580c20=a0_0x1df5a5;let _0x59cec9=_0x1e49ff[_0x580c20(0x788)];_0x3b292f[_0x580c20(0x3b6)][_0x580c20(0x788)]&&_0x3b292f['uazapi'][_0x580c20(0x788)][_0x580c20(0x30a)]()!==''&&(_0x59cec9=_0x3b292f[_0x580c20(0x3b6)][_0x580c20(0x788)]['trim']()),this[_0x580c20(0x755)][_0x580c20(0x3fb)](this['instanceName']+'\x20('+this[_0x580c20(0x921)][_0x580c20(0x2d1)]+'):\x20Enviando\x20mídia');let _0x101637={'number':_0x59cec9,'options':{'delay':_0x3b292f['uazapi'][_0x580c20(0x38f)],'linkPreview':_0x3b292f[_0x580c20(0x3b6)][_0x580c20(0x33d)]},'mediaMessage':{'mediatype':_0x3b292f['uazapi'][_0x580c20(0x52f)],'caption':_0x3b292f[_0x580c20(0x3b6)][_0x580c20(0x4a2)],'media':_0x3b292f[_0x580c20(0x3b6)][_0x580c20(0x516)],'fileName':_0x3b292f[_0x580c20(0x3b6)]['fileName']}};try{let _0x50a2b5=await this[_0x580c20(0x269)](_0x101637);if(_0x50a2b5){let _0x2f953a={'_id':_0x50a2b5[_0x580c20(0x440)]['id'],'_fromMe':_0x50a2b5['key']['fromMe'],'_remoteJid':_0x50a2b5['key'][_0x580c20(0x788)]},_0x2dd488=(0x0,w[_0x580c20(0x34f)])(_0x50a2b5['message']),_0x59f301=(0x0,w[_0x580c20(0x6c4)])(_0x2dd488);_0x1e49ff[_0x580c20(0x731)][_0x580c20(0x63f)]=_0x3b292f[_0x580c20(0x5da)][_0x580c20(0x641)]();let {message_normalized:_0x300675}=this['normalizeMessage'](_0x2dd488,_0x59f301,null);_0x1e49ff[_0x580c20(0x731)][_0x580c20(0x7d9)]=await _0x300675;let _0xe7406b={'messageId':_0x50a2b5['key']['id']},_0x37f098=_0x1e49ff[_0x580c20(0x731)][_0x580c20(0x90c)];Object[_0x580c20(0x503)](_0x37f098,_0x2f953a),_0x1e49ff[_0x580c20(0x731)][_0x580c20(0x90c)]=_0x37f098,this['updateConversation'](_0x1e49ff,_0x3b292f,_0xe7406b);}else{let _0x55bdd1={'error':!0x0};this[_0x580c20(0x4b4)](_0x1e49ff,_0x3b292f,_0x55bdd1),this[_0x580c20(0x755)][_0x580c20(0x398)](this['instanceName']+'\x20('+this['instance'][_0x580c20(0x2d1)]+_0x580c20(0x84a));}}catch(_0x9e972b){let _0x57708e={'error':!0x0,'errorLog':_0x9e972b[_0x580c20(0x641)]()};this['updateConversation'](_0x1e49ff,_0x3b292f,_0x57708e),this[_0x580c20(0x755)][_0x580c20(0x398)](this[_0x580c20(0x474)]+'\x20('+this[_0x580c20(0x921)]['wuid']+_0x580c20(0x517)+(_0x9e972b instanceof Error?_0x9e972b[_0x580c20(0x6c9)]:JSON[_0x580c20(0x28d)](_0x9e972b,null,0x2)));}}async[a0_0x1df5a5(0x2ef)](_0x578359,_0x42f72c){const _0x5d0839=a0_0x1df5a5;let _0x5bef76=_0x578359[_0x5d0839(0x788)];_0x42f72c[_0x5d0839(0x3b6)][_0x5d0839(0x788)]&&_0x42f72c[_0x5d0839(0x3b6)][_0x5d0839(0x788)][_0x5d0839(0x30a)]()!==''&&(_0x5bef76=_0x42f72c['uazapi'][_0x5d0839(0x788)][_0x5d0839(0x30a)]()),this[_0x5d0839(0x755)][_0x5d0839(0x3fb)](this[_0x5d0839(0x474)]+'\x20('+this['instance'][_0x5d0839(0x2d1)]+_0x5d0839(0x36b));let _0x1f8238={'number':_0x5bef76,'options':{'delay':_0x42f72c[_0x5d0839(0x3b6)][_0x5d0839(0x38f)]},'locationMessage':{'name':_0x42f72c[_0x5d0839(0x3b6)][_0x5d0839(0x5d3)],'address':_0x42f72c['uazapi'][_0x5d0839(0x37d)],'latitude':_0x42f72c[_0x5d0839(0x3b6)][_0x5d0839(0x355)],'longitude':_0x42f72c['uazapi'][_0x5d0839(0x586)]}};try{let _0x51a50f=await this['locationMessage'](_0x1f8238);if(_0x51a50f){let _0x5501e2={'_id':_0x51a50f['key']['id'],'_fromMe':_0x51a50f['key']['fromMe'],'_remoteJid':_0x51a50f['key'][_0x5d0839(0x788)]},_0x237040=(0x0,w[_0x5d0839(0x34f)])(_0x51a50f['message']),_0x176bb3=(0x0,w['getContentType'])(_0x237040);_0x578359['chatLog'][_0x5d0839(0x63f)]=_0x42f72c[_0x5d0839(0x5da)][_0x5d0839(0x641)]();let {message_normalized:_0x28d392}=this[_0x5d0839(0x811)](_0x237040,_0x176bb3,null);_0x578359[_0x5d0839(0x731)][_0x5d0839(0x7d9)]=await _0x28d392;let _0x141818={'messageId':_0x51a50f['key']['id']},_0x1dae0c=_0x578359[_0x5d0839(0x731)][_0x5d0839(0x90c)];Object['assign'](_0x1dae0c,_0x5501e2),_0x578359[_0x5d0839(0x731)][_0x5d0839(0x90c)]=_0x1dae0c,this[_0x5d0839(0x4b4)](_0x578359,_0x42f72c,_0x141818);}else{let _0x108fa8={'error':!0x0};this[_0x5d0839(0x4b4)](_0x578359,_0x42f72c,_0x108fa8),this['logger'][_0x5d0839(0x398)](this['instanceName']+'\x20('+this[_0x5d0839(0x921)][_0x5d0839(0x2d1)]+_0x5d0839(0x295));}}catch(_0x519d6d){let _0x59f157={'error':!0x0,'errorLog':_0x519d6d[_0x5d0839(0x641)]()};this[_0x5d0839(0x4b4)](_0x578359,_0x42f72c,_0x59f157),this[_0x5d0839(0x755)]['error'](this[_0x5d0839(0x474)]+'\x20('+this[_0x5d0839(0x921)][_0x5d0839(0x2d1)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20localização:\x20'+(_0x519d6d instanceof Error?_0x519d6d['message']:JSON['stringify'](_0x519d6d,null,0x2)));}}async[a0_0x1df5a5(0x38d)](_0xa9a0d5,_0x559ed0){const _0x358aec=a0_0x1df5a5;let _0x431360=_0xa9a0d5[_0x358aec(0x788)];_0x559ed0['uazapi'][_0x358aec(0x788)]&&_0x559ed0[_0x358aec(0x3b6)][_0x358aec(0x788)][_0x358aec(0x30a)]()!==''&&(_0x431360=_0x559ed0[_0x358aec(0x3b6)][_0x358aec(0x788)][_0x358aec(0x30a)]()),this[_0x358aec(0x755)][_0x358aec(0x3fb)](this['instanceName']+'\x20('+this[_0x358aec(0x921)]['wuid']+_0x358aec(0x6ba));let _0x200f85={'number':_0x431360,'options':{'delay':_0x559ed0[_0x358aec(0x3b6)]['delay']},'audioMessage':{'audio':_0x559ed0[_0x358aec(0x3b6)][_0x358aec(0x892)]}};try{let _0x469953=await this[_0x358aec(0x48a)](_0x200f85);if(_0x469953){let _0x8e22c={'_id':_0x469953[_0x358aec(0x440)]['id'],'_fromMe':_0x469953[_0x358aec(0x440)][_0x358aec(0x89a)],'_remoteJid':_0x469953['key'][_0x358aec(0x788)]},_0x2c2b2e=(0x0,w['normalizeMessageContent'])(_0x469953[_0x358aec(0x6c9)]),_0x39f293=(0x0,w['getContentType'])(_0x2c2b2e);_0xa9a0d5[_0x358aec(0x731)][_0x358aec(0x63f)]=_0x559ed0[_0x358aec(0x5da)][_0x358aec(0x641)]();let {message_normalized:_0x24ef30}=this[_0x358aec(0x811)](_0x2c2b2e,_0x39f293,null);_0xa9a0d5[_0x358aec(0x731)][_0x358aec(0x7d9)]=await _0x24ef30;let _0x4bfe1c={'messageId':_0x469953[_0x358aec(0x440)]['id']},_0x20cac3=_0xa9a0d5['chatLog'][_0x358aec(0x90c)];Object['assign'](_0x20cac3,_0x8e22c),_0xa9a0d5[_0x358aec(0x731)][_0x358aec(0x90c)]=_0x20cac3,this[_0x358aec(0x4b4)](_0xa9a0d5,_0x559ed0,_0x4bfe1c);}else{let _0x37a34d={'error':!0x0};this[_0x358aec(0x4b4)](_0xa9a0d5,_0x559ed0,_0x37a34d),this[_0x358aec(0x755)][_0x358aec(0x398)](this[_0x358aec(0x474)]+'\x20('+this[_0x358aec(0x921)][_0x358aec(0x2d1)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20áudio.');}}catch(_0x1ef888){let _0x2aba18={'error':!0x0,'errorLog':_0x1ef888[_0x358aec(0x641)]()};this[_0x358aec(0x4b4)](_0xa9a0d5,_0x559ed0,_0x2aba18),this[_0x358aec(0x755)][_0x358aec(0x398)](this['instanceName']+'\x20('+this[_0x358aec(0x921)]['wuid']+_0x358aec(0x889)+(_0x1ef888 instanceof Error?_0x1ef888['message']:JSON[_0x358aec(0x28d)](_0x1ef888,null,0x2)));}}async[a0_0x1df5a5(0x363)](_0xa70fc1,_0x3646ce){const _0x99b751=a0_0x1df5a5;let _0x181d82=_0xa70fc1[_0x99b751(0x788)];_0x3646ce[_0x99b751(0x3b6)][_0x99b751(0x788)]&&_0x3646ce[_0x99b751(0x3b6)]['remoteJid'][_0x99b751(0x30a)]()!==''&&(_0x181d82=_0x3646ce[_0x99b751(0x3b6)][_0x99b751(0x788)][_0x99b751(0x30a)]()),this[_0x99b751(0x755)][_0x99b751(0x3fb)](this[_0x99b751(0x474)]+'\x20('+this[_0x99b751(0x921)][_0x99b751(0x2d1)]+'):\x20Enviando\x20contato');let _0x62b9d2={'number':_0x181d82,'options':{'delay':_0x3646ce[_0x99b751(0x3b6)][_0x99b751(0x38f)]},'contactMessage':[{'fullName':_0x3646ce[_0x99b751(0x3b6)][_0x99b751(0x3f0)],'phoneNumber':_0x3646ce['uazapi'][_0x99b751(0x67f)]}]};try{let _0x53affa=await this[_0x99b751(0x5ea)](_0x62b9d2);if(_0x53affa){let _0x22800c={'_id':_0x53affa[_0x99b751(0x440)]['id'],'_fromMe':_0x53affa['key'][_0x99b751(0x89a)],'_remoteJid':_0x53affa[_0x99b751(0x440)][_0x99b751(0x788)]},_0x17c1d3=(0x0,w[_0x99b751(0x34f)])(_0x53affa[_0x99b751(0x6c9)]),_0x103e5e=(0x0,w[_0x99b751(0x6c4)])(_0x17c1d3);_0xa70fc1[_0x99b751(0x731)][_0x99b751(0x63f)]=_0x3646ce[_0x99b751(0x5da)][_0x99b751(0x641)]();let {message_normalized:_0x341ef8}=this[_0x99b751(0x811)](_0x17c1d3,_0x103e5e,null);_0xa70fc1[_0x99b751(0x731)][_0x99b751(0x7d9)]=await _0x341ef8;let _0x50586e={'messageId':_0x53affa[_0x99b751(0x440)]['id']},_0x3e23ac=_0xa70fc1['chatLog'][_0x99b751(0x90c)];Object[_0x99b751(0x503)](_0x3e23ac,_0x22800c),_0xa70fc1[_0x99b751(0x731)]['realVariables']=_0x3e23ac,this[_0x99b751(0x4b4)](_0xa70fc1,_0x3646ce,_0x50586e);}else{let _0x35913f={'error':!0x0};this[_0x99b751(0x4b4)](_0xa70fc1,_0x3646ce,_0x35913f),this[_0x99b751(0x755)][_0x99b751(0x398)](this[_0x99b751(0x474)]+'\x20('+this[_0x99b751(0x921)][_0x99b751(0x2d1)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20contato.');}}catch(_0x33cf82){let _0x327611={'error':!0x0,'errorLog':_0x33cf82[_0x99b751(0x641)]()};this[_0x99b751(0x4b4)](_0xa70fc1,_0x3646ce,_0x327611),this[_0x99b751(0x755)][_0x99b751(0x398)](this['instanceName']+'\x20('+this['instance'][_0x99b751(0x2d1)]+_0x99b751(0x63e)+(_0x33cf82 instanceof Error?_0x33cf82[_0x99b751(0x6c9)]:JSON['stringify'](_0x33cf82,null,0x2)));}}[a0_0x1df5a5(0x838)](_0x1618eb,_0xd0e187){const _0x17ea96=a0_0x1df5a5;for(let _0x1d265a of _0x1618eb)_0x1d265a[_0x17ea96(0x747)]&&(_0x1d265a[_0x17ea96(0x747)]=this['replaceVariables'](_0x1d265a['option'],_0xd0e187)),_0x1d265a[_0x17ea96(0x598)]&&(_0x1d265a[_0x17ea96(0x598)]=this[_0x17ea96(0x589)](_0x1d265a['optionDescription'],_0xd0e187));}async[a0_0x1df5a5(0x1fe)](_0x346925,_0x1cb451){const _0x48f662=a0_0x1df5a5;let _0xaf918b=_0x346925[_0x48f662(0x788)];_0x1cb451[_0x48f662(0x3b6)]['remoteJid']&&_0x1cb451[_0x48f662(0x3b6)][_0x48f662(0x788)][_0x48f662(0x30a)]()!==''&&(_0xaf918b=_0x1cb451[_0x48f662(0x3b6)]['remoteJid'][_0x48f662(0x30a)]()),this[_0x48f662(0x755)][_0x48f662(0x3fb)](this[_0x48f662(0x474)]+'\x20('+this[_0x48f662(0x921)][_0x48f662(0x2d1)]+'):\x20Enviando\x20enquete');let _0xb0ca65=_0x346925[_0x48f662(0x588)][_0x48f662(0x93c)](_0x140887=>_0x140887[_0x48f662(0x8b4)]===_0x1cb451[_0x48f662(0x5da)])['sort']((_0x205ff4,_0x27dd5d)=>_0x205ff4[_0x48f662(0x751)]-_0x27dd5d[_0x48f662(0x751)]);this['replaceVariablesInReplyOptions'](_0xb0ca65,_0x346925[_0x48f662(0x731)][_0x48f662(0x90c)]);let _0x53f435=_0xb0ca65['map'](_0x3947ab=>_0x3947ab[_0x48f662(0x747)]),_0x353392={'number':_0xaf918b,'menuMessage':{'type':_0x1cb451[_0x48f662(0x3b6)]['menuType']||'poll','text':_0x1cb451['uazapi'][_0x48f662(0x5b9)]||_0x1cb451[_0x48f662(0x3b6)]['name'],'footerText':_0x1cb451[_0x48f662(0x3b6)]['footerText'],'buttonText':_0x1cb451[_0x48f662(0x3b6)][_0x48f662(0x629)],'selectableCount':0x1,'choices':_0x53f435},'options':{'delay':_0x1cb451[_0x48f662(0x3b6)][_0x48f662(0x38f)]}};try{let _0x1c4a1a=await this[_0x48f662(0x1ec)](_0x353392);if(_0x1c4a1a){let _0x31cfe1={'_id':_0x1c4a1a[_0x48f662(0x440)]['id'],'_fromMe':_0x1c4a1a[_0x48f662(0x440)][_0x48f662(0x89a)],'_remoteJid':_0x1c4a1a[_0x48f662(0x440)][_0x48f662(0x788)]};_0x1cb451[_0x48f662(0x3b6)][_0x48f662(0x5f4)]===!0x0&&(_0x346925[_0x48f662(0x781)]=_0x48f662(0x627),this[_0x48f662(0x755)][_0x48f662(0x3fb)](this[_0x48f662(0x474)]+'\x20('+this[_0x48f662(0x921)][_0x48f662(0x2d1)]+'):\x20conversation.status:\x20'+_0x346925[_0x48f662(0x781)])),this[_0x48f662(0x755)][_0x48f662(0x3fb)](this[_0x48f662(0x474)]+'\x20('+this[_0x48f662(0x921)]['wuid']+_0x48f662(0x1c3)+(_0x1cb451[_0x48f662(0x3b6)][_0x48f662(0x5d3)]||_0x1cb451[_0x48f662(0x3b6)][_0x48f662(0x5b9)])),_0x346925[_0x48f662(0x85a)]=_0x1c4a1a[_0x48f662(0x440)]['id'],_0x346925['waitingMenu_text']=_0x1cb451[_0x48f662(0x3b6)]['name']||_0x1cb451['uazapi'][_0x48f662(0x5b9)],_0x346925[_0x48f662(0x790)]=_0xb0ca65,_0x1cb451[_0x48f662(0x3b6)][_0x48f662(0x639)]&&(_0x346925[_0x48f662(0x70a)]=_0x1cb451['uazapi'][_0x48f662(0x639)]),this[_0x48f662(0x755)][_0x48f662(0x3fb)](this['instanceName']+'\x20('+this[_0x48f662(0x921)][_0x48f662(0x2d1)]+_0x48f662(0x3c7)+_0x346925[_0x48f662(0x7a7)]);let _0x1db54d=(0x0,w[_0x48f662(0x34f)])(_0x1c4a1a[_0x48f662(0x6c9)]),_0x46a847=(0x0,w[_0x48f662(0x6c4)])(_0x1db54d);_0x346925[_0x48f662(0x731)][_0x48f662(0x63f)]=_0x1cb451['_id'][_0x48f662(0x641)]();let {message_normalized:_0xcdacb4}=this[_0x48f662(0x811)](_0x1db54d,_0x46a847,null);_0x346925[_0x48f662(0x731)][_0x48f662(0x7d9)]=await _0xcdacb4;let _0x5570bf={'messageId':_0x1c4a1a[_0x48f662(0x440)]['id']},_0x4d36c8=_0x346925[_0x48f662(0x731)][_0x48f662(0x90c)];Object[_0x48f662(0x503)](_0x4d36c8,_0x31cfe1),_0x346925['chatLog'][_0x48f662(0x90c)]=_0x4d36c8,this[_0x48f662(0x4b4)](_0x346925,_0x1cb451,_0x5570bf);}else{let _0x4e6a4f={'error':!0x0};this[_0x48f662(0x4b4)](_0x346925,_0x1cb451,_0x4e6a4f),this[_0x48f662(0x755)]['error'](this[_0x48f662(0x474)]+'\x20('+this['instance']['wuid']+_0x48f662(0x1ce));}}catch(_0x5a7be6){let _0x54b62e={'error':!0x0,'errorLog':_0x5a7be6 instanceof Error?_0x5a7be6['message']:JSON[_0x48f662(0x28d)](_0x5a7be6,null,0x2)};this[_0x48f662(0x4b4)](_0x346925,_0x1cb451,_0x54b62e),this[_0x48f662(0x755)]['error'](this['instanceName']+'\x20('+this[_0x48f662(0x921)][_0x48f662(0x2d1)]+'):\x20Falha\x20ao\x20enviar\x20mensagem\x20de\x20enquete:\x20'+(_0x5a7be6 instanceof Error?_0x5a7be6[_0x48f662(0x6c9)]:JSON[_0x48f662(0x28d)](_0x5a7be6,null,0x2)));}}async[a0_0x1df5a5(0x283)](_0xad6e61,_0xba9885){const _0x58ba6d=a0_0x1df5a5;this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x58ba6d(0x921)][_0x58ba6d(0x2d1)]+_0x58ba6d(0x1e9));let _0x2df2ca=_0xad6e61[_0x58ba6d(0x731)]['blockLogs']['find'](_0x19ed83=>_0x19ed83[_0x58ba6d(0x8b4)]['toString']()===_0xba9885[_0x58ba6d(0x3b6)][_0x58ba6d(0x8b4)]['toString']()),_0x3eba83={'id':_0x2df2ca['messageId'],'remoteJid':_0x2df2ca['remoteJid'],'fromMe':_0x2df2ca['fromMe']};try{let _0x276399=await this[_0x58ba6d(0x56f)](_0x3eba83);if(_0x276399){let _0x5f09bc=(0x0,w['normalizeMessageContent'])(_0x276399[_0x58ba6d(0x6c9)]),_0x1f4682=(0x0,w[_0x58ba6d(0x6c4)])(_0x5f09bc);_0xad6e61['chatLog'][_0x58ba6d(0x63f)]=_0xba9885[_0x58ba6d(0x5da)][_0x58ba6d(0x641)]();let {message_normalized:_0x24f101}=this[_0x58ba6d(0x811)](_0x5f09bc,_0x1f4682,null);_0xad6e61['chatLog']['lastSendMessage']=await _0x24f101;let _0x17786b={};this[_0x58ba6d(0x4b4)](_0xad6e61,_0xba9885,_0x17786b);}else{let _0x36ec85={'error':!0x0};this['updateConversation'](_0xad6e61,_0xba9885,_0x36ec85),this['logger'][_0x58ba6d(0x398)](this[_0x58ba6d(0x474)]+'\x20('+this[_0x58ba6d(0x921)][_0x58ba6d(0x2d1)]+_0x58ba6d(0x342));}}catch(_0x1b6a91){let _0x25c259={'error':!0x0,'errorLog':_0x1b6a91 instanceof Error?_0x1b6a91[_0x58ba6d(0x6c9)]:JSON[_0x58ba6d(0x28d)](_0x1b6a91,null,0x2)};this[_0x58ba6d(0x4b4)](_0xad6e61,_0xba9885,_0x25c259),this[_0x58ba6d(0x755)][_0x58ba6d(0x398)](this[_0x58ba6d(0x474)]+'\x20('+this[_0x58ba6d(0x921)][_0x58ba6d(0x2d1)]+'):\x20Falha\x20ao\x20deletar\x20mensagem:\x20'+(_0x1b6a91 instanceof Error?_0x1b6a91[_0x58ba6d(0x6c9)]:JSON[_0x58ba6d(0x28d)](_0x1b6a91,null,0x2)));}}async[a0_0x1df5a5(0x1f3)](_0x2cfe73,_0xa8ed55){const _0x1a8025=a0_0x1df5a5;if(_0x2cfe73['name']||(_0x2cfe73[_0x1a8025(0x5d3)]=(0x0,Q['v4'])()),_0xa8ed55!==Ri&&_0x2cfe73?.['globalShow'])throw new m('Para\x20criar\x20fluxo\x20global,\x20você\x20precisa\x20usar\x20a\x20apikey\x20global');if(_0x1a8025(0x5da)in _0x2cfe73&&'owner'in _0x2cfe73)return this['AddUserFlow'](_0x2cfe73[_0x1a8025(0x36f)],_0x2cfe73[_0x1a8025(0x5da)]);this['logger'][_0x1a8025(0x3fb)](this[_0x1a8025(0x474)]+'\x20('+this[_0x1a8025(0x921)][_0x1a8025(0x2d1)]+_0x1a8025(0x341));let _0x4a8e31=this[_0x1a8025(0x320)](_0x2cfe73[_0x1a8025(0x5d3)]),_0x540a7d=new he['Types']['ObjectId'](),_0x30d492={'_id':_0x540a7d,'default':!0x0,'title':_0x1a8025(0x29e),'x':0x0,'y':0x0},_0x446cdf={'_id':new he['Types'][(_0x1a8025(0x399))](),'order':0x1,'groupId':_0x540a7d['toString'](),'type':_0x1a8025(0x3af)},_0xb551b7=this[_0x1a8025(0x921)][_0x1a8025(0x2d1)],_0x294376={'_id':(0x0,Q['v4'])(),'owner':_0xb551b7,'name':_0x4a8e31,'whoCanEdit':[_0xb551b7],'whoCanUse':[_0xb551b7],'groups':[_0x30d492],'blocks':[_0x446cdf],..._0x2cfe73};try{let _0x48bab5=await this['repository'][_0x1a8025(0x461)][_0x1a8025(0x48b)](_0x294376);return await this[_0x1a8025(0x3d0)](),_0x48bab5;}catch(_0x173f34){let _0x1d3e23=_0x1a8025(0x41c),_0x59414a=_0x173f34 instanceof Error?_0x173f34['message']:typeof _0x173f34==_0x1a8025(0x1b3)?JSON[_0x1a8025(0x28d)](_0x173f34):_0x173f34,_0x14f284=_0x1d3e23+':\x20'+_0x59414a;throw this[_0x1a8025(0x755)]['error'](this[_0x1a8025(0x474)]+'\x20('+this[_0x1a8025(0x921)][_0x1a8025(0x2d1)]+_0x1a8025(0x91e)+_0x14f284),new m(_0x14f284);}}async[a0_0x1df5a5(0x2a9)](_0x5625d0,_0x43afc5){const _0x992c39=a0_0x1df5a5;try{this[_0x992c39(0x755)][_0x992c39(0x3fb)](this[_0x992c39(0x474)]+'\x20('+this[_0x992c39(0x921)][_0x992c39(0x2d1)]+_0x992c39(0x8c5));let _0x4bb2f9=await this[_0x992c39(0x3cf)]['flow'][_0x992c39(0x694)]({'where':{'_id':_0x43afc5,'owner':_0x5625d0}});if(!_0x4bb2f9)throw new m(_0x992c39(0x72e));if(_0x4bb2f9[_0x992c39(0x519)]===!0x1&&!_0x4bb2f9[_0x992c39(0x4b7)])throw new m(_0x992c39(0x39c));let _0x330b19=new Set(_0x4bb2f9[_0x992c39(0x74a)]??[]);_0x330b19[_0x992c39(0x94f)](this[_0x992c39(0x921)][_0x992c39(0x2d1)]);let _0x483754=await this[_0x992c39(0x3cf)][_0x992c39(0x461)][_0x992c39(0x66e)](_0x43afc5,{..._0x4bb2f9,'whoCanUse':Array[_0x992c39(0x439)](_0x330b19)});return await this[_0x992c39(0x3d0)](),_0x483754;}catch(_0xbad9c5){let _0x1fa0a8=_0x992c39(0x36c),_0x1b6d2f=_0xbad9c5 instanceof Error?_0xbad9c5[_0x992c39(0x6c9)]:typeof _0xbad9c5=='object'?JSON['stringify'](_0xbad9c5):_0xbad9c5,_0x28ac23=_0x1fa0a8+':\x20'+_0x1b6d2f;throw this[_0x992c39(0x755)][_0x992c39(0x398)](this[_0x992c39(0x474)]+'\x20('+this[_0x992c39(0x921)][_0x992c39(0x2d1)]+_0x992c39(0x91e)+_0x28ac23),new m(_0x28ac23);}}['getUniqueFlowName'](_0x3d8555){const _0x264598=a0_0x1df5a5;let _0x3080c4=_0x3d8555,_0x524742=0x1;for(;this['AutomateSystem'][_0x264598(0x714)][_0x264598(0x72b)](_0x2b81f6=>_0x2b81f6[_0x264598(0x5d3)]===_0x3080c4);)_0x524742++,_0x3080c4=_0x3d8555+'\x20('+_0x524742+')';return _0x3080c4;}async['deleteFlow'](_0x2522b6){const _0x32b249=a0_0x1df5a5;try{if(this[_0x32b249(0x755)]['verbose'](this[_0x32b249(0x474)]+'\x20('+this['instance'][_0x32b249(0x2d1)]+_0x32b249(0x200)+_0x2522b6[_0x32b249(0x5da)]+_0x32b249(0x583)+_0x2522b6[_0x32b249(0x3c1)]),!this[_0x32b249(0x48e)][_0x32b249(0x714)]['find'](_0x2a0258=>_0x2a0258[_0x32b249(0x5da)]===_0x2522b6[_0x32b249(0x5da)]))throw this[_0x32b249(0x755)]['verbose'](this[_0x32b249(0x474)]+'\x20('+this[_0x32b249(0x921)][_0x32b249(0x2d1)]+_0x32b249(0x25a)+_0x2522b6[_0x32b249(0x5da)]+_0x32b249(0x3bd)),new m(_0x32b249(0x92f));let _0x4df5c5=await this[_0x32b249(0x3cf)][_0x32b249(0x461)][_0x32b249(0x694)]({'where':{'_id':_0x2522b6[_0x32b249(0x5da)]}});if(!_0x4df5c5)throw new m(_0x32b249(0x33b));if(this[_0x32b249(0x921)][_0x32b249(0x2d1)]===_0x4df5c5['owner']){this[_0x32b249(0x755)]['verbose'](this[_0x32b249(0x474)]+'\x20('+this[_0x32b249(0x921)][_0x32b249(0x2d1)]+'):\x20Excluindo\x20completamente\x20o\x20fluxo\x20\x27'+_0x2522b6['_id']+_0x32b249(0x1fb));let _0x5593c8=await this[_0x32b249(0x3cf)][_0x32b249(0x461)]['deleteOne']({'where':{'_id':_0x2522b6[_0x32b249(0x5da)]}});return await this[_0x32b249(0x3d0)](),_0x5593c8;}return this['logger']['verbose'](this[_0x32b249(0x474)]+'\x20('+this[_0x32b249(0x921)]['wuid']+_0x32b249(0x3b2)+this['instance'][_0x32b249(0x2d1)]+'\x27\x20de\x20\x27whoCanUse\x27\x20do\x20fluxo\x20\x27'+_0x2522b6['_id']+_0x32b249(0x21a)),_0x4df5c5[_0x32b249(0x74a)]=(_0x4df5c5[_0x32b249(0x74a)]??[])[_0x32b249(0x93c)](_0x2b9f1c=>_0x2b9f1c!==this[_0x32b249(0x921)][_0x32b249(0x2d1)]),_0x4df5c5['whoCanEdit']=(_0x4df5c5[_0x32b249(0x30f)]??[])[_0x32b249(0x93c)](_0x3bb4b5=>_0x3bb4b5!==this[_0x32b249(0x921)][_0x32b249(0x2d1)]),_0x4df5c5[_0x32b249(0x30f)][_0x32b249(0x303)]===0x0&&_0x4df5c5[_0x32b249(0x74a)][_0x32b249(0x303)]>0x0&&(_0x4df5c5['whoCanEdit']['push'](_0x4df5c5[_0x32b249(0x74a)][0x0]),this[_0x32b249(0x755)][_0x32b249(0x3fb)](this['instanceName']+'\x20('+this['instance'][_0x32b249(0x2d1)]+_0x32b249(0x623)+_0x4df5c5[_0x32b249(0x74a)][0x0]+'\x27\x20a\x20\x27whoCanEdit\x27\x20do\x20fluxo\x20\x27'+_0x2522b6['_id']+_0x32b249(0x21a))),await this[_0x32b249(0x3cf)]['flow'][_0x32b249(0x66e)](_0x4df5c5[_0x32b249(0x5da)],_0x4df5c5),await this['synchronizeAndMapFlows'](),{'message':_0x32b249(0x926)+_0x2522b6[_0x32b249(0x5d3)]+'\x27\x20removido\x20do\x20AutomateSystem.'};}catch(_0x573350){return this[_0x32b249(0x755)][_0x32b249(0x398)](this[_0x32b249(0x474)]+'\x20('+this[_0x32b249(0x921)][_0x32b249(0x2d1)]+_0x32b249(0x44c)+(_0x573350 instanceof Error?_0x573350[_0x32b249(0x6c9)]:JSON[_0x32b249(0x28d)](_0x573350,null,0x2))),{'message':'Erro\x20ao\x20deletar\x20o\x20fluxo:\x20'+(_0x573350 instanceof Error?_0x573350['message']:JSON['stringify'](_0x573350,null,0x2))};}}async[a0_0x1df5a5(0x496)](_0x1d9ab5){const _0x109997=a0_0x1df5a5;try{if(this[_0x109997(0x755)][_0x109997(0x4f4)](this[_0x109997(0x474)]+'\x20('+this[_0x109997(0x921)][_0x109997(0x2d1)]+_0x109997(0x1f0)+_0x1d9ab5),!this[_0x109997(0x48e)]&&(await this[_0x109997(0x4d3)](),!this[_0x109997(0x48e)]))return null;let _0x458e1d=await this[_0x109997(0x3cf)][_0x109997(0x461)][_0x109997(0x694)]({'where':{'_id':_0x1d9ab5}});if(!_0x458e1d)throw new m(_0x109997(0x1d5)+_0x1d9ab5+_0x109997(0x8a7));if(!(_0x458e1d[_0x109997(0x4b7)]||_0x458e1d[_0x109997(0x74a)]?.['includes'](this[_0x109997(0x921)][_0x109997(0x2d1)])))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20ver\x20o\x20fluxo\x20\x27'+name+'\x27');_0x458e1d[_0x109997(0x4b7)]&&!_0x458e1d[_0x109997(0x74a)]?.[_0x109997(0x5f2)](this['instance'][_0x109997(0x2d1)])&&(_0x458e1d[_0x109997(0x74a)]=[..._0x458e1d[_0x109997(0x74a)]??[],this['instance']['wuid']],await this['repository'][_0x109997(0x461)][_0x109997(0x66e)](_0x458e1d[_0x109997(0x5da)],_0x458e1d),this['synchronizeAndMapFlows']());let _0x3ace02=this['AutomateSystem']?.[_0x109997(0x5ae)]['map'](_0x37a291=>_0x37a291['name']),_0x92f42c=[_0x109997(0x7f6),_0x109997(0x378),_0x109997(0x6bc),'cpf',_0x109997(0x781),_0x109997(0x5c8),_0x109997(0x6b0),_0x109997(0x291),'etiquetas','telefone',_0x109997(0x401)];_0x458e1d[_0x109997(0x763)]=_0x458e1d[_0x109997(0x763)]['filter'](_0x5b0252=>!(_0x5b0252[_0x109997(0x538)]===_0x109997(0x57a)||_0x5b0252[_0x109997(0x57a)])),_0x92f42c[_0x109997(0x504)](_0x3da711=>{const _0x1b55a2=_0x109997;_0x458e1d[_0x1b55a2(0x763)]['push']({'folder':_0x1b55a2(0x57a),'name':_0x3da711,'value':'','doc':'','leadInfo':!0x0});}),_0x3ace02[_0x109997(0x504)](_0x470a02=>{const _0x77594=_0x109997;let _0x499a81=_0x458e1d['variables']['findIndex'](_0x359353=>_0x359353[_0x77594(0x5d3)]===_0x470a02);_0x499a81===-0x1?_0x458e1d[_0x77594(0x763)][_0x77594(0x6cd)]({'folder':'leadInfo','name':_0x470a02,'value':'','doc':'','leadInfo':!0x0}):(_0x458e1d[_0x77594(0x763)][_0x499a81]['folder']=_0x77594(0x57a),_0x458e1d['variables'][_0x499a81][_0x77594(0x57a)]=!0x0);}),_0x458e1d[_0x109997(0x90f)]&&_0x458e1d[_0x109997(0x90f)][_0x109997(0x303)]>0x0&&_0x458e1d[_0x109997(0x90f)][_0x109997(0x504)](_0x42d411=>{const _0x2ba611=_0x109997;_0x42d411[_0x2ba611(0x30d)]&&_0x42d411['next_groupId']&&_0x42d411[_0x2ba611(0x30d)]===_0x42d411[_0x2ba611(0x936)]&&(_0x42d411[_0x2ba611(0x936)]=null);});let _0x1459f3=await this[_0x109997(0x3cf)][_0x109997(0x461)][_0x109997(0x66e)](_0x458e1d[_0x109997(0x5da)],_0x458e1d);if(!_0x1459f3)throw new Error(_0x109997(0x56c));return _0x1459f3;}catch(_0xdc18c5){let _0x1cafad=_0x109997(0x564),_0x583b45=_0xdc18c5 instanceof Error?_0xdc18c5[_0x109997(0x6c9)]:typeof _0xdc18c5==_0x109997(0x1b3)?JSON[_0x109997(0x28d)](_0xdc18c5):_0xdc18c5,_0x1ef741=_0x1cafad+':\x20'+_0x583b45;throw this[_0x109997(0x755)][_0x109997(0x398)](this[_0x109997(0x474)]+'\x20('+this[_0x109997(0x921)][_0x109997(0x2d1)]+'):\x20'+_0x1ef741),new m(_0x1ef741);}}async[a0_0x1df5a5(0x21e)](){const _0x91b94b=a0_0x1df5a5;try{this['logger'][_0x91b94b(0x3fb)](this[_0x91b94b(0x474)]+'\x20('+this['instance']['wuid']+_0x91b94b(0x6d1)),await this[_0x91b94b(0x3d0)]();let _0x6cacfe=await this[_0x91b94b(0x3cf)][_0x91b94b(0x461)][_0x91b94b(0x7b9)]({'where':{'globalShow':!0x0}});return[...this['AutomateSystem'][_0x91b94b(0x714)],..._0x6cacfe];}catch(_0x3613ea){return this[_0x91b94b(0x755)][_0x91b94b(0x398)](this[_0x91b94b(0x474)]+'\x20('+this['instance'][_0x91b94b(0x2d1)]+_0x91b94b(0x23e)+(_0x3613ea instanceof Error?_0x3613ea['message']:JSON[_0x91b94b(0x28d)](_0x3613ea,null,0x2))),{'message':_0x91b94b(0x89c)+(_0x3613ea instanceof Error?_0x3613ea[_0x91b94b(0x6c9)]:String(_0x3613ea))};}}async[a0_0x1df5a5(0x203)](_0x34c922,_0x3051e7){const _0x361f4e=a0_0x1df5a5;try{this[_0x361f4e(0x755)]['verbose'](this[_0x361f4e(0x474)]+'\x20('+this[_0x361f4e(0x921)][_0x361f4e(0x2d1)]+_0x361f4e(0x2d7));let _0x381601=this['AutomateSystem']['flows'][_0x361f4e(0x756)](_0x1a3b62=>_0x1a3b62[_0x361f4e(0x5da)]===_0x34c922['_id']);if(!_0x381601)throw this['logger'][_0x361f4e(0x3fb)](this['instanceName']+'\x20('+this[_0x361f4e(0x921)]['wuid']+'):\x20Fluxo\x20\x27'+_0x34c922[_0x361f4e(0x5da)]+_0x361f4e(0x3bd)),new m(_0x361f4e(0x92f));let _0x1cda09=await this[_0x361f4e(0x3cf)]['flow'][_0x361f4e(0x694)]({'where':{'_id':_0x34c922[_0x361f4e(0x5da)]}});if(!_0x1cda09||!_0x1cda09['whoCanUse']?.[_0x361f4e(0x5f2)](this[_0x361f4e(0x921)][_0x361f4e(0x2d1)]))throw this['logger']['error'](this[_0x361f4e(0x474)]+'\x20('+this[_0x361f4e(0x921)][_0x361f4e(0x2d1)]+_0x361f4e(0x8d9)+_0x34c922[_0x361f4e(0x5da)]+_0x361f4e(0x614)),new m(_0x361f4e(0x844)+_0x34c922['_id']+_0x361f4e(0x614));let _0x20495d=this['AutomateSystem'][_0x361f4e(0x714)]['findIndex'](_0x21c02f=>_0x21c02f[_0x361f4e(0x5da)]===_0x381601[_0x361f4e(0x5da)]);if(_0x20495d!==-0x1){let _0x2a0ad9=this[_0x361f4e(0x48e)][_0x361f4e(0x714)][_0x20495d];if(_0x2a0ad9[_0x361f4e(0x5d3)]=_0x34c922[_0x361f4e(0x5d3)]??_0x2a0ad9[_0x361f4e(0x5d3)],_0x2a0ad9['default']=_0x34c922[_0x361f4e(0x686)]??_0x2a0ad9[_0x361f4e(0x686)],_0x2a0ad9[_0x361f4e(0x6d3)]=_0x34c922[_0x361f4e(0x6d3)]??_0x2a0ad9[_0x361f4e(0x6d3)],_0x2a0ad9[_0x361f4e(0x3c0)]=_0x34c922['startCommandWord']??_0x2a0ad9['startCommand'],_0x2a0ad9[_0x361f4e(0x769)]=_0x34c922[_0x361f4e(0x769)]??_0x2a0ad9[_0x361f4e(0x769)],_0x2a0ad9['readMessages']=_0x34c922['readMessages']??_0x2a0ad9[_0x361f4e(0x502)],_0x34c922['default']&&this['AutomateSystem'][_0x361f4e(0x714)]['forEach']((_0x427edf,_0x53817d)=>{const _0x40f6f1=_0x361f4e;_0x53817d!==_0x20495d&&(_0x427edf[_0x40f6f1(0x686)]=!0x1);}),this['AutomateSystem'][_0x361f4e(0x714)][_0x20495d]=_0x2a0ad9,!await this['repository'][_0x361f4e(0x8bd)][_0x361f4e(0x62e)]({'flows':this[_0x361f4e(0x48e)][_0x361f4e(0x714)]},this[_0x361f4e(0x921)][_0x361f4e(0x2d1)]))throw new m(_0x361f4e(0x5bc));}let _0x50f7e1=[_0x361f4e(0x3c1),_0x361f4e(0x422),_0x361f4e(0x2f9),_0x361f4e(0x227)];for(let _0x965749 of _0x50f7e1)delete _0x34c922[_0x965749];if(_0x1cda09['whoCanEdit']?.[_0x361f4e(0x5f2)](this[_0x361f4e(0x921)][_0x361f4e(0x2d1)])||(_0x34c922={'_id':_0x34c922[_0x361f4e(0x5da)]}),_0x3051e7!==Ri&&_0x34c922?.[_0x361f4e(0x4b7)]&&!_0x1cda09?.[_0x361f4e(0x4b7)])throw new m(_0x361f4e(0x622));let _0x2a6a19=new Set(_0x34c922[_0x361f4e(0x30f)]??_0x1cda09[_0x361f4e(0x30f)]);_0x2a6a19[_0x361f4e(0x94f)](_0x1cda09['owner']);let _0x4c9dc1=new Set(_0x34c922[_0x361f4e(0x74a)]??_0x1cda09[_0x361f4e(0x74a)]??[]);_0x2a6a19[_0x361f4e(0x504)](_0x23eb27=>_0x4c9dc1[_0x361f4e(0x94f)](_0x23eb27)),_0x4c9dc1['add'](_0x1cda09['owner']),this[_0x361f4e(0x755)][_0x361f4e(0x3fb)](this[_0x361f4e(0x474)]+'\x20('+this[_0x361f4e(0x921)][_0x361f4e(0x2d1)]+'):\x20whoCanEdit\x20before\x20validation:\x20'+Array[_0x361f4e(0x439)](_0x2a6a19)),this[_0x361f4e(0x755)][_0x361f4e(0x3fb)](this['instanceName']+'\x20('+this[_0x361f4e(0x921)][_0x361f4e(0x2d1)]+_0x361f4e(0x759)+Array[_0x361f4e(0x439)](_0x4c9dc1));let _0x4b8dad=await this[_0x361f4e(0x534)](Array['from'](_0x4c9dc1)),_0x338a45=Array[_0x361f4e(0x439)](_0x2a6a19)['filter'](_0x3ea4cf=>_0x4b8dad[_0x361f4e(0x5f2)](_0x3ea4cf)),_0x43e209=Array[_0x361f4e(0x439)](_0x4c9dc1)[_0x361f4e(0x93c)](_0x4c4649=>_0x4b8dad[_0x361f4e(0x5f2)](_0x4c4649));this['logger']['verbose'](this[_0x361f4e(0x474)]+'\x20('+this['instance'][_0x361f4e(0x2d1)]+'):\x20whoCanEdit\x20after\x20validation:\x20'+_0x338a45),this[_0x361f4e(0x755)][_0x361f4e(0x3fb)](this[_0x361f4e(0x474)]+'\x20('+this[_0x361f4e(0x921)][_0x361f4e(0x2d1)]+_0x361f4e(0x5b5)+_0x43e209);let _0x2f6768={..._0x1cda09,..._0x34c922,'whoCanEdit':_0x338a45,'whoCanUse':_0x43e209},_0x341ea5=await this[_0x361f4e(0x3cf)][_0x361f4e(0x461)][_0x361f4e(0x66e)](_0x1cda09[_0x361f4e(0x5da)],_0x2f6768);return await this['synchronizeAndMapFlows'](),_0x341ea5;}catch(_0x50d080){let _0xb4a3c9=_0x361f4e(0x5b0),_0x9c5f9e=_0x50d080 instanceof Error?_0x50d080['message']:typeof _0x50d080==_0x361f4e(0x1b3)?JSON['stringify'](_0x50d080):_0x50d080,_0x2b9f89=_0xb4a3c9+':\x20'+_0x9c5f9e;throw this[_0x361f4e(0x755)]['error'](this[_0x361f4e(0x474)]+'\x20('+this[_0x361f4e(0x921)][_0x361f4e(0x2d1)]+'):\x20'+_0x2b9f89),new m(_0x2b9f89);}}async['getValidWhatsAppNumbers'](_0x4c4f14){const _0x395a0e=a0_0x1df5a5;let _0x4694be={'numbers':_0x4c4f14};return(await this[_0x395a0e(0x493)](_0x4694be))[_0x395a0e(0x93c)](_0x546c48=>_0x546c48[_0x395a0e(0x3bc)])[_0x395a0e(0x948)](_0x5ecb51=>_0x5ecb51[_0x395a0e(0x83f)])[_0x395a0e(0x948)](_0x5bf478=>this[_0x395a0e(0x6df)](_0x5bf478));}[a0_0x1df5a5(0x6df)](_0x22818a){let _0x3eddd9=_0x22818a['match'](/\d+/);return _0x3eddd9?_0x3eddd9[0x0]:'';}async[a0_0x1df5a5(0x2d4)](_0x491924){const _0x2d0273=a0_0x1df5a5;try{if(this[_0x2d0273(0x755)][_0x2d0273(0x3fb)](this[_0x2d0273(0x474)]+'\x20('+this[_0x2d0273(0x921)][_0x2d0273(0x2d1)]+_0x2d0273(0x8b0)),!this[_0x2d0273(0x48e)][_0x2d0273(0x714)][_0x2d0273(0x756)](_0x69a85=>_0x69a85[_0x2d0273(0x5da)]===_0x491924[_0x2d0273(0x5da)]))throw this[_0x2d0273(0x755)][_0x2d0273(0x3fb)](this[_0x2d0273(0x474)]+'\x20('+this['instance'][_0x2d0273(0x2d1)]+_0x2d0273(0x25a)+_0x491924[_0x2d0273(0x5da)]+_0x2d0273(0x3bd)),new m(_0x2d0273(0x92f));let _0x53ee09=await this['repository']['flow'][_0x2d0273(0x694)]({'where':{'_id':_0x491924[_0x2d0273(0x5da)]}});if(!_0x53ee09||!_0x53ee09[_0x2d0273(0x74a)]?.[_0x2d0273(0x5f2)](this[_0x2d0273(0x921)][_0x2d0273(0x2d1)]))throw this[_0x2d0273(0x755)][_0x2d0273(0x398)](this[_0x2d0273(0x474)]+'\x20('+this['instance']['wuid']+'):\x20Flow\x20\x27'+_0x491924[_0x2d0273(0x5da)]+_0x2d0273(0x614)),new m(_0x2d0273(0x844)+_0x491924[_0x2d0273(0x5da)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x53ee09[_0x2d0273(0x30f)]?.[_0x2d0273(0x5f2)](this[_0x2d0273(0x921)]['wuid']))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');let {block:_0x20f0de}=_0x491924;_0x20f0de?.[_0x2d0273(0x939)]?this[_0x2d0273(0x56e)](_0x53ee09,_0x491924):_0x20f0de?.[_0x2d0273(0x1be)]?this[_0x2d0273(0x412)](_0x53ee09,_0x491924):_0x20f0de['_id']?await this['updateBlock'](_0x53ee09,_0x491924):this[_0x2d0273(0x81d)](_0x53ee09,_0x491924);let _0x27683c=await this[_0x2d0273(0x3cf)][_0x2d0273(0x461)]['updateOne'](_0x53ee09['_id'],_0x53ee09);if(!_0x27683c)throw new Error(_0x2d0273(0x56c));return _0x27683c;}catch(_0x1b6d71){this[_0x2d0273(0x46e)]('Erro\x20ao\x20editar\x20o\x20bloco:\x20'+_0x1b6d71[_0x2d0273(0x6c9)]);}}async['copyBlock'](_0x473767,_0x327161){const _0x3beef3=a0_0x1df5a5;let _0x429b70=_0x327161['block'][_0x3beef3(0x5da)],_0x478a5b=_0x473767['blocks'][_0x3beef3(0x756)](_0x4d0f89=>_0x4d0f89['_id'][_0x3beef3(0x641)]()===_0x429b70);if(!_0x478a5b){this['logger']['error'](this['instanceName']+'\x20('+this[_0x3beef3(0x921)][_0x3beef3(0x2d1)]+_0x3beef3(0x35c)+_0x429b70+'\x20não\x20encontrado\x20para\x20cópia');return;}this[_0x3beef3(0x755)]['verbose'](this[_0x3beef3(0x474)]+'\x20('+this['instance']['wuid']+_0x3beef3(0x3c4)+JSON[_0x3beef3(0x28d)](_0x478a5b));let _0x3d501a=JSON[_0x3beef3(0x8a5)](JSON['stringify'](_0x478a5b));_0x3d501a['_id']=new he[(_0x3beef3(0x686))]['Types'][(_0x3beef3(0x399))](),this[_0x3beef3(0x755)]['verbose'](this['instanceName']+'\x20('+this[_0x3beef3(0x921)]['wuid']+_0x3beef3(0x83d)+JSON[_0x3beef3(0x28d)](_0x3d501a)),_0x473767[_0x3beef3(0x90f)]['push'](_0x3d501a),this[_0x3beef3(0x4c4)](_0x473767[_0x3beef3(0x90f)],_0x3d501a[_0x3beef3(0x30d)]);}[a0_0x1df5a5(0x46e)](_0x5e8ffa){const _0x23b60b=a0_0x1df5a5;throw this['logger'][_0x23b60b(0x398)](this['instanceName']+'\x20('+this[_0x23b60b(0x921)][_0x23b60b(0x2d1)]+'):\x20'+_0x5e8ffa),new m(_0x5e8ffa);}[a0_0x1df5a5(0x412)](_0x2d6412,_0x2343e6){const _0x4aa80e=a0_0x1df5a5;let {block:_0x266576}=_0x2343e6;if(_0x266576['type']===_0x4aa80e(0x3af)){this[_0x4aa80e(0x46e)](_0x4aa80e(0x3fd));return;}if(!_0x266576[_0x4aa80e(0x5da)]){this[_0x4aa80e(0x46e)](_0x4aa80e(0x68c));return;}let _0x3c1f7f=_0x2d6412['blocks']['find'](_0x1b00ea=>_0x1b00ea[_0x4aa80e(0x5da)][_0x4aa80e(0x641)]()===_0x2343e6['block'][_0x4aa80e(0x5da)][_0x4aa80e(0x641)]());if(!_0x3c1f7f){this[_0x4aa80e(0x46e)](_0x4aa80e(0x6f7)+_0x266576[_0x4aa80e(0x5da)]+_0x4aa80e(0x715));return;}_0x2d6412['blocks']=_0x2d6412[_0x4aa80e(0x90f)]['filter'](_0x52e246=>_0x52e246[_0x4aa80e(0x5da)][_0x4aa80e(0x641)]()!==_0x2343e6['block'][_0x4aa80e(0x5da)][_0x4aa80e(0x641)]()),_0x2d6412[_0x4aa80e(0x888)]=_0x2d6412['conditions'][_0x4aa80e(0x93c)](_0x480a4a=>_0x480a4a[_0x4aa80e(0x8b4)]!==_0x266576['_id'][_0x4aa80e(0x641)]()),_0x2d6412[_0x4aa80e(0x61b)]=_0x2d6412[_0x4aa80e(0x61b)]['filter'](_0x3e0931=>_0x3e0931['blockId']!==_0x266576[_0x4aa80e(0x5da)][_0x4aa80e(0x641)]()),_0x2d6412[_0x4aa80e(0x588)]=_0x2d6412['replyOptions'][_0x4aa80e(0x93c)](_0x7da6f2=>_0x7da6f2[_0x4aa80e(0x8b4)]!==_0x266576[_0x4aa80e(0x5da)][_0x4aa80e(0x641)]()),this[_0x4aa80e(0x4c4)](_0x2d6412['blocks'],_0x3c1f7f['groupId']);}async[a0_0x1df5a5(0x204)](_0x537a50,_0x26a0be){const _0x49d8d6=a0_0x1df5a5;let _0x38695b=_0x537a50[_0x49d8d6(0x90f)][_0x49d8d6(0x784)](_0x25c5c1=>_0x25c5c1[_0x49d8d6(0x5da)][_0x49d8d6(0x641)]()===_0x26a0be[_0x49d8d6(0x4e7)][_0x49d8d6(0x5da)][_0x49d8d6(0x641)]());if(this[_0x49d8d6(0x755)][_0x49d8d6(0x3fb)](this[_0x49d8d6(0x474)]+'\x20('+this[_0x49d8d6(0x921)][_0x49d8d6(0x2d1)]+'):\x20Índice\x20do\x20bloco\x20a\x20ser\x20atualizado:'+_0x38695b),_0x38695b===-0x1){this[_0x49d8d6(0x755)][_0x49d8d6(0x3fb)](_0x49d8d6(0x6f7)+_0x26a0be[_0x49d8d6(0x4e7)][_0x49d8d6(0x5da)]+_0x49d8d6(0x370));return;}if(_0x537a50[_0x49d8d6(0x90f)][_0x38695b][_0x49d8d6(0x62b)]==='start'){let _0x1d1d2b=Object[_0x49d8d6(0x326)](_0x26a0be['block']);if(_0x1d1d2b[_0x49d8d6(0x303)]>0x2||_0x1d1d2b[_0x49d8d6(0x303)]===0x2&&!_0x1d1d2b[_0x49d8d6(0x5f2)](_0x49d8d6(0x936))){this[_0x49d8d6(0x46e)](_0x49d8d6(0x3fe));return;}}let _0x3ecace=_0x537a50[_0x49d8d6(0x90f)][_0x38695b]['groupId'];for(let _0x1392f4 in _0x26a0be['block'])_0x26a0be['block'][_0x49d8d6(0x6ac)](_0x1392f4)&&(_0x537a50[_0x49d8d6(0x90f)][_0x38695b][_0x1392f4]=_0x26a0be[_0x49d8d6(0x4e7)][_0x1392f4]);if(this['logger'][_0x49d8d6(0x3fb)](this['instanceName']+'\x20('+this[_0x49d8d6(0x921)][_0x49d8d6(0x2d1)]+_0x49d8d6(0x76e)+JSON['stringify'](_0x537a50[_0x49d8d6(0x90f)][_0x38695b])),_0x537a50[_0x49d8d6(0x90f)][_0x38695b]['apirequest']&&'header'in _0x537a50[_0x49d8d6(0x90f)][_0x38695b]['apirequest']){this[_0x49d8d6(0x755)][_0x49d8d6(0x3fb)](this[_0x49d8d6(0x474)]+'\x20('+this[_0x49d8d6(0x921)][_0x49d8d6(0x2d1)]+_0x49d8d6(0x1e4));let _0x118c5d=JSON[_0x49d8d6(0x28d)](_0x537a50[_0x49d8d6(0x90f)][_0x38695b][_0x49d8d6(0x374)][_0x49d8d6(0x82a)],null,0x1);_0x118c5d[_0x49d8d6(0x303)]>0x2&&(_0x118c5d=_0x118c5d[_0x49d8d6(0x801)](0x1,_0x118c5d[_0x49d8d6(0x303)]-0x1)[_0x49d8d6(0x30a)]()),_0x537a50['blocks'][_0x38695b][_0x49d8d6(0x374)][_0x49d8d6(0x7ec)]=_0x118c5d;}if(_0x537a50[_0x49d8d6(0x90f)][_0x38695b]['apirequest']&&'body'in _0x537a50[_0x49d8d6(0x90f)][_0x38695b][_0x49d8d6(0x374)]&&!(_0x49d8d6(0x5bd)in _0x537a50[_0x49d8d6(0x90f)][_0x38695b][_0x49d8d6(0x374)])){this['logger'][_0x49d8d6(0x3fb)](this[_0x49d8d6(0x474)]+'\x20('+this[_0x49d8d6(0x921)][_0x49d8d6(0x2d1)]+_0x49d8d6(0x464)),_0x537a50[_0x49d8d6(0x90f)][_0x38695b][_0x49d8d6(0x374)][_0x49d8d6(0x77d)]=!0x1;let _0x7204f=JSON[_0x49d8d6(0x28d)](_0x537a50[_0x49d8d6(0x90f)][_0x38695b]['apirequest'][_0x49d8d6(0x4a9)],null,0x2);_0x537a50[_0x49d8d6(0x90f)][_0x38695b][_0x49d8d6(0x374)][_0x49d8d6(0x5bd)]=_0x7204f;}if(_0x537a50[_0x49d8d6(0x90f)][_0x38695b][_0x49d8d6(0x374)]&&_0x49d8d6(0x5bd)in _0x537a50[_0x49d8d6(0x90f)][_0x38695b][_0x49d8d6(0x374)]){_0x537a50[_0x49d8d6(0x90f)][_0x38695b][_0x49d8d6(0x374)][_0x49d8d6(0x77d)]=!0x1;let _0x32c303=_0x537a50[_0x49d8d6(0x90f)][_0x38695b]['apirequest'][_0x49d8d6(0x5bd)],_0xc15616=this['beautifyWithPlaceholders'](_0x32c303);_0x537a50[_0x49d8d6(0x90f)][_0x38695b][_0x49d8d6(0x374)][_0x49d8d6(0x5bd)]=_0xc15616[_0x49d8d6(0x576)],_0x537a50[_0x49d8d6(0x90f)][_0x38695b]['apirequest']['bodyStringErrorParse']=_0xc15616[_0x49d8d6(0x398)];}let _0x3007c3=_0x537a50['blocks'][_0x38695b][_0x49d8d6(0x30d)];_0x3ecace!==_0x3007c3?(this[_0x49d8d6(0x4c4)](_0x537a50[_0x49d8d6(0x90f)],_0x3ecace),this['reorderBlocks'](_0x537a50['blocks'],_0x3007c3)):this[_0x49d8d6(0x4c4)](_0x537a50[_0x49d8d6(0x90f)],_0x3ecace);}['beautifyWithPlaceholders'](_0xf307a0){const _0x243fa3=a0_0x1df5a5;let _0x33a4fc='\u205f',_0x120f4d=!0x1,_0x22efdf='';for(let _0x911b95=0x0;_0x911b95<_0xf307a0['length'];_0x911b95++){let _0x34b79c=_0xf307a0[_0x911b95];_0x34b79c==='\x22'&&(_0x911b95===0x0||_0xf307a0[_0x911b95-0x1]!=='\x5c')&&(_0x120f4d=!_0x120f4d),!(!_0x120f4d&&(_0x34b79c==='\x0a'||_0x34b79c==='\x20'||_0x34b79c===_0x33a4fc))&&(_0x22efdf+=_0x34b79c);}let _0x338881={},_0xeba50c=9876543210.1234,_0x454586=_0x22efdf[_0x243fa3(0x894)](/\{\{([^}]+)\}\}/g,_0x4fc901=>{let _0x2a092d=_0x4fc901,_0x4d0a20=''+_0xeba50c;return _0x338881[_0x4d0a20]=_0x2a092d,_0xeba50c+=0.0001,_0x4d0a20;}),_0x4edc42='',_0x131c21=!0x1;try{let _0x2524e2=JSON['parse'](_0x454586);_0x4edc42=JSON[_0x243fa3(0x28d)](_0x2524e2,null,0x2),_0x4edc42=_0x4edc42['replace'](/\n( +)/g,(_0x233304,_0x185cec)=>{const _0x532cde=_0x243fa3;let _0x56f328=_0x185cec[_0x532cde(0x303)];return'\x0a'+_0x33a4fc[_0x532cde(0x240)](_0x56f328*0x2);}),_0x4edc42=_0x4edc42[_0x243fa3(0x894)](/(\d{10,}\.\d+)/g,_0x9ddb5c=>_0x338881[_0x9ddb5c]||_0x9ddb5c);}catch(_0x2b4ead){this[_0x243fa3(0x755)][_0x243fa3(0x398)](_0x243fa3(0x33e)+_0x2b4ead),_0x4edc42=_0xf307a0,_0x131c21=!0x0;}return{'result':_0x4edc42,'error':_0x131c21};}['addBlock'](_0x567767,_0x568812){const _0x167054=a0_0x1df5a5;if(_0x568812[_0x167054(0x4e7)]['type']===_0x167054(0x3af)){this[_0x167054(0x46e)]('Não\x20é\x20permitido\x20adicionar\x20outro\x20bloco\x20padrão');return;}if(_0x568812[_0x167054(0x4e7)][_0x167054(0x374)]&&_0x167054(0x82a)in _0x568812[_0x167054(0x4e7)][_0x167054(0x374)]){this[_0x167054(0x755)]['verbose'](this[_0x167054(0x474)]+'\x20('+this['instance'][_0x167054(0x2d1)]+_0x167054(0x1e4));let _0x256d5f=JSON[_0x167054(0x28d)](_0x568812['block'][_0x167054(0x374)][_0x167054(0x82a)],null,0x1);_0x256d5f['length']>0x2&&(_0x256d5f=_0x256d5f[_0x167054(0x801)](0x1,_0x256d5f[_0x167054(0x303)]-0x1)[_0x167054(0x30a)]()),_0x568812[_0x167054(0x4e7)][_0x167054(0x374)][_0x167054(0x7ec)]=_0x256d5f;}_0x568812['block']['apirequest']&&_0x167054(0x4a9)in _0x568812['block']['apirequest']&&(this[_0x167054(0x755)][_0x167054(0x3fb)](this[_0x167054(0x474)]+'\x20('+this[_0x167054(0x921)]['wuid']+_0x167054(0x464)),_0x568812[_0x167054(0x4e7)][_0x167054(0x374)][_0x167054(0x5bd)]=JSON[_0x167054(0x28d)](_0x568812[_0x167054(0x4e7)][_0x167054(0x374)]['body'],null,0x1)[_0x167054(0x30a)]()),_0x567767[_0x167054(0x90f)][_0x167054(0x6cd)](_0x568812[_0x167054(0x4e7)]),this['reorderBlocks'](_0x567767[_0x167054(0x90f)],_0x568812[_0x167054(0x4e7)][_0x167054(0x30d)]);}['reorderBlocks'](_0xca4290,_0xe588fb){const _0x4b2659=a0_0x1df5a5;let _0x54d1e8=_0xca4290[_0x4b2659(0x93c)](_0x5630a8=>_0x5630a8[_0x4b2659(0x30d)]===_0xe588fb);_0x54d1e8['sort']((_0xea3628,_0x2edcec)=>_0xea3628[_0x4b2659(0x751)]-_0x2edcec[_0x4b2659(0x751)]),_0x54d1e8[_0x4b2659(0x504)]((_0x24cfd9,_0x1fd3d5)=>_0x24cfd9['order']=_0x1fd3d5+0x1);}async[a0_0x1df5a5(0x4e3)](_0x316674){const _0x57c2f7=a0_0x1df5a5;try{if(this[_0x57c2f7(0x755)][_0x57c2f7(0x3fb)](this[_0x57c2f7(0x474)]+'\x20('+this[_0x57c2f7(0x921)][_0x57c2f7(0x2d1)]+'):\x20Editando\x20replyOption...'),!_0x316674||!_0x316674[_0x57c2f7(0x30e)]){this[_0x57c2f7(0x46e)]('Data\x20inválida\x20fornecida');return;}if(!this[_0x57c2f7(0x48e)][_0x57c2f7(0x714)][_0x57c2f7(0x756)](_0x205203=>_0x205203[_0x57c2f7(0x5da)]===_0x316674[_0x57c2f7(0x5da)]))throw this[_0x57c2f7(0x755)][_0x57c2f7(0x3fb)](this[_0x57c2f7(0x474)]+'\x20('+this['instance'][_0x57c2f7(0x2d1)]+_0x57c2f7(0x25a)+_0x316674[_0x57c2f7(0x5da)]+_0x57c2f7(0x3bd)),new m(_0x57c2f7(0x92f));let _0x4db1ce=await this['repository'][_0x57c2f7(0x461)][_0x57c2f7(0x694)]({'where':{'_id':_0x316674[_0x57c2f7(0x5da)]}});if(!_0x4db1ce||!_0x4db1ce[_0x57c2f7(0x74a)]?.[_0x57c2f7(0x5f2)](this[_0x57c2f7(0x921)]['wuid']))throw this['logger'][_0x57c2f7(0x398)](this['instanceName']+'\x20('+this[_0x57c2f7(0x921)][_0x57c2f7(0x2d1)]+_0x57c2f7(0x8d9)+_0x316674[_0x57c2f7(0x5da)]+_0x57c2f7(0x614)),new m('Flow\x20\x27'+_0x316674[_0x57c2f7(0x5da)]+_0x57c2f7(0x614));if(!_0x4db1ce['whoCanEdit']?.[_0x57c2f7(0x5f2)](this[_0x57c2f7(0x921)]['wuid']))throw new m(_0x57c2f7(0x7f3));let {replyOption:_0x4c3a58}=_0x316674;_0x4c3a58?.['delete']?(this['deleteReplyOption'](_0x4db1ce,_0x316674),this[_0x57c2f7(0x577)](_0x4db1ce['replyOptions'],_0x316674[_0x57c2f7(0x30e)][_0x57c2f7(0x8b4)])):_0x4c3a58[_0x57c2f7(0x5da)]?(await this[_0x57c2f7(0x26c)](_0x4db1ce,_0x316674),this[_0x57c2f7(0x577)](_0x4db1ce['replyOptions'],_0x316674[_0x57c2f7(0x30e)]['blockId'])):(this[_0x57c2f7(0x8d5)](_0x4db1ce,_0x316674),this[_0x57c2f7(0x577)](_0x4db1ce[_0x57c2f7(0x588)],_0x316674[_0x57c2f7(0x30e)][_0x57c2f7(0x8b4)]));let _0x101acc=await this[_0x57c2f7(0x3cf)][_0x57c2f7(0x461)][_0x57c2f7(0x66e)](_0x4db1ce[_0x57c2f7(0x5da)],_0x4db1ce);if(!_0x101acc)throw new Error(_0x57c2f7(0x56c));return _0x101acc;}catch(_0x5a125c){this[_0x57c2f7(0x46e)]('Erro\x20ao\x20editar\x20o\x20replyOption:\x20'+_0x5a125c);}}[a0_0x1df5a5(0x577)](_0x325f45,_0x1ddb22){const _0x2b4b04=a0_0x1df5a5;_0x325f45[_0x2b4b04(0x504)](_0x2b8728=>{const _0x39424d=_0x2b4b04;_0x2b8728[_0x39424d(0x8b4)]===_0x1ddb22&&_0x2b8728[_0x39424d(0x751)]===void 0x0&&(_0x2b8728[_0x39424d(0x751)]=0x270f);});let _0x5a4722=_0x325f45[_0x2b4b04(0x93c)](_0x18ea49=>_0x18ea49[_0x2b4b04(0x8b4)]===_0x1ddb22);_0x5a4722['sort']((_0x113c5d,_0x2ddb80)=>_0x113c5d['order']-_0x2ddb80[_0x2b4b04(0x751)]),_0x5a4722['forEach']((_0x55e448,_0x5c82b8)=>{const _0x3f648a=_0x2b4b04;_0x55e448[_0x3f648a(0x751)]=_0x5c82b8+0x1;}),_0x325f45[_0x2b4b04(0x504)](_0x52832f=>{const _0x3cd333=_0x2b4b04;if(_0x52832f[_0x3cd333(0x8b4)]===_0x1ddb22){let _0x1cec7f=_0x5a4722['find'](_0x202007=>_0x202007[_0x3cd333(0x5da)]&&_0x52832f[_0x3cd333(0x5da)]&&_0x202007['_id'][_0x3cd333(0x641)]()===_0x52832f[_0x3cd333(0x5da)]['toString']());_0x1cec7f&&(_0x52832f[_0x3cd333(0x751)]=_0x1cec7f[_0x3cd333(0x751)]);}});}[a0_0x1df5a5(0x1b8)](_0x55022a,_0x2fe027){const _0xa640bb=a0_0x1df5a5;let {replyOption:_0x13cd1e}=_0x2fe027;if(!_0x13cd1e[_0xa640bb(0x5da)]){this['throwAndLogError'](_0xa640bb(0x1fd));return;}if(!_0x55022a[_0xa640bb(0x588)][_0xa640bb(0x756)](_0x524847=>_0x524847[_0xa640bb(0x5da)][_0xa640bb(0x641)]()===_0x2fe027['replyOption'][_0xa640bb(0x5da)][_0xa640bb(0x641)]())){this[_0xa640bb(0x46e)](_0xa640bb(0x8e0)+_0x13cd1e['_id']+_0xa640bb(0x715));return;}_0x55022a['replyOptions']=_0x55022a[_0xa640bb(0x588)][_0xa640bb(0x93c)](_0x45e5bb=>_0x45e5bb[_0xa640bb(0x5da)]['toString']()!==_0x2fe027[_0xa640bb(0x30e)][_0xa640bb(0x5da)][_0xa640bb(0x641)]());}async[a0_0x1df5a5(0x26c)](_0x1aed7d,_0x3cf1d2){const _0x263483=a0_0x1df5a5;let _0x21b50f=_0x1aed7d[_0x263483(0x588)]['findIndex'](_0x1e7d44=>_0x1e7d44[_0x263483(0x5da)][_0x263483(0x641)]()===_0x3cf1d2[_0x263483(0x30e)]['_id']['toString']());if(_0x21b50f===-0x1){this[_0x263483(0x46e)]('ReplyOption\x20com\x20ID\x20'+_0x3cf1d2[_0x263483(0x30e)]['_id']+'\x20não\x20encontrado\x20para\x20atualização.');return;}for(let _0xaded04 in _0x3cf1d2[_0x263483(0x30e)])_0x3cf1d2['replyOption'][_0x263483(0x6ac)](_0xaded04)&&(_0x1aed7d[_0x263483(0x588)][_0x21b50f][_0xaded04]=_0x3cf1d2[_0x263483(0x30e)][_0xaded04]);}[a0_0x1df5a5(0x8d5)](_0x31a4d3,_0x20020d){const _0x141622=a0_0x1df5a5;_0x31a4d3['replyOptions'][_0x141622(0x6cd)](_0x20020d[_0x141622(0x30e)]);}async[a0_0x1df5a5(0x881)](_0x1c463e){const _0x306407=a0_0x1df5a5;this['logger']['verbose'](this[_0x306407(0x474)]+'\x20('+this['instance'][_0x306407(0x2d1)]+_0x306407(0x79a)+JSON['stringify'](_0x1c463e,null,0x2));try{if(this['logger'][_0x306407(0x3fb)](this[_0x306407(0x474)]+'\x20('+this['instance'][_0x306407(0x2d1)]+'):\x20Editando\x20grupo\x20do\x20fluxo...'),!this[_0x306407(0x48e)]['flows']['find'](_0x8634e0=>_0x8634e0[_0x306407(0x5da)]===_0x1c463e[_0x306407(0x5da)]))throw this['logger'][_0x306407(0x3fb)](this[_0x306407(0x474)]+'\x20('+this['instance'][_0x306407(0x2d1)]+_0x306407(0x25a)+_0x1c463e['_id']+_0x306407(0x3bd)),new m(_0x306407(0x92f));let _0x33a7f2=await this['repository'][_0x306407(0x461)][_0x306407(0x694)]({'where':{'_id':_0x1c463e[_0x306407(0x5da)]}});if(!_0x33a7f2||!_0x33a7f2[_0x306407(0x74a)]?.[_0x306407(0x5f2)](this['instance'][_0x306407(0x2d1)]))throw this[_0x306407(0x755)]['error'](this[_0x306407(0x474)]+'\x20('+this[_0x306407(0x921)][_0x306407(0x2d1)]+_0x306407(0x8d9)+_0x1c463e[_0x306407(0x5da)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x306407(0x844)+_0x1c463e['_id']+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');if(!_0x33a7f2[_0x306407(0x30f)]?.[_0x306407(0x5f2)](this['instance'][_0x306407(0x2d1)]))throw new m('Você\x20não\x20tem\x20permissão\x20para\x20editar\x20este\x20fluxo.');if(_0x1c463e[_0x306407(0x42c)]&&_0x1c463e[_0x306407(0x42c)]?.['delete']===!0x0){if(this[_0x306407(0x755)][_0x306407(0x3fb)](this[_0x306407(0x474)]+'\x20('+this[_0x306407(0x921)][_0x306407(0x2d1)]+'):\x20delete\x20=\x20true'),_0x1c463e[_0x306407(0x42c)][_0x306407(0x686)]===!0x0)return{'message':_0x306407(0x563)};if(_0x33a7f2[_0x306407(0x90f)]['some'](_0x5d2ede=>_0x5d2ede[_0x306407(0x30d)][_0x306407(0x641)]()===_0x1c463e[_0x306407(0x42c)][_0x306407(0x5da)]))return this['logger'][_0x306407(0x3fb)](this[_0x306407(0x474)]+'\x20('+this[_0x306407(0x921)][_0x306407(0x2d1)]+_0x306407(0x446)),{'message':'Não\x20é\x20possível\x20deletar\x20um\x20grupo\x20que\x20tem\x20blocos\x20vinculados.'};_0x33a7f2['groups']=_0x33a7f2['groups'][_0x306407(0x93c)](_0x2d5e4d=>_0x2d5e4d['_id']['toString']()!==_0x1c463e[_0x306407(0x42c)][_0x306407(0x5da)]);}else{if(_0x1c463e['group']){if(_0x1c463e['group'][_0x306407(0x686)]===!0x0)return{'message':_0x306407(0x52a)};if(_0x1c463e[_0x306407(0x42c)]['_id']){let _0x3aedf2=_0x33a7f2[_0x306407(0x949)]['find'](_0xcdded0=>_0xcdded0[_0x306407(0x5da)]['toString']()===_0x1c463e[_0x306407(0x42c)][_0x306407(0x5da)]);_0x3aedf2&&(_0x1c463e['group']['x']<0x0&&(_0x1c463e['group']['x']=0x0),_0x1c463e[_0x306407(0x42c)]['y']<0x0&&(_0x1c463e['group']['y']=0x0),Object[_0x306407(0x503)](_0x3aedf2,_0x1c463e[_0x306407(0x42c)]));}else _0x33a7f2[_0x306407(0x949)][_0x306407(0x6cd)](_0x1c463e[_0x306407(0x42c)]);}}let _0x44e734=await this[_0x306407(0x3cf)]['flow']['updateOne'](_0x33a7f2['_id'],_0x33a7f2);if(!_0x44e734)throw new Error(_0x306407(0x56c));return _0x44e734;}catch(_0x2b400){let _0x137565=_0x306407(0x8cb),_0x98ae0e=_0x2b400 instanceof Error?_0x2b400[_0x306407(0x6c9)]:typeof _0x2b400==_0x306407(0x1b3)?JSON[_0x306407(0x28d)](_0x2b400):_0x2b400,_0x16433d=_0x137565+':\x20'+_0x98ae0e;throw this[_0x306407(0x755)][_0x306407(0x398)](this['instanceName']+'\x20('+this[_0x306407(0x921)][_0x306407(0x2d1)]+_0x306407(0x91e)+_0x16433d),new m(_0x16433d);}}async['editFlowCondition'](_0x30676b){const _0x1eba03=a0_0x1df5a5;try{if(this[_0x1eba03(0x755)][_0x1eba03(0x3fb)](this[_0x1eba03(0x474)]+'\x20('+this[_0x1eba03(0x921)][_0x1eba03(0x2d1)]+_0x1eba03(0x501)),!this[_0x1eba03(0x48e)][_0x1eba03(0x714)][_0x1eba03(0x756)](_0x32396e=>_0x32396e[_0x1eba03(0x5da)]===_0x30676b[_0x1eba03(0x5da)]))throw this['logger'][_0x1eba03(0x3fb)](this[_0x1eba03(0x474)]+'\x20('+this[_0x1eba03(0x921)][_0x1eba03(0x2d1)]+_0x1eba03(0x25a)+_0x30676b[_0x1eba03(0x5da)]+_0x1eba03(0x3bd)),new m(_0x1eba03(0x92f));let _0xfa43d8=await this['repository']['flow'][_0x1eba03(0x694)]({'where':{'_id':_0x30676b['_id']}});if(!_0xfa43d8||!_0xfa43d8['whoCanUse']?.['includes'](this[_0x1eba03(0x921)][_0x1eba03(0x2d1)]))throw this[_0x1eba03(0x755)][_0x1eba03(0x398)](this['instanceName']+'\x20('+this[_0x1eba03(0x921)][_0x1eba03(0x2d1)]+_0x1eba03(0x8d9)+_0x30676b[_0x1eba03(0x5da)]+_0x1eba03(0x614)),new m(_0x1eba03(0x844)+_0x30676b[_0x1eba03(0x5da)]+_0x1eba03(0x614));if(!_0xfa43d8[_0x1eba03(0x30f)]?.[_0x1eba03(0x5f2)](this[_0x1eba03(0x921)][_0x1eba03(0x2d1)]))throw new m(_0x1eba03(0x7f3));let _0x529d4b=!0x1;if(_0x30676b[_0x1eba03(0x6a1)]?.['delete']===!0x0)_0xfa43d8[_0x1eba03(0x888)]=_0xfa43d8[_0x1eba03(0x888)][_0x1eba03(0x93c)](_0x5b8f08=>_0x5b8f08&&_0x30676b['condition']&&_0x5b8f08[_0x1eba03(0x5da)]&&_0x30676b[_0x1eba03(0x6a1)]['_id']&&_0x5b8f08[_0x1eba03(0x5da)]['toString']()!==_0x30676b['condition'][_0x1eba03(0x5da)][_0x1eba03(0x641)]()),_0x529d4b=!0x0;else{let _0x329fdd=_0xfa43d8[_0x1eba03(0x888)]['find'](_0x73c7ee=>_0x73c7ee&&_0x30676b[_0x1eba03(0x6a1)]&&_0x73c7ee[_0x1eba03(0x5da)]&&_0x30676b[_0x1eba03(0x6a1)][_0x1eba03(0x5da)]&&_0x73c7ee[_0x1eba03(0x5da)][_0x1eba03(0x641)]()===_0x30676b[_0x1eba03(0x6a1)][_0x1eba03(0x5da)][_0x1eba03(0x641)]());_0x329fdd?(_0x529d4b=_0x329fdd[_0x1eba03(0x751)]!==_0x30676b[_0x1eba03(0x6a1)][_0x1eba03(0x751)],Object[_0x1eba03(0x503)](_0x329fdd,_0x30676b[_0x1eba03(0x6a1)])):(_0xfa43d8[_0x1eba03(0x888)][_0x1eba03(0x6cd)](_0x30676b[_0x1eba03(0x6a1)]),_0x529d4b=!0x0);}if(_0x529d4b){_0xfa43d8[_0x1eba03(0x888)][_0x1eba03(0x766)]((_0x2c6e43,_0x553925)=>_0x2c6e43[_0x1eba03(0x751)]>_0x553925[_0x1eba03(0x751)]?0x1:_0x553925[_0x1eba03(0x751)]>_0x2c6e43[_0x1eba03(0x751)]?-0x1:0x0);for(let _0xc6509e=0x0;_0xc6509e<_0xfa43d8[_0x1eba03(0x888)][_0x1eba03(0x303)];_0xc6509e++)_0xfa43d8[_0x1eba03(0x888)][_0xc6509e][_0x1eba03(0x751)]=_0xc6509e+0x1;_0xfa43d8[_0x1eba03(0x888)]['length']>0x0&&(_0xfa43d8[_0x1eba03(0x888)][0x0]['OrAnd']=_0x1eba03(0x7f0));}let _0x23bcb4=await this['repository']['flow'][_0x1eba03(0x66e)](_0xfa43d8['_id'],_0xfa43d8);if(!_0x23bcb4)throw new Error(_0x1eba03(0x56c));return _0x23bcb4;}catch(_0x355419){let _0x250cfa=_0x1eba03(0x42f),_0x598e48=_0x355419 instanceof Error?_0x355419['message']:typeof _0x355419==_0x1eba03(0x1b3)?JSON[_0x1eba03(0x28d)](_0x355419):_0x355419,_0x38518b=_0x250cfa+':\x20'+_0x598e48;throw this[_0x1eba03(0x755)]['error'](this[_0x1eba03(0x474)]+'\x20('+this[_0x1eba03(0x921)]['wuid']+_0x1eba03(0x91e)+_0x38518b),new m(_0x38518b);}}async['editFlowVaredit'](_0x35967b){const _0x5020d4=a0_0x1df5a5;try{if(this[_0x5020d4(0x755)][_0x5020d4(0x3fb)](this[_0x5020d4(0x474)]+'\x20('+this['instance'][_0x5020d4(0x2d1)]+_0x5020d4(0x4d8)),!this[_0x5020d4(0x48e)][_0x5020d4(0x714)]['find'](_0x345549=>_0x345549['_id']===_0x35967b['_id']))throw this[_0x5020d4(0x755)][_0x5020d4(0x3fb)](this[_0x5020d4(0x474)]+'\x20('+this[_0x5020d4(0x921)][_0x5020d4(0x2d1)]+'):\x20Fluxo\x20\x27'+_0x35967b[_0x5020d4(0x5da)]+_0x5020d4(0x3bd)),new m('Fluxo\x20não\x20encontrado\x20na\x20memória.');let _0x146956=await this['repository']['flow'][_0x5020d4(0x694)]({'where':{'_id':_0x35967b[_0x5020d4(0x5da)]}});if(!_0x146956||!_0x146956[_0x5020d4(0x74a)]?.[_0x5020d4(0x5f2)](this['instance']['wuid']))throw this[_0x5020d4(0x755)][_0x5020d4(0x398)](this['instanceName']+'\x20('+this[_0x5020d4(0x921)][_0x5020d4(0x2d1)]+_0x5020d4(0x8d9)+_0x35967b[_0x5020d4(0x5da)]+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo'),new m(_0x5020d4(0x844)+_0x35967b[_0x5020d4(0x5da)]+_0x5020d4(0x614));if(!_0x146956[_0x5020d4(0x30f)]?.[_0x5020d4(0x5f2)](this[_0x5020d4(0x921)][_0x5020d4(0x2d1)]))throw new m(_0x5020d4(0x7f3));let _0x1e0197=!0x1;if(_0x35967b[_0x5020d4(0x8ad)]?.[_0x5020d4(0x1be)]===!0x0)_0x146956[_0x5020d4(0x61b)]=_0x146956[_0x5020d4(0x61b)][_0x5020d4(0x93c)](_0x223876=>_0x223876&&_0x35967b[_0x5020d4(0x8ad)]&&_0x223876['_id']&&_0x35967b[_0x5020d4(0x8ad)]['_id']&&_0x223876[_0x5020d4(0x5da)]['toString']()!==_0x35967b['varedit'][_0x5020d4(0x5da)]['toString']()),_0x1e0197=!0x0;else{let _0x5ef8f8=_0x146956[_0x5020d4(0x61b)][_0x5020d4(0x756)](_0x5cfbdb=>_0x5cfbdb&&_0x35967b[_0x5020d4(0x8ad)]&&_0x5cfbdb[_0x5020d4(0x5da)]&&_0x35967b['varedit'][_0x5020d4(0x5da)]&&_0x5cfbdb[_0x5020d4(0x5da)][_0x5020d4(0x641)]()===_0x35967b[_0x5020d4(0x8ad)]['_id'][_0x5020d4(0x641)]());_0x5ef8f8?(_0x1e0197=_0x5ef8f8[_0x5020d4(0x751)]!==_0x35967b[_0x5020d4(0x8ad)][_0x5020d4(0x751)],Object['assign'](_0x5ef8f8,_0x35967b[_0x5020d4(0x8ad)])):(_0x146956[_0x5020d4(0x61b)][_0x5020d4(0x6cd)](_0x35967b[_0x5020d4(0x8ad)]),_0x1e0197=!0x0);}if(_0x1e0197){_0x146956[_0x5020d4(0x61b)][_0x5020d4(0x766)]((_0x2034ba,_0x50e320)=>_0x2034ba[_0x5020d4(0x751)]>_0x50e320['order']?0x1:_0x50e320[_0x5020d4(0x751)]>_0x2034ba['order']?-0x1:0x0);for(let _0x3a6990=0x0;_0x3a6990<_0x146956[_0x5020d4(0x61b)][_0x5020d4(0x303)];_0x3a6990++)_0x146956['varedits'][_0x3a6990]['order']=_0x3a6990+0x1;}let _0x1e5f3e=await this['repository'][_0x5020d4(0x461)][_0x5020d4(0x66e)](_0x146956[_0x5020d4(0x5da)],_0x146956);if(!_0x1e5f3e)throw new Error(_0x5020d4(0x56c));return _0x1e5f3e;}catch(_0x292d1c){let _0x12e041=_0x5020d4(0x42f),_0x394b8c=_0x292d1c instanceof Error?_0x292d1c[_0x5020d4(0x6c9)]:typeof _0x292d1c==_0x5020d4(0x1b3)?JSON[_0x5020d4(0x28d)](_0x292d1c):_0x292d1c,_0x2896ec=_0x12e041+':\x20'+_0x394b8c;throw this[_0x5020d4(0x755)][_0x5020d4(0x398)](this[_0x5020d4(0x474)]+'\x20('+this[_0x5020d4(0x921)][_0x5020d4(0x2d1)]+_0x5020d4(0x91e)+_0x2896ec),new m(_0x2896ec);}}async[a0_0x1df5a5(0x934)](_0x5481e6){const _0x37e271=a0_0x1df5a5;try{if(this[_0x37e271(0x755)][_0x37e271(0x3fb)](this[_0x37e271(0x474)]+'\x20('+this['instance'][_0x37e271(0x2d1)]+_0x37e271(0x2d0)),!this[_0x37e271(0x48e)][_0x37e271(0x714)][_0x37e271(0x756)](_0x2f714f=>_0x2f714f[_0x37e271(0x5da)]===_0x5481e6[_0x37e271(0x5da)]))throw this[_0x37e271(0x755)][_0x37e271(0x3fb)](this[_0x37e271(0x474)]+'\x20('+this[_0x37e271(0x921)][_0x37e271(0x2d1)]+_0x37e271(0x25a)+_0x5481e6[_0x37e271(0x5da)]+_0x37e271(0x3bd)),new m(_0x37e271(0x92f));let _0x1aa1bb=await this[_0x37e271(0x3cf)]['flow'][_0x37e271(0x694)]({'where':{'_id':_0x5481e6[_0x37e271(0x5da)]}});if(!_0x1aa1bb||!_0x1aa1bb[_0x37e271(0x74a)]?.[_0x37e271(0x5f2)](this[_0x37e271(0x921)]['wuid']))throw this[_0x37e271(0x755)][_0x37e271(0x398)](this['instanceName']+'\x20('+this[_0x37e271(0x921)][_0x37e271(0x2d1)]+_0x37e271(0x8d9)+_0x5481e6[_0x37e271(0x5da)]+_0x37e271(0x614)),new m(_0x37e271(0x844)+_0x5481e6[_0x37e271(0x5da)]+_0x37e271(0x614));if(!_0x1aa1bb[_0x37e271(0x30f)]?.[_0x37e271(0x5f2)](this[_0x37e271(0x921)][_0x37e271(0x2d1)]))throw new m(_0x37e271(0x7f3));_0x5481e6['variable'][_0x37e271(0x5d3)]=_0x5481e6[_0x37e271(0x70c)][_0x37e271(0x5d3)][_0x37e271(0x30a)](),_0x5481e6[_0x37e271(0x70c)][_0x37e271(0x5d3)][_0x37e271(0x832)]('_')&&(_0x5481e6[_0x37e271(0x70c)][_0x37e271(0x5d3)]=_0x5481e6[_0x37e271(0x70c)]['name']['substring'](0x1)),_0x5481e6[_0x37e271(0x70c)]['name']=_0x5481e6[_0x37e271(0x70c)]['name'][_0x37e271(0x30a)]();let _0x3f2d43=_0x1aa1bb[_0x37e271(0x763)][_0x37e271(0x756)](_0x171250=>_0x171250[_0x37e271(0x5d3)]===_0x5481e6[_0x37e271(0x70c)][_0x37e271(0x5d3)]);if(_0x3f2d43?.[_0x37e271(0x57a)]===!0x0)throw new Error(_0x37e271(0x3ac));if(_0x5481e6[_0x37e271(0x70c)]?.[_0x37e271(0x1be)]===!0x0){if(!_0x3f2d43)return{'message':_0x37e271(0x524)};_0x1aa1bb['variables']=_0x1aa1bb['variables'][_0x37e271(0x93c)](_0x135635=>_0x135635[_0x37e271(0x5d3)]!==_0x5481e6[_0x37e271(0x70c)][_0x37e271(0x5d3)]);}else _0x3f2d43?Object['assign'](_0x3f2d43,_0x5481e6['variable']):_0x1aa1bb['variables'][_0x37e271(0x6cd)](_0x5481e6[_0x37e271(0x70c)]);let _0x5568c5=await this[_0x37e271(0x3cf)][_0x37e271(0x461)][_0x37e271(0x66e)](_0x1aa1bb['_id'],_0x1aa1bb);if(!_0x5568c5)throw new Error(_0x37e271(0x56c));return _0x5568c5;}catch(_0x4c071c){let _0x5d640b=_0x37e271(0x2b3),_0x1cd3d1=_0x4c071c instanceof Error?_0x4c071c[_0x37e271(0x6c9)]:typeof _0x4c071c==_0x37e271(0x1b3)?JSON[_0x37e271(0x28d)](_0x4c071c):_0x4c071c,_0x1ea0a9=_0x5d640b+':\x20'+_0x1cd3d1;throw this[_0x37e271(0x755)][_0x37e271(0x398)](this[_0x37e271(0x474)]+'\x20('+this[_0x37e271(0x921)]['wuid']+'):\x20'+_0x1ea0a9),new m(_0x1ea0a9);}}async[a0_0x1df5a5(0x710)](_0x395ef8){const _0x3bd9c8=a0_0x1df5a5;let _0x326446=null;try{if(!this['AutomateSystem']?.['flowConfig'][_0x3bd9c8(0x3eb)])throw new m(_0x3bd9c8(0x7b5));this[_0x3bd9c8(0x755)][_0x3bd9c8(0x3fb)](this['instanceName']+'\x20('+this[_0x3bd9c8(0x921)][_0x3bd9c8(0x2d1)]+_0x3bd9c8(0x33c));let _0x1c34be=(await this['whatsappNumber']({'numbers':[_0x395ef8[_0x3bd9c8(0x788)]]}))[0x0];if(!_0x1c34be['exists']&&!(0x0,w[_0x3bd9c8(0x865)])(_0x1c34be['jid'])&&!_0x1c34be['jid'][_0x3bd9c8(0x5f2)](_0x3bd9c8(0x688)))throw _0x326446=JSON[_0x3bd9c8(0x28d)](_0x1c34be,null,0x2),new m(_0x1c34be);let _0x49dd3b;if(_0x395ef8[_0x3bd9c8(0x5d3)]['length']===0x24&&/^[0-9a-fA-F-]{36}$/[_0x3bd9c8(0x8d2)](_0x395ef8[_0x3bd9c8(0x5d3)])?_0x49dd3b=this['AutomateSystem'][_0x3bd9c8(0x714)][_0x3bd9c8(0x756)](_0x5f099b=>_0x5f099b[_0x3bd9c8(0x5da)]===_0x395ef8[_0x3bd9c8(0x5d3)]):_0x49dd3b=this['AutomateSystem'][_0x3bd9c8(0x714)][_0x3bd9c8(0x756)](_0x4312f8=>_0x4312f8[_0x3bd9c8(0x5d3)]===_0x395ef8[_0x3bd9c8(0x5d3)]),!_0x49dd3b)throw this['logger'][_0x3bd9c8(0x3fb)](this[_0x3bd9c8(0x474)]+'\x20('+this['instance'][_0x3bd9c8(0x2d1)]+_0x3bd9c8(0x25a)+_0x395ef8['name']+_0x3bd9c8(0x3bd)),new m(_0x3bd9c8(0x92f));let _0x584d1c=await this[_0x3bd9c8(0x3cf)]['flow'][_0x3bd9c8(0x694)]({'where':{'_id':_0x49dd3b[_0x3bd9c8(0x5da)]}});if(!_0x584d1c||!_0x584d1c[_0x3bd9c8(0x74a)]?.[_0x3bd9c8(0x5f2)](this[_0x3bd9c8(0x921)][_0x3bd9c8(0x2d1)]))throw this[_0x3bd9c8(0x755)][_0x3bd9c8(0x398)](this[_0x3bd9c8(0x474)]+'\x20('+this['instance'][_0x3bd9c8(0x2d1)]+_0x3bd9c8(0x8d9)+_0x49dd3b[_0x3bd9c8(0x5da)]+_0x3bd9c8(0x614)),_0x326446='Flow\x20\x27'+_0x49dd3b[_0x3bd9c8(0x5da)]+_0x3bd9c8(0x614),new m(_0x326446);let _0x10245d=await this[_0x3bd9c8(0x803)](_0x584d1c,_0x1c34be[_0x3bd9c8(0x83f)],_0x395ef8[_0x3bd9c8(0x61f)]);if(_0x10245d){this[_0x3bd9c8(0x755)][_0x3bd9c8(0x3fb)](this[_0x3bd9c8(0x474)]+'\x20('+this[_0x3bd9c8(0x921)][_0x3bd9c8(0x2d1)]+_0x3bd9c8(0x206));let _0xa02f6e=await this[_0x3bd9c8(0x650)](_0x10245d);return _0xa02f6e&&await this[_0x3bd9c8(0x39f)](_0x10245d,_0xa02f6e),{'message':_0x3bd9c8(0x22f)+_0x395ef8['remoteJid']};}}catch(_0x238aab){if(this[_0x3bd9c8(0x755)][_0x3bd9c8(0x398)](this['instanceName']+'\x20('+this[_0x3bd9c8(0x921)][_0x3bd9c8(0x2d1)]+'):\x20Erro\x20ao\x20iniciar\x20fluxo:\x20'+(_0x238aab instanceof Error?_0x238aab['message']:JSON['stringify'](_0x238aab,null,0x2))),_0x326446=_0x238aab instanceof Error?_0x238aab[_0x3bd9c8(0x6c9)]:JSON['stringify'](_0x238aab,null,0x2),_0x326446)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x326446);}}async[a0_0x1df5a5(0x1bb)](_0x582941,_0x1690d4,_0xd279db){const _0x17ec5b=a0_0x1df5a5;let _0x55e7b7=null;try{if(!this[_0x17ec5b(0x48e)]?.[_0x17ec5b(0x209)]['enabled'])throw new m(_0x17ec5b(0x7b5));if(this['logger']['verbose'](this[_0x17ec5b(0x474)]+'\x20('+this[_0x17ec5b(0x921)]['wuid']+'):\x20Iniciando\x20bot...'),_0x1690d4){let _0x4c59e3=(await this[_0x17ec5b(0x493)]({'numbers':[_0x1690d4]}))[0x0];if(!_0x4c59e3[_0x17ec5b(0x3bc)]&&!(0x0,w[_0x17ec5b(0x865)])(_0x4c59e3[_0x17ec5b(0x83f)])&&!_0x4c59e3['jid'][_0x17ec5b(0x5f2)](_0x17ec5b(0x688)))throw _0x55e7b7=JSON[_0x17ec5b(0x28d)](_0x4c59e3,null,0x2),new m(_0x4c59e3);_0x1690d4=_0x4c59e3[_0x17ec5b(0x83f)];}else _0x1690d4||(_0x1690d4=(0x0,Q['v4'])());let _0x26d22e=await this['repository'][_0x17ec5b(0x461)][_0x17ec5b(0x694)]({'where':{'_id':_0x582941}});if(!_0x26d22e||!_0x26d22e[_0x17ec5b(0x74a)]?.[_0x17ec5b(0x5f2)](this[_0x17ec5b(0x921)][_0x17ec5b(0x2d1)]))throw this[_0x17ec5b(0x755)][_0x17ec5b(0x398)](this[_0x17ec5b(0x474)]+'\x20('+this['instance'][_0x17ec5b(0x2d1)]+_0x17ec5b(0x8d9)+_0x582941+_0x17ec5b(0x614)),new m(_0x17ec5b(0x844)+_0x582941+'\x27\x20não\x20encontrado\x20no\x20banco\x20de\x20dados\x20ou\x20você\x20não\x20pode\x20usar\x20esse\x20fluxo');let _0x244a4d=await this[_0x17ec5b(0x803)](_0x26d22e,_0x1690d4,null);if(_0x244a4d){this['logger'][_0x17ec5b(0x3fb)](this[_0x17ec5b(0x474)]+'\x20('+this[_0x17ec5b(0x921)][_0x17ec5b(0x2d1)]+'):\x20Criou\x20conversa\x20no\x20startFlowWebhook');let _0x592343;if(_0xd279db){let _0x2e805e=_0x244a4d[_0x17ec5b(0x731)][_0x17ec5b(0x90c)],_0x400a18=this[_0x17ec5b(0x37a)](_0xd279db);Object[_0x17ec5b(0x503)](_0x2e805e,_0x400a18),_0x244a4d[_0x17ec5b(0x731)][_0x17ec5b(0x90c)]=_0x2e805e,_0x592343={'error':!0x1,'apiResponse':_0xd279db};}let _0x1136a2=await this[_0x17ec5b(0x650)](_0x244a4d);return _0x1136a2&&await this[_0x17ec5b(0x39f)](_0x244a4d,_0x1136a2),{'message':_0x17ec5b(0x584)};}}catch(_0x7f887e){if(this[_0x17ec5b(0x755)]['error'](this['instanceName']+'\x20('+this[_0x17ec5b(0x921)]['wuid']+_0x17ec5b(0x54e)+(_0x7f887e instanceof Error?_0x7f887e[_0x17ec5b(0x6c9)]:JSON[_0x17ec5b(0x28d)](_0x7f887e,null,0x2))),_0x55e7b7=_0x7f887e instanceof Error?_0x7f887e[_0x17ec5b(0x6c9)]:JSON[_0x17ec5b(0x28d)](_0x7f887e,null,0x2),_0x55e7b7)throw new m('Erro\x20ao\x20iniciar\x20fluxo:\x20'+_0x55e7b7);}}async[a0_0x1df5a5(0x8f9)](_0x2d47c7){const _0x392b25=a0_0x1df5a5;try{let _0x40bc08={'remoteJid':_0x2d47c7,'status':_0x392b25(0x20b)},_0x53d461={'status':_0x392b25(0x7f4)},_0x1fcdb2=await this[_0x392b25(0x3cf)][_0x392b25(0x557)]['updateMany'](_0x40bc08,_0x53d461,this['instance']['wuid']);return this['logger'][_0x392b25(0x3fb)](this['instanceName']+'\x20('+this[_0x392b25(0x921)]['wuid']+_0x392b25(0x3b7)),_0x1fcdb2;}catch(_0x2abbbb){throw this[_0x392b25(0x755)][_0x392b25(0x398)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x392b25(0x20f)+_0x2abbbb[_0x392b25(0x6c9)]),_0x2abbbb;}}async[a0_0x1df5a5(0x803)](_0x2d9006,_0x2184f5,_0x4169af){const _0x1d2dd1=a0_0x1df5a5;this[_0x1d2dd1(0x755)][_0x1d2dd1(0x3fb)](this[_0x1d2dd1(0x474)]+'\x20('+this[_0x1d2dd1(0x921)][_0x1d2dd1(0x2d1)]+'):\x20Criando\x20nova\x20conversa[createConversationforStartFlow]'),await this[_0x1d2dd1(0x8f9)](_0x2184f5);try{let _0xe3691e=require('mongodb')[_0x1d2dd1(0x399)],_0x33d688=Date[_0x1d2dd1(0x78f)](),_0x558705=_0x1d2dd1(0x3af),_0x4c7d81={},_0x42131f={},_0x8445cc=this[_0x1d2dd1(0x48e)][_0x1d2dd1(0x714)][_0x1d2dd1(0x756)](_0x15c45c=>_0x15c45c[_0x1d2dd1(0x5da)]===_0x2d9006[_0x1d2dd1(0x5da)]?.['toString']()),_0x1c9f83=_0x8445cc?.['minutesToClose']??_0x2d9006[_0x1d2dd1(0x769)]??0x0,_0x44b542=_0x8445cc?.[_0x1d2dd1(0x502)]??_0x2d9006[_0x1d2dd1(0x502)]??!0x1,_0x3774c={'flowId':_0x2d9006[_0x1d2dd1(0x5da)],..._0x2d9006,'chatLog':null},_0x4b5bb2=await this[_0x1d2dd1(0x4f9)](_0x3774c[_0x1d2dd1(0x763)]),_0x2ee9b7=await this['getVariablesChat'](_0x2184f5),_0x2a72c6={..._0x4b5bb2,..._0x2ee9b7,'_remoteJid':_0x2184f5},_0x2317f6={'lastReceivedMessage':_0x4c7d81,'lastSendMessage':_0x42131f,'lastBlockId':_0x558705,'lastCondition':!0x0,'realVariables':_0x2a72c6};_0x3774c[_0x1d2dd1(0x731)]=_0x2317f6,_0x3774c[_0x1d2dd1(0x731)][_0x1d2dd1(0x90c)]={..._0x2a72c6,..._0x4169af},delete _0x3774c['_id'],_0x3774c['_id']=new _0xe3691e(),_0x3774c['lastInteraction']=_0x33d688,_0x3774c[_0x1d2dd1(0x781)]=_0x1d2dd1(0x20b),_0x3774c['remoteJid']=_0x2184f5,_0x3774c[_0x1d2dd1(0x769)]=_0x1c9f83,_0x3774c['readMessages']=_0x44b542,_0x3774c[_0x1d2dd1(0x5da)]=_0x2d9006[_0x1d2dd1(0x5da)];let _0xc7bb5f=await this[_0x1d2dd1(0x3cf)][_0x1d2dd1(0x557)][_0x1d2dd1(0x66e)](_0x3774c[_0x1d2dd1(0x5da)],_0x3774c,this['instance'][_0x1d2dd1(0x2d1)]);return this['logger'][_0x1d2dd1(0x3fb)](this[_0x1d2dd1(0x474)]+'\x20('+this[_0x1d2dd1(0x921)][_0x1d2dd1(0x2d1)]+_0x1d2dd1(0x74f)),_0xc7bb5f?_0x3774c:null;}catch(_0x2dbb14){let _0xaf43e9=_0x1d2dd1(0x1ef),_0x4c73d7=_0x2dbb14 instanceof Error?_0x2dbb14[_0x1d2dd1(0x6c9)]:typeof _0x2dbb14==_0x1d2dd1(0x1b3)?JSON[_0x1d2dd1(0x28d)](_0x2dbb14):_0x2dbb14,_0x12dc16=_0xaf43e9+':\x20'+_0x4c73d7;throw this[_0x1d2dd1(0x755)]['error'](this[_0x1d2dd1(0x474)]+'\x20('+this['instance']['wuid']+_0x1d2dd1(0x91e)+_0x12dc16),new m(_0x12dc16);}}async[a0_0x1df5a5(0x388)](_0x804863){const _0x338be0=a0_0x1df5a5;try{this['logger'][_0x338be0(0x3fb)](this['instanceName']+'\x20('+this[_0x338be0(0x921)][_0x338be0(0x2d1)]+'):\x20Buscando\x20conversa...'),this[_0x338be0(0x755)][_0x338be0(0x3fb)](this[_0x338be0(0x474)]+'\x20('+this[_0x338be0(0x921)][_0x338be0(0x2d1)]+_0x338be0(0x290)+_0x804863);let _0x54a84b={'where':{'_id':_0x804863}};return await this[_0x338be0(0x3cf)][_0x338be0(0x557)][_0x338be0(0x694)](_0x54a84b,this[_0x338be0(0x921)][_0x338be0(0x2d1)]);}catch(_0x7b633c){let _0x3f70b1=_0x338be0(0x701),_0x393c6f=_0x7b633c instanceof Error?_0x7b633c['message']:typeof _0x7b633c==_0x338be0(0x1b3)?JSON[_0x338be0(0x28d)](_0x7b633c):_0x7b633c,_0x4c76f9=_0x3f70b1+':\x20'+_0x393c6f;throw this[_0x338be0(0x755)]['error'](this['instanceName']+'\x20('+this[_0x338be0(0x921)][_0x338be0(0x2d1)]+'):\x20'+_0x4c76f9),new m(_0x4c76f9);}}async[a0_0x1df5a5(0x310)](_0x34802a){const _0x667e5e=a0_0x1df5a5;try{return this[_0x667e5e(0x755)][_0x667e5e(0x3fb)](this[_0x667e5e(0x474)]+'\x20('+this[_0x667e5e(0x921)]['wuid']+_0x667e5e(0x815)),await this[_0x667e5e(0x3cf)][_0x667e5e(0x557)][_0x667e5e(0x756)](_0x34802a,this['instance'][_0x667e5e(0x2d1)]);}catch(_0x22800a){let _0x3d42f9=_0x667e5e(0x758),_0x6f0410=_0x22800a instanceof Error?_0x22800a[_0x667e5e(0x6c9)]:typeof _0x22800a==_0x667e5e(0x1b3)?JSON[_0x667e5e(0x28d)](_0x22800a):_0x22800a,_0x14e572=_0x3d42f9+':\x20'+_0x6f0410;throw this[_0x667e5e(0x755)][_0x667e5e(0x398)](this[_0x667e5e(0x474)]+'\x20('+this[_0x667e5e(0x921)][_0x667e5e(0x2d1)]+_0x667e5e(0x91e)+_0x14e572),new m(_0x14e572);}}async[a0_0x1df5a5(0x79f)](_0x5a9906){const _0x2a9085=a0_0x1df5a5;try{return this[_0x2a9085(0x755)][_0x2a9085(0x3fb)](this['instanceName']+'\x20('+this['instance'][_0x2a9085(0x2d1)]+_0x2a9085(0x6fd)),this[_0x2a9085(0x755)][_0x2a9085(0x3fb)](this[_0x2a9085(0x474)]+'\x20('+this['instance'][_0x2a9085(0x2d1)]+_0x2a9085(0x4aa)+_0x5a9906),(await this['repository'][_0x2a9085(0x557)][_0x2a9085(0x4c7)]({'where':{'_id':_0x5a9906[_0x2a9085(0x5da)]}},this[_0x2a9085(0x921)][_0x2a9085(0x2d1)]))[_0x2a9085(0x408)]===0x0?{'message':_0x2a9085(0x2f4)}:{'message':'Conversa\x20deletada\x20com\x20sucesso.'};}catch(_0x3df0c8){let _0x3a0dd1='Erro\x20ao\x20deletar\x20a\x20conversa',_0x5e4a0e=_0x3df0c8 instanceof Error?_0x3df0c8['message']:typeof _0x3df0c8=='object'?JSON[_0x2a9085(0x28d)](_0x3df0c8):_0x3df0c8,_0x324e46=_0x3a0dd1+':\x20'+_0x5e4a0e;throw this['logger'][_0x2a9085(0x398)](this[_0x2a9085(0x474)]+'\x20('+this['instance'][_0x2a9085(0x2d1)]+_0x2a9085(0x91e)+_0x324e46),new m(_0x324e46);}}async[a0_0x1df5a5(0x872)](_0xdf9c47){const _0x3e5f62=a0_0x1df5a5;try{let {_id:_0xf6a8e8,chatLog:_0x12d612,status:_0x23e881}=_0xdf9c47;if(!_0xf6a8e8)return{'message':_0x3e5f62(0x5d8)};let _0x569f3f={};if(_0x23e881!==void 0x0&&(_0x569f3f['status']=_0x23e881),Object[_0x3e5f62(0x326)](_0x569f3f)[_0x3e5f62(0x303)]===0x0)return{'message':'Nenhum\x20campo\x20válido\x20para\x20atualização\x20fornecido.'};let _0x266725=await this[_0x3e5f62(0x3cf)][_0x3e5f62(0x557)][_0x3e5f62(0x66e)](_0xf6a8e8,_0x569f3f,this[_0x3e5f62(0x921)][_0x3e5f62(0x2d1)]);return _0x266725||{'message':_0x3e5f62(0x5cc)};}catch(_0x43ac9e){let _0x224bf3=_0x3e5f62(0x337),_0x5e077d=_0x43ac9e instanceof Error?_0x43ac9e[_0x3e5f62(0x6c9)]:typeof _0x43ac9e=='object'?JSON['stringify'](_0x43ac9e):_0x43ac9e,_0x5d4443=_0x224bf3+':\x20'+_0x5e077d;throw this[_0x3e5f62(0x755)]['error'](this['instanceName']+'\x20('+this[_0x3e5f62(0x921)]['wuid']+_0x3e5f62(0x91e)+_0x5d4443),new m(_0x5d4443);}}async['editChat'](_0x3f7580){const _0x2d3a57=a0_0x1df5a5;try{_0x3f7580[_0x2d3a57(0x5da)]=this[_0x2d3a57(0x7b3)](_0x3f7580[_0x2d3a57(0x5da)]);let _0x5c03e3=await this['repository']['chat'][_0x2d3a57(0x694)]({'where':{'_id':_0x3f7580[_0x2d3a57(0x5da)]}},this['instance'][_0x2d3a57(0x2d1)]);if(!_0x5c03e3)throw new m(_0x2d3a57(0x64c));let {_id:_0x49b2cc,leadInfo:_0x2c4dbb}=_0x3f7580;if(!_0x49b2cc)throw new Error('O\x20campo\x20id\x20é\x20obrigatório\x20para\x20editar/criar\x20um\x20chat.');if(_0x3f7580[_0x2d3a57(0x1be)]==='all')return await this[_0x2d3a57(0x55f)](_0x3f7580[_0x2d3a57(0x5da)]),await this['repository'][_0x2d3a57(0x947)]['delete']({'where':{'_id':_0x3f7580['_id']}},this['instance'][_0x2d3a57(0x2d1)]),await this[_0x2d3a57(0x3cf)][_0x2d3a57(0x6c9)][_0x2d3a57(0x1be)]({'where':{'key':{'remoteJid':_0x3f7580[_0x2d3a57(0x5da)]}}},this['instance'][_0x2d3a57(0x2d1)]),_0x3f7580=await this[_0x2d3a57(0x3cf)][_0x2d3a57(0x947)][_0x2d3a57(0x66e)]({'where':{'_id':_0x3f7580[_0x2d3a57(0x5da)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x2d3a57(0x921)][_0x2d3a57(0x2d1)]),F(this['instanceName'],_0x2d3a57(0x64d),{'chat':_0x3f7580}),{'message':_0x2d3a57(0x481)};if(_0x3f7580['delete']==='messages')return await this[_0x2d3a57(0x3cf)]['message'][_0x2d3a57(0x1be)]({'where':{'key':{'remoteJid':_0x3f7580[_0x2d3a57(0x5da)]}}},this[_0x2d3a57(0x921)][_0x2d3a57(0x2d1)]),_0x3f7580=await this[_0x2d3a57(0x3cf)][_0x2d3a57(0x947)][_0x2d3a57(0x66e)]({'where':{'_id':_0x3f7580[_0x2d3a57(0x5da)]}},{'lastmsg':0x0,'unreadcount':0x0},this[_0x2d3a57(0x921)]['wuid']),F(this[_0x2d3a57(0x474)],_0x2d3a57(0x64d),{'chat':_0x3f7580}),{'message':'Mensagens\x20deletadas\x20com\x20sucesso.'};let _0x14ab6c=(_0x1a8698,_0x3ce54f,_0x376e22)=>{const _0x5ea6dd=_0x2d3a57;_0x1a8698&&_0x376e22[_0x5ea6dd(0x504)](_0x1df123=>{_0x1a8698[_0x1df123]!==void 0x0&&(_0x3ce54f['leadInfo.'+_0x1df123]=_0x1a8698[_0x1df123]);});},_0x2e3af1={};if('muteEndTime'in _0x3f7580&&(this[_0x2d3a57(0x755)][_0x2d3a57(0x3fb)](this['instanceName']+'\x20('+this[_0x2d3a57(0x921)][_0x2d3a57(0x2d1)]+_0x2d3a57(0x214)+_0x3f7580[_0x2d3a57(0x5da)]),_0x3f7580[_0x2d3a57(0x689)]=_0x3f7580[_0x2d3a57(0x689)]===0x0?null:-0x1,await this['client'][_0x2d3a57(0x6b3)]({'mute':_0x3f7580['muteEndTime']},_0x3f7580[_0x2d3a57(0x5da)]),_0x2e3af1[_0x2d3a57(0x689)]=Number(_0x3f7580['muteEndTime'])),_0x2c4dbb&&(_0x14ab6c(_0x2c4dbb,_0x2e3af1,[_0x2d3a57(0x7f6),_0x2d3a57(0x378),_0x2d3a57(0x6bc),_0x2d3a57(0x635),_0x2d3a57(0x781),_0x2d3a57(0x5c8),_0x2d3a57(0x291),'atendimentoAberto',_0x2d3a57(0x6b0),_0x2d3a57(0x553),_0x2d3a57(0x298)]),Array[_0x2d3a57(0x4d9)](_0x2c4dbb[_0x2d3a57(0x5ae)])&&(_0x2e3af1[_0x2d3a57(0x7de)]=_0x2c4dbb[_0x2d3a57(0x5ae)][_0x2d3a57(0x948)](_0x925e10=>({'_id':_0x925e10[_0x2d3a57(0x5da)],'value':_0x925e10['value']}))),_0x3f7580['leadInfo'][_0x2d3a57(0x553)]!==void 0x0)){let _0x7b449b=await this['repository'][_0x2d3a57(0x749)]['find']({'where':{}},this[_0x2d3a57(0x921)][_0x2d3a57(0x2d1)]),_0x1018ed=new Set(_0x3f7580[_0x2d3a57(0x57a)][_0x2d3a57(0x553)]||[]),_0x5e0081=new Set(_0x3f7580['leadInfo'][_0x2d3a57(0x553)]),_0x215dcf=new Set(_0x7b449b[_0x2d3a57(0x948)](_0x373355=>_0x373355[_0x2d3a57(0x5da)])),_0x44c781=[..._0x5e0081][_0x2d3a57(0x93c)](_0x56d279=>!_0x1018ed[_0x2d3a57(0x664)](_0x56d279)&&_0x215dcf[_0x2d3a57(0x664)](_0x56d279)),_0x577fca=[..._0x1018ed][_0x2d3a57(0x93c)](_0x460a57=>!_0x5e0081['has'](_0x460a57));if(_0x2e3af1[_0x2d3a57(0x64b)]=[..._0x1018ed],_0x5c03e3&&!_0x5c03e3[_0x2d3a57(0x3ee)]){for(let _0x28c8eb of _0x44c781)await this[_0x2d3a57(0x824)](_0x28c8eb,_0x3f7580[_0x2d3a57(0x5da)]),_0x1018ed['add'](_0x28c8eb);for(let _0x59fa58 of _0x577fca)await this['RemoveChatLabel'](_0x59fa58,_0x3f7580[_0x2d3a57(0x5da)]),_0x1018ed[_0x2d3a57(0x1be)](_0x59fa58);}}if(_0x3f7580[_0x2d3a57(0x3a5)]!==void 0x0&&(_0x2e3af1['unreadcount']=Number(_0x3f7580[_0x2d3a57(0x3a5)])),Object['keys'](_0x2e3af1)[_0x2d3a57(0x303)]===0x0)throw new Error(_0x2d3a57(0x359));let _0x187dec=await this[_0x2d3a57(0x3cf)][_0x2d3a57(0x947)][_0x2d3a57(0x66e)]({'where':{'_id':_0x3f7580[_0x2d3a57(0x5da)]}},_0x2e3af1,this['instance'][_0x2d3a57(0x2d1)]);return _0x187dec&&F(this[_0x2d3a57(0x474)],'chats',{'chat':_0x187dec}),_0x187dec?(this[_0x2d3a57(0x755)][_0x2d3a57(0x3fb)](this[_0x2d3a57(0x474)]+'\x20('+this[_0x2d3a57(0x921)]['wuid']+'):\x20'+JSON[_0x2d3a57(0x28d)](_0x187dec,null,0x2)),_0x187dec):{'message':_0x2d3a57(0x93b)};}catch(_0x11ebbb){let _0x3d4497=_0x2d3a57(0x7aa),_0x49c189=_0x11ebbb instanceof Error?_0x11ebbb[_0x2d3a57(0x6c9)]:typeof _0x11ebbb==_0x2d3a57(0x1b3)?JSON[_0x2d3a57(0x28d)](_0x11ebbb):_0x11ebbb,_0x17aa3c=_0x3d4497+':\x20'+_0x49c189;throw this[_0x2d3a57(0x755)][_0x2d3a57(0x398)](this[_0x2d3a57(0x474)]+'\x20('+this[_0x2d3a57(0x921)][_0x2d3a57(0x2d1)]+_0x2d3a57(0x91e)+_0x17aa3c),new m(_0x17aa3c);}}async[a0_0x1df5a5(0x824)](_0x5c4eeb,_0x4c42c7){const _0x296dae=a0_0x1df5a5;try{await this[_0x296dae(0x826)][_0x296dae(0x246)](_0x4c42c7,_0x5c4eeb),this[_0x296dae(0x755)][_0x296dae(0x4f4)](this[_0x296dae(0x474)]+'\x20('+this[_0x296dae(0x921)][_0x296dae(0x2d1)]+_0x296dae(0x484)+_0x5c4eeb+_0x296dae(0x606)+_0x4c42c7+_0x296dae(0x8b6));}catch(_0x46f04e){this['logger'][_0x296dae(0x398)]('Erro\x20ao\x20adicionar\x20label\x20'+_0x5c4eeb+_0x296dae(0x624)+_0x4c42c7+':\x20'+_0x46f04e);}}async['RemoveChatLabel'](_0x60fddc,_0x447472){const _0x3cf5cc=a0_0x1df5a5;try{await this['client']['removeChatLabel'](_0x447472,_0x60fddc),this['logger'][_0x3cf5cc(0x4f4)](this[_0x3cf5cc(0x474)]+'\x20('+this[_0x3cf5cc(0x921)][_0x3cf5cc(0x2d1)]+_0x3cf5cc(0x484)+_0x60fddc+_0x3cf5cc(0x4a1)+_0x447472+_0x3cf5cc(0x8b6));}catch(_0x1362ac){this[_0x3cf5cc(0x755)][_0x3cf5cc(0x398)](_0x3cf5cc(0x860)+_0x60fddc+_0x3cf5cc(0x78c)+_0x447472+':\x20'+_0x1362ac);}}async[a0_0x1df5a5(0x649)](_0x301823){const _0x4d3a21=a0_0x1df5a5;try{let _0x3d4371=await this[_0x4d3a21(0x3cf)][_0x4d3a21(0x8bd)][_0x4d3a21(0x724)](this['instance'][_0x4d3a21(0x2d1)]),_0x3b0b00=_0x301823[_0x4d3a21(0x5da)]?_0x3d4371[_0x4d3a21(0x1c1)][_0x4d3a21(0x784)](_0x2c4396=>_0x2c4396[_0x4d3a21(0x5da)]===_0x301823[_0x4d3a21(0x5da)]):-0x1;if(_0x301823[_0x4d3a21(0x1be)]&&_0x3b0b00>-0x1)_0x3d4371['agents'][_0x4d3a21(0x7ee)](_0x3b0b00,0x1);else{if(_0x3b0b00>-0x1){let _0x443497=_0x3d4371['agents'][_0x3b0b00];_0x301823['fone']&&(_0x443497['fone']=_0x301823['fone']),_0x301823['name']&&(_0x443497[_0x4d3a21(0x5d3)]=_0x301823[_0x4d3a21(0x5d3)]),_0x301823['email']&&(_0x443497[_0x4d3a21(0x6bc)]=_0x301823['email']),_0x301823[_0x4d3a21(0x47d)]&&(_0x443497['role']=_0x301823[_0x4d3a21(0x47d)]);}else _0x3d4371[_0x4d3a21(0x1c1)][_0x4d3a21(0x6cd)]({'_id':_0x301823['_id']||new he['default'][(_0x4d3a21(0x5eb))]['ObjectId']()[_0x4d3a21(0x641)](),'fone':_0x301823[_0x4d3a21(0x7be)],'name':_0x301823['name'],'email':_0x301823[_0x4d3a21(0x6bc)],'role':_0x301823[_0x4d3a21(0x47d)]});}let _0x14d8ea={'agents':_0x3d4371[_0x4d3a21(0x1c1)]},_0x1a5e38=await this['repository']['automateSystem'][_0x4d3a21(0x62e)](_0x14d8ea,this[_0x4d3a21(0x921)][_0x4d3a21(0x2d1)]);return this['AutomateSystem']=_0x1a5e38,this['logger'][_0x4d3a21(0x3fb)](this[_0x4d3a21(0x474)]+'\x20('+this[_0x4d3a21(0x921)][_0x4d3a21(0x2d1)]+_0x4d3a21(0x5f8)),this[_0x4d3a21(0x755)]['verbose'](this[_0x4d3a21(0x474)]+'\x20('+this['instance']['wuid']+_0x4d3a21(0x91e)+this[_0x4d3a21(0x48e)]),_0x1a5e38;}catch(_0x2d7482){let _0x33995e=_0x4d3a21(0x2fd),_0x2d5839=_0x2d7482 instanceof Error?_0x2d7482[_0x4d3a21(0x6c9)]:typeof _0x2d7482==_0x4d3a21(0x1b3)?JSON[_0x4d3a21(0x28d)](_0x2d7482):_0x2d7482,_0xff80ca=_0x33995e+':\x20'+_0x2d5839;throw this[_0x4d3a21(0x755)]['error'](this[_0x4d3a21(0x474)]+'\x20('+this[_0x4d3a21(0x921)][_0x4d3a21(0x2d1)]+'):\x20'+_0xff80ca),new m(_0xff80ca);}}async[a0_0x1df5a5(0x3ed)](_0x244544){const _0x2b498b=a0_0x1df5a5;try{let _0x234d73=await this[_0x2b498b(0x3cf)][_0x2b498b(0x8bd)]['findOrCreate'](this['instance']['wuid']),_0x4b3052=_0x244544[_0x2b498b(0x5da)]?_0x234d73[_0x2b498b(0x5ae)]['findIndex'](_0x894c80=>_0x894c80['_id']===_0x244544[_0x2b498b(0x5da)]):-0x1,_0x12b6dc=!0x1,_0x2d8733=_0x234d73[_0x2b498b(0x5ae)][_0x2b498b(0x72b)](_0x1fc3e4=>_0x1fc3e4[_0x2b498b(0x751)]===_0x244544[_0x2b498b(0x751)]);if(_0x244544[_0x2b498b(0x1be)]&&_0x4b3052>-0x1)_0x234d73[_0x2b498b(0x5ae)][_0x2b498b(0x7ee)](_0x4b3052,0x1),_0x12b6dc=!0x0;else{if(_0x4b3052>-0x1){if(_0x234d73[_0x2b498b(0x5ae)][_0x2b498b(0x72b)](_0x3e18d8=>_0x3e18d8['name']===_0x244544['name']&&_0x3e18d8[_0x2b498b(0x5da)]!==_0x244544[_0x2b498b(0x5da)]))throw new Error(_0x2b498b(0x4cb));let _0x2a1cac=_0x234d73[_0x2b498b(0x5ae)][_0x4b3052];_0x244544[_0x2b498b(0x751)]&&(_0x2d8733||!Number[_0x2b498b(0x59b)](_0x244544[_0x2b498b(0x751)]))&&(_0x2a1cac[_0x2b498b(0x751)]=_0x244544[_0x2b498b(0x751)],_0x12b6dc=!0x0),_0x244544[_0x2b498b(0x5d3)]&&(_0x2a1cac[_0x2b498b(0x5d3)]=_0x244544[_0x2b498b(0x5d3)]);}else{if(_0x234d73[_0x2b498b(0x5ae)][_0x2b498b(0x72b)](_0x2c2f39=>_0x2c2f39['name']===_0x244544[_0x2b498b(0x5d3)]&&_0x2c2f39[_0x2b498b(0x5da)]!==_0x244544[_0x2b498b(0x5da)]))throw new Error('Nome\x20do\x20campo\x20personalizado\x20já\x20existe.');_0x234d73['customFields'][_0x2b498b(0x6cd)]({'_id':_0x244544['_id']||new he[(_0x2b498b(0x686))]['Types'][(_0x2b498b(0x399))]()[_0x2b498b(0x641)](),'order':_0x244544[_0x2b498b(0x751)],'name':_0x244544[_0x2b498b(0x5d3)]}),_0x12b6dc=!0x0;}}if(_0x12b6dc){_0x234d73[_0x2b498b(0x5ae)][_0x2b498b(0x766)]((_0x2f32fb,_0x290373)=>_0x2f32fb['order']>_0x290373[_0x2b498b(0x751)]?0x1:_0x290373['order']>_0x2f32fb[_0x2b498b(0x751)]?-0x1:0x0);for(let _0x56d766=0x0;_0x56d766<_0x234d73[_0x2b498b(0x5ae)][_0x2b498b(0x303)];_0x56d766++)_0x234d73[_0x2b498b(0x5ae)][_0x56d766][_0x2b498b(0x751)]=_0x56d766+0x1;}let _0x39a383=await this[_0x2b498b(0x3cf)][_0x2b498b(0x8bd)]['update'](_0x234d73,this[_0x2b498b(0x921)]['wuid']);return this[_0x2b498b(0x48e)]=_0x39a383,this[_0x2b498b(0x755)][_0x2b498b(0x3fb)](this[_0x2b498b(0x474)]+'\x20('+this[_0x2b498b(0x921)][_0x2b498b(0x2d1)]+_0x2b498b(0x3b4)),this[_0x2b498b(0x755)][_0x2b498b(0x3fb)](this['instanceName']+'\x20('+this[_0x2b498b(0x921)]['wuid']+_0x2b498b(0x91e)+this[_0x2b498b(0x48e)]),_0x39a383;}catch(_0xb78c60){let _0x45e0b4='Erro\x20ao\x20tentar\x20updateCustomFields',_0x2a3210=_0xb78c60 instanceof Error?_0xb78c60[_0x2b498b(0x6c9)]:typeof _0xb78c60==_0x2b498b(0x1b3)?JSON[_0x2b498b(0x28d)](_0xb78c60):_0xb78c60,_0xf5cc5f=_0x45e0b4+':\x20'+_0x2a3210;throw this[_0x2b498b(0x755)]['error'](this[_0x2b498b(0x474)]+'\x20('+this[_0x2b498b(0x921)][_0x2b498b(0x2d1)]+'):\x20'+_0xf5cc5f),new m(_0xf5cc5f);}}async['updateAutoCompleteMessages'](_0x5ceba9){const _0x12b1ba=a0_0x1df5a5;try{let _0x5dd627=await this[_0x12b1ba(0x3cf)][_0x12b1ba(0x8bd)]['findOrCreate'](this['instance']['wuid']),_0x5df87f=_0x5dd627?.[_0x12b1ba(0x91c)]?.['findIndex'](_0x4cc458=>_0x4cc458[_0x12b1ba(0x5da)]===_0x5ceba9?.[_0x12b1ba(0x5da)]);if(_0x5ceba9?.[_0x12b1ba(0x1be)])_0x5df87f>-0x1&&_0x5dd627?.[_0x12b1ba(0x91c)]?.[_0x12b1ba(0x7ee)](_0x5df87f,0x1);else{if(_0x5df87f>-0x1){let _0x14353e=_0x5dd627['autoCompleteMessages'][_0x5df87f];_0x14353e[_0x12b1ba(0x751)]=_0x5ceba9?.['order']||_0x14353e[_0x12b1ba(0x751)],_0x14353e['command']=_0x5ceba9?.[_0x12b1ba(0x72c)]||_0x14353e[_0x12b1ba(0x72c)],_0x14353e[_0x12b1ba(0x6c9)]=_0x5ceba9?.[_0x12b1ba(0x6c9)]||_0x14353e['message'];}else{let _0xb8637e={'_id':_0x5ceba9?.['_id']||new he[(_0x12b1ba(0x686))][(_0x12b1ba(0x5eb))]['ObjectId']()[_0x12b1ba(0x641)](),'order':_0x5ceba9?.[_0x12b1ba(0x751)],'command':_0x5ceba9?.[_0x12b1ba(0x72c)],'message':_0x5ceba9?.[_0x12b1ba(0x6c9)]};_0x5dd627?.['autoCompleteMessages']?.[_0x12b1ba(0x6cd)](_0xb8637e);}}_0x5dd627?.[_0x12b1ba(0x91c)]?.[_0x12b1ba(0x766)]((_0x10d6f7,_0x832b97)=>_0x10d6f7[_0x12b1ba(0x751)]-_0x832b97[_0x12b1ba(0x751)]);let _0x15d6b=await this[_0x12b1ba(0x3cf)][_0x12b1ba(0x8bd)][_0x12b1ba(0x62e)](_0x5dd627,this[_0x12b1ba(0x921)][_0x12b1ba(0x2d1)]);return this[_0x12b1ba(0x48e)]=_0x15d6b,this[_0x12b1ba(0x755)][_0x12b1ba(0x3fb)](this[_0x12b1ba(0x474)]+'\x20('+this[_0x12b1ba(0x921)][_0x12b1ba(0x2d1)]+'):\x20debug\x20alterando\x20this.AutomateSystem'),_0x15d6b;}catch(_0x3418be){let _0x377d25=_0x12b1ba(0x2dd),_0x20ac7d=_0x3418be instanceof Error?_0x3418be['message']:typeof _0x3418be=='object'?JSON[_0x12b1ba(0x28d)](_0x3418be):_0x3418be,_0x5a799d=_0x377d25+':\x20'+_0x20ac7d;throw this[_0x12b1ba(0x755)][_0x12b1ba(0x398)](this[_0x12b1ba(0x474)]+'\x20('+this[_0x12b1ba(0x921)]['wuid']+_0x12b1ba(0x91e)+_0x5a799d),new m(_0x5a799d);}}async['updateFlowConfig'](_0x12671f){const _0x58fbf0=a0_0x1df5a5;try{let _0x3d4797=await this[_0x58fbf0(0x3cf)][_0x58fbf0(0x8bd)][_0x58fbf0(0x724)](this[_0x58fbf0(0x921)][_0x58fbf0(0x2d1)]);if(!_0x3d4797)throw new Error(_0x58fbf0(0x72a));let _0x2b8fe1={'_id':_0x3d4797[_0x58fbf0(0x5da)],'flowConfig':{'enabled':_0x12671f[_0x58fbf0(0x3eb)]??_0x3d4797['flowConfig'][_0x58fbf0(0x3eb)],'ignoreGroups':_0x12671f[_0x58fbf0(0x7db)]??_0x3d4797[_0x58fbf0(0x209)][_0x58fbf0(0x7db)],'stopConversation':_0x12671f[_0x58fbf0(0x692)][_0x58fbf0(0x30a)]()??_0x3d4797[_0x58fbf0(0x209)][_0x58fbf0(0x692)][_0x58fbf0(0x30a)](),'stopMinutes':_0x12671f[_0x58fbf0(0x573)]??_0x3d4797['flowConfig']['stopMinutes'],'stopWhenYouSendMsg':_0x12671f[_0x58fbf0(0x6bd)]??_0x3d4797[_0x58fbf0(0x209)][_0x58fbf0(0x6bd)]}},_0x419e7a=await this[_0x58fbf0(0x3cf)][_0x58fbf0(0x8bd)]['update'](_0x2b8fe1,this['instance'][_0x58fbf0(0x2d1)]);return this[_0x58fbf0(0x48e)]=_0x419e7a,this[_0x58fbf0(0x755)][_0x58fbf0(0x3fb)](this[_0x58fbf0(0x474)]+'\x20('+this[_0x58fbf0(0x921)][_0x58fbf0(0x2d1)]+_0x58fbf0(0x5f8)),this[_0x58fbf0(0x755)][_0x58fbf0(0x3fb)](this[_0x58fbf0(0x474)]+'\x20('+this[_0x58fbf0(0x921)][_0x58fbf0(0x2d1)]+_0x58fbf0(0x91e)+this[_0x58fbf0(0x48e)]),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),_0x419e7a;}catch(_0x510cf1){let _0x3b77e5='Erro\x20ao\x20editar\x20configuração\x20de\x20fluxos',_0x441eb3=_0x510cf1 instanceof Error?_0x510cf1[_0x58fbf0(0x6c9)]:typeof _0x510cf1==_0x58fbf0(0x1b3)?JSON[_0x58fbf0(0x28d)](_0x510cf1):_0x510cf1,_0x579bfc=_0x3b77e5+':\x20'+_0x441eb3;throw this[_0x58fbf0(0x755)]['error'](this[_0x58fbf0(0x474)]+'\x20('+this['instance'][_0x58fbf0(0x2d1)]+_0x58fbf0(0x91e)+_0x579bfc),new m(_0x579bfc);}}async[a0_0x1df5a5(0x4d3)](){const _0x552bfa=a0_0x1df5a5;try{let _0x3848be=await this[_0x552bfa(0x3cf)][_0x552bfa(0x8bd)][_0x552bfa(0x724)](this['instance']['wuid']);return this[_0x552bfa(0x48e)]=_0x3848be,_0x3848be;}catch(_0xed2b7e){let _0x510ff8=_0x552bfa(0x648),_0x194b48=_0xed2b7e instanceof Error?_0xed2b7e[_0x552bfa(0x6c9)]:typeof _0xed2b7e=='object'?JSON[_0x552bfa(0x28d)](_0xed2b7e):_0xed2b7e,_0x46fe2c=_0x510ff8+':\x20'+_0x194b48;throw this[_0x552bfa(0x755)]['error'](this['instanceName']+'\x20('+this[_0x552bfa(0x921)][_0x552bfa(0x2d1)]+_0x552bfa(0x91e)+_0x46fe2c),new m(_0x46fe2c);}}async[a0_0x1df5a5(0x2f2)](){const _0x4db6be=a0_0x1df5a5;let _0x4a9c0f=(await import(_0x4db6be(0x2d3)))['default'];this['queue']=new _0x4a9c0f({'concurrency':0x1});}async['setRestartTimeout'](){const _0x317377=a0_0x1df5a5;this['instance']['ScheduleMessage'][_0x317377(0x1b4)]&&clearTimeout(this[_0x317377(0x921)]['ScheduleMessage'][_0x317377(0x1b4)]),this[_0x317377(0x921)][_0x317377(0x8ac)]['timeout']=setTimeout(()=>{const _0x121569=_0x317377;this[_0x121569(0x27e)]();},0x2*0x3c*0x3e8+0x14*0x3e8);}async['checkAndRestartProcess'](){const _0x297c9f=a0_0x1df5a5;let _0x753ba=this['instance'][_0x297c9f(0x8ac)]['lastSend'];(_0x753ba===0x0||_0x753ba===null||Date[_0x297c9f(0x78f)]()-_0x753ba>=0x1d4c0)&&(this[_0x297c9f(0x755)]['verbose'](this[_0x297c9f(0x474)]+'\x20('+this[_0x297c9f(0x921)][_0x297c9f(0x2d1)]+'):\x20Timeout\x20excedido.\x20Reiniciando\x20o\x20processamento.'),this[_0x297c9f(0x921)][_0x297c9f(0x8ac)][_0x297c9f(0x6d4)]=null,this[_0x297c9f(0x921)][_0x297c9f(0x8ac)][_0x297c9f(0x8ed)]=0x0,this['instance'][_0x297c9f(0x8ac)][_0x297c9f(0x3d5)]=0x0,await this[_0x297c9f(0x4cd)]());}async['scheduleNextCheck'](){const _0x8945ab=a0_0x1df5a5;this[_0x8945ab(0x755)][_0x8945ab(0x8c0)](this[_0x8945ab(0x474)]+'\x20('+this['instance']['wuid']+'):\x20Procurando\x20mensagens\x20para\x20envio'),await this[_0x8945ab(0x6f3)]();let _0x2e7824=await this['getReadyToSendMessages']();_0x2e7824[_0x8945ab(0x303)]>0x0&&(setTimeout(()=>this['checkAndRestartProcess'](),0x14*0x3e8),this['logger'][_0x8945ab(0x8c0)](this[_0x8945ab(0x474)]+'\x20('+this['instance'][_0x8945ab(0x2d1)]+_0x8945ab(0x3df)),this[_0x8945ab(0x767)]['clear'](),this[_0x8945ab(0x767)]['add'](()=>this[_0x8945ab(0x4df)](_0x2e7824)));let _0x1e2a20={'where':{'status':_0x8945ab(0x333),'when':{'$gt':Date[_0x8945ab(0x78f)]()}}},_0x348ff5=await this[_0x8945ab(0x3cf)][_0x8945ab(0x2f1)]['findOne'](_0x1e2a20,this[_0x8945ab(0x921)][_0x8945ab(0x2d1)]);_0x348ff5&&_0x348ff5[_0x8945ab(0x520)]-Date['now']()<=0x6ddd00?this[_0x8945ab(0x921)]['ScheduleMessage']['delayMessage']=_0x348ff5[_0x8945ab(0x520)]-Date[_0x8945ab(0x78f)]():this[_0x8945ab(0x921)][_0x8945ab(0x8ac)][_0x8945ab(0x3d5)]=(0x3c+Math[_0x8945ab(0x346)](Math['random']()*0x3c))*0x3c*0x3e8,this[_0x8945ab(0x921)][_0x8945ab(0x8ac)][_0x8945ab(0x3d5)]=Math[_0x8945ab(0x2e3)](this[_0x8945ab(0x921)][_0x8945ab(0x8ac)]['delayMessage'],0x1*0x2*0x3e8);let _0x5654bb=Math[_0x8945ab(0x1d2)](this[_0x8945ab(0x921)][_0x8945ab(0x8ac)][_0x8945ab(0x3d5)]/0xea60);if(_0x348ff5){let _0x548a74=new Date(_0x348ff5[_0x8945ab(0x520)])[_0x8945ab(0x4b8)]();this[_0x8945ab(0x755)][_0x8945ab(0x8c0)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x8945ab(0x306)+_0x548a74+_0x8945ab(0x277)+_0x5654bb+'\x20minutos');}else this[_0x8945ab(0x755)][_0x8945ab(0x8c0)](this[_0x8945ab(0x474)]+'\x20('+this[_0x8945ab(0x921)][_0x8945ab(0x2d1)]+_0x8945ab(0x476)+_0x5654bb+'\x20minutos');setTimeout(()=>{const _0xf4041f=_0x8945ab;this[_0xf4041f(0x4cd)]();},this[_0x8945ab(0x921)]['ScheduleMessage'][_0x8945ab(0x3d5)]);}async[a0_0x1df5a5(0x599)](){const _0x1d0e0a=a0_0x1df5a5;this[_0x1d0e0a(0x755)][_0x1d0e0a(0x8c0)](this[_0x1d0e0a(0x474)]+'\x20('+this[_0x1d0e0a(0x921)][_0x1d0e0a(0x2d1)]+_0x1d0e0a(0x45c));let _0x5bde4d=Date[_0x1d0e0a(0x78f)]()-0xc*0x3c*0x3c*0x3e8,_0x5d1738={'where':{'status':{'$in':['scheduled',_0x1d0e0a(0x280)]},'$or':[{'when':{'$lte':Date[_0x1d0e0a(0x78f)](),'$gte':_0x5bde4d}},{'when':0x0}]}},_0x492923=await this[_0x1d0e0a(0x3cf)][_0x1d0e0a(0x2f1)]['find'](_0x5d1738,this[_0x1d0e0a(0x921)]['wuid']);return this[_0x1d0e0a(0x755)]['warn'](this['instanceName']+'\x20('+this[_0x1d0e0a(0x921)][_0x1d0e0a(0x2d1)]+_0x1d0e0a(0x6e8)+_0x492923['length']),_0x492923;}async[a0_0x1df5a5(0x4df)](_0x108fc2){const _0x32c3df=a0_0x1df5a5;this[_0x32c3df(0x755)][_0x32c3df(0x8c0)](this[_0x32c3df(0x474)]+'\x20('+this[_0x32c3df(0x921)]['wuid']+_0x32c3df(0x506));let _0x35109c=0x3*0x3e8,_0x37f389=0x8*0x3e8,_0x43276e=Math[_0x32c3df(0x346)](Math[_0x32c3df(0x5ba)]()*(_0x37f389-_0x35109c+0x1))+_0x35109c,_0x433b4b=()=>this[_0x32c3df(0x764)][_0x32c3df(0x303)]===0x0?null:this['pendingMessages'][_0x32c3df(0x6e0)]((_0x7fbe12,_0xa6a611)=>(_0x7fbe12[_0x32c3df(0x751)]??Number['MAX_SAFE_INTEGER'])<(_0xa6a611[_0x32c3df(0x751)]??Number[_0x32c3df(0x4b2)])?_0x7fbe12:_0xa6a611,this[_0x32c3df(0x764)][0x0]);_0x108fc2=await this[_0x32c3df(0x599)]();for(let _0x52a20d of _0x108fc2){await this[_0x32c3df(0x8a0)]();let _0x12ae4d=0x3*0x3e8,_0x189366={'_id':_0x52a20d['_id'],'$or':[{'startSend':{'$exists':!0x1}},{'startSend':{'$lt':Date['now']()-_0x12ae4d}}]},_0x3844ff={'startSend':Date['now'](),'status':_0x32c3df(0x280)},_0xc757df=await this[_0x32c3df(0x3cf)][_0x32c3df(0x2f1)]['updateOne'](_0x189366,_0x3844ff,this[_0x32c3df(0x921)]['wuid']);if(this['pendingMessages']=_0xc757df['messages'][_0x32c3df(0x93c)](_0x5def88=>!_0x5def88[_0x32c3df(0x665)]),!_0xc757df){setTimeout(()=>this[_0x32c3df(0x27e)](),0xa*0x3e8);continue;}if(this[_0x32c3df(0x921)][_0x32c3df(0x8ac)][_0x32c3df(0x6d4)]=_0xc757df,!this['instance'][_0x32c3df(0x8ac)][_0x32c3df(0x368)]){this[_0x32c3df(0x755)][_0x32c3df(0x8c0)](this[_0x32c3df(0x474)]+'\x20('+this['instance'][_0x32c3df(0x2d1)]+_0x32c3df(0x77c));break;}for(;this['pendingMessages'][_0x32c3df(0x303)]>0x0;){await this['setRestartTimeout']();let _0x459ac9=_0x433b4b();if(!_0x459ac9)break;let _0x1004fb=_0x52a20d[_0x32c3df(0x1da)][_0x32c3df(0x756)](_0x30b3c6=>_0x30b3c6[_0x32c3df(0x5da)]===_0x459ac9[_0x32c3df(0x5da)]);if(!_0x1004fb)break;if(this[_0x32c3df(0x921)][_0x32c3df(0x8ac)][_0x32c3df(0x8ed)]=Date[_0x32c3df(0x78f)](),_0x1004fb[_0x32c3df(0x665)]){this[_0x32c3df(0x755)][_0x32c3df(0x8c0)](this[_0x32c3df(0x474)]+'\x20('+this[_0x32c3df(0x921)][_0x32c3df(0x2d1)]+_0x32c3df(0x746)+_0x1004fb[_0x32c3df(0x788)]+_0x32c3df(0x73c)),this[_0x32c3df(0x764)]=this[_0x32c3df(0x764)][_0x32c3df(0x93c)](_0x33f475=>_0x33f475['_id']!==_0x1004fb['_id']);continue;}if(!this[_0x32c3df(0x921)][_0x32c3df(0x8ac)]['isConnected']){this[_0x32c3df(0x755)][_0x32c3df(0x8c0)](this[_0x32c3df(0x474)]+'\x20('+this[_0x32c3df(0x921)]['wuid']+_0x32c3df(0x53a));break;}if(!this[_0x32c3df(0x921)]['ScheduleMessage']['processingGroup']){this[_0x32c3df(0x755)][_0x32c3df(0x8c0)](this[_0x32c3df(0x474)]+'\x20('+this[_0x32c3df(0x921)][_0x32c3df(0x2d1)]+'):\x20Envio\x20para\x20as\x20mensagens\x20de\x20id\x20'+_0x52a20d['_id']+'\x20foi\x20interrompido\x20pelo\x20usuário.');break;}let _0x2c2c47={'idControl':_0x1004fb['_id'],'remoteJid':_0x1004fb[_0x32c3df(0x788)],'error':!0x0,'id':null,'error_log':null,'log_timestamp':Date['now']()},_0x184b5d=null;try{this[_0x32c3df(0x755)][_0x32c3df(0x8c0)](this[_0x32c3df(0x474)]+'\x20('+this['instance']['wuid']+_0x32c3df(0x22b)+_0x1004fb[_0x32c3df(0x788)]);let _0x45a870=await Promise[_0x32c3df(0x1d3)]([this['SendScheduleMessage'](_0x1004fb['remoteJid'],_0x1004fb),this[_0x32c3df(0x282)](0x78*0x3e8)]);_0x2c2c47[_0x32c3df(0x398)]=_0x45a870['error'],_0x2c2c47['id']=_0x45a870[_0x32c3df(0x398)]?null:_0x45a870['id'],_0x2c2c47[_0x32c3df(0x558)]=_0x45a870[_0x32c3df(0x398)]?_0x45a870[_0x32c3df(0x4a8)]?_0x45a870[_0x32c3df(0x4a8)][_0x32c3df(0x641)]():'':null;let _0x3090a9=_0x52a20d[_0x32c3df(0x1da)][_0x32c3df(0x784)](_0x55cc31=>_0x55cc31[_0x32c3df(0x5da)]===_0x1004fb[_0x32c3df(0x5da)]);_0x3090a9!==-0x1&&(_0x52a20d[_0x32c3df(0x1da)][_0x3090a9]['triedToSend']=!0x0);let _0x1a6eba={'$push':{'messagesSend':_0x2c2c47},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x228fbf=[{'elem._id':_0x1004fb[_0x32c3df(0x5da)]}];if(this['logger']['warn'](this['instanceName']+'\x20('+this[_0x32c3df(0x921)][_0x32c3df(0x2d1)]+_0x32c3df(0x478)+_0x1004fb[_0x32c3df(0x5da)]),_0x184b5d=await this[_0x32c3df(0x3cf)]['scheduleMessage'][_0x32c3df(0x66e)]({'_id':_0x52a20d[_0x32c3df(0x5da)]},_0x1a6eba,this[_0x32c3df(0x921)][_0x32c3df(0x2d1)],{'arrayFilters':_0x228fbf}),_0x45a870[_0x32c3df(0x398)]){this[_0x32c3df(0x755)][_0x32c3df(0x398)](this[_0x32c3df(0x474)]+'\x20('+this[_0x32c3df(0x921)][_0x32c3df(0x2d1)]+'):\x20Erro\x20ao\x20enviar\x20mensagem:\x20'+_0x45a870[_0x32c3df(0x4a8)]);continue;}let _0xe204f5=this['getDelay'](_0x52a20d[_0x32c3df(0x565)],_0x52a20d[_0x32c3df(0x7b7)]);await this[_0x32c3df(0x6e7)](_0xe204f5);}catch(_0x1cbff3){this[_0x32c3df(0x755)][_0x32c3df(0x398)](this[_0x32c3df(0x474)]+'\x20('+this[_0x32c3df(0x921)][_0x32c3df(0x2d1)]+_0x32c3df(0x687)+_0x1004fb[_0x32c3df(0x788)]+':\x20'+(_0x1cbff3 instanceof Error?_0x1cbff3['message']:JSON[_0x32c3df(0x28d)](_0x1cbff3,null,0x2))),_0x2c2c47[_0x32c3df(0x398)]=!0x0,_0x2c2c47[_0x32c3df(0x558)]=_0x1cbff3[_0x32c3df(0x6c9)];let _0x3fc6d4=_0x52a20d[_0x32c3df(0x1da)][_0x32c3df(0x784)](_0x36cb35=>_0x36cb35['_id']===_0x1004fb[_0x32c3df(0x5da)]);_0x3fc6d4!==-0x1&&(_0x52a20d['messages'][_0x3fc6d4][_0x32c3df(0x665)]=!0x0);let _0x52e1c7={'$push':{'messagesSend':_0x2c2c47},'$set':{'messages.$[elem].triedToSend':!0x0}},_0x4ecd91=[{'elem._id':_0x1004fb[_0x32c3df(0x5da)]}];this[_0x32c3df(0x755)][_0x32c3df(0x8c0)](this[_0x32c3df(0x474)]+'\x20('+this[_0x32c3df(0x921)][_0x32c3df(0x2d1)]+_0x32c3df(0x782)+_0x1004fb[_0x32c3df(0x5da)]),_0x184b5d=await this['repository'][_0x32c3df(0x2f1)][_0x32c3df(0x66e)]({'_id':_0x52a20d['_id']},_0x52e1c7,this[_0x32c3df(0x921)][_0x32c3df(0x2d1)],{'arrayFilters':_0x4ecd91});}finally{if(_0x184b5d&&_0x184b5d[_0x32c3df(0x781)]===_0x32c3df(0x668)){this[_0x32c3df(0x755)][_0x32c3df(0x8c0)](this['instanceName']+'\x20('+this[_0x32c3df(0x921)][_0x32c3df(0x2d1)]+_0x32c3df(0x73f)+_0x1004fb['_id']+_0x32c3df(0x6f1));break;}let _0x126597=_0x184b5d[_0x32c3df(0x1da)][_0x32c3df(0x756)](_0x308008=>_0x308008[_0x32c3df(0x5da)]===_0x1004fb[_0x32c3df(0x5da)]);if(_0x126597&&!_0x126597['triedToSend']){let _0xf16e74={'$set':{'messages.$[elem].triedToSend':!0x0}},_0x8fb699=[{'elem._id':_0x1004fb[_0x32c3df(0x5da)]}];await this[_0x32c3df(0x3cf)][_0x32c3df(0x2f1)][_0x32c3df(0x66e)]({'_id':_0x184b5d[_0x32c3df(0x5da)]},_0xf16e74,this['instance'][_0x32c3df(0x2d1)],{'arrayFilters':_0x8fb699});}if(this[_0x32c3df(0x764)]=_0x184b5d[_0x32c3df(0x1da)]['filter'](_0x245ec4=>!_0x245ec4[_0x32c3df(0x665)]),!this['instance']['ScheduleMessage'][_0x32c3df(0x6d4)]){await this[_0x32c3df(0x8a0)](),this['logger'][_0x32c3df(0x8c0)](this[_0x32c3df(0x474)]+'\x20('+this[_0x32c3df(0x921)][_0x32c3df(0x2d1)]+_0x32c3df(0x73f)+_0x52a20d[_0x32c3df(0x5da)]+_0x32c3df(0x354));break;}}}this[_0x32c3df(0x764)]=[];let _0x2a1ad9=await this[_0x32c3df(0x3cf)]['scheduleMessage'][_0x32c3df(0x75f)](_0x52a20d[_0x32c3df(0x5da)],this[_0x32c3df(0x921)][_0x32c3df(0x2d1)]);if(_0x2a1ad9[_0x32c3df(0x1da)]['every'](_0x2a4d61=>_0x2a4d61[_0x32c3df(0x665)])&&_0x2a1ad9[_0x32c3df(0x781)]!==_0x32c3df(0x668)){let _0x512504={'$set':{'status':_0x32c3df(0x867)}};await this[_0x32c3df(0x3cf)][_0x32c3df(0x2f1)][_0x32c3df(0x522)](_0x2a1ad9[_0x32c3df(0x5da)],_0x512504,this[_0x32c3df(0x921)][_0x32c3df(0x2d1)]);}await new Promise(_0x4d75ba=>setTimeout(_0x4d75ba,_0x43276e)),global['gc']?global['gc']():console[_0x32c3df(0x8c0)](_0x32c3df(0x392));}}['timeoutPromise'](_0x119d84){const _0x41a175=a0_0x1df5a5;return new Promise((_0x819c0e,_0x4696b6)=>setTimeout(()=>_0x4696b6(new Error(_0x41a175(0x22c))),_0x119d84));}[a0_0x1df5a5(0x742)](_0x2430ca,_0x3b3b2c){const _0x3ce7df=a0_0x1df5a5;return _0x2430ca=Math[_0x3ce7df(0x2e3)](0.5,_0x2430ca),_0x3b3b2c=Math['min'](Math[_0x3ce7df(0x2e3)](0x3,_0x3b3b2c),0x78),Math[_0x3ce7df(0x346)](Math[_0x3ce7df(0x5ba)]()*(_0x3b3b2c-_0x2430ca+0x1)+_0x2430ca)*0x3e8;}[a0_0x1df5a5(0x6e7)](_0x26633e){return new Promise(_0x57aa7e=>setTimeout(_0x57aa7e,_0x26633e));}async['getVariablesChat'](_0x36bccd){const _0x366cb0=a0_0x1df5a5;if(!this['AutomateSystem']&&(await this['getAutomateSystem'](),!this['AutomateSystem']))return null;_0x36bccd=this[_0x366cb0(0x7b3)](_0x36bccd);let _0x4a7b8e=await this[_0x366cb0(0x3cf)][_0x366cb0(0x947)][_0x366cb0(0x694)]({'where':{'_id':_0x36bccd}},this[_0x366cb0(0x921)]['wuid']),_0x263d0e={};if(_0x4a7b8e&&_0x4a7b8e[_0x366cb0(0x57a)]){let _0x4de972=_0x4a7b8e[_0x366cb0(0x57a)];typeof _0x4de972['nome']=='string'&&(_0x263d0e[_0x366cb0(0x7f6)]=_0x4de972['nome']),typeof _0x4de972[_0x366cb0(0x378)]==_0x366cb0(0x1d0)&&(_0x263d0e[_0x366cb0(0x378)]=_0x4de972[_0x366cb0(0x378)]),typeof _0x4de972['email']==_0x366cb0(0x1d0)&&(_0x263d0e[_0x366cb0(0x6bc)]=_0x4de972[_0x366cb0(0x6bc)]),typeof _0x4de972['cpf']==_0x366cb0(0x1d0)&&(_0x263d0e[_0x366cb0(0x635)]=_0x4de972[_0x366cb0(0x635)]),typeof _0x4de972[_0x366cb0(0x781)]==_0x366cb0(0x1d0)&&(_0x263d0e[_0x366cb0(0x781)]=_0x4de972[_0x366cb0(0x781)]),typeof _0x4de972[_0x366cb0(0x5c8)]==_0x366cb0(0x1d0)&&(_0x263d0e[_0x366cb0(0x5c8)]=_0x4de972[_0x366cb0(0x5c8)]),typeof _0x4de972['responsavelid']==_0x366cb0(0x1d0)&&(_0x263d0e[_0x366cb0(0x6b0)]=_0x4de972['responsavelid']),Array[_0x366cb0(0x4d9)](_0x4de972[_0x366cb0(0x291)])&&(_0x263d0e[_0x366cb0(0x291)]=_0x4de972['tags']['join'](',\x20')),Array[_0x366cb0(0x4d9)](_0x4de972[_0x366cb0(0x553)])&&(_0x263d0e[_0x366cb0(0x553)]=_0x4de972[_0x366cb0(0x553)][_0x366cb0(0x4bc)](',\x20'));}return _0x4a7b8e&&_0x4a7b8e['leadInfo']&&_0x4a7b8e[_0x366cb0(0x57a)]['customFields']&&_0x4a7b8e[_0x366cb0(0x57a)][_0x366cb0(0x5ae)][_0x366cb0(0x504)](_0x178507=>{const _0x4a1835=_0x366cb0;let _0x37f02f=this[_0x4a1835(0x48e)]?.['customFields']['find'](_0x1b9e50=>_0x1b9e50[_0x4a1835(0x5da)]===_0x178507[_0x4a1835(0x5da)]);_0x37f02f&&(_0x263d0e[_0x37f02f[_0x4a1835(0x5d3)]]=_0x178507[_0x4a1835(0x732)]);}),_0x263d0e;}async['replaceVariablesChat'](_0x3e738d,_0x312f21){const _0x48f046=a0_0x1df5a5;try{let _0x5becd0=await this[_0x48f046(0x6b2)](_0x312f21);return this[_0x48f046(0x589)](_0x3e738d,_0x5becd0);}catch(_0x1bc993){return this[_0x48f046(0x755)][_0x48f046(0x398)](_0x48f046(0x786)+_0x312f21+':\x20'+_0x1bc993),_0x3e738d;}}async['transformScheduledMessagesByType'](){const _0x21c37c=a0_0x1df5a5;let _0x450bcf=async(_0x2cbfb8,_0x4b15a4)=>{const _0xbf75ce=a0_0x5a64;let _0x53e6cf=(await this[_0xbf75ce(0x3cf)][_0xbf75ce(0x2f1)][_0xbf75ce(0x756)]({'where':{'type':_0x2cbfb8}},this['instance']['wuid']))[_0xbf75ce(0x948)](async _0x393f2c=>{const _0x5ebfdc=_0xbf75ce;let _0x2270b3=_0x4b15a4(_0x393f2c),_0x1664eb=_0x506ffb=>/^\d+$/['test'](_0x506ffb),_0x187822=_0x393f2c[_0x5ebfdc(0x80a)]['filter'](_0x8b924e=>_0x8b924e[_0x5ebfdc(0x237)]('@s.whatsapp.net')?_0x8b924e[_0x5ebfdc(0x303)]>0x19:_0x8b924e[_0x5ebfdc(0x237)](_0x5ebfdc(0x8ca))?_0x8b924e[_0x5ebfdc(0x303)]>0xf:_0x1664eb(_0x8b924e)?_0x8b924e[_0x5ebfdc(0x303)]>=0xb:!0x1)[_0x5ebfdc(0x948)](_0x57512f=>({'_id':(0x0,Q['v4'])(),'idSchedule':_0x393f2c[_0x5ebfdc(0x5da)],'type':_0x2270b3,'remoteJid':_0x57512f,'flow':_0x393f2c[_0x5ebfdc(0x8e2)],'text':_0x393f2c[_0x5ebfdc(0x6c9)]?.['text'],'delay':_0x393f2c[_0x5ebfdc(0x6c9)]?.['delay'],'urlOrBase64':_0x393f2c['message']?.[_0x5ebfdc(0x85f)],'linkPreview':_0x393f2c[_0x5ebfdc(0x6c9)]?.[_0x5ebfdc(0x33d)],'fileName':_0x393f2c[_0x5ebfdc(0x6c9)]?.[_0x5ebfdc(0x616)],'triedToSend':!0x1,'messagesSend':[]}));try{await this[_0x5ebfdc(0x3cf)][_0x5ebfdc(0x2f1)][_0x5ebfdc(0x522)](_0x393f2c['_id'],{'$set':{'messages':_0x187822},'$unset':{'message':'','flowName':'','remoteJids':'','remoteJidsRemaining':'','type':''}},this[_0x5ebfdc(0x921)][_0x5ebfdc(0x2d1)]);}catch(_0x506bd4){console[_0x5ebfdc(0x398)](_0x5ebfdc(0x265)+_0x393f2c[_0x5ebfdc(0x5da)]+':',_0x506bd4);}});await Promise[_0xbf75ce(0x75e)](_0x53e6cf);};await _0x450bcf(_0x21c37c(0x5b9),_0x1fc095=>_0x21c37c(0x5b9)),await _0x450bcf(_0x21c37c(0x516),_0x44ec5a=>_0x44ec5a[_0x21c37c(0x6c9)]?.['mediatype']||'media'),await _0x450bcf(_0x21c37c(0x892),_0x12e11c=>_0x21c37c(0x892)),await _0x450bcf('flow',_0x235a2d=>_0x21c37c(0x461)),await _0x450bcf(_0x21c37c(0x6aa),_0x326a46=>_0x21c37c(0x6aa)),await _0x450bcf(_0x21c37c(0x207),_0x220a6a=>_0x21c37c(0x207)),await _0x450bcf(_0x21c37c(0x288),_0x2fa8bb=>_0x21c37c(0x288)),this[_0x21c37c(0x755)][_0x21c37c(0x8c0)](this[_0x21c37c(0x474)]+'\x20('+this[_0x21c37c(0x921)][_0x21c37c(0x2d1)]+_0x21c37c(0x3aa));}async[a0_0x1df5a5(0x612)](_0x53e01d){const _0x361c98=a0_0x1df5a5;try{if(this[_0x361c98(0x755)][_0x361c98(0x8c0)](this['instanceName']+'\x20('+this[_0x361c98(0x921)][_0x361c98(0x2d1)]+_0x361c98(0x89b)),_0x53e01d[_0x361c98(0x5da)]||(_0x53e01d[_0x361c98(0x5da)]=(0x0,Q['v4'])()),this[_0x361c98(0x921)][_0x361c98(0x8ac)][_0x361c98(0x6d4)]?.[_0x361c98(0x5da)]===_0x53e01d['_id']?.['toString']()){if(_0x53e01d[_0x361c98(0x781)]===_0x361c98(0x668))this['instance']['ScheduleMessage'][_0x361c98(0x6d4)]=null;else throw new Error(_0x361c98(0x45d));}if(_0x53e01d[_0x361c98(0x1be)]&&_0x53e01d['_id']){let _0x52b653=await this[_0x361c98(0x3cf)][_0x361c98(0x2f1)][_0x361c98(0x4c7)](_0x53e01d[_0x361c98(0x5da)],this['instance'][_0x361c98(0x2d1)]);return setTimeout(()=>this[_0x361c98(0x4cd)](),0x7d0),_0x52b653;}let _0x3914f2=null;if(_0x53e01d['_id']&&(_0x3914f2=await this['repository']['scheduleMessage']['findById'](_0x53e01d[_0x361c98(0x5da)],this[_0x361c98(0x921)][_0x361c98(0x2d1)])),_0x3914f2){let {_id:_0x23233b,owner:_0x3e8c7a,messages:_0x2c2d8f,..._0x428370}=_0x53e01d;if(_0x2c2d8f){let _0x5826c0=_0x2c2d8f[_0x361c98(0x93c)](_0x20c5f9=>!_0x20c5f9[_0x361c98(0x5da)]),_0x41d36d=_0x2c2d8f['filter'](_0x40ed88=>_0x40ed88['_id']&&!_0x40ed88[_0x361c98(0x1be)]),_0x2be5b5=_0x2c2d8f[_0x361c98(0x93c)](_0x2283e8=>_0x2283e8['_id']&&_0x2283e8[_0x361c98(0x1be)]);if(_0x5826c0[_0x361c98(0x303)]>0x0&&await this['addMessagesToGroup'](_0x53e01d['_id'],_0x5826c0),_0x41d36d['length']>0x0&&await this[_0x361c98(0x201)]({'_id':_0x53e01d[_0x361c98(0x5da)],'messages':_0x41d36d}),_0x2be5b5[_0x361c98(0x303)]>0x0){let _0x10e5c0=_0x2be5b5[_0x361c98(0x948)](_0x1f2eb6=>({'updateOne':{'filter':{'_id':_0x53e01d[_0x361c98(0x5da)]},'update':{'$pull':{'messages':{'_id':_0x1f2eb6[_0x361c98(0x5da)]}}}}}));await this[_0x361c98(0x3cf)][_0x361c98(0x2f1)]['bulkWrite'](_0x10e5c0,this[_0x361c98(0x921)][_0x361c98(0x2d1)]);}}let _0x494ebd={'$set':{..._0x428370,'status':_0x53e01d[_0x361c98(0x781)]||_0x3914f2[_0x361c98(0x781)]}},_0x2aa3d8=await this[_0x361c98(0x3cf)][_0x361c98(0x2f1)]['updateOneById'](_0x53e01d[_0x361c98(0x5da)],_0x494ebd,this[_0x361c98(0x921)]['wuid']);return _0x2aa3d8&&(this['reorderMessages'](_0x2aa3d8[_0x361c98(0x1da)]),await this[_0x361c98(0x3cf)][_0x361c98(0x2f1)]['updateOneById'](_0x2aa3d8['_id'],{'$set':{'messages':_0x2aa3d8[_0x361c98(0x1da)]}},this[_0x361c98(0x921)]['wuid'])),setTimeout(()=>this['scheduleNextCheck'](),0x7d0),await this[_0x361c98(0x6f3)](),_0x2aa3d8;}else{_0x53e01d[_0x361c98(0x36f)]=this['instance']['wuid'],_0x53e01d[_0x361c98(0x1da)]&&_0x53e01d['messages'][_0x361c98(0x504)](_0x18484b=>{const _0x1368fa=_0x361c98;_0x18484b['_id']||(_0x18484b['_id']=(0x0,Q['v4'])()),_0x18484b['idSchedule']||(_0x18484b[_0x1368fa(0x730)]=_0x53e01d[_0x1368fa(0x5da)]),delete _0x18484b['triedToSend'];});let _0x202ef4=await this[_0x361c98(0x3cf)][_0x361c98(0x2f1)]['createAndSave'](_0x53e01d,this[_0x361c98(0x921)][_0x361c98(0x2d1)]);return _0x202ef4&&(this['reorderMessages'](_0x202ef4[_0x361c98(0x1da)]),await this[_0x361c98(0x3cf)][_0x361c98(0x2f1)][_0x361c98(0x522)](_0x202ef4[_0x361c98(0x5da)],{'$set':{'messages':_0x202ef4[_0x361c98(0x1da)]}},this[_0x361c98(0x921)]['wuid'])),setTimeout(()=>this[_0x361c98(0x4cd)](),0x7d0),_0x202ef4;}}catch(_0x532192){let _0x568630=_0x361c98(0x5b4),_0x16345d=_0x532192 instanceof Error?_0x532192[_0x361c98(0x6c9)]:typeof _0x532192=='object'?JSON[_0x361c98(0x28d)](_0x532192):_0x532192,_0x43bc79=_0x568630+':\x20'+_0x16345d;throw this['logger'][_0x361c98(0x398)](this[_0x361c98(0x474)]+'\x20('+this[_0x361c98(0x921)][_0x361c98(0x2d1)]+'):\x20'+_0x43bc79),new m(_0x43bc79);}}async[a0_0x1df5a5(0x671)](_0xf10f41,_0x3962c8){const _0x57b7b8=a0_0x1df5a5;try{this[_0x57b7b8(0x755)][_0x57b7b8(0x3fb)](this['instanceName']+'\x20('+this[_0x57b7b8(0x921)]['wuid']+_0x57b7b8(0x85c)),_0x3962c8[_0x57b7b8(0x504)](_0x78988a=>{const _0x5c9953=_0x57b7b8;_0x78988a[_0x5c9953(0x5da)]||(_0x78988a['_id']=(0x0,Q['v4'])()),_0x78988a['idSchedule']||(_0x78988a[_0x5c9953(0x730)]=_0xf10f41),delete _0x78988a[_0x5c9953(0x665)];});let _0x41de54={'$push':{'messages':{'$each':_0x3962c8}}},_0x477a12=await this['repository']['scheduleMessage'][_0x57b7b8(0x522)](_0xf10f41,_0x41de54,this[_0x57b7b8(0x921)][_0x57b7b8(0x2d1)]);return _0x477a12&&(this['reorderMessages'](_0x477a12[_0x57b7b8(0x1da)]),await this['repository'][_0x57b7b8(0x2f1)]['updateOneById'](_0x477a12[_0x57b7b8(0x5da)],{'$set':{'messages':_0x477a12[_0x57b7b8(0x1da)]}},this['instance'][_0x57b7b8(0x2d1)])),_0x477a12;}catch(_0x1a83ae){let _0x4314ff=_0x57b7b8(0x8e5),_0x19f9e5=_0x1a83ae instanceof Error?_0x1a83ae[_0x57b7b8(0x6c9)]:typeof _0x1a83ae==_0x57b7b8(0x1b3)?JSON[_0x57b7b8(0x28d)](_0x1a83ae):_0x1a83ae,_0x30701f=_0x4314ff+':\x20'+_0x19f9e5;throw this[_0x57b7b8(0x755)]['error'](this[_0x57b7b8(0x474)]+'\x20('+this['instance'][_0x57b7b8(0x2d1)]+_0x57b7b8(0x91e)+_0x30701f),new m(_0x30701f);}}async[a0_0x1df5a5(0x201)](_0x2cd44f){const _0x562d8f=a0_0x1df5a5;try{if(this['logger']['verbose'](this['instanceName']+'\x20('+this['instance'][_0x562d8f(0x2d1)]+_0x562d8f(0x77a)),!_0x2cd44f[_0x562d8f(0x5da)]||!_0x2cd44f[_0x562d8f(0x1da)])throw new Error(_0x562d8f(0x30b));let _0x5a8261=_0x2cd44f[_0x562d8f(0x5da)],_0x5529ef=_0x2cd44f[_0x562d8f(0x1da)],_0x370c16=_0x5529ef[_0x562d8f(0x93c)](_0x454928=>!_0x454928[_0x562d8f(0x1be)])['map'](_0xf95770=>{const _0xa7c362=_0x562d8f;let _0x34ac07=_0xf95770[_0xa7c362(0x5da)];if(!_0x34ac07)throw new Error('Cada\x20mensagem\x20deve\x20ter\x20um\x20_id\x20para\x20edição.');return _0xf95770['idSchedule']||(_0xf95770[_0xa7c362(0x730)]=_0x5a8261),delete _0xf95770[_0xa7c362(0x665)],{'updateOne':{'filter':{'_id':_0x5a8261,'messages._id':_0x34ac07},'update':{'$set':{'messages.$[elem]':_0xf95770}},'arrayFilters':[{'elem._id':_0x34ac07}]}};}),_0x2e5f10=_0x5529ef[_0x562d8f(0x93c)](_0x334615=>_0x334615[_0x562d8f(0x1be)])[_0x562d8f(0x948)](_0x2d45bd=>{const _0x58202c=_0x562d8f;let _0x27faf3=_0x2d45bd['_id'];if(!_0x27faf3)throw new Error(_0x58202c(0x902));return{'updateOne':{'filter':{'_id':_0x5a8261},'update':{'$pull':{'messages':{'_id':_0x27faf3}}}}};}),_0x17d985=[..._0x370c16,..._0x2e5f10],_0xdde977=await this[_0x562d8f(0x3cf)][_0x562d8f(0x2f1)][_0x562d8f(0x8d1)](_0x17d985,this[_0x562d8f(0x921)]['wuid']),_0x6bc116=await this['repository'][_0x562d8f(0x2f1)]['findById'](_0x5a8261,this['instance'][_0x562d8f(0x2d1)]);return _0x6bc116&&(this[_0x562d8f(0x285)](_0x6bc116[_0x562d8f(0x1da)]),await this['repository'][_0x562d8f(0x2f1)][_0x562d8f(0x522)](_0x6bc116[_0x562d8f(0x5da)],{'$set':{'messages':_0x6bc116['messages']}},this[_0x562d8f(0x921)][_0x562d8f(0x2d1)])),_0x6bc116;}catch(_0x27c9fd){let _0x155c3d=_0x562d8f(0x7a3),_0x360058=_0x27c9fd instanceof Error?_0x27c9fd[_0x562d8f(0x6c9)]:typeof _0x27c9fd==_0x562d8f(0x1b3)?JSON[_0x562d8f(0x28d)](_0x27c9fd):_0x27c9fd,_0x1d3c1e=_0x155c3d+':\x20'+_0x360058;throw this[_0x562d8f(0x755)][_0x562d8f(0x398)](this[_0x562d8f(0x474)]+'\x20('+this[_0x562d8f(0x921)][_0x562d8f(0x2d1)]+_0x562d8f(0x91e)+_0x1d3c1e),new m(_0x1d3c1e);}}async[a0_0x1df5a5(0x433)](){const _0x1ecfd7=a0_0x1df5a5;try{let _0x5370a6={'status':_0x1ecfd7(0x867)},_0x28304f=await this[_0x1ecfd7(0x3cf)][_0x1ecfd7(0x2f1)]['deleteMany'](_0x5370a6,this[_0x1ecfd7(0x921)][_0x1ecfd7(0x2d1)]);if(!_0x28304f['error'])this[_0x1ecfd7(0x755)][_0x1ecfd7(0x3fb)](this[_0x1ecfd7(0x474)]+'\x20('+this['instance']['wuid']+_0x1ecfd7(0x4ea));else throw new Error(_0x28304f[_0x1ecfd7(0x398)][_0x1ecfd7(0x6c9)]||_0x1ecfd7(0x7d2));return this[_0x1ecfd7(0x684)]();}catch(_0x54efca){let _0x5075bc=_0x1ecfd7(0x60c),_0x253582=_0x54efca instanceof Error?_0x54efca['message']:typeof _0x54efca==_0x1ecfd7(0x1b3)?JSON[_0x1ecfd7(0x28d)](_0x54efca):_0x54efca,_0x30420e=_0x5075bc+':\x20'+_0x253582;throw this[_0x1ecfd7(0x755)][_0x1ecfd7(0x398)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x1ecfd7(0x91e)+_0x30420e),new m(_0x30420e);}}async[a0_0x1df5a5(0x684)](){const _0x3e1e44=a0_0x1df5a5;try{return await this[_0x3e1e44(0x3cf)][_0x3e1e44(0x2f1)]['find']({'where':{}},this['instance'][_0x3e1e44(0x2d1)]);}catch(_0x26be5c){let _0xa8acba='Erro\x20ao\x20buscar\x20Schedule\x20Messages',_0x33e0ee=_0x26be5c instanceof Error?_0x26be5c[_0x3e1e44(0x6c9)]:typeof _0x26be5c==_0x3e1e44(0x1b3)?JSON[_0x3e1e44(0x28d)](_0x26be5c):_0x26be5c,_0x40a4b5=_0xa8acba+':\x20'+_0x33e0ee;throw this[_0x3e1e44(0x755)][_0x3e1e44(0x398)](this[_0x3e1e44(0x474)]+'\x20('+this['instance'][_0x3e1e44(0x2d1)]+_0x3e1e44(0x91e)+_0x40a4b5),new m(_0x40a4b5);}}[a0_0x1df5a5(0x285)](_0x5e0be6){const _0x4d9c45=a0_0x1df5a5;_0x5e0be6[_0x4d9c45(0x766)]((_0x5b4ae9,_0x5e9af0)=>_0x5b4ae9['order']-_0x5e9af0[_0x4d9c45(0x751)]),_0x5e0be6[_0x4d9c45(0x504)]((_0x35efa9,_0x346195)=>{const _0x1b45cf=_0x4d9c45;_0x35efa9[_0x1b45cf(0x751)]=_0x346195+0x1;});}async[a0_0x1df5a5(0x636)](_0x1a2d6f,_0x186270){const _0x2e64e2=a0_0x1df5a5;try{if(!_0x186270)return this[_0x2e64e2(0x755)][_0x2e64e2(0x398)](this['instanceName']+'\x20('+this[_0x2e64e2(0x921)][_0x2e64e2(0x2d1)]+_0x2e64e2(0x8d3)),{'error':!0x0,'detail':_0x2e64e2(0x2e0)};if(_0x186270[_0x2e64e2(0x62b)]===_0x2e64e2(0x461)&&!this['AutomateSystem']?.['flowConfig'][_0x2e64e2(0x3eb)])return this[_0x2e64e2(0x755)][_0x2e64e2(0x398)](this[_0x2e64e2(0x474)]+'\x20('+this[_0x2e64e2(0x921)][_0x2e64e2(0x2d1)]+_0x2e64e2(0x795)),{'error':!0x0,'detail':_0x2e64e2(0x7b5)};switch(_0x186270[_0x2e64e2(0x62b)]){case _0x2e64e2(0x5b9):return await this[_0x2e64e2(0x869)](_0x186270,_0x1a2d6f);case _0x2e64e2(0x207):case'image':case _0x2e64e2(0x288):return await this[_0x2e64e2(0x2ed)](_0x186270,_0x1a2d6f);case _0x2e64e2(0x892):return await this[_0x2e64e2(0x8c2)](_0x186270,_0x1a2d6f);case _0x2e64e2(0x461):let _0x217012=new ze();return _0x217012[_0x2e64e2(0x5d3)]=_0x186270[_0x2e64e2(0x461)],_0x217012['remoteJid']=_0x1a2d6f,await this[_0x2e64e2(0x710)](_0x217012);default:return this[_0x2e64e2(0x755)]['error'](this[_0x2e64e2(0x474)]+'\x20('+this[_0x2e64e2(0x921)][_0x2e64e2(0x2d1)]+_0x2e64e2(0x7cf)+_0x186270['type']),{'error':!0x0,'detail':'Comando\x20desconhecido'};}}catch(_0x3fb9c5){return this[_0x2e64e2(0x755)][_0x2e64e2(0x398)](this[_0x2e64e2(0x474)]+'\x20('+this[_0x2e64e2(0x921)][_0x2e64e2(0x2d1)]+'):\x20Erro\x20ao\x20processar\x20a\x20mensagem:\x20'+(_0x3fb9c5 instanceof Error?_0x3fb9c5[_0x2e64e2(0x6c9)]:JSON[_0x2e64e2(0x28d)](_0x3fb9c5,null,0x2))),{'error':!0x0,'detail':_0x3fb9c5['message']};}}async[a0_0x1df5a5(0x869)](_0x122c30,_0x18a40d){const _0x5d0830=a0_0x1df5a5;if(this['logger'][_0x5d0830(0x3fb)](this[_0x5d0830(0x474)]+'\x20('+this['instance'][_0x5d0830(0x2d1)]+_0x5d0830(0x394)+_0x18a40d+'\x27'),!_0x122c30[_0x5d0830(0x5b9)]||_0x122c30['text']['length']===0x0)return{'error':!0x0,'detail':_0x5d0830(0x20c)};let _0x1bd3f7=await this[_0x5d0830(0x835)](_0x122c30[_0x5d0830(0x5b9)],_0x18a40d),_0x58bcd1={'number':_0x18a40d,'options':{'delay':_0x122c30[_0x5d0830(0x38f)],'linkPreview':_0x122c30['linkPreview']},'textMessage':{'text':_0x1bd3f7}},_0x479ab4=null;try{let _0x15762e=await this['textMessage'](_0x58bcd1);if(_0x15762e&&_0x15762e[_0x5d0830(0x781)])return{'error':!0x1,'id':_0x15762e[_0x5d0830(0x440)]['id']};_0x479ab4=JSON[_0x5d0830(0x28d)](_0x15762e),this['logger']['verbose'](this['instanceName']+'\x20('+this[_0x5d0830(0x921)][_0x5d0830(0x2d1)]+_0x5d0830(0x91e)+_0x479ab4);}catch(_0x569277){this[_0x5d0830(0x755)][_0x5d0830(0x398)](this[_0x5d0830(0x474)]+'\x20('+this[_0x5d0830(0x921)][_0x5d0830(0x2d1)]+_0x5d0830(0x8e7)+(_0x569277 instanceof Error?_0x569277['message']:JSON[_0x5d0830(0x28d)](_0x569277,null,0x2))),_0x479ab4=_0x569277['message'];}if(_0x479ab4)return{'error':!0x0,'detail':(typeof _0x479ab4==_0x5d0830(0x1b3)?JSON[_0x5d0830(0x28d)](_0x479ab4,null,0x2):_0x479ab4)[_0x5d0830(0x894)](/[\[\]{}\n]/g,'\x20')[_0x5d0830(0x894)](/  +/g,'\x20')};}async[a0_0x1df5a5(0x2ed)](_0x583ba2,_0x20b44c){const _0x368440=a0_0x1df5a5;this[_0x368440(0x755)][_0x368440(0x3fb)](this[_0x368440(0x474)]+'\x20('+this[_0x368440(0x921)][_0x368440(0x2d1)]+'):\x20\x27Enviando\x20mídia\x20para\x20\x27'+_0x20b44c+'\x27');let _0x59639b;_0x583ba2[_0x368440(0x5b9)]&&_0x583ba2[_0x368440(0x5b9)][_0x368440(0x303)]>0x0&&(_0x59639b=await this['replaceVariablesChat'](_0x583ba2['text'],_0x20b44c));let _0x1b5047={'number':_0x20b44c,'options':{'delay':_0x583ba2[_0x368440(0x38f)],'linkPreview':_0x583ba2[_0x368440(0x33d)]},'mediaMessage':{'mediatype':_0x583ba2[_0x368440(0x62b)],'caption':_0x59639b,'media':_0x583ba2[_0x368440(0x85f)]}},_0x350d0d=null;try{let _0x3e3810=await this[_0x368440(0x269)](_0x1b5047);if(_0x3e3810&&_0x3e3810['status'])return{'error':!0x1,'id':_0x3e3810[_0x368440(0x440)]['id']};_0x350d0d=JSON['stringify'](_0x3e3810),this[_0x368440(0x755)]['verbose'](this['instanceName']+'\x20('+this[_0x368440(0x921)][_0x368440(0x2d1)]+_0x368440(0x91e)+_0x350d0d);}catch(_0xf14e43){this[_0x368440(0x755)][_0x368440(0x398)](this[_0x368440(0x474)]+'\x20('+this[_0x368440(0x921)][_0x368440(0x2d1)]+_0x368440(0x587)+(_0xf14e43 instanceof Error?_0xf14e43[_0x368440(0x6c9)]:JSON[_0x368440(0x28d)](_0xf14e43,null,0x2))),_0x350d0d=_0xf14e43[_0x368440(0x6c9)];}if(_0x350d0d)return{'error':!0x0,'detail':(typeof _0x350d0d==_0x368440(0x1b3)?JSON[_0x368440(0x28d)](_0x350d0d,null,0x2):_0x350d0d)['replace'](/[\[\]{}\n]/g,'\x20')[_0x368440(0x894)](/  +/g,'\x20')};}async[a0_0x1df5a5(0x8c2)](_0x1dfa58,_0xc0fb5){const _0x5559fb=a0_0x1df5a5;this['logger'][_0x5559fb(0x3fb)](this['instanceName']+'\x20('+this[_0x5559fb(0x921)][_0x5559fb(0x2d1)]+'):\x20\x27Enviando\x20audio\x20para\x20\x27'+_0xc0fb5+'\x27');let _0x5bb77f={'number':_0xc0fb5,'options':{'delay':_0x1dfa58[_0x5559fb(0x38f)]},'audioMessage':{'audio':_0x1dfa58[_0x5559fb(0x85f)]}},_0xf4bd1c=null;try{let _0x239a8c=await this['audioWhatsapp'](_0x5bb77f);if(_0x239a8c&&_0x239a8c[_0x5559fb(0x781)])return{'error':!0x1,'id':_0x239a8c[_0x5559fb(0x440)]['id']};_0xf4bd1c=JSON[_0x5559fb(0x28d)](_0x239a8c),this['logger'][_0x5559fb(0x3fb)](this[_0x5559fb(0x474)]+'\x20('+this[_0x5559fb(0x921)][_0x5559fb(0x2d1)]+'):\x20'+_0xf4bd1c);}catch(_0x5de9ff){this[_0x5559fb(0x755)][_0x5559fb(0x398)](this[_0x5559fb(0x474)]+'\x20('+this['instance']['wuid']+_0x5559fb(0x5b3)+(_0x5de9ff instanceof Error?_0x5de9ff[_0x5559fb(0x6c9)]:JSON[_0x5559fb(0x28d)](_0x5de9ff,null,0x2))),_0xf4bd1c=_0x5de9ff[_0x5559fb(0x6c9)];}if(_0xf4bd1c)return{'error':!0x0,'detail':(typeof _0xf4bd1c=='object'?JSON[_0x5559fb(0x28d)](_0xf4bd1c,null,0x2):_0xf4bd1c)[_0x5559fb(0x894)](/[\[\]{}\n]/g,'\x20')[_0x5559fb(0x894)](/  +/g,'\x20')};}async[a0_0x1df5a5(0x6db)](_0x458322){const _0x331e0f=a0_0x1df5a5;try{return await this['client'][_0x331e0f(0x86d)](_0x458322['groupJid'],_0x458322[_0x331e0f(0x8f3)]),{'update':_0x331e0f(0x319)};}catch(_0x29575f){let _0x141d7a=_0x331e0f(0x218),_0x3a452b=_0x29575f instanceof Error?_0x29575f[_0x331e0f(0x6c9)]:typeof _0x29575f==_0x331e0f(0x1b3)?JSON[_0x331e0f(0x28d)](_0x29575f):_0x29575f,_0x575695=_0x141d7a+':\x20'+_0x3a452b;throw this[_0x331e0f(0x755)][_0x331e0f(0x398)](this[_0x331e0f(0x474)]+'\x20('+this[_0x331e0f(0x921)][_0x331e0f(0x2d1)]+'):\x20'+_0x575695),new x(_0x575695);}}async[a0_0x1df5a5(0x1cf)](_0x3208c5){const _0x1124d6=a0_0x1df5a5;try{return await this[_0x1124d6(0x826)][_0x1124d6(0x279)](_0x3208c5[_0x1124d6(0x56b)],_0x3208c5['name']),{'update':_0x1124d6(0x319)};}catch(_0x38662a){let _0x57761a=_0x1124d6(0x515),_0x8beea3=_0x38662a instanceof Error?_0x38662a['message']:typeof _0x38662a==_0x1124d6(0x1b3)?JSON[_0x1124d6(0x28d)](_0x38662a):_0x38662a,_0x16c708=_0x57761a+':\x20'+_0x8beea3;throw this['logger'][_0x1124d6(0x398)](this['instanceName']+'\x20('+this['instance']['wuid']+_0x1124d6(0x91e)+_0x16c708),new x(_0x16c708);}}async[a0_0x1df5a5(0x50d)](_0x563965){const _0x1b8557=a0_0x1df5a5;try{let _0x33d11d=await this[_0x1b8557(0x826)][_0x1b8557(0x542)](_0x563965['groupJid'],_0x563965[_0x1b8557(0x33a)]);return{'success':!0x0};}catch(_0x53488d){let _0x5c4e83=_0x1b8557(0x48f),_0x5a25d0=_0x53488d instanceof Error?_0x53488d[_0x1b8557(0x6c9)]:typeof _0x53488d==_0x1b8557(0x1b3)?JSON[_0x1b8557(0x28d)](_0x53488d):_0x53488d,_0xdc678b=_0x5c4e83+':\x20'+_0x5a25d0;throw this[_0x1b8557(0x755)][_0x1b8557(0x398)](this[_0x1b8557(0x474)]+'\x20('+this['instance'][_0x1b8557(0x2d1)]+_0x1b8557(0x91e)+_0xdc678b),new x(_0xdc678b);}}async[a0_0x1df5a5(0x6c0)](_0xf7a9c8){const _0xd615ce=a0_0x1df5a5;try{return await this[_0xd615ce(0x826)]['groupSettingUpdate'](_0xf7a9c8[_0xd615ce(0x56b)],_0xf7a9c8['setting']),{'update':_0xd615ce(0x319)};}catch(_0x13ceaa){let _0x180e2c=_0xd615ce(0x695),_0x5d0c9e=_0x13ceaa instanceof Error?_0x13ceaa['message']:typeof _0x13ceaa==_0xd615ce(0x1b3)?JSON[_0xd615ce(0x28d)](_0x13ceaa):_0x13ceaa,_0x55222c=_0x180e2c+':\x20'+_0x5d0c9e;throw this[_0xd615ce(0x755)]['error'](this[_0xd615ce(0x474)]+'\x20('+this[_0xd615ce(0x921)]['wuid']+_0xd615ce(0x91e)+_0x55222c),new x(_0x55222c);}}async['updateGroupPicture'](_0x462770){const _0x45daa5=a0_0x1df5a5;try{let _0x4d5c69;if((0x0,J[_0x45daa5(0x6ae)])(_0x462770['image'])){let _0x35531f=new Date()[_0x45daa5(0x6d7)](),_0x233895=_0x462770['image']+_0x45daa5(0x818)+_0x35531f;_0x4d5c69=(await K[_0x45daa5(0x686)][_0x45daa5(0x3be)](_0x233895,{'responseType':_0x45daa5(0x325)}))[_0x45daa5(0x561)];}else{if((0x0,J[_0x45daa5(0x419)])(_0x462770['image']))_0x4d5c69=Buffer[_0x45daa5(0x439)](_0x462770[_0x45daa5(0x6aa)],'base64');else throw new m('\x22profilePicture\x22\x20must\x20be\x20a\x20url\x20or\x20a\x20base64');}return await this[_0x45daa5(0x826)][_0x45daa5(0x2ae)](_0x462770[_0x45daa5(0x56b)],_0x4d5c69),{'update':_0x45daa5(0x319)};}catch(_0x88c90c){let _0x565c98=_0x45daa5(0x3bf),_0x2baa2c=_0x88c90c instanceof Error?_0x88c90c[_0x45daa5(0x6c9)]:typeof _0x88c90c==_0x45daa5(0x1b3)?JSON['stringify'](_0x88c90c):_0x88c90c,_0x464d72=_0x565c98+':\x20'+_0x2baa2c;throw this['logger'][_0x45daa5(0x398)](this[_0x45daa5(0x474)]+'\x20('+this[_0x45daa5(0x921)][_0x45daa5(0x2d1)]+'):\x20'+_0x464d72),new x(_0x464d72);}}},jt=class u{constructor(_0x3b400c,_0x1ff8c9,_0xa78673){const _0x105931=a0_0x1df5a5;this[_0x105931(0x5aa)]=_0x3b400c,this['configService']=_0x1ff8c9,this[_0x105931(0x3cf)]=_0xa78673,this['db']={},this['redis']={},this['logger']=new $(u[_0x105931(0x5d3)]),this[_0x105931(0x8f4)]={},(this[_0x105931(0x57c)](),this[_0x105931(0x1ab)](),Object[_0x105931(0x503)](this['db'],_0x1ff8c9[_0x105931(0x3be)](_0x105931(0x216))),Object[_0x105931(0x503)](this[_0x105931(0x697)],_0x1ff8c9[_0x105931(0x3be)](_0x105931(0x7c6))),this['dbInstance']=this['db']['ENABLED']?this[_0x105931(0x3cf)][_0x105931(0x4c8)]?.['db'](this['db'][_0x105931(0x3b3)][_0x105931(0x389)]+_0x105931(0x84c)):void 0x0,this[_0x105931(0x510)]=this[_0x105931(0x697)][_0x105931(0x765)]?new de(this['redis']):void 0x0);}async[a0_0x1df5a5(0x581)](_0x5a6658){const _0x1e7d73=a0_0x1df5a5;if(_0x5a6658&&!this[_0x1e7d73(0x8f4)][_0x5a6658])throw new U(_0x1e7d73(0x49d)+_0x5a6658+'\x22\x20not\x20found');let _0xbf8f17=[];for await(let [_0x157e7b,_0x23da93]of Object[_0x1e7d73(0x8da)](this[_0x1e7d73(0x8f4)]))if(_0x23da93&&_0x23da93[_0x1e7d73(0x915)][_0x1e7d73(0x85b)]===_0x1e7d73(0x20b)){let _0x8d209b=await this[_0x1e7d73(0x3cf)][_0x1e7d73(0x575)][_0x1e7d73(0x756)](_0x157e7b);_0xbf8f17['push']({'instance':{'instanceName':_0x157e7b,'apikey':_0x8d209b[_0x1e7d73(0x829)],'owner':_0x23da93[_0x1e7d73(0x2d1)],'profileName':await _0x23da93[_0x1e7d73(0x2fe)]()||'not\x20loaded','profilePictureUrl':_0x23da93[_0x1e7d73(0x912)]}});}return _0xbf8f17[_0x1e7d73(0x756)](_0xf8975a=>_0xf8975a[_0x1e7d73(0x921)][_0x1e7d73(0x474)]===_0x5a6658)??_0xbf8f17;}async[a0_0x1df5a5(0x508)](_0x53c8f1){const _0x19c24d=a0_0x1df5a5;if(this['db'][_0x19c24d(0x765)]&&(await this['repository'][_0x19c24d(0x4c8)]['connect'](),(await this[_0x19c24d(0x1dd)][_0x19c24d(0x569)]())['length']>0x0&&await this['dbInstance'][_0x19c24d(0x21c)](_0x53c8f1)),this[_0x19c24d(0x697)]['ENABLED']){this['cache']['reference']=_0x53c8f1,await this[_0x19c24d(0x510)][_0x19c24d(0x373)]();return;}}async[a0_0x1df5a5(0x415)](){const _0x3501a8=a0_0x1df5a5;await this[_0x3501a8(0x7b1)]();let _0x24b4e6=async _0x22506c=>{const _0x57f31d=_0x3501a8;let _0x438399=new Re(this[_0x57f31d(0x4e6)],this['eventEmitter'],this['repository']);_0x438399[_0x57f31d(0x474)]=_0x22506c,await _0x438399[_0x57f31d(0x645)](),this[_0x57f31d(0x8f4)][_0x22506c]=_0x438399;};try{if(this[_0x3501a8(0x697)][_0x3501a8(0x765)]){let _0x74ee68=await this['cache'][_0x3501a8(0x6d8)]();_0x74ee68?.[_0x3501a8(0x303)]>0x0&&_0x74ee68['forEach'](async _0x24199d=>await _0x24b4e6(_0x24199d[_0x3501a8(0x709)](':')[0x1]));return;}if(this['db'][_0x3501a8(0x765)]){await this[_0x3501a8(0x3cf)]['dbServer'][_0x3501a8(0x891)]();let _0x4788a0=await this[_0x3501a8(0x1dd)][_0x3501a8(0x569)]();_0x4788a0[_0x3501a8(0x303)]>0x0&&_0x4788a0[_0x3501a8(0x504)](async _0x130ddd=>await _0x24b4e6(_0x130ddd[_0x3501a8(0x3a6)][_0x3501a8(0x894)](/^[\w-]+\./,'')));return;}}catch(_0x8a1b16){this[_0x3501a8(0x755)][_0x3501a8(0x398)](_0x8a1b16);}}async[a0_0x1df5a5(0x335)](){const _0x45a2b9=a0_0x1df5a5;try{let _0x30a522=await this[_0x45a2b9(0x3cf)][_0x45a2b9(0x575)][_0x45a2b9(0x2a6)]({'online':!0x1});for(let _0x4a8646 of _0x30a522){let _0x4b6644=_0x4a8646['_id'];await we[_0x45a2b9(0x779)](se,_0x4b6644);}console[_0x45a2b9(0x485)](_0x45a2b9(0x3e7)+_0x30a522[_0x45a2b9(0x303)]);let _0x4dd566={'online':!0x1},_0x23cb33=await this['repository'][_0x45a2b9(0x575)][_0x45a2b9(0x315)](_0x4dd566);console['log'](_0x45a2b9(0x6d9)+_0x23cb33[_0x45a2b9(0x39e)]);}catch(_0x13a3eb){console['error'](_0x45a2b9(0x348),_0x13a3eb);}}async['InstancesAlterarTodas'](){const _0x3c7ba1=a0_0x1df5a5;try{let _0x290653={'online':!0x1},_0x530498={'online':!0x1,'lastDisconnect':Date[_0x3c7ba1(0x78f)]()},_0x162867=await this[_0x3c7ba1(0x3cf)]['auth'][_0x3c7ba1(0x336)](_0x290653,_0x530498);await this[_0x3c7ba1(0x335)]();}catch(_0x139a58){console['error'](_0x3c7ba1(0x31d),_0x139a58);}}[a0_0x1df5a5(0x57c)](){const _0x239c50=a0_0x1df5a5;this['eventEmitter']['on'](_0x239c50(0x6f8),async _0x404a81=>{const _0x22cb0e=_0x239c50;try{this['waInstances'][_0x404a81]=void 0x0;}catch{}try{this[_0x22cb0e(0x508)](_0x404a81);}finally{this[_0x22cb0e(0x755)]['warn'](_0x22cb0e(0x49d)+_0x404a81+_0x22cb0e(0x7e6));}});}[a0_0x1df5a5(0x1ab)](){const _0x2d8b63=a0_0x1df5a5;this[_0x2d8b63(0x5aa)]['on'](_0x2d8b63(0x2b1),async _0x4c5fab=>{const _0x4db55f=_0x2d8b63;try{this[_0x4db55f(0x8f4)][_0x4c5fab]=void 0x0;}catch{}try{this[_0x4db55f(0x508)](_0x4c5fab);}finally{this[_0x4db55f(0x755)][_0x4db55f(0x8c0)]('Instance\x20\x22'+_0x4c5fab+_0x4db55f(0x8eb));}});}},Jt=class extends _{[a0_0x1df5a5(0x340)](_0x58420c){return ta(_0x58420c);}async[a0_0x1df5a5(0x2de)](_0x3397ee){const _0x4d911d=a0_0x1df5a5;if(_0x3397ee['length']!==0x0)try{return{'insertCount':(await this[_0x4d911d(0x340)](_0x3397ee[0x0][_0x4d911d(0x36f)])[_0x4d911d(0x293)]([..._0x3397ee]))[_0x4d911d(0x303)]};}catch(_0x18e447){return _0x18e447;}}async[a0_0x1df5a5(0x756)](_0x24b5ad,_0x512030){const _0xc7cd1=a0_0x1df5a5;try{let _0x7ca820=this[_0xc7cd1(0x340)](_0x512030),_0x18599e=A(_0x24b5ad[_0xc7cd1(0x7e5)]);return await _0x7ca820[_0xc7cd1(0x756)](_0x18599e)[_0xc7cd1(0x766)]({'lastmsg':-0x1})['limit'](_0x24b5ad?.['limit']??0x0)[_0xc7cd1(0x489)]();}catch{return[];}}async[a0_0x1df5a5(0x4ca)](_0x255ee4,_0x343874){const _0x12cfde=a0_0x1df5a5;try{let _0xc25a9=this['getChatModelForOwner'](_0x343874),_0x32e8ad=A(_0x255ee4[_0x12cfde(0x7e5)]);return _0x32e8ad[_0x12cfde(0x65c)]={'$ne':[]},await _0xc25a9[_0x12cfde(0x756)](_0x32e8ad)[_0x12cfde(0x766)]({'lastmsg':-0x1})[_0x12cfde(0x8e1)](_0x255ee4?.[_0x12cfde(0x8e1)]??0x0)[_0x12cfde(0x489)]();}catch{return[];}}async[a0_0x1df5a5(0x1be)](_0x3a3bfc,_0x2bd619){const _0x157564=a0_0x1df5a5;try{return{'deletedCount':(await this[_0x157564(0x340)](_0x2bd619)[_0x157564(0x315)]({..._0x3a3bfc[_0x157564(0x7e5)]}))[_0x157564(0x408)]};}catch(_0x10f9b5){return{'error':_0x10f9b5?.[_0x157564(0x641)]()};}}async[a0_0x1df5a5(0x73b)](_0x104d76,_0x56b0fd){const _0x205846=a0_0x1df5a5;try{return await this[_0x205846(0x340)](_0x56b0fd)[_0x205846(0x315)]({..._0x104d76['where']}),[];}catch(_0x2a4c6f){return{'error':_0x2a4c6f?.[_0x205846(0x641)]()};}}async[a0_0x1df5a5(0x694)](_0x5df9f5,_0x5dc0b2){const _0x2f7cf5=a0_0x1df5a5;try{let _0x5371e0=this[_0x2f7cf5(0x340)](_0x5dc0b2),_0x100481=A(_0x5df9f5[_0x2f7cf5(0x7e5)]);return await _0x5371e0['findOne'](_0x100481)[_0x2f7cf5(0x489)]();}catch{return null;}}async[a0_0x1df5a5(0x66e)](_0xa7240,_0x3e404f,_0x4859d8,_0x231847,_0x4ac5b5=a0_0x1df5a5(0x592)){const _0x2a1662=a0_0x1df5a5;try{let _0x6cc64e={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x231847},_0x4a0a74=this[_0x2a1662(0x340)](_0x4859d8),_0x122155=A(_0xa7240['where']);Object[_0x2a1662(0x326)](_0x3e404f)[_0x2a1662(0x504)](_0x28369d=>{_0x3e404f[_0x28369d]==null&&delete _0x3e404f[_0x28369d];});let _0x47bf21={};return _0x47bf21[_0x4ac5b5]=_0x3e404f,await _0x4a0a74['findOneAndUpdate'](_0x122155,_0x47bf21,_0x6cc64e);}catch(_0x8f550c){return console[_0x2a1662(0x398)](_0x8f550c),null;}}async['updateMany'](_0x2d049d){const _0x234fce=a0_0x1df5a5;try{let _0x1c3c99=this[_0x234fce(0x340)](_0x2d049d[0x0][_0x234fce(0x896)][_0x234fce(0x7e5)][_0x234fce(0x36f)]),_0x5dc893=_0x2d049d[_0x234fce(0x948)](_0x530290=>({'updateOne':{'filter':{..._0x530290[_0x234fce(0x896)][_0x234fce(0x7e5)]},'update':{'$set':_0x530290[_0x234fce(0x62e)]},'upsert':!0x0}})),_0x5bd434=await _0x1c3c99[_0x234fce(0x8d1)](_0x5dc893);return _0x5bd434[_0x234fce(0x273)]+_0x5bd434[_0x234fce(0x793)];}catch(_0x68b19b){return console[_0x234fce(0x398)](_0x68b19b),0x0;}}async[a0_0x1df5a5(0x7f8)](_0x64f3ef){const _0x445057=a0_0x1df5a5;try{let _0x9b3d7={'group_isCommunity':'','group_announce':'','group_size':''},_0x59a4c4={'$or':[{'group_isCommunity':{'$exists':!0x0}},{'group_announce':{'$exists':!0x0}},{'group_size':{'$exists':!0x0}}]},_0x3d36fe={'$unset':_0x9b3d7};return(await this[_0x445057(0x340)](_0x64f3ef)[_0x445057(0x51a)](_0x59a4c4,_0x3d36fe))[_0x445057(0x273)];}catch(_0x3ef9b9){return console[_0x445057(0x398)]('Error\x20removing\x20unused\x20chat\x20fields:',_0x3ef9b9),0x0;}}async[a0_0x1df5a5(0x35d)](_0x1d67ad){const _0x17c4be=a0_0x1df5a5;try{let _0x5427bd=this[_0x17c4be(0x340)](_0x1d67ad),_0x5e9954={'leadInfo.etiquetas':{'$exists':!0x1}},_0x41486b={'$set':{'leadInfo.etiquetas':[]}};return(await _0x5427bd[_0x17c4be(0x51a)](_0x5e9954,_0x41486b))[_0x17c4be(0x273)];}catch(_0x31f2ef){return console[_0x17c4be(0x398)](_0x31f2ef),0x0;}}async[a0_0x1df5a5(0x70b)](_0x1160ce){const _0x18e81a=a0_0x1df5a5;try{let _0x475aef=this[_0x18e81a(0x340)](_0x1160ce),_0xf0a3c0={'leadInfo.tags':{'$exists':!0x1}},_0x435c28={'$set':{'leadInfo.tags':[]}};return(await _0x475aef['updateMany'](_0xf0a3c0,_0x435c28))[_0x18e81a(0x273)];}catch(_0x4dbe9e){return console[_0x18e81a(0x398)](_0x4dbe9e),0x0;}}async[a0_0x1df5a5(0x5f9)](_0x141eec){const _0x1c1f0d=a0_0x1df5a5;try{let _0x26d653=this[_0x1c1f0d(0x340)](_0x141eec),_0x534c27={'leadInfo.customFields':{'$exists':!0x1}},_0x4f473d={'$set':{'leadInfo.customFields':[]}};return(await _0x26d653[_0x1c1f0d(0x51a)](_0x534c27,_0x4f473d))['modifiedCount'];}catch(_0xf49d19){return console['error'](_0xf49d19),0x0;}}async[a0_0x1df5a5(0x293)](_0x5b6350,_0x3d4555){const _0x2f6bb6=a0_0x1df5a5;if(!Array[_0x2f6bb6(0x4d9)](_0x5b6350)||_0x5b6350['length']===0x0)throw new Error(_0x2f6bb6(0x309));try{return(await this[_0x2f6bb6(0x340)](_0x3d4555)[_0x2f6bb6(0x293)](_0x5b6350))['length'];}catch(_0x107117){throw console['error'](_0x2f6bb6(0x36a),_0x107117),_0x107117;}}async['deleteChat'](_0x46b140,_0xe63c8d){const _0x1115ad=a0_0x1df5a5;try{await this[_0x1115ad(0x340)](_0xe63c8d)[_0x1115ad(0x4c7)]({'_id':_0x46b140});}catch(_0x4fc3d7){throw console[_0x1115ad(0x398)]('Erro\x20ao\x20deletar\x20chat:',_0x4fc3d7),_0x4fc3d7;}}},qt=class extends _{constructor(_0x5f5bd3,_0x4df37c,_0x307641){const _0x6b638e=a0_0x1df5a5;super(_0x4df37c),this[_0x6b638e(0x7ae)]=_0x5f5bd3,this['configService']=_0x4df37c,this[_0x6b638e(0x232)]=_0x307641;}async[a0_0x1df5a5(0x2de)](_0x24b62){const _0x371ee2=a0_0x1df5a5;if(_0x24b62[_0x371ee2(0x303)]!==0x0)try{return{'insertCount':(await this[_0x371ee2(0x7ae)][_0x371ee2(0x293)]([..._0x24b62]))[_0x371ee2(0x303)]};}catch(_0x3030ba){return _0x3030ba;}}async[a0_0x1df5a5(0x62e)](_0x314f3a,_0x37a626){const _0x2e7d2c=a0_0x1df5a5;try{let _0x922e27=A(_0x314f3a[_0x2e7d2c(0x7e5)]);return{'updatedCount':(await this[_0x2e7d2c(0x7ae)][_0x2e7d2c(0x51a)](_0x922e27,{'$set':_0x37a626}))['modifiedCount']};}catch(_0x2d9d01){return console[_0x2e7d2c(0x398)](_0x2e7d2c(0x871),_0x2d9d01),{'error':_0x2d9d01[_0x2e7d2c(0x641)]()};}}async[a0_0x1df5a5(0x652)](_0x1e5317){const _0x2b0c44=a0_0x1df5a5;try{let _0x5893d4={'_id':{'$in':_0x1e5317}};return await this[_0x2b0c44(0x7ae)][_0x2b0c44(0x756)](_0x5893d4)['lean']();}catch(_0x1955c2){return console[_0x2b0c44(0x398)](_0x2b0c44(0x353),_0x1955c2),[];}}async['delete'](_0x5744b9){const _0x2c82b7=a0_0x1df5a5;try{return{'deletedCount':(await this[_0x2c82b7(0x7ae)][_0x2c82b7(0x315)]({..._0x5744b9[_0x2c82b7(0x7e5)]}))[_0x2c82b7(0x408)]};}catch(_0x39123d){return{'error':_0x39123d?.[_0x2c82b7(0x641)]()};}}async[a0_0x1df5a5(0x756)](_0x1d0938){const _0xd24ab9=a0_0x1df5a5;try{let _0x5f0035=A(_0x1d0938[_0xd24ab9(0x7e5)]);return await this[_0xd24ab9(0x7ae)]['find'](_0x5f0035)[_0xd24ab9(0x8e1)](_0x1d0938?.[_0xd24ab9(0x8e1)]??0x0)[_0xd24ab9(0x489)]();}catch{return[];}}async[a0_0x1df5a5(0x694)](_0x395e7e){const _0x1945ba=a0_0x1df5a5;try{let _0x4bfa1d=A(_0x395e7e[_0x1945ba(0x7e5)]);return await this[_0x1945ba(0x7ae)][_0x1945ba(0x694)](_0x4bfa1d)['lean']();}catch{return null;}}},Vt=class extends _{constructor(_0x31d2fc,_0x305eb1,_0xec8cc9){const _0x58c15c=a0_0x1df5a5;super(_0x305eb1),this['messageLogsModel']=_0x31d2fc,this[_0x58c15c(0x4e6)]=_0x305eb1,this[_0x58c15c(0x232)]=_0xec8cc9;}async[a0_0x1df5a5(0x2de)](_0xed2feb){const _0x148001=a0_0x1df5a5;if(_0xed2feb[_0x148001(0x303)]!==0x0)try{return{'insertCount':(await this[_0x148001(0x58f)][_0x148001(0x293)]([..._0xed2feb]))[_0x148001(0x303)]};}catch(_0x2e9691){return _0x2e9691;}}async[a0_0x1df5a5(0x62e)](_0x857b87,_0x63f9b6){const _0x3580fb=a0_0x1df5a5;try{let _0x45cccf=A(_0x857b87[_0x3580fb(0x7e5)]);return{'updatedCount':(await this[_0x3580fb(0x58f)][_0x3580fb(0x51a)](_0x45cccf,{'$set':_0x63f9b6}))['modifiedCount']};}catch(_0x516995){return console['error']('Error\x20updating\x20cache\x20contact:',_0x516995),{'error':_0x516995[_0x3580fb(0x641)]()};}}async[a0_0x1df5a5(0x1be)](_0x5984a8){const _0xc8bf5d=a0_0x1df5a5;try{return{'deletedCount':(await this[_0xc8bf5d(0x58f)][_0xc8bf5d(0x315)]({..._0x5984a8['where']}))[_0xc8bf5d(0x408)]};}catch(_0x53c96d){return{'error':_0x53c96d?.[_0xc8bf5d(0x641)]()};}}async[a0_0x1df5a5(0x694)](_0x244e7b){const _0xd636f3=a0_0x1df5a5;try{let _0x5eb553=A(_0x244e7b['where']);return await this[_0xd636f3(0x58f)][_0xd636f3(0x694)](_0x5eb553)['lean']();}catch{return null;}}},Gt=class extends _{[a0_0x1df5a5(0x4c2)](_0x545c69){return va(_0x545c69);}async[a0_0x1df5a5(0x66e)](_0x2a8bb5,_0xad8f53,_0x36f703,_0x5dd730){const _0x21b5b4=a0_0x1df5a5;try{let _0x1295f7={...{'new':!0x0,'upsert':!0x0,'lean':!0x0},..._0x5dd730},_0x4aa404=this[_0x21b5b4(0x4c2)](_0x36f703),_0x2e5124=A(_0x2a8bb5['where']);return await _0x4aa404[_0x21b5b4(0x600)](_0x2e5124,{'$set':_0xad8f53},_0x1295f7);}catch(_0x4a61a0){return console[_0x21b5b4(0x398)](_0x4a61a0),null;}}async[a0_0x1df5a5(0x756)](_0xc758f2,_0x14b376){const _0x1cb1c7=a0_0x1df5a5;try{let _0x22176a=this['getLabelModelForOwner'](_0x14b376),_0x21d714=A(_0xc758f2[_0x1cb1c7(0x7e5)]);return await _0x22176a[_0x1cb1c7(0x756)](_0x21d714);}catch(_0x5c25be){console[_0x1cb1c7(0x398)](_0x5c25be);}}async[a0_0x1df5a5(0x1be)](_0x3da636,_0x2355af){const _0xe778cb=a0_0x1df5a5;try{let _0x1bdc6b=this[_0xe778cb(0x4c2)](_0x2355af),_0x4418f3=A(_0x3da636['where']);await _0x1bdc6b[_0xe778cb(0x315)](_0x4418f3);}catch(_0x20804a){console[_0xe778cb(0x398)](_0x20804a);}}async[a0_0x1df5a5(0x73b)](_0x330ebb){const _0x58cd94=a0_0x1df5a5;try{return await this[_0x58cd94(0x4c2)](_0x330ebb)[_0x58cd94(0x8dd)][_0x58cd94(0x552)](),{'success':!0x0};}catch(_0x34b321){return console['error'](_0x34b321),{'success':!0x1,'error':_0x34b321};}}},Bt=class{constructor(_0x18f5ae){const _0x481f38=a0_0x1df5a5;this[_0x481f38(0x4f8)]=_0x18f5ae;}async['editChat']({instanceName:_0x58faa0},_0x390de5){const _0x64077b=a0_0x1df5a5;return await this[_0x64077b(0x4f8)][_0x64077b(0x8f4)][_0x58faa0][_0x64077b(0x505)](_0x390de5);}async[a0_0x1df5a5(0x493)]({instanceName:_0x27853d},_0x1857b7){const _0x3b9d45=a0_0x1df5a5;return await this[_0x3b9d45(0x4f8)]['waInstances'][_0x27853d][_0x3b9d45(0x493)](_0x1857b7);}async[a0_0x1df5a5(0x655)]({instanceName:_0x3321d8},_0x53f633){const _0x78aead=a0_0x1df5a5;return await this[_0x78aead(0x4f8)][_0x78aead(0x8f4)][_0x3321d8][_0x78aead(0x655)](_0x53f633);}async[a0_0x1df5a5(0x500)]({instanceName:_0x123a70},_0x34a102){const _0x4d5201=a0_0x1df5a5;return await this[_0x4d5201(0x4f8)][_0x4d5201(0x8f4)][_0x123a70][_0x4d5201(0x8e6)](_0x34a102);}async[a0_0x1df5a5(0x754)]({instanceName:_0x5e18d0},_0x47b2a2){const _0x30d912=a0_0x1df5a5;return await this[_0x30d912(0x4f8)]['waInstances'][_0x5e18d0][_0x30d912(0x754)](_0x47b2a2);}async[a0_0x1df5a5(0x56f)]({instanceName:_0x3ba1c5},_0x4cfab9){const _0x122e8d=a0_0x1df5a5;return await this[_0x122e8d(0x4f8)][_0x122e8d(0x8f4)][_0x3ba1c5]['deleteMessage'](_0x4cfab9);}async['fetchProfilePicture']({instanceName:_0x240a6d},_0x35e097){const _0x2bd4ec=a0_0x1df5a5;return await this['waMonitor'][_0x2bd4ec(0x8f4)][_0x240a6d][_0x2bd4ec(0x8e9)](_0x35e097[_0x2bd4ec(0x737)]);}async[a0_0x1df5a5(0x3d4)]({instanceName:_0x2eee67},_0x1edbaf){const _0x35580e=a0_0x1df5a5;return await this['waMonitor'][_0x35580e(0x8f4)][_0x2eee67][_0x35580e(0x3d4)](_0x1edbaf[_0x35580e(0x737)]);}async[a0_0x1df5a5(0x7ef)]({instanceName:_0x25bdfa},_0x15b54f){const _0x3d187d=a0_0x1df5a5;return await this[_0x3d187d(0x4f8)][_0x3d187d(0x8f4)][_0x25bdfa]['updatePresence'](_0x15b54f);}async[a0_0x1df5a5(0x58c)]({instanceName:_0x3bc811},_0x49ddbc){const _0x3f772d=a0_0x1df5a5;return await this['waMonitor'][_0x3f772d(0x8f4)][_0x3bc811][_0x3f772d(0x58c)](_0x49ddbc);}async[a0_0x1df5a5(0x32f)]({instanceName:_0xd86873},_0x392f2d){const _0x474682=a0_0x1df5a5;return await this['waMonitor'][_0x474682(0x8f4)][_0xd86873][_0x474682(0x32f)](_0x392f2d);}async[a0_0x1df5a5(0x610)]({instanceName:_0x590261},_0xb1eb8a){const _0x9faf20=a0_0x1df5a5;return await this[_0x9faf20(0x4f8)]['waInstances'][_0x590261][_0x9faf20(0x610)](_0xb1eb8a);}async[a0_0x1df5a5(0x3b8)]({instanceName:_0x5e69e5}){const _0x32ddc4=a0_0x1df5a5;return await this[_0x32ddc4(0x4f8)][_0x32ddc4(0x8f4)][_0x5e69e5][_0x32ddc4(0x3b8)]();}async[a0_0x1df5a5(0x940)]({instanceName:_0xcd3b81}){const _0x1c4309=a0_0x1df5a5;return await this['waMonitor'][_0x1c4309(0x8f4)][_0xcd3b81][_0x1c4309(0x940)]();}async[a0_0x1df5a5(0x537)]({instanceName:_0x5414c9}){const _0x464fd5=a0_0x1df5a5;return await this[_0x464fd5(0x4f8)]['waInstances'][_0x5414c9][_0x464fd5(0x537)]();}async[a0_0x1df5a5(0x7fb)]({instanceName:_0x4e5701},_0x3ac89a){const _0x4caeb4=a0_0x1df5a5;return await this['waMonitor'][_0x4caeb4(0x8f4)][_0x4e5701][_0x4caeb4(0x7fb)](_0x3ac89a);}async[a0_0x1df5a5(0x2a8)]({instanceName:_0x1ff627},_0x212d8a){const _0x2fbabc=a0_0x1df5a5;return await this['waMonitor'][_0x2fbabc(0x8f4)][_0x1ff627][_0x2fbabc(0x2a8)](_0x212d8a['number']);}async['updateProfileName']({instanceName:_0x36273a},_0x3904e5){const _0x1e690c=a0_0x1df5a5;return await this[_0x1e690c(0x4f8)][_0x1e690c(0x8f4)][_0x36273a][_0x1e690c(0x8b7)](_0x3904e5[_0x1e690c(0x5d3)]);}async[a0_0x1df5a5(0x429)]({instanceName:_0x288a72},_0x273401){const _0x990ac9=a0_0x1df5a5;return await this[_0x990ac9(0x4f8)]['waInstances'][_0x288a72][_0x990ac9(0x429)](_0x273401[_0x990ac9(0x781)]);}async[a0_0x1df5a5(0x2ae)]({instanceName:_0xc1a9e3},_0x12412a){const _0x55e5b5=a0_0x1df5a5;return await this[_0x55e5b5(0x4f8)][_0x55e5b5(0x8f4)][_0xc1a9e3][_0x55e5b5(0x2ae)](_0x12412a[_0x55e5b5(0x3ad)]);}async[a0_0x1df5a5(0x471)]({instanceName:_0x260de2},_0x550b46){const _0x46b943=a0_0x1df5a5;return await this[_0x46b943(0x4f8)]['waInstances'][_0x260de2][_0x46b943(0x471)]();}},Wt=require(a0_0x1df5a5(0x7d3)),zt=class u{constructor(_0x444b2f,_0x4bfa43,_0x2f95ff,_0x19d8c1,_0x3767ce){const _0x4a4f32=a0_0x1df5a5;this[_0x4a4f32(0x4f8)]=_0x444b2f,this[_0x4a4f32(0x4e6)]=_0x4bfa43,this[_0x4a4f32(0x3cf)]=_0x2f95ff,this['eventEmitter']=_0x19d8c1,this[_0x4a4f32(0x67d)]=_0x3767ce,this[_0x4a4f32(0x755)]=new $(u[_0x4a4f32(0x5d3)]);}async[a0_0x1df5a5(0x5c7)]({instanceName:_0x1be2f8,apikey:_0x200d8c,number:_0x4bd245,proxy:_0x58d192=!0x0}){const _0x40ef80=a0_0x1df5a5;try{let _0x1a0c5f=new Re(this[_0x40ef80(0x4e6)],this[_0x40ef80(0x5aa)],this['repository']);_0x1a0c5f[_0x40ef80(0x474)]=_0x1be2f8,this[_0x40ef80(0x4f8)][_0x40ef80(0x8f4)][_0x1a0c5f[_0x40ef80(0x474)]]=_0x1a0c5f;let _0x5e6261={};_0x200d8c?(await this[_0x40ef80(0x3cf)]['auth'][_0x40ef80(0x38e)]({'apikey':_0x200d8c},_0x1be2f8),_0x5e6261[_0x40ef80(0x829)]=_0x200d8c):_0x5e6261=await this['authService'][_0x40ef80(0x2e1)]({'instanceName':_0x1a0c5f[_0x40ef80(0x474)]});let _0x5be8de;if(_0x4bd245){if(_0x5be8de=await this[_0x40ef80(0x68a)](_0x4bd245),_0x5be8de[_0x40ef80(0x398)])throw new x(_0x5be8de['error'][_0x40ef80(0x641)]());_0x4bd245=_0x5be8de[_0x40ef80(0x737)];}let _0x1c3d67;return await _0x1a0c5f['connectToWhatsapp'](_0x4bd245),await(0x0,Wt[_0x40ef80(0x38f)])(0xfa0),_0x4bd245&&await(0x0,Wt[_0x40ef80(0x38f)])(0xbb8),_0x1c3d67=_0x1a0c5f[_0x40ef80(0x3b1)],{'instance':{'instanceName':_0x1a0c5f[_0x40ef80(0x474)],'status':_0x40ef80(0x55b)},'hash':_0x5e6261,'qrcode':_0x1c3d67};}catch(_0x7e0903){throw this['logger'][_0x40ef80(0x398)](_0x7e0903),_0x7e0903;}}async[a0_0x1df5a5(0x2e9)]({instanceName:_0x1cd457,number:_0x3cb92a=null}){const _0x17460e=a0_0x1df5a5;try{let _0x2b70b5=this['waMonitor']['waInstances'][_0x1cd457];switch(_0x2b70b5?.['connectionStatus']?.['state']){case _0x17460e(0x261):return await _0x2b70b5[_0x17460e(0x645)](_0x3cb92a),await(0x0,Wt['delay'])(0x7d0),_0x2b70b5[_0x17460e(0x3b1)];case _0x17460e(0x6af):return _0x2b70b5['qrCode'];default:return await this['connectionState']({'instanceName':_0x1cd457});}}catch(_0x44d820){this[_0x17460e(0x755)][_0x17460e(0x485)](_0x44d820);}}async[a0_0x1df5a5(0x8af)]({instanceName:_0x3881f5}){const _0x477aab=a0_0x1df5a5;let _0x5b7f04=this[_0x477aab(0x4f8)]['waInstances'][_0x3881f5][_0x477aab(0x915)],_0x1aa2ae=null;_0x5b7f04[_0x477aab(0x85b)]===_0x477aab(0x20b)&&_0x3881f5&&(_0x1aa2ae=await this[_0x477aab(0x4f8)][_0x477aab(0x581)](_0x3881f5));let _0x5a663c=null;return _0x5b7f04[_0x477aab(0x85b)]==='connecting'&&_0x3881f5&&(_0x5a663c=this[_0x477aab(0x4f8)][_0x477aab(0x8f4)][_0x3881f5][_0x477aab(0x3b1)]),{'instance':_0x3881f5,'connectionStatus':_0x5b7f04,'instanceInfo':_0x1aa2ae,'qrcode':_0x5a663c};}async[a0_0x1df5a5(0x68a)](_0x40b3ba){const _0x4f0287=a0_0x1df5a5;_0x40b3ba=_0x40b3ba[_0x4f0287(0x894)](/\D/g,'');let _0x45a19b=Object[_0x4f0287(0x326)](this['waMonitor'][_0x4f0287(0x8f4)])[_0x4f0287(0x93c)](_0x1a77ab=>{const _0x3a80a7=_0x4f0287;let _0x172562=this[_0x3a80a7(0x4f8)][_0x3a80a7(0x8f4)][_0x1a77ab];return _0x172562&&_0x172562[_0x3a80a7(0x915)]&&_0x172562['connectionStatus']['state']===_0x3a80a7(0x20b);});if(_0x45a19b[_0x4f0287(0x303)]===0x0)return{'number':this[_0x4f0287(0x451)](_0x40b3ba)};let _0x8ff26c=Math[_0x4f0287(0x346)](Math['random']()*_0x45a19b['length']),_0x4da065=_0x45a19b[_0x8ff26c];try{let _0x3ce469=(await this[_0x4f0287(0x4f8)][_0x4f0287(0x8f4)][_0x4da065][_0x4f0287(0x493)]({'numbers':[_0x40b3ba]}))['shift']();return _0x3ce469[_0x4f0287(0x3bc)]?{'number':_0x3ce469[_0x4f0287(0x83f)][_0x4f0287(0x894)](_0x4f0287(0x2d9),'')}:{'number':_0x40b3ba,'error':'Número\x20não\x20possui\x20WhatsApp.'};}catch(_0x17d910){return this[_0x4f0287(0x755)][_0x4f0287(0x398)](_0x4f0287(0x5d4)+_0x17d910),{'number':_0x40b3ba,'error':_0x4f0287(0x65f)};}}[a0_0x1df5a5(0x451)](_0x3fdc65){let _0x4c4a8e=new RegExp(/^(\d{2})(\d{2})(9?)(\d{8})$/)['exec'](_0x3fdc65);if(_0x4c4a8e&&_0x4c4a8e[0x1]==='55'){let _0x1c5aa0=_0x4c4a8e[0x2],_0xb0af67=_0x4c4a8e[0x3],_0x20f22d=_0x4c4a8e[0x4];if(parseInt(_0x1c5aa0)>=0x1f&&_0xb0af67==='9')return _0x4c4a8e[0x1]+_0x1c5aa0+_0x20f22d;}return _0x3fdc65;}async[a0_0x1df5a5(0x945)]({instanceName:_0x598dce}){const _0x24af5e=a0_0x1df5a5;try{return this['waMonitor'][_0x24af5e(0x8f4)][_0x598dce]?.[_0x24af5e(0x826)]?.['ws']?.[_0x24af5e(0x261)](),{'status':_0x24af5e(0x8b3),'error':!0x1,'response':{'message':_0x24af5e(0x3fc)}};}catch(_0x18ccf1){this[_0x24af5e(0x755)]['error'](_0x18ccf1);}}async[a0_0x1df5a5(0x7a8)]({instanceName:_0x69d72c}){const _0x4c2af3=a0_0x1df5a5;return _0x69d72c?this['waMonitor'][_0x4c2af3(0x581)](_0x69d72c):this[_0x4c2af3(0x4f8)][_0x4c2af3(0x581)]();}async['logout']({instanceName:_0x1b7dee}){const _0x373382=a0_0x1df5a5;try{return await this[_0x373382(0x4f8)][_0x373382(0x8f4)][_0x1b7dee]?.[_0x373382(0x826)]?.[_0x373382(0x868)]('Log\x20out\x20instance:\x20'+_0x1b7dee),{'error':!0x1,'message':_0x373382(0x862)};}catch(_0x479af3){throw new x(_0x479af3[_0x373382(0x641)]());}}async['deleteInstance']({instanceName:_0x54e73f}){const _0x4f3158=a0_0x1df5a5;if((await this['connectionState']({'instanceName':_0x54e73f}))[_0x4f3158(0x915)][_0x4f3158(0x85b)]===_0x4f3158(0x20b))throw new m(['Deletion\x20failed',_0x4f3158(0x8ae)]);try{return delete this[_0x4f3158(0x4f8)]['waInstances'][_0x54e73f],{'error':!0x1,'message':'Instance\x20deleted'};}catch(_0x1d94c9){throw new m(_0x1d94c9[_0x4f3158(0x641)]());}}},ne=require(a0_0x1df5a5(0x345)),Ht=class{constructor(_0x107da6){const _0x126d7e=a0_0x1df5a5;this[_0x126d7e(0x4f8)]=_0x107da6;}async[a0_0x1df5a5(0x924)]({instanceName:_0x2af763},_0x12d78c){const _0x44b48d=a0_0x1df5a5;return await this[_0x44b48d(0x4f8)][_0x44b48d(0x8f4)][_0x2af763]['textMessage'](_0x12d78c);}async[a0_0x1df5a5(0x28a)]({instanceName:_0x1058ad},_0xd7f209){const _0x30c02c=a0_0x1df5a5;return await this[_0x30c02c(0x4f8)][_0x30c02c(0x8f4)][_0x1058ad][_0x30c02c(0x1ec)](_0xd7f209);}async['sendMedia']({instanceName:_0xd6b89b},_0x595b4f){const _0x349dcc=a0_0x1df5a5;if((0x0,ne['isBase64'])(_0x595b4f?.[_0x349dcc(0x269)]?.[_0x349dcc(0x516)])&&!_0x595b4f?.['mediaMessage']?.['fileName'])throw new m('For\x20bse64\x20the\x20file\x20name\x20must\x20be\x20informed.');if((0x0,ne[_0x349dcc(0x6ae)])(_0x595b4f?.[_0x349dcc(0x269)]?.[_0x349dcc(0x516)])||(0x0,ne['isBase64'])(_0x595b4f?.[_0x349dcc(0x269)]?.['media']))return await this['waMonitor'][_0x349dcc(0x8f4)][_0xd6b89b][_0x349dcc(0x269)](_0x595b4f);throw new m(_0x349dcc(0x44d));}async[a0_0x1df5a5(0x3e5)]({instanceName:_0x26a647},_0x4396da){const _0x2fa9e7=a0_0x1df5a5;if((0x0,ne[_0x2fa9e7(0x6ae)])(_0x4396da[_0x2fa9e7(0x4bb)][_0x2fa9e7(0x6aa)])||(0x0,ne[_0x2fa9e7(0x419)])(_0x4396da[_0x2fa9e7(0x4bb)]['image']))return await this['waMonitor'][_0x2fa9e7(0x8f4)][_0x26a647][_0x2fa9e7(0x1c8)](_0x4396da);throw new m(_0x2fa9e7(0x44d));}async[a0_0x1df5a5(0x47e)]({instanceName:_0x2b8e9c},_0x269826){const _0x162b2d=a0_0x1df5a5;if((0x0,ne[_0x162b2d(0x6ae)])(_0x269826[_0x162b2d(0x48d)][_0x162b2d(0x892)])||(0x0,ne[_0x162b2d(0x419)])(_0x269826['audioMessage']['audio']))return await this[_0x162b2d(0x4f8)][_0x162b2d(0x8f4)][_0x2b8e9c][_0x162b2d(0x48a)](_0x269826);throw new m('Owned\x20media\x20must\x20be\x20a\x20url\x20or\x20base64');}async[a0_0x1df5a5(0x387)]({instanceName:_0x590669},_0x32d360){const _0x5efaf3=a0_0x1df5a5;return await this[_0x5efaf3(0x4f8)][_0x5efaf3(0x8f4)][_0x590669][_0x5efaf3(0x442)](_0x32d360);}async[a0_0x1df5a5(0x776)]({instanceName:_0x2527b8},_0xfeab9c){const _0x2a849b=a0_0x1df5a5;return await this[_0x2a849b(0x4f8)][_0x2a849b(0x8f4)][_0x2527b8][_0x2a849b(0x87c)](_0xfeab9c);}async[a0_0x1df5a5(0x60a)]({instanceName:_0x1ac755},_0x34be49){const _0x4cfee8=a0_0x1df5a5;return await this[_0x4cfee8(0x4f8)]['waInstances'][_0x1ac755][_0x4cfee8(0x62c)](_0x34be49);}async[a0_0x1df5a5(0x5ff)]({instanceName:_0x290898},_0x4c9089){const _0x2e42ff=a0_0x1df5a5;return await this['waMonitor'][_0x2e42ff(0x8f4)][_0x290898][_0x2e42ff(0x5c6)](_0x4c9089);}async[a0_0x1df5a5(0x2a4)]({instanceName:_0x22d0c6},_0x594d9e){const _0x57fd0b=a0_0x1df5a5;return await this[_0x57fd0b(0x4f8)][_0x57fd0b(0x8f4)][_0x22d0c6][_0x57fd0b(0x5ea)](_0x594d9e);}async['sendReaction']({instanceName:_0x2b4585},_0x2e2b7c){const _0x314998=a0_0x1df5a5;if(!_0x2e2b7c[_0x314998(0x28b)][_0x314998(0x3f6)][_0x314998(0x3c5)](/[^\(\)\w\sà-ú"-\+]+/))throw new m(_0x314998(0x26d));return await this[_0x314998(0x4f8)][_0x314998(0x8f4)][_0x2b4585][_0x314998(0x28b)](_0x2e2b7c);}async[a0_0x1df5a5(0x930)]({instanceName:_0x481467},_0x1fc479){const _0x581e6f=a0_0x1df5a5;return await this['waMonitor'][_0x581e6f(0x8f4)][_0x481467][_0x581e6f(0x26a)](_0x1fc479);}},Pi=require('jsonwebtoken'),js=require(a0_0x1df5a5(0x913)),Kt=class u{constructor(_0x3ab865,_0x3a2b11,_0x2328c3){const _0x597d57=a0_0x1df5a5;this['configService']=_0x3ab865,this[_0x597d57(0x4f8)]=_0x3a2b11,this[_0x597d57(0x3cf)]=_0x2328c3,this[_0x597d57(0x755)]=new $(u[_0x597d57(0x5d3)]);}async[a0_0x1df5a5(0x2b6)](_0x3a159d){const _0x477fa8=a0_0x1df5a5;let _0x343919=this[_0x477fa8(0x4e6)]['get']('AUTHENTICATION')['JWT'],_0x258ab3=(0x0,Pi[_0x477fa8(0x67b)])({'instanceName':_0x3a159d['instanceName'],'apiName':ot,'tokenId':(0x0,js['v4'])()},_0x343919['SECRET'],{'expiresIn':_0x343919['EXPIRIN_IN'],'encoding':_0x477fa8(0x39d),'subject':_0x477fa8(0x2bf)}),_0xea24f5=await this['repository']['auth']['create']({'jwt':_0x258ab3},_0x3a159d['instanceName']);if(_0xea24f5[_0x477fa8(0x398)])throw this[_0x477fa8(0x755)]['error']({'localError':u[_0x477fa8(0x5d3)]+_0x477fa8(0x6a9),'error':_0xea24f5[_0x477fa8(0x398)]}),new m(_0x477fa8(0x65d),_0xea24f5[_0x477fa8(0x398)]?.[_0x477fa8(0x641)]());return{'jwt':_0x258ab3};}async[a0_0x1df5a5(0x829)](_0x1548e4){const _0x1f0e4b=a0_0x1df5a5;let _0x232b6a=(0x0,js['v4'])()[_0x1f0e4b(0x3e4)](),_0x156f55=await this[_0x1f0e4b(0x3cf)][_0x1f0e4b(0x575)][_0x1f0e4b(0x38e)]({'apikey':_0x232b6a},_0x1548e4[_0x1f0e4b(0x474)]);if(_0x156f55[_0x1f0e4b(0x398)])throw this[_0x1f0e4b(0x755)][_0x1f0e4b(0x398)]({'localError':u[_0x1f0e4b(0x5d3)]+'.jwt','error':_0x156f55['error']}),new m(_0x1f0e4b(0x65d),_0x156f55[_0x1f0e4b(0x398)]?.['toString']());return{'apikey':_0x232b6a};}async[a0_0x1df5a5(0x2e1)](_0x17f149){const _0x102062=a0_0x1df5a5;let _0x5718c5=this[_0x102062(0x4e6)][_0x102062(0x3be)](_0x102062(0x6d5));return await this[_0x5718c5[_0x102062(0x4f0)]](_0x17f149);}},Qt=class{constructor(_0x2e3094){const _0x3690f0=a0_0x1df5a5;this[_0x3690f0(0x4f8)]=_0x2e3094;}async[a0_0x1df5a5(0x91d)](_0x546ae1,_0x283de7){const _0x2e844b=a0_0x1df5a5;return await this[_0x2e844b(0x4f8)][_0x2e844b(0x8f4)][_0x546ae1[_0x2e844b(0x474)]][_0x2e844b(0x91d)](_0x283de7);}async['updateGroupPicture'](_0x5e575a,_0x13770d){const _0x22b64d=a0_0x1df5a5;return await this['waMonitor']['waInstances'][_0x5e575a[_0x22b64d(0x474)]][_0x22b64d(0x5e1)](_0x13770d);}async['groupDesc'](_0x45e9e6,_0x50c33b){const _0x585bf3=a0_0x1df5a5;return await this[_0x585bf3(0x4f8)][_0x585bf3(0x8f4)][_0x45e9e6['instanceName']][_0x585bf3(0x6db)](_0x50c33b);}async['groupName'](_0x20166f,_0x533907){const _0x2e189d=a0_0x1df5a5;return await this[_0x2e189d(0x4f8)][_0x2e189d(0x8f4)][_0x20166f['instanceName']][_0x2e189d(0x1cf)](_0x533907);}async[a0_0x1df5a5(0x2d2)](_0x5e0b4f,_0x5841ba){const _0x4c2e02=a0_0x1df5a5;return await this[_0x4c2e02(0x4f8)][_0x4c2e02(0x8f4)][_0x5e0b4f[_0x4c2e02(0x474)]][_0x4c2e02(0x2d2)](_0x5841ba);}async[a0_0x1df5a5(0x6c0)](_0x9d5c54,_0x569357){const _0xc25312=a0_0x1df5a5;return await this[_0xc25312(0x4f8)]['waInstances'][_0x9d5c54[_0xc25312(0x474)]][_0xc25312(0x6c0)](_0x569357);}async[a0_0x1df5a5(0x653)](_0x5c4c1b,_0xff3362){const _0x793107=a0_0x1df5a5;return await this[_0x793107(0x4f8)][_0x793107(0x8f4)][_0x5c4c1b[_0x793107(0x474)]]['findGroup'](_0xff3362);}async['findGroups'](_0x137cd0){const _0x53b3a7=a0_0x1df5a5;return await this[_0x53b3a7(0x4f8)][_0x53b3a7(0x8f4)][_0x137cd0[_0x53b3a7(0x474)]][_0x53b3a7(0x4f6)]();}async[a0_0x1df5a5(0x536)](_0x4cc950,_0x1d9bea){const _0x44c63d=a0_0x1df5a5;return await this[_0x44c63d(0x4f8)][_0x44c63d(0x8f4)][_0x4cc950[_0x44c63d(0x474)]][_0x44c63d(0x536)](_0x1d9bea);}async[a0_0x1df5a5(0x5a5)](_0x2f9971,_0x4baff2){const _0x1a2032=a0_0x1df5a5;return await this[_0x1a2032(0x4f8)][_0x1a2032(0x8f4)][_0x2f9971[_0x1a2032(0x474)]][_0x1a2032(0x5a5)](_0x4baff2);}async['groupGetInviteInfo'](_0x2c8c4c,_0x3b5b47){const _0x3fdd4d=a0_0x1df5a5;return await this[_0x3fdd4d(0x4f8)][_0x3fdd4d(0x8f4)][_0x2c8c4c['instanceName']][_0x3fdd4d(0x810)](_0x3b5b47);}async[a0_0x1df5a5(0x47b)](_0x8817eb,_0x4b5d95){const _0x380708=a0_0x1df5a5;return await this[_0x380708(0x4f8)][_0x380708(0x8f4)][_0x8817eb[_0x380708(0x474)]]['revokeInviteCode'](_0x4b5d95);}async[a0_0x1df5a5(0x3ff)](_0x3cdf84,_0x1873f3){const _0x540002=a0_0x1df5a5;return await this[_0x540002(0x4f8)][_0x540002(0x8f4)][_0x3cdf84[_0x540002(0x474)]][_0x540002(0x3ff)](_0x1873f3);}async[a0_0x1df5a5(0x225)](_0x1fd566,_0x336ebe){const _0x59e2ef=a0_0x1df5a5;return await this[_0x59e2ef(0x4f8)][_0x59e2ef(0x8f4)][_0x1fd566[_0x59e2ef(0x474)]][_0x59e2ef(0x371)](_0x336ebe);}async['toggleEphemeral'](_0x458eb4,_0x55b524){const _0x550459=a0_0x1df5a5;return await this[_0x550459(0x4f8)]['waInstances'][_0x458eb4['instanceName']][_0x550459(0x50d)](_0x55b524);}async[a0_0x1df5a5(0x2fa)](_0x279a17,_0x3e5155){const _0x2a918a=a0_0x1df5a5;return await this[_0x2a918a(0x4f8)][_0x2a918a(0x8f4)][_0x279a17[_0x2a918a(0x474)]][_0x2a918a(0x2fa)](_0x3e5155);}},Yt=class{constructor(_0x1b0142){this['waMonitor']=_0x1b0142;}[a0_0x1df5a5(0x38e)](_0x44e059,_0x9f0c5c){const _0x207b5a=a0_0x1df5a5;return this[_0x207b5a(0x4f8)][_0x207b5a(0x8f4)][_0x44e059[_0x207b5a(0x474)]]['setWebhook'](_0x9f0c5c);}async['find'](_0x49328d){const _0x5b7f86=a0_0x1df5a5;try{return await this[_0x5b7f86(0x4f8)][_0x5b7f86(0x8f4)][_0x49328d[_0x5b7f86(0x474)]]['findWebhook']();}catch{return{'enabled':null,'url':''};}}},uh=new $(a0_0x1df5a5(0x716)),Xt=class{constructor(_0x1a674c){this['waMonitor']=_0x1a674c;}async[a0_0x1df5a5(0x612)](_0x48460e,_0x578547){const _0x240b29=a0_0x1df5a5;return await this[_0x240b29(0x4f8)][_0x240b29(0x8f4)][_0x48460e[_0x240b29(0x474)]][_0x240b29(0x612)](_0x578547);}async[a0_0x1df5a5(0x684)](_0x5997f9){const _0x105ba1=a0_0x1df5a5;return await this['waMonitor'][_0x105ba1(0x8f4)][_0x5997f9['instanceName']][_0x105ba1(0x684)]();}async[a0_0x1df5a5(0x433)](_0x1b9f83){const _0x386ab7=a0_0x1df5a5;return await this[_0x386ab7(0x4f8)][_0x386ab7(0x8f4)][_0x1b9f83[_0x386ab7(0x474)]][_0x386ab7(0x433)]();}async[a0_0x1df5a5(0x4d3)](_0x31286a){const _0x4d76b3=a0_0x1df5a5;return await this[_0x4d76b3(0x4f8)][_0x4d76b3(0x8f4)][_0x31286a[_0x4d76b3(0x474)]][_0x4d76b3(0x4d3)]();}async[a0_0x1df5a5(0x649)](_0x43e713,_0x44c0ef){const _0x424f02=a0_0x1df5a5;return await this[_0x424f02(0x4f8)][_0x424f02(0x8f4)][_0x43e713['instanceName']][_0x424f02(0x649)](_0x44c0ef);}async[a0_0x1df5a5(0x3ed)](_0x3667ee,_0x12ee69){const _0x40ed6a=a0_0x1df5a5;return await this[_0x40ed6a(0x4f8)][_0x40ed6a(0x8f4)][_0x3667ee[_0x40ed6a(0x474)]][_0x40ed6a(0x3ed)](_0x12ee69);}async[a0_0x1df5a5(0x89f)](_0x5a369b,_0x4a80b8){const _0x3c3f35=a0_0x1df5a5;return await this['waMonitor']['waInstances'][_0x5a369b[_0x3c3f35(0x474)]][_0x3c3f35(0x89f)](_0x4a80b8);}async['updateFlowConfig'](_0x4b7dc2,_0x507a1d){const _0x323c2b=a0_0x1df5a5;return await this['waMonitor'][_0x323c2b(0x8f4)][_0x4b7dc2[_0x323c2b(0x474)]][_0x323c2b(0x37b)](_0x507a1d);}async['startFlow'](_0x220dde,_0x24af49){const _0x3e8745=a0_0x1df5a5;return await this[_0x3e8745(0x4f8)]['waInstances'][_0x220dde['instanceName']][_0x3e8745(0x710)](_0x24af49);}async[a0_0x1df5a5(0x1bb)](_0x551342,_0xb974a3,_0x106be2,_0x1afdad){const _0x4afcc3=a0_0x1df5a5;return await this['waMonitor'][_0x4afcc3(0x8f4)][_0x551342][_0x4afcc3(0x1bb)](_0xb974a3,_0x106be2,_0x1afdad);}async[a0_0x1df5a5(0x388)](_0x4fd91d,_0x50122b){return await this['waMonitor']['waInstances'][_0x4fd91d['instanceName']]['getConversation'](_0x50122b);}async[a0_0x1df5a5(0x310)](_0x555aaa,_0xf6a916){const _0x233e6c=a0_0x1df5a5;return await this[_0x233e6c(0x4f8)]['waInstances'][_0x555aaa[_0x233e6c(0x474)]][_0x233e6c(0x310)](_0xf6a916);}async[a0_0x1df5a5(0x872)](_0x6c3513,_0x4c57a7){const _0x472c95=a0_0x1df5a5;return await this[_0x472c95(0x4f8)]['waInstances'][_0x6c3513['instanceName']][_0x472c95(0x872)](_0x4c57a7);}async[a0_0x1df5a5(0x79f)](_0x2faaf6,_0x56579a){const _0x55d2c2=a0_0x1df5a5;return await this[_0x55d2c2(0x4f8)]['waInstances'][_0x2faaf6[_0x55d2c2(0x474)]][_0x55d2c2(0x79f)](_0x56579a);}async[a0_0x1df5a5(0x496)](_0x41b685,_0x444a17){const _0x5e67a8=a0_0x1df5a5;return await this[_0x5e67a8(0x4f8)][_0x5e67a8(0x8f4)][_0x41b685[_0x5e67a8(0x474)]][_0x5e67a8(0x496)](_0x444a17[_0x5e67a8(0x5da)]);}async[a0_0x1df5a5(0x1f3)](_0x3d961a,_0x19adca,_0x501d9b){const _0x2f96ae=a0_0x1df5a5;return await this[_0x2f96ae(0x4f8)][_0x2f96ae(0x8f4)][_0x3d961a[_0x2f96ae(0x474)]]['createFlow'](_0x19adca,_0x501d9b);}async[a0_0x1df5a5(0x203)](_0x540271,_0x13debd,_0x43a563){const _0x1a724a=a0_0x1df5a5;return await this[_0x1a724a(0x4f8)][_0x1a724a(0x8f4)][_0x540271[_0x1a724a(0x474)]][_0x1a724a(0x203)](_0x13debd,_0x43a563);}async[a0_0x1df5a5(0x2d4)](_0x30cb0f,_0x5c05a3){const _0x3357ea=a0_0x1df5a5;return await this[_0x3357ea(0x4f8)][_0x3357ea(0x8f4)][_0x30cb0f[_0x3357ea(0x474)]]['editFlowBlock'](_0x5c05a3);}async['editFlowReply'](_0x35f326,_0x21183f){const _0x157c4a=a0_0x1df5a5;return await this[_0x157c4a(0x4f8)][_0x157c4a(0x8f4)][_0x35f326[_0x157c4a(0x474)]]['editFlowReply'](_0x21183f);}async['editFlowGroup'](_0x283e8d,_0x7fdfa9){const _0x3f1755=a0_0x1df5a5;return await this['waMonitor']['waInstances'][_0x283e8d[_0x3f1755(0x474)]][_0x3f1755(0x881)](_0x7fdfa9);}async['editFlowCondition'](_0x597e12,_0x36b246){const _0xc8c7ef=a0_0x1df5a5;return await this['waMonitor'][_0xc8c7ef(0x8f4)][_0x597e12[_0xc8c7ef(0x474)]][_0xc8c7ef(0x1e3)](_0x36b246);}async['editFlowVaredit'](_0xa7b39e,_0x59f91f){const _0x2de112=a0_0x1df5a5;return await this[_0x2de112(0x4f8)][_0x2de112(0x8f4)][_0xa7b39e[_0x2de112(0x474)]][_0x2de112(0x88a)](_0x59f91f);}async[a0_0x1df5a5(0x934)](_0x51e03a,_0x2218aa){const _0x1dca73=a0_0x1df5a5;return await this[_0x1dca73(0x4f8)][_0x1dca73(0x8f4)][_0x51e03a[_0x1dca73(0x474)]]['editFlowVariable'](_0x2218aa);}async[a0_0x1df5a5(0x633)](_0x14f849,_0x1d743c){const _0x3564f9=a0_0x1df5a5;return await this[_0x3564f9(0x4f8)][_0x3564f9(0x8f4)][_0x14f849[_0x3564f9(0x474)]]['deleteFlow'](_0x1d743c);}async[a0_0x1df5a5(0x21e)](_0x2b8359){const _0x165016=a0_0x1df5a5;return await this[_0x165016(0x4f8)]['waInstances'][_0x2b8359['instanceName']][_0x165016(0x21e)]();}},Zt=class{constructor(_0x9b9fe3){const _0x234792=a0_0x1df5a5;this[_0x234792(0x22e)]=_0x9b9fe3;}async[a0_0x1df5a5(0x7d0)](_0x2707c7,_0x4b6385){const _0x2105fe=a0_0x1df5a5;return this[_0x2105fe(0x22e)][_0x2105fe(0x38e)](_0x2707c7,_0x4b6385);}async[a0_0x1df5a5(0x57e)](_0xa94a55){const _0x238ff5=a0_0x1df5a5;return this[_0x238ff5(0x22e)][_0x238ff5(0x756)](_0xa94a55);}},es=class extends _{constructor(_0x5b9683,_0x2d8de5){const _0x4e63c2=a0_0x1df5a5;super(_0x2d8de5),this[_0x4e63c2(0x804)]=_0x5b9683,this[_0x4e63c2(0x4e6)]=_0x2d8de5;}async['create'](_0x23f5c8,_0x2bd287){const _0x168978=a0_0x1df5a5;try{return this[_0x168978(0x8fd)]['ENABLED']?{'insertCount':(await this[_0x168978(0x804)][_0x168978(0x6ef)]({'_id':_0x2bd287},{..._0x23f5c8},{'upsert':!0x0}))[_0x168978(0x273)]}:{'insertCount':0x1};}catch(_0x330794){return _0x330794;}}async[a0_0x1df5a5(0x1be)](_0x137e3f){const _0x294611=a0_0x1df5a5;try{if(this[_0x294611(0x8fd)][_0x294611(0x765)]){await this[_0x294611(0x804)][_0x294611(0x4c7)]({'_id':_0x137e3f});return;}}catch(_0x4423c2){return{'error':_0x4423c2};}}async[a0_0x1df5a5(0x756)](_0x53aece){const _0x11c066=a0_0x1df5a5;try{if(this['dbSettings']['ENABLED'])return await this[_0x11c066(0x804)][_0x11c066(0x694)]({'_id':_0x53aece});}catch{return{};}}},ts=class extends _{constructor(_0x275b3c,_0x4364b6){const _0x272b28=a0_0x1df5a5;super(_0x4364b6),this[_0x272b28(0x327)]=_0x275b3c,this[_0x272b28(0x4e6)]=_0x4364b6,this[_0x272b28(0x575)]=_0x4364b6['get']('AUTHENTICATION');}async[a0_0x1df5a5(0x38e)](_0x331ffa,_0xc71e9){const _0x4c7c37=a0_0x1df5a5;try{if(this['dbSettings']['ENABLED'])return{'insertCount':(await this[_0x4c7c37(0x327)][_0x4c7c37(0x66e)]({'_id':_0xc71e9},{'$set':{..._0x331ffa}},{'upsert':!0x0}))[_0x4c7c37(0x273)]};}catch(_0x4d31a1){return{'error':_0x4d31a1};}}async[a0_0x1df5a5(0x336)](_0x5661d3,_0x160876){const _0x250313=a0_0x1df5a5;try{if(this[_0x250313(0x8fd)][_0x250313(0x765)])return{'insertCount':(await this[_0x250313(0x327)][_0x250313(0x51a)](_0x5661d3,{'$set':_0x160876},{'upsert':!0x1}))[_0x250313(0x273)]};throw new Error(_0x250313(0x57f));}catch(_0x53a776){return{'error':_0x53a776};}}async[a0_0x1df5a5(0x315)](_0x28f19){const _0x30d199=a0_0x1df5a5;try{if(this[_0x30d199(0x8fd)][_0x30d199(0x765)])return{'insertCount':(await this[_0x30d199(0x327)][_0x30d199(0x315)](_0x28f19))[_0x30d199(0x408)]};throw new Error(_0x30d199(0x2e7));}catch(_0x2cee81){return{'error':_0x2cee81};}}async[a0_0x1df5a5(0x1be)](_0x1cfcb3){const _0x2d8595=a0_0x1df5a5;try{if(this['dbSettings'][_0x2d8595(0x765)]){await this[_0x2d8595(0x327)][_0x2d8595(0x4c7)]({'_id':_0x1cfcb3});return;}}catch(_0x295c20){return{'error':_0x295c20};}}async['find'](_0x4e0950){const _0x1813b1=a0_0x1df5a5;try{if(this[_0x1813b1(0x8fd)]['ENABLED'])return await this[_0x1813b1(0x327)][_0x1813b1(0x694)]({'_id':_0x4e0950});}catch{return{};}}async[a0_0x1df5a5(0x7b9)](){const _0xb9f1cc=a0_0x1df5a5;try{if(this[_0xb9f1cc(0x8fd)]['ENABLED'])return await this[_0xb9f1cc(0x327)][_0xb9f1cc(0x756)]();}catch{return[];}}async[a0_0x1df5a5(0x2a6)](_0x27fd5e){const _0x48a786=a0_0x1df5a5;try{if(this[_0x48a786(0x8fd)][_0x48a786(0x765)])return await this[_0x48a786(0x327)][_0x48a786(0x756)](_0x27fd5e);}catch{return[];}}},ss=class extends _{async[a0_0x1df5a5(0x4c7)](_0x236c9e){const _0x2eda8d=a0_0x1df5a5;try{let _0x4df2c1=A(_0x236c9e[_0x2eda8d(0x7e5)]);return{'deletedCount':(await Ce['deleteOne'](_0x4df2c1))[_0x2eda8d(0x408)]};}catch(_0x1c3ef1){return{'error':_0x1c3ef1?.['toString']()};}}async[a0_0x1df5a5(0x66e)](_0x1fd123,_0xca3d13){const _0x43b352=a0_0x1df5a5;try{let _0x141471=await Ce[_0x43b352(0x75f)](_0x1fd123);return _0x141471?(Object['assign'](_0x141471,_0xca3d13),await _0x141471[_0x43b352(0x67c)]()):(console[_0x43b352(0x398)](_0x43b352(0x5e2),_0x1fd123),null);}catch(_0x492ee8){return console[_0x43b352(0x398)]('Erro\x20ao\x20atualizar\x20o\x20fluxo:',_0x492ee8),null;}}async[a0_0x1df5a5(0x48b)](_0x35b722){const _0x145511=a0_0x1df5a5;try{return await new Ce(_0x35b722)[_0x145511(0x67c)]();}catch(_0x288f61){return console[_0x145511(0x398)](_0x145511(0x299),_0x288f61),null;}}async['findAll'](_0x20fe36){const _0x5bc412=a0_0x1df5a5;try{let _0x2ae954=_0x20fe36['where']??{};return await Ce['find'](_0x2ae954)[_0x5bc412(0x8e1)](_0x20fe36[_0x5bc412(0x8e1)]??0x0)[_0x5bc412(0x489)]();}catch(_0x4f994b){return console[_0x5bc412(0x398)]('Erro\x20ao\x20buscar\x20fluxos:',_0x4f994b),[];}}async[a0_0x1df5a5(0x694)](_0xffbfde){const _0x1e642b=a0_0x1df5a5;try{let _0x471f0f=A(_0xffbfde[_0x1e642b(0x7e5)]);return await Ce[_0x1e642b(0x694)](_0x471f0f)[_0x1e642b(0x489)]();}catch{return null;}}},as=class extends _{['getConversationModelForOwner'](_0x1dd384){return Sa(_0x1dd384);}async[a0_0x1df5a5(0x2de)](_0x504f28){const _0x3c7849=a0_0x1df5a5;if(_0x504f28[_0x3c7849(0x303)]!==0x0)try{return{'insertCount':(await this[_0x3c7849(0x62d)](_0x504f28[0x0][_0x3c7849(0x36f)])[_0x3c7849(0x293)]([..._0x504f28]))[_0x3c7849(0x303)]};}catch(_0x2fe127){return _0x2fe127;}}async[a0_0x1df5a5(0x1be)](_0xc622ee,_0x60e894){const _0x233f47=a0_0x1df5a5;try{let _0x63c9f0=this['getConversationModelForOwner'](_0x60e894),_0x2dc66c=A(_0xc622ee[_0x233f47(0x7e5)]);return{'deletedCount':(await _0x63c9f0[_0x233f47(0x315)](_0x2dc66c))[_0x233f47(0x408)]};}catch(_0x3fc03a){return{'error':_0x3fc03a?.['toString']()};}}async[a0_0x1df5a5(0x4c7)](_0x4dd5b0,_0x4bcf30){const _0x13d04d=a0_0x1df5a5;try{let _0x46ffad=this[_0x13d04d(0x62d)](_0x4bcf30),_0x5d4bfe=A(_0x4dd5b0[_0x13d04d(0x7e5)]);return{'deletedCount':(await _0x46ffad[_0x13d04d(0x4c7)](_0x5d4bfe))[_0x13d04d(0x408)]};}catch(_0x2ac4e0){return{'error':_0x2ac4e0?.[_0x13d04d(0x641)]()};}}async[a0_0x1df5a5(0x62e)](_0x3828d3,_0x102aaa){const _0x22ece6=a0_0x1df5a5;try{if(_0x3828d3[_0x22ece6(0x303)]===0x0)return;let _0x16a011=this[_0x22ece6(0x62d)](_0x102aaa),_0x146573=_0x3828d3[_0x22ece6(0x948)](_0x479695=>({'updateOne':{'filter':{'name':_0x479695['name'],'owner':_0x102aaa},'update':{..._0x479695}}})),{modifiedCount:_0x4aefa2}=await _0x16a011[_0x22ece6(0x8d1)](_0x146573);return{'insertCount':_0x4aefa2};}catch{return;}}async[a0_0x1df5a5(0x51a)](_0x39fdbf,_0x1c9cec,_0x4a3704){const _0x35ea0f=a0_0x1df5a5;try{return{'modifiedCount':(await this[_0x35ea0f(0x62d)](_0x4a3704)[_0x35ea0f(0x51a)](_0x39fdbf,{'$set':_0x1c9cec})[_0x35ea0f(0x1cc)]())[_0x35ea0f(0x273)]};}catch(_0x33a30d){return console[_0x35ea0f(0x398)](_0x35ea0f(0x377),_0x33a30d),{'error':_0x33a30d};}}async[a0_0x1df5a5(0x66e)](_0x395478,_0x1a8eb5,_0x2fa082){const _0x449d77=a0_0x1df5a5;try{return await this['getConversationModelForOwner'](_0x2fa082)[_0x449d77(0x600)]({'_id':_0x395478},{'$set':_0x1a8eb5},{'new':!0x0,'upsert':!0x0})[_0x449d77(0x489)]();}catch(_0x4c968f){return console[_0x449d77(0x398)](_0x4c968f),null;}}async[a0_0x1df5a5(0x756)](_0x11b1f3,_0x2aad80){const _0x5c5b46=a0_0x1df5a5;try{return await this['getConversationModelForOwner'](_0x2aad80)[_0x5c5b46(0x756)](_0x11b1f3)['sort']({'lastInteraction':-0x1})[_0x5c5b46(0x489)]();}catch{return[];}}async[a0_0x1df5a5(0x694)](_0x536d83,_0x39c61d){const _0x465594=a0_0x1df5a5;try{return await this['getConversationModelForOwner'](_0x39c61d)[_0x465594(0x694)]({..._0x536d83['where']})[_0x465594(0x489)]();}catch{return null;}}async[a0_0x1df5a5(0x73b)](_0x3ca58f){const _0x207b35=a0_0x1df5a5;try{return await this[_0x207b35(0x62d)](_0x3ca58f)[_0x207b35(0x8dd)][_0x207b35(0x552)](),{'success':!0x0};}catch(_0x594c9a){return console[_0x207b35(0x398)](_0x594c9a),{'success':!0x1,'error':_0x594c9a};}}},is=class extends _{[a0_0x1df5a5(0x5af)](_0x3f75bb){return Ma(_0x3f75bb);}async[a0_0x1df5a5(0x8d1)](_0x3b3d91,_0x171cf5){const _0x2b12ce=a0_0x1df5a5;try{return await this[_0x2b12ce(0x5af)](_0x171cf5)[_0x2b12ce(0x8d1)](_0x3b3d91);}catch(_0x1feb7c){return console[_0x2b12ce(0x398)]('Erro\x20ao\x20executar\x20bulkWrite:',_0x1feb7c),null;}}async[a0_0x1df5a5(0x48b)](_0x5383dc,_0x357a58){const _0x5a0b98=a0_0x1df5a5;try{let _0x446c76=this[_0x5a0b98(0x5af)](_0x357a58);return await new _0x446c76(_0x5383dc)[_0x5a0b98(0x67c)]();}catch(_0xddbd73){return console[_0x5a0b98(0x398)]('Erro\x20ao\x20criar\x20e\x20salvar\x20uma\x20nova\x20mensagem:',_0xddbd73),null;}}async['deleteOne'](_0x2916fb,_0x53fa0a){const _0x161b6d=a0_0x1df5a5;try{return await this[_0x161b6d(0x5af)](_0x53fa0a)[_0x161b6d(0x532)](_0x2916fb),{};}catch(_0x2d207e){return{'error':_0x2d207e?.[_0x161b6d(0x641)]()};}}async[a0_0x1df5a5(0x66e)](_0x680a1f,_0x1e75a7,_0x394ff0,_0x53088c={}){const _0x428997=a0_0x1df5a5;try{return await this['getScheduleMessageModelForOwner'](_0x394ff0)['findOneAndUpdate'](_0x680a1f,_0x1e75a7,{..._0x53088c,'new':!0x0})[_0x428997(0x489)]();}catch(_0x165d35){return console[_0x428997(0x398)](_0x428997(0x93e),_0x165d35),null;}}async[a0_0x1df5a5(0x522)](_0x536c24,_0x1e6416,_0xd7e59b){const _0x52b2eb=a0_0x1df5a5;try{return await this[_0x52b2eb(0x5af)](_0xd7e59b)[_0x52b2eb(0x601)](_0x536c24,_0x1e6416,{'new':!0x0})[_0x52b2eb(0x489)]();}catch(_0x3bc073){return console[_0x52b2eb(0x398)](_0x52b2eb(0x93e),_0x3bc073),null;}}async['find'](_0x5eabc9,_0x435eef){const _0xe01e02=a0_0x1df5a5;try{return await this[_0xe01e02(0x5af)](_0x435eef)['find'](_0x5eabc9[_0xe01e02(0x7e5)])['limit'](_0x5eabc9?.[_0xe01e02(0x8e1)]??0x0)[_0xe01e02(0x766)]({'when':0x1})['lean']();}catch{return[];}}async['findOne'](_0x4c2707,_0x32e2f0){const _0xfde1dd=a0_0x1df5a5;try{return await this[_0xfde1dd(0x5af)](_0x32e2f0)['findOne'](_0x4c2707[_0xfde1dd(0x7e5)])[_0xfde1dd(0x766)]({'when':0x1})[_0xfde1dd(0x489)]();}catch{return null;}}async['findById'](_0x1e4913,_0x45a787){const _0xa24cb6=a0_0x1df5a5;try{return await this[_0xa24cb6(0x5af)](_0x45a787)['findById'](_0x1e4913)[_0xa24cb6(0x489)]();}catch{return null;}}async[a0_0x1df5a5(0x315)](_0x51d91c,_0x2d59ad){const _0x4893bc=a0_0x1df5a5;try{return{'deletedCount':(await this[_0x4893bc(0x5af)](_0x2d59ad)[_0x4893bc(0x315)](_0x51d91c))['deletedCount']};}catch(_0x989a9e){return console[_0x4893bc(0x398)](_0x4893bc(0x780),_0x989a9e),{'error':_0x989a9e};}}async[a0_0x1df5a5(0x73b)](_0x4707d6){const _0x441e54=a0_0x1df5a5;try{return await this[_0x441e54(0x5af)](_0x4707d6)['collection'][_0x441e54(0x552)](),{'success':!0x0};}catch(_0x2135af){return console[_0x441e54(0x398)](_0x2135af),{'success':!0x1,'error':_0x2135af};}}},os=class extends _{async[a0_0x1df5a5(0x62e)](_0x11a93d,_0x464dbd){const _0x360781=a0_0x1df5a5;try{if(this[_0x360781(0x8fd)]['ENABLED'])return await Ie[_0x360781(0x600)]({'_id':_0x464dbd},{'$set':_0x11a93d},{'new':!0x0});}catch(_0xeac025){throw console[_0x360781(0x398)](_0x360781(0x4a4),_0xeac025),_0xeac025;}}async[a0_0x1df5a5(0x724)](_0xd46d8c){const _0x26f813=a0_0x1df5a5;try{let _0x4bbc37=await Ie['findById'](_0xd46d8c);return _0x4bbc37?_0x4bbc37[_0x26f813(0x91c)]||(_0x4bbc37['autoCompleteMessages']=[],await _0x4bbc37[_0x26f813(0x67c)]()):(_0x4bbc37=new Ie({'_id':_0xd46d8c,'autoCompleteMessages':[]}),await _0x4bbc37[_0x26f813(0x67c)]()),_0x4bbc37;}catch(_0x1e1672){return _0x1e1672[_0x26f813(0x909)]===0x2af8&&_0x1e1672[_0x26f813(0x23f)]&&_0x1e1672[_0x26f813(0x23f)][_0x26f813(0x4fb)]?(console[_0x26f813(0x398)](_0x26f813(0x4e2)),await Ie[_0x26f813(0x8dd)]['dropIndex'](_0x26f813(0x28e)),null):(console['error'](_0x26f813(0x5d9),_0x1e1672),null);}}},Jo=new $(a0_0x1df5a5(0x5fa)),qo=new Qe(S),Vo=new Jt(S),Go=new nt(S),Bo=new qt(oa,S),Wo=new Vt(na,S),zo=new es(ha,S),Ho=new ts(ua,S),Ko=new Ne(We,S),Qo=new ss(S),Yo=new Gt(S),Xo=new as(S),Zo=new is(S),er=new os(S),me=new He(qo,Vo,Go,Bo,Wo,zo,Ho,Ko,Qo,Xo,Yo,Zo,er,T?.['getClient']()),G=new jt(hs,S,me),tr=new Kt(S,G,me),sr=new Yt(G),As=new Zt(sr),O=new Xt(G),ue=new zt(G,S,me,hs,tr),B=new Ht(G),D=new Bt(G),q=new Qt(G);Jo[a0_0x1df5a5(0x4f4)](a0_0x1df5a5(0x4cc));var Ag=require(a0_0x1df5a5(0x651)),Js=require('fs'),Di=I(require(a0_0x1df5a5(0x670))),ki=I(require(a0_0x1df5a5(0x31a))),je=class u{static #e;static set[a0_0x1df5a5(0x618)](_0x4e8a2c){this.#e=_0x4e8a2c;}static get[a0_0x1df5a5(0x670)](){const _0x5c21e3=a0_0x1df5a5;let {FULLCHAIN:_0x2a642e,PRIVKEY:_0x28b950}=S[_0x5c21e3(0x3be)]('SSL_CONF');return Di['createServer']({'cert':(0x0,Js[_0x5c21e3(0x454)])(_0x2a642e),'key':(0x0,Js[_0x5c21e3(0x454)])(_0x28b950)},u.#e);}static get['http'](){const _0x7366b6=a0_0x1df5a5;return ki[_0x7366b6(0x4e9)](u.#e);}},Je=I(require('fs')),qi=I(require(a0_0x1df5a5(0x518))),qe=I(require(a0_0x1df5a5(0x383))),ns=I(require(a0_0x1df5a5(0x2e2))),rs=require(a0_0x1df5a5(0x2ea));function ar(){const _0x410d8d=a0_0x1df5a5;G[_0x410d8d(0x415)]();let _0x540d69=ns['default'][_0x410d8d(0x4bc)](__dirname,_0x410d8d(0x93d));Ji(_0x540d69);}var Ji=_0x4b0c9d=>{const _0x239880=a0_0x1df5a5;let _0x130eb1=Je[_0x239880(0x686)][_0x239880(0x772)](_0x4b0c9d),_0x3eacc2=0xc*0x3c*0x3c*0x3e8,_0x260617=0x2*0x3c*0x3c*0x3e8,_0x2a0e6b=new Date()[_0x239880(0x6d7)]();_0x130eb1[_0x239880(0x504)](_0xf9b08c=>{const _0x21a969=_0x239880;let _0x20ed42=ns[_0x21a969(0x686)][_0x21a969(0x4bc)](_0x4b0c9d,_0xf9b08c),_0x555205=Je[_0x21a969(0x686)]['statSync'](_0x20ed42)[_0x21a969(0x1f7)][_0x21a969(0x6d7)]();_0x2a0e6b-_0x555205>_0x3eacc2&&(Je[_0x21a969(0x686)]['unlinkSync'](_0x20ed42),console[_0x21a969(0x485)](_0x21a969(0x65a)+_0xf9b08c));}),setTimeout(()=>Ji(_0x4b0c9d),_0x260617);};function ir(){const _0x520e84=a0_0x1df5a5;let _0x164c71=new $(_0x520e84(0x3f7)),_0x585f47=(0x0,ye[_0x520e84(0x686)])();_0x585f47[_0x520e84(0x2c2)]((0x0,ji[_0x520e84(0x686)])({'origin'(_0x3f0d53,_0x219779){const _0x570c65=_0x520e84;let {ORIGIN:_0x52ef72}=S[_0x570c65(0x3be)]('CORS');return _0x3f0d53||(_0x3f0d53='*'),_0x52ef72[_0x570c65(0x2f8)]('*')!==-0x1||_0x52ef72[_0x570c65(0x2f8)](_0x3f0d53)!==-0x1?_0x219779(null,!0x0):_0x219779(new Error('Not\x20allowed\x20by\x20CORS'));},'methods':[...S['get'](_0x520e84(0x2b2))[_0x520e84(0x8f7)]],'credentials':S[_0x520e84(0x3be)](_0x520e84(0x2b2))[_0x520e84(0x255)]}),(0x0,ye[_0x520e84(0x43e)])({'extended':!0x0,'limit':_0x520e84(0x3e2)}),(0x0,ye[_0x520e84(0x6de)])({'limit':_0x520e84(0x3e2)})),_0x585f47[_0x520e84(0x2c2)]((_0x2c4a15,_0x3022da,_0x31165a)=>{const _0x4e66ba=_0x520e84;_0x2c4a15[_0x4e66ba(0x2e2)]['startsWith'](_0x4e66ba(0x426))?_0x31165a():(0x0,Ui[_0x4e66ba(0x686)])()(_0x2c4a15,_0x3022da,_0x31165a);}),_0x585f47[_0x520e84(0x297)](_0x520e84(0x5b6),'hbs'),_0x585f47[_0x520e84(0x297)](_0x520e84(0x2c1),(0x0,Vs[_0x520e84(0x4bc)])(ce,_0x520e84(0x2c1))),_0x585f47['use'](ye[_0x520e84(0x686)][_0x520e84(0x61e)]((0x0,Vs[_0x520e84(0x4bc)])(ce,_0x520e84(0x424)))),_0x585f47[_0x520e84(0x2c2)]((_0x44581f,_0x23570e,_0x3501af)=>{const _0x337748=_0x520e84;let _0x53337d=_0x23570e[_0x337748(0x748)];_0x23570e[_0x337748(0x748)]=function(_0x18c069){const _0x368657=_0x337748;if(_0x44581f[_0x368657(0x896)][_0x368657(0x762)]===_0x368657(0x8d4)||_0x44581f[_0x368657(0x916)][_0x368657(0x3b6)]===_0x368657(0x8d4)){let _0x45db5e=JSON['parse'](_0x18c069);_0x18c069=JSON[_0x368657(0x28d)](_0x177161(_0x45db5e));}return _0x53337d[_0x368657(0x849)](_0x23570e,[_0x18c069]);},_0x3501af();}),_0x585f47[_0x520e84(0x2c2)]('/',Le),_0x585f47[_0x520e84(0x2c2)]((_0x2ab11a,_0x9e20c9,_0x53070d,_0x33bbc4)=>{const _0x3e2c10=_0x520e84;if(_0x2ab11a)return _0x53070d[_0x3e2c10(0x781)](_0x2ab11a[_0x3e2c10(0x781)]||0x1f4)[_0x3e2c10(0x6de)](_0x2ab11a);},(_0x2e1cbf,_0x1ae3bf,_0x3ca873)=>{const _0x5cbb54=_0x520e84;let {method:_0x432ef0,url:_0x134b61}=_0x2e1cbf;_0x1ae3bf[_0x5cbb54(0x781)](0x194)[_0x5cbb54(0x6de)]({'status':0x194,'message':_0x5cbb54(0x379)+_0x432ef0[_0x5cbb54(0x3e4)]()+'\x20'+_0x134b61,'error':_0x5cbb54(0x5db)}),_0x3ca873();});let _0x177161=(_0x160b2c,_0xf72ded=_0x520e84(0x50b))=>{const _0x267177=_0x520e84;let _0x25abb2=(_0xc6765c,_0x14a7f4=null,_0xb7feee=!0x1)=>{const _0x2a2cff=a0_0x5a64;let _0x49888c={};return Object[_0x2a2cff(0x326)](_0xc6765c)[_0x2a2cff(0x504)](_0xe302c1=>{const _0x25dbc9=_0x2a2cff;let _0x48ce5f=_0xc6765c[_0xe302c1],_0x181241=''+_0xf72ded+_0xe302c1;_0x14a7f4&&!_0xb7feee&&(_0x181241=_0x14a7f4+'.'+_0xe302c1),!_0x48ce5f&&_0x48ce5f!==0x0&&_0x48ce5f!==!0x1||typeof _0x48ce5f>'u'?_0x49888c[_0x181241]=null:typeof _0x48ce5f!=_0x25dbc9(0x1b3)&&!Array['isArray'](_0x48ce5f)?_0x49888c[_0x181241]=_0x48ce5f:typeof _0x48ce5f==_0x25dbc9(0x1b3)&&!Array[_0x25dbc9(0x4d9)](_0x48ce5f)?_0x49888c=Object[_0x25dbc9(0x503)](_0x49888c,_0x25abb2(_0x48ce5f,_0x181241)):Array['isArray'](_0x48ce5f)&&(typeof _0x48ce5f[0x0]==_0x25dbc9(0x1b3)?(_0x49888c[_0x181241]=[],_0x48ce5f[_0x25dbc9(0x504)](_0x79860e=>{const _0x205622=_0x25dbc9;_0x49888c[_0x181241][_0x205622(0x6cd)](_0x25abb2(_0x79860e,_0x181241,!0x0));})):_0x49888c[_0x181241]=_0x48ce5f);}),_0x49888c;};return Array[_0x267177(0x4d9)](_0x160b2c)?_0x160b2c[_0x267177(0x948)](_0x5cb9e6=>_0x25abb2(_0x5cb9e6)):typeof _0x160b2c==_0x267177(0x1b3)&&_0x160b2c!==null?_0x25abb2(_0x160b2c):{};},_0x364dc8=S[_0x520e84(0x3be)]('SERVER');je[_0x520e84(0x618)]=_0x585f47;let _0x221337=je[_0x364dc8[_0x520e84(0x4f0)]],_0x52804a=_0x520e84(0x7e0);_0x221337[_0x520e84(0x5c4)](_0x364dc8[_0x520e84(0x43d)],()=>{const _0x14a534=_0x520e84;_0x164c71[_0x14a534(0x485)](_0x52804a),_0x164c71[_0x14a534(0x485)](_0x364dc8[_0x14a534(0x4f0)][_0x14a534(0x3e4)]()+_0x14a534(0x8ba)+_0x364dc8[_0x14a534(0x43d)]);}),ar(),Zs();}var or=a0_0x1df5a5(0x7e7),rr=ns[a0_0x1df5a5(0x686)][a0_0x1df5a5(0x4bc)](__dirname,a0_0x1df5a5(0x413)),Ae=null;function nr(){return new Promise((_0x2a42b4,_0x496d22)=>{const _0x18dfde=a0_0x5a64;Je[_0x18dfde(0x686)][_0x18dfde(0x221)](rr,_0x18dfde(0x4ee),(_0x23c139,_0x4befb8)=>{const _0x187d19=_0x18dfde;if(_0x23c139){Ae=_0x23c139,_0x2a42b4();return;}qi[_0x187d19(0x686)][_0x187d19(0x8a5)](_0x4befb8)[_0x187d19(0x6b5)]['url']===or?(Ae=null,_0x2a42b4()):(Ae=new Error(_0x187d19(0x42a)),_0x2a42b4());});});}async function cr(){const _0x19f71a=a0_0x1df5a5;try{await nr(),await Bi();}catch(_0x4317a2){console[_0x19f71a(0x398)](_0x19f71a(0x853)+_0x4317a2),process[_0x19f71a(0x4d4)](0x1);}}cr();async function Vi(){const _0x4e33bb=a0_0x1df5a5;let _0x286428;try{_0x286428=(await qe[_0x4e33bb(0x686)][_0x4e33bb(0x3be)]('https://jsonip.com'))['data']['ip'];}catch(_0x4f2c3b){console[_0x4e33bb(0x398)](_0x4f2c3b);try{_0x286428=(await qe['default']['get'](_0x4e33bb(0x367)))[_0x4e33bb(0x561)]['ip'];}catch(_0x3b1be1){console['error'](_0x3b1be1);try{_0x286428=(await qe[_0x4e33bb(0x686)][_0x4e33bb(0x3be)](_0x4e33bb(0x480)))[_0x4e33bb(0x561)][_0x4e33bb(0x3c5)](/\d+.\d+.\d+.\d+/)[0x0];}catch(_0x1ea703){return console[_0x4e33bb(0x398)](_0x1ea703),!0x1;}}}return _0x286428;}var Li=0x0;async function lr(){const _0x54dc79=a0_0x1df5a5;let _0x5d9f34=await new de(S['get'](_0x54dc79(0x7c6)))[_0x54dc79(0x6d8)]();return console['log']('instancias:\x20',_0x5d9f34['length']),_0x5d9f34[_0x54dc79(0x303)];}function ur(_0x139d45){const _0x337e4f=a0_0x1df5a5;let _0xa61a4a=_0x139d45[_0x337e4f(0x3be)](_0x337e4f(0x3f7))[_0x337e4f(0x5d6)],_0x1e6064=_0x139d45[_0x337e4f(0x3be)](_0x337e4f(0x223));console[_0x337e4f(0x485)](_0x337e4f(0x1bf),_0xa61a4a),console[_0x337e4f(0x485)](_0x337e4f(0x6f4),_0x1e6064);let _0x125e6f='',_0x50f491=_0xa61a4a||'';if(_0xa61a4a){let _0x1c9cd6=_0xa61a4a['match'](/\/\/(.*?)\./);console['log'](_0x337e4f(0x6ea),_0x1c9cd6),_0x1c9cd6&&_0x1c9cd6[0x1]&&(_0x125e6f=_0x1c9cd6[0x1],console['log']('Subdomínio\x20extraído\x20da\x20URL:',_0x125e6f));}if(!_0x125e6f&&_0x1e6064&&_0x1e6064[_0x337e4f(0x3d3)]){let _0x1871e4=_0x1e6064[_0x337e4f(0x3d3)][_0x337e4f(0x709)]('/');console[_0x337e4f(0x485)](_0x337e4f(0x89d),_0x1871e4);let _0xe00eaf=_0x1871e4[_0x1871e4['length']-0x2];if(console[_0x337e4f(0x485)](_0x337e4f(0x7a0),_0xe00eaf),_0xe00eaf){let _0x3edb5e=_0xe00eaf[_0x337e4f(0x709)]('.');console[_0x337e4f(0x485)](_0x337e4f(0x2d8),_0x3edb5e),_0x3edb5e['length']>0x2&&(_0x125e6f=_0x3edb5e[0x0],console[_0x337e4f(0x485)]('Subdomínio\x20extraído\x20do\x20caminho\x20SSL:',_0x125e6f),_0x50f491=''+_0xe00eaf);}}return{'subdomain':_0x125e6f||_0x337e4f(0x887),'fullURL':_0x50f491||_0x337e4f(0x4fc)};}var {subdomain:se,fullURL:Gs}=ur(S);console['log'](a0_0x1df5a5(0x448),se),console[a0_0x1df5a5(0x485)](a0_0x1df5a5(0x82e),Gs);async function dr(){const _0x11a0f0=a0_0x1df5a5;let _0x395255=S[_0x11a0f0(0x3be)](_0x11a0f0(0x7c6)),_0x5926aa=S['get'](_0x11a0f0(0x6d5))[_0x11a0f0(0x901)]['KEY'],_0x42b360=S[_0x11a0f0(0x3be)]('SSL_CONF'),_0x336f80=await Vi(),_0x211cb4=S[_0x11a0f0(0x3be)]('SERVER')[_0x11a0f0(0x43d)],_0x29ebd0=Gs;try{let _0x757051={'ip':_0x336f80||null,'redis_enable':_0x395255?.[_0x11a0f0(0x765)]||null,'apikey':_0x5926aa||null,'ssl':_0x42b360?.[_0x11a0f0(0x46c)]||null,'lastupdate':Gi||null,'port':_0x211cb4||null,'gitInstallError':Ae?.[_0x11a0f0(0x6c9)]||null,'url':_0x29ebd0||null,'subdomain':se};if(console[_0x11a0f0(0x485)](_0x11a0f0(0x647),_0x757051['ip']),_0x395255&&_0x395255['ENABLED']){let _0x153f58=await lr();_0x757051[_0x11a0f0(0x423)]=_0x153f58||null;}for(let _0x73fbeb in _0x757051)_0x757051[_0x11a0f0(0x6ac)](_0x73fbeb)&&_0x73fbeb!=='ip'&&(_0x757051[_0x73fbeb]=JSON[_0x11a0f0(0x28d)](_0x757051[_0x73fbeb]));return(await qe[_0x11a0f0(0x686)][_0x11a0f0(0x880)]('https://uazapi.bubbleapps.io/api/1.1/wf/verificar/',_0x757051))[_0x11a0f0(0x561)];}catch(_0x1da559){return console[_0x11a0f0(0x398)](_0x1da559),!0x1;}}var qs=!0x1,Gi=0x27b,pr=0x3,Fi=0x1b7740;async function Bi(){const _0x5df7d8=a0_0x1df5a5;let _0x18018f='fora\x20do\x20git';Ae===null&&(_0x18018f=await Vi());let _0x5ec70b=await dr();if(_0x5ec70b){if(_0x5ec70b[_0x5df7d8(0x3ec)][_0x5df7d8(0x220)]===!0x0){Ae===null&&_0x5ec70b[_0x5df7d8(0x3ec)][_0x5df7d8(0x4d0)]-Gi>0x0&&await hr(),qs||(qs=!0x0,ir());let _0x164f2e=0x24*0x3c*0x3c,_0x238e0b=_0x5ec70b[_0x5df7d8(0x3ec)][_0x5df7d8(0x58b)]>_0x164f2e?_0x164f2e:_0x5ec70b[_0x5df7d8(0x3ec)][_0x5df7d8(0x58b)],_0x552d84=Number(_0x238e0b);if(isNaN(_0x552d84)){console['error'](_0x5df7d8(0x918));return;}let _0x59d4b4=Math[_0x5df7d8(0x346)](_0x552d84/0xe10),_0x54e561=Math['floor'](_0x552d84%0xe10/0x3c),_0x3a8245=new Date(Date[_0x5df7d8(0x78f)]()+_0x552d84*0x3e8);setTimeout(()=>{const _0xae4ae4=_0x5df7d8;console['log'](_0xae4ae4(0x94b)),process['exit'](0x0);},_0x552d84*0x3e8);let _0x14321f=_0x81a178=>_0x81a178[_0x5df7d8(0x641)]()[_0x5df7d8(0x8a1)](0x2,'0'),_0x392cca=_0x5df7d8(0x3d2)+_0x14321f(_0x59d4b4)+_0x5df7d8(0x783)+_0x14321f(_0x54e561)+_0x5df7d8(0x421)+_0x14321f(_0x3a8245['getHours']())+':'+_0x14321f(_0x3a8245[_0x5df7d8(0x3e1)]())+'.';console[_0x5df7d8(0x485)](_0x392cca);}else return console[_0x5df7d8(0x485)](_0x5df7d8(0x443)),qs&&(console[_0x5df7d8(0x485)](_0x5df7d8(0x8fe)),process[_0x5df7d8(0x4d4)]()),_0x5df7d8(0x6c1);}else{if(Li++,Li<pr)console[_0x5df7d8(0x485)](_0x5df7d8(0x36e)+Fi/0xea60+_0x5df7d8(0x357)),setTimeout(Bi,Fi);else return console['error'](_0x5df7d8(0x29b)),_0x5df7d8(0x62f);}}async function hr(){const _0x59a5db=a0_0x1df5a5;console['log'](_0x59a5db(0x6ff)),console[_0x59a5db(0x485)]('Limpando\x20logs\x20do\x20PM2...'),(0x0,rs[_0x59a5db(0x34b)])(_0x59a5db(0x5cb),{'shell':!0x0})['on']('close',_0x2acb4b=>{const _0x2c8294=_0x59a5db;_0x2acb4b!==0x0?console[_0x2c8294(0x398)](_0x2c8294(0x548)):(console[_0x2c8294(0x485)](_0x2c8294(0x3a9)),console[_0x2c8294(0x485)]('Removendo\x20package-lock.json\x20e\x20a\x20dependência\x20específica...'),(0x0,rs[_0x2c8294(0x34b)])(_0x2c8294(0x34a),{'shell':!0x0})['on'](_0x2c8294(0x261),_0x3f181a=>{const _0x163c46=_0x2c8294;if(_0x3f181a!==0x0)console[_0x163c46(0x398)](_0x163c46(0x6b7));else{console['log']('Arquivos\x20removidos\x20com\x20sucesso,\x20iniciando\x20atualização\x20do\x20git\x20e\x20npm\x20install.');let _0x47e5cb=(0x0,rs[_0x163c46(0x34b)])('git\x20fetch\x20&&\x20git\x20reset\x20--hard\x20origin/main\x20&&\x20git\x20pull\x20&&\x20npm\x20install\x20--unsafe-perm',{'shell':!0x0});_0x47e5cb[_0x163c46(0x47a)]['on'](_0x163c46(0x561),_0x36cb70=>{const _0x3bab21=_0x163c46;console['log'](_0x3bab21(0x768)+_0x36cb70);}),_0x47e5cb[_0x163c46(0x4be)]['on']('data',_0x39571e=>{const _0x1d31b5=_0x163c46;console[_0x1d31b5(0x398)](_0x1d31b5(0x5c1)+_0x39571e);}),_0x47e5cb['on']('exit',_0x45b25e=>{const _0x95055a=_0x163c46;_0x45b25e!==0x0?console[_0x95055a(0x398)](_0x95055a(0x86f)+_0x45b25e):console['log'](_0x95055a(0x208)),console[_0x95055a(0x485)](_0x95055a(0x6fc)),setTimeout(()=>process[_0x95055a(0x4d4)](),0x2710);});}}));});}0x0&&(module['exports']={'fullURL':fullURL,'subdomain':subdomain});